# StackOverflow 问答 11840000-11840999

# html - 网站在所有屏幕上都相同

> ID：11840002
> 
> 赞同：2
> 
> 时间：2012-08-07T05:52:03.293
> 
> 标签：html, css, position

好的，你好，我的名字是乔丹。我有一个需要在所有屏幕尺寸上都相同的网站。我正在使用我认为可行的百分比。所以两个问题...

1.  如何使用百分比定位底部/顶部标签（我尝试过但没有用）
2.  此外，如果上述方法不起作用，我应该怎么做才能使其在每一页上都相同。
3.  如果它确实有效，有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T05:54:37.893

百分比行不通。一种方法是在主 div 上定义最小宽度、最小高度，这样无论屏幕尺寸如何，页面都不会小于最小尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:00:35.620

您可以使用媒体查询 [http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T05:54:44.027

欢迎来到 StackOverflow！您可能想尝试使用`em`单位而不是百分比，并确保不要使用固定宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:02:41.077

通过使用媒体查询，您可以通过定位所需的屏幕分辨率来创建响应式网站的布局。

例如

```
@media screen and (max-width: 699px) and (min-width: 320px) {
   div { background: blue; width: 100px; height: 100px; }
}

@media screen and (max-width: 1024px) and (min-width: 700px) {
   div { background: green; width: 300px; height: 100px;  }
}

@media screen and (max-width: 1280px) and (min-width: 1025px) {
   div { background: red; width: 600px; height: 100px;  }
}​ 
```

# php - php.ini open_basedir 有一个没有值的主值，而是一个本地值

> ID：11840008
> 
> 赞同：0
> 
> 时间：2012-08-07T05:52:40.050
> 
> 标签：php

我已更改 php.ini 并将 open_basedir 设置为无值。但是，在 phpinfo() 中，有一个本地值。我正在使用一个脚本，它要求 open_basedir 没有安装价值。如何删除本地值？我在vps上。我也尝试过使用 .htaccess 来设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:15:33.263

我通过编辑设置了 open_basedir 的 httpd.conf 解决了这个问题。我只是删除了 httpd.conf 中的 php 管理指令，本地值变为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T05:55:14.213

尝试添加`ini_set('open_basedir', NULL);`安装脚本将包含的文件，例如`index.php`文件或配置文件。

可能是您无权覆盖每个文件夹的配置变量（使用 php.ini、.htaccess 或 ini_set）。

要检查是否是这种情况（因为它是 VPS），请查看`/etc/apache2/sites-available/default`并检查是否[`AllowOverride`](http://httpd.apache.org/docs/current/mod/core.html#allowoverride)设置为无。

这也可能是您的特定虚拟主机的情况，不一定适用于您的默认虚拟主机配置。

# php - 交易完成页面在应该发送一封时发送两封电子邮件

> ID：11840011
> 
> 赞同：0
> 
> 时间：2012-08-07T05:52:50.283
> 
> 标签：php, payment-gateway

我使用 Payson 支付网关，完成支付后，当用户被重定向回感谢页面时，两封相同的电子邮件会发送给用户。请帮我解决这个问题。代码如下：

```
$select="select * from #__content where id=12 and state=1";

$db->setQuery($select);
$result = $db->loadObject();

echo $result->introtext;
//echo $_REQUEST['id'];

$select = "select * from #__booking order by id desc";
$db->setQuery($select);
$db->query();
$id=$db->loadObject();

$insert_id=$id->id;
$printid=base64_encode($insert_id);

        $db=& JFactory::getDBO();
        $select_brand="select * from #__booking where id=".$id->id."";
        $db->setQuery($select_brand);
        $result = $db->loadObject();

        $db=& JFactory::getDBO();
        $select_brand="select * from #__brand where published=1 and id=".$result->brand."";
        $db->setQuery($select_brand);
        $result_brand = $db->loadObject();

        $select_model="select * from #__modno where published=1 and id=".$result->model."";
        $db->setQuery($select_model);
        $result_model = $db->loadObject();

        $printlink=JURI::root()."print.php?id=".$insert_id;
        $link="http://www.status.repair24.se/?id=".$insert_id;
        $phoneimagelink=JURI::root()."templates/mobile/images/phicon.png";
        $logolink=JURI::root()."templates/mobile/images/2.png";
        $to= $result->email;
        $subject = "Invoice Mail";
        $body.='<center><div style="width:100%;background-color:#f1f3f6;"><br>
                        <table bgcolor="#dde1e8" cellpadding="10" width="70%" style="border:1px solid #000;">
                            <tr><td>
                                <table bgcolor="white" align="center" cellpadding="5" cellspacing="5" width="100%" style="border:1px solid #000;">
                                <tr>
                                    <td>
                                        <table width="100%">
                                            <tr>
                                                <td align="left"><img src="'.$logolink.'" width="200"></td>
                                                <td align="right"><img src="'.$phoneimagelink.'"  style="margin:3px 5px -3px 0" alt="" border="0">123456789</td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Name : '.$result->name.'
                                    </td>
                                </tr>
                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Address: '.$result->address.'
                                    </td>
                                </tr>
                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Zip Code: '.$result->zip.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Mobile : '.$result->mobile.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Email : '.$result->email.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Brand : '.$result_brand->name.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Model: '.$result_model->name.'
                                    </td>
                                </tr>
                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Size '.$result->size.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Imei  : '.$result->imei.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Operator : '.$result->operator.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Lock CODE : '.$result->lockcode.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Error Descriptions : '.rtrim($result->repairs,',').'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Price : '.$result->price.' SEK
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        Repair Number : '.$result->num.'
                                    </td>
                                </tr>

                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        <a href='.$printlink.'>Click here </a>to print Your Booking Details.
                                    </td>
                                </tr>
                                <tr>
                                    <td style="font-size:12px;font-family:Arial;" align="left">
                                        <a href='.$link.'>Click here </a>to check status.
                                    </td>
                                </tr>

                            </table></td></tr></table><br><br></div></center>';

        // To send HTML mail, the Content-type header must be set
    $from = array("info@repair24.se", "Repair 24");
 // To send HTML mail, the Content-type header must be set
        # Invoke JMail Class
    $mailer = JFactory::getMailer();

    # Set sender array so that my name will show up neatly in your inbox
    $mailer->setSender($from);

    # Add a recipient -- this can be a single address (string) or an array of addresses
    $mailer->addRecipient($to);

    $mailer->setSubject($subject);
    $mailer->setBody($body);

    # If you would like to send as HTML, include this line; otherwise, leave it out
    $mailer->isHTML(1);

    # Send once you have set all of your options
    $ma=$mailer->send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:52:35.733

..我面临着类似代码的同样问题（在Joomla 2.5上）！

我还可以补充一点，一些电子邮件地址总是作为单人接收，而另一些电子邮件地址总是作为双胞胎接收。在我看来，这不是问题，因为代码要么与接收者相关，要么与发送者（在本例中为 SendMail）和接收者相关的混合问题。

感谢您的任何建议或诊断指示。

最好的祝愿，

胭脂红

..我自己解决了，在这里我提出问题和解决方案，以便它可以帮助其他人：

*   我有这段代码，用于发送带有 HTML 内容的电子邮件：

    ```
    $mailing_list = & JFactory::getMailer ();

    for ($i = 0; $i < count ($recipients_mailing_list); $i++) {

      if (substr_count ($recipients_mailing_list[$i], '@')) {

      $sent_ok = $mailing_list->sendMail ('info@my_domain', 'my_domain', $recipients_mailing_list[$i], $email_ref, htmlspecialchars_decode ($email_body), TRUE);

      }
    } 
    ```

..它处理了发送，因此任何处理过的新接收者也再次发送前一个接收者。即：如果我有 3 个收件人的数组，第一个收到电子邮件 3 次，第二个收到两次，最后一个是唯一收到一封电子邮件的人。

我解决了将声明 JFactory::getMailer () 移动到 for 循环中的问题，以便它更新“实例构造”并清理它，如下所示：

```
 for ($i = 0; $i < count ($recipients_mailing_list); $i++) {

      if (substr_count ($recipients_mailing_list[$i], '@')) {

      $mailing_list = & JFactory::getMailer ();

      $sent_ok = $mailing_list->sendMail ('info@my_domain', 'my_domain', $recipients_mailing_list[$i], $email_ref, htmlspecialchars_decode ($email_body), TRUE);

      }
    } 
```

在代码方面它不是很有效，但它工作正常。

有没有更好的方法来解决它？

感谢您的任何建议。

最好的祝愿，

胭脂红

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:57:04.693

Joomla 2.5 邮件功能如下。

**它在成功**或**JError 对象**时返回true 。所以，你的情况应该如下。

$send =& $mailer->Send();

如果（$发送！==真）{

```
echo 'Error sending email: ' . $send->message; 
```

} 别的 {

```
echo 'Mail sent'; 
```

}

您将使用以下链接查看有关 joomla 文档的更多详细信息。 [http://docs.joomla.org/Sending_email_from_extensions](http://docs.joomla.org/Sending_email_from_extensions)

希望此解决方案对您有用。

# javascript - HTML5 Canvas - 使用一组命令通过上下文进行绘制？

> ID：11840020
> 
> 赞同：0
> 
> 时间：2012-08-07T05:53:19.987
> 
> 标签：javascript, html, canvas

我想做类似以下的事情......

```
// commmands - context commands to build primitives. 
// See comments in loop for example.
function DrawToCanvas(commands, height, width){

    var canvas = document.createElement("canvas");
    canvas.width = inWidth;
    canvas.height = inHeight;
    var context = canvas.getContext("2d")    

    for(var i = 0; i < commands.length; i++){

        // Do Stuff like 
        // context.beginPath();
        // context.moveTo(25,25);
        // context.lineTo(105,25);
        // context.lineTo(25,105);
        // context.fill();

        // context.commands[i] <- Something like this
    }

    return canvas;
} 
```

是否有一些等价于 context.commands[i] 等...

我在想如果这是不可能的，另一种选择是传递一个回调函数。就像是...

```
function MakeALine(){

var newLineAsCanvas =  DrawToCanvas(100,100,function(context){
     context.beginPath();
     context.moveTo(25,25);
     // etc...
 }
} 
```

做这样的事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:18:01.260

我有点困惑你在做什么，但 javascript [call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)命令可能会有所帮助。

```
var commands = [];
commands.push(function(context) {
  context.beginPath();
});
commands.push(function(context) {
  context.moveTo(25,25);
  context.lineTo(105,25);
  context.lineTo(25,105);
});
commands.push(function(context) {
  context.fill();
});
document.body.appendChild(DrawToCanvas(commands, 300, 300));

function DrawToCanvas(commands, height, width){

    var canvas = document.createElement("canvas");
    canvas.width = width;
    canvas.height = height;
    var context = canvas.getContext("2d")

    for(var i = 0; i < commands.length; i++){
        commands[i].call(this, context);
    }

    return canvas;
} 
```

# jquery - YUI 工具提示无法在 JQUERY UI 对话框中位于顶部

> ID：11840021
> 
> 赞同：0
> 
> 时间：2012-08-07T05:53:23.353
> 
> 标签：jquery, tooltip, yui

我尝试使用 Jquery UI 打开一个对话框并绘制一些 MS 图表。我想使用 YUI 工具提示在 MS Chart 上显示工具提示。但是，此工具提示功能不能在此对话框的顶部。我搜索解决方案，它可能需要在 YUI 工具提示上设置“容器”，但我不知道该怎么做。

* * *

```
 $("#dialog").dialog({
            autoOpen: true,
            width: 640,
            height: 'auto',
            position: [400, 110]
        });

        $(".demo a").click(function (e) {
            $("#dialog").dialog("open");
        });

        for (var i = 0; i < $('area').length; i++) {

            $('area:eq(' + i + ')').attr('id', 'area-id-' + i); //change id
            $.data(this, 'area-title-' + i, $('area:eq(' + i + ')').attr('title')); //store title

            if ($.data(this, 'area-title-' + i) != undefined) {

                new YAHOO.widget.Tooltip("myTip", {
                    context: 'area-id-' + i,
                    text: "<div style=\'padding: 25px; height: 145px; width:320px; color: White; background:transparent url(Styles/black_w370_h194.png); font-family: Calibri;\'>" + $.data(this, 'area-title-' + i) + "</div>",
                    width: 300,
                    autodismissdelay: 3600000, // show one hour
                    showdelay: 0
                });
            } 
```

## }

# c++ - 是否可以以编程方式将 SQLite 数据库转换为 C/C++ 中的 SQL 语句？

> ID：11840022
> 
> 赞同：12
> 
> 时间：2012-08-07T05:53:26.100
> 
> 标签：c++, c, sqlite

我知道SQLite 命令行工具中存在[.dump](http://www.sqlite.org/sqlite.html)函数，Python 有一个模拟该 .dump 函数的[iterdump命令。](http://docs.python.org/library/sqlite3)

是否有标准 API 调用或 C/C++ 包装器以编程方式提供该 .dump 功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T06:10:00.200

该 API 似乎没有任何转储功能（[https://www.sqlite.org/capi3ref.html](https://www.sqlite.org/capi3ref.html)），但您可以通过以下方式构建转储：

*   创建一个新函数，该函数将使用`sqlite3_exec()`or的缓冲区结果`sqlite3_get_table()`并将其转储到`FILE *`

*   使用SQLite源码中提供的dump函数，可以在（`shell.c`）中找到。

编辑：添加此示例

```
/* TODO : This is just a sample code, modify it to meet your need */
void select_and_dump_sqlite3_table(sqlite3 *dbh)
{
    FILE    *dump_file;
    int i;
    sqlite3_stmt *stmt;

    dump_file = fopen(path_to_dump_file, "w");
    if (dump_file == NULL) {
        /* Error handling with errno and exit */
    }

    sqlite3_prepare_v2(dbh, "SELECT name, address, phone FROM Person",
                       0, &stmt, NULL);
    /* dump columns names into the file */
    for (i = 0; i < 3; i++) {
        fprintf (dump_file, "%30s | ", sqlite3_column_name(stmt, i));
    }
    printf ("\n");

    /* Dump columns data into the file */
    while (SQLITE_ROW == sqlite3_step(stmt)) {
        for (i = 0; i < 3; i++) {
          fprintf (dump_file, "%30s | ", sqlite3_column_text (stmt, i));
        }
      printf ("\n");
    }
    /* We're ready to leave */
    sqlite3_finalize (stmt);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T06:09:54.217

您可以执行 a`SELECT * FROM sqlite_master`来获取所有表和索引（每行都有一个用于表和索引的列，以及一个`type`包含用于创建该表/索引的 sql 语句的列）。`'table'``'index'``sql`

然后对于在 中找到的每个表`sqlite_master`，`SELECT *`从中（每`sqlite_master`行有一`name`列）并写出表中的所有数据。

有关更多信息，请参阅 SQLite[常见问题解答](http://www.sqlite.org/faq.html)和[命令行 shell](http://www.sqlite.org/sqlite.html)页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:11:34.993

我不知道是否有针对它的预制工具，但是您可以自己实现它。

首先，通过读取主表获取架构。之后，您将拥有数据库架构（表名和列）。您将能够自动读取所有数据并为其构建 SQL。这应该不难实现。

# vb.net - VB.Net foreach 正在反向循环控制

> ID：11840026
> 
> 赞同：2
> 
> 时间：2012-08-07T05:53:56.897
> 
> 标签：vb.net, foreach

我有这个 vb.net 代码，我在其中使用 foreach 循环复选框

但问题是它从 Checkbox 19 到 1 开始，但我想从 Checkbox1 到 19 开始执行此操作

```
Dim i = 0
For Each myControl As CheckBox In Me.Controls
    myControl.Text = Form1.DataGridView1.Columns(i).HeaderText
    myControl.Checked = My.Settings("HC" & i)
i+=1
Next 
```

那么如何使用正常的for循环执行上述代码，我不确定如何使用正常的for循环来循环控制

* * *

所以这是新的工作代码

```
Option Strict On
Option Infer On

 For i= 1 To 19
        Dim myControl = DirectCast(Me.Controls("CheckBox" + i.ToString()), CheckBox)
        myControl.Text = Form1.DataGridView1.Columns(i).HeaderText
        MsgBox(i)
        myControl.Checked = CBool(My.Settings("HC" & i))
    Next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T06:01:54.433

使用普通`For`循环，您需要手动构造复选框名称：

```
For i = 1 To 19
    Dim myControl = DirectCast(Me.Controls("checkbox" + i.ToString()), CheckBox)
    ... ' do something with myControl
Next 
```

这使用[ControlCollection 索引器](http://msdn.microsoft.com/en-us/library/s1865435)按名称访问控件，然后将控件强制转换为，以便可以为变量`CheckBox`推断正确的类型。`myControl`

（显然，代码示例假定`Option Strict On`和`Option Infer On`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:07:18.017

您实际上需要整数循环变量，但如果您不需要，您可以使用 LINQ：

```
 For Each cb In (From c In Controls.OfType(Of CheckBox) Order By CInt(Mid(c.Name, Len("checkbox") + 1)) Select c) 
```

# android - Android Google+ 应用上的 Listitem 动画

> ID：11840029
> 
> 赞同：0
> 
> 时间：2012-08-07T05:54:10.330
> 
> 标签：android, android-layout, android-animation

如何添加仅在第一次加载项目时出现的动画，如 Android 上的 Google+ 应用程序中的动画？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:27:52.193

在自定义适配器的 getView 方法中，尝试将以下动画添加到 convertView(list view item)，你应该能够做到这一点..它对我有用

您需要将 TranslateAnimation 设置为视图，这样就可以解决问题。如果您希望此动画仅发生一次，则需要使用某些键值对将传递给适配器的数组更新为“isAnimated” :"true" 动画在视图项上至少发生一次后，如果您将 item.isAnimated 设置为 true，则不应运行动画。

```
TranslateAnimation translateAnim = new TranslateAnimation(0, 0, 200, 0 );
listView.clearAnimation();
translateAnim.setDuration(500);   
translateAnim.setFillBefore(true);   
listView.startAnimation(translateAnim); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:16:55.833

您可能正在寻找这样的东西：

> [http://jsfiddle.net/zXBDd/2/](http://jsfiddle.net/zXBDd/2/)

更多信息：[向下滚动时在 HTML5 移动应用程序 (PhoneGap) （如 Google Plus iPhone 应用程序）中为图像设置动画？](https://stackoverflow.com/questions/11319654/animate-images-in-html5-mobile-app-phonegap-like-google-plus-iphone-app-when-s)

# asp.net - 在 asp Multiview 中使用验证

> ID：11840030
> 
> 赞同：0
> 
> 时间：2012-08-07T05:54:19.377
> 
> 标签：asp.net, validation, multiview

我正在尝试在包含两个视图的页面中使用验证。第一种观点有效，但第二种观点无效。Validationssummary 错误永远不会显示，它会吞噬我提供给它的任何内容，甚至是非常不正确的数据。所以..我肯定错过了一些东西，或者不可能有这个组合？我是否需要自己进行验证以防止不正确的数据，然后我该怎么做？问候

```
 <form id="form1" runat="server" defaultfocus="txtCardID">
<div>
    <asp:ValidationSummary ID="ValidationSummary1" runat="server" 
            ValidationGroup="action" ShowMessageBox="True" ShowSummary="False" />
    <asp:Panel ID="pnlCardID" runat="server">
        <asp:MultiView ID="Mview" runat="server">
        <asp:View runat="server" ID="card">
    .......
                 <asp:TextBox ID="txtAmount" runat="server" Columns="6" MaxLength="6" 
                        ValidationGroup="action"></asp:TextBox> 
                    <asp:RequiredFieldValidator ID="rfvSum" runat="server" 
                        ErrorMessage="Error!" Text="*"     ValidationGroup="action" 
                        ControlToValidate="txtAmount" Display="Dynamic" SetFocusOnError="True"></asp:RequiredFieldValidator>
                    <asp:RangeValidator ID="rngvSum" runat="server" 
                        ErrorMessage="Error!" Text="*" 
                        ValidationGroup="action" ControlToValidate="txtAmount" Display="Dynamic" 
                        SetFocusOnError="True" MaximumValue="99999" MinimumValue="1" Type="Currency"></asp:RangeValidator>
  .......
              <asp:view runat="server" ID="purchase">
  .......
                      <td><asp:TextBox ID="txtSum" runat="server" Columns="6" MaxLength="6" 
                        ToolTip="Total sum" ValidationGroup="action" /> 
                   <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                        ErrorMessage="Another Error!" Text="*" ValidationGroup="action" 
                        ControlToValidate="txtSum" Display="Dynamic" SetFocusOnError="True"></asp:RequiredFieldValidator>
                    <asp:RangeValidator ID="RangeValidator1" runat="server" 
                        ErrorMessage="Error again!" Text="*" 
                        ValidationGroup="action" ControlToValidate="txtSum" Display="Dynamic" 
                        SetFocusOnError="True" MaximumValue="99999" MinimumValue="1" Type="Currency"></asp:RangeValidator>
                        </td> 
```

# asp.net - 如何在多种模式下滚动asp列表框中的选定项目？

> ID：11840034
> 
> 赞同：0
> 
> 时间：2012-08-07T05:54:33.040
> 
> 标签：asp.net, listbox

我有一个选择模式为多个的列表框

```
<asp:ListBox id="Listbox1" runat="server" Width="230px" Height="168px" 
SelectionMode="Multiple"></asp:ListBox> 
```

我正在使用数据源进行数据绑定

```
Me.Listbox1.Items.Clear()
Me.Listbox1.DataSource = ayl_arraylist_memberslist
Me.Listbox1.DataTextField = "Key"
Me.Listbox1.DataValueField = "Value"
Me.Listbox1.DataBind() 
```

我将一个列表框`listbox1`项目发送到用户列表框，但在按添加后我无法滚动到所选项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:00:45.450

最好带html列表框

```
<select id="ListBox1" runat="server" size="10" style="width:230px; height:168px"></select>

<%--<asp:ListBox id="ListBox1" runat="server" Width="230px" Height="174px" SelectionMode="Multiple" ></asp:ListBox>--%> 
```

并在 document.ready 中使用 jquery 列表框更改功能，我们可以在多模式下修改为

```
$("#ListBox1").attr("multiple", false);
 $("#ListBox1").change(function () { $("#ListBox1").attr("multiple", true); }); 
```

并在 .cs 代码后面编写以获取选定索引

# python - Python XML：获取直接子节点

> ID：11840036
> 
> 赞同：2
> 
> 时间：2012-08-07T05:54:38.940
> 
> 标签：python, xml

我有一个如下所示的 xml。我想获取Node1下的所有直接子节点。我正在尝试使用 childNodes，但是，它也返回 Node21 和 Node22。我怎样才能得到那些直接的子节点

```
<Node1>
  <Node11>
    <Node21>
    </Node21>
    <Node22>
    </Node22>
    <Node23>
    </Node23>
  </Node11>
  <Node12>
  </Node12>
  <Node13>
  </Node13>
</Node1> 
```

**更新** 对不起，混乱。我犯了一个错误，似乎它只获取直接子节点。但是，item number is the childnodes 仍然超过了真正的子节点。我尝试获取节点名称。我收到很多“#text”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:02:15.243

`xml.ElementTree.Element`支持迭代器协议，所以可以`list(elem)`如下使用：

```
import xml.etree.cElementTree as ET

s = '''
<Node1>
  <Node11>
    <Node21>
    </Node21>
    <Node22>
    </Node22>
    <Node23>
    </Node23>
  </Node11>
  <Node12>
  </Node12>
  <Node13>
  </Node13>
</Node1>
'''

root = ET.fromstring(s)

print root
print list(root) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:39:20.477

有两种方法可以处理文本节点。如果你真的想继续使用 dom，你可以用过滤器去掉文本节点：

```
>>> filter(lambda node: node.nodeType != xml.dom.Node.TEXT_NODE, myNode.childNodes)
[<DOM Element: Node11 at 0x18e64d0>, <DOM Element: Node12 at 0x18e6950>, <DOM Element: Node13 at 0x18e6a70>] 
```

或列表理解：

```
>>> [x for x in myNode.childNodes if x.nodeType != xml.dom.Node.TEXT_NODE]
[<DOM Element: Node11 at 0x18e64d0>, <DOM Element: Node12 at 0x18e6950>, <DOM Element: Node13 at 0x18e6a70>] 
```

如果您不需要继续使用 dom，我建议您按照 Eli Bendersky 的建议使用 ElementTree。

# javascript - iframe 中的 Flash 内容覆盖 chrome 扩展

> ID：11840038
> 
> 赞同：1
> 
> 时间：2012-08-07T05:54:44.993
> 
> 标签：javascript, google-chrome, google-chrome-extension

**简而言之**

寻找一种方法来显示位置=固定`div`在闪光灯位于 iframe 内的闪光灯顶部。

**问题**

我目前正在开发一个谷歌浏览器扩展程序，它在窗口顶部显示一个视觉辅助。

基本上，这是一个`<div>`带有`position:fixed`.

问题是一些网站显示 Flash 内容，当我的扩展程序放在这些 Flash 元素之上时，它们会覆盖它。我想找到一种在这些 Flash 元素之上显示我的内容的方法。

**问题**

flash 位于 iframe 元素内，并将 wmode 设置为 window ，这意味着它覆盖了所有内容。但是，我无法更改 flash 元素的内容，因为它位于不同的域中（尝试会导致同源错误）

**我想避免的**

我想避免在每个网站上运行扩展程序并检查其引荐来源网址是否是我正在运行的网站

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:08:08.000

您可以在 iframe 的上下文中执行脚本，如下所示：

```
var code = '[].forEach.call( document.querySelectorAll("embed"), function(embed){embed.setAttribute("wmode", "transparent")});';

chrome.tabs.executeScript( tabRef, {

    code: code,

    allFrames: true //Executes the script in all frames

}, function() { }); 
```

这将找到所有嵌入元素并将其设置`wmode`为`"transparent"`以便 html 元素可以覆盖它们。

请参阅：http: [//developer.chrome.com/extensions/content_scripts.html#pi](http://developer.chrome.com/extensions/content_scripts.html#pi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:28:32.000

我相信您的问题与这个问题非常相似：[overlay opaque div over youtube iframe](https://stackoverflow.com/questions/3820325/overlay-opaque-div-over-youtube-iframe)

如果我理解正确，可以通过在 iframe 嵌入中添加 wmode=opaque 参数来解决问题。例如（使用 youtube 视频）：

**- HTML iframe 嵌入**

***确保 wmode=opaque 参数是 iframe 的源 url 之后的第一个参数（如此处所述：[overlay opaque div over youtube iframe](https://stackoverflow.com/questions/3820325/overlay-opaque-div-over-youtube-iframe)）***

```
<iframe class="youtube-player" type="text/html" width="520" height="330" src="http://www.youtube.com/embed/CMNry4PE93Y?wmode=opaque" frameborder="0"></iframe> 
```

**- CSS**

```
#overlay {
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:#000;
opacity:0.8;
/*background:rgba(255,255,255,0.8); or just this*/
z-index:50;
color:#fff; 
```

}

# javascript - 根据 url 滑动 div

> ID：11840050
> 
> 赞同：0
> 
> 时间：2012-08-07T05:55:28.803
> 
> 标签：javascript, jquery

我在这里有一个页面。

[http://www.kharota.com/cantsay/index.html](http://www.kharota.com/cantsay/index.html)

我想要的是随着 url 的变化上下滑动 div 例如 index.html#thisweek 将滑动包含本周数据的 div。有时它起作用，有时它不起作用。我很困惑没有错误但仍然无法正常工作。代码如下

```
var loc = window.location.href;
if(loc.indexOf( '#' ) >= 0 ) {
   var  hash = loc.substr( loc.indexOf('#') + 1 );
}else{

    var hash = "";
}

if(!hash){
$("#ca").slideDown("fast");     

  }else{

 switch(hash){

     case "iwantagig":
         $("#cd").slideDown("fast");
         $("#ca").slideUp("fast");
         $("#cb").slideUp("fast");
         $("#cc").slideUp("fast");

         break;

     case "jointhecrew":

         $("#cc").slideDown("fast");
         $("#ca").slideUp("fast");
         $("#cb").slideUp("fast");
         $("#cd").slideUp("fast");

         break;

     case "birthdayGuestlist":

         $("#cb").slideDown("fast");
         $("#ca").slideUp("fast");
         $("#cc").slideUp("fast");
         $("#cd").slideUp("fast");

         break;

     case "thisweek":

         $("#ca").slideDown("fast");
         $("#cb").slideUp("fast");
         $("#cc").slideUp("fast");
         $("#cd").slideUp("fast");

         break;

 }
 } 
```

页面在这里。如果有人提供帮助，我将不胜感激。

[http://www.kharota.com/cantsay/index.html](http://www.kharota.com/cantsay/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:06:14.813

```
$(document).ready(function(){
    $('a.change-page').click(function(){        
        var hash = window.location.hash.substring(1);
        if(hash) {
            $('.slider').slideUp("fast");
            $('.' + hash).slideDown("fast");
            // where '.' + hash are your page divs which must have the class slider and classes like  jointhecrew, iwantgag etc
        } else {
            $("#ca").slideDown("fast"); 
        }
    });
}); 
```

我无法测试它，但我希望这对你有用

# android - 我怎样才能在android中制作这种网格？

> ID：11840051
> 
> 赞同：2
> 
> 时间：2012-08-07T05:55:45.580
> 
> 标签：android, user-interface, android-widget

![超级连接 4](../Images/60a177cacea39733638074a8df6c7e59.png)

如何在 android 中制作这种或类似类型的网格。任何链接或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:04:00.933

你可以去 TableLayout，通过下面的代码，你会明白的。

使用 ImageButton 并为其设置 3 种类型的图像。- 有洞 - 有黄球 - 有蓝球

```
TableLayout GridTable=new TableLayout(this);        
ImageButton[][] gridButton=new ImageButton[3][3];
GridTable.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
    TableRow[] gridRow=new TableRow[3];        
    for (int i = 0; i < 3; i++) {
        gridRow[i]=new TableRow(this);
        gridRow[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));           
        for (int j = 0; j < 3; j++) {               
            gridButton[i][j]=new ImageButton(this);
            gridButton[i][j].setImageResource(R.drawable.<your_image>);   
            gridRow[i].addView(gridButton[i][j]);
        }   
        GridTable.addView(gridRow[i]);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:04:53.157

假设您使用数据填充网格，使用 GridView 可能更容易

[http://developer.android.com/reference/android/widget/GridView.html](http://developer.android.com/reference/android/widget/GridView.html)

所以每个单元都有数据支持，可能更容易破解。

# android - 向存储在文本视图中的多个联系人发送短信

> ID：11840057
> 
> 赞同：0
> 
> 时间：2012-08-07T05:56:40.987
> 
> 标签：android

在这里，我创建了一个文本视图，并在该文本视图中存储了多个联系人，然后我通过意图将此文本视图值传递给另一个活动。现在我想向存储在接收到的文本视图中的多个联系人发送短信。我已通过使用以下代码完成此操作..但问题是我只能发送到存储在该 textview 中的第一个号码..所以请建议一些替代代码将其发送给所有存储的联系人。

这是我的代码..

```
Bundle bundle=intent2.getExtras();
final String getudisp=bundle.getString("InvisibleNum");

String number =getudisp;
sendSMS(number, message);

private void sendSMS(String number, String message) {

    Intent sentIntent = new Intent(INTENT_ACTION_SENT);
    PendingIntent pendingSentIntent = PendingIntent.getBroadcast(this,
            REQUEST_CODE_ACTION_SENT, sentIntent,
            PendingIntent.FLAG_UPDATE_CURRENT);

    Intent deliveryIntent = new Intent(INTENT_ACTION_DELIVERY);
    PendingIntent pendingDeliveryIntent = PendingIntent.getBroadcast(this,
            REQUEST_CODE_ACTION_DELIVERY, deliveryIntent,
            PendingIntent.FLAG_UPDATE_CURRENT);

    SmsManager smsManager = SmsManager.getDefault();

    // Second parameter is the service center number. Use null if you want
    // to use the default number
    smsManager.sendTextMessage(number, null, message, pendingSentIntent,
            pendingDeliveryIntent);
}

@Override
protected void onPause() {
    super.onPause();
    unregisterReceiver(smsSentDeliveredReceiver);
}

@Override
protected void onResume() {
    super.onResume();
    IntentFilter filter = new IntentFilter(INTENT_ACTION_SENT);
    filter.addAction(INTENT_ACTION_DELIVERY);

    registerReceiver(smsSentDeliveredReceiver, filter);
}

private void initializeReceivers() {
    smsSentDeliveredReceiver = new BroadcastReceiver() {

        public void onReceive1(Context context, Intent intent) {
            processBroadcasts(intent);
        }

        @Override
        public void onReceive(Context arg0, Intent arg1) {
            // TODO Auto-generated method stub

        }
    };
}

private void processBroadcasts(Intent intent) {
    String action = intent.getAction();
    Log.i(TAG, "Received: " + action);

    if (action.equals(INTENT_ACTION_SENT)) {
        Bundle bundle = intent.getExtras();
        // Need to check for error messages
        Log.i(TAG, "Message: Sent");
        Toast.makeText(this, "Message sent", Toast.LENGTH_LONG).show();
    } else if (action.equals(INTENT_ACTION_DELIVERY)) {
        Bundle bundle = intent.getExtras();
        Set<String> keys = bundle.keySet();
        // Need to check for error messages
        Log.i(TAG, "Message: Delivered");
        Toast.makeText(this, "Message delivered", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:14:31.810

* * *

# 以这种方式创建一个类**MultipleSMS**。

* * *

```
 private void MultipleSMS(String phoneNumber, String message) {
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

        // ---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    ContentValues values = new ContentValues();
                    for (int i = 0; i < MobNumber.size() - 1; i++) {
                        values.put("address", MobNumber.get(i).toString());  
                        // txtPhoneNo.getText().toString());
                        values.put("body", MessageText.getText().toString());
                    }
                    getContentResolver().insert(
                            Uri.parse("content://sms/sent"), values);
                    Toast.makeText(getBaseContext(), "SMS sent",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(SENT));

        // ---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(DELIVERED));

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);
    } 
```

* * *

# 现在以这种方式调用**MultipleSMS**：

* * *

这里**MobNumber是一个包含****phoneNumbers**的数组

 **```
 for (int i = 0; i < MobNumber.size(); i++) 
        {
                String message = MessageText.getText().toString();
                String tempMobileNumber = MobNumber.get(i).toString();
                MultipleSMS(tempMobileNumber, message);
         } 
```**

# java - 如何在cron下运行Java程序并导入jar

> ID：11840059
> 
> 赞同：3
> 
> 时间：2012-08-07T05:56:51.573
> 
> 标签：java, cron, terminal, noclassdeffounderror

我的源文件是`.../MyDir/proj/myProj.java`. jar 文件位于`.../MyDir/proj/library`. jar 文件来自[HTMLUnit 2.10](http://sourceforge.net/projects/htmlunit/files/)。

这是我的 cron 文件的来源：

```
0 0 * * * java -classpath .../MyDir/proj/ myProj 
```

但它给了我错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/gargoylesoftware/htmlunit/WebClient 
```

如何修改 cron 文件以导入 jar 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-24T05:42:24.883

**在java中实现CRON Job**非常简单

 ****所需库：** *quartz-2.0.0.jar*

**调度发起者：**

```
import static org.quartz.JobBuilder.newJob;
import static org.quartz.TriggerBuilder.newTrigger;

import java.text.ParseException;

import org.quartz.CronScheduleBuilder;
import org.quartz.JobDetail;
import org.quartz.Scheduler;
import org.quartz.SchedulerException;
import org.quartz.Trigger;
import org.quartz.impl.StdSchedulerFactory;

public class SchedulerListener{

    static Scheduler scheduler = null;
    public static void main(String[] args) {
        // Setup the Job class and the Job group
        JobDetail job = newJob(FileUploadToAzure.class).withIdentity(
                        "CronQuartzJob", "Group").build();

        // Create a Trigger that fires every hour.
        Trigger trigger;
        try {
            trigger = newTrigger()
            .withIdentity("TriggerName", "Group")
            .withSchedule(CronScheduleBuilder.cronSchedule("0 0 * * * ?"))
            .build();

            // Setup the Job and Trigger with Scheduler & schedule jobs
            scheduler = new StdSchedulerFactory().getScheduler();
            scheduler.start();
            scheduler.scheduleJob(job, trigger);

        } catch (ParseException | SchedulerException e) {
            e.printStackTrace();
        }

    }
} 
```

**调度程序类：**

```
import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class SchedulerJob implements Job {
  @SuppressWarnings("unchecked")
    public void execute(JobExecutionContext context) throws JobExecutionException {
    System.out.println("Print at specific time");
}
} 
```

**定时触发**

```
Expression  Meaning :
---------------------------
0 0 12 * * ?    Fire at 12pm (noon) every day
0 15 10 ? * *   Fire at 10:15am every day
0 15 10 * * ?   Fire at 10:15am every day
0 15 10 * * ? * Fire at 10:15am every day
0 15 10 * * ? 2005  Fire at 10:15am every day during the year 2005
0 * 14 * * ?    Fire every minute starting at 2pm and ending at 2:59pm, every day
0 0/5 14 * * ?  Fire every 5 minutes starting at 2pm and ending at 2:55pm, every day 
```

**[有关 CRON 触发器的更多详细信息，请参阅以下链接](http://www.askmani.net/question/crontrigger/)**

[http://www.askmani.net/question/crontrigger/](http://www.askmani.net/question/crontrigger/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:00:26.430

像这样的东西：

```
0 0 * * * java -classpath .../MyDir/proj/:.../MyDir/proj/library/jar1.jar:.../MyDir/proj/library/jar2.jar myProj 
```

或者，如果您使用的是最近的 JVM，则可以使用通配符来匹配所有 JAR 文件。

```
0 0 * * * java -classpath .../MyDir/proj/:.../MyDir/proj/library/\* myProj 
```

（反斜杠可能是不必要的，因为 'globbing' 在那种情况下不太可能匹配任何东西......）

* * *

更好的是，将命令（以及需要运行以准备启动的任何其他命令）放入 shell 脚本，然后从您的 crontab 条目运行脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-03T05:21:22.833

对于 Spring Boot Java 用户，您可以使用**@scheduled**注解。有关更多详细信息和一个很好的示例，请访问[此](https://www.callicoder.com/spring-boot-task-scheduling-with-scheduled-annotation)**

# android - 请协助我想在android中使自定义对话框左对齐或右对齐

> ID：11840063
> 
> 赞同：1
> 
> 时间：2012-08-07T05:57:06.047
> 
> 标签：android, dialog

我需要让我的自定义对话框左对齐或右对齐，我已经阅读了很多教程，但我发现我们无法更改对话框的对齐方式。我需要在我的 android 中创建一个对话框，类似于下面链接中的图像。

如果无法使用对话框，请提供一些符合我要求的自定义对话框的替代方案。

[![这是我要创建的弹出式布局](../Images/a293bb73d55e0b4424f5a3e00032d63f.png)](https://i.stack.imgur.com/4Zmfs.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-08T09:47:40.637

您可以使用 PopUp Window 作为 Android 中的下拉菜单来实现此目的，如下所示：

```
PopupWindow dropdown_group_popup_window;
View popupView = dropdown_layoutInflater.inflate(R.layout.visibility_dropdown_window, 
        (ViewGroup) findViewById(R.id.visibility_dropdown_view));
dropdown_group_popup_window = new PopupWindow(popupView,
        WindowManager.LayoutParams.WRAP_CONTENT, WindowManager.LayoutParams.WRAP_CONTENT);
dropdown_group_popup_window.setContentView(popupView); //you can enter your layout here which you wanna show as a dropdown
dropdown_group_popup_window.showAsDropDown(view);      // here you need to pass the view below which you want to show your dropdown
dropdown_group_popup_window.setOutsideTouchable(true);
dropdown_group_popup_window.setTouchable(true);
dropdown_group_popup_window.setBackgroundDrawable(new BitmapDrawable()); 
```

# iphone - 如何更改默认滑动删除按钮框架更改...

> ID：11840066
> 
> 赞同：2
> 
> 时间：2012-08-07T05:57:35.053
> 
> 标签：iphone, ios4

可以帮我吗.. 是否可以更改默认的滑动删除按钮框架和颜色.. 我是 iPhone 新手...

```
 if ([NSStringFromClass([subview class])isEqualToString:@"UITableViewCellDeleteConfirmationControl"]) 
    {

        UIView *deleteButtonView = (UIView *)[subview.subviews objectAtIndex:0];
        CGRect f = deleteButtonView.frame;
        deleteButtonView.frame = f;
    } 
```

我正在使用这段代码但无法正常工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:04:43.167

我不认为这是可能的。您必须实现自己的“滑动删除”按钮。在表格视图上创建滑动手势识别器，将自己设置为委托，并检测滑动。一旦检测到滑动，确定单元格，添加一个 UIButton（您必须从头开始创建它，因此您需要自己的图像。使用 UIKit Artwork Extractor 来获取 Apple 使用的那个）并设置它的框架。您也可以对此进行动画处理。

我敢肯定，这不是您想听到的答案，但我认为没有办法解决。（另外，问问自己是否真的有必要：Apple 认为一致性非常用户友好，因此您可能要考虑不要偏离这一点。）

# magento - 在前端 magento 上显示颜色下拉菜单

> ID：11840069
> 
> 赞同：0
> 
> 时间：2012-08-07T05:57:43.493
> 
> 标签：magento

我是 magento 的新手。我想在前端产品详细信息页面上显示颜色下拉列表。我从后端添加了属性“颜色”和属性集“t-shirt”，还创建了一个产品并分配了属性集。但我无法在前端显示。我正在使用 magento 1.7 版本。我希望用户可以从前端的下拉列表中选择颜色。谁能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:05:12.573

您需要创建一个可配置的产品来添加颜色下拉菜单。

# php - PHP函数，从另一个文件错误调用变量

> ID：11840070
> 
> 赞同：0
> 
> 时间：2012-08-07T05:57:47.897
> 
> 标签：php, function

我有一个包含以下内容的 functions.php 文件。

```
function maxSavePerHour($ip, $maxSave = 15){
//DB connection and query. Working fine.
$totalRows = mysql_num_rows($res);
    if($totalRows <=$maxSave){
        $safe=true;
    }else{
        $safe=false;
    }

if($safe){
    echo "OK";
}else{
    echo "Not OK";
}
} 
```

我从另一个页面调用该函数。我使用如下功能。

```
maxSavePerHour($ip, 5); 
```

如果我更改该值，该函数会按应有的方式回显文本。问题是 $safe 变量。如果我回显 $safe 我什么也得不到。

有什么线索吗？我需要 $safe 为真或假的原因是因为我稍后在 if 语句中使用它。

我把 global $safe;` 现在它的工作。谢谢尼罗河。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:23:21.910

```
function maxSavePerHour($ip, $maxSave = 15){
//DB connection and query. Working fine.
$totalRows = mysql_num_rows($res);
    if($totalRows <=$maxSave){
        $safe=true;
    }else{
        $safe=false;
    }

    if($safe){
        echo "OK";
    }else{
        echo "Not OK";
    }
    return $safe;
}
$safe = maxSavePerHour($ip, 5);
echo $safe; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:03:02.450

您应该能够简单地返回 $safe 并从另一个文件中处理它。或者更好的是，实现以下内容：

```
function maxSavePerHour($ip, $maxSave = 15){
//DB connection and query. Working fine.
$totalRows = mysql_num_rows($res);
    if($totalRows <=$maxSave){
        return true;
    }else{
        return false;
    }
} 
```

您实际上并不需要 $safe 变量。将您的 $safe 变量标记为全局变量是一个非常糟糕的主意，几乎不应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T06:06:35.060

如果你回显 $safe，它什么也不回显，因为 $safe 是一个布尔值（并且 false 不会回显一个值，而 true 会回显 1）。我会返回 $safe 的值，然后更改调用代码来处理这个问题。例如：

```
function maxSavesPerHour($ip, $maxSave) {
  $totalRows = mysql_num_rows($res);
  return ( $totalRows <= $maxSave ? TRUE : FALSE );
} 
```

然后像这样从您的代码中调用它：

```
if ( maxSavesPerHour($ip, 5) ) {
  //do something when true
} else {
 //do something when false
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:06:02.433

```
function maxSavePerHour($ip, $maxSave = 15){ 
    //DB connection and query. Working fine. 
    $totalRows = mysql_num_rows($res); 
    $safe = false;
    if($totalRows <=$maxSave){ 
         $safe=true; 
    }else{ 
         $safe=false; 
    } 

    if($safe){ 
        echo "OK"; 
    }else{ 
        echo "Not OK"; 
    } 
} 
```

安全只存在于如果不在它之外

# c# - System.IO exception "The process cannot access the file because it is being used by another process."

> ID：11840073
> 
> 赞同：1
> 
> 时间：2012-08-07T05:57:54.443
> 
> 标签：c#, telerik

My program uses a Telerik ASyncUpload control in order to allow the user to upload images. The control has been configured to accept only images, and in its FileUploaded event, there's some extra code doing some additional work (resizing (twice) and converting to JPEG).

However, after the code block below finishes, and my image is saved, the program throws a System.IO exception: "The process cannot access the file because it is being used by another process."

```
 protected void RadAsyncUpload1_FileUploaded(object sender, FileUploadedEventArgs e) {
        ListViewItem lvwItem = lvwItems.EditItem;
        RadAsyncUpload upl = (RadAsyncUpload)lvwItem.FindControl("RadAsyncUpload1");

        string target = MapPath(upl.TargetFolder);

        try
        {
            foreach (UploadedFile file in upl.UploadedFiles) {

                using (Bitmap originalImage = new Bitmap(file.InputStream)) {

                    System.Drawing.Image cloneImage = (Bitmap)originalImage.Clone();

                    // Resize the picture to max 200 * 200
                    Size mySize = new Size(200, 200);
                    cloneImage = Imaging.resizeImage(originalImage, mySize);

                    // Create a bitmap from the cloned image. Bitmap is needed for saveJpeg routine
                    Bitmap newImage = new Bitmap(cloneImage);

                    // Convert to jpg if necessary
                    if (file.GetExtension() != ".jpeg" || file.GetExtension() != ".jpg") {
                        Imaging.saveJpeg(Path.Combine(target, file.GetNameWithoutExtension() + ".jpg"), newImage, 100);
                    }
                    else {

                    }

                    // Now create a thumbnail
                    Size thumbSize = new Size(50, 50);
                    cloneImage = Imaging.resizeImage(originalImage, thumbSize);
                    Bitmap thumbImage = new Bitmap(cloneImage);
                    Imaging.saveJpeg(Path.Combine(target, file.GetNameWithoutExtension() + "_lille.jpg"), thumbImage, 100);

                    uploadedFileName = file.GetNameWithoutExtension() + ".jpg";
                }
            }
       }
       catch (IOException ex) 
        {

        }
    } 
```

At this point, the two files (200*200 and 50*50) will exist, but upon exiting the routine, I receive the error.

I tried closing and disposing all the images as well as the file.InputStream, but still see the error. I also tried seeing if the UploadedFile could just be discarded, but did not find that method to exist.

I'm fairly certain that there's a simple solution to it, but I've been staring at this for hours, and simply do not see it.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:20:10.853

There is a remark on Imagaining Save method [MSDN page](http://msdn.microsoft.com/en-us/library/ytz20d80.aspx):

> Saving the image to the same file it was constructed from is not allowed and throws an exception.

Try to save Your file with different name. If thats not possible, You can work around this,by reading file to memory first(f.e. using MemoryStream).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-03T07:30:55.087

Stop your local IIS Server from the bottom-right right corner of your screen, from the taskbar.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T19:21:58.977

It turns out that my error was caused by the line:

```
using (Bitmap originalImage = new Bitmap(file.InputStream)) 
```

I replaced that with:

```
using (Stream fileStream = file.InputStream) {
   using (System.Drawing.Image originalImage = System.Drawing.Image.FromStream(fileStream)) { 
```

and the error is gone.

# sql - 如何在缩放器值函数中使用字符串变量作为表变量

> ID：11840075
> 
> 赞同：0
> 
> 时间：2012-08-07T05:57:58.457
> 
> 标签：sql, sql-server

我正在尝试在 sql server 中创建一个缩放器值函数。

此函数将采用逗号分隔的 Id 字符串，并将返回与 id 对应的以逗号分隔的文本值字符串。

我正在传递所有参数（例如：@tablename、@idcolumnname、@valuecolumnname、@stringofids 等）。并首先尝试将单个文本值作为

从@tablename 中选择@valuecolumnname 其中@idcolumnname=（来自@stringofids 的值）

但我无法从与从逗号分隔的 id 字符串中获取的 id 对应的表中选择文本值。它给出以下错误

必须声明表变量“@tablename”。我将@tablename 作为字符串传递。我应该怎么办。

# java - 无法使用 Hector 在 cassandra db 中插入值

> ID：11840083
> 
> 赞同：2
> 
> 时间：2012-08-07T05:59:16.617
> 
> 标签：java, cassandra, hector

我正在使用 hector 在 cassandra DB 中插入值。我的 Eclipse helios IDE 和 Cassandra 版本 1.1.2 在我的类路径中导入了以下 jar。

*   apache-cassandra-1.1.2.jar
*   赫克托核心-0.7.0.29.jar
*   libthrift-0.8.0.jar
*   slf4j-api-1.6.6.jar

我没有得到这里有什么问题，无论是兼容性问题还是代码混乱。

我尝试使用不同版本的罐子，但没有运气。以下是代码片段。

请帮忙。

```
int count = 0;
StringSerializer ss = StringSerializer.get();
String cf = "TESTING";
CassandraHostConfigurator conf = new CassandraHostConfigurator("10.100.10.177:8160");
System.out.println("host configured..");

conf.setCassandraThriftSocketTimeout(40000);
conf.setExhaustedPolicy(ExhaustedPolicy.WHEN_EXHAUSTED_BLOCK);
conf.setRetryDownedHostsDelayInSeconds(5);
conf.setRetryDownedHostsQueueSize(128);
conf.setRetryDownedHosts(true);
conf.setLoadBalancingPolicy(new LeastActiveBalancingPolicy());
String key = Long.toString(System.currentTimeMillis());
Cluster cluster = HFactory.getOrCreateCluster("Test Cluster", conf);
Keyspace keyspace = HFactory.createKeyspace("Testing", cluster);
Mutator<String> mutator = HFactory.createMutator(keyspace, StringSerializer.get());

while (!"q".equals(new Scanner(System.in).next().toString())) {
    try {
        mutator.insert(key, cf, HFactory.createColumn("column_" + count, "v_" + count, ss, ss));
        mutator.execute();
        count++;
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这是我在没有循环的情况下插入单个值时遇到的异常。

```
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.cassandra.thrift.Column.<init>(Ljava/nio/ByteBuffer;Ljava/nio/ByteBuffer;J)V
at me.prettyprint.cassandra.model.HColumnImpl.<init>(HColumnImpl.java:36)
at me.prettyprint.hector.api.factory.HFactory.createColumn(HFactory.java:477)
at me.prettyprint.hector.api.factory.HFactory.createStringColumn(HFactory.java:488)
at ExampleDaoV2.main(ExampleDaoV2.java:66) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:29:44.600

尝试使用除 libthrift 之外的其他 thrift jar 文件。让我知道这是否有效。

# javascript - 回退和 JavaScript 同时进行。什么是正确的方法？

> ID：11840084
> 
> 赞同：1
> 
> 时间：2012-08-07T05:59:23.163
> 
> 标签：javascript, jquery, html

我进行了多次搜索，并遇到了大量关于“如果 JavaScript 被禁用”的在线线程。我的问题有点不同，希望对此有任何见解。

我目前正在开发一个适度的网站，我被指示实施后备以防万一 Javascript 被关闭。目前，我正在使用 jQuery 开发 HTML5。整个站点都连接到 jQuery。站点导航是 jQuery 驱动的，功能齐全。我的问题是，如果假设我在网站导航上实现了一个简单的后备策略，如下所示：

```
 <li><a href="http://www.yahoo.com" title="yahoo">YAHOO</a></li> 
```

正如你所看到的，这个后备非常简单，用户单击列表项并前往 YAHOO。让我们说如果 JavaScript 没有被禁用，那么我的 jQuery 代码是例如：

```
 $("nav li:nth-child(1)).bind('click', function()
  {
         //ACTION GOT TO YAHOO
         $("#xxx").animate({'top' : '300'}, "slow"};
  }); 
```

我的问题是，现在我同时安装了 jQuery 和后备。不应该是其中一个吗？同时编码两种方法是否有效？如您所见，使用 jQuery，有动画。因此，如果两种方法 fallback 和 jQuery 都连接起来，那么哪一个会优先呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:28:31.047

您的 Javascript 将首先运行。这才是正确的发展方式。这被称为“渐进式增强”，这是一种很好的做法。正如您所猜到的，这基本上意味着那些拥有 javascript 的人会看到动画，然后运行链接，而那些不只是单击链接的人。所以基本上回退的最佳实践就是你正在做的事情，只需编写 HTML 以在没有 JS 的情况下工作，然后使用 JS 来改变它，或者让它变得更好

编辑：我可能错在哪个先，唯一知道的方法是自己测试；）但根据我的经验，它会先行

# mysql - SQL - 每个日期一条记录

> ID：11840089
> 
> 赞同：4
> 
> 时间：2012-08-07T05:59:44.963
> 
> 标签：mysql, sql, sql-order-by, group-by

现在我有以下数据：

```
 Name          Time

       picture  2012-07-23 17:00:00
       picture  2012-07-24 18:00:00
       picture  2012-07-24 19:00:00
       picture  2012-08-03 08:40:06
       picture  2012-08-03 08:42:39
       picture  2012-08-03 08:54:03
       picture  2012-08-03 10:38:58
       picture  2012-08-03 10:39:55
       picture  2012-08-06 08:12:14 
```

以及以下 SQL 查询：

```
 SELECT DATE_FORMAT(DATE(DATE_SUB(time,INTERVAL 4 HOUR)),GET_FORMAT(DATE,'ISO'))
    as time, uri, media_id, description
    FROM media WHERE place_id = 1 
    GROUP BY time ORDER BY time DESC 
```

哪个效果很好，并为我提供了我想要的数据。但是每个唯一日期的数据按每个“天”中最旧的日期排序。我希望它按最新订购。Order By 语句只是对整个结果进行排序，而不是每一天的日期。如果 o 在使用 Group By 时可以采用最新的日期而不是最旧的日期，但我想我必须计算出除 group by 之外的其他东西。

编辑：以下作品。但是我想从子查询中返回更多列，我该怎么做？

```
 SELECT Distinct DATE_FORMAT( DATE( DATE_SUB(time, INTERVAL 4 HOUR ) ) ,
    GET_FORMAT( DATE,  'ISO' ) ) AS date, 
            (SELECT type FROM media WHERE 
            DATE_FORMAT( DATE( DATE_SUB(time, INTERVAL 4 HOUR ) ) ,
           GET_FORMAT( DATE,'ISO' ) )  = date Order by time DESC Limit 1) as name
    FROM media 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T07:29:01.673

使用子查询返回每天的最大时间：

```
SELECT  MAX(Time) AS Time
FROM    Media
WHERE   Place_ID = 1
GROUP BY CAST(Time AS DATE) 
```

然后将其加入到您的媒体表中，以将结果限制为每天一个：

```
SELECT  Type AS Name,
        DATE_FORMAT(DATE(DATE_SUB(Media.time, INTERVAL 4 HOUR)), GET_FORMAT(DATE, 'ISO')) AS Time,
        uri, 
        media_id, 
        description
FROM    Media
        INNER JOIN
        (   SELECT  MAX(Time) AS Time
            FROM    Media
            WHERE   Place_ID = 1
            GROUP BY CAST(Time AS DATE)
        ) MaxTime
            ON MaxTime.Time = Media.Time; 
```

该解决方案的一个巨大好处是主体适用于所有 DBMS，而目前 MySQL 是我所知道的唯一支持 select 语句中不属于聚合函数或包含在 group by 语句中的列。我最近写[了另一个关于 SO 的答案，](https://stackoverflow.com/questions/11744994/sql-having-get-only-the-first-recorded-row-in-table-and-i-want-all/11749756#11749756)描述了 MySQL 中这个功能的潜在危害，以及为什么其他 DMBS 还不支持它。

**[SQLFiddle 上的示例](http://sqlfiddle.com/#!2/f7225/10)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:11:24.717

将此“ **GROUP BY time ORDER BY time DES* *C”更改为“* *GROUP BY DATE ORDER BY time DATE** ”。它会将数据从新日期缩短到旧日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T06:10:25.123

用子字符串稍微分解您的语句，以便您在 TIME 和 DATE 上都有 ORDER BY。像这样的东西应该有效；

```
SELECT DATE_FORMAT(DATE(DATE_SUB(time,INTERVAL 4 HOUR)),GET_FORMAT(DATE,'ISO')) 
as time, uri, media_id, description 
FROM media WHERE place_id = 1  
GROUP BY time ORDER BY SUBSTRING(time,1,10) DESC, SUBSTRING(time,12,8) ASC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T06:19:51.003

尝试这个：

```
 SELECT time,DATE_FORMAT(DATE(DATE_SUB(time,INTERVAL 4 HOUR)),
         GET_FORMAT(DATE,'ISO')) as date, uri, media_id, description
  FROM media WHERE place_id = 1 
  ORDER BY date DESC ,time desc 
```

# javascript - 从函数返回函数而不调用返回的函数

> ID：11840091
> 
> 赞同：0
> 
> 时间：2012-08-07T05:59:57.847
> 
> 标签：javascript, function

可以做到吗？

我有以下内容：

```
populate.func = function(node, state) {
    return (new function(data) { /* stuff*/ });
} 
```

但是，无论我使用常规调用约定还是调用方法，调用 populate.func 总是会同时调用被调用函数和返回函数。我希望能够调用 populate.func 并将函数作为要使用的值返回，而无需实际运行它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:03:08.250

就这样做

```
populate.func = function(node, state) {
    return (function(data) { /* stuff*/ });
} 
```

您的代码正在使用您的函数作为构造函数来实例化一个新对象，但您想返回对您的函数的引用，所以只需删除 new 关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:03:00.713

我什至不确定您的代码实际上在做什么，但我认为您想要的是：

```
populate.func = function(node, state) {
    return function(data) { /* stuff*/ };
} 
```

# facebook - Facebook Like 按钮已弃用的价值出现

> ID：11840095
> 
> 赞同：0
> 
> 时间：2012-08-07T06:00:34.527
> 
> 标签：facebook, facebook-like

我只有我们论坛的基本 URL 有这个奇怪的问题。我添加了一个赞按钮。当我测试它时，喜欢的网址显示为“www.facebook.com/pages/toonzo ...”而不是“www.toonzone.net/forums/”或“www.toonzone.net/forums/forum” .php”。在使用 Chrome 对页面进行了大量挖掘之后，我发现它来自看起来已被弃用的带有该 URL 的 javascript。再仔细一看，它是从 facebook 的 like.php 文件中调用的。

我的下一步是确认这是涉及 URL 和 facebook 的事情，而不是其他事情，是使用 URL 在 facebook 上创建一个新的点赞按钮。果然，那个不正确的 URL 也出现在那里。

我猜可能是很久以前，有些事情搞砸了，从那以后就一直这样。因为，错误的 URL 看起来像我们原来的粉丝页面地址。但是，我根本不知道如何纠正这个问题。我尝试将 URL 扔到 facebook 开发者网站上的调试工具中。这是 javascript 代码段和站点 URL：

[http://www.toonzone.net/forums/](http://www.toonzone.net/forums/)

```
ServerJSQueue.add({"define":[["XDVerifiedChannel",[],{"channel":"http:\/\/static.ak.facebook.com\/connect\/xd_arbiter.php?version=9#cb=f2891cc4a&origin=http\u00253A\u00252F\u00252Fwww.toonzone.net\u00252Ff1d709ba3&domain=www.toonzone.net&relation=parent.parent"}]]});onloadRegister_DEPRECATED(function (){Bootloader.done([])});onloadRegister_DEPRECATED(function (){defer_until(function() { new ExternalPageLikeWidget({"viewer":1027609353,"channelURL":"http:\/\/static.ak.facebook.com\/connect\/xd_arbiter.php?version=9#cb=f2891cc4a&origin=http\u00253A\u00252F\u00252Fwww.toonzone.net\u00252Ff1d709ba3&domain=www.toonzone.net&relation=parent.parent","mobile":false,"nodeType":"page","externalURL":"http:\/\/www.toonzone.net\/forums\/forum.php","widgetID":"connect_widget_5020888885b1a5865896767","alreadyConnected":false,"viewerIsAdmin":false,"adminUrl":"","showFaces":false,"useUnlikeLink":false,"layout":"box_count","locale":"en_US","commentWidgetMarkup":"\u003Cdiv id=\"uf3jom_1\" style=\"font-family: &quot;arial&quot;, sans-serif\" class=\"connect_comment_widget connect_comment_widget_ltr\" title=\"toonzone forums\">\u003Cdiv class=\"nub\">\u003C\/div>\u003Cdiv class=\"comment_content\">\u003Cdiv class=\"connect_comment_widget_placeholder_input_region hidden_elem\">\u003Cinput class=\"connect_comment_widget_placeholder_input inputtext\" type=\"text\" value=\"Add a comment\" \/>\u003C\/div>\u003Cdiv class=\"connect_comment_widget_full_input_region clearfix\">\u003Cdiv>\u003Cimg class=\"-cx-PRIVATE-uiSquareImage__root connect_comment_widget_user_pic -cx-PRIVATE-uiSquareImage__large img\" src=\"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-snc4\/276075_1027609353_1137351_q.jpg\" alt=\"\" \/>\u003Ctextarea aria-label=\"Add a comment\" class=\"connect_comment_widget_full_input_textarea connect_comment_widget_disabled inputtext\">Add a comment\u003C\/textarea>\u003C\/div>\u003Cdiv class=\"connect_comment_share_preview\">\u003Ctable class=\"uiGrid\" cellspacing=\"0\" cellpadding=\"0\">\u003Ctbody>\u003Ctr>\u003Ctd class=\"vTop\">\u003Cdiv>\u003Cimg class=\"connect_comment_share_preview_pic img\" src=\"https:\/\/fbexternal-a.akamaihd.net\/safe_image.php?d=AQBsqmNXd4pF0tmu&amp;w=50&amp;h=50&amp;url=http\u00253A\u00252F\u00252Fwww.toonzone.net\u00252Fimages\u00252Ftz6\u00252FtzLogo.png\" alt=\"\" \/>\u003C\/div>\u003C\/td>\u003Ctd class=\"vTop\">\u003Cdiv style=\"padding-left: 6px; \">\u003Cdiv class=\"connect_comment_widget_title fsl fwb fcb\">toonzone forums\u003C\/div>\u003Cdiv class=\"mbs connect_comment_widget_href fsm fwn fcg\">http:\/\/www.facebook.com\/pages\/toonzo...\u003C\/div>\u003Cdiv class=\"mbs connect_comment_widget_description fsm fwn fcg\">Animation news and discussion. toonzone has been providing news, information and community to animation enthusiasts since August 1998.\u003C\/div>\u003C\/div>\u003C\/td>\u003C\/tr>\u003C\/tbody>\u003C\/table>\u003C\/div>\u003C\/div>\u003Cdiv class=\"connect_comment_widget_button_region\">\u003Clabel class=\"connect_comment_widget_post_button uiButton uiButtonConfirm\" for=\"uf3jom_2\">\u003Cinput value=\"Post to Facebook\" type=\"submit\" id=\"uf3jom_2\" \/>\u003C\/label>\u003Clabel class=\"connect_comment_widget_close_button uiButton\" for=\"uf3jom_3\">\u003Cinput value=\"Close\" type=\"submit\" id=\"uf3jom_3\" \/>\u003C\/label>\u003C\/div>\u003C\/div>\u003C\/div>","error":null,"autoResize":true,"connectText":0,"socialbar":false,"ref":".UCCIg6eFIhc.like","userOptedOut":false,"showCaptcha":false,"usingInlineCommenting":false,"isBlocked":false,"forceCommentHooks":"","isPersonalized":false,"colorScheme":null,"grayOut":true,"iframeReferer":"http:\/\/www.toonzone.net\/forums\/forum.php"}); },function() { return ge("connect_widget_5020888885b1a5865896767"); })});onloadRegister_DEPRECATED(function (){AsyncLoader.loadCSS("https:\/\/s-static.ak.fbcdn.net\/rsrc.php\/v2\/yV\/r\/wspVKE9hHCT.css");}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:41:44.023

我已经测试过，那里的一切工作正常。Facebook 在like 的 iframe 里面的脚本真的很不起眼。但我的猜测很简单：您在测试期间作为您的粉丝页登录。因此，您的粉丝专页的 URL 显示在脚本中的某处，因为这将是您的粉丝专页在您的网页上点赞和评论，但发布在您的粉丝专页的墙上。对于真正的用户，这不会发生。

# apache-flex - 从 Flex 4.5 升级到 Flex 4.6

> ID：11840098
> 
> 赞同：1
> 
> 时间：2012-08-07T06:00:41.450
> 
> 标签：apache-flex, air, flex4, puremvc

# 的背景

我正在将使用 Flex 4.5 和 AIR 2.6 构建的 AIR 应用程序更新到 Flex 4.6 和 AIR 3.3。我这样做是为了利用本机 JSON 类，并为 AIR 3.4 和 Actionscript Workers 做好准备，这两个都是我计划使用的。我也在使用 PureMVC 2.0.4。

实际的更新过程很顺利。我下载了 Flex 4.6 SDK 并在其上覆盖了 AIR 3.3 SDK。到目前为止，一切都很好。我在[as3corelib](https://github.com/mikechambers/as3corelib)中使用 JSON 类，所以我必须进行一些更改，从我的应用程序中删除对它的引用。除了那一帆风顺。随着代码编译得很好，我开始启动应用程序。

# 问题

这就是事情分崩离析的地方。

当应用程序启动“欢迎”视图时（这本质上是一个着陆点，其中包含“打开文件”、“新文件”等按钮以及从 Web 服务中提取的新闻提要）。背景图像显示，但 UI 不存在。以下是一些示例屏幕截图：

之前（欢迎视图的工作 4.5 版本） ![工作，Flex 4.5 版本的欢迎视图](../Images/7bca500ddffa736037d0fbf46cdabd58.png)

之后（Welcome View 的 4.6 版本损坏。这是视图的背景图像。） ![在此处输入图像描述](../Images/f12cf856891747d8686a0ee78435da7b.png)

在 Flash Builder 调试器中使用大量断点逐步完成启动过程并没有发现任何明显错误。其他 UI 元素也丢失了。例如：这个标签栏只是缺少按钮

之前（工作 4.5 版本） ![工作，Flex 4.5 版本的 TabBar](../Images/df638d24b3d06f6c92e9966048c0daae.png)

之后（破4.6版） ![坏了，Flex 4.6版的TabBar](../Images/d19a4cdda5c242b59d419fc89ea5b43a.png)

在试图确定这里发生了什么时，我一直在尽我所能玩弄应用程序（欢迎 UI 消失了，这相当困难），我发现最小化应用程序然后恢复它会导致应用程序挂起到 Windows 将“（未响应）”位添加到应用程序标题栏的程度，然后在 UI 有点正常工作的情况下正常恢复。一些示例图像：

恢复后的欢迎视图（注意向右偏远的水平线） ![恢复后欢迎查看](../Images/262f6352ef2f0e4a9ce0fefbf4c7a2ec.png)

恢复后的 TabBar （此内容完全无视布局规则。此外，它实际上是向左滚动 - 没错，它不知何故长出了腿，只是自行离开屏幕。从来没有任何补间/动画代码附加到这个观点） ![恢复后的 TabBar，未对齐的内容](../Images/9b377a1a233551779e76b53b5ec7f45f.png)

所有这些都发生在带有 Flash Builder 4.6 的 Windows 7 x64 上。

# 问题

这到底是怎么回事？为什么我的 UI 会像这样消失？

我觉得我缺少一些基本的东西，比如“哦，只需添加这个编译器选项”和 BAM！事情会解决的。我当然不觉得我的应用程序应该因为这次升级而完全崩溃。

有没有人在从以前版本的 Flex/AIR 升级到 Flex 4.6/AIR 3.x 时遇到过类似的问题？你是怎么解决你的问题的？

会不会是我的自定义皮肤导致了这个问题？为什么会这样？关于皮肤的话题，这似乎是一个[类似的问题](https://stackoverflow.com/questions/8502204/spark-lifecycle-changes-between-flex-4-5-and-4-6)。

# 更新

我希望避免这种情况，但我并没有真正做到这一点，所以我决定开始撤出主题和外部 SWC，直到我可以让应用程序达到某种健全的功能水平并从那里恢复。我从主题开始，虽然问题不在于主题，但我指出了正确的方向。

在我的应用程序中有一个名为`HRule`. 这是上述某些屏幕截图中“从经销商处打开”和“注销”按钮之间的水平规则。这个类只是一个 Spark ，里面`Group`有两个`Line`s 来绘制规则。

这是完整的课程：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->

    </fx:Declarations>

    <s:layout>
        <s:VerticalLayout
            gap="0">
        </s:VerticalLayout>
    </s:layout>

    <s:Line
        xTo="{width}">
        <s:stroke>
            <s:SolidColorStroke
                color="#000000"
                alpha="0.4" />
        </s:stroke>
    </s:Line>

    <s:Line
        xTo="{width}">
        <s:stroke>
            <s:SolidColorStroke
                color="#ffffff"
                alpha="0.15" />
        </s:stroke>
    </s:Line>

</s:Group> 
```

然后我像这样使用这个类：

```
<s:VGroup
    width="300">

    <s:Button 
        label="Button 1"
        percenthWidth="100"/>

    <mycomps:HRule 
        percenthWidth="100"/>

    <s:Button 
        label="Button 2"
        percenthWidth="100"/>

</s:VGroup> 
```

`Group`只需将基类从更改为 ，我就可以解决所有问题`SkinnableContainer`。我下载了[WinMerge](http://winmerge.org/)对 Spark 的 4.5 版本`Group`和 4.6 版本进行了比较，文件是相同的。

所以这就带来了一个新的问题：**为什么`Group`在 4.5 和 4.6 之间的行为会发生变化？**

# php - MySQL时间戳比较小于号

> ID：11840099
> 
> 赞同：1
> 
> 时间：2012-08-07T06:01:01.650
> 
> 标签：php, mysql, sql, timestamp, blogs

我做了一个 PHP 博客。除了一个小故障，一切都正常运行。我想按日期降序显示文章。因此，每当一篇文章被添加到数据库中时，自动时间戳都会记录插入的时间。

GLITCH - > 我想每页显示 5 篇文章。我使用这个很容易在第一页上做到了这一点

```
$sql="SELECT id,article_name,article_body,date 
         from articles order by date desc limit 5" ; 
```

现在我想继续第二页，并希望第二页显示第 1 页离开的文章。如果有 10 篇文章按降序排列，则第 1 页应显示前 5 篇，第 2 页应显示后 5 篇。

当每天添加许多文章时，此逻辑应该实时工作。我使用了这个查询，但它只显示 1 行。

```
$sql="select id,article_name,article_body,unix_timestamp(date) 
           from articles 
           where date < (select unix_timestamp(date)
                 from articles order by date desc limit $n,1 ) 
           order by date desc limit $n,5" ; 
```

$n - 从中​​提取行的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:13:23.580

利用 sql 中的偏移量：

```
$items_per_page=5;   
$offset=($current_page-1)* $items_per_page; 
```

sql：

```
SELECT id,article_name,article_body,date 
         from articles order by date desc LIMIT  $items_per_page OFFSET $offset 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:09:41.157

尝试：

```
select id,article_name,article_body,unix_timestamp(date) 
from articles 
where date < ( select date from articles order by date desc limit $n,1 ) 
order by date desc limit $n,5 
```

其中 $n 应该是上一页的最后一个 id

# maven - maven - 为现有的 java struts 项目添加依赖项

> ID：11840102
> 
> 赞同：1
> 
> 时间：2012-08-07T06:01:09.000
> 
> 标签：maven, maven-2, maven-3, maven-dependency-plugin

我有一个现有的基于 struts 的 java web 项目。我想为构建和部署配置 Maven。但是，当我向其中添加依赖的 java 项目时，构建失败。有人可以为我提供添加依赖项的步骤吗？另外，我正在使用 Helios eclipse。

# shell - 用于在目录中搜索模式并输出查找计数的 shell 脚本

> ID：11840105
> 
> 赞同：1
> 
> 时间：2012-08-07T06:01:16.237
> 
> 标签：shell, pattern-matching

我需要一个 Shell 脚本，它接受两个输入，它们是

1.  它必须搜索的主目录和
2.  在主目录中搜索所有文件（.c 和 .h 文件）的模式

它必须打印在主目录和每个子目录中找到的模式数。

```
main dir    --> Total pattern found = 5
  |
  sub dir   --> 3
  |
  sub dir   --> 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:31:14.247

这应该这样做：

```
#!/bin/sh

grep -rl "$1" . | sed -r 's/\/[^\/]+$//' | sort | uniq -c 
```

它的工作原理如下：

*   首先`$1`使用参数找到提供的模式`grep`
    *   `-r`搜索当前目录`.`和所有子目录中的所有文件
    *   `-l`仅输出`path/filename`具有与模式匹配的文本的文件
*   `filename`已从所有输出中删除，因此仅保留`path`（即目录）
*   然后对路径进行排序和计数。

它的输出将如下所示：

```
 2 .
      3 ./sub_dir1
      1 ./sub_dir2
      6 ./sub_dir2/a_sub_sub_dir 
```

第一列是目录中模式的匹配数量，第二列是目录的名称（`.`是主目录）。

# html - 阻止我网站的左右两侧改变宽度

> ID：11840106
> 
> 赞同：0
> 
> 时间：2012-08-07T06:01:22.490
> 
> 标签：html, css

我目前在一个练习网站上工作，似乎无法弄清楚当浏览器调整大小时如何阻止左右两侧缩小宽度。中间也调整大小，但想保留它。我认为这与 CSS 布局有关。见下文。我张贴了整个事情，但左右两列都被标记了。在此之下，我有我在正文中使用的代码。

CSS

```
body{
margin:0;
padding:0;
line-height: 1.5em;
color: black;
}

b{font-size: 110%;}
em{color: red;}
a{color: blue;}

/* text field */
textfield {
border-style: ridge;
background:#000000;
color: #000000;
}

/*TOPSECTION */
#topsection{
background: url('../images/bannerBGbkup.jpg'), url('../images/bannerBGl.jpg');
background-position: left top, left top;
background-repeat: no-repeat, repeat;
height: 200px; /*Height of top section*/
color: White;
text-align:center
}

#topsection a{
color: #FFFF80;
}

#topsection h1{
margin: 0;
padding-top: 25px;
text-align:Left
}

#topsection h2{
margin: 0;
padding-top: 0px;
text-align:Center
}

#topsection h3{
margin: 0;
padding-top: 0px;
text-align:Right
}

/* THIS IS NAV BAR */
ul#list-nav {

  margin:70px;
  margin-left: 20%;
  padding-Left:0;
  list-style:none;
  width:735px; /* 105 each */
}

ul#list-nav li {
  display:inline
}

ul#list-nav li a {
 text-decoration:none;
 padding:5px 0;
 width:100px;
 background:#7D7D7D;
 color:#eee;
 float:left;
}

ul#list-nav li a {
  text-align:center;
  border-left:1px solid #fff;
}

ul#list-nav li a:hover {
  background:red;
  color:#000
}

/* CONTENT */
#contentwrapper{
float: left;
width: 100%;
}

#contentcolumn{
margin: 0 20% 0 20%; /*Margins for content column. Should be "0 RightColumnWidth 0 LeftColumnWidth*/
}

/* LEFT COLUMN */
#leftcolumn{
float: left;
width: 20%; /*Width of left column in percentage*/
margin-left: -100%;
background: #5f5f5f;
color: White;
}

/* RIGHT COLUMN */
#rightcolumn{
float: left;
width: 20%; /*Width of right column in pixels*/
margin-left: -20%; /*Set margin to that of -(RightColumnWidth)*/
background: #5f5f5f;
color: White;
}

/* FOOTER */
#footer{
clear: left;
width: 100%;
background: black;
color: #5f5f5f;
text-align: center;
padding: 4px 0;
}

#footer a{
color: #FFFF80;
}

/*OTHER*/
.innertube{
margin: 10px; /*Margins for inner DIV inside each column (to provide padding)*/
margin-top: 0;
} 
```

身体

```
<div id="leftcolumn">
<div class="innertube"><b>Left Column: <em>20%</em></b> 
<table BACKGROUND="images/releases.jpg"width="175px"  Height="350px" border="1" cellspacing="12" cellpadding="15">
    <tr>
        <td>Limbo</td> 
    </tr>
    <tr>
        <td>Limbo was a great game 5 out of 5 stars. Game play takes you threw different levels. blah blah blah  Read More..</td>
    </tr>
</table> 
</div>
</div>

<div id="rightcolumn">
<div class="innertube"><b>Right Column: <em>20%</em></b> </div>
</div> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:03:55.873

为什么不使用`min-width`和`min-height`调整大小的 div？

* ***min-width 和 min-height 确保您的元素不会低于它们定义的特定大小。****

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:17:07.487

将 width of`leftcolumn`和设置`rightcolumn`为一个百分比是明确请求让它们随浏览器调整大小（假设您周围没有固定宽度的容器）。如果您不希望它们缩小，请给它们一个特定的尺寸。

如果您希望它们缩小，但不低于某个特定大小（例如，您不希望 leftcolumn 小于其中的表格），请`min-width`按照 Ashwin Singh 的建议使用。

# python - 在python中将两个字典的值相除

> ID：11840111
> 
> 赞同：13
> 
> 时间：2012-08-07T06:01:39.550
> 
> 标签：python, dictionary, division

我有两个具有相同键的字典，我想对值进行除法以更新或创建新字典，保持键不变，并将商作为每个键的新值。

```
d1 = { 'a':12 , 'b':10 , 'c':2 }
d2 = { 'a':0 , 'c':2 , 'b':5}
d3 = d2 / d1

d3 = { 'a':0 , 'b':0.5 , 'c':1 } 
```

除了遍历键、值对并创建值的有序列表，然后进行划分之外，我不确定如何执行此操作。我希望有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-07T06:03:19.263

使用视图键（python2.7）：

```
{k: float(d2[k])/d1[k] for k in d1.viewkeys() & d2} 
```

在 python 3 中也是如此（我们可以`float()`完全放弃调用）：

```
{k: d2[k]/d1[k] for k in d1.keys() & d2} 
```

是的，我在这里使用了一个关键的十字路口；如果您绝对确定您的密钥在两者中相同，请使用`d2`：

```
{k: float(d2[k])/d1[k] for k in d2} 
```

为了完整起见，在 Python 2.6 之前，您必须使用`dict()`带有生成器表达式的构造函数来实现相同的目的：

```
dict((k, float(d2[k])/d1[k]) for k in d2) 
```

它生成一系列键值元组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T06:04:42.627

这适用于所有 python，但是如果有 Py 2.7+ ，我会推荐[@MartijnPieters的解决方案](https://stackoverflow.com/a/11840128/1219006)

```
>>> d1 = { 'a':12 , 'b':10 , 'c':2 }
>>> d2 = { 'a':0 , 'c':2 , 'b':5}
>>> d3 = dict((k, float(d2[k]) / d1[k]) for k in d2)
>>> d3
{'a': 0.0, 'c': 1.0, 'b': 0.5} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-07T06:05:15.750

```
d1 = { 'a':12 , 'b':10 , 'c':2 }
d2 = { 'a':0 , 'c':2 , 'b':5}
d3={x:float(d2[x])/d1[x] for x in d1}
print d3 
```

**输出：**

```
{'a': 0.0, 'c': 1.0, 'b': 0.5} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T06:09:28.243

在 3.2 中，您使用 .keys() 方法和 .get(key)。 [http://www.tutorialspoint.com/python/python_dictionary.htm](http://www.tutorialspoint.com/python/python_dictionary.htm)

# iphone - 如何更新 UITableViewCell 中的标签计时器？

> ID：11840117
> 
> 赞同：2
> 
> 时间：2012-08-07T06:02:11.827
> 
> 标签：iphone, ios5, xcode4.3

我在 a 中有一个标签计时器`UITableViewCell`，使用此代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [[UITableViewCell alloc]init];

    timeLabel = [[UILabel alloc]initWithFrame:CGRectMake(55, 26, 280, 25)];
    timeLabel.text = [timeArray objectAtIndex:indexPath.row];
    timeLabel.backgroundColor = [UIColor clearColor];
    timeLabel.textColor = [UIColor blackColor];

    [cell.contentView addSubview:timeLabel];
    return cell;
    NSLog(@"Title %@, time %@, second %@, time %i, tag %d", titleArray, timeArray, secondArray, time, button.tag);
} 
```

我有一个使用此代码通过按钮触发的计时器

```
- (void)onoffBtn:(id)sender
{
    countdownTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timerElapsed:) userInfo:nil repeats:YES];
}

- (void) timerElapsed:(id)timer
{
    if (time == 0)
    {
        [countdownTimer invalidate];
    }
    // this part only code for counting down timer
    NSLog(@"%d:%d:%d", hour , minute, second);
} 
```

如果我放在`timeLabel.text = [NSString stringWithFormat:@"%d:%d:%d", hour , minute, second];`里面`timerElapsed`，当然它不会更新我在单元格内的标签。

那么如何每秒更新单元格内的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:11:26.710

你可以用这个更新你的表：

```
[theTable reloadData] 
```

确保重新加载然后在重建表格的单元格时获得正确的值

编辑：不要忘记像这样回收细胞......

```
 static NSString *kDisplayCell_ID = @"DisplayCellID";
        cell = [self.tableView dequeueReusableCellWithIdentifier:kDisplayCell_ID];
        if (cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kDisplayCell_ID];
        }
         .... 
```

您可能想检查如何

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
```

需要实施

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:15:27.433

`timeLabel.text = [NSString stringWithFormat:@"%d:%d:%d", hour , minute, second];`在timerElapsed中放入`cellForRowAtIndexPath`并调用tableview的方法。`reloadData`

我相信您的小时、分钟和秒包含更新的值。

# java - 从 java jar 运行 R 脚本

> ID：11840119
> 
> 赞同：0
> 
> 时间：2012-08-07T06:02:33.467
> 
> 标签：java, jar, external-process

我有一个调用 R 脚本的 java 程序。这是命令：

```
String filename = "hierarchicalClusteringScript.R";
String[] cmd=new String[]{this.conn.getRPath(),"CMD","BATCH",
            "--args LD_matrix='"+LD_matrix+"' " +
            "image_filename='"+image_filename+"' " +
            "width="+300+" "+
            "height="+height+" "+
            "ordered_snps_filename='"+ordered_snps_filename+"'",
            filename,
               this.conn.getWorkingDir()+this.conn.getProjectName()+"Routput.txt"};
    Runtime runtime = Runtime.getRuntime();
    try {
        Process process = runtime.exec(cmd);
        process.waitFor();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

我想将 R 脚本“hierarchicalClusteringScript.R”包含到 jar 文件中。如果我这样做了，有没有办法从代码中调用脚本？我应该使用哪条路径？

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:04:03.050

为了从您的 JAR 中提取脚本，通常我们很少执行 JAR/ZIP 提取。当您将脚本放入 JAR 中时，通常意味着它在您的类路径中。因此，只需将其定位为资源，获取 inputStream 并读取资源并将其写入临时目录即可。这几个步骤应该足够简单，您可以轻松地从网上轻松找到代码示例。

给你一些提示：

```
Class#getResourceAsStream()
FileOutputStream
File#createTempFile() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:40:13.233

Jar 文件本质上是 Zip 文件（带有清单）。

[您可以使用Jar API](http://docs.oracle.com/javase/7/docs/api/java/util/jar/package-summary.html)从这些文件中提取文件

本质上，您要打开`JarFile`，找到`JarEntry`并使用`JarOutputStream`提取内容

您可以看看[如何编写一个可以提取 JAR 文件并将其数据存储在指定目录（位置）中的 Java 程序？](https://stackoverflow.com/questions/1529611/how-to-write-a-java-program-which-can-extract-a-jar-file-and-store-its-data-in-s)举个例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:48:54.260

如果我了解您正在寻找将 R 脚本添加到 jar 并将 R 作为 jar 类路径中的资源加载。（jar 可以包含任何类型的文件，但 JVM 只能运行与字节码兼容的文件）

-- 要将脚本添加到现有 jar，请执行以下操作： http:
[//docs.oracle.com/javase/tutorial/deployment/jar/update.html](http://docs.oracle.com/javase/tutorial/deployment/jar/update.html)

-- 要使用脚本创建新 jar，请执行以下操作： http:
[//docs.oracle.com/javase/tutorial/deployment/jar/build.html](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

-- 要从 jar 加载脚本，请确保它位于类路径中，并在您的代码中使用 ResourceLoader 加载它：http:
[//docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html)

# javascript - 需要启用提交按钮

> ID：11840122
> 
> 赞同：0
> 
> 时间：2012-08-07T06:02:49.707
> 
> 标签：javascript, jquery

我有一个小表格。我想在选择所有单选按钮时启用提交按钮。

下面是我的代码html

```
<form action="#" id="form1" method="post">
                <ul>
                    <li>
                        <h3>Here’s what I want:<strong class="result1"></strong></h3>
                        <div>
                        <span><input type="radio" value="Cash Back rewards" name="want" id="01"  /><label for="01">Cash Back rewards</label></span>
                        <span><input type="radio" value="Travel rewards" name="want" id="02" /><label for="02">Travel rewards</label></span>
                        <span><input type="radio" value="Gas rewards" name="want" id="03" /><label for="03">Gas rewards</label></span>
                        <span><input type="radio" value="Shopping rewards" name="want" id="04" /><label for="04">Shopping rewards</label></span>
                    </div>
                    </li>

                    <li>
                        <h3>Here’s my credit story: <strong class="result2"></strong></h3>
                        <div>
                        <span><input type="radio" value="I’m new to credit" name="story" id="05" /><label for="05">I’m new to credit</label></span>
                            <span><input type="radio" value="I pay my bills on time" name="story" id="06" /><label for="06">I pay my bills on time</label></span>
                        <span><input type="radio" value="I’ve had credit issues in the past" name="07" id="issues" /><label id="07">I’ve had credit issues in the past</label></span>
                        </div>
                    </li>

                    <li>
                        <h3>Here’s what I carry:</h3>
                        <span><input type="radio" value="I have a credit card with a good record" name="carry" id="08" /><label for="08">I have a credit card with a good record</label></span>
                        <span><input type="radio" value="I don’t have a credit card with a good record" name="carry" id="09" /><label for="09">I don’t have a credit card with a good record</label></span>

                    </li>
                </ul>
                <input type="submit" value="" name="" class="find" />
                </form> 
```

我在javascript方面很弱，请告诉我。

如果 li 不修复，另一件事将动态生成，所以我将不得不做。基本上每个 li 都是一个问题，单选按钮是选项。所以问题将动态生成，它可以是任何否。它不修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:13:31.217

```
$(':radio').on('change', function(e) {
  var len = $(':radio:checked').length;
  if( len === 3 ) {
     $('input[type=submit].find').prop('disabled', false);
  }
}); 
```

**[演示](http://jsfiddle.net/U8WaH/36/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:08:27.977

您的标记中有 4 组单选按钮，您可以检查所选单选按钮的长度是否等于单选按钮组的长度，如果是，请启用提交按钮，尝试以下操作：

```
$(document).on('change', 'input[type=radio]', function(){
   if ($('input[type=radio]:checked').length == 4) {
       $('input[type=submit]').prop('disabled', false)
   } 
}) 
```

[演示](http://jsfiddle.net/5xYXr/)

请注意，`story`组中的第三个元素具有不同的名称属性。

```
<span><input type="radio" value="I’m new to credit" name="story" id="05" /><label for="05">I’m new to credit</label></span>
<span><input type="radio" value="I pay my bills on time" name="story" id="06" /><label for="06">I pay my bills on time</label></span>
<span><input type="radio" value="I’ve had credit issues in the past" name="07" id="issues" /><label id="07">I’ve had credit issues in the past</label></span>
                                                 --------------------------^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:18:00.900

或者再次：

```
$('input[type=radio]').on('change', function(){
    if(
         $('input[name=want]').is(':checked') &&
         $('input[name=story]').is(':checked') &&
         $('input[name=carry]').is(':checked')
     ){
         $('input[type=submit]').prop('disabled', false)
     }
}); 
```

# linux - 如何尽快删除段落

> ID：11840126
> 
> 赞同：6
> 
> 时间：2012-08-07T06:03:16.050
> 
> 标签：linux, vim

我想在我的配置文件中删除以下代码：

```
server {
    listen 80;
    server_name xxx;
    location / {
        try_files xx;
    }
} 
```

我知道我可以使用`7``d``d`，但这不够方便 - 如果该部分太长，计算行数会很不方便。

有一个更好的方法吗？

有时，我必须删除整个函数，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T06:34:47.053

和 Vim 一样，有很多方法！

请注意，前两个解决方案取决于块中没有空行。

*   如果您的光标在该`server`行上，请尝试`d``}`. 它将删除下一个块的所有内容。

*   在条目本身内，`d``a``p`将删除“段落”。

*   您可以使用 删除大括号块`d``a``}`。（如果你喜欢这种语法，我推荐 Tim Pope 的出色的[环绕.vim](https://github.com/tpope/vim-surround)，它添加了更多具有类似感觉的功能）。

*   您也可以尝试使用正则表达式删除，直到下一个最左缩进的右花括号：`d``/``^``}``Enter`

*   `]``]`并`[``[`移动到下一个/上一个第一列花括号（相当于使用`/`and`?`与我上面提到的那个正则表达式。结合`d`运动，你会得到相同的效果。

*   如果你在一个块之下，你也可以利用 Vim 搜索的方便的“偏移”特性。`d``?``^``{``?``-``1`将向后删除到第一次出现第一列左花括号之前的一行。这个命令输入起来有点棘手。也许你可以用`<leader>`它做一个捷径。

请注意，这个答案大部分取自[我之前](https://stackoverflow.com/a/11723259/815632)就类似主题给出的答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T06:09:47.953

如果这些行之后有一个空行，Vim 会将其识别为一个段落，因此您可以简单地使用`d}`删除它（假设光标在第一行）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T06:06:13.483

尝试使用带有 % 的可视模式。

例如，假设您的光标位于“服务器”行的开头。

按 v 进入可视模式。按 % 突出显示到块的末尾。按 d 将其删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T06:18:09.600

给定匹配的括号或大括号，您可以使用`%`with`d`删除跨越行。

因此，假设您`server {`在线，您可以执行`d%`. 这通常对所有代码块有用，例如功能块、循环块、尝试块。

同样，`dip`有效，但`d}`更短。但是，两者都只会删除到下一个空行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T16:39:10.210

正如大卫所说，他们有很多方法。这里有几个我喜欢的：

1.  `Vf{%d`这假设您在线 w/`server`并且您进行了视觉线选择，找到`{`然后`}`通过`%`命令找到匹配项。
2.  `set relativenumber`或`set rnu`简称。这会打开相对于光标的行号。因此，您不必计算行数，只需查看并`7dd`移开即可删除您的块。
3.  用于`VaB`直观地选择一个块，即`{`到`}`，逐行。在仍处于可视模式时继续执行`aB`，直到选择正确的块然后执行`d`。这意味着您可以从块内部而不是在开始或结束处选择块。
4.  `d}`将删除一个段落。这适用于您当前的场景，因为块内没有空行。如果有一个，那么所有的赌注都是关闭的。虽然您可以继续按`.`直到块被正确删除。
5.  `[{`如果在一个块内，您可以通过then 继续执行跳转到当前块，`[{`直到您位于正确的块然后`V%d`或`d%dd`删除该块

使用上述技术，您也可以删除一个函数，但您也可以使用`[M`和朋友 ( `[m`, `]m`, `]M`) 跳转到方法的开头和结尾，但它们通常也适用于函数。

了解更多信息

```
:h %
:h 'rnu'
:h aB
:h }
:h .
:h [{
:h [m 
```

# windows-phone-7 - wp7中的列表框对齐问题

> ID：11840129
> 
> 赞同：0
> 
> 时间：2012-08-07T06:03:29.413
> 
> 标签：windows-phone-7, xaml, expression-blend

我有列表框，我在里面放了一些标签。

```
 <ListBox x:Name="lstContacts">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                            <HyperlinkButton Height="30" Margin="-10,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Content="{Binding PhoneType, Converter={StaticResource CntctConverter}}" Style="{StaticResource HyperlinkButtonStyle}"/>
                                            <TextBlock Height="30" HorizontalAlignment="Left" Text="{Binding PhoneNumber}" Width="250" Foreground="{StaticResource TitleBrush}" Tap="lblMobile_Tap" VerticalAlignment="Top"/>
                                            <TextBlock Height="30" Text="{Binding CallRate}" HorizontalAlignment="Right" Foreground="{StaticResource TitleBrush}" Margin="0,-30,0,0" VerticalAlignment="Top"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox> 
```

我的最后一个标签应该在最右边，因为我将其水平对齐到右边。但它来到中心。请看截图

![在此处输入图像描述](../Images/2a9aada4e63c95814bab3583744f6c93.png)

请建议我在哪里犯了任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:29:34.680

这与 ListBox 的默认 Horizo​​ntalAlignment 有关。它默认为左。您需要将其更改为 Stretch。

```
<ListBox>
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:31:44.410

由于第一个 TextBox 宽度值，您的 StackPanel 宽度为 250，因此看起来第二个 TextBlock 正确定位在右侧。

您需要通过向其添加 Width 值来增加堆栈面板的宽度。

# jruby - 捆绑器不识别平台？找不到宝石

> ID：11840132
> 
> 赞同：1
> 
> 时间：2012-08-07T06:03:47.513
> 
> 标签：jruby, bundler, neo4j

我正在使用 jruby 1.7.2 并设置一个新的 rails 应用程序。Bundler 似乎无法找到必要的（基于 java/jruby 的 gem）来使用：

```
> bundle
Could not find gem 'neo4j-core (>= 0) ruby' in the gems available on this machine. 
```

如果我指定路径，我会得到：

```
> bundle
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Could not find gem 'neo4j-core (>= 0) ruby' in source at ./vendor/gems/neo4j-core.
Source contains 'neo4j-core' at: 2.0.1 
```

也许 bundler 对它的平台感到困惑——为什么它会`ruby`在最后加上这个词？我跑了`ruby -e "puts RUBY_PLATFORM"`，这给了我：`java`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T15:01:54.283

通过删除 Gemfile.lock 解决：[https ://github.com/carlhuda/bundler/issues/2043](https://github.com/carlhuda/bundler/issues/2043)

# android - 在 android 4.0 中获取从 android mobile 到 android 应用程序的所有联系人？

> ID：11840140
> 
> 赞同：0
> 
> 时间：2012-08-07T06:04:42.983
> 
> 标签：android, android-contacts, android-4.0-ice-cream-sandwich

我正在制作一个应用程序，我希望将所有记录从我的 android mobile 4.0 保存到我的 android 应用程序。我也这样做了。但问题是我的电话簿中有近 200 个联系人，但我的应用程序中随机只有 90 条记录。我已经尝试了很多。但我没有找到任何解决方案。任何人都有解决方案吗？下面是我的代码：

```
ContentResolver cr=getContentResolver();
Cursor cur=cr.query(ContactsContract.Contacts.CONTENT_URI,null,null,null,null);
if (cur.getCount() > 0) 
{
    while (cur.moveToNext()) 
    {
     String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
     String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
     if(Integer.parseInt(cur.getString 
                  (cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER )))  > 0) 
     {
       //Query phone here.  Covered next
    Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                      null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", new 
                      String[]{id}, null);
        while (pCur.moveToNext()) 
       {
                // Do something with phones
    String pnumber 
        =pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
    contactids.add(id);
    names.add(name.trim().toLowerCase());
    PhoneNumbers.add(pnumber);
    } 
       pCur.close();
}
else
{
    String pnumber="";
    contactids.add(id);
    names.add(name);
    PhoneNumbers.add(pnumber);
}
} 
```

最后我完成了以下代码。但是这样做的问题是如果联系人超过 1500 则它无法获取记录。并且直到 1500 条记录的过程非常缓慢。

```
public class MyActivity extends Activity {
public Cursor cur;
public int j=0;
@Override
public void onCreate(Bundle savedInstanceState) 
{
     cur=getContacts();
    startManagingCursor(cur);
    cur.moveToFirst(); 
    Button btn=(Button)findViewById(R.id.button1);
    btn1.setOnClickListener(new OnClickListener() 
    {   
        public void onClick(View v) 
        {               
            contactids=new ArrayList<String>();
            names=new ArrayList<String>();
            PhoneNumbers=new ArrayList<String>();
            try
            {
                new showdialog1(MyActivity.this).execute();
            }
            catch (Exception e) 
        {
            // TODO: handle exception
            e.printStackTrace();
        }
        }
    });
}
class showdialog1 extends AsyncTask<Void, Void, Void>
{
    public showdialog1(Activity act) {
         super.onPreExecute();
    }   
    @Override
    protected void onPreExecute() {

        dialog = ProgressDialog.show(MyActivity.this,"title", "message");
    }

    @Override
    protected Void doInBackground(Void... params) {
        if (cur.getCount() > 0) 
        {
            do
            {
                String id = cur.getString(
                cur.getColumnIndex(ContactsContract.Contacts._ID));
                String name = cur.getString(
                                cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                Cursor pCur = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +"=" +id, null, null);
                if(pCur.getCount()>0)
                {
                    while (pCur.moveToNext()) 
                        {
                        // Do something with phones
                            String pnumber=pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                            contactids.add(id);
                            names.add(name.trim().toLowerCase());
                            PhoneNumbers.add(pnumber);
                        } 
                        pCur.close();
            }
            else
            {
                String pnumber="";
                    contactids.add(id);
                    names.add(name.trim().toLowerCase());
                    PhoneNumbers.add(pnumber);
            }

           }while (cur.moveToNext()); 
            cur.close();
        }               
        return null;        
    }
    @Override
    protected void onPostExecute(Void result) {
        dialog.dismiss();
        int contactidsize=contactids.size();
        int namesize=contactids.size();
        int numbersize=contactids.size();
        saverecords();
        return;
    }       

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:38:30.033

你得到你手机的联系人列表..试试这个代码，然后如果你想使用列表中的联系人，你选择那个联系人并使用该联系人的详细信息（例如：号码，姓名，email.id等）请转到下面的链接

```
/***  USE this CODE   ******/
int PICK_CONTACT=1;

Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
startActivityForResult(intent, PICK_CONTACT);` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:47:17.103

您正在使用以下条件：

`Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER ))) > 0)`

这不考虑没有电话号码的联系人。

希望这有效

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T06:23:05.573

请参阅 ContactManager [http://developer.android.com/resources/samples/ContactManager/index.html](http://developer.android.com/resources/samples/ContactManager/index.html)

创建并初始化布尔变量`mShowInvisible`- 如果设置为`true`，它将列出所有联系人，而不管用户偏好如何

```
/**
* Obtains the contact list for the currently selected account.
*
* @return A cursor for for accessing the contact list.
*/
private Cursor getContacts(){
// Run query
Uri uri = ContactsContract.Contacts.CONTENT_URI;
String[] projection = new String[] {
    ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME
};
String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '"(mShowInvisible ? "0" : "1") + "'";
String[] selectionArgs = null;
String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

return managedQuery(uri, projection, selection, selectionArgs, sortOrder);
} 
```

# iphone - UITextView 不显示文本

> ID：11840147
> 
> 赞同：4
> 
> 时间：2012-08-07T06:05:25.403
> 
> 标签：iphone, objective-c, uitextview

我的 xib 文件中有一个 TextView。

在我为其分配文本后，它不会显示文本，直到我双击它，并实际更改文本的选择：

**双击前：**

![在此处输入图像描述](../Images/ce85d9b550fdc87cd4906c3311cbbaaa.png)

**双击后：**

![在此处输入图像描述](../Images/0bda6b2c9100f8fe73b73728181cc4ae.png)

**更改选择大小后：**

![在此处输入图像描述](../Images/7ab1cc053abc24e38b2fca9cf14be0c3.png)

你有什么想法，如何从头开始显示文本？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:22:23.573

我们找到了解决方案。当您尝试在视图可见之前更新 txt 时，就会发生这种情况。

我们重写了函数 viewDidAppear，并做了如下代码：

```
// To fix the bug of not showing text in textView
        self.txtViewShowDetails.text = nil;
        self.txtViewShowDetails.text = self.mediaItem.mediaDescription;
        [self.txtViewShowDetails setContentOffset:CGPointZero]; 
```

如果视图是动画的，或者在动画控件视图内部，我们必须在动画完成后调用 viewDidAppear。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-03T22:21:40.980

我有一个类似的错误，但是当我使文本无法选择时发生了。一旦我使它再次可选择（在笔尖中签入），它再次修复了文本。虽然这不是此错误的解决方案（除非使其不可选择也可以解决您的问题），但希望它可以帮助其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:08:20.883

认为你已经在 IB 中设置了 TextView 自定义字体。所以你需要在代码中设置自定义字体。请在 IB 中设置系统字体并检查两个设备

```
TextView.font=[UIFont fontWithName:@"HelveticaNeue-Medium" size:17.0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-04T13:54:15.213

在我的情况下，文本很长，并且从头开始修剪。我先设置文本，然后设置字体和颜色。我先设置字体，然后设置文本。这个对我有用。

# javascript - 在 html 中调用外部 .js 文件

> ID：11840148
> 
> 赞同：9
> 
> 时间：2012-08-07T06:05:25.187
> 
> 标签：javascript, html

我有一个`array.js`文件和一个`index.html`.

我的`array.js`文件如下所示：

```
function go(){
    var array = new Array();
    array[0] = "Red";
    array[1] = "Blue";
    array[3] = "Green";
    for (var i=0; i < array.length; i++){
        document.write("<li>" + array[i] + "<br />");
    }
} 
```

我的`index.html`文件如下所示：

```
<html>
    <head>
        <script type="text/javascript" src="array.js"></script>
    </head>
    <body>
        <input type="button" onclick="go()" value="Display JS Array"/>
        <script>
            go();
        </script>
    </body>
</html> 
```

当我单击`Display JS Array`HTML 页面上的按钮时，没有任何反应。我希望在单击按钮后显示数组元素。它应该看起来像：

*   红色的
*   蓝色的
*   绿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:13:51.327

您可以通过将 li 元素的父元素作为参数来更改功能。

```
function go(element){
    var array = new Array();
    array[0] = "Red";
    array[1] = "Blue";
    array[3] = "Green";

    var ul = document.createElement("ul");
    for (var i=0; i < array.length; i++) {
       var li = document.createElement("li");
       li.innerHtml = array[i];
       ul.appendChild(li);
    }
    body.insertAfter(ul, element); 
}

<input type="button" onclick="go(this)" value="Display JS Array"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T06:11:35.000

将其替换`document.write("<li>" + array[i] + "<br />");`为`document.write("<li>" + array[i] + "</li>");`

并在您的 HTML 文件中，删除

```
<script>
  go();
</script> 
```

因为你已经在调用 go(); onclick 上的功能。在你的数组中，array[2] 将给出未定义的。

试试这对我有用：

```
 <html>
    <head>
        <script type="text/javascript">
            function go(){
                var array = new Array();
                array[0] = "Red";
                array[1] = "Blue";
                array[2] = "Green";
                li = document.getElementById("list");
                li_arr = "";
                for (var i=0; i < array.length; i++){
                   li_arr += "<li>" + array[i] + "</li>";
                }
               li.innerHTML = li_arr;
            }
        </script>
    </head>
    <body>
        <input type="button" onclick="go()" value="Display JS Array"/>
        <ul id="list"></ul>
    </body>
</html> 
```

​</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T05:22:17.070

你的代码很好。并且工作正常。是的，您可以使用 external JS 或 internal JS 。

**通过使用外部 JS：** -

**测试.html**

```
<html>
    <head>
        <script type="text/javascript" src="arrayy.js"></script>
    </head>
    <body>
        <input type="button" onclick="go()" value="Display JS Array"/>       
    </body>
</html> 
```

**数组.js**

```
function go(){
    var array = new Array();
    array[0] = "Red";
    array[1] = "Blue";
    array[3] = "Green";
    for (var i=0; i < array.length; i++){
        document.write("<li>" + array[i] + "<br />");
    }
} 
```

以上这些代码在 Mozilla Firefox 、IE 8 和其他一些浏览器中运行。

**通过使用内部 JS：** -

```
 <html>
    <head>
        <script>
            function go(){
            var array = new Array();
            array[0] = "Red";
            array[1] = "Blue";
            array[3] = "Green";
            for (var i=0; i < array.length; i++){
                document.write("<li>" + array[i] + "<br />");
            }
            }        
        </script>
    </head>
    <body>
        <input type="button" onclick="go()" value="Display JS Array"/>       
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:20:27.803

它对我来说很好用。

但正如 shreedhar 所说：你需要删除

```
 <script>
 go();
 </script> 
```

否则它将在您按下按钮之前显示。由于数组 [2] 未定义，您需要从数组中过滤该数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T11:15:32.867

假设如果您使用的是 jquery dom ready 函数，那么像这样对 arrayy.js 进行修改。

```
$(document).ready(function() {
    this.go = function(){
        var array = new Array();
        array[0] = "Red";
        array[1] = "Blue";
        array[3] = "Green";
        for (var i=0; i < array.length; i++){
           document.write("<li>" + array[i] + "<br />");
        }
    }
} 
```

# php - 使用 glob 过滤文件名？

> ID：11840152
> 
> 赞同：0
> 
> 时间：2012-08-07T06:05:45.383
> 
> 标签：php, database, file, web-applications, glob

我有文件名的文件列表，文件名格式为 ttttyyyymmdd.txt，即时间戳前 4 位。这是一个示例 1322120120804.txt。tttt 是为每个文件生成的随机整数。我想使用 php glob 只选择当天发布的文件。所以在我的代码中我有

```
$dir="myfiles/";
glob($dir."1322".date('Ymd')); 
```

此代码仅选择 1 个前缀为 1322 的文件。如何使其成为动态文件，以便读取所有生成此日期的文件。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:10:05.047

试试这个：

```
$dir="myfiles/";
glob($dir."*".date('Ymd')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:11:13.127

glob`[0-9]`像字符组一样理解，因此您可以编写：

```
 glob($dir."[0-9][0-9][0-9][0-9]".date('Ymd')); 
```

在 linux 之类的系统上，php 的 glob 是类似名称的 posix 函数的包装器，因此阅读[posix 手册](http://linux.die.net/man/7/glob)可能有助于搜索模式功能。

# cocos2d-iphone - 基于box2d的游戏中b2ContactListener的简单使用

> ID：11840156
> 
> 赞同：0
> 
> 时间：2012-08-07T06:06:10.803
> 
> 标签：cocos2d-iphone, box2d-iphone

我正在使用基于 box2d 的游戏，我想检测我的精灵体和边缘体之间的碰撞。[我知道在本教程](http://www.raywenderlich.com/2010/03/04/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone/)中使用 b2Contactlistener，但我想以最简单的形式使用 contactlistener。有谁知道比帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:53:03.317

这有一个简单的例子（同一站点）：[http ://www.raywenderlich.com/28606/how-to-create-a-breakout-game-with-box2d-and-cocos2d-2-x-tutorial-part- 2](http://www.raywenderlich.com/28606/how-to-create-a-breakout-game-with-box2d-and-cocos2d-2-x-tutorial-part-2)

# javascript - javascript中的简单缓存

> ID：11840159
> 
> 赞同：0
> 
> 时间：2012-08-07T06:06:21.707
> 
> 标签：javascript, caching

如果我将数据保存在 global 中，可能会出现什么潜在问题`var cache = {}`？

它会被垃圾收集器收集吗？我可以确保它一直持续到观看结束吗？

是否有我可以使用的浏览器内置功能，以便下次打开页面时我已经准备好缓存数据？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:17:57.213

听起来您需要了解javascript中全局数据的生命周期：

1.  在给定页面的生命周期中，全局变量会一直持续到您清除它的值为止。它永远不会被垃圾收集。因为它是全球性的，所以它永远不会超出范围。

2.  当查看器转到该窗口中的新页面或关闭该浏览器窗口时，该先前页面的所有 javsacript 数据都将被释放并且不再可用。

3.  有三种方法可以保存数据，以便在该页面或其他页面的未来视图中使用它：1）Cookie，2）本地存储，3）服务器存储。在所有这些情况下，都必须从其存储位置检索数据并将其放回 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:12:08.443

只要页面保持打开状态，该变量就会存在。在它关闭（或导航离开）后，它将被垃圾收集。

如果缓存中的数据*很少*，可以将其序列化并存储为 cookie。对于大量数据，DOM 存储可能很有用，但浏览器并不普遍支持它。

# .net - 在 DB 数据上计算价值数学函数的有效方法

> ID：11840161
> 
> 赞同：-1
> 
> 时间：2012-08-07T06:06:38.727
> 
> 标签：.net, mysql, sql-server-2008

在 .net 应用程序中，无论是窗口还是 Web 应用程序，

要执行不同的数学函数，如 sqrt、maximum、minimum、avg，请依靠大量数据。使用存储过程或使用迭代的普通程序逻辑。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:12:55.007

对于较大的数据集，查询或存储过程通常更快。SQL Server 已针对使用集合进行了优化，只要您保持在集合逻辑（SELECT、GROUP BY 等）内。

如果您有一个带有循环的存储过程，那就另当别论了，它的效率不会高很多。此外，在 SQL 中，您可能会使用更简洁/更少的代码对数据进行聚合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:12:46.467

我认为最好的方法是使用`stored procedure`. 无论如何，只要您的表被正确索引，一切都会好起来的。我建议这样做的另一个原因是因为您的代码*封装*在服务器中。

# sql - 了解 SQL Server 2005 数据库中特定日期修改了多少表

> ID：11840165
> 
> 赞同：0
> 
> 时间：2012-08-07T06:06:59.550
> 
> 标签：sql, sql-server-2005, sql-manager

我有一个包含 40 个表的数据库。所以我想找到在特定日期修改的表格，比如

*   我的数据库中修改了多少表`20 Aug 2011`？

**更新**
请注意，我需要表名而不是记录 ID

就像修改了内容的表的名称 `20 Aug 2011`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:14:27.020

**编辑：** @Damien_The_Unbeliever 对他的评论有一个很好的观点。我的回答只与表结构有关，与内部数据无关。如果您想验证数据何时更改，则需要添加一`updated_date`列，以便查询它并查找修改时间。

使用目录视图，尤其是`sys.tables`

```
DECLARE @auxDate datetime = '20120820 00:00:00'
SELECT tbl.name
  FROM sys.tables tbl
 WHERE modify_date = @auxDate 
```

修改为显示表名。我有`WHERE modify_date >= @auxDate`，但您希望在特定日期修改表名，因此更新`WHERE`子句以显示某一天

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T06:33:36.533

在数据修改的情况下，

```
Alter table tablename add datemodified timestamp

select count(*) from tablename where datemodified = @yourdate 
```

# php - 在数据库php中插入Url最后2个字符

> ID：11840166
> 
> 赞同：0
> 
> 时间：2012-08-07T06:07:01.467
> 
> 标签：php, url, path, insert

我正在尝试将 Url 的最后 2 个字符插入到我的数据库中。当我每次插入时，它都需要一些数字，例如“2147483647”。如何插入正确的最后 2 个 Url 字符。'$array = json_decode(stripslashes($_POST['data']));

for($i = 0, $l = sizeof($array); $i < $l; $i++){ $obj = $array[$i];

```
if($obj->{'leaf'} == true){
    $leaf = 1;
} else{
    $leaf = 0;
}

if($obj->{'parentId'} == null){
    $parentID = 'null'; 
} else{
    $parentID = $obj->{'parentId'};
}

if($obj->{'Duration'}==''){
    $duration = 0;
} else{
    $duration = $obj->{'Duration'};
}

$url = (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];

$gantt_id = substr(strrchr($url, '='), 1);
/*if($obj->{'gantt_id'}==null){
    $gantt_id = 0;
} else{
    $gantt_id = $obj->{'gantt_id'};
}
*/
$q = 'INSERT INTO j_gantt_tasks SET Name = "'.$obj->{'Name'}.'", StartDate = "'.$obj->{'StartDate'}.'", EndDate = "'.$obj->{'EndDate'}.'",
      Duration = "'.$obj->{'Duration'}.'", DurationUnit = "'.$obj->{'DurationUnit'}.'", PercentDone = "'.$obj->{'PercentDone'}.'", Cls = "'.$obj->{'Cls'}.'", gantt_id="'.$gantt_id.'",
      parentId = "'.$obj->{'parentId'}.'"';

$r = mysql_query($q);
if(!$r){
    echo db_error($q);
}

$obj->{'id'} = mysql_insert_id(); 
```

} 回声 json_encode($array);'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:25:06.543

尝试[子串](http://php.net/manual/en/function.substr.php)

```
$url = (!empty($_SERVER['HTTPS'])) ?
     "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : 
     "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];

$last2 = substring($url,-2); 
```

# python - 打印逗号功能不起作用

> ID：11840169
> 
> 赞同：0
> 
> 时间：2012-08-07T06:07:26.327
> 
> 标签：python, printing

我输入了这段代码：

```
def game():
down, right = 0, 0
while 1:
    for i in range(down):
        print "00000000000000000000000000000000000000000000000000000000000000000000000000000000"
    for j in range(right):
        print "0",
    print "S",
    for j in range(80 - (right + 1)):
        print "0",
    for i in range(38 - (down + 1)):
        print "00000000000000000000000000000000000000000000000000000000000000000000000000000000"
    direction = raw_input("Direction?")
    if(direction.upper() == "W"):
        down -= 1
    elif(direction.upper() == "S"):
        down += 1
    elif(direction.upper() == "A"):
        right -= 1
    elif(direction.upper() == "D"):
        right += 1
game() 
```

'print "S",' 应该在末尾有一个逗号，以便在我下次调用 print 函数时停止在下一行打印。

实际的事情是这样的：（我已经砍掉了一些包含“000000”的行）

S 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 000000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000000000000000000

为什么第一个零之间有空格？我的打印功能中没有空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:09:21.817

```
print "0", 
```

表示`print`“0”和`print`一个空格。

逗号基本上会导致`print`输出空格而不是换行符。如果您想规避此行为，请`sys.stdout.write()`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T06:29:17.253

您可以将 softspace 设置`False`为`,`

```
print "S",
sys.stdout.softspace = False 
```

但是你不妨使用`sys.stdout.write()`

# javascript - RequireJS 减慢了我的网络应用程序的负载

> ID：11840170
> 
> 赞同：4
> 
> 时间：2012-08-07T06:07:32.487
> 
> 标签：javascript, asp.net-mvc, refactoring, requirejs

我正在使用 requireJS 将我的 javascript 重构为模块化方式。

我已经完成了，我的项目结构看起来很不错，不要误会我的意思。但是现在将应用程序发布到 Windows azure 上，它现在像狗一样运行。页面弹出很快，但随着对 requirejs 模块的依赖项进入并生效，它们会显得很笨拙。

难道我做错了什么？我认为这会平滑所有内容的加载。

有没有人遇到过这种困境，他们想要模块化的 javascript 并试图用 requireJs 来完成这个并且得到了一个糟糕的结果？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T06:28:30.703

你说的不好的结果是什么意思？实施 require js 后，初始页面加载时间是否大幅减少？如果是这样，你明白为什么会这样吗？

我的意思是，如果没有缩小/连接在减少加载时间方面发挥任何作用，初始页面加载时间会减少，因为您可能只请求一个 js 文件，require js 加载器和 main.js .. . 在 dom 准备好之前加载的所有其他依赖项现在在 dom 准备好后首次使用时加载。

您可能需要阅读[http://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)以了解缩小/连接文件的方法。

**编辑：**如果你想要的只是模块化 js，你可以简单地使用[Revealing Module Pattern](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript)之类的东西，RequireJS 有助于依赖管理。如果没有 RequireJS，您必须手动确保在模块代码执行之前加载所有依赖项。

# linux - 如何仅从 Perl 中 ls -lrt 的输出中查找/剪切文件名

> ID：11840171
> 
> 赞同：-1
> 
> 时间：2012-08-07T06:07:37.900
> 
> 标签：linux, perl, cut

我想要 的输出中的文件名`ls -lrt`，但我找不到文件名。我使用了下面的命令，但它不起作用。

```
$cmd=' -rw-r--r-- 1 admin u19530 3506 Aug  7 03:34 sla.20120807033424.log';
my $result=`cut -d, -f9 $cmd`;
print "The file name is $result\n"; 
```

结果是空白。我需要文件名作为`sla.20120807033424.log`

* * *

到目前为止，我已经尝试了下面的代码，它适用于文件名。

### 代码

```
#!/usr/bin/perl
my $dir = <dir path>;
opendir (my $DH, $dir) or die "Error opening $dir: $!";
my %files = map { $_ => (stat("$dir/$_"))[9] } grep(! /^\.\.?$/, readdir($DH));
closedir($DH);
my @sorted_files = sort { $files{$b} <=> $files{$a} } (keys %files);
print "the file is $sorted_files[0] \n"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T06:44:23.947

```
use File::Find::Rule qw( );
use File::stat       qw( stat );
use List::Util       qw( reduce );

my ($oldest) =
   map $_ ? $_->[0] : undef,                              # 4\. Get rid of stat data.
   reduce { $a->[1]->mtime < $b->[1]->mtime ? $a : $b }   # 3\. Find one with oldest mtime.
   map [ $_, scalar(stat($_)) ],                          # 2\. stat each file.
   File::Find::Rule                                       # 1\. Find relevant files.
      ->maxdepth(1)                                       #       Don't recurse.
      ->file                                              #       Just plain files.
      ->in('.');                                          #       In whatever dir. 
```

*   [文件::查找::规则](http://search.cpan.org/perldoc?File%3a%3aFind%3a%3aRule)
*   [文件::统计](http://search.cpan.org/perldoc?File%3a%3astat)
*   [列表::实用程序](http://search.cpan.org/perldoc?List%3a%3aUtil)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:28:46.813

使用`-l`. 这会做你想做的

```
print((`ls -brt`)[0]); 
```

但通常最好避免炮击，除非 Perl 不能提供你需要的东西，而且这很容易做到

```
print "$_\n" for (sort { -M $a <=> -M $b } glob "*")[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-28T12:19:52.050

如果日志文件的名称在您的控制之下，即没有空格或其他特殊字符，那么可能会做一个快速而肮脏的工作：

```
my $cmd=' -rw-r--r-- 1 admin u19530 3506 Aug  7 03:34 sla.20120807033424.log more more';
my @items = split ' ', $cmd;
print "log filename is : @items[8..$#items]";
print "\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:13:05.810

不可能可靠地做到这一点`-lrt`- 如果您愿意选择其他选项，您可以做到。

顺便说一句，`-rt`即使没有`-l`.

此外，如果您必须使用 ls，您可能应该使用`-b`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T08:27:06.417

```
my $cmd = ' -rw-r--r-- 1 admin u19530 3506 Aug  7 03:34 sla.20120807033424.log';

$cmd =~ / ( \S+) $/x or die "can't find filename in string " ;
my $filename = $1 ;

print $filename ; 
```

免责声明 - 如果文件名有空格并且可能在其他情况下，这将不起作用。OP 将知道相关文件的命名约定。我同意有更强大的方法不使用`ls -lrt`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-07T07:58:16.947

也许是这样的：

```
ls -lrt *.log | perl -lane 'print $F[-1]' 
```

# object - 为什么类隐式地仅从对象类派生？

> ID：11840178
> 
> 赞同：1
> 
> 时间：2012-08-07T06:08:19.053
> 
> 标签：object, language-agnostic, programming-languages

我没有任何论据反对为什么我们只需要一个通用类。但是，为什么我们不拥有两个通用类，比如一个 Object 和一个 AntiObject 类。在自然和科学中，我们发现了二元性的概念——比如能量和暗能量；男女; 正负; 乘除法；电子和质子；整合与推导；在集合论中。二元论的例子太多了，它本身就是一种哲学。在编程本身中，我们看到与我们使用设计模式的方式形成对比的反模式，它可以帮助我们执行工作。我们称之为面向对象编程。这是一个限制因素，还是在理解编程语言的形成时我缺少一些基本的东西？

编辑：我不确定，但这种二元性概念的用处可能在于创建垃圾收集器，这些垃圾收集器创建反对象，这些反对象与自由或松散的对象结合以破坏自身，从而释放内存。或者可能是 AntiObjects 与 Objects 一起创建一种自修改编程语言——它允许我们创建安全的自修改代码，使用基因编程进行进化计算，隐藏代码以防止逆向工程。我已将此问题移至 Stack Exchange 的计算机科学站点，因为这里认为这是题外话。如果您想评论/回答这个问题，请使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:24:49.623

由于多种原因，继承树通常（就像在 C# 中一样）是一棵具有单个根的树，这些原因似乎都导致了一个大树：

*   如果有多个根，就没有办法指定“任何类型的对象”（除了 C++ 之类的东西`void *`，因为它抛弃了任何“类型”的概念，这将是可怕的）。
*   即使是“任何类型的对象”的*想法*也失去了一些用处，因为您不能再保证您将接受的对象的*任何事情。*你怎么说“所有对象都具有属性*a、b*和*c* ”以让程序实际使用它们？您需要一个所有接口都实现的接口……然后，*该接口成为根类型*。
*   如果不能收集他们管理的每种类型的对象，支持 GC 的语言将毫无用处。 *糟糕*，又出现了“任何类型的对象”！

总而言之，将一种类型作为层次结构的根会更简单。它使您可以制定适用于系统中每个对象的合同/保证/等，并减少对希望能够以通用方式处理对象的代码的要求。

C++ 避免了拥有多个根类型，因为 (1) C++ 允许多重继承，因此对象可以弥合继承树之间的差距；(2) 它有模板（它们*比*泛型更能接受任何类型的对象）；(3) 它可以通过类似的方式完全抛弃和回避任何“类型”的概念`void *`；(4) 它不提供为您管理和收集您的物品。

C# 不想要多重继承和模板的所有复杂性，它想要垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:10:29.990

在自然界中，如果一个家庭中有两个完全不同、完全相反的孩子，他们仍然有共同的父母。

您给出的所有这些示例都属于共同类别。例如，男性和女性属于 Homosapiens 类别。加号和减号属于运算符类别。

在 OOPS 中也有两种类型。引用类型和值类型，但它们仍然属于对象。

你的建议也不错。但是让我们在宇宙中接受你的建议。仍然会有一个`Super_Class`包含您的 Object 和 AntiObject 类。所以它必须在某个地方停下来，在 OOPS`object`中就是它停止的那个类。

# html - 在某个类的正文中选择某个类的链接

> ID：11840181
> 
> 赞同：0
> 
> 时间：2012-08-07T06:08:39.430
> 
> 标签：html, css, magento

在特定类的主体中选择某个类的链接的正确方法是什么。例如，我的 body 有“abc”类，链接有“efg”类，我的 css 代码会是什么样子？（我正在尝试为 Magento 块创建活动链接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:11:13.393

```
body.body_class a.link_class 
```

这个问题有点基础——你应该试着学习一下这些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:11:30.920

你必须做一些研究

```
body.abc a.efg {
   rules
} 
```

甚至[w3c](http://www.w3schools.com/css/)都可以帮助您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:11:38.133

你应该这样写：

```
.abc .efg {

     /*Your CSS Rules*/
 } 
```

## [**看演示**](http://jsfiddle.net/akhurshid/uQHCF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:17:00.287

检查这个例子

```
<html> 
<head>      
<style>
.outer
{
    background-color: red;
    height: 40px;
    margin: 10px;
}

.inner
{
    background-color: blue;
    height: 20px;
    margin: 5px;
}

.outer .inner
{
background-color: green;
}
</style>
</head>

<body  onload="loadCars()">

Check div style.
<div  id="mydiv" class="inner">
</div>

</div>
<div  id="mydiv" class="outer">
<div  id="mydiv" class="inner"></div>

</div>

</body>
</html> 
```

将上面的代码保存在一个 html 文件中并打开它。

# iphone - 如何将注释从表格视图显示到地图视图？

> ID：11840185
> 
> 赞同：1
> 
> 时间：2012-08-07T06:09:01.167
> 
> 标签：iphone, objective-c, ios

我有一个表格视图，每行都有名称，每个标题都有不同的图像。我需要将这些标题传递给 mapview，因为注释包含标题名称作为注释的标题。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

UITableViewCell *cell = nil;
static NSString *AutoCompleteRowIdentifier = @"AutoCompleteRowIdentifier";
cell = [tableView dequeueReusableCellWithIdentifier:AutoCompleteRowIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] 
            initWithStyle:UITableViewCellStyleDefault reuseIdentifier:AutoCompleteRowIdentifier];
}

AddressInfo *addressInfo = [addressList objectAtIndex:indexPath.row];

NSString *str=[NSString stringWithFormat:@"%@",addressInfo.category];
NSString *str2=@"0";
if ([str isEqualToString:str2] ) {
    UIImage *image1=[UIImage imageNamed:@"greyDot.png"];
    cell.imageView.image=image1;
}
NSString *str3=@"10";
if ([str isEqualToString:str3] ) {
    UIImage *image2=[UIImage imageNamed:@"blackDot.png"];
    cell.imageView.image=image2;
}   
NSString *str4=@"20";
if ([str isEqualToString:str4] ) {
    UIImage *image3=[UIImage imageNamed:@"greendot.png"];
    cell.imageView.image=image3;
}   

NSString *str5=@"30";
if ([str isEqualToString:str5] ) {
    UIImage *image4=[UIImage imageNamed:@"blueDot.png"];
    cell.imageView.image=image4;
}

NSString *str6=@"1";
if ([str isEqualToString:str6] ) {
    UIImage *image5=[UIImage imageNamed:@"0Dot.png"];
    cell.imageView.image=image5;
}

cell.textLabel.text = addressInfo.name;
return cell;

} 
```

但是在我的地图视图中，我没有像在表格视图中那样获得确切的图像注释，而是从表格视图中获得随机图像作为注释，但标题名称与我想要的相同。

这是我的地图视图代码：

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:
(id <MKAnnotation>)annotation {
   pinView = nil;
if(annotation != mapview.userLocation) 
{

    static NSString *defaultPinID = @"defaultPinID";
    pinView = (MKAnnotationView *)[mapview dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
    if ( pinView == nil ) pinView = [[[MKAnnotationView alloc]
                                      initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];

    AddressInfo *address = [addressArray objectAtIndex:x];
NSString *dotstr=[NSString stringWithFormat:@"%@",address.category];
    NSString *dotstr1=@"0";
    if([dotstr isEqualToString:dotstr1])
    {
        NSLog(@"string 0 is %@",dotstr1);
        pinView.image=[UIImage imageNamed:@"greyDot.png"]; 
        NSLog(@"coming here 0");
    }
    NSString *dotstr2=@"10";
    if([dotstr isEqualToString:dotstr2])
    {
        NSLog(@"string 10 is %@",dotstr2);
        pinView.image=[UIImage imageNamed:@"blackDot.png"]; 
        NSLog(@"coming here 10");
    }
    NSString *dotstr3=@"20";
    if([dotstr isEqualToString:dotstr3])
    {
        NSLog(@"string 20 is %@",dotstr3);
        pinView.image=[UIImage imageNamed:@"greendot.png"];
        NSLog(@"coming here 20");
    }

    NSString *dotstr4=@"30";
    if([dotstr isEqualToString:dotstr4])
    {
        NSLog(@"string 30 is %@",dotstr4);
        pinView.image=[UIImage imageNamed:@"blueDot.png"];
        NSLog(@"coming here 30");
    }
    NSString *dotstr5=@"1";
    if([dotstr isEqualToString:dotstr5])
    {
        NSLog(@"string defau is %@",dotstr5);
        pinView.image=[UIImage imageNamed:@"greyDot.png"];
        NSLog(@"coming here default");
    }

    pinView.canShowCallout = YES;

    infoButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    infoButton.tag=k;
    [infoButton addTarget:self action:@selector(pinLabelClicked:) forControlEvents:UIControlEventTouchUpInside];
    pinView.rightCalloutAccessoryView = infoButton;
    x++;

}
else {
    [mapview.userLocation setTitle:@"I am here"];
}

return pinView;

} 
```

在第一个屏幕中，第一行包含每行左侧的蓝色图像我试图在地图视图中显示相同但在我的地图视图中蓝色注释显示灰色图像标题。有谁知道如何做到这一点。任何教程或示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:32:05.620

检查此框架[https://github.com/jacobjennings/JJMapCallout](https://github.com/jacobjennings/JJMapCallout)。

我在我的一个项目中使用它，效果很好。[还在这里](http://blog.asolutions.com/2010/09/building-custom-map-annotation-callouts-part-1/) 和[这里](https://stackoverflow.com/questions/6392931/mkannotationview-lock-custom-annotation-view-to-pin-on-location-updates)查看讨论

# python - 在 Python 中获取排列，itertools

> ID：11840187
> 
> 赞同：2
> 
> 时间：2012-08-07T06:09:07.070
> 
> 标签：python, permutation, itertools

我想使用 itertools 从字母表中的每个字母中获得所有可能的 3 个字母排列。这回到空白：

```
import itertools 

def permutations(ABCDEFGHIJKLMNOPQRSTUVWXYZ, r=3):
    pool = tuple(iterable)
    n = len(pool)
    r = n if r is None else r
    for indices in product(range(n), repeat=r):
        if len(set(indices)) == r:
            yield tuple(pool[i] for i in indices) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T06:14:05.797

你有点搞混了，那只是解释什么的代码`permutations`。`itertools`实际上是用 C 代码编写的，python**等价物**只是为了展示它是如何工作的。

```
>>> from itertools import permutations
>>> from string import ascii_uppercase
>>> for x in permutations(ascii_uppercase, r=3):
        print x

('A', 'B', 'C')    
('A', 'B', 'D')
('A', 'B', 'E')    
('A', 'B', 'F')
..... 
```

那应该可以正常工作

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-07T06:14:20.477

文档中的代码`itertools.permutations`解释了函数是如何实现的，而不是如何使用它。你想这样做：

```
perms = itertools.permutations('ABCDEFGHIJKLMNOPQRSTUVWXYZ', r=3) 
```

您`print(list(perms))`可以通过将其转换为列表（`for`

```
for perm in perms:
    ... 
```

# sql - javax.sql.Time 行为从 ojdbc14 更改为 ojdbc6

> ID：11840192
> 
> 赞同：1
> 
> 时间：2012-08-07T06:09:32.223
> 
> 标签：sql, oracle, jdbc, ojdbc

我们刚刚从 ojdbc14 切换到 ojdbc6，并注意到当我们通过准备好的语句将 javax.sql.Time 值插入 Oracle 列时`preparedStatement.setTime(1, new javax.sql.Time(new Date().getTime()))`，它的行为发生了变化。它曾经将日期和时间信息都插入到表中，但使用新驱动程序时，似乎只捕获了时间部分，我们在数据库中看到的值是 1970 年 1 月 1 日。

现在，情况很明显，我的问题是在哪里可以找到描述此行为的官方文档或更改说明。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:31:18.893

在我看来，通过将值作为日期/时间对象（例如 ）传递并按原样`java.sql.Timestamp`读取它们会更好地为您服务。因此，您将使用`public void setTimestamp(int parameterIndex, Timestamp x)`设置相应的值。这使用起来更干净。

然后，您可以在从数据库中读取数据后，使用 Java SimpleDateFormat 将数据格式化为您自己喜欢的格式。

但是，您可以在此 Oracle [JDBC 驱动程序文档](http://www.oracle.com/technetwork/database/enterprise-edition/111070-readme-083278.html)中找到一些记录在案的时间戳使用错误。这些可能与您没有直接关系，但请查看以下内容：#BUG-6749320、#6870832、#7028625、#6441084

您可能想在此处阅读有关更改的信息：[“DATE 和 TIMESTAMP 发生了什么？”](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-faq-090281.html#08_01) Oracle JDBC FAQ 部分提供。

# sql - 电话间隙项目的存储选项

> ID：11840194
> 
> 赞同：0
> 
> 时间：2012-08-07T06:09:36.607
> 
> 标签：sql, ios, html, cordova, local-storage

我正在使用 HTML5 + phonegap 为 iOS 构建费用跟踪器应用程序。如何长时间将用户输入存储在数据库中。所以我可以在未来使用这些数据进行一些计算等。

我试过了 ;

*   PGSqlitePlugin：Phonegap 的 SQLitePlugin。（仍在尝试...）
*   HTML 5 本地存储
*   客户端 SQL 数据库

有没有更好的解决方案？还是我必须坚持以上其中一项？

提前致谢

# blackberry - 如何从另一个字段将焦点设置到列表字段的第一个元素？

> ID：11840202
> 
> 赞同：1
> 
> 时间：2012-08-07T06:10:16.193
> 
> 标签：blackberry, listfield

我想将焦点放在列表字段的第一个元素或项目上。问题是我从其他字段（不在列表字段中）设置焦点。

```
protected boolean navigationMovement(int dx, int dy, int status, int time) {

    while (dy > 0) {
    // How to jump into listfield?
        Field f = ???
        if (f.isFocusable()) {
            f.setFocus();
            dy--;
        }
    }
} 
```

这是我的 Listfield 课程。

```
public class Custom_ListField extends ListField {

private String[] title, category, date, imagepath;
private int[] newsid, catsid;
private List_News newslist;
private Bitmap imagebitmap[], localimage = Config_GlobalFunction
        .Bitmap("image_base.png");
private BrowserField webpage;
private boolean islatest;

private Vector content = null, text;
private ListCallback callback = null;

private int currentPosition = 0, j;
private Util_LazyLoader loader;

public Custom_ListField(Vector content, boolean islatest) {
    this.content = content;
    this.islatest = islatest;

    newsid = new int[content.size()];
    title = new String[content.size()];
    category = new String[content.size()];
    date = new String[content.size()];
    imagepath = new String[content.size()];
    catsid = new int[content.size()];
    imagebitmap = new Bitmap[content.size()];

    for (int i = 0; i < content.size(); i++) {
        newslist = (List_News) content.elementAt(i);
        newsid[i] = newslist.getID();
        title[i] = newslist.getNtitle();
        category[i] = newslist.getNewCatName();
        date[i] = newslist.getNArticalD();
        imagepath[i] = newslist.getImagePath();
        catsid[i] = newslist.getCatID();

        if (!imagepath[i].toString().equals("no picture"))
            imagebitmap[i] = localimage;
    }

    initCallbackListening();

    Main.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            for (j = 0; j < imagepath.length; j++) {
                if (!imagepath[j].toString().equals("no picture")
                        && Config_GlobalFunction.isConnected()) {
                    loader = new Util_LazyLoader(imagepath[j],
                            new Util_BitmapDowloadListener() {
                                public void ImageDownloadCompleted(
                                        Bitmap bmp) {
                                    imagebitmap[j] = bmp;
                                    invalidate();
                                }
                            });
                    loader.run();
                }
            }
        }
    }, 500, false);
}

private void initCallbackListening() {
    callback = new ListCallback();
    this.setCallback(callback);
    this.setRowHeight(-2);      
}

private class ListCallback implements ListFieldCallback {
    public ListCallback() {
    }

    public void drawListRow(ListField listField, Graphics graphics,
            final int index, int y, int width) {
        currentPosition = index;

        if (!imagepath[index].toString().equals("no picture")) {
            float ratio = (float) ((float) localimage.getHeight() / (float) imagebitmap[index]
                    .getHeight());
            Bitmap temp = new Bitmap(
                    (int) (imagebitmap[index].getWidth() * ratio),
                    (int) (imagebitmap[index].getHeight() * ratio));
            imagebitmap[index].scaleInto(temp, Bitmap.FILTER_BILINEAR,
                    Bitmap.SCALE_TO_FIT);
            imagebitmap[index] = temp;

            graphics.drawBitmap(
                    Display.getWidth()
                            - localimage.getWidth()
                            - 5
                            + ((localimage.getWidth() - imagebitmap[index]
                                    .getWidth()) / 2),
                    y
                            + (listField.getRowHeight(index) - imagebitmap[index]
                                    .getHeight()) / 2,
                    imagebitmap[index].getWidth(),
                    imagebitmap[index].getHeight(), imagebitmap[index], 0,
                    0);

            graphics.setColor(Color.BLACK);
            text = Config_GlobalFunction
                    .wrap(title[index], Display.getWidth()
                            - imagebitmap[index].getWidth() - 15);

            for (int i = 0; i < text.size(); i++) {
                int liney = y + (i * Font.getDefault().getHeight());
                graphics.drawText(
                        (String) text.elementAt(i),
                        5,
                        liney + 3,
                        DrawStyle.TOP | DrawStyle.LEFT | DrawStyle.ELLIPSIS,
                        Display.getWidth() - imagebitmap[index].getWidth()
                                - 10);
            }
        } else {
            graphics.setColor(Color.BLACK);
            text = Config_GlobalFunction.wrap(title[index],
                    Display.getWidth() - 10);
            for (int i = 0; i < text.size(); i++) {
                int liney = y + (i * Font.getDefault().getHeight());
                graphics.drawText(
                        (String) text.elementAt(i),
                        5,
                        liney + 3,
                        DrawStyle.TOP | DrawStyle.LEFT | DrawStyle.ELLIPSIS,
                        Display.getWidth() - 10);
            }
        }

        if (text.size() == 2) {
            graphics.setColor(Color.GRAY);
            graphics.drawText(date[index], 5, y
                    + Font.getDefault().getHeight() + 3);

            if (islatest) {
                graphics.setColor(Color.RED);
                graphics.drawText(category[index], Font.getDefault()
                        .getAdvance(date[index]) + 15, y
                        + Font.getDefault().getHeight() + 3);
            }
        } else if (text.size() == 3) {
            graphics.setColor(Color.GRAY);
            graphics.drawText(date[index], 5, y
                    + Font.getDefault().getHeight() * 2 + 3);

            if (islatest) {
                graphics.setColor(Color.RED);
                graphics.drawText(category[index], Font.getDefault()
                        .getAdvance(date[index]) + 15, y
                        + Font.getDefault().getHeight() * 2 + 3);
            }
        }

        if (!imagepath[index].toString().equals("no picture"))
            setRowHeight(index, imagebitmap[index].getHeight() + 10);
        else {
            if (text.size() == 2)
                setRowHeight(index, getRowHeight() + 9);
            else if (text.size() == 3) {
                setRowHeight(index, getRowHeight() * 15 / 10 + 9);
            }
        }

        graphics.setColor(Color.WHITE);
        graphics.drawRect(0, y, width, listField.getRowHeight(index));
    }

    public Object get(ListField listField, int index) {
        return content.elementAt(index);
    }

    public int getPreferredWidth(ListField listField) {
        return Display.getWidth();
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        return content.indexOf(prefix, start);
    }
}

public int getCurrentPosition() {
    return currentPosition;
}

protected boolean navigationClick(int status, int time) {
    final int index = getCurrentPosition();
    Main.getUiApplication().pushScreen(new Custom_LoadingScreen(1));

    Main.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            if (catsid[index] == 9) {
                if (Config_GlobalFunction.isConnected()) {
                    webpage = new BrowserField();

                    MainScreen aboutus = new Menu_Aboutus();
                    aboutus.add(webpage);
                    Main.getUiApplication().pushScreen(aboutus);

                    webpage.requestContent("http://www.orientaldaily.com.my/index.php?option=com_k2&view=item&id="
                            + newsid[index]
                            + ":&Itemid=223"
                            + Database_Webservice.ht_params);
                } else
                    Config_GlobalFunction.Message(
                            Config_GlobalFunction.nowifi, 1);
            } else {

                Main.getUiApplication().pushScreen(
                        new Main_NewsDetail(newsid[index]));
            }
        }
    }, 1 * 1000, false);
    return true;
}
} 
```

我尝试使用`.get`，但是当我检查时`isFocusable()`，它返回给我`NullPointerException`。

我不确定如何获得正确的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:12:48.433

最后我找到了解决方案。

它由两层字段组成。外部必须设置为列表字段，之后内部必须设置为第一个元素。

```
while (dy > 0) {
    Field f = listfield;
    if (f.isFocusable()) {
        f.setFocus(); //outer field
        listfield.setSelectedIndex(0); //inner field
        dy--;
    }
} 
```

# java - 如何在 LWJGL 中渲染 3d 立方体？

> ID：11840203
> 
> 赞同：5
> 
> 时间：2012-08-07T06:10:21.847
> 
> 标签：java, 3d, lwjgl, cube

我在网上找不到关于在轻量级 Java 游戏库中渲染 3d 立方体的好教程！我学习 LWJGL 已经有一段时间了。我知道如何绘制二维对象。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T06:25:46.430

[这](http://nehe.gamedev.net/tutorial/3d_shapes/10035/)是“普通”OpenGL 教程的课程，但在网站底部，您可以找到许多不同语言和库的教程课程代码，包括带有 LWJGL 的 Java。

要从这个 jar 中获取 java 代码，您可以使用例如 7-zip 打开它，然后在名为 Lesson05 的文件夹中找到 .java 文件。

# memory-leaks - 杀死一个进程会恢复泄漏的内存吗？

> ID：11840206
> 
> 赞同：4
> 
> 时间：2012-08-07T06:10:24.717
> 
> 标签：memory-leaks, recover, kill-process

例如，当一个特定的应用程序运行时，它会导致 10M 的内存泄漏。如果我杀死进程，这10M会被系统收回吗？

我试着检查自己：

*   我创建了一个会导致 10M 内存泄漏的应用程序。
*   在我运行它之前，我使用“Memory Doctor”来检查我的空闲内存。(250.4M)
*   在我运行并杀死它之后，“内存医生”显示我的可用内存为 240M。

我想确认：当应用程序被杀死时，进程消耗的内存是否会被操作系统回收？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:21:59.480

是的，被杀死的进程会将所有使用过的内存返回给操作系统。

请记住，应用程序使用的任何文件系统缓存可能不会立即释放。

# junit - 使用 JUnit 测试 EJB 3.1 得到错误 Invalid resource

> ID：11840209
> 
> 赞同：0
> 
> 时间：2012-08-07T06:10:59.187
> 
> 标签：junit, persistence, java-ee-6, entitymanager

我正在尝试在 netbeans 中使用 JUnit 测试无状态 bean。此 bean 使用 EntityManager。

```
@Stateless
public class myEjb{
    @PersistenceContext
    private EntityManager em;

    public MyResult getResult(){
        return em.find(...);
    }
} 
```

然后我写了一个测试类。

```
public class myTest{
    private static EJBContainer ec;
    private static Context ctx;

    @BeforeClass
    public static void setUpClass(){
        ec = EJBContainer.createEJBContainer();
        ctx = ec.getContext();
    }
    ....
} 
```

当我运行测试时，它不起作用。我收到以下消息： Invalid resource : mydb__pm 执行此行时发生错误：

```
ec = EJBContainer.createEJBContainer(); 
```

如果通过删除实体管理器来更改我的 bean，它会起作用。所以，看来我的实体管理器有问题。我的 persistence.xml 文件很简单：

```
<persistence version="2.0" ...>
  <persistence-unit name="MetisDemoPU" transaction-type="JTA">
    <jta-data-source>MyDb</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

最后，我创建了一个名为 EJB（它使用实体管理器）的 JSF 托管 bean，它可以工作。

```
@ManagedBean
@RequestScoped
public class myManagedBean{
    @EJB
    private OfferEjb offerEjb;

    ...
} 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:41:13.863

好的，我找到了解决我的问题的方法。我现在可以使用 JUnit 来测试我的会话 bean 和持久性上下文。我不是专家，所以我的解释可能不完整。在 netbeans 7.2 中，有一个用于测试的嵌入式 glassfish 服务器。有必要在 domain.xml 文件中配置 jdbc 参数，然后对我来说它可以工作。在我的电脑上，这个文件在

```
C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain\ 
```

我只是添加了一个 jdbc 连接池和一个 jdvc jndi。

[本文包含更多详细信息。](https://stackoverflow.com/questions/6739987/embedded-glassfish-ignores-maven-test-resources)

# vba - PowerPoint 2010 从 VBA 打开新的演示文稿对话框

> ID：11840214
> 
> 赞同：0
> 
> 时间：2012-08-07T06:11:19.213
> 
> 标签：vba, powerpoint

我需要通过 VBA 宏/代码模拟操作文件 > 新建 > 我的模板（来自可用模板和主题）。

这将显示“新演示文稿”对话框。

PowerPoint 2010 中没有宏记录器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:26:07.737

我不认为你可以。我认为您所能做的就是使用代码打开标准文件对话框，例如

```
Application.FileDialog(ppFileDialogOpen).show 
```

# ruby-on-rails - 无法在rails中选择带重音的列

> ID：11840222
> 
> 赞同：0
> 
> 时间：2012-08-07T06:11:34.517
> 
> 标签：ruby-on-rails, ruby, activerecord

我的 Rails 应用程序中有 Level 记录，它包含 1 个字段（名称），可以包含带重音符号的字符。

```
1.9.3p125 :008 > Level.all
 Level Load (0.4ms)  SELECT "levels".* FROM "levels" 
 => [#<Level id: 1, name: "Débutant">, #<Level id: 2, name: "Intermédiaire">, #<Level id: 3, name: "Avancé">] 
```

但是当我查询时，我有：

```
1.9.3p125 :011 > Level.where("name = ?", "D\U+FFC3\U+FFA9butant").first
 Level Load (0.3ms)  SELECT "levels".* FROM "levels" WHERE (name = 'Dbutant') LIMIT 1
 => nil 
```

`Level.where("name = ?", "Débutant").first`使用`rails c`as时无法输入，`é`直接替换为`\U+FFC3\U+FFA9`. 但在我的控制器中，结果是一样的，我无法查询重音字符串。

我目前使用 sqlite 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:17:44.883

您在控制台中的问题与 readline 库有关：您必须安装具有适当 readline 支持的 Ruby。

如果您使用 rvm 安装了 Ruby，解决此问题的最快方法是：

```
rvm pkg install readline 
```

然后（假设您使用的是 1.9.3，否则只需替换为您的 Ruby 版本）：

```
rvm reinstall 1.9.3 --with-readline-dir=$rvm_path/usr 
```

之后，在 Rails 控制台中输入*é应该可以再次工作......*

关于您的其他问题（在控制器中）：您能否发布包含正在执行的 SQL 查询的日志摘录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:38:47.190

放置这个字符串

```
#encoding: utf-8 
```

到 Ruby 文件的第一行。

# iphone - FBFriendPickerViewController 在 FB-IOS SDK3.0 中崩溃

> ID：11840227
> 
> 赞同：0
> 
> 时间：2012-08-07T06:11:54.003
> 
> 标签：iphone, objective-c, ios

我正在IOS上开发Facebook SDK3.0，我使用[developers.facebook.com生成了Facebook密钥](http://developers.facebook.com)

```
my App ID/API Key 
165158463618789 
```

登录工作正常，但在使用`FBFriendPickerViewController`它时会崩溃，

**我使用了以下代码：**

```
 FBFriendPickerViewController *friendPicker = [[FBFriendPickerViewController alloc]     init];
   self.friendPickerController = friendPicker;

   [friendPicker loadData];
   friendPicker.navigationItem.title = @"Pick Friends";
   friendPicker.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] 
                                                  initWithTitle:@"Done" 
                                                  style:UIBarButtonItemStyleBordered 
                                                  target:self 
                                                                 action:@selector(doneButtonWasPressed:)];
    friendPicker.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] 
                                                 initWithTitle:@"Cancel" 
                                                 style:UIBarButtonItemStyleBordered 
                                                 target:self 
                                                 action:@selector(cancelButtonWasPressed:)];
 [self.navigationController pushViewController:friendPicker animated:YES]; 
```

**我得到崩溃的原因**

> -[__NSCFDictionary 长度]：无法识别的选择器发送到实例 0x3024d0 2012-08-07 11:13:12.430 IndusPatient[784:707] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSCFDictionary 长度]：无法识别的选择器sent to instance 0x3024d0' *** First throw call stack: (0x321a888f 0x341fe259 0x321aba9b 0x321aa915 0x32105650 0x320f1f19 0x3210e2cd 0x3210d1ad 0x3210e279 0x37a73fb1 0x37a73e8b 0x1a9735 0x1a9bbf 0x31c2fefb 0x31c2efd9 0x31c2e763 0x31bd2f37 0x321071fb 0x33e6baa5 0x33e6b6bd 0x33e6f843 0x33e6f57f 0x33e674b9 0x3217cb1b 0x3217ad57
> 0x3217b0b1 0x320fe4a5 0x320fe36d 0x31255439 0x31bfdcd5 0xcdd2b 0xcdccc) terminate called throwing an exception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:04:52.547

i was also facing this problem but now i have resolved it.

## using following method/code, i resolved issue

In AppDelegate

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

Add this line

```
[FBFriendPickerViewController class]; 
```

In your viewController header file add

```
@property (retain, nonatomic) FBFriendPickerViewController *friendPickerController; 
```

In your viewController implementation file add in a function

```
if (self.friendPickerController == nil) {
    // Create friend picker, and get data loaded into it.
    self.friendPickerController = [[FBFriendPickerViewController alloc] init];
    self.friendPickerController.title = @"Pick Friends";
    self.friendPickerController.delegate = self;
}

[self.friendPickerController loadData];
[self.friendPickerController clearSelection];

[self presentModalViewController:self.friendPickerController animated:YES]; 
```

so i have not used navigation controller style programming.

# php - smarty中的数组赋值

> ID：11840229
> 
> 赞同：0
> 
> 时间：2012-08-07T06:12:13.103
> 
> 标签：php, oop, smarty3

```
Array
(
    [0] => Array
        (
            [name] => willt
            [username] => willt
        )

    [1] => Array
        (
            [name] => Adam 
            [username] => adamb
        )
) 
```

我有一个数组并将其分配给 smarty via `$smarty->assign('array', $array);`，但我无法在模板中获取它。如何正确引用它？我试过：

```
array[1].name
array.1.name 
```

有和没有`$`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:19:24.267

它在模板中可见吗？如果是，`{$array.1.name}`应该这样做。

您还可以查看[文档](http://www.smarty.net/docs/en/language.variables.tpl#language.variables.assoc.arrays)。

# php - 我需要使用单引号两次 - 如何转义？

> ID：11840235
> 
> 赞同：1
> 
> 时间：2012-08-07T06:12:34.953
> 
> 标签：php, escaping

我想在 php 中运行它，但由于引号它不起作用....

```
 $cmd="sudo -u postgres sh -c 'psql -c \"alter user edumate with encrypted password \'BLAH_BLAH\';\" template1 2>&1' ";
    $shellOutput = exec($cmd, $output); 
```

`psql -c "alter user edumate with encrypted password 'BLAH_BLAH';" template1 2>&1`以 postgres 用户身份运行时执行正常。

我试过了，但它对我不起作用。

```
sudo -u postgres sh -c 'psql -c \"alter user edumate with encrypted password \'BLAH_BLAH\';\" template1 2>&1'
sudo -u postgres sh -c 'psql -c "alter user edumate with encrypted password \'BLAH_BLAH\';" template1 2>&1' 
```

如何转义 $cmd 以便执行它？

# 更新我

```
 $subcommand="alter user edumate with encrypted password 'BLAH_BLAH';";
    $sub = escapeshellarg($subcommand);
    $cmd="sudo -u postgres sh -c 'psql -c \"".$sub."\" template1 2>&1'";
    $shellOutput = exec($cmd, $output);
    echo "<pre>Output = " . print_r($output,1) . "</pre>"; 
```

返回

```
Output = Array
(
) 
```

# 更新二

感谢@Hawili 提供工作代码。我想知道如果使用 sh -c 'command' 他省略了如何运行。

```
$shellOutput=`sudo -u postgres psql -c "alter user edumate with encrypted password 'BLAH_BLAH';" template1 2>&1`; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:15:17.497

您可以查看此功能：

[http://php.net/manual/en/function.escapeshellcmd.php](http://php.net/manual/en/function.escapeshellcmd.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:20:50.653

您可以使用 php 使用的反引号 ` 将命令直接执行到 shell

前任：

```
$output = `ls -l`; 
```

在你的情况下，它可能是这样的：

```
$shellOutput=`sudo -u postgres psql -c "alter user edumate with encrypted password 'BLAH_BLAH';" template1 2>&1`; 
```

# objective-c - 使用 RestKit 在子对象中包含父引用

> ID：11840242
> 
> 赞同：0
> 
> 时间：2012-08-07T06:13:21.497
> 
> 标签：objective-c, ios, restkit

在 RestKit 中是否有一种简单的方法可以在子对象中包含父引用？例如，如果我有如下所示的 JSON：

```
{
    "parent": {
        "name": "Jim",
        "child": {
            "name": "John"
        }
    }
} 
```

如何配置 RKObjectMapping 以使我的“子”对象具有“父”引用（即 child.parent）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:01:15.257

我想出了一个不错的解决方法，因为这似乎不受 RestKit 直接支持。

您需要做的是使用键值验证将父引用放入子对象中。因此，对于上面的示例，父模型看起来像这样：

```
@interface Parent : NSObject

@property (strong, nonatomic) NSString *name;
@property (strong, nonatomic) Child *child;

@end

@implementation Parent

@synthesize name = _name;
@synthesize child = _child;

- (BOOL)validateChild:(id *)ioValue error:(NSError **)outError
{
    Child *child = (Child *)*ioValue;
    child.parent = self;
    return YES;
}

@end 
```

# objective-c - AppCode：.h 文件中未使用的语句

> ID：11840246
> 
> 赞同：0
> 
> 时间：2012-08-07T06:13:26.867
> 
> 标签：objective-c, ios, appcode, code-inspection

AppCode 是重构和审查代码的绝佳工具。上次我在 menu: 中使用 Code Inspector `'Code -> Code Inspect...'`，但是这个代码检查器有一些麻烦。

一般问题，当代码检查器发现`'Unused statement'`.h 文件有问题时。例如，我有 MyClass.h 和 MyClass.m 文件。并在 MyClass.m AppCode 中找到未使用的语句谁是 MyClass.h 文件。

那么，如何从代码检查器中删除此警告？为什么我会收到这个警告？从何而来？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:54:40.973

我添加了一个名为 NewClass 的新类，而不是运行 Inspector。正如怀疑的那样，它告诉我在我的项目中从未使用过类。事实上，类在**Inspection Result的****Unused Code**部分。

 **```
Name:                NewClass.h       
Location:            file NewClass.h       
Problem synopsis:           
Interface 'NewClass' is never used (at line 11)         
Problem resolution:           Safe delete the interface 'NewClass' 
```

如果您想将此控件静音，请转到 Preferences、Inspection 和**Unused Code**部分并取消选中**Unused class** check。您可以看到一些未使用的东西，因为它用灰色标记。

这个答案基于 1.6.2 并对原因进行了天真的猜测。**

# cocoa - 我可以将我的应用程序的默认行为设置为不在通知中心显示通知吗？

> ID：11840248
> 
> 赞同：2
> 
> 时间：2012-08-07T06:13:44.733
> 
> 标签：cocoa, osx-mountain-lion

我想利用 Mac OS 10.8 Mountain Lion 中的 NSUserNotification 向我的应用程序用户显示一个很好的通知，但我不想将此特定通知存储在 ML 桌面右上角的通知中心中。我知道用户可以进入系统偏好设置并将我的应用程序的通知行为更改为不在通知中心显示它，但是有没有办法默认设置它，或者清除通知中心的所有通知？

我的通知代码如下所示：

```
 NSUserNotificationCenter *nc = [NSUserNotificationCenter defaultUserNotificationCenter];
    notification.informativeText=@"text";
    notification.subtitle=[";
    [nc deliverNotification:notification]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:30:29.257

如果您正在寻找您的应用程序以实现相当于进入 NotificationCenter 并将警报样式设置为“无”的效果，那么应该有一个 info.plist 设置来执行此操作。它被称为 NSUserNotificationAlertStyle

文档不是很清楚，但我认为有效值为：无、横幅和警报

[http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW1](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW1)

# hadoop - 即使在删除列族之后，Hbase-Hadoop DFS 大小也不会减少

> ID：11840255
> 
> 赞同：4
> 
> 时间：2012-08-07T06:14:36.387
> 
> 标签：hadoop, hbase

我们在 EC2 上有一个带有 6 个区域服务器的小型 Hbase 集群。最近我们发现其中一个列族中的数据对我们来说真的没那么有用，因此决定放弃它。这个特定的列族占用了磁盘上 50% 以上的空间。我们更改了表格，删除了列族并运行了主要压缩。我们还对“-ROOT-”和“.META”进行了主要压缩。表。但是总 DFS 文件大小仍然没有减少？我们是否在这里遗漏了什么。任何帮助/指针将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:20:25.093

知道了！这是 Hbase 中的一个错误。他们不会从 HDFS 中删除文件管理器。我们必须从 hadoop-files 系统中查找并删除文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:48:18.090

只是添加另一件事来检查 - 至少在 Hbase 0.90.4 中，删除表会从 HDFS 中删除文件，但 .logs 目录的内容不一定。

例如，运行`hadoop fs -du /yourHbaseDirInDFS`，您将看到 .logs 目录中仍然有一大块数据。在重新启动 HBase 集群之前，这似乎不会消失。或者，我猜你可以手动删除日志文件，但对我来说让 hbase 来做这件事似乎更好。

# actionscript-3 - 如何在没有重复的情况下开始位图填充？（AS3）

> ID：11840256
> 
> 赞同：0
> 
> 时间：2012-08-07T06:14:36.473
> 
> 标签：actionscript-3, flash, actionscript

我的代码：

myCircle = 新形状（）；

```
function doStuffWithBitmapData(bmd:BitmapData):void
        {

            myCircle = new Shape();
            var matrix:Matrix = new Matrix();
            matrix.translate(0, 0);
            myCircle.graphics.beginBitmapFill(bmd, matrix, false);
            myCircle.graphics.drawCircle(0, 0, 17);
            myCircle.graphics.endFill();
            myCircle.x = 40;
            myCircle.y = 63;

            addChild(myCircle);

            // your code

            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        private function onEnterFrame(e:Event)
        {
            myCircle.rotation += 3;

        } 
```

我需要用图像填充圆圈，但是图像重复了很多次，但是如果我将重复设置为false，图片会更大，我可以不重复，同时不要改变大小填充图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:49:29.543

我不太确定位图填充方法，但创建自己的位图和位图数据，然后使用图像的位图数据，您可以随意操作图像像素/数据。

- 使用 bitmapData 类的 setPixel/setPixel32 方法将对您的任务有所帮助（谷歌是您的朋友）

Adobe 的帮助： http: [//livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/display/BitmapData.html](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/display/BitmapData.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:16:35.460

请仔细看**`draw()`**BitmapData Class Documents的方法。这非常重要。

并参考以下代码。

```
import flash.display.BitmapData;
import flash.display.Shape;
import flash.display.Bitmap;

var myCircle:Shape;

var bmd:BitmapData = new BitmapData(600,400,false,0xffffff);
var bmp:Bitmap = new Bitmap(bmd);
this.addChild(bmp);

var circleBitmapData:BitmapData = new BitmapData(20,20,false,0xffffff * Math.random());

myCircle = new Shape();
var matrix:Matrix = new Matrix();
myCircle.graphics.beginBitmapFill(circleBitmapData);
myCircle.graphics.drawCircle(0, 0, 20);
myCircle.graphics.endFill();
myCircle.x = 40;
myCircle.y = 63;

addEventListener(Event.ENTER_FRAME, onEnterFrame);

function onEnterFrame(e:Event)
{
    bmd.draw(myCircle, myCircle.transform.matrix, myCircle.transform.colorTransform);
    myCircle.x = Math.random() * stage.width;
    myCircle.y = Math.random() * stage.height;
} 
```

# php - 获取字符串提取中的所有段落

> ID：11840263
> 
> 赞同：2
> 
> 时间：2012-08-07T06:15:14.937
> 
> 标签：php

我从数据库中提取了几段，并尝试将这些段落分成一个带有正则表达式和不同类的数组......但没有任何效果。

我试图这样做：

```
 public function get_first_para(){
        $doc = new DOMDocument();
    $doc->loadHTML($this->review);
    foreach($doc->getElementsByTagName('p') as $paragraph) {
      echo $paragraph."<br/><br/><br/>";
    } 
 } 
```

但我明白了：

```
Warning: DOMDocument::loadHTML() [domdocument.loadhtml]: Unexpected end tag : p in Entity, line: 9 in C:\Inetpub\vhosts\bestcamdirectory.com\httpdocs\sandbox\model\ReviewContentExtractor.php on line 18 
```

可捕获的致命错误： DOMElement 类的对象无法在第 20 行的 C:\Inetpub\vhosts\bestcamdirectory.com\httpdocs\sandbox\model\ReviewContentExtractor.php 中转换为字符串

为什么我会收到消息，有没有一种简单的方法可以从字符串中提取所有段落？

**更新：**

```
 public function get_first_para(){
         $pattern="/<p>(.+?)<\/p>/i";
         preg_match_all($pattern,$this->review,$matches,PREG_PATTERN_ORDER);
         return $matches;
     } 
```

我更喜欢第二种方式..但它也不好用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:22:02.913

[DOMDocument::getElementsByTagName](http://php.net/manual/en/domdocument.getelementsbytagname.php)返回一个可迭代但不是数组的 DOMNodeList 对象。在变量中`foreach`是[DOMElement](http://php.net/manual/en/class.domelement.php)`$paragraph`的一个例子，所以简单地将它用作字符串是行不通的（正如错误所解释的那样）。

你想要的是 DOMElement 的文本内容，它可以通过那些（继承自 DOMNode 类）的[textContent属性获得：](http://php.net/manual/en/class.domnode.php#domnode.props.textcontent)

```
foreach($doc->getElementsByTagName('p') as $paragraph) {
  echo $paragraph->textContent."<br/><br/><br/>"; // for text only
} 
```

或者，如果您需要 DOMNode 的全部内容，您可以使用[DOMDocument::saveHTML](http://www.php.net/manual/en/domdocument.savehtml.php)：

```
foreach($doc->getElementsByTagName('p') as $paragraph) {
    echo $doc->saveHTML($paragraph)."<br/><br/><br/>\n"; // with the <p> tag

    // without the <p>
    // if you don't need the containing <p> tag, you can iterate trough it's childs and output them
    foreach ($paragraph->childNodes as $cnode) {
         echo $doc->saveHTML($cnode); 
    }
} 
```

至于您的 loadHTML 错误，html 输入无效，您可以使用以下命令抑制警告：

```
libxml_use_internal_errors(true); // before loading the html content 
```

如果您需要这些错误，请参阅手册中[libxml 的错误处理部分](http://php.net/manual/en/function.libxml-use-internal-errors.php)。

## 编辑

由于您坚持使用正则表达式，因此您可以这样做：

```
preg_match_all('!<p>(.+?)</p>!sim',$html,$matches,PREG_PATTERN_ORDER); 
```

[模式修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php):`m`表示多行，表示`s`可以`.`匹配行尾，`i`不区分大小写。

# android - 缺少“安卓项目”

> ID：11840271
> 
> 赞同：2
> 
> 时间：2012-08-07T06:16:16.560
> 
> 标签：android, eclipse, sdk, avd

我已经重新格式化了我的电脑。当我安装 eclipse、android avd 和 SDK 时，我现在缺少这些选项。制作一个安卓程序。我可以制作一个android应用程序。这是我最接近的选择。两者有很大区别吗？有没有人遇到过这个问题？
非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:21:51.247

我认为您的 Android 插件已从 Eclipse 中删除。

*   转到帮助菜单并选择“安装新软件”
*   `https://dl-ssl.google.com/android/eclipse/`在文本框中输入 URL
*   选择 Android 插件组件并安装它们。

# windows-phone-7 - 使用 DataBinding 时如何设置 Line X 值？

> ID：11840273
> 
> 赞同：0
> 
> 时间：2012-08-07T06:16:32.800
> 
> 标签：windows-phone-7

在我的 ListBox ItemTemplate 中，我想设置 TextBlock UnderLine。作为流：

```
 <StackPanel x:Name="TaskContent_SP"  Orientation="Horizontal" Background="#16191B" Height="80"  Width="455" >
                                    <Grid x:Name="DonePreDragCoreItem_GD" >
                                        <TextBlock x:Name="TaskNameItem_TB"  Canvas.ZIndex="0"   Text="{Binding TaskName}" Margin="10,10,10,10"   HorizontalAlignment="Left" Foreground="#414444" FontWeight="ExtraLight"  FontSize="30"></TextBlock>
                                        <Line x:Name="DoneForgroundLine_LE" Stroke="#414444" StrokeThickness="4" 
                                              X1="0" X2="{Binding ElementName=TaskNameItem_TB,Path=ActualWidth}"                                              
                                              Canvas.ZIndex="1" Margin="10,33,10,10"></Line>
                                    </Grid>
                                </StackPanel> 
```

如果我不使用数据绑定设置 Textblock 文本值。ActualWidth 有正常值。否则仍为 0。

datebinding 时如何获取 ActualWidth 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:34:12.417

您无法在绑定中获得 ActualWidth，因为它不是 DependencyProperty。您可以使用边框在底部获得一条线

```
<Border BorderThickness="0,0,0,1" BorderBrush="Black">
    <TextBlock x:Name="TaskNameItem_TB" Text="{Binding TaskName}" Margin="10,10,10,10"   HorizontalAlignment="Left" Foreground="#414444" FontWeight="ExtraLight" FontSize="30"/>
</Border> 
```

# linux - UUID 和磁盘映像之间有什么关系？

> ID：11840280
> 
> 赞同：0
> 
> 时间：2012-08-07T06:17:15.663
> 
> 标签：linux, virtualbox, uuid

为了在 VirtualBox 上为同一个 Fedora 17 vdi 创建两个 VM，我首先安装了 Fedora，然后使用 dd 命令复制了 Fedora17.vdi。然后我使用命令更改了新图像的 UUID

```
$ VBoxManage internalcommands sethduuid /home/pradeep/Fedora_New.vdi "NewUUID" 
```

但这不起作用..我很想知道磁盘的 UUID 值与其磁盘映像之间的关系以及它是如何计算的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:55:03.620

您是如何使用 dd 创建副本的？我的猜测是事情最有可能向南发展。

复制虚拟磁盘映像的最佳方法是使用[clonehd](http://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi)命令：

```
VBoxManage clonehd original.vdi copy.vdi 
```

这也将在创建副本时清理 UUID。

# apache - 根据变量的值将参数传递给 apache-ant exec 任务

> ID：11840284
> 
> 赞同：11
> 
> 时间：2012-08-07T06:17:45.367
> 
> 标签：apache, ant, if-statement, exec

我只使用`apache-ant`而**不是** `ant-contrib`

我有一个`ant`目标

```
<target name="stop" depends="init" >
...
</target> 
```

我想在其中调用`exec`任务。

如果变量的`HOST_NAME`值为`all`

```
<exec executable="${executeSSH.shell}" >
    <arg value="-h ${HOST_NAME}" />
    <arg value="-i ${INSTANCE}" />
    <arg value="-w 10" />
    <arg value="-e ${myOperation.shell} " />
    <arg value=" -- " />
    <arg value="${INSTANCE} ${USERNAME} ${PASSWORD}" />
</exec> 
```

如果变量的`HOST_NAME`值为`anything else`

```
<exec executable="${executeSSH.shell}">
    <arg value="-h ${HOST_NAME}" />
    <arg value="-i ${INSTANCE}" />
    <arg value="-e ${myOperation.shell} " />
    <arg value=" -- " />
    <arg value="${INSTANCE} ${USERNAME} ${PASSWORD}" />
</exec> 
```

**但我只想写一个任务而不是重复**`exec`。我已经使用`HOST_NAME`了参数，但是如何处理`-w 10`两个调用中不同的第二个参数。

我已经尝试了几种方法，通过使用搜索 SO `condition`，`if else`但似乎没有任何方法适用于`exec`or `arg`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-22T09:19:56.247

您可以使用条件任务：

```
<condition property="my.optional.arg" value="-w 10" else="">
    <equals arg1="${HOST_NAME}" arg2="all" />
</condition>

<exec executable="${executeSSH.shell}" >
    <arg value="-h ${HOST_NAME}" />
    <arg value="-i ${INSTANCE}" />
    <arg line="${my.optional.arg}" />
    <arg value="-e ${myOperation.shell} " />
    <arg value=" -- " />
    <arg value="${INSTANCE} ${USERNAME} ${PASSWORD}" />
</exec> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T11:33:45.460

尝试使用宏定义。以下示例未经测试。

```
<macrodef name="callSSH">
    <element name="extArgs" optional="y"/>
    <sequential>
        <exec executable="${executeSSH.shell}" >
            <arg value="-h ${HOST_NAME}" />
            <arg value="-i ${INSTANCE}" />
            <extArgs/>
            <arg value="-e ${myOperation.shell} " />
            <arg value=" -- " />
            <arg value="${INSTANCE} ${USERNAME} ${PASSWORD}" />
        </exec>
    </sequential>
</macrodef> 
<target name="stop" depends="init" >
    <if>
       <equals arg1="${HOST_NAME}" arg2="all"/>
        <then>
            <callSSH>
                <extArgs>
                    <arg value="-w 10" />
                </extArgs>
            </callSSH>
        </then>
        <else>
            <callSSH>
                <extArgs/>
            </callSSH>
        </else>
    </if>
</target> 
```

或者，如果您不使用贡献：

```
<target name="sshExecWithHost" if="HOST_NAME"> 
    <callSSH>
        <extArgs>
            <arg value="-w 10" />
        </extArgs>
    </callSSH>
</target>

<target name="sshExecNoHost" unless="HOST_NAME">
    <callSSH/>
</target>

<target name="sshSwitch" depends="sshExecNoHost,sshExecWithHost">
</target>

<target name="stop" depends="init,sshSwitch" >
</target> 
```

# c# - 使用 linq 从字典中获取所有值到匿名类型列表

> ID：11840285
> 
> 赞同：0
> 
> 时间：2012-08-07T06:17:49.137
> 
> 标签：c#, .net, dynamic, properties

我有一个学生班。

```
class student : DynamicObject
    {
          public Dictionary<string, object> dics = new Dictionary<string, object>();
    } 
```

我正在向此类动态添加属性。在我填充了一个

```
list<student> lists, 
```

我如何使用 linq 在每个学生班级的字典中检索键和值。这样我就可以将它绑定到数据网格。每个学生对象中的所有字典的键都是相同的，因为这将是列名。这些值将不同，它们是列值。这样我就可以将此匿名类型绑定到数据网格。我尝试了以下方法。但结果不正确。

```
 var result = lists.SelectMany(x => x.Dictionary.Keys).Select(m => new
                {
                    StudentID = m[1],
                    RegNo = m[2],
                    JoinYear = m[3]
                }).ToList(); 
```

终于可以这样绑定了

```
 grid.DataSource = result;
 grid.DataBind(); 
```

因此，网格将显示字典键中的列，并且所有行都将使用字典值填充。有什么帮助吗？？？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:57:00.800

你`SelectMany`是不必要的 - 你想为每个学生选择一行，而不是为每个学生的每个属性选择一行，所以你只需要一个`Select`：

```
var result = lists.Select(m => new
    {
        StudentID = m.Dict["StudentID"],
        RegNo = m.Dict["RegNo"],
        JoinYear = m.Dict["JoinYear"]
    }); // no need for ToList if you're just binding. 
```

当然，IMO 最好在`Student`对象上使用强类型属性并从存储过程中正确填充它们；nyou 根本不需要匿名对象。

# unit-testing - Rational Functional Tester 和模拟框架

> ID：11840287
> 
> 赞同：0
> 
> 时间：2012-08-07T06:17:53.780
> 
> 标签：unit-testing, user-interface, mocking

我正在评估可用于对我的 GUI 代码进行单元测试的不同选项（工具、框架）。我们的 GUI 是 SWT/Swing 组件的组合。在我们评估的几个选项中，有 Rational Functional Tester（我们评估的其他选项是 SWTBot、Jubula 等）。RFT（Rational Functional Tester）似乎满足了我们的大部分需求。我的问题是 - 我们可以在 RFT 中使用任何模拟框架（如 EasyMock、PowerMock、JMock 等）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:09:08.670

简短的回答 - 它会起作用。RFT 并没有真正从应用程序中假设任何事情。它创建的一些查找将使用类名；如果您使用属性（或名称）查找，那么这不会影响您。

长答案-

使用 RFT 进行单元测试 GUI 不是一个好主意。当您想要测试应用程序时（例如完整的系统测试），它会更有用。考虑使用真正的单元测试框架，如[uispec4j](http://www.uispec4j.org/)或[FEST](http://code.google.com/p/fest/)

# php - javascript 问题 - 意外令牌（

> ID：11840288
> 
> 赞同：0
> 
> 时间：2012-08-07T06:17:56.340
> 
> 标签：php, javascript

这里的代码假设调用一个文件，该文件将返回返回数据以填写表格，但我收到此错误（在代码中），我不知道为什么。

```
dropdown.bind('change', function(){
    $post.('backgroundScript.php', 
Uncaught SyntaxError: Unexpected token ( - this is the error im getting
        { 
            first: dropdown.val() 
        },
        function(response) {
            $('#first').val(response.first);
            $('#last').val(response.last);
            // Repeat for all of your form fields
        },
        'json'
    );
}); 
```

如果你能帮我一把，我将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:20:36.113

放在 。在发布之前而不是之后，感谢 Mihai Stancu 发现它。

```
dropdown.bind('change', function(){
    $.post('backgroundScript.php', 
        { 
            first: dropdown.val() 
        },
        function(response) {
            $('#first').val(response.first);
            $('#last').val(response.last);
            // Repeat for all of your form fields
        },
        'json'
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:24:16.320

尝试使用`"$.post(`而不是`$post.(`

# php - 一些 javascript 不起作用

> ID：11840292
> 
> 赞同：0
> 
> 时间：2012-08-07T06:18:04.053
> 
> 标签：php, javascript, variables, element

我的 el6.href 和 el7.href 不起作用，

如果我将 el6.href 和 el7.href 放在 el4.href 和 el5.href 的顶部，它可以工作，但结果是 el4。el5 不起作用，有什么提示吗？

脚本

```
el4 = document.getElementById("edit_href");
el5 = document.getElementById("delete_href");   
el6 = document.getElementById("approve_href");
el7 = document.getElementById("deny_href");

el4.href = "../article/submit-article.php?";        
el5.href = "myaccount.php?mydraft=true&delete=true";

el6.href = "myaccount.php?rec_approved=true&approve=true";
el7.href = "myaccount.php?rec_denied&deny=true"; 
```

php

```
if(isset($_GET['mydraft']))
{echo"
    < href=''  id=edit_href >edit</a>
    <a href='' id=delete_href >delete</a>";
}
if ( (isset($_GET['rec_waiting'])) || (isset($_GET['rec_denied'])) )
    {echo"  
        <a href='' id=approve_href  >approve</a>";

        if(!isset($_GET['rec_denied']))
        {echo"  
        <a href='' id=deny_href >deny </a>";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:40:42.113

Javsscript代码不需要判断是否为null。因为有些元素是null。看这个。

```
 el4 = document.getElementById("edit_href");
    el5 = document.getElementById("delete_href");   
    el6 = document.getElementById("approve_href");
    el7 = document.getElementById("deny_href");

        if(el4!=null){
        el4.href = "../article/submit-article.php?";        
        el5.href = "myaccount.php?mydraft=true&delete=true";
    }

    if(el6!=null){
    el6.href = "myaccount.php?rec_approved=true&approve=true";
}
    if(el7!=null)
{
    el7.href = "myaccount.php?rec_denied&deny=true";
} 
```

HTML文档是从上到下执行的。如果在javascript标签中间出现错误。所以后面的代码不会被执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:28:33.153

您必须更正您的 php 代码

```
if(isset($_GET['mydraft'])) 
{
    echo " 
    <a href=\"#\"  id=\"edit_href\">edit</a> 
    <a href=\"#\" id=\"delete_href\" >delete</a>"; 
} 
if (isset($_GET['rec_waiting']) || isset($_GET['rec_denied'])) 
{
    echo "   
    <a href=\"#\" id=\"approve_href\">approve</a>"; 

    if(!isset($_GET['rec_denied'])) 
    {
        echo "   
        <a href=\"#\" id=\"deny_href\">deny</a>"; 
    }
} 
```

JS

```
function el(objID) {
    return document.getElementById(objID);
}

if(el('edit_href'))
    el('edit_href').href = "your_url.php"; 
```

其他网址相同

# java - Java：递归 -While 循环与 If 循环

> ID：11840294
> 
> 赞同：0
> 
> 时间：2012-08-07T06:18:09.133
> 
> 标签：java, recursion, if-statement, while-loop, infinite-loop

代码设计1：完美运行

```
 public static void main (String[] args)
    {       
        recursion(2);       
    }

    public static void recursion(int num)
    {
        if (num > 0)
        {
            recursion( num - 1 );
            System.out.println(num);
        }   
    } 
```

代码设计 2：无限循环。?

```
public static void main (String[] args)
    {       
        recursion(2);       
    }

    public static void recursion(int num)
    {
        if (num == 0) return;
        while (num > 0)
        {
            recursion( num - 1 );
            System.out.println(num);
        }   
    } 
```

1.  有人可以帮助我理解为什么第二个设计会进入无限循环吗？
2.  我已经在 2nd design 中加入了 return 。所以它应该工作得很好。你也能给我详细解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:25:28.163

**1.**首先`if`不是**循环**，我们只有`for`循环`for-each`，`while`循环和`do-while`循环。

**2.**第二个代码进入无限循环的原因是，你**永远不会递减** `num`.

做这个....

```
while (num > 0)
    {
        recursion( num - 1 );
        System.out.println(num);
        num = num - 1;           // Decrementing the value of num by 1
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:21:36.530

当进入 while 循环时，num 大于零，其值不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:23:07.257

在方法中传递后，`value`的`num`没有改变`recursion`。

```
 if (num == 0) return;
    while (num > 0)
    {
        recursion( num - 1 );
        System.out.println(num);
        num--;                   // add this line.
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:23:27.597

num 的值在循环内不会改变。所以它一直在循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T06:26:32.327

```
 while (num > 0)
            {
                recursion( num - 1 );
                System.out.println(num);
            } 
```

在您的 while 循环中，您将 2 传递给 num 。2 总是大于 0，所以它进入无限循环；

为避免无限循环，您必须更改 num 变量的值；

```
 while (num > 0)
            {
                recursion( num - 1 );
                System.out.println(num);
                num--;
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T06:32:54.740

无论是使用循环还是递归，都不能同时使用。

**一般来说，如果一个人可以使用循环来做他想要的动作，他就不再考虑递归了，因为使用循环更快并且开销更少。**

回到你的问题：
1.无限循环是不可避免的。由于循环`num`没有减少。
2.当然有一些回报，但不是来自你输入`recursion`with `num = 2`and的情况`num = 1`。
这是发生的事情：您输入`recursion`with `num = 2`。它`recursion`与`num = 1`. 在那里，有无限循环，当然还有无限回报。但是没有回头`recursion(2)`。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-07T06:22:45.247

~~原因是 num 是按值复制的，而不是作为调用中的引用`recursion( num - 1 );`~~

编辑：是的，人们很乐意投反对票，不是吗？确实，引用与按值复制并不是正确的答案，但在我最初阅读他的代码示例时，它看起来像是对那个特定问题的误解。我站得更正了。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-08-07T06:24:37.583

我不知道你为什么要经历这一切来做这样的功能？如果我没有收到您的问题，我深表歉意，但这是我建议的好代码..

```
public static void main(String[] args){
    countdown(10);
}

public void countdown(int num){

    for(int i = num; i >= 0; i--){
        System.out.println(num);
    }
} 
```

# android - 如何将 RelativeLayout 设置为 ListView？

> ID：11840296
> 
> 赞同：0
> 
> 时间：2012-08-07T06:18:10.087
> 
> 标签：android, listview, android-relativelayout

正如我们通常看到的，listview 是**逐行渲染的。**

但是我想通过设置项目的左侧和顶部来将其项目设置在其中的任何位置。首先，我认为列表视图需要另一种布局，例如 relativelayout.right？所以我的问题是我们可以将RelativeLayout 设置为ListView 吗？如何？

我的代码是

```
listView.setLayoutParams(new RelativeLayout.LayoutParams(300, 300)); 
```

不幸的是，它不起作用！

但下面的代码工作正常：

```
listView.setLayoutParams(new LinearLayout.LayoutParams(300, 300)); 
```

有人可以告诉我它有什么问题吗？有没有更好的方法来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:42:45.963

在您的情况下，您根本不需要 ListView 。正如参考所说， http: [//developer.android.com/reference/android/widget/ListView.html](http://developer.android.com/reference/android/widget/ListView.html) ListView 只能显示垂直滚动列表中的项目。只需创建相对布局并手动添加子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:45:10.597

为项目创建类似这样的 XML 文件`ListView`：

**listview_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" android:layout_height="wrap_content" >

  <TextView 
     android:id="@+id/text1"
     android:layout_width="wrap_content" 
     android:layout_height="wrap_content" />
</RelativeLayout> 
```

然后在`ListView_Adapter`课堂上做：

```
public class ListView_Adapter extends ArrayAdapter<String>
{
    public ListView_Adapter(Context c)
    {
        super(c, R.layout.listview_item);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
  //
    }
} 
```

# php - php中的多维数组差异

> ID：11840297
> 
> 赞同：0
> 
> 时间：2012-08-07T06:18:10.973
> 
> 标签：php, cakephp

我有两个数组 $a 和 $b。

```
$a = Array
    (
        [0] => Array
            (
                [a] => 1
                [d] => CONTACT
                [f] => 2
            )

    )
and
    $b = Array
(
    [0] => Array
        (
            [a] => 1
            [b] => 1
            [c] => 4
            [d] => CONTACT
            [e] => 2012-08-07  05:56:18
            [f] => 2
        )

    [1] => Array
        (
            [a] => 2
            [b] => 3
            [c] => 4
            [d] => CONTACT
            [e] => 2012-08-07  05:56:18
            [f] => 1
        )

    [2] => Array
        (
            [a] => 2
            [b] => 4
            [c] => 4
            [d] => CONTACT
            [e] => 2012-08-07  05:56:18
            [f] => 1
        )

) 
```

如果第一个数组的 a,d,f 字段与第二个数组匹配，我想删除第二个数组的父数组。在这种情况下，我想做。我`unset($b[0]);`怎么能在没有循环的情况下做到这一点？如果不能，给我一个带有循环的解决方案。cakephp中有什么方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:43:06.597

像这样的东西？

```
$count = count($b)
for($i = 0; $i < $count; $i++)
{
    foreach($a[0] as $c => $v)
    {
        $match = true;
        if($b[$i][$c] != $v)
        {
            $match = false;
        }
        if($match)
            unset($b[$i]);
    }

} 
```

这可能可以解决问题，但我想会有某种更快的方法......但我不认为 500 行应该是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:31:24.827

如果没有循环，您将无法执行此操作，但这不会很耗时。尝试这个：

```
foreach ($b as $key => $value) {
    if (sizeof(array_diff_assoc($a[0], $value)) > 0) {
        unset($b[$key]);
    }
} 
```

# image - 在 R 中连接图像

> ID：11840300
> 
> 赞同：1
> 
> 时间：2012-08-07T06:18:16.607
> 
> 标签：image, r, memory, concatenation

我正在尝试在 R 中将大矩阵 (8,000 x 8,000) 绘制为光栅图像。不幸的是，这对于我的 32 位操作系统需要太多内存，因此我将数据绘制为两个 (4000 x 8000) 图像之前重新组合它们。

看了很多包，都没有找到合适的功能。我知道图像是作为 S4 对象导入的，颜色存储在一个数组中，这意味着*应该*有一种方法来组合它们，但我无法弄清楚。有谁知道如何在 R 中做到这一点？谢谢

编辑：

数据存储在8000个csv文件中，file1对应矩阵的第一行，file2对应第二行...

示例代码

```
# get the name of each matrix-row file
# each file is a vector of length 8000, each filei corresponding to matrix row i 

a <- list.files()

for(i in 1:4000){

     # read the data into R, and combine it with the other rows

     matrixRow <- read.table(a[i])
     matrixToPlot <- rbind(matrixToPlot, matrixRow)   

 }

 png("test", 4000, 4000)
     rasterImage(as.raster(matrixToPlot))
 graphics.off()
 ## identical code for matrix-row 4001, 4002, ...8000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:53:03.333

尝试缩小矩阵，你真的需要那个细节吗？像这样进行增量 rbind 会降低性能，而且该绘图也不起作用， rasterImage 需要设置现有的绘图。试着带着你的真正目标去问，这不是一个好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:56:46.290

我在查看系统监视器上的内存时尝试了以下操作，它始终保持在 3 Gb 以下：

```
 A <- matrix(rnorm(8000*8000),ncol = 8000)
    print(object.size(A),units = "Mb") # 488.3 Mb
    gc() # remove wasted mem (something I don't fully understand)

    # open a plot of appropriate dimensions- scale to your case
    plot(NULL, type = "n", xlim = c(0, 8001), ylim = c(0, 8000))
    # add chunks of the image a bit at a time, removing waste memory at each chunk
    for (m in 1:4){
      for (n in 1:4){
        image(x = (m * 2000 - 2000):(m * 2000 - 1) + .5, # pixels are centered..
              y = (n * 2000 - 2000):(n * 2000 - 1) + .5, 
              t(A[(m * 2000 - 1999):(m * 2000), (n * 2000 - 1999):(n * 2000)]), 
              useRaster = TRUE, # this is key
              add = TRUE)     
        gc() # my naive guess is that this keeps wasted mem from building up
      }
    } 
```

这让我能想到的尽可能经济地绘制在窗口中的东西。您可以通过在内存中一次只保留部分 A 来做同样的事情。

# c++ - 如何使用 ATL/WTL 制作自己的原生（可复制）控件？

> ID：11840301
> 
> 赞同：1
> 
> 时间：2012-08-07T06:18:22.223
> 
> 标签：c++, winapi, visual-c++, atl, wtl

当您使用 WTL 时，您可以自由复制表示**内置**对象的控件：

```
// Notice that CWindow is passed by _copy_, because it only wraps the HWND
int OnNotifyFormat(CWindow wndFrom, int nCommand) { ... } 
```

现在，如果我想制作**自己的**控件，很容易说：

```
template <class T, class TBase = CWindow, class TWinTraits = CControlWinTraits>
struct CMyControlImpl: public CWindowImpl<T, TBase, TWinTraits>
{
    std::vector<int> internal_info;

    BEGIN_MSG_MAP_EX(...)
        ...
    END_MSG_MAP()
};

struct CMyControl : public CMyControlImpl<CMyControl>
{
    DECLARE_WND_CLASS_EX(TEXT("MyControl"), 0, COLOR_WINDOW)
}; 
```

但现在的问题是我**不能**简单地说：

```
void OnFooHappened(CMyControl control)
{
} 
```

因为`CMyControl`它不仅仅是一个句柄——它包含数据本身！

关于这种复制行为，制作与内置 ATL/WTL 类**一致**的控件类的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:22:28.813

您在 WTL 中有一些自定义控件，位于`\Include\atlctrlx.h`：

```
///////////////////////////////////////////////////////////////////////////////
// Classes in this file:
//
// CBitmapButtonImpl<T, TBase, TWinTraits>
// CBitmapButton
// CCheckListViewCtrlImpl<T, TBase, TWinTraits>
// CCheckListViewCtrl
// CHyperLinkImpl<T, TBase, TWinTraits>
// CHyperLink 
```

除此之外，您还可以在[http://viksoe.dk](http://www.viksoe.dk/code/all_wtl.htm)找到正确的自定义 WTL 控件。

控件的“可复制性”基于这样一个事实，即您可以通过句柄使用标准控件`HWND`，并且您可以轻松地复制、附加、分离等这个句柄，并且虽然它是有效的，但整个控件是好的。包装类很薄，只有`HWND`成员变量。

另一方面，正如您所注意到的，自定义控件具有附加信息，您无法轻松复制它们。您仍然可以使用控件动态分配/释放这些附加信息，您将实现附加控件特定的窗口消息和通知，然后您可以创建一个瘦包装类，将方法转换为消息，将它们发送到真正的控件，它反过来会处理它们，特别是。通过将带有参数的消息转换回真实方法。这使您可以复制薄包装类，但控件本身更加复杂和麻烦（您通常不需要那样做）。

# algorithm - 在给定数组索引后移动 k 个数组元素

> ID：11840303
> 
> 赞同：1
> 
> 时间：2012-08-07T06:18:27.277
> 
> 标签：algorithm, language-agnostic

初始数组：`2 23 34 27 89 14 26 30 60`

`k = 3`

从索引 i = 1 开始，我们必须移动 k 个元素，以便它们出现在数组中的元素 26 之后（即在 givenIndex = 6 之后）。

最终数组： `2 89 14 26 23 34 27 30 60`

我们不允许使用额外的空间。

我的做法：

```
count = 0;   
while(count < k)  
{  
  count++;  
  temp = arr[i];  
  shift all elements from (i+1) to givenIndex to their immediate left position;  
  arr[givenIndex] = temp;  
} 
```

第一次迭代：
`temp = 23`
将所有元素从 [i+1](即 index=2) 移动到 givenIndex(即 index=6) 移动后一个向左的
数组：`2 34 27 89 14 26 26 30 60`
arr[givenIndex] =
应用此操作后的临时数组：`2 34 27 89 14 26 23 30 60`

第二次迭代后的类似
数组：`2 27 89 14 26 23 34 30 60`
第三次迭代后的数组：`2 89 14 26 23 34 27 30 60`

最坏情况复杂度 O(n*k) 其中 n 是第一个。数组中的元素。

我们可以解决 O(n) 中的问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:25:09.353

这种*旋转*可以使用`reverse()`辅助函数在线性时间内完成。假设`reverse(x, y)`反转`array[x]..array[y]`到位。

```
reverse(1, 3); // 27 34 23 .. .. ..
reverse(4, 6); // .. .. .. 26 14 89
reverse(1, 6); // 89 14 26 23 34 27 
```

编写线性时间`reverse`很简单，甚至可能在您最喜欢的语言库中可用（例如，C++ 包含`std::rotate`和`std::reverse`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:44:16.253

这个问题非常惊人，
请在此处查看您要求的答案。如果您正在寻找一种使用 JAVA 旋转阵列列表的方法，这里有一个完整的解决[方案](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#rotate%28java.util.List,%20int%29)。
`public static void rotate(List list, int distance)`

只需旋转您的集合（ArrayList 或 LinkedList ...）
它的参数是 a `list`（在您的情况下`arraylist`）和 a `distance`（在您的情况下`k`）。你看到相似之处了吗？简单地使用这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:39:49.190

据我从您的代码（和示例）中可以看出，我认为您正试图将块放在块`[i,i+k-1]`之后`[i+k,givenIndex]`

如果是这种情况，@Blastfurnace 的建议确实会导致 O(n) 中的一种解决方案并且没有额外的空间：

只需这样做：

```
reverse(i,givenIndex)
reverse(i,givenIndex-k)
reverse(givenIndex-k+1,givenIndex) 
```

你有你想要的:)

# php - 用于匹配所有的 PHP 正则表达式模式

> ID：11840304
> 
> 赞同：0
> 
> 时间：2012-08-07T06:18:35.187
> 
> 标签：php, regex

我的应用中有类似 facebook 的提及功能。

创建帖子或评论时，用户可以使用 @ 符号提及其他用户。我使用以下 jQuery 插件： http: [//podio.github.com/jquery-mentions-input/](http://podio.github.com/jquery-mentions-input/)

提及按以下格式生成：@@[Marko Kurjonen:2] so "@@[User's name:user_id]

目前我有以下模式（和代码）：

```
$pattern = "/@@\[(.*):(\d*)] /ims";

$matches = array();
preg_match_all($pattern, $input, $matches);
Zend_Debug::dump($matches);
$output = preg_replace($pattern, "<a href=\"". $this->view->baseUrl("user") ."/$2\" class=\"tooltip\">$1</a>", $input); 
```

问题是它只第一次提到。

示例字符串：

```
$input = "Hello @@[Markku Pelkonen:7] and @@[Marko Kurjonen:2]" 
```

只有第一个用户被 preg_replace 转换。

兄弟，马尔科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:25:42.343

您可以使用此正则表达式：

```
/@@\[([^:]*):(\d*)\]/ 
```

此正则表达式假定名称不包含`:`字符。

原来的正则表达式有两个问题：

*   最后的空格，就在 之后`]`，导致第二次提及失败，因为它位于输入的末尾。（如果你删除它，贪婪的量词将吞噬整个输入字符串。）
*   `*`in***贪婪地***匹配`(.*)`0 个或多个实例，这意味着它将匹配尽可能多的字符，直到下一个标记无法匹配，它会回溯并尝试匹配下一个标记。这就是为什么如果您删除空格，整个输入字符串将被吞噬，如上所述。

 *也可以稍微修复您的正则表达式以使其工作（除了我上面提到的解决方案）：

```
/@@\[(.*?):(\d*)]/s 
```

`m`flag 和flag在`i`这里没用，所以我把它们去掉。你从不在你的正则表达式中使用`^`or `$`，所以`m`flag 没用。该标志仅*在 regex 中*`i`有字母时才有用，这里不是这种情况。

 *我`*?`在这里使用量词，这是匹配 0 或更多的惰性版本。它将匹配尽可能少的字符，以便匹配下一个标记。**

# java - readUTF() 导致 Android 应用程序挂起

> ID：11840306
> 
> 赞同：1
> 
> 时间：2012-08-07T06:19:00.773
> 
> 标签：java, android

我正在尝试在[此](http://android-er.blogspot.com/2011/01/simple-communication-using.html)链接上编译代码。

该代码不起作用，因为它被挂断在这一行：

```
textIn.setText(dataInputStream.readUTF()); 
```

出于某种原因，它没有挂断，`writeUTF()`但它被挂断了`readUTF()`。

谁能在这里指出我正确的方向？

这是我的代码：

```
public Socket socket = null;
public DataOutputStream dataOutputStream = null;
public DataInputStream dataInputStream = null;
public Thread readjsonthrd = new Thread(new ReadJSONThread());

private final static String LOG_TAG = AndroidClient.class.getSimpleName();
private final Handler handler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Log.e(LOG_TAG, "Before OnCreate() Try");
    try {
        Log.e(LOG_TAG, "In OnCreate() Try");
        socket = new Socket("23.23.175.213", 9000);
        Log.e(LOG_TAG, "Created Socket");
        dataOutputStream = new DataOutputStream(socket.getOutputStream());
        Log.e(LOG_TAG, "Created DataOutputStream");
        dataInputStream = new DataInputStream(socket.getInputStream());
        Log.e(LOG_TAG, "Created DataInputStream");

        Profile p = new Profile();
        Log.e(LOG_TAG, "Created Profile Instance");

        //Gets the local profile via JSON and converts into Profile type
        Gson gson = new Gson();
        Log.e(LOG_TAG, "Created Gson Instance");
        p = gson.fromJson(p.getProfileJSONStr(), Profile.class);
        Log.e(LOG_TAG, "Converted Profile to JSON");

        //Gson gson = new Gson();
        Log.e(LOG_TAG, "Before: outputJSON = gson.toJson(p);");
        outputJSON = gson.toJson(p);
        Log.e(LOG_TAG, "Created outputJSON");

        dataOutputStream.writeUTF(outputJSON); //OUTPUT OF JSON FROM LOCAL PROFILE BEING SENT TO THE SERVER
        dataOutputStream.flush();
        Log.e(LOG_TAG, "Created dataOutputStream");
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Log.e(LOG_TAG, "Before initEventHandlers");
    initEventHandlers();
    Log.e(LOG_TAG, "Create Thread");
    Thread serverthrd = new Thread(new ServerThread());

    Log.e(LOG_TAG, "Start Thread");
    serverthrd.start();
    Log.e(LOG_TAG, "Started Thread");
}

public class ServerThread implements Runnable { 
    @Override
    public void run() {
        // TODO Auto-generated method stub
    //Socket socket = null;
    //DataOutputStream dataOutputStream = null;
    //DataInputStream dataInputStream = null;
        Log.e(LOG_TAG, "Before Server Try Statement");
    try {
        Log.e(LOG_TAG, "In Server Try Statement");
        //socket = new Socket("23.23.175.213", 1337);

        //dataOutputStream = new DataOutputStream(socket.getOutputStream());
        //dataInputStream = new DataInputStream(socket.getInputStream());
        /*Profile p = null;

        //Gets the local profile via JSON and converts into Profile type
        Gson gson = new Gson();
        p = gson.fromJson(p.getProfileJSONStr(), Profile.class);

        //Gson gson = new Gson();
        outputJSON = gson.toJson(p);
        dataOutputStream.writeUTF(outputJSON); //OUTPUT OF JSON FROM LOCAL PROFILE BEING SENT TO THE SERVER
        */
        //dataOutputStream.writeUTF(textOut.getText().toString());  //OUTPUT JSON GOES HERE
        //textIn.setText(dataInputStream.readUTF());

        Log.e(LOG_TAG, "Start Thread");
        readjsonthrd.start();
        Log.e(LOG_TAG, "Started Thread");
        /*Log.e(LOG_TAG, "Before inputJSON String");
        inputJSON = dataInputStream.readUTF();

        //Convert 
        Log.e(LOG_TAG, "After inputJSON String");
        Log.e(LOG_TAG, "InputJSON:" + inputJSON);*/

        //textIn.setText(dataInputStream.readUTF());  //GET JSON COMING FROM SERVER HERE
        refreshViewModels();
    } /*catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }*/
    finally{
        if (socket != null){
            try {
                socket.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        if (dataOutputStream != null){
            try {
                dataOutputStream.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        if (dataInputStream != null){
            try {
                dataInputStream.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    }
}

public class ReadJSONThread implements Runnable { 
    @Override
    public void run() {
        // TODO Auto-generated method stub
    //Socket socket = null;
    //DataOutputStream dataOutputStream = null;
    //DataInputStream dataInputStream = null;
        Log.e(LOG_TAG, "Before Read JSON Try Statement");
        try {
            Log.e(LOG_TAG, "Before inputJSON String");
            inputJSON = dataInputStream.readUTF();

            //Convert 
            Log.e(LOG_TAG, "After inputJSON String");
        }
        catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-27T14:46:31.030

我在与一个 gov API 集成时遇到了一些类似的问题，我使用的是 readUTF() writeUTF()，并且每次都停留在 readUTF() 没有任何响应。

我发现服务器在 c 中，并且期望以 * 结尾或请求字符串*，响应也以 * 结尾*。

我通过直接写入套接字的输入/输出流来解决这个问题，并在遇到**时终止读取。

```
 Socket client = new Socket(serverIp, port);
        OutputStream out = client.getOutputStream();
        InputStream in = client.getInputStream();

        String test = "REQUEST-STRING**";
        out.write(test.getBytes());
        out.flush();

        int c;
        while ((c=in.read())!=-1) {
            if (isEndOfResponse(c)) {
                break;
            }
            System.out.print((char)c);
        }
        client.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:29:54.243

`readUTF()`是阻塞网络调用。`Thread`您应该从不是主 UI的单独调用它`Thread`，这就是该示例的操作方式。因为它是阻塞的，所以它会挂起当前的`Thread`直到接收到数据，因此为什么你应该给它一个单独的。

Android 文档实际上特别推荐这样做，因为您将收到“应用程序未响应”错误，因为网络调用等待时间过长。

**编辑：**根据您提供的代码，您只是设置`Thread`错误。您想在 Thread 本身中创建 Socket（或者您可以通过构造函数传递它）。仅使用中的`readUTF()`方法`Thread`不会有太大作用。

我的建议是在类中创建一些名为`write()`and的包装器方法，然后在其中实现相应的方法。然后在你的方法中创建你的对象，当你想写的时候你可以调用. 对于阅读，我会在该方法中创建一个循环，当它成功从网络中读取数据时，让它从您的 Activity 类中调用一个方法来执行数据处理。`read()``ReadJSONThread``Socket``onCreate()``Thread``<thread>.write()``read()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T00:11:08.313

代替

> 读取UTF（）

如果你

> 读取线（）

你应该摆脱你的问题（假设你的服务器发送了一两行正确终止的行作为答案）。

注意：如果您在主活动中运行它，从 ICS 开始，您将遇到限制在主线程中打开网络连接的问题。如果您选择不禁用限制，一种快速的解决方案是 asynctask，它可能不允许您访问主布局（和 textview）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:36:57.983

`readUTF()`是特定于 java 的：首先它读取两个字节并将其用作长度，然后读取字节并将它们视为修改后的 UTF-8。基本上，要使其工作，您需要一个使用`writeUTF()`.

此外，您不应在 UI 线程上运行长时间运行的操作（= 网络调用）。这将阻止 UI 重绘和事件处理，因此您的应用程序将显示为“挂起”。使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在后台线程上运行长时间运行的任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-21T08:32:45.257

您可以使用线程：

```
 public  static DataInputStream dis;
//...
    Thread thread = new Thread() {
                @Override
                public void run() {

                   while (Connected) {
                       String msg = null;
                       try {
                           if(dis==null)break;
                           msg = dis.readLine();
                           Log.i("TAG", "dataRecived: "+msg);
                       } catch (IOException e) {
                           e.printStackTrace();
                       }

                    }
                    Log.i("TAG", "Reciver END");
                }
            };

            thread.start(); 
```

所以你的应用程序在使用 readLine 或 readUTF 时不会挂起

# canvas - J2ME Canvas 中的自定义选择组

> ID：11840308
> 
> 赞同：1
> 
> 时间：2012-08-07T06:19:17.120
> 
> 标签：canvas, java-me, midp, lcdui

在我的应用程序中，我必须在 Canvas 上添加选择组。有什么方法可以在画布上绘制选择组吗？是否有任何解决方案可以制作自定义选择组并在画布上实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:01:52.160

MIDP 2 [lcdui](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/package-summary.html "API 文档") API 不允许将[ChoiceGroup](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/ChoiceGroup.html "API 文档")放置在[Canvas](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Canvas.html "API 文档")中。

作为[Item](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Item.html "API 文档")的子类，ChoiceGroup 只能在[Form](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Form.html "API 文档")对象中。

*   ^(您可能最接近它的是设计您自己的自定义对象来实现[Choice](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Choice.html "API 文档") - 与 ChoiceGroup 相同的接口。要在 Canvas 中拥有这样的对象，您必须编写自己的自定义代码来呈现其内容（大小、字体、对齐、换行等）并处理用户事件，例如遍历、选择，以及可能类似于项目[命令的东西和监听器](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/ItemCommandListener.html "API 文档")以及[状态和监听器](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/ItemStateListener.html "API 文档")，如果你需要的话。)

# php - 使路径可在 PHP 的各个级别的文件夹中访问

> ID：11840317
> 
> 赞同：0
> 
> 时间：2012-08-07T06:19:51.097
> 
> 标签：php, path

假设我有一个文件夹，上面有一些文件夹和页面：

*   文件夹A
    *   PageA1.php
*   文件夹B
    *   文件夹B1
        *   PageB11.php
    *   文件夹B2
        *   PageB21.php
    *   PageB1.php
*   文件夹C
    *   PageC1.php

在**PageB11 上**，我有：

```
require_once 'FolderB2/PageB21.php'; 
```

**在PageB1**上调用**PageB11**时：

```
require_once 'FolderB1/PageB11.php'; 
```

它工作正常。但是现在的问题是，虽然在**PageB11**上也有一个调用页面本身的函数（**PageB11**），然后错误显示：

`Warning: require_once(FolderB2/PageB21.php): failed to open stream: No such file or directory in Path\FolderB\FolderB1\PageB11.php on line X`

**当我将PageB11**上的 require_once 行更改为：`require_once '../FolderB2/PageB21.php'`;时，它的工作！

我想做的是，如何使所有这些都可以在不同级别的文件夹中访问？有可能这样做吗？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:37:21.280

如前所述，处理这种情况的最佳方法是通过其绝对路径引用每个文件。这是从文件系统的根开始的路径，与当前文件给出的相对路径不同。

在 PHP 中，你有一个神奇的常量`__DIR__`，它给出了当前文件的绝对路径。在每个包含/要求前面加上它，您将永远不会再看到该问题。

```
require_once __DIR__ . '/../FolderB2/PageB21.php'; 
```

您也可以使用[`realpath()`](http://php.net/realpath).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:31:35.977

您可以添加文件的绝对路径

```
require_once('/home/my_host_account/www/FolderB2/PageB21.php'); 
```

请验证这是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:43:50.967

您还可以在每个目录中创建引用您的原始文件的[软链接。](http://en.wikipedia.org/wiki/Symbolic_link)但这是一种解决方法，只有在所有其他方法都失败时才应使用。

# iphone - 我应该将 sqlite 数据库文件写入 Documents 目录还是 Library/Caches？

> ID：11840318
> 
> 赞同：5
> 
> 时间：2012-08-07T06:19:55.293
> 
> 标签：iphone, ios5, xcode4.2, data-storage

我已经阅读了 Apple 的数据存储指南，并且对于我应该将我在我的应用程序中创建的 sqlite 数据库文件保存在哪里感到非常困惑。即使应用程序处于离线模式，我也想从 sqlite 文件中读取。我读到，创建的此类文件应保存在库/缓存中，并设置“不备份”标志。请建议我做同样的正确方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T06:30:59.237

答案取决于您的数据库文件是如何创建的：

[根据数据存储指南页面](https://developer.apple.com/icloud/documentation/data-storage/)：

> 1.  只有用户生成的或应用程序无法重新创建的文档和其他数据，才应存储在 /Documents 目录中，并由 iCloud 自动备份。
>     
>     
> 2.  可以再次下载或重新生成的数据应存储在 /Library/Caches 目录中。您应该放在 Caches 目录中的文件示例包括数据库缓存文件和可下载内容，例如杂志、报纸和地图应用程序使用的内容。

这对我来说似乎比较清楚：如果您的应用程序以编程方式创建某些内容或生成您想要保存的数据，请将其放在“缓存”文件夹中。如果这是客户自己生成的独特内容（通过键入键盘或他们手动干预并执行的操作），请将其放入“文档”中。

“不备份”意味着文件*永远不会*发送到 iCloud，如果它们丢失，则必须从头开始重新创建（或重新安装）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:46:56.697

这可能会对您有所帮助。将数据库复制到文档目录就足够了，捆绑上的文件是只读的，在某些情况下，如果您需要随时更新，更好的方法是首先复制数据库，如果它不存在于文档目录中。

将数据库复制到文档目录的示例代码如下：

```
-(void) checkAndCreateDatabase {

    // Setup some globals
    NSString *databaseName = @"AnimalDatabase.sql";

    // Get the path to the documents directory and append the databaseName
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    NSString *databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

    // Check if the SQL database has already been saved to the users phone, if not then copy it over
    BOOL success;

    // Create a FileManager object, we will use this to check the status
    // of the database and to copy it over if required
    NSFileManager *fileManager = [NSFileManager defaultManager];

    // Check if the database has already been created in the users filesystem
    success = [fileManager fileExistsAtPath:databasePath];

    // If the database already exists then return without doing anything
    if(success) return;

    // If not then proceed to copy the database from the application to the users filesystem

    // Get the path to the database in the application package
    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

    // Copy the database from the package to the users filesystem
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

    [fileManager release];
} 
```

可以参考本[教程](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/) 文档目录下的文件，内容是读写模式，所以可以从数据库中读取内容。

# c# - 如何创建和填充通用字典？

> ID：11840319
> 
> 赞同：-1
> 
> 时间：2012-08-07T06:20:06.120
> 
> 标签：c#, .net, dictionary

如何创建和填充泛型`Dictionary<>`它应该由这种类型填充 `TKey= string, TValue=Point`。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:22:24.127

像这样

```
Dictionary<string,Point> dic = newDictionary<string,Point> ();
dic.Add("key", new Point(1,1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:22:57.747

怎么样

```
Dictionary<string, Point> spdic = new Dictionary<string, Point>();

spdic.Add("mystring", new Point(0,0)); 
spdic.Add("mystring1", new Point(23,30)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T06:23:39.723

```
Dictionary<string, Point> myDict = new Dictionary<string, Point>();
myDict.add(myString, myPoint); 
```

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T06:23:59.660

像这样的东西怎么样

```
Dictionary<string, Point> dict = new Dictionary<string, Point>()
{    
    { "string A", new Point(0, 0) }
} 
```

*只是为了与其他答案不同并使用对象初始化器*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-07T06:24:15.730

你可以试试：

```
Dictionary<string, Point> myDictionary = new Dictionary<string, Point>();
myDictionary.Add("Some String", new Point(x, y)); 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-07T06:25:19.653

```
Dictionary<String, Point> dict = new Dictionary<String, Point>();

dict.Add("abcd", new Point(65,99)); 
```

这是[文档](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

**编辑**请确保您阅读文档或进行一些搜索，因为您很可能会找到此类问题的答案。下面是如何使用[Add](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)方法

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-07T06:37:51.683

您还可以列出包含字符串和点的任何类型的列表并使用

listOfThingsWithStringsAndPoints.ToDictionary(x => x.yourString, x=> x.yourPoint);

*只是为了与其他答案不同并使用 ToDictionary*

# python - Python：numpy.genfromtxt - 需要包含无效字符的列名

> ID：11840322
> 
> 赞同：1
> 
> 时间：2012-08-07T06:20:21.553
> 
> 标签：python, numpy, genfromtxt

我正在使用 .csv 文件导入 CSV 文件`numpy.genfromtxt`。

要导入的数据有一个列名标题，其中一些列名包含`genfromtxt`认为无效的字符。具体来说，一些名称包含“#”和“”。输入数据无法更改，因为它是由我无法控制的其他来源生成的。

使用`names=True`and `comments=None`，我无法引入我需要的所有列名。

我尝试过覆盖`numpy.lib.NameValidator.deletechars=None`，但这不会影响实际使用的 NameValidator 类实例。

我知道这`deletechars`是由于重新排列可能会像访问属性一样访问字段而存在。但是，我必须能够读入包含无效字符的列名，即使在读入时删除了这些字符。

有没有办法强制`NameValidator`不检查无效字符，或修改它检查的字符？我无法修改 numpy/lib/_iotools.py 因为我不是 root 并且修改共享安装会很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:29:24.097

您没有明确声明 numpy.genfromtxt 是一项硬性要求，因此我建议您尝试[asciitable](http://cxc.harvard.edu/contrib/asciitable/)。

该模块有一种在解析之前替换某些条目的方法：http: [//cxc.harvard.edu/contrib/asciitable/#replace-bad-or-missing-values](http://cxc.harvard.edu/contrib/asciitable/#replace-bad-or-missing-values)

您还可以根据现有的读者定义自己的读者：http: [//cxc.harvard.edu/contrib/asciitable/#advanced-table-reading](http://cxc.harvard.edu/contrib/asciitable/#advanced-table-reading)

asciitable reader 的输出是 numpy 数组，所以你应该可以直接用 asciitable 或多或少地替换你当前使用的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:07:41.920

恕我直言，`genfromtxt`通常用于一些更简单的解决方案可以做到的情况。

因此，除非您有一些麻烦的数据集（缺少条目、多个未知的列类型），否则最好编写一个快速而肮脏的解析器（即，跳过一些行，解析标题，读取其余部分并在最后重新组织）。

现在，如果你真的需要`genfromtxt`，@ecatmur 公正地指出，`deletechars`参数`genfromtxt`被发送`_iotools.NameValidator`到构造要删除的字符集。使用`deletechars=None`告诉`NameValidator`使用默认集。首先要尝试的是不要使用`deletechars=None`，而是使用空的`set`or `''`。

请注意，无论如何，双引号`"`和结尾空格将被删除，并且将区分相似的名称：

```
>>> fields = ["blah", "'blah'", "\"blah\"", "#blah", "blah "]
>>> np.lib._iotools.NameValidator(deletechars='').validate(fields)
... ('blah', "'blah'", 'blah_1', '#blah', 'blah_2') 
```

第三个和最后一个条目将产生三个名为 的列`blah`，因此我们必须重命名它们。

如果这不适合您，恐怕您会遇到障碍：目前没有办法告诉`genfromtxt`您接受定制的`NameValidator`. 不过，这可能是个好主意，因此您可能想在 numpy 的邮件列表中提出这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:46:43.933

`NameValidator``deletechars`如果使用 构造，将使用其默认集`deletechars=None`，但如果您传入非`None`集，则它将使用该集。并`np.genfromtext`接受`deletechars`它传递给的参数`NameValidator`。

所以，你应该可以写

```
np.genfromtxt(..., deletechars=set()) 
```

对于空集或默认值的某个子集`set("""~!@#$%^&*()-=+~\|]}[{';: /?.>,<""")`：

```
deletechars = np.lib._iotools.NameValidator.defaultdeletechars - set("# ")
np.genfromtxt(..., deletechars=deletechars) 
```

# c++ - 如何强制两个进程的执行顺序？

> ID：11840328
> 
> 赞同：1
> 
> 时间：2012-08-07T06:21:05.143
> 
> 标签：c++, multithreading, boost, deadlock

我有一个父进程，它产生一定数量的子进程。这些子进程做一些工作并通过进程间消息队列向父进程发送带有结果的消息。但是，我还希望子进程等待父进程向他们发送消息已被正确接收和处理的确认，并且仅在收到来自父进程的此类信号后才终止。

现在，代码看起来或多或少是这样的：

```
parent                      child
spawn process
wait for message            do processing
                            send message
receive message             wait on condvar
save the message
notify the condvar          resume execution
wait for child termination  terminate 
```

当然，如果父母在孩子甚至开始等待它之前对 condvar 执行了操作，这会导致死锁`notify`- 如果发生这种情况，那么父母会等待孩子退出，孩子会等待条件变量。

所以，我的问题是：如何确保孩子总是`wait`首先执行，即在父母执行之前`notify`？还是我对整个问题的看法完全错误？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:45:58.723

是的，您以错误的方式处理问题。或者更确切地说，以它们不应该工作的方式使用 condvars。Condvar 是一种通知另一个线程“某事”，一个*条件*，已经改变的方法。正是这种情况允许线程终止。

使用 condvar 需要三个元素：*条件*、*互斥体*和*condvar*本身。比通知线程会做：

```
{
    unique_lock(mutex);
    condition = true;
    condvar.notify();
} 
```

等待线程会做：

```
{
    unique_lock(mutex);
    while(!condition)
        condvar.wait(mutex);
} 
```

（使用 RAII 来锁定互斥体，所以我不认为直接调用`.lock()`和`.unlock()`方法是个好主意）

请注意，这`while`很*重要*。`wait`即使没有通知也可能会虚假唤醒！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:57:35.370

使用一个名为信号量或事件的进程间 - 保持状态的东西，这样即使在孩子等待之前父母发出信号，仍然会收到信号。

# cassandra - 维护 Cassandra 集群

> ID：11840332
> 
> 赞同：1
> 
> 时间：2012-08-07T06:21:25.987
> 
> 标签：cassandra, cassandra-0.7

1) 正确维护 Cassandra 集群应该做哪些事情？

2）正如这里所解释的：[Clearspring 的 Apache Cassandra](http://www.datastax.com/events/cassandranyc2011/presentations/burroughs)，他们在一两周内进行滚动重启。

3) 滚动重启如何帮助维护集群？Cassandra 在重新启动时是否有任何特定活动（清洁）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:23:59.803

唯一真正的通用规则是您必须至少每隔 gc_grace_seconds 运行一次 nodetool repair 以避免删除的数据再次出现。否则，使用 cfstats、iostat 等对集群进行常规监控总是一个好主意。

# windows-7 - Windows 上的 Neccesitas 构建问题

> ID：11840334
> 
> 赞同：2
> 
> 时间：2012-08-07T06:21:37.017
> 
> 标签：windows-7, qt4, android-ndk, qmake

我正在尝试在 Windows 7 上使用 Necessitas 0.3 将跨平台 Qt 应用程序移植到 Android（记录在案：我也在 Linux 上尝试过，但遇到了一组不同的问题）。应用程序由几个具有一些相互依赖关系的共享库和一个小的测试可执行文件组成。

问题 1：[到目前为止的进展：有变通方法]

目标文件生成良好，但链接失败，因为目标文件的路径缺少一个目录分隔符。

我的专业文件中有以下内容（一个文件的示例，我总共有三个）：

```
CONFIG(debug, debug|release):OBJECTS_DIR += debug

SOURCES += ../../common/common.cpp 
```

正如预期的那样，目标文件“common.obj”被生成并最终在“debug”子目录中。现在我收到以下错误：

```
arm-linux-androideabi-g++: error: debugcommon.obj: No such file or directory 
```

对象目录（“debug”）和对象文件（“common.obj”）的名称被连接起来——它们之间的目录分隔符丢失。

生成的 Makefile 中的相关部分：

```
OBJECTS_DIR   = debug\

OBJECTS       = debug\common.obj \

DESTDIR       = 
```

QtCreator 是 v2.3.1（基于 Qt 4.8.0 的 32 位版本）。

我找到了一个解决方法——不要使用调试目录：

```
# CONFIG(debug, debug|release):OBJECTS_DIR += debug 
```

使用影子构建时这不是什么大问题，因为所有构建垃圾都会从源中分离到影子构建目录中，但我仍然想知道为什么会首先发生这种情况。我以前从未遇到过 Qt 的这个问题。有任何想法吗？

问题 2：[到目前为止的进展：有 KLUDGE]

Windows 上的 Necessitas 0.3 alpha 4 似乎被严重破坏，到了完全没用的地步。我花了几天的时间来解决这个新问题：链接器无法找到 NDK 库。

我尝试了两次 Necessitas 安装——一次我没有修改任何内容，保留所有默认值，第二次我尝试使用较新的 NDK 并手动配置所有内容。两者都不起作用。

我无法克服的问题是链接器。它只是找不到NDK，总是因为找不到“crtbegin_so.o”而失败。stackoverflow 上有一些答案表明这个问题与 android-ndk-r6b 相关，它是 Necessitas 默认提供的，但如前所述，当我尝试将 Necessitas 指向后来的 NDK 时，我的运气更差（我试过 r8b - - 由于抱怨缺少 STL 头文件，构建很早就失败了，没有找到解决方案）。

我试图通过将“crtbegin_so.o”、“crtend_android.o”和“crtend_so.o”复制到我的构建目录来解决这个问题，但这并没有让我更进一步——链接器再次失败，这次是在 QtGui . 这个更加神秘，因为我正在尝试构建一个仅使用“core”和“xml”而不是“gui”的共享库。我知道qmake变量QT默认包含'core'和'gui'，但我认为当TEMPLATE设置为'lib'时这不适用？我从“mkspecs/android-g++/qmake.conf”和“qws.conf”（我能找到它的唯一两个地方）中删除了“gui”，还仔细检查了我所有的 pro 文件以防万一，但仍然出现“ld.exe：找不到-lQtGui”消息。

我检查了“\Necessitas\Android\Qt\480\armeabi\lib”的内容，一切都在那里，包括许多充满错误路径的 prl 和 pc 文件（从开发人员的机器上遗留下来的？）——删除这些会使它们从生成 lnk.cmdline 文件，但这仍然没有帮助。我怀疑 Windows Necessitas 可能无法处理包含反斜杠的标准 Windows 路径——“缺失”QtGui 位于“\Necessitas\Android\Qt\480\armeabi\lib”中，第一个模块的 lnk.cmd 文件包含“-LC :\Necessitas\Android\Qt\480\armeabi\lib"。所以它应该找到它，但它不是。lnk.cmdline 中的所有其他路径都使用正斜杠作为目录分隔符。我到处搜索（包括像 QtCreator 中的构建环境这样的地方）但没有

问题 3：[到目前为止的进展：有 KLUDGE]

我在编译输出中发现了这一点：

```
C:/Necessitas/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-g++ @my_lib.so.1.0.0.lnk.cmdline
del /q 2> NUL my_lib.so.1.0.0.lnk.cmdline
ln -s my_lib.so.1.0.0 my_lib.so
ln -s my_lib.so.1.0.0 my_lib.so.1
ln -s my_lib.so.1.0.0 my_lib.so.1.0 
```

当然，“ln -s”失败了，因为我是在 Windows 上构建的。不确定这是来自哪里或如何将其更改为“mklink”。我发现“QMAKE_SYMBOLIC_LINK = ln –s”的唯一地方是“\Necessitas\Android\Qt\480\armeabi\mkspecs\unsupported\win32-g++-cross\qmake.conf”，但不是这样：这个conf文件的意思对于 MinGW（无论如何都尝试更改它 - 没有）。如果我添加诸如“QMAKE_SYMBOLIC_LINK = copy /y”之类的内容，那么在我生成的 Makefile 中，我可以看到 SYMLINK 从“ln -s”更改为“copy /y”，但这被忽略了——lnk.cmdline 仍然使用“ln”生成-s”而不是“复制/y”。

幸运的是，至少这个失败不是致命的，构建可以继续。我通过 Qt 的 QMAKE_PRE_LINK 设置文件副本来解决这个问题：

```
QMAKE_POST_LINK += $${QMAKE_COPY} my_lib.so.1.0.0 ..\\my_lib.so $$escape_expand(\n\t)
QMAKE_POST_LINK += $${QMAKE_COPY} my_lib.so.1.0.0 ..\\my_lib.so.1 $$escape_expand(\n\t)
QMAKE_POST_LINK += $${QMAKE_COPY} my_lib.so.1.0.0 ..\\my_lib.so.1.0 $$escape_expand(\n\t) 
```

问题 #4：[到目前为止的进展：已解决]

这实际上是一个编译问题，进行更改。在为前三个问题应用解决方法后，我构建了一些共享库，但随后它开始编译使用 quint64 的库。我收到了这个错误：

```
In file included from C:\Necessitas\android-ndk-r6b\platforms\android-9\arch-arm\usr\include/strings.h:42,
             from C:\Necessitas\android-ndk-r6b\platforms\android-9\arch-arm\usr\include/stdlib.h:42,
             from C:\Necessitas\android-ndk-r6b\sources\cxx-stl\gnu-libstdc++\include/cstdlib:68,
             from C:\Necessitas\android-ndk-r6b\sources\cxx-stl\gnu-libstdc++\include/bits/stl_algo.h:60,
             from C:\Necessitas\android-ndk-r6b\sources\cxx-stl\gnu-libstdc++\include/algorithm:62,
             from C:\Necessitas\Android\Qt\480\armeabi\include\QtCore/qglobal.h:68,
             from ..\..\..\DurianQtAndroid\jni\common\include/crossplatformstringapi.h:15,
             from ..\..\..\DurianQtAndroid\jni\common\include/common.h:18,
             from ..\..\..\DurianQtAndroid\jni\common\common.cpp:9:
C:\Necessitas\android-ndk-r6b\platforms\android-9\arch-arm\usr\include/sys/types.h:124: error: 'uint64_t' does not name a type 
```

这是一个简单的解决方法，只需将我的 pro 文件中的“android:QMAKE_CXXFLAGS += -std=c++0x”替换为“android:QMAKE_CXXFLAGS += -std=gnu++0x”——这不是 Windows 问题一点也不！

问题 #5：[到目前为止的进展：无]

另一个非 Windows 问题：不支持“wstring”。下载自定义 crystax NDK 以尝试 (android-ndk-r7-crystax-5.beta2-windows.zip) 但并不希望它能与 Necessitas 很好地配合...

# java - 为什么我用 JDK 1.7 编译的 Java 程序不能在 Raspberry PI 上用 OpenJDK 1.7 运行

> ID：11840335
> 
> 赞同：0
> 
> 时间：2012-08-07T06:21:43.587
> 
> 标签：java, java-7, openjdk, raspberry-pi

我编写了一个类似“Hello World”的小型程序，并使用 JDK 1.7（来自 Oracle 网站）对其进行了编译。在 Windows 上，我可以启动它并且它工作正常，但是当我尝试在安装了 OpenJDK 的 Raspberry PI 上启动它时，它不起作用。我总是收到“无效/损坏的 Jar 文件”错误。

# c# - 如何使用 c# 在 unix 中检查 unix 路径是否有效

> ID：11840338
> 
> 赞同：1
> 
> 时间：2012-08-07T06:21:51.633
> 
> 标签：c#

我正在使用我的点网代码将一些文件传输到 unix。我要求用户输入他想要传输文件的 unix 路径。在传输文件之前，我想检查用户输入的路径是否有效。

```
 try
      {
                Process objProcess = new Process();
                objProcess.StartInfo.FileName = "putty.exe";
                objProcess.StartInfo.Arguments = txtUserName.Text.Trim() + "@" + cmbIP.Text.Trim() + " -pw " + txtPassword.Text.Trim() + " -m \"" + CodeSetFileNameTemp + "\"";
                objProcess.Start();

                objProcess.WaitForExit();

                SUCCEEDED.AppendLine(viewName);
                SELECTED.Remove(SELECTED.ToString().IndexOf(viewName), viewName.Length + 2);

            }
            catch (Exception ex)
            {
                FAILED.AppendLine(viewName);
                SELECTED.Remove(SELECTED.ToString().IndexOf(viewName), viewName.Length + 2);
                MessageBox.Show(ex.Message + ". Unable to connect UNIX", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return false;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:26:43.250

只需传输文件。如果有问题，你会得到某种错误。这种传输失败的原因有很多（网络问题、路径错误、权限不正确、空间不足等），并且没有预先检查输入的路径对您有帮助。即使您*可以*验证路径，也不能保证在验证和尝试传输之间事情不会发生变化。

这类似于那些想要一个有效的电子邮件地址正则表达式的人，似乎没有意识到即使是正确格式的地址也可能只是因为它后面没有电子邮件帐户而无效。

UNIX 允许在路径名中使用*非常*广泛的字符，甚至是诸如退格和其他控制字符之类的令人发指的字符。我自己不会全部使用它们，但它们*是*有效的。

因此，最重要的是，检查目标位置是否可以使用的最佳方法是以您想要的方式使用它。

* * *

根据您没有错误检测可用的评论，我认为最好的方法是将文件发送过来，然后将其读回另一个文件。

这是您可以确定文件已完整且正确交付的*唯一方法。*想到的所有其他选项（包括简单地检查有效路径）都会留下一些不确定性。

例如，`/home/pax`在 UNIX 下确实是一条有效路径，但目标框上甚至可能不存在。即使它*确实*存在，传输也可能在中途失败，您将没有任何迹象，除非您带回文件并将其与原始文件进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:26:56.587

您可以使用[Directory.Exists](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)。

这将告诉您输入的目录是否确实存在。除此之外，其他事情（权限）仍然可能出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T06:27:12.937

您使用什么方法将文件传输到 Unix 服务器？如果您使用 Samba 将其安装为网络驱动器，则可以使用[System.IO.Directory.Exists](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)来确定路径是否有效。如果它类似于 FTP，您可以尝试列出该目录，并捕获它不存在的异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:26:33.590

我假设您正在从您的用户那里获取目录路径，而不是您可以使用它

```
Directory.Exists(path); 
```

它将返回一个布尔值标记提供的路径的存在。

# npm - npm 相当于`pip install -r requirements.txt`

> ID：11840341
> 
> 赞同：36
> 
> 时间：2012-08-07T06:22:14.747
> 
> 标签：npm, pip

什么是 npm 等价物：

```
pip freeze > requirements.txt
pip install -r requirements.txt 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-08-11T16:58:04.910

通常节点项目中的依赖项是通过 package.json 安装的：[https ://docs.npmjs.com/files/package.json](https://docs.npmjs.com/files/package.json)

您安装每个依赖项，`npm install --save my-dependency`它将被添加到 package.json 文件中。所以项目中的下一个人可以使用`npm install`命令在 package.json 的同一文件夹中安装所有依赖项。

但就我而言，我想通过文本文件（类似于`pip install -r requirements.txt`）安装 npm 的全局要求。

你可以这样做：

`cat requirements.txt | xargs npm install -g`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-09T11:32:29.790

您可能想查看[npm shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap)的文档。它创建一个`npm-shrinkwrap.json`，在安装时它将优先于任何`package.json`。

基本上，等价的是：

```
npm shrinkwrap
npm install 
```

**编辑：**

从 v5.0.0 开始，npm 现在总是创建一个[`package-lock.json`](https://docs.npmjs.com/files/package-lock.json), 格式与`npm-shrinkwrap.json`. 从那以后发生了其他变化，尤其是在最新的 v5.6.0 中。请参阅[package-lock 文档](https://docs.npmjs.com/files/package-lock.json)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-03T02:08:50.557

要从`npm-requirements.txt`格式类似于 pip 需求文件的文本文件（例如 ）全局安装 npm 包：

```
sed 's/#.*//' npm-requirements.txt | xargs npm install -g 
```

这允许在需求文件中添加注释，就像 pip 一样。（[来源](https://www.monolune.com/installing-global-npm-packages-from-a-requirements-file/)）

类似的命令`pip freeze > requirements.txt`是：

```
ls "$(npm root -g)" > npm-requirements.txt 
```

然而，这是不完美的，因为它不保存 npm 包的版本号。

# class - 如何为类中介设置参数？

> ID：11840343
> 
> 赞同：2
> 
> 时间：2012-08-07T06:22:16.840
> 
> 标签：class, wso2

我写了一个扩展的中介类。我只能为属性设置值。但我想使用 XPath 表达式。我怎么能做到这一点？

配置如下：

```
<class name="org.wso2.esb.tutorial.mediators.SurchargeStockQuoteMediator">
    <property name="defaultPercentage" value="10"/>
</class> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T08:06:35.080

当我将价值放入这样的财产时，我面临同样的问题：

```
<property name="something" expression="get-property('value_of_something')"/> 
```

ESB 说值必须是静态的或什么的..

所以我使用这个解决方案：

1）我将 value_of_something 放入任何属性中

```
<property name="value_of_something" value="some value"/> 
```

2）然后在中介类的 mediate() 方法中，我从**MessageContext**对象中获取名为**value_of_something的****属性，如下所示**

 ****```
 boolean mediate(MessageContext synCtx) {
       String value_of_something = synCtx.getProperty("value_of_something")+"";
 } 
```****

# android - 过滤后Android自定义ArrayAdapter不刷新

> ID：11840344
> 
> 赞同：5
> 
> 时间：2012-08-07T06:22:21.663
> 
> 标签：android, android-arrayadapter

所以我有一个自定义`ArrayAdapter`，所以我可以使用`ListView`. 我有一个`EditText`接受字符串并过滤适配器的。

过滤器在过滤正确对象的意义上起作用（我可以通过单击它来判断它并以正确的“附加”开始意图。）

但是，即使过滤有效，适配器中的项目也不会更新以显示正确的信息......标题和副标题不正确。

假设我们在 0 到 9 上有项目`ListView`，我通过搜索过滤到 3 个项目，假设过滤后的项目是 5、6、9... 显示 3 个项目，但它是原始 pre 的前 3 个项目-搜索`ListView`（0-2）。如果我单击第 2 项（第三项），则 9 的内容包含在新意图中。这对于搜索条件是正确的，但是标题确实反映了正确的信息。

我不确定我需要告诉`ListView`刷新什么。我不认为它`notifyDataSetChanged();`

任何帮助表示赞赏。谢谢！

```
 public class myListAdapter extends ArrayAdapter<Pizza>{
    private ArrayList<Pizza> items;
    private PizzaViewHolder myListHolder;

    private class PizzaViewHolder{
        TextView title;
        TextView subtitle;
    }

    public myListAdapter(Context context, int textViewResourceId, ArrayList<Pizza> items) {
        super(context, textViewResourceId, items);
        this.items = items;
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int pos, View convertView, ViewGroup parent){
        View v = convertView;
        if(v == null){
            LayoutInflater vi = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.myList_item, null);
            myListHolder = new PizzaViewHolder();
            myListHolder.title = (TextView)v.findViewById(R.id.title);
            myListHolder.subtitle = (TextView)v.findViewById(R.id.subtitle);
            v.setTag(myListHolder);
        }else myListHolder = (PizzaViewHolder)v.getTag();

        Pizza myList = items.get(pos);

        if (myList != null){
            myListHolder.title.setText(myList.getTitle());
            myListHolder.subtitle.setText(myList.getSubTitle());
        }       
        return v;           
    }
} 
```

这是搜索

```
 private TextWatcher filterTextWatcher = new TextWatcher(){

    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
        if(!s.equals("")){  
            ((Filterable) this.listView1.getAdapter()).getFilter().filter(s);
            }
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        // TODO Auto-generated method stub

    }

}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T04:48:33.817

根据我的确定，我的自定义 ArrayAdapter 似乎需要一个自定义过滤器。自定义 ArrayAdapter 有一个过滤器的重写实现，这里是代码：

```
import java.util.ArrayList;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.TextView;

public class PizzaAdapter extends ArrayAdapter<Pizza>{

private ArrayList<Pizza> original;
private ArrayList<Pizza> fitems;
private Filter filter;

public PizzaAdapter(Context context, int textViewResourceId, ArrayList<Pizza> items) {
    super(context, textViewResourceId, items);

    this.original = new ArrayList<Pizza>(items);
    this.fitems = new ArrayList<Pizza>(items);
    this.filter = new PizzaFilter();
}

@Override
public View getView(int position, View convertView, ViewGroup parent){
    View v = convertView;

    if(v == null){
        LayoutInflater vi = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.pizza_list_item, null);
    }

    Pizza pizza = fitems.get(position);

    if(pizza != null){
        String subtitleString = new String("[" + pizza.getPizzaType() + "]   " + pizza.getPizzaCategory() + ": " + pizza.getPizzaCode());

        TextView title = (TextView)v.findViewById(R.id.title);
        TextView subtitle = (TextView)v.findViewById(R.id.subtitle);

        if(title != null){
            title.setText(pizza.getPizzaName());
        }
        if(subtitle != null){
            subtitle.setText(subtitleString);
        }
    }
    return v;
}

@Override
public Filter getFilter(){

    if(filter == null){
        filter = new PizzaFilter();
    }
    return filter;
}

private class PizzaFilter extends Filter{
    @Override
    protected FilterResults performFiltering(CharSequence constraint){
        FilterResults results = new FilterResults();
        String prefix = constraint.toString().toLowerCase();

        if (prefix == null || prefix.length() == 0){
            ArrayList<Pizza> list = new ArrayList<Pizza>(original);
            results.values = list;
            results.count = list.size();
        }else{
            final ArrayList<Pizza> list = new ArrayList<Pizza>(original);
            final ArrayList<Pizza> nlist = new ArrayList<Pizza>();
            int count = list.size();

            for (int i = 0; i<count; i++){
                final Pizza pizza = list.get(i);
                final String value = Pizza.getPizzaName().toLowerCase();

                if(value.contains(prefix)){
                    nlist.add(pizza);
                }
                results.values = nlist;
                results.count = nlist.size();
            }
        }
        return results;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        fitems = (ArrayList<Pizza>)results.values;
        notifyDataSetChanged();
        clear();
        int count = fitems.size();
        for(int i = 0; i<count; i++){
            add(fitems.get(i));
            notifyDataSetInvalidated();
        }
    }
}
} 
```

事实证明，过滤器的自定义实现会在您搜索时更新显示。希望这会帮助一些人。

# php - php smarty strip_tag 允许特定标签

> ID：11840349
> 
> 赞同：3
> 
> 时间：2012-08-07T06:22:33.960
> 
> 标签：php, smarty

有没有办法像默认一样在 php smarty 中使用 strip_tags 来允许特定的 html 标签通过？

```
stip_tags($a.message,'<p><div>'); 
```

smarty 中的等价物是什么？

```
{$a.message|strip_tags} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:46:38.193

我正在使用 Smarty 2.6.26 并`strip_tags`使用指定要保留哪些标签的参数。

试试这个：

**PHP：**

```
$string = "<b>not bold</b><iframe>iframe goes away</frame> <p>paragraphed</p>
                        <div style='color:green'>div kept.</div>";
$smarty->assign('string', $string); 
```

**在模板中：**

`{$string|strip_tags:"<p><div>"}`

`<p>`并且`<div>`不会被剥离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-12T21:37:27.630

我知道我有点晚了，但是对于那些需要这样做并且不想编写 Smarty-plugin 的人：

在 Smarty 中，您可以像这样从 PHP 中“借用”方法。

代替：

```
{$a.message|strip_tags} 
```

采用

```
{strip_tags($a.message,"<br><div>") nofilter} 
```

*注意：*如果你设置了，你只需要**nofilter参数**`$smarty->escape_html = true;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T06:26:58.440

根据[文档](http://www.smarty.net/docs/en/language.modifier.strip.tags.tpl)，无法指定要保留哪些标签。但是，您可以轻松地为自己创建一个插件： [http ://www.smarty.net/docs/en/plugins.writing.tpl](http://www.smarty.net/docs/en/plugins.writing.tpl)

# plone - 如何排除 Plone 的核心包？

> ID：11840354
> 
> 赞同：1
> 
> 时间：2012-08-07T06:23:01.253
> 
> 标签：plone

我想知道它是在哪里定义的，Plone 正在拉哪些依赖项以及如何排除它的一部分？

就我而言，我想禁用 plone.app.theming，但我在鸡蛋中找不到任何定义依赖项的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:50:42.070

您可以在策略包中依赖“Products.CMFPlone”而不是“Plone”（或者在 buildout.cfg 的鸡蛋列表中安装前者而不是后者）。这将包含一个最小集合。然后，您可能需要根据需要提取其他软件包。

但是，如果您不安装或启用它，则在构建中保留路径不应该导致任何问题。如果是这样，那就是一个错误。

# sql-server - 来自不同表的多列作为一列的外键

> ID：11840356
> 
> 赞同：0
> 
> 时间：2012-08-07T06:23:05.653
> 
> 标签：sql-server, database, foreign-keys, primary-key, guid

我对多列作为单列的外键有疑问。让我用一个例子来解释。

例如：我有 3 张桌子：

**公司1**：`Company_ID(guid) as Primary key, Address (varchar(25))`

**公司2**：`Company_ID(guid) as Primary key, Address (varchar(25))`

**员工**：`Employee_ID(guid) as Primary key, Company_ID ( Foreign key referencing from Company1 and Company2)`

**这里 Employee 表中 Company_ID 的外键来自 2 个不同的表。这适用于 SQL Server 2008。**

我的问题是我觉得这不正确。我从来没有在任何系统中这样做过，但我在一个示例中尝试过它并且它有效。我无法解释自己这里出了点问题，因为它运行良好。

我的假设是正确的还是请指导我？上述关系的缺陷是什么？

```
USE [master]
GO
/****** Object:  Database [Test]    Script Date: 08/07/2012 14:32:32 ******/
CREATE DATABASE [Test] ON  PRIMARY 
( NAME = N'Test', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.FLEXIQUOTE\MSSQL\DATA\Test.mdf' , SIZE = 3072KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'Test_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.FLEXIQUOTE\MSSQL\DATA\Test_log.ldf' , SIZE = 1024KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO
ALTER DATABASE [Test] SET COMPATIBILITY_LEVEL = 100
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [Test].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [Test] SET ANSI_NULL_DEFAULT OFF
GO
ALTER DATABASE [Test] SET ANSI_NULLS OFF
GO
ALTER DATABASE [Test] SET ANSI_PADDING OFF
GO
ALTER DATABASE [Test] SET ANSI_WARNINGS OFF
GO
ALTER DATABASE [Test] SET ARITHABORT OFF
GO
ALTER DATABASE [Test] SET AUTO_CLOSE OFF
GO
ALTER DATABASE [Test] SET AUTO_CREATE_STATISTICS ON
GO
ALTER DATABASE [Test] SET AUTO_SHRINK OFF
GO
ALTER DATABASE [Test] SET AUTO_UPDATE_STATISTICS ON
GO
ALTER DATABASE [Test] SET CURSOR_CLOSE_ON_COMMIT OFF
GO
ALTER DATABASE [Test] SET CURSOR_DEFAULT  GLOBAL
GO
ALTER DATABASE [Test] SET CONCAT_NULL_YIELDS_NULL OFF
GO
ALTER DATABASE [Test] SET NUMERIC_ROUNDABORT OFF
GO
ALTER DATABASE [Test] SET QUOTED_IDENTIFIER OFF
GO
ALTER DATABASE [Test] SET RECURSIVE_TRIGGERS OFF
GO
ALTER DATABASE [Test] SET  DISABLE_BROKER
GO
ALTER DATABASE [Test] SET AUTO_UPDATE_STATISTICS_ASYNC OFF
GO
ALTER DATABASE [Test] SET DATE_CORRELATION_OPTIMIZATION OFF
GO
ALTER DATABASE [Test] SET TRUSTWORTHY OFF
GO
ALTER DATABASE [Test] SET ALLOW_SNAPSHOT_ISOLATION OFF
GO
ALTER DATABASE [Test] SET PARAMETERIZATION SIMPLE
GO
ALTER DATABASE [Test] SET READ_COMMITTED_SNAPSHOT OFF
GO
ALTER DATABASE [Test] SET HONOR_BROKER_PRIORITY OFF
GO
ALTER DATABASE [Test] SET  READ_WRITE
GO
ALTER DATABASE [Test] SET RECOVERY SIMPLE
GO
ALTER DATABASE [Test] SET  MULTI_USER
GO
ALTER DATABASE [Test] SET PAGE_VERIFY CHECKSUM
GO
ALTER DATABASE [Test] SET DB_CHAINING OFF
GO
USE [Test]
GO
/****** Object:  Table [dbo].[Table2]    Script Date: 08/07/2012 14:32:32 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Table2](
    [Company2ID] [int] NOT NULL,
    [COmpanyAddress] [nchar](10) NULL,
 CONSTRAINT [PK_Table2] PRIMARY KEY CLUSTERED 
(
    [Company2ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Table1]    Script Date: 08/07/2012 14:32:32 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Table1](
    [Company1ID] [int] NOT NULL,
    [CompanyName] [nchar](10) NULL,
 CONSTRAINT [PK_Table1] PRIMARY KEY CLUSTERED 
(
    [Company1ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Table3]    Script Date: 08/07/2012 14:32:32 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Table3](
    [EMployeeID] [int] NOT NULL,
    [Company] [int] NULL,
 CONSTRAINT [PK_Table3] PRIMARY KEY CLUSTERED 
(
    [EMployeeID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  ForeignKey [FK_Table3_Table1]    Script Date: 08/07/2012 14:32:32 ******/
ALTER TABLE [dbo].[Table3]  WITH CHECK ADD  CONSTRAINT [FK_Table3_Table1] FOREIGN KEY([Company])
REFERENCES [dbo].[Table1] ([Company1ID])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Table3] CHECK CONSTRAINT [FK_Table3_Table1]
GO
/****** Object:  ForeignKey [FK_Table3_Table2]    Script Date: 08/07/2012 14:32:32 ******/
ALTER TABLE [dbo].[Table3]  WITH CHECK ADD  CONSTRAINT [FK_Table3_Table2] FOREIGN KEY([Company])
REFERENCES [dbo].[Table2] ([Company2ID])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Table3] CHECK CONSTRAINT [FK_Table3_Table2]
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:21:59.530

你的感觉是对的。. . 这不是“正确的”。或者，至少，这是一个糟糕的设计决策。

但是，您的外键关系可能是复合键。通常，您将有另一列指定此引用的表。复杂之处在于这可能是一个“隐式”列。因此，如果一个表具有美国地址而另一个具有非美国地址，则这两个表都可能没有“IsUS”标志。但是，美国记录将引用一个表，而非美国记录将引用另一个表。

另一个问题是如何维护这些密钥。您真的不希望有两个具有相互依赖的主键的表。解决此问题的典型方法是将两个表合并为一个。

尽管这是一个坏主意，但您可能不得不接受这种结构。如果你可以改变它，你应该。

# c# - 我设置为 DateTime.TimeOfDay 的 TimeSpan 会根据 DateTime 改变吗？

> ID：11840358
> 
> 赞同：0
> 
> 时间：2012-08-07T06:23:12.890
> 
> 标签：c#, datetime, timespan

我有`dtTime`type`DateTime`和`tmSpan`type 的变量`TimeSpan`。我做这些：

```
dtTime=new DateTime(1,1,1)+tmSpan; 
```

在此之后，如果我更改日期时间，`dtTime`此更改将应用​​于`tmSpan`？如果没有，是否有任何解决方案可以应用这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:24:21.077

不，它不会。`tmSpan`是具有一定值的自变量。变化`dtTime`不会改变`tmSpan`。

对于您的第二部分问题，我不确定您是如何计算时间跨度的，但我相信您必须重新计算它才能获得更改，例如：

```
tmSpan = dtTime - DateTime.Now; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:29:26.267

改变后`dtTime`你可以做

```
tmSpan = dtTime - new DateTime(1,1,1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:29:57.347

当您执行此操作时

```
dtTime=new DateTime(1,1,1)+tmSpan; 
```

`TimeSpan`值的一部分是实例的一部分，对它的`dtTime`任何更改都不会反映在`TimeSpan`. 您仍然可以使用`dtTime.TimeOfDay`我认为您正在寻找的内容访问相关部分。

# cordova - 运行 sencha+blackberry webwork 应用程序时出现白屏

> ID：11840362
> 
> 赞同：0
> 
> 时间：2012-08-07T06:23:37.363
> 
> 标签：cordova, sencha-touch-2, blackberry-webworks, blackberry-eclipse-plugin

我已经使用 sencha 创建了示例 Blackberry WebWorks 项目。它工作正常。代码是：

```
<!DOCTYPE html> 
   <html> 
     <head> 
        <meta charset="utf-8"> 
        <meta name="viewport" id="viewport" content="width=device-width,height=device-height,initial-scale=1.0,user-scalable=no">
        <title>Hello World</title> 
        <script src="www/sencha.js" type="text/javascript"></script> 
        <script src="www/cordova2.js" type="text/javascript"></script> 
        <link href="www/resources/css/app.css" rel="stylesheet" type="text/css" /> 
        <script type="text/javascript"> 
            new Ext.application({
                launch: function () {
                    Ext.create('Ext.Panel', {
                           fullscreen: true,
                           items: [
                             {
                                dock : 'top',
                                xtype: 'toolbar',
                                title: 'My First Test App',
                                height:40
                             },
                             {              
                                xtype : 'panel',
                                html:"test"
                             }
                           ]
                    });
                }
            });
        </script> 
      </head> 
      <body></body> 
   </html> 
```

在这个项目中，我在这个文件中定义了 sencha 代码。但是现在我想创建一个项目，这样 sencha 代码应该在单独的文件中。但我得到白屏。

谁能告诉我该怎么做？

我试过这个：

```
<!DOCTYPE html> 
    <html> 
         <head> 
            <meta charset="utf-8"> 
            <meta name="viewport" id="viewport" content="width=device-width,height=device-height,initial-scale=1.0,user-scalable=no">
            <title>Hello World</title> 
            <script src="www/sencha.js" type="text/javascript"></script> 
            <script src="www/cordova2.js" type="text/javascript"></script> 
            <script src="www/app.js" type="text/javascript"></script>
            <link href="www/resources/css/app.css" rel="stylesheet" type="text/css" />  
         </head> 
         <body></body> 
    </html> 
```

app.js 代码是：

```
Ext.application({
    name: 'SenchaDemo',
    requires: [
        'Ext.MessageBox'
    ],
    views: ['SettingPanel'],
    launch: function() {
         // Initialize the setting view
         Ext.Viewport.add(Ext.create('SenchaDemo.view.SettingPanel'));
    },

    onUpdated: function() {
        Ext.Msg.confirm(
            "Application Update",
            "This application has just successfully been updated to the latest version. Reload now?", 
            function(buttonId) {
                if(buttonId === 'yes') {
                     window.location.reload();
                 }
             }
        );
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:53:09.200

这更多是 Sencha 而不是 WebWorks SDK 的问题。我不确定是否有可能像那样崩溃。有关设置项目结构的更多信息，请参阅以下链接。

[http://docs.sencha.com/touch/2-0/#!/guide/command](http://docs.sencha.com/touch/2-0/#!/guide/command)

谢谢

# r - 循环从 .Rdata 文件中读取数据集

> ID：11840366
> 
> 赞同：2
> 
> 时间：2012-08-07T06:23:51.000
> 
> 标签：r

假设我们有这种情况：

1.  我有很多 .RData 文件，它们超过 100mb（无论如何，但很大）。
2.  在每个 .RData 文件中都有一个名为“Dataset_of_interest”的数据集，它们都是我想要创建的一个大数据集的一部分。

所以我想知道是否有可能只将我感兴趣的数据集加载到内存中，而不是加载整个 .RData 文件？

我想循环加载每个“Dataset_of_interest”，合并到一个大文件中，然后将其保存在一个文件中。

编辑：我在 Windows 7 上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:19:52.803

我认为这是可能的，但需要一些并行处理能力。每个工作人员都会加载 .RData 文件并输出所需的对象。合并结果可能非常简单。

我无法为您的数据提供代码，因为我不知道结构，但我会按照下面的块'o'代码的行做一些事情。请注意，我使用的是 Windows，您的工作流程可能会有所不同。您不应该缺少计算机内存。此外，降雪并不是使用多核的唯一接口。

```
# load library snowfall and set up working directory
# to where the RData files are
library(snowfall)
working.dir <- "/path/to/dir/with/files"
setwd(working.dir)

# initiate (redneck jargon: and then she ate) workers and export
# working directory. Working directory could be hard coded into
# the function, rendering this step moot
sfInit(parallel = TRUE, cpus = 4, type = "SOCK")
sfExport(list = c("working.dir")) # you need to export all variables but x

# read filenames and step through each, returning only the
# desired object
lofs <- list.files(pattern = ".RData")
inres <- sfSapply(x = lofs, fun = function(x, wd = working.dir) {
    setwd(wd)
    load(x)
    return(Dataset_of_interest)
  }, simplify = FALSE)
sfStop()

# you could post-process the data by rbinding, cbinding, cing...
result <- do.call("rbind", inres) 
```

# c# - Outlook 功能区中的搜索栏

> ID：11840367
> 
> 赞同：1
> 
> 时间：2012-08-07T06:23:53.163
> 
> 标签：c#, search, ribbon, outlook-addin

我必须使用 C# 在 Outlook 功能区中创建一个搜索字段。此字段应在 SQL 数据库表中搜索人员。编写代码没问题，问题是功能区中工具箱的可用字段。对于标准，您只能使用“编辑框”或“下拉”字段。两者都只有事件处理程序“On Text Change”，因此您必须在代码启动之前按 Enter。我想要的是在每个 Key Press 上进行类似 google 的搜索，按下一个新的下拉数组，显示结果。我试图在功能区中获得一个“正常”的 Windows 窗体文本框，但我尝试的一切都失败了。我不知道是我做错了还是不可能。

有人知道我该如何进行此搜索。我也会采取完全不同的方式。

感谢您的回答。

# visual-studio-2010 - Visual Studio 2010 - 打包错误

> ID：11840379
> 
> 赞同：0
> 
> 时间：2012-08-07T06:24:49.713
> 
> 标签：visual-studio-2010, sharepoint-2010, sharepoint-workflow

嗨，当我尝试在 Visual Studio 2010 中打包“空 SharePoint 解决方案”时，我收到此错误“无法通过沙盒解决方案中的功能部署项目项“ItemName””。该解决方案包含一个“顺序工作流程”。我采用了“空 SharePoint 解决方案”，以便将其设为沙盒。

我希望有人能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:09:48.807

发生这种情况是因为顺序工作流项目没有作为沙盒解决方案实施。沙盒解决方案有限制。如果您想使用顺序工作流，您应该使用农场解决方案。更多见

[在 SharePoint 2010 的沙盒解决方案中可以实现什么](http://msdn.microsoft.com/en-US/library/gg615464.aspx)

和

[如何在沙盒解决方案中创建和部署声明性工作流](http://msdn.microsoft.com/en-US/library/gg615452.aspx)

祝你好运！

# java - java泛型方法调用转换错误

> ID：11840380
> 
> 赞同：2
> 
> 时间：2012-08-07T06:25:06.117
> 
> 标签：java, list, generics, hashmap, type-conversion

我有一段代码用于生成图表：

```
HashMap<String, List<Ticket>> openedTicketsPerTeam = getOpenedTicketsPerTeam(); 
```

我应该如何编写**通用方法的签名**来计算列表的长度，每个 Map 元素？我的想法是：

```
Map<String, Integer> getNumOfValuesPerKey(HashMap<String, List<? extends Object>> map) {...} 
```

但调用后出现转换错误：

```
HashMap<String, Integer> numOfTicketsPerTeam = getNumOfValuesPerKey(openedTicketsPerTeam ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:36:07.690

像这样的东西（可以用于**任何**键`K`和 s 的任何列表`V`）：

```
public static <K, V> Map<K, Integer> getNumOfValuesPerKey(Map<K, List<V>> map) {

    Map<K, Integer> count = new HashMap<K, Integer>();

    for (Entry<K, List<V>> entry : map.entrySet()) 
        count.put(entry.getKey(), entry.getValue().size());

    return count;
} 
```

* * *

## 例子：

```
public static void main(String[] args) {

    HashMap<String, List<Integer>> map = new HashMap<String, List<Integer>>();

    map.put("Hello", Arrays.asList(1,2,3));
    map.put("World", Arrays.asList(4,5));

    System.out.println(getNumOfValuesPerKey(map));
} 
```

输出：

```
{Hello=3, World=2} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:38:10.013

试试这个：

```
Map<String, Integer> numOfTicketsPerTeam = getNumOfValuesPerKey(openedTicketsPerTeam ); 
```

您的方法（正确）返回`Map<String, Integer>`，但您将其分配给`HashMap<String, Integer>`- 有多种类型的 Map，编译器无法知道您的实现返回 HsshMap。

请注意，您可以并且应该将方法签名简化为：

```
Map<String, Integer> getNumOfValuesPerKey(Map<String, List<?>> map) {...} 
```

更改是使参数 a `Map`(不是 a `HashMap`) 和`List<?>`(not `List<? extends Object>`，这是同一件事但更笨拙)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:40:22.487

实际上不需要对值类型进行参数化。您遇到的问题`Map<K, List<?>>`是非通配符泛型参数必须完全匹配。所以在第二类参数中`Map`，`List<?>`不匹配`List<Ticket>`。正确的做法是也将其设为通配符（另外还有一个好处是能够与实现类一起工作，例如`ArrayList`作为参数）：

```
public static <K> Map<K, Integer> getNumOfValuesPerKey(Map<K, ? extends List<?>> map) {

    Map<K, Integer> count = new HashMap<K, Integer>();

    for (Map.Entry<K, ? extends List<?>> entry : map.entrySet()) 
        count.put(entry.getKey(), entry.getValue().size());

    return count;
} 
```

# android - 我可以检查默认音频编码器吗？

> ID：11840381
> 
> 赞同：0
> 
> 时间：2012-08-07T06:25:07.007
> 
> 标签：android, audio, voice, encoder

我在音频编码器上遇到问题。我使用 MediaRecorder 录制声音。但是，我发现我的设备必须使用默认的 audioEncoder 才能成功录制语音。

如何检查默认音频编码器的类型？

谢谢。

更新：

```
private MediaRecorder mRecorder = null;
public void startRecording(String aOutputFileName, int aOutputformat, int       aAudioEncoder) 
{
    if(null == mRecorder){
        mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(aOutputformat);
        mRecorder.setOutputFile(aOutputFileName);
        mRecorder.setAudioEncoder(aAudioEncoder);

        try {
            mRecorder.prepare();
            mRecorder.start();
        } 
        catch (IOException e) {
            e.printStackTrace();
            Log.e(LOG_TAG, "prepare() failed");
        }

    }
} 
```

调用函数：

```
mVoiceRecorder.startRecording(mFileName, MediaRecorder.OutputFormat.THREE_GPP, MediaRecorder.AudioEncoder.DEFAULT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:00:21.113

您可以通过以下方式指定所需的音频编解码器：

[MediaRecorder.setAudioEncoder()](http://developer.android.com/reference/android/media/MediaRecorder.html#setAudioEncoder%28int%29)

所有 Android 设备都至少支持[这些编解码器](http://developer.android.com/guide/appendix/media-formats.html)，因此请选择您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:27:41.623

问题是 android 应该支持所有设备上的某些编解码器，但从未发生过。我遇到了这个问题，并在[这里](https://stackoverflow.com/questions/12362918/android-reliable-audio-recording-all-devices)发布了一个问题，让您了解我如何克服它。

每个设备都应该能够使用 AudioEncoder.AMR_NB 或 AudioEncoder.DEFAULT 但事实并非如此。您最好的选择是 IMO 循环遍历 AudioEncoder 类中可用的编码器，并测试编解码器是否在 prepare() 或 start() 上失败。如果是，则增加一个计数器并继续循环。在我的情况下，我使用 ErrorListener 来捕获错误或成功并将默认编码器常量设置为共享设置。

# python - sqlite - python 检索 CURRENT_TIMESTAMP 作为日期时间对象

> ID：11840382
> 
> 赞同：4
> 
> 时间：2012-08-07T06:25:17.803
> 
> 标签：python, datetime, sqlite, timestamp

我正在使用本地 sqlite 数据库在我的应用程序中对元数据进行离线处理，元数据包括时间戳。

我有一个声明如下的表：

```
CREATE TABLE if not exists tbl_dbsync_meta (
             maindb_last_checked TIMESTAMP,
             global_scores_last_checked TIMESTAMP,
             localscores_syncup_last_checked TIMESTAMP) 
```

现在，在某一时刻，我`CURRENT_TIMESTAMP`从 sqlite 中检索到上述所有其他时间戳，以便 - 自然地 - 找出现在与所有这些其他时间戳之间的时间差异。

```
SELECT CURRENT_TIMESTAMP as this_time, * FROM tbl_dbsync_meta 
```

现在的问题是，所有其他字段都被正确检索为 Python 中的“日期时间”对象。但是`CURRENT_TIMESTAMP`作为字符串返回。

我试过铸造`CURRENT_TIMESTAMP`：

```
SELECT CAST(CURRENT_TIMESTAMP AS TIMESTAMP), * FROM tbl_dbsync_meta 
```

但现在它以 INTEGER 形式返回，返回的只是年份（2012 年）。

我解决这个问题的一个简单方法是直接`SELECT`从 sqlite 本身获取时间差异，而不是将它们检索到 python 中然后玩弄。另一个选择是我使用返回的字符串`CURRENT_TIMESTAMP`，在 Python 中将其转换为“日期时间”并使用它。

`CURRENT_TIMESTAMP`但是我需要了解（演员或其他）与其他`TIMESTAMP`领域之间的区别是什么。这不起作用似乎是错误的。

谢谢你的帮助。

PS：请注意，我从不将 Python 日期时间对象直接存储到 SQLite 中。每当我需要更新此表时，我只需`SET global_scores_last_checked = CURRENT_TIMESTAMP`. 出于必要，我只将 SQLite 中的日期检索到 Python 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:26:53.807

连接时需要设置`PARSE_COLNAMES`：

`sqlite3.connect(':memory:', detect_types=sqlite3.PARSE_COLNAMES)`

然后以下将起作用：

`select current_timestamp as 'ts [timestamp]'`

这将返回`"2012-08-07 13:20:42" (<type 'datetime.datetime'>)`。

CAST 不起作用（很可能是一个错误）并且 CURRENT_TIMESTAMP 确实没有返回日期时间类型，这可能是一个错误或一个功能（请记住，Sqlite 没有日期/时间类型的概念，它将它们存储为 TEXT/REAL/整数）。

# gem - 相当于`pip install -r requirements.txt`的gem

> ID：11840384
> 
> 赞同：5
> 
> 时间：2012-08-07T06:25:23.043
> 
> 标签：gem

我在这里为 npm 提出了类似的问题：[npm 等效于 `pip install -r requirements.txt`](https://stackoverflow.com/questions/11840341/npm-equivalent-of-pip-install-r-requirements-txt)

这是给宝石的。

什么是宝石等价物：

```
pip freeze > requirements.txt
pip install -r requirements.txt 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T17:37:36.160

Ruby 中没有直接的比较，但我们有一些非常相似的东西。查看[bundler gem](https://bundler.io/)，了解如何将所需的 gem 列表写入 Gemfile 并自动生成包含当前安装版本的 Gemfile.lock。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-25T13:09:30.333

我的解决方案是：

```
serverA: $ gem list | awk -F'[ ()]' '{print $1" -v "$(NF-1)}' > gem_reqs.txt
serverB: $ cat gem_reqs.txt | xargs gem install 
```

我的情况是。在服务器“A”上，我有第 3 方开发的具有许多依赖项且没有 Gemfile 的 ruby​​ 脚本。我必须在服务器“B”上使用那些相同的 ruby​​ 脚本。如何轻松地将带有所有可能需要的 gem 的 ruby​​ 环境“复制”到服务器“B”（相同版本）。

# android - android中麦克风（mic）的任何监听器

> ID：11840387
> 
> 赞同：1
> 
> 时间：2012-08-07T06:25:35.777
> 
> 标签：android, microphone

我开发了一个应用程序，在其中成功开发了音频焦点更改侦听器。我想要像麦克风的音频焦点更改监听器一样的监听器。所以我可以控制麦克风活动。android 中是否有任何麦克风监听器，或者如果没有，我如何控制麦克风，如音频（扬声器）。

# javascript - 在 Background.js 中注册事件的 Chrome 扩展

> ID：11840388
> 
> 赞同：5
> 
> 时间：2012-08-07T06:25:37.033
> 
> 标签：javascript, javascript-events, google-chrome-extension

我的扩展需要为其用户提供一些服务，它的部分工作是监听标签创建事件。我在 popup.js 中有我所有的 javascript 并且有自我调用 chrome.tabs.onCreated.addListener(function(tab) {

问题是，如果用户单击扩展符号（如果他打开扩展因此激活 popup.js），扩展只会监听选项卡创建事件，并且如果弹出屏幕关闭，所有事件监听都会停止。（我通过写信给控制台验证了它，如果你停下来思考它是有道理的）我的问题是：我想在扩展的整个生命周期中收听事件（换句话说，自从用户打开 chrome 以来），而不仅仅是当用户弹出扩展名。

我知道有一个叫做背景页面的东西，我应该尝试将我的整个代码移到那里吗？我这是后台页面的正常做法吗？只是事件监听器依赖于更多的函数和更多的对象，似乎我的几乎所有代码都会去那里。popup.js 将几乎一无所有。另一件事是我不确定是否可以在触发“domcontentloaded”事件之前在后台页面中注册事件（并且此事件仅在用户弹出扩展程序时触发）。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:24:00.253

背景页面是处理该问题的最佳方式，它在浏览器运行时位于后台。有关更详细的说明，请参阅[http://code.google.com/chrome/extensions/background_pages.html 。](http://code.google.com/chrome/extensions/background_pages.html)值得注意的是，它不必是 HTML 页面，您可以只拥有一个脚本文件。

您需要独立于浏览器操作运行的任何内容都应该在后台脚本中；在您单击按钮之前，弹出窗口基本上不存在。您可以在后台脚本和弹出窗口之间传递数据，但如果需要，请查看[http://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)。

需要注意的另一件事是后台页面无权访问 DOM。你的 popup.js 也不会，所以它可能不是问题。

希望这可以帮助！

# php - Cakephp 模型中的 PHP 变量

> ID：11840406
> 
> 赞同：0
> 
> 时间：2012-08-07T06:27:09.640
> 
> 标签：php, cakephp, cakephp-2.1, cakephp-model

我正在尝试通过使用与两个表的连接与 CakePHP 的许多关系与条件我的模型代码在这里使用

```
public $userid = 3;
    public $name = 'Course';
    public $hasMany = array(
        'Enrollcourse' => array(
            'className'     => 'Enrollcourse',
            'foreignKey'    => 'course_id',
            'conditions'    => array('Enrollcourse.student_id' => $this->userid),
            'dependent'     => true
        )
    ); 
```

或者

```
 public $userid = 3;
        public $name = 'Course';
        public $hasMany = array(
            'Enrollcourse' => array(
                'className'     => 'Enrollcourse',
                'foreignKey'    => 'course_id',
                'conditions'    => array('Enrollcourse.student_id' => $userid),
                'dependent'     => true
            )
        ); 
```

这`$userid`是一个变量，用于检查以检索选定用户的数据，但无法获取此变量，并发生以下情况

```
Error: parse error
File: E:\wamp\www\simpleApp\app\Model\course.php
Line: 10 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:42:34.980

您不能在类中的变量声明中使用变量。这意味着使用 of`$userid`将导致您看到的解析错误。

克服动态信息的最佳方法是替换/重载模型的构造函数：

```
public function __construct($id = false, $table = null, $ds = null) {
    $this->hasMany = array(
        'Enrollcourse' => array(
            'className'     => 'Enrollcourse',
            'foreignKey'    => 'course_id',
            'conditions'    => array('Enrollcourse.student_id' => $this->userid),
            'dependent'     => true
        )
    );
    parent::__construct($id, $table, $ds);
} 
```

这克服了在类变量声明期间使用变量的问题。

# sql - cakephp结合两个sql语句

> ID：11840409
> 
> 赞同：1
> 
> 时间：2012-08-07T06:27:21.217
> 
> 标签：sql, cakephp, find

大家好，我的函数中有两个 sql 语句，我想获取 $accounts 的结果并将其用作第二个语句中的 where 子句。我正在尝试从 accounts_users 表中获取 account_id，以便我可以获取该帐户的相关模板。

这两个发现称为 $templates 和 $accounts，我希望将第一个查询的结果用于 template.account_id='answer' 是什么。

```
SELECT `AccountsUser`.`id`, `AccountsUser`.`account_id` FROM `pra`.`accounts_users` AS `AccountsUser` WHERE `id` = 14 LIMIT 1

SELECT `Template`.`id`, `Template`.`name`, `Template`.`description`, `Template`.`account_id` FROM `pra`.`templates` AS `Template` WHERE `Template`.`account_id` = '' 
```

这是我控制器中的代码

```
$this->Template->unbindModel(array('belongsTo'=>array('Account')));
        $templates = $this->Auth->user('name');
        $accounts=$this->User->AccountsUser->find('first', array('fields'=>array('id','account_id'),'conditions' =>     array('id' => $this->Auth->user('id'))));
        $this->set('Templates', $this->Template->find('all', array('conditions' => array('Template.account_id' => $accounts))));
        $this->set('templates', $templates);
        $this->set('accounts'. $accounts); 
```

查看“查看”

```
<div class = "conlinks">        

<table width="100%" border="1">

            <table width="100%" border="1">
                <tr>
                    <th>Template Name</th>
                    <th>Template Description</th>

                </tr>

                <?php foreach($templates as $template): ?>
                    <tr> 
                        <td align='center'><?php echo $template['Template']['name']; ?></td>
                        <td align='center'><?php echo $template['Template']['description']; ?></td>
                    </tr>
                <?php endforeach; ?>

            </table>

</div>              
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:52:20.947

您可以尝试使用以下内容：

```
 $this->Template->unbindModel(array('belongsTo'=>array('Account')));
    $templates = $this->Auth->user('name');
    $accounts=$this->User->AccountsUser->find('list', array('fields'=>array('id', 'account_id'),'conditions' =>  array('user_id' => $this->Auth->user('id'))));       
    $this->set('Templates', $this->Template->find('all', array('conditions' => array('Template.account_id' => $accounts['AccountsUser']))));
    $this->set('templates', $templates);
    $this->set('accounts'. $accounts); 
```

请询问它是否不适合您。

# cocoa - OS X 应用程序防火墙对话框在没有用户输入的情况下消失

> ID：11840413
> 
> 赞同：2
> 
> 时间：2012-08-07T06:27:34.383
> 
> 标签：cocoa, sockets, firewall

我正在创建一个 BSD 套接字，`socket`然后尝试`listen`使用它。当防火墙处于活动状态时，调用 会`listen`导致应用程序防火墙对话框出现，但它消失得太快，用户无法与之交互。我发现调用 to 的任何延迟`listen`，例如在调试器中添加断点或调用 to `sleep`，在调用之后`socket`都会导致对话框出现并保持足够长的时间让用户与之交互。如果在用户可以选择任何内容之前对话框消失了，防火墙会拒绝该应用程序的所有后续传入请求。

有谁知道是什么导致对话框消失，以及是否有比调用更合适的方法来防止它`sleep`？

如果有人想尝试重现此问题，我将在下面附上导致此行为的代码。如果`waitForUserInput`为真，对话框将出现并一直持续到套接字关闭。如果不是真的，对话会在一瞬间消失。如果您在测试的行上添加断点，`waitForUserInput`即使该变量是 .它也会显示 5 秒的对话框`NO`。在所有这些情况下，调用`listen`不会返回错误。我正在使用 OS X 10.7.4 和 Xcode 4.2 。

```
#import <sys/socket.h>
#import <netdb.h>

static void firewallDialog(BOOL waitForUserInput){
    struct addrinfo *res, *p, host;

    memset(&host, 0, sizeof host);
    host.ai_family = AF_UNSPEC; // no preference for IP4/6
    host.ai_socktype = SOCK_STREAM; // TCP
    host.ai_flags = AI_PASSIVE; // local IP address

    if(-1 != (getaddrinfo(NULL,"1234",&host,&res))){
        int sock = -1;

        for(p = res; p != NULL; sock = -1, p = p->ai_next) {
            // make a socket
            if(-1 == (sock = socket(p->ai_family, p->ai_socktype, p->ai_protocol))){
                continue;
            }

            if(p->ai_family == PF_INET6){
                ((struct sockaddr_in6*)p->ai_addr)->sin6_addr = in6addr_any;
            }
            if(-1 == bind(sock, p->ai_family == PF_INET ? INADDR_ANY : p->ai_addr, p->ai_addrlen)){
                close(sock);
                continue;
            }

            break;
        }

        freeaddrinfo(res);

        if(-1 != sock){
            if(waitForUserInput){ sleep(1); }

            if(-1 == listen(sock, 20)){
                close(sock);
            }else{
                NSLog(@"Call to listen was successful");
                sleep(5);
                close(sock);
            }
        }
    }
} 
```

# javascript - ExtJS 中的浮动组件

> ID：11840417
> 
> 赞同：2
> 
> 时间：2012-08-07T06:28:27.460
> 
> 标签：javascript, extjs, extjs4

我需要一个自定义面板，它始终在指定位置（例如始终在右下角）保留一个按钮。

职位需要尽可能灵活（但静态定义）。从理论上讲，它可以在面板中的任何地方（左居中，居中，左 + 10 像素和底部 - 50 像素，...），它需要是“免费的”。所以它不能被任何其他元素包围，比如工具栏（浮动...）。

我已经实现了这一点，但它仍然存在一个错误，我不确定是否没有更好的方法来做到这一点：

[http://jsfiddle.net/suamikim/uQDDu/1/](http://jsfiddle.net/suamikim/uQDDu/1/)

```
Ext.onReady(function() {
    var floatBtn, toolbar, win;

    Ext.define('PanelWithFloatButton', {
        extend: 'Ext.panel.Panel',

        items: [],

        constructor: function(config) {
            // region private variables (no getter & setter available)
            this._floatingBtn = undefined;
            // endregion private variables

            // region private events
            this._afterRender = function() {
                this._floatingBtn.show();
            };
            // endregion private events

            // region private functions
            this._updateFloatBtnPos = function() {
                var bodySize = this.body.getSize(),
                    btnSize = this._floatingBtn.getSize();

                if (this._floatingBtn && this._floatingBtn.el) {
                    this._floatingBtn.setPosition(bodySize.width - btnSize.width - 10, bodySize.height - btnSize.height - 10);
                }
            };
            // endregion private functions

            return this.callParent(arguments);
        },

        initComponent: function() {
            // Create floating button
            this._floatingBtn = Ext.create('Ext.button.Button', {
                text: 'Floating button, always bottom-right...',
                floating: true,
                style: {
                    'z-index': 1
                }
            });

            // Add items
            this.add(this._floatingBtn);

            // Add listeners
            this.addListener('afterrender', this._afterRender, this);
            this.addListener('resize', this._updateFloatBtnPos, this);

            this.addListener('beforedestroy', function() {
                this._floatingBtn.destroy();
            }, this);

            this.addListener('beforehide', function() {
                this._floatingBtn.hide();
            }, this);

            this.addListener('show', function() {
                this._floatingBtn.show();
            }, this);

            return this.callParent(arguments);
        }
    });

    btnParent = Ext.create('PanelWithFloatButton', {
        title: 'Button-Parent',
        layout: {
            type: 'vbox',
            align: 'stretch'
        }
    });

    toolbar = Ext.create('Ext.toolbar.Toolbar', {
        region: 'north',
        defaultType: 'button',
        items: [{
                text: 'Toggle visibility of Button-Parent',
                handler: function() {
                    try {
                        btnParent.setVisible(!btnParent.isVisible());
                    } catch (e) {
                        // btnParent is already destroyed
                    }
                }
            }, '|', {
                text: 'Destroy Button-Parent',
                handler: function() {
                    try {
                        btnParent.up().remove(btnParent);
                    } catch (e) {
                        // btnParent is already destroyed
                    }
                }
            }, '|', {
                text: 'Add subpanel',
                handler: function() {
                    btnParent.add(Ext.create('Ext.panel.Panel', {
                        title: 'Sub-Panel',
                        height: 200,
                        style: {
                            'z-index': 2
                        }
                    }));
                }
        }]
    });

    win = Ext.create('Ext.window.Window', {
        width: 500,
        height: 500,
        layout: 'border',
        items: [
            toolbar, 
            {
                xtype: 'panel',
                region: 'center',
                layout: 'fit',
                items: btnParent
        }]
    }).show();
}); 
```

一些具体问题：

1.) 为什么按钮只有在第一次手动移动窗口后才正确定位，而不是从一开始就正确定位？

2.) 有没有比捕获调整大小事件并手动重新计算更好的方法让按钮始终保持在其位置？

3.) 有没有办法让按钮自动显示/隐藏/销毁它的父面板，就像普通的子项目（不浮动）一样？

4.) 有没有办法在按钮父项的其他子项下自动隐藏浮动按钮？通过按“添加子面板”添加另外 2 个子面板后，它应该会自动隐藏在第二个面板下。我认为这可以通过设置 z-index 轻松实现，但这似乎被 Ext-Framework 覆盖，因为当我查看 DOM 时，在元素级别设置了一个非常大的 z-index (> 19000)不能用css轻易覆盖。

5.）我的方法（扩展面板，创建按钮并在 initComponent 中添加侦听器，...）对于我想要实现的目标是否基本正确，或者我的代码中是否存在任何重大缺陷？

谢谢和最好的问候，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T01:35:35.690

试试这个[http://jsfiddle.net/uQDDu/13/](http://jsfiddle.net/uQDDu/13/)

Javascript

```
 ...
    Line 48 this.addListener('afterrender', this._afterRender, this);
    Line 49 this.addListener('afterlayout', this._updateFloatBtnPos, this); //added
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:20:43.453

这对你有用吗？[http://jsfiddle.net/dbrin/XuQg4/21/](http://jsfiddle.net/dbrin/XuQg4/21/)

# java - 将 null 分配给 XMLGregorianCalendar

> ID：11840423
> 
> 赞同：1
> 
> 时间：2012-08-07T06:28:36.740
> 
> 标签：java, jaxb, jaxb2

我们有 JAXB 生成的方法 setCHECKDT(XMLGregorianCalendar value)。从实际的业务逻辑来看（我们不能修改业务逻辑）有时我们可能会得到CHECKDT为空值，同样需要分配给生成xml的方法。

将空日期设置为设置器时，从 xml 中消失。请建议一种将空值分配给 XMLGregorianCalendar 日期的方法或任何生成标记的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:51:26.223

将 Java 属性设置为 null 将正确地导致元素在序列化时从 XML 中遗漏。如果您仍然想要 XML 中的元素，您的选择是：

1.  编写您自己的日期/时间转换器，可以处理（反）序列化的空标签（请参阅[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.5/tutorial/doc/JAXBUsing4.html#wp155652](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.5/tutorial/doc/JAXBUsing4.html#wp155652)）。

2.  使用 nillable 注释 Java 属性，如下所示：

    ```
    @XmlElement(required = true, nillable = true)
    private XMLGregorianCalendar yourProperty; 
    ```

现在序列化的 XML 将包含该元素，即使它为空。该元素将被标记为属性 'nil="true"'：

```
<yourProperty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/> 
```

# c# - 无法写入 log4net 中的日志文件

> ID：11840426
> 
> 赞同：0
> 
> 时间：2012-08-07T06:28:58.283
> 
> 标签：c#, log4net

您好我在我的 Windows 应用程序中使用 log4net 以下是我的 app.confige 文件的内容。我的 app.confige 文件中有两个标签，我需要它们都可以在我的应用程序中工作。但问题是，如果我在这种情况下包含两个标签，我的日志不会在 application.log 文件中创建，而如果我只评论运行时和程序集标签，那么日志会在 application.log 文件中创建，但当我注释掉时运行时和程序集标签我无法为应用程序实现其他功能。

请帮我解决问题。

```
 <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
  </configSections>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="bin"/>
    </assemblyBinding>
  </runtime>
  <assemblies>
    <add assembly="ImageGear19.Core"/>
  </assemblies>
  <!--The settings below are required for Logging-->
  <log4net>
    <appender name="Application" type="log4net.Appender.RollingFileAppender">
      <file value="Application.log"/>
      <appendToFile value="true"/>
      <maxSizeRollBackups value="10"/>
      <maximumFileSize value="2 MB"/>
      <rollingStyle value="Size"/>
      <staticLogFileName value="true"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date[%thread](%-5level): %message%newline"/>
      </layout>
    </appender>
    <logger name="Application">
      <level value="All"/>
      <appender-ref ref="Application"/>
    </logger>
  </log4net> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:34:41.900

调试 log4net 的最佳方法是启用其内部错误日志记录。这会记录它所做的一切，并帮助您追溯问题所在。

这是关于如何在 log4net 中启用内部日志记录的类似[线程和描述](https://stackoverflow.com/questions/2263301/log4net-randomly-stops-logging)

将此添加到您的应用设置

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="log4net.Internal.Debug" value="true"/>
    </appSettings>
</configuration> 
```

并将其添加到 web.config 的底部

```
<configuration>
    ...
    <system.diagnostics>
        <trace autoflush="true">
            <listeners>
                <add 
                    name="textWriterTraceListener" 
                    type="System.Diagnostics.TextWriterTraceListener" 
                    initializeData="C:\temp\log4net.txt" />
            </listeners>
        </trace>
    </system.diagnostics>
    ...
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:40:34.957

就个人而言，处理前两个标签的逻辑存在一些错误。鼓励您在初始化 log4net 时进行调试。

# c# - 如何在c#中动态更改字典中的键？

> ID：11840427
> 
> 赞同：-2
> 
> 时间：2012-08-07T06:28:58.830
> 
> 标签：c#

我在 c# 中有以下代码，基本上它是一个带有一些键及其值的简单字典。现在我想用新键更新这个字典中的现有键。是否可以？

```
Dictionary<string, int> dictionary = new Dictionary<string, int>();
dictionary.Add("00", 2);
dictionary.Add("01", 1);
dictionary.Add("02", 0);
dictionary.Add("03", -1); 
```

在某些情况下，我使用键 01 删除了该值。

现在我必须更新已删除密钥下方的密钥，如下所示。

```
dictionary.Add("00", 2);   
dictionary.Add("01", 0);
dictionary.Add("02", -1); 
```

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T06:33:09.203

这表明您完全错误地使用了字典。字典是键和值之间的映射。如果我们从“the”词典（有词的东西）中删除一个词，定义不会全部移动一个词！

要做你想做的事，只需使用一个列表，并使用*索引*来代替你当前使用*key*的方式：

```
var list = new List<int>();
list.Add(2);
list.Add(1);
list.Add(0);
list.Add(-1);
//...
list.RemoveAt(1); 
```

现在列表是 {index, value}：`{0, 2}, {1, 0}, {2, -1}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:34:44.817

你为什么首先使用字典？看起来您应该使用列表或数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:33:37.330

你想要一个“AddOrUpdate”方法：

```
static class DictionaryExtensions
{
    public static void AddOrUpdate<TKey, TValue>(this IDictionary<TKey, TValue> dict, TKey key, TValue value)
    {
        if (dict.ContainsKey(key))
        {
            dict[key] = value;
        }
        else
        {
            dict.Add(key, value);
        }
    }
} 
```

然后像这样调用它：

```
Dictionary<string, int> dictionary = new Dictionary<string, int>();
dictionary.AddOrUpdate("00", 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T06:38:01.853

您可以这样做，但是如果您删除密钥然后再次添加它，您将获得相同的效果。Dictionary 是使用散列表实现的，因此如果您以某种方式更改了键，则必须重新散列该条目。

这是您可能如何去做的扩展（类似于引用的SO问题）：

```
public static UpdateKeyName<TKey, TValue>(Dictionary<TKey, TValue> dic this,
                                      TKey fromKey, TKey toKey)
{
  TValue value = dic[fromKey];
  dic.Remove(froKeym);
  dic[toKey] = value;
} 
```

可以在此处找到有关 c# 中字典的更多信息：

*   [http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)
*   [更改字典键的最佳方法](https://stackoverflow.com/questions/6499334/best-way-to-change-dictionary-key)

# mysql - 从 datewise 获取数据

> ID：11840431
> 
> 赞同：3
> 
> 时间：2012-08-07T06:29:24.090
> 
> 标签：mysql

我在数据库中有一些记录。现在我想从日期获得记录。请参阅我的表格的以下格式。

```
 User_id    name    date         Present
  001      Jone    01-08-2012     yes
  002      arun    01-08-2012     yes
  001      Jone    02-08-2012     yes
  002      arun    02-08-2012     yes
  001      Jone    03-08-2012     yes
  001      Jone    04-08-2012     yes
  002      arun    05-08-2012     yes
  001      Jone    05-08-2012     yes
  001      Jone    06-08-2012     yes
  001      arun    06-08-2012     yes 
```

我想像这样从 01-08-2012 到 07-08-2012 获得“arun”报告

```
 User_id    name    date         Present
  002      arun    01-08-2012     yes
  002      arun    02-08-2012     yes
  002      arun    03-08-2012    
  002      arun    04-08-2012     
  002      arun    06-08-2012     yes
  002      arun    07-08-2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:30:25.163

为了显示丢失的日期，您需要一个临时表。临时表：

```
CREATE TABLE numbers (number INTEGER);
INSERT INTO numbers VALUES (0), (1), (2), (3), (4), (5), (6), (7), (8), (9); 
```

sql如下：

```
SELECT CASE WHEN u.id IS NOT NULL 
       THEN u.id
       ELSE u2.id
END AS id ,
CASE WHEN u.name IS NOT NULL 
       THEN u.name
       ELSE u2.name
END AS name ,
cal.date, 
CASE WHEN u.present IS NOT NULL 
       THEN u.present
       ELSE ''
END AS present 
FROM (
    SELECT '2012-08-01' + INTERVAL a.number * 10 + b.number DAY as date
    FROM numbers a JOIN numbers b
    ORDER BY a.number * 10 + b.number
) cal LEFT JOIN (select * from users where name='arun') u 
ON DATE_FORMAT(STR_TO_DATE(u.date1, '%d-%m-%Y'), '%Y-%m-%d') = cal.date
left join (select id,name from users  group by id)u2 on u.id is null and u2.name='arun'
WHERE date BETWEEN '2012-08-01' AND '2012-08-07'; 
```

[SQL 演示在这里。](http://sqlfiddle.com/#!2/c0073/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:31:51.407

我认为这就是你要找的：

```
SELECT User_id, name, `date`,
       IF(MAX(Present) = 1, 'yes', 'no')  AS Present
FROM
(
 SELECT User_id, name, `date`, IF('yes', 1, 0) Present
 FROM table_name
 WHERE `date` BETWEEN '2012-08-01' AND '2012-08-07' AND
       name = 'arun'

 UNION ALL

 SELECT '002' AS User_id, 'arun' AS name, a.`date`, 0 AS Present
 FROM  (
        SELECT CURDATE() - INTERVAL (a.a + (10 * b.a) + (100 * c.a)) DAY AS date
        FROM (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS b
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS c
       ) a
 WHERE a.date BETWEEN '2012-06-05' AND '2012-06-20';
) a
GROUP BY name, `date`
ORDER BY `date` ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:47:05.227

```
select * from (

    select id, name, date, present
      FROM your_table 
     WHERE your_table.name = 'arun'
     union all
    select (select id from your_table where name = 'arun'), 'arun', all_dates.date, ''
      from (select distinct date from your_table where your_table.name != 'arun')
      left join your_table
        ON all_dates.date = your_table.date
       AND your_table.name = 'arun'
     WHERE your_table.id IS NULL

) subquery
order by date desc
where date between '01-08-2012' and '07-08-2012' 
```

# rational-rsa - 我们可以在 IBM Rational Software Architect v8.0 中安装 IBM Worklight 5.0 吗？如果是，请指导或提供参考链接

> ID：11840433
> 
> 赞同：0
> 
> 时间：2012-08-07T06:29:33.997
> 
> 标签：rational-rsa, ibm-mobilefirst

感谢您的帮助或任何参考做同样的事情。

此外，如果有人安装了 IBM Worklight 来使用 Spring Tool Suite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:37:25.750

不支持将 IBM Worklight Studio 安装到 RSA 8.0.x 中，仅支持 RSA 8.5.x 或更高版本。请注意，仅通过 Installation Manager 支持共同安装（又称“shell 共享”）。因此，在 Eclipse 市场上提供的免费版本 Studio 的开发者版无法安装到 RSA 8.5 中。您必须购买 Worklight 的付费版本，其中包括 Studio 的 IM 安装程序。

另请注意，shell 共享存在限制。有关详细信息，请参阅此白皮书：[https ://www.ibm.com/developerworks/wikis/download/attachments/113606723/mobile.dev.white.paper.pdf](https://www.ibm.com/developerworks/wikis/download/attachments/113606723/mobile.dev.white.paper.pdf)

# java - 如何在检票口中创建元素

> ID：11840439
> 
> 赞同：0
> 
> 时间：2012-08-07T06:30:10.360
> 
> 标签：java, wicket

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:49:37.030

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:54:22.103

您应该考虑使用 Link 组件，您可以将对象传递给目标页面，并用模型包装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T06:39:08.990

你可以写

```
add(new Link(){
public void onClick(){
MyClass newClass = new MyClass(Parameters);
setResponsePage(MyClass);
}
}); 
```

# java - JTable 内容居中对齐

> ID：11840445
> 
> 赞同：2
> 
> 时间：2012-08-07T06:31:08.160
> 
> 标签：java, swing, jtable

我使用 MS Access 数据库作为后端。我有问题。检索后显示在小程序中，内容自动居中对齐，看起来很别扭。我很困惑我的代码的哪一部分导致了这种情况发生。所以，请帮助我诊断问题。

```
public void addTable8(String query8)
{
   SimpleDateFormat formatter8 = new SimpleDateFormat("dd/MM/yyyy");
   try
   {
     Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
     Connection conn8=DriverManager.getConnection("jdbc:odbc:vasantham","","");
     Statement st8=conn8.createStatement();
     ResultSet rs8=st8.executeQuery(query8);
     ResultSetMetaData md8=rs8.getMetaData();
     int cols8=md8.getColumnCount();
     model8=new DefaultTableModel()
     {
       public Class getColumnClass(int col)
       {
          Object o = getValueAt(0, col);
          if(o == null)
             return Object.class;
          else
             return o.getClass();
       }
     };

model8.addColumn("Purpose");
model8.addColumn("Name");
model8.addColumn("Composition");
model8.addColumn("Expiry");
model8.addColumn("Stock");
model8.addColumn("Cost");
model8.addColumn("Cost/Tab");
model8.addColumn("Type");
model8.addColumn("Supplier");
model8.addColumn("Supplier Number");
model8.addColumn("Rack");

table8=new JTable(model8);
table8.setOpaque(true);
table8.setFillsViewportHeight(true);
table8.setBackground(new Color(255,255,208));
table8.getTableHeader().setBackground(new Color(255,228,181));

String[] tabledata8=new String[cols8];
int i=0;

while(rs8.next())
{
 for(i=0;i<cols8;i++)
 {
  if(i==3)
  {   
   Date intr8=(rs8.getDate(i+1));
   tabledata8[i]=formatter8.format(intr8);
  }
  else
   tabledata8[i]=rs8.getObject(i+1).toString();

 }
 model8.addRow(tabledata8);
}

panel8.removeAll();

table8.setDefaultRenderer(String.class, new CustomRenderer());
table8.setRowSelectionAllowed(true);
table8.setColumnSelectionAllowed(true);
table8.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

JScrollPane scroll8 = new JScrollPane(table8); 
panel8.setLayout(new BorderLayout());

panel8.add(scroll8,BorderLayout.CENTER);
frame8.add(panel8,BorderLayout.CENTER);
conn8.close();

 }
  catch(Exception e8)
  {
  e8.printStackTrace();
  }
}

 class CustomRenderer implements TableCellRenderer
 {
public CustomRenderer()
{
  label = new JLabel();
  label.setHorizontalAlignment(JLabel.CENTER);
  label.setOpaque(true);
  targetRow = -1;
  targetCol = -1;
}

public Component getTableCellRendererComponent(JTable table,
Object value, boolean isSelected, boolean hasFocus,
int row, int column)
{
  if(isSelected)
  {
    label.setBackground(table.getSelectionBackground());
    label.setForeground(table.getSelectionForeground());
  }
  else
  {
    label.setBackground(table.getBackground());
    label.setForeground(table.getForeground());
  }
  if(row == targetRow && column == targetCol)
  {
    label.setBackground(new Color(176,196,222));

    label.setFont(table.getFont().deriveFont(Font.BOLD));
  }
  else
  {
    label.setBorder(null);
    label.setFont(table.getFont());
  } 
  label.setText((String)value);
  return label;
}

public void setTargetCell(int row, int col)
{
  targetRow = row;
  targetCol = col;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:35:05.990

可能是`CustomRenderer`构造函数中的这一行？

```
label.setHorizontalAlignment(JLabel.CENTER); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T06:35:53.993

*   您的代码行将列`label.setHorizontalAlignment(JLabel.CENTER);`的`class CustomRenderer implements TableCellRenderer`内容居中到`CENTER`

*   阅读`Renderer and Editor concepts`Oracle 教程

# c# - 如何计算javascript中两个日期时间之间的差异？

> ID：11840446
> 
> 赞同：0
> 
> 时间：2012-08-07T06:31:07.300
> 
> 标签：c#, javascript, telerik

我正在使用 Telerik 控件，我想要两个日期时间变量之间的差异，我该如何计算。

```
var x=9/1/2012 10:20:00 AM;
var y=9/1/2012 09:00:00 AM; 
```

我想要两次将javascript作为数字扔到另一个变量中的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:32:44.973

创建两个[日期](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)类型变量，然后使用`-`运算符计算差异，您将以毫秒为单位获得差异。

```
var first = new Date(2012,8,1,10,20,0,0); 
var second = new Date(2012, 9, 1, 09, 00, 0, 0); 
var difference = (second - first); // difference in milliseconds 
```

这是[**工作演示**](http://jsfiddle.net/KVzGA/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:39:10.727

你应该在这些线上尝试一些东西

```
var a = new Date('9/1/2012 10:20:00 AM');
var b = new Date('9/1/2012 09:00:00 AM');
// a - b  this should give you the diff
var diff = a - b;
alert(diff/1000); // this should be value in seconds i.e 4800 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:34:29.077

看到[这个](https://stackoverflow.com/questions/1968167/difference-between-dates-in-javascript)

基本上，将这两个日期放入 Date 对象中，然后从另一个中减去一个。这会给你以毫秒为单位的差异，你可以从那里工作以获得更大的时间段。

# android - 当我从手机上取下耳机时如何在主屏幕上显示警报对话框

> ID：11840447
> 
> 赞同：1
> 
> 时间：2012-08-07T06:31:23.057
> 
> 标签：android, android-alertdialog

我正在开发应用程序，当用户从手机上卸下耳机时，它的显示警报对话框，当用户按下确定按钮时，它开始新的活动。我的代码活动代码`

```
package com.gabriel.activity;

import java.util.HashMap;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.content.res.Resources;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore.Audio;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.RemoteViews;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ToggleButton;

import com.gabriel.database.AlarmCore;
import com.gabriel.database.ContactObject;
import com.gabriel.database.FBFriendObject;
import com.gabriel.utility.GBAlarmManager;
import com.gabriel.utility.GBConstants;

public class HomeActivity extends Activity implements OnClickListener {

    private TextView _SecurityLevel, _AlarmType, _Trigger;
    static TextView ActiveText;
    private HashMap<String, String> _SettingMap;
    private SharedPreferences _Preferences;
    private ToggleButton _AlarmButton;
    private ImageView _GabrielIconView;
    private Resources _Resources;
    private String _TriggerBy;
    private Context context;
    private GBAlarmManager alarmManager;
    private AlarmCore alarmCore;
    private boolean isTriggered = false;
    private boolean isHeadPhoneAttached = false;
    private Intent serviceIntent;
    private GabrielApplication application;
    private LocationManager locationManager;
    private GpsLocationListener gpsLocationListener;
    private NetworkLocationListener networkLocationListener;

    private ContactObject contactObject;
    private FBFriendObject fBFriendObject;
    /*private static final CharSequence Gabriel = "Gabriel";
    private static final CharSequence HeadphoneDeatched = "Headphone Deattached";
*/
    /*
     * registerObject = new RegisterObject(this); countryObject = new
     * CountryObject(context); registerCore =
     * registerObject.getRegistrationInfo();
     */

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 0; // in
                                                                        // Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 0; // in
                                                                // Milliseconds
    private static final int SUCCESS_DIALOG = 200;

    private static final int Headphone_DIALOG = 250;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);
        context = this;
        application = (GabrielApplication) getApplication();

        contactObject = new ContactObject(this);
        contactObject.getActiveContacts();

        fBFriendObject = new FBFriendObject(this);
        fBFriendObject.getActiveFriends();

        ActiveText = (TextView) findViewById(R.id.ActiveText);
        _SecurityLevel = (TextView) findViewById(R.id.securityLevelText);
        _AlarmType = (TextView) findViewById(R.id.AlarmTypeText);
        _Trigger = (TextView) findViewById(R.id.TriggerText);
        _AlarmButton = (ToggleButton) findViewById(R.id.AlarmTrigger);
        _GabrielIconView = (ImageView) findViewById(R.id.gabrielIcon);

        _Resources = getResources();
        alarmManager = new GBAlarmManager(context);
        _AlarmButton.setOnClickListener(this);
        _GabrielIconView.setOnClickListener(this);

        // ContactList = (ListView) findViewById(R.id.contactList);

        if (!application.isServiceStarted()) {
            serviceIntent = new Intent(GBConstants.GABRIEL_SERVICE);
            startService(serviceIntent);
        }
        initHeadPhone();

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        gpsLocationListener = new GpsLocationListener();
        networkLocationListener = new NetworkLocationListener();

        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, networkLocationListener);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, gpsLocationListener);
        application.setCurrentLocation(getBestLocation());
    }

    @Override
    protected void onResume() {
            super.onResume();
            if (application.isMessageSent()) {
                    application.setMessageSent(false);
                    showDialog(SUCCESS_DIALOG);
            }
            initSettings();
    }

    private void initSettings() {
        _SettingMap = GBConstants.getSettingsMap();
        _Preferences = getSharedPreferences(GBConstants.GABRIEL_PREF,
                Context.MODE_PRIVATE);
        _SecurityLevel.setText(_Preferences.getString(
                GBConstants.SECURITY_LEVEL,
                _SettingMap.get(GBConstants.SECURITY_LEVEL)));
        _AlarmType.setText(_Preferences.getString(GBConstants.ALARM,
                _SettingMap.get(GBConstants.ALARM)));
        _Trigger.setText(_Preferences.getString(GBConstants.TRIGGER_OPTIONS,
                _SettingMap.get(GBConstants.TRIGGER_OPTIONS)));
        _TriggerBy = _Trigger.getText().toString().trim();
        if (!isTriggered) {
            setGabrielIconRed();
        }
    }

    @Override
    public void onBackPressed() {
        return;
    }

    private void setGabrielIconRed() {
        if (_TriggerBy.equals(GBConstants.PANIC_BUTTON)) {
            _GabrielIconView.setImageDrawable(_Resources
                    .getDrawable(R.drawable.panic_button_black));
        } else {
            _GabrielIconView.setImageDrawable(_Resources
                    .getDrawable(R.drawable.black));
        }
        isTriggered = false;
        _AlarmButton.setChecked(false);
    }

    private void setGabrielIconGreen() {
        if (_TriggerBy.equals(GBConstants.PANIC_BUTTON)) {
            _GabrielIconView.setImageDrawable(_Resources
                    .getDrawable(R.drawable.panic_button_green));
        } else {
            _GabrielIconView.setImageDrawable(_Resources
                    .getDrawable(R.drawable.green));
        }
        isTriggered = true;
    }

    @Override
    public void onClick(View v) {
        ToggleButton triggerBtn;
        switch (v.getId()) {

        case R.id.AlarmTrigger:
            triggerBtn = (ToggleButton) v;
            if (triggerBtn.isChecked()) {
                ActiveText.setText("Activate");
                if (_TriggerBy.equals(GBConstants.HEADPHONE_BUTTON)) {
                    if (contactObject.getActiveContacts().isEmpty() && (fBFriendObject.getActiveFriends().isEmpty())) {
                        ActiveText.setText("Deactivate");
                        _AlarmButton.setChecked(false);
                        Toast.makeText(this, "PLEASE ADD CONTACT/FRIEND",
                                Toast.LENGTH_LONG).show();
                        return;
                    }

                    if (!isHeadPhoneAttached) {
                        ActiveText.setText("Deactivate");
                        _AlarmButton.setChecked(false);
                        Toast.makeText(context, "Please Attached Your Headphones.",
                                Toast.LENGTH_SHORT).show();
                        return;
                    }
                }
                setGabrielIconGreen();
                /*startService(new Intent(this, MyService.class));*/

            } else {
                ActiveText.setText("Deactivate");
                setGabrielIconRed();
            }
            break;

        case R.id.gabrielIcon:
        if (isTriggered && _TriggerBy.equals(GBConstants.PANIC_BUTTON)) {
                if (contactObject.getActiveContacts().isEmpty() && (fBFriendObject.getActiveFriends().isEmpty())) {
                Toast.makeText(this, "PLEASE ADD CONTACT/FRIEND",
                            Toast.LENGTH_LONG).show();
                    return;
                /*}
                if(aactvity.toggleFacebook.isChecked()){
                        core.isFacebookOn();
                }
                else{
                Toast.makeText(this, "FACEBOOK IS NOT CONNECTED",Toast.LENGTH_LONG).show();
                return;
                }   
                        */
                }
                    callTriggerActivity();
                }
                default:
            break;
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
    }

    @Override
    public void finish() {
        super.finish();
        locationManager.removeUpdates(gpsLocationListener);
        locationManager.removeUpdates(networkLocationListener);
    }

    private void callTriggerActivity() {
        Intent intent = new Intent(context, TriggerActivity.class);
        alarmCore = alarmManager.loadAlarmSettings(_AlarmType.getText()
                .toString().trim());
        intent.putExtra(getString(R.string.alarmObj), alarmCore);
        startActivity(intent);

        isTriggered = false;

    }

    public void initHeadPhone() {
        registerReceiver(new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {

                if (intent.hasExtra("state")) {
                    int state = intent.getIntExtra("state", 0);
                    if (isHeadPhoneAttached && state == 0) {
                        isHeadPhoneAttached = false;
                        if (isTriggered) {
                            if (contactObject.getActiveContacts().isEmpty()) {
                                Toast.makeText(context,
                                        "PLEASE ADD CONTACT/FRIEND",
                                        Toast.LENGTH_LONG).show();
                            } else {
                                /* createNotification();*/
                                /*callTriggerActivity();*/
                                showDialog(Headphone_DIALOG);
                            }
                        }
                    } else if (!isHeadPhoneAttached && state == 1) {
                        isHeadPhoneAttached = true;
                    }
                }
            }
        }, new IntentFilter(Intent.ACTION_HEADSET_PLUG));
    }

    /*public void createNotification() {

        NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        for (int i = 0; i <= 10; i++) {

            Notification notification = new Notification(R.drawable.app_icon,
                    HeadphoneDeatched, System.currentTimeMillis());
            Intent notifyIntent = new Intent(Intent.ACTION_MAIN);
            notifyIntent.setClass(getApplicationContext(), Main.class);
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.setClass(this,TriggerActivity.class);
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            PendingIntent pendingIntent=PendingIntent.getActivity(this, 0, intent, 0);
            notification.setLatestEventInfo(this, Gabriel, HeadphoneDeatched, pendingIntent);
            PendingIntent activity = PendingIntent.getActivity(this, 0, intent,
                    0);
            notification.defaults |= Notification.DEFAULT_SOUND;
            notification.sound = Uri.withAppendedPath(Audio.Media.INTERNAL_CONTENT_URI, "6");
            notification.contentIntent = activity;
            notificationManager.notify(0, notification);

            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }
        }
    }*/
    private class GpsLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            application.setCurrentLocation(location);
        }

        public void onStatusChanged(String s, int i, Bundle b) {

        }

        public void onProviderDisabled(String s) {

        }

        public void onProviderEnabled(String s) {

        }

    }

    private class NetworkLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            application.setCurrentLocation(location);
        }

        public void onStatusChanged(String s, int i, Bundle b) {

        }

        public void onProviderDisabled(String s) {

        }

        public void onProviderEnabled(String s) {

        }

    }

    private Location getBestLocation() {
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        String strLocationProvider = locationManager.getBestProvider(criteria,
                true);
        if (strLocationProvider == null) {
            strLocationProvider = LocationManager.GPS_PROVIDER;
        }
        return locationManager.getLastKnownLocation(strLocationProvider);
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        Dialog dialog = null;
        AlertDialog.Builder builder = new Builder(context);

        switch (id) {
        case SUCCESS_DIALOG:
            builder.setTitle(getString(R.string.app_name));
            builder.setMessage("Panic messages have been sent with your position.");
            builder.setPositiveButton("Continue", null);
            builder.setCancelable(false);
            dialog = builder.create();
            break;

        case Headphone_DIALOG:
        /*  dialog.setContentView(R.layout.home); */
            builder.setTitle(getString(R.string.app_name));
            builder.setMessage("Headphone Is Deattached The Press Ok To Sent Panic Message.");
            builder.setPositiveButton("Ok",new positiveButtonListener());
            builder.setCancelable(false);
            dialog = builder.create();
            break;
        default:
            break;
        }
        return dialog;
    }
    private class positiveButtonListener implements
    android.content.DialogInterface.OnClickListener {

@Override
public void onClick(DialogInterface dialog, int which) {
    callTriggerActivity();
}
}

} 
```

我更改了 manifest.xml 文件。`

```
<activity
            android:name="HomeActivity"
            android:screenOrientation="portrait"
             android:launchMode="singleInstance"
             android:taskAffinity=""
             android:theme="@android:style/Theme.Dialog"

            >
        </activity> 
```

`用于在Android手机的本机屏幕上显示警报对话框。但它不起作用。当我卸下耳机时，主屏幕上没有对话框。当我按下应用程序图标时，它在应用程序中显示对话框。请任何人给我一些想法。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:46:29.147

对于您的问题，您必须注册一个接收器**`ACTION_HEADSET_PLUG intent`**并从中创建一个`receiver class to catch that broadcast`您可以实现自己的逻辑的接收器。

[检查此答案](https://stackoverflow.com/a/6366238/582571)以获取更多参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:49:28.207

我想在使用耳机时，您正在寻找广播接收器。它们可以帮助您对已注册的事件进行实时事件处理。看看[这个帖子](https://stackoverflow.com/questions/4202046/which-permission-required-in-order-to-get-action-headset-plug-inside-broadcast-r)。

# postgresql - PostgreSQL：循环直到条件为真

> ID：11840449
> 
> 赞同：6
> 
> 时间：2012-08-07T06:31:31.760
> 
> 标签：postgresql, loops, while-loop, postgresql-9.1

我正在尝试编写一个查询，该查询从指定值开始“循环”数据库，直到条件为真。例如，假设我在 TABLE 示例中有以下条目：

```
id, parent, cond
1,        , True
2, 1      , False
3, 1      , False
4, 2      , False
... ... ... 
```

我想要一个以 4 作为输入的查询（例如），并将返回 2 和 1 的值。查询匹配 id 的过程，如果 cond==False，将查看父级（id = 2 ）。由于第二行中的 cond = False，因此将选择“父”ID (1)。现在看第一行，因为 cond=True，LOOP 结束并返回 1 和 2。

我知道查询

```
SELECT parent FROM example WHERE id = 4; 
```

将产生父 id 2。

所以我徒劳地尝试创建一个循环：

```
WHILE (SELECT cond FROM example) = False
LOOP SELECT parent FROM example WHERE id = 4 
END LOOP; 
```

首先，这会产生一个错误（“'while' 处或附近的语法错误”）。其次，我不知道如何在每次迭代后更新“id”。

在像 Python 这样的编程语言中，我可能会使用一个初始化为 4 的变量，然后在每次迭代时对其进行更新……不知道如何在 Postgres 中进行等效操作。

如果您有任何问题或需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T07:07:55.710

您对 SQL 的想法是错误的。不要考虑循环、条件和变量；相反，请考虑如何描述您想要的数据。棘手的部分是您希望查询引用它自己的结果，这就是[递归 CTE](http://www.postgresql.org/docs/current/static/queries-with.html)的用途：

> optional`RECURSIVE`修饰符`WITH`从单纯的语法便利变成了一种功能，可以完成标准 SQL 中不可能完成的事情。使用`RECURSIVE`，`WITH`查询可以引用它自己的输出。

你正在寻找这样的东西：

```
with recursive path as (
    select id, parent from T where id = 4
    union all
    select t.id, t.parent from T t join path p on t.id = p.parent
)
select id, parent
from path 
```

这会给你这个：

```
 id | parent 
----+--------
  4 |      2
  2 |      1
  1 | 
```

然后您可以将它们重新组合到数据库之外的更链表（或任何适合您的客户端语言）的路径中。当然，您不必包括`parent`在内，但包括在内将帮助您修复“指针”。

# macos - 使用 BorderStyle bsNONE 移动表单？

> ID：11840452
> 
> 赞同：2
> 
> 时间：2012-08-07T06:31:36.150
> 
> 标签：macos, delphi, delphi-xe2, firemonkey

`BorderStyle`如果设置`bsNONE`为边框样式，如何移动表单？在火猴 MAC OS X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:58:56.483

如果没有表单标题，您需要滚动自己的方法让用户移动表单。

要在代码中移动表单，您可以设置表单的 Left 和 Top 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T11:48:16.070

您可以在 HD FireMonkey XE4 桌面应用程序中执行此操作：

```
var
Form1: TForm1;
isDraging: boolean;
X0, Y0: single;

implementation

{$R *.fmx}

procedure TForm1.FormMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Single);
begin
  isDraging := True;
  X0 := X;
  Y0 := Y;
end;

procedure TForm1.FormMouseMove(Sender: TObject; Shift: TShiftState;
  X, Y: Single);
begin
  if isDraging then
  begin
    Form1.Left := Trunc(Form1.Left + X - X0);
    Form1.Top := Trunc(Form1.Top + Y - Y0);
  end;
end;

procedure TForm1.FormMouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Single);
begin
  isDraging := False;
end; 
```

在 Windows 7 和 Mac OS X Lion 上测试并运行。

# iphone - 如何在 iPhone 应用程序中设置 UIFont 粗体

> ID：11840456
> 
> 赞同：0
> 
> 时间：2012-08-07T06:31:54.913
> 
> 标签：iphone, xcode, uilabel

我想将字体设置`UILabel`为**helvetica 粗体**，但**它只显示普通字体。**

我正在使用下面的代码

```
UILabel *labelHeadingOne = [[UILabel alloc] initWithFrame:CGRectMake(22,260, 504, 20)];
labelHeadingOne.backgroundColor = [UIColor clearColor];

labelHeadingOne.font=[UIFont fontWithName:@"Helvetica" size:16];

labelHeadingOne.text=@"Pre-emergent herbicide with residual control for warm-season turf"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T06:34:55.723

您可以使用字体名称`Helvetica-Bold`。查看[http://iosfonts.com/](http://iosfonts.com/)获取完整列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T06:36:40.577

用这个 ：

```
 labelHeadingOne.font=[UIFont fontWithName:@"Helvetica-Bold" size:16]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-09T10:51:04.077

用这个;

```
[UIFont boldSystemFontOfSize:16]; 
```

# jquery - Rails 3.2 Bootstrap 模式对话框

> ID：11840458
> 
> 赞同：1
> 
> 时间：2012-08-07T06:32:05.677
> 
> 标签：jquery, ruby-on-rails, dialog, twitter-bootstrap, modal-dialog

我对 BOOTSTRAP 和 RAILS 3.2 有疑问，我无法显示我的表单。

index.html.erb

```
<%= link_to 'New Country', new_backend_country_path, class:"btn btn-primary", :id => 'create_country' %> 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require backend/bootstrap-modal.js
//= require rails.validations

    $('#create_country').click(function(e) {
        e.preventDefault();
        var href = $(e.target).attr('href');
        if (href.indexOf('#') == 0) {
            $(href).modal('open');
        } else {
            $.get(href, function(data) {
                $('<div class="modal fade" >' + data  + '</div>').modal();
            });
        }
    }); 
```

新的.html.erb

```
<div class="modal hide fade" id="modal-window">
  <div class="modal-header">
    <a href="#" class="close">×</a>
    <h6>Loading...</h6>
  </div>

  <div class="modal-body center">
    <%= render 'form' %>
  </div>

  <div class="modal-footer">&nbsp;
  </div>
</div> 
```

_form.html.erb

```
<%= form_for([:backend, @country], :remote => true) do |f| %>

  <% if @country.errors.any? %>
            <% @country.errors.full_messages.each do |msg| %>
                <h4 class="alert_error"><%= msg %></h4>
            <% end %>
       <br>
  <% end %>

  <fieldset>
    <%= f.label :name %><br />
    <%= f.text_field :name, :class =>"upper" %>
  </fieldset>
  <fieldset>
    <%= f.label :code %><br />
    <%= f.text_field :code %>
  </fieldset>

    <footer>
        <div class="submit_link">
          <% if @country.new_record? %>
              <%= f.submit "Create", class:"alt_btn" %>
          <% else %>
              <%= f.submit "Update", class:"alt_btn" %>
          <% end %>
            <%= submit_tag "Cancel" %>
        </div>
    </footer>

<% end %> 
```

我的表单没有显示并进入 MODAL DIALOG 它为我提供了带有菜单和页脚的整个页面。

谢谢您的帮助

# jquery - Jquery - 使用输入键提交表单

> ID：11840459
> 
> 赞同：0
> 
> 时间：2012-08-07T06:32:23.523
> 
> 标签：jquery, html

如何使用 Enter 键提交表单。没有提交按钮？

我测试了下面的代码，但它不起作用。

```
$("input").bind("keydown", function(event) {
   console.log('came');
   var keycode = (event.keyCode ? event.keyCode : (event.which ? event.which : event.charCode));
   if (keycode == 13) { // keycode for enter key
     document.getElementById('submitButton').click();
     // $('#frmAddPurchaseord').submit();
     return false;
     } else  {
     return true;
     }
    }); 
 <form name="frmAddPurchaseord" id="frmAddPurchaseord" action="" method="post">
   //Submit button
  <input id="submitButton" type="image" name="submit"  src="<?=$gCommonImagePath?>btn_save.png" />
 </form> 
```

请给我建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T06:35:34.927

**把事情简单化：**

```
<form name="frmAddPurchaseord" id="frmAddPurchaseord" action="" method="post">
      <input type="text" name="name" onkeypress="if(event.keyCode==13) {this.submit();}" />
</form> 
```

**使用 jquery：**

```
$("input").keypress(function(event) {
  if (event.which == 13) {
        event.preventDefault();
        $("#frmAddPurchaseord").submit();
    }
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:36:45.393

如果你想在每个回车键上提交表单，你可以将事件绑定到文档对象，你可以使用跨浏览器`which`的 jQuery 对象的属性：`event`

```
$(document).on("keyup", function(event) {
   if (event.which == 13) { 
     $('form').submit();
     event.preventDefault()
   } 
}); 
```

如果没有，您可以尝试：

```
$('input').on("keyup", function(event) {
   if (event.which == 13) { 
     $('form').submit();
     event.preventDefault()
   } 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T06:34:38.530

试试这个：

```
$("#frmAddPurchaseord").submit(); /* the id of the form */ 
```

**jQuery：**

```
 $("input").bind("keydown", function(event) {
      console.log('came');
      var keycode = (event.keyCode ? event.keyCode : (event.which ? event.which : event.charCode));
      if (keycode == 13) { // keycode for enter key
         document.getElementById('buttonId').click();
              $("#frmAddPurchaseord").submit();
         return false;
      } else  {
         return true;
      }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T06:36:13.133

尝试：

```
$("input").keypress(function(event) {
  if (event.which == 13) {
        event.preventDefault();
        $("#frmAddPurchaseord").submit();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T06:37:29.000

```
<form name="frmAddPurchaseord" id="frmAddPurchaseord" action="" method="post" onkeypress="if(event.keyCode==13) {this.submit();}" >
</form> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T06:37:40.527

试试这个。 [演示](http://jsfiddle.net/zxrCg/)

```
 <form name="frmAddPurchaseord" id="frmAddPurchaseord" action="" method="post">
    <input id="submitButton" type="text" name="submit"  src="<?=$gCommonImagePath?>btn_save.png" />

 </form> 
```

jQuery`.submit()`

```
$('#frmAddPurchaseord').submit(function(e){
    e.preventDefault();
    alert($('#submitButton').val());

}); 
```

# linux - select() api 返回正值，但从串行端口读取时触发错误

> ID：11840461
> 
> 赞同：0
> 
> 时间：2012-08-07T06:32:39.857
> 
> 标签：linux, linux-device-driver

我正在 Linux 上开发串行端口应用程序，当 select () api 检查等待句柄上的数据时，一旦数据到达端口，它就会返回正值，但 read() api 调用返回 -1，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:31:51.873

以下是手册页所说的`select`：

> select() 和 pselect() 允许程序监视多个文件描述符，等待一个或多个文件描述符“准备好”用于某种类型的 I/O 操作（例如，可能的输入）。**如果可以在没有阻塞的情况下执行相应的 I/O 操作（例如 read(2)），则认为文件描述符已准备就绪。**

如果文件描述符（例如，为网络套接字接收到的 RST 段）上存在错误情况，则通知当前阻塞的进程的唯一方法`select`是使该描述符为 IO 做好准备。随后的读/写函数将返回一个错误，以便应用程序可以处理它。

此行为看起来符合`select`承诺 - 如果您可以在其上执行*非阻塞*IO，则将描述符标记为准备就绪（但是，在某些情况下使用网络套接字，当描述符被标记为准备好读取时，但随后的读取操作块）。您不会在读取时阻止 - 立即返回错误。

至于 的返回状态`select`，它应该只返回所有集合中文件描述符的“就绪事件”的数量。如果 select 本身失败（被系统调用中断，例如 - `errno == EINTR`），它可能是负面的，但当正在监视的描述符上发生一些错误时则不会。

# c# - 将不同的图片格式（jpg、gif、png等）转换为TIFF格式

> ID：11840462
> 
> 赞同：20
> 
> 时间：2012-08-07T06:32:41.750
> 
> 标签：c#, asp.net, image, tiff

我正在通过 OCR 从图像中读取文本。它只支持 TIFF 格式的图像。

所以，我需要将其他格式转换为 TIFF 格式。可以做到吗？请通过提供一些参考来帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-07T06:36:00.420

如果`Image`在 .NET 中创建对象，可以将其保存为 TIFF。它是您可以使用的众多[ImageFormat](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat.aspx)选择之一。

例子：

```
var png = Image.FromFile("some.png");
png.Save("a.tiff", ImageFormat.Tiff); 
```

您需要将`System.Drawing`程序集包含在您的项目中。该程序集将为您提供许多图像处理功能。希望有帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-08-21T20:26:51.067

> **简介注：**
> 
> 1.  这个答案涵盖了赏金问题；即：我们如何将多个文件转换为 1 个 tiff？例如，假设有 pdf、jpeg、png，我想用它们创建 1 个 tiff？
> 2.  在这个答案中，我使用[https://imagemagick.org/index.php](https://imagemagick.org/index.php)的 .net 实现进行图像处理，并使用 Ghostscript 帮助读取 AI/EPS/PDF/PS 文件，以便我们可以将其转换为图像文件，两者都是可信且官方来源。
> 3.  在我回答了这个问题后，我在电子邮件中收到了一些额外的问题，询问其他合并选项，因此我扩展了我的答案。

IMO 有两个步骤可以实现您的目标：

1.  安装pdf转换所需的工具
2.  从源中获取所有图像，包括 pdf 格式的文件，并将它们合并到一个 tiff 文件中。

### 1.安装帮助Pdf到图像转换的工具：

> 仅当您打算转换 AI/EPS/PDF/PS 文件格式时才需要第 1 步。否则直接跳到第 2 步。

为了使将 pdf 转换为任何图像格式成为可能，我们需要一个可以读取 pdf 文件的库，并且我们需要一个将其转换为图像类型的工具。为此，我们需要安装[Ghostscript](https://www.ghostscript.com/download/gsdnld.html)（GNU Affero 通用公共许可证）。

之后，我们需要在 Visual Studio 中安装[ImageMagick.net](https://github.com/dlemstra/Magick.NET/blob/master/docs/Readme.md) for .net，nuget [link](https://www.nuget.org/packages/Magick.NET-Q16-x86/)。

到目前为止，一切都很好。

### 2.代码部分

第二步和最后一步是我们需要从文件夹位置读取文件（png、jpg、bmp、pdf 等）并将每个文件添加到，`MagickImageCollection`然后我们有几个选项可以合并使用`AppendHorizontally`、或多页 Tiff。ImageMagick 有很多功能，比如调整大小、分辨率等，这只是演示合并功能的示例：`AppendVertically``Montage`

```
public static void MergeImage(string src, string dest, MergeType type = MergeType.MultiplePage)
{
    var files = new DirectoryInfo(src).GetFiles();

    using (var images = new MagickImageCollection())
    {
        foreach (var file in files)
        {
            var image = new MagickImage(file)
            {
                Format = MagickFormat.Tif,
                Depth = 8,
            };
            images.Add(image);
        }

        switch (type)
        {
            case MergeType.Vertical:
                using (var result = images.AppendVertically())
                {
                    result.AdaptiveResize(new MagickGeometry(){Height = 600, Width = 800});
                    result.Write(dest);
                }
                break;
            case MergeType.Horizontal:
                using (var result = images.AppendHorizontally())
                {
                    result.AdaptiveResize(new MagickGeometry(){Height = 600, Width = 800});
                    result.Write(dest);
                }
                break;
            case MergeType.Montage:
                var settings = new MontageSettings
                {
                    BackgroundColor = new MagickColor("#FFF"),
                    Geometry = new MagickGeometry("1x1<")
                };

                using (var result = images.Montage(settings))
                {
                    result.Write(dest);
                }
                break;
            case MergeType.MultiplePage:
                images.Write(dest);
                break;
            default:
                throw new ArgumentOutOfRangeException(nameof(type), type, "Un-support choice");
        }

        images.Dispose();
    }
}

public enum MergeType
{
    MultiplePage,
    Vertical,
    Horizontal,
    Montage
} 
```

运行代码

```
public static void Main(string[] args)
{
    var src = @"C:\temp\Images";
    var dest1 = @"C:\temp\Output\MultiplePage.tiff";
    var dest2 = @"C:\temp\Output\Vertical.tiff";
    var dest3 = @"C:\temp\Output\Horizontal.tiff";
    var dest4 = @"C:\temp\Output\Montage.tiff";

    MergeImage(src, dest1);
    MergeImage(src, dest2, MergeType.Vertical);
    MergeImage(src, dest3, MergeType.Horizontal);
    MergeImage(src, dest4, MergeType.Montage);
} 
```

这是 C:\temp\Images 中的 4 个输入文件：

[![在此处输入图像描述](../Images/2df4c2e6c6705374abc8429f317f41f4.png)](https://i.stack.imgur.com/gCcy8m.png) [![在此处输入图像描述](../Images/04ade3b3ed814cb42b7ec0e4db82177b.png)](https://i.stack.imgur.com/tMjszm.jpg) [![在此处输入图像描述](../Images/032489324cea8080223b2516509515fa.png)](https://i.stack.imgur.com/CSX4zm.png) [![在此处输入图像描述](../Images/70076c738973f8f9d69fceae4e4ffed7.png)](https://i.stack.imgur.com/poJVRm.jpg)

运行代码后，我们在 C:\temp\Output 下得到 4 个新文件，如下所示：

[![在此处输入图像描述](../Images/cb0747fa640f297d623c33e8ff17b62a.png)](https://i.stack.imgur.com/nc0nj.png) 4 页多页 Tiff

[![在此处输入图像描述](../Images/da415ecc9c8e0755c18b8bff628e4f57.png)](https://i.stack.imgur.com/mXP3v.jpg) 4 图像垂直合并

[![在此处输入图像描述](../Images/96a613eb5854929eef74f1e577d11ae4.png)](https://i.stack.imgur.com/R63U3.jpg) 4 图像水平合并

[![在此处输入图像描述](../Images/feec470b9783ac1265b6863310e9a03a.png)](https://i.stack.imgur.com/MLxOgm.jpg) 4 图像蒙太奇合并

> **最后说明：**
> 
> 1.  可以使用 System.Drawing 将多个图像合并到 tiff；并使用 System.Drawing.Imaging；不使用 ImageMagick，但 pdf 确实需要第三方转换库或工具，因此我将 Ghostscript 和 ImageMagick 用于 C#。
> 2.  ImageMagick 具有许多功能，因此您可以更改输出文件的分辨率、大小等。它是公认的库。

> 免责声明：此答案的一部分取自我的个人网站[https://itbackyard.com/how-to-convert-ai-eps-pdf-ps-to-image-file/](https://itbackyard.com/how-to-convert-ai-eps-pdf-ps-to-image-file/)以及 github 的源代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-19T07:05:36.773

以 tif 格式隐藏图像。在下面的示例中，将图像转换并设置为文本框。在文本框中看到图像是 (.tif 格式)。此源代码正在工作。

```
private void btn_Convert(object sender, EventArgs e)
    {
        string newName = System.IO.Path.GetFileNameWithoutExtension(CurrentFile);
        newName = newName + ".tif";
        try
        {
            img.Save(newName, ImageFormat.Tiff);
        }
        catch (Exception ex)
        {
            string error = ee.Message.ToString();
            MessageBox.Show(MessageBoxIcon.Error);

        }
        textBox2.Text = System.IO.Path.GetFullPath(newName.ToString());
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-21T22:06:21.187

ImageMagick 命令行可以轻松做到这一点。它在大多数 Linux 系统上提供，也可用于 Mac 或 Windows。见[https://imagemagick.org/script/download.php](https://imagemagick.org/script/download.php)

```
convert image.suffix -compress XXX image.tiff 
```

或者您可以使用处理整个文件夹的文件

```
mogrify -format tiff -path path/to/output_directory * 
```

ImageMagick 支持将多个图像组合成一个多页 TIFF。图像可以是混合类型，甚至包括 PDF。

```
convert image1.suffix1 image2.suffix2 ... -compress XXX imageN.suffixN output.tiff 
```

您可以选择多种压缩格式或不压缩。

看

[https://imagemagick.org/script/command-line-processing.php](https://imagemagick.org/script/command-line-processing.php)

[https://imagemagick.org/Usage/basics/](https://imagemagick.org/Usage/basics/)

[https://imagemagick.org/Usage/basics/#mogrify](https://imagemagick.org/Usage/basics/#mogrify)

[https://imagemagick.org/script/command-line-options.php#compress](https://imagemagick.org/script/command-line-options.php#compress)

或者，您可以将 Magick.Net 用于 C# 接口。见[https://github.com/dlemstra/Magick.NET](https://github.com/dlemstra/Magick.NET)

ImageMagick 主页位于[https://imagemagick.org](https://imagemagick.org)。

支持的格式列在[https://imagemagick.org/script/formats.php](https://imagemagick.org/script/formats.php)

您可以在同一命令行中轻松处理图像以调整它们的大小、转换为灰度、过滤（锐化）、阈值等。

看

[https://imagemagick.org/Usage/](https://imagemagick.org/Usage/)

[https://imagemagick.org/Usage/reference.html](https://imagemagick.org/Usage/reference.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-03T15:14:13.873

我用 jpg、bmp、png 和 gif 对此进行了测试。适用于 tiff 的单页和多页创建。将其传递给文件的完整路径名。希望它可以帮助某人。（摘自 MSDN）

```
public static string[] ConvertJpegToTiff(string[] fileNames, bool isMultipage)
    {
        EncoderParameters encoderParams = new EncoderParameters(1);
        ImageCodecInfo tiffCodecInfo = ImageCodecInfo.GetImageEncoders()
            .First(ie => ie.MimeType == "image/tiff");

        string[] tiffPaths = null;
        if (isMultipage)
        {
            tiffPaths = new string[1];
            System.Drawing.Image tiffImg = null;
            try
            {
                for (int i = 0; i < fileNames.Length; i++)
                {
                    if (i == 0)
                    {
                        tiffPaths[i] = String.Format("{0}\\{1}.tif",
                            Path.GetDirectoryName(fileNames[i]),
                            Path.GetFileNameWithoutExtension(fileNames[i]));

                        // Initialize the first frame of multipage tiff.
                        tiffImg = System.Drawing.Image.FromFile(fileNames[i]);
                        encoderParams.Param[0] = new EncoderParameter(
                            System.Drawing.Imaging.Encoder.SaveFlag, (long)EncoderValue.MultiFrame);
                        tiffImg.Save(tiffPaths[i], tiffCodecInfo, encoderParams);
                    }
                    else
                    {
                        // Add additional frames.
                        encoderParams.Param[0] = new EncoderParameter(
                            System.Drawing.Imaging.Encoder.SaveFlag, (long)EncoderValue.FrameDimensionPage);
                        using (System.Drawing.Image frame = System.Drawing.Image.FromFile(fileNames[i]))
                        {
                            tiffImg.SaveAdd(frame, encoderParams);
                        }
                    }

                    if (i == fileNames.Length - 1)
                    {
                        // When it is the last frame, flush the resources and closing.
                        encoderParams.Param[0] = new EncoderParameter(
                            System.Drawing.Imaging.Encoder.SaveFlag, (long)EncoderValue.Flush);
                        tiffImg.SaveAdd(encoderParams);
                    }
                }
            }
            finally
            {
                if (tiffImg != null)
                {
                    tiffImg.Dispose();
                    tiffImg = null;
                }
            }
        }
        else
        {
            tiffPaths = new string[fileNames.Length];

            for (int i = 0; i < fileNames.Length; i++)
            {
                tiffPaths[i] = String.Format("{0}\\{1}.tif",
                    Path.GetDirectoryName(fileNames[i]),
                    Path.GetFileNameWithoutExtension(fileNames[i]));

                // Save as individual tiff files.
                using (System.Drawing.Image tiffImg = System.Drawing.Image.FromFile(fileNames[i]))
                {
                    tiffImg.Save(tiffPaths[i], ImageFormat.Tiff);
                }
            }
        }

        return tiffPaths;
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-15T18:57:12.943

这就是我转换上传到网站的图像的方式。对其进行了更改，使其输出 Tiff 文件。该方法输入和输出一个字节数组，因此可以很容易地以多种方式使用。但是你可以很容易地修改它。

```
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;

public byte[] ConvertImageToTiff(byte[] SourceImage)
{
    //create a new byte array
    byte[] bin = new byte[0];

    //check if there is data
    if (SourceImage == null || SourceImage.Length == 0)
    {
        return bin;
    }

    //convert the byte array to a bitmap
    Bitmap NewImage;
    using (MemoryStream ms = new MemoryStream(SourceImage))
    {
        NewImage = new Bitmap(ms);
    }

    //set some properties
    Bitmap TempImage = new Bitmap(NewImage.Width, NewImage.Height);
    using (Graphics g = Graphics.FromImage(TempImage))
    {
        g.CompositingMode = CompositingMode.SourceCopy;
        g.CompositingQuality = CompositingQuality.HighQuality;
        g.SmoothingMode = SmoothingMode.HighQuality;
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;
        g.PixelOffsetMode = PixelOffsetMode.HighQuality;
        g.DrawImage(NewImage, 0, 0, NewImage.Width, NewImage.Height);
    }
    NewImage = TempImage;

    //save the image to a stream
    using (MemoryStream ms = new MemoryStream())
    {
        EncoderParameters encoderParameters = new EncoderParameters(1);
        encoderParameters.Param[0] = new EncoderParameter(Encoder.Quality, 80L);

        NewImage.Save(ms, GetEncoderInfo("image/tiff"), encoderParameters);
        bin = ms.ToArray();
    }

    //cleanup
    NewImage.Dispose();
    TempImage.Dispose();

    //return data
    return bin;
}

//get the correct encoder info
public ImageCodecInfo GetEncoderInfo(string MimeType)
{
    ImageCodecInfo[] encoders = ImageCodecInfo.GetImageEncoders();
    for (int j = 0; j < encoders.Length; ++j)
    {
        if (encoders[j].MimeType.ToLower() == MimeType.ToLower())
            return encoders[j];
    }
    return null;
} 
```

去测试

```
var oldImage = File.ReadAllBytes(Server.MapPath("OldImage.jpg"));
var newImage = ConvertImageToTiff(oldImage);
File.WriteAllBytes(Server.MapPath("NewImage.tiff"), newImage); 
```

# linux - 用于登录网站并下载文件的 Bash 脚本

> ID：11840465
> 
> 赞同：2
> 
> 时间：2012-08-07T06:32:47.893
> 
> 标签：linux, bash

我有点坚持我的 bash 脚本。我需要它登录到一个基于 https 的网站......它需要使用用户名和密码登录，然后它需要找到一个特定的链接，链接的文本总是相同的，但它指向的位置会发生变化，它需要获取该位置并使用 wget 下载它。

Anhbody 有任何提示，我需要它是可移植的，所以我不想依赖外部程序..

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T07:27:55.027

`bash`不适合这类任务。尽管您可以尝试以下方法：

```
curl --user name:password https://www.example.com/ 
```

但是如果你需要在页面上找到链接，你可以尝试：

```
curl --user name:password https://www.example.com/ | grep WHAT_EVER_IDENTIFIES_LINK 
```

然后再次通过它获得它的输出`curl`。

但我会推荐像[机械化](http://wwwsearch.sourceforge.net/mechanize/)这样的任务。python和Ruby等有类似的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:49:23.380

此代码可用于登录网站，但我不确定如何继续识别链接并获取它...

```
#!/bin/bash

#REQUIRED PARAMS
username=""
password=""

#EXTRA OPTIONS
uagent="Mozilla/5.0" #user agent (fake a browser)
sleeptime=0 #add pause between requests

touch "cookie.txt" #create a temp. cookie file

#INITIAL PAGE
echo "[+] Fetching" && sleep $sleeptime
initpage=`curl -s -b "cookie.txt" -c "cookie.txt" -L --sslv3 -A "$uagent"                "https://ny2.free2surfvpn.com/?src=connect"`
token=`echo "$initpage" | grep "authenticity_token" | sed -e 's/.*value="//' | sed -e   's/" \/>.*//'`

#LOGIN
echo "[+] Submitting the login form..." && sleep $sleeptime
loginpage=`curl -s -b "cookie.txt" -c "cookie.txt" -L --sslv3 -A "$uagent" -d     "authenticity_token=$token&username=$username&password=$password"     "https://mobile.twitter.com/session"`

#HOME PAGE
echo "[+] Getting page" && sleep $sleeptime
homepage=`curl -s -b "cookie.txt" -c "cookie.txt" -L -A "$uagent"     "https://ny2.free2surfvpn.com/?src=connect"`

rm "cookie.txt" 
```

# c++ - 由 XML 文件配置的 Linux C++ 应用程序设置

> ID：11840468
> 
> 赞同：0
> 
> 时间：2012-08-07T06:32:55.863
> 
> 标签：c++, xml

我正在使用一个 C++ 项目，其应用程序设置是一个简单的文本文件。现在我想用基于 XML 的配置替换文件。那么我应该使用哪个 xml 解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:52:53.773

正如有人已经提到的，您还可以使用 boost::property_tree。 [这是一个很好的使用它来读/写 xml 的教程](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_propertytree/tutorial.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:37:38.690

看看[TinyXML](http://www.grinninglizard.com/tinyxml/)或[TinyXML++](http://ticpp.googlecode.com/svn/docs/ticpp.html)，它又小又简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T06:44:16.050

有很多选择。在这种情况下，选择支持 XPATH 的解析器通常非常方便。 带有[libXml2的](http://www.xmlsoft.org/)[libxml+](http://libxmlplusplus.sourceforge.net/)可以很好地完成这项工作——几乎所有 Linux 发行版都包含 libxml2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T07:22:08.363

查看[libconfig](http://www.hyperrealm.com/libconfig/)，它可能是 xml 的良好替代品。

# grails - 如何呈现自定义错误消息？

> ID：11840472
> 
> 赞同：0
> 
> 时间：2012-08-07T06:33:06.800
> 
> 标签：grails, spring-security, grails-plugin

我有一个域类：

```
package x

class User {

    transient springSecurityService

    String username
    String password
        //other stuffs.
    static constraints = {
    username blank: false, unique: true
    password blank: false
    email blank: false, email:true
    }
} 
```

这是我用于 Spring 安全性的类。在我的`/register/index`页面中，我需要自定义错误消息，因此我将这些行添加到`message.properties`：

```
x.User.username.unique=Username already exists. Please use other username. 
```

但这似乎不起作用。我只收到此错误消息： `Property [{0}] of class [{1}] cannot be null`

即使我将一些值传递到我的`username`列中，我仍然会收到此错误消息。我很困惑。这是怎么`/register/index`来的？

我需要在哪里更改错误消息？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:50:25.267

问题在于您声明消息代码的方式，它不符合约定。看看[验证和国际化](http://grails.org/doc/latest/guide/validation.html#validationAndInternationalization)。在这里你可以发现正确的方法是
`[Class Name].[Property Name].[Constraint Code]`
所以你的约束应该是

```
user.username.unique=Username already exists. Please use other username. 
```

# vba - 如果 Excel 2007 中的前一行为空，则将数据上移一行

> ID：11840479
> 
> 赞同：0
> 
> 时间：2012-08-07T06:33:40.140
> 
> 标签：vba, excel, excel-formula

我一直在尝试开发一个宏，如果上一行在某些特定列中为空，则允许我从一行剪切和粘贴一个值或文本到上一行。（如果可能的话，我想在那之后删除空行。）

```
4137274 20120604 41.6 10.83 超出公差
4137279 20120604 税码缺失
                   55.9 -0.04    
4137271 20120604
                  111.8 -11.26 超出公差
4137325 20120604 税码缺失
                  130.72 0   
4139318 20120605 65.36 0 缺少税码
4139114 20120605
                  223.6 -22.54 超出公差
4139279 20120605
                  111.8 111.8 超出公差
4139151 20120605 65.36 65.36 GR不存在
4140802 20120605 27.95 -0.02 税码缺失
4140732 20120605 27.95 27.95 GR不存在
```

正如您在上面看到的，一些价格在下一行。我必须处理大量数据，无法手动剪切和粘贴所有数据。有没有办法通过宏或其他方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:16:50.717

在不为您编写宏的情况下，这里有一些伪代码和一些指针：

1.  将所选内容移动到单元格 A1
2.  测试一个空单元格
    1.  如果为空，则执行`Selection.Delete Shift:=xlUp`并增加一个`empty counter`
    2.  如果不为空，则归零`empty counter`并向下移动
3.  当`empty counter`达到 10（或某个数字表示该列中不再存在数据）时，跳出循环。
4.  将选择移至 B1 并重复
5.  重复 C 列等。

与其进行剪切/粘贴来移动值，不如`Selection.Delete Shift:=xlUp`将其丢弃空单元格并将其下的所有内容向上移动一个单元格。***如果您只选择了一个***单元格，它不会影响其他列。

# facebook - FQL：无法获取 Facebook 用户电子邮件 ID？

> ID：11840480
> 
> 赞同：-1
> 
> 时间：2012-08-07T06:33:57.877
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

我正在使用 fql 获取用户所有朋友的列表以及基本信息。我如何无法获得用户的电子邮件。以下是我的查询：

```
$frd_fql          = "SELECT uid,
            name,
            username,
            first_name,
            middle_name,
            last_name,
            birthday_date,
            sex,
            current_location,
            email,
            relationship_status,
            languages,
            religion,
            interests,      
            hometown_location
            FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = '".$u_id."' )";
                $ret_frdobj       = $this->_facebook->api(array(
                                   'method' => 'fql.query',
                                   'query' => $frd_fql,
                )); 
```

anyonr 可以帮助我为什么无法获得用户电子邮件吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:01:42.647

> anyonr 可以帮助我为什么无法获得用户电子邮件吗？

因为只有您的应用程序的当前用户才能获取电子邮件地址，而他们的朋友则不能。

没有`friends_email`权限之类的东西，您可以在这里清楚地看到：[https ://developers.facebook.com/docs/authentication/permissions/#user_friends_perms](https://developers.facebook.com/docs/authentication/permissions/#user_friends_perms)

# c++ - CMAKE_INSTALL_PREFIX 环境变量 - 不起作用？

> ID：11840482
> 
> 赞同：9
> 
> 时间：2012-08-07T06:34:06.850
> 
> 标签：c++, cmake

一些信息来源说：

> 您可以通过设置 CMAKE_INSTALL_PREFIX 环境变量来更改安装目录（前缀）

如果我在文件中这样做：

```
export CMAKE_INSTALL_PREFIX=$KDEDIR 
```

然后获取它，并检查是否`CMAKE_INSTALL_PREFIX`设置了环境变量，当我这样做时：

```
vic@wic:~/kde/build/kde-workspace$ cmake ../../src/kde-workspace/ 
```

进而：

```
vic@wic:~/kde/build/kde-workspace$ make install 
```

它尝试将文件安装到系统目录。

如果我指定`CMAKE_INSTALL_PREFIX`为 cmake 的参数：

```
vic@wic:~/kde/build/kde-workspace$ cmake -DCMAKE_INSTALL_PREFIX=$KDEDIR ../../src/kde-workspace/ 
```

然后`make install`工作正常 - 将文件安装到`$KDEDIR`

关于设置具有相同名称的环境变量的可能性的文档是否错误，或者我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T07:07:01.110

`CMAKE_INSTALL_PREFIX`必须设置为 CMake 变量：

```
cmake -DCMAKE_INSTALL_PREFIX:PATH=/path/to/installation/directory .. 
```

但是 CMake 也[支持使用](https://gitlab.kitware.com/cmake/community/wikis/FAQ#does-cmakes-make-install-support-destdir)环境`DESTDIR`变量：

```
export DESTDIR=/path/to/installation/directory
make install 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T08:10:51.037

CMAKE_INSTALL_PREFIX 是 CMake 变量，而不是环境变量。它可以设置为`cmake -DCMAKE_INSTALL_PREFIX=yourpath`

# javascript - 如何使显示文本多语言？

> ID：11840483
> 
> 赞同：1
> 
> 时间：2012-08-07T06:34:06.300
> 
> 标签：javascript, jquery, multilingual

如何在 jquery 中创建具有多语言内容的窗口？
例如。对于西班牙语，关闭窗口应该类似于“maximizar la ventana”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:44:39.270

您的服务器上可以有一组名为 等的`en.php`文件`sp.php`。
在每个文件中，可以存储所有消息文本。

就像在`sp.php`,
`$text["close_window"] = "maximizar la ventana";`
`$text["thank_you"] = "Gracias";`

并且在`en.php`,
`$text["close_window"] = "Close this window";` `$text["thank_you"] = "Gracias";`

在您的主文件（`index.foo`）中，您可以使用`echo $text["close_window"];`或
`echo $text["thank_you"]`在您希望显示此文本的位置。

然后根据用户字符串或其他一些数据，您可以根据用户的语言有条件地在服务器端包含english.lang或spanish.lang。

**文件结构：**

index.php //主文件 lang //语言文件文件夹 lang/en.php //英语语言文件 lang/sp.php //西班牙语语言文件

**示例代码：**

`en.php:`

```
<?php
$text["close_window"] = "Close this window";
$text["thank_you"] = "Thank you";
$text["welcome"] = "Welcome";
$text["home"] = "Home";
$text["about_us"] = "About Us";
$text["company_history"] = "Company History";
$text["company_profile"] = "Company Profile";
$text["contact_us"] = "Contact Us";
$text["greetings"] = "You have selected English";
?> 
```

`sp.php:`

```
<?php
$text["close_window"] = "maximizar la ventana";
$text["thank_you"] = "Gracias";
$text["welcome"] = "Bienvenida";
$text["home"] = "Casa";
$text["about_us"] = "Sobre Nosotros";
$text["company_history"] = "Historia de la Empresa";
$text["company_profile"] = "Perfil de la Empresa";
$text["contact_us"] = "Contact Us";
$text["greetings"] = "Usted ha seleccionado Español";
?> 
```

`index.php:`

```
 //Check if browser sent the User Language code
if(isset($_SERVER["HTTP_ACCEPT_LANGUAGE"])      // if browser sent
    //AND is NOT empty
    && ($_SERVER["HTTP_ACCEPT_LANGUAGE"] != "")
    ){ //if conditions END
    // get first two letters from it
    $user_lang = substr($_SERVER["HTTP_ACCEPT_LANGUAGE"], 0, 2);
}
if(isset($_POST["lang"]) //if user selected it
  //and is in our desired format
  && (strlen($_POST["lang"]) == 2)
){
    $user_lang = $_POST["lang"];
}
//if User requested to change language, ask him
if(isset($_POST["lang_change"])
  && ($_POST["lang_change"])) // is true ?
{
    ask_lang();
    exit(); // exit the script now..
}
if(!isset($user_lang)){ //if we dont have $user_lang yet, ask
    ask_lang();
    exit();
}
//Main index file contents
include("lang/".$user_lang."php");
?>
<html>
    <head>
        <title><?php echo $text["welcome"]; ?> | Example.com</title>
    <head>
    <body>
    <?php echo $text["welcome"]; ?>, <?php echo $text["greetings"]; ?>!<br />
    <a href="index.php" title="<?php echo $text["home"]; ?>" >
        <?php echo $text["home"]; ?></a> |
    <a href="about_us.php" title="<?php echo $text["about_us"]; ?>" >
        <?php echo $text["about_us"]; ?></a> |
    <a href="history.php" title="<?php echo $text["company_history"]; ?>" >
        <?php echo $text["company_history"]; ?></a> |
    <a href="profile.php" title="<?php echo $text["company_profile"]; ?>" >
        <?php echo $text["company_profile"]; ?></a> |
    <a href="contact_us.php" title="<?php echo $text["contact_us"]; ?>" >
        <?php echo $text["contact_us"]; ?></a>
    <p>
        <form method="POST" action="">
            <input type="hidden" name="lang_change" value="true" />
            <input type="submit" value="<?php echo $text["change_language"]; ?>" name="change_language" />
        </form>
    </p>
    </body>
</html>

<?php
//Main index file contents ENDS
function ask_lang(){
?>
<html>
    <head>
        <title>Please Select Language</title>
    <head>
    <body>
        <form method="POST" action="">
            <fieldset>
                <legend>Please select language:</legend>
                <input type="radio" value="en" name="lang" />English<img src="en.png"><br />
                <input type="radio" value="sp" name="lang" />Spanish<img src="sp.png"><br />
                <input type="submit" value="OK" name="sumbit" />
            </fieldset>
        </form>
    </body>
</html>
<?php
} //function ask_lang() ENDS 
```

**假设：**

*   所有类型的可能翻译文件都在`Lang`文件夹中。
*   用户输入被净化。
*   谷歌根据上下文正确翻译了所有这些短语。

这是**[Codepad.viper-7.com 上的实时片段](http://codepad.viper-7.com/CPGqi2)**

Live Snippet & In-Answer 代码有一点不同。在这里，我的代码使用*include*来获取外部语言文件，而在 Viper-7 的键盘中，我使用脚本内函数。
原因：因为我无法将文件放入/写入键盘系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:02:23.083

您可以使用`supplant`-method 变体。Crockford 在[这里](http://javascript.crockford.com/remedial.html)写过这样的事情，并将其作为`String`. 必不可少的一种模板：

```
if (!String.prototype.supplant) {
    String.prototype.supplant = function (o) {
        return this.replace(/{([^{}]*)}/g,
            function (a, b) {
                var r = o[b];
                return typeof r === 'string' || typeof r === 'number' ? r : a;
            }
        );
    };
} 
```

关于您的问题，您可以使用包含您的翻译的对象：

```
var spanish = {close: "maximizar la ventana", thanks: "Gracias"};
var german  = {close: "Fenster schließen", thanks: "Danke"};
var english = {close: "Close window", thanks: "Thank you"}; 
```

然后在字符串上使用它：

```
var spanish_message = "<a href='javascript:void(0);'>{close}</a>".supplant(spanish);

var german_message = "<a href='javascript:void(0);'>{close}</a>".supplant(german); 
```

这不是 jQuery，但效果很好。但是，您仍然需要确定自己使用哪种语言的条件。我建议在服务器端使用一些东西，例如要使用的语言的额外参数。如果您有不同的窗口，您知道哪种语言，您还可以显示每种语言使用的语言对象。

另外，如果你的翻译变得更复杂，我建议你把它们放在外部的 js 文件中。

lg,

弗洛

# iphone - ios游戏中心提交时间并显示在排行榜中

> ID：11840484
> 
> 赞同：6
> 
> 时间：2012-08-07T06:34:09.950
> 
> 标签：iphone, ios, datetime, double, game-center

在我的应用程序中，我需要将时间提交到游戏中心，并且我需要以经过的时间显示 - 以百分之一秒的格式。

00:00:00.00

这是我想在排行榜中显示的格式。

在我的应用程序中，我得到以下格式的时间

SS.SS

ss = 秒 SS = 百分之一秒

在将其发送到游戏中心之前，我将值转换为双倍

```
double newScoreDouble = [newScore doubleValue]; 
```

但是当我将双倍分数发送到游戏中心时，它要求我将其转换为 int64_t 格式。但是当我将其转换为该格式时，它会丢失部分双精度值。

```
double intPart = 0;
double fractPart = modf(newScoreDouble, &intPart);
int isecs = (int)intPart;
int min = isecs / 60;
int sec = isecs % 60;
int hund = (int) (fractPart * 100);

int64_t time_to_send_through_game_center = min*6000 + (sec*100 + hund); 
```

这是我将 double 转换为 int64_t 的方式

任何人都可以说如何将整个双精度值发送到游戏中心并以经过时间显示 - 到百分之一秒的格式。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T16:27:16.337

我以前做过。当您以百分之一秒的格式录制乐谱时。在提交之前，您会将您的秒数乘以一百。

因此，假设用户得分 1 分 44 秒 300 毫秒：1:44:30 = 104.3 秒。然后您将 GKScore 对象的 value 属性设置为等于 104.3 * 100 = **10430**，然后像这样提交。

试试看 ：）

# java - 在 jboss 7 中为 Activemq 配置池连接 jndi

> ID：11840486
> 
> 赞同：2
> 
> 时间：2012-08-07T06:34:15.727
> 
> 标签：java, axis2, activemq, connection-pooling, jboss7.x

我正在使用 ActiveMq 5.4.3，并且正在使用队列。我有我的生产者作为 web 服务（不是 Ejb），我已经在 jboss 服务器中部署了 webserice 战争。我的服务很好。但是每次调用服务时，都会创建和关闭连接和会话。我想克服这个瓶颈，以便在我启动服务器时只创建一次连接和会话。我怎样才能做到这一点。我不希望 jboss 充当 mdb 容器。我已经在 jboss 的部署文件夹中部署了 activemq-rar，并将以下子系统添加到了我的 Standalone.xml

```
<subsystem xmlns="urn:jboss:domain:resource-adapters:1.0">
        <resource-adapters>
            <resource-adapter>
                <archive>
                    activemq-ra.rar
                </archive>
                <transaction-support>XATransaction</transaction-support>
                <connection-definitions>
                    <connection-definition class-name="org.apache.activemq.ra.ActiveMQManagedConnectionFactory" jndi-name="java:jboss/activemq/QueueConnectionFactory" enabled="true" use-java-context="true" pool-name="QueueConnectionFactory" use-ccm="true">
                        <config-property name="prefill">
                            false
                        </config-property>
                        <config-property name="max-pool-size">
                            20
                        </config-property>
                        <config-property name="ServerUrl">
                            tcp://localhost
                        </config-property>
                        <config-property name="use-strict-min">
                            false
                        </config-property>
                        <config-property name="min-pool-size">
                            5
                        </config-property>
                    </connection-definition>
                </connection-definitions>
                <admin-objects>
                    <admin-object class-name="org.apache.activemq.command.ActiveMQQueue" jndi-name="activemq/queue/outbound" enabled="true" use-java-context="true" pool-name="outbound">
                        <config-property name="Type">
                            javax.jms.Queue
                        </config-property>
                        <config-property name="Properties">
                            PhysicalName=queue.outbound
                        </config-property>
                    </admin-object>
                    <admin-object class-name="org.apache.activemq.command.ActiveMQTopic" jndi-name="activemq/topic/inbound" enabled="true" use-java-context="true" pool-name="inbound">
                        <config-property name="Type">
                            javax.jms.Topic
                        </config-property>
                        <config-property name="Properties">
                            PhysicalName=topic.inbound
                        </config-property>
                    </admin-object>
                </admin-objects>
            </resource-adapter>
        </resource-adapters>
    </subsystem> 
```

现在，当我尝试使用 JNDI 获取连接（下面的代码）时 `PooledConnectionFactory connectionFactory = (PooledConnectionFactory) context.lookupLink("java:jboss/activemq/QueueConnectionFactory");`

我收到错误消息

```
javax.naming.NameNotFoundException: org.apache.activemq.ra.ActiveMQManagedConnectionFactory -- service jboss.naming.context.java."org.apache.activemq.ra.ActiveMQManagedConnectionFactory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:53:05.170

很简单，使用 PooledConnectionFactory。

您可以通过代码来完成，也可以通过手头的任何 XML 配置来完成：

```
ConnectionFactory cf = new PooledConnectionFactory(new ActiveMQConnectionFactory("tcp://localhost:61616")); 
```

[这](http://activemq.apache.org/spring-support.html)是一个 XML 示例用法（对于 spring，但您可能会从中得到想法）

然后它就像任何其他连接工厂一样。

```
Connection conn = cf.createConnection();
Session sess = conn.createSession.. 
```

[chaching 上的 ActiveMQ 方面（主要与 spring 相关）](http://activemq.apache.org/jmstemplate-gotchas.html)

# jquery - jquery表单验证（组合方法）

> ID：11840491
> 
> 赞同：0
> 
> 时间：2012-08-07T06:34:35.363
> 
> 标签：jquery, forms, validation

我在不同条件下验证表单，当表单提交或更改或模糊或上/下键时。这里的例子...

```
$(document).ready( function() {
    // on submit
    $('form').submit(function() {
        $($(this)).validate();
    });

    // on change or blur
    $('form').change(function() {
        $($(this)).validate();
    });

    // on key up/down
    $('form').keyup(function() {
        $($(this)).validate();
    });
}); 
```

只是想知道有没有这样的方法......

```
$(document).ready( function() {
    // on submit
    $('form').action('submit, change, keyup, keydown, blur', function() {
        $($(this)).validate();
    });
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:40:48.807

使用`on()`：

```
$('form').on('keyup change focus blur', function(){ ... }) 
```

# ios - 为什么 Zombie Instruments 工具中的分配继续上升，而 Allocations Instruments 工具中却没有

> ID：11840498
> 
> 赞同：0
> 
> 时间：2012-08-07T06:34:47.020
> 
> 标签：ios, xcode, memory-management, instruments

我是 Xcode 和 iOS 的新手，今天一直在尝试使用 Instruments 工具。有些事情我正在努力解决：

设想：

我创建了一个简单的应用程序，它使用 UISearchBar 过滤 UITableView（目标 iOS5 和 ARC）。简单的代码，没什么花哨的。

为了我自己的学习，我在执行各种操作时一直在观察分配——在这个特定的例子中，当我在搜索栏中输入内容时。

使用“分配”工具工具，我得到以下信息：

![在此处输入图像描述](../Images/eec84c4dd2da81449eaea4fc12784d72.png)

正如预期的那样，当我第一次开始在搜索栏中输入时，我看到分配的内存突然激增。之后，任何进一步的搜索对分配图都没有显着影响。

但是，当我使用“僵尸”工具查看内存分配时，只要我在搜索栏中键入，分配图就会继续上升。

![在此处输入图像描述](../Images/889582897f2bbfd9051b8bf24b97c2eb.png)

起初，我认为这可能是我正在跟踪的内容 - 我试图确保所有设置都匹配。但是，它在搜索时仍然显示一个上升图。

有人对此有解释吗？毫无疑问，我对分配工具在每种仪器模式中跟踪的内容存在一些概念上的误解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:40:34.237

Zombies 工具通过告诉您的应用程序*不要*释放对象来工作。相反，当对象将被释放时，应用程序将保留分配的对象，但将对象的类更改为特殊的僵尸类，该类通过引发僵尸错误来处理任何消息。

因此，在 Zombie 工具下，分配不断增加，因为没有任何东西真正被解除分配。

顺便说一句，由于使用 Zombies 会阻止应用程序释放对象，因此应用程序通常需要更多内存才能在 Zombies 工具下运行。这在 Mac 上是可以的（以及在 Mac 上运行的 iOS 模拟器中），因为 Mac 可能有几 GB 的 RAM，并且还支持分页到磁盘。但是 iOS 设备只有 256 MB 到 1 GB 的 RAM，并且不支持分页。这可能就是 Instruments 不允许您在 iOS 设备上使用 Zombies 的原因。

# c# - 内联汇编，SEHException

> ID：11840499
> 
> 赞同：0
> 
> 时间：2012-08-07T06:34:53.930
> 
> 标签：c#, windows, assembly, x86

我在 cpp 中创建了一个 .dll 文件来访问 I/O 端口并写入它们。为此，我从我的 c# 控制台应用程序调用这个 .dll，但是当尝试运行它时，我得到“SEHException was unhandled”异常. 你有什么主意吗？

这是c#：

```
[DllImport("testlib.dll")]
public static extern void enableWatchDog();

static void Main(string[] args)
{
    enableWatchDog();
} 
```

这是 cpp（创建 .dll）：

```
extern "C" __declspec(dllexport) void enableWatchDog() { 
   _asm {
      mov al, 41
      out 66, al
      mov al, 4
      out 62, al
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:33:03.677

您不能直接从 Windows 中的用户模式应用程序访问任意 I/O 端口。您需要为此使用特殊的内核模式驱动程序。

# c# - ListBox，其中每个项目都包含一个 List

> ID：11840503
> 
> 赞同：3
> 
> 时间：2012-08-07T06:35:11.993
> 
> 标签：c#, wpf, listbox, grouping

我正在尝试实现一个包含某种类型的项目的列表，一个会话。每个 Session 都包含一个包含 Note 类型的列表。我想在它们各自的会话标题下的列表中显示这些注释。

目前我已经尝试了两种不同的方法。第一种方法是使用`ItemsControls`as `ControlTemplate`。`ListBoxItems`这是我在下图中使用的，也是我希望列表的样子。每个红色矩形显示一个会话，标题下方的项目是注释。那么问题是从选择中`ListBox`选择`ItemsControls`而不是每个单独的注释。

![](../Images/3aed9f98d27e5959be9252e9f3f8c519.png)

我尝试实现列表的另一种方法是为每个 Note 赋予它所属的 Session 的属性，以便`GroupStyle`在`ListBox`. 如果我随后将 ListBox 的 ItemsSource 设置为 Notes 列表而不是 Sessions，我将得到一个看起来像图片的列表，并且其中包含注释选择。现在的问题是我希望列表也显示不包含任何注释的会话。

有谁知道我应该用什么来实现一个带有选择的列表并且按照我描述的方式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:36:08.567

MainWindow.xaml：

```
 <TreeView ItemsSource="{Binding}">
        <TreeView.Resources>
            <HierarchicalDataTemplate DataType="{x:Type local:Session}" ItemsSource="{Binding Path=Notes}">
                <TextBlock Text="{Binding Path=Name}" />
            </HierarchicalDataTemplate>
            <DataTemplate DataType="{x:Type local:Note}">
                <Expander Header="{Binding Path=Notek}">
                    <TextBlock Foreground="Red" Text="{Binding Path=Details}" />
                </Expander>
            </DataTemplate>
        </TreeView.Resources>
    </TreeView> 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        List<Session> sessions = new List<Session>();
        for (int i = 0; i < 5; i++)
        {
            List<Note> notes = new List<Note>();
            for (int j = i * 5; j < (i + 1) * 5; j++)
            {
                Note note = new Note()
                {
                    Notek = string.Format("Note {0}", j),
                    Details = string.Format("Note j = {0}{1}j*j = {2}", j, System.Environment.NewLine, j*j)
                };

                notes.Add(note);
            }
            Session session = new Session()
            {
                Name = string.Format("Session # {0}", i),
                Notes = notes
            };
            sessions.Add(session);
        }
        DataContext = sessions;
    }
}

public class Session
{
    public string Name { get; set; }
    public List<Note> Notes { get; set; }
}
public class Note
{
    public string Notek { get; set; }
    public string Details { get; set; }
} 
```

我认为你可以`HierarchicalDataTemplate`随心所欲地设计你的风格。我只是给你看例子。我认为它比`ItemsControl`使用事件处理程序更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:18:26.953

为了创建答案，我将假设以下数据模型：

```
class Session 
{
    public IEnumerable<Note> Notes { get; }
}

class Note { } 
```

这需要一些编码来同步列表框。我创建了一个名为“ListBoxGroup”的附加属性。具有相同组名的所有列表框只能有一个共享选定项。这是相当多的代码，所以它在底部。

**需要注意的重要事项：**列表框的列表框组在最初设置后无法更改，并且它不支持删除项目，不检查空值等。因此，如果您需要在运行时更改会话，您应该从其组中删除项目，检查是否从可视化树中删除了列表框等。

首先是页面的 XAML：

```
 xmlns:local="clr-namespace:YourApplication.YourNamespace"
    <!-- ItemsControl does not have selection -->
    <ItemsControl ItemsSource="{Binding SessionList}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <!-- Header for the session -->
                    <Border Background="Gray">
                        <TextBlock Text="{Binding Name}" />
                    </Border>
                    <!-- listbox for notes -->
                    <ListBox ItemsSource="{Binding Notes}" local:ListBoxGroup.GroupName="Group1">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <!-- Template for a single note -->
                                <TextBlock Text="{Binding Description}" />
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

下面是 ListBoxGroup 属性的 C# 代码：

```
public static class ListBoxGroup
{
    public static string GetGroupName(DependencyObject obj)
    {
        return (string)obj.GetValue(GroupNameProperty);
    }

    public static void SetGroupName(DependencyObject obj, string value)
    {
        obj.SetValue(GroupNameProperty, value);
    }

    // Using a DependencyProperty as the backing store for GroupName.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty GroupNameProperty =
        DependencyProperty.RegisterAttached("GroupName", typeof(string), typeof(ListBoxGroup), new UIPropertyMetadata(null, ListBoxGroupChanged));

    private static Dictionary<string, List<ListBox>> _listBoxes = new Dictionary<string, List<ListBox>>();

    private static void ListBoxGroupChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        string newValue = e.NewValue as string;
        ListBox listBox = obj as ListBox;
        if (newValue == null || listBox == null) return;

        if (_listBoxes.ContainsKey(newValue))
        {
            _listBoxes[newValue].Add(listBox);
        }
        else
        {
            _listBoxes.Add(newValue, new List<ListBox>() { listBox });
        }

        listBox.SelectionChanged += new SelectionChangedEventHandler(listBox_SelectionChanged);
        listBox.PreviewKeyUp += new System.Windows.Input.KeyEventHandler(listBox_KeyUp);
    }

    static void listBox_KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
    {
        ListBox listBox = sender as ListBox;

        if (e.Key == System.Windows.Input.Key.Up && listBox.SelectedIndex == 0)
        {
            //move to previous
            string groupName = GetGroupName(listBox);
            List<ListBox> group = _listBoxes[groupName];

            int senderIndex = group.IndexOf(listBox);
            if (senderIndex != 0)
            {
                listBox.SelectedItem = null;

                ListBox beforeSender = group[senderIndex - 1];

                int index = beforeSender.Items.Count - 1;
                beforeSender.SelectedIndex = index;

                var container = beforeSender.ItemContainerGenerator.ContainerFromIndex(index);

                (container as FrameworkElement).Focus();

            }
        }
        else if (e.Key == System.Windows.Input.Key.Down 
                    && listBox.SelectedIndex == listBox.Items.Count - 1)
        {
            //move to next
            string groupName = GetGroupName(listBox);
            List<ListBox> group = _listBoxes[groupName];

            int senderIndex = group.IndexOf(listBox);
            if (senderIndex != group.Count - 1)
            {
                listBox.SelectedItem = null;

                ListBox afterSender = group[senderIndex + 1];

                afterSender.SelectedIndex = 0;
                var container = afterSender.ItemContainerGenerator.ContainerFromIndex(0);

                (container as FrameworkElement).Focus();
            }
        }

    }

    static void listBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count > 0)
        {
            ListBox listBox = sender as ListBox;
            string groupName = GetGroupName(listBox);

            foreach (var item in _listBoxes[groupName])
            {
                if (item != listBox)
                {
                    item.SelectedItem = null;
                }
            }

        }

    }
} 
```

# javascript - Javascript 链接列表参考

> ID：11840506
> 
> 赞同：1
> 
> 时间：2012-08-07T06:35:21.340
> 
> 标签：javascript, linked-list

我想在 Javascript 中创建一个 Linked List 对象，并尝试反转它。

我认为这是一个非常简单的问题，但我不知何故被卡住了。这是我的代码。

```
var Node = function (val) {
 this.value = val;
 this.next = null;
};

var LinkList = function (node) {
     var head = node;

     function append(val) {...}; //works fine
     function toString() {...}; //works fine

     function reverse() {
        if (!head.next) {
            return;
        } 
        var prev = head;
        var cur = head.next;
        while (cur) {
           var temp = cur.next;
           cur.next = prev;
           prev = cur;
           cur = temp;
        }
        head = prev;
     }

     return {head: head, append: append, toString: toString, reverse: reverse}
} 
```

然后，我将 10 个项目附加到链接列表并在其上调用 reverse。它能够反转所有节点，但无法将头重置到列表的末尾，但与原始头保持相同。

请解释为什么头部没有被重置到列表的末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:40:16.690

一旦您返回对象，您就不能通过它们各自的引用来修改它的属性。只有函数关闭引用。对象没有。

您需要保存对整个返回对象的引用并直接修改它的头部。

总的来说，有更好的方法来创建这样的复杂对象（参见原型）。

此外，`Node`是一个浏览器全局。使用其他名称，因为它已经代表 DOM Node 接口。

因此，请记住以上所有内容：

```
var LinkedList = function (node) {
    this.head = node;
};

LinkedList.prototype.append = function (val) { /* ... */ };

LinkedList.prototype.toString = function () { /* ... */ };

LinkedList.prototype.reverse = function () {
    if (!this.head.next) {
        return;
    }

    var prev = this.head;
    var cur = prev.next;
    while (cur) {
        var temp = cur.next;
        cur.next = prev;
        prev = cur;
        cur = temp;
    }
    this.head = prev;
};

var linkedList = new LinkedList(someNode); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:47:20.003

我认为您不会更改对返回对象中头部的引用。您正在更改函数 LinkedList 顶部的变量，但您正在底部返回一个新引用。

# vb.net - 通过 Visual Basic 创建文本文件的问题（不写入文本）

> ID：11840507
> 
> 赞同：-2
> 
> 时间：2012-08-07T06:35:21.700
> 
> 标签：vb.net, text-files

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim FILE_NAME As String = "C:\KVRequest.txt"
    Dim aryText(4) As String

    aryText(0) = "TextBox4.Text"
    aryText(1) = "TextBox5.Text"
    aryText(2) = "TextBox6.Text"
    aryText(3) = "TextBox7.Text"
    aryText(4) = "TextBox8.Text"

    Dim objWriter As New System.IO.StreamWriter(FILE_NAME, True)

    objWriter.Close()
    MsgBox("Text file created in your C drive, attach this file in an email to someone@gmail.com Please check that all of the details are correct before sending.")

End Sub 
```

我要做的是从文本框（4 5 6 7 8）中获取文本以写入文本文件。我的代码创建了文件，但没有在其中写入文本，谁能给我一个关于如何让它工作的提示？

谢谢！

编辑：另外，当我在这里时，我试图得到它，所以 button_1.enabled 只有在所有文本框都已被编辑时才为真，但如果你能帮助我，我想不出一种实用的方法来做到这一点这个我也很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:47:48.287

鉴于上面发布的代码，没有将任何内容写入文件的原因是因为您没有告诉它向文件写入任何内容。您需要在您的创建`StreamWriter`和关闭它的 close 方法之间添加类似的内容：

```
objWriter.WriteLine(TextBox4.Text)
objWriter.WtiteLine(TextBox5.Text)
etc... 
```

此外，仅启用保存按钮的最简单选项是为每个文本框创建一个[Control.TextChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)处理程序（或使用一个 Sub 通过将所有事件添加到一个处理程序方法来为所有文本框执行此操作）和让它做类似的事情：

```
If TextBox4.Text <> "" And TextBox5.Text <> "" And TextBox6.Text <> "" Then
    Button1.Enabled = True
Else
    Button1.Enabled = False
End If 
```

# android - android中的下拉列表菜单

> ID：11840508
> 
> 赞同：1
> 
> 时间：2012-08-07T06:35:23.087
> 
> 标签：android, android-listview

我需要创建一个列表视图。然而，这个列表视图有点像下拉菜单。也就是说，我必须在屏幕顶部创建一个按钮，单击它时，将从顶部显示（下拉）列表视图。

有人可以给我一个想法吗？我的意思是，Android 中的这个组件是什么，我该如何创建它？

我知道创建列表视图的正常方法，但不是这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:45:46.410

嘿，谢谢大家的回复，我终于想要实现了。以下链接帮助我实现了它： [http ://techdroid.kbeanie.com/2009/08/android-sliding-drawer-example.html](http://techdroid.kbeanie.com/2009/08/android-sliding-drawer-example.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:01:17.090

通常您会使用单选对话框。

[http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList](http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:02:39.563

如果您想这样做，请从顶部下拉。您需要使用[此](http://code.google.com/p/android-misc-widgets/)项目中的`Panel`自定义视图。如果从下方拉出就足够了，请使用[滑动抽屉](http://developer.android.com/reference/android/widget/SlidingDrawer.html)。（从 Android 3.0 开始，Sliding Drawer 也可以配置为下拉。见[这里](https://stackoverflow.com/questions/3695856/android-slidingdrawer-from-top)）

在抽屉/面板内有 Listview。

# javascript - jQuery第一个请求阻塞了后面的请求

> ID：11840512
> 
> 赞同：2
> 
> 时间：2012-08-07T06:35:42.943
> 
> 标签：javascript, jquery, ajax

我正在构建一个 Web 应用程序。我在选项卡1上有一个按钮。单击此按钮后，后端有一些逻辑处理。然后我想导航到选项卡 2。在此选项卡中，我可以看到处理的更新。

但问题是，在我点击按钮后，相关函数（ajax() 函数）已经被调用。但是当我调用选项卡2时，该功能没有被tabselect事件触发或者事件没有被触发。为了测试，我在 tab 2 tabselect 事件的开头添加了一个警报功能。

我在前端使用 jQuery，在后端使用 Flask

以下是按钮单击事件

```
 <i>
         /** Start test button request **/
            $('#btn_start_test').click(function() {
                $('#btn_start_test').attr('disabled', 'disabled');
                $('#btn_stop_test').removeAttr('disabled');
                setTestStatus('running');
                var indexes = '';
                var test_option = $('input[@name=test_option]:checked').val();
                if (test_option == 1) { // Test checked testsuites
                    $.each($('input[name="testsuites_group"]:checked'), function(index, value) {
                        indexes += '&index' + index + '=' + $(this).attr('id');
                    });
                }
                var startTest = $.ajax({
                                                    type: 'POST',
                                                    url: '/start_test',
                                                    data: indexes
                                             });
                //startTest.complete(function() {
                //  $('#btn_start_test').removeAttr('disabled');
                //  $('#btn_stop_test').attr('disabled', 'disabled');
                //  setTestStatus('idle');
                //});
            });
    </i> 
```

以下是另一个选项卡选择事件：

```
 $("#tabs").bind('tabsselect', function(event, ui) {
                if (ui.index == 0) {
                    loadPage();
                }else if (ui.index == 1) {
                    loadStatusTab();
                }
            }); 
```

# c# - 从 VS2010 WCF 服务应用程序获取 WSDL

> ID：11840516
> 
> 赞同：4
> 
> 时间：2012-08-07T06:35:53.777
> 
> 标签：c#, .net, visual-studio-2010, wcf, wsdl

我刚刚在 Visual Studio 2010 中创建了一个示例 WCF 服务应用程序。它具有以下配置和服务代码。我需要查看生成的相应 WSDL。我需要做什么才能看到相应的 WSDL？

![在此处输入图像描述](../Images/8429a336dd0859a0a1cf5dd548b35cf4.png)

代码

```
public class Service1 : IService1
{
    public string GetData(int value)
    {
        return string.Format("You entered: {0}", value);
    }

    public CompositeType GetDataUsingDataContract(CompositeType composite)
    {
        if (composite == null)
        {
            throw new ArgumentNullException("composite");
        }
        if (composite.BoolValue)
        {
            composite.StringValue += "Suffix";
        }
        return composite;
    }
} 
```

**参考**

1.  [如何生成wcf服务库项目的wsdl文件？](https://stackoverflow.com/questions/9128672/how-to-generate-a-wsdl-file-of-a-wcf-service-library-project?rq=1)
2.  [有什么方法可以从 WCF 服务应用程序创建 WSDL 文件？](https://stackoverflow.com/questions/4178350/is-there-any-way-i-can-create-a-wsdl-file-from-wcf-service-application?rq=1)
3.  [WCF 自动生成的 WSDL](https://stackoverflow.com/questions/2222697/wsdl-automatically-generated-by-wcf?rq=1)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T06:45:26.803

您可以右键单击 svc 文件并选择在浏览器选项中查看。然后，将 ?WSDL 添加到 URL 的末尾。它将显示 WSDL 文件。

您也可以为此使用 SVCUtil。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T06:45:14.930

尝试添加`?wsdl`到您的服务网址的末尾。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-28T07:11:49.103

如果您需要将 WSDL 导出到文件，您可以使用 SVCUtil 来完成此操作。

```
svcutil /t:metadata http://servername/path/WCFSeviceApplication.svc?singleWsdl 
```

# security - 开发中使用的开源 IAM 工具

> ID：11840519
> 
> 赞同：1
> 
> 时间：2012-08-07T06:36:01.387
> 
> 标签：security, single-sign-on, amazon-iam

我正在寻找一种用于开发的开源轻量级 IAM，以替代生产中的真正商业 IAM。具有基本 IAM 功能、易于安装且易于配置以注入 HTTP 标头（如用户组）的东西。OpenAM 是一个不错的选择吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:55:52.977

OpenAM 来自一个非常好的血统……是从 OpenSSO 派生出来的，OpenSSO 是原始 SUN Access Manager 产品的开源代码。OpenSSO 在被 Sun 收购后被甲骨文放弃，因此另一家公司接管了它，并围绕它建立了一个开发者社区。

总体而言，它是满足您要求的不错选择；那是：

1.  生产就绪 - 是的，此版本和以前的版本已用于生产实施
2.  基本 IAM 功能 - 它包含基本的 Web 访问管理功能和一些高级功能。
3.  注入 HTTP 标头 - 是的，这是 Web 访问管理产品中的标准功能。

过去，OpenAM/OpenSSO 的一个限制是它需要 Sun Directory 作为配置存储。但是，随着最近的版本允许使用其他目录，这种情况发生了变化。

预计 OpenAM 的安装和配置会是命令行密集型的；也就是说，安装最小的软件包，然后在配置文件或通过实用程序中设置选项。

希望有帮助...

# c# - 使用 c# 从分隔文本文件中批量插入 SQL Server 表中的数据

> ID：11840522
> 
> 赞同：4
> 
> 时间：2012-08-07T06:36:12.427
> 
> 标签：c#, sql, bulkinsert

我有制表符分隔的文本文件。文件大约 100MB。我想将此文件中的数据存储到 SQL Server 表中。该文件存储在 sql server 中时包含 100 万条记录。实现这一目标的最佳方法是什么？

我可以在 c# 中创建 momory 数据表，然后将其上传到 sql server，但在这种情况下，它会将整个 100 MB 文件加载到内存中。如果文件大小变大怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T06:40:23.550

没问题; [`CsvReader`](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)将处理大多数分隔的文本格式，并实现`IDataReader`，因此可用于提供`SqlBulkCopy`. 例如：

```
using (var file = new StreamReader(path))
using (var csv = new CsvReader(file, true)) // true = first row is headers
using (var bcp = new SqlBulkCopy(connectionString))
{
    bcp.DestinationTableName = "Foo";
    bcp.WriteToServer(csv);
} 
```

请注意，`CsvReader`有很多选项更微妙的文件处理（指定分隔符规则等）。`SqlBulkCopy`是高性能的批量加载 API - 非常高效。这是一个流式读写器 API；它**不会**一次将所有数据加载到内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:40:39.827

您应该逐行读取文件，因此您不必将整行加载到内存中：

```
using (var file = System.IO.File.OpenText(filename))
{
    while (!file.EndOfStream)
    {
        string line = file.ReadLine();

        // TODO: Do your INSERT here
    }
} 
```

***** 更新 *****

 **“*这将向 sql server 生成 100 万个单独的插入命令。有什么办法可以批量生成*”

您可以使用参数化查询，它仍然会发出 1M 插入，但仍然会非常快。

或者，您可以使用`SqlBulkCopy`，但如果您不想使用 3rd 方库，这将相当困难。如果您更愿意使用 MS 许可证，则可以使用[LINQ Entity Data Reader](http://archive.msdn.microsoft.com/LinqEntityDataReader/Release/ProjectReleases.aspx?ReleaseId=389)（根据 Ms-PL 许可证分发），它提供了`AsDataReader`扩展方法：

```
void MyInsertMethod()
{
    using (var bulk = new SqlBulkCopy("MyConnectionString"))
    {
        bulk.DestinationTableName = "MyTableName";
        bulk.WriteToServer(GetRows().AsDataReader());
    }
}

class MyType
{
    public string A { get; set; }
    public string B { get; set; }
}

IEnumerable<MyType> GetRows()
{
    using (var file = System.IO.File.OpenText("MyTextFile"))
    {
        while (!file.EndOfStream)
        {
            var splitLine = file.ReadLine().Split(',');

            yield return new MyType() { A = splitLine[0], B = splitLine[1] };
        }
    }
} 
```

如果您也不想使用 MS 许可代码，您可以`IDataReader`自己实现，但这将是一个 PITA。请注意，上面 ( `Split(',')`) 的 CSV 处理根本不可靠，并且表中的列名必须与 上的属性名称相同`MyType`。TBH，我建议您使用 Marc 对此的回答**

# java - 为什么当我更改最大堆大小时 Eclipse 不打开？

> ID：11840523
> 
> 赞同：4
> 
> 时间：2012-08-07T06:36:22.197
> 
> 标签：java, eclipse, eclipse-plugin

我已经`MAT`在 eclipse 中安装了打开 IBM 格式堆转储的插件。
当我尝试使用`File->Open`from eclipse 打开 heapdump 时，我收到一个消息框错误消息：

在以下期间发生内部错误：“从 'C:\UserData\heapdump.44124802.212242.6876.0003.phd' 解析堆转储”。Java 堆空间

我认为这是由于 eclipse 中的最大堆大小。目前eclipse.ini如下：

> -startup plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
> --launcher.library plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.2.R36x_v20101222
> 
> -product org.eclipse.epp.package.jee.product
> --launcher.defaultAction openFile
> --launcher.XXMaxPermSize 256M
> -showsplash org.eclipse.platform
> --launcher.XXMaxPermSize 256m
> --launcher.defaultAction openFile
> -vmargs
> -Dosgi.requiredJavaVersion =1.5
> -Xms40m
> -Xmx512m

如果我按如下方式更改内存部分：

> -Xms40m
> -Xmx1024m

然后eclipse甚至没有启动：

> 创建 Java 虚拟机失败

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:54:12.423

Java 需要为堆空间提供连续的内存。特别是 Windows 往往具有有限的连续可用内存区域（如果其他程序正在运行，则该区域更小）

另外，一般建议： Set `-Dosgi.requiredJavaVersion=1.6`，不`1.5.`

看看这些链接..

**1 、** [Java最大内存](https://stackoverflow.com/questions/171205/java-maximum-memory-on-windows-xp)
**2** [、为什么Java堆的最大大小是固定的？](https://stackoverflow.com/questions/2109676/why-is-the-maximum-size-of-the-java-heap-fixed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:38:29.650

`Xms` `Xmx`使用. 在命令行上试验值`java -version`。如果您指定的那些值在那里工作，我怀疑该`PermGen`值需要以某种方式进行调整。如果没有，您可能只是系统上没有可用的内存。

# php - facebook getUser 总是返回 0

> ID：11840533
> 
> 赞同：0
> 
> 时间：2012-08-07T06:37:46.797
> 
> 标签：php, facebook, facebook-graph-api, drupal-7

![在此处输入图像描述](../Images/73e3dfb602ccff3a1846a928ef66e6e9.png)

```
// Function for facebook login
    function facebook_login() {
      $output = array();
      // Create facebook object for user login.
      $config = array();
      $config['appId' ] = 'XXXXXXX';
      $config['secret'] = 'XXXXXXX';
      $config['cookie'] = true;

      session_start();
      $code = $_GET['code'];

      $facebook_user = null;

    // Create the facebook user object
      $facebook = new Facebook(array(
        'appId' => $config['appId'],
        'secret' => $config['secret'],
        'cookie' => $config['cookie'],
      ));

      // Get User ID
      $facebook_user = $facebook->getUser();

    // If facebook user id not equal to 0
      if ($facebook_user) {
        try {
          // Proceed knowing you have a logged in user who's authenticated.
          $user_profile = $facebook->api('/me');
          $output['facebookurl'] = 'user/register';

          return $output; // Returns a result.
        }
        catch (FacebookApiException $e) {
          drupal_set_message($e, 'error');
          $facebook_user = null;
        }
      }
      else {
        $facebook_params = array(
          'scope' => 'email',
          'redirect_uri' => 'http://localhost/mywebsite',
          'display' => 'popup',
          'code' => $code,
        );

        $output['facebookurl'] = $facebook->getLoginUrl($facebook_params); // Returns the facebook login url as result.
      }
    } 
```

这是我用于 facebook 登录的 php 代码。某些事件会调用该`facebook_login()`函数并根据`$output`结果进行一些处理。

问题`$facebook_user`始终是 0，即我总是得到`getLoginUrl`as 输出。我已经尝试了与此问题相关的 stackoverflow 上的所有答案，但没有一个对我有帮助。

我正在我的本地主机上测试这个应用程序，并将站点 URL 设置为`http://localhost/mywebsite`facebook 应用程序设置。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:47:36.390

当您运行此代码时，您是否已登录 facebook 并遵循登录 URL？只有当用户添加了应用程序并且在您的网站上设置了 cookie 时，您的用户 ID 才会被返回。

只要您在 FB 上的应用设置也配置为指向 localhost，在 Localhost 上运行它就可以正常工作。

# objective-c - uiTableView Objective-C 每一部分都有一个按钮

> ID：11840535
> 
> 赞同：0
> 
> 时间：2012-08-07T06:37:48.750
> 
> 标签：objective-c, ios, uitableview

我有一个 uitableview 并且在我的表中我有不同的部分并且在每个部分中不同的行，我想在每个部分的最后一行添加一个按钮

我使用了sectionFooter，这是我的代码，但我不知道为什么我只在表格的最后一部分有它，而且它也没有出现滚动。

这是我的代码：

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {

return 50;
}
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {

if(footerView == nil) {

    footerView  = [[UIView alloc] init];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];

  //  [button setBackgroundImage:image forState:UIControlStateNormal];

    //the button should be as big as a table view cell
    [button setFrame:CGRectMake(10, 3, 300, 44)];

    //set title, font size and font color
    [button setTitle:@"Report New Time" forState:UIControlStateNormal];
    [button.titleLabel setFont:[UIFont boldSystemFontOfSize:20]];
    [button setTitleColor:[UIColor lightGrayColor] forState:UIControlStateNormal];

    //set action of the button
    [button addTarget:self action:@selector(removeAction:)
     forControlEvents:UIControlEventTouchUpInside];

    //add the button to the view
    [footerView addSubview:button];
}

//return the view for the footer
return footerView;
} 
```

这里有什么问题，请你帮帮我！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:05:09.040

一个 UIView 必须只有一个 superview。您必须为每个部分创建 footerView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:20:45.503

您需要删除 tableView:viewForFooterInSection: 方法中的 if 语句。这导致只创建一个视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:28:50.173

您正在重用`footerView`for each 部分，部分是通过保留一个`footerView`实例变量，部分是通过创建一次。每次`UITableView`要求您提供一个部分的页脚视图并且它返回相同的视图时，该视图都会移动，因为它不能同时停留在所有这些地方。解决方案是不使用单个视图。

使用 an`NSMutableDictionary`保存`NSNumber`s，以节号为键，适当的页脚视图为值。更改代码以使用字典中该部分的“槽”而不是单个实例变量。

# iphone - 我如何以编程方式从 iPhone 发布带有超链接的大尺寸图像到 Facebook

> ID：11840543
> 
> 赞同：0
> 
> 时间：2012-08-07T06:38:09.747
> 
> 标签：iphone, facebook

![在此处输入图像描述](../Images/fdda05f1ce6f24b8e13afe496af84987.png)

你好

我需要以编程方式将带有超链接的大尺寸图像从 iPhone 发布到 Facebook 墙。这里我使用 Facebook SDK 发布图像，我使用了“我/照片”。这是我发布图片的代码。

```
- FbGraphFile *graph_file = [[FbGraphFile alloc]
   initWithImage:myImage];
   [variables setObject:graph_file forKey:@"file"];
          NSString *strMovie=[dicDetails objectForKey:JSON_MOVIENAME];
          NSString *strUsername=[[[DTO_Handler start]DTO_dicLogin]objectForKey:JSON_FNAME];
          NSURL *url = [[NSURL alloc] initWithString:@"http://www.moviemouse.com/"];
          NSString *strMessage=[NSString stringWithFormat:@"%@ %@ %@ %@ %@",strUsername,@"          likes the movie '",strMovie,@"' via
   MovieMouse.",url];
          [variables setObject:strMessage forKey:@"message"];
          FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"me/photos" withPostVars:variables]; 
```

我可以在 Facebook 墙上发布图片。但我无法链接。我需要与下面给出的图像完全相同。如果我点击“instagram”，它会重定向到一些 url。我怎么能像这样发布。

等待解决方案。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:10:05.990

您只能将要“链接”到的 HTTP URL`message`作为纯文本放入参数中。

使其成为可点击链接是 Facebook 在用户墙上显示消息时自己会做的事情。

应该以完全相同的方式工作，就像用户直接在 facebook.com 上上传图像，并输入包含 URL 的消息文本一样。

# django - 通过 django FormWizard 传递数据

> ID：11840544
> 
> 赞同：2
> 
> 时间：2012-08-07T06:38:14.103
> 
> 标签：django, django-forms

我正在尝试构建一个 django 表单向导来允许人们注册一个活动。我可以通过表单向导查看`done`方法中的数据。问题是我也需要`event_id`传入 done 。如何 `event_id`通过表单向导从 url 获取并进入`done`？简单的例子？

```
------- urls.py ---------
named_register_forms2 = (
    ('basicdata', SeatsForm),
    ('form2', AnotherForm),
)

urlpatterns = patterns('',
    url(r'^register/(?P<event_id>\d+)/$', register_wizard, name='register_step'),
)

------ forms.py -----------
class SeatsForm(forms.ModelForm):

  class Meta:
    model = MyModel
    fields = [ 'last_name', 'first_name', 'address1', 'address2', 
               'city', 'state', 'zipcode', 'phone_number', 'email']

  def __init__(self, *args, **kwargs):
      super(SeatsForm, self).__init__(*args, **kwargs)

class RegisterWizard(SessionWizardView):
    #storage_name = 'formtools.wizard.storage.session.SessionStorage'
    template_name = 'wizard_form.html'

    def done(self, form_list, **kwargs):
        data = {}
        for form in form_list:
                data.update(form.cleaned_data)
                print data
        # I need event_id right here.  How to get it?
        return render_to_response('done.html', {
            'form_data': [form.cleaned_data for form in form_list],
    }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:54:57.033

我认为您必须将其放入表格并从那里获取。

如果它的模型形式，您可以将`instance_dict`参数传递给向导视图。[instance_dict 参数](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.instance_dict)。但是，在这种情况下，您将必须实现一个包装视图，该视图将使用这些参数准备向导视图。像这样的东西：

```
def wrapper_view(request, id):
    #somecode
    seats_instance = SeatsModel.objects.get(id=id)
    another_instance = AnotherModel.objects.get(id=id)
    inst_dict = { '0': seats_instance,
                  '1': another_instance
                }
    return RegisterWizard.as_view(named_register_forms2, instance_dict=inst_dict)(request)

class RegisterWizard(SessionWizardView):
    #storage_name = 'formtools.wizard.storage.session.SessionStorage'
    template_name = 'wizard_form.html'

    def done(self, form_list, **kwargs):
        data = {}
        seatform= form_list[0]
        seatinst = form.save()    
        #save other forms
        ...
        #using seatinst get event id

        return render_to_response('done.html', {
            'form_data': [form.cleaned_data for form in form_list],
             }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-20T05:26:07.107

这个问题已经有两年了，但为了完整起见，我一直在通过覆盖`dispatch`向导类的方法来解决这个问题。向导使用来自 URL 调度程序的原始参数调用此方法。您可以在`instance_dict`其他任何事情发生之前修改向导（可能还有其他任何向导成员）。

```
class RegisterWizard(SessionWizardView):
    #storage_name = 'formtools.wizard.storage.session.SessionStorage'
    template_name = 'wizard_form.html'

    def dispatch(self, request, id, *args, **kwargs):
        self.instance_dict = {
            '0': SeatsModel.objects.get(id=id),
            '1': AnotherModel.objects.get(id=id),
        }
        return super(RegisterWizard, self).dispatch(request, *args, **kwargs)

    def done(self, form_list, **kwargs):
        data = {}
        seatform= form_list[0]
        seatinst = form.save()    
        #save other forms
        ...
        #using seatinst get event id

        return render_to_response('done.html', {
            'form_data': [form.cleaned_data for form in form_list],
        }) 
```

我不确定是否有任何主要的功能优势，但感觉就像向导更加封装了这种方式。此外，我不知道这是否是该`dispatch`方法的预期用途。

我想如果一个人要继承`RegisterWizard`设置`instance_dict`对象的行为，`SeatsModel`并且`AnotherModel`不需要让用户使用包装函数就可以使用；这可能是这样做的唯一实际优势。

# jquery - 选择通过链接列表编辑提交的表单

> ID：11840546
> 
> 赞同：0
> 
> 时间：2012-08-07T06:38:22.707
> 
> 标签：jquery, django, django-forms, django-templates

我有一个转储问题，但我无法找到解决方案。我希望用户能够编辑他提交的表单。这就是为什么我根据所有者的ID查询它们

```
all_reqs = Webrequests.objects.filter(own_id=u_id) 
```

并将它们加载到模板中：

```
 {% for a in all_reqs %}
    <li><a href="#">{{ a }}</a></li>
   {% endfor %} 
```

现在我无法管理的是，当用户使用他以前提交的表单之一点击一个链接时，要加载相应的提交表单。如何获取用户选择的表单的 ID？也许用js捕获链接id然后找到表单id？但是如何使用这个 django 模板 for-loop 为链接分配 id？任何其他方式来做我想做的事将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:53:38.163

我假设您想使用 jquery 通过 AJAX 调用加载 from 。

你的思路是对的。只需在链接上添加对象的 ID。

```
<a href="#{{ a.pk }}" id="{{ a.pk }}">{{ a }}</a> 
```

我想将它添加到 href 属性，但我见过有人宁愿将它添加到 id 属性。

然后只需将 onClick 事件绑定到标签，读取 id，并根据获取的 id 构建一个 url。当你有一个有效的 url 时，你可以向 django 发送一个 GET 请求并要求返回一个表单。

```
$("a").on("click", function(event) {
    event.preventDefault();
    var id = $(this).attr("id");
    var options = {
        url: "http://host.com/webrequests/" + id
    };
    $.when($.ajax(options)).then(function(data) {
        // show the form which should be in data on your page
    });
} 
```

# ajax - 如何强制 AJAX 动画等到点击事件？

> ID：11840548
> 
> 赞同：0
> 
> 时间：2012-08-07T06:38:28.407
> 
> 标签：ajax, events, tabs, click

我正在尝试编辑此 AJAX 代码，但我以前没有任何 AJAX 经验。该代码查找 ID #tabvanilla 并显示其选项卡。这是我正在关注的教程的[来源](http://net.tutsplus.com/tutorials/javascript-ajax/create-a-tabbed-interface-using-jquery/)。

`$(document).ready(function() { $('#tabvanilla > ul' ).tabs({ fx: { height: 'toggle', opacity: 'toggle'} }); });`

问题是它默认显示第一个 TAB，我想等到一个事件。我已经尝试过使用setter，但它没有用。

我最好的尝试是这个，但是在我选择 -1 之后，不可能再次使选项卡可见。

```
$( '#tabvanilla > ul' ).tabs({ selected: -1  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:25:58.843

```
$('#tabvanilla > ul').tabs({ selected: null }); 
```

或来自插件示例：

```
$(document).ready(function() {
    $('#tabvanilla > ul').tabs({ fx: { height: 'toggle', opacity: 'toggle' }, selected: null });
    $('#featuredvid > ul').tabs();
}); 
```

# jquery - JQuery A href 点击表格行高亮

> ID：11840549
> 
> 赞同：0
> 
> 时间：2012-08-07T06:38:32.100
> 
> 标签：jquery, html

当我单击某个链接时，我试图突出显示表格行。`foreach`因为我使用的是 MVC3 Razor，所以我的表是由循环生成的。

```
@foreach (var item in Model) {
    <tr class="trow">
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Author)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateCreated)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateEdited)
        </td>
        <td>
            <a href='@Url.Action("Edit", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Edit16x16.png")' title="Edit"/></a> &nbsp;
            <a href='@Url.Action("Details", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Details16x16.png")' title="Details" /></a> &nbsp;
            <a href='@Url.Action("Delete", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Delete16x16.png")' title="Delete" /></a> &nbsp;
            <a href='@Url.Action("Select", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Select16x16.png")' title="Select" class="select" /></a> 
        </td>
    </tr>
} 
```

`a`现在，我需要通过单击with`select`类（即最后一个）使其运行。我在这里找到了一些参考资料：[JQuery highlight table row](https://stackoverflow.com/questions/4799695/jquery-highlight-table-row)，我一直在谷歌上搜索如何解决这个问题。但绝对没有参考。

我最后尝试的是：

用于突出显示的 CSS 类：`.highlighted { background-color: #c6df50 !important; }`

```
$('.select').click(function() {
    $(this).parent().addClass('highlighted');
}); 
```

我知道这只会添加类而不是在其他点击时将其删除，但即使这样也行不通。

任何帮助表示赞赏，谢谢。

**脚本**

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.select').click(function () {
            $('#projTable').removeClass('highlighted');
            $(this).parent().parent().addClass('highlighted');
        });    
    });
</script> 
```

我把它放在页面的顶部。

**呈现的 HTML**

```
 <table id="projTable">
        <tr>
            <th>
                Name
            </th>
            <th>
                Author
            </th>

            <th>
                Date Created
            </th>
            <th>
                Date Edited
            </th>
            <th style="text-align:right;"> <a href="/Project/Create"><button>&nbsp;Create&nbsp;</button></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
        </tr>

        <tr class="trow">
            <td>
                Test Project1
            </td>
            <td>
                Me
            </td>

            <td>
                8/6/2012 2:05:36 AM
            </td>
            <td>
                8/6/2012 2:05:36 AM
            </td>
            <td>
                <a href='/Project/Edit/1'><img src='/Content/images/Edit16x16.png' title="Edit"/></a> &nbsp;
                <a href='/Project/Details/1'><img src='/Content/images/Details16x16.png' title="Details" /></a> &nbsp;
                <a href='/Project/Delete/1'><img src='/Content/images/Delete16x16.png' title="Delete" /></a> &nbsp;
                <a href='/Project/Select/1' class="select" ><img src='/Content/images/Select16x16.png' title="Select" /></a> 
            </td>
        </tr>
        <tr class="trow">
            <td>
                Test Project 2
            </td>
            <td>
                Me
            </td>

            <td>
                8/7/2012 9:06:11 AM
            </td>
            <td>
                8/7/2012 9:06:11 AM
            </td>
            <td>
                <a href='/Project/Edit/2'><img src='/Content/images/Edit16x16.png' title="Edit"/></a> &nbsp;
                <a href='/Project/Details/2'><img src='/Content/images/Details16x16.png' title="Details" /></a> &nbsp;
                <a href='/Project/Delete/2'><img src='/Content/images/Delete16x16.png' title="Delete" /></a> &nbsp;
                <a href='/Project/Select/2' class="select" ><img src='/Content/images/Select16x16.png' title="Select" /></a> 
            </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:49:59.910

给你的桌子一个 ID，说“MyTable”

并将这一行添加到您的代码中

```
$('.select').click(function() {
    $('#MyTable tr').removeClass("highlighted"); // removes all the highlights from the table
    $(this).parent().addClass('highlighted');
}); 
```

* * *

好的，现在您已经拥有带有项目 ID 的超链接以及每个项目，当您单击任何操作（选择/删除/编辑）时，在临时数据中设置项目 ID

```
TempData["SelectedProductID"] = ID; 
```

（抱歉，viewbag 无法生存`RedirectToAction`）

在控制器的 Index 操作中，检查是否`TempData["SelectedProductID"]`不为空，如果是，则将其设置为 viewbag

```
ViewBag.SelectedProduct = TempData["SelectedProductID"]; 
```

当您循环浏览剃须刀代码时，您可以使用此视图包。

像这样的东西...

```
@foreach (var item in Model) {
   @if (ViewBag.SelectedProduct == item.ID)
   {
    <tr class="trow">
    }
    else
    {
    <tr class="trow" class="highlighted">
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:52:39.793

它不会起作用，因为你有 id="select" 而不是使用 class="select"。以下应该工作：

**CSHTML**

```
@foreach (var item in Model) {
    <tr class="trow">
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Author)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateCreated)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateEdited)
        </td>
        <td>
            <a href='@Url.Action("Edit", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Edit16x16.png")' title="Edit"/></a> &nbsp;
            <a href='@Url.Action("Details", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Details16x16.png")' title="Details" /></a> &nbsp;
            <a href='@Url.Action("Delete", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Delete16x16.png")' title="Delete" /></a> &nbsp;
            <a href='@Url.Action("Select", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Select16x16.png")' title="Select" class="select" /></a> 
        </td>
    </tr>
} 
```

**脚本**

```
$('.select').click(function() {
  $parentRow = $(this).parent().parent();
  if ($parentRow.hasClass('highlighted'))
    $parentRow.removeClass('highlighted');
  else
    $parentRow.addClass('highlighted');
}); 
```

希望有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T12:54:32.930

我用了

```
<a href='@Url.Action("Select", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Select16x16.png")' title="Select" class="select" /></a> 
```

进而

```
$(document).on('click', '.select', function (evt) {

            $parentRow = $(this).parent().parent();
            $('#projTable tr').removeClass("highlighted");
            $parentRow.addClass('highlighted');

        }); 
```

它对我有用............

# android - 列表视图复选框选择

> ID：11840552
> 
> 赞同：0
> 
> 时间：2012-08-07T06:38:59.453
> 
> 标签：android, checkbox, onclick, android-listview

我创建了一个具有图像 + 文本 + 复选框的自定义列表视图。如何检测复选框的选择/取消选择。我试过 onItemClick() 但它不会被调用。我是否正确使用了它？

```
 class PInfo {
    String appname = "";
    String pname = "";
    Drawable icon;
 }

public class InstalledApps extends Activity{

private static LayoutInflater inflater=null;
private ListView listview;
private Activity activity;

List<PInfo> installedApps = new ArrayList<PInfo>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.applist);

    activity = this;
    listview = (ListView)findViewById(R.id.listView1);

    PackageManager pm = getPackageManager();
    List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

    for(ApplicationInfo app : packages) {

        PInfo newInfo = new PInfo();

        newInfo.appname = (String) app.loadLabel(pm);
        newInfo.pname = app.packageName;
        //newInfo.icon = app.icon;
        //Drawable dd = activity.getResources().getDrawable(app.icon);
        newInfo.icon = app.loadIcon(getPackageManager());

        if((app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) == 1) {        

            installedApps.add(newInfo);
        } else if ((app.flags & ApplicationInfo.FLAG_SYSTEM) == 1) {

            installedApps.add(newInfo);

        } else {

            installedApps.add(newInfo);

        }
    }

    InstalledAppsAdapter iap = new InstalledAppsAdapter(this, installedApps);
    listview.setAdapter(iap);

}

  }

class InstalledAppsAdapter extends BaseAdapter{

private Activity activity;
private static LayoutInflater inflater=null;
List<PInfo> installedApps = new ArrayList<PInfo>();
ListView listview; 

public InstalledAppsAdapter(Activity a, List<PInfo> b) {

    // TODO Auto-generated constructor stub
    installedApps = b;
    activity = a;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    listview = (ListView)activity.findViewById(R.id.listView1);

       //Here is where I have put it currently..

    listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            PInfo newInfo = (PInfo) listview.getItemAtPosition(arg2);
            System.out.println(newInfo.appname);
        }
    });
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return installedApps.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {
    // TODO Auto-generated method stub

    View  customView = inflater.inflate(R.layout.listrow, arg2,false);

    ImageView iv = (ImageView)customView.findViewById(R.id.imageView1);
    TextView tv= (TextView) customView.findViewById(R.id.textView2);
    CheckBox cb= (CheckBox)customView.findViewById(R.id.checkBox1);

    PInfo pinfo = installedApps.get(arg0);

        tv.setText(""+pinfo.appname);
        iv.setImageDrawable(pinfo.icon);

    return customView;

}

} 
```

我应该在哪里添加此代码（如果这是正确的侦听器），

```
listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            PInfo newInfo = (PInfo) listview.getItemAtPosition(arg2);
            System.out.println(newInfo.appname);
        }
    }); 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:50:35.403

在里面写代码`getView`

```
@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {
// TODO Auto-generated method stub

View  customView = inflater.inflate(R.layout.listrow, arg2,false);

ImageView iv = (ImageView)customView.findViewById(R.id.imageView1);
TextView tv= (TextView) customView.findViewById(R.id.textView2);
CheckBox cb= (CheckBox)customView.findViewById(R.id.checkBox1);

cb.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
{
    if ( isChecked )
    {
        // perform logic
    }

}
});
}

PInfo pinfo = installedApps.get(arg0);

    tv.setText(""+pinfo.appname);
    iv.setImageDrawable(pinfo.icon);

return customView;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:22:22.147

Insted 保留复选框，您可以在选择模式下使用 simple_list_item_multiple_choice。

# javascript - Facebook API 登录 - 日志记录

> ID：11840555
> 
> 赞同：1
> 
> 时间：2012-08-07T06:39:11.373
> 
> 标签：javascript, html, facebook, facebook-graph-api, facebook-javascript-sdk

我正在考虑记录所有使用 FB 进入网站的用户。在 purushotam 的帮助下（请参阅我的另一个问题）能够继续。

这是我的新问题：1）如何获取/使用 facebook 提供的按钮。原因是我希望用户获得相同的用户体验。（facebook按钮蓝色按钮）2）一旦用户登录，我想发送警报，然后转到我重新定向的网站（例如我有stackoverflow）。因为 FB 是非阻塞异步的，所以我在 FB 返回网站被重定向的值之前看到。如何解决这个问题。3）当用户尝试登录时，我不想要 FB 弹出窗口-我想在新页面中登录 FB（就像 stackoverflow 登录一样）我该怎么做..

```
 <body>
        <div id="fb-root"></div>
<script>

      window.fbAsyncInit = function() {
          FB.init({appId: 'xxxx', status: true, cookie: true, xfbml: true});

      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());

    function fetchUserDetail()
    {
        FB.api('/me', function(response) {
                alert("Name: "+ response.name + "\nFirst name: "+ response.first_name + "ID: "+response.id);
            });
        window.location.href = 'http://www.stackoverflow.com';  
    }

    function checkFacebookLogin() 
    {
        FB.getLoginStatus(function(response) {
          if (response.status === 'connected') {
            fetchUserDetail();
          } 
          else 
          {
            initiateFBLogin();
          }
         });
    }

    function initiateFBLogin()
    {
        FB.login(function(response) {
           fetchUserDetail();
         });
    }
    </script>

 <input type="button" value="Sign in using Facebook" onclick="checkFacebookLogin();"/>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:59:06.920

> 1) 我如何获取/使用 facebook 提供的按钮。原因是我希望用户获得相同的用户体验。（facebook按钮蓝色按钮）

[https://developers.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/) , [https://www.facebook.com/brandpermissions/logos.php](https://www.facebook.com/brandpermissions/logos.php)

> 2）一旦用户登录，我想发送警报，然后转到我重定向的网站（例如我有stackoverflow）。因为 FB 是非阻塞异步的，所以我在 FB 返回网站被重定向的值之前看到。如何解决这个问题。

对不起，我真的不明白你在这里问什么。请尝试更具体。

> 3）当用户尝试登录时，我不想要 FB 弹出窗口-我想在新页面中登录 FB（就像 stackoverflow 登录一样）我该怎么做..

然后不要使用 FB.login，而是将用户重定向到 Auth 对话框的 URL；见[https://developers.facebook.com/docs/authentication/client-side/#no-jssdk](https://developers.facebook.com/docs/authentication/client-side/#no-jssdk)

# magento - Magento 集群安装：安装两次还是安装一次并复制（rsync）文件？

> ID：11840557
> 
> 赞同：0
> 
> 时间：2012-08-07T06:39:26.067
> 
> 标签：magento, ssh, cluster-computing

安装具有两台 Web 服务器和一台数据库服务器的 Magento 集群时 - 最好在每台服务器上完成 Magento 安装过程，或者安装在一台服务器上并`rsync`用于复制所有文件。

处理两个 Web 服务器之间的缓存的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:49:13.730

最好的方法是去亚马逊购买一本名为“持续交付：通过构建、测试和部署自动化的可靠软件发布（Addison-Wesley 签名系列（Fowler））”的书

但是我建议建立一个基于 git 和结构的部署管道，通过“按下按钮”将你的代码推送到每个主机，你可以使用 rsync 同步媒体和其他共享资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T23:20:46.250

解决方案是在数据库服务器上创建文件共享，然后使用 Varnish 启动多层缓存并同时运行 Apache 和 Nginx。

# android - 如何防止从我的 apk 获取源代码

> ID：11840559
> 
> 赞同：1
> 
> 时间：2012-08-07T06:39:44.610
> 
> 标签：android

我知道有一种方法可以从 android apk 获取某种源代码。（根据[Is there a way to get the source code from a APK file?](https://stackoverflow.com/questions/3593420/android-getting-source-code-from-an-apk-file)）如何防止其他人从我的apk中获取源代码？可能吗？

非常感谢，克伦 :-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T06:50:06.717

为您的应用程序启用`ProGuard`。`ant`将调用`ProGuard`混淆您的代码。更多细节在这里：http: [//developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:53:57.323

是的，您可以为您的应用程序进行混淆 [http://proguard.sourceforge.net/index.html#FAQ.html](http://proguard.sourceforge.net/index.html#FAQ.html)

# android - 包含项目的对话框

> ID：11840565
> 
> 赞同：0
> 
> 时间：2012-08-07T06:40:17.580
> 
> 标签：android

我想创建一个对话框，当弹出窗口将显示项目。但问题是，当我弹出我的对话框时，它只显示标题和一个空格我没有在我的对话框中获取我的项目。这是我的代码：

```
@Override
public void onClick(View v) {

  final String list[]={"r","g","b"};

  AlertDialog.Builder alert = new AlertDialog.Builder(myAct.this);

  alert.setTitle("dialog with list");

  alert.setItems(list,new DialogInterface.OnClickListener(){
    @Override
    public void onClick(DialogInterface dialog,int which) {
      Toast.makeText(getApplicationContext(),""+list[which],1000).show()
    }
  });
  alert.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:49:32.767

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)

你有提到这个吗？

如果是这样，你可以试试这个

```
final String[] list={"r","g","b"}; 
```

代替

```
final String list[]={"r","g","b"}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:47:16.210

在中添加项目后尝试`CharSequence[]`。有关更多详细信息，请参阅此[文档](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)。

# actionscript-3 - AS3 - 为游戏中的永远对象创建新的 .AS 类是个好主意吗？

> ID：11840566
> 
> 赞同：0
> 
> 时间：2012-08-07T06:40:20.450
> 
> 标签：actionscript-3

为了多功能性、活力和组织性，我想为游戏中的每个对象制作新的 .AS 文件。我的意思是，在射击游戏的情况下，我想为每种类型的子弹制作一个新的类文件，它们的所有独特属性都在各自的类中详细说明。我想对游戏中的每一种敌人都做同样的事情。

这一切都假设可能有 10 多种不同类型的敌人/子弹。

有些人一直在敦促我将每种类型的值（例如子弹）保留在一个类中，然后根据发射的子弹类型更改变量。这对我来说听起来不太有趣，我宁愿创建一堆不同的类文件，然后将所有项目符号推入一个公共数组（到目前为止有效），但我真的很想知道我是否有这样做是对的，甚至是好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:08:12.260

在我看来，由于子弹（或敌人，就此而言）代表相同的家庭对象，因此拥有一个由每个具体类实现或扩展的通用接口或抽象类是有意义的。这是一个好主意吗？让我们这样想：

当您创建将在整个应用程序中使用的类时，您实际上是在构建一个 API。良好的实践建议您应该始终对接口而不是实现进行编程。这意味着您的顶级类不应依赖于低级类，而应使用抽象。这样，不同级别的组件松散耦合，整体代码更加灵活。这个原则被称为[依赖倒置，是](http://en.wikipedia.org/wiki/Dependency_inversion_principle)[SOLID 设计](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)的五项原则之一。

提供的链接应该提供一些关于如何构建代码的附加信息。

祝你有美好的一天！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:28:41.453

您将希望使用继承来使其更清晰、更灵活地进行更改。然后，即使在多个项目中，您也可以扩展相同的通用基类。

从一个基类（或接口）开始 - 例如 Bullet.as - 并将所有项目符号共有的所有功能和属性放在该类中。任何时候你有一组具有相同属性的子弹，继续制作子类。因此，如果您有多种在接触时都会爆炸的子弹，您可以进行以下设置：

```
public class Bullet {
    public function fire():void {};

    public property size:int;
    public property strength:Number;
    public property label:String;
    public property maxDistance:Number;
} 

public class ExplodingBullet extends Bullet {
    public property blastRadius:Number;

    public function explode():void {
        trace("Kaboom");
    }
}

public class BazookaBullet extends ExplodingBullet {
    public function BazookaBullet():void {
        blastRadius = 10;
        label = "Bazooka";
        size = 5;
        maxDistance = 120;
    }
} 
```

这将为您的火箭筒子弹提供它扩展的类的所有功能。与在所有项目符号类中重新创建所有相同的属性和方法相比，这样做有很多好处。

# ruby-on-rails - 如何在 Rails 嵌套模型表单中关联用户？

> ID：11840571
> 
> 赞同：1
> 
> 时间：2012-08-07T06:40:38.667
> 
> 标签：ruby-on-rails, nested-attributes

鉴于 Railscasts 中的典型嵌套模型示例：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

您如何将答案与用户相关联？

换种说法，如果您正在通过另一个模型构建模型，您将如何为创建的每个子元素关联用户？

用另一个例子再次改写：

如果我有专辑和图片，并且我通过专辑的控制器将它与该专辑关联一次创建了许多图片，我将如何将同一个 update_attributes 调用中的每张图片关联起来，或者 Rails 最惯用的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:55:21.983

我最终使用以下方法使其工作：

```
params[:exercise][:log_entries_attributes].each do |value|
  value[1].merge!(:user_id => current_user.id)
end 
```

是否有更适合处理此问题的 Rails 或 Ruby 版本？

# macos - 如何为 NSCollectionView 创建标题视图

> ID：11840575
> 
> 赞同：2
> 
> 时间：2012-08-07T06:41:07.467
> 
> 标签：macos, nstableview, nscollectionview, nstableheaderview

我需要为我的 NSCollection 视图设置一个标题视图。当我研究时，我发现 NSCollection 视图不支持像 NSTableView 这样的默认标题视图。我需要一个几乎与 Skype 中使用的标题类似的标题。IE。除了只显示标题之外，我可能需要在单击与列对应的标题时执行一些操作。例如。单击“名称”列后按名称排序。

如果我子类化并创建自己的标题视图，最好的实现方法是什么？我应该对哪个视图进行子类化以获得 NSTableview 标头的外观和类似 NSButton 的可点击属性？

# jquery - 在 jQuery 对话框中显示 Google 地图的屏幕截图

> ID：11840583
> 
> 赞同：1
> 
> 时间：2012-08-07T06:41:51.240
> 
> 标签：jquery

我在网页内的谷歌地图中显示了一条路线。我的地图显示在 div 中，如下所示

```
<div id="map_canvas" ></div> 
```

它会不时更新。如何获取地图的屏幕截图并将其作为图像显示在 jQuery 对话框中？

如果有人可以帮助我解决这个问题，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:20:27.763

您不得自行截取谷歌地图的屏幕截图并将其显示在您的页面上。您必须使用[静态地图 API](https://developers.google.com/maps/documentation/staticmaps/) ，以免遇到麻烦。

但除此之外，正如 Asif 指出的那样，在[fancybox](http://fancyapps.com/fancybox/#examples)中显示它应该没有问题，如果您愿意，也可以在[jQuery UI Dialog中显示。](http://jqueryui.com/demos/dialog/)

# c++ - 如何写一个浮点常量

> ID：11840584
> 
> 赞同：1
> 
> 时间：2012-08-07T06:41:51.277
> 
> 标签：c++, floating-point

我不知道也无法快速找到在 C++ 中输入浮点常量的正确方法。

如果我想要 2^-52，我应该写什么？而且， << 和 float 是什么关系？那是对的吗 ？

```
const double pres = 1>>52 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T06:49:11.087

看起来你真的想要`double`表示的精确度。在这种情况下，不要使用魔法常数。相反，你可以使用这个：

```
const double pres = std::numeric_limits<double>::epsilon(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T06:46:47.283

您可以为此使用[十六进制浮点](http://www.exploringbinary.com/hexadecimal-floating-point-constants/)表示：

```
const double pres = 0x1p-52; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:50:28.263

```
#include<math.h>
double pres = 1/pow(2,52); 
```

# python - 测试所有字母？

> ID：11840585
> 
> 赞同：-1
> 
> 时间：2012-08-07T06:42:08.013
> 
> 标签：python

我正在编写一个脚本，该脚本应该读取一个文本文件并测试以查看指定的字母（a、a、r、d、v、a、r、k）是否在每一行上。我在尝试检查 3 个不同的 a 而不是一个时遇到问题。我的代码如下：

```
#Variables
advk = ['a','a','r','d','v','a','r','k']
textfile = []
number = 0
life = 0

for line in open('input.txt', 'rU'):
    textfile.append(line.rstrip().lower())

while life == 0:
    if all(word in textfile[number] for word in advk):
        printed = number + 1
        print ("Aardvark on line " + str(printed))
        number+=1
        if number == len(textfile):
            life+=1

    else:
        number+=1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T07:21:03.123

每次你想在 python 中计算一些东西时，记住[Counter](http://docs.python.org/library/collections.html#collections.Counter)类。

* * *

```
from collections import Counter

advk = Counter(['a','a','r','d','v','a','r','k'])

with open('input.txt', 'rU') as file:
    for i, line in enumerate(file.readlines()):
        if not advk - Counter(line.lower()):
            print ("Aardvark on line " + str(i+1)) 
```

* * *

给定输入线

> dffdaardvarksdsda

计数器看起来像这些

```
Counter({'d': 5, 'a': 4, 'f': 2, 's': 2, 'r': 2, 'k': 1, 'v': 1}) 
```

和

```
Counter({'a': 3, 'r': 2, 'd': 1, 'k': 1, 'v': 1}) 
```

供您搜索的字母列表。

我们通过简单地减去两个 Counters`advl - Counter(line.lower())`并检查结果 Counter 是否没有剩余元素来使用一个技巧。

* * *

其他需要注意的事项：

您可以使用[with](http://www.python.org/dev/peps/pep-0343/)语句来确保您的文件被关闭。
您可以使用[enumerate](http://docs.python.org/library/functions.html#enumerate)代替计算行号。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-07T06:57:14.877

如果 advk 列表是可变的并且内容是从其他地方读取的，那么为了维护列表中的唯一元素，您可以将其转换为设置和检查。

```
advk = ['a','a','r','d','v','a','r','k']
advk = list(set(advk)) 
```

这使 advk 成为一个唯一列表，并避免检查行中的多个 'a'。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-07T07:18:00.523

```
# If the line "ardvrk" should match, this is a solution:
chars=set('aardvark')
for nr, line in enumerate(open('input.txt', 'rU')):
    if not chars-set(line): # is subset?
        print 'match', nr, line, 
```

# linux - centos服务器上的定时任务

> ID：11840588
> 
> 赞同：0
> 
> 时间：2012-08-07T06:42:18.390
> 
> 标签：linux, batch-file, cron, centos, scheduled-tasks

我在**centos**上尝试**了 now + time**，但它对我来说并不完美。

 **我希望我的 centos 服务器在服务器启动 5 天后的 10 分钟内运行脚本，无论是在下午 1 点或下午 5 点或上午 12 点启动，还是在第 7 天或第 13 天启动，即 5 天后在服务器启动时重复是超过。

任何人都可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:52:00.620

也许我不明白你的问题......但你是否已经尝试使用**at**命令？

我的意思是这样的：

```
at now + 5 days < /path/to/yourscript.sh 
```

yourscript.sh 应该在每个操作之间等待 10 分钟的循环。**

# hadoop - 如何在hadoop中使用JobControl

> ID：11840589
> 
> 赞同：0
> 
> 时间：2012-08-07T06:42:19.863
> 
> 标签：hadoop

我想将两个文件合并为一个。我做了两个 mapper 来阅读，一个 reducer 加入。

```
 JobConf classifiedConf = new JobConf(new Configuration());
            classifiedConf.setJarByClass(myjob.class);
    classifiedConf.setJobName("classifiedjob");
    FileInputFormat.setInputPaths(classifiedConf,classifiedInputPath );
    classifiedConf.setMapperClass(ClassifiedMapper.class);
    classifiedConf.setMapOutputKeyClass(TextPair.class);
    classifiedConf.setMapOutputValueClass(Text.class);
    Job classifiedJob = new Job(classifiedConf);
    //first mapper config

    JobConf featureConf = new JobConf(new Configuration());
    featureConf.setJobName("featureJob");
            featureConf.setJarByClass(myjob.class);
    FileInputFormat.setInputPaths(featureConf, featuresInputPath);
    featureConf.setMapperClass(FeatureMapper.class);
    featureConf.setMapOutputKeyClass(TextPair.class);
    featureConf.setMapOutputValueClass(Text.class);
    Job featureJob = new Job(featureConf);
            //second mapper config

    JobConf joinConf = new JobConf(new Configuration());
    joinConf.setJobName("joinJob");
            joinConf.setJarByClass(myjob.class);
    joinConf.setReducerClass(JoinReducer.class);
    joinConf.setOutputKeyClass(Text.class);
    joinConf.setOutputValueClass(Text.class);
    Job joinJob = new Job(joinConf);
             //reducer config
             //JobControl config
            joinJob.addDependingJob(featureJob);
    joinJob.addDependingJob(classifiedJob);
    secondJob.addDependingJob(joinJob);
    JobControl jobControl = new JobControl("jobControl");
    jobControl.addJob(classifiedJob);
    jobControl.addJob(featureJob);
    jobControl.addJob(secondJob);

    Thread thread = new Thread(jobControl);
    thread.start();
    while(jobControl.allFinished()){
        jobControl.stop();
    } 
```

但是，我收到这条消息：WARN mapred.JobClient:

```
Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String). 
```

任何人都请帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:53:16.743

您使用的是哪个版本的 Hadoop？

您收到的警告会停止程序吗？

您不需要使用 setJarByClass()。你可以看到我的代码片段，我可以在不使用 setJarByClass() 方法的情况下运行它。

```
JobConf job = new JobConf(PageRankJob.class);
job.setJobName("PageRankJob");

job.setOutputKeyClass(Text.class);
job.setOutputValueClass(Text.class);

job.setMapperClass(PageRankMapper.class);
job.setReducerClass(PageRankReducer.class);

job.setInputFormat(TextInputFormat.class);
job.setOutputFormat(TextOutputFormat.class);

FileInputFormat.setInputPaths(job, new Path(args[0]));
FileOutputFormat.setOutputPath(job, new Path(args[1]));

JobClient.runJob(job); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:06:03.737

您应该以这种方式实施您的工作：

```
public class MyApp extends Configured implements Tool {

    public int run(String[] args) throws Exception {
      // Configuration processed by ToolRunner
      Configuration conf = getConf();

      // Create a JobConf using the processed conf
      JobConf job = new JobConf(conf, MyApp.class);

      // Process custom command-line options
      Path in = new Path(args[1]);
      Path out = new Path(args[2]);

      // Specify various job-specific parameters     
      job.setJobName("my-app");
      job.setInputPath(in);
      job.setOutputPath(out);
      job.setMapperClass(MyMapper.class);
      job.setReducerClass(MyReducer.class);

      // Submit the job, then poll for progress until the job is complete
      JobClient.runJob(job);
      return 0;
    }

    public static void main(String[] args) throws Exception {
      // Let ToolRunner handle generic command-line options 
      int res = ToolRunner.run(new Configuration(), new MyApp(), args);

      System.exit(res);
    }
} 
```

这直接来自 Hadoop 的文档[here](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/util/Tool.html)。

所以基本上你的工作需要继承`Configured`和实现`Tool`. 这将迫使您实施`run()`. 然后从你的主课开始你的工作，`Toolrunner.run(<your job>, <args>)`警告就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T18:06:24.910

您需要在驱动程序中有此代码`job.setJarByClass(MapperClassName.class);`

# php - 尝试使用 PHP 上传文件时出现“未定义的索引”

> ID：11840594
> 
> 赞同：0
> 
> 时间：2012-08-07T06:43:19.590
> 
> 标签：php

这应该是非常直截了当的，让我发疯！

我正在尝试用 PHP 上传文件并将文件作为 blob 写入 MySQL。

问题是，当我尝试使用

$_FILES['file']['tmp_name'] 属性。

这是我的代码：

```
<head>
    <title>Upload Worksheet</title>
</head>
<body>
    <form action="index.php" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="MAX_FILE_SIZE" value="2000" />
        File : 
        <input type="file" name"file" id="file"><input type="submit" value="Upload">
    </form>

    <?php

        //connect to db
        mysql_connect("localhost","root","") or die(mysql_error());
        mysql_select_db("autoedi") or die(mysql_error());

        //file properties
        $file = $_FILES['file']['tmp_name'];

        if(!isset($file))
        echo "Please choose a file.";
        else {
            $uploadfile = addslashes(file_get_contents( $_FILES['file']['name']));
            $uploadfilename = addslashes($_FILES['file']['tmp_name']);  
        }

    ?>

</body> 
```

这是错误消息的样子：

![错误信息](../Images/a492d45e68197890fb979e5dcb484544.png)

我什至还没有进入数据库方面，因为我无法通过这个阶段。

我是一个 PHP 菜鸟，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:47:20.777

您收到该错误消息是因为尚未发送表单。当你点击上传按钮时，表单被发送到你的服务器，PHP 用数据填充 $_POST 和 $_FILES 数组。但是，直到那时，数组都是空的。因此，最好检查您的数据是否已设置，如下所示：

```
if (isset ($_POST['upload']))
{
    // upload logic here

    if(!isset($_FILES['file']) || ($_FILES['file']['tmp_name'] == ''))
        echo "Please choose a file.";
    else {
        $uploadfile = addslashes(file_get_contents( $_FILES['file']['name']));
        $uploadfilename = addslashes($_FILES['file']['tmp_name']);  
    }
} 
```

这假设您有一个名为“ `upload`”的提交按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:23:25.360

上面的答案是完美的，因为您应该检查 post 值以便在这些值上运行任何代码，但您也可以尝试以下操作

```
<?php

        //connect to db
        mysql_connect("localhost","root","") or die(mysql_error());
        mysql_select_db("autoedi") or die(mysql_error());

        //file properties
      if(isset($_POST))
    {

      if(array_key_exists('file',$_FILES))
    {   

     $file = $_FILES['file']['tmp_name'];

        if(!isset($file))
        echo "Please choose a file.";
        else {
            $uploadfile = addslashes(file_get_contents( $_FILES['file']['name']));
            $uploadfilename = addslashes($_FILES['file']['tmp_name']);  
        }

}

    ?> 
```

# xml - 带有命名空间的 xml 无法应用 xsl

> ID：11840595
> 
> 赞同：0
> 
> 时间：2012-08-07T06:43:27.190
> 
> 标签：xml, xslt, xml-namespaces

我正在尝试将 xsl（使用应用模板）应用于 xml，

这是xml，

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <SearchResponse xmlns="http://xyz/abcApi">
            <SearchResult>
                <Status>
                    <StatusCode>01</StatusCode>
                    <Description>Successful</Description>
                    <Category>SR</Category>
                </Status>
                <Result>
                    <WSResult>
                        <Index>1</Index>
                        <CityId>111</CityId>
                    </WSResult>
                    <WSResult>
                        <Index>2</Index>
                        <CityId>111</CityId>
                    </WSResult>
                </Result>
                <SessionId>1fc15f22-a670-4f33-b050-c93fa3184cb1</SessionId>
                <IsDomestic>true</IsDomestic>
            </SearchResult>
        </SearchResponse>
    </soap:Body>
</soap:Envelope> 
```

而 xsl 是，

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <Response>
            <Param>
                <Ref>
                    <Results>
                        <xsl:apply-templates select="//SearchResponse/SearchResult/Result/WSResult"/>
                    </Results>
                </Ref>
            </Param>
        </Response>
    </xsl:template>
    <xsl:template match="WSResult">
        <Result>
            <Property>
                <xsl:attribute name="Id"><xsl:value-of select="position()"/></xsl:attribute>
                <xsl:attribute name="CityCode"><xsl:value-of select="CityId"/></xsl:attribute>
            </Property>
        </Result>
    </xsl:template>
</xsl:stylesheet> 
```

此 xml 无法应用上面指定的 xsl。请提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:03:26.773

这是因为您应该在 XPath 表达式中指定名称空间。首先，您在标题中添加一个命名空间（我选择“搜索”作为前缀，但您可以更改它）。然后将此前缀添加到所有元素名称中：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:search="http://xyz/abcApi">
        <xsl:template match="/">
            <Response>
                <Param>
                    <Ref>
                        <Results>
                            <xsl:apply-templates select="//search:SearchResponse/search:SearchResult/search:Result/search:WSResult"/>
                        </Results>
                    </Ref>
                </Param>
            </Response>
        </xsl:template>
        <xsl:template match="search:WSResult">
            <Result>
                <Property>
                    <xsl:attribute name="Id"><xsl:value-of select="position()"/></xsl:attribute>
                    <xsl:attribute name="CityCode"><xsl:value-of select="search:CityId"/></xsl:attribute>
                </Property>
            </Result>
        </xsl:template>
    </xsl:stylesheet> 
```

# android - phonegap 过度滚动列表

> ID：11840601
> 
> 赞同：3
> 
> 时间：2012-08-07T06:43:53.960
> 
> 标签：android, listview, jquery-mobile, cordova

我正在使用 phonegap 在 android(4.0.3) 上开发应用程序

当我向下滚动列表并到达底部时，会出现一个蓝色突出显示以指示滚动结束（不确定它叫什么，显然是 overScroll）。

我需要找到一种方法来禁用它或隐藏它，因为我在底部有一个固定的页脚并且它溢出了它。有什么建议么？

使用以下：

*   电话间隙：2.0.0
*   安卓：4.0.3
*   jQuery手机：1.1.0
*   设备：三星 Galaxy S2

什么overscroll的图片：http: [//i1075.photobucket.com/albums/w435/zhp_pilot/Rezound/ICICS/neomax_overscroll_glow.png](http://i1075.photobucket.com/albums/w435/zhp_pilot/Rezound/ICICS/neomax_overscroll_glow.png)

# java - 如何使用 JAVA 创建 Tomcat 密钥库文件

> ID：11840605
> 
> 赞同：0
> 
> 时间：2012-08-07T06:44:30.577
> 
> 标签：java, jakarta-ee, tomcat, selenium, keystore

如何使用 JAVA 创建 Tomcat 密钥库文件

我正在创建与启用 SSL 的 tomcat 服务器的 http 连接，但它会生成错误 SSL Handshake failed

所以我想在运行时创建一个密钥库，因为我将联系多个启用 SSL 的服务器（不知道这种方法是否成功）

请提出一种如何使用 java 程序或任何其他绕过 SSL 握手的方式创建 tomcat 密钥库文件的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:29:23.680

Where are you getting sslhandshake error exactly? While client wants to connect to tomcat server or while tomcat server is trying to connect to other servers for some purpose? And can you paste the exception trace?

In either case, it does not make any sense to create keystore programatically in a server but one can inspect java's keytool source code to play on keystores.

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/security/tools/KeyTool.java/](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/security/tools/KeyTool.java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:48:52.287

查看 Tomcat 官网的 How-To guide SSL configuration

[http://tomcat.apache.org/tomcat-4.1-doc/ssl-howto.html](http://tomcat.apache.org/tomcat-4.1-doc/ssl-howto.html)

# algorithm - 是否有复杂的日期过滤算法？

> ID：11840606
> 
> 赞同：0
> 
> 时间：2012-08-07T06:44:33.343
> 
> 标签：algorithm, date, filter

本质上，我想要一个可以简单过滤的系统，例如“8 月 4 日和 8 月 7 日之间”，但可以像“闰年每个 1 月的第三个星期六或星期一”一样复杂。

我认为为了表示复杂的布尔代数，我需要一个树结构。每个节点要么是一个布尔运算（AND、OR、XOR、NOT），然后会有它适用的子节点，它可以是特定的过滤器或另一个布尔运算。

每个“特定过滤器”都类似于“星期日”或“闰年”。我认为到目前为止的一切都是非常可行的。然而，问题出现在解析树以实际找到所需的日期，以便随后进行数据库查询以获取数据点。

对于上面的示例（闰年每个一月的第三个星期六或星期一），如果我们将自己预先限制在我们拥有数据的年份（价值 5 年）。如果 sat/mon 过滤器恰好是树中的顶部节点，我们将得到 500 个分段日期（每周 2 个，每年 50 周，5 年）。然后，下一个节点必须搜索所有 500 个节点以找到符合“每三分之一”过滤器的节点。这甚至不是最复杂的例子，因为应该允许任意数量的过滤器，而 XOR 使这更加疯狂。

那么，有没有简单的路线呢？有人已经建造了这个吗？这只是一个涉及数据可视化的项目的一小部分，但它本身似乎可以是一个完整的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:57:01.190

我在 Ruby 中找到了[一对。](http://www.rubyinside.com/3-new-date-and-time-libraries-for-rubyists-3238.html)[IceCube](http://seejohnrun.github.com/ice_cube/)看起来很有希望，尽管它可能无法满足您的所有需求。

# javascript - mailto 函数显示全部在 URL

> ID：11840609
> 
> 赞同：0
> 
> 时间：2012-08-07T06:44:41.790
> 
> 标签：javascript, jquery, ruby-on-rails, html

当我单击**邮件**按钮时，gmail 客户端将打开，但问题是如何从浏览器 URL 中避免所有这些，所有这些主题、收件人、正文将显示在 URL 中。如何避免这种情况？或有任何安全问题？

```
<script type="text/javascript">
  var imageURL;
  function code (email,br) {

imagelink = "https://chart.googleapis.com/chart?
chs=250x250&cht=qr&chl=13&choe=UTF-8";
$("#image_url").val(imageURL);
$("#mailhere").html("<a  href='mailto:"+email+"?subject=code"+br+"&body=Click here to
get code "+encodeURIComponent(imagelink)+"'>Mail");

}

<div class="foot" id="code-foot">
   <div id="mailhere" class="span1">
   </div>  
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:46:52.227

你不能。如果您希望浏览器访问一个 URI，那么您应该期望它在地址栏中显示该 URI。

# android - Android：在更改 EditText 背景颜色时，EditText 样式发生更改

> ID：11840610
> 
> 赞同：4
> 
> 时间：2012-08-07T06:44:52.413
> 
> 标签：android, android-layout

嗨，当我更改`EditText`两个的背景颜色时，`EditText`它们看起来都在合并。

我的布局代码是这样的`

```
<EditText
    android:id="@+id/editText4"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="Text1"
    android:singleLine="true" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="Text2"
    android:singleLine="true" >
</EditText>

<AutoCompleteTextView android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:imeOptions="actionNext"/>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="Text3"
        android:singleLine="true" />

</LinearLayout>
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="Text4"
        android:singleLine="true" />

</LinearLayout>

 <Button
     android:id="@+id/button1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="Button" /> 
```

`

我的活动代码是这样的

```
public class MainActivity extends Activity {

EditText editText1, editText2, editText3, editText4;
Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    init();

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            editText1.setBackgroundColor(getResources().getColor(android.R.color.primary_text_dark_nodisable));
            editText3.setBackgroundColor(getResources().getColor(android.R.color.darker_gray));

        }
    });

}

private void init() {
    editText1 = (EditText) findViewById(R.id.editText1);
    editText2 = (EditText) findViewById(R.id.editText2);
    editText3 = (EditText) findViewById(R.id.editText4);
    button = (Button) findViewById(R.id.button1);

} 
```

}

请参阅下面的附加屏幕截图

点击按钮前的布局

![在此处输入图像描述](../Images/d4488f3c50b23cc2ec3831324ca7b080.png)

点击按钮后的布局

![在此处输入图像描述](../Images/04b918133bc5315f36d37995174f1192.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:32:03.680

正如您[在此处](https://stackoverflow.com/questions/9213449/removing-the-background-color-of-an-edittext)看到的，使用`EditText.setBackgroundColor(any color)`也会为您的轮廓着色。为了保持大纲方面，我建议在表格行中包含编辑文本并使用边距。在您的 xml 中尝试此操作并查看结果：

```
<TableRow
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/black"
    android:orientation="vertical" >

    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:color/holo_orange_dark"
        android:layout_margin="1dip"
        android:text="cosmincalistru" />
</TableRow> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T07:19:25.597

您为两个编辑文本设置了相同的 id。**@+id/editText2**

```
<EditText
    android:id="@+id/editText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="Text3"
    android:singleLine="true" /> 
```

```
<EditText
    android:id="@+id/editText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="Text4"
    android:singleLine="true" /> 
```

# c - Windows上C中重命名函数的权限被拒绝

> ID：11840611
> 
> 赞同：2
> 
> 时间：2012-08-07T06:44:52.803
> 
> 标签：c, windows

我有一个用 C 开发的应用程序。这个应用程序支持跨多个平台。有一个功能是我们通过文件传输协议将文件传输到不同的机器或本地机器上的任何其他目录。我想包含一个功能，我可以用一些临时名称传输文件，一旦传输完成，我想用正确的名称（实际文件名）重命名文件。

我尝试使用简单的 rename() 函数。它在 Unix 和 Linux 机器上运行良好。但它不适用于 Windows。它给了我一个错误代码 13（权限被拒绝错误）。

首先，如果我必须授予文件某些权限等，我在 msdn 中签入以了解重命名的功能。

1.  我授予了文件的完全权限（假设它是 777）。
2.  我在其他几篇文章中读到我应该在重命名文件之前关闭文件描述符。我也这样做了。它仍然给出同样的错误。
3.  很少有其他帖子提到文件的所有者和应用程序的所有者。该应用程序将以 SYSTEM 用户身份运行。（但这不应该影响行为，因为我在我的应用程序中尝试了相同的重命名函数，如下所示：

这在我的应用程序中运行良好：

```
rename("C:/abc/aaa.txt","C:/abc/zzz.txt"); 
```

但

```
rename(My_path,"C:/abc/zzz.txt"); 
```

不起作用，`My_path`打印时显示在哪里`C:/abc/test.txt`。

如何重命名文件？我需要它在多个平台上工作。还有什么其他的事情我应该努力让它发挥作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:33:55.063

我有同样的问题，但问题略有不同。如果我执行了以下函数调用序列，则在调用重命名函数时得到“权限被拒绝”。

```
fopen
fwrite
rename
fclose 
```

解决方案是在重命名之前先关闭文件。

```
fopen
fwrite
fclose
rename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:12:24.987

如果

```
rename("C:/abc/aaa.txt","C:/abc/zzz.txt"); 
```

有效，但

```
rename(My_path,"C:/abc/zzz.txt"); 
```

没有，在程序的完全相同的位置（即用另一行替换并且不做任何更改），那么变量 My_path 可能有问题。这个变量的类型是什么？如果它是一个 char 数组（因为这是 C），它是否适当地终止了？它是否完全等于“C:/abc/aaa.txt”？

（我希望我可以将此作为评论/澄清而不是作为答案发布，但我的代表还不够好:()

# c# - 如何使用 C# 查找相机捕获分辨率？

> ID：11840620
> 
> 赞同：1
> 
> 时间：2012-08-07T06:45:19.497
> 
> 标签：c#

我需要知道，如何使用 c# 找到相机捕捉分辨率。

# objective-c - xCode 4.4 没有得到所有的 .pch 文件头导入？

> ID：11840622
> 
> 赞同：28
> 
> 时间：2012-08-07T06:45:20.190
> 
> 标签：objective-c, header-files, precompiled-headers

这是我的 .pch 文件 -

```
 //
// Prefix header for all source files of the 'English Club' target in the 'English Club' project
//

#import <Availability.h>

#ifndef __IPHONE_4_0
#warning "This project uses features only available in iOS SDK 4.0 and later."
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import <CoreData/CoreData.h>
    #import "Helper.h"
    #import "Animations.h"
    #import "Constants.h"
    #import "SoundPlayer.h"
    #import "UAirship.h"
    #import "UAStoreFront.h"
    #import "UIIMagesNames.h"
    #import "UIView+Sizes.h"
    #import "HelpButton.h"
    #import "SoundPlayer.h"
    #import <RestKit/RestKit.h>
    #import "UIHelpSoundFiles.h"

#endif 
```

Xcode 仍然经常给我错误，他找不到那些类。（例如助手）。问题是该项目将被编译并且工作正常，但我有数百个错误干扰我寻找真正的错误。

知道为什么吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-07T14:15:59.360

这似乎是 Xcode 4.4 中的一个已知问题（见[发行说明](https://developer.apple.com/library/mac/releasenotes/DeveloperTools/RN-Xcode/_index.html#//apple_ref/doc/uid/TP40001051-SW145)）

建议`Delete the PCH index folder`解决此问题。

要找到这个文件夹，在 Xcode 中，打开 Organizer 并选择 Projects 选项卡，然后在左侧窗格中选择项目。您应该会看到`Derived Data`这个特定项目的路径，其中带有一个指向 的小箭头`Show in Finder`。如果单击此箭头，您将被带到 Finder 中的正确位置。如果您随后导航到`Index`子文件夹并删除`PrecompiledHeaders`文件夹，那么您应该已准备就绪。

Xcode 应该重新索引，并重新创建这个文件夹，但是错误应该消失了。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-05-16T21:47:42.880

我发现只需更新您的 pch 文件（添加和删除空间）并重建将导致 xcode 修复这些问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-30T03:18:16.320

I know this is an old post but I wanted to share my experience. Im running Xcode 6.1 the fix was to delete the Tests target. for example MyProjectNameTests.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T05:16:41.037

还要检查您的 app.pch 和 app_Test.pch 是否都具有所需的导入。有时您可能正盯着主 pch，但错误是针对单元测试 pch。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-25T21:13:39.620

Xcode 5 更新：

You can now delete derived data straight from Xcode Organizer. Delete, clean, and build solved the problem for me.

![enter image description here](../Images/6f57b3267a9c297fe119bade566f4dd5.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-13T13:56:14.107

Also one of the problem could be that .pch file is not set for a target. To do that do the following:
1\. Go to the target settings.
2\. Option **Precompile Prefix Header** set to YES.
3\. For **Prefix Header** add a project relative path or an absolute path.

# qt - Qt 的 SDL 音频等价物是什么？

> ID：11840624
> 
> 赞同：2
> 
> 时间：2012-08-07T06:45:34.833
> 
> 标签：qt, ffmpeg, sdl

有一个旧代码使用 SDL 音频输出音乐。我将它移植到 Qt 并且我想用原生 Qt 音频 API 替换 SDL 音频。

简单来说，流程是这样的：

```
...
// Initialization
wanted_spec.callback = sdl_audio_callback;
SDL_OpenAudio(&wanted_spec, &spec);
...

// copies raw data to audio buffer
static void sdl_audio_callback(void *opaque, Uint8 *stream, int len) 
```

我应该使用 Qt 的哪个音频 Api？不涉及视频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:16:54.360

通常你会使用更高级别的`Phonon`模块，[这里](https://qt-project.org/doc/qt-4.8/phonon-module.html)是它的 API 文档。但是因为您正在处理原始样本，所以您将需要较低级别的`QtMultimedia`模块，特别是`QAudioOutput`类。文档[在这里](https://qt-project.org/doc/qt-4.8/qtmultimedia.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:19:25.497

**[SFML - 简单快速的多媒体库](http://www.sfml-dev.org/features.php)**

> **主要特点：**
> 
> **Portable** SFML 在标准平台上编译，如 Windows（98、2000、XP、Vista）和 Unix 系统（Linux、Mac OS X）。随着库的发展，将添加对更多操作系统的支持。
> 
> **面向对象的**SFML 是用 C++ 编写的，提供了一种高效的面向对象的设计。它依赖于标准模式和习惯用法来提供一个简单而健壮的框架。
> 
> **易于使用**SFML 旨在易于操作。努力在内部代码上提供最简单的公共接口。
> 
> **灵活**SFML 不是一个大 API，而是包含许多小包，可以根据预期用途进行选择和组合。您只能使用基本包来获取输入和窗口，以及带有精灵和后期效果的完整图形包。
> 
> **易于集成**的 SFML 可以在一个或多个窗口中使用，和/或可以集成到现有的界面组件中。与现有图形用户界面 (GUI) 库的集成很容易，因此您可以将 SFML 视图添加到使用 Qt、wxWidgets、MFC 或其他工具构建的复杂界面中。

希望这可以帮助。

# android - 使用自定义键盘中可见的候选视图重新调整 UI

> ID：11840627
> 
> 赞同：8
> 
> 时间：2012-08-07T06:45:56.170
> 
> 标签：android, android-softkeyboard

我正在使用自定义键盘。我在 onCreateCandidatesView() 中设置了 setCandidatesViewShown(true) 函数，问题是 UI 没有正确调整。

任何帮助都会很棒..以下是我所做的

```
@Override 
public View onCreateCandidatesView() {      

    LayoutInflater li = (LayoutInflater) getApplicationContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View wordBar = li.inflate(R.layout.wordbar, null);
    LinearLayout ll = (LinearLayout) wordBar.findViewById(R.id.words);
    Button voiceCmd = (Button) wordBar.findViewById(R.id.voiceword);
    LinearLayout ll1 = null;
    Button voiceCmd1 = null;
    //comment this block in the event of showing only one keyboard so that we can only
    //one autocorrect bar
    if (isLargeScreen) {
        ll1 = (LinearLayout) wordBar.findViewById(R.id.words1);
        voiceCmd1 = (Button) wordBar.findViewById(R.id.voiceword1);
    }

    voiceCmd.setOnClickListener(voiceClickListener);

    mCandidateView = new CandidateView(this);
    mCandidateView.setService(this);
    setCandidatesViewShown(true);
    mCandidateView.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

    ll.addView(mCandidateView);             

    return wordBar;

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-18T20:13:48.387

我有同样的问题。我在 Ced [here](https://groups.google.com/forum/#!topic/android-developers/yp7c7zsUSlo)的帖子中找到了答案。

解决方案是将其添加到您的输入法服务中，

```
@Override public void onComputeInsets(InputMethodService.Insets outInsets) {
    super.onComputeInsets(outInsets);
    if (!isFullscreenMode()) {
        outInsets.contentTopInsets = outInsets.visibleTopInsets;
    }
} 
```

候选视图不会向上推动应用程序是有意的。从[文档](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html)中，

> 请注意，由于候选视图倾向于显示和隐藏很多，它不会像软输入视图那样影响应用程序 UI：它永远不会导致应用程序窗口调整大小，只会在需要时使它们平移用户查看当前焦点。

上面的 hack 增加了“内容”区域以包括候选视图区域。的文档`onComputeInsets`将帮助您理解这个概念。

> 在你的 UI 中计算有趣的插图。默认实现使用候选帧的顶部作为可见插图，并将输入帧的顶部作为内容插图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-01T09:53:21.297

我面临着同样的问题。问题是当我们添加`CandidateView`它时不会调整 ui。而不是调整它重叠在编辑文本上。

**像这样：** [![在此处输入图像描述](../Images/d18f287a5b325b899e185b290178c47c.png)](https://i.stack.imgur.com/x7Rkt.jpg)

**简单的解决方案**

继承的类`InputMethodService`有一个方法`onComputeInsets`。只需覆盖该功能并检查屏幕是否完全覆盖。如果屏幕不在，`fullScreenMode();`则将此行添加到其中。它将从 向上调整屏幕`candidateView`。

> outInsets.contentTopInsets = outInsets.visibleTopInsets;

## 像这样

```
 @Override
public void onComputeInsets(Insets outInsets) {
    super.onComputeInsets(outInsets);
    if (!isFullscreenMode()) {
        outInsets.contentTopInsets = outInsets.visibleTopInsets;
    }
} 
```

**结果将是**

[![在此处输入图像描述](../Images/a14e5c7cc7b4013c9a8c3657cdd35009.png)](https://i.stack.imgur.com/pwXFt.jpg)

# ios - 如何使用情节提要隐藏 UINavigationController 的工具栏？

> ID：11840629
> 
> 赞同：8
> 
> 时间：2012-08-07T06:46:05.073
> 
> 标签：ios, uinavigationcontroller, uistoryboard

我有一个故事板 iOS 应用程序，其中包含许多我推送的视图。我有一个 UINavigationController 选择了“显示工具栏”选项，然后填充整个视图层次结构。

假设我的视图流是 3 个视图，A、B 和 C：

```
View A --(push)--> View B --(push)--> View C 
```

View A 是一个普通的 View Controller，工具栏上有一个按钮用来推送 View B。 View B 是一个表格控制器，所以我想在这里隐藏工具栏。视图 C 是与视图 A 类似的另一个视图，需要显示工具栏。

在 Xcode/Storyboard 中，如果在 View BI 中选择“Hides bottom bar on push”，它确实会这样做 - View B 的底栏是隐藏的。同样，如果我为“Bottom bar”选择选项选择“None”，则没有View B 的酒吧。很好。

这是我的问题：无论我做什么，使用视图 B 的任一选项，我的工具栏都不会返回视图 C。如果我将视图 C 的工具栏设置为推断（并取消选中推送时隐藏），它不会显示，也不会显示如果我手动将其设置为“工具栏”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-07T07:14:26.937

正如@Zoltán 所说，Storyboard 没有提供完整的答案。

在 viewDidLoad 或 viewWillAppear 上设置 self.navigationController.toolbarHidden = YES/NO 是可行的，但很难看（在视图转换动画期间，工具栏出现一个黑色矩形）。

这是我为 View B 控制器（以及 View C 的反面）所做的，以模仿情节提要中“hide on push”选项的动画平滑度：

```
- (void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setToolbarHidden:YES animated:YES];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [self.navigationController setToolbarHidden:NO animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:53:57.587

我不认为你可以纯粹在故事板中做到这一点。但是，您可以将其设置为始终显示，为您希望它出现的每个视图放置按钮，然后您可以调用 self.navigationController.toolbarHidden = YES; 当加载视图控制器时，您不希望工具栏出现。之后，如果出现另一个您确实需要工具栏的 VC，只需将 toolbarHidden 设置为 NO。

# java - 高性能 JMS 消息传递

> ID：11840630
> 
> 赞同：13
> 
> 时间：2012-08-07T06:46:20.013
> 
> 标签：java, spring, jms, activemq, messaging

我阅读了今年 UberConf 的幻灯片，其中一位演讲者认为 Spring JMS 会为您的消息队列系统增加性能开销，但是我在幻灯片中没有看到任何证据支持这一点。演讲者还提出，点对点比传统的“发布-订阅”方法更快，因为每条消息只发送一次，而不是广播给每个消费者。

我想知道是否有任何经验丰富的 Java 消息传递专家可以在这里权衡并澄清一些技术细节：

*   使用 Spring JMS 而不是纯 JMS 实际上会产生性能开销吗？如果是这样，它是如何以及在哪里引入的？有什么办法吗？
*   有什么实际证据支持 P2P 比 pub-sub 模型更快，如果是这样，是否有任何情况下您希望通过 P2P 进行 pub-sub（即*为什么要慢？！？*）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-07T09:17:38.767

1）主要的，Spring JMS 的开销是使用 JmsTemplate 在没有底层缓存机制的情况下发送消息。本质上，JmsTemplate 将为您发送的每条消息执行以下操作：

*   创建连接
*   创建会话
*   创建生产者
*   创建消息
*   发信息
*   关闭会话
*   关闭连接

这可以与您重用事物的手动编写代码进行比较：

*   创建连接
*   创建会话
*   创建生产者
*   创建消息
*   发信息
*   创建消息
*   发信息
*   创建消息
*   发信息
*   关闭会话
*   关闭连接

由于创建连接、会话和生产者需要您的客户端和 JMS 提供者之间的通信，当然还有资源分配，这将为大量小消息产生相当大的开销。

您可以通过缓存 JMS 资源轻松解决此问题。例如，使用 spring [CachingConnectionFactory](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jms/connection/CachingConnectionFactory.html)或 ActiveMQs [PooledConnectionFactory](http://activemq.apache.org/maven/5.5.0/activemq-pool/apidocs/org/apache/activemq/pool/PooledConnectionFactory.html)（如果您使用的是 ActiveMQ，您使用它标记了这个问题）。

如果您在一个完整的 JavaEE 容器中运行，那么当您检索 JNDI 连接工厂时，池/缓存通常是内置的并且是隐式的。

接收时，使用 spring Default Message Listening Container，spring 中有一个薄层，可能会增加很少的开销，但主要方面是您可以在并发等方面调整性能。[这篇文章](http://bsnyderblog.blogspot.se/2010/05/tuning-jms-message-consumption-in.html)很好地解释了它。

2)

PubSub 是一种使用模式，发布者不需要知道存在哪些订阅者。你不能简单地用 p2p 来模拟它。而且，在没有任何证据的情况下，我认为如果您想从一个应用程序向其他十个应用程序发送相同的消息，那么 pub-sub 设置将比发送消息快十倍 p2p。

另一方面，如果您只有一个生产者和一个消费者，请选择带队列的 P2P 模式，因为它在某些方面更易于管理。P2P（队列）允许负载平衡，而 pub/sub 则不允许（很容易）。

ActiveMQ 也有一个混合版本，[VirtualDestinations](http://activemq.apache.org/virtual-destinations.html) - 它本质上是具有负载平衡的主题。

不同供应商的实际实现有所不同，但主题和队列并没有根本的不同，并且应该具有相似的性能。您应该检查的是：

*   坚持？（=较慢）
*   消息选择器？（=较慢）
*   并发？
*   持久订户？（=较慢）
*   请求/回复，与临时队列“同步”（= 开销 = 较慢）
*   队列预取（=在某些方面影响性能）
*   缓存

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T04:18:56.200

你是在谈论马克理查兹的幻灯片吗？他为他的基准测试发布了源代码，因此您可以实际测试他关于 JmsTemplate 性能的断言。他的基准代码确实使用了 Spring 的 CachingConnectionFactory，但尽管有缓存，它仍然显示出 JmsTemplate 的显着性能损失。我已经执行、分析和分析了他的代码。简短的回答是 JmsTemplate 的开销可以忽略不计，而且他的代码中可测量的性能差异与 ActiveMQ 的异步与同步发送模式有关。我在这里发表了我的分析：

[JmsTemplate 并不邪恶](http://chriswongdevblog.blogspot.com/2013/01/jmstemplate-is-not-evil.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T12:56:33.987

1) Spring 模板为发送/接收的每条消息打开/关闭连接/会话。这就是为什么它更慢。大多数 JMS 实现在连接/会话保持打开状态时性能更好，因此它们可以使用消息预取等优化，更不用说避免执行所有连接设置/拆除位的开销。

2) 如果主题将数据复制/复制给多个消费者，主题通常会较慢。这只是一个物理问题。如果 10 兆的消息被队列发送到一个队列，那么只需要 10 兆的数据传输给消费者。在主题上，如果您有 10 个消费者，并且您向其发送 10 兆数据，那么必须将 100 兆数据传输给消费者。因此，对于大多数 JMS 实现：

*   将消费者添加到主题只会降低您的消费速度。
*   将消费者添加到队列通常有助于提高出队率。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T07:48:54.170

我不是消息大师，我希望你不要在这里分享我的想法；）

1.  总会有开销，因为你有额外的间接性。即使它只是调用堆栈中的一个额外级别，它仍然是开销。但是，我相信这样的开销是最小的。您可以查看 JmsTemplate 的源代码。Spring在发送期间没有添加太多额外的东西。如果您仍然使用 JMS，JmsTemplate 主要是在做您需要做的事情。您总是可以争辩说，那些额外的检查和更深入的方法调用总是需要更多的 CPU 周期和内存。这是真的，但我想知道它有多重要。

2.  PubSub 和 P2P（JMS 术语中的主题和队列）只是两种不同的模型。我相信它们是无法相互替代的。您不能通过使用队列来获得“一次发送并广播到多个接收者”行为，同时在使用主题时您不能拥有保证交付行为（除非使用持久订阅者，但这是另一个主题）。所以，选择合适的类型取决于你在做什么，而不是一味的说P2P优于PubSub（我认为这是无稽之谈）

# java - 使字符串对java中的所有类都可用和可修改

> ID：11840631
> 
> 赞同：0
> 
> 时间：2012-08-07T06:46:23.183
> 
> 标签：java, string

我有一个字符串，我想让它对所有类都可用。每个类都可以修改字符串，当我再次使用字符串时，修改将保留在字符串中。我有 3 个动作侦听器，我想通过每个动作侦听器修改字符串并保留更改。我想将修改后的字符串写入文件，这是在 main 方法中完成的。我应该怎么做才能使字符串对类可用并保留类所做的修改？我试过这个-

```
public class BasicGuiOnlyText {    
  static String outputHtml="";  
  //Rest code of the class }   
  mnuItemNew.addActionListener(new ActionListener() {    
    public void actionPerformed(ActionEvent e) {    
    outputHtml+="<html>";  
  }  
}  
public static void main(String args[]){  
  BasicGuiOnlyText gui = new BasicGuiOnlyText();  
  OutputStream htmlfile= new FileOutputStream(new File("test.html"));//For the creation of HTML file  
  PrintStream printhtml = new PrintStream(htmlfile);
  printhtml.println(outputHtml);  
} 
```

但这不起作用。它不适用于 actionlistener 类。如果我在 actionlistener 类中使用另一个字符串声明它是 ststic，则该字符串对主类不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:52:33.850

假设你有一个类加载器然后

```
public Class Classname {
    public static STRING_NAME = String 
   ... 
```

将作为 Classname.STRING_NAME 公开提供给任何班级

但是，要将字符串保存在文件中，您最好定义一个专用的单例类，其中包含获取和设置当前值的方法。在 put 后​​面，您将使用代码将值写入文件，在 get 值后面，您将从文件中读取当前值。

如果您的应用程序使用多个线程，那么您可能还需要同步读/写操作。

就像是

```
public class StringValue {
    private static StringValue instance = new StringValue();

    private StringValue() { 
       ... constructor 
    }

    public static StringValue getInstance() {
        return instance;
    }

    public synchronized void putValue(String newValue) {
        write to file...
    }

    public synchronized String getValue() {
        read the file ...
    }
} 
```

如果您在同步方面遇到性能问题，那么您可以进一步缓存当前值。

客户端代码将类似于

```
String currentValue = StringValue.getInstance().getValue();

StringValue.getInstance().putValue("NewValue"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:53:29.683

将字符串公开，并使用静态导入将其导入 ActionListener，或导入类并使用引用`BasicGuiOnlyText.outputHtml`。

请记住，除非您指定变量所在类的名称空间，否则 JVM 将无法解析它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:55:04.253

如果它只是一个字符串，我希望您使用类似 a 的东西`Property file`，**您可以在其中写入然后从中读取**。但是如果你想把它放到一个类而不是文件中......那么请执行以下操作。

**1.**`class`用`public static String variable`. _

**2.**现在只需使用类名从另一个类中调用此方法。

**例如：**

```
public class Test{

    public static String s;

 } 
```

**3.**在**多线程**应用程序的情况下，`synchronization`将需要。

# bash - 如何正确启动redhat linux服务？

> ID：11840632
> 
> 赞同：0
> 
> 时间：2012-08-07T06:46:25.683
> 
> 标签：bash, service, redhat

我已经定义了一个服务并放在文件夹/etc/rc.d/init.d/somename 中，它放在chkconfig 中，级别为2-5。

但是，当我运行`service somename start,`它时，它没有启动。但是，如果我`somename start`直接运行，它会启动，

我错了哪一部分？

谢谢。

```
#!/bin/sh
# Startup script for xxx
#
# chkconfig: 2345 99 99
. /etc/rc.d/init.d/functions

prog="file"

start() {
    echo -n $"Starting : "
    echo
    daemon  /path/to/some/file
    let RETVAL=RETVAL+$?
    return $RETVAL
}

stop() {
    if test "x`pidof -x $prog`" != x; then
        echo -n $"Stopping $prog: "
        killproc  $prog
        echo
    fi
    RETVAL=$?
    return $RETVAL
}

case "$1" in
        start)
            start
            ;;

        stop)
            stop
            ;;

        status)
            echo $prog
            status $prog
            ;;

        restart)
            stop
            start
            ;;
        *)
            echo $"Usage: $0 {start|stop|restart|status}"
            exit 1

esac 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:04:36.010

您的脚本似乎是正确的。

您可以添加`set -x`到脚本的开头，再次启动它，看看会发生什么。

# javascript - 独立节点设置而不是虚拟主机的问题？

> ID：11840634
> 
> 赞同：0
> 
> 时间：2012-08-07T06:46:35.977
> 
> 标签：javascript, node.js, express, connect, vhosts

我想将我的应用程序分成两部分：

1.  公众可访问，进行注册、登录、重置。(security.example.org)
2.  私有可访问，提供内部api需要认证（app.example.org）

我现在想知道将它们分成两个独立的节点设置而不是使用 connect.vhosts 是否是个好主意。

好处是我们可以独立开发这两个部分，它们也应该非常独立地工作，除了应用程序部分需要安全部分。

我只是对这个想法有以下问题：

*   在一台主机上运行时端口重叠
*   客户端应用程序的跨域设置
*   其他不兼容？

有人已经获得了并排使用多个节点项目的经验吗？

如果是，其他可能的问题可能是什么？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:15:40.180

最好的两个词怎么样 - 即，分别开发每个应用程序，作为一个包，`export`然后将这两个部分放在`connect.vhost`第三个应用程序中。因此，本质上，您正在编写两个库（即使它们的行为类似于 Web 服务器，并且可以单独作为 Web 服务器运行）并将它们捆绑在一个应用程序中。

# android - 如何在 Android 2.2 中设置 spinnerMode？

> ID：11840636
> 
> 赞同：3
> 
> 时间：2012-08-07T06:46:43.787
> 
> 标签：android, android-spinner

我可以`android:spinnerMode`在 Android 2.2 中使用 xml 属性吗？

我需要获得一个锚定到`Spinner`小部件的内联下拉菜单，而不是进入对话框窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T07:09:49.220

`ActionBarSherlock`库的作者 Jake Wharton使得`IcsSpinner`在操作栏之外使用成为可能。通读此讨论：[https ://groups.google.com/d/topic/actionbarsherlock/fL-JL6Mn7kg/discussion](https://groups.google.com/d/topic/actionbarsherlock/fL-JL6Mn7kg/discussion)

`IcsSpinner`允许设置`dropdown`或`dialog`模式。

# c# - 从数据库传递数据

> ID：11840644
> 
> 赞同：1
> 
> 时间：2012-08-07T06:47:10.193
> 
> 标签：c#, sql-server

这个问题很复杂，但我希望你能理解我的问题。我第一次使用数据库，带有数据集和适配器的 sql server。这是我的简要申请：

我有 MainManager 调用 MotelManager 中的方法（LoadData），然后该方法调用 DataAccess 中的方法（LoadDataFromDB），这是一个 DLL 项目。

我的问题和需要帮助和理解的开始是，如何将每行中的列中的值返回到 MainManager 中的调用方法？

一种方法可能是像下面的代码一样创建一些临时对象并将该对象传回，但我无法在 DataAccess 中创建它的实例！？当涉及到引用和命名空间时，我总是遇到麻烦:(这是最好和最简单的方法吗？非常感谢帮助！谢谢！

```
 public class TempObj
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Age { get; set; }
    public string Gender { get; set; }
    public string Type { get; set; }
    public string Category { get; set; }
    public string Info { get; set; }

    public TempObj()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:52:30.910

正如您已经猜到的那样，您将需要在类中“映射”数据。但是没有从头开始构建整个映射结构。

您可以使用实体框架（又名“EF”），它是一种自动生成反映您的数据库的类的基础设施。在大多数情况下，MSDN 是您最好的朋友：[入门（实体框架）](http://msdn.microsoft.com/en-us/library/bb386876.aspx "入门（实体框架")

# php - 如何在php中将所有音频格式转换为mp3？

> ID：11840650
> 
> 赞同：-2
> 
> 时间：2012-08-07T06:47:23.153
> 
> 标签：php, audio, mp3, formats

如何在php中将所有音频格式转换为mp3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:49:03.887

使用 ffmpeg 可能会有所帮助。详情[http://ffmpeg.org/](http://ffmpeg.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:53:49.183

首先，您在系统上安装[ffmpeg](http://ffmpeg.org/)。（它是免费的），然后在 PHP 中，您可以调用 ffmpeg 使用系统命令将任何音频文件转换为 mp3，如下所示：

```
<?php
$output = system("ffmpeg parameters...");
echo $output;
?> 
```

有关如何调用 ffmpeg 的示例，请参阅 ffmpeg 文档。

# c - 如何在 C 中实现动态调度表

> ID：11840651
> 
> 赞同：6
> 
> 时间：2012-08-07T06:47:32.817
> 
> 标签：c, c-preprocessor, dispatch

首先，我了解如何使用函数指针和字符串或其他查找来实现调度表，这不是挑战。

我正在寻找的是某种*在编译时*动态地将条目添加到该表的方法。

我希望的代码结构类型类似于：

Strategy.h - 包含调度程序的函数定义和调度表定义 Strategy.c - 包含调度程序的代码

MyFirstStrategy.c - 包含 Strategy.h 并提供策略的一个实现 MyOtherStrategy.c - 包含 Strategy.h 并提供策略的第二个实现

这个想法是，将函数指针和策略名称插入调度表的代码不应该存在于 Strategy.c 中，而应该存在于单独的策略实现文件中，并且查找表应该在编译时以某种方式动态构建。

对于固定大小的调度表，可以按如下方式进行管理，但我想要一个动态大小的表，我不希望 Strategy.c 实现必须包含实现的所有头文件，我希望调度要在编译时而不是运行时构建的表。

固定大小示例

## 策略.h

```
typedef void strategy_fn_t(int);
typedef struct {
    char           *strategyName;
    strategy_fn_t  *implementation;
} dispatchTableEntry_t; 
```

## MyFirstStrategy.h

```
#include "Strategy.h"

void firstStrategy( int param ); 
```

## MyOtherStrategy.h

```
#include "Strategy.h"

void otherStrategy( int param ); 
```

## 策略.c

```
#include "Strategy.h"
#include "MyFirstStrategy.h"
#include "MyOtherStrategy.h"

dispatchTableEntry_t dispatchTable[] = {
    { "First Strategy", firstStrategy },
    { "Other Strategy", otherStrategy }
};
int numStrategies = sizeof( dispatchTable ) / sizeof(dispatchTable[0] ); 
```

我真正想要的是一些预处理器魔法，我可以将其插入到策略实现文件中以自动处理它，例如

## MyFirstStrategy.c

```
#include "Strategy.h"

void firstStrategy( int param );

ADD_TO_DISPATCH_TABLE( "First Strategy", firstStrategy ); 
```

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:55:59.703

在具有 gnu 链接器和编译器或兼容的系统上，可以将某些对象放在不同的部分中。然后，链接器将为节的开头和结尾生成符号。使用它，您可以将所有结构放入不同对象的该部分中，链接器将在链接时合并这些部分，您可以将它们作为数组访问。如果您在共享库中执行此操作，并且在 ELF Linux/*BSD 之外绝对不可移植，则这需要更多的操作。

我在 MacOS 和 a.out BSD 上做过类似的事情（虽然这个例子不起作用），但是我丢失了那个代码。这是一个如何在 Linux 上运行的示例：

```
$ cat link_set.c
#include <stdio.h>

struct dispatch_table {
    const char *name;
    void (*fun)(int);
};

#define ADD_TO_DISPATCH_TABLE(name, fun) \
    static const struct dispatch_table entry_##fun \
        __attribute__((__section__("link_set_dispatch_table"))) = \
        { name, fun }

int
main(int argc, char **argv)
{
    extern struct dispatch_table __start_link_set_dispatch_table;
    extern struct dispatch_table __stop_link_set_dispatch_table;
    struct dispatch_table *dt;

    for (dt = &__start_link_set_dispatch_table; dt != &__stop_link_set_dispatch_table; dt++) {
        printf("name: %s\n", dt->name);
        (*dt->fun)(0);
    }
    return 0;
}

void
fun1(int x)
{
    printf("fun1 called\n");
}
ADD_TO_DISPATCH_TABLE("fun 1", fun1);

void
fun2(int x)
{
    printf("fun2 called\n");
}
ADD_TO_DISPATCH_TABLE("fun 2", fun2);
$ cc -o link_set link_set.c
$ ./link_set
name: fun 1
fun1 called
name: fun 2
fun2 called
$ 
```

解释宏的作用。它创建了一个结构 dispatch_table ，其名称我们希望是唯一的，因为您可能希望在一个对象中多次使用它（如果您多次使用相同的函数，请找出其他方法来命名该结构）并使用gnu 扩展来指定对象应该以哪个部分结束。如果我们将对象放入“some_section_name”，那么链接器将自动添加符号 __start_some_section_name 和 __end_some_section_name。然后我们可以在这些符号之间走动，并获得我们放入该部分的所有结构。

更新了一个适用于 MacOS 的工作示例：

```
#include <stdio.h>
#include <mach-o/ldsyms.h>
#include <mach-o/getsect.h>
#include <mach-o/loader.h>

struct dispatch_table {
        const char *name;
        void (*fun)(int);
};

#define ADD_TO_DISPATCH_TABLE(name, fun) \
    static const struct dispatch_table entry_##fun \
    __attribute__((__section__("__DATA,set_dt"))) = \
    { name, fun }

int
main(int argc, char **argv)
{
        struct dispatch_table *start;
        unsigned long sz;
        intptr_t s;
        int i;

        s = (intptr_t)getsectdata("__DATA", "set_dt", &sz);
        if (s == 0)
                return 1;
        s += _dyld_get_image_vmaddr_slide(0);
        start = (struct dispatch_table *)s;
        sz /= sizeof(*start);

        for (i = 0; i < sz; i++) {
                struct dispatch_table *dt = &start[i];
                printf("name: %s\n", dt->name);
                (*dt->fun)(0);
        }
        return 0;
}

void
fun1(int x)
{
        printf("fun1 called\n");
}
ADD_TO_DISPATCH_TABLE("fun 1", fun1);

void
fun2(int x)
{
        printf("fun2 called\n");
}
ADD_TO_DISPATCH_TABLE("fun 2", fun2); 
```

该部分必须在此处称为“set_dt”，因为在此可执行格式中，部分名称的长度受到限制。

当然，如果你已经到了需要这个的地步，你肯定明白这一切都是非常危险的，不可移植的，不能保证永远工作（我三年前的代码在当前版本的 macos 上不起作用） , 没有类型或其他安全性，如果其他东西决定把东西放在同名的部分，事情最终会变成非常漂亮的烟花。但这是一个非常巧妙的技巧。我在两个大型项目中使用了这种方法，它确实节省了大量工作，中央调度表不必在曾经给每个人带来冲突的共享存储库中编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:07:27.827

您应该能够使用具有功能指针的结构的链接列表来做到这一点：

```
struct dispatch_entry {
    const char *name;
    void (*func)(int);
    struct dispatch_entry *next;
};

struct dispatch_entry *dispatch_head = NULL;

#define ADD_TO_DISPATCH_TABLE(entry) do { \
    (entry)->next = dispatch_head; \
    dispatch_head = entry; \
} while (0) 
```

然后，您可以遍历列表以找到所需的条目，或者稍后在运行时对其进行排序/放置到优化的查找例程等中。请注意，这需要您在宏之外实例化 dispatch_entry 结构，但我认为这不是主要问题。

一如既往，警告购买者，因为我没有编译/运行这段代码，只是为了说明技术（我在各种工作项目中使用过几次）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:48:35.313

由于您的 Strategy.c 显然已经通过名称 ("#include "XYstrategy.h") 知道策略实例，因此您可以全力以赴并使用头文件而不是实现文件将您的策略​​传达给中央调度程序：

MyFirstStrategy.h

```
#include "Strategy.h"
void firstStrategy( int param );
#define MY_FIRST_STRATEGY {"First Strategy", firstStrategy} 
```

MyOtherStrategy.h

```
#include "Strategy.h"
void otherStrategy( int param );
#define MY_OTHER_STRATEGY {"Other Strategy", otherStrategy } 
```

策略.c

```
#include "Strategy.h"
#include "MyFirstStrategy.h"
#include "MyOtherStrategy.h"

dispatchTableEntry_t dispatchTable[] = {
    MY_FIRST_STRATEGY,
    MY_OTHER_STRATEGY
};
int numStrategies = sizeof( dispatchTable ) / sizeof(dispatchTable[0] ); 
```

这应该适用于任何 C 编译器和平台，而无需任何链接时间技巧。

# c# - C# 引用变量使用说明

> ID：11840655
> 
> 赞同：1
> 
> 时间：2012-08-07T06:48:02.550
> 
> 标签：c#, variables, reference

作为不是程序员，我想了解以下代码：

```
A a=new A();
B a=new B();

a=b;      
c=null;

b=c; 
```

如果变量只持有引用，“a”最终会为空吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T06:50:28.280

假设所有对象 a、b、c 都来自同一个类，`a`则不会`null`。它将`b`在分配给 之前保存引用的值`c`。

假设您有以下课程

```
class Test
{
    public int Value { get; set; }
} 
```

然后尝试：

```
Test a = new Test();
a.Value = 10;
Test b = new Test();
b.Value = 20;
Console.WriteLine("Value of a before assignment: " + a.Value);
a = b;
Console.WriteLine("Value of a after assignment: " + a.Value);
Test c = null;
b = c;
Console.WriteLine("Value of a after doing (b = c) :" + a.Value); 
```

输出将是：

```
Value of a before assignment: 10
Value of a after assignment: 20
Value of a after doing (b = c) :20 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T06:57:57.637

您需要在脑海中分离两个概念；*参考*和*对象*。_ *引用*本质上是托管堆上*对象*的地址。所以：

```
A a = new A(); // new object A created, reference a assigned that address
B b = new B(); // new object B created, reference b assigned that address
a = b; // we'll assume that is legal; the value of "b", i.e. the address of B
       // from the previous step, is assigned to a
c = null; // c is now a null reference
b = c; // b is now a null reference 
```

这不会影响“a”或“A”。“a” 仍然保存着我们创建的 B 的地址。

所以不，“a”最终不为空。

# javascript - webview 内容高度

> ID：11840656
> 
> 赞同：0
> 
> 时间：2012-08-07T06:48:03.747
> 
> 标签：javascript, android, webview

我面临一个问题。我正在做的是：

我在android中按顺序在webview中加载3个html页面，加载每个页面后想要获取每个页面的高度。

```
 webview.addJavascriptInterface(new JavaScriptInterface(), "HTMLOUT");

            //webview.setWebViewClient(new WebPLZZClient());
            //webview.setWebViewClient(new WebClient());    
            ViewGroup.LayoutParams bq1=webview.getLayoutParams();
            bq1.height=LayoutParams.WRAP_CONTENT;
            webview.setLayoutParams(bq1);

            webview.loadDataWithBaseURL("file:///android_asset/KH_Brown_Fixed_Layout/",temp1,  "text/html", "utf-8",null);      
            webview.loadUrl("javascript:window.HTMLOUT.getContentHeight(document.getElementsByTagName('html')[0].scrollHeight);"); 
```

但是我无法获取每个页面的内容高度，至少我想获取前两页的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:53:02.423

我遇到了类似的问题，并通过在再次加载视图之前清除视图并重新测量小尺寸来解决它。

例如

```
webView.clearView();
webView.measure(10, 10); 
```

# javascript - 在threejs中如何创建半径增加但通过同一点的球体说（0,0,200）

> ID：11840659
> 
> 赞同：3
> 
> 时间：2012-08-07T06:48:26.440
> 
> 标签：javascript, three.js

如何在threejs中创建半径增加但通过一个唯一点0,0,200的球体，有效地沿z轴移动新球体的原点。

谢谢你，AriemWebgl

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:52:06.523

创建一个“父”Object3D 并将球体附加到它；当您移动父对象时，附加的对象将一起移动。

```
var sphereParent = new THREE.Object3D();
var numSpheres = 8;
for(var i = 0 ; i < numSpheres; i++)
{
   var radius = 10 + i;
   var sphereGeometry = new THREE.SphereGeometry( radius, 16, 8 );
   var sphereMaterial = new THREE.MeshLambertMaterial( { color: 0x0000ff } );
   var sphere = new THREE.Mesh( sphereGeometry, sphereMaterial );
   sphereParent.add( sphere );
}
sphereParent.position.set(0,0,200);
scene.add(sphereParent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:15:42.970

我想这只是创建一些网格并改变它们的位置的问题：

```
var numSpheres = 8;
for(var i = 0 ; i < numSpheres; i++){
   var radius = 10 + (5*i);//increase the radius based the counter
   var sphere = new THREE.Mesh( new THREE.SphereGeometry( radius, 26, 18 ), new THREE.MeshLambertMaterial( { color: 0xffffff, shading: THREE.FlatShading, overdraw: true, wireframe:true } ) );
   sphere.position.z = 200;//or sphere.position.set(0,0,200);
   scene.add( sphere );
} 
```

# java - 两种对称加密算法是否在两个不同的操作系统和编程框架中返回相同的结果？

> ID：11840660
> 
> 赞同：0
> 
> 时间：2012-08-07T06:48:34.703
> 
> 标签：java, .net, encryption, encryption-asymmetric

只需在 .Net 中，我通过 DES 对称加密算法和 .NET 中的特定密钥对 Id 进行加密。我想知道我的 Java 合作伙伴是否可以仅通过知道算法名称和密钥来解密？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:50:14.497

如果实现是正确的，那么 - 是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:51:55.777

是的，他可以，这就是算法的重点。有一些加密标准需要额外的数据，比如 RSA 中的填充，但这不适用于 DES

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:52:17.457

如果您使用相同的算法和相同的密钥，您将获得相同的输出。您使用的平台无关紧要。

# telerik-mvc - 如何将 DatePicker 中的值发送到控制器

> ID：11840661
> 
> 赞同：0
> 
> 时间：2012-08-07T06:48:42.013
> 
> 标签：telerik-mvc

我有 mvc2 形式的 DatePicker 并希望将其值发送到控制器。但是 DatePicker 没有数据绑定，我无法在 databinding.select 中绑定函数。单击提交按钮后如何将其值发送到控制器？谢谢。代码是，

```
Html.Telerik().DatePicker()
.Name("DatePicker")
.HtmlAttributes(new { style = "font-size:8pt;width:100px" })
.ShowButton(true) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:26:13.220

你可以通过三种方式做到这一点。

1) 将您的模型传递给您的控制器
2) 使用 FormCollection 获取 DatePicker 的值
3) [HttpPost] public ActionResult Index(string dttCompletion) // 应该与您的日期选择器名称相同。{

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:51:23.143

利用`<%= Html.Telerik( ).DatePickerFor( model => model.YourDateProperty )`

根据您的问题，我推断您已经将该日期选择器包装在一个表格中，这很好。现在只需在控制器的 [Post] 方法中收集值。

```
[HttpPost]
public ActionResult SomeActionMethod (YourViewModel model)
{
   model.YourDateProperty//This will be the value from the datepicker
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:58:36.777

您可以通过以下方式从 Telerik datepicker 获得价值：

```
$('#DatePicker').data("tDateTimePicker").value(); 
```

此外 datepicker 有一个 id 输入，其值等于您的 datepicker 控件名称，因此您应该在控制器方法中使用它。

# objective-c - NSTimer：发布时是否调用了invalidate？

> ID：11840662
> 
> 赞同：0
> 
> 时间：2012-08-07T06:48:52.930
> 
> 标签：objective-c, ios, nstimer, nsrunloop

我有一个具有 NSTimer 的类，当我释放它时，是否也会调用 invalidate？或者我可以在 dealloc 中同时执行它们：

```
- (void)dealloc
{
    [_timer invalidate];
    [_timer release];
    [super dealloc];
} 
```

我在这个线程中读到：

[invalidate 方法调用也做了一个释放](https://stackoverflow.com/questions/3692359/nstimer-crashes-when-i-call-timer-isvalid-or-timer-invalidate)

选择的答案说 invalidate 方法也会发布，所以如果我使其无效，我不需要发布它？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T06:52:53.353

发送`release`到 an`NSTimer`不会使其无效。

如果`NSTimer`在运行循环中调度，则运行循环保留计时器。因此，即使您释放（计划的）计时器，它的保留计数仍然大于零。此外，它还会继续发射。如果计时器的目标已被释放，则应用程序可能会在计时器触发时崩溃。

当您发送`invalidate`到预定的计时器时，运行循环会释放计时器。

如果`NSTimer`未在运行循环中安排，则不需要使其无效。但`invalidate`无论是已安排、未安排还是已失效，都可以安全地发送到计时器。

`invalidate`所以你应该在你的方法中发送你的计时器`dealloc`，除非你确定它已经失效了。

如果您使用 创建了计时器`[[NSTimer alloc] initWith...]`，那么您还应该释放它。但是，如果您使用`[NSTimer timerWith...]`or创建了计时器`[NSTimer scheduledTimerWith...]`，则不应*释放*它，因为您不拥有对它的引用。

# jsf - 从 PhaseListiner 访问页面内容

> ID：11840672
> 
> 赞同：0
> 
> 时间：2012-08-07T06:49:27.530
> 
> 标签：jsf

我需要将所有 JS 脚本从“head”标签移动到“body”标签的底部，以提高应用程序的速度。我知道，这需要使用 PhaseListener，但是如何从中获取页面内容呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:19:46.747

假设您的实际问题是：如何在页面底部而不是在 HEAD 区域呈现 JavaScript 引用？

我建议使用 h:outputScript 标签，它确保脚本只获得一次引用，并且您可以控制渲染位置。

文档： [http ://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/outputScript.html](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/outputScript.html)

例子：

```
<h:outputScript library="js" name="myScript.js" target="body" /> 
```

这将在页面正文的底部呈现脚本引用，与您在视图中放置 Facelet 标记的位置无关。

# visual-studio-2010 - AccuRev 插件与 VS2010 的集成

> ID：11840679
> 
> 赞同：0
> 
> 时间：2012-08-07T06:49:36.287
> 
> 标签：visual-studio-2010, accurev

我正在尝试将 Accrev 插件用于 Visual Studio 2010。我不确定如何在 VS 2010 上为 Accrev 中已经存在的项目使用它。我遵循了发行说明中提到的几个步骤。

插件的发行说明包含从 VS 添加新解决方案到 Accrev 或创建新解决方案的说明。

安装后，我在 File 中获得了 Accurev 选项。但是解决方案没有显示与 Accrev 的绑定。File -> Accurev 中的所有选项都被禁用。

任何帮助表示赞赏。

谢谢，谢蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:23:53.953

根据我的经验，有时在这种情况下点击 Accurev Refresh 会有所帮助。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:17:01.627

首先，我发现只使用插件而不使用 AccuRev 本身几乎是不可能的。因此，我建议同时使用两者。然后，您还可以在 AccuRev 中管理您的工作区并将解决方案填充到您的本地文件夹中。

然后在 Visual Studio 中打开解决方案。确保您已从 Visual Studio 登录到 AccuRev。如果没有，您应该有 File > AccuRev > Login 选项。登录后，VS“知道”绑定并将刷新绑定。

我偶然发现了另一个问题，即文件下的 AccuRev 选项没有出现。当在工具 > 选项 > 源代码管理下设置另一个源代码管理系统时会发生这种情况。确保此处选择了 AccuBridge。

# c#-4.0 - ActiveReport_ReportStart 绑定子报表脚本

> ID：11840682
> 
> 赞同：0
> 
> 时间：2012-08-07T06:49:43.503
> 
> 标签：c#-4.0, activereports

我正在使用 Active Reports Subreport 工具，我想通过连接 Oracle 将 ActiveReport_ReportStart 中的数据源绑定为脚本。我正在使用下面的脚本，但出现此错误： **错误消息：[DBNETLIB][Connection Open (Connect()).]SQL Server 不存在或访问被拒绝。无效的连接字符串属性。**

```
public void ActiveReport_ReportStart()
{
string connString = "Provider=SQLOleDB;User Id=XXX;Password=XX;Server=XXX;Service      Name=XX;Direct=True;Persist Security Info=True";
string sqlString = @"sql query";
DataDynamics.ActiveReports.DataSources.OleDBDataSource ds = new     DataDynamics.ActiveReports.DataSources.OleDBDataSource();
ds.ConnectionString = connString;
ds.SQL = sqlString;
rpt.DataSource = ds;
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:38:34.543

就 ActiveReports 而言，我没有发现任何问题。我没有时间详细研究这个，但它可能是你的连接字符串。错误消息来自 SQLServer/OLEDB，它只是通过 ActiveReports 冒泡。

尝试对 System.Data.OleDB.OleDBConnection 对象使用相同的连接字符串，看看它是否有效。如果你在那里也遇到错误，那肯定是你的连接字符串。如果没有，请告诉我，我会仔细看看。

您可能还想尝试使用 ActieReports 设计器中的内置连接字符串构建器并让它在那里工作，然后将其复制到脚本中。

# shell - 为什么我的外壳在 if 条件下与 -a 配合得很好？

> ID：11840683
> 
> 赞同：0
> 
> 时间：2012-08-07T06:49:44.070
> 
> 标签：shell

这是我的代码：

```
 echo $1  $2
    if [ "Release"!="$2" -a "Debug"!="{$2}" ]; then
        echo "error! the arg of -c must be \"Release\" or \"Debug\" !"
        exit 1
    fi
    XCODECONFIG="$2"; 
```

当我输入

```
 ./build.sh a Release 
```

输出是：

```
 a Release
    error! the arg of -c must be "Release" or "Debug" ! 
```

它打印“错误！-c 的参数必须是“发布”或“调试”！“ 为什么不继续 XCODECONFIG="$2"？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:00:56.217

周围必须有空格`!=`：

```
[ "Release" != "$2" -a "Debug" != "{$2}" ] 
```

当您编写不带空格的表达式时，它在语法上是正确的，但意味着其他东西。看起来像：

```
[ STR1 -a STR2 ] 
```

在你的情况下，里面有 != ，但这没有任何意义；无论如何，这只是字符串；每个字符串都被评估为真，并且`True -a True`也将被评估为真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:01:05.153

shell脚本中的空格很重要，请尝试：

`if [ "Release" != "$2" -a "Debug" != "{$2}" ]; then`

否则，您的表达式将被评估为两个都具有真实值的字符串块，因此 if 执行

# java - 是否有 Javolution ArrayFactory 的模拟

> ID：11840687
> 
> 赞同：0
> 
> 时间：2012-08-07T06:50:02.597
> 
> 标签：java, arrays, pool

我的 android 应用程序需要很多数组。为了防止 GC，我开始使用[Javolution.arrayFactory](http://javolution.org/target/site/apidocs/javolution/context/ArrayFactory.html)。
但是，如果我`alloc`在一个线程中记忆，如下所示。

```
byte []buffer = ArrayFactory.BYTES_FACTORY.array(size); 
```

并在另一个线程中释放它，如下所示。

```
ArrayFactory.BYTES_FACTORY.recycle(buffer); 
```

然后它会导致内存泄漏。我需要实现数组池的库或类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:20:46.220

通常没有分配大量 byte[] 的方法来重用它们，而不是动态地回收它们。

例如，假设您有一个 Socket 处理程序对象，并且它有一个 byte[]。您可以创建一次 byte[] 并在连接的整个生命周期内保留它。

您可以拥有一个 ByteBuffer ，它被拆分到多个位置，以使用相同的字节数组创建多个缓冲区。

或者您可以使用您设计的结构存储数据，例如堆外内存（我怀疑这对 JVM 比对 Android 更有效）

我曾经回收了很多，`byte[]`但随着时间的推移，我在不同的项目中找到了用预先分配的或长期存在的缓冲区替换所有这些的方法，这降低了 CPU 开销。

# delphi - 在 Win API 中如何获取另一个应用程序的进度条位置，如果它是由 Delphi 的 TPanel 实现的？

> ID：11840689
> 
> 赞同：0
> 
> 时间：2012-08-07T06:50:03.833
> 
> 标签：delphi, winapi, progress-bar, tpanel

需要获取另一个应用程序的进度条的位置。MS Spy++ 指出是 TPanel。它可以改变颜色并具有数字位置状态。如何在 Win API 中获得所有这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:21:58.583

该[`TPanel`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ExtCtrls.TPanel)组件不是 的 Delphi 包装器[`Windows Progress Bar Control`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760816%28v=vs.85%29.aspx)，因此您获取并使用了错误的类，而是搜索[`TProgressBar`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TProgressBar)该类，从这里您可以使用任何[`Progress Bar Messages`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff485990%28v=vs.85%29.aspx)具有正确 Windows 句柄和[`SendMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)方法的类。例如，要检索进度条的当前位置，请使用[`PBM_GETPOS`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760830%28v=vs.85%29.aspx)消息。

# nhibernate - nhibernate中的生效日期

> ID：11840694
> 
> 赞同：1
> 
> 时间：2012-08-07T06:50:17.387
> 
> 标签：nhibernate, date, many-to-many, mapping-by-code

**我在两个现有表(User: UserId, Name)**和**(Location: LocationId, Name)**之间有多对多关系，这些无法更改。我使用了多对多映射，但我们有一个新要求，包括历史/未来运动。

我使用了 peoplesoft 的概念，即在替换旧表的新相交表**（UserLocation：UserId、LocationId、EffectiveDate、Status）**中有效地对记录进行约会，其中前 3 个字段构成主键。

在 SQL 中，我可以简单地使用以下语句返回给定生效日期的活动记录，但我无法从 NHibernate 获得类似的信息（甚至会收到有关参数在多级选择中不起作用的错误）。

```
select l.*  
from location l  
where l.locationId in  
  (select ul.locationId  
   from UserLocation ul  
   where (ul.EffectiveDate =   
     (select max(ul_ed.EffectiveDate)  
      from UserLocation ul_ed  
      where ul.LocationId = ul_ed.LocationId  
        and ul.EffectiveDate = ul_ed.EffectiveDate  
        and ul.UserId - ul_ed.UserId  
        and ul.Status = true)) 
```

我需要通过包含 UserId 和 EffectiveDate 列的参数来返回进一步过滤的记录，但很乐意返回所有内容。

然而，我的问题是映射类（我使用代码映射，而不是流利的），甚至无法让它接近工作（有限的 NHibernate 知识）。我希望不必为相交表创建一个新类。我什至还没有进入插入/更新/删除部分，因为我什至无法让 select 工作。

要求： 1\. 在将用户关联到 EffectiveDate = NOW，Status = True 的位置时，在 UserLocation 中插入新记录 3\. 将用户移动到新位置应在 UserLocation 中插入新记录，EffectiveDate = NOW，Status = True 4\. 删除来自该位置的用户将插入新的 UserLocation 记录，其 EffectiveDate = NOW，Status = False 5\. 检索用户在给定日期关联到的位置。

注意：由于会根据这些数据生成报告，因此我们无法删除记录，并且还会为将来的事件创建数据。

如果有人能指出我正确的开始方向，那将不胜感激。我查看了 Loader 和 Interceptor 类，但似乎无法使其适合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:55:38.203

您需要一个用于 intersect 表的类，因为它具有两个额外的属性。然后可以像这样实施第一个要求......

```
public virtual void AddLocation(Location l)
{
    this.UserLocations.Add(new UserLocation
    {
        EffectiveDate = DateTime.Now(),
        Status = true,
        User = this,
        Location = l
    });
} 
```

查询应该有点直截了当。只需要将 JoinAlias 加入 intersect 表并比较 EffectiveDate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:20:42.983

这是我们提出的适用于所描述场景的答案。

```
Filter("EffectiveDate", mm => mm.Condition("Status = 1 and EffectiveDate = (select max(t1.EffectiveDate) from Table1 t1 where t1.Id = Id and t1.EffectiveDate <= :effectiveDate)")); 
```

过滤器可以应用于表和映射。然而，我们最终将 2 个表合并为一个表以降低复杂性。

注意：必须先定义过滤器并将其应用于会话，然后才能在映射中使用它。有关完整详细信息，请参阅 nHibernate doco，它有很好的文档记录。

# html - 从 PL/SQL 生成 HTML

> ID：11840695
> 
> 赞同：2
> 
> 时间：2012-08-07T06:50:19.127
> 
> 标签：html, oracle, plsql, oracle11g

```
CREATE OR replace PROCEDURE Hello_world2
IS
BEGIN
    HTP.htmlopen;
    HTP.headopen;
    HTP.Title ('You knew it was coming...');
    HTP.headclose;
    HTP.comment ('This phrase is in every computer book.');
    HTP.Bodyopen (cattributes => 'body bgcolor=blue');
    HTP.Print ('And here it is .... Hello, World!');
    HTP.bodyclose;
    HTP.htmlclose;
END; 
```

如何将其输出到 HTML 文件？我试过如下所示：

```
spool report.htm
exec hello_world2;
spool off
exit 
```

但我收到如下所示的错误：

```
 ORA-06502: PL/SQL: numeric or value error
    ORA-06512: at "SYS.OWA_UTIL", line 356
    ORA-06512: at "SYS.HTP", line 1368
    ORA-06512: at "SYS.HTP", line 1443
    ORA-06512: at "SYS.HTP", line 1735
    ORA-06512: at "SYS.HTP", line 72
    ORA-06512: at "T416493.HELLO_WORLD2", line 4
    ORA-06512: at line 1 
```

谁能帮我这个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:02:18.197

通常，您会调用`owa_util.showpage`以将内容输出。Dan 对[Oracle OWA_UTIL](http://psoug.org/reference/owa_util.html)的用法有一个很好的概述， 这很有趣，它应该从 sqlplus 运行，但我认为它需要使用 web 浏览器从 mod_plsql 调用。

如果你真的只想生成静态网页，你也可以使用普通的旧 dbms_output 来做到这一点。否则，看看[Oracle Apex](http://apex.oracle.com/i/index.html)可能会更聪明，甚至可能是 Oracle Apex[的一个非常好的和有能力的替代品 Formspider](http://theformspider.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:12:48.870

> ORA-06512：在“SYS.OWA_UTIL”，第 356 行

你试过看看那里有什么吗？:-) 那行有 `for i in 1..owa.num_cgi_vars` 所以你试图在非 cgi 环境中运行 cgi-aware 代码。owa.num_cgi_vars 变量为 NULL。

begin for i in 1..null loop null; 结束循环；结尾;

会给你同样的 ORA-06512。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T20:30:27.097

我有同样的问题。我插入了另一个爸爸资料，它就像一个魅力:) 不知何故，旧的爸爸资料已经烂了。

-- 作为 xdbadmin 或 sys (mpl_user 当然是包所在的模式): exec dbms_epg.create_dad('new_dad', '/my_db/*'); exec dbms_epg.set_dad_attribute('new_dad', '数据库用户名', 'UUSSEERR'); -- 大写的用户名授权在 dbms_epg 上执行给 uusseerr；

-- 作为用户 (uusseerr): exec dbms_epg.authorize_dad('new_dad');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:37:08.500

您需要使用 owa.init_cgi_env 初始化 CGI

请参阅[http://asktom.oracle.com/pls/asktom/f?p=100:11:::::P11_QUESTION_ID:347617533333](http://asktom.oracle.com/pls/asktom/f?p=100:11:::::P11_QUESTION_ID:347617533333)

它对我有用，其他一切都失败了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-09T13:00:12.313

下面的代码将打印使用存储过程形成的 html 页面。

```
 set serveroutput on;
    declare
        vNames  owa.vc_arr;
        vValues owa.vc_arr;
    begin
        htp.init;
        vNames(1) := 'REQUEST_PROTOCOL';
        vValues(1)  := 'HTTP';

        owa.init_cgi_env(
        num_params => 1,
        param_name => vNames,
        param_val  => vValues );

        test_package.proc_call; --procedure where html pages are formed using htp.p
        owa_util.showpage;
    end;
    / 
```

# forms - 在 Extjs 4 中填充有关表单字段更改的数据

> ID：11840698
> 
> 赞同：1
> 
> 时间：2012-08-07T06:50:31.283
> 
> 标签：forms, spring-mvc, extjs4

我在一个名为：studentId、StudentName、studentLastname 的窗口中有 3 个表单字段。如果我输入 studentID，它应该填充 studentname 和 studentlastname 的值。我怎样才能做到这一点？我知道，我必须使用侦听器，但我不确定我将如何从数据库中加载值。它应该是 AJAx 请求，而不是表单提交/重新加载。

如果你知道，请告诉我。我正在使用 Extjs 4 和 Spring MVC。

谢谢。米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:21:51.153

答案应该走多远？您是否还期望服务器端代码？

在最基本的层面上，您需要使用[代理定义](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Proxy)[模型](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)：

```
Ext.define('Student', {
    extend: 'Ext.data.Model',
    fields: ['id', 'firstName', 'lastName'],

    proxy: {
        type: 'ajax',
        url : 'students'
    }
}); 
```

然后，一旦您输入 studentId，您就可以执行以下操作：

```
var iStudent = Ext.ModelManager.getModel('Student');

iStudent.load( studendId, {
    success: function( aStudent ) {
        console.log( aStudent );
        // Feed the student details into the form.
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T17:53:51.077

Ext 功能丰富，提供了不止一种方法来做你想做的事。如果您不准备花时间了解它是如何工作的，那么最好还是坚持使用 JQuery 或其他 DOM 操作器，或者甚至是原始的 javascript 和 http 请求。

您需要知道的一切都在[Sencha 网站](http://docs.sencha.com/ext-js/4-1/#!/api)上的 API 文档中，其中有很多示例和指南以及一个非常好的论坛。但是有很多东西要学。

那里关于服务器端代码的信息很少，教你 Spring 不是 Sencha 的工作。您的服务器需要能够接受请求并返回简单的“{success=true}”响应或 Ext 可以使用的格式的数据。例如。XML 或 JSON。还有一个 DIRECT API，但我不建议将它用于您的第一个应用程序。

假设您想使用 JSON 字符串，您的服务器响应将是这样的

```
[{"studentId":12345,"studentFirstName":"John","studentLastName":"Smith"},
{"studentId":12346,"studentFirstName":"Jenny","studentLastName":"Brown"},
{"studentId":12347,"studentFirstName":"Able","studentLastName":"Seaman"}] 
```

您可以使用它通过 Ext.Proxy 和 Ext.Model 填充 Ext.Store（请参阅 lzhaki 的回答）

您可以通过 Ext.ComponentManager 使用您的文本框，并且您可以使用 Ext.Component(s) 提供的方法来执行诸如 .setValue() 之类的方法

当您开始使用 Ext 时可能是一项艰巨的工作，它远远超出了 DOM 操作，您需要了解它是如何工作的，以获得它为程序员提供的价值和您的应用程序的可维护性。

# mobile - 如何从 Twitter Bootstrap 中的 Google Adsense 320x50 移动广告中删除边距？

> ID：11840706
> 
> 赞同：0
> 
> 时间：2012-08-07T06:51:11.397
> 
> 标签：mobile, twitter-bootstrap, adsense

在使用 Twitter Bootstrap 并尝试实现 320 x 50 移动横幅广告时，我遇到了一个问题，即在移动设备上，横幅会在左侧（也可能在右侧）有填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:51:11.397

Bootstrap 会自动在你的身体周围创建一个 20 像素的填充。要删除它，就像对移动导航栏所做的那样，在引导响应文件中实现一个新类：

```
@media (max-width: 767px) {
body {        // The code that creates a padding around the body in mobile
    padding-right: 20px;
    padding-left: 20px;
}
.google-adsense,   // Create a new class for your ad with -20 margins (The navbar
                   // is already implemented like this so just add new class name)
.navbar-fixed-top,
.navbar-fixed-bottom {
    margin-right: -20px;
    margin-left: -20px;
} 
```

# html - 如何在 Twitter Bootstrap 中在输入上方而不是下方添加帮助文本

> ID：11840709
> 
> 赞同：10
> 
> 时间：2012-08-07T06:51:15.337
> 
> 标签：html, css, forms, twitter-bootstrap

在使用 Twitter Bootstrap 创建表单时，如何在输入*上方*而不是下方添加帮助文本。当我使用“帮助块”类在输入上方插入语句时，标签和输入不再对齐。有办法解决吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-11-30T12:07:12.800

引导程序的 css 类中已经有这种资源。看看[样品](http://v4-alpha.getbootstrap.com/components/forms/)。

您的代码必须在一个`form-group`类中，如下所示：

```
<div class="form-group">
   <label for="info-email" class="col-xs-2 control-label">e-mail</label>
   <div class="col-xs-10">
      <input type="text" class="form-control" id="info-email" placeholder="Your e-mail">
      <small class="text-muted">We'll never share your email with anyone else.</small>
   </div>
</div> 
```

![下面的样本](../Images/d0919bfefc441265fe97fb744af9c101.png)

而且，如果您需要将帮助文本放在输入上方，只需将 的位置更改为`<small>...</small>`输入上方：

```
<div class="form-group">
   <label for="info-email" class="col-xs-2 control-label">e-mail</label>
   <div class="col-xs-10">
      <small class="text-muted">We'll never share your email with anyone else.</small>
      <input type="text" class="form-control" id="info-email" placeholder="Your e-mail">
    </div>
</div> 
```

![以上样本](../Images/9fe0463341fa22c0aeae6afab58482f4.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-07T07:04:53.447

将帮助块类元素添加到控件

```
<div class="control-group">
    <label for="prependedInput" class="control-label">Prepended text</label>
    <div class="controls">
        <p class="help-block">Here's some help text</p>
        <div class="input-prepend">
           <input type="text" class="span2" id="prependedInput" size="16">
        </div>
   </div> 
```

而不是追加

```
 <div class="control-group">
    <label for="prependedInput" class="control-label">Prepended text</label>
    <div class="controls">
        <div class="input-prepend">
           <input type="text" class="span2" id="prependedInput" size="16">
        </div>
        <p class="help-block">Here's some help text</p>
   </div> 
```

演示：http: [//jsfiddle.net/D2RLR/935/](http://jsfiddle.net/D2RLR/935/)

# jquery - 无法将部分视图显示为 JQuery Mobile 对话框

> ID：11840710
> 
> 赞同：1
> 
> 时间：2012-08-07T06:51:17.217
> 
> 标签：jquery, asp.net-mvc, jquery-mobile

我整理了一个简单的例子：

我有一个缩略图列表，我想在选择列表中的图像时显示更大的图像：

```
@if (Model.GalleryIcon.Any())
{
    foreach (var cell in Model.GalleryIcon)
    {  
        <a href="/Logo/MobileImage?url=@cell.TargetImagePath" data-rel="dialog" data-transition="pop" ><img src="@cell.ThumbInvPath" /></a>        
    }    
} 
```

`/Logo/MobileImage?url=@cell.TargetImagePath`返回一个局部视图，其中 @Model 是一个 imagePath 字符串：

```
@model string

<div id="logo-image-wrap">
      <img src='@Model' id="logo-wrap-mobile-image"/>
      <br />
      <a href="#" data-role="button" data-rel="back" data-icon="arrow-l">Back</a>
 </div> 
```

这个工作是我在锚上设置 rel="external" 并简单地在新的单独页面中打开一个图像，但它不能作为一个对话框工作。从列表中选择缩略图图像时，会出现一个空白对话框，并显示“未定义”

当从列表中选择缩略图时，如何在对话框中使用图像详细信息来显示我的部分视图加载？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:54:39.293

**编辑三：**

我向任何试图利用我的答案的人道歉。我不知何故错过了问题的整个“移动”部分，所以我在这里的例子+解释完全无关紧要。如果您想查看以前编辑的代码和其他内容，请单击答案下方的“已编辑”链接。

在与 OP 讨论了这个问题之后，我们认为这样的事情可能会起作用（但需要在我们知道之前进行测试）：

修改生成的锚点，为我们的 jQuery 绑定添加一个钩子：

```
<ul>
...
    <li><a class="btn" href="someurl">Art</a></li>
...
</ul> 
```

然后，我们需要为这些链接的点击事件添加一个处理程序：

```
$('a.btn').on('click', function(event){
    event.preventDefault();
    var href = $(this).attr('href');
    $.mobile.changePage( href, { role: 'dialog', transition: 'slide' } );
}); 
```

这应该做什么它向我们想要显示的页面发出请求，该页面被 jQuery Mobile 框架劫持。第二个参数告诉框架将页面显示为对话框，而不是“导航”到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:01:18.133

我认为您可能会尝试通过 onclick 事件而不是动态 dom 加载的内联语句来调用对话框。通过这种方式，您可能有机会加载创建的 dom 元素，而不是正在处理的元素。在 onclick 事件中，您还可以在发送到对话框之前通过 .load 刷新 dom。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T18:45:03.343

详细解决办法贴在这里：

[http://usnitch.blogspot.com/2012/08/jquery-mobile-how-to-dynamically-load.html](http://usnitch.blogspot.com/2012/08/jquery-mobile-how-to-dynamically-load.html)

# eclipse - IntelliJ Idea - 如何在从数据库表生成域对象时指定选项

> ID：11840711
> 
> 赞同：1
> 
> 时间：2012-08-07T06:51:22.987
> 
> 标签：eclipse, netbeans, ide, intellij-idea, code-generation

我想了解如何使用**IntelliJ Idea 11指定一些设置，如****集合类型**、**默认获取类型**、**id 生成策略**等，同时从数据库表生成域对象，就像我们在 NetBeans 或 Eclipse 中所做的那样。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:26:24.743

IDEA 没有此功能，欢迎您[向 issue tracker 提交请求](http://youtrack.jetbrains.net/issues/IDEA)。**

# cassandra - Cassandra - 经常更改列值和 SSTables

> ID：11840714
> 
> 赞同：1
> 
> 时间：2012-08-07T06:51:39.677
> 
> 标签：cassandra

我有进程，它经常更新单列。最后，在执行压缩之前，我的列的值存储在多个 SSTable 中。

Memtables 已排序，并同步刷新到磁盘，在这种情况下，我还假设磁盘上的 SSTables 已排序。基于此，Cassandra 需要查看单个 SSTable（带有正布隆过滤器）以找到我的列的最新值，对吗？

我有点困惑，因为我在某处读过，单列的频繁更改值会导致性能不佳，但我的理解是，只有压缩工作才有更多工作要做，阅读应该不受影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:23:13.070

[https://issues.apache.org/jira/browse/CASSANDRA-2498](https://issues.apache.org/jira/browse/CASSANDRA-2498)

所以答案是：Cassandra 版本 < 1.0 会遍历每个 SSTable。从 1.0 开始，只会读取来自最近 SSTable 的数据，因为除了布隆过滤器之外的每个 SSTable 还包含特定列的最新更新时间。

这导致下一个问题。布隆过滤器在 RAM 中，“最后更新时间”（SSTable 元数据）呢？是否需要磁盘寻道才能访问它？在这种情况下，Cassandra 仍然需要为每个包含列值的 SSTable 进行磁盘寻道

# c# - 如何使用javascript遍历gridview的列？

> ID：11840719
> 
> 赞同：0
> 
> 时间：2012-08-07T06:51:59.497
> 
> 标签：c#, javascript, asp.net, gridview

我有一个在运行时动态绑定的gridview。我需要在客户端遍历一列gridview。我已将 gridview 的 id 传递给 javascript 函数，但我不知道如何遍历特定行。

我从后面的代码中调用 javascript 函数 -

```
btnInsert.Attributes.Add("OnClick", "return IsValidEntry(" + gridview.ClientID + ")"); 
```

现在我正在捕获特定行的控件的 ID 并将其传递给另一个 javascript 函数 -

```
function IsValidEntry(Status) 
    {
        var strErr='';
        if(document.getElementById(Status.id).innerHTML == "Dev in Progress")
        {
            strErr+='<br>* Develeopment should be completed first.';
            document.getElementById('schValidation').innerHTML = strErr;                
            jQuery("#schValidation").show('slow');
            return false;
        }
    } 
```

哪个工作正常。但现在我需要遍历整个专栏。

链接或一些示例代码将非常有帮助。

谢谢

阿基勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:52:44.697

我解决了它 -

```
function IsValidEntry() 
      {
        var len = document.getElementById('ctl00_ContentPlaceHolder1_gdScheduleNew').rows.length;
        var i;
        for (i = 2; i <= len; i++) 
        {
            if(document.getElementById("ctl00_ContentPlaceHolder1_gdScheduleNew_ctl0" + i + "_lblStatus").innerHTML == "Dev in Progress")
            {
                //Code here
            }
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:56:37.420

使用 JQuery，您可以像这样遍历您的 gridview 行和列

```
$(document).ready(function () {
            $('#GridViewID tr').each(function () {
                alert($(this).find("td:eq(0)").text()); //get column1 value
                alert($(this).find("td:eq(1)").text()); //get column2 value
            });
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:46:34.917

我建议使用jquery。给列一个 CSS 类并使用 each 迭代器。

```
 $(function() {
        $('.className').each(function () {
            // do something...
        });
    }); 
```

# regex - Flex Regex 查找 url 中 2 个字符之间的匹配项

> ID：11840724
> 
> 赞同：0
> 
> 时间：2012-08-07T06:52:20.210
> 
> 标签：regex, actionscript-3, apache-flex, flex4.5

我正在寻找一个正则表达式来解析 a = 和 & 之间的部分以获取第一个 url 变量。

示例网址：

```
http://vandooren.be?v=123456&test=123 
```

我需要从字符串中获取 123456 。

我最后一次尝试是

```
var pattern:RegExp = /\=|\&/;
var result:Array = pattern.exec(dg.selectedItem.link[0]);
trace(result.index, " - ", result); 
```

但我仍然遇到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:19:15.067

试试这个下面的代码。

```
var myPattern:RegExp = /(?<==).+(?=&)/;   
var str:String = "http://vandooren.be?v=123456&test=123";
var result:Array = myPattern.exec(str);
trace(result[0]); //123456 
```

* * *

```
var myPattern:RegExp = /(?<==).+(?=&)/;   
var str:String = "youtube.com/watch?v=nCgQDjiotG0&feature=youtube_gdata";
var result:Array = myPattern.exec(str);
trace(result[0]); //nCgQDjiotG0 
```

* * *

**`Assertions`**

```
foo(?=bar)  Lookahead assertion. The pattern foo will only match if followed by a match of pattern bar.
foo(?!bar)  Negative lookahead assertion. The pattern foo will only match if not followed by a match of pattern bar.
(?<=foo)bar Lookbehind assertion. The pattern bar will only match if preceeded by a match of pattern foo.
(?<!foo)bar Negative lookbehind assertion. The pattern bar will only match if not preceeded by a match of pattern foo. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:56:22.117

尝试这个：

```
(?<==)[^&]*(?=&) 
```

此正则表达式将匹配 '=' 之后和第一个下一个 '&' 之前的任何内容。

# objective-c - Lion 不会运行使用 Mountain Lion 构建的应用程序

> ID：11840728
> 
> 赞同：3
> 
> 时间：2012-08-07T06:52:33.543
> 
> 标签：objective-c, xcode, macos, cocoa

我正在尝试让我在 Mountain Lion 上使用 Xcode 4.4 构建的 OS X 应用程序也可以在 Lion 上工作。

将*OS X 部署目标*设置为 10.7 没有帮助。该应用程序仍然无法在 Lion 上运行。（该应用程序不会打开，单击它不会执行任何操作。）

我尝试将基本 SDK 设置为 10.7，但我得到了很多错误，因为我到处都在使用`NSArray`和`NSDictionary`文字、下标以及`@property`s 的默认合成。

根据[Objective-C 功能可用性指数](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html#//apple_ref/doc/uid/TP40012243)，这些功能应该可以在 Lion 上运行。

问题可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T17:25:11.883

`NSWindow`不支持 Lion 中的弱引用。从“过渡到 ARC 发行说明”：

> # 哪些类不支持弱引用？
> 
> 您目前无法创建对以下类实例的弱引用：
> 
> `NSATSTypesetter`, `NSColorSpace`, `NSFont`, `NSMenuView`, `NSParagraphStyle`, `NSSimpleHorizontalTypesetter`, 和`NSTextView`.
> 
> 注意：**此外，在 OS X v10.7 中，您不能创建对** `NSFontManager`、`NSFontPanel`、`NSImage`、`NSTableCellView`、 `NSViewController`、**`NSWindow`**和的实例的弱引用`NSWindowController`。此外，在 OS X v10.7 中，AV Foundation 框架中没有类支持弱引用。**对于声明的属性，你应该使用assign而不是weak；对于变量，您应该使用 __unsafe_unretained 而不是 __weak。**
> 
> 此外，您不能从 、 或 ARC 下的实例创建 `NSHashTable`弱`NSMapTable`引用`NSPointerArray`。

所以是的，你应该`assign`在为 Lion 编译时使用。（[参考](http://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW17)）

# c# - 获取 SubDir 作为字符串返回类型

> ID：11840739
> 
> 赞同：2
> 
> 时间：2012-08-07T06:53:32.240
> 
> 标签：c#, string, recursion

我试图在指定文件夹的子目录中找到一个文件（我们称之为 MyFolder）并将子目录保存到一个字符串变量中以在其他地方使用。问题是，在该指定文件夹中可能有多个子目录，并且每个子目录都可能包含它们自己的子目录。MyFolder 下的树中只有一个所述子目录具有我要查找的文件。

在下面的示例中，它可能位于（可能更多，但在此示例中）两个位置中的任何一个，但永远不要同时位于这两个位置。

```
-Root    
--/MyFolder    
---/a    
-----/aa    
-------------/blah.txt  (or if not here, it may be...)    
---/b    
-------/blah.txt  (...right here, possibly) 
```

当然，我正在尝试定位`blah.txt`。

我已经做了一个递归`foreach`循环，如下所示，但是如果在第一级子目录中找到文件，它只会返回子目录`(/a, or /b)`。如果文件在里面`/aa or /bb`或更深（`root/a/aa/aaa,`例如），它每次都返回 NULL。我花了好几个小时试图通过慢慢地通过调试器并仔细观察本地窗口来解决这个问题，但我似乎无法弄清楚出了什么问题。在第二个循环中，它确实找到了文件并存储了正确的子目录路径`foreach`，但是由于某种原因，它开始向后循环（显示以前的目录，直到它点击`return "Null";`）。如果在第一级子目录中找到文件，则不会发生这种情况，只有在第二级或更深的目录中找到它时才会发生。

```
class Program
{
    static string dir = @"C:\MyFolder\";

    static void Main(string[] args)
    {
        Console.WriteLine(GetDirectory(dir));
        Console.ReadKey();
    }

    static string GetDirectory(string dir)
    {
        foreach (string dName in Directory.GetDirectories(dir))
        {
            foreach (string fName in Directory.GetFiles(dName, "blah.txt"))
            {
                return dName;
            }
            GetDirectory(dName);
        }
        return "NULL";
    }
} 
```

我看到类似这样的工作的唯一方法是，如果您不尝试将路径保存为能够在其他地方使用的字符串（甚至可能被其他函数使用），而是让它立即显示为 void 返回类型，例如在控制台中（通过更改返回`"Console.WriteLine(dName)"`并适当地修改函数调用）。

我对 C# 很陌生，我之前唯一的编码经验是 JavaScript 和`AutoHotkey`，所以我对这类语言的知识仍然非常有限，我所拥有的只是一本我读过的 C# 初学者指南和互联网...而且我已经勇敢地搜索了这两个具体问题，但无济于事..因此，非常感谢任何帮助或指示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T06:56:40.923

为什么不使用内置的递归搜索？

就像是

```
Directory.GetFiles(@"C:\MyFolder\", "blah.txt", SearchOption.AllDirectories) 
```

看看[Directory.GetFiles Method (String, String, SearchOption)](http://msdn.microsoft.com/en-us/library/ms143316.aspx)和[SearchOption Enumeration](http://msdn.microsoft.com/en-us/library/ms143448.aspx)

甚至是[DirectoryInfo](http://msdn.microsoft.com/en-us/library/ms143327.aspx)。

就像是

```
new DirectoryInfo(@"C:\MyFolder\").GetFiles("blah.txt", SearchOption.AllDirectories) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:57:06.557

将文件循环移动到目录循环之前。更改返回到 dir 而不是 dName。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:05:02.743

简单地取第一个找到的[`Directory.EnumerateFiles()`](http://msdn.microsoft.com/en-us/library/dd383571.aspx)怎么样？

```
var fileToSearch = "blah.txt";
var matchingFile = Directory.EnumerateFiles(dir, fileToSearch, SearchOption.AllDirectories)
                              .FirstOrDefault();

if(matchingFile != null)
{
    Console.WriteLine("File found: " + matchingFile);
}
else
{
    Console.WriteLine("Could nowhere below \"" + dir + "\" find the file \"" + fileToSearch + "\".");
} 
```

# javascript - Javascript 生成动态 json 响应

> ID：11840749
> 
> 赞同：0
> 
> 时间：2012-08-07T06:54:21.383
> 
> 标签：javascript, json, string, parsing

我试图创建一个基于特定数据的动态 JSON 对象。[源代码](https://gist.github.com/3282454)

如果我输入以下文本：

```
here
is
an:example
of:
how:this:works 
```

它生成：

```
[
  "here",
  "is",
  {
    "an": "example"
  },
  {
    "of": ""
  },
  {
    "how": {
      "this": "works"
    }
  }
] 
```

我怎样才能让它返回以下内容：（因为 foo 没有值，将对象推入数组）

```
[
  "here",
  "is",
  {
    "an": "example"
  },
  {
    "of": [
      "how": {
        "this": "works"
      }
    ]
  }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:33:50.080

你的问题不太清楚，所以我不得不猜测......你想把后面的所有值都`of:`放入一个数组中吗？所以基本上可以如下写带有缩进的原始输入（每个缩进都表示一个新数组）？

```
here
is
an:example
of:
    how:this:works:
        foo:bar
        example 
```

此外，您的第二个 JSON 示例不正确，`of:`数组的内容必须用大括号括起来，因为数组不能有键。

好吧，假设你想得到我上面描述的结果，你可以很容易地用递归做到这一点：

```
var jsonify = function(input) {
    var helper = function(items) {
        var end = [];
        for (i = 0; i < items.length; ++i) {
            var itemparts = items[i].split(':');
            var value = itemparts.pop();
            var dobreak = false;
            while (itemparts.length) {
                var obj = {};
                if (value == "" && i+1 < items.length) {
                    // Recursive call
                    value = helper(items.slice(i+1,items.length));
                    dobreak = true;
                }
                obj[itemparts.pop()] = value;
                value = obj;
            }
            end.push(value);
            if (dobreak) {
                break;
            }
        }
        return end;
    };

    return helper(input.split('\r\n'));
}; 
```

此函数搜索零长度值并检查以下行中是否存在值。如果是这样，则 ( `items.slice(...)`) 后面的所有值都使用相同的函数（即递归）单独处理，以将它们放入数组中。

使用上面的示例输入调用`jsonify`时，您将获得以下 JSON：

```
[
    "here",
    "is",
    {
        "an": "example"
    },
    {
        "of": [
            {
                "how": {
                    "this": {
                        "works": [
                            {
                                "foo": "bar"
                            },
                            "example"
                        ]
                    }
                }
            }
        ]
    }
] 
```

希望对您有所帮助... ;)

# jquery - mvc3 数据表插件和 json

> ID：11840750
> 
> 赞同：0
> 
> 时间：2012-08-07T06:54:24.457
> 
> 标签：jquery, asp.net-mvc-3, jquery-plugins

我正在尝试使用

*   数据表插件，
*   mvc3 框架和
*   实体框架

由于某种原因，它没有很好地呈现这段代码的结果是像这样在浏览器上输出数据

> [{"ServiceId":"8e651711-c837-4012-99f5-496549308b95","ServiceInstanceId":"312bf47d-5952-4c32-b1a8-ffdeb30507df","MessageRole":2,"Datetime":"/Date(1342699946063) /","Message":null,"Status":null,"ESBErrorCode":null,"ESBTecnicalErrorCode":null,"ErrorDescription":null,"PortName":null,"MachineName":null,"Exte

**控制器：**

```
 public JsonResult Index()
    {
        var tracks = db.Tracks.Include(t => t.Message).
            Select(n => new
            {
                ServiceId = n.ServiceId,
                ServiceInstanceId = n.ServiceInstanceId,
                MessageRole = n.MessageRole,
                Datetime = n.Datetime,
                Message = n.Message,
                Status = n.Status,
                ESBErrorCode = n.ESBErrorCode,
                ESBTecnicalErrorCode = n.ESBTecnicalErrorCode,
                ErrorDescription = n.ErrorDescription,
                PortName = n.PortName,
                MachineName = n.MachineName,
                ExternalId = n.ExternalId,
                ConsumerMachineName = n.ConsumerMachineName,
                ServiceBehavior = n.ServiceBehavior,
                RouterConsumerId = n.RouterConsumerId
            }); ;

        return Json(tracks.ToList(), JsonRequestBehavior.AllowGet);
    } 
```

**看法：**

```
@model IEnumerable<Fnx.ESB2.Infra.DataTier.Model.Track>
@{
ViewBag.Title = "ServiceMonitor2.0";
}

 @{
   AjaxOptions ajaxOpts = new AjaxOptions
   {

    UpdateTargetId = "MainTable",
    InsertionMode = InsertionMode.Replace,
    Url = Url.Action("Refresh", "MainScreen"),
    LoadingElementId = "loading",
    LoadingElementDuration = 10000

};        
   }
   @using (Ajax.BeginForm(ajaxOpts))
    { 

<div id="loading" style="display: none; color: Red; font-weight: bold">
    <p>
        Loading Data...</p>
</div>

<div id="header ">
    <form class="well form-search">
    ServicID
    <input type="text" class="input-medium search-query">
    <br />
    <button type="submit" class="btn">
        Search</button>
    </form>
</div>

<table cellpadding="0" cellspacing="0" border="0" width="50%" class="well form-inline" id="MainTable">
    <thead>
        <tr>
            <th>
                ServiceId
            </th>
            <th>
                ServiceInstanceId
            </th>
            <th>
                MessageRole
            </th>
            <th>
                Datetime
            </th>
            <th>
                Message
            </th>
            <th>
                Status
            </th>
            <th>
                ESBErrorCode
            </th>
            <th>
                ESBTecnicalErrorCode
            </th>
            <th>
                ErrorDescription
            </th>
            <th>
                PortName
            </th>
            <th>
                MachineName
            </th>
            <th>
                ConsumerId
            </th>
            <th>
                ExternalId
            </th>
            <th>
                ConsumerMachineName
            </th>
            <th>
                ServiceBehavior
            </th>
            <th>
                RouterConsumerId
            </th>
            <th>
            </th>
        </tr>
    </thead>

            <tbody>

          </tbody>

</table>

    } 
```

**查询：**

```
 $(document).ready(function () {
      $('#MainTable').dataTable({
     //        "bServerSide": true,
     //        "sAjaxSource": "MainScreen/Index",
     "sAjaxSource": '@Url.Action("Index", "MainScreen")'

    "bProcessing": true,
    "aoColumns": [
                    { "sName": "ServiceId"},
                    { "sName": "ServiceInstanceId"},
                    { "sName": "MessageRole"},
                    { "sName": "Datetime"},
                    { "sName": "Message"},
                    { "sName": "Status"},
                    { "sName": "ESBErrorCode"},
                    { "sName": "ESBTecnicalErrorCode"},
                    { "sName": "ErrorDescription"},
                    { "sName": "PortName"},
                    { "sName": "MachineName"},
                    { "sName": "ExternalId"},
                    { "sName": "ConsumerMachineName"},
                    { "sName": "ServiceBehavior"},
                    { "sName": "RouterConsumerId"}
]
       });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:29:04.700

我不确定问题是什么。我将向您展示我是如何做到的，然后您可以相应地对其进行修改。我的方式没有排序、过滤等花哨的功能。我的代码还没有 100% 完成，我还在尝试使用 jQuery 数据表。

我有一个显示我所有银行的数据表，它只显示银行的 ID 和名称。

数据表的列表视图 HTML 标记：

```
<table id="banks-datatable">
     <thead>
          <tr>
               <th>#</th>
               <th>Name</th>
          </tr>
     </thead>
     <tfoot>
          <tr>
               <th>#</th>
               <th>Name</th>
          </tr>
     </tfoot>
</table> 
```

jQuery：

```
$(document).ready(function () {
     $('#banks-datatable').dataTable({
          "aoColumns": [
               { "mDataProp": [0], "sWidth": "15%" },
               { "mDataProp": [1], "sWidth": "85%" }
          ],
          "bAutoWidth": false,
          "bFilter": false,
          "bLengthChange": false,
          "bProcessing": true,
          "bServerSide": true,
          "bSort": false,
          "iDisplayLength": 50,
          "sAjaxSource": '@Url.Action("GetAllBanks")'
     });
}); 
```

列表视图操作方法：

```
public ActionResult List()
{
     return View();
} 
```

获取所有银行操作方法：

```
public ActionResult GetAllBanks(DataTableParameterViewModel parameterViewModel)
{
     Check.Argument.IsNotNull(parameterViewModel, "parameterViewModel");

     IEnumerable<Bank> allBanks = bankRepository.FindAll();
     IEnumerable<Bank> filteredBanks = allBanks;

     var result =
          from bank in filteredBanks
          select new[]
          {
               u.Id.ToString(),
               u.Name
          };

     return Json(new
     {
          sEcho = parameterViewModel.sEcho,
          iTotalRecords = allBanks.Count(),
          iTotalDisplayRecords = filteredBanks.Count(),
          aaData = result
     },
     JsonRequestBehavior.AllowGet);
} 
```

数据表参数视图模型：

```
public class DataTableParameterViewModel
{
     public string sEcho { get; set; }

     public int iDisplayStart { get; set; }

     public int iDisplayLength { get; set; }
} 
```

我希望这有帮助。如果它没有帮助，请尝试分解您发送到数据表的数据，尝试一次发送一列以查看问题所在。

这是一篇关于代码项目的文章，您可以阅读，该系列中有几篇：

[使用 jQuery DataTables 插件增强 HTML 表格](http://www.codeproject.com/Articles/194916/Enhancing-HTML-tables-using-a-JQuery-DataTables-pl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:02:13.830

我通过添加方法来调用 JSON 并将索引方法留空来解决它

```
 public ActionResult Index( )
      {
        return View();
      } 
```

@Brendan Vogt 您的回答对我有帮助，谢谢

# java - 将值从 jsp 传递到 servlet 使用

> ID：11840751
> 
> 赞同：9
> 
> 时间：2012-08-07T06:54:25.170
> 
> 标签：java, jsp, servlets, href

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T06:59:27.523

如果你想使用 URL 向 servlet 发送参数，你应该这样做

```
<a href="goToServlet?param1=value1&param2=value2">Go to servlet</a> 
```

然后检索将在请求中可用的值。

关于你的第二个问题。我会说不。您可以在 URL 中添加一个参数，例如

```
<a href="goToServlet?method=methodName&param1=value1">Go to servlet</a> 
```

并使用该信息调用特定的方法。

顺便说一句，如果您使用像 Struts 这样的框架，那会更容易，因为在 Struts 中，您可以将 URL 绑定到特定的 Action 方法（比如说“servlet”）

**编辑**：

您已经以这种方式定义了您的 servlet：

```
@WebServlet("/servlet123") 
```

您，您的 servlet 将在 /servlet123 上可用。见[文档](https://blogs.oracle.com/swchan/entry/servlet_3_0_annotations)。

我已经测试了您的代码并且它正在工作：

```
@WebServlet(name = "/servlet123", urlPatterns = { "/servlet123" })
public class Servlet123 extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        resp.setContentType("text/html");
        PrintWriter out = resp.getWriter();
        out.write("<h2>Hello Friends! Welcome to the world of servlet annotation </h2>");
        out.write("<br/>");
        out.close();
    }
} 
```

然后，我调用了 servlet `http://localhost:8080/myApp/servlet123`（如果您使用的是 myApp，则成为您的应用程序上下文）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:58:48.650

`<a href="url">urltitle</a>`允许您定义一个 url。从这里调用 servlet 与从浏览器调用一样好，只需提供 url，就像在浏览器中提供的那样调用 servlet，如[http://mysite.com?param1=val1¶m2=val2](http://mysite.com?param1=val1&param2=val2)等。

# c++ - OpenCV C++ cv::convexityDefects 错误

> ID：11840752
> 
> 赞同：0
> 
> 时间：2012-08-07T06:54:26.607
> 
> 标签：c++, opencv, convex-hull

```
vector<Point> hull;
vector<Point> defects;
convexHull(Mat(largest),hull,false);
convexityDefects(largest,hull,defects); 
```

**最大*是我在图像中的最大轮廓

但是convexityDefects给了我这个错误“断言失败（hull.checkVector（1，CV_32S）> 2）”。有人请帮助我，我不想求助于使用 C 解决方案。

已编辑

```
vector<int> hull;
vector<Point> defects;
convexHull(Mat(largest),hull,false);

vector<vector<int>> testhull;
testhull.push_back(hull);
convexityDefects(largest,testhull,defects); 
```

`vector<vector<int>>`在将类型传递给凸度缺陷之前，我尝试使用该类型进行创建，但凸度缺陷仍然给我错误“断言失败（ptnum > 3）..”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:47:57.817

对于船体，你应该使用这样的向量向量：

```
vector<vector<Point>> hullsP( contours.size() );
vector<vector<int> > hullsI(contours.size()); 
```

并将“int”类型传递给 covexityDefects.like 这个：

```
vector<vector<Vec4i>> convdefect(contours.size());

for( int i = 0; i < contours.size(); i++ )
{ 
    convexHull( Mat(contours[i]), hullsP[i], false );
    convexHull( Mat(contours[i]), hullsI[i], false );       
    if(hullsI[i].size() > 3 )
        convexityDefects(contours[i],hullsI[i],convdefect[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:05:45.247

的第二个参数`convexityDefects`必须是 的类型`vector<vector<int>`，而你的是`vector<Point>`。

# facebook-graph-api - 如何识别推特中的重复推文？

> ID：11840755
> 
> 赞同：2
> 
> 时间：2012-08-07T06:54:44.640
> 
> 标签：facebook-graph-api, twitter, spring-social

我正在准备一个应用程序来使用 Twitter REST API 发送推文。如果用户尝试发送已从我的应用程序提交的推文，我想警告（重复推文）用户。

Twitter说重复的推文-

> 对于每次更新尝试，都会将更新文本与验证用户最近的推文进行比较。任何会导致重复的尝试都将被阻止，从而导致 403 错误。因此，一个用户不能连续两次提交相同的状态。

twitter 如何收集最近的推文？

1.  时间间隔。
2.  不。用户的最新推文。

推特上没有可用的定义。有人可以帮忙吗？

我在 facebook 状态更新中面临同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:12:12.153

Twitter 没有发布重复状态检测的确切条件，它们会随着时间的推移而变化。

我在以下位置找到了一个讨论：[https ://dev.twitter.com/discussions/800](https://dev.twitter.com/discussions/800)

我假设在 1 个月或发送 20 条推文后，我们可以再次输入重复的推文。我将在这两种情况下进行测试。

我将尝试与 facebook 重复插入相同的 1 个月或 20 个状态更新间隔。

# cuda - CUDA 5.0 的命令行分析器？

> ID：11840756
> 
> 赞同：0
> 
> 时间：2012-08-07T06:54:47.703
> 
> 标签：cuda, opencl, profiler

有没有人尝试过新的 CUDA 5.0 的命令行分析器？在早期版本中，它适用于 CUDA 和 OpenCL。但是在 5.0 中，当使用 GTX680 进行测试时，我只能为 cuda 程序生成输出文件（cuda_profile_0.log）。对于 OpenCL 程序，不会生成配置文件输出。我是否缺少任何配置或类似的东西？还是只是在 CUDA 5.0 中不支持 OpenCL 分析？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T16:19:15.433

nvprof 不支持 OpenCL。请注意，nvprof 是 CUDA Toolkit 5.0 中的一个新工具，因此它从不支持 OpenCL。

# cassandra - 启动 Cassandra 时读取保存的缓存和系统表时出错

> ID：11840762
> 
> 赞同：7
> 
> 时间：2012-08-07T06:55:08.763
> 
> 标签：cassandra

在运行 Cassandra Daemon 时，我遇到了以下异常。我从 1.2 主干运行。

```
WARN 14:47:51,038 error reading saved cache /home/manuzhang/cassandra/saved_caches/system-local-KeyCache-b.db
java.lang.NullPointerException
    at org.apache.cassandra.cache.AutoSavingCache.loadSaved(AutoSavingCache.java:141)
    at org.apache.cassandra.db.ColumnFamilyStore.<init>(ColumnFamilyStore.java:237)
    at org.apache.cassandra.db.ColumnFamilyStore.createColumnFamilyStore(ColumnFamilyStore.java:340)
    at org.apache.cassandra.db.ColumnFamilyStore.createColumnFamilyStore(ColumnFamilyStore.java:312)
    at org.apache.cassandra.db.Table.initCf(Table.java:332)
    at org.apache.cassandra.db.Table.<init>(Table.java:265)
    at org.apache.cassandra.db.Table.open(Table.java:110)
    at org.apache.cassandra.db.Table.open(Table.java:88)
    at org.apache.cassandra.db.SystemTable.checkHealth(SystemTable.java:284)
    at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:168)
    at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:318)
    at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:361) 
```

这是保存缓存的地方：

```
manuzhang@manuzhang-U24E:~/cassandra/saved_caches$ ls -l
total 12
-rw-rw-r-- 1 manuzhang manuzhang 156 Aug  7 13:09 system-local-KeyCache-b.db
-rw-rw-r-- 1 manuzhang manuzhang  60 Aug  7 13:09 system-schema_columnfamilies-KeyCache-b.db
-rw-rw-r-- 1 manuzhang manuzhang  60 Aug  7 13:09 system-schema_columns-KeyCache-b.db 
```

此外，无法加载系统表文件。

```
ERROR 17:03:16,637 Fatal exception during initialization
org.apache.cassandra.config.ConfigurationException: Found system table files, but they    couldn't be loaded!
at org.apache.cassandra.db.SystemTable.checkHealth(SystemTable.java:303)
at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:201)
at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:349)
at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:392) 
```

现在我能够重现每运行**三轮**Cassandra 的加载系统表故障（之后我清理了所有文件）。这里抛出异常：

```
/**
 * One of three things will happen if you try to read the system table:
 * 1\. files are present and you can read them: great
 * 2\. no files are there: great (new node is assumed)
 * 3\. files are present but you can't read them: bad
 * @throws ConfigurationException
 */
public static void checkHealth() throws ConfigurationException
{
    Table table;
    try
    {
        table = Table.open(Table.SYSTEM_TABLE);
    }
    catch (AssertionError err)
    {
        // this happens when a user switches from OPP to RP.
        ConfigurationException ex = new ConfigurationException("Could not read system table!");
        ex.initCause(err);
        throw ex;
    }
    ColumnFamilyStore cfs = table.getColumnFamilyStore(LOCAL_CF);

    String req = "SELECT cluster_name FROM system.%s WHERE key='%s'";
    UntypedResultSet result = processInternal(String.format(req, LOCAL_CF, LOCAL_KEY));

    if (result.isEmpty() || !result.one().has("cluster_name"))
    {
        // this is a brand new node
        if (!cfs.getSSTables().isEmpty())
            throw new ConfigurationException("Found system table files, but they couldn't be loaded!");

        // no system files.  this is a new node.
        req = "INSERT INTO system.%s (key, cluster_name) VALUES ('%s', '%s')";
        processInternal(String.format(req, LOCAL_CF, LOCAL_KEY, DatabaseDescriptor.getClusterName()));
        return;
    }

    String savedClusterName = result.one().getString("cluster_name");
    if (!DatabaseDescriptor.getClusterName().equals(savedClusterName))
        throw new ConfigurationException("Saved cluster name " + savedClusterName + " != configured name " + DatabaseDescriptor.getClusterName());
} 
```

这三个运行与评论中的三个条件完全对应。

第一次运行时“没有文件”，因为它是一个全新的节点。

在第二次运行中，“文件在那里，您可以阅读它们”。

在第三次运行中，“文件在那里，但您无法读取它们”，我已经检查了两者`result.isEmpty()`并`result.one.has("cluster_name")`返回`false`.

实际上，我对“无法加载”的异常感到困惑。这是什么意思？我认为这不是文件系统权限问题，因为当前用户已授予 r/w 权限。

删除所有相关文件后，上述问题就消失了，但我不想每次运行 Cassandra 时都这样做。

这一直困扰着我很长一段时间。

一个不相关的问题是我认为 Cassandra@stackoverflow 没有得到社区足够的关注。你同意吗？

任何想法或建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T17:59:37.900

我在两种情况下遇到了这个问题。

1.  我尝试在不删除集群数据的情况下更改分区器（不能这样做）另外查看[邮件列表](http://comments.gmane.org/gmane.comp.db.cassandra.user/9709)以获取解释。
2.  我在第一次启动时以超级用户身份运行 cassandra 进程，`sudo ./cassandra`它创建了必要的数据/日志/缓存目录，并且仅对超级用户具有权限，然后重新启动 cassandra 并以普通用户身份运行该进程（因此没有权限使用由超级用户运行的进程创建的目录中的文件）。

我知道您解决了问题，但这可能对其他开发人员有用。

# linux - 更改 xterm 为组合键生成的转义序列

> ID：11840763
> 
> 赞同：1
> 
> 时间：2012-08-07T06:55:11.707
> 
> 标签：linux, keyboard, terminal, autohotkey, terminfo

我的目标是设置一个终端，其中命令行界面程序的行为与键盘输入的预期一样（该程序最初是用 xharbour 为 Windows 编写的，但现在我想将它移植到 linux）。我选择 xterm 开始，因为它更简单，无需禁用默认终端组合键。

使用腻子，大多数角色都可以很好地工作，而对于那些不使用的人，我使用自动热键，一个 ahk 脚本就可以了。例如，对于 Ctrl+F1： `^F1::SendInput ^[O5P`

我尝试并修改，重新编译 terminfo，更改它并更改键盘类型，但无法获得 ^[O5P 在终端中按 Ctrl+F1 的响应。如果您知道进行此更改的任何方法，请告诉我...我已经阅读了数百页据称可以执行此操作的页面，但是所有这些更改都没有产生任何效果或没有达到预期的效果。

所以我试图修改终端设置以实现我的 Ctrl+F1 到 ^[O5P 目标，并尝试了一些类似于自动热键的命令和程序：

*   `xmodmap`，但对于组合键它不起作用
*   `xdotool`windowactivate xyz type ^[O5P，这将返回单个字符的字符代码
*   `xmacro`，它不会将击键发送到其他窗口
*   `ironahk`，我在开始尝试运行 example.ahk 时遇到错误，并且在其简易手册中找不到我想要的命令。
*   `bind '\e[1;5P":"\e[O5P"'`，这里的第一个键码是我当前在键入 ctrl+f1 时得到的，在我希望通过这个组合得到的那个键码之后。没有效果。
*   `xbindkeys`+ `xvkbd`，也没有帮助。

如果您已经知道，请帮助我，设法实现这一点（更改为组合键返回的键码）。

我使用最新的 CentOS 和 Ubuntu 进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T18:06:32.897

xterm 可以配置为通过修改其**翻译表**在按下某些键时发送自定义字符串。转换表是`xrdb`命令管理的 X 资源数据库的一部分。

[这里](http://www.in-ulm.de/~mascheck/X11/xterm/XTerm)有一个为 xterm 定制翻译表的好例子。它可以复制到您的`$HOME/.Xdefaults`or`$HOME/.Xresources`中，并且将在您下次登录时加载。要立即将其加载到当前会话中，`xrdb -merge $HOME/.Xresources`. 这不会影响任何已经在运行的 xterm。（您也许可以使用 更改正在运行的 xterm 的转换表`editres`，但这比它的价值更麻烦。）

要为单个 xterm 实例提供自定义转换表，请使用该`-xrm`选项，如

```
xterm -xrm 'XTerm.VT100.translations: #override Ctrl<Key>Left: string(0x1b) string("b") \n Ctrl<Key>Right: string(0x1b) string("f")' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:26:03.297

不*直接*回答问题，但`ESC O 5 P`对于终端发送来说是一件非常错误的事情。

简而言之：`ESC O`，或者称为`SS3`Single Shift 3 的缩写，是一个修改发送的下一个字符的序列，将其放在 G3 图形区域而不是标准区域。这将修改 5 并直接发送 P。这不是而且从来都不是一个好主意。

要发送的正确内容`Ctrl-F1`是， （作为 F1 键）的`CSI 1;5 P`一种形式，第二个参数设置为 5（作为修饰符位掩码）。`CSI P`

# android - 保存项目的应用程序开发问题

> ID：11840766
> 
> 赞同：0
> 
> 时间：2012-08-07T06:55:32.020
> 
> 标签：android, ios, air

我正在 Adob​​e Air 下开发一个应用程序。该应用程序将允许用户将项目保存到服务器。我有三个选择。

*   定期保存（每 5 或 10 分钟）
*   按下按钮保存
*   不断保存每一个动作。

顺便说一句，数据范围 1KB - 200KB

哪种方法通常会实现性能和可用性的观点。

干杯比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:21:45.377

这个问题真的没有一个普遍的答案。这三种方法都适用于您的应用程序（尽管“不断”节省 200KB 可能有点陡峭，具体取决于“不断”的真正含义），这实际上完全取决于您需要保存的项目类型以及您真正需要的频率它被保存。

例如，我目前正在开发的移动应用程序适用于用户可以配置的工作空间。这些从服务器加载并保存到服务器。尽管可以在用户进行每次更改后不断保存工作区更改，但它会阻塞数据传输管道。按下按钮保存也可以，但我个人认为用户可能会忘记保存，我真的认为保存按钮非常像桌面。用户不希望平板电脑上有类似的东西，他们希望它能够正常工作。所以我所做的只是在用户切换它并且应用程序暂停或退出时才保存工作区。

同样，这只是我的应用程序中的一个示例，您的解决方案实际上取决于您的需求。对于游戏，我会保存关键点，即关卡变化，每隔一分钟定期保存，这样当应用程序崩溃时，游戏进程就不会丢失。也可能适用于您的应用。

# iphone - 滚动 UIView 及其内容

> ID：11840773
> 
> 赞同：-1
> 
> 时间：2012-08-07T06:56:20.460
> 
> 标签：iphone, ipad, uibutton, uiimage, scrollview

我是 iPhone 新手，

我有一张`shelf`图片，我已经在我的图片中加载了这张图片，`View`然后我创建了一个按钮并添加到`View`

**查看快照：** ![](../Images/b310a09b3c706d43f7dc547ee27ab7fc.png) 但问题是，我想要`scroll`我的`shelf`图像，所以我保留`shelf`在里面`scroll`，所以架子可以正确滚动，但视图内的按钮不会滚动。

我也想在图像和按钮中滚动。

**如何做到这一点？或任何可用的教程？**

***任何帮助都会得到帮助。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:11:12.117

您应该将 yourButton 视图添加到 yourScrollView 作为子视图。

```
[yourScrollView addSubView:yourButton]; 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:59:29.367

您已将按钮放在 superview 上，不是吗？把它们放在你的架子上，它们就会滚动。此外，在提出问题时使用发布您的代码，这将有助于分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:15:17.467

最好的方法是使用你`Shelf.png`作为滚动视图的背景，然后根据图像设置按钮，问题得到解决，因为背景正在滚动，所有滚动都在滚动视图中

快乐编码:)

**编辑 1**

用于设置 scrollView 的 backgroundImage

```
[catScroll setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"small_tab_.1.png"]]]; 
```

真实形象是

![在此处输入图像描述](../Images/739a41d6e1b174cf97b7d94355e05f29.png)

结果滚动视图是（因为我需要它作为水平滚动视图）

![在此处输入图像描述](../Images/9220474f94e74f8424d365a658551ce8.png)

# css - 复选框标签在 iPad 中单击

> ID：11840775
> 
> 赞同：4
> 
> 时间：2012-08-07T06:56:22.523
> 
> 标签：css, ipad

我使用了一些带有 Lable 标记的复选框，其背后的原因是，如果用户单击相应复选框选择的文本，但是当我在 iPad 中测试它时，如果用户单击直接复选框，它的工作正常，但是当单击文本时，它不会响应就像它在桌面上所做的那样

请检查此**[链接](http://jsfiddle.net/HqMuN/)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-07T10:52:25.920

我遇到了这个问题，我在我的博客上写了一个简单的 CSS 修复：http: [//www.tjcafferkey.me/problems-clicking-input-label-select-ios-safari/](http://www.tjcafferkey.me/problems-clicking-input-label-select-ios-safari/)

CSS 很简单：

```
label > * {
  pointer-events:none;
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:26:01.873

您是否尝试过简单地使用 ID/FOR 组合？

```
<input type="checkbox" id="mycheckbox" />

<label for="mycheckbox">Click here</label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:46:03.657

从这两个问题（[3035954](https://stackoverflow.com/questions/3035954/workaround-iphones-browser-not-honoring-the-label-element)，[7358781](https://stackoverflow.com/questions/7358781/tapping-on-label-in-mobile-safari)）中学习，似乎有一个黑客会产生你想要的行为：

为每个标签添加一个空的 onclick 处理程序应该可以工作，例如：

```
<label onclick=""><input type="checkbox"> Checkbox</label> 
```

或者，或者，您可以通过一些侵入性较小的 javascript 来执行此操作，例如：

```
$('label').click(function(){}); 
```

# exception - J2ME InvalidRecordIDException 诺基亚 2700

> ID：11840779
> 
> 赞同：2
> 
> 时间：2012-08-07T06:56:37.290
> 
> 标签：exception, java-me, rms

我有一个 RMS 检索自 512 条记录

```
rs.getNumRecords(); 
```

但是当我尝试使用`getRecordId(i)`或即使使用 读取记录时

```
rs.enumerateRecords( null, null, false ); 
```

我得到`InvalidRecordIDException`, 对于从 1 到 180 的记录，并且我能够读取从 181 索引到 onwords 的记录。

我不会删除应用程序中任何地方的记录。

在处理（读取此 RMS）和覆盖应用程序之间存在退出应用程序的实例。

在读取记录时，我在 try 块的末尾关闭了 RMS。

是否有任何可能的原因导致 RMS 损坏或特定索引损坏？

使用 getRecord 读取 RMS 的代码是

```
 try {
        RecordStore rs = RecordStore.openRecordStore(getTableName(), true);
        ByteArrayInputStream inputStream = null;
        DataInputStream inputDataStream = null;

       int nor = rs.getNumRecords();

      for(int i=1;i<=nor;i++)
      {
         System.out.println("i : "+i);

        _recordByteArr =  rs.getRecord(i);

        inputStream = new ByteArrayInputStream(_recordByteArr);
        inputDataStream = new DataInputStream(inputStream);

        System.out.println("val at " + i + " ::" + new String(_recordByteArr));

        //used inputDataStream.readUTF() here
      }
      if (inputDataStream != null) {
            inputDataStream.close();
      }
      if (inputStream != null) {
            inputStream.close();
      }

      rs.closeRecordStore();

    } catch (Exception e) {
        System.out.println("exp in read fieldtxn :" + e);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:12:24.503

根据有关`enumerateRecords`方法“这是遍历记录存储中所有记录的最有效方法”的文档。

我总是使用`rs.enumerateRecords(null /*filter*/, null /*comparator*/, false /*keepUpdated*/)`，因为我相信它更安全。

`InvalidRecordIDException`你从`RecordEnumeration`遍历中得到一个是很奇怪的。一定要这样使用

```
RecordEnumeration re = rs.enumerateRecords( null, null, false );
while (re.hasNextElement()) {
    int i = re.nextRecordId();
    System.out.println("i : "+i);
    _recordByteArr =  rs.getRecord(i);
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:06:19.330

当您在 RMS 中存储记录时，它会自动为每个获取存储的记录创建一个新 ID。此 ID 对于每条记录都是唯一的。假设您添加了 10 条记录。现在，如果您删除第 5 条记录并向 RMS 添加一条新记录，那么这条新添加的记录将获得 ID = 11。

当您使用 getRecords(int recNumber) 方法获取记录时，当 recNumber 值为 5 时，它将返回异常，`InvalidRecordIDException`因为第 5 条记录被删除。

我创建了一个[RMS 库类](https://stackoverflow.com/a/11606698/996493)。有一个名为 getRecords() 的方法将返回字符串数组作为记录。您可以使用该字符串数组来获取您正在寻找的记录。这对你来说很容易。

# spring - Maven 是否像 Ant 那样基于文本的工具？

> ID：11840786
> 
> 赞同：2
> 
> 时间：2012-08-07T06:57:19.713
> 
> 标签：spring, maven

我是 Spring 新手，我正在寻找一种解决方案来帮助我在项目中填写 Spring 的依赖项。所以我遇到了其他人在这个[问题](https://stackoverflow.com/questions/11824965/how-should-you-load-spring-related-jar-in-eclipse)中建议的 Maven 。我正在努力学习它。

我发现它并没有提供与 Eclispe 集成的简单方法。尽管官方网站确实给出了关于 eclipse 集成的一些提示，但并没有多大帮助。该站点的大多数提示都是命令行，应该在 shell 中执行。

我发现 Spring Tool Suite 已经为我们在 Eclipse 中集成了 Maven。我尝试为它制作一个 pom.xml，发现我可以用 Maven 构建它：

![在此处输入图像描述](../Images/9e2d54c6a4ef2dc850b840c3ca98198c.png)

我选择了“安装”并成功完成。但是这个项目还是有很多红叉：

![在此处输入图像描述](../Images/b3c2fc2141ef91da30e5dc29e53176cd.png)

它实际上在做什么？

这是我的 pom.xml，它有 spring.core 和 spring.context：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.aj.spring</groupId>
    <artifactId>certification</artifactId>
    <packaging>jar</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>certification</name>

    <!-- Shared version number properties -->
    <properties>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
    </properties>

        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>exec-maven-plugin</artifactId>
                    <version>1.2.1</version>
                    <configuration>
                        <mainClass>com.aj.spring.MainClass</mainClass>
                        <arguments>
                            <argument>argument1</argument>
                        </arguments>
                    </configuration>
                </plugin>
            </plugins>
        </build>

    <!-- Core utilities used by other modules. Define this if you use Spring 
        Utility APIs (org.springframework.core.*/org.springframework.util.*) -->
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Expression Language (depends on spring-core) Define this if you use 
            Spring Expression APIs (org.springframework.expression.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Bean Factory and JavaBeans utilities (depends on spring-core) Define 
            this if you use Spring Bean APIs (org.springframework.beans.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Aspect Oriented Programming (AOP) Framework (depends on spring-core, 
            spring-beans) Define this if you use Spring AOP APIs (org.springframework.aop.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Application Context (depends on spring-core, spring-expression, spring-aop, 
            spring-beans) This is the central artifact for Spring's Dependency Injection 
            Container and is generally always defined -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Support for testing Spring applications with tools such as JUnit and 
            TestNG This artifact is generally always defined with a 'test' scope for 
            the integration testing framework and unit testing stubs -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework.version}</version>
            <scope>test</scope>
        </dependency>

        <!-- Various Application Context utilities, including EhCache, JavaMail, 
            Quartz, and Freemarker integration Define this if you need any of these integrations -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Transaction Management Abstraction (depends on spring-core, spring-beans, 
            spring-aop, spring-context) Define this if you use Spring Transactions or 
            DAO Exception Hierarchy (org.springframework.transaction.*/org.springframework.dao.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- JDBC Data Access Library (depends on spring-core, spring-beans, spring-context, 
            spring-tx) Define this if you use Spring's JdbcTemplate API (org.springframework.jdbc.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Object-to-Relation-Mapping (ORM) integration with Hibernate, JPA, 
            and iBatis. (depends on spring-core, spring-beans, spring-context, spring-tx) 
            Define this if you need ORM (org.springframework.orm.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Object-to-XML Mapping (OXM) abstraction and integration with JAXB, 
            JiBX, Castor, XStream, and XML Beans. (depends on spring-core, spring-beans, 
            spring-context) Define this if you need OXM (org.springframework.oxm.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Web application development utilities applicable to both Servlet and 
            Portlet Environments (depends on spring-core, spring-beans, spring-context) 
            Define this if you use Spring MVC, or wish to use Struts, JSF, or another 
            web framework with Spring (org.springframework.web.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Spring MVC for Servlet Environments (depends on spring-core, spring-beans, 
            spring-context, spring-web) Define this if you use Spring MVC with a Servlet 
            Container such as Apache Tomcat (org.springframework.web.servlet.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Spring MVC for Portlet Environments (depends on spring-core, spring-beans, 
            spring-context, spring-web) Define this if you use Spring MVC with a Portlet 
            Container (org.springframework.web.portlet.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc-portlet</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
</dependency>

    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:24:20.903

看完你的问题后，我找不到与你的标题有任何关系。

无论如何，您可以尝试右键单击您的项目，然后选择`Maven`->`Update Dependencies`或`Update Project Configuration`. 有时项目中的更改（尤其是手动更改）需要手动刷新以使 M2E 插件了解您的更改并为您同步 Eclipse 项目。

此类问题可能导致 maven 安装工作（因为它直接从 POM 读取并执行构建），但 Eclipse 不会（因为它基于 M2E 插件生成的 Eclipse 项目构建）

# web-services - 如何让一场战争依赖另一场战争？

> ID：11840789
> 
> 赞同：1
> 
> 时间：2012-08-07T06:57:34.893
> 
> 标签：web-services, jboss

我有一场战争，它消耗了另一场战争的服务。在 jboss application.xml 中，我添加了这些要部署的战争。但是依赖的战争是抛出一个 readtimeout 异常（套接字连接超时）。我应该如何使这项工作？

我们目前使用的是 Jboss 4.2.3，但未来我们计划迁移到 jboss 7.1.1。

因此，所需的解决方案应该适用于两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:42:30.920

**我不知道这是否适用于 Jboss 4**，但你可以尝试..

在`WEB-INF/jboss-web.xml`，试试这个（这是针对 Jboss 5，所以相应地修改架构）

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web xmlns:xs="http://www.jboss.org/j2ee/schema" xs:schemaLocation="http://www.jboss.org/j2ee/schema http://www.jboss.org/j2ee/schema/jboss-web_5_1.xsd" version="5.1">
    <depends>jboss.web.deployment:war=/important-app</depends>
</jboss-web> 
```

# javascript - 无法使用 .data(el,'dataname').sublev 获取数据对象

> ID：11840792
> 
> 赞同：1
> 
> 时间：2012-08-07T06:57:55.580
> 
> 标签：javascript, jquery, jquery-data

我正在使用此代码存储数据。

```
baslat: function(data) {
            var $bu = $(this).get(0);
            if(!$.data($bu, "ipucu_secenekleri")){
                metodlar.domEkle.apply(this, data);
                var ipucu_secenekleri = $.extend({}, s, data);

                $.data($bu, 'ipucu_secenekleri', ipucu_secenekleri);

            }

            return this;
        }, 
```

但是当我尝试获取名为 ipucu_secenekleri 的数据时

```
 domEkle: function (data) {

               var $bu = $(this).get(0),
               icerik = $.data($bu,"ipucu_secenekleri");
               console.log(icerik) //undefined
            } 
```

那更多......这些也是未定义的：

```
$.data($bu).ipucu_secenekleri

var datam = $.data($bu);
datam.ipucu_secenekleri; 
```

但这是有趣的部分。当我尝试获取整个数据并对其进行控制台时，我可以看到我存储的数据......

```
$.data($bu); //it returns the data object which contains ipucu_secenekleri. 
```

但是正如您所看到的，分配给变量是没有用的。我无法达到子级别，for in loop 也无法达到。

```
for(var i in datam){console.log(datam[i])} //no effect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:33:29.463

[$.data()](http://api.jquery.com/jQuery.data/)是一种低级方法。您应该尝试[.data()](http://api.jquery.com/data/)方法：

在您的代码中替换

```
$.data($bu, "ipucu_secenekleri") 
```

和

```
$bu.data("ipucu_secenekleri") 
```

...等等。

# jquery - 在 jquery 中设置复选框值

> ID：11840797
> 
> 赞同：0
> 
> 时间：2012-08-07T06:58:23.313
> 
> 标签：jquery

在我的页面中，我有一组复选框（4 个复选框）。默认情况下，它们没有设置任何值。如果选中了两个复选框，然后我提交了页面，那么我得到的复选框数组 [on,on]。但我需要它像 ['YES','YES','NO','NO']。但我没有设置复选框的值。请帮忙。下面是我的代码，

```
$('input[name$="chkIndex"]').each(function(){
            if($(this).attr('checked')){
                  $(this).val='YES';
                }else{
                  $(this).val='NO';
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:00:51.737

`val()`是一种方法，你可以试试：

```
 $(this).val('YES'); 
```

```
$('input[name$="chkIndex"]').each(function(){
     if(this.checked){
         $(this).val('YES');
         // or this.value = "YES";
     } else {
         $(this).val('NO');
         // or this.value = "NO";
     }
}); 
```

# android - 如何在android中获取被画布覆盖的选择区域

> ID：11840811
> 
> 赞同：0
> 
> 时间：2012-08-07T06:59:36.497
> 
> 标签：android, canvas

嗨，我想创建简单的cropImage Apps。所以我使用`canvas`并绘制它 rubtime。我在视图上绘制画布。所以我想剪辑画布覆盖的区域。所以在这里我喜欢这样。

首先创建`Canvas Example`

```
public class CanvasExample extends Activity 
    {
        /** Called when the activity is first created. */

        RelativeLayout relMainOperationLayout;
        RelativeLayout relTabHeader;
        RelativeLayout relMidalLayout;
        RelativeLayout relBelowLayout;
        Context myContext;
        DrawCanvas drawCanvas;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            myContext=CanvasExample.this;

            LayoutInflater layoutInflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);   

            int layoutId = myContext.getResources().getIdentifier("main","layout",getPackageName());

            relMainOperationLayout = (RelativeLayout) layoutInflater.inflate(layoutId,null);

            relTabHeader=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relHeadLayout);

            relMidalLayout=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relmidalLayout);

            relBelowLayout=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relBelowLayout);

            drawCanvas=new DrawCanvas(CanvasExample.this,myContext);
            //drawCanvas.setBackgroundColor(Color.YELLOW);
            drawCanvas.setBackgroundDrawable(CanvasExample.this.getResources().getDrawable(R.drawable.ic_launcher));
            RelativeLayout.LayoutParams drawParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,200);
            drawParams.addRule(RelativeLayout.BELOW, relTabHeader.getId());
            //relMidalLayout.addView(drawCanvas,drawParams);
            relMainOperationLayout.addView(drawCanvas,drawParams);
            setContentView(relMainOperationLayout);
        } 
```

在此之后我创建一个类`DrawCanvas`扩展`View`。并绘制`Canvas`运行时间。

```
public class DrawCanvas extends View 

{

Context drawContext;
Activity drawActivity;
ImageView image;
Paint mPaint;
int left=0,right=0,top=0,bottom=0;
Canvas passCanvas;

public DrawCanvas(Activity activity,Context context)
{
    super(activity);
    this.drawActivity=activity;
    this.drawContext=context;

        mPaint = new Paint();

        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(3);

    this.setOnTouchListener(new View.OnTouchListener() {

        //@Override
        public boolean onTouch(View v, MotionEvent event)
        {

            switch (event.getActionMasked()) 
            {
            case MotionEvent.ACTION_DOWN:
                invalidate();
                left=(int) event.getX();
                right=left+1;
        top=(int) event.getY();

                bottom=top+1;               

                mPaint.setColor(Color.BLACK);
           onDraw(passCanvas=new Canvas());
            break;
            case   MotionEvent.ACTION_MOVE:                 
                invalidate();

                int tempX=(int) event.getX();

                if(tempX>right)
                {
                    right=right+1;

                }else
                {
                    right=right-1;
                }                   
                int tempY=(int) event.getY();

                if(tempY>bottom)
                {
                bottom=bottom+1;                
                }else
                {
                    bottom=bottom-1;        

                }
        mPaint.setColor(Color.GREEN);
                onDraw(passCanvas=new Canvas());
            break;

            case MotionEvent.ACTION_UP:
                invalidate();
                mPaint.setColor(Color.RED);
                onDraw(passCanvas=new Canvas());
                System.err.println("After Touch Up");
                Rect rect= passCanvas.getClipBounds();
                System.err.println("Save Canvas-->"+passCanvas.save());
                System.err.println("Display Rect Width==>"+rect.toString());

            break;
            default:
                break;
            }
    return true;
        }
    });     

}

@Override
protected void onDraw(Canvas canvas) 
{

    canvas.drawRect(left, top, right, bottom, mPaint);

} 
```

}

所以现在我该怎么办我想用画布裁剪覆盖的区域。预先感谢。

当我 getClipBounds 它现在显示空值我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T14:07:45.597

我想你想做非矩形裁剪。请参阅[Android - 从多点裁剪图像](https://stackoverflow.com/questions/11579645/android-crop-an-image-from-multipoints/11841619#11841619)或[如何在 Android 上裁剪四点之间的图像](https://stackoverflow.com/questions/17721111/how-to-crop-an-image-in-between-four-points-on-android)

您可能会发现它们很有用。

最好的编码！

# java - 将 httpservletrequest 传递给方法

> ID：11840812
> 
> 赞同：0
> 
> 时间：2012-08-07T06:59:51.143
> 
> 标签：java

我有一个接受 HttpServletRequest 的 servlet 类，我需要将请求传递给另一个方法。如何以另一种方法获取请求。

小服务程序：

```
 public void doPost(final HttpServletRequest request,
                               final HttpServletResponse response)
      XmlParser xmlParser = new XmlParser();
      xmlParser.getRequest(request); 
```

XmlParser 类：

```
public class XmlParser{
    public void getRequest () //How can i get the request parameter from the servlet. 
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:02:14.620

将其传递给构造函数：

```
public class XmlParser{
    final private HttpServletRequest request;
    public XmlParser(HttpServletRequest request)
    {
        this.request = request;
    }
    // use it in othe methods...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:03:03.623

```
public class XmlParser {
    private final HttpServletRequest request = null;

    public XmlParser(HttpServletRequest request) {
        this.request = request;
    }

    ... other methods 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:51:38.430

所有其他答案都是有效的，但我建议您不要将 XmlParser 与 HttpServletRequest 结合使用。从 HttpServletRequest（一个 InputStream，它读取正文内容？）中检索您需要的所有数据并将其传递给 XmlParser。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T07:02:25.780

在您的 XmlParser 类中存储对请求的引用。`XmlParser`并在需要从该请求中获取参数时在方法中使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T07:02:37.610

```
public class XmlParser{
HttpServletRequest request;
public XmlParser(HttpServletRequest request){
this.request=request;
}
public void getRequest () 
{}
} 
```

# wpf - 如何设置 ListBoxItems 的样式，就像它们一个接一个一样

> ID：11840817
> 
> 赞同：0
> 
> 时间：2012-08-07T07:00:47.913
> 
> 标签：wpf, xaml, listbox, styles, listboxitem

我有一个包含大量项目的列表框。我想以这样一种方式排列物品，使它们看起来像是一个接一个地排列（如附图所示），但不知道该怎么做。我正在使用 Expression Blend。请建议我可以实现此设计的方法。任何帮助表示赞赏！

![在此处输入图像描述](../Images/932ac66f01cbdef6a1b3ab1cf1bc9349.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:35:32.513

您必须将ListBox（或[ItemsControl ）的](http://msdn.microsoft.com/en-us/library/ms611045)[ItemsPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel)属性设置为执行所需布局的面板。

[可以通过从Panel](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx)派生并覆盖[MeasureOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride)和[ArrangeOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.arrangeoverride)方法来创建这样的面板。

# php - 在字符串 PHP 中查找单词

> ID：11840828
> 
> 赞同：0
> 
> 时间：2012-08-07T07:01:35.393
> 
> 标签：php, string, word, boolean, preg-match

如何检查字符串中是否有特定的工作？假设我有一个这样的字符串

> 错误=姓名&密码&邮箱

所以我想检查姓名、通行证或/和电子邮件是否在字符串中。我需要答案是布尔值，所以我可以在那里做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:09:01.663

```
<?php
$mystring = 'wrong=name&pass&email';
$findme   = 'name';
$pos = strpos($mystring, $findme);

if ($pos === false) {
echo "The string '$findme' was not found in the string '$mystring'";
} else {
echo "The string '$findme' was found in the string '$mystring'";
echo " and exists at position $pos";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:04:24.643

```
if ( stristr( $string, $string_im_looking_for) ){
     echo 'Yep!';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:04:31.620

采用`strstr()`

```
if (strstr($string,'pass'))
{
    echo"pass is here";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T07:04:16.620

你可以先把弦炸开。像这样的东西；

```
$arrayOfWords = explode('&', $yourString); 
```

然后循环遍历数组并检查 isset。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T07:12:45.083

从您的示例的外观看来，您实际上想要做的是解析查询字符串，例如[`parse_str`](http://uk.php.net/manual/en/function.parse-str.php)：

```
parse_str($string, $result);
if(isset($result['name']))
  // Do something 
```

但是，如果字符串可能格式错误等。我建议使用[`strpos`](http://uk.php.net/manual/en/function.strpos.php), 与[`strstr`](http://uk.php.net/manual/en/function.strstr.php)其他字符串不同，它不需要创建新字符串。

```
// Note the `!==` - strpos may return `0`, meaning the word is there at
// the 0th position, however `0 == false` so the `if` statement would fail
// otherwise.
if(strpos($string, 'email') !== false)
  // Do something 
```

# .net - 奇怪的 WCF 异常：底层连接已关闭：连接意外关闭

> ID：11840830
> 
> 赞同：1
> 
> 时间：2012-08-07T07:01:52.840
> 
> 标签：.net, wcf, wcf-binding

我正在使用 .NET 4.0 创建一个托管在 IIS 7.0 上的 WCF Web 服务。一切似乎都很好，除了一个奇怪的 WCF 异常，如下所示。

```
 Message       : The underlying connection was closed: The connection was closed unexpectedly.
Stack Trace   : Server stack trace: 
   at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

乍一看，我认为这应该与消息大小有关，因此我调整了绑定配置：

```
<binding 
    closeTimeout="00:01:00"
    openTimeout="00:01:00"
    receiveTimeout="00:10:00"
    sendTimeout="00:01:00"
    allowCookies="false"
    bypassProxyOnLocal="false" 
    hostNameComparisonMode="StrongWildcard" 
    maxBufferSize="2147483647" 
    maxBufferPoolSize="2147483647"
    maxReceivedMessageSize="2147483647"
    messageEncoding="Text"
    textEncoding="utf-8"
    transferMode="Buffered"
    useDefaultWebProxy="true">
          <readerQuotas
        maxDepth="2147483647"
        maxStringContentLength="2147483647"
        maxArrayLength="2147483647"
        maxBytesPerRead="2147483647"
        maxNameTableCharCount="2147483647" />
          <security mode="Transport">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>

<serviceBehaviors>
    <behavior>
            <serviceMetadata httpGetEnabled="false" />
            <serviceDebug includeExceptionDetailInFaults="true" />
            <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
        </behavior>
</serviceBehaviors> 
```

不幸的是，它没有按我的预期工作。另一个想法来了，我认为它应该与IIS配置有关，所以我将我的web.config更改为如下：

```
 <system.web>
    <compilation targetFramework="4.0" />
    <globalization culture="en-US" uiCulture="en-US" />
    <customErrors mode="RemoteOnly"></customErrors>
    <httpRuntime executionTimeout="10800" maxRequestLength="2147483647" />
  </system.web> 
```

不幸的是，上述任何更改都不能帮助我解决我的问题。我仍然在客户端站点看到那个奇怪的 WCF 异常。下面是客户端绑定：

```
<binding name="myClientBinding"
             closeTimeout="00:10:00"
             openTimeout="00:10:00"
             receiveTimeout="01:00:00"
             sendTimeout="01:00:00"
             allowCookies="false"
             bypassProxyOnLocal="false"
             hostNameComparisonMode="StrongWildcard"
             maxBufferSize="2147483647"
             maxBufferPoolSize="524288"
             maxReceivedMessageSize="2147483647"
             messageEncoding="Text"
             textEncoding="utf-8"
             transferMode="Buffered"
             useDefaultWebProxy="true">
      <readerQuotas
        maxDepth="21474836"
        maxStringContentLength="21474836"
        maxArrayLength="21474836"
        maxBytesPerRead="21474836"
        maxNameTableCharCount="21474836" />
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding> 
```

关于 WCF 和 IIS 发生了什么的任何想法......！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T09:17:37.550

连接仅在请求级别关闭。所以服务甚至没有被调用。

1.  尝试在客户端级别增加 closeTimeout 的值。
2.  使用 client.Close(); 使用后关闭每个实例的客户端连接。
3.  检查服务的 uri 是否正确。

# java - Hibernate HQL 转换：java.lang.String 不能转换为 java.lang.Enum

> ID：11840831
> 
> 赞同：12
> 
> 时间：2012-08-07T07:02:00.377
> 
> 标签：java, hibernate

我遇到了这个问题：

```
java.lang.String cannot be cast to java.lang.Enum 
```

当我尝试这个*HQL*时：

```
...
query = em.createQuery("SELECT object from Entity object where object.column = ?");
query.setParameter(1, "X");
return query.getResultList(); 
```

在 DB 中，*类型*是带有检查约束的*Varchar2(x)* ，实体中的变量是使用标记 @Enumerated(EnumType.STRING) 使用*Enum定义的：*

```
public enum ColumnEnum {
    X, Y;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-07T07:08:57.810

如果该字段被定义为枚举，则必须将枚举作为参数传递：

```
query.setParameter(1, TypeEnum.X); 
```

并让 Hibernate 使用映射将参数转换为 String（如果`@Enumerated(EnumType.STRING)`使用）或 int（如果`@Enumerated(EnumType.ORDINAL)`使用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T07:47:43.663

**使用以下注释**

```
@Enumerated (value = EnumType.STRING) 
```

或者

```
Query q = session.createQuery(from Comment c where c.rating = :rating);
q.setParameter(rating,
               Rating.LOW,
               Hibernate.custom(RatingUserType.class)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-30T10:10:31.350

这是示例，有两种方法。

*   第一种方法是明确提供枚举
*   第二个更方便的方法是提供一个字符串表示，如果一个字段被枚举为 sring。

* * *

```
 public Optional<AffectedAsset> getByEntityId(Long entityId, String assetType) {
    String hql = "FROM AffectedAsset a WHERE a.entityId = :entityId "
            + "                        AND a.type = :assetType "
            + "   ORDER BY id DESC";
    Query query = getSession().createQuery( hql );
    query.setLong( "entityId", entityId );
    // little bit cumbersome : 
    // query.setParameter( "assetType", AffectedAsset.Type.valueOf( assetType.toUpperCase() ) );
    // my preferred way :
    query.setString( "assetType", assetType.toUpperCase() );
    query.setReadOnly( true );
    query.setMaxResults( 1 );

    AffectedAsset res = (AffectedAsset) query.uniqueResult();
    return Optional.ofNullable( res );
} 
```

# javascript - 使用 Jquery 生成具有唯一 href 的按钮

> ID：11840832
> 
> 赞同：0
> 
> 时间：2012-08-07T07:02:04.557
> 
> 标签：javascript, jquery

好的，所以这可能有点复杂，所以请耐心等待。

我有一个 HTML 块，其中包含几个具有坐标的隐藏字段：

```
 <div id="content">
<div class="event">
    Blah blah blah
    <input id="e1coords" class="coords" name="e1coords" type="hidden" value="-27.482359,153.024725" />
</div>

<div class="event">
    blah blah blah
    <input id="e2coords" class="coords" name="e2coords" type="hidden" value="-27.471134,153.0182" />
</div>
<div class="event">
    blah blah blah
    <input id="e3coords" class="coords" name="e3coords" type="hidden" value="-27.471667,153.023704" />
</div>
    </div> 
```

我有一些代码应该从每个隐藏的输入（坐标）中获取值并将其传输到 href url 的一部分。例如：

```
 //GET COORDS
            $(content).find('.coords').each(function() {
                var coords = $(this).val();

                //CREATE BUTTON, ADD VALUE FROM
                var input2 = '<div class="inputholder"><a class="viewmap" href="maptest.html?longlat='+ coords +' "><button>Find on Map</button></a></div>';
                //ATTACH BUTTON
                $(input2).insertAfter($('#showday1 .save_event'));
            }); 
```

这在一定程度上可以正常工作。它为每个输入创建一个按钮（因此在上面的示例中创建了 3 个按钮），但每次显示 3 次。所以从上面的 HTML 我得到 9 个按钮，应该有 3 个。

任何人都可以建议一种在每个隐藏输入中仅显示一次按钮的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:11:56.453

**编辑：**

您的代码也可以正常工作。[**看这里**](http://jsfiddle.net/akhurshid/UVnhm/1/)

您的页面中是否有以下 HTML 块？

```
<div id="showday1">
    <div class="save_event">save event</div>
</div> 
```

**注意：**上面的代码引用了这一行`$('#showday1 .save_event')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:15:22.193

你可以试试这个：

```
$('#content .coords').each(function() {
     var coords = $(this).val();
     //CREATE BUTTON, ADD VALUE FROM
     var input2 = '<div class="inputholder"><a class="viewmap" href="maptest.html?longlat='+ coords +' "><button>Find on Map</button></a></div>';
     //ATTACH BUTTON
      $(input2).appendTo($(this).parent()); //This append the button on the div event, change with #showday1 ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:51:52.803

如果您希望将生成的按钮放置在每个隐藏的输入 HTML 字段之后（基于您的输入），我会喜欢：

```
$(document).ready(function() {
           $(content).find('.coords').each(function() { 
                var coords = $(this).val(); 
                var input2 = '<div class="inputholder"><a class="viewmap" href="maptest.html?longlat='+ coords +' "><button>Find on Map</button></a></div>'; 
                $(this).after(input2);
            });   
}); 
```

由于您已经检测到输入（使用 class `coords`），`after`jQuery 函数应该在每个隐藏的输入之后附加所需的内容

* * *

另一方面，如果您只想将所有按钮放在`div`with的末尾`id=content`：

```
$(document).ready(function() {
           var input2="";
           $(content).find('.coords').each(function() { 
                var coords = $(this).val(); 
                input2 += '<div class="inputholder"><a class="viewmap" href="maptest.html?longlat='+ coords +' "><button>Find on Map</button></a></div>'; 
            }); 
            $(content).after(input2);
}); 
```

在这种方法中，我们聚合了所有生成的输入（对于每个隐藏的输入），最后我们将它们附加到包装器中`div`

# c - 从 C 中的标准输出获取系统命令的输出

> ID：11840833
> 
> 赞同：16
> 
> 时间：2012-08-07T07:02:13.083
> 
> 标签：c, stdout

我正在 Android/Linux 下编写一个运行系统命令的 C 程序。该命令将一些文本输出到标准输出，我试图将输出捕获到字符串或字符数组中。

例如：

```
system("ls"); 
```

会将当前目录的内容列出到 stdout，我希望能够以 C 语言以编程方式将该数据捕获到变量中。

我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T07:06:03.690

你想用`popen`. 它返回一个流，例如`fopen`. 但是，您需要使用 关闭流`pclose`。这是因为`pclose`负责清理与启动子进程相关的资源。

```
FILE *ls = popen("ls", "r");
char buf[256];
while (fgets(buf, sizeof(buf), ls) != 0) {
    /*...*/
}
pclose(ls); 
```

# png - 在 WinRT 中运行时渲染图像

> ID：11840835
> 
> 赞同：1
> 
> 时间：2012-08-07T07:02:15.887
> 
> 标签：png, rendering, microsoft-metro, windows-runtime, winrt-xaml

我发现 WinRT 不支持 WriteableBitmap.Render() 。在 Metro 中是否有任何其他用于绘制位图图像的 API？我需要将一些 xaml 基元（矩形、圆形、路径等）渲染到 png-image。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:30:41.493

确实还不支持。您最好的选择是使用[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)或 Direct2D。

# iphone - 如何在 iPhone 应用程序中从右侧显示视图内容

> ID：11840841
> 
> 赞同：0
> 
> 时间：2012-08-07T07:02:47.507
> 
> 标签：iphone, xcode, uiview, uianimation

我有 iPhone 应用程序。

我希望在加载视图时它具有子视图。我还希望像在动画中从左到右翻转或滑动一样加载子视图。

subView 包含 UIButton 和 TextView。我希望 subView 应该像从左侧滑动一样加载动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:20:49.963

翻转视图可以如下完成：

```
 [UIView animateWithDuration:1 animation:^{
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.subView cache:FALSE];
}]; 
```

这是我的完整代码：

```
- (void) flipCard {

if (_isDisplayBackOfCard) {

    [UIView animateWithDuration:.5 animations:^{

        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:FALSE];
        [self.backOfCard removeFromSuperview];
        [self.view addSubview:self.frontOfCard];

    } completion:^(BOOL finished){
        _isDisplayBackOfCard = !_isDisplayBackOfCard;
    }];
}
else {

    [UIView animateWithDuration:.5 animations:^{

        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:FALSE];
        [self.frontOfCard removeFromSuperview];
        [self.view addSubview:self.backOfCard];

    } completion:^(BOOL finished){
        _isDisplayBackOfCard = !_isDisplayBackOfCard;
    }];
} 
```

}

通过在动画块内设置视图框架可以轻松实现滑动视图：

```
CGRect _newFrame = CGRectMake(someValueForX, someValueForY, someValueForWidth, someValueForHeight);

    [UIView animateWithDuration:.5 animations:^{ [self.subView setFrame:_newFrame];}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:46:57.157

好的。当您想添加带有滑动动画的**子视图**（而不是容器视图 - 我已经通过您的问题预测到了！）时，请按照以下步骤操作 -

1.  `IBOutlet`为您的按钮和文本视图创建
2.  `synethesize`它们在 .m 文件中。
3.  编写以下代码 -

    ```
     - (void)viewWillAppear:(BOOL)animated
    {

        self.btn.center = CGPointMake(-430.0, 211.0);

        self.txtView.center = CGPointMake(-430.0, 120.0);

        [self addSubview:self.btn andMoveTo:CGPointMake(115.0, 211.0) duration:1.0 option:UIViewAnimationOptionCurveLinear];

        [self addSubview:self.txtView andMoveTo:CGPointMake(40.0, 34.0) duration:1.0 option:UIViewAnimationOptionCurveLinear];

    }

    - (void) addSubview:(UIView*)view 
              andMoveTo:(CGPoint)destination 
               duration:(float)secs 
                 option:(UIViewAnimationOptions)option
     {
        [UIView animateWithDuration:secs delay:0.0 options:option
                    animations:^{
                        view.frame = CGRectMake(destination.x,destination.y, view.frame.size.width, view.frame.size.height);
                            }completion:nil];
        [self.view addSubview:view];

    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:20:00.270

您可以通过在 view 方法中添加 subView 来做到这一点，`viewDidLoad`并且在该`viewDidAppear`方法中您可以使用动画 using block 语句来给它一些动画。

快乐编码:)

**编辑 1**

在这里，我在 XIB 中添加了 scrollView 附加`IBOutlate`到它。您可以以编程方式将其添加到`viewDidLoad`方法中。

首先我通过应用这个框架来隐藏视图

```
subCatScroll.frame = CGRectMake(320, 0, 91, 436); 
```

并在某个按钮上单击我通过动画显示它（它来自 iPhone 的右侧边缘）

```
- (IBAction)done:(id)sender
{
    [Appirater userDidSignificantEvent:YES];
    if(pointer.hidden == YES)
    {
        [UIView beginAnimations:@"Move Me To Unhide" context:nil];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
        [UIView setAnimationDuration:kAnimationDur];
        subCatScroll.frame = CGRectMake(229,0,91,436);
        [UIView setAnimationDelegate:self];
        [UIView commitAnimations];
        [self configureView];
        pointer.hidden = NO;
    }
    else
    {
        [UIView beginAnimations:@"Move Me To Hide" context:nil];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
        [UIView setAnimationDuration:kAnimationDur];
        subCatScroll.frame = CGRectMake(320, 0, 91, 436);
        [UIView setAnimationDelegate:self];
        [UIView commitAnimations];        
        pointer.hidden = YES;
    }
} 
```

这`pointer`是一个用于决定如何处理 scrollView 的控件

# jquery - jQuery 工具 - 你可以在历史插件中手动设置 url 吗？

> ID：11840844
> 
> 赞同：0
> 
> 时间：2012-08-07T07:02:53.957
> 
> 标签：jquery, jquery-tools

我正在使用 jquery 工具历史插件来添加历史功能页面。我正在使用此代码

```
$("a.links_with_history").history(function(event, hash) {

}); 
```

有没有办法在这里手动设置 url 而不是从锚标签的 href 属性中获取值？

编辑：出于这个问题的目的，假设我们将使用 jQuery 工具而不是其他插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:09:28.467

如果我是你，我会使用类似的插件：[Hi​​story.js](https://github.com/balupton/History.js/)。

然后，您需要的是 pushState。这就是它在[读我](https://github.com/balupton/history.js/blob/master/README.md)时所说的：

> ```
> History.pushState(data,title,url) 
> ```
> 
> *向浏览器推送新状态；data 可以为 null 或对象，title 可以为 null 或字符串，url 必须为字符串*

# c# - 将指针从 c# 传递到 c++ 以意外结果结束

> ID：11840845
> 
> 赞同：0
> 
> 时间：2012-08-07T07:02:56.917
> 
> 标签：c#, c++, .net, com-interop

我试图将一个指针从 c# 传递到 c++，当我总是收到相同的地址时，即使我从 c# 发送一个 NULL 指针，这也会在 c++ 端以意想不到的结果结束。

一些细节。

注意：**这是一个不同类型的问题。**

C++：

```
#pragma pack(push, 4)
        struct CEA708CONFIG 
        {
            BYTE                b608Service;            
            BYTE                bCompactStream;         
            BYTE                pActiveServices[63];    
            LONG                lActiveServiceCount;    //
            POINT               ptAlignmentPosition;    /
        };
        #pragma pack(pop)

        interface
        __declspec(uuid("{F1FAC4B6-5DAA-4875-B76B-8C10A0C0B22E}"))
        ICEA708Decoder : IUnknown {
            virtual HRESULT SetConfig(IN const CEA708CONFIG* pConfig) = 0;
            virtual HRESULT GetConfig(OUT CEA708CONFIG* pConfig) = 0;
        }; 
```

和 c# 部分：

```
[StructLayout(LayoutKind.Sequential, Pack = 4)]
    public unsafe struct CEA708CONFIG
    {
        public byte is608Service;
        public byte isCompactStream;
        public fixed byte activeServices[63];
        public int activeServiceCount;
        public Point alignmentPosition;
    };

    [ComVisible(true), ComImport, Guid("F1FAC4B6-5DAA-4875-B76B-8C10A0C0B22E"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    public interface ICEA708Decoder
    {
        [PreserveSig]
        int SetConfig([In] IntPtr config);
        [PreserveSig]
        int GetConfig([Out] out CEA708CONFIG config);
    } 
```

和实际工作的代码：

```
 int     structSize = Marshal.SizeOf(cc708Config);
    IntPtr  structPtr  = Marshal.AllocHGlobal(structSize);

    Marshal.StructureToPtr(cc708Config, structPtr, false);

    if (0 != (hr = CC708DecoderConfig.SetConfig(/*structPtr*/IntPtr.Zero)))
    {
        throw new ApplicationException("Couldn't SetConfig() because: " + DirectShowLib.DsError.GetErrorText(hr));
    } 
```

如您所见，我什至尝试发送 IntPtr.Zero，它以 c++ 部分中的以下地址结尾：0x0bb00058。

我的猜测是 DS 寄存器有问题，但不确定。

**编辑：每当我进入SetConfig（）的c ++部分时，我可以看到'this''地址是0x0003，这怎么可能？**

# java - 休眠，Postresql。异常“无法实例化持久化程序 org.hibernate.persister.entity.SingleTableEntityPersister”

> ID：11840847
> 
> 赞同：0
> 
> 时间：2012-08-07T07:03:17.167
> 
> 标签：java, hibernate

我有休眠 4.1.5.SP1 和 PostreSQL 9.1。

这是日志：

```
INFO: HHH000397: Using ASTQueryTranslatorFactory
Initial SessionFactory creation failed.org.hibernate.MappingException: Could not instantiate persister org.hibernate.persister.entity.SingleTableEntityPersister
Exception in thread "main" java.lang.ExceptionInInitializerError
    at util.HibernateUtil.<clinit>(HibernateUtil.java:22)
    at Dao.VideoDao.getAllVideos(VideoDao.java:96)
    at Dao.Main.main(Main.java:17)
Caused by: org.hibernate.MappingException: Could not instantiate persister org.hibernate.persister.entity.SingleTableEntityPersister
    at org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:174)
    at org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:135)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:381)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
    at util.HibernateUtil.<clinit>(HibernateUtil.java:18) 
```

这是hibernate.cfg.xml

```
<property name="connection.driver_class">org.postgresql.Driver</property>
<property name="connection.url">jdbc:postgresql://localhost:5432/mybase</property>
<property name="connection.username">postgres</property>
<property name="connection.password">******</property>
<property name="connection.pool_size">1</property>
<property name="current_session_context_class">thread</property>
<property name="show_sql">true</property>
<property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>

<mapping resource="Video.hbm.xml"/> 
```

这是 Video.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
  <class name="logic.Video" table="video">
    <id column="id" name="id" type="java.lang.Long">
      <generator class="increment"/>
    </id>
    <property column="description" name="description" type="java.lang.String"/>

  </class>
</hibernate-mapping> 
```

这是 HibernateUtil.java

```
package util;

import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;
import org.hibernate.SessionFactory;

public class HibernateUtil {
  private static final SessionFactory sessionFactory;
  private static ServiceRegistry serviceRegistry;

    static {
      try {

            Configuration configuration = new Configuration();
            configuration.configure();//("D:\\java\\workspace\\hibernate3\\bin\\hibernate.cfg.xml");
            serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
            sessionFactory = configuration.buildSessionFactory(serviceRegistry);

      } catch (Throwable ex) {
        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
      }
    }

    public static SessionFactory getSessionFactory() {
      return sessionFactory;
    }
} 
```

这是 Video.java

```
package Logic;

public class Video {
    private Long id;
    private String description;

    public Video(){}

    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }
} 
```

这是 IVideoDao.java

```
package Dao;

import Logic.Video;

import java.util.Collection;
import java.sql.SQLException;

public interface IVideoDao {
      public void addVideo(Video video) throws SQLException;
      public void updateVideo(Long id, Video video) throws SQLException;
      public Video getVideoById(Long id) throws SQLException;
      public Collection<Video> getAllVideos() throws SQLException;
      public void deleteVideo(Video video) throws SQLException;
      public Collection<Video> getParamVideos(Long start, Long finish) throws SQLException;
} 
```

这是 VideoDao.java

```
package Dao;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

import javax.swing.JOptionPane;

import org.hibernate.Query;
import org.hibernate.Session;

import util.HibernateUtil;

import Logic.Video;

public class VideoDao implements IVideoDao 
{

    @Override
    public void addVideo(Video video) throws SQLException 
    {
        Session session = null;
        try {
            session = HibernateUtil.getSessionFactory().openSession();
            session.beginTransaction();
            session.save(video);
            session.getTransaction().commit();
        } 
        catch (Exception e) 
        {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Error 'addVideo'", JOptionPane.OK_OPTION);
        } 
        finally 
        {
            if (session != null && session.isOpen()) 
            {
                session.close();
            }
        }
    }

    @Override
    public void updateVideo(Long id, Video video) throws SQLException 
    {
        Session session = null;
        try 
        {
            session = HibernateUtil.getSessionFactory().openSession();
            session.beginTransaction();
            session.update(video);
            session.getTransaction().commit();
        } 
        catch (Exception e) 
        {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Error 'updateVideo'", JOptionPane.OK_OPTION);
        } finally {
            if (session != null && session.isOpen()) 
            {
                session.close();
            }
        }
    }

    @Override
    public Video getVideoById(Long id) throws SQLException 
    {
        Session session = null;
        Video video = null;
        try 
        {
            session = HibernateUtil.getSessionFactory().openSession();
            video = (Video) session.load(Video.class, id);
        } 
        catch (Exception e) 
        {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Error 'findById'", JOptionPane.OK_OPTION);
        } 
        finally 
        {
            if (session != null && session.isOpen()) 
            {
                session.close();
            }
        }
        return video;
    }

    @Override
    public Collection<Video> getAllVideos() throws SQLException 
    {
        Session session = null;
        List<Video> videos = new ArrayList<Video>();
        try 
        {
            session = HibernateUtil.getSessionFactory().openSession();
            videos = session.createCriteria(Video.class).list();
        } 
        catch (Exception e) 
        {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Error 'getAll'", JOptionPane.OK_OPTION);
        } 
        finally 
        {
            if (session != null && session.isOpen()) 
            {
                session.close();
            }
        }
        return videos;
    }

    @Override
    public void deleteVideo(Video video) throws SQLException 
    {
        Session session = null;
        try 
        {
            session = HibernateUtil.getSessionFactory().openSession();
            session.beginTransaction();
            session.delete(video);
            session.getTransaction().commit();
        } 
        catch (Exception e) 
        {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Error 'deleteVideo'", JOptionPane.OK_OPTION);
        } 
        finally 
        {
            if (session != null && session.isOpen()) 
            {
                session.close();
            }
        }
    }

    @Override
    public Collection<Video> getParamVideos(Long start, Long finish) throws SQLException 
    {
        Session session = null;
        List<Video> videos = new ArrayList<Video>();
        try {
          session = HibernateUtil.getSessionFactory().getCurrentSession();
          session.beginTransaction();
          Query query = session.createQuery(
              " select v "
                  + " from video v "
                  + " where id between :startId and :finishId "
          )
            .setLong("startId", start)
            .setLong("finishId", finish);
          videos = (List<Video>) query.list();
          session.getTransaction().commit();

        } 
        finally 
        {
            if (session != null && session.isOpen()) 
            {
                session.close();
            }
        }
        return videos;
    }

} 
```

这是Factory.java

```
package Dao;

public class Factory {

    private static VideoDao videoDao = null;
    private static Factory instance = null;

    public static synchronized Factory getInstance()
    {
        if (instance == null)
        {
            instance = new Factory();
        }
        return instance;
    }

    private Factory(){}

    public IVideoDao getVideoDao()
    {
        if (videoDao == null)
        {
            videoDao = new VideoDao();
        }
        return videoDao;
    }
} 
```

这是 Main.java

```
package Dao;

import java.sql.SQLException;
import java.util.Collection;
import java.util.Iterator;

import Logic.Video;

public class Main {

    /**
     * @param args
     * @throws SQLException 
     */
    public static void main(String[] args) throws SQLException {

        Collection<Video> videos = Factory.getInstance().getVideoDao().getAllVideos();
        Iterator<Video> iterator = videos.iterator();

        System.out.println("========All films=========");
        while (iterator.hasNext()) {
          Video video = iterator.next();
          System.out.println(video.getId().toString() + ") Video: " + video.getDescription());
        }
    }
} 
```

# facebook - 创建一个 Facebook 移动应用程序支持的应用程序

> ID：11840854
> 
> 赞同：0
> 
> 时间：2012-08-07T07:03:53.577
> 
> 标签：facebook, mobile

我为 facebook 创建了一个在浏览器上正常运行的应用程序，但移动 facebook 应用程序不支持它；

任何关于如何在 facebook 应用程序上运行我的应用程序的建议，不胜感激；提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:40:58.327

您无法在 Facebook 移动应用程序上运行自定义应用程序。相反，您应该创建一个本机应用程序（在 iOS 的 Objective C 或 Android 的 Java 中）或使用 Facebook Connect 创建一个移动网站。

# android - 如何在片段中有 MapView？

> ID：11840855
> 
> 赞同：0
> 
> 时间：2012-08-07T07:03:54.043
> 
> 标签：android, google-maps

我想创建一个看起来完全像这样的活动。上半部分是 MapView，下半部分是 google maps places API 提供的周边地点列表。我已经完成了这两个部分，但分开了。无法将它集成到一个 Activity 中的两个片段中。明显的错误是 MapView 不能在 MapActivity 之外工作。那么这有什么技巧呢？

编辑：我现在面临的最大问题是将 RoboGuice、ActionBarSherlock 和 MapActivity 集成到一个我可以扩展的 Activity 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:42:34.270

GoogleCode 中存在错误（添加对 MapFragment 的支持），其中一位评论者发布了解决方法

[http://code.google.com/p/android/issues/detail?id=15347#c29](http://code.google.com/p/android/issues/detail?id=15347#c29)

我自己没有尝试过，但它似乎有效

检查this other question，它与解决方法有关

[TabHost Fragment中的MapActivity在选项卡切换后消失](https://stackoverflow.com/questions/8828358/mapactivity-in-tabhost-fragment-disappearing-after-tab-switch/10387096#10387096)

另外，阅读错误评论，它总是很有趣

# javascript - 使用 document.createElement 创建嵌套标签

> ID：11840858
> 
> 赞同：13
> 
> 时间：2012-08-07T07:04:05.317
> 
> 标签：javascript, html

我想使用 javascript [createElement](http://reference.sitepoint.com/javascript/Document/createElement)函数创建一个嵌套标签，例如

```
<li><span class="toggle">Jan</span></li> 
```

谁能给我一个想法怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-07T07:12:56.657

最简单的方法是使用`createElement()`然后设置其`innerHTML`：

```
var tag = document.createElement("li");
tag.innerHTML = '<span class="toggle">Jan</span>'; 
```

然后，您可以将其添加到文档中`.appendChild()`您想要的任何位置。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-07T07:08:59.563

```
var li = document.createElement('li');
var span = document.createElement('span');
span.className = 'toggle';
span.appendChild(document.createTextNode('Jan'));
li.appendChild(span); 
```

# git - 拥有多个遥控器时如何获取新的远程分支？

> ID：11840866
> 
> 赞同：0
> 
> 时间：2012-08-07T07:04:38.237
> 
> 标签：git

我有一个包含 3 个远程存储库的设置，原始存储库、内部存储库、外部存储库。当我创建一个新的本地安装时，我克隆源并将内部和外部添加为远程。

*当我执行git fetch --all* 但在内部和外部，它们似乎没有从服务器获取（尽管我看到服务器被联系和查询）时出现了新的远程分支 。

我也试过*git remote update internal*没有任何运气。

使用*git ls-remote internal*我可以看到任何新创建的远程分支，但我无法克隆它们（可能是因为有关分支的信息尚未提取到我的本地存储库）。

在互联网上搜索我发现这篇博客文章[http://www.jukie.net/bart/blog/fetch-all-git-branches](http://www.jukie.net/bart/blog/fetch-all-git-branches)描述了相同的问题并使用自定义脚本解决了它。

> 当您使用最近的 git 版本克隆一个新的 git 存储库时，默认情况下 git 将创建一个包含所有远程分支的 .git/remotes/origin。该文件列出了要在获取时更新的所有远程分支。
> 
> 随着时间的推移，远程可能会获得更多分支，并且可能需要更新远程分支列表。找出远程可用的方法是调用 git-ls-remote origin，然后挑选出感兴趣的分支，并将它们添加到 .git/remotes/origin 文件中。

为什么*git fetch --all*不使用新分支更新 .git/remotes/[remote_name] 文件？真的没有办法用普通的 git 命令来更新它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:06:38.773

```
git fetch internal --all
git fetch external --all 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T05:01:49.893

我发现了另一个帖子 [1]：[在 git 中，我如何检查远程存储库的远程分支？](https://stackoverflow.com/questions/3036817/in-git-how-do-i-check-out-a-remote-repositorys-remote-branches?rq=1)这让我在 git config 中查找我的设置。出于某种原因，我设法让遥控器只跟踪主分支，而不是遥控器的默认 glob refspec（在 refs/remotes/remote_name/ 命名空间下）。

所以我的配置看起来像这样

```
[remote "internal"]
    url = path_to_my_remote_repo
    fetch = +refs/heads/master:refs/remotes/internal/master 
```

并将其更改为

```
[remote "internal"]
    url = path_to_my_remote_repo
    fetch = +refs/heads/*:refs/remotes/internal/* 
```

为我解决了这个问题。

# sql - 在 sql 的组表达式中使用“where”

> ID：11840867
> 
> 赞同：1
> 
> 时间：2012-08-07T07:04:47.007
> 
> 标签：sql, database, oracle

我需要提出这样的要求：选择包含字母`i`并有适当数量的员工的城市列表。另外我需要注意的是，某些城市可能有 0 名员工，而对于某些员工字段，DEBT 可能为空。

桌子`depart`

```
debt    city
-------------
43      odesa
23      kiev
79      lviv
78      lviv
12      rivne 
```

桌子`empl`

```
ide     fn      ln      debt
----------------------------
3421    jed     trt     43
354     jed     res     43
43      ged     hjkhg   79
73      ghghg   gfgf    79
456     jkl     gdfg    
532     kkhg    vjv     23
45      ki      vt      
243     ki      vt      78 
```

我写了这个查询：

```
select depart.CITY, count (*) as numb 
from depart 
   inner join empl on  empl.DEBT=depart.DEBT
where depart.CITY like '%i%'
group by depart.CITY; 
```

但我不知道如何注意某个城市可能有 0 名员工（例如，此请求未显示`rivne`有 0 名员工的城市），并且某些员工字段的 DEBT 可能为空。

我将甲骨文与蟾蜍一起使用。

预期成绩

```
city    numb
kiev    1
rivne   0
lviv    3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:08:48.360

做这个：

```
select depart.CITY, count (*) as numb 
from depart inner join empl on empl.DEBT=depart.DEBT
where depart.CITY like '%i%'
group by depart.CITY; 
```

WHERE 先于 GROUP BY

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T07:17:51.067

`WHERE`子句在`GROUP BY`子句之前。
像这样：

```
SELECT depart.CITY, COUNT (*) AS numb 
FROM depart INNER JOIN empl ON empl.DEBT=depart.DEBT
WHERE depart.CITY LIKE '%i%'    
GROUP BY depart.CITY; 
```

[有关 WHERE 子句，请参见此小提琴。](http://sqlfiddle.com/#!3/59ee4/2)

或者你也可以使用这样`HAVING`的子句
：

```
SELECT depart.CITY, COUNT (*) AS numb 
FROM depart INNER JOIN empl ON empl.DEBT=depart.DEBT
GROUP BY depart.CITY
HAVING depart.CITY LIKE '%i%'; 
```

[有关 HAVING 子句，请参见此小提琴。](http://sqlfiddle.com/#!3/59ee4/1)

它更可能使用`HAVING`从句。
[有关详细信息，请参阅此链接](http://www.techonthenet.com/sql/group_by.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T07:26:31.087

`where`在分组之前照顾标准移动。要允许不存在的员工或空债务，请使用[左外连接](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries006.htm)。

```
select depart.CITY, count (empl.DEBT) as numb 
  from depart 
  left join empl 
    on empl.DEBT = depart.DEBT
 where depart.CITY like '%i%'
 group by depart.CITY; 
```

要让所有员工按部门分组，您可以反转外部联接：

```
select depart.CITY, count (empl.ide) as numb 
  from empl  
  left join depart
    on empl.DEBT = depart.DEBT
 -- Note: condition is now part of a join. This is required
 --       as part of outer join because otherwise left hand
 --       table row would be filtered out.
   and depart.CITY like '%i%'
 group by depart.CITY; 
```

（大概`ide`是员工的主键）。但这不会返回没有员工的部门，并且如果部门的城市不匹配，则 CITY 将为空，`%i%`或者 empl.DEBT 从一开始就为空。

为了解决这个问题，可以扩展第一个查询与联合所有旨在检索没有部门的员工。但是有一个问题：我们是否只需要无部门的员工，或者我们考虑或不在名称中包含无`i`部门的城市工作的员工。我选择了第二种可能。

```
select depart.CITY, count (empl.DEBT) as numb 
  from depart 
  left join empl 
    on empl.DEBT = depart.DEBT
 where depart.CITY like '%i%'
 group by depart.CITY;
select '(unknown or unmatched city)', count (*) as numb
  from empl
  left join depart
    on empl.DEBT = depart.DEBT
   and depart.CITY like '%i%'
 where depart.DEBT is null; 
```

如果您需要区分没有部门的员工和在没有部门的城市工作的员工`i`，您可以使用[案例](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm)：

```
select case when depart.CITY like '%i%'
            then depart.CITY
            when depart.DEBT is null
            then '(No department)'
            else '(City does not match %i%)'
        end as CITY,
       count (*) as numb
  from empl
  left join depart
    on empl.DEBT = depart.DEBT
 group by 
       case when depart.CITY like '%i%'
            then depart.CITY
            when depart.DEBT is null
            then '(No department)'
            else '(City does not match %i%)'
        end 
```

此查询将统计来自匹配城市、不匹配城市和没有部门的员工。

# proxy - 如何代理 http_x_ssl_client_s_dn 标头？

> ID：11840873
> 
> 赞同：7
> 
> 时间：2012-08-07T07:05:03.860
> 
> 标签：proxy, nginx

我想通过 nginx 代理请求标头“HTTP_X_SSL_CLIENT_S_DN”。

这是我们的服务器网络结构。

```
[front server:443] <---> [nginx proxy:8004] <---> [application server:8008]
(client cert auth) 
```

当我尝试了两台服务器（[前端服务器]和[应用程序服务器]）时，它工作正常。标头“HTTP_X_SSL_CLIENT_S_DN”已传递给应用程序服务器。

然后添加服务器 [nginx 代理]，标头“HTTP_X_SSL_CLIENT_S_DN”没有传递给应用程序服务器。

我的 nginx 配置如下。

```
server {
    listen   8004;
    index index.html;

    location / {
        proxy_pass_header Server;
        proxy_pass_header X-Scheme;
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_pass http://app-server/;

# TODO: to proxy 'HTTP_X_SSL_CLIENT_S_DN'
# failed settings
#        proxy_pass_request_headers on; # not worked (default: on)
#        proxy_pass_header X-SSL-Client-S-DN; # none
#        proxy_pass_header X_SSL_CLIENT_S_DN; # none
#        proxy_pass_header HTTP_X_SSL_CLIENT_S_DN; # none
#        proxy_pass_header HTTP-X-SSL-CLIENT-S-DN; # none
#        proxy_set_header X-SSL-Client-S-DN $ssl_client_s_dn; # none
#        proxy_set_header X_SSL_Client_S_DN $x_ssl_client_s_dn; # none
#        proxy_set_header X-SSL-Client-S-DN $http_ssl_client_s_dn; # none
#        proxy_set_header X-SSL-Client-S-DN $http_x_ssl_client_s_dn; # none
    }
}

upstream app-server {
    server 127.0.0.1:8008;
} 
```

应用任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T23:41:58.357

首先，确保您已配置 nginx.conf 以验证客户端证书！我遇到了与您描述的完全相同的问题。

```
server {
  # ...
  ssl_client_certificate /srv/ssl/self.crt;
  ssl_verify_depth     1;
  ssl_verify_client    on;
  # ...
  location @app { # I'm using nginx+unicorn, don't blindly copy this!  :)
    # ...
    proxy_set_header X-SSL-Client-Serial $ssl_client_serial;
    proxy_set_header X-SSL-Client-Verify $ssl_client_verify;
    proxy_set_header X-SSL-Client-S-DN   $ssl_client_s_dn;
    # ...
} 
```

要对此进行测试，您将需要一个单独的客户端密钥和一个已使用根授权证书签名的证书。在以下命令中，客户端凭据以“me”开头，而我的根权限凭据以“self”开头。

1.  为客户端生成私钥。

    ```
    openssl genrsa -out me.key 1024 
    ```

2.  请求自我 CA 签名。

    ```
    openssl req -new -key me.key -out me.csr 
    ```

3.  使用自 CA 对请求进行签名以创建证书。

    ```
    openssl x509 -req -days 365 -in me.csr -CA self.crt -CAkey self.key -set_serial 01 -out me.crt 
    ```

4.  试试你的新密钥。

    ```
    curl -v -s -k --key me.key --cert me.crt https://fort-awesome-o 
    ```

5.  额外积分：生成可以导入浏览器的证书。

    ```
    openssl pkcs12 -export -in me.crt -inkey me.key -certfile self.crt -out me.p12 
    ```

我有一个转储 HTTP 环境的简单 Sinatra Web 应用程序，我看到以下内容：

"HTTP_X_SSL_CLIENT_SERIAL"=>"01", "HTTP_X_SSL_CLIENT_VERIFY"=>"SUCCESS", "HTTP_X_SSL_CLIENT_S_DN"=>"/C=US/ST=马里兰/L=安纳波利斯/O=基卡斯堡/CN=乔纳森·莫顿/emailAddress=jon @jonmorton.com"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:42:27.997

我对 nginx 有同样的问题，因为代理`X_REQUESTED_WITH`从请求中删除了该字段。默认情况下，nginx 将带有下划线的标头标记为无效并忽略无效标头。

您可以使用 nginx 指令来允许标头中使用下划线`underscores_in_headers on;`或不忽略带有`ignore_invalid_headers off;`.

在我的具体案例中，我使用 python 请求作为客户端，django 作为服务器，nginx 作为代理，并解决了我重命名`X_REQUESTED_WITH`为`X-REQUESTED-WITH`. （Django`'HTTP_'`在使标头可用之前自动添加到 x-header 名称的开头`request.META.`）

```
import requests
headers = {'X-REQUESTED-WITH':'XMLHttpRequest'}
r = requests.post(url, data=payload, headers=headers) 
```

# android - 如何在android中使用maya对象？

> ID：11840876
> 
> 赞同：5
> 
> 时间：2012-08-07T07:05:15.470
> 
> 标签：android, animation, maya

> **可能重复：**
> [在 Android 上渲染 Maya 动画？](https://stackoverflow.com/questions/7690595/rendering-maya-animation-on-android)

想在android中使用maya对象。是否有任何工具和脚本可以帮助我在 android 项目中使用 Maya 对象，以便我可以在 Maya 中渲染该对象并尝试开发简单的游戏

# jquery - chrome中的jquery轮播滑动问题

> ID：11840878
> 
> 赞同：0
> 
> 时间：2012-08-07T07:05:20.140
> 
> 标签：jquery, google-chrome, carousel

我在我的网站中使用了 jquery 轮播，它在 Opera、Safari、Firefox 中运行良好，但在 chrome 中却不行，当我点击下一个或上一个按钮时，它会一次性滑动所有 li，请帮助我。

问候

瓦尔西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:53:55.857

请提供有关您的轮播插件的更多具体信息。

如果它不能正常工作，您可以尝试其他插件，如[jCarousel](https://github.com/jsor/jcarousel)

# javascript - 使用 javascript 和 html 获取输入并更新 div 标签

> ID：11840881
> 
> 赞同：0
> 
> 时间：2012-08-07T07:05:42.690
> 
> 标签：javascript, html

好的，所以我必须制作一个基本的 javascript 文件，该文件从两个输入字段中获取数据，然后在单击按钮时使用相关的新值更新 div 标记。这是我在 JS 中做过的第一件事，所以请原谅任何不好的做法。我有 3 个按钮，前两个分别只保存和更新名称或年龄。第三个创建一个新对象“init”并保存和更新两者。我希望我能告诉你更多关于哪里出了问题，但是当我点击任何按钮时没有任何变化，所以我不知道。

谢谢您的帮助

这是我的 HTML：

```
<!DOCTYPE HTML>
<html>
    <head>
    </head>
    <body>
        <form name="inForm">
            <input type="text" name="user"/>
            <input type="text" name="age"/>
        </form>
    <button onClick="User.setName"> Save name </button>
    <button onClick="User.setAge"> Save age </button>
    <button onClick="writeIn"> Save </button>
    <div id="update">
    </div>
           <script language="JavaScript1.2" src="script.js" type="text/javascript"/>
    </body>

</html> 
```

这是我的javascript：

```
var User = function() {
    var save = function(callback) {
        if (callback) {
            callback();
        }
    }

    return {
        name: function() {
            write = document.getElementById('update');
            write.innerHTML = this.name;
            return this.name;
        }(),
        age: function() {
            write = document.getElementById('update');
            write.innerHTML = this.age;
            return this.age;
        }(),
        setName: function() {
            this.name = document.inForm.name;
        },
        setAge: function() {
            this.age = document.inForm.age;
        },
        save: save,
        init: function(name, age) {
            this.name = name;
            this.age = age;
            write = document.getElementById('update');
            write.innerHTML = this.age + this.name;
            return this;
        }
    };
};

function writeIn() {
    var a = new User
    a.init(document.inForm.name, document.inForm.age)
}

console.log(a.name, b.name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:12:58.403

你能试试类似的东西：

```
 <script type="text/javascript">
     function changeText2(){
        var userInput = document.getElementById('userInput').value;
        document.getElementById('boldStuff2').innerHTML = userInput;
     }
    </script>
    <p>Welcome to the site <b id='boldStuff2'>dude</b> </p> 
    <input type='text' id='userInput' value='Enter Text Here' />
    <input type='button' onclick='changeText2()' value='Change Text'/> 
```

我认为您的功能中缺少通过用户输入的 id 进行选择的功能。只是想帮助你，但不确定。我以[http://www.tizag.com/javascriptT/javascript-innerHTML.php/为例](http://www.tizag.com/javascriptT/javascript-innerHTML.php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:29:53.810

要调用一个函数，你必须在它后面加上括号，例如

```
<button onClick="User.setName()"> Save name </button> 
```

另外，我认为`name`Javascript 中的所有引用都应该是`user`.

# javascript - 如何关闭 jQuery 工具提示

> ID：11840885
> 
> 赞同：7
> 
> 时间：2012-08-07T07:06:12.650
> 
> 标签：javascript, jquery, jquery-tooltip

我一直在尝试使用 jQuery 制作非常简单的 javascript 工具提示，但我遇到了障碍。这个想法是`span`在`div`. 该`span`元素将包含一个`div`带有小 html（图像和链接）的工具提示。单击元素时应打开工具提示，单击`span`元素外部或工具提示外部时应关闭工具提示。

到目前为止，打开工具提示不是问题，但关闭是问题。

```
<!DOCTYPE HTML>
<html>
<head>
    <title></title>

    <style>
        #colors > div {
            background-color: red;
            height: 50px;
            width: 50px;
            margin: 5px;
        }

        #colors > div > span {
            min-height: 10px !important;
            min-width: 10px !important;
            border: 3px solid black;
            position: relative;
        }

        .tooltip {
            border: 2px solid blue;
            display: none;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        $(function () {
            // generate boxes and tooltips
            for (var i = 0; i < 9; i++) {
                $('#colors').append('<div id="' + i + '"><span><div class="tooltip"><a href="#">add to favorites</a></div></span></div>');
            }

            $('#colors').delegate('span', 'click', function (event) {
                $(this).children('.tooltip').css({position:'absolute', top:'5px', left:'5px'}).fadeIn();
                // bottom one won't work
                //event.stopPropagation();
            });

            $(document).delegate('body', 'click', function (event) {
                var that = this
                $.each($('.tooltip'), function (index, element) {
                    // it's always visible ...
                    //if ($(element).is(':visible')) {

                    // doesn't work either
                    if ($(element).is(':visible') && $(element).has(event.target).length === 0) {
                        var s = event.target;

                        console.log([($(s) == event.target), event.target, index, element, $(element).has(event.target).length, that]);
                    }
                });
            });
        })
    </script>
</head>
<body>
<div id="colors"></div>
</body>
</html> 
```

如果单击在工具提示之外，我似乎找不到关闭工具`span`提示的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T07:46:26.020

要关闭工具提示，您需要调用

```
$('.tooltip').remove(); 
```

在您的场景中尝试

```
$.each($('.tooltip'), function (index, element) {
    $(this).remove();
 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T07:58:30.983

像这样的东西应该可以正常工作:)

```
 $(document).mouseup(function (e)
 {
     var container = $("YOUR CONTAINER SELECTOR");

     if (container.has(e.target).length === 0)
     {
        container.hide();
     }
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T13:44:25.913

我为自己的网站调查了这个问题，但没有找到任何合适的解决方案，所以我自己写了。我的用例与 OP 有点不同，但可能会帮助其他人搜索相同的术语。我需要一个**只出现在移动平台上**的紧密链接。这很有用，因为在桌面上，当您`mouseout`离开目标元素时工具提示将关闭，但在触摸平台上它会一直存在。

```
// Set up tool tips for images and anchors.
$( document ).tooltip({
  items: "a[title], img[alt], .toolTip[title], :not(.noToolTip)",
    track: true,
    position: { my: "left+15 center", at: "right center" },
   content: function() {
      var element = $( this );
      var closer = closerLink = '';
      if (isMobile()) {
         closer = ' <br><div onClick="$(this).parent().parent().remove();" style="color: blue; text-decoration: underline; text-align: right;">Close</div>';
         closerLink = ' <br>Tap link again to open it.<br><div onClick="$(this).parent().parent().remove();" style="color: blue; text-decoration: underline; text-align: right;">Close</div>';
      }
      // noToolTip means NO TOOL TIP.
      if ( element.is( ".noToolTip" ) ) {
         return null;
      }
      // Anchor - use title.
      if ( element.is( "a[title]" ) ) {
         return element.attr( "title" ) + closerLink;
      }
      // Image - use alt.
      if ( element.is( "img[alt]" ) ) {
         return element.attr( "alt" ) + closer;
      }
      // Any element with toolTip class - use title.
      if ( element.is( ".toolTip[title]" ) ) {
         return element.attr( "title" ) + closer;
      }
   }
});

function isMobile() {
   return (/iPhone|iPod|iPad|Android|BlackBerry/).test(navigator.userAgent);
} 
```

我在这里针对三种类型的东西：

*   使用属性锚定标签 ( `a`) 。`title`
*   `img`带有`title`属性的图像标签 ( )。
*   任何具有 class 的元素`toolTip`。
*   并明确*排除*任何带有 class 的元素`noToolTip`。

我在这里写了这个：[JQuery UI tooltip with a close link for mobile](http://robertmarkbramprogrammer.blogspot.com.au/2015/06/jquery-ui-tooltip-with-close-link-for.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-07T12:08:11.077

生成工具提示时，将结果保存到变量中。您可以在关闭所有工具提示后使用它。

```
var tooltips = $(document).tooltip({
    // all kind of initilization options like position, open, hide, etc.
});

// ... app logic ...

tooltips.tooltip('close') // will close all tooltips 
```

从这里获得信息：[https ://jqueryui.com/tooltip/#forms](https://jqueryui.com/tooltip/#forms)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-06-09T09:31:15.167

```
 $(document).mouseup(function (kamesh)
 {
     var container = $("YOUR CONTAINER SELECTOR");

     if (container.has(kamesh.target).length === 0)
     {
        container.hide();
     }
 }); 
```

# c# - 如何以编程方式在 Sitecore 中创建用户配置文件

> ID：11840886
> 
> 赞同：5
> 
> 时间：2012-08-07T07:06:13.830
> 
> 标签：c#, asp.net, sitecore, sitecore6

我想要注册 sitecore 网站的功能。我想动态添加站点核心用户/用户配置文件。

如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T08:29:29.977

Sitecore 为其用户使用标准的 ASP.NET Membership 提供程序，因此您可以使用基本的 ASP.NET 调用创建用户。

```
userName = string.Format(@"{0}\{1}", domain, userName);
Membership.CreateUser(userName, password, email); 
```

`domain`变量将是`sitecore`or `extranet`。

Karina Apostolides 在这里提供了一系列有用的会员功能：以[编程方式添加和编辑用户](http://sitecorecodesamples.blogspot.co.uk/2010/11/programmatically-addedit-users.html)

# iphone - 如何在 iPhone 中访问 Rest API

> ID：11840892
> 
> 赞同：-6
> 
> 时间：2012-08-07T07:06:42.723
> 
> 标签：iphone, objective-c, restkit

我是rest Api的新手，所以任何人都可以告诉我如何处理rest API以及它需要哪些委托方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:00:50.690

现在有一个可用的库： [RestKIT](http://restkit.org/)。

# c# - 来自实体框架的提供程序连接字符串

> ID：11840896
> 
> 赞同：20
> 
> 时间：2012-08-07T07:07:00.617
> 
> 标签：c#, entity-framework, edmx, objectcontext

如果您使用对象上下文数据模型（带有 EDMX 文件），在创建过程中您可能希望在配置文件中指定连接字符串。

不幸的是，连接字符串不是通用连接字符串，因为它包含一些实体连接所需的东西。MySql 连接示例：

```
<add name="MyDbEntities" connectionString="metadata=res://*/Namespace.MyDb.csdl|res://*/Namespace.MyDb.ssdl|res://*/Namespace.MyDb.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=172.17.17.154;User Id=user;password=password;Persist Security Info=True;database=MyDatabase;Convert Zero Datetime=true&quot;" providerName="System.Data.EntityClient" /> 
```

我遇到的问题是这个连接字符串在参数“提供者连接字符串”中包含提供者的连接字符串。

由于特定原因，我需要创建一个与实体模型无关的新 MySqlConnection。为了创建 MySqlConnection，我需要为它提供 mysql 连接字符串 - 这是实体模型的提供者连接字符串，我知道我需要的连接字符串始终是实体模型的相同连接字符串。

但是如何以编程方式获取提供者连接字符串？我一直在浏览模型实例，但没有成功......

以下：

```
ModelInstance.Connection.ConnectionString 
```

包含类似“name=TestBotEntities”的内容，甚至不包含整个连接字符串。所以我尝试了：

```
ConfigurationManager.ConnectionStrings["MyDbEntities"].ConnectionString 
```

但是那个包含整个实体连接字符串，我只是不知道如何解析它，如何只从中获取提供者连接字符串。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-07T07:07:00.617

原来有两种方法。

我可以通过 EntityConnectionStringBuilder 解析实体连接字符串：

```
string entityConnectionString = ConfigurationManager.ConnectionStrings["MyDbEntities"].ConnectionString;
string providerConnectionString = new EntityConnectionStringBuilder(entityConnectionString).ProviderConnectionString; 
```

...或者如果我有可用的特定模型实例，我可以从这里获取它。

```
((System.Data.EntityClient.EntityConnection)ModelInstance.Connection).StoreConnection.ConnectionString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-08T00:54:34.737

我不得不承认我作弊了，因为我不想在我正在从事的项目中依赖 EF 的程序集。因此，我使用了一个正则表达式来“解析”“提供者连接字符串”的值：

```
provider connection string="(.+)"; 
```

# android - android片段切换

> ID：11840898
> 
> 赞同：3
> 
> 时间：2012-08-07T07:07:02.600
> 
> 标签：android, android-fragments

现在我正在使用片段做一个应用程序。所以我关心一个带有四个片段片段 A、片段 B、片段 C、片段 D 的片段活动。默认情况下，片段 A 将被选中，在选项卡上单击我可以切换到片段 B、C、D 或 A。

我的问题是我想检查片段 A 中的条件并取决于结果切换到片段 B.Like。

```
Intent in=new Intent(src,destination);
startactivity(in) 
```

我想在不单击选项卡按钮的情况下切换到其他片段。以下是我用来添加片段的代码。我想检查一个条件取决于该条件片段 a，片段 b 选项卡将被选中

```
 ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tab1 = bar.newTab();
    ActionBar.Tab tab2 = bar.newTab();
    tab1.setText("Fragment A");
    tab2.setText("Fragment B");
    tab1.setTabListener(new MyTabListener());
    tab2.setTabListener(new MyTabListener());
    bar.addTab(tab1);
    bar.addTab(tab2); 
```

请帮助我的朋友。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:27:50.187

片段相当难以使​​用，因此您应该了解它们。这是我的做法。

片段管理器：

```
public class FragmentsUtils {
private static String DIALOG_TAG = "dialog_tag";

/*public static MyAlertDialogFragment showDialog(FragmentManager fragmentManager, int id) {
    // DialogFragment.show() will take care of adding the fragment
    // in a transaction.  We also want to remove any currently showing
    // dialog, so make our own transaction and take care of that here.
    FragmentTransaction ft = fragmentManager.beginTransaction();
    Fragment prev = fragmentManager.findFragmentByTag(DIALOG_TAG);
    if (prev != null) {
        ft.remove(prev);
    }

    //      ft.addToBackStack(null);

    // Create and show the dialog.
    MyAlertDialogFragment newFragment = MyAlertDialogFragment.newInstance(id);
    newFragment.show(ft, DIALOG_TAG);
    return newFragment;
}*/

public static void swapFragments(FragmentManager fragmentManager, int containerViewId, Fragment newFragment, String fragmentTag)    {

    if (fragmentManager == null)
        return;
    View newFragmentMainView = newFragment.getView();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    //      fragmentTransaction.replace(containerViewId, fragment);

    if(fragmentTag == null || fragmentTag.length() < 1)
        fragmentTransaction.add(containerViewId, newFragment);
    else
        fragmentTransaction.add(containerViewId, newFragment, fragmentTag);

    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    fragmentTransaction.commit();
}

public static void swapFragments(FragmentManager fragmentManager, int containerViewId, Fragment newFragment)    {
    swapFragments(fragmentManager, containerViewId, newFragment, null);
} 
```

}

这里是如何使用它：

```
 WebViewDetailsActivity webViewDetailsActivity = new WebViewDetailsActivity();
     Bundle args = new Bundle();
     args.putString("url", tempRestModel.ClickTableUrl);   webViewDetailsActivity.setArguments(args); 

FragmentsUtils.swapFragments(getBaseFragmentManager(), R.id.realtabcontent, webViewDetailsActivity, Consts.TAB_REC); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:09:46.297

如果通过选择一个选项卡您可以切换到某个片段，例如`tab1`调出`Fragment A`，那么您需要做的就是选择该选项卡。例如，您当前正在查看`Fragment B`并需要检查一些条件，这将决定您是否切换到`Fragment A`或`C`

```
ActionBar bar = getSupportActionBar();
if(condition){
    bar.setSelectedNavigationItem(1); //where 1 is the position of tab1
}else{
    bar.setSelectedNavigationItem(3); //for tab3
} 
```

# android - 接收短信和关机的意向服务

> ID：11840899
> 
> 赞同：2
> 
> 时间：2012-08-07T07:07:14.587
> 
> 标签：android, eclipse, jakarta-ee

实际上，我希望构建一个 Intent 服务来接收 SMS，因为您知道要执行异步任务，我们使用 Intent 服务。现在在我的应用程序中，服务监听传入的短信，然后将其存储在 dbase 中，然后再次关闭，当短信进入时，它会监听短信并将其存储并关闭，我该怎么做。请在这方面帮助我。提前感谢，如果不明白我的发音不好，请原谅..

谢谢n问候

Om Prakash Kaushik..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:15:33.693

你需要一个广播接收器。

在您的清单中，您需要声明权限；

```
 <uses-permission android:name="android.permission.RECEIVE_SMS"> 
```

然后声明接收短信的类

```
<receiver android:name=".SMSBroadcastReceiver">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

然后声明你的班级

```
public class SMSBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        //intent contains SMS data
    }
} 
```

# c# - 将字符串值作为 int 从视图传递到控制器

> ID：11840900
> 
> 赞同：1
> 
> 时间：2012-08-07T07:07:15.847
> 
> 标签：c#, asp.net-mvc-3

让我有以下视图模型：

```
public class ViewModel
{
     public string SomeValue {get; set;}
     public int CountryId {get; set;}
} 
```

和国家名单

```
var countryList = new[]{new[]{Country="Russia", Value=1},new[]{Country="USA", Value=2},new[]{Country="Germany", Value=3} } 
```

我想用这些字段创建一个表单。问题是国家输入必须是文本框。

所以我不能只写类似的东西`Html.TextBoxFor(m => m.CountryId)`。此类任务的最佳实践是什么？它是隐藏的领域还是别的什么？

* * *

编辑

界面看起来像：

```
 SomeValue: |_______|

    Country:   |_______|

                |Submit button| 
```

在“国家”字段中，我们只能输入国家名称。在 SomeValue 中，其他一些值无关紧要（您可以想象 SomeValue 不存在）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:50:46.380

当下拉列表似乎更合适时，这当然是一个奇怪的要求，但我们之前都有过奇怪的要求。:) 这是一个简单的例子，希望能展示你需要知道的一切，以便让它工作。

首先，一个将国家名称与 id 关联起来的简单模型：

```
public class CountryModel
{
    public int Id { get; set; }
    public string Country { get; set; }
} 
```

现在控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(string country)
    {
        var countryId = GetCountries()
                        .Where(c => c.Country.ToLower() == country.ToLower())
                        .Select(c => c.Id)
                        .SingleOrDefault();

        if (countryId != 0)
            return RedirectToAction("Thanks");
        else
            ModelState.AddModelError("CountryNotSelected", "You have selected an invalid country.");

        return View();
    }

    private List<CountryModel> GetCountries()
    {
        return new List<CountryModel>
        {
            new CountryModel { Id = 1, Country = "Russia" },
            new CountryModel { Id = 2, Country = "USA" },
            new CountryModel { Id = 3, Country = "Germany" }
        };
    }
} 
```

这是视图：

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(false)
    <fieldset>
        <div class="editor-field">
            @Html.TextBox("Country")
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

这里有几点需要注意。首先，您已经声明您在此视图中有额外的属性。在这种情况下，我会将它们放在一个`CountryViewModel`和模型中绑定到 HTTP POST 方法中的一个实例，而不是简单地绑定到一个字符串。所以，像这样：

```
public class CountryViewModel
{
    public string SomeValue { get; set; }
    public string SomeMoreFormData { get; set; }
    public string Country { get; set; }
} 
```

然后从这里开始，POST 方法会变成这样：

```
[HttpPost]
public ActionResult Index(CountryViewModel viewModel)
{
    var countryId = GetCountries()
                    .Where(c => c.Country.ToLower() == viewModel.Country.ToLower())
                    .Select(c => c.Id)
                    .SingleOrDefault();

    if (countryId != 0)
        return RedirectToAction("Thanks");
    else
        ModelState.AddModelError("CountryNotSelected", "You have selected an invalid country.");

    return View(viewModel);
} 
```

其次，请注意我是如何通过`GetCountries()`. 如果您的需求发生变化，这将允许您稍后轻松地重构它以从数据库中获取国家/地区列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:18:59.293

```
@using (Html.BeginForm("Index", "Home")) {    
<p>
Page number:
@Html.TextBox("CountryId")

<input type="submit" value="CountryId" />
</p>
}

[HttpPost]
public ActionResult Index(int countryId)
{ 
CountryId= countryId;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:48:23.940

我不明白你的问题100％。我是否正确地说用户可以输入国家/地区 ID 和名称？

最好将视图模型发送到您的视图。假设您有以下视图模型：

```
public class YourViewModel
{
     public string CountryName {get; set;}
     public string CountryId {get; set;}
} 
```

您的操作方法可能如下所示：

```
public ActionResult Index()
{
     YourViewModel viewModel = new YourViewModel();

     return View(viewModel);
}

[HttpPost]
public ActionResult Index(YourViewModel viewModel)
{
     // Check viewModel for nulls
     // Whatever was typed in on the view you have here,
     // so now you can use it as you like
     string country = viewModel.CountryName;
     string id = viewModel.CountryId;

     // Do whatever else needs to be done
} 
```

您的视图可能如下所示：

```
@model YourProject.DomainModel.ViewModels.YourViewModel

@using (Html.BeginForm())
{
     <div>
          @Html.TextBoxFor(x => x.CountryName)<br />
          @Html.ValidationMessageFor(x => x.CountryName)
     </div>

     <div>
          @Html.TextBoxFor(x => x.CountryId)<br />
          @Html.ValidationMessageFor(x => x.CountryId)
     </div>

     <button id="SaveButton" type="submit">Save</button>
} 
```

我希望这有帮助。

# eclipse - 如何让 Eclipse 显示一个类的整个 javadoc

> ID：11840902
> 
> 赞同：26
> 
> 时间：2012-08-07T07:07:20.920
> 
> 标签：eclipse

eclipse可以显示整个javadoc吗？即所有方法（及其描述），当我突出显示对象引用时？

例如，如果我做 System，它会显示我

> java.lang.System
> 
> System 类包含几个有用的类字段和方法。它不能被实例化。
> 
> System 类提供的设施包括标准输入、标准输出和错误输出流；访问外部定义的属性和环境变量；一种加载文件和库的方法；以及一种用于快速复制数组的一部分的实用方法。
> 
> 自：JDK1.0

但这告诉我我能用它做什么。是的，我可以使用智能点完成，但这似乎有点麻烦。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-07T07:22:37.980

要在 Eclipse 中查看具有附加源的类的 javadoc：

选择窗口 -> 显示视图 -> javadoc（或 alt + shift + q, j）。

然后在 javadoc 视图中，右键单击 -> 打开附加的 javadoc（或 shift + F2），这将在 eclipse 的内部浏览器中显示该类的 javadoc。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-10-03T09:06:31.673

**在源代码编辑器中，将**鼠标悬停在某个方法或类名上。

然后按

```
Shift-F2 (Open External Documentation) 
```

Javadoc View 将在正确的位置打开完整的文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-12T13:23:01.123

您需要做的是将鼠标悬停在程序中使用的某些内置方法或类上。

按住键盘上的 ctrl 并单击。然后eclipse要求你附加源代码。单击“附加源”，选择“EXTRENAL”文件后浏览 src.zip 文件。或者在相同的即外部文件附件下提供提取的 src 文件夹的路径。

下次您将鼠标悬停在内置类或方法上时，它会显示一个简短的描述。要查看相同的整个 javadoc，请按住 ctrl 并单击它。

它对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T07:19:13.470

如果您将源附加到类（Java 和自定义），那么您可以通过按 F3 在大纲视图中看到它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-10T12:11:02.217

我知道这篇文章很旧。不过，我想添加一个以简单方式显示 Javadoc 的过程。

`4.7.1a`我使用的是一年`2017`构建的日食氧气。

-> 只需将鼠标悬停在任何声明/方法/对象/类`F2`上并按下聚焦，现在在出现的工具提示底部，我们可以找到可以将我们带到`Javadoc`浏览器或 Eclipse 视图中的图标/按钮。

`shift+F2`在 Eclipse 的浏览器中直接打开`javadoc`您悬停在上面的实体。

要使此方法起作用，`javadoc`需要将其附加到您的源。请参阅[链接 javadoc](https://stackoverflow.com/questions/9870448/how-to-attach-source-or-javadoc-in-eclipse-for-any-jar-file-e-g-javafx)。

# c# - 如何在 C# 中生成具有月份跨度的系列

> ID：11840911
> 
> 赞同：1
> 
> 时间：2012-08-07T07:08:00.827
> 
> 标签：c#, asp.net, datetime, date

我有一个接受日期范围的网络服务，由于大量数据导入，我只传递了 1 个月的日期范围参数。

可接受的开始日期格式：2012 年 4 月 1 日

可接受的结束日期格式：2012 年 4 月 30 日

我想以编程方式发送过去 2 年每个月的开始日期和结束日期，例如 2012 年 1 月 1 日至 2012 年 8 月 31 日

下面是我开始测试的示例代码，但是当添加结束日期加上 1 个月时，它给了我 30 天的跨度。

```
static void Main(string[] args)
    {
        string startDt = "1-apr-2011";
        string endDt = "30-apr-2012";
        DateTime dt = Convert.ToDateTime(startDt);
        DateTime dt2 = Convert.ToDateTime(endDt);
        CultureInfo culture = CultureInfo.GetCultureInfo("en-GB");

        //Console.WriteLine(value.ToString("D", culture)); 

        while (dt < dt2)
        {
            Console.WriteLine(dt.ToString("D", culture));
           // Console.WriteLine(String.Format("{0:dd-MM-yyyy}", dt));
            dt = dt.AddMonths(1);                
        }
        Console.ReadLine();
    } 
```

**更正的代码：**

```
 static void Main(string[] args)
    {
        string startDt = "1-apr-2011";
        string endDt = "30-apr-2012";
        DateTime dt = Convert.ToDateTime(startDt);
        DateTime dt2 = Convert.ToDateTime(endDt);
        CultureInfo culture = CultureInfo.GetCultureInfo("en-GB"); 
        while (dt < dt2)
        {
            DateTime dtend = new DateTime(dt.Year, dt.Month, DateTime.DaysInMonth(dt.Year, dt.Month)); 
            Console.WriteLine(dt.ToString("D", culture));
            Console.WriteLine(dtend.ToString("D", culture));               
            dt = dt.AddMonths(1);                
        }
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T07:15:22.693

每个月的第一个日期将为 1，但对于最后一个日期，您必须使用

```
int DateTime.DaysInMonth(int year, int month); 
```

这需要一个月，因为月份可以是 28、29、30 或 31 天，并且考虑闰年需要年份。

添加`AddMonth(1)`到一个月的最后一个日期并不意味着它将给出下个月的最后一个日期。

**想象一下这个场景**

```
DateTime dtt = new DateTime(2012, 09, 30);

dtt = dtt.AddMonths(1); 
```

现在 9 月 30 日是 9 月的最后一个日期，但当我们`AddMonth(1)`给我们 30 月时。但 10 月的最后一个日期是 31 日而不是 30 日。

所以如果一月份的第一次约会将是

```
DateTime startdateofamonth = new DateTime(2011, 1, 1); 
```

而最后日期将是

```
DateTime lastdateofamonth = new DateTime(2011, 1, DateTime.DaysInMonth(2011,1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:21:05.283

你可以做：

```
var firstDateOfMonth = new DateTime(dt.Year, dt.Month, 1);
var last = new DateTime(dt.Year, dt.Month, 1).AddMonths(1).AddDays(-1); 
```

所以你的代码应该是：

```
 static void Main(string[] args)
        {
            string startDt = "1-apr-2011";
            string endDt = "30-apr-2012";
            DateTime dt = Convert.ToDateTime(startDt);
            DateTime dt2 = Convert.ToDateTime(endDt);
            while (dt < dt2)
            {
                var first = new DateTime(dt.Year, dt.Month, 1);
                var last = new DateTime(dt.Year, dt.Month, 1).AddMonths(1).AddDays(-1);
                Console.Write(String.Format("{0:dd-MMM-yyyy}", first));
                Console.Write("== To == ");
                Console.WriteLine(String.Format("{0:dd-MMM-yyyy}", last));
                dt = dt.AddMonths(1);
            }
            Console.Read();
        } 
```

输出将是：

```
01-Apr-2011== To == 30-Apr-2011
01-May-2011== To == 31-May-2011
01-Jun-2011== To == 30-Jun-2011
01-Jul-2011== To == 31-Jul-2011
01-Aug-2011== To == 31-Aug-2011
01-Sep-2011== To == 30-Sep-2011
01-Oct-2011== To == 31-Oct-2011
01-Nov-2011== To == 30-Nov-2011
01-Dec-2011== To == 31-Dec-2011
01-Jan-2012== To == 31-Jan-2012
01-Feb-2012== To == 29-Feb-2012
01-Mar-2012== To == 31-Mar-2012
01-Apr-2012== To == 30-Apr-2012 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:17:37.480

我不确定这是不是你的意思，

开始日期是第一位的，因此您应该能够通过 new 获得它，`DateTime(2011,[month],1)`您需要增加月份（不要超过 12 ！）

此外，您可以使用`DateTime.DaysInMonth`可以添加到您的开始日期（通过`AddDays()`）并到达结束日期的月份中的天数。

# php - 如何获取 xiph.org 的所有电台 url

> ID：11840914
> 
> 赞同：0
> 
> 时间：2012-08-07T07:08:12.820
> 
> 标签：php, webradio

有什么方法可以从[xiph.org](http://dir.xiph.org)获取所有 URL ？有没有办法直接查询站点以从 Web 应用程序中获取指定的收音机或指定类别的收音机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-04T19:44:46.487

Xiph.org 现在正在开发[JSON API (#tkt1958)](https://trac.xiph.org/ticket/1958)。由于 mysqls`CONCAT(json_object(m.stream_name...`查询，编码仍然被严重破坏。

但即使使用正则表达式 JSON 提取，它也比处理旧的`yp.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:59:05.387

好的，我已经查看了该站点上的一些流。

如果您`XSPF`在文本编辑器中打开文件，您会得到一些 XML，其中包含在`<location>`选项卡中的流。

您将不得不为此设置某种爬虫。我给你做一个简单的。

```
//define the link
$link = 'http://dir.xiph.org/';

//get the contents
$contents = file_get_contents($link);

preg_match_all('|"/listen/(.*)/listen.m3u"|',$contents,$match);

//define xspf link array
$xspfLinks = array();

//define default link
$xspfLink = 'http://dir.xiph.org/listen/';

//define final stream array
$finalStream=array();

foreach ($match[1] as $id )
{
    //assign ID to default link and throw it in the array
    $xspfLinks[]=$xspfLink.$id.'/listen.xspf';

}

// now loop through that array
foreach ($xspfLinks as $hehehe )
{
    //download xspf file
    $xspf = file_get_contents($hehehe);

    if(preg_match('|<location>(.*)</location>|',$xspf,$heheMatch))
    {

        //put stream url in final array
        $finalStream[]=$heheMatch[1];
        //test it
        echo 'HEHEHEHE I just stole:'.$heheMatch[1]."<br>";

    }
}

//now do as you please with $finalStream (it will contain all your stream urls) 
```

我刚刚为你做了这一切-_-。但是，是的，这应该有效。

哦，还有一件事，如果你在不应该的时候愚蠢地窃取了那些流，我将不承担任何责任。

# jquery - 获得 JSON 结果，但添加到页面的脚本不起作用

> ID：11840923
> 
> 赞同：0
> 
> 时间：2012-08-07T07:08:59.780
> 
> 标签：jquery, json, getjson

我正在使用 JSON 调用来根据传入的课程代码检索可用参与者位置的列表。想法是然后使用结果来填写已动态添加到页面的选择。我得到了正确的响应，但是将其添加到页面的代码不起作用。

```
$("#venueCourses").live("change",function (event) {
    var cID = $("#venueCourses").val().split("|");

    -- This call works and provides a list of dates for the course passed in
    $.post("includes/ajaxdates.asp",{courseID:cID[0], lessonType:cID[1], retType:"dl"},function(result){
            -- The data is displayed correctly
            $("#cdisplay").html(result);
    });

    -- This is the JSON Call that retrieves data
    $.getJSON('includes/ajaxdates.asp',{courseID:cID[0], lessonType:cID[1], retType:"lt", ajax: 'true'}, function(data) {

        -- NOTHING IN HERE SEEMS TO WORK
        var items = [];
        $.each(data, function(key, val) {
              items.push('<option value="' + key + '">' + val + '</option>');
        });

        $('<select/>', {
             'id': 'participantType',
             html: items.join('')
             }).appendTo('#partType');
    });
}); 
```

[JSON 调用提供此 URL 以检索来自http://www.surreyjive.co.uk/includes/ajaxdates.asp?courseID=ES-1-2013&lessonType=Intermediates&retType=lt&ajax=true](http://www.surreyjive.co.uk/includes/ajaxdates.asp?courseID=ES-1-2013&lessonType=Intermediates&retType=lt&ajax=true)的响应

这是 JSON 响应 {'0':'Please Select','Lady':'Individual Lady','Couple':'Couple'}

上面不起作用的代码实际上曾经是这段代码也不起作用：

```
 var options = [];
 for (var i = 0; i < j.length; i++) {
    options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
}
 alert(j);
 $("#participantType").html(options); 
```

任何解决此问题的帮助将不胜感激。

非常感谢格雷厄姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:38:43.357

根据您的响应数据，以下脚本应该可以工作。

```
var response = ' {"values": {"option": [{"value": "0","text": "Please Select"},{"value": "lady","text": "Individual Lady"},{"value": "gent","text": "Individual Gent"},{"value": "couple","text": "Couple"}]}}';
var data = jQuery.parseJSON(response);
var selectBox = $('<select/>', {'id': 'participantType'});
$.each(data.values.option, function(key, option) {
    $('<option />', {value: option.value, text: option.text}).appendTo(selectBox);
});
selectBox.appendTo('#partType'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:12:31.550

好的，所以在用一些新的眼光看待这个问题之后，我终于设法解决了这个问题。这可能不是修复它的最佳方法，但确实给了我想要的结果。所以第一个变化是替换了返回 JSON 的方法。

由此：

```
$.getJSON('includes/ajaxdates.asp',{courseID:cID[0], lessonType:cID[1], retType:"lt", ajax: 'true'}, function(data) { 
```

对此：

```
$.get('includes/ajaxdates.asp',{courseID:cID[0], lessonType:cID[1], retType:"lt", ajax: 'false'}, function(d) { 
```

所以我将 $.getJSON 替换为 $.get，所以我的 ASP 页面返回了一个文本字符串。

文本字符串从回调函数返回到变量 d 中，因此这是 JSON 解析为变量数据。

```
var data = jQuery.parseJSON(d); 
```

Et Voila 脚本每次都有效。我知道 MULTIDOT 的代码确实适用于 JSON 文本字符串，但不适用于对象。这是我真正缺乏知识的地方，因此很高兴了解我在原始脚本中出了什么问题。

非常感谢 MULTIDOT 的所有帮助。

干杯格雷厄姆

# php - 在 codeigniter 中调用 ajax 后重新生成新的会话 ID

> ID：11840934
> 
> 赞同：1
> 
> 时间：2012-08-07T07:09:31.293
> 
> 标签：php, jquery, ajax, codeigniter, session

在我看来，我开发了以下 js。

```
var url       = '<?php echo base_url(); ?>edit/';
$(document).ready(function(){
    $("#ajax-loader").hide();
    $("#personaldetails-en-di-icon").click(function(){
        $("#ajax-loader").show();
        $.post(url+'ajax/personaldetails/enable', {}, function(data){
            console.log(data);  
        });
     });
}); 
```

所以，当我点击时，它会请求编辑控制器。

在编辑控制器中我有私人 $id = null;

```
public function __construct() {
    parent::__construct();
    $this->load->library('session');
    $this->load->library('input');
    $this->load->model('editcv_model');
    $this->load->helper('url');

    $this->id = $this->session->userdata('login');        
    if (intval($this->id) < 1)
        die(json_encode(array('response' => 'not logged in')));
    }

    public function _remap($method = '',$param = array()){
        echo (json_encode(array('response' => 'done')));
    }
} 
```

chrome 控制台中的第一个 ajax 调用 echo **{"response":"done"} ，但第二个和其他请求 echo** **{"response":"not logged in"}**。当我在 phpmyadmin 中检查会话表时，它将与其他用户代理一起重新生成会话 ID

![在此处输入图像描述](../Images/4f4e80cf3cb43462bdb6f7d0b86e07c8.png)

如您所见**Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.57 Safari/537.1 AlexaToolbar/alxg-3**更改为**Mozilla/4.0 (兼容; MSIE 7.0; Windows NT 6.0) AlexaToolbar /alxg-3.0**在 ajax 请求中。但我使用 ubuntu 和 google chrome 浏览器！！！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:01:59.043

我对 CodeIgniter 会话也有同样的问题。

我切换到本地会话： https [://github.com/EllisLab/CodeIgniter/wiki/Dariusz-Debowczyk's-Session-Class](https://github.com/EllisLab/CodeIgniter/wiki/Dariusz-Debowczyk)

当 php 已经有了一个好的会话机制时，我从来没有真正理解实现另一种会话机制（我不是在谈论 CI_Session）背后的原因。:)

# android - apache http 客户端 NafHttpAuthStrategyDefault

> ID：11840937
> 
> 赞同：1
> 
> 时间：2012-08-07T07:09:52.960
> 
> 标签：android, apache-httpclient-4.x

当我在 android 上使用 apache http 客户端时，我在 logcat 中收到一条可疑消息。

```
I/APACHE HTTP (thCr=2252) - NafHttpAuthStrategyDefault(9949): (thUse=2252) NafHttpAuthStrategyDefault()
I/APACHE HTTP (thCr=2252) - NafHttpAuthStrategyDefault(9949): (thUse=2252)    cached value : gbaSupportIsPossible=null
I/APACHE HTTP (thCr=2252) - NafHttpAuthStrategyDefault(9949): (thUse=2252)    The current context is NOT a context of GBA service.
I/APACHE HTTP (thCr=2252) - GbaSupportPermissionRequestCheckerImpl(9949): (thUse=2252) isCurrentProcessRequestedGba()#finished   result=false
I/APACHE HTTP (thCr=2252) - GbaSupportPermissionRequestCheckerImpl(9949): (thUse=2252) isCurrentProcessAllowedToUseGba()#started   result=false
I/APACHE HTTP (thCr=2252) - NafHttpAuthStrategyDefault(9949): (thUse=2252)    The GBA permission wasn't requested for this process.
I/APACHE HTTP (thCr=2252) - NafHttpAuthStrategyDefault(9949): (thUse=2252) It is impossible to support GBA now (many possible reasons: no Android Context, current client is GBA service, etc.), then it will be just usual HTTP.
I/APACHE HTTP (thCr=2252) - NafRequestExecutorWrapperRedirectionHandler(9949): (thUse=2252)    It isn't GBA flow, redirection responses are not handled. 
```

我只是像下面这样使用：

```
HttpClient httpClient = new DefaultHttpClient();
HttpContext httpContext = new BasicHttpContext();

HttpPost postRequest = new HttpPost(url);
postRequest.addHeader("User-Agent", String.format("%s %s %s %s %s", Build.MANUFACTURER, Build.MODEL, Build.PRODUCT, Build.CPU_ABI, Config.appStr));

MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

reqEntity.addPart("sessionId", new StringBody(sessionId));

ByteArrayBody bab = new ByteArrayBody(afp, "afp");
reqEntity.addPart("afp", bab);

if (pcm != null)
{
    ByteArrayBody bab2 = new ByteArrayBody(pcm, "pcm");
    reqEntity.addPart("pcm", bab2);
}

postRequest.setEntity(reqEntity);

HttpResponse response = httpClient.execute(postRequest, httpContext);
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
String sResponse;
StringBuilder s = new StringBuilder();
while ((sResponse = reader.readLine()) != null) {
    s = s.append(sResponse);
    System.out.println(sResponse);
} 
```

GBA 服务的含义是什么？我怎样才能获得GBA许可？收到消息后，发送此请求的线程看起来像是遇到异常并被停止。我在 Galaxy Notes 上执行了代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T00:34:30.153

GBA - 通用引导架构（由 3GPP 标准定义的身份验证机制）... [http://en.wikipedia.org/wiki/Generic_Bootstrapping_Architecture](http://en.wikipedia.org/wiki/Generic_Bootstrapping_Architecture)了解更多信息。

在 Galaxy Note 上（我相信它是 T-mobile 版本），T-mobile 修改了 APACHE HTTP 客户端，包括用于通过 WiFi 进行身份验证的 GBA 客户端，尤其是通过 WiFi 上的 MMS。

问题是为什么要使用GBA？它通常用于使用 ISIM 密钥进行身份验证，运营商将其用于他们的服务。

如果您的应用程序是常规应用程序，您最好的选择是坚持使用默认的 android HTTP 客户端，并且不要使用 Apache HTTP 客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T00:46:33.203

简短版：忽略消息。

支持 WiFi 通话和其他一些功能的 T-Mobile 设备使用称为 GBA 的 GSM 移动标准来通过 T-Mobile 验证其服务。有问题的消息是日志语句，表明您的应用程序未被识别为 T-Mobile 应用程序，因此 GBA 不会在请求标头中进行广告。如果您确实支持 GBA，您将看到的唯一区别是在您的请求的用户代理标头中包含“gba”。

如果您的客户端与之通信的服务器应用程序支持 GBA，那么开发人员应该与 T-Mobile 有关系，并且可以告诉您如何在您的应用程序中启用 GBA 身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:36:20.803

我相信您所指的 GBA 服务在此处进行了描述：[http ://en.wikipedia.org/wiki/Generic_Bootstrapping_Architecture](http://en.wikipedia.org/wiki/Generic_Bootstrapping_Architecture)

我的日志中也出现了该消息，但网络连接对我来说仍然成功完成。

有一次我在尝试从主线程建立网络连接时遇到异常，我认为这是不允许的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:25:29.793

您应该更改为 HttpURLConnection，这是使用 HTTP 服务的首选方式。您可以在此处了解更多信息：

[http://android-developers.blogspot.com.br/2011/09/androids-http-clients.html](http://android-developers.blogspot.com.br/2011/09/androids-http-clients.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-11T12:55:49.043

卸载应用程序后修复，重新安装！

# php - 使用内联 javascript 更改带有 2 位小数的文本框值

> ID：11840938
> 
> 赞同：0
> 
> 时间：2012-08-07T07:09:58.937
> 
> 标签：php, javascript, codeigniter

我有 3 个文本框，第一个文本框是总计，第二个是服务费，第三个是总计。

问题在于服务费。它正在工作，但我必须将其更改为仅显示 2 位小数。

这是代码：

```
<p><span><?php echo $this->lang->line('Deposit Amount:');?></span> $ 
<input name="total" class="total" size="10"
    value="<?php if(isset($amount)) echo $amount; else echo set_value('total');?>"
    onKeyUp="document.depositAmount.service_fee.value = 
        document.depositAmount.total.value*(<?php echo $commission?>/100);
        if(Number(document.depositAmount.total.value)){
            document.depositAmount.grand_total.value =
                parseFloat(document.depositAmount.service_fee.value) +
                parseFloat(document.depositAmount.total.value)
        } else
            document.depositAmount.grand_total.value=0" 
    type="text"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:14:35.657

使用`toFixed()`方法：-

```
var num = 5.56789;
var n=num.toFixed(2); 

result:- 5.57 
```

替换您的代码，例如：-

```
document.depositAmount.grand_total.value=parseFloat( document.depositAmount.service_fee.value).toFixed(2) + parseFloat(document.depositAmount.total.value).toFixed(2) 
```

# ios - 在启用 ARC 的 C 代码中执行目标 C 代码时，运行时内存泄漏警告

> ID：11840943
> 
> 赞同：1
> 
> 时间：2012-08-07T07:10:39.683
> 
> 标签：ios, memory-leaks, cocos2d-iphone, automatic-ref-counting

ARC 已启用`bufferReady`并由 C++ 库（未启用 ARC）触发，我确定我在某处缺少 ARC 转换。请指教。提前致谢。

使用以下代码：

```
@implementation HelloWorldLayer

id refToSelf;  //reference to self
int shakeCounter = 0;

void bufferReady() {
    if (shakeCounter % 100 == 0) {
        [refToSelf shakes];
    }

    shakeCounter++;
}

- (void) shakes {
    CCRotateBy * rotate = [CCRotateBy actionWithDuration:0.1 angle:2];
    CCActionInterval * rotateReverse = [rotate reverse];
    CCSequence * seq1 = [CCSequence actions:rotate, rotateReverse, nil];

    CCMoveBy * shake = [CCMoveBy actionWithDuration:0.1 position:ccp(5, 0)];
    CCActionInterval * shakeReverse = [shake reverse];
    CCSequence * seq2 = [CCSequence actions:shake, shakeReverse, nil];

    CCSpawn * spawner = [CCSpawn actions:seq1, seq2, nil];
    CCSequence * lastSequence = [CCSequence actions:spawner, spawner, spawner, spawner, nil];

    [self runAction:lastSequence];
}

- (id) init {
    if((self = [super init])) {
        ...
    }
    refToSelf = self;
    return self;
} 
```

在运行时，每次`shakes`执行时我都会收到内存泄漏警告。

```
objc[10060]: Object 0x466830 of class CCRotateBy autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x44cb70 of class CCRotateBy autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x46b260 of class CCSequence autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x45a790 of class CCMoveBy autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x469150 of class CCMoveBy autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x469190 of class CCSequence autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x46b350 of class CCSpawn autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x46b380 of class CCSequence autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x46b3b0 of class CCSequence autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[10060]: Object 0x46bc00 of class CCSequence autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:18:35.170

你不会错过“ARC cast”。

我猜您的 C++ 创建了一个单独的线程并`bufferReady`在该线程上调用。由于它是一个 C++ 库，我认为它对 Objective-C 或 Cocoa 内存管理一无所知，因此它不会创建自动释放池。因此*，您*应该在以下位置创建一个自动释放池`bufferReady`：

```
void bufferReady() {
    if (shakeCounter % 100 == 0) {
        @autoreleasepool {
            [refToSelf shakes];
        }
    }

    shakeCounter++;
} 
```

但我也看到`shakes`，您正在创建 Cocos2D 对象并发`runAction:`送给自己，大概是为了运行您创建的操作对象。您确定在随机线程上执行此操作是安全的吗？也许您应该将自己发送`shakes`到主线程。这是一个简单的方法：

```
void bufferReady() {
    if (shakeCounter % 100 == 0) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [refToSelf shakes];
        });
    }

    shakeCounter++;
} 
```

由于主线程管理自己的自动释放池，因此在这种情况下您不必设置一个。

# java - 无法在 ant javascript 中导入类

> ID：11840945
> 
> 赞同：0
> 
> 时间：2012-08-07T07:10:43.270
> 
> 标签：java, javascript, ant, rhino

我正在用 ant 编写内联 javascript。此脚本将扫描目录并输出相对于给定时间戳不是最新的文件的名称。

```
<script language="javascript"> <![CDATA[

  importPackage(Packages.java.lang);
  importPackage(Packages.org.apache.commons.io.FileUtils);
  importClass(Packages.java.io.File);
  importClass(Packages.java.util.Iterator);

  var path = "D:\DirectoryToScan\";
  var timeToCompare = buildServers.getProperty("buildStartTime");

  var invocationTime = new Date(timeToCompare );
  invocationTime = invocationTime.getTime();

  var directoryToSearch = new File(path );
  //CODE BREAKS HERE. NONE OF THE SUBSEQUENT LINES EXECUTE  
  var fileIterator = FileUtils.iterateFiles(directoryToSearch, new String[]{"pdf","html"} , true);

  //iterate through files and directories in builtDocs folder and return false if any of the files is older than invocation time
  while (fileIterator.hasNext()) {
     var doc = fileIterator.next();
     if ((!FileUtils.isFileNewer(doc, invocationTime))) {
        return false;
     }        
  }
]]> </script> 
```

我注意到对 FileUtils 的第一次调用中断了。我也尝试使用一些简单的类，但它们无法访问，并且看起来 import 语句不适用于自定义类或属于此处显然无法访问的包（例如 apache.tools.ant.util.FileUtils）。

在访问它们之前，我需要在这里做些什么来正确加载这些类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:23:40.060

如果您尝试使用的类不在 Ant 自己的 lib 目录中，那么您需要为脚本指定一个类路径：

```
<path id="script.classpath">
  <fileset dir="lib" includes="**/*.jar"/>
</path>

<script language="javascript" classpathref="script.classpath">
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:59:23.313

该问题已通过在 ant.cmd 文件中包含 jar 文件得到解决。

# php - Zend Form 错误消息没有从函数返回

> ID：11840946
> 
> 赞同：1
> 
> 时间：2012-08-07T07:10:44.007
> 
> 标签：php, zend-framework, zend-form

在我的模型中

```
$form = new \Zend_Form();
$form->addElement('text', 'name', array(
        'validators'    => array(
            array('NotEmpty', true),
            array("stringLength", true, array(1,40))
        ),
        'required'      => true,
        'label'         => "Name",
    ));
return $form; 
```

在我的控制器中，调用了上面的模型函数

```
if($form->isValid($_POST)) {
  ....
} else {
$form = Product::getForm();
print_r($form->getErrors());
print_r($form->getErrorMessages());
print_r($form->getMessages());
} 
```

我正在使用 Zend 框架。

这里在表单的name字段中，超过40个字符的字符串需要显示错误信息。

我尝试使用`getErrors()`and获取错误`getErrorMessages()`。但是这些功能都没有给我错误。它在打印这些函数时返回一个空数组。

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:35:57.713

为什么给你打这个电话：

```
$form = Product::getForm(); 
```

所以你用它的错误信息覆盖了旧的 $form 变量。试试没有这些线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:33:35.463

`isValid()`在您调用表单之前，错误消息不会出现，就像这样

```
$form = Product::getForm();

if(!$form->isValid($_POST))
{
    print_r($form->getErrors());
    print_r($form->getErrorMessages());
    print_r($form->getMessages());        
} 
```

# c - 本地数组和数组索引变量如何存在于内存中？

> ID：11840948
> 
> 赞同：1
> 
> 时间：2012-08-07T07:10:52.917
> 
> 标签：c, arrays, memory

我在面试问题中遇到了第一个问题。但是我想要对这个问题进行适当的解释。我在家里尝试这个，其他一些困惑也随之增加。

```
#include <stdio.h>
int main()
{
  int arr[4]={10,20,30,40};
  int i;
  for(i=0;i<=4;i++)
  printf("%d,",arr[i]);
  printf("\n");
  return 0;
}

OUTPUT
10,20,30,40,4, 
```

最后一个输出是 4。但它超出了数组索引。我再次认为在内存变量中我存在于数组元素之后。所以我得到了这个答案。

但我再次对此感到困惑

```
 #include <stdio.h>

int main()
 {
   char arr[4]={10,20,30,40};
   int i;
    for(i=0;i<=4;i++)
       printf("%d,",arr[i]);
    printf("\n");
   return 0;
 }
OUTPUT
10,20,30,40,0, 
```

再次与下面更混淆

```
#include <stdio.h>
int main()
 {
   int arr[4]={10,20,30,40};
   char i;
   for(i=0;i<=4;i++)
      printf("%d,",arr[i]);
   printf("\n");
   return 0;
}

OUTPUT
10,20,30,40,74743796, 
```

任何人都可以解释为什么这种类型的输出变化？

我使用英特尔 CPU、Ubuntu 操作系统、Gcc 编译器..

如果特定于编译器或特定于体系结构，请在答案中提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:15:30.713

这称为[未定义行为](http://en.wikipedia.org/wiki/Undefined_behavior)。由于您正在访问超出其范围的数组，因此**任何事情都**可能发生，并且结果不必（也不会）有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:15:53.647

您不应访问超出范围的数组内存。越界数组访问的值可以是任何值 - 它没有预期值并且它具有未定义的行为。似乎您期望在数组之后本地创建的 char 和 int 变量位于数组变量之后的内存中。即使是这种情况，您也没有初始化这些变量，因此它们的值可以是任何值。只是不要访问越界内存，当然也不要试图预测访问它的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:20:34.457

需要明确的是，您所看到的被归类为“未定义的行为”，但您的答案中有足够的信息来了解发生了什么。

首先，我们可以从您关于机器架构的问题中看到一些细节。

关于 CPU

*   CPU是小端

关于操作系统

*   堆栈向下增长

关于编译器

*   `int`大小为 32 位
*   `char`大小为 8 位
*   局部变量在堆栈上的顺序与它们在代码中的顺序相同
*   放入`char`比它需要的更大的块以加快运行时间
*   使用内存填充来加速代码

所有这些事情结合起来最终得到你所看到的结果。视觉演示最适合展示从这里发生的事情。

## 第一个案例

在循环结束时，堆栈如下所示：

```
| 10 | 0 | 0 | 0 | a[0]
| 20 | 0 | 0 | 0 | a[1]
| 30 | 0 | 0 | 0 | a[2]
| 40 | 0 | 0 | 0 | a[3]
|  4 | 0 | 0 | 0 | i (a[4]) 
```

的值与应`i`在的位置相同。`a[4]`所以`a[4]`具有与 相同的值`i`。

## 第三种情况

看起来像什么`i`取决于很多变量。但似乎这是最有意义的布局。

```
| 10 | 0 | 0 | 0 | a[0]
| 20 | 0 | 0 | 0 | a[1]
| 30 | 0 | 0 | 0 | a[2]
| 40 | 0 | 0 | 0 | a[3]
|  X | X | X | 4 | i (a[4]) 
```

这反映在您看到的打印值中。`74743796`在小端二进制中是

```
11110100 01111111 01110100 00000100 
```

最后一个字节是`4`. 当您`i`在代码中引用时，上下文是一个字符，并且只使用最后一个字节。当您引用`a[4]`时，上下文为 an`int`并使用所有四个字节。

这很重要，因为它表明编译器将字符推入最后一个字节并用垃圾填充其余部分。

## 第二种情况

基于其他两个，我希望内存如下

```
| X | X | X | 10 | a[0]
| X | X | X | 20 | a[1]
| X | X | X | 30 | a[2]
| X | X | X | 40 | a[3]
| 4 | 0 | 0 |  0 | i (a[4]) 
```

最后一条记忆线开始发挥作用。当它作为一个访问时`int`，它被正常处理。但是，当它作为 a 访问时`char`，编译器假定前三个字节是填充并返回最后一个字节，或者`0`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T07:19:50.090

您正在处理的是未定义的行为。

`i`在第一种情况下，变量恰好`arr`位于堆栈上的数组之后，因此超出了数组的边界，您正在触摸`i`变量。`i`和的类型`arr`相同 ( )，因此可以将其作为数组的一部分`int`打印出来。`i`

在第二种情况下，您试图访问`i`它，就好像它是一个`char`变量一样，所以您只能得到它的一部分，它是零。

请记住，编译器可以自由地重新排列堆栈上的变量，因此任何关于`i`变量应该紧随其后的假设（即使它是按该顺序声明的）都是不正确的。

对于编译器来说，`arr`它们`i`只是两个独立的局部变量。的大小`arr`不保存在内存中的任何位置：*只是*`arr`一块具有起始地址的内存。您可以在编译时通过静态`sizeof`运算符检查其大小。

# java - java编辑器和代码折叠

> ID：11840956
> 
> 赞同：0
> 
> 时间：2012-08-07T07:11:55.113
> 
> 标签：java, visual-studio, editor, syntax-highlighting

自从我树上这棵树以来已经有几年了，但是今年秋天我必须再次看看 java 的课程。来自工作中的 C# 和 .net 世界，我有点被一个好的 ide、代码折叠等宠坏了 :)

所以这里是：它甚至存在一个好的java ide吗？

请不要说 netbeans 或 eclipse ;) 上次我编写 java 代码时，唯一能削减它的是普通的旧 .bat 文件和 ultraedit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:15:48.700

看看 IntelliJ IDEA [http://www.jetbrains.com/idea/](http://www.jetbrains.com/idea/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:14:46.953

Eclipse 和 NetBeans 都具有代码折叠功能，以及许多其他很棒的功能。你最后一次真正使用它们是什么时候？

要回答您关于 Java IDE 的原始问题：**Eclipse**和**NetBeans**，对我来说是紧密的联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:16:03.110

如果您只需要代码折叠、有限的自动完成和语法高亮，您可以使用 notepad++。但是，我自己更喜欢像 intellij IDEA 这样更智能的 ide。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:35:23.953

如果您曾经使用过[ReSharper](http://www.jetbrains.com/resharper/)（VS 插件）并且喜欢它的功能，那么您应该看看[IntelliJ IDEA](http://www.jetbrains.com/idea/)，因为同一家公司开发了[ReSharper](http://www.jetbrains.com/resharper/)。好东西吨！

# jquery - jQuery选择li标签内的相对子元素

> ID：11840965
> 
> 赞同：1
> 
> 时间：2012-08-07T07:12:39.463
> 
> 标签：jquery, hover, html-lists, children

我是一个 jQuery 新手，所以请耐心等待。

我正在尝试使用 jQuery 在列表项内的锚点内悬停时淡入 h6 标记，但 IE 无法识别我的光标悬停在锚点上，因为列表项位于它的顶部标记。它适用于所有其他浏览器，但不适用于 IE9 及更低版本。

这是为了更清晰的标记：我有一个带有 HTML 的投资组合缩略图列表，如下所示：

```
<ul class="portfolio">
 <li>
  <span class="top-right-corner"></span>
  <span class="bottom-left-corner"></span>
  <a class="popup" href="#interact"><h6>Interact Live</h6></a>
  <img alt="Interact Live" src="images/interact-thumb.jpg" width="529" height="260" />
 </li>
</ul> 
```

为此，CSS 如下：

```
.portfolio {
display:inline-block;
overflow:visible;
margin-bottom:40px;
}

.portfolio li {
float:left;
z-index:1;
margin-right:35px;
margin-bottom:58px;
position:relative;
}

.portfolio li.right {
margin-right:0;
}

.portfolio li a {
display:block;
cursor:pointer;
border:1px solid #57bfe6;
position:absolute;
width:99.7%;
height:99.5%;
top:0;
z-index:9;
left:0;
text-decoration:none;
}

.portfolio li a h6 {
background:rgba(3,85,117,0.9);
box-shadow:0 0 40px 30px #003e57 inset;
font-size:66px;
color:#ddf6ff;
text-align:center;
padding-top:100px;
height:163px;
width:99.6%;
}

.portfolio li img {
display:block;
border:3px solid #023d53;
}

.top-right-corner {
background:url('images/about-icons.png') no-repeat -38px -198px;
height:45px;
width:45px;
position:absolute;
top:-10px;
right:-10px;
z-index:10;
}

.bottom-left-corner {
background:url('images/about-icons.png') no-repeat -32px -254px;
height:45px;
width:45px;
position:absolute;
bottom:-10px;
left:-10px;
z-index:10;
} 
```

淡入 h6 标记的​​ jQuery 似乎有问题，我不确定如何为 IE 正确解决此问题：

```
 $(".portfolio li a h6").hide();
  $(".portfolio li a").hover(function(){
    $(this).children("h6").fadeIn();
  });
  $(".portfolio li a").mouseleave(function(){
    $(this).children("h6").fadeOut();
  }); 
```

似乎 IE 没有识别出 .portfolio li a 被悬停在首位，而是认为 .portfolio li 被悬停而不是 .portfolio li a。有没有办法让它正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:27:49.607

试试这个：

```
$(".portfolio li a").hide();
$(".portfolio li").hover(function(){
    $(this).children("a").stop(true, true).fadeIn();
},function() {
    $(this).children("a").stop(true, true).fadeOut();
}); 
```

## [看演示](http://jsfiddle.net/YN2gt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:16:12.973

问题应该与CSS有关，当锚中唯一的元素被隐藏时悬停在它上面没有意义，请注意该`hover`方法应该以这种方式使用：

```
$(".portfolio li").hover(function(){
      $(this).find("h6").fadeIn();
   },function() {
      $(this).find("h6").fadeOut();
}); 
```

# php - 如何将 youtube RTSP 视频嵌入我的网站

> ID：11840966
> 
> 赞同：0
> 
> 时间：2012-08-07T07:12:41.303
> 
> 标签：php, video, youtube, streaming, rtsp

我有一个为黑莓访问者制作的网站，它应该显示 youtube 视频，事实上，因为它是黑莓，我可以通过`m.youtube.com`以下格式获取 youtube 视频

*示例*：

```
rtsp://v8.cache2.c.youtube.com/CiQLENy73wIaGwnUg6yvPB1bKxMYESARFEgGUghzdGFuZGFyZAw=/0/0/0/video.3gp 
```

*我的问题*

如何嵌入此视频链接格式，以便它在我的网站上为我的黑莓访问者工作，而不是单击视频链接！

# php - Firefox 中的 php cookie 不会过期

> ID：11840970
> 
> 赞同：0
> 
> 时间：2012-08-07T07:12:55.083
> 
> 标签：php, session-cookies

我有一个简单的登录设置，我使用 cookie 来存储登录 ID #，并使用此 ID，可以显示用户名和其他信息。

因此，为了注销，我运行以下 php 脚本来注销：

```
<?php
if (isset($_COOKIE['id'])) {
setcookie("id","",1);
}
header("Location: redirectpage.html");
exit;
?> 
```

这基本上使cookie过期。但是，当我到达重定向页面时，该页面具有以下代码：

```
If (isset($_COOKIE['id'])) {
//display "You are logged in already"
} else {
// show login form
} 
```

它说我仍然登录，移动到不同的页面仍然说我已经登录，并且显示 cookie 值给了我一个实际值，这意味着 cookie 没有过期。我一定在这里遗漏了一些东西，但为什么 cookie 没有过期？

注意：我将过期日期从 time()-60 或某个值更改为 1，但这并没有改变任何内容，并且删除 if 语句以在每次 php 代码运行时使 cookie 过期仍然不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:38:35.420

尝试使用 if(!empty($_COOKIE... 因为 isset() 认为要设置空字符串。请参阅此表：[http ://docs.php.net/manual/en/types.comparisons.php](http://docs.php.net/manual/en/types.comparisons.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:06:33.087

确保您尝试使用创建它时使用的相同参数来删除 cookie。来自 php 手册，[http](http://gr2.php.net/setcookie) ://gr2.php.net/setcookie ，在“常见陷阱”下：

> 必须使用与设置相同的参数来删除 Cookie。如果 value 参数是空字符串或 FALSE，并且所有其他参数都与先前对 setcookie 的调用匹配，则将从远程客户端删除具有指定名称的 cookie。这是通过将值设置为“已删除”并将到期时间设置为过去一年来在内部实现的。

# objective-c - 为 C 数组赋值

> ID：11840974
> 
> 赞同：3
> 
> 时间：2012-08-07T07:12:58.963
> 
> 标签：objective-c, c

所以，我可以像这样初始化一个 C 数组：

```
CGFloat colors[8]= {1,0.5,0.5, 1,
    0.5,0.2,0.2, 1}; 
```

如果我想定义`colors[8]`但有条件地分配 8 个值怎么办。这可能吗？如果是，我找不到正确的语法。像这样的东西：

```
CGFloat colors[8];
if (red){
colors= {1,0.5,0.5, 1,
    0.5,0.2,0.2, 1};
}else
 //assign colors to something else 
```

我尝试了各种语法，但没有任何效果。我猜这是不可能的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T07:15:10.467

这是行不通的，因为这种分配方式只允许在数组初始化时使用。你可以做的是：

```
CGFloat colors[8];
if (red){
    CGFloat temp[] = {1,0.5,0.5, 1, 0.5,0.2,0.2, 1};
    memcpy(colors, temp, sizeof(colors));
}
else
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:18:23.287

尝试以下类似的方法，也许......

```
CGFloat colors_red[8] = { 1, 0.5, 0.5, 1, 0.5, 0.2, 0.2, 1};
CGFloat colors_other[8] = ...;
...
const CGFloat *colors = red ? colors_red : colors_other; 
```

如果您需要原始数据的副本（即您计划改变`colors`但重用`colors_red`or `colors_other`），那么您应该使用[`memcpy`](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/)（在 中声明[`<string.h>`](http://www.cplusplus.com/reference/clibrary/cstring)）：

```
CGFloat colors[8];
memcpy(colors, red ? colors_red : colors_other, sizeof colors); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:54:57.323

如果你有最近的 C 编译器，使用 C99，你可以这样做

```
CGFloat *const colors =
 red 
 ? (CGFloat[8]){ 1, 0.5, 0.5, 1, 0.5, 0.2, 0.2, 1}
 : (CGFloat[8]){ /* put other values here */ }; 
```

观察`const`之后，`*`这样你的指针就不会被修改，但你的数据会。如果`red`是一个编译时整数常量，任何体面的编译器都应该能够为此只保留一个数组。

我你也知道数组的元素永远不会改变你可以添加更多`const`

```
CGFloat const*const colors =
 red 
 ? (CGFloat const[8]){ 1, 0.5, 0.5, 1, 0.5, 0.2, 0.2, 1}
 : (CGFloat const[8]){ /* put other values here */ }; 
```

`red`然后一个好的编译器可以（将被允许）静态分配两个数组，从而在不是常量的情况下产生更有效的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T07:18:10.630

你需要做类似的事情

```
if(red) {
    colours[0] = 1;
    colours[1] = 0.5;
    colours[2] = 0.5;
    ...
    colours[7] = 1;
} else {
    ...
} 
```

# java - Java.lang.NoClassDefFoundError - JavaMail

> ID：11840975
> 
> 赞同：5
> 
> 时间：2012-08-07T07:13:00.150
> 
> 标签：java, android

我的主要活动中有一个线程，它将创建一个类的对象`SendMail`

```
package Logic;

import java.util.Date;
import java.util.Properties;

import javax.activation.DataHandler;
import javax.activation.FileDataSource;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

import android.util.Log;

public class SendMail {

String from;
String to;
String subject;
String bodyText;
String fileName;

public SendMail(String to, String fileName, String PCN) {

    this.to = to;
    this.fileName = fileName;
    this.from = "Hello@gmail.com";
    this.bodyText = "FILE";
    this.subject = PCN;
}

public void sendMailWithAttatchment() {

    Properties properties = new Properties();
    properties.put("mail.smtp.host", "IP_ADDRESS");
    properties.put("mail.smtp.port", "25");
    Session session = Session.getDefaultInstance(properties, null);

    MimeMessage message = new MimeMessage(session);

    try {

        message.setFrom(new InternetAddress(from));

        message.setRecipient(Message.RecipientType.TO, new InternetAddress(
                to));
        message.setSubject(subject);
        message.setSentDate(new Date());

        MimeBodyPart messagePart = new MimeBodyPart();
        messagePart.setText(bodyText);

        MimeBodyPart attachmentPart = new MimeBodyPart();

        FileDataSource fileDataSource = new FileDataSource(fileName) {
            @Override
            public String getContentType() {
                return "application/octet-stream";

            }
        };

        attachmentPart.setDataHandler(new DataHandler(fileDataSource));
        attachmentPart.setFileName(fileDataSource.getName());

        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messagePart);
        multipart.addBodyPart(attachmentPart);
        message.setContent(multipart);
        Transport.send(message);
    } catch (AddressException e) {
        Log.e("ADDRESS_EXCEPTION: ", e.getMessage());
    } catch (MessagingException e) {
        Log.e("MESSAGING_EXCEPTION: ", e.getMessage());
    }
} 
```

}

但是编译器抛出一个异常说：`Java.lang.NoClassDefFoundError. javax.activation.Datahandler`

我读过这个帖子：[NoClassDefFoundError - Eclipse and Android](https://stackoverflow.com/questions/2247998/noclassdeffounderror-eclipse-and-android)和`.jar files` `javamail.jar`and`javax.activation.jar`位于我的`libs`文件夹下，但即使我清理项目也会引发异常。

有任何想法吗？

这些是抛出的异常：

```
08-07 10:19:49.870: E/AndroidRuntime(17736): java.lang.NoClassDefFoundError: javax.activation.DataHandler
08-07 10:19:49.870: E/AndroidRuntime(17736):    at javax.mail.internet.MimeBodyPart.setContent(MimeBodyPart.java:647)
08-07 10:19:49.870: E/AndroidRuntime(17736):    at javax.mail.internet.MimeBodyPart.setText(MimeBodyPart.java:892)
08-07 10:19:49.870: E/AndroidRuntime(17736):    at javax.mail.internet.MimeBodyPart.setText(MimeBodyPart.java:680)
08-07 10:19:49.870: E/AndroidRuntime(17736):    at javax.mail.internet.MimeBodyPart.setText(MimeBodyPart.java:668)
08-07 10:19:49.870: E/AndroidRuntime(17736):    at sendMailWithAttatchment(SendMail.java:56)
08-07 10:19:49.870: E/AndroidRuntime(17736):    at sendMailWithAttatchment(SendMail.java:56)
08-07 10:19:49.870: E/AndroidRuntime(17736):    at CreateNistFile(MyActivity.java:530) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-15T08:18:14.203

java为android引入javaMail的新方法：

您只需在 gradle 中添加 thi 行：

```
 android {
     packagingOptions {
         pickFirst 'META-INF/LICENSE.txt' // picks the JavaMail license file
     }
 }

 repositories { 
     jcenter()
     maven {
         url "https://maven.java.net/content/groups/public/"
     }
 }

 dependencies {
     compile 'com.sun.mail:android-mail:1.5.5'
     compile 'com.sun.mail:android-activation:1.5.5'
 } 
```

并像您一样发送 smtp 邮件...祝您好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:16:47.810

是的，这是因为您的 .jar 文件没有正确导入。只需按照我现有的[答案](https://stackoverflow.com/a/11824038/940096)它肯定会帮助你。而且，下面的快照很重要（它通知其他 jar 文件应该看起来像这个图像） -

![图片](../Images/c0ae3b4e8e26d0d580f816edc23be802.png)

重要的是，只要您`Java.lang.NoClassDefFoundError`有一个以上的例外，就是处理该问题的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:16:54.877

如果您使用的是 Eclipse，请右键单击项目 > 选择属性 > Java 构建路径 > 库 > 添加罐子并添加罐子。然后清理项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T08:31:55.057

Android 不完全兼容 Java，有一个 javamail-android 项目，它为 Android 应用程序添加了对 Javamail 的支持。

确保从这里下载并添加**所有 3 个 jar**的构建路径：[http ://code.google.com/p/javamail-android/downloads/list](http://code.google.com/p/javamail-android/downloads/list)

# c# - update datagridview cell style

> ID：11840976
> 
> 赞同：0
> 
> 时间：2012-08-07T07:13:13.830
> 
> 标签：c#, datagridview, styles, refresh

I am trying to allow the user to change the color of the datagrid displayed in my app.

for this I use user settings and colordialog boxes.

problem is, when I try to update the color, it isnt displayed, and I either have to close/reopen the app to see the changes, or load a completly different DGV (they are in a tabcontrol).

here is the code I use at the update:

```
AlternatingRowsDefaultCellStyle.BackColor = Properties.Settings.Default.CellBackColor1; 
```

am I missing something?

I tried to refresh the DGV, but it doesnt change a thing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:54:56.733

I added a `Button` to a form that opens up a `ColorDialog` and waits for the users to select a color. If the user hits the OK button, it first saves the setting and then sets the dataGridView.CellStyle.BackColor to whatever color the user selects. This forces an immediate update of the form with the correct background color.

```
private void button1_Click(object sender, EventArgs e)
{
    if (colorDialog1.ShowDialog() == DialogResult.OK)
    {
        Properties.Settings.Default.CellBackColor1 = colorDialog1.Color;
        dataGridView1.AlternatingRowsDefaultCellStyle.BackColor = colorDialog1.Color;
    } 
} 
```

I assume your `Form.Load` and `Form.FormClosing` events handle the saving of the settings.

# android - 将 Map Activity 嵌入到 Android 的另一个 Activity 中

> ID：11840977
> 
> 赞同：0
> 
> 时间：2012-08-07T07:13:15.313
> 
> 标签：android, google-maps, android-activity, mapactivity

我想让谷歌地图在另一个活动中可见，也就是说，它不会占据整个屏幕。是否可以在另一个活动中嵌入谷歌地图地图活动，这样，比如说，它需要一半或 3/4 的屏幕吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:14:52.397

试试这个：

[http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

您可以将 MapView 用作任何其他视图 - 任意位置和大小。

如果您想将 MapView 放入 ScrollView，这是确保其正常工作的好解决方案：[MapView inside a ScrollView?](https://stackoverflow.com/questions/6546108/mapview-inside-a-scrollview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:15:20.820

您可以在布局和代码中包含 MapView 以及`MapActivity`您想要的部分。

为什么要在另一个活动中使用它？

# xml - xml中是否允许使用字符#或&？

> ID：11840981
> 
> 赞同：13
> 
> 时间：2012-08-07T07:14:01.730
> 
> 标签：xml, ampersand

我的 xml 中有特殊字符编码为 ascii 的值。例如 ：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <name>&#381;irm&#363;n&#371;</name>
</response> 
```

但是当我解析值时，`name`我只得到`&`值。是否允许使用`#`或`&`在 xml 中？或者我必须使用 cdata 吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T07:17:37.030

& 字符似乎是非法的，请改用（下面）。

```
&amp; 
```

[XML 中的无效字符](https://stackoverflow.com/questions/730133/invalid-characters-in-xml)

# 字符应该没问题。

这也可能有用：http: [//xml.silmaril.ie/specials.html](http://xml.silmaril.ie/specials.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T07:20:16.467

**&**需要转义，因为它用于转义自身。所有转义都以**&** ( `&quot;`, `&lt;`, `&gt;`) 开头。

**`&amp;`**是**&的逃避**

# javascript - 在jQuery中打开一个元素时如何关闭其他打开的元素？

> ID：11840983
> 
> 赞同：3
> 
> 时间：2012-08-07T07:14:06.753
> 
> 标签：javascript, jquery, element, slidetoggle, toggleclass

我知道。标题有点……难以理解。我会看看我能做些什么来帮助你理解它。

基本上，我为我的个人网站所做的是将主导航作为网页的主体。当点击链接时，它会加载一些隐藏的内容，如下所示：

```
 $(document).ready(function(){
    $('li a#about-toggle').click(function(){
        $('li#about').animate({"height": "toggle", "opacity": "toggle"}, "slow").toggleClass("hidden"); 
    });
    $('li a#portfolio-toggle').click(function(){
        $('li#portfolio').animate({"height": "toggle", "opacity": "toggle"}, "slow").toggleClass("hidden"); 
    });
    $('li a#resume-toggle').click(function(){
        $('li#resume').animate({"height": "toggle", "opacity": "toggle"}, "slow").toggleClass("hidden"); 
    });
    $('li a#contact-toggle').click(function(){
        $('li#contactme').animate({"height": "toggle", "opacity": "toggle"}, "slow").toggleClass("hidden"); 
    });
}); 
```

这目前允许网站的访问者打开所有元素，这不仅在视觉上令人不快，而且会产生一些错误，但主要是在视觉上令人不快。

我的问题是，在我尽可能保持完整的代码的情况下，我将如何制作它，以便他们一次只能打开一个？

在此先感谢，雅各布

编辑：

```
 $(document).ready(function(){
    $('#about-toggle').click(function(){
        $("li.active").addClass("hidden");
        $('#about').animate({"height": "toggle", "opacity": "toggle"}, "slow").removeClass("hidden").addClass("active");
    });
    $('#portfolio-toggle').click(function(){
        $("li.active").addClass("hidden");
        $('#portfolio').animate({"height": "toggle", "opacity": "toggle"}, "slow").removeClass("hidden").addClass("active");
    });
    $('#resume-toggle').click(function(){
         $("li.active").addClass("hidden");
        $('#resume').animate({"height": "toggle", "opacity": "toggle"}, "slow").removeClass("hidden").addClass("active");
    });
    $('#contact-toggle').click(function(){
        $("li.active").addClass("hidden");
        $('li#contactme').animate({"height": "toggle", "opacity": "toggle"}, "slow").removeClass("hidden").addClass("active");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:16:44.220

在所有要关闭的元素上放置一个通用类。将它们全部关闭，除了您单击的那个，然后打开您单击的那个。当您再次关闭它们时，已经关闭的那些将不会执行任何操作。

假设您将类添加`togglers`到每个类，那么您可以这样做并将您的 jQuery 缩短为所有元素的一个块：

```
$(document).ready(function(){
    $('#about-toggle, #portfolio-toggle, #resume-toggle, #contact-toggle').click(function(){
        // get the clicked on id and convert it to shortened form
        var id = this.id.replace(/\-.*$/, "");
        var item = $("#" + id);
        // toggle others that are open and toggle the current one
        $(".togglers").not(".hidden").add(item).animate({"height": "toggle", "opacity": "toggle"}, "slow").toggleClass("hidden"); 
    });
}); 
```

或者，如果您不将通用类放在它们身上，那么您只需将它们全部列出：

```
$(document).ready(function(){
    $('#about-toggle, #portfolio-toggle, #resume-toggle, #contact-toggle').click(function(){
        // get the clicked on id and convert it to shortened form
        var id = this.id.replace(/\-.*$/, "");
        var item = $("#" + id);
        // toggle others that are open and toggle the current one
        $('#about, #portfolio, #resume, #contact').not(".hidden").add(item).animate({"height": "toggle", "opacity": "toggle"}, "slow").toggleClass("hidden"); 
    });
}); 
```

此实现假定`.hidden`该类应用于任何切换为关闭并从任何打开的项目中删除的项目，并且初始 HTML 状态必须与之匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:17:27.610

在“单击”时，首先隐藏所有元素（例如 $('li').hide(); ），然后显示您想要显示的元素。

# php - 请求用户权限不起作用facebook graph api

> ID：11840990
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:14:36.050
> 
> 标签：php, facebook, codeigniter, facebook-graph-api

嗨，我正在使用 facebook graph api PHP SDK。在这里，我试图获取登录用户的 facebook 详细信息，目前我只获取不需要任何权限的基本详细信息。

```
Array
(
    [id] => xxxxxxxxx
    [name] => Kanishka Bandara Panamaldeniya
    [first_name] => Kanishka
    [middle_name] => Bandara
    [last_name] => Panamaldeniya
    [link] => http://www.facebook.com/kanishka.panamaldeniya
    [username] => kanishka.panamaldeniya
    [hometown] => Array
        (
            [id] => 108014839219027
            [name] => Kandy
        )

    [location] => Array
        (
            [id] => 108602292505393
            [name] => Colombo, Sri Lanka
        )

    [quotes] => every action has a reaction....
    [work] => Array
        (
            [0] => Array
                (
                    [employer] => Array
                        (
                            [id] => 234117399957729
                            [name] => Cyber LMJ
                        )

                    [location] => Array
                        (
                            [id] => 108602292505393
                            [name] => Colombo, Sri Lanka
                        )

                    [position] => Array
                        (
                            [id] => 109542932398298
                            [name] => Software Engineer
                        )

                    [start_date] => 2011-08
                )

            [1] => Array
                (
                    [employer] => Array
                        (
                            [id] => 235852306375
                            [name] => eMarketingEye
                        )

                    [position] => Array
                        (
                            [id] => 109542932398298
                            [name] => Software Engineer
                        )

                    [start_date] => 2010-09
                    [end_date] => 2011-08
                )

        )

    [sports] => Array
        (
            [0] => Array
                (
                    [id] => 103992339636529
                    [name] => Cricket
                )

        )

    [favorite_teams] => Array
        (
            [0] => Array
                (
                    [id] => 191485640872790
                    [name] => Sri Lanka Cricket Team
                )

        )

    [favorite_athletes] => Array
        (
            [0] => Array
                (
                    [id] => 185101794860886
                    [name] => Kumara Sangakkara
                )

            [1] => Array
                (
                    [id] => 119473804782315
                    [name] => Angelo Mathews
                )

            [2] => Array
                (
                    [id] => 164574093575397
                    [name] => Kumar Sangakkara
                )

            [3] => Array
                (
                    [id] => 169411436417102
                    [name] => Virat Kohli
                )

            [4] => Array
                (
                    [id] => 166273026737204
                    [name] => Lahiru Thirimanne
                )

            [5] => Array
                (
                    [id] => 101237886616765
                    [name] => Dinesh Chandimal
                )

        )

    [education] => Array
        (
            [0] => Array
                (
                    [school] => Array
                        (
                            [id] => 34663330581
                            [name] => Dharmaraja College-Kandy
                        )

                    [year] => Array
                        (
                            [id] => 138383069535219
                            [name] => 2005
                        )

                    [type] => High School
                )

            [1] => Array
                (
                    [school] => Array
                        (
                            [id] => 112872282058324
                            [name] => University of Colombo School of Computing
                        )

                    [year] => Array
                        (
                            [id] => 140617569303679
                            [name] => 2007
                        )

                    [type] => College
                )

            [2] => Array
                (
                    [school] => Array
                        (
                            [id] => 107577089271805
                            [name] => University of Colombo
                        )

                    [type] => Graduate School
                    [with] => Array
                        (
                            [0] => Array
                                (
                                    [id] => 705760115
                                    [name] => Lasitha Benaragama
                                )

                        )

                )

        )

    [gender] => male
    [timezone] => 5.5
    [locale] => en_US
    [languages] => Array
        (
            [0] => Array
                (
                    [id] => 104023029632921
                    [name] => Sinhala
                )

            [1] => Array
                (
                    [id] => 106059522759137
                    [name] => English
                )

        )

    [verified] => 1
    [updated_time] => 2012-07-29T16:34:22+0000
) 
```

现在我想获得领域

```
*email 
*birth day 
```

和其他一些权限请求字段。

所以我在做

```
 $this->co_config_items = $this->ci->config->item('connections_config');
    $fbconfig = array(
    'appId' => $this->co_config_items['fb_appid'],
    'secret' => $this->co_config_items['fb_secret'],
    'cookie' => true,
    'domain' => $this->ci->config->item('domain')
    );

    $this->ci->load->library('3rd/connectors/facebook', $fbconfig);

    $facebook = new Facebook($fbconfig);
    Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false;
    Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYHOST] = 2;

    $session = $facebook->getSession();

    $url = $facebook->getLoginUrl(array(
                   'canvas' => 1,
                   'fbconnect' => 0,
                   'scope' => 'read_stream,friends_likes,user_birthday'
    ));     

    if(!$session){
        $url = $facebook->getLoginUrl(array(
                   'canvas' => 1,
                   'fbconnect' => 0,
                   'scope' => 'read_stream,friends_likes,user_birthday'

                  ));

        echo "<script type='text/javascript'>window.location = '$url';</script>";
    }
    else{
        //echo "<script type='text/javascript'>window.opener.location.href='" . base_url() . "home/auth/get_user_facebook_details_list" . "'; self.close();
        //</script>";
        try {

            $me = $facebook->api('/me');

            $this->ci->session->set_flashdata ( 'user_details',$me);
            $url=base_url()."home/auth/user_contact_information";               
            echo "<script type='text/javascript'>window.opener.location.href = '$url';self.close();</script>";

        } catch (FacebookApiException $e) {
            $this->ci->message->set_error(array('An errror occured , please try again'));
        }
    } 
```

我正在尝试通过

```
 $url = $facebook->getLoginUrl(array(
                       'canvas' => 1,
                       'fbconnect' => 0,
                       'scope' => 'read_stream,friends_likes,user_birthday'
)): 
```

**但它不要求任何许可，默认数组总是打印**。这是为什么 。请帮忙 。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:39:34.100

尝试这样做：

```
$url = $facebook->getLoginUrl(array('scope' => 'read_stream,friends_likes,user_birthday')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:04:48.270

我使用的是 PHP sdk 的第 2 版，现在我使用的是第 3 版，现在可以使用了，非常感谢。我在这个函数中看到了两个版本的一些变化

第 2 版

```
 public function getLoginUrl($params=array()) {
        $currentUrl = $this->getCurrentUrl();
        return $this->getUrl(
                'www',
                'login.php',
                array_merge(array(
                    'api_key' => $this->getAppId(),
                    'cancel_url' => $currentUrl,
                    'display' => 'page',
                    'fbconnect' => 1,
                    'next' => $currentUrl,
                    'return_session' => 1,
                    'session_version' => 3,
                    'v' => '1.0',
                        ), $params)
        );
    } 
```

第 3 版

```
 public function getLoginUrl($params=array()) {
    $this->establishCSRFTokenState();
    $currentUrl = $this->getCurrentUrl();

    // if 'scope' is passed as an array, convert to comma separated list
    $scopeParams = isset($params['scope']) ? $params['scope'] : null;
    if ($scopeParams && is_array($scopeParams)) {
      $params['scope'] = implode(',', $scopeParams);
    }

    return $this->getUrl(
      'www',
      'dialog/oauth',
      array_merge(array(
                    'client_id' => $this->getAppId(),
                    'redirect_uri' => $currentUrl, // possibly overwritten
                    'state' => $this->state),
                  $params));
  } 
```

在第 3 版中，我可以看到这个附加代码

```
// if 'scope' is passed as an array, convert to comma separated list
    $scopeParams = isset($params['scope']) ? $params['scope'] : null;
    if ($scopeParams && is_array($scopeParams)) {
      $params['scope'] = implode(',', $scopeParams);
    } 
```

在第 2 版中，没有什么叫作用域。而且

在版本 2

```
return $this->getUrl(
                    'www',
                    'login.php', 
```

在版本 3

```
return $this->getUrl(
          'www',
          'dialog/oauth', 
```

# c# - WPF 导航器控件 - 如果源等于？

> ID：11840992
> 
> 赞同：1
> 
> 时间：2012-08-07T07:14:44.050
> 
> 标签：c#, .net, wpf, wpf-controls

我有一个 WPF 导航器控件，我正在尝试执行以下操作，以便在转到剪贴板之前清理 URL：

```
if (webBrowserWorkflows.Source = "http://testinglink.com")
{
     // do stuff
} 
```

不幸的是，当我尝试这样做时，Visual Studio 告诉我：“无法将源类型字符串转换为 System.URI”。

考虑到这一点，我尝试过：

```
if (webBrowserWorkflows.Source.ToString = "http://testinglink.com")
{
     // do stuff
} 
```

但是我没有成功。我敢肯定，您可以告诉我我对 C# 还很陌生——这对我来说是一个试验场，因此您可以提供任何文档以帮助我理解该答案，我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:25:31.343

您需要创建一个新的 URI 对象，您可以将您的 URL 传递给构造函数，这应该可以：

```
using System;

...

URI myUri = new URI("http://testinglink.com"); 

webBrowserWorkFlows.Source = myUri;
//OR    
webBrowserWorkFlows.Navigate(myUri);
...

if (webBrowserWorkflows.Source == myUri)
{
    // do stuff
} 
```

[http://msdn.microsoft.com/en-us/library/system.uri.aspx](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx)

# java - ExternalContext 的 Request 对象上的 getQueryString 在 WebSphere 上返回 null

> ID：11840995
> 
> 赞同：0
> 
> 时间：2012-08-07T07:14:48.963
> 
> 标签：java, jsf, websphere, query-string

我在 WebSphere 上使用 JSF 1.1 (MyFaces 1.1.8) 时遇到问题。在 Tomcat 5.5 上部署我的应用程序时，此行为不适用，一切正常。

当我尝试从 Ogone（支付网关）发回的 URL 读取参数，再次加入我的 JSF 会话（会话仍然存在）时，QueryString 无法通过

```
final HttpServletRequest request = (HttpServletRequest)FacesContext
.getCurrentInstance().getExternalContext().getRequest();

String qs = request.getQueryString(); // null on WebSphere, filled on Tomcat 
```

为了更完整一点，查询字符串看起来像这样：

```
http://100.100.100.100:9080/my_app_context/pages/screen7.jsf?orderID=4208013442596271&currency=EUR&amount=60&PM=iDEAL&ACCEPTANCE=0000000000&STATUS=9&CARDNO=11-XXXX-11&ED=&CN=K%C3%A9m+Birdy&TRXDATE=08%2F06%2F12&PAYID=15879916&NCERROR=0&BRAND=iDEAL&COMPLUS=personID%3D01%26subscriptionID%3D02&IP=100.100.100.100&SHASIGN=9642468EE016BD49787B62EA7231124B3C24F9BBFC5B3B3B4D9E97D678979E57E5EED9B47D611441A6FCA2EB1D2DB87348C8111ACFF366A4E244106CCCFAFDA5 
```

我正在考虑一些可能会阻止容器正确处理外部请求的 WebSphere webcontainer 设置。或者这里可能存在一些类加载问题，但我无法追踪它。

WebSphere 上的堆栈跟踪是这样的：

```
12-08-07 08:02:26 ERROR - 
java.lang.NullPointerException
at ... own code trying to getQueryString()...
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:618)
at org.apache.myfaces.el.PropertyResolverImpl.getProperty(PropertyResolverImpl.java:459)
at org.apache.myfaces.el.PropertyResolverImpl.getValue(PropertyResolverImpl.java:85)
at org.apache.myfaces.custom.security.SecurityContextPropertyResolver.getValue(SecurityContextPropertyResolver.java:101)
at org.apache.myfaces.el.ELParserHelper$MyPropertySuffix.evaluate(ELParserHelper.java:539)
at org.apache.commons.el.ComplexValue.evaluate(ComplexValue.java:145)
at org.apache.myfaces.el.ValueBindingImpl.getValue(ValueBindingImpl.java:386)
at javax.faces.component.UIOutput.getValue(UIOutput.java:118)
at org.apache.myfaces.shared_impl.renderkit.RendererUtils.getValue(RendererUtils.java:267)
at org.apache.myfaces.shared_impl.renderkit.RendererUtils.getStringValue(RendererUtils.java:226)
at org.apache.myfaces.shared_impl.renderkit.html.HtmlTextRendererBase.renderOutput(HtmlTextRendererBase.java:69)
at org.apache.myfaces.shared_impl.renderkit.html.HtmlTextRendererBase.encodeEnd(HtmlTextRendererBase.java:57)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:799)
at javax.faces.webapp.UIComponentTag.encodeEnd(UIComponentTag.java:678)
at javax.faces.webapp.UIComponentTag.doEndTag(UIComponentTag.java:546)
at com.ibm._jsp._aanmeldScherm7._jspx_meth_h_outputText_1(_aanmeldScherm7.java:204)
at com.ibm._jsp._aanmeldScherm7._jspx_meth_f_subview_0(_aanmeldScherm7.java:1870)
at com.ibm._jsp._aanmeldScherm7._jspService(_aanmeldScherm7.java:85)
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:88)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1213)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1154)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:118)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:848)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:691)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:654)
at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:526)
at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:248)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:648)
at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:1042)
at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:484)
at org.apache.struts.tiles.TilesUtilImpl.doInclude(TilesUtilImpl.java:99)
at org.apache.struts.tiles.TilesUtil.doInclude(TilesUtil.java:135)
at org.apache.struts.taglib.tiles.InsertTag.doInclude(InsertTag.java:760)
at org.apache.struts.taglib.tiles.InsertTag$InsertHandler.doEndTag(InsertTag.java:892)
at org.apache.struts.taglib.tiles.InsertTag.doEndTag(InsertTag.java:462)
at com.ibm._jsp._defaultLayout2._jspx_meth_tiles_insert_2(_defaultLayout2.java:392)
at com.ibm._jsp._defaultLayout2._jspx_meth_h_form_0(_defaultLayout2.java:597)
at com.ibm._jsp._defaultLayout2._jspx_meth_f_view_0(_defaultLayout2.java:715)
at com.ibm._jsp._defaultLayout2._jspService(_defaultLayout2.java:92)
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:88)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1213)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1154)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:118)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:848)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:691)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:654)
at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:526)
at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:248)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:325)
at org.apache.myfaces.context.servlet.ServletExternalContextImpl.dispatch(ServletExternalContextImpl.java:426)
at org.apache.myfaces.tomahawk.application.jsp.JspTilesViewHandlerImpl.dispatch(JspTilesViewHandlerImpl.java:236)
at org.apache.myfaces.tomahawk.application.jsp.JspTilesViewHandlerImpl.renderView(JspTilesViewHandlerImpl.java:222)
at org.ajax4jsf.framework.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:101)
at org.ajax4jsf.framework.ajax.AjaxViewHandler.renderView(AjaxViewHandler.java:221)
at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:41)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:146)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:147)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1213)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1154)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:145)
at org.ajax4jsf.framework.ajax.xmlfilter.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:75)
at org.ajax4jsf.framework.ajax.xmlfilter.BaseFilter.doFilter(BaseFilter.java:213)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:301)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:848)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:691)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:654)
at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:526)
at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:90)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:764)
at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:133)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:457)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:515)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:300)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:271)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1560) 
```

如果有人能指出我正确的方向，请。

WebSphere 版本是 6.1.0.43。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:49:41.137

好的，这对其他人可能会派上用场。

深入研究 WebSphere Application Server 的自定义 Web 容器属性，我遇到了这个：

> 使查询字符串可用于欢迎文件 [Fix Pack 25 或更高版本]
> 
> 通常，当请求最初发送到应用程序的上下文根时，请求会被转发到欢迎文件。如果查询字符串包含在初始请求中，那么如果您在欢迎文件中包含 request.getQueryString() 属性，则它对欢迎文件不可用。但是，如果您在欢迎文件中包含 javax.servlet.forward.query_string 属性，则欢迎文件可以使用查询字符串。
> 
> 如果您需要使用 request.getQueryString() 属性而不是 javax.servlet.forward.query_string 属性来使查询字符串可用于欢迎文件，请将 com.ibm.ws.webcontainer.provideQStringToWelcomeFile 定制属性添加到您的 Web 容器配置并将该属性设置为 true。此属性的默认值为 false。名称 值 com.ibm.ws.webcontainer.provideQStringToWelcomeFile true

对于 WebSphere 6.1，可以在此处找到这些自定义属性：[http ://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.base.doc%2Finfo%2Faes% 2Fae%2Frweb_custom_props.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.base.doc%2Finfo%2Faes%2Fae%2Frweb_custom_props.html)

线索是，一旦转发请求，查询字符串本身就会从 Request 对象中剥离出来，为“内部”查询字符串留出空间。初始查询字符串仍然可用

request.getAttribute("javax.servlet.forward.query_string");

有点棘手，但我们的代码现在很健壮，能够在 WebSphere 和其他 servlet 容器中运行，以及管理由 Ogone 发送的 UTF-8 和 ISO-8859-1 编码的查询字符串参数。

感谢收听。

# extjs - 刷新后网格选择丢失

> ID：11840997
> 
> 赞同：1
> 
> 时间：2012-08-07T07:14:52.833
> 
> 标签：extjs, grid, refresh, selection

在 extjs 我有一个网格。此网格每 ** 秒刷新一次。为了保持网格选择，我使用了这个：

```
 Ext.define('PersistantSelectionGridPanel', {
    extend: 'Ext.grid.Panel',
    selectedRecords: [],
    initComponent: function () {
        this.callParent(arguments);

        this.getStore().on('beforeload', this.rememberSelection, this);
        this.getView().on('refresh', this.refreshSelection, this);
    },
    rememberSelection: function (selModel, selectedRecords) {
        if (!this.rendered || Ext.isEmpty(this.el)) {
            return;
        }

        this.selectedRecords = this.getSelectionModel().getSelection();
        this.getView().saveScrollState();
    },
    refreshSelection: function () {
        if (0 >= this.selectedRecords.length) {
            return;
        }

        var newRecordsToSelect = [];
        for (var i = 0; i < this.selectedRecords.length; i++) {
            record = this.getStore().getById(this.selectedRecords[i].getId());
            if (!Ext.isEmpty(record)) {
                newRecordsToSelect.push(record);
            }
        }

        this.getSelectionModel().select(newRecordsToSelect);
        Ext.defer(this.setScrollTop, 30, this, [this.getView().scrollState.top]);
    }
}); 
```

但这在一个网格中不起作用，我不知道为什么。这是刷新功能：

```
refreshSeconds = refreshRate * 1000;
refreshData = {
    run: function () {
        NL.store.load();
    },
    interval: refreshSeconds
}
Ext.TaskManager.start(refreshData) 
```

这是网格（没有列）

```
 var grid = Ext.create('PersistantSelectionGridPanel', {
   autoscroll: true,
    region: 'center',
    store: NL.store,
    multiSelect: false,
    stateful: true,
    loadMask: false,
    stateId: 'stateGridEvents',
    viewConfig: {
        stripeRows: true
    },
    columns: [{ 
```

但是当商店重新加载时，选择会丢失。我需要改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:01:42.360

要获取选定的记录，请使用

```
grid.getSelectionModel().getSelections(); 
```

在您的代码中，getSelections() 中缺少“s”。您可能会因此遇到脚本错误。

我认为您的代码应修改为以下行，

```
Your code::     this.getView().on('refresh', this.refreshSelection, this);
Modified code:  this.getStore().on('afterload', this.refreshSelection, this); 
```

以便在加载数据后选择记录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T16:48:19.940

我会先尝试使用标准功能：

```
Ext.define('PersistentSelectionGridPanel', {
    extend: 'Ext.grid.Panel',

    viewConfig: {
        preserveScrollOnRefresh: true
    },

    ...
}); 
```

# jquery - 不知道如何使用 Fancybox 播放 Youtube 播放列表

> ID：11840999
> 
> 赞同：0
> 
> 时间：2012-08-07T07:14:53.147
> 
> 标签：jquery, fancybox

是否可以使用 FancyBox 显示一系列 Youtube 视频（使用在 url 末尾定义的 Youtube 播放列表）。我问的原因是 FancyBox 只获取实际的视频位置，所以如果在 Youtube 网址之后有任何参数说，[http://www.youtube.com/watch?](http://www.youtube.com/watch?v=Wmhfn3mgWUI&feature=bf_prev&list=ULBn59FJ4HrmU) v=Wmhfn3mgWUI&feature=bf_prev&list=ULBn59FJ4HrmU它只会显示该列表中的第一个视频，或者更确切地说是[http://www.youtube.com/watch?v=Wmhfn3mgWUI](http://www.youtube.com/watch?v=Wmhfn3mgWUI)。有什么想法吗？这就是我为 JQuery 所拥有的：

```
<script type="text/javascript"> $(document).ready(function() {
    $('.fancybox-media').fancybox({
        openEffect  : 'none',
        closeEffect : 'none',
                type : 'swf',
        helpers : {
            media : {}
        }
    });
});
</script> 
```

这就是我所说的：

```
<a class="fancybox-media" href="http://www.youtube.com/watch?v=Wmhfn3mgWUI&amp;feature=bf_prev&amp;list=ULBn59FJ4HrmU">clicking here</a>.</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:32:09.553

请阅读[以下问题](https://stackoverflow.com/questions/2542252/open-youtube-video-in-fancybox-jquery?rq=1)，之前已经提出过问题，并与附加资源的链接一起进行了深入解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:21:49.603

使用 iframed 播放列表创建简单的 html 页面（您可以在[此处](http://www.youtube.com/playlist?list=UUHzIO0agtCQEsTxUcahZgjQ&feature=plcp)单击“共享”按钮获取代码）。

然后，将 fancybox 设置为 iframe 类型（或 ajax，两者都应该工作）链接到您的新页面。