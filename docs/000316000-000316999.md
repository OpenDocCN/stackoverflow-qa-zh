# StackOverflow 问答 000316000-000316999

# .net - 使一个流的输出成为另一个流的输入的最佳方法是什么

> ID：316007
> 
> 赞同：5
> 
> 时间：2008-11-25T00:38:49.273
> 
> 标签：.net, iostream

我想知道除了使用字节缓冲区和循环之外，是否有更好的/内置方式从一个流中读取并将其写入另一个流（在.NET 中）。通常这样做是为了对流应用变换并继续移动它。

在这种情况下，我正在加载文件，将其放入 deflate 流并将其写入文件（为简单起见，删除了错误处理）：

```
byte[] buffer = new byte[10000000];
using (FileStream fsin = new FileStream(filename, FileMode.Open))
{
    using (FileStream fsout = new FileStream(zipfilename, FileMode.CreateNew))
    {
        using (DeflateStream ds = new DeflateStream(fsout, CompressionMode.Compress))
        {
            int read = 0;
            do
            {
                read = fsin.Read(buffer, 0, buffer.Length);
                ds.Write(buffer, 0, read);
            }
            while (read > 0);
        }
    }
}
buffer = null; 
```

**编辑：**

.NET 4.0 现在有一个 Stream.CopyTo 函数，哈利路亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T00:50:02.120

没有比这更好的方法了，尽管我倾向于将循环部分放入`CopyTo`扩展方法中，例如

```
public static void CopyTo(this Stream source, Stream destination)
{
    var buffer = new byte[0x1000];
    int bytesInBuffer;
    while ((bytesInBuffer = source.Read(buffer, 0, buffer.Length)) > 0)
    {
        destination.Write(buffer, 0, bytesInBuffer);
    }
} 
```

然后您可以将其称为：

```
fsin.CopyTo(ds); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-07-06T11:37:31.653

.NET 4.0 现在有一个[Stream.CopyTo](http://msdn.microsoft.com/en-us/library/dd782932.aspx?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.IO.STREAM.COPYTO%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK&k=VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T00:46:46.090

现在我想起来了，我还没有看到任何内置支持将输入流的结果直接通过管道传输到您所描述的输出流中。[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/magazine/cc163290.aspx)有一些“StreamPipeline”类的代码，可以完成您所描述的事情。

# sql-server-2005 - Sql Import 向导将 1022868890 导入为 1.02287e+009

> ID：316008
> 
> 赞同：1
> 
> 时间：2008-11-25T00:40:08.083
> 
> 标签：sql-server-2005, excel, sql-import-wizard

我正在尝试将一些数据从 Excel 导入 SQL Server，我有一个包含一些数字的 TEXT 列，其中一些数字很好，有些变成了科学形式。

Excel 中的列是“文本”类型，目标 sql 表中的列是 varchar(255)

这里有些例子：

的Excel [文本] - > SQL服务器[VARCHAR（255）]
0313852230 - > 0313852230
1024869004 - > 1024869004
1022868890 - > 1.02287e + 009
1022868899 - > 1.02287e + 009
1022868907 - > 1022868907
1030869319 - > 1030869319
1106869726 - > 1106869726
SomeText - > 一些文本

请帮忙！

**解决方案：将列格式化为带有 10 个前导零的 [Number] 对我有用，因为我的所有数字都是 10 位数字**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-25T01:03:10.643

您确定 Excel 列都是文本而 SQL 列是 VARCHAR？

我知道 SQL 以指数形式导入浮点列（这是正确的浮点表示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T01:33:55.213

导入 Access 时，我发现唯一可用于直接导入此类数字的列类型是 Zip（格式->单元格->特殊->邮政编码）。SQL Server 也可能如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-07T03:25:42.450

解决方案：将列格式化为带有 10 个前导零的 [Number] 对我有用，因为我的所有数字都是 10 位数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-08T11:17:25.427

另一个提示，我更喜欢使用 SQL Server 2000 工具“导入和导出数据”或“DTS 导入/导出向导”

与 SQL Server 2005 导入工具相比，这一方法不那么严格。我经常可以将数据导入到我的数据库中。

# c# - C#获取给定路径的文件夹深度的最佳方法？

> ID：316009
> 
> 赞同：12
> 
> 时间：2008-11-25T00:40:53.777
> 
> 标签：c#, .net, directory

我正在做一些需要遍历文件系统的事情，对于任何给定的路径，我需要知道我在文件夹结构中的“深度”。这是我目前正在使用的：

```
int folderDepth = 0;
string tmpPath = startPath;

while (Directory.GetParent(tmpPath) != null) 
{
    folderDepth++;
    tmpPath = Directory.GetParent(tmpPath).FullName;
}
return folderDepth; 
```

这行得通，但我怀疑有更好/更快的方法吗？非常有义务提供任何反馈。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-25T00:44:01.837

在我的头顶上：

```
Directory.GetFullPath().Split("\\").Length; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-12T15:29:37.563

我已经迟到了，但我想指出 Paul Sonier 的回答可能是最短的，但应该是：

```
 Path.GetFullPath(tmpPath).Split(Path.DirectorySeparatorChar).Length; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-25T05:38:22.193

我一直是递归解决方案的粉丝。效率低下，但很有趣！

```
public static int FolderDepth(string path)
{
    if (string.IsNullOrEmpty(path))
        return 0;
    DirectoryInfo parent = Directory.GetParent(path);
    if (parent == null)
        return 1;
    return FolderDepth(parent.FullName) + 1;
} 
```

我喜欢用 C# 编写的 Lisp 代码！

这是另一个我更喜欢的递归版本，并且可能更有效：

```
public static int FolderDepth(string path)
{
    if (string.IsNullOrEmpty(path))
        return 0;
    return FolderDepth(new DirectoryInfo(path));
}

public static int FolderDepth(DirectoryInfo directory)
{
    if (directory == null)
        return 0;
    return FolderDepth(directory.Parent) + 1;
} 
```

好时光，好时光……

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-25T03:58:10.680

如果您使用`Path`该类的成员，您可以处理路径分隔字符的本地化和其他与路径相关的警告。以下代码提供深度（包括根）。它对坏字符串等并不健壮，但它对你来说是一个开始。

```
int depth = 0;
do
{
    path = Path.GetDirectoryName(path);
    Console.WriteLine(path);
    ++depth;
} while (!string.IsNullOrEmpty(path));

Console.WriteLine("Depth = " + depth.ToString()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-25T04:49:09.907

假设您的路径已经过有效验证，在 .NET 3.5 中，您还可以使用 LINQ 在 1 行代码中执行此操作...

> Console.WriteLine(@"C:\Folder1\Folder2\Folder3\Folder4\MyFile.txt".Where(c => c = @"\").Count);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-09T16:49:01.930

如果目录末尾有反斜杠，您会得到与没有反斜杠时不同的答案。这是该问题的强大解决方案。

```
string pathString = "C:\\temp\\"
var rootFolderDepth = pathString.Split(Path.DirectorySeparatorChar).Where(i => i.Length > 0).Count(); 
```

这将返回路径长度 2。如果不使用 where 语句，则路径长度为 3，如果省略最后一个分隔符，则路径长度为 2。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-03-30T10:10:00.493

也许有人还需要一些性能测试......

```
 double linqCountTime = 0;
        double stringSplitTime = 0;
        double stringSplitRemEmptyTime = 0;
        int linqCountFind = 0;
        int stringSplitFind = 0;
        int stringSplitRemEmptyFind = 0;

        string pth = @"D:\dir 1\complicated dir 2\more complicated dir 3\much more complicated dir 4\only dir\another complicated dir\dummy\dummy.dummy.45682\";

        //Heat Up
        DateTime dt = DateTime.Now;
        for (int i = 0; i < 10000; i++)
        {
            linqCountFind = pth.Count(c => c == '\\');
        }
         _= DateTime.Now.Subtract(dt).TotalMilliseconds;
        dt = DateTime.Now;
        for (int i = 0; i < 10000; i++)
        {
            stringSplitFind = pth.Split('\\').Length;
        }
        _ = DateTime.Now.Subtract(dt).TotalMilliseconds;
        dt = DateTime.Now;
        for (int i = 0; i < 10000; i++)
        {
            stringSplitRemEmptyFind = pth.Split(new char[] { '\\' }, StringSplitOptions.RemoveEmptyEntries).Length;
        }
        _ = DateTime.Now.Subtract(dt).TotalMilliseconds;
        dt = DateTime.Now;

        //Testing
        dt = DateTime.Now;
        for (int i = 0; i < 1000000; i++)
        {
            linqCountFind = pth.Count(c => c == '\\');
        }
        linqCountTime = DateTime.Now.Subtract(dt).TotalMilliseconds; //linq.Count: 1390 ms

        dt = DateTime.Now;
        for (int i = 0; i < 1000000; i++)
        {
            stringSplitFind = pth.Split('\\').Length-1;
        }
        stringSplitTime = DateTime.Now.Subtract(dt).TotalMilliseconds; //string.Split: 715 ms

        dt = DateTime.Now;
        for (int i = 0; i < 1000000; i++)
        {
            stringSplitRemEmptyFind = pth.Split(new char[] { '\\' }, StringSplitOptions.RemoveEmptyEntries).Length;
        }
        stringSplitRemEmptyTime = DateTime.Now.Subtract(dt).TotalMilliseconds; // string.Split with RemoveEmptyEntries option: 720 ms

        string linqCount = "linqCount - Find: "+ linqCountFind + "; Time: "+ linqCountTime.ToString("F0") +" ms"+ Environment.NewLine;
        string stringSplit = "stringSplit - Find: " + stringSplitFind + "; Time: " + stringSplitTime.ToString("F0") + " ms" + Environment.NewLine;
        string stringSplitRemEmpty = "stringSplitRemEmpty - Find: " + stringSplitRemEmptyFind + "; Time: " + stringSplitRemEmptyTime.ToString("F0") + " ms" + Environment.NewLine;

        MessageBox.Show(linqCount + stringSplit + stringSplitRemEmpty);

        // Results:
        // linqCount - Find: 9;  Time: 1390 ms
        // stringSplit - Find: 9;  Time: 715 ms
        // stringSplitRemEmpty - Find: 9;  Time: 720 ms 
```

*   因此，在大多数情况下，最好的方法是 string.split()（参见代码注释中的结果）。
*   string.Split(new char[] { '\\' }, StringSplitOptions.RemoveEmptyEntries) 对于路径更安全。
*   对于更复杂的情况，请参阅： [https](https://cc.davelozinski.com/c-sharp/fastest-way-count-number-times-character-occurs-string) ://cc.davelozinski.com/c-sharp/fastest-way-count-number-times-character-occurs-string 和 [https://cc.davelozinski.com/c-sharp /c-net-fastest-way-count-substring-occurrences-string](https://cc.davelozinski.com/c-sharp/c-net-fastest-way-count-substring-occurrences-string)

# sql-server - SQL Server 2005 数据库卡在单用户模式

> ID：316013
> 
> 赞同：5
> 
> 时间：2008-11-25T00:43:04.070
> 
> 标签：sql-server

我有一个陷入单用户模式的数据库。我杀死了在数据库上获得“锁定”的进程，但是当我杀死它时，另一个进程会自动产生（使用 sa 帐户）。即使禁用 SQL Server 代理也会发生这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-25T00:58:32.073

您可以登录服务器/数据库吗？

如果没有，请尝试 ADMIN:ServerName 它应该打开一个紧急管理会话

然后你可以进入SQL Server ALTER DATABASE [name] SET MULTI_USER

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T00:55:56.773

这可能是您的 SQL Management Studio（或类似）连接。您杀死自己的连接，然后重新连接以查看是否有其他人在其上，从而导致另一个连接。

如果不是这样，请检查“活动监视器”（在“管理”文件夹下）中的连接属性（用户名、状态、应用程序）。

如果要将其移出单用户模式，请右键单击数据库并转到属性。选择“选项”，右下方是一个名为“限制访问”的属性。

# php - How to "include" a file?

> ID：316017
> 
> 赞同：0
> 
> 时间：2008-11-25T00:44:16.047
> 
> 标签：php, include

Here's the code I have in the html file to "include" the file "vmenu.php"

```
 <div id="apDivVistaMenus">

<?php
include 'vmenu.php';
?>

  <!-- Begin Vista-Buttons.com -->

  <!-- End Vista-Buttons.com -->

  </div> 
```

The menus used to be between the comments below the php include request. But I save that code into the vmenu.php file, which looks like this:

```
<link href="../menu-files/peaceland_styles_zkkus.css" type="text/css" rel="stylesheet"/>

  <script type="text/javascript"> var vbImgPath="../menu-files/"</script>

  <script type="text/javascript" src="../menu-files/sczkkus.js"></script>

  <noscript><a href="http://vista-buttons.com">Xp Style Menu by Vista-Buttons.com v2.73</a></noscript> 
```

What's the problem? They are both in the same directory. If I put the code from the vmenu.php back into the html file, it will load fine.

Thank you!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T00:50:32.900

Note that, in order for PHP includes to work, the file must be parsed by the PHP engine. By default, major web servers like Apache do not run .html files through the PHP interpreter, so you must either specify in your web server's configuration that you want to parse .html files as PHP files, or rename the .html file to a .php file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-15T21:18:03.157

将您的代码更改为：

```
<div id="apDivVistaMenus">
<!-- Begin Vista-Buttons.com -->
<?php include 'vmenu.php'; ?>
<!-- End Vista-Buttons.com -->
</div> 
```

......你会是金色的。

# javascript - javascript“包含”策略

> ID：316057
> 
> 赞同：2
> 
> 时间：2008-11-25T01:02:32.890
> 
> 标签：javascript

**重复：** [使用javascript根据需要注入脚本引用？](https://stackoverflow.com/questions/203113/use-javascript-to-inject-script-references-as-needed)

Javascript 没有任何指令来“包含”或“导入”另一个 js 文件。这意味着如果`script1.js`使用 中定义的函数/对象`script2.js`，那么每个包含 script1.js 的 html 页面都必须在其之前包含 script2.js。

如果您在 10 个 html 页面中只有 2 个 js 文件，这应该不是什么大问题。我的意思是，它是可以管理的！

但是突然说你`script1.js`通过使用新文件中定义的函数/对象来改变和改进它，`script3.js`
问题是，你不能只告诉`script1.js`包含`script3.js`，相反，你必须记住每个包含的 html 文件`script1.js`并将其更新为`script3.js`包含！

这似乎是组织代码的相当愚蠢的方式。

是否有推荐的策略或做法来处理这个问题？

拥有一个包含您在整个网站上使用的所有功能的巨大 js 文件是否可以接受？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T01:04:36.710

使用动态包括：

[根据需要使用 javascript 注入脚本引用？](https://stackoverflow.com/questions/203113/use-javascript-to-inject-script-references-as-needed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T01:09:53.157

Scriptaculous（可能还有其他框架）通过在加载文件时将包含文件的脚本标签写入文档来处理此问题。下面是 scriptaculous.js 文件中的相关位，它允许加载框架中的其他文件。

```
 var Scriptaculous = {
   Version: '1.8.2',
   require: function(libraryName) {
     // inserting via DOM fails in Safari 2.0, so brute force approach
     document.write('<script type="text/javascript" src="'+libraryName+'"><\/script>');
   },
   ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T01:28:44.227

就我个人而言，我试图通过将我所有的 javascript 整合到一个文件中来避免所有这些混乱。如果有一个页面需要大量其他页面不需要的 javascript，那么只需有两个文件 - 通常页面特定的 JS 可以在通用 js 之后加载，无论如何都没有麻烦。

要将 JS 文件合并为一个，我使用了 Dean Edwards 的 Javascript Packer，并结合了我在[博客](http://spadgos.com/?p=32)中描述的帮助脚本。它使处理许多 JS 文件变得更加容易（至少对我而言），并且从打包 javascript 中获得的压缩效果更好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-11-25T01:05:08.300

我想你可以在你的 JS 文件中使用 document.write 来确保它们包含它们所依赖的任何依赖项，尽管我不会真的推荐它......

# fonts - OCR 的理想字体是什么？

> ID：316068
> 
> 赞同：35
> 
> 时间：2008-11-25T01:06:18.827
> 
> 标签：fonts, ocr, tesseract

有人对 OCR 的不同字体有任何经验吗？我正在生成一个 ID，然后尝试使用 tesseract 对其进行扫描。目前我只是 T&E'n 不同的字体，但这似乎效率很低。我尝试过 OCR* 系列字体，以及其他各种字体，例如 Arial 和 Georgia。tesseract 容易与 OCR* 字体混淆。

是否有任何专为 tesseract 设计的字体，或任何适用于它的系统字体？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-25T01:09:06.233

好吧，在google上搜索出来这个，具体的OCR字体： [OCR Font](http://www.myfonts.com/fonts/linotype/ocr-a/)

看起来这是 1973 年采用的标准。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2011-01-02T13:12:29.590

在尝试了很多不同的字体和**OCR 引擎**之后，我倾向于使用[Consolas](http://en.wikipedia.org/wiki/Consolas)获得最好的结果。它是像 OCR-A 一样的**等宽字体，但****更易于**人类阅读。Consolas 包含在多个 Microsoft 产品中。

还有一个**开源**字体[Inconsolata](http://en.wikipedia.org/wiki/Inconsolata)，它是*受*Consolas 影响的。Inconsolata 是 Consolas 的一个很好的替代品，尤其是考虑到许可细节。

在我的测试中，[Calibri](http://en.wikipedia.org/wiki/Calibri)字体中的数字和空格并不总是被正确识别。OCR-A 给出了很多阅读错误。我没有尝试 MIRC，因为它对大多数人来说不容易阅读。

**注意**：tesseract 需要大量测试和微调才能可靠。在我们的案例中，我们改用了商业许可的 OCR 引擎 (ABBYY)，尤其是因为可靠性非常重要，而且我们需要支持多种（欧洲）语言。

**更新：** 2017 年 1 月 31 日 -由于潜在的版权问题，将“*基于 Consolas* ”更改为“*受 Consolas 影响”。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-02-02T21:42:44.267

我发现 Calibri 最适合我。我们每天在自动化系统中使用 OCR 软件，并且在测试了数十种字体（包括一些 OCR 特定字体）之后，Calibri 始终是最好的。

祝你好运。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-25T01:08:17.047

我可能会使用银行在支票底部用于路由号码的相同字体：

[http://morovia.com/font/micr.asp](http://morovia.com/font/micr.asp)

它是专门设计为明确的机器可读的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-13T21:29:09.000

这实际上取决于所考虑的 OCR 引擎。

对于 gocr，FreeMono 是最好的，请参阅 gocr 文档。

对于 tesseract，DejaVu-Serif 效果很好，请参阅[https://superuser.com/a/1543382/280936](https://superuser.com/a/1543382/280936)

对于 abbyocr，verdana 很好，看[这个比较](https://www.splitbrain.org/blog/2010-06/15-linux_ocr_software_comparison)

另请参阅此总结：[https ://www.monperrus.net/martin/perfect-ocr-digital-data](https://www.monperrus.net/martin/perfect-ocr-digital-data)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-25T01:09:23.673

我总是通过简单地使用新罗马时代来取得成功。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-21T15:19:58.497

我最近在一个名为 Laserfiche 的 ECM 中进行了广泛的测试，它使用 Nuance OmniPage，我发现等宽字体与动态间隔字体相比表现不佳。那些旧的 OCR 字体的性能不如看起来更“正常”的字体。特别是对于像第 12 点这样的较小字体大小的数字字符串。

奇怪的是其他人在 Calibri 上取得了成功。它在我的测试中表现很差，经常让看起来相似的字母和数字相互混淆。最好的字体（在安装了 Office 的 Windows 计算机上的字体中）是 Consolas、Verdana 和 Book Antiqua。所有字母和数字看起来不同的动态衬线字体。康索拉斯是冠军。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-19T17:37:48.807

目前使用等宽。尝试了很多字体，但这对我来说是最准确的。

# mfc - 如何使用 VS express08 创建 MFC 应用程序？

> ID：316071
> 
> 赞同：-1
> 
> 时间：2008-11-25T01:07:46.670
> 
> 标签：mfc

如何使用 Visual Studio express '08 创建 MFC 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-29T11:57:48.513

Visual C++ 2008 速成版不支持 MFC。您至少需要 Visual Studio 的标准版或专业版。有关各种版本的比较，请参阅[此页面](http://msdn.microsoft.com/en-us/library/hs24szh9.aspx)。

如果您想使用 Express Edition 开发原生 Windows GUI 应用程序，您可以考虑使用 WTL。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/71659/how-to-add-wtl-and-atl-to-visual-studio-c-express-2008)。

# bash - 焦油的有趣用法......但是发生了什么？

> ID：316078
> 
> 赞同：12
> 
> 时间：2008-11-25T01:10:00.083
> 
> 标签：bash, scripting, tar

我在同事的 Bash 脚本中看到了以下有趣的 tar 用法：

```
`tar cf - * | (cd <dest> ; tar xf - )` 
```

显然它的工作原理很像 rsync -av ，但速度更快。问题来了，怎么做？

-m

* * *

**编辑**：谁能解释*为什么*这个解决方案比以下解决方案更可取？

```
cp -rfp * dest 
```

前者更快吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-25T01:11:56.163

它将归档写入标准输出，然后通过管道将其传送到一个子进程——用括号包裹——该子进程更改为不同的目录并从标准输入中读取/提取。这就是`f`参数后的破折号字符的含义。它基本上是将当前目录的所有可见文件和子目录复制到另一个目录。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-25T04:10:25.850

关于 cp 和 tar 复制目录层次结构的区别，可以做一个简单的实验来说明区别：

```
alastair box:~/hack/cptest [1134]% mkdir src
alastair box:~/hack/cptest [1135]% cd src
alastair box:~/hack/cptest/src [1136]% touch foo
alastair box:~/hack/cptest/src [1137]% ln -s foo foo-s
alastair box:~/hack/cptest/src [1138]% ln foo foo-h
alastair box:~/hack/cptest/src [1139]% ls -a
total 0
-rw-r--r--  2 alastair alastair    0 Nov 25 14:59 foo
-rw-r--r--  2 alastair alastair    0 Nov 25 14:59 foo-h
lrwxrwxrwx  1 alastair alastair    3 Nov 25 14:59 foo-s -> foo
alastair box:~/hack/cptest/src [1142]% mkdir ../cpdest
alastair box:~/hack/cptest/src [1143]% cp -rfp * ../cpdest
alastair box:~/hack/cptest/src [1144]% mkdir ../tardest
alastair box:~/hack/cptest/src [1145]% tar cf - * | (cd ../tardest ; tar xf - )
alastair box:~/hack/cptest/src [1146]% cd ..
alastair box:~/hack/cptest [1147]% ls -l cpdest
total 0
-rw-r--r--  1 alastair alastair    0 Nov 25 14:59 foo
-rw-r--r--  1 alastair alastair    0 Nov 25 14:59 foo-h
lrwxrwxrwx  1 alastair alastair    3 Nov 25 15:00 foo-s -> foo
alastair box:~/hack/cptest [1148]% ls -l tardest
total 0
-rw-r--r--  2 alastair alastair    0 Nov 25 14:59 foo
-rw-r--r--  2 alastair alastair    0 Nov 25 14:59 foo-h
lrwxrwxrwx  1 alastair alastair    3 Nov 25 15:00 foo-s -> foo 
```

区别在于硬链接文件。请注意硬链接文件是如何`cp`与`tar`. 为了使差异更加明显，请查看每个索引节点：

```
alastair box:~/hack/cptest [1149]% ls -i cpdest
24690722 foo  24690723 foo-h  24690724 foo-s
alastair box:~/hack/cptest [1150]% ls -i tardest
24690801 foo  24690801 foo-h  24690802 foo-s 
```

可能还有其他原因更喜欢 tar，但这是一个很大的原因，至少在您拥有大量硬链接文件的情况下。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-25T02:59:40.143

## 对于包含 25,000 个空文件的目录：

```
$ 时间 { 焦油 -cf - * | (cd ../bar; 焦油 -xf - ); }
真正的 0m4.209s
用户 0m0.724s
系统 0m3.380s

$ 时间 { cp * ../baz/; }
真正的 0m18.727s
用户 0m0.644s
系统 0m7.127s

```

## 对于有 4 个文件的目录，每个文件 1073741824 字节 (1GB)

```
$ 时间 { 焦油 -cf - * | (cd ../bar; 焦油 -xf - ); }
真正的 3m44.007s
用户 0m3.390s
系统 0m25.644s

$ 时间 { cp * ../baz/; }
真正的 3m11.197s
用户 0m0.023s
系统 0m9.576s

```

我的猜测是这种现象高度依赖文件系统。如果我是对的，您会发现专门处理大量小文件的文件系统（例如 reiserfs 3.6）与更擅长处理大文件的文件系统之间存在巨大差异。

（我在 HFS+ 上进行了上述测试。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-25T01:13:00.640

这是管道的独特用法。基本上，第一个 tar 通常直接写入文件，但它会写入 stdout（-），然后将其重定向到另一个采用 stdin 而不是文件的 tar。基本上，这与压缩到文件并稍后解压缩相同，只是中间没有文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-02-13T00:58:21.700

PowerTools 书的副本如下：

`tar cf - * | (cd <dest> && tar xvBf - )`

'&&' 是检查前面命令的返回码的条件。也就是说，如果“cd”失败，“tar xf -”将不会被执行。我总是输入一个 -v （详细）和一个 -B （重新阻止输入）。

我一直使用焦油。它对于复制到远程系统特别有用，例如：

焦油 cvf - . | ssh someone@somemachine '(cd 某处 && tar xBf -)'

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-25T01:13:08.360

```
tar cf - * | (cd <dest> ; tar xf - ) 
```

会将当前目录的所有非隐藏文件/目录 tar 到标准输出，然后将其通过管道传输到新的子外壳的标准输入中。该外壳首先将当前工作目录更改为`<dest>`，然后将其解压缩到该目录。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-25T03:26:54.003

一些旧版本的 cp 没有 -f / -p （和类似的）选项来保留权限，所以这个 tar 技巧就可以了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-09-01T19:28:43.253

我相信 tar 将使用深度嵌套的目录执行 Windows 风格的“合并”操作，而 cp 将覆盖子目录。

例如，如果您有布局：

```
dir/subdir/file1 
```

然后将其复制到包含以下内容的目的地：

```
dir/subdir/file2 
```

然后使用副本，您将得到：

```
dir/subdir/file1 
```

但是使用 tar 命令，您的目的地将包含：

```
dir/subdir/file1
dir/subdir/file2 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-25T01:15:09.027

```
tar cf - * 
```

这使用 tar 将 * 发送到标准输出

```
| 
```

这将标准输出的明显重定向到...

```
(cd <dest> ; tar xf - ) 
```

这会将 PWD 更改为适当的位置，然后从标准输入中提取

我不知道为什么这会比 rsync 快，因为不涉及压缩。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-25T05:07:50.243

tar 解决方案将保留符号链接，而 cp 只会制作副本并销毁链接。

tar 一直是标准的 Unix 实用程序，比 rsync 长得多。当需要将目录层次结构复制到另一个位置（甚至是另一台计算机）时，您更有可能找到它。rsync 这些天可能更容易使用，但速度较慢，因为它比较源和目标并同步它们。tar 只是向一个方向复制。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-14T11:40:56.973

如果您有 GNU `cp`（所有基于 Linux 的系统都可以），那么`cp --archive`即使在硬链接文件上也可以使用，并且不需要 tar。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-25T00:57:35.727

碰巧的是，一位同事在我们的一个脚本中编写了一个几乎相同的命令。在我花了一些时间对此感到困惑之后，我问他为什么使用它而不是`cp`. 我记得他的回答是，`cp`从一个文件系统复制到另一个文件系统时速度很慢。

这是否属实需要比我愿意在这个问题上花费更多的测试，但它有一定的意义。第一个`tar`进程尽可能快地从源设备读取，只等待该设备读取。同时，第二个`tar`进程从其输入管道读取并尽快写入。它可能必须等待输入，但如果目标设备上的写入比源设备上的读取慢，它只会在目标设备上等待。单个`cp`命令必须在源设备和目标设备上等待。

另一方面，现代操作系统在预缓存 IO 操作方面做得很好。完全有可能`cp`将大部分时间花在等待写入和从内存中读取而不是设备本身上。似乎需要真正可靠的数据来选择使用两个`tar`命令而不是更直接的`cp`命令。

# flash - 如何创建 Flash 9/ActionScript 3.0 向导对话框

> ID：316086
> 
> 赞同：1
> 
> 时间：2008-11-25T01:13:15.803
> 
> 标签：flash, actionscript, dialog, wizard

我需要为 Flash 9/ActionScript 3.0 应用程序创建一个向导。该向导将是每个步骤的一组对话框/窗口，以及用于在向导中导航的按钮“后退/下一步/取消”。在 Adob​​e CS3 创作环境中，似乎没有一种直接的方法可以创建一组包含向导步骤的对话框或窗口。

此时我将无法使用 Flex，它似乎对容器等内置 GUI 组件有更好的支持。如果有一种方法可以在 Adob​​e Flash CS3 创作环境中使用 Flex 组件，我也会对该信息感兴趣。

我正在考虑的一种方法是为向导需要的每个对话框/窗口创建单独的时间线图层。当用户逐步完成向导时，应用程序将设置可见或不可见包含在时间线层中的组件，这些组件适用于向导中的当前步骤。

我认为该方法可行，但似乎不是最佳解决方案。可以从 Adob​​e CS3 创作环境中使用哪些替代方法来创建向导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T01:41:33.420

使每个阶段成为时间轴中的一个单独的帧。单击“下一步”按钮时，验证数据的有效性。如果它不好，则显示错误。如果它很好，请将其存放在某个地方以供最后使用，然后继续下一帧。

# php - 无法使用 cURL 连接到 HTTPS 站点。而是返回 0 长度的内容。我能做些什么？

> ID：316099
> 
> 赞同：64
> 
> 时间：2008-11-25T01:23:45.390
> 
> 标签：php, curl, https

我有一个使用 cURL（最新版本）连接到安全网关进行支付的站点。

问题是 cURL 总是返回 0 长度的内容。我只得到标题。并且仅当我将 cURL 设置为返回标头时。我有以下标志。

```
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_URL, $gatewayURI);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_POST, 1); 
```

返回的标头是

```
HTTP/1.1 100 Continue

HTTP/1.1 200 OK
Date: Tue, 25 Nov 2008 01:08:34 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Content-Length: 0
Content-Type: text/html
Set-Cookie: ASPSESSIONIDxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; path=/
Cache-control: private 
```

我也尝试过卷曲不同的网站，它们返回的内容很好。我认为这个问题可能与 https 连接有关。

我已经和公司谈过了，他们没有帮助。

有没有其他人遇到过这个错误并且知道解决方法？我应该放弃 cURL 并尝试使用`fsockopen()`吗？

谢谢你。:)

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2008-11-25T08:52:55.563

我今天遇到了同样的问题。Curl 带有一个过时的文件来验证 HTTPS 证书。

从以下位置获取新的：

[http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)

将其保存到您网站上的某个目录中

并添加

```
curl_setopt ($curl_ch, CURLOPT_CAINFO, dirname(__FILE__)."/cacert.pem"); 
```

对于每个请求:-)

忽略任何关于禁用 CURLOPT_VERIFYPEER 和 CURLOPT_VERIFYHOST 的愚蠢评论！这会使您的代码容易受到中间人攻击！

**2016 年 12 月编辑：**

使用下面提到的 Jasen 方法正确解决此问题。

添加`curl.cainfo=/etc/ssl/certs/ca-certificates.crt`到你 php.ini

**2017 年 10 月编辑：**

现在有一个 composer 包可以帮助您管理 ca 证书，这样如果您的 cacert.pem 由于吊销证书而变得过时，您就不会受到攻击。

[https://github.com/paragonie/certainty](https://github.com/paragonie/certainty) ->`composer require paragonie/certainty:dev-master`

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-12-03T00:47:48.770

您还应该尝试检查 curl_error() 中的错误消息。您可能需要在每个 curl_* 函数之后执行一次。

[http://www.php.net/curl_error](http://www.php.net/curl_error)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2010-07-21T22:43:28.173

注意：这严格不是生产用途。如果您想快速调试，这可能很有用。否则，请使用上面@SchizoDuckie 的答案。

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);     
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); 
```

只需添加它们。有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-19T20:12:14.300

刚刚有一个非常相似的问题并通过添加解决了它

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
```

显然，我正在获取的站点重定向到另一个位置，而 php-curl 默认情况下不遵循重定向。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-12T00:13:00.297

我遇到过这样的情况：（Windows 上的 PHP 5.4.16）

```
curl_setopt($ch, CURLOPT_SSLVERSION, 3); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-25T02:48:38.420

每当我使用 PHP/Curl 进行测试时，我都会先从命令行尝试，找出可行的方法，然后将我的选项移植到 PHP。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-02-05T11:24:27.030

有时您必须将您的 Curl 证书升级到最新版本，以免出现 https 错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-05T08:07:52.543

我使用`file_get_contents`using`stream_create_context`并且效果很好：

```
$postdataStr = http_build_query($postdataArr);

$context_options = array (
        'http' => array (    <blink> // this will allways be http!!!</blink>
            'method' => 'POST',
            'header'=> "Content-type: application/x-www-form-urlencoded\r\n"
                . "Content-Length: " . strlen($postdataArr) . "\r\n"
                . "Cookie: " . $cookies."\r\n"
            'content' => $postdataStr
            )
        );

$context = stream_context_create($context_options);
$HTTPSReq = file_get_contents('https://www.example.com/', false, $context); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-25T03:36:32.643

您正在测试网关安全通信的网络托管公司可能存在问题，他们可能不允许您这样做。

在连接到远程主机之前，可能还必须提供用户名、密码。

或者您的 IP 可能需要在远程服务器的批准 IP 列表中才能启动通信。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-10-06T17:32:04.450

我在最近的一个应用程序项目中发现了这个错误。我正在写从命令行或浏览器窗口运行，所以我使用服务器检测来获取我要求的文档的相对 URL。问题是，该站点是 https，每次我尝试访问[http://（同一](http://(same)服务器）时，cURL 都会将其更改为 https。

这在浏览器中运行良好，但在命令行中，即使两者都将验证设置为 false，我也会收到 SSL 错误。我必须做的是，

1) 检查 $_SERVER['HTTP_HOST']。如果存在，请使用 ($_SERVER['HTTPS'] ? "https://" : "http://").$_SERVER['HTTP_HOST']

2) 检查$_SERVER['COMPUTERNAME']，如果匹配生产服务器，提供https URL。(" [https://(服务器名)](https://(servername)) ")

3）如果两个条件都没有通过，这意味着我在不同的服务器上运行命令行，并使用“ [http://localhost](http://localhost) ”。

现在，这行得通，但它是一个黑客。此外，我从来没有弄清楚为什么在一台服务器（https）上 cURL 更改了我的 URL，而在另一台服务器（也是 https）上，它只留下了我的 URL。

奇怪的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-10T08:50:54.067

使用 https 并避免安全问题的最佳方法是使用 Firefox（或其他工具）并将证书下载到您的服务器。[这个网页对我帮助很大](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)，这些是对我有用的步骤：

1) 在 Firefox 中打开您要与 CURL 一起使用的 URL

2）在地址栏点击`padlock`> `more information`（FF版本可以有不同的菜单，找到它就行了）。单击`View certificate`按钮 >`Details`选项卡。

3) 突出显示中的“正确”证书`Certificate hierarchy`。就我而言，它是三个中的第二个，称为“cPanel, Inc. 证书颁发机构”。我刚刚通过“反复试验”方法找到了正确的方法。

4) 单击`Export`按钮。在我的情况下，工作的是文件类型“带链的 PEM”（同样通过试错法）。

5) 然后在你的 PHP 脚本中添加：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);    
curl_setopt($ch, CURLOPT_CAINFO, [PATH_TO_CRT_FILE]); 
```

另外我要说的是，我们必须注意这些步骤可能需要每年重做一次，或者每当更换或更新 URL 证书时。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-11-25T02:33:13.410

您正在使用 POST 方法，但您是否提供了一组数据？例如

```
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data); 
```

# c# - LDAP：为什么以下使用 DirectoryEntry 不会为大型全局安全组返回任何成员？

> ID：316100
> 
> 赞同：0
> 
> 时间：2008-11-25T01:24:31.177
> 
> 标签：c#, active-directory, ldap, exchange-server

以下代码适用于 90% 以上的全局安全组，但对于一个非常大的全局安全组，它返回一个枚举器，但没有该组的成员对象，即使该组有数千个。

```
DirectoryEntry group = groupResult.GetDirectoryEntry();
filter = "member;range=0-20";
group.RefreshCache(new[] { filter });
PropertyValueCollection groupMembers = group.Properties["member"];
IEnumerator iEnum = groupMembers.GetEnumerator();
//On one large global security group, this returns a valid iEnum, 
//but no member entries.  The group has thousands.
//This code works for every other group I've encountered. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T09:45:15.613

问题可能不在于您的代码，而在于您的目录中的访问安全性 - 您可能无权枚举该组的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-22T19:08:26.867

LDAP 服务器是否有可能在单个响应中对返回集的大小或可能花费的时间设置了限制？

与往常一样，使用第三方 LDAP 浏览器进行测试，看看您是否可以通过这种方式获得它。这将测试身份验证和权限问题，以及服务器是否限制响应的大小或时间。

# project-management - 需要有关如何优先处理和安排一堆工作项的提示

> ID：316120
> 
> 赞同：0
> 
> 时间：2008-11-25T01:44:44.337
> 
> 标签：project-management, scheduling

我花了一些时间，但我终于设法写下所有需要进入我正在开发的软件产品 1.0 版的任务。

该列表有近 1000 项。

我们是一个 3 人的团队，不知怎的，我们在代码中使用 MindMeister、Google Docs、@todos 等实现了这一目标。现在，我将所有内容都按功能整齐地分组，但我如何确定所有这些的优先级并转向它成一个时间表？

任何建议都将不胜感激-我不是在寻找软件建议，但是-我正在寻求有关如何处理这一庞大任务的建议-从错误修复到应用程序模块-并找出我应该按什么顺序做他们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T02:50:02.503

无情地优先考虑。1000 个行动项目很多，而且很有可能你会修改一些，扔掉其他的，然后添加新的。您的列表将无法保留您通过实际构建软件所学到的东西，如果您不先做最重要的事情，您最终会一团糟。

对于每个项目或功能，您必须回答一个问题：如果没有这个，产品是否完全可用或有用？如果是，它可以等待；其他所有内容都排在队列的首位。

之后，我喜欢按焦点对里程碑进行分组：我将做一个功能里程碑（如果有自然的小功能集群，我将做多个里程碑），一个 UI 里程碑，我将专注于 AJAX/富客户端交互性，一个性能里程碑我在那里进行分析并进行数据库和服务器调整等。或者以其他方式将它们分解-但绝对要分解它们。以较小的方式工作，每次迭代都有特定的重点，并在继续之前确保每次迭代都是可靠的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T02:42:41.550

我推荐的方法将基于敏捷方法最佳实践...

因此，您已经定义了敏捷术语中所谓的“积压”——这很棒——并且是重要的第一步。

通常使用的一个好的敏捷节奏是 2-3 周的迭代长度……最后你有一组可发布的特性。这将建立您开发过程的“心跳”。接下来，您将决定如何将功能组织和分组到故事和任务中。

您将希望扩展底层架构，并让它根据您从积压工作中选择的故事和任务的顺序自然出现。

尽早降低风险很重要——因此您需要及早选择那些可能构成最大风险的性能或实现未知的项目——并可能导致最大的返工影响。例如 - 建立消息传递基础结构 - 如果您选择需要传递持久消息以完成工作单元的故事，则可能包含早期的架构功能。

您能否将这组功能分为功能类别，这些功能类别可能会自然演变为将 1.0 版本描述为系统的系统？例如，管理功能、用户配置文件管理、报告、外部集成层、数据库访问对象等。

您可以编写的最简单的故事/用例是什么 - 将映射到您定义的大约 1,000 个功能/要求中的一些？选择一组故事（或故事中的单个任务 - 如果故事本身太大而无法在单个交互中实施）。这将需要一些额外的努力 - 但将您的需求重新组合成一组故事/任务很重要。

你会发现你将在后续的交互中进行重构——但你稳定的 2 周心跳迭代计划将继续提供真正的功能。

在不同的点上，您可能希望安排架构迭代只是为了专注于一些清理/重构 - 这也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T04:13:40.650

由于您指出所有这些项目都是必需的，因此我假设将项目从列表中删除的可能性不大（至少目前如此）。鉴于此，您手头有 2 个大任务 - 决定何时做项目，并确定做这些项目需要多长时间。

由于您已经按功能方便地对项目进行了分组，我将从优先考虑功能开始。希望这将显着减少您的工作集，并让您在合理的时间内真正完成它。

我会根据风险对每个功能进行优先级排序。有些事情很容易实现，有些事情却很难。由于它们都是*必需*的，因此当您的日程安排更灵活以应对任何未预料到的问题时，首先执行风险最高的功能。等到你的周期结束，墨菲定律会让你失望。

鉴于您的小团队，我只会发送功能列表并要求每个人标记它，如果他们认为这是一个有风险或难以实施的功能。将所有分数加起来，您就有了“风险评估”，得分最高的项目首先被分配。

或者，如果您可以轻松访问您的客户，请他们对与每个功能相关的“风险”进行评分（在这种情况下，风险是指没有该功能的最坏情况 - 如果没有某些东西会很烦人，它没有风险。如果没有该功能会导致他们不使用您的产品，这是高风险的）。

现在您有了一个优先级队列，是时候进行估算了。对于初始估计，我会简单地对每个特征进行一个数量级的估计。由于听起来好像您已经分解了功能，您应该能够对某件事是否需要花费数小时、数天或数周时间有一个不错的感觉。从它的声音来看，你仍处于开发的早期阶段，所以我认为尝试对再过一个月左右不会实施的事情进行准确估计没有多大意义。

当您从队列中取出项目时，让您的团队通过确定不应该超过几个小时的细化任务来提供更准确的估计。如果您想改进您的数量级估算，您可以根据您对系统的最新知识逐步提供剩余任务的快速估算。

这应该为您提供一个相当准确的短期时间表，以及一个更模糊的长期时​​间表，它将逐渐变得更加准确。

最后，如果你面临一个漫长的开发周期，我建议你确定一些目标或日期，当你达到这些目标时，坐下来重复整个过程。如果不重新审视这些事情，我永远不会超过 2 周。新项目将被添加，其他项目将被超越并过时，随着您更好地理解问题，其他项目将变得更高风险。所有这些都必须考虑在内。

# sql-server-2008 - sql server 2008的文件流

> ID：316123
> 
> 赞同：2
> 
> 时间：2008-11-25T01:48:07.447
> 
> 标签：sql-server-2008, filestream

SQL Server 2008 的 FILESTREAM 功能允许使用 SQL Server 2008 和 NTFS 文件系统的组合来存储和高效访问 BLOB 数据。

当在包含具有 filestream 属性的 varbinary 列的表上插入一行时，文件（数据）直接存储在文件系统上并分配新名称（例如 00000016-00000079-0006）。

是否有任何 TSQL API 可以检查文件系统上的哪个文件与特定行相关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T16:32:57.363

文件名是您找到的 00000016-00000079-0006 - 在您配置 FileStream 存储的目录中查找它。只需从启用文件流的表中选择 *，您将获得每一行的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-03-05T05:27:59.060

SQL Server 和 Filestream 不公开物理路径，因为它可能会根据分区拆分和类似操作随时更改。您可以使用 PathName() 方法获取逻辑路径，并通过各种支持 Filestream 的函数打开它。

# linux - 你如何诊断内核oops？

> ID：316131
> 
> 赞同：19
> 
> 时间：2008-11-25T01:52:30.810
> 
> 标签：linux, debugging, kernel

给定一个 linux 内核 oops，您如何诊断问题？在输出中，我可以看到一个堆栈跟踪，它似乎提供了一些线索。是否有任何工具可以帮助找到问题？您遵循哪些基本程序来追踪它？

```
 Unable to handle kernel paging request for data at address 0x33343a31
Faulting instruction address: 0xc50659ec
Oops: Kernel access of bad area, sig: 11 [#1]
tpsslr3
Modules linked in: datalog(P) manet(P) vnet wlan_wep wlan_scan_sta ath_rate_sample ath_pci wlan ath_hal(P)
NIP: c50659ec LR: c5065f04 CTR: c00192e8
REGS: c2aff920 TRAP: 0300   Tainted: P          (2.6.25.16-dirty)
MSR: 00009032   CR: 22082444  XER: 20000000
DAR: 33343a31, DSISR: 20000000
TASK = c2e6e3f0[1486] 'datalogd' THREAD: c2afe000
GPR00: c5065f04 c2aff9d0 c2e6e3f0 00000000 00000001 00000001 00000000 0000b3f9
GPR08: 3a33340a c5069624 c5068d14 33343a31 82082482 1001f2b4 c1228000 c1230000
GPR16: c60f0000 000004a8 c59abbe6 0000002f c1228360 c340d6b0 c5070000 00000001
GPR24: c2aff9e0 c5070000 00000000 00000000 00000003 c2cc2780 c2affae8 0000000f
NIP [c50659ec] mesh_packet_in+0x3d8/0xdac [manet]
LR [c5065f04] mesh_packet_in+0x8f0/0xdac [manet]
Call Trace:
[c2aff9d0] [c5065f04] mesh_packet_in+0x8f0/0xdac [manet] (unreliable)
[c2affad0] [c5061ff8] IF_netif_rx+0xa0/0xb0 [manet]
[c2affae0] [c01925e4] netif_receive_skb+0x34/0x3c4
[c2affb10] [c60b5f74] netif_receive_skb_debug+0x2c/0x3c [wlan]
[c2affb20] [c60bc7a4] ieee80211_deliver_data+0x1b4/0x380 [wlan]
[c2affb60] [c60bd420] ieee80211_input+0xab0/0x1bec [wlan]
[c2affbf0] [c6105b04] ath_rx_poll+0x884/0xab8 [ath_pci]
[c2affc90] [c018ec20] net_rx_action+0xd8/0x1ac
[c2affcb0] [c00260b4] __do_softirq+0x7c/0xf4
[c2affce0] [c0005754] do_softirq+0x58/0x5c
[c2affcf0] [c0025eb4] irq_exit+0x48/0x58
[c2affd00] [c000627c] do_IRQ+0xa4/0xc4
[c2affd10] [c00106f8] ret_from_except+0x0/0x14
--- Exception: 501 at __delay+0x78/0x98
    LR = cfi_amdstd_write_buffers+0x618/0x7ac
[c2affdd0] [c0163670] cfi_amdstd_write_buffers+0x504/0x7ac (unreliable)
[c2affe50] [c015a2d0] concat_write+0xe4/0x140
[c2affe80] [c0158ff4] part_write+0xd0/0xf0
[c2affe90] [c015bdf0] mtd_write+0x170/0x2a8
[c2affef0] [c0073898] vfs_write+0xcc/0x16c
[c2afff10] [c0073f2c] sys_write+0x4c/0x90
[c2afff40] [c0010060] ret_from_syscall+0x0/0x38
--- Exception: c01 at 0xfd98a50
    LR = 0x10003840
Instruction dump:
419d02a0 98010009 800100a4 2f800003 419e0508 2f170000 419a0098 3d20c507
a0e1002e 81699624 39299624 7f8b4800  419e007c a0610016 7d264b78
Kernel panic - not syncing: Fatal exception in interrupt
Rebooting in 1 seconds.. 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-25T06:30:24.383

Oops 提供了许多有助于诊断崩溃的信息。它从崩溃的地址、原因（“访问坏区”）和寄存器的内容开始。呼叫跟踪回答了“我们如何到达这里”的问题。列表中的第一项是最近发生的。`do_IRQ`向后工作，由于 Atheros WiFi 适配器收到一个数据包 ( ) ，因此发生了中断( `ath_rx_poll`)。该例程将其传递给通用 WiFi 代码 ( `ieee80211_input`)，后者又将其传递给网络堆栈 ( `netif_receive_skb`)。

要找出导致问题的确切代码，您可以运行

```
gdb /usr/src/linux/vmlinux 
```

然后反汇编有问题的函数，可能是`mesh_packet_in()`. 可能，因为错误指令 (0xc50659ec) 看起来在`mesh_packet_in()`(0xc5065f04) 之外。你也可以试试 gdb 命令

```
(gdb) info line 0xc50659ec 
```

找出哪个函数包含这个地址。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-25T04:38:19.850

您应该首先尝试找到崩溃的代码的来源。在特定情况下，分析声称崩溃发生在 manet 驱动程序的 mesh_packet_in 中，偏移量为 0x8f0。它还报告此时的指令是 419d02a0 98010009 ...因此使用“objdump -d”检查模块，以确认报告的函数/偏移量是否正确。然后检查它在做什么的来源；您可以使用寄存器列表再次确认您正在查看正确的指令。

当您知道哪个 C 语句出错时，您需要阅读源代码以找出虚假数据的来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T04:26:00.563

[http://oss.sgi.com/projects/kdb/](http://oss.sgi.com/projects/kdb/)

将它安装到您的内核中，然后当它运行时，您将进入一个类似 gdb 的界面，您可以随意使用它。但是，看起来 manet 模块正在取消引用错误的指针。

# language-agnostic - 面向切面编程发生了什么？

> ID：316132
> 
> 赞同：29
> 
> 时间：2008-11-25T01:53:22.757
> 
> 标签：language-agnostic, aop

我记得在 1990 年代末和 2000 年代初，面向方面的编程 (AOP) 被认为是“下一件大事”。现在我看到一些 AOP 仍然存在，但它似乎已经消失在背景中。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-11-20T13:31:29.213

2000 年代初期可能有很多炒作，发生的情况如下：有很多尝试创建面向方面的框架，这些尝试合并到 Java 领域的两个重要项目中：AspectJ 和弹簧 AOP。AspectJ 是完整的、复杂的、学术的、有点过度设计的。Spring AOP 涵盖了 80% 的用例，具有 20% 的复杂性。

如果您查看 Google 趋势中的术语[“AspectJ, Spring AOP”](http://www.google.com/trends?q=aspectj%2C+spring+aop&ctab=0&geo=all&date=all&sort=0)，然后与 Java 本身的流行度相比，您会发现 AspectJ 的相对流行度有些恒定，但 Spring AOP 正在提高。这意味着人们使用 AOP，但不想要 AspectJ 的复杂性。我认为 AspectJ 的创造者犯了很多战术错误；AspectJ 一直是一个研究项目，并不是为“大众”设计的。

在 .NET 领域，我们在 2000 年代初看到了对 AOP 的类似兴趣。2003年我开始做AOP研究的时候，.NET的AOP编织者有五六家；所有人都在遵循 AspectJ 的道路，并且都处于婴儿阶段。这些项目都没有幸存下来。基于这个分析，我构建了 PostSharp，它旨在以 20% 的复杂性覆盖 80% 的用例，但使用起来比 Spring AOP 方便得多。PostSharp 现在被认为是 .NET 的主要方面编织器。PostSharp 2.0 建立在 AspectJ 5 年的反馈和行业经验的基础上，并带来了“企业就绪”的 AOP（未来将判断这种说法是否值得）。除了 PostSharp，其他重要的参与者是 Spring Framework for .NET 和 Windsor Castle，这两个以 DI 为中心的应用程序框架提供“也” 方面（方面被视为注入到构造对象中的依赖项）。由于这些技术使用运行时编织，它们具有严重的技术限制，因此实际上它们只能用于服务对象（这就是这些应用程序框架的设计目的）。.NET 中的另一个启动项目是 LinFu，它可以做“也”方面。

简而言之，AOP 格局在去年经历了一些整合，并且可能进入生产力阶段：客户会使用它，因为它真的很省钱，而不是因为它很酷。即使它很酷:)。

哦，我忘了：大多数应用服务器都内置了对 AOP 的支持。想想 JBoss、WebSphere，在某种程度上，还有 WCF。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-25T02:08:19.310

每一件“下一件大事”都会发生这种情况。大量炒作，随后流行语的使用缓慢下降。但是，即使流行语逐渐消失并最终消失，它们背后的任何好想法往往都会留下来被主流所吸收。

[**编辑**] 好的，对于那些认为我在“抨击”某些东西，或者声称面向方面的编程将会消失的人来说，这是一个例子。有一次，下一件大事是结构化编程。面向对象的编程就是从那里发展而来的，现在没有人再*谈论*做“结构化编程”了。但是，在许多方面，我们仍在使用它最好的想法，因为 OOP 采用了它们，改进了它们，并添加了更多新的想法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-25T02:24:10.323

它存在于一些项目中，我自己在最近的一个项目中的经验是太容易被滥用:( !!! 什么开始了一个很好的方式来设置调试，定时和扩展事务管理，它很快就被破坏到最奇怪的地步，以及我在一段时间内看到的最难理解和调试的代码。

只是为了在调试/诊断方面进行一些扩展，AOP 代码生成的堆栈跟踪多次隐藏了异常发生的实际位置，无法识别。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-25T02:26:28.667

AOP 实际上非常出色，它的问题是没有现有的语言对其提供真正*强大的*支持。当然 C# 具有属性（仅在您对事物进行编码时才有效），而 Java 具有“注入”（这会在运行时造成混乱），但总的来说，没有（主流）语言能够真正很好地支持它。 ..

所以它有点像最终成为一种“设计模式”（尽管在所有不同的语言中都有非常不同的实现），毕竟我猜这并不是那么糟糕；）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-25T02:23:36.130

我会建议它还不够大。这听起来很吸引人，但它真的让编码变得更容易了吗？我一直想尝试一下，找出它真正有什么好处，但我认为我在需要它提供的关系的地方做的编码不够。我不认为它像听起来那么有益。

同样在这一点上，让多核编程变得更容易是一件大事，我认为面向方面的编程不会对此有所帮助。

您还可以在[Adoption Risks](http://en.wikipedia.org/wiki/Aspect-oriented_programming#Adoption_risks "采用风险")上找到很多内容。

# jquery - 验证由 jQuery UI DatePicker 生成的日期范围

> ID：316139
> 
> 赞同：1
> 
> 时间：2008-11-25T01:58:06.227
> 
> 标签：jquery, validation, uidatepicker

我正在使用[jQuery UI 提供的日期选择器](http://ui.jquery.com/repository/latest/demos/functional/#ui.datepicker)来选择一个以单个文本输入结尾的日期范围，例如 11/11/2008 - 12/05/2008。对于客户端的验证 (jQuery/JavaScript) 以及服务器端的验证代码 (ASP.NET/C#) 以确保用户输入有效日期，您会推荐什么？

注意我前几天[在 Stack Overflow 上问了一个](https://stackoverflow.com/questions/311576/parsing-a-date-range-in-c-aspnet)关于如何使用 C# 解析出两个日期的问题，如果你有兴趣的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T02:01:30.197

[自定义验证器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)。应该相当简单地将它们分成两个单独的日期，解析每个日期，并根据需要进行比较以验证范围是否正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T02:41:16.217

您可以相当轻松地将 Dates 与 javascript 进行比较，只需将输入转换为 Date 对象，然后任何比较器都可以工作。我使用 Date.js，因为它有一个出色的解析器。在后端，我假设您可以做同样的事情，关键是将所有对象转换为相同的类型，并且可以与另一个进行比较。

# mysql - MySQL 多表连接

> ID：316142
> 
> 赞同：3
> 
> 时间：2008-11-25T02:01:51.367
> 
> 标签：mysql, join

我需要修改以下 MySQL 语句以包含来自第三个表的信息......但我很讨厌连接。

```
select
    ss.*,
    se.name as engine,
    ss.last_run_at + interval ss.refresh_frequency day as next_run_at,
    se.logo_name    
from 
    searches ss join search_engines se on ss.engine_id = se.id
where
    ss.user_id='.$user_id.'
group by ss.id
order by ss.project_id, ss.domain, ss.keywords 
```

我还需要包括`projects.project_name`通过匹配`searches.project_id`来检索`projects.id`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-25T02:12:20.643

查看[`SELECT`语法](http://dev.mysql.com/doc/refman/5.0/en/select.html)和[`JOIN`语法](http://dev.mysql.com/doc/refman/5.0/en/join.html)。

但是，最简单的答案 - 添加另一个`JOIN..ON`语句。

```
select
        ss.*,
        se.name as engine,
        ss.last_run_at + interval ss.refresh_frequency day as next_run_at,
        se.logo_name,
        pr.project_name -- +
from 
        searches ss
        join search_engines se on ss.engine_id = se.id
        join projects pr on ss.project_id = pr.id -- +
where
        ss.user_id='.$user_id.'
group by ss.id
order by ss.project_id, ss.domain, ss.keywords 
```

[**编辑**]我添加了`-- +`评论以指出我的补充。

# vm-implementation - 未来的虚拟机

> ID：316146
> 
> 赞同：5
> 
> 时间：2008-11-25T02:08:41.260
> 
> 标签：vm-implementation

我正在寻找一些关于**未来虚拟机的**资源（如 jvm 或 clr）

他们会是什么样子？他们会提供并发运行时、更强大的元编程模型吗？

我正在寻找文章、研究项目或纯粹的推测，任何将是有趣的读物。

因此，如果您有任何链接或意见，请分享。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-25T02:35:50.893

[Parrot](http://www.parrotcode.org/)是即将推出的虚拟机，将用于 Perl 6 以及其他动态语言，例如 Ruby、PHP、Python 等等。

Parrot 与 Java 虚拟机和公共语言运行时略有不同，因为它是基于寄存器的 VM，而不是像 JVM 和 CLR 那样基于堆栈。以下是[Parrot 虚拟机上的 Wikipedia 条目中的一些内容](http://en.wikipedia.org/wiki/Parrot_virtual_machine)：

> Java 虚拟机和当前的 Perl 5 虚拟机等虚拟机也是基于堆栈的。Parrot 开发人员将其视为 Parrot 机器的一个优势，它具有寄存器，因此更接近于实际的硬件设计，允许使用大量关于编译器优化的文献为 Parrot 虚拟机生成代码，以便它可以在以下位置运行字节码速度更接近机器代码。

虽然它可能不是您正在寻找的东西，但有消息称[低级虚拟机 (LLVM)](http://llvm.org/)的一个有趣用途。根据[这篇 Slashdot 文章](http://developers.slashdot.org/article.pl?sid=08/11/19/2321230&from=rss)， Adobe 有一个名为[Alchemy](http://labs.adobe.com/technologies/alchemy/)的项目，这是一个 C/C++ 到 Flash 字节码编译器，它利用 LLVM 的优化工具来生成优化良好的 Flash 字节码。

我认为我们将看到虚拟机更有趣的用途，通过更好的优化和动态编译技术得到更多的采用，以及随着更新、更快的处理器提供的计算能力的增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T02:15:25.053

[有一些关于虚拟机新安全理念](http://csis.gmu.edu/VMSec/)的学术工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-04T12:55:20.877

[http://openjdk.java.net/projects/mlvm/](http://openjdk.java.net/projects/mlvm/)

高温高压

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-04T12:55:40.830

和 Parrot 一样，[Lua VM](http://www.inf.puc-rio.br/~roberto/talks/lua-ll3.pdf)也是基于寄存器的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T02:40:52.520

不知道什么最能吸引你（编译、垃圾收集、安全等），我的建议是在与从事相关工作的人相关的网页/论文/会议/博客文章/等中进行一些“深度优先搜索”用于 java、clr、python、javascript 等的不同虚拟机。

我想到的第一个入门者是 Micheal Hind（在 IBM VM for java - JikesRVM 之后）、Ben Zorn（Mircosoft）、Pypy 的博客……但从这些网页中你应该会找到很多我认为的链接……

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-03T18:03:02.673

我们几乎可以肯定在未来的虚拟机中看到的一件事是，它们将从头开始构建以处理多种编程语言。

# javascript - 如何在 jQuery DatePicker 中隐藏下一个/今天/上一个导航并关闭动画？

> ID：316147
> 
> 赞同：5
> 
> 时间：2008-11-25T02:08:57.860
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

如何在 jQuery DatePicker 中隐藏上一个**/今天/下一个**导航？

我对月份和年份下拉框感到满意。

另外如何禁用动画？

[@tvanfosson](https://stackoverflow.com/questions/316147/how-do-i-hide-the-nexttodayprevious-navigation-in-jquery-datepicker-and-turn-of#316153) - 我已经尝试过`hideIfNoPrevNext`了，但这只有在您没有跨越两个月的日期范围时才有效。

持续时间选项在关闭动画方面起到了作用。

干杯。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-25T02:12:48.133

[您可以在http://docs.jquery.com/UI/Datepicker/datepicker#options](http://docs.jquery.com/UI/Datepicker/datepicker#options)找到 DatePicker 控件的选项。具体来说，我认为您想将 hideIfNoPrevNext 设置为 true 并将持续时间设置为“”。

```
 $('#cal').datepicker( { hideIfNoPrevNext: true, duration: '' } ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-24T11:18:40.930

只需隐藏按钮

```
$("div.ui-datepicker-header a.ui-datepicker-prev,div.ui-datepicker-header a.ui-datepicker-next").hide(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T19:11:15.020

只需修改样式以显示无。

```
div.ui-datepicker-header 
a.ui-datepicker-prev,div.ui-datepicker-header 
a.ui-datepicker-next
{
    display: none;  
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-11-30T00:05:39.147

我也遇到过 DatePicker 的默认功能的这个问题。我错过了 jquery.ui.base.css 的链接。在我的页面上包含对此文件的引用后，它就像一个魅力。我不必调整任何 CSS，也不必设置任何属性。供参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-05T10:40:38.973

我知道这很旧，但我找到了另一种方法来做到这一点。我用过这个。

```
.focus(function () {
    $(".ui-datepicker-next").hide();
    $(".ui-datepicker-prev").hide();
}); 
```

你可以这样做..

```
$('#TextDateId').datepicker({
        dateFormat: "MM dd yyyy",
        changeMonth: true,
    }).focus(function () {
        $(".ui-datepicker-next").hide();
        $(".ui-datepicker-prev").hide();
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-29T04:39:06.377

这是显示/隐藏上一个/下一个导航的功能

```
.datepicker().focus(function () {
    $(".ui-datepicker-next").hide();
    $(".ui-datepicker-prev").hide();
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-11-14T04:55:18.617

使用此代码，它肯定适用于停止导航下一个或上一个按钮..

```
$("#cal").datepicker({
stepMonths: 0
)}; 
```

# windows - 处理 nmake 错误级别/返回码

> ID：316157
> 
> 赞同：2
> 
> 时间：2008-11-25T02:18:12.100
> 
> 标签：windows, batch-file, cmd, nmake, errorlevel

我有一个基于 nmake 的项目，该项目又调用 asp 编译器，这可能会引发错误，nmake 似乎可以识别：

```
NMAKE : fatal error U1077: 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_compiler.exe' : return code '0x1' 
```

但是，当我从批处理文件中调用 nmake 时，环境变量 %ERRORLEVEL% 仍然设置为零：

```
nmake /NOLOGO
echo BUILD RETURNING: %ERRORLEVEL% 
```

如果我控制-c nmake 任务，我最终会得到一个非零的 ERRORLEVEL（它设置为 2）所以我的假设是我能够捕获错误，但是 nmake 不会冒泡非零从它的任务中退出代码。或者，至少，我误会了它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-25T12:20:06.873

首先，请发布您的批处理文件，以便我们了解您如何捕获错误。
也评论这篇文章，以便我可以再次阅读。
作为第一个 git，我猜是这样的：

**nmakebatch.cmd** *常用的 nmake 参数，没有 /NOLOGO*

```
@echo off
rem Args[x]: nmake arguments
echo.>> %~n0.log
echo %date% %time%>> %~n0.log
echo nmake /NOLOGO %*>> %~n0.log
nmake /NOLOGO %*
echo %errorlevel%>> %~n0.log 
```

是在构建时将所有情况捕获到递增日志中的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-19T19:38:31.580

您应该`exit /b %errorlevel%`在批处理脚本中使用这会将返回码传递回 nmake

# visual-studio - 如何更改 F# 交互式 shell 的颜色

> ID：316161
> 
> 赞同：13
> 
> 时间：2008-11-25T02:20:52.717
> 
> 标签：visual-studio, f#, f#-interactive

在我当前的配色方案中，F# 交互式 shell 在 Visual Studio 中是不可读的。我已经完成了所有颜色设置，但找不到它正在使用的设置。

如何在 Visual Studio 中更改 F# 交互式 shell 的颜色设置？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-25T03:21:57.743

尝试工具\选项\环境\字体和颜色\

只读区域 - 背景

纯文本 - 前景

# sql-server - DB2 Express 与 Sql Server Express 相比如何？

> ID：316165
> 
> 赞同：0
> 
> 时间：2008-11-25T02:23:15.070
> 
> 标签：sql-server, db2

我刚刚发现了 DB2 Express。我快速浏览了一下，找不到大量关于它的信息，但我想听听人们是如何找到它的，与 SQL Server Express（尤其是 2008 年）相比，在以下方面

1.  易于部署
2.  易用性和开发工具
3.  大小或 CPU 限制等限制
4.  与 .NET 和其他第三方工具（如 nHibernate）集成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-02T05:08:51.307

DB2 Express 不是免费的，DB2 Express-C（正如 Troels 所指出的）是免费使用的。DB2 Express-C 是跨平台的，对于中型企业应用程序来说可能比 PostgreSQL 更快。DB2 通常也比 Oracle 便宜一些，因此如果您需要升级，DB2 可能是一个不错的选择。

如果您需要具有可靠企业级管理工具的跨平台企业可伸缩应用程序，我推荐 DB2 Express-C。也就是说，您的问题是它与 SQL Server Express 相比如何......所以这里是这些问题的具体答案：

1.  DB2 Express 比 Oracle 更容易部署，比 MS SQL 更难。
2.  无论出于何种原因，我总是使用 DB2 和 Oracle 进入 SQL DDL 语句（CREATE/ALTER TABLE 等），而不是使用它们的管理工具，而 SQL Server Management Studio（甚至是免费版本）似乎足够简单/快速保证使用。这可能只是我
3.  目前 DB2 Express-C 有 4 核（2 CPU），2 GB 限制，没有数据库大小限制（[更多信息](http://db2express.com/)）。这些限制比 MSSQL Express 的要好得多（1 个 CPU，但没有核心限制，1GB RAM 和 4GB 数据库大小）
4.  毫不奇怪，SQL Server Express 与 .NET 应用程序的集成要好得多（假设您使用的是 Visual Studio）。但是，DB2 与 Java 一起工作通常比 SQL Server 更好。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-01T21:16:39.223

我假设您说的是 DB2 的 Express-C 版本（与 DB2 Express 不同）。

1,2：如果您通常在 Windows 平台上工作（开发工具、后端+前端，...），您会发现 MSSQL 更易于部署和使用。一般来说，MSSQL 可能比 DB2 更容易部署。

3：在“三大”供应商的免费产品中，DB2 Express-C 的限制最少。

# vbscript - 如何在 VBScript 中包含一个通用文件（类似于 C#include）？

> ID：316166
> 
> 赞同：46
> 
> 时间：2008-11-25T02:23:31.603
> 
> 标签：vbscript, include

VBScript 似乎没有办法包含一个通用的函数文件。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2008-11-25T02:23:43.913

您可以在要包含其他文件的每个文件中创建一个（相对）小函数，如下所示：

```
sub includeFile (fSpec)
    dim fileSys, file, fileData
    set fileSys = createObject ("Scripting.FileSystemObject")
    set file = fileSys.openTextFile (fSpec)
    fileData = file.readAll ()
    file.close
    executeGlobal fileData
    set file = nothing
    set fileSys = nothing
end sub 
```

然后用它来包含特定的文件——这些文件就像它们是内联的一样被执行。

```
includeFile "commonapi.vbi"
includeFile "dbcalls.vbi" 
```

它基本上打开文件，将整个内容读入一个字符串，然后执行该字符串。I/O 调用没有错误处理，因为这类事情通常在程序启动时完成一次，如果出现问题，您希望失败。

* * *

请注意，该`includeFile`函数可以压缩为：

```
Sub includeFile(fSpec)
    With CreateObject("Scripting.FileSystemObject")
       executeGlobal .openTextFile(fSpec).readAll()
    End With
End Sub 
```

甚至是（如果您不反对排长队）：

```
Sub includeFile(fSpec)
    executeGlobal CreateObject("Scripting.FileSystemObject").openTextFile(fSpec).readAll()
End Sub 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2008-11-25T06:18:46.823

“Windows Script Host”框架（如果你想这样称呼它）提供了一个 XML 包装文档，它在常规 vbs 文件上添加了功能。其中之一是能够包含 VBscript 和 Jscript 风格的外部脚本文件。我从来没有深入了解它，但我认为它会做你想做的事。 [http://msdn.microsoft.com/en-us/library/15x4407c(VS.85).aspx](http://msdn.microsoft.com/en-us/library/15x4407c(VS.85).aspx)

您可以包含 JavaScript、VBScript 或其他 WScript 脚本语言的模块。

示例 WSF 文件：

```
<job id="IncludeExample">
   <script language="JavaScript" src="sprintf.js"/>
   <script language="VBScript" src="logging.vbs"/>
   <script language="VBScript" src="iis-queryScriptMaps.vbs"/>
</job> 
```

如果上述文件名为“iis-scriptmaps.wsf”，则使用 cscript.exe 以这种方式运行它：

```
cscript.exe  iis-scriptmaps.wsf 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-11T16:37:09.667

我知道这是一个旧线程，但无论如何我都会发布我的答案，以便其他人可以通过“反复试验”了解我对 VBS 和 WSF 文件的了解：

因此，要拥有与其他语言相同的功能，您可以创建一个 WSF 文件并在其中包含所有 VBS 库，包括主程序。

像这样的东西：

```
<job id="MainProg">
  <script language="VBScript" src="Constants.vbs"/>
  <script language="VBScript" src="FileFunctions.vbs"/>
  <script language="VBScript" src="SendMail.vbs"/>
  <script language="VBScript" src="LoggingFunctions.vbs"/>
  <script language="VBScript" src="MainProgram.vbs"/>   
  <script language="VBScript">
    ' Here we call the main program
    MainProgram()
  </script>
</job> 
```

在`Constants.vbs`收集您以后要使用的所有常量并在其他 VBS 文件中定义您的函数。在您的主程序文件`MainProgram.vbs`中，创建一个`sub`被调用`MainProgram()`并在那里编写您的程序。在这个子例程中，您可以使用在其他 VBS 文件中定义的所有常量和函数。

例如 ：

```
sub MainProgram()
  ' Local variables
  Dim strMessage, strSendTo, strSubject
  ' OpenFile is a function from FileFunctions.vbs
  strMessage = OpenFile("C:\Msg\message.html")
  strSendTo = "email.address@yourdomain.com"
  strSubject = "Daily report - " & date
  ' SendMessage is a function from SendMail.vbs
  ' cFrom and cServer are constants from Constants.vbs
  SendMessage(cFrom, strSendTo, strSubject, strMessage, cServer)
  ' Logger is a function from LoggingFunctions.vbs
  Logger("Daily report sent - " & now())
end sub 
```

希望你明白我的想法，我可以帮助一些人编写更好的 VBS 应用程序 :)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-13T20:55:26.050

在接受的答案的基础上，这是一个包含子过程，它采用相对于脚本位置而不是工作目录的路径：

```
Sub include( relativeFilePath ) 
    Set fso = CreateObject("Scripting.FileSystemObject")
    thisFolder = fso.GetParentFolderName( WScript.ScriptFullName ) 
    absFilePath = fso.BuildPath( thisFolder, relativeFilePath )
    executeGlobal fso.openTextFile( absFilePath ).readAll()
End Sub 
```

请注意，您还可以在路径中使用`.`和`..`部分来将文件包含在父文件夹等中，并且从哪里启动脚本并不重要。例子：

```
include "..\Lib\StringUtilities.vbs" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T02:35:11.393

这个 VBScript 是在本地使用，还是提供经典的 ASP 风格？

如果它是经典的 ASP，你可以使用 SSI 来做它：

```
<!-- #include virtual="/PathTo/MyFile.vbs" --> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-15T04:50:20.887

您可以使用 ExecuteGlobal 函数在全局命名空间中运行任意 VBS 代码。一个例子可以在这里找到：http: [//www.source-code.biz/snippets/vbscript/5.htm](http://www.source-code.biz/snippets/vbscript/5.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T05:18:19.457

IIS 5 及更高版本还允许使用[`script`标记](http://support.microsoft.com/kb/224963 "为包含使用增强的 <SCRIPT> 标记")来包含 ASP 文件中的其他文件。（您的 VBScript 是 ASP 页面还是 Windows 脚本？）这是一个示例：

```
<script language="VBScript" runat="server" src="include.asp"></script> 
```

行为和规则与服务器端包含有点不同。注意：我从未真正尝试过使用经典 ASP 中的这种语法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-23T22:37:22.303

您绝对可以在 cscript 中使用 WSF 脚本标记：

```
<script language="VBScript" src="ADOVBS.INC"/> 
```

如果您使用 ADOVBS.inc 进行 ADODB 访问，请确保删除

```
<% %> 
```

来自 ADOVBS.INC 的标签。

# asp.net - 会话超时 ASP.Net

> ID：316172
> 
> 赞同：2
> 
> 时间：2008-11-25T02:24:19.623
> 
> 标签：asp.net, session-state

我正在尝试增加所有会话的超时时间。该站点由 Godaddy 托管，它是用 Flash（当然是客户端）和后端的 asp.net 编写的。我已将此添加到我的 web.config 中，

```
<sessionState timeout="720">

</sessionState> 
```

这真的是我需要做的吗？我不想让会话永远过期，但我确信服务器需要在某个时候回收该内存......我没有在会话中存储任何东西，真的，只是用它来跟踪用户的进度通过网站，以及用户是否登录。

感谢您的任何指点...所有文档似乎都看似简单，这让我有点紧张...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-25T02:34:18.183

是的！如; 是的，这是你唯一需要做的...

但是，要获得“永无止境的超时”，您必须每 719 分钟创建一个后台 HTTP 请求（它将传输会话 cookie）回服务器。尽管从理论上讲，您还必须使用例如某种数据库或其他东西进行“进程外”会话...

或者您可以推出自己的会话处理程序，我认为 APS.NET 通过使用某种适配器模式或其他方式对此提供支持，但我不确定。然后你可以有一个“真正的”永无止境的会议......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-25T04:48:40.517

如果您使用表单身份验证，您还需要在 web.config 中设置表单身份验证超时

例子：

```
<authentication mode="Forms">
  <forms
    name=".ASPXAUTH"
    loginUrl="/Home/Default.aspx"
    defaultUrl="/Dashboard/Default.aspx"
    protection="All"
    timeout="30"
    slidingExpiration="true"
  />
</authentication> 
```

# sql-server - 在 SQL Profiler 中查找特定 LINQ 查询的巧妙技巧

> ID：316178
> 
> 赞同：5
> 
> 时间：2008-11-25T02:28:42.030
> 
> 标签：sql-server, linq, profiler

由于有时会创建疯狂的 SQL，因此分析 LINQ 查询及其执行计划尤其重要。

我经常发现我需要跟踪特定查询并且很难在查询分析器中找到。我经常在有很多正在运行的事务（有时是生产服务器）的数据库上执行此操作 - 所以仅仅打开 Profiler 是不好的。

我还发现尝试使用 DataContext 来跟踪是不够的，因为它没有给我 SQL，我实际上可以自己执行。

到目前为止，我最好的策略是在我的查询中添加一个“随机”数字，并在跟踪中对其进行过滤。

林克：

```
where o.CompletedOrderID != "59872547981" 
```

分析器过滤器：

```
'TextData' like '%59872547981' 
```

这适用于几个警告：

*   我必须小心记住删除条件，或者选择不会过多影响查询计划的东西。是的，我知道把它留在里面是自找麻烦。
*   据我所知，即使使用这种方法，我也需要为我需要跟踪的每个 LINQ 查询启动一个新的跟踪。如果我转到现有跟踪的“文件 > 属性”，则无法更改过滤条件。

您无法在您的应用程序中运行查询并在 Profiler 中看到它，而无需任何额外的努力。只是希望其他人想出了比这更好的方法，或者至少建议搜索一个比在列上查询更“危险”的标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T02:50:08.133

弄乱 where 子句可能不是最好的做法，因为它可以并且会影响查询的执行计划。

用投影到匿名类来做一些时髦的事情 - 使用唯一的静态列名或不会影响执行计划的东西。（这样你就可以在生产代码中保持原样，以防你以后需要对生产代码进行任何分析......）

```
from someobject in dc.SomeTable
where someobject.xyz = 123
select new { MyObject = someobject, QueryTraceID1234132412='boo' } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T03:38:14.293

您可以使用 Linq to SQL Debug Visualiser - [http://weblogs.asp.net/scottgu/archive/2007/07/31/linq-to-sql-debug-visualizer.aspx](http://weblogs.asp.net/scottgu/archive/2007/07/31/linq-to-sql-debug-visualizer.aspx)并在您的监视窗口中查看它。

或者，您可以`DataContext.GetCommand();`在 SQL 执行之前使用它来查看它。

您还可以查看`DataContext.GetChangeSet()`以查看将要插入/更新或删除的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T02:40:12.913

您可以让您的 datacontext 注销原始 SQL，然后您可以在分析器中搜索它以检查性能。

```
using System.Diagnostics.Debugger;

yourDataContext.Log = new DebuggerWriter(); 
```

现在，您的所有 SQL 查询都将显示在调试器输出窗口中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-06T05:17:44.837

EFCore 有一个`TagWith()`专门用于此目的的功能。

```
 var nearestFriends =
      (from f in context.Friends.TagWith("This is my spatial query!")
      orderby f.Location.Distance(myLocation) descending
      select f).Take(5).ToList(); 
```

[https://docs.microsoft.com/en-us/ef/core/querying/tags](https://docs.microsoft.com/en-us/ef/core/querying/tags)

不幸的是，您无法使用[查询存储](https://docs.microsoft.com/en-us/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store?view=sql-server-ver15)找到它们:-)

这是因为查询*前*的注释被[去掉了](https://github.com/MicrosoftDocs/sql-docs/issues/2789)。

真可惜！希望我不必再等12年。

# c++ - 为什么编译器为 L"" 的隐式类型转换选择 bool 而不是字符串？

> ID：316181
> 
> 赞同：11
> 
> 时间：2008-11-25T02:32:08.763
> 
> 标签：c++, visual-c++, implicit, explicit

最近引入了应用程序开始失败的方法的重载。最后追踪它，新方法在我没想到的地方被调用。

我们有

```
setValue( const std::wstring& name, const std::wstring& value );

std::wstring avalue( func() );
setValue( L"string", avalue );
std::wstring bvalue( func2() ? L"true", L"false" );
setValue( L"bool", bvalue );
setValue( L"empty", L"" ); 
```

它已更改，以便在存储 bool 值时我们使用相同的字符串（字符串的内部数据存储）

```
setValue( const std::wstring& name, const std::wstring& value );
setValue( const std::wstring& name, const bool& value );

std::wstring avalue( func() );
setValue( L"string", avalue );
setValue( L"bool", func2() );
setValue( L"empty", L"" ); << --- this FAILS!?! 
```

L"" 的问题在于它是隐式转换的，以前它很高兴成为 std::wstring，但它不喜欢成为布尔值。MSVC 编译器不会抱怨或发出警告，所以我担心即使我“修复”了 setValue(L"empty", L""); 成为

```
setValue( L"empty", std::wstring() ); 
```

其他人可能会稍后再使用 setValue(L"empty", L"" ); 并且不得不再次追查这个问题。

我们曾考虑在方法上使用显式，但它不是此用法的有效关键字。有没有办法让编译器抱怨这个，或者以其他方式阻止这个问题？否则，我正在考虑更改采用 bool 的方法的名称，以确保它不会做出错误的猜测。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-25T02:38:26.520

首先，这个问题的原因：C++ Standard ¹定义了转换序列的顺序。它表示用户定义的转换序列比标准转换序列差。在您的情况下发生的是字符串文字经历了布尔转换（定义在. 这是标准转换）。它不使用用户定义的转换，如果它采用另一个重载则需要该转换。[`[over.ics.rank]/2.1`](http://eel.is/c++draft/over.ics.rank#2.1)^(`4.12``std::wstring`)

我建议简单地更改其中一个重载的名称或添加一个直接接受字符串文字的重载（使用参数 type `wchar_t const*`）。

* * *

^(1))

> 在比较隐式转换序列的基本形式时（定义见`[over.best.ics]`）
> 
> (2.1) 标准转换序列是比自定义转换序列或省略号转换序列更好的转换序列，
> (2.2) 自定义转换序列是比省略号转换序列更好的转换序列。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-25T03:03:34.440

L"" 是指向宽字符串的指针。编译器认为转换为 bool 优先于转换为 std::wstring。

为了解决这个问题，引入一个新的 setValue：

```
void setValue(std::wstring const& name, const wchar_t * value); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T03:19:28.387

由于 bool 是内置类型，因此首选从 wchar_t 到 bool 的转换。我想说最简单的解决方案是添加一个重载，该重载采用 wchar_t 数组并在那里显式转换：

```
setValue( const std::wstring& name, const wchar_t s[] )
{
     setValue(name, wstring(s));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T02:48:27.357

为了简化一点，下面的代码

```
#include <iostream>
using namespace std;

void f(const string &s)
{  cout << "string version called" << endl;  }

void f(const bool &b)
{  cout << "bool version called" << endl;  }

int main()
{  f("Hello World");  } 
```

打印“**布尔**版本调用”。您确定您的代码仅因空字符串而失败吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T02:37:52.607

您可以使新函数采用 bool 以外的其他类型——也许只是 bool 的代理——它不能从文字字符串转换。但实际上我只是重命名布尔函数并完成它。

# c# - 问题如何使 C# 的 VS IDE 设计器失效/刷新？

> ID：316193
> 
> 赞同：3
> 
> 时间：2008-11-25T02:35:25.123
> 
> 标签：c#, visual-studio-2008, ide, refresh, designer

我从**Form**继承了**CustomForm** ，它实现了一个名为**Prop**的布尔属性。我将使用的表单将继承自**CustomForm**。此属性将对表单进行一些绘制和更改（如果已启用）。但是，这并不能正常工作，设计的 VS IDE 并未刷新以显示更改。但是，如果我按 Ctrl+Shift+B（菜单：构建 » 构建解决方案）VS IDE 将刷新，表单设计器甚至会消失一瞬间，并会在应用新更改后重新绘制自身。

 ******那么，有没有办法通过代码强制 VS IDE 设计器刷新自己，就像我构建解决方案时发生的那样？如果是这样，我可以将该代码添加到**Prop**集访问器中，我的问题就消失了。

请注意，我尝试调用 Invalidate()、Refresh() 和 Update。但他们似乎都没有解决问题......

* * *

这是对我的实际问题的一些见解。我的代码是这样的：

```
internal class MyForm : Form {
    private FormBorderStyle formBorderStyle;
    private bool enableSkin;

    [DefaultValue(false)]
    public bool EnableSkin {
        get {
                return enableSkin;
        } set {
                enableSkin = value;

                if(enableSkin) {
                        BackColor = Color.Lime;
                        MaximizedBounds = Screen.GetWorkingArea(this);
                        TransparencyKey = Color.Lime;

                        base.FormBorderStyle = FormBorderStyle.None;
                } else {
                        BackColor = SystemColors.Control;
                        MaximizedBounds = Rectangle.Empty;
                        TransparencyKey = Color.Empty;

                        base.FormBorderStyle = FormBorderStyle;
                }
        }
    }

    [DefaultValue(FormBorderStyle.Sizable)]
    public new FormBorderStyle FormBorderStyle {
        get {
                return formBorderStyle;
        } set {
                formBorderStyle = value;

                if(EnableSkin) {
                        base.FormBorderStyle = FormBorderStyle.None;
                } else {
                        base.FormBorderStyle = formBorderStyle;
                }

        }
    }

    internal MyForm() {
        EnableSkin = false;
        FormBorderStyle = FormBorderStyle.Sizable;
    }
} 
```

我遇到的问题是这样的：http: [//blogs.msdn.com/calvin_hsia/archive/2007/05/01/windows-vista-aero-borderstyle-paint-problem-as-non-administrator。 aspx](http://blogs.msdn.com/calvin_hsia/archive/2007/05/01/windows-vista-aero-borderstyle-paint-problem-as-non-administrator.aspx)

在我的情况下，当您将 EnableSkin 设置为 True，将其更改回 False，然后更改 FormBorderStyle 将导致您在上面的链接中看到的问题时会发生这种情况。如文章所述，以管理员身份运行 VS 时不会发生此问题。

这就是为什么我正在寻找一种方法来刷新 VS IDE 设计器。换句话说，既然我找到了那篇文章，我需要重新创建窗口，就像重新构建解决方案时发生的那样。

* * *

如何在基本表单中声明属性？

我目前有：

```
public class MyForm : Form { } 
```

而且我只能在该类中声明属性，而不是在 Form one 中......我也使用了 Invalidate() 正如我在第一篇文章中所说的那样，但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-25T16:22:06.233

其他人帮助我解决了这个问题。当用户将**EnableSkin**设置为 false时，我只调用**ReCreateHandle() 。**问题解决了 ：）

 **不过还是谢谢大家：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T05:22:58.763

您需要做的就是将此属性添加到您的属性中：

```
 [Description("Description of your property."), NotifyParentProperty(true),
 RefreshProperties(RefreshProperties.Repaint)] 
```

这将导致 IDE 在值更改时重新绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T13:31:06.313

据我所知，如果您正在显示进行绘画的对象，则绘画例程不会反映在 IDE 中。例如，如果您的基本表单进行一些绘画，继承的显示...但是如果您打开基本表单，它不会显示绘画结果。

我认为如果您需要查看更改子窗体上的属性的结果，应该以基本形式声明该属性，并以该形式进行绘制。

顺便说一句...在属性正文中，您应该调用`this.Invalidate()`以刷新绘画。

希望有帮助！

# java - 原语是否分配了内存地址？

> ID：316194
> 
> 赞同：6
> 
> 时间：2008-11-25T02:35:47.790
> 
> 标签：java, primitive

我试图了解在后台声明和分配原始类型的过程。

1.  `int i;`
2.  `i = 3;`

对于 1)，在内存堆栈上，它分配一个空间来存储一个名为 i 的 int 类型值 对于 2)，它将值 3 分配给上面保留的空间

那里有内存地址吗？在我的印象中，内存地址总是和堆上的对象相关联的？

**更新：**

关于回复：

因此，对于堆栈上的每个变量，它们都被分配了一个内存地址，就像堆上的对象一样。我对么？

但是对于Java来说，不是这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T03:42:35.237

并不总是涉及地址。如果编译器发现程序员从未使用过变量的地址，它可以将变量放入寄存器。因此，您不需要对主内存进行任何访问。例如，在您上面的代码中，编译器可以生成的内容可能很简单

```
add $2, $0, 3 
```

将值 3 放入寄存器 2。一旦您创建了一个指针并使其指向该变量，那么您实际上就有了一个地址。然后变量不能再只在寄存器中了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T02:38:20.500

假设您在谈论 C 或 C++（我不知道），是的。您可以像这样访问地址：

```
int i = 3;

int *k = &i; // k now is a pointer to i

*k = 4; // assigns the value k points to (i) to 4, i is now 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T02:45:29.080

堆栈缓冲区溢出如何发生？:) 有人必须写一个指向堆栈的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-24T20:18:24.947

真正的堆栈是进程虚拟内存的特殊区域，所以堆栈中的所有内容都有内存地址。ESP (SP) 注册表（x86 架构）持有的堆栈头。堆栈地址通常低于内存地址，因为堆栈位于更靠近进程虚拟内存的开头然后是堆。

# html - 第 2 部分超链接

> ID：316197
> 
> 赞同：-6
> 
> 时间：2008-11-25T02:36:25.493
> 
> 标签：html, hyperlink

首先是应用程序：

一，我进入联盟营销。

不久前，我有一位上线成员教我们如何为我们的网站增加流量。我们中的大多数人都不精通计算机，我可能还不是。但他会为我们做的是构建一个简单的 html 代码，我们可以将其复制并粘贴到我们的网络编辑器中。一旦完成，我们将用我们的信息填写空白。

好吧，在原始 html 中，我们被指示将我们的网站放在 html 的 (href) 位置。这个 href 引用的编码与我见过的大多数超链接一样，但在标签的末尾是一个声明 =0 或 =1 的代码。一个在我的页面上，另一个在他的登录页面（他的页面）上。我不记得顺序了。所以基本上这个链接将我引导到他的页面，并引用我的新潜在客户注册页面。

无论如何，此功能的目的是将人们从我的下线站点带到我的站点以获取更详细的说明。如果潜在客户决定参与，他会点击主页（我的）上的注册链接。

现在发生这种情况之后，我的下线页面中的（href 链接）代码以某种方式与我页面上的相同链接进行交互，并将潜在客户转发到他的注册页面。

如果它来自任何其他来源而不是代码将接受它作为我从另一个来源（我的广告）的注册，并将潜在客户引导到我的注册页面。

好的，这就是我们之前取得的成就，但我不知道如何在我的页面中设置此代码或 html 以实现这一目标。

如果您知道如何执行此操作以包含主页（登录页面）和交付页面（在线会员）的（href）字符串，我真的需要有人在这里帮助我

如果你知道我应该用什么词更好地问这个问题，请用 html 术语启发我。

好的，这就是坚果壳。寻找能够在来自不同站点的两个页面之间进行交互并实现一个基本需求的 html。将该人引导至正确的链接地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T03:09:21.607

您的 HTML 页面实际上需要后端代码（PHP、.NET 等），以便了解您朋友发送给您的参数（地址末尾的“=0”内容）没有看到该代码，没有可以真正告诉您在链接的 URL 中放入什么（“href”部分）

# c++ - 哪个 C++ 库用于 CGI 编程？

> ID：316200
> 
> 赞同：20
> 
> 时间：2008-11-25T02:38:01.577
> 
> 标签：c++, cgi

我正在考虑用编译语言做一些工作（为了好玩），以针对 php 运行一些简单的测试和基准测试。

基本上我想看看其他人用什么来进行 C++ CGI 编程。（包括后端数据库，如 mysql++ 或其他）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-25T02:59:17.693

我不确定您到底在寻找什么，但有一个名为 wt（发音为“witty”）的 C++ Web 框架。它一直保持最新状态，如果您想要健壮的 C++ 服务器端代码，这可能就是您正在寻找的。

[您可以在wt 主页](http://www.webtoolkit.eu/wt/)上查看并阅读更多内容。

PS 如果您没有使用 *nix 或 C++ 库的经验，安装 wt 可能会遇到一些麻烦。有演练，但由于像这样的框架是少有人走的路，预计会遇到一些障碍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-12-15T18:12:19.103

另一个选择是 Cgicc 库，它看起来很成熟（目前为 3.x 版）：

[http://www.gnu.org/software/cgicc/](http://www.gnu.org/software/cgicc/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-25T02:49:11.350

如果我想在那个级别上工作，我可能只是编写一个直接的 Apache 或 IIS 模块而不是 CGI。

也就是说，如果你*确实*想使用 CGI，我建议使用 Thomas Boutell 的古老[cgic](http://www.boutell.com/cgic/)。它是一个“普通”的 C 库，但自 90 年代中期以来一直在使用，因此它经过了彻底的测试并且坚如磐石。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-03-28T00:10:46.707

查看[Boost 的 C++ CGI](http://cgi.sourceforge.net/)类，它还*不是 boost 的一部分*。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-25T02:53:31.840

简而言之，我认为通用服务器 CGI 编程没有这样的事情（当然很高兴被证明是错误的）。

相反，您可能必须针对服务器 API，例如[Apache 的](http://httpd.apache.org/docs/2.2/developer/). [这](http://www.apachetutor.org/dev/request)看起来像是对请求处理的合理介绍，这将是您所做工作的重要组成部分。

作为替代方案，[Lighttpd](http://www.lighttpd.net/)可能对开发人员更加友好，并且（特别是如果您正在考虑性能）更快。

我注意到有一个[cpp-netlib](http://cpp-netlib.blogspot.com/)正在开发中，但它似乎只是 HTTP 客户端。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-14T18:02:05.760

我发现使用[CppCMS](http://cppcms.com/wikipp/en/page/main)开发*快速 CGI*应用程序以部署在[nginx](http://nginx.org/)服务器中非常愉快——尽管它从未投入生产 =(。CppCMS 项目还包括一些用于 SQL 连接的库。

# windows - 如何将应用程序设置为以编程方式打开某种类型文件的默认程序？

> ID：316204
> 
> 赞同：4
> 
> 时间：2008-11-25T02:39:24.333
> 
> 标签：windows, registry, file-association

在 MFC 中我的程序生成了一个可执行文件，我想将其用作打开`.jpg`文件的默认程序。也就是说，每双击一个`.jpg`文件，我的程序就会运行。

我尝试添加一些将`.jpg`文件链接到我的程序的注册表项，例如`HKEY_CLASSES_ROOT\.jpg\shell\open\command`（将其值设置为`"myProgram.exe" "%1"`）和`HKEY_CLASSES_ROOT\myProgram`.

该方法工作得很好，除非其他一些应用程序自己注册以打开`.jpg`文件。例如，我在我的电脑上安装了 acdSee，所以每次我双击一个`.jpg`文件时，它总是启动 acdSee 而不是我自己的程序。但是当我用我的程序注册一个全新类型的文件时，它可以在程序中打开。我不知道如何以编程方式将我的程序设置为已注册文件的默认打开程序。谁能帮我解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T03:25:30.857

执行此操作的更典型/标准的方法是将“.jpg”键的默认值设置为更清楚地标识文件类型的名称，然后在那里设置各种关联的操作。所以对于 jpgs，你可以这样做：

```
HKCR\.jpg
   @default = MyApp.JpegImage
HKCR\MyApp.JpegImage\shell\open\command
   @default = "myApp.exe "%1"" 
```

如果其他程序决定注册该类型，它们会将 HKCR.jpg 的默认值替换为其他值，例如 OtherProgram.Jpg。此时，您可以通过将值设置回 MyApp.JpegImage 将其重新注册到您的应用程序。

**免责声明：**在进行此类更改时，还请尽量尊重用户的偏好。例如，在安装您的应用程序时，为用户提供设置此文件关联或不设置它的选项。如果用户希望这样做，您还可以从已安装的应用程序中提供一个命令来重置关联。

如果您想向现有的注册类型添加一些额外的命令，您将读取 .jpg 键的默认值以查找文件类型的名称。然后您可以打开该键并向现有的一组操作添加一个操作。例如，您可以添加以下内容：

```
HKCR\ExistingApp.JpegImage\shell\myopen\
    @default = "Open with MyApp"
HKCR\ExistingApp.JpegImage\shell\myopen\command\
    @default = "myApp.exe "%1"" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T04:46:59.227

请注意，通过向 HKCR 写入密钥，您实际上是在写入 HKLM\Software\Classes。这将需要管理权限。但是，您可以通过将密钥写入 HKCU\Classes\Root 来在用户上下文中进行每个用户的更改。

此外，HKCU 中的用户首选项将覆盖 HKLM 中的系统默认值，这听起来可能是您的问题。

这是当程序没有将扩展注册为“默认”时（该程序是否列在控制面板的“设置程序和默认值”中？）

是时候开始[阅读文档了](http://msdn.microsoft.com/en-us/library/cc144104(VS.85).aspx)！

# asp.net-mvc - 在 ASP.NET MVC 中向视图公开多个对象的最佳方法是什么？

> ID：316210
> 
> 赞同：4
> 
> 时间：2008-11-25T02:41:18.870
> 
> 标签：asp.net-mvc

我对 ASP.NET MVC 和一般的 MVC 模式有点陌生，但我真的在挖掘概念和编写应用程序的速度。我正在努力解决的一件事是如何将多个对象暴露给视图。我使用了很多强类型视图，效果很好，但是如果我的视图依赖多个对象怎么办？现在我正在做一些非常hacky的事情并将字典传递给视图，然后键入不同的对象。有没有更好的模式呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-25T02:46:44.850

您有两个主要选项，根据您的应用程序，任何一个都可以很好地工作。

1) 只需将对象放入 ViewData 集合中。如果您有许多不同的控制器将不同的数据传递给不同的视图，这将很有效。它还取决于您在将对象转换为正确类型时希望从对象中进行多少装箱/拆箱。此选项更灵活，但类型安全性更低，可能更脆弱。

2) 创建包含对一组视图有用的其他强类型对象的强类型对象。如果您倾向于将相同的数据传递给大多数视图并且控制器较少，则此方法效果很好。

您还可以考虑传递一个对象，该对象公开一个可以获取不同模型对象（一种定位器类）的接口，但这可能会导致比修复它们更多的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-25T03:19:57.140

在您的控制器中创建一个嵌套类。

```
public class WhateverControllerViewData
{
   public ObjectA ObjectA {get;set;}
   public ObjectB ObjectB {get;set;}
} 
```

在您的 ActionMethods 中分配给他们

```
{
   var wcvd = new WahteverControllerViewData;
   wcvd.ObjectA = whatever;
   ..

   Return View(wcvd);
} 
```

然后在你的视图中使用它

```
<%= ViewData.Model.ObjectA.Whatever %> 
```

确保创建一个以嵌套类为类型的强类型视图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-25T02:45:54.383

您可以简单地将每个对象存储在 ViewData 中，然后在您的视图中转换适当的对象类型。

控制器：

```
 ViewData["ObjectA"] = objectA;
 ViewData["ObjectB"] = objectB; 
```

看法：

```
 <%= ((ObjectA)ViewData["ObjectA"]).PropertyA %>
 <%= ((ObjectB)ViewData["ObjectB")).PropertyB %> 
```

或者更好，

```
 <% 
    var objectA = (ObjectA)ViewData["ObjectA"];
    var objectB = (ObjectB)ViewData["ObjectB"];
 %>

 <%= objectA.PropertyA %>
 <%= objectB.PropertyB %> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-25T12:38:19.103

我会构建您的模型以包含您的各种对象类型：

```
public class TheModel {

  public DataClassA DataTypeA { get; set; }

  public DataClassB DataTypeB { get; set; }

} 
```

这消除了强制转换和字典对象等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T02:48:43.927

使用**ViewData**集合将对象传递给视图。您可能希望传递一个 Controller 而不是模型的 1 by 1 对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T03:24:08.877

在 ViewData.Model 中使用匿名类型怎么样？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-03-14T19:48:38.013

Tuple 对象也可以用于该目的，Tuple <Type1, Type2> typleObject 但就您可以定义属性名称而言，更优选强类型容器对象

# php - PHP中的SQL查询：打印数组一无所获

> ID：316211
> 
> 赞同：1
> 
> 时间：2008-11-25T02:42:24.360
> 
> 标签：php, mysql

我有一个查询，它选择表“酒店”中的所有适当记录，然后为每个酒店在表“booked_rooms”中查找特定类型的预订房间以及特定时期的所有这些。因此，首先我根据搜索表单提供的位置从“hotel_table”中取出所有hotel_id，并且对于每个hotel_id，我都会遍历“booked_rooms”表。

这是代码：

```
if(isset($_GET['book'])){
$sql=mysql_query("SELECT hotel_id FROM 'hotels' WHERE city='$city") or   die(mysql_error());
while($row=mysql_fetch_array($sql)){
   $sql_2=mysql_query("SELECT * FROM `booked_rooms` WHERE hotel_id='$hotel_id'
   AND   arrival_date BETWEEN '$arrival_date' AND '$departure_date'
   OR departure_date BETWEEN '$arrival_date' AND '$departure_date'")
or die(mysql_error()); 
}

while($row_2=mysql_fetch_array($sql_2)){
   print_r($row_2);
}

}
// $city, $arrival_date and $departure date are values retrieved from the search form 
```

问题是我通过'hotel'表循环并获取所有适合该位置的hotel_ids，但打印$row_2数组却一无所获。我尝试在 SQL 中使用 JOINS，'foreach' 循环，但也没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T02:51:56.960

不懂 PHP，你可以一次查询吗？

```
SELECT booked_rooms.*, hotels.* FROM 'hotels' 
JOIN 'booked_rooms' ON hotels.hotel_id = booked_rooms.hotel_id
WHERE 
   hotels.city='$city" AND
   (
   booked_rooms.arrival_date BETWEEN '$arrival_date' AND '$departure_date' OR   
   booked_rooms.departure_date BETWEEN '$arrival_date' AND '$departure_date') 
```

检查表周围的 '' 引号是否需要 PHP 字符串等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T03:21:04.140

首先，您的第一个 SQL 中有一个错误，因为您没有正确引用您的城市名称。然后你不会`hotel_id`从结果集中取出。然后你在错误的地方有第二个循环。

尝试以下操作：

```
if( isset($_GET['book']) ) {
    $sql = mysql_query("SELECT hotel_id FROM 'hotels' WHERE city='".mysql_real_escape_string($city)."'") or die(mysql_error());

    $arrival_date = mysql_real_escape_string($arrival_date);
    $departure_date = mysql_real_escape_string($departure_date);
    while( $row = mysql_fetch_assoc($sql) ) {
        $hotel_id = $row['hotel_id'];
        $sql_2 = mysql_query("SELECT *
            FROM `booked_rooms`
            WHERE hotel_id = ".$hotel_id."
                AND (
                    arrival_date BETWEEN '".$arrival_date."' AND '".$departure_date."'
                    OR departure_date BETWEEN '".$arrival_date."' AND '".$departure_date."'
                  )")
        or die(mysql_error());

        while( $row_2 = mysql_fetch_assoc($sql_2) ) {
           print_r($row_2);
        }
    }

}

// $city, $arrival_date and $departure date are values retrieved from the search form 
```

我还建议您在空白处更加慷慨。它使 PHP 更易于阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T03:58:02.880

请不要从外部、不受信任的数据中构建 SQL 查询。这就是 Bobby Tables 问题。

有关使用参数化语句的详细信息，请参阅这样的页面[。](http://en.wikibooks.org/wiki/Programming:PHP:SQL_Injection#Use_Parameterized_Statements)

# php - 如何使用数据库和 PHP 会话来存储用户的购物车？

> ID：316222
> 
> 赞同：4
> 
> 时间：2008-11-25T02:48:03.537
> 
> 标签：php, codeigniter

如何使用数据库和 PHP 会话来存储用户的购物车？如果有帮助，我正在使用 CodeIgniter。

示例代码也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T03:30:14.653

我建议您查看[CodeIgnitor Session Class](http://codeigniter.com/user_guide/libraries/sessions.html)。

此外，您可以查看[Chris Shiflett](http://shiflett.org/articles/storing-sessions-in-a-database)对此主题的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T13:40:21.787

我会像这样编写一个添加到购物篮的函数：

```
function AddToBasket(){
    if(is_numeric($_GET["ID"])){
        $ProductID=(int)$_GET["ID"];
        $_SESSION["Basket"][]=$ProductID;
        $sOut.=ShowBasketDetail();
        return $sOut; 
    }
} 
```

在这个购物篮函数中，我们将产品 ID 保存在会话数组中。

这是我在展示篮功能中的内容：

```
function ShowBasket(){
    foreach($_SESSION[Basket] as $ProductID){
        $sql="select * from products where ProductID=$ProductID";
        $result=mysql_query($sql);
        $row=mysql_fetch_row($result);
        echo "Product: ".$row[0];
        }
} 
```

对于会话篮中的每个 ProudctID，我们进行 SQL 查询以输出产品信息。

现在最后但并非最不重要的是，一个明确的篮子功能：

```
function ClearBasket(){
    unset($_SESSION[Basket]);
} 
```

`session_start();`在将任何产品 ID 添加到会话篮之前，请不要忘记。也不要忘记该`mysql_connect();`功能，在对数据库进行任何查询之前，您需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-22T05:44:14.447

这个怎么样 ; - 当客人在购物车中添加一件商品时

```
 function addCartItem($item_id, $qty)
  {
    $basket = $this->session->userdata('basket');
    if(!$basket)
    {
       $this->session->set_userdata('basket', array($item_id => $qty));
    }
    else
    {
       ## get array from $basket and *merge some new value from input
    }
  } 
```

# iphone - [UIImage imageNamed...] 和 [UIImage imageWithData...] 之间的区别？

> ID：316236
> 
> 赞同：65
> 
> 时间：2008-11-25T02:53:28.067
> 
> 标签：iphone, cocoa-touch

我想从文件系统将一些图像加载到我的应用程序中。有两种简单的方法可以做到这一点：

```
[UIImage imageNamed:fullFileName] 
```

或者：

```
NSString *fileLocation = [[NSBundle mainBundle] pathForResource:fileName ofType:extension];
NSData *imageData = [NSData dataWithContentsOfFile:fileLocation];

[UIImage imageWithData:imageData]; 
```

我更喜欢第一个，因为它的代码少了很多，但是我看到有人说图像是缓存的，并且这种方法使用更多的内存？由于我不信任大多数其他论坛上的人，我想我会在这里问这个问题，是否有任何实际区别，如果有，哪个“更好”？

我曾尝试使用对象分配工具对我的应用程序进行分析，但我看不到任何实际差异，尽管我只在模拟器中尝试过，而不是在 iPhone 本身上尝试过。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2008-11-25T03:09:26.287

这取决于你对图像做什么。该`imageNamed:`方法确实缓存了图像，但在许多情况下，这将有助于内存使用。例如，如果您加载 10 次图像以在表格视图中与一些文本一起显示，UIImage 将仅在内存中保留该图像的单个表示，而不是分配 10 个单独的对象。另一方面，如果您有一个非常大的图像并且您没有重复使用它，您可能希望从数据对象加载图像以确保在完成后将其从内存中删除。

如果您没有任何巨大的图像，我不会担心。除非您发现问题（以及检查对象分配而不是抢先优化的荣誉），否则我会选择更少的代码行而不是可忽略的内存改进。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-25T04:42:34.023

根据我的经验`[UIImage imageNamed:]`，性能显着提高，尤其是在`UITableViews`.

不仅仅是内存，还有解码`image`。将其缓存起来要快得多。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-19T14:37:28.500

正如**UIImage**的 API 参考所说：

> **+(UIImage *)imageNamed:(NSString *)name**
> 
> 此方法在系统缓存中查找具有指定名称的图像对象，如果存在则返回该对象。如果匹配的图像对象尚未在缓存中，则此方法从指定文件加载图像数据，缓存它，然后返回结果对象。
> 
> **+(UIImage *)imageWithContentsOfFile:(NSString *)路径**
> 
> 此方法不缓存图像对象。

因此，我们可以看到，如果您有很多相同的**UI 元素**（例如 UITableViewCell）可能使用相同的图像（通常作为**图标**），并且由于性能原因，我们当然希望重用**相同的图像**，这样我们将节省一些内存以供其他用途。通常，**重用的图像**通常用于用户可能**多次**操作的 ui 元素中。所以我们很重视重用它。所以你可以选择使用**imageNamed**方法。

另一方面，在一个应用程序中，会有一些**UI元素**在应用程序的生命周期中存在，例如一个Button，一个logo视图，所以这些UI元素使用的这些图像也可能在应用程序的生命周期中存在。生命周期，你不会考虑这些图像是否应该被缓存。所以你可以选择使用**imageNamed**方法。

* * *

相反，在一个应用程序中，往往会有一些**UI Elements**是动态创建的。例如，我们的应用程序支持动态**背景**，用户可以选择自己喜欢的背景。而**背景**可能是图像。所以我们可能会有一个界面列出许多不同的**背景**（通常使用**UIImageView**显示）供用户选择，我们可以将列表视图命名为**MyBackgroundListView**。所以一旦用户选择了背景**图片**，**MyBackgroundListView**应该被销毁，因为它已经完成了它的功能。下次用户想要更改他/她的背景时，我们可以创建**再次**MyBackgroundListView 。所以****MyBackgroundListView**使用的**图像**不应该被缓存，否则我们的应用程序的内存将耗尽。所以这次你应该使用 **imageWithContentsOfFile**方法。**

 ******正如 Apple 的[Supporting High-Resolution Screens In Views](https://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html)文档所说

> 在具有高分辨率屏幕的设备上，**imageNamed:**、**imageWithContentsOfFile:**和**initWithContentsOfFile:**方法会自动查找名称中带有 @2x 修饰符的请求图像的版本。如果它找到一个，它会加载该图像。如果您不提供给定图像的高分辨率版本，图像对象仍会加载标准分辨率图像（如果存在）并在绘图期间对其进行缩放。

所以你会担心视网膜屏幕问题的图像搜索路径。IOS会帮你处理的。

对不起我的英语不好。愿它有所帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-08-22T08:40:18.963

如果你不希望你的图像被缓存，你也可以直接使用 initWithContentsOfFile ：

```
NSString *fileLocation = [[NSBundle mainBundle] pathForResource:fileName ofType:extension];
UIImage* yourImage = [[[UIImage alloc] initWithContentsOfFile:imagePath] autorelease]; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-11-25T03:19:18.183

我还被告知`[UIImage imageNamed:]`缓存过多，并且图像不经常发布。我被告知要小心使用它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-25T10:16:26.877

当您将图像二进制文件存储在数据库中或从 Web 逐步下载大图像时，imageWithData 非常有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-11-24T22:53:24.270

如果您的应用程序有大量不同的大图像，我不会使用 imagenamed。由于使用过多，我经历了应用程序崩溃。

* * *

## 回答 #8

> 赞同：-11
> 
> 时间：2010-12-17T08:43:08.600

我根本不相信图像会被缓存，我不知道你们为什么都这么说。UIImage 是 NSObject 的子类，它使用引用计数器来跟踪与之相关的事物。因此，当您加载图像时，它会执行相同的操作。如果您多次加载相同的图像，它将（或应该）在内存中只有一个图像副本，并且每次您必须对该图像使用某些东西时都会增加引用计数器。通过引用计数器，我的意思是当计数变为 0 时，它会自行删除。所以“alloc”、“retain”都是计数+1，而“release”是-1。它不仅是管理内存的更好方法，而且这种编程风格还有助于清理内存泄漏。

# python - Python浮点到十进制转换

> ID：316238
> 
> 赞同：72
> 
> 时间：2008-11-25T02:53:44.023
> 
> 标签：python, decimal

Python Decimal 不支持从 float 构造；它希望您必须先将浮点数转换为字符串。

这是非常不方便的，因为浮点的标准字符串格式化程序要求您指定小数位数而不是有效位数。因此，如果您有一个可能有多达 15 位小数的数字，则需要格式化为，如果您在小数点 ( )`Decimal("%.15f" % my_float)`之前还有任何有效数字，这将在小数点后 15 位给您带来垃圾。`Decimal("%.15f" % 100000.3) == Decimal('100000.300000000002910')`

有人可以建议一种在用户输入时从浮点数转换为十进制保留值的好方法，可能会限制可以支持的有效数字的数量吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2008-11-25T03:07:03.747

### 蟒蛇 <2.7

```
"%.15g" % f 
```

或者在 Python 3.0 中：

```
format(f, ".15g") 
```

### Python 2.7+、3.2+

只需将浮点数`Decimal`直接传递给构造函数，如下所示：

```
from decimal import Decimal
Decimal(f) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-11-25T03:40:02.620

你在你的问题中说：

> **有人可以建议一种在用户输入**时从浮点转换为十进制保留值的好方法吗

 **但是每次用户输入一个值时，它都是作为字符串输入的，而不是作为浮点数输入的。您正在某处将其转换为浮点数。直接将其转换为小数，不会丢失任何精度。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2011-12-07T10:22:10.207

我建议这个

```
>>> a = 2.111111
>>> a
2.1111110000000002
>>> str(a)
'2.111111'
>>> decimal.Decimal(str(a))
Decimal('2.111111') 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-04T22:41:36.170

Python 确实支持从浮点数创建十进制。您只需先将其转换为字符串。但是字符串转换不会发生精度损失。您正在转换的浮点数首先没有那种精度。（否则你不需要十进制）

我认为这里的混淆是*我们可以创建十进制格式的浮点文字*，但是一旦解释器使用该文字，内部表示就会变成浮点数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-11-25T03:00:30.873

浮点的“官方”字符串表示由内置的 repr() 给出：

```
>>> repr(1.5)
'1.5'
>>> repr(12345.678901234567890123456789)
'12345.678901234567' 
```

您可以使用 repr() 代替格式化字符串，结果不会包含任何不必要的垃圾。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-09-28T12:12:22.627

您可以通过转换并量化以在逗号后保留 5 位数字

```
Decimal(float).quantize(Decimal("1.00000")) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-25T03:44:20.647

当您说“保留用户输入的值”时，为什么不将用户输入的值存储为字符串，并将其传递给 Decimal 构造函数？

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-05-27T14:55:08.017

主要答案有点误导。该`g`格式忽略小数点后的任何前导零，因此`format(0.012345, ".2g")`返回 0.012 - 三位小数。如果您需要对小数位数进行硬限制，请使用`f`格式化程序：`format(0.012345, ".2f") == 0.01`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-25T03:41:27.237

[1990 年Steele 和 White 以及 Clinger 的 PLDI 1990](http://portal.acm.org/citation.cfm?id=93542&type=proceeding)论文记录了执行此操作的“正确”方法。

您还可以查看关于 Python Decimal 的[SO](https://stackoverflow.com/questions/286061/python-decimal-place-issues-with-floats)讨论，包括我建议尝试使用[frap 之](http://www.ics.uci.edu/~eppstein/numth/frap.c)类的东西来合理化浮点数。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-26T17:07:39.427

您可以使用 JSON 来完成它

```
import json
from decimal import Decimal

float_value = 123456.2365
decimal_value = json.loads(json.dumps(float_value), parse_float=Decimal) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-17T15:50:43.363

受此[答案](https://stackoverflow.com/a/62787689/694360)的启发，我找到了一种解决方法，该解决方法允许从绕过（仅明显地）*字符串*步骤的浮点数中缩短 Decimal 的构造：

```
import decimal
class DecimalBuilder(float):
    def __or__(self, a):
         return decimal.Decimal(str(a))

>>> d = DecimalBuilder()
>>> x = d|0.1
>>> y = d|0.2
>>> x + y # works as desired
Decimal('0.3')
>>> d|0.1 + d|0.2 # does not work as desired, needs parenthesis
TypeError: unsupported operand type(s) for |: 'decimal.Decimal' and 'float'
>>> (d|0.1) + (d|0.2) # works as desired
Decimal('0.3') 
```

这是一种解决方法，但它肯定可以节省代码输入，而且可读性很强。

# nhibernate - Fluent NHibernate 的默认行为是延迟加载 HasMany 收藏？

> ID：316264
> 
> 赞同：7
> 
> 时间：2008-11-25T03:16:39.267
> 
> 标签：nhibernate, fluent-nhibernate

当我设置流利的映射时，集合的默认值是什么？我需要将它们显式设置为延迟加载，还是默认设置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-07T14:35:52.230

请注意，从当天开始，这已更改为符合 NHibernate 标准，默认情况下，所有内容都启用延迟加载。

# eclipse - 如何加速 Eclipse？

> ID：316265
> 
> 赞同：1298
> 
> 时间：2008-11-25T03:18:56.627
> 
> 标签：eclipse, performance

**如何让 Eclipse 体验更快？**

例如：*我禁用了所有不需要的插件（Mylyn、Subclipse 等）。*

我没有使用[Mercurial插件，而是将](http://en.wikipedia.org/wiki/Mercurial)[TortoiseHG](https://en.wikipedia.org/wiki/TortoiseHg)配置为外部工具。

* * *

## 回答 #1

> 赞同：451
> 
> 时间：2008-11-25T06:56:25.470

对 Eclipse 速度影响最大的三个因素是：

*   使用**最新版本的 Eclipse**（2020-06，截至 2020 年 6 月 26 日）
    请注意，[David Balažic](https://stackoverflow.com/users/822870/david-bala%C5%BEic)的[评论](https://stackoverflow.com/questions/316265/how-can-you-speed-up-eclipse/316535#comment38657862_316535)（2014 年 7 月）与六年前的标准相矛盾：

> Indigo (3.7.2) SR2 中的“相同”工作区加载时间为 4 秒，Kepler SR2 (4.3.2) 中的加载时间为 7 秒，Luna (4.4.0) 中的加载时间为 10 秒。都是 Java EE 包。较新的版本有更多捆绑的插件，但趋势仍然很明显。（通过“相同”工作区，我的意思是：使用相同的（额外安装的）插件，从版本控制中签出相同的项目）。

*   **使用最新的 JDK**启动它（在撰写本文时是 Java 14，这不会阻止您在 Eclipse 项目中使用您想要的任何其他 JDK 进行编译：1.4.2、1.5、1.6 旧...）

    ```
     -vm jdk1.6.0_10\jre\bin\client\jvm.dll 
    ```

*   配置**eclipse.ini**（[有关完整的 eclipse.ini，请参阅此问题](https://stackoverflow.com/questions/142357/what-are-the-best-eclipse-34-jvm-settings#144349)）

    ```
     -Xms512m
      -Xmx4096m
      [...] 
    ```

`Xmx`参数是 Eclipse 将获得的内存量（简单来说）。使用`-Xmx4g`，它会获得 4 GB 的 RAM 等。

* * *

笔记：

1.  引用 jvm.dll 有以下优点：

*   启动画面更快出现。
*   进程列表中的 Eclipse.exe 代替了 java.exe。
*   防火墙：Eclipse 想要访问 Internet 而不是 Java。
*   窗口管理品牌问题，尤其是在 Windows 和 Mac 上。

* * *

2020 年 12 月，[Udo](https://stackoverflow.com/users/679858/udo)符合[评论](https://stackoverflow.com/questions/316265/how-can-you-speed-up-eclipse/316535#comment115827363_316535)

> 从版本 4.8 (Photon) 开始，每个版本之后都有稳定的速度增益。
> 主平台在每个版本都进行了优化，以加快加载速度，为深色主题启用更多功能，并为 Java 开发工具的较新 Java 版本添加更多功能。
> 特别是在最近 3 个版本中，启动时间增加了很多。使用最新版本的 Eclipse 2020-12 应该会显着增加启动时间。
> 
> 以我的经验，每个新版本的启动速度都要快得多。
> 但是：仍有一些插件不遵循使用 Eclipse API 的新方式，因此启动速度仍然很慢。
> 由于从 Eclipse 版本 2020-09 开始更改为 Java 11 作为最低运行时版本，至少核心系统使用了 JVM 的更新功能。升级到更新的 API 并使用现代 CPU 的全部功能（例如并发编程模型）取决于其他插件的提供者。

* * *

## 回答 #2

> 赞同：271
> 
> 时间：2011-10-04T18:39:50.563

添加`-Xverify:none`到您的*eclipse.ini*文件中。

它将大大减少您的 Eclipse 启动时间（在我的情况下，如果不是更多，则为 50%）。这将告诉 VM 不要验证它正在加载的所有 .class 文件。

考虑一下：[永远不要在生产系统中禁用字节码验证](https://blogs.oracle.com/buck/never-disable-bytecode-verification-in-a-production-system) （如评论中所述）

* * *

## 回答 #3

> 赞同：123
> 
> 时间：2010-08-24T10:41:12.037

转到**Windows** -> **Preferences** -> **Validation**并取消选中任何`validators`您不想要或不需要的选项。

对于 Eclipse 3.7，您使用**Windows** -> **Preferences** -> **General** -> **Startup and Shutdown**。

* * *

## 回答 #4

> 赞同：87
> 
> 时间：2008-11-25T05:28:44.820

确保您使用 Sun JVM 来运行 Eclipse。

在 Linux，尤其是 Ubuntu 上，默认安装 Eclipse 以使用开源 GCJ，它的性能要差得多。用于`update-alternatives --config java`切换到 Sun JVM 以极大地提高 Eclipse 中的 UI 敏捷性。

* * *

## 回答 #5

> 赞同：51
> 
> 时间：2008-11-25T03:47:07.943

关闭当前未使用的所有打开的项目。

尝试在开发过程中关闭自动发布模式。

* * *

## 回答 #6

> 赞同：50
> 
> 时间：2010-08-03T09:23:46.327

感谢您的提示。这些选项（上面提到的）对我帮助很大：

**视窗：**

增加内存和关于我在 eclipse.ini 中更新的 Java 版本：

```
-Dosgi.requiredJavaVersion=1.6
-Xms512m
-Xmx512m
-XX:PermSize=512m
-XX:MaxPermSize=512M
-Xverify:none 
```

此外，由于我们正在优化速度，因此设置`-Xms`为与 相同的值`-Xmx`会使 JVM 以允许使用的最大内存量启动。

**Linux / Ubuntu：**

使用

```
update-alternatives --config java 
```

* * *

## 回答 #7

> 赞同：48
> 
> 时间：2009-08-27T10:13:56.623

`Windows -> Preferences; General -> Appearance -> Label Decorations`通过禁用标签装饰 ( ) 和在启动时禁用未使用的功能( )可以获得另一个性能提升`Windows -> Preferences; General -> Startup and Shutdown`。

您还可以通过根据您的 JVM 选择不同的垃圾收集策略来获得额外的性能。

如果您厌倦了重启周期，您可以使用ZeroTurnaround 的[JavaRebel](http://en.wikipedia.org/wiki/JavaRebel)。这将缩短您在服务器/客户端重新启动上花费的时间。

* * *

## 回答 #8

> 赞同：40
> 
> 时间：2010-08-09T20:12:39.300

虽然与 Eclipse 没有直接关系：

如果您运行的是 Windows 7（可能是 Windows Vista），如果您的资料位于默认位置 - 您的主文件夹，请务必禁用工作区文件夹的文件索引。默认情况下，Windows 会为您的主文件夹中的所有内容编制索引，这通常只会浪费您的工作空间。（右键单击资源管理器中的工作区文件夹，*属性*->*高级*。）

* * *

## 回答 #9

> 赞同：30
> 
> 时间：2010-07-24T22:36:29.543

禁用病毒扫描程序，或至少将任何病毒扫描程序配置为在读取访问时不扫描 JAR 文件。

* * *

## 回答 #10

> 赞同：29
> 
> 时间：2008-11-25T05:10:41.767

Eclipse 会延迟加载插件，而最常见的插件，例如[Subclipse](http://subclipse.tigris.org/)，如果您不使用它们，它们什么也不会做。它们在运行时根本不会减慢 Eclipse，而且禁用它们也无济于事。事实上，[Mylyn](http://en.wikipedia.org/wiki/Mylyn)被证明可以在正确使用时减少 Eclipse 的内存占用。

我运行带有大量插件的 Eclipse，根本没有任何性能损失。

*   尝试禁用您可能不需要的编译器设置（例如，“parameter is never read”下的子选项）。
*   您使用的是哪个版本的 Eclipse？如果您一遍又一遍地升级旧版本，它们就会变得很慢，因为它们的插件文件夹中充斥着重复的插件（具有不同的版本）。这在 3.4 版中不是问题。
*   使用工作集。它们比关闭项目效果更好，特别是如果您需要一直在一组项目之间切换。

使用 -Xmx 开关不仅需要增加内存，还有[perm gen size](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_permgen_size_available_to_Eclipse%3F)。我认为这个问题在 Eclipse 3.4 中得到了解决。

* * *

## 回答 #11

> 赞同：27
> 
> 时间：2010-07-01T20:15:54.850

在 Windows 尤其是 Linux 上，还有一件事真正加快了 Eclipse 的速度——将 JVM 放在 RAM 磁盘中。

对于 Windows，您可以使用[Qsoft 的商业 RAM 磁盘驱动程序](http://members.fortunecity.com/ramdisk/RAMDisk/ramdriv001.htm)。

对于 Linux，请使用 Internet 上众多文章中描述的任何方法。为 RAM 磁盘提供比 JVM 大小大 10% 的额外空间非常重要。

看看这个。这真的很重要。

* * *

## 回答 #12

> 赞同：21
> 
> 时间：2008-11-25T03:20:38.057

我给它大量内存（在`-Xmx`启动它的命令中添加一个开关）并尽量避免退出和重新启动它 - 我发现最严重的延迟是在启动时，所以给它大量的 RAM 让我在它崩溃之前继续运行更长时间出去。

* * *

## 回答 #13

> 赞同：20
> 
> 时间：2011-02-04T19:20:22.153

除了最新的软件（最新的 Eclipse 和 Java）和更多的 RAM，您可能还需要

*   删除不需要的插件（并非都需要 Mylyn 和 J2EE 版本的 Eclipse）
*   不需要的验证器
*   禁用拼写检查
*   关闭 Java 编辑器中未使用的选项卡（是的，它有助于减少 Eclipse 负担）
*   关闭未使用的项目
*   禁用不需要的标签声明 (SVN/CVS)
*   禁用自动构建

[参考：制作-eclipse-ide-faster](http://pakkatechies.blogspot.com/2011/07/making-eclipse-ide-faster.html)

* * *

## 回答 #14

> 赞同：15
> 
> 时间：2011-01-07T02:40:29.120

我实现了一个插件来配置在运行时加载哪些功能，以提高性能并减少不同插件之间的冲突。

您可能已经在 Eclipse 中安装了许多功能，例如 Android 开发工具、C/C++ 开发工具、[PHP](http://en.wikipedia.org/wiki/PHP)、[SVN](http://en.wikipedia.org/wiki/Apache_Subversion)、[Git](http://en.wikipedia.org/wiki/Git_%28software%29)和[ClearCase](https://en.wikipedia.org/wiki/Rational_ClearCase)插件。因此 Eclipse 很重并且占用大量内存，其中一些并不经常使用。

因此，您可以使用我的工具来创建不同的运行时策略，例如一个包含 Android、Git 和基本 Eclipse，另一个包含 C/C++、SVN 和基本 Eclipse。如果您使用的策略只有 Android 和 Git，下次 Eclipse 只会加载指定的功能。

欢迎您尝试并给我反馈。:)

该工具的名称是[Equinox Advanced Configurator](https://marketplace.eclipse.org/content/equinox-advanced-configurator)。

* * *

## 回答 #15

> 赞同：14
> 
> 时间：2008-11-28T06:10:25.327

另一个技巧是禁用自动构建。

* * *

## 回答 #16

> 赞同：14
> 
> 时间：2010-03-12T16:59:44.820

我还调整了 vmargs 和其他东西。但真正在 Windows 上加速 Eclipse 的是防病毒软件的“正确”配置。您必须禁用打包文件的按需扫描。jar 文件，许多与java 相关的文件都使用PKZIP 算法打包以节省空间。因为 Eclipse 使用大量的 java 文件，所以防病毒软件会尝试单独解压缩并扫描每个文件。所以对于 Windows 平台：关闭打包文件的按需扫描，否则 Eclipse 会非常慢。请记住，不幸的是，禁用此功能会使您的系统抵御攻击的能力较弱，大多数恶意软件都使用加壳程序。

* * *

## 回答 #17

> 赞同：13
> 
> 时间：2010-12-04T16:34:12.193

不可低估的是拥有一台快速的机器。16-32 GB 的 RAM、[SSD](http://en.wikipedia.org/wiki/Solid-state_drive)和一个不错的处理器......你去那里。

* * *

## 回答 #18

> 赞同：13
> 
> 时间：2011-06-09T15:17:06.473

努力配置您的构建路径。如果代码完成必须遍历整个项目文件夹，则会使用大量内存。

*   右键单击您的项目并选择首选项。
*   选择您的构建路径设置并删除您的项目文件夹。
*   然后只添加您拥有源代码和库代码的文件夹。

* * *

## 回答 #19

> 赞同：13
> 
> 时间：2014-02-20T15:28:26.117

在限制打开标签的数量时，我的性能得到了相当大的提升（过去我经常打开 30 多个标签）。您可以让 Eclipse 自动为您处理：

*窗口*->*首选项*->*编辑器*-> 自动关闭编辑器

8 个打开的标签是 >> 符号出现之前的数量，所以我倾向于将其保留为 8。

打开更多选项卡时，最近访问最少的选项卡将被关闭。

->当所有编辑器都脏或固定时

如果它有未保存的修改，您可以提示保存和重用（选项卡将关闭，新的选项卡将在其位置打开）。或者您可以打开一个新的编辑器端，从而增加打开的选项卡的数量（不显眼的选择）。

如果您想确保某些选项卡永远不会自动关闭，您可以固定它们。这通过单击图钉图标（工具栏中最右侧的图标，“图钉编辑器”作为工具提示文本）。

* * *

## 回答 #20

> 赞同：13
> 
> 时间：2015-03-12T09:39:17.590

此线程中的最佳实践在来自[ZeroTurnaround的免费](http://zeroturnaround.com/)[Optimizer For Eclipse](http://zeroturnaround.com/blog/announcing-optimizer-for-eclipse-a-jetpack-for-eclipse/)中实现。

**它有什么帮助？**

*   内存分配不足
*   类验证开销
*   过多的索引和历史记录
*   过时或缓慢的 JDK
*   Eclipse 已过时
*   漫长的构建和重新部署时间

有关更多详细信息，请查看[RebelLabs 的这篇文章](http://zeroturnaround.com/rebellabs/eclipse-having-a-slow-day-speed-it-up-in-a-few-clicks/)。

* * *

## 回答 #21

> 赞同：8
> 
> 时间：2014-09-18T12:34:58.423

```
 **Tips for making Eclipse IDE Faster** 
```

Eclipse 在处理小型项目时会运行得更快。但是当您必须处理大型项目时，您会对其速度感到恼火。即使拥有巨大的 RAM，您也不会对其速度感到满意。以下步骤将帮助 eclipse 提高其速度

1.  通过转到**windows–>preference–>General–>Startup and shutdown**在启动时删除不需要的某些插件激活， 同时确保您不在任何视图中使用这些插件

2.  禁用对您来说用处不大的标签装饰，也将帮助您获得一些性能。转到**Windows->首选项->常规->外观->标签->装饰**

3.  **关闭不需要的项目并使用工作集选项**从一组项目顺利移动到另一组。

4.  配置 eclipse.ini，它将在 eclipse 安装位置可用。

```
 Configuring eclipse.ini should be based on your RAM
   -Xms256m
   -Xmx512m
   -XX:PermSize=512m
   -XX:MaxPermSize=512M 
```

还可以查看[http://wiki.eclipse.org/Eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)以获得更多配置 eclipse.ini 的选项。

5.  不要在编辑器中打开很多标签。最好有大约 20 个标签。定期关闭未使用的选项卡。要打开资源，我们总是可以使用 ctrl+shift+R 和 ctrl+shift+T（java 资源）而不是打开很多选项卡我在限制打开选项卡的数量时体验到了相当大的性能提升（过去我经常有 30 + 标签打开）。您可以让 Eclipse 自动为您处理： **Window->Preferences->Editors->close**编辑器自动打开 8 个标签是 >> 符号出现之前的数量，所以我将 14 设置为我的默认值。打开更多选项卡时，最近访问最少的选项卡将被关闭。当所有编辑器都是脏的或固定的。如果它有未保存的修改，您可以提示保存和重用（选项卡将关闭，新的选项卡将在其位置打开）。或者您可以打开一个新的编辑器端，从而增加打开的选项卡的数量（不显眼的选择）。如果您想确保某些选项卡永远不会自动关闭，您可以固定它们。这通过单击图钉图标（工具栏中最右边的图标，“图钉编辑器”作为工具提示文本）。

6.  转到**Windows -> Preferences -> Validation 并取消选中** 您不想要或不需要的任何验证器。

7.  转到**Windows -> 首选项 -> 常规 -> 外观 -> 并取消选中**您不想要或不需要的任何动画。

8.  转到**Windows -> Preferences -> Maven 并检查 'do not automatically update dependencies'**。

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2009-10-01T12:54:27.050

我在 Windows > Preferences > General 中禁用了所有未使用的选项，它对性能产生了巨大的积极影响，切换选项卡时 eclipse 仍然很慢，我不想增加内存，但滚动时速度要快得多。谢谢你的提示。

* * *

## 回答 #23

> 赞同：6
> 
> 时间：2014-04-07T11:30:17.267

也试试这个，它会提高性能：

> 清理索引 - {workspace path}.metadata.plugins\org.eclipse.jdt.core 清理历史 - {workspace path}.metadata.plugins\org.eclipse.core.resources.history

清理上述文件夹不会影响项目文件。

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2010-11-20T13:18:54.007

好吧，如果您正在使用 Eclipse 开发[GWT](http://en.wikipedia.org/wiki/Google_Web_Toolkit)应用程序，那么就是这样：

[Eclipse中的内存不足错误](http://dinu.blog.com/2010/06/02/out-of-memory/)

还要记住将相同的 VM 参数添加到托管模式配置中。

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2011-01-06T16:43:31.607

如果您使用[Maven](http://en.wikipedia.org/wiki/Apache_Maven)和 ivy，请检查他们的控制台，以防他们在构建期间占用处理。我使用常春藤，除此之外，我有某些 JAR 文件（内部）更改为相同的版本，所以它必须一直锻炼才能获取它们。

如果您已将项目定义在网络驱动器上，那么您还将在构建/读取/写入类型的过程中遇到延迟。

*   禁用/卸载不需要的插件。

*   你不需要的近视

*   关闭未使用的数据库连接

* * *

## 回答 #26

> 赞同：5
> 
> 时间：2011-06-09T16:41:51.820

在特殊情况下，性能不佳可能是由于 h2 或 nwire 数据库损坏。阅读*[加速 Eclipse PDT 和 nWire 的五个技巧以](http://www.nwiresoftware.com/blogs/nwire/2010/09/five-tips-speeding-eclipse-pdt-and-nwire)*获取更多信息。

在我工作的地方，我们依赖虚拟机来运行[Debian](http://en.wikipedia.org/wiki/Debian)。我已经在 VM 上安装了另一个 Eclipse 版本来测试目的，但是如果我运行另一个 Eclipse 版本，这有时会产生冲突。两个 Eclipse 版本共享一个共享文件夹。我不小心让 Debian Eclipse 安装在后台运行一次，这给了我损坏的数据库文件。

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2015-07-11T17:59:05.597

在 Windows 8 上。打开控制面板。找到 Windows Defender。转到设置排除 Spring/Eclipse 和工作区所在的所有文件夹

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2018-11-02T08:15:20.177

除了为内存使用配置 eclipse.ini 之外。我已经通过“启动和关闭选项”进行了配置。我的 Eclipse 现在速度很快。

[![在此处输入图像描述](https://i.stack.imgur.com/bJuJr.png)](https://i.stack.imgur.com/bJuJr.png)

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2008-11-25T05:24:28.650

使用标准插件加速 Eclipse 的唯一真正方法是为其提供更多内存，并在某些情况下访问更快的存储空间/碎片整理硬盘驱动器。

除此之外，您在性能方面无能为力：大多数标准插件没有持续的运行时成本，即使[Mylyn](http://en.wikipedia.org/wiki/Mylyn)也相对较快。

升级到您机器上支持的最新 JVM 也可能会有所帮助。

有些人降级到较旧的 Eclipse 版本以获得更好的性能。使用 Eclipse 经典而不是官方版本也可能有意义。

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2014-12-02T05:05:32.203

试试这些。有两种方法。

**第一道工序**

参考这篇文章。

[http://www.javacodegeeks.com/2014/06/the-real-way-to-make-eclipse-run-faster-on-ubuntu.html](http://www.javacodegeeks.com/2014/06/the-real-way-to-make-eclipse-run-faster-on-ubuntu.html)

**第二程序。**

在终端中执行命令。

```
ramdisk 
```

为 Ubuntu 获得更好的性能和更快的响应。

Ramdisk 是系统内存的一部分。Ubuntu 默认使用一半物理内存 (RAM) 作为 ramdisk，并将其挂载到

> /dev/shm

，它可以像普通磁盘空间一样使用（创建文件和文件夹并以更好的性能操作它们，而不是将它们存储在硬盘上）。如果 ramdisk 使用超过一半的 RAM，数据将被移动到交换空间。如果 ramdisk 使用较少，剩下的仍然可以做 RAM 正在做的事情。

设置ramdisk的上限

如上所述，ramdisk 默认可以使用一半的 RAM。如果要更改上限，请按照以下步骤操作：

1.  用您喜欢的编辑器编辑 /etc/fstab：

    gksudo gedit /etc/fstab

2.  找到此行并更改为如下所示（如果不存在则添加此行，并将 512M 更改为您喜欢的内容。）：

    tmpfs /dev/shm tmpfs 默认值，大小=512M 0 0

3.  重启或重新挂载

    /dev/shm

挂载 /tmp 到 ramdisk

为了方便使用，您可以将目录挂载到

```
/dev/shm 
```

通过以下命令：

mkdir /dev/shm/tmp

chmod 1777 /dev/shm/tmp

mount --bind /dev/shm/tmp /tmp

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2014-05-29T10:22:04.617

关闭大纲视图以加快编辑器之间的切换。
每次切换到不同的选项卡或打开文件时，大纲视图都必须更新，在我的机器上每次大约需要 1 秒。只需 1 秒，但如果你像我一样经常更换标签，它会让你头疼。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2014-12-30T15:19:13.097

如果 Eclipse 运行缓慢，我遵循几个步骤：

1.  安装在 Eclipse 中的任何未使用的插件都应该卸载它们。-- 很少有插件对 Eclipse 有很大影响。
2.  打开当前工作项目并关闭剩余项目。如果它们之间有任何依赖关系，只需在运行时打开即可。如果都是 Maven 项目，那么通过 pom 文件中的矿工本地更改，您也可以将它们设为单独的项目。如果您正在处理独立项目，那么请始终处理工作区中的任何一个项目。不要将多个项目保留在单个工作区中。

3.  更改类型过滤器。它有助于指定要始终引用的特定包。

4.  根据我的经验，不要更改内存 JVM 参数。除非您对 JVM 参数有充分的了解，否则它会导致许多未知问题。

5.  始终取消选中自动构建。特别是 Maven 项目的自动构建是无用的。

6.  关闭所有打开的文件，只打开当前工作文件。

7.  使用进入工作集。而不是完整的工作台。

8.  您的应用程序的大多数组件也可以独立实现和测试。了解如何在无需服务器部署的情况下独立运行，这使您的工作变得简单快捷。- 最近，我为我的项目研究了休眠实体，两天，我在服务器上做了。即我更改了实体并再次在服务器上构建和部署，它一直在杀死它。所以，然后我创建了一个简单的 JPA 独立应用程序，我很快就完成了我的工作。

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2014-09-02T09:30:34.800

我通过增加堆空间和更改垃圾收集器设置来加速 Eclipse 尝试了许多排列。

但是对于我的本地开发，以我的拙见，我已经看到禁用 JVM 垃圾收集器最适合我。

Mylyn 自动完成功能没有问题，并且（不响应）部分已显着减少。

下面是我的*eclipse.ini*文件的快照。

```
-vm
--C:\JAVA\jre\bin\server\jvm.dll
C:\JAVA8x64\jre\bin\server\jvm.dll
-vmargs
-Xnoclassgc
-Dosgi.requiredJavaVersion=1.6
-Xms256m
-Xmx1024m 
```

我曾尝试使用 JDK 6 和 JDK 8，在这两种情况下，都注意到了显着的加速。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2015-04-01T11:11:11.193

这篇文章*[How to quick make eclipse faster](http://howtodoinjava.com/2014/04/05/how-to-quickly-make-eclipse-faster/)*非常有用。我尝试了一些技巧，这是真的；它使我的 Eclipse 运行得更快。

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2015-05-09T20:40:26.717

问题可能是 java 缓存或 java 临时文件。

在windows上打开控制面板，找到Java面板点击常规选项卡上的设置，删除临时文件，并设置用于存储临时文件的磁盘空间量为10000MB或更少。重启日食。恢复所有验证器，您会发现 IDE Eclipse 的速度还可以。

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2015-07-11T13:05:58.880

还有一个解决方案删除这两个文件夹中的所有文件

.metadata.plugins\org.eclipse.core.resources.history .metadata.plugins\org.eclipse.jdt.core

这对第一刻有帮助。但它仍然保持缓慢

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2015-09-30T20:37:34.380

我也遇到过类似的减速，并且此修复仅适用于您使用 Eclipse 的 C/C++ 变体时。因为`C/C++`您可能想要禁用以 CPU hog 着称的索引器。它相当于 VS 智能感知。要禁用 CDT 索引器`Window->Preferences`，请在`C/C++`选项卡下选择索引器并取消选中启用索引器。

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2017-11-13T07:42:38.630

我们使用 GIT 作为 CVS，使用 gradle 作为构建工具。

**症状**

在我的情况下，一个具有 > 20'000 个文件的特定项目在导航包含大量文件的目录时使用分层视图冻结。

**使固定**

1.  创建新的 Eclipse 工作区
2.  将项目新克隆到 Eclipse 工作区中
3.  将项目导入 Eclipse（在我们的例子中使用 Gradle 导入）

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2014-02-20T23:51:05.320

如果您因为工作等原因没有绑定到 Eclipse，那么您需要的一些插件\功能只能通过 Eclipse 等获得；那么一种可能的策略是完全摆脱 Eclipse。这将大大加快速度。

您可以切换到任何其他满足您需要的 IDE 或开发环境。一个例子是[NetBeans](http://en.wikipedia.org/wiki/NetBeans)。一些建议的加速也适用于 NetBeans 或任何其他 IDE。

一个直接适用于 Linux 的示例是尽可能多地移动到`tmpfs`挂载上。对于 NetBeans 中的 Java 开发，我将 Java 文档和源代码移到了一个`tmpfs`安装位置，从而极大地提高了性能。

同样，在 C++ 开发期间，如果可能，我将确保整个源代码树都在我的`tmpfs`挂载中。尽管我没有对构建性能进行广泛的基准测试，但在合理大小的代码库（几百个源文件 + 头文件）上进行的一些测试导致编译时间减少了 50% 以上。

请记住，使用此方法时，您的数据*不会*在断电期间保留。为了解决这个问题，可以创建一个脚本，`rsync`将其`tmpfs`挂载到某个备份目录，并将该脚本添加为每分钟运行的 cronjob。

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2015-03-20T23:01:09.973

将您的 RAM 增加到 8 GB 以上并禁用自动构建项目。这对我有用。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2019-05-16T20:51:46.533

可能有几件事可能会延迟 eclipse 的开始和退出。其中之一就像我们在 Windows 中所拥有的一样熟悉。禁用 windows 动画和禁用启动活动在一定程度上加快 windows

与 Eclipse 中的类似，我们可以拥有相同的东西 Windows-> General -> Preferences -> Appearance -> Turning OFF some decorating options。这会带来一点推动，但可能不会产生太大影响。

在我看来，您可能已经创建的工作空间中的项目应该在一定程度上受到限制，或者如果项目更多，则应该创建一个新的工作空间。例如，当您尝试在服务器上运行单个项目时，与在同一服务器上运行多个项目相比，它花费的时间更少

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2020-12-28T19:31:33.113

对于 Windows 用户：

如果你去任务管理器，选择eclipse应用程序，然后点击它旁边的小箭头，你通常只会看到“eclipse.exe”下面出现一个子进程。但是，就我而言，如果您有多个“Java Platform SE Binary”实例，则将它们全部结束。出于某种原因，我在后台运行了其中的三个，尽管我目前没有运行任何项目。尽管如此，这会将性能提升回您第一次在计算机上安装 eclipse 时的性能。

如果您在更改后无法再运行项目，请尝试重新启动 eclipse。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2021-02-25T03:48:33.317

你有一只巨大的公羊吗？创建一个 ramdisk 并将你的

*   JDK
*   虚拟机
*   蚀
*   工作区

确保将更改保留回 HDD 或将它们提交到 VCS，以避免断电时数据丢失。

# sql - 帮助编写嵌套集的 SQL 查询

> ID：316267
> 
> 赞同：6
> 
> 时间：2008-11-25T03:19:24.673
> 
> 标签：sql, nested-sets

我正在使用嵌套集将树存储在数据库中。该表的字段是 id、lft、rgt 和 name。

给定一个节点 ID，我需要找到它所有的直接子节点（不是孙子节点），它们本身就是叶节点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-25T03:25:50.247

这篇文章[在 MySQL 中管理分层数据](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)给出了一个很好的例子来说明如何使用嵌套集，并给出了许多常见查询的例子，包括这个。

以下是如何找到节点的直接子节点：

```
SELECT node.name, (COUNT(parent.name) - (sub_tree.depth + 1)) AS depth
FROM nested_category AS node,
    nested_category AS parent,
    nested_category AS sub_parent,
    (
        SELECT node.name, (COUNT(parent.name) - 1) AS depth
        FROM nested_category AS node,
        nested_category AS parent
        WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND node.name = '**[[MY NODE]]**'
        GROUP BY node.name
        ORDER BY node.lft
    )AS sub_tree
WHERE node.lft BETWEEN parent.lft AND parent.rgt
    AND node.lft BETWEEN sub_parent.lft AND sub_parent.rgt
    AND sub_parent.name = sub_tree.name
GROUP BY node.name
HAVING depth = 1
ORDER BY node.lft; 
```

然后将其与叶节点`rgt`等于的事实结合起来，`lft + 1`您就设置好了。[原谅双关语。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-17T22:13:26.487

我们在数据库中使用嵌套集进行了大量开发。父节点的左右值将始终为其子节点设置值的边界。

要使用 lft 和 rgt 值查找任何节点的子节点：

```
select 
    child.id, 
    child.lft, 
    child.rgt 
from 
    nodes child, 
    nodes parent 
where 
    child.lft between parent.lft and parent.rgt 
    and parent.id != child.id
    and parent.id = [ID]; 
```

我们在这里所做的是为子节点和父节点创建同一个表的别名，然后找到适合给定父节点之间的子节点。`parent.id != child.id`摆脱了输出中的冗余条目。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-09-22T19:22:43.543

为了指定和区分叶节点，将它们保持为 left=right。这改变了两件事：

1.  叶子很容易辨认。
2.  进行插入时，您将只向值添加一个（左侧 > 新叶，右侧 >= 叶）。

# jquery - 超时 jQuery 效果

> ID：316278
> 
> 赞同：101
> 
> 时间：2008-11-25T03:25:04.443
> 
> 标签：jquery, timeout

我试图让一个元素淡入，然后在 5000 毫秒内再次淡出。我知道我可以做类似的事情：

```
setTimeout(function () { $(".notice").fadeOut(); }, 5000); 
```

但这只会控制淡出，我会在回调中添加上述内容吗？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2008-11-25T06:34:53.173

**更新：**从 jQuery 1.4 开始，您可以使用该`.delay( n )`方法。[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

```
$('.notice').fadeIn().delay(2000).fadeOut('slow'); 
```

**注意**：默认情况下不排队，所以如果你想和它们一起使用`$.show()`，你需要这样配置它们：`$.hide()``$.delay()`

```
$('.notice')
    .show({duration: 0, queue: true})
    .delay(2000)
    .hide({duration: 0, queue: true}); 
```

* * *

您可以使用 Queue 语法，这可能有效：

```
jQuery(function($){ 

var e = $('.notice'); 
e.fadeIn(); 
e.queue(function(){ 
  setTimeout(function(){ 
    e.dequeue(); 
  }, 2000 ); 
}); 
e.fadeOut('fast'); 

}); 
```

或者你可以非常巧妙地制作一个 jQuery 函数来完成它。

```
(function($){ 

  jQuery.fn.idle = function(time)
  { 
      var o = $(this); 
      o.queue(function()
      { 
         setTimeout(function()
         { 
            o.dequeue(); 
         }, time);
      });
  };
})(jQuery); 
```

这将（理论上，在这里处理内存）允许您这样做：

```
$('.notice').fadeIn().idle(2000).fadeOut('slow'); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-11-25T03:26:20.543

我只是在下面想通了：

```
$(".notice")
   .fadeIn( function() 
   {
      setTimeout( function()
      {
         $(".notice").fadeOut("fast");
      }, 2000);
   }); 
```

我会为其他用户保留帖子！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2010-12-03T18:00:52.373

@strager 的绝妙技巧。像这样将它实现到jQuery中：

```
jQuery.fn.wait = function (MiliSeconds) {
    $(this).animate({ opacity: '+=0' }, MiliSeconds);
    return this;
} 
```

然后将其用作：

```
$('.notice').fadeIn().wait(2000).fadeOut('slow'); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-11-25T03:36:48.120

你可以这样做：

```
$('.notice')
    .fadeIn()
    .animate({opacity: '+=0'}, 2000)   // Does nothing for 2000ms
    .fadeOut('fast'); 
```

可悲的是，你不能只做 .animate({}, 2000) - 我认为这是一个错误，并将报告它。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-02-13T15:49:34.320

Ben Alman 为 jQuery 编写了一个不错的插件，名为 doTimeout。它有很多不错的功能！

在这里查看：*[jQuery doTimeout：类似于 setTimeout，但更好](http://benalman.com/projects/jquery-dotimeout-plugin/)*。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-07-10T16:17:20.747

为了能够这样使用它，您需要 return `this`。如果没有返回，fadeOut('slow') 将无法获得执行该操作的对象。

IE：

```
 $.fn.idle = function(time)
  {
      var o = $(this);
      o.queue(function()
      {
         setTimeout(function()
         {
            o.dequeue();
         }, time);
      });
      return this;              //****
  } 
```

然后这样做：

```
$('.notice').fadeIn().idle(2000).fadeOut('slow'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-31T16:58:44.280

只需几行 jQuery 就可以做到这一点：

```
$(function(){
    // make sure img is hidden - fade in
    $('img').hide().fadeIn(2000);

    // after 5 second timeout - fade out
    setTimeout(function(){$('img').fadeOut(2000);}, 5000);
});​ 
```

* * *

请参阅下面的小提琴以获取工作示例...

## [http://jsfiddle.net/eNxuJ/78/](http://jsfiddle.net/eNxuJ/78/)

# database-design - 数据库设计中的共享目的表（*你*如何实现问答工具）

> ID：316285
> 
> 赞同：5
> 
> 时间：2008-11-25T03:28:22.207
> 
> 标签：database-design

长期以来，我一直认为涉及共享表目的的数据库设计在某种程度上是臭代码的特征，并且逐渐增加了臭代码相关问题的扩散。

我的意思是，人们过度规范化，使用 1 个表，其中 2 个表可能更合乎逻辑，人们刚刚发现规范化是什么并过度使用它，以至于他们在数据库上虚拟分层数据库，或者尝试使用分层数据天真地解决了他们所有的问题。

问题是，当你有 2 组数据，看似相同，但目的不同，你会用同一张表来表示吗？你什么时候知道什么时候使用它是一个好主意和一个坏主意？

我一直认为，涉及在同一查询中使用两次的任何表的不必要的自引用表或结构是一个非常危险的困境，无论是在设计方面，还是在长期性能方面以及未来改进的便利性方面。

当然，直到我在 SO 的 RSS 提要中看到一两件事。现在我不会就 SO 的工作原理进行元讨论，但这里似乎有一个隐含的设计考虑挑战了我的想法，并希望就这种逻辑风格收集一个更有凝聚力的答案。

您会注意到通用问题的格式如下：

```
 /question/1234/stuff-here-that-s-safe-to-leave-out 
```

我通常认为这意味着问题是按数字顺序排列的。

但这让我很困惑：我以[问题 316210 为例](https://stackoverflow.com/questions/316210)。如果您查看此问题的[rss 提要](https://stackoverflow.com/feeds/question/316210)，您会注意到有一个问题条目和一系列答案条目，除了一些细微差别外，这些条目在功能上与问题条目相同。现在注意在答案条目中也有链接引用，...问题，但不是同一个问题，而是不同的问题，例如[问题 316218](https://stackoverflow.com/questions/316218/)，当访问时，它会将您重定向回原始问题。

现在我对他们*如何*在代码中实现它不感兴趣，问题是你在这里，问题和答案似乎共享同一个表（因此是顺序问题 ID），当用户引用答案 ID 时，您必须先查询数据库，然后“嘿！，哎呀！，这不是问题！” 然后继续进行*第二次*查询以找出该问题的父级（在同一个表中），然后将您重定向到实际的问题页面，更不用说自联接查询所需的所有 hullabaloo（我一直认为filthy ) 和条件句来调整行为。

### 少离题，真正的问题

问题是，这里有 2 组数据共享同一个表，当然，这些数据在表面上是相似的，至少现在是这样，但看起来涉及 的**技术债务太多了。**

实施可以应用于问题而不是答案的新功能所涉及的长期考虑，反之亦然，更不用说避免在某个不起眼的角落将一个被解释为另一个。您不能添加新列以用于一个应用程序集中，而不必考虑在另一个应用程序集中产生的影响。

当然，使用单数表有一个小好处，那就是当您*制作*一个在构面之间共享的功能时，您只需编写一次代码，但这可以通过使用通用方法的祖先类来轻松表示，以及针对不同情况绑定到特定表的子类。所以至少这样，添加一个新特性对其他场景没有后续影响。

现在我以前在很多地方都遇到过这种问题，当然，但是 SO 是最容易指出的例子。

当你像这样实现你的数据库时，你是共享表还是分叉？

什么时候，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T03:45:46.540

我认为从 SO 的角度来看，问题和响应都是同一件事——用户帖子。他们只是碰巧有关系。如果帖子没有父级，那么这是一个问题。如果帖子确实有父级，那么它就是一个答案。我觉得这完全合理，但我不确定我是否会做出同样的选择，因为存在一些显着差异。也许这些存储在单独的表中。

我在我的一个应用程序中基本上做了同样的事情。我跟踪事件。如果一个事件没有父事件，它就是一个“主”事件。如果它有父事件，那么它必须是“主”事件的子事件。它们共享许多相同的基本属性，因此它们共享一个表。“主”事件具有存储在单独表中的一些附加属性。通常，当我选择子事件时，我已经知道“主”事件，因此不需要单独的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T03:57:04.223

我们的学生管理系统也有类似的事情，它将申请和注册存储在同一张桌子上。应用程序本质上是注册一门尚未激活的课程的特殊情况。在我的情况下，最好以这种方式使用它，因为应用程序很容易升级到注册。

实际上，这取决于您最终将如何查询数据，我怀疑问答系统将具有搜索功能，因此这将要搜索问题和答案，因此将它们放在同一个表中是有意义的. 此外，问题和答案可能需要相同的额外数据，例如修改日期、发送者...只需确保您在表的索引中有一个字段，如果您走这条路线，则定义它是问题还是答案.

当您必须解决您的解决方案时，值得分叉，但请记住，仅仅因为您最初将它作为一个表，通过稍后将其分离来运行脚本相对容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-01T23:57:21.183

第一的，

> 人们过度规范化，使用 1 个表，其中 2 个表可能更合乎逻辑

我发现非规范化数据往往在更少的表中，而不是更多。

* * *

至于“重复使用”表格的目的不止一个：只是说不！从第一天起就招致技术部门。

关系数据库的要点在于，模式暗示了数据的目的：它与哪些其他数据相关，它的约束等。将两个相似的数据结构楔入一个表中比创建一个 OOP 祖先类或接口更有意义两个相似值对象的类的超集。这与很好地使用工具相反。

将它们结合起来可确保您为每个实体需要的唯一列创建 1-1 个表，而您无法将其强制放入公用表中。您也不能使用 RI、UNIQUE 索引或其他约束，因为其中一个实体总是会破坏它。公用表的每个使用者都需要知道如何区分属于一个实体或另一个实体的行之间的区别；没有人可以根据模式对任何事情做出假设。

如果需要，将两个表联合起来很容易，并且该查询甚至可以调整对它们“通用”模式的更改。

# performance - Core 2 x87 浮点性能

> ID：316292
> 
> 赞同：0
> 
> 时间：2008-11-25T03:31:42.543
> 
> 标签：performance, optimization, hardware, floating-point, intel

我正在使用一些数字处理代码，这些代码本质上是浮点密集型的，而且速度很慢。它是研究代码，因此可以针对一种架构进行定制，并在 Core 2 Quad 机器上运行。我的理解是，对于 Pentium 4/Netburst 架构，Intel 严重剥离了 x87 FPU，采用了更加以 SSE2 为中心的设计。这导致 x87 代码的性能很糟糕。但是，Core 2 架构与 P6 架构的关系比 Netburst 更密切。

我的编译器根本不针对 SSE AFAIK，我的理解是很少有编译器能很好地做到这一点。此外，我使用的是相当前沿的 D 语言，因此可用的编译器并不多。但是，我不想切换语言，既是因为我现有代码的惯性，也是因为尽管它不成熟，但我真的很喜欢 D。

Core 2 架构是否也具有精简的 x87 FPU？如果是这样，解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T04:21:29.933

让自己使用分析器 - 缓存未命中和内存访问延迟等因素太多，无法将性能不佳归因于特定处理器功能。如果您想找出什么是快速的，请使用几种不同的方法实现相同的算法并对其进行分析。

我还建议查看 liboil 库，它可以让您使用 SSE 进行优化，而无需编写汇编；我不知道它是如何与 D 集成的。

# ruby - rspec：如何存根构造函数调用的实例方法？

> ID：316294
> 
> 赞同：31
> 
> 时间：2008-11-25T03:34:40.400
> 
> 标签：ruby, rspec, stub

```
class A
  def initialize
    @x = do_something
  end

  def do_something
    42
  end
end 
```

`do_something`在调用原始实现之前，如何在 rspec 中存根（因此将 42 分配给`@x`）？当然，在不改变实现的情况下。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-11-25T21:44:50.403

[这是将功能添加到 rspec 的提交](http://github.com/dchelimsky/rspec/commit/45a68378bf0cde18a5cc3ec64c93388a392f514a#diff-0)- 这是 2008 年 5 月 25 日。有了这个你可以做到

```
A.any_instance.stub(do_something: 23) 
```

但是，最新的 rspec gem 版本（1.1.11，2008 年 10 月）中没有这个补丁。

[这张票](http://rspec.lighthouseapp.com/projects/5645-rspec/tickets/28-6791-stub-return-values-for-all-instances-of-a-class#ticket-28-2)表明他们出于维护原因将其拉出，并且尚未提供替代解决方案。

看起来你现在做不到。您必须使用 alias_method 或类似的方法手动破解该类。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-12-25T11:47:51.527

我在[http://pivotallabs.com/introducing-rr/上找到了这个解决方案](http://pivotallabs.com/introducing-rr/)

```
new_method = A.method(:new)

A.stub!(:new).and_return do |*args|
  a = new_method.call(*args)
  a.should_receive(:do_something).and_return(23)
  a
end 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-11-25T03:50:18.683

我不知道如何在规范的模拟框架中做到这一点，但您可以轻松地将其换成 mocha 来执行以下操作：

```
# should probably be in spec/spec_helper.rb
Spec::Runner.configure do |config|
  config.mock_with :mocha
end

describe A, " when initialized" do
  it "should set x to 42" do
    A.new.x.should == 42
  end
end

describe A, " when do_something is mocked" do
  it "should set x to 23" do
    A.any_instance.expects(:do_something).returns(23)
    A.new.x.should == 23
  end
end 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-25T04:16:50.067

或与[RR](http://github.com/btakita/rr/tree/master)：

```
stub.any_instance_of(A).do_something { 23 } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-14T09:39:52.203

在今天最新版本的 RSpec - 3.5 中，您可以：

```
allow_any_instance_of(Widget).to receive(:name).and_return("Wibble") 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-04-22T12:45:47.867

我确实喜欢 Denis Barushev 的回答。而且我只想建议一种外观上的改变，它使`new_method`变量变得不必要。Rspec 确实对存根方法进行了处理，以便可以使用`proxied_by_rspec__`前缀访问它们：

```
 A.stub!(:new).and_return do |*args|
  a = A.proxied_by_rspec__new(*args)
  a.should_receive(:do_something).and_return(23)
  a
end 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-21T12:31:14.393

在 RSpec 2.6 或更高版本中，您可以使用

```
A.any_instance.stub(do_something: 23) 
```

有关更多详细信息，请参阅[文档](https://www.relishapp.com/rspec/rspec-mocks/docs/method-stubs/stub-on-any-instance-of-a-class)。（感谢[rogerdpack](https://stackoverflow.com/users/32453/rogerdpack)指出现在这是可能的 - 我认为它应该得到自己的答案）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-10-11T05:25:56.833

要存根实例方法，您可以执行以下操作：

```
before :each do
  @my_stub = stub("A")
  @my_stub.should_receive(:do_something).with(no_args()).and_return(42)
  @my_stub.should_receive(:do_something_else).with(any_args()).and_return(true)
  A.stub(:new).and_return(my_stub)
end 
```

但正如 pschneider 指出的那样，只需在 new with: 上返回 42 `A.stub(:new).and_return(42)`或类似的东西。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-01T18:24:59.057

这是一个可能不是很优雅但基本上肯定会奏效的想法：

创建一个继承您要测试的类的小类，覆盖初始化方法并在初始化中创建存根`super` **后调用，如下所示：**

```
it "should call during_init in initialize" do
  class TestClass < TheClassToTest
    def initialize
      should_receive(:during_init)
      super
    end
  end
  TestClass.new
end 
```

你去吧！我刚刚在我的一项测试中成功使用了它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-10T08:50:28.810

rspec_candy gem 带有一个在 RSpec 1 和 RSpec 2 中都可以使用的辅助方法[。](https://github.com/makandra/rspec_candy)`stub_any_instance`

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-08-22T17:10:29.260

在我的 rspec (1.2.2) 版本中，我可以这样做：

```
A.should_receive(:new).and_return(42) 
```

我知道回答原始海报可能为时已晚，但我还是回答了它以供将来参考，因为我带着同样的问题来到这里，但发现它正在使用最新的 rspec 版本。

# mysql - 需要帮助加入表

> ID：316295
> 
> 赞同：1
> 
> 时间：2008-11-25T03:35:09.120
> 
> 标签：mysql, join

我有一个将表导出到 CSV 的函数，并在查询中设置将导出哪些字段。

这是查询：

```
SELECT lname, fname, email, address1, address2, city, 
state, zip, venue_id, dtelephone, etelephone, tshirt FROM volunteers_2009 
```

字段venue_id是在另一个表（venues）中引用的场地的id

所以志愿者_2009.venue_id =venues.id

当我打开 CSV 文件时，它会显示我理解的场地 ID，但我需要帮助修改查询以将场地名称 (venues.venue_name) 放入 CSV 文件中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T03:54:39.877

```
SELECT a.lname, a.fname,a. email, a.address1,a. address2, a.city, 
    a.state, a.zip, a.venue_id, a.dtelephone, a.etelephone, a.tshirt,
    COALESCE(b.venue_name,'') AS VenueName
FROM volunteers_2009 a
LEFT JOIN venues b ON b.id=a.venue_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T03:37:45.403

对此的标准 SQL 查询是（假设您需要场地的 ID 和名称）：

```
SELECT a.lname as lname, a.fname as fname, a.email as email,
    a.address1 as address1, a.address2 as address2, a.city as city, 
    a.state as state, a.zip as zip, a.venue_id as venue_id,
    b.venue_name as venue_name, a.dtelephone as dtelephone,
    a.etelephone as etelephone, a.tshirt as tshirt
FROM volunteers_2009 a, venues b
WHERE a.venue_id = b.id
AND a.venue_id IS NOT NULL
UNION ALL
SELECT a.lname as lname, a.fname as fname, a.email as email,
    a.address1 as address1, a.address2 as address2, a.city as city, 
    a.state as state, a.zip as zip, a.venue_id as venue_id,
    '' as venue_name, a.dtelephone as dtelephone,
    a.etelephone as etelephone, a.tshirt as tshirt
FROM volunteers_2009 a
WHERE a.venue_id IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T03:43:42.910

```
SELECT lname, fname, email, address1, address2, city,   
state, zip, b.venue_name, dtelephone, etelephone, tshirt FROM   
volunteers_2009 a, venues b  
where a.venue_id = b. venue_id 
```

如果两个表都有任何同名的列，请使用正确的别名。

**--- 编辑**让场地中的所有行都使用外连接作为

```
SELECT lname, fname, email, address1, address2, city,   
state, zip, b.venue_name, dtelephone, etelephone, tshirt FROM  
volunteers_2009 a(+), venues b  
where a.venue_id = b. venue_id 
```

# vba - VBA中对Long数据类型的误解

> ID：316312
> 
> 赞同：3
> 
> 时间：2008-11-25T03:43:53.877
> 
> 标签：vba

从 VBA 中的溢出错误的帮助中，有以下示例：

```
Dim x As Long
x = 2000 * 365 ' gives an error

Dim x As Long
x = CLng(2000) * 365 ' fine 
```

我会认为，由于 Long 数据类型应该能够保存 32 位数字，所以第一个示例可以正常工作。

我问这个是因为我有一些这样的代码：

```
Dim Price as Long
Price = CLng(AnnualCost * Months / 12) 
```

当 AnnualCost 为 5000 且 Months 为 12 时，这会引发溢出错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-25T03:58:13.630

2000 和 365 是整数值。在 VBA 中，整数是 16 位有符号类型，当您对 2 个整数执行算术运算时，算术运算以 16 位执行。由于这两个数字相乘的结果超过了可以用 16 位表示的值，因此您会遇到异常。第二个示例有效，因为第一个数字首先转换为 32 位类型，然后使用 32 位数字执行算术。在您的示例中，使用 16 位整数执行算术运算，然后将结果转换为 long 但此时为时已晚，溢出已经发生。解决方案是先将乘法中的一个操作数转换为 long：

```
Dim Price as Long
Price = CLng(AnnualCost) * Months / 12 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T04:02:52.933

问题是在类型转换之前，乘法发生在括号内。这就是为什么您需要先将至少一个变量转换为 Long，然后再将它们相乘。

大概您将变量定义为整数。您可能会考虑使用 Long 而不是 Integer，部分原因是您将遇到更少的溢出问题，还因为 Longs 在 32 位机器上的计算速度比 Integers 快（一点）。Long 确实会占用更多内存，但在大多数情况下，这不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-28T15:54:01.013

在 VBA 中，字面量默认为整数（如前所述）。如果您需要对它们强制使用更大的数据类型，您可以按照上面的示例重新转换它们，或者只附加一个类型声明字符。（列表在这里：http: [//support.microsoft.com/kb/191713](http://support.microsoft.com/kb/191713)） Long 的类型是“&”，所以你可以这样做：

```
Price = CLng(AnnualCost * Months / 12&) 
```

And the 12 would be recast as a long. However it is generally good practice to avoid literals and use constants. In which case you can type the constant in it's declaration.

```
Const lngMonths12_c as Long = 12
Price = CLng(AnnualCost * Months / lngMonths12_c) 
```

# video - 通过 YouTube 数据 API 确定视频编解码器？

> ID：316315
> 
> 赞同：3
> 
> 时间：2008-11-25T03:46:34.370
> 
> 标签：video, youtube

是否可以通过 YouTube 数据 API 确定特定的 youtube 视频是使用 H.264 还是 FLV 编码的？如果是这样，怎么做？

我可以开始下载文件并检查视频流的编码方式（当然是通过编程方式），但我想使用 YouTube 数据 API 来避免所有这些开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T08:36:42.970

我不相信这是可能的。

您可以在此处找到 YouTube API 参考文档[http://code.google.com/apis/youtube/2.0/reference.html](http://code.google.com/apis/youtube/2.0/reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-12T04:05:47.033

这是不可能的，除非您正在做一些有问题的事情（关于 YouTube 的 API TOS），否则您永远不需要这样做；）

如果您提供有关您正在尝试做的事情的更多详细信息，也许还有另一种解决方案？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-09T19:44:09.343

如果您有特定视频页面的来源，则可以轻松确定可用的视频版本。

1.  找到`<embed>`带有 的标签`id` `movie_player`。
2.  该`flashvars`元素的属性包含一个由 .`key=value`分隔的对的 html 编码列表`&`。值是 url 编码的。
3.  取 key 的值，`url_encoded_fmt_stream_map`它是您要查找的视频版本的逗号分隔列表。
4.  每个版本都是由`key=value`分隔的对列表`&`。值是 url 编码的。
5.  键的值`itag`更广为人知，您可以在[Wikipedia](http://en.wikipedia.org/wiki/YouTube#Quality_and_codecs)`fmt`中找到不同的类型

# php - 这是 PHP 数组访问的错误吗？

> ID：316320
> 
> 赞同：4
> 
> 时间：2008-11-25T03:51:25.030
> 
> 标签：php, arrays, data-access

我遇到了这个错误，其中数组的元素，如果它的索引是字符串“0”，是不可访问的。

这也不是反序列化的错误，因为这发生在我的代码中而没有调用它。

```
$arr = unserialize('a:1:{s:1:"0";i:5;}');
var_dump($arr["0"]); //should be 5, but is NULL
var_dump($arr[0]);   //maybe this would work?  no. NULL 
```

我在这里做错了吗？如何访问数组的这个元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-25T04:09:15.930

是的，它看起来好像是一个错误，与 PHP 将字符串自动转换为整数有关。更多信息可在此处获得：[http ://bugs.php.net/bug.php?id=43614](http://bugs.php.net/bug.php?id=43614)

```
var_dump( $arr ); // => array(1) { ["0"]=>  int(5) } 
$arr2["0"]=5;
var_dump($arr2); // => array(1) { [0]=>  int(5) } 
print serialize($arr2); // a:1:{i:0;i:5;} 
```

所以似乎旧版本的 PHP5 在反序列化中不执行字符串索引到整数索引的转换。

此错误在 PHP 5.2.5 中报告，并在 PHP 5.2.6 中得到修复（参见[http://www.php.net/ChangeLog-5.php#5.2.6](http://www.php.net/ChangeLog-5.php#5.2.6)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T04:07:53.407

在结构上使用 var_dump 来查看它是如何表示的。也许这会有所帮助。当我遇到 Data::Dumper 这样的问题时，我在 Perl 中做同样的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T04:03:10.657

实际上，您问题中的代码会产生

```
int(5) 
```

# python - 在 Windows XP 上安装 wxPython 后“import wx”失败

> ID：316325
> 
> 赞同：4
> 
> 时间：2008-11-25T03:54:51.920
> 
> 标签：python, windows, wxpython

我下载并安装了这个版本的[wxPython](http://en.wikipedia.org/wiki/WxPython)，用于我的 Python 2.6 安装：

[http://downloads.sourceforge.net/wxpython/wxPython2.8-win32-unicode-2.8.9.1-py26.exe](http://downloads.sourceforge.net/wxpython/wxPython2.8-win32-unicode-2.8.9.1-py26.exe)

当我运行 Python 并尝试导入 wx 时，我收到以下错误：

```
C:\Program Files\Console2>python
Python 2.6 (r26:66721, Oct  2 2008, 11:35:03) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import wx
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\Python26\lib\site-packages\wx-2.8-msw-unicode\wx\__init__.py", line 45, in <module>
    from wx._core import *
  File "c:\Python26\lib\site-packages\wx-2.8-msw-unicode\wx\_core.py", line 4, in <module>
    import _core_
ImportError: DLL load failed: This application has failed to start because the application configuration is incorrect. Reinstalling the application may fix this problem.
>>> 
```

我已经尝试删除 wxPython 并再次安装，但我得到了同样的错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-29T21:46:17.047

我遇到了同样的错误。

经过一番谷歌搜索后，找到了这个指向[MSVC++ 2008 Redestributable](http://www.microsoft.com/downloads/details.aspx?familyid=9B2DA534-3E03-4391-8A4D-074B9F2BC1BF&displaylang=en)的链接并安装了它。

这解决了问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-02-25T17:09:02.267

讨厌这么说，但我遇到了同样的问题，并且重新启动后导入工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T05:50:18.503

尝试使用 ANSI 版本而不是 Unicode 版本。IIRC 它需要匹配 Python 2.6 安装才能正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T06:20:30.177

[通过在wxPython trac 系统](http://trac.wxwidgets.org/)中寻找“应用程序配置不正确” ，唯一可能有意义的参考是 64 位与 32 位兼容性问题。

否则，我会说[布赖恩](https://stackoverflow.com/questions/316325/import-wx-fails-after-installation-of-wxpython-on-windows-xp/316466#316466)尝试 ANSI 的答案非常好。

顺便说一句，如果您再次尝试卸载，请进入 site-packages 文件夹并确保删除所有 wx 和 wxPython 内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T16:07:24.180

复制 Microsoft C 运行时库 v.9 文件和清单。也就是说，`msvcr90.dll`从`microsoft.vc90.crt.manifest`文件夹`python`到 wx 文件夹，即包含无法启动 DLL 的文件夹。

或者安装 Visual C++ 2008 Redistributable Package。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-01-31T14:56:09.807

我也有同样的问题。最好安装“便携式 Python”IDE，它带有一些不错的模块，包括 wxPython。您可以立即开始编码 GUI，而无需下载单独的 wxPython。链接， [http://www.portablepython.com /](http://www.portablepython.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-06T19:27:57.363

你尝试使用模块 wxpython 2.8.12.1 版本，选择你的python版本。你可以在这里下载：

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#wxpython](http://www.lfd.uci.edu/~gohlke/pythonlibs/#wxpython)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-01T21:32:28.080

另一个迟到的答案，但我最近遇到了问题（8/14），我的解决方案是使用 32 位而不是 64 位 wxPython 版本。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-17T02:06:42.733

也许为时已晚，但我遇到了同样的问题，并通过从他们[自己的网站](http://www.wxpython.org/download.php)下载解决了这个问题：wxPython2.8-win64-unicode-py27 在我的情况下，它最初想在我的 python 文件夹之外的其他地方进行设置。所以我把它改成在 ../python27/Lib/SitePackages/ 然后它工作正常。

我希望它有所帮助。

# django - 如何在 django 中使用 change_form.html 模板？

> ID：316326
> 
> 赞同：1
> 
> 时间：2008-11-25T03:55:22.760
> 
> 标签：django, django-templates

我有我的模型，我想使用 Django change_form 模板来编辑我的数据。目前我已经创建了自己的模板，它工作正常，但缺少一些 change_form 模板可能具有的基本内容，比如字段验证。

请举例说明我应该如何从我的角度调用模板，以及需要将哪些对象变量发送到模板。

指向使用此模板的外部项目/链接的指针将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-07T20:16:22.440

我知道的唯一 change_form.html 模板在 Django 的管理应用程序中。您不直接使用模板，您需要设置管理应用程序来编辑数据。为此，请按照[文档](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#ref-contrib-admin)中的步骤操作。如果您有问题，请将这些问题作为单独的具体问题发布。

# sql - SQL Server Express 能否用于有效管理 SQL Server Standard/Enterprise 安装？

> ID：316340
> 
> 赞同：1
> 
> 时间：2008-11-25T04:05:03.053
> 
> 标签：sql, sql-server, administration

我们的网络服务器上有许多 MS SQL Server 2005 安装（标准版和企业版）。有时我需要在家中管理它们。现在我正在使用远程桌面连接到我的工作机器，但我更愿意在我的家用机器上安装 SQL Server Management Studio，这样我可以更有效地工作。我没有备用许可证，所以我想知道...如果我在我的家用计算机上安装了 MS SQL Server 2005 Express，我可以用它来有效地管理我们服务器上的高端安装吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-25T04:13:28.373

请参阅此问题：
[SQL Server Management Studio 和 Express 版本有什么区别？](https://stackoverflow.com/questions/117347/whats-the-difference-between-sql-server-management-studio-and-the-express-versi)

此外，如果您在使用 Managment Studio Express 进行任何操作时遇到任何问题，可以使用第三方工具连接到 SQL Server。

就个人而言，我注意到一些开箱即用的东西：

*   进出口
*   活动监视器
*   作业监视器

但是，我链接到的问题表明，当您连接到完整的 sql server 版本时，您可能能够恢复大部分内容以供使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T04:51:57.140

如果您只安装标准版（即仅 SSMS）而不安装数据库、代理等的客户端工具，那么我很确定您不需要其他许可证并且不会违反最终用户许可协议。如果您想要完整安装 SQL Server 开发人员版，只需 49 美元，并且附带所有内容。

[http://www.microsoft.com/sqlserver/2005/en/us/developer.aspx](http://www.microsoft.com/sqlserver/2005/en/us/developer.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T04:10:45.350

我不确定您是否可以在 Management Studio Express 中创建备份计划和维护计划。

# namespaces - ANTLR v3 C# 命名空间

> ID：316341
> 
> 赞同：3
> 
> 时间：2008-11-25T04:07:27.510
> 
> 标签：namespaces, antlr

希望这是一个非常快的一个；）我已经在 ANTLR3 中编写了一个词法分析器/解析器规范，并且目标是 CSharp2 目标。生成的代码可以正常工作，但我无法让 ANTLR 将 C# 输出放入命名空间。

语法文件的相关部分如下：

```
grammar MyGrammar;

options
{
    language = CSharp2;
    output = AST;
    ASTLabelType = CommonTree;
} 
```

为了生成正确的命名空间，我尝试过：

```
@namespace { MyNamespace } 
```

和

```
@lexer::namespace { MyNamespace }
@parser::namespace { MyNamespace } 
```

但是这两个都会产生错误，声称该文件没有规则。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T09:54:45.483

我将它用于组合的词法分析器和解析器（它会正确生成命名空间）：

```
grammar Test;

options
{
    language=CSharp2;
}

@lexer::namespace {
    My.Name.Space
}

@parser::namespace {
    My.Name.Space
}

DIGIT   :   '0'..'9';

simple  :    DIGIT EOF; 
```

所以我想知道为什么你的版本不起作用——也许你想试试这个简单的例子，看看它是否适合你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T02:14:56.537

似乎 @namespace 指令需要放在 tokens{} 块之后。现在一切都好...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T13:27:06.837

使用`language = 'CSharp3';`（以及 CSharp2），您可以执行以下操作：

```
@lexer::namespace {
    My.Name.Space
}

@parser::namespace {
    My.Name.Space
} 
```

生成：

```
} // namespace 
 My.Name.Space <-- compile error here 
```

在词法分析器和解析器代码的末尾。如果我写：

```
@lexer::namespace {My.Name.Space}

@parser::namespace {My.Name.Space} 
```

它工作正常并生成：

```
} // namespace My.Name.Space <-- within the line comment, no error of course 
```

# java - 为什么在 Java 中将局部变量和方法参数标记为“final”？

> ID：316352
> 
> 赞同：57
> 
> 时间：2008-11-25T04:16:23.233
> 
> 标签：java, final

在 Java 中，您可以使用 final 关键字限定局部变量和方法参数。

```
public static void foo(final int x) {
  final String qwerty = "bar"; 
} 
```

这样做会导致无法在方法主体中重新分配 x 和 qwerty。

这种做法将您的代码推向不变性的方向，这通常被认为是一个优点。但是，它也倾向于使代码混乱，到处都出现“final”。您对 Java 中局部变量和方法参数的 final 关键字有何看法？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-11-25T09:15:10.557

您应该在适当的时候尝试这样做。除了在您“意外”尝试修改值时发出警告之外，它还向编译器提供信息，可以更好地优化类文件。这是 Robert Simmons, Jr 所著的《Hardcore Java》一书中的要点之一。事实上，本书第二章的全部内容都在使用 final 来促进优化和防止逻辑错误。出于这个原因，诸如 PMD 和 Eclipse 的内置 SA 等静态分析工具标记了这些情况。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-11-25T04:22:47.387

我个人的看法是，这是浪费时间。我相信视觉上的混乱和增加的冗长是不值得的。

我从来没有遇到过重新分配错误的情况（请记住，这不会使对象不可变，这意味着您不能重新分配对变量的另一个引用）错误的变量。

但是，当然，这都是个人喜好;-)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-08-30T08:24:06.513

使参数最终*保证*在方法中的任何位置使用的值都引用传递的值。否则，您必须在心理上解析给定位置上方的所有代码，以了解该参数在该点的值。

因此，*不*使用 final 会使您的代码本身的可读性和可维护性降低:)

最终的局部变量取决于意图，在我看来并不那么重要。取决于发生了什么。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-11-25T04:35:26.690

对于局部变量，我倾向于避免这种情况。它会导致视觉混乱，并且通常是不必要的 - 函数应该足够短或专注于单个影响，以便让您快速看到您正在修改不应该修改的内容。

在幻数的情况下，无论如何我会将它们作为一个常量私有字段而不是在代码中。

我只在必要的情况下使用final（例如，将值传递给匿名类）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-11-25T04:27:23.897

由于 Java 的“[按引用传递](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)”行为的（偶尔）令人困惑的性质，我绝对同意最终化参数 var。

最终确定本地 var 似乎有点矫枉过正 IMO。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-03T20:29:20.727

是的，请动手。

这是关于可读性。当您知道变量被分配一次且仅一次时，就更容易推断程序的可能状态。

一个不错的替代方法是在分配参数时打开 IDE 警告，或者在多次分配变量（循环变量除外）时打开 IDE 警告。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-25T07:33:50.637

final 有三个很好的理由：

*   构造函数设置的实例变量只会变得不可变
*   不被覆盖的方法成为最终的，出于真实原因使用它，而不是默认情况下
*   要在方法内的匿名类中使用的局部变量或参数必须是最终的

与方法一样，局部变量和参数也不需要声明为 final。正如其他人之前所说，这会使代码变得不那么可读，编译器性能优化几乎没有，这并不是大多数代码片段的真正原因。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-10-03T23:59:54.753

尽管它会造成一些混乱，但值得将`final`. `final`如果你配置它，IDEs 例如 eclipse 可以自动放置。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-10-04T00:12:38.083

`final`如果您想将这些参数传递给匿名类，则制作局部变量和方法参数是必不可少的——就像您实例化一个匿名线程并希望在 run() 方法的主体中访问这些参数一样。

除此之外，我不确定通过编译器优化获得更好的性能是否会带来性能优势。是否要优化它取决于特定的编译器实现......

很高兴知道使用`final`...的任何性能统计信息

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-25T04:23:39.287

你为什么想要？您编写了该方法，因此任何修改它的人都可以始终从 qwerty 中删除 final 关键字并重新分配它。至于方法签名，同样的推理，虽然我不确定它会对你的类的子类做什么......它们可能会继承最终参数，即使它们覆盖了方法，也无法取消最终化 x。试一试，看看它是否有效。

那么，唯一真正的好处是，如果您将参数设置为不可变并将其传递给子级。否则，您只是无缘无故地弄乱您的代码。如果它不会强迫任何人遵循您的规则，那么您最好留下一个好的评论，说明您为什么不应该更改该参数或变量而不是给出最终修饰符。

*编辑*

作为对评论的回应，我将补充说，如果您发现性能问题，将局部变量和参数设置为 final 可以让编译器更好地优化您的代码。但是，从代码不变性的角度来看，我坚持我原来的说法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-25T05:54:35.390

我让 Eclipse 在匿名类中使用它们时为我做这件事，由于我使用了 Google Collection API，这种情况正在增加。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-25T07:10:13.600

如果我们认为它们不会被重新分配或不应该被重新分配，我们会在这里为局部变量执行此操作。

参数不是最终的，因为我们有一个 Checkstyle-Check 来检查重新分配参数。当然，没有人愿意重新分配参数变量。

# sql - MySQL 代码无法显示类别名称（WordPress 数据库）

> ID：316366
> 
> 赞同：1
> 
> 时间：2008-11-25T04:28:20.230
> 
> 标签：sql, mysql, database, wordpress, taxonomy

为什么此代码无法使用当前的 WordPress 分类系统显示类别名称“Apples”？类别名称存储在 $wpdb->terms 表 (wp_terms) 中。

```
<?php

$ra_category_id = 3; 
$ra_category = $wpdb->get_results("SELECT name FROM $wpdb->terms WHERE term_id = '3'");
$ra_category_name = $ra_category->name;         

?>

<h3>Category: <?php echo $ra_category_name; ?></h3> 
```

表格行是

```
term_id     name              slug          term_group
1         Uncategorized     uncategorized   0
2         Blogroll          blogroll        0
3         Apples            apples          0
4         Bananas           bananas         0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T11:46:36.850

$ra_category 是以下数组：

```
array(1) {
  [0]=>
  object(stdClass)(1) {
    ["name"]=>
    string(8) "Apples"
  }
} 
```

所以你想要的是：

```
$ra_category_name = $ra_category[0]->name; 
```

处理查询结果时，请始终使用 a 检查整个结果`var_dump()`，这会有所帮助。

（请注意，您也在使用`$ra_category_id`但随后在查询中硬编码值“3”）

# mysql - 这个 MySQL 查询如何容易受到 SQL 注入的攻击？

> ID：316367
> 
> 赞同：4
> 
> 时间：2008-11-25T04:28:24.067
> 
> 标签：mysql, security, sql-injection

在对上一个问题的评论中，有人说以下 sql 语句打开了我的 sql 注入：

```
select
    ss.*,
    se.name as engine,
    ss.last_run_at + interval ss.refresh_frequency day as next_run_at,
    se.logo_name    
from 
    searches ss join search_engines se on ss.engine_id = se.id
where
    ss.user_id='.$user_id.'
group by ss.id
order by ss.project_id, ss.domain, ss.keywords 
```

假设`$userid`变量被正确转义，这如何让我变得脆弱，我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-25T04:35:03.197

每个值得使用的 SQL 接口库都有某种对绑定参数的支持。不要试图变得聪明，只是使用它。

你可能真的，真的认为/希望你已经正确地逃脱了一些东西，但这只是不值得你不这样做的时间。

此外，一些数据库支持准备好的语句缓存，因此正确执行也可以为您带来效率提升。

更简单、更安全、更快。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-25T04:35:01.870

假设它被正确地逃脱，它不会让你变得脆弱。问题是正确地转义比乍看之下更难，并且每次执行这样的查询时，您都会谴责自己正确地转义。如果可能，避免所有这些麻烦并使用准备好的语句（或绑定参数或参数化查询）。这个想法是允许数据访问库正确地转义值。

例如，在 PHP 中，使用[mysqli](http://www.petefreitag.com/item/356.cfm)：

```
$db_connection = new mysqli("localhost", "user", "pass", "db");
$statement = $db_connection->prepare("SELECT thing FROM stuff WHERE id = ?");
$statement->bind_param("i", $user_id); //$user_id is an integer which goes 
                                       //in place of ?
$statement->execute(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T04:36:22.290

如果**$user_id**被转义，那么您应该不会受到 SQL 注入的攻击。

在这种情况下，我还要确保 $user_id 是数字或整数（取决于所需的确切类型）。**您应该始终将数据限制为最严格的类型。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T04:35:53.943

如果它被正确地转义和验证，那么你就没有问题。

当没有正确转义或验证时，就会出现问题。这可能是由于编码草率或疏忽而发生的。

问题不在于特定实例，而在于模式。这种模式使 SQL 注入成为可能，而另一种模式则使其成为不可能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T05:00:48.167

所有答案都是好的和正确的，但我觉得我需要补充一点，`prepare`/`execute`范式也不是*唯一*的解决方案。您*应该*有一个数据库抽象层，而不是直接使用库函数，这样的层是显式转义字符串参数的好地方，无论您是让`prepare`做还是自己做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-25T05:09:58.803

我认为这里的“正确转义”是关键字。在您的[最后一个问题](https://stackoverflow.com/questions/316142/mysql-multi-table-join)中，我假设您的代码是从您的生产代码中复制粘贴的，并且由于您询问了有关三个表连接的问题，因此我还假设您没有进行正确的转义，因此我对SQL 注入攻击。

要回答您的问题，正如这里很多人所描述的那样，**如果**变量已“正确转义”，那么您就没有问题。但是为什么要这样麻烦自己呢？正如一些人所指出的，有时正确转义并不是一件简单的事情。PHP 中有一些模式和库使 SQL 注入成为不可能，我们为什么不直接使用它呢？（我还故意假设您的代码实际上是 PHP）。Vinko Vrsalovic的[回答](https://stackoverflow.com/questions/316367/how-is-this-mysql-query-vulnerable-to-sql-injection#316372)可能会为您提供有关如何解决此问题的想法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-25T04:35:37.533

这样的声明并不是真正的问题，它是“安全的”，但是我不知道你是如何做到这一点的（在 API 堆栈上一级）。如果使用字符串操作将 $user_id 插入到语句中（就像让 Php 自动填写语句一样），那么它很危险。

如果它使用绑定 API 填充，那么你准备好了。

# c# - 我需要一个关于严格 HTML 验证和过滤的 C# 库

> ID：316383
> 
> 赞同：0
> 
> 时间：2008-11-25T04:38:50.630
> 
> 标签：c#, html, validation, filtering

我需要一个关于严格 HTML 验证和过滤的 C# 库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-25T05:01:48.680

我认为不存在任何这样的事情，但是做一个在幕后利用 w3C 验证器的验证 API 似乎并不难。

你在说什么过滤？你的问题很模糊...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T05:14:50.963

Jeff Atwood 不久前发布了一些用于 HTML 标签过滤和清理的代码。从您的简短描述来看，这听起来像是您可能想要研究的东西。

[http://refactormycode.com/codes/333-sanitize-html](http://refactormycode.com/codes/333-sanitize-html)

[http://www.codinghorror.com/blog/archives/001172.html](http://www.codinghorror.com/blog/archives/001172.html)

# iis - 测试网站是否使用 Kerberos 身份验证

> ID：316384
> 
> 赞同：3
> 
> 时间：2008-11-25T04:38:59.430
> 
> 标签：iis, kerberos

您如何检查 IIS 网站是否成功使用 Kerberos 并且不依赖 NTLM？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-25T23:24:27.817

我发现在您使用 Kerberos 的代码中进行测试的一种方法是 NTLM 的 HTTP_AUTHORIZATION 标头始终以以下内容开头：

```
Negotiate TlRMTVNTUA 
```

如果标头不是以文本开头，则浏览器正在使用 Kerberos 进行身份验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-03T03:58:19.283

[Fiddler2](http://www.fiddler2.com)将指示身份验证标头是 NTLM 还是 Kerberos。

```
 Authorization Header (Negotiate) appears to contain a Kerberos ticket:
60 82 13 7B 06 06 2B 06 01 05 05 02 A0 82 13 6F  `.{..+..... .o 
```

* * *

```
 WWW-Authenticate Header (Negotiate) appears to be a Kerberos reply:
A1 81 A0 30 81 9D A0 03 0A 01 00 A1 0B 06 09 2A  ¡ 0 ....¡...* 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-25T04:58:17.313

我能想到的最简单的方法是使用wireshark 来观察网络数据包并验证您的IIS 服务器是否正在从您的DC 请求Kerberos 票证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T07:01:09.580

您可以在 Web 服务器的事件查看器中查看安全日志。

您还可以在客户端计算机上启动 KerbTray 并检查它是否使用了正确的 SPN。Kerbtray 在[这里](http://www.microsoft.com/downloads/details.aspx?familyid=4E3A58BE-29F6-49F6-85BE-E866AF8E7A88&displaylang=en)可用（别担心，它不仅限于 Win2000）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-03T04:09:28.290

我使用事件查看器中的安全日志来检查已经提到的人。这是一个成功的遏制身份验证：

```
Successful Network Logon:
User Name:  {Username here}
Domain:     {Domain name here}
Logon ID:   (0x0,0x########)
Logon Type: 3
Logon Process:  Kerberos
Authentication Package: Kerberos
Workstation Name:   
Logon GUID: {########-####-####-####-############}
Caller User Name:   -
Caller Domain:  -
Caller Logon ID:    -
Caller Process ID: -
Transited Services: -
Source Network Address: -
Source Port:    -

For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-29T11:31:07.397

好吧，Negotiate 也可以是 Kerberos，因为它是 Kerberos 和 NTLM 的包装器。就像其他人说的那样，Wireshark（或网络监视器）和安全事件日志不会欺骗你。

# javascript - Greasemonkey 的安全性如何？

> ID：316390
> 
> 赞同：17
> 
> 时间：2008-11-25T04:48:18.660
> 
> 标签：javascript, security, greasemonkey

我从未真正使用过greasemonkey，但我正在考虑使用它。考虑到 GreaseMonkey 允许您让 Internet 上的随机人更改您喜欢的网站的行为，它的安全性如何？他们可以窃取我的密码吗？看看我的私人数据？做我不想做的事？Greasemonkey 的安全性如何？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-11-25T05:04:38.893

*考虑到 GreaseMonkey 允许您让 Internet 上的随机人更改您喜欢的网站的行为，它的安全性如何？*

它尽可能安全 - 但你不是很清楚，所以让我们从几个角度来看它：

## Web开发人员

Greasemonkey 无法对您的网站做任何使用 telnet 的人已经无法对您的网站做的事情。它使事情自动化了一点，但除此之外，如果greasemonkey 是一个安全漏洞，那么你的网站设计就有缺陷——不是greasemonkey。

## 加载了 Greasemonkey 的互联网用户

就像你在系统上加载的任何其他东西一样，greasemonkey 可以用来对付你。除非您信任源（在术语“源”的两种含义中），否则不要将脚本加载到您的系统上。它是相当有限和沙盒的，但这并不意味着它是安全的，只是有人更难做一些邪恶的事情。

## 没有 Greasemonkey 的互联网用户

如果您不加载greasemonkey 或其任何脚本，它不会以任何方式影响您。Greasemonkey 不会改变您访问的网站，除非您已将其加载到系统中。

## Greasemonkey 开发人员

除了使用 XUL 和 javascript 已经可以完成的事情之外，您无能为力，但可能会破坏您的 mozilla 和/或 firefox 配置文件，以及系统的其他部分。不太可能，很难故意或恶意进行，但它不是一个防弹实用程序。 *负责任地发展。*

-亚当

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-25T05:31:39.760

> 考虑到 GreaseMonkey 允许你让互联网上的随机人改变你最喜欢的网站的行为

您已安装其 UserScript 的随机人员。没有人可以强迫您安装 UserScript。

> 他们可以窃取我的密码吗？

是的，UserScript 可以修改登录页面，从而将您的密码发送给攻击者。不，它无法查看您当前的密码，也无法查看未启用 UserScript 的网站

> 看看我的私人数据？

是的，如果您的私人数据可以在您也授予 UserScript 访问权限的网站上查看

> 做我不想做的事？

是的，UserScript 可以对网页（您已授予它访问权限）执行不需要的操作

> GreaseMonkey 的安全性如何？

与您安装的各个用户脚本一样安全

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-25T05:23:05.067

谨慎使用时，Greasemonkey 应该可以完全安全地安装和使用。虽然通过全权委托 Javascript 访问页面绝对有可能进行各种恶作剧，但 Greasemonkey 脚本仅限于特定的 URL，并且不会在其标题中的 URL 模式未指定的站点上运行。

话虽这么说，一个基本的经验法则是考虑那些激活了 Greasemonkey 脚本的页面上的大多数信息都可以被这些脚本访问。玩游戏，比如替换输入框（您可能在其中输入密码或个人信息）、读取页面上的任何数据以及将收集到的数据发送给第三方，在技术上是可行的。Greasemonkey 脚本确实在浏览器内的有效沙箱中运行，并且不应影响您在 Firefox 之外的计算机。

话虽如此，在某些方面，风险与安装任何其他小型开源软件的风险相当或更低。由于 Greasemonkey 脚本是简单的开源 Javascript 文件，因此程序员可以相对容易地查看内部并确保它按照它所说的那样做。与往常一样，小心运行陌生人的代码（任何形式），如果软件对您很重要，请花时间浏览源代码。

不过总的来说，Greasemonkey 脚本应该是相当安全的。尝试使用具有大量评论和用户的脚本，因为这些可能会得到社区更彻底的审查和分析。

快乐的用户脚本！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-02-03T03:55:33.770

是的，用户脚本可以窃取您的密码。这是底线。不要在未提及您的老板的情况下在工作或政府计算机上使用 firefox 插件或用户脚本。

与 firefox 插件不同，用户脚本没有经过正式审查。（Firefox 的“实验性”插件也没有经过审查）。您可以立即注册并添加恶意脚本到 userscripts.org。

用户脚本非常不安全。跨站点脚本能力意味着将您的详细信息/密码发送到非常隐蔽的邪恶服务器完全没有困难。该脚本可以为任何站点执行此操作。忽略试图消除/最小化此问题的其他答案。有两个问题：恶意脚本编写者将他们的恶意软件放到 userscripts.org 上，以及破坏油脂猴沙箱的脚本，因此很容易被黑客网站上的恶意代码使用，否则这些网站将被限制在同一域中。

对于邪恶的脚本作者，您可以检查发送您详细信息的代码的脚本；没什么好玩的。至少您可以通过编辑“包含/排除”子句将脚本限制在特定站点。这并不能解决问题，但至少不会发送您的银行凭据（除非您使用了相同的登录详细信息）。遗憾的是没有“includexss”子句来限制 xss 请求，这将有效地解决问题，因为至关重要的是，即使对于非开发人员也很容易检查。（Firefox 插件“RequestPolicy”不会阻止用户脚本。）

不安全的脚本：寻找任何使用“unsafewindow”。还有[其他风险电话](http://commons.oreilly.com/wiki/index.php/Greasemonkey_Hacks/Getting_Started#Pitfall_.231%3a_Auto-eval_Strings)。安装脚本时，Greasemonkey 不会警告您它们的使用。使用这些调用并不意味着脚本不安全，只是脚本编写者最好擅长安全编程；这很困难，而且大多数都不是。我避免编写需要这些调用的脚本。有一些流行的高下载脚本使用这些调用。

Mozilla.org 上的 Firefox 插件/插件与用户脚本有类似的问题，但至少它们经过了正式审查。审查/审查包括最重要的代码审查。尽管如此，还是有一些巧妙的技术可以避免检测到恶意代码而无需混淆。此外，插件可能托管在（任何人都不知道的）被黑网站上。不幸的是，Mozilla 还列出了未经审查且[包含恶意代码](http://blog.mozilla.com/addons/2010/07/13/add-on-security-announcement/ "有恶意代码")的“实验性”插件。您会收到警告，但有多少人知道真正的意义。直到我掌握了安全知识，我才这样做。我从不安装这样的插件。

用户脚本没有经过正式审查。除非脚本有很多安装，否则我会检查代码。即便如此，高安装脚本仍然可能会劫持脚本编写者的帐户并修改脚本。即使我检查脚本使用反检测编程意味着我可能看不到邪恶。也许最好的办法是使用“Tamper Data”firefox 插件检查传出的请求，但是一个聪明的脚本会延迟或不经常发送数据。不幸的是，这是一场战术战争。具有讽刺意味的是，只有微软基于证书的 activeX 对象真正接近了开发人员可追溯性的真正解决方案（但还远远不够）。

确实，firefox 插件使作恶者更容易接触到潜在的受害者，因为 firefox 插件通常更受欢迎，因此似乎更有可能成为目标，但 firefox 审查过程使用户脚本对作恶者更具吸引力，因为它们是未经审查。可以说，一个下载量低的用户脚本在被发现之前仍然可以获得大量有价值的登录信息，同时也提供用户脚本相对默默无闻和社区流失率低的好处，以及任何人对其进行代码审查的机会都很低。您不能依靠 firefox 插件的受欢迎程度来保护您免受恶意用户脚本的侵害。

作为非开发人员，您依赖于其他用户发现恶意脚本/插件。那可能性有多大？谁知道。事实上，这是一个垃圾安全模型。

最终，我使用 firefox 进行一般浏览，使用 Google Chrome（没有greasemonkey/插件）进行管理。Chrome 还有一个可用的“配置文件”功能（完全独立的浏览空间），这实际上就像使用不同的浏览器一样。我设置了三个 chrome 配置文件以使自己更加安全：电子邮件/一般管理员、银行、ebay/paypal。Firefox 有无法使用的配置文件（根据我的经验），但我更喜欢 firefox 作为浏览器，这就是为什么我仍然使用它来进行非批判性浏览。配置文件还可以防止老式浏览器安全漏洞和被黑客入侵的网站，至少限制了它们的范围。但请确保您使用不同的密码。另一种方法是在 USB 记忆棒上为关键管理员安装干净的可启动 ubuntu（请参阅此处[http://www.geekconnection.org/remastersys/](http://www.geekconnection.org/remastersys/)）。

Jetpacks 的特殊信任模型，就像 PGP 信任网络一样，强调了这个问题的严重性，应该有望缓解它。Jetpack 是 Firefox 的新成员：一种超级油脂猴。

# artificial-intelligence - 你听说过的最酷的人工智能项目是什么？

> ID：316395
> 
> 赞同：13
> 
> 时间：2008-11-25T04:50:26.643
> 
> 标签：artificial-intelligence, neural-network

随着我对计算机科学、人工智能和神经网络的了解越来越多，我不断地对计算机可以做和学习的很酷的事情感到惊讶。我一直对新旧项目着迷，我对其他 SO 用户遇到的有趣项目/应用程序感到好奇。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-25T04:59:47.670

[Numenta 智能计算平台](http://www.numenta.com/)。他们正在实现 Jeff Hawkins 在“On Intelligence”中描述的神经元类型。为了了解其重要性，他们正在研究可以在大约 200 步内视觉识别物体的软件神经元，而不是现在需要的成千上万的步骤。

编辑：显然 SDK 的 1.6.1 版现在可用。学习软件的激动人心的时刻！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T05:10:12.890

这不是 AI 本身，但[OpenCyc](http://opencyc.org/)（可能是商业大哥 Cyc）可以提供 AI 应用程序真正了解它们所在的世界所需的“常识”。

例如，Cyc 可以提供足够的一般知识，使其可以开始“阅读”和推理百科全书内容，例如维基百科，或者作为代理浏览“语义网”以开发一些特定领域的知识库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T05:21:47.890

[w](http://en.wikipedia.org/wiki/Arthur_Samuel) :

> Arthur L. Samuel（1901 年 - 1990 年 7 月 29 日）是计算机游戏和人工智能领域的先驱。塞缪尔跳棋游戏程序似乎是世界上第一个自学程序......
> 
> Samuel 设计了各种机制，通过这些机制可以使他的程序变得更好。在他所谓的死记硬背中，程序记住了它已经看到的每个位置，以及奖励函数的最终值。这种技术有效地扩展了每个位置的搜索深度。Samuel 后期的程序根据输入的专业游戏重新评估了奖励函数。作为另一种学习方式，他还让它与自己进行了数千场比赛。通过所有这些工作，Samuel 的程序达到了可敬的业余状态，并且是第一个玩这种高水平棋盘游戏的人。

[Samuel：使用跳棋游戏进行机器学习的一些研究](http://www.research.ibm.com/journal/rd/033/ibmrd0303B.pdf)（21 页 pdf 文件）。[奇点](http://en.wikipedia.org/wiki/Technological_singularity)近了！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T04:57:04.650

我自己的最爱之一是 Donald Michie 1960 年的项目：MENACE - Matchbox Educable Naughts and Crosses Engine。在这个项目中，Michie 使用了一系列带有彩色珠子的火柴盒，他教这些火柴盒玩井字游戏。这是为了证明机器在某种意义上可以从它们之前的成功和失败中学习。

更多信息以及实验的计算机模拟在这里： http: [//www.adit.co.uk/html/menace_simulation.html](http://www.adit.co.uk/html/menace_simulation.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T04:55:58.427

[http://alice.pandorabots.com/](http://alice.pandorabots.com/) - 这个机器人能够与我们进行非常智能的对话。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-30T02:10:07.230

[http://www.triumphpc.com/johnlennon/](http://www.triumphpc.com/johnlennon/)

再现约翰列侬的个性和思想。你可以在这个网站上和他聊天。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-01-28T21:15:49.807

[http://AngelCog.org](http://AngelCog.org)非常有趣。该项目基于这样一个想法，即要制作一个真正的 AI，您必须分三个阶段完成：

1) 尝试一般地处理逻辑，并且能够描述任何事情。

2) 逻辑处理代码，处理关于现实世界的“故事”。

3）逻辑处理它自己的代码，并与人交谈。

该项目基于这样一个想法，即一旦程序在逻辑上处理它自己的代码，它就已经是一个人工智能。当然它也需要能够理解“真实世界”。这就是“另一半”。

据我所知，没有其他人的项目基于这样的假设：要制造一个合适的人工智能，人工智能必须理解它所使用的语言。因此，假设 AI 是用 C++ 编写的。那么它必须掌握 C++ 并且能够读写和修改 C++ 程序，尤其是它自己！！

然而，它现在仍然是一个“玩具”，仍处于开发的“第一阶段”。（“尝试一般地处理逻辑，并能够描述任何事情。”）。但开发商正在寻求帮助。

# c++ - 分析使用插件的 Qt 应用程序

> ID：316400
> 
> 赞同：3
> 
> 时间：2008-11-25T04:56:03.137
> 
> 标签：c++, qt, plugins, profiling

我有一个使用 Qt 用 C++ 编写的中型应用程序。我想对事物进行分析以查看性能最低的代码在哪里，所以我用`-pg`.

但是，我的应用程序使用了*许多*使用 QTPlugin 机制的插件（归结为每个插件的实例对象的 dlopen 和 dlsym）。我注意到 gprof 似乎不包含插件中的函数。

是的，插件也被编译了`-pg`。有什么特别的事情我必须做的吗？还是我错过了一些简单的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T12:54:09.537

如果可以使用的话，我认为[Valgrind 的](http://valgrind.org/)callgrind 只需要调试符号（-g）来分析代码。不过，我不确定它是否适用于动态链接的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T04:42:46.597

正如 strager 所说，Valgrind（以 kcachegrind 作为查看器的 callgrind）是一个不错的选择。您也可以尝试使用[http://oprofile.sourceforge.net/](http://oprofile.sourceforge.net/)

# php - 斑马条纹与 PHPTAL？

> ID：316409
> 
> 赞同：4
> 
> 时间：2008-11-25T05:06:18.297
> 
> 标签：php, template-tal, phptal

我正在尝试 PHPTAL，我想用斑马条纹渲染一张桌子。我正在循环一个简单的 php assoc 数组（$_SERVER）。

请注意，我不想使用 jQuery 或类似的东西，我正在尝试学习 PHPTAL 的用法！

目前我的工作方式是这样的（对我来说太冗长了）：

```
<tr tal:repeat="item server">
  <td tal:condition="repeat/item/odd" tal:content="repeat/item/key" class="odd">item key</td>
  <td tal:condition="repeat/item/even" tal:content="repeat/item/key" class="even">item key</td>
  <td tal:condition="repeat/item/odd" tal:content="item" class="odd">item value</td>
  <td tal:condition="repeat/item/even" tal:content="item" class="even">item value</td>
</tr> 
```

基本上我想要一些即时的条件赋值，但我不确定语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T09:07:39.510

您可以通过编写`phptal_tales_evenodd()`函数来创建表达式修饰符（参见`phptal_tales()`手册）：

```
<td tal:attributes="class evenodd:repeat/item/odd"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T05:14:23.007

好吧，似乎我有自己的答案，尽管我仍然认为这很丑：

```
<tr tal:repeat="item server">
  <td tal:content="repeat/item/key" tal:attributes="class php: repeat.item.odd ? 'odd' : 'even'">item key</td>
  <td tal:content="item" tal:attributes="class php: repeat.item.odd ? 'odd' : 'even'">item value</td>
</tr> 
```

任何人都在寻找 PHPTAL 更优雅的东西吗？

# java - Jython 有没有好的 NumPy 克隆？

> ID：316410
> 
> 赞同：28
> 
> 时间：2008-11-25T05:06:34.567
> 
> 标签：java, python, numpy, jython

我是一个相对较新的 Python 转换者。我编写了一些代码来从各种来源获取/绘制数据，以自动化一些每周报告和预测。我对 Jython 概念很感兴趣，并且想将我编写的一些 Python 代码移植到 Jython。为了快速做到这一点，我需要一个用于 Jython（或 Java）的 NumPy 克隆。外面有这样的东西吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-25T08:14:15.517

我找不到任何克隆 numpy 的东西，但是这里有一长串 Java 数字包[-](http://math.nist.gov/javanumerics/)这些都应该可以从 Jython 中使用。我猜哪一个满足你的要求取决于你用 numpy 做什么。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-08-27T18:31:37.093

威尔伯福斯基本上是正确的。

但是，我建议查看[Apache Commons Math 库](http://commons.apache.org/math/)——这将是替代 Java 数字包的更好选择，而不是 wilberforce 的答案中列出的任何包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-11-09T13:24:43.790

Incanter 是一个 Clojure 科学/统计计算库，它使用 Parallel Colt Java 库取得了巨大成功：http: [//incanter.org/](http://incanter.org/)。一种方法可能是开始使用 Jython 中的 PColt 类，然后像 Incanter 提供的那样，为它慢慢构建 Python 式的绑定？（如果您对此感兴趣，请告诉我。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-12T02:56:47.583

sourceforge 上有一个名为 JNumeric 的构建：

sourceforge 版本已经很久没有发布了，不过好像还有 Jython 2.51 的更新版本（我自己没试过）：

[http://bitbucket.org/zornslemon/jnumeric-ra/downloads/](http://bitbucket.org/zornslemon/jnumeric-ra/downloads/)

# sql-server-2005 - 使用 SQL Server 2008 和 SQL Server 2005 和日期时间

> ID：316422
> 
> 赞同：118
> 
> 时间：2008-11-25T05:15:35.877
> 
> 标签：sql-server-2005, entity-framework, sql-server-2008, datetime, datetime2

我已经针对 2008 数据库构建了一个实体框架模型。对于 2008 数据库，一切正常。当我尝试更新 2005 数据库上的实体时，我收到此错误。

```
使用的 SQL Server 版本不支持数据类型 'datetime2
```

我在构建数据库时特别没有使用任何 2008 功能。我在代码中找不到对 datetime2 的任何引用。而且，是的，该列在数据库中被定义为“日期时间”。

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2008-11-25T06:31:11.277

[一个快速的谷歌向我指出了解决方案](http://alexduggleby.com/2008/08/11/entity-data-model-generated-against-sql-2008-used-against-sql-2005/)的样子。

在文件编辑器中打开您的 EDMX（或在 Visual Studio 中“打开方式...”并选择 XML 编辑器）。在顶部，您会找到存储模型，它有一个属性 ProviderManifestToken。这应该具有值 2008。将其更改为 2005，重新编译，一切正常。

注意：每次从数据库更新模型时都必须这样做。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-02-05T23:46:29.000

快速查看线路：

```
<Schema Namespace="Foobar.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2005" > 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-01-06T20:55:23.143

这非常令人沮丧，我很惊讶 MS 决定不这样做，以便您可以针对给定的 SQL 版本。为了确保我们的目标是 2005，我编写了一个简单的控制台应用程序并在 PreBuild 步骤中调用它。

预构建步骤如下所示：

```
$(SolutionDir)Artifacts\SetEdmxVer\SetEdmxSqlVersion $(ProjectDir)MyModel.edmx 2005 
```

代码在这里：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace SetEdmxSqlVersion
{
    class Program
    {
        static void Main(string[] args)
        {
            if (2 != args.Length)
            {
                Console.WriteLine("usage: SetEdmxSqlVersion <edmxFile> <sqlVer>");
                return;
            }
            string edmxFilename = args[0];
            string ver = args[1];
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load(edmxFilename);

            XmlNamespaceManager mgr = new XmlNamespaceManager(xmlDoc.NameTable);
            mgr.AddNamespace("edmx", "http://schemas.microsoft.com/ado/2008/10/edmx");
            mgr.AddNamespace("ssdl", "http://schemas.microsoft.com/ado/2009/02/edm/ssdl");
            XmlNode node = xmlDoc.DocumentElement.SelectSingleNode("/edmx:Edmx/edmx:Runtime/edmx:StorageModels/ssdl:Schema", mgr);
            if (node == null)
            {
                Console.WriteLine("Could not find Schema node");
            }
            else
            {
                Console.WriteLine("Setting EDMX version to {0} in file {1}", ver, edmxFilename);
                node.Attributes["ProviderManifestToken"].Value = ver;
                xmlDoc.Save(edmxFilename);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-03-28T20:07:24.213

使用上面的@Vance 方便的控制台应用程序，我将以下内容用作 BeforeBuild 事件

```
<Target Name="BeforeBuild">
    <!--Check out BD.edmx, Another.edmx, all configs-->
    <Exec Command="$(SolutionDir)\Library\tf checkout /lock:none $(ProjectDir)Generation\DB.edmx" />
    <Exec Command="$(SolutionDir)\Library\tf checkout /lock:none $(ProjectDir)Generation\Another.edmx" />
    <!--Set to 2008 for Dev-->
    <Exec Condition=" '$(Configuration)' == 'DEV1' " Command="$(SolutionDir)Library\SetEdmxSqlVersion $(ProjectDir)Generation\DB.edmx 2008" />
    <Exec Condition=" '$(Configuration)' == 'DEV1' " Command="$(SolutionDir)Library\SetEdmxSqlVersion $(ProjectDir)Generation\Another.edmx 2008" />
    <Exec Condition=" '$(Configuration)' == 'DEV2' " Command="$(SolutionDir)Library\SetEdmxSqlVersion $(ProjectDir)Generation\DB.edmx 2008" />
    <Exec Condition=" '$(Configuration)' == 'DEV2' " Command="$(SolutionDir)Library\SetEdmxSqlVersion $(ProjectDir)Generation\Another.edmx 2008" />
    <!--Set to 2005 for Deployments-->
    <Exec Condition=" '$(Configuration)' == 'TEST' " Command="$(SolutionDir)Library\SetEdmxSqlVersion $(ProjectDir)Generation\DB.edmx 2005" />
    <Exec Condition=" '$(Configuration)' == 'TEST' " Command="$(SolutionDir)Library\SetEdmxSqlVersion $(ProjectDir)Generation\Another.edmx 2005" />
    <Exec Condition=" '$(Configuration)' == 'PRODUCTION' " Command="$(SolutionDir)Library\SetEdmxSqlVersion $(ProjectDir)Generation\DB.edmx 2005" />
    <Exec Condition=" '$(Configuration)' == 'PRODUCTION' " Command="$(SolutionDir)Library\SetEdmxSqlVersion $(ProjectDir)Generation\Another.edmx 2005" />
  </Target> 
```

**这非常方便，可以避免烦人的重新部署。感谢分享万斯。**

我已将 TF.exe 添加到库解决方案文件夹中，这很有帮助，因为我现在可以在尝试编辑它们之前检查 edmx 文件，作为构建的一部分。此外，我还添加了条件，以便将其设置为 2005 用于部署到服务器，并设置为 2008 用于开发机器 sln 配置。还要提一下，您需要将实际的 SetEdmxSqlVersion.exe（和 .pdb）文件添加到库文件夹（或您想要保留这些位的任何其他位置）。

*非常感谢@Vance。*非常整洁，节省大量时间，并使我的构建完全自动化且无痛:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-08T12:10:51.443

2012 年与 2008 年有类似的问题。它可以通过使用 XmlPeek 和 XmlPoke 的 BeforeBuild 事件来解决：

```
 <Target Name="BeforeBuild">
      <XmlPeek XmlInputPath="$(ProjectDir)MyModel.edmx"
               Namespaces="&lt;Namespace Prefix='edmx' Uri='http://schemas.microsoft.com/ado/2009/11/edmx'/&gt;&lt;Namespace Prefix='ssdl' Uri='http://schemas.microsoft.com/ado/2009/11/edm/ssdl'/&gt;"
               Query="/edmx:Edmx/edmx:Runtime/edmx:StorageModels/ssdl:Schema/@ProviderManifestToken">
         <Output TaskParameter="Result" ItemName="TargetedSQLVersion" />
      </XmlPeek>

      <XmlPoke Condition="@(TargetedSQLVersion) != 2008"
               XmlInputPath="$(ProjectDir)MyModel.edmx"
               Namespaces="&lt;Namespace Prefix='edmx' Uri='http://schemas.microsoft.com/ado/2009/11/edmx'/&gt;&lt;Namespace Prefix='ssdl' Uri='http://schemas.microsoft.com/ado/2009/11/edm/ssdl'/&gt;"
               Query="/edmx:Edmx/edmx:Runtime/edmx:StorageModels/ssdl:Schema/@ProviderManifestToken"
               Value="2008">
      </XmlPoke>
   </Target> 
```

如果您不喜欢自动替换，您可以简单地将 XmlPoke 任务替换为错误任务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T18:22:27.287

**为了让遇到相同问题但使用Code First**的人受益，请在此处查看[我的回答，](https://stackoverflow.com/a/12060518/562906)了解如何更改`ProviderManifestToken`Code First 中的内容。它涉及在调用模型构建器的方法时`DbModelBuilder`手动创建一个实例并传递一个`DbProviderInfo`实例（使用适当的令牌） 。`Build`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-03-30T11:29:53.483

对我来说更好的解决方案不是手动编辑 EDMX 文件，而是在设计模式和上下文菜单“从数据库更新模型...”中打开 edmx。当然，无论这对您来说是什么，您都必须指向正确的 SQL 版本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-05T18:12:01.703

我们在 SQL2005 v.3 上遇到了这个错误，而在 SQL2005 v.4 上没有。

将 SQL2005 添加到连接字符串解决了我们的特定问题。

我们尚未确定原因，也不想修改代码以提供上述解决的令牌（部署期间出现的问题）。

# c# - 同一类中的延迟加载和急切加载行为

> ID：316431
> 
> 赞同：-1
> 
> 时间：2008-11-25T05:23:28.420
> 
> 标签：c#

我有一个从非数据库源加载大量子集合的框架。我最近有一个用例，其中资源位于网络驱动器上，并且加载集合需要很长时间。我仍然需要支持急切加载场景，但我现在需要添加延迟加载。

我有这个书签的解决方案，但现在我找不到那个链接。到目前为止，谷歌还没有返回任何可用的链接。第一个反应是在构造函数中添加一个布尔参数。我知道这是一种不好的“代码气味”，我记得答案是不同的。

任何人都可以向我指出如何解决这个问题的资源吗？

更多信息：

集合是垂直的，而不是水平的。这就是为什么在这种特定情况下无法在后台加载的原因。该数据存储在类似于文件夹的层次结构中。我已经看到一些结构的深度达到 10 层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T06:47:55.597

解决方案比我想象的要简单。我只是混合了不同级别的模式。我的意思是我在最顶部的水平集合中使用了急切加载，并将低于此的任何其他内容转换为延迟加载。

它真的很好用。现在，使用此框架的 UI 响应速度非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T05:35:16.443

是的，您的构造函数中的布尔值肯定是一种不好的代码气味。但是，我还要说，更改您的类以支持延迟加载也是一种代码味道，因为它违反了封装的一些基本原则（即您的类是否应该知道或关心资源是否位于网络驱动器上？）。

你不应该改变你的班级。相反，更改使用您的类的代码，以便它在后台线程中检索数据。

# .net - 在 Vista 而不是 XP 中开发 .Net 解决方案的优缺点

> ID：316434
> 
> 赞同：2
> 
> 时间：2008-11-25T05:28:17.147
> 
> 标签：.net, visual-studio-2008, windows-vista

我正在更改我目前运行 Win XP 的硬件，我想知道我是否也应该将我的操作系统升级到 vista。所以我的问题是，在 Vista 上使用 VS2008 进行开发时，您发现的最常见问题/优势是什么。不考虑WPF。我应该将 XP 保留在没有问题的地方吗？或者最适合开发人员需要的 Vista 版本是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T07:03:59.027

我以前使用 Vista 和 XP 作为开发机器。

但**Windows Server 2008**是其中最流畅的。超级稳定，像Vista一样漂亮，像XP一样快。并且您可以安装需要服务器的产品（BitTalk、SQL Server Standard、Sharepoint...）

请务必查看[将您的 Windows Server 2008 转换为工作站！](http://www.win2008workstation.com/wordpress/)有关如何配置 Server 2008 使其感觉和行为更像台式机的提示网页。甚至还有一个名为[Windows Server 2008 Workstation Converter](http://www.win2008workstation.com/wordpress/2008/07/17/windows-server-2008-workstation-converter/)的工具。

驱动程序应该是个问题，因为它与 Vista 共享内核，您可以使用它们。我已经使用了 32 位和 64 位的任何打嗝。

当然，VS2008 运行没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T05:33:42.453

我在 Windows XP 上进行全职开发，在家里使用 Vista 64。除了内存的 32 位限制之外，我注意到在这两个平台上开发都没有明显的好处/问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T05:39:08.230

vista 上的 UAC 可能会给您带来一些问题，但在 vs2008 中它们是最小的。在大多数情况下，您可以以管理员身份运行应用程序，以便在需要时绕过它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T05:59:07.597

确保有 Vista SP1 和 VS2008 SP1，你应该没问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T13:46:08.870

我有 Vista Home Prem，它非常适合 .NET 开发。

正如上面的帖子所说，UAC 确实会导致问题。例如，您无法使用 VS2008 保存在某些目录中，除非您右键单击程序图标并以管理员身份运行。这就是我所做的，问题就解决了（我也是机器上的管理员）。

此外，您可能会遇到具有数据库的应用程序的问题，因为您可能必须以管理员身份运行才能连接到数据库。

# c++ - 您使用什么工具在 Windows 上分析（本机）C++？

> ID：316436
> 
> 赞同：4
> 
> 时间：2008-11-25T05:29:06.287
> 
> 标签：c++, windows, profiling

Window 的程序员如何分析他们的原生 C++ 代码？在 Unix/Linux 上，你有 gprof *[感谢 Evan]*和 valgrind（我个人用过这个，虽然它不是真正的分析器），最近我在 Mac 和 Solaris 上，这意味着我搬到了 dTrace。现在，当我过去需要在 Windows 上进行配置时，就像我以前的工作一样，我使用了 Intel 的 vtune，它很棒，但是它是商业的，而且我没有私人使用的许可证，所以我我想知道 Windows 程序员常用的标准（免费更好）工具是什么？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-25T05:38:12.740

您应该尝试一下[Xperf](http://blogs.msdn.com/pigscanfly/archive/2008/02/09/xperf-a-new-tool-in-the-windows-sdk.aspx) - 它是一种新的系统范围的性能工具，可以深入了解特定应用程序以及它在自身内部的具体操作以及它对操作系统的要求。

它在适用于[Windows Server 2008 和 .NET Framework 3.5 ISO 的 Windows SDK](http://www.microsoft.com/downloads/details.aspx?FamilyId=F26B1AA4-741A-433A-9BE5-FA919850BDBF&displaylang=en)上免费提供：

> 1.  通过下载[ISO 映像](http://www.microsoft.com/downloads/details.aspx?FamilyId=F26B1AA4-741A-433A-9BE5-FA919850BDBF&displaylang=en)或使用基于 Web 的安装程序来安装 SDK。
> 2.  在 SDK 的“bin”目录中找到 xperf MSI。它将被命名为 xperf_x86.msi、xperf_x64.msi 或 xperf_ia64.msi，具体取决于您安装 SDK 的体系结构。
> 3.  然后，您可以直接从 MSI 安装 xperf 工具，或者将 xperf MSI 文件复制到另一个位置并从那里安装。例如，您可以将 MSI 文件保存在 USB 密钥上。

[资料来源：MSDN.com 上的 Pigs Can Fly 博客](http://blogs.msdn.com/pigscanfly/archive/2008/02/09/xperf-a-new-tool-in-the-windows-sdk.aspx)

刚刚验证了 xperf msi 不会安装，除非在 Windows Vista 或 Windows 2007 上。

-亚当

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T08:56:10.017

我得到了[AMD 代码分析师](http://www.amd.com/codeanalyst/)。它是免费的，而且您不需要 AMD CPU ;)

与英特尔的 VTune 相比，它有点基本，但价格合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-19T14:28:43.310

[此链接](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)讨论 Linux，但我在 MSVC 和 C# 中使用相同的技术。

# apache-flex - Flex 准备好迎接黄金时段了吗？

> ID：316440
> 
> 赞同：2
> 
> 时间：2008-11-25T05:31:46.827
> 
> 标签：apache-flex, comparison, amfphp

我正在开发一个目前用户为零的项目，但我们希望扩展到可能数百个。目前我们在一个 MySQL 数据库上运行，AMFPHP 与 Flex 交互。我们使用 Flex 是因为它强大的图形功能（对这个项目很重要），而且最初的开发人员（不是我）已经知道 ActionScript。我们目前正在使用 AIR，但可能会在某个时候切换到基于 Web 的 Flash。

我的问题是：

1.  Flex 是这样一个项目的好工具吗？
2.  我们可能遇到的 Flex 的主要限制是什么？
3.  我们可能还想考虑哪些其他开发平台？

谢谢。- 戴夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-25T08:00:25.043

简短的回答，是的。已经有许多黄金时段的应用程序使用 Flex 作为其 UI 开发平台。如果你去 Adob​​e 网站，他们展示了很多。

就个人而言，我选择 Flex 有两个原因，首先是，尽管您可能可以在 HTML 中或使用适当的工具包完成 Flex 所做的大部分工作，但 Flex 旨在提供有吸引力和引人入胜的用户体验，并且可以使用所有 Flash。此外，开发环境和可用的小部件使编程变得简单而有趣。我不想引发关于 HTML 与 Flex 的宗教战争，所以我将把它留在那里 - 它适用于我、我的应用程序和客户。

其次，更重要的是，它更多地平衡了客户端的处理负载，这意味着我的服务器架构可以优化，仅用于提供内容和持久化数据。我的大部分业务逻辑已经迁移到客户端。在古典建筑领域工作多年后，我认为这是向前迈出的一大步，但我已经可以对她提出不同意见了。

我对 Flex 的警告来自于需要为您的客户端代码采用正确的架构。如果你弄错了，很容易用 Flex 创建一个巨大且性能不佳的应用程序。让一切事件驱动并且显然是异步的，你应该没问题（'显然'，因为 Flash 播放器是单线程的）。这是缺点 1，单线程 Flash 播放器有时会导致问题。

缺点 2 可能更严重，即企业环境中的桌面被锁定。很多时候，您的目标受众不会对他们的计算机拥有管理权限，并且会使用错误的 Flash 播放器或根本没有播放器。在公共部门组织和军队中尤其如此，所以如果你要去那里，我会仔细测试你的用户中是否存在 Flash。

除此之外，我衷心推荐 Flex。在您的简历中包含这也是一件很棒的事情！

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T05:41:21.160

Flex 没有固有的可伸缩性问题，但是如果您有一个图形密集型应用程序，那么这些资源的正确服务可能是一个问题，但这与 Flex 几乎没有关系。

唯一值得注意且可能无法运行的平台是 iPhone（无闪存）和一些较旧的非闪存移动设备（尽管现在大多数都支持 Flash-lite）

至于替代方案，如果您重图形，并且不介意 iPhone，那么除了使用纯 HTML 技术之外，Flex 是不错的跨平台解决方案，即使不是最好的跨平台解决方案，这里的诀窍是 HTML 可以完成 Flex 可以做的 99%，但是如果你的 App 需要丢失的 1% 那么你就没有运气了，Flex 也会减少跨平台和大多数浏览器的兼容性问题。所以它可能会让你的工作更有效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T05:58:47.240

Silverlight 2 是一个可供考虑的替代方案。WPF 如果您正在寻找具有离线支持的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T08:56:13.653

1.  是的，项目的规模和类型很合适。
2.  您可能依赖的框架和库的不成熟。IDE的不成熟。
3.  银光，JavaFX。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T05:52:33.023

Flex + AIR 可能是和 Visual Basic 一样好的工具；它可能是拥有更灵活的编程语言和拥有免费开发工具的更好工具，但请记住这些限制......

我从使用它中看到的主要限制是文档。似乎没有足够的文档，没有足够好的文档，并且在社区中没有足够的高知名度工作。（这来自于 .NET 多年；我一直对 MSDN 很少提及方法但通常能够通过找到最有用的博客文章来处理它而一直感到不安。）

其他可能的开发平台将在很大程度上取决于项目的具体情况。基于 Web 的平台陷入与数据集的深度、有状态的交互（即使使用了不错的 AJAX 库），而维护任何胖客户端程序（例如，Flex + AIR）的客户端安装如果只是一些 CRUD 形式，则可能是矫枉过正.

# asp-classic - ASP-大量记录无输出

> ID：316446
> 
> 赞同：-1
> 
> 时间：2008-11-25T05:35:01.563
> 
> 标签：asp-classic

我有一个 ASP 页面，它将从数据库表中查询记录并进行一些处理，然后在浏览器中呈现一个 HTML 表。我的表中有超过 16000 行。当我使用 select top 2500 StudId,StudName from StudentsTbl 运行 prigram 时，它工作正常。但是当我使用 select "StudId,StudName from StudentsTbl" 时，它没有显示任何输出。我在 while 循环中每 50 条记录后使用 Response.flush()。谁能告诉我如何解决这个问题？提前致谢

* * *

实际上，我会通过添加 Response..ContentType = "application/vnd.ms-excel" 从这个 ASP 页面创建一个 Excel 文件，这就是您需要一次生成所有数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T05:50:39.423

根据您对问题的描述，我敢打赌您使用 IE 作为测试浏览器。Response.Flush()*正在*输出 HTML，但它不会立即显示，因为 IE 不知道如何逐步呈现表格。相反，IE 会等待整个表格输出，然后再将其绘制到浏览器窗口。你的脚本不是问题，IE 是。

话虽如此，我想指出您的设计存在根本缺陷。从可用性的角度考虑您的脚本：没有合理的理由需要一次输出 16000 行数据。[在 SQL 中分页记录集](http://www.davidhayden.com/blog/dave/archive/2005/12/30/2652.aspx)，或使用 TOP 子句将记录集限制为前 1000 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-11T02:42:46.880

尝试将其作为表格输出到浏览器 - 我敢打赌您会收到“脚本超时”错误。

最好的办法是延长超时间隔。您可以在脚本的开头使用一些代码来执行此操作，或者您可以将其作为全局服务器设置来执行。我会推荐前者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-11T02:50:58.750

Server.ScriptTimeout = 3939393

把它放在你的页面顶部（我只是选择一个随机的高数字）。我假设您从 IIS 获得超时。默认值为 90 秒。

拿走你的 response.flush，它只会让它变慢，因为服务器必须每隔 X 毫秒向客户端输出一次。而是缓冲整个页面（应该在 IIS 中设置为默认值以获得更好的性能）。

如果仍然失败，错误是什么？也许你的数据库很慢。

# biztalk - 将 Biztalk 2004 升级到 Biztalk 2006 R2

> ID：316448
> 
> 赞同：0
> 
> 时间：2008-11-25T05:35:47.473
> 
> 标签：biztalk, biztalk2006r2

我有一个客户端运行在 Biztalk 2004（我编写的）上运行的 1/2 打左右的编排，他们使用它们与供应商交换 cXML 文档（主要是发送订单）。它有一个 ASP.NET 1.1 前端。它使用 SQL 适配器来存储解析的 cXML。我通过 HTTPS 获取并发送文档。

我的问题：升级到 Biztalk 2006 R2 是否像 MS 所说的那样直接？有什么建议或我应该注意的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T07:36:07.417

在某些时候，您会想要查看 BizTalk 2006 R2 的推荐调整参数 - 我准备了一个列表，可能对相关资源链接有所帮助

[http://intltechventures.blogspot.com/2008/11/2008-11-01-saturday-biztalk-2006-r2.html](http://intltechventures.blogspot.com/2008/11/2008-11-01-saturday-biztalk-2006-r2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T02:31:39.420

除了将项目导入 Visual Studio 2005 之外，我们去年完成了类似的升级。升级没有问题。我们遇到的最大问题是我们使用的各种部署脚本。为了使用 2006 年的一些新功能，我们进行了一些重写。我们还必须为我们的应用程序适应多主机模型。但总而言之，没有问题 - 只是部署时有更多功能和 API 更改。

祝你好运。

# sql-server - 确定正在调用单独实用程序数据库中的哪个函数的数据库

> ID：316449
> 
> 赞同：0
> 
> 时间：2008-11-25T05:36:37.177
> 
> 标签：sql-server, tsql

我有几个数据库，其中一个包含从其他数据库调用的实用函数。实用程序函数中有没有办法确定从哪个数据库调用函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T05:39:26.670

您是否尝试过： SELECT db_name() ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T05:42:39.877

您将在 SQL Profiler 中运行跟踪，但这可能不会为您提供完整的列表。因此，您还应该查询每个数据库中的 information_schema.routines 和 information_schema.tables 视图，以查看哪些表和视图使用该函数，并可以调用它并将列表与跟踪进行比较。

# java - 您可以在 JFrame 中为 JPanel 设置永久大小吗？

> ID：316454
> 
> 赞同：3
> 
> 时间：2008-11-25T05:39:15.423
> 
> 标签：java, swing, size, jlabel, grid-layout

我目前的问题是我有一个带有 2x2 GridLayout 的 JFrame。在其中一个正方形内，我有一个用于显示网格的 JPanel。我正在使用 java swing 库进行实地考察...看看

[图片](http://img114.imageshack.us/img114/9683/frameow2.jpg)

Java 会自动扩展每个 JLabel 以适应屏幕。我希望它只是那些蓝色方块（水）和黑色边框，而不是那个灰色空间。有没有一种方法可以永久设置该 JPanel 的大小，这样我就不必在获得确切尺寸之前将 JFrame 的大小更改一百万次，从而使灰色空间消失？

我还想设置这些按钮的大小，这样它们就不会那么大（`BorderLayout`用于按钮和 TextField）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-10T23:30:12.260

**GridBagLayout**是您真正想要使用的。GridLayout 将强制布局中每个组件的大小相同，无论您对它们施加什么大小限制。GridBagLayout 更强大，也更复杂。在[API 页面](http://java.sun.com/j2se/1.5.0/docs/api/java/awt/GridBagLayout.html)上学习它。使用`GridBagLayout`，如果您不希望组件填充整个网格空间，它们甚至可以保持您要求的大小。为了防止组件的大小发生变化，我将设置所有三个可用的大小约束：

```
water.setPreferredSize(new Dimension(20, 20));
water.setMinimumSize(new Dimension(20, 20));
water.setMaximumSize(new Dimension(20, 20)); 
```

对于您的按钮，我肯定会使用[Bryan](https://stackoverflow.com/questions/316454/can-you-set-a-permanent-size-for-a-jpanel-inside-of-a-jframe#316496)提到的内部面板。如果您不希望所有按钮的大小相同，则可以使用他建议的 GridLayout 或 FlowLayout 。将所有按钮添加到该内部面板而不是主面板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T06:24:36.750

如果您希望两个棋盘格保持相同大小，那么您需要将它们各自包含在自己的`JPanel`. 将每个父 JPanel 的布局类型设置为`GridBagLayout`. 为每个棋盘组件设置preferedSize，然后将它们添加到各自的容器中。默认情况下，GridBagLayout 应将每个板放置在父 JPanel 的中心。所以随着窗口大小的调整，JPanel父区域会变大或变小，但里面的棋盘组件会保持不变。

或者，您可以在调整窗口大小时将蓝色方块缩放到正确的大小，方法是让每个棋盘格为`JPanel`带有`BorderLayout`布局管理器的 a 并将`JLabel`（具有蓝色背景颜色）添加到其`BorderLayout.CENTER`位置。

至于您的按钮，请尝试以下操作：

```
JPanel theButtonPanel = new JPanel(new BorderLayout());
JButton button1 = new JButton("Fire");
JButton button2 = new JButton("Pass");
JButton button3 = new JButton("Forfiet");

JPanel innerButtonContainer = new JPanel(new Grid(1, 3, 8, 8));
innerButtonContainer.add(button1);
innerButtonContainer.add(button2);
innerButtonContainer.add(button3);

theButtonPanel.add(innterButtonContainer); 
```

最后，考虑为您的 Swing 用户界面使用设计工具。Netbeans 内置了一个**出色的 UI**设计器。[在此处](http://www.netbeans.org/downloads/index.html)下载 Netbeans 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T05:46:33.800

如果可以`setResizeable( false )`在顶层框架上，则可以将布局管理器设置为空，并通过 setBounds 对每个位置和大小进行硬编码。这就是我的做法（当然取决于调整大小）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T19:17:11.043

我已经使用`TableLayout`第三方布局管理器成功解决了此类问题。您需要下载它并阅读教程，但关键是在将 JButtons 添加到布局中的位置时将对齐设置为 CENTER。

# c# - C#：如何检测输入到控制台应用程序中的参数？

> ID：316463
> 
> 赞同：19
> 
> 时间：2008-11-25T05:48:14.127
> 
> 标签：c#

我将如何在 C# 中检测控制台应用程序的输入？

例如，假设我希望控制台应用程序通过以下方式启动：Welcome To Food Hut（光标在第一行之后在此处键入内容）

我希望控制台应用程序检测两个命令：

1：/help - 这将显示一些帮助乱码。

2：/food Pizza -t 意大利辣香肠 -d pepsi - 这将显示“所以你想喝一个带有意大利辣香肠和百事可乐的披萨吗？”

如果输入 /food 比萨，我将如何首先检测 /command 输入了什么，并阅读 -t 意大利辣香肠（浇头）和 -d pepsi（喝）之类的参数？

我的主要问题是弄清楚如何检测输入的第一个单词，弄清楚如果是 /help 然后调用一些方法将一些帮助文本发布到控制台，或者如果命令是 /food 然后读取之后的内容/food 命令、-t 和 -p。

```
 static void Main(string[] args)
    {
        Console.WriteLine("Welcome To Food Hut");
        Console.ReadLine();

        // if readline equals to /help then display some help text.

        // if /food command is typed, read first argument after /food Pizza, -t TheTopping
        // and -p ForWhatToDrink

        // and then display, 'So you would like a Pizza with Pepperoni and Pepsi to drink?'
    } 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-11-25T07:37:21.317

我推荐[Richard Lopes 的 Command Line Arguments Parser](http://www.codeproject.com/KB/recipes/command_line.aspx)。它功能强大且使用非常简单。此外，它接受各种指定参数的方式，例如：

*   /name=斯特凡
*   --name=斯蒂芬
*   --name="多个单词"
*   -名称“斯特凡”

**示例代码：**

```
static void Main(string[] args)
{
    Arguments cmdline = new Arguments(args);

    Console.WriteLine(cmdline["name"]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T06:07:10.250

我的直接建议是这样的：

```
string input = Console.ReadLine();
if (input == "/help") { }
else if (input.StartsWith("/food")) { }
else { //... } 
```

除此之外，下一个最简单的解决方案涉及正则表达式。如果您需要真正可扩展的东西，您可能会考虑使用词法分析器/解析器。

但话又说回来，有些事情告诉我你以错误的方式解决问题。也许向用户显示菜单会更容易，如下所示：

```
Food:
1) Tofu
2) Tempeh
3) Seitan
4) Soup

Choice (1-4)? [users input]

Drink:
1) Pepsi
2) Coffee
3) Water
4) Tea
5) Juice

Choice (1-5)? [users input] 
```

编号菜单可能更容易让您的用户消化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-25T07:24:32.683

使用 string.split 查找以空格分隔的所有单词。

```
input = Console.ReadLine();
string[] commands = input.Split(' ');
if(commands[0] == "/food")
{
 if(commands[1] == "Pizza");
   .....
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-25T06:37:13.387

要跳过编码基础知识，您可能需要查看[Chris Sells的](http://www.sellsbrothers.com/)[Genghis 项目](http://www.sellsbrothers.com/tools/Genghis/)的命令行解析子项目。它是链接页面上表格中的第一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T06:16:15.227

遇到[gsscoder/commandline](https://github.com/gsscoder/commandline)。一个干净的面向对象的实现，可通过 NuGet 获得。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T05:54:31.727

查看 String.Contains

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-25T06:09:25.597

Paul 是对的，您将需要使用各种 String 成员来完成此任务。

[MSDN](http://msdn.microsoft.com/en-us/library/system.string_members.aspx)

如果您感觉很企业，您可以考虑使用 String.Text.RegularExpression 类来解析文本，但首先要使用字符串成员。

还可以尝试谷歌搜索 C# 字符串解析。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2010-01-18T14:48:10.050

这个案子怎么办：

```
mssinp.exe -cf "C:\Temp\config.txt" 
```

参数的值将被拆分为

```
[0] 'C'
[1] '\Temp\config.txt' 
```

# python - 在 Win32 上为 Python 2.6 编译 MySQLdb 时出现问题

> ID：316484
> 
> 赞同：9
> 
> 时间：2008-11-25T06:14:20.907
> 
> 标签：python, mysql, winapi

我正在使用 Django 和 Python 2.6，我想使用 MySQL 后端来扩展我的应用程序。问题是 Python 2.6 上没有用于 MySQLdb 的 win32 包。

现在我不是黑客，但我想我可以使用 MSVC++9 Express 自己编译它。但是我遇到了一个编译器很快找不到的问题`config_win.h`，我假设它是 MySQL 的头文件，以便 MySQLdb 包可以知道它可以对 MySQL 进行哪些调用。

我对吗？如果是这样，我在哪里可以获得 MySQL 的头文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-25T21:51:20.827

谢谢大家！我发现我没有在 MySQL 中安装开发者组件。一旦完成，问题就解决了，我轻松地为 Python 2.6 编译了 MySQLdb。

我已经在[我的网站上](http://www.technicalbard.com/files/MySQL-python-1.2.2.win32-py2.6.exe)提供了这个包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T15:29:51.673

我认为头文件随 MySQL 一起提供，只需确保在安装时检查适当的选项（我认为源和头文件位于安装对话框中的“开发人员组件”下）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T13:35:16.537

您是否考虑过使用 Python、MySQL、Apache 等的预构建堆栈？

例如：[http ://bitnami.org/stack/djangostack](http://bitnami.org/stack/djangostack)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-16T12:17:26.880

另请参阅 mysql-python 博客上的这篇文章：[MySQL-python-1.2.3 beta 2 发布](http://mysql-python.blogspot.com/2009/03/mysql-python-123-beta-2-released.html)- 日期为 2009 年 3 月。适用于 Python 2.6 的 MySQLdb 仍在进行中...

# sql - 重命名 SQL Server 架构

> ID：316485
> 
> 赞同：58
> 
> 时间：2008-11-25T06:14:21.653
> 
> 标签：sql, sql-server, sql-server-2005, schema

如何使用 SQL Server 重命名架构？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-11-25T15:28:47.883

如果您在模式中有大量对象，您可以使用类似这样的东西来自动生成所有更改（它只执行表和视图，因此在运行它之前，您可能需要将其扩展为 SP、UDF 等.)

```
USE SandBox

DECLARE @OldSchema AS varchar(255)
DECLARE @NewSchema AS varchar(255)
DECLARE @newLine AS varchar(2) = CHAR(13) + CHAR(10)

SET @OldSchema = 'dbo'
SET @NewSchema = 'StackOverflow'

DECLARE @sql AS varchar(MAX)

SET @sql = 'CREATE SCHEMA [' + @NewSchema + ']' + @newLine
SELECT @sql = @sql + 'GO' + @newLine
SELECT @sql = @sql + 'ALTER SCHEMA [' + @NewSchema + '] TRANSFER [' + TABLE_SCHEMA + '].[' + TABLE_NAME + ']'
     + @newLine
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = @OldSchema

SET @sql = @sql + 'DROP SCHEMA [' + @OldSchema + ']'

PRINT @sql -- NOTE PRINT HAS AN 8000 byte limit - 8000 varchar/4000 nvarchar - see comments
IF (0=1) EXEC (@sql) 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2008-11-25T09:06:37.250

您可以通过以下方式将单个对象从一个模式移动到另一个模式：

```
ALTER SCHEMA NewSchema TRANSFER OldSchema.Object; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-10T09:09:35.870

我结合了上面的两个代码并使用游标不受字符串变量大小的限制，单独执行命令。我假设您已经创建了新架构，并在确认一切正常后将删除旧架构。它更安全... :)

```
DECLARE @OldSchema AS varchar(255)
DECLARE @NewSchema AS varchar(255)

SET @OldSchema = 'dbo'
SET @NewSchema = 'StackOverflow'

DECLARE @sql AS varchar(MAX)

DECLARE @Schema AS varchar(MAX)
DECLARE @Obj AS varchar(MAX)

-- First transfer Tables and Views

DECLARE CU_OBJS CURSOR FOR
    SELECT TABLE_SCHEMA, TABLE_NAME
    FROM INFORMATION_SCHEMA.TABLES
    WHERE TABLE_SCHEMA = @OldSchema

OPEN CU_OBJS

FETCH NEXT FROM CU_OBJS
INTO @Schema, @Obj

WHILE @@FETCH_STATUS = 0
BEGIN
    SELECT @sql = 'ALTER SCHEMA [' + @NewSchema + '] TRANSFER [' + @OldSchema + '].[' + @Obj + ']'
    PRINT @sql
--  EXEC (@sql)

    FETCH NEXT FROM CU_OBJS
    INTO @Schema, @Obj
END

CLOSE CU_OBJS
DEALLOCATE CU_OBJS

-- Now transfer Stored Procedures

DECLARE CU_OBJS CURSOR FOR
    SELECT sys.schemas.name, sys.procedures.name
    FROM sys.procedures,sys.schemas
    WHERE sys.procedures.schema_id=sys.schemas.schema_id and sys.schemas.name = @OldSchema

OPEN CU_OBJS

FETCH NEXT FROM CU_OBJS
INTO @Schema, @Obj

WHILE @@FETCH_STATUS = 0
BEGIN
    SELECT @sql = 'ALTER SCHEMA [' + @NewSchema + '] TRANSFER [' + @Schema + '].[' + @Obj + ']'
    PRINT @sql
--  EXEC (@sql)

    FETCH NEXT FROM CU_OBJS
    INTO @Schema, @Obj
END

CLOSE CU_OBJS
DEALLOCATE CU_OBJS 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-08T05:28:13.500

在 SQL Server 2008 中重命名具有更多表的架构的存储过程

```
 IF OBJECT_ID ( 'dbo.RenameSchema', 'P' ) IS NOT NULL 
    DROP PROCEDURE dbo.RenameSchema;
   GO                         

CREATE PROCEDURE dbo.RenameSchema               

 @OLDNAME  varchar(500),
@NEWNAME  varchar(500)

AS            
     /*check for oldschema exist or not */
     IF NOT EXISTS (SELECT 1 FROM sys.schemas WHERE name =  @OLDNAME)

        BEGIN

            RETURN

        END

       /* Create the schema with new name */
      IF NOT EXISTS (SELECT 1 FROM sys.schemas WHERE name = @NEWNAME)

      BEGIN

          EXECUTE( 'CREATE SCHEMA ' + @NEWNAME );

       END                

     /* get the object under the old schema and transfer those objects to new schema */
     DECLARE Schema_Cursor CURSOR FOR

    SELECT ' ALTER SCHEMA ' + @NEWNAME + ' TRANSFER '+ SCHEMA_NAME(SCHEMA_ID)+'.'+ name  
    as ALTSQL from sys.objects WHERE type IN ('U','V','P','Fn') AND 
    SCHEMA_NAME(SCHEMA_ID) = @OLDNAME;

   OPEN Schema_Cursor;          

  DECLARE @SQL varchar(500)         

   FETCH NEXT FROM Schema_Cursor INTO @SQL;

   WHILE @@FETCH_STATUS = 0
    BEGIN
    exec (@SQL) 
    FETCH NEXT FROM Schema_Cursor INTO @SQL;
   END;

   CLOSE Schema_Cursor;

   DEALLOCATE Schema_Cursor;

   /* drop the old schema which should be the user schema */
   IF @OLDNAME <> 'dbo' and  @OLDNAME <> 'guest'
   BEGIN
    EXECUTE ('DROP SCHEMA ' + @OLDNAME) 
    END
   GO 
```

执行重命名模式的过程：示例：

```
 EXECUTE RenameSchema 'oldname','newname'
    EXECUTE RenameSchema 'dbo','guest' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-01-03T07:50:42.150

手续

```
USE DatabaseName

DECLARE @OldSchema AS varchar(255)
DECLARE @NewSchema AS varchar(255)

SET @OldSchema = 'ComputerLearn'
SET @NewSchema = 'Basic'

DECLARE @sql AS varchar(MAX)

SET @sql = 'CREATE SCHEMA [' + @NewSchema + ']' + CHAR(13) + CHAR(10)

SELECT @sql = @sql + 'ALTER SCHEMA [' + @NewSchema + '] TRANSFER [' + sys.schemas.name + '].[' + sys.procedures.name + ']'
     + CHAR(13) + CHAR(10)
FROM sys.procedures,sys.schemas
WHERE sys.procedures.schema_id=sys.schemas.schema_id and sys.schemas.name = @OldSchema

SET @sql = @sql + 'DROP SCHEMA [' + @OldSchema + ']'

PRINT @sql
IF (0=1) EXEC (@sql) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-10T01:26:14.033

这是一个简短的版本，但效果很好。

```
declare @sql varchar(8000), @table varchar(1000), @oldschema varchar(1000), @newschema   varchar(1000)

  set @oldschema = 'old'
  set @newschema = 'dbo'

 while exists(select * from sys.tables where schema_name(schema_id) = @oldschema)

  begin
      select @table = name from sys.tables 
      where object_id in(select min(object_id) from sys.tables where  schema_name(schema_id)  = @oldschema)

    set @sql = 'alter schema [' + @newschema + '] transfer [' + @oldschema + '].[' + @table + ']'

   exec(@sql)
 end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-19T07:01:39.767

对我有用的最简单的解决方案是：
我只有一个带有两个表的模式 dbo，`PopulationByCountrySTG`并且`CountryRegionSTG`

(1) 我通过执行创建了一个新模式，

```
create schema stg 
```

（2）我执行了以下命令，

```
ALTER SCHEMA stg TRANSFER dbo.PopulationByCountrySTG;
ALTER SCHEMA stg TRANSFER dbo.CountryRegionSTG; 
```

全部完成。让我知道它是否适合你。谢谢你们。

# .net - 如何设计可测试性代码

> ID：316486
> 
> 赞同：6
> 
> 时间：2008-11-25T06:15:04.010
> 
> 标签：.net, unit-testing, testing, tdd

我一直在考虑在我未来创建的任何项目中使用 TDD 并实施适当的测试（才刚刚开始了解它使你的生活变得多么美好）。所以在过去的几天里，我一直在 SO 上四处游荡，试图了解如何设计您的应用程序以实现可测试性，但我似乎仍然在为一些想法苦苦挣扎。

我已经阅读了很多内容，您应该**针对接口**而不是**类**进行编程。我遇到的主要问题是，您应该创建多少个接口？你应该为你想要测试的所有东西准备一个吗？还是我读错了？

另一件事是使用大量的依赖注入，因此您可以模拟您正在注入的部分，而不是使用真实的东西。它是否正确？还是我也在这里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-25T06:57:06.717

I think you have the right idea, but I think you are making this into a bigger deal than it is. If you start doing TDD, your first reaction will probably be 'is this it?'. And then later, you should hopefully say 'aha'!

The main thing is that you get nUnit, learn the tutorial, and then make sure you write a test for everything you do before you write the implementation. You might skip over writing tests for property accessors, but anything that requires any calculations, you should write a test first.

So, pretend you're testing a calculator's Add(int 1, int 2), the first thing you think is, 'how can I break this'. My ideas where things could go wrong are: negative numbers, zeros, and overflows. The trick is to imagine every mistake the person who is going to create the Add() method might make, and then write a test against it. So, I might write:

```
Assert.AreEqual(5, calc.Add(2, 3), "Adding positives not as expected");
Assert.AreEqual(-5, calc.Add(-2, -3), "Adding negatives not as expected");
Assert.AreEqual(-2, calc.Add(-3, 2), "Adding one positive and one negative not as expected");

// your framework might provide a cleaner way of doing this:
try {
  int result = calc.Add(Int32.Max, 5);
  Assert.Fail("Expected overflow error. Received: " + result);
} catch(Exception e) {
  // This should be a more specific error that I'm not looking up
} 
```

So, as you can see, what I've tried to do is figure out how the Add() method might not work, and then test against it. I've also looked for interesting corner cases and explicitly defined the behaviour that I'm expecting. And then now I'm free to go off and code the Add() method.

Now, while that's not all that great, you know that your Add() method will be rock-solid for when you start creating complex math functions that combine your Sin() method with your Sqrt() method along with your Add() method.

That, for better or worse, is Test Driven Development. Don't get too hung up on the interfaces or dependency injection for now. That can come later, if you need it.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-25T07:49:59.713

First off.. TDD is No Magic/Silver Bullet. Invest some time with this.. it'll be worth your while. Don't try and pick up TDD on-the-fly or off-SO-posts. Pick up a good book (Kent Beck / Dave Astels) and work your way up.. (it's depressing to see people thrashing around when all they need is to take a step back and read.)

## Design for testability:

*   Write code test first.. your testable design shall emerge.. one passing test at a time. You get it as a by-product.. more like a treat for doing it right.
*   Wishful thinking: Imagine that the thing you want to build already exists. How would you talk to it? This simple simulation should hand you the external interface definition of 'the thing'
*   Keep it Simple / YAGNI / Hold the hammer: Invest some time to see through the practices (Patterns, DI, Mocks, you'll find lots etc.) to find why they exist in the first place. Evaluate if you need them and only then proceed to use them. Another good thing to look for is 'where not to use them?'. If it sounds like a bad idea.. it probably is. (e.g. do I need an interface to do PR for every class that I write.. probably not. Do I need to Spring.net every class I create? ) Ask the following questions at each checkpoint (K. beck's definition of a simple design)

    *   Do the code and tests communicate everything I need to communicate?
    *   Is there any duplication? (Eliminate if any)
    *   Does it contain the fewest possible classes?... the fewest possible methods? Is there anything that I could take away from this design and still preserve behavior.
*   Refactor mercilessly: listen to Martin Fowler and keep the book handy

(it's an interesting process trying to distill what you do to a select few steps :) Thanks for the opportunity to reflect)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-25T06:33:16.950

我喜欢使用 Kent Beck 的经验法则。

编写一个描述理想对象 API 的测试。换句话说，编写您希望其他人可以编写的代码以使某些事情发生。您最终可能无法以这种方式实际实现它，但您最好从一开始就使用 BEST 接口而不是其他接口。

另外，只是一点测试技巧……不要想太多。有很多人会告诉你如何测试，但根据我的经验，你是唯一能真正做出决定的人。只要知道您正在测试的事实就是让您的代码变得更好，并做正确的事情。当您查看其他经过良好测试的代码时，您将开始开发一种风格并立即成为专业人士。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-27T05:28:59.077

First, read the [Google Guide to Writing Testable Code](http://googletesting.blogspot.com/2008/11/guide-to-writing-testable-code.html) which has just been released on November 24th.

It is a great compilation of testability best practices by Miško Hevery, testing evangelist at Google.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T06:36:33.170

You're heading in the right direction but don't get too crazy. You don't need an interface for every object you want to test for example.

Understand that the main motivation for both techniques you describe are to **reduce coupling** in the system. Tightly coupled systems are hard to test because there's no place for me to detect correct/incorrect behavior and I can't prevent side-effects in the real system (accessing files, databases, etc).

(It turns out that tight coupling also makes systems difficult to maintain, so the effort to break coupling for the purpose of testing also brings other benefits, which is why so many people stress the design benefits of unit testing in general and TDD in particular.)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-25T07:41:54.427

If you apply TDD, you'll obtain a design that is testable - and tested - as you'll grow your unit tests suite alongside your code. The design *emerges*, driven by the test.

Find a rough design (*) to solve the problem at hand, then start with a class that does not depend on another class, implement it, tests first. Then you can either implement a class that has no dependency too, or a class that depends on a class you already implemented.

When implementing a class that depends on another one, you have two possibilities for testing it : either you use an instance of the other class, or you mock it, in which case having an interface may help. With a language that does not support interface, you can just subclass the class you want to mock.

It's best to program against an interface when you don't want the class you're coding to depend on another class, merely not to depend to another class to belongs to another layer or another component.

(*) You do not have to design everything as test-driving your code may lead you into another direction: see the [bowling game](http://www.objectmentor.com/resources/articles/xpepisode.htm) article which demonstrates **TDD** and **emergent design** in a few pages.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-25T06:25:03.100

如果您确实按照您所说的去做，那么您对 ​​Mocking 部分的看法是正确的。

至于接口，考虑到这一点，我个人的开发方法是我首先编写我的应用程序的主路径应该是什么样子（使用我理想的什么都不做的模拟 API）。然后在查看了我的 Mock 实现并对其进行了几次改进之后，我开始了实际的类设计。在这个阶段“知道”我如何测试每个方法，并为它编写一个测试，如果由于某种原因我遇到一个我不能轻易弄清楚如何测试的方法，这意味着该方法不好，大多数可能它有太多的责任，太多的中间状态我无法测试，所以我分解了这个方法（这里的接口胜过类设计）。并继续滴下，直到我有一个可行的应用程序。

# c - C中的位掩码

> ID：316488
> 
> 赞同：23
> 
> 时间：2008-11-25T06:16:37.140
> 
> 标签：c, bit-manipulation

什么是在 C 中构造位掩码的最佳方法，其中`m`设置位前面是未`k`设置位，然后是未`n`设置位：

```
00..0 11..1 00..0
  k     m     n 
```

例如，k=1、m=4、n=3 将产生位掩码：

```
01111000 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-11-25T06:21:44.213

~(~0 << m) << n

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-11-25T06:21:47.630

那么，您要求以 k 个复位位为前缀的 m 个设置位，然后是 n 个复位位？我们可以忽略 k，因为它在很大程度上受到整数类型选择的限制。

```
mask = ((1 << m) - 1) << n; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-25T09:19:34.323

我喜欢这两种解决方案。这是我想到的另一种方式（可能不是更好）。

`((~((unsigned int)0) << k) >> (k + n)) << n`

编辑：我以前的版本中有一个错误（它没有 unsigned int 强制转换）。问题是`~0 >> n`在前面添加 1 而不是 0。

是的，这种方法有一个很大的缺点。它假设您知道默认整数类型的位数，或者换句话说，它假设您确实知道 k，而其他解决方案与 k 无关。这使得我的版本不那么便携，或者至少更难移植。（它还使用 3 次移位、加法和按位否定运算符，这是两个额外的操作。）

**因此，您最好使用其他示例之一。**

这是一个由 Jonathan Leffler 完成的小测试应用程序，用于比较和验证不同解决方案的输出：

```
#include <stdio.h>
#include <limits.h>

enum { ULONG_BITS = (sizeof(unsigned long) * CHAR_BIT) };

static unsigned long set_mask_1(int k, int m, int n)
{
    return ~(~0 << m) << n;
}

static unsigned long set_mask_2(int k, int m, int n)
{
    return ((1 << m) - 1) << n;
}

static unsigned long set_mask_3(int k, int m, int n)
{
    return ((~((unsigned long)0) << k) >> (k + n)) << n;
}

static int test_cases[][2] =
{
    { 1, 0 },
    { 1, 1 },
    { 1, 2 },
    { 1, 3 },
    { 2, 1 },
    { 2, 2 },
    { 2, 3 },
    { 3, 4 },
    { 3, 5 },
};

int main(void)
{
    size_t i;
    for (i = 0; i < 9; i++)
    {
        int m = test_cases[i][0];
        int n = test_cases[i][1];
        int k = ULONG_BITS - (m + n);
        printf("%d/%d/%d = 0x%08lX = 0x%08lX = 0x%08lX\n", k, m, n,
               set_mask_1(k, m, n),
               set_mask_2(k, m, n),
               set_mask_3(k, m, n));
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-08T16:56:59.857

虽然最重要的答案简单有效，但它们并没有为以下情况设置 MSB`n=0`和`m=31`：

`~(~0 << 31) << 0`= <代码>0111 1111 1111 1111 1111 1111 1111 1111</代码>

`((1 << 31)-1) << 0`= <代码>0111 1111 1111 1111 1111 1111 1111 1111</代码>

我对 32 位无符号字的建议如下所示：

```
unsigned int create_mask(unsigned int n,unsigned int m) {
  // 0 <= start_bit, end_bit <= 31
  assert(n >=0 && m<=31);
  return (m - n == 31 ? ~0: ((1 << (m-n)+1)-1) << n);
} 
```

这实际上获得了范围内的位`[m,n]`（闭合区间），因此`create_mask(0,0)`将返回第一位（位 0）`create_mask(4,6)`的掩码并返回位 4 到 6 的掩码，即`... 00111 0000`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-09T00:22:44.060

（仅限）对于那些对支持 BMI2 的 x86 系统（Intel Haswell 或更新版本、AMD Excavator 或更新版本）上更高效的解决方案感兴趣的人：

```
mask = _bzhi_u32(-1,m)<<n; 
```

该`bzhi`指令将从指定位位置开始的高位归零。`_bzhi_u32`内在函数编译为此指令。测试代码：

```
#include <stdio.h>
#include <x86intrin.h>
/*  gcc -O3 -Wall -m64 -march=haswell bitmsk_mn.c   */

unsigned int bitmsk(unsigned int m, unsigned int n)
{
    return _bzhi_u32(-1,m)<<n;
}

int main() {
    int k = bitmsk(7,13);
    printf("k= %08X\n",k);
    return 0;
} 
```

输出：

```
$./a.out
k= 000FE000 
```

代码片段`_bzhi_u32(-1,m)<<n`编译为三个指令

```
movl    $-1, %edx
bzhi    %edi, %edx, %edi
shlx    %esi, %edi, %eax 
```

这比[@Jonathan Leffler](https://stackoverflow.com/a/316494/2439725) 和[@Darius Bacon](https://stackoverflow.com/a/316493/2439725)的代码少一条指令。在 Intel Haswell 处理器或更新的处理器上，两者`bzhi`都`shlx`具有 1 个周期的延迟和 2 个每个周期的吞吐量。在 AMD Ryzen 上，这两条指令的吞吐量甚至为每个周期 4 条。

# iphone - 如何从 nib 文件加载 viewController

> ID：316500
> 
> 赞同：0
> 
> 时间：2008-11-25T06:27:04.407
> 
> 标签：iphone, cocoa-touch, interface-builder

我有一个标签栏基础项目（连同导航控件），在一个特定的标签内有一个 tableViewLoaded ，当我点击表格行时，它应该打开另一个视图，即它推动另一个控制器，我在 MainWindow 中有一个视图控制器此视图的 .nib 也带有按钮标签等一些项目，但是当我单击它时，它不会显示任何内容，只有一个空白页面会出现，任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T14:04:23.797

您通常应该为每个 nib 文件使用一个视图控制器；它使事情变得容易得多。需要检查的几件事：

1.  是否正在创建您的视图控制器对象（在其 init、loadView 或 viewDidLoad 方法中设置断点）
2.  是否正在显示您的视图（在您的 viewWillAppear: 或 viewDidAppear: 方法中设置断点）
3.  您的视图是否正确连接（确保 IB 中的视图出口正确连接；这是一个常见错误）

如果您的问题实际上是*如何*加载与 UIViewController 子类配对的 nib 文件，请查看 UIViewController 的 -initWithNibName:bundle: 和 -loadView 方法。

# javascript - Greasemonkey\JavaScript 复制到剪贴板按钮

> ID：316508
> 
> 赞同：5
> 
> 时间：2008-11-25T06:33:57.013
> 
> 标签：javascript, firefox, greasemonkey

我正在尝试编写一个 JavaScript 脚本来添加到greasemonkey，它在元素之后添加一个按钮。此按钮的 onClick 应将父元素文本复制到键盘。我已经看到很多将已选择的文本复制到剪贴板的示例，例如：

```
 <SCRIPT LANGUAGE="JavaScript">
    <!-- Begin
    function copyit(theField) {
    var selectedText = document.selection;
    if (selectedText.type == 'Text') {
    var newRange = selectedText.createRange();
    theField.focus();
    theField.value = newRange.text;
    } else {
    alert('Alert: Select The text in the textarea then click on this button');
    }
    }
    // End -->
    </script>
    <input onclick="copyit(this.form.text_select)" type="button" value="Click Here to Copy the Highlighted Text" name="copy_button"> 
```

[在这里](http://www.wallpaperama.com/forums/javascript-copy-selected-text-box-select-all-highlight-text-form-copy-paste-t706.html)找到。

我还发现您可以在输入元素中选择文本。我尝试将这两种技术以及许多其他技术结合起来，但还没有可行的解决方案。我什至不确定为什么上面的代码会复制到剪贴板。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-08T00:04:46.577

如果您花时间阅读完整的文章，作者说这不适用于 Firefox...
实际上，我认为它甚至不适用于 IE，因为它与剪贴板无关！

有一种使用 Flash 的技术，因为默认情况下，Firefox 出于安全原因禁止访问剪贴板。
否则，复制的经典方法是：

```
var tc = textToCopy.replace(/\n\n/g, '\n');
if (window.clipboardData) // IE
{
  window.clipboardData.setData("Text", tc);
}
else
{
  unsafeWindow.netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
  const clipboardHelper = Components.classes
      ["@mozilla.org/widget/clipboardhelper;1"].
      getService(Components.interfaces.nsIClipboardHelper);
  clipboardHelper.copyString(tc);
} 
```

启用复制后（对于给定站点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T09:07:07.017

你确定你的例子有效吗？它不在我的浏览器中。但请查看以下页面： http: [//www.jeffothy.com/weblog/clipboard-copy/](http://www.jeffothy.com/weblog/clipboard-copy/)

# python - Ghostscript PDF -> TIFF 在使用带有亚洲字体的文件时会引发无法捕获的异常

> ID：316518
> 
> 赞同：0
> 
> 时间：2008-11-25T06:41:16.420
> 
> 标签：python, jython, tiff, ghostscript

Ghostscript 卷曲而死，向 stdout 抛出一个我无法捕获和记录的异常。我很确定当我给它亚洲字体时它会生病。有没有人支持这个问题并解决了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T13:21:28.250

可能是您需要从子进程中读取 stderr。

# c# - 是什么意思 ”..：：。” 在 C# 中？

> ID：316520
> 
> 赞同：8
> 
> 时间：2008-11-25T06:42:48.273
> 
> 标签：c#, colon

我在 ListView 类上看到了这个签名：

```
public ListView..::.ListViewItemCollection Items { get; } 
```

当我看到它时，“什么？！”

我搜索了“点点冒号冒号点”和“..::.” 在谷歌上没有结果。

![替代文字](https://i.stack.imgur.com/av0FO.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-25T07:05:52.080

那不是 C#；那是JScript。在 C# 中，它将是：

公共 ListView.ListViewItemCollection 项目 { 获取；}

有点不同，因为 ListViewItemCollection 是 ListView 的一个内部类。

我猜您在查看[ListView.Items Property (System.Windows.Forms)](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.items.aspx "ListView.Items 属性 (System.Windows.Forms)")时看到了这个。

如果您查看所有其他语言的列表，它们都以 JScript 语法列出。您发现了一个文档错误。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2008-11-25T07:20:18.247

ListViewItemCollection 是 ListView 的嵌套类型，这意味着在代码中，Collection 类是在 ListView 定义内部定义的，如下所示：

```
public class ListView {
  public ListViewItemCollection Items {get;}

  public class ListViewItemCollection : IList {
    // more code here
  }
} 
```

我会假设它是这样编码的，只是为了让他们的源代码树更干净一点。这样，与 ListView 控件关联的所有帮助器集合类都不会分散在整个目录中。内部类确实有一些特殊的特性，但我无法想象在这里适用。

# sql - 我如何编写一个 sql 查询来查找其中一列是另一列的子字符串的行

> ID：316524
> 
> 赞同：2
> 
> 时间：2008-11-25T06:47:01.807
> 
> 标签：sql, tsql

我希望找到表中的所有行，其中一列是另一列的子字符串。

换句话说，假设我有一个包含两列的表（称为 people）：firstname 和 lastname，并且我想找到所有像“rob robinowitz”和“jill bajillion”这样的人。

有没有办法做类似“从姓氏像％firstname％的人中选择*”？（但实际上有效的东西）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T06:58:11.677

你很亲近

```
select * from people where lastname like '%' + firstname + '%' 
```

替代方式（可能更快）

```
select * from people where charindex(firstname,lastname)>0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T07:00:42.763

如果你使用 MySQL，你可以

```
SELECT * FROM people WHERE INSTR(lastname, firstname) <> 0 
```

# php - 如何在 PHP 文档中找到 DateTime 类的描述？

> ID：316528
> 
> 赞同：1
> 
> 时间：2008-11-25T06:49:15.530
> 
> 标签：php, datetime

听起来很简单，但我在文档中找不到这个内置类和其他类的位置。我使用函数，但想知道 OO 方面有什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T06:58:49.567

它不是 URL 或任何东西，但您可以使用反射获得一个公平的想法：

```
Reflection::export(new ReflectionClass('DateTime'));

Class [  class DateTime ] {

  - Constants [11] {
    Constant [ string ATOM ] { Y-m-d\TH:i:sP }
    Constant [ string COOKIE ] { l, d-M-y H:i:s T }
    Constant [ string ISO8601 ] { Y-m-d\TH:i:sO }
    Constant [ string RFC822 ] { D, d M y H:i:s O }
    Constant [ string RFC850 ] { l, d-M-y H:i:s T }
    Constant [ string RFC1036 ] { D, d M y H:i:s O }
    Constant [ string RFC1123 ] { D, d M Y H:i:s O }
    Constant [ string RFC2822 ] { D, d M Y H:i:s O }
    Constant [ string RFC3339 ] { Y-m-d\TH:i:sP }
    Constant [ string RSS ] { D, d M Y H:i:s O }
    Constant [ string W3C ] { Y-m-d\TH:i:sP }
  }

  - Static properties [0] {
  }

  - Static methods [0] {
  }

  - Properties [0] {
  }

  - Methods [9] {
    Method [  public method __construct ] {
    }

    Method [  public method format ] {
    }

    Method [  public method modify ] {
    }

    Method [  public method getTimezone ] {
    }

    Method [  public method setTimezone ] {
    }

    Method [  public method getOffset ] {
    }

    Method [  public method setTime ] {
    }

    Method [  public method setDate ] {
    }

    Method [  public method setISODate ] {
    }
  }
} 
```

不完美，因为没有论据，但至少是一个起点。他们应该让这更容易被发现，我同意！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T07:49:36.953

[http://no2.php.net/date_create](http://no2.php.net/date_create)

构造函数信息。评论中关于序列化的一些不错的信息。

[http://laughingmeme.org/2007/02/27/](http://web.archive.org/web/20080210140754/http://laughingmeme.org/2007/02/27/) 不错的教程，可能有点老了。

[http://ditio.net/2008/06/03/php-datetime-and-datetimezone-tutorial/](http://ditio.net/2008/06/03/php-datetime-and-datetimezone-tutorial/) 另一个略有不同的方法教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-08T03:19:03.917

DateTime 类文档可以在[php.net/DateTime](http://php.net/DateTime)找到，它包含关于类和函数的信息，或者只有类文档可以在[php.net/manual/en/class.datetime.php 找到](http://php.net/manual/en/class.datetime.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-25T07:04:38.603

这里有一个 PHP 5.2.0 中的新类列表：

[http://www.php.net/manual/en/migration52.classes.php](http://www.php.net/manual/en/migration52.classes.php)

..这里链接到新的 DateTime 类信息：

[http://www.php.net/manual/en/ref.datetime.php](http://www.php.net/manual/en/ref.datetime.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T07:14:39.443

您提到的 URL [http://www.php.net/manual/en/migration52.classes.php](http://www.php.net/manual/en/ref.datetime.php)根本没有描述该类。当然，在某个地方记录了此类和其他类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T10:54:17.987

可以在文档的注释中找到描述：

[http://php.net/manual/fr/book.datetime.php#84699](http://php.net/manual/fr/book.datetime.php#84699)

编辑：今天早上我发现了一些有趣的东西：

[http://laughingmeme.org/2007/02/27/looking-at-php5s-datetime-and-datetimezone/](http://laughingmeme.org/2007/02/27/looking-at-php5s-datetime-and-datetimezone/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-09-15T00:55:50.647

这些东西记录在文档中——也许不是你要求的时候。

无论如何，通过扩展的作者，您可以阅读以获取完整的详细信息： http: [//derickrethans.nl/phparchitects-guide-to-date-and-time-programming.html](http://derickrethans.nl/phparchitects-guide-to-date-and-time-programming.html)

接下来，Derick Rethans 正在到处就该主题进行演讲，并提供幻灯片。如果您有机会参加会议并聆听他的演讲，那就去做吧。

最近的一个：

FrOsCon，2010 年 8 月 22 日：xxxx://derickrethans.nl/talks/time-froscon10.pdf（来源：xxxx://derickrethans.nl/talks.html）

# .net - 如何对缺少的 .NET ConfigurationSection 进行单元测试

> ID：316532
> 
> 赞同：1
> 
> 时间：2008-11-25T06:54:07.190
> 
> 标签：.net, unit-testing, configuration

如果我有这样的代码：

```
 public XALServiceConfiguration CreateInstance()
        {
            var config = ConfigurationManager.GetSection(ConfigurationSectionName) as XALServiceConfiguration;
            if (config == null)
                throw new ConfigurationErrorsException("Configuration element 'xalService' was not found or is not of correct type.");
            return config;
        } 
```

如果配置文件中缺少该部分，我如何测试是否引发了异常？对于其他测试，配置部分需要在配置文件中，所以我实际上无法从文件中删除它。

我正在使用 Visual Studio 2008 单元测试框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T07:27:37.450

我认为到目前为止的其他答案都错过了您的问题的重点，即如何*引发*异常。

使用这样的静态技术，你真的不能轻易做到——你必须有一种方法将特定的配置注入到你的测试中。我似乎记得.NET 配置管理并不是特别适合这个，但我认为它*可以*做到。我现在没有简单的 MSDN 访问，但尝试找到某种方法来加载配置*实例*，而不是仅使用静态方法访问它。我可能是错的 - 可能没有办法做到这一点。

不要太担心 100% 的覆盖率 - 不幸的是，有时只是无法测试的条件:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T07:54:06.523

您可以在单独的应用程序域中运行测试用例。为此，您可以指定要使用的配置文件，甚至可以将配置文件指定为“字节”（请参阅[​​ AppDomainSetup Structure](http://msdn.microsoft.com/en-us/library/system.appdomainsetup_members.aspx)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T07:05:05.280

只是为了让 Slace 的回答更清楚一点，它看起来像这样：

```
try {
  XALServiceConfiguration config = CreateInstance();
} catch (ConfigurationErrorsException cee) {
  Assert.Fail("Could not create XALServiceConfiguration: " + e.Message);
} 
```

这不是很好（因为您没有明确测试 null 情况。如果您想进入该步骤，您可能必须创建自己的配置加载器，然后针对具有已知缺失部分的不同配置进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-25T06:57:54.657

您可以在`try catch`语句中捕获异常并`Assert`在捕获中执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T07:43:00.317

这是测试配置部分的一个很好的实现 [http://www.codeproject.com/Articles/71843/Unit-Testing-your-App-config-and-ConfigurationSect](http://www.codeproject.com/Articles/71843/Unit-Testing-your-App-config-and-ConfigurationSect)

# c# - C# 中的 XML 解析

> ID：316540
> 
> 赞同：1
> 
> 时间：2008-11-25T06:58:21.410
> 
> 标签：c#, xml

我想使用 C# 将新节点添加为 XML 中旧节点的父节点。例如节点有以下 XML 文件：

```
<bookstore>
   <books>
      <author>
      </author>
   </books> 
</bookstore> 
```

就像现在我想添加新的如下：

```
<bookstore>
 <newnode>
   <books>
      <author>
      </author>
   </books> 
 </newnode>
</bookstore> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T08:33:25.523

尝试这个：-

```
XmlDocument doc = new XmlDocument();
doc.Load("BookStore.xml");
XmlElement newNode = doc.CreateElement("newnode");
doc.DocumentElement.AppendChild(newNode);
newNode.AppendChild(doc.SelectSingleNode("/bookstore/books"));
doc.Save("BookStore.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T08:30:27.853

您可以克隆旧节点，追加克隆，然后删除原始节点：

（编辑；我忘记了[AppendChild](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.appendchild.aspx)将移动节点，如果它已经存在......无需克隆和删除......）

```
XmlDocument doc = new XmlDocument();
// load the current xml
doc.LoadXml(xml);
// create a new "newnode" node and add it into the tree
XmlElement newnode = (XmlElement) doc.DocumentElement.AppendChild(doc.CreateElement("newnode"));
// locate the original "books" node and move it
newnode.AppendChild(doc.SelectSingleNode("/bookstore/books"));
// show the result
Console.WriteLine(doc.OuterXml); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T07:12:18.480

这里没有 VS，所以无法确认这是否有效，但类似这样：

```
XmlDocument xd = new XmlDocument();
xd.Load("oldxmlfile.xml");
XmlNode oldNode = xd["nameOfRootNode"];
xd.RemoveAll();
XmlNode newParent = xd.CreateNode("nodename");
newParent.AppendChild(oldNode);
xd.AppendChild(newParent);
xd.Save("newXmlFile.xml"); 
```

# c# - 在 C# 中过滤 TCP 数据包

> ID：316546
> 
> 赞同：1
> 
> 时间：2008-11-25T07:02:39.107
> 
> 标签：c#, tcp

我正在编写一个应用程序，所有对互联网的请求都应该像防火墙一样从它发出。这样我就可以阻止对特定网站的请求。在我的情况下，程序将在同一台机器上运行。我尝试过混杂方法，但使用它我们只能捕获所有进出机器的数据包，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T08:35:22.260

最简单的方法可能是编写[Layered Service Provider (LSP)](http://www.microsoft.com/msj/0599/LayeredService/LayeredService.aspx)。Microsoft SDK 中也有一个关于开发 LSP 的示例。不如驱动型防火墙设置安全，但更容易实现。

“可能”有一种方法可以用 C# 做到这一点，但我从未尝试过。有什么要调查的。如果不是，那么只需使用实现 LSP 的 C/C++ 创建一个本机 DLL，然后让它与您的应用程序通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T07:04:48.090

您必须将代码插入 TCP/IP 堆栈中，如果我理解正确，这需要 Windows 驱动程序。

C# 无法编译本地 Windows 驱动程序，因此您需要使用库或 DLL 来实现至少部分功能。寻找使用 C++ 的解决方案。

-亚当

# asp.net - 系统事务 .net 从会话中删除异常

> ID：316548
> 
> 赞同：0
> 
> 时间：2008-11-25T07:03:29.073
> 
> 标签：asp.net, system, transactions

我是 asp.net 的新手。我正在开发一个正在执行系统事务的应用程序。在代码中的某个时刻，会引发异常并且代码会爆炸。单击网格列表中的特定行记录时，它会爆炸。然而，在用户看到异常之后......他们返回并尝试单击其他一些记录......这应该可以工作......他们再次看到相同的异常，这不是第二次引起的，但仍然出现，因为它出现了第一次。如果用户注销......重新登录并点击第二行......这应该不会有任何问题，这会自行解决。

这是否与用户返回网格列表页面时未从会话中清除的异常有关..在他们看到异常错误页面之后..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T07:24:12.607

通常在事务中的一项操作失败后，应中止并重新启动事务。这使您可以回到“干净”状态。

# macos - DHCP Setting in Mac OS X

> ID：316574
> 
> 赞同：6
> 
> 时间：2008-11-25T07:26:44.723
> 
> 标签：macos, command-line, dhcp

Are there any command line interfaces to the DHCP settings in Mac OS X? I have found that inside System Profiler, the Network tab provides a lot of useful information, but I have not found any documentation about any command line equivalents.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-25T07:41:21.183

You may use

```
networksetup -listallnetworkservices
networksetup -getinfo <networkservice>
networksetup -setdhcp <networkservice> [clientid] 
```

networkservice is something like Ethernet (all availabe listed by the first command)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-29T07:14:24.357

You can also use:

```
ipconfig getpacket `interface` 
```

where interface would be `en0, en1` etc.

ie:

```
ipconfig getpacket en1
op = BOOTREPLY
htype = 1
flags = 0
hlen = 6
hops = 0
xid = 215448168
secs = 3
ciaddr = 0.0.0.0
yiaddr = 192.168.15.121
siaddr = 0.0.0.0
giaddr = 0.0.0.0
chaddr = 0:19:e3:6:70:95
sname = 
file = 
options:
Options count is 8
dhcp_message_type (uint8): ACK 0x5
server_identifier (ip): 192.168.15.1
lease_time (uint32): 0xa8c0
subnet_mask (ip): 255.255.255.0
router (ip_mult): {192.168.15.1}
domain_name_server (ip_mult): {192.168.15.249, 192.168.15.240}
domain_name (string): domain.com
end (none): 
```

You can also do:

```
ipconfig getoption en0 optionname 
```

ie: `ipconfig getoption en1 router`

```
192.168.15.1 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-11-25T07:40:46.050

You should look at:

```
ifconfig(8)
netstat(1)
netintro(4) 
```

The most important of these (netintro isn't actually a utility but rather introductory information on unix networking) is ifconfig which is the command line tool used to configure the various network interfaces you may have installed on your machine (like your ethernet card and your airport card) as well as any virtual interfaces (like your loopback address and things like parallels).

# iphone - 如何将数据发布到 iphone 应用程序中的站点数据库？

> ID：316577
> 
> 赞同：-1
> 
> 时间：2008-11-25T07:27:32.897
> 
> 标签：iphone, database

我想创建一个能够将数据发布到使用 MySQL 的网站数据库的 iphone 应用程序。任何人都可以提供一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-13T13:05:14.833

您需要使用 NSURLConnection 和 NSURLRequest 将数据发送到服务器。

# windows - 优化将 30,000 行文本打印到文件中的批处理文件

> ID：316581
> 
> 赞同：0
> 
> 时间：2008-11-25T07:30:07.883
> 
> 标签：windows, batch-file

我有一个执行此操作的批处理文件。

ECHO A41,35,0,a,1,1,N,"ZACHARY KAPLAN 先生">> test.txt

大约有 30k 条类似的行。运行批处理文件大约需要 5 个小时。

有没有办法加快这个速度？

/让尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T08:26:01.437

尝试这个：

`ECHO OFF`在批处理文件的顶部放置一个。

然后将每一行更改为：

```
ECHO A41,35,0,a,1,1,N,"Mr ZACHARY KAPLAN" 
```

并调用您的批处理文件：

mybatch.bat >> test.txt

编辑第一行以删除打印输出的回声。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-11-15T13:50:01.943

如果你这样做，它会更快：

```
JAM DO %%Fo CAt Pa (set /p %yodo%=jol)

RUn 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T07:36:02.440

编写自定义脚本或程序打开文件 test.txt 一次，一次性将所有数据写入其中。

现在每一行都由命令解释器单独执行，每次打开和关闭文件。

即使是一个小的 qbasic 程序也应该能够比您当前的方法更快地去除 echo 和 >> 之间的数据并将其写入文本文件。

-亚当

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T07:56:20.823

您可以使用脚本语言用一个小的正则表达式去除前导 ECHO 和尾随 >> test.txt

这是python中的一个例子：

```
>>> import re
>>> text = 'ECHO A41,35,0,a,1,1,N,"Mr ZACHARY KAPLAN">> test.txt'
>>> re.sub( r"ECHO\s*(.*?)>>\s*test.txt", r"\1", text )
'A41,35,0,a,1,1,N,"Mr ZACHARY KAPLAN"' 
```

对文件中的所有行执行此操作：

```
import re
f = open("input.bat")
of = open("output.txt", "w" )
for line in f:
    of.write( re.sub( r"ECHO\s*(.*?)>>\s*test.txt", r"\1", line ) ) 
```

我没有测试这段代码...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T07:42:25.737

这是一个使用 Java 程序的示例 - 使用 BufferedReader/PrintWriter

[http://www.javafaq.nu/java-example-code-126.html](http://www.javafaq.nu/java-example-code-126.html)

您还可以使用 BufferedReader 和 BufferedWriter

[http://java.sun.com/docs/books/tutorial/essential/io/buffers.html](http://java.sun.com/docs/books/tutorial/essential/io/buffers.html)

[http://leepoint.net/notes-java/io/10file/10readfile.html](http://leepoint.net/notes-java/io/10file/10readfile.html)

# c# - 您如何等待同一 Console.WriteLine() 行上的输入？

> ID：316582
> 
> 赞同：48
> 
> 时间：2008-11-25T07:30:10.003
> 
> 标签：c#

我想提出一个问题，例如：

> 你叫什么名字？乔

我将如何使用`Console.WriteLine`也等待同一行上的响应而不是将其分解为：

> 你叫什么名字？
> 
> 乔

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2008-11-25T07:31:29.563

改用[`Console.Write`](https://docs.microsoft.com/en-us/dotnet/api/system.console.write?view=net-5.0)，所以没有写换行符：

```
Console.Write("What is your name? ");
var name = Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-11-25T07:35:27.653

正如马特所说，使用`Console.Write`. 但是，我还建议显式刷新输出 - 我相信`WriteLine`这是自动执行的，但我在使用`Console.Write`然后等待时看到了奇怪的东西。所以马特的代码变成了：

```
Console.Write("What is your name? ");
Console.Out.Flush();
var name = Console.ReadLine(); 
```

# apache2 - 没有 TLD 的子域

> ID：316586
> 
> 赞同：0
> 
> 时间：2008-11-25T07:33:58.157
> 
> 标签：apache2, subdomain

如何设置不带 oa TLD 的子域？我在我的主要配置下有这个设置

```
<VirtualHost *:80>
    ServerName bbs.67.777.777.777 #fake bc my server can easily be hacked ATM :(
    DocumentRoot /var/www/phpBB
</VirtualHost> 
```

当我转到 bbs.serveripaddress 时，我收到地址未找到错误。如果我把它放在我的主要配置上面它仍然不起作用但是整个站点指向 /var/www/phpBB 而不是 /var/www （嗯！？！）

主v主机是

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www/
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
        # This directive allows us to have apache2's default start page
                # in /apache2-default/, but still have / go to the right place
                RedirectMatch ^/$ /apache2-default/
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog /var/log/apache2/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined
    ServerSignature On

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

如果有帮助，我正在使用 apache2 的 debian 机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T07:39:23.403

我认为服务器名称 (bbs.67.777.777.777 ) 不会带您到任何地方 - 除非您将它添加到主机文件中...您可以 ping 该地址好吗？

为什么不将您的网站设为默认值...如果您不需要默认值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T18:45:11.997

您不能拥有带有 IP 地址的子域。解决此问题的最佳方法是让域或免费子域（例如 no-ip）指向您的 IP 地址并为此创建一个 ServerName。请记住将域添加到您的服务器 DNS 区域。

或在您的主机文件中创建一个域并使用它。

# linux - 如何计算包括子目录在内的代码行数

> ID：316590
> 
> 赞同：90
> 
> 时间：2008-11-25T07:36:06.217
> 
> 标签：linux, bash, unix, wc

假设我想计算项目中的代码行数。如果所有文件都在同一个目录中，我可以执行：

```
cat * | wc -l 
```

但是，如果有子目录，这是行不通的。为此， cat 必须具有递归模式。我怀疑这可能是 xargs 的工作，但我想知道是否有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2008-11-25T07:47:11.140

首先，您不需要使用`cat`来计算行数。这是一种[称为无用使用 Cat](http://en.wikipedia.org/wiki/Cat_(Unix)#Useless_use_of_cat) (UUoC) 的反模式。要计算当前目录中文件的行数，请使用[`wc`](https://en.wikipedia.org/wiki/Wc_(Unix))：

```
wc -l * 
```

然后该`find`命令递归子目录：

```
find . -name "*.c" -exec wc -l {} \; 
```

*   `.`是开始搜索的顶级目录的名称

*   `-name "*.c"`是您感兴趣的文件的模式

*   `-exec`给出要执行的命令

*   `{}`是要传递给命令的 find 命令的结果（这里`wc-l`）

*   `\;`表示命令结束

此命令生成找到的所有文件及其行数的列表，如果您想获得**所有**找到的文件的总和，您可以使用 find 列出文件（使用`-print`选项），然后使用 xargs 将此列表作为参数传递到 wc-l。

```
find . -name "*.c" -print | xargs wc -l 
```

编辑以解决 Robert Gamble 评论（谢谢）：如果文件名中有空格或换行符（！），那么您必须使用`-print0`选项而不是`-print`and`xargs -null`以便文件名列表与以空字符结尾的字符串交换。

```
find . -name "*.c" -print0 | xargs -0 wc -l 
```

Unix 的哲学是拥有只做一件事的工具，并且把它做好。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-11-25T08:02:20.283

如果你想要一个代码高尔夫的答案：

```
grep '' -R . | wc -l 
```

单独使用 wc -l 的问题是它不能很好地下降，并且使用的 oneliners

```
find . -exec wc -l {} \; 
```

不会给你一个总行数，因为它为每个文件运行一次 wc，（大声笑！）和

```
find . -exec wc -l {} + 
```

一旦 find 达到参数的 ~200k [¹](https://stackoverflow.com/questions/5772156/linux-command-xargs-maximum-size-of-the-arguments-passed-by-it) ^, [^(2 个)](http://www.in-ulm.de/~mascheck/various/argmax/) 字符参数限制，而是多次调用 wc *，*每次只给你一个部分摘要，就会感到困惑。

此外，当遇到二进制文件时，上述 grep 技巧不会在输出中添加超过 1 行，这可能是有益的。

对于 1 个额外命令字符的成本，您可以完全忽略二进制文件：

```
 grep '' -IR . | wc -l 
```

如果您也想对二进制文件运行行数

```
 grep '' -aR . | wc -l 
```

限制脚注：

*文档对于它是字符串*大小限制还是*令牌数量*限制有点含糊。

```
cd /usr/include;
find -type f -exec perl -e 'printf qq[%s => %s\n], scalar @ARGV, length join q[ ], @ARGV' {} + 
# 4066 => 130974
# 3399 => 130955
# 3155 => 130978
# 2762 => 130991
# 3923 => 130959
# 3642 => 130989
# 4145 => 130993
# 4382 => 130989
# 4406 => 130973
# 4190 => 131000
# 4603 => 130988
# 3060 => 95435 
```

这意味着它很容易分块。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-11-25T07:42:29.527

我想你可能被 xargs 困住了

```
find -name '*php' | xargs cat | wc -l 
```

[chromakode](https://stackoverflow.com/users/40508/chromakode)的方法给出了相同的结果，但速度要慢得多。如果您使用 xargs 您的*cat* ing 和*wc* ing 可以在*find*开始查找时立即开始。

Linux上的好解释[：xargs vs. exec {}](http://dmiessler.com/blog/linux-xargs-vs-exec)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-11-25T07:41:51.243

尝试使用`find`默认递归目录的命令：

`find . -type f -execdir cat {} \; | wc -l`

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-11-25T08:02:25.273

正确的方法是：

```
find . -name "*.c" -print0 | xargs -0 cat | wc -l 
```

您必须使用 -print0，因为 Unix 文件名中只有两个无效字符：空字节和“/”（斜杠）。因此，例如“xxx\npasswd”是一个有效的名称。但实际上，您更有可能遇到其中包含空格的名称。上面的命令会将每个单词计为一个单独的文件。

您可能还想使用“-type f”而不是-name 来限制对文件的搜索。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-06-09T06:07:42.480

如果您可以使用相对较新的 GNU 工具，包括 Bash，则在上述解决方案中使用 cat 或 grep 是一种浪费：

```
wc -l --files0-from=<(find .-name \*.c -print0)

```

这处理带有空格、任意递归和任意数量的匹配文件的文件名，即使它们超过了命令行长度限制。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-28T11:10:07.990

我喜欢在项目目录中的所有文件上使用**find**和**head**来“递归猫”，例如：

```
find . -name "*rb" -print0 | xargs -0 head -10000 
```

**优点是 head 会添加你的文件名和路径：**

```
==> ./recipes/default.rb <==
DOWNLOAD_DIR = '/tmp/downloads'
MYSQL_DOWNLOAD_URL = 'http://cdn.mysql.com/Downloads/MySQL-5.6/mysql-5.6.10-debian6.0-x86_64.deb'
MYSQL_DOWNLOAD_FILE = "#{DOWNLOAD_DIR}/mysql-5.6.10-debian6.0-x86_64.deb"

package "mysql-server-5.5"
...

==> ./templates/default/my.cnf.erb <==
#
# The MySQL database server configuration file.
#
...

==> ./templates/default/mysql56.sh.erb <==
PATH=/opt/mysql/server-5.6/bin:$PATH 
```

有关此处的完整示例，请参阅我的博客文章：

[http://haildata.net/2013/04/using-cat-recursively-with-nicely-formatted-output-include-headers/](http://haildata.net/2013/04/using-cat-recursively-with-nicely-formatted-output-including-headers/)

注意我使用了'head -10000'，显然如果我有超过 10,000 行的文件，这将截断输出......但是我可以使用 head 100000 但对于“非正式项目/目录浏览”，这种方法对我来说非常有效。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-08-23T09:58:08.227

```
wc -cl `find . -name "*.php" -type f` 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-04-10T16:42:03.043

如果您只想生成总行数而不是每个文件的行数，例如：

```
find . -type f -exec wc -l {} \; | awk '{total += $1} END{print total}' 
```

效果很好。这使您无需在脚本中进行进一步的文本过滤。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-31T23:58:48.600

这是一个计算项目中代码行数的 Bash 脚本。它递归地遍历源代码树，并排除使用“//”的空行和单行注释。

```
# $excluded is a regex for paths to exclude from line counting
excluded="spec\|node_modules\|README\|lib\|docs\|csv\|XLS\|json\|png"

countLines(){
  # $total is the total lines of code counted
  total=0
  # -mindepth exclues the current directory (".")
  for file in `find . -mindepth 1 -name "*.*" |grep -v "$excluded"`; do
    # First sed: only count lines of code that are not commented with //
    # Second sed: don't count blank lines
    # $numLines is the lines of code
    numLines=`cat $file | sed '/\/\//d' | sed '/^\s*$/d' | wc -l`
    total=$(($total + $numLines))
    echo "  " $numLines $file
  done
  echo "  " $total in total
}

echo Source code files:
countLines
echo Unit tests:
cd spec
countLines 
```

这是[我的项目](https://github.com/curran/phd/tree/f1ab3319a27c2bd3283df3402e568ce69be670de/prototype)的输出：

```
Source code files:
   2 ./buildDocs.sh
   24 ./countLines.sh
   15 ./css/dashboard.css
   53 ./data/un_population/provenance/preprocess.js
   19 ./index.html
   5 ./server/server.js
   2 ./server/startServer.sh
   24 ./SpecRunner.html
   34 ./src/computeLayout.js
   60 ./src/configDiff.js
   18 ./src/dashboardMirror.js
   37 ./src/dashboardScaffold.js
   14 ./src/data.js
   68 ./src/dummyVis.js
   27 ./src/layout.js
   28 ./src/links.js
   5 ./src/main.js
   52 ./src/processActions.js
   86 ./src/timeline.js
   73 ./src/udc.js
   18 ./src/wire.js
   664 in total
Unit tests:
   230 ./ComputeLayoutSpec.js
   134 ./ConfigDiffSpec.js
   134 ./ProcessActionsSpec.js
   84 ./UDCSpec.js
   149 ./WireSpec.js
   731 in total 
```

享受！——[柯伦](https://github.com/curran/portfolio)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-27T13:02:05.043

```
find . -name "*.h" -print | xargs wc -l 
```

# database - 如何根据“相似性”匹配标记项目

> ID：316592
> 
> 赞同：1
> 
> 时间：2008-11-25T07:37:17.040
> 
> 标签：database, tagging, nearest-neighbor, trigonometry

我有一个真正的问题。

我有一个架构如下的数据库：

**物品**

*   ID
*   描述
*   其他垃圾

**标签**

*   ID
*   姓名

**item2tag**

*   item_id
*   tag_id
*   数数

基本上，每个项目最多被标记为 10 件事情，数量不等。items2tag中有50,000个项目和50,000个标签，大约有500,000个条目。给定一个项目，我想找到“最相似”的项目。

“最相似”是指具有最相似标签组合的项目......如果某件事“酷”是“有趣”的两倍，我想找到所有其他几乎“酷”的东西两次就像他们“有趣”一样。当然，这应该适用于 10 个标签，而不仅仅是 2 个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T07:40:56.037

好吧，您可以查看线性代数为每个项目提供一个维度向量，然后计算项目之间的距离以找到最接近的项目，但即使是小型数据集，这也相当复杂。

这就是 Google 提出 Map Reduce 的原因。这可能是你最好的选择，但即便如此，它也不是微不足道的。

-亚当

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T12:02:32.263

鉴于您将项目标签关系表示为向量，您所拥有的是[最近邻搜索](http://en.wikipedia.org/wiki/Nearest_neighbor_search)的一个实例。[您可以在Collaborative Filtering](http://en.wikipedia.org/wiki/Collaborative_filtering)领域找到指针。

# xml - 从脚本调整 XML 配置文件

> ID：316600
> 
> 赞同：0
> 
> 时间：2008-11-25T07:41:20.590
> 
> 标签：xml, configuration, scripting

我正在自动化配置几个 JBoss 服务器，这涉及到编辑大量 XML 文件。

我想尽可能多地编写所有这些更改的脚本。但是“标准”工具（sed、grep 等）不适用于 XML。不必求助于更高级的语言，我如何编写脚本，例如在某个文件中的给定 XML 元素之后插入给定的 XML 剪辑器？

例如说我的 jboss-log4j.xml 看起来像

```
<!-- ====================== -->
<!-- More Appender examples -->
<!-- ====================== -->

<!-- Buffer events and log them asynchronously -->
<appender name="ASYNC" class="org.apache.log4j.AsyncAppender">
  <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
  <appender-ref ref="FILE"/>
  <!--
  <appender-ref ref="CONSOLE"/>
  <appender-ref ref="SMTP"/>
  -->
</appender> 
```

并且我想添加一个新的 appender-ref 元素。从脚本中做到这一点的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-18T18:17:15.113

您会在我[之前](https://stackoverflow.com/questions/91791/grep-and-sed-equivalent-for-xml-command-line-processing "XML 的 Grep 和 Sed 等效项")的问题中找到更多答案。[xmlstar](http://xmlstar.sourceforge.net/ "XMLStarlet 工具合集")似乎是最受欢迎的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T07:54:39.097

通常，我会通过编写 XSL 样式表并从脚本调用[SAXON来做到这一点。](http://saxon.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T09:40:56.107

NAnt 是 Ant 的 .NET 表亲，具有[XmlPeek](http://nant.sourceforge.net/release/latest/help/tasks/xmlpeek.html)和[XmlPoke](http://nant.sourceforge.net/release/latest/help/tasks/xmlpoke.html)任务，我在编辑非常复杂的 WCF 配置文件时效果非常好。如果您可以为 Ant 找到类似的任务，那么您可能会有赢家。

或者，另一种方法可能是使用包含 %placeholders% 的配置文件的“模板”版本，适合替换为更经典的文本处理工具之一。

一个想法 - Ant 有一个[过滤器链](http://ant.apache.org/manual/Types/filterchain.html)的想法，它可以用来在复制时转换文件 - NAnt 具有相同的概念，我最近使用它来很好地配置部署文件。

# jsf - 为什么 WebBeans (JSR-299) 对话上下文与 JSF 相关联？

> ID：316609
> 
> 赞同：1
> 
> 时间：2008-11-25T07:44:49.133
> 
> 标签：jsf, seam, jsr299

我正在阅读[Web Beans 规范](http://docs.jboss.org/webbeans/spec/PDR/html/)(JSR-299) 的公共审查草案，我想知道为什么它与 JSF 如此“紧密耦合”？

特别是对话上下文似乎只为 JSF 指定。

我理解，集成 JSF 和 EJB3 是 WebBeans 的目标。但是在更一般的层面上指定对话的概念是否没有意义（可能是一般的 Servlet 而不是特定的 Web 框架）？

这有什么技术原因吗？我认为这几乎不可能，因为 Seam（它是某种 WebBeans-Prototype）也支持 Wicket 并提供对话的概念。

我认为在 Servlet 级别上有一个对话范围会很有帮助（将对话范围的 bean 注入到 servlet 中）。据我了解，当前规范并非如此（参见第 8.5.4 章）。还是我在这里误解了某些东西...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T14:39:25.187

我认为这完全取决于 Gavin King 选择 JSF 作为 Seam 的视图技术，而他作为规范负责人推动了 JSR。

显然，对话范围更广——例如，Spring 自定义范围具有提供对话的功能：

[http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/Scope.html](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/Scope.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-16T13:41:21.420

今天才发现这个。ConversationScope 基于 JSF 的原因仅仅是因为 JSF 是Java EE*的*标准 UI 框架！

除此之外，大多数 JSR-299 容器还可以为其他 UI 技术（例如 Wicket）提供对话。

您可以轻松地创建自己的 Scopes，甚至是便携的。

LieGrue，斯特鲁布

# java - Java 中的 MP3 编码

> ID：316612
> 
> 赞同：10
> 
> 时间：2008-11-25T07:45:38.537
> 
> 标签：java, api, encoding, mp3

我需要一个 Java 中的 OpenSource API，它可以将 *.wav 和 *.au 格式编码为 MP3，反之亦然。

我已经评估了 Java Sound API 和[LameOnJ](http://openinnowhere.sourceforge.net/lameonj)，但它们分别不符合我的要求并且不稳定。请推荐一个免费且独立于平台的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-25T13:57:25.573

您可能还没有足够的答案，因为 MP3 格式要求解码器/编码器的作者从弗劳恩霍夫研究所获得许可。

我认为 LAME 库是从一个不尊重这些 IP 问题的国家分发的，但要做到这一点需要大量的合法黑客攻击。

对于任何其他库 - 例如用 Java 编写的库，作者需要获得类似的许可证。如果成本是一个问题——例如在一个开源项目中，那么这足以抑制开始。

有关更多详细信息，请参阅此[维基百科文章](http://en.wikipedia.org/wiki/MP3#Licensing_and_patent_issues)。

如果 LAME4J 对您来说不够稳定，那么恐怕您的选择可能是：

*   等待 Sun 许可核心 JRE 的格式。这个，我相信他们最近已经完成了，但我不知道任何发布日期（可能与 JavaFX 有关）
*   用Java实现你自己的，并支付许可证。我也不会喜欢这个。
*   通过 JNA 或 SWIG 将您自己的 Java 包装器编写到 LAME
*   为 Lame4J 做出贡献。
*   选择另一种格式。OGG 和 FLAC 都很好，支持也比较好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-07-31T07:41:42.050

已经有一段时间了，但是 Oracle/Sun 已经发布了对 JMF 的 MP3 支持。这可以从以下网址下载： [http ://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html)

将其添加到类路径将启用通过 AudioSystem api 播放。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-02-28T14:20:48.313

LAME4J 使用免费但有时间限制的许可证，无限制的许可证会花费你一些钱。

我在 SourceForge 上找到了[Lamejb 库](http://sourceforge.net/projects/lamejb/)，它只需要 lame 二进制文件，无需任何额外许可即可正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T08:07:52.503

使用[Process API](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Process.html)调用[SoX](http://sox.sourceforge.net/)

SoX 带有源代码或作为 Windows 和 Mac 的预编译二进制文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-05-22T17:09:57.267

如果您正在搜索纯 Java 版本的 lame，请查看以下来源：http: [//jsidplay2.cvs.sourceforge.net/viewvc/jsidplay2/jump3r/](http://jsidplay2.cvs.sourceforge.net/viewvc/jsidplay2/jump3r/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-10T06:14:23.690

[Jave2 项目](https://github.com/a-schild/jave2)是封装了 FFMPEG的Java 库，并通过一个相当有用的 Java API提供了它的大部分功能^。

优点：

*   功能强大且相当简单的有用 Java API。
*   FFMPEG 二进制文件捆绑在其中，因此您不必管理系统上的 FFMPEG 安装。

缺点：

*   不支持流数据：您必须处理临时文件：每次转换都首先将所有内容存储在系统上的某些文件中，让 FFMPEG 为您创建新文件，然后读取它们。这不是 FFMPEG 的缺陷，更多的是 Java 中的一个问题，在该问题中很难将数据流式传输到外部进程^(**)。

*) 特别是围绕格式转换 - 过滤器功能大多没有表示。

**) 在 Java 中，启动一个进程并连接到它的标准输出和输入是可能的，但不是很舒服，并且使用命名管道（用于将 AV 与 FFMPEG 进行管道传输的 BKM）几乎是不可能的，即使你确实设法做到了那个，Jave2 不能很好地处理它。我有一套工具来解决这些问题，基于 JNA，如果有人感兴趣的话 - 我可以分享。

# c++ - 如何从 Visual C++ 中的版本资源中读取

> ID：316626
> 
> 赞同：34
> 
> 时间：2008-11-25T07:54:00.113
> 
> 标签：c++, visual-c++, resources, version

我在 C++ 项目的资源中有一个版本资源，其中包含版本号、版权和构建详细信息。有没有一种简单的方法可以在运行时访问它以填充我的*帮助/关于*对话框，因为我目前正在维护此信息的单独 const 值。理想情况下，该解决方案应该适用于 Windows/CE 移动版和早期版本的 Visual C++（6.0 以上）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-07-23T21:48:01.903

这是我原始答案的编辑版本。

```
bool GetProductAndVersion(CStringA & strProductName, CStringA & strProductVersion)
{
    // get the filename of the executable containing the version resource
    TCHAR szFilename[MAX_PATH + 1] = {0};
    if (GetModuleFileName(NULL, szFilename, MAX_PATH) == 0)
    {
        TRACE("GetModuleFileName failed with error %d\n", GetLastError());
        return false;
    }

    // allocate a block of memory for the version info
    DWORD dummy;
    DWORD dwSize = GetFileVersionInfoSize(szFilename, &dummy);
    if (dwSize == 0)
    {
        TRACE("GetFileVersionInfoSize failed with error %d\n", GetLastError());
        return false;
    }
    std::vector<BYTE> data(dwSize);

    // load the version info
    if (!GetFileVersionInfo(szFilename, NULL, dwSize, &data[0]))
    {
        TRACE("GetFileVersionInfo failed with error %d\n", GetLastError());
        return false;
    }

    // get the name and version strings
    LPVOID pvProductName = NULL;
    unsigned int iProductNameLen = 0;
    LPVOID pvProductVersion = NULL;
    unsigned int iProductVersionLen = 0;

    // replace "040904e4" with the language ID of your resources
    if (!VerQueryValue(&data[0], _T("\\StringFileInfo\\040904e4\\ProductName"), &pvProductName, &iProductNameLen) ||
        !VerQueryValue(&data[0], _T("\\StringFileInfo\\040904e4\\ProductVersion"), &pvProductVersion, &iProductVersionLen))
    {
        TRACE("Can't obtain ProductName and ProductVersion from resources\n");
        return false;
    }

    strProductName.SetString((LPCSTR)pvProductName, iProductNameLen);
    strProductVersion.SetString((LPCSTR)pvProductVersion, iProductVersionLen);

    return true;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2011-03-07T16:39:23.823

要获得 Mark 的答案更改的语言独立结果：

```
 // replace "040904e4" with the language ID of your resources
    !VerQueryValue(&data[0], _T("\\StringFileInfo\\040904e4\\ProductVersion"), &pvProductVersion, &iProductVersionLen))
{
    TRACE("Can't obtain ProductName and ProductVersion from resources\n");
    return false;
} 
```

到

```
UINT                uiVerLen = 0;
VS_FIXEDFILEINFO*   pFixedInfo = 0;     // pointer to fixed file info structure
// get the fixed file info (language-independent) 
if(VerQueryValue(&data[0], TEXT("\\"), (void**)&pFixedInfo, (UINT *)&uiVerLen) == 0)
{
    return false;
}

 strProductVersion.Format("%u.%u.%u.%u", 
    HIWORD (pFixedInfo->dwProductVersionMS),
    LOWORD (pFixedInfo->dwProductVersionMS),
    HIWORD (pFixedInfo->dwProductVersionLS),
    LOWORD (pFixedInfo->dwProductVersionLS)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-25T08:48:49.423

类似的东西可能会让你开始，也许：

```
TCHAR moduleName[MAX_PATH+1];
(void)GetModuleFileName(AfxGetInstanceHandle(), moduleName, MAX_PATH);
DWORD dummyZero;
DWORD versionSize = GetFileVersionInfoSize(moduleName, &dummyZero);
if(versionSize == 0)
{
    return NULL;
}
void* pVersion = malloc(versionSize);
if(pVersion == NULL)
{
    return NULL;
}
if(!GetFileVersionInfo(moduleName, NULL, versionSize, pVersion))
{
    free(pVersion);
    return NULL;
}

UINT length;
VS_FIXEDFILEINFO* pFixInfo;
VERIFY(VerQueryValue(pVersionInfo, const_cast<LPTSTR>("\\"), (LPVOID*)&pFixInfo, &length)); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-11-25T07:57:48.967

像这样的东西会给你对资源数据的原始访问并让你开始：

```
HRSRC res = ::FindResource(NULL, MAKEINTRESOURCE(MY_VERSION_ID), RT_VERSION);
DWORD size = ::SizeofResource(NULL, res);
HGLOBAL mem = ::LoadResource(NULL, res);
LPVOID raw_data = ::LockResource(mem);
...
::FreeResource(mem); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-02-24T13:02:06.067

谨防！使用 FindResource..LockResource 是不正确的。它有时会起作用（就像在我的小演示程序中所做的那样），有时会导致访问冲突（例如：我正在为其制作演示的生产代码）。

VerQueryValue() 文档指出您应该改为调用 GetFileVersionInfoSize 和 GetFileVersionInfo。Raymond Chen 解释，见[http://blogs.msdn.com/oldnewthing/archive/2006/12/26/1365215.aspx](http://blogs.msdn.com/oldnewthing/archive/2006/12/26/1365215.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T08:05:29.263

好的，在 CodeGuru 上进行了更多搜索，发现[以下内容。](http://www.codeguru.com/cpp/w-p/files/fileinformation/article.php/c4481)基本上这种方法使用**CFileVersionInfo**对象来获取任何给定的文件。看看它是否适用于当前运行的 .EXE 文件和 Windows CE 应该很有趣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T16:11:46.137

有时我在使用时收到访问冲突`VerQueryValueA`。但是我在使用时从来没有遇到过这个错误`VerQueryValueW`。我认为`VerQueryValueA`version.dll 有问题。因此，我甚至在项目中使用`VerQueryValueW`多`VerQueryValueA`字节字符编码。[这是我的`ReadVersion`功能代码](http://blog.coolsoftware.ru/2012/08/verqueryvalue-access-violation.html)

# php - PHP 中的 file_exist() 是一项非常昂贵的操作吗？

> ID：316629
> 
> 赞同：17
> 
> 时间：2008-11-25T07:55:52.120
> 
> 标签：php, performance

我正在将头像添加到我正在设计的论坛引擎中，我正在讨论是否做一些简单的事情（论坛图片名为 .png）并在显示文件之前使用 PHP 检查文件是否存在，或者做一些事情稍微复杂一点（但不多）并使用数据库字段来包含要显示的图像的名称。

我更愿意亲自使用 file_exists() 方法，因为如果当前的头像不存在（还），这给了我一种简单的方法来回退到“默认”头像，并且它很容易实现代码明智。但是，我担心性能，因为这将在论坛阅读页面上的每个页面加载显示的每个用户运行一次。所以我想知道，PHP 中的 file_exists() 函数是否会导致任何严重的减速，从而在高流量条件下导致显着的性能下降？

如果没有，那就太好了。如果是这样，您对跟踪用户上传图像的替代方案有何看法？谢谢！

PS：我可以看到的代码差异是文件检查版本让文件可以说话，而数据库表单相信数据库是准确的并且不费心检查。（当然，它只是一个传递给浏览器的 url。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-25T08:50:09.907

正如其他发帖者所说，file_exists() 的结果由 PHP 自动缓存以提高性能。

但是，如果您已经从数据库中读取用户信息，那么您也可以将信息存储在其中。如果只允许用户使用一个头像，您可以在“有头像”（1/0）的列中存储一个位，然后将文件名与用户 ID 相同，并使用类似`SELECT CONCAT(IF(has_avatar, id, 'default'), '.png') AS avatar FROM users`

您还可以考虑将数据库中的实际图像存储为 BLOB。将其放在自己的表中，而不是将其作为列附加到用户表中。这样做的好处是它使您的论坛非常容易备份 - 您只需导出数据库。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-25T08:02:48.423

由于您的 Web 服务器在显示您的网页的过程中已经执行了大量（相当于）file_exists() 操作，因此您的脚本再运行一次可能不会产生可衡量的影响。Web 服务器可能至少会做：

*   一个用于 Web 根目录的每个子目录（检查存在和符号链接）
*   用于检查 Web 根目录的每个子目录的 .htaccess 文件
*   一个为了你的脚本的存在

这并没有考虑 PHP 可能自己做的更多。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-11-25T09:49:22.563

在实际的性能测试中，你会发现 file_exists 非常快。实际上，在 php 中，当相同的 url 被“stat”两次时，第二次调用只是从 php 的内部 stat 缓存中提取。

这只是在 php 运行范围内。即使在运行之间，文件系统/操作系统也会倾向于积极地将文件放入文件系统缓存中，如果文件足够小，不仅文件存在测试会直接耗尽内存，而且整个文件也会。

这里有一些真实的数据来支持我的理论：

我只是在对 linux 命令行实用程序“find”和“xargs”进行一些性能测试。在收益中，我对 13000 个文件进行了文件存在测试，每个文件 100 次，在 30 秒内，所以平均每秒 43,000 次统计测试，所以可以肯定的是，如果你比较它的话，它的速度很慢，时间需要将 9 除以 8 ，但在现实世界的场景中，您需要这样做*很多*次才能看到明显的性能问题。

如果您有 43,000*名*用户同时访问您的页面，在一秒钟内，我认为您将有比复制文件存在状态所需的时间或多或少的时间更大的问题平均情况下的记忆。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T20:33:39.313

至少在 PHP4 中，我发现对 file_exists 的调用肯定会杀死我们的应用程序——它在库中非常重复地深入，所以我们真的不得不使用分析器来找到它。删除调用会使某些页面的计算量增加了十几倍（调用是重复进行的）。

在 PHP5 中它们可能会缓存 file_exists，但至少在 PHP4 中不是这样。

现在，如果您不在循环中，显然 file_exists 不会有什么大不了的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T08:07:05.670

file_exists() 本身并不慢。真正的问题是您的系统是如何配置的以及性能瓶颈在哪里。请记住，数据库也必须将内容存储在磁盘上，因此无论哪种方式，您都可能面临磁盘活动。另一方面，数据库和文件系统通常都有某种形式的透明缓存来优化重复访问。

您可以轻松地采用任何一种方式，因为您的性能瓶颈很可能在其他地方。我认为这是一个明显选择的唯一地方是，如果您在某种超卖共享主机上，那里存在大量磁盘争用，但数据库访问可能在单独的集群上并且速度更快（反之亦然）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T08:27:11.107

过去，我将图像元数据存储在数据库中（包括其名称），以便我们可以生成有用的统计信息。更重要的是，存储图像数据（不是文件本身，只是元数据）有**利于改变**. 如果将来您需要“批准”图像，或者您想在不删除文件的情况下删除它怎么办？

根据“默认”头像...如果找不到该用户的记录，请使用默认头像。

无论哪种方式，file_exists() 或 db，它都不应该是一个值得担心的瓶颈。然而，一种解决方案更具可扩展性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-25T08:59:26.033

如果性能是您唯一的考虑因素，那么 file_exists() 将比数据库查找便宜得多。

毕竟这只是使用系统调用的目录查找。在脚本第一次执行后，大部分相关目录都会被缓存在存储中，因此涉及的实际 I/O 非常少，而且，“file_exists()”是一个非常常见的操作，它和底层系统调用将高度在任何常见的 php/os 组合上进行了优化。

正如约翰二世所说。如果额外的功能和用户界面特性是优先考虑的，那么数据库将是要走的路。

# ajax - 网页上动态更新的图表 - 如何？

> ID：316630
> 
> 赞同：3
> 
> 时间：2008-11-25T07:56:01.903
> 
> 标签：ajax, flash

我需要了解一种设计具有动态更新图形的网页的好方法。它应该类似于股票市场图表的样子（例如[Google Finance](http://finance.google.com/finance?q=NASDAQ%3AGOOG)），尽管具有更复杂的功能，但这不是重点。自然地，我正在考虑编写一个 ajaxy 风格的 flash 控件，它可以通过类似 XMLHttpRequest 之类的东西与服务器通信，但从 flash 代码中，并根据接收到的数据绘制内容。这可以用闪光灯吗？安全模型是否允许这种客户端-服务器交互？如果是的话，你能想出一些让我开始的参考吗（类似的开源项目、文章等等）？还是我应该忘记闪存并立即使用 Java 小程序？

需要注意的重要一点：我认为我不能使用 Google 图表 API，因为我还需要进行用户交互。在上面指向 Google Finance 的链接中，用户可以用鼠标来回拖动图表，这与我需要的很接近（我还需要从下拉菜单中执行一些操作）。

感谢您的回答和意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-25T08:16:40.190

试试这个：[jQuery Flot](http://code.google.com/p/flot/ "jQuery 浮点数")

Flot 是一个用于绘制图形的 JQuery 插件。您继续以所需的频率使用最新数据重新绘制，以生成动态更新的图表。它基于 <canvas> 标记。我们成功地使用它在我们的应用程序中生成非常复杂的动态更新图。通过定期 AJAX 调用获取更新。

另一种选择是[YUI 图表](http://developer.yahoo.com/yui/charts/ "YUI 图表")

我们没有对此进行大量探索，但它使用了 Flash 和 AJAX，就像您想做的那样。

/RS

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T08:05:29.370

我已经使用[Google Charts API](http://code.google.com/apis/chart/)来做这种事情。举个简单的例子，看看我的[日出和日落](http://hewgill.com/sunriseset/)页面。此页面计算给定纬度和经度的日出和日落时间，全部使用 Javascript，然后使用 Google Chart API 将页面上的图表替换为请求的数据。

**更新**：Stack Overflow 信誉图（请参阅您的用户页面）不是 Flash，但允许交互式拖动。（单击并拖动左侧以更新右侧反映突出显示的声誉区域的帖子。）也许您可以看看它是如何实现的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T08:22:23.143

您已经描述了[Flex](http://www.adobe.com/products/flex/) ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-03T10:56:58.447

这在闪存中是非常可能的。您可以使用 URLLoader 类在运行时从服务器获取数据并使用自定义控件绘制图形。在 actionscript3 中，您将继承 Shape 类并编写一些绘图代码来绘制图形。Flash 支持绘图和填充，因此它可能非常擅长这一点。

Flash 客户端可以轮询服务器以获取更新。或者，如果您想要一个“实时”连接，您可以建立与服务器的套接字连接，并让服务器实时推送更新的数据。Flash 对此很有用，因为您可以通过套接字推送 XML 数据并使用内置支持来处理 XML，或者您可以同样轻松地发送二进制数据。

至于安全模型，它只是标准的闪存模型。您可以毫无问题地将网络连接回 swf 文件来自的服务器。如果您想连接到不同的服务器，那么该服务器需要通过托管 crossdomain.xml 文件来授予您的客户端连接到它的权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T08:06:08.903

我不确定 Flash 方面的情况，但这在 Silverlight 中非常简单。我很确定您也可以轻松地在 Flash 中发出服务器请求。

我会做一些搜索长轮询。

# c# - C#：在控制台应用程序中读取参数/参数的适当 C# 方式是什么？

> ID：316632
> 
> 赞同：2
> 
> 时间：2008-11-25T07:56:55.863
> 
> 标签：c#

从命令行读取参数的适当方法是什么？我读过使用字符串 args[] 但我无法掌握如何正确执行此操作的概念。

示例命令：

/animal dog -c 白色 -s 中等

/汽车公民-c绿色-y 1999

什么是适当的阅读方式，

1.  /命令

2.  所有其他字母参数

为了更容易操作？或者有比使用 args 更清洁的方法吗？仍然不确定如何使用 args。

```
 static void Main(string[] args)
    {

        Console.WriteLine("Welcome To The Application");

        Console.Write("Program> "); // Expecting something such as: /animal dog -c brown -s medium
        string sInput = Console.ReadLine();

        // What would be an appropriate method to read 1\. /thecommand then based on the command
        // maybe using switch, expect the arguments like -c brown -s medium or -c green -y 1999
        // and display them into the console?

        // if /animal is detected, display what would be:
        // Console.WriteLine("Animal: dog");
        // Console.WriteLine("Color: brown");
        // Console.WriteLine("Size: medium");

        // if /car is detected, display what would be:
        // Console.WriteLine("Car: civic");
        // Console.WriteLine("Color: green");
        // Console.WriteLine("Year: 1999");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T21:01:05.047

如果您正在寻找一个非常好的命令行解析器，您应该在 CodePlex 上试用命令行解析器库——http: [//www.codeplex.com/commandline](http://www.codeplex.com/commandline)它非常简单，带有单元测试并涵盖了主要用途案例。

另一个选项是 NDesk - [http://www.ndesk.org/Options](http://www.ndesk.org/Options) - 它应该是 Mono 中命令行解析实用程序的继承者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T08:01:36.150

这取决于复杂性。如果你只有几个选项，一个简单的 for/switch 就足够了。如果选项很复杂，您可能需要一个允许您将“-c”映射到“Color”等的类。第二种方法的示例（只是来自 google 的前 2 个；不是具体推荐）在[这里](http://www.codeproject.com/KB/recipes/commandlineparser.aspx)和[这里](http://sourceforge.net/projects/csharpoptparse)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T20:55:36.430

我看到您在控制台应用程序主题范围内发布了许多问题。要回答这个问题以及您可能拥有的任何其他问题，您可能需要查看这个专门用于编写控制台应用程序的库。它包括命令行解析器

[NConsoler](http://nconsoler.csharpus.com/)

# c# - CSV 解析

> ID：316649
> 
> 赞同：4
> 
> 时间：2008-11-25T08:06:54.330
> 
> 标签：c#, parsing, csv

我正在尝试使用 C# 来解析 CSV。`","`如果我的标题计数等于我的匹配计数，我使用正则表达式来查找和读取字符串。

现在，如果我有如下值，这将不起作用：

```
"a",""b","x","y"","c" 
```

那么我的输出是：

```
'a'
'"b'
'x'
'y"'
'c' 
```

但我想要的是：

```
'a'
'"b","x","y"'
'c' 
```

我可以为此使用任何正则表达式或任何其他逻辑吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-25T08:34:19.407

CSV，在处理多行、引用、不同的分隔符*等时 - 可能比你想象的更棘手......也许考虑一个预先滚动的答案？我用[这个](http://www.codeproject.com/KB/database/CsvReader.aspx)，效果很好。

*=请记住，某些语言环境使用 [tab] 作为 CSV 中的 C...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-06T20:35:09.993

CSV 是代码重用的一个很好的例子——无论你选择哪一个 csv 解析器，都不要选择你自己的。 [停止滚动你自己的 CSV 解析器](http://secretgeek.net/csv_trouble.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-25T11:11:19.793

如果我是你，我会使用[FileHelpers 。](http://filehelpers.sourceforge.net/)正则表达式很好，但很难阅读，特别是如果您在一段时间后返回以进行快速修复。

只是为了锻炼我的头脑，快速而肮脏的**工作**C# 程序：

```
public static List<string> SplitCSV(string line)
{
    if (string.IsNullOrEmpty(line))
        throw new ArgumentException();

    List<string> result = new List<string>();

    bool inQuote = false;
    StringBuilder val = new StringBuilder();

    // parse line
    foreach (var t in line.Split(','))
    {
        int count = t.Count(c => c == '"');

        if (count > 2 && !inQuote)
        {
            inQuote = true;
            val.Append(t);
            val.Append(',');
            continue;
        }

        if (count > 2 && inQuote)
        {
            inQuote = false;
            val.Append(t);
            result.Add(val.ToString());
            continue;
        }

        if (count == 2 && !inQuote)
        {
            result.Add(t);
            continue;
        }

        if (count == 2 && inQuote)
        {
            val.Append(t);
            val.Append(',');
            continue;
        }
    }

    // remove quotation
    for (int i = 0; i < result.Count; i++)
    {
        string t = result[i];
        result[i] = t.Substring(1, t.Length - 2);
    }

    return result;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-25T08:53:01.770

有一句常被引用的话：

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。（杰米·扎温斯基）

鉴于 CSV 文件没有官方标准（相反有大量稍微不兼容的样式），您需要确保您实现的内容适合您将收到的文件。实现比你需要的更高级的东西没有意义——而且我很确定你不需要正则表达式。

这是我对提取术语的简单方法的尝试 - 基本上，它遍历查找逗号的行，跟踪当前索引是否在字符串中：

```
 public IEnumerable<string> SplitCSV(string line)
    {
        int index = 0;
        int start = 0;
        bool inString = false;

        foreach (char c in line)
        {
            switch (c)
            {
                case '"':
                    inString = !inString;
                    break;

                case ',':
                    if (!inString)
                    {
                        yield return line.Substring(start, index - start);
                        start = index + 1;
                    }
                    break;
            }
            index++;
        }

        if (start < index)
            yield return line.Substring(start, index - start);
    } 
```

标准警告 - 未经测试的代码，可能存在错误。

**限制**

*   值周围的引号不会自动删除。
    为此，请在`yield return`接近结尾的语句之前添加一个检查。

*   单引号与双引号的支持方式
    不同您可以添加一个单独的 boolean `inSingleQuotedString`，将现有的 boolean 重命名为`inDoubleQuotedString`并以相同的方式处理两者。（你不能让现有的布尔值做双重工作，因为你需要字符串以开始它的同一个引号结尾。）

*   空格不会自动删除
    一些工具会在 CSV 文件中的逗号周围引入空格以“漂亮”文件；然后就很难从格式化空白中分辨出有意的空白。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-08-25T16:08:27.637

[文件助手](http://filehelpers.sourceforge.net/)支持多行字段。

您可以解析如下文件：

```
a,"line 1
line 2
line 3"
b,"line 1
line 2
line 3" 
```

这是数据类型声明：

```
[DelimitedRecord(",")]
public class MyRecord
{ 
 public string field1;
 [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
 public string field2;
} 
```

这是用法：

```
static void Main()
{
 FileHelperEngine engine = new FileHelperEngine(typeof(MyRecord));
 MyRecord[] res = engine.ReadFile("file.csv");       
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-25T08:17:44.683

如果*保证*所有值都用引号引起来，请查找值，而不是逗号：

```
("".*?""|"[^"]*") 
```

这利用了“最早的最长匹配获胜”这一事实 - 它首先查找双引号值，而正常引用值的优先级较低。

如果您不希望封闭引号成为匹配的一部分，请使用：

```
"(".*?"|[^"]*)" 
```

并选择匹配组 1 中的值。

正如我所说：这个工作的先决条件是格式良好的输入，每个值周围都有保证的引号或双引号。空值也必须被引用！一个很好的副作用是它不关心分隔符。逗号、制表符、分号、空格，应有尽有。一切都会奏效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-25T08:13:42.567

为了有一个可解析的 CSV 文件，值内的任何双引号都需要以某种方式正确转义。执行此操作的两种标准方法是将双引号表示为两个背靠背的双引号或反斜杠双引号。这是以下两种形式之一：

“”

\"

在第二种形式中，您的初始字符串如下所示：

"a","\"b\",\"x\",\"y\"","c"

如果您的输入字符串没有针对像这样的严格格式进行格式化，那么您在自动化环境中成功解析它的机会就很小。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-01-19T16:04:12.347

试试[CsvHelper](http://joshclose.github.io/CsvHelper/)（我维护的一个库）或[FastCsvReader](http://www.codeproject.com/KB/database/CsvReader.aspx)。两者都运作良好。CsvHelper 也进行写作。就像其他人一直在说的那样，不要自己动手。:P

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-25T08:47:38.973

[.Net 的FileHelpers](http://filehelpers.sourceforge.net/)是您的朋友。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-25T09:01:50.710

请参阅链接“正则表达式与 CSV 的乐趣”：

[http://snippets.dzone.com/posts/show/4430](http://snippets.dzone.com/posts/show/4430)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-25T09:27:13.840

Lumenworks CSV 解析器（开源，免费，但需要登录[codeproject](http://www.codeproject.com/KB/database/CsvReader.aspx)）是迄今为止我用过的最好的。它可以让您不必编写正则表达式并且使用起来很直观。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-25T08:15:18.633

好吧，我不是正则表达式专家，但我确信他们对此有答案。

从程序上讲，它是一个字母一个字母地进行。将变量（例如 dontMatch）设置为 FALSE。

每次遇到报价切换时都不会匹配。

每次遇到逗号时，请检查 dontMatch。如果为 TRUE，请忽略逗号。如果为 FALSE，则以逗号分隔。

这适用于您给出的示例，但您用于引号的逻辑从根本上是错误的 - 您必须转义它们或使用另一个分隔符（例如单引号）将主要引号与次要引号分开。

例如，

`"a", ""b", ""c", "d"", "e""`

会产生不好的结果。

这可以用另一个补丁来修复。您必须匹配引号，而不是简单地保持真假。

要匹配引号，您必须知道上次看到的内容，这进入了非常深入的解析领域。到那时，您可能希望确保您的语言设计良好，如果是，您可以使用编译器工具为您创建解析器。

-亚当

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-25T12:07:10.163

我刚刚在我的代码中尝试了您的正则表达式。它适用于带引号的格式化文本...

但想知道我们是否可以通过正则表达式解析低于值..

```
"First_Bat7679",""NAME","ENAME","FILE"","","","来自："DDD,_Ala%as"@sib.com"

```

我正在寻找结果：

```
'First_Bat7679'
'"NAME","ENAME","文件"'
''
''
'来自：“DDD,_Ala%as”@sib.com'

```

谢谢

# jquery - vs 2008 中对 JQuery 的 Intellisense 支持不起作用

> ID：316652
> 
> 赞同：0
> 
> 时间：2008-11-25T08:07:54.297
> 
> 标签：jquery, visual-studio-2008, intellisense

我已经按照[这里](http://weblogs.asp.net/scottgu/archive/2008/11/21/jquery-intellisense-in-vs-2008.aspx)的每个步骤进行操作，但是，JQuery 的 Intellisense 仍然无法正常工作，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-28T08:54:15.777

我[解决了问题](http://itscommonsensestupid.blogspot.com/2008/11/potential-jquery-intellisenses-bug.html)。事实证明，我没有正确引用 JQuery 脚本文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T13:20:33.510

当我将 jquery intellisense 的更新添加到 vwd2008 时，它不适用于我现有的一些项目。

原来我使用的 ui.datepicker.js 插件导致智能感知崩溃。

我通过在本指南中的第 8 点中创建一个虚拟文件，从智能感知中隐藏了 ui.datepicker.js 文件

[jQuery 智能感知指南](http://blogs.gotdotnet.com/webdevtools/archive/2008/11/18/jscript-intellisense-faq.aspx)

希望有帮助。

吉姆3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T20:38:13.830

[从此处](http://code.google.com/p/jqueryjs/downloads/detail?name=jquery-1.2.6-vsdoc.js)下载 jquery 文档并将其放在与名为“jquery-1.2.6.pack.js”的文件相同的目录中。重新启动 VS，您现在应该可以使用智能感知了。VS 在文件名末尾查找带有“-vsdoc”的文件以提供智能感知。那里有超过 5000 行，但是如果您可以轻松浏览它，那么您实际上可以更改智能提示以适合自己。

如果这对你不起作用，那么试试[这个](http://code.msdn.microsoft.com/KB958502/Release/ProjectReleases.aspx?ReleaseId=1736)MS 补丁来帮助 VS 识别 javascript 的 -vsdoc 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-25T08:42:08.597

我想我必须重新加载文件或项目或其他东西才能让它工作。IME 它有点像所有 MS Intellisense - 你永远不知道你是否会得到任何东西或它将是什么......

毫无疑问，JetBrains 和 WholeTomato 很快就会解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-21T20:31:28.033

我下载了这个 VS2008 修补程序：

[http://code.msdn.microsoft.com/KB958502/Release/ProjectReleases.aspx?ReleaseId=1736](http://code.msdn.microsoft.com/KB958502/Release/ProjectReleases.aspx?ReleaseId=1736)

它解决了我的问题，我尝试将 vsdoc2 文件重命名为 vsdoc 并没有帮助，但修复程序解决了它。

# vb.net - 如何在 VB.Net 中将“测试服务”页面添加到 WCF Web 服务

> ID：316653
> 
> 赞同：4
> 
> 时间：2008-11-25T08:08:36.447
> 
> 标签：vb.net, wcf

我正在使用 WCF 构建一个 Web 服务，作为在我的 VB.Net 应用程序中提供对数据的访问的一种方式。

在构建托管在 IIS 上的 Web 服务时，有一个有用的测试页面作为服务的一部分，它允许使用参数调用 Web 服务。对测试很有帮助。

有没有办法配置 WCF 托管的 Web 服务以提供相同类型的测试接口，而不是相当无用的“使用 svcutil”响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T18:49:31.007

仅供参考，您也可以使用位于以下位置的[WcfTestClient](http://msdn.microsoft.com/en-us/library/bb552364.aspx)：

C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\WcfTestClient.exe

它提供了您正在寻找的许多功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T09:00:12.957

恐怕您必须构建网页表单，例如 aspx 来调用服务并显示结果，WCF 服务不再为您生成 UI。

# continuous-integration - 您如何向客户推销持续集成？

> ID：316656
> 
> 赞同：1
> 
> 时间：2008-11-25T08:09:57.473
> 
> 标签：continuous-integration

我知道使用持续集成可以提高代码库的质量并加快发布速度，但是让客户相信他们在下一个项目中需要它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-25T08:12:14.833

准确地说出你在问题中所说的话：

*   加速发布=更早的市场渗透=更多的钱
*   提高代码质量 = 减少修复错误的时间 = 降低成本

只要您可以帮助他们合理快速且便宜地进行设置，我不明白为什么会出现问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-25T08:54:20.363

除了提出标准论点外，我还引用了本文的数据：

Alan MacCormack、Chris Kemerer、Michael Cusumano 和 Bill Crandall，“选择软件开发实践的生产力和质量之间的权衡”，IEEE 软件，2003 年 9 月至 10 月

即：

*   每次代码签入时的集成/回归测试 = 缺陷率降低 36%
*   每日构建 = LOC 输出/程序员增加 93%

因此 CI 为您提供更高的生产力**和**更好的质量。谁不想这样？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T08:28:57.357

你做了一些断言。如果你想把这个想法卖给你的客户，你将不得不回答以下问题：

*   它如何提高您的代码质量？

    定期确定编译/构建问题。如果与自动化集成和单元测试结合使用，您将能够定期识别错误。

*   它如何加快你的发布速度？

    如果您将构建和部署过程自动化，您就可以消除开发团队交付新构建进行测试所需的停机时间。

    如果您的时间用完并准备发布不完整的功能，您有成功构建的历史可以依靠，

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-25T08:58:04.773

我不确定客户对持续集成有多感兴趣。我认为在许多情况下，向开发团队推销这个想法更值得锻炼。

那就是说客户总是喜欢听。

*   您的项目将始终处于工作状态。

*   所有代码在我们编写时都经过测试

# apache - apache内存不足错误

> ID：316666
> 
> 赞同：0
> 
> 时间：2008-11-25T08:16:16.340
> 
> 标签：apache, low-memory

mod_python(?) 正在消耗大量内存（每个工作进程大约 9mb）。如果我一次打开多个 TRAC 页面，其中许多页面将由于没有 ram（64mb 虚拟限制）而出现错误。如果我将工作线程限制为 3，我可以通过。问题是如果没有人访问 TRAC，我有很多未使用的 ram。

有没有办法我可以

1.  限制可以使用python的工作进程数量？
2.  限制我的 trac 路径中的工作进程数量？
3.  让 apache 生成它想要的尽可能多的工作进程或线程，但仅在 X 数量或 ram 空闲时（或者当 X 数量或以下数量被 apache 使用时）才产生它
4.  还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T00:33:31.633

您可以使用最少的工作线程配置第二个`mod_python`apache，使其仅在本地接口和不同的端口上运行，即[http://127.0.0.1:9000/](http://127.0.0.1:9000/)。然后对于端口 80 上的公共 apache 实例，禁用 mod_python 并调整以获得最佳 ram 利用率。将所有 trac 和其他 python 应用程序请求代理到本地`mod_python`实例。

如果面向公众的 apache 仅用于提供静态内容，则考虑将其替换为轻量级的东西，例如[nginx](http://nginx.net/)或[lighttpd](http://www.lighttpd.net/)。

# java - 在 jTextfield 中禁用“粘贴”

> ID：316673
> 
> 赞同：5
> 
> 时间：2008-11-25T08:18:24.243
> 
> 标签：java, swing, awt, jtextfield

我有一个用 Swing，awt 编写的应用程序。我想阻止用户将值粘贴到文本字段中。有没有办法在不使用动作监听器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2011-09-20T20:09:56.437

您可以使用 null 参数调用 setTransferHandler，如下所示：

```
textComponent.setTransferHandler(null); 
```

这将禁用该字段上的所有复制/粘贴操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-25T11:08:55.320

最好的方法是在组件 ActionMap 中删除与 CTRL+V 击键相关的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-02-26T17:36:28.020

最简单的说法是：`textComponent.setEditable(false);`

这将禁用剪切和粘贴，但仍启用复制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-07T17:49:52.190

```
public class PastlessJTextField extends JTextField {

        public PastlessJTextField() {
            super();
        }
        public PastlessJTextField( int columns ){
            super( columns );
        }

        @Override
        public void paste() {
            // do nothing
        }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T08:32:10.113

您也许可以覆盖`paste()`.`JTextComponent`

# c# - C#：您如何在设计时构建多行字符串？

> ID：316674
> 
> 赞同：0
> 
> 时间：2008-11-25T08:18:24.913
> 
> 标签：c#

我将如何通过在设计时将其写入变量然后仅调用 Console.WriteLine(sDescription) 来显示它来完成在控制台窗口中显示如下一行？

```
 Options:
            -t          Description of -t argument.
            -b          Description of -b argument. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-25T08:27:17.750

如果我正确理解您的问题，那么您需要的是字符串前面的 @ 符号。这将使编译器从字面上接受您的字符串（包括换行符等）

在你的情况下，我会写以下内容：

```
String sDescription =
@"Options:
    -t          Description of -t argument."; 
```

到目前为止，您的问题（我希望如此），但我建议只使用几个 WriteLines。性能损失几乎没有，而且适应性更强。您可以使用格式字符串，因此您可以这样做：

```
string formatString = "{0:10} {1}";
Console.WriteLine("Options:");
Console.WriteLine(formatString, "-t", "Description of -t argument.");
Console.WriteLine(formatString, "-b", "Description of -b argument."); 
```

formatstring 确保您的行被很好地格式化，而无需手动放置空格，并确保如果您想要使格式不同，您只需在一个地方进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T08:21:50.507

```
Console.Write("Options:\n\tSomething\t\tElse"); 
```

生产

```
Options:
    Something       Else 
```

\n 表示下一行，\t 表示制表符，对于更专业的布局，请尝试使用格式说明符设置字段宽度。 [http://msdn.microsoft.com/en-us/library/txafckwd.aspx](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T08:24:18.443

如果这是一个`/?`屏幕，我倾向于将文本放入我通过 resx 文件嵌入的 .txt 文件中。然后我只编辑txt文件。然后，这将作为生成的 resx 类上的字符串属性公开。

如果需要，我会`string.Format`在我的 txt 中嵌入标准符号以进行替换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T08:21:02.227

就我个人而言，我通常只写三个 Console.WriteLine 调用。我知道这会产生额外的绒毛，但它会适当地排列文本，*并*保证它将为我正在运行的任何平台使用正确的行终止符。另一种方法是使用逐字字符串文字，但这将在编译时“修复”行终止符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T20:47:22.080

I know C# is mostly used on windows machines, but please, please, please try to write your code as platform neutral. Not all platforms have the same end of line character. To properly retrieve the end of line character for the currently executing platform you should use:

```
System.Environment.NewLine 
```

Maybe I'm just anal because I am a former java programmer who ran apps on many platforms, but you never know what the platform of the future is.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T09:02:50.923

“最佳”答案取决于您显示的信息来自何处。

如果你想对它进行硬编码，使用“@”字符串非常有效，尽管你会发现让它正确显示对你的代码格式有很大的好处。

对于更实质性的文本（超过几行），嵌入文本资源是好的。

但是，如果您需要即时构建字符串，例如通过循环访问应用程序支持的命令行参数，那么您应该研究 StringBuilder 和 Format Strings。

[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)具有像[AppendFormat()](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.appendformat.aspx)这样接受格式字符串的方法，从而可以轻松构建格式行。

[格式化字符串](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)可以轻松地将多个项目组合在一起。请注意，格式字符串可用于将事物格式化为特定宽度。

引用上面链接的 MSDN 页面：

> **格式化项目语法**
> 
> 每个格式项采用以下形式，由以下组件组成：
> 
> {index[,alignment][:formatString]}
> 
> 需要匹配的大括号（“{”和“}”）。
> 
> *指数成分*
> 
> 强制索引组件，也称为参数说明符，是一个从 0 开始的数字，用于标识对象列表中的相应项...
> 
> *对齐组件*
> 
> 可选的对齐组件是一个有符号整数，表示首选的格式化字段宽度。如果alignment 的值小于格式化字符串的长度，则忽略对齐，并将格式化字符串的长度用作字段宽度。如果对齐为正，则字段中的格式化数据右对齐，如果对齐为负，则左对齐。如果需要填充，则使用空格。如果指定了对齐方式，则逗号是必需的。
> 
> *格式化字符串组件*
> 
> 可选的 formatString 组件是一个格式字符串，适用于被格式化的对象类型...

# .net - 将字节流解析为结构/类

> ID：316682
> 
> 赞同：0
> 
> 时间：2008-11-25T08:22:22.707
> 
> 标签：.net, visual-c++

我有一个需要解析为结构的字节流，并且我还需要能够将结构解析回字节流。

下面是我想要使用 BitConverter 解析值的示例。我希望有一种更有效的方法来做到这一点，因为我的结构是巨大的！

```
ref struct TestStruct
{
    int TestInt;
    float TestFloat;
};

int main(array<System::String ^> ^args)
{
    // populating array - just for demo, it's really coming from a file
    array<unsigned char>^ arrBytes = gcnew array<unsigned char>(8);
    Array::Copy(BitConverter::GetBytes((int)1234), arrBytes, 4);
    Array::Copy(BitConverter::GetBytes((float)12.34), 0, arrBytes, 4, 4);

    // parsing to struct - I want help
    TestStruct^ myStruct = gcnew TestStruct();
    myStruct->TestInt = BitConverter::ToInt32(arrBytes, 0);
    myStruct->TestFloat = BitConverter::ToSingle(arrBytes, 4);

    String^ str = Console::ReadLine();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T08:30:35.623

[这](http://msdn.microsoft.com/en-us/library/72hyey7b(VS.71).aspx)是.NET中序列化的解释

对于一般 C++（非托管），请查看[boost::serialize](http://www.boost.org/doc/libs/1_37_0/libs/serialization/doc/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T08:44:53.097

对于这样的事情，您通常使用代码生成器。假设源代码如下所示：

```
struct a {
    int i;
}

struct b {
    string name;
    struct a a;
} 
```

您所做的是编写一个简单的解析器，它在源（可能是一些头文件）中搜索“struct”，然后读取结构的名称（“struct”和“{”之间的任何内容）。将其写入输出：

```
cout << "struct " << name << " * read_struct_" << name << " (stream in) {" << NL
    << "    struct " << name << " * result = malloc (sizeof(struct " << name << "));" NL
parseFields (headerStream);
cout << "    return result;" << NL << "}" << NL ; } 
```

请注意，我的 C++ 有点生疏，所以这可能无法编译，但您应该明白这一点。

在 parseFields 中，您读取每一行并将其分成两部分：最后一个空格之前的任何内容（即第一个示例中的“int”）以及最后一个空格和“;”之间的内容。在这种情况下，那将是“我”。您现在写入输出：

```
cout << "read_" << fieldType << "(in, &result->" << fieldName << ");" << NL; 
```

注意：您需要将字段类型中的所有空格替换为“_”。

在输出中，如下所示：

```
struct a * read_struct_a (stream in) {
   struct a * result = malloc(sizeof(struct a));
   read_int(in, &result->i);
   return result;
} 
```

这允许您定义如何在其他地方（在实用程序模块中）读取或写入 int。

现在，您有了从头文件中读取结构定义并创建可以从某个流中读取结构的新代码的代码。复制它以将结构写入流。编译生成的代码就完成了。

您还需要编写单元测试来验证解析是否正确 :) 只需在内存中创建一个结构，使用 write 方法将其保存在某处并再次读取它。现在，这两个结构应该是相同的。您将需要编写第三个代码生成器来创建代码来比较两个结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T17:48:50.720

序列化很棒，但就我而言，我不需要“额外”，无论如何我都必须做同样的工作才能完全控制这些位。对于大多数人来说，我猜这可能是解决方案。

给 Digulla 先生正确的答案，因为它最像我的解决方案。还要感谢戴维斯先生，他让我明白了必须完成的事实……

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-11-25T08:32:41.687

您提到了 C++ 和 .net。仅对于 C++，您应该能够按照以下方式做一些事情

```
char buffer[sizeof(MYSTRUCT)];
memcopy((char*) &mystruct, buffer, sizeof(MYSTRUCT)); 
```

对于 .net，如果您想避免单独保存每个项目，则[必须使用序列化- 不能保证这些类存储在连续的内存块中。](http://www.parashift.com/c++-faq-lite/serialization.html)这很烦人，但这是托管代码的“功能”之一——你必须让它为你管理它。

-亚当

# java - 如何将java exe提取到jar

> ID：316701
> 
> 赞同：9
> 
> 时间：2008-11-25T08:30:54.733
> 
> 标签：java

我有一个我知道是用 java 编写的 exe。我知道可以将java程序制作成exe并且有将jar文件转换为exe的工具但是可以转换回来吗？AFAIK jar文件可以在任何可以运行java的平台上运行，我想在mac上使用windows编译的java程序而不使用任何额外的虚拟化（wine，vmware）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-25T08:48:02.327

这取决于 exe 是如何构建的：

*   如果它只是简单包装，使用类似[JSmooth](http://jsmooth.sourceforge.net/docs/jsmooth-doc.html#N1034F)的工具，同样的工具可以[提取 jar](http://jsmooth.sourceforge.net/docs/jsmooth-doc.html#N1034F)
*   如果它已经被编译，例如 gcj （如[this question](https://stackoverflow.com/questions/53845/java-compiler-options-to-produce-exe-files)所示），......我不确定。
*   如果它是由静态编译器（或[AOT - Ahead-Of-Time](http://www.excelsior-usa.com/articles/java-to-exe.html#aot) -）编译的，我相信无法提取原始 jar。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-25T15:37:44.683

如果您的应用程序是使用 JSmooth 包装的，您可以在应用程序运行时查看您的默认临时目录 (C:\Documents and Settings\Username\Local Settings\Temp)。

打开一个 Windows 资源管理器窗口到临时目录，然后启动您的应用程序。您应该会看到一个 jar 文件 (Temp#.jar)。只需复制此内容，您就应该可以上路了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-12T09:51:33.200

我建议将您的文件扩展名从 .exe 重命名为 .jar 并尝试提取它们。查看代码使用 java Decompiler LIKE: [http://java-decompiler.github.io](http://java-decompiler.github.io)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-28T20:39:57.590

可以将 file.exe 转换回 file.jar ，要进行此反向过程，将需要您知道文件是如何加密的，例如，如果是第一级加密类名称并且文件没有隐藏，例如二级文件类是隐藏的，对于三级文件和类是隐藏的。为了得到这个很好的下载jar到exe软件并尝试他们如何将jar转换为exe然后你将能够知道相反的事情。要知道您如何继续反转流程，有一个博客可以帮助我，您可能使用的所有工具都列在那里，例如：Resource Hacker Winhex Ollydbg 1.10+ MemoryDump 0.9 和 Olly Advanced 或 StrongOD Plugin（用于高级 ctrl+g）。DJ Java Decompiler 7-Zip 或 Winrar 链接： [https://reverseengineeringtips.blogspot.com/2014/12/unpacking-jar2exe-21-extracting-jar.html?showComment=1480364662658#c447064983483780468](https://reverseengineeringtips.blogspot.com/2014/12/unpacking-jar2exe-21-extracting-jar.html?showComment=1480364662658#c447064983483780468)

谢谢

# c# - 双倍真的不适合赚钱吗？

> ID：316727
> 
> 赞同：71
> 
> 时间：2008-11-25T08:49:41.077
> 
> 标签：c#, language-agnostic, decimal, currency

我总是在 c# 中告诉 double 类型的变量不适合钱。所有奇怪的事情都可能发生。但我似乎无法创建一个示例来演示其中的一些问题。谁能提供这样的例子？

（编辑；这篇文章最初被标记为 C#；一些回复提到了 的具体细节`decimal`，因此意味着[`System.Decimal`](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)）。

（编辑 2：我特别要求一些 c# 代码，所以我认为这不仅仅是语言不可知的）

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2008-11-25T08:50:55.520

非常非常不合适。使用小数。

```
double x = 3.65, y = 0.05, z = 3.7;
Console.WriteLine((x + y) == z); // false 
```

（来自 Jon 的页面示例- 推荐阅读；-p [）](http://csharpindepth.com/Articles/General/FloatingPoint.aspx)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-11-25T08:54:58.570

四舍五入会导致您有效地得到奇怪的错误。此外，与精确值的比较非常棘手——您通常需要应用某种 epsilon 来检查实际值是否“接近”特定值。

这是一个具体的例子：

```
using System;

class Test
{
    static void Main()
    {
        double x = 0.1;
        double y = x + x + x;
        Console.WriteLine(y == 0.3); // Prints False
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-25T09:08:45.873

是的，不合适。

如果我没记错的话 double 大约有 17 个有效数字，所以通常舍入错误会发生在小数点后面很远的地方。大多数财务软件在小数点后使用 4 位小数，剩下 13 位小数可供使用，因此您可以用于单个操作的最大数字仍然远远高于美国国债。但舍入误差会随着时间的推移而增加。如果您的软件运行了很长时间，您最终会开始亏损。某些操作会使情况变得更糟。例如，将大量添加到少量将导致精度显着下降。

您需要定点数据类型来进行货币操作，大多数人不介意您在这里和那里损失一分钱，但会计师不像大多数人..

**编辑**
根据这个网站[http://msdn.microsoft.com/en-us/library/678hzkk9.aspx](http://msdn.microsoft.com/en-us/library/678hzkk9.aspx)双打实际上有 15 到 16 位有效数字而不是 17。

@Jon Skeet decimal 比 double 更合适，因为它的精度更高，有 28 位或 29 位有效小数。这意味着累积舍入误差变得显着的可能性较小。像 Boojum 提到的定点数据类型（即代表美分或 100 美分的整数）实际上更适合。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-25T09:17:10.520

由于`decimal`使用 10 的倍数的比例因子，因此可以精确表示 0.1 之类的数字。本质上，十进制类型将其表示为 1 / 10 ^ 1，而 a`double`将其表示为 104857 / 2 ^ 20（实际上它更像是*真的大数*/ 2 ^ 1023）。

A`decimal`可以精确地表示任何具有最多 28/29 位有效数字（如 0.1）的基数为 10 的值。一个`double`不能。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-11-25T09:19:45.477

我的理解是，大多数金融系统使用整数表示货币——即，以美分计算所有内容。

IEEE 双精度实际上*可以*精确地表示 -2^53 到 +2^53 范围内的所有整数。（Hacker's Delight，第 262 页）如果您只使用加法、减法和乘法，并将所有内容保持在此范围内的整数，那么您应该不会看到精度损失。但是，我会非常警惕分裂或更复杂的操作。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-23T12:20:02.703

当您不知道自己在做什么时使用 double 是不合适的。

“double”可以代表一万亿美元的金额，误差为 1/90 美分。因此，您将获得高度精确的结果。想计算将一个人送上火星并让他活着回来需要多少钱？双倍会做得很好。

但是对于金钱，通常有非常具体的规则说，一定的计算必须给出一定的结果，而不是其他的。如果您计算的金额非常非常接近 98.135 美元，那么通常会有一条规则确定结果应该是 98.14 美元还是 98.13 美元，您*必须*遵循该规则并获得所需的结果。

根据您居住的地方，使用 64 位整数来表示美分、便士或戈比或您所在国家/地区的任何最小单位通常都可以正常工作。例如，代表美分的 64 位有符号整数可以代表高达 92,223 万亿美元的价值。32 位整数通常不适合。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-25T12:56:18.597

没有双精度数总是会出现舍入错误，如果您在.Net 上，请使用“十进制”...

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2015-06-08T15:26:03.017

实际上，只要您选择合适的单位， 浮点**双精度数就非常适合表示金额。**

见[http://www.idinews.com/moneyRep.html](http://www.idinews.com/moneyRep.html)

定点**long**也是如此。**要么消耗 8 个字节，当然比十进制**项目 消耗的 16 个字节更可取。

某事是否有效（即产生预期和正确的结果）与投票或个人偏好无关。一项技术要么有效，要么无效。

# resources - 图结构的资源？

> ID：316728
> 
> 赞同：3
> 
> 时间：2008-11-25T08:50:01.590
> 
> 标签：resources, graph-theory

我有一个与图表有关的问题。我不是计算机科学专业的毕业生，因此需要快速介绍什么是图形，我是否可以阅读有关图形以及如何在 C++ 或一般情况下解决图形相关问题的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T09:02:28.320

请参阅Stony Brook Algorithm Repository 中的[图形问题，以及](http://www.cs.sunysb.edu/~algorith/major_section/1.4.shtml)[Xavier Llora 的精彩讲座](http://www.slideshare.net/xllora/ge498eci-lecture-8-connectivity-everywhere-graph-theory-101)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T09:05:34.757

[boost 图形库](http://www.boost.org/doc/libs/1_37_0/libs/graph/doc/index.html)可能是一个起点，并为您提供一些解决图形相关问题的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T09:05:53.837

我将从研究一些特定的算法开始。Dijkstra 算法和图闭包算法是很好的起点。此外，大多数介绍性计算机科学（例如数据结构）文本都有关于图形的部分。我使用[这本书](https://rads.stackoverflow.com/amzn/click/com/0072970545)，主要是在我对大部分材料已经很熟悉之后。它需要一种非常正式的方法，所以如果你的数学很强，你可能会喜欢它。

如果您提到您正在尝试解决的特定问题（如果有这样的事情），社区可能会为您提供更好的指导。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-11-25T08:57:23.527

这是一个[非常酷的图表表示工具](http://mark-shepherd.com/blog/2006/12/03/recent-improvements-to-springgraph-graph-visualizer)

# php - 将对象转换为数组的 PHP 错误

> ID：316747
> 
> 赞同：3
> 
> 时间：2008-11-25T08:58:09.017
> 
> 标签：php, arrays, stdclass

我之前有过这个问题，并得出结论这是 5.2.5 中的一个错误。好吧，至少对我来说，它在 5.2.6 中仍然存在问题：

请让我知道它是否损坏或对您有用：

```
$obj = new stdClass();
$obj->{"foo"} = "bar";
$obj->{"0"} = "zero";
$arr = (array)$obj;

//foo -- bar
//0 --    {error: undefined index}
foreach ($arr as $key=>$value){
    echo "$key -- " . $arr[$key] . "\n";
} 
```

从 stdClass 转换后，有什么方法可以“修复”数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T09:08:03.317

对我来说绝对是一个错误（PHP 5.2.6）。

您可以像这样修复数组：

```
$arr = array_combine(array_keys($arr), array_values($arr)); 
```

它已在[此错误报告](http://bugs.php.net/bug.php?id=45346)中报告，但被标记为虚假......[文档](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting)说：

> 键是成员变量名称，有一些值得注意的例外：整数属性不可访问；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T09:17:22.317

一些实验表明 phps 自己的函数不会持续这种模糊性。

```
function noopa( $a ){ return $a; }
$arr = array_map('noopa', $arr ); 
$arr[0]; # no error! 
```

实际上，这只是创建了数组的副本，并且在复制期间进行了修复。

最终，它是一个全面的设计失败，尝试以您认为它在具有混合数字和字符串键的数组上工作的方式使用 array_merge？

所有编号的元素都被复制，有些被重新编号，即使有些只是恰好是字符串封装的数字，因此，有许多 array_merge 的自制实现只是为了解决这个问题。

回到当 php 试图克隆 perl 并失败时，他们没有掌握数组和哈希是不同概念的概念，而是将它们组合成一个通用保护伞。好样的！。

对于他们的下一个技巧，他们设法打破命名空间分隔符，因为某些其他语言由于某种原因没有遇到过的技术问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T09:10:57.007

谢谢RoBorg ..我刚刚也发现了:)

这是另一个解决方案，不确定它是否更快：

```
unserialize(serialize($arr)); 
```

# iphone - iPhone 只能使用 SQLite 数据库吗？

> ID：316755
> 
> 赞同：3
> 
> 时间：2008-11-25T09:01:55.497
> 
> 标签：iphone, database, cocoa-touch

iPhone 可以使用除 SQLite 之外的其他数据库，例如 MySQL 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T09:14:52.570

iPhone 只能直接在设备上使用 SQLite 作为数据库。这意味着 iPhone 内部没有 MySQL 服务器。但是您可以并且可以免费拥有（您自己的）MySQL 后端服务器，iPhone 应用程序连接到该服务器。但是苹果不提供服务器，所以你要支付维护费用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-02-27T18:48:28.813

Not true any more!

The Raima RDM Embedded database SDK will also work on the iPhone. It's cool because it supports the network and relational models, and you can do things like having direct pointers to records for faster access.

They have an official port coming, but their version for Mac works in the iPhone Simulator.

[raima.com/iphone](http://www.raima.com/iphone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T09:20:35.820

SQLite 安装在所有 iPhone 上。理论上，您可以运行其他数据库，但由于您无法启动其他进程，因此您无法运行 MySQL——MySQL 需要一个单独的进程（mysqld 守护进程）。

# database-design - 英国增值税从 17.5 变为 15% - 这将如何影响您的代码？

> ID：316757
> 
> 赞同：17
> 
> 时间：2008-11-25T09:02:40.893
> 
> 标签：database-design, configuration-management

英国增值税制度正在从 17.5% 变为 15%。您在代码中使用了哪些策略来存储增值税，以及更改将如何影响您的应用程序。您是否存储了大桶的历史记录以便计算旧价格，或者是否将旧发票存储在单独的表中？这是一个简单的配置设置，还是你拒绝了？存储增值税的理想方式是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-11-25T10:43:23.687

## 不要计算它。存储它！

HMRC 对获得适量的增值税非常挑剔。增值税计算的四舍五入在用户指南中的规定有些含糊，留给未来的实施者来解决可能是自找麻烦。通过在输入发票/行项目时存储金额，可以避免此问题。

这似乎是对存储的浪费，违反了冗余原则，但涉及的存储量很小，将来可以省去很多麻烦。当然，不言而喻，货币金额（甚至可能是带有小数部分的增值税率）应该存储为乘以整数，以避免二进制小数表示舍入错误也蔓延。

## 中央费率存储

您绝对应该使用中央速率存储。但是，我建议这仅提供输入新发票时使用的当前默认费率。这些可以与开始和结束日期一起存储，以便在必要时进行自动转换。可以为每张发票（或发票行）存储这些费率以及开具发票时计算的增值税金额，以提供当时情况的绝对快照。

不要忘记适应不同的增值税税率（例如标准、减税、零税率、无增值税）以及与其他欧盟国家/地区的增值税注册实体进行交易的可能性，在这些国家您可能需要免增值税发票通常要缴纳增值税。

您最终可能会得到这样的表格（示例）：

```
编号 | 费率名称 | 增值税率 | 开始日期 | 结束日期
-------------------------------------------------- -  
1 | 标准 | 1750 | 1991 年 1 月 1 日 | 2008 年 11 月 30 日
2 | 标准 | 1500 | 2008 年 1 月 12 日 | 2009 年 12 月 31 日
ETC

```

上表只是一个例子。增值税率存储为“基点”的整数（例如百分之一），但假定增值税率永远不会超过小数点后 2 位。您显然可以用一个额外的列来扩展它来缓解这个问题，但这似乎有点太过分了！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-11-25T09:12:40.077

# 不要存储它。算了！

* * *

我推荐的存储基于百分比的利率/利率的方法是：

你应该有一个像'VAT_param'这样的表

**利率 | 自（日期）起生效 | 有效至（日期）**

我相信，

> “**任何可以计算的东西，** **都不应该被保存”**

尤其是在您需要根据其他百分比（如税收、利息等）计算价值的情况下，不要让时空权衡躲避您。以后你会为自己花时间在空间上而祝福自己。

然后应根据发票日期，根据期间的有效税率巧妙地计算增值税。它会

*   **确保最少的冗余**（请永远不要谈论旧表或新表.. 几年后，如果利率每年变化一次，您将开始紧张）

*   有一个**集中的单枢轴**来控制速率。您的 VAT_param 表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-25T23:53:59.817

我的想法 ...

a- 我通常更喜欢计算而不是存储，但**在这种情况下**，计算的增值税（以及用于计算的费率和代码）应与每笔交易一起存储。这是因为它将是必须重复生成的文档的源数据。您还希望能够将销售中的增值税金额与财务分类帐中的增值税金额相匹配。您**不想**冒每次都无法重新生成发票或增值税报告等文件的风险。

b- 增值税（或其他税）值绝对应存储在表格中，并附有生效日期和税率。如果它是硬编码的，现在就做软编码的工作，因为它很可能在不久的将来再次改变。

c- 这在美国是一个巨大的（并且已经解决的）交易，因为销售税因州、县甚至城市而异。我在洛杉矶县生活和工作，销售税率为 8.25%。向南 10 英里，在奥兰治县，销售税率为 7.75%。互联网和目录零售商必须知道正确的费率，因为它是由交货地点决定的！

祝你好运。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-25T09:04:53.057

我们从所有内部应用程序共享的数据库表中提取增值税，这意味着对我们的新代码而言，这对我们来说没什么大不了的。像这样保持中心化必须是明智之举。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T09:48:01.817

我有一种令人讨厌的感觉，即我继承的两个系统在某处硬编码了速率。

更糟糕的是，如果它是硬编码的，我将只是替换硬编码的值，因为我没有时间正确更改它。

更糟糕的是，我不知道我将在哪里获得时间来实际进行更改。所以我想它不会在星期一的变化中及时完成。当然还有更有趣的问题，例如我们的 10 英镑订阅是基于 10 英镑，包括 17.5% 的增值税（8.515 英镑或其他）。现在将是 9.79 英镑左右，把所有以 10 英镑做广告的东西弄得一团糟，所有网站的计算都基于 10 英镑。

这一切都是因为负责存钱罐的白痴想要一个头条新闻。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T10:57:01.693

我们将增值税率存储在数据库表中，所以这对我们来说没什么大不了的，尽管我必须举起手说，由于我们对代码所做的一些修改的性质，增值税是硬编码的在几个地方（我的错！），我设法以另一种更令人兴奋的方式重新捏造！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-12-18T12:11:56.260

我只是在做一些事情，以便在汇率变回时做到这一点。

无论您采用哪种方式，都无需在您的增值税表中记录开始日期**和**结束日期，因为增值税期间直接连续运行。

您可以通过执行如下查询来访问正确的增值税，其中 vat_date 是增值税税率的开始日期。

```
SELECT * FROM vat WHERE NOW() > vat_date ORDER BY vat_date DESC LIMIT 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-12-18T12:15:48.047

关于 store vs calc 参数。如果您存储它，您以后可以随时计算它 - 如果您改变主意；）

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-11-25T09:06:11.980

我昨晚在代码中找到了一个表格，其中存储了应用程序的重要配置设置。

```
Table tbl_config
   config_id int
   config_name varchar(255)
   config_value varchar(255) 
```

其中一项设置是我们用于服务器的主要管理员用户名和密码组合（未散列）。我猜创建它的开发者总是想访问它，以防他忘记了！不用说，它现在已经消失了。

# java - 如何在单独的控制台上使用一种配置启动多个 Java 程序（使用 Eclipse）

> ID：316761
> 
> 赞同：4
> 
> 时间：2008-11-25T09:04:36.087
> 
> 标签：java, eclipse, launch

我正在使用具有多个组件的 Java 程序（目前使用 Eclipse 和 Ant）。

有没有办法用一个启动配置启动多个程序？我有一个 Ant 目标可以完成这项工作（启动多个程序），但我想做一些事情：

*   我想用 Eclipse 调试程序，因此需要启动 Eclipse。
*   我想在单独的控制台上查看程序的输出。

此外，使用单独的控制台和/或调试“一键式”启动多个 Java 程序的其他方法也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T09:14:10.123

['多个启动部分'：]

如果您有一个 ant 启动配置可以满足您的需求，您可以随时将其转换为一个调用 ant 的 java 启动器。

```
Main Class: org.apache.tools.ant.Main

-Dant.home=${resource_loc:/myPath/apache_ant} 
-f ${resource_loc:/myProject/config/myFile-ant.xml} 
```

然后，您可以将这个 ant 会话作为常规 Java 应用程序启动，所有 Eclipse 调试工具都可供您使用。

在 User Entries 部分（*在*您的项目和默认路径之前）添加到您的类路径：

*   蚂蚁罐子
*   ant-launcher.jar

* * *

[多控制台部分]

可能的解决方案是确保您的 ant 启动器实际上在它们自己的 JVM 进程中启动不同的应用程序（每个应用程序一个 javaw.exe）

这样，您可以使用本[机 Eclipse 控制台的功能在不同的进程之间切换](http://dev.eclipse.org/newslists/news.eclipse.webtools/msg04776.html)。

> 控制台视图清楚地将输出与每个不同的“进程”分开，并将它们保存在几个“缓冲区”中。控制台有一个内置的“切换”功能，它会自动切换视图以显示执行输出的最后一个进程的缓冲区，但是您可以轻松地将显示切换到您想要查看的任何“进程缓冲区”。
> 
> 要切换控制台“缓冲区”显示，只需单击控制台视图标题栏右侧第四个工具栏按钮旁边的黑色“向下箭头”（类似于计算机屏幕的按钮）：
> 这将显示一个弹出窗口菜单列出所有活动进程缓冲区的“名称”，前面是“订单号”。当前显示的将在其“订单号”前有一个复选标记。您只需单击其名称即可将视图切换到另一个显示缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-16T18:02:01.397

这里的问题和选择的答案都是 6 岁。

[Eclipse Launch Groups](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Freference%2Fcdt_u_run_dbg_launch_group.htm)提供 UI 来运行多个启动配置。Launch Groups 显然是 CDT 的一部分，但可以通过安装“C/C++ Remote Launch”(org.eclipse.cdt.launch.remote)[单独安装而无需 CDT。](/a/11369639/1086034)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T08:07:32.320

实际上，在 Eclipse 站点上打开了一张票，它请求了同样的功能。那里的一位贡献者提出了一个插件，该插件允许对更多启动配置（可能是不同类型）进行分组，并通过单击鼠标启动所有配置。

虽然插件功能有限，但它做得很好。包含源代码，因此您可以根据需要进行更改。您必须在 Eclipse 中将其作为 PDE 项目打开并将其导出为 JAR，然后将 JAR 文件放在 Eclipse 的插件文件夹中。有点麻烦，但你只做一次。之后重新启动 Eclipse 并在启动配置对话框中查找“基本工作流程”。

插件源可在此处获得：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=39900#attach_177951](https://bugs.eclipse.org/bugs/show_bug.cgi?id=39900#attach_177951)

# configuration - 不同风格的 Solaris 上的 smb.conf 文件位置

> ID：316773
> 
> 赞同：3
> 
> 时间：2008-11-25T09:08:32.643
> 
> 标签：configuration, solaris, samba

好的，我是 Solaris 操作系统的初学者，我需要在 3 个机器上安装和配置 samba，每个机器都有不同的 Solaris 版本（8、9、10）。

我想知道 samba 配置文件的位置，即`smb.conf`每个版本中的文件？到目前为止，我发现的是

1.  索拉里斯 8

    > /usr/local/samba/lib/smb.conf

2.  Solaris 9 和 Solaris 10

    > /etc/sfw/samba/smb.conf

这是正确的吗？我需要知道安装 samba 时这些文件的默认位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T09:28:45.757

Samba 配置文件可以设置在管理员希望您拥有的任何位置。

*   `/usr/local/samba/`是可以安装 samba 的路径。
*   smb.conf 是配置文件之一，还有 private/secrets.tdb 或 username.map

您可以使用以下命令启动您的 samba：

```
smbd -D -s /myPath/smb.conf 
```

这两个位置（samba 安装和 samba 配置路径）可以完全分开。

`-D`如果指定，此参数会使服务器作为守护程序运行。也就是说，它会自行分离并在后台运行，在适当的端口上处理请求。将服务器作为守护程序运行是推荐的运行 smbd 的方式，用于提供更多非临时使用文件和打印服务的服务器。如果在 shell 的命令行上执行 smbd，则假定此开关。

`-s <configuration file>` 指定的文件包含服务器所需的配置详细信息。此文件中的信息包括特定于服务器的信息，例如要使用的 printcap 文件，以及服务器要提供的所有服务的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T09:25:23.920

'smbd' 手册页的 FILES 部分可能会给出一些提示。我手边没有任何 Solaris 盒子，所以很遗憾无法确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-26T01:55:53.847

你也可以像这样执行测试参数命令 # testparm /etc/samba/smb.conf

# database-design - 多语言数据库的架构

> ID：316780
> 
> 赞同：267
> 
> 时间：2008-11-25T09:13:26.223
> 
> 标签：database-design, localization, multilingual

我正在开发一个多语言软件。就应用程序代码而言，可本地化不是问题。我们可以使用特定于语言的资源，并拥有与它们配合良好的各种工具。

但是定义多语言数据库模式的最佳方法是什么？假设我们有很多表（100 或更多），每个表可以有多个可以本地化的列（大多数 nvarchar 列应该是可本地化的）。例如，其中一张表可能包含产品信息：

```
CREATE TABLE T_PRODUCT (
  NAME        NVARCHAR(50),
  DESCRIPTION NTEXT,
  PRICE       NUMBER(18, 2)
) 
```

我可以想到三种方法来支持 NAME 和 DESCRIPTION 列中的多语言文本：

1.  每种语言的单独列

    当我们向系统添加新语言时，我们必须创建额外的列来存储翻译后的文本，如下所示：

    ```
    CREATE TABLE T_PRODUCT (
      NAME_EN        NVARCHAR(50),
      NAME_DE        NVARCHAR(50),
      NAME_SP        NVARCHAR(50),
      DESCRIPTION_EN NTEXT,
      DESCRIPTION_DE NTEXT,
      DESCRIPTION_SP NTEXT,
      PRICE          NUMBER(18,2)
    ) 
    ```

2.  带有每种语言列的翻译表

    不存储翻译文本，只存储翻译表的外键。翻译表包含每种语言的列。

    ```
    CREATE TABLE T_PRODUCT (
      NAME_FK        int,
      DESCRIPTION_FK int,
      PRICE          NUMBER(18, 2)
    )

    CREATE TABLE T_TRANSLATION (
      TRANSLATION_ID,
      TEXT_EN NTEXT,
      TEXT_DE NTEXT,
      TEXT_SP NTEXT
    ) 
    ```

3.  每种语言都有行的翻译表

    不存储翻译文本，只存储翻译表的外键。translations 表只包含一个键，而一个单独的表包含一个用于每种语言翻译的行。

    ```
    CREATE TABLE T_PRODUCT (
      NAME_FK        int,
      DESCRIPTION_FK int,
      PRICE          NUMBER(18, 2)
    )

    CREATE TABLE T_TRANSLATION (
      TRANSLATION_ID
    )

    CREATE TABLE T_TRANSLATION_ENTRY (
      TRANSLATION_FK,
      LANGUAGE_FK,
      TRANSLATED_TEXT NTEXT
    )

    CREATE TABLE T_TRANSLATION_LANGUAGE (
      LANGUAGE_ID,
      LANGUAGE_CODE CHAR(2)
    ) 
    ```

每种解决方案各有利弊，我想知道您对这些方法有何经验，您有什么建议以及您将如何设计多语言数据库模式。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2008-11-27T10:02:17.933

您如何看待每个可翻译表都有一个相关的翻译表？

> CREATE TABLE T_PRODUCT (pr_id int, PRICE NUMBER(18, 2))
> 
> CREATE TABLE T_PRODUCT_tr（pr_id INT FK，语言代码 varchar，pr_name 文本，pr_descr 文本）

这样，如果您有多个可翻译列，则只需要一个连接即可获得它+，因为您没有自动生成 translateid，因此将项目及其相关翻译一起导入可能会更容易。

不利的一面是，如果您有一个复杂的语言回退机制，您可能需要为每个翻译表实现该机制 - 如果您依赖某些存储过程来执行此操作。如果您从应用程序中执行此操作，这可能不会成为问题。

让我知道你的想法——我也即将为我们的下一次申请做出决定。到目前为止，我们已经使用了您的第 3 种类型。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2014-09-26T09:28:08.043

这是一个有趣的问题，所以让我们使用死灵法。

让我们从方法 1 的问题开始：
问题：您正在反规范化以节省速度。
在 SQL（带有 hstore 的 PostGreSQL 除外）中，您不能传递参数语言，并说：

```
SELECT ['DESCRIPTION_' + @in_language]  FROM T_Products 
```

所以你必须这样做：

```
SELECT 
    Product_UID 
    ,
    CASE @in_language 
        WHEN 'DE' THEN DESCRIPTION_DE 
        WHEN 'SP' THEN DESCRIPTION_SP 
        ELSE DESCRIPTION_EN 
    END AS Text 
FROM T_Products 
```

这意味着如果您添加新语言，您必须更改所有查询。这自然会导致使用“动态 SQL”，因此您不必更改所有查询。

这通常会导致类似这样的结果（顺便说一下，它不能在视图或表值函数中使用，如果您确实需要过滤报告日期，这确实是一个问题）

```
CREATE PROCEDURE [dbo].[sp_RPT_DATA_BadExample]
     @in_mandant varchar(3) 
    ,@in_language varchar(2) 
    ,@in_building varchar(36) 
    ,@in_wing varchar(36) 
    ,@in_reportingdate varchar(50) 
AS
BEGIN
    DECLARE @sql varchar(MAX), @reportingdate datetime

    -- Abrunden des Eingabedatums auf 00:00:00 Uhr
    SET @reportingdate = CONVERT( datetime, @in_reportingdate) 
    SET @reportingdate = CAST(FLOOR(CAST(@reportingdate AS float)) AS datetime)
    SET @in_reportingdate = CONVERT(varchar(50), @reportingdate) 

    SET NOCOUNT ON;

    SET @sql='SELECT 
         Building_Nr AS RPT_Building_Number 
        ,Building_Name AS RPT_Building_Name 
        ,FloorType_Lang_' + @in_language + ' AS RPT_FloorType 
        ,Wing_No AS RPT_Wing_Number 
        ,Wing_Name AS RPT_Wing_Name 
        ,Room_No AS RPT_Room_Number 
        ,Room_Name AS RPT_Room_Name 
    FROM V_Whatever 
    WHERE SO_MDT_ID = ''' + @in_mandant + ''' 

    AND 
    ( 
        ''' + @in_reportingdate + ''' BETWEEN CAST(FLOOR(CAST(Room_DateFrom AS float)) AS datetime) AND Room_DateTo 
        OR Room_DateFrom IS NULL 
        OR Room_DateTo IS NULL 
    ) 
    '

    IF @in_building    <> '00000000-0000-0000-0000-000000000000' SET @sql=@sql + 'AND (Building_UID  = ''' + @in_building + ''') '
    IF @in_wing    <> '00000000-0000-0000-0000-000000000000' SET @sql=@sql + 'AND (Wing_UID  = ''' + @in_wing + ''') '

    EXECUTE (@sql) 

END

GO 
```

这样做的问题是
a) 日期格式是非常特定于语言的，所以如果你不以 ISO 格式输入（普通的普通程序员通常不会这样做，并且在用户肯定不会为您做的报告，即使明确指示这样做）。
和
b)**最重要**的是，您**放松了任何类型的语法检查**。如果`<insert name of your "favourite" person here>`因为wing 的需求突然改变而改变了模式，并创建了一个新表，旧表离开但引用字段重命名，您不会收到任何警告。**当您在不选择wing 参数**(==> guid.empty)的情况下运行报告时，它甚至可以工作。但是突然间，当实际用户实际选择了一个机翼时 ==>**繁荣**。**这种方法完全打破了任何类型的测试。**

* * *

方法2：
简而言之：“好”的想法（警告-讽刺），让我们将方法3的缺点（许多条目时速度慢）与方法1的相当可怕的缺点结合起来。
这种方法的唯一优点是你保持所有翻译都在一张表中，因此使维护变得简单。但是，使用方法 1 和动态 SQL 存储过程以及包含翻译的（可能是临时的）表以及目标表的名称（假设您将所有文本字段命名为相同的）。

* * *

方法3：
一张表，所有翻译：缺点：你必须在products表中为你要翻译的n个字段存储n个外键。因此，您必须对 n 个字段进行 n 次连接。当翻译表是全局的时，它有很多条目，并且连接变得很慢。此外，您总是必须为 n 个字段加入 T_TRANSLATION 表 n 次。这是相当大的开销。现在，当您必须为每位客户提供自定义翻译时，您会怎么做？您必须将另一个 2x n 连接添加到另一个表中。如果你必须加入，比如说 10 个表，还有 2x2xn = 4n 个额外的连接，那真是一团糟！此外，这种设计使得可以对 2 个表使用相同的翻译。如果我更改一个表中的项目名称，我真的想每次都更改另一个表中的条目吗？

另外，您不能再删除并重新插入表，因为现在产品表中有外键...您当然可以省略设置 FK，然后`<insert name of your "favourite" person here>`可以删除表并重新插入所有带有**newid()** [或通过在插入中指定 id，但具有**标识插入 OFF** ] 的条目，这将（并且将）很快导致数据垃圾（和空引用异常）。

* * *

方法 4（未列出）：将所有语言存储在数据库的 XML 字段中。例如

```
-- CREATE TABLE MyTable(myfilename nvarchar(100) NULL, filemeta xml NULL )

;WITH CTE AS 
(
      -- INSERT INTO MyTable(myfilename, filemeta) 
      SELECT 
             'test.mp3' AS myfilename 
            --,CONVERT(XML, N'<?xml version="1.0" encoding="utf-16" standalone="yes"?><body>Hello</body>', 2) 
            --,CONVERT(XML, N'<?xml version="1.0" encoding="utf-16" standalone="yes"?><body><de>Hello</de></body>', 2) 
            ,CONVERT(XML
            , N'<?xml version="1.0" encoding="utf-16" standalone="yes"?>
<lang>
      <de>Deutsch</de>
      <fr>Français</fr>
      <it>Ital&amp;iano</it>
      <en>English</en>
</lang>
            ' 
            , 2 
            ) AS filemeta 
) 

SELECT 
       myfilename
      ,filemeta
      --,filemeta.value('body', 'nvarchar') 
      --, filemeta.value('.', 'nvarchar(MAX)') 

      ,filemeta.value('(/lang//de/node())[1]', 'nvarchar(MAX)') AS DE
      ,filemeta.value('(/lang//fr/node())[1]', 'nvarchar(MAX)') AS FR
      ,filemeta.value('(/lang//it/node())[1]', 'nvarchar(MAX)') AS IT
      ,filemeta.value('(/lang//en/node())[1]', 'nvarchar(MAX)') AS EN
FROM CTE 
```

然后您可以通过 SQL 中的 XPath-Query 获取值，您可以将字符串变量放入

```
filemeta.value('(/lang//' + @in_language + '/node())[1]', 'nvarchar(MAX)') AS bla 
```

您可以像这样更新值：

```
UPDATE YOUR_TABLE
SET YOUR_XML_FIELD_NAME.modify('replace value of (/lang/de/text())[1] with "&quot;I am a ''value &quot;"')
WHERE id = 1 
```

你可以在哪里`/lang/de/...`替换`'.../' + @in_language + '/...'`

有点像 PostGre hstore，除了由于解析 XML 的开销（而不是从 PG hstore 中的关联数组中读取条目），它变得太慢了，而且 xml 编码使它变得太痛苦而无法使用。

* * *

方法5（根据孙悟空的推荐，你应该选择的那个）：每个“产品”表对应一个翻译表。这意味着每种语言一行，以及几个“文本”字段，因此它只需要在 N 个字段上进行 ONE（左）连接。然后您可以轻松地在“产品”表中添加一个默认字段，您可以轻松删除并重新插入翻译表，您可以创建第二个自定义翻译表（按需），您也可以删除并重新插入），您仍然拥有所有外键。

让我们举个例子来看看这个作品：

首先，创建表：

```
CREATE TABLE dbo.T_Languages
(
     Lang_ID int NOT NULL
    ,Lang_NativeName national character varying(200) NULL
    ,Lang_EnglishName national character varying(200) NULL
    ,Lang_ISO_TwoLetterName character varying(10) NULL
    ,CONSTRAINT PK_T_Languages PRIMARY KEY ( Lang_ID )
);

GO

CREATE TABLE dbo.T_Products
(
     PROD_Id int NOT NULL
    ,PROD_InternalName national character varying(255) NULL
    ,CONSTRAINT PK_T_Products PRIMARY KEY ( PROD_Id )
); 

GO

CREATE TABLE dbo.T_Products_i18n
(
     PROD_i18n_PROD_Id int NOT NULL
    ,PROD_i18n_Lang_Id int NOT NULL
    ,PROD_i18n_Text national character varying(200) NULL
    ,CONSTRAINT PK_T_Products_i18n PRIMARY KEY (PROD_i18n_PROD_Id, PROD_i18n_Lang_Id)
);

GO

-- ALTER TABLE dbo.T_Products_i18n  WITH NOCHECK ADD  CONSTRAINT FK_T_Products_i18n_T_Products FOREIGN KEY(PROD_i18n_PROD_Id)
ALTER TABLE dbo.T_Products_i18n  
    ADD CONSTRAINT FK_T_Products_i18n_T_Products 
    FOREIGN KEY(PROD_i18n_PROD_Id)
    REFERENCES dbo.T_Products (PROD_Id)
ON DELETE CASCADE 
GO

ALTER TABLE dbo.T_Products_i18n CHECK CONSTRAINT FK_T_Products_i18n_T_Products
GO

ALTER TABLE dbo.T_Products_i18n 
    ADD  CONSTRAINT FK_T_Products_i18n_T_Languages 
    FOREIGN KEY( PROD_i18n_Lang_Id )
    REFERENCES dbo.T_Languages( Lang_ID )
ON DELETE CASCADE 
GO

ALTER TABLE dbo.T_Products_i18n CHECK CONSTRAINT FK_T_Products_i18n_T_Products
GO

CREATE TABLE dbo.T_Products_i18n_Cust
(
     PROD_i18n_Cust_PROD_Id int NOT NULL
    ,PROD_i18n_Cust_Lang_Id int NOT NULL
    ,PROD_i18n_Cust_Text national character varying(200) NULL
    ,CONSTRAINT PK_T_Products_i18n_Cust PRIMARY KEY ( PROD_i18n_Cust_PROD_Id, PROD_i18n_Cust_Lang_Id )
);

GO

ALTER TABLE dbo.T_Products_i18n_Cust  
    ADD CONSTRAINT FK_T_Products_i18n_Cust_T_Languages 
    FOREIGN KEY(PROD_i18n_Cust_Lang_Id)
    REFERENCES dbo.T_Languages (Lang_ID)

ALTER TABLE dbo.T_Products_i18n_Cust CHECK CONSTRAINT FK_T_Products_i18n_Cust_T_Languages

GO

ALTER TABLE dbo.T_Products_i18n_Cust  
    ADD CONSTRAINT FK_T_Products_i18n_Cust_T_Products 
    FOREIGN KEY(PROD_i18n_Cust_PROD_Id)
REFERENCES dbo.T_Products (PROD_Id)
GO

ALTER TABLE dbo.T_Products_i18n_Cust CHECK CONSTRAINT FK_T_Products_i18n_Cust_T_Products
GO 
```

然后填写数据

```
DELETE FROM T_Languages;
INSERT INTO T_Languages (Lang_ID, Lang_NativeName, Lang_EnglishName, Lang_ISO_TwoLetterName) VALUES (1, N'English', N'English', N'EN');
INSERT INTO T_Languages (Lang_ID, Lang_NativeName, Lang_EnglishName, Lang_ISO_TwoLetterName) VALUES (2, N'Deutsch', N'German', N'DE');
INSERT INTO T_Languages (Lang_ID, Lang_NativeName, Lang_EnglishName, Lang_ISO_TwoLetterName) VALUES (3, N'Français', N'French', N'FR');
INSERT INTO T_Languages (Lang_ID, Lang_NativeName, Lang_EnglishName, Lang_ISO_TwoLetterName) VALUES (4, N'Italiano', N'Italian', N'IT');
INSERT INTO T_Languages (Lang_ID, Lang_NativeName, Lang_EnglishName, Lang_ISO_TwoLetterName) VALUES (5, N'Russki', N'Russian', N'RU');
INSERT INTO T_Languages (Lang_ID, Lang_NativeName, Lang_EnglishName, Lang_ISO_TwoLetterName) VALUES (6, N'Zhungwen', N'Chinese', N'ZH');

DELETE FROM T_Products;
INSERT INTO T_Products (PROD_Id, PROD_InternalName) VALUES (1, N'Orange Juice');
INSERT INTO T_Products (PROD_Id, PROD_InternalName) VALUES (2, N'Apple Juice');
INSERT INTO T_Products (PROD_Id, PROD_InternalName) VALUES (3, N'Banana Juice');
INSERT INTO T_Products (PROD_Id, PROD_InternalName) VALUES (4, N'Tomato Juice');
INSERT INTO T_Products (PROD_Id, PROD_InternalName) VALUES (5, N'Generic Fruit Juice');

DELETE FROM T_Products_i18n;
INSERT INTO T_Products_i18n (PROD_i18n_PROD_Id, PROD_i18n_Lang_Id, PROD_i18n_Text) VALUES (1, 1, N'Orange Juice');
INSERT INTO T_Products_i18n (PROD_i18n_PROD_Id, PROD_i18n_Lang_Id, PROD_i18n_Text) VALUES (1, 2, N'Orangensaft');
INSERT INTO T_Products_i18n (PROD_i18n_PROD_Id, PROD_i18n_Lang_Id, PROD_i18n_Text) VALUES (1, 3, N'Jus d''Orange');
INSERT INTO T_Products_i18n (PROD_i18n_PROD_Id, PROD_i18n_Lang_Id, PROD_i18n_Text) VALUES (1, 4, N'Succo d''arancia');
INSERT INTO T_Products_i18n (PROD_i18n_PROD_Id, PROD_i18n_Lang_Id, PROD_i18n_Text) VALUES (2, 1, N'Apple Juice');
INSERT INTO T_Products_i18n (PROD_i18n_PROD_Id, PROD_i18n_Lang_Id, PROD_i18n_Text) VALUES (2, 2, N'Apfelsaft');

DELETE FROM T_Products_i18n_Cust;
INSERT INTO T_Products_i18n_Cust (PROD_i18n_Cust_PROD_Id, PROD_i18n_Cust_Lang_Id, PROD_i18n_Cust_Text) VALUES (1, 2, N'Orangäsaft'); -- Swiss German, if you wonder 
```

然后查询数据：

```
DECLARE @__in_lang_id int
SET @__in_lang_id = (
    SELECT Lang_ID
    FROM T_Languages
    WHERE Lang_ISO_TwoLetterName = 'DE'
)

SELECT 
     PROD_Id 
    ,PROD_InternalName -- Default Fallback field (internal name/one language only setup), just in ResultSet for demo-purposes
    ,PROD_i18n_Text  -- Translation text, just in ResultSet for demo-purposes
    ,PROD_i18n_Cust_Text  -- Custom Translations (e.g. per customer) Just in ResultSet for demo-purposes
    ,COALESCE(PROD_i18n_Cust_Text, PROD_i18n_Text, PROD_InternalName) AS DisplayText -- What we actually want to show 
FROM T_Products 

LEFT JOIN T_Products_i18n 
    ON PROD_i18n_PROD_Id = T_Products.PROD_Id 
    AND PROD_i18n_Lang_Id = @__in_lang_id 

LEFT JOIN T_Products_i18n_Cust 
    ON PROD_i18n_Cust_PROD_Id = T_Products.PROD_Id
    AND PROD_i18n_Cust_Lang_Id = @__in_lang_id 
```

如果你很懒，那么你也可以使用 ISO-TwoLetterName（'DE'、'EN' 等）作为语言表的主键，这样你就不必查找语言 id。但是如果你这样做，你可能想改用[IETF 语言标签](http://www.i18nguy.com/unicode/language-identifiers.html)，这样会更好，因为你会得到 de-CH 和 de-DE，这实际上是不一样的正字法（双 s 而不是 ß 到处） ，尽管它是相同的基础语言。这只是一个对您可能很重要的小细节，特别是考虑到 en-US 和 en-GB/en-CA/en-AU 或 fr-FR/fr-CA 有类似的问题。
Quote: 我们不需要它，我们只用英文做我们的软件。
答案：是的 - 但哪一个？？

无论如何，如果您使用整数 ID，您会很灵活，并且可以在以后随时更改您的方法。
而且您应该使用该整数，因为没有什么比拙劣的 Db 设计更令人讨厌、破坏性和麻烦的了。

另见[RFC 5646](https://www.ietf.org/rfc/rfc5646.txt)、[ISO 639-2](http://www.loc.gov/standards/iso639-2/php/code_list.php)、

而且，如果您仍然说“我们”*只*为“仅**一种**文化”（通常像 en-US）申请，那么我不需要那个额外的整数，这将是一个很好的时间和地点来提及[IANA 语言标签](http://www.iana.org/assignments/language-tags/language-tags.xhtml)，不是吗？
因为他们是这样的：

```
de-DE-1901
de-DE-1996 
```

和

```
de-CH-1901
de-CH-1996 
```

（1996 年进行了正字法改革……）如果拼写错误，请尝试在字典中查找单词；这在处理法律和公共服务门户的应用程序中变得非常重要。
更重要的是，有些地区正在从西里尔字母变为拉丁字母，这可能比一些晦涩的正字法改革带来的表面上的麻烦更麻烦，这就是为什么这也可能是一个重要的考虑因素，具体取决于你住在哪个国家。一种或另一种方式，最好有那个整数，以防万一......

**编辑：**
并在`ON DELETE CASCADE` 之后添加

```
REFERENCES dbo.T_Products( PROD_Id ) 
```

您可以简单地说：`DELETE FROM T_Products`，并且不会违反外键。

至于整理，我会这样做：

A) 拥有自己的 DAL
B) 在语言表中保存所需的排序规则名称

您可能希望将排序规则放在他们自己的表中，例如：

```
SELECT * FROM sys.fn_helpcollations() 
WHERE description LIKE '%insensitive%'
AND name LIKE '%german%' 
```

C）在您的 auth.user.language 信息中提供排序规则名称

D）这样写你的SQL：

```
SELECT 
    COALESCE(GRP_Name_i18n_cust, GRP_Name_i18n, GRP_Name) AS GroupName 
FROM T_Groups 

ORDER BY GroupName COLLATE {#COLLATION} 
```

E) 然后，您可以在 DAL 中执行此操作：

```
cmd.CommandText = cmd.CommandText.Replace("{#COLLATION}", auth.user.language.collation) 
```

然后它将为您提供这个完美组合的 SQL 查询

```
SELECT 
    COALESCE(GRP_Name_i18n_cust, GRP_Name_i18n, GRP_Name) AS GroupName 
FROM T_Groups 

ORDER BY GroupName COLLATE German_PhoneBook_CI_AI 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2008-11-25T09:32:42.470

第三种选择是最好的，原因如下：

*   不需要为新语言更改数据库架构（从而限制代码更改）
*   对于未实现的语言或特定项目的翻译不需要大量空间
*   提供最大的灵活性
*   你不会得到稀疏的表
*   您不必担心空键并检查您显示的是现有翻译而不是某些空条目。
*   如果您更改或扩展您的数据库以包含其他可翻译的项目/事物/等，您可以使用相同的表和系统 - 这与其余数据非常分离。

-亚当

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-08-12T07:22:08.547

看看这个例子：

```
PRODUCTS (
    id   
    price
    created_at
)

LANGUAGES (
    id   
    title
)

TRANSLATIONS (
    id           (// id of translation, UNIQUE)
    language_id  (// id of desired language)
    table_name   (// any table, in this case PRODUCTS)
    item_id      (// id of item in PRODUCTS)
    field_name   (// fields to be translated)
    translation  (// translation text goes here)
) 
```

我认为没有必要解释，结构描述了它自己。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-11-25T09:37:47.047

我通常会采用这种方法（不是实际的 sql），这与您的最后一个选项相对应。

```
table Product
productid INT PK, price DECIMAL, translationid INT FK

table Translation
translationid INT PK

table TranslationItem
translationitemid INT PK, translationid INT FK, text VARCHAR, languagecode CHAR(2)

view ProductView
select * from Product
inner join Translation
inner join TranslationItem
where languagecode='en' 
```

因为将所有可翻译的文本集中在一个位置使维护变得更加容易。有时翻译会外包给翻译局，这样您就可以只向他们发送一个大的导出文件，然后再轻松地将其导入回来。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-11-25T09:59:32.013

在了解技术细节和解决方案之前，您应该停下来问一些有关需求的问题。答案会对技术解决方案产生巨大影响。此类问题的示例如下：
- 是否会一直使用所有语言？
- 谁以及何时将使用不同的语言版本填充列？
- 当用户需要某种语言的文本而系统中没有时会发生什么？
- 只有文本需要本地化或还有其他项目（例如 PRICE 可以存储在 $ 和 € 中，因为它们可能不同）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-06T18:00:39.017

我一直在寻找一些本地化技巧并找到了这个主题。我想知道为什么要使用它：

```
CREATE TABLE T_TRANSLATION (
   TRANSLATION_ID
) 
```

所以你会得到类似 user39603 的建议：

```
table Product
productid INT PK, price DECIMAL, translationid INT FK

table Translation
translationid INT PK

table TranslationItem
translationitemid INT PK, translationid INT FK, text VARCHAR, languagecode CHAR(2)

view ProductView
select * from Product
inner join Translation
inner join TranslationItem
where languagecode='en' 
```

你不能把表格翻译出来，这样你就可以得到这个：

```
 table Product
    productid INT PK, price DECIMAL

    table ProductItem
    productitemid INT PK, productid INT FK, text VARCHAR, languagecode CHAR(2)

    view ProductView
    select * from Product
    inner join ProductItem
    where languagecode='en' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-21T20:35:08.347

我同意随机化器。我不明白你为什么需要一个表格“翻译”。

我认为，这就足够了：

```
TA_product: ProductID, ProductPrice
TA_Language: LanguageID, Language
TA_Productname: ProductnameID, ProductID, LanguageID, ProductName 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-13T16:03:31.027

下面的方法可行吗？假设您有超过 1 列需要翻译的表格。因此，对于产品，您可以同时拥有需要翻译的产品名称和产品描述。你能做到以下几点：

```
CREATE TABLE translation_entry (
      translation_id        int,
      language_id           int,
      table_name            nvarchar(200),
      table_column_name     nvarchar(200),
      table_row_id          bigint,
      translated_text       ntext
    )

    CREATE TABLE translation_language (
      id int,
      language_code CHAR(2)
    ) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-23T03:50:22.867

本[文档](https://www.soluling.com/Help/Database/Index.htm)描述了可能的解决方案以及每种方法的优缺点。我更喜欢“行本地化”，因为您不必在添加新语言时修改数据库架构。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-07T21:38:14.267

您需要记住，当您创建多语言数据库时，您会从产品表中删除名称或描述等字段，并将其移动到已翻译资源中。

翻译后的资源可能是另一个表，就像在我的示例中一样，它旨在与 SQL 视图一起使用，以实现查询的简单性和底层应用程序的友好开发

[![多语言数据库](https://i.stack.imgur.com/fEqIK.png)](https://i.stack.imgur.com/fEqIK.png)

我将 LabelTranslations 分开，因为这是一个包含网页上字段标签的全局翻译的表格。您可以随意称呼它，它们是无国籍的，不依赖于特定的产品或类别。

ProductTranslations 的 CategoryTranslations 是有状态的，这意味着“名称”的描述符将是实际的产品名称。

与简单的 SQL 视图相比，使用物化视图可以获得更好的性能（存储空间的成本和底层应用程序开发的更多精力来刷新它们），或者如果您愿意，也可以使用更繁重的 SQL 视图。

在**Postgres**中创建类别物化视图：

```
CREATE MATERIALIZED VIEW VCategories AS (
    SELECT cat.id, lng.iso_639_1_code, ct.descriptor, ct.value
    FROM Categories cat
    JOIN CategoryTranslations ct ON ct.category_id = cat.id
    JOIN Languages lng ON lng.id = ct.language_id
); 
```

查询 ID 为 120 的类别的每个翻译

```
SELECT * FROM VCategories WHERE id = 120 AND iso_639_1_code = 'en' 
```

我觉得使用应用程序的代码很方便，您可以编写一个非常简单的代码来查询翻译和搜索记录

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-03T05:34:02.687

“哪个最好”根据项目情况而定。第一个易于选择和维护，并且性能最好，因为它在选择实体时不需要连接表。如果您确认您的项目只支持2或3种语言，并且不会增加，您可以使用它。

第二个很好，但很难理解和维护。而且性能比第一个差。

最后一个在可扩展性方面很好，但在性能方面很差。T_TRANSLATION_ENTRY 表会越来越大，当您想从某些表中检索实体列表时，这很糟糕。

# javascript - 如何使用 Javascript 构建查询字符串

> ID：316781
> 
> 赞同：219
> 
> 时间：2008-11-25T09:13:34.960
> 
> 标签：javascript, string, forms, get

只是想知道是否有任何内置到 Javascript 中的东西可以接受表单并返回查询参数，例如：`"var1=value&var2=value2&arr[]=foo&arr[]=bar..."`

多年来我一直在想这个。

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2018-04-06T22:37:46.227

[URLSearchParams API](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)在所有现代浏览器中都可用。例如：

```
const params = new URLSearchParams({
  var1: "value",
  var2: "value2",
  arr: "foo",
});
console.log(params.toString());
//Prints "var1=value&var2=value2&arr=foo"
```

* * *

## 回答 #2

> 赞同：258
> 
> 时间：2015-12-10T18:44:08.433

2k20 更新：使用[Josh 的](https://stackoverflow.com/a/49701878/2750743)解决方案和[URLSearchParams.toString()](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/toString)。

老答案：

* * *

没有 jQuery

```
var params = {
    parameter1: 'value_1',
    parameter2: 'value 2',
    parameter3: 'value&3' 
};

var esc = encodeURIComponent;
var query = Object.keys(params)
    .map(k => esc(k) + '=' + esc(params[k]))
    .join('&'); 
```

对于不支持需要 ES5 的箭头函数语法的浏览器，将`.map...`行更改为

```
 .map(function(k) {return esc(k) + '=' + esc(params[k]);}) 
```

* * *

## 回答 #3

> 赞同：142
> 
> 时间：2012-08-31T13:40:39.310

如果您使用 jQuery，您可能需要查看`jQuery.param()` [http://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/)

例子：

```
var params = {
    parameter1: 'value1',
    parameter2: 'value2',
    parameter3: 'value3' 
};
var query = $.param(params);
console.log(query); 
```

这将打印出：

```
parameter1=value1&parameter2=value2&parameter3=value3 
```

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2011-03-17T14:45:44.987

这不会直接回答您的问题，但这是一个通用函数，它将创建一个包含查询字符串参数的 URL。参数（名称和值）被安全地转义以包含在 URL 中。

```
function buildUrl(url, parameters){
  var qs = "";
  for(var key in parameters) {
    var value = parameters[key];
    qs += encodeURIComponent(key) + "=" + encodeURIComponent(value) + "&";
  }
  if (qs.length > 0){
    qs = qs.substring(0, qs.length-1); //chop off last "&"
    url = url + "?" + qs;
  }
  return url;
}

// example:
var url = "http://example.com/";

var parameters = {
  name: "George Washington",
  dob: "17320222"
};

console.log(buildUrl(url, parameters));
// => http://www.example.com/?name=George%20Washington&dob=17320222 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2020-10-04T00:40:12.430

创建一个`URL`对象并将值附加到`seachParameters`

```
let stringUrl = "http://www.google.com/search";
let url = new URL(stringUrl);
let params = url.searchParams;
params.append("q", "This is seach query");

console.log(url.toString()); 
```

输出将是

```
http://www.google.com/search?q=This+is+seach+query 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2018-05-20T20:04:59.613

## ES2017 (ES8)

利用[`Object.entries()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)，它返回一个对象`[key, value]`对的数组。例如，因为`{a: 1, b: 2}`它会返回`[['a', 1], ['b', 2]]`. 只有 IE 不支持（也不会）。

### 代码：

```
const buildURLQuery = obj =>
      Object.entries(obj)
            .map(pair => pair.map(encodeURIComponent).join('='))
            .join('&'); 
```

### 例子：

```
buildURLQuery({name: 'John', gender: 'male'}); 
```

### 结果：

```
"name=John&gender=male" 
```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2012-10-10T10:02:00.563

使用 jQuery，您可以通过`$.param`

```
$.param({ action: 'ship', order_id: 123, fees: ['f1', 'f2'], 'label': 'a demo' })

// -> "action=ship&order_id=123&fees%5B%5D=f1&fees%5B%5D=f2&label=a+demo" 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2017-03-02T22:43:05.653

[查询字符串](https://nodejs.org/api/querystring.html)可以提供帮助。

这样你就可以

```
const querystring = require('querystring')

url += '?' + querystring.stringify(parameters) 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2008-11-25T09:30:20.527

不，我不认为标准 JavaScript 内置了该功能，但 Prototype JS 具有该功能（当然大多数其他 JS 框架也有，但我不知道它们），他们称之为[serialize](http://www.prototypejs.org/api/form/serialize)。

我可以推荐 Prototype JS，它工作得很好。我真正注意到的唯一缺点是它的大小（几百 kb）和范围（ajax、dom 等的大量代码）。因此，如果您只想要一个表单序列化程序，那就太矫枉过正了，严格来说，如果您只想要它的 Ajax 功能（主要是我使用它的用途），那就太矫枉过正了。除非你很小心，否则你可能会发现它做了太多的“魔法”（比如使用 Prototype JS 函数扩展它接触的每个 dom 元素只是为了找到元素），这使得它在极端情况下变得缓慢。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2008-11-25T11:04:24.190

如果您不想使用库，这应该涵盖大多数/所有相同的表单元素类型。

```
function serialize(form) {
  if (!form || !form.elements) return;

  var serial = [], i, j, first;
  var add = function (name, value) {
    serial.push(encodeURIComponent(name) + '=' + encodeURIComponent(value));
  }

  var elems = form.elements;
  for (i = 0; i < elems.length; i += 1, first = false) {
    if (elems[i].name.length > 0) { /* don't include unnamed elements */
      switch (elems[i].type) {
        case 'select-one': first = true;
        case 'select-multiple':
          for (j = 0; j < elems[i].options.length; j += 1)
            if (elems[i].options[j].selected) {
              add(elems[i].name, elems[i].options[j].value);
              if (first) break; /* stop searching for select-one */
            }
          break;
        case 'checkbox':
        case 'radio': if (!elems[i].checked) break; /* else continue */
        default: add(elems[i].name, elems[i].value); break;
      }
    }
  }

  return serial.join('&');
} 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-10-09T13:51:00.630

`FormData`现在，您可以`URLSearchParams`在不需要循环任何东西的情况下做到这一点。

```
const formData = new FormData(form);
const searchParams = new URLSearchParams(formData);
const queryString = searchParams.toString(); 
```

不过，较旧的浏览器将需要一个 polyfill。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-04-02T12:52:02.177

可能有点多余，但我发现的最干净的方式建立在此处的一些答案之上：

```
const params: {
   key1: 'value1',
   key2: 'value2',
   key3: 'value3',
}

const esc = encodeURIComponent;
const query = Object.keys(params)
  .map(k => esc(k) + '=' + esc(params[k]))
  .join('&');

return fetch('my-url', {
  method: 'POST',
  headers: {'Content-Type': 'application/x-www-form-urlencoded'},
  body: query,
}) 
```

[资源](https://github.com/github/fetch/issues/256#issuecomment-241613757)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-11-25T09:28:59.670

我自己并不完全确定，我记得看到 jQuery 在一定程度上做到了，但它根本不处理分层记录，更不用说以 php 友好的方式了。

我确实知道的一件事是，在构建 URL 并将产品粘贴到 dom 中时，不要只使用 string-glue 来执行此操作，否则您将自己打开一个方便的分页器。

例如，某些广告软件会从运行您的闪存的任何程序中嵌入版本字符串。当它的 adobes 通用简单字符串时这很好，但是，这非常幼稚，并且对于安装了 Gnash 的人来说会陷入尴尬的混乱，因为 gnash 的版本字符串恰好包含完整的 GPL 版权许可，并带有 URL和 <a href> 标签。在您的字符串胶水广告客户生成器中使用它会导致页面打开并且在 dom 中出现不平衡的 HTML。

这个故事的主旨：

```
 var foo = document.createElement("elementnamehere"); 
   foo.attribute = allUserSpecifiedDataConsideredDangerousHere; 
   somenode.appendChild(foo); 
```

不是：

```
 document.write("<elementnamehere attribute=\"" 
        + ilovebrokenwebsites 
        + "\">" 
        + stringdata 
        + "</elementnamehere>"); 
```

[[谷歌需要学习这个技巧。我试图报告这个问题，他们似乎不在乎。]]

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-01-05T14:48:33.347

您实际上并不需要使用 Prototype 来执行此操作的表单。只需使用[Object.toQueryString 函数](http://www.prototypejs.org/api/object/toquerystring)：

```
Object.toQueryString({ action: 'ship', order_id: 123, fees: ['f1', 'f2'], 'label': 'a demo' })

// -> 'action=ship&order_id=123&fees=f1&fees=f2&label=a%20demo' 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-11-25T14:03:37.150

对于我们这些喜欢 jQuery 的人，您可以使用表单插件：[http://plugins.jquery.com/project/form](http://plugins.jquery.com/project/form)，其中包含一个 formSerialize 方法。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-11-25T09:52:00.967

正如 Stein 所说，您可以使用来自[http://www.prototypejs.org](http://www.prototypejs.org)的原型 javascript 库。包含 JS 就很简单了，`$('formName').serialize()`会返回你想要的！

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-02-18T11:12:31.730

我知道这是很晚的答案，但效果很好......

```
var obj = {
a:"a",
b:"b"
}

Object.entries(obj).map(([key, val])=>`${key}=${val}`).join("&"); 
```

注意：object.entries 将返回键值对

> 上面一行的输出将是**a=a&b=b**

希望它可以帮助某人。

快乐的编码...

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-04-15T08:11:34.467

这些答案非常有帮助，但我想添加另一个答案，它可以帮助您构建完整的 URL。这可以帮助您连接base `url`、`path`和.`hash``parameters`

```
var url = buildUrl('http://mywebsite.com', {
        path: 'about',
        hash: 'contact',
        queryParams: {
            'var1': 'value',
            'var2': 'value2',
            'arr[]' : 'foo'
        }
    });
    console.log(url); 
```

您可以通过 npm [https://www.npmjs.com/package/build-url下载](https://www.npmjs.com/package/build-url)

演示：

```
;(function () {
  'use strict';

  var root = this;
  var previousBuildUrl = root.buildUrl;

  var buildUrl = function (url, options) {
    var queryString = [];
    var key;
    var builtUrl;
    var caseChange; 

    // 'lowerCase' parameter default = false,  
    if (options && options.lowerCase) {
        caseChange = !!options.lowerCase;
    } else {
        caseChange = false;
    }

    if (url === null) {
      builtUrl = '';
    } else if (typeof(url) === 'object') {
      builtUrl = '';
      options = url;
    } else {
      builtUrl = url;
    }

    if(builtUrl && builtUrl[builtUrl.length - 1] === '/') {
      builtUrl = builtUrl.slice(0, -1);
    } 

    if (options) {
      if (options.path) {
          var localVar = String(options.path).trim(); 
          if (caseChange) {
            localVar = localVar.toLowerCase();
          }
          if (localVar.indexOf('/') === 0) {
              builtUrl += localVar;
          } else {
            builtUrl += '/' + localVar;
          }
      }

      if (options.queryParams) {
        for (key in options.queryParams) {
          if (options.queryParams.hasOwnProperty(key) && options.queryParams[key] !== void 0) {
            var encodedParam;
            if (options.disableCSV && Array.isArray(options.queryParams[key]) && options.queryParams[key].length) {
              for(var i = 0; i < options.queryParams[key].length; i++) {
                encodedParam = encodeURIComponent(String(options.queryParams[key][i]).trim());
                queryString.push(key + '=' + encodedParam);
              }
            } else {              
              if (caseChange) {
                encodedParam = encodeURIComponent(String(options.queryParams[key]).trim().toLowerCase());
              }
              else {
                encodedParam = encodeURIComponent(String(options.queryParams[key]).trim());
              }
              queryString.push(key + '=' + encodedParam);
            }
          }
        }
        builtUrl += '?' + queryString.join('&');
      }

      if (options.hash) {
        if(caseChange)
            builtUrl += '#' + String(options.hash).trim().toLowerCase();
        else
            builtUrl += '#' + String(options.hash).trim();
      }
    } 
    return builtUrl;
  };

  buildUrl.noConflict = function () {
    root.buildUrl = previousBuildUrl;
    return buildUrl;
  };

  if (typeof(exports) !== 'undefined') {
    if (typeof(module) !== 'undefined' && module.exports) {
      exports = module.exports = buildUrl;
    }
    exports.buildUrl = buildUrl;
  } else {
    root.buildUrl = buildUrl;
  }
}).call(this);

var url = buildUrl('http://mywebsite.com', {
		path: 'about',
		hash: 'contact',
		queryParams: {
			'var1': 'value',
			'var2': 'value2',
			'arr[]' : 'foo'
		}
	});
	console.log(url);
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-10-06T20:03:29.917

API 是一个很好的[`UrlSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)建议，但我不敢相信没有人提到非常有用的`.get`方法`.set`。它们可用于操作查询字符串，不仅非常易于使用，还可以解决您可能遇到的许多问题。例如，就我而言，我想构建一个没有重复键的查询字符串。`.set`为您解决这个问题。引用[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams#methods)：

> **URLSearchParams.set()** 将与给定搜索参数关联的值设置为给定值。如果有多个值，则删除其他值。

示例（[来自 MDN](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/set#examples)）：

```
let url = new URL('https://example.com?foo=1&bar=2');
let params = new URLSearchParams(url.search);

// Add a third parameter.
params.set('baz', 3);
params.toString(); // "foo=1&bar=2&baz=3" 
```

替代的，更短的语法：

```
let url = new URL('https://example.com?foo=1&bar=2');

// Add a third parameter.
url.searchParams.set('baz', 3);
params.toString(); // "foo=1&bar=2&baz=3" 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-08-12T23:24:17.543

回答您的问题可能为时已晚。
我有同样的问题，我不想继续附加字符串来创建 URL。所以，我开始使用 $.param，正如[techhouse](https://stackoverflow.com/users/1040452/techouse)解释的那样。
我还找到了一个[URI.js](http://medialize.github.io/URI.js/)库，可以轻松地为您创建 URL。有几个示例可以帮助您：[URI.js 文档](http://medialize.github.io/URI.js/docs.html)。
这是其中之一：

```
var uri = new URI("?hello=world");
uri.setSearch("hello", "mars"); // returns the URI instance for chaining
// uri == "?hello=mars"

uri.setSearch({ foo: "bar", goodbye : ["world", "mars"] });
// uri == "?hello=mars&foo=bar&goodbye=world&goodbye=mars"

uri.setSearch("goodbye", "sun");
// uri == "?hello=mars&foo=bar&goodbye=sun"

// CAUTION: beware of arrays, the following are not quite the same
// If you're dealing with PHP, you probably want the latter…
uri.setSearch("foo", ["bar", "baz"]);
uri.setSearch("foo[]", ["bar", "baz"]);` 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-07-10T06:21:01.147

```
var params = { width:1680, height:1050 };
var str = jQuery.param( params );

console.log(str)
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

# jsf - JSF/Seam 中的动态 ID

> ID：316790
> 
> 赞同：5
> 
> 时间：2008-11-25T09:17:37.557
> 
> 标签：jsf, seam

我正在处理的 Seam 应用程序遇到了一点问题，我想知道是否有人知道解决方法。我的应用程序中有一个表单，它使用 AJAX 根据下拉框中的项目显示某些输入框。除了在我的输入框中设置 ID 之外，该代码工作正常。看起来 JSF 不允许我通过变量设置 ID。标签中的“for”等其他属性很好。这是一些解释我的意思的代码：

```
<ui:repeat value="#{serviceHome.instance.serviceSettings}" var="currSetting" >
  <li>
    <!-- Imagine the below works out as "settingABC" -->
    <c:set var="labelKey" value="setting#{jsfUtils.removeWhitespace(currSetting.key.name)}" />

    <!-- Labelkey is correctly added into this input so for = "settingABC" -->
    <h:outputLabel for="#{labelKey}" styleClass="required generated" value="#{currSetting.key.name}:"/>

    <s:decorate styleClass="errorwrapper">

      <!-- Labelkey ISN'T correctly added into this input. Instead we just get "setting" -->
      <h:inputText id="#{labelKey}" value="#{currSetting.value}"/>

      <a4j:outputPanel ajaxRendered="true">
        <h:message for="#{labelKey}" styleClass="errormessage" />
      </a4j:outputPanel>
    </s:decorate>
  </li>
</ui:repeat> 
```

有谁知道我怎么能克服这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-28T18:32:04.460

你明白他们为什么不让你设置 ID 了吧？JSF 接管了 id 创建，因为您处于重复的组件循环中，如果它们让您只设置 id，您最终会得到重复的 ID，这对您没有帮助。

在不知道为什么要显式设置 ID 的情况下，很难为您提供解决方法。如果是 JavaScript，你可以按照 Grant Wagner 的建议去做，让 JSF 给你它作为 id 的内容。您还可以查看生成的 HTML 并查看 id 的格式。JSF 通常使用

```
"form_id:loop_id:loop_index:component_id" 
```

作为它为表单/重复中的组件生成的 id。您必须确定并为您的表单和 ui:repeat 标签提供 id 以了解它们是什么。

好的，你回答说你想在循环中为特定的 inputText 有一个 h:message 标记，这很容易。

```
<h:inputText id="myInput" .... />
<h:message for="myInput" ... /> 
```

现在，为输入生成的消息将显示在消息中，并且 JSF 将破坏“for”属性（尽管它不会生成到 HTML），就像它会破坏 inputText 中的“id”属性一样，以便它们匹配。

您甚至可以在处理程序代码中将您的 OWN 消息转到特定的 h:message，但是您需要使用对 clientId 的调用来获取消息的目标，给定支持 bean（而不是值支持 bean）有问题的组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T19:07:15.540

我假设您想控制输入组件的 ID，以便稍后在 Javascript 中引用它？

由于您无法通过表达式设置 ID，因此我这样做：

```
<h:inputText id="whatever" value="..." /> 
```

然后在后面的代码中：

```
<script type="text/javascript">
var theElement = document.getElementById('<h:outputText value="#{pagecode.whateverClientId}"/ >');
...
</script> 
```

在页面代码中：

```
protected HtmlInputText getWhatever() {
    if (whatever == null) {
        whatever = (HtmlInputText) findComponentInRoot("whatever");
    }
}

public String getWhateverClientId() {
    return getWhatever().getClientId(getFacesContext());
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-19T06:45:57.070

你试过使用facelets吗？

这将允许您评估自己的 id，即：

me:labelKeyThingo 然后可以使用 id=#{labelKey} 来制作一个唯一的标签。这是我的错误代码中名为**m:textPassword**的示例 facelet ：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jstl/core" xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

   <ui:composition>

    <c:set var="styleClass" value="formPrompt" />
    <c:set var="requiredLabel" value="" />
    <c:choose>
        <c:when test="${required=='true'}">

            <c:set var="required" value="true" />
            <c:set var="styleClass" value="formRequiredPrompt" />
            <c:set var="requiredLabel" value="*" />
        </c:when>
    </c:choose>

    <h:panelGroup id="#{id}_formRowTemplateLabel_panelGroup">
        <h:outputLabel for="#{id}" styleClass="#{styleClass}" id="#{id}_formRowTemplate_outPut"
            value="#{label}" />
        <c:if test="${required == 'true'}">
            <h:outputText value="#{requiredLabel}" styleClass="formRequiredPromptAsterix"></h:outputText>
        </c:if>
    </h:panelGroup>

    <h:panelGroup id="#{id}_textPasswordTemplate_panelGroup">
        <h:inputSecret required="${required}" id="#{id}" value="#{property}"
            styleClass="formText">

            <f:validator validatorId="Maserati.Password" />
            <f:validateLength maximum="16" minimum="8" />
            <ui:insert name="additionalTags"></ui:insert>
        </h:inputSecret>

        <h:message styleClass="formErrorMsg" id="#{id}_textPasswordTemplate_msg" for="#{id}" />
    </h:panelGroup>

   </ui:composition>

   </html> 
```

它是这样使用的：

```
 <m:textPassword id="password" label="#{msgs.passwordPrompt}"
 property="#{individualApplicationMBean.password}"
 required="true" maxlength="16" /> 
```

# javascript - 在 html 中嵌入 flash 的最佳方法

> ID：316807
> 
> 赞同：8
> 
> 时间：2008-11-25T09:24:36.903
> 
> 标签：javascript, html, flash, embed

html中嵌入flash的方法太多了，哪种方法最好？要求是：

*   跨浏览器支持
*   支持替代内容（如果浏览器不支持 Flash）
*   可能需要特定版本的 Flash 播放器

我一直在阅读[SWFobject](http://code.google.com/p/swfobject/wiki/documentation)，有人使用过/测试过吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-25T09:27:17.163

在我从事的一个项目中，我们使用 SWFobject，它的作用就像一个魅力，它允许您检查特定版本并在不支持 Flash 时显示替代内容。

```
var fn = function() {
    if(swfobject.hasFlashPlayerVersion("9.0.115"))
    {
        var att = { data:"flash.swf", width:"y", height:"x" };
        var par = { menu: "false", flashvars: "" };
        signUp = swfobject.createSWF(att, par);
    }
}
swfobject.addDomLoadEvent(fn); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-25T10:56:42.553

我强烈建议使用[flashembed](http://flowplayer.org/tools/flash-embed.html)。它支持您需要的一切以及更多功能，而且使用起来并不复杂。它最初是为嵌入[flowplayer](http://flowplayer.org/)而开发的，我也可以推荐它，但它适用于任何 flash 文件。

我如何使用它的一个例子：

```
flashembed("frontPageFlash",
    {
        src: "img/flash/FrontPage.swf",
        width: "480",
        height: "600",
        bgcolor: "#ebebeb",
        version: [9,0],
        expressInstall:'scripts/expressinstall.swf'
    },{
        head1: "<%= frontPageFlashHead1 %>",
        head2: "<%= frontPageFlashHead2 %>",
        pitch1: "<%= frontPageFlashPitch1 %>",
        pitch2: "<%= frontPageFlashPitch2 %>"
    }
); 
```

它嵌入的地方我简单地说：

```
<div id="frontPageFlash"></div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T09:29:13.993

是的，我们在我们的网站上使用它来检测 Flash，它工作得非常好，避免了您通常必须单击以激活 IE 中的 Flash 控件的问题。我们已经在多种操作系统（Windows XP、Windows Vista、Windows Server 2003、Windows Server 2008、Mac OSX、Linux）上的多种浏览器（不同版本的 IE、Firefox、Opera、Safari、Chrome）中对其进行了测试已经正确设置了它，它在所有方面都能完美运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-29T18:01:36.320

我自己使用 SWFObject，结合 <embed> 和 <object> 标签。我包含 HTML 嵌入的原因是 SWFObject 和 flashembed 依赖 Javascript 来更新 DOM。并非每个安装了 Flash 的用户都启用了 Javascript。

# .net - 如何在 ListView 中回收图像空间？

> ID：316808
> 
> 赞同：0
> 
> 时间：2008-11-25T09:24:56.793
> 
> 标签：.net, winforms, listview

环境：VS 2008、.NET 2.0、WinForms

我在平铺模式下有一个列表视图。某些项目具有关联的图像。有些没有。

当用户单击某些控件时，内容（列表视图项）通常会更新。发生这种情况时，有时似乎所有新项目都没有图像。在这种情况下，我想摆脱为图像保留的项目左侧的空白空间。我尝试了以下伪代码来暂时摆脱图像列表

```
list.Items.Clear();
FillList();
list.LargeImageList= (none of the items has image) ? null : MyImageList; 
```

但它不起作用：空的空间仍然存在。我也尝试重新绘制控件，但无济于事。

[替代文字 http://apptranslator.com/_so/so_list1.jpg](http://apptranslator.com/_so/so_list1.jpg) [替代文字 http://apptranslator.com/_so/so_list2.jpg](http://apptranslator.com/_so/so_list2.jpg) [替代文字 http://apptranslator.com/_so/so_list3.jpg](http://apptranslator.com/_so/so_list3.jpg)

左：带有图像的列表。

中间：没有图像的列表。图像空间可见。

对：当没有图像时，我希望它是怎样的。

编辑：我也做了这个测试：不要在设计器中分配图像列表。如果第一个显示不包含任何图像，那么我会得到预期的结果。然后我单击以显示图像（我得到它们）。我再次单击以返回无图像选择：图像空间不会消失。

另外，Hath，不，我不使用小图像或状态图像。只有大图。

我能做些什么？TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T12:59:20.743

你确定吗？我已经让它在这个测试用例中工作了：

```
using System;
using System.Windows.Forms;
public class MainForm : Form
{
    private System.ComponentModel.IContainer components = null;
    private System.Windows.Forms.ListView listView;
    private System.Windows.Forms.ImageList emptySmallImageList;
    private System.Windows.Forms.ImageList largeImageList;
    private System.Windows.Forms.Button imageListSmallButton;
    private System.Windows.Forms.Button imageListLargeButton;

    public MainForm()
    {
        InitializeComponent();
    }

    private void OnImageListSmallButtonClick(object sender, EventArgs e)
    {
        this.listView.LargeImageList = emptySmallImageList;       
    }

    private void OnImageListLargeButtonClick(object sender, EventArgs e)
    {
        this.listView.LargeImageList = largeImageList;
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
        this.components = new System.ComponentModel.Container();
        System.Windows.Forms.ListViewItem listViewItem5 = new System.Windows.Forms.ListViewItem("fgsdfg");
        System.Windows.Forms.ListViewItem listViewItem6 = new System.Windows.Forms.ListViewItem("sdfgsdfg");
        System.Windows.Forms.ListViewItem listViewItem7 = new System.Windows.Forms.ListViewItem("sdfgsdfgsdfg");
        System.Windows.Forms.ListViewItem listViewItem8 = new System.Windows.Forms.ListViewItem("sdfgsdfg");
        this.listView = new System.Windows.Forms.ListView();
        this.largeImageList = new System.Windows.Forms.ImageList(this.components);
        this.emptySmallImageList = new System.Windows.Forms.ImageList(this.components);
        this.imageListSmallButton = new System.Windows.Forms.Button();
        this.imageListLargeButton = new System.Windows.Forms.Button();
        this.SuspendLayout();
        // 
        // listView
        // 
        this.listView.Dock = System.Windows.Forms.DockStyle.Fill;
        this.listView.Items.AddRange(new System.Windows.Forms.ListViewItem[] {
        listViewItem5,
        listViewItem6,
        listViewItem7,
        listViewItem8});
        this.listView.LargeImageList = this.largeImageList;
        this.listView.Location = new System.Drawing.Point(0, 0);
        this.listView.Name = "listView";
        this.listView.Size = new System.Drawing.Size(292, 266);
        this.listView.TabIndex = 0;
        this.listView.UseCompatibleStateImageBehavior = false;
        this.listView.View = System.Windows.Forms.View.Tile;
        // 
        // largeImageList
        // 
        this.largeImageList.ColorDepth = System.Windows.Forms.ColorDepth.Depth8Bit;
        this.largeImageList.ImageSize = new System.Drawing.Size(32, 32);
        this.largeImageList.TransparentColor = System.Drawing.Color.Transparent;
        // 
        // emptySmallImageList
        // 
        this.emptySmallImageList.ColorDepth = System.Windows.Forms.ColorDepth.Depth8Bit;
        this.emptySmallImageList.ImageSize = new System.Drawing.Size(1, 1);
        this.emptySmallImageList.TransparentColor = System.Drawing.Color.Transparent;
        // 
        // imageListSmallButton
        // 
        this.imageListSmallButton.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Right)));
        this.imageListSmallButton.Location = new System.Drawing.Point(175, 12);
        this.imageListSmallButton.Name = "imageListSmallButton";
        this.imageListSmallButton.Size = new System.Drawing.Size(95, 23);
        this.imageListSmallButton.TabIndex = 1;
        this.imageListSmallButton.Text = "ImageList 1x1";
        this.imageListSmallButton.UseVisualStyleBackColor = true;
        this.imageListSmallButton.Click += new System.EventHandler(this.OnImageListSmallButtonClick);
        // 
        // imageListLargeButton
        // 
        this.imageListLargeButton.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Right)));
        this.imageListLargeButton.Location = new System.Drawing.Point(175, 53);
        this.imageListLargeButton.Name = "imageListLargeButton";
        this.imageListLargeButton.Size = new System.Drawing.Size(95, 23);
        this.imageListLargeButton.TabIndex = 2;
        this.imageListLargeButton.Text = "ImageList 32x32";
        this.imageListLargeButton.UseVisualStyleBackColor = true;
        this.imageListLargeButton.Click += new System.EventHandler(this.OnImageListLargeButtonClick);
        // 
        // MainForm
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(292, 266);
        this.Controls.Add(this.imageListLargeButton);
        this.Controls.Add(this.imageListSmallButton);
        this.Controls.Add(this.listView);
        this.Name = "MainForm";
        this.Text = "Form1";
        this.ResumeLayout(false);

    }

    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new MainForm());
    }
} 
```

* * *

我已经完成了您现在看到的操作，我不明白为什么它不进行调整大小...我想知道执行 SendMessage 是否可以解决问题，但我不知道它会是什么消息。

如果你这样做，我可以看到最好的工作：

```
imageList1.ImageSize = new Size(1,1); 
```

* * *

我创建了一个测试，除非我设置`StateImageList`. 你`StateImageList`也在清零吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-29T01:55:51.890

如果您想要完全控制，请使用 listview.drawitem 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-05T01:51:33.433

我最近也有这个确切的问题。我注意到的是，无论 LargeImageList ImageSize 设置为什么（或者即使 LargeImageList 为 NULL！），ListView 都将始终表现得好像 LargeImageList.ImageSize 仍然设置为它的最后一个值。

在我的程序中，我根本没有使用 SmallImageList，所以它一直都是 NULL。在表单的构造函数中，我只是将它设置为 ListView 的新 ImageList() 并将大小锁定在 (1,1)。问题消失了！似乎有一个愚蠢的错误。

```
 public frmMain()
    {
        InitializeComponent();
        this.Text = Program.AppName;

        lstSightings.SmallImageList = new ImageList();
        lstSightings.SmallImageList.ImageSize = new Size(1, 1);

        RefreshItems();
    } 
```

# performance - Oracle 中最耗时的 5 个 SQL 查询

> ID：316812
> 
> 赞同：38
> 
> 时间：2008-11-25T09:27:02.920
> 
> 标签：performance, oracle

如何在 Oracle 中找到性能不佳的 SQL 查询？

Oracle 维护共享 SQL 区域的统计信息，每个 SQL 字符串 (v$sqlarea) 包含一行。但是我们如何才能确定其中哪一个表现不佳呢？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-11-25T10:05:03.763

我发现这个 SQL 语句是一个有用的起点（抱歉，我不能将其归因于原作者；我在互联网的某个地方找到了它）：

```
SELECT * FROM
(SELECT
    sql_fulltext,
    sql_id,
    elapsed_time,
    child_number,
    disk_reads,
    executions,
    first_load_time,
    last_load_time
FROM    v$sql
ORDER BY elapsed_time DESC)
WHERE ROWNUM < 10
/ 
```

这将查找当前存储在 SQL 缓存中的按经过时间排序的顶级 SQL 语句。随着时间的推移，语句将从缓存中消失，因此当您在中午开始工作时尝试诊断昨晚的批处理作业可能没有好处。

您还可以尝试按 disk_reads 和执行排序。执行很有用，因为一些糟糕的应用程序多次发送相同的 SQL 语句。此 SQL 假定您正确使用绑定变量。

然后，您可以将`sql_id`and `child_number`of 声明并喂给这个婴儿：-

```
SELECT * FROM table(DBMS_XPLAN.DISPLAY_CURSOR('&sql_id', &child)); 
```

这显示了来自 SQL 缓存的实际计划和 SQL 的全文。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-12-05T22:26:57.413

您可以通过以下方式找到磁盘密集型全表扫描：

```
SELECT Disk_Reads DiskReads, Executions, SQL_ID, SQL_Text SQLText, 
   SQL_FullText SQLFullText 
FROM
(
   SELECT Disk_Reads, Executions, SQL_ID, LTRIM(SQL_Text) SQL_Text, 
      SQL_FullText, Operation, Options, 
      Row_Number() OVER 
         (Partition By sql_text ORDER BY Disk_Reads * Executions DESC) 
         KeepHighSQL
   FROM
   (
       SELECT Avg(Disk_Reads) OVER (Partition By sql_text) Disk_Reads, 
          Max(Executions) OVER (Partition By sql_text) Executions, 
          t.SQL_ID, sql_text, sql_fulltext, p.operation,p.options
       FROM v$sql t, v$sql_plan p
       WHERE t.hash_value=p.hash_value AND p.operation='TABLE ACCESS' 
       AND p.options='FULL' AND p.object_owner NOT IN ('SYS','SYSTEM')
       AND t.Executions > 1
   ) 
   ORDER BY DISK_READS * EXECUTIONS DESC
)
WHERE KeepHighSQL = 1
AND rownum <=5; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-05T17:42:06.567

您可以在实例活动期间获取每次执行的平均缓冲区：

```
SELECT username,
       buffer_gets,
       disk_reads,
       executions,
       buffer_get_per_exec,
       parse_calls,
       sorts,
       rows_processed,
       hit_ratio,
       module,
       sql_text
       -- elapsed_time, cpu_time, user_io_wait_time, ,
  FROM (SELECT sql_text,
               b.username,
               a.disk_reads,
               a.buffer_gets,
               trunc(a.buffer_gets / a.executions) buffer_get_per_exec,
               a.parse_calls,
               a.sorts,
               a.executions,
               a.rows_processed,
               100 - ROUND (100 * a.disk_reads / a.buffer_gets, 2) hit_ratio,
               module
               -- cpu_time, elapsed_time, user_io_wait_time
          FROM v$sqlarea a, dba_users b
         WHERE a.parsing_user_id = b.user_id
           AND b.username NOT IN ('SYS', 'SYSTEM', 'RMAN','SYSMAN')
           AND a.buffer_gets > 10000
         ORDER BY buffer_get_per_exec DESC)
 WHERE ROWNUM <= 20 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-25T11:02:33.960

这取决于您拥有的 oracle 版本，对于 9i 及以下[Statspack](http://download.oracle.com/docs/cd/B10501_01/server.920/a96533/statspac.htm)是您所追求的，10g 及以上，您想要[awr](http://download.oracle.com/docs/cd/B19306_01/server.102/b14211/autostat.htm#PFGRF027)，这两个工具都会为您提供顶级 sql 和许多其他东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-15T22:14:26.283

以下查询返回执行大量磁盘读取的 SQL 语句（还包括违规用户和查询已运行的次数）：

```
SELECT t2.username, t1.disk_reads, t1.executions,
    t1.disk_reads / DECODE(t1.executions, 0, 1, t1.executions) as exec_ratio,
    t1.command_type, t1.sql_text
  FROM v$sqlarea t1, dba_users t2
  WHERE t1.parsing_user_id = t2.user_id
    AND t1.disk_reads > 100000
  ORDER BY t1.disk_reads DESC 
```

以 SYS 身份运行查询并根据您认为过多的内容调整磁盘读取次数（100,000 对我有用）。

`Explain Plans`我最近使用此查询来跟踪在执行语句之前拒绝利用的用户。

我在一本旧的 Oracle SQL 调优书（不幸的是我不再拥有）中找到了这个查询，所以很抱歉，但没有注明出处。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-13T08:58:15.343

我从 askTom-Oracle 获得的完整信息。希望对你有帮助

```
select * 
from v$sql 
where buffer_gets > 1000000 
or disk_reads > 100000 
or executions > 50000 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-25T09:54:52.880

有很多可能的方法可以做到这一点，但有一个谷歌 tkprof

没有图形用户界面……它完全是命令行，对 Oracle 初学者来说可能有点吓人；但它非常强大。

这个链接看起来是一个好的开始：

[http://www.oracleutilities.com/OSUtil/tkprof.html](http://www.oracleutilities.com/OSUtil/tkprof.html)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-11-25T10:27:50.863

在搜索时，我得到了以下查询，它以一个假设完成了这项工作（查询执行时间> 6秒）

* * *

选择用户名、sql_text、到目前为止、总工作量、单位

FROM v$sql,v$session_longops

WHERE sql_address = 地址 AND sql_hash_value = hash_value

ORDER BY 地址、hash_value、child_number；

* * *

我认为上面的查询将列出当前用户的详细信息。

欢迎评论！！

# c# - 如何从 .NET 应用程序启动默认媒体播放器？

> ID：316820
> 
> 赞同：2
> 
> 时间：2008-11-25T09:30:14.817
> 
> 标签：c#, .net, audio, streaming, mp3

我需要从我的 c# .NET 应用程序中的 URL 启动媒体文件。有没有办法在.NET 中本地执行此操作？我不需要嵌入式播放器，我只需要启动默认播放器。我试过了

```
System.Diagnostics.Process.Start("File URL"); 
```

但它会启动默认浏览器并下载文件，而不是尝试在 WMP/VLC/默认媒体播放器中播放它。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-25T10:11:34.593

如果您输入一个 URL，它将由注册到该 URL 格式的程序处理，在您的情况下是默认的 Web 浏览器。

媒体是什么格式的？您可以获取扩展的关联程序，然后使用 url 作为参数运行该程序。请参阅： [Windows：列出和启动与扩展关联的应用程序](https://stackoverflow.com/questions/24954/windows-list-and-launch-applications-associated-with-an-extension)

因此，如果您的媒体例如是 .MP3，则找到 .MP3 的相关程序（使用上面链接中的代码）并将 url 作为参数传递给该程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T10:21:27.070

处理此问题的另一种方法是将文件临时下载到本地文件系统，然后运行您的

```
System.Diagnostics.Process.Start("Local File"); 
```

然后它应该按您的预期工作。

# c++ - C++/Qt 与 Adob e AIR

> ID：316826
> 
> 赞同：14
> 
> 时间：2008-11-25T09:34:52.653
> 
> 标签：c++, apache-flex, qt, air

我必须为我们的产品选择一个平台。我必须在 Qt 框架和 Adob​​e 的 AIR 之间做出决定。由于过去两年的工作，我精通 Qt。我查看了 Adob​​e 的网站，但所有关于 flex、flash、HTML/ActionScript 编码能力的信息都令人难以理解。我无法理解有关 Adob​​e 生态系统的以下内容。

我对 Adob​​e AIR 有以下问题：

1.  我使用什么语言来编码我的应用程序？（不仅仅是定义 UI 的外观）
    就像在 Qt 中一样，我使用 C++。是动作脚本吗？

2.  我们可以说 AIR 仅用于为应用程序制作 UI。

3.  实用程序类和 AIR 的文档在哪里？
    例如[http://qt-project.org/doc/](http://qt-project.org/doc/)对于 Qt

4.  Qt 附带了大量可以使用的预制小部件。Adobe 是否附带任何此类小部件集，如果有，我可以在哪里看到它，如 url？

5.  我了解 flex SDK 是开源的。我可以制作商业应用程序并发布它们吗？flex SDK 是否提供所有内容（编译器、实用程序类/小部件）

6.  AIR 在许可方面的成本是多少？

7.  AIR中是否有相当于QT的QGraphicsView的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-25T19:34:37.810

如果您需要访问很多本机库，则需要留在您的 QT 环境中。请记住，AIR 是单线程的，并且在 Flash Player 上运行（最初是为基于帧的动画设计的）。但是，根据您正在构建的应用程序的风格，AIR 可能非常适合您。

请注意，AIR 可能会让人感到困惑，因为创建 AIR 应用程序有几种不同的开发人员路径：1) 使用 html/javascript 和 AIR SDK，2) 使用 Flash/Actionscript 和 3) 使用 Flex SDK 和/或 Flex builder。就传统桌面开发背景而言，最后一个是最有能力的。

用于连接到 Web 服务的 Web 2.0 小型应用程序非常适合 AIR 应用程序。像 IM 客户端 Digsby 这样的东西会很棒。到目前为止，我最喜欢的 AIR 应用程序是 Basamiq Mockups。其他有用的应用程序是 TweetDeck。这些是非常适合使用 AIR 解决的问题类型的很好示例。

您应该访问 Adob​​e Showcase 并查看一些应用程序：http: [//www.adobe.com/products/air/showcase/](http://www.adobe.com/products/air/showcase/)

另外，如果你想退出 C++ 游戏，我相信 QT 现在有一些 java 绑定......我还记得一些 python 绑定，但我自己从来没有看过那些。

就 QGraphicsView 而言，人们在 Flex 中也做过类似的事情。我现在尝试谷歌搜索，但最初找不到它们，但人们已经拍摄了一张大图像，然后只在窗口中显示了当前区域。此外，在 Flex 的下一个版本中，他们正在构建一个官方的 ViewPort 组件：
[http ://opensource.adobe.com/wiki/display/flexsdk/Gumbo+Viewport](http://opensource.adobe.com/wiki/display/flexsdk/Gumbo+Viewport)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-25T02:30:25.320

花一些时间在这个 AIR 应用程序上，然后问自己是否值得花时间来掌握 Adob​​e Flex 和 AIR（准备问自己为什么不存在类似 C++/QT 之类的东西）：

[环法自行车赛](http://flex.org/tour)

> Tour de Flex 是一款用于探索 Flex 功能和资源的桌面应用程序，包括核心 Flex 组件、Adobe AIR 和数据集成，以及各种第三方组件、效果、皮肤等。

你的一些问题：

*   Flex 可以用 MXML 和 ActionScript3 编码。AIR 还支持 HTML/DOM/JavaScript 编程，因为 webkit HTML 渲染引擎内置在 AIR 运行时中。
*   MXML 是一种 XML 声明性 DSL，可编译为 ActionScript3 命令式代码。不过，它非常适合以声明方式对 UI 的图形形式（即 MVC 模式的视图）进行编码。
*   ActionScript3 有一个建立在 JavaScript 之上的传统，但它已经被修饰到更类似于 Java 或 C# 的程度。它有包命名空间、类和继承接口、类成员访问保护关键字、构造函数、静态成员，以及一些非常好的 Java 附加功能：属性、事件、数据绑定和闭包。

Flex 风格的编程也是一个依赖异步 I/O 交互的单线程模型。这是一个比多线程 Java Swing 或 C# .NET Winform 应用程序更简单的编程模型，但允许实现相同的程序行为最终结果。我在这里详细说明：

[Flex 异步 I/O 与 Java 和 C# 显式线程](http://humbleblogger.blogspot.com/2008/05/flex-async-io-vs-java-and-c-explicit.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-25T10:05:36.163

Flex 是开源的，您可以免费下载 SDK，没有与之相关的许可费用。（见他们的[常见问题解答](http://www.adobe.com/products/flex/faq/)）

他们确实提供了一个“flex builder”，我认为这是一些自定义的 Eclipse，而且需要花钱，但是没有它你也可以完美地工作。

可以在[adobe 的 livedoc](http://livedocs.adobe.com/flex/3/html/)页面上找到这些文档。（[对某些人](http://aralbalkan.com/887)来说，这本身就是不喜欢 Adob​​e 的充分理由；））

我确实想知道，如果您精通 QT，为什么还要考虑其他事情？与 QT 相比，您希望 AIR 给您带来哪些优势？

我对 QT 和 Flex 都有一些经验，但还不足以衡量两者之间的关系。我确实知道 QT/C++ 比 Flex/ActionScript 成熟得多。

如果您已经了解 QT，我认为花时间学习新框架（和编程语言）不会让您获得足够的诚实...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-25T14:06:51.233

我使用过 QT 和 Flex（虽然不是 Air 本身），并且发现 Flex 可以更快地启动和运行应用程序以及进行修改，而 QT 为您提供了更多控制权——尤其是在安装程序中。Air 应用程序安装程序相当笨拙，或者至少在我尝试它时是这样，尽管从那时起它可能已经得到了改进。

Air 的一大优势在于它的大部分代码可以在网页内的 Flash 中运行。出于安全原因，您无法从 Web 访问本地文件系统等，但几乎所有其他内容都是可移植的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-10-22T17:36:57.130

我做了相反的动作。我开始研究 Adob​​e 的东西，然后转到 QT。这样做的主要原因是关于 Adob​​e 框架的限制。当你使用 Adob​​e 的东西时，你受限于他们生产的工具，如果不能用 Adob​​e 的东西做你想做的事情，就很难引入外部框架或库。通常，解决方案是使用套接字，它在客户端-服务器架构上转换假定的“独立”应用程序。此外，如果您使用许多外部的东西，可能很难管理这么多不同的客户端。使用 QT，您可以使用 C++ 编写代码并添加您想要的任何外部框架或库。尽管如此，有时编码它并不容易，它是可行的并且没有“奇怪”的系统架构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-28T15:30:43.250

如果您正在寻找一些使用 Qt 和 SVG 的“有趣”用户界面示例，请查看 KDEGames [1][2] 和 KDEEdu [3][4] 项目。那里有很多很好的代码，它们使用 QGraphicsView 和 SVG 来创建可扩展的界面。当然请注意，这是 GPL，所以如果您的应用程序不是，请小心您“借用”的内容。

[1] [http://games.kde.org/](http://games.kde.org/)

[2] [http://websvn.kde.org/trunk/KDE/kdegames/](http://websvn.kde.org/trunk/KDE/kdegames/)

[3] [http://edu.kde.org/](http://edu.kde.org/)

[4] [http://websvn.kde.org/trunk/KDE/kdeedu/](http://websvn.kde.org/trunk/KDE/kdeedu/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-25T10:28:01.360

我将支持 @ [Pieter](https://stackoverflow.com/questions/316826/cqt-vs-adobe-air#316884)的评论 - 如果您已经了解 QT，那么迁移到一个全新的环境将需要更长的时间。

QT 具有跨平台的优势，并且非常成熟：有适用于 Windows、Linux 和 Mac OS X 的库。我对 AIR 不是很熟悉，只知道它来自 Adob​​e，但产品网站似乎表明它是对于富互联网应用程序 ( [http://www.adobe.com/products/air/](http://www.adobe.com/products/air/) )。如果这是真的，那么如果您正在开发桌面应用程序，QT 将是更好的选择。

# sql-server - SQL Server 中的表和索引大小

> ID：316831
> 
> 赞同：94
> 
> 时间：2008-11-25T09:40:17.870
> 
> 标签：sql-server

我们能否有一个 SQL 查询，它基本上有助于查看 SQl Server 中的表和索引大小。

SQL server 如何维护表/索引的内存使用？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2009-03-11T16:04:02.233

sp_spaceused 为您提供所有索引组合的大小。

如果您想要表的每个索引的大小，请使用以下两个查询之一：

```
SELECT
    i.name                  AS IndexName,
    SUM(s.used_page_count) * 8   AS IndexSizeKB
FROM sys.dm_db_partition_stats  AS s 
JOIN sys.indexes                AS i
ON s.[object_id] = i.[object_id] AND s.index_id = i.index_id
WHERE s.[object_id] = object_id('dbo.TableName')
GROUP BY i.name
ORDER BY i.name

SELECT
    i.name              AS IndexName,
    SUM(page_count * 8) AS IndexSizeKB
FROM sys.dm_db_index_physical_stats(
    db_id(), object_id('dbo.TableName'), NULL, NULL, 'DETAILED') AS s
JOIN sys.indexes AS i
ON s.[object_id] = i.[object_id] AND s.index_id = i.index_id
GROUP BY i.name
ORDER BY i.name 
```

结果通常略有不同，但在 1% 以内。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2008-11-25T10:38:25.130

`exec sp_spaceused`without 参数显示整个数据库的摘要。foreachtable 解决方案为每个表生成一个结果集——如果表太多，SSMS 可能无法处理。

我创建了一个[脚本](http://devio.wordpress.com/2007/10/11/how-much-space-do-my-sql-server-tables-use/)，它通过收集表信息`sp_spaceused`并在单个记录集中显示摘要，按大小排序。

```
create table #t
(
  name nvarchar(128),
  rows varchar(50),
  reserved varchar(50),
  data varchar(50),
  index_size varchar(50),
  unused varchar(50)
)

declare @id nvarchar(128)
declare c cursor for
select '[' + sc.name + '].[' + s.name + ']' FROM sysobjects s INNER JOIN sys.schemas sc ON s.uid = sc.schema_id where s.xtype='U'

open c
fetch c into @id

while @@fetch_status = 0 begin

  insert into #t
  exec sp_spaceused @id

  fetch c into @id
end

close c
deallocate c

select * from #t
order by convert(int, substring(data, 1, len(data)-3)) desc

drop table #t 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-01-08T13:44:36.810

在 SQL 2012 上，在表级别获取此信息变得非常简单：

SQL Management Studio -> 右键单击​​ Db -> Reports -> Standard Reports -> Disk usage by table ！

享受

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-11-25T10:09:41.367

```
EXEC sp_MSforeachtable @command1="EXEC sp_spaceused '?'" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-15T01:30:40.740

自从创建这篇文章以来已经很长时间了，但我想分享我的脚本：

```
WITH CteIndex
AS
(
SELECT 
     reservedpages = (reserved_page_count)
     ,usedpages = (used_page_count)
     ,pages = (
            CASE
                WHEN (s.index_id < 2) THEN (in_row_data_page_count + lob_used_page_count + row_overflow_used_page_count)
                ELSE lob_used_page_count + row_overflow_used_page_count
            END
            )    
     ,s.object_id   
     ,i.index_id        
     ,i.type_desc AS IndexType
     ,i.name AS indexname
    FROM sys.dm_db_partition_stats s
    INNER JOIN sys.indexes i ON s.[object_id] = i.[object_id] AND s.index_id = i.index_id   
)
SELECT DISTINCT
DB_NAME(DB_ID()) AS DatabaseName
,o.name AS TableName
,o.object_id
,ct.indexname
,ct.IndexType
,ct.index_id
, IndexSpace = LTRIM (STR ((CASE WHEN usedpages > pages THEN CASE WHEN ct.index_id < 2 THEN  pages ELSE (usedpages - pages) END ELSE 0 END) * 8, 15, 0) + ' KB')
FROM CteIndex ct
INNER JOIN sys.objects o ON o.object_id = ct.object_id
INNER JOIN sys.dm_db_index_physical_stats (DB_ID(), NULL, NULL, NULL , NULL) ps ON ps.object_id = o.object_id
AND ps.index_id = ct.index_id
ORDER BY name ASC 
```

这适用于：

*   SQL Server（从 2008 年开始）
*   包括每个当前数据库的所有表的信息

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-31T08:26:56.250

```
--Gets the size of each index for the specified table
DECLARE @TableName sysname = N'SomeTable';

SELECT i.name AS IndexName
      ,8 * SUM(s.used_page_count) AS IndexSizeKB
FROM sys.indexes AS i
    INNER JOIN sys.dm_db_partition_stats AS s 
        ON i.[object_id] = s.[object_id] AND i.index_id = s.index_id
WHERE s.[object_id] = OBJECT_ID(@TableName, N'U')
GROUP BY i.name
ORDER BY i.name;

SELECT i.name AS IndexName
      ,8 * SUM(a.used_pages) AS IndexSizeKB
FROM sys.indexes AS i
    INNER JOIN sys.partitions AS p 
        ON i.[object_id]  = p.[object_id] AND i.index_id = p.index_id
    INNER JOIN sys.allocation_units AS a 
        ON p.partition_id = a.container_id
WHERE i.[object_id] = OBJECT_ID(@TableName, N'U')
GROUP BY i.name
ORDER BY i.name; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-11-13T22:59:44.503

这是最成功答案的更紧凑版本：

```
create table #tbl(
  name nvarchar(128),
  rows varchar(50),
  reserved varchar(50),
  data varchar(50),
  index_size varchar(50),
  unused varchar(50)
)

exec sp_msforeachtable 'insert into #tbl exec sp_spaceused [?]'

select * from #tbl
    order by convert(int, substring(data, 1, len(data)-3)) desc

drop table #tbl 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-28T11:44:49.333

此查询来自其他两个答案：

[获取数据库中所有表的大小](https://stackoverflow.com/questions/7892334/get-size-of-all-tables-in-database)

[如何在 SQL Server 数据库中找到最大的对象？](https://stackoverflow.com/questions/2094436/how-to-find-largest-objects-in-a-sql-server-database)

，但我将其增强为通用。它使用`sys.objects`字典：

```
SELECT 
    s.NAME as SCHEMA_NAME,
    t.NAME AS OBJ_NAME,
    t.type_desc as OBJ_TYPE,
    i.name as indexName,
    sum(p.rows) as RowCounts,
    sum(a.total_pages) as TotalPages, 
    sum(a.used_pages) as UsedPages, 
    sum(a.data_pages) as DataPages,
    (sum(a.total_pages) * 8) / 1024 as TotalSpaceMB, 
    (sum(a.used_pages) * 8) / 1024 as UsedSpaceMB, 
    (sum(a.data_pages) * 8) / 1024 as DataSpaceMB
FROM 
    sys.objects t
INNER JOIN
    sys.schemas s ON t.SCHEMA_ID = s.SCHEMA_ID 
INNER JOIN      
    sys.indexes i ON t.OBJECT_ID = i.object_id
INNER JOIN 
    sys.partitions p ON i.object_id = p.OBJECT_ID AND i.index_id = p.index_id
INNER JOIN 
    sys.allocation_units a ON p.partition_id = a.container_id
WHERE 
    t.NAME NOT LIKE 'dt%' AND
    i.OBJECT_ID > 255 AND   
    i.index_id <= 1
GROUP BY 
    s.NAME, t.NAME, t.type_desc, i.object_id, i.index_id, i.name 
ORDER BY
    sum(a.total_pages) DESC
; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-25T10:11:30.897

有一个扩展存储过程`sp_spaceused`可以获取此信息。从数据字典中执行此操作相当复杂，但是[此链接](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=61762)扇出到执行此操作的脚本。 [这个 stackoverflow 问题](https://stackoverflow.com/questions/177550/estimate-sql-server-index-sizes#177585)有一些关于底层数据结构的信息，您可以使用这些信息来构建容量规划的表和索引大小的估计值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-24T15:19:35.233

要查看单个表（及其索引）的存储数据：

```
exec sp_spaceused MyTable 
```

# iphone - 在 iphone 应用程序中将输入数据发布或获取到站点的方式

> ID：316833
> 
> 赞同：0
> 
> 时间：2008-11-25T09:41:12.080
> 
> 标签：iphone, post

是否可以通过在 iphone 应用程序中使用目标 C 将输入数据发布或获取到站点，例如在 HTML 中创建一个表单，它从用户那里收集输入数据并发布到服务器站点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-02-25T18:01:31.510

看看 ASIHTTP [http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

# css - 如何使本站浏览器独立

> ID：316835
> 
> 赞同：2
> 
> 时间：2008-11-25T09:42:43.950
> 
> 标签：css, internet-explorer, xhtml

我得到了这个页面，但 ie < 7 和 opera 7.11 有一些问题

[这](http://browsershots.org/png/original/c5/c5bac9b3838ba30cfebae2f03f896548.png)就是我希望在所有浏览器中的布局，而这些是 IE 的：[ie 5.5](http://browsershots.org/screenshots/97347e42778e88203c896cc3f30134bd/)和[ie 6.0](http://browsershots.org/screenshots/b53d6391290363ea1e7ada0e77bdca20/)。

xhtml 非常简单：

```
print "<div id=\"page\">
  <div id=\"header\">
    <ul id=\"nav\">
      <li><a href=\"/\" class=\"first\">Címlap<div>Az oldal címlapja</div></a></li>
      <li><a href=\"/blog\">Blogok<div>Minden bejegyzés</div></a></li>
      <li><a href=\"/friss\">Friss tartalom<div>Aktuális témák</div></a></li>
    </ul>
  </div> <!-- header -->
  <div id=\"main\"><div id=\"main-in\">
    <div id=\"right\">";
      do_boxes();
print "
    </div> <!-- right -->
    <div id=\"left\">";
      do_content();
print"</div> <!-- left -->

</div></div><!-- main --> </div>"; 
```

由帖子和帖子制作的内容如下所示：

```
 <div class="post">
      <h2><a href="/blog/2/252/newcastleben-betiltottak-a-ketreces-tojast">Newcastleben betiltották a ketreces tojást</a></h2>
      <div class="author">warnew | 2008\. october   16\. 20:26 </div>
      <p>Az angliai Newcastle Városi Tanácsa kitiltotta a ketreces baromfitartásból származó tojásokat az iskolai étkeztetésből, személyzeti éttermekből, rendezvényekről es a "hospitality outletekből".</p>

      <p>A ketreces csirke- és pulykahúst még nem tiltották be, de vizsgálják a kérdést, ahogy a <a href="http://en.wikipedia.org/wiki/Halal">Halal</a> hús és a ketreces tojásból készült sütemények és tésztafélék tiltását is.</p>

      <ul class="postnav">
        <li><a href="/blog/2/252/newcastleben-betiltottak-a-ketreces-tojast%7D">Tovább</a></li>
        <li><a href="/blog/2/252/newcastleben-betiltottak-a-ketreces-tojast#comments">Hozzászólások (0)</a></li>
      </ul>
    </div> <!-- post --> 
```

一个盒子是这样的：

```
<div id="ownadbox" class="box">
  <h5>Viridis matrica</h5>
  <a href="http://viridis.hu/blog/2/172/nepszerusits-minket" title="Népszerűsíts minket"><img src="http://viridis.hu/files/viridis_matrica_jobb.png" alt="viridis matrica"/></a>
</div> 
```

- 我认为是 - 相关的 CSS：

```
body {
  background      : transparent url(/images/design/background.png) repeat;
}

#page {
  margin          : 0px auto;
  width           : 994px;
  background      : transparent url(/images/design/header.jpg) no-repeat top left;
}
div#header {
  width           : 746px;
  margin          : 0px auto;
}
div#header ul#nav {
  padding-top     : 170px;
  margin-left     : 3px;
  margin-right    : 3px;
  border-bottom   : #896e51 solid 7px;
  overflow        : hidden;
}

div#header ul#nav li {
  display         : block;
  float           : left;
  width           : 120px;
  margin-bottom   : 7px;
}

div#main {
  width           : 746px;
  margin          : 0px auto;
}

div#main div#main-in {
  padding         : 30px 20px;
  background      : transparent url(/images/design/content-background.png) repeat-y top left;
  overflow        : hidden;
}
div#main div#main-in div#left {
  width           : 460px;
  overflow        : hidden;
  float           : left;
}

div#main div#main-in div#left div.post {
  clear           : left;
  margin-bottom   : 35px;
}

div#main div#main-in div#right {
  width           : 215px;
  float           : right;
}

div#main div#main-in div#right div.box {
  margin-bottom   : 30px;
  clear           : both;
} 
```

现场版本在[这里](http://viridis.hu/index3.php)，但是在我修复它之后它会移动 - 这就是帖子中长代码背后的原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-25T10:14:37.490

你*真的*需要支持IE5.5吗？这似乎是不必要的痛苦。除非您明确地为使用浏览器的客户端执行此操作，否则您几乎可以假设每个人都使用 IE6 或更高版本。

IE6 中的 CSS 支持是不稳定的，在比这更早的 IE 版本中几乎不存在。对于这些古老的浏览器，您最好的选择可能是只为这些浏览器显示一个单独的网站版本

编辑：您可以做几件事来修补 IE。条件注释可用于为各种版本的 IE 添加特定的 javascript 和 CSS hack，尤其是以下文件，可以添加很多缺失的功能：

```
<!--[if lt IE 7]><script src="http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js" type="text/javascript"></script><![endif]-->
<!--[if lt IE 8]><script src="http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE8.js" type="text/javascript"></script><![endif]--> 
```

此外，确保 IE 不会跳入怪癖模式。有一些简单的 javascript 片段可以测试当前页面在哪种模式下呈现，但避免怪异模式的主要方法是确保在 doctype 之前*没有任何内容*（甚至是`<?xml`prolog 标记），并且 doctype 是严格的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T10:04:31.440

IE 从来没有因其对 CSS 的支持而出名（它因*缺乏支持和错误而**臭名昭著*）......但如果你真的想支持旧的 IE 版本，我建议你使用[条件注释](http://www.quirksmode.org/css/condcom.html)来为特定的怪癖添加额外的 CSS 文件的旧版本。但是在你应用特定的 css 之前，试着让纯 HTML 尽可能语义化，让它的布局几乎是你想要的，没有 CSS，然后再设置样式。

 *我还建议您查看 Yahoo 的[YUI Reset CSS](http://developer.yahoo.com/yui/reset/)，它使一致的样式*更*容易。实际上，当我使用它（！）时，我只需要专门为 IE7 添加 3 行 CSS 就可以使大型项目看起来不错（！）。顺便说一句：总是按标准编码，先在 Firefox、Opera 或 Safari 中测试，然后在 IE 中测试。

Opera 7 已经很老了，我猜大多数 Opera 用户比 IE 用户更频繁地更新他们的浏览器（因为他们实际上已经选择了切换浏览器）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T12:03:47.127

没有ie 5.5 我也能活，opera 7 但ie 6 很重要。

我已经在使用 reset.css，而且我肯定可以使用条件样式。

所以问题如下：ie<7 没有为 ul#nav 和 div#main-in 元素选择正确的高度。添加样式：高度：100%；对他们来说解决了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-25T09:52:20.293

看看一个有效的精简布局，例如[A List Apart](http://www.alistapart.com/d/holygrail/example_1.html)。从这样的工作布局开始，然后根据自己的喜好对其进行编辑。我发现这比尝试修复损坏的布局更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T09:55:08.370

好吧，你的 CSS 很好，它甚至可以在 W3C 中验证，问题出在旧的 IE 浏览器上。你必须用丑陋的代码来破解你的 CSS 才能让它在那些浏览器中工作。

或者，您可以将这些浏览器的用户重定向到网站的更简单版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T11:37:00.240

首先修复[验证错误](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.viridis.hu%2Findex3.php&charset=(detect+automatically)&doctype=Inline&group=0)。我知道期望 IE 5.5 遵循标准是愚蠢的，但它可能对 Opera 有所帮助。另一件事是你是否*真的*需要支持这些古老的浏览器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-25T11:58:04.503

为现在/未来的浏览器正确地做你的标记和 CSS ......但要修复 IE 的特定版本，我建议制作一个*单独*的css 文件，并且只能[有条件地引用它们](http://msdn.microsoft.com/en-us/library/ms537512(VS.85).aspx)。这样，您就不必用 hack 弄乱您的优秀设计或 CSS 文件。

另外，为IE6拍摄，但不要担心IE5。现在不到市场的 0.1%：http: [//www.w3schools.com/browsers/browsers_stats.asp](http://www.w3schools.com/browsers/browsers_stats.asp)

# html - 图表的语义表示

> ID：316837
> 
> 赞同：3
> 
> 时间：2008-11-25T09:43:25.633
> 
> 标签：html, css, semantic-markup

我正在重新编码一个旧网站，其中包含类似于以下的图表：

[替代文字 http://dl.getdropbox.com/u/240752/rental-chart.gif](http://dl.getdropbox.com/u/240752/rental-chart.gif)

这个图表将如何用纯 HTML 表示？我讨厌将其作为图像包含在内。

我在想一张桌子，只是用图像代替，或者可能覆盖了绝对定位的表格行，但我认为这可能有点脆弱。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-25T09:53:16.750

图片有什么问题？

大多数情况下，当您在 Web 上看到图表信息时，它会生成 .jpg 或 .png。

所有这些设计师都做错了吗？

任何使用表格和背景颜色绘制图表的尝试对于视力受损的人来说都是无法理解的，并且很可能在无法处理图像的浏览器上无法正确呈现。

使用图片并使用带有真实英文描述的“替代”文本“显示 ACME 产品的图表与竞争对手相比仅花费 49 美元：租赁公司 4 的价格为 51 美元......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T10:03:56.900

```
<div class="chart">
 <h3>Price for two weeks</h3>
 <div class="companies">
  <div class="company_scale"></div>
  <div class="company1">
   <span class="name">Company 1</span><span class="cost"> $78</span>
  </div>
  <div class="company2">
   <span class="name">Company 2</span><span class="cost"> $74</span>
  </div>
  <div class="company3">
    <span class="name">Company 3</span><span class="cost"> $60</span>
  </div>
  <div class="company4">
    <span class="name">Company 4</span><span class="cost"> $55</span>
  </div>
  <div class="acme">
    <span class="name">Acme Product</span><span class="cost"> $49.95</span>
  </div>
 </div>
</div> 
```

或类似的东西。您将使用 CSS 指定宽度，并使用 css 隐藏“成本”分类跨度。

我很想使用定义列表，但这会更难在 CSS 中获得层次关联。

此标记的好处是在没有任何样式数据的情况下呈现时，它是否保留了其大部分原始含义：

* * *

```
两周价格公司 1 $78
 公司 2 $74
 公司 3 $60
 公司 4 $55
 极致产品 $49.95
```

* * *

## 表型号：

我想我至少会尝试使用表格的 Liams 建议，它实际上效果很好，只需添加背景渐变就可以了。

滚动到底部以查看它的运行情况（将很快过期）[http://www.webdevout.net/test?03](http://www.webdevout.net/test?03)

原创内容如下

```
<div class="chart">
 <h3>Price for two weeks</h3>
 <table class="companies">
  <thead>
  <tr class="titles">
    <td>Company</td><td>Price</td>
  </tr>
  </thead>
  <tbody>
    <tr class="company1">
      <td class="name">Company 1</td>
      <td class="cost">$78</td>
    </tr>
    <tr class="company2">
      <td class="name">Company 2</td>
      <td class="cost">$74</td>
    </tr>
    <tr class="company3">
      <td class="name">Company 3</td>
      <td class="cost">$60</td>
    </tr>
    <tr class="company4">
      <td class="name">Company 4</td>
      <td class="cost">$55</td>
    </tr>
   <tr class="acme">
      <td class="name">Acme Product</td>
      <td class="cost">$49.95</td>
    </tr>
  </tbody>
  </table>
</div> 
```

* * *

```
div.chart 
{ 
  border: 1px solid #DDD;
}
div.chart table, 
div.chart tbody, 
div.chart thead,
div.chart tr 
{ 
  display: block; 
}
div.chart td 
{ 
  display: inline-block;
  overflow-x: hidden;
}
div.chart {
  padding: 10px;
}
div.chart td.cost, div.chart thead td { 
  display: none;
}

div.chart tbody tr td { 
  background-color: #999;
  padding: 4px;
  margin-top: 16px;
  text-align: right;
}

div.chart  tr.company1 td { 
  width:260px;
}
div.chart tr.company2 td { 
  width:246px;
}
div.chart tr.company3 td { 
  width:200px;
}
div.chart tr.company4 td { 
  width:183px;
}

div.chart tbody tr td.cost { 
  display: inline-block;
  background-color: inherit;
  color: #F00;
  font-size: 80%;
  width: 80px;
}
div.chart  tr.acme td { 
  background-color: #99F;
  width: 166px;
}
div.chart tbody  tr.acme td.cost {
  color: #000;
  background-color: #FF9;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T10:21:17.617

好吧，图表是一个图形元素，我假设您希望纯文本浏览器和搜索引擎都可以访问数据（？）：在这种情况下，使用`<table>`图表中呈现的数据实际上是*正确*的。我知道很多人都害怕桌子，因为大家都在谈论“无桌子”设计。但是将表格用于表格数据是这些表格的用途。

我会在图表图像下方（或上方，除此之外等）放置一个表格，其中包含表格显示的数据。图表有利于可视化差异，但不太适合查看实际值；因此，表格也是图形的一个很好的补充。

如果图表不是很复杂（如本示例），您也可以添加一个带有图表简单英文描述的替代文本，如下所示：

```
<img alt="The price for two weeks is 80 dollars at rental company 1, 
73 dollars at ... The best service and price of 48 dollars 
you get at acme product, plus you can keep it for life" /> 
```

文本阅读器以有意义的方式阅读此内容应该没有问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T14:22:46.660

我似乎记得关于这个主题的一些有用的帖子。您可能会发现最终从成本效益的角度来看，简单的图像是最好的，但[本文](http://apples-to-oranges.com/blog/post/css-for-bar-graphs/?id=55)将告诉您有关使用 html 和 css 绘制条形图的所有信息。

巧合的是，在发布此内容后，我昨天查看了[everyblock.com](http://everyblock.com/)，并注意到他们在 html/css 中有一个特别好的图形实现，值得一看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T15:25:35.940

您也可以考虑在 HTML 中只包含一个表格，然后使用 Javascript 生成表格：[http ://www.wait-till-i.com/2008/01/08/generating-charts-from-accessible-data-表格使用-the-google-charts-api/](http://www.wait-till-i.com/2008/01/08/generating-charts-from-accessible-data-tables-using-the-google-charts-api/)

但是对于像您提供的图像这样的图表——它只是一个营销图像并且值没有真正的意义——那么只有一个好的替代文本描述就可以了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T17:19:27.507

请参阅 Apples to Oranges 网站上有关条形图的 CSS 的精彩文章。

（编辑：与上面*@Sam Murray-Sutton*发布的链接相同- 抱歉）

# php - 在php中获取基本身份验证用户名

> ID：316847
> 
> 赞同：16
> 
> 时间：2008-11-25T09:48:16.277
> 
> 标签：php

如何在 PHP 脚本中访问 apache basic-auth 用户名？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-10-05T16:12:32.183

只需访问此变量：

```
$_SERVER['PHP_AUTH_USER'] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-25T09:51:31.793

[PHP 手册中的 HTTP Auth](http://www.php.net/features.http-auth)将是一个很好的起点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-03T17:05:38.540

检查 $_SERVER (print_r($_SERVER)) 中的内容，有时 $_SERVER['PHP_AUTH_USER'] 不可用。

如果您对 $_SERVER["HTTP_AUTHORIZATION"] 有价值，您可以使用：

```
if (isset($_SERVER["HTTP_AUTHORIZATION"]) {
        $auth = $_SERVER["HTTP_AUTHORIZATION"];
        $auth_array = explode(" ", $auth);
        $un_pw = explode(":", base64_decode($auth_array[1]));
        $un = $un_pw[0];
        $pw = $un_pw[1];
    } 
```

（复制自[https://www.codepunker.com/blog/php-a-primer-on-the-basic-authorization-header](https://www.codepunker.com/blog/php-a-primer-on-the-basic-authorization-header)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-17T16:14:30.220

在我的客户主机上`$_SERVER['PHP_AUTH_USER']`，`$_SERVER["HTTP_AUTHORIZATION"]`空无一人，但`$_SERVER["REMOTE_USER"]`已设置好！

```
if ($_SERVER["REMOTE_USER"] == "admin")
    echo "Welcome, admin!";
else
    echo "Access denied"; 
```

# c# - 查找单词的最后一次出现

> ID：316855
> 
> 赞同：1
> 
> 时间：2008-11-25T09:53:46.143
> 
> 标签：c#, .net, regex, last-occurrence

我有以下字符串：

```
<SEM>electric</SEM> cu <SEM>hello</SEM> rent <SEM>is<I>love</I>, <PARTITION />mind 
```

我想在“PARTITION”标签之前找到最后一个“SEM”开始标签。不是 SEM 结束标签，而是开始标签。结果应该是：

```
<SEM>is <Im>love</Im>, <PARTITION /> 
```

我试过这个正则表达式：

```
<SEM>[^<]*<PARTITION[ ]/> 
```

但它只有在最终的“SEM”和“PARTITION”标签之间没有任何其他标签时才有效。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-25T10:00:51.353

使用[String.IndexOf](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)查找 PARTITION 和[String.LastIndexOf](http://msdn.microsoft.com/en-us/library/system.string.lastindexof.aspx)查找 SEM？

```
int partitionIndex = text.IndexOf("<PARTITION");
int emIndex = text.LastIndexOf("<SEM>", partitionIndex); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T11:36:11.693

这是你愚蠢的正则表达式！！！

```
(?=[\s\S]*?\<PARTITION)(?![\s\S]+?\<SEM\>)\<SEM\> 
```

上面写着“前面某处是一个 PARTITION 标签……但前面不是另一个 SEM 标签……匹配一个 SEM 标签。”

享受！

这是分解的正则表达式：

```
(?=[\s\S]*?\<PARTITION) means "While ahead somewhere is a PARTITION tag"
(?![\s\S]+?\<SEM\>) means "While ahead somewhere is not a SEM tag"
\<SEM\> means "Match a SEM tag" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T02:26:16.170

如果您要使用正则表达式来查找最后一次出现的内容，那么您可能还想使用从右到左解析正则表达式选项：

```
new Regex("...", RegexOptions.RightToLeft); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T12:32:32.763

解决方案是这样的，我在[http://regexlib.com/RETester.aspx中测试过](http://regexlib.com/RETester.aspx)

```
<\s*SEM\s*>(?!.*</SEM>.*).*<\s*PARTITION\s*/> 
```

正如你想要最后一个，唯一的识别方法是只找到不包含的字符`</SEM>`。

我已经包含了“\s*”，以防`<SEM> or <PARTITION/>`.

基本上，我们所做的就是排除这个词`</SEM>`：

```
(?!.*</SEM>.*) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T09:59:32.590

你有没有试过这个：

```
<EM>.*<PARTITION\s*/> 
```

您的正则表达式在“EM”标记之后匹配除“<”之外的任何内容。因此，当它击中结束的“EM”标签时，它将停止匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-25T10:26:11.553

有点快速和肮脏，但试试这个：

```
(<SEM>.*?</SEM>.*?)*(<SEM>.*?<PARTITION) 
```

看看 C#/.net 中相当于 $2 的内容

秘密在于惰性匹配构造（。*？）——我假设/希望 C# 支持这一点。

显然，Jon Skeet 的解决方案会表现得更好，但您可能想要使用正则表达式（例如，简化分解您感兴趣的位）。

（免责声明：我自己是 Perl/Python/Ruby 的人......）

# php - PDOStatement::bindParam data_type 参数列表

> ID：316861
> 
> 赞同：11
> 
> 时间：2008-11-25T09:55:00.587
> 
> 标签：php, pdo, pdostatement

是否有描述您可以使用的所有 data_type 参数的列表`PDOStatement::bindParam()`？如果没有，您通常使用什么，以及用于什么类型的字段？

根据 PHP 手册：*data_type*使用 PDO::PARAM_* 常量的参数的显式数据类型。

我知道`PDO::PARAM_INT`and `PDO::PARAM_STR`。我听说过，`PDO::PARAM_LOB`但我不确定如何以及何时使用它。（日期？）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-25T09:58:29.330

从[这里](http://uk.php.net/manual/en/pdo.constants.php)的文档：

> ```
> PDO::PARAM_BOOL (integer)
> Represents a boolean data type.
> PDO::PARAM_NULL (integer)
> Represents the SQL NULL data type.
> PDO::PARAM_INT (integer)
> Represents the SQL INTEGER data type.
> PDO::PARAM_STR (integer)
> Represents the SQL CHAR, VARCHAR, or other string data type.
> PDO::PARAM_LOB (integer)
> Represents the SQL large object data type.
> PDO::PARAM_STMT (integer)
> Represents a recordset type. Not currently supported by any drivers.
> PDO::PARAM_INPUT_OUTPUT (integer)
> Specifies that the parameter is an INOUT parameter for a stored procedure. You must bitwise-OR this value with an explicit PDO::PARAM_* data type. 
> ```

# winapi - 是否可以为 win32 控制台和 MFC GUI 创建 DLL

> ID：316864
> 
> 赞同：2
> 
> 时间：2008-11-25T09:57:29.020
> 
> 标签：winapi, mfc, console

是否可以为 win32 控制台和 MFC GUI 开发 DLL。如果是，请解释。

我想做的是为win32控制台和MFC GUI创建包含某些API的dll。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-25T10:06:39.860

是的 - 与控制台和 MFC 应用程序一起使用时，本机 dll 的结构完全相同。

最简单的方法是在 Visual Studio 中创建一个新的普通 Win32 项目，并在应用程序设置中将应用程序类型设置为 DLL。选择导出符号复选框，项目将包括：

```
#ifdef TEST_EXPORTS
#define TEST_API __declspec(dllexport)
#else
#define TEST_API __declspec(dllimport)
#endif 
```

然后，您可以使用 TEST_API（或在您的应用程序中调用的任何函数）定义要从 DLL 导出的任何函数，例如

```
TEST_API int fnTest(void); 
```

并且它们可以从 MFC 和控制台应用程序中调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T14:39:02.853

你的问题根本没有意义。阅读有关 DLL 的 MSDN 详细文档，因为您不知道它是什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T10:00:55.003

我们没有理由不能这样做。您可以使用传统的 dllexport、dllimport 方式，也可以只创建一个 COM dll。

# python - 用 Python ping 一个站点？

> ID：316866
> 
> 赞同：86
> 
> 时间：2008-11-25T09:58:37.490
> 
> 标签：python, network-programming, ping

如何使用 Python ping 网站或 IP 地址？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2008-11-25T12:39:12.157

请参阅[Matthew Dixon Cowles](http://www.mondoinfo.com/)和[Jens Diemer 编写](http://www.jensdiemer.de/)的[纯 Python ping](https://github.com/jedie/python-code-snippets/blob/7f60492ecf3b573155c3c43270729a0be8cf7bc7/CodeSnippets/ping.py)。另外，请记住 Python 需要 root 才能在 linux 中生成 ICMP（即 ping）套接字。

```
import ping, socket
try:
    ping.verbose_ping('www.google.com', count=3)
    delay = ping.Ping('www.wikipedia.org', timeout=2000).do()
except socket.error, e:
    print "Ping Error:", e 
```

源代码本身很容易阅读，请参阅`verbose_ping`和 of的实现以`Ping.do`获得灵感。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2008-11-25T10:49:58.900

根据您想要实现的目标，您可能最容易调用系统 ping 命令。

使用 subprocess 模块是最好的方法，尽管您必须记住 ping 命令在不同的操作系统上是不同的！

```
import subprocess

host = "www.google.com"

ping = subprocess.Popen(
    ["ping", "-c", "4", host],
    stdout = subprocess.PIPE,
    stderr = subprocess.PIPE
)

out, error = ping.communicate()
print out 
```

您无需担心 shell 转义字符。例如..

```
host = "google.com; `echo test` 
```

..**不会**执行回显命令。

现在，要实际获得 ping 结果，您可以解析`out`变量。示例输出：

```
round-trip min/avg/max/stddev = 248.139/249.474/250.530/0.896 ms 
```

正则表达式示例：

```
import re
matcher = re.compile("round-trip min/avg/max/stddev = (\d+.\d+)/(\d+.\d+)/(\d+.\d+)/(\d+.\d+)")
print matcher.search(out).groups()

# ('248.139', '249.474', '250.530', '0.896') 
```

同样，请记住，输出会因操作系统（甚至 的版本`ping`）而异。这并不理想，但在许多情况下都可以正常工作（您知道脚本将在哪些机器上运行）

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2008-11-25T12:28:42.570

您可能会发现[Noah Gift 的](http://noahgift.com/)演示文稿 [使用 Python 创建敏捷命令行工具](http://www.slideshare.net/noahgift/pycon2008-cli-noahgift)。在其中，他结合了子进程、队列和线程来开发能够同时 ping 主机并加快进程的解决方案。以下是他添加命令行解析和其他一些功能之前的基本版本。这个版本和其他版本的代码可以在[这里找到](http://code.noahgift.com/pycon2008/pycon2008_cli_noahgift.zip)

```
#!/usr/bin/env python2.5
from threading import Thread
import subprocess
from Queue import Queue

num_threads = 4
queue = Queue()
ips = ["10.0.1.1", "10.0.1.3", "10.0.1.11", "10.0.1.51"]
#wraps system ping command
def pinger(i, q):
    """Pings subnet"""
    while True:
        ip = q.get()
        print "Thread %s: Pinging %s" % (i, ip)
        ret = subprocess.call("ping -c 1 %s" % ip,
            shell=True,
            stdout=open('/dev/null', 'w'),
            stderr=subprocess.STDOUT)
        if ret == 0:
            print "%s: is alive" % ip
        else:
            print "%s: did not respond" % ip
        q.task_done()
#Spawn thread pool
for i in range(num_threads):

    worker = Thread(target=pinger, args=(i, queue))
    worker.setDaemon(True)
    worker.start()
#Place work in queue
for ip in ips:
    queue.put(ip)
#Wait until worker threads are done to exit    
queue.join() 
```

他还着有：[Python for Unix and Linux System Administration](https://rads.stackoverflow.com/amzn/click/com/0596515820)

[http://ecx.images-amazon.com/images/I/515qmR%2B4sjL._SL500_AA240_.jpg](https://rads.stackoverflow.com/amzn/click/com/0596515820)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-11-25T11:12:56.840

很难说你的问题是什么，但有一些替代方案。

如果您的意思是使用 ICMP ping 协议从字面上执行请求，您可以获取 ICMP 库并直接执行 ping 请求。谷歌“Python ICMP”可以找到类似[icmplib](http://code.activestate.com/recipes/409689/)的东西。您可能还想查看[scapy](http://www.secdev.org/projects/scapy/)。

这将比使用`os.system("ping " + ip )`.

如果您的意思是一般地“ping”一个盒子以查看它是否已启动，您可以在端口 7 上使用 echo 协议。

对于 echo，您使用[套接字](http://www.python.org/doc/2.5.2/lib/module-socket.html)库打开 IP 地址和端口 7。您在该端口上写一些东西，发送回车 ( `"\r\n"`)，然后阅读回复。

如果您要“ping”一个网站以查看该网站是否正在运行，则必须在端口 80 上使用 http 协议。

对于或正确检查 Web 服务器，您使用[urllib2](http://www.python.org/doc/2.5.2/lib/module-urllib2.html)打开特定 URL。（`/index.html`总是很受欢迎）并阅读回复。

“ping”还有更多潜在的含义，包括“traceroute”和“finger”。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-07-22T12:59:52.790

我以这种方式做了类似的事情，作为灵感：

```
import urllib
import threading
import time

def pinger_urllib(host):
  """
  helper function timing the retrival of index.html 
  TODO: should there be a 1MB bogus file?
  """
  t1 = time.time()
  urllib.urlopen(host + '/index.html').read()
  return (time.time() - t1) * 1000.0

def task(m):
  """
  the actual task
  """
  delay = float(pinger_urllib(m))
  print '%-30s %5.0f [ms]' % (m, delay)

# parallelization
tasks = []
URLs = ['google.com', 'wikipedia.org']
for m in URLs:
  t = threading.Thread(target=task, args=(m,))
  t.start()
  tasks.append(t)

# synchronization point
for t in tasks:
  t.join() 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-09-19T07:35:43.840

这是一个使用`subprocess`. 该`check_call`方法要么返回 0 表示成功，要么引发异常。这样，我不必解析 ping 的输出。我`shlex`用来分割命令行参数。

```
 import subprocess
  import shlex

  command_line = "ping -c 1 www.google.comsldjkflksj"
  args = shlex.split(command_line)
  try:
      subprocess.check_call(args,stdout=subprocess.PIPE,stderr=subprocess.PIPE)
      print "Website is there."
  except subprocess.CalledProcessError:
      print "Couldn't get a ping." 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-11-21T20:05:29.277

我开发了一个我认为可以帮助你的库。它被称为 icmplib（与可以在 Internet 上找到的任何其他同名代码无关）并且是 Python 中 ICMP 协议的纯实现。

它是完全面向对象的，具有简单的功能，例如经典的 ping、multiping 和 traceroute，以及低级类和套接字，供那些希望基于 ICMP 协议开发应用程序的人使用。

以下是其他一些亮点：

*   可以在没有root权限的情况下运行。
*   您可以自定义许多参数，例如 ICMP 数据包的负载和流量类别 (QoS)。
*   跨平台：在 Linux、macOS 和 Windows 上测试。
*   与使用子进程进行的调用不同，速度快并且需要很少的 CPU / RAM 资源。
*   轻量级并且不依赖任何额外的依赖。

要安装它（需要 Python 3.6+）：

```
pip3 install icmplib 
```

下面是一个简单的 ping 函数示例：

```
host = ping('1.1.1.1', count=4, interval=1, timeout=2, privileged=True)

if host.is_alive:
    print(f'{host.address} is alive! avg_rtt={host.avg_rtt} ms')
else:
    print(f'{host.address} is dead') 
```

如果要在没有 root 权限的情况下使用库，请将“privileged”参数设置为 False。

您可以在项目页面上找到完整的文档： [https ://github.com/ValentinBELYN/icmplib](https://github.com/ValentinBELYN/icmplib)

希望你会发现这个库很有用。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-05-19T18:12:11.793

最简单的答案是：

```
import os
os.system("ping google.com") 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-12-01T13:14:48.080

读取文件名，该文件每行包含一个 url，如下所示：

```
http://www.poolsaboveground.com/apache/hadoop/core/
http://mirrors.sonic.net/apache/hadoop/core/ 
```

使用命令：

```
python url.py urls.txt 
```

得到结果：

```
Round Trip Time: 253 ms - mirrors.sonic.net
Round Trip Time: 245 ms - www.globalish.com
Round Trip Time: 327 ms - www.poolsaboveground.com 
```

源代码（url.py）：

```
import re
import sys
import urlparse
from subprocess import Popen, PIPE
from threading import Thread

class Pinger(object):
    def __init__(self, hosts):
        for host in hosts:
            hostname = urlparse.urlparse(host).hostname
            if hostname:
                pa = PingAgent(hostname)
                pa.start()
            else:
                continue

class PingAgent(Thread):
    def __init__(self, host):
        Thread.__init__(self)        
        self.host = host

    def run(self):
        p = Popen('ping -n 1 ' + self.host, stdout=PIPE)
        m = re.search('Average = (.*)ms', p.stdout.read())
        if m: print 'Round Trip Time: %s ms -' % m.group(1), self.host
        else: print 'Error: Invalid Response -', self.host

if __name__ == '__main__':
    with open(sys.argv[1]) as f:
        content = f.readlines() 
    Pinger(content) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-03-06T10:29:11.537

```
import subprocess as s
ip=raw_input("Enter the IP/Domain name:")
if(s.call(["ping",ip])==0):
    print "your IP is alive"
else:
    print "Check ur IP" 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-06-28T12:17:18.707

如果你想要在 Python 中实际使用的东西，你可以玩，看看 Scapy：

```
from scapy.all import *
request = IP(dst="www.google.com")/ICMP()
answer = sr1(request) 
```

在我看来，这比一些时髦的子进程调用要好得多（并且完全跨平台）。此外，您可以根据需要获得关于答案（序列 ID .....）的尽可能多的信息，就像您拥有数据包本身一样。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-11-16T12:10:29.630

[您可以在此处](http://www.g-loaded.eu/2009/10/30/python-ping/)找到适用于 Windows 和 Linux 的上述脚本的更新版本

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-25T17:12:11.640

using system ping command to ping a list of hosts:

```
import re
from subprocess import Popen, PIPE
from threading import Thread

class Pinger(object):
    def __init__(self, hosts):
        for host in hosts:
            pa = PingAgent(host)
            pa.start()

class PingAgent(Thread):
    def __init__(self, host):
        Thread.__init__(self)        
        self.host = host

    def run(self):
        p = Popen('ping -n 1 ' + self.host, stdout=PIPE)
        m = re.search('Average = (.*)ms', p.stdout.read())
        if m: print 'Round Trip Time: %s ms -' % m.group(1), self.host
        else: print 'Error: Invalid Response -', self.host

if __name__ == '__main__':
    hosts = [
        'www.pylot.org',
        'www.goldb.org',
        'www.google.com',
        'www.yahoo.com',
        'www.techcrunch.com',
        'www.this_one_wont_work.com'
       ]
    Pinger(hosts) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-06T20:09:59.703

使用 subprocess ping 命令对其进行 ping 解码，因为响应是二进制的：

```
import subprocess
ping_response = subprocess.Popen(["ping", "-a", "google.com"], stdout=subprocess.PIPE).stdout.read()
result = ping_response.decode('utf-8')
print(result) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-17T03:28:21.847

您可以尝试使用 socket 获取站点的 ip 并使用 scrapy 执行 icmp ping 到该 ip。

```
import gevent
from gevent import monkey
# monkey.patch_all() should be executed before any library that will
# standard library
monkey.patch_all()

import socket
from scapy.all import IP, ICMP, sr1

def ping_site(fqdn):
    ip = socket.gethostbyaddr(fqdn)[-1][0]
    print(fqdn, ip, '\n')
    icmp = IP(dst=ip)/ICMP()
    resp = sr1(icmp, timeout=10)
    if resp:
        return (fqdn, False)
    else:
        return (fqdn, True)

sites = ['www.google.com', 'www.baidu.com', 'www.bing.com']
jobs = [gevent.spawn(ping_site, fqdn) for fqdn in sites]
gevent.joinall(jobs)
print([job.value for job in jobs]) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-02-07T14:30:16.610

在 python 3 上，您可以使用[ping3](https://pypi.org/project/ping3/)。

```
from ping3 import ping, verbose_ping
ip-host = '8.8.8.8'
if not ping(ip-host):
    raise ValueError('{} is not available.'.format(ip-host)) 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-04-11T17:10:06.287

使用它在 python 2.7 上测试并运行良好，如果成功则返回 ping 时间（以毫秒为单位），失败时返回 False。

```
import platform,subproccess,re
def Ping(hostname,timeout):
    if platform.system() == "Windows":
        command="ping "+hostname+" -n 1 -w "+str(timeout*1000)
    else:
        command="ping -i "+str(timeout)+" -c 1 " + hostname
    proccess = subprocess.Popen(command, stdout=subprocess.PIPE)
    matches=re.match('.*time=([0-9]+)ms.*', proccess.stdout.read(),re.DOTALL)
    if matches:
        return matches.group(1)
    else: 
        return False 
```

# internet-explorer - 创建一个互联网浏览器插件

> ID：316874
> 
> 赞同：3
> 
> 时间：2008-11-25T10:01:45.563
> 
> 标签：internet-explorer, plugins

我无法在网上找到有关如何为 IE（6 和 7）创建插件的资源。你碰巧知道关于这个主题的好网站/教程吗？

顺便说一句，这就是我想这样做的原因：我们这里有一个与另一个链接的网络应用程序；即，当在某个页面上时，您可以启动一个书签（使用 javascript 的书签），它将解析页面并将数据发送到第二个网络应用程序。这在过去的 2 年中运行良好。

现在他们想要更新应用程序，并且小书签用来检索的信息现在分布在 2 页上。

所以我打算让插件查找每个加载的 url，如果它符合给定的模式，然后解析页面并存储数据。如果加载了第二个页面（再次使用 url 模式），则在页面上显示一个按钮，该按钮将使用检索到的数据启动另一个 Web 应用程序。

你觉得这有什么问题吗？（加分：2页之一包含框架）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T13:38:58.963

[这](http://www.codeguru.com/cpp/i-n/ieprogram/security/article.php/c11633__1/)是执行类似操作的 Browser Helper Object 的示例。在您的情况下，事件可能是 DISPID_DOWNLOADBEGIN （因为您想捕获任何访问的 URI，而不仅仅是用户输入的那些）。

请记住，杀毒软件不喜欢这样的插件，因为 troyan 程序经常使用类似的方式来记录用户的浏览历史记录。考虑通过 AJAX 执行此操作可能是一个好主意。

# javascript - 在移动 Web 应用程序中使用 JavaScript

> ID：316876
> 
> 赞同：4
> 
> 时间：2008-11-25T10:03:51.207
> 
> 标签：javascript, web-applications, mobile

我需要在移动 Web 应用程序的表单中使用 JavaScript。

我需要一些关于它的信息，与浏览器兼容性以及在移动 Web 应用程序中使用 JavaScript 的方式（语法）有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-25T10:22:48.547

这是一场噩梦。这就像在 90 年代使用网络浏览器，但要满足经理对明天的期望。

我强烈建议您根据区域、软件和实际硬件来确定您的目标平台，因为市场比 Web 更加分散，并且大量移动设备存在 CSS、JS 甚至 XHTML 的问题，从痛苦到不存在 -在这个平台上。

好消息是 android 和 iphone 正在迅速推动这一领域。坏消息是，这使得您将在谷歌上搜索的许多资源严重过时。

一些参考资料：

*   [http://www.w3.org/TR/mobileOK-basic10-tests/#test_objects_or_script](http://www.w3.org/TR/mobileOK-basic10-tests/#test_objects_or_script)
*   [http://mobiforge.com/developing/story/getting-started-with-mobile-ajax](http://mobiforge.com/developing/story/getting-started-with-mobile-ajax)
*   [http://mobiforge.com/](http://mobiforge.com/)

尤其是最后一个：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-09-02T14:08:26.990

自从提出这个问题以来，现实已经发生了变化。现代智能手机支持浏览器，与他们的桌面大哥兼容，具有相同的 JavaScript 支持。但是，应用程序的显示方式和操作方式仍然存在差异，不能依赖拖放，存在一些渲染差异，Opera Mobile 上的 GWT-Ext Showcase 中的 fg 选项卡关闭按钮没有渲染。所以你不应该依赖现代 JavaScript 的“魔法框架”，比如 Ext。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-01-11T21:45:06.667

同意“这是一场噩梦”的评论。

一些技巧：

*   对于简单的脚本，直接回到 JavaScript 基础——没有 JS 框架——想想 document.getElementById();
*   始终确保您的 JavaScript 有效。如果您有对象，请确保在正确的位置使用逗号和分号。一个简单的检查方法是在 Internet Explorer 中 - 在左下角检查有效或无效的 JavaScript 图标。
*   确保您的 Javascript 是 XML 有效的 - 如果不是，黑莓不会喜欢它。
*   对于更复杂的东西，请查看 jquery mobile：http: [//jquerymobile.com/](http://jquerymobile.com/) - 那里有一些不错的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-14T10:56:26.173

另一个针对多种设备（iPhone、Android、BlackBerry、Bada ...）并利用创新组件的好解决方案是使用 JavaScript Toolkit [Wink](http://www.winktoolkit.org/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-06T18:46:18.773

完全同意 anakata，

尝试在手机上使用 JavaScript 是一个雷区，事实上我们（我在移动代理机构工作）倾向于向客户建议您不要在移动页面中使用 JavaScript。

如果您必须使用 JavaScript，请查看

*   WURLF - [http://wurfl.sourceforge.net/](http://wurfl.sourceforge.net/)
*   MobiForge - [http://mobiforge.com/](http://mobiforge.com/)
*   移动元素 - [http://www.mobileelements.com/](http://www.mobileelements.com/)

我建议创建一个只有 iPhone 的网站，它具有所有很酷的功能，然后是一个普通的网站，供其他人使用，这样它就可以很好地为他们工作。

另请记住，您也可以在任何地方使用设备在多部手机上进行测试

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-03-13T18:36:33.387

库什，

我刚刚创建了一个名为 PhoneGap 的框架，您可以使用 javascript、html5 和 css 构建整个应用程序。您甚至可以使用设备原生功能。

查看更多信息[http://www.phonegap.com/about](http://www.phonegap.com/about)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-09-01T14:19:50.843

我建议你使用新的移动网络应用框架 Sencha [http://www.sencha.com/](http://www.sencha.com/)

该框架支持广泛的移动平台，如 Adroid、iPhone 等...

祝你好运，Yevgeniy V. Softjourn Inc. 软件开发人员。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-09-03T22:36:43.257

[您可能认识撰写quirksmode 博客](http://www.quirksmode.org/)的 Patrick H. Lauke 。不久前，他开始使用手机。

他以同样出色的品质在同一个网站上发布他的作品。

新手机的浏览器越来越好，这是事实，但不幸的是，更疯狂的错误正在弹出。

并非所有都与 javascript 相关，但您可以在以下位置查看他的移动页面：

[http://www.quirksmode.org/mobile/](http://www.quirksmode.org/mobile/)

# objective-c - 处理回调

> ID：316879
> 
> 赞同：5
> 
> 时间：2008-11-25T10:03:58.977
> 
> 标签：objective-c, cocoa

我在 Objective-C 类中有一个方法。它有 2 个用 C 编写的回调函数。类指针 ie`self`作为`void *`. 在 C 函数中，我创建了一个类类型的指针并分配`void *`参数。第一个回调函数执行成功。但是`void *`指针变成`nil`了第二个回调函数。请注意，我没有在第一个回调中调整指针，但我仍然`nil`在第二个回调中。

有什么想法可能会出错吗？

例如：

```
kr = IOServiceAddMatchingNotification(gNotifyPort, kIOFirstMatchNotification,
                                      matchingDict, RawDeviceAdded, NULL,
                                      &gRawAddedIter);

RawDeviceAdded(NULL, gRawAddedIter, self); 
```

这工作正常。但下面的函数接收`self`为`nil`.

```
kr = IOServiceAddMatchingNotification(gNotifyPort, kIOFirstMatchNotification,
                                      matchingDict, BulkTestDeviceAdded, NULL,
                                      &gBulkTestAddedIter);

BulkTestDeviceAdded(NULL, gBulkTestAddedIter, self); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-25T15:57:39.730

您的问题是否与 IOKit 回调例程有关？您给出的具体示例的问题是 IOServiceMatchingCallback 只需要 2 个参数，而不是 3 个。您需要 RawDeviceAdded() 和 BulkTestDeviceAdded() 回调函数来匹配 IOServiceMatchingCallback 原型并接受 self 作为第一个参数（refCon），而不是第 3 个。此外，您需要将 self 作为 IOServiceAddMatchingNotification() 的倒数第二个参数传入，以便通过回调将其传回给您。

在 Objective-C 代码中处理 C 回调的一种常用方法就是拥有一个将回调转发到您的实例的静态函数。因此，您的示例回调代码将如下所示：

```
static RawDeviceAdded(void* refcon, io_iterator_t iterator)
{
    [(MyClass*)refcon rawDeviceAdded:iterator];
}

@implementation MyClass
- (void)setupCallbacks
{
    // ... all preceding setup snipped
    kr = IOServiceAddMatchingNotification(gNotifyPort,kIOFirstMatchNotification, matchingDict,RawDeviceAdded,(void*)self,&gRawAddedIter );
    // call the callback method once to 'arm' the iterator
    [self rawDeviceAdded:gRawAddedIterator];
}
- (void)rawDeviceAdded:(io_iterator_t)iterator
{
    // take care of the iterator here, making sure to complete iteration to re-arm it
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T10:31:22.400

通常，Objective-C 中的回调是通过传递一个委托对象和一个选择器来处理该委托的。例如，此方法将在记录消息后调用其委托上的方法，同时传递自身和记录的消息。

```
- (void)logMessage:(NSString *)message
          delegate:(id)delegate
    didLogSelector:(SEL)didLogSelector
{
    NSLog(@"%@", message);

    if (delegate && didLogSelector && [delegate respondsToSelector:didLogSelector]) {
        (void) [delegate performSelector:didLogSelector
                              withObject:self
                              withObject:message];
    }
} 
```

你可以用这样的代码调用它：

```
- (void)sayHello
{
    [logger logMessage:@"Hello, world"
              delegate:self
        didLogSelector:@selector(messageLogger:didLogMessage:)];
}

- (void)messageLogger:(id)logger
        didLogMessage:(NSString *)message
{
    NSLog(@"Message logger %@ logged message '%@'", logger, message);
} 
```

您也可以`objc_msgSend()`直接使用，尽管您需要充分了解 Objective-C 运行时以选择使用哪个变体以及如何构造原型和调用它的函数指针。（这是在 Objective-C 中实际实现消息发送的机制——编译器通常会生成调用以表示`[]`表达式。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T10:08:52.727

这就是 Objective-C 的选择器的用途： [http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/NSInvocationOperation_Class](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/NSInvocationOperation_Class)

API不是很直观，但是一旦你理解它就很好

您可能还需要进行一些重构，现在可能有更好的方法，但是当我遇到这个问题时，我的解决方案是重构并使用 InvoationOperation。

# c# - ASP.NET MVC 将 ActionLink 中的 ID 传递给控制器

> ID：316889
> 
> 赞同：102
> 
> 时间：2008-11-25T10:07:09.297
> 
> 标签：c#, asp.net-mvc

我似乎无法检索我在控制器中的 html.ActionLink 中发送的 ID，这就是我想要做的

```
<li>
    <%= Html.ActionLink("Modify Villa", "Modify", "Villa", new { @id = "1" })%></li>

    public ActionResult Modify(string ID)
    {

        ViewData["Title"] =ID;
        return View();
    } 
```

这就是我遵循的教程推荐的内容，但它不起作用，它还在 URL 的末尾加上 ?Length=5 ！

这是我正在使用的路线，它是默认的

```
 routes.MapRoute(
            "Default",                                              // Route name
            "{controller}/{action}/{id}",                           // URL with parameters
            new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
        ); 
```

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2008-11-25T11:01:22.403

看起来您没有使用正确的 ActionLink 重载。试试这个：-

```
<%=Html.ActionLink("Modify Villa", "Modify", new {id = "1"})%> 
```

这假设您的视图位于 /Views/Villa 文件夹下。如果没有，那么我怀疑您需要：-

```
<%=Html.ActionLink("Modify Villa", "Modify", "Villa", new {id = "1"}, null)%> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-08T18:37:51.367

在 MVC 4 中，您可以从一个视图链接到另一个通过 Id 或主键传递的控制器

```
@Html.ActionLink("Select", "Create", "StudentApplication", new { id=item.PersonId }, null) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-11-25T10:48:59.480

不要把@放在id之前

```
new { id = "1" } 
```

当参数/路由不匹配时，框架将其“翻译”为 ?Lenght

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-12T13:22:27.183

在 MVC 5 上非常相似

```
@Html.ActionLink("LinkText", "ActionName", new { id = "id" }) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-09T08:23:13.393

ID 也可以与`@`前面的符号一起使用，但我们必须在此之后添加一个参数。那是`null`

看起来像：

```
@Html.ActionLink("Label Name", "Name_Of_Page_To_Redirect", "Controller", new {@id="Id_Value"}, null) 
```

# .net - 如何在 windbg 中找到我的 ReaderWriterLock 的锁持有者（阅读器）

> ID：316894
> 
> 赞同：2
> 
> 时间：2008-11-25T10:10:05.143
> 
> 标签：.net, windbg, deadlock, readerwriterlock

我有一个由于死锁而挂起的 .Net 进程的转储（gui 线程不再响应，我的日志显示某些线程已停止响应）。我已经拍了一张快照，现在正在windbg中查看它，所有线程都在等待最后一个。用 !clrstack -p 查看那个线程的堆栈跟踪，我可以看到它正在尝试获取对 ReaderWriterLock 的写入

我如何知道哪个其他线程持有该锁，以便我可以开始弄清楚死锁是如何发生的？

谢谢

[编辑] .Net1.1 sos.dll 中显然有一个命令 !rwlocks 可以帮助解决这个问题，但 .Net2.0 版本中没有。狩猎继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T18:40:04.770

我不是很确定，但你也许可以使用 !SyncBlk 来查看同步块对象，如果你在没有任何参数的情况下调用它，我认为你应该看到线程拥有的同步块。

如果你有一个同步块死锁，扩展[SOSEX](http://www.stevestechspot.com/SOSEXANewDebuggingExtensionForManagedCode.aspx)可能是你需要的。这个扩展提供了命令 !dlk 来显示哪些线程正在等待哪些锁。但这仅适用于同步块，不会检测到其他同步对象上的死锁，如果您使用 lock() (Monitor.Enter)，这对您来说应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-10T22:03:55.367

试试[sosex](http://www.stevestechspot.com/SOSEXANewDebuggingExtensionForManagedCode.aspx)和 !dlk

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T20:05:09.220

不久前我在这里发布了一个类似的主题，[使用 C# 是否可以测试文件上是否持有锁](https://stackoverflow.com/questions/698442/using-c-is-it-possible-to-test-if-a-lock-is-held-on-a-file/867537#867537)

我参考了许多文章等，但是等待链遍历 (WCT) 可以帮助您，这有点棘手，但这篇 msdn mag [bugslayer](http://msdn.microsoft.com/en-us/magazine/cc163395.aspx)文章展示了如何在托管上下文中在 windbg 中使用 WCT。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T11:48:04.787

到目前为止，最好的方法是查看所有线程堆栈的 !dso，并查看哪些引用了锁。之后的快速检查让我们能够追踪哪些线程持有锁。虽然真的不是一个漂亮或快速的方法......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T02:48:55.810

提供可追溯性的一种方法是将锁包装到 IDisposable 接口中并替换：

锁（我的锁）{...}

和

使用（新的 DisposeableLock（））{ ... }

您可以将构造函数和 Dispose() 方法记录到控制台、log4net 或其他一些机制。这将允许您查看正在锁定的内容以及正在阻止的内容。

# unit-testing - TDD 和 ADO.NET 实体框架

> ID：316897
> 
> 赞同：18
> 
> 时间：2008-11-25T10:14:01.313
> 
> 标签：unit-testing, entity-framework, ado.net, tdd, integration-testing

我最近一直在玩 ADO.NET Entity Framework，我发现它适合我正在开发的项目的需求。我也觉得它的非侵入性很酷。

从现有数据库生成数据模型后，您将面临集成生成模型和业务逻辑的任务。更具体地说，我习惯于集成测试我的类，这些类通过 DAL 接口的模拟/存根与数据存储交互。问题是您无法使用 ADO.NET Entity Framework 执行此操作，因为它生成的实体是没有接口的简单类。

问题是：如何将**TDD 方法**应用于开发使用 ADO.NET Entity Framework 的应用程序？这甚至可能还是我应该迁移到另一个 DAL 生成工具集？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-25T10:49:27.653

对实体框架的一大批评是它本身就很难测试，例如gef 引用的 ALT.Net[不信任投票。](http://efvote.wufoo.com/forms/ado-net-entity-framework-vote-of-no-confidence/)

[这是一篇博客文章](http://blogs.msdn.com/diego/archive/2008/03/03/unit-testing-your-entity-framework-domain-classes.aspx)，讨论了在使用实体框架时如何解决这个问题，并能够在不访问数据库的情况下测试您的代码。

如果可测试性是一个大问题，您可能想看看另一个 ORM 框架，例如 NHibernate，至少在 Entity Framework 2.0 发布之前。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-03-01T02:03:05.480

尽管已经回答了原始问题，但我觉得我可能会添加一些内容：

我目前在我正在构建的 Intranet 站点上使用 Entity Framework 4.0。我可以使用已添加的 POCO 支持在没有数据库连接的情况下测试我的业务逻辑和控制器中的所有内容。

虽然 POCO 可以从 VS 2010 中包含的新 t4 模板生成，但我在 VS 2010 中找不到的是用于生成对象上下文的 t4 模板（对象上下文基本上作为内置单元工作EF 的工作量，对于将 EF 对象映射到 POCO 至关重要）。幸运的是， **Joachim Lykke Andersen**在他的博文[Entity Framework 4.0 Beta 1 – POCO、ObjectSet、Repository 和 UnitOfWork](http://web.archive.org/web/20101030084504/http://devtalk.dk/CommentView,guid,b5d9cad2-e155-423b-b66f-7ec287c5cb06.aspx)中编写了一个 t4 模板来生成它，它非常有帮助。如果您使用无需数据库连接即可测试的 EF4 解决方案，我强烈建议您实施与他的解决方案类似的解决方案，其中包括通用存储库、工作单元包装器和工作单元工厂。这非常有帮助。

祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-01-26T04:22:46.903

我同意实体框架的版本 1 是对设计的犯罪，它肯定得到了我的不信任投票。我感谢 EF 产品团队承认失败并通过向社区开放他们的设计过程来做出回应。下一个版本不会是完美的，它甚至可能还没有准备好在生产级应用程序中使用，但我认为他们终于开始理解对于那些知道糟糕的设计是糟糕的业务的用户来说什么是重要的。话虽这么说……我还是很怀疑。持续的设计时反馈对这些人来说是新事物，我已经阅读了 ADO.NET 博客上的很多声明，这些声明引发了明亮的危险信号。我们将看到 .NET 4.0 的发布情况如何。

他们似乎正在尝试：

[使用 Entity Framework 4.0 的测试驱动开发演练](http://blogs.msdn.com/adonet/archive/2009/12/17/test-driven-development-walkthrough-with-the-entity-framework-4-0.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-25T10:38:30.107

> “持久性基础设施与实体类的紧密耦合在很大程度上消除了通过自动化测试在业务逻辑上有效使用非常紧凑的反馈周期的能力。在当前状态下，EF 实体类无法独立于数据库进行有效的单元测试。
> 
> 行为对象的自动化单元测试的效率很大程度上取决于测试数据设置机制的简单程度以及测试执行的速度。使用实际数据库将使测试数据设置更加费力，引入数据以满足与测试无关的关系约束，并使测试执行速度慢一个数量级。
> 
> 实体框架对基本软件设计原则（如关注点分离）的忽视损害了团队进行渐进式设计和增量交付的能力。”

从这里公然被盗： [http://efvote.wufoo.com/forms/ado-net-entity-framework-vote-of-no-confidence/](http://efvote.wufoo.com/forms/ado-net-entity-framework-vote-of-no-confidence/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-25T10:55:09.623

如果您专门研究 DAL 生成工具，您将很难将其与 TDD 集成。我知道的大多数 dal 生成工具也会生成您的业务对象并将它们与 DAL 紧密耦合，从而使测试变得困难。

您可以查看诸如 nHibernate 之类的 OR-mapping 工具，也许还有可以启用“持久性无知”的 Linq to sql，您可以自己定义业务对象，它们与 DAL 或任何其他基础设施代码没有链接。这使得与数据库分开测试您的业务逻辑变得更加容易。我发现它还可以更好地支持其他场景，例如偶尔连接的客户端。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-11T23:08:40.817

此答案已更改为“是的，您可以”。

您可以使用自定义的 T4 模板（例如[https://entityinterfacegenerator.codeplex.com/](https://entityinterfacegenerator.codeplex.com/) ）生成 POCO 和接口，然后创建模拟对象以测试 EF 进出，而无需访问数据库。

# javascript - JavaScript 横幅更改

> ID：316899
> 
> 赞同：0
> 
> 时间：2008-11-25T10:14:11.937
> 
> 标签：javascript, html

我想更改来自中央源的用于显示横幅的 JavaScript 的行为。

今天我在代码中包含了一个内联脚本标签，如下所示：

```
<script type="text/javascript" src="http://banner.com/b?id=1234"></script> 
```

但返回的是使用 的代码`document.write`，如下所示：

```
if(condition) {
    document.write('<a href="..."><img src="..." /></a>')
} 
```

我想以某种方式覆盖它`document.write`，并可能评估返回的代码，而是使用 JavaScript 框架将代码绑定到 DOM 准备好的 div 元素。

有没有办法做到这一点？像这样的东西？：

```
OnDOMReady() {
    BindBanner(1234);
}
BindBanner(bannerId) {
    var divTag = document.getElementById('banner_' + bannerId);
    divTag.innerHtml = ManipulatedReturenedCode(bannerId);
} 
```

JavaScript 的原型可以处理这样的事情吗？

**编辑**：它必须有点防水跨平台，跨浏览器兼容，所以我不知道改变`document.write`是否可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T10:16:44.893

您是否尝试过覆盖 document.write？我现在没有时间尝试，但试一试：

```
var foo = document.write;
var bannerCode = '';
document.write = function(str) { bannerCode += str; }; 
```

然后包含脚本文件，然后执行

```
document.write = foo;
alert(bannerCode); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T11:25:48.530

是的，您可以覆盖 document.write。原型设计不是必需的，您可以直接在文档对象本身上进行。我通常这样做是为了分析恶意软件，但它当然可以用于捕获广告脚本输出，只要广告脚本不进行任何特别复杂的处理，这会导致 document.write 和您替换它的任何内容之间的差异.

这是一个加载广告 onload 的包装器（比 DOMReady 稍晚）：

```
<div id="advertgoeshere"></div>

<script type="text/javascript">
    function rewrite(w) {
        document.getElementById('advertgoeshere').innerHTML+= w;
    }

    window.onload= function() {
        document.write= rewrite;
        var script= document.createElement('script');
        script.type= 'text/javascript';
        script.src= 'http://externalsite/ads.js';
        document.body.appendChild(script);
    }
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-11-25T10:49:04.563

为什么不使用 jQuery？它具有 DOM 就绪功能：

```
$.ready(function() {

}); 
```

然后您可以使用

```
$("#div_id").html 
```

# c# - 将一封或多封邮件从 Outlook 拖放到 C# WPF 应用程序

> ID：316900
> 
> 赞同：32
> 
> 时间：2008-11-25T10:14:29.593
> 
> 标签：c#, wpf, outlook, drag-and-drop

我正在使用 .Net 3.5 Sp1 上的 C# 用 WPF 编写的 Windows 客户端，其中的要求是客户端收到的电子邮件中的数据可以存储在数据库中。现在最简单的处理方法是复制和粘贴文本、主题、联系信息和手动接收的时间，使用引起关节炎的量 ctrl-c/ctrl-v。

我认为处理此问题的一种简单方法是允许用户将一封或多封电子邮件从 Outlook（它们目前都使用 Outlook 2007）拖到窗口中，允许我的应用程序提取必要的信息并将其发送到后端存储系统。

然而，在谷歌上搜索这方面的信息几个小时似乎表明关于这个看似基本的任务的信息令人震惊地缺乏。我认为这样的事情在很多不同的环境中都会很有用，但到目前为止我所能找到的只是半生不熟的非解决方案。

有人对如何做到这一点有任何建议吗？因为我只是要阅读邮件而不是发送任何东西或做任何邪恶的事情，所以最好有一个不涉及讨厌的安全弹出窗口的解决方案，但任何事情都胜过根本无法做到这一点。

基本上，如果我能获得所有从 Outlook 中选择、拖放的邮件项目的列表，我将能够自己处理其余的！

谢谢！

符文

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-06-09T22:42:47.280

我找到了一篇很棒的[文章](http://www.codeproject.com/KB/office/outlook_drag_drop_in_cs.aspx)，它应该完全符合您的需要。

**更新**

稍作调整，我就可以让那篇文章中的代码在 WPF 中工作，以下是您需要进行的更改。

将所有引用从 System.Windows.Forms.IDataObject 更改为 System.Windows.IDataObject

在 OutlookDataObject 构造函数中，更改

```
FieldInfo innerDataField = this.underlyingDataObject.GetType().GetField("innerData", BindingFlags.NonPublic | BindingFlags.Instance); 
```

到

```
FieldInfo innerDataField = this.underlyingDataObject.GetType().GetField("_innerData", BindingFlags.NonPublic | BindingFlags.Instance); 
```

将所有 DataFormats.GetFormat 调用更改为 DataFormats.GetDataFormat

将 SetData 实现从

```
public void SetData(string format, bool autoConvert, object data)
{
    this.underlyingDataObject.SetData(format, autoConvert, data);
} 
```

到

```
public void SetData(string format, object data, bool autoConvert)
{
    this.underlyingDataObject.SetData(format, data, autoConvert);
} 
```

通过这些更改，我能够像文章一样将消息保存到文件中。抱歉格式化，但编号/项目符号列表不适用于代码片段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-23T09:55:51.300

我发现很多解决方案建议您对所有文件名使用“FileGroupDescriptor”，并在 DragEventArgs 对象上使用“FileContents”来检索每个文件的数据。“FileGroupDescriptor”适用于电子邮件名称，但“FileContents”返回 null，因为 .Net 中的 IDataObject 实现无法处理 COM 返回的 IStorage 对象。

[David Ewen 在http://www.codeproject.com/KB/office/outlook_drag_drop_in_cs.aspx](http://www.codeproject.com/KB/office/outlook_drag_drop_in_cs.aspx)上有很好的解释、出色的示例和代码下载，效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-25T16:43:16.720

在您的 Xaml 中，您需要设置您的事件：

```
<TextBlock
        Name="myTextBlock"  
        Text="Drag something into here"
        AllowDrop="True" 
        DragDrop.Drop="myTextBlock_Drop"
        /> 
```

一旦您设置了 AllowDrop = True 并设置您放置事件，然后转到后面的代码并设置您的事件：

```
private void myTextBlock_Drop(object sender, DragEventArgs e)
{
         // Mark the event as handled, so TextBox's native Drop handler is not called.
         e.Handled = true;
         Stream sr;

          //Explorer 
          if (e.Data.GetDataPresent(DataFormats.FileDrop, true))
              //Do somthing

        //Email Message Subject 
        if (e.Data.GetDataPresent("FileGroupDescriptor"))
        {
            sr = e.Data.GetData("FileGroupDescriptor") as Stream;
                StreamReader sr = new StreamReader(sr2);//new StreamReader(strPath, Encoding.Default);
            //Message Subject
                    string strFullString = sr.ReadToEnd();
         }

} 
```

如果您想进一步分解它，您可以使用：FILEDESCRIPTOR 或 FILECONTENTS 作为以下[文章中的概述](http://groups.google.com/group/borland.public.cppbuilder.activex/msg/8d1858871b027248)

您的另一个选择是绑定到 Outlook [MS Office Primary Interop Assemblies](http://www.terminally-incoherent.com/blog/2008/04/30/drag-and-drop-outlook-emails-onto-net-application/)并以这种方式分解消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T16:16:26.370

我认为[.NET（WPF 和 WinForms）中的 Shell 样式拖放](http://blogs.msdn.com/adamroot/pages/shell-style-drag-and-drop-in-net-wpf-and-winforms.aspx)可以为您提供帮助。一旦您可以使用 COM 接口响应拖放，您应该能够从 Outlook 中获取数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-11T09:46:52.867

我假设您有一个在 Outlook 后面运行的 Exchange 服务器。

您可以做的是从 Exchange 服务器检索邮件并根据邮件的`EntryID`和`StoreID`. 这是一个 VB.Net 片段：

```
Imports Microsoft.Office.Interop

Public Class OutlookClientHandler

Private _application As Outlook.Application
Private _namespace As Outlook.NameSpace

Public Sub New()
    If Process.GetProcessesByName("outlook".ToLower).Length > 0 Then
        _application = New Outlook.Application
    Else
        Dim startInfo As ProcessStartInfo = New ProcessStartInfo("outlook.exe")
        startInfo.WindowStyle = ProcessWindowStyle.Minimized
        Process.Start(startInfo)

        _application = New Outlook.Application
    End If
End Sub

' Retrieves the specified e-mail from Outlook/Exchange via the MAPI
Public Function GetMailItem(ByVal entryID as String, ByVal storeID as String) As Outlook.MailItem
    _namespace = _application.GetNamespace("MAPI")
    Dim item As Outlook.MailItem
    Try
        item = _namespace.GetItemFromID(entryID, storeID)
    Catch comex As COMException
        item = Nothing ' Fugly, e-mail wasn't found!
    End Try

    Return item
End Function
End Class 
```

我猜你对使用 MAPI 很满意，否则你可以在这里阅读：http: [//msdn.microsoft.com/en-us/library/cc765775 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/cc765775(v=office.12).aspx)

从 Outlook 中检索选定的电子邮件：

```
Public Function GetSelectedItems() As List(Of Object) 
    Dim items As List(Of Object) = New List(Of Object)

    For Each item As Object In _application.ActiveExplorer().Selection
        items.Add(item)
    Next

    Return items
End Function 
```

从 Outlook 检索电子邮件后，您可以将它们推送到您的数据库中！保存他们的`EntryID`and `StoreID`（您可能还想存储他们父级的（文件夹的）`EntryID`and `StoreID`）。

# c# - 如何检查我是否可以在特定文件夹中创建文件

> ID：316903
> 
> 赞同：8
> 
> 时间：2008-11-25T10:15:33.430
> 
> 标签：c#, .net, permissions, filesystems

我需要知道是否可以在特定文件夹中创建文件，但是要检查的东西太多了，例如权限、重复文件等。我正在寻找类似的东西`File.CanCreate(@"C:\myfolder\myfile.aaa"`），但还没有找到这样的方法。我唯一想到的就是尝试创建一个虚拟文件并检查异常，但这是一个丑陋的解决方案，也会影响性能。你知道更好的解决方案吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-25T10:20:58.600

实际上，创建一个虚拟文件不会对大多数应用程序产生巨大的性能影响。当然，如果您拥有创建但不销毁的高级权限，它可能会有点麻烦......

对于随机名称（以避免冲突），Guids 总是很方便 - 例如：

```
string file = Path.Combine(dir, Guid.NewGuid().ToString() + ".tmp");
// perhaps check File.Exists(file), but it would be a long-shot...
bool canCreate;
try
{
    using (File.Create(file)) { }
    File.Delete(file);
    canCreate = true;
}
catch
{
    canCreate = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T10:23:25.317

您可以使用[CAS](http://msdn.microsoft.com/en-us/library/930b76w0.aspx)来验证没有**.NET 策略 (caspol)**限制在该位置创建和写入文件。

但这不会涵盖 Windows 策略。您必须手动检查 NTFS 策略。即使这样，也有一些进程可以决定不允许您创建文件（例如病毒扫描程序）。

最好和最完整的方法是尝试一下。

# .net - 为什么 ASP.NET 页面在本地主机上比在生产服务器上慢得多

> ID：316904
> 
> 赞同：10
> 
> 时间：2008-11-25T10:15:57.080
> 
> 标签：.net, iis

标题几乎总结了它，我确信有一个完全有效的解释，
但是当相同的代码快速起泡时，在我的本地计算机上加载页面（编译后）似乎需要永远“活”的时候。

我正在开发 Vista、IIS7、相当不错的硬件；而服务器是单台机器，在 Xeon <3 ghz 和千兆线路上运行 Windows server 2003 和 IIS6。

当然，我知道 Web 服务器是专门为此类活动量身定制的，
但一台机器通过远程服务器一次服务多达 2-300 个会话
（在约 5 个 .Net 2.0 应用程序上分布不均）似乎仍然很奇怪与在本地运行代码相比，网络（又名互联网；-）
在呈现页面方面要快得多......

就是想了好久的一件事……

**更新**
非常感谢您的回答！只是想我会在上面添加几点：

*   尝试清除本地主机周围的所有障碍；关闭防火墙和杀毒软件，停止往我的电脑机箱里倒牛奶，杀死任何繁重的进程等等。
*   这不仅仅包含在一个项目或应用程序中；自从我开始担任开发人员（~1 年）以来，这是我注意到并想知道的事情
*   不要认为不可访问的资源有任何意义；在本地工作时，我通常在本地拥有项目的所有资产（图片、flash 等）
*   在打开或关闭缓存方面看不出任何区别。

从我目前正在处理的项目中选择一个随机页面，完全重新加载了几次；在本地，我在大约 4 秒内得到它，而从服务器大约 2 秒。这是使用FF和Firebug；使用 Opera 时，我感觉差异较小，但这只是我的直觉......

所以我想这会留下（正如你提到的）硬盘驱动器和数据库连接......看起来很奇怪......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-25T12:35:06.847

如果您使用的是 FireFox 或 Safari，并且您使用的是 Windows Vista，那么您应该*禁用*IP 版本 6，因为这会与 Vista 与 WebDev 和 FireFox/Safari 的组合混淆...

在 FF 中，在地址栏中输入*about:config*，过滤“IPv6”并将启用设置为 FALSE！

这是 Windows Vista 中 IPv6 的一个错误，很可能会导致您遇到麻烦...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T11:14:40.440

这至少有两个原因：

*   首先，您的本地服务器可能在调试模式下运行页面，并附加了调试器。这使一切运行缓慢

*   其次，每次更改页面代码或重新启动服务器时，都必须重新编译所有页面，这需要一些时间。

在您的生产服务器上，页面被编译一次，然后将编译后的版本提供给所有用户，您可能没有在调试模式下运行（我希望！）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-04T12:06:41.490

好吧...在升级我的机器（Q9550@3.4ghz，1TB >100mb/s 搜索驱动器）之后，即使让这台计算机完成工作（MS SQL 服务器，IIS）与托管在的同一页面相比，我也几乎没有区别去吧爸爸。当问我最初的问题时，我有一台稍微小一点的机器，并将它与我公司的专用服务器进行了比较。所以这个问题的答案基本上是：他们不是。感谢您的所有回答！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T10:24:35.503

在您描述的设置中，应用程序没有理由不应该在本地快速运行 - 也许您还有其他事情要做。

首先要查看的是您在开发盒上运行的内容：防病毒或软件防火墙可能是这些东西的杀手，您可能想在禁用的情况下进行测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T10:30:48.360

您还可以检查您的站点是否正在尝试从您的开发机器访问不可用的内容（不可用的 url）。我之前遇到过这个问题几次。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-25T12:31:52.673

我很惊讶还没有人提到硬盘。硬盘通常是系统中的典型瓶颈，桌面硬盘通常比服务器 (SCSI) 磁盘慢很多。桌面工作站还可以运行更多同时使用磁盘的进程，而服务器机器更优化为仅运行关键服务器进程。但当然，这一切都取决于机器到底在做什么。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-25T18:23:40.573

您实际上是通过 IIS7 运行它还是通过 Visual Studio 的[ASP.NET Development Server](http://msdn.microsoft.com/en-us/library/58wxa9w5(VS.80).aspx)运行它？如果是后者，那么……那是有很大原因的。ASP.NET 开发服务器经过优化以调试应用程序，而不是快速运行它们。

问题的另一半是您实际上并没有告诉我们您机器的规格，只是说它是“好的硬件”，通常不是计算机的指标。Vista 确实占用了一些资源，包括它的新显示管理器（用于 Aero Glass 桌面）和它倾向于将通常运行的应用程序预加载到 RAM 中。

听起来您也可能正在从您的桌面运行数据库服务器，这会消耗更多服务器机器不会占用的资源，因为它们很可能有（a）单独的数据库服务器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-25T10:58:42.173

您是否考虑过可能是因为缓存？即生产服务器上的页面被缓存，本地主机上的页面不被缓存。

我也同意 terjetyl 的观点，您的本地主机可能无法找到链接文件（例如 javascript 源文件），您的防火墙可能会阻止这些...。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-25T12:29:44.843

如果服务器上存储了应用程序需要访问的东西，这将大大减慢速度 - 是的，我见过有一个生产服务器托管整个公司唯一可用的数据库系统的地方，用于生产和发展。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-25T12:35:55.393

小百万的事情在游戏中：更快的网络；更好的数据库服务器运行很长时间并且之前已经执行了所有查询；...也许是由于 Vista :)

# c# - 如何将泛型集合指定为泛型方法中的限制

> ID：316911
> 
> 赞同：3
> 
> 时间：2008-11-25T10:19:55.357
> 
> 标签：c#, generics

阿罗哈

我有一个带有（伪）签名的方法：

```
public static T Parse<T>(string datadictionary) where T : List<U> 
```

这不成立。如何将方法中的 限制为仅接受泛型 List<> 对象（当然不应该包含 T，而是其他内容：）

我需要限制 T 的类型，因为我需要在这段代码中调用它的方法。传入的类型是自定义集合（基于List）。

```
public class MyCollection<T> : List<T> where T: MyClass, new()
{
    public void Foo();
}

public static T Parse<T>(string datadictionary) where T : MyCollection<U>
{
    T.Foo();
} 
```

-Edoode

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-25T10:24:05.580

好吧，你可以有两个类型参数：

```
public static T Parse<T, U>(string datadictionary) where T : List<U> 
```

这样，您实际上也将知道 U 是什么（以编译时的方式）...

编辑：或者（更好），只需指定元素类型并更改返回类型：

```
public static List<T> Parse<T>(string datadictionary) 
```

例如

```
List<int> data = Parse<int>(whatever); 
```

请注意，您可能希望从 更改`List<T>`为`IList<T>`甚至更广泛的界面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T10:34:18.807

假设我正确阅读了问题，并且您想返回`T`where `T : List<U>`(for some `T`and `U`) ...

顺便说一句 - 子类化`List<T>`通常不是很有用......`List<T>`不提供任何有用的虚拟方法。子类化`Collection<T>`提供了更大的灵活性。当然，你可以让你的代码不在乎，只需对`IList<T>`接口进行编码，也许添加`: new()`这样你就可以创建列表本身：

```
public static TList Parse<TList, TItem>(string datadictionary)
    where TList : IList<TItem>, new() {...} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T10:35:04.967

您也可以这样做，无需指定类型限制`List<u>`

```
 public static List<T> Parse<T>(string datadictionary) ... 
```

# sql - 是否可以使用 CONTAINSTABLE 在 column1 中搜索“word1”和 column2 中的“word2”

> ID：316916
> 
> 赞同：1
> 
> 时间：2008-11-25T10:21:50.967
> 
> 标签：sql, sql-server, tsql, full-text-search

我们曾经有一个搜索，它会检查两列中的某些单词。两列都必须包含一些提供的单词，所以我们使用 AND ... 毫无疑问，FULLTEXT INDEX 用于列。

选择或多或少是这样的：

```
SELECT
    * 
FROM SomeTable
WHERE (CONTAINS(Column1, 'word1 OR word2') AND CONTAINS(Column2, 'word3 OR word4')) 
```

现在我们需要在结果中添加排名。我们想使用 CONTAINSTABLE 功能......只有一列很简单。就像是：

```
SELECT
    SomeTable.*,
    tmp.RANK
FROM SomeTable
INNER JOIN CONTAINSTABLE(SomeTable, Column1, 'word1 OR word2') as tmp
ON tmp.[KEY] = SomeTable.ID 
```

是否可以使用 2 列但考虑到我只需要在 column1 中搜索 word1 或 word2 （如果我们在 column2 中有 word1 或 word2 不感兴趣）。还要考虑在 where 子句中的 AND。有没有类似的东西：

```
SELECT
    SomeTable.*,
    tmp.RANK
FROM SomeTable
INNER JOIN CONTAINSTABLE(SomeTable, (Column1, Column2), 'column1:(word1 OR word2) AND column2:(word3 OR word4)') as tmp
ON tmp.[KEY] = SomeTable.ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T11:21:41.910

您可以通过在第二个包含表上的内部连接来做到这一点，尽管您可能想做一些比我在示例中添加排名更有趣的事情

```
SELECT
    SomeTable.*,    
    col1.RANK + col2.RANK
FROM 
    SomeTable
INNER JOIN CONTAINSTABLE(SomeTable, Column1, 'word1 OR word2') as col1 ON 
    col1.[KEY] = SomeTable.ID
INNER JOIN CONTAINSTABLE(SomeTable, Column2, 'word3 OR word4') as col2 ON 
    col2.[KEY] = SomeTable.ID 
```

# wpf - 数据输入窗口的 WPF 最佳实践

> ID：316921
> 
> 赞同：16
> 
> 时间：2008-11-25T10:22:51.310
> 
> 标签：wpf, layout, lob

我目前正在使用 WPF，现在我想知道典型数据输入窗口（20 多个文本框和其他东西）的布局是什么。

atm 我正在使用这样的网格对象（基本示例）

```
 <Grid Margin="2,2,2,2">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions >
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>

            <Label Grid.Row="0" Grid.Column="0">Vorname:</Label>
            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Path=Surname, UpdateSourceTrigger=PropertyChanged}" ></TextBox>

            <Label Grid.Row="1" Grid.Column="0">Nachname:</Label>
            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=ChristianName, UpdateSourceTrigger=PropertyChanged}"></TextBox>

            <Label Grid.Row="2" Grid.Column="0">Strasse (Wohnsitz):</Label>
            <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding Path=Street1, UpdateSourceTrigger=PropertyChanged}"></TextBox>

            <Label Grid.Row="3" Grid.Column="0">Ort (Wohnsitz):</Label>
            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Path=Town1, UpdateSourceTrigger=PropertyChanged}"></TextBox>

            <Label Grid.Row="4" Grid.Column="0">Postleitzahl (Wohnsitz):</Label>
            <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding Path=PostalCode1, UpdateSourceTrigger=PropertyChanged}"></TextBox>

            <Label Grid.Row="5" Grid.Column="0">Bundesland (Wohnsitz):</Label>
            <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding Path=State1, UpdateSourceTrigger=PropertyChanged}"></TextBox>

            <Label Grid.Row="6" Grid.Column="0">Land (Wohnsitz):</Label>
            <TextBox Grid.Row="6" Grid.Column="1" Text="{Binding Path=Country1, UpdateSourceTrigger=PropertyChanged}"></TextBox>

            <Label Grid.Row="7" Grid.Column="0">Zusatz (Wohnsitz):</Label>
            <TextBox Grid.Row="7" Grid.Column="1" Text="{Binding Path=AdditionalAdrInfo1, UpdateSourceTrigger=PropertyChanged}"></TextBox>

    </Grid> 
```

基本上这满足了我所有的布局需求，但是如果我想改变一些东西，比如在第 3 行添加一个新的文本框呢？

目前我必须更改大于 3 的每个 Grid.Row 属性，但这不能是预期的 WPF 方式！？

其他人如何布局复杂的数据输入窗口？

蒂亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T17:39:42.347

就个人而言，我是 AutoGrid 的忠实粉丝：http: [//www.codeplex.com/wpfcontrib/Wiki/View.aspx? title=AutoGrid&referringTitle=Home](http://www.codeplex.com/wpfcontrib/Wiki/View.aspx?title=AutoGrid&referringTitle=Home)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T10:32:09.823

有些人使用嵌套`StackPanel`s 来“解决”这个问题，但恕我直言，这只是引入了另一个问题（代码膨胀）。我认为解决这个问题的最好方法是编写自己的面板，在列中连续布置孩子。我在以前的项目中这样做过，它有很多优点：

*   更具可读性和简洁的 XAML
*   更容易维护 XAML
*   更快的性能

用法看起来像这样：

```
<local:FieldPanel>
    <Label>Field 1:</Label>
    <TextBox/>

    <Label>Field 2:</Label>
    <TextBox/>

    <Label>Field 3:</Label>
    <TextBox/>
</local:FieldPanel> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-25T12:17:54.277

Karl Shifflett 对 WPF 中的 LOB 表单也有一个很好的方法：http: [//karlshifflett.wordpress.com/2008/10/23/wpf-silverlight-lob-form-layout-searching-for-a-better-solution/](http://karlshifflett.wordpress.com/2008/10/23/wpf-silverlight-lob-form-layout-searching-for-a-better-solution/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-16T17:04:09.467

这是另一种表单布局[http://www.slideshare.net/ackava/ui-atoms-form-layout](http://www.slideshare.net/ackava/ui-atoms-form-layout)

# asp.net-mvc - RouteValueDictionary 被上下文覆盖

> ID：316924
> 
> 赞同：4
> 
> 时间：2008-11-25T10:24:04.257
> 
> 标签：asp.net-mvc, routing

如果您有路线：

```
routes.MapRoute("search", "{controller}/{action}/{filter1}/{filter2}/{filter3}", _
  New With {.filter1 = "", .filter2 = "", .filter3 = ""}) 
```

然后在一个由 url 的路由模式满足的视图中`/member/search/dev/phil/hoy`，当您尝试创建另一个仅`filter1`存在的路由 url 即

```
<%=Url.RouteUrl(New RouteValueDictionary(
  New With {.controller="member",.action="search", .filter1="dev"}))%> 
```

结果是当前路线`/member/search/dev/phil/hoy`，而不是预期的修剪路线`/member/search/dev`

我已经设法通过`RouteTable.Routes.GetVirtualPath`直接使用方法来解决这个问题，但是有谁知道它为什么会这样工作，或者它可能是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-12-08T00:45:46.413

MVC 中的 C 不代表复杂...

我相信你不应该使用 URLs Routes 来实现这种类型的功能 - 你最好将这种数据作为 POST 或 GET （我更喜欢前者它的堆更整洁）传递给 CONTROLLER，然后从那里。

需要多长时间才能使您的路线图因众多不同的搜索组合而变得完全笨拙？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-07T22:46:11.040

您可以尝试以下方法，看看它是否有效。

放置这个，

```
routes.MapRoute("search", "{controller}/{action}/{filter1}/", _
  New With {.controller="member",.action="search", .filter1="dev"}) 
```

..前，

```
routes.MapRoute("search", "{controller}/{action}/{filter1}/{filter2}/{filter3}", _
  New With {.filter1 = "", .filter2 = "", .filter3 = ""}) 
```

具体到泛型。

# asp.net - 如何在 ASP.NET 的 GridView 中定义 CellPadding

> ID：316931
> 
> 赞同：11
> 
> 时间：2008-11-25T10:25:39.587
> 
> 标签：asp.net, gridview

*   我在 ASP.NET 中自动格式化 GridView。
*   它看起来不错，但标题都像这样一起运行：

    **idfirstNamelastNameage**

*   我设置了 CellPadding="5" 但它什么也没做。

如何设置标题和所有单元格的单元格填充？

附录：

谢谢安德鲁，我用这个修复了它。适用于 Firefox 和 Explorer 7：

```
.gridview2 tr td
{
    padding: 5px;
    border: 1px solid #ddd;
}
.gridview2 tr th
{
    padding: 5px;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-25T10:37:15.243

您应该设置一个 cssclass 并使用 css 来控制它。您无法使用 css 完全控制跨浏览器的表格的唯一属性是单元格间距。

```
.myTableClass tr th {
    padding: 5px;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-25T11:08:13.603

GridView 还有一个属性“CellPadding”和“CellSpacing”可以帮助我们做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:11:08.873

检查生成的 HTML 并找到它创建的表。检查表的 ID。使用 id，将以下行添加到您的 CSS。当所有其他方法都失败时，这对我有用..

```
#YourTableIdFoo th , #YourTableIdFoo td 
{
    padding-right:      1em;
} 
```

# .net - 在不重新构建的情况下更改程序集的清单

> ID：316937
> 
> 赞同：3
> 
> 时间：2008-11-25T10:28:25.900
> 
> 标签：.net, assemblies, manifest

在 .NET 中，是否有工具或其他方法允许我们修改程序集的清单，而无需修改 AssemblyInfo 并重新构建程序集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-12-10T16:48:40.083

您可以使用 MT.exe。它随 SDK 一起提供。[这里](http://community.bartdesmet.net/blogs/bart/archive/2006/10/28/Windows-Vista-_2D00_-Demand-UAC-elevation-for-an-application-by-adding-a-manifest-using-mt.exe.aspx)有一个很好的解释如何使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T15:21:12.280

您可以使用二进制编辑器来修改清单。我使用 UltraEdit 打开 dll 并修改清单。它是 PE 文件的纯文本部分 - 通常位于文件末尾附近。

此外，您通常不能使用此方法添加到程序集中。更改字节是安全的，但不能添加或删除。从程序集中删除字节的等价物是将字符替换为空格字符 - 这样总字节数不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T15:14:22.093

您可以使用此处所述的 IL 反汇编器/汇编器工具：

> [编辑程序集的清单等...](http://www.codeproject.com/KB/msil/ManifestEdit.aspx)

# iis - StackOverflowException 加载 XsltCompiledTransform

> ID：316938
> 
> 赞同：7
> 
> 时间：2008-11-25T10:28:56.337
> 
> 标签：iis, xslt, xslcompiledtransform

加载 XslCompiledTransform 时，我有一些大的 xslt 崩溃 iis (StackOverflowException)，而旧的（不推荐使用的）XslTransform 工作正常。大模板是否存在一些已知问题？奇怪的是，相同的 XslCompiledTransform 在 win32 应用程序中成功加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T10:33:18.357

啊，您知道这里的问题更多是由于 IIS（我假设它是一个 Web 应用程序，因为您也在 Win 应用程序中尝试它）。

IIS（从 Win2003 起）“愚蠢地”只保留了分配给其他程序的正常堆栈空间的四分之一。与 1MB 相比，这只有 256KB。

要变通解决此问题，您可以在线程中运行此操作。在线程的构造函数中，您可以指定新的堆栈保留大小。尝试增加数字直到它起作用，而不要超过顶部。

# .net - 线程加载（等待）屏幕

> ID：316940
> 
> 赞同：4
> 
> 时间：2008-11-25T10:29:20.843
> 
> 标签：.net, vb.net, multithreading, screen, loading

我正在寻找一种在长时间操作期间实现等待屏幕的通用方法。我以前使用过几次线程，但我觉得我实现它要么很差，要么太麻烦（和复制/粘贴——太可怕了！）。

我想让它尽可能通用和简单，这样我就不必实现大量的`BackgroundWorker`s 处理各种废话，使事情难以维护。

这是我想做的——请注意，这可能与实际可能的/最佳实践/无论如何不同——使用 VB.NET、Framework 2.0（所以没有匿名方法）：

```
 Private Sub HandleBtnClick(sender as Object, e as EventArgs) Handles Button.Click
      LoadingScreen.Show()

      'Do stuff here, this takes a while!'
      Dim Result as Object = DoSomethingTakingALongTime(SomeControl.SelectedObject)

      LoadingScreen.Hide()

      ProcessResults(Result)
  End Sub 
```

该应用程序现在完全是单线程的，所以一切都在 GUI 线程上运行。我需要能够在`DoSomethingTakingALongTime()`没有跨线程异常的情况下访问对象。GUI 线程等待某个方法（这需要很长时间）完成，而`LoadingScreen`表单应该保持响应（它是动画的/有一个进度条等）。

这是一种可行/好的方法，还是我认为这种方式过于简单？关于这个问题的最佳做法是什么？最重要的是：我怎样才能实现这样的系统？正如我已经提到的，我对线程的经验很少，所以请保持温和:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T13:21:33.117

您的问题是，当您尝试将 Worker 线程数据传递给您的 ui 线程时，您会遇到跨线程异常。您需要做的是在您的 ui 上设置控件之前检查 InvokeRequired 和 begininvoke，这样您就不会收到如下错误：

```
Private Sub work_CrossThreadEvent(ByVal sender As Object, ByVal e As System.EventArgs) Handles work.CrossThreadEvent

       If Me.InvokeRequired Then
           Me.BeginInvoke(New EventHandler(AddressOf work_CrossThreadEvent), New Object() {sender, e})
           Return
       End If

      Me.Text = "Cross Thread"

End Sub 
```

只需将`New EventHandler`部分更改为您使用的事件处理程序。

另外我认为使用后台工作者对你的工作者类来说不是一个坏方法，只需为你的工作创建一个类并使用后台工作者来做线程工作有点像这样：

```
Public MustInherit Class Worker

    Protected WithEvents worker As BackgroundWorker

    Public Sub New()

        worker = New BackgroundWorker()
        worker.WorkerReportsProgress = True
        worker.WorkerSupportsCancellation = True

    End Sub

    Public Sub Start()

        If (Not worker.IsBusy AndAlso Not worker.CancellationPending) Then
            worker.RunWorkerAsync()
        End If

    End Sub

    Public Sub Cancel()
        If (worker.IsBusy AndAlso Not worker.CancellationPending) Then
            worker.CancelAsync()
        End If
    End Sub

    Protected MustOverride Sub Work()

    Private Sub OnDoWork(ByVal sender As Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles worker.DoWork
        Work()
    End Sub

    Public Event WorkCompelted As RunWorkerCompletedEventHandler
    Private Sub OnRunWorkerCompleted(ByVal sender As Object, ByVal e As RunWorkerCompletedEventArgs) Handles worker.RunWorkerCompleted
        OnRunWorkerCompleted(e)
    End Sub
    Protected Overridable Sub OnRunWorkerCompleted(ByVal e As RunWorkerCompletedEventArgs)
        RaiseEvent WorkCompelted(Me, e)
    End Sub

    Public Event ProgressChanged As ProgressChangedEventHandler
    Private Sub OnProgressChanged(ByVal sender As Object, ByVal e As ProgressChangedEventArgs) Handles worker.ProgressChanged
        OnProgressChanged(e)
    End Sub
    Protected Overridable Sub OnProgressChanged(ByVal e As ProgressChangedEventArgs)
        RaiseEvent ProgressChanged(Me, e)
    End Sub

End Class

Public Class ActualWork
    Inherits Worker

    Public Event CrossThreadEvent As EventHandler

    Protected Overrides Sub Work()

        'do work here'
        WorkABit()
        worker.ReportProgress(25)

        WorkABit()
        worker.ReportProgress(50)

        WorkABit()
        worker.ReportProgress(75)

        WorkABit()
        worker.ReportProgress(100)

    End Sub

    Private Sub WorkABit()

        If worker.CancellationPending Then Return
        Thread.Sleep(1000)
        RaiseEvent CrossThreadEvent(Me, EventArgs.Empty)

    End Sub

End Class 
```

*免责声明.. vb 有点生疏，但你应该明白。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T10:31:02.290

在您的线程中，使用 Application.Run(yourform) 来获得您想要的。

请注意，您需要以某种方式向表单发出信号以自行关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T10:41:11.180

我希望你不会觉得这没有帮助 - 但我会质疑为什么你想要一个线程等待屏幕？首先使用线程的原因是为了让 UI 保持响应，并且在后台完成长时间的操作。

否则，您还不如在 FormLoading 控件上有一个 ProgressBar，并让 DoSomethingTakingALongTime 定期更新它。这根本不需要线程。

# javascript - jQuery/JavaScript - 有很多小 .js 文件时的性能问题？

> ID：316944
> 
> 赞同：3
> 
> 时间：2008-11-25T10:30:50.950
> 
> 标签：javascript, jquery, performance, include, jscompress

我有一个包含很多引用的 .js 文件的站点；这些是相当小的文件，但我想让我的方法按主题/功能分开。

将所有方法保存在一个 .js 文件中是否更好，或者有许多（〜 20 - 30）个小文件都只包括一些行没有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T10:33:20.663

无论如何都要将它们分开以进行开发，但是您应该考虑将它们捆绑到一个文件中以进行生产。

在[sitepoint.com上有一个很好的讨论](http://www.sitepoint.com/blogs/2007/04/10/faster-page-loads-bundle-your-css-and-javascript/)

> 对于这些文件中的每一个，都会向服务器发送一个 HTTP 请求，然后浏览器在请求下一个文件之前等待响应。浏览器的限制（或限制）通常会阻止并行下载。这意味着对于每个文件，您等待请求到达服务器，服务器处理请求，以及回复（包括文件内容本身）到达您。端到端，其中一些可以对页面加载时间产生很大影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T10:35:18.617

实际上，拥有这么多引用文件是个坏主意。性能问题的基本思路是尽量减少 HTTP 请求（至少在您的生产服务器上）。看看这个[http://developer.yahoo.com/performance/rules.html#num_http](http://developer.yahoo.com/performance/rules.html#num_http)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T10:45:27.067

有没有人有一个聪明的 nant 脚本可以为你做到这一点？我编写了一个自定义的 nant 任务，它使用 YUI 压缩器来缩小我的 css 和 js，但是添加组合会很有用。你们怎么处理这个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-25T10:46:13.743

我不知道你在服务器端使用什么框架（如果有的话），但是 Ruby on Rails 有一个脚本包含函数，它可以根据设置（例如测试或生产）创建大量脚本标签（通常是测试模式）或创建一个标签，将所有脚本连接成一个（可选地用一些插件压缩）文件。我相信许多其他框架也支持这样的东西。

更新：我只记得：您也可以手动压缩（通过去除空格和注释、缩短变量名等）并将 javascript 文件和 CSS 文件与[Yahoo! UI 库：YUI 压缩器](http://developer.yahoo.com/yui/compressor/)。在压缩之前确保你的 JavaScript 是正确的，试试[JSLint](http://www.jslint.com/lint.html)。

# delphi - 将 TWebBrowser 转换为 TWinControl

> ID：316949
> 
> 赞同：2
> 
> 时间：2008-11-25T10:33:16.093
> 
> 标签：delphi

谁能告诉我为什么第二个演员无法在 Delphi 7 中编译？

```
var
  WebBrowser: TWebBrowser;
begin
  WebBrowser := TWebBrowser.Create(Self);
  TWinControl(WebBrowser).Parent := Self;
  (WebBrowser as TWinControl).Parent := Self; // fail here
end 
```

TWebBrowser 中的 Parent 是一个只读的 IDispatch 属性，但是为什么第一个转换看到 TWinControl 父属性可以，而第二个没有？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-25T11:02:10.187

第一个演员不使用检查，它假设程序员是正确的并继续。第二个演员使用了一些理智检查。（如果强制转换无效，则会导致异常）。我认为在这种情况下，编译器会因为类似的命名属性而感到困惑。它甚至可能是一个过度热情的优化器。

至少，

```
var
  wc : TWinControl;
begin
  wc := (WebBrowser as TWinControl);
  wc.Parent := Self;
end; 
```

作品。所以有一个规避。

# naming-conventions - 是否有一种标准方法来命名从流中读取但不推进指针的函数？

> ID：316965
> 
> 赞同：3
> 
> 时间：2008-11-25T10:45:43.493
> 
> 标签：naming-conventions

我只能想到 Peek() 和 ReadNoAdvance() atm，但我想知道是否有更好或标准的选项。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-25T10:48:10.633

peek 是标准名称，以各种语言出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T12:08:25.870

我见过 ReadAhead()，但我认为 Peek() 更标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-04-30T03:29:08.187

在编写解析器时，我也经常使用`lookahead`.

# c# - 查询嵌套数据的有效方法

> ID：316967
> 
> 赞同：4
> 
> 时间：2008-11-25T10:47:09.747
> 
> 标签：c#, .net, sql-server, sql-server-2008

我需要从一个表中选择一些“主”行，同时为每个结果返回另一个表中的一些详细信息行。什么是在没有多个查询的情况下实现此目的的好方法（一个用于主行，一个用于获取详细行的结果）。

例如，具有如下数据库结构：

```
MasterTable:
    - MasterId BIGINT
    - Name NVARCHAR(100)

DetailTable:
    - DetailId BIGINT
    - MasterId BIGINT
    - Amount MONEY 
```

我将如何最有效地填充`data`下面的对象？

```
IList<MasterDetail> data;

public class Master
{
    private readonly List<Detail> _details = new List<Detail>();

    public long MasterId
    {
        get; set;
    }

    public string Name
    {
        get; set;
    }

    public IList<Detail> Details
    {
        get
        {
            return _details;
        }
    }
}

public class Detail
{
    public long DetailId
    {
        get; set;
    }

    public decimal Amount
    {
        get; set;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T11:36:15.903

通常，我会选择两个网格方法 - 但是，您可能还想查看 FOR XML - 将父/子数据塑造为 xml 并从那里。

```
SELECT parent.*,
       (SELECT * FROM child
       WHERE child.parentid = parent.id FOR XML PATH('child'), TYPE)
FROM parent
FOR XML PATH('parent') 
```

此外 - LINQ-to-SQL 支持这种类型的模型，但您需要提前告诉它您想要哪些数据。通过[DataLoadOptions.LoadWith](http://msdn.microsoft.com/en-us/library/system.data.linq.dataloadoptions.loadwith.aspx)：

```
// sample from MSDN
Northwnd db = new Northwnd(@"c:\northwnd.mdf");
DataLoadOptions dlo = new DataLoadOptions();
dlo.LoadWith<Customer>(c => c.Orders);
db.LoadOptions = dlo;

var londonCustomers =
    from cust in db.Customers
    where cust.City == "London"
    select cust;

foreach (var custObj in londonCustomers)
{
    Console.WriteLine(custObj.CustomerID);
} 
```

如果您不使用`LoadWith`，您将获得 n+1 个查询 - 每个主行一个主列表和一个子列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T11:41:06.847

可以通过这样的单个查询来完成：

```
select   MasterTable.MasterId,
         MasterTable.Name,
         DetailTable.DetailId,
         DetailTable.Amount
from     MasterTable
         inner join
         DetailTable
         on MasterTable.MasterId = DetailTable.MasterId
order by MasterTable.MasterId 
```

然后在伪代码中

```
foreach(row in result)
{
   if (row.MasterId != currentMaster.MasterId)
   {
       list.Add(currentMaster);
       currentMaster = new Master { MasterId = row.MasterId, Name = row.Name };
   }
   currentMaster.Details.Add(new Detail { DetailId = row.DetailId, Amount = row.Amount});
}
list.Add(currentMaster); 
```

有一些优势可以消除它，但它应该给你一个大致的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T11:11:58.170

从 master 中选择 <columns>

select < columns > from master M join Child C on M.Id = C.MasterID

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-25T11:16:01.297

您可以通过两个查询和一个传递每个结果集来做到这一点：

查询由 MasterId 排序的所有主节点，然后查询也由 MasterId 排序的所有详细信息。然后，使用两个嵌套循环，迭代主数据并在主循环中为每一行创建一个新的 Master 对象，并在它们具有与当前 Master 对象相同的 MasterId 时迭代细节，并在嵌套循环中填充其 _details 集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-25T11:17:36.863

根据数据集的大小，您可以使用两个查询（一个用于所有主数据，一个用于所有嵌套数据）将所有数据拉入内存中的应用程序，然后使用它以编程方式为每个对象创建子列表像：

```
List<Master> allMasters = GetAllMasters();
List<Detail> allDetail = getAllDetail();

foreach (Master m in allMasters)
    m.Details.Add(allDetail.FindAll(delegate (Detail d) { return d.MasterId==m.MasterId }); 
```

使用这种方法，您实际上是在用内存占用换取速度。`GetAllMasters`您可以轻松地调整它，以便`GetAllDetail`只返回您感兴趣的主项目和详细项目。另请注意，为了有效，您需要将 MasterId 添加到详细信息类

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-29T01:18:17.260

这是您可以考虑的替代方案。每个开发人员确实要花费 150 美元，但时间就是金钱……

我们使用一个名为[实体空间](http://www.entityspaces.net/Portal/Default.aspx)的对象持久层，它会为您生成代码以完全按照您的意愿行事，并且您可以在架构更改时重新生成。用数据填充对象是透明的。使用上面描述的对象看起来像这样（请原谅我的 VB，但它也适用于 C#）：

```
Dim master as New BusinessObjects.Master
master.LoadByPrimaryKey(43)
Console.PrintLine(master.Name)
For Each detail as BusinessObjects.Detail in master.DetailCollectionByMasterId
   Console.PrintLine(detail.Amount)
   detail.Amount *= 1.15
End For
With master.DetailCollectionByMasterId.AddNew
   .Amount = 13
End With
master.Save() 
```

# sql-server - 将 MS Excel 数据粘贴到 SQL Server

> ID：316978
> 
> 赞同：75
> 
> 时间：2008-11-25T10:51:08.070
> 
> 标签：sql-server, excel, copy-paste

我在 Excel 中有一堆行，我想将它们粘贴到 MS SQL 中的新表中。有简单的方法吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2009-10-13T12:54:48.297

如果您有 SQL Server Management Studio，则可以使用鼠标从 Excel 复制并粘贴到 Management Studio 的表中。只是

1.  转到要粘贴到的表。
2.  选择“编辑前 200 行”。
3.  右键单击任意位置并选择粘贴。

在执行此操作之前，您必须匹配 Excel 和 Management Studio 之间的列。此外，您必须使用 Management Studio 中的表设计器将任何不可编辑的列放在*最后（最右侧）。*

整个过程需要几秒钟（*设置和启动*- 不一定要执行）并且不需要任何 SQL 语句。

关于[空数据库表和 SSMS v18.1+](https://stackoverflow.com/questions/316978/paste-ms-excel-data-to-sql-server/1560048?noredirect=1#comment100791953_1560048)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2008-11-25T11:06:10.707

我过去曾成功使用过这种技术：

**[使用 Excel 为 SQL Server 生成插入](http://tgrignon.wordpress.com/2007/03/07/using-excel-to-generate-inserts-for-sql-server/)**

> (...) 跳过一列（或将其用作注释），然后在其中键入类似于以下公式的内容：
> 
> `="insert into tblyourtablename (yourkeyID_pk, intmine, strval) values ("&A4&", "&B4&", N'"&C4&"')"`
> 
> 现在，您已经获得了包含主键 (PK)、整数和 unicode 字符串的表的插入语句。(...)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-11-17T01:54:05.707

**Excel**

1.  在 Excel 中，突出显示并复制要粘贴到 SQL 中的数据。

**SQL**

2.  使用所需的列名创建表并为表命名。*确保`Identity Specification`是，所以它会自动增加您的身份列。
3.  找到您的表，然后右键单击它并`Edit Top 200 Rows`从对话框中选择。
4.  右键单击带有 * 号的空行，然后从对话框中选择粘贴

[![在此处输入图像描述](https://i.stack.imgur.com/6YjRH.gif)](https://i.stack.imgur.com/6YjRH.gif)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-08-19T14:20:36.590

供将来参考：

您可以通过执行以下操作将数据从 en excel-sheet 复制粘贴到 SQL 表：

1.  在 Excel 中选择数据并按**Ctrl + C**
2.  在 SQL Server Management Studio 中，右键单击表并选择**编辑前 200 行**
3.  滚动到底部并通过单击行标题选择整个空行
4.  按**Ctrl + V粘贴数据**

注意：通常表的第一列是具有自动生成/递增 ID 的 ID 列。当您粘贴数据时，它将开始将 Excel 中最左侧的选定列插入 SSMS 中的最左侧列，从而将数据插入 ID 列。为了避免这种情况，请在选择的最左侧保留一个空列，以便在 SSMS 中跳过该列。这将导致 SSMS 插入默认数据，即自动生成的 ID。此外，您可以通过在 Excel 工作表选择中与要跳过的列相同的序号位置设置空列来跳过其他列。这将使 SSMS 插入默认值（或未指定默认值的*NULL ）。*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-06T15:39:52.797

我开发了一个 Excel VBA 宏，用于将 Excel 中的任何选择剪切并粘贴到 SQL Server 中，从而创建一个新表。该宏非常适合快速创建多达几千行和多列的脏表（理论上它可以管理多达 200 列）。该宏尝试自动检测标题名称并为每一列分配最合适的数据类型（它处理最多 1000 个字符的 varchar 列）。

推荐的安装程序：

1.  确保 Excel 已启用以运行宏。（文件->选项->信任中心->信任中心设置->宏设置->启用所有宏..）
2.  将下面的 VBA 代码复制到与您的个人工作簿关联的模块（以便宏可用于所有工作表）
3.  为宏分配适当的击键（我已分配 Ctrl Shift X）
4.  保存您的个人工作簿

宏的使用

1.  在 Excel 中选择要传输到 SQL 的单元格（包括列标题，如果它们存在）
2.  按您已分配的已分配关键字组合以运行宏
3.  按照提示进行操作。（默认表名是##Table）
4.  将剪贴板内容粘贴到 SSMS 窗口中并运行生成的 SQL 代码。布里弗里 238

VBA代码：

```
Sub TransferToSQL()
'
' TransferToSQL Macro
' This macro prepares data for pasting into SQL Server and posts it to the clipboard for inserting into SSMS
' It attempts to automatically detect header rows and does a basic analysis of the first 15 rows to determine the most appropriate datatype to use handling text entries upto 1000 chars.
'
' Max Number of Columns: 200
'
' Keyboard Shortcut: Ctrl+Shift+X
'
' ver   Date    Reason
' ===   ====    ======

' 1.6   06/2012 Fixed bug that prevented auto exit if no selection made / auto exit if blank Tablename entered or 'cancel' button pressed
' 1.5   02/2012 made use of function fn_ColLetter to retrieve the Column Letter for a specified column
' 1.4   02/2012 Replaces any Tabs in text data to spaces to prevent Double quotes being output in final results
' 1.3   02/2012 Place the 'drop table if already exists' code into a separate batch to prevent errors when inserting new table with same name but different shape and > 100 rows
' 1.2   01/2012 If null dates encountered code to cast it as Null rather than '00-Jan-1900'
' 1.1   10/2011 Code to drop the table if already exists
' 1.0   03/2011 Created

Dim intLastRow As Long
Dim intlastColumn As Integer
Dim intRow As Long
Dim intDataStartRow As Long
Dim intColumn As Integer
Dim strKeyWord As String
Dim intPos As Integer
Dim strDataTypeLevel(4) As String
Dim strColumnHeader(200) As String
Dim strDataType(200) As String
Dim intRowCheck As Integer
Dim strFormula(20) As String
Dim intHasHeaderRow As Integer
Dim strCellRef As String
Dim intFormulaCount As Integer
Dim strSQLTableName As String
Dim strSQLTableName_Encap As String
Dim intdataTypelevel As Integer
Const strConstHeaderKeyword As String = "ID,URN,name,Title,Job,Company,Contact,Address,Post,Town,Email,Tele,phone,Area,Region,Business,Total,Month,Week,Year,"
Const intConstMaxBatchSize As Integer = 100
    Const intConstNumberRowsToAnalyse As Integer = 100
intHasHeaderRow = 0

strDataTypeLevel(1) = "VARCHAR(1000)"
strDataTypeLevel(2) = "FLOAT"
strDataTypeLevel(3) = "INTEGER"
strDataTypeLevel(4) = "DATETIME"

' Use current selection and paste to new temp worksheet

    Selection.Copy
    Workbooks.Add       ' add temp 'Working' Workbook
    ' Paste "Values Only" back into new temp workbook
    Range("A3").Select  ' Goto 3rd Row
    Selection.PasteSpecial Paste:=xlFormats, Operation:=xlNone, SkipBlanks:=False, Transpose:=False ' Copy Format of Selection
    Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False  ' Copy Values of Selection
    ActiveCell.SpecialCells(xlLastCell).Select  ' Goto last cell
    intLastRow = ActiveCell.Row
    intlastColumn = ActiveCell.Column

' Check to make sure that there are cells which are selected
If intLastRow = 3 And intlastColumn = 1 Then
    Application.DisplayAlerts = False       ' Temporarily switch off Display Alerts
    ActiveWindow.Close                      ' Delete newly created worksheet
    Application.DisplayAlerts = True        ' Switch display alerts back on
    MsgBox "*** Please Make selection before running macro - Terminating ***", vbOKOnly, "Transfer Data to SQL Server"
    Exit Sub
End If

' Prompt user for Name of SQL Server table
strSQLTableName = InputBox("SQL Server Table Name?", "Transfer Excel Data To SQL", "##Table")

' if blank table name entered or 'Cancel' selected then exit
If strSQLTableName = "" Then
    Application.DisplayAlerts = False       ' Temporarily switch off Display Alerts
    ActiveWindow.Close                      ' Delete newly created worksheet
    Application.DisplayAlerts = True        ' Switch display alerts back on
    Exit Sub
End If

' encapsulate tablename with square brackets if user has not already done so
strSQLTableName_Encap = Replace(Replace(Replace("[" & Replace(strSQLTableName, ".", "].[") & "]", "[]", ""), "[[", "["), "]]", "]")

' Try to determine if the First Row is a header row or contains data and if a header load names of Columns
Range("A3").Select
For intColumn = 1 To intlastColumn
    ' first check to see if the first row contains any pure numbers or pure dates
    If IsNumeric(ActiveCell.Value) Or IsDate(ActiveCell.Value) Then
    intHasHeaderRow = vbNo
    intDataStartRow = 3
    Exit For
    Else
    strColumnHeader(intColumn) = ActiveCell.Value
    ActiveCell.Offset(1, 0).Range("A1").Select  ' go to the row below
    If IsNumeric(ActiveCell.Value) Or IsDate(ActiveCell.Value) Then
        intHasHeaderRow = vbYes
        intDataStartRow = 4
    End If
    ActiveCell.Offset(-1, 0).Range("A1").Select  ' go back up to the first row
    If intHasHeaderRow = 0 Then     ' if still not determined if header exists: Look for header using keywords
        intPos = 1
        While intPos < Len(strConstHeaderKeyword) And intHasHeaderRow = 0
        strKeyWord = Mid$(strConstHeaderKeyword, intPos, InStr(intPos, strConstHeaderKeyword, ",") - intPos)
        If InStr(1, ActiveCell.Value, strKeyWord) > 0 Then
            intHasHeaderRow = vbYes
            intDataStartRow = 4
        End If
        intPos = InStr(intPos, strConstHeaderKeyword, ",") + 1
        Wend
    End If
    End If
    ActiveCell.Offset(0, 1).Range("A1").Select  ' Goto next column
Next intColumn

' If auto header row detection has failed ask the user to manually select
If intHasHeaderRow = 0 Then
    intHasHeaderRow = MsgBox("Does current selection have a header row?", vbYesNo, "Auto header row detection failure")
    If intHasHeaderRow = vbYes Then
    intDataStartRow = 4
    Else
    intDataStartRow = 3
    End If

End If

' *** Determine the Data Type of each Column ***

' Go thru each Column to find Data types
If intLastRow < intConstNumberRowsToAnalyse  Then             ' Check the first intConstNumberRowsToAnalyse  rows or to end of selection whichever is less
    intRowCheck = intLastRow
Else
    intRowCheck = intConstNumberRowsToAnalyse 
End If

For intColumn = 1 To intlastColumn
    intdataTypelevel = 5

    For intRow = intDataStartRow To intRowCheck
    Application.Goto Reference:="R" & CStr(intRow) & "C" & CStr(intColumn)
    If ActiveCell.Value = "" Then   ' ignore blank (null) values
    ElseIf IsDate(ActiveCell.Value) = True And Len(ActiveCell.Value) >= 8 Then
        If intdataTypelevel > 4 Then intdataTypelevel = 4
    ElseIf IsNumeric(ActiveCell.Value) = True And InStr(1, CStr(ActiveCell.Value), ".") = 0 And (Left(CStr(ActiveCell.Value), 1) <> "0" Or ActiveCell.Value = "0") And Len(ActiveCell.Value) < 10 Then
        If intdataTypelevel > 3 Then intdataTypelevel = 3
    ElseIf IsNumeric(ActiveCell.Value) = True And InStr(1, CStr(ActiveCell.Value), ".") >= 1 Then
        If intdataTypelevel > 2 Then intdataTypelevel = 2
    Else
        intdataTypelevel = 1
        Exit For
    End If
    Next intRow
    If intdataTypelevel = 5 Then intdataTypelevel = 1
    strDataType(intColumn) = strDataTypeLevel(intdataTypelevel)
Next intColumn

' *** Build up the SQL
intFormulaCount = 1
If intHasHeaderRow = vbYes Then     ' *** Header Row ***
    Application.Goto Reference:="R4" & "C" & CStr(intlastColumn + 1)    ' Goto next column in first data row of selection
    strFormula(intFormulaCount) = "= ""SELECT "
    For intColumn = 1 To intlastColumn
    If strDataType(intColumn) = "DATETIME" Then         ' Code to take Excel Dates back to text
        strCellRef = "Text(" & fn_ColLetter(intColumn) & "4,""dd-mmm-yyyy hh:mm:ss"")"
    ElseIf strDataType(intColumn) = "VARCHAR(1000)" Then
        strCellRef = "SUBSTITUTE(" & fn_ColLetter(intColumn) & "4,""'"",""''"")" ' Convert any single ' to double ''
    Else
        strCellRef = fn_ColLetter(intColumn) & "4"
    End If

    strFormula(intFormulaCount) = strFormula(intFormulaCount) & "CAST('""& " & strCellRef & " & ""' AS " & strDataType(intColumn) & ") AS [" & strColumnHeader(intColumn) & "]"
    If intColumn < intlastColumn Then
        strFormula(intFormulaCount) = strFormula(intFormulaCount) + ", "
    Else
        strFormula(intFormulaCount) = strFormula(intFormulaCount) + " UNION ALL """
    End If
    ' since each cell can only hold a maximum no. of chars if Formula string gets too big continue formula in adjacent cell
    If Len(strFormula(intFormulaCount)) > 700 And intColumn < intlastColumn Then
        strFormula(intFormulaCount) = strFormula(intFormulaCount) + """"
        intFormulaCount = intFormulaCount + 1
        strFormula(intFormulaCount) = "= """
    End If
    Next intColumn

 ' Assign the formula to the cell(s) just right of the selection
    For intColumn = 1 To intFormulaCount
    ActiveCell.Value = strFormula(intColumn)
    If intColumn < intFormulaCount Then ActiveCell.Offset(0, 1).Range("A1").Select  ' Goto next column
    Next intColumn

 ' Auto Fill the formula for the full length of the selection
    ActiveCell.Offset(0, -intFormulaCount + 1).Range("A1:" & fn_ColLetter(intFormulaCount) & "1").Select
    If intLastRow > 4 Then Selection.AutoFill Destination:=Range(fn_ColLetter(intlastColumn + 1) & "4:" & fn_ColLetter(intlastColumn + intFormulaCount) & CStr(intLastRow)), Type:=xlFillDefault

 ' Go to start row of data selection to add 'Select into' code
   ActiveCell.Value = "SELECT * INTO " & strSQLTableName_Encap & " FROM (" & ActiveCell.Value

 ' Go to cells above data to insert code for deleting old table with the same name in separate SQL batch
   ActiveCell.Offset(-1, 0).Range("A1").Select  ' go to the row above
   ActiveCell.Value = "GO"
   ActiveCell.Offset(-1, 0).Range("A1").Select  ' go to the row above
   If Left(strSQLTableName, 1) = "#" Then      ' temp table
       ActiveCell.Value = "IF OBJECT_ID('tempdb.." & strSQLTableName & "') IS NOT NULL DROP TABLE " & strSQLTableName_Encap
   Else
       ActiveCell.Value = "IF OBJECT_ID('" & strSQLTableName & "') IS NOT NULL DROP TABLE " & strSQLTableName_Encap
   End If

' For Big selections (i.e. several 100 or 1000 rows) SQL Server takes a very long time to do a multiple union - Split up the table creation into many inserts
    intRow = intConstMaxBatchSize + 4   ' add 4 to make sure 1st batch = Max Batch Size
    While intRow < intLastRow
    Application.Goto Reference:="R" & CStr(intRow - 1) & "C" & CStr(intlastColumn + intFormulaCount)  ' Goto Row before intRow and the last column in formula selection
    ActiveCell.Value = Replace(ActiveCell.Value, " UNION ALL ", " ) a") ' Remove last 'UNION ALL'

    Application.Goto Reference:="R" & CStr(intRow) & "C" & CStr(intlastColumn + 1)    ' Goto intRow and the first column in formula selection
    ActiveCell.Value = "INSERT " & strSQLTableName_Encap & " SELECT * FROM (" & ActiveCell.Value
    intRow = intRow + intConstMaxBatchSize   ' increment intRow by intConstMaxBatchSize
    Wend

    ' Delete the last 'UNION AlL' replacing it with brackets to mark the end of the last insert
    Application.Goto Reference:="R" & CStr(intLastRow) & "C" & CStr(intlastColumn + intFormulaCount)
    ActiveCell.Value = Replace(ActiveCell.Value, " UNION ALL ", " ) a")

    ' Select all the formula cells
    ActiveCell.Offset(-intLastRow + 2, 1 - intFormulaCount).Range("A1:" & fn_ColLetter(intFormulaCount + 1) & CStr(intLastRow - 1)).Select
Else    ' *** No Header Row ***
    Application.Goto Reference:="R3" & "C" & CStr(intlastColumn + 1)    ' Goto next column in first data row of selection
    strFormula(intFormulaCount) = "= ""SELECT "

    For intColumn = 1 To intlastColumn
    If strDataType(intColumn) = "DATETIME" Then
        strCellRef = "Text(" & fn_ColLetter(intColumn) & "3,""dd-mmm-yyyy hh:mm:ss"")"   ' Format Excel dates into a text Date format that SQL will pick up
    ElseIf strDataType(intColumn) = "VARCHAR(1000)" Then
        strCellRef = "SUBSTITUTE(" & fn_ColLetter(intColumn) & "3,""'"",""''"")"         ' Change all single ' to double ''
    Else
        strCellRef = fn_ColLetter(intColumn) & "3"
    End If

    ' Since no column headers: Name each column "Column001",Column002"..
    strFormula(intFormulaCount) = strFormula(intFormulaCount) & "CAST('""& " & strCellRef & " & ""' AS " & strDataType(intColumn) & ") AS [Column" & CStr(intColumn) & "]"
    If intColumn < intlastColumn Then
        strFormula(intFormulaCount) = strFormula(intFormulaCount) + ", "
    Else
        strFormula(intFormulaCount) = strFormula(intFormulaCount) + " UNION ALL """
    End If

    ' since each cell can only hold a maximum no. of chars if Formula string gets too big continue formula in adjacent cell
    If Len(strFormula(intFormulaCount)) > 700 And intColumn < intlastColumn Then
        strFormula(intFormulaCount) = strFormula(intFormulaCount) + """"
        intFormulaCount = intFormulaCount + 1
        strFormula(intFormulaCount) = "= """
    End If
    Next intColumn

    ' Assign the formula to the cell(s) just right of the selection
    For intColumn = 1 To intFormulaCount
    ActiveCell.Value = strFormula(intColumn)
    If intColumn < intFormulaCount Then ActiveCell.Offset(0, 1).Range("A1").Select  ' Goto next column
    Next intColumn

 ' Auto Fill the formula for the full length of the selection
    ActiveCell.Offset(0, -intFormulaCount + 1).Range("A1:" & fn_ColLetter(intFormulaCount) & "1").Select
    If intLastRow > 4 Then Selection.AutoFill Destination:=Range(fn_ColLetter(intlastColumn + 1) & "3:" & fn_ColLetter(intlastColumn + intFormulaCount) & CStr(intLastRow)), Type:=xlFillDefault

 ' Go to start row of data selection to add 'Select into' code
   ActiveCell.Value = "SELECT * INTO " & strSQLTableName_Encap & " FROM (" & ActiveCell.Value

 ' Go to cells above data to insert code for deleting old table with the same name in separate SQL batch
   ActiveCell.Offset(-1, 0).Range("A1").Select  ' go to the row above
   ActiveCell.Value = "GO"
   ActiveCell.Offset(-1, 0).Range("A1").Select  ' go to the row above
   If Left(strSQLTableName, 1) = "#" Then      ' temp table
       ActiveCell.Value = "IF OBJECT_ID('tempdb.." & strSQLTableName & "') IS NOT NULL DROP TABLE " & strSQLTableName_Encap
   Else
       ActiveCell.Value = "IF OBJECT_ID('" & strSQLTableName & "') IS NOT NULL DROP TABLE " & strSQLTableName_Encap
   End If

  ' For Big selections (i.e. serveral 100 or 1000 rows) SQL Server takes a very long time to do a multiple union - Split up the table creation into many inserts
   intRow = intConstMaxBatchSize + 3        ' add 3 to make sure 1st batch = Max Batch Size
    While intRow < intLastRow
    Application.Goto Reference:="R" & CStr(intRow - 1) & "C" & CStr(intlastColumn + intFormulaCount)  ' Goto Row before intRow and the last column in formula selection
    ActiveCell.Value = Replace(ActiveCell.Value, " UNION ALL ", " ) a") ' Remove last 'UNION ALL'

    Application.Goto Reference:="R" & CStr(intRow) & "C" & CStr(intlastColumn + 1)    ' Goto intRow and the first column in formula selection
    ActiveCell.Value = "INSERT " & strSQLTableName_Encap & " SELECT * FROM (" & ActiveCell.Value
    intRow = intRow + intConstMaxBatchSize   ' increment intRow by intConstMaxBatchSize
    Wend

    ' Delete the last 'UNION AlL'
    Application.Goto Reference:="R" & CStr(intLastRow) & "C" & CStr(intlastColumn + intFormulaCount)
    ActiveCell.Value = Replace(ActiveCell.Value, " UNION ALL ", " ) a")

    ' Select all the formula cells
    ActiveCell.Offset(-intLastRow + 1, 1 - intFormulaCount).Range("A1:" & fn_ColLetter(intFormulaCount + 1) & CStr(intLastRow)).Select
End If

' Final Selection to clipboard and Cleaning of data
Selection.Copy
Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False              ' Repaste "Values Only" back into cells
Selection.Replace What:="CAST('' AS", Replacement:="CAST(NULL AS", LookAt:=xlPart, SearchOrder:=xlByRows, MatchCase:=False  ' convert all blank cells to NULL
Selection.Replace What:="'00-Jan-1900 00:00:00'", Replacement:="NULL", LookAt:=xlPart, SearchOrder:=xlByRows, MatchCase:=False  ' convert all blank Date cells to NULL
Selection.Replace What:="'NULL'", Replacement:="NULL", LookAt:=xlPart, SearchOrder:=xlByRows, MatchCase:=False  ' convert all 'NULL' cells to NULL
Selection.Replace What:=vbTab, Replacement:=" ", LookAt:=xlPart, SearchOrder:=xlByRows, MatchCase:=False        ' Replace all Tabs in cells to Space to prevent Double Quotes occuring in the final paste text
Selection.Copy

MsgBox "SQL Code has been added to clipboard - Please Paste into SSMS window", vbOKOnly, "Transfer to SQL"

Application.DisplayAlerts = False       ' Temporarily switch off Display Alerts
ActiveWindow.Close                      ' Delete newly created worksheet
Application.DisplayAlerts = True        ' Switch display alerts back on

End Sub

Function fn_ColLetter(Col As Integer) As String

Dim strColLetter As String

If Col > 26 Then
    ' double letter columns
    strColLetter = Chr(Int((Col - 1) / 26) + 64) & _
        Chr(((Col - 1) Mod 26) + 65)
Else
    ' single letter columns
    strColLetter = Chr(Col + 64)
End If
fn_ColLetter = strColLetter
End Function 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-25T10:57:07.137

最简单的方法是在 XLS 中创建一个计算列，该列将生成插入语句的语法。然后将这些插入复制到文本文件中，然后在 SQL 上执行。其他选择是购买 Excel 的数据库连接附加组件并编写 VBA 代码来完成相同的任务。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-25T10:59:42.560

我认为一些数据库可以从 CSV（逗号分隔值）文件导入数据，您可以从 exel 导出。或者至少使用 csv 解析器很容易（为您的语言找到一个，不要尝试自己创建一个 - 它比看起来更难）将其导入数据库。

我不熟悉 MS SQL，但如果它直接支持它，我不会感到惊讶。

无论如何，我认为要求必须是Exel表和数据库表中的结构相似。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-25T10:58:48.460

如果界面的工作方式与我上次使用它的方式一样，您可以在 Excel 中选择区域，复制它，打开 SQL Server 并将数据粘贴到表中，就像使用 Access 一样。

或者，您可以在 Excel 和 SQL Server 之间设置 ODBC 链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-25T11:14:24.433

为什么不在 SSMS 中使用导出/导入向导？

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-08-06T10:56:42.657

您不能使用 VBA 代码从 excel 复制并粘贴到 SSMS 操作中吗？

# .net - 什么更适合 DSL：TCL 还是 Lisp？

> ID：316979
> 
> 赞同：1
> 
> 时间：2008-11-25T10:52:37.413
> 
> 标签：.net, lisp, tcl, dsl

什么更适合 DSL：TCL 还是 Lisp？你对 Java(C#)-TCL 绑定与 Lisp(Scheme) 有什么看法？什么 DSL 工具适用于 .Net 开发？（Microsoft DSL 工具除外）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-25T12:20:02.180

如果您想轻松访问 JVM，可以使用 Clojure。

请注意，您可以以任何您想要的方式设计 DSL，您不必让任何“lispy”语法大放异彩。我最喜欢的例子是 Common Lisp 标准：扩展的 LOOP 语法是 unlispy 的，事实上，它是一个用于循环的 DSL，在宏中实现。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-26T10:45:58.983

如果是 TCL 和 LISP 之间的选择，我每次都会选择 TCL。部分是因为我熟悉 TCL，部分是因为使用自己的命令扩展 TCL 和将其嵌入到其他软件中都很容易。

对于 JAVA 交互，你有 jacl 和 tclblend。[http://tcljava.sourceforge.net/](http://tcljava.sourceforge.net/)是这些软件包的一个很好的起点，或者[http://www.tcl.tk/](http://www.tcl.tk/)对于 TCLish 的所有东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-25T13:03:23.810

我会选择Scheme :)

如前所述，您不必将 DSL 呈现为 lispy 代码。

[这](https://ironscheme.svn.codeplex.com/svn/IronScheme/IronScheme.Console/ironscheme/linq.sls)是我如何为 R6RS 方案编写 LINQ 'DSL' 的示例。（但你应该知道！现在才看到你的昵称；P）

[这里](https://ironscheme.svn.codeplex.com/svn/IronScheme/IronScheme.Console/ironscheme/linq2.sls)还有第二个化身。

查看底部的示例，显示除了表达式（必须是 Scheme）之外，输入几乎与 C# 中的 LINQ 相同。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-25T13:07:07.703

对于 .Net 上的 DSL，[Boo](http://boo.codehaus.org/)是一个非常好的起点。Unity3D 背后的人正在将它用于他们的“JavaScript”脚本语言，我认为即使是 Second Life 也在用它创建他们的 LindonScript2.0 或其他东西，我认为这个人 Ayende（他的谷歌）正在出版一本关于它的书这些时候...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-25T11:08:32.543

这实际上取决于谁将使用 DSL。如果您期待非 IT 领域专家，那么建议您使用像 TCL 这样简单明了的东西。向非 IT 专业的毕业生解释 LISP 的乐趣将是一个严重的问题，就像调试一个没有深入了解 LISP 的人编写的大型 LISP 程序一样。

同样向某人解释 b = a + 1 写成 B = INCR(A) 也不是一个好主意。

我会推荐 Python，你可以将特定领域的代码嵌入到一两个专业类中。您拥有一种语言，非 IT 用户可以编写简单易读的程序，并且 IT 专家可以编写的代码没有限制。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-26T11:03:07.717

如果您的应用程序有更广泛的目标，我会选择 TCL 而不是 Lisp。人们更有可能想要处理他们的想法而不是列表。:) （感谢 Lisp，让我了解函数式编程，但我认为我们不应该再见面了，哦，顺便说一句，不是你，是我；））

除此之外，我必须补充一点，除非您有充分的理由（例如，轻量级或有非常特定的 DSL 需求）**Python**或**Javascript**应该是当今世界恕我直言的扩展语言。

附言。因为这是关于 .NET [IronPython](http://www.codeplex.com/Wiki/View.aspx?ProjectName=IronPython)是您最好喜欢的 Python 版本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-06T11:10:47.607

查看[Martin Fowler 的博客](http://martinfowler.com/articles.html#id59310)。这就是我开始使用 DSL 的原因。 [Fluent Interfaces](http://en.wikipedia.org/wiki/Fluent_interface)是一种 DSL。

[来自 RhinoMocks 成名的Ayende](http://ayende.com/Blog/)确实有一本书出来了

这是我为 C# 编写的[外部 DSL示例之一。](http://cgempire.com/forum/tutorials-101/object-oriented-design-acceptance-testing-scripts-4185.html)这是我用[Lisp](http://uglylispcode.wordpress.com/2008/07/20/dog-fooding-a-dsl-creating-an-extension-to-lisp-unit/)写的。

没有使用 TCL 或 JAVA 编写 DSL 的经验。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-25T11:42:21.040

甚至 Lisp 似乎也有一些奇怪的命令，比如 CDR（如果你不是来自非面向 LIST 的语言）TCL 有一些“奇怪”的东西。您必须考虑哪种语法最适合您的大脑。

例如，如果您对非常稀疏的语法和使用 set 分配变量没有任何问题，这需要 TCL，如果您想要一个更丰富、非常强大的语法并具有很多元编程能力，并且您不介意将所有内容放在圆括号中并始终开始使用像 (+ 2 3) （而不是 2 + 3）这样的运算符时，您应该选择 LISP。

# php - 输出在 PHP 中可能包含或不包含任何内容的变量的最佳实践是什么？

> ID：316988
> 
> 赞同：0
> 
> 时间：2008-11-25T10:57:43.533
> 
> 标签：php, error-suppression

我正在开发一个应用程序，并希望显示一个在编辑表单时将被填写的表单，但如果表单是一个新条目则不会。我相信这样做最不冗长的方法是只使用一个表单并抑制回显我的变量的任何错误，这样如果它是一个新表单就不会打印任何内容（因为如果它是一个新表单，变量将不存在） . 例如：

```
<?php 
if ( ! $new_item) {
    $variable = 'Example';
}
?>
<form>
    <input type="text" name="inputbox" value="<?php echo @$variable; ?>" />
</form> 
```

这是一个好习惯，还是有更好的方法？我应该为新项目和要编辑的项目分别创建视图吗？这样做会对性能产生什么影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-25T11:32:17.440

您可以使用

```
<?php echo ((isset($value) && $value != '') ? $value : 'Default'); ?> 
```

解决此问题的更简洁的方法是创建一个帮助函数来为您执行此操作：

```
function useDefault($value, $default = '')
{
    if (isset($value) && $value != '')
    {
        return $value;
    }
    else
    {
        return $default;
    }
} 
```

然后你可以使用

```
<?php echo useDefault($value, 'default value'); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-25T11:03:41.913

我倾向于使用：

```
$variable = (isset($new_item) && $new_item) ? 'Example' : 'Default Value'; 
```

真的矫枉过正，但我​​认为如果没有设置，直接使用 !$new_item 会引发通知。您还可以根据您想要的行为将第二个子句切换为 !empty($new_item)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T10:59:58.910

我认为最好的方法是始终设置变量

```
if ( ! $new_item) {
    $variable = 'Example';
} else {
    $variable = 'Default value'; 
    //or
    $variable = '';
} 
```

使用`@`错误抑制很慢。

**编辑** 请注意，当您将变量打印到输入值属性中时，您应该首先调用`htmlentities()`或`htmlspecialchars()`对其进行处理。

**第二次编辑**

您在评论中说您正在获取对象上的数据，在这种情况下您也可以这样做：

```
class example {
    public $somefield = 'default value';
} 
```

然后，如果它是您正在编辑的现有记录，请执行以下操作，这将导致返回的对象成为“示例”的实例：

```
$record = mysql_fetch_object($result, 'example'); 
```

或者，如果是新记录，请自行实例化：

```
$record = new example(); 
```

然后你总是知道`$record->somefield`会被设置，你可以这样做：

```
<form>
    <input type="text" name="somefield" value="<?php echo htmlspecialchars($record->somefield); ?>" />
</form> 
```

# java - 在 Java 1.4 中使用图形语言的字体资源

> ID：316989
> 
> 赞同：0
> 
> 时间：2008-11-25T10:58:38.710
> 
> 标签：java, internationalization

我在使用 java 1.4 时遇到以下问题

我尝试在包含中文字符的 JTextPane 中显示一个非常简单的 HTML 文档。

如果启动 java 虚拟机时使用的语言环境是 user.language=zh 和 user.country=CN，则图形字符将正确呈现。

对于任何其他语言环境，字符都呈现为正方形。

我看到的区别是 java 1.4 对每个语言环境使用不同的 font.properties 文件。在这种特殊情况下，font.properties.zh 文件包含一个额外的条目：

```
dialog.plain.0=Arial,ANSI_CHARSET 
**dialog.plain.1=\u5b8b\u4f53,GB2312_CHARSET**
dialog.plain.1=WingDings,SYMBOL_CHARSET
dialog.plain.2=Symbol,SYMBOL_CHARSET 
```

现在，此条目不适用于其他语言环境。

我遇到的问题是，我需要能够在使用任何语言环境时呈现此字符串。此外，我无法修改 font.properties 文件来添加额外的条目，因为我无法控制客户端使用的 JVM。

在 Java 1.5 中不会出现此问题。

有没有办法以编程方式添加这个映射？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-25T13:24:04.220

显然答案是......

根据此网址，Java 1.4 是不可能的：

[http://java.sun.com/javase/technologies/core/basic/intl/faq.jsp#desktop-rendering](http://java.sun.com/javase/technologies/core/basic/intl/faq.jsp#desktop-rendering)

使用逻辑字体名称：

*   优点：保证这些字体名称可以在任何地方使用，并且它们至少可以使用主机操作系统本地化的语言（通常是更大范围的语言）进行文本渲染。

*   缺点：用于呈现文本的物理字体因不同的实现、主机操作系统和语言环境而异，因此应用程序无法在所有地方实现相同的外观。*此外，映射机制有时会限制可以呈现的字符范围。后者在 5.0 之前的 JRE 版本上曾经是一个大问题：例如，日文文本只能在日文本地化的主机操作系统上呈现，即使已经安装了日文字体，也不能在其他本地化系统上呈现*。对于使用 2D 字体渲染的应用程序，这个问题在 JRE 5.0 版本中要少得多，因为映射机制现在通常可以识别并使用所有支持的书写系统（如果已安装）的字体。

唯一可能的方法似乎是在组件中以硬编码的方式设置已知支持扩展图形字符的字体。

# debugging - 关于g++生成代码的问题

> ID：316995
> 
> 赞同：1
> 
> 时间：2008-11-25T11:00:25.993
> 
> 标签：debugging, g++

亲爱的 g++ 黑客，我有以下问题。

当一个对象的某些数据被错误的程序覆盖时，为什么程序最终会在销毁该对象时失败并出现双重释放错误？它如何知道数据是否损坏？为什么会导致双重免费？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T11:10:32.460

通常不是对象的内存被覆盖，而是对象之外的部分内存。如果这击中了 malloc 的控制结构，free 将在访问它们并尝试根据损坏的结构做奇怪的事情时吓坏了。

如果你真的只是用愚蠢的东西覆盖对象内存，那么 malloc/free 就不会知道。您的程序可能会崩溃，但出于其他原因。

看看[valgrind](http://valgrind.org/)。它是一个模拟 CPU 并监视每个内存访问是否存在异常的工具（例如尝试覆盖 malloc 的控制结构）。它真的很容易使用，大多数时候你只是在 valgrind 中通过预先`valgrind`在 shell 上启动你的程序，它为你节省了很多痛苦。

关于 C++：*始终*确保将 new 与 delete 结合使用，并且分别将 new[] 与 delete[] 结合使用。永远不要把它们混在一起。坏事会发生，通常与您所描述的相似（但 valgrind 会警告您）。*****************