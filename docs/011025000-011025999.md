# StackOverflow 问答 11025000-11025999

# ios - 从 iOS 中的 XML 元素中提取文字 html 文本

> ID：11025000
> 
> 赞同：0
> 
> 时间：2012-06-13T23:50:38.293
> 
> 标签：ios, xml

我有一些看起来像这样的 XML：

```
<ContentItem>
<DataContent><strong>A heading</strong><br /> eSome detailed text</DataContent>
</ContentItem>

<ContentItem>
<DataContent><strong>Another heading</strong><br /> Some other detailed text</DataContent>
</ContentItem> 
```

我需要在`DataContent`元素之间提取 HTML 的文字字符串，然后稍后将它们连接到一个单独的 html 文档中。

我认识到我想要的 HTML 本身会被解析为各种 XML 元素，所以我想我正在寻找一种查找 XML 元素及其所有子元素的文本表示的方法。

# python - Python 在并行进程之间共享字典

> ID：11025005
> 
> 赞同：8
> 
> 时间：2012-06-13T23:50:53.227
> 
> 标签：python, multiprocessing

我想在我的进程之间共享一个字典，如下所示：

```
def f(y,x):
    y[x]=[x*x]                                                          

if __name__ == '__main__':
    pool = Pool(processes=4)
    inputs = range(10)
    y={}                             
    result = pool.map(f,y,inputs) 
```

y 返回 {}。我怎样才能让它工作？

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T00:03:42.050

这看起来像您正在使用该`multiprocessing`模块。你没有说，这是一个重要的信息。

实例上的`.map()`函数`multiprocessing.Pool()`有两个参数：一个函数和一个序列。该函数将使用序列中的连续值调用。

您不能在像 a 这样的可变变量中收集值`dict`（在示例中，它是 argument `y`），因为您的代码将在多个不同的进程中运行。将值写入`dict`另一个进程中的 a 不会将该值发送回原始进程。但是如果你使用`Pool.map()`其他进程将返回每个函数调用的结果，返回到第一个进程。然后您可以收集这些值来构建一个`dict`.

示例代码：

```
import multiprocessing as mp

def f(x):
    return (x, x*x)

if __name__ == '__main__':
    pool = mp.Pool()
    inputs = range(10)
    result = dict(pool.map(f, inputs)) 
```

`result`设定为：`{0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}`

让我们改变它，而不是计算`x*x`它会提高`x`到一些权力，并且权力将被提供。让我们让它接受一个字符串键参数。这意味着`f()`需要一个元组参数，元组将在哪里`(key, x, p)`计算`x**p`。

```
import multiprocessing as mp

def f(tup):
    key, x, p = tup  # unpack tuple into variables
    return (key, x**p)

if __name__ == '__main__':
    pool = mp.Pool()
    inputs = range(10)
    inputs = [("1**1", 1, 1), ("2**2", 2, 2), ("2**3", 2, 3), ("3**3", 3, 3)]
    result = dict(pool.map(f, inputs)) 
```

如果您有多个序列，并且需要将它们连接在一起以形成上述的单个序列，请考虑使用`zip()`或`itertools.product`.

# ruby - 动态调用方法时的 ActiveRecord::AssociationTypeMismatch

> ID：11025007
> 
> 赞同：0
> 
> 时间：2012-06-13T23:51:07.067
> 
> 标签：ruby, ruby-on-rails-3, activerecord, type-mismatch

类样本

属于_to 选项

我有一个对象`x`，我正在尝试做：

```
x.send "options=", z 
```

但它给了我一个错误：

> 预期选项得到哈希

```
x.options.class  #=> Array
z.class          #=> Array 
```

那么为什么我不能直接分配变量选项呢？

PS `z[0].class #=> Hash`，但我认为这不重要。

# iphone - 应用加载时激活 iPhone 锁屏

> ID：11025013
> 
> 赞同：2
> 
> 时间：2012-06-13T23:52:19.503
> 
> 标签：iphone, ios, ios5, locking, screen

我想用密码保护我的应用程序。但不是创建一整套代码来编写和制作登录窗口......我只希望在单击应用程序时加载锁定屏幕，以便用户可以进行身份​​验证。一旦用户解锁手机......然后应用程序完全加载。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T00:10:07.257

查看这个[Github 项目，了解 Björn Kaiser 的密码保护](https://github.com/codegefluester/Password-protected-iOS-App--iOS5-)。它展示了如何实现密码保护以及如何将密码保存在 iOS 钥匙串中。

在[AppDelegate](https://github.com/codegefluester/Password-protected-iOS-App--iOS5-/blob/master/PasswordProtected/PWPAppDelegate.m)中设置了 PW 输入的视图。并且在[控制器](https://github.com/codegefluester/Password-protected-iOS-App--iOS5-/blob/master/PasswordProtected/PWPViewController.m)中管理 PW 对话框。[KeychainWrapper](https://github.com/codegefluester/Password-protected-iOS-App--iOS5-/blob/master/PasswordProtected/KeychainItemWrapper.m)是用于访问钥匙串中 PW的包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:56:27.330

没有意义。首先，没有 API 到`lock the screen`. 其次，这听起来像是糟糕的用户体验。如果这仍然适用于 AppStore。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T00:09:12.923

好吧，没有任何 API 可以让你这样做，但没有什么能阻止你自己做，或者使用第三方库。[这是我找到的一个。](https://github.com/jasarien/JSLockScreen)

# objective-c - 在 Objective-C 中初始化对象

> ID：11025015
> 
> 赞同：2
> 
> 时间：2012-06-13T23:52:38.297
> 
> 标签：objective-c, initialization, nsobject

我无法理解 Stephen Kochan 的“Objective-C 编程”一书中的以下内容 - 第 4 版。我希望你能帮助我理解它。

在第 10 章“初始化对象”一节中，Stephen 写道：

> 在编写初始化程序时，您应该遵循以下两种策略。
> 
> 每当您的类中的一个对象被初始化时，您可能想要做一些特别的事情。例如，这是创建类使用和通过一个或多个实例变量引用的对象的理想场所。一个完美的例子就是我们的 Rectangle 类；在 init 方法中分配矩形的 XYPoint 原点是合理的。为此，我们只需要重写继承的 init 方法。
> 
> 有一个用于覆盖 init 的标准“模板”，它看起来像这样：

```
- (id) init
{
     self = [super init];
     if (self) {
          // initialisation code here.
     }

     return self;
} 
```

> 此方法首先调用父初始化程序。执行父级的初始化程序可确保正确初始化任何继承的实例变量。
> 
> 您必须将执行父级的 init 方法的结果分配回自身，因为初始化程序有权更改对象在内存中的位置（意味着其引用将更改）。
> 
> 如果父级的初始化程序成功，则返回的值将非零，正如 if 语句所测试的那样。正如注释所示，在后面的块内，您可以为您的对象放置您自己的自定义代码。这通常涉及分配和初始化类中的实例变量。

好的，到目前为止，我已经理解了 Stephen Kochan 想要说的内容，但我完全被下一部分迷惑了。我希望你能帮忙。

> 如果您的类包含多个初始化程序，则其中一个应该是您指定的初始化程序，并且所有其他初始化方法都应该使用它。通常，这是您最复杂的初始化方法（通常是采用最多参数的方法）。

所以，我的第一个问题是：如果所有其他初始化方法在这种情况下都将使用一个特定的初始化方法，那么为什么还要使用“指定”初始化方法？

Stephen Kochan 继续说：

> 创建指定的初始化程序将您的主要初始化代码集中在一个方法中。任何继承您的类的人都可以覆盖您指定的初始化程序，以确保正确初始化新实例。

你能举个例子吗？我不太确定我明白他在说什么。

斯蒂芬继续说：

> 基于该讨论，您的 Fraction 类的初始化方法 initWith:over: 可能如下所示：

```
- (Fraction *) initWith:(int)n over:(int)d
{
    self = [super init];

    if (self) {
        [self setTo: n over: d];
    }

    return self;
} 
```

> 在 super 的初始化（以及它的成功，如返回一个非零值所示）之后，您使用该`setTo:over:`方法来设置您的 Fraction 的分子和分母。与其他初始化方法一样，您应该返回已初始化的对象，您在此处执行此操作。
> 
> 程序 10.1 测试您的新`initWith:over:`初始化方法。

```
#import "Fraction.h"

int main (int argc, char *argv[])
{
    @autoreleasepool {
        Fraction *a, *b;

        a = [[Fraction alloc] initWith: 1 over: 3];
        b = [[Fraction alloc] initWith: 3 over: 7];

        [a print];
        [b print];

    }

    return 0;
} 
```

> 输出：
> 1/3
> 3/7

到目前为止，我已经理解了代码。以下部分我完全不明白：

> 要遵守前面关于指定初始化程序的规则，您还应该在 Fraction 类中修改 init。如果您的类可能是子类，这一点尤其重要。
> 
> 下面是 init 方法的样子：

```
- (id)init
{
    return [self initWith:0 over:0];
} 
```

如果我们想要子类化，为什么这很重要？

Stephen Kochan 继续说道：

> 当您的程序开始执行时，它会将初始化调用方法发送到您的所有类。如果您有一个类和关联的子类，则父类首先获取消息。该消息只向每个类发送一次，并且保证在任何其他消息发送到该类之前发送。目的是让您在此时执行任何类初始化。例如，您可能想在那时初始化一些与该类关联的静态变量。

我也没有真正理解最后一部分。我希望你能提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:15:26.160

这是一大堆问题，很难回答。

> 所以，我的第一个问题是：如果所有其他初始化方法在这种情况下都将使用一个特定的初始化方法，那么为什么还要使用“指定”初始化方法？

主要是为了方便您的来电。例如，假设您指定的初始化程序是`initWithX:y:width:height:`，但您发现自己到处都在写这样的东西：

```
[[MyRect alloc] initWithX:0 y:0 width:0 height:0]
[[MyRect alloc] initWithX:myPoint.x y:myPoint.y width:mySize.width height:mySize.height] 
```

你可能想添加另外几个初始化器，所以你可以这样做：

```
[[MyRect alloc] initWithEmptyRect]
[[MyRect alloc] initWithPoint:myPoint size:mySize] 
```

当然，它实际上从来没有*必要*，但出于同样的原因，它总是值得做的，而不是一遍又一遍地重复自己。

通过查看 Foundation/Cocoa 附带的各种类，您可以找到更实际的示例——它们中的许多具有许多不同的初始化程序，而且它们通常包含更多的工作，而不仅仅是调用 .x、.y、.width 和 .高度。例如， NSDictionary 有类似的方法`-initWithContentsOfURL:`。理论上，您总是可以读取该 URL 的内容，将 plist 解析为一对 C 风格的对象和键数组，然后调用`-initWithObjects:forKeys:count:`，因此这实际上没有必要。但你更愿意做什么？

> “创建指定的初始化程序将您的主要初始化代码集中在一个方法中。任何子类化您的类的人都可以覆盖您指定的初始化程序，以确保正确初始化新实例”。
> 
> 你能举个例子吗？我不太确定我明白他在说什么。

假设有人创建了这个类：

```
@interface MySuperRect: MyRect
- (id)initWithX:x y:y width:width height:height;
@end 
```

他不需要覆盖你所有的 init 方法，只需要这个。假设你这样做：

```
[[MySuperRect alloc] initWithEmptyRect] 
```

因为 MySuperRect 没有实现 initWithEmptyRect，这将使用 MyRect 的实现，它只是调用指定的初始化器。但是 MySuperRect*已经*实现了指定的初始化器。因此，将调用覆盖。

我认为这也回答了你的第三个问题。（我认为这是第三个问题。）

对于您的第四个也是最后一个问题，您需要先解释一下您不理解的部分，然后才能有人帮助您。例如，您是否知道类只是一种（稍微）特殊的对象，并且通常了解对象初始化的工作原理，以及类初始化的特殊之处，但不明白为什么要在那里初始化静态变量？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:21:41.020

> 如果在这种情况下它们都将使用一个特定的初始化方法，那么为什么要使用所有其他初始化方法？

你这样做是为了方便。您的“指定”初始化程序（正如 Stephen Kochan 提到的）通常是具有最多参数的初始化程序。所有其他初始化程序都是使用一些默认设置调用该初始化程序的便捷方法。例如，如果我有一个“汽车”类，我可以在其中指定各种元素的数量：

```
@implementation Car

//Designated initializer - has tons of arguments
- (id)initWithDoors:(int)doors windows:(int)windows wheels:(int)wheels axles:(int)axles
{
    //implementation
}

//most axles have two wheels and most doors have a window (and there's the front and back window)
- (id)initWithDoors:(int)doors wheels:(int)
{
    return [self initWithDoors:doors windows:doors+2 wheels:wheels axles:wheels/2];
}

//most cars have four doors, four wheels, six windows, and two axles
- (id)init
{
    return [self initWithDoors:4 windows:6 wheels:4 axles:2];
}

@end 
```

然后，子类只调用指定的初始化程序。这是 Coupe 类的示例。（轿跑车有两扇门。）

```
@implementation Coupe //extends Car

//our coupe can have a sunroof, which adds a window
- (id)initWithSunroof:(BOOL)sunroof
{
    self = [super initWithDoors:2 windows:(sunroof?4:5) wheels:4 axles:2];
    if (self) {
      //initialization
    }

    return self;
}

//a default coupe has no sunroof
- (id)init
{
    return [self initWithSunroof:NO];
}

@end 
```

请注意，该`-initWithSunroof:`方法是子类的指定初始化程序。

> 如果我们想要子类化，为什么这很重要？

最后，您希望实现`-init`这样一个天真的子类可以调用它并获取所有默认值，而无需过多调查您的类（如果不需要的话）。

> 我也没有真正理解最后一部分。

类初始化器的格式如下：

```
+ (void)initialize
{
    //implementation
} 
```

它设置您可能拥有的任何类级变量。这些影响一个类的所有实例。（类变量和实例变量之间的区别在其他地方得到了很好的解释，超出了这个答案的范围。如果您仍然感到困惑，请提出另一个问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:11:04.280

“最复杂的初始化程序”是具有最多参数的初始化程序。您应该使所有其他初始化方法都使用该方法：
可能有 `initWithValueA:andB:andC:`, `initWithValueC:`,`initWithValueA:`等等`initWithValueB:andC:`。所有那些“不太复杂”的方法都应该使用所有其他参数的默认值（可能是 0、`nil`...） 调用“最复杂”的方法
（`[super init]`将调用超类的 init 方法，因此您可以`init`安全地覆盖以调用“最复杂的” init-Method 并设置您的默认状态或抛出异常 - 如果您想调用`init`您必须使用 的自定义`[self init]`）。

您提到的最后一部分涵盖了静态初始化程序（“静态类构造函数”）。它的声明以“+”号开头，这意味着它是一个类方法（“静态方法”），如 alloc。在 C# 中这是`static MyClass() {...}`，在 Java 中只是`static { ... }`

# javascript - Getting the text of an inner span

> ID：11025018
> 
> 赞同：0
> 
> 时间：2012-06-13T23:52:57.827
> 
> 标签：javascript

if i have the following links :

```
 <a href="#" onclick="return navigateTo(this)" id="menuList:0:menu" class="normalLink">
        <span id="menulist:0:menuLabel">
            <span > Main Page </span>
        </span>
    </a>        

    <a href="#" onclick="return navigateTo(this)" id="menuList:1:menu" class="normalLink">
        <span id="menulist:1:menuLabel">
            <span > Search Orders </span>
        </span>
    </a>

    <a href="#" onclick="return navigateTo(this)" id="menuList:2:menu" class="selectedLink">
        <span id="menulist:2:menuLabel">
            <span > Orders History </span>
        </span>
    </a> 
```

I want to get the element which has the class name `selectedLink` and then get the value of the inner `span` of that element where it says in above example `Order History`.

I can do the first part of finding the element which has `selectedLink` class, but i cannot retrive the text inside the inner span of that element. Below is my code to find the element with class `selectedLink`:

```
 var elem = this.getElementsByTagName('*');
    for (var i = 0; i < elem.length; i++) 
    {
        var classes = elem[i].className;
        if(classes == 'selectedLink' ){
            alert("ok found it the selected link");
        }
    } 
```

Can anyone suggest a way to retrieve `Order History`? Thanks

## UPDATE: Follow up question

So the point of this excerise is that, i wanted to add a check where if the page is "Order History" yet the navigation menu had `selectedLink` style applied to another page (happens when user presses BACK) i wanted JavaScript logic to fix the problem so below is my code:

```
 //get the element that has "selectedLink" style
           // if the text says "Order History" then style is applied ok  
           var elems =  document.getElementsByClassName("selectedLink");
           if(typeof elems != "undefined"){
               for(var i = 0; i < elems.length; i++){
                   alert(elems.length);
                   var text = elems[i].innerText || elems[i].textContent;
                   alert(text);
                   if(text == "Order History"){
                       alert("its ok");
                   }
                   else { //we're here because the element that has "selectedLink" style in not "order History"

                        //get all elements that have "normalLink" style and see which one is "Order History"
                       var allLinks = document.getElementsByClassName("normalLink");
                       for(var j = 0; j < allLinks.length; j++ ){
                           var curText = allLinks[j].innerText || allLinks[j].textContent;

                           if(curText == "Order History"){
                               alert("there it is at counter " + j);
                               alert(allLinks[j].innerText);

                               //swap the class names
                               allLinks[j].className = "selectedLink";
                               elems[i].className = "normalLink";
                               break;
                           }
                       }
                   }
                }
            } 
```

The changing class names bit isn't working! Am i doing it wrong?

## UPDATE 2:

Fixed, It was my silly mistake :

changed the ordering of the following :

```
 allLinks[j].className = "selectedLink";
    elems[i].className = "normalLink"; 
```

to:

```
 elems[i].className = "normalLink";
    allLinks[j].className = "selectedLink"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:57:13.440

Firstly, just use `getElementsByClassName()` to get the element, that saves you a huge amount of effort:

```
var link = document.getElementsByClassName("selectedLink")[0]; // new browsers only
var link = document.querySelector(".selectedLink"); // more support, but not in IE7 or lower
var link = $(".selectedLink"); // with jQuery 
```

Then, since that text is the only text, you can just use `textContent` (`innerText` in older IE)

Your end code is one of these, depending on your target browsers and if you have a framework or not:

```
var text = link.textContent; // new browsers
var text = link.innerText || link.textContent; // older browers
var text = link.text(); // jQuery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:59:03.923

This sounds like a perfect job for jquery. include the jquery library on your page, then use the following code:

```
var text = $('.selectedLink').first('span').first('span').html(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:12:48.203

Try this:

```
var elem = this.getElementsByTagName('*');
for (var i = 0; i < elem.length; i++) 
{
    var classes = elem[i].className;
    if(classes == 'selectedLink' ){
        alert("ok found it the selected link");
        var a = elem[i].getElementsByTagName('span')[1].innerHTML;
        alert(a);
    }
} 
```

**JSBin**
[http://jsbin.com/epoxej/edit#preview](http://jsbin.com/epoxej/edit#preview)

# css - 不使用 div 垂直对齐文本

> ID：11025020
> 
> 赞同：0
> 
> 时间：2012-06-13T23:53:28.497
> 
> 标签：css, vertical-alignment

我一直在努力解决这个问题，它似乎非常接近工作，但它不会垂直对齐。我已经尝试了大多数解决方案，同时又回到了相同的表格单元答案。但它在这里不起作用，文本在顶部对齐。有谁知道为什么这不起作用，以及修复它？

**jsfiddle：**

[http://jsfiddle.net/JyvbJ/](http://jsfiddle.net/JyvbJ/)

**HTML：**

```
<a href="#">Open Up</a>​ 
```

**CSS：**

```
a {
    position: absolute;
    top: 0;
    left: 0;
    width: 240px;
    height: 240px;
    border-radius: 120px;
    -moz-border-radius: 120px;
    -webkit-border-radius: 120px;
    -khtml-border-radius: 120px;
    font-size: 20px;
    line-height: 1;
    text-decoration: none;
    text-align: center;
    margin: 0 auto;
    display: table-cell;
    vertical-align: middle;
}

a:hover {
    color: #000;
    text-decoration: none;
    background-color: rgba(0,0,0,0.8);
    opacity: 1;
    display: block;
}​ 
```

**它的样子（左：正常 | 右：悬停）：**

![图片：](../Images/b756cc720493b960826b4b7174485408.png)

PS我不能有任何div，因为我希望整个圈子都可以作为链接点击。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:33:54.530

`position: absolute`不与`display: table-cell`. 删除它和规则`display: block`中的`:hover`，它可以工作。[小提琴](http://jsfiddle.net/JyvbJ/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:56:18.527

将`line-height`元素的 设置为等于`height`，即：`line-height: 240px;`

**编辑：**对于多行支持，将 a`span`放在锚标记内，使用 设置样式`display table-cell; height: 100%; vertical-align: middle;`，并使用 设置包含锚标记的样式，如此[处](http://jsfiddle.net/A5seC/)`display: table;`所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T01:12:28.260

尝试检查这篇文章。如果您愿意稍微更改代码，我认为这会有所帮助。没有它，我认为这是不可能的，除非你使用像 jquery 这样的东西。 [这是文章的链接，](http://css-tricks.com/vertically-center-multi-lined-text/) 希望对你有帮助！

编辑：只是为了帮助你多一点：改变一个{位置：绝对；} 到 { display:table-cell; } 并删除行 a:hover { display: block }

# haskell - 在 curlGetResponse_ 中处理无连接情况

> ID：11025021
> 
> 赞同：1
> 
> 时间：2012-06-13T23:53:30.587
> 
> 标签：haskell, curl

是否有一种方法或特殊`curl`选项可以在使用时识别无连接情况`curlGetResponse_`？

例如，有一些`curl`-命令：

```
withCurlDo $ respBody <$> (curlGetResponse_ "google.com" [CurlFailOnError True] ∷ IO (CurlResponse_ [(String, String)] ByteString)) 
```

如果有到主机的连接，它会返回一些`IO ByteString`.

但如果没有任何连接，则需要 40 秒并返回空字符串。

`Left`当连接丢失且主机无法访问时，有没有办法抛出异常或某些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:35:37.557

[您可以使用ConnectTimeout](http://hackage.haskell.org/packages/archive/curl/1.3.7/doc/html/Network-Curl-Opts.html#v%3aCurlConnectTimeout)选项设置适当的超时，然后检查[响应代码](http://hackage.haskell.org/packages/archive/curl/1.3.7/doc/html/Network-Curl.html#v%3arespCurlCode)是否存在超时错误：

```
μ> withCurlDo $ respCurlCode <$> (curlGetResponse_ "google.com" [CurlConnectTimeout 1] ∷ IO (CurlResponse_ [(String, String)] String))
CurlOK
μ> withCurlDo $ respCurlCode <$> (curlGetResponse_ "2.2.2.2" [CurlConnectTimeout 1] ∷ IO (CurlResponse_ [(String, String)] String))
CurlOperationTimeout 
```

# javascript - 谷歌地图 API v3 重绘？

> ID：11025025
> 
> 赞同：5
> 
> 时间：2012-06-13T23:54:07.740
> 
> 标签：javascript, google-maps

我正在尝试为某人解决谷歌地图问题，该页面有一个展开选项卡，当单击展开选项卡时它显示完整的地图，后端发生的事情是将地图 div 边距更改为 0，问题是最右边的一个区域没有显示地图。我试过 google.maps.event.trigger(this.map, 'resize'); 并没有解决问题。

```
var resultsCont = $('#resultsCont');
var mapCont = $('#mapCont');
if (resultsCont.is(':visible')){
    resultsCont.hide();
    mapCont.css('margin-right',0);
}else{
    resultsCont.show();
    mapCont.css('margin-right',320);
}
google.maps.event.trigger(this.map, 'resize'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T21:33:46.930

我看不到你的其余代码，但我猜 this.map 是一个 copypasta 遗物。触发器中的第一个参数是地图对象。

所以无论左边是什么：

```
var thisguy = new google.maps.Map(yada, yada) 
```

google.maps.event.trigger( **thisguy** , 'resize');

假设它在范围内。

可能是错误的，只是在这一点上猜测。杰布斯，刚查了一下日期……看来我来的有点晚了。

# ios - WAXSIM 使用 Jenkins 和 xcodebuild 进行自动化测试和构建

> ID：11025027
> 
> 赞同：2
> 
> 时间：2012-06-13T23:54:26.547
> 
> 标签：ios, xcode, testing, ios-simulator, jenkins

我正在使用 WAXSIM 和 JENKINS 在成功的夜间构建后创建自动测试。在构建运行时，我观察实际运行 Jenkins 的远程系统和 WAXSIM 代码，以验证模拟器是否已启动，然后查看应用程序安装到模拟器中。问题是在模拟器上安装应用程序后，应用程序在激活后立即崩溃。该图标保留在模拟器上。我通过在 Jenkins/WAXSIM 远程系统上启动 XCODE 并在模拟器上安装（通过 xcode BUILD/RUN）Testable.xcodeproj 来确认。它启动并运行得很好。同名也。我正在使用 Jenkins 和 XCODE 插件来实际构建和链接代码，然后是“执行 Shell” 实际上检查并杀死模拟器以及运行waxsim的步骤。当我在桌面和远程系统上的 XCODE 中的测试目标上使用构建/运行时，所有测试都成功运行。

还有消息“会话无法启动。模拟器超时。” 大约 15-30 秒后出现。

以下是詹金斯构建/测试结果的最后几行：

```
test of Testable_(Integration_Tests)-Debug-1.0-dSYM.zip OK
[common_checkout] $ /bin/sh /var/folders/_w/4rf6zzws23j75lvcbgsnc_fm0000gx/T/hudson5038947848545058317.sh
About to build GUI tests scheme
About to run waxsim - a long delay here might suggest something is obstructing the view of the simulator on build slave
Testing finished
======== PRINT temp file to STDOUT ========

Launching '/Users/jenkins/.jenkins/common_checkout/ios/sandbox/dwallace/testable/trunk/testable/documentation/examples/testable/build/release-iphoneos/Testable (Integration Tests).app' on'Simulator - iOS 5.1'
Session failed to start. Simulator session timed out.

======== End PRINT temp file to STDOUT ====
===========================================
GUI Tests failed
===========================================
Build step 'Execute shell' marked build as failure 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:47:22.770

我通过从应用程序的目标名称和项目中删除所有空格来解决这个问题。然后它运行没有问题。

# c++ - 了解内存

> ID：11025029
> 
> 赞同：7
> 
> 时间：2012-06-13T23:54:33.673
> 
> 标签：c++, memory, memcpy

```
int a = 10;
int* pA = &a;
long long b = 200;
long long* pB = &b;

memcpy (pB,pA,4);
memcpy (pB+1,pA,4);

cout<<"I'm a memcpy!: "<<*(pB)<<endl; 
```

我正在用 memcpy 做一些测试来教自己记忆是如何工作的。我要做的是使 b = 为“1010”。我可以将值从 a 复制到 b，但随后我尝试将内存偏移 1 个字节并再写入 10，但它不起作用，它只输出“10”。

我需要做什么才能获得 1010 的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T00:05:27.010

您的代码存在一些问题：

*   您复制 4 个字节，但目标是 type `int`。由于`int`不保证是任何特定大小，因此在执行那种`memcpy`.
*   `memcpy`在字节级别上工作，但整数是一系列字节。根据您的目标架构，整数中的字节可能会以不同的方式排列（大端、小端等）。在整数上使用`memcpy`可能会也可能不会达到您的预期。`memcpy`学习和朋友如何工作时最好使用字节数组。
*   您的第二次`memcpy`使用`pB+1`作为目标。这不会使指针前进一个字节，而是按`sizeof(*pB)`字节前进。在这种情况下，它会指向一个无效的地址（在变量末尾之后）。此调用`memcpy`将损坏随机内存，这可能会使您的程序崩溃或导致不可预知的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T00:30:09.083

我不认为`memcpy()`它是为你想要的而设计的。通常，您将使用`memcpy()`复制一个或多个完整对象（其中对象可能是 int、char、long long 等）

```
 int a[4] = { 1, 2, 3, 4 };
    int b[3];
    int c[5] = { 0 };

    ::memcpy(b, a, 3 * sizeof(int));   // b is { 1, 2, 3 }
    ::memcpy(c+2, b, 3 * sizeof(int)); // c is { 0, 0, 1, 2, 3 } 
```

c+2 不是“c + 2 个字节”。它是“c + 2 ints”（在 Win32/x86 系统上为 8 个字节）。

您*可以*通过转换为 char 或 unsigned char 指针来访问各个字节，但我不建议您这样做，除非您真的了解自己在做什么，因为有很多陷阱。

```
 unsigned x = 0;
    unsigned char *px = reinterpret_cast<unsigned char *>(&x);

    px[0] = 0xFF;
    px[2] = 0xAA; 
```

这里的危险之一是您假设知道计算机如何存储整数。在 x86 系统上，x 将为 0x00AA00FF，但在 Sun Sparc 系统上，x 将为 0xFF00AA00。

如果您需要设置整数的一部分，通常最好使用“或”和“移位”。

```
 x = (0xFF<<24) | (0xAA<<8); 
```

在任何架构上都会给你 0xFF00AA00 。0xFF<<24 将值 0xFF 向左移动 24 位，形成 0xFF000000。0xAA<<8 将值 0xAA 向左移动 8 位，形成 0x0000AA00。

我们将它们“或”在一起，给出 0xFF00AA00。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T00:03:16.317

查看指针算法：[http](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html) ://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html 。向指针添加值实际上会增加您正在处理的任何大小的单位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T00:05:04.577

pB 是 long long* 类型，因此将其加 1 将给出变量 b 后面的下一组 8 个字节的地址。您将 pB[0] 作为变量 b，但 pB[1]（相当于 pB+1）指向未定义的内存。写入它可能会导致崩溃。

代替

```
long long b; 
```

和

```
long long b[2]; 
```

（使用你喜欢的任何初始值）

你的 cout 需要同时喂 b[0] 和 b[1]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-26T00:19:12.653

如果您想将“10”复制到之后的字节并获得“1010”，则需要复制字符串。这实际上是`strcat()`而不是的工作`memcpy()`，但这里有一种方法可以做到这一点`memcpy()`：

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void)
{
  constexpr char src[] = "10";
  constexpr size_t n = sizeof(src) - 1; // Don’t count the terminator.
  char dest[2*n+1] = {'\0'}; // Will hold: {'1','0','1','0','\0'}

  static_assert( sizeof(dest) > 2*n, "" ); // Always check array bounds in C++!

  memcpy( dest, src, n );
  memcpy( dest + n, src, n );

  puts(dest);

  return EXIT_SUCCESS;
} 
```

特别要注意，目标是一个长度足以容纳两个副本的字节数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-01T21:08:51.420

我的声誉得分不 >= 50，所以我不能发表评论，即使是评论帖子的原作者 -> 从我的角度来看，这简直是愚蠢的......

因此，这是我对 user207421 发表的评论的回答：

1.  过去 20 年（至少）在 PC 中使用的每个 CPU 中都实现了 SIMD 指令，因此除非您使用一些*非常*旧的 CPU，否则您关于“足够新”的 CPU 的声明基本上是无效的。

2.  请参阅我上面帖子中的第 2 点：“最快的依赖于架构的方法”意味着 fe 在 8 位 AVR 上，“movw”指令可以（并且）用于实现快速的类似 memcpy 的功能，因为它可以工作类似于 x86 上的 SIMD：它可以在单个周期内复制 2 个 8 位 CPU 字。

问候。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-02-18T22:59:15.963

> memcpy 在字节级别上工作，但整数是一系列字节。

错误的解释。

上面的答案对于 a 来说或多或少是正确的`strcpy()`，但在 的情况下是完全错误的`memcpy()`，因为所有`mem_xxx()`函数都使用 SIMD 指令来加速操作。

如果该`memcpy()`功能基于逐字节复制，那将是致命的慢...

基本上，所有的`mem_xxx`功能都是这样实现的：

1.  如果源和/或目标指针未对齐，则这些函数通过首先处理未对齐/奇数内存块来对齐指针。
2.  接下来，使用最快的架构相关方法来处理对齐的内存区域。
3.  最后，处理剩余的未对齐/奇数字节。

我建议在发布错误答案之前实际*阅读代码。*

# r - R: eval(parse(...)) 通常不是最理想的

> ID：11025031
> 
> 赞同：12
> 
> 时间：2012-06-13T23:54:37.387
> 
> 标签：r, parsing

```
require('fortunes')
fortune('106')
Personally I have never regretted trying not to underestimate my own future stupidity.
   -- Greg Snow (explaining why eval(parse(...)) is often suboptimal, answering a question triggered
      by the infamous fortune(106))
      R-help (January 2007) 
```

那么如果`eval(parse(...))`是次优的，还有什么方法可以做到这一点？

我正在使用 RCurl 从网站调用一些数据，`fromJSON()`在 rjson 包中使用后得到的是列表中的列表。列表的一部分具有将根据订单而改变的订单号的名称。该列表看起来像：

```
$orders
$orders$'5810584'
$orders$'5810584'$quantity
[1] 10

$orders$'5810584'$price
[1] 15848 
```

我想提取价值`$orders$'5810584'$price`

说列表在对象中`dat`。我用来提取它的方法`eval(parse(...))`是：

```
or_ID <- names(dat$orders) # get the order ID number
or_ID
"5810584"
sell_price <- eval(parse(text=paste('dat$',"orders$","'", or_ID, "'", "$price", sep="")))
sell_price
15848 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T01:03:15.983

实际上，该列表可能看起来有点不同。'$' 约定有点误导。试试这个：

```
dat[["orders"]][[ or_ID ]][["price"]] 
```

'$' 不会评估它的参数，但 "[[" 会，所以`or_ID`会变成 "5810584"。

# c# - 如何从 CodeInterface 获取通用约束作为 CodeType 对象？

> ID：11025033
> 
> 赞同：2
> 
> 时间：2012-06-13T23:54:43.800
> 
> 标签：c#, visual-studio-2010, code-generation, envdte

我在 Visual Studio 2010 中使用[DTE来检查 C# 类并自动生成代码。](http://msdn.microsoft.com/en-us/library/envdte%28v=vs.100%29.aspx)

当我遇到一个实现泛型接口的类时，我想将类型约束作为一个`CodeType`对象来访问。

例子：

```
class ServiceProviderCollection : IList<IServiceProvider> {} 
```

我有`CodeClass`代表的对象`ServiceProviderCollection`。我可以`CodeInterface`使用`IList<IServiceProvider>`. `CodeClass.ImplementedInterfaces`但我不知道如何从那里到达`CodeInterface`代表`IServiceProvider`.

我可以通过解析 CodeInterface.FullName 并抓取 < 和 > 之间的字符串来找到类型约束的**名称**，但这还不够。

如果这很重要，我正在使用 C# 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:21:22.430

鉴于微软正专注于[Roslyn](http://blogs.msdn.com/b/ericlippert/archive/2012/06/05/announcing-microsoft-roslyn-june-2012-ctp.aspx)以完全替代该模型，解析`FullName`可能是这样做的唯一方法。

# c++ - OS X Lion 上 libplist 的编译错误：未找到 string.h

> ID：11025035
> 
> 赞同：1
> 
> 时间：2012-06-13T23:54:57.217
> 
> 标签：c++, c, osx-lion

我正在尝试为 OS X 编译[Clementine](http://code.google.com/p/clementine-player/wiki/CompilingFromSourceMac)。在编译依赖项的过程中途，在 libplist-1.3 期间，我收到一个错误，即编译器找不到 string.h、assert.h 等。然后出现一系列错误跟随。

我不确定为什么会这样。我在处理大型 C 项目方面不是很有经验，并且希望能找到任何方向来找出为什么会发生这种情况。我肯定安装了 Xcode 命令行工具并确保它们是最新的。此外，标准文件位于`/usr/include`.

`make`根据构建指令运行后的输出：

```
cd libplist-1.3/build && PKG_CONFIG_PATH=/Users/dan/projects/sandbox/target/lib/pkgconfig cmake .. -DCMAKE_OSX_ARCHITECTURES=x86_64 -DCMAKE_INSTALL_PREFIX=/Users/dan/projects/sandbox/target -DQT_HEADERS_DIR=/Users/dan/projects/sandbox/target/include/ -DQT_LIBRARY_DIR=/Users/dan/projects/sandbox/target/bin -DENABLE_PYTHON=OFF
-- Configuring done
-- Generating done
CMake Warning:
  Manually-specified variables were not used by the project:

    QT_HEADERS_DIR
    QT_LIBRARY_DIR

-- Build files have been written to: /Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/build
cd libplist-1.3/build && PATH=/Users/dan/projects/sandbox/target/bin:$PATH make -j2
[ 12%] [ 12%] Building C object src/CMakeFiles/plist.dir/plist.c.o
Building C object src/CMakeFiles/plist.dir/bplist.c.o
/Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/src/plist.c:23:20: error: string.h: No such file or directory
/Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/src/plist.c:24:20: error: assert.h: No such file or directory
In file included from /Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/src/plist.h:25,
                 from /Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/src/plist.c:25:
/Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/include/plist/plist.h:48:20: error: stdint.h: No such file or directory
/Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/include/plist/plist.h:52:23: error: sys/types.h: No such file or directory
In file included from /Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/src/plist.h:25,
                 from /Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/src/plist.c:25:
/Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/include/plist/plist.h:128: error: expected ‘)’ before ‘val’
/Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/include/plist/plist.h:137: error: expected ‘)’ before ‘val’
/Users/dan/projects/sandbox/clementine-dep/macosx/libplist-1.3/include/plist/plist.h:156: error: expected declaration specifiers or ‘...’ before ‘uint64_t’ 
```

.. 还有很多

**更新：**

删除 -j2 标志时，libplist 会成功构建。现在我收到一个新错误：

```
Scanning dependencies of target libproxy
[ 54%] Building CXX object libproxy/CMakeFiles/libproxy.dir/extension_config.cpp.o
[ 57%] Building CXX object libproxy/CMakeFiles/libproxy.dir/extension_pacrunner.cpp.o
[ 60%] Building CXX object libproxy/CMakeFiles/libproxy.dir/extension_wpad.cpp.o
[ 63%] Building CXX object libproxy/CMakeFiles/libproxy.dir/proxy.cpp.o
/Users/dan/projects/sandbox/clementine-deps/macosx/libproxy-0.4.7/libproxy/proxy.cpp:433:15: error: use of undeclared identifier
      'strdup'; did you mean 'strcmp'? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:08:30.613

部分复制自评论：

尝试使用`make`而不是编译`make -j 2`。有时编译顺序可能会搞砸，这在您链接到的软件包站点中明确提到。

至于 的问题`strdup`，该函数在 C 和`cstring`C++ 的 string.h 中声明。如果包构建正确并且没有创建重复的标头或尝试使用非标准位置的标头，那么从**全新**的构建开始可能会解决您的问题。

如果这不起作用，您需要`cmake`查看日志并在包含路径中查找可能具有`string.h`或`cstring`在其中的目录，并且可能会被使用而不是默认路径。如果是这种情况，您绝对应该通知维护人员并确定是否只是删除这些文件或包含路径是适当的修复。

除此之外，我认为您必须通过他们的网站与包维护者取得联系。

祝你好运！

# asp.net - jqGrid 组摘要未显示分页的总和

> ID：11025040
> 
> 赞同：2
> 
> 时间：2012-06-13T23:56:00.710
> 
> 标签：asp.net, json, jqgrid, paging, grouping

这是我在这个论坛的第一篇文章，所以请耐心等待。

我需要设置摘要以显示网格中所有行的总和，甚至是其他页面内的行 - 值的绝对总和。

我正在寻找它，我看到很多人都有这个问题，所以我认为这不是我的代码的问题。听起来更像是分组机制本身的一种设计，不然我就不知道了。

但是，要清楚，我想我需要打电话到服务器端才能从那里得到总和，这可能吗？如果是这样，我应该如何使用json？

我正在考虑使用格式化程序选项，但它是逐行触发的，我不认为这是这个想法，因为总和将在第一次调用中全部出现。

有什么建议么？

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:41:39.077

您可以定义一个自定义`summaryType`函数来显示您的总和。根据以下[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3agrouping&s%5B%5D=summarytype)`summaryType`：

> 选项可以定义为函数。如果已定义，我们将三个参数传递给它——当前值、名称和记录对象。该函数应该返回值。请注意，此值将再次用于组值，直到它发生更改。

例如，您可以`totalSumRecord`在页面加载时检索 a - 直接从格式化程序进行 AJAX 调用是个坏主意 - 然后在格式化程序中显示适当的值：

```
function myCustomSummary(val, name, record) {
    return totalSumRecord[name];
}

jQuery("#grid").jqGrid({ 
  ...
  colModel : [
     {..},
     {name:'myColumn',
      index:'myColumn', 
      width:80, 
      align:"right", 
      sorttype:'number',
      formatter:'number',
      summaryType:myCustomSummary},
     ...
  ],
  ...
}); 
```

* * *

**更新**

jqGrid 4.4 中有一个错误，其中函数不允许作为摘要类型。如果这影响到您，[这里](https://github.com/tonytomov/jqGrid/commit/1d0901313546326e64586f1d9cfe13f746117201)是修复。

# css - 如何恢复嵌套无序列表中列表样式类型的“自动”值？

> ID：11025047
> 
> 赞同：7
> 
> 时间：2012-06-13T23:57:08.947
> 
> 标签：css

默认情况下，一组无样式的嵌套`<ul>`列表如下所示（至少在 Chrome、Firefox 和 IE 中）：

![嵌套 <ul> 截图](../Images/0b6e007f92ca2de6ce8d0b36064ed179.png)

顶层有一个`list-style-type`of `disc`，下一层是`circle`，后面的层是`square`。

如果我包含一个将 更改为 的样式表`list-style-type`，`none`是否有一种简单的方法可以稍后在文档中恢复为“自动项目符号类型”？（例如，用后续的 CSS 定义或 JavaScript 样式更改覆盖）

基本上，我正在寻找类似的东西`list-style-type: auto;`（这显然是无效的并且没有效果）：

```
<style type="text/css">
    ul { list-style-type: none; }
    ul { list-style-type: auto; } /* Does not work */
</style> 
```

将`list-style-type`后面设置为`disc`更改列表中的每个项目符号，我不再在不同级别看到不同的项目符号，所以这也不起作用。

通过为每个级别明确定义样式来实现此目的的唯一方法是什么？例如：

```
<style type="text/css">
    ul { list-style-type: disc; }
    ul ul { list-style-type: circle; }
    ul ul ul { list-style-type: square; }
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T05:25:49.727

使用类来编写类似的东西：

```
ul { list-style-type: none; }
.list_default { list-style-type: circle; } 
```

然后在你想要应用项目符号的 ul 上，

```
<ul class="list_default">
    <li>one</li>
    <li>two</li>
</ul> 
```

此外，在不使用“自动”行为时，请务必听取其他海报的建议。标准和制造商定义的默认值有很多专有扩展，只会让您稍后拉扯头发。现在养成不依赖他们理智的好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T19:25:22.843

我最近遇到了这个需求（没有嵌套，但仍然更喜欢不隐式设置罗马与希腊等）并`inherit`成功使用。自然，效果会根据定义的规则而有所不同，但它在我的情况下有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:55:25.890

> 通过为每个级别明确定义样式来实现此目的的唯一方法是什么？

是的，使用 ul，这是唯一的方法。基本上这正是 chrome 正在做的事情。

如果你还想保持从第二级开始的 chrome 风格，就不要在第一级使用 ul ！使用分...

# facebook-graph-api - facebook 事件 start_time 格式

> ID：11025049
> 
> 赞同：-1
> 
> 时间：2012-06-13T23:57:16.783
> 
> 标签：facebook-graph-api, facebook-fql

我正在使用 fql 从事件表中获取数据。但我不明白 start_time/end_time 格式。似乎这不是你从 Calender.getInstance().getTimeinMillisec() 得到的。尝试将其转换为 Java 日期格式。有人可以帮我看看格式吗？

fql : fql?q=SELECT 名称、地点、位置、start_time FROM event WHERE eid = 209798352393506

fql json 响应片段

```
{
          "eid": ....,
          "name": "Checking time format",
          "description": "",
          "start_time": 1339578000,
          "end_time": 1339664400

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:18:42.360

这是一个标准的[Unix 时间戳](http://en.wikipedia.org/wiki/Unix_time)——你可以像这样在 Java 中得到它：

```
long unixTime = System.currentTimeMillis() / 1000L; 
```

# cygwin - 在cygwin上找不到objdump

> ID：11025052
> 
> 赞同：3
> 
> 时间：2012-06-13T23:57:58.533
> 
> 标签：cygwin, elf, objdump, dwarf

我想在 cygwin 上使用 objdump 命令。我得到了例外：

> -bash：objdump：找不到命令

为什么cygwin找不到objdump？

编辑----我可以在[http://cygwin.com/packages/](http://cygwin.com/packages/)看到 binutils 。一旦我找到 binutils 包，我点击它，它会带我到[这里](http://cygwin.com/packages/binutils/)。我该如何安装它？我到那里后应该做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T00:33:45.777

下载 Cygwin [setup.exe](http://cygwin.com/setup.exe)并使用它来安装`binutils`软件包。

# caching - 两级分页中的有效地址时间

> ID：11025054
> 
> 赞同：1
> 
> 时间：2012-06-13T23:58:24.920
> 
> 标签：caching, operating-system, paging, virtual-memory, tlb

我目前正在做一些关于操作系统的项目，我知道如何在单级分页中找到 EAT

`EAT = (MAT+TLB-AT)*a+(2*MAT+TLB-AT)*(1-a)`

在哪里

```
MAT is memory access time, 
TLB-AT is TLB hit time
a is hit ratio 
```

我试图`EAT`在两个级别上找出，如果 TLB 未命中或四次，它会访问内存 3 次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-07T10:17:15.813

当 TLB 命中时 ==> 我们需要 **{TLB 访问时间 + 内存中实际页面的访问时间}**

当 TLB 未命中时 ==> 我们需要**{TLB 访问时间 + 内存页表条目的访问时间 + 内存实际页的访问时间}**

**对于 1 级分页**==> 从内存中访问页表条目的时间

**对于 2 级分页**==> 2 * 从内存中访问页表条目的时间

**. .**

**对于 n 级分页**==> n * 从内存中访问页表条目的时间

所以广义公式可以是：

EMAT= p * (TLB-访问时间 + 内存访问时间) + (1-p) *[TLB-访问时间 +((n+1) *内存访问时间)]

这里，p=命中率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-11T01:02:21.643

EAT = (%hit)(TLBAT + MAT) + (1-%hit)(TLBAT + (n+1)(MAT))

由于我们必须两次进入内存进行单级分页，所以当我们将另一个页面添加到混合中时，它只会向进程添加一个更多的内存读取。

# macos - 如何让 ZSH 在终端框架中显示当前目录？

> ID：11025063
> 
> 赞同：4
> 
> 时间：2012-06-13T23:59:55.473
> 
> 标签：macos, terminal, zsh

我逐渐从 Bash 切换到 ZSH，并尝试通过复制功能来学习。不过好像找不到这个。

![我认为 Bash 默认会这样做](../Images/0e02321cd5d96673e5501dc4d9e4b28a.png)

我应该放什么，我应该放哪里？这甚至可能吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T01:34:16.977

尝试这个：

```
settitle() { printf "\e]0;$@\a" }
dir_in_title() { settitle $PWD }
chpwd_functions=(dir_in_title) 
```

现在，您的`cd`命令将运行该`dir_in_title`函数，该函数将打印一个要求`Terminal.app`更新标题的转义序列。（奇怪的是，`urxvt`至少使用了也适用于 的转义序列。这些必须比我预期的更标准化。）

如果您喜欢这种效果，则需要将这些行添加到您的行中，`~/.zshrc`以便它在未来的终端上工作。

[我从超级用户的 Chris Page 那里获取](https://superuser.com/questions/79972/set-the-title-of-the-terminal-window-to-the-current-directory/321733#comment368133_79989)了正确的转义序列，并[从我对类似但不同的问题的回答中获取](https://stackoverflow.com/a/9865595/377270)了函数样式。[Chris Page 对这个问题给出了他自己的答案，在 OS X 10.7 上的细节完全不同](https://superuser.com/a/321733/69238)。当您升级时，您可能希望使用他的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-31T15:37:13.417

我已经定义了这个函数。需要一些 Python 知识并且有点冗长，但我知道那里发生了什么。

在没有谷歌搜索的情况下，我不知道为什么 sarnold`printf "\e]0;$@\a"`会做它应该做的事情。

```
function current_directory()
{
    echo $(python3 -c "from pathlib import Path; print(Path('.').absolute().name)")
} 
```

# notepad++ - 如何在 Notepad++ 中复制突出显示的行？

> ID：11025066
> 
> 赞同：7
> 
> 时间：2012-06-14T00:00:23.220
> 
> 标签：notepad++

我在 Notepad++ 中使用了比较插件。我只想复制突出显示的行。这些行没有添加书签。

[http://img96.imageshack.us/img96/4524/highlightlines.png](http://img96.imageshack.us/img96/4524/highlightlines.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T12:43:14.870

到目前为止，我发现这样做的唯一方法，如果有很多不同的行，这并不理想，就是这样。

1.  将光标放在文件顶部。
2.  然后，您可以单击“下一步”（向下箭头）图标，这将带您进入第一个区别。
3.  按 ctrl+F2 切换书签
4.  重复第 2 步和第 3 步，直到到达文件末尾
5.  打开搜索菜单 > 书签 > 复制带书签的行。

然后，您可以将这些行粘贴到您想要的任何位置。我不确定您是否可以将其写入宏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:52:41.647

我不知道自动执行此操作的方法，但您可以启用多重编辑（设置->首选项->编辑）。
然后，您可以 CTRL + 选择所需的行，复制并粘贴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-26T16:22:10.690

我需要做同样的事情，我丢失了大约 1000 行，我需要选择它们并将它们放到不同的文件中。它们被分成大约 50 个左右的块。

我去选择了添加的（绿线），然后按 tab 来缩进这些行。我对每个块都这样做了。由于一只手在鼠标上并单击滚动以选择，因此它进行得非常快，另一只手在 Tab 键上。

然后我重新排序文件，将缩进放在顶部。重新进行比较以确保我没有遗漏任何内容。

现在所有新行都在顶部。我只是选择并复制粘贴到新文件，然后使用 shift-tab 取消缩进。

# css - .body 背景图像上的 CSS Sprites

> ID：11025067
> 
> 赞同：0
> 
> 时间：2012-06-14T00:00:25.640
> 
> 标签：css, background-image, sprite

这可能有一个简单的（2 个字母）答案，但是如果我有一个带有背景图像的页面，是否可以在其上使用精灵？似乎没有，但这是一件如此简单的事情，很难相信这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:09:07.580

是的，您可以将任意数量的元素与背景图像堆叠在一起。您可以定位它们并使用 z-index 来控制它们的堆叠顺序（较高的数字堆叠在较低的数字之上）。只要您正确定义精灵的宽度/高度和背景位置，它就会起作用。

请记住，元素需要具有位置才能使 z-index 起作用（位置：相对；或位置：绝对；）。

# facebook - 首次启动应用时显示登录页面

> ID：11025068
> 
> 赞同：0
> 
> 时间：2012-06-14T00:00:28.527
> 
> 标签：facebook, windows-phone-7, view

我正在开发一个使用 Facebook API 的小应用程序。我想要做的是在第一次启动应用程序时显示我的登录/连接到 Facebook 页面（或者只要用户没有经过身份验证。

我的主要视图实际上是一个数据透视应用程序，但只要我没有 Facebook 访问令牌，我就不想展示它。我还希望能够从应用程序栏中访问此“登录”页面（它将与设置页面相同）。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:21:46.307

我建议使用自定义 UriMapper。这使您不必担心您的主页导航到登录页面，然后必须管理导航堆栈。

[您可以在此处](http://visuallylocated.com/post/2012/06/18/Using-a-custom-UriMapper-to-navigate-to-a-login-screen.aspx)阅读有关此方法的详细信息。

为此，请修改 WMAppManifest 中的 DefaultTask 元素以导航到假页面

```
<DefaultTask Name="_default" NavigationPage="LaunchPage.xaml" /> 
```

然后创建一个 UriMapper 类

```
 public class LoginUriMapper : UriMapperBase
{
    public override Uri MapUri(Uri uri)
    {
        if (uri.OriginalString == "/LaunchPage.xaml")
        {
            // Determine for yourself how to store login info, AppSettings (IsoStore) is a good choice)
            if (NeedsLoginInfo) 
            {
                uri = new Uri("/LoginPage.xaml", UriKind.Relative);
            }
            else
            {
                uri = new Uri("/MainPage.xaml", UriKind.Relative);
            }
        }
        return uri;
    }
} 
```

最后，在 Application_Launching 事件中为您的应用程序设置映射器

```
private void Application_Launching(object sender, LaunchingEventArgs e)
{
    RootFrame.UriMapper = new LoginUriMapper();

    // You should also handle logging in if you already have info
    // Determine for yourself how to store login info, AppSettings (IsoStore) is a good choice)
    if (NeedsLoginInfo == false)
    {
         LoginObject.Login();
    }
} 
```

AND 在 Application_Activated 事件中，如果应用程序被墓碑化

```
private void Application_Activated(object sender, ActivatedEventArgs e)
{
    if (e.IsApplicationInstancePreserved == false)
    {
        RootFrame.UriMapper = new LoginUriMapper();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:30:45.613

我相信你有两个选择：

1.  显示您的主视图，然后在“已加载”处理程序中，检查用户之前是否已登录。如果还没有，则切换到登录页面。缺点是您的主视图会在切换到登录页面之前显示一秒钟。您可以显示“检查登录”选框或其他内容。

2.  使您的启动页面成为一个简单的“正在加载...”页面。在此页面的“已加载”处理程序中检查用户是否已登录，然后切换到相应的页面。缺点是加载的页面将始终显示一秒钟。

我在商业应用程序中使用了第一种方法，看起来还不错。

# jquery - 使用 json 对象的值填充数组

> ID：11025070
> 
> 赞同：0
> 
> 时间：2012-06-14T00:00:31.693
> 
> 标签：jquery, json

我正在尝试使用基于另一个数组的值的 json obejct 的文本值填充数组

我的代码是：

```
var DemoOptions = {
  "One" : 1,
  "Two" : 2,
  "Three" : 3,
  "Four" : 4,
  "Five" : 5
};

var OldArray = [1,3,5];
var NewArray = [];

$.each(OldArray,function(x, item){
    NewArray.push(DemoOptions.item);
}); 
```

NewArray 现在应该是：

```
NewArray ["One", "Three", "Five"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:06:26.507

如果 DemoOptions 像这样翻转：

```
var DemoOptions = {
  1: "One",
  2: "Two",
  3: "Three",
  4: "Four",
  5: "Five"
}; 
```

您可以很容易地做到这一点，因为您只需要遍历`OldArray`一个并将相应的值（由 映射`DemoOptions`）推入`NewArray`. 由于可能有一个很好的理由你有它的另一种方式，你应该动态创建这个翻转的副本，然后填充你的新数组：

```
var DemoOptions = {
  "One" : 1,
  "Two" : 2,
  "Three" : 3,
  "Four" : 4,
  "Five" : 5
};

var OldArray = [1,3,5];

var flipped = {};
for(var key in DemoOptions)
    flipped[DemoOptions[key]] = key;

var NewArray = [];
for(var i = 0; i < OldArray.length; i++)
    NewArray.push(flipped[OldArray[i]]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:20:38.937

太糟糕了 DemoOptions 不是按数值索引而不是按字符串值。无论如何，这个怎么样：

```
for (var index in OldArray) {
    var value = OldArray[index];

    for (var demoString in DemoOptions) {
        if (DemoOptions.hasOwnProperty(demoString)) {
            var demoValue = DemoOptions[demoString];
            if (value == demoValue) {
                NewArray.push(demoString);
                break;
            }
        }
    }
} 
```

# sql-server-2000 - 对于给定的数据库，dbo.sysobjects 是主系统数据库的一个分区吗？

> ID：11025071
> 
> 赞同：0
> 
> 时间：2012-06-14T00:00:32.300
> 
> 标签：sql-server-2000

在 SQL Server 2000 中，我注意到`sysbojects`存在于每个数据库中。每个非系统数据库中的这个和其他系统表是否是该表以及其他系统表的一个分区`master` `sysobjects`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:07:19.413

不，它不是`master..sysobjects`表的分区。您会注意到，如果您在用户数据库中创建表：

```
USE whatever;
GO
CREATE TABLE dbo.floob(splunge INT);
GO 
```

该表出现在 中`whatever..sysobjects`，但没有出现在 中`master..sysobjects`。

为什么您现在要学习 SQL Server 2000 元数据？派对有点晚了，不是吗？:-)

# css - Rails Simpleform 设置表单输入元素的宽度

> ID：11025074
> 
> 赞同：6
> 
> 时间：2012-06-14T00:00:55.443
> 
> 标签：css, ruby-on-rails, forms, html-table, simple-form

我在表格中使用 gem simpleform

我想调整简单表单的每个表单元素的宽度，我可以这样做吗？

我尝试了以下但它似乎不起作用

```
 <td><%= listing.name %></td>
<td><%= f.input :suite, :input_html => { :size => 10, :maxlength => 10 } %></td> 
```

我在这里查看了 simpleform 文档，但找不到如何专门设置宽度。这是我在表格中的表格的样子。我想让列更窄。

![在此处输入图像描述](../Images/6234de131c958926bfb99f357e50db62.png)

如您所见，列宽非常宽。请告知如何使它们具有合适的尺寸，以免占用太多空间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T18:42:39.460

我已经`<%= f.input :fieldname, :input_html => {:maxlength =>2,:style=> 'width: 20px'}%>`成功使用了。你在压制所有标签吗？（通过`:label=>false`）？

# php - PHP如何检测人脸合并两张图片？

> ID：11025079
> 
> 赞同：0
> 
> 时间：2012-06-14T00:02:00.457
> 
> 标签：php, javascript, image-processing, coordinates

> **可能重复：**
> [面部识别/检测 PHP 或照片和视频库软件](https://stackoverflow.com/questions/1210672/facial-recognition-detection-php-or-software-for-photo-and-video-galleries)

我正在尝试编码以将肖像合并到可用的框架图片中。通过使用 WideImage PHP Lib，我可以对图像进行操作，这是我的代码：

```
//Load image from disk
$img = WideImage::load($fileName); //our character
$watermark = WideImage::load($framePath.'photo_frame.png'); //load frame picture

//crop img to fit into frame
$hWatermark = $watermark->getHeight();
$wWatermark = $watermark->getWidth();
$img = $img->resize($wWatermark, $hWatermark, "outside");
$hImg = $img->getHeight();
$wImg = $img->getWidth();
if($hImg > $hWatermark) {
    $img = $img->crop(0, 0, $width = "100%", $height = $hWatermark);
}
if($wImg > $wWatermark) {
    $img = $img->crop(0, 0, $width = $wWatermark, $height = "100%");
}

// place the frame override image
$new = $img->merge($watermark, $left = 0, $top = 0, $pct = 100);

//Result is a new image with our character in a frame
$new->output('jpg', 90); 
```

使用上面的块代码，我可以制作一张新图片，但是如果脸部不在左上角附近，则新图片不会聚焦到脸部。例子： ![合并两个图像结果](../Images/77b1beaa363dd84e7d0a35d03a485321.png)

我想我写不出代码来自动检测人脸，但是我们有一个简单的方法是让用户选择一个区域来拼贴。如何以这种方式在 HTML 和 js 上实现？感谢您的帮助！

# google-chrome - Chrome“模拟触摸事件”不起作用

> ID：11025081
> 
> 赞同：10
> 
> 时间：2012-06-14T00:02:07.267
> 
> 标签：google-chrome, mobile, touch, google-chrome-devtools, touch-event

我在 Chrome 的开发者工具中启用了“模拟触摸事件”选项。我设置了一个简单的测试程序，当我触摸`<div>`. 该程序在我的 Galaxy Nexus 上运行良好，但是当我在 Chrome 中单击时`<div>`，即使启用了“模拟触摸事件”选项，也没有任何反应。有什么建议么？我是否正确使用了这个工具？

这是我的代码 - 没什么太花哨的。

```
<!DOCTYPE html>
<html lang="en">
<head>      
    <style type="text/css">
        #main_div
        {
            position: absolute;
            width: 50px;
            height: 20px;
            background-color: red;
            top: 50%;
            left: 20px;             
        }           
    </style>
    <script type="text/javascript">
        function init()
        {
            main_div = document.getElementById("main_div");             
            main_div.ontouchstart = function() 
            {                    
                 alert("here");
            }                               
        }
    </script>
</head>
<body onload="init()">
    <div>
        <p id="x">hello</p>
        <p id="y"></p>
    </div>
    <div id="main_div">
        hello
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-02T05:11:13.220

让我难过的是，除了选中“模拟触摸事件”复选框外，您还必须选中主“启用”复选框以启用覆盖。两者都检查后，它工作正常。

![在此处输入图像描述](../Images/616c891ae9a12c8092dbd976b178e4d1.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T13:17:42.677

触摸事件在 Chrome 版本 21 中有效（不确定以前的版本）但您必须保持开发者工具窗口打开才能发生触摸事件。如果关闭窗口，您将返回正常的鼠标事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-11T14:20:20.647

从 Chrome 69 开始，设置中没有 Overrides 窗格，控制台中也没有 Emulator 抽屉。相反，您可以单击`...`设备视图中的图标，然后选择“添加设备类型”。

[![点击](../Images/1b8d224afc087fca266f2d74c5387b44.png)](https://i.stack.imgur.com/DEWOB.png)

在响应模式下，这将显示一个带有“移动”、“移动（无触摸）”、“桌面”和“桌面（无触摸）”选项的下拉列表。如果您没有看到它，请扩大设备视图窗格的宽度。响应模式的默认设置是 Mobile（这意味着触摸事件）。

[![在设备类型下拉列表中选择要模拟的事件](../Images/c45a8f7b5783246d3f23591b6b321542.png)](https://i.stack.imgur.com/JTgc0.png)

请注意，当您选择其他预设设备时，设备类型将设置为移动设备且无法更改。在“设置”中创建自定义设备时，您还可以选择要模拟的设备类型。

[![添加自定义设备时选择设备类型](../Images/8680ab4c2343551b5ee47ee69237bbb2.png)](https://i.stack.imgur.com/2UnNK.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-18T13:49:08.477

我注意到的一个重要点 - 检查“模拟触摸事件”不会*禁用*鼠标事件，它也只会添加一个触摸。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T12:56:56.783

你能分享你试过的代码吗？这是一个在 iPhone 和 Chrome 19 上都适用于我的示例代码

```
<head>
 <script>
function listen(elem, evnt, func) {
  if (elem.addEventListener)  // W3C DOM5\.        
    elem.addEventListener(evnt,func,false);
  else if (elem.attachEvent) { // IE DOM7\.         
    var r = elem.attachEvent("on"+evnt, func);
    return r;
  }
}

function attachListeners() {
var touch_div = document.getElementById('touch_me');
listen(touch_div,'touchmove', function(event) {
    touch_div.innerHTML="being touched " + event.targetTouches.length;
    touch_div.style.background =green;
}, false);
listen(touch_div,'touchstart', function(event) {
    event.preventDefault();
    touch_div.innerHTML="touchstart";
    touch_div.style.background ='green';
}, false);
listen(touch_div,'touchend', function(event) {
    touch_div.innerHTML="thanks!";
    touch_div.style.background ='#CCFF66';
}, false);
listen(touch_div,'click', function(event) {
    touch_div.innerHTML="hey - touch, not click!";
    touch_div.style.background ='red';
}, false);
listen(touch_div,'onmouseup', function(event) {
    touch_div.innerHTML="hey - that was a click!";
    touch_div.style.background ='';
}, false);
 }

function run_onload() {
attachListeners();
}   

 </script>

 </head>
 <body onload="run_onload()">
 <div id="touch_me">Touch me!</div>
 </body> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-04T19:28:49.487

唯一对我有用的是每次重新加载页面时切换在 Chrome 45 中的 Emulation > Sensors 中找到的 Emulate Touch Events。这是一个非常糟糕的解决方案。希望有人找到一个不那么烦人的解决方法。

[![在此处输入图像描述](../Images/711949705f9f1e1d43fb9cb6886090f5.png)](https://i.stack.imgur.com/LvNus.png)

# c++ - 在这种情况下如何正确回溯？

> ID：11025083
> 
> 赞同：2
> 
> 时间：2012-06-14T00:02:32.487
> 
> 标签：c++, algorithm, backtracking

**问题** 给定一个由符号`0, 1, &, |, ^`和所需的布尔结果值组成的布尔表达式，实现一个函数来计算将表达式括起来的方式的数量，以便它计算结果。
**示例**
*表达式* `1^0|0|1`
*所需的结果* `0`
*输出* `2, 1^((0|0)|1), 1^(0|(0|1))`

我的想法是使用回溯，并评估表单的表达式`a operator b`。例如
`1^0|0|1`
`-------`
`0123456`

有 3 种可能的评估： `0, 2, 4`，更具体地说，我有：
`(1)`评估 at`0 -> 1|0|1`
`(2)`评估 at`0 -> 1|1`
`(3)`评估 at`0 -> 1`

然后我回溯 at `(2)`，以评估位置`2`... 这个想法很简单，但它产生了重复的结果。方法的数量`result = 1`应该是`3`，但我的方法产量`4`。

```
bool evaluate(const string& expr) {
    assert(expr.length() == 3);
    assert(expr[0] == '0' || expr[0] == '1');
    assert(expr[1] == '^' || expr[1] == '|' || expr[1] == '&');
    assert(expr[2] == '0' || expr[2] == '1');

    bool result;
    bool a = (expr[0] == '1' ? 1 : 0);
    bool b = (expr[2] == '1' ? 1 : 0);

    switch (expr[1]) {
        case '^' :
            result = a ^ b;
            break;

        case '|' :
            result = a | b;
            break;

        case '&' :
            result = a & b;
            break;
    }

    return result;
}

void transform_at(string& s, int start) {
    bool result = evaluate(s.substr(start, 3));
    string left = s.substr(0, start);
    string right = s.substr(start + 3);
    result ? left.append(1, '1') : left.append(1, '0');
    s = left + right;
}

int count_parenthese_grouping(string expr, const bool result) {
    cout << "[recurse on]: " << expr << endl;
    if (expr.length() == 3 && evaluate(expr) == result) {
        return 1;
    }
    else if (expr.length() == 3 && evaluate(expr) != result) {
        return 0;
    }
    else {
        int operators = expr.length() - 2;
        int total = 0;

        for (int i = 0; i < operators; i += 2) {
            string temp = expr;
            transform_at(expr, i);
            total += count_parenthese_grouping(expr, result);
            expr = temp;
        }

        return total;
    }
} 
```

我看不出这个解决方案是如何产生重复结果的！谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:16:05.737

重复来自这样一个事实，即您可以通过两种方式到达 (1^0)|(0|0)：首先，用括号括起来 1^0，然后是 0|0；其次，用括号括起来 0|0 然后 1^0。

您需要确保只计算一次相同的括号。

一种可能的方法是从括号中计算一个标识号，然后维护一组这些 id 号并只计算尚未在集合中的那些。

这种 id 的一种可能性是以位模式表示括号：前 n-1 位表示第一级括号，接下来的 n-2 位表示第二级括号（括号包含第一级括号）等。

所以例如

```
(1^0)|0|0   would become 10000
1^(0|0)|0   would become 01000
1^0|(0|0)   would become 00100
(1^0)|(0|0) would become 10100
(1^(0|0))|0 would become 01010
1^((0|0)|0) would become 01001 
```

# python - ClearWhiteSpace，需要检查值是否等于[]

> ID：11025085
> 
> 赞同：1
> 
> 时间：2012-06-14T00:03:13.693
> 
> 标签：python

> **可能重复：**
> [如何检查列表是否为空白？](https://stackoverflow.com/questions/11024927/how-do-you-check-if-list-is-blank)

```
def CleanWhiteSpace(theDict) :
    stuff=[]

    for key,value in theDict.items():
        for d in value:
            if value != " ":
                stuff.append(d)    
                print d
                theDict[key]=stuff
            if not value[d]:
                print value
        stuff=[]
    return theDict
print CleanWhiteSpace({'a':['1','2'],'b':['3',' '],'c':[]}) 
```

你如何检查c是否为空白c是否等于[]？

好的，我有一个字典，里面有列表，其中一些列表是由 NOTHING 组成的。我需要遍历字典并删除那些具有空列表值的键。

尽量清楚。我试过什么？我尝试了多种不同的方法来检查键的值是否等于空。我尝试了 value == "": 语句，我尝试了 len 函数来检查 value 是否为空，我尝试了 if value: nothing 似乎工作，为什么？因为有人回答，空列表不会在循环体中执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:16:14.623

在您的示例中，当处理 key 时`c`，`key`will 的值和 will的`'c'`值是一个空列表。您可以通过说，例如，来测试这一点。或者，如果您知道它是一个列表而不是某种其他类型的序列，.`value``[]``if not value:``if value==[]`

很难从所写的问题中确定，但是您是否尝试过`if d==[]:`在循环中的某个地方放置类似的东西？那是行不通的，因为 when`value`是一个空列表，循环`for d in value:`正在循环一个空列表的元素，并且没有任何元素，所以循环体永远不会被执行。

顺便说一句，您的代码的其他一些部分似乎显示出`value`其元素之间的混淆。例如，您编写`if value != " "`但肯定`d`是您想在那里进行测试。怎么回事`if not value[d]:`？为什么你会期望`d`成为一个合适的索引`value`？

您还应该更仔细地考虑`stuff`代码执行时会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:16:37.930

编辑：

这个怎么样？

```
def CleanWhiteSpace(theDict):
    newDict = {}
    for key in theDict:
        if theDict[key]:
            newDict[key] = theDict[key]
    return newDict 
```

请注意，这避免`theDict`了就地修改，因此，如果您需要，请询问。

~~有两种方法可以检查列表是否为空：~~

 ~~```
a_list = []
if not a_list:
    do something #the if is entered if the list is blank 
```~~ 

或者

```
a_list = []
if len(a_list)==0:
    do something 
```

~~这两个片段是等价的。请注意，第一个有效，因为 的值`a_list`被隐式转换为布尔值并且`bool([])`is `False`。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:44:39.090

```
theDict = dict( [(k,v) for k,v in theDict.items() if len(v)>0]) 
```

# regex - 正则表达式模式优化

> ID：11025087
> 
> 赞同：0
> 
> 时间：2012-06-14T00:03:27.823
> 
> 标签：regex, optimization

我有以下模式和分组应用程序，我将它们重构为一个。以下内容将放置在 xml 文件中并读入正则表达式引擎：

```
 regexpattern="http://cars.mysite.com(.*)" application="http://www.mysite.com$1"

  regexpattern="http://ww.mysite.com(.*)" application="http://www.mysite.com$1 

    regexpattern="http://(bikes\.|new\.|)mysite.com/(.*)" application="http://www.mysite.com/$2" 
```

合并为：

```
regexpattern="http://(cars\.|ww\.|bikes\.|new\.|)mysite.com(|/)(.*)"  application="http://www.mysite.com/$3" 
```

这是我能做的最好的吗，还能做得更好吗？我是新来的。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:06:18.913

1.您缺少反斜杠：

```
http://(cars\.|ww\.|bikes\.|new\.|)mysite\.com(|/)(.*)
                                         ^

```

2.代替`(|/)`你可以使用`/?`：

```
http://(cars\.|ww\.|bikes\.|new\.|)mysite\.com/?(.*)
                                              ^^

```

3\. 使斜线可选意味着它接受`mysite.com.co.uk`可能不是你想要的东西。

4\. 另一个小改动是`\.`只写一次：

```
http://((cars|ww|bikes|new)\.)?mysite\.com/?(.*)
                           ^^

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-08T23:59:06.807

完整的正则表达式重构看起来像：

`http://((?:(?:car|bike)s|(?:w|ne)w)\.)?mysite\.com/?.*`

# javascript - 自定义图像作为单选按钮

> ID：11025091
> 
> 赞同：2
> 
> 时间：2012-06-14T00:03:43.297
> 
> 标签：javascript, html, css

我一直在尝试使用 HTML、CSS 和 JavaScript 制作自定义单选按钮。我一直在查看以前关于单选按钮的问题，我觉得我已经实现了这些建议，但我的 jpeg 图像仍然被切成两半。我显然错过了一些东西，但不确定它是什么。下面是我的 HTML CSS 和 JavaScript。任何投入将不胜感激。

```
<style TYPE="text/css">
.has-js .label_check,
.has-js .label_radio { padding-left: 40px;}
.has-js .label_radio {
background: url(images/radio_button-21.jpg) no-repeat;
width: 33px;
height: 35px;}

.has-js .label_check { background: url(check-off.png) no-repeat; }
.has-js label.c_on { background: url(check-on.png) no-repeat; }
.has-js label.r_on { 
background: url(images/radio_button_selected.jpg) no-repeat;
width: 33px;
height: 35px;}

.has-js .label_check input,
.has-js .label_radio input { position: absolute; left: -9999px;}

</style>

</head>

<label class="label_radio" for="radio-01">
    <input name="sample-radio" id="radio-01" value="1" type="radio" />
    Yes
</label>

<br />
<br />

<label class="label_radio" for="radio-02">
    <input name="sample-radio" id="radio-02" value="2" type="radio" />
    No
</label>

<br />
<br />

<label class="label_radio" for="radio-03">
    <input name="sample-radio" id="radio-03" value="3" type="radio" />
    Maybe
</label>

</body> 
```

JavaScript 代码

```
onload = function() {

    var body = gebtn(d,'body')[0];
    body.className = body.className && body.className != '' ? body.className + ' has-js' : 'has-js';

    if (!d.getElementById || !d.createTextNode) return;
    var ls = gebtn(d,'label');
    for (var i = 0; i < ls.length; i++) {
        var l = ls[i];
        if (l.className.indexOf('label_') == -1) continue;
        var inp = gebtn(l,'input')[0];
        if (l.className == 'label_check') {
            l.className = (safari && inp.checked == true || inp.checked) ? 'label_check c_on' : 'label_check c_off';
            l.onclick = check_it;
        };
        if (l.className == 'label_radio') {
            l.className = (safari && inp.checked == true || inp.checked) ? 'label_radio r_on' : 'label_radio r_off';
            l.onclick = turn_radio;
        };
    };
};
var check_it = function() {
    var inp = gebtn(this,'input')[0];
    if (this.className == 'label_check c_off' || (!safari && inp.checked)) {
        this.className = 'label_check c_on';
        if (safari) inp.click();
    } else {
        this.className = 'label_check c_off';
        if (safari) inp.click();
    };
};
var turn_radio = function() {
    var inp = gebtn(this,'input')[0];
    if (this.className == 'label_radio r_off' || inp.checked) {
        var ls = gebtn(this.parentNode,'label');
        for (var i = 0; i < ls.length; i++) {
            var l = ls[i];
            if (l.className.indexOf('label_radio') == -1)  continue;
            l.className = 'label_radio r_off';
        };
        this.className = 'label_radio r_on';
        if (safari) inp.click();
    } else {
        this.className = 'label_radio r_off';
        if (safari) inp.click();
    };
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:09:59.020

如果无法运行您的代码，或者至少无法查看其外观的屏幕截图，这很难说。但在我看来，单选按钮（或它周围的包含元素）的宽度和/或高度对于您正在使用的图像大小来说太小了。如果是这样，指定适当宽度或高度的 CSS 声明应该修复它。

编辑：为了解决这些问题，我喜欢在 Chrome 浏览器中工作，这样我就可以使用它内置的开发人员工具。在 Chrome 中，我可以右键单击一个元素并选择“检查元素”。这使我能够浏览 DOM 并查看影响每个元素的 CSS 说明符，并通过实验调整它们，直到我诊断出问题为止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:25:02.663

确保您的图像文件与单选按钮的大小相同。

无论如何，我不明白为什么会有 JavaScript。它可以是纯 CSS：http:
[//jsfiddle.net/DerekL/9MtMx/](http://jsfiddle.net/DerekL/9MtMx/)

```
input[type="radio"]{
    -webkit-appearance:none;
    -moz-appearance:none;
    border-radius:8px;
    border:1px solid #dbdbdb;
    width:16px;
    height:16px;
    cursor:pointer;
    margin:0 1px;
    background-image: -webkit-gradient(linear, left top, left bottom, from(white), to(#f2f2f2));
    vertical-align:bottom;
}

input[type="radio"]:checked{
    background-position:0px 0px;
    background-image: url('checked.png'), -webkit-gradient(linear, left top, left bottom, from(white), to(#f2f2f2));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:48:28.217

这样做的 CSS 方式是恰当的，但不幸的是，我们仍然需要忍受 IE 6、7 和 8，它们可能不支持这一点。最好的方法是使用 JS 方法，仅适用于不兼容的浏览器（IE ！！！），其余的仍然使用 CSS。

# jasper-reports - Jasper 报告 HTML 项目符号悬挂缩进

> ID：11025092
> 
> 赞同：2
> 
> 时间：2012-06-14T00:03:48.760
> 
> 标签：jasper-reports, html-lists, indentation

我有一个 Jasper 报告，它使用 HTML 标记标签来显示 li 标签列表。但是，似乎即使使用最新版本的 Jasper 报告，它仍然无法正确执行悬挂缩进。

这就是我要的：

*   测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试
    *   测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试

这就是我得到的：

*测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试

   * 测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试

我在 jrxml 中有这个：

```
<detail>
            <band height="20"  isSplitAllowed="true" >
                <textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                    <reportElement
                        mode="Transparent"
                        x="32"
                        y="2"
                        width="458"
                        height="16"
                        forecolor="#000000"
                        backcolor="#FFFFFF"
                        key="textField"
                        stretchType="RelativeToTallestObject"
                        isPrintWhenDetailOverflows="true"/>
                    <box></box>
                    <textElement markup="html" lineSpacing="Single">
                        <font fontName="Arial" pdfFontName="Helvetica" isBold="false" isItalic="false" isUnderline="false" isPdfEmbedded ="false" pdfEncoding ="Cp1252" isStrikeThrough="false" />
                    </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[$F{message}]]></textFieldExpression>
                </textField>
            </band>
        </detail> 
```

我在消息变量中有这个：

```
<ul><li>TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST<ul><li>test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test </li></ul></li></ul> 
```

知道如何让这些子弹缩进悬挂吗？

谢谢你，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-01T15:02:54.820

我能够通过将第一行（文本字段页面）上的负制表符缩进与相等的左填充（边框页面）相结合来实现这一点

![在此处输入图像描述](../Images/b8320a59f3c9256d09cd908e9b7f5c85.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:45:38.793

这可以通过元素的填充来实现：

![填充对话框 iReport](../Images/638d9fcab2bac20a275d5448084d0903.png)

```
 <textField isBlankWhenNull="true">
            <reportElement x="170" y="10" width="400" height="15"/>
            <box leftPadding="5">
                <topPen lineWidth="0.0"/>
                <leftPen lineWidth="0.0"/>
            </box>
            <textElement>
                <font fontName="Times New Roman" size="10" pdfEncoding="Cp1250"/>
            </textElement>
            <textFieldExpression class="java.lang.String"><![CDATA[$F{TASK_NAME}]]></textFieldExpression>
        </textField> 
```

# datatable - 带有未知键的 JSON 对象的 YUI DataTable 嵌套列

> ID：11025093
> 
> 赞同：1
> 
> 时间：2012-06-14T00:03:50.727
> 
> 标签：datatable, nested, yui, yui-datatable

我对 YUI 很陌生，需要一些帮助。

我有这样的 JSON 响应：

```
{
    "Results":[
        {
            "alpha":57.935,
            "beta:{
                "delta":2.975,
                "omega":1.431
            },
            "gamma":{
                "theta":"0.339",
                "lambda":"1.195"
            }
        },
        {
            "alpha":87,
            "beta":{
                "lambda":2.680,
                "kappa":0.714
            },
            "gamma":{
                "zeta":"0.288",
                "epsilon":"0.289"
            }
        }
    ]
} 
```

我想要一个包含嵌套列的数据表，其中：
1) alpha、beta 和 gamma 是父列。
2) beta 和 gamma 各有两列由 JSON 键值对组成（例如，delta => 2.975）。
3) 行数，即总键值对，是动态的。

基本上，是这样的：

```
 ----------------------------------------------
    | alpha   |      beta      |       gamma     |
    ----------------------------------------------
    | 57.935  |  delta | 2.975 |   theta | 0.339 |
    ----------------------------------------------
    |         |  omega | 1.431 |  lambda | 1.195 |
    ----------------------------------------------
    | 87.435  | lambda | 2.680 |    zeta | 0.288 |
    ----------------------------------------------
    |         |  kappa | 0.714 | epsilon | 0.289 |
    ---------------------------------------------- 
```

我已经能够生成非嵌套的简单 JSON 响应。

我的问题：
1）我有每个 JSON 子对象的对象（{theta:0.339} 等）。两个子列都需要来自同一对象的数据。如何在不修改的情况下使用它？我应该对 myColumnDefs 中的两个子列使用相同的“keyName”吗？
2) 如何在 alpha td 为空的情况下创建多行？

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:08:04.330

这不是一个容易解决的问题。除非您能够在将 JSON 发送到客户端之前将其格式化为单独的行，否则您*可以*使用一些列配置、格式化程序和自定义 bodyView modelList 属性设置器来拼凑一个解决方案，以展平数据以进行显示。 [http://jsbin.com/3/efigim/1/edit?javascript,live](http://jsbin.com/3/efigim/1/edit?javascript,live)

这可能会涉及到表行 - > 数据记录关联的一些破坏，因为 bodyView 的 modelList 包含其自己的行模型，而不是共享 clientId。这可能会或可能不会妨碍您，具体取决于您是否需要其他功能。

但由于 DataTable 的数据 ModelList 保留了 beta 和 gamma 值的对象——只有视图的表示是定制的——你可能会没事。

YMMV, HTH

# python - PyQt 中字典的通用值编辑器 GUI

> ID：11025094
> 
> 赞同：2
> 
> 时间：2012-06-14T00:04:12.250
> 
> 标签：python, pyqt

假设我有一本充满参数的字典：

```
{speed = 1, intelligence = 3, dexterity = 2} 
```

我想调用一个循环，以程序方式为该列表中的每个项目创建一个`Label`和一个`SpinBox`，以防我以后想添加更多属性。我可以创建窗口并返回更新的值就好了。我唯一的问题是我希望根据需要创建所有小部件，无论我有 7 个或 20 个属性要编辑。

所以可以调用标签对象，`speed_Label`智能标签对象`intelligence_Label`，包含速度值的旋转框`speed_SpinBox`等等，然后我可以很容易地传回来。然而，这

a) 似乎是糟糕的命名习惯

b）似乎很难看，因为我不知道如何在程序上给对象命名，比如说

```
for KEY in dict.keys(): # say the KEY is "Speed"
    # this would produce a Label object called Speed_Label
    # which displays the text "Speed"
    "KEY" + "_Label" = QLabel("KEY") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:41:12.187

为什么不简单地使用列表或字典？

像这样的东西应该工作：

```
widgets = {}
form = QFormLayout()
for key, value in your_dict.iteritems():
    widgets[key] = widget = {}
    widget['spinbox'] = spinbox = QSpinBox()
    spinbox.setValue(value)
    form.addRow(key, spinbox) 
```

# ruby-on-rails - Rails 在部分弹出窗口中链接到远程站点

> ID：11025096
> 
> 赞同：0
> 
> 时间：2012-06-14T00:04:35.370
> 
> 标签：ruby-on-rails, ruby

我想在 Rails 中的站点弹出窗口中呈现指向外部站点的链接。这样做的最佳方法是什么？

例如，当在我的网站上单击链接时，我希望在弹出的部分中显示 www.cnn.com 之类的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:26:33.510

您不能进行跨域 ajax 调用以在弹出窗口中显示。所以它不会像渲染链接那么容易。您可以尝试在该弹出窗口中使用 iframe。

# c# - Untitesting/Moq 方法调用 webrequest

> ID：11025097
> 
> 赞同：4
> 
> 时间：2012-06-14T00:04:38.600
> 
> 标签：c#, moq

我想测试一个通过 Webrequest 发送文本的类，如何使用 Moq 模拟 GetRequest 方法来测试 GetRequest？

```
public class Sender

public void Send(string Message)
{
...
WebRequest myReq = GetRequest(sParmeter);
}

protected WebRequest GetRequest(string URl)
        {
            return WebRequest.Create(URl);
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T01:03:35.733

对于这样的事情，简单的方法是将您的`WebRequest`实例及其操作移动到接口中介后面。

例子：

```
public interface IWebRequestHandler
{
WebRequest GetRequest (string URI);
}

public class WebRequestHandler : IWebRequestHandler
{
public WebRequest GetRequest (string URI)
{
return WebRequest.Create(URl);
}
} 
```

你的发件人类应该有一个可注入的实例，`IWebRequestHandler`你可以用 模拟它`MOQ`，设置预期，验证它被调用以及你可能想要的任何其他东西。

```
public class Sender
{
public IWebRequestHandler Handler{get;set;}
public void Send(string Message)
{
Handler.GetRequest(new URI(Message));//call the method with right params, just an example
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T05:28:54.490

我要建议的方法之一与 AD.Net 的响应相同，但如果您不想修改现有结构并仍然进行测试，您可以执行以下操作：

修改你原来的类如下：

```
public class Sender
{
    public void Send(string Message)
    {
    ...
        WebRequest myReq = GetRequest(sParmeter);
    }

    protected virtual WebRequest GetRequest(string URl)
    {
        return WebRequest.Create(URl);
    }
} 
```

并在您的测试项目中扩展此类，如下所示：

```
public class MockSender: Sender
{
    private WebRequest _response;
    public MockSender(WebRequest response)
    {
    _response=response;       //initialize data to be returned
    }
    protected override WebRequest GetRequest(string URl)
    {
        //return your test;
    }
} 
```

现在在您的测试中创建一个 MockSender 类型的实例并在其上调用 Send 方法。

Moq 期望您的类是抽象的，或者您实现一个接口，从而模拟 AD.Net 所描述的接口

希望这可以帮助..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T02:32:11.413

另一种方法是将 IWebRequestCreate 方法传递给构造函数。

```
 public HTTPRequestFactory(IWebRequestCreate create)
    {
        _IWebRequestCreate = create;

    }

    public HTTPRequestFactory()
    {
        //Do nothing this is the real constructor, above is just for testing.
    }

    public WebRequest Create(String uri)
    {
        Uri _uri = new Uri("http://"+this.address+uri);
        request =  (HttpWebRequest)this.Create(_uri);
        return request;
    }

    public WebRequest  Create(Uri uri)
        if (null == _IWebRequestCreate)
        {
            //use the real one
            request = WebRequest.Create(uri);
        }
        else
        {
            //testing so use test one
            request = _IWebRequestCreate.Create(uri);
        }
        return request;
    } 
```

然后，您可以使用标准测试来确认它是否按您的意愿被调用。

```
 [Test]
    public void NewwebrequestCreatesWebRequest()
    {
        var mockCreate = new Mock<IWebRequestCreate>();
        mockCreate.Setup(x => x.Create(It.IsAny<Uri>()));
        HTTPRequestFactory webrequest = new HTTPRequestFactory(mockCreate.Object);
        HttpWebRequest request = (HttpWebRequest)webrequest.Create(testURI);
        mockCreate.VerifyAll();       
    }

    [Test]
    public void webrequestUsesAddressProperty()
    {
        var mockCreate = new Mock<IWebRequestCreate>();
        string IP = "10.99.99.99";
        Uri expected = new Uri("http://10.99.99.99/services");
        mockCreate.Setup(x => x.Create(expected));
        HTTPRequestFactory webrequest = new HTTPRequestFactory(mockCreate.Object);
        webrequest.address = IP;
        HttpWebRequest request = (HttpWebRequest)webrequest.Create(testURI);
        mockCreate.VerifyAll();
    } 
```

使用两个 Create 函数的原因是您要传入一个字符串 Create(string)，而 IWebRequestCreate 需要一个 Create(Uri)。

已编辑，因为标准依赖注入不适用于 IWebRequestCreate。标准模式是使用接口实例化一个对象并通过构造函数将其传入。由于无法使用构造函数创建 WebRequest 并且无法实例化接口，因此上述逻辑可以解决此问题。

# mysql - MAMP MySql 中缺少 UTF-8 字符集

> ID：11025098
> 
> 赞同：3
> 
> 时间：2012-06-14T00:04:39.973
> 
> 标签：mysql, mamp

我正在尝试使用 MAMP 运行 MySql 数据库，但是当我尝试访问数据库时，出现此错误：

> SQLSTATE[HY000] [2019] 无法初始化字符集 UTF-8（路径：/Applications/MAMP/Library/share/charsets/）

我运行“显示变量”，发现字符集设置为 UTF-8。我还查看了错误中提到的路径，发现没有任何文件说明 UTF-8，因此似乎缺少此字符集。啊？？？如果它正在寻找这个字符集，它通常必须存在。那么为什么缺少字符集呢？我怎样才能得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:29:34.827

我有一个类似的问题。在我的情况下，我输入了错误的 UTF-8 来建立连接。尝试使用字符集“utf8”而不是“UTF-8”连接。

除此之外，我在该文件夹中也没有 UTF-8 字符集文件，所以我想这不是真正的问题。

# clr - 在 .NET 2.0 中使用扩展属性转义 Catch-22

> ID：11025100
> 
> 赞同：9
> 
> 时间：2012-06-14T00:05:05.963
> 
> 标签：clr, extension-methods, csc, vbc

同时针对 2.0、3.0、3.5、4.0 和 4.5 的单个 .NET 程序集如何支持 C# 和 VB.NET 使用者的扩展方法？

标准建议是添加以下内容：

```
namespace System.Runtime.CompilerServices
{
  public sealed class ExtensionAttribute : Attribute { }
} 
```

这种方法由不止一位 Microsoft 员工建议，[甚至](http://www.danielmoth.com/Blog/Using-Extension-Methods-In-Fx-20-Projects.aspx)[在](http://devhawk.net/2008/09/17/dlr-namespace-change-fire-drill/)MSDN杂志中[出现](http://msdn.microsoft.com/en-us/magazine/cc163317.aspx#S7)。它被[许多博主](http://kohari.org/2008/04/04/extension-methods-in-net-20/)[广泛](http://www.codethinked.com/using-extension-methods-in-net-20)称赞为“没有不良影响”。

哦，除了它会导致针对 .NET 3.5 或更高版本的 VB.NET 项目的编译器错误。

Microsoft.Core.Scripting.dll 的作者[想通了](http://devhawk.net/2008/09/17/dlr-namespace-change-fire-drill/)，并将“公共”更改为“内部”。

```
namespace System.Runtime.CompilerServices
{
  internal sealed class ExtensionAttribute : Attribute { }
} 
```

这似乎解决了VB兼容性问题。

因此，我信任地将这种方法用于[广泛使用的 ImageResizing.Net 库](http://imageresizing.net)的最新版本（3.2.1） 。

但是，对于某些针对 .NET 3.5+ 的用户，我们**开始**或多或少随机地收到此编译器错误（[原始报告）。](https://stackoverflow.com/questions/10990536/compilation-errors-with-imageresizer-3-2-1)

```
Error 5 Missing compiler required member
'System.Runtime.CompilerServices.ExtensionAttribute..ctor' 
```

因为 MSBuild/VisualStudio 编译器在解决命名冲突时显然不会费心查看范围规则，并且程序集引用的顺序扮演的角色并不完全记录，所以我不完全理解为什么以及何时发生这种情况。

有[一些 hacky 解决方法](https://stackoverflow.com/a/10996336/166893)，例如更改程序集命名空间、重新创建项目文件、删除/读取 System.Core，以及调整 .NET 框架的目标版本。不幸的是，这些变通方法都不是 100%（除了混叠，但这是一个不可接受的痛苦）。

我该如何解决这个问题

1.  维护对在程序集中使用扩展方法的支持，
2.  维护对 .NET 2.0/3.0 的支持
3.  每个 .NET 框架版本不需要多个程序集。

或者，是否有让编译器注意范围规则的修补程序？

未回答此问题的关于 SO 的相关问题

*   [.NET 2.0 中的 C# 扩展方法](https://stackoverflow.com/q/2277365/166893)
*   [在 .NET Framework 2.0 中使用扩展方法](https://stackoverflow.com/questions/783155/using-extension-methods-with-net-framework-2-0?rq=1)
*   [关于 ExtensionAttribute 的奇怪警告](https://stackoverflow.com/questions/546819/strange-warning-about-extensionattribute)
*   [在 Asp.Net 中使用 Iron Python 时 ExtensionAttribute 的模糊参考](https://stackoverflow.com/questions/835592/ambigious-reference-for-extensionattribute-when-using-iron-python-in-asp-net)
*   [我应该支持 .NET 2.0 吗？](https://stackoverflow.com/questions/3389832/should-i-support-net-2-0)
*   [在 .NET 2.0 中使用扩展方法？](https://stackoverflow.com/questions/1522605/using-extension-methods-in-net-2-0?rq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:13:34.950

我们在 IronPython 上遇到了同样的问题。[http://devhawk.net/2008/10/21/the-fifth-assembly/](http://devhawk.net/2008/10/21/the-fifth-assembly/)

我们最终将自定义版本的 ExtensionAttribute 移动到它自己的程序集中。这样，客户可以在引用我们的自定义 ExtensionAttribute 程序集或 System.Core 之间进行选择——但不能同时引用两者！

另一个棘手的问题是您必须始终部署 E​​xtensionAttribute 程序集——即使您没有在项目中引用它。公开扩展方法的项目程序集将具有该自定义 ExtensionAttribute 程序集的 assemblyref，因此如果找不到它，CLR 会感到不安。

鉴于.NET 2.0 支持的硬性要求，我认为最好的选择是根本不使用扩展方法。我不熟悉 ImageResizer 项目，但听起来这是 ImageResizer 的最新变化。将扩展方法更改为传统的静态方法有多可行？实际上，我们曾为 IronPython/DLR 考虑过这一点，但这并不可行（当时我们与 LINQ 合并，而 LINQ 基本上在其整个存在过程中都大量使用了扩展方法）。

# php - 在谷歌地图上创建标记

> ID：11025102
> 
> 赞同：0
> 
> 时间：2012-06-14T00:05:31.660
> 
> 标签：php, javascript, google-maps

我正在尝试在地图上添加多个谷歌标记，但我不确定为什么这段代码不起作用。我正在使用 php 和 javascript。我检查了是否`$DNB`有元素，它确实有。我不确定我做错了什么。

```
 while($DNB -> fetch())
                            {
                                ?>
                                 var point  = new google.maps.LatLng(<?php echo initval( $lat)?>, <?php echo initval($lon)?>);
                                 var marker = new google.maps.Marker({position: point, map:map});
                             <?php } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:10:38.560

这段代码：

```
var point=  new GLatLng(<?php echo intval($lat) ?>],<?php echo intval($lon)?>); 
```

是谷歌地图 API V2。这段代码：

```
 var marker = new google.maps.Marker({position: point, map:map}); 
```

是谷歌地图 API V3。选择一个，我强烈建议 V3。查看[https://developers.google.com/maps/documentation/上的文档](https://developers.google.com/maps/documentation/)

# c# - FlowLayoutPanel中的过滤器控件？

> ID：11025103
> 
> 赞同：1
> 
> 时间：2012-06-14T00:05:46.773
> 
> 标签：c#, search, user-controls, flowlayout

我有一个 FlowLayoutPanel ，我填充了一个 custom `UserControl`，并且我`TextBox`在表单顶部有一个我想用来过滤结果的表单。每个都`UserControl`存储它的属性，但我不确定如何使用这些属性进行过滤。

例如，假设 my`UserControl`包含如下内容：

```
// snip..
public string Text { get; set; }
public string Description { get; set; }
//snip.. 
```

那么我将如何从 the 中获取条目`TextBox`并将其与 and 进行`[usercontrol].Text`比较`[usercontrol].Description`？它必须在文本中进行搜索，而不仅仅是从头开始。

一旦我过滤了适当的结果，我希望那些是唯一可见的。我是否必须将它们全部刷新并仅使用适用的重建它，或者我可以删除与过滤器不匹配的那些？

我知道这可能是一个非常菜鸟的问题，我只是不知道从哪里开始。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T01:39:08.837

您可以遍历`TextBoxChanged`事件的所有用户控件，如果它不符合您的条件，请将可见性设置为折叠。它看起来像这样：

```
private textBoxTextChanged(obj sender, EventArgs e)
{
    foreach(UserControl uc in flowLayoutPanel.Children)
    {
        if(!uc.Text.Contains(textBox.Text) && !uc.Description.Contains(textBox.Text))
        {
            uc.Visibility = Visibility.Collapsed;
        }
        else
        {
            //Set Visible if it DOES match
            uc.Visibility = Visibility.Visible;
        }
    }
} 
```

# nhibernate - nHibernate Criteria，尝试按枚举名称排序（按字母顺序而不是值）

> ID：11025106
> 
> 赞同：0
> 
> 时间：2012-06-14T00:06:04.247
> 
> 标签：nhibernate, enums, sql-order-by, criteria

假设我有一个包含状态类型的类，它被定义为这样的枚举：

```
 public class MyObject
    {
        public virtual int Id { get; set; }
        public virtual SomeEntity Data { get; set; }
        public virtual MyStatusEnum Status { get; set; }
    }

    public enum MyStatusEnum
    {
        Active = 1,
        Paused = 2,
        Completed = 3
    } 
```

我通过 Fluent nHibernate 完成的映射如下所示：

```
 public class MyObjectMap: ClassMap<MyObject>
    {
        public MyObjectMap()
        {
            this.Table("my_object_table");
            ...
            this.References(x => x.SomeEntity).Column("some_entity_id").Not.Nullable();
            this.Map(x => x.Status).Column("status_type").CustomType<MyStatusEnum>().Not.Nullable();
        }
    } 
```

现在设置已经完成，我的困境是：

在我的存储库类中，我想通过 Status 属性对所有 MyObject 实体进行排序，nHibernate 将其保留为 int。但是，由于我无法控制的权力，我无法重新排序 MyStatusEnum 以便枚举值按字母顺序排序。当我创建条件以选择 MyObjects 列表并尝试按 Status 属性对其进行排序时，它会按 Status 的 int 值进行排序。

```
 ICriteria criteria = this.Session.CreateCriteria<MyObject>("obj")
        .AddOrder(Order.Asc("Status"))
        .List() 
```

我真的很希望能够按枚举名称订购。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:47:32.197

如果要在数据库中对其进行排序，则必须使用带有 case 语句的投影进行排序，但这将无法使用索引，并且可能无法根据您的 NHibernate 版本工作（有错误当按不在选择中的投影进行排序时）。

像这样的东西可能会起作用：

```
.AddOrder(Order.Asc(
            Projections.SqlProjection(
                 "CASE {alias}.Status "
                     + "WHEN 1 THEN 0 "
                     + "WHEN 2 THEN 3 "
                     + "WHEN 3 THEN 2 END", 
                  new string[0], new IType[0]))) 
```

另一种选择（更好的性能）是向您的类添加一个属性，例如 StatusOrder ，您将其设置为等于枚举中当前状态的相对位置，并仅按该字段排序（您可以对其进行索引）。

另一种选择是在您的类上定义一个公式属性（即在映射中指定一个公式），其中该公式指定一个值以根据状态进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:37:43.983

简单的方法是简单地重构您的**枚举**，以便值和名称具有相同的顺序：

```
public enum MyStatusEnum
{
    Active = 1,
    Paused = 3,
    Completed = 2
} 
```

但是您始终可以使用[List.Sort 方法](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)来完成这项工作：

```
enum MyEnum
{
    Alpha,
    Beta,
    Gama
}

static void Main(string[] args)
{
    List<MyEnum> list = new List<MyEnum>()
    {
        MyEnum.Gama,
        MyEnum.Beta,
        MyEnum.Alpha
    };

    list.Sort((x, y) => x.ToString().CompareTo(y.ToString()));
} 
```

NHibernate 根据它们在数据库中的存储方式对结果集进行排序。根据您所说，我猜您的**枚举**被存储为整数，因此您将无法要求 SQL Server 按其名称对它们进行排序，因为 SQL Server 不知道这些名称。

除非您将**枚举**存储为字符串，就像在[这个 SO Question](https://stackoverflow.com/questions/4637000/how-to-map-enum-as-string-in-database)中讨论的那样，否则您唯一的选择是在“内存中”而不是在数据库中执行排序。

# javascript - 创建多个重叠的折线图，这些折线图相对于彼此的数值而不是自己的

> ID：11025112
> 
> 赞同：0
> 
> 时间：2012-06-14T00:06:38.260
> 
> 标签：javascript, raphael

我正在使用 Joe's Design 的 Raphael JS 教程来构建一些叠加图

我使用代码创建了 3 个图表，显示 3 种类型的信息相互叠加，但我有一个我无法理解的问题是为什么它在同一个位置达到 200k 和 50k 的顶部它没有意义？我试图弄清楚如何使图形的大小起作用，以便所有测量值都是相对的，但它似乎不起作用？任何人都可以提供一些关于为什么会发生这种情况的见解吗？

似乎每条线都是相对于自身而不是彼此

我可以提供任何有帮助的代码

这是js文件

[http://pastebin.com/NJj3whxZ](http://pastebin.com/NJj3whxZ)

这也是我的工作示例的链接

[http://theconfluencegroup.com/a_test/](http://theconfluencegroup.com/a_test/)

太感谢了

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:23:05.120

稍微修改库[http://g.raphaeljs.com/linechart.html](http://g.raphaeljs.com/linechart.html) 允许最大值是一个设置：

```
var element = this,
            o = this.customAttributes.lineChart,
            settings = this.lineChart.settings,
            gutter = settings.gutter,
            width = settings.width,
            height = settings.height,
/*AeTky added: 2012.06.16*/             
            fixMax = settings.fixMax,
/**/                
            table = helpers.loadTableData(settings.data_holder), //TODO allow passing data by array
            size = table.labels.length,

            X = (width - gutter.left) / size,
/*AeTky added: 2012.06.16*/             
            max = fixMax == -1 ? Math.max.apply(Math, table.data) : fixMax,
/**/                
            Y = (height - gutter.bottom - gutter.top) / max,

            blanket = element.set(),
            p,
            bgpp,
            x,
            y; 
```

# bash - 如何在 bash 中转义感叹号？

> ID：11025114
> 
> 赞同：17
> 
> 时间：2012-06-14T00:06:50.720
> 
> 标签：bash

有时我会想在我的 git commit 消息中加入更多的表现力。不幸的是 bash 似乎不喜欢这样。

```
iblue@silence ~/git/wargames $ git commit -m "Frustrating <insert object of frustration here>!"
-bash: !": event not found 
```

使用反斜杠转义会有所帮助，但这包括提交消息中的反斜杠。

如何正确转义 bash 中的感叹号？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-14T00:08:46.710

当您将感叹号包含在单引号字符串中时，它会按字面意思保留。

例子：

```
git commit -m 'Frustrating <insert object of frustration here>!' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-06-15T07:44:52.310

试试这个

`git commit -m "Frustrating <insert object of frustration here>"'!'`

如果在字符串中间，则

`"hello"'!'"world"`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-14T00:09:13.653

请改用单引号来防止扩展。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-09T13:46:29.340

除了使用单引号表示感叹号外，在大多数 shell 中，您还可以使用反斜杠`\`对其进行转义。那是： `git commit -m "Frustrating <insert object of frustration here>\!"`

但是，我个人建议通过向文件中添加或来禁用shell 中的[bash 扩展。](https://superuser.com/questions/133780/in-bash-how-do-i-escape-an-exclamation-mark/133782#133782)`set +H``set +o histexpand``.bashrc`

如果像我一样，您从不在 shell 中使用 bash 扩展，禁用它将允许您在任何双引号字符串中使用感叹号 - 不仅在您的提交期间，而且对于*所有*bash 命令。

# django - 检查 django 中是否存在数据的最佳方法是什么？

> ID：11025118
> 
> 赞同：3
> 
> 时间：2012-06-14T00:07:21.253
> 
> 标签：django

使用 django，这是检查数据是否存在的“方式”？

我知道我可以在 get 上有一个 try/catch 块，或者`len`在过滤器上检查 a 的大小

IE

```
try:
    DemoModel.objects.get(id=8)
catch DoesNotExist:
    catch stuff here 
```

或者

```
if not len(DemoModel.objects.filter(id=8):
    do stuff here 
```

我想我将“最佳”定义为

一个。标准方式 b. 更有效的方式

还是没有真正的区别？还是有无党派的第三种方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T01:11:36.010

If you need to use the object, use try/catch.

```
try:
    object = DemoModel.objects.get(id=8)
    #use object here
catch DoesNotExist:
    #catch stuff here 
```

If you don't need to, just use exists().

```
if DemoModel.objects.filter(id=8).exists():
    #do stuff here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:38:45.140

`if DemoModel.objects.filter(id=8).count():`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:13:37.083

对不起下面的代码。您可能会发现它很有用，但您可能不会，但仍然在“判断数据是否存在”主题上。:) 模板的正确方法就是这样，否则我的 api 示例/文档链接应该回答您有关验证特定已保存模型实例是否存在的问题。

```
{% for DemoModel in object_list %}
{% ifchanged %}
do something
{% else %}
do something else
{% endif %} 
```

# 来自 django 文档[Retrievieng Objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-objects) using and chaining filters：

```
>>> Entry.objects.filter(
...     headline__startswith='What'
... ).exclude(
...     pub_date__gte=datetime.now()
... ).filter(
...     pub_date__gte=datetime(2005, 1, 1)
... ) 
```

很抱歉，我以为您在谈论您作为管理员。这显然是通过API。很抱歉，我以为您是新手，并且在不需要时使用模板语法。但是，是的，理想的情况是您可以处于 DemoModel 为 True 或 DemoModel 为 false 的模型实例中。这样你每次都调用它并且它被正确调用。在理想情况下，您处于一个知道 DemoModel 是真还是假的模型实例中，您可以简单地做

{% if DemoModel == True %}做某事{% endif %}

假设 DemoModel 是一个布尔字段，如果不是，你可以包装它。此外，上面的 api local 可以使用模板标签过滤器来应用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T01:06:04.907

你可以说 DemoModel.objects.filter(id=blah blah blah).exists()。try/catch 模式也很合理——如果你想在代码中指出你真的期望对象存在，你可以使用 try/catch，并在对象不存在时使用 .exists() 子句现有的一切照旧=）

# fancybox - Fancybox 2 画廊中最后一张图片的额外视图

> ID：11025120
> 
> 赞同：0
> 
> 时间：2012-06-14T00:07:38.977
> 
> 标签：fancybox, gallery, fancybox-2

我有一个包含 8 张图片的画廊，它使用了在 html 编辑器中工作的按钮助手，可以在最后一次显示之后返回到第一个。上传到我的网站，同一个图库报告 10 张图片，8、9 和 10 是相同的最终图片。这很烦人，而不是关键。

# python - Python Exec 返回的行数超出预期

> ID：11025121
> 
> 赞同：0
> 
> 时间：2012-06-14T00:07:39.190
> 
> 标签：python, exec, defaultdict

首先，我想以“是的，我知道我不应该使用 exec，但是我的数据是可信的”作为这个问题的前提。

我有一个在文件中创建一堆默认字典行的脚本。每行包含键、时间值、数据。我通过一个过程将这些放入图表中，但是，最后一行似乎打印了两次，所以我的图表有问题。：

有问题的代码部分：

```
import fileinput
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from pylab import *

filein = 'list.txt'
output_name = "image2.png"
dicts = []
times = []
values = []

temp_csv_open = open(temp_csv, "a")

line = ""
for line in fileinput.input([filein]):
        line = line.replace("defaultdict(<type 'int'>,", "data = ")
        line = line.replace(")", "")
        line = line.strip()
        print line # show and tell 1
        exec(line)
        print data # show and tell 2
        for k in sorted(data.iterkeys()):
                print k, data[k] # show and tell 3
                time = datetime.datetime.strptime(k, "%Y%m%d%H")
                times.append(time)
                values.append(data[k])
print times, values # show and tell 4 
```

我的数据：

```
defaultdict(<type 'int'>, {'2012021310': 76422, '2012021311': 94188, '2012021323': 139363, '2012021312': 111817, '2012021307': 71316, '2012021306': 82418, '2012021305': 65217, '2012021313': 127002, '2012021314': 141099, '2012021315': 147830, '2012021316': 136330, '2012021317': 122252, '2012021318': 118619, '2012021319': 115763, '2012021322': 137658, '2012021321': 130022, '2012021320': 121393, '2012021309': 69406, '2012021308': 66833}) 
defaultdict(<type 'int'>, {'2012021408': 139745, '2012021409': 143658, '2012021414': 288286, '2012021418': 31216, '2012021416': 268214, '2012021400': 207878, '2012021401': 269296, '2012021402': 270258, '2012021403': 275882, '2012021404': 232521, '2012021405': 195062, '2012021406': 166669, '2012021407': 142855, '2012021417': 245582, '2012021411': 194360, '2012021413': 262078, '2012021410': 158954, '2012021415': 296457, '2012021412': 237083}) 
defaultdict(<type 'int'>, {'2012021523': 676350, '2012021522': 670147, '2012021521': 650984, '2012021520': 617401, '2012021501': 170448, '2012021503': 246600, '2012021502': 250013, '2012021505': 363866, '2012021504': 300809, '2012021507': 333080, '2012021506': 370454, '2012021509': 343671, '2012021508': 330452, '2012021512': 549736, '2012021513': 622690, '2012021510': 387871, '2012021511': 456171, '2012021516': 647559, '2012021517': 600969, '2012021514': 692257, '2012021515': 706377, '2012021518': 579669, '2012021519': 587969}) 
defaultdict(<type 'int'>, {'2012021608': 333986, '2012021609': 344126, '2012021602': 651692, '2012021603': 676458, '2012021600': 664484, '2012021601': 686408, '2012021620': 932692, '2012021621': 1065501, '2012021604': 589033, '2012021605': 465191, '2012021623': 1316907, '2012021606': 389669, '2012021607': 342613, '2012021619': 828190, '2012021618': 617836, '2012021622': 1111334, '2012021611': 467532, '2012021610': 387220, '2012021613': 634585, '2012021612': 560227, '2012021615': 718498, '2012021614': 704008, '2012021617': 606396, '2012021616': 665030}) 
```

在上面的代码中，我添加了 4 个打印语句来帮助我表达我的观点：

show and tell 1 返回：

```
data =  {'2012021310': 76422, '2012021311': 94188, '2012021323': 139363, '2012021312': 111817, '2012021307': 71316, '2012021306': 82418, '2012021305': 65217, '2012021313': 127002, '2012021314': 141099, '2012021315': 147830, '2012021316': 136330, '2012021317': 122252, '2012021318': 118619, '2012021319': 115763, '2012021322': 137658, '2012021321': 130022, '2012021320': 121393, '2012021309': 69406, '2012021308': 66833}
data =  {'2012021408': 139745, '2012021409': 143658, '2012021414': 288286, '2012021418': 31216, '2012021416': 268214, '2012021400': 207878, '2012021401': 269296, '2012021402': 270258, '2012021403': 275882, '2012021404': 232521, '2012021405': 195062, '2012021406': 166669, '2012021407': 142855, '2012021417': 245582, '2012021411': 194360, '2012021413': 262078, '2012021410': 158954, '2012021415': 296457, '2012021412': 237083}
data =  {'2012021523': 676350, '2012021522': 670147, '2012021521': 650984, '2012021520': 617401, '2012021501': 170448, '2012021503': 246600, '2012021502': 250013, '2012021505': 363866, '2012021504': 300809, '2012021507': 333080, '2012021506': 370454, '2012021509': 343671, '2012021508': 330452, '2012021512': 549736, '2012021513': 622690, '2012021510': 387871, '2012021511': 456171, '2012021516': 647559, '2012021517': 600969, '2012021514': 692257, '2012021515': 706377, '2012021518': 579669, '2012021519': 587969}
data =  {'2012021608': 333986, '2012021609': 344126, '2012021602': 651692, '2012021603': 676458, '2012021600': 664484, '2012021601': 686408, '2012021620': 932692, '2012021621': 1065501, '2012021604': 589033, '2012021605': 465191, '2012021623': 1316907, '2012021606': 389669, '2012021607': 342613, '2012021619': 828190, '2012021618': 617836, '2012021622': 1111334, '2012021611': 467532, '2012021610': 387220, '2012021613': 634585, '2012021612': 560227, '2012021615': 718498, '2012021614': 704008, '2012021617': 606396, '2012021616': 665030} 
```

但是，问题出在此处： Show and tell 2 返回：

```
{'2012021307': 71316, '2012021306': 82418, '2012021305': 65217, '2012021309': 69406, '2012021310': 76422, '2012021311': 94188, '2012021312': 111817, '2012021313': 127002, '2012021314': 141099, '2012021315': 147830, '2012021316': 136330, '2012021317': 122252, '2012021318': 118619, '2012021319': 115763, '2012021308': 66833, '2012021321': 130022, '2012021320': 121393, '2012021323': 139363, '2012021322': 137658}
{'2012021408': 139745, '2012021409': 143658, '2012021403': 275882, '2012021418': 31216, '2012021400': 207878, '2012021416': 268214, '2012021402': 270258, '2012021414': 288286, '2012021404': 232521, '2012021405': 195062, '2012021406': 166669, '2012021407': 142855, '2012021417': 245582, '2012021411': 194360, '2012021401': 269296, '2012021413': 262078, '2012021410': 158954, '2012021415': 296457, '2012021412': 237083}
{'2012021523': 676350, '2012021522': 670147, '2012021521': 650984, '2012021520': 617401, '2012021501': 170448, '2012021503': 246600, '2012021502': 250013, '2012021505': 363866, '2012021504': 300809, '2012021507': 333080, '2012021506': 370454, '2012021509': 343671, '2012021508': 330452, '2012021512': 549736, '2012021513': 622690, '2012021510': 387871, '2012021511': 456171, '2012021516': 647559, '2012021517': 600969, '2012021514': 692257, '2012021515': 706377, '2012021518': 579669, '2012021519': 587969}
{'2012021605': 465191, '2012021608': 333986, '2012021609': 344126, '2012021602': 651692, '2012021603': 676458, '2012021600': 664484, '2012021601': 686408, '2012021606': 389669, '2012021607': 342613, '2012021622': 1111334, '2012021623': 1316907, '2012021620': 932692, '2012021621': 1065501, '2012021619': 828190, '2012021618': 617836, '2012021604': 589033, '2012021611': 467532, '2012021610': 387220, '2012021613': 634585, '2012021612': 560227, '2012021615': 718498, '2012021614': 704008, '2012021617': 606396, '2012021616': 665030}
{'2012021605': 465191, '2012021608': 333986, '2012021609': 344126, '2012021602': 651692, '2012021603': 676458, '2012021600': 664484, '2012021601': 686408, '2012021606': 389669, '2012021607': 342613, '2012021622': 1111334, '2012021623': 1316907, '2012021620': 932692, '2012021621': 1065501, '2012021619': 828190, '2012021618': 617836, '2012021604': 589033, '2012021611': 467532, '2012021610': 387220, '2012021613': 634585, '2012021612': 560227, '2012021615': 718498, '2012021614': 704008, '2012021617': 606396, '2012021616': 665030} 
```

所以显而易见的问题是以 2012021605 开头的最后一行来自哪里。我对 exec 的使用有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:01:56.377

文件的最后一行是空行。

因此，当循环到达它`data`时，当行`exec(line)`发生时，名称不会反弹到新值，因此仍然绑定到以前的值。

# javascript - 如何使用 jinja 从 python 将 null 传递给 javascript

> ID：11025122
> 
> 赞同：4
> 
> 时间：2012-06-14T00:07:39.530
> 
> 标签：javascript, python, google-app-engine, google-visualization, jinja2

我在谷歌应用引擎中做了这样的事情：

```
self.render('hello.html', value=null) 
```

但显然，由于 python 不理解 null 它认为它是一个未定义的变量并给出错误。

如果我将它作为字符串 (value="null") 发送，那么 javascript 不知道我的意思是 null 而不是字符串“null”。

那么解决这个问题的方法是什么？

如果它有点相关，我正在尝试将值 null 传递给 javascript 中的谷歌散点图。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T04:12:44.577

我假设你正在做类似的事情：

```
self.render('hello.html', value=[0.1, None, None, 0.5]) 
```

并让模板引擎将其转换为字符串，因此您最终得到：

```
 [0.1, None, None, 0.5] 
```

如果是这样，您应该在传递给 jinja 之前让 python 将其转换为 javascript：

```
import json
self.render('hello.html', value=json.dumps([0.1, None, None, 0.5])) 
```

这会给你：

```
[0.1, null, null, 0.5] 
```

这就是我认为你所追求的。

一个更好的解决方案是[向 jinja 添加一个自定义过滤器](http://jinja.pocoo.org/docs/api/#custom-filters)来处理 javascript 转义。这看起来像：

```
import json
def jsonfilter(value):
    return json.dumps(value)

environment.filters['json'] = jsonfilter 
```

然后在你的模板中你可以做

```
{{value|json}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T02:47:53.830

假设您的模板看起来像：

```
plotdata = [0.1, {{value}}, null, 0.5] 
```

（取决于您使用的模板引擎），然后：

```
self.render('hello.html', { "value": "null" }) 
```

应该导致渲染的模板产生：

```
plotdata = [0.1, null, null, 0.5] 
```

如果这不起作用，请告诉我们您正在使用的模板引擎、您尝试发送的值以及渲染的确切结果。

# r-markdown - 如何将 R Markdown 转换为 PDF？

> ID：11025123
> 
> 赞同：130
> 
> 时间：2012-06-14T00:07:44.807
> 
> 标签：r-markdown, knitr, pandoc

我之前询问过[将 R Markdown 转换为 HTML 的命令](https://stackoverflow.com/q/10646665/180892)。

**将 R Markdown 文件转换为 PDF 文档的好方法是什么？**

一个好的解决方案会尽可能多地保留内容（例如，图像、方程式、html 表格等）。该解决方案需要能够从命令行运行。一个好的解决方案也是跨平台的，理想情况下最小化依赖关系，以便更容易共享 makefile 等。

具体来说，有很多选择：

*   是否将RMD转MD转HTML转PDF；或 RMD 到 MD 到 PDF；或 RMD 转 PDF
*   如果`markdown`在 R 中使用包，需要指定哪些选项
*   是否使用`pandoc`R 中内置的包或其他

这是一个示例[rmd 文件](https://gist.github.com/jeromyanglim/2716336)，它可能为任何提议的解决方案提供了合理的测试。它被用作[这篇博](http://jeromyanglim.blogspot.com.au/2012/05/getting-started-with-r-markdown-knitr.html)文的基础。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-15T02:36:59.897

### 更新答案（2013 年 2 月 10 日）

**rmarkdown 包**：现在[`rmarkdown`github 上](https://github.com/rstudio/rmarkdown)有一个与 Pandoc 接口的包。它包括一个`render`功能。该文档非常清楚地说明了如何在一系列其他格式中将 rmarkdown 转换为 pdf。这包括在 rmarkdown 文件中包含输出格式或运行向 rend 函数提供输出格式。例如，

```
render("input.Rmd", "pdf_document") 
```

**命令行：** 当我从命令行运行`render`时（例如，使用 makefile），我有时会遇到无法找到 pandoc 的问题。据推测，它不在搜索路径上。以下答案解释了[如何将 pandoc 添加到 R 环境](https://stackoverflow.com/a/29710643/180892)。

因此，例如，在我运行 OSX 的计算机上，我通过 RStudio 拥有 pandoc 的副本，我可以使用以下内容：

```
Rscript -e "Sys.setenv(RSTUDIO_PANDOC='/Applications/RStudio.app/Contents/MacOS/pandoc');library(rmarkdown);  library(utils); render('input.Rmd', 'pdf_document')" 
```

* * *

### 旧答案（大约 2012 年）

因此，许多人建议 Pandoc 是要走的路。请参阅下面有关拥有最新版本 Pandoc 的重要性的注释。

### 使用 Pandoc

我使用以下命令将 R Markdown 转换为 HTML（即，[此 makefile 的变体](https://stackoverflow.com/a/10969107/180892)），其中`RMDFILE`是不包含组件的 R Markdown 文件的名称`.rmd`（它还假定扩展名为 is`.rmd`和 not `.Rmd`）。

```
RMDFILE=example-r-markdown  
Rscript -e "require(knitr); require(markdown); knit('$RMDFILE.rmd', '$RMDFILE.md'); markdownToHTML('$RMDFILE.md', '$RMDFILE.html', options=c('use_xhml'))" 
```

然后这个命令转换为pdf

```
Pandoc -s example-r-markdown.html -o example-r-markdown.pdf 
```

* * *

关于这一点的几点说明：

*   我删除了示例文件中的引用，该文件将绘图导出到 imgur 以托管图像。
*   我删除了对托管在 imgur 上的图像的引用。数字似乎需要是本地的。
*   函数中的选项`markdownToHTML`意味着图像引用是文件而不是存储在 HTML 文件中的数据（即，我`'base64_images'`从选项列表中删除）。
*   结果输出如下[所示](http://cloud.github.com/downloads/jeromyanglim/assorted-files/example-r-markdown.pdf)。与我从浏览器将 HTML 文件打印为 pdf 文件相比，它显然制作了一个非常 LaTeX 风格的文档。

### 获取最新版本的 Pandoc

正如@daroczig 所提到的，拥有最新版本的 Pandoc 以输出 pdf 文件非常重要。在 2012 年 6 月 15 日的 Ubuntu 上，我在包管理器中被 1.8.1 版的 Pandoc 卡住了，但从[更改日志](http://johnmacfarlane.net/pandoc/releases.html)看来，对于 pdf 支持，您至少需要 1.9+ 版的 Pandoc。

因此，我安装了`caball-install`. 然后跑：

```
cabal update
cabal install pandoc 
```

Pandoc 安装在`~/.cabal/bin/pandoc` 因此，当我运行`pandoc`它时，它仍然看到旧版本。[有关添加到路径的](https://askubuntu.com/a/33443/2521)信息，请参见此处。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-14T19:55:15.150

我认为您确实需要[pandoc](http://johnmacfarlane.net/pandoc/)，这是专门为这项任务设计和构建的出色软件 :) 除了*pdf*之外，您还可以将*md*文件转换为例如*docx*或*odt*等。

好吧，在 Linux 上[安装最新版本的 Pandoc](http://johnmacfarlane.net/pandoc/installing.html)可能具有挑战性（因为您需要`haskell-platform`从源代码构建整个 ˙），但在 Windows/Mac 上非常容易，只需下载几兆字节。

如果你有 brewed/knitted markdown 文件，你可以只调用`pandoc`例如 bash 或使用`system`R 中的函数。后者的 POC 演示在[`Ṗandoc.convert`我的小包的函数中](https://github.com/rapporter/pander/blob/master/R/convert.R#L28)实现（*当我尝试时，你一定非常厌烦抓住每一个机会把你的注意力集中在那里*）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-08-05T18:21:58.077

现在（2014 年 8 月）您可以使用**RStudio**将 R Markdown 转换为 PDF。基本上，RStudio 使用**pandoc**将 Rmd 转换为 PDF。

您可以将元数据更改为：

1.  添加目录
2.  更改图形选项
3.  更改语法高亮样式
4.  添加 LaTeX 选项
5.  还有很多...

有关更多详细信息 - [http://rmarkdown.rstudio.com/pdf_document_format.html](http://rmarkdown.rstudio.com/pdf_document_format.html)![在此处输入图像描述](../Images/d70ecd1d3e88ec4cb58e25c7dfe2616f.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-15T02:54:52.087

对于看起来更像从浏览器打印时获得的选项，[`wkhtmltopdf`](http://code.google.com/p/wkhtmltopdf/)提供一个选项。

在 Ubuntu 上

```
sudo apt-get install wkhtmltopdf 
```

然后使用与 pandoc 示例相同的命令来获取 HTML：

```
RMDFILE=example-r-markdown  
Rscript -e "require(knitr); require(markdown); knit('$RMDFILE.rmd', '$RMDFILE.md'); markdownToHTML('$RMDFILE.md', '$RMDFILE.html', options=c('use_xhml'))" 
```

接着

```
wkhtmltopdf example-r-markdown.html example-r-markdown.pdf 
```

生成的文件如下[所示](https://github.com/downloads/jeromyanglim/assorted-files/example-r-markdown-wk.pdf)。它似乎没有处理 MathJax（[这里讨论了这个问题](http://code.google.com/p/wkhtmltopdf/issues/detail?id=728)），并且分页符很难看。然而，在某些情况下，这种风格可能比更多 LaTeX 风格的演示文稿更受欢迎。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-06-21T22:16:56.233

只需两步：

1.  从这里安装最新版本的“pandoc”：

    [https://github.com/jgm/pandoc/releases](https://github.com/jgm/pandoc/releases)

2.  调用中的`pandoc`函数`library(knitr)`

    ```
    library(knitr)
    pandoc('input.md', format = 'latex') 
    ```

因此，您可以将“input.md”转换为“input.pdf”。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-12T05:22:06.533

我发现使用 R studio 是最简单的方法，但是如果想从命令行进行控制，那么一个简单的 R 脚本可以使用[rmarkdown](https://cran.r-project.org/web/packages/rmarkdown/index.html)渲染命令（如上所述）来完成。完整的脚本细节[在这里](http://frankhjung.blogspot.com.au/2016/08/render-r-markdown-to-pdf-from-command.html "这里")

```
#!/usr/bin/env R

# Render R markdown to PDF.
# Invoke with:
# > R -q -f make.R --args my_report.Rmd

# load packages
require(rmarkdown)

# require a parameter naming file to render
if (length(args) == 0) {
    stop("Error: missing file operand", call. = TRUE)
} else {
    # read report to render from command line
    for (rmd in commandArgs(trailingOnly = TRUE)) {
        # render Rmd to PDF
        if ( grepl("\\.Rmd$", rmd) && file.exists(rmd)) {
            render(rmd, pdf_document())
        } else {
            print(paste("Ignoring: ", rmd))
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-18T05:17:13.927

如果你不想安装任何东西，你可以输出 html。然后打开 html 文件 - 它应该在浏览器窗口中打开，然后右键单击打印。如果您使用的是 Mac，请在打印窗口中选择右下角的“另存为 pdf”。瞧！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-22T09:14:36.023

请按照以下简单步骤操作：

1：在 Rmarkdown 脚本中运行 Knit(Ctrl+Shift+K) 2：然后在打开 html markdown 后单击在浏览器中打开（左上角），然后在您的网络浏览器中打开 html 3：然后使用 Ctrl+P 和另存为 PDF 。

# python - 读/写 NetworkX 图形对象

> ID：11025126
> 
> 赞同：13
> 
> 时间：2012-06-14T00:08:18.587
> 
> 标签：python, file-io, networkx

我正在尝试处理具有数亿个节点的超大规模 NetworkX Graph 对象。我希望能够将其写入文件，以免占用我所有的计算机内存。但是，我需要不断地搜索现有节点、更新边缘等。

有没有好的解决方案？我不确定它如何与[http://networkx.lanl.gov/reference/readwrite.html上提供的任何文件格式一起使用](http://networkx.lanl.gov/reference/readwrite.html)

我能想到的唯一解决方案是将每个节点存储为一个单独的文件，并引用文件系统中的其他节点 - 这样，打开一个节点进行检查不会使内存过载。是否有用于大量数据（例如 PyTables）的现有文件系统来执行此操作而无需编写我自己的样板代码？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-06T01:26:46.147

第一次尝试[`pickle`](https://docs.python.org/3/library/pickle.html)；它旨在序列化任意对象。

创建`DiGraph`和序列化到文件的示例：

```
import pickle
import networkx as nx

dg = nx.DiGraph()
dg.add_edge('a','b')
dg.add_edge('a','c')
pickle.dump(dg, open('/tmp/graph.txt', 'w')) 
```

`DiGraph`从文件加载的示例：

```
import pickle
import networkx as nx

dg = pickle.load(open('/tmp/graph.txt'))
print dg.edges() 
```

输出：

```
[('a', 'c'), ('a', 'b')] 
```

如果这不够有效，我会编写自己的例程来序列化：

1.  边缘和
2.  节点（如果节点不与边相连）。

请注意，尽可能使用列表推导可能更有效（而不是标准的 for 循环）。

如果*这*不够有效，我会从 Python 中调用 C++ 例程：http: [//docs.python.org/extending/extending.html](http://docs.python.org/extending/extending.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T20:10:54.523

如果您已将其构建为 NetworkX 图，那么它已经在内存中。对于这么大的图表，我的猜测是你必须做一些类似于你建议使用单独文件的事情。但是，我不会使用单独的文件，而是使用数据库来存储每个节点，并在节点之间建立多对多连接。换句话说，您将有一个节点表和一个边表，然后要查询特定节点的邻居，您可以只查询在任一端具有该特定节点的任何边。这应该很快，但我不确定您是否能够在不先在内存中构建整个网络的情况下利用 NetworkX 的分析功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-20T02:54:14.607

我忘记了我最初来 StackOverflow 解决什么问题，但我偶然发现了这个问题并且（已经晚了将近十年！）可以推荐[Grand](https://github.com/aplbrain/grand)，一个我们编写的类似 networkx 的库来解决这个问题：

**前**

```
import networkx as nx

g = nx.DiGraph()
g.add_edge("A", "B")
print(len(g.edges())) 
```

**后**

```
import grand
from grand.backends import SQLBackend # or choose another!

g = grand.Graph(backend=SQLBackend())
g.nx.add_edge("A", "B")
print(len(g.nx.edges())) 
```

API 与 NetworkX 相同，但数据存在于 SQL、DynamoDB 等中。

# plsql - pl/sql 与上一行比较

> ID：11025128
> 
> 赞同：1
> 
> 时间：2012-06-14T00:08:28.990
> 
> 标签：plsql, oracle11g

目标是在 10 分钟间隔内组合具有相同 ID 的 Time_a。并将 ID 分组。

```
ID   Time_a        ->           ID    
------------                    ----------
1    12:10:00                   1
1    12:15:00                   2
1    12:20:00                   2
2    12:25:00
2    12:35:00
2    02:00:00 
```

它变成了两个“2”，因为第 5 行和第 6 行之间的时间间隔超过 10 分钟。我能够在 10 分钟的差异内组合，但它不区分 ID。

```
select ID    
from(
    select id, Time_a, min(time) OVER (order by id, time rows between 1 preceding and 1 preceding) prev_t_stamp
    from dual
)
where abs(Time_a-prev_t_stamp)>10/1440 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:24:49.560

如果 time_a 是日期，那么它的工作方式如下。如果它是时间戳，则需要将其转换为日期，否则它将无法正常工作。这是我的测试脚本

```
drop table test;
create table test (id number, time_a date);
insert into test values (1, to_date('12:10','HH24:MI'));
insert into test values (1, to_date('12:15','HH24:MI'));
insert into test values (1, to_date('12:20','HH24:MI'));
insert into test values (2, to_date('12:25','HH24:MI'));
insert into test values (2, to_date('12:35','HH24:MI'));
insert into test values (2, to_date('14:00','HH24:MI'));

select id from (
select distinct id, case from (
select ID,case when abs(Time_a-prev_t_stamp)>10/1440 then '>' end case
from(
    select id, Time_a, min(time_a) OVER (order by id, time_a rows between 1 preceding and 1 preceding) prev_t_stamp
    from test
)
)
) order by 1 
```

这导致：

```
table TEST dropped.
table TEST created.
1 rows inserted.
1 rows inserted.
1 rows inserted.
1 rows inserted.
1 rows inserted.
1 rows inserted.

ID
--
 1 
 2 
 2 
```

# compass-sass - 是否可以让 Compass 生成扩展和压缩的 CSS 文件？

> ID：11025131
> 
> 赞同：3
> 
> 时间：2012-06-14T00:08:58.737
> 
> 标签：compass-sass, sass

所以我们有一个标准的 Compass CSS 项目，带有`sass`和`css`目录。作为一个场景，假设`.scss`文件名为`foo-all.scss`.

是否有可能通过命令行或`config.rb`任何其他方式让 Compass 生成**使用**`foo-all.css`“压缩”样式的文件和使用`foo-all-debug.css`“扩展”样式的文件？

在我看来，Compass 似乎会拒绝生成与文件名称不同的 CSS 文件`.scss`，并且您最多可以指定生成 CSS 文件的目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:19:39.047

在我的 MacOS X shell 上，我已经能够以这种方式从一个sass 文件生成两个不同的 css (`production.css`和)`development.css``original.scss`

```
fc-iMac:sass fcalderan$ sass -t compact --watch original.scss:production.css & 
                        sass -t expanded --watch original.scss:development.css 
```

（我使用的是 compact 而不是压缩，但示例仍然有效）

这样做，每次我进行更改时，`original.scss`我都会在同一个文件夹中获得两个更新的 css 文件（具有不同的输出样式）

当然，如果您有很多`scss`文件要查看，您可以指定要查看的整个目录而不是单个文件（[请参阅 SASS 文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html)以获取更多参考）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:26:15.813

这似乎有点像 Compass 的缺陷。这真的是一件不寻常的事情吗？无论如何，这就是我的选择。假设文件夹结构是这样的：

```
Rakefile
/foo
    /resources
        /css
            /debug
        /sass
            foo-all.scss 
```

然后在 Rakefile 中，生成压缩和扩展版本，我这样做：

```
Dir.chdir "foo/resources/sass" do
    # Compile both expanded and compressed variations
    debugdir = File.join(File.dirname(__FILE__), 'foo/resources/css/debug')

    sh "compass compile --output-style compressed --force"
    sh "compass compile --output-style expanded --force --css-dir #{debugdir}"
    mv "../css/debug/foo-all.css", "../css/foo-all-debug.css"
end 
```

In essence, I generate the compressed CSS file in a separate `/debug` directory, and then move it up to the `/css` directory, to preserve URL paths in the CSS file. The `debudir` shenanigans are necessary because Compass seems to require an absolute path when using the `-css-dir` switch (on Windows, anyway).

# ibm-midrange - AS/400 在 RDP 8 下无法编译打印机文件

> ID：11025138
> 
> 赞同：3
> 
> 时间：2012-06-14T00:09:44.073
> 
> 标签：ibm-midrange, rational-developer-for-i

我目前正在学习 AS400 (IBM I) 的大学课程，直到第 11 章处理 RDP 8.0 之前我都做得很好。无论哪种方式，我都设法完成了任务，直到我需要在“INTROCLASS”库下复制一个先前制作的名为“EMPPFLP”的物理文件。

我将文件复制到“QDDSSRC”源下的我的个人库中，然后右键单击它（EMPPFLP）并选择编译，然后选择 CRTPRTF，我得到了这个。

> 作业 942098/DDELAP01/QDFTJOBD 已提交到库 QGPL 中的作业队列 QBATCH。
> 
> CRTPRTF SRCFILE(DDELAP01/QDDSSRC) SRCMBR(EMPPFLP) REPLACE(*YES) OPTION(*EVENTF) FILE(DDELAP01/EMPPFLP) DDS 中的错误不允许使用指定的 GENLVL。原因 。. . . . : 在 DDS 中发现的错误的严重级别大于或等于错误生成级别（GENLVL 参数），或者指定了 GENLVL(0)。恢复 。. . ：有关 GENLVL 值和错误消息，请参阅 DDS 源列表。更正错误或更改命令上的 GENLVL 值，然后重试请求。文件 EMPPFLP 未在库 DDELAP01 中创建。原因 。. . . . : 由于错误，未创建文件。恢复 。. . ：请参阅前面列出的错误消息。更正错误，然后重试请求。

![在此处输入图像描述](../Images/d6effabdcd194c35ca66b44551ace86f.png)

我将感谢任何帮助，不知道这里发生了什么，我已经向教授发布了问题，但我没有收到任何回复，我需要在上午 12 点之前提交此作业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T01:19:08.337

> CPD5248：未找到在 REF 或 REFFLD 关键字上指定的文件。

[包含REFFLD](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzakd/rzakdmstptreffl.htm)`EMPPFL`语句中使用的文件的库不在您的[库列表中](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp)。

替换`*LIBL`为包含该文件的实际库名称，或使用`ADDLIBLE`命令（或适合您的开发环境的其他方法）将其添加到您的库列表中。

> CPD7528：小数替换位置的数量无效

这是因为之前的错误导致找不到字段定义。

* * *

该`REFFLD`关键字允许您从文件（表）中提取字段属性，而不是对每个属性进行硬编码。

该错误表明在您的库列表中找不到被引用的文件 EMPPFL。库列表类似于 Windows/Linux/etc 中的 PATH。

为了解决错误，您必须帮助系统找到 EMPPFL 文件。这可以通过显式指向包含文件的库或将文件包含在库列表中的库中来完成。

* * *

如果您可以提供以下命令的输出，将有助于解决问题：

```
DSPLIBL OUTPUT(*PRINT)

DSPOBJD *LIBL/EMPPFL *FILE OUTPUT(*PRINT)

DSPOBJD *ALLUSR/EMPPFL *FILE OUTPUT(*PRINT) 
```

请注意，第二个命令应返回消息“未找到 *LIBL 类型 *FILE 中的对象 EMPPFL”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:19:14.037

我对 AS400 几乎一无所知，但确实找到了一篇描述您图片中显示的错误消息的文章：

**消息** 小数替换位置无效。

**原因** EDTWRD 或 EDTCDE 关键字的小数替换位置数必须等于字段长度。小数替换位置的数量是空格数和第一个停止零抑制字符的总和。如果 EDTWRD 中的第一个字符是停止零抑制字符，则可以指定一个额外的空格。

**恢复** 更改字段长度或 EDTWRD 或 EDTCDE 关键字上的值，以使字段长度与小数替换位置的数量相同。然后再次尝试请求。

[http://www.iseriesworld.net/?messages=cl&prefix=cpd&code=7528](http://www.iseriesworld.net/?messages=cl&prefix=cpd&code=7528)

我希望这会有所帮助。祝你的课好运，欢迎来到 Stack Overflow！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:25:46.093

这似乎是一个 GENLVL 错误。您应该在编译后查看 SPLF 哪个产品。那里应该有一些有用的信息

# python-2.7 - 循环内的函数（Python）

> ID：11025143
> 
> 赞同：2
> 
> 时间：2012-06-14T00:10:15.650
> 
> 标签：python-2.7

我对此很陌生，本周才开始研究 python。

我目前正在尝试从 Google Analytics 中提取数据，并且需要提取多天的数据。但是，我在尝试循环代码多天时遇到问题：

**代码：**

```
for date in daterange( start, end ):
    # EXTRACT OVERALL VISITS AND UNIQUE VISITS;
        def get_results(service, profile_id):
            return service.data().ga().get(
                ids='ga:' + profile_id,
                start_date=str(date),
                end_date=str(date),
                metrics='ga:visits,ga:newVisits,ga:visitors').execute() 
```

然而，这似乎没有循环，但给我定义的最后一个日期的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:21:55.357

您的 for 循环重复定义一个函数，但从不调用它。

尝试这个：

```
def get_results(service, profile_id, date):
    return service.data().ga().get(
            ids='ga:' + profile_id,
            start_date=str(date),
            end_date=str(date),
            metrics='ga:visits,ga:newVisits,ga:visitors').execute()

for date in daterange(start_date, end_date):
    get_results(service, profile_id, date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:45:55.417

```
for date in daterange( start, end ):

    # EXTRACT OVERALL VISITS AND UNIQUE VISITS;
        def get_results(service, profile_id):
            return service.data().ga().get(
                ids='ga:' + profile_id,
                start_date=str(date),
                end_date=str(date),
                metrics='ga:visits,ga:newVisits,ga:visitors').execute()
    # EXTRACT UNIQUE PAGE VIEWS FOR IMPORTANT STAGES;

        def print_results(results):
            if results:
                # Print data nicely for the user.
                print (results)
                #print 'First Profile: %s' % results.get('profileInfo').get('profileName')
                #print 'Total Visits: %s' % results.get('rows')[0][0]
                #print 'Total New Visits: %s' % results.get('rows')[0][1]
                #print 'Total Unique Visitors: %s' % results.get('rows')[0][2]
                #print 'Unique Visitors Starting the Survey: %s' % results2.get('rows')[0][0]
                #print 'Unique Visitors Completing the Survey: %s' % results3.get('rows')[0][0]
                #print 'Unique Visitors Registering: %s' % results4.get('rows')[0][0]
                #print f

                # OUTPUT TO FILE.
               # f.write (str(date) + ',' + results.get('rows')[0][0] + ',' + results.get('rows')[0][2] + ',' + results2.get('rows')[0][0] + ',' + results3.get('rows')[0][0] + ',' + results4.get('rows')[0][0] + '\n')
                #f.close()
            else:
                print 'No results found' 
```

# ruby-on-rails - 使用来自 git woes 的分叉（和修补）Rails 2-3-stable

> ID：11025145
> 
> 赞同：1
> 
> 时间：2012-06-14T00:10:35.993
> 
> 标签：ruby-on-rails, git, bundler, ruby-on-rails-2

当我们需要将这个补丁应用到我们的应用程序时，一切都开始了 - [http://seclists.org/oss-sec/2012/q2/504](http://seclists.org/oss-sec/2012/q2/504)。看似简单的任务变成了* ss的痛苦。

我知道我有以下选择：

```
1.Monkeypatch;
2.Vendor rails;
3.fork Rails, apply the patch for 2.3 to the 2-3-stable 
branch and use it in the Gemfile. 
```

选项#3 对我来说最有吸引力，因为如果需要，它可以让我使用官方 repo 进行 rebase；以干净的方式应用额外的更改 - 无需使用来自 Rails 的 gem 的数十个源文件（就像 vendoring 那样）来破坏应用程序存储库。猴子补丁可能已经完成了这项工作，因为 2.3-stable 分支不会经常更新，但我真的不喜欢为这样的补丁打开课程。

所以我继续#3。

```
1\. I forked Rails;
2\. I cloned my Rails repo locally;
3\. I applied the 2.3 patch (http://seclists.org/oss-sec/2012/q2/att-504/2-3-sql-injection.patch)
using git am --signoff;
4\. I pushed the changes.
5\. I went to our app's Gemfile and added:

gem "rails","2.3.14", :git => "git://github.com/fullofcaffeine/rails.git", :branch => "2-3-stable"

6\. Ran bundle install 
```

一切看起来都很棒，因为捆绑安装成功完成。当我尝试启动 Rails 服务器时，出现**“没有可以加载 --initializer 的此类文件”**错误。

经过一番谷歌搜索，我找到了以下帖子 -[如何在带有 bundler 的项目中使用分支中的分支](https://stackoverflow.com/questions/4043089/how-to-use-a-branch-in-a-fork-of-rails-in-a-project-with-bundler)。我完全按照他说的做了，手动创建了 gemspecs，并相应地更改了 Gemfile。当我尝试运行 bundler 时，令人惊讶的是它运行时没有出现问题，我在输出中看到了这一点：

```
Using activerecord (2.3.14) from git://github.com/fullofcaffeine/rails.git (at 2-3-stable)   Successfully built RubyGem
  Name: activerecord
  Version: 2.3.14
  File: activerecord-2.3.14.gem

Using rails (2.3.14) from git://github.com/fullofcaffeine/rails.git (at 2-3-stable)   Successfully built RubyGem
  Name: rails
  Version: 2.3.14
  File: rails-2.3.14.gem

... 
```

依此类推，我为每个宝石创建了一个 gemspec。

但是，当我尝试运行 Rails 服务器时，我得到了这个：

```
$ script/server
/Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/source.rb:572:in `load_spec_files': git://github.com/fullofcaffeine/rails.git (at 2-3-stable) is not checked out. Please run `bundle install` (Bundler::GitError)
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/source.rb:385:in `local_specs'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/source.rb:555:in `specs'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/definition.rb:356:in `converge_locked_specs'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/definition.rb:345:in `each'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/definition.rb:345:in `converge_locked_specs'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/definition.rb:143:in `resolve'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/definition.rb:90:in `specs'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/definition.rb:135:in `specs_for'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/definition.rb:124:in `requested_specs'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/environment.rb:23:in `requested_specs'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler/runtime.rb:11:in `setup'
    from /Users/fullofcaffeine/.rvm/gems/ruby-1.8.7-p357@myapp/gems/bundler-1.0.21/lib/bundler.rb:110:in `setup'
    from ./script/../config/../config/preinitializer.rb:16
    from ./script/../config/boot.rb:28:in `load'
    from ./script/../config/boot.rb:28:in `preinitialize'
    from ./script/../config/boot.rb:10:in `boot!'
    from ./script/../config/boot.rb:125
    from script/server:3:in `require'
    from script/server:3 
```

此外，如果我试图找到 Bundler 构建的 gem（我在上面粘贴的关于 Bundler 构建 gem 的消息），我找不到它们。

我真的不知道该怎么办，这么简单的任务变成了一场噩梦。如果发现我在这方面花费了太多时间，我可能会修补课程。

*   *所以问题真的是 - 对于这种“我需要根据我的需要修补或自定义 Rails”*场景，最实用的解决方案是什么？

**编辑：**我现在通过猴子补丁解决了这个问题，请参阅下面的最后一条评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T01:58:48.400

所以，我通过 MonekyPatching ActiveRecord::Base 解决了补丁问题。我恢复了对 Gemfile 的更改，我现在使用的是来自 Rubygems.org 的 Rails 2.3.14，而不是来自我的 git fork，我在 config/initializers 中创建了一个初始化程序，并粘贴了以下代码：pastie.org/4087875。现在，应用程序正在使用补丁中的固定方法 (seclists.org/oss-sec/2012/q2/att-504/2-3-sql-injection.patch)。但是，我仍然想知道为什么 fork 方法不起作用，所以如果有人能解释一下，我将不胜感激。

# macos - 启用标签到只读 NSTextField？

> ID：11025150
> 
> 赞同：1
> 
> 时间：2012-06-14T00:11:34.947
> 
> 标签：macos, cocoa

我有一个包含三个`NSTextField`s 的窗口，如下所示：

```
+------------------------+
| +--------------------+ |
| | field1 (editable)  | |
| +--------------------+ |
| +--------------------+ |
| | field2 (editable)  | |
| +--------------------+ |
| +--------------------+ |
| | field3 (selectable)| |
| +--------------------+ |
+------------------------+ 
```

虽然`field1`和`field2`是可编辑的，但`field3`设置为“可选择”，即我可以使用鼠标选择其中的文本并从中复制，但我无法编辑文本。

`field2`引用`field3`作为它的`nextKeyView`出口，但是当我在第一响应者时按下`Tab`键时，被激活而不是.`field2``field1``field3`

一旦我`field`在 Interface Builder 中设置为“可编辑”，选项卡就会按预期工作。

如何启用选项卡进入只读`NSTextField`s？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:21:46.233

我们知道这很容易，只需创建一个**NSTextFieldCell**的子类：在 Xcode 中添加一个名为“ **myNonEditableCellClass** ”的类

代码在`myNonEditableCellClass.h`

```
#import <Cocoa/Cocoa.h>
@interface myNonEditableCellClass : NSTextFieldCell {}
@end 
```

--

代码在`myNonEditableCellClass.m`

```
#import "myNonEditableCellClass.h"

@implementation myNonEditableCellClass
- (BOOL)acceptsFirstResponder {
    return YES;}
@end 
```

进入“ **Interface Builder** ”：选择第三个，再次单击以选择 NSTextFieldCell，在 Inspector 中将`NSTextField`其类更改为。`myNonEditableCellClass`

就是这样

# iphone - 获取 CLGeocoder 返回的确切州/省字符串

> ID：11025151
> 
> 赞同：0
> 
> 时间：2012-06-14T00:11:49.770
> 
> 标签：iphone, objective-c, clgeocoder

在哪里可以找到 CLGeocoder 在反向地理编码时返回的州和省列表？必须有一个列表来定义一组坐标并将其转换为城市/州/国家/等。
我之所以问是因为我需要确保 CLGeocoder 返回的字符串与我的应用程序中的硬编码字符串之间没有差异（特别是因为 Objective-c 区分大小写）。例如，是“纽芬兰和拉布拉多”还是“纽芬兰和拉布拉多”或“纽芬兰/拉布拉多”或其他？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:56:25.020

请点击此[链接](http://englishplus.com/grammar/00000057.htm)查看完整的州和省列表。顺便说一句，它是“纽芬兰和拉布拉多”。希望有帮助！

# javascript - 当主轴为 typeofday 时，如何为 LineChart 设置 hAxis.viewWindow.max？

> ID：11025154
> 
> 赞同：10
> 
> 时间：2012-06-14T00:12:43.807
> 
> 标签：javascript, google-visualization

我需要画一个图表来实时显示一天中数据的演变。我一直在[Google Charts Playground](https://code.google.com/apis/ajax/playground/?type=visualization#line_chart)中玩游戏，看看它是如何可视化的，但我无法设置 hAxis.viewWindow.max 选项，以便固定 X 轴。

这是我一直用来测试的代码：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();

  data.addColumn('timeofday', 'x');
  data.addColumn('number', 'S0');
  data.addColumn('number', 'S1');
  data.addColumn('number', 'S2');

  data.addRows([
    [[0,0,0,0],   1,       1,           0.5],
    [[1,0,0,0],   2,       0.5,         1],
    [[2,0,0,0],   4,       1,           0.5],
  ]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10},
                  hAxis: {maxValue: [23,59,59,0], minValue:[0,0,0,0], viewWindow:{max: [23, 59, 59, 0]}}}
          );
    } 
```

文档声称 hAxis.viewWindow.max 接收数字，但我还没有找到将“timeofday”类型表示为数字的方法。使用它，X 轴从早上 0 点到凌晨 2 点，但我需要轴一直到午夜。

我尝试使用“datetime”作为列类型，但问题相同。

下面的示例使用数字按我的预期工作，画出我的点所在的线，但将网格扩展到我的最大值：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();

  data.addColumn('number', 'x');
  data.addColumn('number', 'S0');
  data.addColumn('number', 'S1');
  data.addColumn('number', 'S2');

  data.addRows([
    [0,   1,       1,           0.5],
    [1,   2,       0.5,         1],
    [2,   4,       1,           0.5],
  ]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10},
                  hAxis: {maxValue: 23, minValue:0, viewWindow:{max: 23}}}
          );
} 
```

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T22:35:19.473

X 轴最终将达到您的最大值（或在相同情况下接近 - 就像这个一样）。例如

的情况下：

```
data.addRows([
    [[0,0,0,0],   1,       1,           0.5],
    [[1,0,0,0],   2,       0.5,         1],
  ]); 
```

x 轴将在**1:00结束**

的情况下：

```
 data.addRows([
    [[0,0,0,0],   1,       1,           0.5],
    [[1,0,0,0],   2,       0.5,         1],
    [[23,59,59,0],   4,       1,           0.5],
  ]); 
```

它将在**23:59:59**结束，显示**22:00**作为最后一个 x 轴标签。

这意味着无论您在 hAxis 中定义为最大值的值如何，图表都会运行到您在 dataRows 中拥有的最大“timeofday”值（实际上是最后添加的行）。

# mysql - 为什么 sfPropelORM 会破坏我的表单过滤条件？

> ID：11025156
> 
> 赞同：0
> 
> 时间：2012-06-14T00:12:59.220
> 
> 标签：mysql, symfony1, symfony-1.4, propel

我在 Symfony 1.3.11 中使用 sfPropel15Plugin，一切运行良好。

我决定将插件升级到使用 Propel 1.6 的 sfPropelORMPlugin。我做了正常的步骤来安装插件。在大多数情况下，我能够让应用程序备份并正常工作。但是，我发现我以前使用的某些表单过滤条件现在正在破坏并且无法生成有效的 sql。

这是一个适用于 1.5 但不适用于 1.6 的示例：

```
// select only users who are sales reps on an existing quote
$c = new Criteria();
$c->addJoin(sfGuardUserPeer::ID, sfGuardUserProfilePeer::USER_ID);
$c->addJoin(QuotePeer::SALESREP, sfGuardUserPeer::ID);
$c->addGroupByColumn(sfGuardUserPeer::ID);
$c->addAscendingOrderByColumn(sfGuardUserProfilePeer::FIRST_NAME);

$this->widgetSchema['salesrep'] = new sfWidgetFormPropelChoice(array(
  'label'     => 'Sales rep',
  'add_empty' => true,
  'order_by'  => array('Username', 'asc'),
  'model'     => 'sfGuardUser',
  'method'    => 'getFullName',
  'criteria'  =>  $c,
  'key_method'=> 'getId',
  'multiple'  => false
)); 
```

这会生成这个无效的 MySQL：

```
SELECT sf_guard_user.ID, sf_guard_user.USERNAME, sf_guard_user.ALGORITHM, sf_guard_user.SALT, sf_guard_user.PASSWORD, sf_guard_user.CREATED_AT, sf_guard_user.LAST_LOGIN, sf_guard_user.IS_ACTIVE, sf_guard_user.IS_SUPER_ADMIN, sf_guard_user.VANTIVE_ID FROM LEFT JOIN `sf_guard_user` ON (quote.SALES_ENGINEER=sf_guard_user.ID) 
```

大多数情况下，我想确定这是否是一个错误，是否可以通过微小的更改来修复它，或者我是否应该回滚到 1.5。

# c++ - C++ 修复编程练习

> ID：11025158
> 
> 赞同：0
> 
> 时间：2012-06-14T00:13:27.037
> 
> 标签：c++

我的老师要求全班纠正这个程序中的错误。实际上，这似乎是一个糟糕的程序；我只是准确地输入了它在工作表中的样子，并得到了这个错误：

好吧，现在我刚刚更改了一些东西，但是在运行时得到了这个异常：Microsoft C++ exception: [rethrow] at memory location 0x00000000..

代码现在是这样的：（类名的变量现在是西班牙语，很抱歉给您带来不便）

```
 #include <iostream>
#include <exception>
#include <stack>
using namespace std;

class EPilaVacia : public exception{
public:
    const char* what() const throw(){
        return "Error: Pila Vacía";
    }
};

template <class T, int max=100>
class Pila{
private:
    stack<T*> *pila;
    int cont;
public:

    Pila() : cont(0){
        pila=new stack<T*>();
    }
    virtual void apilar( T* pt){
        if(cont<max){
            pila->push(pt); //respuesta 2
        }
    }
    virtual void apilar(T t){
        if(cont<max){
            pila->push(&t); //respuesta 3
        }
    }
    T tope() const throw (EPilaVacia){
        if(cont>0){
            pila->top(); //respuesta 4
        }else{
            throw ; //respuesta 5
        }
    }
    T& desapilar() throw (EPilaVacia){
        if(cont>0){
            pila->pop(); //respuesta 6
        }else{
            throw ; //respuesta 7
        }
    }
    int size() const{
        return pila->size();
    }
};

class Figura{
public:

    virtual void print(){
        cout<< "FIGURA" <<endl;
    }
};

class Circulo : public Figura{
public:
    void print(){
        cout<<"CIRCULO"<<endl;
    }
};

class Triangulo : public Figura{
public:
    void print(){
        cout<<"TRIANGULO"<<endl;
    }
};

int main(){
    Pila<Figura*> *pfiguras= new Pila<Figura*>();
    pfiguras->apilar(new Circulo());
    pfiguras->apilar(new Triangulo());
    Pila<Figura*> pfiguras2(*pfiguras);
    pfiguras->tope()->print();
    pfiguras->desapilar();
    pfiguras->tope()->print();
    pfiguras->desapilar();

    pfiguras2.tope()->print();
    system("Pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T01:56:53.483

从哪儿开始？这有很多错误。

1.  没有“using namespace std;”，它会使全局命名空间变得混乱。而是使用 std::list、std::cin 等使用命名空间来标识特定对象或类。

2.  在异常类中，不要编写自己的`what()`方法。只需在构造函数中初始化基类。

    ```
    class EPilaVacia : public std::exception
    {
    public:
        EPilaVacia()
        : std::exception("Error: Pila Vacía")
        {
        }
    }; 
    ```

3.  我认为 Pila 课程只是一个学习练习。在现实生活中，您会使用`std::stack`，而不是自己制作。

4.  如果您使用列表实现堆栈，则不需要“max”参数。

5.  不要动态分配列表，这很愚蠢。只需使用 `std::list<T*> ila;`

6.  你不需要“继续”。利用`ila.size();`

7.  不要将 apilar() 之类的函数设为虚拟函数。该列表是私有的，因此子类无法访问它，因此无法覆盖方法。此外，您没有虚拟析构函数，因此继承可能不是一个好主意。

8.  void apilar(T t) 是一场灾难。您按值传递 t，然后存储参数的地址，然后超出范围。该功能是不必要的，失去它。

9.  不要在方法声明中添加“throw (EPilaVacia)”。没有编译器实现它，并且在新的 C++11 标准中已弃用。

10.  在 tope() 中，使用 ila.back()，而不是 ila.pop_back()。

    ```
    T tope() const 
    {
        if(ila.empty())
        {
            throw EPilaVacia();
        }
        else
        {
            return *ila.back();
        }
    } 
    ```

11.  在 desapilar() 中，不要使用 clear，因为它会清空堆栈。使用这样的东西

    ```
    T& desapilar()
    {
        if(ila.empty())
        {
            throw EPilaVacia();
        }
        else
        {
            T *pt = ila.back();
            ila.pop_back();
            return *pt;
        }
    } 
    ```

12.  **永远**`system("Pause");` 不要使用`std::cin.get();`

13.  您分配的对象`new`永远不会被删除。你有内存泄漏。

可能还有更多，但这应该让你开始。笔记：我很快就草草写下来了。上面可能有错误，所以检查我的代码，不要只是复制它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T00:24:10.527

此错误是否在线发生，`"mystack=new stack<T>;"`因为这是我看到的唯一可能导致此错误的行。原因是 mystack 被定义为 T*，而不是`stack<T>`. 当编译器尝试将 new 分配`stack<T>`给 mystack 时，它会看到 mystack 正在寻找 T*，并说“我不知道如何制作`stack<T>`T*”。

现在您已经修复了该错误，您将得到一个来自 nullptr 异常的抛出。通常，最好通过在调试器下运行它并查看是哪一行导致您的程序表现不佳来解决这个问题。但是，通过检查，您似乎只是将两个东西压入堆栈，然后尝试使用“top”来获得第三个：`pfiguras2.tope()->print();`.

您也在泄漏内存，但 Michael J 的评论在这段代码中更挑剔、更少“让它不会崩溃”的区域中表现得更好。

# javascript - 多个类上的 jQuery 选择器

> ID：11025161
> 
> 赞同：1
> 
> 时间：2012-06-14T00:13:34.130
> 
> 标签：javascript, jquery, jquery-selectors

这会找到 id 但不会删除类

```
$('[id^=paritalIDname]').removeClass('[class^=partialClassName]'); 
```

可能是因为元素看起来像

```
<div id="partialIDname-full" class="something someone partialClassNameFull"> 
```

元素的类名是`partialClassNameFull`还是`partialClassNameHalf`我需要删除它。

我想我可以在类选择器中使用通配符，比如

```
removeClass('[class^=partialClassName*]'); 
```

但这不起作用。

什么是好的解决方案？（谢谢。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:18:13.150

This will handle all partial match.

```
 $("div[id^=partialId]").each(function () {
            var cls = $(this).attr("class").split(" ");

            for (var i in cls) {
                if (/partialClass/.test(cls[i])) {
                    $(this).removeClass(cls[i]);
                    break;
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:39:37.943

您需要明确删除这两个类：

```
$('[id^=partialIDname]').removeClass('partialClassNameFull').removeClass('partialClassNameHalf'); 
```

因为 .removeClass() 仅适用于完整的类名匹配。如果其中一个类名不存在，则不会发生任何事情 - 当您尝试 .removeClass() 不存在的类时不会引发错误。

您还可以按照评论中的建议尝试以下简短版本：

```
$('[id^=partialIDname]').removeClass('partialClassNameFull partialClassNameHalf'); 
```

# mysql - MySQL - 没有结果时查询非常慢（空）

> ID：11025162
> 
> 赞同：-1
> 
> 时间：2012-06-14T00:14:07.083
> 
> 标签：mysql, performance

我的 SQL 查询有问题，它运行得非常快，除非它不返回任何结果。

我有 4 个表：世界（2 项）、玩家（约 2000 项）、world_chunk（约 16000 项）和 world_block（约 100 万项）

```
 SELECT bid,playername FROM worlds 
 JOIN world_chunks ON worlds.id = world_chunks.mainid 
 JOIN world_blocks ON world_chunks.cid = world_blocks.cid 
 JOIN players ON world_blocks.player = players.pid 
 WHERE worldname='world' AND x='-684' AND y='63' AND z='-2234' AND cx ='-43' AND cz='-140' 
```

x,y,z 保存在 world_blocks 中，cx,cz 保存在 world_chunks 中，worlds 中的 worldname 所有索引都已设置，除了空结果之外的所有内容都非常快。

无论如何我可以加快空结果？

非常感谢你们的帮助。

编辑：这是数据库结构： http: [//pastebin.com/rxQQ5mzp](http://pastebin.com/rxQQ5mzp)

它的 MySQL InnoDB

```
EXPLAIN on Emtpy Query:
1   SIMPLE  worlds  ALL PRIMARY,idx_mainid  NULL    NULL    NULL    2      Using where
1   SIMPLE  world_blocks    ALL NULL    NULL    NULL    NULL    766845  Using where; Using join buffer
1   SIMPLE  world_chunks    eq_ref  PRIMARY,idx_cid PRIMARY 4   WatchBlock.world_blocks.cid 1   Using where
1   SIMPLE  players eq_ref  PRIMARY,idx_pid PRIMARY 4   WatchBlock.world_blocks.player  1   

EXPLAIN on Found Query:
1   SIMPLE  worlds  ALL PRIMARY,idx_mainid  NULL    NULL    NULL    2   Using where
1   SIMPLE  world_blocks    ALL NULL    NULL    NULL    NULL    766845  Using where; Using join buffer
1   SIMPLE  world_chunks    eq_ref  PRIMARY,idx_cid PRIMARY 4   WatchBlock.world_blocks.cid 1   Using where
1   SIMPLE  players eq_ref  PRIMARY,idx_pid PRIMARY 4   WatchBlock.world_blocks.player  1 
```

结果可以为空，因为 x,y,z 和 cx,cz 不匹配（因此，如果其中一个不在 db 中，则 player 的结果应该为空）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:43:11.230

Philwinkle 是对的，在没有发布适当的解释的情况下发布 SQL 查询性能问题并不是特别合适。您还应该发布四个表和相关索引的 DDL。您说“所有索引都已设置”，但是在您的后续评论中，您建议您拥有的唯一索引位于主键上，这对于困扰您的查询来说是不够的。

对于性能问题，注意您正在使用的数据库以及您正在使用的表类型也很有用：您的标签表明这是 mysql，这意味着 myisam 与 innodb 是您未能提供的关键信息。最后，您声称“空”结果很慢，但是您没有解释为什么空结果为空，是因为其中一个连接为空，还是因为其中一个坐标不匹配而为空（如果是， world_block 或 world_chunk 坐标）。

如果您提供了 EXPLAIN 数据和基本 DDL，我就不会写这个，因为这个问题很可能现在已经回答了；就目前而言，除非您这样做，否则无法合理地回答这个问题。

我能提供的最好的方法是，您可能需要添加至少一个索引，涵盖部分或全部 (x,y,z) 和 (cx,cy) 坐标；但这只是一个有根据的猜测。

编辑：

谢谢你的解释，这有帮助。毫无疑问，您已经注意到，world_blocks 的全表扫描是最有可能的罪魁祸首。鉴于数据库的规模较小，您为 (cid,x,y,z) 添加的索引可能最有帮助。但是还有其他几点：

如果这是一个摄取+读取数据库，那么 MyISAM 是一个合理的选择，但如果您打算执行在线 UPDATE 或 DELETE 操作，则最好坚持使用 InnoDB。InnoDB 的真正好处是并发性/可扩展性的改进超过了引用完整性（尽管你也不应该低估它的重要性）。

如果 x、y 和 z 在此查询中始终保持不变，则应考虑将它们移到索引的前面。事实上，如果你使用 InnoDB，这个 EXPLAIN 建议索引应该只在 (x,y,z) 上，因为包含 cid 只会浪费缓冲区缓存。如果您坚持使用 MyISAM，您绝对应该考虑在连接引用的那些字段上使用覆盖索引：(x,y,z,cid,players)，因为这将防止在最终投影之前进行全行读取。

这带来了我的最后一点：一旦发现自己有无法解释的性能怪癖，请始终运行 EXPLAIN；在你无法解释的性能怪癖消失后，始终运行 EXPLAIN，并确保它有意义；MyISAM 和 InnoDB 的索引行为几乎总是不同的，对一个的优化并不总是对另一个进行优化。

# sql - 如何打开使用终端下载的 sql 数据库？

> ID：11025163
> 
> 赞同：1
> 
> 时间：2012-06-14T00:14:20.153
> 
> 标签：sql, database, import, load, terminal

[如何从终端导入带有 MySQL 的数据库？](https://stackoverflow.com/questions/4546778/how-can-i-import-a-database-with-mysql-from-terminal) 该线程的语法

```
mysql -u username -ppassword databasename < filename.sql 
```

为了简单起见，我对文件 (lahman591) 的输入放在了我的根目录上

```
mysql> mysql -u root -p lahman591 <c:\lahman591.sql 
```

我得到一个错误：

```
ERROR 1064 (42000) You have an error in your sql syntax. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:16:45.670

您需要从您的普通 shell（命令正在调用`mysql`bin）而不是 mysql shell 执行此操作。

# css - 如何循环遍历 h1 - h6 标签并随着每个增量减小字体大小？

> ID：11025165
> 
> 赞同：3
> 
> 时间：2012-06-14T00:14:49.350
> 
> 标签：css, loops, less

我想减小字体大小甚至颜色（带循环？）。LESSCSS 有可能吗？我尝试了以下方法，它可以工作，但每次只会将字体大小减小 1 - 原因很明显。还有另一种方法吗？

目前：

```
 @iterations: 6;
  h(@index) when (@index > 0) {
    (~"h@{index}") {
        font-size: 21px - @index;
    }
    h(@index - 1);
  }
  h(0) {}
  h(@iterations); 
```

给我这个：

```
 h6 { font-size:15px; }
 h5 { font-size:16px; }
 h4 { font-size:17px; }
 h3 { font-size:18px; }
 h2 { font-size:19px; }
 h1 { font-size:20px; } 
```

但这不是我所追求的。我希望“h”减少一 - 它目前正在做 - 并且字体大小减少 - 让我们说 - 每个循环减少 5px。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:20:21.213

你已经有了困难的部分。您可以在 LESS 中乘以`*`所以很容易根据需要调整循环。举个例子：

```
@iterations: 6;
h(@index) when (@index > 0) {
    (~"h@{index}") {
        font-size: 40px - @index*5;
    }
    h(@index - 1);
}
h(0) {}
h(@iterations); 
```

编译为：

```
h6 { font-size:10px; }
h5 { font-size:15px; }
h4 { font-size:20px; }
h3 { font-size:25px; }
h2 { font-size:30px; }
h1 { font-size:35px; } 
```

# iphone - Xcode 4.2.3 应用程序无法在 iPhone 4S 上运行

> ID：11025173
> 
> 赞同：0
> 
> 时间：2012-06-14T00:15:50.437
> 
> 标签：iphone, ios, xcode

我刚刚开始学习如何编写 iOS 应用程序。我做了一个快速应用程序作为第一次测试。它在模拟器中运行完美，但在我的 iPhone 4s 上运行时，应用程序运行并立即返回主屏幕。

这是我的应用程序的链接，如果您可以查看它并查看问题可能是什么，因为我不知道。

[http://netload.in/dateiGpnBm98FTY/FirstTest.zip.htm](http://netload.in/dateiGpnBm98FTY/FirstTest.zip.htm)

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:56:58.760

尝试设置设备框架，而不是模拟器框架

# jquery - 在fancybox的打开和关闭时改变body style溢出......？

> ID：11025174
> 
> 赞同：1
> 
> 时间：2012-06-14T00:15:53.103
> 
> 标签：jquery, fancybox

当fancybox打开时，我想禁用滚动条的父窗口访问。我使用以下方法完成了与 shadowbox 类似的事情：

```
function SBopen() {
            document.body.style.overflow = "hidden";  //Hide navigation overflow when SB open
        }
        function SBclose() {
            document.body.style.overflow = "auto";  //Show navigation overflow when SB open
        }
        Shadowbox.init({
            handleOversize: "none",
            modal: false,  //false lets user click outside SB to close window
            onOpen: SBopen,
            onClose: SBclose
        }); 
```

但是我不确定如何使用fancybox 来实现这一点。我当前的 fancybox 初始化脚本如下所示：

```
 $(document).ready(function() {
    $(".fancybox-thumb").fancybox({
        padding : 2,
        modal : false,
        prevEffect  : 'fade',
        nextEffect  : 'fade',
        nextSpeed   : 'slow',
        prevSpeed   : 'slow',
        openSpeed   : 'slow',
        closeSpeed  : 'slow',
        helpers : {
            title   : {
                type: 'outside'
            },
            overlay : {
                opacity : 0.8,
                css : {
                    'background-color' : '#000'
                }
            },
            thumbs  : {
                width   : 50,
                height  : 50
            }
        }
    });
}); 
```

知道如何做到这一点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T00:31:48.567

将这些选项添加到您的脚本中：

```
 beforeShow: function(){
   $("body").css({"overflow":"hidden"});
  },
  afterClose: function(){
   $("body").css({"overflow":"visible"});
  } 
```

# google-app-engine - Google App Engine 拉取队列的参数和有效负载之间的区别

> ID：11025175
> 
> 赞同：1
> 
> 时间：2012-06-14T00:16:01.120
> 
> 标签：google-app-engine, pull-queue

我的项目基于 GAE/J 并利用最近推出的 PULL 队列，但我认为这个问题也可以应用于 Python。

基本上，当我将任务放入 PULL 队列时，我需要设置任务的一些参数，以供后面的消费者拾取。

我已经以两种方式在参数设置中实现了：

1）通过使用`param()`：

```
TaskOptions taskOptions = TaskOptions.Builder.
                withMethod(TaskOptions.Method.PULL);
taskOptions.param("param", paramValue);
taskOptions.param("param2", paramValue2); 
```

2）通过使用`payload()`：

```
TaskOptions taskOptions = TaskOptions.Builder.
                    withMethod(TaskOptions.Method.PULL);
taskOptions.payload("payloadValue"); 
```

两种方法都有效，但是，我想知道两者之间的区别是什么，就效率或便利性而言，哪种方式应该是首选方式。

我可以看到，通过使用`param()`，很容易设置多个参数，也很容易为消费者检索参数。但是对于一种参数情况，有效负载可能会更方便，因为它可以保存代码以捕获消费者提取参数时抛出的异常。

但是，除了我所说的之外，我很高兴知道这两者之间的更多区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:32:20.073

根据[python 文档](https://developers.google.com/appengine/docs/python/taskqueue/tasks#Task)，我会说在你的情况下是完全一样的。

> 在 PULL 请求中，如果您已经指定了有效负载，请不要指定参数。参数被编码为 application/x-www-form-urlencoded 并设置为有效负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-28T02:42:46.587

TaskOptions 的 .param() 和 .payload() 函数有区别。您可以按如下方式使用这些功能；

1.  taskOptions.param("param1","Invoice_3344"); 现在在接收端，假设您正在调用一个 servlet ，在 HttpRequest 中，您可以接收发送的参数作为请求参数。

    公共类 MyInvoiceTask 扩展 HttpServlet{ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { String invoiceNum = request.getParameter("param1"); } }

2.  现在假设你想序列化你的整个自定义类对象，它有大量的数据。在这种情况下，您需要在内部使用 .payload() 函数，它将有效负载数据发送到请求正文中。

    //**自定义类对象 Person person = new Person("Abc", "Mumbai", 22);

    //**将对象转换为JSON，以便可以转换为String（Payload需要）

    //**使用 Gson 库 Gson gson = new Gson(); 字符串 personObjString = gson.toJson(person); //**将payload作为字节数组放入task option中 taskOption.payload(personObjString.toByteArray());

    现在在接收端，假设使用 servlet，然后从 HttpRequest 对象，我们需要获取有效负载字节数组并将其转换回 cutsom 对象，即在我们的示例中为“Person”类对象。私有字节[] getPayloadFromHttpRequest(HttpServletRequest req) 抛出 IOException { InputStream inputStream = req.getInputStream(); ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

    ```
     int length;
        byte[] buffer = new byte[1024];

        while ((length = inputStream.read(buffer)) >= 0)
            byteArrayOutputStream.write(buffer, 0, length);

        if (byteArrayOutputStream.size() > 0){
            return byteArrayOutputStream.toByteArray();
        }
        return null;
    } 
    ```

    //**现在接收到的 byteArray 可以与 Gson 一起使用，将其转换回 Person 对象 byte[] payload = getPayloadFromHttpRequest(request); Gson gson = 新 Gson(); String personJsonString = new String(payload); 人 person = gson.fromJson(personJsonString, Person.class);

# r - googleVis、knitr、Rpubs、复制示例、knitr 选项？

> ID：11025178
> 
> 赞同：2
> 
> 时间：2012-06-14T00:16:16.770
> 
> 标签：r, google-visualization, knitr

菜鸟问题，我想。

我只是想复制这个：

[http://rpubs.com/gallery/googleVis](http://rpubs.com/gallery/googleVis)

打开一个新的 markdown 文档（在 Rstudio 中），粘贴：

```
suppressPackageStartupMessages(library(googleVis))
T <- gvisTable(Exports, options = list(width = 200, height = 280))
G <- gvisGeoChart(Exports, locationvar = "Country", colorvar = "Profit", 
    options = list(width = 360, height = 280, dataMode = "regions"))
TG <- gvisMerge(T, G, horizontal = TRUE, tableOptions = "bgcolor=\"#CCCCCC\" cellspacing=10")

print(TG, "chart") 
```

```{r} 标签之间。

结果输出（来自打印函数）只是javascript（我认为）代码。它实际上不是在绘制情节，在预览窗口或发布后的在线版本中。

降价中还需要其他东西吗？喜欢：

```{r 某事=某事}

让它正确解释打印命令的输出？

谢谢

**回答**

```{r任何你喜欢，结果='asis'}

这篇文章的顶部 [http://rpubs.com/gallery/googleVis](http://rpubs.com/gallery/googleVis)真的应该指出imo ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:26:18.957

类似```{r results='asis'}。但是我现在没有 knitr 手册，所以你需要检查一下。

# android - WebView java.lang.SecurityException：没有修改给定线程的权限

> ID：11025182
> 
> 赞同：13
> 
> 时间：2012-06-14T00:16:51.823
> 
> 标签：android, webview, android-webview, securityexception

我有一个使用多个 WebView 的应用程序。尽管我仍然得到下面的异常，但我无法通过 WebSettings 设置渲染线程的优先级。

到目前为止，它似乎只发生在 android 4.0.4 上，我还没有找到它的源代码。

有人遇到这个和/或知道解决方案吗？谢谢！

```
java.lang.SecurityException: No permission to modify given thread
at android.os.Process.setThreadPriority(Native Method)
at android.webkit.WebViewCore$WebCoreThread$1.handleMessage(WebViewCore.java:712)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:789)
at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-01T23:03:32.653

是氰的错。[https://github.com/CyanogenMod/android_frameworks_base/commit/b963f3c0c64560bcdb1596dd85fe9b0dad6d78c5#L1R712](https://github.com/CyanogenMod/android_frameworks_base/commit/b963f3c0c64560bcdb1596dd85fe9b0dad6d78c5#L1R712)

我有一堆关于这个问题的崩溃报告，所有来自许多不同设备的 4.0.4，所有这些都可能运行某种形式的 CM9（大多数还没有正式的 ICS 版本）。

我没有时间对他们大喊大叫，所以希望其他人可以在他们的错误跟踪器中提出它。

# android - 从应用程序私有的android文件中读取

> ID：11025183
> 
> 赞同：-1
> 
> 时间：2012-06-14T00:17:12.527
> 
> 标签：android, storage, trie

我正在开发一个 android 应用程序，我需要从文件中读取单词来创建一个 Trie。有没有办法我可以在安装时将文件写入内部存储，以便只有我的应用程序可以访问它，或者我应该硬编码单词。任何建议表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:24:02.147

如果文件不会改变，你应该把它放在你的资产目录中。如果要更改，您可以将其从资产复制到内部存储，并且它将是私有的。外部存储（通常是 SD 卡）是文字可读的。

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

[http://developer.android.com/reference/android/content/res/AssetManager.html](http://developer.android.com/reference/android/content/res/AssetManager.html)

# javascript - jQuery ajax表单多次提交

> ID：11025185
> 
> 赞同：3
> 
> 时间：2012-06-14T00:17:32.477
> 
> 标签：javascript, ajax, javascript-events, jquery

我在使用 jquery/ajax 表单提交多个表单时遇到了一些问题。我通过在我的服务器上打印每个表单提交实例来发现这一点，并看到一个表单会正确提交一次，然后再提交多次。

为了清楚起见，此代码在第一次提交时 100% 正确工作，但是当我单击表中的另一行并创建一个新对话框/提交它时，它最终会提交多次。

我认为它与事件绑定有关，但在修复它时遇到了麻烦。任何见解或帮助将不胜感激。

按钮的 id 是“save-flag-button”

```
// When someone clicks on the flag column in my table, a dialog pops up //
// on the condition that a flag does not exist. //
$(function() {
  $('.flag').click(function() {
    var cellId = "flag" + String(this.getAttribute("data-client-rel"));
    if (this.getAttribute("data-flag-exists") == '0') {

      // create dialog
      var dialog = flagDialog('Create Flag');

      // Making the form ajax
      $("form", dialog).ajaxForm(function(success, data) {
        if (success) {
          $("#" + cellId).attr("data-flag-exists", '1');
          $("#" + cellId).attr("data-flag-content", data["flag_state"]);
          $("#" + cellId).text(data["flag_state"]);
          $("#flag-dialog").dialog("close");
        } else {
          alert("Failed to submit flag. Please retry.");
        }
      });
    } else { }

    }).hover(function() {
      if (this.getAttribute("data-flag-exists") == '0') {
        this.innerHTML = '<span style="color: #4183C4;">Create flag!</span>';
      }}, function() {
        this.innerHTML = this.getAttribute("data-flag-content");
      })
    });

// jquery dialog code //
function flagDialog(dialogTitle) {
  var dialog = $("#flag-dialog").dialog({
    autoOpen: false,
    autoResize: true,
    modal: true,
    minHeight: 300,
    minWidth: 450,
    position: "center",
    title: dialogTitle,
    buttons: [{
      id: "flag-cancel-button",
      text: "Cancel",
      click: function() {
        $(this).dialog("close");
        }
      },
      {
      id:"save-flag-button",
      text: "Submit",
      click: function() {
        $("#flag-dialog").dialog("destroy");
        // $("#client-relationship-flag-form").submit();
        }
      }],
    close: function() {
      //$("#notes-text").text("");
    }
  });

  // Unbinding buttons here //
  $("#save-flag-button, #flag-cancel-button").unbind();
  $("#save-flag-button").unbind('click').click(function() {
    $("#client-relationship-flag-form").submit();
  });
  $("#flag-cancel-button").click(function() {
     $("#flag-dialog").dialog("close");
  });

  dialog.dialog("open");
  return dialog;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T00:57:02.887

ajaxForm 绑定应该只进行一次。尝试将 ajaxForm 绑定放在 $(document).ready 事件上并尝试重构您的逻辑。每次单击**.flag**元素时都会绑定 ajaxForm，并且所有先前绑定的 ajaxForm 都将在所有后续单击事件中调用。

# php - PHP Intl 扩展线程安全吗？

> ID：11025186
> 
> 赞同：4
> 
> 时间：2012-06-14T00:18:06.643
> 
> 标签：php, localization, thread-safety, locale, php-extension

我一直在阅读 PHP 中的语言环境，似乎`setlocale()`线程有问题。（我对线程不太熟悉 - 文档提到它不是线程安全的）

我想让我的项目能够处理某些数字格式，并且 Intl 扩展似乎很有趣。

[http://php.net/manual/en/book.intl.php](http://php.net/manual/en/book.intl.php)

`setlocale()`我应该期待与使用 Intl 扩展相同的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T01:42:52.640

好吧，我自己也很好奇，所以我设计了一个测试。

首先我测试`setlocale()`了这两个文件：

```
<?php
# locale1.php
error_reporting( E_ALL | E_STRICT );

date_default_timezone_set( 'Europe/Amsterdam' );
setlocale( LC_ALL, 'dutch_nld' ); // awkward Windows locale string

sleep( 10 ); // let's sleep for a bit here

echo strftime( '%A, %B %d, %Y %X %Z', time() ); 
```

和

```
<?php
# locale2.php
error_reporting( E_ALL | E_STRICT );

date_default_timezone_set( 'America/Los_Angeles' );
setlocale( LC_ALL, 'english_usa' ); // awkward Windows locale string

echo strftime( '%A, %B %d, %Y %X %Z', time() ); 
```

然后我在两个单独的选项卡中执行它们。首先`locale1.php`，它在设置语言环境后休眠 10 秒，`locale2.php`同时让我们有时间执行。

~~令我惊讶`locale2.php`的是，甚至不允许正确更改语言环境。它以不允许同时更改语言环境的方式出现`sleep( 10 )`在劫持 Apache/PHP 进程中。当然，它*确实*同时呼应了日期，只是没有像您期望的那样本地化。`locale1.php``locale2.php`~~

 ***编辑：**对不起，废弃那个。它似乎`locale2.php` *确实*改变了语言环境，`locale1.php`然后在睡觉后打印英语日期而不是荷兰语。所以这*似乎*符合预期的行为`setlocale()`。 **/编辑**

然后，我`IntlDateFormatter`用这两个文件进行了测试：

```
<?php
# locale1.php
error_reporting( E_ALL | E_STRICT );

$dateFormatter = new IntlDateFormatter(
    'nl_NL',
     IntlDateFormatter::FULL,
     IntlDateFormatter::FULL,
     'Europe/Amsterdam'
);

sleep( 10 ); // let's sleep for a bit here

echo $dateFormatter->format( time() ); 
```

和

```
<?php
# locale2.php
error_reporting( E_ALL | E_STRICT );

$dateFormatter = new IntlDateFormatter(
    'en_US',
     IntlDateFormatter::FULL,
     IntlDateFormatter::FULL,
     'America/Los_Angeles'
);

echo $dateFormatter->format( time() ); 
```

然后在两个单独的选项卡中再次执行它们，与第一组文件的方式相同。这*确实*给出了预期的结果：while `locale1.php`is sleep`locale2.php`很好地根据美国规则以美式英语打印日期，之后`locale1.php`根据荷兰规则很好地用荷兰语打印日期。

因此，总而言之，似乎`Intl`可以避免这个`setlocale`问题。

但当然也要注意[金贤敏的](https://stackoverflow.com/a/11025442/165154)回答。由于缺乏使用经验，我无法对此发表评论`Intl`。我最近才发现`Intl`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T01:03:40.890

如果您不在框架内工作，则 Intl 扩展是安全且非常有用的。

例如，如果你使用 Symfony2，你的程序在使用 Forms 和 Validators 时很可能会崩溃。*

# java - 序列化数组列表

> ID：11025187
> 
> 赞同：0
> 
> 时间：2012-06-14T00:18:35.583
> 
> 标签：java, serialization, deserialization

现在我想知道你们是否可以帮助我将 ArrayList 序列化到文件中。现在我正在从学校做一个总结，但是我没有真正的编码问题。我正在制作的是一个 GUI 地址簿，当用户添加地址时，它会存储到数组列表中并添加到组合框中。这就是我正在做的事情。我要问的是你是否可以序列化 Arraylists。如果可以的话，大家能教我怎么做吗？或者至少给我一些教程？

太感谢了。如果你们在回答之前需要查看代码，请告诉我，我会展示出来。再次，谢谢你。

好的，这是我的整个代码：

```
import java.awt.EventQueue;

public class Address_Book {

    private JFrame frame;
    private JTextField newName;
    private JTextField newAddress;
    private JTextField newPhoneAddress;
    ArrayList<Book> test = new ArrayList<Book>();

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Address_Book window = new Address_Book();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public Address_Book() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 371, 262);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);

        final JComboBox comboBox = new JComboBox();
        final DefaultComboBoxModel model = new DefaultComboBoxModel();

        newName = new JTextField();
        newName.setBounds(10, 29, 79, 20);
        frame.getContentPane().add(newName);
        newName.setColumns(10);

        JLabel lbl1 = new JLabel("Enter New Name:");
        lbl1.setBounds(10, 11, 107, 14);
        frame.getContentPane().add(lbl1);

        JLabel lbl2 = new JLabel("Enter New Address:");
        lbl2.setBounds(110, 11, 107, 14);
        frame.getContentPane().add(lbl2);

        newAddress = new JTextField();
        newAddress.setColumns(10);
        newAddress.setBounds(109, 29, 96, 20);
        frame.getContentPane().add(newAddress);

        newPhoneAddress = new JTextField();
        newPhoneAddress.setColumns(10);
        newPhoneAddress.setBounds(215, 29, 130, 20);
        frame.getContentPane().add(newPhoneAddress);

        JLabel lbl3 = new JLabel("Enter New Phone number:");
        lbl3.setBounds(215, 11, 140, 14);
        frame.getContentPane().add(lbl3);

        JButton btnAddNewContact = new JButton("Add new contact");
        btnAddNewContact.addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent arg0) {
                test.add( (new Book(newName.getText(), newAddress.getText(), newPhoneAddress.getText())));
                //mergesort.mergesort(test, 0, test.size() - 1);
                model.removeAllElements();
                for(int i=0; i < test.size();i++){
                    model.addElement(test.get(i).getContact()); 
                }
                comboBox.setModel(model);
                newName.setText(""); 
                newAddress.setText("");
                newPhoneAddress.setText("");
            }
        });
        btnAddNewContact.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
            }
        });
        btnAddNewContact.setBounds(10, 53, 335, 23);
        frame.getContentPane().add(btnAddNewContact);

        JLabel lbl4 = new JLabel("Current Contacts:");
        lbl4.setBounds(10, 87, 107, 14);
        frame.getContentPane().add(lbl4);

        comboBox.setModel(model);
        comboBox.setBounds(10, 101, 335, 20);
        comboBox.setSelectedIndex(test.size()-1);
        frame.getContentPane().add(comboBox);
    }
} 
```

这是我的对象：

```
public class Book implements Comparable {
     private String flName, Address, pNumber;

    public Book(String Name, String address, String phoneNumber ){
        setFlName(Name);
        setAddress(address);
        setpNumber(phoneNumber);
    }

    public String getpNumber() {
        return pNumber;
    }

    public void setpNumber(String pNumber) {
        this.pNumber = pNumber;
    }

    public String getAddress() {
        return Address;
    }

    public void setAddress(String address) {
        Address = address;
    }

    public String getFlName() {
        return flName;
    }

    public void setFlName(String flName) {
        this.flName = flName;
    }  

    public String getContact() {
        return flName + " " + Address + " " + pNumber;
    }

    public int compareTo(Object c) {
        Book testBook = (Book)c;

        if (testBook.getFlName().compareTo(this.getFlName()) < 0){
            return(-1);
        }else if(testBook.getFlName().compareTo(this.getFlName()) == 0){
            return(0);
        }else{
            return(1);
        }
    }

} 
```

现在，我再次不确定如何继续使 Arraylists 可序列化。我使用了对象，但没有使用Arraylists，所以我不知道它是否是同一个过程。我只是在寻求建议，或者一些关于使 ArrayLists 可序列化的优秀教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T00:25:59.307

使用[`ObjectInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)and [`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)，例如：

```
public static void saveArrayListToFile(ArrayList<Book> books, String filePath)
{
    ObjectOutputStream oos = new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(filePath)));
    oos.writeObject(books);
    oos.close();
}

// ...

public static ArrayList<Book> loadArrayListFromFile(String filePath)
{
    ObjectInputStream ois = new ObjectInputStream(new BufferedInputStream(new FileInputStream(filePath)));
    try
    {
        return (ArrayList<Book>) ois.readObject();
    }
    finally
    {
        ois.close();
    }
} 
```

请注意，`Book`类必须实现`Serializable`接口。我没有测试代码，但它应该可以工作。您可能需要尝试捕获上述代码中的任何异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T00:21:28.903

从[这里](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)`ArrayList`的文档：

> 所有实现的接口： **Serializable**、Cloneable、Iterable、Collection、List、RandomAccess

所以是的，它是可序列化的。这样做很容易，就像在 Java 中使用任何其他流一样，只需看看[`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)和 at [`ObjectInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)。

# cruisecontrol.net - Cruisecontrol.net 项目触发器超时

> ID：11025191
> 
> 赞同：1
> 
> 时间：2012-06-14T00:18:56.673
> 
> 标签：cruisecontrol.net

我有一个项目 B、C、D、E、F、G 依赖的项目 A（DAL 项目）。

我目前已经在 B、C、D、E、F、G 的配置中设置了项目触发器，当项目 A 成功构建时，这些触发器会导致项目重新构建。

但是，有些项目正在超时，因为所有其他项目都试图同时建造。

有没有办法错开构建或让他们重试构建失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:11:16.783

将它们全部放在同一个队列中。CCNet 只允许每个队列构建一个项目。

# python - 为什么这个 python 脚本不会输入到我设置的 MySQL 表中？

> ID：11025197
> 
> 赞同：1
> 
> 时间：2012-06-14T00:20:46.720
> 
> 标签：python, mysql, json, api, youtube

我正在尝试将 YouTube API 中的数据提取到本地 MySQL 表中。我经历了一堆调试，直到我登陆下面的脚本，但我没有从这个脚本中得到任何错误，所以我有点迷茫。任何人有任何建议从哪里开始？

```
#!/usr/bin/python
# -- coding: utf-8 --

import MySQLdb
import os
import requests
import json
import sys
import re
import requests
import datetime

sql_conn = MySQLdb.connect(host="localhost", user="root", passwd="PSWD", db="researchyoutube")
sql_conn.autocommit(True)
sql_db = sql_conn.cursor(MySQLdb.cursors.DictCursor)

resp = requests.get("https://gdata.youtube.com/feeds/api/videos?q=kitten&orderby=published&start-index=11&max-results=50&v=2&alt=jsonc")

if(resp.status_code == 200):
    data = json.loads(resp.content) 
    for item in data['data']['items']:

        title = item['title']
        uploaded_on = item['uploaded']
        description = item['description']
        video_length = item['duration']
        user = item['uploader']
        video_id = item['id']
        video_url = item['player']['default']

        sql = "INSERT IGNORE into NCII (title, uploaded_on, description, video_length, user, video_id, video_url) VALUES (title, uploaded_on, description, video_length, user, video_id, video_url)"

        sql_db.execute(sql) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:23:09.527

看起来您的`VALUES()`列表包含变量名称而不是适当的`%s`占位符

```
sql = "INSERT IGNORE into NCII (title, uploaded_on, description, video_length, user, video_id, video_url) VALUES (%s, %s, %s, %s, %s, %s, %s)"

# execute with the vars in a tuple
sql_db.execute(sql, (title, uploaded_on, description, video_length, user, video_id, video_url)) 
```

# objective-c - 在可可应用程序中打开另一个窗口的窗口的最佳设计模式

> ID：11025198
> 
> 赞同：0
> 
> 时间：2012-06-14T00:21:01.290
> 
> 标签：objective-c, macos, cocoa

我正在学习如何使用 Cocoa/Objective-C 创建 osx 应用程序。我正在编写一个简单的应用程序，它将我已经完成的两个不同的教程链接在一起。启动时，选择窗口会加载 2 个按钮，一个按钮加载一个窗口，另一个按钮加载另一个窗口。单击任一按钮时，选择窗口将关闭。

选择窗口控制器对象已添加到 MainMenu.xib 文件中，因此它是在启动时创建的。然后使用 awakeFromNib 消息打开窗口。

我想要一个按钮的结果来打开 ADC 网站上的“轨道控制器”教程应用程序。动作如下所示：

```
- (IBAction)trackButton:(id)sender {
    TMTrackController *trackController = [[TMTrackController alloc] init];
    [self.window close];
} 
```

我向 TMTrackController 类添加了一个 init 方法，如下所示：

```
- (id) init {
    if (self = [super init]) {
        [self showWindow];
        TMTrack *myTrack = [[TMTrack alloc] init];
        myTrack.volume = 50;
        self.track = myTrack;
        [self updateUserInterface];
        return self;
    }
    else {
        return nil;
    }
}

- (void) showWindow {
    if(!self.window) {
        [NSBundle loadNibNamed:@"trackWindow" owner:self];
    }
    [self.window makeKeyAndOrderFront:self];
} 
```

我不确定这是执行此操作的最佳方法，因为我知道choiceController 类在关闭时将被释放，从而也摆脱了 TMTrackController 类。但是，即使我取消勾选 ChoiceWindow.xib 的“关闭时释放”框，它也会中断。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:48:41.850

它不完全一样，但这是我对此类问题的解决方案：[Stackoverflow](https://stackoverflow.com/questions/10785265/show-modal-window-using-nib-file/10789149#10789149)

只需忽略我在此答案中关于将窗口显示为模式窗口的声明即可。其他一切仍然有效。这样你就可以拥有你的个人窗口控制器，它可以控制 xib 中的所有内容。这对于之后维护项目（并且您保持应用程序逻辑）是一个巨大的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:42:58.207

在同一个项目中使用 xib ：

```
@interface    

@property (strong) NSWindowController *test;

@implementation

@synthesize test; 

    test = [[NSWindowController alloc] initWithWindowNibName:@"XIB NAME HERE"];
    [test showWindow:self];
    [home close]; 
```

# ruby-on-rails - Rspec 检查 ActiveModel::Errors

> ID：11025205
> 
> 赞同：2
> 
> 时间：2012-06-14T00:21:59.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

有没有更好的方法来编写这个规范？这可行，***但***我不喜欢我必须调用`f.valid?`才能填充 f.errors 的事实。

```
it "fails to save the record because the name is blank" do
  f = Foo.new
  f.valid?
  f.errors.include?(:name).should be_true
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T00:56:51.910

```
it "fails to save the record because the name is blank" do
  Foo.create.errors.should include :name
end 
```

# sql-server - SQL Server - 批量插入列

> ID：11025207
> 
> 赞同：0
> 
> 时间：2012-06-14T00:22:04.113
> 
> 标签：sql-server, bulkinsert

我需要将 csv 文件插入 sql server db。问题是我不断得到一个

```
 Bulk load data conversion error (type mismatch or invalid character for
 the specified codepage)  error. this is repeated 10 times and 
 Msg 7399, Level 16, State 1, Line 1
The OLE DB provider "BULK" for linked server "(null)" reported an error.
The provider did not give any information about the error.
Cannot fetch a row from OLE DB provider "BULK" for linked server "(null)". 
```

错误的特定列是 bigint，主键，无空字段。我确保所有 5000 条记录都有一个 4 位数字并且没有空值。我厌倦了与此作斗争，只想将日期和数据值字段插入此表--CSResult。问题是 sql server 只是出错了，我认为它需要所有字段的值。有没有办法将数据插入到我想要的列中？有任何想法吗。

```
 BULK INSERT [DB].[CsSchema].[CsResult] (
     FROM 'c:\june132012.csv'
     WITH
     (
     FIELDTERMINATOR = ',',
     ROWTERMINATOR = '\n'
     ) 
```

这是数据的样子：

```
 3857,2011-05-19 04:00:00.000,Y,,82,N,N,,4,1,1,10,,1,,535/31706815
    3858,2011-05-19 02:23:00.000,Y,,128,N,N,,4,1,1,10,,1,,535/31706815 
```

这是 DDL：

```
 ResultID bigint notnull 
    ResultDate datetime,notnull
    HasValue CHAR 1, notnull 
    Duration int, null 
    DataValue decimal 19,9, notnull 
    IsEdited CHAR 1, notnull 
    IsAnnotated CHAR 1, notnull 
    AddOnValue decimal 19,9, null 
    DataTypeID FK, int, notnull 
    ResultTypeID FK smallint, notnull 
    PatientID FK, int, notnull 
    DataSourceTypeID FK, smallint, notnull 
    MedicationID FK, int, null 
     DataDownloadID FK, int, null 
    SlotTypeID FK,smallint, null 
    DataSourceIdentity nvarchar 20, null 
```

# javascript - 在 google 美化的 pre 元素中保留 html 字符？

> ID：11025210
> 
> 赞同：0
> 
> 时间：2012-06-14T00:22:42.740
> 
> 标签：javascript, jquery, syntax-highlighting

我试图通过`google-prettify`一些 jQuery 在我的 Tumblr 博客中包含语法高亮。

`Google-prettify`需要`<pre>`元素有一个类`prettyprint`才能突出显示语法，但由于我使用降价来创建我的 Tumblr 帖子，所以我无法向我的`<pre>`元素添加类。

我的解决方案是使用这个 jQuery 片段将`prettyprint`类附加到`<pre>`元素：

```
<script type='text/javascript'>
$(document).ready(function() {
      $('pre').addClass('prettyprint');
      prettyPrint();
});
</script> 
```

这工作正常，但我希望能够复制和粘贴我想在我的 Tumblr 上显示的代码，而不是每次我想发布代码片段时都转换`<`为`&lt;`和`>`转换。`&gt;`

使用 jQuery，我想用它们对应的 html 代码替换所有的`<`and `>`，但只能在`pre`元素内。然而，这可能会有一些问题，因为它需要在代码*美化*之前替换所有这些。

我可以附加新类，替换标签，然后调用`prettyPrint();`初始化所有内容吗？或者我应该在发布代码之前手动将 html 字符更改为 htmlentities 吗？

**小更新：** 此脚本适用于更改`<`and `>`，除了`<body>`,`<html>`和`<head>`...

```
<script type='text/javascript'>
$(function() {
   var $pre = $('pre');
   $pre.html($pre.html().replace(/</g, 'f').replace(/>/g, 'l'));
});
</script>

<pre>
    <html></html>
    <body></body>
    <head><head>
    <i></i>
</pre> 
```

*注意：我用作`f`替换只是为了测试代码。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:32:34.533

如果首先用实体替换所有 & 符号，然后是小于号，则可以将返回的字符串用作 a 中的文本节点`<pre>`，或者将其空白设置为“pre”的任何块容器。

```
function stripX(str){
    return str.replace(/\&(?!(\w+;))/g, '&amp;').replace(/</g, '&lt;');
} 
```

# javascript - iOS：使用 XMLHttpRequest 进行身份验证 - 处理 401 响应

> ID：11025213
> 
> 赞同：11
> 
> 时间：2012-06-14T00:23:03.847
> 
> 标签：javascript, ios, cordova, xmlhttprequest, basic-authentication

我正在使用 PhoneGap（又名 Cordova）编写一个 iOS 应用程序，我有一个简单的 html 登录页面，该页面使用 XMLHttpRequest 登录用户，并通过 SSL 进行基本身份验证。当您正确输入用户名和密码时，一切都会很好地工作。但是，如果您输入错误的用户名/密码，我的任何回调都不会被调用。

例如，如果您在 Chrome 上使用错误的用户名/密码运行相同的代码，则 chrome 会以类似的方式运行，除了它会弹出一个身份验证挑战对话框。在 chrome 的对话框上点击取消将控制权返回给我的 javascript 代码。不幸的是，在 iOS 上，UIWebView 甚至不会弹出身份验证对话框，它只是挂起。我需要一种方法来告诉用户他们输入了错误的用户名或密码，以便他们可以重试。

我能找到的最接近答案的是[http://www.freelock.com/2008/06/technical-note-http-auth-with-ajax](http://www.freelock.com/2008/06/technical-note-http-auth-with-ajax)但是从服务器更改响应状态似乎不像正确的事情。

这基本上是我的请求代码的样子，但是当发送错误的用户名或密码时，它永远不会到达我的 onload 回调（实际上，onreadystatechange 回调只被调用一次，这就是 readyState 1，又名 OPEN）。

```
var req = new XMLHttpRequest();
req.onload = function(ev) {
    if (req.status == 401) {
        alert("Invalid Username/Password");
        document.getElementById('password').focus();
    } else if (req.status == 200) {
        window.location.href = some_secure_site;
    } else {
        // edit //
        alert("Some other status");
    }
}
req.onerror = function (ev) { alert('Error'); };
req.ontimeout = function(ev) { alert('Timeout'); };
req.open('GET', uri, true, userValue, passValue);
req.withCredentials = true;
req.send(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:18:41.297

尝试在 iOS 上执行此操作时，一些事情对我来说变得很明显。一个是 iOS 存在与基本身份验证相关的错误，因此如果您的密码中包含某些特殊字符，您将永远不会从服务器收到响应，因为您的服务器将永远不会收到身份验证挑战。也就是说，如果您在“打开”方法中使用用户名和密码字段。

我的猜测是他们正在做一些愚蠢的事情，比如通过**http://username:password@myorigin.com/etc**发送它，而他们应该使用 http 标头和 base64 编码这样的凭据

```
req.setRequestHeader("Authorization", "Basic " + base64(username) + ':' + base64(password)); 
```

我学到的另一件事是基本身份验证不是很安全，而且容易出现一百万零一个问题。其中一个会让您烦恼的是客户端将缓存用户名和密码，这将覆盖您通过“req.open(...)”发送的任何新值。祝你好运，单独使用 javascript，你必须在 ObjC 中做一些魔法来清除缓存。

如果您可以控制您的服务器，我建议您使用令牌身份验证。通过 SSL 连接，然后发送带有包含用户名和密码的 JSON 数据的 POST。然后，服务器可以使用身份验证令牌发回 JSON 数据（本质上是一堆足够长的随机字符，以至于永远无法猜测，UUID 工作良好。这是由服务器生成的，只有客户端知道，并且服务器）。然后将令牌和用户名存储在钥匙串中，这样用户每次启动您的应用程序时都不需要输入他们的凭据。

我的服务器将始终发回 200 响应，但 JSON 数据将包含重试或存储身份验证令牌所需的信息。一般来说......基本身份验证基本上很烂。

```
try {
    var req = new XMLHttpRequest();
    req.onload = function(ev) {
        var response = JSON.parse(this.responseText);
        if (response.success === true) {
            // The server will respond with a token that will allow us to login
            storeCredentials(userValue, response.token);
            // redirect with token
        else if (req.status == 401) {
            alert("Invalid Username/Password");
            document.getElementById('password').focus();
        } else {
            alert("Some other status");
        }
    }
    req.ontimeout = setTimeout(function(ev) { navigator.notification.alert('Timeout trying to contact the server'); }, 10000);
    req.onerror = function(ev) { clearTimeout(this.ontimeout); navigator.notification.alert('Error connecting to the server during authentication.'); };

    var uri = myWebOrigin + '/authenticate';
    req.open('POST', uri, true);
    req.setRequestHeader('Cache-Control', 'no-cache');
    req.setRequestHeader('Content-Type', 'application/json');
    json_data = {username : Base64.encode(userValue), password : Base64.encode(passValue)};
    req.send(JSON.stringify(json_data));
} catch(error) {
    navigator.notification.alert('Uh oh, an error occurred trying to login! ' + error);
    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:20:45.823

我只是遇到了同样的问题，使用 iOS + PhoneGap + **jQuery**时没有调用任何回调。如果我通过不正确的凭据并使用

```
$.ajax({
    ...
    timeout: 5000, // Some timeout value that makes sense
    ...
}); 
```

然后使用 调用错误回调`{"readyState":0,"status":0,"statusText":"timeout"}`。在这种情况下，您将不得不猜测真正的错误是 HTTP 401。

或者，您可以使用

```
$.ajax({
    ...
    async: false, // :-(
    ...
}); 
```

你的错误回调会得到类似的东西`{"readyState":4,"responseText":"<html>...</html>","status":401,"statusText":"Unauthorized"}`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-15T14:39:40.507

要解决此问题，请`WWW-Authenticate`从服务器响应中删除标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T00:28:46.670

`401`除了收到的和代码之外，可能还有其他 HTTP 状态代码`200`！确保确实没有收到其他状态代码：

```
if (req.status == 401) {
    alert("Invalid Username/Password");
    document.getElementById('password').focus();
} else if (req.status == 200) {
    window.location.href = some_secure_site;
} else {
    alert('Unfetched status code '+req.status+' captured!');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T21:50:51.617

我遇到了同样的问题 - 如果传入无效凭据，则不会调用请求的任何回调。

我的猜测是，UIWebView 在内部被告知提示输入凭据，但该提示被抑制，导致此错误。这是基于我尝试过的所有其他浏览器（Safari、Chrome、Firefox）在这种情况下直到提示被解除后才调用回调。

另一种解决方案（我正在使用的解决方案）是不使用 Javascript 进行身份验证，而是在 iOS 端进行 - 您可以使用[如何在 UIWebView 中显示身份验证挑战的代码？](https://stackoverflow.com/questions/1769888/how-to-display-the-authentication-challenge-in-uiwebview)作为这样做的粗略模板。

# python - PySerial 无法识别或找到串行端口

> ID：11025218
> 
> 赞同：2
> 
> 时间：2012-06-14T00:24:30.260
> 
> 标签：python, serial-port, pyserial

在我的新戴尔 XPS 笔记本电脑上，我刚刚开始加载我所有的好东西——我很尴尬地说我无法让 pyserial 在 Python 2.7 中正常工作。我要求它执行以下操作：

```
import serial

s = serial.Serial(0)
s.write("Hello world!")
s.close() 
```

...而且该死的东西给了我以下内容（代码简化为真正的问题，因此您不必在我写得不好的 Python 的森林中擦洗）：

```
SerialException: could not open port COM1: 
[Error 2] The system cannot find the file specified. 
```

我尝试过明确要求端口（`s = serial.Serial(port="COM1", baudrate=9600`）但无济于事。我也尝试过 COM2、COM3、COM4 等......但我不确定如果它们都返回相同的 SerialException，它真的值得去多高，你挖吗？

我提到我的笔记本电脑型号的原因是因为我听说戴尔正在慢慢扼杀其串行连接，但坦率地说，我对串行性的了解还不够，甚至无法假装知道我在说什么这里。因此，我特此将这一使命交给各位专家。

谢谢你提供的所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:45:17.293

你确定你*有*串口？您对问题的描述表明您没有。如果在过去十年内制造的笔记本电脑真的有一台，我会感到非常惊讶。

不过我可能是错的（我在写这篇文章时试图在 XPS 的规格中找到它）。无论如何，如果您运行的是 Windows，您可以在端口（COM 和 LPT）下的设备管理器中查看......虽然要注意，有些 PC 会在此处显示几个实际上用于纯粹内部目的的串行端口。

如果您没有串口，则需要使用 USB 转串口适配器。在设备管理器中查找端口的名称。

您可以从一些电子商店或办公用品商店以及 eBay 购买 USB/串行适配器。

# python - Shopify Python API 和纺织品库存

> ID：11025222
> 
> 赞同：1
> 
> 时间：2012-06-14T00:25:03.673
> 
> 标签：python, shopify

我们是一家小型公平贸易纺织品进口商，最近在内部切换到 OpenERP 进行库存管理。我们在 Shopify 上有两家商店（使用两种不同的语言）。

从长远来看，我有两个目标：1）同步两家商店的库存；2）为 OpenERP 构建一个 Shopify 插件，在收到 Shopify 的电子邮件后导入销售。由于 OpenERP 本身是用 Python 编写的，我想使用 Shopify Python API。由于我们使用的纺织品通常具有不同的样式和尺寸，因此我们使用的是 Shopify 中的 SKU 和变体。

首先，我希望能够在每天午夜同步两家商店之间的库存。如果 A 店的库存数量低于 B 店，B 店应该得到 A 店的库存数量，反之亦然。

我目前最大的问题似乎是使用 Python API 获取 SKU 和库存计数的简单列表。理想情况下，我想获得两个简单的 SKU 列表及其库存计数，检查 Shop A 的变体是否存在于 Shop B 中，然后检查库存并在两者之间传播所需的更改。

但是，我似乎无法获得这样的列表，并且文档非常有限。唯一的可能性真的是首先获取所有产品，然后为每个产品获取变体，然后单独列出这些变体吗？所以我实际上需要围绕我认为非常简单的任务构建一个完整的数据库组织？

有人对这样的任务有任何经验吗？是否有任何进一步的文档或示例可供我查看？

非常感谢，克努特-奥托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:57:20.323

您最好的选择是首先将每个商店的所有产品和变体下拉到您身边的数据库中。之后，您可以收听产品/更新 webhook 和订单/付费 webhook，以提醒您应该进行的任何更改。

# php - PHP CLI - 在后台执行操作的同时获取用户输入

> ID：11025223
> 
> 赞同：2
> 
> 时间：2012-06-14T00:25:13.783
> 
> 标签：php, io, command-line-interface

我正在开发一个用 PHP 编写并在控制台中运行的游戏。回想一下旧的 MUD 和其他基于文本的游戏，甚至是一些 ASCII 艺术！

无论如何，我想做的是在接受用户输入的同时让事情发生。

例如，假设这是一个两人游戏，玩家 1 正在等待玩家 2 采取行动。这很容易通过只听消息来完成。

但是如果玩家 1 想要改变一些选项呢？如果他们想查看游戏状态各个方面的详细信息怎么办？丢球怎么办？在等待对手采取行动时，玩家可能想做很多事情。

不幸的是，我现在拥有的最好的是 Ctrl+C 完全杀死程序。然后让另一个玩家挂起，直到连接断开。哦，游戏完全输了。

我得到用户输入`fgets(STDIN)`。但这会阻止执行，直到收到输入（这通常是一件好事）。

像这样的控制台程序甚至可以同时处理输入和输出吗？还是我应该只看其他界面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T03:17:23.003

简而言之，PHP 不是为此而构建的，但您可能会从[这些扩展](http://www.php.net/manual/en/refs.utilspec.cmdline.php)之一中获得一些帮助。我不确定它们有多彻底，但您可能真的想使用文本 UI 库。（实际上您可能不想为此使用 PHP。）

`STDIN`综上所述，您需要逐个字符地获取非阻塞输入。不幸的是，从 PHP 的角度来看，大多数终端都是缓冲的，所以在按下 enter 之前你什么也得不到。

如果您`stty -icanon`在终端上运行（或您的操作系统的等效程序）以禁用缓冲，那么以下短程序基本上可以工作：

```
<?php

stream_set_blocking(STDIN, false);

$line = '';

$time = microtime(true);

$prompt = '> ';

echo $prompt;

while (true)
{
  if (microtime(true) - $time > 5)
  {
    echo "\nTick...\n$prompt$line";
    $time = microtime(true);
  }

  $c = fgetc(STDIN);
  if ($c !== false)
  {
    if ($c != "\n")
      $line .= $c;
    else
    {
      if ($line == 'exit' || $line == 'quit')
        break;
      else if ($line == 'help')
        echo "Type exit\n";
      else
        echo "Unrecognized command.\n";

      echo $prompt;
      $line = '';
    }
  }
} 
```

（它依赖于启用本地回显来在键入字符时打印字符。）

如您所见，我们只是永远循环。如果存在字符，请将其添加到`$line`. 如果按下回车，则处理`$line`。同时，我们每五秒打勾，只是为了表明我们在等待输入时可以做其他事情。（这将消耗最大的 CPU；你必须发出 a`sleep()`来解决这个问题。）

这本身并不是一个实际的例子，但也许会让你朝着正确的方向思考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:58:56.683

可以使用 ncurses（非阻塞模式）和 libevent 构建像您描述的游戏。这样，您几乎没有 CPU 消耗。处理单个键有时很尴尬（自己实现 Backspace，它一点也不好玩 - 你知道各种操作系统在 Backspace 按下时发送不同的键码吗？），如果你想正确支持 UTF-8，就会变得非常棘手。不过，完全可行。

特别是，通过读取网络和键盘 (stdin) 输入来广泛使用 libevent 是有益的。此函数使您能够侦听单个键： [http](http://www.php.net/manual/en/function.ncurses-cbreak.php) ://www.php.net/manual/en/function.ncurses-cbreak.php ，稍后您可以使用 libevent API 读取。要记住的关键是，有时您最终会一次阅读超过 1 个密钥，并且必须对其进行处理（因此遍历您已阅读的所有内容）。否则，用户会恼火地看到并非所有按键都“到达”应用程序并且有些按键丢失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:07:29.953

抱歉，马修，我将不得不不接受您的回答，因为我自己找到了：

使用以下代码在执行其他操作的同时接收用户输入：

```
while(/* some condition that the code running is waiting on */) {
    // perform one step or iteration of that code
    exec("choice /N /C ___ /D _ /T _",$out,$ret);
    // /C is a list of letters that do something
    // /D is the default action that will be used as a no-op
    // /T is the amount of time to wait, probably best set to one second
    switch($ret) {
        // handle cases - the "default" case should be "continue 2"
    }
} 
```

然后可以使用它来中断循环并进入选项菜单，或触发其他事件，或者如果使用正确，甚至可以用于输入命令。

# coldfusion - ColdFusion 日期逻辑

> ID：11025224
> 
> 赞同：2
> 
> 时间：2012-06-14T00:25:35.047
> 
> 标签：coldfusion

我很尴尬地承认，在日期和日期逻辑 ColdFusion 方面我并不是最出色的。

```
<!---checks frequency for form schedule and sets datepart. RecordType_Frequency is a column in database daily, weekly, monthly etc.--->

<CFSWITCH expression="#RecordType_Frequency#">
     <CFCASE value="Daily">
       <CFSET datepart = "d">
     </CFCASE>
     <CFCASE value="Weekly">
       <CFSET datepart = "ww">
     </CFCASE>
     <CFCASE value="Monthly">
       <CFSET datepart = "m">
     </CFCASE>
     <CFCASE value="Quarterly">
       <CFSET datepart = "q">
     </CFCASE>
     <CFCASE value="Yearly">
       <CFSET datepart = "yyyy">
     </CFCASE>
</CFSWITCH>

 <!---setting dates based on database values for when the form should schedule--->

 <!---enddate Uses the RecordType_Frequency_StartDate column from the database which is a date in the past. Coefficient is a stored db value for the frequency 1,2 etc. for could scheduled every 1 year, 2 year --->

 <cfset enddate = datediff(datepart,RecordType_Frequency_StartDate,todaydate) + Coefficient>

 <!---start date is set to current RecordType_Frequency_StartDate which is a column   value from the database--->

 <cfset startdate = RecordType_Frequency_StartDate>

 <!---sets the next start date for when the for should schedule based on historic db start date--->

 <cfset new_date = dateformat(DateADD(datepart,Coefficient,startdate),'MM-DD-YYYY')>

 <cfloop from="1" to="#enddate#" index="i">

   <cfset new_date = dateformat(DateADD(datepart,Coefficient,startdate),'MM-DD-YYYY')>

   <cfset startdate = new_date>

   <cfset diff = datediff(datepart,RecordType_Frequency_StartDate,startdate)>

   <cfif (startdate GT todaydate)>

      <cfset next_date= startdate>

  <cfoutput>

    <!---I need this output to equal the next date value that would fall based on the schedule, future date. I am seeing multiple dates and need to figure out how to capture would weould truly be the next scheduled date---> 

     Next Date = #diff# - #dateformat(next_date)#<br />

  </cfoutput>

 </cfif>

  </cfloop> 
```

总之，我有一些按计划进行的表格。开始/设置日期是我必须使用的唯一日期。我需要使用我拥有的信息来获取或填充表单的下一个预定日期。显然，下一个创建日期需要在未来，因为该日期将与预定事件一起使用。

我已经发布了带有注释的代码，需要帮助来获取最接近当前日期的下一个逻辑日期，该日期应该按顺序排列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:58:44.957

[http://cfquickdocs.com/#DateAdd](http://cfquickdocs.com/#DateAdd)

如果您只需要下一个可能的日期，请使用 dateadd() 函数。

例如，如果您想在下一个工作日使用：`dateadd("w", 1, now())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:10:42.817

假设我了解您的问题，那么我不久前写的 UDF 可能会解决您的问题：

[http://www.bryantwebconsulting.com/blog/index.cfm/2011/2/24/EnglinshFriendly-Interval-Calculation](http://www.bryantwebconsulting.com/blog/index.cfm/2011/2/24/EnglinshFriendly-Interval-Calculation)

在“interval”参数的其他几个选项中，它还应该接受您在 switch 块中使用的选项。

# c++ - 无法理解逗号表达式

> ID：11025231
> 
> 赞同：3
> 
> 时间：2012-06-14T00:26:16.563
> 
> 标签：c++, numbers, operator-keyword, comma

```
#include <iostream>
using namespace std;
int main()
{
    int a, b, c, max;
    cout<<"a="; cin>>a;
    cout<<"b="; cin>>b;
    cout<<"c="; cin>>c;
    a>b?(max=a, a=b, b=max):a;
    b>c?(max=b, b=c, c=max):a;
    a>b?(max=a, a=b, b=max):a;
    cout<<a<<"  "<<b<<"  "<<c;
} 
```

这是一个代码，您可以在其中输入 3 个随机数，并将它们按顺序排列。但是，我不明白这部分：

```
a>b?(max=a, a=b, b=max):a;
b>c?(max=b, b=c, c=max):a;
a>b?(max=a, a=b, b=max):a; 
```

它是如何工作的，为什么？

假设`a = 6`,`b = 54`和`c = 12`。

1.  a>b?(max=a, a=b, b=max):a; <-- 将 max 设置为 6，然后将 a 设置为 54，然后 54=max。然后比较 6 和 54 哪个是假的，并写一个 (6) 作为第一个数字？

2.  b>c?(max=b, b=c, c=max):a; <-- 将最大值设置为 54，b=12，12=最大值。然后将 54 与 12 进行比较，这在我们的例子中是正确的，并将 c=12 写为第二个数字？

3.  a>b?(max=a, a=b, b=max):a; <-- 将最大值设置为 6，a=54，54=最大值。然后将 6 与 54 进行比较，这是错误的并再次写入 6，wtf？

该程序本身可以正常工作。我只是不明白算法是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T00:29:29.537

这：

```
cond ? A : B 
```

大致*相当于*：

```
if (cond) {
    A;
} else {
    B;
} 
```

这：

```
(X, Y, Z) 
```

大致*相当于*：

```
X;
Y;
Z; 
```

即，依次对每个表达式进行完全评估。

使用这两个规则，您应该能够跟踪代码的执行。然而，该代码是怪诞的，不应该这样写。所以我的建议是忽略它，并正确编写算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T00:33:37.680

所有代码所做的都是滥用逗号运算符在一个语句中执行多项操作以交换值的能力。

第一行查找前两个数字的最大值。第二个找到那个和第三个的最大值，所以它现在找到了三个中的最大值。第三行随后按顺序对其他两个进行排序。

它与此大致相同：

```
if (a > b)
    swap (a, b); //b is max(a,b)
if (b > c)
    swap (b, c); //c is max(max(a,b),c), which is largest
if (a > b)
    swap (a, b); //b is max (a, b), so numbers are in order smallest to largest 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T00:36:54.013

```
a>b?(max=a, a=b, b=max):a 
```

最后的 ":a" 真的什么也没做，它可以很容易地是 ":0"。如果“a>b”为假，则本质上是要执行的语句。但由于 a 没有分配给任何东西，它什么也不做。所以在这种情况下

```
if(a > b){
    max = a;
    a = b;
    b = max;
} 
```

它使用 max 变量来交换 a 和 b；SAME 算法用于以下两行。所以本质上

```
if a > b then swap them
now if b (which could hold a) > c then swap them
now if a (which could hold the older b) > b(which could hold the oldest c) then swap 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T00:36:31.830

好吧，基本上我就是这样。

```
a>b?(max=a, a=b, b=max):a; 
```

第一部分只是三级 if 语句形式的普通比较，所以基本上它检查 if `a>b`, then`?`是否等于第一个括号集，所以如果它为真，它会评估第一部分，否则之后的代码`:`就是像 else 一样被评估..`(max=a, a=b, b=max)`基本上依次评估每个项目，所以 first`max`设置为`a`，然后`a = b`和 finally `b = max`; 其他两行也一样。

你可以在这里阅读更多：[http ://www.cplusplus.com/doc/tutorial/operators/](http://www.cplusplus.com/doc/tutorial/operators/)

希望这有帮助。

# javascript - javascript链接不起作用

> ID：11025232
> 
> 赞同：0
> 
> 时间：2012-06-14T00:26:33.083
> 
> 标签：javascript, hyperlink

这让我有点发疯。Javascript 链接应该触发函数来填充 div。但不工作。

**js**

```
function showNotes(notes,id) {
    var notes = '<form action="editnotes.php" method="post"><textarea>'+notes+'</textarea><input type="hidden" name="id" value="'+id+'"><input type="submit" name="submit" value="Save Notes"></form>';
    var target = 'notebox';
    alert(id);
    document.getElementById(target).innerHTML = notes;
    return false; 
} 
```

**html**

```
<a href='#' onclick='showNotes('hi there','143');'><small>Show Notes</small></a>
<div id="notebox"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T00:29:00.443

用双引号将`onclick`属性值括起来，这样单引号在您的字符串中指定一个字符串。

```
onclick="showNotes('hi there','143');" 
```

[http://jsfiddle.net/77CKx/](http://jsfiddle.net/77CKx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:32:21.613

Shredder 抓住了问题的核心。您有嵌套引号。然而，内联 JS 并不酷。用脚本来做，问题就消失了。[http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/](http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/)

**HTML**

```
<a href="#" id="shownotes"><small>Show Notes</small></a> 
```

**JS**

```
document.getElementById('shownotes').onclick = function() {
   showNotes('hi there', '143');
   return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T00:33:41.917

似乎您正在通过对函数参数使用单个撇号来破坏 onclick。

尝试

```
<a href='#' onclick="showNotes('hi there','143');"><small>Show Notes</small></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T00:41:40.483

工作代码：

```
showNotes = function (notes,id) {
    var notes = '<form action="editnotes.php" method="post"><textarea>'+notes+'</textarea><input type="hidden" name="id" value="'+id+'"><input type="submit" name="submit" value="Save Notes"></form>';
    var target = 'notebox';
    alert(id);
    document.getElementById(target).innerHTML = notes;
    return false; 
}​

<a href='#' onclick="showNotes('hi there','143');"><small>Show Notes</small></a>
<div id="notebox"></div>​ 
```

您还可以在此处查看它的工作情况：http: [//jsfiddle.net/ZMZGk/13/](http://jsfiddle.net/ZMZGk/13/)

# android - 如何在两个不同的 Android 应用程序之间共享 SharedPreferences 文件？

> ID：11025234
> 
> 赞同：21
> 
> 时间：2012-06-14T00:26:49.103
> 
> 标签：android, android-intent, sharedpreferences, android-context

我已经为此苦苦挣扎了一段时间。基本上，我希望有两个应用程序（将始终安装在一起）共享首选项，其中一个只是在后台运行并需要使用首选项的服务（应该拥有首选项，但只*需要*阅读它们) 并且另一个应用程序是前端 UI 应用程序，它需要能够写入另一个应用程序拥有的首选项文件。该服务将在后台执行操作（可能由首选项决定），用户界面将允许用户编辑首选项并查看来自服务的一些信息。但是，它们将是不同的包/应用程序。

我尝试按照[本教程](http://thedevelopersinfo.com/2009/11/25/getting-sharedpreferences-from-other-application-in-android/)进行操作，它让我很好地了解了如何在一个应用程序中设置可以被另一个应用程序读取的首选项。本质上，我通过创建一个新上下文`myContext = createPackageContext("com.example.package",Context.MODE_WORLD_READABLE + Context.MODE_WORLD_WRITEABLE);`然后调用`myContext.getSharedPreferences("pref_name", Context.MODE_WORLD_READABLE + Context.MODE_WORLD_WRITEABLE);`但是，我无法从外部应用程序成功写入首选项 - (SharedPreferences.Editor).commit() 返回 false，并且我在 logcat 中收到有关无法编辑的警告pref_name.xml.bak。

如何成功设置我的应用程序，以便它们都可以读取和写入相同的首选项文件（存储在其中一个的数据文件夹中）？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-07-15T00:14:30.497

最好为文件设置私有模式。应用程序需要使用相同的证书集签名才能共享此文件。

将两个应用程序中的 sharedUserId 设置为相同。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.hello"
android:versionCode="1"
android:versionName="1.0" 
android:sharedUserId="com.example">
.... 
```

从其他包获取上下文：

```
mContext = context.createPackageContext(
                        "com.example.otherapp",
                        Context.MODE_PRIVATE);
 mPrefs = mContext.getSharedPreferences("sameFileNameHere", Activity.MODE_PRIVATE); 
```

像往常一样从 SharedPreference 获取项目。您现在可以访问它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T00:26:49.697

首先，我应该注意，这不是官方支持的，尽管将来可能会在 Android 中添加一种受支持的方法（即不会是这种方法）（这两种说法的来源：请参阅[此链接](http://developer.android.com/reference/android/content/SharedPreferences.html)的第二段） .

**同样，这是不受支持的，而且很可能不稳定。我主要是作为一个实验来做的，看看它是否可能。如果您打算将此方法实际合并到应用程序中，请格外小心。**

但是，如果满足一些要求，似乎可以在应用程序之间共享首选项。首先，如果您希望 App B 能够访问 App A 的首选项，则 App B 的包名必须是 App A 的包名的子项（例如 App A: `com.example.pkg`App B: `com.example.pkg.stuff`）。此外，他们不能同时访问文件（我假设在活动之间访问它们的规则相同，如果您想确保原子访问，则必须使用额外的保护措施，例如 .wait( ) 和 .notify()，但我不会在这里讨论）。

*注意：所有这些都适用于 2.2 和 2.3.3 的模拟器——我没有在设备或安卓版本上进行广泛的测试。*

**在将拥有偏好的应用程序中要做的事情（上面的应用程序 A）：**

**1.) 声明 SharedPreferences 文件**
这相当简单。只需为您的 sharedpreferences 文件和类中的编辑器声明几个变量，然后在您的 onCreate 方法中实例化它们。您现在可以在首选项中放置一个字符串，您将使用它来确保其他应用程序可以正确读取它。

```
public class stuff extends Activity {
    SharedPreferences mPrefs = null;
    SharedPreferences.Editor mEd= null; 
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mPrefs = (getApplicationContext()).getSharedPreferences("svcprefs", Context.MODE_WORLD_READABLE + Context.MODE_WORLD_WRITEABLE);
        mEd = mPrefs.edit();
        mEd.putString("test", "original send from prefs owner");
        mEd.commit(); 
```

**2.) 设置备份文件** getSharedPreferences 方法似乎是检查 .bak 文件以从中加载首选项。这就是为什么它在文档中说它不能跨多个进程工作；为了最大限度地减少 I/O，它会在您抓取首选项时加载它们一次，并且仅在您关闭应用程序/活动时备份它们。但是，如果您从外部应用程序调用它，您将收到有关该文件夹（这是第一个应用程序的数据文件夹）没有正确文件权限的警告。为了解决这个问题，我们将自己创建 .bak 文件并使其公开可读/可写。我选择这样做的方法是在我的整个班级中定义三个变量。

```
final String[] copyToBackup = { "dd", "if=/data/data/com.example.pkg/shared_prefs/prefs.xml", "of=/data/data/com.example.pkg/shared_prefs/prefs.xml.bak", "bs=1024" };
final String[] mainFixPerm = {"chmod", "666", "/data/data/com.example.pkg/shared_prefs/prefs.xml"};
final String[] bakFixPerm = {"chmod", "666", "/data/data/com.example.pkg/shared_prefs/prefs.xml.bak"}; 
```

并在我的主类中创建一个函数，它将这些作为参数并执行它们

```
public void execCommand(String[] arg0){
     try {
         final Process pr = Runtime.getRuntime().exec(arg0);
         final int retval = pr.waitFor();
         if ( retval != 0 ) {
             System.err.println("Error:" + retval);
         }
     }
     catch (Exception e) {}
} 
```

它不是非常漂亮或非常好，但它确实有效。现在，在您的 onCreate 方法中（就在 editor.commit() 之后），您将使用三个字符串中的每一个调用此函数。

```
execCommand(copyToBackup);
execCommand(mainFixPerm);
execCommand(bakFixPerm); 
```

这将复制文件并使外部程序可以访问主 .xml 和 .xml.bak 文件。您还应该在 onDestroy() 中调用这三个方法，以确保在您的应用程序退出时正确备份数据库，并在您在应用程序的其他地方调用 getSharedPreferences 之前另外调用它们（否则它将加载 .bak 文件如果另一个进程一直在编辑主 .xml 文件，则可能已过期）。不过，这就是您在此应用程序中需要做的所有事情。您可以在此活动的其他地方调用 getSharedPreferences，它会从 .xml 文件中获取所有数据，然后允许您调用 getdatatype("key") 方法并检索它。

**在访问文件中要做的事情（上面的 App B）**

**1.) 写入文件**
这更简单。我在这个活动上做了一个按钮，并在它的 onClick 方法中设置了代码，这会将一些东西保存到共享首选项文件中。请记住，应用 B 的包必须是应用 A 的包的子级。我们将基于 App A 的上下文创建一个上下文，然后在该上下文上调用 getSharedPreferences。

```
prefsbutton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Context myContext = null;
        try {
            // App A's context
            myContext = createPackageContext("com.example.pkg", Context.MODE_WORLD_READABLE + Context.MODE_WORLD_WRITEABLE);
        } catch (NameNotFoundException e) {e.printStackTrace();}

        testPrefs = myContext.getSharedPreferences("svcprefs", Context.MODE_WORLD_READABLE + Context.MODE_WORLD_WRITEABLE);
        testEd = testPrefs.edit();
        String valueFromPrefs = testPrefs.getString("test", "read failure");
        TextView test1 = (TextView)findViewById(R.id.tvprefs);
        test1.setText(valueFromPrefs);
        testEd.putString("test2", "testback");
        boolean edit_success = testEd.commit(); 
```

这会抓取我在其他应用程序中设置的字符串，并在此应用程序的文本视图中显示它（或错误消息）。此外，它在首选项文件中设置一个新字符串并提交更改。运行后，如果您的其他应用程序调用 getSharedPreferences，它将检索包含此应用程序更改的文件。

# git - 撤消失败的合并时git删除文件

> ID：11025242
> 
> 赞同：2
> 
> 时间：2012-06-14T00:28:22.350
> 
> 标签：git, reset, git-merge

我已经合并`master`到我的`bugXY`分支中，需要合并一个文件。但是`git mergetool`失败了（我猜是我的菜鸟错），即使我中止了合并，它也给我留下了一个肮脏的工作目录，但没有处于需要合并的状态。我想重复合并命令，但由于合并留下了一些新文件，我不能。

如何撤消合并（我没有提交任何内容）并准确获取之前的工作目录？

我做了什么：

```
> git checkout bugXY
On branch "bugXY" - nothing to commit
> git merge master
[modifying and adding lots of files]
one file with conflict
On branch "bugXY|MERGING"
> git mergetool
You could use a, b or c
merged // didn't work, no GUI appeared and I did not do anything
do you want to remove, commit or abort?
> abort // Hu, what happened?
On branch "bugXY" // no MERGING any more??? 
```

哎呀，我做了什么？重复`git merge`不起作用，我现在已经更改（并暂存）工作目录中的文件。好的，撤消它。我试过了：

```
> git reset --hard HEAD 
```

和

```
> git checkout bugXY 
```

现在什么都没有上演，但我仍然有一堆*未跟踪的工作树文件*阻碍我`git merge`再次（“将被覆盖，请 [re]move them”）。我怎样才能做到这一点？我想`rm path/to/file.php`他们每个人都会工作，但他们中有很多......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T02:46:15.690

如果您不进行试运行，则显示 git 将清除的文件：

```
git clean -ndx 
```

真正从工作树中清除所有这些文件：

```
git clean -fdx 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T14:35:51.160

`git merge`手册说：

> --中止
> 
> 中止当前的冲突解决过程，并尝试重建预合并状态。

所以我会尝试`git merge --abort`重新开始。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T02:05:10.357

git reset --hard HEAD 重置索引和工作树。此后对工作树中跟踪文件的任何更改都将被丢弃。

如果您在运行 reset 命令之前没有提交文件，那么它们会被 reset 命令清除。您拥有的选项之一是使用 git reset --hard 它将您重置回提供的提交的状态。

希望这对你有帮助。

# ruby - 获取网页源

> ID：11025246
> 
> 赞同：1
> 
> 时间：2012-06-14T00:28:59.490
> 
> 标签：ruby, shell, firefox

我正在尝试获取网页源。我用了：

```
 $ curl --user name:password www.example.com 
```

但这给了我登录页面的页面来源。我想在登录后获取页面源。

我也试过 wget 但没有成功。

我不能使用 nokogiri 和其他红宝石等。

有什么方法可以从命令行使用 firefox 来获取页面源，还是有其他方法可以获取页面源？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:37:46.150

> 有什么办法可以从命令行使用firefox来获取页面源...

[您可以通过Selenium WebDriver](http://code.google.com/p/selenium/wiki/GettingStarted)编写 Firefox（以及其他浏览器）脚本。对于 Ruby 绑定，请参阅[RubyBindings](http://code.google.com/p/selenium/wiki/RubyBindings)。

* * *

**编辑：**你说你不能使用“其他 Ruby gems”，所以我猜 Selenium Web Driver 不是一个选项。还有[Selenium IDE](http://seleniumhq.org/projects/ide/)，这是一个 Firefox 扩展，您可以使用它并基本上记录您自己登录的宏。然后您可以从命令行调用测试。这可能有帮助，也可能没有帮助，具体取决于您要执行的操作。

* * *

[或者，您可以通过发送](https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request)带有您需要的值的 POST 请求来使用 cURL 登录。如果您需要获取请求后返回的第一页以外的任何内容的来源，则需要使用该`--cookie-jar`选项来保存会话以供后续请求使用。

# php - 在 PHP 中声明多个变量的正确方法

> ID：11025250
> 
> 赞同：60
> 
> 时间：2012-06-14T00:29:27.310
> 
> 标签：php, variables

多年来，我一直在用 PHP 编写个人脚本，并且习惯于关闭错误显示。我即将发布其中一些脚本，并希望以正确的方式进行。

我关闭错误显示的唯一原因是避免在使用它之前测试每个单独的 var，这要归功于 isset()。

所以，这是我的问题：

**有没有比这更好的方法来声明多个变量？**

```
<?php
  // at the begining of my main file
  if (!isset($foo))  ($foo = '');
  if (!isset($bar))  ($bar = '');
  if (!isset($ping)) ($ping = '');
  if (!isset($pong)) ($pong = '');
  // etc. for every single var
?> 
```

例如这样的事情：

```
<?php
  var $foo, $bar, $ping, $pong;
?> 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-14T00:39:51.173

```
<?php
  $foo = $bar = $ping = $pong = '';
?> 
```

如果它是你的脚本并且你知道你在哪里使用了哪些变量，为什么你要花费资源来检查变量是否之前被声明过？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-15T01:51:50.557

我之前在评论中发布了这个，但有人建议我将其作为答案提交。

我能想到的最短和最简单的方法是：

```
$foo = $bar = $ping = $pong = ''; 
```

我通常更喜欢将事物设置为 false，而不是空字符串，这样您以后总是可以使用 === false 进行检查，但这只是一种偏好，取决于您如何使用这些变量以及用于什么目的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-14T00:32:20.053

你`if()`的`isset()`尝试是这样做的正确方法！

但是您可以使用[三元运算符](http://php.net/manual/language.operators.comparison.php#language.operators.comparison.ternary)将其写得更短/更具可读性：

```
$foo = isset($foo) ? $foo : ''; 
```

当 之后的条件为真时，第一个`$foo`将设置为 之后的值，否则将设置为 之后的值。条件（介于和）将始终转换为布尔值。`?``=``:``=``?`

从 PHP 5.3~~开始，你可以写得更短~~：

```
$foo = isset($foo) ?: ''; 
```

正如@Decent Dabbler 在评论中指出的那样，这将设置`$foo`为`TRUE`或`FALSE`（取决于返回的内容）。`isset()`删除`isset()`会将其设置为，`''`但也会引发未定义的变量通知（虽然不在生产中）。

从 PHP 7 开始，您可以使用 null 合并运算符：

```
$foo = $foo ?? ''; 
```

这不会引发任何错误，但它会评估为`TRUE`存在`$foo`且为空，与速记三元运算符相反，它将评估为`FALSE`变量为空。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-14T00:34:02.657

这样做的一种有点迂回的方法是，如果您将变量的名称放在一个数组中，然后使用三元运算符循环它们，类似于`powtac`的答案。

```
$vars = array('foo', 'bar', 'ping', 'pong');
$defaultVar = '';

foreach($vars as $var)
{
    $$var = isset($$var) ? $$var : $defaultVar;
} 
```

如其他答案所述，从 5.3 版开始，PHP 允许您将上述代码编写如下：

```
$vars = array('foo', 'bar', 'ping', 'pong');
$defaultVar = '';

foreach($vars as $var)
{
    $$var = isset($$var) ?: $defaultVar;
} 
```

请注意更改后的三元运算符。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-01T14:59:17.717

在 OOP 中，您可以使用这种方法：

```
protected $password, $full_name, $email; 
```

对于非 OOP，您只需在代码中声明它们，如果您没有为它们分配任何值，它们将是未定义的：

```
$foo; $bar; $baz;

$set_foo =  (isset($foo)) ? $foo : $foo = 'Foo';
echo $set_foo; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T00:34:23.397

为什么不直接设置它们？

```
<?php
$foo = '';
$bar = '';
//etc
?> 
```

如果您试图保留其中的价值，那么是的，这通常是正确的方法。请注意，您的语句中不需要第二对括号：

```
if (!isset($foo)) $foo = ''; 
```

足够的。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-09-29T04:18:34.557

To fix the issue of

```
 <?php
  $foo = $bar = $ping = $pong = '';
  ?> 
```

throwing

> Notice: Undefined variable: ...

```
 <?php
  @$foo = $bar = $ping = $pong = '';
  ?> 
```

It will not fix it but it will not be shown nd will not stop the script from parsing.

# deserialization - 我可以将 ServiceStack Deserialize json 值 1 设为 true 吗？

> ID：11025253
> 
> 赞同：1
> 
> 时间：2012-06-14T00:30:13.300
> 
> 标签：deserialization, servicestack

我可以将 ServiceStack Deserialize json 值 1 设为 true 吗？
这是一个显示我想要做的单元测试。这可能吗？如果是这样怎么办？

```
public class Foo
{
    public bool isWorking { get; set; }
} 
```

...

```
[Test]
public void Deserialise1AsBoolean()
{
    var json = @"{""isWorking"": 1}";
    var myFoo = json.FromJson<Foo>();
    Assert.IsTrue(myFoo.isWorking);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:06:23.893

这现在已[内置到 ServiceStack.Text 中，此提交](https://github.com/ServiceStack/ServiceStack.Text/commit/d783775e25b9bd74ea9bb731c3ffc7e536873c4b)可从 v3.9.55+ 获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:41:20.747

**编辑**这是我的解决方案，但也请查看 Mythz，因为我相信这也可以。

我反序列化为自定义结构`MyBool`而不是`bool`.
这是 MyBool 结构的代码。

```
public struct MyBool
{
    public bool Value { get; set; }

    public static MyBool Parse(string value)
    {
        return new MyBool {Value = (value == "1" || value=="true")};
    }

    public override string ToString()
    {
        return Value.ToString(CultureInfo.InvariantCulture);
    }

    public static implicit operator bool(MyBool lValue)
    {
        return lValue.Value;
    } 
```

并将 Foo 更改为：

```
public class Foo
{
    public MyBool isWorking { get; set; }
} 
```

欢迎批评。

# matlab - 从 Matlab 中现有的 2d 矩阵创建 3d 矩阵

> ID：11025255
> 
> 赞同：0
> 
> 时间：2012-06-14T00:30:37.917
> 
> 标签：matlab, 3d, matrix, 2d

我有一个尺寸为 64 x 727 的 2D 矩阵。我想做的是分离每一列，创建一个尺寸为 64 x 1 x 727 的 3D 矩阵。

我在这里查看了几个类似的问题，但我有限的 matlab 能力阻止我将以前的答案应用于我自己的问题。

非常感谢，

罗比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:33:55.263

尝试这个：

```
x2d = rand(64, 727);
x3d = reshape(x2d, 64, 1, 727); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:33:32.203

尝试

```
reshape(matrix,64,1,727) 
```

如果这不能产生你想要的进一步解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T19:03:47.720

利用：

```
permute(matrix,[1 3 2]) 
```

切换第二和第三维度

# java - 排序 int 字符串 java

> ID：11025260
> 
> 赞同：-6
> 
> 时间：2012-06-14T00:31:21.380
> 
> 标签：java, sorting

我的 TXT 文件包含以下内容：

> Škoda Fábia
> farba: Červená
> 05050
> 
> Škoda Fábia
> farba: Metalíza
> 53498
> 
> Škoda Fábia
> farba: Metalíza
> 46538
> 
> Škoda Fábia
> farba: Červená
> 21849
> 
> Škoda Fábia
> farba: Biela
> 10219

怎么能按数字排序，让这3个信息不分开呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:45:58.130

这个问题被否决的原因是：

1.  [没有表现出任何努力。告诉我们您尝试过什么以及您知道什么。](https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not/128553#128553)
2.  我们喜欢代码。请向我们展示您的代码。即使是非工作的。
3.  如果一个人思考这个问题一段时间，未回答的问题就会开始出现。例如：
    *   所有的数字都是6位数字吗？
    *   如果不是，是`05050`小于还是大于`5051`？

也就是说，这是你的答案：

1.  将汽车读入某种结构。一个类将是完美的（如果这种排序是唯一有用的，则`Car`可以有自己的方法）。`compareTo()`或者只`String[]`为每辆车使用 a，因此最终得到一系列汽车 ( `String[][]`)。
2.  如果它们是[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)，则像[这样](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28java.lang.Object[]%29)对它们进行排序，或者使用自定义[Comparator像](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)[这样](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T[],%20java.util.Comparator%29)对它们进行排序。

一个例子（如果可以的话，使用一个`SkodaCar`类而不是那个东西）：`String[]`

```
// every car is a String[3]
String[][] cars = loadCars();
Comparator<String[]> skodaCarComparator = new Comparator<String[]>() {
    @Override
    public int compare(String[] o1, String[] o2) {
        // compares the numbers as Strings using String's compareTo()
        return o1[2].compareTo(o2[2]);
    }
}; 
Arrays.sort(cars, skodaCarComparator); 
```

# ios - 捆绑资源的安全性

> ID：11025263
> 
> 赞同：0
> 
> 时间：2012-06-14T00:31:53.423
> 
> 标签：ios

我有一个应用程序来展示一些存储为捆绑资源的机密文件。我担心的是拥有越狱设备的人可以直接访问捆绑资源。有没有办法加密捆绑资源并保护它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:06:15.583

理想情况下，我会在激活后从服务器中提取数据。除非是（如果是大量数据），我会根据随机密钥加密数据，然后在激活期间将该密钥提供给应用程序。要点是您不想将未加密的数据提供给您不想拥有它的用户。

# javascript - 遍历 Javascript 正则表达式匹配以修改原始字符串

> ID：11025264
> 
> 赞同：5
> 
> 时间：2012-06-14T00:32:07.253
> 
> 标签：javascript, regex

只是想知道在字符串上替换就地匹配的最佳方法。

```
value.replace("bob", "fred"); 
```

例如，可行，但我希望将“bob”的每个实例替换为我存储在数组中的随机字符串。只是进行正则表达式匹配会返回匹配的文本，但不允许我在原始字符串中替换它。有没有一种简单的方法可以做到这一点？

例如，我希望字符串：

```
"Bob went to the market. Bob went to the fair. Bob went home" 
```

可能会弹出

```
"Fred went to the market. John went to the fair. Alex went home" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T00:37:07.413

您可以替换为函数调用的值：

```
var names = ["Fred", "John", "Alex"];
var s = "Bob went to the market. Bob went to the fair. Bob went home";
s = s.replace(/Bob/g, function(m) {
    return names[Math.floor(Math.random() * names.length)];
}); 
```

这给出了例如：

```
"John went to the market. Fred went to the fair. John went home" 
```

# javascript - $(document).ready 和 $('#id').change 产生不同的结果

> ID：11025265
> 
> 赞同：0
> 
> 时间：2012-06-14T00:32:11.300
> 
> 标签：javascript, ajax, jquery

[网站在这里](http://www.guestvibe.com/index.php)。

为什么代码适用于`$('#club').change(function(event)`但不适用于`$(document).ready(function()`？功能是相同的`$.ajax`，但前者根本什么都不做。

```
<script type="text/javascript">

    $(document).ready(function() {
        $.ajax({
            type: "post",
            url: "eventinfo.php",
            data:  $(this).serialize(),
            success: function(data) {
                $('#right_inside').html('<h2>' + $('#club').val() + '<span style="font-size: 14px"> (' + data[0].day + ')</h2><p>Entry: ' + data[0].entry + '</p><p>Queue jump: ' + data[0].queuejump + '</p><p>Guestlist closes at ' + data[0].closing + '</p>');
                },
            dataType: "json"
        });
    });

    $('#club').change(function(event) {
        $.ajax({
            type: "post",
            url: "eventinfo.php",
            data:  $(this).serialize(),
            success: function(data) {
                $('#right_inside').html('<h2>' + $('#club').val() + '<span style="font-size: 14px"> (' + data[0].day + ')</h2><p>Entry: ' + data[0].entry + '</p><p>Queue jump: ' + data[0].queuejump + '</p><p>Guestlist closes at ' + data[0].closing + '</p>');
                },
            dataType: "json"
        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T00:38:19.597

提出请求。这很容易通过检查 Chrome 开发人员工具中的网络选项卡来验证。它返回一个空数组，使得`data = []`. 所以`data[0].day`抛出一个错误并且该错误没有被捕获。

两个代码块之间的区别在于变量中包含的内容`this`。在第一个中，它是一个 jQuery 对象，其中包含您的`document`. 在第二个中，它是一个包含`<select>`id 元素的 jquery 对象`club`。由于您想序列化相同的元素，您`$(document).ready`所要做的就是更改`$(this)`为`$(#club)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T00:37:11.110

您希望`$(this)`在“就绪”处理程序中引用什么？在“更改”处理程序中，就是那个“#club”元素。在“就绪”处理程序中，它可能是无用的。

而不是`$(this).serialize()`我认为你想要`$('#club').serialize()`在“准备好的”处理程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T00:54:45.127

您的问题出在您的 HTML 代码中。

```
<select id="club" class="dropdown" name="club">
    <option id="Let" lo'="" lola="" @="" disco="" kill="" s="">Let's Kill Disco @ Lola Lo</option>
    <option id="Fuzzy Logic @ The Place">Fuzzy Logic @ The Place</option>
    <option id="BOOM! @ The Place">BOOM! @ The Place</option>
    <option id="Fuzzy Logic @ Ballare">Fuzzy Logic @ Ballare</option>
    <option id="Jelly Baby @ Ballare">Jelly Baby @ Ballare</option>
    <option id="Fiesta @ Fez">Fiesta @ Fez</option>
</select> 
```

看第一个条目。不行，因为id不存在，标签都乱了。确保在将事件添加到列表时转义引号。当您这样做时，您的 jQuery`$.ajax`请求应该可以正常工作。

# javascript - 如何使用 Greasemonkey 自动选择特定的单选按钮？

> ID：11025270
> 
> 赞同：1
> 
> 时间：2012-06-14T00:32:28.303
> 
> 标签：javascript, html, radio-button, greasemonkey

我想用 Greasemonkey 自动回答问题。我有问题和答案，但如何选择它们？

这是HTML：

```
<div class="vito_form_q">
    <div class="vito_form_title_min_no">
        <span id="ContentPlaceHolder1_lblquestionNo">8</span>
    </div>
    <div class="vito_form_title_min">
        <span id="ContentPlaceHolder1_lblquestion">Which sport is not playing with the ball?</span>
    </div>
    <div class="clearfloat"></div>
    <div class="meter orange nostripes"><span style="width: 100%"></span></div>
    <div class="quest">
        <table id="rbAnswer" class="q1">
        <tr><td>
            <input id="rbAnswer_0" type="radio" name="ctl00$ContentPlaceHolder1$rbAnswer" value="157"/><label for="rbAnswer_0">Handball</label>
        </td></tr>
        <tr><td>
            <input id="rbAnswer_1" type="radio" name="ctl00$ContentPlaceHolder1$rbAnswer" value="158"/><label for="rbAnswer_1">Basketball</label>
        </td></tr>
        <tr><td>
            <input id="rbAnswer_2" type="radio" name="ctl00$ContentPlaceHolder1$rbAnswer" value="159"/><label for="rbAnswer_2">Football</label>
        </td></tr>
        <tr><td>
            <input id="rbAnswer_3" type="radio" name="ctl00$ContentPlaceHolder1$rbAnswer" value="160"/><label for="rbAnswer_3">Fencing</label>
        </td></tr> 
```

例如，对于这个问题：

```
 <span id="ContentPlaceHolder1_lblquestion">Which sport is not playing with the ball?</span> 
```

选择答案：

```
<td>
    <input id="rbAnswer_3" type="radio" name="ctl00$ContentPlaceHolder1$rbAnswer" value="160" />
    <label for="rbAnswer_3">Fencing</label> 
```

我怎么能用 Greasemonkey 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:10:16.933

提出一系列问题和答案，如下所示：

```
var answerKey   = [
      { q: "sport is not playing with the ball", a: "Fencing" }
    , { q: "Best SciFi franchise",               a: "Star Trek" }
    , { q: "Most badass monster",                a: "Bun-Bun" }
    , { q: "Most toxic chemical in this list",   a: "Mountain Dew" }
    // etc.
]; 
```

然后将此行添加到Greasemonkey 脚本[的元数据块中：](http://wiki.greasespot.net/Metadata_Block)

```
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
```

[然后，使用jQuery](http://jquery.com/) 的强大功能，您的脚本可以使用以下代码检查正确的单选按钮：

（[**请参阅 jsFiddle 的底层代码演示。**](http://jsfiddle.net/VqQaN/)）

```
var answerKey   = [
      { q: "sport is not playing with the ball", a: "Fencing" }
    , { q: "Best SciFi franchise", a: "Star Trek" }
    , { q: "Most badass monster", a: "Bun-Bun" }
    , { q: "Most toxic chemical in this list", a: "Mountain Dew" }
    // etc.
];

//--- Loop through the question(s) on the page and answer then if possible.
var questionTxt = $("div div.vito_form_title_min span[id$='question']");

questionTxt.each ( function () {
    var bFoundAnswer    = false;
    var answerTxt       = getAnswer (this.textContent);
    if (answerTxt) {
        //--- We have the answer text, now find the matching radio button and select it.
        var ansForThisQ     = $(this).parent (). nextAll ("div.quest").find ("label");

        ansForThisQ.each ( function () {
            var zRegExp     = new RegExp (answerTxt, 'i');
            if (zRegExp.test (this.textContent) ) {
                bFoundAnswer    = true;
                var label       = $(this);
                var radioButt   = $("#" + label.prop ("for") );
                radioButt.prop  ("checked", "checked");
                label.css       ("background", "lime");
                return false;   // End loop
            }
        } );
    }
    else {
        alert ("I don't know how to answer: '" + this.textContent + "'");
        $(this).css ("background", "pink");
    }
    if ( answerTxt  &&  ! bFoundAnswer) {
        alert ("The page does not have the specified answer for the question: '" + this.textContent + "'");
        $(this).css ("background", "pink");
    }
} );

function getAnswer (questionText) {
    for (var J = answerKey.length - 1;  J >= 0;  --J) {
        var zRegExp = new RegExp (answerKey[J].q, 'i');

        if (zRegExp.test (questionText) )
            return answerKey[J].a;
    }
    return null;
} 
```

# android - Android Admob 示例错误:(

> ID：11025272
> 
> 赞同：0
> 
> 时间：2012-06-14T00:33:07.463
> 
> 标签：android, admob

这个项目几乎可以从 admob 页面上的示例中得到解决，但它仍然无法正常工作！这是我的类文件：

```
 package com.firecow.admobtest;

import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;

/**
 * A simple {@link Activity} that embeds an AdView.
 */
public class AdMobTesterActivity extends Activity {
    /** The view to show the ad. */
    private AdView adView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Create an ad.
        adView = new AdView(this, AdSize.BANNER, "a14fd022edb48e8");

        // Add the AdView to the view hierarchy. The view will have no size
        // until the ad is loaded.
        LinearLayout layout = (LinearLayout) findViewById(R.id.mainLayout);
        layout.addView(adView);

        // Create an ad request. Check logcat output for the hashed device ID to
        // get test ads on a physical device.
        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

        // Start loading the ad in the background.
        adView.loadAd(adRequest);
    }

    /** Called before the activity is destroyed. */
    @Override
    public void onDestroy() {
        // Destroy the AdView.
        if (adView != null) {
            adView.destroy();
        }

        super.onDestroy();
    }
} 
```

...和我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

我不知道该怎么办，我只在logcat中得到这个错误

```
java.lang.NoClassDefFoundError: com.google.ads.AdView 
```

这是什么意思？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:35:03.873

您需要在项目中包含 AdMob SDK。如果您使用的是 Eclipse，[本教程](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)将向您展示如何做到这一点。

如果您尚未下载 SDK，可以从 AdMob 控制面板或从[此处](https://developers.google.com/mobile-ads-sdk/download)下载。

最后，检查您的`AndroidManifest.xml`文件。它应该有，添加到它，在同一个教程中加粗的代码行。*（旁注：您向我们展示了您的布局文件，而不是您的清单。）*

还要确保您在执行此操作后已清理并重建了您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T12:30:32.253

确保您已将 admob.jar 复制到 libs 文件夹中，并且不要忘记在 Menifest.xml 中添加 admob 活动标签

```
<activity
    android:name="com.google.ads.AdActivity"
    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
</activity> 
```

# python - 如何处理python杂散属性分配

> ID：11025277
> 
> 赞同：2
> 
> 时间：2012-06-14T00:33:45.280
> 
> 标签：python, dynamic, attributes

有时我需要更改已在其余代码中广泛使用的 Python 类属性的名称。

问题是由于各种原因，我可能会错过一些旧名称出现在赋值语句中的地方，例如`class_instance.old_attribute_name = something`. 例如：

```
class theClass:
    def __init__(self):
        self.new_attribute_name = 0

o = theClass()
o.new_attribute_name += 3
if o.new_attribute_name > 3 or o.new_attribute_name < 4:
    o.old_attribute_name = 7
do_stuff_with(o.new_attribute_name) 
```

问题是这很难发现，不会产生错误，只会创建一个无用的属性。我考虑过使用`__slot__`，但感觉像是将我根深蒂固的 C/C++ 思维方式强加在 Python 上。

所以我想问一下，我在这里做错了什么？如果我尝试（以某种方式）阻止在实例化之外创建属性，我会失去什么？处理杂散属性分配的pythonic方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:40:20.120

您可以将旧属性名称设为属性

```
class theClass(object):
    def __init__(self):
        self.new_attribute_name = 0

    @property
    def old_attribute_name(self):
        print "Tried to access old_attribute_name"
        return self.new_attribute_name

    @old_attribute_name.setter
    def old_attribute_name(self, value):
        print "Tried to set old_attribute_name"
        return self.new_attribute_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:53:14.777

您可以尝试使用“重构”工具，而不是尝试使用搜索和替换来找到所有需要更改的地方。

[你为 Python 使用了哪些重构工具？](https://stackoverflow.com/questions/28796/what-refactoring-tools-do-you-use-for-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:56:20.783

你可以用属性来做到这一点。它将阻止获取和设置旧属性名称。

```
class A(object):
    @property
    def old_name(self):
        raise NotImplementedError() 
```

# javascript - Chrome：什么脚本正在设置元素高度

> ID：11025281
> 
> 赞同：0
> 
> 时间：2012-06-14T00:33:57.540
> 
> 标签：javascript, jquery, google-chrome

我正在一个有一堆插件的wordpress网站上工作……我怀疑主题中的一些脚本，但我有一个特定的元素，它的高度设置为固定的像素大小。这很好，除非尝试添加动态内容。如果我将高度设置为自动，它会被设置回指定的高度。

所以在我看来，一些 javascript 正在设置这个元素的高度（可能带有突变事件）。Chrome 的 Web 开发人员工具中是否有办法查看哪个脚本正在设置元素的高度（或任何 CSS）？

我似乎断点在这里并没有真正帮助我，因为元素选项卡在我逐步完成时似乎没有更新。

关于调试这个有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:38:55.183

如果它是用 javascript 完成的，它要么应用内联 css，要么应用一个类。因此您可以使用 chromes 开发人员工具找到它（按 F12）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:29:25.320

好吧，我从来没有找到设置 div 高度的原因，但是使用 $(window).load 然后将高度设置为“自动”解决了这个问题。

# javascript - -moz-win-borderless-glass 有效吗？

> ID：11025292
> 
> 赞同：2
> 
> 时间：2012-06-14T00:35:31.393
> 
> 标签：javascript, firefox, css

所以，[我发现](https://developer.mozilla.org/en/CSS/-moz-appearance)在 Firefox 中，我可以使用 CSS 的`-moz-appearance`. 但是，它似乎不起作用。当我点击按钮时，什么也没发生。我在那里做错什么了吗？谢谢。

[http://jsfiddle.net/DerekL/XNN5g/](http://jsfiddle.net/DerekL/XNN5g/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:45:30.533

如[CSS 技巧中所述](http://css-tricks.com/almanac/properties/a/appearance/)

> 外观属性用于显示使用基于用户操作系统主题的平台原生样式的元素。

在网站元素中使用 -moz-win-borderless-glass 的问题在于，该元素将至少在包含网站内容的 chrome 元素的背景下组成，默认情况下为白色。因此它不会显示为具有玻璃样式，因为只有组合底部的元素（包括镀铬）可以显示此行为。

您可以通过 Stylish 等插件更改 chrome 元素的外观，但这是用户必须安装的。如果您相应地设置 -moz-appearance 属性，Chrome 元素可以具有玻璃样式，包括包含网站内容的整个元素。

# python - 在 rtree 中，如何指定浮点相等测试的阈值？

> ID：11025297
> 
> 赞同：2
> 
> 时间：2012-06-14T00:37:04.717
> 
> 标签：python, indexing, spatial-index, spatial-query, r-tree

在 rtree 中，如何指定浮点相等测试的阈值？

在检查最近邻时，rtree 可以返回超过指定数量的结果，就好像两个点等距一样，它会同时返回它们。要检查这个等距离，它必须有一些阈值，因为距离是浮动的。我希望能够控制这个阈值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:36:55.007

实际上它不需要有一个阈值来处理关系。他们只是发生了。

假设您有数据点`(1.,0.)`和`(0.,1.)`查询点`(0.,0.)`，我见过的欧几里得距离的任何实现都将返回*完全相同的*距离，没有任何阈值。

# jquery - jquery在行悬停时显示图像

> ID：11025303
> 
> 赞同：0
> 
> 时间：2012-06-14T00:37:27.540
> 
> 标签：jquery, image, hover

我有一个使用 PHP 从数据库中提取的记录列表，显示在表格中。

使用 jquery，在每一行我想要一个仅显示鼠标是否在当前行上的图像。图像是相同的（它是一个删除图标）。

我已经在每一行上都有图像，但是用`style="display: none;"`标签隐藏了。这只是我坚持的悬停业务。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T00:45:24.123

就像是：

```
$(yourTRSelection).hover(function(){
('yourImage', $(this)).show();
},function(){('yourImage', $(this)).hide();}); 
```

# javascript - 我可以在 three.js 中隐藏网格的面吗？

> ID：11025307
> 
> 赞同：14
> 
> 时间：2012-06-14T00:38:05.650
> 
> 标签：javascript, three.js, mesh

我想让部分网格在运行时不可见。我可以将这些部分设置为不可见/透明，例如通过更改单个面的属性吗？网格本身仅使用一种材料。

* * *

***编辑器*理解这个问题的**示例性插图**：想象一个网格（这里有 20 个顶点的几何形状），其中四个顶点的每个四边形构建一个`Face4`. 现在，应该使网格的某些部分不可见（这里有两个面不可见）。**

 **![例子](../Images/d95aecf33c04c8112261923be15ad32d.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-23T03:41:35.590

您可以为每个面指定不同的材质。这是一个面共享材质的示例，但有些面是透明的：

```
// geometry
var geometry = new THREE.BoxGeometry( 100, 100, 100, 4, 4, 4 );

// materials
materials = [
    new THREE.MeshLambertMaterial( { color: 0xffff00, side: THREE.DoubleSide } ),
    new THREE.MeshBasicMaterial( { transparent: true, opacity: 0 } )
];

// assign material to each face
for( var i = 0; i < geometry.faces.length; i++ ) {
    geometry.faces[ i ].materialIndex = THREE.Math.randInt( 0, 1 );
}
geometry.sortFacesByMaterialIndex(); // optional, to reduce draw calls

// mesh
mesh = new THREE.Mesh( geometry, materials );
scene.add( mesh ); 
```

更新的小提琴显示了在运行时更改材质的一种方法：http: [//jsfiddle.net/e0x88z7w/](http://jsfiddle.net/e0x88z7w/)

编辑：`MeshFaceMaterial`已被弃用。发布和小提琴更新。

三.js r.87**

# php - htaccess 重写导致错误

> ID：11025312
> 
> 赞同：0
> 
> 时间：2012-06-14T00:39:05.713
> 
> 标签：php, .htaccess, mod-rewrite

我正在使用我下载的 PHP 应用程序，它在我的服务器上运行了一半，但是我遇到了我认为是重写错误。

该应用程序是一个“工作委员会”，人们可以在其中浏览可用的职位并在线申请。

目前它正在“技术上”工作。一个人可以查看网站和帖子，他们可以填写申请表。消息已正确发送。

问题是，一旦按下提交按钮，浏览器就会显示页面正在加载，但什么都没有加载。所以发送了消息，但没有加载以下页面。

该应用程序使用 htaccess 重写，我相信这就是问题所在。

该应用程序应该在顶级域上开箱即用，但是我试图在子域上使用它。我是否正确假设在使用子域时技术上没有太大区别？毕竟，在提交表单之前，页面都可以正常加载。

该应用程序在[http://volunteer.essentialtransit.com运行](http://volunteer.essentialtransit.com)

您看到的是最初设置后的应用程序，我添加了一个示例“作业”。

您可以尝试申请查看我所指的问题。这是一个非常简单的申请表，只需几秒钟即可完成。

这是htaccess文件：

```
# AddType x-mapp-php5 .php
# AddHandler x-mapp-php5 .php

RewriteEngine on
Options +FollowSymlinks

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]

ErrorDocument 404 /page-unavailable/

<files ~ "\.tpl$">
order deny,allow
allow from none
deny from all
</files> 
```

也许如果有人可以解释 htaccess 规则在做什么，我可以找出问题所在。

**编辑**：所以页面实际上确实加载了，但只是在很长一段时间后。浏览器显示表单已发送，然后开始加载以下页面，但实际加载需要几分钟。网站上所有其他页面的加载速度都比这更快。另一个奇怪的事情是，当一个“工作”页面最初打开时，它会快速加载，在应用后它只是重定向回同一个“工作”页面，但是这一次它需要永远加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:34:13.467

规则是不言自明的：

```
RewriteEngine on # Enables rewrite engine (obviously)
Options +FollowSymlinks # Tells Apache to follow symbolic links

RewriteCond %{REQUEST_FILENAME} !-f # Here it redirects non-files
RewriteCond %{REQUEST_FILENAME} !-d # and non directories
RewriteRule . index.php [L]         # to index.php

ErrorDocument 404 /page-unavailable/ # Sets 404 page address

<files ~ "\.tpl$"> # Denies access to templates
order deny,allow
allow from none
deny from all
</files> 
```

我怀疑您的问题与这些规则有关。

# ruby-on-rails - Rails：如何使用 before_filter 来保护多个方法

> ID：11025319
> 
> 赞同：1
> 
> 时间：2012-06-14T00:40:25.297
> 
> 标签：ruby-on-rails, ruby, login, before-filter

所以，我在控制器中有这段代码：

```
before_filter :require_login, :only => :new, :edit, :destroy 
```

我的控制器有这些方法：**索引、新建、编辑、创建、更新、显示、销毁。** 我想做的是用 login_required （代码中的：require_login）保护方法：**新建，编辑，销毁，**但上面的代码不起作用，如果我有，我可以保护一种方法，例如：

```
before_filter :require_login, :only => :new 
```

但我想保护他们三个，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:42:53.340

您在`only`选项值周围缺少方括号：

```
 before_filter :require_login, :only => [:new, :edit, :destroy] 
```

它不起作用，因为 Ruby 解释器不知道仅开始的选项和`before_filter`继续的参数在哪里。在这种情况下，您需要明确说明容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:42:16.290

使用数组：

```
before_filter :require_login, :only => [:new, :edit, :destroy] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:44:52.490

哦，我是个傻瓜！！！只需将它们以数组形式放置 -.- 就像这样：

```
before_filter :require_login, :only => [:new, :edit, :destroy] 
```

很抱歉这个明显的问题。

# c++ - xcode 中的流浪 /377

> ID：11025320
> 
> 赞同：2
> 
> 时间：2012-06-14T00:40:27.290
> 
> 标签：c++, xcode, macos

我正在使用 xcode 进行一些 c++ 编程，突然间我收到“Stray /377 in program error”

我认为可能是因为我最近开始使用非苹果无线键盘，并且我可能输入了某种奇怪的组合键，从而创建了一个不可见的键。

我尝试将 .cpp 文件的编码更改为 utf 8，但是当我在 xcode 中重新打开文件时，它会以中文显示？

我的项目非常大，因此发布项目代码是不可行的。

我在 osx 10.6.8 上使用 xcode 3.2.6

我尝试在 xcode 3.1.6 中打开项目并得到同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T00:42:47.117

“377”是“255”的八进制，或 8 位“-1”。

你在任何地方都有这样的一个吗？

我相信 XCode 有一个十六进制编辑器：只需在您最近的源更改中的某处寻找“0xff”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T00:48:35.920

八进制`377`是十进制`255`。它在 UTF-8 中没有任何意义，在 ISO-8859-1 中表示“带有分音符号的拉丁小写字母 y”。我认为它在文件中的存在可能表明它不属于并且可以删除而不会产生进一步的后果。如果您同意，您可以尝试像这样删除整个树中的所有它们：

```
find . -name '*.cpp' -exec sed -i~ 's/\o377//g' {} \; 
```

`-i~`要求制作它更改的文件的`sed`备份副本，以防您需要原件 - 或者想要将更改与`diff(1)`.

# python - Jinja2 的问题：TemplateNotFound：index.html

> ID：11025321
> 
> 赞同：18
> 
> 时间：2012-06-14T00:40:47.100
> 
> 标签：python, google-app-engine, templates, jinja2

我正在尝试使用 jinja2 构建我的第一个 GAE 应用程序。在克服了十几个小错误之后，现在我陷入了困境：

```
Traceback (most recent call last):

File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\CG\Documents\udacity\HiMon\main.py", line 31, in get
    template = jinja_environment.get_template('index.html')
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 719, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 693, in _load_template
    template = self.loader.load(self, name, globals)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 180, in get_source
    raise TemplateNotFound(template)
TemplateNotFound: index.html 
```

这是我的yaml文件：

```
application: himother
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: "2.6" 
```

这是我的代码：

```
import os
import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

class MainPage(webapp2.RequestHandler):
    def get(self):
        template_values = {
            'name': 'Serendipo',
            'verb': 'extremely happy'
        }

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

这是我的 .html 模板：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Look Ma, I'm using Jinja!</title>
    </head>
    <body>
        Hi there - I'm {{ name }}, and I {{ verb }} programming!
    </body>
</html> 
```

尽管出现错误消息，但我有一个名为“templates”的文件夹，并在其中创建了 index.html 文件：

![在此处输入图像描述](../Images/8f790a3771fc141c977edfc6c49bf54f.png)

![在此处输入图像描述](../Images/88f25cfb0fbe580ea47bfb1eb76a4427.png)

![在此处输入图像描述](../Images/08347d5d39f203debad876fee04da35e.png)

我也安装了jinja2。

现在有没有人知道这个错误的原因？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T12:11:08.610

尝试使用

```
loader=jinja2.FileSystemLoader('templates') 
```

代替

```
loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')) 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-22T23:52:47.807

这为我解决了它：

```
mkdir templates
echo "hello world" > templates/index.html 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-17T14:39:11.930

好吧，我的错误既简单又愚蠢。我以错误的方式创建了文件“index.html”（[这里](http://www.unc.edu/~twtaylor/teaching/29/web/notepad.html)是正确的方式）。所以，我的“index.html”文件确实是一个“.text”文件（因为我只是将它重命名为“index.html”而不是[“另存为”index.html”](http://www.unc.edu/~twtaylor/teaching/29/web/notepad.html)）。谢谢大家的帮助！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-21T03:31:50.553

```
template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),autoescape = True) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T01:49:17.180

基于让我第一次使用 Jinja2 进行 GAE 工作的两个想法。首先，在您的 yaml 文件中，您有“-url: . *”，尽管我*根据我看到的教程使用了“-url: /.”。但是，这可能与您的问题无关。其次，我使用此页面上的指导来建立我的 Jinja2 渲染器，并且在应用程序目录的模板子目录中找到模板没有问题： [http ://webapp-improved.appspot.com/api/webapp2_extras/ jinja2.html#module-webapp2_extras.jinja2](http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html#module-webapp2_extras.jinja2)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-06T13:41:03.407

我收到了同样的错误并尝试了所有答案。后来才知道，要先配置好环境，找到合适的文件夹，才能搜索到html文件，然后jinja2才能找到文件。

以下行将删除错误：

```
env = Environment(loader=FileSystemLoader(searchpath='C:\Folder\of\html\file')
template = env.get_template('Name_of_file.html') 
```

# jquery - 需要使用 jquery 切换两次单击

> ID：11025322
> 
> 赞同：1
> 
> 时间：2012-06-14T00:41:09.743
> 
> 标签：jquery

我的切换方法一定有问题，但我遇到了一个问题，一旦我的切换被激活，我必须点击每个按钮两次才能获得操作。我使用一个类将切换功能分配给两个链接。

```
$(function() {
    $(".partyToggle").toggle(
        function() { 
            $("#wheres-the-party").animate({"height": "450px", "margin-bottom": "0px"}, 500); 
            $("#mapCta").delay(500).animate({"opacity": "0"}, 500);
            $(".partyToggleClose").delay(500).animate({"height": "50px"}, 500); 
        },
        function() { 
            $("#wheres-the-party").delay(500).animate({"height": "200px", "margin-bottom": "0"}, 500); 
            $("#mapCta").animate({"opacity": "1"}, 500);
            $(".partyToggleClose").delay(500).animate({"height": "0"}, 500); 
        }
    );

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:38:47.137

你需要 `$(".partyToggle").unbind('click');` 在函数之前。

# interface - 用于创建自定义可视 GUI 设计器的可视 GUI 设计器框架

> ID：11025325
> 
> 赞同：1
> 
> 时间：2012-06-14T00:41:23.550
> 
> 标签：interface, designer

是否有任何 GUI 设计器框架/模块/库用于创建自定义可视化 GUI 设计器（框架上的拖放组件）

几乎每次创建新语言时，都可能不得不从头开始编写 gui 设计器（例如 freepascal 的 Lazarus）

# java - 从 Internet 到 AppEngine BlobStore (Java) 的图像

> ID：11025329
> 
> 赞同：1
> 
> 时间：2012-06-14T00:42:48.130
> 
> 标签：java, google-app-engine

我在 appengine 应用程序中上传了图片。图片保存在 blobstore 中。它使用 html 输入文件。

除此之外，我希望允许用户将图片从 Internet 保存到 blobstore。如果用户有有效图片的 url，我希望将图片保存在 blobstore 中。是否可以？如何实现这个功能？

例如，用户只需输入 url ex。[http://domain.com/picture001.jpg](http://domain.com/picture001.jpg)然后图像将存储在 blobstore 中。不仅仅是图片本身的网址。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T00:46:45.117

使用[URLFetch](https://developers.google.com/appengine/docs/python/urlfetch/)检索图像字节，然后使用[Files API](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)将您提取的字节写入 blobstore。

# xna - 如何在 Windows 8 上的 MonoGame 中使用 .xnb 文件？

> ID：11025330
> 
> 赞同：3
> 
> 时间：2012-06-14T00:42:53.160
> 
> 标签：xna, monogame

我有一个来自在 Windows 7 上制作的 Windows Phone 项目的 .xnb 文件。我想在 Windows 8 Metro 应用程序中使用相同的资产。我在 Windows 8 上安装了 MSVS 2012 RC，其中包含来自 MonoGameWindowsMetroApplication 模板的项目。我将 .xnb 文件放在项目 Assets 文件夹中并尝试加载它，但出现异常，告诉我无法加载资产。我需要哪些属性或配置才能使用 .xnb 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:40:56.277

当 MonoGame 正在处理框架的内容管道部分时，您可以简单地使用与 Windows Phone 7 游戏相同的内容管道引擎来创建内容管道并在您的 Windows 8 XNA MonoGame 项目中使用关联的 .xnb 文件.

我有一个关于使用 MonoGame for Windows 8 构建 XNA 游戏的博客教程系列，如果您查看第 3 部分，我将提供完成此操作的逐步演练。我的动手实验室和博客上的信息已经过 MonoGame 团队的审核和批准。

在此处查看信息：http: [//blogs.msdn.com/b/tarawalker/archive/2013/01/04/windows-8-game-development-using-c-xna-and-monogame-3-0-building- a-shooter-game-walkthrough-part-3-updates-graphics-using-content-pipeline-with-monogame.aspx](http://blogs.msdn.com/b/tarawalker/archive/2013/01/04/windows-8-game-development-using-c-xna-and-monogame-3-0-building-a-shooter-game-walkthrough-part-3-updating-graphics-using-content-pipeline-with-monogame.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:32:04.617

你在develop3D分支吗？我认为您需要添加一个虚拟内容项目并将其添加到该项目，而不是您的资产，首先构建该项目，然后您需要在您的 MonoGame 项目中引用该项目。

昨天我没有成功，因为我正在使用当前的马厩，但是昨天 MonoGame 的一个人告诉我这样做。以下是一些说明：

[https://github.com/mono/MonoGame/wiki/MonoGame-Content-Processing](https://github.com/mono/MonoGame/wiki/MonoGame-Content-Processing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:34:42.047

在 MonoGame 内容管道中不存在，至少现在不存在。

它很容易。1）在VS2010中创建一个xna项目2）在那里添加你所有的资产。3）重建你的项目。转到 bin/x86/debug/content 并从那里复制所有内容

现在转到您的 VS2012 Mono Project bin/x86/debug 查找内容文件夹，如果它在那里复制所有内容，则创建一个内容文件夹并将所有内容复制到那里。

现在无需更改任何一行代码，只需运行您的项目，您会发现一切正常！！！

如果您发现这样做有任何困难，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T02:05:30.683

运行时 Xna 框架有许多读取各种 xnb 文件的类型读取器对象。一些类型阅读器用于从 fbx 模型处理的 xnb 文件，其他是从 2d 图像文件处理的 xnb 文件等。

当您调用`content.Load<T>(xnb file name)`时，内容管理器使用适当的阅读器将 xnb 文件的字节信息读入适当的 Xna 类。xnb 文件中的字节信息旨在用于特定的 Xna 类，没有其他。地铁没有 Xna 课程。

所有这一切都说明在 Metro 环境中没有读取这些 xnb 文件的类型读取器。你必须自己写。不过这并不难，这与我所做的相似。我现在通过构建一个 Xna 项目将 fbx 文件处理为 xnb，然后我的 xna 项目将运行时模型的数据写入我自己的二进制文件，我从我的 Metro 应用程序中读取该文件。但我也可以简单地阅读 xnb。我只需要研究 contentManager 和 Model 类的类型阅读器就可以了解字节信息是如何分布的。

毕竟，这只是意味着我不必学习 FBXSDK，这将是引入模型信息的标准方式（并且可以说是首选方式）。

编辑 - 抱歉，没有使用单声道框架。我对此一无所知......也许他们确实有一种导入xnb文件的方法。

# c++ - 如何将二进制文件内容读取为字符串？

> ID：11025332
> 
> 赞同：1
> 
> 时间：2012-06-14T00:42:54.703
> 
> 标签：c++, filestream, binaryfiles

我需要从二进制文件中读取 16 位`std::string`或`char *`. 例如，一个二进制文件包含`89 ab cd ef`，我希望能够将它们提取为`std::string`s 或`char *`. 我尝试了以下代码：

```
ifstream *p = new ifstream();
char *buffer;  
p->seekg(address, ios::beg);  
buffer = new char[16];  
memset(buffer, 0, 16);  
p->read(buffer, 16); 
```

当我尝试`std::cout`缓冲区时，什么都没有出现。如何在二进制文件中读取这些字符？

编辑：我一直在寻找缓冲区是 int 类型，例如“0x89abcdef”。有没有可能实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T01:00:18.573

就像是：

```
#include <string>
#include <iostream>
#include <fstream>
#include <iomanip>

int main()
{
    if (ifstream input("filename"))
    {
        std::string s(2 /*bytes*/, '\0' /*initial content - irrelevant*/);
        if (input.read(&s[0], 2 /*bytes*/))
            std::cout << "SUCCESS: [0] " << std::hex << (int)s[0] << " [1] " << (int)s[1] << '\n';
        else
            std::cerr << "Couldn't read from file\n";
    }
    else
        std::cerr << "Couldn't open file\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:51:01.047

您不能像读取文本一样读取二进制流。

当然，您*可以读取二进制文件（通过在您的流对象上使用“file.read()”和“file.write()”方法）。*就像你现在正在做的那样:)

您还可以将二进制转换为文本：“转换为十六进制文本字符串”和“uuencode base 64”是执行此操作的两种常用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T01:00:53.690

您需要将字节读取为数字（可能是 long long 类型）。[然后您可以使用如下](http://www.cplusplus.com/forum/windows/51591/)格式说明符打印那些：

```
#include <iostream>
#include <iomanip>

int main()
{
    using namespace std;

    int x =   2;
    int y = 255;

    cout << showbase // show the 0x prefix
         << internal // fill between the prefix and the number
         << setfill('0'); // fill with 0s

    cout << hex << setw(4) << x << dec << " = " << setw(3) << x << endl;
    cout << hex << setw(4) << y << dec << " = " << setw(3) << y << endl;

    return 0;
} 
```

# java - Google App Engine Java 上的 UncaughtExceptionHandler

> ID：11025339
> 
> 赞同：0
> 
> 时间：2012-06-14T00:44:40.890
> 
> 标签：java, google-app-engine, uncaughtexceptionhandler

每当我的应用程序中有未捕获的异常时，我都想做一些自定义逻辑。通常我会做类似的事情：

```
Thread.setDefaultUncaughtExceptionHandler(myCustomHandler); 
```

但是，`Thread`在 Google App Engine 上被锁定。上面的代码引发了一个安全异常。反正有没有在 Google App Engine 上实现类似的功能？

编辑：我已经将我的方法实现为 Servlet 过滤器。我在 Java Web 编程方面的经验相当有限。有人可以评论这种方法吗？由于 AppEngine 中的所有请求都源自 HTTP 请求，我认为这是一个全面的解决方案。

```
@Override
public void doFilter(ServletRequest request, ServletResponse response,
    FilterChain chain) throws IOException, ServletException {

    try {
        chain.doFilter(request, response);
    } catch (RuntimeException ex) {
        // Work my magic here...
        throw ex;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:41:31.877

Servlet 自己处理线程，因此您不应该以这种方式处理它。

相反，安装一个 servlet[错误处理](https://developers.google.com/appengine/docs/java/config/webxml#Error_Handlers)程序：

```
<error-page>
    <error-type>com.package.YourException</error-type>
    <location>/errors/handler</location>
</error-page> 
```

然后`/errors/handler`映射到处理错误并返回适当响应的 servlet。

# jquery - CSS3 动画，原地不动

> ID：11025347
> 
> 赞同：1
> 
> 时间：2012-06-14T00:45:37.850
> 
> 标签：jquery, css, translate-animation

我正在使用以下动画：

```
.wheel1anim {
    -webkit-animation-name: wheel1go;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-direction: normal;
    -webkit-animation-delay: 0;
    -webkit-animation-play-state: running;
    -webkit-animation-duration: 1s;
}

@-webkit-keyframes wheel1go {
    0% {
    }
    100% {
        -webkit-transform: translate(200px, 150px);
    }
} 
```

动画效果很好，但是一旦动画完成，元素就会从动画位置移动到默认位置

有没有办法让它留在原地？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:04:32.597

您可以在 .wheel1anim 中添加一行：

```
-webkit-animation-fill-mode:both; 
```

# android - 使用 LoaderManager 和 CursorLoader 在列表视图中显示专辑和艺术家

> ID：11025350
> 
> 赞同：4
> 
> 时间：2012-06-14T00:46:11.703
> 
> 标签：android, android-listfragment, android-music-player, android-cursorloader

我有一个`ListFragment`谁的列表应该显示设备的专辑和使用的相关艺术家`MediaStore`。因此，每行有两个`TextViews`. 我正在使用`LoaderManager`并`CursorLoader`使用自定义 CursorAdapter 来填充列表，以便将`TextViews`行的绑定到数据。

**列表片段代码：**

```
public class AlbumsFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {

AlbumsAdapter mAdapter;

        @Override
           public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
           View myFragmentView = inflater.inflate(R.layout.albums_fragment_layout, container, false);
           return myFragmentView;
         }

        @Override
          public void onActivityCreated(Bundle savedInstanceState) {
           super.onActivityCreated(savedInstanceState);

                    setListAdapter(mAdapter);
                    getLoaderManager().initLoader(0, null, this);                               
        }

static final String[] ALBUM_SUMMARY_PROJECTION = { MediaStore.Audio.Albums.ALBUM, MediaStore.Audio.Albums.ARTIST}; 

        public Loader<Cursor> onCreateLoader(int id, Bundle args) {      
            String select = null;  
            return new CursorLoader(getActivity(), MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI,ALBUM_SUMMARY_PROJECTION, select, null, null);  
        }  

        public void onLoadFinished(Loader<Cursor> loader, Cursor data) {  
            mAdapter.swapCursor(data);  
        }  

        public void onLoaderReset(Loader<Cursor> loader) {  
            mAdapter.swapCursor(null);  
        }  
    } 
```

**AlbumsAdapter（自定义 CursorAdapter）代码：**

```
public class AlbumsAdapter extends CursorAdapter {

    private final LayoutInflater mInflater;

     public AlbumsAdapter(Context context, Cursor c) {
        super(context, c);
        mInflater=LayoutInflater.from(context);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {

        TextView albumTitle =(TextView)view.findViewById(R.id.albumTextView);
        albumTitle.setText(cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM)));

        TextView artistName=(TextView)view.findViewById(R.id.artistTextView);
        artistName.setText(cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ARTIST)));

    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        final View view=mInflater.inflate(R.layout.albums_row,parent,false); 
        return view;
    } 
```

目前，当我显示这个 ListFragment 时，我有一个 java.lang.NullPointerException，这里是 logCat：

```
 06-14 09:39:23.109: W/dalvikvm(8632): threadid=1: thread exiting with uncaught exception (group=0x40c2d1f8)
06-14 09:39:23.109: E/AndroidRuntime(8632): FATAL EXCEPTION: main
06-14 09:39:23.109: E/AndroidRuntime(8632): java.lang.NullPointerException
06-14 09:39:23.109: E/AndroidRuntime(8632):     at com.music.pod.AlbumsFragment.onLoadFinished(AlbumsFragment.java:61)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at com.music.pod.AlbumsFragment.onLoadFinished(AlbumsFragment.java:1)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:438)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:406)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.content.Loader.deliverResult(Loader.java:125)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.content.CursorLoader.deliverResult(CursorLoader.java:88)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.content.CursorLoader.deliverResult(CursorLoader.java:42)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.content.AsyncTaskLoader.dispatchOnLoadComplete(AsyncTaskLoader.java:236)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.content.AsyncTaskLoader$LoadTask.onPostExecute(AsyncTaskLoader.java:76)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.os.AsyncTask.finish(AsyncTask.java:602)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.os.Looper.loop(Looper.java:137)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at android.app.ActivityThread.main(ActivityThread.java:4507)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at java.lang.reflect.Method.invokeNative(Native Method)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at java.lang.reflect.Method.invoke(Method.java:511)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
06-14 09:39:23.109: E/AndroidRuntime(8632):     at dalvik.system.NativeStart.main(Native Method) 
```

您能否帮我更正我的代码，以便将专辑和相关艺术家显示在列表视图中？

**问题解决了 ：**

对于任何尝试使用 LoaderManager/CursorLoader 技术填充自定义列表视图的人来说，您应该：

1）创建您自己的自定义 CursorAdapter，它将您的行的 TextViews 绑定到光标的数据（请参阅我上面的自定义 CursorAdapter）

2）然后，在您的片段中，这是要做什么：

```
public class AlbumsFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {

AlbumsAdapter mAdapter;

        @Override
           public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
           View myFragmentView = inflater.inflate(R.layout.albums_fragment_layout, container, false);
           return myFragmentView;
         }

        @Override
          public void onActivityCreated(Bundle savedInstanceState) {
           super.onActivityCreated(savedInstanceState);

                    mAdapter = new AlbumsAdapter(getActivity(), null);
                    setListAdapter(mAdapter);
                    getLoaderManager().initLoader(0, null, this);                               
        }

static final String[] ALBUM_SUMMARY_PROJECTION = { MediaStore.Audio.Albums._ID, MediaStore.Audio.Albums.ALBUM, MediaStore.Audio.Albums.ARTIST};  

        public Loader<Cursor> onCreateLoader(int id, Bundle args) {      
            String select = null;  
            return new CursorLoader(getActivity(), MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI,ALBUM_SUMMARY_PROJECTION, select, null, null);  
        }  

        public void onLoadFinished(Loader<Cursor> loader, Cursor data) {  
            mAdapter.swapCursor(data);  
        }  

        public void onLoaderReset(Loader<Cursor> loader) {  
            mAdapter.swapCursor(null);  
        }  
    } 
```

就是这样！我不知道为什么没有人购买过这样一个关于如何使用 LoaderManager、CursorLoader 和自定义适配器来填充自定义列表视图的非常简单的示例。无论如何，我希望这对将来像我这样的初学者有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:55:41.907

我认为您`mAdapter`是`null`（如果您对其进行了初始化，我看不到您在哪里初始化它），并且当您尝试交换光标时，它会引发该异常。

如果您没有初始化该`AlbumAdapter`引用，那么您应该在设置适配器之前执行它：

```
mAdapter = new AlbumsAdapter(getActivity(), null);
setListAdapter(mAdapter); 
```

# javascript - 从字符串中删除图像元素

> ID：11025352
> 
> 赞同：12
> 
> 时间：2012-06-14T00:46:27.270
> 
> 标签：javascript, jquery, string, image

我有一个字符串，其中包含存储在 var 中的 HTML 图像元素。

我想从字符串中删除图像元素。

我努力了：`var content = content.replace(/<img.+>/,"");`

和：`var content = content.find("img").remove();`但没有运气。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-14T01:08:53.260

```
var content = content.replace(/<img[^>]*>/g,""); 
```

`[^>]*`表示除 之外的任意数量的字符`>`。如果您`.+`改用，如果有多个标签，则替换操作会立即将它们全部删除，包括它们之间的任何内容。默认情况下，操作是贪婪的，这意味着它们使用最大可能的有效匹配。

`/g`最后意味着替换所有出现（默认情况下，它只删除第一次出现）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T01:03:14.767

```
$('<p>').html(content).find('img').remove().end().html() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-21T13:15:10.457

# 以下正则表达式应该可以解决问题：

```
var content = content.replace(/<img[^>"']*((("[^"]*")|('[^']*'))[^"'>]*)*>/g,""); 
```

它首先匹配`<img`. 然后`[^>"']*`匹配除 , 之外的任何字符`>`，`"`并且 匹配任意`'`次数。然后`(("[^"]*")|('[^']*'))`匹配两个`"`之间的任何字符（除了`"`它本身，这是这部分`[^"]*`）或相同的东西，但有两个`'`字符。

> 一个例子是`"asf<>!('"`or `'akl>"<?'`。

这之后又是任何字符，除了`>`,`"`和 `'`任意次数。正则表达式在找到一`>`组单引号或双引号之外的值时结束。

[正如@Derek 朕会功夫](https://stackoverflow.com/users/283863/derek)`>`所指出的那样，这将解释属性字符串中包含字符的原因，因此将在以下测试场景中匹配并删除所有四个图像标签：

```
<img src="blah.png" title=">:(" alt=">:)" /> Some text between <img src="blah.png" title="<img" /> More text between <img /><img src='asdf>' title="sf>"> 
```

这当然是受到[@Matt Coughlin](https://stackoverflow.com/users/1306809/matt-coughlin)回答的启发。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-14T00:48:41.277

使用该[`text()`](http://api.jquery.com/text/)功能，它将删除所有 HTML 标签！

```
var content = $("<p>"+content+"</p>").text(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-25T02:38:42.107

我现在在 IE 中...这很好用，但是我的标签以大写形式出现（我认为在使用 innerHTML 之后）...所以我添加了“i”以使其不区分大小写。现在 Chrome 和 IE 很高兴。

```
var content = content.replace(/<img[^>]*>/gi,""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T00:59:54.777

这对你有用吗？：

```
var content = content.replace(/<img[^>]*>/g, '') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T01:04:58.353

您可以将文本加载为 DOM 元素，然后使用 jQuery 查找所有图像并删除它们。我通常尝试将 XML（在这种情况下为 html）视为 XML，而不是尝试解析字符串。

```
var element = $('<p>My paragraph has images like this <img src="foo"/> and this <img src="bar"/></p>');

element.find('img').remove();

newText = element.html();

console.log(newText); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-09T14:19:19.217

要在没有正则表达式或库（阅读 jQuery）的情况下执行此操作，您可以使用 DOMParser 解析您的字符串，然后使用纯 JS 进行任何操作并重新序列化以取回您的字符串。

# javascript - socket.io 在 Firefox 中抛出 NS_ERROR_NOT_CONNECTED

> ID：11025353
> 
> 赞同：10
> 
> 时间：2012-06-14T00:46:42.870
> 
> 标签：javascript, firefox, socket.io

我们的一些 Windows 用户在使用 Firefox 12 时遇到了 socket.io 问题。一个人使用的是 XP，另一个人使用的是 Vista。火狐 13 没问题。

```
uncaught exception: [
  Exception... "Component returned failure code: 0x804b000c (NS_ERROR_NOT_CONNECTED)" 
  nsresult: "0x804b000c (NS_ERROR_NOT_CONNECTED)"
  location: "JS frame :: ...socket.io.js :: :: line 2" data: no
] 
```

错误发生在 socket.io 客户端 js 文件的第二行。我不确定这个错误是在 FF12 中持续发生还是偶尔发生。向我报告此问题的人一直在看到它。

我发现的最接近的是：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=732363) ://bugzilla.mozilla.org/show_bug.cgi?id=732363 。这让我相信这是FF中的一个错误。但我不确定。

这是FF中的错误吗？或者它可能在我的代码中？如果是后者，什么类型的代码可能会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T23:04:07.503

如果您尝试强制使用另一个传输协议，例如`xhr-polling`通过更改启动 socket.io 的节点服务器上的传输。

```
io.set('transports', ['websocket','xhr-polling','jsonp-polling']); 
```

一次尝试一个。从底部开始，努力工作。

到目前为止，我不确定是否只是建议进行测试，因为我遇到了许多与传输相关的奇怪浏览器/套接字问题。

最糟糕的问题是客户认为他们可以做 flashsocket 并最终失败，因此我的传输看起来像上面而不是“默认”。

# postgresql - 来自自制软件的 osm2pgsql 和 postgresql 9.1 无法在 Mac 上连接

> ID：11025356
> 
> 赞同：3
> 
> 时间：2012-06-14T00:46:59.130
> 
> 标签：postgresql, homebrew, openstreetmap

我已经用自制软件安装了 osm2pgsql 和 postgresql (9.1)，并且我已经确认 /usr/local/bin/osm2pgsql 和 /usr/local/bin/psql 是我的系统正在使用的版本（使用 which psql，which osm2pgsql） .

当我尝试运行 osm2pgsql 时，出现一个奇怪的连接错误：

```
osm2pgsql us-south.osm.pbf -r pbf
osm2pgsql SVN version 0.80.0 (32bit id space)

Error: Connection to database failed: could not connect to server: Permission denied
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

有什么建议么？我可以使用 Navicat 和 psql 在本地连接到我的数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T07:05:27.917

添加“ `-H localhost`”为我解决了这个问题。

例如：

```
osm2pgsql us-south.osm.pbf -H localhost -r pbf 
```

看[这里](http://cartometric.com/blog/2012/12/18/osm2pgsql-and-windows-errors-failed-to-start-msvcr90-dll-connection-to-database-failed-etc/)。

# ruby - Ruby中是否有C#的`#region`关键字这样的东西

> ID：11025360
> 
> 赞同：6
> 
> 时间：2012-06-14T00:47:51.767
> 
> 标签：ruby

在 C# 中，我可以使用`#region`关键字来分隔代码块。Ruby中是否存在类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T03:41:29.333

简短的回答：没有。

长答案：ruby 语言没有强制执行代码折叠或注释样式约定。但是，您可以使用自己的约定对方法进行分组，并设置您的文本编辑器以适合您的方式折叠代码（[http://vim.wikia.com/wiki/Folding](http://vim.wikia.com/wiki/Folding)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-02T21:18:31.367

许多人不会喜欢这个答案，但它很简单，而且很有效

```
if region1=true

    #your code/comments here

end #region1 
```

这当然是，如果`region1`不是您在该范围内需要的变量

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T12:31:05.567

我的建议：将 C# 中的代码`#region`放入 ruby`module`​​ 中。

C# 中的[#region](http://msdn.microsoft.com/en-us/library/9a1ybwek%28v=vs.80%29.aspx)注释用于 Visual Studio 中的代码折叠。您可以将类似的代码分组到一个区域中，例如：

```
#region Some Info here to see when folded
 methodA() {}
 methodB() {}
#endregion 
```

如果您发现自己在问“是否有与 C Sharp 区域等效的 ruby​​”，那么是时候看看ruby​​ 语言中的[模块了。](http://ruby-doc.org/core-1.9.3/Module.html)使用模块，您可以对代码进行分组并在类之间共享代码（而不是使用继承、接口或其他）。

例子：

```
class A
  module AMod # you can put the module into a file, too
    def a_method
      # do stuff
    end
    # some methods
  end

  include AMod
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T04:06:16.527

我的回答：使用 Emacs。它似乎没有回答你的问题，但确实如此。

# python - 尝试制作可折叠的小部件：如何隐藏/取消隐藏所有子小部件？

> ID：11025365
> 
> 赞同：1
> 
> 时间：2012-06-14T00:48:37.690
> 
> 标签：python, widget, pyqt

我正在制作一个简单的小部件，可以充当其他小部件的容器。小部件的功能之一是您可以通过单击它来展开/折叠它。我目前的方法基本上是查找布局的所有子小部件并隐藏它们。我正在寻找有关如何正确处理此问题的任何帮助-我当前的实现至少有一个严重的警告：您不能在折叠时添加小部件（它们以“未隐藏”状态添加）

`setCollapsed`这是单击小部件时运行的方法

```
def collapsed(self):
    return self._isCollapsed
def setCollapsed(self, collapseBool):
    self._isCollapsed = collapseBool
    if self.layout()!=None:
        childWidgets = [self.layout().itemAt(i).widget() for i in range(self.layout().count())]
        for w in childWidgets:
            if isinstance(w,QtGui.QWidget):
                w.setHidden(collapseBool)
        if collapseBool:
            self._cachedMargin = self.layout().margin()
            self.layout().setMargin(0)
        else:
            self.layout().setMargin(self._cachedMargin) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:36:31.833

我不会单独隐藏所有子小部件，而是隐藏一个父项。

# vb.net - 如何从 VB.NET 2010 中的 webbrowser 对象获取 POSTDATA？

> ID：11025370
> 
> 赞同：0
> 
> 时间：2012-06-14T00:49:00.923
> 
> 标签：vb.net, visual-studio-2010, beforenavigate2

我知道在以前的 VB 版本中，webbrowser 对象有一个 beforenavigate2 事件，它提供了对 webbrowser 的 postdata 的访问。

我进行了搜索和搜索，我认为该事件在 Visual Studio 2010 中被禁用。

关于如何从 webbrowser 对象中获取 postdata 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:38:58.147

我知道这是一个老问题，但我在同一个问题上苦苦挣扎，现在想在这里分享答案。这个答案的[功劳归于 luchosrock](https://stackoverflow.com/users/858578/luchosrock)，因为他是那个教我的人。

如果您有一个名为**browser的**[System.Windows.Forms.WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)对象的实例，您可以实现自己的处理程序来控制[Navigating](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigating.aspx)事件（在某种程度上等同于 BeforeNavigate2）并使用[System.Net.WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)和[System .Net.WebResponse](http://msdn.microsoft.com/en-us/library/system.net.webresponse.aspx)来自其中的对象：

 **```
Imports System.IO
Imports System.Net
Imports System.Windows.Forms
'[...]
Private Sub browser_Navigating(sender As Object, _ 
                               e As WebBrowserNavigatingEventArgs) _ 
                           Handles browser.Navigating

    Dim req As WebRequest
    Dim res As WebResponse
    Dim postDataStream As Stream
    Dim WebResponse As String = ""
    '[...]
    Try
        req = WebRequest.Create(e.Url.ToString)
        req.Method = "POST"
        res = req.GetResponse
        postDataStream = res.GetResponseStream
        Dim webStreamReader As New StreamReader(postDataStream)
        While webStreamReader.Peek >= 0
            WebResponse = webStreamReader.ReadToEnd
        End While
    Catch ex As Exception
        ' Exception control code here
    End Try
    '[...]
End Sub 
```

这与从**BeforeNavigating2**事件中直接访问**PostData**对象不同，但我认为这是一个不错的选择。

 **如果这个答案不让您满意，那么在另一个问题中会有[这个答案](https://stackoverflow.com/a/5231774/1541625)，其中解释了一种方法来直接处理旧的**BeforeNavigate2**事件。****

# javascript - Android WebView：链接指向框架时是否有onPageFinished？

> ID：11025374
> 
> 赞同：1
> 
> 时间：2012-06-14T00:49:44.677
> 
> 标签：javascript, android, webview, frames

在 web 视图中完成加载框架后，我正在尝试执行一些 javascript。

链接在这里：

```
<a target="viewer" href="./Inbox/?Cmd=contents&Page=1"> 
```

这是框架：

```
<frame scrolling="auto" src="Inbox/?Cmd=contents" title="Contents" name="viewer"> 
```

我可以使用以下内容，但这仅在整个页面是目标时才有效，而不仅仅是一个框架：

```
webview.setWebViewClient(new WebViewClient() {
    @Override
    public void onPageFinished(WebView view, String url) {
    }
} 
```

这是复古的代码，我无法更改，仅在事后添加了 JavaScript。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T03:33:52.600

我能够通过在 WebViewCLient @Override public void onLoadResource(WebView view,String urlNewString) { System.err.println("onLoadResource " + urlNewString); 中重载这个方法来获得结果。这将返回加载的所有 URL 资源，但也返回页面本身。我能够过滤掉 URL 地址中的信息，以便为每个帧打开的每个链接执行特定代码

# silverlight - 套接字编程：将消息从 Silverlight 应用程序外部发送到 Silverlight 应用程序，而不是跨两个 Silverlight 应用程序？

> ID：11025375
> 
> 赞同：0
> 
> 时间：2012-06-14T00:50:01.343
> 
> 标签：silverlight, sockets, messaging

除了研究这个特定场景的最后一天左右，我几乎没有使用套接字的经验，所以请耐心等待。

我有一个从 winforms 桌面应用程序中运行的标准 .NET 类库。我还有一个 Silverlight Out-Of-Browser 应用程序，这个类库/DLL 必须向它发送消息。

到目前为止，我发现的任何示例或示例的问题是，它们似乎总是将 Silverlight 应用程序用作客户端，而将外部源用作服务器。

在我的场景中，我的 DLL 需要尝试与 OOB silverlight 应用程序建立套接字连接（如果它正在运行）。如果该连接成功，则向其发送消息。因此，如果我正确地描绘了这一点，那么从生命周期的角度来看，我将如何做到这一点？

DLL 将被加载，并启动一个套接字服务器，然后该服务器将尝试连接到 OOB silverlight 应用程序中的套接字侦听器。如果该连接成功，发送消息？

这也意味着当 OOB Silverlight 应用程序启动时，在应用程序启动时，我将创建套接字侦听器并将其设置为侦听？

感谢您提供的所有信息。我再次查看了几个样本并阅读了不止几篇文章，我的大脑被炸了。只是出于某种原因没有点击我。请记住，这是针对 Silverlight 应用程序的“浏览器外”实例。不是网络托管版本。

这是我正在查看的最新示例项目：

[http://www.silverlightshow.net/items/SocketsLight-Silverlight-Sockets-Framework.aspx](http://www.silverlightshow.net/items/SocketsLight-Silverlight-Sockets-Framework.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:06:21.763

您可以从头到尾使用 COM 自动化。Silverlight OOB 可以连接到 COM 服务器。你想要的是相反的——即作为 COM 服务器的 Silverlight OOB。这就是你的做法。

将您的 Winforms 应用程序设计为引发类似于 COM 命令的事件的 COM 服务器。例如，而不是

```
event ButtonClicked(object sender, EventArgs e); 
```

做这个

```
event SilverlightDoThis(arg1, arg2, ...) 
```

# linux - 从命令行连接 Linux 中的 OpenDocument 文本文件

> ID：11025379
> 
> 赞同：4
> 
> 时间：2012-06-14T00:50:57.600
> 
> 标签：linux, command-line, openoffice.org, openoffice-writer, opendocument

有没有办法从命令行在 Linux 中连接两个 OpenDocument 文本文档（即 OpenOffice 使用的格式）？我正在寻找一个允许我执行以下操作的命令：

```
concat-docs doc1.odt doc2.odt doc3.odt -o alldocs.odt 
```

这个假设的命令将生成 alldocs.odt，其中一个接一个地包含 doc1、doc2 和 doc3。

我已经考虑在原始 xml 级别执行此操作，并且它相当复杂（重命名自动样式以避免冲突等），除非没有任何其他工具可以执行此操作，否则我不想这样做我想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:06:06.197

我现在无法仔细检查，但您可能想查看[Python-UNO 桥](http://www.openoffice.org/udk/python/python-bridge.html)或[OOoPy](http://ooopy.sourceforge.net)提供的一些选项。两者都有听起来像您可能想要做的实用程序。Python-UNO 桥有一个叫做**oomerge.py**的东西，它被描述为“一个命令行工具，它通过附加多个单个文档来创建一个新文档”，而 OOoPy 有一个实用程序是**ooo_cat**，它是“用于将多个 OOo 文件连接成一个”。

试试这些，然后把你的发现发回来......

# c# - 为什么我的 2 个 AsyncCallbacks 表现得像同步调用

> ID：11025386
> 
> 赞同：0
> 
> 时间：2012-06-14T00:53:17.390
> 
> 标签：c#

我相信我已经正确设置了这个。有人能看出这段代码有什么问题吗？它是否应该执行 IAsyncResult asyncResult1 然后立即移动到 IAsyncResult asyncResult2？行为是它调用 asyncResult1（调用 ExecuteAsyncRequest），其余服务将其保留一段时间，然后返回它并调用下一个。不应该只是 BeginGetResponse 然后继续下一个电话吗？

**WCF Rest Service web 方法是：**

```
 public Stream CheckOutForMaster(Stream clientServerXmlStream)
    {
       //Logic 1: Checks if it's between a set 30 second window.
       //Logic 2: Processes more logic
       //Logic 3: Holding pattern until the 30 second window is complete. Thus allowing multiple calls to be made via other connections.
       //Logic 4: Once 30 second window is complete. All connections have saved their  data to a database and each connection will retrieve all data from all connects.
    } 
```

**客户端测试代码：**

```
[TestClass]
public class sccTests
{
    public static ManualResetEvent allDone = new ManualResetEvent(false);
    const int BUFFER_SIZE = 1024;
    const int DefaultTimeout = 2 * 60 * 1000; // 2 minutes timeout
    List<XDocument> asyncClientServers;

    [TestMethod]
    public void CheckoutForMaster_OneClientServer_ReturnsAllMasterStatus()
    {
        string urlTest = CombineWithSccBaseUrl("/v1/clientservers/checkout");
        ...
        IAsyncResult asyncResult1 = ExecuteAsyncRequest(urlTest, xmlPayloadAllMaster);
        IAsyncResult asyncResult2 = ExecuteAsyncRequest(urlTest, xmlPayloadAllWait);
    }

    private IAsyncResult ExecuteAsyncRequest(string url, string payload)
    {
        try
        {

            byte[] bytes = Encoding.UTF8.GetBytes(payload);

            Uri uri = new Uri(url);
            // Create a HttpWebrequest object to the desired URL.
            HttpWebRequest myHttpWebRequest1 = (HttpWebRequest)WebRequest.Create(uri);
            myHttpWebRequest1.Method = "POST";
            myHttpWebRequest1.CachePolicy = new RequestCachePolicy(       RequestCacheLevel.NoCacheNoStore);
            myHttpWebRequest1.ContentLength = bytes.Length;
            myHttpWebRequest1.ContentType = "application/xml;charset=UTF-8";
            myHttpWebRequest1.Timeout = 105000;

            using (Stream putStream = myHttpWebRequest1.GetRequestStream())
            {
                putStream.Write(bytes, 0, bytes.Length);
            }

            // Create an instance of the RequestState and assign the previous myHttpWebRequest1
            // object to it's request field.  
            RequestState myRequestState = new RequestState();
            myRequestState.request = myHttpWebRequest1;

            // Start the asynchronous request.
            IAsyncResult result = myHttpWebRequest1.BeginGetResponse(new AsyncCallback(RespCallback), myRequestState);
        }
        catch (WebException e)
        {
            string t = e.Message;
        }
        catch (Exception e)
        {
            string t = e.Message;
        }

        return null;

    }

    private void RespCallback(IAsyncResult asynchronousResult)
    {
        try
        {
            // State of request is asynchronous.
            RequestState myRequestState = (RequestState)asynchronousResult.AsyncState;
            HttpWebRequest myHttpWebRequest2 = myRequestState.request;
            myRequestState.response = (HttpWebResponse)myHttpWebRequest2.EndGetResponse(asynchronousResult);

            // Read the response into a Stream object.
            Stream responseStream = myRequestState.response.GetResponseStream();
            myRequestState.streamResponse = responseStream;

            if(myRequestState.response != null && myRequestState.response.StatusCode == HttpStatusCode.OK)
            {
                StreamReader reader = new StreamReader(myRequestState.response.GetResponseStream(), Encoding.GetEncoding(1251));
                XDocument xResult = XDocument.Load(reader);
                asyncClientServers.Add(xResult);
            }
        }
        catch (WebException e)
        {
            // Need to handle the exception
        }
    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:57:57.810

这看起来很可疑：

```
using (Stream putStream = myHttpWebRequest1.GetRequestStream())
{
    putStream.Write(bytes, 0, bytes.Length);
}
// ... etc
IAsyncResult result = myHttpWebRequest1.BeginGetResponse(
                      new AsyncCallback(RespCallback), myRequestState); 
```

看起来您在调用 BeginGetResponse() 之前已经提出并完成了请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:25:25.427

[GetRequestStream](http://msdn.microsoft.com/en-us/library/d4cek6cc.aspx)的文档说：

> 您的应用程序不能为特定请求混合使用同步和异步方法。如果调用 GetRequestStream 方法，则必须使用 GetResponse 方法来检索响应。

它没有说明如果您尝试混合同步方法会发生什么，但是看到这样做会得到意想不到的结果，您可能想要使用`BeginGetRequestStream`.

# bash - 用于动态添加文件的 shell 脚本的配置文件 -ubuntu

> ID：11025388
> 
> 赞同：0
> 
> 时间：2012-06-14T00:54:49.950
> 
> 标签：bash, shell, ubuntu, configuration-files

我有这个 shell 脚本 myScript.sh 我正在尝试编写一个设置环境变量的配置文件。但由于我是一个 linux 新手，我对如何做到这一点感到困惑。

这就是 myScript.sh 的外观。

```
export $SERVICE_ROOT=/home/myPath
export $FILE1PATH=/home/myPath/file1
export $FILE2PATH=/home/myPath/file2

...
$SERVICE_ROOT/bin/integration.bin \
$FILE1PATH \
$FILE2PATH \
. . .
$FILENPATH

python pythonScript.py --arguments 
```

现在，我必须将所有硬编码放入配置文件中。由于在多个用户中可能要进行更改。所以我正在编写一个看起来像这样的 config.sh。

```
SERVICE="/home/myPath"
FILE1PATH=/home/myPath/file1
FILE2PATH=/home/myPath/file2 
```

在我调用的新 myscript.sh 中

```
export $SERVICE
export $FILEPATH1
export $FILEPATH2 
```

1）但我的问题是我首先做的是正确的事情吗？尽管有配置文件，但以某种方式设置环境变量没有意义，但我无法弄清楚该怎么做。

2）用户可能会在 N 之外添加 FILEPATHM 等。那么我应该如何修改 myScript.sh 以动态导出 n 之外的新文件名？

3) 我需要在我的 shell 脚本中调用 python 脚本，但名称可能会从一个用户更改为另一个用户。那么我如何声明确切的命令

```
python pythonScript.py --arguments 
```

无需在配置文件中执行它，但我应该能够随时在我的 shell 脚本中执行该命令。我试图使用

`python bla bla`命令，但不了解正确的操作方法。

任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:54:09.367

目前尚不清楚哪个文件做了什么以及它们如何组合在一起。一个文件可以替代另一个文件吗？一个文件会创建另一个文件吗？我认为如果你能澄清一些事情会有所帮助。

根据我认为你想要的：

myScript.sh：

```
#!/bin/bash
. ./config.sh

. . .
"$SERVICE_ROOT/bin/integration.bin" \
"$FILE1PATH" \
"$FILE2PATH" \
. . .
"$FILENPATH"

python pythonScript.py --arguments 
```

配置文件：

```
SERVICE_ROOT="/home/myPath"
FILE1PATH=/home/myPath/file1
FILE2PATH=/home/myPath/file2 
```

`source`命令（或`.`）读入命名文件并执行它，就好像它实际上是调用脚本的一部分一样。`include`它与其他语言的陈述非常相似。

更动态的版本可能如下所示：

myScript.sh：

```
#!/bin/bash
. ./config.sh

. . .
"$SERVICE_ROOT/bin/integration.bin" "${filepaths[@]}" 
```

配置文件：

```
SERVICE_ROOT="/home/myPath"
filepaths=(
    /home/myPath/file1
    /home/myPath/file2
) 
```

这个版本使用一个数组来保存路径。可以在括号之间的单独行上添加其他路径。当展开时，所有路径都作为参数立即提供`${filepaths[@]}"`。

# hadoop - Hadoop：Reducer 将 Mapper 输出写入输出文件

> ID：11025390
> 
> 赞同：4
> 
> 时间：2012-06-14T00:55:19.403
> 
> 标签：hadoop, mapreduce, reduce

我遇到了一个非常非常奇怪的问题。减速器确实可以工作，但如果我检查输出文件，我只能找到映射器的输出。当我尝试调试时，在将映射器的输出值类型从 Longwritable 更改为 Text 后，我​​发现字数示例存在相同的问题

```
 package org.myorg;

import java.io.IOException;
import java.util.*;

import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapreduce.*;
import org.apache.hadoop.mapreduce.lib.input.*;
import org.apache.hadoop.mapreduce.lib.output.*;
import org.apache.hadoop.util.*;

public class WordCount extends Configured implements Tool {

   public static class Map
       extends Mapper<LongWritable, Text, Text, Text> {
     private final static IntWritable one = new IntWritable(1);
     private Text word = new Text();

     public void map(LongWritable key, Text wtf, Context context)
         throws IOException, InterruptedException {
       String line = wtf.toString();
       StringTokenizer tokenizer = new StringTokenizer(line);
       while (tokenizer.hasMoreTokens()) {
         word.set(tokenizer.nextToken());
         context.write(word, new Text("frommapper"));
       }
     }
   }

   public static class Reduce
       extends Reducer<Text, Text, Text, Text> {
     public void reduce(Text key, Text wtfs,
         Context context) throws IOException, InterruptedException {
/*
       int sum = 0;
       for (IntWritable val : wtfs) {
         sum += val.get();
       }
       context.write(key, new IntWritable(sum));*/
    context.write(key,new Text("can't output"));
     }
   }

   public int run(String [] args) throws Exception {
     Job job = new Job(getConf());
     job.setJarByClass(WordCount.class);
     job.setJobName("wordcount");

     job.setOutputKeyClass(Text.class);
     job.setMapOutputValueClass(Text.class);
       job.setOutputValueClass(Text.class);
     job.setMapperClass(Map.class);
     //job.setCombinerClass(Reduce.class);
     job.setReducerClass(Reduce.class);

     job.setInputFormatClass(TextInputFormat.class);
     job.setOutputFormatClass(TextOutputFormat.class);

     FileInputFormat.setInputPaths(job, new Path(args[0]));
     FileOutputFormat.setOutputPath(job, new Path(args[1]));

     boolean success = job.waitForCompletion(true);
     return success ? 0 : 1;
         }

   public static void main(String[] args) throws Exception {
     int ret = ToolRunner.run(new WordCount(), args);
     System.exit(ret);
   }
} 
```

这是结果

```
JobClient:     Combine output records=0
12/06/13 17:37:46 INFO mapred.JobClient:     Map input records=7
12/06/13 17:37:46 INFO mapred.JobClient:     Reduce shuffle bytes=116
12/06/13 17:37:46 INFO mapred.JobClient:     Reduce output records=7
12/06/13 17:37:46 INFO mapred.JobClient:     Spilled Records=14
12/06/13 17:37:46 INFO mapred.JobClient:     Map output bytes=96
12/06/13 17:37:46 INFO mapred.JobClient:     Combine input records=0
12/06/13 17:37:46 INFO mapred.JobClient:     Map output records=7
12/06/13 17:37:46 INFO mapred.JobClient:     Reduce input records=7 
```

然后我在 outfile 中发现了奇怪的结果。这个问题发生在我将map的输出值类型和reducer的输入键类型更改为Text之后，无论我是否更改了reduce输出值的类型。我也被迫改变 job.setOutputValue(Text.class)

```
a   frommapper
a   frommapper
a   frommapper
gg  frommapper
h   frommapper
sss frommapper
sss frommapper 
```

帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:38:45.403

您的 reduce 函数参数应如下所示：

```
public void reduce(Text key, Iterable <Text> wtfs,
     Context context) throws IOException, InterruptedException { 
```

使用您定义参数的方式，reduce 操作不会获取值列表，因此它只会输出从 map 函数获得的任何输入，因为

```
sum+ = val.get() 
```

每次只是从 0 变为 1，因为`<key, value>`表单中的每一对`<word, one>`都分别进入减速器。

此外，映射器函数通常不会写入输出文件（我从未听说过，但我不知道这是否可能）。在通常情况下，写入输出文件的总是减速器。Mapper 输出是由 Hadoop 透明处理的中间数据。因此，如果您在输出文件中看到某些内容，那一定是 reducer 输出，而不是 mapper 输出。如果您想验证这一点，您可以查看您运行的作业的日志，并分别检查每个映射器和减速器中发生的情况。

希望这能为你清除一些事情。

# android - 通过android浏览器历史搜索

> ID：11025394
> 
> 赞同：1
> 
> 时间：2012-06-14T00:55:38.893
> 
> 标签：android, search, browser, keyword, browser-history

虽然我找到了一些代码来检索 android 浏览器历史记录，但我正在尝试编写的程序要求它可以搜索关键字。有人可以帮我将历史整理成一个列表吗？我在新的领域，所以源/教程将不胜感激。

我找到的代码（第二个答案）：[https ://stackoverflow.com/a/2583150/1406409](https://stackoverflow.com/a/2583150/1406409)

抱歉有任何错别字，但我正在尝试习惯在平板电脑上打字。

# php - PHP 和谷歌地图标记

> ID：11025395
> 
> 赞同：0
> 
> 时间：2012-06-14T00:55:43.090
> 
> 标签：php, google-maps

我不知道为什么我的谷歌标记没有显示。我正在使用 PHP 和 Java 脚本。我检查以确保`$DNB`其中有元素。这是我的代码：

```
while($DNB -> fetch())
{
?>
    var point  = new GLatLng(<?php echo intval($lat) ?>, <?php echo intval($lon) ?>);
    var marker = new google.maps.Marker({position: point, map:map});
<?php
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:10:50.703

从您提供的代码来看，虽然您的`$DNB`内部可能有内容，但您的 $lat 和 $lon 似乎没有初始化。

如果这不能解决您的问题，请参考我在下面的工作示例：

```
function initialize() {
    var myOptions = {
        zoom: 10,
        center: new google.maps.LatLng(0, 0),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(
        document.getElementById("map_canvas"),myOptions);
        setMarkers(map, beaches);
    }

    var beaches = [
                ['SANTA MONICA HEALTHCARE CENTER',34.0295,-118.481],
                ['BRENTWOOD NURSING & REHAB',34.0389,-118.47],
                ['FIRESIDE CONVALESCENT HOSPITAL',34.0218,-118.503],
                ['ARBOR VIEW REHAB AN WELLNESS CENTER',34.0291,-118.481],
                ['SEAPORT 17TH CARE CENTER',34.0272,-118.484],
                ['GOLDSTAR HEALTHCARE CTR SANTA MONICA',34.0256,-118.486],
                ['PACIFIC CONVALESCENT CENTER',34.0273,-118.484],
                ['GOOD SHEPHERD HEALTH CARE CENTER',34.0234,-118.49],
                ['BERKLEY WEST CONVALESCENT HOSPITAL',34.0272,-118.485],
                ['SANTA MONICA CONVALESCENT CENTER II',34.0241,-118.459],
                ['BERKLEY EAST CONVALESCENT HOSPITAL',34.0302,-118.481],
                ['SANTA MONICA CONVALESCENT CENTER I',34.0241,-118.459]
            ];

    function setMarkers(map, locations) {
        var bounds = new google.maps.LatLngBounds();
        for (var i = 0; i < locations.length; i++) {
            var beach = locations[i];
            var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
            var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: beach[0],
            zIndex: beach[3]
        });
        bounds.extend(myLatLng);
        map.fitBounds(bounds);
    }
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

# rsync - rsync 仅 *.php 文件

> ID：11025397
> 
> 赞同：3
> 
> 时间：2012-06-14T00:56:14.567
> 
> 标签：rsync

如何仅 rsync 镜像 *.php 文件？这也给了我一堆空的目录，我不想要那些。

```
rsync -v -aze 'ssh ' \
--numeric-ids \
--delete \
--include '*/' \
--exclude '*' \
--include '*.php' \
user@site.com:/home/www/domain.com \
/Volumes/Servers/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T08:55:59.367

这里的罪魁祸首是

```
--include '*/' 
```

当包含一个通配符后跟一个正斜杠时，您告诉 rsync 传输所有以“/”结尾的文件（即所有目录）。
因此，

```
rsync -v -aze 'ssh ' \
--numeric-ids \
--delete \
--exclude '*' \
--include '*.php' \
user@site.com:/home/www/domain.com \
/Volumes/Servers/ 
```

如果您因为打算递归查找所有 .php 文件而使用它，则必须使用 ** 通配符。那是， `--include '**/*.php'`

另一种方法（[http://www.commandlinefu.com/commands/view/1481/rsync-find](http://www.commandlinefu.com/commands/view/1481/rsync-find)）是预先找到目标文件，然后使用rsync，

```
find source -name "*.php" -print0 | rsync -av --files-from=- --from0 ./ ./destination/ 
```

# .htaccess - 如何使用 htaccess 重写 URL 以删除目录？

> ID：11025400
> 
> 赞同：1
> 
> 时间：2012-06-14T00:56:26.750
> 
> 标签：.htaccess, url-rewriting

我有以下网址：

www.domain.com/test/blog/index.html

我希望 apache 始终重写 url，以便删除“test”，从而导致：

www.domain.com/blog/index.html

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:03:10.953

这应该做得很好

```
Options +FollowSymLinks

RewriteEngine on
RewriteCond %{REQUEST_URI} !(.*)test
RewriteRule ^(.*)$ test/$1 [L] 
```

这将从您指定的 url 中删除子目录；似乎您遇到的任何其他问题都与`.htaccess`文件中的其他内容有关，这些内容弄乱了符号链接。

我建议查看 Apache 错误日志以准确指出错误是什么。

希望这可以帮助。

# c++ - QPainter 不会改变颜色

> ID：11025404
> 
> 赞同：2
> 
> 时间：2012-06-14T00:56:47.360
> 
> 标签：c++, qt, qpainter

我在学习`Qt`。我没有意识到[Qt 教程第 11 章的练习](https://doc.qt.io/archives/4.3/tutorial-t11.html)，其中指出“在空中射击时更改大炮的颜色”。我选择在paintCannon 函数中实现更改（如下）。我下面的代码有什么问题？

```
void CannonField::paintCannon(QPainter &painter)
{
    painter.setPen(Qt::NoPen);
    if (autoShootTimer->isActive()){

        std::cout << "in paintCannon yellow; "  << std::endl; 
        // This gets called everytime `paintEvent` occurs. 
        // Please see the code in the web page (http://doc.trolltech.com/4.3/tutorial-t11-cannonfield-cpp.html) for this part.

        painter.setBrush(Qt::yellow);
    }else{
        std::cout << "in paintCannon blue; "  << std::endl;
        painter.setBrush(Qt::blue);
    }

    painter.save();
    painter.translate(0, height());
    painter.drawPie(QRect(-35, -35, 70, 70), 0, 90 * 16);
    painter.rotate(-currentAngle);
    painter.drawRect(barrelRect);
    painter.restore();
} 
```

由于我首先怀疑`Qpainter`'s`save`并且`restore`可能做错了什么，所以我将它们注释掉，最终没有重新绘制。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:01:03.247

您遇到的问题是在这个例程中：

```
void CannonField::moveShot()
{
    QRegion region = shotRect();
    ++timerCount;

    QRect shotR = shotRect();

    if (shotR.x() > width() || shotR.y() > height())
    {
        autoShootTimer->stop();
    } 
    else
    {
        region = region.unite(shotR);
    }
    update(region);
} 
```

当镜头移动时，`update()`正在调用指定的区域。这导致仅重新绘制镜头矩形。如果您从对 的调用中删除该区域`update()`，则整个小部件将被重新绘制，并且您的颜色更改将正常工作。

# php - Facebook PHP SDK 上次状态

> ID：11025408
> 
> 赞同：0
> 
> 时间：2012-06-14T00:57:29.743
> 
> 标签：php, facebook, facebook-graph-api

IM 在 facebook 上使用 php sdk for graph api。我正在尝试提取用户的最后状态更新。问题是我无法让它工作..有人有一个快速的代码示例吗？

编辑：我已经让它工作了，但无法让数组列出最后 3 个喜欢这里是我的代码：

```
$username = $user_profile['username'];
$status = $facebook->api('/'.$username.'/feed?likes=5');

$likes = $facebook->api('/me/likes?limit=5');
echo 'Likes: <br>';

echo $likes['data'][0]['name'] . '<br>'; 
```

# testing - 与shopify应用程序测试和开发相关的问题

> ID：11025409
> 
> 赞同：1
> 
> 时间：2012-06-14T00:57:30.347
> 
> 标签：testing, shopify

1.  我在合作伙伴仪表板中找不到*发布 Beta App*按钮，如何真正测试我的应用程序？我已经使用私有应用 API 进行了测试。

2.  如果店主在应用发布后点击应用商店的安装按钮会发生什么？以及如何获取有关客户端的变量？我跟踪了一个应用程序的安装，得到：

    [http://app.com/shopify/?shop=schuppe-conn-and-oconner436.myshopify.com&t=ed8f063be7d4583fbd194836b12599b3×tamp=1339572934&signature=e7451b42b2fd5f67465c0b98bcaf7668](http://app.com/shopify/?shop=schuppe-conn-and-oconner436.myshopify.com&t=ed8f063be7d4583fbd194836b12599b3&timestamp=1339572934&signature=e7451b42b2fd5f67465c0b98bcaf7668)

    但是一些文件说我会得到类似的东西：

    [http://app.com/shopify?code=TEMP_TOKEN](http://app.com/shopify?code=TEMP_TOKEN)

    哪个是对的？

3.  关于PHP库：[https](https://github.com/cmcdonaldca/ohShopify.php) ://github.com/cmcdonaldca/ohShopify.php 我可以获得限时经营店铺的权限，但是后期如何获得权限呢？（我无法让店主再次点击安装按钮）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T00:44:28.020

当有人在 Shopify 应用商店中单击“安装”按钮时，他们将被重定向到您的应用 URL *（如果您使用 OAuth，则返回 URL）*`shop` ，并附有请求的参数。

使用您的示例，当我在 App Store 中单击“安装”时，我被重定向到`http://app.com/shopify/?shop=schuppe-conn-and-oconner436.myshopify.com`. 在您的应用程序中，您所要做的就是检查该参数是否存在，并做出相应的响应。

在 Ruby 中，这看起来像：

```
if params[:shop].present?
  redirect_to "/auth/shopify?shop=#{params[:shop]}"
else
  # render the normal page
end 
```

至于PHP问题：

> 关于PHP库：[https](https://github.com/cmcdonaldca/ohShopify.php) ://github.com/cmcdonaldca/ohShopify.php我可以获得限时经营店铺的权限，但是后期如何获得权限呢？（我无法让店主再次点击安装按钮）。

我认为您缺少的是，当您通过 OAuth 流程时，您应该有一个需要保存的令牌。需要此令牌以及应用程序的共享密钥来构建连接到 API 所需的 URL。这就是 ohShopify 为会话所做的事情，但是如果您需要在没有商家*（Shopify 店主）*登录的情况下连接到 API，那么您需要存储该 OAuth 令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:01:27.653

我建议您将问题拆分为每个线程一个。我在这里回答一个。

> 关于PHP库：[https](https://github.com/cmcdonaldca/ohShopify.php) ://github.com/cmcdonaldca/ohShopify.php我可以获得限时经营店铺的权限，但是后期如何获得权限呢？（我无法让店主再次点击安装按钮）。

用于访问商店 API 的计算密码不会过期或更改，直到从商店卸载应用程序或应用程序请求并接收不同范围的 API 访问权限。

# javascript - 如何在Javascript中声明一个字节数组

> ID：11025414
> 
> 赞同：7
> 
> 时间：2012-06-14T00:59:20.983
> 
> 标签：javascript

我正在做服务器端 javascript，我需要有一个特定大小的字节类型数组。我试过 ：

```
var buf = [1024]; (guives me Cannot convert org.mozilla.javascript.NativeArray@1e565bd to byte[] error)
var buf = byte[1024]; (wrong synthax) 
```

什么是合成器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T01:21:33.780

这取决于您使用的服务器端 JavaScript 包。不同的包实现了不同风格的 JavaScript 和不同版本的 ECMAScript。

在 NodeJS v0.6.x 中，您可以访问类型化数组。创建这些数组之一相当简单。

```
// creating an array of bytes, with 1024 elements
var bytes = new Uint8Array(1024); 
```

还有其他类型的数组可用，处理 16 位和 32 位整数。

```
// creating an array of 16 bit integers, with 128 elements
var array_16bit = new Uint16Array(128);

// creating an array of 32 bit integers, with 16 elements
var array_32bit = new Uint32Array(16); 
```

使用类型化数组时，需要牢记几件事。类型化数组不继承标准数组原型，并且这些数组具有不可变的长度。

# hadoop - ItemSimilarityJob 用户文件（或项目文件）

> ID：11025417
> 
> 赞同：0
> 
> 时间：2012-06-14T01:00:09.667
> 
> 标签：hadoop, mahout, recommendation-engine

我正在使用 Mahout`ItemSimilarityJob`来计算项目之间的相似性。有什么方法可以应用类似于 to参数`usersfile`的东西吗？我想要的不是每次运行时都有一个完整的相似度矩阵，而只是针对某些项目。想想我每天可能有 1000 个新项目。所以我想避免计算我之前看到的项目之间的相似度（因为我已经计算过了）。`RecommenderJob``ItemSimilarityJob`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:56:55.757

我不知道，但您可以相当轻松地添加它并将其贡献回项目。

# java - 竹子安装软件

> ID：11025418
> 
> 赞同：0
> 
> 时间：2012-06-14T01:00:13.003
> 
> 标签：java, build, installation, bamboo

我正在研究一种使用竹子将复杂的环境更改分发给我们的开发团队的方法。我们有多个团队，它们都需要一个环境，每个团队都为该环境贡献工件。

其中一个问题是需要在所有开发盒上安装特定的第三方软件，每个团队都不同。此软件版本经常更改，并且对于每个开发人员来说，在它更改时进行设置是一件很痛苦的事情。是否可以在每个开发人员桌面上使用竹代理和远程代理来设置该软件的初始安装和更新？

例如：团队 A 需要第三方软件 A（不断变化，团队 B 需要第三方软件 B（不断变化），团队 A 和团队 B 都需要拥有最新的第三方软件 A 和第三方软件 B 才能运行他们的本地构建和测试......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:49:12.910

Bamboo 可以做到这一点，为您提供一个仪表板来完成在机器上安装第三方软件的工作，但是 Bamboo 更多的是执行脚本或安装可执行文件的编排。

您的问题听起来确实像是您会使用[Puppet](http://puppetlabs.com/)或其他等效工具。这是用于描述如何设置环境的特定软件，因此它更像是一种实现工具，它使用自己的语言来描述用户、文件和软件包等。我发现它对于设置我自己的环境非常有用(dev) 与运行构建的 CI 环境完全相同。

但是，您始终可以使用 Bamboo 来运行 puppet！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:18:55.393

您是在谈论开发环境上的自动部署吗？用竹子可以很容易地做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:18:34.560

正如其他人所说，Bamboo 可以做到这一点，但你看过 Attunity Replicate 吗？

[调谐复制](http://www.attunity.com/products/attunity-replicate)

# ruby - ruby rspec：在模拟对象期望方法参数上设置任意约束

> ID：11025422
> 
> 赞同：1
> 
> 时间：2012-06-14T01:00:33.003
> 
> 标签：ruby, rspec, mocking

你如何限制 RSpec 中传递给模拟对象方法的允许参数值？（假设先前已在该模拟对象上设置了期望）

例如，我想做这样的事情：

```
@myMockObject.should_receive(:logValue).at_least(:once).with(anything(), should be > 0) 
```

也就是说，我想指定 @myMockObject 接收对 logValue() 的方法调用，第一个参数为任何内容，第二个参数为任何大于 0 的整数。不幸的是，上面的代码不能像写的那样工作。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:08:21.193

```
@myMockObject.should_receive(:log_value) do |arg1, arg2|
  arg2.should be > 0
end.at_least(:once) 
```

# desire2learn - Valence API Application XXX 正在尝试访问您的信息。

> ID：11025425
> 
> 赞同：1
> 
> 时间：2012-06-14T01:00:54.580
> 
> 标签：desire2learn

当用户第一次访问我的 Valence 应用程序时，有一种方法可以删除此检查？

> xxx 的应用程序 xxx 正在尝试访问您的信息。您想继续吗？不要再问我这个申请

不要再问我这个申请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:08:00.423

无法删除此检查。这是一个重要的变化，以便能够拥有一个与其他工具一样出现的应用程序，我知道它正在为未来的版本进行跟踪。

# java - 在没有 Apache 的情况下从 301 重定向中获取 URL

> ID：11025427
> 
> 赞同：0
> 
> 时间：2012-06-14T01:01:18.550
> 
> 标签：java, sockets, redirect

我的公司不使用 Apache，所以我们编写了自己的套接字代码。在下文中，HTMLDoc 是我的服务器响应版本。如果原始 URL 给出 301 响应代码，我正在尝试获取浏览器将重定向到的 URL：

```
 static public void main(String args[]) throws Exception
{

    String spec = "http://some_url_with_301_redirect.com";
    URL my_url = new URL(spec);

    HTMLDoc doc = getDocFromURL(my_url);

    // Do stuff with the doc.
}

public static HTMLDoc getDocFromURL(URL url)
{
    try
    {
        URLConnection u = url.openConnection();

        if ( u instanceof HttpURLConnection )
        {
            HttpURLConnection http_u = (HttpURLConnection)u;

            int response_code = http_u.getResponseCode();

            if (response_code == 300 || response_code == 301 || response_code == 302)
            {
                URL redirected_url = getRedirectedURL(url);

                return getDocFromURL(redirected_url);
            }
        }

        return null;
    }

    catch(Exception e) 
    {
        e.printStackTrace();
        return null;
    }
} 
```

问题是，我不知道 getRedirectedURL(url) 方法应该是什么样子。是否可以快速拨打我不熟悉的 http_u 电话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:04:03.237

HTTP [301 响应](http://en.wikipedia.org/wiki/HTTP_301)总是伴随着一个`Location`标头。一个典型的反应看起来像

```
HTTP/1.1 301 Moved Permanently
Location: http://www.example.org/index.asp 
```

您可以阅读此标头并获取重定向的 URL。Jon Lin 在上面的评论中发布的链接中提到了执行此操作的[示例代码。](https://stackoverflow.com/questions/2659000/java-how-to-find-the-redirected-url-of-a-url)

# clojure - 在 Datomic 中，我如何获得对特定实体的值所做更改的时间线视图？

> ID：11025434
> 
> 赞同：12
> 
> 时间：2012-06-14T01:02:58.760
> 
> 标签：clojure, datomic

我正在学习教程[http://www.datomic.com/company/resources/tutorial](http://www.datomic.com/company/resources/tutorial)但我认为我错过了如何访问 Datomic 时间模型的简单难题。

如果我做一系列的添加和撤回

```
;; DO a series of transactions 
;; (transact conn [:db/add entity-id attribute value0])

(use 'datomic.api)
(dir datomic.api)
(def conn (connect "datomic:dev://localhost:4334/demo"))

(transact conn '[:db/add 2000 :db/doc "Hello There"])
(q '[:find ?e ?n :where [?e :db/doc ?n] [(= 2000 ?e)]] (db conn))
; => <HashSet [[2000 "Hello There"]]>

(transact conn '[:db/add 2000 :db/doc "Hello There 1"])
(q '[:find ?e ?n :where [?e :db/doc ?n] [(= 2000 ?e)]] (db conn))
; => <HashSet [[2000 "Hello There 1"]]>

(transact conn '[:db/add 2000 :db/doc "Hello There 2"])
(q '[:find ?e ?n :where [?e :db/doc ?n] [(= 2000 ?e)]] (db conn))
; => <HashSet [[2000 "Hello There 2"]]>

(transact conn '[:db/add 2000 :db/doc "Hello There 3"])
(q '[:find ?e ?n :where [?e :db/doc ?n] [(= 2000 ?e)]] (db conn))
; => <HashSet [[2000 "Hello There 3"]]> 
```

如何获得（实体 2000 属性：db/doc）上的值的一系列更改？

我想得到一些格式的东西

```
[ [Transaction Number, Time, Value] .... [Transaction Number, Time, Value]] 
```

例如：

```
[ [T1, "2012-March-16-9:30:12", "Hello There"] 
  .... 
  .... 
  .... 
  [T27, "2012-June-14-9:54:38", "Hello There 3"] ] 
```

不会那么难，但是有很多 :db 内部参数我不熟悉。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T01:43:13.033

看一下参考资料中的`(history db)`函数[。](http://docs.datomic.com/clojure/index.html#datomic.api/history)

> 返回一个特殊的数据库，其中包含跨时间的所有断言和撤回。这个特殊的数据库可用于 datoms 和 index-range 调用和查询，但不能用于实体或 with 调用。也支持 as-of 和 since 边界。请注意，查询将获得所有的添加和撤回，可以通过第五个 datom 字段来区分：add (true for add/assert) [eav tx added]

使用`history`您可以执行以下操作来获取所需的数据：

```
datomic-test.core> (q '[:find ?tx ?tx-time ?v 
                        :in $ ?e ?a 
                        :where [?e ?a ?v ?tx _] 
                               [?tx :db/txInstant ?tx-time]] 
                      (d/history (db conn)) 
                      2000 
                      :db/doc)
#<HashSet [[13194139534315 #inst "2012-09-09T00:45:49.086-00:00" "Hello There"] [...]]> 
```

还要查看`(tempid :db.part/user)`获取 ID，而不是使用硬编码的数字，例如`2000`.

# c++ - OpenGL深度不起作用，三角形消失

> ID：11025436
> 
> 赞同：2
> 
> 时间：2012-06-14T01:03:04.517
> 
> 标签：c++, opengl, glut

由于某种原因，我无法检测到我无法为任何三角形设置 az 索引。三角形将在相同的深度显示，从 1 到 -1（含），但之后它会消失。我没有应用任何 MVP 矩阵（试图首先弄清楚这一点），并且我希望能够看到我的三角形随着 z 值的减小而变小。这是我到目前为止所拥有的：

```
//My main function
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_RGBA|GLUT_ALPHA|GLUT_DOUBLE|GLUT_DEPTH);
glutInitWindowSize(640, 480);
glutCreateWindow("Window");

if (init_resources()) {
    glutDisplayFunc(onDisplay);
    glutIdleFunc(idle);
    glEnable(GL_BLEND);
    glEnable(GL_DEPTH_TEST);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glutKeyboardFunc(keyboard);
    glutMouseFunc(mouse);
    glutMainLoop();
}

//And in my display function
glClear(GL_COLOR_BUFFER_BIT| GL_DEPTH_BUFFER_BIT); 
```

并使用我的顶点着色器：

```
gl_Position = vec4(coord2d, 0.0, 1.0); 
```

`glGetIntegerv(GL_DEPTH_BITS, &depth)`也返回 24。

编辑：完整代码

```
Sprite *sprite1;
Sprite *sprite2;

GLuint program;
GLuint cameraAttribute;

int init_resources()
{   

    //Link shaders, create program and attach shaders
    GLint link_ok = GL_FALSE;
    GLuint vs, fs;
    if ((vs = create_shader("vertShader.sh", GL_VERTEX_SHADER))   == 0) return 0;
    if ((fs = create_shader("fragShader.sh", GL_FRAGMENT_SHADER)) == 0) return 0;

    program = glCreateProgram();
    glAttachShader(program, vs);
    glAttachShader(program, fs);

    glLinkProgram(program);
    glGetProgramiv(program, GL_LINK_STATUS, &link_ok);
    if (!link_ok) {
        fprintf(stderr, "glLinkProgram:");
        print_log(program);
        return 0;
    }

    //Create Attributes
    cameraAttribute = glGetUniformLocation(program, "camera");
    if(cameraAttribute == -1){
        cout << "Error!";
    }

    //Init sprites
    sprite1 = new Sprite();
    sprite2 = new Sprite();

    return 1;
}

void onDisplay()
{
    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT| GL_DEPTH_BUFFER_BIT);
    glUseProgram(program);

    sprite1->render();
    sprite2->render();

    glutSwapBuffers();
}

void idle()
{

    //Create Projection Matrix to change clip space.
    mat4 projectionMatrix = perspective(60.0f, (float)glutGet(GLUT_WINDOW_WIDTH) / (float)glutGet(GLUT_WINDOW_HEIGHT), 0.1f, 100.f);
    glUniformMatrix4fv(cameraAttribute, 1, GL_FALSE, &projectionMatrix[0][0]);

}

void free_resources()
{
    glDeleteProgram(program);
}

int main(int argc, char* argv[]) {
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA|GLUT_ALPHA|GLUT_DOUBLE|GLUT_DEPTH);
    glutInitWindowSize(640, 480);
    glutCreateWindow("My Second Triangle");
    glEnable(GL_BLEND);
    glEnable(GL_DEPTH_TEST);

    if (init_resources()) {
        glutDisplayFunc(onDisplay);
        glutIdleFunc(idle);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

        //uses glGetError to check for how many errors there are.
        cout << CheckGLErrors() << "\n";

        glutMainLoop();
    }

    free_resources();
    return 0;
} 
```

还有我的精灵文件：

```
#include "Sprite.h"

Sprite::Sprite(){
    init();
}

void Sprite::init(){

    GLfloat triangle_vertices[] = {
        0.0,  0.8f,
        -0.8f, -0.8f,
        0.8f, -0.8f,
    };

    //Set attributes
    locationAttribute = glGetAttribLocation(program, "coord2d");
    if (locationAttribute == -1) {
        fprintf(stderr, "Could not bind attribute location");
    }

    translationUniform = glGetUniformLocation(program, "translationUniform");
    if(translationUniform == -1){
        fprintf(stderr, "Could not bind attribute transformation");
    }

    //Create buffer
    glGenBuffers(1, &mainBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, mainBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(triangle_vertices), triangle_vertices, GL_STATIC_DRAW);

    glEnableVertexAttribArray(0);

    glVertexAttribPointer(
                          locationAttribute, // attribute
                          2,                 // number of elements per vertex, here (x,y)
                          GL_FLOAT,          // the type of each element
                          GL_FALSE,          // take our values as-is
                          0,                 // no extra data between each position
                          0                  // offset of first element
    );

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}

void Sprite::render(){
    glBindBuffer(GL_ARRAY_BUFFER, mainBuffer);
    glDrawArrays(GL_TRIANGLES, 0, 3);

} 
```

和顶点着色器：（注意，版本由解析器添加）

```
attribute vec2 coord2d;

uniform mat4 translationUniform;
uniform mat4 camera;

void main(void) {

    gl_Position = camera * vec4(coord2d, -1.1, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T01:06:42.127

`glEnable(GL_BLEND | GL_DEPTH_TEST);`

你不能像这样组合这些，你必须发出两个 glEnable 命令。这可能会产生错误，或者启用完全不同的东西。

您将此与使用位掩码的 glClear 混淆了。

开始`glGetError`在您的代码中使用，它会为您解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T01:35:59.523

好的，我重新阅读了这个问题，我想我现在明白了。

三角形在 -1 到 1 之外消失，因为没有任何投影矩阵，您绘制的是标准化的设备坐标，其具有 -1 到 1 的近和远剪辑平面。这意味着 z 值在 -1 之外的任何顶点到 1 将被剔除。

其次，你说你没有看到它随着距离变小。这是透视投影的一个特性，你没有（因为你没有投影矩阵）。使用默认投影矩阵（正交），您不会得到任何透视缩短，因此无论距离如何，您的三角形都将显示相同的大小。如果你想将透视应用到你的场景，那么你需要一个透视矩阵：尝试应用`gluPerspective(1, 45, 0.1, 100);`，这应该会给你更多的东西，就像你期望的那样（三角形将出现，z 从 -0.1 到 -100，随着它接近 z= 而变小-100)。您可能需要调整这些以匹配场景的比例。

# jquery - 使用jquery获取图像的坐标xy后如何显示弹出消息？

> ID：11025443
> 
> 赞同：1
> 
> 时间：2012-06-14T01:04:19.960
> 
> 标签：jquery

我有1个问题..我必须拖放一个图像..然后在拖放后获取图像的位置...然后，当我拖动它并获取位置时，我需要使用jquery显示一条弹出消息。 。谁能帮我？请给我看演示和清晰的解决方案，因为我是 jquery 的新手..谢谢你们！

这是我的 dra,drop n get coordinate..now 代码，我想在获取位置后添加弹出消息..在弹出消息中，我想添加 --> 命名您的位置并可以保存在数据库。

```
 $('#dragThis').draggable({
    cursor: 'move',        // sets the cursor apperance
    containment: '#dragThis2',
    drag: function() {
    var offset = $(this).offset();
    var xPos = Math.abs(offset.left);
    var yPos = Math.abs(offset.top);
    $('#posX').text('x: ' + xPos);
    $('#posY').text('y: ' + yPos);
    },
    stop: function(event, ui) {

    // Show dropped position.

    var Startpos = $("#dragThis").position();
    var Stoppos = $(this).position();
   //        
    $("#dragThis").val((Stoppos.left - Startpos.left));
    var left = Math.abs(Stoppos.left);
    var top = Math.abs(Stoppos.top);
    $('#posX').text('left: ' + left);
    $('#posY').text('top: ' + top);
    }

    }); 
```

如何在我的代码中添加弹出消息？请...任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:16:54.340

您可以使用警报，如下所示：

```
alert('xPos: ' + xPos + ', yPos: ' + yPos); 
```

你会想把它放在你的停止回调函数中。从您将它们写入的 DOM 元素中读取值，或者更好的是，在函数外部定义它们`xPos`，以便您可以在回调中访问它们。`yPos``drag``stop`

如果你想要更花哨的东西，有许多用于模态对话框的、有据可查的 jQuery 插件。

这是我通常使用的插件：http: [//jquery.malsup.com/block/](http://jquery.malsup.com/block/) 你也可以查看[jQuery UI Dialog](http://jqueryui.com/demos/dialog/)

使用块 UI 时，您可以这样设置消息：

```
$.blockUI({
   message: 'Set any message here as a string'
}); 
```

# .htaccess - 忽略我的 RewriteRule 中的链接

> ID：11025446
> 
> 赞同：-1
> 
> 时间：2012-06-14T01:04:52.660
> 
> 标签：.htaccess, mod-rewrite

我正在尝试编写一个规则来忽略我的 .htaccess 中的特定链接

```
RewriteRule ^([a-zA-Z0-9-_",'w\s@]+)$ profile?u=$1
RewriteRule ^([a-zA-Z0-9-_",'w\s@]+)/$ profile?u=$1 
```

上面的代码将重定向任何链接，如[http://me.com/you](http://me.com/you)

到[http://me.com/profile?u=you](http://me.com/profile?u=you)

但我希望它忽略**联系人**一词，以便在用户键入 me.com/contact 时

用户转到联系页面而不是转到 me.com/profile?u=contact

谢谢，您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:09:29.133

Add this right before the rule to exclude the word:

```
RewriteCond ^((?!contact).+)$ 
```

Really, you can look it up in a reference.

# asp.net-mvc-3 - 自定义 mvc htmlhelper 候选人？

> ID：11025449
> 
> 赞同：1
> 
> 时间：2012-06-14T01:05:26.293
> 
> 标签：asp.net-mvc-3

我们有一堆页面，页面内有一个音频/视频播放器。

我没有在这些页面中添加播放器所需的所有 js/css，而是考虑添加一个`@Html.MediaPlayer`帮助程序，它将文件路径作为参数并吐出显示播放器所需的 js/css 和 html 脚本. 这是一个好主意吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:18:05.790

为这个场景编写一个自定义的可重用帮助器看起来是个不错的方法。另一种方法是使用可以包含的局部视图。

# jquery - CSS3 动画，转换为位置

> ID：11025452
> 
> 赞同：8
> 
> 时间：2012-06-14T01:05:46.507
> 
> 标签：jquery, css, jquery-animate, css-transforms

我有一个 div，我点击它来拖动它。一旦它在一个区域上，它会通过以下方式动画到它的位置：

```
$("#wheel1").animate({left: "200px", top: "100px"}); 
```

我也可以让它动画：

```
@-webkit-keyframes wheel1 {
    0% {
    }
    100% {
        -webkit-transform: translate(200px, 100px);
    }
} 
```

区别在于；使用 jQuery，它会从文档左侧动画到 200px。使用 CSS3，它会在你放置它的地方设置 200px 的动画（这很糟糕）

有没有办法让 CSS3 从文档的左上角开始动画，就像 jQuery 一样？我尝试更改变换原点和其他一些设置，但没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T02:59:20.153

我不是 CSS3 转换方面的专家，但我认为`translate`是相对于元素的原始位置。

我可以看到用 CSS 实现您想要的一种方法是绝对定位元素，并使用 CSS3`transition`更改其`left`和`top`属性。

这是一个小提琴：http: [//jsfiddle.net/nSa9s/2/](http://jsfiddle.net/nSa9s/2/)

HTML：

```
<div class="box"></div> 
```

CSS：

```
.box {
    position: absolute;
    background: #ff0000;
    left: 400px;
    top: 200px;
    width: 100px;
    height: 100px;
    -webkit-transition: all 1.0s linear;
    -moz-transition: all 1.0s linear;
    -o-transition: all 1.0s linear;
    -ms-transition: all 1.0s linear;    
    transition: all 1.0s linear;
}
.box.move {
    left: 200px;
    top: 100px;
} 
```

jQuery：

```
$(document).ready(function() {
    $('.box').on('click', function() {
        $(this).addClass('move');
    });
}); 
```

JS 的目的是`move`在元素被点击时将类添加到元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:06:01.870

仅供参考，要使用 CSS 动画（而不是所选答案显示的过渡）来执行此操作，您只需`left`在关键帧中使用而不是翻译。

```
@-webkit-keyframes wheel1 {
    0% {}
    100% {
        left:200px; top: 100px;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:19:36.400

如果我错了，请纠正我，但是您要使用 CSS3 动画的原因是因为 jQuery 动画没有做 CSS3 动画可以做的事情？

如果我是正确的，那么看看这个名为[**.transit**](http://ricostacruz.com/jquery.transit/)的 jQuery 插件，它允许您将所有 CSS3 动画应用到任何选择器，就像它在 CSS3 格式中应用的方式一样，但它是通过程序化的 jQuery 方法完成的。

该插件处理大量的 CSS3 滑动和移动要求以及任何其他你可以扔给它的 CSS3 动画。上面的链接在整个页面都有示例。

如果这不是您想要的，请意识到当一个对象“拖放”到另一个元素中时，CSS 无法“检测”到。有伪触发器，但**无论如何**`:hover`都会触发。

# java - Java堆栈分配在哪里？

> ID：11025459
> 
> 赞同：17
> 
> 时间：2012-06-14T01:07:28.600
> 
> 标签：java

我从网站上注意到以下内容：JVM HotSpot 内存分为 3 个内存空间：

*   Java 堆
*   PermGen（永久代）空间
*   本机堆（C 堆）

hotSpot JVM 中分配的堆栈在哪里？在本机堆中？

更新：另一个参考信息：对于 64 位 VM，C-Heap 容量 = 物理服务器总 RAM 和虚拟内存 – Java Heap – PermGen

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T01:22:37.850

答案是：

1.  它取决于实现。

2.  在我查看的实现中，线程堆栈分配由标准 C 本机线程库处理，看起来该库正在向操作系统分配堆栈的内存段。所以“以上都不是”。

3.  您可以通过深入研究与您的平台相关的 OpenJDK 源代码来确认这一点。

**更新**

从一个老问题来看，这是`pthread_create`请求分配线程堆栈的代码片段。*JVM 线程实现使用*此方法来创建本机线程。

```
 mmap(0, attr.__stacksize, 
     PROT_READ|PROT_WRITE|PROT_EXEC, 
     MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) 
```

如您所见，它只是使用`mmap`系统调用向操作系统请求一个内存段。正如我在评论中所说，这不是常规的 Java 堆，不是 Permgen 堆，也不是 C 原生堆。它是操作系统专门请求的一段内存。

作为参考，这里是[mmap 系统调用手册条目](http://linux.die.net/man/2/mmap)的链接。

* * *

> 更新：另一个参考信息：对于 64 位 VM，C-Heap 容量 = 物理服务器总 RAM 和虚拟内存 – Java Heap – PermGen

IMO，这是一种过度简化。（请提供您在何处找到此信息的链接……以便我们以原始形式阅读。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:53:03.677

如果您能以任何方式找到对这些东西的访问权限，那么第二代 Sun（或现在的 Oracle？）将很快发布补丁。

能够访问这些东西是一个巨大的安全风险。大公司的许多系统都使用 Java。留下一个可以追踪分配空间的漏洞是不可能的。

如上所述，MMAP 将分配空间并将其返回给所需的程序和空间需求。我几乎每天都用 MMAP 做很多事情。

也许是因为我认为事物的使用方式有点暗（为了更好地保护我的系统），很确定会有一个热修复来取消你的工作，或者你有美国世界警察队敲门怀疑你犯规行为，并在此过程中没收您的所有设备。

# regex - 如何将第一行的第一个字段复制到后续行中？

> ID：11025460
> 
> 赞同：1
> 
> 时间：2012-06-14T01:07:37.520
> 
> 标签：regex, sed

试图让这种表达方式发挥作用，有人可以看看它并告诉我离我有多远吗？

我试图在第 1 行获取信息以传播到其他空白行。

```
Line 1 = "1234, type"
Line 2..99 = ", type" 
```

结果：第 1 行.. =“1234，类型”

这是表达式

```
sed -i -R -n '{(^[^,]{});x;n;^,;s/^.{}/\1/;x;p;x;p}' SedExit.txt > Str.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T02:35:15.737

以防万一您对`awk`基于 - 的解决方案感兴趣，并假设我在上面的评论中对您的请求的解释是正确的：

```
awk -F, 'BEGIN { OFS = "," } $1 { last = $1 } !$1 { $1 = last } { print }' SedExit.txt 
```

**编辑**：简要说明-

`-F,`告诉 awk 使用逗号作为输入字段分隔符；它将自动以逗号分隔行，并使各个字段可用作 $1、$2 等（$0 是整行）

`BEGIN {`code`}`在 awk 运行开始时，在处理任何输入之前运行大括号中的代码一次。

`OFS = ","`将输出字段分隔符设置为逗号，以匹配输入。这让我们可以直接修改字段并且仍然获得逗号分隔的输出，而不必在我们的代码中重构整行。

其余代码每行输入运行一次：

`$1 { last = $1 }` 第一个`$1`是执行下一个代码块必须满足的条件：如果当前行的该字段为真（非空），则运行该块。该块将该字段的副本保存在一个名为“last”的新变量中。

因此，如果第一个逗号之前有任何内容，我们会记住它以备后用。

`!$1 { $1 = last }` 这里的条件被否定，所以这个块只有在第一个字段为空时才会运行。在这种情况下，我们以另一种方式复制，并将第一个字段设置为 的值`last`。希望我们之前已经看到了与第一个块匹配并设置`last`为某些内容的行，否则这没有用。

`{ print }` 这里没有条件，所以代码在每一行都运行，它只是打印出来。如果适用，输出将包含我们对 $1 的修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:03:11.550

这可能对您有用：

```
sed '/^,/!{h;b};G;s/\(.*\)\n\([^,]*\).*/\2\1/' file 
```

解释：

*   如果该行不以逗号开头，则将该行保存在保持空间 (HS) 中并中断，即不进一步处理但打印该行。`/^,/!{h;b}`
*   如果该行确实以逗号开头，请将换行符和 HS 的内容附加到模式空间 (PS)。`G`
*   将 HS 中的第一个字段（直到第一个逗号）添加到当前行并删除所有其他剩余部分。`s/\(.*\)\n\([^,]*\).*/\2\1/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T03:18:54.530

### 问题陈述

您希望将第一行的第一个字段复制到每个后续行的第一个字段中，最好使用 sed。

### 解决方案

将第一个字段存储在变量中，然后在行范围上执行 sed 表达式。

```
FIELD1=$(head -n1 /tmp/foo | cut -d, -f1)
sed "2,$ s/^.*,/$FIELD1,/" /tmp/foo 
```

# ios - 如何从 iOS 上的核心数据可转换字段中获取 RTF 内容？

> ID：11025468
> 
> 赞同：0
> 
> 时间：2012-06-14T01:09:56.537
> 
> 标签：ios, core-data

我正在开发一个 iOS 应用程序，该应用程序将处理核心数据数据存储中每个大约 40-80k 的许多文档。为了便于数据输入，我整理了一个简单的 cocoa 应用程序，它将 NSTextView 控件的内容保存到商店中的可转换字段中。

然后我在我的 iOS 应用程序中打开保存的商店并遇到问题。当我尝试使用 UITextView 控件访问从数据存储中的该字段获取的结果时，显示的文本是十六进制转储。我猜可可应用程序中的 NSTextView 正在将 RTF 文本保存到字段中，而 UITextView 期望得到纯文本。

我现在正在为 iPad 使用一个简单的 Master-Detail 项目来尝试获取数据。下面是从数据存储中加载数据的代码：

```
 self.detailDescriptionLabel.text = [[self.detailItem valueForKey:@"name"] description];
    self.detailTextView.text = [[self.detailItem valueForKey:@"text"] description]; 
```

当我运行应用程序并查看结果时，我得到的内容如下`detailTextView`：

> <7b5c7274 66315c61 6e73695c 616e7369 63706731 3235325c 636f636f 61727466 31313338 5c636f63 6f617375 62727466 3437300a 7b5c666f 6e747462 6c5c6630 5c667377 6973735c 66636861 72736574 30204865 6c766574 6963613b 7d0a7b5c 636f6c6f 7274626c 3b5c7265 64323535 5c677265 656e3235 355c626c 75653235 353b7d0a 5c706172 645c7478 3536305c 74783131 32305c74 78313638 305c7478 32323430 5c747832 3830305c 74783333 36305c74 78333932 305c7478 34343830 5c747835 3034305c 74783536 30305c74 78363136 305c7478 36373230 5c706172 6469726e 61747572 616c0a0a 5c66305c 66733234 205c6366 30205468 69732069 73207468 6520776f 726b696e 6720636f 70792e7d>

我尝试使用 an`NSAttributedString`来获取数据，但该`initWithRTFD:documentAttributes:`方法在 iOS 中似乎不可用。

老实说，我不在乎它是RTF。我只是想找回文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:55:38.687

您不想使用该`description`方法；这会将作为密钥返回的 NSData 转换为`text`您看到的十六进制转储形式。（如果您希望将实际内容作为字符串，您可以使用类似`[NSString initWithData:encoding:]`的方法将数据恢复为字符串。）

但是您可能不想转换为字符串，因为我认为 UITextView 不能显示 RTF 数据。（至少在 iOS 5 中没有）。相反，您至少可以通过将原始 NSData 传递给`- [UIWebView loadData:MIMEType:textEncodingName:baseURL:]`.

# ios - iOS 使用状态方法进行同步，而不仅仅是对事件做出反应

> ID：11025469
> 
> 赞同：0
> 
> 时间：2012-06-14T01:10:07.447
> 
> 标签：ios, synchronization, nsnotificationcenter

今天在工作中，我的任务是修复我们正在开发的 iPad 应用程序中的一个错误。该问题与应用程序和 Web 服务之间的同步信息更新未正确显示或应用程序在应同步的时间不一致，因此 UIButton 中显示的信息不正确有关。查询 Web 服务以获取更新的数据和其他元信息发生在几个子类 NSOperation 类上。信息更新，当某些事件完成或没有在 NSOperation 子类中时，通过在 NSOperationQueue 的主队列上添加一个带有块的操作，使用通知中心发布通知。同步发生在应用程序首次加载时，每五分钟一次。如果在应用程序处于后台时出现五分钟标记，

当我们的收件箱视图控制器被分配并且视图将出现时，UIButton 不会显示同步正在进行，但可以点击按钮开始同步。在收件箱视图控制器上的视图会出现方法，代码会检查是否为syncInProgress。有几种边缘情况会导致此检查失败；好吧，据我所知，根据我对我的任务的理解和到目前为止我已经弄清楚的代码库。

```
- (BOOL) syncInProgress {
    return _serviceCounter > 0;
} 
```

在底部的错误描述中，可能采取状态方法而不是仅响应事件。不确定这意味着什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:17:23.020

是的，它非常简单，iOS 提供了一种检查元素状态变化的方法，当发生这种情况时，可以通知方法对象或某些东西。

[键值编码](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177-BCICJDHA)

> KVO 的主要好处是您不必实现自己的方案来在每次属性更改时发送通知。

如果这不是您的意思，请随时指定。

# jquery - Jquery UI Sortable, Scrolling (jsFiddle Example)

> ID：11025470
> 
> 赞同：2
> 
> 时间：2012-06-14T01:10:11.737
> 
> 标签：jquery, css, jquery-ui, overflow, jquery-ui-sortable

I am trying to figure out how to get my 'sortable lists' to scroll while I am dragging a list element.

The scroll works fine in the list I am dragging *from* but not in the list I am dragging *to*.

[http://jsfiddle.net/jordanbaucke/pacbC/1/](http://jsfiddle.net/jordanbaucke/pacbC/1/)

***Another question asking a similar thing:***

[jQuery sortable container scroll div with overflow auto](https://stackoverflow.com/questions/9857065/jquery-sortable-container-scroll-div-with-overflow-auto)

PS. Pivotaltracker, [www.pivotaltracker.com](http://www.pivotaltracker.com) does this well.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-26T21:38:46.697

老问题，但我今天为此挣扎了几个小时，所以我想我会分享我学到的东西。

可排序滚动是 scrollParent 的偏移量、其当前滚动位置、当前项目位置和 scrollSensitivity 的函数。当您开始拖动时，可排序对象会执行 _mouseStart。这将设置 scrollParent 并缓存其当前排序的偏移量。有了这些知识，我们可以在 over 事件处理程序中做一个小的洗牌：

```
over: function (event, ui) {
    ui.item.data('sortableItem').scrollParent = ui.placeholder.parent();
    ui.item.data('sortableItem').overflowOffset = ui.placeholder.parent().offset();
} 
```

当拖动的元素更改容器时触发。当您点击 over 事件时，占位符已经移动到新容器中。代码获取新的 scrollParent 并重新缓存偏移量。

为了简洁起见，我分叉了 Tats_innit 的小提琴：http: [//jsfiddle.net/3E2Hg/84/](http://jsfiddle.net/3E2Hg/84/)

scrollParent 在整个事件结构中的其他地方被引用，所以我不确定这是防弹的。不过，我认为这是一个很好的起点。如果我遇到任何问题，我会更新这个答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T01:30:04.600

**工作演示** [http://jsfiddle.net/3E2Hg/1/](http://jsfiddle.net/3E2Hg/1/)

如果我遗漏了什么，请告诉我，并请参阅我之前的回复：[Automatically scroll droppable div while dragging](https://stackoverflow.com/questions/10986159/automatically-scroll-droppable-div-whilst-dragging/10986522#10986522)

*行为*：现在您拖动到的 div 也会滚动。（其余代码如下）

希望这可以帮助，

**代码**

```
$(function() {
    var sortlists = $("#List1, #List2").sortable({
        tolerance: 'pointer',
        connectWith: '#List1, #List2',
        helper: 'original',
        scroll: true
    }).on('scroll', function() {
        sortlists.scrollTop($(this).scrollTop());
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T20:55:47.110

您只需要添加`overflow: auto;`到父元素，无论是`ul`还是`#element`，或者你有什么。

# javascript - How does the WinRT Language Projection work for JavaScript in detail?

> ID：11025474
> 
> 赞同：1
> 
> 时间：2012-06-14T01:11:21.580
> 
> 标签：javascript, windows-8, windows-runtime, microsoft-metro

Is there any documentation out there that describes in detail how WinRT's language projection works in the JavaScript world in detail? I know that a WinJS library uses the metadata dynamically and on the fly to create wrapper objects that can be called from JavaScript code that is executed by MS Chakra Engine. However, how does it work in detail in the WinJS library?

Thanks! TH

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:04:27.993

如果您想真正触及这个表面，看看兔子洞能走多深，请查看 Brent Rector 在 //Build 上的演讲，名为[“编写混合语言 Metro 风格应用程序时的十个技巧”](http://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-876T)。不要让标题欺骗了您，他深入探讨了 WinRT 的思考过程以及它如何在不同语言中工作（当然包括很多关于 Javascript 的内容）。

# python - Python MySQLdb slow in updating values

> ID：11025475
> 
> 赞同：5
> 
> 时间：2012-06-14T01:11:29.393
> 
> 标签：python, mysql

I am trying to update a database with values from a csv file, the following is my code:

```
import MySQLdb as mdb
import sys
import csv

con = None
command = ''
new_name_list = []
old_name_list = []
duplicates = []
update_list = []
file = 'csv_file.csv'
listReader = csv.reader(open(file, 'r'))
for row in listReader:
    new_name_list.append(row)

try:

    con = mdb.connect('localhost', 'root', 'mypassword', 'mydb')
    con.autocommit(True)

    cur = con.cursor()
    cur.execute("SELECT fil_name FROM file WHERE fil_name like 'boy%' and fil_job_id=1")    

    numrows = int(cur.rowcount)

    for i in range(numrows):
        file_name = cur.fetchone()
    old_name_list.append(file_name[0])

    d = dict(new_name_list)

    for n in old_name_list:
        try:
            print n + " has been updated to " +  d[n]
            command = "UPDATE file SET fil_name='" + d[n] + "' WHERE fil_name='" + n + "'"
            cur.execute(command)
        except KeyError:
            duplicates.append(n)

except mdb.Error, e:

    print "Error %d: %s" % (e.args[0],e.args[1])
    sys.exit(1)

finally:    

    if con:    
        con.close() 
```

It takes about 2-3 seconds for each print to appear, which leads me to think that the update execution is being made slowly. I have a lot of values to update and this should not be the speed that it should be executing (given that I was able to get a quick printout of all the values of `d[n]` )

Is there anyway to speed up the updating?

**EDIT:** The database is using InnoDB engine

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T01:20:56.777

您可以尝试使用`executemany`：

```
data = [(n, d[n]) for n in old_name_list]
cur.executemany("UPDATE file SET fil_name='%s'  WHERE fil_name='%s'", data) 
```

此外，您可能需要考虑对 fil_name 进行索引（假设 fil_name 是只读的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T02:18:34.730

根据您的描述，每次打印需要 2~3 秒，所以我认为问题可能在于：

1.  你有索引表文件的 fil_name 列吗？
2.  您使 auto_commit 为真，每次更新都是提交的事务。

如果情况是 1，只需在该列上创建索引，不要在更新时进行表扫描。

如果情况是 2，@dave 给出了一个很好的答案。

# python - Error loading OpenCV XML file with Python

> ID：11025477
> 
> 赞同：4
> 
> 时间：2012-06-14T01:11:36.223
> 
> 标签：python, opencv

I'm using OpenCV 2.4.1 and Python 2.7 (Enthought EPD 7.3 running under Visual Studio Python Tools). I'm trying to read an xml file using OpenCV Load() function:

```
import cv2
import numpy as np

reprojectionError=cv2.Load("calib.xml") 
```

but I'm getting this error:

```
 reprojectionError=cv2.Load("calib.xml")
AttributeError: 'module' object has no attribute 'Load'
Press any key to continue . . . 
```

Any ideas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T09:23:09.913

我也有同样的错误。经过搜索，我在 OpenCV bug tracker 中发现了一些关于它的讨论。从他们的讨论中，我理解的是（当然有很多我无法理解的东西，比如一些编码等），OpenCV 只加载有效的 xml 文件。

有效的意思是，它应该是一些 OpenCV 结构，如 IplImage、cvSeq 等。否则会引发一些错误。

当我尝试加载 haarcascade xml 文件时，它返回 NULL。

```
TypeError: OpenCV returned NULL 
```

当我尝试加载一些任意 xml 时，（从某个地方获得，与 OpenCV 无关）：

```
error: The node does not represent a user object (unknown type?) 
```

最后，我加载了一个图像，使用 cv.Save 将其保存在 xml 文件中，并尝试按如下方式加载它：

```
import cv2
import numpy as np

img = cv2.cv.LoadImage('0.jpg',0)
cv2.cv.Save('sof.xml',img)
e=cv2.cv.Load("sof.xml")

print e 
```

我得到了以下结果，这是正确的：

```
<iplimage(nChannels=1 width=300 height=300 widthStep=300 )> 
```

所以我从这些示例和关于错误跟踪器的讨论中了解到，OpenCV 仅加载其中包含有效 OpenCV 结构的 xml 文件。（这是一个不错的选择。为什么 OpenCV 应该尝试加载所有的 xml 文件？它必须只打开与之相关的文件）。

这就是我所知道的。希望能帮助到你 ！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-25T15:12:44.050

Python 中的 OpenCV IO 目前非常糟糕。我相信当前的 master 它在 FileNode 下，但文档现在不存在。据推测，您应该使用 Numpy 的标准方法（因为 OpenCV 垫在 Python 中作为 Numpy 数组公开）。

该`cv`模块也已弃用，因此`Load`不再存在。

无论如何，这是一个从 OpenCV XML 文件加载 Mat 的快速函数。我放弃了尝试让它与 OpenCV 一起本地工作，使用解析器更简单：

```
import xml.etree.ElementTree as ET
import numpy as np

def load_from_opencv_xml(filename, elementname, dtype='float32'):
    try:
        tree = ET.parse(filename)
        rows = int(tree.find(elementname).find('rows').text)
        cols = int(tree.find(elementname).find('cols').text)
        return np.fromstring(tree.find(elementname).find('data').text, dtype, count=rows*cols, sep=' ').reshape((rows, cols))
    except Exception as e: 
        print(e)
        return None 
```

应该涵盖您在 C++ 中保存内容的大多数用途，例如：

```
cv::FileStorage right_fs("right_calibration.xml", cv::FileStorage::WRITE);
right_fs << "cameraMatrix" << right_camera_matrix;
right_fs.release(); 
```

使用 OpenCV 3 和 Python 3 测试，但在 2.7 上应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T22:29:37.453

我发现我可以使用 python cv（不是 cv2）API 的 Load() 从 cv 校准应用程序保存的 XML 文件中加载相机矩阵和失真系数。您必须指定文件名以及该文件中对象的名称。

```
import cv
import numpy

calib_filename = '/path/to/my/output/of/calibration.xml'

camera_matrix = numpy.asarray(cv.Load(calib_filename, cv.CreateMemStorage(), 'camera_matrix'))
dist_coeffs = numpy.asarray(cv.Load(calib_filename, cv.CreateMemStorage(), 'distortion_coefficients')) 
```

请注意 numpy.asarray() 中的换行将 cv.Load() 返回的 CvMat 转换为 numpy 数组 cv2 样式，因为看起来您正在尝试在 cv2 中工作（就像我一样）。

在 Linux 上的 OpenCV 2.4.3、python 2.7 中为我工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-12T11:18:56.377

我在加载 haarcascade_frontalface_default.xml 文件时遇到了同样的错误。所以我刚刚从下面的链接下载了所需的文件

[https://code.google.com/p/jviolajones/downloads/detail?name=haarcascade_frontalface_default.xml](https://code.google.com/p/jviolajones/downloads/detail?name=haarcascade_frontalface_default.xml)

将其粘贴到特定位置，在代码中给出正确的路径，我成功运行了我的代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-25T10:50:50.287

我有类似的问题。我在发布模式下使用了调试库，所以它给出了错误。当我将调试库（xd.lib）更改为释放库（x.lib）时，它起作用了。

思南

# xml - Using jaxb marshal xmlns attribute missing from xml output

> ID：11025486
> 
> 赞同：1
> 
> 时间：2012-06-14T01:13:57.323
> 
> 标签：xml, xsd, jaxb, xml-namespaces

I have some jaxb objects that are generated from an xsd I created. Previously when I marshalled the content, the xml output looked like this:

```
<report xmlns="urn:com-test-person-data:v3">
<person-data>
    .......(Data)
</person-data>
</report> 
```

I have recently change over from coding on a Windows machine to a Mac. Nothing has changed in the jaxb objects I'm using. But now my marshalled output looks like this.

```
<report>
<person-data>
    .......(Data)
</person-data>
</report> 
```

I've tried doing some digging to see what could've removed the xmlns attribute, but have had no luck. I use that attribute to check what version of my schema is being used, so it's important it's in the outputted xml fragment.

Here's the code snippet where I call the marshaller:

```
final JAXBContext context = JAXBContext.newInstance(Report.class);
final Marshaller marshaller = context.createMarshaller();
marshaller.setProperty(Marshaller.JAXB_ENCODING, "UTF-8"); //$NON-NLS-1$
marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.TRUE);
marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
marshaller.marshal(reportJaxBObject, sw); 
```

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:27:19.153

此问题通常是`package-info.java`未与其余模型类一起编译或打包的结果。`package-info`类是`@XmlSchema`指定包含命名空间信息的地方。

# python - how to pass a value to running process in python

> ID：11025487
> 
> 赞同：1
> 
> 时间：2012-06-14T01:14:11.167
> 
> 标签：python, subprocess, threadpool

I want to pass some values to a running process, how can I do that ?

say for example I have a worker.py and it has this code.

```
import os
import sys

def my_test():
    print " I am starting now"
    a = raw_input("Do you want to start ? ")[0].lower()
    if a == "y":
        print "Yes I am starting now"
my_test() 
```

and this file is a executable file. And I have another python file in that file I am using commands to start my worker.py like this.

```
status, message = commands.getstatusoutput ("/tmp/worker.py") 
```

but command can't go next level because of the raw_input.

Is there anyway I can pass "y" to worker through commands or subprocess ?.

PS : I am running this command through a pyqt gui.

Thanks in advance.

UPDATE :

I found it at last and here is my solution, and yes its using pexpect.

fully working solution of my problem. I hope it will help some in else in future :)

```
#!/usr/bin/python

import sys
import pexpect
import re
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):

        self.setGeometry(300, 300, 250, 150)
        self.setWindowTitle('Message box')
        qbtn = QtGui.QPushButton('Quit', self)
        qbtn.clicked.connect(self.spawnJob)
        self.qtxte = QtGui.QPlainTextEdit(self)
        qbtn.resize(qbtn.sizeHint())
        qbtn.move(260, 150)
        self.setGeometry(300, 300, 340, 200)
        self.setWindowTitle('Quit button')
        self.show()

    def spawnJob(self):
        self.child = pexpect.spawn ('/usr/local/bin/python /tmp/worker.py')
        a = self.child.expect ('Do you')
        if str(self.child.after) == 'Do you':
            self.test_one()

       before_msg = self.child.before
           self.qtxte.appendPlainText(before_msg)

       for ln in self.child.readlines():
           self.qtxte.appendPlainText(ln.rstrip())

    def test_one(self):

        reply = QtGui.QMessageBox.question(self, 'Message',
            "Are you sure to quit?", QtGui.QMessageBox.Yes |
            QtGui.QMessageBox.No, QtGui.QMessageBox.No)

        if reply == QtGui.QMessageBox.Yes:
            self.child.sendline ('y')
        else:
            self.child.kill(0)

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:21:57.947

彭彭呢？您可以使用它将内容传递给 stdin 上的进程。

或者，您可以尝试类似`"yes | /tmp/worker.py"`命令。 `yes`只是将一堆'y'转储到它的标准输出上，然后由worker.py拾取。

更简单的是，`"echo y | /tmp/worker.py"`用作您的命令。我刚试了一下，对我来说效果很好。

# gnome - Nautilus 扩展带回注释

> ID：11025489
> 
> 赞同：1
> 
> 时间：2012-06-14T01:15:14.463
> 
> 标签：gnome, nautilus

Nautilus 曾经有一个用于文件注释（注释）的选项卡。我想知道是否可以通过扩展将其恢复。如果是这样，怎么做？我应该查看哪些文档来编写自己的扩展程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:04:22.667

查看[archive.org 上提供的文档](http://web.archive.org/web/20090418175132/http://www.campd.org/stuff/docs/extending-nautilus/NautilusExtensions.html)。还要检查[一个更一般的问题的答案](https://stackoverflow.com/questions/1580206/nautilus-extensions-where-are-the-docs)。

# objective-c - 是否可以更新我的 XCode/Objective-C 程序或提供补丁？

> ID：11025490
> 
> 赞同：0
> 
> 时间：2012-06-14T01:15:29.107
> 
> 标签：objective-c, xcode, core-data, patch

我正在寻找有关如何更新已发布的 XCode 程序的信息。有没有简单的方法来解决这个问题？如果它包括对我的核心数据模型的更改怎么办？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T01:47:47.797

有趣的是，您在问题中没有明确说明您使用的是 MacOS 还是 iOS。

iOS 非常简单（您只需在应用商店中更新应用）。

MacOS 有更多的多样性。如果它在应用商店，您可以在那里更新。

[如果它是一个独立的应用程序，您可以使用像Sparkle](http://sparkle.andymatuschak.org/) （<-- 我已为您链接的）这样的开源框架，它会通知用户您的程序的新版本可供下载并让他们能够单击按钮下载并安装更新。

# javascript - Google Apps 脚本 - 根据单元格中的日期发送电子邮件

> ID：11025491
> 
> 赞同：5
> 
> 时间：2012-06-14T01:16:22.760
> 
> 标签：javascript, google-apps-script, google-sheets

我环顾四周，有一些零碎的东西，但不能把拼图放在一起。我正在尝试创建一个脚本，该脚本将在配置为每天运行的触发器上运行。触发器将在编辑器的资源选项下设置。

基本上，我正在寻找脚本来捕获一系列单元格，确定到期日期，该日期将填充在一列中，将其与当前日期匹配。如果匹配，则发送电子邮件。我从 Google 的电子表格教程发送电子邮件开始。我在 if 语句中添加了检查日期，但在与 dataRange 的比较中我丢失了它。任何人都可以帮助纠正这些或指出我的研究方向。

该脚本似乎运行但没有任何反应，我认为这是因为“如果（currentTime == dataRange）” dataRange 没有正确匹配？

这是代码：

```
function sendEmails() {
var sheet = SpreadsheetApp.getActiveSheet();
var startRow = 2;  // First row of data to process
var numRows = 50;   // Number of rows to process
// Fetch the range of cells
var dataRange = sheet.getRange(startRow, 1, numRows, 2)
// Fetch values for each row in the Range.
var data = dataRange.getValues();   
//Get todays date     
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();      
//Test column  for date due & match to current date
    if ( currentTime == dataRange) {
  for (i in data) {
var row = data[i];
var emailAddress = row[0];  // First column
var message = row[1];       // Second column
var subject = "Task Item Due";
MailApp.sendEmail(emailAddress, subject, message);

}
}
} 
```

我正在更新 Srik 提供的建议，并在下面的代码中提供他的建议。我已经尝试发布了几次，所以我不确定为什么它不进行过去的同行评审？

```
 function sendEmail() {

var sheet = SpreadsheetApp.getActiveSheet();
var startRow = 2;  // First row of data to process
var numRows = 50;   // Number of rows to process

var dataRange = sheet.getRange(startRow, 1, numRows, 50);

// Fetch values for each row in the Range.
var data = dataRange.getValues();
//Browser.msgBox(data)

for (i in data) {
var row = data[i];
var date = new Date();
var sheetDate = new Date(row[1]);

if (date.getDate() == sheetDate.getDate() && date.getMonth() == sheetDate.getMonth() && date.getFullYear() == sheetDate.getFullYear());
{
  var emailAddress = row[0];  // First column
  var message = row[2];       // Second column
  var subject = "Sending emails from a Spreadsheet";
  MailApp.sendEmail(emailAddress, subject, message);
 // Browser.msgBox(emailAddress)

}

}

} 
```

代码似乎可以运行，但我在脚本编辑器中收到以下错误。“发送电子邮件失败：没有收件人（第 23 行）”。但它仍然发送电子邮件。它应该比较日期并仅在日期匹配时发送电子邮件。它为每一行发送一封电子邮件。我已经分享了电子表格以查看代码以及电子表格的设置方式。 [共享电子表格](https://docs.google.com/spreadsheet/ccc?key=0AiB8MImvI1UMdGx0WTRsUmVHSjl1dVNPTkxtWlNmcGc)

在记录器和 Utilities.formatDate 上更新代码 W/SERGE HELP .. 谢谢！！

```
function sendEmail() {
var sheet = SpreadsheetApp.getActiveSheet();
var startRow = 2;  // First row of data to process
var numRows = sheet.getLastRow()-1;   // Number of rows to process
// Fetch the range of cells A2:B3
var dataRange = sheet.getRange(startRow, 1, numRows, sheet.getLastColumn());
// Fetch values for each row in the Range.
var data = dataRange.getValues();
//Logger.log(data)

for (i in data) {
  var row = data[i];
  var date = new Date();
  date.setHours(0);
  date.setMinutes(0);
  date.setSeconds(0);
  //Logger.log(date);
  var sheetDate = new Date(row[2]);
 //Logger.log(sheetDate);
 var Sdate = Utilities.formatDate(date,'GMT+0200','yyyy:MM:dd')
 var SsheetDate = Utilities.formatDate(sheetDate,'GMT+0200', 'yyyy:MM:dd')
     Logger.log(Sdate+' =? '+SsheetDate)
        if (Sdate == SsheetDate){
          var emailAddress = row[0];  // First column
          var message = row[1];       // Second column
          var subject = "Your assigned task is due today." +message;
          MailApp.sendEmail(emailAddress, subject, message);
          //Logger.log('SENT :'+emailAddress+'  '+subject+'  '+message)
            }    
   }
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T22:23:15.937

这是您的代码的工作版本，我使用 Utilities.formatDate 来制作您的日期字符串，因此您可以选择比较的内容（只有天、小时？分钟？）

我评论了邮件呼叫只是为了我的测试，当你需要时重新启用它

```
function sendEmail() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 2;  // First row of data to process
  var numRows = sheet.getLastRow()-1;   // Number of rows to process
  // Fetch the range of cells A2:B3
  var dataRange = sheet.getRange(startRow, 1, numRows, sheet.getLastColumn());
  // Fetch values for each row in the Range.
  var data = dataRange.getValues();
  Logger.log(data)

  for (i in data) {
    var row = data[i];
    var date = new Date();
    var sheetDate = new Date(row[1]);
    Sdate=Utilities.formatDate(date,'GMT+0200','yyyy:MM:dd')
    SsheetDate=Utilities.formatDate(sheetDate,'GMT+0200', 'yyyy:MM:dd')
    Logger.log(Sdate+' =? '+SsheetDate)
    if (Sdate == SsheetDate){
      var emailAddress = row[0];  // First column
      var message = row[2];       // Second column
      var subject = "Sending emails from a Spreadsheet";
//      MailApp.sendEmail(emailAddress, subject, message);
     Logger.log('SENT :'+emailAddress+'  '+subject+'  '+message)
    }    
  }
} 
```

不要忘记查看日志；-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T02:43:16.470

我会这样做....

像这样设置电子表格： [https ://docs.google.com/spreadsheet/ccc?key=0AkGlO9jJLGO8dDJad3VNTkhJcHR3UXlJSVRNTFJreWc](https://docs.google.com/spreadsheet/ccc?key=0AkGlO9jJLGO8dDJad3VNTkhJcHR3UXlJSVRNTFJreWc)

将代码更改为：

```
function sendEmails() {
  var spreadsheet = SpreadsheetApp.openById('Type spreadsheet key here from spreadsheet URL');       
  /// e.g.  var spreadsheet = SpreadsheetApp.openById('0AkGlO9jJLGO8dDJad3VNTkhJcHR3UXlJSVRNTFJreWc');     

  var sheet = spreadsheet.getSheets()[0]; // gets the first sheet, i.e. sheet 0

  var range = sheet.getRange("B1"); 
  var dateString = new Date().toString();
  range.setValue(dateString);   // this makes all formulas recalculate

  var startRow = 4;  // First row of data to process
  var numRows = 50;   // Number of rows to process
  // Fetch the range of cells
  var dataRange = sheet.getRange(startRow, 1, numRows, 4)
  // Fetch values for each row in the Range.
  var data = dataRange.getValues();   

  for (i in data) {
    var row = data[i];
    if( row[3] == true) {
      var emailAddress = row[0];  // First column
      var message = row[1];       // Second column
      var subject = "Task Item Due";
      try {
          MailApp.sendEmail(emailAddress, subject, message);
      } catch(errorDetails) {
        // MailApp.sendEmail("eddyparkinson@someaddress.com", "sendEmail script error", errorDetails.message);
      }

    }
  }
} 
```

触发：

由于触发器，您将需要使用 openById 打开电子表格。为此，请在代码中替换“在此处从电子表格 URL 键入电子表格密钥”。要找到密钥，请打开 google 文档电子表格，链接有“key=A0a0df...”粘贴代码。请参阅示例。

JavaScript：如果你想了解更多关于使用 Java Script 的知识，我推荐[http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T07:06:59.580

您在这里比较两个不同的对象

```
 if ( currentTime == dataRange) { 
```

currentTime 是一个 Date 对象，而 dataRange 是一个 Range 对象——它们永远不会相等，所以什么也没有发生。您可以做的是（DATE_COL 是包含您的日期的列）

```
for ( var i in data ){
  var row = data[i] ; 
  var today = new Date(); 
  var date = new Date(row[DATE_COL]) ; 

  if (today.getDate() == date.getDate() && 
      today.getMonth() == date.getMonth() && 
      today.getYear() == date.getYear() {
    /* Your email code here */ 
  }
} 
```

# architecture - Client-Server Solution Design

> ID：11025493
> 
> 赞同：0
> 
> 时间：2012-06-14T01:16:33.900
> 
> 标签：architecture, client-server, system

I am trying to figure out what the best way to structure a client-server solution. In a nutshell, my solution should have a back-end that does logic, and be able to support multiple clients in an intranet. The key here is that there won't be thousands of simultaneous requests...it will likely be capped at a a couple hundred users, so scalability isn't really an issue. (picture the service running in an office building, on a local network). I'm struggling with the overall flow of how this should work, and which technologies I should be using.

The components are as follows:

*   Logic portion, which will be on the server
*   A Database
*   Multiple desktop, mobile and web clients

So far what I've been able to come up with is the following:

1.  I need to have an application server which will be managing the API calls from the logic, and the DB access.
2.  A web server to sit on top of it, which will be managing the incoming requests.
3.  The logic portion.
4.  Clients which will conform to the API which we will define.

So I'm not sure how all this ties together...How will the "logic" interact with the application server? Does the "logic" need to be written like a server?

what I see is something like this:

```
 req  
client ----> web server ----> app server -----> Logic

                                |-----> DB

           response 
app server ---------> web server ----> client 
```

So if I wanted to deploy a small-scale commercial solution, would this be the way to structure it?

Please let me know if I've been unclear, or if you need any more information.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:49:06.600

你的问题很笼统。您建议的解决方案也是通用的。如果您不提出任何特定要求，那么您将为普通用户创建一个具有平均性能的通用系统。假设您同时拥有移动、桌面和 Web 客户端，那么在前端拥有一个 Web 服务器的想法是个好主意。但接下来的问题是将所有业务逻辑保留在 AppServer 端。在批量数据操作和性能要求的情况下，您可以在数据库中包含一些逻辑，但这是一个例外而不是规则。无论如何，您应该有任何特定要求，否则设计过程看起来像风水。您还必须选择一种技术并构建堆栈。

# java - 计算大整数的幂时的无限循环Java

> ID：11025494
> 
> 赞同：1
> 
> 时间：2012-06-14T01:16:54.020
> 
> 标签：java, biginteger, exponent

我一直在盯着这段代码，无法弄清楚它有什么问题，也许一双新的眼睛会有所帮助。

```
public static BigInteger powerOfBigInteger (BigInteger base, BigInteger power){
    if (power == BigInteger.valueOf(0)){
        return BigInteger.valueOf(1);
    }

    if (power == BigInteger.valueOf(1)){
        return base;
    }

    BigInteger x = BigInteger.valueOf(1);
    while (x != power ){
        base.multiply(base);
        x.add(BigInteger.valueOf(1));
        System.out.println(x + " " + power);
                   return base;
    } 

    return base; 
```

我运行它，显然 x 永远不会等于功率。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T01:20:01.393

你应该做

```
if (BigInteger.ZERO.equals(power)) return BigInteger.ONE;
if (BigInteger.ONE.equals(power))  return base; 
```

并且您必须累积乘法和加法的结果，因为 BigInteger 是不可变的并返回新的 BigInteger 实例

**无限循环是因为你的 x 永远不会改变**- 应该是

```
x = x.add(BigInteger.ONE); 
```

乘法应该更改为

```
result = result.mulitply(base); 
```

其中初始结果值应为 BigInteger.ONE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:19:09.907

我看到的一件事是您正在使用 == 而不是 .equals 进行比较。用等号比较对象。

```
public static BigInteger powerOfBigInteger (BigInteger base, BigInteger power){
    if (power.equals(BigInteger.valueOf(0))){
        return BigInteger.valueOf(1);
    }

    if (power.equals(BigInteger.valueOf(1))){
        return base;
    }

    BigInteger x = BigInteger.valueOf(1);
    while (!x.equals(power)){
        base.multiply(base);
        x.add(BigInteger.valueOf(1));
        System.out.println(x + " " + power);
                   return base;
    } 

    return base;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T01:20:04.437

我看到你正在使用`==`with `BigInteger`。不要这样做。改为使用`.equals(other)`。`BigInteger`不是可以与普通运算符进行比较的原语（您只是在比较对象引用，它们很可能不会相等）。`BigInteger`此外，在实例上执行计算时，您没有设置任何内容；它们不对本地对象进行操作，并将结果存储在本地对象中。您需要存储返回的对象。

有问题的线路：

*   `base.multiply(base);`
*   `x.add(BigInteger.valueOf(1));`

在另一篇关于 SO re 的帖子中也有一些讨论。`BigInteger`的力量`BigInteger`：[BigInteger.pow(BigInteger)？](https://stackoverflow.com/questions/4582277/biginteger-powbiginteger)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-23T02:11:42.510

也许我遗漏了一些东西，但这并不像他在做 base.multiply(base) 那样简单。当计算一个权力时，基地应该保持不变。示例 2^3 应生成 2,4,8 的序列，但此代码将生成 2,4,16，因为在第一个循环基数为 4 之后，four.multiple(four) 为 16，而不是 8。我一定错过了某物。

# c# - Set Windows/AD password so that it "never expires"?

> ID：11025495
> 
> 赞同：4
> 
> 时间：2012-06-14T01:17:10.517
> 
> 标签：c#, directoryentry

Here is my code:

```
using (DirectoryEntry AD = new DirectoryEntry("WinNT://" + Environment.MachineName +    ",computer"))
{
   DirectoryEntry NewUser = AD.Children.Add(username, "user");
   string password = username + "123";
   NewUser.Invoke("SetPassword", new object[] { password });
   NewUser.CommitChanges();
   NewUser.Close();
   DirectoryEntry grp;
   grp = AD.Children.Find(groupname, "group");
   if (grp != null)
    {
      grp.Invoke("Add", new object[] { NewUser.Path.ToString() });
    }
} 
```

And what i want to do is to create a windows user and set the password never expired , But i do not know how to do this ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T05:11:39.080

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义机器上下文并轻松地在本地服务器上创建新用户：

```
// set up machine-level context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Machine))
{
    // create new user
    UserPrincipal newUser = new UserPrincipal(ctx);

    // set some properties
    newUser.SamAccountName = "Sam";
    newUser.DisplayName = "Sam Doe";

    // define new user to be enabled and password never expires
    newUser.Enabled = true;
    newUser.PasswordNeverExpires = true;

    // save new user
    newUser.Save();
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T04:39:50.777

*已编辑

对于域帐户：

```
int NON_EXPIRE_FLAG = 0x10000;
val = (int) NewUser.Properties["userAccountControl"].Value;
NewUser.Properties["userAccountControl"].Value = val | NON_EXPIRE_FLAG;
NewUser.CommitChanges(); 
```

对于本地帐户：

我相信您会使用“UserFlags”而不是 userAccountControl。此外，您还必须使用 ADS_UF_DONT_EXPIRE_PASSWD 标志而不是[Microsoft 文章中所述的 NON_EXPIRE_FLAG](https://docs.microsoft.com/en-us/windows/win32/adsi/winnt-password-never-expires)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T12:00:28.803

这是我解决此问题的代码：
[![在此处输入图像描述](../Images/59ffd950b4956f831d5087a11efae13f.png)](https://i.stack.imgur.com/lOJeY.jpg)

```
// Add new user to OU
var username = "testuser_01";
var userDn = "LDAP://yourdomain.local:389/OU=testou,cn=yourdomain,cn=local";
var ouUserEntry = new DirectoryEntry(userDn, "yourAdminUser", "yourAdminPassword", AuthenticationTypes.Secure);
var newUserEntry = ouUserEntry.Children.Add("CN="+ username, "user");
newUserEntry.Properties["sAMAccountName"].Value = username;
newUserEntry.Properties["userPrincipalName"].Value = username + "@abc.com";
newUserEntry.Properties["displayName"].Value = username;

// Commit before enable account
newUserEntry.CommitChanges();

// Set password
newUserEntry.Invoke("SetPassword", "yourUserPassword");

// Enable Account & Password never expired (NORMAL_ACCOUNT | DONT_EXPIRE_PASSWORD)
newUserEntry.Properties["userAccountControl"].Value = 66080; // integer value in image above
newUserEntry.CommitChanges(); 
```

# c# - C#, visual studio 2010, how to stop a method, threads?

> ID：11025496
> 
> 赞同：3
> 
> 时间：2012-06-14T01:17:11.060
> 
> 标签：c#, .net, multithreading, visual-studio-2010

I'm only starting learning c# (and programming in general). I'm doing a little college project that plays music based on strings. I'm using windows forms. When you press the "play" button a it starts a method with a for loop that goes through each character in the string one by one and plays the appropriate note. Works fine, but I've been trying to add a "stop" button that will stop the music as its playing, but so far when the music is playing the form is frozen and I cant hit any other buttons... Just wondering is the only way I can achieve what I want by having different threads?? (We havent really looked at threads yet!)

edit: Hey thanks all for answers!! that was very very fast! :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T01:20:26.683

查看[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)以在后台播放音乐。它比自己操作线程简单得多。

这是一个概述：

[http://www.albahari.com/threading/part3.aspx#%5FBackgroundWorker](http://www.albahari.com/threading/part3.aspx#%5FBackgroundWorker)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T01:19:38.300

> 只是想知道通过使用不同的线程来实现我想要的唯一方法是什么？

通常，这是发生这种情况的最常见方法。我建议看一下[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)组件。它允许您在后台线程上运行工作（“播放音符”），但也提供取消支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T01:20:11.060

您的问题的简单答案是肯定的。

您正在主线程上循环播放音乐，这意味着当代码在循环中执行时，您无法从 UI 接收任何事件。

要解决此问题，您需要在后台线程上运行音乐循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T01:20:19.870

`Application.DoEvents();`如果您还不想使用线程，请在每次迭代后使用。Theads 是最好的解决方案，但正如我理解你的问题，当你首先学习线程时你正在等待:) 调用`DoEvents()`允许在调用它时处理窗口消息，所以如果你经常调用它，窗口不应该被阻塞。但请将此视为一种解决方法，[而不是最佳解决方案](https://stackoverflow.com/questions/5181777/use-of-application-doevents)。最好的灵魂将使用线程。

# c++ - what is the correct way to get strlen for a unsigned char *

> ID：11025501
> 
> 赞同：1
> 
> 时间：2012-06-14T01:18:51.357
> 
> 标签：c++, strlen, unsigned-char

My code below gave a different length for the unsigned char pointer I expect. I thought I should be getting 12 (or 13) or 0 (or 1) for pph and pphChar. What is my problem? I got different results for length and oneLength each time, when I repeat the run.

How can I get the length of pph?

Do I need to put a '\n' at the end to determine the length?

I use VS2010, XP and C++.

```
#include "stdafx.h"
#include <stdlib.h>
#include <Windows.h>
#include <stdio.h>
#include <tchar.h>

typedef unsigned char uint8_t;

int _tmain(int argc, _TCHAR* argv[])
{

int length;
int len = 13;
uint8_t *phh;
char * phhChar;

printf("assigned mem %d\n", sizeof(unsigned char)*len);
phh = (unsigned char *) malloc(sizeof(unsigned char)*len);
phhChar = (char *) malloc(sizeof(char)*len);

phh[0] = (unsigned char) '1';
phh[1] = (unsigned char) '2';
phh[2] = (unsigned char) '3';
phh[3] = (unsigned char) '4';
phh[4] = (unsigned char) '5';
phh[5] = (unsigned char) '6';
phh[6] = (unsigned char) '7';
phh[7] = (unsigned char) '8';
phh[8] = (unsigned char) '9';
phh[9] = (unsigned char) '0';
phh[10] = (unsigned char) '1';
phh[11] = (unsigned char) '2';
phh[12] = (unsigned char) '\n';

phhChar[0] = (char) '\n';

printf("size of char %d\n", sizeof(unsigned  char));
length =  strlen((const char*)phh);
int oneLength = strlen((const char*)phhChar);

printf("len %d\n", length );
printf("onelebgth %d\n", oneLength); 
```

OUTPUT

assigned mem 13

size of char 1

len 32 - different each time

oneLength 32 - different each time

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T01:21:42.737

您`\0`在字符串末尾缺少空终止符，因此`strlen`无法知道`unsigned char *`结束的位置。

实际上，它会在地址之后一直计数到您设置的最后一个字符，直到它到达一个`\0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T01:22:00.817

`strlen`将根据终止字符计算长度，即 0 ( `'\0'`)。

两种情况都是相似的：`strlen`寻找 0，但您只指定`'\n'`为“结尾”，它将读取该字符，直到找到终止 0，它可能会在不同的地方找到，这取决于什么“垃圾”内存恰好包含

处理未终止的字符串通常会导致分段错误，当读取过去的“字符串”访问尚未为项目分配的内存时，该错误将终止您的程序。

# yaml - 如何卸载 yaml-cpp（从源代码构建）

> ID：11025511
> 
> 赞同：0
> 
> 时间：2012-06-14T01:20:11.523
> 
> 标签：yaml, uninstallation, yaml-cpp

我尝试在我的 Oneric 11.10 服务器上安装 yaml-cpp0.2.6（在 pandaboard / armel 架构上）。

所以我用：

```
$ hg clone http://code.google.com/p/yaml-cpp/ (which appers to be yaml-cpp0.5.0)
$ mkdir build
$ cd build
$ cmake -DBUILD_SHARED_LIBS=ON ..
$ make
$ sudo make install 
```

一切都没有问题。但不幸的是，我需要它的 0.2.6 版本。因此我想卸载 0.3.0 版本：

```
$ sudo make uninstall 
```

但这给了我失败

```
*** No rule to make target `uninstall'. Stop.' 
```

还有其他方法可以卸载吗？或者修改它，我的系统不再需要/想要 yaml0.2.6？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:08:21.767

安装程序只是将头文件复制到目录`$PREFIX/include/yaml-cpp`，将库文件复制到`$PREFIX/lib/libyaml-cpp.so`. （`$PREFIX`大概是`/usr/local`）

只需删除头目录和库文件，它就应该被卸载。

# android - 同时播放两首mp3歌曲

> ID：11025515
> 
> 赞同：1
> 
> 时间：2012-06-14T01:20:32.823
> 
> 标签：android, android-mediaplayer

我想同时播放两首歌曲（mp3）（一首是卡拉 OK 文件，一首是用户录制的音频）。我可以使用 MediaPlayer 来执行此操作吗？如果是这样，如果我为两个文件创建 2 个 MediaPlayer 对象和 setDataSource 并播放它，那对吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:23:47.987

是的，根据我的说法，使用两个 MediaPlayer 对象并这样做就很好，根据我的经验，声音播放或任何内存问题都没有任何问题，就像魅力一样。

# mediawiki - 在 Semantic MediaWiki 中查询反向关系

> ID：11025517
> 
> 赞同：6
> 
> 时间：2012-06-14T01:21:03.627
> 
> 标签：mediawiki, semantic-web, mediawiki-templates, semantic-mediawiki

在我的语义 Scandalous Poets Wiki 中，我希望能够查询具有特定值的属性的所有页面，最好按属性分组。例如，给定值“Lord Byron”，我希望收到这样的列表：

> **儿子：**凯瑟琳·戈登、约翰·“疯狂杰克”·拜伦
> 
> **传闻的情人：**卡罗琳·兰姆夫人、简·伊丽莎白·斯科特“牛津夫人”、奥古斯塔·利、安妮·伊莎贝拉·米尔班克、尼科洛·吉罗、奥古斯塔·利、特蕾莎·马克里
> 
> **父亲：**艾达·洛芙蕾丝、克拉拉·阿莱格拉·拜伦
> 
> **传闻的父亲：**伊丽莎白梅多拉利

...等等。我相信此功能已在此处演示： [http](http://semantic-mediawiki.org/wiki/Special:Browse/California) ://semantic-mediawiki.org/wiki/Special:Browse/California在标题“隐藏链接此处的属性”下。它也类似于[http://semantic-mediawiki.org/w/index.php?title=Template:Invert-property](http://semantic-mediawiki.org/w/index.php?title=Template:Invert-property) - 但此模板一次只返回一个已知属性名称的值。

根据[http://semantic-mediawiki.org/wiki/Germany](http://semantic-mediawiki.org/wiki/Germany) MediaWiki 内部不支持反向关系，尽管 Special:Browse 页面似乎正在管理；是否有任何扩展或其他技术可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:50:12.153

您可以通过在查询中的属性前面简单地放置一个“-”来查询属性的倒数。例如：

```
{{#ask: [[Category:Poet]] 
| ?-hasSon=son of
}} 
```

见[http://semantic-mediawiki.org/wiki/Help:Inverse_properties](http://semantic-mediawiki.org/wiki/Help:Inverse_properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-28T14:59:47.150

这就是我如何处理指向特定页面的链接集合。我必须在这里处理的问题是关系可能在当前页面和其他页面上都建立。您可能会发现这很有用。此外，您可能想用“sun of”替换“has supernode”，用“father of”替换“has subnode”。我还使用 mediawiki 的数组扩展来合并重复值。

```
== Links ==
=== Super-Nodes ===
{{#arraydefine:key_1
|{{#ask:[[{{PAGENAME}}]]
|?has supernode
|mainlabel=-
|headers=hide
|format=array
|}}
}}
{{#arraydefine:key_2
|{{#ask:[[has subnode::{{PAGENAME}}]]
|format=array
|}}
}}
{{#arrayunion:key_mrg |key_1 |key_2 }}
{{#arraysort:key_mrg|nat}}
{{#arrayprint:key_mrg}}

=== Sub-Nodes ===
{{#arraydefine:key_1
|{{#ask:[[{{PAGENAME}}]]
|?has subnode
|mainlabel=-
|headers=hide
|format=array
|}}
}}
{{#arraydefine:key_2
|{{#ask:[[has supernode::{{PAGENAME}}]]
|format=array
|}}
}}
{{#arrayunion:key_mrg |key_1 |key_2 }}
{{#arraysort:key_mrg|nat}}
{{#arrayprint:key_mrg}} 
```

# php - 尝试在 PHP 中按日期对事件进行分组

> ID：11025535
> 
> 赞同：0
> 
> 时间：2012-06-14T01:24:53.897
> 
> 标签：php, mysql, date, grouping

我正在从数据库中获取事件列表，并尝试将类似日期与一个标题相关联。截至目前，我正在`<dl>` `<dt>` `<dd>`根据要求使用等。这可能会改变，但我认为这不会影响我的问题的整体影响。

基本上，我试图通过查询获取 5 个最新事件：

```
global $wpdb;

$sql = "SELECT e.*, c.*, ese.start_time, ese.end_time
        FROM wp_events_detail e
        JOIN wp_events_category_rel r ON r.event_id = e.id
        JOIN wp_events_category_detail c ON c.id = r.cat_id
        LEFT JOIN wp_events_start_end ese ON ese.event_id= e.id 
        WHERE e.is_active =  'Y'
        AND c.category_identifier = 'main'
        ORDER BY e.start_date ASC
        LIMIT 0, 5";
$results = $wpdb->get_results($sql); 
```

然后我通过一个循环它们`foreach()`：

```
if(count($results) > 0) {

    echo '<div class="calendar-list">';

    foreach($results as $event) {

        $event_id = $event->id;
        $event_name = $event->event_name;
        $start_date = $event->start_date;
        $start_time = $event->start_time;

        $start_time = strtotime($start_time);
        $start_time = date('g:ia', $start_time);

        $the_time =  strtotime($start_date);

        $the_day = date('d', $the_time);
        $the_month = date('M', $the_time);

        echo '<dl class="calendar-day first-child">';
        echo '<dt>';
        echo '<p class="the-month">' . $the_month . '</p>';
        echo '<p class="the-day">' . $the_day . '</p>';
        echo '</dt>';
        echo '<dd>';
        echo '<h4><a href="' . $event_id . '">' . $event_name . '</a></h4>';
        echo '<h5><span class="time">' . $start_time . '</span></h5>';
        echo '</dd>';
        echo '</dl>';

    }

    echo '</div>';
} 
```

我的主要问题是我需要找到一种将日期相互关联的方法。例如，6 月 27 日。如果有两个日期，我希望它看起来像：

```
<div class="calendar-list">
    <dl class="calendar">
        <dt>
            <p class="the-month">JUN</p>
            <p class="the-day">27</p>
        </dt>
        <dd>
            <h4><a href="#">Title</a></h4>
                        <h5><span class="time">Time</span></h5>
        </dd>
        <dd>
            <h4><a href="#">Title</a></h4>
                        <h5><span class="time">Time</span></h5>
        </dd>
    </dl>
    <dl class="calendar">
        <dt>
            <p class="the-month">JUN</p>
            <p class="the-day">28</p>
        </dt>
        <dd>
            <h4><a href="#">Title</a></h4>
                        <h5><span class="time">Time</span></h5>
        </dd>
        </dl>
</div> 
```

我很不确定如何实现这一目标。我一直在尝试设置和取消设置一些变量，但无法达到理想的结果。

如果有人能指出我该做什么的正确方向，那将不胜感激。

谢谢！

特雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:33:29.073

基本上，您必须记住`$the_time`循环结束时的每一行，并将其与当前行进行比较，`$the_time`以决定是否必须回显一个新的`<dt>`. 然而，每一天都有自己的事实让`<dl>`事情变得有点复杂。这是一个丑陋的解决方案：

```
// Init empty previous time
$previous_time = null;
// Open first definition list
echo '<dl class="calendar-day first-child">';
foreach($results as $event) {

    $event_id = $event->id;
    $event_name = $event->event_name;
    $start_date = $event->start_date;
    $start_time = strtotime($event->start_time);
    $the_time = $start_time;
    $the_day = date('d', $start_time);
    $the_month = date('M', $start_time);
    $start_time = date('g:ia', $start_time);

    // Date changed
    if($the_time != previous_time) {
        // Unless first iteration, close previous list
        if(!empty($previous_time)) {
            echo '</dl>';
        }
        // Open new list
        echo '<dl class="calendar-day first-child">'
        // Show definition term for the group of events
        echo '<dt>';
        echo '<p class="the-month">' . $the_month . '</p>';
        echo '<p class="the-day">' . $the_day . '</p>';
        echo '</dt>';
    }

    // Display current event
    echo '<dd>';
    echo '<h4><a href="' . $event_id . '">' . $event_name . '</a></h4>';
    echo '<h5><span class="time">' . $start_time . '</span></h5>';
    echo '</dd>';

    // Remember date from previous row
    previous_time = $the_time;
}
// Close last definition list
echo '</dl>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:05:23.727

```
<?php
//***************************************
/// Read the readme.txt file before using ///////
// This is downloaded from www.plus2net.com //
/// You can distribute this code with the link to www.plus2net.com ///
//  Please don't  remove the link to www.plus2net.com ///
// This is for your learning only not for commercial use. ///////
//The author is not responsible for any type of loss or problem or damage on using   this script.//
/// You can use it at your own risk. /////
//*****************************************

$dbservertype='mysql';
$servername='ur host';
// username and password to log onto db server
$dbusername='ur user';
$dbpassword='ur pwd';
// name of database
$dbname='ur db';

////////////////////////////////////////
////// DONOT EDIT BELOW  /////////
///////////////////////////////////////
connecttodb($servername,$dbname,$dbusername,$dbpassword);
function connecttodb($servername,$dbname,$dbuser,$dbpassword)
{
global $link;
$link=mysql_connect ("$servername","$dbuser","$dbpassword");
if(!$link){die("Could not connect to MySQL");}
mysql_select_db("$dbname",$link) or die ("could not open db".mysql_error());
}
//////// End of connecting to database ////////

// Init empty previous time
 $previous_time = null;

 // Open first definition list
     echo '<dl class="calendar-day first-child">';
    $q1="SELECT * FROM msg WHERE sendto = '1' || sender = '1' ORDER BY time desc";
 $n1=mysql_query($q1);
    while($nt1=mysql_fetch_array($n1)){

 $start_time = strtotime($nt1['time']); //change to string
    $the_time = date('j m', $start_time); //select wat u need i.e day and month

     //$the_time = $nt1['time']);  //for troublshooting db

   // Date changed
if($the_time != $previous_time) {
    // Unless first iteration, close previous list
    if(!empty($previous_time)) {
        echo '</dl>';
    }
    // Open new list
    echo '<dl class="calendar-day first-child">';
    // Show definition term for the group of events
   echo '<h4>'.$nt1['time'].'</h4>';
 }

 // Display current event
echo '<dd>';
echo $nt1['message'] .' '. $nt1['time'];
echo '</dd>';

// Remember date from previous row
$previous_time = $the_time;
 }
 // Close last definition list
 echo '</dl>';

?>

 </body>

       </html> 
```

兄弟们，有了这段编辑过的代码，你可以按时间对任何东西进行分组

# java - 自动生成的文件 BuildConfig.java 出错 - Android

> ID：11025538
> 
> 赞同：3
> 
> 时间：2012-06-14T01:25:27.020
> 
> 标签：java, android, eclipse

我的 Android eclipse 项目突然出错。这是在运行 eclipse 时硬关机之后，所以这可能与它有关。我清理项目，然后进行构建。我在 /gen 目录中自动生成的 BuildConfig.class 文件中收到以下错误：

```
The type android.content.Context cannot be resolved. It is indirectly referenced from required .class files 
```

我确实注意到，在我的构建配置中，JRE 被声明为丢失。我已经解决了这个问题，但仍然得到错误。帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T03:30:38.350

我能够通过转到“修复项目属性”来解决问题。右键单击项目-> android 工具。

不知道是什么导致了这个错误。

# gwt - GWT DataGrid 大小调整

> ID：11025540
> 
> 赞同：6
> 
> 时间：2012-06-14T01:25:43.770
> 
> 标签：gwt, datagrid, sizing

我有一个 DataGrid，我想在向其添加行时垂直增长（高度）。要添加到网格的小部件应直接位于 DataGrid 下方。我该怎么做呢？

“GWT DataGrid 自动高度”的答案太晦涩难懂（如果有的话）。我尝试将 DataGrid 放在 ResizeLayoutPanel 中，但它只显示 datagrid 标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:52:32.170

对于那些仍在为`CellTable`（自动高度，寻呼机始终在最后一行下方）和`DataGrid`（固定标题但高度应该固定并且寻呼机将保持在同一位置，即使您有一行数据）而苦苦挣扎的人。

不要忘记它们扩展了同一个类：`AbstractCellTable`

所以你可以轻松地调整你的代码（注意 TableType 只是我创建的一个枚举）：

```
if (tableType == TableType.CELLTABLE) {
      // CellTable
      CustomTableWidgetCellTableResource resource = GWT.create(CustomTableWidgetCellTableResource.class);
      table = new CellTable<T>(10, resource);
    } else {
      // DataGrid
      CustomTableWidgetDataGridResource resource = GWT.create(CustomTableWidgetDataGridResource.class);
      table = new DataGrid<T>(10, resource);
      table.setHeight("470px"); // Default height
    } 
```

# php - 带有 PHP 下载的 HTML 下拉菜单

> ID：11025542
> 
> 赞同：0
> 
> 时间：2012-06-14T01:26:08.763
> 
> 标签：php, html, forms, drop-down-menu

我一直在尝试将 PHP 脚本与 HTML 下拉菜单相关联。这个 PHP 脚本的作用是从 textarea 中获取输入，然后在提交时它会请求用户从表单中下载输入或“文件”。但是，我也希望下拉列表中的每个选择在下载时都有自己的扩展名。例如：如果下拉选项之一是“PHP”，并且选择了该选项，当用户通过“另存为”按钮保存文件时，文件将自动包含扩展名“.php”等等. 有可能以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:34:00.880

是的。

您建议的一种方法是将表单作为`POST`提交处理：在客户端，让您的表单选择存储在 fields`value`属性中的扩展名。在服务器端，检查`$_POST`var 的`$_POST[ 'field' ]`.

另一种方法是将 iFrame 添加到文档中，并将其源设置为返回资源的脚本。在这种情况下，它看起来像`script.php?field=value`并且您将检查`$_GET`变量`$_GET[ 'field' ]`以确定您在 PHP 中设置的扩展类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:40:36.190

假设您有一个看起来像这样的表单：

```
<form action='myphpfile.php' method='post'>
    <input type='text' name='filename' /> 
    <select name='extension'>
        <option value='php'>PHP</option>
        <option value='html'>HTML</option>
    </select>
    <input type='submit' value='Save As' />
</form> 
```

然后在您的 PHP 文件中，您只需将两个值连接在一起：

```
$file = $_POST['filename'] . '.' . $_POST['extension']; 
```

然后将文件的链接发回给用户。

**编辑**：完整 PHP 文件的可能示例：

`myphpfile.php:`

```
<?php
$file = $_POST['filename'] . '.' . $_POST['extension'];
header("Content-disposition: attachment; filename=$file");
readfile($file);
?> 
```

# google-apps-script - 我如何知道电子表格单元格是否使用谷歌应用脚 本合并

> ID：11025543
> 
> 赞同：16
> 
> 时间：2012-06-14T01:26:17.833
> 
> 标签：google-apps-script, google-sheets

在 Google 文档电子表格中。如果单元格 A1 和 A2 被合并，有没有办法使用谷歌应用脚​​本来确认它们是否被合并？

GAS 中有一个合并功能[https://developers.google.com/apps-script/class_range#merge](https://developers.google.com/apps-script/class_range#merge)

但是没有显示如何检查单元格是否合并的函数或示例。

getValues 等只是为单元格返回一个空字符串。例如，这不起作用。

```
function testMerge() {

  var spreadsheet = SpreadsheetApp.openById('Z3ppTjxNUE........'); 
  var sheet = spreadsheet.getSheets()[0];
  var range = sheet.getRange("A3:A4");
  var values = range.getValues();
  var formulas = range.getFormulasR1C1();
  var formulasA1 = range.getFormulas();

  range = sheet.getRange("A4");
  range.setValue("a");

  range = sheet.getRange("A3:A4");
  var values2 = range.getValues();
  var formulas2 = range.getFormulasR1C1();
  var formulasA12 = range.getFormulas();

  var count = range.getHeight();

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-01-14T07:50:36.347

是的，现在您可以使用`isPartOfMerge`检查。

对于任何想要获得合并单元格的值的人：

```
var value = (cell.isPartOfMerge() ? cell.getMergedRanges()[0].getCell(1,1) : cell).getValue(); 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-08T14:14:18.273

**range.isPartOfMerge()**

似乎该`.isPartOfMerge()`方法[已实施](https://developers.google.com/apps-script/reference/spreadsheet/range#ispartofmerge)（2016 年 9 月 11 日）。

所以你可以检查一个范围是否像这样合并：

```
function testMerge() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("Sheet1");
  var range = sheet.getRange(1,1,2); // example for cells A1 and A2
  Logger.log(range.isPartOfMerge());
} 
```

*文档* [https://developers.google.com/apps-script/reference/spreadsheet/range#ispartofmerge](https://developers.google.com/apps-script/reference/spreadsheet/range#ispartofmerge)

* * *

**旧方法**

在这里发布另一种我更喜欢的方法，而不是接受的答案。

如果您尝试使用 GAS 将值存储在合并范围的单元格中，除了第一个单元格，它不会存储它。

因此，我们可以利用这一点并尝试存储该值并检查它是否已存储，使用类似于此的函数：

```
 function isMerged(range){
  try {
    range.getDataSourceUrl()
  } catch (err) {
    throw "isMerged function only works with valid GAS Range objects"
  }
  var sheet = range.getSheet();
  var rangeData = range.getValues();

  var testValue = "testing merge";

  if (rangeData.length == 1 && rangeData[0].length == 1) return false; // we have a single cell. Can't possible be merged :)

  if (rangeData.length == 1) {
    // We have a single row. Which means we're testing a row with multiple columns
    var mainCell=range.getA1Notation().split(":")[0];
    var rowNumber= sheet.getRange(mainCell).getRow();
    var nextColNumber = sheet.getRange(mainCell).getColumn()+1;
    var row = rangeData[0];
    var oldValue = row[1]; // for testing purposes, we're chosing the next possible column

    sheet.getRange(rowNumber,nextColNumber).setValue(testValue);
    if (sheet.getRange(rowNumber,nextColNumber).getValue() !== testValue) {
      return true;
    } else {
      sheet.getRange(rowNumber,nextColNumber).setValue(oldValue);
      return false;
    };
  } else if (rangeData[0].length == 1) {
    // We have multiple rows and a single column.
    var mainCell=range.getA1Notation().split(":")[0];
    var nextRowNumber= sheet.getRange(mainCell).getRow()+1;
    var colNumber = sheet.getRange(mainCell).getColumn();
    var oldValue = rangeData[1][0]; // for testing purposes, we're chosing the next possible row

    sheet.getRange(nextRowNumber,colNumber).setValue(testValue);
    if (sheet.getRange(nextRowNumber,colNumber).getValue() !== testValue) {
      return true;
    } else {
      sheet.getRange(nextRowNumber,colNumber).setValue(oldValue);
      return false;
    };
  } else {
    // We have multiple rows and multiple columns
    var mainCell=range.getA1Notation().split(":")[0];
    var nextRowNumber= sheet.getRange(mainCell).getRow()+1;
    var nextColNumber = sheet.getRange(mainCell).getColumn()+1;
    var oldValue = rangeData[1][1]; // for testing purposes, we're chosing the next possible row and next possible column

    sheet.getRange(nextRowNumber,nextColNumber).setValue(testValue);
    if (sheet.getRange(nextRowNumber,nextColNumber).getValue() !== testValue) {
      return true;
    } else {
      sheet.getRange(nextRowNumber,nextColNumber).setValue(oldValue);
      return false;
    };
  }

  // if none of these checks worked, something's fishy. Either way, return false
  return false
} 
```

我已经进行了一系列快速测试并相应地返回了`true`/ `false`，但是有一个我没有时间介绍的限制：如果您有一个合并的范围，`"A1:F1"`并且您检查了范围`"A1:G1"`（所以，还有一列），`true`即使 G1 不是合并范围的一部分，它也会返回- 因为它仅使用第一个绑定行/列作为参考来检查下一列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T18:45:41.050

对于像我这样不知道`.breakapart()`取消合并单元格的方法的人： [https ://developers.google.com/apps-script/class_range#breakApart](https://developers.google.com/apps-script/class_range#breakApart)

感谢 Henrique 的提示！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T04:14:59.163

这是不可能知道的。已经有一个关于这个的[问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=618)打开了，但它已经很老了，没有任何活动。你应该给它加星标（以跟踪更新和投票）并发表评论，看看你是否能得到一些关注。

但是，当我需要确保合并的单元格符合我的要求时，我所做的就是将所有内容分开并再次合并，以确保确定。当然，这不是一个解决方案，只是一个可能也适合您的想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-22T09:21:53.267

如果这里有人需要解决这个问题，我编写了一个小工具，它可以将大部分工作从导出的 HTML 中制作所有合并单元格的键值文件中解脱出来。

你可以在这里找到它： [https ://github.com/martinhbramwell/CellMergeWorkAround](https://github.com/martinhbramwell/CellMergeWorkAround)

我写它是因为我有一个小项目，它依赖于能够完全克隆从一个电子表格到另一个电子表格的范围。显然，我已经投票赞成解决这个问题。

（注意：我会将其添加为正确答案的评论，但缺少必要的要点。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-25T08:49:35.283

似乎有一种解决方法可以利用合并单元格总是返回白色背景这一事实。下面的代码似乎对我有用；如果有人可以确认，我将不胜感激。

```
function testMerged() {
  var WHITE = '#ffffff';
  var NON_WHITE = '#fffffe';
  var range = SpreadsheetApp.getActiveSheet().getDataRange();
  range.setBackground(NON_WHITE);
  range.getBackgrounds().forEach(function (row, rowNum) {
    row.forEach(function (col, colNum) {
      if (col === WHITE) { Logger.log('Cell merged at row ' + rowNum + ' col ' + colNum); }
    });
  });
  range.setBackground(WHITE);  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T02:59:26.657

下载为 HTML：您可以将工作表下载为 HTML，这将包括合并的单元格信息。不是一个好的解决方案，但它有效。

示例下载地址：

docs.google.com/feeds/download/spreadsheets/Export?key=***电子表格** 密钥 *&exportFor‌​mat=html&gid=3

其中 gid 是工作表 gid 编号。- 需要通过 google drive api 登录（详见 google drive DrEdit 教程）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-03T07:43:44.497

找到了这个解决方案，发布在这里：
[https ://code.google.com/p/google-apps-script-issues/issues/detail?id=618](https://code.google.com/p/google-apps-script-issues/issues/detail?id=618)

**但**仅适用于有效范围

```
// This is my function to test the active range is merged or not and return
// true or false by passing active range to it
function ismerge() {
  var spread = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = spread.getActiveSheet();
  var last_row = sheet.getActiveRange().getLastRow();
  var last_col = sheet.getActiveRange().getLastColumn();

  Logger.log("Last row: %s", last_row);
  var active_row = sheet.getActiveRange().getRow();
  var active_col = sheet.getActiveRange().getColumn();
  Logger.log("Row: %s", active_row);
  if ( (last_row == active_row) && (last_col == active_col) ) {
    Logger.log("Cell not merged");
    return false;
  }
  else {
    Logger.log("Cell merged");
    return true;
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-07T08:44:33.273

也许答案有点晚了，因为我没有看到新版本的谷歌电子表格存在这个问题。但是，我仍然为我的项目使用旧的电子表格版本。所以我需要以某种方式弄清楚。

我需要为新列复制上一列的格式。这是以下代码的一部分：

```
 // trying to find first column with week day (white background)
      var background = '';
      for(var columnIndex = 3; columnIndex<=columnLetters.length; columnIndex++){
        background = sheet.getRange(1, columnIndex).getBackground();
        if(background == 'white' || background == ''){
          tmpRange = columnLetters[columnIndex]+':'+columnLetters[columnIndex];
          Logger.log('tmpRange: '+tmpRange);
          // workaround to be able to copy format if there is some merged cells
          try{
            Logger.log('try');
            // copy format of previous column
            sheet.getRange(tmpRange).copyTo(
              sheet.getRange('B1'), {formatOnly:true}
            );
          }catch(e) {
            Logger.log('continue');
            continue;
          }
          Logger.log('break');
          break;
        }
      } 
```

所以，这里最重要的部分是：

```
try{
  Logger.log('try');
  // copy format of previous column
  sheet.getRange(tmpRange).copyTo(
    sheet.getRange('B1'), {formatOnly:true}
  );
}catch(e) {
  Logger.log('continue');
  continue;
} 
```

如果无法复制这些单元格，它只会继续搜索其他单元格。

# jquery - jQuery在设置window.location时取消图像加载

> ID：11025547
> 
> 赞同：0
> 
> 时间：2012-06-14T01:27:06.627
> 
> 标签：jquery, image, window.location

这是我的代码：

```
if(resp.status > 0)
{
    $('#download-stuff').html('<img src="/public/images/tick.png" alt="Ready" /> Your download should start shortly');
    window.location = 'http://site.com/download.php/' + fileID + '/' + resp.ticket;
} else {
    alert("you have downloaded too much");
} 
```

问题是当我更改`download-stuff`div 的 HTML 时，图像`tick.png`不会出现。经过一些调试，似乎该`window.location`调用使浏览器取消了任何待处理的请求，例如对勾图标的请求，因此它不会出现在页面上。

有没有一种不涉及在页面上预加载图像的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:31:04.173

保持简单：从存在但隐藏的图像开始：

```
<div id="download-stuff" style="display:none"> 
    <img id="downloadTick" src="/public/images/tick.png" alt="Ready"/>
    Your download should start shortly
</div> 
```

然后在您的 jQuery 代码中，仅当下载即将开始时才显示图像：

```
if(resp.status > 0)
{
    $('#download-stuff').show();
    window.location = 'http://site.com/download.php/' + fileID + '/' + resp.ticket;
} else {
    alert("you have downloaded too much");
} 
```

# c# - 使用 Ninject 跨类传递参数

> ID：11025548
> 
> 赞同：3
> 
> 时间：2012-06-14T01:27:14.197
> 
> 标签：c#, .net, mvvm, dependency-injection, ninject

我对使用依赖注入非常陌生，我正在我的 WPF 应用程序中使用 Ninject 进行尝试。我想知道我应该如何跨类传递参数。

例如

```
public class ViewPersonViewModel : ViewModelBase
{
    private IDataAccessService _dataService;
    private IPerson _person;
    private string _remarks;

    // binded to textbox
    public string Remarks
    {
        get { return _remarks; }
        set {
            if (_remarks != value) {
                remarks = value;
                OnPropertyChanged("Remarks");
            }
        }   
    }

    public ViewPersonViewModel(
        IDataAccessService dataService, IPerson person)
    {
        _dataService= dataService;
        _person = person;
    }

    // binded to Button
    public void RetrieveStatus()
    {
        Remarks = _dataService.RetrieveRemarks(_person);
    }
} 
```

在这里，dataService 是一个固定的类，我大概可以做

```
class Module : Ninject.Modules.NinjectModule 
{
    public override void Load() 
    {
        Bind<IDataAccessService>().To<DefaultDataAccessService>();
    }
} 
```

**但我想知道我应该如何处理 person 参数，它是由调用类设置的。**

我从[在构造函数中使用带有附加参数的 Ninject 创建实例中](https://stackoverflow.com/questions/2227548/creating-an-instance-using-ninject-with-additional-parameters-in-the-constructor)看到，可以在构造函数中传递附加参数。

但是，我有几个担忧：

1.  是用 `kernel.Get<MyClass>( With.Parameters.ConstructorArgument( "parameterName", parameterValue) );`理想的方式吗？它不会在调试中引起很多问题，例如您输入`parameterName`错误吗？

2.  Ruben 还提到了在涉及 Provider 的情况下使用更复杂的方式。在这里适用吗？如果是，我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:10:08.797

您可能会考虑做的是像这样重载构造函数：

```
public ViewPersonViewModel(IPerson person)
    this(DependencyResolver.GetInstance<IDataAccessService>(), person)
{
}

public ViewPersonViewModel(
    IDataAccessService dataService, IPerson person)
{
    _dataService= dataService;
    _person = person;
} 
```

这样做的主要缺点是您不能直接通过 IoC 请求 ViewPersonViewModel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T01:30:36.783

Ninject 3 提供了一个方便的函数，允许我跨类传递参数。通过创建一个像

```
public interface IViewPersonViewModelFactory()
{
    IViewPersonViewModel CreateViewPersonViewModel([parameterType parameterName..]);
} 
```

并将以下内容添加到要加载的 Ninject 模块中：

```
public override void Load()
{
    Bind<IMainControllingViewModelFactory>().ToFactory();
    ... ... //other bindings
} 
```

然后我们可以获取 ViewPersonViewModel 类的实例（例如在 MainViewModel 类中）

```
 public class MainViewModel
 {
     private IViewPersonViewModel _viewModel;

     public MainViewModel(IViewPersonViewModelFactory viewModelFactory)
     {
         _viewModel = viewModelFactory.CreateViewPersonViewModel(parameters..);
     }
 } 
```

请注意，不必创建具体工厂。

可以在以下位置找到 wiki：[https ://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface](https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface)

# google-drive-api - 谷歌选择器 docsUploadView()

> ID：11025550
> 
> 赞同：0
> 
> 时间：2012-06-14T01:27:28.733
> 
> 标签：google-drive-api, google-picker

我在 Google Picker 中使用 DocsUploadView() 将文档上传到 Google Drive。但是，我想在上传时将内容添加到“描述”和“indexableText”字段。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:16:53.553

Picker API 不支持在上传过程中编辑文件元数据，但您可以在上传后使用 Drive API 更新文档：

[https://developers.google.com/drive/v1/reference/files/update](https://developers.google.com/drive/v1/reference/files/update)

Picker 将在上传结束时为您提供文档的 ID，这是 API 调用的唯一必需参数。

# sql - 试图在不同的列中复制 x 行的身份。SQL 服务器存储过程

> ID：11025553
> 
> 赞同：0
> 
> 时间：2012-06-14T01:27:55.230
> 
> 标签：sql, stored-procedures

我想在 x 行中将我的身份添加到另一列。我可以在我的存储过程中使用此代码重复两行。

```
ALTER PROCEDURE [dbo].[InsertReport3] @incdate INT,
                                      @inctime VARCHAR(7),
                                      @inv1    VARCHAR(30),
                                      @inv2    VARCHAR(30),
                                      @inv3    VARCHAR(30),
                                      @inctype VARCHAR(20),
                                      @incnar  TEXT,
                                      @incloc  TEXT,
                                      @no      INT
AS
    INSERT INTO IncidentReport
                (I_Date_Incident,
                 I_Time,
                 IncidentType,
                 I_Narrative,
                 I_Location,
                 I_ID,
                 U_no_fk)
    VALUES     (@incdate,
                @inctime,
                @inctype,
                @incnar,
                @incloc,
                @inv1,
                @no);

    UPDATE Incidentreport
    SET    I_reportno = @@IDENTITY
    WHERE  I_no = @@IDENTITY;

    INSERT INTO IncidentReport
                (I_reportno,
                 I_Date_Incident,
                 I_Time,
                 IncidentType,
                 I_Narrative,
                 I_Location,
                 I_ID,
                 U_no_fk)
    VALUES     (@@IDENTITY,
                @incdate,
                @inctime,
                @inctype,
                @incnar,
                @incloc,
                @inv2,
                @no); 
```

一旦我使用该代码达到三个它会增加一个，只拉出以前的身份，想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:03:38.403

假设您使用的是 MS SQL Server，您应该使用`SCOPE_IDENTITY()`而不是`@@identity`. 理由可以在[这里](https://stackoverflow.com/questions/1920558/)找到。我认为这将解决您遇到的问题。

# google-app-engine - Reportlab 不会在 dev_appserver 中加载

> ID：11025555
> 
> 赞同：2
> 
> 时间：2012-06-14T01:28:01.803
> 
> 标签：google-app-engine, reportlab

我在我的 Google AppEngine 项目中使用了 reportlab，但我无法让它与 dev_appserver 一起使用。它在生产中运行良好，没有任何问题。我已将 Reportlab 作为 2.5.5 源代码的整个目录放在我的项目中，我没有使用之前报告过同样问题的 zip 版本。

第一次似乎运行良好，但随后每次似乎都有问题。我尝试关闭所有内容并擦除 pyc 文件，但这似乎并没有解决问题，但是如果我删除整个 Reportlab 目录并从源重新复制它，那么它将工作 1 次，并且永远不会再次工作。

我正在使用最新的 SDK(1.6.6) 和最新的生产 Reportlab(2.5) 以及 Python 2.7 和 NDB。我的 dev_appserver 在 Mac osX Lion 上运行

这是我得到的回溯。

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/Users/dramus/gatherthefamily/gtf.py", line 16, in <module>
    from controllers.sharing import SharingPage, BookPage, BookTask
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/Users/dramus/gatherthefamily/controllers/sharing.py", line 11, in <module>
    from projects.bookmaker import BookMaker
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/Users/dramus/gatherthefamily/projects/bookmaker.py", line 7, in <module>
    from reportlab.lib.styles import ParagraphStyle as PS
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/Users/dramus/gatherthefamily/reportlab/lib/styles.py", line 27, in <module>
    from reportlab.rl_config import canvas_basefontname as _baseFontName
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/Users/dramus/gatherthefamily/reportlab/rl_config.py", line 235, in <module>
    _startUp()
  File "/Users/dramus/gatherthefamily/reportlab/rl_config.py", line 207, in _startUp
    if rl_isdir(d): P.append(d)
  File "/Users/dramus/gatherthefamily/reportlab/lib/utils.py", line 468, in rl_isdir
    return len(filter(lambda x,pn=pn: x.startswith(pn),__loader__._files.keys()))>0
AttributeError: 'HardenedModulesHook' object has no attribute '_files'
INFO     2012-06-14 01:09:54,504 dev_appserver.py:2904] "GET / HTTP/1.1" 500 - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:09:13.910

如果您查看 reportlab 2.5 代码，lib/utils.py 第 463 到 468 行

```
def rl_isdir(pn,os_path_isdir=os.path.isdir,os_path_normpath=os.path.normpath):
    if os_path_isdir(pn): return True
    if _isFSD or __loader__ is None: return False
    pn = _startswith_rl(os_path_normpath(pn))
    if not pn.endswith(os.sep): pn += os.sep
    return len(filter(lambda x,pn=pn: x.startswith(pn),__loader__._files.keys()))>0 
```

该 utils 文件中似乎有一些魔力，并且在这种方法中，存在有关加载程序内部结构的假设。HardenedModulesHook（用于模拟沙盒）没有 _files 属性，因此 SDK 失败。

由于它在生产中工作，`rl_isdir`可能会在最后一行之前的任何行上返回 True 或 False，或者`__loader__`看起来可能不同。

我建议修改该`utils.py`文件，因为它无论如何都包含在您的应用程序目录中，也许将第 468 行替换为`return False`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:09:20.317

根据@NickJohnson[在此处](http://blog.notdot.net/2010/04/Generating-PDFs-on-App-Engine-Python-and-introducing-Mapvelopes)使用的配置检查您的配置，这似乎是一个配置问题。

# ruby-on-rails - Rails has_many，通过，组不太工作

> ID：11025556
> 
> 赞同：0
> 
> 时间：2012-06-14T01:28:03.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

首先，我的模型定义：

```
class Batch < ActiveRecord::Base
  has_many :data_files
  has_many :file_types, :through => :data_files, :group => "data_files.file_type_id"
end

class DataFile < ActiveRecord::Base
  belongs_to :batch
  belongs_to :file_type
end

class FileType < ActiveRecord::Base
  has_many :data_files
end 
```

所以基本上我打算拥有的是具有一个或多个数据文件的批次，每个数据文件都是特定类型的，我希望能够在一个批次中获得所有独特的文件类型。基于上述实现，我预计以下工作：

```
batch.file_types 
```

但是，该`group`部分似乎不起作用。换句话说，文件类型列表不是唯一的，我必须在任何地方这样做：

```
batch.file_types.uniq 
```

我究竟做错了什么？

**编辑：** 生成的 SQL 如下：

```
 SELECT `file_types`.* FROM `file_types` 
 INNER JOIN `data_files` ON `file_types`.id = `data_files`.file_type_id 
 WHERE ((`data_files`.batch_id = 234)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:38:52.557

试试这个：

```
has_many :file_types, :through => :data_files, :uniq => true 
```

另一种更高效的数据库方法是：

```
has_many :file_types, :through => :data_files, :select => "DISTINCT file_types.*" 
```

祝你好运！

**Rails 4 中的 Rails 4 更新**
： `has_many :file_types, -> { distinct }, through: :data_files`

从[这里](https://stackoverflow.com/a/5846672/1129470)。

# android - 在 EditText 中仅设置某些数字 - Android

> ID：11025557
> 
> 赞同：2
> 
> 时间：2012-06-14T01:28:49.760
> 
> 标签：android, input, android-edittext

我有一个 EditText 输入，我想只允许输入数字 1 - 28（整数）。我该怎么做？

我查看了有关 android:inputType 的 android 网站，但找不到任何适合（自定义）的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:41:27.650

您应该只使用[NumberPicker](http://developer.android.com/reference/android/widget/NumberPicker.html)代替它允许您指定最小值和最大值。

如果需要，您可以隐藏 + 和 - 按钮，然后用户将只看到 EditText，它将满足您的要求。

要使数字选择器出现在屏幕上，您必须在其上调用 setMinValue/setMaxValue。

# c++ - 如何在 C++ 中确定进程所有者是否是 Mac OS X 上的管理员

> ID：11025559
> 
> 赞同：5
> 
> 时间：2012-06-14T01:29:12.600
> 
> 标签：c++, macos

如何以编程方式检查运行我的可执行文件的用户是否是管理员？

这是 Mac OS X 10.6 (Snow Leopard) 或更高版本上的 C++。我的许多搜索都没有发现任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:10:11.513

检查`groups`用户是否在其中，并确认该用户在所需的组中。我认为您想检查用户是否属于“管理员”，但您可能想检查其他更具体的访问权限。你为什么要检查管理员呢？直接尝试该任务通常是一个更好的主意，而不是检查广泛的访问级别并在用户没有该访问权限但实际上具有您想要的特定访问权限时失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:37:17.043

通过调用 getuid() 检查用户 ID 怎么样？OS X 基于 BSD。因此，我认为您可以通过此功能检查运行进程的 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-16T17:34:21.367

```
#include <grp.h>
#include <pwd.h>
#include <string.h>

bool currentUserIsAdmin ( ) {
    // A user cannot be member in more than NGROUPS groups,
    // not counting the default group (hence the + 1)
    gid_t groupIDs[NGROUPS + 1];
    // ID of user who started the process
    uid_t userID = getuid();
    // Get user password info for that user
    struct passwd * pw = getpwuid(userID);

    int groupCount;
    if (pw) {
        // Look up groups that user belongs to
        groupCount = NGROUPS + 1;
        // getgrouplist returns ints and not gid_t and
        // both may not necessarily have the same size
        int intGroupIDs[NGROUPS + 1];
        getgrouplist(pw->pw_name, pw->pw_gid, intGroupIDs, &groupCount);
        // Copy them to real array
        for (int i = 0; i < groupCount; i++) groupIDs[i] = intGroupIDs[i];

    } else {
        // We cannot lookup the user but we can look what groups this process
        // currently belongs to (which is usually the same group list).
        groupCount = getgroups(NGROUPS + 1, groupIDs);
    }

    for (int i = 0; i < groupCount; i++) {
        // Get the group info for each group
        struct group * group = getgrgid(groupIDs[i]);
        if (!group) continue;
        // An admin user is member of the group named "admin"
        if (strcmp(group->gr_name, "admin") == 0) return true;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T02:59:11.387

看起来[Open Directory](http://developer.apple.com/library/mac/#documentation/Networking/Reference/OpenDirectoryFramework/Reference/reference.html)是执行此操作的正确方法。您也许可以通过使用`getegid()`和/或`setegid()`

我还没有测试过，但这可能有效：

```
// 80 should be the admin group number, but it Apple might change it in a later release.
if (getegid() == 80 || setegid(80) == 0) {
    // Yea! I'm an admin.
} 
```

只需几个快速的想法即可跟进。我希望他们能引导你朝着正确的方向前进。

# javascript - jQuery-Cycle：如何更改每个新图像的过渡效果

> ID：11025561
> 
> 赞同：1
> 
> 时间：2012-06-14T01:29:45.953
> 
> 标签：javascript, jquery, jquery-cycle

这几乎就是我想要完成的。让每张图像出现不同的过渡效果。

你能帮我修复并找出我的代码有什么问题吗？

**jQuery：**

```
var url = 'http://www.mywebsite.com/';
var img_dir = '_img/slideshow/';
var fx =
    [
    'blindX', 
    'blindY', 
    'blindZ', 
    'cover', 
    'curtainX', 
    'curtainY', 
    'fade', 
    'fadeZoom', 
    'growX', 
    'growY', 
    'scrollUp', 
    'scrollDown', 
    'scrollLeft', 
    'scrollRight', 
    'scrollHorz', 
    'scrollVert', 
    'shuffle', 
    'slideX', 
    'slideY', 
    'toss', 
    'turnUp', 
    'turnDown', 
    'turnLeft', 
    'turnRight', 
    'uncover', 
    'wipe', 
    'zoom'
    ];
var index = 0;

$(function() {
    var $slideshow = $('#slideshow'); 
    // add slides to slideshow (images 2-3) 
    for (var i = 2; i < 13; i++) 
        $slideshow.append(
            '<a href="' + url + img_dir + i+'.jpg" title="Slideshow">'+
                //src="http://www.mywebsite.com/_img/slideshow/"
            '<img src="' + url + img_dir + i+'.jpg" width="100" height="100" />'+
            '</a>'); 
    // start the slideshow 
    $slideshow.cycle(
    {
        if( index < fx.length ) { index++; }
        else { index = 0; }
        fx:      fx[index],
        timeout: 3000
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T01:38:39.003

要使用所有效果很容易：

[http://jsfiddle.net/lucuma/tcRCj/14/](http://jsfiddle.net/lucuma/tcRCj/14/)

```
$('#slideshow').cycle({fx:'all'});​ 
```

此外，如果您只想指定某些：

```
$('#slideshow').cycle({fx:'scrollDown,scrollLeft,fade'}); 
```

如果您不想随机化效果顺序（默认情况下会随机化）：

```
$('#slideshow').cycle({fx:'scrollDown,scrollLeft,fade', randomizeEffects:0}); 
```

# django - django-tables2 中的非查询集数据排序

> ID：11025565
> 
> 赞同：12
> 
> 时间：2012-06-14T01:30:08.710
> 
> 标签：django, django-tables2

文档说：

> 在表由模型支持的情况下，数据库将处理排序。如果不是这种情况，则使用 Python cmp 函数，并在比较不同类型时使用以下机制作为后备： ...

但这可能在由模型支持的表中*，*在自定义列上吗？例如

```
class MyModel(models.Model):
    x = models.IntegerField()
    y = models.IntegerField()

    def z(self):
        return x+y

class MyTable(tables.Table):
    z = tables.Column()
    class Meta:
        model = MyModel 
```

当我尝试这样的事情时，该列显示 OK，但是当我单击列标题进行排序时，我收到此错误：

> 渲染时捕获 FieldError：无法将关键字 u'z' 解析为字段。选择是：...

显然这是因为在数据库表中没有找到 z。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-13T14:10:25.983

如果您对没有数据库列的属性进行排序，则不能使用查询集。不过，您可以将列表传递给您的表。

假设您的 models.py 看起来像这样：

```
from django.db import models

class MyModel(models.Model):
    def foo(self):
        return something_complex() 
```

您可以拥有如下所示的 tables.py：

```
import django_tables2 as tables
from .models import MyModel

class MyModelTable(tables.Table):
    foo = tables.Column()

    class Meta:
        model = MyModel 
```

然后在你的views.py中：

```
from django_tables2.config import RequestConfig
from django.core.paginator import InvalidPage
from django.shortcuts import render

def view_my_models(request):
    # use a list so django_tables2 sorts in memory
    my_models = list(MyModel.objects.all())

    my_models_table = MyModelTable(my_models)
    RequestConfig(request).configure(my_models_table)

    try:
        page_number = int(request.GET.get('page'))
    except (ValueError, TypeError):
        page_number = 1

    try:
        my_models_table.paginate(page=page_number, per_page=10)
    except InvalidPage:
        my_models_table.paginate(page=1, per_page=10)

    template_vars = {'table': my_models_table}
    return render(response, "view_my_models.html", template_vars) 
```

还有[一张讨论这个问题的公开票](https://github.com/bradleyayers/django-tables2/issues/161)。

# sql - SQL 查询不存在，存在

> ID：11025567
> 
> 赞同：4
> 
> 时间：2012-06-14T01:30:25.237
> 
> 标签：sql

模式

```
Movie(title, year, director, budget, earnings)
Actor(stagename, realname, birthyear)
ActedIn(stagename, title, year, pay)
CanWorkWith(stagename, director) 
```

我需要找到所有从未在盈利的电影中工作过的演员（艺名和实名）（收入 > 预算）。所以找到所有的坏演员：P

```
SELECT A.stagename, A.realname
FROM Actor A
WHERE A.stagename NOT IN
   (SELECT B.stagename
    FROM ActedIN B
    WHERE EXIST 
         (SELECT *
          FROM Movie M
          WHERE M.earnings > M.budget AND M.title = B.title AND M.year)) 
```

这会找到所有艺名未出现在第二个查询中的演员吗？第二个查询将查找所有在盈利电影中演出的艺名。

这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:37:36.403

我想你可以简化一下，见下文：

```
SELECT DISTINCT A.stagename, A.realname
FROM Actor A
WHERE NOT EXISTS
  (SELECT *
     FROM Actor B
        , Movie M
        , ActedIn X
    WHERE M.Title = X.Title
      AND X.StageName = B.StageName
      AND M.earnings > M.budget
      AND M.year = X.Year
      AND A.StageName = B.StageName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:05:05.503

```
SELECT 
    a.stagename,
    a.realname
FROM
    Actor a
LEFT JOIN
    ActedIn b ON a.stagename = b.stagename
LEFT JOIN
    Movie c ON b.title = c.title 
    AND a.year = b.year 
    AND c.earnings >= c.budget
WHERE 
    c.title IS NULL
GROUP BY
    a.stagename,
    a.realname 
```

- 没有子查询

- 从未在电影中表演过的演员的帐户

- 如果需要，可以访问聚合函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T01:42:28.067

这样就可以了。你也可以这样写：

```
SELECT A.stagename, A.realname, SUM(B.pay) AS totalpay
FROM Actor A
INNER JOIN ActedIn B ON B.stagename = A.stagename
LEFT JOIN Movie M ON M.title = B.title AND M.year = B.year AND M.earnings > M.budget
WHERE M.title IS NULL
GROUP BY A.stagename, A.realname
ORDER BY totalpay DESC 
```

它基本上将获利的电影用作左连接条件；当左连接为空时，它会被计算在内。

我还添加了上述不良演员的总薪酬，并将他们从最高到最低的薪酬排名；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T01:36:13.500

是的，您对 using 有正确的想法`NOT IN`，但是您在第二个子查询的`WHERE`子句中缺少半个布尔条件。我想你打算使用`AND M.year = B.year`

```
WHERE M.earnings > M.budget AND M.title = B.title AND M.year = B.year 
```

你也可以用几个 s 来做这个，在右边的 join 中`LEFT JOIN`寻找。`NULL`这可能比子查询更快。

```
SELECT
  A.stagename,
  A.realname
FROM Actor A
  LEFT OUTER JOIN ActedIN B ON A.stagename = B.stagename
  LEFT OUTER JOIN Movie M ON B.title = M.title AND B.year = M.year AND M.earnings > M.budget
WHERE
  /* NULL ActedIN.stagename indicates the actor wasn't in this movie */
  B.stagename IS NULL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T01:38:43.063

这会起作用，但只是在 ActedIn 和 Movie 之间加入而不是存在。

外连接也可能比 NOT IN 子句更快，但您需要运行解释计划才能确定。

# php - 在 URL 上使用 Imagick 的 readImageFile 时如何修复“检测到无效的 CRT 参数”错误？

> ID：11025568
> 
> 赞同：0
> 
> 时间：2012-06-14T01:30:25.360
> 
> 标签：php, windows, imagemagick, xampp, imagick

我目前正在尝试通过使用 Imagemagick 做一个小型图像处理类型的项目来自学 PHP。从基础开始，我编写了一些简单的代码来读取图像并将其转换为 PNG。

但是，虽然我能够从本地图像文件中读取，但我完全无法从 URL 中读取图像，因为当我在 url 上调用 readImageFile() 时它会崩溃，并且出现以下错误：

> 致命错误：在 C:\xampp\htdocs\imagepractice\imagemagicktest.php:8 中未捕获的异常 'ImagickException' 和消息 'Invalid CRT parameters detected' 堆栈跟踪：#0 C:\xampp\htdocs\imagepractice\imagemagicktest.php(8 ): Imagick->readimagefile(Resource id #3) #1 {main} 在第 8 行的 C:\xampp\htdocs\imagepractice\imagemagicktest.php 中抛出

我花了最后一个小时在谷歌上搜索解决这个问题的方法，但无济于事，我能找到的唯一线索是[Error in using readImage function (Imagick)](https://stackoverflow.com/questions/9870161/error-in-using-readimage-function-imagick)。但是，与该问题不同的是，我完全可以使用 readImage，甚至可以在本地文件上使用 readImageFile，但不能在图像 URL 上使用。

从那里唯一的评论来看，它似乎可能是 Windows 特有的错误，但我想知道是否有人碰巧能够确认/否认这一点和/或提出修复 CRT 参数错误的方法？

作为参考，我写的代码如下：

```
<?php
$im = new Imagick();

//$im->newPseudoImage(1000, 1000, "magick:rose"); //this works!

//$im->readImage("images\\wheels.jpg"); // this works!

$handle = fopen("http://www.google.com/images/srpr/logo3w.png", "rb");
$im->readImageFile($handle); //this line crashes!
fclose($handle);

$im->setImageFormat("png");
$type = $im->getFormat();
header("Content-type: $type");
echo $im->getImageBlob();
?> 
```

此外，我运行的是 64 位 Windows 7，并且我使用的是 XAMPP 1.7.7（它使用 PHP 5.3.8），并且我最初使用[这些说明](http://bytehash.appspot.com/2012/02/Installing-imagick-for-php-in-windows-under-xampp)安装了 Imagemagick 6.6.4 。（虽然我用 Imagemagick 6.6.2 替换了 6.6.4 版本，但根据[此处](http://valokuva.org/?page_id=50)评论者的建议，这并没有解决任何问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:35:12.300

感谢另一个编码论坛的一些友好的人，我终于想出了如何阻止错误并使这段代码工作。不幸的是，我仍然不确定首先是什么导致了 CRT 参数错误，但是从 fopen 切换到 file_get_contents 为我解决了这个问题。

工作更新代码：

```
<?php
ini_set('display_errors', 'On');
error_reporting(E_ALL | E_STRICT);

$im = new Imagick();

//$im->newPseudoImage(1000, 1000, "magick:rose"); //this works!
//$im->readImage("images\\wheels.jpg"); //this works!

$url = "http://www.google.com/images/srpr/logo3w.png";
$source = @file_get_contents($url);
if(!$source){
    throw new Exception("failed to retrieve contents of $url");
}

$im->readImageBlob($source);

$im->setImageFormat("png");
$type = $im->getFormat();
header("Content-type: $type");
echo $im->getImageBlob();
?> 
```

但是，根据我在论坛上发布的其他人的说法，

> 使用 curl，有些地方在 PHP 中禁用了 allow_url_fopen。我使用 XAMPP 在我的 Windows 7 64 位机器上进行了一些开发，无论我在做什么，curl 每次都可以工作。

所以为了安全起见，我可能会改用 curl 并查看它是否有效，但至少我现在已经解决了我的问题！

# iphone - 使用 XIB 文件加载 UITableViewCell 子类

> ID：11025572
> 
> 赞同：3
> 
> 时间：2012-06-14T01:31:50.277
> 
> 标签：iphone, ios5, uitableview

我无法让我`CustomTableViewCell`的子类`UITableViewCell`出现在我的表格视图中。

我正在使用 xib 来表示该单元格，但我假设数据源委托的代码不会更改。我确保在表格视图单元格 XIB 中设置了相同的重用标识符。

我将问题与返回表格单元格的数据源方法无法正常工作的事实隔离开来，这里是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    CustomTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    DataObject *foo = [self.dataArray objectAtIndex:indexPath.row];

    if (cell == nil) 
    {
        cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    [[cell overview] setText:foo.overview];
    [[cell price] setText:foo.price];
    NSLog(@"cell initialized, description text is %@",cell.overview.text);

    return cell;
} 
```

不知道为什么这不起作用，但最后一个日志语句总是在最后打印一个（null），是的，我确实验证`overview`了数据对象的属性中是否有一个有效的字符串。同样的事情`price`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:55:29.077

1）使您的自定义单元格类分开

2）XIB：文件所有者类更改为 NSObject

3) XIB : UITableViewCell 更改为 MyTableViewCell

4）您要在表格视图代码中添加的位置

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"MyCell";

    MyTableViewCell *cell = (MyTableViewCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        NSArray *arrayCellXib = [[NSBundle mainBundle] loadNibNamed:@"MyTableViewCell" 
                                                              owner:self 
                                                            options:nil];
        if (indexPath.row == 0) {
            // first table cell
            cell = [arrayCellXib objectAtIndex:0]; // *
            ...... 
         }else {

            cell = [arrayCellXib objectAtIndex:1]; // *
         }
        ...
      }
   return cell;

} 
```

如果您想拥有多个自定义单元格，索引 0,1 ... 处的对象是您在 xib 中创建 MyTableViewCell 的顺序的索引。意味着在 MyTableViewCell 类中，您可以制作无限的自定义单元格并根据要求使用。

通常，只需在 XIB 中创建一个自定义单元格并执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    int thisRow = indexPath.row;
    NSString *exampleText = [yourData objectAtIndex:thisRow];

    static NSString *CellID = @"cu5";

    FancyCell *cell =
       (FancyCell *)[tableView dequeueReusableCellWithIdentifier:CellID];
    if (cell == nil)
        {
        NSArray *cellTeam =
          [[NSBundle mainBundle] loadNibNamed:@"FancyCell"
             owner:self options:nil];
        cell = [cellTeam objectAtIndex:0];
        }

    [cell someFunction:exampleText];
    [cell.someLabel setText:exampleText];
    return cell;
    } 
```

希望可以帮助你:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:55:08.240

在 .h 文件中，您编写它。

```
IBOulet CustomTableViewCell *tableCell; 
```

并连接到 CustomTableViewCell 的 .xib 文件中的文件所有者。

你修改这个`(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

```
if (cell == nil) 
 {
     [[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell" owner:self options:nil];
     cell = tableCell;
 } 
```

我想这会对你有所帮助。

# ruby-on-rails - Rails f.submit 标签 disable_with 不起作用

> ID：11025575
> 
> 赞同：0
> 
> 时间：2012-06-14T01:32:03.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise, form-helpers

我正在尝试编辑此`submit`标签以使其在使用该选项单击它后自行禁用`disable_with`，但它没有生成正确的 HTML。

```
<h2>Sign up</h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.submit "Sign up", :disable_with => "Saving..." %></div>
<% end %>

<%= render "links" %>

<%= link_to "Back", :back %> 
```

正如我所说，它没有生成正确的 html。它只是生成与没有提交标签时相同的 HTML。这里有什么问题？

编辑：这是它生成的 HTML：

```
<input name="commit" type="submit" value="Sign up" /> 
```

编辑2：似乎这仅不适用于设计表单....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:55:57.253

没关系。似乎 Devise 不使用`rails g devise:views`.

# jquery - 动态创建时选择框已更改的目标

> ID：11025584
> 
> 赞同：1
> 
> 时间：2012-06-14T01:34:50.757
> 
> 标签：jquery

我有一个表单，它在页面加载时具有三个输入——2 个选择框和 1 个文本框。

我创建了一个 AJAX 调用，它将根据用户在第一个选择框中选择的内容填充第二个选择框。我还有一个按钮，它将具有唯一名称和 ID 的相同输入字段附加到表单中。

我遇到的问题是试图找出哪个选择框已更改。到目前为止，当页面加载时，我可以选择一个选项并填充第二个选择框，但是当我附加另一组输入字段并从第二个选择框中进行选择时，它不会填充相应的选择框。

如果我从页面加载时显示的选择框中进行选择，而不是填充其相应的选择框，它会填充新附加的选择框。

这是代码：

```
$(document).ready(function() {
var i = $('.clonedInput').length;
var count = 2;

$('#prescriptions'+i).change(function() {
    alert(i);
    var value = $(this).val();
    var dataString = 'prescription='+value;
    $.ajax ({
        type: 'POST',
        url: '<?php echo base_url(); ?>index.php/patients/dynamic_ddl',
        data: dataString,
        cache: false,
        success: function(html) { $('#dosage'+i).html(html); } 
    });
});

$(function(){ 
    $('#btnAdd').click(function(){          
        $('#page_properties').append('<tr id="input'+count+'" class="clonedInput">'+
                                '<td><label for="prescriptions'+count+'">Prescription</label></td>'+
                                '<td><select id="prescriptions'+count+'" class="prescriptions" name="prescriptions'+count+'">'+
                                '<option selected="selected">--Select Prescription--</option>'+
                                '<?php foreach ($prescriptions_sel as $option):?>'+
                                '<option value="<?php echo $option['prescription']; ?>"><?php echo $option['prescription'];?></option>'+
                                '<?php endforeach ?></select></td>'+
                                '<td>Dosage: <select id="dosage'+count+'" name="dosage'+count+'" class="dosage">'+
                                '<option selected="selected">--Select Dosage--</option>'+
                                '</select>'+
                                'Add Dosage: <input type="text" name="new_dosage'+count+'" value="" /></td></tr>');
        $('#btnDel').removeAttr('disabled');
        count++;
        i++;
    });
}); 

$('#btnDel').click(function() {                 
    var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have                 
    $('#input' + num).remove(); // remove the last element                   

    // enable the "add" button                 
    $('#btnAdd').removeAttr('disabled'); 

    // if only one element remains, disable the "remove" button                 
    if (num-1 == 1) $('#btnDel').attr('disabled','disabled'); 
    count--;
    i--;
});
$('#btnDel').attr('disabled','disabled');
}); 
```

我已经在这几个小时了，用`if`语句、`for`语句、`foreach`语句（你可以命名）来尝试这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:40:41.863

不太确定我是否遵循您的意思，但听起来您的事件仅在文档准备好时存在的项目上触发，而不是动态添加的那些项目。如果是这样，并且您的问题出在您的更改功能上，您需要使用实时功能来绑定您的事件而不是更改功能。IE

```
$('#prescriptions'+i).change(function() { 
```

需要是

```
$('#prescriptions'+i).live('change', function() { 
```

# nsoutlineview - 当另一个 NSCell 改变时刷新一个 NSCell

> ID：11025586
> 
> 赞同：0
> 
> 时间：2012-06-14T01:35:09.073
> 
> 标签：nsoutlineview, nscell

我的 NSOutlineView 中有两列。一种是文本和图像单元格（类似于 DragNDropOutlineView Apple 示例代码中的类）。旁边是一个名为“XFToggleCell”的自定义 NSCell 子类，用于显示可以打开和关闭的可见性图标（眼球）（就像 Photoshop 一样）。

XFToggleCell 支持鼠标跟踪/拖动（同样，就像 Photoshop 一样），因此您可以单击一个眼球，然后向下拖动以一次显示/隐藏多个项目。在文本和图像单元格中，当项目隐藏时，我将文本显示为灰色，而不是显示为黑色。

几乎一切工作正常。当我单击一个眼球 (XFToggleCell) 时，它的图像会被清除并且我的模型对象会被隐藏。但是，相邻的文本和图像单元格的字体不会变成灰色（它不会更新），直到我再次单击切换单元格......当我这样做时，图像和文本单元格的文本的颜色总是与什么相反它应该是（当点击可见性时，文本变为灰色，反之亦然）。

我确定发生这种情况的原因是因为在更改切换单元格的值之前正在重绘文本和图像单元格。结果，它的显示总是“一键落后”。顺序是这样的：

1.  我将鼠标放在第 1 列的切换单元格上。
2.  重绘第 0 列中的文本和图像单元格。
3.  第 1 列中切换单元的对象值已更改。
4.  重绘第 1 列中的切换单元格。

如果我可以像上面的步骤 5 那样强制重绘第 0 列中的文本和图像单元格，我应该很高兴。

由于单击第 1 列的单元格，如何强制更新第 0 列的文本和图像单元格的绘图？

这是我认为关键方法的实现......在我的 XFToggleCell.m 中，它位于第 1 列中：

```
- (BOOL)startTrackingAt:(NSPoint)startPoint inView:(NSView *)controlView
{
    .
    .
    .
    ...do some stuff...
    .
    .
    .
    //Here's where I change the cell's object value, causing the cell to be redrawn.
    //This part works fine.
    [self setObjectValue:([self.representedObject newState]) ? self.image : nil];
    .
    .
    .
    //Why doesn't this next line update the adjacent cell?!?!?!?!?
    //Column 0 contains the text and image cell I'm trying to update
    [controlView setNeedsDisplayInRect:[(NSOutlineView *)controlView frameOfCellAtColumn:0 row:thisRow]];
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T01:48:44.213

好吧，我不太清楚为什么，但打电话

```
[(NSOutlineView *)controlView setNeedsDisplayInRect:[(NSOutlineView *)controlView frameOfCellAtColumn:col row:row]]; 
```

当我把它放在末尾时没有用

```
-(BOOL)startTrackingAt:(NSPoint)startPoint inView:(NSView *)controlView 
```

在我的 XFToggleCell 课程中。

所以我尝试添加

```
[outlineView setNeedsDisplayInRect:[outlineView frameOfCellAtColumn:col row:row]]; 
```

在我的最后

```
-(void) outlineView:(NSOutlineView *)outlineView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn byItem:(id)item 
```

我的 NSOutlineView 数据源中的方法，它起作用了。不知道为什么，但这是如何做到的。如果有人能阐明为什么在牢房中调用本质上相同的东西不起作用，我将不胜感激。

# jquery - jQuery 电话号码验证允许空格，最少 8 位

> ID：11025587
> 
> 赞同：5
> 
> 时间：2012-06-14T01:35:23.440
> 
> 标签：jquery, regex, jquery-validate, phone-number

如何在仅数字验证中允许空格，至少 8 位数字？当允许空格时，电话号码更容易输入。例如 0400 123 456、9699 1234。

到目前为止，这是我的代码，我只有最少 8 位数字的验证工作：

```
jQuery.validator.addMethod(
  "phone",
  function(phone_number, element) {
    return this.optional(element) || /^\d{8}$/.test(phone_number);
  },
    "Please enter numbers only"
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:39:03.427

在验证之前删除空格：

```
return this.optional(element) || /^\d{8,}$/.test(phone_number.replace(/\s/g, '')); 
```

这样你就可以保留空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:44:26.710

我的建议是`phone_number`在验证之前删除空格。

```
jQuery.validator.addMethod(
  "phone",
  function(phone_number, element) {
    return this.optional(element) || /^\d{8}$/ *$/.test(phone_number.replace(/\s/g, ""));
  },
    "Please enter numbers only"
); 
```

# javascript - KnockoutJS 绑定不起作用

> ID：11025590
> 
> 赞同：0
> 
> 时间：2012-06-14T01:35:45.123
> 
> 标签：javascript, knockout.js

好吧，对这个感到沮丧......使用knockoutJS做一些视觉交互的东西。

我有一个按钮，它将进行 AJAX 调用以验证某些数据。该调用将返回 CanProceed 属性以及表示其他视图设置的对象。当我设置 CanProceed(true) 时，代码可以工作，这会打开一个内部有更多 DIV 的 DIV，每个可见性属性都绑定到从服务器设置的 Permissions.AllowXXX。

有关示例，请参见小提琴

[http://jsfiddle.net/RcCAx/](http://jsfiddle.net/RcCAx/)

我想要发生的是当我从服务器获得权限时，我应该能够告诉淘汰赛对象并更新页面 UI 但它不起作用。如果我首先声明可观察对象（如使用 CanProceed 属性），它可以工作，但如果我尝试在这里使用 ko.mapping.fromJS(serverdataobject) ，它不会更新之前绑定的内容。

帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:02:42.243

[请参阅更新的小提琴](http://jsfiddle.net/RcCAx/2/)以获取解决方案。这里的关键是让 Permissions 成为可观察的

# sql-server - 在 sql server 2008 存储过程的局部变量中使用表数据类型

> ID：11025591
> 
> 赞同：2
> 
> 时间：2012-06-14T01:35:49.757
> 
> 标签：sql-server, sql-server-2008

我想将数据类型创建为 TABLE，但不能在存储过程的局部变量中使用它（SQln Server 2008）

```
Create type myTableDataType as table
(
    field1 int,
    field2 int,
    field3 varchar(100)
)   

create Procedure myStoredProcedureTest
as
begin
declare @temporaltable as  myTableDataType 

.
.
.
.
end 
```

在我的声明语句中，我得到了一个错误`"variable has an invalid data type"`

一些想法我错了！

谢谢

伊莱娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:41:26.993

您需要一个[表变量：](http://www.mssqltips.com/sqlservertip/1556/differences-between-sql-server-temporary-tables-and-table-variables/)

```
create Procedure myStoredProcedureTest
as
begin
declare @temporaltable as table
(
    field1 int,
    field2 int,
    field3 varchar(100)
)    

.
.
.
.
end 
```

# jquery - jQuery序列化将所有空格转换为加号

> ID：11025594
> 
> 赞同：27
> 
> 时间：2012-06-14T01:36:09.397
> 
> 标签：jquery, serialization, space

目前，在我使用序列化的任何地方，我都必须像这样使用它：

```
.serialize().replace(/\+/g,'%20'); 
```

否则表单数据中的任何空格都将被转换为+。是否有可以将其设为默认值的设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-28T14:25:56.970

为了好玩，这里有一个不使用临时变量的替代方法：

```
$.fn.serializeAndEncode = function() {
    return $.map(this.serializeArray(), function(val) {
        return [val.name, encodeURIComponent(val.value)].join('=');
    }).join('&');
};

$("#formToSerialize").serializeAndEncode(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T17:08:08.260

我不得不做同样的事情。特里使用 escape() 给出的解决方案不起作用。= 和 & 正在被编码（我们不希望这样）并且 + 仍然存在。

我所做的是创建自己的函数来序列化：

```
var QueryString = "";
$(selector).each(function(index) {
    if(QueryString != "") QueryString += "&";
    QueryString += $(this).get(0).id + "=" + encodeURIComponent( $(this).val() );
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T01:50:19.157

不要相信有默认值，您需要以[其中一种方式](http://xkr.us/articles/javascript/encode-compare/)对字符串进行编码。

虽然您可以创建自己的插件：

```
jQuery.fn.serializeAndEncode = function() {
    return escape(this.serialize());
}

$(myForm).serializeAndEncode(); 
```

# php - .htaccess url重写单页网站

> ID：11025597
> 
> 赞同：1
> 
> 时间：2012-06-14T01:36:43.547
> 
> 标签：php, .htaccess

我有一个单页网站，它根据使用 PHP 通过 URL 传递的变量来更改内容。

例如，我的网址显示为

```
www.mysite.com/index.php?section=home
www.mysite.com/index.php?section=about-us 
```

依此类推，具体取决于您在主导航中单击的链接。

我希望网址读为`www.mysite.com/home`or `www.mysite.com/about-us`。

我的 mod-rewrite 功能已启用，因为在我将其设为单页站点之前，它运行正常。

我试过这个...

```
RewriteEngine on
RewriteBase /
RewriteRule ^home/?$ index.php?section=$1 [NC,L] 
```

我已经尝试了在 Google 和 StackOverflow 上找到的所有建议，但没有任何效果。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:38:23.347

几乎

```
RewriteEngine on
RewriteBase /
RewriteRule ^([a-zA-Z0-9-]+)/?$ index.php?section=$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:54:47.953

我有一个`.htaccess`完全相同的目的，它工作得很好。我的代码如下。

```
RewriteEngine On
RewriteRule ^([^/\.]+)/?$ index.php?id=$1 [L] 
```

当然，如果`index.php`不是您的主要 PHP 文件，请将其替换为什么是。此外，如果您的示例代码是您使用的，请替换`?id`为。`?section`

`[^/\.]+`手段在说什么`I need you to find text that contains anything but a period (.) or a forward slash (/), and there has to be at least one character in it.`

例如，请访问我正在使用它的网站[Northside Aikido](http://www.northsideaikido.com/)。

如果您有任何问题，请随时提问。

**编辑**

请注意，此代码不会自动`http://www.example.com/index.php?section=home`转换`http://www.example.com/home`，它只是意味着后一个链接与前一个链接一样工作。如果你想让它自动替换它，你需要的代码不止一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T01:59:50.670

这就是我使用的：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule ^([A-Za-z0-9-]+)/?$     index.php?section=$1 [NC,L]
</IfModule> 
```

# php - 致命 [ 0] gearman_packet_unpack_header：无效的命令值

> ID：11025598
> 
> 赞同：3
> 
> 时间：2012-06-14T01:36:45.117
> 
> 标签：php, ubuntu, gearman

我正在尝试[从他们的文档中运行示例 Gearman 工作者](http://gearman.org/index.php?id=gearman_php_extension)（见下文），但每次我这样做时，我的 Gearman 日志文件中都会出现大量错误，如下所示： `FATAL [ 0] gearman_packet_unpack_header:invalid command value`. 当我运行 Gearman 客户端（同样是他们自己的示例）时，它似乎并没有改变任何东西。什么都没发生。

这是失败的示例工作者代码

```
# Create our worker object.
$worker= new GearmanWorker();

# Add default server (localhost).
$worker->addServer();

# Register function "reverse" with the server.
$worker->addFunction("reverse", "reverse_fn");

while (1)
{
  print "Waiting for job...\n";

  $ret= $worker->work();
  if ($worker->returnCode() != GEARMAN_SUCCESS)
    break;
}

# A much simple reverse function
function reverse_fn($job)
{
  $workload= $job->workload();
  echo "Received job: " . $job->handle() . "\n";
  echo "Workload: $workload\n"; 
  $result= strrev($workload);
  echo "Result: $result\n";
  return $result;
} 
```

`>php -i`：

```
extension version   1.0.2
libgearman version  0.29
Default TCP Host    localhost
Default TCP Port    4730 
```

`>gearmand -V`：

`gearmand 0.29`

如何正确配置 Gearman 以使其正常工作？libgearman 与 gearmand 版本相同，我的 PECL 扩展是最新的稳定版本。我不确定还能尝试什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:56:32.797

据我所知，Gearman 1.0.2 版的 PECL 扩展不适用于 Gearman 0.29 版。我将 Gearman 和 libgearman 都更新到了 0.33 版，并且我的扩展程序一完成就可以工作了。

# vb.net - 字符串连接无法使用我的课程

> ID：11025599
> 
> 赞同：0
> 
> 时间：2012-06-14T01:37:09.150
> 
> 标签：vb.net, string-concatenation

我正在尝试将两个属性连接到一个字符串中，如下所示：

```
public class thing 
    public property word() as string()
    public property count() as integer()
end class

Public class myApp
    dim a_thing as new thing
    redim a_thing.word(upperBnd)
    redim a_thing.count(upperBnd)

    'I go on to fill the a_thing.word and .count arrays
    'Then I try to display the results...but it doesnt work.
    for i=0 to a_thing.word.length-1
        debug.writeline("Word: " & a_thing.word(i) & "  Count: " & a_thing.count(i))
    next
end class 
```

for 语句只显示：

```
Word: [the_word_in_the_array] Word: [the_word_in_the_next_index] ...etc, 
```

没有新线...

如果我把它变成两个 debug.writeline 语句，我得到：

```
Word: [the_word_in_the_array] Count: [the_count_in_the_array] 
```

这就是我想要的，但它在调试输出中无济于事......我需要将它放入单个字符串中。我试过使用 a_thing.count(i).tostring，但它不起作用。如果我单独查看数组，它们正是我想要的内容。但我无法连接它们。这里发生了什么？它是否与抑制 debug.writeline 通常创建的新行有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:41:26.843

检查 Word 数组中单词的末尾是否有 Null 字符。这会导致你看到的行为

# javascript - javascript中的范围以访问私有变量

> ID：11025604
> 
> 赞同：0
> 
> 时间：2012-06-14T01:37:37.790
> 
> 标签：javascript, binding, scope

```
a = function (){
    var b = 10;
    var k = function(){
        console.log(b);
    }();
}(); 
```

**上面的代码将打印 10。**

```
var k = function(){
    console.log(b);
}
var a = function (){
    var b = 10;
    k();
}(); 
```

**此代码将打印** `undefined`.

可以`10`代替打印吗？`k`就像在调用它之前绑定范围一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:07:56.653

正如@Derek 回答的那样，您显然可以传递一个论点。

除此之外，您不能转移或更改变量范围，但您可以直接操作调用上下文。

因此，您可以设置`b`为对象的属性，并将该对象设置为您正在调用的任何函数的调用上下文。

```
var k = function(){
    console.log(this.b);
}
var a = function (){
    var obj = {b:10};
    k.call(obj);
}(); 
```

该`.call()`方法调用该`k`函数，但将您提供的第一个参数设置为被调用函数的调用上下文。

事实上，从技术上讲，您不需要使用对象。您可以直接将数字设置为要使用的值...

```
var k = function(){
    console.log(this);
}
var a = function (){
    var b = 10;
    k.call(b);
}(); 
```

在严格模式下，您将获得数字，但在非严格模式下，您将获得数字作为其对象包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:04:47.637

真的吗？你试过什么？

```
var k = function(b){
    console.log(b);
}
var a = function (){
    var b = 10;
    k(b);  //Done.
}(); 
```

为什么它`undefined`在你的第二个例子中给你是因为`b`没有定义。在使用变量之前，您必须先定义它`b`。

```
var k = function(b){ //<--There, defined. Mission accomplished. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T02:15:10.780

可以通过 授予对范围的访问权限`eval`。

```
var a = (function() {
    var b = 10;
    return {
        eval: function(s) {
            return eval(s);
        }
    };
})();

var k = function() {
    console.log(a.eval("b"));
};

k();
​ 
```

# java - 响应正在提交并且 doFilter 链已损坏

> ID：11025605
> 
> 赞同：3
> 
> 时间：2012-06-14T01:37:44.170
> 
> 标签：java, servlets, redirect, servlet-filters

为了这是我需要发生的事情：

请求`blah.com/test`

1.  ServletFilter A - 创建配置文件，然后调用`chain.doFilter`
2.  ServletFilter B（被跳过，因为 url 模式不匹配）
3.  Servlet - 更改配置文件，`repsonse.setStatus`&`response.addHeader("Location", target)`
4.  ServletFilter A - 应该根据配置文件创建一个 cookie

实际发生了什么：

1.  ServletFilter A - 创建配置文件，然后调用`chain.doFilter`
2.  ServletFilter B（被跳过，因为 url 模式不匹配）
3.  Servlet - 更改配置文件，`repsonse.setStatus`&`response.addHeader("Location", target)`
4.  重定向已提交，ServletFilter A 未完成任务

我认为这可能与您可以在 ServletFilter 配置中设置的调度程序值有关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:31:50.773

我认为响应在到达时会做出`ServletFilter A`承诺`Step 4`。一旦响应提交，即标头被写入客户端，您将无法进行需要添加标头的操作。添加cookies之类的操作。

如果您希望在`Step 4`尝试包装`HttpServletResponse`并返回自定义输出流之前不提交响应，该输出流缓冲数据直到它到达`step 4`然后提交响应。

**这是示例代码：**

```
public class ResponseBufferFilter implements Filter
{
public void init(FilterConfig filterConfig) throws ServletException
{
}

public void doFilter(ServletRequest request, ServletResponse response, 
   FilterChain filterChain) throws IOException, ServletException
{
    HttpServletResponse httpResponse = (HttpServletResponse)response;
    BufferResponseWrapper wrapper = new BufferResponseWrapper(httpResponse);
    filterChain.doFilter(request, resposneWrapper);
    response.getOutputStream().write(wrapper .getWrapperBytes());
}

public void destroy()
{
}

private final class BufferResponseWrapper extends HttpServletResponseWrapper
{

    MyServletOutputStream stream = new MyServletOutputStream();

    public BufferResponseWrapper(HttpServletResponse httpServletResponse)
    {
        super(httpServletResponse);
    }

    public ServletOutputStream getOutputStream() throws IOException
    {
        return stream;
    }

    public PrintWriter getWriter() throws IOException
    {
        return new PrintWriter(stream);
    }

    public byte[] getWrapperBytes()
    {
        return stream.getBytes();
    }
}

private final class MyServletOutputStream extends ServletOutputStream
{
    private ByteArrayOutputStream out = new ByteArrayOutputStream();

    public void write(int b) throws IOException
    {
        out.write(b);
    }

    public byte[] getBytes()
    {
        return out.toByteArray();
    }

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:19:03.920

它工作正常。无论如何，重要的是要注意，以防缓冲的响应大小小于 8KB，除非您在调用之前刷新响应，否则它将不起作用`getWrapperBytes()`。

这是由于 servlet-api 内部实现。

# linux - Vim - 强制行之间的额外间距用于下划线

> ID：11025606
> 
> 赞同：2
> 
> 时间：2012-06-14T01:38:06.777
> 
> 标签：linux, bash, vim, xterm

在我的大部分编码中使用 Vim 时，我通常更喜欢将当前行加下划线，以便更容易看到我在代码中的位置。我避免使用线条突出显示之类的东西，因为它通常会使我的深色背景上的亮文本主题（即：'torte'colorscheme）更难看到。

这是我的 Vim 配色方案的一部分：

```
hi CursorLine    guibg=#0F2130  ctermbg=NONE       cterm=underline
hi CursorColumn  guibg=#0F2130  ctermbg=darkgray   cterm=NONE 
```

然后我在我的 .vimrc 文件中启用这些功能（即：）`~/.vimrc`。

所以，在我的例子中，当前行有一个彩色下划线，它是它上面字符的反色，而当前列有一个深灰色背景，而所有其他文本只有一个黑色背景。

我在这里遇到的唯一问题是我在编码时看不到下划线（'_'）字符，因为当前行的下划线与下划线字符的颜色和粗细完全相同。如果可能的话，唯一的解决方法是：

1.  增加行间距
2.  使下划线出现在我的文本下方几个像素处

在 Vim（不是 gVIM）中可能有这样的事情吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:06:34.043

如果您正在使用`gVim`：

```
:hi! def link CursorLine SpellBad 
```

它将使用 curl-underline。

* * *

更改`linespace`为`10+`将显示`_`在光标线上方：

```
:set linespace=10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:00:42.887

@kev：+1；它适用于 gVIM

然而，正如其他评论者所指出的，这似乎在 Vim 中不可能发生。

最后，我只是将背景设置为深灰色（即：ctermbg=253），然后将光标线设置为更暗（即：ctermbg=black cterm=NONE）。

从那里，我更新了我的 BASHRC 文件以包含以下内容：export TERM=xterm-256color

幸运的是，这最终看起来比我以前的配色方案更好。我现在有一个标准“slate”配色方案的修改版本，具有非常深的灰色背景（即：ctermbg=253），而当前行具有纯黑色背景。

# winapi - 路径前的“\\?\”是什么意思？

> ID：11025608
> 
> 赞同：2
> 
> 时间：2012-06-14T01:38:33.797
> 
> 标签：winapi, filesystems, format, filepath

我正在查看[FastCopy](https://github.com/laurent22/fastcopy)的代码，我想在其中添加一些功能。

在内部，FastCopy 似乎在路径`\\?\`之前存储了它的路径。例如。`\\?\c:\Program Files\Adobe`. 这些路径直接传递给 Windows API 函数，如`DeleteFile`、`RemoveDirectory`等，因此 Windows 似乎理解该格式。

但是这些额外的字符是什么意思，为什么 FastCopy 以这种方式存储它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T01:46:37.863

与 FastCopy 最相关的可能是它允许您使用长度超过 ~256 个字符的文件名。

如果内存可用，它还会阻止 Windows 解析文件名以查找`\\server\file`访问共享文件之类的内容（尽管您仍然可以使用`\\?\UNC\whatever`），但这可能不是这里真正的意图/相关内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T01:46:04.247

您指的是长 UNC 路径：[https](https://en.wikipedia.org/wiki/Path_%28computing%29) ://en.wikipedia.org/wiki/Path_%28computing%29希望对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T01:49:53.057

一般来说，这意味着它支持长文件名 - 名称最长约为 32K。

它还可用于指定 UNC 路径，例如 \\?\UNC\server\share。

如果没有这种支持，Fastcopy 将无法正确访问所有文件。

更多详细信息，请访问[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)

# android - Android：滑动抽屉式动画

> ID：11025611
> 
> 赞同：0
> 
> 时间：2012-06-14T01:38:54.000
> 
> 标签：android, android-layout, android-animation

我正在寻找为我的 LinearLayout 制作动画。

我想让它向上移动，同时看起来它正在它上方的一条线（高度 1dp 的视图）后面消失，直到它最终完全消失。然后，当我想展示它时，我希望能够扭转它。

我对如何实现这一目标有点迷茫。我的第一个想法是，我可能会以某种方式将我的 Layout 转换为 Clip-Drawable 并使用 TranslateAnimation 并更改可以看到的内容，但这似乎过于复杂和困难。我怎样才能制作动画（可能是一组动画？），或者以其他方式实现这种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:04:04.313

如果 1dp 线在更大的视图中，您的 LinearLayout 可以被动画化以消失在它后面。将 TranslateAnimation 与动画侦听器一起使用，然后在 onAnimationEnd 中，您可以将 LinearLayout 的可见性设置为 View.GONE。

# ruby-on-rails - 带有引导生成器 gem 的 Rails 在 IE8 中具有零样式，但在 IE9 中具有

> ID：11025615
> 
> 赞同：2
> 
> 时间：2012-06-14T01:39:38.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

使用

```
gem 'bootstrap-generators', '~> 2.0'
gem 'simple_form', '~> 2.0' 
```

Bootstrap 样式在 IE9 及以下版本中不存在，但通过[http://netrenderer.com/](http://netrenderer.com/)在 IE10 中显示良好。

我的引导生成器.css.scss：

```
@import "bootstrap-variables";

body {
  padding-top: $navbarHeight + 20px;
  padding-bottom: 40px;
}

.page-header {
  a.btn {
    float: right;
  }

  a.btn + a.btn {
    margin-right: 8px;
  }
}

@import "scss/bootstrap";
@import "scss/responsive"; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:07:54.387

例如，您可能正在使用 IE8 无法处理的 HTML5 元素`<section>`。
尝试将此添加到`<head>`布局文件的

```
<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

如果它渲染正确，那是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:59:09.437

原因在此处描述[Rails 3.1, assets pipeline and IE 6 & 7 in production mode - 一些 CSS & js 未正确加载](https://stackoverflow.com/questions/8621189/rails-3-1-assets-pipeline-and-ie-6-7-in-production-mode-some-css-js-are-n)

我们不得不拆分 css，现在一切正常。

# c# - 如何让循环移动到下一个可用的 id 而不是连续做同样的事情？

> ID：11025617
> 
> 赞同：0
> 
> 时间：2012-06-14T01:39:53.810
> 
> 标签：c#, loops, timer, foreach

现在，当我运行它时，它会每 2 秒点击一次相同的按钮。我试图弄清楚如何继续使用下一个 ID，而不是继续执行它找到的第一个 ID，然后再中断。这是我的代码：

```
private void button2_Click(object sender, EventArgs e)
{
    timer1.Start();
}

private void timer1_Tick(object sender, EventArgs e)
{
    HtmlDocument doc = webBrowser1.Document;
    HtmlElementCollection links = doc.GetElementsByTagName("a");

    foreach (HtmlElement link in links)
    {
        if (link.GetAttribute("id").Contains("user"))
        {
            link.InvokeMember("click");
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:49:46.787

一种选择是添加一个列表。
在单击按钮之前，请检查其名称是否在列表中。如果是这样，请不要点击。每次单击按钮时，将其名称添加到列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:53:20.950

将您的代码更改为此...

```
//HtmlElementCollection links = null;
List<HtmlElement> links = null;

private void button2_Click(object sender, EventArgs e)
{
    // This way you only get the links once.
    //links = webBrowser1.Document.GetElementsByTagName("a");
    links = new List<HtmlElement>(
        webBrowser1.Document.GetElementsByTagName("a")
        .OfType<HtmlElement>());

    timer1.Start();
}

private void timer1_Tick(object sender, EventArgs e)
{
    HtmlElement linkToClick = null;

    foreach (HtmlElement link in links)
    {
        if (link.GetAttribute("id").Contains("user"))
        {
            linkToClick = link;
            break;
        }
    }

    // did I find a link?
    if (linkToClick != null)
    {
        // Remove it from the list so you don't click it again.
        links.Remove(linkToClick);

        link.InvokeMember("click");
    }
    else
    {
        // Stop the timer since there are no more items.
        timer1.Stop();
    }
} 
```

顺便说一句，我不知道 HtmlElementCollection 是否有“删除”方法......如果没有，只需使用通用 List<> 或 ArrayList 等。

# c# - 代码覆盖结果窗口中的额外类

> ID：11025618
> 
> 赞同：3
> 
> 时间：2012-06-14T01:40:00.190
> 
> 标签：c#, visual-studio-2010, automated-tests

在 Visual Studio 2010 中运行我的自动化测试后，代码覆盖结果选项卡显示了一些我不理解的内容。被测试的类之一称为 ApplicationData。它显示在代码覆盖率列表中。但它的变体也出现了，在这种情况下出现了 3 次（见下文）。

如果我在代码覆盖率选项卡中展开每个 ApplicationData 实例，第一个显示所有方法，其余显示一些方法。

**我的问题是......附加了<>c__DisplayClass**的那些额外的 ApplicationData 类是什么？

![在此处输入图像描述](../Images/f7c3c5fa0f51c0e5f7bf3f994dda87d6.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T02:06:26.670

这些是自动生成的用于语法糖特性（如闭包）的类。IE

```
 int v = 1;
 myIntArray.Foreach( item => { v+= item; }); 
```

将产生一些用于适当存储/传递的类`v`。

# php - 根据值在php中回显图像标签？

> ID：11025619
> 
> 赞同：0
> 
> 时间：2012-06-14T01:40:35.180
> 
> 标签：php

所以我使用 php 从 mysql 数据库中检索数据。该数据采用数字形式。我想根据该数字回显相同数量的图像标签。我不想使用 if 语句，因为我不知道数字是多少（它是动态的）。有什么想法吗 ？例如，如果数字为 5，则结果应为：

```
<img src=''>
<img src=''>
<img src=''>
<img src=''>
<img src=''> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:50:25.777

做一个[for循环](http://php.net/manual/en/control-structures.for.php)

使用`$n`您在数据库中的号码：

```
for($i=0;$i<$n;$i++):
?>
<img src='path/to/image.jpg'>
<?php
endfor; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:58:34.100

尝试类似：

```
for ($count=0; $count<$row['tagcount']; $count++) {

   echo("<img src=''>");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T01:49:24.087

试试这个...

```
$number = $number[fromdatabase];
$array = range(1,$number);
foreach ($array as $img) {
    echo "<img src=''></img>";
} 
```

现在您将拥有数据库中数字的 img 标签

# windows - Windows 7 64 Chrome 19 字体抗锯齿渲染问题

> ID：11025620
> 
> 赞同：3
> 
> 时间：2012-06-14T01:40:38.537
> 
> 标签：windows, google-chrome, fonts, antialiasing

我刚刚加载了一个新系统，一切看起来都很好。然后突然之间，Chrome 开始在某些网页上显示某些字体，看起来没有抗锯齿。我以前在另一个系统上也发生过这种情况。同样的事情，一切看起来都很好，然后突然之间就开始了。有什么想法或建议吗？谢谢。

我通常看到的屏幕截图。

[http://www.denkers.com/test/font.jpg](http://www.denkers.com/test/font.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:10:04.073

首先，确保您的文本编码正确设置为 Unicode (UTF-8)，方法是转到扳手图标 -> 工具 -> 编码 如果这不起作用，请转到扳手 -> 关于 Google Chrome 并更新到最新版本版本。最后，如果这些都不起作用，请尝试重新安装 Google Chrome。

# php - MySQL：按两列分组并求和

> ID：11025623
> 
> 赞同：5
> 
> 时间：2012-06-14T01:41:18.330
> 
> 标签：php, mysql

建立库存系统。我有很多产品，每个产品都有三个不同的变量。因此，对于库存总额，我想按两列（产品和尺寸）和总数量进行分组以获得库存总额。

| 产品 | 尺寸 | 数量 |
| --- | --- | --- |
| 小部件一 | 2 | 275 |
| 小部件一 | 2 | 100 |
| 小部件二 | 3 | 150 |
| 小部件二 | 2 | 150 |

我想要的输出：

| 产品 | 尺寸 | 数量 |
| --- | --- | --- |
| 小部件一 | 2 | 375 |
| 小部件二 | 3 | 150 |
| 小部件二 | 2 | 150 |

我想出了如何按一列分组并使用下面的代码求和：

```
$query = "SELECT product, SUM(Quantity) FROM inventory GROUP BY product";  
$result = mysql_query($query) or die(mysql_error());
// Print out result
while($row = mysql_fetch_array($result)){
    echo "Total ". $row['product']. " = ". $row['SUM(Quantity)'];
    echo "<br />";
}
?> 
```

我只是坚持按两列分组。是否可以？或者我应该只为三种尺寸中的一种创建三种不同的产品并消除该列？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T01:42:51.127

根据您的示例表，您似乎想要分组`product`而不是`id`. 您只需要将`Size`列添加到`SELECT`列表和`GROUP BY`

```
$query = "SELECT 
            product,
            Size, 
            SUM(Quantity) AS TotalQuantity 
          FROM inventory
          GROUP BY product, Size"; 
```

请注意，我添加了一个列别名`TotalQuantity`，这将允许您通过更明智的方式更轻松地从获取的行中检索列`$row['TotalQuantity']`，而不是`$row['SUM(Quantity)']`

# php - 如何从 facebook-login-button 发送数据？

> ID：11025629
> 
> 赞同：0
> 
> 时间：2012-06-14T01:41:53.233
> 
> 标签：php, html, database, facebook

我有几个相关的问题。我会在这里尝试以合乎逻辑的方式将它们提出来。

首先，我使用这个按钮让用户从我的网站连接到他们的 Facebook

```
<div class="fb-login-button" scope='email,publish_actions,user_likes'>
    Login with Facebook
</div> 
```

有用。我可以连接，并使用一些 api 调用，如 info.name、info.email 等，在网站上显示这些数据。现在它只是一个私人测试站点..一旦它上线显然会隐藏它。

我想做的，本质上是存储连接用户的电子邮件地址。最好在我的服务器上的 MySQL 数据库中，或者甚至只是输出到文本文件......我没有看到任何从应用程序管理页面获取所有这些数据的方法，否则我可以使用它。也没有看到任何使用 FQL 获取此数据的方法，如果有，请告诉我。

在 MySQl 数据库方面，我继续在我的服务器上创建了一个。创建了一个表，我可以以这种方式将数据插入其中：

```
<?php 
$link = mysql_connect('address', 'name', 'pass'); 
if (!$link) { 
    die('Could not connect: ' . mysql_error()); 
} 
if ($link) {
    $myFile = "testFile.txt";
    $fh = fopen($myFile, 'w') or die("can't open file");
    $stringData = "DATABASE YOOO";
    fwrite($fh, $stringData);
    mysql_select_db(fb_test);   
    mysql_query("INSERT INTO demographic VALUES (123456, 'Fakey','Fakerson', 'fakey@noweb.com')");

    fclose($fh);
}
?> 
```

我可以转到 myFile.txt，如果我对数据库进行选择查询，它也会显示“Database yo”，我可以看到“Fakey Fakerson”等。如果我能弄清楚如何获取我从 Facebook API 获取的数据。我在我的 HTML 顶部调用那个 php 文件，在 <head>

```
<script language="JavaScript" type="text/javascript" src="address/dbconnect.php"></script> 
```

据我所知.. 进行了大量搜索（可能是错误的查询），但我不知道如何将页面中的数据传递到该脚本中。我也在考虑通过 POST 传递数据，但不太明白。如果有办法做到这一点，要么建立我迄今为止的（可能是错误的）方式，要么采用全新的方式......我很想听听。就像我说的那样，我一直在谷歌搜索到处寻找答案..但似乎无法得到任何进展。

# spring - 如何使本地主机应用程序按原样发布到 CloudFoundry：在 CF 上获取资源不可用

> ID：11025631
> 
> 赞同：0
> 
> 时间：2012-06-14T01:42:07.443
> 
> 标签：spring, cloud-foundry

我有一个要在 CloudFoundry 上运行的基本 Spring Web 应用程序（Spring MVC 项目）。我采用了默认的 HelloWorld 项目并将其添加到其中。我已经安装了 CloudFoundry STS 扩展，创建了一个服务器，将我的应用程序发布到 CF 站点。“主页”页面同时显示在我的本地主机服务器和 CF 服务器上。都好。但是，当我单击唯一的链接将我带回 HomeController 到不同的方法/视图时，我在 CF 服务器上收到“资源不可用”错误，尽管它在我的 localhost（本地 PC）服务器上运行良好。

在我的本地 PC 上：

1.  网址是：（`http://localhost:8080/myapp` 正确）
2.  初始页面 (home.jsp) 显示一个链接：（`<a href="/myapp/property">Property</a>`正确）
3.  将鼠标悬停在链接上会在状态栏中显示：（ `http://localhost:8080/myapp/property` 正确）
4.  单击会将我带到映射到的方法`/property`并显示属性页 ( `property.jsp`)。（正确的）

在 CloudFoundry 上：

1.  网址是：（`http://myapp.cloudfoundry.com/`正确）
2.  初始页面 ( `home.jsp`) 显示与我的本地 PC 上的相同。（正确的）
3.  将鼠标悬停在链接上会在状态栏中显示：（`http://myapp.cloudfoundry.com/myapp/property`我认为是正确的）。
4.  单击获取 ' `esource not available`。
5.  当我进入位置窗口并`myapp`从 url 中删除时，它可以工作。

下面是全部代码，不过我想这只是我自己对本地PC和CloudFoundry这两个环境的一些误解。希望有人可以教育我了解我在这里不知道的内容，以使应用程序在本地和 CloudFoundry 两种环境中都能正常工作。

这是 home.jsp 的 HTML，初始页面

```
<html>
    <head></head>
    <body>
        <a href="/myspp/property">Property</a>
    </body>
</html> 
```

HomeController 是：

```
package com.myapp.app;
import java.util.Locale;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import com.myapp.services.PropertyServicesImpl;

/**
* Handles requests for the application home page.
*/
@Controller
public class HomeController {
    private static final String VIEW_HOME = "home";
    private static final String VIEW_PROPERTY = "property";
    private static final String ACQUISITIONS = "acquisitions";
    @Autowired private PropertyServicesImpl propertyServices;   

    /**
* Shows home view
    */
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public ModelAndView home(Locale locale, Model model) {
        return new ModelAndView(VIEW_HOME);
    }

    /**
    * Shows Property.jsp with jQuery tabs.
    */
    @RequestMapping(value = "/property", method = RequestMethod.GET)
        public ModelAndView property(Locale locale, Model model) {
            return new ModelAndView(VIEW_PROPERTY);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:22:42.290

而不是在您的视图中放置一个固定值，最好获取请求的上下文路径，然后将其添加到您视图中的路径中。

将以下导入添加到您的 Home 控制器中；

```
import javax.servlet.http.HttpServletRequest;
import org.springframework.web.context.request.ServletRequestAttributes;
import org.springframework.web.context.request.RequestContextHolder; 
```

然后在 RequestMapping 方法中获取当前请求对象并创建一个 UrlPathHelper 实例并获取请求上下文的基本路径；

```
HttpServletRequest request = ((ServletRequestAttributes)RequestContextHolder.getRequestAttributes()).getRequest();
UrlPathHelper helper = new UrlPathHelper();

String baseURL = helper.getContextPath(request); 
```

因此，当从本地 vFabric 运行时，baseURL 将为“/myapp”，而当从 Cloud Foundry 实例运行时，它将为“”

剩下的就是将它添加到模型中并在视图中使用它；

```
model.addAttribute("relPath", baseURL); 
```

我用 STS 中的 Spring MVC 模板项目对此进行了测试，它工作得很好，我的 HomeController 看起来像这样；

```
package com.vmware.mvctest;

import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import javax.servlet.http.HttpServletRequest;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.util.UrlPathHelper;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.ServletRequestAttributes;

import com.sun.tools.internal.ws.processor.model.Request;

/**
 * Handles requests for the application home page.
 */
@Controller
public class HomeController {

    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /**
     * Simply selects the home view to render by returning its name.
     */
    @RequestMapping(value = "/home", method = RequestMethod.GET)
    public String home(Locale locale, Model model) {
        logger.info("Welcome home! the client locale is "+ locale.toString());
        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();
        UrlPathHelper helper = new UrlPathHelper();

        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

        String formattedDate = dateFormat.format(date);
        String baseURL = helper.getContextPath(request);

        model.addAttribute("serverTime", formattedDate );
        model.addAttribute("relPath", baseURL);

        return "home";
    }

} 
```

我的观点是这样的；

```
<%@ page session="false" %>
<html>
<head>
    <title>Home</title>
</head>
<body>
<h1>
    Hello world! (${relPath}) 
</h1>
<a href="${relPath}/home">home</a>
<P>  The time on the server is ${serverTime}. </P>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:27:17.030

CF 中的上下文路径是 {app.name}.cloudfoundry.com 而不是 {app.name}.cloudfoundry.com/{app.name}

在您的 jsp 中替换`<a href="/myapp/property">Property</a>` 为`<a href="/property">Property</a>`.

# c# - C# - SMTP - GoDaddy - 发送电子邮件

> ID：11025633
> 
> 赞同：1
> 
> 时间：2012-06-14T01:42:17.850
> 
> 标签：c#, email, smtp

我究竟做错了什么？我正在尝试使用带有 GoDaddy 虚拟主机的 c# 发送电子邮件。

```
SmtpClient client = new SmtpClient("relay-hosting.secureserver.net", 465);
client.EnableSsl = true;
client.UseDefaultCredentials = false;
client.Credentials = new NetworkCredential("emailGODADDY", "password");

MailMessage message = new MailMessage("emailGODADDY", "otherEmail");
message.Subject = txtSubject.Text;
message.Body = txtContent.Value;

client.Send(message); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T20:35:18.517

使用 Go Daddy 的共享主机帐户，您需要在端口 25 而不是端口 465 上发送电子邮件。此外，当您从主机帐户发送电子邮件时，relay-hosting.secureserver.net 不需要您使用用户名和密码进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:54:49.030

每个 smtp 服务器都有自己的凭据，与其他的不同。

> 根据 microsoft client.UseDefaultCredentials 不应尽可能使用。

您可以尝试省略这行代码......

```
client.UseDefaultCredentials = false; 
```

如果这不起作用，请尝试

```
client.EnableSsl = false; 
```

因为有些服务器不使用安全连接。

您也可以使用此代码进行检查

```
client.DeliveryMethod = SmtpDeliveryMethod.Network; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-04T07:21:49.647

只需在下面注释掉它就可以正常工作

```
//client.EnableSsl = false; 
```

也使用端口 25。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-13T03:56:51.227

好的！我已经想通了。

哇，我花了很多时间来尝试启动并运行它。我有带有 Plesk（共享）的经济型 Windows 主机，只有一个 Office365 电子邮件帐户。我了解到您无法创建连接到 smtp.office365.com 的 SMTP 客户端的艰难方法，因为此共享主机包的端口 587 被阻止。TXT 记录、SPF 记录也无济于事。浪费了很多时间。

但是，唉，这正是对我有用的方法。我在 web.config 中添加了以下内容，但我认为您可以将相同的信息构建到您的 SMTP 客户端对象中。不过，这工作正常。任何。

```
<system.net>
  <mailSettings>
    <smtp from="noreply@MyDomain.com">        
      <network host="relay-hosting.secureserver.net" port="25" />        
    </smtp>
  </mailSettings>
</system.net> 
```

在后面的代码中，我确保 MailMessage 中使用的 FROM 地址与 web.config 中的 FROM 值完全匹配。这真的重要吗？不确定，但它们匹配，并且有效。任何。

FROM 地址 (noreply@) 不作为电子邮件存在，也不是别名等。它只是来自托管网站的同一个域。

我的 TO 地址是从 web.config (AppSettings["SendTo"]) 中检索的。这是我在此域中的真实电子邮件地址（我的 Office365 电子邮件地址）。我不确定您是否可以向域外的内容发送电子邮件，因为我没有测试过。

...显然MailMessage（msg）不完整...

```
msg.To.Add(new MailAddress(ConfigurationManager.AppSettings["SendTo"].ToString()));
msg.From = new MailAddress("noreply@MyDomain.com");

var smtp = new SmtpClient 
{       
 // nothing is needed here  
};
smtp.Send(msg); 
```

创建您的客户并发送消息！

耶！我不得不将 noreply@ 电子邮件列为非垃圾邮件，但现在它已按预期到达。请记住，您每天只有有限数量的中继电子邮件，因此请明智地使用它们！希望这可以帮助！

# c# - C#编译器找不到接口扩展方法？

> ID：11025642
> 
> 赞同：4
> 
> 时间：2012-06-14T01:44:08.507
> 
> 标签：c#

我有一个界面：

```
public interface: IA { ... } 
```

我试着把它扩展到

```
class public A : IA {
    private static void foo(this IA a) {
        a.foo();
    }
} 
```

但编译器说，它找不到 foo()，第一个参数类型为 IA。我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T01:46:26.680

您是否也将扩展类标记为静态？即具有扩展方法的类必须标记为静态并且扩展方法本身也必须是静态的。

```
 public static class AExtensions : IA 
 {
     public static void foo(this IA a) { a.foo(); } 
 } 
```

# macos - 标记或标记非结构化数据

> ID：11025643
> 
> 赞同：0
> 
> 时间：2012-06-14T01:44:09.830
> 
> 标签：macos, extraction, text-extraction

我不完全确定如何称呼它，但我已经搜索了几个短语并没有找到我需要的东西。

我有很多非结构化数据需要进入数据库。我以前用 Needlebase 做繁重的工作，然后从那里清理数据。但现在它已经不复存在了，我想要一种快速抓取文本片段的好方法，而不是选择、复制、粘贴、起泡、冲洗、重复。

理想情况下，我可以选择一些文本并且弹出窗口询问它是什么（来自用户定义的列表、标题、开始时间、图像路径等），然后将其标记为这样。自然，我需要能够标记记录的开头和结尾（所有行数据都是连续的，只是不是一种易于解析的格式）。

我可能会在几个小时内写出一些可以做到这一点的东西，但如果有东西存在，我不想重新发明轮子。我在 OS X 上，但我会对任何平台的软件感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T13:03:36.557

您的数据是 HTML 格式的吗？如果是，您可以使用 Jsoup

# batch-file - .bat 文件以在 Console2 中打开可执行文件

> ID：11025645
> 
> 赞同：14
> 
> 时间：2012-06-14T01:44:26.337
> 
> 标签：batch-file, console2

我的目标是创建一个 .bat 启动器，它将在[Console2](http://sourceforge.net/projects/console/)中执行命令行 .exe 程序。
我最好的猜测是它应该是这样的：

```
@echo off
start "" Console.exe program.exe 
```

但它所做的一切都打开了 Console2。
请注意，所有 .bat 和可执行文件都在同一个文件夹中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T01:56:46.353

好的，我查看了 Console.exe 的源代码并深入了解了已编译的帮助。

你需要一个 -r

所以：`Console.exe -r program.exe`

```
Command line parameters

Console supports these command line parameters: 

-c <configuration file>
     Specifies a configuration file. 

-w <main window title>
     Sets main window title. This option will override all other main window title settings (e.g. 'use tab titles' setting) 

-t <tab name>
     Specifies a startup tab. Tab must be defined in Console settings.

-d <directory>
     Specifies a startup directory. If you want to parametrize startup dirs, you need to specify startup directory parameter as "%1"\ (backslash is outside of the double quotes) 

-r <command>
     Specifies a startup shell command. 

-ts <sleep time in ms>
     Specifies sleep time between starting next tab if multiple -t's are specified. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-14T01:54:22.917

我从没听说过这个程序，但是它的[源代码](http://console.git.sourceforge.net/git/gitweb.cgi?p=console/console;a=blob;f=Console/Console.cpp;h=fbfdb75100561ace0e7e51b091d81b3908ccd927;hb=HEAD)

```
 else if (wstring(argv[i]) == wstring(L"-r"))
             {
                     // startup cmd
                     ++i;
                     if (i == argc) break;
                     startupCmds.push_back(argv[i]);
             } 
```

看起来您可能想尝试：

```
Console.exe -r program.exe 
```

# ios - iOS客户端，C ++中的服务器？

> ID：11025647
> 
> 赞同：0
> 
> 时间：2012-06-14T01:44:30.140
> 
> 标签：ios, sockets, client

我是网络编程的新手。这可能是一个愚蠢的问题，我的服务器可以在 C++ 中用于我的 iOS 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:50:54.957

iOS 不关心你的服务器是用什么编程的。你可以使用任何你觉得舒服的东西。请记住，您不会向服务器发送可执行代码——您只是发送请求，服务器将发送响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:50:43.023

是的，只要您在 iPhone 应用程序（客户端）和服务器之间定义正确的协议（通信方法），您的服务器可以以*任何您想要的方式编写。*

XML、JSON、HTTP POST 或 GET，等等。如果您正确编码双方，它应该一切正常。

# javascript - TableSorter 解析器中的正则表达式删除相同正则表达式在单独的控制台函数中正常工作的索引

> ID：11025648
> 
> 赞同：2
> 
> 时间：2012-06-14T01:44:32.953
> 
> 标签：javascript, jquery, regex, tablesorter

使用 Jquery TableSorter，我正在创建一个自定义解析器来对`<td>`包含“'#' year(s) * '#' month(s)”的经过时间进行排序。当我使用该功能时

```
 $('.techtable td:nth-child(6)').each(function(){
                // console.log($(this));
                var that = $(this).text();
                var myRegexp = /([\d]+) ([\w]+)(?: ([\d]+) ([\w]+))?/;
                var match = myRegexp.exec($(this).text());
                console.log(match);
            }); 
```

在命令行中，每个索引都包含一个长度为 5 的数组，如下所示：

`["7 months", "7", "months", undefined, undefined]`

对此：

`["3 years 3 months", "3", "years", "3", "months"]`

取决于经过的时间是否只有一个月或一年的元素，然后是另一个。解析文本，我用正则表达式收集每个元素，然后用JS测试是否有多个元素，如果只有1个元素，那么它是以“y”还是“m”开头，并返回数字月数，因此解析器可以`<td>`按整数形式的月数对 s 进行排序。

解析器将每个元素作为参数“s”传递给函数。当我直接在“s”上尝试正则表达式时，它不会返回长度为 5 的数组，而是将其截断为 3（如果索引 3 是 typeof 'undefined'，我是否正在运行截断它的行）。当我使用控制台直接使用此功能时：

```
 $('.techtable td:nth-child(6)').each(function(){
                // console.log($(this));
                var that = $(this).text();
                var myRegexp = /([\d]+) ([\w]+)(?: ([\d]+) ([\w]+))?/;
                var match = myRegexp.exec($(this).text());
                if (typeof match[3] == 'undefined') {match.length = 3;};
                console.log(match);
            }); 
```

正则表达式正确返回数组，如果数组只有 1 个元素（年或月），则将其截断。这是自定义解析器的代码：

```
 var myRegexp = /([\d]+) ([\w]+)(?: ([\d]+) ([\w]+))?/;
            var match = myRegexp.exec(s);
            var order = [];
            console.log(match);
            if (typeof match[3] == 'undefined') {match.length = 3;};
            // 1 element case:
                // month
                if (match.length = 3) {
                    if (match[2][0] == "m") {
                        order.push(match[1]);
                    }
                // year
                    if (match[2][0] == "y") {
                        order.push(match[1]*12);
                    }
            // both elements
                } else {
                    order.push(match[1]*12 + match[3]);
                }
            s = order;
            return s;
        }, 
```

小提琴就[在这里](http://jsfiddle.net/chrisfrisina/8mqTs/)。Elapsed 解析器是 JS 面板底部的第二个。如您所见，由于我无法从数组中获取月份（索引 4 和 5），因此无法计算月份，因此排序仅包含年份，并且月份按其原始 HTML 位置排序。我错过了什么？（我正在学习......所以方向比修复更受赞赏，但我不会拒绝它。）

是的，我意识到 JS 小提琴已加载（第一部分是 TableSorter，以维护验证功能（单击标题进行排序），但您需要关注的是代码的最后一部分（参考 '//Table Sorter dateSorter ' 看看正确的解析器应该是什么样子。'//Table Sorter elapsedSorter'部分是我两次尝试的地方，第一部分是我在控制台中使用的工作代码，第二部分是解析器，即以某种方式删除数组中的最后两个索引，从而丢失要计算的月份信息。

猜猜我必须添加正则表达式，并且个人评分为 1，因为我已经浪费了几乎一整天的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:02:38.167

```
if (match.length = 3) { 
```

你是说这个吗？

```
if (match.length == 3) { 
```

为了进一步帮助您，当您使用一个常量和一个变量编写条件时，您可以这样编写它们：

```
if (3 = match.length) { 
```

这现在会导致 JavaScript 错误，而不是默默地变成一个总是产生 true 的赋值。

* * *

在 JavaScript 中，`12 + '4' == '124'`，所以你必须小心数字和`+`运算符。在 PHP 等语言中，您没有这个问题，因为它们有一个用于字符串连接的运算符 ;-)

```
var myRegexp = /([\d]+) ([\w]+)(?: ([\d]+) ([\w]+))?/;
var match = myRegexp.exec(s);
var order = [];

if (typeof match[3] == 'undefined') {
    if (match[2][0] == "m") {
        order.push(parseInt(match[1]));
    }
    // year
    if (match[2][0] == "y") {
        order.push(parseInt(match[1])*12);
    }
    // both elements
} else {
    order.push(parseInt(match[1])*12 + parseInt(match[3]));
}
s = order;
return s; 
```

* * *

**顺便说一句**`parseInt(x, 10)`，如果您希望字段具有前导零（否则会导致`0`返回），请使用。谢谢[软糖](https://stackoverflow.com/users/145346/fudgey)！

# c# - C# PropertyGrid 帮助区域在调整大小/绘制时不刷新

> ID：11025650
> 
> 赞同：0
> 
> 时间：2012-06-14T01:45:30.987
> 
> 标签：c#, propertygrid

我有一个问题，当属性网格被调整大小和重新绘制时，属性网格中的帮助区域似乎没有正确调整大小。我看到它保留了创建网格的原始大小，并且该区域的其余部分仍然很脏（在图片中，脏区域来自背景窗口（Bk Win）。

![属性网格](../Images/10d9b40f3d78316411e455c6f60dcb11.png)

知道如何确保帮助区域也正确调整大小，以便正确重新绘制脏区域吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:42:00.317

看起来 DocComment 中的控件不会自动更新（.NET 中的错误？）..但这是一个快速的解决方案..

```

private void PropertyGrid_Resize(object sender, EventArgs e)
{
  foreach (Control control in (sender as PropertyGrid).Controls)
    if (control.GetType().Name == "DocComment")
    {
      FieldInfo fieldInfo = control.GetType().BaseType.GetField("userSized",
        BindingFlags.Instance |
        BindingFlags.NonPublic);
      fieldInfo.SetValue(control, true);
      control.Width = (sender as PropertyGrid).Width;
      foreach (Control ctrl in control.Controls)
      {
          ctrl.Width = control.Width;
      }
      return;
    }            
}

```

# html - 单击链接时关闭 html5 HTMLNotification

> ID：11025651
> 
> 赞同：1
> 
> 时间：2012-06-14T01:45:36.243
> 
> 标签：html, webkit, google-chrome-extension, notifications

我正在使用`createHTMLNotification`chrome 扩展。通知的 html 中包含一个链接。我想弄清楚的是如何在单击链接时关闭通知。我的代码如下

```
var notification = window.webkitNotifications.createHTMLNotification(
    "notification.html"
);
notification.show(); 
```

notification.html 页面上的代码填充数据。此页面包含 jquery 库。当我尝试这样做时：

```
$('#title > a').click(function() {
    notification.cancel();
} 
```

这当然不起作用，因为此 html 页面上的通知是未知的。我也尝试`notification.onshow`在我创建通知的代码的第一部分执行一个，但这也没有产生任何结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T02:04:09.213

好吧，我想通了。这实际上是一个非常简单的修复。您所要做的就是在通知中 href 的 click 事件中添加`window.close()`. 这是因为根据[W3C 规范](http://dev.w3.org/2006/webapi/WebNotifications/publish/WebNotifications.html)，它是一个单独的窗口，因此您可以这样对待它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T02:14:19.520

您可以尝试以下将焦点设置为新打开的选项卡并在途中关闭通知 `notification.onclick = function(x) { window.focus(); this.cancel(); };`

`notification.show();`

# php - 如何通过ajax将大量javascript对象存储在数据库中

> ID：11025659
> 
> 赞同：2
> 
> 时间：2012-06-14T01:46:31.047
> 
> 标签：php, javascript, jquery, ajax

我是前端开发人员。我构建了一个非常 ajaxy 感觉的 jquery web 应用程序，可以用来记录各种统计数据。它基本上只是获取用户输入，进行一些非常简单的计算，然后将它们写入 dom（通过 jquery 的 .html ）。

我希望能够保存用户所做的更改。目前，如果页面被刷新，dom 会回到原来的状态，输入和计算的信息就消失了。

所以我需要通过对服务器的 ajax 调用来存储这些信息（基本上是 playerOne.points = 12、playerOne.steals = 2 等类型的 javascript 对象）。我根本不了解后端开发。

我认为使用 PHP 和 MySQL 将是最简单的解决方案。这将如何构建。来回传递该信息的最佳方式是什么，以及它是如何存储的。

您可以将 dom 本身或它的一部分传递给 db 并存储它吗？如果需要，然后将其取回？这可能还是很奇怪？

非常感谢任何指向良好方向的指针。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:50:09.923

如果唯一重要的是在页面刷新之间保存数据，那么仅使用 cookie 并将所有数据存储在本地不是更容易吗？这为您省去了拥有用户帐户和身份验证以及数据库的麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T02:01:32.467

如果您的服务器设置支持，您绝对应该考虑[使用 MongoDB 。](http://www.mongodb.org/)它是一个基于 JSON 的数据库，非常适合存储 JSON 对象，对吧？

# iphone - 在核心图形中发布问题

> ID：11025664
> 
> 赞同：4
> 
> 时间：2012-06-14T01:47:48.547
> 
> 标签：iphone, objective-c, ios, core-graphics, drawrect

我刚刚开始发布核心图形，所以我可能需要一点帮助。

我有如下代码：

```
UIImage *buttonImage() {

UIGraphicsBeginImageContextWithOptions(bounds.size, NO, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();

    CGMutablePathRef outerPath;
    CGMutablePathRef midPath;
    CGMutablePathRef innerPath;
    CGMutablePathRef highlightPath;

//Some button stuff

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    CGContextRelease(context);

    return image;

} 
```

那条发布线，我已经输入了。不过，我遇到了一个错误：

```
context_reclaim: invalid context
context_finalize: invalid context 
```

关于在这种情况下我应该将版本放在哪里的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T02:35:52.243

`CGContextRelease(context)`如果您以前做过 a`CFRetain(context)`或 a `CGContextRetain(context)`，或者您自己创建了上下文，您只需要这样做。在您的示例中，您正在调用`UIGraphicsBeginImageContextWithOptions()`，它正在为您处理上下文的创建，因此，调用`CGContextRelease()`自己是过度释放它。

您确实需要平衡以下`CGColorSpaceCreateDeviceRGB()`任一：

```
CGColorSpaceRelease(baseSpace) 
```

或：

```
if (baseSpace) CFRelease(baseSpace) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T02:36:01.060

使用时您不拥有上下文`UIGraphicsGetCurrentContext`。因此，您不应该释放它。如果你要使用，`CGContextRetain()`那么你会释放。更多信息可在此处获得：

[Core Foundation 内存管理指南](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/writerid/cfGetRule)

我强烈建议阅读`Memory Management`编程指南以了解其工作原理。

# c# - 当子控件 ManipulationMode 设置为“无”以外时，父控件将失去操作功能

> ID：11025665
> 
> 赞同：2
> 
> 时间：2012-06-14T01:48:06.800
> 
> 标签：c#, windows-runtime

基本上，我有一个里面有一个`SemanticZoom`控件，里面有一个自定义控件，但是为了简单起见，我们假设它是一个简单的 red 。问题是我试图在缩放（设置为）时处理边框的操作，以便我可以知道用户何时进行捏合手势和“放大”到边框（实际上是另一个页面），但是通过处理操作，我失去了（1）使用 SemanticZoom 和（2）滚动网格的能力。`GridView``GridView``Border``ManipulationMode``Scale`

如果您使用过 Windows 8 照片应用程序，您会注意到它们以某种方式实现了此功能。如果您捏入图像，页面将进入 SemanticZoom，但如果您张开，它将进入全屏模式。我想要类似的功能，但我不知道如何实现它。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:13:08.317

我将使用 2 个 SemanticZoom 控件来实现 Photo App Effect。

# ios - 在弹出框内滚动 tableview 会创建一个工件

> ID：11025666
> 
> 赞同：2
> 
> 时间：2012-06-14T01:48:31.640
> 
> 标签：ios, uinavigationcontroller, uipopovercontroller, popover

如果您查看标题为“地址”的按钮/标签，您会注意到角落里有一点白色。只有当用户开始滚动位于搜索栏下方的 tableView 时，才会出现这种白色斑点。

我只能猜测模态边框在滚动时会杀死所有透明胶片。

![在此处输入图像描述](../Images/6ae31ee535b5b5b6fb786c394c1ced44.png) ![在此处输入图像描述](../Images/acbe6da65c00900a981ca396ada3d39f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:01:09.667

这是一个关于滚动视图的 iOS 问题，在很多地方都可以看到 - 除了减少或为 tableview 创建一些偏移量之外，没有其他解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:01:42.857

该伪影可能是由多种不同的事物引起的。当看到这些东西时，我首先要检查的是所有与该区域重叠的 UIView（以及子视图）

A. 具有 alpha 值为 0 的背景颜色

B. 在 Interface Builder 中关闭“Cear Graphics Context”（或代码中的相应标志）

# android - 监视文件夹时如何获取文件操作员？

> ID：11025669
> 
> 赞同：0
> 
> 时间：2012-06-14T01:48:43.777
> 
> 标签：android, filesystems, android-ndk

我正在尝试使用 FileObserver 来监控一个文件夹，我需要找到修改文件的操作员。但是在捕获 FileObserver 事件时，我只能通过 onEvent() 方法获取事件和文件路径。

我该怎么做才能让操作员实时？

# c# - LINQ 查询获取运行时错误

> ID：11025673
> 
> 赞同：0
> 
> 时间：2012-06-14T01:49:28.893
> 
> 标签：c#, linq, entity-framework, .net-4.0

我有这个 linq 查询并且正在使用 EF edmx。

```
 forms = (from f in db.Forms
                 join ffl in db.FormFirstLetters on f.FormID equals ffl.FormID
                 where f.IsActive
                 where criteria.CategoryNames == null || criteria.CategoryNames.Contains(f.Category)
                 where startsWith == null || startsWith.Contains(ffl.FirstLetter)
                 orderby f.FormName
                 select new FormSummary
                 {
                     FormID = f.FormID,
                     Category = f.Category,
                     FormName = f.FormName,
                     AcceptSubmissions = f.AcceptSubmissions,
                     TodaysEntries = f.FormSubmissions.Count(tbl => tbl.SubmissionDate >= todaysDate),
                     TotalEntries = f.FormSubmissions.Count(),
                     LatestEntry = f.FormSubmissions.OrderByDescending(x => x.SubmissionDate).Select(x => x.SubmissionDate).FirstOrDefault()
                 }).ToArray(); 
```

我收到此错误

> 无法创建类型为“System.Collections.Generic.IEnumerable`1”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

我认为 using`Contains`是可以接受的，并且之前在这些类型的 linq 查询中使用过很多次，但由于某种原因它不起作用。`criteria.CategoryNames`and `startsWith`are`IEnumerable<string>`和要搜索的字段都是字符串。为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:48:39.270

在其中一个列表中有一个值为空字符串的值。显然 EF 不知道如何将其转换为 sql？哇。

# drupal - 使用 syslog 和 nginx / php-fpm

> ID：11025677
> 
> 赞同：2
> 
> 时间：2012-06-14T01:49:53.073
> 
> 标签：drupal, ubuntu, nginx, syslog, php

我正在考虑迁移基于 Apache 的 Drupal 安装，但需要具有基于 rsyslog 的远程错误日志记录。我们正在使用 Amazon EC2，写入来来去去的实例的 error_log 文件有点像噩梦。特别是，如果应用程序遇到 PHP 错误，我们需要在它们发生时立即查看。

假设我们使用的是 nginx 和 php-fpm，如果我将以下内容放入 fpm 池定义中，它会起作用：

```
error_log = /path/to/logs/error.log 
```

因为如果我在 PHP 中执行此操作，它确实会转到 /path/to/logs/error.log：

```
<?php
  error_log('send this to our log');
?> 
```

但是，如果我将池设置为

```
error_log = syslog 
```

据我所知，输出根本不去任何地方。至少，我还没有弄清楚 Ubuntu 上 rsyslog.conf 的配置，它将接收任何输入。

使用 nginx 和 php-fpm 时获得集中式错误日志记录的最佳方法是什么？我使用的是 Ubuntu 11.10，带有 php5-fpm 和 nginx 的打包版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T11:48:39.710

nginx 在这里无关。我会推荐 Drupal 的 syslog 模块。穿上它，然后一切都进入系统日志，该系统日志将进入看门狗，它也会捕获 PHP 错误。

PHP 也有一个原生的 syslog() 函数。

如果您使用的是 syslog-ng，我认为您可以将正常的 php 日志路由到 syslog，但我从未听说过能够执行 error_log = syslog。

# authentication - WebMatrix 显示认证用户信息

> ID：11025679
> 
> 赞同：1
> 
> 时间：2012-06-14T01:49:56.177
> 
> 标签：authentication, webmatrix

我想显示经过身份验证的用户的名字和姓氏。我知道“WebSecurity”类的“CurrentUserName”属性将检索当前经过身份验证的用户，但是如何检索其名字和姓氏？

我尝试查询用户表，但我总是收到一条关于 SQL 查询行的错误消息（开始 var UserData ...）：',' 附近的语法不正确

在代码部分：

```
@{

// Initialize general page variables
var authenticatedUser = "";
var authenticatedUserFirstName = "";
var authenticatedUserLastName = "";

if (WebSecurity.IsAuthenticated) {
    authenticatedUser = WebSecurity.CurrentUserName;
    var db = Database.Open("MyDatabase");
    var UserData = db.QuerySingle("SELECT (FirstName, LastName) FROM Users WHERE LOWER(Email) = LOWER(@0)", authenticatedUser);
    authenticatedUserFirstName = UserData.FirstName;
    authenticatedUserLastName = UserData.LastName;
    }
} 
```

在标记部分：

```
@if (WebSecurity.IsAuthenticated) {
                            <p>
                                Hello, <a class="username" href="~/Account/ChangePassword" title="Change password">@authenticatedUserFirstName @authenticatedUserLastName</a>!
                                <a href="~/Account/Logout">Logout</a>
                            </p> 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:07:52.590

删除 SQL 中 FirstName、LastName 字段周围的括号：

```
"SELECT FirstName, LastName FROM Users WHERE LOWER(Email) = LOWER(@0)" 
```

# assembly - 为 ARM 优化组装

> ID：11025686
> 
> 赞同：2
> 
> 时间：2012-06-14T01:51:19.340
> 
> 标签：assembly, arm

我正在尝试编写一个 asm 函数，它将 16 个样本生成到一个缓冲区中，该缓冲区从编解码器以 48k 输出。每个样本将 16 个正弦波加在一起，每个正弦波或部分正弦波都有一个 ADSR 包络，带有额外的延迟阶段（等待）来控制幅度。换句话说，它的加法合成。无论如何，我很生气，因为 CooCox 中的编译器实际上可以比我在 ASM 中的所有汗水更快地做到这一点。我能做些什么来优化它并让它更快？涉及到很多控制参数，这会导致全局数组变量的大量负载，从而减慢速度。这是针对STM32F4 BTW的。

```
 @ ARM function definition
    @ void get_sine(void)
        .align 2                    @ Align to word boundary
        .global get_sine       @ This makes it a real symbol
        .syntax unified @ Remember this!
        .type get_sine STT_FUNC    @ Declare to be a function.
        .equ bufsize, 1024
        .equ partials, 16
        .equ MAX_EG, 524288
        .data
    count16: .word 0x0

get_sine:                  @ Start of function definition
        push    {r4-r12}
        ldr     r2,=sineLUT     @   sine_tab base addy
        ldr     r9,=atk
        ldr     r10,=dcy
        ldr     r11,=sus
        ldr     r12,=rel
        ldr     r6,=env_1
        ldr     r1,=count16
        mov     r0,#0
        str     r0,[r1,#0]
outloop:
        ldr     r7,=ph_inc      @   pitch val into r7
        ldr     r7,[r7,#0]      @   get current phase
        ldr     r3,=phase       @   phase address to r3
        ldr     r1,[r3,#0]      @   get current phase
        add     r1,r1,r7        @   add current phase and ph_inc
        str     r1,[r3,#0]      @   store phase
        mov     r7,#0           @   set to 1 for r7 to be inner loop counter
        mov     r5,#0           @   clear sum reg
        ldr     r8,=flag
        ldr     r3,=EG_stage

innerloop:
        ldr     r0,[r3,r7,lsl #2]   @get EG_stage r0
        cmp     r0,#0               @ if zero goto wait
        beq     waitj
        cmp     r0,#1               @ if 1 jump attack
        beq     attackj
        cmp     r0,#2               @ if 2 jump decay
        beq     decayj
        b       releasej                @ if 3 jump release

waitj:
        ldr     r1,=wait_temp       @get wait_temp array addr
        ldr     r0,[r1,r7,lsl #2]   @load value to r0
        sub     r0,r0,#1            @subtract
        mov     r4,#1               @ load one for next
        cmp     r0,#0               @compare if gt or equal to zero
        ite     ge
        strge   r0,[r1,r7,lsl #2]   @ store wait state if >= 0
        strlt   r4,[r3,r7,lsl #2]   @ store EG_stage value if less than
        b break

attackj:
        ldr     r0,[r6,r7,lsl #2]   @ get env1 value into r0
        ldr     r1,[r9,r7,lsl #2]   @ get attack value
        add     r0,r0,r1            @   env_1[par] += atk[par];
        mov     r4,#2
        mov     r1,MAX_EG
        cmp     r0,r1
        itte    GE                  @   if (env_1[par] >= MAX)
        strge   r4,[r3,r7,lsl #2]   @   EG_stage[par] = 2, env_1[par] = MAX;
        strge   r1,[r6,r7,lsl #2]
        strlt   r0,[r6,r7,lsl #2]
        b break

decayj:
        ldr     r0,[r6,r7,lsl #2]   @ get env1 value into r0
        ldr     r1,[r10,r7,lsl #2]  @ decay value
        sub     r0,r0,r1            @   env_1[par] -= dcy[par];
        str     r0,[r6,r7,lsl #2]   @ update env_1 now in case
        ldr     r4,[r11,r7,lsl #2]  @   get sus value
        add     r1,r4,r1            @ add decay and sus value for compare
        cmp     r0,r1               @ if < sus[par]+dcy[par] || env_1[par]<0)
        ittt    lt
        movlt   r0,r4               @env_1[par] = (sus[par]);
        strlt   r4,[r6,r7,lsl #2]   @ store to env_1
        blt     break
        cmp     r0,#0
        itt     lt                  @|| env_1[par]<0)
        movlt   r0,r4               @env_1[par] = (sus[par]);
        strlt   r4,[r6,r7,lsl #2]   @ store to env_1
        b break

releasej:
        ldr     r0,[r6,r7,lsl #2]   @ get env1 value into r0
        ldr     r1,[r12,r7,lsl #2]  @ release value
        sub     r0,r0,r1            @ env_1[par] -= rel[par];
        str     r0,[r6,r7,lsl #2]   @ update env_1 now in case
        mov     r1,#0
        cmp     r0,#0               @
        it      lt                  @ if (env_1[par]<0)
        strlt   r1,[r6,r7,lsl #2]   @ env_1[par] = 0;

break:
        mov     r4,#0
        add     r4,r7,#1
        ldr     r1,=phase           @ phase address to r3
        ldr     r1,[r1,#0]
        umull   r0,r4,r1,r4         @ multiply phase for each partial
        lsr     r0,r0,#18           @ shift it right by 18 into r0 for sine_tab lookup
        ldr     r0,[r2,r0,lsl #2]   @ lookup sine val with r0 into r1 and sign extend
        ldr     r4,[r6,r7,lsl #2]   @ get envelope value into r4
        lsr     r4,r4,#4            @ shift it to 16bit range   
        smulbb  r0,r0,r4            @ signed multiply of sine table * envelope for scaling
        asr     r0,r0,#15           @ asr shift back to 16bit
        ldr     r4,[r8,r7,lsl #2]   @ get flag if withing bandwidth
        cmp     r4,#0               
        it      ne                  @ if 1 add it to sum
        addne   r5,r5,r0            
        add     r7,r7,#1
        cmp     r7,#16              @ compare loop index with 16 (i=0;i<16;i++)
        bne     innerloop

        asr     r0,r5,#5
        pkhbt   r0,r0,r0,lsl #16    @   pack R+L channel in r0
        ldr     r5,=writePos    @   get writepos addr
        ldr     r1,[r5,#0]      @   get writePos
        lsl     r3,r1,#2        @   align address 4
        ldr     r4,=WaveBuffer  @   storage array addy
        str     r0,[r4,r3]      @   store sine to WaveBuffer
        add     r1,r1,#1        @   increment array pointer writepos
        mov     r3,bufsize      @   load BUFFERSIZE compare
        cmp     r1,r3           @   skip if less than BUFFERSIZE
        it      hs
        movhs   r1,#0           @   clr writepos if >=BUFFERSIZE
        str     r1,[r5,#0]      @   store writepos value

        ldr     r0,=dataSize    @   get datasize counter addr
        ldr     r1,[r0,#0]      @   get val
        add     r1,r1,#1        @   increment datasize counter
        str     r1,[r0,#0]      @   store counter
        ldr     r1,=count16
        ldr     r0,[r1,#0]
        add     r0,r0,#1        @   increment loop counter
        str     r0,[r1,#0]
        cmp     r0,#16      @   compare with 16 (i=0;i<16;i++)
        bne     outloop
        pop     {r4-r12}
        bx      lr

    .section .rodata
        sineLUT:
        @ Array goes in here. Type can be .byte, .hword or .word
        @ NOTE! No comma at the end of a line! This is important

    .word   0x0000,0x000c,0x0018,0x0024,0x0030,0x003c,0x0048,0x0054
    .word   0x0064,0x0070,0x007c,0x0088,0x0094,0x00a0,0x00ac,0x00bc
    .word   0x00c8,0x00d4,0x00e0,0x00ec,0x00f8,0x0104,0x0114,0x0120
    .word   0x012c,0x0138,0x0144,0x0150,0x015c,0x016c,0x0178,0x0184
    .word   0x0190,0x019c,0x01a8,0x01b4,0x01c4,0x01d0,0x01dc,0x01e8
    .word   0x01f4,0x0200,0x020c,0x021c,0x0228,0x0234,0x0240,0x024c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T02:03:53.977

了解编译器如何做到这一点的最佳方法是在该编译器中编译代码，然后查看它输出的程序集。它可能会令人困惑，因为它已经过优化，但你可能会学到一些技巧。

一个非常不可读但可能有帮助的技巧是实现某种“跳转表”功能。在内部循环中，不是执行 3 个比较语句，而是将 (r0*X) 添加到当前指令指针。在适当的目的地，有一个无条件跳转指令到你需要去的任何地方（攻击、衰减j、释放j）。X 的值将取决于需要多少字节来保存跳转指令。这只是我的一个想法，你需要自己测试它的有效性。

# java - PHP getdate() 转换为 Java 日期

> ID：11025688
> 
> 赞同：0
> 
> 时间：2012-06-14T01:52:17.487
> 
> 标签：java, php, android, date

不久前我遇到了这个奇怪的问题，但还没有找到解决方案。在我的应用程序中，我在服务器上保留了一些有关用户活动的信息。我还使用PHP 的*getdate()函数来记录活动的日期。*当被询问时，我将此信息发送回手机并尝试以更易于阅读的格式表示日期。

例如，

```
//This is the part that runs on the server
$timeOfAct = getdate();
//$timeOfAct = 1339637005\. I guess this is the date in milliseconds
//INSERT $timeOfAct to database 
```

我使用 JSON 将此信息发送回应用程序。

```
//st="1339637005"
SimpleDateFormat ft = new SimpleDateFormat("MM/dd/yyyy");
Date resultdate = new Date(Long.parseLong(st));
st=ft.format(resultdate); 
```

st 总是变成 01/16/1970。

据我了解，JAVA 的日期 0 不等于 PHP 的 0。

那么，您对我实现成功转换有什么建议吗？

更新：我忘了提到我正在使用*getdate()*返回的数组的第 0 个元素，它等于*time()*函数返回的元素

//例如插入 $timeOfAct[0]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:58:01.383

[`getdate()`](http://php.net/manual/en/function.getdate.php)返回与时间戳相关的相关信息数组，而不是您猜到的。

如果你想要时间戳，只需使用[`time()`](http://www.php.net/manual/en/function.time.php).

# tcl - 期望脚本

> ID：11025689
> 
> 赞同：3
> 
> 时间：2012-06-14T01:52:35.430
> 
> 标签：tcl, expect

我正在尝试从日志文件中匹配包含“”的文本。但它不匹配。我理解“ ”对 TCL/Expect 有着特殊的意义。

因此我尝试了以下方法，但没有运气。

```
expect -ex {
            "lp -c -demail -ot\\\"firstname_surname@gmail.com\\\" /usr/local/spool/pf"
            {
               incr logged
               send_user "\r\n LOGGED #4, $logged \r\n"
            }
            timeout 
```

我尝试使用 \、\ 和 \\ 但还没有运气。

任何人都可以帮助，请..

我的日志文件包含以下行，

```
执行 [lp -c -demail -ot"firstname_surname@gmail.com" /usr/local/spool/pf/context/ABC001-1209236.mime]
```

我需要匹配那条线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:31:36.013

使用`{}`引号，类似于 shell 的单引号。Tcl 对换行也很敏感，所以你必须把一个块的左大括号放在前一行

```
expect {
    {lp -c -demail -ot"firstname_surname@gmail.com" /usr/local/spool/pf} {
       incr logged
       send_user "\r\n LOGGED #4, $logged \r\n"
     }
     timeout
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:11:22.327

不过，我不得不使用 *，临时修复。但是，如果有人能告诉我如何匹配文本中的“”，那就太好了。

我的临时解决办法是，

```
expect {
         "lp -c -demail -ot*/usr/local/spool/printform" {     
       }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:46:20.607

如果您要精确匹配某些内容，只需将字符串括在`{`大括号`}`中即可。但是，您的代码也有另一个问题：通过放置`-ex`外部，您告诉`expect`将整个批次（包括您的响应代码！）作为字符串匹配。如果那是你想要的，我会很吃惊的！在块内移动标志（这`expect`仅适用于 Expect 和相关命令）并使用您正在寻找的文字字符串，而不是尝试双重猜测反斜杠的数量。你应该得到这样的东西：

```
expect {
    -ex {exec [lp -c -demail -ot"firstname_surname@gmail.com" /usr/local/spool/pf/context/ABC001-1209236.mime]} {
        incr logged
        send_user "\r\n LOGGED #4, $logged \r\n"
    }
    timeout
} 
```

# c# - 首先拆分然后加入字符串的子集

> ID：11025690
> 
> 赞同：8
> 
> 时间：2012-06-14T01:52:52.453
> 
> 标签：c#, string, join, split

我有一个输入字符串如下：

```
thumb_634735515600845357tchayat_november_200612.jpg 
```

我想要做的是首先将此字符串*拆分*`_`为. 然后在位置 1 到 n 处获取生成的标记并*加入*它们。

具体来说，关于我的示例输入，这是我想要的输出。如您所见，`thumb_`已从字符串的前面删除：

```
634735515600845357tchayat_november_200612.jpg 
```

我知道如何进行拆分。但是，我该如何做接下来的加入步骤呢？我确实意识到我可以使用`for`循环来进行连接。但是有更好的方法吗？我不能使用子字符串方法来执行连接步骤，因为我之前有数据`thumb_`。

最后，请注意后面的`_`字符`thumb`始终是 的第一个实例`_`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T01:58:21.970

由于`_`拇指后始终是第一个实例`Substring`，因此与`IndexOf`.

```
string newString = myString.Substring(myString.IndexOf("_") + 1); 
```

这应该采用从字符的第一个实例之后的`_`字符开始的子字符串。

如果您希望获得 的*第二个*索引`_`，我建议您这样做：

```
int first = myString.IndexOf("_");
int second = mystring.Substring(first).IndexOf("_"); 
```

请参阅[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)对[“字符串第 n 次出现的索引？”问题的](https://stackoverflow.com/q/186653/1497596)[回答](https://stackoverflow.com/a/186667/1497596)。支持这种方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T01:58:36.783

如果您不喜欢 indexOf，但想要加入：

```
String.Join("_",
   "thumb_634735515600845357tchayat_november_200612.jpg"
   .Split('_')
   .Skip(1)
   .ToArray()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T02:01:21.507

拆分和重新排列后，您可以使用 Join 方法。

```
string new_value=String.Join("",your_array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T02:03:28.730

您可以使用`String.Join`，但实际上，它仍然使用内部循环。

```
String.Join("_", "thumb_634735515600845357tchayat_november_200612.jpg".Split('_').Skip(1).ToArray()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-06T07:21:44.833

UserRoles 是字符串列表：

```
string.Join(",", userRoles.ToArray()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-28T19:03:16.657

*原帖发表于 2015 年 8 月 31 日。我唯一改变的是标记语法，因为原帖是错误的。*

使用正则表达式会很有帮助。

```
using System.Text.RegularExpressions;

string itemName = "thumb_634735515600845357tchayat_november_200612.jpg";
itemName = Regex.Match(itemName, @"(?<=(_)).*$").Value; 
```

"(?<=(_))" 看起来在第一个 "_" 后面。将其视为一个起点。".*$" 获取从起点到行尾的所有内容。“$” 标记行尾。

# vb.net - VB.Net 自引用

> ID：11025695
> 
> 赞同：1
> 
> 时间：2012-06-14T01:53:52.823
> 
> 标签：vb.net

对象如何引用自身？

我想创建一个菜单项，单击该菜单项时，它会导航到自己的标题。

下面的代码几乎是完整的，但我就是不知道用什么`foo`.

```
ContextMenu2.MenuItems.Add(Browser.URL.OriginalURL, Browser.Navigate(foo.Text)) 
```

编辑：一些背景。

我正在尝试为我的网络浏览器制作一个收藏夹系统。ContextMenu 链接到一个按钮（单击该按钮时，将显示菜单。）所以我希望新的 MenuItem 在单击时导航到它自己的标题。标题是一个 URL。

```
Private Sub MenuItem6_Click_1(ByVal sender As System.Object, 
                     ByVal e As System.EventArgs) Handles MenuItem6.Click
    ContextMenu2.MenuItems.Add(Browser.DocumentTitle, 
                               Browser.Navigate(foo.Text))
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:55:57.957

在 VB 中引用自己的关键字是 Me。所以`Me.Text`

编辑：虽然上述内容是正确的，但您对迈克尔的评论表明您的意思是在事件的上下文中，特别是事件发送者。在这种情况下，您通常将发送者转换为适当的类型并使用它，或者仅使用您正在处理事件的项目（如果只有一个）。在您的示例中，MenuItem6.Text..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:02:17.847

我更愿意发表评论，但我没有代表:)

您所说的问题对我来说有点模棱两可，并且您提供的代码行无济于事。乍一看，ContextMenu2.MenuItems 似乎是一些 T 的字典，但 OriginalURL 似乎不是一个逻辑键条目。

如果您将“me.Text”作为参数传递给 Browser.Navigate，您将传递在 ContextMenu2 上执行调用的任何类的属性“Text”。我不相信这是你的意图。

你能澄清你的问题吗？对象和方法的一些额外上下文会有所帮助。

# java - runnable.run() 不能抛出异常

> ID：11025699
> 
> 赞同：1
> 
> 时间：2012-06-14T01:54:11.177
> 
> 标签：java, exception, runnable

我`ScheduledExecutorService.scheduleAtFixedRate(taskA....)`用来做一些任务。

当 taskA 抛出未处理的异常时，我希望整个过程失败。但是，`taskA`必须是`runnable`和它的方法，`run()`的签名不会抛出任何检查异常。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:29:30.747

您的问题的解决方案是使用`Callable`自 Java 5.0 起可用的接口

`Callable`像 一样工作`Runnable`，但它允许您返回一个值，以及`Exception`从子线程中抛出一个。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)

# python - 带有 PyGObject 内省 Gtk+ 3 的 GenericTreeModel？

> ID：11025700
> 
> 赞同：3
> 
> 时间：2012-06-14T01:54:20.247
> 
> 标签：python, python-3.x, gtk3, pygobject, treemodel

我正在尝试在 Python3 中基于 GenericTreeModel 编写自己的 Gtk+3-TreeModel，但我出现了这个错误：

> AttributeError：“gi.repository.Gtk”对象没有属性“GenericTreeModel”

GenericTreeModel 是否已重命名？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:18:21.797

PyGObject recently gained GenericTreeModel support through [pygtkcompat](https://git.gnome.org/browse/pygobject/tree/pygtkcompat/generictreemodel.py).

This is new in [3.7.90](http://ftp.gnome.org/pub/GNOME/sources/pygobject/3.7/pygobject-3.7.90.news) with a fix in [3.7.91](http://ftp.gnome.org/pub/GNOME/sources/pygobject/3.7/pygobject-3.7.91.news)

So now you should be able to migrate GenericTreeModels by using the compatibility module, at least as a start.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:58:29.710

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T15:39:42.753

我在 PyGObject 和 Gtk 中找不到任何对 GenericTreeModel 的引用，但我认为您正在寻找的只是 TreeModel：

[http://developer.gnome.org/gtk3/stable/GtkTreeModel.html](http://developer.gnome.org/gtk3/stable/GtkTreeModel.html)

TreeModel 是接口，由 ListStore、TreeModelFilter、TreeModelSort 和 TreeStore 实现。

```
>>> from gi.repository import Gtk
>>> dir(Gtk.TreeModel)
['__bool__', '__class__', '__delattr__', '__delitem__', '__dict__', '__doc__',
 '__format__', '__gdoc__', '__getattribute__', '__getitem__', '__gtype__', '__hash__', 
 '__info__', '__init__', '__iter__', '__len__', '__module__', '__new__', '__nonzero__',
 '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__setitem__', '__sizeof__', 
 '__str__', '__subclasshook__', '__weakref__', '_convert_row', '_convert_value', 
 '_getiter', 'filter_new', 'foreach', 'get', 'get_column_type', 'get_flags', 'get_iter',
 'get_iter_first', 'get_iter_from_string', 'get_n_columns', 'get_path', 
 'get_string_from_iter', 'get_value', 'iter_children', 'iter_has_child', 
 'iter_n_children', 'iter_next', 'iter_nth_child', 'iter_parent', 'iter_previous', 
 'ref_node', 'row_changed', 'row_deleted', 'row_has_child_toggled', 'row_inserted', 
 'set_row', 'sort_new_with_model', 'unref_node'] 
```

编辑：

在旧的 PyGtk API 中找到[了你正在寻找的](http://developer.gnome.org/pygtk/stable/class-pygtkgenerictreemodel.html)东西，遗憾的是，这是一个仅 PyGtk 的创作。使用自省的东西，你只能得到 Gtk 直接提供的东西，所以你必须直接处理 TreeModel。

希望能帮助到你。

# delphi - 如何使用 TIdMultiPartFormDataStream 处理 TIdHTTPServer

> ID：11025703
> 
> 赞同：4
> 
> 时间：2012-06-14T01:54:42.817
> 
> 标签：delphi, indy, indy10, simplehttpserver

嗨，我需要有关如何使用 indy 中的 IdHttpServer 检索参数和数据的帮助。

我的许多应用程序使用 TIdMultiPartFormDataStream 通过 php.ini 发送数据。由于某种原因，我想使用 TIdHTTPServer 来验证参数并将请求转发到其目的地。

我创建了一个简短的示例供您查看。

```
uses
  IdContext, IdMultipartFormData;

// Server Side------------------------------------------------

IdHTTPServer1.Defaultport := 88;
IdHTTPServer1.active := True;

procedure TForm1.IdHTTPServer1CommandGet(AContext: TIdContext;
  ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo);
begin
  // the request will be pass through its destination by POST/GET
  // and send the result back to the client apps.
  AResponseInfo.ContentText := ARequestInfo.Params.Text;
end;

// Client Side------------------------------------------------
// This will work using the standard Post or Get
procedure TForm1.btnPost1Click(Sender: TObject);
var
  sl: TStringList;
  res: String;
begin
  sl := TStringList.Create;
  try
    sl.Add('Param1=Data1');
    sl.Add('Param2=Data1');
    sl.Add('Param3=Data2');
    sl.Add('Param4=Data3');
    res := IdHTTP1.Post('http://localhost:88/some.php', sl);
    ShowMessage(res);
  finally
    sl.Free;
  end;
end;

//how can i get the parameters and value for this code in my IdHttpServer
procedure TForm1.btnPost2Click(Sender: TObject);
var
  mfd: TIdMultiPartFormDataStream;
  res: String;
begin
  mfd := TIdMultiPartFormDataStream.Create;
  try
    mfd.AddFormField('Param1', 'Data1');
    mfd.AddFormField('Param2', 'Data1');
    mfd.AddFormField('Param3', 'Data2');
    mfd.AddFormField('Param4', 'Data3');
    res := IdHTTP1.Post('http://localhost:88/some.php', mfd);
    ShowMessage(res);
  finally
    mfd.Free;
  end;
end; 
```

我怎么知道客户端应用程序是否传递了 TIdMultiPartFormDataStream 类型的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T02:49:48.567

[之前在Embarcadero](http://forums.embarcadero.com)和[Indy](http://forums2.atozed.com)论坛上已经多次询问和回答了这个问题。请搜索他们的档案以及其他档案，例如[Google Groups](http://groups.google.com)，以查找代码示例。

简而言之，当`TIdHTTPServer.OnCommandGet`触发事件时，如果`AResponseInfo.ContentType`属性说`multipart/form-data`（`TIdHTTP.Post()`您正在使用的版本将`application/x-www-form-urlencoded`改为发送），则该`AResponseInfo.PostStream`属性将包含客户端发布的原始 MIME 数据。您可以使用`TIdMessageDecoderMIME`该类来解析它。但是，该类从未打算在服务器端使用，因此使用起来不是很直观，但仍然可以。

在 Indy 11 中，我计划`multipart/form-data`直接在`TIdHTTPServer`其自身中实现本机解析，但目前还没有 ETA，因为我们还没有开始在 Indy 11 上工作。

# java - java检测代码

> ID：11025707
> 
> 赞同：0
> 
> 时间：2012-06-14T01:54:55.397
> 
> 标签：java, jvm, instrumentation

我在使用仪器方面只有用户特定的经验（一些使用 powermock 进行模拟，一些在 visualvm 中进行分析，chronon 记录服务器）。

在许多情况下，当我在运行了一段时间的 jvm 上使用检测时，会出现 jvm 崩溃。当我在 jvm 崩溃的启动频率低得多之后对其进行检测时。我认为现有的类实例、调用堆栈等存在一些问题（但这只是我的恕我直言）。这就是为什么我觉得仪器如此不可靠:(。

那么当仪器应该运行时有什么一般规则吗？或者可能我做错了什么，并且有神奇的 jvm cmd 参数可以将其从崩溃中拯救出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:58:54.063

可能的原因

1.  内存不足（可能在添加代理时省略了之前的设置）
2.  您有一些被混淆的类并导致 BCI 库失败，从而导致一系列其他问题
3.  JNI 本机代码库

如果您的 jvm 崩溃在使用分析器时更加明显，那么它看起来更像是内存设置...检查当您更改代理脚本时堆设置会发生什么...可能会添加更多堆

# asp.net - MSBuild 中的 PreBuildEvent 和项目依赖项

> ID：11025713
> 
> 赞同：2
> 
> 时间：2012-06-14T01:56:53.060
> 
> 标签：asp.net, msbuild, projects-and-solutions

我遇到了一个棘手的 MSBuild 问题。有一个包含多个网站的解决方案文件。每个网站都需要一个 MVC 视图的副本以及来自公共项目的其他网站内容。该公共项目从共享的组织空间复制文件。这是一个插图：

```
                          站点 A
  组织共享 <- 通用 <- 站点 B
                          站点 C

```

通过文件的 PreBuildEvent 执行文件复制`.csproj`。问题是 PreBuildEvent 命令在检测到的依赖项的构建事件被触发之前运行。所以这是事件的顺序：

```
1\. 站点 A 已建成
   一种。执行预构建步骤（从 Common 复制文件）
   湾。共建
      一世。执行预构建步骤（从 OrgShared 复制文件）
      ii. 执行构建和构建后
   C。执行构建和构建后
2\. B站建成
   一种。执行预构建步骤（从 Common 复制文件）
   湾。执行构建和构建后

```

问题出现在步骤 1a。由于尚未执行 Common prebuild 步骤，因此站点 A 不会收到间接来自 OrgShared 的文件。

我怎样才能有效地解决这个依赖问题，而无需依赖站点 A、B 和 C 必须直接从 OrgShared 复制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:43:25.037

弄清楚了。Site A 在 Common 之前建造的原因是因为`.sln`文件中的顺序。更改解决方案中的顺序后，我能够让 PreBuildEvent 首先在 Common 中运行。

前：

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Site A", "SiteA.csproj", "{6E7FAE47-74A6-4740-9AC5-9599E850E834}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Common", "Common.csproj", "{C510B337-7459-4494-BBCB-B79FECD2AA66}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Site B", "SiteB.csproj", "{F3CAFCE9-A96D-4EE5-BE09-420E27344345}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Site C", "SiteC.csproj", "{A50C5DE2-4846-40F2-86B1-B103F413DE0F}"
EndProject 
```

后：

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Common", "Common.csproj", "{C510B337-7459-4494-BBCB-B79FECD2AA66}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Site A", "SiteA.csproj", "{6E7FAE47-74A6-4740-9AC5-9599E850E834}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Site B", "SiteB.csproj", "{F3CAFCE9-A96D-4EE5-BE09-420E27344345}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Site C", "SiteC.csproj", "{A50C5DE2-4846-40F2-86B1-B103F413DE0F}"
EndProject 
```

# sharepoint - 无法在 Windows 7 中安装 sharepoint 2010

> ID：11025716
> 
> 赞同：3
> 
> 时间：2012-06-14T01:57:09.810
> 
> 标签：sharepoint, windows-7, sharepoint-2010

在**Windows-7 Professional**上安装**Sharepoint 2010 Server**时遇到问题我已按照此[MSDN 页面](http://msdn.microsoft.com/en-us/library/ee554869.aspx)中给出的步骤进行操作。尝试运行**Setup.exe**时仍然出现以下错误。

 ****![错误信息](../Images/67fb7d6baf423b287e4021e2ef069c3c.png)

谁可以帮我这个事？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T04:59:00.223

> 似乎`SharePoint Server 2010`只与 `Windows Server 2008 x64`. 但事实并非如此。检查[这个](http://www.codeproject.com/Articles/44210/Installing-SharePoint-Server-2010-on-Windows-7-x64)。

来源：[在 Windows 7 x64 上安装 Microsoft SharePoint Server 2010](http://developmentsolutionsjunction.blogspot.in/2011/03/installing-microsoft-sharepoint-server.html)
执行此操作非常简单。只需一点点工作，您的 SharePoint 安装就可以在**Windows 7 64 位客户端操作系统**上运行。

您只需修改配置文件即可在客户端操作系统上安装 SharePoint Server 2010。将 CD 内容复制到硬盘驱动器上的文件夹并按照以下步骤操作：

1.  转到文件文件夹
2.  转到设置文件夹
3.  打开 config.xml
4.  `</configuration>`在结束标记之前添加以下行

    `<Setting Id="AllowWindowsClientInstall" Value="True"/>`

保存文件并运行 Setup.exe。现在它可以正常工作了。

请记住：这些行区分大小写，因此请正确书写。

在 Windows 7 上，在运行 Setup.exe 之前安装以下所需的附加先决条件：

`Microsoft FilterPack 2.0`. 在命令提示符处，键入以下内容： `installation directory folder\PrerequisiteInstallerFiles\FilterPack\FilterPack.msi`

1.  [微软同步框架](http://go.microsoft.com/fwlink/?LinkID=141237)
2.  [SQL Server 本机客户端](http://go.microsoft.com/fwlink/?LinkId=123718)
3.  [Windows 身份基础 (Windows6.1-KB974405-x64.msu)](http://support.microsoft.com/kb/974405)
4.  [图表控件](http://go.microsoft.com/fwlink/?LinkID=122517)（如果要安装 SharePoint Foundation 2010，则不需要）。
5.  [SQL Server Analysis Services - ADOMD.Net](http://download.microsoft.com/download/A/D/0/AD021EF1-9CBC-4D11-AB51-6A65019D4706/SQLSERVER2008_ASADOMD10.msi)（如果您要安装 SharePoint Foundation 2010，则不需要这样做）。

*有关更详细的安装教程，请参阅 MSDN -[在 Windows Vista、Windows 7 和 Windows Server 2008 上为 SharePoint 2010 设置开发环境](http://msdn.microsoft.com/en-us/library/ee554869.aspx)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:00:58.863

您的 Sharepoint 2010 Server 副本似乎打算安装到运行 Win Server 2008 SP2 或更高版本的计算机上。不赢 7\. 升级您的机器或查看是否有更兼容的共享点服务器副本。****

# vb.net - 系统找不到为装配指定的参考

> ID：11025717
> 
> 赞同：3
> 
> 时间：2012-06-14T01:57:35.987
> 
> 标签：vb.net

我有一个 VB.NET 解决方案，其中有几个项目和根目录中的“参考”文件夹。

现在我想从这个 References 文件夹中添加一个新的 dll 引用到其中一个项目，但得到以下消息：

> 系统找不到指定的参考

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-11T09:43:02.620

我遇到过很多次。在这里，当单击图片框时，我试图执行一个 jar 文件。我将我的 jar 添加到我的资源中：

`Private Sub PictureBox9_Click(sender As Object, e As System.EventArgs) Handles _PictureBox9.Click Dim dir As String = My.Computer.FileSystem.SpecialDirectories.Temp Dim filename As String = dir + "minecraft.jar" 'Look Below IO.File.WriteAllBytes(filename, My.Resources.minecraft) Process.Start(My.Computer.FileSystem.SpecialDirectories.Temp & "minecraft.jar") End Sub`

以下内容适用于其他程序，但不适用于我的世界：

`Private Sub Panel9_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Panel9.Click proc = Process.Start("vbexpress.exe", "") End Sub`

*proc 是一个新的 System.Diagnostics.Process()

但是对于实际文件，您已经手动将它们引出它们的位置。所以我这样做了`Me.Resources.1234.png`，这节省了我编写目录的时间。但这仍然不适用于我的世界，所以我保留了那个长段。

# ruby-on-rails - Jasmine Headless Webkit 规范文件在资产之前运行？

> ID：11025720
> 
> 赞同：0
> 
> 时间：2012-06-14T01:58:12.790
> 
> 标签：ruby-on-rails, jasmine

要将规范文件和资产作为咖啡脚本运行，我决定使用 jasmine-headless-webkit。我相信我已经正确安装了所有东西，但我的 jasmine.yml 文件中可能有问题：

```
src_files:
  - spec/support/javascripts/jquery-1.7.2.js
  - app/assets/javascripts/application.js
helpers:
  - helpers/**/*
spec_files:
  - "**/*_spec.*"
src_dir: 
  - vendor/assets/javascripts
spec_dir: spec/javascripts 
```

当我运行命令时，我得到三个错误，都是相同的：

```
Editor should have an array named tables. (/Users/aaronmcleod/Documents/awesome_model/spec/javascripts/editor_spec.js.coffee:20)
ReferenceError: Can't find variable: AwesomeModel 
```

AwesomeModel 变量是我正在使用的哈希，我导出到窗口对象。然后，我将诸如 Editor 类之类的东西附加到它上面。关于为什么没有定义的任何想法？如果有帮助，这是我的规范文件：

```
fixture_text = ->
  "Company has_many:Employee\n" +
  "  id : int\n" +
  "  name : varchar\n" +
  "Employee belongs_to:Company\n" +
  "  id : int\n" +
  "  name : varchar\n" +
  "  phone : varchar\n" +
  "ComplicatedTable-Name\n" +
  "  id : int"

class DummyPane
  constructor: ->
    @viewport = {}

  clean_up: ->

describe "Editor", ->

  it "should have an array named tables", ->
    editor = new AwesomeModel.Editor(fixture_text())
    expect(editor.tables).toBeDefined()

  describe "#parse_table_names", ->
    text = fixture_text()
    editor = new AwesomeModel.Editor(text)

    it "tables should be of three length", ->
      editor.parse_table_names()
      expect(editor.tables.length).toEqual(3)

    it "the first table name should be 'Company'", ->
      editor.parse_table_names()
      expect(editor.tables[0].name).toEqual("Company")

    it "the third table name should be 'ComplicatedTable-Name'", ->
      editor.parse_table_names()
      expect(editor.tables[2].name).toEqual("ComplicatedTable-Name")

  describe "#add_columns", ->
    text = fixture_text()
    editor = new AwesomeModel.Editor(text)
    editor.parse_table_names()

    describe "first table", ->
      it "the first table should have two columns", ->
        editor.add_columns()
        table = editor.tables[0]

        expect(table.columns.length).toEqual(2)

      it "the first column of first table should be named 'id : int'", ->
        editor.add_columns
        table = editor.tables[0]
        expect(table.columns[0].name).toEqual('id : int') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:48:54.710

通过使用警卫找到答案。规范文件没有更改，对 jasmine.yml 文件进行了一些小的更改。这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.0'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'haml-rails'

gem 'jquery-rails'

platforms :ruby do
  gem 'pg'
end

platforms :jruby do
  gem 'jruby-openssl'
  gem 'activerecord-jdbcpostgresql-adapter'
end

group :test, :development do
  gem 'rspec-rails'
  gem 'capybara'
  gem 'jasmine'
  gem 'guard'
  gem 'guard-coffeescript'
end 
```

我的保护文件：

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

guard 'coffeescript', input: 'spec/javascripts', output: 'spec/javascripts' 
```

茉莉花.yml

```
src_dir: 
  - assets/javascripts
src_files:
  - assets/application.js
helpers:
  - helpers/**/*
spec_files:
  - "**/*_spec.js"

spec_dir: spec/javascripts 
```

我将资产路径更改为不使用本地文件夹结构，而是正确使用资产路径。

要运行它，只需`guard`在一个选项卡中运行，然后`rake jasmine`在另一个选项卡中运行。当您保存规范文件时， .js 版本将由guard 编译。

# iphone - 如何将 UIImageView 放置在子视图的特定区域

> ID：11025722
> 
> 赞同：-1
> 
> 时间：2012-06-14T01:58:22.353
> 
> 标签：iphone, ios, uiimageview, addsubview

**如果有一种方法可以使用addSubview**将 UIImageView 放入另一个视图的特定区域，我会感到很困惑

 **这就是我的代码当前的外观，我正在考虑如何将图像添加到视图的特定位置，例如左上角的 (0,0)。

这就是我正在做的。

```
//...
jumpBar = [[JumpBarViewController alloc] initWithNibName:@"JumpBarViewController" bundle:[NSBundle mainBundle]];
            jumpBarContainer = [[UIView alloc] initWithFrame:CGRectMake(0.0, 480.0, (jumpBarHeight + 49.0), 320.0)];
            [jumpBarContainer addSubview:jumpBar.view];
            [self.view insertSubview:jumpBarContainer belowSubview:actionTabBar];  

            // Add jumpBar shade
                switch (jumpBarHeight) {
                    case 103:
                    {
                        NSLog(@"one row");
                        UIImageView *smlShader = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1-row-top-bg.png"]];
                        [jumpBarContainer addSubview:smlShader]; // how do i add this to the top left of jumBarContainer?
                    }
//... 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:01:56.047

设置 UIImageView 框架：

```
 UIImageView *smlShader = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1-row-top-bg.png"]];
     smlShader.frame = CGRectMake(x,y,w,h); //Change the value of the frame
     [jumpBarContainer addSubview:smlShader]; 
```**

# xcode - 在 Objective-C iOS 5 中为 Retina Display 以编程方式更改资源

> ID：11025729
> 
> 赞同：0
> 
> 时间：2012-06-14T01:59:41.577
> 
> 标签：xcode, ios5, resources, retina-display

我的应用程序有一个填充屏幕的背景图像。我想根据我们是否在 Retina Display 设备上显示正确的 .png 文件。我已经为 iPhone 和 iOS 添加了所有大小正确的 .png 文件。是否可以 ？如果没有，我应该如何正确处理？

我有 XCode 4.3.2 和 iOS 5.1 作为部署目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:12:49.243

如果您正确命名您的图形（例如`@2x`，在 png 文件的后缀中添加“”），iOS 就足够聪明，可以在适当的设备和显示器上使用您的 Retina 显示图形。特别是如果您在 XIB 文件中设计的用户界面中使用 UIImageViews 或控件或其他任何东西。

如果你在做程序化的图像（即你定义了一个插座然后通过类似“ `[UIImage imageNamed:`]”的方式抓取图像，iOS 仍然足够聪明，可以为你拾取高 rez 图像。同样，只要你正确地命名了你的图形。

StackOverflow 上还有其他问题可能会对您有所帮助，例如：

[如何在通用应用程序中同时支持 iPad 和 iPhone 视网膜图形](https://stackoverflow.com/questions/9611061/how-to-support-both-ipad-and-iphone-retina-graphics-in-universal-apps)

[如何为视网膜显示激活@2x 高分辨率图形？](https://stackoverflow.com/questions/3742618/how-to-activate-2x-high-res-graphics-for-retina-display)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T03:44:31.427

这可能会奏效。首先，它检查屏幕是否有视网膜显示，如果有，则将背景图像设置为视网膜图像。如果它没有视网膜显示器，则背景图像是常规图像。你可以把它放在`viewWillAppear`or中`viewDidLoad`。

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
    ([UIScreen mainScreen].scale == 2.0)) {

    // Retina display
    UIImage *backgroundImage = [UIImage imageNamed:@"retinaImage.png"];

} else {

    // Non-Retina display
    UIImage *backgroundImage = [UIImage imageNamed:@"nonRetinaImage.png"];

} 
```

希望这可以帮助！

# python - urls.py 中带有 cache_page 的 Django NoReverseMatch 异常

> ID：11025735
> 
> 赞同：0
> 
> 时间：2012-06-14T02:00:39.013
> 
> 标签：python, django

# 问题

为什么在 Django 1.4 下使用该`cache_page`函数在模板中`urls.py`使用标签时会导致 NoReverseMatch 错误`url`？

## 设置

### 视图.py

```
from django.shortcuts import render

def index(request):
    '''Display the home page'''
    return render(request, 'index.html') 
```

### 网址.py

按照`cache_page` [指示](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#specifying-per-view-cache-in-the-urlconf)：

```
from django.conf.urls import patterns, include, url
from django.views.decorators.cache import cache_page
from my_project.my_app import views

urlpatterns = patterns('',
    url(r'^$', cache_page(60 * 60)(views.index)),
) 
```

### 索引.html

```
{% url my_project.my_app.views.index %} 
```

### 错误信息

```
NoReverseMatch at /
Reverse for 'my_project.my_app.views.index' with arguments '()' and keyword arguments '{}' not found. 
```

错误消息指出的违规行当然是：

```
{% url my_project.my_app.views.index %} 
```

## 到目前为止我尝试过的

*   大量的谷歌搜索和搜索 SO
*   将代码简化为上面的示例以排除其他冲突
*   成功用作装饰`cache_page`器`views.py`（根据文档不推荐）
*   献给我们全能的 Django 霸主

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:04:09.433

进行反向时，Django 尝试匹配

*   `URL`标签
*   虚线路径
*   可调用的

在您的代码中，是虚线路径，然后 Django 将通过在映射字典中查找来`'my_project.my_app.views.index'`获取实际函数并将其用作匹配反向 URL 的键。 `index()``django.core.urlresolvers.get_resolver(None).reverse_dict`

但是，当您包装`view.index`by`cache_view`时，映射字典中的键将成为包装器。因此查找失败并被`NoReverseMatch`引发。这很不方便且容易出错，但我不确定这是否是一个错误。

然后你可以通过使用`URL`标签来解决这个问题

```
url(r'^$', cache_page(60 * 60)(views.index), name='my_index'),
{# in template #}
{% url my_index %} 
```

或用作您提到的装饰器`cache_page`。`views.py`

# qt - 是否有一种优雅的方式来公开子小部件的插槽？

> ID：11025736
> 
> 赞同：3
> 
> 时间：2012-06-14T02:00:40.687
> 
> 标签：qt, signals-slots

在我的自定义小部件中，包含七个标签作为子小部件。它们的文本和文本格式应由父窗口小部件的用户设置。我创建了 14 个插槽来完成此任务：

```
void setCenterText(const QString &text) {
    ui->labelCenter->setText(text);
}

void setRightText(const QString &text);
... 
```

是否可以通过以下方式完成：connect(parent, slot(a), child, slot(b)) 并且连接到父插槽的信号会自动转发到子小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:03:04.023

> 是否可以通过以下方式完成：connect(parent, slot(a), child, slot(b)) 并且连接到父插槽的信号会自动转发到子小部件？

您不能将插槽连接到插槽，但更重要的是，如果不在另一个参数中指定目标小部件，父小部件无法知道哪个子小部件需要修改。

尽管您所做的工作很费力，但它是基于聚合的组件构建的基本租户，并且确实提供了优势 - 主要是能够非常精细地精确调整向程序员公开的子窗口小部件属性。

# php - 无论如何要从每月电子邮件中的链接中自动提取 URL？

> ID：11025744
> 
> 赞同：0
> 
> 时间：2012-06-14T02:01:30.203
> 
> 标签：php, email

基本上我每个月都会收到一封电子邮件，其中包含一个链接和一些文本。我需要能够从电子邮件中获取链接并以某种方式获取它以将 URL 提交到数据库。我可以自己做数据库的事情，所以我只需要知道是否可以每月从电子邮件中自动检索 URL。

如果这不是我可以用 PHP 做的事情，那么我可以用哪些其他语言来做 Web 服务器常见的事情？或者也许有一项服务以某种方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:45:11.073

我不知道这是否是完成您的任务的正确方法，但这是可行的。

假设您想每 1 天检查一次电子邮件是否有新邮件，然后每 24 小时设置一个[执行 php 文件的](http://www.thegeekstuff.com/2011/07/php-cron-job/)[cron 作业](http://en.wikipedia.org/wiki/Cron)（您可以根据需要将其设置为任意频率，但某些网络托管服务会限制它）。在此文件中，您需要用于检索邮件的代码（无论您使用什么）和一些代码来解析电子邮件并将常规文本与链接区分开来。

为此，如果链接是常规的 html 链接，只需搜索“http”，然后将其后的所有内容复制到下一个“”，如果它是用户编写的，您可能需要做更多的工作来解析它并避免错误，或者您可能会得到不同的协议。只需处理文件，如果您有任何问题，请再次询问。

编辑：要回答实际问题，**是的，可以使用 cron 作业**或一些不太常见的[替代方案](https://stackoverflow.com/questions/4662048/are-there-any-cron-jobs-alternative)

# python - 如果我有一个单词列表，如何有效地检查字符串是否不包含列表中的任何单词？

> ID：11025748
> 
> 赞同：6
> 
> 时间：2012-06-14T02:02:29.650
> 
> 标签：python, search, loops, filter, stop-words

正如标题所说，我有一个单词列表，就像`stopWords = ["the", "and", "with", etc...]`我收到了“杀死狐狸和狗”这样的文字。我想要像“杀死狐狸狗”这样的输出非常有效和快速。我该怎么做（我知道我可以使用 for 循环进行迭代，但这不是很有效）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T02:05:06.850

最重要的改进是**让 stopWords 成为一个`set`**. 这意味着查找将非常快

```
stopWords = set(["the", "and", "with", etc...])
" ".join(word for word in msg.split() if word not in stopWords) 
```

如果您只想知道文本中是否有任何停用词

```
if any(word in stopWords for word in msg.split()):
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T02:07:03.943

使用 Python，最快的操作是将“停用词”设置为集合而不是列表，并使用“停用词中的 x”直接检查成员资格。这种结构被设计为对这种操作快速。

[查看设置文档](https://docs.python.org/2/library/stdtypes.html#set)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T02:04:57.420

使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
stopWords = ["the", "and", "with"]
msg = "kill the fox and the dog"

' '.join([w for w in msg.split() if w not in stopWords]) 
```

给出：

```
'kill fox dog' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T02:05:38.220

1.  将您的原始单词列表放入字典中。
2.  遍历给定字符串中的字符，使用空格作为单词的分隔符。在字典中查找每个单词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T02:31:46.147

将您的停用词放在一个`set()`（正如其他人所建议的那样），将您的其他单词累积到一个工作集中，然后简单地使用`working = working - stopWords`...获取集合差异，以获得一个工作集，其中所有停用词都被过滤掉。或者只是为了检查这些词的存在使用条件。例如：

```
#!python
stopWords = set('the a an and'.split())
working   = set('this is a test of the one working set dude'.split())
if working == working - stopWords:
    print "The working set contains no stop words"
else:
    print "Actually, it does" 
```

实际上有更有效的数据结构，例如可用于大型、相对密集的停用词集的[trie 。](http://en.wikipedia.org/wiki/Trie)`set()`您可以找到 Python 的 trie 模块，尽管我没有看到任何编写为二进制 (C) 扩展的模块，我想知道在纯 Python 中实现的 trie 与使用 Python支持之间的交叉点在哪里。[（不过，对于Cython](http://www.cython.org/)来说也可能是一个很好的案例）。

事实上，我看到有人在这里单独解决了这个问题，[所以：如何在 cython 中创建一个固定长度的可变 python 对象数组](https://stackoverflow.com/questions/4834036/how-do-i-create-a-fixed-length-mutable-array-of-python-objects-in-cython)。

当然，最终，您应该创建简单的基于集合的版本，对其进行测试和分析，然后，如有必要，尝试使用 trie 和 Cython-trie 变体作为可能的改进。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T02:37:18.823

作为替代方案，您可以在正则表达式中组装您的列表，并用一个空格替换停用词和周围的空格。

```
import re
stopWords = ["the", "and", "with"]
input = "Kill the fox and dog"
pattern = "\\s{:s}\\s".format("\\s|\\s".join(stopWords))
print(pattern)
print(re.sub(pattern, " ", input)) 
```

将输出

```
\sthe\s|\sand\s|\swith\s
Kill fox dog 
```

# php - 使用 PHP 表单中的 2 个字段从 MySQL 数据库中检索信息的问题

> ID：11025750
> 
> 赞同：0
> 
> 时间：2012-06-14T02:03:12.163
> 
> 标签：php, mysql

我有一个包含 3 列的 MySQL 数据库：

```
id  |  articletitle  | articleorganization 
```

还有一个带有 2 个字段和一个提交按钮的简单 PHP 表单：search.php

```
<div class="content">
    <form id="form1" name="form1" method="post" action="searchdb.php">
    <table width="100%" border="0" cellpadding="6">
    <tr>
      <td width="29%" align="right">Article Title:</td>
      <td width="71%" align="left"><input name="title" type="text" id="articletitle" size="50" /></td>
    </tr>
    <tr>
      <td align="right">Author or Organization:</td>
      <td align="left"><input name="organization" type="text" id="articleorganization" size="50" /></td>
    </tr>
      </table>

    <table width="100%" border="0" cellpadding="6">
      <tr>
        <td><input type="submit" name="submit" value="Submit" /></td>
        </tr>
    </table>
    </form>
</div> 
```

表单连接到 searchdb.php：

```
<?php

include('settings.php');

$title = mysql_real_escape_string($_POST['title']);
$organization = mysql_real_escape_string($_POST['organization']);

$sql = "SELECT * FROM articles WHERE 1 "
     . (isset($title) ? "AND articletitle LIKE '$title%' " : "")
     . (isset($organization) ? "AND articleorganization LIKE '$organization%'" : "");

while ($row = mysql_query($sql)){
    echo '<br/> Article Title: '.$row['articletitle'];
    echo '<br/> Article Organization: '.$row['articleorganization'];
    echo '<td><a href="edit.php?id=' . $row['id'] . '">Edit</a></td>';
    echo '<td><a href="delete.php?id=' . $row['id'] . '">Delete</a></td>';
    echo '<td><a href="entry.php?id=' . $row['id'] . '">View Full Entry</a></td>';
    echo '<br/><br/>';
    }

?> 
```

在评论者的帮助下进行了一些修改后，问题发生了变化。

现在，在提交搜索后，结果页面开始一遍又一遍地滚动通过 searchdb.php 创建的表格，尽管表格中没有任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:10:14.260

基本上，当您有几个具有相同名称的项目引用某种数组时，您得到的是一个实际的数组。

也就是说，如果输入框用“a”和“b”填充，则变量`$_POST['term']`将等于`array("a", "b")`。

关于缩进，它是您代码风格的一部分，只要您在整个代码库中保持一致，就可以以您觉得舒服的方式进行。

**编辑**：我确实同意其他人的观点，即您应该更加小心用户输入以及如何将该数据添加到查询中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T02:35:42.290

如果您回显您的查询，它将打印如下内容：

```
select * from articles where articletitle like '%%' 
```

这就是您的代码返回表中所有行的原因。要使其按您想要的方式工作，请更改您的名称`<input>`以与您的列相匹配。

```
<input type="text" name="title" />
<input type="text" name="organization" /> 
```

给定这些标签，您将拥有这样的`$_POST`包含数组：

```
Array
(
  [title] => 'some value',
  [organization] => 'another value',
) 
```

而且您必须在查询中执行一些逻辑。如果只`title`提供，

```
SELECT * FROM articles WHERE articletitle LIKE '%$title%' 
```

如果只`organization`提供，

```
SELECT * FROM articles WHERE articleorganization LIKE '%$organization%' 
```

如果两者都提供，

```
SELECT * FROM articles
WHERE articletitle LIKE '%$title%' AND 
      articleorganization LIKE '%$organization%' 
```

这是像上面那样制作 SQL 的 PHP：

```
// Don't forget to properly escape your input
$title = mysql_real_escape_string($_POST['title']);
$organization = mysql_real_escape_string($_POST['organization']);

// Build the SQL
// Echo this string to make sure the SQL is correct
$sql = "SELECT * FROM articles WHERE 1 "
     . (strlen($title) ? "AND articletitle LIKE '%$title%' " : "")
     . (strlen($organization) ? "AND articleorganization LIKE '%$organization%'" : "");

$qry = mysql_query($sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T02:46:34.810

$_POST[term] 变成一个数组，其键值类似于 0,1。丢失 SQL 查询的字段引用。

在输入字段中使用这些名称：

```
<input name="articletitle" type="text" id="articletitle" size="50" />
<input name="articleorganization" type="text" id="articleorganization" size="50" /> 
```

您可以像这样构建查询：

```
$sql = mysql_query("select * from articles WHERE articletitle LIKE '%".mysql_real_escape_string($_POST['articletitle'])."%' OR articleorganization LIKE '%".mysql_real_escape_string($_POST['articleorganization'])."%'"); 
```

注意：永远不要在查询中使用 $_POST（用户输入）变量而不先转义以防止 mysql 注入。

PS 我个人对缩进的品味是：总是缩进每一个匹配的 HTML 元素块。所以是的，我会把表格缩进一个标签。

# ubuntu - libmemcached-1.0.8 make 在 ubuntu lucid 中失败

> ID：11025752
> 
> 赞同：5
> 
> 时间：2012-06-14T02:03:32.247
> 
> 标签：ubuntu, memcached, libmemcached

我试图`libmemcached-1.0.8`在 ubuntu lucid 中从源代码制作和安装。我尝试了这些步骤

```
sudo wget http://download.tangent.org/libmemcached-1.0.8.tar.gz
sudo ./configure -prefix=/usr
sudo make 
```

make 命令导致了这个错误

```
In file included from memcached/assoc.c:14:
memcached/memcached.h:18:19: error: event.h: No such file or directory

    In file included from memcached/assoc.c:14:
    memcached/memcached.h:358: error: field ‘notify_event’ has incomplete type
    memcached/memcached.h:380: error: field ‘event’ has incomplete type
    make[1]: *** [memcached/memcached_memcached-assoc.o] Error 1
    make[1]: Leaving directory `/usr/local/src/libmemcached-1.0.8'
    make: *** [all] Error 2 
```

我已经安装了 memcached 使用

```
sudo apt-get install memcached 
```

我试图检查 memcached 在哪里，使用`whereis memcached` ..它显示

```
memcached: /usr/bin/memcached /etc/memcached.conf /usr/include/memcached /usr/share/memcached /usr/share/man/man1/memcached.1.gz 
```

有人可以告诉我应该怎么做才能正确制作和安装这个库吗？

编辑：

根据@sarnold 的建议，我使用了

```
sudo apt-get install libevent-dev 
```

进而

```
sudo ./configure --prefix=/usr
sudo make
sudo make install 
```

现在，文件夹中有 13 个以“mem”开头的新可执行`/usr/bin`文件

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T02:15:59.190

[`event.h`可能由 提供`libevent-dev`](http://packages.ubuntu.com/search?searchon=contents&keywords=event.h)。尝试`sudo apt-get install libevent-dev`并重新尝试您的`./configure ; make`序列。

# java - 确保文件系统中存在特定的目录层次结构（必要时创建）

> ID：11025755
> 
> 赞同：-2
> 
> 时间：2012-06-14T02:03:57.263
> 
> 标签：java, string, memory, arraylist

问题：我需要确保文件系统中存在特定的目录层次结构，如果不存在则创建它。

我知道有该方法，`File.mkdirs()`但是该方法的 javadocs 表明它可能无法创建完成给定路径所需的部分或全部目录。

为了解决这个问题，我创建了一个方法，它接受一个表示路径的字符串并将其解析为各个部分，并将它们存储到一个`ArrayList<String>`. 然后，第二种方法将遍历并构建目录，确保每个目录和子目录都存在。

问题是，实际程序在尝试循环并将字符串分解为各个部分时会耗尽内存。我知道这不是功能；它在 JUnit 测试中完美地独立运行，并且程序本身不是很占用内存。此时，它只是设置目录并将它们存储到“DataBank”类中 - 没什么大不了的，只是一个存储一堆字符串的类。

我想弄清楚是什么导致了问题；我可以在代码停止时回复有效的不同类。

但是，更简单的解决方案可能只是使用`File.mkdirs()`. 什么会导致`File.mkdirs()`不创建目录？会不会是权限不够？

如果可以的话，我想简化这个过程，而不是试图重新发明轮子。但与此同时，我知道程序不应该内存不足——我正在存储字符串并执行文件操作，没有什么超级密集的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:47:44.670

> **然而，更简单的解决方案可能只是使用 File.mkdirs()。什么会导致 File.mkdirs() 不创建目录？会不会是权限不够？**

`File.mkdirs()`可能由于任何失败的原因而`File.mkdir()`失败（由于父目录不存在而失败（出于明显的原因）除外）。

从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs%28%29)：

> `public boolean mkdirs()`
> 
> 创建由此抽象路径名命名的目录，包括任何必要但不存在的父目录。**请注意，如果此操作失败，它可能已成功创建一些必要的父目录**

粗体位是一条线索，`mkdirs()`它只是多次调用`mkdir()`.

[这是什么-`mkdirs()`它](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/io/File.java#File.mkdirs%28%29)有效地调用`mkdir()`了目录层次结构：

```
public boolean mkdirs() {
    if (exists()) {
        return false;
    }
    if (mkdir()) {
        return true;
    }
    File canonFile = null;
    try {
        canonFile = getCanonicalFile();
    } catch (IOException e) {
        return false;
    }

    File parent = canonFile.getParentFile();
    return (parent != null && (parent.mkdirs() || parent.exists()) &&
            canonFile.mkdir());
} 
```

# android - 使用国际化android标记方向的松散值变化

> ID：11025756
> 
> 赞同：0
> 
> 时间：2012-06-14T02:04:03.493
> 
> 标签：android, internationalization, orientation

我正在开发一个使用国际化的 Android 应用程序。所以我的解决方案中有文件夹值语言（例如值-en、值-br）。国际化运作良好。

问题是当我将它与方向元素结合起来时。

我还有一个用于横向的 xml 文件和另一个用于纵向的 xml 文件。我有文件夹布局方向（例如布局端口）。方向也很好。我通过隐藏以下方法来实现这一点：

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    setContentView(R.layout.main);
} 
```

但是我遇到了字符串值（标签）的问题。当我改变方向时，所有字符串值都会丢失数据并作为 ids 出现。例如，我有一个带有“保存”标签的按钮。当我旋转手机时，按钮的标签变为“@23232324”，这是资源的编号。

我能做些什么？我尝试为我拥有但不起作用的每种语言创建纵向和横向文件夹（例如 values-br-port、values-br-land）。

我需要保持工作、定位和国际化。我需要根据方向和不同的语言有两种不同的布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:12:54.553

顺便说一句，我解决了！

问题是我在重新加载视图之前没有调用 setLocale 方法。所以我不得不这样做，

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    setLocale();
    setContentView(R.layout.main);
} 
```

和方法setLocale：

```
public void setLocale(){
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config,
    getBaseContext().getResources().getDisplayMetrics());
} 
```

# jquery - 过滤和分页

> ID：11025766
> 
> 赞同：2
> 
> 时间：2012-06-14T02:05:35.467
> 
> 标签：jquery, html-lists, paging

嗨，人们感谢您的帮助。我试图实现一个简单的分页过滤器，按类隐藏 li。例子在[这里](http://jsfiddle.net/vU9Hv/11/)。我是这方面的新手，但在一些帮助下，主要想法正在发挥作用。唯一的问题是，当我点击过滤时，我只想对那个类别中的 li 进行分页。因此，如果我单击“类别 1”链接，当我单击“下一个”或“上一个”时，具有“类别 2”类的 li 应该被隐藏而不出现。

HTML

```
<div class="filter">
    <a href="#category-1">category 1</a>
    <a href="#category-2">category 2</a>
</div>

<div id="item-wrapper">
<ul class="items">
    <li class="category-1">item 1</li>
    <li class="category-1">item 2</li>
    <li class="category-1">item 3</li>
    <li class="category-1">item 4</li>
    <li class="category-1">item 5</li>
    <li class="category-1">item 6</li>
    <li class="category-2">item 7</li>
    <li class="category-2">item 8</li>
    <li class="category-2">item 9</li>
    <li class="category-2">item 10</li>
    <li class="category-2">item 11</li>
    <li class="category-2">item 12</li>
    <li class="category-1">item 13</li>
    <li class="category-1">item 14</li>
    <li class="category-2">item 15</li>
</ul>

<div class="ctrl-nav">
<a href="#" id="prev">Previous</a><a href="#" id="next">Next</a>
</div>
</div> 
```

JS

```
$('div.filter').delegate('a', 'click', function (event) {
  $('ul.items li').hide().filter('.' + this.href.slice(this.href.indexOf("#") + 1)).show();

  event.preventDefault();
});

var itemsNumber = 6;
var min = 0;
var max = itemsNumber;

function pagination(action) {

    var totalItems = $("li").length;

    if (max < totalItems) {//Stop action if max reaches more than total items 
        if (action == "next") {

            min = min + itemsNumber;
            max = max + itemsNumber;

        }
    }

    if (min > 0) {//Stop action if min reaches less than 0
        if (action == "prev") {

            min = min - itemsNumber;
            max = max - itemsNumber;

        }
    }

    $("li").hide();
    $("li").slice(min, max).show();

}

pagination();

//Next
$("#next").click(function() {

    action = "next";
    pagination(action);

})

//Previous
$("#prev").click(function() {
    action = "prev";
    pagination(action);

}) 
```

你能帮忙的话，我会很高兴 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:28:51.167

我已经更新了你的脚本：http: [//jsfiddle.net/vU9Hv/12/](http://jsfiddle.net/vU9Hv/12/)

基本上，我引入了一个新变量`visible`，其中包含要显示的所选`li`类。然后，该`pagination`函数处理 s 的所有显示/隐藏`li`。该变量默认设置为空白；因此，所有`li`s 最初都会显示。该`pagination`功能将从以下内容开始：

```
var totalItems = $("li" + visible).length; 
```

并以：

```
$("li" + visible).slice(min, max).show(); 
```

当点击处理程序转换为：

```
$('div.filter').delegate('a', 'click', function (event) {
    visible = '.' + this.href.slice(this.href.indexOf("#") + 1);
    pagination();
    event.preventDefault();
}); 
```

# wolfram-mathematica - 如何使用带函数系数的 DSolve 求解微分方程？

> ID：11025771
> 
> 赞同：0
> 
> 时间：2012-06-14T02:06:57.283
> 
> 标签：wolfram-mathematica, dsolve

假设我有

```
v[x_] = Square[1.453 Sech[x + 1]] + I  Sech[x + 1] Tanh[x + 1] 
```

我必须解方程：

```
mu1 u1[x] - u1''[x] - v[x] u1[x] == 0 
```

为`u1[x]`. 给出的条件是：

```
u1[-2] == 1, u1'[-2] == 0 . 
```

我试过`DSolve`了，但它显示错误：

> Solve::inex：Solve 无法求解具有不精确系数的系统或通过直接合理化系统中存在的不精确数字获得的系统。由于 Solve 使用的许多方法都需要准确的输入，因此向 Solve 提供系统的准确版本可能会有所帮助。

我怎样才能在数学中象征性地求解这个方程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:15:41.080

这个更简单的版本解决了：

```
sol = DSolve[{mu1*u1[x] - u1''[x] - Cos[x]* u1[x] == 0,
    u1[-2] == 1,
    u1'[-2] == 0},
   u1, x];

GraphicsRow[Table[Plot[Evaluate[u1[x] /. sol], {x, 0, 20},
   PlotRange -> All], {mu1, 1, 3}]] 
```

![在此处输入图像描述](../Images/16f5893cf001abca1aa00d84b8f2fd34.png)

但是您包含 v 的方程有问题，可能是数学问题：

```
DSolve[{mu1*u1[x] - u1''[x] -
    ((1.453*Sech[x + 1])^2 + I*Sech[x + 1]*Tanh[x + 1])* u1[x] == 0,
  u1[-2] == 1,
  u1'[-2] == 0},
 u1, x] 
```

# game-center - iOS 6 中的游戏中心

> ID：11025774
> 
> 赞同：1
> 
> 时间：2012-06-14T02:07:47.553
> 
> 标签：game-center, ios6, xcode4.5

我下载了 XCode 4.5 + iOS 6 SDK Preview 版本，运行 Game-Center 集成应用。

在之前的版本中，当我没有在itunesconnect中启用游戏中心并运行应用程序时，消息显示为“游戏中心无法识别此游戏”。

但在 iOS 6 中，即使在 itunesconnect 中未启用游戏中心，也会出现游戏中心登录对话框。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:58:37.153

尝试从 Game Center 应用程序中注销并删除此应用程序。通过删除应用程序可以解决许多与 iTunes Connect 相关的问题。

# python - 相当于 engine.restart() 的瓶子

> ID：11025777
> 
> 赞同：0
> 
> 时间：2012-06-14T02:08:02.133
> 
> 标签：python, cherrypy, gevent, bottle

我正在尝试从 Cherrypy 转移到 Bottle & Gevent（服务器）。
我运行后：

```
application=bottle.default_app() #bottle
WSGIServer(('', port), application, spawn=None).serve_forever() #gevent 
```

我想重新启动服务器，就像重新加载器重新加载服务器一样（但只有当我告诉服务器时）。
所以我想访问一个带有凭据请求的页面，只有在正确的身份验证后才会重新启动。

这是我在 Cherrypy 中的功能示例：

```
@expose
def reloadMe(self, u=None, p=None):
    if u=="username" and p=="password":
        engine.restart()
    raise HTTPRedirect('/') 
```

更简单地说，我问我如何重新加载这个脚本，以便实现我对源文件的编辑，但只有当我检索“重新启动”页面时。
我实际上只需要 Bottlepy 相当于

```
engine.restart() #cherrypy 
```

没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:36:16.143

您可以编写一个小的 shell 脚本来重新启动 gevent wsgi 服务器。

然后使用此代码，您可以调用脚本。

```
@get('/restartmyserver')
def handler():
    http_auth_data = bottle.request.auth() # returns a tuple (username,password) only basic auth.
    if http_auth_data[0] == user and http_auth_data[1] == password:
        os.system("your_shell_script_to_restart_gevent_wsgi")
    bottle.redirect('/') 
```

如果您需要更多信息，请告诉我。

# cakephp - CakePHP 标签约定

> ID：11025779
> 
> 赞同：1
> 
> 时间：2012-06-14T02:08:44.873
> 
> 标签：cakephp, conventions

使用 时`$this->Form->input('fieldname')`，CakePHP 创建一个标签元素，按照惯例，它使用字段名。我知道我可以为标签指定另一个字符串作为输入法的参数，但是有什么方法可以在模型中指定标签名称，所以我不必在多个`ctp`文件中重复标签名称（例如，所以我只需要在一个地方更改它）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:43:30.127

所以我创建了这个并做了一个快速测试，但是不能保证它没有错误：

```
<?php
App::uses('FormHelper', 'View/Helper');
class MyFormHelper extends FormHelper {

    public function label($fieldName = null, $text = null, $options = array()) {
        if ($text === null) {
            $entity = $this->entity();
            $field = array_pop($entity);
            $model = $this->model();
            $object = $this->_models[$model];
            if (isset($object->labels[$field])) {
                $text = $object->labels[$field];
            }
        }
        return parent::label($fieldName, $text, $options);
    }

} 
```

把它放到 app/View/Helper/MyFormHelper.php

如果您愿意，可以将其添加到辅助数组并为其命名。

`public $labels`将数组添加到具有`field => label-text`结构的模型中。希望它有效。

# git - 如何在提交子模块之前从提交 git 项目中恢复？

> ID：11025783
> 
> 赞同：1
> 
> 时间：2012-06-14T02:09:43.320
> 
> 标签：git, commit, git-submodules

我在 git 存储库中有一个项目，带有一个 git 子模块。我对项目和子模块都进行了更改，并提交了项目。

显然我应该先提交子模块，然后提交项目。下次我会这样做。

同时，我该如何恢复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:16:13.530

您可以使用 git reset HEAD~1 返回到提交前的状态。

# python - 使用通配符从子进程调用 rm 不会删除文件

> ID：11025784
> 
> 赞同：18
> 
> 时间：2012-06-14T02:09:58.557
> 
> 标签：python, django, shell, rm

我正在尝试构建一个函数，该函数将从我的项目的根目录中删除所有以“prepend”开头的文件。这是我到目前为止所拥有的

```
def cleanup(prepend):
    prepend = str(prepend)
    PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
    end = "%s*" % prepend
    cmd = 'rm'
    args = "%s/%s" % (PROJECT_ROOT, end)
    print "full cmd = %s %s" %(cmd, args)
    try:
        p = Popen([cmd, args],  stdin=PIPE, stdout=PIPE, stderr=PIPE, close_fds=True).communicate()[0]
        print "p", p
    except Exception as e:
        print str(e) 
```

我没有任何运气 - 它似乎没有做任何事情。你有什么想法我可能做错了吗？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T02:12:29.943

您是否会考虑使用[os.remove()](http://docs.python.org/library/os.html?highlight=os.remove#os.remove)来删除文件而不是`rm`：

```
import os
os.remove('Path/To/filename.ext') 
```

**更新**（基本上将我的评论从下面移到我的答案中）**：**

由于`os.remove()`无法自行处理通配符，因此使用[glob模块来帮助将产生一个解决方案，从这个](http://docs.python.org/library/glob.html)[SO 答案](https://stackoverflow.com/a/5532521/1209279)中逐字重复：

```
import glob
import os
for fl in glob.glob("E:\\test\\*.txt"):
    #Do what you want with the file
    os.remove(fl) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-14T02:23:34.370

问题是您将两个参数传递给`subprocess.Popen`:`rm`和一个路径，例如`/home/user/t*`（如果前缀是`t`）。`Popen`然后将尝试删除一个*完全以这种方式*命名的文件： t 后跟一个星号。

如果要`Popen`与通配符一起使用，则应将`shell`参数传递为`True`. 然而，在这种情况下，命令应该是一个字符串，而不是参数列表：

```
Popen("%s %s" % (cmd, args), shell=True, stdin=PIPE, stdout=PIPE, stderr=PIPE, close_fds=True) 
```

（否则，[参数列表将提供给新的 shell，而不是命令](http://docs.python.org/library/subprocess.html#popen-constructor)）

另一种更安全、更高效的解决方案是[使用`glob`模块](http://docs.python.org/library/glob.html)：

```
import glob
files = glob.glob(prepend+"*")
args = [cmd] + files
Popen(args,  stdin=PIPE, stdout=PIPE, stderr=PIPE) 
```

然而，总而言之，我同意 levon 解决方案是更明智的解决方案。在这种情况下，`glob`答案也是：

```
files = glob.glob(prepend+"*")
for file in files:
    os.remove(file) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T02:49:01.453

我会尝试这样的事情（这也适用于 Windows，但我猜这对你来说不是问题：

```
def cleanup(prepend):
    prepend = str(prepend)
    PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
    for file_to_delete in [file for file in os.listdir(PROJECT_ROOT) if file.startswith(prepend)]:
        os.remove(file_to_delete) 
```

# windows - 无论语言设置如何，检测特定键

> ID：11025787
> 
> 赞同：1
> 
> 时间：2012-06-14T02:10:17.110
> 
> 标签：windows, winapi

（此处为 Windows 互操作）

**背景：**

ConEmu 是我刚刚发现的一个程序，非常酷，允许与命令行交互的许多功能。但是，它具有“Quake”功能，您可以在其中按下一个键并让控制台像大多数 FPS 游戏一样从顶部掉出。我发现了一个错误，根据用户的语言设置，它无法正常工作。如果您想了解它，可以查看[错误报告。](http://code.google.com/p/conemu-maximus5/issues/detail?id=588)

**问题：**

有没有办法将回调挂钩到特定键（不是字符，而是键盘上的特定键），而不管用户的语言设置如何？

# ruby-on-rails - 解释 SELECT 在 rails 3.2.5

> ID：11025791
> 
> 赞同：0
> 
> 时间：2012-06-14T02:11:00.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的 rails 应用程序是使用 mysql 数据库设置的。

当我做一个简单的查找时，例如：

```
Pin.find(:all).size 
```

将导致以下结果

```
Pin Load (130.1ms)  SELECT `pins`.* FROM `pins` 
  EXPLAIN (0.6ms)  EXPLAIN SELECT `pins`.* FROM `pins` 
EXPLAIN for: SELECT `pins`.* FROM `pins` 
+----+-------------+-------+------+---------------+------+---------+------+-------+-------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows  | Extra |
+----+-------------+-------+------+---------------+------+---------+------+-------+-------+
|  1 | SIMPLE      | pins  | ALL  | NULL          | NULL | NULL    | NULL | 33385 |       |
+----+-------------+-------+------+---------------+------+---------+------+-------+-------+
1 row in set (0.00 sec)

 => 33385 
```

如何关闭 EXPLAIN SELECT 以便：

```
 Pin.find(:all).size 
```

将返回

```
Pin Load (1719.6ms)  SELECT `pins`.* FROM `pins` 
 => 43774 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:04:39.027

在环境/开发集中

```
config.active_record.auto_explain_threshold_in_seconds = nil 
```

这将关闭自动解释。

# drupal - Drupal 7 - 使用带有过滤器的视图关系

> ID：11025797
> 
> 赞同：2
> 
> 时间：2012-06-14T02:12:57.680
> 
> 标签：drupal, drupal-7, views, drupal-views

在视图中，我有一个查看 UID（用户 ID/作者）的公开过滤器，但是**有没有办法将其限制为“仅”在此内容类型中发布的用户？**

我尝试添加“内容：作者”关系并点击应用。我不完全确定为什么，但直到此时我才能回到关系并查看更多选项，例如：“用户：内容创作”（然后必须依赖于第一个关系？）所以我也选择了那个，并像这样设置它： ![关系步骤 1](../Images/38f18534e4f5c0b8d958f5840515724d.png) 现在我可以去暴露的过滤器并选择关系：

![关系步骤 2](../Images/7482545ca824039b093735494ac5cf0b.png) 但这不起作用——暴露的过滤器继续显示所有注册用户。

我还尝试输入一个用户参考字段（对此内容类型）并将其附加到关系中，但它不允许显示任何内容并给出此 SQL 警告：

SQLSTATE [42S22]：未找到列：1054 'on 子句'中的未知列'field_data_field_hidden_​​name.uid'

如何将此作者公开过滤器限制为“仅”在此内容类型中发布的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:03:09.923

有一些 drupal 模块可以帮助您。比如[对应的节点引用](http://drupal.org/project/cnr)

但是，如果您擅长 php 代码，您可以创建逻辑来查询数据库并返回所需的结果（这将是表的列）。创建一个上下文过滤器，然后选择一个字段（任何字段都应该有效，但最好选择任一内容类型的内容）。然后编辑它，当过滤器值不可用时 -> 提供默认值 -> PHP 代码

```
$nid = arg(1);// current node id
$query = "SELECT <desired_field_column_name> FROM {<field_data_table_name>} c 
WHERE c.<column_that_is_same_as_nid> = :nid";                                             
$result = db_query($query, array(':nid' =>$nid));
$id = array();
while ($row = $result->fetch())
{
                array_push($id, $row->field_curator_target_id);//put each node id that's referenced in array
}

$separated = implode("+", $id); // separate them by + for AND , for OR
return $separated; //eg.32 + 30 would represent nodes that you want. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T07:30:02.963

在[链接主题](https://drupal.stackexchange.com/questions/18229/how-do-i-control-the-available-options-for-an-exposed-filter)中，有关于 Views Selective Filters 的答案（又名“Views Selective Exposed Filters”，又名 views_filters_selective，又名 views_selective_filters）。

此模块添加名称中带有后缀“（选择性）”的过滤器——添加一个您需要的过滤器，而不是没有后缀的过滤器。

# orm - ServiceStack.OrmLite 如何按属性忽略属性

> ID：11025798
> 
> 赞同：9
> 
> 时间：2012-06-14T02:13:12.903
> 
> 标签：orm, servicestack

```
public class User
{
   public long Id {get;set;}

   [References(typeof(City))]
   public long CityId {get;set;}

   [????]
   public City {get;set;}
} 
```

我正在尝试使用 ServiceStack.OrmLite。我同时使用 ReferenceKey(CityId) 和 Reference(City)。ReferenceKey 用于创建 Db，Reference 用于在我的代码中使用对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-16T12:47:30.013

IgnoreAttribute .. 测试，它的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T16:31:38.240

试试`[IgnoreDataMember]`属性。

此属性将告诉 ServiceStack 库忽略此属性。

# java - 将命名空间添加到 java dom 属性

> ID：11025799
> 
> 赞同：0
> 
> 时间：2012-06-14T02:13:35.747
> 
> 标签：java

我正在尝试创建一个带有命名空间前缀的属性。以下代码似乎不起作用：

```
Element newData = docFromXML.createElement("Data");
Attr typeAttr = docFromXML.createAttributeNS(namespaceContext.getNamespaceURI("ss"), "type");
typeAttr.setValue("String");
newData.setAttributeNode(typeAttr); 
```

我期待以下内容：

```
<Data ss:type="String"></Data> 
```

但是会产生以下内容：

```
<Data type="String"></Data> 
```

如何明确添加命名空间前缀“ss”。getNamespaceURI 函数返回 DOM 中 ss 前缀的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:56:34.710

以下作品：

```
Attr typeAttr = docFromXML.createAttribute("ss:type"); 
```

它生成：

```
<Data ss:type="String"></Data> 
```

# xml - XSLT Xml 输出正在从右斜杠中去除空格

> ID：11025800
> 
> 赞同：5
> 
> 时间：2012-06-14T02:13:48.613
> 
> 标签：xml, xslt, xmlstarlet

XSLT XML 输出格式正在去除结束标记之前的空格

`<Import Include="System.Web" />`变成`<Import Include="System.Web"/>`

由于 XSLT 还删除了它所应用的文档中的许多节点，因此我想去除空格，除非是右斜杠。

xslt 被应用于许多 xml ms proj 文件

模板.xsl;

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ms="http://schemas.microsoft.com/developer/msbuild/2003">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <!--<xsl:preserve-space elements="text"/>-->

    <xsl:template match='@*|node()'>
        <xsl:copy>
            <xsl:apply-templates select='@*|node()'/>
        </xsl:copy>
    </xsl:template>
    ... 
    ...
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T02:22:34.307

**这是无法从 XSLT 控制的序列化细节**。

实现它的任何可靠方法都是对转换结果运行后处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:46:51.160

我最终使用 gnuwin32 sed 添加了一个空格（注意`^>`:`^`是转义尖括号所必需的）

```
sed\sed.exe -i "s/\"\/^>/\" \/>/g" %outfile% 
```

# c# - 动态更改 DataSet 列的显示值

> ID：11025802
> 
> 赞同：1
> 
> 时间：2012-06-14T02:14:11.067
> 
> 标签：c#, asp.net-mvc-3, entity-framework

几个月前我已经修复了这个问题，它一定是完全忘记了，因为我刚刚在我的 MVC3 站点上更新了我的数据模型（从 db 更新模型），它又坏了。我得到了

> 从客户端检测到潜在危险的 Request.Form 值

错误。关于更改 web.config 中的某些设置的讨论已经有很多问题，但我一直无法让这些工作。上次我修复它时，我 99% 确定我在这个生成的文件中更改了一些内容：

```
[DataContract(IsReference = true)]
[KnownType(typeof(Blog))]
[KnownType(typeof(Comment))]
public partial class Post
{
    public Post()
    {
        this.Comments = new HashSet<Comment>();
    }

    [DataMember]
    public int Id { get; set; }
    [DataMember]
    public string Title { get; set; }
    [DataMember]
    public System.DateTime DateCreated { get; set; }
    //[SOMETHING HERE??]
    [DataMember]
    public string Content { get; set; }
    [DataMember]
    public string Tags { get; set; }
    [DataMember]
    public int BlogId { get; set; }
    [DataMember]
    public virtual Blog Blog { get; set; }
    [DataMember]
    public virtual ICollection<Comment> Comments { get; set; }
} 
```

但我这辈子都不记得什么了，我不知道要在网上搜索什么词。

而且我知道编辑生成的代码是一件很愚蠢的事情，但我还没有想出如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:20:26.287

您正在寻找[`[AllowHtml]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowhtmlattribute.aspx)属性：

```
[AllowHtml]
[DataMember]
public string Content { get; set; } 
```

> 而且我知道编辑生成的代码是一件很愚蠢的事情，但我还没有想出如何解决这个问题。

问题是您将 WCF 域实体传入/传出视图，这是一种非常糟糕的设计方法。

正确的方法是使用视图模型。视图模型是您专门设计以满足视图要求的类，然后您只需将视图模型传递给视图。然后，您将在域模型和视图模型之间进行映射。[AutoMapper](http://automapper.org/)是简化此任务的绝佳工具。

# appharbor - 在 Appharbor 上存储用户凭据

> ID：11025803
> 
> 赞同：1
> 
> 时间：2012-06-14T02:14:18.023
> 
> 标签：appharbor

我需要在我的应用程序中存储用户凭据。我可以使用protectdata 存储和检索密码。但是，一旦我推送了我的应用程序的新版本，我就会失去凭据。似乎 appharbor 清理了 ProtectedData Store。

这种行为是故意的吗？有没有更好的方法将用户凭据存储在 appharbor. OAuth 不是一个选项，因为它是一个 ftp 帐户。

```
System.Security.Cryptography.ProtectedData 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:30:09.667

对本地实例文件系统的更改不会在 AppHarbor 上的部署中持久保存，因此您必须将数据存储在其他地方。我们通常建议使用 Amazon S3。您可以使用`System.Security.Cryptography.ProtectedData.Protect()`同一个 API 来加密写入那里的数据。这是一些示例代码：[protect bytes data .net](https://stackoverflow.com/questions/9250360/protect-bytes-data-net)

我对这个 API 不是很熟悉，但是如果您使用不同的用户帐户在多个 AppHarbor 实例上运行我们的应用程序，您可能会遇到麻烦。

# javascript - 如何在浏览器控制台中初始化 MongoDB -object db？

> ID：11025808
> 
> 赞同：0
> 
> 时间：2012-06-14T02:15:05.433
> 
> 标签：javascript, mongodb, initialization

假设我想`'db.things.insert({colors : ["blue", "black"]})'`在浏览器中执行。我可以在 Mongodb -shell 中执行它，但还不了解如何执行它：打开 Google Chrome 控制台，使用一些连接初始化 DB -object 并执行命令。是否存在一些插件？对不起，我对 MongoDB 完全陌生，试图用 Browser shell 快速测试一些东西。我该怎么做这样的初始化？

> **试验 0：也许使用 REST 接口？**
> 
> > 我已经启用了 REST `"$ echo 'rest=true' > /etc/mongodb.conf; $ sudo restart mongodb"`，在 Ubuntu 中工作。[更多关于这里](http://www.mongodb.org/display/DOCS/Http+Interface)的休息 ，还不确定这里是否需要，但也许用一些 POST/REST 方法我可以做初始化。
> 
> **试用 1：Oreilly 关于 MongoDB 和 50 Tips 的书（第 47 页）**
> 
> > 这本书有一些例子
> > 
> > ```
> > > db = connect ("ny1a:27017/foo")
> > > db = connect ("ny1a:27017/admin") 
> > ```
> > 
> > 所以现在
> > 
> > ```
> > > db=connect("localhost:27017/test")
> > ReferenceError: connect is not defined 
> > ```
> > 
> > 是的，因为我需要获取 `connect`-command，[这里](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell)有一些进一步的示例，我在哪里可以得到它？

*Ps 我在[这里](http://www.mongodb.org/display/DOCS/Advanced+Queries)学习本教程。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:12:06.240

您不能简单地从浏览器控制台访问 mongodb。您的浏览器是客户端，并且（据我所知）没有 javascript 客户端库。您将找到的任何 javascript 库很可能是用于 Node.js（服务器）的。

mongo 控制台是它自己的编译客户端类型。本机语言是 javascript，但这些命令仅适用于实际的 mongo 命令 shell。`connect`是 mongo 命令 shell 的命令。

启用 REST 会在您的 mongod 上启动一个端口，该端口将接受 REST http 通信。你在这里得到一个浏览器页面：`http://localhost:28017/` 这是一个显示数据的非常基本的页面，但你可以自己进一步运行查询。见[http://www.mongodb.org/display/DOCS/Http+Interface#HttpInterface-SimpleRESTInterface](http://www.mongodb.org/display/DOCS/Http+Interface#HttpInterface-SimpleRESTInterface)

请注意，REST 接口是只读的。你不能插入。

话虽如此，您需要一个适合您选择的语言的驱动程序。

# java - Java 数据库错误：java.sql.SQLException：Io 异常：错误的数据包类型

> ID：11025809
> 
> 赞同：0
> 
> 时间：2012-06-14T02:15:09.050
> 
> 标签：java, oracle

我随机收到此错误

```
java.sql.SQLException: Io exception: Bad packet type 
```

我做了一些研究，有人提出了一个解决方案：

> 为了纠正这个问题，我们必须确保一次只有一个执行线程通过相同的连接使用 JDBC 驱动程序，或者升级到更高版本的驱动程序。

谁能指导我如何确保一次只有一个执行线程使用 JDBC 驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:57:02.903

我们通过关闭preparedStatement 的连接而不是数据库连接本身解决了这个问题。

利用：

```
ps.getConnection().close(); 
```

代替 ：

```
conn.close(); 
```

# objective-c - 我的班级中只有少数项目正在显示？

> ID：11025812
> 
> 赞同：0
> 
> 时间：2012-06-14T02:15:17.350
> 
> 标签：objective-c, arrays, nslog

我一直在使用 Big Nerd Ranch 的 Objective-C 指南，但无法显示我创建的类中的所有项目。如需更多参考，请参阅第 17 章中关于股票的挑战。我知道这个问题还有其他问题，但我已经检查了所有其他问题的更正代码，问题仍然存在。出于某种原因，只显示了 Facebook 费用。这是我的工作： **StockHolding.h**

```
#import <Foundation/Foundation.h>

@interface StockHolding : NSObject
{
    float purchaseSharePrice;
    float currentSharePrice;
    int numberOfShares;
}

@property float purchaseSharePrice;
@property float currentSharePrice;
@property int numberOfShares;

- (float)costInDollars;
- (float)valueInDollars;

@end 
```

**StockHolding.m**

```
#import "StockHolding.h"

@implementation StockHolding

@synthesize purchaseSharePrice;
@synthesize currentSharePrice;
@synthesize numberOfShares;

-(float)costInDollars
{

    return numberOfShares*purchaseSharePrice;
}

-(float)valueInDollars
{

    return numberOfShares*currentSharePrice;
}

@end 
```

**主文件**

```
#import <Foundation/Foundation.h>
#import "StockHolding.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        StockHolding *apple, *google, *facebook = [[StockHolding alloc] init];

        [apple setNumberOfShares:43];
        [apple setCurrentSharePrice:738.96];
        [apple setPurchaseSharePrice:80.02];

        [google setNumberOfShares:12];
        [google setCurrentSharePrice:561.07];
        [google setPurchaseSharePrice:600.01];

        [facebook setNumberOfShares:5];
        [facebook setCurrentSharePrice:29.33];
        [facebook setPurchaseSharePrice:41.21];

         NSLog(@"%.2f.", [apple costInDollars]);
         NSLog(@"%.2f.", [google costInDollars]);
         NSLog(@"%.2f.", [facebook costInDollars]);

    }
    return 0;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:16:58.177

```
StockHolding *apple, *google, *facebook = [[StockHolding alloc] init]; 
```

这一行只分配了最后一个`facebook`变量，所以当您向它们添加项目时`apple`仍然`google`如此。`nil`

现在，由于 Obj-C 动态地将消息分派给对象，因此当您尝试使用或调用时将项目添加到`nil`变量时不会引发错误。`[google setNumberOfShares:12]``[apple costInDollars]`

尝试：

```
StockHolding *apple = [[StockHolding alloc] init], *google = [[StockHolding alloc] init], *facebook = [[StockHolding alloc] init]; 
```

# java - 如何在 Netbeans 中安装 Slick2d

> ID：11025813
> 
> 赞同：3
> 
> 时间：2012-06-14T02:15:46.160
> 
> 标签：java, installation, netbeans-7, slick2d

我一直在寻找相当多的东西，但我一直无法弄清楚如何在 Windows 上将 Slick2d 安装到 netbeans 7 中。我所做的每一次搜索都给我的项目带来了糟糕的结果和错误。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:21:49.157

你看够努力吗？

[http://ray3k.com/site/tutorials/tutorial-setup-slick-in-netbeans/](http://ray3k.com/site/tutorials/tutorial-setup-slick-in-netbeans/)

[http://wiki.netbeans.org/SlickSet](http://wiki.netbeans.org/SlickSet)

下载链接：[http ://slick.cokeandcode.com/downloads/slick.zip](http://slick.cokeandcode.com/downloads/slick.zip)

光滑的夜间构建：[https ://www.newdawnsoftware.com/hudson/view/Slick/job/Slick/lastSuccessfulBuild/artifact/Slick/dist/slick.zip](https://www.newdawnsoftware.com/hudson/view/Slick/job/Slick/lastSuccessfulBuild/artifact/Slick/dist/slick.zip)

此链接会警告您出现安全异常，因为它们使用了不受信任的证书。只需添加一个例外，您就可以访问该链接。

# perl - 不使用模块读取excel文件

> ID：11025815
> 
> 赞同：-3
> 
> 时间：2012-06-14T02:15:50.920
> 
> 标签：perl, excel

我可以在不使用任何模块的情况下读取 excel 文件吗？我试着像读取一个普通文件并打印二进制字符；也许是因为编码？

但读取 csv 文件工作正常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T02:24:27.737

Excel 文件是二进制文件，而 2007 年之前的格式显然很复杂。我相信`.xlsx`文件实际上是压缩的 XML，因此解压缩它们应该会产生人类可读的东西，但我从未尝试过。为什么你不想使用模块呢？

一些进一步的阅读，如果你有兴趣：

[http://joelonsoftware.com/items/2008/02/19.html](http://joelonsoftware.com/items/2008/02/19.html)
[http://en.wikipedia.org/wiki/Office_Open_XML_file_formats](http://en.wikipedia.org/wiki/Office_Open_XML_file_formats)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T08:36:36.007

*我可以在不使用任何模块的情况下读取 excel 文件吗？*

理论上是的。在实践中没有。

Excel XLS 文件是二进制文件中的二进制文件。第一步是从 OLE COM 文档容器中解析 Excel BIFF 数据。这些数据不一定按顺序排列。

然后您必须解析 Excel BIFF 数据，允许版本之间的差异、具有不同编码的共享字符串表以及以解析器不友好的方式映射大型数据记录的 CONTINUE 块。

Excel XLSX 格式更容易一些，因为它是 Zip 容器中的 XML 文件的集合。但是，如果您不使用模块，那么即使这样也会很痛苦。

处理 Excel 文件的 Perl 模块代表了数百个工时。期望投入类似数量的工作来避免它们。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T02:55:50.087

为什么你不能使用模块？

您可以尝试找出 Excel 电子表格的格式，为其编写代码，然后在您的程序中使用它。也许把它写成一个模块并提交给 CPAN。*等一等！*那里已经有这样的模块了！

CPAN 的全部目的是防止您不得不重新发明轮子。您需要阅读 Excel 电子表格，并且有人已经完成了艰苦的工作来弄清楚如何做到这一点，并免费提供给您。价值 40,000 美元¹，免费为您服务！CPAN 系统使安装模块相当简单。你运行`cpan`命令。没有真正的理由避免使用可以为您节省数百小时工作时间的模块。

而且，您*避免*使用哪种类型的模块？是所有模块，还是只是标准发行版中不包含的模块。我不想认为您不使用类似`File::Copy`或`Data::Dumper`仅仅因为它们是模块的东西，即使它们默认包含在大多数 Perl 发行版中。

* * *

¹想象一下，雇用一个团队编写代码来转换 Excel 文件，以便 Perl 程序可以读取该文件。他们必须弄清楚文件格式的来龙去脉，为各种边缘情况编写代码，并通过各种测试运行它以确保它确实有效。如果我们不包括图表、嵌入式内容和远程数据访问等内容，粗略估计大约需要 200 个工时，但这只是因为它实际上已经记录在案。

# opencv - 我可以重复使用从 2 个不同相机拍摄的同一场景的 2 个不同图像计算的单应矩阵吗？

> ID：11025816
> 
> 赞同：7
> 
> 时间：2012-06-14T02:15:55.900
> 
> 标签：opencv, 2d, coordinates, homography, correspondence

我正在尝试学习 OpenCV。我有一个关于单应性和对极几何的问题。

假设我使用 cvFindHomography() 函数计算了单应性，该函数使用两个静态图像的匹配特征点，使用两个相机从两个不同的视点拍摄。

如果我重用单应矩阵从camera2（left）拍摄的图像中检测camera 1（right）中的对应点是错误的吗（因为我知道左图的2d同质特征点在哪里，`x' = H.x`右图的2d对应同质特征在哪里？点并且是单应矩阵）其中camera1和camera2中的2d点不用于计算单应矩阵？`x'``x``H`

我要问的是我可以重用这两个相机的计算单应矩阵来找到任何不用于计算单应矩阵的图像的对应点吗？

当它曾经由固定图像确定时，我使用哪个图像是否重要？还是我每次都需要计算？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T14:44:16.100

只要相机不再移动且场景不变，您就可以使用单应性将点从一张图像投影到另一张图像。

我知道那些相机（已校准）会拍摄照片，然后您一直使用这两张照片。好吧，如果你计算单应性，那么你可以从两个图像中投影出你想要的所有点。当然，您会得到一些错误，但这是由于图像中的噪声和影响 findhomography 使用的线性方法的非线性。

如果您继续使用相机捕获图像，那么您必须为每对新图像再次计算单应性，因为您不知道*场景*将如何变化。

# dependencies - 您如何在 greenhopper 的用户故事下分配 Jira Issue-Type-Questn？

> ID：11025826
> 
> 赞同：1
> 
> 时间：2012-06-14T02:17:02.373
> 
> 标签：dependencies, jira, task, greenhopper

我一直在使用 JIRA 和 Greenhopper 来支持我们的 Scrum 方法。由于用户故事是要求，那么我如何能够跟踪问题类型“问题”并将其链接到 Greenhopper 中的用户故事，以便它也出现在任务板下？我希望发生这种情况，以便通过问题解决用户故事的任何依赖关系，而不是在用户故事中添加评论，有时会错过并且没有解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:23:20.033

最简单的方法是将问题作为子任务添加到故事中。这样您就可以轻松地在 Sprint 中跟踪它们。

# ruby-on-rails-3 - 在 ruby on rails 上安装 barby 条码生成

> ID：11025827
> 
> 赞同：3
> 
> 时间：2012-06-14T02:17:10.127
> 
> 标签：ruby-on-rails-3, barcode

在 rails 3.2 中使用了几个不兼容的条形码生成器 gems 后，我正在尝试使用[Barby](https://github.com/toretore/barby)。但我不知道如何安装它。不知道是否必须包含在 gemfile 中？还是作为插件安装？

自述文件没有提供有关它的信息，也没有提供 wiki。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-05T03:52:46.550

只是对于仍然对此感到困惑的人，您可以将它们戴上`Gemfile`，因为 Gem 已在[Ruby Gems](http://rubygems.org/gems/barby)`gem 'barby'`上列出。只是说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T02:40:20.747

明白了：`gem install barby`。这将安装 gem，对于安装包装器[has_barcode](https://github.com/dpickett/has_barcode)也很有用。我目前正在寻找如何使用它，但经历了安装过程。

# c# - 如何防止窗口标题栏上出现 Not Responding 消息？

> ID：11025829
> 
> 赞同：7
> 
> 时间：2012-06-14T02:17:15.590
> 
> 标签：c#, winforms, response

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T05:14:41.717

您需要使用 BackgroundWorker 以便耗时的任务将在单独的线程中异步运行。这将允许 Windows 多任务处理使 UI 响应。您应该使用等待光标或其他视觉指示器让用户知道您的应用程序正忙。

来自 MSDN [MSDN BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

> BackgroundWorker 类允许您在单独的专用线程上运行操作。下载和数据库事务等耗时的操作可能会导致您的用户界面 (UI) 在运行时似乎停止响应。当您需要响应式 UI 并且面临与此类操作相关的长时间延迟时，BackgroundWorker 类提供了一种方便的解决方案。
> 
> 要在后台执行耗时的操作，请创建一个 BackgroundWorker 并侦听报告操作进度的事件，并在操作完成时发出信号。您可以通过编程方式创建 BackgroundWorker，也可以从工具箱的“组件”选项卡将其拖到表单上。如果在 Windows 窗体设计器中创建 BackgroundWorker，它将出现在组件托盘中，其属性将显示在属性窗口中。
> 
> 要设置后台操作，请为 DoWork 事件添加事件处理程序。在此事件处理程序中调用您的耗时操作。要开始操作，请调用 RunWorkerAsync。要接收进度更新通知，请处理 ProgressChanged 事件。要在操作完成时接收通知，请处理 RunWorkerCompleted 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T02:19:48.723

您需要在后台线程上运行大型任务，以免锁定 UI（主）线程。

# python - “在字符串格式化期间并非所有 args 都转换了” Traceback

> ID：11025834
> 
> 赞同：0
> 
> 时间：2012-06-14T02:18:16.067
> 
> 标签：python, string, google-app-engine

cgi.escape 部分（如下）在开发服务器中抛出回溯，但是当我注释掉 cgi.escape 时，我在 RequestHandler 上收到语法错误。我正在关注 Google 的教程，其中包括 1 个表单的 2 个提交按钮，这对我来说不清楚，就像 /sign? 形成行动；我下面的表单是 1（不是 2）提交按钮，用于组合文本和单选字段表单，所以我不确定我是否正确地完成了最后一部分甚至是表单。我已经为这个工作准备了所有的进口。必须在数据存储区、电子表格或其他任何东西中获取这些用户表单值……非常感谢帮助。

```
Traceback (most recent call last):   Fil "/home/paul/Desktop/google_appengine/google/appengine/ext/webapp/_webapp25.py", line 701, in __call__
    handler.get(*groups)   File "/home/paul/Desktop/emot/index.py", line 39, in get
    cgi.escape(name))) TypeError: not all arguments converted during string formatting 
```

代码：

```
 name=self.request.get("name")
        self.response.out.write("""
        <form action="/sign?/s" method="post">
            <p>First Name: <input type="text" name="name"/></p>
            <p><input type="radio" name="mood" value="good">Good</p>
            <p><input type="radio" name="mood" value="bad">Bad</p>
            <p><input type="radio" name="mood" value="fair">Fair</p>
            <p><input type="submit"value="Process"></p>
        </form>
    </body>
</html>""" % (urllib.urlencode({"name": name}), 
                    cgi.escape(name)))       # < < < no string convert HERE 

class Info(webapp.RequestHandler):     # < < Syntax Error when ^ ^ is commented out.
    def post(self):
        name = self.request.get("name")
        visitor = Visitor(parent=info_key(name))
        visitor.content = self.request.get("mood")
        visitor.put()
        self.redirect("/?" + urllib.urlencode({"name": name}))

application = webapp.WSGIApplication([
    ("/", MainPage),            # < < v v Unsure about these...2 submits?
    ("/sign", Info)
], debug=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:00:38.250

这就是您遇到问题的地方。请注意，整个代码块都包含在函数调用中：

```
self.response.out.write("""
    <form action="/sign?/s" method="post">
        <p>First Name: <input type="text" name="name"/></p>
        <p><input type="radio" name="mood" value="good">Good</p>
        <p><input type="radio" name="mood" value="bad">Bad</p>
        <p><input type="radio" name="mood" value="fair">Fair</p>
        <p><input type="submit"value="Process"></p>
    </form>
</body>
</html>""" % (urllib.urlencode({"name": name}), 
                cgi.escape(name))) # self.response.out.write ends here 
```

现在让我们取出函数调用，因为这不是真正的问题。请注意，我还将删除将完成函数调用的额外尾括号。这就是您在注释掉最后一行时遇到语法错误的原因 - 您还注释掉了函数调用的右括号，并且解释器在完成之前不允许`def`创建新类。

这给我们留下了这个：

```
"""
<form action="/sign?/s" method="post">
        <p>First Name: <input type="text" name="name"/></p>
        <p><input type="radio" name="mood" value="good">Good</p>
        <p><input type="radio" name="mood" value="bad">Bad</p>
        <p><input type="radio" name="mood" value="fair">Fair</p>
        <p><input type="submit"value="Process"></p>
    </form>
</body>
</html>""" % (urllib.urlencode({"name": name}), 
                cgi.escape(name)) # one less bracket! 
```

我们剩下的是一个字符串格式化操作，格式为`"""string literal""" % (tuple, of, values)`. 要使此操作起作用，您需要为要包含在字符串中的每个值包含说明符（我发现“钩子”是一个更具描述性的术语）。这些总是以百分号开头，后面有一个或多个字符。[您可以在 Python Docs](http://docs.python.org/library/stdtypes.html#string-formatting-operations)中阅读有关它的更多信息，但一些简单的示例包括`%d`整数、`%s`字符串和`%f`浮点值。

您的代码示例有两个用于此操作的参数`urllib.urlencode({"name": name})`， 和`cgi.escape(name)`。但是，您的字符串不包含任何说明符（`%s`等），以便解释器了解您希望将它们放在哪里。

正如我所看到的，您有两个选择 - 您可以一起删除所有参数（但请确保为`self.response.out.write`调用留下一个尾括号！），或者在需要它们的地方放入钩子。

# memcached - memcached 在什么情况下会遇到分配失败

> ID：11025835
> 
> 赞同：0
> 
> 时间：2012-06-14T02:18:19.997
> 
> 标签：memcached, allocation

每个slab类至少有一个页面，当没有可用的内存分配时，它将驱逐“tails”列表中的项目。那么为什么它会运行到 MEMCACHED_MEMORY_ALLOCATION_FAILURE 状态呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:20:13.437

我认为这是一个 libmemcached 状态，而不是一个 memcached 状态。在任何情况下，当应用程序从底层分配器（malloc）请求内存并且 malloc 不返回堆内存时，都会发生这种情况。由于无法完成内存请求，您可能会收到这样的错误，因为应用程序将无法继续处理您的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T08:38:55.477

当客户端调用 libmemcached.libmemcached 抛出异常时会出现此错误，包括以下几种情况：

1 realloc、malloc、calloc

2 查看源代码段如下：

```
...
new_size= sizeof(char) * (size_t)((adjust * MEMCACHED_BLOCK_SIZE) + string->current_size);
if (new_size < need)
  return MEMCACHED_MEMORY_ALLOCATION_FAILURE;
... 
```

完全不可能发生

# java - 为什么Java在读取LinkedHashMap时会自动从String转换为Integer

> ID：11025837
> 
> 赞同：0
> 
> 时间：2012-06-14T02:18:45.037
> 
> 标签：java, string, integer, classcastexception, linkedhashmap

我的 Java 应用程序显示一些奇怪的行为，我无法找到解决方案。

此代码片段获取`LinkedHashMap`键和值均为类型的 a 的内容，`String`并将它们写入文本文件。`configWriter`是类型`PrintWriter`。

```
for (Map.Entry<String, String> entry : configMap.entireSet()) {

    configWriter.println(entry.getKey() + "=" + entry.getValue());
} 
```

地图被宣布为：

```
LinkedHashMap<String, String> configMap = new LinkedHashMap<String, String>(); 
```

它是通过使用`Scanner`该类从文本文件中读取标记来填充的。

映射中的一个值是 a`String`只包含数字（一个整数），但是当循环到达这个值时，它会抛出一个`ClassCastException`说法，即不能从`Integer`to 转换`String`。这很有意义，但值的类型是字符串。

有没有办法强制 Java 将此值保留为`String`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T02:30:52.820

几乎可以肯定的是 rawtypes 正在某个地方被使用，并且有一种`Integer`潜入地图的方式。

识别an插入地图的最简单方法是将初始化*替换*为`Integer``configMap`

```
Map<String, String> configMap = Collections.checkedMap(
  new LinkedHashMap<String, String>(), String.class, String.class); 
```

`String`如果将 a 以外的内容插入到地图中，这实际上会引发异常。我个人不会在生产代码中使用它，但这可能是“消除”错误的最简单方法；你会得到一个异常和一个堆栈跟踪，以确定`Integer`插入的确切位置。

就目前而言，使用类型擦除实现泛型的方式意味着*实际上*没有什么可以阻止将非`String`值插入到映射中。编译器会做出一些努力来阻止它，但原始类型和遗留代码可以绕过它。但是，使用`Collections.checkedMap`会强制解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T02:49:08.823

Louis Wasserman 已经解释了您的问题的可能原因。

我只想指出，您对问题的思考存在一些缺陷。

> 为什么Java在读取LinkedHashMap时会自动从String转换为Integer

首先，您不能从 a`String`转换为`Integer`。使用 Java 引用类型，您只能将对象转换为该类型的实例或该类型的子类型。该`String`类型不是 的子类型`Integer`，因此 JVM 的操作语义*禁止*这样的转换 - 如果您编写了尝试执行此操作的可编译代码，您将获得运行时异常。

其次，在`LinkedHashMap`... 或任何其他集合类中没有任何内容可以*将*元素/键/值实例从转换`String`为 ，`Integer`而无需您告诉它。行为良好的 (Java) API 不会做那种事情。

这让我们回到了路易斯的诊断——某些东西（例如你的代码）已经将该`Integer`对象添加为一个值。如果您使用原始类型或抑制/忽略“未经检查的转换”警告，就会发生这种情况。

# python - 使用 selenium webdriver 上传文件时抛出 WebDriverException

> ID：11025838
> 
> 赞同：0
> 
> 时间：2012-06-14T02:18:47.377
> 
> 标签：python, selenium, upload, webdriver

我想使用以下 python 代码上传文件：

```
driver.find_element_by_id("fileFieldName-file").send_keys("D:\\manual.pdf") 
```

该代码在 Firefox 中运行良好，但在 IE 和 Chrome 中失败。例外情况如下：

`WebDriverException: Message: '{ "status" : 404, "sessionId" : "<no session>", "value" : "Command not found: POST /session/e56793e2-79f9-4bb9-820e-91090ccee083/file" }'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:55:17.747

我自己找到答案。 [http://code.google.com/p/selenium/issues/detail?id=3736](http://code.google.com/p/selenium/issues/detail?id=3736) 是selenium的bug。解决方法如下： 1.在C:\Python27\Lib中找到“webelement.py”文件\site-packages\selenium-2.21.2-py2.7.egg\selenium\webdriver\remote 2.在“webelement.py”中找到函数“_upload” 3.修改函数“_upload”的代码，添加条件在异常处理部分。

```
def _upload(self, filename):
    fp = StringIO()
    zipped = zipfile.ZipFile(fp, 'w', zipfile.ZIP_DEFLATED)
    zipped.write(filename)
    zipped.close()
    try:
        return self._execute(Command.UPLOAD_FILE, 
                        {'file': base64.encodestring(fp.getvalue())})['value']
    except WebDriverException as e:
        if "Unrecognized command: POST" in e.__str__():
            return filename
        elif "Command not found: POST" in e.__str__():
            return filename
        else:
            raise e 
```

**强文本**

# ruby - 如何使用 Rest Client POST 二进制数据？

> ID：11025839
> 
> 赞同：1
> 
> 时间：2012-06-14T02:18:58.707
> 
> 标签：ruby, http, post, binary-data, rest-client

我正在尝试使用 Rest Client 从 HTML 表单中读取 wav 或 amr 类型的音频文件。我有在 PHP 中执行此操作的代码。

```
$filename = $_FILES['f1']['name'];

public function getFile($filename) {
      if (file_exists($filename)) {
          $file_binary = fread(fopen($filename, "r"), filesize($filename));
          return $file_binary;
       } else {
          throw new Exception("File not found.");
       }
  } 
```

我需要将此代码转换为 Ruby，但我在这样做时遇到了麻烦，因为我是 Ruby 的相对新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:07:45.383

根据[RestClient 的回购](https://github.com/archiloque/rest-client/blob/master/lib/restclient.rb)：

```
def self.post(url, payload, headers={}, &block)
    Request.execute(:method => :post, :url => url, :payload => payload, :headers => headers, &block)
  end 
```

这段代码只是发送一个文件：

```
file = File.open('path/to/file.extension', 'r')
RestClient.post("your_url_to_the_endpoint", file) 
```

所以我假设你仍然需要做的就是设置标题：

```
begin 
file = File.open(params[:f1], "rb") 
url = "...." 
response = RestClient.post url, file, {:Authorization => "Bearer #{@access_token}", :Accept => 'application/json', :Content_Type => 'audio/wav'} 

rescue => e 
@error = e.message 
ensure 
return erb :speech 
end 
```

# c - 文件返回垃圾，但写入正确

> ID：11025845
> 
> 赞同：3
> 
> 时间：2012-06-14T02:21:29.217
> 
> 标签：c, file, fopen, fwrite

我正在将结构写入文件，但它返回垃圾。这是我的代码：

```
ptFile = fopen("funcionarios.dat", "ab+");
fwrite(&novoFunc, sizeof(strFunc), 1, ptFile); 
```

struct novoFunc 的值，在 fwrite 之前和之后都不是垃圾。但是，当我返回文件值时：

```
ptFile = fopen("funcionarios.dat", "rb+");
[...]

fseek(ptFile, i*sizeof(strFunc), SEEK_SET); //on the loop, i goes from 0 to total structs
fread(&funcionario, sizeof(strFunc), 1, ptFile);

printf("Code: %d; Name: %s; Address: %s; CPF: %d; Sales: %d\n", funcionario.codigo, funcionario.nome, funcionario.endereco, funcionario.cpf, funcionario.numVendas); 
```

知道为什么吗？代码运行良好，我不记得做过重大更改。

提前致谢

编辑：结构定义

```
typedef struct func{

    int codigo;
    char nome[50];
    char endereco[100];
    int cpf;
    int numVendas;
    int ativo;

} strFunc; 
```

Edit2：它变得更奇怪了：它在 linux 上运行良好（使用 netbeans 和 gcc 编译器），但在 windows 上却不行（devcpp 和代码块）。好吧，整个代码在这里：

[http://pastebin.com/XjDzAQCx](http://pastebin.com/XjDzAQCx)

函数 cadastraFucionario() 注册用户，当我使用 listaFuncionarios() 列出所有注册数据时，它返回垃圾。这是 listaFuncionarios() 返回的打印结果：

[http://img715.imageshack.us/img715/3002/asodfadhf.jpg](http://img715.imageshack.us/img715/3002/asodfadhf.jpg)

对不起，代码不是英文的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:56:59.573

你说：“代码运行良好，我不记得做过重大更改。”

当它工作正常时，它会将一些结构写入您的文件中。

也许稍后它仍然可以正常工作，并且它在文件末尾附加了一些额外的结构。原始数据仍保留在文件的开头。因此，当您读取文件的开头时，您读取的是原始数据。也许。

你确定你读垃圾？您确定您不只是读取旧数据吗？

在您的代码中：

```
ptFile = fopen("funcionarios.dat", "ab+"); 
```

附加对于某些目的是正确的，但对于其他目的则不然。你需要 wb+ 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:45:49.297

这是您的函数 retornaIndice 中的两个问题。

```
while(!feof(ptFile)){
    fseek(ptFile, sizeof(strFunc)*i, SEEK_SET);
    fread(&tmpFunc, sizeof(strFunc), 1, ptFile); 
```

您没有检查 fread 的结果。读完最后一条记录后，还没有达到eof，所以你将尝试再读一次。该读取将到达 eof 并返回 0，但您并未检查该 0，因此您将使用垃圾数据并在下次 while 语句测试时退出循环。

```
if(codigo != 0 && tmpFunc.ativo){                   
    if(tmpFunc.codigo == codigo){
        return i;                               
    } 
```

如果此时检测到问题，则不要关闭 ptFile。泄露的句柄不应导致将垃圾数据写入文件，但也不会激发信心。

您的其他一些功能也有相同的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T01:02:37.387

这：

> 它在 linux 上运行良好……但在 windows 上却不行

是一个大红旗。Windows 具有不同于“二进制”文件的“文本”文件。在 Linux 和其他 Unix 上，没有区别。

您的源代码中有两行突出：

```
fopen("funcionarios.dat", "rb+"); 
```

然后

```
fopen("funcionarios.dat", "r+"); 
```

That is, sometimes you open the file in "binary" mode, and sometimes in "text" mode. Make sure you always open any file in "binary" mode (that is, with the `b` in the mode string) if you ever intend to read or write non-text data.

# .net - VSTO 4 MSI 无法在虚拟机上安装

> ID：11025847
> 
> 赞同：1
> 
> 时间：2012-06-14T02:21:58.753
> 
> 标签：.net, visual-studio-2010, vsto, windows-installer, virtual-machine

这是来自详细日志记录的更详细的错误代码

> MSI (s) (C4:FC) [17:44:17:683]：执行操作：ComponentRegister(ComponentId={39A436F1-525F-4D9C-95E5-01D682F0FB25},KeyPath=<\Microsoft.VisualStudio.Tools.Applications。 AddInAdapter.v9.0,version="9.0.0.0",publicKeyToken="b03f5f7f11d50a3a",processorArchitecture="MSIL",fileVersion="9.0.30729.4130",culture="neutral",State=3,,Disk=1,SharedDllRefCount =0,BinaryType=0) MSI (s) (C4:FC) [17:44:17:683]: MSCOREE 未加载从 system32 MSI (s) (C4:FC) [17:44:17:683 加载副本]: 程序集错误：指定 DLL 中未定义函数。
> 
> MSI (s) (C4:FC) [17:44:17:683]: 注意: 1: 1935 2: 3: 0x8002802F 4: 5: CreateAssemblyNameObject 6: Microsoft.VisualStudio.Tools.Applications.AddInAdapter.v9.0, version="9.0.0.0",publicKeyToken="b03f5f7f11d50a3a",processorArchitecture="MSIL",fileVersion="9.0.30729.4130",culture="neutral" 调试：错误 2908：无法注册组件 {39A436F1-525F-4D9C-95E5 -01D682F0FB25}。MSI (s) (C4:FC) [17:44:19:227]：产品：Microsoft Visual Studio 2010 Tools for Office Runtime (x86) -- 安装程序在安装此软件包时遇到意外错误。这可能表明此软件包有问题。错误代码为 2908。参数为：{39A436F1-525F-4D9C-95E5-01D682F0FB25}, ,
> 
> MSI (s) (C4:FC) [17:44:19:227]：执行操作：ComponentRegister(ComponentId={B25064D6-77BB-4B1B-B4CC-F8EDF50C7B6D},KeyPath=<\Microsoft.VisualStudio.Tools.Applications。 AddInAdapter.v10.0,version="10.0.0.0",publicKeyToken="b03f5f7f11d50a3a",processorArchitecture="MSIL",fileVersion="10.0.31119.0",culture="neutral",State=3,,Disk=1,SharedDllRefCount =0,BinaryType=0) 安装程序在安装此软件包时遇到意外错误。这可能表明此软件包有问题。错误代码为 2908。参数为：{39A436F1-525F-4D9C-95E5-01D682F0FB25}、MSI (s) (C4:FC) [17:44:19:243]: Assembly Error:Function not defined in specified动态链接库。
> 
> MSI (s) (C4:FC) [17:44:19:243]: 注意: 1: 1935 2: 3: 0x8002802F 4: 5: CreateAssemblyNameObject 6: Microsoft.VisualStudio.Tools.Applications.AddInAdapter.v10.0, version="10.0.0.0",publicKeyToken="b03f5f7f11d50a3a",processorArchitecture="MSIL",fileVersion="10.0.31119.0",culture="neutral" 调试：错误 2908：无法注册组件 {B25064D6-77BB-4B1B-B4CC -F8EDF50C7B6D}。MSI (s) (C4:FC) [17:44:20:226]：产品：Microsoft Visual Studio 2010 Tools for Office Runtime (x86) -- 安装程序在安装此软件包时遇到意外错误。这可能表明此软件包有问题。错误代码为 2908。参数为：{B25064D6-77BB-4B1B-B4CC-F8EDF50C7B6D}

我尝试重新安装**.NET 4 客户端配置文件**，然后重新安装**VSTO 4**，但仍然没有任何收获。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T11:36:56.340

这已在另一个论坛中报道。显然，如果机器中没有安装 Office 2010 的组件，特别是可以忽略该消息。我当然发现，在我只有 Excel 2013 的情况下，插件没有问题，尽管出现错误消息，它仍然可以正常工作。

# python-3.x - 在 Windows 7 32 位上安装 easy_install

> ID：11025849
> 
> 赞同：1
> 
> 时间：2012-06-14T02:22:09.030
> 
> 标签：python-3.x, easy-install

试图找出如何在安装了 Python 3.2.3 的 Windows 7 32 位机器上安装或找到 easy_install。

在另一台装有 Windows 7 64 位 Python 3.2.3 的机器上，easy_install 自动安装到 c:\python32\Scripts 中。

[我在这里](http://peak.telecommunity.com/DevCenter/EasyInstall#installing-easy-install)找到了一些关于如何安装 easy_install 的说明，这使我进入了[这个页面](http://pypi.python.org/pypi/setuptools#windows)，该页面告诉我要安装 easy_install，我需要使用提供的 .exe 安装 setuptools（找不到）。另外，我想知道 setuptools 与 easy_install 有什么关系？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:24:42.767

`easy_install`包含在分发中。在 Windows 上安装它的最简单方法是从此页面：

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#distribute](http://www.lfd.uci.edu/~gohlke/pythonlibs/#distribute)

# c# - sql查询特定日期间隔

> ID：11025851
> 
> 赞同：0
> 
> 时间：2012-06-14T02:22:13.573
> 
> 标签：c#, .net, sql, database

```
id   name         mydate                   
1     co        2011-02-10 07:25:02  
2     Carl      2011-02-10 07:26:02
.
.
.
10000   Caroline  2011-02-18 22:44:08 
```

我有一个这样的数据库，我想搜索一个指定的时间间隔，比如（1 小时）。例如，我想在所有日期的所有记录中查看 07 AM 和 08 AM 之间的记录。然后，我将使用每天的早上 7 点和早上 8 点进行进一步处理。我怎么能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:27:36.317

您可以使用 BETWEEN 关键字。

```
SELECT * FROM A WHERE mydate between '1/1/56 07:00:00' and '12/31/57 08:00:00' 
```

这不是 C# 特定的。如果您使用 LINQ 它是这样的：

```
from mt in ctx.MyTable where mydate >= datestart and mydate <= stopdate select mt 
```

在这种情况下，ctx 是上下文，startdate 是较低的日期，stopdate 是较高的日期。

如果您想使用 ADO.NET 读取结果：

```
var cn = new SqlConnection("paste your code here");

SqlCommand command = new SqlCommand(); 
cmd.CommandText = "SELECT * FROM A WHERE mydate between '1/1/56 07:00:00' and '12/31/57 08:00:00'";
cmd.Connection = cn;

try
{
    cn.Open();
    SqlDataReader reader = cmd.ExecuteReader();

    while (reader.Read())
    {
        // up to you
    }
    reader.Close();
}
finally
{
    cn.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T02:36:28.340

```
SELECT [mydate] 
    FROM [table] 
    WHERE DATEPART(hh,[mydate]) >= 6 
        AND DATEPART(hh,[mydate]) <= 8 
    Order by DATEPART(hh,[mydate]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T02:51:22.937

```
SELECT * FROM table 
WHERE DATEPART(hh, mydate) = @start
OR (DATEPART(hh, mydate) = @end AND DATEPART(mi, mydate) = 0)
ORDER BY mydate 
```

`DATEPART`是一个 SQL 函数，它在给定日期值的情况下获取日期的指定部分。在上面的 sql 脚本中，@start 和 @end 是开始时间的整数值，在 7AM 到 8AM 的情况下，@start = 7 和 @end = 8。

本质上，您将从表中获取所有记录，这些记录的日期包含小时分量等于 7 或日期分量等于 8 且分钟分量等于 0。这应该获取 7:00 之间的所有记录上午至上午 8:00（含）。

# android - Android 上的 AS3 Air 3.3 应用程序总是在 4 秒后崩溃

> ID：11025852
> 
> 赞同：0
> 
> 时间：2012-06-14T02:22:13.807
> 
> 标签：android, air, crash, android-4.0-ice-cream-sandwich, flashdevelop

我正在运行 android 4.0.3 的 HTC Sensation 上进行测试。我正在使用 FlashDevelop 4.0.3 和 Air Mobile AS3 App 模板进行发布。

应用程序所做的只是显示一个矩形，使用：this.graphics.beginFill(0x00FF00); this.graphics.drawRect(0, 0, 100, 100); 就这样我可以看到它实际上发布了一些东西。

如果我发布到桌面，应用程序运行正常，但是当我切换到将其发布到手机时，我面临的问题是应用程序在手机上发布并运行，但只有几秒钟.. 通常大约 4秒，然后它崩溃了。

真正奇怪的是，它在大约一周前运行良好。我不确定从那以后发生了什么变化，但是是的，它从今天早上开始发生，我尝试了我能想到的一切......包括从应用程序并且还对我的手机进行了出厂重置...似乎没有任何帮助...

有没有其他人有这个问题？或者对可能导致它的原因或如何解决它有任何想法？任何帮助将不胜感激。

干杯

* * *

更新：似乎将渲染模式更改为“自动”而不是“直接”会停止崩溃，这很好，但是如果您需要对 stage3d 内容使用直接，这并没有真正帮助。还有谁有相同的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:32:56.700

您可以发布您的应用程序的源代码吗？我也有 HTC Sensation，但我的固件版本是 2.3.6。测试它会很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:40:10.913

我刚刚将我的 XPERIA ARC 更新为 ICS，现在我也遇到了 AIR 应用程序的问题。似乎该应用程序没有获得点击/触摸交互。一些交互式对象（如 TextInput）获得了应有的点击和焦点，但按钮不起作用。而且我正在使用最新的 Flex/AIR sdks……但我很确定我们在 Adob​​e/Apache 手中，直到他们更新 AIR 并进行修复。

# matlab - 如何在向量中添加更多单元格

> ID：11025856
> 
> 赞同：0
> 
> 时间：2012-06-14T02:23:16.880
> 
> 标签：matlab, vector, for-loop

给定代码：

```
function[p] = addMoreCells(v,n)
% adding zero at the beginning 
k = length(v);
if (k ~= n)
    p = zeros(1,n);
    for m = (n-1):-1:(n-k)
        p(m+1) = v(k-(n-m-1));
    end
else
    p = v;
end
end 
```

我用单元格构建了一个新数组`n`并将其放在那里`0`，稍后我添加了其他单元格`v`。

它有一个内置的命令可以代替吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:34:32.570

您现在拥有的代码确实过于复杂。在 Matlab 中总是尽量避免 for 循环，如果你可以对向量而不是元素进行操作，效率会更高。

这样的事情怎么样？你可以很容易地把它变成一个函数：

```
>> r = rand(1,5) % example vector

r =    
    0.9575    0.9649    0.1576    0.9706    0.9572

>> [zeros(1,4) r] % add zeros at the beginning

ans =    
         0    0    0    0    0.9575    0.9649    0.1576    0.9706    0.9572 
```

# zend-framework2 - ZF2：Zend Framework 2 完整 URL，包括主机名

> ID：11025858
> 
> 赞同：13
> 
> 时间：2012-06-14T02:23:43.417
> 
> 标签：zend-framework2

在我看来，我需要绘制完整的 URL。像这样：

```
http://hostename.com/default/url 
```

当我尝试使用时，`$this->url('default', array(1,2,3))`我只得到`/index/get/`. 是否有任何 Zend 方法来获取主机名或者我必须使用它`$_SERVER['HTTP_HOST']`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-19T12:20:31.713

您可以使用`force_canonical`路由器上的选项。所有路由器选项都进入 url 助手的第三个参数：

```
url($route, $params, $options) 
```

所以你可以这样：

```
$this->url('myroute', array('id' => 123), array('force_canonical' => true)) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-07-03T22:26:19.460

我发现这篇[文章](http://codingexplained.com/coding/php/zend-framework/create-full-urls-in-zf2-views)有一些有趣的方式：

**1)**不带参数使用空数组：

```
// Using a route with the name "register" and the route "/register"
echo $this->url('register', array(), array('force_canonical' => true)); 
// Output: http://mydomain.com/register 
```

**2）**注意以下之间的区别：

```
echo $this->serverUrl(); 
// Output: http://mydomain.com 
```

和

```
// Current URL: http://mydomain.com/register
echo $this->serverUrl(true); 
// Output: http://mydomain.com/register 
```

**3)**从路线出发

```
// The "register" route has the following route: /register
echo $this->serverUrl($this->url('register')); 
// Output: http://mydomain.com/register 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-14T09:14:28.627

有一个 Zend\View\Helper\ServerUrl 可以在 zend 视图中创建完整的 url。在您的视图模板中尝试以下代码。

```
<?php echo $this->serverUrl()?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-24T08:56:10.283

If you want to set base URL globally, you can do it using onBootstrap method:

```
$e->getApplication()->getMvcEvent()->getRouter()->setBaseUrl($baseUrl); 
```

In this case Navigation helpers would also use it.

To fetch current base URL use ServerUrl helper as described [in this thread](https://stackoverflow.com/questions/22079460/base-url-of-zend-framework-2):

```
$serverUrl = $e->getApplication()->getServiceManager()->get('ViewHelperManager')->get('ServerUrl');
$baseUrl = $serverUrl->__invoke(); 
```

# c# - 在数组中比较

> ID：11025859
> 
> 赞同：3
> 
> 时间：2012-06-14T02:23:49.393
> 
> 标签：c#

我的代码有问题。我正在自学 C#，本章的挑战之一是提示用户输入 10 个数字，将它们存储在一个数组中，而不是要求额外的 1 个数字。然后程序会说额外的数字是否与数组中的数字之一匹配。现在我下面的内容确实有效，但前提是我输入了一个小于 10 的比较数，即数组的大小。

我不知道如何解决它。我不确定如何进行比较。我首先尝试了一个 FOR 循环，这种循环很有效，但是通过循环并显示了与所有 10 个数字的比较，所以你会得到 9 行否！和 1 行 Yes!。我休息一下；它停止计算所有 10 但如果我输入数字 5 进行比较，那么我会得到 4 行否！和 1 个是的！。下面是我可以让它可靠地工作的唯一方法，但前提是数字不超出数组的范围。

我可以看到为什么当数字大于 10 时会出现错误，我只是不知道用什么来比较它，但仍然允许用户输入任何有效的整数。任何帮助都会很棒！

```
 int[] myNum = new int[10];
        Console.WriteLine("Starting program ...");
        Console.WriteLine("Please enter 10 numbers.");

        for (int i = 0; i <= 9; ++i)
        {
            Console.Write("Number {0}: ", i + 1);
            myNum[i] = Int32.Parse(Console.ReadLine());
        }

        Console.WriteLine("Thank you.  You entered the numbers ");
        foreach (int i in myNum)
        {
            Console.Write("{0} ", i);
        }

        Console.WriteLine("");
        Console.Write("Please enter 1 additional number: ");
        int myChoice = Int32.Parse(Console.ReadLine());
        Console.WriteLine("Thank you.  You entered the number {0}.", myChoice);

        int compareArray = myNum[myChoice - 1];

        if (compareArray == myChoice)
        {
            Console.WriteLine("Yes!  The number {0} is equal to one of the numbers you previously entered.", myChoice);
        }
        else
        {
            Console.WriteLine("No!  The number {0} is not equal to any of the entered numbers.", myChoice);
        }

        Console.WriteLine("End program ...");

        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:39:30.777

你在正确的轨道上——你想遍历 myNum 中的数组并将每个元素与变量 myChoice 进行比较。如果您不想打印数组的每个元素是否匹配，请创建一个新变量并使用它来跟踪您是否找到了匹配项。然后在循环之后，您可以检查该变量并打印您的发现。你通常会使用一个 bool 变量——开始时将其设置为 false，然后在找到匹配项时设置为 true。

```
bool foundMatch = false;
for (int i = 0; i < 10; i++) {
    if (myNum[i] == myChoice) {
        foundMatch = true;
    }
}
if (foundMatch) {
    Console.WriteLine("Yes!  The number {0} is equal to one of the numbers you previously entered.", myChoice);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T02:36:19.527

如果您包含 System.Linq 命名空间（或者如果您将 myNum 的类型更改为实现[ICollection<T>](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx)的类型，例如`List<T>`），您可以使用`myNum.Contains(myChoice)`来查看该值是否`myChoice`与`myNum`. 如果在数组中找到指定的值`array.Contains`，则返回一个布尔值，否则返回。`true``false`

您可以更新代码以使用它，如下所示：

```
 //int compareArray = myNum[myChoice - 1]; // This line is no longer needed

    if (myNum.Contains(myChoice))
    {
        Console.WriteLine("Yes!  The number {0} is equal to one of the numbers you previously entered.", myChoice);
    }
    else
    {
        Console.WriteLine("No!  The number {0} is not equal to any of the entered numbers.", myChoice);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T02:31:42.633

如果您正在寻找绝对介于 1 和 10 之间的数字，那么在使用之前

```
int compareArray = myNum[myChoice - 1]; 
```

检查它是否超过 10 的值。例如：

```
while(myChoice > 10)
{
    Console.Write("Please choose a number less than or equal to 10: ");
    myChoice = Int32.Parse(Console.ReadLine());
} 
```

将其放入`while`循环而不是`if`标签的好处意味着，当用户输入另一个数字时，`myChoice`将重写 的值并与之进行比较。如果他们输入超过 10 的数字，它会一直响应`Please choose a number less than or equal to 10.`，直到他们输入的数字小于或等于 10：` 然后，您的程序将继续。

但是，如果要将其与数组进行比较，而不是进行固定数字比较，请考虑以下`while`循环：

```
while(myChoice > myNum.Length)
{
    Console.Write("Please choose a number less than or equal to {0}: ", myNum.Length);
    myChoice = Int32.Parse(Console.ReadLine());
} 
```

这将适用于任何大小的数组，而无需更改`while`循环内容。通过使用这个系统，你可以确保你不会得到`IndexOutOfBounds`异常，只要你在使用它作为索引时减去 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T02:42:34.130

您正在寻找比较最终的第 11 个值并试图确定它是否在 10 个先前条目的数组中？

尝试：

```
for(int i = 0; i < array.length - 1; i++;)
{
    If(array[i] == input)
        return true;
}

 return false; 
```

您应该能够弄清楚如何完全自己实现这一点，因为您确实想将其作为练习来完成。

编辑：如果有人想检查或以正确的语法完成它，请继续。我通过电话发布了这个粗略的轮廓。

# html - 如何防止我的锚标签直通？

> ID：11025861
> 
> 赞同：3
> 
> 时间：2012-06-14T02:24:48.327
> 
> 标签：html

我有我的跨度标签：

```
<span style="text-decoration:line-through" > Hello World <a href="http://www.yahoo.com">Yahoo</a> </span> 
```

如您所见，我已在跨度上应用了直通。但这也会导致锚标签上的直通。如何防止锚标记上的直通。我不想攻击我的锚标签。

**注意：**请不要让我将我的锚标签移到跨度标签之外！如果我能做到这一点，我就不会问这个问题了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:26:13.037

[来自 [CSS text-decoration 属性不能被子元素覆盖](https://stackoverflow.com/questions/4481318/css-text-decoration-property-cannot-be-overridden-by-child-element)]

[文本装饰规范](http://www.w3.org/TR/CSS21/text.html#lining-striking-props)状态：

> 后代元素上的 'text-decoration' 属性不能对祖先元素的装饰产生任何影响。

[text-decoration-skip ，如链接问题中所述，最新版本的 Chrome 和](http://www.w3.org/TR/2010/WD-css3-text-20101005/#text-decoration-skip0)[Firefox](https://developer.mozilla.org/en/Mozilla_CSS_support_chart)都不支持

* * *

我不知道你是否可以接受，但由于下面的解决方案不起作用，这可能是你唯一的方法：

```
<span>
   <span class="strikethrough">Hello </span>
   <a href="#">World!</a>
</span>​

.strikethrough {
   text-decoration: line-through;
} 
```

*嵌套 span 元素是有效的。* [嵌套跨度标签在 XHTML 中可以吗？](https://stackoverflow.com/questions/1078127/are-nested-span-tags-ok-in-xhtml)

* * *

**不起作用**：

默认情况下，该属性将由子级继承。如果您不想这样做，请覆盖它。

```
span > a {
   text-decoration: none;
   /* or perhaps 
   text-decoration: underline;
   */
} 
```

这将确保作为 span 元素的直接后代出现的所有锚元素不会有删除线。

# c# - C#线程处理

> ID：11025863
> 
> 赞同：-1
> 
> 时间：2012-06-14T02:25:25.970
> 
> 标签：c#, winforms

程序.cs

```
using (Login login = new Login())
{ 
    login.ShowDialog(); //Close this form after login is correct in login form button_click
}
if (isValiduser == true) //Static variable created in application to check user
{           
     Application.Run(new MainInterface());
} 
```

登录表单点击事件

```
private void btnLogin_Click(object sender, EventArgs e)
{
  if(isValiduser == true)
   {
      this.Close();
   }
 else
   {
      //else part code
   }
} 
```

根据此代码，当我们在登录表单中单击登录事件并且 isValiduser 返回 true 时，Program.cs 将运行`MainInterface`表单。但实际上，这段代码没有运行`Application.Run(new MainInterface())`；那么，谁能告诉我这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:11:40.650

你的代码`Program.CS`应该是

```
 using (Login login = new Login())
    { 
         login.ShowDialog(); //Close this form after login is correct in login form button_click
         if (isValiduser == true) //Static variable created in application to check user
         {           
            Application.Run(new MainInterface());
         }
    } 
```

你的登录点击事件应该是这样的

```
private void btnLogin_Click(object sender, EventArgs e)
        {
          if(isValiduser == true)
           {
              //this.Close();
              this.DialogResult = DialogResult.OK;
           }
         else
           {
              //else part code
           }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:01:24.483

问题是你没有`isValiduser`像`true`你的代码那样设置。所以它会更新运行`MainInterface`形式。

假设您在 Program.cs 文件中将名为 isValiduser 的静态变量定义为

```
static class Program
{
    public static bool isValiduser = false;

    [STAThread]
    static void Main()
    {
      // rest of your code 
```

然后当您单击登录按钮时，您需要根据登录状态设置此变量。您可能需要为此使用单独的方法。

```
private void btnLogin_Click(object sender, EventArgs e)
{
    // call validate user method and set value to `isValiduser`
    Program.isValiduser= IsValidUser("username", "password"); // here for testing i'm set it as true 
    if(Program.isValiduser== true)
    {
      this.Close();
    }
    else
    {
      //else part code
    }
} 
```

你可以有方法来验证用户

```
private bool IsValidUser(string name, string pw)
{
    return true; // impliment this method 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T04:03:52.590

我怀疑正在发生的是，当您到达控件时，`this.Close()`该控件返回到主线程并且应用程序结束（如果之后没有进一步的代码）。即你的程序从 main 的第一行开始到最后一行结束。因此，如果您先打开登录表单，则需要在关闭登录表单之前打开 MainInterface 表单。

# ruby-on-rails-3 - 设计authenticate_user！POST / DELETE REST 调用失败

> ID：11025864
> 
> 赞同：1
> 
> 时间：2012-06-14T02:25:32.680
> 
> 标签：ruby-on-rails-3, devise

我正在使用 Devise 通过标准实现对用户进行身份验证。一旦用户登录，他/她就可以调用使用相同控制器的 REST API（因此也可以使用 Devise）。控制器如下所示：

```
class FriendController < ApplicationController
  before_filter :authenticate_user!
  def create
    ...
  end
  def destroy
    ...
  end
  def index
    ...
  end
end 
```

我得到了 index 操作来使用 authenticated_user!。在这种情况下，如果用户通过了身份验证，index 将返回带有 200 状态码的数据。如果用户未通过身份验证，则`index`返回`Unauthorized`40x 状态代码。

但是，当我调用`create`或`destroy`通过 POST 和 DELETE 调用时，它会自动将我从应用程序中注销并返回 40x Unauthorized 错误。有人见过这个吗？有任何想法吗？

这是路线.rb

```
 resources :users do
    resources :friends, only: [:index, :friended_me, :create, :destroy]
  end 
```

例如，这是否需要在`devise_scope :users`块内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:31:51.830

我弄清楚为什么会这样。在`ApplicationController`，如果`protect_from_forgery`启用。API 调用`POST/PUT/DELETE`将检查`auth_token`. 如果不提供，它将失败。但是，对于`GET`，如果未提供，则如果用户已登录，该操作仍将继续。

解决方法是使用`resource.reset_authentication_token!`覆盖后生成的 auth_token`SessionsController#create`

# c++ - 在 C++ 中写入注册表时出错

> ID：11025865
> 
> 赞同：0
> 
> 时间：2012-06-14T02:25:34.680
> 
> 标签：c++, registry

我正在尝试对注册表进行一些更改，在尝试了其他一些事情之后，我现在正在尝试导入注册表文件。我确信我做对了 - 直到我收到错误“无法导入路径\reg_file.reg：指定的文件不是注册表脚本。您只能从注册表编辑器中导入二进制注册表文件。”

我一直在导出、使用记事本编辑并重新导入注册表文件以进行测试——但我不知道如何从 c++ 创建它们。

我放置在 reg 文件中的内容是从与我想做的事情相关的所有 HKEY_CURRENT_USER 记录中复制的（在我完成了新条目应该完成的步骤后，我手动导出了这些记录）。所以他们应该在正确的地方......

我用了

```
input_stream >> reg_entry; //from original file
output_stream << reg_entry; 
```

写入文件 - 因为它看起来不是二进制的（并且必须根据我从注册表中读取的内容进行处理）。

我如何使这项工作？我找不到解决方案，老实说，注册表让我害怕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:35:24.663

您不应该使用输入和输出运算符（>> 和 <<）来读写二进制文件。改用读写接口。

```
ifstream fin("1.reg", ios::in|ios_base::binary);
ofstream fout("2.reg", ios::out|ios_base::binary);

if (fin.is_open() && fout.is_open())
{
    fin.seekg(0, ios::end);
    size_t len = fin.tellg();
    if (0 != len)
    {
        fin.seekg(0, ios::beg);    

        char* buf = new char[len];        
        fin.read(buf, len);        

        // Change the content here

        fout.write(buf, len);

        delete []buf;
    }
}

fin.close();
fout.close(); 
```

# java - Java ProcessBuilder 和空白参数

> ID：11025869
> 
> 赞同：0
> 
> 时间：2012-06-14T02:26:33.820
> 
> 标签：java, noclassdeffounderror, processbuilder

我知道以前有人问过这个问题，但没有一个解决方案对我有用。基本上我需要执行一个包含空格的命令。这是我到目前为止所拥有的：

```
Process p = Runtime.getRuntime().exec(new String[]{"java", "-Xms512m", "-Xmx1024m", "-cp", jars, natives, mc}); 
```

空格来自`"jars"`and `"natives"`，因为文件路径中有空格（`"Application Support"`因为我在 Mac 上）

从我所见，这应该可以工作，但是它给了我一个`NoClassDefFoundError`，如果我将其复制并粘贴到终端窗口中，它就可以正常工作。空格也是这样转义的：`"Application\ Support"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:58:21.060

您应该能够创建一个`String`来解析到`Runtime`其中包含空格的 。您几乎肯定需要用单引号或双引号将空格内容括起来......

这使用单引号显示它`String`，双引号环绕您的变量......

```
String command = "java -Xms512m -Xmx1024m -cp \"" + jars + "\" \"" + natives + "\" \"" + mc + "\"";
Process p = Runtime.getRuntime().exec(command); 
```

您也可以通过在现有代码中将您的内容用双引号括起来来做到这一点......

```
Process p = Runtime.getRuntime().exec(new String[]{"java", "-Xms512m", "-Xmx1024m", "-cp", "\""+jars+"\"", "\""+natives+"\"", "\""+mc+"\""}); 
```

您需要在任何空白内容周围加上单引号或双引号，以便将其解释为单个值。

您还提到您收到一条`NoClassDefFoundError`消息 - 如果仍然是这种情况，请发布完整的堆栈跟踪，以便我们可以看到错误在抱怨什么，因为听起来可能是其他原因导致了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:14:21.053

使用[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)。

```
ProcessBuilder pb = new ProcessBuilder("java", "-Xms512m", "-Xmx1024m", "-cp", jars, natives, mc);
Process p = pb.start(); 
```

你甚至可以把它放在一行中：

```
Process p = new ProcessBuilder("java", "-Xms512m", "-Xmx1024m", "-cp", jars, natives, mc).start(); 
```

这应该适用于空格。

# javascript - 怎么会！[] 不是真的？

> ID：11025870
> 
> 赞同：5
> 
> 时间：2012-06-14T02:26:37.940
> 
> 标签：javascript

当我测试这个时，我只是在玩 nodejs 和 chrome 的控制台：

```
[] == true // false
![] == true // false
!![] == true // true 
```

怎么会？是不是错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T02:34:10.337

请参阅[ECMAScript 标准](http://www.ecma-international.org/publications/standards/Ecma-262.htm)：

> ### 11.4.9 逻辑非运算符 (!)
> 
> 产生*式 UnaryExpression* : **!** *UnaryExpression*的评估如下：
> 
> 1.  令*expr*为计算*UnaryExpression*的结果。
> 2.  让*oldValue*为 ToBoolean(GetValue( *expr* ))。
> 3.  如果*oldValue*为**true**，则返回**false**。
> 4.  返回**真**。
> 
> ### 9.2 ToBoolean
> 
> 根据表 11，抽象操作 ToBoolean 将其参数转换为布尔类型的值：
> 
> *   未定义→假
> *   空→假
> *   布尔 → 结果等于输入参数（无转换）。
> *   Number → 如果参数为 +0、-0 或 NaN，则结果为 false；否则结果为真。
> *   如果参数是空字符串（其长度为零），则结果为假；否则结果为真。
> *   对象→真

数组是一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T02:28:30.197

它与浏览器如何处理 JS 中的隐式转换有关。

* * *

作为`[]`一个空数组，它的计算结果为`false`：

```
[] == true
false == true 
```

* * *

但是，`not`使用它，会将对象转换为值为 的布尔值`false`：

```
![] == true
false == true 
```

不过，`boolean([])`会回来`true`的。

* * *

但是，`not`这样做会将其转换为值为 的布尔值`!false`：

```
!![] == true
!false == true
true == true 
```

* * *

这就是为什么除非需要，否则不推荐隐式转换的原因：

```
"1" == true
true == true

"1" === true
false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T02:37:16.863

`[] == true`是假的，因为`[]`不等于`true`，就像`"some string"`也不等于一样`true`。

`![] == true`为假，因为在条件语句中使用时`[]` *计算*为真值：

```
if([]) console.log('[]');
if(![]) console.log('![]');
// the result will be '[]' because [] will evaluate to true
// in a conditional even though it doesn't equal true 
```

另一件可以帮助你思考的事情`![] == false`是`true`。

`!![] == true`为真，因为`!!`根据条件语句中的真假将任何内容转换为真或假值。因此`if(obj)`，并且`if(!!obj)`将始终具有相同的结果。

# javascript - 给定时间戳，如何按天/周/月显示 timeago

> ID：11025874
> 
> 赞同：0
> 
> 时间：2012-06-14T02:27:16.067
> 
> 标签：javascript, jquery

我正在寻找一种方法来根据数据库中的 iso 时间戳显示类似 timeago 的输出，例如：2008-07-17T09:24:17Z

输出应该是这样的：

*   今天使用
*   周二使用
*   上周二使用
*   一个多月前用过

使用 jQuery timeago 插件获得的东西更简单、更静态：http: [//timeago.yarp.com/](http://timeago.yarp.com/)

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:28:05.960

您可以将时间戳转换为日期对象并将其与本地（或其他）日期对象进行比较。然后根据差异对响应进行分类：

```
// Expects ISO8601 long format, no decimals of seconds
function localDateFromUTC(s) {

  var x = s.split(/[-\s:tz]/i);
  var d = Date.UTC(x[0], x[1], x[2], x[3], x[4], x[5], 0);
  return new Date(d);
}

function aboutTime(s) {

  var r = Math.round;
  var now = new Date();
  var then = localDateFromUTC(s);
  var diff = r((now - then)/1000); // Convert to seconds

  if (diff < 10) return 'a few seconds ago';
  if (diff < 50) return 'less than a minute ago';
  if (diff < 70) return 'about a minute ago';
  if (diff < 35000) return 'about ' + r(diff/60) + ' minutes ago';
  if (diff < 8.64e4) return 'about ' + r(diff/3600) + ' hours ago';
  if (diff < 6.048e5) return 'about ' + r(diff/8.64e4) + ' days ago';
  // and so on
  return 'about ' + r(diff/6.048e5) + ' weeks ago';

}

alert(aboutTime('2008-07-17T09:24:17Z')); // about 200 weeks ago 
```

关于如何将数字转换为“about”字符串（例如，具有与“about”时间相关的属性的对象，然后将数字转换为属性名称），您可以更加聪明。

# html - 如何放一个 在另一个里面 使用绝对位置时在中间（垂直）？

> ID：11025881
> 
> 赞同：0
> 
> 时间：2012-06-14T02:29:34.193
> 
> 标签：html, center

我是一个没有经验的 HTML 学习者，所以请多多包涵。

`<div>`即使调整大小，我也试图让(#banner) 留在浏览器的中心；所以我想我需要另一个`<div>`作为整个浏览器的#container。

`#banner`需要将其宽度扩展 100%，所以我不得不使用绝对位置。

尽管我已经在 stackoverflow 中查看了其他几篇文章 - 我不知道如何针对我的特定案例实施他们的解决方案。

HTML

```
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
</head>

<body>
<div>
   <div id="banner">
   </div>
</div>
</body>
</html> 
```

CSS

```
#container{

}
#banner{
    background-color: #e51400;
    height: 400px;
    position: absolute;
    left: 0px;
    right: 0px;
    font-weight: bold;
    text-align: center;
    vertical-align:middle;
} 
```

这基本上是我想要完成的 ![在此处输入图像描述](../Images/08b20467de09510579f95b74d01b5ed4.png)

除了#banner 之外，我真的需要另一个`<div>`才能把它放在中心吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:52:23.390

好吧，由于我得到了大量的回复，我能够回答我自己的问题。无论如何，多亏了[这个页面](http://www.kirkdesigns.co.uk/vertically-and-horizontally-center-div-using-css) ，我能够在这种情况下将代码调整为我需要的方式。

这是我的最终代码：

CSS

```
 #container {
  position: absolute;
  top: 50%;
  left: 0px;
  width: 100%;
  overflow: visible;
  background-color:black;
}

#banner {
  height: 400px;
  position: absolute;
  top: -200px; //needs to the negative value of half the height
  left: 0px;
  right: 0px;
  background-color:red;
} 
```

# php - 正则表达式网站路径

> ID：11025884
> 
> 赞同：1
> 
> 时间：2012-06-14T02:30:05.783
> 
> 标签：php, regex

我想我有一个不寻常的问题。我正在开发一个项目（在 PHP / MySQL 中），用户可以提供一个写成正则表达式的路径，并且该站点将加载一些基于此的内容。比如说，有人提供了这个正则表达式：

```
articles\/([0-9]+)$ 
```

当有人访问[http://example.com/articles/3](http://example.com/articles/3)时，它将加载该特定页面及其相关内容和设置。所有这些路径都存储在 MySQL 数据库中。当用户访问该站点时，它会根据正则表达式数据库检查 URL，并找到要显示的适当内容。

这是我的问题：用户可以将任意数量的正则表达式路径与任意数量的其他页面相关联，并且它们可以与任何其他正则表达式非常相似。我的直接想法是根据 URL 的开头（当然是在 example.com/ 之后）缩小搜索范围，并查看所有选项，直到找到完全匹配的内容。不过，我很担心，因为在最坏的情况下，它可能会在找到完全匹配之前查看几十个甚至更多选项……这会浪费宝贵的资源。

有人对我如何改进系统有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:49:48.950

如果该正则表达式匹配号是您的表中的主键，那么性能甚至不应该是一个问题（应该需要几分之一秒），假设您的网站中的文章少于一百万。

还使用缓存来提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:50:11.437

我唯一的建议是将匹配结果缓存在另一个 mysql 表中。搜索将很快，因为它的索引，然后如果没有找到匹配，通过你的正则表达式并应用它们。删除或更新正则表达式时，请记住删除与该正则表达式关联的缓存。

# java - 针对库构建但不将其包含在 jar 中

> ID：11025886
> 
> 赞同：1
> 
> 时间：2012-06-14T02:30:46.550
> 
> 标签：java, maven, maven-3

我正在将现有代码库转换为通过 Maven 构建。我正确设置了我的依赖项，但 Maven 实际上将所有已编译的依赖项文件包含在生成的 jar 中。我希望能够选择包含哪些依赖项，哪些依赖项仅链接但不包括在内。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:40:05.377

您想查看此链接并阅读“依赖范围”

[http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

# tsql - T-SQL - 如何使用 FMTONLY 从存储过程中以编程方式获取列数据

> ID：11025888
> 
> 赞同：2
> 
> 时间：2012-06-14T02:30:58.873
> 
> 标签：tsql, stored-procedures, metadata

Using`set FMTONLY on;`允许我在 SSMS 中*查看*从存储过程返回的列，但是如果我想以编程方式在过程中获取这些列名并对其进行处理，该怎么办？

基本上，我想要实现的是这样的......

```
declare @columns nvarchar(max) = (
    select name + ', '
    from sys.columns
    where object_id = OBJECT_ID('my_stored_procedure')
    for xml path('')); 
```

显然，这是行不通的。T-SQL 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:48:57.787

`OPENQUERY`是一种可能的解决方案，使用`FMTONLY OFF`. 将 exec 结果加载到虚拟表中，并将其列结构构建为字符串。下面以 sproc 形式演示此方法。假设分析的每个存储过程仅返回一个行集。

```
USE AdventureWorks
GO

CREATE PROCEDURE MySprocCols
@ExecStr NVARCHAR(1000)
AS
SET FMTONLY OFF;
SET NOCOUNT ON;

IF EXISTS (
    SELECT 1
    FROM sys.objects o
    INNER JOIN sys.schemas s ON s.schema_id=o.schema_id
    WHERE o.[type]='U'
    AND s.name='dbo'
    AND o.name='MyCols'
)
DROP TABLE dbo.MyCols;

DECLARE @SQL NVARCHAR(1000)
SET @SQL = '
SELECT TOP(0) * 
INTO dbo.MyCols
FROM OPENQUERY(MyServer,'''+@ExecStr+''')';
EXEC SP_EXECUTESQL @SQL;

DECLARE     @Cols VARCHAR(MAX) = '';
DECLARE     @Del varchar(10) = ',';

SELECT      @Cols += @Del + c.name + ''
FROM        sys.objects o
JOIN        sys.schemas s           ON s.schema_id=o.schema_id
JOIN        sys.columns c           ON c.object_id=o.object_id
WHERE       o.[type]='U'
            AND s.name='dbo'
            AND o.name='MyCols'
ORDER BY    c.column_id

SET @Cols = STUFF(@Cols,1,LEN(@Del),'');
PRINT @Cols;
GO

EXEC dbo.MySprocCols 'exec AdventureWorks.dbo.uspGetBillOfMaterials 746,''''9/9/2000''''';
--                          ^Must specify DB name here                    ^ Double-esc ^ all embedded single quotes

-- If you get an error like this:
--Msg 7411, Level 16, State 1, Line 2
--Server 'MyServer' is not configured for DATA ACCESS

-- ..you will first need to enable 'Data Access' through the following Surface Area Config command:
--exec sp_serveroption [MyServer],'Data Access','TRUE' 
```

示例执行结果：

`ProductAssemblyID,ComponentID,ComponentDesc,TotalQuantity,StandardCost,ListPrice,BOMLevel,RecursionLevel`

# javascript - 如何获取当前 iscroll 项目的 id？

> ID：11025889
> 
> 赞同：0
> 
> 时间：2012-06-14T02:31:06.300
> 
> 标签：javascript, jquery, iscroll

当项目进入视口时，我想获取当前 iscroll 项目的 id。

例如：如果元素“G”出现在视图中，我怎样才能得到它的 id。这是我的html代码：

```
<div id="wrapper">
  <ul>
    <li id='a'>A</li>
    <li id='b'>B</li>
    <li id='c'>C</li>
    <li id='d'>D</li>
    <li id='e'>E</li>
    <li id='f'>F</li>
    <li id='g'>G</li>
   </ul>
</div> 
```

还有我的 js： var myScroll = new iScroll('wrapper');

谁能帮我？提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T12:47:11.140

```
var myScroll = new iScroll("wrapper", {
    hScroll : false,
    vScroll : true,
    snap : 'li',
    momentum : true,
    hScrollbar : false,
    vScrollbar : false,
    onScrollEnd: function() {
        var elementIndex = Number(this.currPageY);
        var scrollerElem = $("#wrapper").children()[0];
        var itemId = $(scrollerElem)[0].children[elementIndex].id;
        console.log(itemId);
   }
});
// Hope This Helps 
```

# iphone - 暂停后如何恢复 performSelector 方法？

> ID：11025895
> 
> 赞同：2
> 
> 时间：2012-06-14T02:32:40.437
> 
> 标签：iphone, cocos2d-iphone, resume

几天来我一直在查看堆栈溢出，但没有看到我的问题的答案。我的主要游戏场景中有几种方法被调用

```
[self performSelector:@selector(MethodName) withObject:nil afterDelay:.1]; 
```

当我离开游戏并回来时，看起来我所有的方法都会同时运行。我认为这是因为延迟时间是在后台计算的，但我不明白如何在 cocos2d 中纠正这个问题。我以为我不需要用 cocos2d 中的暂停/恢复功能来处理 NSTimers？我在这里缺少什么简单的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:01:51.603

你可以使用 cocos-2d 调度器来解决这个问题。请参阅以下代码：

```
 [className schedule: @selector(selectorName) interval:2]; 
```

当您使用 : 暂停游戏时， `[[CCDirector sharedDirector] pause];`此计时器将暂停。当您使用 : 恢复游戏时，`[[CCDirector sharedDirector] resume];`它也会恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:14:49.657

您还可以创建一系列操作来进行延迟的单个方法调用。

```
id delay = [CCDelayTime actionWithDuration: yourDuration];
id call = [CCCallFunc actionWithTarget:yourTarget selector:yourSelector];
id sequence = [CCSequence methodOne: delay two: call];
[someNode runAction:sequence]; 
```

# javascript - Raphael js，如何静态高度条的每个值

> ID：11025900
> 
> 赞同：1
> 
> 时间：2012-06-14T02:33:41.103
> 
> 标签：javascript, jquery, charts, raphael, graphael

据我们所知。g.Raphael bar 基本上使用选项制作并渲染到 SVG 对象，并且 bar 高度将反映每个输入的值。

但是如果有任何选项或方法可以静态化每个高度像素的值

例如像这样：

```
var each_px = 10;
el.bars.value.h = each_px; 
```

结果将是：

如果 value = 30，则此条形图的高度将为 300px。

有人帮忙吗？谢谢。

# c++ - HBase 上的 Thrift 是否有任何性能基准？

> ID：11025901
> 
> 赞同：5
> 
> 时间：2012-06-14T02:33:43.337
> 
> 标签：c++, performance, benchmarking, hbase, thrift

我有一个可以将大量数据写入 hbase 的系统。系统用c++编写，发现hbase有其他语言的thrift接口。

我的问题是，

1.  HBase 上的 Thrift 是否有任何性能基准？

2.  与 java native api 相比，最劣势是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T22:31:18.710

我推荐最近关于这个主题的两篇博客文章：

1.  [HBase + Thrift 性能第 1 部分](http://blog.thisisfeifan.com/2012/06/hbase-thrift-performance-test.html)
2.  [HBase + Thrift 性能第 2 部分](http://blog.thisisfeifan.com/2012/06/hbase-thrift-performance-test-2.html)

这两篇文章给出了使用 Thrift 和 HBase 的详细性能测量。

# jquery - 为什么 Stellar.js 中的元素不动？

> ID：11025906
> 
> 赞同：7
> 
> 时间：2012-06-14T02:34:26.510
> 
> 标签：jquery, html, css

我在标题中有 3 个圆圈，当通过 stellar.js 滚动时，它们会以不同的速度下降；不幸的是，他们甚至不动。它们都有位置属性（绝对）；此外，我已将 应用于`data-stellar-ratio`适当的标签。为什么 stellar.js 不起作用？更进一步，如何对 jQuery 进行测试才能知道它是否只是飞行员错误？

**HTML**

```
<div id="companyInfo" >
    <div class="circlefront" data-stellar-ratio="1.2"></div>
    <div class="circlemiddle" data-stellar-ratio="1.8"></div>
    <div class="circlerear" data-stellar-ratio="3"></div>
    <div class="infoWrapper">
      <h1>Towing, you can't do it without a truck, i have a truck</h1>
      <p>Id abunum ta inte publicae adhui senterem praties tantiena quitas vis, factum destus. Loca vehebus; et? Ti. Upionem, sil tala morbit ina, nique confendum tati et acepsen ihilin sula audactorips, fatur ia consign arisulos inatuis.</p>
    </div>
  </div> 
```

**CSS**

```
section#company div#companyInfo {
  height: 24em;
  line-height: 3em;
  margin: 0 auto;
  color: #fff;
}
section#company div#companyInfo div.infoWrapper {
  width: 960px;
  margin: 5em auto;
  text-align: center;
}
section#company div#companyInfo div.infoWrapper h1 {
  font-size: 2em;
}
section#company div#companyInfo div.infoWrapper p {
  line-height: 1.2em;
  font-size: 1.125em;
}
section#company .circlefront {
  background: rgba(255, 255, 255, 0.7);
  width: 500px;
  height: 500px;
  -webkit-border-radius: 50%;
  -moz-border-radius: 50%;
  position: absolute;
  top: 300px;
  left: 400px;
}
section#company .circlemiddle {
  background: rgba(255, 255, 255, 0.5);
  width: 250px;
  height: 250px;
  -webkit-border-radius: 50%;
  -moz-border-radius: 50%;
  position: absolute;
  top: 100px;
  left: 200px;
}
section#company .circlerear {
  background: rgba(255, 255, 255, 0.3);
  width: 100px;
  height: 100px;
  -webkit-border-radius: 50%;
  -moz-border-radius: 50%;
  position: absolute;
  top: 350px;
  right: 100px;
} 
```

**jQuery**

```
<script src="asset/js/libs/jquery.stellar.min.js"></script> 
<script type="text/javascript">

$(function(){
            $.stellar({
                horizontalScrolling: false,
                verticalOffset: 0,
            });
        });
</script> 
```

*资源* [stellar.js](http://markdalgleish.com/projects/stellar.js/docs/) [使用 stellar.js 的教程](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T11:26:05.507

我刚刚保存了您的网站并围绕您的代码进行了播放。在我看来一切都很好，但仍然存在一些问题。所以，我删除了你所有的脚本标签，并从 Stellar 演示中添加了 jQuery 和 Stellar，它工作正常。

There is only one bug I found, but I don't know that is the reason for this behaviour. There is a extra comma after `verticaloffset:0`.

```
$(function(){
    $.stellar({
        horizontalScrolling: false,
        verticalOffset: 0, /* Remove this comma at the end */
    });
}); 
```

# java - AndroidAPI.metadata() 为空。如何解决？

> ID：11025908
> 
> 赞同：0
> 
> 时间：2012-06-14T02:34:59.747
> 
> 标签：java, android, dropbox-api

我一直在谷歌搜索，很多人似乎有同样的问题，但似乎没有人有解决方案，所以我在这里问，因为这是我解决这个问题的最后希望。我需要列出我的应用程序文件夹中的所有文件（我的 aspp 不使用完整的 Dropbox 模式）。我得到了这个片段并尝试了几个小时，但无论我做什么，它总是抛出一个 NullPointerException。我什至尝试过使用参数，但没有运气。

我该如何解决这个问题？这真的是ICS问题吗？我在运行 4.0.3 自定义 ROM 的手机中运行它。

片段如下：

```
 try {
        Entry entries = mDBApi.metadata("/", 0, null, true, null);
        for (Entry e : entries.contents)
        {
            if (!e.isDeleted)
            {
                Log.i("Is Folder",String.valueOf(e.isDir));
                Log.i("Item Name",e.fileName());
            }
        }
    } catch (DropboxException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch(NullPointerException e)
    {
        Log.i("Pointer", "Null pointer");
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:16:16.820

没关系哈哈。我将该代码放在 onCreate() 上，但细节很少：mDAPi 初始化位于该代码块下方，因此出现 NullPointerException。

哈哈，我觉得好傻。

# java - 将文件/目录导入 IJavaProject - Eclipse JDT

> ID：11025909
> 
> 赞同：0
> 
> 时间：2012-06-14T02:35:02.273
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

所以我已经能够从我的 Eclipse 插件中成功生成一个 IJavaProject，现在我想将包添加到这个 IJavaProject。这些包位于文件系统上，由用户选择。我创建了两个文件夹，“bin”和“src”。

我希望能够将文件（特别是包含包的目录）添加到我的项目中，就像在 Eclipse 中将文件拖放到项目中一样。

我将如何以编程方式将这些文件调整为 Java 模型格式，以便可以将它们添加到我的 IJavaProject 中？如果我什至只能将 .java 文件读入模型，那就太好了。

我在想也许它与 IClasspath 有关，但我真的找不到任何关于它的信息。但是，我可能会忽略它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:10:55.667

通过 API 的一些搜索，我找到了一个解决方案。

您可以通过调用从项目中创建一个包：

（在某处宣布......）

```
IFolder srcFolder = myJavaProject.getProject().getFolder("src"); 
```

假设您已经在项目中创建了合适的文件夹“src”。

```
IPackageFragment frag = myJavaProject.getPackageFragmentRoot(srcFolder)
    .createPackageFragment("mypackage",false, null);
IFile newFile = ((IFolder)frag.getResource)).getFile(name);
FileInputStream fis = new FileInputStream(new File("myFile.java");
newFile.create(fis, false, null); 
```

您不必将文件声明为 ICompilationUnits 或类似的东西，因为如果您将 java 源文件添加到已声明为包的元素，那么它会自动将该源文件识别为 Java 模型的一部分，也就是ICompilationUnit 的实例。

# ruby-on-rails - 您如何在 Ruby on Rails 中的表单中传递标签标记值？

> ID：11025919
> 
> 赞同：1
> 
> 时间：2012-06-14T02:36:12.270
> 
> 标签：ruby-on-rails

我有一个表单，其中包含我想在提交帖子上传递给我的控制器的标签值。现在，帖子中的参数仅包含来自 input 和 radio_button 标签的值。如何在我的表单中包含标签标签中的值？

这是我的代码的简化视图：

```
 = form_for :user, :url => create_user_path do  |f|
    = f.label :name, "Name: #{@widgit.name}"
    = f.submit 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T02:47:04.190

使用隐藏字段；标签只是文本，所以不发送。

# sql - SQL 检查类似项目不止一次

> ID：11025924
> 
> 赞同：2
> 
> 时间：2012-06-14T02:36:43.347
> 
> 标签：sql, join

模式

```
Movie(title, year, director, budget, earnings)
Actor(stagename, realname, birthyear)
ActedIn(stagename, title, year, pay)
CanWorkWith(stagename, director) 
```

寻找多次使用的电影名称（SQL Robot DEATH MACHINE 2001、2002、2039）

```
SELECT M.title
FROM Movie A
LEFT JOIN Movie M ON M.title = A.title AND A.year <> A.year
WHERE M.title IS NULL 
```

因此，当它找到另一个已在不同年份使用的标题时，它将显示电影标题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:36:44.193

假设 SQL 2008r2 并且电影基于 Title,Year,Director 是唯一的，那么：

```
;with cte as (
    Select *, count(*) over(partition by Title) dups
    From movie
)
Select * 
From cte
Where dups> 1 
```

返回已多次使用的所有电影标题。如果你想限制在同一年的同名电影，只需将其添加到partition by即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T02:43:40.787

```
SELECT
    title
FROM
    Movie
GROUP BY
    title
HAVING
    COUNT(*) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:45:28.903

```
Select M.Title
From Movie As M
Where Exists    (
                Select 1
                From Movie As M1
                Where M1.Title = M.Title
                    And M1.Year <> M.Year
                ) 
```

# android - 安卓软键盘怎么没有响应EditText？

> ID：11025927
> 
> 赞同：6
> 
> 时间：2012-06-14T02:36:53.097
> 
> 标签：android, android-fragments, android-edittext, android-softkeyboard

我在 TabManager 中有一个 SherlockFragmentActivity 和一个 SherlockFragment。在这个片段中，我在 LinearLayout 中有 RadioButtons、CheckBoxes、一个 Button 和一个 EditText。按下 EditText 时，键盘有时不响应。

在 2.1 AVD 中，键盘响应不一致，在 4.0 AVD 中，键盘根本没有响应，而在设备上，键盘响应不一致。有时按下其他对象会激活显示键盘的功能。

这是 EditText 的 XML：

```
 <EditText       android:id="@+id/EditText1"
                    android:layout_width="100dp"
                    android:layout_height="wrap_content"
                    android:inputType="number"
                    android:text="20" > 
```

我对不一致的活动感到困惑，而不是它在 4.0 AVD 上不起作用。任何关于为什么会发生这种情况的建议或显示键盘的方式都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T03:24:09.103

您可以为您的edittext注册一个焦点侦听器并在获得焦点时打开软键盘：

```
edit_Text.setOnFocusChangeListener(new OnFocusChangeListener() {
@Override
public void onFocusChange(View v, boolean hasFocus) {
    if(hasFocus){
        ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE))
.showSoftInput(edit_Text, InputMethodManager.SHOW_FORCED);
    }else
        Toast.makeText(getApplicationContext(), "lost the focus", 2000).show();
}
}); 
```

**编辑：**
对于`emulator`，我认为它不能保证。真的我没有任何方式以编程方式出现软键盘。有时它会出现，有时不会。在 android 4.0.3 的模拟器中，你可以在通知栏中看到一个符号出现的软键盘：
![在此处输入图像描述](../Images/3793595ea2a9bd2a353567ed97ac224c.png)

看：
[处理EditText焦点的事件](https://stackoverflow.com/questions/7397391/event-for-handling-the-focus-of-the-edittext)
[强制软键盘打开](https://stackoverflow.com/questions/2479504/forcing-the-soft-keyboard-open)

# javascript - blockUI 在 Internet Explorer 上不起作用

> ID：11025928
> 
> 赞同：1
> 
> 时间：2012-06-14T02:37:05.767
> 
> 标签：javascript, jquery, jquery-plugins, jquery-blockui

```
<script type="text/javascript">
    $(document).ajaxStop($.unblockUI);  
    $(document).ready(function(){
        $('#viewSOA').click(function(){
            $.blockUI({message:'<h3>Loading,Please wait...</h3>'});
            location.reload();
        });
    });
</script> 
```

我正在使用这个脚本来显示 blockUI。当我在 Firefox 或 Chrome 中测试时，它可以工作。但是当我在 Internet Explorer 中单击 viewSOA 链接时，它不起作用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-31T12:31:05.347

只是避免`location.reload();`

尝试这个：

```
<script type="text/javascript">
    $(document).ajaxStop($.unblockUI);  
    $(document).ready(function(){
        $('#viewSOA').click(function(){
            $.blockUI({message:'<h3>Loading,Please wait...</h3>'});
        });
    });
</script> 
```

这对我有用。

# c# - 调用 MembershipProvider 方法的正确方法？

> ID：11025929
> 
> 赞同：1
> 
> 时间：2012-06-14T02:37:13.283
> 
> 标签：c#, asp.net, membership-provider

在我的 CreateUserWizard 上，我正在调用其他属性，当我调用 GetUser() 时，我收到：

*“已经有一个打开的 DataReader 与此命令关联，必须先关闭”*

Registration.aspx 的代码隐藏：

```
 NCCMembershipUser currentUser = (NCCMembershipUser)Membership.GetUser();
        Guid id = (Guid)currentUser.ProviderUserKey;

        ...assigning control values to membership values...

        try
        {
            NCCMembershipProvider u = (NCCMembershipProvider)Membership.Provider;
            u.UpdateUser(currentUser);
        } 
```

我不应该使用 GetUser 来访问属性吗？

这是 GetUser 方法：

```
 public override MembershipUser GetUser(string username, bool userIsOnline)
    {
        SqlConnection conn = new SqlConnection(connectionString);
        SqlCommand cmd = new SqlCommand("SELECT UserID," +
            " Email," +
            " Comment," +
            " PasswordQuestion," +
            " IsApproved," +
            " LastActivityDate," +
            " LastLoginDate," +
            " LastPasswordChangedDate," +
            " CreationDate," +
            " IsLockedOut," +
            " LastLockedOutDate," +
            " UserSalutation," +
            " UserFirstName," +
            " UserLastName," +
            " UserPosition," +
            " UserCompany," +
            " UserCompanyType," +
            " UserCompanyTypeOther," +
            " UserAccountType," +
            " UserAddress1," +
            " UserAddress2," +
            " UserCity," +
            " UserStateProv," +
            " UserPostal," +
            " UserCountry," +
            " UserWebsite," +
            " UserPhone," +
            " UserPhoneExt," +
            " UserFax," +
            " UserIP," +
            " UserIPLastLogin," +
            " IsSubscribed," +
            " LikeAreaRugs," +
            " LikeCarpeting," +
            " LikeCoverings," +
            " LikeComponents," +
            " LikeHotel," +
            " LikeAccessories" +
            " FROM Users WHERE Email = @Email AND ApplicationName = @ApplicationName", conn);

        cmd.Parameters.Add("@Email", SqlDbType.NVarChar, 128).Value = username;
        cmd.Parameters.Add("@ApplicationName", SqlDbType.NVarChar, 255).Value = m_ApplicationName;

        NCCMembershipUser u = null;
        SqlDataReader reader = null;

        try
        {
            conn.Open();

            reader = cmd.ExecuteReader();

            if (reader.HasRows)
            {
                reader.Read();
                u = GetUserFromReader(reader);

                if (userIsOnline)
                {
                    SqlCommand updateCmd = new SqlCommand("UPDATE Users " +
                        "SET LastActivityDate = @LastActivityDate " +
                        "WHERE Email = @Email AND ApplicationName = @ApplicationName", conn);

                    updateCmd.Parameters.Add("@LastActivityDate", SqlDbType.DateTime).Value = DateTime.Now;
                    updateCmd.Parameters.Add("@Email", SqlDbType.VarChar, 255).Value = username;
                    updateCmd.Parameters.Add("@ApplicationName", SqlDbType.VarChar, 255).Value = m_ApplicationName;

                    updateCmd.ExecuteNonQuery();//<<------Error:"There is already an open DataReader associated with this Command which must be closed first."
                }
            }

        }
        catch (SqlException e)
        {
            if (WriteExceptionsToEventLog)
            {
                WriteToEventLog(e, "GetUser(String, Boolean)");

                throw new ProviderException(exceptionMessage);
            }
            else
            {
                throw e;
            }
        }
        finally
        {
            if (reader != null) { reader.Close(); }

            conn.Close();
        }

        return u;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:02:53.587

在发布更新声明之前，您需要向`Close`读者说明。

```
 try
    {
        conn.Open();

        reader = cmd.ExecuteReader();

        if (reader.HasRows)
        {
            reader.Read();
            u = GetUserFromReader(reader);

            reader.Close();

            if (userIsOnline)
            {
                SqlCommand updateCmd = new SqlCommand("UPDATE Users " +
                    "SET LastActivityDate = @LastActivityDate " +
                    "WHERE Email = @Email AND ApplicationName = @ApplicationName", conn);

                updateCmd.Parameters.Add("@LastActivityDate", SqlDbType.DateTime).Value = DateTime.Now;
                updateCmd.Parameters.Add("@Email", SqlDbType.VarChar, 255).Value = username;
                updateCmd.Parameters.Add("@ApplicationName", SqlDbType.VarChar, 255).Value = m_ApplicationName;

                updateCmd.ExecuteNonQuery();
            }
        }
        else
        {
            reader.Close()
        }

    } 
```

# javascript - 使用 JavaScript 插入 HTML

> ID：11025938
> 
> 赞同：1
> 
> 时间：2012-06-14T02:38:55.187
> 
> 标签：javascript, jquery, html

好的，我阅读[了这个](https://stackoverflow.com/questions/220603/is-there-a-best-practice-for-generating-html-with-javascript)线程来了解如何使用 JavaScript 生成 HTML。我尝试使用以下脚本执行此操作：

```
<script type='text/javascript'>
function generate_page() {
    var x = 0;
    var y = 0;
    var lines = 20;
    var output;
    while (x < lines) {
        while( y < lines*2){
            output = ("<div id='x" + x + "_" + y + "'>x</span>");
            $('board').prepend(output);
            y++;
        }
        y = 0;
        x++;
        $('board').append('<br />');
    }
}
</script>

</head>
<input type='button' value='test' onClick='generate_page()'>
<body>
<div id='board'>

</div>

</body>
</html> 
```

它不会返回任何错误，只是根本不做任何事情。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:43:47.633

您缺少 ID 的 # 符号，请尝试以下操作：

```
<script type='text/javascript'>
function generate_page() {
    var x = 0;
    var y = 0;
    var lines = 20;
    var output;
    while (x < lines) {
        while( y < lines*2){
            output = ("<span id='x" + x + "_" + y + "'>x</span>");
            $('#board').prepend(output);
            y++;
        }
        y = 0;
        x++;
        $('#board').append('<br />');
    }
}
</script>

</head>

<body>
<input type='button' value='test' onClick='generate_page()'>
<div id='board'>

</div>

</body>
</html> 
```

也将按钮移动到正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T02:43:12.487

您在 JavaScript 中打开一个 DIV 标记并关闭一个 SPAN 标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T02:43:55.980

您正在打开一个 div 并用一个 span 关闭它，而且，您永远不会关闭 div，也永远不会真正打开 span。顺便说一句，利用 document.createElement("div") 是一种干净的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T02:48:45.993

你正在使用 jQuery 语法，所以你应该包括 jQuery

像这样：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type='text/javascript'>
    function generate_page() {
        var x = 0;
        var y = 0;
        var lines = 20;
        var output;
        while (x < lines) {
            while (y < lines * 2) {
                output = ("<div id='x" + x + "_" + y + "'>x</span>");
                $('#board').prepend(output);
                y++;
            }
            y = 0;
            x++;
            $('#board').append('<br />');
        }
    } 
</script></head><body>
<input type='button' value='test' onclick='generate_page()'>
<div id='board'>
</div></body></html> 
```

# winapi - Windows 上 UNC 路径的最大路径常数？

> ID：11025939
> 
> 赞同：1
> 
> 时间：2012-06-14T02:39:00.133
> 
> 标签：winapi, path, filesystems, constants

我知道对于常规路径，我可以使用`MAX_PATH`常量来创建一个足够长的字符串来保存路径。但是，UNC 路径呢？

[根据 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)，我知道它们最多可以包含 32,767 个字符，那么是否为此定义了一个常量？如果没有，是否有任何其他方法可以为此类路径创建足够长的字符串？我知道我可以对其进行硬编码，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-24T15:18:10.830

该常量`UNICODE_STRING_MAX_CHARS`在 winnt.h 中定义为 32767。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T02:57:25.633

我不确定这是否存在。如果您查看同一页面[但再往下](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#maxpath)看，您会看到：

> **注意** 最大路径 32,767 个字符是近似值，因为“\?\”前缀可能会在运行时被系统扩展为更长的字符串，并且此扩展适用于总长度。

# android - Android模态应用程序？

> ID：11025943
> 
> 赞同：0
> 
> 时间：2012-06-14T02:39:22.270
> 
> 标签：android

我正在考虑制作一个在按下按钮时不会屈服于主页按钮的应用程序。从逻辑上讲，出于安全原因（以防止手机被劫持），我怀疑这种行为是可能的。然而，它是我的应用程序的一个重要功能，它正在编写以帮助我的弱智叔叔使用他的手机。

我的问题是我可以阻止他关闭应用程序并返回核心 android 主页/切换应用程序吗？还是我必须修改android操作系统本身并创建自己的自定义风格，然后用它越狱/刷机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:47:03.130

如果不修改固件，您将无法真正做到这一点。你可以通过编写和安装你自己的启动器应用程序来接近你，它会自动启动你的“模态”应用程序。因此，当您按下 home 键时，您将直接回到您的应用程序，而不是已安装的应用程序抽屉。当然，这可以被禁用，并且可能不太顺利，但应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:52:59.317

您可以要求 android 让您的应用暂时成为“家庭”应用。

例如：这就是“汽车之家”应用程序的工作方式。只要设备“停靠”，您的应用程序就会成为家庭应用程序。（您必须研究“停靠”的含义。对不起，我现在不知道）

在您的清单中将其声明为

`<meta-data android:name="android.dock_home" android:value="true" />`

你可以走了。

请查看文档

[http://developer.android.com/reference/android/content/Intent.html#METADATA_DOCK_HOME](http://developer.android.com/reference/android/content/Intent.html#METADATA_DOCK_HOME)

还要检查这个帖子。

[汽车之家替换应用程序的替代主页按钮](https://stackoverflow.com/questions/2862629/overriding-home-button-for-a-car-home-replacement-app)

# python - 在 Python 中查找列表中的重大变化

> ID：11025944
> 
> 赞同：1
> 
> 时间：2012-06-14T02:39:23.050
> 
> 标签：python, list, computer-vision, python-imaging-library

所以我有这段代码

```
for x in range(x1,x2):
        for y in range(y1, y2):
            cpixel = pixels[x, y]
            if bw:
                bw_value = int(round(sum(cpixel) / float(len(cpixel))))
                all_pixels.append(bw_value)
                title = "Averaged (B&W) Pixel Values"
            else:
                if lumi:
                    luma = (0.3 * cpixel[0]) + (0.59 * cpixel[1]) + (0.11 * cpixel[2])
                    all_pixels.append(luma)
                    title = "Pixel Luminosity Values"
                else:
                    if round(sum(cpixel)) / float(len(cpixel)) > 100:
                        all_pixels.append(255)
                    else:
                        all_pixels.append(0)
                    title = "Pixel Binary Transform Values" 
```

从这里获取并修改了一点从[PIL 获取像素值列表，](https://stackoverflow.com/questions/1109422/getting-list-of-pixel-values-from-pil)以给出边界区域（用户选择）内的像素值列表（all_pixels）。

在记录了一系列相似的值后，我试图找出一种有效的方法来检测列表中的变化。由于该列表似乎从上到下和从左到右列出了像素值。在我将使用它的场景中，它会有一个相似值的列表，直到它到达图像的一个区域，然后值将开始来回切换，直到值再次稳定在一个新值附近。

我感兴趣的是跟踪这两者之间的边界，我想检测这个边界在哪里以及它是向左还是向右移动。除了必须检查每个值附加到 all_pixels 时，我真的想不出任何其他方法，然后只追溯坐标。

但即使这看起来也相当粗略，因为即使我在下一个显着不同的值被视为显着变化（而不仅仅是异常值）之前将任意数量的值设置为相同，之后值开始在旧值之间切换和新的。

我想理想情况下，我需要为此边界区域/线的坐标生成某种最佳拟合线。我只需要一些想法如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:59:37.690

根据您评论中对问题的描述，我认为一个简单的边缘检测器可能就足够了，尽管这取决于相机角度、对比度、照明等。

您可以获取图像的垂直导数，可能会稍微平滑一点并找到具有最高值的行。假设图像在圆柱体上放大，除了粉末边界之外没有其他主要的垂直对比，那应该是粉末的高度。

您可以自己编写代码，或使用 OpenCV，但我认为这对于这项任务来说可能有点过于强大。Numpy 也是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:49:58.747

根据您的描述，听起来您真的应该只使用计算机视觉库，而不是尝试编写自己的图像检测代码。

下面是关于 Python 中计算机视觉的讨论： [什么是 Python 的好的计算机视觉库，可以让我在 Flash/HTML5 视频中找到面孔？](https://stackoverflow.com/questions/4129723/what-is-a-good-computer-vision-library-for-python-that-will-allow-me-to-me-to-fi)

听起来 OpenCV 是最好的选择。

[http://opencv.willowgarage.com/](http://opencv.willowgarage.com/)

# jquery - 使用流沙时的多个回调

> ID：11025947
> 
> 赞同：0
> 
> 时间：2012-06-14T02:39:41.757
> 
> 标签：jquery, callback, quicksand

我正在使用流沙作为可排序的投资组合页面，并且需要使用 nth-child 删除每三个元素的左侧填充，我还必须添加鼠标悬停和鼠标移出效果。这是我目前拥有的：

```
$holder.quicksand($filteredData, {
    duration: 200,
    easing: 'easeInOutQuad'
}, function () {
    $("#center_content .portfolio .tiles_holder .four img").mouseover(function () {
        $(this).fadeTo("fast", 0.3, function () {
            $('ul.tiles_holder li:nth-child(3n+1)').css("marginLeft", "0");
        });
    }).mouseout(function () {
        $(this).fadeTo("fast", 1, function () {
            $('ul.tiles_holder li:nth-child(3n+1)').css("marginLeft", "0");
        });
    });
}); 
```

但是发生的情况是直到 mouseover/out 事件发生时边距才被删除。如何改进代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:00:42.130

由于您没有发布任何 html，因此很难准确地说，但您似乎需要将流沙回调更改为：

```
$holder.quicksand($filteredData, {
    duration: 200,
    easing: 'easeInOutQuad'
}, function () {

   $('ul.tiles_holder li:nth-child(3n+1)').css("marginLeft", "0");

    $("#center_content .portfolio .tiles_holder .four img").mouseover(function () {
        $(this).fadeTo("fast", 0.3);
    }).mouseout(function () {
        $(this).fadeTo("fast", 1);
    });
}); 
```

# c# - 使用 GeoNear 在 MongoDB 中返回按字段分组的最近文档

> ID：11025951
> 
> 赞同：0
> 
> 时间：2012-06-14T02:40:06.420
> 
> 标签：c#, mongodb, geospatial

我正在使用官方 C# 驱动程序使用 GeoNear 查询 MongoDB 中的集合。

文件看起来像这样：-

```
{
    "_id" : "1" ,
    "Resource" : {
        "_id" : "9",
        "Type" : "AAA"
    },
    "Site" : {
        "_id" : "4123" ,
        "Location" : {
            "Longitude" : 145.012345,
            "Latitude" : -30.012345
        }
    }
} 
```

在多对多场景中有多种资源和站点组合。

我的 geoNear 工作正常，但现在需要根据其他一些标准过滤结果。

我有基本的工作，所以我可以例如返回所有特定资源类型，但是我现在需要查询只返回每种资源类型的最接近的文档。例如，如果我有 10 种资源类型和数百个站点（可能有数千个组合/文档），则查询将返回最多 10 个文档……每个资源类型一个，显示每个资源类型最近的站点（查询可能实际上返回小于那个，如果在我为查询指定的 MaxDistance 中没有该资源类型的站点）

编辑

当我使用 C# 库时，我可以使用 LINQ 过滤结果来解决这个问题，但是我仍然有兴趣看看是否有一种方法可以在 MongoDB 中本地执行此操作而不依赖于实现。

我怀疑我可以 MapReduce 的结果来实现我想要的，但是我看不到如何使用 GeoNear 命令执行此操作，我宁愿避免使用中间集合的两步过程（缓存这些结果是在这种情况下不相关，因为查询总是从不同的源位置调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:25:25.823

使用地理查询时，您可以告诉 MongoDB 返回 n 个最接近的结果，并且您可以告诉 MongoDB 也检查一些附加字段（例如您的“类型”字段）。

但据我所知，您不能告诉它为该附加字段的每个不同值返回最接近的匹配项。如果您确实找到了使用 MongoDB shell 发出此类查询的方法，我可以帮助您将其转换为 C#。

我认为您只需要为每个“类型”重复查询一次，如果您只对最接近的匹配感兴趣，请将文档的限制设置为返回 1。

# performance - 为什么我的“dns”查找和“连接”需要超过 2 秒（页面加载时间的 57%）？

> ID：11025953
> 
> 赞同：8
> 
> 时间：2012-06-14T02:40:28.110
> 
> 标签：performance, dns, pagespeed

![在此处输入图像描述](../Images/2c20e8dad5af65e43984a87c4962ea3c.png)

我还发现页面显示一个东西大约需要 2 秒（我假设它的原因是查找时间最长）[http://www.webpagetest.org/result/120613_QC_833b06d5bbdf38bafcff8ed2777be8ac/](http://www.webpagetest.org/result/120613_QC_833b06d5bbdf38bafcff8ed2777be8ac/)

我该如何改善这一点，或者摆脱 2 秒的延迟？

我在 Heroku 上托管它，并在 GoDaddy 中设置了 DNS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:42:43.040

DNS不是你的问题。

仔细查看您的[网络瀑布图](http://www.webpagetest.org/result/120613_DV_9a9d58157c440761426497db6678a26b/5/details/)。您的 application.js 文件是您的第一个性能罪魁祸首。如果你可以的话：

*   把它变小
*   如果可以，请将脚本标签移动到页面底部
*   更好的是，如果您没有在脚本中执行任何 document.write，请将其标记为“异步”

有了这些，你的背景就是你的下一个最大问题——它是巨大的。如果您真的关心速度，也许值得重新考虑它是否应该存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T02:47:44.690

如果服务器负载过重、配置不当或客户端和 DNS 服务器之间的网络链接很慢，则 DNS 很慢。在更大的网络管道上尝试不同的服务器。您的问题缺少许多可以提供更好答案的细节。例如，您的主机和网络环境是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T02:57:39.390

如果您认为您的 DNS 很慢，请尝试使用 Google 以获得更好的性能。

并再次进行测试。

[https://developers.google.com/speed/public-dns/](https://developers.google.com/speed/public-dns/)

我从来没有做过比较，但有人说谷歌 DNS 比平均速度更快。也可能有替代方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T03:19:36.743

Webpagetest 显示第一个字节在 .3/.4 秒内到达，这远低于您遇到的 2 秒延迟。我不确定您是在抱怨自己的速度慢（请遵循有关使用 Google Public DNS 或 Open DNS 或 Dyn Internet Guide 的建议，他们应该会有所帮助）或您的网站对其他人来说速度很慢（然后阅读下文）。

根据[本页](http://www.webpagetest.org/result/120613_DV_9a9d58157c440761426497db6678a26b/5/details/)的表格，首次查看 DNS 查找时间为 52 毫秒。

还有其他查询，例如 Google 分析和您选择使用的其他外部数据。所有这些似乎都没有给你体面的解决时间（尽管我不能保证webpagetest是否给你公平的中值解决时间或使用递归缓存的递归服务器响应时间）。

考虑先对其他让你慢下来的事情做点什么：

*   以某种方式无法全速提供的大图像（服务器可能使用节流来更喜欢提供小文件）
*   需要一段时间才能加载和处理的第三方 JavaScript
*   简化 Javascript 和 CSS，以最大限度地减少浏览器呈现页面所需的操作，并以比所有资源加载速度更快的速度显示某些内容。

# salesforce - 让用户处于州长限制内的角色

> ID：11025954
> 
> 赞同：0
> 
> 时间：2012-06-14T02:40:32.633
> 
> 标签：salesforce, apex-code

我在地图中有一个角色层次结构及其子角色。我想获取每个角色下的所有用户并拥有该用户下的所有用户。

例如

角色：市场总监

子角色：RM东

子角色：RM West

子角色：RM North

子角色：RM South

我有这个 `Map<id, set<id>>`

如果 Phil 是营销总监，我希望所有用户都向 Phil 报告，并且在这些用户下也有用户向 RM 报告。每个角色下可能有多个用户，我需要帮助才能找到在某些集合中捕获这些用户的方法。

```
Phil - Director Marketing
      Kevin - RM South   
           Clara - TM
           Joe   - TM
      Robin - RM North
           Rita  - TM
           John  - TM 
```

我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:34:53.487

我写了一个帮助类来解决这个确切的问题。

```
public with sharing class GroupsHelper {
    private static final String userPrefix = User.SObjectType.getDescribe().getKeyPrefix();

    public Map<Id, Set<Id>> roleUsers { get; private set; }
    public Map<Id, Set<Id>> roleSubordinateUsers { get; private set; }
    public Map<Id, Set<Id>> groupsUsers { get; private set; }
    public Map<Id, Set<Id>> usersGroups { get; private set; }
    public Map<Id, Set<Id>> usersQueues { get; private set; }

    public GroupsHelper() {
        this.roleUsers = new Map<Id, Set<Id>>();
        this.roleSubordinateUsers = new Map<Id, Set<Id>>();
        this.groupsUsers = new Map<Id, Set<Id>>();
        this.usersGroups = new Map<Id, Set<Id>>();
        this.usersQueues = new Map<Id, Set<Id>>();
        refresh(true, true);
    }

    public void refresh(Boolean refreshRoles, Boolean refreshGroups) {
        if(refreshRoles) {
            refreshRoles();
        }
        if(refreshGroups) {
            refreshGroups();
        }
    }

    public void refreshRoles() {
        roleUsers.clear();
        roleSubordinateUsers.clear();
        //Populate a Map with the role Id and all the users
        Map<Id, UserRole> roles = new Map<Id, UserRole>([
            SELECT
                Id,
                Name,
                ParentRoleId,
                (
                    SELECT
                        Id,
                        Name
                    FROM
                        Users
                )
            FROM
                UserRole]);
        Set<Id> userIds;
        Id subordinateId;
        for(UserRole role : roles.values()) {
            //Add the User Ids of the current role
            roleUsers.put(role.Id, (new Map<Id, User>(role.Users)).keySet());
            //Loop throuh and populate the role and subordinate Map
            subordinateId = null;
            while(role != null) {
                if(!roleSubordinateUsers.containsKey(role.Id)) {
                    roleSubordinateUsers.put(role.Id, new Set<Id>());
                }
                userIds = roleSubordinateUsers.get(role.Id);
                if(roleSubordinateUsers.containsKey(subordinateId)) {
                    userIds.addAll(roleSubordinateUsers.get(subordinateId));
                }
                for(User user : role.Users) {
                    userIds.add(user.Id);
                }
                subordinateId = role.Id;
                role = roles.get(role.ParentRoleId);
            }
        }
    }

    public void refreshGroups() {
        groupsUsers.clear();
        usersGroups.clear();
        Map<Id, Group> groups = new Map<Id, Group>([
            SELECT
                Id,
                Name,
                Type,
                        RelatedId,
                (
                    SELECT
                        UserOrGroupId
                    FROM
                        GroupMembers
                ),
                (
                    SELECT
                        Id,
                        SobjectType
                    FROM
                        QueueSobjects
                )
            FROM
                Group]);

        List<Id> stack;
        Set<Id> userIds, queueIds;
        Group groop;
        for(Id groupId : groups.keySet()) {
            stack = new List<Id> { groupId };
            userIds = new Set<Id>();
            do {
                groop = groups.get(stack.remove(0));
                //This is extra cautious, it should not be possible to get a null value
                if(groop != null) {
                    if(groop.RelatedId != null) {
                        if(groop.Type == 'Role') {
                            userIds.addAll(roleUsers.get(groop.RelatedId));
                        } else if(groop.Type == 'RoleAndSubordinates') {
                            userIds.addAll(roleSubordinateUsers.get(groop.RelatedId));
                        }
                    } else {
                        for(GroupMember member : groop.GroupMembers) {
                            if(isPrefix(member.UserOrGroupId, userPrefix)) {
                                userIds.add(member.UserOrGroupId);
                            } else {
                                //When the Id is not a user Id it is reliably a group Id, that we can add to the stack for processing
                                stack.add(member.UserOrGroupId);
                            }
                        }
                    }
                }
            } while(!stack.isEmpty());
            if(userIds.size() > 0) {
                groupsUsers.put(groupId, userIds);
                for(Id userId : userIds) {
                    if(!usersGroups.containsKey(userId)) {
                        usersGroups.put(userId, new Set<Id>());
                    }
                    usersGroups.get(userId).add(groupId);
                }
            }
        }
        for(Id userId : usersGroups.keySet()) {
            if(!usersQueues.containsKey(userId)) {
                usersQueues.put(userId, new Set<Id>());
            }
            for(Id groupId : usersGroups.get(userId)) {
                groop = groups.get(groupId);
                if(groop.Type == 'Queue' && groop.QueueSobjects.size() > 0) {
                    usersQueues.get(userId).addAll((new Map<Id, QueueSobject>(groop.QueueSobjects)).keySet());
                }
            }
        }
    }

    public static Boolean isPrefix(Id sfdcId, String prefix) {
        if(sfdcId == null || prefix == null || prefix.length() != 3) {
            return false;
        } else {
            return String.valueOf(sfdcId).startsWith(prefix);
        }
    }

    private static testMethod void testGroupsHelper() {
        GroupsHelper helper = new GroupsHelper();

        Integer rolesCount = [SELECT Id FROM UserRole].size();
        System.assertEquals(rolesCount, helper.roleUsers.size());
        System.assertEquals(rolesCount, helper.roleSubordinateUsers.size());

        if(helper.usersQueues.size() > 0) {
        Integer queueCount = [SELECT Id FROM QueueSobject].size();
            Id userId = new List<Id>(helper.usersQueues.keySet())[0];
            System.assertEquals(queueCount, helper.usersQueues.get(userId).size());
        }

        //Can't test the size of the groups and users Maps because they only
        //contain a key if there are child values to add.
    }
} 
```

# google-maps-api-3 - 从纬度获取城市，反向地理编码以插入表格

> ID：11025956
> 
> 赞同：0
> 
> 时间：2012-06-14T02:40:38.230
> 
> 标签：google-maps-api-3, geolocation

希望仅从 Google Maps API 中的反向地理编码中获取“城市”返回值，以通过变量将其插入表单中。我查看了文档，但它似乎没有提供一种方法或示例来从中获取此值（或任何特定值），然后可以以这种方式将其插入到表单字段中。

关于最好的方法的任何想法？谢谢。

# asp.net-mvc - ASP.NET MVC - 复杂模型验证

> ID：11025959
> 
> 赞同：5
> 
> 时间：2012-06-14T02:40:57.547
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-2, model-binding

我有一个像这样的 ViewModel 类：

```
class CaseModel {
    public Boolean     ClientPresent { get; set; }
    public ClientModel Client        { get; set; }
}

class ClientModel {
    [Required]
    public String      FirstName     { get; set; }
    [Required]
    public String      LastName      { get; set; }
} 
```

视图页面由一个`<input type="checkbox" name="ClientPresent" />`和一个`Html.EditorFor( m => m.Client )`局部视图组成。

这个想法是，当用户提供有关案例（业务域对象）的信息时，他们可以通过取消选中 ClientPresent 框来选择不指定有关客户端（另一个 biz 对象）的任何信息。

我希望 ASP.NET MVC 不对子 ClientModel 对象执行任何验证-但是，当将表单 POST 回服务器时，会自动填充 CaseModel.Client 属性，但因为用户`FirstName`并`LastName`没有（必然）提供它意味着它未能通过`[Required]`验证属性，因此`ViewData.ModelState.IsValid`返回 false 并且用户收到验证错误消息。

我怎样才能得到它，所以如果是假的`CaseModel.Client`就不会被验证？`CaseModel.ClientPresent`

请注意，这`ClientModel`是一个完全独立的 ViewModel 类，并在应用程序的其他地方使用（例如在允许用户编辑客户端的单个实例的 ClientController 类中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:24:14.860

我认识到我的问题与绑定无关，而实际上与验证有关：通过保留值意味着当用户重新加载页面时将填充相同的表单字段，我只需要丢弃验证消息，因为它们没有适用的。

为此，我意识到我可以执行模型属性验证，然后使用一些自定义逻辑来删除验证消息。这与我所做的类似：

```
public class CaseModel {
    public void CleanValidation(ModelStateDictionary dict) {
        if( this.ClientPresent ) {
            dict.Keys.All( k => if( k.StartsWith("Client") dict[k].Errors.Clear() );
        }
    }
} 
```

（显然我的实际代码更健壮，但你明白了）

CleanValidation 方法由控制器的 action 方法直接调用：

```
public void Edit(Int64 id, CaseModel model) {
    model.CleanValidation( this.ModelState );
} 
```

我可以通过将`CleanValidation`方法添加到新接口`IComplexModel`并让新的模型绑定器自动调用此方法来整理它，这样控制器就不需要自己调用它了。

### 更新：

我有这个接口适用于任何需要复杂验证的 ViewModel：

```
public interface ICustomValidation {

    void Validate(ModelStateDictionary dict);
} 
```

在我原来的例子中，`CaseModel`现在看起来像这样：

```
 public class CaseClientModel : ICustomValidation {

      public Boolean ClientIsNew { get; set; } // bound to a radio-button
      public ClientModel ExistingClient { get; set; } // a complex viewmodel used by a partial view
      public ClientModel NewClient { get; set; } // ditto

      public void Validate(ModelStateDictionary dict) {

          // RemoveElementsWithPrefix is an extension method that removes all key/value pairs from a dictionary if the key has the specified prefix.
          if( this.ClientIsNew ) dict.RemoveElementsWithPrefix("ExistingClient");
          else                   dict.RemoveElementsWithPrefix("NewClient");
      }
 } 
```

`OnActionExecuting`在我的公共`BaseController`类中调用验证逻辑：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext) {
    base.OnActionExecuting(filterContext);
    if( filterContext.ActionParameters.ContainsKey("model") ) {

        Object                    model = filterContext.ActionParameters["model"];
        ModelStateDictionary modelState = filterContext.Controller.ViewData.ModelState; // ViewData.Model always returns null at this point, so do this to get the ModelState.

        ICustomValidation modelValidation = model as ICustomValidation;
        if( modelValidation != null ) {
            modelValidation.Validate( modelState );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T02:56:16.787

您必须通过从默认模型绑定器继承来创建[自定义模型绑定器。](https://stackoverflow.com/questions/10722428/dataannotations-notrequired-attribute/10724952#10724952)

```
 public class CustomModelBinder: DefaultModelBinder
  {
    protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
    {
      if (propertyDescriptor.Name == "Client")
      {
          var clientPresent = bindingContext.ValueProvider.GetValue("ClientPresent");

          if (clientPresent == null || 
                string.IsNullOrEmpty(clientPresent.AttemptedValue))
              return;
      }

      base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
    }
  } 
```

**全球.asax.cs**

```
ModelBinders.Binders.Add(typeof(CaseModel), new CustomModelBinder()); 
```

# facebook - IE7中的Facebook channelUrl递归问题

> ID：11025960
> 
> 赞同：3
> 
> 时间：2012-06-14T02:41:21.100
> 
> 标签：facebook, facebook-graph-api, internet-explorer-7, facebook-javascript-sdk

我正在为具有某些共享功能（将文章、视频、照片等共享到用户的时间轴）的网站异步加载 FB JS SDK。大多数情况下一切正常，但在 IE7 中，我注意到不断有请求发送到我的 channelUrl。他们似乎永远不会结束。它并没有完全破坏网站，但我不想继续发送所有这些请求。我不确定是什么导致这种情况发生，任何帮助将不胜感激。

我的应用程序设置如下：App Domain - mydomain.com 站点 URL - [http://mydomain.com](http://mydomain.com) （注意：如果不清楚，mydomain 只是我用于问题的示例。）

我的 FB.Init 调用是

```
 FB.init({
        appId: XXXXXXXXXXXXX,
        channelUrl: '//' + window.location.hostname + '/channel.html',
        status: true,
        cookie: true,
        xfbml: true
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T02:48:47.523

根据文档，您可能必须编辑频道 url 文件的缓存以确保不会发生这种情况：

[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/) - 阅读标题为“频道文件”的位置

Quote：“尽可能长时间地缓存频道文件很重要。在提供此文件时，您必须发送有效的Expires标头，有效期较长。这将确保频道文件被浏览器缓存，这一点很重要流畅的用户体验。如果没有适当的缓存，跨域通信将变得非常缓慢，用户体验会严重下降。在 PHP 中实现此目的的一个简单方法是：

```
 <?php
 $cache_expire = 60*60*24*365;
 header("Pragma: public");
 header("Cache-Control: max-age=".$cache_expire);
 header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
 ?>
 <script src="//connect.facebook.net/en_US/all.js"></script> 
```

“通道文件”的意义在于它有助于跨域ajax请求。如果它没有被缓存，那么 FB api 会在每次它想要从 facebook 本身插入和执行一些 javascript 时请求它。如果您将其缓存在客户端的浏览器上，它只会使用空白 html 文件的本地副本，而不是在每次想要执行此操作时都引发请求。看看跨域ajax请求是如何执行的。我会去研究一个好的链接，然后回来描述 xdr（跨域请求）。

编辑：

*   [弱点但体面的解释](http://sul4bh.wordpress.com/2011/10/18/cross-domain-communication-explained/)
*   [这是一个解释Jquery如何做的stackoverflow链接](https://stackoverflow.com/q/726704/1133577)
*   [跨域解决方案解释](http://snook.ca/archives/javascript/cross_domain_aj)
*   [描述也很好](http://jimbojw.com/wiki/index.php?title=Introduction_to_Cross-Domain_Ajax)

# ios - 在 AVMutableVideoComposition 中创建一个按时间间隔更改的 CATextlayer

> ID：11025965
> 
> 赞同：6
> 
> 时间：2012-06-14T02:42:35.490
> 
> 标签：ios, core-animation, avmutablecomposition, catextlayer

我有一个应用程序，允许用户以可变组合录制视频。我想设置一些会出现的文本，然后以我在导出后用户播放它时设置的间隔更改。

例如，如果第一个单词是“dog”，那么我想设置它，以便“cat”在 X 秒后替换该字符串，然后在 X 秒后被另一个单词替换。

我的视频是使用 AVExportSession 从 AVMutableComposition 导出的，我的文字将使用添加到其中的 CATextlayer 添加，如下所示：

```
//code to setup AVMutableComposition
...
//code to setup CATextLayer and AVMutableVideoComposition
    CALayer *animatedTitleLayer = [CALayer layer];
    CATextLayer *titleLayer = [[CATextLayer alloc] init];
    titleLayer.string = @"Text I want to change at an interval";
    titleLayer.alignmentMode = kCAAlignmentCenter;
    titleLayer.bounds = CGRectMake(150, 50, 124, 354);
    titleLayer.position = CGPointMake(120, 270);
    titleLayer.bounds = CGRectIntegral(CGRectMake(0, 0, 250, 150));
    titleLayer.opacity = 1;
    titleLayer.backgroundColor = [UIColor purpleColor].CGColor;   
    [animatedTitleLayer addSublayer:titleLayer];
    animatedTitleLayer.position = CGPointMake(40, 5);        
    CALayer *parentLayer = [CALayer layer];
    CALayer *videoLayer = [CALayer layer];
    parentLayer.frame = CGRectMake(0, 0, 320, 480);
    videoLayer.frame = CGRectMake(0, 0, 320, 480);
    [parentLayer addSublayer:videoLayer];
    [parentLayer addSublayer:animatedTitleLayer];   
    parentLayer.preferredTransform = rotationTransform;
    AVMutableVideoComposition *videoComposition;
    videoComposition = [AVMutableVideoComposition videoComposition];
    videoComposition.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer];

//code to setup AVExportSession
... 
```

我的问题是：如何使文本更改为我设置为我指定的字符串的间隔？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-25T08:56:32.660

如果您要实现的目标是`CATextLayer`在运行时以一定间隔更改文本，那么您的选择之一是在层次结构中搜索该层并在某种计时器线程上更改其文本。提供要替换的字符串数组，您可以在运行时找到图层的文本后对其进行设置。

您可以先解决手头的第一个问题： **在层次结构中搜索层**

CALayer 的所有子类都定义了一个属性，用于标识层次结构中的层，即`name`.

所以你可以做的是你可以给`name`你的`CATextLayer`. 在你的情况下，它是你的`titleLayer`：

```
titleLayer.name = "changingTextLayer" 
```

然后你可以在层次结构中搜索它：

```
for (CALayer *layer in [superLayerOfMyLayer sublayers]) {
        if ([[layer name] isEqualToString:"changingTextLayer"]) {
            return layer;
        }
    } 
```

一旦找到它，您就可以更改文本：

```
titleLayer.string = @"Changed text"; 
```

您现在要做的就是设置一个计时器并每秒/您提供的时间间隔执行此操作，直到数组中有字符串。

您必须将其`CALayer`转换为`CATextLayer`.

祝你好运。

# ruby - Ruby array.select 多行块

> ID：11025967
> 
> 赞同：26
> 
> 时间：2012-06-14T02:42:42.817
> 
> 标签：ruby

我在 ruby​​ 中过滤一个数组并使用一个`.select`块来这样做。条件非常复杂，以至于单个行块是可怕的，但不是那么大，因此单独的方法似乎过大了。因此我想使用多行块。但是我不确定语法。

```
filtered_array = base_array.select do |elem|
    return false if condition1
    return false if condition2
    return true
end 
```

上面的内容显然是不正确的，因为`return`退出了方法，而不是块，但给出了我正在寻找的东西的想法。

我也可以使用多个选择语句，但这似乎混淆了我想要做的事情。请注意，上述条件非常复杂，使用逻辑运算符绑定它们会导致混乱。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-14T03:06:56.153

你想要的是`next`而不是`return`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T02:47:50.613

**编辑：**刚刚看到这个：“使用逻辑运算符绑定它们会导致混乱。” 能否提供实际情况？

```
filtered_array = base_array.select do |elem|
    condition1 && condition2
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-25T19:22:48.780

您可能应该只使用：

```
next(true) 
```

但是，如果这不适合您，请执行以下操作：

```
my_array.select do |x|
  # bool = false ### optional, uncomment this if you prefer
  if x.id == 1
    bool = true
  end
  bool
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T02:53:15.813

似乎可以使用 case 语句来处理：

```
filtered_array = base_array.select do |elem|
  case
  when condition1
    false
  when condition2
    false
  else
    true
  end
end 
```

# java - 漂亮的打印 SQL 结果 Java

> ID：11025968
> 
> 赞同：3
> 
> 时间：2012-06-14T02:42:55.750
> 
> 标签：java, sql, pretty-print

我正在为对象开发一个 sql 解析器/解释器。更多信息：[解析类似 SQL 的语法、设计模式](https://stackoverflow.com/questions/10379956/parsing-sql-like-syntax-design-pattern)

我只是想知道是否有任何现成的库可以漂亮地打印输出结果。结果将是简单的类型、集合等..

像这样的东西会很好

```
mysql> SELECT poet,SUM(copies_in_stock) FROM writer GROUP BY poet;
+----------------------+----------------------+
| poet                 | SUM(copies_in_stock) |
+----------------------+----------------------+
| Douglas Livingstone  |                   23 |
| Mongane Wally Serote |                   13 |
+----------------------+----------------------+ 
```

任何指针都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:31:05.800

从来没听说过。您可以找到一些这样做的开源数据库引擎的内部类，例如： http: [//www.docjar.org/docs/api/org/apache/derby/tools/JDBCDisplayUtil.html](http://www.docjar.org/docs/api/org/apache/derby/tools/JDBCDisplayUtil.html)

或者，有用于以表格格式输出文本的库，请参阅： [http ://trac.inamik.com/trac/jtable_format/](http://trac.inamik.com/trac/jtable_format/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:41:34.010

这正是我所需要的。[Java中漂亮的打印二维数组](https://stackoverflow.com/questions/11383070/pretty-print-2d-array-in-java)

# doxygen - 在 doxygen 中将“内部”与“外部”文档分开

> ID：11025971
> 
> 赞同：14
> 
> 时间：2012-06-14T02:43:15.800
> 
> 标签：doxygen

我想用 doxygen 记录一个库。文档将由两类人阅读：仅对外部 API 感兴趣的用户和希望查看所有函数/结构的文档的开发人员。

我想用分隔 doxyfiles 来创建文档。是否有一些“标签”可以放在评论块中以将评论标记为内部/外部？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T03:09:39.353

设置**INTERNAL_DOCS**：

```
# The INTERNAL_DOCS tag determines if documentation
# that is typed after a \internal command is included. If the tag is set
# to NO (the default) then the documentation will be excluded.
# Set it to YES to include the internal documentation.

INTERNAL_DOCS          = NO 
```

在文档中，您可以使用`\internal`或`@internal`以任何您想要的粒度（文件、函数等）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-26T12:22:48.180

使用**\cond**命令：

`\internal`( `@internal`) 仅对当前评论块具有粒度。它不允许您以任何方式隐藏 C 中的结构定义。

最简单的方法是把

> \cond 内部

在内部头文件的顶部和

> \endcond

在底部。然后，在您的配置文件中，添加

> ENABLED_SECTIONS = 内部

允许将内部项目包含在文档中。

Doxygen 用户也推荐这种方式，例如[这里](http://doxygen.10944.n7.nabble.com/How-to-set-internal-tag-for-consecutive-members-td4106.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-02T10:41:07.907

这是一个简单的解决方案，它利用了您通常可以将代码的内部和外部部分区分为文件的事实。

您可以简单地将输入文件限制为仅要在外部文档中公开的那些头文件：

```
# For internal, we parse all files
INPUT = ./
# For external, we parse only the files containing the public interface
INPUT = include/header1.hpp include/header2.hpp 
```

这样做的好处是不必修改源文件（使用`\internal`或`@internal`）。

# c# - 如何在 ASP.Net Membership 中设置 ProviderUserKey

> ID：11025974
> 
> 赞同：0
> 
> 时间：2012-06-14T02:43:40.810
> 
> 标签：c#, asp.net, membership-provider

我的应用程序中有一个成员表。成员表与我的应用程序的用户是一对一的关系。

但是我们可以在成员表中向我们的应用程序插入比已为应用程序创建的用户更多的成员。

所以我们的应用程序中可以有 100 个用户。我们的成员表中可以有 200 个成员。每个用户都有一个成员行，但并非每个成员都必须是用户。

因此，当会员最终声明其会员行并注册到网站时，我需要能够在为网站创建新用户时设置 UserId (ProviderUserKey)。

那么创建新用户帐户时是否可以更改providerkey？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:00:02.783

您是否使用默认的会员服务提供商？如果是这样，我认为你不能。它将创建一个唯一的密钥。您需要创建一个自定义提供程序并修复代码以包含一个 ifUserExists 方法，为每个成员创建一个用户并为他们分配一个有限的角色，或者添加一个链接两个表的外键并让它们每个都有不匹配的 ID .

# yii - 使用 Yii::app()->user->isGuest 时出错

> ID：11025978
> 
> 赞同：5
> 
> 时间：2012-06-14T02:44:08.337
> 
> 标签：yii, frameworks, yii-components

我想知道用户是否是使用 Yii::app()->user->isGuest 的访客，但我收到以下通知：

```
Undefined property: CWebApplication::$user 
```

显然组件用户尚未在应用程序中定义，我想知道原因。

我曾尝试通过以下方式检查组件是否可用

```
if(isset(Yii::app()->user)) 
```

但是它失败了¿即使没有定义 Yii::app()->user，我如何检查用户是否是访客？¿使用 isGuest 时我应该收到此通知吗？

**编辑**：我将 error_reporting 指令更改为“E_ALL & ~E_NOTICE & ~E_DEPRECATED & ~E_STRICT”，我需要继续前进。现在我得到了这个*致命*错误：

**致命错误：在第 530 行的 home/mario/projects/ciudad_wiki/yii/framework/web/auth/CWebUser.php 中的非对象上调用成员函数 getId()**

## 无时间记忆功能位置

1.  0.0005 235120 {main}( ) ../index.php:0
2.  0.0207 1548168 CApplication->run() ../index.php:13
3.  0.0207 1548352 CWebApplication->processRequest() ../CApplication.php:162
4.  0.0235 1725768 CWebApplication->runController() ../CWebApplication.php:135
5.  0.0272 2103464 CController->运行（）../CWebApplication.php:276
6.  0.0279 2145872 CController->runActionWithFilters()../CController.php:266
7.  0.0279 2145984 CController->runAction() ../CController.php:287
8.  0.0279 2146128 CInlineAction->runWithParams() ../CController.php:309
9.  0.0279 2146688 站点控制器->actionIndex() ../CInlineAction.php:50
10.  0.0529 3875888 CController->render() ../SiteController.php:33
11.  0.0529 3876112 CController->renderPartial() ../CController.php:783
12.  0.0532 3877352 CBaseController->renderFile() ../CController.php:870
13.  0.0532 3877672 CBaseController->renderInternal() ../CBaseController.php:96
14.  0.0539 3918144 要求（foo_dir/protected/views/site/index.php'）../CBaseController.php:127
15.  0.0705 4428584 CModule->__get() ../CBaseController.php:199
16.  0.0705 4428584 CModule->getComponent() ../CModule.php:104
17.  0.0723 4580360 CWebUser->init() ../CModule.php:388
18.  0.0736 4671144 CWebUser->getIsGuest() ../CWebUser.php:195
19.  0.0736 4671240 CWebUser->getState() ../CWebUser.php:279
20.  0.0736 4671320 CWebUser->getStateKeyPrefix() ../CWebUser.php:557

trace 与上一条类似，Yii 在 $_SESSION 中找不到与用户组件相关的任何内容。

**编辑#2：**我上传了带有 E_NOTICE 的跟踪，这里是： [PHP 通知](http://jsfiddle.net/mmfmarin/RjZpM/1/embedded/result/)

**编辑#3：**我最近将 php 更新到 5.4。当我在使用 php 5.3 的服务器上运行应用程序时没有问题，也许在幕后有一个通知，但不是我在使用 php 5.4 时遇到的致命错误。正如 bool.dev 写道：这是一个完整的猜测。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:54:45.487

抱歉，我运行了一个破坏框架的大型替换。我意识到问题出在 yii 目录，因为我没有用 git 跟踪它，当我在虚拟机中设置新的生产环境时，一切都恢复正常，唯一的区别是框架目录。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T15:58:19.697

从虚拟机上的 GitLab 拉出主分支时，我遇到了类似的问题。看起来它找不到用户和/或会话组件。

我已经有好几天了，但是我发现在 Yii 的 index.php 的第一行中添加了这个（就在“

```
error_reporting("E_ALL & ~E_STRICT"); 
```

# macos - 如何在 Mac 上的 $PATH 中添加 /usr/local/bin

> ID：11025980
> 
> 赞同：109
> 
> 时间：2012-06-14T02:44:35.940
> 
> 标签：macos, git, node.js, path, profile

当我在终端中“打开 .profile”时，我有以下内容：

```
export PATH=$PATH:/usr/local/git/bin 
```

现在我为 Mac 安装了 node.js，它说，

> 确保 /usr/local/bin 在您的 $PATH 中。

如何添加`/usr/local/bin`到导出`PATH=$PATH:/usr/local/git/bin`？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-06-14T02:47:26.057

该`PATH`变量包含一个由冒号分隔的目录列表，因此如果要添加多个目录，只需在它们之间放置一个冒号：

```
export PATH=$PATH:/usr/local/git/bin:/usr/local/bin 
```

该语法适用于任何与 Bourne 兼容的 shell（sh、ksh、bash、zsh...）。但是 zsh 是最新版本的 MacOS 中的默认 shell，它也以另一种方式公开 PATH - 作为一个名为 (lowercase) 的变量`$path`，它是一个数组而不是单个字符串。所以你可以这样做：

```
path+=(/usr/local/git/bin /usr/local/bin) 
```

在任何一种情况下，您都可能需要在添加之前检查以确保该目录不在 PATH 中。下面是使用通用语法的样子：

```
for dir in /usr/local/git/bin /usr/local/bin; do
   case "$PATH" in 
     $dir:*|*:$dir:*|*:$dir) :;; # already there, do nothing
     *) PATH=$PATH:$dir          # otherwise add it
   esac
done 
```

这是一个特定于 zsh 的版本：

```
for dir in /usr/local/git/bin /usr/local/bin; do
  if (( ${path[(i)$dir]} > $#path )); then
    path+=($dir)
  fi
done 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-14T02:49:51.377

尝试将 $PATH 放在最后。

```
export PATH=/usr/local/git/bin:/usr/local/bin:$PATH 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-12T13:21:24.037

使路径的编辑值在下一个会话中保持不变

```
cd ~/
touch .bash_profile
open .bash_profile 
```

这将在编辑器中打开 .bash_profile，在将您想要的内容添加到按列分隔每个值的路径之后，在以下内容中写入。

```
export PATH=$PATH:/usr/local/git/bin:/usr/local/bin: 
```

保存，退出，重新启动您的终端并享受

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-20T07:45:15.417

我和你有同样的问题。

cd 到 ../etc/ 然后使用 ls 确保您的“paths”文件位于 vim 路径中，在文件末尾添加“/usr/local/bin”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-19T14:44:42.723

我倾向于觉得这很整洁

```
sudo mkdir -p /etc/paths.d   # was optional in my case
echo /usr/local/git/bin  | sudo tee /etc/paths.d/mypath1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-04T23:19:39.023

**在 MAC OS Catalina 中，** 这是对我有用的步骤，上述所有解决方案确实有帮助，但没有解决我的问题。

1.  检查节点--version，仍然是旧版本。
2.  光盘~/
3.  原子 .bash_profile
4.  删除指向旧节点版本的 $PATH，在我的例子中是 /usr/local/bin/node/@node8
5.  将其添加并保存到 $PATH 而不是“export PATH=$PATH:/usr/local/git/bin:/usr/local/bin”
6.  使用节点关闭所有应用程序（终端、模拟器、浏览器博览会等）
7.  重启终端并检查 node --version

# c# - 从 xaml 将动态大小的 2D 数据绑定到网格

> ID：11025982
> 
> 赞同：1
> 
> 时间：2012-06-14T02:45:14.640
> 
> 标签：c#, .net, xaml, binding, grid

例如，我有一个像这样的对象：`data2D = List<List<string>>`. 我想用`data2D.Count`行和`data2D[LongestSubList].Count`列将它绑定到网格。

`data2D.Count`并且`data2D[LongestSubList].Count`可以通过业务逻辑进行更改，因此网格的行数和列数也应该更改。

从代码中我可以管理它，我可以将每个绑定/取消绑定`data2D[i][j]`到元素添加/删除上的相应单元格，但是有没有办法从 xaml 做到这一点？

# facebook-opengraph - 使用 FQL 查询评论并显示所有回复

> ID：11025986
> 
> 赞同：0
> 
> 时间：2012-06-14T02:46:33.660
> 
> 标签：facebook-opengraph

我正在使用此命令在我的页面 [https://graph.facebook.com/comments/?ids=http://development.deolvet.com/lorem-ipsum/](https://graph.facebook.com/comments/?ids=http://development.deolvet.com/lorem-ipsum/)上显示带有回复的评论。

但它不会显示我想要的确切评论。我想知道是否有人可以在这里帮助我在我的博客上显示所​​有评论并使用 FQL 使用 xid 回复。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:03:50.213

根据您的应用设置，您的元标记设置配置错误。如调试工具中所述，

> 'article' 类型的 URL 'http://development.deolvet.com/lorem-ipsum/' 上的对象无效，因为指定的应用程序 ID '102055106604365' 不允许使用域 'development.deolvet.com'。[您可以在https://developers.facebook.com/apps/102055106604365](https://developers.facebook.com/apps/102055106604365)验证您配置的“应用程序域” 。

将下一个应用程序用作您的开发应用程序或将您的域更改为 development.deolvet.com。

# android - 如何在 PendingIntent 中发送有序广播？

> ID：11025988
> 
> 赞同：7
> 
> 时间：2012-06-14T02:46:45.657
> 
> 标签：android, android-pendingintent

我想在 PendingIntent 中发送有序广播。但我只找到了`PendingIntent.getBroadcast(this, 0, intent, 0)`，我认为只能发送常规广播。那么，我能做些什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-30T12:30:27.223

I got this from [http://justanapplication.wordpress.com/tag/pendingintent-getbroadcast](http://justanapplication.wordpress.com/tag/pendingintent-getbroadcast):

> If the onFinished argument is not null then an ordered broadcast is performed.

So you might want to try calling [PendingIntent.send](http://developer.android.com/reference/android/app/PendingIntent.html#send%28android.content.Context,%20int,%20android.content.Intent,%20android.app.PendingIntent.OnFinished,%20android.os.Handler%29) with the onFinished argument set.

However, I ran into the problem that I had to send an OrderedBroadcast from a Notification. I got it working by creating a BroadcastReceiver which just forwards the Intent as an OrderedBroadcast. I really don't know whether this is a good solution.

So I started out by creating an Intent which holds the name of the action to forward to as an extra:

```
// the name of the action of our OrderedBroadcast forwarder
Intent intent = new Intent("com.youapp.FORWARD_AS_ORDERED_BROADCAST");
// the name of the action to send the OrderedBroadcast to
intent.putExtra(OrderedBroadcastForwarder.ACTION_NAME, "com.youapp.SOME_ACTION");
intent.putExtra("some_extra", "123");
// etc. 
```

In my case I passed the PendingIntent to a Notification:

```
PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
Notification notification = new NotificationCompat.Builder(context)
        .setContentTitle("Notification title")
        .setContentText("Notification content")
        .setSmallIcon(R.drawable.notification_icon)
        .setContentIntent(pendingIntent)
        .build();
NotificationManager notificationManager = (NotificationManager)context
    .getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.notify((int)System.nanoTime(), notification); 
```

Then I defined the following receivers in my Manifest:

```
<receiver
    android:name="com.youapp.OrderedBroadcastForwarder"
    android:exported="false">
    <intent-filter>
        <action android:name="com.youapp.FORWARD_AS_ORDERED_BROADCAST" />
    </intent-filter>
</receiver>
<receiver
    android:name="com.youapp.PushNotificationClickReceiver"
    android:exported="false">
    <intent-filter android:priority="1">
        <action android:name="com.youapp.SOME_ACTION" />
    </intent-filter>
</receiver> 
```

Then the OrderedBroadcastForwarder looks as follows:

```
public class OrderedBroadcastForwarder extends BroadcastReceiver
{
    public static final String ACTION_NAME = "action";

    @Override
    public void onReceive(Context context, Intent intent)
    {
        Intent forwardIntent = new Intent(intent.getStringExtra(ACTION_NAME));
        forwardIntent.putExtras(intent);
        forwardIntent.removeExtra(ACTION_NAME);

        context.sendOrderedBroadcast(forwardIntent, null);
    }
} 
```

# sql - 如何选择最新的行

> ID：11025992
> 
> 赞同：0
> 
> 时间：2012-06-14T02:47:15.963
> 
> 标签：sql, db2

我有两张表，即价格表（表 A）和订单记录（表 B）：-

**表 A**

```
SKU Offer Date  Amt
AAA 20120115    22
AAA 20120223    24
AAA 20120331    25
AAA 20120520    28 
```

**表 B**

```
A001       AAA  20120201
B001       AAA  20120410
C001       AAA  20120531 
```

我必须检索每个客户的最新定价。预期的输出应该是这样的： -

```
Customer  SKU   Order Date  Amt
A001      AAA   20120201    28
B001      AAA   20120410    28
C001      AAA   20120531    28 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:44:37.510

这是 T-SQL - 不确定您正在运行什么，请将其作为标签添加到您的问题中以获得更好的答案 - 在编辑 OP 之前编写此代码，因此请仔细检查 cols。

**根据 x-zeros 的评论**编辑****

 **```
SELECT  B.CUSTOMER,S.SKU,B.ORDERDATE,S.Amt
FROM TABLE_B B 
INNER JOIN 
(   SELECT C.SKU,C.OFFERDATE,C.Amt, 
    ROW_NUMBER() OVER (PARTITION BY C.SKU ORDER BY C.OFFERDATE DESC) X
    FROM TABLE_A C
)S ON S.X = 1 AND B.SKU = S.SKU
ORDER BY B.CUSTOMER

CREATE TABLE TABLE_A 
(SKU varchar(8), OfferDate Date, Amt int)
INSERT INTO TABLE_A
VALUES('AAA', '2012-01-15', 22),
      ('AAA' ,'2012-02-23', 24),
      ('AAA' ,'2012-03-31', 25),
      ('AAA' ,'2012-05-20', 28),
      ('BBB','2011-01-15 00:00:00.000', 33),
      ('BBB','2011-02-23 00:00:00.000', 35),
      ('BBB','2011-03-31 00:00:00.000', 36),
      ('BBB','2011-05-20 00:00:00.000', 39),
      ('CCC', '2012-01-15', 43),
      ('CCC' ,'2012-02-23', 45),
      ('CCC' ,'2012-03-31', 47),
      ('CCC' ,'2012-04-18', 44)

CREATE TABLE TABLE_B 
(CUSTOMER varchar(8),SKU varchar(8), OrderDate Date)
INSERT INTO TABLE_B
VALUES('A001','AAA','2012-02-01'),
      ('B001','AAA','2012-04-10'), 
      ('C001','AAA','2012-05-31'),
      ('A001','BBB','2011-02-01'),
      ('B001','BBB','2011-04-10'),
      ('C001','BBB','2011-05-31'),
      ('B001','CCC','2011-04-10'),
      ('C001','CCC','2011-05-31') 
```**