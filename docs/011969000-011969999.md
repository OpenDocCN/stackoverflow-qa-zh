# StackOverflow 问答 11969000-11969999

# python - 如何安装libjpeg？

> ID：11969000
> 
> 赞同：13
> 
> 时间：2012-08-15T12:09:05.177
> 
> 标签：python, pip, libjpeg

我尝试了这些命令：

```
pip install libjpeg8-dev
pip install libjpeg-dev
pip install libjpeg-devel
pip install libjpeg
pip install libjpeg62 libjpeg62-dev 
```

但它们都不起作用。pip 的正确命令是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-02-06T14:03:57.723

使用 apt-get。作为旁注，我在安装枕头时遇到错误，这些命令帮助了我

```
sudo apt-get install libjpeg-dev
sudo apt-get install zlib1g-dev
sudo apt-get install libpng-dev 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-15T12:11:06.097

`libjpeg`不是 python 模块，pip 永远无法安装它。

使用您的操作系统的打包系统来安装它。例如，在 Ubuntu 和 Debian 上会很合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:59:26.883

实际上我使用 Heroku，因此问题更复杂。[这](https://stackoverflow.com/questions/10213509/python-pil-and-jpeg-on-heroku)是一个解决方案。
编辑：但尝试同时使用基于 hg 和 git 的变体因各种错误而失败。该死！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-18T20:26:47.390

我用自制软件来安装它！

```
brew install libjpeg 
```

希望有帮助

# javascript - 如何在 ModestMaps / Wax 中获取位置点击事件

> ID：11969001
> 
> 赞同：0
> 
> 时间：2012-08-15T12:09:07.307
> 
> 标签：javascript, jquery

我从 MapBox 加载了漂亮的地图，但现在我需要从 Wax / ModestMaps 获取点击事件。以下代码仅在页面加载时触发回调：

```
var mapbg, interaction;
var urlBase = 'http://a.tiles.mapbox.com/v3/mteran.house';

// Build baselayer background
wax.tilejson(urlBase + '.jsonp', function(tilejson) {
  map = new MM.Map('mymap-bg',
  new wax.mm.connector(tilejson));

  map.setCenterZoom(new MM.Location(
    tilejson.center[1], // latitude
    tilejson.center[0]), // longitude
    tilejson.center[2]); // zoom level

  map.addCallback("drawn", function (map) {
    mapbg.setCenterZoom(map.getCenter(), map.getZoom());
  });

  wax.mm.zoomer(map, tilejson).appendTo(map.parent);

  map.setZoomRange(tilejson.minzoom, tilejson.maxzoom);

  wax.mm.interaction()
    .map(map)
    .tilejson(tilejson);

  var house = new MM.Location(map.getCenter());

  house.on('click', alert(map.getCenter()));

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:04:43.247

你想获得什么样的点击事件？[您使用的地图](http://a.tiles.mapbox.com/v3/mteran.house.html#5.00/55.578/11.558)没有启用[TileMill 交互](http://mapbox.com/tilemill/)，所以我假设这不是目标。如果您试图在地图上的任何地方获得点击事件并确定它是否在“房屋区域”上，那么[您的代码已扩展以实现这一点](http://bl.ocks.org/3359934)。

“足够接近”是必要的，因为点就是地图上的点；纬度/经度位置无限小，很难点击它们。

# objective-c - 可可灰色消息叠加

> ID：11969009
> 
> 赞同：4
> 
> 时间：2012-08-15T12:09:33.077
> 
> 标签：objective-c, cocoa, notifications, message

Mac OS X 上的各种应用程序以灰色、透明、圆形框覆盖显示消息，以通知用户某事；例如 Xcode 中的“构建成功”消息、Lion 内联搜索栏中的循环搜索消息和 Chrome 的“退出前警告”消息。

我正在描述的消息框示例：http: [//2.bp.blogspot.com/-eG890NRhQbs/Ty0vLkqpBWI/AAAAAAAAAMs/PO2EbJ3lTs0/s1600/Xcode-11.png](http://2.bp.blogspot.com/-eG890NRhQbs/Ty0vLkqpBWI/AAAAAAAAAMs/PO2EbJ3lTs0/s1600/Xcode-11.png)

由于它们在格式上都非常相似，因此假设存在某种用于显示相似消息的标准函数是有意义的。我怎样才能在我自己的 Cocoa 应用程序中产生这样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:29:32.700

没有公共系统 API 可以执行这些操作。

您可以查看 Matt Gemmell 的版本：向下滚动[到此页面](http://mattgemmell.com/source/)上的 RoundedFloatingPanel 。

或者，如果您想为其他人使用 Google，它们通常被称为 Bezels。绘制系统的私有框架是 BezelServices。

# javascript - 如何在 XHR 请求完成之前显示 div

> ID：11969011
> 
> 赞同：0
> 
> 时间：2012-08-15T12:09:48.640
> 
> 标签：javascript, html, ajax

我在 php 中创建了一个井字游戏。我创建了以下代码来显示网格并将请求发送到 php-

```
<html>
<head>
<script type="text/javascript">
function showData(str)
{
    if(str==""){
        document.getElementById("showData").innerHTML="";
    }
    if(window.XMLHttpRequest){
        //code for IE7+, Firefox, Chreom, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else{
        //code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function(){
        if(xmlhttp.readyState==4 && xmlhttp.status==200){
            document.getElementById("showData").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","tttoe?move="+str,true);
    xmlhttp.send();
}
</script>
</head>
<body>
<center>
<div id="showData">
<table border="1" cellpadding="1" cellspacing="1">
    <tr>
        <td>&nbsp;<input type="button" class="button1" name="move" value="1" onClick="showData(this.value)" />&nbsp;</td>
        <td>&nbsp;<input type="button" class="button1" name="move" value="2" onClick="showData(this.value)" />&nbsp;</td>
        <td>&nbsp;<input type="button" class="button1" name="move" value="3" onClick="showData(this.value)" />&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;<input type="button" class="button1" name="move" value="4" onClick="showData(this.value)" />&nbsp;</td>
        <td>&nbsp;<input type="button" class="button1" name="move" value="5" onClick="showData(this.value)" />&nbsp;</td>
        <td>&nbsp;<input type="button" class="button1" name="move" value="6" onClick="showData(this.value)" />&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;<input type="button" class="button1" name="move" value="7" onClick="showData(this.value)" />&nbsp;</td>
        <td>&nbsp;<input type="button" class="button1" name="move" value="8" onClick="showData(this.value)" />&nbsp;</td>

        <td>&nbsp;<input type="button" class="button1" name="move" value="9" onClick="showData(this.value)" />&nbsp;</td>
    </tr>
</table>
</div>
</center>
</body>
</html> 
```

有没有办法让我可以显示一个文本（处理中.....）直到请求完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:13:41.860

您可以在 html 和您的`div`id中添加：`status``js`

```
document.getElementById('status').innerHTML = 'processing'; 
```

在您的功能开始时和

```
document.getElementById('status').innerHTML = 'whatever you want'; 
```

后

```
if(xmlhttp.readyState==4 && xmlhttp.status==200){ 
```

# database - 在 xhtml 页面中显示来自输入流的图像

> ID：11969016
> 
> 赞同：0
> 
> 时间：2012-08-15T12:10:00.347
> 
> 标签：database, image, jsf, servlets, inputstream

我需要显示一些查询表单数据库并放入输入流的图像。我的框架是 JSF，我知道通过使用 servlet，我可以显示它们。但问题是我的页面中有很多图像放入数据库，现在如果我想从数据库中选择每个图像并显示在我的 xhtml 页面中，需要很多查询。在一个托管bean中，所有图像都放入输入流列表中，我想将每个元素显示为页面中的图像。事实上，我的要求是从输入流中读取图像并显示在 xhtml 页面中。任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:36:23.610

如果您使用的是 Richfaces，您可以使用它`<ui:repeat>`来迭代您的图像列表并用于`<a4j:mediaoutput>`在您的 xhtml 上显示您的图像，[例如](http://livedemo.exadel.com/richfaces-demo/richfaces/mediaOutput.jsf?tab=usage&cid=267499)，另请参阅[如何正确使用 a4j:mediaOutput](https://stackoverflow.com/questions/7677207/how-to-use-a4jmediaoutput-correctly-for-displaying-images) 和另一个[示例](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_mediaOutput.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:57:52.440

> *现在，如果我想从数据库中选择每个图像并显示在我的 xhtml 页面中，则需要大量查询*

这究竟是如何形成问题的？你测量过性能吗？瓶颈*真的*在“大量查询”中吗？我真的不明白为什么会形成瓶颈。它应该通过适当设计的数据模型快速实现，一个自尊的 SQL 数据库正是为此目的而设计的。

您的瓶颈*实际上*不是建立数据库连接的步骤，并且您在*每个*查询中都这样做，因为您没有使用连接池？如果是这样，那么是的，它的执行速度非常慢是可以理解的。建立一个数据库连接可能慢到 100~500 毫秒。这正是很久以前发明连接池的原因。然后，连接只会在“空闲时间”期间被初始化和清理，并以线程安全的方式共享/重用，因此从中获得连接的时间应该不超过 10 毫秒或其他时间。

如果你修复你的数据层以利用一个体面的连接池，那么你可以继续使用你的 servlet，它**已经**是特定工作的正确工具。

# javascript - 用于绘制活动时间的非 Highcharts 库（如基本甘特图）？

> ID：11969021
> 
> 赞同：1
> 
> 时间：2012-08-15T12:10:15.103
> 
> 标签：javascript, jquery, time, charts

我想找到一个可以绘制条形图以显示活动发生时间和持续时间的库，例如在此示例中：http: [//jsfiddle.net/highcharts/r6emu/](http://jsfiddle.net/highcharts/r6emu/)（或至少相当相似）。

因为它是为了一些不会赚钱的东西，所以我宁愿不为 High Charts 付费。更重要的是，我最终希望开源它，而不是通过解释他们可能需要购买 High Charts 来解决许可问题或烦人。

那么在没有 highcharts 的情况下创建类似图表的最佳解决方案是什么？

# jsf - 尽管 JSESSIONID 有效，但 HTTP-Response 中的 JSF-Login-Page

> ID：11969025
> 
> 赞同：1
> 
> 时间：2012-08-15T12:10:41.057
> 
> 标签：jsf, rest, jakarta-ee, jax-rs, jaas

我认为这是一个与 HTTP 相关的问题。

我想在 Android 设备上的 (JEE6) JBoss AS 7 服务器上使用我的 (JAX-RS) RESTeasy 服务。*RESTeasy*服务运行良好。我在客户端使用*Restlet-Client*。这也有效 -*没有*安全性。

我想为 web.xml 中的模式使用基于 JAAS-Formbased 的`/rest/*`安全*性*。所以我必须将带有表单数据（`j_username`和`j_password`）的 HTTP-POST-Request 发送到`/foo/j_security_check`.

我`JSESSIONID`从服务器的第一个响应中得到：

```
 HTTP/1.1 200 OK
  Server: Apache-Coyote/1.1
  Set-Cookie: JSESSIONID=uKUqlkUWdhX2l-FihiWyeSJr.undefined; Path=/foo
  Pragma: No-cache
  Cache-Control: no-cache
  Expires: Thu, 01 Jan 1970 01:00:00 CET
  X-Powered-By: JSF/2.0
  Content-Type: text/html;charset=utf-8
  Content-Length: 1028
  Date: Wed, 15 Aug 2012 11:42:59 GMT 
```

对于这个匿名会话，我正在验证...

**标题：**

```
 POST /foo/j_security_check HTTP/1.1
  Date: Wed, 15 Aug 2012 11:42:58 GMT
  Accept: text/html
  Host: 172.24.47.5:8080
  User-Agent: Restlet-Framework/2.0.14
  Cookie: JSESSIONID=uKUqlkUWdhX2l-FihiWyeSJr.undefined
  Content-Length: 62
  Content-Language: *
  Content-Type: application/x-www-form-urlencoded; charset=UTF-8 
```

**内容：**

```
j_username=Bob&j_password=a 
```

...它的工作原理：**JBoss-Security-TRACE**：

> 2012-08-15 13:22:26,829 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] (http-0.0.0.0-0.0.0.0-8080-4)**用户 'Bob' 已通过身份验证，loginOk=true**

**现在的问题：**在以下请求中，我想获取 REST-URL（使用 Cookie JSESSIONID）：

```
 GET /foo/rest/sync/products HTTP/1.1
  Date: Wed, 15 Aug 2012 11:42:59 GMT
  Accept: application/json
  Host: 172.24.47.5:8080
  User-Agent: Restlet-Framework/2.0.14
  Cookie: JSESSIONID=uKUqlkUWdhX2l-FihiWyeSJr.undefined
  Content-Length: 0 
```

但是，服务器不是返回带有 JSON 内容的响应，而是返回 JSF-Login-Page，因为它希望我再次进行身份验证（？）：

```
 HTTP/1.1 200 OK
  Server: Apache-Coyote/1.1
  Pragma: No-cache
  Cache-Control: no-cache
  Expires: Thu, 01 Jan 1970 01:00:00 CET
  X-Powered-By: JSF/2.0
  Content-Type: text/html;charset=utf-8
  Content-Length: 936
  Date: Wed, 15 Aug 2012 11:42:59 GMT

  <?xml version="1.0" encoding="utf-8"?> ... ... ... </html> 
```

如果我使用浏览器登录，然后打开 REST-URL，它就可以正常工作。这是浏览器的 GET 请求：

```
 GET http://localhost:8080/foo/rest/sync/products HTTP/1.1
  Host: localhost:8080
  Connection: keep-alive
  User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko)    
  Chrome/19.0.1084.56 Safari/536.5
  Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
  Accept-Encoding: gzip,deflate,sdch
  Accept-Language: de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
  Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
  Cookie: JSESSIONID=royq26yLd7REOz2otiZdTl6j.undefined 
```

有人有想法吗？我认为问题在于最后一个请求（GET /foo/rest/sync/products），因为在浏览器中它工作正常。

谢谢

# iphone - 我应该如何在 iOS 中动态创建表单？

> ID：11969030
> 
> 赞同：1
> 
> 时间：2012-08-15T12:10:59.753
> 
> 标签：iphone, ios, xml

我正在创建一个 iPhone 应用程序，我需要能够动态创建一个用户可以输入数据的“表单”。例如，假设我正在制作 Dominoes Pizza 应用程序，您可以在其中通过应用程序内的“表单”订购比萨饼。此表单具有不同的部分标题（比萨、意大利面、沙拉等）不同的“单选按钮”，例如选项（肉比萨、奶酪比萨等）和一些条件选项（例如，您可能只看到比萨的选项如果您选择了比萨复选框，则添加配料）。我的应用程序将与此类似，具有许多复选框、单选按钮、下拉菜单等的表单。

我的问题是存储用于动态创建此类表单的信息的最佳方式是什么？我的要求是易于更改（比如说奶酪比萨现在要多花 2 美元），并且应该能够由编程经验有限的人更改。

我的第一直觉是使用这样的 XML：

```
<Item>Pizza</Item>
    <Type>Dropdown List</Type>
    <Cost> $5.0 </Cost>
    <Option> Cheese Pizza </Option>
    <Option> Pepperoni Pizza </Option>
    <Option> Meat Pizza </Option>
<Item>Salad</Item>
    <Type>Radio Buttons</Type>
    <Cost> $2.0 </Cost>
    <Option> Yummy Salad </Option>
    <Option> Icky Salad </Option> 
```

在我的应用程序中有这个文件，然后我可以解析它，每当我看到“单选按钮”类型时，创建一个单选按钮，每当我看到“下拉列表”时创建一个下拉列表。唯一的问题是，如果用户已经选择了比萨，则可能难以做出条件选项，例如仅显示沙拉项目。

这是最适合用于这种情况的技术吗？XML？请注意，我不希望它严格地成为 Web 应用程序，因为我希望能够使用诸如“UISegmentedControl”之类的 Objective-C 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:14:36.823

是的，XML 绝对是一个不错的选择。您还应该考虑使用 JSON。在您的 Web 服务上生成信息，使用 JSON 对其进行编码，在应用程序中下载 JSON 字符串，然后解析并保存该字符串。

一旦您在应用程序中获得数据，我将使用 a`UITableView`来动态创建表单。a 的数据源`UITableView`是 a `NSArray`，这很容易从 XML 或 JSON 解析中获得。

# php - 将画布图像保存为图像文件并强制下载 - 无法打开下载对话框

> ID：11969031
> 
> 赞同：0
> 
> 时间：2012-08-15T12:11:04.260
> 
> 标签：php, ajax, html, canvas, force-download

我正在尝试将画布保存为图像文件，用户可以确定要下载的图像格式（png 或 jpg），然后强制下载文件而不将文件存储在服务器上。

这是我到目前为止得到的：

JS脚本：

```
$.ajax(
{
type : "POST",
    url : "../php/download_image.php",
data:
    {
    format: 'png',
    dataURL: flattenCanvas.toDataURL('image/png')
    }
}); 
```

PHP：

```
 $data = $_POST['dataURL'];
    $format = $_POST['format'];
    $file = $file = md5(uniqid()) . '.'.$format;
    $uri =  substr($data,strpos($data,",")+1);
    file_put_contents($file, base64_decode($uri));

    if($format == 'png')
    {
        if (file_exists($file)) {
        header('Content-Description: File Transfer');
        header('Content-Type: image/png');
        header('Content-Disposition: attachment; filename='.basename($file));
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Pragma: public');
        header('Content-Length: ' . filesize($file));
        readfile($file);
        exit;
        }
        else {
        echo "$file not found";
        }
    } 
```

该代码无法强制下载，我不知道它为什么不起作用。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:53:40.257

如果您不想将文件存储在服务器上，则无需以任何方式与服务器交互。[只需让用户下载此处](https://stackoverflow.com/questions/8126623/downloading-canvas-element-to-an-image "这里")描述的画布内容即可。

# ruby-on-rails - 在 Rails 中处理 Oauth Consumer Key 和 Secret 的正确方法是什么？

> ID：11969043
> 
> 赞同：4
> 
> 时间：2012-08-15T12:11:43.670
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, security, oauth

我有一个使用 OAuth 连接到 Facebook 的 Rails 应用程序。我正在寻找有关**如何处理**我从 facebook 获得的 OAuth 密钥和秘密的完整描述。

1.  在哪里存放它们？
2.  如何将它们存储在那里？我看到一个答案说它应该是一个环境变量，但我正在寻找细节：如何将它们添加到环境中？手动？脚本？什么脚本？它应该在哪里？源代码控制呢？生产呢？
3.  为了在开发、测试和生产中实施解决方案，我应该知道的任何其他细节。

我见过这个问题的一些变体，但从来没有完整而详细的答案。

我真的在寻找整体流程，但也需要所有看起来微不足道但对理解这一点很重要的小细节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T20:53:53.583

您需要将密钥和特定于环境的配置存储在代码之外。您应该以一种允许您将源代码发布到公共存储库（例如 github）的方式存储这些文件，而不会忽略源代码控制中的任何文件。这是十二因素方法论的原则。

无论如何，要回答您的问题，您可以将这些键添加为 shell 变量。这假设您正在 *nix 上进行开发。

```
$ echo "export OAUTH_SECRET='kie92j8fKEHHE92Va1njk3'" >> ~/.bash_profile 
```

现在在您的 Rails 代码中，您可以访问所有环境变量：

```
ENV["OAUTH_SECRET"] 
```

这些环境变量可以在部署脚本中设置，该脚本会在命令行上提示您输入它们。这也允许团队中的每个开发人员拥有自己的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:33:19.050

大多数人创建自己的 config.yml。这很容易做到。[这里](https://stackoverflow.com/questions/592554/best-way-to-create-custom-config-options-for-my-rails-app)是创建 config.yml 的详细说明

# javascript - 用户权限处理

> ID：11969044
> 
> 赞同：0
> 
> 时间：2012-08-15T12:11:46.400
> 
> 标签：javascript, html, security

这是关于网站用户权限的最佳实践问题。如果用户无权在页面上执行某些操作，是否更好 A. 在渲染和隐藏按钮之前进行这些安全检查 B. 继续渲染按钮并在用户单击按钮时进行安全检查，并在他们没有权限时通知他们。

我倾向于 B 有几个原因。其中两个原因是更快的初始加载时间并且对用户来说也更清楚。如果他们没有看到该按钮，他们可能不明白由于安全原因它不存在，这可能会导致呼叫支持。

我很想听听对此的其他意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:30:54.777

即使按钮被隐藏，您也应该始终在执行某些操作之前进行安全检查。请记住，无论您的网页提供什么按钮，客户端都可以发送他想要的任何 HTTP 请求。

当然，在显示按钮时检查用户权限也会很有用。我认为，最好的做法不是隐藏它们，而是将它们“变灰”或以另一种视觉方式显示，某个动作存在但无法执行。如果他首先必须按下按钮来检查它们是否在工作，这对用户来说会很烦人。

# sql - 查找过去两个日历年的先前等效日期

> ID：11969046
> 
> 赞同：1
> 
> 时间：2012-08-15T12:11:48.747
> 
> 标签：sql, sql-server-2008-r2

如果今天是 2012 年 8 月 15 日，则查询应返回以下内容

```
15/01/2011,
15/02/2011,
...
...
15/07/2012
15/08/2012 
```

如果今天是 2012 年 8 月 31 日，则查询将返回

```
31/01/2011,
28/02/2011,  <<<<this is the nearest date
...
...
31/07/2012
31/08/2012 
```

我们的仓库中有一个 vw_DimDate 应该会有所帮助

**编辑** 它包含以下字段

![在此处输入图像描述](../Images/1040f3d4eb459cbf7f901969a6d9298a.png)

目前我正在使用以下内容，但看起来相当复杂！...

```
DECLARE @Dt DATETIME = '31 JUL 2012'--GETDATE()

;WITH DateSet_cte(DayMarker)
        AS
        (
        SELECT DayMarker
        FROM WHData.dbo.vw_DimDate
        WHERE 
                DayMarker >= CONVERT(DATETIME,CONVERT(CHAR(4),DATEADD(YEAR,-1,@Dt),112) + '0101') AND
                DayMarker <=@Dt
        )
, MaxDate_cte(MaxDate)
        AS
        (
        SELECT [MaxDate] = MAX(DayMarker)
        FROM DateSet_cte 
        )       
SELECT
            [Mth] = CONVERT(DATETIME,CONVERT(CHAR(6),a.DayMarker,112) + '01')
            , MAX(a.DayMarker) [EquivDate]
FROM DateSet_cte a
WHERE DAY(a.DayMarker) <= (SELECT DAY([MaxDate]) FROM MaxDate_cte)
GROUP BY CONVERT(DATETIME,CONVERT(CHAR(6),a.DayMarker,112) + '01') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:16:59.673

```
;with Numbers as (
    select distinct number from master..spt_values where number between 0 and 23
), Today as (
    select CONVERT(date,CURRENT_TIMESTAMP) as d
)
select
    DATEADD(month,-number,d)
from
    Numbers,Today
where DATEPART(year,DATEADD(month,-number,d)) >= DATEPART(year,d) - 1 
```

根据我们一年中的距离，想要可变数量的返回值似乎很奇怪，但这就是我已经实现的。

当您使用`DATEADD`将`month`s 添加到一个值时，如果它会产生一个超出范围的日期（例如 2 月 31 日），它会自动调整天数，使其成为该月的最后一天。或者，正如[文档](http://msdn.microsoft.com/en-us/library/ms186819.aspx)所说：

> 如果*datepart*是**月份**，并且*日期*月份的天数比返回月份的天数多，并且返回月份中不存在*日期日期*，则返回返回月份的最后一天。

当然，如果您的数据库中已经有一个 numbers 表，您可以消除第一个 CTE。您提到您“我们的仓库中有一个 vw_DimDate 应该会有所帮助”，但是由于我*不*知道那个（大概是一个）视图包含什么，所以它没有任何帮助。

# sql-server-2008-r2 - 存储过程以获取表列表和使用所有数据库中的这些表的存储过程

> ID：11969053
> 
> 赞同：0
> 
> 时间：2012-08-15T12:12:07.160
> 
> 标签：sql-server-2008-r2

一个完成以下工作的存储过程：当我传递一个列名时，我应该得到一个包含该列的所有表的列表，以及一个使用所有数据库中这些表的所有存储过程的列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-17T05:29:30.337

```
 DECLARE @rolename AS VARCHAR(200) = 'testx_table'
  DECLARE @string1 VARCHAR(2000) = '',
          @string2 VARCHAR(2000) = '',
          @string3 VARCHAR(2000) = '',
          @string4 VARCHAR(2000) = ''

  IF @rolename = 'testx_table'
    GOTO table_op

  IF @rolename = 'testx_proc'
    GOTO proc_op

  TABLE_OP:

  BEGIN
      DECLARE @catalog   VARCHAR(500),
              @schema    VARCHAR(50),
              @tablename VARCHAR(500),
              @tabletype VARCHAR(50)
      DECLARE crs_tables CURSOR FOR
        SELECT table_catalog,
               table_schema,
               table_name,
               table_type
        FROM   [INFORMATION_SCHEMA].tables
        WHERE  table_schema = 'DBO'

      OPEN crs_tables

      FETCH next FROM crs_tables INTO @catalog, @schema, @tablename,
      @tabletype

      SELECT @catalog = table_catalog,
             @schema = table_schema,
             @tablename = table_name,
             @tabletype = table_type
      FROM   [INFORMATION_SCHEMA].tables
      WHERE  table_schema = 'DBO'
             AND @catalog = table_catalog
             AND @schema = table_schema
             AND @tablename = table_name
             AND @tabletype = table_type

      SET @string1 = 'GRANT INSERT ON ' + '[dbo]' + '.' + @tablename
                     + ' TO ' + @rolename
      SET @string2 = 'GRANT DELETE ON ' + '[dbo]' + '.' + @tablename
                     + ' TO ' + @rolename
      SET @string3 = 'GRANT UPDATE ON ' + '[dbo]' + '.' + @tablename
                     + ' TO ' + @rolename
      SET @string4 = 'GRANT SELECT ON ' + '[dbo]' + '.' + @tablename
                     + ' TO ' + @rolename

      EXEC(@string1)

      EXEC(@string2)

      EXEC(@string3)

      EXEC(@string4)

      WHILE @@FETCH_STATUS = 0
        BEGIN
            SELECT @catalog = table_catalog,
                   @schema = table_schema,
                   @tablename = table_name,
                   @tabletype = table_type
            FROM   [INFORMATION_SCHEMA].tables
            WHERE  table_schema = 'DBO'
                   AND @catalog = table_catalog
                   AND @schema = table_schema
                   AND @tablename = table_name
                   AND @tabletype = table_type

            FETCH next FROM crs_tables INTO @catalog, @schema, @tablename,
            @tabletype

            SET @string1 = 'GRANT INSERT ON ' + '[dbo]' + '.' + @tablename
                           + ' TO ' + @rolename
            SET @string2 = 'GRANT DELETE ON ' + '[dbo]' + '.' + @tablename
                           + ' TO ' + @rolename
            SET @string3 = 'GRANT UPDATE ON ' + '[dbo]' + '.' + @tablename
                           + ' TO ' + @rolename
            SET @string4 = 'GRANT SELECT ON ' + '[dbo]' + '.' + @tablename
                           + ' TO ' + @rolename

            EXEC(@string1)

            EXEC(@string2)

            EXEC(@string3)

            EXEC(@string4)
        END

      CLOSE crs_tables

      DEALLOCATE crs_tables

      GOTO EXIT
  END

  /* */
  PROC_OP:

  BEGIN
      DECLARE @p_catalog VARCHAR(500),
              @p_schema  VARCHAR(50),
              @p_name    VARCHAR(500),
              @p_type    VARCHAR(50),
              @xtype     VARCHAR(50)
      DECLARE crs_routines CURSOR FOR
        SELECT r.specific_catalog,
               r.specific_schema,
               r.specific_name,
               r.routine_type,
               s.xtype
        FROM   [INFORMATION_SCHEMA].routines r
               INNER JOIN sysobjects s
                       ON s.NAME = r.specific_name
        --and s.xtype = 'FN'
        WHERE  r.specific_schema = 'DBO'

      OPEN crs_routines

      FETCH next FROM crs_routines INTO @p_catalog, @p_schema, @p_name,
      @p_type,
      @xtype

      SELECT @p_catalog = r.specific_catalog,
             @p_schema = r.specific_schema,
             @p_name = r.specific_name,
             @p_type = r.routine_type,
             @xtype = s.xtype
      FROM   [INFORMATION_SCHEMA].routines r
             INNER JOIN sysobjects s
                     ON s.NAME = r.specific_name
      --and s.xtype = 'FN'
      WHERE  r.specific_schema = 'DBO'
             AND @p_catalog = r.specific_catalog
             AND @p_schema = r.specific_schema
             AND @p_name = r.routine_name
             AND @p_type = r.routine_type

      SET @string1 = 'GRANT ' + CASE WHEN @p_type = 'PROCEDURE' OR @xtype =
                     'FN'
                     THEN ' EXECUTE '
                     ELSE ' SELECT' END + ' ON ' + '[dbo]' + '.' + '[' +
                     @p_name +
                     ']'
                     + ' TO ' + @rolename
      SET @string2 = 'GRANT ' + ' VIEW DEFINITION ' + ' ON ' + '[dbo]'
                     + '.' + '[' + @p_name + ']' + ' TO ' + @rolename

      PRINT @string1 + ' / ' + @p_type

      EXEC(@string1)

      EXEC(@string2)

      WHILE @@FETCH_STATUS = 0
        BEGIN
            SELECT @p_catalog = r.specific_catalog,
                   @p_schema = r.specific_schema,
                   @p_name = r.specific_name,
                   @p_type = r.routine_type,
                   @xtype = s.xtype
            FROM   [INFORMATION_SCHEMA].routines r
                   INNER JOIN sysobjects s
                           ON s.NAME = r.specific_name
            --and s.xtype = 'FN'
            WHERE  r.specific_schema = 'DBO'
                   AND @p_catalog = r.specific_catalog
                   AND @p_schema = r.specific_schema
                   AND @p_name = r.routine_name
                   AND @p_type = r.routine_type

            FETCH next FROM crs_routines INTO @p_catalog, @p_schema, @p_name
            ,
            @p_type,
            @xtype

            SET @string1 = 'GRANT ' + CASE WHEN @p_type = 'PROCEDURE' OR
                           @xtype =
                           'FN'
                           THEN ' EXECUTE '
                           ELSE ' SELECT' END + ' ON ' + '[dbo]' + '.' + '['
                           +
                           @p_name
                           +
                           ']'
                           + ' TO ' + @rolename
            SET @string2 = 'GRANT ' + ' VIEW DEFINITION ' + ' ON ' + '[dbo]'
                           + '.' + '[' + @p_name + ']' + ' TO ' + @rolename

            PRINT @string1 + ' / ' + @p_type

            PRINT @string2 + ' / ' + @p_type

            EXEC(@string1)

            EXEC(@string2)
        END

      CLOSE crs_routines

      DEALLOCATE crs_routines

      GOTO EXIT
  END 
```

# tomcat - 在 Netbeans 7.1.2 中使用 Thymeleaf

> ID：11969056
> 
> 赞同：1
> 
> 时间：2012-08-15T12:12:16.773
> 
> 标签：tomcat, netbeans, thymeleaf

我已经在 Netbeans 和 Tomcat 中使用 JSP/JSTL 很长时间了，但现在我厌倦了愚蠢的模板引擎，所以我决定尝试[Thymeleaf](http://www.thymeleaf.org)。到目前为止它工作得很好，但是每当我保存 Thymeleaf 模板时，我都需要重新部署我的应用程序以更新模板。

保存时如何使 Netbeans 自动更新已部署的模板文件？

（我无法添加“百里香”标签，因为我的分数太少了。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:45:14.700

当我禁用模板解析器的缓存时，它似乎有帮助。

将此属性添加到模板解析器 bean：

```
<property name="cacheable" value="false" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T18:00:43.163

Thymeleaf 模板解析器默认缓存解析的模板，以提高性能。请注意，此解析仅适用于模板本身，而不适用于用于处理它们的数据。

正如您所说，如果您希望 Thymeleaf 在每次处理模板时重新读取模板，则需要`cacheable`将模板解析器（[TemplateResolver.java](http://www.thymeleaf.org/apidocs/thymeleaf/2.0.4/org/thymeleaf/templateresolver/TemplateResolver.html#isCacheable%28%29)）中的属性转换为：`false`

```
<property name="cacheable" value="false" /> 
```

# d - 如何在 DMD 2.060 下解决此联合尺寸/对齐要求

> ID：11969058
> 
> 赞同：2
> 
> 时间：2012-08-15T12:12:21.697
> 
> 标签：d, dmd

可以在 DMD 2.059 下编译包含以下代码段的 D2 源代码

```
union Prefix {
  char[9] data;
  align(1) struct { uint fileno; uint lineno; char delim; };
}
static assert(Prefix.sizeof == 9); 
```

不幸的是，在 DMD 2.060 下失败（Prefix.sizeof 等于 12）。

如何修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:37:58.607

这似乎做你想做的事：

```
align(1) union Prefix
{
    ubyte[9] data;

    struct
    {
        uint fileno;
        uint lineno;
        char delim;
    }
}

static assert(Prefix.sizeof == 9); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:36:46.720

把关键字放在`align(1)`前面`union`就足以让assert通过了，因为里面的数据是自然对齐的，没有间隙。否则，您需要`align(1):`在联合/结构的字段之前添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:56:11.647

可能是一个错误。或者一些晦涩的逻辑，因为命名结构会返回对齐。

编辑：提交了一个错误：[http ://d.puremagic.com/issues/show_bug.cgi?id=8566](http://d.puremagic.com/issues/show_bug.cgi?id=8566)

编辑：沃尔特在那里向我解释了我的错误:)

# javascript - 追踪 JavaScript 内存泄漏的工具

> ID：11969062
> 
> 赞同：20
> 
> 时间：2012-08-15T12:12:30.813
> 
> 标签：javascript, memory-leaks, google-chrome-devtools

我有一个 Web 应用程序在某处存在内存泄漏，但我无法检测到它。我已经尝试过通常运行良好的 Chrome 开发人员工具，但我无法追踪负责的代码行。Chrome 工具只是给了我太多信息，我无法将内存中的对象与我的代码相关联。

还有其他可能有用的工具吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-21T18:52:22.690

**更新：** 让我们使用**记录堆分配配置**文件类型。

1.  打开 devtools 分析器
2.  做一个热身动作
3.  启动分析器
4.  重复动作几次
5.  如果操作有泄漏，您将在概览窗格中看到相同数量的蓝色条组
6.  停止探查器
7.  在概览中选择一组蓝色条
8.  查看对象列表

请参阅截屏视频[Javascript 内存泄漏检测 (Chrome DevTools)](http://youtu.be/ZKzw3VEqifw)

**是：** 您可以使用下一个场景来解决内存泄漏问题。

1.  打开 devtools 分析器
2.  做一个泄漏的动作
3.  拍摄堆快照
4.  重复步骤 2 和 3 树次
5.  选择最新的堆快照
6.  将过滤器“所有对象”更改为“快照 1 和 2 之间的对象”

之后，您将看到 objects 一组泄漏的对象。您可以选择一个对象并查看对象的保留树中的保留者列表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:28:10.487

[使用Heap Profiler的](https://developers.google.com/chrome-developer-tools/docs/heap-profiling-dom-leaks)[Detached DOM 树](https://developers.google.com/chrome-developer-tools/docs/heap-profiling#views_dom)视图中元素的 innerHTML 和 outerHTML 值将内存中的对象映射到您的代码并跟踪内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-21T08:02:01.980

jQuery ajax 请求是我的应用程序中最大的罪魁祸首。找到所有 ajax jQuery 函数：.ajax()、.get()、.post() 和内容设置器：.html()、.text()。

转到开发工具中的网络选项卡，刷新当前页面 10 到 20 次。如果你看到事情堆积得太频繁，或者调用没有完成，你就有内存泄漏。

这是我最近能够用 jQuery.load() 解决的内存泄漏...

`if(!jQuery.terms_html) $('#tc_container').load(STATIC_DOMAIN + '/terms.html', function() { jQuery.terms_html = $('#tc_container').html() }) else $('#tc_container').html(jQuery.terms_html)`

此外，在撰写本文时，最新版本的 jQuery 是**3.3.1**。如果可能的话，安装最新版本是最好的开始方式。 [https://github.com/jquery/jquery/releases](https://github.com/jquery/jquery/releases)

# c# - 如何解析具有嵌套元素（complexType 和 simpleType 元素和属性）的 xsd 文件？

> ID：11969063
> 
> 赞同：3
> 
> 时间：2012-08-15T12:12:35.160
> 
> 标签：c#, xsd, schema, complextype

我有一个这样的xsd文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="transfer">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="sourceGLN" type="xs:string" minOccurs="1" maxOccurs="1" />
                <xs:element name="destinationGLN" type="xs:string" minOccurs="1" maxOccurs="1" />
                <xs:element name="actionType" minOccurs="1" maxOccurs="1">
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:enumeration value="P" /> <!-- Mal Alim (Purchase) -->
                            <xs:enumeration value="S" /> <!-- Satis (Sale) -->
                            <xs:enumeration value="C" /> <!-- Cancel Sale (Cancel) -->
                            <xs:enumeration value="R" /> <!-- Iade (Return) -->
                            <xs:enumeration value="D" /> <!-- Deaktivasyon (Deactivation) -->
                            <xs:enumeration value="M" /> <!-- Uretim (Manufacture) -->
                            <xs:enumeration value="I" /> <!-- Ithalat (Import) -->
                            <xs:enumeration value="X" /> <!-- Ihrac (eXport) -->
                            <xs:enumeration value="O" /> <!-- Sarf (cOnsume) -->
                            <xs:enumeration value="N" /> <!-- Bilgi (iNformation) -->
                            <xs:enumeration value="T" /> <!-- Devir (Transfer) -->
                            <xs:enumeration value="L" /> <!-- Devir Iptal (canceL Transfer) -->
                            <xs:enumeration value="F" /> <!-- Aktarim (non-its transFer) -->
                            <xs:enumeration value="K" /> <!-- Aktarim Iptal (non-its cancel transfer) -->
                        </xs:restriction>
                    </xs:simpleType>
                </xs:element>
                <xs:element name="shipTo" type="xs:string" minOccurs="0" maxOccurs="1" />
                <xs:element name="documentNumber" type="xs:string" minOccurs="0" maxOccurs="1" />
                <xs:element name="documentDate" type="xs:date" minOccurs="0" maxOccurs="1" />
                <xs:element name="note" type="xs:string" minOccurs="0" maxOccurs="1" />
                <xs:element name="version" type="xs:string" minOccurs="0" maxOccurs="1" />
                <xs:element name="carrier" type="carrierType" minOccurs="1" maxOccurs="unbounded" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:complexType name="carrierType">
        <xs:sequence minOccurs="1" maxOccurs="unbounded">
            <xs:choice minOccurs="1" maxOccurs="1">
                <xs:element name="productList" type="productListType" minOccurs="1" maxOccurs="1" />
                <xs:element name="carrier" type="carrierType" minOccurs="1" maxOccurs="1" />
            </xs:choice>
        </xs:sequence>
        <xs:attribute name="carrierLabel" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:string">
                    <xs:length value="20" />
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="containerType" type="xs:string" use="optional" />
    </xs:complexType>
    <xs:complexType name="productListType">
        <xs:sequence>
            <xs:element name="serialNumber" type="xs:string" minOccurs="1" maxOccurs="unbounded" />
        </xs:sequence>
        <xs:attribute name="GTIN" type="xs:string" use="required" />
        <xs:attribute name="lotNumber" type="xs:string" use="required" />
        <xs:attribute name="productionDate" type="xs:date" use="optional" />
        <xs:attribute name="expirationDate" type="xs:date" use="required" />
        <xs:attribute name="PONumber" type="xs:string" use="optional" />
    </xs:complexType>
</xs:schema> 
```

我有这样的代码：

```
using System;
using System.Collections;
using System.Xml;
using System.Xml.Schema;

namespace ConsoleApplication1
{
    class XmlSchemaTraverseExample
    {
        static void Main()
        {
            // Add the customer schema to a new XmlSchemaSet and compile it.
            // Any schema validation warnings and errors encountered reading or 
            // compiling the schema are handled by the ValidationEventHandler delegate.
            XmlSchemaSet schemaSet = new XmlSchemaSet();
            schemaSet.ValidationEventHandler += new ValidationEventHandler(ValidationCallback);
            schemaSet.Add("http://www.w3.org/2001/XMLSchema", "C:\\Users\\ahmet.ulusoy\\Desktop\\pts_xml_schema_v_1_4.xsd");
            schemaSet.Compile();

            // Retrieve the compiled XmlSchema object from the XmlSchemaSet
            // by iterating over the Schemas property.
            XmlSchema customerSchema = null;
            foreach (XmlSchema schema in schemaSet.Schemas())
            {
                customerSchema = schema;
            }

            // Iterate over each XmlSchemaElement in the Values collection
            // of the Elements property.
            foreach (XmlSchemaElement element in customerSchema.Elements.Values)
            {

                Console.WriteLine("Element: {0}", element.Name);

                // Get the complex type of the Customer element.
                XmlSchemaComplexType complexType = element.ElementSchemaType as XmlSchemaComplexType;

                // If the complex type has any attributes, get an enumerator 
                // and write each attribute name to the console.
                if (complexType.AttributeUses.Count > 0)
                {
                    IDictionaryEnumerator enumerator =
                        complexType.AttributeUses.GetEnumerator();

                    while (enumerator.MoveNext())
                    {
                        XmlSchemaAttribute attribute =
                            (XmlSchemaAttribute)enumerator.Value;

                        Console.WriteLine("Attribute: {0}", attribute.Name);
                    }
                }

                // Get the sequence particle of the complex type.
                XmlSchemaSequence sequence = complexType.ContentTypeParticle as XmlSchemaSequence;

                // Iterate over each XmlSchemaElement in the Items collection.
                foreach (   XmlSchemaElement childElement in sequence.Items)
                {
                    Console.WriteLine("Element: {0}", childElement.Name);
                }
            }
        }

        static void ValidationCallback(object sender, ValidationEventArgs args)
        {
            if (args.Severity == XmlSeverityType.Warning)
                Console.Write("WARNING: ");
            else if (args.Severity == XmlSeverityType.Error)
                Console.Write("ERROR: ");

            Console.WriteLine(args.Message);
        }
    }
} 
```

当我尝试运行它时，它给了我第一个元素的元素名称。在那之后，我如何获取其他两个 xs:complexType name="carrierType" 和 xs:complexType name="productListType" 及其子元素和属性？

我做了这部分并会更新代码。

我还想用这些数据和数据类型创建一个通用类。我该怎么办？

谢谢你的提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:02:39.943

如果你有一个像上面这样的 xsd 文档，你可能需要这样的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Schema;
using System.Collections;
using System.Data;

namespace ConsoleApplication1
{
    class Program
    {
        private static void Main(string[] args)
        {
            XmlSchemaSet schemaSet = new XmlSchemaSet();
            schemaSet.ValidationEventHandler += new ValidationEventHandler(ValidationCallback);
            schemaSet.Add("http://www.w3.org/2001/XMLSchema", "C:\\Users\\ahmet.ulusoy\\Desktop\\pts_xml_schema_v_1_4.xsd");
            schemaSet.Compile();

            XmlSchema xmlSchema = null;
            foreach (XmlSchema schema in schemaSet.Schemas())
            {
                xmlSchema = schema;
            }

            DataSet myDS = new DataSet();
            myDS.ReadXmlSchema("C:\\Users\\ahmet.ulusoy\\Desktop\\pts_xml_schema_v_1_4.xsd");

            foreach (object item in xmlSchema.Items)
            {
                XmlSchemaElement schemaElement = item as XmlSchemaElement;
                XmlSchemaComplexType complexType = item as XmlSchemaComplexType;

                if (schemaElement != null)
                {
                    Console.Out.WriteLine("Schema Element: {0}", schemaElement.Name);

                    XmlSchemaType schemaType = schemaElement.SchemaType;
                    XmlSchemaComplexType schemaComplexType = schemaType as XmlSchemaComplexType;

                    if (schemaComplexType != null)
                    {
                        XmlSchemaParticle particle = schemaComplexType.Particle;
                        XmlSchemaSequence sequence = particle as XmlSchemaSequence;

                        if (sequence != null)
                        {
                            foreach (XmlSchemaElement childElement in sequence.Items)
                            {
                                Console.Out.WriteLine("    Element/Type: {0}:{1}", childElement.Name,
                                                      childElement.SchemaTypeName.Name);
                            }

                        }
                        if (schemaComplexType.AttributeUses.Count > 0)
                        {
                            IDictionaryEnumerator enumerator = schemaComplexType.AttributeUses.GetEnumerator();

                            while (enumerator.MoveNext())
                            {
                                XmlSchemaAttribute attribute = (XmlSchemaAttribute)enumerator.Value;

                                Console.Out.WriteLine("      Attribute/Type: {0}", attribute.Name);
                            }
                        }
                    }
                }
                else if (complexType != null)
                {
                    Console.Out.WriteLine("Complex Type: {0}", complexType.Name);
                    OutputElements(complexType.Particle);
                    if (complexType.AttributeUses.Count > 0)
                    {
                        IDictionaryEnumerator enumerator = complexType.AttributeUses.GetEnumerator();

                        while (enumerator.MoveNext())
                        {
                            XmlSchemaAttribute attribute = (XmlSchemaAttribute)enumerator.Value;
                            Console.Out.WriteLine("      Attribute/Type: {0}", attribute.Name);
                        }
                    }
                }
                Console.Out.WriteLine();
            }

            Console.Out.WriteLine();
            Console.In.ReadLine();
        }

        private static void OutputElements(XmlSchemaParticle particle)
        {
            XmlSchemaSequence sequence = particle as XmlSchemaSequence;
            XmlSchemaChoice choice = particle as XmlSchemaChoice;
            XmlSchemaAll all = particle as XmlSchemaAll;

            if (sequence != null)
            {
                Console.Out.WriteLine("  Sequence");

                for (int i = 0; i < sequence.Items.Count; i++)
                {
                    XmlSchemaElement childElement = sequence.Items[i] as XmlSchemaElement;
                    XmlSchemaSequence innerSequence = sequence.Items[i] as XmlSchemaSequence;
                    XmlSchemaChoice innerChoice = sequence.Items[i] as XmlSchemaChoice;
                    XmlSchemaAll innerAll = sequence.Items[i] as XmlSchemaAll;

                    if (childElement != null)
                    {
                        Console.Out.WriteLine("    Element/Type: {0}:{1}", childElement.Name,
                                              childElement.SchemaTypeName.Name);
                    }
                    else OutputElements(sequence.Items[i] as XmlSchemaParticle);
                }
            }
            else if (choice != null)
            {
                Console.Out.WriteLine("  Choice");
                for (int i = 0; i < choice.Items.Count; i++)
                {
                    XmlSchemaElement childElement = choice.Items[i] as XmlSchemaElement;
                    XmlSchemaSequence innerSequence = choice.Items[i] as XmlSchemaSequence;
                    XmlSchemaChoice innerChoice = choice.Items[i] as XmlSchemaChoice;
                    XmlSchemaAll innerAll = choice.Items[i] as XmlSchemaAll;

                    if (childElement != null)
                    {
                        Console.Out.WriteLine("    Element/Type: {0}:{1}", childElement.Name,
                                              childElement.SchemaTypeName.Name);
                    }
                    else OutputElements(choice.Items[i] as XmlSchemaParticle);
                }

                Console.Out.WriteLine();
            }
            else if (all != null)
            {
                Console.Out.WriteLine("  All");
                for (int i = 0; i < all.Items.Count; i++)
                {
                    XmlSchemaElement childElement = all.Items[i] as XmlSchemaElement;
                    XmlSchemaSequence innerSequence = all.Items[i] as XmlSchemaSequence;
                    XmlSchemaChoice innerChoice = all.Items[i] as XmlSchemaChoice;
                    XmlSchemaAll innerAll = all.Items[i] as XmlSchemaAll;

                    if (childElement != null)
                    {
                        Console.Out.WriteLine("    Element/Type: {0}:{1}", childElement.Name,
                                              childElement.SchemaTypeName.Name);
                    }
                    else OutputElements(all.Items[i] as XmlSchemaParticle);
                }
                Console.Out.WriteLine();
            }
        }
        static void ValidationCallback(object sender, ValidationEventArgs args)
        {
            if (args.Severity == XmlSeverityType.Warning)
                Console.Write("WARNING: ");
            else if (args.Severity == XmlSeverityType.Error)
                Console.Write("ERROR: ");

            Console.WriteLine(args.Message);
        }
    }

} 
```

您可以针对更具体的情况对其进行改进。例如attributegroup、group、vs... 现在我得到了那个xsd 的通用类。现在我将使用上面 xsd 引用的 xml 设置通用类（之前制作的）。

通过这些操作，我将取消在我的项目中逐个节点读取 xml 的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:36:47.720

对于已编译的[XmlSchemaSet](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.aspx)，我将使用以下集合来遍历全局内容（或命名为您正在寻找的内容`xs:complexType name="carrierType" and xs:complexType name="productListType"`）：

*   [全局属性](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.globalattributes.aspx)
*   [全球元素](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.globalelements.aspx)
*   [GlobalTypes](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.globaltypes.aspx) - 这是您找到复杂类型的地方。

对于所有其他，例如属性组、组、符号，您需要深入了解每个模式（就像您对元素所做的那样）。

此外，您正在查看 PSVI 属性。只是为了确保，也许对于其他阅读，它与“源”XSD 不同。例如，[AttributeUses](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemacomplextype.attributeuses.aspx)与[Attributes](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemacomplextype.attributes.aspx)的不同之处在于可能对不同的需求产生影响。

# perl - 我可以定义一个可以像内置一样在任何地方调用的子程序吗？

> ID：11969064
> 
> 赞同：3
> 
> 时间：2012-08-15T12:12:36.080
> 
> 标签：perl, subroutine, globals

目前，在调试期间，我倾向于插入

```
carp Dumper \@foo, \%bar; 
```

语句到我的代码中，并经常遇到当前包中未导入的`Carp`问题`Data::Dumper`。为了避免这个问题，我在一个始终包含的中心文件中定义了以下子文件：

```
sub main::bla {
    use Carp; use Data::Dumper;
    carp Dumper @_;
} 
```

所以现在我可以做

```
main::bla \@foo, \%bar; 
```

到处都是，但`main::`让我很恼火。是否有类似全局包的东西总是自动导入到任何包中（就像内置插件实际上在任何地方都导入一样）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:38:03.067

你可以叫它

```
::bla( \@foo, \%bar ); 
```

在早期，我曾经将 util 函数放在一个`Ut`包中。这很好，但我注意到我的代码并不像我想象的那样模块化。每个依赖函数的模块只有在有人不厌其烦地*构建*`Ut`该命名空间时才能成功。

 *最后，我认为`use`和`require`语句只是记录依赖关系。有更灵活的方法可以更改库模块调用的代码，而不是更改它们在 main.js 中的实现。

例如，您可以在单个`use`语句中执行此操作。

```
use Ut blah => sub { 
    use Carp; 
    use Data::Dumper;
    carp Dumper @_;
}; 
```

并定义导入：

```
sub import { 
    shift; # It's just me
    my ( $name, $impl ) = @_;
    if ( $name eq 'blah' && ref( $impl ) eq 'CODE' ) { 
        *blah = $_[1];
    }
    ...
} 
```

`ut`当我一次开发大量代码时，我仍然使用这种模式。但我不介意写

```
ut:dump_var( $var ) 
```

而不是保存 3-4 个字符（因为有时我称之为`U::`）。

现在，您似乎不想长期这样做，并且转储变量对开发很有用。如果你真的想这样做，[`Smart::Comments`](http://search.cpan.org/perldoc?Smart%3a%3aComments)是不是这样：

```
### @foo
### %bar 
```

只需要一份使用声明。

```
use Smart::Comments; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:03:26.413

也许更好地用导出和需要的东西制作另一个包？就像，MyTest.pm：

```
package MyTest;

use strict;
use Carp;
use Data::Dumper;

use base qw( Exporter );
our @EXPORT = qw(
    debug
)

sub debug {
    carp Dumper @_;
}

1; 
```

所以你可以在你的脚本中写：

```
use MyTest;

debug {a => 'b', c => 'd' } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:50:57.907

有趣的事实：[有些符号](http://search.cpan.org/perldoc?perlvar#The_Syntax_of_Variable_Names)很神奇，因为它们总是引用它们在`main`包中的值。您可以为这些符号分配子例程，它们将在任何包中可见。

```
{
    package Foo;

    # special names _ ARGV ARGVOUT ENV INC SIG STDERR STDIN STDOUT
    sub ENV { print "In main::ENV ...\n" }
    sub STDIN { print "In main::STDIN ...\n" }
    sub _ { print "In main::_\n" }

    # names that begin with ^ + upper case letter, or all digits
    *{^T} = sub { scalar localtime };
    *{^Gmtime} = sub { scalar gmtime };
    *43 = sub { 42 };

    use Data::Dumper;
    *{^D} = \&Data::Dumper::Dumper;
}

{
    package Bar;
    &ENV;

    STDIN();
    print "The time is ", &^T, "\n";
    print "In London it is ", &{^Gmtime}, "\n";
    print "The answer is ", &43, "\n";

    print "\@foo is ", &^D( \@foo );
} 
```

不建议这样做，除非您想让下一个维护您的代码的人发疯。*

# asp.net-mvc-3 - mvc3 razor 条件包装器 div

> ID：11969070
> 
> 赞同：40
> 
> 时间：2012-08-15T12:13:09.253
> 
> 标签：asp.net-mvc-3, razor

处理这样的事情的最佳方法是什么：

**剃刀代码：**

```
@if(!disableRowDiv)
{
    <div class="row">
}

<div>some content here</div>

@if(!disableRowDiv)
{
    </div>
} 
```

这样 Razor 引擎就不会产生此错误：

**解析器错误消息：**

> if 块缺少结束“}”字符。确保此块中的所有“{”字符都有一个匹配的“}”字符，并且没有一个“}”字符被解释为标记。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-15T12:24:10.893

这应该工作

```
@if(!disableRowDiv)
{
    @:<div class="row">
}
<div>some content here</div>
@if(!disableRowDiv)
{
    @:</div>
} 
```

# java - web服务（ksoap）的android.os.NetworkOnMainThreadException

> ID：11969071
> 
> 赞同：8
> 
> 时间：2012-08-15T12:13:14.207
> 
> 标签：java, android, eclipse, web-services, general-network-error

我是 android 编程新手，并尝试在此示例程序中使用 webservice：

我使用 Android 4.1，我的 IDE 是 Eclipse Juno。我认为编程部分还可以，但可能连接有问题。

```
package com.example.webserviceexample;

import java.io.IOException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    final static String NAMESPACE = "http://tempuri.org/";
    final static String METHOD_NAME = "CelsiusToFahrenheit";
    final static String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
    final static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";

    TextView sonuc;
    EditText deger;
    Button hesapla;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        deger = (EditText) findViewById(R.id.deger);
        sonuc = (TextView) findViewById(R.id.flag);
        hesapla = (Button) findViewById(R.id.hesapla);

        hesapla.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                //request info
                SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
                Request.addProperty("Celcius",deger.getText().toString());

                //envelope
                SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                soapEnvelope.dotNet = true; //.NET = true, php = false

                //putting request to the envelope
                soapEnvelope.setOutputSoapObject(Request);

                //transferring data
                HttpTransportSE aht = new HttpTransportSE(URL); //prepare
                //start
                try {
                        aht.call(SOAP_ACTION, soapEnvelope);
                } 
                catch (IOException e) {
                    e.printStackTrace();
                }
                catch (XmlPullParserException e)
                {
                    e.printStackTrace();
                }

                //waiting and getting response.
                String result;

                try {
                    // we are creating SoapPrimitive Object as waiting for simple variable.
                    result = "Fahrenheit:" + soapEnvelope.getResponse();

                    //writing the result to the textView
                    sonuc.setText(result);
                }
                catch (SoapFault e) {
                    e.printStackTrace();
                }

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

但是，我收到此错误：

```
08-15 11:45:26.294: E/AndroidRuntime(641): FATAL EXCEPTION: main
08-15 11:45:26.294: E/AndroidRuntime(641): android.os.NetworkOnMainThreadException
08-15 11:45:26.294: E/AndroidRuntime(641):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
08-15 11:45:26.294: E/AndroidRuntime(641):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
08-15 11:45:26.294: E/AndroidRuntime(641):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
08-15 11:45:26.294: E/AndroidRuntime(641):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
08-15 11:45:26.294: E/AndroidRuntime(641):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
08-15 11:45:26.294: E/AndroidRuntime(641):  at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
08-15 11:45:26.294: E/AndroidRuntime(641):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:146)
08-15 11:45:26.294: E/AndroidRuntime(641):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
08-15 11:45:26.294: E/AndroidRuntime(641):  at com.example.webserviceexample.MainActivity$1.onClick(MainActivity.java:61)
08-15 11:45:26.294: E/AndroidRuntime(641):  at android.view.View.performClick(View.java:4084)
08-15 11:45:26.294: E/AndroidRuntime(641):  at android.view.View$PerformClick.run(View.java:16966)
08-15 11:45:26.294: E/AndroidRuntime(641):  at android.os.Handler.handleCallback(Handler.java:615)
08-15 11:45:26.294: E/AndroidRuntime(641):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-15 11:45:26.294: E/AndroidRuntime(641):  at android.os.Looper.loop(Looper.java:137)
08-15 11:45:26.294: E/AndroidRuntime(641):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-15 11:45:26.294: E/AndroidRuntime(641):  at java.lang.reflect.Method.invokeNative(Native Method)
08-15 11:45:26.294: E/AndroidRuntime(641):  at java.lang.reflect.Method.invoke(Method.java:511)
08-15 11:45:26.294: E/AndroidRuntime(641):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-15 11:45:26.294: E/AndroidRuntime(641):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-15 11:45:26.294: E/AndroidRuntime(641):  at dalvik.system.NativeStart.main(Native Method) 
```

那么可能是什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-15T12:15:55.847

您不能在主线程上执行网络操作。结帐：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

用于无痛的后台线程:)

编辑：因为即使它已经有好几年了，我仍然会为这个答案投票，所以我不再建议使用 AsyncTask。它有许多已知问题，在此处进行了描述（[http://blog.danlew.net/2014/06/21/the-hidden-pitfalls-of-asynctask/](http://blog.danlew.net/2014/06/21/the-hidden-pitfalls-of-asynctask/)）。相反，我会敦促您使用 Retrofit 或其他为您处理线程的不错的 http 客户端之一。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-11T21:54:39.970

完整示例：

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity {
    private String TAG ="Vik";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AsyncCallWS task = new AsyncCallWS();
        task.execute(); 
    }

    private class AsyncCallWS extends AsyncTask<Void, Void, Void> {
        @Override
        protected Void doInBackground(Void... params) {
            Log.i(TAG, "doInBackground");
            calculate();
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            Log.i(TAG, "onPostExecute");
        }

        @Override
        protected void onPreExecute() {
            Log.i(TAG, "onPreExecute");
        }

        @Override
        protected void onProgressUpdate(Void... values) {
            Log.i(TAG, "onProgressUpdate");
        }

    }

    public void calculate() 
    {
        String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
        String METHOD_NAME = "CelsiusToFahrenheit";
        String NAMESPACE = "http://tempuri.org/";
        String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";

        try { 
            SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
            Request.addProperty("Celsius", "32");

            SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            soapEnvelope.dotNet = true;
            soapEnvelope.setOutputSoapObject(Request);

            HttpTransportSE transport= new HttpTransportSE(URL);

            transport.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive)soapEnvelope.getResponse();

            Log.i(TAG, "Result Celsius: " + resultString);
        }
        catch(Exception ex) {
            Log.e(TAG, "Error: " + ex.getMessage());
        }

        SOAP_ACTION = "http://tempuri.org/FahrenheitToCelsius";
        METHOD_NAME = "FahrenheitToCelsius";
        try { 
            SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
            Request.addProperty("Fahrenheit", "100");

            SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            soapEnvelope.dotNet = true;
            soapEnvelope.setOutputSoapObject(Request);

            HttpTransportSE transport= new HttpTransportSE(URL);

            transport.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive)soapEnvelope.getResponse();

            Log.i(TAG, "Result Fahrenheit: " + resultString);
        }
        catch(Exception ex) {
            Log.e(TAG, "Error: " + ex.getMessage());
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-31T17:47:55.157

尝试将 strictmode 添加到您的应用程序。在您的 onCreate 方法中，添加

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

# java - 改变二进制值元素的位置

> ID：11969073
> 
> 赞同：-2
> 
> 时间：2012-08-15T12:13:20.033
> 
> 标签：java, binary

我有一个包含二进制值（ 101101 ）的字符串。现在我想检查最后一个字母是否为 1 ，如果是，请将其更改为 0 。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:18:18.690

```
String result = "101101".substring(0,5) + "0"; 
```

为什么要检查？最后一个字符将始终为 0，无论它之前是 1 还是 0...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T12:17:47.543

你可以写

```
int i = 0b101101;
if (i & 1 != 0)
   i = i & ~1; 
```

或者更简单

```
i &= ~1; // sets lowest bit to 0. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T12:19:02.820

简单版；

```
String binary = "101101";

binary = binary.substring(0, binary.length() - 1) + "0"; 
```

[这里](http://ideone.com/FUMeP)的例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T12:16:46.217

一种可能的解决方案：

```
 String k = "101101";

    System.out.println(k);

    int len = k.length();
    char[] charr = k.toCharArray();
    if(charr[len - 1] == '1') {
        charr[len - 1] = '0';
    }
    k = new String(charr);

    System.out.println(k); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T12:16:47.403

```
int binary = 0b101101;

if ( binary % 2 != 0 )
{
    binary = binary ^ 1b;
} 
```

# css - 嵌套 :after of :last-child with LESS

> ID：11969075
> 
> 赞同：12
> 
> 时间：2012-08-15T12:13:28.383
> 
> 标签：css, less

使用 LESS 我需要删除元素的 :last-child 中的 :after 属性。

```
li {
    &:after {
        content: '/';
    }
    &:last-child {
        &:after {
            content: '';
        }
    }
} 
```

这显然不是正确的嵌套 - 我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T16:33:23.797

它看起来对我来说是正确的，但如果它不起作用，那么试着不要嵌套第二个`:after`：

```
li {
    &:after {
        content: '/';
    }
    &:last-child:after {
        content: '';
    }
} 
```

如果您的意思是`:after`伪元素仍然显示为最后一个孩子，那么您肯定要改为`content: '';`改为`content: none;`。空字符串仍然会导致生成空框，而*不会*`none`生成框。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T16:58:53.597

您还可以使用：

```
li {
&:not(:last-child):after {
    content: " | ";

  }
} 
```*

# objective-c - UIApplication openURL：不适用于相对 URL

> ID：11969078
> 
> 赞同：4
> 
> 时间：2012-08-15T12:14:04.883
> 
> 标签：objective-c, ios, cocoa-touch, nsurl, uiapplication

这是代码：

```
NSURL *newsUrl = [NSURL URLWithString:@"/Document/News/1593" relativeToURL:[NSURL URLWithString:@"http://exist.ru"]];

// Outputs "http://exist.ru/Document/News/1593"
NSLog(@"%@", [newsUrl absoluteString]);

// works
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[newsUrl absoluteString]]];

// doesn't work
//[[UIApplication sharedApplication] openURL:newsUrl]; 
```

是苹果的bug吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:25:12.800

`NSLog(@"NEW %@", newsUrl)`在我声明`newUrl`为的 Xcode 输出中

```
NSURL *newsUrl = [NSURL URLWithString:@"/Document/News/1593" relativeToURL:[NSURL URLWithString:@"http://exist.ru"]]: 
```

`NSLog`输出是

> `/Document/News/1593 -- http://exist.ru`

但对于 `[newsUrl absoluteString]`

`NSLog`输出是

> `http://exist.ru/Document/News/1593`

所以我猜这`[URLWithString: relativeToURL:]`是给你不同格式的 URL。这就是您的结果无效的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T17:30:47.943

在 iOS 9.x 中似乎不再是问题。

**对于 < iOS 9.x 支持，在调用openURL**之前添加这个非常无用的步骤：

 **```
//Construct your relative URL 
NSURL *url = [NSURL URLWithString:@"path/to/whatever" relativeToURL:
    [NSURL URLWithString:@"http://www.example.com"]];

//FIX
url = [NSURL URLWithString:url.absoluteString]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T19:12:52.350

Not real clear on what you're trying to accomplish, but if you want to programmatically build your URL's with potentially different hosts or paths, why not something like this:

```
NSURL *newsUrl = [NSURL URLWithString:
 [NSString stringWithFormat:@"%@%@",@"http://exist.ru",@"/Document/News/1593"]];

[[UIApplication sharedApplication] openURL:newsUrl]; 
```**

# c# - 重新排序silverlight数据网格中的列

> ID：11969079
> 
> 赞同：1
> 
> 时间：2012-08-15T12:14:12.640
> 
> 标签：c#, silverlight, datagrid, datagridcolumn

我正在编写 Silverlight 应用程序，我有一个数据网格，其中前两列的位置是固定的，但其他列可以重新排序。如果我只是将 CanUserReorder 属性分别设置为 true/false，那么我仍然可以将第 3 列放在第 1 位。

我可以做些什么来实现我需要的行为？

**现在我只能考虑在代码隐藏中手动处理 ColumnReordered/ColumnReordering 事件。有什么我缺少的解决方案吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:35:47.467

查看数据网格的 FrozenColumnCount。

```
dgMyGrid.FrozenColumnCount = 2 
```

这将防止前两列被移动。作为“奖励”，他们不会滚动而其他人滚动（尽管这可能不是你想要的......）

来自 MSDN 博客：http: [//blogs.msdn.com/b/scmorris/archive/2008/10/15/freezing-columns-in-the-silverlight-datagrid.aspx](http://blogs.msdn.com/b/scmorris/archive/2008/10/15/freezing-columns-in-the-silverlight-datagrid.aspx)

# c# - 在 Visual Studio 2010 中添加设置项目的快捷方式

> ID：11969085
> 
> 赞同：9
> 
> 时间：2012-08-15T12:14:31.407
> 
> 标签：c#, .net, winforms, visual-studio-2010, installation

我正在使用 Visual Studio 2010，并且我有一个 .net 桌面应用程序（winform）。我想为项目创建一个设置。我在解决方案中添加了一个设置向导项目。现在我想为程序菜单和桌面添加快捷方式。右键单击“用户程序菜单”并选择添加，我只有以下选项：文件夹、文件、项目输出和程序集。如何添加快捷方式？另一个问题：是否可以将 .net 4.0 添加到设置项目并在必要时安装它？先感谢您。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-07-27T05:25:33.167

如果您想在安装 Windows 应用程序时向桌面添加快捷方式，您应该按照以下步骤操作

1.  从解决方案资源管理器中单击您的设置项目。
2.  单击文件系统编辑器（在解决方案资源管理器顶部）。
3.  打开文件系统编辑器后，在左侧选项卡上，您可以看到“目标机器上的文件系统”。单击应用程序文件夹。
4.  然后在右侧选项卡上出现“MyApp（活动）的主要输出”。右键单击它并选择“从 MyApp（活动）创建主输出的快捷方式”。您现在应该看到快捷方式出现在主输出下方，这是您的应用程序可执行文件。
5.  将该快捷方式从右侧选项卡拖放到左侧选项卡目标计算机上的文件系统 - 用户的桌面文件夹。
6.  现在，安装后 .exe 的快捷方式将出现在桌面上。
7.  您可以单击文件系统编辑器中的快捷方式并从属性网格编辑名称属性以更改图标上显示的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:30:11.270

这里是在项目中添加快捷方式的说明：http: [//support.microsoft.com/kb/837220](http://support.microsoft.com/kb/837220)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:49:00.963

这是一个很好的[视觉效果](http://www.youtube.com/watch?v=SXBlIxHaV1I) 这解释了 vs2010 中的整个设置和部署。

*[我的回答](https://stackoverflow.com/a/17617546/1671639)中的一个简短说明：*

**(1)**文件 -> 新建项目 -> 其他项目类型 -> 设置和部署 -> Visual Studio 安装程序

**(2)**为您的安装项目添加一个名称。

**（3）** 右键应用程序文件夹->添加->项目输出

**(4)** ****选择你各自项目的解决方案“primary output from yours..”****

**(5)** ****添加相应的第 3 方 dll。**** // 永远不要忘记这个。

**(6)**在解决方案资源管理器中右键单击设置项目并**构建**它。

**(7)**在调试文件夹中找到相应的设置（默认）

您将在文件夹中获得`.exe`and `.msi`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-16T20:12:30.287

为了将 .net 框架包含在安装包中，请从解决方案资源管理器中选择您的安装程序项目，右键单击 -> 属性。

在打开的窗口中，按“先决条件”按钮。另一个窗口打开并选择所需的 .Net Framework 版本，然后从单选按钮中选择“从与我的应用程序相同的位置下载先决条件”。

# iphone - 如何在 Objective-C 中实现多级委托

> ID：11969088
> 
> 赞同：3
> 
> 时间：2012-08-15T12:14:41.727
> 
> 标签：iphone, objective-c, ios, ios5

我有 4 个类（视图）：
A、B、C 和 D

A 类调用 B，B 类调用 C，C 类调用 D：
A > B > C > D

在类 DI 中实现了一个委托协议，我想在类 A 中捕获委托事件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T12:24:20.393

有多种方法可以实现这一目标。在你的情况下什么是最好的取决于具体情况。这里有一些想法：

1.  您可以在所有这些类中实现委托协议，然后简单地将其传递下去。
2.  您可以添加一个 ivar 以从 A 访问 D 类并直接传递它（[意大利面条代码](http://en.wikipedia.org/wiki/Spaghetti_code)的危险！）
3.  如果可能的话，您可以更改您的实现，以便您只在 A 中实现委托并在那里处理它。
4.  最后的手段可能是使用`NSNotifications`（不要与`NSUserNotifications`山狮混淆）。在您的 A 类中，您将通知发布到默认通知中心，在 D 类中，您注册到此通知并根据需要处理它。只有在没有其他方法的情况下才使用这种方法，因为这可能会导致更糟糕的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:20:36.463

**将 ClassD 成员委托分配为 ClassA 对象。**

让我解释

如果您在 ClassD 中有一个 UITableView，并且想要触发 ClassA 中的 ClassD tableView Delegates，那么让 tableView 代理分配为 ClassA 对象并在 ClassA 中实现所有 UITableView 代理。

例如：`ClassD_tableView.delegate = classAObj;`

注意：在 Class A 中实现 ClassD tableView 委托方法，不要从 ClassD 内部创建 ClassA 的新对象。您可以通过传递参数或使用 UIResponder 来获取 ClassD 中的父类 A。

# c# - 静态检查器无法在某些条件下评估确定性行为？

> ID：11969090
> 
> 赞同：3
> 
> 时间：2012-08-15T12:14:47.133
> 
> 标签：c#, code-contracts, static-code-analysis, deterministic

我已设法将其归结为以下测试用例，但我想知道这是否是 C# 代码合同中静态检查器的限制，还是我缺少的东西。当我尝试使用一种代码来证明合同时，它会抛出一个**不变的未经证实**的警告，但是（我认为是）一种证明它可以正常工作的等效方法。

最初我认为这可能是因为我没有使用具有 Pure 属性的对象（因此代码合同无法评估属性是否是确定性的）而是在对象周围创建了 Pure 包装器（恰好是*Nullable<Int64>*）没有帮助。

第一个和第三个测试用例之间是否有区别，或者我认为它们是等价的是否正确，只是静态检查器无法正确评估第三种情况？

```
//Works

private Int64? _violations = null;

[ContractInvariantMethod]
private void ObjectInvariant()
{
    Contract.Invariant(CheckIsValid(_violations));
}

[Pure]
public static Boolean CheckIsValid(Int64? value)
{
    return (value.HasValue ? value.Value >= 0 : true);
}

public Class1(Int64 violations)
{
    Contract.Requires(violations >= 0);
    Contract.Ensures(CheckIsValid(_violations));
    _violations = violations;
}

//Doesn't work, not provably deterministic

private Int64? _violations = null;

[ContractInvariantMethod]
private void ObjectInvariant()
{
    Contract.Invariant(_violations.HasValue ? _violations.Value >= 0 : true);
}

public Class1(Int64 violations)
{
    Contract.Requires(violations >= 0);
    Contract.Ensures(_violations.HasValue ? _violations.Value >= 0 : true);
    _violations = violations;
}

//Also doesn't work, even though it's provably deterministic

private PureNullableInt64 _violations = null; //A wrapper class around Int64? with [Pure] getters

[ContractInvariantMethod]
private void ObjectInvariant()
{
    Contract.Invariant(_violations.HasValue ? _violations.Value >= 0 : true);
}

public Class1(Int64 violations)
{
    Contract.Requires(violations >= 0);
    Contract.Ensures(_violations.HasValue ? _violations.Value >= 0 : true);
    _violations = violations;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:13:18.753

所有三个版本都相同，您的第一个版本也不起作用。看起来确实如此，因为您将警告级别设置得足够低，以至于警告被掩盖了。尝试将警告级别设置为最高，您将看到“确保未经证实”警告。

问题是没有合同说`new Nullable<T>(x).Value == x`。只有合同上写着`new Nullable<T>(x).HasValue`。这不足以证明你的不变量。应该为基类指定许多合同，但还没有。您可以将其带到[代码合同论坛](http://social.msdn.microsoft.com/Forums/en/codecontracts/threads)并请求添加。

# umbraco - 在一个 Umbraco 上与多个站点共享一个内容页面（节点）的最佳实践是什么

> ID：11969094
> 
> 赞同：1
> 
> 时间：2012-08-15T12:15:01.183
> 
> 标签：umbraco

我在单个 Umbraco CMS 上有两个站点，例如，我的帐户页面、系统激活页面、购物车页面。我不想向我拥有的每个站点添加相同的页面。

我知道我可以直接使用这些页面，而无需在内容部分创建它们，只需使用模板名称即可。由于某些原因，我确实需要在内容部分创建这些页面，但没有重复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:45:39.520

[听起来像是umbracoInternalRedirectId](http://our.umbraco.org/wiki/reference/umbraco-best-practices/umbracointernalredirectid)的完美候选人。在虚拟节点上，使用内容选择器数据类型添加别名为“umbracoInternalRedirectId”的属性。

然后，您可以使用内容选择器指向包含实际内容的节点。URL 将保持不变，但将显示来自所选节点的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:45:48.653

当我在 Umbraco 中创建一个移动站点作为第二个站点时，我向移动页面添加了一个内容选择器。内容编辑器会在主站点树中选择他们希望内容来自哪里，我只需要快速查找即可获得适当的页面。

也许这可能有效？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:36:04.010

一种解决方案是为每个文档类型添加一个字段，例如复选框列表，指定生成的页面应该显示在哪个站点（站点 a、站点 b、两者）上，然后像 umbraconavihide 字段一样，您可以抑制您不想在一个站点一个站点上看到的东西。

如果 doctype 被所有其他 doctypes 继承，那么您只需要执行一次。

显然，您的所有模板（母版页）都需要在 page_load 中检查此值（例如），并且您的导航宏也需要修改。

在写完之后，TBH 似乎有点过分了。

# oracle - 将分号分隔的数据传递给函数

> ID：11969096
> 
> 赞同：0
> 
> 时间：2012-08-15T12:15:10.097
> 
> 标签：oracle, stored-procedures, plsql, mybatis, stringtokenizer

我想修改下面的过程以 1;2;3 的形式发送数据。在下面的过程中，我发送像 1 这样的数据，然后我检查数据是否是有效数字，如果是，然后我查询某个表并得到数据计数。我无法修改发送分号分隔数据的过程并检查数据是否为数字，这里 p_in_field_value 应该像 1;2;3 应该传递给下面的函数。

```
FUNCTION p_get_option_value(p_in_field_value IN VARCHAR2) RETURN VARCHAR2 IS
    v_is_number boolean;
    v_count number;
    v_option_val VARCHAR2(300);
   begin
     v_is_number := pkg_trial.f_check_value_numeric(p_in_field_value);
       IF (v_is_number = TRUE) THEN
                                  select count(id) into v_count from t_field_option where field_option_id=p_in_field_value;
          if(v_count >=1) THEN
          v_option_val:=  pkg_form_common.f_option_values(p_in_field_value);
          return v_option_val;  
          else
            return p_in_field_value;
                    END IF;

      ELSE
       return p_in_field_value;
       END IF; 

FUNCTION f_check_value_numeric(p_in_field_value IN VARCHAR2) RETURN BOOLEAN IS
    v_is_number number;
   begin
     v_is_number := to_number(p_in_field_value);
      return TRUE;
    exception
       when others then
       return FALSE;

   END f_check_value_numeric; 
```

请让我知道如何执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:22:10.487

不确定应如何计算 v_option_val 的值，但您可以按如下方式拆分分号分隔的数据：

```
FUNCTION p_get_option_value(p_in_field_value IN VARCHAR2) RETURN VARCHAR2 IS
    v_is_number boolean;
    v_count number;
    v_option_val VARCHAR2(300);
    v_pos     NUMBER;
    v_in_field_valid  VARCHAR2(4000);
    v_val     VARCHAR2(4000);
BEGIN
    v_in_field_valid  := p_in_field_value;

    WHILE v_in_field_valid IS NOT NULL 
    LOOP 

      v_pos :=  instr(v_in_field_valid, ';');
      IF v_pos  = 0 THEN
        v_val := v_in_field_valid;
        v_insurance_value := NULL;
      ELSE 
        v_val := SUBSTR(v_in_field_valid, 1, v_pos -1);
        v_in_field_valid := substr(v_str, v_pos + 1);
      END IF;

      v_is_number := pkg_trial.f_check_value_numeric(v_val);
       IF (v_is_number = TRUE) THEN
                                  select count(id) into v_count from t_field_option where field_option_id=v_val;
          if(v_count >=1) THEN
          v_option_val:=  v_option_val || pkg_form_common.f_option_values(v_val);
     END LOOP
    return p_in_field_value;
   END; 
```

# c# - NHibernate - 按分离标准中 Collection 属性的 Max() 排序

> ID：11969097
> 
> 赞同：3
> 
> 时间：2012-08-15T12:15:18.157
> 
> 标签：c#, nhibernate, criteria

我正在尝试通过聚合其集合的属性（NHibernate 3.2.0）来订购查询。

这是示例：

```
 CurrentSession.CreateCriteria<Note>()
                    .Add(Subqueries.PropertyIn("Id",  
DetachedCriteria.For<SubNote>()
.SetProjection(Projections.ProjectionList()
.Add(Projections.Alias(Projections.Max("Date"), "maxDate")))
.AddOrder(Order.Desc("maxDate")))
                       .List<Note>(); 
```

这不起作用，它说“注意”中没有属性“maxDate”

我想要的是在其收集 SubNote 的最大日期之前订购 Note。

谢谢！

解决方案

```
 var subQuery = DetachedCriteria
    .For<SubNote>("sn")
    .SetProjection(
        Projections.Alias(Projections.Max("Date"), "maxDate"))
        .Add(Restrictions.EqProperty("Note.Id", "n.Id"));

var results = CurrentSession.CreateCriteria<Note>("n")

    .AddOrder(Order.Desc(Projections.SubQuery(subQuery)))
    .List<Note>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:06:16.963

尝试这个：

```
var subQuery = DetachedCriteria
    .For<SubNote>("sn")
    .SetProjection(
        Projections.Alias(Projections.Max("Date"), "maxDate"))
    .Add(Restrictions.EqProperty("**sn.COLUMNNAME**", "n.Id"));

var results = CurrentSession.CreateCriteria<Note>("n")
    .Add(Subqueries.Select(subQuery))
    .SetProjection(
        Projections.Alias("n.Id", "Id"))
    .AddOrder(Order.Desc("maxDate")))
    .List<Note>(); 
```

不确定它是否 100% 正确，但它可能会让事情变得更清楚一些。确保将 (**) 之间的文本更改为 SubNote 中应该与 Note 中的 Id 匹配的列名。

# html - XSLT 排除不需要的输出

> ID：11969099
> 
> 赞同：0
> 
> 时间：2012-08-15T12:15:32.133
> 
> 标签：html, xml, xslt

我有一些问题排除了我的 xlst 转换中不需要的输出。我已经知道匹配等背后的默认规则，但我无法在模板/应用模板中正确使用匹配。
你能帮我解决这个问题吗？

所以我有一个这样构造的 XML 文件：

```
<movies>
    <movie id="0">
        <title>Title</title>
        <year>2007</year>
        <duration>113</duration>
        <country>Country</country>
        <plot>Plot</plot>
        <poster>img/posters/0.jpg</poster>
        <genres>
            <genre>Genre1</genre>
            <genre>Genre2</genre>
        </genres>
        ...
    </movie>
    ...
</movies> 
```

我想为属于流派'#######'（在运行时由我的perl脚本替换）的每部电影创建一个带有LI的html UL列表，它是一个页面的链接（由它的id命名）。

现在我正在这样做：

```
<xsl:template match="/">
    <h2> List </h2>
    <ul>
        <xsl:apply-templates match="movie[genres/genre='#######']"/>
            <li>
                <a>
                    <xsl:attribute name="href">     
                        /movies/<xsl:value-of select= "@id" />.html
                    </xsl:attribute>
                    <xsl:value-of select= "title"/>
                </a>
            </li>
    </ul>
</xsl:template> 
```

显然，通过这种方式，它向我展示了与所选类型相匹配的电影的所有元素。我是否必须添加大量`<xsl:template match="...">`才能删除所有额外的输出？
你能教我创建这样的html片段的正确方法吗？

## 列表

*   [标题0](/movies/0.html)
*   [标题2](/movies/2.html)
*   [标题7](/movies/7.html)

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:14:20.613

Dash 的解决方案是正确的。

我建议对电影模板稍作改动以更简洁......

```
<xsl:template match="movie">
  <li>
    <a href="/movies/{@id}.html">
      <xsl:value-of select= "title"/>
    </a>
  </li>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:23:06.730

您快到了 - 您对应用模板的使用导致了您的问题。

相反，以这种方式构建您的 XSLT：

```
 <xsl:template match="/">
    <h2> List </h2>
    <ul>
      <xsl:apply-templates select="movie[genres/genre='#######']"/>
    </ul>
  </xsl:template>

  <xsl:template match="movie">
    <li>
      <a>
        <xsl:attribute name="href">/movies/<xsl:value-of select= "@id" />.html</xsl:attribute>
        <xsl:value-of select= "title"/>
      </a>
    </li>
  </xsl:template> 
```

它会将特定模板 (match="movie") 应用于您的电影元素。在您最初的尝试中，您将使用[默认模板](http://www.dpawson.co.uk/xsl/sect2/defaultrule.html#d3635e16)，它将带回电影元素中包含的所有内容。

# asp.net - 打开网页检索令牌代码并关闭网页？

> ID：11969100
> 
> 赞同：1
> 
> 时间：2012-08-15T12:15:32.367
> 
> 标签：asp.net, url, token

**有没有一种快速的方法可以通过它的 url 从另一个页面检索令牌？**

我需要从网页中获取令牌并在当前页面中使用它。用户提供电子邮件地址和密码

示例用户条目：

> 电子邮件：bob@bobby.com
> 
> 密码：鲍勃

然后我将它输入到下面的这个链接中。

[http://formbase.formmobi.com/dvuapi/auth.aspx?email=bob@bobby.com&password=bob](http://formbase.formmobi.com/dvuapi/auth.aspx?email=bob@bobby.com&password=bob)

我想检索令牌代码并将其返回到我的网页。

![在此处输入图像描述](../Images/fa9a2db258eb80a64ddd1f094216163b.png)

页面来源：

```
<result>
  <error number="201" description="Success" />
  <token>6fb29eza-8561-4091-bef0-c81f20c90490</token>
  <expired>False</expired>
  <accounttype>formmobi</accounttype>
  <subscriptionlevel>Premium</subscriptionlevel>
</result> 
```

**检索此令牌值的最有效方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:37:07.103

如果它是跨域的，您将需要一个代理文件来使用服务器端语言调用 url 并解析 xml。

您可以使用 jquery、ajax 和 jsonp dataType 轻松进行跨域 javascript 调用。但由于此响应是 xml（不是 jsonp），它可能无法正常工作。

# iphone - 如何创建一个始终串行的 GCD 队列，即使在多核 CPU 上也是如此？

> ID：11969101
> 
> 赞同：6
> 
> 时间：2012-08-15T12:15:37.400
> 
> 标签：iphone, ios, ipad, concurrency, grand-central-dispatch

据我了解非主队列 GCD 队列，默认情况下它们仅在具有单核 CPU 的设备上是串行的。但是如果一个设备有多个内核，队列中的块可能会同时执行。

我想使用串行 GCD 队列来克服一些并发问题，即使有多个内核，这个队列也必须是串行的。

一位开发人员提到这在某种程度上是可能的。我将如何创建这样一个始终串行的队列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T12:20:39.110

可以通过`dispatch_get_global_queue`函数获取的标准 GCD 队列确实是并发的。

**[但是您可以使用dispatch_queue_create](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_queue_create)**函数创建自定义 gcd 队列。`DISPATCH_QUEUE_SERIAL`作为第二个参数传递以将该队列创建为串行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-24T16:27:11.883

创建并发队列：
`dispatch_queue_t concurrentQueue = dispatch_queue_create("com.aj.concurrent.queue", DISPATCH_QUEUE_CONCURRENT);`

创建串行队列：
`dispatch_queue_t serialQueue = dispatch_queue_create("com.aj.serial.queue", DISPATCH_QUEUE_SERIAL);`

# javascript - jQuery $(this) 内部函数

> ID：11969104
> 
> 赞同：2
> 
> 时间：2012-08-15T12:15:49.857
> 
> 标签：javascript, jquery, this-pointer

我想将 $(this) 传递给函数，但我不确定。有一个类似的线程，但我仍然无法使其工作。我希望有人能帮助我。

```
$(document).ready(function() {
  var delay = (function(){
    var timer = 0;
    return function(callback, ms){
      clearTimeout (timer);
      timer = setTimeout(callback, ms);
    };
  })();

  $('input').keyup(function() {
      delay(function(){
        alert($(this).val());
      }, 1000 );
  });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T12:17:19.080

您应该保存对此的引用：

```
$('input').keyup(function() {
    var $this = $(this);
    delay(function(){
      alert($this.val());
    }, 1000 );
}); 
```

另一种选择是重新绑定`this`到函数：

```
 $('input').keyup(function() {
      delay(function(){
        alert($(this).val());
      }.bind(this), 1000 );
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:20:37.620

您需要带上上下文：

```
return function(callback, ms, context){
  clearTimeout (timer);
  timer = setTimeout(function() {
      callback.call(context);
   }, ms);
}; 
```

接着

```
delay(function() {
    alert($(this).val());
}, 1000, this ); 
```

但正如其他人发布的那样，将上下文保存在局部变量中可能是您​​真正想要的。这是另一种方法：

```
$('input').keyup(function() {
  delay((function(self) {
    return function() {
      alert($(self).val());
    };
  }(this)), 1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:17:20.643

`$(this)`保留对函数外部的引用。

```
 // ...

    $('input').keyup(function() {
        var $this = $(this);
        delay(function() {
            alert( $this.val() );
        }, 1000)
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:20:13.410

由于功能范围的变化，这发生了变化。您需要使用闭包来存储该值。

如果你传递的只是你不需要的值 $(this)

```
$('input').keyup(function() {
  var val = this.value;
  delay(function(){
    alert(val);
  }, 1000 );
}); 
```

另一种方法是

```
$('input').keyup(function() {
  delay((function(val){
    return function() {
      alert(val);
    };
  }(this.value)), 1000 );
}); 
```

# html - ie8 上的 CSS3 属性

> ID：11969113
> 
> 赞同：1
> 
> 时间：2012-08-15T12:16:26.280
> 
> 标签：html, css

我有一个 div，我给了它一些 css 属性，它可以在除 1e8 及以下版本之外的所有其他浏览器上运行（和往常一样）。我怎样才能让它在ie8上工作？ [http://jsfiddle.net/WY5Cu/](http://jsfiddle.net/WY5Cu/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:25:10.193

看看[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/) - 那里的渐变编辑器将生成 IE8 兼容的背景渐变。

对于`box-shadow`，此规则应该在某种程度上模拟您当前的代码：

```
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=1, Direction=135, Color='#000000')"; 
```

尽管没有嵌入阴影（我怀疑在 IE8 中有办法做到这一点）。

要组合多个过滤器声明（用于阴影和渐变填充），您需要用空格将它们链接在一起。例如：

```
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=1, Direction=135, Color='#000000') progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 )"; 
```

对于 IE7，您需要复制 IE8 规则，但使用`filter`而不是`-ms-filter`省略开始和结束引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:22:17.783

如果你真的想通过所有的努力在一个*不支持它*的浏览器中启用特性，你可以使用[CSS3pie。](http://css3pie.com/)

这让您可以轻松地在 IE 浏览器 6-8（9 已经支持*其中一些*）中使用 CSS3 功能。只需下载，附加到您的网站，然后就可以离开了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:24:48.210

尝试使用[CSS3 Pie](http://css3pie.com/)，它使 IE 6 - 9 能够支持您需要的属性（线性渐变和框阴影）

# sql - SQLite：如何从多个表中获取某些字段？

> ID：11969118
> 
> 赞同：1
> 
> 时间：2012-08-15T12:16:50.127
> 
> 标签：sql, web-sql

我有一个 WebSQL 数据库，其中包含三个表，它们都包含 id 和 PREFIX_name 字段。我需要获取单个 ID 的所有名称字段。

目前我正在尝试以下条款：

```
SELECT A_name FROM TableA WHERE companyId = 1 UNION ALL
SELECT B_name FROM TableB WHERE companyId = 1 UNION ALL
SELECT C_name FROM TableC WHERE companyId = 1 
```

这将按预期返回结果对象，但字段名称错误：

```
[{
  "A_name" : "result from TableA",
 },
  "A_name" : "result from TableB",
 },
  "A_name" : "result from TableC"
}]; 
```

如您所见，我无法确定来自哪个表字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:30:53.167

当您`UNION`一起得出结果时，该列将采用第一个查询中给它的名称（在这种情况下`A_name`）

尝试将您的表连接在一起，而不是使用`UNION ALL`：

```
SELECT A.A_name, B.B_name, C.C_name
FROM TableA A
    INNER JOIN TableB B ON A.companyId = B.companyId
    INNER JOIN TableC C ON A.companyId = C.companyId
WHERE A.companyId = 1 
```

这将为您提供单行的结果。如果您真的希望将结果作为单独的行，您可以选择表名以及 *_name 字段：

```
SELECT 'TableA' AS TableName, A_name FROM TableA WHERE companyId = 1 UNION ALL
SELECT 'TableB', B_name FROM TableB WHERE companyId = 1 UNION ALL
SELECT 'TableC', C_name FROM TableC WHERE companyId = 1 
```

# javascript - 如何使用 jquery 在实际 div 本身中显示 div 的 html5“数据”标签中保存的信息

> ID：11969121
> 
> 赞同：2
> 
> 时间：2012-08-15T12:16:58.917
> 
> 标签：javascript, jquery, html

我有一个看起来像这样的 div：

```
<div class="enemy" data-level="1" data-dmg="10" data-hp="50" data-type="A" data-ready_to_breed="false"><span>Enemy 1</span></div> 
```

如何`<span>`以用户始终可以查看 div（或“敌人”）状态的方式显示数据标签中的内容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:18:41.577

要访问该`data`属性，请使用*[**`.data()`**](http://api.jquery.com/data)*.

```
$('.enemy').data('type'):
$('.enemy').data('ready_to_bread'): 
```

等等。

要显示到`span`关于`enemy`尝试：

```
var enemy = $('.enemy');
$('span', enemy).html(enemy.data('type')) 
```

## 显示所有数据属性：

```
var enemy = $('.enemy'),
var data = enemy.data();

$.each(data, function(key, val) {
    enemy.append($('<span/>', {
        'class' : key, // if you need then can add class like this
        html: key + " : " + val + '<br>'
    }));
}); 
```

## **[演示](http://jsfiddle.net/ZJDEu/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:21:30.950

您可以像这样在 div 中添加新元素：

```
$('.enemy').each(function(){
   var $this = $(this);
    $this.children().append($('<span />').html('Level: ' + $this.data('level')));
    $this.children().append($('<span />').html('Dmg: ' + $this.data('dmg')));
}); 
```

现场示例：http: [//jsfiddle.net/ZJDEu/](http://jsfiddle.net/ZJDEu/)

这将导致标记，例如：

```
<div class="enemy" data-ready_to_breed="false" data-type="A" data-hp="50" data-dmg="10" data-level="1">
   <span>
   Enemy 1
     <span>Level: 1</span>
     <span>Dmg: 10</span>
   </span>
</div> 
```

当然，您可以更改 jquery 以形成您想要的任何标记。

如果是我，我会选择稍微不同的东西：

```
$('.enemy').each(function(){
   var $this = $(this);
    $this.append($('<span />').addClass('level').html($this.data('level')));
    $this.append($('<span />').addClass('dmg').html($this.data('dmg')));
}); 
```

形成标记：

```
<div class="enemy" data-ready_to_breed="false" data-type="A" data-hp="50" data-dmg="10" data-level="1">
  <span>Enemy 1</span>
  <span class="level">1</span>
  <span class="dmg">10</span>
</div> 
```

因为这对于样式/布局目的来说更容易处理。

现场示例：http: [//jsfiddle.net/djdAB/](http://jsfiddle.net/djdAB/)

# azure - Azure .NET 组件生命周期（CloudQueueClient、CloudQueue 等）

> ID：11969122
> 
> 赞同：6
> 
> 时间：2012-08-15T12:17:05.297
> 
> 标签：azure, azure-storage, azure-blob-storage, azure-queues

如果我使用 .NET SDK 从 MVC 应用程序添加 Windows Azure 队列项或 blob 存储引用，每个组件应保留多长时间？

对于队列，我们​​有**CloudStorageAccount**、**CloudQueueClient**和**CloudQueue**。

对于 Blob 存储，我们有**CloudStorageAccount**、**CloudBlobClient**和**CloudBlobContainer**。

我假设最好为每个 Web 请求创建一次每个组件，但现在不知道创建每个项目的成本有多高。我再次假设，例如，使用单例生命周期在 Web 请求之间保持客户端不是一个好计划，但没有什么可做的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T20:08:29.763

这些 .NET 对象是轻量级的。它们都不会仅仅通过创建来分配资源或执行网络操作。除非您创建了大量它们，否则通常不值得努力缓存或汇集它们。

我们甚至不费心在每个请求的基础上缓存它们——我们只是根据需要创建它们并将它们丢弃。缓存它们可能会为您节省一些垃圾收集器的压力，但我怀疑它会很大。

# c# - kinect 基础知识和 C#

> ID：11969128
> 
> 赞同：0
> 
> 时间：2012-08-15T12:17:40.470
> 
> 标签：c#, wpf

我最近开始为 Windows 开发 kinect。我是 C# 的初学者，我希望你们能告诉我冒号前后的部分在 ---> **“mainwindow:window”中是什么意思**

我不知道“initializeComponent()”在做什么。即使当我评论它时，代码仍然可以正常工作，所以这实际上是在做什么，当我按 F12 查找它的定义时，它把我带到了名为“mainwindow.g.cs”的新文件

```
//------------------------------------------------------------------------------
// <copyright file="MainWindow.xaml.cs" company="Microsoft">
//     Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
//------------------------------------------------------------------------------

namespace Microsoft.Samples.Kinect.ColorBasics
{
    using System;
    using System.Globalization;
    using System.IO;
    using System.Windows;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using Microsoft.Kinect;

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        /// <summary>
        /// Active Kinect sensor
    /// </summary>
    private KinectSensor sensor;

    /// <summary>
    /// Bitmap that will hold color information
    /// </summary>
    private WriteableBitmap colorBitmap;

    /// <summary>
    /// Intermediate storage for the color data received from the camera
    /// </summary>
   private byte[] colorPixels;

    /// <summary>
    /// Initializes a new instance of the MainWindow class.
    /// </summary>
    public MainWindow()
    {
        InitializeComponent();
    }

    /// <summary>
    /// Execute startup tasks
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void WindowLoaded(object sender, RoutedEventArgs e)
    {
        // Look through all sensors and start the first connected one.
        // This requires that a Kinect is connected at the time of app startup.
        // To make your app robust against plug/unplug, 
        // it is recommended to use KinectSensorChooser provided in Microsoft.Kinect.Toolkit
        foreach (var potentialSensor in KinectSensor.KinectSensors)
        {
            if (potentialSensor.Status == KinectStatus.Connected)
            {
                this.sensor = potentialSensor;
                break;
            }
        }

        if (null != this.sensor)
        {
            // Turn on the color stream to receive color frames
            this.sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);

            // Allocate space to put the pixels we'll receive
            this.colorPixels = new byte[this.sensor.ColorStream.FramePixelDataLength];

            // This is the bitmap we'll display on-screen
            this.colorBitmap = new WriteableBitmap(this.sensor.ColorStream.FrameWidth, this.sensor.ColorStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);

            // Set the image we display to point to the bitmap where we'll put the image data
            this.Image.Source = this.colorBitmap;

            // Add an event handler to be called whenever there is new color frame data
            this.sensor.ColorFrameReady += this.SensorColorFrameReady;

            // Start the sensor!
            try
            {
                this.sensor.Start();
            }
            catch (IOException)
            {
                this.sensor = null;
            }
        }

        if (null == this.sensor)
        {
            this.statusBarText.Text = Properties.Resources.NoKinectReady;
        }
    }

    /// <summary>
    /// Execute shutdown tasks
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void WindowClosing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        if (null != this.sensor)
        {
            this.sensor.Stop();
        }
    }

    /// <summary>
    /// Event handler for Kinect sensor's ColorFrameReady event
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void SensorColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
    {
        using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
        {
            if (colorFrame != null)
            {
                // Copy the pixel data from the image to a temporary array
                colorFrame.CopyPixelDataTo(this.colorPixels);

                // Write the pixel data into our bitmap
                this.colorBitmap.WritePixels(
                    new Int32Rect(0, 0, this.colorBitmap.PixelWidth, this.colorBitmap.PixelHeight),
                    this.colorPixels,
                    this.colorBitmap.PixelWidth * sizeof(int),
                    0);
            }
        }
    }

    /// <summary>
    /// Handles the user clicking on the screenshot button
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void ButtonScreenshotClick(object sender, RoutedEventArgs e)
    {
        if (null == this.sensor)
        {
            this.statusBarText.Text = Properties.Resources.ConnectDeviceFirst;
            return;
        }

        // create a png bitmap encoder which knows how to save a .png file
        BitmapEncoder encoder = new PngBitmapEncoder();

        // create frame from the writable bitmap and add to encoder
        encoder.Frames.Add(BitmapFrame.Create(this.colorBitmap));

        string time = System.DateTime.Now.ToString("hh'-'mm'-'ss", CultureInfo.CurrentUICulture.DateTimeFormat);

        string myPhotos = Environment.GetFolderPath(Environment.SpecialFolder.MyPictures);

        string path = Path.Combine(myPhotos, "KinectSnapshot-" + time + ".png");

        // write the new file to disk
        try
        {
            using (FileStream fs = new FileStream(path, FileMode.Create))
            {
                encoder.Save(fs);
            }

            this.statusBarText.Text = string.Format("{0} {1}", Properties.Resources.ScreenshotWriteSuccess, path);
        }
        catch (IOException)
        {
            this.statusBarText.Text = string.Format("{0} {1}", Properties.Resources.ScreenshotWriteFailed, path);
        }
    }

    private void Image_ImageFailed(object sender, ExceptionRoutedEventArgs e)
    {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:24:22.097

这不是 Kinect 特有的，而是您对它的 C# 有疑问的东西。

你的问题在哪里`MainWindow : Window`，那就是你的类被调用`MainWindow`，冒号表示[C# 中的继承](http://msdn.microsoft.com/en-us/library/ms173149%28v=vs.100%29.aspx)。也就是说，`MainWindow`是（或继承）的子类`Window`。

至于`InitializeComponent`在这里查看答案：[https ://stackoverflow.com/a/245881/23528](https://stackoverflow.com/a/245881/23528)

# java - 关于空指针异常避免安全措施

> ID：11969131
> 
> 赞同：0
> 
> 时间：2012-08-15T12:17:53.120
> 
> 标签：java, exception, nullpointerexception

请告知通过应用谨慎或防御性编码技术和空安全 API 方法来避免 NullPointerException 的最佳方法是什么。特别是在使用 java 编码时，我分析的一件事是进行空检查，是否有任何自定义模板，您也可以为我们可以使用的 eclipse 编辑器提供建议..！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:25:24.163

好吧，如果你调用一个函数并且 null 是一个可能的返回值，那么你必须检查它。另一方面，如果你到处检查 null ，这将过于防御性并使代码混乱。如果您有权访问源代码和/或 javadoc，则可以检查该函数是否会返回 null。

有时，如果您期望一个值但变量为空，则必须抛出异常，因此 NPE 在这种情况下可能很有用，因为其他地方存在错误。

此外，还有一些像 @NonNull 或 @Nullable 这样的注解，一些静态分析检查器（如 Findbugs）使用这些注解来帮助他们捕捉可能的空指针问题。

对于您正在构建的函数，请检查返回 null 是否有意义。例如，如果你的函数返回一个集合，那么返回一个空集合和返回 null 是有区别的。

更多阅读：[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:24:03.000

1.  在对对象进行操作之前检查 null 取消引用。

    if(something != null) // 做圆顶的事情。

2.  如果您希望取消空解引用，请使用 yoda 表示法。

    if("yes".equals(something) // 做某事

Eclipse 编辑器插件？也许您可以使用样式检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:14:59.727

一种有用的模式是选项模式。它在 Scala 中被广泛使用，[这里](http://www.codecommit.com/blog/scala/the-option-pattern)讨论了一个 Java 等价物。

简而言之，不是返回对对象的引用，而是返回一个 Option 对象。一个子类 (Some) 包含引用，而另一个子类 (None) 不包含。因此，API 明确声明您*可能*无法取回值。你*必须*确定你得到了什么才能取回基础参考。

例如（伪代码）

```
Option<String> value = findNameForId(34);
if (value instanceof Some) {
   return ((Some<String>)value).get();
}
else {
   throw new Exception();
} 
```

它在 Java 中相当冗长，但在 Scala 中则要少得多。

```
findNameForId(34) match {
   case Some(id) => id
   case None => throw new Exception
} 
```

您可以在 Scala 中使其更加简洁，即：

```
findNameForId(34).getOrElse(throw new Exception) 
```

或者

```
findNameForId(34).getOrElse(DefaultValue) 
```

# linux - 获取git工作目录根的脚本？

> ID：11969133
> 
> 赞同：4
> 
> 时间：2012-08-15T12:18:07.417
> 
> 标签：linux, git, bash

> **可能重复：**
> [有没有办法在一个命令中获取 git 根目录？](https://stackoverflow.com/questions/957928/is-there-a-way-to-get-the-git-root-directory-in-one-command)

我正在编写一个 bash 脚本（实际上是一个 Makefile），它需要使用一个参数，该参数是一个相对于包含当前目录的 git 工作目录的根目录。

那是：

```
 /home/me$ git clone /abc/foo.git

 directory foo created

 /home/me$ cd foo/bar

 /home/me/foo/bar$ execute_script.sh

 hello /home/me/foo/baz 
```

execute_script.sh 如下：

```
 echo hello `git something`/baz 
```

什么是 git 东西？它应该返回当前 git 工作根目录的绝对路径。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T12:30:10.967

好吧，如果您知道您将在 bar 文件夹中，您可以尝试：

```
echo hello `pwd`/../baz 
```

编辑：正如@Andrew Tomazos 之前指出的另一个线程，你可以这样做

```
echo hello `git rev-parse --show-toplevel`/baz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:33:47.377

这就是你要找的

[有没有办法在一个命令中获取 git 根目录？](https://stackoverflow.com/questions/957928/is-there-a-way-to-get-the-git-root-directory-in-one-command)

root="'git rev-parse --git-dir`/.."

回声你好 $root/baz

# java - 如何在 Java 中克隆 JInternalFrame？

> ID：11969140
> 
> 赞同：1
> 
> 时间：2012-08-15T12:18:43.063
> 
> 标签：java, arrays, swing, netbeans, jinternalframe

我正在自学Java，我正在使用netbeans来开发它。我制作了一个简单的JInternalFrame，里面有一个文本框，但我希望能够克隆它，然后用一些新文本填充文本框.

我以为我可以创建一个 JInternalFrame 数组并继续添加，但我似乎无法做到这一点。

我是新手，所以尽可能多的建议会很棒。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:16:29.610

我会制作一个工厂方法，`createInternalFrame()`就像他们在[此处](https://stackoverflow.com/q/9414728/261156)的答案中所做的那样。

![在此处输入图像描述](../Images/d9dcdefcdb37306044cf4034d9f34463.png)

```
private int count;

desktop.add(createInternalFrame(++count));

private JInternalFrame createInternalFrame(int number) {
    JInternalFrame jif = new JInternalFrame(
        "F" + number, true, true, true, false);
    int topLeft = 25 * number;
    jif.add(new JTextField(String.valueOf(number), 8));
    jif.pack();
    jif.setLocation(topLeft, topLeft);
    jif.setVisible(true);
    return jif;
} 
```

# vb.net - 在文本框中按下 Tab 键时如何触发事件？

> ID：11969141
> 
> 赞同：3
> 
> 时间：2012-08-15T12:18:47.993
> 
> 标签：vb.net, winforms, events

对于我正在处理的当前应用程序，我想使用我自己的自定义控件来模拟一个组合框，因为我希望它是多列并具有一些附加功能。我正在使用文本框和 datagridview 来执行此操作。

我想复制可以与常规组合框一起使用的建议/附加。我有这个工作得很好。用户可以开始输入，获得建议列表，并可以使用向上和向下键滚动条目。

我已经捕获了回车键以将所选行作为值。这工作得很好，但我也想捕获 tab 键并做同样的事情，就像已经嵌入组合框控件的功能一样。

问题是，显然 vb.net 使用 tab 键来更改选定的控件，并且在我可以调用我的子例程从我的 datagridview 中获取选定的行之前触发。我希望能够取消控制选项卡，或者至少找到一种方法在它之前触发我的代码。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:25:35.783

TextBox 也有一个`AcceptsTab`在`Multiline = True`.

有了这些条件，您现在可以查看是否按下了 tab 键：

```
Private Sub TextBox1_KeyDown(sender As Object, e As KeyEventArgs) _
                             Handles TextBox1.KeyDown
  If e.KeyCode = Keys.Tab Then
    e.SuppressKeyPress = True
    'do something
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-15T12:26:41.867

问题是在这种情况下，按 TAB 键将失去对需要绑定 keydown 事件和回调函数的输入元素的关注

```
 var code = e.keyCode || e.which;
   if (code == '9') {
     alert('Tab');
     return false;
   } 
```

# android - 来自 JSON 的动态 ExpandableListView

> ID：11969146
> 
> 赞同：0
> 
> 时间：2012-08-15T12:19:13.843
> 
> 标签：android, json, dynamic, expandablelistview

我想`ExpandableListView`从解析的 JSON 文件中填充一个。

目标是将第一个条目 (kontakt_titel) 作为组的标题，将所有其他条目作为子项...

JSON 文件如下所示：

```
{
"contact":[
  {
     "kontakt_titel":"Berlin",
     "adresse_strasse":"Hauptstrasse 1",
     "adresse_plzort":"4000 Berlin",
     "telefon":"123456789",
     "fax":"123456780",
     "email":"berlin@123.com",
     "website":"www.berlin.123.com"
  },
  {
     "kontakt_titel":"London",
     "adresse_strasse":"East Highway 1",
     "adresse_plzort":"London",
     "telefon":"123456789",
     "fax":"123456780",
     "email":"london@123.com",
     "website":"www.london.123.com"
  },
  {
     "kontakt_titel":"New York",
     "adresse_strasse":"Time Square 1",
     "adresse_plzort":"12345",
     "telefon":"123456789",
     "fax":"123456780",
     "email":"newyork@123.com",
     "website":"www.newyork.123.com"
  }
 ]
} 
```

这是我想将这些元素解析为 ExpandableListView 的代码：

```
try {
        JSONArray jContact = json.getJSONArray("contact");
        for (int i = 0; i < jContact.length(); i++) {
            JSONObject c4 = jContact.getJSONObject(i);

            String contact_title = c4.getString("kontakt_titel");
            String adresse_strasse = c4.getString("adresse_strasse");
            String adresse_plzort = c4.getString("adresse_plzort");
            String telefon = c4.getString("telefon");
            String fax = c4.getString("fax");
            String email = c4.getString("email");
            String website = c4.getString("website");

            if (contact_title != null && !contact_title.equals("")) {
                contactTitles.add(contact_title);
            } else {
                contactTitles.add("");
            }
            if (adresse_strasse != null && !adresse_strasse.equals("")) {
                contactAddressStreet.add(adresse_strasse);
            } else {
                contactAddressStreet.add("");
            }
            if (adresse_plzort != null && !adresse_plzort.equals("")) {
                contactAddressPlzOrt.add(adresse_plzort);
            } else {
                contactAddressPlzOrt.add("");
            }
            if (telefon != null && !telefon.equals("")) {
                contactTelephone.add(telefon);
            } else {
                contactTelephone.add("");
            }
            if (fax != null && !fax.equals("")) {
                contactFax.add(fax);
            } else {
                contactFax.add("");
            }
            if (email != null && !email.equals("")) {
                contactEmail.add(email);
            } else {
                contactEmail.add("");
            }
            if (website != null && !website.equals("")) {
                contactWebsite.add(website);
            } else {
                contactWebsite.add("");
            }
        }
    } catch (JSONException e) {
        errorHappened = true;
    } catch (NullPointerException npe) {
        errorHappened = true;
    } 
```

我认为这一切正常......但我认为这是我的错误......这是`getChildView()`我的适配器扩展的方法`BaseExpandableListAdapter`：

```
@Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.row_contact, null);
        }

        TextView tvPlayerName = (TextView) convertView
                .findViewById(R.id.tvPlayerName);

        switch (childPosition) {
            case 0:
                tvPlayerName
                        .setText(MainActivity.contactAddressStreet.get(childPosition));
                break;
            case 1:
                tvPlayerName
                        .setText(MainActivity.contactAddressPlzOrt.get(childPosition));
                break;
            case 2:
                tvPlayerName
                        .setText(MainActivity.contactTelephone.get(childPosition));
                break;
            case 3:
                tvPlayerName
                        .setText(MainActivity.contactFax.get(childPosition));
                break;
            case 4:
                tvPlayerName
                        .setText(MainActivity.contactEmail.get(childPosition));
                break;
            case 5:
                tvPlayerName
                        .setText(MainActivity.contactWebsite.get(childPosition));
                break;
            case 6:
                tvPlayerName
                        .setText(MainActivity.contactOpening.get(childPosition));
                break;
        }

        return convertView;
    } 
```

问题是，对于所有组中的所有孩子，它总是采用相同的条目。它将所有儿童中的第一个条目（柏林）作为第一，所有儿童中的第二个条目（东一号公路）的第二个条目作为第二个，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:32:40.680

问题是由您构建数据的`ExpandableListView`方式以及您尝试在方法中显示它的`getChildView()`方式引起的。

您在大小相等的列表中解析该`JSON`数据，其中列表中的每个位置都是一个`JSON`对象的数据。在`getChildView`方法中，您使用`childPosition`来从正确的列表中获取该孩子的数据。但是使用`childPosition`是错误的，因为你会看到当前的行为。

第一组（柏林）

*   childPosition == 0（使用第一个位置`contactAddressStreet`来获取数据（`"Hauptstrasse 1"`））
*   childPosition == 1（使用第二个位置`contactAddressPlzOrt`来获取数据（`"London"`）））

第 2 组（伦敦）

*   childPosition == 0（使用第一个位置`contactAddressStreet`来获取数据（`"Hauptstrasse 1"`））
*   childPosition == 1（使用第二个位置`contactAddressPlzOrt`来获取数据（`"London"`）））

如您所见，您没有考虑请求此孩子的组，无论如何您都会获得相同的数据。

要使其正常工作，请使用`childPosition`使用正确的数据列表并`groupPosition`从列表中获取实际值：

```
// ...
case 0: // child 0
     tvPlayerName.setText(MainActivity.contactAddressStreet.get(groupPosition));
     break;
// ... 
```

另一种方法是将`JSON`对象解析为更适合`ExpandableListView`.

# android - PhoneGap 可以将我的基于 Web 的应用程序显示为嵌入式浏览器吗？

> ID：11969154
> 
> 赞同：0
> 
> 时间：2012-08-15T12:20:08.587
> 
> 标签：android, iphone, ios, jquery-mobile, cordova

我正在为台式机、平板电脑和智能手机创建一个 Web 应用程序。我的应用程序在服务器端呈现（使用 asp.net mvc），并且很难为每个页面提供 Ajax 调用......

由于我使用 JQuery mobile 来生成 ui，因此我的程序的 ui 将响应，即使它完全从服务器加载。

我的第一个问题是，我可以在 PhoneGap 之类的嵌入式浏览器中加载该网页（针对手机和平板电脑进行了优化）吗？

并且我需要在下载首页时有一些动画，以获得更好的用户体验并避免应用商店提交问题。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:46:21.743

用...制作一个iframe怎么样？

```
iframe { width: 100%, height: 100%; padding: 0; margin: 0; z-index: 1; } 
```

然后使用以下样式为您的动画制作一个 div...

```
#animation { width: 100%, height: 100%; padding: 0; margin: 0; z-index: 2; } 
```

然后添加这样的东西

```
myIFRAME.document.onload = $('#animation').hide(); 
```

* * *

但是，您必须始终在线，并且您会感觉到“应用程序”的响应速度很慢。

这里有更多关于原生应用程序通常比基于 HTML5 的应用程序更快的信息。您的情况会更糟，因为它是嵌入在 html5 应用程序中的 html5 应用程序... [https://stackoverflow.com/a/10772161/773263](https://stackoverflow.com/a/10772161/773263)

进入 iTunes 的几率为 0%。

安卓会好的

# windows - 当我执行 git commit 时编辑器出现问题

> ID：11969171
> 
> 赞同：7
> 
> 时间：2012-08-15T12:21:22.730
> 
> 标签：windows, git

在我的提交信息中，我尝试使用以下指南：

1º 行 - <80char 的摘要

2º线 - 空间

3º Line - 正文从这里开始

在控制台中，我正在这样做：

**git 提交**

然后编辑器打开，我写下我想要遵循我保存的指南的信息，然后关闭编辑器。

**我返回控制台，它给了我错误：**

```
error: There was a problem with the editor '"C:/Program Files (x86)/GitExtensions/GitExtensions.exe" fileeditor'.

Please supply the message using either -m or -F option. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:28:49.923

根据您的说法，我可以假设您在 Windows 上使用 git 扩展，我认为您的问题与错误的配置有关，请在 git 扩展的配置窗格中配置默认​​文本编辑器。

否则，您可以在不让编辑器每次都以这种方式提示的情况下提交：

```
git commit -m "Your commit message" 
```

如果你想要多行消息，你可以用反斜杠换行：

```
git commit -m "1º Line - summary with <80char \
2º Line - space \
3º Line - The body message start here" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T12:26:03.053

我怀疑这是因为您的文本编辑器没有以状态码 0 退出（表示成功，并且没有错误）。您使用的是什么文本编辑器，您是否干净地退出了文本编辑器？

# node.js - 替代 require.paths 以编程方式编辑需要搜索目录？

> ID：11969175
> 
> 赞同：4
> 
> 时间：2012-08-15T12:21:34.453
> 
> 标签：node.js

我正在寻找一种方法来基本上完成操纵 require.paths 曾经让你做的事情；编辑路径需要将从正在运行的程序中搜索模块。

设置（由于各种原因我无法更改或解决方法）是我有一个项目，其中包含一个子目录中的主 JS 文件，而该子目录中`require('module')`的“模块”是其中的一个文件项目文件夹中*另一个*特定目录中的另一个目录。

不幸的是，暂时将文件夹移动到 node_modules 中并不是一个理想的解决方案（如果它甚至可以工作？）。我尝试以两种方式编辑 NODE_PATH 环境变量：

*   `NODE_PATH='$NODE_PATH:/home/garmur/moduledir'`这有效，但作为实际解决方案并不理想。
*   `process.env.NODE_PATH += '/home/garmur/moduledir';`从程序内部，这似乎没有任何效果？

对此的任何帮助表示赞赏。我知道使用 node_modules 等是这里理想的解决方案，但我的双手被束缚在这个项目布局上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-13T18:51:27.130

这很 hacky，因为它使用“私有”方法调用，但它可以工作。我这样做是为了让我的 Mocha 测试中的路径更加清晰。

```
process.env.NODE_PATH += ':src'; //append custom path to NODE_PATH
require('module').Module._initPaths(); 
```

只需将其作为某些应用程序启动或引导执行的一部分运行即可。然后，您可以在该代码执行后的任何地方要求与 src 相关的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:58:34.957

也许您可以尝试使用相对路径进行模块加载，这并不完全是您所要求的，但如果您需要从“node_modules”目录中加载模块，这可能是一个选项：

例如，使用这种结构：

```
$APP_DIR/server.js
$APP_DIR/mymodules/handlers.js
$APP_DIR/mymodules/utils.js
$APP_DIR/node_modules/... 
```

在 server.js 中，您可以使用：

```
var h = require('./mymodules/handlers'),
    u = require('./mymodules/utils'); 
```

在 handlers.js 中，您可以使用：

```
var u = require('./utils') 
```

# c# - 使用 linq 在查找表中查找记录

> ID：11969185
> 
> 赞同：1
> 
> 时间：2012-08-15T12:22:27.073
> 
> 标签：c#, linq, orm, telerik

我开始掌握 LINQ，并且坚持将查找表实现到对象中然后查询该对象（或它的关联）的基本概念和技术。这可能是一个愚蠢的问题，并且可能有一个我应该自己解决的答案。但我还没有找到使该方法得以坚持的解释。

所以我创建了一个像这样的示例数据库结构

![示例数据库](../Images/7070c323244c41f2b27d67ab059d3819.png)

我想进行两个 LINQ 查询，第一个查询为我提供通过查找指定**object1相关的所有****example2**记录，第二个查询为我提供与指定**object2**相关的所有**example1记录**

 ******希望外面有人可以启动我的大脑。

就像是

```
var examples = (from e in db.examples where e.example2.id == id).ToList(); 
```

快速编写的 SQL 查询

```
SELECT * FROM [dbo].[example1] one
JOIN [dbo].[examplelookup] lu ON one.[id] = lu.[example1id]
JOIN [dbo].[example2] two ON lu.[example2id] = two.[id]
WHERE one.[id] = 1 
```

刚刚结束并创建了这个，我认为应该解释一下

![模型](../Images/761ad0d5671d8823b848895a564e07cd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:13:50.297

我知道你接受了一个答案，但只是为了记录：

这是使用的常见场景`Any()`，它转换为`exists`in sql。当您希望`example1`s 引用特定`example2`（由 指定`id`）时，请执行以下操作：

```
from ex1 in example1
where ex1.example2s.Any(e => e.id = id)
select ex1 
```

这为您提供了一个不同的`example1`对象列表，而`SelectMany`具有重复项的解决方案可能会产生一个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:50:05.500

假设

example1-> examplelookup 关系名称为 examplelookups

example2-> examplelookup 关系名称为 examplelookups

examplelookup -> example1 关系名称是 example1

examplelookup -> example2 关系名称是 example2

给出`id`的例子1

```
db.example1.Where(x=>x.id == id).SelectMany(x=>x.examplelookups).Select(x=>x.example2); 
```

反之亦然

```
db.example2.Where(x=>x.id == id).SelectMany(x=>x.examplelookups).Select(x=>x.example1); 
```

编辑：基于 Gert Arnold 建议的使用 any 子句的答案的附加更新（这是在已被接受为答案之后）

```
db.example1.Where(x=>x.examplelookups.Any(y=>y.example2.id == id)); 
```

反之亦然

```
db.example2.Where(x=>x.examplelookups.Any(y=>y.example1.id == id)); 
```

第二次编辑（再次在已经接受并回答但在修改问题以包含数据模型之后）

```
db.Example1.Where(x=>x.Id == id).SelectMany(x=>x.Example2); // could have duplicates
db.Example2.Where(x=>x.Example1.Any(y=>y.Id == id)); //alternate any form removing the duplicates 
```

反之亦然

```
db.Example2.Where(x=>x.Id == id).SelectMany(x=>x.Example1); // could have duplicates
db.Example1.Where(x=>x.Example2.Any(y=>y.Id == id)); //alternate any form removing the duplicates 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:39:57.750

我相信你正在寻找的是加入。此代码将通过连接表为您提供具有相应 example2 记录的所有 example1 记录：

```
var x = from ex1 in example1
        join exlookup in examplelookup on ex1.id equals exlookup.example1id
        join ex2 in example2 on exlookup.example2id equals ex2.id
        select ex1; 
```

为了得到相反的结果，ex2 记录，只需替换`select ex1`为`select ex2`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:50:45.730

时间很短，但尝试从查找表开始，这样您就可以查询两个关联

```
var examples = (from el in db.examplelookup 
                where el.example2id == id
                select el.examples1.ToList(); 
```

这里也没有进行代码检查。******

# android - 如何从 SQlite 表中选择一列？

> ID：11969196
> 
> 赞同：1
> 
> 时间：2012-08-15T12:23:38.787
> 
> 标签：android, sqlite, select

我在我的 android 数据库中使用这个查询：

```
 public String getauthWithid() {
    String query = new String( "select login from table_inscri where ID = 1" );
    Cursor result = bdd.rawQuery( query, null );
    return result.toString();} 
```

但是当我调用这个方法时它返回`android.database.sqlite.SQliteCursor@`

那么当 id=1 时如何选择列呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:34:18.670

编辑：正如格雷厄姆指出的那样，您将不得不关闭光标。所以使用下面的代码

```
result.moveToFirst();
String auth = result.getString(result.getColumnIndex(COLUMN_NAME));
result.close();
return auth; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:01:14.357

这是正确的做法。以防出错。

```
public String getauthWithid() {
   String query = new String( "select login from table_inscri where ID = 1" );
   Cursor result = bdd.rawQuery( query, null );

   String returnString = ""; // Your default if none is found

  if(result.moveToFirst())
  {
    returnString = result.getString(result.getColumnIndex("login"));
  }
  result.close();

  return returnString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:37:03.213

使用它应该从数据集的列中获取数据。

```
if (result != false) 
{
    result.moveToFirst(); // moves the cursor to the first record        
    do 
    {
        result.getString(0); // gets the data in that record
        // process string here 
        // - such as add to an arrayList and then return the list after the loop
    } 
    while (result.moveToNext()); 
    // return list here
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T12:29:28.607

```
Cursor cursor = db.rawQuery("select login from table_inscri where ID='" + 1
            + "'", null); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-15T12:30:35.423

只需进入您的 sqlite shell：

```
$ sqlite3 path/to/db.sqlite3 
```

一旦进去，只需点击 `sqlite> .schema`

你会得到一切。

# ruby-on-rails - 将.csv文件导入rails麻烦

> ID：11969200
> 
> 赞同：2
> 
> 时间：2012-08-15T12:24:01.893
> 
> 标签：ruby-on-rails, ruby, database, csv

我在将 .csv 文件导入 rails (3.2.6) 时遇到问题。这是我第一次使用 csv 措辞，我一般是新手。我使用设计生成用户模型，不知道这是否与此问题有关。我只是在 tasks/import.rake 中创建一个简单的 rake 任务

```
require 'csv'

desc "Import data from csv file"
task :import => :environment do

CSV.foreach(Rails.root.join('db', 'data.csv'), :headers => true) do |row|

    attrs = {
     :first_name             => row[0],
     :last_name              => row[1],
     :email                  => row[2],
     :street_address         => row[3],
     :city                   => row[4],
     :state                  => row[5],
     :zip                    => row[6],
    }

    user = User.new(attrs)

    if user.save
      puts "Saved user #{attrs.inspect}"
    else
      puts "Unable to save user #{attrs.inspect}"
    end
  end
end 
```

我跑`$: rake import`

我得到：

```
Unable to save user {:first_name=>"jane", :last_name=>"joe", :email=>"557@djh.com", street_address=>"38776 main", :city=>"los angeles", :state=>"ca", :zip=>"90887"}
Unable to save user {:first_name=>"bob", :last_name=>"billy", :email=>"7663@top.com",:street_address=>"5958 left", :city=>"los angeles", :state=>"ca", :zip=>"98768"}
Unable to save user {:first_name=>"jill", :last_name=>"jilly", :email=>"5857@joc.com", street_address=>"85755 second", :city=>"culver city", :state=>"ca", :zip=>"90332"} 
```

不确定我在这里是否遗漏了一些明显的东西。这似乎很简单。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:33:49.123

只需打印 user.errors 或 user.errors.messages 而不是该消息。你会明白为什么你的模型无法保存。

# c# - 非通用 TaskCompletionSource 或替代

> ID：11969208
> 
> 赞同：80
> 
> 时间：2012-08-15T12:24:28.710
> 
> 标签：c#, .net, async-await

我正在使用通常异步显示的警报窗口（Telerik WPF）（代码在打开时继续运行），我想通过使用 async/await 使其同步。

我有这个工作，`TaskCompletionSource`但那个类是通用的，并且返回一个对象，就像`Task<bool>`我想要的只是一个`Task`没有返回值的普通对象。

```
public Task<bool> ShowAlert(object message, string windowTitle)
{
    var dialogParameters = new DialogParameters { Content = message };

    var tcs = new TaskCompletionSource<bool>();
    dialogParameters.Closed += (s, e) => tcs.TrySetResult(true);

    RadWindow.Alert(dialogParameters);

    return tcs.Task;
} 
```

调用该方法的代码是

```
await MessageBoxService.ShowAlert("The alert text.") 
```

如何返回一个功能相似的非通用任务，我可以等待直到`dialogParameters.Closed`事件触发？我知道我可以忽略`bool`此代码中返回的内容。我正在寻找与此不同的解决方案。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-15T12:27:42.360

该方法可以更改为：

```
public Task ShowAlert(object message, string windowTitle) 
```

`Task<bool>`继承自，`Task`因此您可以返回，同时只向调用者`Task<bool>`公开`Task`

**编辑：**

我找到了一个 Microsoft 文档[http://www.microsoft.com/en-us/download/details.aspx?id=19957](http://www.microsoft.com/en-us/download/details.aspx?id=19957)，由 Stephen Toub 撰写，标题为“基于任务的异步模式”，它有以下摘录建议这个相同的模式。

> TaskCompletionSource<TResult> 没有非泛型对应项。但是，Task<TResult> 派生自 Task，因此通用 TaskCompletionSource<TResult> 可用于 I/O 绑定方法，这些方法通过使用具有虚拟 TResult 的源（布尔值是一个很好的默认选择，并且如果开发人员担心 Task 的使用者将其向下转换为 Task<TResult>，则可以使用私有 TResult 类型）

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-08-15T12:59:17.360

如果您不想泄露信息，常用的方法是使用`TaskCompletionSource<object>`并完成`null`. 然后将其作为`Task`.

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-08-12T08:20:07.623

.NET 5 有一个非通用的`TaskCompletionSource`.

它被添加到这个拉取请求中：[https ://github.com/dotnet/runtime/pull/37452/files#diff-4a72dcb26e2d643c337baef9f64312f3](https://github.com/dotnet/runtime/pull/37452/files#diff-4a72dcb26e2d643c337baef9f64312f3)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-25T17:28:42.383

[Nito.AsyncEx](https://github.com/StephenCleary/AsyncEx)实现了一个非泛型`TaskCompletionSource`类，归功于上面的 @StephenCleary 先生。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-22T23:19:23.317

来自@Kevin Kalitowski

> 我找到了一个 Microsoft 文档[http://www.microsoft.com/en-us/download/details.aspx?id=19957](http://www.microsoft.com/en-us/download/details.aspx?id=19957)，由 Stephen Toub 撰写，标题为“基于任务的异步模式”

本文档中有一个示例，我认为它可以解决 Kevin 指出的问题。这是一个例子：

```
public static Task Delay(int millisecondsTimeout)
{
    var tcs = new TaskCompletionSource<bool>();
    new Timer(self =>
    {
        ((IDisposable)self).Dispose();
        tcs.TrySetResult(true);
    }).Change(millisecondsTimeout, -1);
    return tcs.Task;
} 
```

起初我认为这不好，因为您不能在没有编译消息的情况下直接将“异步”修饰符添加到方法中。但是，如果您稍微更改该方法，该方法将使用 async/await 进行编译：

```
public async static Task Delay(int millisecondsTimeout)
{
    var tcs = new TaskCompletionSource<bool>();
    new Timer(self =>
    {
        ((IDisposable)self).Dispose();
        tcs.TrySetResult(true);
    }).Change(millisecondsTimeout, -1);
    await tcs.Task;
} 
```

编辑：起初我以为我已经克服了困难。但是，当我在我的应用程序中运行等效代码时，此代码只会让应用程序在等待 tcs.Task; 时挂起。所以，我仍然认为这是 async/await c# 语法中的一个严重设计缺陷。

# android - 使用 Flex 的 Android 上的 Web 服务网络问题

> ID：11969210
> 
> 赞同：0
> 
> 时间：2012-08-15T12:24:29.270
> 
> 标签：android, web-services, apache-flex, flash-builder

我正在开发一个使用 Flash Builder 和 Flex 部署到 iOS 和 Android 的移动应用程序。我现在想开始在物理设备上进行测试，因为一切都在 Flash Builder 模拟器上运行。

当我的应用程序加载并显示第一个视图时，将运行以下代码。

```
creationComplete="initApp(event)

protected function initApp(event:FlexEvent):void
{               
    pricingAppWebService1.updateApp("RAMISAppUpdate");                          
} 
```

我的问题是，当我尝试使用 Web 服务（如下所示）将 xml 数据从服务器加载到应用程序时，会导致错误。这很奇怪，因为它适用于 Flash Builder 模拟器。

```
<fx:Declarations>
    <s:WebService id="pricingAppWebService" 
        wsdl="http://dev.ramislive.com/webservice/pricing.asmx?WSDL"
        result="dataSent_resultHandler(event)"
        fault="dataSent_faultHandler(event)" />    
</fx:Declarations> 
```

当应用程序尝试获取 xml 数据时，它会点击定价 AppWebService_faultHandler，此时设备会显示一个确定/取消弹出框，其中我的机器的本地 IP 显示在输入文本中。

```
protected function pricingAppWebService_faultHandler(event:FaultEvent):void
{
    trace(event.fault);
    navigator.pushView(MainMenu);           
} 
```

跟踪在 Flash Builder 控制台中提供以下信息。

```
[ RPC Fault faultString="HTTP request error" faultCode="Server.Error.Request"
    faultDetail="Unable to load WSDL. 
    If currently online, please verify the URI and/or format of the WSDL    
    (http://dev.ramislive.com/webservice/pricing.asmx?WSDL)" ] 
```

当然，我考虑了设备上的安全设置，并且以下内容存在于 src/Main-App.xml 中的 android 清单文件中。

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

~~作为说明，我已经查看了[这个问题](https://stackoverflow.com/questions/5665782/flex-webservice-and-android)，我的问题的解决方案可能非常相似。但是我尝试用 IP 地址替换域但没有成功。抱歉，如果这个问题太模糊，这是我在网站上的第一个问题。我试图提供尽可能多的细节，因为我可能缺少整个 mxml 文件。~~

这个问题似乎引发了某种安全问题——我认为弹出框就是这样。然而，这只是推测，但我的服务器在单击“确定”并按下手机后退按钮尝试重新加载数据后注意到响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:11:06.080

请务必注意，在使用我的内部 wifi 连接进行测试时不会发生这种情况，因为与测试计算机的连接可用（这是框中的 IP）。为避免此问题，请改用 ipa 的发行版。否则不要担心它不会在最终发布版本中显示。

```
Project --> Export Release Build 
```

# php - phpunit镜像下载测试

> ID：11969211
> 
> 赞同：0
> 
> 时间：2012-08-15T12:24:45.143
> 
> 标签：php, image-processing, phpunit

我正在为用 php 编写的图像下载服务编写测试用例。我们正在使用 phpunit。如何检查检索到的二进制数据是否为图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:20:55.747

使用`exif_imagetype`（见[手册](http://php.net/manual/en/function.exif-imagetype.php)）很好，但确实需要你必须在本地磁盘上的文件。如果您不介意硬编码一些幻数，您可以直接检查图像类型，请参见`testFetchWithoutSaving`下一个示例：

```
class ImageTest extends PHPUnit_Framework_TestCase
{

/**
* @see http://stackoverflow.com/a/676975/841830
*/
public function testFetchWithoutSaving(){
    $s=file_get_contents("https://www.google.com/images/srpr/logo3w.png");
    $this->assertEquals("\x89PNG\x0d\x0a\x1a\x0a",substr($s,0,8));

    $s=file_get_contents("https://www.google.com/");
    $this->assertEquals("\x89PNG\x0d\x0a\x1a\x0a",substr($s,0,8),"Fails: first 8 bytes are actually '<!doctyp'");
    }

/**
* @see http://php.net/manual/en/function.exif-imagetype.php
*/
public function testFetchWithTempFile(){
    $s=file_get_contents("https://www.google.com/images/srpr/logo3w.png");
    $tempFilename="/tmp/phpunit.testImage.testFetchWithTempFile";
    file_put_contents($tempFilename,$s);
    $type=exif_imagetype($tempFilename);
    unlink($tempFilename);
    $this->assertTrue($type!==false);   //Any recognized image type
    $this->assertEquals(IMAGETYPE_PNG,$type);   //A specific image type
    }

} 
```

# iphone - 在 iPhone App 中使用 Google+ / Google Plus SDK 可以吗？

> ID：11969212
> 
> 赞同：2
> 
> 时间：2012-08-15T12:24:45.537
> 
> 标签：iphone, ios

[我问这个是因为我在https://developers.google.com/+/mobile/ios/](https://developers.google.com/+/mobile/ios/)中看到了一条注释：

注意：我们最初在开发者预览版中推出适用于 iOS 的 Google+ 平台。这意味着您可以测试和运行您的应用程序，但尚未投入生产。

这是否意味着我们不应该将 G+ 集成到 iPhone App 中？或者到目前为止还有其他批准的方法吗？

# java - Twitter4j：在某个推文/时间点之后下载推文

> ID：11969227
> 
> 赞同：3
> 
> 时间：2012-08-15T12:25:37.243
> 
> 标签：java, android, twitter4j

我使用 twitter4j 来获取我的时间线，如下所示：

```
twitter.getHomeTimeline(new Paging(1,100)); 
```

我怎样才能获得接下来的 100 条推文？一般来说，是否可以指定两条推文或两个时间点并获取其间发布的推文？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T23:43:22.257

首先，您可以通过指定第 2 页并`getHomeTimeline`再次调用来获取时间线中的下 100 条推文。

```
Paging paging = new Paging(2, 100);
List<Status> statuses = twitter.getHomeTimeline(paging); 
```

* * *

您还可以使用和方法指定两条推文（通过状态 ID）`Paging`来获取在两者之间发布的推文。`sinceId``maxId`

> since_id：返回 id 大于指定 id 的
> 元素 max_id：返回 id 小于指定 id 的元素

例如：

```
Paging paging = new Paging(1, 10).sinceId(258347905419730944L)
                                   .maxId(258348815243960320L);
List<Status> statuses = twitter.getHomeTimeline(paging); 
```

（我的时间线上在上述两个 id 之间大约有 5 条推文。只需单击 Twitter 网络界面上的一条推文，然后单击详细信息链接即可转到该推文的页面。然后您可以从网址。）

# ios - 在设置包中本地化数组和其他特殊值

> ID：11969229
> 
> 赞同：2
> 
> 时间：2012-08-15T12:25:42.803
> 
> 标签：ios, localization, settings, plist, bundle

我正在寻找一种方法来本地化 iOS 中 Settings.bundle 的不同字符串。虽然本地化常规字符串很简单，但我想知道您是否以及如何本地化：

1.  **数组**。考虑以下 plist 条目：

    ```
    <dict>
      <key>DefaultValue</key>
      <string>Schedules</string>
      <key>Key</key>
      <string>defaultView</string>
      <key>Title</key>
      <string>Default View</string>
      <key>Titles</key>
      <array>
        <string>Schedules</string>
        <string>Tasks</string>
        <string>Patients</string>
        <string>Links</string>
      </array>
      <key>Type</key>
      <string>PSMultiValueSpecifier</string>
      <key>Values</key>
      <array>
        <string>Schedules</string>
        <string>Tasks</string>
        <string>Patients</string>
        <string>Links</string>
      </array>
    </dict> 
    ```

    为了本地化标题，我添加

    ```
    "Default View" = "Translated Default View"; 
    ```

    到 Root.strings 文件。但是如何翻译 PSMultiValueSpecifier 的标题？

2.  **页脚文本**。是否可以翻译以下条目的*FooterText ？*

    ```
    <dict>
      <key>Title</key>
      <string>Server Settings</string>
      <key>Type</key>
      <string>PSGroupSpecifier</string>
      <key>FooterText</key>
      <string>Can this text be translated?</string>
    </dict> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:55:31.360

在我的应用程序中，我只是将 Titles 字符串/翻译添加到 Root.strings：

```
"Schedules" = "Translated Schedules";
"Patients" = "Translated Patients"; 
```

依此类推，按预期工作。

# php - 用于 3 级控制器的 Codeigniter 和 HMVC 控制器结构

> ID：11969233
> 
> 赞同：0
> 
> 时间：2012-08-15T12:26:10.190
> 
> 标签：php, codeigniter, codeigniter-2, hmvc

我在 Codeigniter 上使用 HMVC 扩展。我的问题主要是关于 url 结构，不想进行路由。

HMVC 适用于：

```
/modules
  /manage
    /controllers
       /language
          language.php 
```

在这个 URL 上：**site_url/manage/language**

但不是这种结构：

```
/modules
   /manage
      /controllers
         /language
            /listing.php 
```

在这个 URL 上：**site_url/manage/language/listing**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:52:29.637

试试这个：

```
/modules
   /manage
      /controllers
         /language.php
         /listing.php 
```

如果您需要分离更多的方法，您必须创建另一个模块。

# php - 是否可以在 args 中定义所需的数组类型？

> ID：11969234
> 
> 赞同：1
> 
> 时间：2012-08-15T12:26:12.670
> 
> 标签：php, function, class

我想做这样的事情：

```
class CCC {}  
function abc(array of CCC $variable) 
```

这在php中可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:29:00.057

不。

您需要手动检查：

```
function foo(array $arr) {
    if (array_filter($arr, function ($i) { return !($i instanceof CCC); })) {
        throw new InvalidArgumentException('Array must contain instances of CCC');
    }

    ...
} 
```

# jquery - 在 django 中使用 JQuery 自动完成小部件

> ID：11969236
> 
> 赞同：2
> 
> 时间：2012-08-15T12:26:27.647
> 
> 标签：jquery, django, autocomplete

我意识到有很多关于这个问题的帖子，但到目前为止没有任何帮助。

我正在整理一个 Django 网站，我需要一个带有可搜索字段的表单，即标准文本输入，它使用给定的文本来过滤选项的下拉列表。

此功能与 JQuery 网站上介绍的功能完全相同：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

我似乎无法让它发挥作用。下面是我的代码：

```
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>

<script type="text/javascript">
    $(function() {
        var availableTags = [

            { label: "Mosek ApS, Ruben Nielsen", value: "8" }

        ];
        $( "#tags" ).autocomplete({
            source: availableTags
         });
   });
</script>
</head>
<body>
    <input id="tags">
</body> 
```

在我看来，这与上面引用的 JQuery 站点上的示例代码完全一样。输入框显示，但没有出现下拉菜单，当我开始输入标签文本时（标签：“Mosek ApS，Ruben Nielsen”）...

任何帮助..？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:32:25.080

你需要包括[`jQuery UI`](http://jqueryui.com/)（这是一个单独的库到普通 jQuery）javascript 和 CSS：

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/base/jquery-ui.css" />
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.22/jquery-ui.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:31:29.683

jQuery Autocomplete 是 jQuery UI 库的一部分，因此您需要将它包含在页面以及核心 jQuery 库中。

# javascript - 当父元素有自己的处理程序时子元素的处理程序

> ID：11969242
> 
> 赞同：0
> 
> 时间：2012-08-15T12:27:01.377
> 
> 标签：javascript, jquery

我有以下标记：

```
<div id="basket-btn">
<button class="buyout" type="button"><span>Text</span></button>
</div> 
```

和两个点击处理程序：

```
$('#basket-btn').click(function(){
alert(1);
})

$('.buyout').click(function(){
alert(2);
}) 
```

问题在于，当我单击 div 或按钮上升时，只有第一次单击处理程序。如何解决？
谢谢。

**更新**：
第一次单击滑动面板，它会向下和向上移动。此滑动面板上的第二个 for 按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:35:44.667

不确定您期望什么输出，但是如果您希望点击两个警报，这似乎对我有用：

```
<script type="text/javascript">
 $(document).ready(function(){
      $('#basket-btn').click(function(){
           alert(1);
      })

      $('.buyout').click(function(){
           alert(2);
      })
 });
</script> 
```

或者，您可能需要一个函数来检查子按钮“.-buyout”是否已被点击或未使用 data()。这只允许显示 alert(1) 或 alert(2)。带有以下注释：

• 当点击.-buyout 按钮时会触发alert(2)。

• 如果div#basket-btn 被点击，而.-buyout 没有被点击，alert(1) 将被触发。

```
<script type="text/javascript">
        $(document).ready(function(){
            $('#basket-btn').click(function(){
             if($(this).children().data('clicked') != true) {
                // if child button has not been clicked; do this...
                alert(1);
             }
            })

            $('.buyout').click(function(){
                // if child button is clicked; do this...
                alert(2);
                $(this).data('clicked', true);
            })
        });
</script> 
```

以上可能更接近你想要的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T13:29:10.660

两个处理程序运行良好。***[这](http://jsfiddle.net/blasteralfred/J5GCQ/)***是一个现场演示。

确保将你的函数包装在里面

```
$(document).ready(function(){
//your stuff here
}); 
```

如果你想阻止按钮点击的第一个功能，你可以使用`stopImmediatePropagation()`

***[这](http://jsfiddle.net/blasteralfred/J5GCQ/1/)***是一个有效的现场演示。

# c++ - 套接字接口

> ID：11969243
> 
> 赞同：1
> 
> 时间：2012-08-15T12:27:03.560
> 
> 标签：c++, visual-studio-2010, sockets, mfc

我正在开发基于 Visual C++ MFC 的项目。我开发了一个套接字接口，但它存在一些问题。来自客户端的消息已成功传递到服务器，并且可以显示在对话框中，但是当服务器发送一些消息时，客户端没有收到任何内容。

服务器收到消息。但是客户没有收到。

向客户端发送消息的解决方案是什么？

```
void CSockDlg::OnReceive(void)
{

    LPTSTR pBuf = new TCHAR[1025];
    int iBufSize = 1024, iRcvd;
    CString strRecvd;

    iRcvd = m_sConnectSocket.Receive(pBuf, iBufSize);

    if (iRcvd != SOCKET_ERROR)
    {    

        pBuf[iRcvd] = '\0';

        strRecvd = pBuf;

        m_ctlRecvd.AddString(strRecvd);

        UpdateData(FALSE);   
    }
} 
```

# android - 如何在 Android 中裁剪屏幕截图

> ID：11969244
> 
> 赞同：-1
> 
> 时间：2012-08-15T12:27:08.103
> 
> 标签：android

我正在尝试在我的应用程序中画线。完成后，我想将屏幕另存为图像。但我不希望按钮出现在图像中。我想裁剪它然后保存它。我尝试使用此代码在 onclicklistener 中裁剪我的位图。但它没有用。Bitmap.createBitmap(位图, 5, 5, 5, 5); 这是我的所有代码：

```
 content.setDrawingCacheEnabled(true); 
    content.buildDrawingCache(); 
    Bitmap bitmap = Bitmap.createBitmap(content.getDrawingCache()); // Bitmap
    Bitmap.createBitmap(bitmap, 5, 5, 5, 5);
    content.setDrawingCacheEnabled(false);

    File file = new File("/sdcard/SurucuImza.jpg");
    FileOutputStream ostream = null;

    try {
        if (bitmap != null) {
            file.createNewFile();
            ostream = new FileOutputStream(file);
            bitmap.compress(CompressFormat.JPEG, 100, ostream); 
            ostream.flush();
            ostream.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    bitmap.recycle();
    bitmap = null;
    ostream = null;
    content.setDrawingCacheEnabled(false);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:35:06.867

您应该将此行的结果分配给一个变量：

```
Bitmap.createBitmap(bitmap, 5, 5, 5, 5);

//Ex:
Bitmap croppedBitmap = Bitmap.createBitmap(bitmap, 5, 5, 5, 5); 
```

然后保存`croppedBitmap`而不是`bitmap.`

还有一件事，你确定你的按钮是 5x5 像素吗？的最后两个参数`createBitmap()`指定`width`和`height`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:56:59.697

由于 Android 屏幕大小和密度的大小可变，我建议您不要使用`content`，但在您的 XML 布局中，您有一个`ViewGroup`“可打印”的区域和带有按钮的其他区域（在视图组之外）。

这样您就必须执行相同的操作，但`viewGroup`使用`content`

# asp.net - 我需要复选框、文本框等输入控件的视图状态吗？

> ID：11969245
> 
> 赞同：4
> 
> 时间：2012-08-15T12:27:12.977
> 
> 标签：asp.net

当`EnableViewstate = false`我做回发时，我的文本框控件保留文本值，但标签控件不保留。我正在更改按钮单击事件的标签和文本框的文本。

```
protected void Button1_Click(object sender, EventArgs e)
{
    TextBox1.Text = "Message Changed";
    Label1.Text = "Message Changed";
} 
```

我的页面还有另一个按钮用于回发。

此外，如果我不需要此控件的视图状态，那么是否有所有不需要视图状态的控件的列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:56:25.240

[`IPostBackDataHandler`](http://msdn.microsoft.com/en-us/library/system.web.ui.ipostbackdatahandler.aspx)即使 ViewState 关闭，所有实现的控件也会加载它们的值。请注意，当 ViewState 被禁用时，事件之类的`TextChanged` 和其他属性之类`ForeColor`的将不起作用。

这是实现的控件列表`IPostBackDataHandler`

*   复选框
*   复选框列表
*   下拉列表
*   HtmlInputCheckBox
*   html输入文件
*   HtmlInputHidden
*   HtmlInputImage
*   HtmlInputRadioButton
*   HtmlInputText
*   html选择
*   HtmlTextArea
*   图像按钮
*   列表框
*   单选按钮列表
*   文本框

[为什么即使视图状态设置为关闭，文本框也会在回发期间保留数据](http://brijbhushan.net/2011/02/07/why-textbox-persists-data-during-postback-even-if-view-state-set-to-off/)

> 每当页面提交或回传到服务器时，整个表单数据都会作为请求的集合发布到服务器。该集合是NamedValue 集合的形式，该集合具有控件的uniqueid 和控件的值的映射关系。您可以使用以下代码片段从表单集合中读取数据

```
//Reading textbox value from the form collection 
string textboxvalue = Request.Form[textbox1.UniqueID]; 
```

> ASP.NET 使用此原语来更新控件的值。ASP.NET 将 IPostBackDataHandler 用于从表单集合加载数据的控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:50:10.290

`ViewState`在请求之间持久化数据是一种混乱的黑客行为。网络是无状态的，并`ViewState`试图让它看起来有状态。

我相信`TextBox`（和其他`<input/>`控件）保持它们的值，`ViewState`因为它们的值是在表单中发布的，而`Label`( `<span/>`) 值不是。有关更多信息，请参阅@Tim Schmelter 的回答。

许多关心页面大小的 Web 窗体开发人员将`ViewState`全局禁用，并且只为特定控件启用它。例如，如果您在 a 中使用标准分页`GridView`，则需要`ViewState`让 ASP.NET 知道用户单击了哪个页码。您可以使用自定义分页并为页码使用实际链接，然后关闭`ViewState`。

使用 Web 窗体是一项有趣的任务，`ViewState`因为您失去了服务器控件的许多易于使用的功能，但在控制标记和状态方面获得了更多。但是，我认为如果你想要这么多的控​​制，你应该考虑使用 MVC 而不是 Web 窗体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:53:02.727

这取决于您的要求。ViewState 用于在页面的多次回发期间保留数据。如果启用了视图状态，则数据将保留，否则将丢失。正如您提到的 TextBox 保留数据，我认为浏览器还将文本框值存储在其缓存中。

# php - 使用 DOM Parser 解析和编辑 html

> ID：11969248
> 
> 赞同：0
> 
> 时间：2012-08-15T12:27:21.483
> 
> 标签：php, parsing, dom, edit

如何使用 PHP DOM Parser 编辑 HTML 页面？我的网站上有一个要编辑的页面。我试过这些东西...

```
 foreach($html->find('div[class=doc-metadata]') as $data){  //bunch of HTML codes that contain a link to be edited. 
      $metadata = $data->children();        

        } 
```

该页面包含一个我要编辑的链接`href`。说...

```
<a href="this/is/random/link">Link to edit</a> 
```

我试过这个。

```
 foreach($html->find('div[class=doc-metadata]') as $data){    

     $link= $data->find('a');      
     $link->href = null; //set to null or change it completely (i think)  

    } 
```

但在那条线之后，我完全迷失了。我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:12:59.337

要更改元素的属性，可以使用[setAttribute()](http://www.php.net/manual/en/domelement.setattribute.php)。

```
$link->setAttribute("target", "_blank"); 
```

完成此操作后，您可能需要 DOM 的 HTML 输出。你可以通过 saveHTML() 来做到这一点。

```
print $html->saveHTML(); 
```

# gcc - 使用 mingw 构建 64 位 dll 以与 rundll 一起使用

> ID：11969249
> 
> 赞同：1
> 
> 时间：2012-08-15T12:27:25.157
> 
> 标签：gcc, dll, 64-bit, mingw, rundll32

我目前正在尝试将我的项目更新为 64 位支持。该项目使用 i686-w64-mingw32 工具链构建了一个 32 位 dll，可以与 rundll 一起使用来启动它。

现在，我正在尝试使用 x86_64-w64-mingw32 工具链来构建它的 64 位版本。我在编译时也使用-m64。DLL 可以被构建和链接，甚至可以被执行。但是在windbg中检查结果时我得到了奇怪的结果（见下面的输出）。看起来它将我的 mmbbq.dll 加载到 32 位地址空间中。它还加载一些依赖项的 32 位版本。我们可以通过查看模块加载时的基地址在输出中看到这一点。它首先加载一些 64 位 dll（可能是 rundll 依赖项）。然后它开始加载 32 位的东西，最后以 32 位模式加载我的 64 位 dll。有趣的是，当我检查它的 PE 标头时，我的 DLL 是 64 位版本。

对此行为的任何解释或我可能搞砸的其他事情，或者我只是误解了输出？我认为基地址应该与 64 位模式下的不同。

```
CommandLine: C:\Windows\SysWOW64\rundll32.exe mmbbq.dll rundll_inject
Starting directory: E:\cygwin\home\will\praty\reversing\mmbbq\dist  
Symbol search path is: SRV*c:\symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
ModLoad: 00000000`00530000 00000000`0053e000   rundll32.exe
ModLoad: 00000000`779a0000 00000000`77b49000   ntdll.dll
ModLoad: 00000000`77b80000 00000000`77d00000   ntdll32.dll
ModLoad: 00000000`75200000 00000000`7523f000   C:\Windows\SYSTEM32\wow64.dll
ModLoad: 00000000`751a0000 00000000`751fc000   C:\Windows\SYSTEM32\wow64win.dll
ModLoad: 00000000`75190000 00000000`75198000   C:\Windows\SYSTEM32\wow64cpu.dll
(1870.1660): Break instruction exception - code 80000003 (first chance)
ntdll!LdrpDoDebuggerBreak+0x30:
00000000`77a4cb60 cc              int     3
0:000> g
ModLoad: 00000000`77720000 00000000`7783f000   WOW64_IMAGE_SECTION
ModLoad: 00000000`76ce0000 00000000`76df0000   WOW64_IMAGE_SECTION
ModLoad: 00000000`77720000 00000000`7783f000   NOT_AN_IMAGE
ModLoad: 00000000`77620000 00000000`7771a000   NOT_AN_IMAGE
ModLoad: 00000000`76ce0000 00000000`76df0000   C:\Windows\syswow64\kernel32.dll
ModLoad: 00000000`76c30000 00000000`76c76000   C:\Windows\syswow64\KERNELBASE.dll
ModLoad: 00000000`75520000 00000000`75620000   C:\Windows\syswow64\USER32.dll
ModLoad: 00000000`75620000 00000000`756b0000   C:\Windows\syswow64\GDI32.dll
ModLoad: 00000000`76330000 00000000`7633a000   C:\Windows\syswow64\LPK.dll
ModLoad: 00000000`77220000 00000000`772bd000   C:\Windows\syswow64\USP10.dll
ModLoad: 00000000`77170000 00000000`7721c000   C:\Windows\syswow64\msvcrt.dll
ModLoad: 00000000`76b90000 00000000`76c30000   C:\Windows\syswow64\ADVAPI32.dll
ModLoad: 00000000`76ae0000 00000000`76af9000   C:\Windows\SysWOW64\sechost.dll
ModLoad: 00000000`764a0000 00000000`76590000   C:\Windows\syswow64\RPCRT4.dll
ModLoad: 00000000`75260000 00000000`752c0000   C:\Windows\syswow64\SspiCli.dll
ModLoad: 00000000`75250000 00000000`7525c000   C:\Windows\syswow64\CRYPTBASE.dll
ModLoad: 00000000`756b0000 00000000`756da000   C:\Windows\syswow64\imagehlp.dll
(1870.1660): WOW64 breakpoint - code 4000001f (first chance)
First chance exceptions are reported before any exception handling.
This exception may be expected and handled.
ntdll32!LdrpDoDebuggerBreak+0x2c:
77c20fab cc              int     3
0:000:x86> g
ModLoad: 72cb0000 72cfc000   C:\Windows\SysWOW64\apphelp.dll
ModLoad: 6a090000 6a11d000   C:\Windows\AppPatch\AcLayers.DLL
ModLoad: 756e0000 7632a000   C:\Windows\syswow64\SHELL32.dll
ModLoad: 76c80000 76cd7000   C:\Windows\syswow64\SHLWAPI.dll
ModLoad: 76340000 7649c000   C:\Windows\syswow64\ole32.dll
ModLoad: 76b00000 76b8f000   C:\Windows\syswow64\OLEAUT32.dll
ModLoad: 72d80000 72d97000   C:\Windows\SysWOW64\USERENV.dll
ModLoad: 72d70000 72d7b000   C:\Windows\SysWOW64\profapi.dll
ModLoad: 75120000 75171000   C:\Windows\SysWOW64\WINSPOOL.DRV
ModLoad: 6a320000 6a332000   C:\Windows\SysWOW64\MPR.dll
ModLoad: 74970000 7497e000   C:\Windows\AppPatch\AcWow64.DLL
ModLoad: 75180000 75189000   C:\Windows\SysWOW64\VERSION.dll
ModLoad: 752f0000 75350000   C:\Windows\SysWOW64\IMM32.DLL
ModLoad: 765a0000 7666c000   C:\Windows\syswow64\MSCTF.dll
ModLoad: 6c440000 6cdf4000   mmbbq.dll
ModLoad: 00000000`6c440000 00000000\`6cdf4000   mmbbq.dll
ModLoad: 00000000`6c440000 00000000\`6cdf4000   mmbbq.dll
ModLoad: 00000000`6c440000 00000000\`6cdf4000   E:\cygwin\home\will\praty\reversing    \mmbbq\dist\mmbbq.dll
(1870.30c): Break instruction exception - code 80000003 (first chance)
ntdll!DbgBreakPoint:
00000000`779f0530 cc              int     3 
```

**更新** 从 System32 目录使用 rundll32 后，它看起来更好。但我仍然对我的 dll 加载到“0x00000000”段中感到困惑。那是常规的 64 位行为吗？

```
CommandLine: C:\Windows\System32\rundll32.exe "mmbbq.dll",rundll_inject 0,0,0,0
Starting directory: E:\cygwin\home\will\praty\reversing\mmbbq\dist
Symbol search path is: SRV*c:\symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
ModLoad: 00000000`ff350000 00000000`ff35f000   rundll32.exe
ModLoad: 00000000`779a0000 00000000`77b49000   ntdll.dll
ModLoad: 00000000`77720000 00000000`7783f000   C:\Windows\system32\kernel32.dll
ModLoad: 000007fe`fe0c0000 000007fe`fe12c000   C:\Windows\system32\KERNELBASE.dll
ModLoad: 00000000`77620000 00000000`7771a000   C:\Windows\system32\USER32.dll
ModLoad: 000007fe`feb10000 000007fe`feb77000   C:\Windows\system32\GDI32.dll
ModLoad: 000007fe`fe560000 000007fe`fe56e000   C:\Windows\system32\LPK.dll
ModLoad: 000007fe`ffbe0000 000007fe`ffca9000   C:\Windows\system32\USP10.dll
ModLoad: 000007fe`fe1d0000 000007fe`fe26f000   C:\Windows\system32\msvcrt.dll
ModLoad: 000007fe`fe730000 000007fe`fe749000   C:\Windows\system32\imagehlp.dll
ModLoad: 000007fe`ffb00000 000007fe`ffbdb000   C:\Windows\system32\ADVAPI32.dll
ModLoad: 000007fe`fe690000 000007fe`fe6af000   C:\Windows\SYSTEM32\sechost.dll
ModLoad: 000007fe`fe7a0000 000007fe`fe8cd000   C:\Windows\system32\RPCRT4.dll
(1b24.1b70): Break instruction exception - code 80000003 (first chance)
ntdll!LdrpDoDebuggerBreak+0x30:
00000000`77a4cb60 cc              int     3
0:000> g
ModLoad: 000007fe`fe270000 000007fe`fe29e000   C:\Windows\system32\IMM32.DLL
ModLoad: 000007fe`ff9f0000 000007fe`ffaf9000   C:\Windows\system32\MSCTF.dll
ModLoad: 00000000`6c440000 00000000`6cdf4000   mmbbq.dll
ModLoad: 00000000`6c440000 00000000`6cdf4000   mmbbq.dll
ModLoad: 00000000`6c440000 00000000`6cdf4000   mmbbq.dll
ModLoad: 00000000`6c440000 00000000`6cdf4000   E:\cygwin\home\will\praty\reversing\mmbbq\dist\mmbbq.dll
ModLoad: 00000000`77b70000 00000000`77b77000   C:\Windows\system32\PSAPI.DLL
ModLoad: 000007fe`fe6b0000 000007fe`fe721000   C:\Windows\system32\SHLWAPI.dll
ModLoad: 000007fe`fe750000 000007fe`fe79d000   C:\Windows\system32\WS2_32.dll
ModLoad: 000007fe`fe550000 000007fe`fe558000   C:\Windows\system32\NSI.dll
ModLoad: 000007fe`feb80000 000007fe`ff908000   C:\Windows\system32\shell32.dll 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:57:41.547

您正在运行`c:\Windows\syswow64\rundll32.exe`这是您要运行的 32 位版本的 rundll32.exe `c:\windows\system32\rundll32.exe`。

`0:000:x86>`从所有 syswow64 模块和提示中可以看出，您正在启动一个 32 位进程。

# javascript - 使用车把 js 使用 data() 将 json 值存储到 li

> ID：11969250
> 
> 赞同：1
> 
> 时间：2012-08-15T12:27:28.760
> 
> 标签：javascript, jquery, handlebars.js

我有一个json结构是这样的..

```
{
"event": [
    {
        "ids": [
            "100",
            "101"
        ],
        "eventlist": [
            {
                "title": "Title1",
                "day": "Fri",
                "date": "2",
                "endDate": "6",
                "month": "1"
            },
            {
                "title": "Title2",
                "day": "Mon",
                "date": "5",
                "endDate": "5",
                "month": "1"
            }
        ]
    }
]
} 
```

HTML 车把模板..

```
{{#event}}
  {{#each eventlist}} 
   <li>
      <div>{{title}}</div>
      <div>{{day}}</div>
      <div>{{month}}</div>
   </li>
   {{/each}}
{{/event}} 
```

如何将值 title,day,month 作为 jquery.data() 值存储到 li 中，以便我可以使用 li.data() 访问 li 的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:29:45.250

只需将它们添加为数据属性：

```
<li data-title="{{title}}" data-day="{{day}}" data-month="{{month}}"> 
```

jQuery 将能够通过以下方式访问它们`.data()`：

```
var title = $('li').data('title'); 
```

# android - Android 4.0 切换自定义主题

> ID：11969251
> 
> 赞同：0
> 
> 时间：2012-08-15T12:27:30.440
> 
> 标签：android, themes, switch-statement

我正在尝试在 android 4.0 API 中使用 Switch（切换）。

如果我将自定义主题用于活动，则会出现显示空指针异常的错误。

`switchStyle`未找到。

如何在自定义主题中使用默认的 android 开关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:54:05.563

您的自定义主题必须具有默认主题之一的父主题：Holo / HoloLight / HoloLightDarkActionBar

这样，您未手动定义的任何内容都将从默认值中选取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:26:04.997

切换样式不公开，无法扩展样式，需要设置背景图片。看看[https://github.com/ankri/SwitchCompatLibrary](https://github.com/ankri/SwitchCompatLibrary)或[https://github.com/ankri/SwitchCompatLibrary](https://github.com/ankri/SwitchCompatLibrary)

# javascript - 插入新表格行时增加输入 ID

> ID：11969252
> 
> 赞同：1
> 
> 时间：2012-08-15T12:27:31.757
> 
> 标签：javascript, jquery, html-table

我有一个表格，表格中最初有 1 行输入字段。用户可以单击“新行”按钮以获取另一行，其中输入字段为空。这一切都很好，但我还需要同时增加新行的 ID 号。

我在以下位置设置了一个示例 JSFiddle：

[http://jsfiddle.net/fmdataweb/vRe9v/2/](http://jsfiddle.net/fmdataweb/vRe9v/2/)

我在这里和其他网站上看到了一些关于如何执行此操作的示例，但我无法将代码合并到我现有的 Javascript 中而不破坏它。这是Javascript：

```
var table = $( '#nextYear' )[0];

$( table ).delegate( '#button2', 'click', function () {

var thisRow = $( this ).closest( 'tr' )[0];
$( thisRow ).clone().insertAfter( thisRow ).find( 'input:text' ).val( '' );
$(this).remove();
});​ 
```

如果有人能告诉我如何扩展我现有的 Javascript 以在创建新行的同时增加 ID，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:35:48.283

检查这个小提琴：http: [//jsfiddle.net/2Ds4J/1/](http://jsfiddle.net/2Ds4J/1/)

添加了一些代码来增加克隆行中所有输入的 ID 和选择，然后再将其插入 DOM。

```
var newIDSuffix = 2;
$( table ).delegate( '#button2', 'click', function () {
    var thisRow = $( this ).closest( 'tr' )[0];

    var cloned = $( thisRow ).clone();
    cloned.find('input, select').each(function() {
         var id = $(this).attr('id');
         id = id.substring(0, id.length-1) + newIDSuffix;
         $(this).attr('id', id);
    });

    cloned.insertAfter( thisRow ).find( 'input:text' ).val( '' );

    newIDSuffix++;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:33:34.300

```
var table = $( '#nextYear' )[0],
    nextId = 2;

$( table ).delegate( '#button2', 'click', function () {

    var thisRow = $( this ).closest( 'tr' )[0];
    $(thisRow).clone().insertAfter(thisRow).find('input:text').val('')
         .attr('id',function(i,oldVal){ return oldVal.replace(/\d+/,nextId); });
    $(this).remove();
    nextId++;
});​ 
```

作为解释，如果您使用回调函数调用该[`.attr()`方法，则将为 jQuery 对象中的每个元素调用一次回调，并且返回值用于设置该元素中的属性。](http://api.jquery.com/attr/)

# asp.net-mvc - 在 MVC 中将一个页面包含在另一个页面中

> ID：11969256
> 
> 赞同：1
> 
> 时间：2012-08-15T12:27:42.560
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我知道如何创建视图部分，但我想在某个控制器上显示某个操作，如下所示：

```
RssController -> ShowRss 
/Rss/ShowRss 
```

我想在此页面内显示该页面：

```
MyBlog -> Index 
/MyBlog 
```

最好的方法是什么，还是我设计错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:33:36.927

要将另一个操作方法结果包含到您的索引视图中，您可以在MyBlog`Html.Action`的视图中调用辅助方法`Index`

```
@Html.Action("ShowRss ","Rss") 
```

**编辑：** *根据评论*

如果不想要，在视图`Layout`中将 Layout 属性值设置为 null`ShowRss`

```
@{
  Layout=null;
} 
```

# javascript - 铬和 JavaScript

> ID：11969257
> 
> 赞同：-1
> 
> 时间：2012-08-15T12:27:48.437
> 
> 标签：javascript, google-chrome, parameters, reserved

我在所有页面中使用名为 top 的 Javascript 函数来设置标准化标题（在近 2000 个子页面上）。但这在 Chrome 中不起作用。它声称（在控制台中）

1.  top 已经被定义（我尝试用两个参数定义函数）
2.  对象的那个属性'top'`[object Windows]`不是一个函数（我在哪里使用它）

所以Chrome似乎没有区分没有参数的对象属性和有两个参数的用户定义函数

这在 IE、Firefox、Opera、Safari 中被接受

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:33:56.880

`top`是[window-object 的预定义属性](https://developer.mozilla.org/en-US/docs/DOM/window.top)。每个浏览器都是这种情况，但是其他浏览器非常宽容，可以让您覆盖它，而 chrome 则不会。

最简单和最干净的事情就是重命名您的财产。

这是您应该避免的单词列表：

[保留字](http://javascript.about.com/library/blreserved.htm)
[类和对象](http://javascript.about.com/library/blclassobj.htm)
[全局属性和方法](http://javascript.about.com/library/blglobal.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:37:31.307

如果您键入：

```
Object.getOwnPropertyDescriptor(window.top).writable; 
```

在 Chrome web 开发者控制台中，你会看到它`window.top`是不可写的，至少在 chrome 中是不可写的。它也不应该是——只需使用另一个名称或将其放在您自己的命名空间中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:35:36.570

您应该将该函数重命名为其他不太常见的名称，例如“topHeader”或“theHeader”或类似的名称。像“top”这样简单的名字肯定很常见。

作为经验法则：您应该使您的变量和函数尽可能独特，以减少命名冲突的可能性。

您还可以通过使用对象文字来减少命名冲突的机会：

```
var myApp = {
     top:function(){
       //excite some code...
   },
      someOtherProp:function(){}
}

myApp.top(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:33:20.587

尝试为您的应用程序/javascript 创建一个新的上下文，这样它就不会发生冲突

```
(function(realTop,realWindow) {
   function top() {
      // do something
   }

   // calls our top function
   top();

   realTop.
})(top, window); 
```

其中 realTop 是对原始顶部对象的引用，而 realWindow 是对示例上下文中的原始窗口对象的引用

但在我看来，以后尽量避免使用这样的名字

# javascript - 如何在 HTML 中填充 Django 表单字段？

> ID：11969258
> 
> 赞同：2
> 
> 时间：2012-08-15T12:27:57.687
> 
> 标签：javascript, python, django, django-models, django-templates

我有一个`model.py:`

```
class usercommand(models.Model):
user = models.ForeignKey(User, blank=False)
a_field = models.PositiveIntegerField(null=True, blank=True)
timestamp = models.DateTimeField(blank=True, null=True) 
```

`user`与我使用带有输入隐藏字段的创建 Django 模型表单相关。`forms.py:`

```
class ApplicationForm(forms.ModelForm):
class Meta:
    model = userCommand
    widgets = {
        'user': forms.HiddenInput()
    } 
```

如您所见，有三个字段可用于输入。但我填写了用户字段`views.py`：

```
def views_method(request, object_id):
if request.method == 'POST':
    form = ApplicationForm(request.POST)
    if form.is_valid():
        form_inst = form.save(commit=False)
        form_inst.user = request.user
        form_inst.save();
        return HttpResponseRedirect(reverse('user_list'))
else:
    form = ApplicationForm()

extra_context = {
    'form':ApplicaitonForm(initial={'user': request.user.pk})
}   
return direct_to_template(request, 'template/remote.html',
                          extra_context=extra_context) 
```

现在我用在我的`remote.html`：

```
<form action="" method="POST">
{{ form.as_p }}
<input type="submit" value="{% trans "Add " %}" /> 
</form> 
```

我需要使用以下用 Jquery 编写的选择器从模板级别填充时间戳字段：

```
<input class="time" type="text" name="start" id="start" />
$('input.time').timepicker(); 
```

但我无法理解，我该怎么做？因为我正在使用`{{form.as_p}}`. 我将如何`timestamp`使用此 Jquery 代码填充 froms 字段。

如果我没有错，那么我们可以通过以下代码来做到这一点：

```
$('#id_timestamp').val($('#time').val()) 
```

ApplicationForm中字段`id_timestamp`的ID在哪里。`timestamp`但是我应该如何编写代码，这样我也可以`ApplicationForm`在`template`级别填充其余字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:57:02.177

```
<form action="" method="POST">
{{ form.as_p }}
<input type="submit" value="{% trans "Add " %}" /> 
</form>
<script>
$(document).ready(function(){
    $('#id_timestamp').timepicker();
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:56:32.333

您可以将[SplitDateTimeWidget](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#splitdatetimewidget)用于时间戳字段。然后在模板上，您可以访问时间输入`$('#id_timestamp_0').timepicker();`或类似的东西

# android - 如何在我的 Android 4.1.1 Nexus 7 上安装根证书以连接到 Corp 802.1x EAP Wifi

> ID：11969262
> 
> 赞同：0
> 
> 时间：2012-08-15T12:28:22.187
> 
> 标签：android, wireless

我正在尝试连接到 802.1x 的公司 wifi 网络，但不确定是否选择 EAP：PEAP、TLS、TTLS 或 PWD。我想我需要安装根证书，但是尝试连接时没有提示。

如何使用 stock 4.1.1 安装根证书，或者是否有可以帮助我连接的应用程序..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:23:06.963

其实很简单。将您的 Nexus 连接到您的计算机。您需要将证书复制到根目录，这很简单，将您的证书复制到所有文件夹所在的位置（电影、下载、视频等）。不要将其复制到其中一个文件夹中，就在该目录中。

现在，在您的 Nexus 上，您需要进行设置，然后查看个人。点击“安全”。在这里，寻找“从存储安装”选项并点击它。然后，您将看到可以安装的所有证书的列表。点击您之前复制的证书，您应该很好！

但是，附带说明一下，Nexus 7（实际上，任何运行 4.1 及更高版本的设备）在连接到 802.1x 网络时可能会出现问题。所以即使你做了所有这些，你可能仍然有连接问题。希望这可以帮助！

# php - 避免在前一个子节点内创建 XML 文档子节点

> ID：11969263
> 
> 赞同：0
> 
> 时间：2012-08-15T12:28:24.580
> 
> 标签：php, simplexml

我正在尝试从 PHP 代码创建一个 XML 文档来获得这个：

```
<xml version="1.0">
<parada nombre="Test Name" total="Test TOTAL">
       <linea numero="TestN" destino="TestD" minutos="TestM"/>
       <linea2 numero="TestN" destino="TestD" minutos="TestM"/>
</parada> 
```

我的 PHP 上有这段代码：

```
<?php

$xml = new SimpleXMLElement('<xml/>');

$parada = $xml->addChild('parada');
$parada->addAttribute('nombre', 'Test Name');
$parada->addAttribute('total', 'Test TOTAL');

$linea = $parada->addChild('linea');

$linea->addAttribute('numero', 'TestN');
$linea->addAttribute('destino', 'TestD');
$linea->addAttribute('minutos', 'TestM');

$linea2 = $parada->addChild('linea2');

$linea2->addAttribute('numero', 'TestN');
$linea2->addAttribute('destino', 'TestD');
$linea2->addAttribute('minutos', 'TestM');

echo $xml;          

echo $xml->asXML(); 
```

?>

但我的结果是这样的：

```
 <xml>
         <parada nombre="Test Name" total="Test TOTAL">
             <linea numero="TestN" destino="TestD" minutos="TestM">
                 <linea2 numero="TestN" destino="TestD" minutos="TestM"/>
             </linea>
        </parada>
    </xml> 
```

我不知道为什么第二个子节点“linea2”在第一个子节点“linea”内。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:46:01.040

这是因为您只是忘记了`<?xml`标签不是`<xml>`标签。如果你想`<prada>`作为根，你只需要把它作为 SimpleXMLElement 构造函数的第一个参数

```
$doc = new SimpleXMLElement("<prada></prada>"); 
```

# objective-c - 整数除法后浮点数为 0

> ID：11969264
> 
> 赞同：14
> 
> 时间：2012-08-15T12:28:28.363
> 
> 标签：objective-c, ios, cgfloat

这可能是一个简单的解决方案，但我无法修复它。

我正在划分 2 个整数：

```
finishedGameFinalScore = [score integerValue];
CGFloat interval = 2/finishedGameFinalScore;
NSLog(@"interval = %f",interval); 
```

日志返回`0.000000`

小数位数有限制吗？我需要保留十进制结果。

谢谢沙妮

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-15T12:38:35.580

您的代码不起作用的原因是您将一个整数除以另一个整数，然后将结果转换为浮点数。

所以你有 2（一个整数）和一些其他数字（也是一个整数）。然后你将 2 除以这个数字——它可能大于 2。假设它是 3。

`Integer`看到 2/3，他就像“0.66666667？嘘，小数点后没有人需要任何东西”。所以他截断了它。你只有0。

然后`Integer`把号码给先生`float`，先生`float`拿到号码超级开心！他就像“是的，0！我要添加所有重要数字”。这就是你最终得到 0.0000000 的方式。

所以，是的，只需先转换为浮点数。甚至是双倍！

![在此处输入图像描述](../Images/66e5f85acfc8172d6732de7193f40369.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-15T13:03:39.550

@Dustin**说**你需要将你的**分频器值转换为浮点数****，**因为它会显示整数值

 ****案例 1：类型转换**

```
NSString *score = @"3";
 int interval = [str intValue];
 CGFloat interval = (2/(float)interval);
 NSLog(@"interval = %.2f",interval); 
```

**案例 2：不需要类型转换**

```
NSString *score = @"3";
 float interval = [str floatValue];
 CGFloat interval = (2/interval);
 NSLog(@"interval = %.2f",interval); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-15T15:00:50.957

只需将 f 提示添加到数字 2。在这种情况下，就可以了。

```
CGFloat interval = 2.0f/finishedGameFinalScore; 
```

以上/以下所有答案都是正确的，并充分解释了这项工作的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-27T07:08:19.373

只需将 long 值从 1.0 分配给 float 变量。

```
unsigned long l1 = 65536;
unsigned long l2 = 256;
float f = (l1/1.0)/(l2/1.0);

NSLog(@"%f",f); 
```**

# tomcat - 从 servlet 应用程序中访问 server.xml 中的主机信息

> ID：11969270
> 
> 赞同：0
> 
> 时间：2012-08-15T12:28:51.297
> 
> 标签：tomcat, servlets, syslog

我们有一个由 spring mvc 提供支持的站点。我添加了一个正在初始化和 ServletContextAware 的 bean，在其中我将模式修改为我们的 syslog appender，添加数据库服务器、名称、用户名等。

我想向唯一标识应用程序/站点的模式添加一些内容。完美的事情是在 server.xml 中拥有来自 host-tag 的 name 属性。

是否可以从应用程序代码中访问该值？有人对唯一标识我可以使用的应用程序/站点的值有任何其他建议吗？我想过 getContextPath 但如果该站点部署在 ROOT 将无济于事。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:13:22.327

使用 log4j MDC 功能很好地解决了我的问题。

# c++ - C++/Win32 最适合我需要的加密？

> ID：11969271
> 
> 赞同：-1
> 
> 时间：2012-08-15T12:28:57.017
> 
> 标签：c++, winapi, encryption

我正在寻找以 1024 字节（不多）的块来加密数据。我的意思不是生成哈希或压缩 - 只是加密。

寻找开源实现+好的算法。

**重要性顺序**：（1）简单（2）速度（3）强度

**强度**：可以用高端超级计算机在合理的时间内解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:39:52.787

我的建议是[Crypto++](http://www.cryptopp.com/)。它有很多算法，我相信你不必把图书馆作为一个整体。

# c - 编译器是否知道局部变量的可重定位地址

> ID：11969273
> 
> 赞同：1
> 
> 时间：2012-08-15T12:28:58.073
> 
> 标签：c, memory-management

我最近遇到了一篇文章“Deep C Secrets”，其中讨论了编译器在编译时解析变量。这对于全局变量和静态变量是可能的，因为它们在程序结束之前占用空间，但是局部变量在堆栈上获得空间的情况是什么？他们是否在运行时分配了空间，如果是，编译器如何跟踪他们的地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:43:36.470

好吧，本地变量的工作方式与全局/静态变量不同。

本地变量在堆栈上“分配”，而堆栈又是系统为正在运行的程序分配的一块内存。CPU持有一个指向该堆栈的“指针”，称为堆栈指针，并且一些编译器/CPU“魔术”会在函数调用上更新该指针。

最后，“堆栈指针”有点指向每个函数调用的本地内存块，就像一张对每个函数调用都是私有的纸，因此函数可以使用它来记录在其他地方不可见的笔记。因此，编译器并没有真正处理局部变量的“地址”，因为它们是在运行时确定的——相反，编译器“跟踪”该“纸”上局部变量的位置。换句话说，局部变量的位置是“相对于堆栈指针”，或者保留为“堆栈指针的偏移量”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:37:22.897

它们的地址是相对于堆栈指针（在大多数情况下实际上是基指针，IIRC），每次执行函数调用时都会移动（`inline`当然函数除外）。

要读取局部变量，生成的程序集将如下所示：

```
mov eax, [ebp -  4] 
```

其中`-4`是变量相对于`ebp`（扩展（32 位）基本指针）的位置。如果您有两个`int`变量（因此是两个 32 位变量），它们的位置将是`-8`和`-4`（因为在 X86 架构上 32 位是 4 字节宽）。

如有疑问，最好的办法是编写一个简短的程序，并将其编译为汇编：

```
gcc -S program.c -o output.S
cat output.S 
```

有关汇编级别的函数调用的更多信息，请参阅[此 wikibook](http://en.wikibooks.org/wiki/X86_Disassembly/Functions_and_Stack_Frames)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T15:22:56.760

你的问题很有趣。我在这里泛泛而谈，但只要我记得，这就是事实。秘密在于编译器在编译时强制所有调用例程和所有被调用例程遵循相同的协议。这就是使这一切正常工作的原因。
编译器输出汇编代码，以便调用例程将函数参数推入堆栈（可能按它们列出的顺序）。然后调用例程跳转到被调用例程，将返回地址（函数调用之后的语句）留在堆栈上。

编译器为被调用的例程输出类似的汇编代码，以便按照它们被推送的相同顺序在堆栈上查找这些参数。当被调用的例程使用完参数时，它会将它们从堆栈中弹出；从堆栈中弹出返回地址（保留它）；将答案（即函数返回类型）压入堆栈（调用例程将在其中查找），然后跳转到返回地址。

调用例程从堆栈中弹出答案并开始使用它。

因此，这些函数参数的整个过程是可重定位的。

顺便说一句，所有“本地”变量（在被调用函数内）也存在于堆栈中，但仅在被调用函数运行时存在。被调用函数临时借用该空间（直到它返回）。只有函数知道那些局部变量在哪里。这就是函数返回后局部变量丢失的原因。

希望我一切顺利。

# c - Linux 上对共享库的弱依赖

> ID：11969275
> 
> 赞同：5
> 
> 时间：2012-08-15T12:29:05.703
> 
> 标签：c, linux, ld, dlopen

我想让我的可执行文件“可选地依赖”其他共享对象。因此，如果没有 DSO，它将能够在没有某些符号的情况下运行。

我可以通过调用来实现这一点，`dlopen/dlsym`但我必须手动加载每个符号并为它们添加包装器，如下所示：

```
void *my_lib = dlopen("my_lib.so", RTLD_LAZY);  
if (!my_lib)  {
    // ok, I promise not to touch my_lib symbols
} else {
    my_foo_ptr = dlsym(my_lib, "my_foo");
    my_bar_ptr = dlsym(my_lib, "my_bar");
}

... my_foo(...) {
    assert(my_foo_ptr);
    return (*my_foo_ptr)(...);
}

... my_bar(...) {
    assert(my_foo_ptr);
    return (*my_bar_ptr)(...);
} 
```

这是一个愚蠢的代码，它直接依赖于“my_lib.so”ABI，这意味着每次库更新时我都必须更新它。

我正在寻找某种方法来`ld.so`为我做这件事。所以理想是：

```
void *my_lib = dlopen("my_lib.so", /* bring me all my symbols */);  
if (!my_lib)  {
    // ok, I promise not to touch my_lib symbols
} else {
    // ok, I can directly call symbols from my_lib.so
    my_foo();
    my_bar();
} 
```

但这有两个问题：
1.在应用链接阶段如何处理这些符号？如果我明确链接到 my_lib.so，则应用程序将严格依赖它，因此如果没有 my_lib.so，则无法启动。如果没有，`ld`将抱怨未定义的符号。
2\. 如何强制`dlopen()`使所有 my_lib.so 符号对我的应用程序可用？

Upd：我意识到与共享库的显式链接而不将其标记为`DT_NEEDED`可以解决问题。但我不知道如何`ld`做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:12:46.210

编写一个了解您的程序需求的模块可能更明智，以最大限度地减少您的程序与该库之间的交互，然后将该代码链接到您的库。想像一个音乐播放器：不要为每种音频格式做这种舞蹈，而是创建一个简单的界面，然后为每种音频格式创建一个单独编译的模块，并将每个模块链接到适当的支持库。这样做的好处是你可以确保你的模块都具有相同的符号并且处理它们更简单：当你加载模块时，创建一个带有函数指针的结构，然后当你调用模块时，只需检查结构是否为 null 和调用函数指针（这可能通过宏来实现）。这也意味着您可以轻松添加此功能的不同版本，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-11T10:18:17.013

虽然我很欣赏[apmasell 面向对象](https://stackoverflow.com/a/11970893/1162141)的新代码方法，但它并不总是适用于现有的代码库。幸运的是，有一种机制允许加载的模块导出自己的函数：

```
 -Wl,-init,<function name> and -Wl,-fini,<function name> 
```

如果您的链接器不支持这一点，您可以编写自己的 init 函数并使用`dlsym()`. 因此，对于每个模块，您将有一个名为`void init_module(void *handle);`（dlopen 的句柄在哪里）之类的函数`handle`，它可以导出任何自己需要的符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:41:02.640

这是可能的，但可能比您愿意投资的工作更多。去做吧：

1.  您需要创建 GCC 的补丁版本，特别是 binutils，它允许您创建“可选”符号列表（即动态加载器在丢失时不会抱怨的符号）。

2.  您必须修补动态加载程序才能理解您的符号。

一种更简单的方法可能是使用工具（= 脚本或简单的 C 程序）可以读取并使用它为您生成样板 C 代码的[DSL 。](https://en.wikipedia.org/wiki/Domain-specific_language)

DSL 将定义所有符号（和参数），并且该工具将使用上面的代码模板将其转换为 .h 和 .c 文件。

当`my_lib.so`更改时（或当您需要更多符号时），您只需编辑（小）DSL 并重新运行脚本。

# c++ - 结构成员初始化

> ID：11969276
> 
> 赞同：0
> 
> 时间：2012-08-15T12:29:14.133
> 
> 标签：c++, arrays, struct

我有一个像这样定义的结构：

```
typedef struct tag_GLOBAL_VAR
{
    int array1[4];
    int array2[5];
    .......
    int array20[40];
 }GLOBAL_VAR; 
```

此结构用于在某个类中定义变量：

```
GLOBAL_VAR g_GlobalVar; 
```

然后在像这样的另一个类中使用：

```
extern GLOBAL_VAR g_GlobalVar;

class constructor;

class destructor;

int class::Start()
{
     //g_GlobalVar.array1 = {1,2,3,4};
     //g_GlobalVar.array4 = {1,2,3};
     some code;
 } 
```

我的问题是我无法像这样初始化（注释行）这两个数组，我`error C2059: syntax error : '{'`从 VS得到一个。为什么这是错误的，解决方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:32:08.997

这是错误的，因为这不是初始化，而是设置一个新值。当您声明 g_GlobalVar 时，您的数组已经初始化。

我看到了 2 个解决方案：A）创建新数组，像您尝试做的那样初始化它们，并在循环中将新数组复制到您的数组中；B）分别设置每个数组的每个条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:38:24.020

特殊的数组初始化语法只在你猜对了，数组初始化可用。在其他时候，您必须一一设置值。

但是，结构赋值（与初始化程序结合）允许使用快捷方式，如下所示：

```
GLOBAL_VAR temporary = { {1,2,3}, {4,5,6} };
g_GlobalVar = temporary; 
```

其他解决方案包括使用`memcpy`：

```
int temp1[] = {1,2,3,4};
memcpy(g_GlobalVar.array1, temp1, sizeof temp1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T12:32:19.373

您不能在声明后以这种方式初始化数组的值。这种语法只有在你同时声明和设置一个数组时才有可能，像这样：

```
int array[5] = {1, 2, 3, 4, 5}; 
```

在所有其他地方，您必须设置每个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T12:38:13.990

如果您需要一次初始化多个成员数组，您可以执行以下操作

```
const GLOBAL_VAR my_const = {{1,2,3,4}, {}, {}, {1,2,3}};  
g_GlobalVar = my_const; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T12:33:26.180

就地初始化 ({...}) 仅在 C++11 中支持用于 POD。

# javascript - jquery detach(): [object Object] 没有方法'replace'

> ID：11969283
> 
> 赞同：1
> 
> 时间：2012-08-15T12:29:40.603
> 
> 标签：javascript, jquery

*Uncaught TypeError: Object [object Object] 没有* 准确的“替换”方法。编码：

```
var controls = $('#head_hidden').children().eq(0);
var item_mouse_over = function() {
    $(this).append(controls);
}
var item_mouse_leave = function() {
    $(this).detach(controls); //this is the problematic strig
}

$('.item').mouseover(item_mouse_over);
$('.item').mouseleave(item_mouse_leave); 
```

这是[jsfiddle](http://jsfiddle.net/scythargon/nmWcj/)解释。使用 item_mouse_over() 我将“控件”添加到元素，但使用 item_mouse_leave() 我无法删除它们:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:08:26.277

编辑:::这是你想要做的：http: [//jsfiddle.net/EhzFy/3/](http://jsfiddle.net/EhzFy/3/)

如果是这样，那么您必须从添加到的 div 中删除子项：`$(this).children().eq(0).detach();`

但如果你想要完成的只是让对象从一个 div 移动到另一个，那么试试这个：http: [//jsfiddle.net/EhzFy/2/](http://jsfiddle.net/EhzFy/2/)

# android - 如何通过与不同应用程序兼容的意图显示图像

> ID：11969289
> 
> 赞同：2
> 
> 时间：2012-08-15T12:30:03.953
> 
> 标签：android, image, android-intent, gmail, share

我正在尝试分享我之前保存在磁盘上的图像，发送一个`Intent.ACTION_SEND`. 问题是我找不到与不同应用程序、官方 Gmail 应用程序和 TweetDeck 兼容的方法。

我要分享的图像包含在`File`：

```
File agendaFile; 
// its path using getAbsolutePath() -> /data/data/com.mypackage/files/agenda.jpg 
```

# 选项 A) 使用 Uri.fromFile

```
Uri agendaUri = Uri.fromFile(agendaFile); 
// the value -> file:///data/data/com.mypackage/files/agenda.jpg 
```

## 结果

*   Gmail，图片是否附加到电子邮件中？**不**
*   Tweetdeck，图像是否添加到推文消息中？**是的**

# 选项 B) 使用 Uri.parse

```
Uri agendaUri = Uri.parse(agendaFile.toURI().toString()); 
// the value -> file:/data/data/com.mypackage/files/agenda.jpg 
```

## 结果

*   Gmail，图片是否附加到电子邮件中？**是的**
*   Tweetdeck，图像是否添加到推文消息中？**不**

# 最后

在这两种情况下，我都会像这样发送意图：

```
final Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setType("image/jpg");
intent.putExtra(android.content.Intent.EXTRA_STREAM, agendaUri);
startActivity(Intent.createChooser(intent, "title")); 
```

那么，是否还有其他选项可以共享图像？共享与大多数应用程序兼容的图像的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:51:13.013

尝试

```
intent.setType("image/*"); 
```

对我来说，它适用于 twitter、whatsapp、蓝牙……

编辑：完整代码：

```
Intent intent = new Intent();
        intent.setAction(Intent.ACTION_SEND);
        intent.setType("image/*");

        intent.putExtra(android.content.Intent.EXTRA_SUBJECT, title);
        intent.putExtra(android.content.Intent.EXTRA_TEXT, R.string.visita);
        Uri uri = Uri
        .parse("android.resource://com.package.xname/drawable/"
                + i);
        intent.putExtra(Intent.EXTRA_STREAM, uri); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T13:32:34.680

我终于解决了在 MediaStore 中存储图像的问题。我所做的不是使用文件的 URI，而是：

```
String agendaFilename = agendaFile.getAbsolutePath();

final ContentValues values = new ContentValues(2);
values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg");
values.put(MediaStore.Images.Media.DATA, agendaFilename);
final Uri contentUriFile = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values); 
```

最后我使用`contentUriFile`：

```
final Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setType("image/jpg");
intent.putExtra(android.content.Intent.EXTRA_STREAM, contentUriFile);
startActivity(Intent.createChooser(intent, "title")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-21T09:27:10.343

对我来说，使用 FileProvider 解决了。我将它设置为使用内置相机拍照并用于分享（见下文）。

```
final Uri uri = FileProvider.getUriForFile(mActivity, "com.paeuba.paragonik.fileprovider", photoFile);
Intent intent = ShareCompat.IntentBuilder.from(mActivity).setType("image/jpeg").setStream(uri).createChooserIntent();
mActivity.startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-10T11:41:43.247

这段代码更简单

```
Intent intent = new Intent(Intent.ACTION_SEND);
            intent.setData(Uri.parse("mailto:"));
            intent.putExtra(intent.EXTRA_EMAIL,"XXXXX@XXXX.com");
            intent.putExtra(intent.EXTRA_SUBJECT, "XXXXX");
            intent.putExtra(Intent.EXTRA_TEXT, "XXXXX");
            intent.setType("message/rfc822");
            chosser = Intent.createChooser(intent, "Enviar Email");
            intent.putExtra(intent.EXTRA_STREAM, uri);
            startActivity(chosser); 
```

# ruby-on-rails - 从 Ruby 1.9.2 升级到 1.9.3，我应该重新安装所有 gems 吗？

> ID：11969292
> 
> 赞同：2
> 
> 时间：2012-08-15T12:30:18.013
> 
> 标签：ruby-on-rails, ruby, rubygems, rvm

在从 1.9.2 升级到 1.9.3 时，如果可能的话，我想避免重新安装 gems。在使用 RVM 管理 ruby​​ 版本时是否有这样的选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:39:53.040

你可以跑

```
rvm upgrade 1.9.2 1.9.3 
```

这将：

*   安装最新的 1.9.3（如果需要）
*   复制所有宝石
*   在每一个 gem 上运行 gem pristine 并报告那些失败的
*   问你是否要删除旧的红宝石

步骤 with`gem pristine`是必需的，因为红宝石之间可能存在会破坏东西的变化 - 特别是宝石创造者使用内部红宝石材料。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:32:34.007

我不这么认为。gems 安装在特定版本之上，因此我认为您需要重新安装。但是，使用导轨，您应该能够`bundle install`

最佳实践也将是在项目的根目录中创建一个 gemset。

这是我的：

```
$ cat .rvmrc 

rvm use ruby-1.9.3-p125@my_local_app_name --create 
```

然后当你 cd 进入它时，它会为你设置 ruby​​ 和 rails 版本。您将看到一个漂亮的绿色状态行，向您显示，例如

```
Using /Users/durrantm/.rvm/gems/ruby-1.9.3-p125 with gemset dmworkflow 
```

# php - 无法安装 symfony2 OSExcelBundle 包

> ID：11969297
> 
> 赞同：0
> 
> 时间：2012-08-15T12:30:55.307
> 
> 标签：php, symfony, composer-php

我正在尝试将 OSExcelBundle 插件集成到我的 Symfony2 项目中。我遵循了自述文件教程，其中提到了以下内容

```
Add this line to the require option in your composer.json file:

 "os/excel-bundle": "dev-master"

Add autoloader for PHPExcel in app/autoloader.php

 require __DIR__.'/../vendor/os/php-excel/PHPExcel/PHPExcel.php';

Execute this command line

 php composer.phar install 
```

为了能够执行 php 命令行，我必须从[http://www.getcomposer.org](http://www.getcomposer.org)下载 composer并将可执行文件放在包中。当我运行它时，我有以下错误

```
Your requirements could not be resolved to an installable set of packages.

Problem 1
- Installation request for os/excel-bundle == 1.0.0.0 -> satisfiable by os/excel-bundle 1.0.0.
- Can only install one of: os/excel-bundle dev-master, os/excel-bundle 1.0.0.
- Installation request for os/excel-bundle dev-master -> satisfiable by os/excel-bundle dev-master. 
```

这是我安装 symfony2 插件所经历的其他步骤

1 - 我将插件放在 vendor/bundle 目录中，使其与以下路径匹配

```
vendor/bundle/OS/ExcelBundle 
```

2 - 我已将此行添加到 app/AppKernel.php 文件中

```
new OS\ExcelBundle\OSExcelBundle(), 
```

3 - 我按照上面的自述文件

这是Json

```
{
  "name": "os/excel-bundle",
  "description": "OS Excel Bundle for Symfony2",
  "keywords": ["excel"],
  "homepage": "http://github.com/ouardisoft/OSExcelBundle",
  "type": "symfony-bundle",
  "license": "MIT",
  "authors": [
    {
      "name": "LOUARDI Abdeltif",
      "email": "louardi.abdeltif@yahoo.fr",
      "homepage": "http://phphub.net"
    }
  ],
  "require": {
    "php": ">=5.2.6",
    "os/php-excel": "dev-master",
    "os/excel-bundle": "dev-master"
  },
  "autoload": {
      "psr-0": { "OS\\ExcelBundle": "" }
  },
  "target-dir": "OS/ExcelBundle"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:16:29.563

Symfony 2.0 标准版不使用 composer，它使用 deps 文件和供应商脚本。通读[此](http://symfony.com/doc/current/cookbook/workflow/new_project_git.html#cookbook-managing-vendor-libraries)

您需要将供应商库添加到您的项目 deps 文件并运行`php bin/vendors install`以将其安装到您的供应商文件夹中。

或者升级到 2.1，你可以使用 Composer。

# extjs - 需要从 json 加载一条记录

> ID：11969299
> 
> 赞同：0
> 
> 时间：2012-08-15T12:30:59.757
> 
> 标签：extjs, store

在我单击网格中的一行后，我希望能够从 json 加载一条记录。所以当我点击一行时，我会这样做：

```
listeners: {
        itemclick: function () {
            var data = grid.getSelectionModel().selected.items[0].data;
        }
    } 
```

所以现在我知道了身份证

```
data.justusId 
```

但是我如何仅使用该 ID 加载商店？json是这个

```
{"justus":[{
      "justusId":"yippie",
      "toys":{"location":"u-13","status":"empty","minStock":10}},
{
      "justusId":"cowboy",
      "toys":{"location":"u-11","status":"full","minStock":10}},
{
      "justusId":"car",
      "toys":{"location":"l-32","status":"aler","minStock":10}}] 
```

因此，当我单击行牛仔时，我希望能够使用该项目加载商店

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:34:21.163

存储通常用于管理项目集合，而不仅仅是单个记录。

在 ExtJS4 中，您将使用 Model.load() 功能。

在以前的版本中，您通常只使用标准的 Ext.Ajax.Request() 调用。

# ios - 使网络活动监视器在 Mac OS X 中可见

> ID：11969300
> 
> 赞同：1
> 
> 时间：2012-08-15T12:31:01.693
> 
> 标签：ios, macos

在 Apple`iOS`中，您可以执行以下操作：

```
UIApplication* myApplication = [UIApplication sharedApplication];
myApplication.networkActivityIndicatorVisible = YES; 
```

你是怎么做到的`Mac OS X`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:46:23.270

Mac OS X 中没有网络活动指示器。因此没有相应的方法。

您可以使用[NSProgressIndicator](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsprogressindicator_Class/Reference/Reference.html)并将其样式设置为`NSProgressIndicatorSpinningStyle`，并自己将其放置在您的视图中。

# liferay - Liferay：如何在 portlet 的 init() 上获取 PortletPreferences 对象？

> ID：11969310
> 
> 赞同：0
> 
> 时间：2012-08-15T12:31:52.287
> 
> 标签：liferay, preferences, portlet, init

我有一个配置为首选项公司范围的 portlet，因此每个人都可以共享相同的首选项

现在我想为这些偏好设置一个默认值，所以这个代码应该只需要在整个生命周期的第一次执行。这就是为什么我相信 init() 方法是设置此默认值的最佳选择，以防它们之前尚未设置。

如何从那里检索 PortletPreferences 对象？

**编辑**我正在寻找可从 GenericPortlet 检索的 portletContext 和 portletConfig 但到目前为止还没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:40:07.037

如果您真的从未更改*过*这些值，那么只需初始化一次并保留它们直到您重新启动服务器就可以了，我会将它们硬编码到您的 portlet 中。

如果配置更改的可能性很小（如果只是最初，在向页面添加 portlet 之后），请在需要时阅读它们。并在 portlet.xml 中提供默认值：

```
<portlet>
    <portlet-name>my-portlet</portlet-name>
    <portlet-class>
        com.example.MyPortlet
    </portlet-class>
    <portlet-preferences>
        <preference>
            <name>my-first-pref</name>
            <value>some default value</value>
        </preference>
    </portlet-preferences>
</portlet> 
```

请记住：如果您更改了 portlet*首*选项，则必须重新启动服务器才能激活它们。

如果您碰巧担心获取首选项的性能：衡量是否有影响，发布数字。我敢打赌，您可以在其他地方获得*更多*性能。如果您*绝对*无法在其他地方获得性能：恭喜，您拥有一个经过良好调整的系统。

# memory - cuMemHostAlloc 内存不足错误

> ID：11969312
> 
> 赞同：1
> 
> 时间：2012-08-15T12:32:03.097
> 
> 标签：memory, cuda

我有一个我不太明白的内存分配问题。我正在尝试分配相当大的 GPU 内存块（我猜这可能是内存碎片问题？）

我非常简化的代码是：

```
#include <stdio.h>
#include <cuda.h>

int main()
{
    CUcontext ctx;
    CUdevice dev = 0;
    void *toSpace;
    CUdeviceptr ptr = (CUdeviceptr)NULL;
    int status;
    int size = 1280*1024*1024;

    status = cuInit(0);
    printf("status: %i\n",status); 

    status = cuCtxCreate(&ctx, 0, dev);
    printf("status: %i\n",status); 

    status = cuMemHostAlloc(&toSpace, size, 0); 
    printf("status: %i\n",status); 

    status = cuMemAlloc(&ptr, size);
    printf("status: %i\n",status); 

    status = cuCtxDestroy(ctx);
    printf("status: %i\n",status); 

    printf("\nPress any key to exit...");
    char c;
    scanf("%c", &c);

    return 0;
} 
```

编辑：

`cuMemHostAlloc`只让我 allocate `686MB`，我得到内存错误。但我有超过 4GB 的可用 RAM。

然后，如果我尝试分配 GPU 内存，`cuMemAlloc`我也想分配最多`1279MB`. 但根据我拥有的设备信息`2048MB`，这些信息`1981MB`是免费的。

如果这是一个碎片问题，是否有办法找到我可以分配的最大内存块？

设备信息是

```
Version:                       2.1
Name:                          GeForce GT 525M
Total global memory:           1981/2047 (Free/Total) MBytes
Total registers per block:     32768    
Warp size:                     32
Maximum memory pitch:          2147483647
Maximum threads per block:     1024
Total shared memory per block  49152 Bytes
Clock rate:                    1 MHz
Memory Clock rate:             900000
Total constant memory:         65536
Integrated:                    0
Max threads per multiprocessor:1536
Number of multiprocessors:     2
Maximum dimension x of block:  1024
Maximum dimension y of block:  1024
Maximum dimension z of block:  64
Maximum dimension x of grid:   65535
Maximum dimension y of grid:   65535
Maximum dimension z of grid:   65535 
```

更新：

因此，在处理了很多 GPU 内存分配之后，我相信这是主机分配出错了。

问题是我现在将更多的 RAM 释放到 6GB（总共 8GB）并且主机分配仍然失败。如果我尝试 malloc 4GB 虽然它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:54:42.623

当您使用 分配时`cudaMemHostAlloc()`，CUDA 使用本机操作系统调用来分配页面锁定的主机内存。操作系统无法对所有物理内存进行页面锁定，因此它只愿意在 CUDA 调用失败之前给 CUDA 一定比例的物理内存，然后将失败传播到您的应用程序。此行为是特定于操作系统的。

一种方法可能是让您通过其他方式分配页面锁定的内存（例如，在 Windows 上，调用`VirtualAlloc()`with`MEM_LARGE_PAGES`并保证生成的内存分配是页面锁定的），然后调用`cuMemHostRegister()`，页面锁定并映射现有的虚拟内存范围对于 GPU。如果内存已经被页面锁定，这只会添加对现有操作系统结构的引用，并且操作系统不会使调用的页面锁定部分失败。这种策略并不能保证成功，因为`cuMemHostAlloc()`两者`cuMemHostRegister()`都将主机页面映射到 GPU 的地址空间，这确实需要一些可能失败的资源分配；但它可能比仅仅向 CUDA 询问固定内存更好。

# java - 动态 Web 项目中的 href 链接出错

> ID：11969314
> 
> 赞同：0
> 
> 时间：2012-08-15T12:32:16.583
> 
> 标签：java, jsp, servlets, href

有以下jsp页面-

`default.jsp`在下面`WebContent`

`EmployeeMenu.jsp`在下面`WebContent/MenuPages`

`selectAccountToRemoveOwner.jsp`在下面`WebContent/ActionsPages`

我在 servlet 和 jsp 页面之间运行以下命令-

首先`default.jsp` ——

```
<html>
<head>
<link rel="stylesheet" href="Styles/Site.css" type="text/css" />
<title>Create new customer</title>
</head>
<body>
    </script>
    <form action="loginCheckServlet" method="POST">
        //form ... 
    </form>

</body>
</html> 
```

去 -`loginCheckServlet`去`doPost`-

```
protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

            // forward to employee page ..
            String addressMenuPage = "MenuPages/"
                    +"EmployeeMenu.jsp";
            RequestDispatcher dispather = 
                    request.getRequestDispatcher(addressMenuPage);
            // go to this page ...
            dispather.forward(request, response) ; 
    } 
```

前往`EmployeeMenu.jsp`——

```
<html>
<head>
</head>
<body>
           <a href="ActionsPages/selectAccountToRemoveOwner.jsp">Remove owner from
                    account</a>
</body>
</html> 
```

去`selectAccountToRemoveOwner.jsp`-

```
<html>
<head>
</head>
<body>
    <a href="../MenuPages/EmployeeMenu.jsp">Return to Employee menu</a>

</body>
</html> 
```

回到`EmployeeMenu.jsp`.

直到这里所有的链接都可以正常工作。但是现在，如果我再次按下链接`EmployeeMenu.jsp`以进入，`selectAccountToRemoveOwner.jsp`我会得到 -

```
HTTP Status 404 - /MyBankProject/MenuPages/ActionsPages/selectAccountToRemoveOwner.jsp

--------------------------------------------------------------------------------

type Status report

message /MyBankProject/MenuPages/ActionsPages/selectAccountToRemoveOwner.jsp

description The requested resource (/MyBankProject/MenuPages/ActionsPages/selectAccountToRemoveOwner.jsp) is not available. 
```

请注意，该消息指的`/MenuPages/ActionsPages`是确实不存在的位置。似乎从`EmployeeMenu.jsp`到的过渡`selectAccountToRemoveOwner.jsp`并没有改变当前的文件夹位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:47:37.353

简单的答案似乎是修改 EmployeeMenu.jsp 文件中链接的 href，使其看起来像这样：

``<a href="../ActionsPages/selectAccountToRemoveOwner.jsp">``

EmployeeMenu.jsp 中的相对链接被附加到我认为是“/MyBankProject/MenuPages/”的当前上下文路径中。

# ruby-on-rails - 即使配置了默认主机，邮件模板中的命名路由也会导致缺少 :host 选项

> ID：11969316
> 
> 赞同：1
> 
> 时间：2012-08-15T12:32:18.787
> 
> 标签：ruby-on-rails, routes, actionmailer, spree

在我的任何应用程序的邮件中使用命名路由都会引发此错误：

```
ArgumentError: Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true 
```

这种情况并非一直发生，我无法在开发或生产模式下本地复制。

如果我在生产中打开控制台，我可以确认已配置默认主机：

```
ActionMailer::Base.default_url_options
 => {:host=>"thehost.com"} 
Rails.application.config.action_mailer.default_url_options
 => {:host=>"thehost.com"} 
Spree::Core::Engine.config.action_mailer.default_url_options
 => {:host=>"thehost.com"} 
```

所有命名路由都通过 Spree 的路由代理调用：

```
<%= spree.my_route_url %> 
```

我在 config/environments/production.rb 中有以下内容

```
config.action_mailer.default_url_options = { :host => "thehost.com" } 
```

这可能是多余的，因为 Spree 还从 :site_url 首选项（我已正确配置）设置它

```
ActionMailer::Base.default_url_options[:host] = Spree::Config[:site_url] 
```

（来自 mail_settings.rb）

Spree 是版本 1-0-stable Rails 3.1.3 Ruby 1.9.3

# ubuntu - 如何在ubuntu上弹出默认消息窗口

> ID：11969317
> 
> 赞同：0
> 
> 时间：2012-08-15T12:32:17.940
> 
> 标签：ubuntu, popup, message

我想实现一个可以在ubuntu上弹出默认消息窗口的功能（使用gnome）。就像播放一首新歌并弹出此窗口时的 Rhythmbox 剂量一样。我怎样才能做到这一点？

![在此处输入图像描述](../Images/20274438bb8a39917884825ce60f0fbb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:54:02.187

Ubuntu 9.04 及更高版本使用新的通知服务器 NotifyOSD。查看 NotifyOSD[开发指南。](https://wiki.ubuntu.com/NotificationDevelopmentGuidelines)这也是[python 中的一个简单示例](http://www.dscripts.net/2010/09/07/create-custom-notification-on-your-ubuntu-desktop-using-python/)。

# iphone - 从 URL 的内容创建 Plist

> ID：11969329
> 
> 赞同：0
> 
> 时间：2012-08-15T12:33:24.783
> 
> 标签：iphone, objective-c, xml, xcode, plist

我制作了一个 PHP 文件，它打印出工作 plist 的所有源代码，我可以通过这种方式成功地将数据库中的数据检索到我的应用程序中。

但是我不希望应用程序总是在线获取数据库，所以我希望用户能够指定他/她何时想要更新 plist（通过按下按钮“更新数据库”）。

我获取 plist 的代码：

```
NSURL *url_ = [[NSURL alloc] initWithString:@"http://localhost/~user/plist.php"];
NSArray *data = [NSArray arrayWithContentsOfURL:url_]; 
```

这很好用，但是用户不必在线即可使用数据库...

我想要做的是用本地 plist 替换它，这很简单。

每当单击“更新数据库”按钮时，我想从 url 下载新的 plist 并替换本地保存的 plist。

希望你明白我的意思:)

在此先感谢迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:06:01.457

保存文件的方法是使用`writeToFile:atomically`返回 BOOL 的方法来告诉您文件是否已保存。

这是一个代码示例：

```
NSArray* a = [NSArray new]; 
BOOL sucess = [a writeToFile:@"my.plist" atomically:YES];
if (!sucess) {
    NSLog(@"Ups, not saved");
} 
```

之后，您可以从您的文档路径加载文件

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //1  Create a list of paths.
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"my.plist"]; 

NSFileManager *fileManager = [NSFileManager defaultManager];

if ([fileManager fileExistsAtPath: path]) {
    NSarray* a = [NSArray arrayWithContentsOfFile:path];
   }
} 
```

它可能会解决你的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:46:40.433

这样做将您的 plist 数据写入文档目录，如下所示：

```
 [arrImages writeToFile:@"yourDocDirPathWithPlist" atomically:YES]; 
```

现在 plist 创建并存储在文档目录中

# symfony - Symfony 2 FOS 捆绑包安装

> ID：11969330
> 
> 赞同：1
> 
> 时间：2012-08-15T12:33:25.697
> 
> 标签：symfony, installation, fosuserbundle

我正在尝试在 Debian 服务器上安装 FOS 包。我使用供应商脚本，我收到以下错误：

```
[Symfony\Component\Config\Exception\FileLoaderLoadException]
Cannot import resource "/var/www/Symfony/app/config/parameters.ini" from "/
var/www/Symfony/app/config/config.yml". 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:45:48.840

希望 OP 已经从他的评论中解决了这个问题。但我会为未来的谷歌人解释。

此错误是由`invalid yml`文件内容引起的。检查您的**parameters.ini ，您可以使用**[在线工具](http://yamllint.com/)验证YML 文件。

我遇到了这个问题，因为[symblog 教程](http://tutorial.symblog.co.uk/docs/validators-and-forms.html#configure-swift-mailer-settings)中 yml 的错误使用。我改成`mailer_transport="smtp"`解决`mailer_transport: "smtp"`我的问题。

# c++ - Boost.MPL 复杂度

> ID：11969332
> 
> 赞同：2
> 
> 时间：2012-08-15T12:33:28.183
> 
> 标签：c++, boost, complexity-theory, boost-mpl

该[`boost::mpl::push_back`](http://www.boost.org/doc/libs/1_50_0/libs/mpl/doc/refmanual/push-back.html)文件指出：

> push_back 在序列末尾执行插入，保证 O(1) 复杂度。

是编译时间的复杂性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:40:34.550

是的当然。它适用于类型，而不适用于值。

**Boost.MPL 库是一个通用的高级 C++ 模板元编程框架，包含编译时算法、序列和元函数**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:59:27.707

`O(1)`是指运行时的复杂性。通常，及时执行的程序`O(1)`被称为以*恒定时间*执行。在这种情况下，文档声称 push_back 执行所需的时间相对于列表的长度是*恒定的；*也就是说，它的执行时间将是一个与列表长度无关的固定常数时间。

另一方面，如果文档声称 push_back 执行起来`O(n)`很复杂，那将表明 push_back 的执行时间可以通过列表长度的线性函数来近似，这里的列表长度为`n`. 属于这种复杂性类别的函数被称为以*线性时间*执行。

Wikipedia 对`O(n)`符号 [1] 有很好的介绍。一个很好的介绍性文本是 Cormen、Lieverson 和 Rivest 的“算法介绍”。

*   [1] [http://en.wikipedia.org/wiki/Big_oh_notation](http://en.wikipedia.org/wiki/Big_oh_notation)。
*   [2] [http://www.amazon.com/Introduction-Algorithms-Thomas-H-Cormen/dp/0262033844](https://rads.stackoverflow.com/amzn/click/com/0262033844)

# nsis - 在运行时设置变量

> ID：11969335
> 
> 赞同：5
> 
> 时间：2012-08-15T12:33:36.477
> 
> 标签：nsis

我正在制作一个 NSIS 脚本来检查是否安装了以前版本的应用程序。如果是这样，它会询问是否应该从这个以前的版本导入配置文件。所以我有一个全局变量**配置文件**，我试图在运行时根据用户选择“是”还是“否”来设置它。我遇到的问题是在编译时抱怨**File:"${XMLConfigDir}*.xml" -> no files found。**因为 XMLConfigDir 尚未设置。那么无论如何在运行时设置一个变量吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T16:51:59.873

**声明变量（ Var**命令）和符号（使用**!define**命令定义）之间存在区别：

```
Var /GLOBAL myVar ; This is variable -> use it as $myVar

!define mySymbol; This is symbol -> use it as ${mySymbol} 
```

试试这个：

```
!define XMLConfigDir "C:\some_path_to_XML\subdir\"

Section "Main Section" 
        File "${XMLConfigDir}*.xml"
SectionEnd 
```

也可以在安装程序运行时使用**/D**命令行开关设置符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:25:33.493

我的问题的解决方案是使用 CopyFiles 内置函数而不是 SetOutPath 后跟 File。

# git - 重命名裸 Git 存储库中的文件

> ID：11969337
> 
> 赞同：1
> 
> 时间：2012-08-15T12:33:43.443
> 
> 标签：git

我有一个中央裸 git 存储库，许多开发人员向其中添加了一些新文件。我想按顺序命名这些文件（某种变更日志），但由于审查过程（引入了一些延迟），很难手动选择正确的下一个变更编号 - 重复的可能性很高。

在中央存储库中有一些钩子（提交后就足够了）会非常好，它只会根据规则重命名新添加的文件。在服务器端制作 git clone 看起来有点复杂且容易出错。

是否有任何低级 git 命令来实现我的目标？谢谢。

# matlab - 如何使用VBA打开matlab

> ID：11969340
> 
> 赞同：0
> 
> 时间：2012-08-15T12:33:49.760
> 
> 标签：matlab, vba

请帮我解决这个问题。

问题是如何从 VB excel 打开 matlab。我用过代码`"matlabinit"`。但是当我在VB excel中运行它时，我可以打开matlab应用程序，但是打开的当前目录不像我想要的那样。我想用我想要的特定当前目录从 VB excel 打开 matlab。

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:52:13.883

最简单的方法是调用 matlab 函数来[更改当前文件夹](http://www.mathworks.com/help/techdoc/ref/cd.html)。这样，它将特定于您手头的项目。因此，将这一行放在您开始与 matlab 交互的开头：

```
MLEvalString "cd('C:\MyFolder')" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:39:44.250

[您可以在此处](http://www.mathworks.fr/matlabcentral/newsreader/view_thread/255581)找到有关如何执行此操作的说明。

你`shell`在 VBA 中使用来运行 Matlab，大致是这样的：

在 VBA 中

```
shell "C:\Matlab2011a\matlab.exe -r your_function_name 
```

在你的 Matlab 代码中

```
function yourFunction()
  cd('C:\yourDirectory');  % moves you to your desired directory
                           % your code here
  exit;                    % exits Matlab
end 
```

[或者，您可以使用上一篇文章](https://stackoverflow.com/questions/8773678/file-path-in-shell-function-vba)中的方法在 VB 中管理您的目录

# android - 如何实现过滤搜索/列表视图搜索？

> ID：11969342
> 
> 赞同：-1
> 
> 时间：2012-08-15T12:34:03.707
> 
> 标签：android, android-listview

如何利用电流`ListView`与我的搜索集成？

```
/** 
 * Updating parsed JSON data into ListView 
 * */
ListAdapter adapter = new SimpleAdapter( 
AllEventsActivity.this, eventsList, R.layout.list_item, new String[] { TAG_EID, _NAME}, 
new int[] { R.id.eid, R.id.ename }); 

//updating listview 
setListAdapter(adapter); 
```

现在如何使用`ListView`集成到下面的搜索代码中？

```
public void onTextChanged(CharSequence s, int start, int before, int count)
{
    textlength = et.getText().length();
    array_sort.clear();
    for (int i = 0; i < listview_array.length; i++) {
        if (textlength <= listview_array[i].length()) {
            if(et.getText().toString().equalsIgnoreCase((String)
                             listview_array[i].subSequence(0, textlength)))
            {
                array_sort.add(listview_array[i]);
            }
        }
    }

    lv.setAdapter(new ArrayAdapter<String>(ListViewSearchExample.this,android.R.layout.simple_list_item_1, array_sort));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:54:40.427

你似乎想念的是：

将您的适配器声明为变量并调用：

```
adapter.notifyDataSetChanged(); 
```

# facebook - twitter 喜欢 facebook 集成在我自己的网站中

> ID：11969347
> 
> 赞同：0
> 
> 时间：2012-08-15T12:34:56.907
> 
> 标签：facebook, facebook-graph-api

我需要在我的网站中集成 facebook。就像在我们的个人资料设置中的 twitter 中一样，我们每次发推文时只连接一次 facebook .. 它会自动发布到我们的 Facebook 墙上。想知道这是否可以通过 facebook opengraph api 实现。用户在我的网站上登录......并且他在我的网站上执行的不同操作被张贴在他的墙上，而无需在每次他登录到我的网站并执行操作（如在 Twitter 中）时提供/检查身份验证！

将不胜感激任何指导。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:11:55.333

为了在墙上发帖，您需要创建一个应用程序，以便您可以请求在 Facebook 墙上发帖的权限（转到[Facebook 应用程序](https://developers.facebook.com/apps)以开始使用）。

完成此操作后，您可以使用 App Dashboard 设置您的 App 所需的权限。然后，您可以使用 Javascript API 让您的用户登录您的网站，此时可能会授予权限。从那里，您可以继续使用 JS API 发布到墙上。

注意：您需要在应用程序中设置对象和操作 - 请参阅[Facebook Open Graph 指南](https://developers.facebook.com/docs/opengraph/)了解更多详细信息。

# java - 显示数据包的 IP 地址

> ID：11969348
> 
> 赞同：1
> 
> 时间：2012-08-15T12:35:05.487
> 
> 标签：java, jpcap, jnetpcap

如何从数据包中显示 IP 地址。

我能够显示端口和协议，但不能显示来自`pcap file`.

我正在使用`jnetpcap`. 有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:20:24.627

jnetpcap 团队表示“*虽然这些是本地 C 库教程，但您会发现调用的过程和顺序几乎相同。如果您了解 C 和 java 语言，那么将这些教程翻译成 java 和 jNetPcap 应该不会有太大问题API。* ”话虽如此，看看jnetpcap 团队在他们的网站上推荐的[这个](http://www.tcpdump.org/pcap.htm)非常深入的教程。

看看最后，在**实际嗅探**下，教程列出了内存中的数据包内容，并告诉您在哪里可以找到 IP 标头。

**其他解决方案：**

如果您能够获得 pcap 文件，您应该能够使用本机[DatagramPacket](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramPacket.html)类来满足您的需要。DatagramPacket 有一个名为[getSocketAddress()](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramPacket.html#getSocketAddress%28%29)的方法，它可以获取 IP 地址和端口号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-09T16:01:31.767

```
PcapPacketHandler<String> jpacketHandler = new PcapPacketHandler<String>() {  

        final Tcp tcp=new Tcp();

    final Ip4 ip = new Ip4(); 

                public void nextPacket(PcapPacket packet, String user) {  

                    final Tcp tcp=new Tcp();
                        if(packet.hasHeader(tcp)){
                        if(packet.hasHeader(ip)){

                        packet.getHeader(tcp);
                        System.out.printf("Received packet at %s caplen=%-4d len=%-4d %s %s\n",  
                        new Date(packet.getCaptureHeader().timestampInMillis()),   
                        packet.getCaptureHeader().caplen(),  // Length actually captured  
                        packet.getCaptureHeader().wirelen(), // Original length   
                        user,FormatUtils.ip(ip.source())                              // User supplied object  
                        );  
                        //JBuffer buffer = packet;
                        //int size=packet.size();
                        byte[] arr=packet.getByteArray(0, packet.size());

                    }}}

            }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:38:54.867

wireshark 能够显示（和捕获）数据。我将研究 jnetpcap。

编辑：我查看了教程（[http://jnetpcap.com/tutorial/usage](http://jnetpcap.com/tutorial/usage)）。请参见第 72 行（创建返回对象）和第 108-112 行（填充和读取返回对象）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-14T18:09:54.660

我能够使用以下 Github 示例从 PCAP 获取源端点和目标端点的 IP 地址和端口号：

[https://github.com/arisath/Pcap-dissection/blob/master/PcapDissector.java](https://github.com/arisath/Pcap-dissection/blob/master/PcapDissector.java)

# google-maps - 生成谷歌地图的单一链接

> ID：11969351
> 
> 赞同：0
> 
> 时间：2012-08-15T12:35:10.967
> 
> 标签：google-maps, google-maps-api-3

我有一个指向谷歌地图的链接，其中通过读取传递链接的参数生成图像。这是代码：

```
<img src="https://maps.googleapis.com/maps/api/staticmap?center=Madison,%20WI&amp;zoom=14&amp;size=288x200&amp;markers=Madison,%20WI&amp;sensor=false" height="200" width="288" /> 
```

我的问题是：

它有什么方法可以生成谷歌地图而不是地图图像，而我只有一行带参数的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:15:37.200

你在寻找这样的东西吗？

[http://www.geocodezip.com/example_geo2.asp?addr1=麦迪逊,%20WI&geocode=1&zoom=14](http://www.geocodezip.com/example_geo2.asp?addr1=Madison,%20WI&geocode=1&zoom=14)

（这是一个 Google Maps API v2 示例，该 API 已弃用，但可以使用 Google Maps API v3 创建类似的东西）

# c++ - 有没有像管道一样工作的 C++ STL 类？

> ID：11969352
> 
> 赞同：6
> 
> 时间：2012-08-15T12:35:14.020
> 
> 标签：c++, stl

在抽象的术语中，管道是具有破坏性读取的流/FIFO 样式容器。它有一种`read()`方法可以一次复制所有数据块，并且功能类似于`get`和`put`用于单个字节。当`read`or`get`返回时，从管道复制的数据将从管道的内部缓冲区中删除 - 与文件或任何其他容器类型不同。

大多数（全部？）STL 容器不提供类似于`read()`缓冲区命令的输入。是否有带有`pop_many()`成员的 fifo 容器类型？

`stringstream`是我能想到的最接近的事情，因为它维护一个内部读取指针，并且未来的读取将阻塞，直到流再次填满。从 API 的角度来看，容器是空的，但必须手动对消耗的数据进行垃圾收集。

C++ 中是否有一个等效的容器或流类可以做到这一点，或者它是你自己的问题（如在 stringstream 示例中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:22:35.123

评论已经提到`std::deque`乍一看似乎是您的最佳选择。

如果这对您不起作用，那么使用`std::list<std::vector<unsigned char> >`. 您一次将块放在一个向量上，然后`splice`在弹出时将它们放入另一个列表中。您必须提供少量方便的包装器代码，如果您不想一次读取其中一个子向量的所有元素，这可能还*不够*。

# javascript - 在 Facebook 帖子中控制 HTML5 视频播放

> ID：11969359
> 
> 赞同：0
> 
> 时间：2012-08-15T12:35:49.853
> 
> 标签：javascript, facebook, html

看了一篇关于[Facebook Now Requires HTML5 and Fallback in Open Graph](http://blog.kaltura.org/facebook-now-require-html5-and-fallback-in-open-graph)的文章，知道如何让 Facebook 识别页面内的视频，并直接播放帖子内的视频。

我想做的进一步是在帖子中做一些特殊的控制，例如从某个给​​定的时间码开始，循环播放。这样的功能可以通过`HTML5`视频标签 + Javascript 轻松完成。但是，我不知道是否可以在帖子中做到这一点。我什至不知道如何尝试。

你有什么建议/意见吗？

谢谢，

卫斯理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:40:53.453

我认为这是不可能的，Facebook 只会嵌入视频而不是您网站上的任何 JS 代码。如果他们要嵌入代码，这对他们来说将是一个潜在的安全风险。

# git - 从 GitHub 上的（以前分叉的）repo 中删除分叉的 repo 消息？

> ID：11969360
> 
> 赞同：3
> 
> 时间：2012-08-15T12:35:54.767
> 
> 标签：git, github

我在 GitHub 上有一个曾经是 fork 的 repo，但它不再是因为我已经擦除了原始项目的任何痕迹并以相同的名称启动了一个新项目。

但是，GitHub 仍然表明该项目是 fork 的。有什么方法可以删除您在项目页面上看到的分叉消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T01:49:15.727

经过进一步调查，我认为这是不可能的。最好的选择可能是[复制 repo](https://help.github.com/articles/duplicating-a-repo)。

# python - 在python中对包含类对象的列表进行排序

> ID：11969361
> 
> 赞同：0
> 
> 时间：2012-08-15T12:35:56.580
> 
> 标签：python, class, sorting, object

我有以下代码，我使用一个类`stat`来保存我的数据。类型的对象`stat`被插入到一个列表中。但是，当我尝试调用该方法`printStats`时，我得到了错误，`AttributeError: stat instance has no attribute 'printStats'`。其次，我想知道如何对包含`stat`. 我的排序应该基于`blocks`.`stat`

```
fi = open( 'txt/stats.txt', 'r' )
fo = open( 'compile/stats.txt', 'w' )
list = []

class stat():
    def __init__(self, fname, blocks, backEdges):
        self.fname = fname
        self.blocks = blocks
        self.backEdges = backEdges
    def printStats(self):
        print self.fname + str(self.blocks) + str(self.backEdges)

while True:
    line_str = fi.readline()
    if line_str == '':
        break

    str = line_str.split()
    list.append( stat(str[0], int(str[1]), int(str[2])) )

for item in list:
    item.printStats() # <-- problem calling this 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:01:52.723

就排序而言，您绝对*可以*使用该`key`功能：

```
import operator
lst.sort(key=lambda x: x.blocks)
lst.sort(key=operator.attrgetter('blocks') ) #alternative without lambda. 
```

但是，如果您希望能够`stats`在非排序上下文中比较对象，您可以覆盖`__eq__`, `__gt__`（`__lt__`为了让您的生活更轻松，您可以使用[functools.total_ordering](http://docs.python.org/library/functools.html#functools.total_ordering)类装饰器为您定义大部分比较）：

```
import functools
@functools.total_ordering
class stats(object): #inherit from object.  It's a good idea
    def __init__(self, fname, blocks, backEdges):
        self.fname = fname
        self.blocks = blocks
        self.backEdges = backEdges
    def printStats(self):
        print self.fname + str(self.blocks) + str(self.backEdges)
    def __eq__(self,other):
         return self.blocks == other.blocks
    def __lt__(self,other):
         return self.blocks < other.blocks 
```

以`stats`这种方式定义，排序应该再次简单：

```
lst.sort()  #or if you want a new list:  new_lst = sorted(lst) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:37:41.257

```
list.sort(key= lambda x:x.blocks) 
```

例子：

```
>>> a=stat('foo',20,30)
>>> a.printStats()
foo2030
>>> b=stat('foo',15,25)
>>> c=stat('foo',22,23)
>>> lis=[a,b,c]
>>> lis.sort(key= lambda x:x.blocks)
>>> '  '.join(str(x.blocks) for x in lis)   #sorted
'15  20  22' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:45:54.353

该函数`printStats`实际上不是您的`stat`类的一部分，因为它使用选项卡式缩进，而类的其余部分使用空格缩进。尝试一下`print dir(stat)`，您会发现它`printStats`不存在。要解决此问题，请更改标签样式，使其在整个班级中保持一致。

你还应该看看这一行：

```
str = line_str.split() 
```

`str`您正在用自己的列表覆盖内置类型。结果，你不能再用`str`把东西转换成字符串了。当你调用成功时`printStats`，它会给你一个`TypeError`。`str`将变量的名称更改为其他名称。

# silverlight - 如何将数据传递给 Silverlight 中用户控件的视图模型？

> ID：11969362
> 
> 赞同：1
> 
> 时间：2012-08-15T12:36:01.530
> 
> 标签：silverlight, silverlight-5.0

我有一个 Block 对象列表。每个区块都有名称和价格。以及这里不重要的其他属性

第 1 座 - 10 英镑
第 2 座 - 20 英镑

我已经实现了一个显示块的用户控件。

这个控件有自己的视图模型，我将视图绑定到。例如，我有一个带有`Content="{Binding Name}"`.

我有一个单独的视图，其中包含一个堆栈面板。这将被多个块控件填充。

如何将块列表中的每个块传递到用户控件的视图模型中？

保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:57:58.750

为堆栈面板视图创建视图模型。在此视图模型中公开一组块视图模型。

将此集合绑定到视图中堆栈面板内的 ItemsControl 之类的东西。设置模板，以便您的用户控件用于显示每个项目。

ItemsControl 实例化的每个控件都将与您的集合中的一个元素相关联。这将导致每个用户控件与其自己的视图模型相关联。

更新 - 这是一些代码

主页面：

```
<Grid x:Name="LayoutRoot" Background="White">
    <StackPanel Orientation="Vertical">
        <ItemsControl ItemsSource="{Binding BlockViewModels}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <local:BlockView></local:BlockView>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </StackPanel>
</Grid> 
```

后面的主页代码：

```
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
        DataContext = new MainPageViewModel();
    }
} 
```

主页面视图模型：

```
public class MainPageViewModel
{
    public ObservableCollection<BlockViewModel> BlockViewModels
    {
        get;
        private set;
    }

    public MainPageViewModel()
    {
        BlockViewModels = new ObservableCollection<BlockViewModel>();
        BlockViewModels.Add(new BlockViewModel { CurrentBlock = new Block { Name = "Block 1", Price = 10 } });
        BlockViewModels.Add(new BlockViewModel { CurrentBlock = new Block { Name = "Block 2", Price = 20 } });
    }
} 
```

块模型：

```
public class Block
{
    public string Name
    {
        get;
        set;
    }

    public int Price
    {
        get;
        set;
    }
} 
```

块视图模型：

```
public class BlockViewModel
{
    public Block CurrentBlock
    {
        get;
        set;
    }
} 
```

块视图：

```
<Grid x:Name="LayoutRoot" Background="White">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding CurrentBlock.Name}"></TextBlock>
        <TextBlock Text=" - "></TextBlock>
        <TextBlock Text="{Binding CurrentBlock.Price}"></TextBlock>
    </StackPanel>
</Grid> 
```

# image - 无法从动态创建的 Devexpress 网格中获取行索引

> ID：11969363
> 
> 赞同：0
> 
> 时间：2012-08-15T12:36:06.827
> 
> 标签：image, dynamic, grid, devexpress

单击 DevExpress 网格中的按钮时，我试图显示图片。网格是动态创建的。它可以很好地显示网格中的数据，但是一旦我尝试获取存储图像名称的单元格的值，我就会收到以下错误：

> “指数数组的边界之外。”

以下是我到目前为止的内容：

```
public GridControl CreateGrid(string[] ColNames, string[] FieldNames, string SqlData, params object[] pars) {
    grid = new GridControl();
    view = new GridView();

    grid.Dock = DockStyle.Fill;
    grid.ViewCollection.Add(view);
    grid.MainView = view;

    view.GridControl = grid;
    view.OptionsView.ShowGroupPanel = false;
    view.OptionsView.ShowAutoFilterRow = false;
    view.OptionsBehavior.Editable = true;
    view.OptionsBehavior.ReadOnly = true;
    view.OptionsSelection.MultiSelect = true;
    view.OptionsSelection.MultiSelect = true;

    for(int i = 0; i < ColNames.Length; i++) {
        GridColumn column = view.Columns.Add();
        column.Caption = ColNames[i];
        column.FieldName = FieldNames[i];
        column.Visible = true;
    }

    table = GlobalDBCTM.DataTableForSql(SqlData, pars);
    grid.DataSource = table;
    grid.BringToFront();
    grid.Tag = view;

    RepositoryItemButtonEdit btnPhoto = new RepositoryItemButtonEdit();
    btnPhoto.AutoHeight = false;
    btnPhoto.Buttons[0].Kind = DevExpress.XtraEditors.Controls.ButtonPredefines.Glyph;
    btnPhoto.Buttons[0].Image = Properties.Resources.copy;
    btnPhoto.TextEditStyle = TextEditStyles.HideTextEditor;
    btnPhoto.ButtonClick += new ButtonPressedEventHandler(btnPhoto_ButtonClick);
    view.Columns[8].ColumnEdit = btnPhoto;

    grids.Add(grid);

    return grid;
}
void btnPhoto_ButtonClick(object sender, EventArgs e) {
    var id = view.GetSelectedRows()[0];
    var photopath = (string)view.GetRowCellValue(id, view.Columns["PhotoPath"]);

    var path = Globals.PhotoRootPath + "\\" + photopath + ".jpg";
    System.Diagnostics.Process.Start(path);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:10:18.643

我相信问题的原因在于这一行：

```
var id = view.GetSelectedRows()[0]; // issue when there are no selected rows 
```

为了避免 IndexOutOfRangeException 我建议您使用以下代码：

```
string photoPath = (string)view.GetFocusedRowCellValue("PhotoPath"); 
```

相关帮助链接：
[识别行和卡片](http://documentation.devexpress.com/#WindowsForms/CustomDocument642)
[获取和设置单元格值](http://documentation.devexpress.com/#WindowsForms/CustomDocument753)
[ColumnView.GetSelectedRows](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_GetSelectedRowstopic)
[ColumnView.GetFocusedRowCellValue](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_GetFocusedRowCellValuetopic992)

# android - AutoCompleteTextView - 当我们在过滤后有一个完全匹配时如何禁用下拉菜单？

> ID：11969364
> 
> 赞同：4
> 
> 时间：2012-08-15T12:36:15.583
> 
> 标签：android, android-layout

有没有简单的方法可以做到这一点？因为带有一个与输入文本相同的元素的下拉菜单看起来是多余的。

我的适配器很简单，这里是代码

```
AutoCompleteTextView autoCompleteTextViewAddress;
...
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(AvatarMainActivity.this, android.R.layout.simple_list_item_1, emailsSet.toEmailStringSet());
    autoCompleteTextViewAddress.setAdapter(adapter); 
```

`emailsSet.toEmailStringSet()`返回字符串集。

当我填写`autoCompleteTextViewAddress`与字符串集中的电子邮件相同的电子邮件时，我仍然可以查看包含一个元素的下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:38:05.617

丑陋的解决方案，但它的工作原理：

```
public class CustomAutoCompleteTextView extends AutoCompleteTextView {

    public CustomAutoCompleteTextView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }
    public CustomAutoCompleteTextView(Context context, AttributeSet attrs)
    {
        super(context,attrs);
    }
    public CustomAutoCompleteTextView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context,attrs,defStyle);
    }
    @Override
    public boolean enoughToFilter()
    {
        boolean isEnough=(getThreshold()<=this.getText().length());

        if(isEnough)
        {
            if(this.getAdapter()!=null)
            {
                int itemsCount=0;
                int matchIndex=0;
                String txt = this.getText().toString();
                for (int i=0; i< this.getAdapter().getCount();i++) 
                {
                    String dat = (String)this.getAdapter().getItem(i);
                    if(dat.startsWith(txt))
                    {
                        itemsCount++;
                        matchIndex=i;
                    }
                }
                if(itemsCount == 1)
                {
                     if(((String)getAdapter().getItem(matchIndex)).equals(txt))
                     {
                         isEnough=false;
                     }

                }
            }
        }
        return isEnough;

    }

} 
```

使用自定义类而不是原始类`AutoCompleteTextView`。

`enoughToFilter`当我们的适配器中只有一个匹配的记录时，覆盖的函数会隐藏下拉列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:25:14.747

取决于代码的类型

但这是一个获取建议的 SQL 示例

```
 If( (select count(*) from /* your code here */) > 1)
     Select /* field */ from /* your code again here */ 
```

这样它只会在有 2 个或更多建议时显示。

# java - Java：将 Servlet 项目和 Socket 项目统一在一个项目中 - 找不到类错误

> ID：11969366
> 
> 赞同：0
> 
> 时间：2012-08-15T12:36:18.863
> 
> 标签：java, sockets, servlets, web-project

我有3个项目。一个是 Servlet（在动态 Web 项目中制作），另一个是套接字项目（也是动态 Web 项目），最后一个是真正的动态 Web 项目，我想用它来统一其他 2 个项目并可以同时上传在我的 Apache Tomcat 服务器上（这不是我的想法，是我老板的想法）。

我已在 Eclipse 上使用“java built path”选项将 Servlet 和 Socket 项目添加到 Unify Project。我已经在 Eclipse/Tomcat 中运行了统一项目，当我对 Socket 发出 Telnet 命令时，它就可以工作了！但是（总是存在但）Servlet 项目无法正常工作，因为 Tomcat 找不到 Listener Servlet 类。我认为问题出在统一项目的 web.xml 上

对我来说，问题是这一行：

```
<servlet-class>
   com.ninatec.fnet3.bussiness_servlet.web.ListenerServlet
</servlet-class> 
```

那么，如何在 Unify Project 上从 Servlet 项目中引用该类？

任何的想法？您如何看待这个统一项目？这是一个正确的方法吗？

感谢并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:47:24.977

您需要将该类 (com.ninatec.fnet3.bussiness_servlet.web.ListenerServlet) 放在与 servlet 相同的项目中，因为这是使用它的地方。

如果您由于老板的设计限制而无法做到这一点，那么您要么必须将另一个项目添加为 servlet 项目的依赖项；将构建好的jar文件放在创建好的war文件的/lib文件夹下（或者使用maven等依赖管理）。或者另一种解决方案是将其添加为 Tomcat 依赖项。当你在 Eclipse 中有一个 tomcat 服务器实例时，要做到这一点，你会这样做：

*   服务器视图
*   双击 Tomcat 实例
*   打开启动配置
*   类路径选项卡
*   单击用户条目项
*   添加项目
*   选择带有 com.ninatec.fnet3.bussiness_servlet.web.ListenerServlet 的项目

但是最后一个解决方案可能是最糟糕的理想情况，您在 servlet 项目中拥有监听器类，因为我怀疑它会在其他任何地方使用，或者是吗？

# sql - 查询日期并返回双周温度平均值

> ID：11969368
> 
> 赞同：0
> 
> 时间：2012-08-15T12:36:24.547
> 
> 标签：sql, average

不知道如何处理这个..我需要获取大量的温度数据..并每隔两周对它们进行平均..我玩过数据透视图，只能返回每周平均数..

```
Table:TempData

SITE  Date  Temperature_C
JON   6/4/2001 28
JON   6/4/2001 29
JON   6/4/2001 26
JON   6/5/2001 24
JON   6/5/2001 27 
```

ETC..

我可以创建一个查询，将所有日期分解为一个特定的 ID。比如 1-100，每个值代表从 2001 年 6 月 4 日开始的 2 周平均值——无论 200 周后是什么。然后以这种方式使用数据透视图。当然，我必须对大量日期进行 AVG（许多具有不同数量的记录值..有些日子有 4 条记录..有些有 40 条）。我可以使用任何代码来搜索基于日期的连续系列.. Datesub()？我不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:34:08.477

这个想法是从某个开始日期开始的天数除以 14。下面是一个使用 SQL Server 语法的示例：

```
select datediff(day, cast('2012-01-01' as date), [date])/14 as weeknumber,
       min([date]) as weekstart,
       max([date]) as weekend,
       avg(Temperature_C*1.0) as avg_temp
from TempData
group by datediff(day, cast('2012-01-01' as date), [date])/14 
order by 1 
```

在其他数据库中，逻辑类似，但具体功能会有所不同。

顺便说一句，2012 年 1 月 1 日是星期天，所以这周应该是星期日 - 星期六（这通常是合理的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T14:59:37.510

你需要这样的东西：

```
SELECT anyColumn, …, dateadd(week, datediff(week, 0, dateColumn) / 2 * 2 , 0) as biweekly, avg(temperature)
FROM table
WHERE condition
GROUP BY anyColumn, …, dateadd(week, datediff(week, 0, dateColumn) / 2 * 2 , 0) 
```

# api - 如何从对象调用中调试访问冲突？

> ID：11969369
> 
> 赞同：3
> 
> 时间：2012-08-15T12:36:46.147
> 
> 标签：api, delphi, debugging, soap, access-violation

当我调用 SOAP API 方法时，我收到以下消息：

```
First chance exception at $74EDB9BC. Exception class EAccessViolation with 
message 'Access violation at address 007004F6 in module 'DB2.exe'. 
Read of address 00000005'. Process DB2.exe (3768) 
```

这是我从堆栈跟踪中得到的：

```
74EDB9AF 8945C0        mov [epb-$40],eax
74EDB9B2 8D45B0        lea eax,[edp-$50]
74EDB9B5 50            push eax
74EDB9B6 FF155C11ED74  call dword ptr [$74ed115c]
74EDB9BC C9            leave 
```

我对 Delphi 不是很熟悉（只是维护一个较旧的程序）。有人可以告诉我如何调试这里发生的事情吗？我正在使用德尔福 2005。

这是失败的代码。调用时出现错误`UpdateContact`，我知道`aContact`&的数据`FCompanyID`在那里并且正确：

```
function TScheduleCenterBeta.AccountUpdate(aContact: c_ScheduleCenterBetaAPI.Contact): boolean;
begin
  try
    SendAuthHeader();
    FContact := FSoapService.UpdateContact(aContact, FCompanyID);
  except
    on e:Exception do begin
      MessageDlg(e.Message,mtWarning,[mbOK],0);
    end;
  end;
  result := true;
end; 
```

该对象`FContact`是在创建主对象时创建的：

```
constructor TScheduleCenterBeta.Create(aOwner: TComponent; aCallID: integer = -1);
begin
  inherited Create(aOwner);

  FCallID := aCallID;
  FCompanyID := c_ScheduleCenterBetaAPI.CompanyID.Create();
  FCompanyID.ServiceCompanyID := StrToInt(TfrmCall(Screen.ActiveForm).Company.IP_CompanyID);
  FProperty_ := c_ScheduleCenterBetaAPI.Property_.Create();
  FContact := c_ScheduleCenterBetaAPI.Contact.Create();
  FContact.ContactID := -1;
  FContact.Address := c_ScheduleCenterBetaAPI.Address.Create();
  FAppointmentSlot := c_ScheduleCenterBetaAPI.AppointmentSlot.Create();
end; 
```

另一个奇怪的地方是错误来来去去。如果我停止程序然后重新启动它（使用 Delphi 调试模式），我可能会也可能不会遇到错误。我还重新启动了 Delphi 以确保它与 Delphi 本身无关，但这似乎并没有改变任何东西。

# wpf - UI 组件的名称

> ID：11969373
> 
> 赞同：0
> 
> 时间：2012-08-15T12:37:04.360
> 
> 标签：wpf, user-interface

有人知道您在下面看到的 UI 组件的名称吗？我想在我的 WPF 应用程序中使用类似的东西。

DevExpress 是否有类似的东西或任何免费的组件库？

**注意**：是的，这很有趣，是的，我的画很烂。

![在此处输入图像描述](../Images/daa66a2c2231a6fb3bdbd181780131b1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:10:28.637

无论出于何种原因，都称为[**面包屑。**](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29)

# javascript - jQuery Lightbox Me - 多个链接相同的弹出窗口

> ID：11969374
> 
> 赞同：1
> 
> 时间：2012-08-15T12:37:04.317
> 
> 标签：javascript, jquery, html

嗨，我正在使用 jQuery Lightbox Me 插件在页面上打开一个弹出窗口，但我希望多个链接打开同一个弹出窗口。

编码：

```
<script src="./pop_files/jquery.lightbox_me.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
    $(function() {
        function launch() {
             $('#sign_up').lightbox_me({centered: true, onLoad: function() { $('#sign_up').find('input:first').focus()}});
        }

        $('#try-1').click(function(e) {
            $("#sign_up").lightbox_me({centered: true, onLoad: function() {
                $("#sign_up").find("input:first").focus();
            }});

            e.preventDefault();
        });
        $('#try-2').click(function(e) {
            $("#sign_up").lightbox_me({centered: true, onLoad: function() {
                $("#sign_up").find("input:first").focus();
            }});

            e.preventDefault();
        });
        $('table tr:nth-child(even)').addClass('stripe');
    });
</script>
<link rel="stylesheet" href="./pop_files/styles.css" type="text/css" media="screen" title="no title" charset="utf-8"> 
```

链接：

```
<a href="./pop_files/pop.htm" id="try-1">Open pop link 1</a>
<a href="./pop_files/pop.htm" id="try-2">Open pop link 2</a> 
```

我遇到的问题是，我需要给每个链接一个新的 (id="try-...") 以使其正常工作，这对于 2 个链接来说很好，但我认为前 50 个链接有点不必要。

必须有一种更简单的方法来做到这一点，所以任何想法都非常受欢迎。

问候凯文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:49:28.773

尝试使用类而不是 id。给所有链接相同的类：

```
$('.try').click(function(){
    //some code...
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:52:54.557

您可以使用[jQuery Selector](http://api.jquery.com/attribute-starts-with-selector/)来执行此操作，如下所示：

```
<script src="./pop_files/jquery.lightbox_me.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
    $(function() {
        function launch() {
             $('#sign_up').lightbox_me({centered: true, onLoad: function() { $('#sign_up').find('input:first').focus()}});
        }

        $('a[id^="try"]').click(function(e) {
            $("#sign_up").lightbox_me({centered: true, onLoad: function() {
                $("#sign_up").find("input:first").focus();
            }});

            e.preventDefault();
        });
        $('table tr:nth-child(even)').addClass('stripe');
    });
</script>
<link rel="stylesheet" href="./pop_files/styles.css" type="text/css" media="screen" title="no title" charset="utf-8"> 
```

这也可以解决您的问题超过 100 秒，我希望这会有所帮助

# scala - Play Idea 失败 - 此版本的 sbt 0.11.3 没有 sbt-idea 插件

> ID：11969375
> 
> 赞同：8
> 
> 时间：2012-08-15T12:37:05.030
> 
> 标签：scala, playframework, intellij-idea, sbt, sbt-idea

我被困住了。

我在 Mac 上并已使用 brew 安装了类型安全堆栈

我已经使用**play new appname**创建了一个新的游戏项目，一切都很好。

**我正在尝试使用play idea**将其导入 intelliJ - 但是当我这样做时，我收到以下错误；

```
[error] no sbt-idea plugin for this version of sbt - 0.11.3 
```

我有戏！2.0.3 和 sbt 0.11.3

知道我实际上是如何解决这个问题的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T10:08:04.887

首先，确保您已遵循：[官方安装说明](https://github.com/mpeltonen/sbt-idea/blob/sbt-0.11/README.md)

这目前将导致以下异常：

```
java.lang.NoSuchMethodError: org.sbtidea.SbtIdeaPlugin$.ideaSettings()Lscala/collection/Seq; at
sbt.PlayCommands$class.intellijCommandSettings(PlayCommands.scala:214) 
```

当前的修复是通过编辑 project.plugins.sbt 文件来降级播放 2.0.1：

```
// Comment to get more information during initialization
logLevel := Level.Warn

// The Typesafe repository
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.0.1") 
```

这似乎暂时解决了这个问题。

# jquery - 用jQuery触发表中的鼠标事件（通过父级）？

> ID：11969376
> 
> 赞同：0
> 
> 时间：2012-08-15T12:37:06.333
> 
> 标签：jquery, events, dynamic, html-table

我有一个问题，我不明白：

我有一个表格，每个单元格都包含一个小的定义列表和一个锚点，所以它看起来像：

```
<table>
<tr>
    <td>
        <dl>
            <dt>Title</dt>
            <dd>Summary</dd>        
        </dl>
        <a>Link</a>
    <td>
</tr>
</table> 
```

还有更多的行和列，但这应该足够了:-)

如果鼠标进入 dl 或者可能是 td，我想要的是显示隐藏的（使用 .hide()-Method）锚。加上隐藏包含在非“mouseenter”的 td's / dl's 中的所有其他锚点。

我尝试了以下功能：

```
(function(){
    $('td').on('mouseenter', 'dl', function(){
        ($(this)
            .next());
            .show();
            .slideDown(300)
                .siblings('a')
                    .slideUp(300);

    })  
})(); 
```

知道我做错了什么吗？问题可能是，我在运行时创建了动态的表格内容（tr 和向下）吗？我很高兴有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:44:58.637

采用：

```
$(this).parent().next().show().slideDown(300).siblings('a').slideUp(300); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:46:06.547

像这样的东西应该达到你想要的：

```
$(function() {  
    $('td').on('mouseenter', function() {  
        $(this).parents('table').find('a').slideUp(300);
        $(this).children('a').slideDown(300);
    });
}); 
```

请参阅此处的 jsFiddle > [http://jsfiddle.net/WR45L/](http://jsfiddle.net/WR45L/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:46:46.857

尝试使用我在下面修改的 javascript。看起来代码对我来说是错误的。

```
(function(){
    $('td').on('mouseenter', 'dt', function(){
        $(this)
            .next()
                .slideDown(300)
            .parent('dl')
                .siblings('a')
                    .slideUp(300);

    })  
})(); 
```

# python - 在 GAE 上使用 Python 2.7 没有显示错误堆栈跟踪

> ID：11969377
> 
> 赞同：2
> 
> 时间：2012-08-15T12:37:09.543
> 
> 标签：python, google-app-engine, python-2.7, stack-trace, python-2.5

我最近在 Google App Engine 上开发 Web 应用程序时从 Python 运行时版本 2.5 切换到了 2.7，我注意到在许多情况下，当脚本遇到错误时，堆栈跟踪不再显示。对于运行时 Python 2.5，这是浏览器中的堆栈跟踪：

![Python 2.5 上的错误回溯](../Images/19ea29a7a8202eb7a094c69238543cf7.png)

（右上角的*Python 2.7.2*是因为我的机器上安装了该版本的 python。）将运行时更改`python27`为对相同错误的回溯执行此操作：

![Python 2.7 上没有错误回溯](../Images/4bead2a2ba1cb8e346055706c73654de.png)

但是，2.7 运行时运行良好，但我也可以使用 2.7 特定的库。我注意到导致此行为的 python 代码中的错误与运行时版本的功能无关。我认为这至少发生在 python 脚本中的错误 GQL 语法，但也有其他错误。

目前，每当我得到第二张图片时，我都会恢复到 2.5，解决问题，然后回到 2.7，但很快这将不可能，因为我的大部分代码都将依赖 2.7 功能。**那么如何让 Python 2.5 的详细错误回溯也显示在 2.7 运行时上呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:39:31.563

看起来 SDK 存在一个未解决的问题：[http](http://code.google.com/p/webapp-improved/issues/detail?id=34) ://code.google.com/p/webapp-improved/issues/detail?id=34 。

但是，根据最后的评论，似乎该更改尚未合并到最新版本中。在我的机器上进行测试（使用 SDK 1.7.0.129 的 OSX），其行为与上述和问题的评论 4 中描述的相同。

如果 GAE 团队的某个人可以对此进行权衡，那就太好了。

# linux - 从宏运行 OS 命令

> ID：11969378
> 
> 赞同：0
> 
> 时间：2012-08-15T12:37:11.997
> 
> 标签：linux, libreoffice

我`scalc`在 Linux 中有一张工作表。

我需要编写一个宏，它从单元格中获取一些参数并使用这些参数调用操作系统命令。我阅读了有关如何创建 libreoffice 宏以及如何在单元格中调用它的教程。

我无法找到在宏中调用哪个函数来调用我的操作系统命令。

有谁知道该怎么做？

此命令是否类似于适用于 Windows 的 VBA EXCEL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:02:06.327

从[这里](http://help.libreoffice.org/Basic/Shell_Function_Runtime)，

```
Shell("c:\windows\calc.exe",2) 
```

完整格式是`Shell (Pathname As String[, Windowstyle As Integer][, Param As String][, bSync])`

`q.bat`所以以`abc`作为参数运行批处理：

```
Shell("q.bat",,"abc") 
```

# android - 将毫秒字符串转换为日期字符串

> ID：11969383
> 
> 赞同：4
> 
> 时间：2012-08-15T12:37:25.780
> 
> 标签：android, date

> **可能重复：**
> [如何在android中将毫秒转换为日期格式？](https://stackoverflow.com/questions/7953725/how-to-convert-milliseconds-to-date-format-in-android)

我有一个毫秒字符串，想将其转换为日期字符串。

像这样：

毫秒：1345032624325E12 -> 日期：2012 年 8 月 15 日星期三 14:10:24

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:41:17.587

希望这有助于 [如何在android中将毫秒转换为日期格式？](https://stackoverflow.com/questions/7953725/how-to-convert-milliseconds-to-date-format-in-android)

```
 private String getDate(long milliSeconds, String dateFormat)
    {
        // Create a DateFormatter object for displaying date in specified format.
        DateFormat formatter = new SimpleDateFormat(dateFormat);

        // Create a calendar object that will convert the date and time value in milliseconds to date. 
         Calendar calendar = Calendar.getInstance();
         calendar.setTimeInMillis(milliSeconds);
         return formatter.format(calendar.getTime());
    } 
```

# jsf-2 - 将对话注入支持 bean 时出现“不满足的依赖关系”警告

> ID：11969384
> 
> 赞同：0
> 
> 时间：2012-08-15T12:37:30.070
> 
> 标签：jsf-2, intellij-idea, jboss7.x, cdi, jboss-weld

```
@ConversationScoped
public class BackingBean

{

    @Inject Conversation conversation;

    public BackingBean() {}

     ...

} 
```

为什么 Intellij 给我一个警告：“不满足的依赖关系：没有 bean 匹配注入点。”

CTRL+F1 详细消息是“检测具有模糊依赖关系的注入点”。

它编译和部署并且似乎在 JBoss 上运行良好，例如我能够进行 conversation.begin()、conversation.end() 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:10:59.843

我去了项目结构-> 模块。我选择了我的网络模块。我注意到了 CDI 方面。我单击该构面并注意到两个单选按钮都没有被选中：Apache Open Web Beans 或 JBoss Weld。我选择了 JBoss Weld。然后，出现了一条错误消息：

“缺少以下库：weld-api.jar、weld-core.jar、weld-logger.jar、weld-se.jar、weld-servlet-int.jar、weld-spi.jar、weld-tomcat-support .jar，焊接检票口.jar"

我点击了“修复”按钮。打开一个对话框，“设置库”。我有一个选择：“使用库”或“下载”。

我选择下载。

Intellij 下载了八个 jar 文件并将它们安装在我的 $PROJECT_HOME/lib 目录中。

现在，当我注入 Conversation 时，我没有收到任何警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:57:51.917

如果它在服务器上运行，那你很好——看起来你要么在 Idea 中发现了一个错误，要么以某种方式错误配置了项目的 CDI 特性（`Conversation`当然在你的类路径中，但可能没有被 Idea 扫描）......

我怀疑后者:)

# android - 扩展Activity和扩展ListActivity有什么区别？

> ID：11969386
> 
> 赞同：11
> 
> 时间：2012-08-15T12:37:40.620
> 
> 标签：android, android-activity, listactivity, extend

我正在使用一个扩展 Activity 的类来从 API 获取列表...

在一些基本相同的应用程序中，开发人员扩展了 ListActivity...

有哪些区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T12:47:39.890

`ListActivity``android.app.Activity`如果您愿意，可以通过“免费”提供许多以列表为中心的功能来扩展通用功能。例如，列表条目单击的处理巧妙地包含在 ListActivity 中`onListItemClick(...)`，而如果您使用的是普通的，`android.app.Activity`那么您需要使用`OnClickListener`and 实现手动实现它。

总而言之，如果您的布局包含一个列表，那么请使用 ListActivity/ListFragment，因为它是一个有用的扩展。这并不意味着您的整个屏幕布局必须是列表，而是它的一部分必须托管一个带有标识符的 ListView 小部件，`id="@android:id/list"`.

可以在[此处](http://developer.android.com/reference/android/app/ListActivity.html)找到有关该类的 Javadoc 以及如何使用它的有用示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T12:45:04.090

ListActivities 是专门为与 ListViews 一起使用而设计的。它提供了几个辅助方法，例如[onListItemClick()](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)，这使得在其中使用 ListView 变得更加容易。

您可以在 ListActivity 中的 Activity 中执行您可以执行的任何操作。

如果您想更改 ListActivity 的布局，您仍然可以使用 Activity 中的 setContentView() 方法。只要在您的 View 中某处有一个名为 @android:id/list 的 ListView，ListActivity 仍然可以工作。

如果您仍然不确定，您可以随时查看[ListActivity](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/ListActivity.java?av=f)的源代码（链接到的 Jelly Bean 代码），看看它除了让您的生活更轻松之外并没有做太多事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T12:48:25.980

从`ListActivity`您同意合同的扩展开始，您的活动布局`ListView`中将有一个组件可用。

你的`ListView`组件应该有 id： `@android:id/list`

ListView 类为工作和操作 ListView 提供了方便的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T10:55:25.467

此外，在常规中，`Activity`您可以使用下面的代码`onCreate`来隐藏应用程序标题栏。似乎您不能在`ListActivity`. （很难学到这一点）

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.activity_list);
// The rest of the content of onCreate 
```

# asp.net - 在字符串VB.net中元素的倒数第二个实例之前插入文本

> ID：11969390
> 
> 赞同：0
> 
> 时间：2012-08-15T12:37:50.157
> 
> 标签：asp.net, vb.net, substr, lastindexof

我有一个类似以下布局的文档（实际上它要大得多）：

```
<div id="header">
    <div id="whatever">
        <div id="content">
            <p>Yes</p>
        </div>
    </div>
</div> 
```

我正在从其他地方导入该 html，但我无法控制它。我需要在倒数第二个 div 之前添加一点 html：即

```
<div id="header">
    <div id="whatever">
        <div id="content">
            <p>Yes</p>
        </div>

        [In here!]

    </div>
</div> 
```

现在，我已经使用 substr 和 lastindexof 完成了其中的一部分。但我之前不太清楚如何到达 div。

这是我所拥有的：

```
Public Partial Class RightMenuControl
    Inherits System.Web.UI.UserControl

    Private dtItemsFeed As dsItems.ItemsFeedDataTable
    Private taItemsFeed As New dsItemsTableAdapters.ItemsFeedTableAdapter
    Private allText As String

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        loadData()
    End Sub

    Private Sub loadData()

        dtItemsFeed = New dsItems.ItemsFeedDataTable
        dtItemsFeed = taItemsFeed.GetCode()

        For Each rFeed As dsItems.ItemsFeedRow In dtItemsFeed
            allText = rFeed.SideCode
        Next

        Dim FirstDiv As String = allText.LastIndexOf("</div>")
        Dim LastDiv As String = allText.Substring(FirstDiv, 6)

        Dim str As String = allText

        Dim strRes As String = str.Insert(FirstDiv, "<div>extrahtml</div>")

        ltrSide.Text = strRes

    End Sub
End Class 
```

将我的 extrahtml div 打印在：

```
<div id="header">
    <div id="whatever">
        <div id="content">
            <p>Yes</p>
        </div>
    </div>
        <div>extrahtml</div> 
</div> 
```

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:42:09.910

好的，知道它总是倒数第二个 Div，这应该可以解决问题。

```
Dim LastDiv As Int = allText.LastIndexOf( "</div>" )
Dim SecondToLastDiv As Int = allText.LastIndexOf( "</div>", LastDiv ) - 1

Dim str As String = allText
Dim strRes As String = str.Insert(SecondToLastDiv, "<div>extrahtml</div>") 
```

# c++ - PDH 无法通过 PdhAddCounter() 访问总 CPU 时间

> ID：11969392
> 
> 赞同：0
> 
> 时间：2012-08-15T12:38:02.487
> 
> 标签：c++, pdh

我目前正在尝试为我的 DirectX 程序制作某种 CPU 使用情况概述，但似乎我无法通过 PdhAddCounter() 获取此信息。我的代码如下所示：

```
status = PdhOpenQuery(NULL, 0, &m_queryHandle);
    if(status != ERROR_SUCCESS)
    {
        m_canReadCpu = false;
    }

status = PdhAddCounter(m_queryHandle, TEXT("\\Processor(_Total)\\% processor time"), 0, &m_counterHandle);
    if(status != ERROR_SUCCESS)
    {
        m_canReadCpu = false;
    } 
```

在 PdhAddCounter 调用后，我的状态为 = -1073738824，这会导致程序失败。

我使用的是 Windows 7 64 位系统，我必须在 64 位环境中做一些不同的事情吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:17:59.017

请记住：PdhAddCounter 是区域设置敏感的。

响应 -1073738824 表示 PDH_CSTATUS_NO_OBJECT=0xC0000BB8。api 没有找到那个字符串。您使用的是非英文操作系统吗？

如果您需要做一个与 Windows XP 兼容的应用程序，您需要使用如下解决方法：[http](http://en.verysource.com/code/3604946_1/platforminfo.cpp.html) ://en.verysource.com/code/3604946_1/platforminfo.cpp.html 。

对于 Vista 和 Windows 7、8，...您可以改用 PdhAddEnglishCounter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T09:01:27.980

您可能还想使用[GetSystemTimes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724400%28v=vs.85%29.aspx) kernel32 API，这将使您摆脱对 pdh.dll 的依赖。

在这里查看[我的答案](https://stackoverflow.com/questions/448811/calculate-total-cpu-usage/20324308#20324308)。

# c# - 如何在 C# 中动态实例化对象

> ID：11969394
> 
> 赞同：-4
> 
> 时间：2012-08-15T12:38:07.933
> 
> 标签：c#

我想知道是否有一种方法可以使用 for 循环在 C# 中动态创建任意数量的对象实例。

请提供代码示例。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:56:15.663

使用列表保留对对象的引用：

```
 var myobjects = new List<System.Security.Cryptography.MD5>();
        for (var i = 0; i < 100; i++)
        {
            myobjects.Add(System.Security.Cryptography.MD5.Create());
        } 
```

并遍历列表：

```
 for (var i = 0; i < 100; i++)
        {
            myobjects[i].ComputeHash(new byte[] { (byte)i });
            Console.WriteLine(BitConverter.ToString( myobjects[i].Hash));
        } 
```

否则重用同一个变量会使前一个对象超出范围，并自行处理。

# svn - 如何在 SVN 中合并文件的一部分？

> ID：11969404
> 
> 赞同：0
> 
> 时间：2012-08-15T12:38:39.047
> 
> 标签：svn, svn-merge

假设我对一个文件进行了多项更改，但我只想将其中的一些更改提交回主干，即第 10-20 行需要提交，但没有别的，有没有办法在 SVN 中做到这一点？理想情况下使用 Tortoise SVN。

我不在分支上工作，只是从主干结帐。我只是提交了一些与开发无关的明显修复，主要是 makefile 中的奇怪位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:43:02.600

也许提交更改要合并到单独的提交中，然后仅合并此提交？我认为这[可能是相关的帖子](https://stackoverflow.com/questions/3876854/svn-merge-individual-file-revisions-from-a-branch-into-trunk)

# c# - Linq to SQL - 按两列排序

> ID：11969408
> 
> 赞同：1
> 
> 时间：2012-08-15T12:38:59.343
> 
> 标签：c#, asp.net-mvc, linq-to-sql

我有两列，“添加日期”和“修改日期”。

我想按修改日期订购所有产品，但由于它可以为空，我想在这种情况下添加日期。

```
 var q = from c in db.Products
                where c.UserID == UserID
                orderby c.DateModified ?? c.DateAdded descending
                select
                    new ManageProducts
                        {
                            ID = c.ID,
                            Image = c.Photo.PhotoFile,
                            Name = c.Name,
                            DateAdded = (DateTime) c.DateModified ?? c.DateAdded 
}; 
```

这告诉我一个错误

```
DateAdded = (DateTime) c.DateModified ?? c.DateAdded 
```

![错误](../Images/85f8feef9770cc58f89d70178b3e7a18.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:01:28.443

利用

```
DateAdded = c.DateModified.HasValue ? c.DateModified.Value : c.DateAdded 
```

您正在尝试将可为空的 DateTime (c.DateModified) 分配给不可为空的 DateTime 字段 (DateAdded)。如果它存在，则必须从可为空的属性中获取值或使用另一个值（在您的情况下为 c.DateAdded）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:56:01.573

尝试删除演员表（日期时间）

```
DateAdded = (DateTime) c.DateModified ?? c.DateAdded 
```

我已经写了片段并且工作正常

```
var sample = new [] {new {Nul = (int?) 5,    Val = 6}, 
                     new {Nul = (int?) null, Val = 6}};

var res = from value in sample 
          orderby value.Nul ?? value.Val
          select new {Val = value.Nul ?? value.Val}; 
```

只想确认一下：

```
Console.WriteLine (typeof(int) == res.ElementAt(0).Val.GetType()); //True
Console.WriteLine (typeof(int?) == res.ElementAt(0).Val.GetType()); //False 
```

# sql - 使用左连接获取计数的 SQL 查询

> ID：11969411
> 
> 赞同：0
> 
> 时间：2012-08-15T12:39:36.747
> 
> 标签：sql, sqlite

为什么这个查询返回 0？我想收到一些消息，它们的文件夹名称为“收件箱”。消息和文件夹表通过 FolderID 连接。

```
"SELECT COUNT(*) FROM Messages AS m \
                     LEFT JOIN Folders AS f \
                     ON m.FolderID = f.FolderID \
                     WHERE f.FolderName = 'INBOX'" 
```

我完全知道，有带有此文件夹 ID 的消息。问题出在sql中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:50:47.923

```
SELECT COUNT(*) FROM Messages AS m 
                 INNER JOIN Folders AS f 
                 ON m.FolderID = f.FolderID 
                 WHERE UPPER(f.FolderName) = 'INBOX' 
```

它需要是一个内部连接，并且根据 SQL 服务器设置的区分大小写，您可能需要考虑匹配大小写。

# javascript - 如何使用 onclick 进行循环推进？

> ID：11969412
> 
> 赞同：0
> 
> 时间：2012-08-15T12:39:37.393
> 
> 标签：javascript, html

我一直试图弄清楚这一点，我完全被难住了。

我正在编写一个程序，该程序应该显示一系列基本的多项选择题。您看到一个问题，单击其中一个答案，然后继续下一个问题。

问题是，我不知道如何显示一个问题，然后在用户单击其中一个按钮时显示下一个问题。当我单击一个按钮时没有任何反应。怎么了？

```
 // progress meter
        var progress = new Array();
        for (var i = 0; i < questions.length; i++) progress.push("0");

        var i = 0;
        display(0);

        // display questions
        function display(i) {
            var prg_string;
            for (var j = 0; j < progress.length; j++) prg_string += progress[j];
            document.write(
                "<div id = 'background'>"
                    + "<div id = 'progress'>" + progress + "</div>"
                    + "<div id = 'title'>-JogNog Test v1-<br></br>" + tower + "</div>"
                    + "<div id = 'question'>" + questions[i].text + "</div>"
                    + "<div id = 'stats'>Level " + level + "/" + total_levels + " Question " + (i + 1) + "/" + questions.length + "</div>"
                + "</div>"
            );

            document.write("<button id = 'answer1' onclick = 'next(questions[i].answers[0].correct)'>" + questions[i].answers[0].text + "</button>");
            if (questions[i].answers.length > 0)
                document.write("<button id = 'answer2' onclick = 'next(questions[i].answers[1].correct)'>" + questions[i].answers[1].text + "</button>");
            if (questions[i].answers.length > 1)
                document.write("<button id = 'answer3' onclick = 'next(questions[i].answers[2].correct)'>" + questions[i].answers[2].text + "</button>");
            if (questions[i].answers.length > 2)
                document.write("<button id = 'answer4' onclick = 'next(questions[i].answers[3].correct)'>" + questions[i].answers[3].text + "</button>");
        }

        // go to next question, marking whether answer was right or wrong
        function next(correct) {
            if(correct) progress[i] = "T";
            else progress[i] = "F";
            i += 1;
            display(i);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:48:11.770

我还没有通读你的代码，（你可能想通过只关注处理循环的部分来发布[SSCCE](http://sscce.org/)）但我觉得循环不是你想要的。如果您需要自动迭代某些内容，则循环非常有用。但实际上，您一次只想显示一个问题。

假设您有办法独立处理每个问题，最简单的方法就是跟踪用户正在回答的问题。显示那个问题。当用户提交答案时，调用使用计数器呈现问题的任何函数，加一。确保检查您是否未完成测验，以免引用不存在的问题。

这是一些伪代码：

```
var questionNumber, questions; //assume these already have values
function printQuestion(questionNumber){ ... }
function nextQuestion(){
    if(questionNumber < questions){
         questionNumber++;
         printQuestion(questionNumber); 
    }
    else{
         showResults();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:30:21.720

我同意@ngmiceli 的观点，即循环不是你想要的。您想显示一个问题，然后创建单击事件处理程序，当用户选择上一个问题的答案时，该处理程序将转到下一个问题。

我继续创建了一个不同的设置来演示。你可以在这里看到一个演示：

[**-- jsFiddle 演示 --**](http://jsfiddle.net/jackwanders/ppp9Z/)

但我会介绍整个过程。首先，我设置了一个基本的 HTML 文档：

```
<body>
    <h1>-Test v1-</h1>
    <h2>Simple Math</h2>
    <div id="container">
        <div><span id="numRight">0</span> of <span id="numQuestions">0</span></div>
        <div id="question"></div>
        <div id="answers"></div>
    </div>
</body> 
```

然后，我创建了一个 questions `array`，数组中的每个元素都是一个`object`. 每个问题对象都包含问题本身、可能答案的数组以及指示正确答案的数组索引的“answerIdx”属性。

```
questions = [
    {
        question: 'What is 0 / 6 ?',
        options: ['0','1','2'],
        answerIdx: 0
    },
    {
        question: 'What is 2 + 2 ?',
        options: ['72','4','3.5'],
        answerIdx: 1
    }
] 
```

我还创建了一些其他变量，这些变量指向我要操作的 HTML 元素：

```
numRight = 0,
numQuestions = 0,
answerDiv = document.getElementById('answers'),
questionDiv = document.getElementById('question'),
numRightSpan = document.getElementById('numRight'),
numQuestionsSpan = document.getElementById('numQuestions'); 
```

接下来，我创建了一个“displayQuestion”函数，该函数将单个问题对象作为参数：

```
function displayQuestion(q) {  
    // insert the question text into the appropriate HTML element
    questionDiv.innerHTML = q.question;

    // remove any pre-existing answer buttons
    answerDiv.innerHTML = '';

    // for each option in the 'options' array, create a button
    // attach an 'onclick' event handler that will update
    // the question counts and display the next question in the array
    for(i = 0; i < q.options.length; i++) {
        btn = document.createElement('button');
        btn.innerHTML = q.options[i];
        btn.setAttribute('id',i);

        // event handler for each answer button
        btn.onclick = function() {
            var id = parseInt(this.getAttribute('id'),10);
            numQuestionsSpan.innerHTML = ++numQuestions;

            // if this is the right answer, increment numRight
            if(id === q.answerIdx) {
                numRightSpan.innerHTML = ++numRight;
            }

            // if there is another question to be asked, run the function again
            // otherwise, complete the test however you see fit
            if(questions.length) {
                displayQuestion(questions.shift()); 
            } else {
                alert('Done! You got '+numRight+' of '+numQuestions+' right!');
            }                    
        }
        answerDiv.appendChild(btn);        
    }
} 
```

最后，我展示了第一个问题：

```
displayQuestion(questions.shift()); 
```

# c++ - 将 unsigned int *' 转换为 'unsigned int *&

> ID：11969415
> 
> 赞同：2
> 
> 时间：2012-08-15T12:39:44.607
> 
> 标签：c++

我有一个获取'unsigned int *&参数的函数我想在我的代码中传输的参数位于`std::vector<unsigned int> data` 所以，我所做的是：我传输以下参数&data [0]但是得到编译错误：

```
unsigned int *' to 'unsigned int *& 
```

什么可以解决？谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:43:50.643

`&data[0]`是一个右值，不能绑定到非常量引用。

你可以让它这样工作：

```
unsigned int *ptr = &data[0];
func(ptr); 
```

但可能最好将函数的签名更改为

```
void foo(unsigned int &val); //or any other return type 
```

如果您想将指针指向其他地方，则有一种传递对指针的引用的感觉。但在你的情况下，我认为没有理由这样做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T12:44:31.787

该表达式`&data[0]`确实产生了一个 r 值，您的函数不能接受该值。

如果您不想更改您的功能，一个简单的解决方法（确保您了解它需要参考的原因）：

```
unsigned int* ptr = &data[0];
func(ptr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T12:42:41.930

&data[0] 是一个右值，但函数参数类型是对指针的*非常量*引用。非常量引用不能绑定到右值。

在 OP 为他的问题提供更多上下文之前，很难提出一个好的解决方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T12:45:40.117

写

```
unsigned int *argument = &data[0];
call_function(argument); 
```

请注意，该函数可能希望更改 的值`argument`，因此它可能希望您随后编写：

```
data.assign(argument, argument + new_length); 
```

# jsf - 为什么我不能使用返回值“成功”从 managedBean 导航到另一个页面？

> ID：11969416
> 
> 赞同：0
> 
> 时间：2012-08-15T12:39:43.843
> 
> 标签：jsf, tomcat

我正在使用 Eclipse 使用 JSF、Hibernate 和 Tomcat 服务器。我在一个名为“ListeAutoTPEs.jsp”的jsp页面中，当提交表单时，会调用一个方法（它从jrxml文件创建一个PDF）但无法访问我提到的页面“test2.htm”在“成功”的导航案例中的 tha faces-config

我的 faces-config.xml 页面：

```
<?xml version="1.0"?>
<!DOCTYPE faces-config PUBLIC "-//Sun Microsystems, Inc.//DTD JavaServer Faces 
 Config   1.0//EN"
                              "http://java.sun.com/dtd/web-facesconfig_1_0.dtd">
<faces-config>
 <managed-bean>
  <managed-bean-name>login</managed-bean-name>
  <managed-bean-class>com.axentis.jsf.LoginBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
 </managed-bean>
 <managed-bean>
  <managed-bean-name>traitement</managed-bean-name>
  <managed-bean-class>com.axentis.jsf.TraitementBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
  <managed-property>
   <property-name>executed</property-name>
   <property-class>java.lang.Boolean</property-class>
   <value>false</value>
  </managed-property>
 </managed-bean>
 <managed-bean>
  <managed-bean-name>autorisation</managed-bean-name>
  <managed-bean-class>com.axentis.jsf.AutoBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
  <managed-property>
   <property-name>ack</property-name>
   <property-class>java.lang.String</property-class>
   <value>ns</value>
  </managed-property>
 </managed-bean>
 <managed-bean>
  <managed-bean-name>match</managed-bean-name>
  <managed-bean-class>com.axentis.jsf.MatchBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
  <managed-property>
   <property-name>transac</property-name>
   <property-class>java.lang.String</property-class>
   <value>1</value>
  </managed-property>
 </managed-bean>
 <managed-bean>
  <managed-bean-name>trans</managed-bean-name>
  <managed-bean-class>com.axentis.jsf.TransacTelecolBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
 </managed-bean>
 <navigation-rule>
  <from-view-id>/login.jsp</from-view-id>
  <navigation-case>
   <from-outcome>ConSuccess</from-outcome>
   <to-view-id>/Accueil.jsp</to-view-id>
  </navigation-case>
  <navigation-case>
   <from-outcome>Erreur</from-outcome>
   <to-view-id>/login.jsp</to-view-id>
  </navigation-case>
 </navigation-rule>
 <navigation-rule>
  <from-view-id>/listeDeTousLesCom.jsp</from-view-id>
  <navigation-case>
   <from-outcome>success</from-outcome>
   <to-view-id>/listeDeTousLesCom.jsp</to-view-id>
  </navigation-case>
  <navigation-case>
   <from-outcome>erreur</from-outcome>
   <to-view-id>/error.jsp</to-view-id>
  </navigation-case>
 </navigation-rule>
 <navigation-rule>
  <from-view-id>/jsp/ListeAutoTPEs.jsp</from-view-id>
  <navigation-case>
   <from-outcome>success</from-outcome>
   <to-view-id>/test2.htm</to-view-id>
   <redirect/>
  </navigation-case>

  <navigation-case>
   <from-outcome>erreur</from-outcome>
   <to-view-id>/error.jsp</to-view-id>
  </navigation-case>
 </navigation-rule>
 <navigation-rule>
  <from-view-id>/Matching.jsp</from-view-id>
  <navigation-case>
   <from-outcome>success</from-outcome>
   <to-view-id>/Matching.jsp</to-view-id>
  </navigation-case>
  <navigation-case>
   <from-outcome>erreur</from-outcome>
   <to-view-id>/error.jsp</to-view-id>
  </navigation-case>
 </navigation-rule>
 <navigation-rule>
  <from-view-id>/listeTransacTelecol.jsp</from-view-id>
  <navigation-case>
   <from-outcome>success</from-outcome>
   <to-view-id>/listeTransacTelecol.jsp</to-view-id>
  </navigation-case>
  <navigation-case>
   <from-outcome>erreur</from-outcome>
   <to-view-id>/error.jsp</to-view-id>
  </navigation-case>
 </navigation-rule>
</faces-config> 
```

我的托管豆：

```
public String toutLesAuto(){
String url = "jdbc:oracle:thin:@10.5.3.136:1521:orcl";
String login = "mawarid";
String password = "mawarid";
Connection connection = null;  
 try {
 // - Connexion à la base
 System.out.println("je suis dans le bean de traitement");
Driver monDriver = new oracle.jdbc.driver.OracleDriver();
DriverManager.registerDriver(monDriver);
connection = DriverManager.getConnection(url, login, password);
System.out.println("connection réussie");

FacesContext facesContext = FacesContext.getCurrentInstance();
ExternalContext externalContext = facesContext.getExternalContext();
HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();
ServletContext servletContext = (ServletContext) externalContext.getContext();
String absoluteDiskPath = servletContext.getRealPath("/");

// récupération des données saisies par le client

AutoBean auto = (AutoBean) FacesContext.getCurrentInstance().getExternalContext().
getSessionMap().get("autorisation");
if (auto!=null)
System.out.println("les donnée saisi par le clients sont : n° de la carte
"+auto.getNumCarte()+"  son code réponse  "+auto.getCodeRep()+" et la date saisie est
 : "+auto.getDate()+" le uméro d'autorisation est : "+auto.getNumAuto());
else 
System.out.println("le bean AutoBean n'a pas été instancié"); 

// - Chargement et compilation du rapport

JasperDesign jasperDesign = JRXmlLoader.load(absoluteDiskPath+"\\rapports  
\\ListeAuto.jrxml");
JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);

// - Paramètres à envoyer au rapport

String date="%";
String numCarte="%";
String numTpe="%";
String codeRep="%";
String numCommerçant="%";
String numAuto="%";
String mntDem="%";
String ack="%";
if(auto.getDate()!="")
date =auto.getDate();
if (auto.getNumCarte()!="")
numCarte=auto.getNumCarte();
if (auto.getCodeRep()!="")
codeRep=auto.getCodeRep();
if (auto.getNumAuto()!="");
numAuto=auto.getNumAuto();
if (auto.getNumCom()!="")
numCommerçant=auto.getNumCom();
if (auto.getNumTpe()!="")
numTpe=auto.getNumTpe();
if (auto.getAck()!=null)
ack=auto.getAck();

Map parameters = new HashMap();
parameters.put("date",date);
parameters.put("numCarte",numCarte);
parameters.put("numTpe",numTpe);
parameters.put("codeRep",codeRep);
parameters.put("numCommercant",numCommerçant);
parameters.put("numAuto",numAuto);
parameters.put("mntDem",mntDem);

// - Execution du rapport

JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, 
 parameters,connection);
System.out.println("execution du rapport réussie");
// - Création du rapport au format PDF

JasperExportManager.exportReportToPdfFile(jasperPrint,absoluteDiskPath+"\\rapports
\\ListeAuto.pdf");
System.out.println("impression réussie");

if (auto!=null)
System.out.println("les donnée saisi par le clients sont : n° de la carte
 '"+numCarte+"'  " +"son code réponse  '"+codeRep+"' et la date saisie est  
  :'"+date+"' le uméro d'autorisation est : '"+numAuto+"l'accusé est : "+ack);

// popup to download the file

 response.reset(); 
 response.setContentType("application/xml"); 
 response.setHeader("Content-disposition", "attachment; filename=\"liste des    
 autorisations.pdf\"");

 byte[] buf = new byte[1024];
 try{

 System.out.println("le chemain "+absoluteDiskPath);
 String realPath =absoluteDiskPath+"\\rapports\\ListeAuto.pdf";
 File file = new File(realPath);
 long length = file.length();
  BufferedInputStream in = new BufferedInputStream(new FileInputStream(file));
 ServletOutputStream out = response.getOutputStream();
  response.setContentLength((int)length);
 while ((in != null) && ((length = in.read(buf)) != -1)) {
 out.write(buf, 0, (int)length);
    }
     in.close();
    out.close();
    }catch (Exception exc){
    exc.printStackTrace();
    } 

    // fin de la boite de dialogue
     this.setExecuted(true);
     System.out.println("je vais faire le return");
     return "success";
       // facesContext.responseComplete();

        } catch (JRException e) {
        e.printStackTrace();
        return "erreur";
        } catch (SQLException e) {
        e.printStackTrace();
        return "erreur";
        } 
        finally {
            try {

                connection.close();
            } catch (SQLException e) {

                e.printStackTrace();
            }
        }

  } 
```

我的 JSP 页面“ListeAutoTPEs.jsp”

```
 <h:commandButton value="télécharger" action="#{traitement.toutLesAuto}" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:31:54.517

导航规则提到 /listeTransacTelecol.jsp 作为来自 id。与 ListeAutoTPEs.jsp 不匹配。

我不确定是否允许转发到 html，我自己从未尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:23:09.640

我想您不能转发到纯 HTML 文件。也许您可以将 test2.htm 更改为 JSP 页面并尝试：

```
<navigation-case>
    <from-outcome>success</from-outcome>
    <to-view-id>/test2.jsp</to-view-id>
    <redirect/>
</navigation-case> 
```

所有其他导航规则是否按预期工作？

# c# - 在 DataGrid 中选择一行

> ID：11969417
> 
> 赞同：0
> 
> 时间：2012-08-15T12:39:52.010
> 
> 标签：c#, wpf, datagrid, wpfdatagrid

我定义了一个包含三行的初始表。如果用户选择一行并单击“开始新表”按钮，它将打开一个带有新表的新 tabItem。问题是我不知道如何在我的 DataGrid 中选择一整行。

```
C# Code:
//this my initial Table
private ObservableCollection<TableDataRowStringItem> tableobject = new ObservableCollection<TableDataRowStringItem>();
List<TableDataRowStringItem> rowstringList = new List<TableDataRowStringItem>();
TableDataRowStringItem item = new TableDataRowStringItem();
item.RowNumber = 1; item.saveFlag = true; item.ObjectType = "E"; item.Name = "E"; item.PredecessorRowNumber = "0";
rowstringList.Add(item);
item = new TableDataRowStringItem();
item.RowNumber = 2; item.ObjectType = "Function"; item.Name = "Function";    item.PredecessorRowNumber = "1";
rowstringList.Add(item);
item = new TableDataRowStringItem();
item.RowNumber = 3; item.ObjectType = "E"; item.Name = "E"; item.PredecessorRowNumber = "2";
rowstringList.Add(item);
rowstringListEPK = rowstringList;
for (int i = 0; i < rowstringList.Count; i++)
{
    tableobject.Add(rowstringList[i]);
}
DataGrid1.ItemsSource = tableobject;

//Button Code
foreach (TableDataRowStringItem item in rowstringListEPK)
{
    if (item.ObjectType == "Function" **(&& Hier i schould write if row.Isselected)**)
    {
       rowStringItem.Name = item.Name;
       tabControl.Items.Add(tabItem);
       tabItem.Focus();
       tabItem.IsSelected = true;
       tabItem.Header = rowStringItem.Name;
       TableTab.Visibility = Visibility.Visible
    }
    else do nothing
}

//XAML Code
 <DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
               <Setter Property="BorderBrush" Value="Blue" />
               <Setter Property="BorderThickness" Value="1" />
               <Setter Property="AllowDrop" Value="True" />
            </Trigger>
        </Style.Triggers>
    </Style>
 </DataGrid.RowStyle> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:51:19.040

这可能会有所帮助：

```
<DataGrid SelectionMode="Single" SelectionUnit="FullRow" ... 
```

或者

```
DataGrid dataGrid = new DataGrid();
dataGrid.SelectionUnit = DataGridSelectionUnit.FullRow;
dataGrid.SelectionMode = DataGridSelectionMode.Single; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:55:25.757

你的测试将是：

```
if (dataGrid1.SelectedItem != null) //test if a row is selected 
```

之后

您可以访问数据行

```
 dataGrid1.SelectedItem 
```

# php - rel="external", jQuery Mobile 中的 PHP

> ID：11969419
> 
> 赞同：1
> 
> 时间：2012-08-15T12:39:52.237
> 
> 标签：php, jquery, jquery-mobile

我正在使用 jQuery mobile 制作 Web 应用程序，但许多页面都是 .php 文件。我必须在指向这些 php 文件的标记中使用 rel="external"，否则链接将是“未定义”。问题是我必须为我拥有的每个 .php 页面加载 jQuery 脚本（因为我想要 JQM 布局）。如果我不想在每次到达 .php 页面时再次下载 js 文件，可能的出路是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:43:38.490

调用静态命名的js文件。我的意思是，让浏览器缓存它不会自己受苦。

**回答您的评论：**

> 您必须“利用浏览器缓存”。这是解释：
> 
> [http://developers.google.com/speed/docs/best-practices/caching](http://developers.google.com/speed/docs/best-practices/caching)
> 
> 之后，您的 js 文件 src 必须与每个页面完全相同。
> 
> 我的意思是，如果您使用“src='js/x.js'”在 a.php 上调用 x.js 文件，那么使用“ **src** **='js/x.js'** ”在 b.php 上调用它。
> 
>  **如果你还在开发或者要开发js文件，调用的时候一定要有版本号。因为利用浏览器缓存，您会说“这个文件将在明年到期”。因此，当您开发时，如果用户不强制下载新开发的 js，则不会下载。您可以调用带有版本号的 js 文件，例如“ **src='js/x.js?v=0.0.1'** ”
> 
> 您可以使用此工具轻松测试页面的缓存：[http ://tools.pingdom.com/](http://tools.pingdom.com/)**

# c++ - 模板错误：非类型“.. [with T=T] 不是类型名称”

> ID：11969421
> 
> 赞同：9
> 
> 时间：2012-08-15T12:39:54.367
> 
> 标签：c++, templates, compiler-errors, cross-compiling

尝试对我的内存对齐进行 typedef 我得出了以下构造（由于我需要更正 GNU 版本，这仍有一些工作正在进行中）：

```
#if defined(__GNUG__)
template <typename T>
struct sfo_type {
    typedef T* restrict __attribute__((aligned(32))) aptr32;
};

#elif defined(__INTEL_COMPILER)
template <typename T>
struct sfo_type {
    typedef T* restrict __attribute__((aligned(32))) aptr32;
};
#endif 
```

然后我尝试像这样使用它：

```
template<typename T>
class tsfo_vector {
private:
   sfo_type<T>::aptr32  m_data;
   int                  m_size;
... 
```

但随后我收到以下错误消息：

```
/Users/bravegag/code/fastcode_project/code/src/sfo_vector.h(43): error: nontype "sfo_type<T>::aptr32 [with T=T]" is not a type name
 sfo_type<T>::aptr32 m_data;
 ^ 
```

任何人都可以建议这里有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T12:42:04.287

`aptr32`依赖于`T`：

```
template<typename T>
    class tsfo_vector {
    private:
        typename sfo_type<T>::aptr32 m_data;
      //^^^^^^^^ 
```

有关使用的进一步说明，`typename`请参阅[我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

# php - php myadmin 中的单引号

> ID：11969425
> 
> 赞同：-1
> 
> 时间：2012-08-15T12:39:58.703
> 
> 标签：php

在我的 phpadmin 中，我每次都会尝试写一个简单的查询，但如果从我的 phpadmin 查询复制查询这个查询成功，我会尝试很多，我发现 wronk 是我复制的两个单词之间的不同之处（（（（（（（ ( `food`)))))))))) 查询成功，但如果写入 ((((((((('food'))))))

在写代码

```
$query = "SELECT  'calories'
FROM `food`
ORDER BY 'id' "; 
```

在磨损代码

```
$query = "SELECT  'calories'
FROM 'food'
ORDER BY 'id' "; 
```

这在所有应用程序中都面临着我，但我简单地尝试一下以更快地了解这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:41:31.633

在第一种情况下，您使用的是反引号，在第二种情况下，您使用的是单引号。您需要使用反引号将表名括起来（如果要使用字符将表名括起来）。否则，除非您的表名也是MySQL 中的[保留字，否则没有必要。](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

总之，这是可以的：

```
`food` 
```

`1`因为它是反引号（ QWERTY 键盘上的键旁边），而不是单引号。

这是不行的：

```
'food' 
```

因为是单引号。

# css - 链接元素的margin-bottom

> ID：11969427
> 
> 赞同：33
> 
> 时间：2012-08-15T12:40:04.080
> 
> 标签：css, mobile-safari

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-15T12:41:32.330

您需要添加`display: inline-block;`到您的锚选择器。锚点根据定义是内联元素，在它们被定义为块级或内联块元素之前不接受宽度、高度、边距等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:45:46.960

我认为您最好这样做`display:block;`，`float:left;`因为`display:inline-block;`并非所有浏览器都支持。

# html - 电子邮件附件中的所有文件类型都可以使用 java 邮件 API 读取吗？

> ID：11969428
> 
> 赞同：0
> 
> 时间：2012-08-15T12:40:06.280
> 
> 标签：html, xml

我正在使用 java 邮件阅读电子邮件附件。这是我使用的代码：

```
public static void main(String args[]) throws Exception {
        String host = "172.16.0.186";
        String user = "admin";
        String password = "1234";
        // Get system properties
        Properties properties = System.getProperties();
        // Get the default Session object.
        Session session = Session.getDefaultInstance(properties);
        // Get a Store object that implements the specified protocol.
        Store store = null;
        try {
            store = session.getStore("pop3");
            //Connect to the current host using the specified username and password.
            store.connect(host, user, password);
        } catch (Exception e) {
            logger.warn("An exception occured," + e);
        }
        //Create a Folder object corresponding to the given name.
        Folder folder = store.getFolder("Inbox");
        // Open the Folder.
        folder.open(Folder.READ_WRITE);
        Message[] message = folder.getMessages();
        for (int a = 0; a < message.length; a++) {
            System.out.println("-------------" + (a + 1) + "-----------");
            System.out.println(message[a].getSentDate());
            Multipart multipart = (Multipart) message[a].getContent();
            for (int i = 0; i < multipart.getCount(); i++) {
                //System.out.println(i);
                //System.out.println(multipart.getContentType());
                BodyPart bodyPart = multipart.getBodyPart(i);
                InputStream stream = bodyPart.getInputStream();
                File file = new File("C:\\Attachments\\" + bodyPart.getFileName());
                BufferedReader br = new BufferedReader(
                    new InputStreamReader(stream));
                while (br.ready()) {
                    System.out.println(br.readLine());
                }
                saveFile(bodyPart.getFileName(), stream);
                attachments.add(file);
                System.out.println();
            }
            System.out.println();
        }
        folder.close(true);
        store.close();
    }

    /**
     * Save file.
     * 
     * @param filename
     *        the filename
     * @param input
     *        the input
     */
    public static void saveFile(String filename, InputStream input) {
        System.out.println(filename);
        try {
            if (filename == null) {
                //filename = File.createTempFile("VSX", ".out").getName();
                return;
            }
            // Do no overwrite existing file
            filename = "C:\\Attachments\\" + filename;
            File file = new File(filename);
            for (int i = 0; file.exists(); i++) {
                file = new File(filename + i);
            }
            FileOutputStream fos = new FileOutputStream(file);
            BufferedOutputStream bos = new BufferedOutputStream(fos);
            BufferedInputStream bis = new BufferedInputStream(input);
            int aByte;
            while ((aByte = bis.read()) >= 0) {
                bos.write(aByte);
            }
            bos.flush();
            bos.close();
            bis.close();
        } // end of try()
        catch (IOException exp) {
            System.out.println("IOException:" + exp);
        }
    } //end of saveFile()
} 
```

**发生以下异常： javax.mail.NoSuchProviderException: pop3**

最后一个问题：如果可以使用 java 邮件 API 读取所有文件类型，那么我们如何读取 excel 文件、HTML 文件或 word 文件。

# hibernate - 在 Spring Batch 中启动作业发生 Hibernate 代理错误

> ID：11969438
> 
> 赞同：1
> 
> 时间：2012-08-15T12:41:00.963
> 
> 标签：hibernate, spring-batch, spring-batch-admin

您好，我在 Spring 批处理应用程序中遇到休眠错误

```
ERROR: org.springframework.batch.core.job.AbstractJob - Encountered fatal error executing job
org.springframework.dao.OptimisticLockingFailureException: Attempt to update job execution id=33 with wrong version (0), where current version is 1
    at org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.updateJobExecution(JdbcJobExecutionDao.java:210)
    at org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:155)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy54.update(Unknown Source)
    at org.springframework.batch.core.job.AbstractJob.updateStatus(AbstractJob.java:383)
    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:276)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:120)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

根据错误日志，我在抽象作业类（由 Spring Batch 提供）遇到代理错误
我猜由于抽象作业类没有任何非参数构造函数，CGLIB 无法提供任何代理类。
我该如何解决这个问题问题？

我现在正在使用 spring batch admin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:42:59.537

那个例外

```
org.springframework.dao.OptimisticLockingFailureException: Attempt to update job execution id=33 with wrong version (0), where current version is 1 
```

意味着由于某种原因您的步骤事务锁定失败。

可能导致您的业务逻辑事务被设置为 RollbackOnly 模式，这会导致弹簧表的状态也不一致 => 发生乐观锁定。

尝试为休眠添加日志记录并显示实际的 sql。这可能会帮助您找出问题所在。

# emacs - emacs 中的注释模式

> ID：11969442
> 
> 赞同：12
> 
> 时间：2012-08-15T12:41:15.283
> 
> 标签：emacs, comments, elisp, multiline

我通常使用没有任何类型的块/多行注释的语言进行编程（例如`python`[ `#`] 和`fortran`[`c`或`!`]。）。有没有办法在 emacs 中定义一个允许我输入多行注释的次要模式？我的意思是，它会导致emacs在X行（比如72行）之后自动换行并自动在每行的开头添加一个注释字符（取自当前主要模式）？

抱歉，如果这是一个非常基本的问题——我的 elisp 技能充其量只是初级。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T13:09:01.797

您可以使用以下代码：

```
(setq fill-column 72)
(setq comment-auto-fill-only-comments t)
(auto-fill-mode t) 
```

这将自动换行文本，仅用于注释，并在每次换行时插入注释字符。

我将此设置仅用于编程模式，如下所示：

```
(defun my-prog-mode-hook
  (setq fill-column 72)
  (set (make-local-variable 'comment-auto-fill-only-comments) t)
  (auto-fill-mode t))
(add-hook 'prog-mode-hook 'my-prog-mode-hook) 
```

这可以确保如果我在非编程模式（如 AUCTeX）中打开自动填充模式，所有文本都会被包装，而不仅仅是评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:04:49.177

MX;

评论/取消评论该地区

# php - HTML 显示图像，然后等待，然后显示另一个图像

> ID：11969451
> 
> 赞同：0
> 
> 时间：2012-08-15T12:41:45.987
> 
> 标签：php, jquery, html, wait

我想要做的是，当用户选中一个单选框时，会显示一个图像，10 秒后会显示一个 swf 文件。我有图像工作。我尝试在我的 html 函数中使用 php sleep，但是当页面加载时睡眠就开始了，请记住，所有这些都需要在 onlclick 函数中完成。我还尝试使用 javascript 函数从另一个 php 文件中获取内容。

```
<script type="text/javascript">
function doit()
{

  $.get("dumplings.php");
    return false; } 

</script> 
```

Dumplings.php 休眠 10 秒，然后用其中的 swf 回显我的 html。那也没有用。

这是我的收音机盒

```
<input name="sample_check3" id="sample_check3" value="1" type="radio" onclick="showStuff('img');doit();"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:58:32.290

尝试这个：

```
<!doctype html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script src="json.json"></script>
<script>
$(document).ready(function () {
    $("#sample_check3").on('click', function(){
        if($(this).attr('checked') === 'checked'){
            $("#image1").css('display','');
            setTimeout(function(){
                $("#image1").css('display','none');
                $("#image2").css('display','');
            },3000);
        }
    });
}); 
</script>
</head>
<body>
<input name="sample_check3" id="sample_check3" value="1" type="radio"/>
<img id="image1" src="http://www.andrew.cmu.edu/user/nguesto/images/pikachu.jpg" style="display:none"/>
<img id="image2" src="http://faqsmedia.ign.com/faqs/image/ani004.gif" style="display:none"/>
</body>
</html> 
```

# iphone - viewDidLoad 实际上是在每次有 segue 转换时调用的

> ID：11969452
> 
> 赞同：11
> 
> 时间：2012-08-15T12:41:50.520
> 
> 标签：iphone, ios, uiviewcontroller, uikit, initialization

我看过很多关于堆栈溢出的帖子，指出控制器的 viewDidLoad 方法仅在第一次访问控制器时调用，不一定每次都调用，但总是至少调用一次。

这根本不是我看到的！我整理了一个简单的测试来强调这一点： [https ://github.com/imuz/ViewDidLoadTest](https://github.com/imuz/ViewDidLoadTest)

似乎导航控制器 segues 和模态视图 viewDidLoad 总是被调用。唯一不调用它的是在选项卡之间切换时。

我能找到的对 viewDidLoad 的每一个解释都与此相矛盾：

*   [何时调用 viewDidLoad？](https://stackoverflow.com/questions/3949935/when-is-viewdidload-called)
*   [UIViewController viewDidLoad vs. viewWillAppear：什么才是正确的分工？](https://stackoverflow.com/questions/1579550/uiviewcontroller-viewdidload-vs-viewwillappear-what-is-the-proper-division-of)
*   [http://www.manning-sandbox.com/thread.jspa?threadID=41506](http://www.manning-sandbox.com/thread.jspa?threadID=41506)

苹果自己的文档表明只有在内存不足时才会卸载视图。

我目前正在 viewDidLoad 中进行初始化，并假设每次 segue 转换都会调用它。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T15:35:24.000

菲利普米尔斯的回答是正确的。这只是对它的增强。

系统按记录工作。

您看到 viewDidLoad 是因为被推送到导航控制器上的视图控制器是一个**新**实例。它**必须**调用 viewDidLoad。

如果您进一步调查，您会看到这些视图控制器中的每一个在弹出时都被释放（只需在 dealloc 中放置一个断点或 NSLog）。这个释放与视图控制器容器无关......它不控制它使用的控制器的生命......它只是持有对它的强引用。

当控制器从导航控制器堆栈中弹出时，导航控制器释放它的引用，并且由于没有其他对它的引用，视图控制器将释放。

导航控制器仅持有对其活动堆栈中的视图控制器的强引用。

如果你想重用同一个控制器，**你**有责任重用它。当您使用故事板转场时，您（在很大程度上）放弃了该控制。

假设您通过点击某个按钮`push`来查看控制器`Foo`。当点击该按钮时，“系统”将创建`Foo`（目标视图控制器）的实例，然后执行转场。控制器容器现在拥有对该视图控制器的唯一强引用。完成后，VC 将解除分配。

由于它每次都会创建一个新控制器，`viewDidLoad`因此每次呈现该控制器时都会调用它。

现在，如果你想改变这种行为，并缓存视图控制器以供以后重用，你必须专门这样做。如果您不使用故事板转场，这很容易，因为您实际上是将 VC 推送/弹出到导航控制器。

但是，如果您使用故事板转场，那就有点麻烦了。

有很多方法可以做到这一点，但都需要某种形式的黑客攻击。故事板本身负责实例化新的视图控制器。一种方法是覆盖`instantiateViewControllerWithIdentifier`. 这是当 segue 需要创建视图控制器时调用的方法。甚至对于您没有为其分配标识符的控制器也会调用它（如果您不分配一个，系统会提供一个虚构的唯一标识符）。

请注意，我希望这主要用于教育目的。我当然不是建议这是解决您的问题的最佳方法，无论它们是什么。

就像是...

```
@interface MyStoryboard : UIStoryboard
@property BOOL shouldUseCache;
- (void)evict:(NSString*)identifier;
- (void)purge;
@end
@implementation MyStoryboard
- (NSMutableDictionary*)cache {
    static char const kCacheKey[1];
    NSMutableDictionary *cache = objc_getAssociatedObject(self, kCacheKey);
    if (nil == cache) {
        cache = [NSMutableDictionary dictionary];
        objc_setAssociatedObject(self, kCacheKey, cache, OBJC_ASSOCIATION_RETAIN);
    }
    return cache;
}
- (void)evict:(NSString *)identifier {
    [[self cache] removeObjectForKey:identifier];
}
- (void)purge {
    [[self cache] removeAllObjects];
}
- (id)instantiateViewControllerWithIdentifier:(NSString *)identifier {
    if (!self.shouldUseCache) {
        return [super instantiateViewControllerWithIdentifier:identifier];
    }
    NSMutableDictionary *cache = [self cache];
    id result = [cache objectForKey:identifier];
    if (result) return result;
    result = [super instantiateViewControllerWithIdentifier:identifier];
    [cache setObject:result forKey:identifier];
    return result;
}
@end 
```

现在，你必须使用这个故事板。不幸的是，虽然 UIApplication 保留了主故事板，但它并没有公开 API 来获取它。但是，每个视图控制器都有一个方法`storyboard`来获取创建它的故事板。

如果您正在加载自己的故事板，那么只需实例化 MyStoryboard。如果您使用的是默认情节提要，则需要强制系统使用您的特殊情节提要。同样，有很多方法可以做到这一点。一种简单的方法是覆盖视图控制器中的故事板访问器方法。

您可以使 MyStoryboard 成为将所有内容转发到 UIStoryboard 的代理类，或者您可以对主故事板进行 isa-swizzle，或者您可以让本地控制器从其故事板方法中返回一个。

现在，请记住，这里有一个问题。如果你将同一个视图控制器多次推送到堆栈上怎么办？使用缓存，完全相同的视图控制器对象将被多次使用。这真的是你想要的吗？

如果不是，那么您现在需要管理与控制器容器本身的交互，以便它们可以检查该控制器是否已为它们所知，在这种情况下，需要一个新实例。

因此，有**一种**方法可以在使用默认故事板 segues 的同时获取缓存的控制器（实际上有很多方法）......但这不一定是一件好事，当然也不是你默认得到的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-15T12:50:55.953

我相信 Apple 文档描述了视图控制器没有被释放的情况。如果您使用 segue，那么您将导致新目标控制器的实例化，并且作为一个新对象，它需要加载一个视图。

在基于 xib 的应用程序中，我有时会缓存一个我知道我可能会经常重复使用的控制器对象。在这些情况下，它们在必须加载视图时的行为与文档保持一致。

编辑：在阅读您包含的链接时，我看不出它们有任何矛盾。他们也在谈论在视图控制器对象的生命周期中发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:50:37.870

每次从头开始加载控制器的视图时都会调用它（即请求但尚不可用）。如果您取消分配控制器并且视图随之而来，那么它将在您下次实例化控制器时再次调用（例如，当您创建控制器以模态或通过 segue 推送它时）。选项卡中的视图控制器不会被释放，因为选项卡控制器会保留它们。

# c# - Guid 字符串只能包含十六进制字符

> ID：11969455
> 
> 赞同：8
> 
> 时间：2012-08-15T12:42:01.237
> 
> 标签：c#, guid

这个指南到底有什么问题？我得到了这个主题的错误。

531fe55b-9qa5-4be3-af52-112e5adqe7a7

我很确定它是从一开始就通过 .NET 生成的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-15T12:42:59.450

问题是它包含 letter `q`。

```
531fe55b-9qa5-4be3-af52-112e5adqe7a7
          ^ ^

```

这不是有效的[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T12:44:17.367

guid 不应包含任何 q

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T12:44:52.660

从快速拖网（关于验证 Guid）：

[如何验证 GUID 是 GUID](https://stackoverflow.com/questions/6211017/how-to-validate-guid-is-a-guid)

基本上，您只能在 Guid 中包含十六进制字符，因此上述 GUID 中的 'q' 无效。

我真诚地怀疑这最初来自框架。

# django - django css 和 js 文件

> ID：11969458
> 
> 赞同：2
> 
> 时间：2012-08-15T12:42:13.763
> 
> 标签：django

我无法在我的 django 项目中使用 CSS 和 JS 文件。

文件夹结构：

```
mysite/
mysite/mysite/settings.py
mysite/mysite/templates/base.html
mysite/mysite/assets/css/... 
```

设置.py

```
PROJECT_PATH = os.path.abspath(os.path.dirname(__file__))
MEDIA_ROOT = ''
MEDIA_URL = ''
STATIC_ROOT = ''
STATIC_URL = 'static'
STATICFILES_DIRS = ()
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
) 
```

网址.py

```
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',...)

if settings.DEBUG:
  urlpatterns += staticfiles_urlpatterns() 
```

base.html

运行 python manage.py collectstatic 返回：

```
"Your STATICFILES_DIRS setting is not a tuple or list; "
django.core.exceptions.ImproperlyConfigured: Your STATICFILES_DIRS setting is not a tuple or list; perhaps you forgot a trailing comma? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T14:35:08.623

你永远不会*手动*放任何东西`STATIC_ROOT`。它只是`collectstatic` *生产中*的倾倒场；它甚至不应该存在于开发中。

您的所有静态资源都需要放在您的应用程序`static`目录之一中，或者如果您需要项目范围的资源，则必须创建一个完全不同的目录，因为该目录与其中任何一个都不相同，`MEDIA_ROOT`或者`STATIC_ROOT`并将其添加到`STATICFILES_DIRS`：

```
STATICFILES_DIRS = (
    os.path.join(PROJECT_PATH, 'assets'),
) 
```

你可以随便叫它；我通常使用“资产”。只是不要将其命名为“static”、“media”、“site_media”等，以免混淆。

# c# - 如何完全禁用ServiceStack中未捕获异常的响应主体（ResponseStatus），但保留StatusCode

> ID：11969465
> 
> 赞同：3
> 
> 时间：2012-08-15T12:42:55.037
> 
> 标签：c#, servicestack

**我拥有什么以及我想要实现什么的信息**

我正在使用 ServiceStack 并启动并运行它以满足我的需要，但是我无法找到如何为未捕获的异常禁用正文/内容。

我让 ServiceStack 处理所有路由。

如果我导航到未映射到 ServiceStack 的路由，我会得到 404（完美）的 StatusCode 和“未找到请求的处理程序：...”的响应正文中的内容

如果我的代码抛出未捕获的异常，ServiceStack 将返回一个相关的 StatusCode，但它也会返回一个带有 ErrorCode 和 Message 的 ResponseStatus。

我关闭了 DebugMode，这会禁用 StackTrace，但是我想完全静音响应的整个正文以处理异常。

**我试过的**

我尝试了以下响应过滤器：

```
ResponseFilters.Add((req, res, dto)) =>
{
    if (dto is Exception) res.Close();
}); 
```

不幸的是，它没有用。

**我想避免的**

```
try{
    return service.GetResponse();
} catch (Exception) {
    return new HttpResult(.....);
} 
```

**我的问题**

如何禁用所有未捕获异常的响应正文，但仍返回 StatusCode？我希望 null 在正文中返回，并且 StatusCodes 保持不变。

我试图把我的问题说清楚，但如果我在任何方面有点含糊，请问我问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:22:57.180

您应该能够通过覆盖`HandleException`.`ServiceBase`

您可以在此处检查默认实现：[https](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/ServiceBase.cs#L228) ://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/ServiceBase.cs#L228 。

# ruby-on-rails - 没有 Rails 的测试模块

> ID：11969478
> 
> 赞同：0
> 
> 时间：2012-08-15T12:44:08.257
> 
> 标签：ruby-on-rails, rspec

我有一些用于测试模块的 Rspec 测试。我的 Rails 应用程序中的许多模型都使用该模块。为了将测试时间降到最低，我想在测试我的模块时避免加载 Rails。

问题是有一些方法包含救援，而这些救援提到了 Rails 调试器。当 Rspec 在 Rails 中看到大写字母 'r' 时，它会遇到麻烦，因为它认为它是一个未初始化的常量。

我希望如果我将日志信息封装到它自己的方法中，我可以避免这个问题。这就是我想出的。但是如果我走这条路，我需要存根救援代码或 log_info 方法。是对的吗？我该怎么做？我应该存根哪一个？

```
def download_robots_file(page)
  file = Net::HTTP.get(URI("#{page}robots.txt"))
rescue StandardError => ex
  log_info('robot_file', ex)
end
....
private

def log_info(problem, exception_issue)
  Rails.logger.debug("Couldn't download #{problem}: " + exception_issue.inspect)

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:44:57.033

您可以添加到要存根的存根链方法。

```
Rails.stub_chain(:logger).and_return(mocked_logger_instance) 
```

最后取消存根：

```
Rails.unstub(:logger) 
```

所有学分都归于以下链接上的先生[How to rspec mock ruby​​ rails logger class](https://stackoverflow.com/questions/8249815/how-to-rspec-mock-ruby-rails-logger-class)

# html - 如何在没有 javascript 的情况下将 iframe 扩展到文档高度？

> ID：11969490
> 
> 赞同：2
> 
> 时间：2012-08-15T12:45:06.390
> 
> 标签：html, css, iframe, frame

简而言之，我想通过 iframe 实现[**本网站**](http://alafasy.co.nr)通过框架实现的功能。使用 CSS 而没有 JavaScript，这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:11:07.017

假设您有以下 HTML：

```
<!doctype html>
<div>
 <iframe src="http://www.example.com"></iframe>
</div>
<div>
 <iframe src="http://www.example.org"></iframe>
</div> 
```

现在，如果您希望（例如在示例页面上）第一个 iframe 具有特定高度，第二个 iframe 填充文档的其余部分，您可以使用`display`css 中属性的表值：

```
html {
height: 100%;
}

body {
display: table;
height: 100%;
width: 100%;
margin: 0;
}

div {
display: table-row;
}

div:first-child {
height: 100px;
}

div:last-child {
height: 100%;
}

iframe {
display: table-cell;
width: 100%;
height: 100%;
border: none;
} 
```

# actionscript-3 - 我需要在哪里定义键盘事件？（Actionscript）

> ID：11969492
> 
> 赞同：0
> 
> 时间：2012-08-15T12:45:13.910
> 
> 标签：actionscript-3, flash, actionscript

我有 2 个类，一个是主类，另一个是 Tank 类，所以我需要在哪里定义这些事件：

```
addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
addEventListener(KeyboardEvent.KEY_UP, onKeyUp);

        private function onKeyDown(e:KeyboardEvent):void{

            trace(e.keyCode);

        }

        private function onKeyUp():void{

            trace(e.keyCode);

        } 
```

我不知道为什么，但是当我定义这个函数并在 Tank 类中添加监听器，然后在 Main 类中创建 Tank 对象 addChild(tank) 时，该事件不起作用，您能给我一个建议吗把这些事件放在哪里更好和必要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:27:43.640

您必须将侦听器添加到舞台。Stage 是一个全局对象，在每个 DisplayObject 中的 Event.ADDED_TO_STAGE 事件之后出现。您可以在您的 tank 类或 Main 中收听此事件，但最好的解决方案是创建一些封装键盘事件的全局单音类并在任何地方使用它。因此，您可以完全禁用键盘，也可以实现该用户更改键。

```
public class KeyboardController extends EventDispathcer{

    public static const inst:KeyboardController  = new KeyboardController ();

    public static const STOP_TANK:String = "stopTank";

    public function init(stage:Stage):void{
        //init in you Main
        //add listeners
    }

    private function stopTankKeyHandler(event:KeyboardEvent):void{
        //who manages tank will listen thisevent:KeyboardController.inst.addEventListener(KeyboardController.STOP_TANK, someHandler);
        dispatchEvent(new Event(STOP_TANK));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:57:39.737

您应该在舞台上定义它们：

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
stage.addEventListener(KeyboardEvent.KEY_UP, onKeyUp); 
```

# javascript - 如何删除对象数组中的对象：jquery？

> ID：11969495
> 
> 赞同：0
> 
> 时间：2012-08-15T12:45:21.433
> 
> 标签：javascript, jquery, arrays

我很困惑我试图删除对象数组中的对象，`jquery`这是我的代码，[jsFiddle](http://jsfiddle.net/minagabriel/Zg7qA/)

```
var x = new Array() ; 
var y = {} ; 
y.name = 'myName' ; 
y.age = 28 ; 
y.phone = 27895556 ; 
y.info = [{name:'x' ,age:58} ,{name:'y' , age:15}]
x.push(y) ;

 $.each(x , function(index,value) {
        $.each(value.info , function(i,v){
            if(v.name == 'x'){
            this.splice(i,1) ; 
         }

      });
  }); 
```

我试图用= 'x'告诉`if`条件删除对象但我得到这个*Uncaught TypeError: Object # has no method 'splice'*`v.name``error`

 ***更新**我需要有类似的东西： `y.info = [{name:'x' ,age:58} ,{name:'y' , age:15}]`之后`splice()`

知道我做错了什么**谢谢**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:50:08.260

如果您只是想删除包含该值的内部数组元素，`{name: 'x'}`那么您想要的数组`splice`就是`value.info`外部循环的数组：

```
$.each(x, function(index, value) {
    $.each(value.info, function(i, v) {
        if (v.name === 'x') {
            value.info.splice(i, 1) ; 
        }
    });
}); 
```

但是，此代码存在一个问题，即在使用`$.each`. 此替代代码解决了该问题：

```
$.each(x, function(index, value) {
    var info = value.info;
    for (var i = 0; i < info.length; ) {
        if (info[i].name === 'x') {
            info.splice(i, 1);
        } else {
            ++i;
        }
    }
}); 
```*

# c# - C#通过ref传递内部具有相同属性的不同类型的对象并在没有接口的情况下填充它们

> ID：11969497
> 
> 赞同：1
> 
> 时间：2012-08-15T12:45:31.463
> 
> 标签：c#

如何通过 ref 传递内部具有相同属性的不同类型的对象并在没有接口的情况下填充它们。

在我的应用程序中有完全不同的类型，它们具有一些共同的属性。假设这个属性是双数组。

```
double[] samples; 
```

现在我必须为 20 个对象填充这些样本。我无权访问该对象的类定义，因此无法制作接口，也无法使它们从基类继承。

如何使用我调用的一种方法和这种方法来填充我的所有属性。

我想要一种这样的方法：

```
private static void FillSamples(ref WhoKnowsWhat dataType, MyObject theSamples)
{

for (int i = 0; i < sampleCount; i++)
                        {
                            dataType.SampleLength[i] = MyObject.X[i];
                            dataType.SampleValue[i]  = MyObject.y[i];
                        }
} 
```

并用完全不同的类型来称呼它。

```
FillSamples(ref BigStruct.OneTypeMine, theSamples);
FillSamples(ref BigStruct.AnotherTypeMine, theSamples);
FillSamples(ref BigStruct.HisType12345, theSamples); 
```

然后大结构应该在最后填充这些样本。

C#有办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:50:32.190

您可以使用[动态](http://msdn.microsoft.com/en-us/library/dd264741.aspx)关键字：

```
private static void FillSamples(dynamic dataType, MyObject theSamples)
{
    for (int i = 0; i < sampleCount; i++)
    {
        dataType.SampleLength[i] = MyObject.X[i];
        dataType.SampleValue[i]  = MyObject.y[i];
    }
} 
```

* * *

**编辑：**

使用反射（如果您不使用 .Net 4.0 或更高版本）：

```
private static void FillSamples(object dataType, MyObject theSamples)
{
    Type t = dataType.GetType();
    var px = t.GetProperty("SampleLength");
    var py = t.GetProperty("SampleValue");

    for (int i = 0; i < sampleCount; i++)
    {
        px.SetValue(dataType, MyObject.X[i], null);
        py.SetValue(dataType, MyObject.Y[i], null);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:54:17.090

不知道它是否对您有任何帮助，但您可以使用反射来找出对象在运行时支持的属性（以及字段、方法等）。例如，如果您有兴趣了解更多信息，请查看[http://www.csharp-examples.net/reflection-property-names/ 。](http://www.csharp-examples.net/reflection-property-names/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T12:56:20.917

您可以使用动态对象。定位动态对象的字段时应该小心，因为它们无法在编译时检查。请参阅下面的示例：

```
[TestFixture]
public class DynamicObjects
{
    [Test]
    public void Dynamic_Call()
    {
        dynamic obj1 = new Apple();
        obj1.Weight = 100;
        obj1.Color = "Red";

        dynamic obj2 = new Orange();
        obj2.Weight = 200;
        obj2.Width = 10;

        Assert.IsTrue(obj1.Weight < obj2.Weight);
    }
}

public class Apple
{
    public int Weight { get; set; }
    public string Color { get; set; }
}

public class Orange
{
    public int Weight { get; set; }
    public int Width { get; set; }
} 
```

# javascript - 特定状态的复选框

> ID：11969499
> 
> 赞同：0
> 
> 时间：2012-08-15T12:45:38.677
> 
> 标签：javascript

我有一个美国主要城市的复选框网格。我创建了一个下拉菜单来选择一个状态。当用户单击提交按钮时，我想选择该特定状态的所有复选框。我已经为每次检查使用了一个动态 id，我想我可以用 title 属性来识别它们。

有没有办法使用常规 javascript 而不是 jquery 选择所有“纽约州”。

任何帮助将不胜感激。

新杰克

编辑

我是按照这些思路思考的

```
function SelectState(StateAbbr)
{
     var f = document.frmChangeMemberPaid;
     checkboxes = document.getElementsByName('LocalPageID');
     for(var i in checkboxes)
     {
          if(checkboxes[i].attributes[1].name == StateAbbr)
          {
               checkboxes[i].checked = source.checked;
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:00:46.460

我认为您应该使用函数`getElementsByTagName`来获取所有输入，过滤掉所有复选框，然后仅检查符合您条件的那些：

```
var inputs = document.getElementsByTagName("input");

for (var i=0, count = inputs.length; i < count; i++) {
    var node = inputs.item(i);
    if (node.type === "checkbox") {
        if (node.title === "New York State") {
            node.checked = true;
        } else {
            // uncheck other checkboxes in case they are already checked
            node.checked = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:06:07.213

使用类来标记输入：

```
<table id="cities" border="1">
    <tr>
        <td>
            Miami, FL
            <input type="checkbox" value="Miami" class="FL" />
        </td>
        <td>
            New York City, NY
            <input type="checkbox" value="New York City" class="NY" />
        </td>
    </tr>
    <tr>
        <td>
            Tampa, FL
            <input type="checkbox" value="Tampa" class="FL" />
        </td>
        <td>
            Buffalo, NY
            <input type="checkbox" value="Buffalo" class="NY" />
        </td>
    </tr>
</table>

<select id="states">
     <option value="FL">FL</option>
    <option value="NY">NY</option>
</select>

<script type="text/javascript">
    var cities = document.getElementById('cities'),
    states = document.getElementById('states');

    function checkCitiesOf(state) {
        inputs = cities.getElementsByTagName('input');
        for(var i = 0, l = inputs.length; i < l; i++) {
            inputs[i].checked = inputs[i].className == state;       
        }
    }

    states.onchange = function() {
        checkCitiesOf(this.value);
    };
</script> 
```

​ ​</p>

**[小提琴](http://jsfiddle.net/f0t0n/PvLVj/)**​</p>

# c# - 使用“变量！== FALSE”的缺点

> ID：11969501
> 
> 赞同：0
> 
> 时间：2012-08-15T12:45:44.627
> 
> 标签：c#, php, coding-style, conditional

阅读招聘广告，要求（叹息）是申请人应该或多或少讨厌使用`variable !== FALSE`. 然而，我看不出这是什么原因，因为我觉得它很方便。

假设函数 ( `get_user( int user_id )`) 如果不成功（查找请求的用户）返回 FALSE，我可以简单地使用：

```
user = get_user(823);

if(user !== FALSE) {

   // User found   

} else {

  // No user found

} 
```

当然，我可以简单地使用`if(!user)`，但是，我并不总是觉得它适合，尤其是当我需要满足一些条件时。

写这样的代码有什么缺点吗？

**澄清：这是一个更全球性的问题，因为广告反对使用 PHP`!== FALSE`和 C# 使用`!= FALSE`.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:49:29.273

您说 get_user 在不成功时返回 false - 这就是大部分问题。如果函数调用不成功，它应该抛出异常，而不是返回类型不安全的答案（“false”，而不是 User）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:48:57.707

你可以做意外

```
if($variable = FALSE) 
```

这将改变`$variable`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T12:54:34.530

在 Javascript 中，以下两个是等价的：

```
user != FALSE

!user 
```

但是，这略有不同：

```
user !== FALSE 
```

因为它是 === 的否定，它检查值和类型是否相同。

参考：

*   [http://www.w3schools.com/js/js_comparisons.asp](http://www.w3schools.com/js/js_comparisons.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T13:13:40.060

实际上，这取决于语言。

**C**

在程序语言 C 中没有 bool，然后 TRUE 或 FALSE 是定义的值，通常 1 表示 TRUE，0 表示 FALSE。然而，由于这只是一种约定，有些人将 FALSE 定义为 -1，将 TRUE 定义为 255。您会看到这会导致奇怪的行为，因此在 C 中总是检查定义的值并确保这些值匹配。

同样在 C 中，有些人认为最好的方法是使用 'FALSE == a' 而不是 'a == FALSE'。原因是如果忘记了一个=，则第一个（FALSE == a）给出编译错误，第二个被视为赋值，这显然是无意的。

**C＃**

但是，在 C# 中，true 和 false 是预定义的，并且根据 true 和 false 检查变量是没有用的。a == true 和写 a 的意思完全一样。

**Python**

然而，在 Python 中，有一个变化。a == true 意味着变量 a 应该是一个布尔值，如果你只写 'a' 则意味着它也可以是 0、[]、{} 或任何初始值。

有点跑题了：我认为如果这样的细节是“工作要求”的一部分，那么工作要求就会像 10,000 页一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T12:49:07.870

如果你有 Java

```
Boolean flag1 = new Boolean(true);
Boolean flag2 = new Boolean(false);

if (flag1 == Boolean.TRUE || flag1 == Boolean.FALSE) // is false.
if (flag2 == Boolean.TRUE || flag2 == Boolean.FALSE) // is false.

if (flag1 != Boolean.FALSE && flag2 != Boolean.FALSE) // is true 
```

使用 == FALSE 或 != FALSE 可能无法按照您的想法工作，因此虽然它更冗长，但也容易出错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T12:53:53.260

从开发人员的角度来看，最好设计不返回不同值的方法，这些值的计算结果为 FALSE。例如，您的函数不应返回多个可能的值，`0 or NULL or FALSE or "" (empty string) or empty array()`因为这将需要一些不明显的逻辑来检查结果。

另一方面，如果我们谈论 PHP，很高兴知道某些函数会返回零或假，例如 strpos。您不应假设`if (!strpos(...))`该字符串不包含在另一个字符串中，它可能位于零位置，其计算结果为`FALSE`. 有时，函数也可能在失败时返回 FALSE 或在成功时返回空数组（不会产生计算结果为 的结果`TRUE`）。

因此，请指出在某些情况下这是必要的或有用的，但通常返回多个评估为 FALSE 的值是不好的做法，因此需要在比较运算符中包含类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T12:54:34.670

要求的内容可能与品味和使用领域有关。

在严格的逻辑系统中，人们可能倾向于选择表示对象（在任何类型的存储或内存中）的 ID 值不为 0（并且仅为正数）。

这为用 0 表示不存在的对象（所谓的 NULL 对象）留下了空间。

*也可以*使用负数来表示元信息，如错误。但是一个严格的系统不应该使用任何负数并在某些上下文而不是数据流的主线上传递元信息。

可能这就是想要的。在那种情况下，该值`FALSE`将不存在，因为整个系统仅与数字有关。

这样一个系统的好处是它几乎适用于每种编程语言和不同的范例。

同样通常数字零表示虚假条件，非零数字表示真实条件。

# javascript - Facebook JavaScript API 是否适合创建用户帐户？

> ID：11969508
> 
> 赞同：2
> 
> 时间：2012-08-15T12:46:07.783
> 
> 标签：javascript, facebook

我希望用户能够在我的移动（基于网络）应用程序上注册并使用他们的 Facebook 帐户登录。这可以使用 JavaScript API 吗？

用户可以使用 Facebook 登录，并且该用户的用户 ID 和身份验证代码可以发送到我的服务器以创建帐户，但我看到了一个安全漏洞，因为随后任何人都可以通过发送用户 ID 和他们自己的身份验证以任何人身份登录代码。那么用户帐户是否可以不使用 JavaScript API 而仅使用服务器端 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:00:12.140

所有 Facebook 请求还使用属于您注册的应用程序的密钥签名，以处理您网站上的 Facebook 注册，因此您可以使用它来验证它来自 Facebook 而不是其他人。

[注册文件](https://developers.facebook.com/docs/plugins/registration/)中也对此进行了概述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:55:56.493

严格来说，Facebook SDK 无法显式创建新用户。但是，当您实现“使用 Facebook 登录”按钮时（请参阅[此处查看 JS](https://developers.facebook.com/docs/reference/javascript/FB.login/)和[此处查看 PHP](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)），会出现 Facebook 的 OAuth 对话框，该对话框将提示用户登录（如果他们尚未登录）或使用 Facebook 注册，从而创建一个新帐户，尽管不受您的控制。

# iphone - 带有monogame的iphone原语

> ID：11969511
> 
> 赞同：0
> 
> 时间：2012-08-15T12:46:21.460
> 
> 标签：iphone, primitive, monogame

我正在尝试用 monogame 绘制一些原语。我正在使用`GraphicsDevice`and`DrawUserPrimitives`方法。虽然我可以看到我在 Android 设备中绘制的矩形，但它在 iPhone 模拟器上是缺失的。我是否遗漏了某些东西，或者在不支持单游戏的 iPhone 上绘制原语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:50:30.023

你使用的是（develop3D 分支）[https://github.com/mono/MonoGame/tree/develop3d]？

# windows-phone-7 - 无法在 WP7 代码中访问 TextBox

> ID：11969513
> 
> 赞同：0
> 
> 时间：2012-08-15T12:46:29.653
> 
> 标签：windows-phone-7

我有我的 xaml 如下

```
<Button>
    <Button.ContentTemplate>
        <DataTemplate>
            <TextBlock x:Name="firstBlock"/>
        </DataTemplate>
    </Button.ContentTemplate>
</Button> 
```

问题是我不能在代码中使用 TextBlock。它给出了错误

**当前上下文中不存在名称“firstBlock”**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:40:24.487

这是因为您将它用作 DataTemplate 的一部分。

为什么不像这样使用它：

```
<Button Name="btn">
    <Button.Content>
        <TextBlock x:Name="firstBlock"/>
    </Button.Content>
</Button> 
```

或者，如果它只是您的按钮中需要的 TextBlock，只需调用

btn.Content = "一些文字";

# php - 替换变量

> ID：11969518
> 
> 赞同：-1
> 
> 时间：2012-08-15T12:46:48.027
> 
> 标签：php, html, variables

我想从 HTML 表单中替换变量的值。

在我的 config.php

我有一个变量

$数= 3；

我想当我在表单上输入一个值时 form.html 将替换值 3。

这是我的 HTML 表单：

```
 <html>
    <body>
    <table border="0" align="center" cellspacing="2" cellpadding="2">
    <tr align="center">
    <td>num</td>
    <td><input type="text" name="num"></td>
    </tr>
    <tr align="center">
    <td colspan="2"><input type="submit" value="OK"></td>
    </tr>
    </table>
    </form>
    </body>
    </html> 
```

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:49:58.820

尝试在提交表单时替换单独的 php 文件中的 1 个特定变量是一种非常糟糕的方法。如果您希望能够更改此配置变量，为什么不将其存储在数据库表中呢？这样更新就容易多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:50:04.447

您需要将它放在`<form>`标签中，然后设置`method="post"`.

PHP 代码将是：`$num = $_POST['num'];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:51:36.683

提交表单后，表单中的值将可通过数组`$_GET`或`$_POST`全局数组使用，具体取决于您使用的表单的提交方法。假设您用作`post`表单的方法，您将设置`$num`如下：

```
$num = $_POST['num']; 
```

您的完整 HTML（和 PHP）页面应如下所示：

```
<html>

<?php 
if(isset($_POST['submit']))
{
    $num = intval($_POST['num']);
}
?>

<body>
<form method="post" action="<?php echo $_SERVER['PHP_SELF'] ?>">
    <table border="0" align="center" cellspacing="2" cellpadding="2">
        <tr align="center">
            <td>num</td>
            <td><input type="text" name="num"></td>
        </tr>
        <tr align="center">
            <td colspan="2"><input type="submit" value="OK" name="submit"></td>
        </tr>
    </table>
</form>

</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:53:10.063

表格文件：

```
<html>
<body>

  <form action='action.php' method='post'>
    <table border="0" align="center" cellspacing="2" cellpadding="2">
      <tr align="center">
        <td>num</td>
        <td><input type="text" name="num"></td>
      </tr>
      <tr align="center">
        <td colspan="2"><input type="submit" value="OK"></td>
      </tr>
    </table>
  </form>

</body>
</html> 
```

动作.php

```
<?php
  $num = (int)$_POST['num'];
?> 
```

# javascript - 在 onclick 属性之后单击按钮时执行 f:setPropertyActionListener

> ID：11969520
> 
> 赞同：0
> 
> 时间：2012-08-15T12:47:21.577
> 
> 标签：javascript, ajax, jsf-2, primefaces

在一个页面中，我有一个包含所有用户的数据表，每行包含两个附加列“编辑”和“删除”，问题出在按钮上，当用户单击“删除”按钮时，我向他显示了一个带有组件的确认对话框primefaces，如果他单击“确定”，我会运行一个从数据库中删除用户的方法，但问题出在按钮上：

```
 <p:column>
                    <p:commandButton   actionListener="#{utilisateursController.supprimerUser()}" value="Supprimer" onclick="confirmation.show()" type="button" >
                        <f:setPropertyActionListener id="jesusi" value="#{car}" target="#{utilisateursController.u1}" />  
                    </p:commandButton>
                </p:column> 
```

删除用户它必须受到影响`utilisateursController.u1` 但是当我点击这个按钮时，下面的代码

```
 <f:setPropertyActionListener id="jesusi" value="#{car}" target="#{utilisateursController.u1}" /> 
```

不被执行

然后，`utilisateursController.u1` 剩下的为空

你有什么想法提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:10:02.440

它不会执行，因为您添加了`type="button"`. 删除那部分。此外，您应该使用`oncomplete`而不是打开对话框`onclick`，以便在打开对话框时，所选行已经在 中`utilisateursController.u1`。这样，您可以在确认对话框中包含属性（如名称）（如果您想这样做，您必须从按钮更新对话框）。

# asp.net-mvc - 试图处理重复的 mvc 实体框架

> ID：11969521
> 
> 赞同：0
> 
> 时间：2012-08-15T12:47:22.177
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4.1

所以我试图弄清楚如何处理重复，我想到的一种方法是将类型重新指定为相同的类型

例如

```
public class Employee
{
    public int Id {get;set;}
    public string Name {get;set;}
    public int? RemappingId {get;set;}

    public virtual Employee Remapping {get;set;}
} 
```

所以，基本上，任何人都可以注册，但是如果有人不小心保存了重复的员工，我无法在这部分进行任何验证，我计划有一些管理页面来将重复的员工映射到喜欢“主要”员工。

但我收到了这个错误：

> 无法确定类型之间关联的主体端必须使用流式 API 或数据注释显式配置此关联的主体端

所以我不确定这是否是处理重复的正确方法，如果不是，请给我指出正确的方向。如果这是可以接受的，你有没有机会帮我阻止错误？

谢谢！

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:39:28.057

**所以我不确定这是否是处理重复项的正确方法**：是的，这确实不是一个好方法。你也知道:)

**我建议你怎么做**

当您与“员工”一起工作时，我假设会有一些员工唯一的 ID（如 EmployeeID）。因此，通过将这样的 id 作为主键，您可以进行简单的 ifExists 检查并在视图上显示适当的消息。

**更新：** 如果员工没有任何独特之处（甚至没有电子邮件或员工 ID 等），那么根据我的说法，您的数据库设计有问题。但这又是我*个人*的看法。

希望这可以帮助。

# vb.net - 这个 VB.Net 脚本是什么，如何为它的单元格添加颜色？

> ID：11969525
> 
> 赞同：0
> 
> 时间：2012-08-15T12:47:39.843
> 
> 标签：vb.net

我有一个任务，我有这个 VB.Net 脚本来生成和填充网格，我必须为每个网格单元添加颜色。

问题是给我的这个免费软件已经 5 岁了，我不知道这个免费软件的名字是什么；我只得到了源文件。

**我不完全确定这个脚本是如何工作的，因为我是一个 C# 人，所以我希望这里的人可能知道免费软件的名称或它的功能是什么，以便他们可以向我解释。**

freeware 文件夹中似乎有 4 个文件，下面是它们的屏幕截图：

![在此处输入图像描述](../Images/c5b615d3e39ed24d446d5dc7d9edace8.png)

我目前正坐下来尝试理解对`PrintDGV.vb`理解免费软件可能有用也可能没有用的代码。

我不熟悉这些文件中的任何一个，但这里是代码`PrintDGV.vb`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:57:32.697

看起来相当直截了当。

您将 DataGridView 控件传递给它，它看起来会为您处理打印：

```
Call PrintDGV.Print_DataGridView(YourDataGridViewControl) 
```

它是一个共享函数，因此您不需要实例化它。要为单元格着色，只需设置网格单元格的背景颜色，看起来它将在打印过程中使用它。

要更改 DataGridView 控件中单个单元格的颜色：

```
YourDataGridViewControl.CurrentCell.Style.BackColor = Color.Red 
```

# tridion - 完成工作流活动会出现“已添加具有相同键的项目”错误

> ID：11969528
> 
> 赞同：5
> 
> 时间：2012-08-15T12:47:58.690
> 
> 标签：tridion, tridion-2011

我们为某种类型的内容设置了一个非常简单的审批工作流程。但是，由于某种原因，第一个手动活动无法完成，因此工作流被阻止。

任何完成活动的尝试都会提示此错误：

```
An item with the same key has already been added.
Unable to finish the Workflow Activity (tcm:x-xxxxx-xxxxxx) 
```

这是我正在使用的数据（为了便于阅读而截断）：

```
<Content xmlns="uuid:fac33fb4-7b36-465a-af40-f3b80c4f3f65">
    <contactlist>
        <name>Lorem ipsum dolor</name>
        <address>sit amet consectetur</address>
        <photo xmlns:xlink="http://www.w3.org/1999/xlink" 
               xlink:type="simple" xlink:href="tcm:5-80196" 
               xlink:title="photo-1"></photo>
        <email>email1@email.com</email>
        <phone>interdu eget</phone>
        <mailimage xmlns:xlink="http://www.w3.org/1999/xlink" 
                   xlink:type="simple" xlink:href="tcm:5-80195" 
                   xlink:title="email-icon"></mailimage>
    </contactlist>
    <contactlist>
        <name>Lorem ipsum dolor</name>
        <address>sit amet consectetur</address>
        <photo xmlns:xlink="http://www.w3.org/1999/xlink" 
               xlink:type="simple" xlink:href="tcm:5-80197" 
               xlink:title="photo-2"></photo>
        <email>email@email.com</email>
        <phone>interdu eget</phone>
        <mailimage xmlns:xlink="http://www.w3.org/1999/xlink" 
                   xlink:type="simple" xlink:href="tcm:5-80195" 
                   xlink:title="email-icon"></mailimage>
    </contactlist>
</Content> 
```

请注意，我正在为*[mailImage]*属性重用相同的电子邮件图标图像。我倾向于认为这是导致错误的原因，因为它是列表中唯一重复的组件链接。

如果我删除邮件图像组件链接并完成活动，它会起作用，我可以继续工作流程。奇怪吧？

对于能够继续进行的工作流，我看不出为什么我不能在同一组件中重用组件链接。我的意思是，CMS 允许我保存组件，为什么不允许我继续 Workflow？

编辑：顺便说一句，这是来自事件日志的错误：

```
Unable to finish the Workflow Activity (tcm:5-18430-131104)
An item with the same key has already been added.

Error Code:
0x80040000 (-2147221504)

Call stack:
System.ThrowHelper.ThrowArgumentException(ExceptionResource)
System.Collections.Generic.Dictionary`2.Insert(TKey,TValue,Boolean)
System.Collections.Generic.Dictionary`2.Add(TKey,TValue)
Tridion.ContentManager.Workflow.ActivityInstance.SaveBinariesAndGetBinaryIds(String,IDictionary`2)
Tridion.ContentManager.Workflow.ActivityInstance.OnFinishing(FinishActivityEventArgs)
Tridion.ContentManager.Workflow.ActivityInstance.Finish(ActivityFinish)
Tridion.ContentManager.BLFacade.Workflow.ActivityInstanceFacade.FinishActivity(UserContext,String,String,String,String,String,String)
ActivityInstance.FinishActivity 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T13:45:32.250

您遇到的问题是因为您的审核模板。您可能有旧的（2011 年之前）VBScript 模板作为您的审核模板。尝试关闭审核，或更改出版物属性中的审核模板值

# javascript - 如何协调 Javascript 库中的 DRY 和松散耦合？

> ID：11969530
> 
> 赞同：2
> 
> 时间：2012-08-15T12:48:24.600
> 
> 标签：javascript, dry, loose-coupling

我正在构建自己的 JS 库；
这个想法是该库应该由小的独立模块和一些稍大的实用程序组成，主要用于消除浏览器的差异。
我无法完成任何事情，因为我无法在保持干燥或松散耦合之间做出决定。

一个例子？鉴于：

*   一个小型库，负责从模板生成 dom 元素
*   另一个处理鸭子类型问题（is_function，is_array ...）
*   最后一个创建模态框。最后一个需要：
    *   一些类型检查
    *   将仅使用模板库中的一个函数创建模态

我对模态框库的选择：

1.  100% 干燥，并且依赖于另外两个库。但这意味着，如果您是只想下载模态框库的用户，则必须与另外两个
2.  允许用户在启动时传递一个选项对象，以允许他们指定所需的功能；默认为库中的那些。这更好，但实际上，在 90% 的情况下，这仍然意味着使用提供的库，因为创建具有相同签名的函数可能很麻烦。此外，它增加了模态框代码的复杂性。
3.  100% 松散，并重现我的模态框库中所需的功能；可能更有效，因为更有针对性，并且不需要检查边缘情况；但是：任何错误都必须在两个地方修复，并且我的下载大小会增加。

所以我浪费时间在两个极端之间摇摆不定，重构一百万次却从未满足。
我本来想问一个更通用的问题，但后来我意识到它确实与 JS 有关，因为它涉及到大小和性能问题以及广泛使用。

在这种情况下是否有任何已知的模式可以遵循？什么是公认的方式来解决这个问题？欢迎任何想法。

[编辑：]
这是我发现的[唯一一篇说明我的担忧的文章。](http://www.infoq.com/news/2012/05/DRY-code-duplication-coupling)正如文章所说，

> DRY 很重要，但 [...] 低耦合和高内聚也很重要。[...] 您必须考虑所有 [原则] 并权衡它们在每种情况下的相对价值

我想在这种情况下我无法衡量它们的价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:21:40.397

就个人而言，我一直认为[松散耦合](http://en.wikipedia.org/wiki/Loose_coupling)是指在代码中创建接缝。在 Java 等经典语言中，这是通过创建隐藏具体实现的接口来实现的。这是一个强大的概念，因为它允许开发人员在您的应用程序中“解开接缝”并用模拟和测试替身（或者实际上是他们自己的实现）替换具体的实现。由于 JavaScript 是一种动态语言，开发人员依赖于鸭式而不是接口：由于没有任何东西被冻结，每个对象都成为代码中的一个接缝并且可以被替换。

在直接回答您的问题时，我认为始终致力于将您的代码分解和模块化为更小的库是有好处的。您不仅要避免重复代码（出于多种原因，这不是一个好主意），而且您还鼓励其他只想重用库的一部分的开发人员重用。

与其重新发明轮子，不如利用一些更流行的 JavaScript 库。例如，[underscore.js](http://underscorejs.org/)是一个轻量级库，它为鸭式检查提供了丰富的工具包，[Mustache.js](https://github.com/janl/mustache.js/)可以很好地满足您的模板需求。

许多现有项目已经使用这种方法，例如[Backbone.js](http://backbonejs.org/)依赖 underscore.js 和[jQuery Mobile](http://jquerymobile.com)依赖于 jQuery。[RequireJS](http://requirejs.org/)之类的工具可以轻松列出和解决应用程序的 javascript 依赖项，甚至可以用于[将所有单独的.js 文件组合成一个单一的、缩小的资源](http://requirejs.org/docs/optimization.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:19:49.027

我喜欢 DRY 的概念，但你的权利它有几个问题。

1.  您的最终用户开发人员需要知道他们需要下载组件的依赖项。

2.  您的最终用户开发人员需要知道他们需要配置依赖项（即传入的选项）。

帮助解决 1\. 你的项目网站可以自定义下载，所以核心代码和可选组件一起下载。喜欢[现代化的下载页面](http://modernizr.com/download/)。

帮助解决 2\. 不要让用户传入选项，而是使用合理的默认值来检测你的包的哪些部分已经加载到浏览器中并自动将它们绑定起来。这种松散耦合还可以为您带来巨大的优势，如果用户已经安装了第三方框架，也可以依赖它们。例如[selectivizr](http://selectivizr.com/)允许您根据浏览器已经加载的内容使用 jquery 或 dojo 等。

也许你可以使用[requirejs](http://requirejs.org/)来帮助解决依赖管理。我得到的印象并不是真正让库直接使用，而是最终用户开发人员......但它可能是一个很好的选择。

我意识到我的回答并没有直接回答你的问题，但也许它可以帮助平衡 DRY 的一些负面因素。

# c# - 在测试中将字节数组转换为字符串时出错

> ID：11969531
> 
> 赞同：1
> 
> 时间：2012-08-15T12:48:25.133
> 
> 标签：c#, string, unit-testing, bytearray, type-conversion

我有以下测试，我一直在尝试开始工作

```
[Test]
public void Test()
{
    byte[] testArray = new byte[] { 1, 0, 0, 1 };

    string number = System.Text.Encoding.ASCII.GetString(testArray);

    Assert.That(number, Is.EqualTo("1001"));
} 
```

我收到以下错误

```
String lengths are both 4\. Strings differ at index 0.
Expected: "1001"
But was:  "\0\0" 
```

这让我感到困惑，因为我将字节数组转换为字符串的生产代码使用相同的方法，然后我注销了字符串，这正是我所期望的。

在这种情况下进行转换之前我应该​​对字节数组做些什么吗？

谢谢，尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:52:37.580

ASCII 中的字节 0 不是“0”而是一些转义字符。

这可能会解决您的问题；

```
byte[] testArray = new byte[] { 49, 48, 48, 49 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:54:50.133

使用您当前的代码，您将每个字节视为 ASCII 代码，0 的 ascii 代码应该是 48...

我怀疑您实际上想要（使用Linq）：

```
string number=string.Join('',testArray.Select(x=>x.ToString()).ToArray()); 
```

或者

```
string number=System.Text.Encoding.ASCII.GetString(testArray.Select(x=>x+48).ToArray()); 
```

# .htaccess - 如何读取 .htaccess 文件？

> ID：11969534
> 
> 赞同：0
> 
> 时间：2012-08-15T12:48:26.407
> 
> 标签：.htaccess

我有这个巨大的 .htaccess 文件，我相信它可以防止不在本地网络上的用户访问给定站点。

我试图解释它，但我所知道的唯一会限制访问的部分是允许、拒绝部分的顺序，而且我没有看到任何我怀疑是外部 IP 的东西。

这是代码：

```
#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl|svn-base)$|^(code-style\.pl|Entries.*|Repository|Root|Tag|Template|all-wcprops|entries|format)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Force simple error message for requests for non-existent favicon.ico.
<Files favicon.ico>
  # There is no end quote below, for compatibility with Apache 1.3.
  ErrorDocument 404 "The requested file favicon.ico was not found.
</Files>

# Set the default handler.
DirectoryIndex index.php

# Override PHP settings. More in sites/default/settings.php
# but the following cannot be changed at runtime.

# PHP 4, Apache 1.
<IfModule mod_php4.c>
  php_value magic_quotes_gpc                0
  php_value register_globals                0
  php_value session.auto_start              0
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
</IfModule>

# PHP 4, Apache 2.
<IfModule sapi_apache2.c>
  php_value magic_quotes_gpc                0
  php_value register_globals                0
  php_value session.auto_start              0
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
</IfModule>

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_value magic_quotes_gpc                0
  php_value register_globals                0
  php_value session.auto_start              0
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # adapt and uncomment the following:
  # RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
  # RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment and adapt the following:
  # RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
  # RewriteRule ^(.*)$ http://example.com/$1 [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Rewrite URLs of the form 'x' to the form 'index.php?q=x'.
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
</IfModule>

# $Id$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:55:20.797

```
# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl|svn-base)$|^(code-style\.pl|Entries.*|Repository|Root|Tag|Template|all-wcprops|entries|format)$">
  Order allow,deny
</FilesMatch> 
```

匹配括号中的扩展并设置 Allow/Disallor-Order

```
# Don't show directory listings for URLs which map to a directory.
Options -Indexes 
```

正如评论所说

```
# Follow symbolic links in this directory.
Options +FollowSymLinks 
```

正如评论所说

```
# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php 
```

设置在 404（未找到）错误后显示的文档

```
# Force simple error message for requests for non-existent favicon.ico.
<Files favicon.ico>
  # There is no end quote below, for compatibility with Apache 1.3.
  ErrorDocument 404 "The requested file favicon.ico was not found.
</Files> 
```

favicon.ico 获得一个特殊的 404 错误页面

```
# Set the default handler.
DirectoryIndex index.php 
```

您请求“/”必须显示哪个文件

```
# Override PHP settings. More in sites/default/settings.php
# but the following cannot be changed at runtime. 
```

正如它所说

```
# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule> 
```

启用缓存头，但不用于 *.php

```
# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Rewrite URLs of the form 'x' to the form 'index.php?q=x'.
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
</IfModule> 
```

正如评论所说：重写网址，以便调用 index.php 。

# java - Maven 依赖树不同于 M2E 的依赖层次结构

> ID：11969535
> 
> 赞同：2
> 
> 时间：2012-08-15T12:48:27.323
> 
> 标签：java, eclipse, maven, m2eclipse, m2e

我正在构建一个 Java 项目`MaterialsDep`，它是项目的一个插件`craftbukkit`[加载在我的工作区中，并且直接依赖于 jar 类型的 MaterialsDep 和范围编译]。在 Eclipse 中查看 MaterialsDep 的 pom 依赖层次结构，CB 所需的所有 jar 都显示为已解析并正确列出。然而，`mvn dependency:copy-dependencies`在项目 AP 上运行仅复制直接依赖项，没有其他内容。

运行依赖：树显示：

```
[INFO] --- maven-dependency-plugin:2.4:tree (default-cli) @ MaterialsDep ---
[INFO] MaterialsDep:MaterialsDep:jar:0.0.1-SNAPSHOT
[INFO] +- org.bukkit:craftbukkit:jar:1.3.1-R1.1-SNAPSHOT:compile
[INFO] +- org.pircbotx:pircbotx:jar:1.7:compile
[INFO] \- org.bukkit:bukkit:jar:1.3.1-R1.1-SNAPSHOT:compile 
```

这是直接依赖项。

我应该如何去确保它`craftbukkit`的依赖被识别和复制？

**[编辑]**

`dependency:tree`对于craftbukkit：

```
[INFO] org.bukkit:craftbukkit:jar:1.3.1-R1.1-SNAPSHOT
[INFO] +- org.bukkit:bukkit:jar:1.3.1-R1.1-SNAPSHOT:compile
[INFO] +- org.bukkit:minecraft-server:jar:1.3.1:compile
[INFO] +- net.sf.jopt-simple:jopt-simple:jar:3.2:compile
[INFO] +- jline:jline:jar:2.6:compile
[INFO] +- org.fusesource.jansi:jansi:jar:1.8:compile
[INFO] +- org.xerial:sqlite-jdbc:jar:3.7.2:compile
[INFO] +- mysql:mysql-connector-java:jar:5.1.14:compile
[INFO] +- org.avaje:ebean:jar:2.7.3:provided
[INFO] |  \- javax.persistence:persistence-api:jar:1.0:provided
[INFO] +- org.yaml:snakeyaml:jar:1.9:provided
[INFO] +- com.google.guava:guava:jar:10.0:provided
[INFO] |  \- com.google.code.findbugs:jsr305:jar:1.3.9:provided
[INFO] +- commons-lang:commons-lang:jar:2.3:provided
[INFO] +- junit:junit-dep:jar:4.10:test
[INFO] +- org.hamcrest:hamcrest-library:jar:1.2.1:test
[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.2.1:test
[INFO] \- com.google.code.gson:gson:jar:2.1:compile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:53:37.987

通过正确配置`dependency`插件。属性[excludeTransitive](https://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html#excludeTransitive)定义是否忽略传递依赖。确保它的值是`false`.

`mvn help:effective-pom`可能有助于找出插件的配置方式。

**[编辑]** `copy-dependencies`只会复制`dependency:tree`显示的内容。正如您在上面的输出中看到的那样，`craftbukkit`它本身没有任何进一步的依赖关系。我的猜测是`craftbukkit`POM 中的所有依赖项都有`<optional>true</optional>`.

如果是这种情况，那么您将不得不在您的 POM 中再次提及所有这些。

# ruby-on-rails - Ckeditor::PicturesController#create 中的名称错误

> ID：11969537
> 
> 赞同：2
> 
> 时间：2012-08-15T12:48:56.020
> 
> 标签：ruby-on-rails, ckeditor

我在我的 rails 3.2.6 应用程序中使用 ckeditor 和 mongoid &carrierwave。全部安装在这里[https://github.com/galetahub/ckeditor](https://github.com/galetahub/ckeditor) 一切正常，但是当我尝试上传文件或图片时，我有错误：

Ckeditor::PicturesController#create 中的名称错误

未初始化的常量 Assetable

参数：

```
{"upload"=># @content_type="image/jpeg",
@headers="Content-Disposition: form-data; name=\"upload\"; filename=\"image.jpg\"\r\nContent-Type: image/jpeg\r\n",
@tempfile=#>,
"CKEditor"=>"content_page_version_partial_content",
"CKEditorFuncNum"=>"2",
"langCode"=>"en",
"authenticity_token"=>"4dpd7COrvkSq+I6sCcPmGHlP5hr++Q9TWQtStZNqWSg="} 
```

怎么了？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T09:34:46.907

也许您必须初始化carrierwave和activeadmin？使用 rails 生成 ckeditor:install --orm=active_record --backend=carrierwave

# node.js - 如何生成api文档

> ID：11969542
> 
> 赞同：35
> 
> 时间：2012-08-15T12:49:06.880
> 
> 标签：node.js, documentation, twitter-bootstrap, documentation-generation

我需要为我创建的 REST API 编写一些 api 文档。是否有工具可以生成类似于下划线 api 文档的漂亮 html 输出？或者可能会输出一些东西作为 twitter bootstrap 样式的 html？

我看到 docco 做了注释代码，但我实际上只是想记录 API。理想情况下，我想将一个工具指向控制器文件并让它生成有关方法和路由的文档，但不显示任何源代码，除非我专门调用示例。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-06-26T21:42:41.947

[apiDoc](http://apidocjs.com)从源代码中的 API 注释创建文档。

集成是 API 历史，可以比较各种 API 版本级别。因此，可以追溯自上一个版本以来 API 中发生的变化。

演示：[http ://apidocjs.com/example](http://apidocjs.com/example)

GitHub：[https ://github.com/apidoc/apidoc](https://github.com/apidoc/apidoc)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-22T00:24:09.233

查看 Github 上的 I/O 文档 - [http://github.com/mashery/iodocs](http://github.com/mashery/iodocs)。它在 Node.js 中被黑，并且有很多社区贡献/参与。要看到它在野外工作：

*   [http://iodocs.docusign.com](http://iodocs.docusign.com)
*   [http://console.datasift.com/datasift](http://console.datasift.com/datasift)

Uber 简单配置模式 (JSON)，如果你不想用 JSON 手动描述它，请使用 I/O Doctor，这是一个基于 Web 的工具，用于通过 UI 导入/构建 JSON 配置：

*   [http://iodoctor.net/](http://iodoctor.net/)

也可在 Github 上[https://github.com/brandonmwest/iodoctor](https://github.com/brandonmwest/iodoctor)

让我知道我是否可以帮助您入门。I/O Docs repo 中有很多示例配置。小心。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-18T21:14:02.317

I/O Docs 或 Swagger，它们是最流行的 RESTful API 文档系统。还有[RAML](http://raml.org)和[Apiary](http://apiary.io)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-04T21:29:41.727

[test2doc.js](https://github.com/stackia/test2doc.js)帮助您从测试/规范生成 API 文档。因此，您始终可以获得最新更新的 API 文档，其中填充了真实的请求/响应数据。

测试代码示例：

```
const doc = require('test2doc')
const request = require('supertest') // We use supertest as the HTTP request library
require('should') // and use should as the assertion library

// For Koa, you should exports app.listen() or app.callback() in your app entry
const app = require('./my-express-app.js')

after(function () {
  doc.emit('api-documentation.apib')
})

doc.group('Products').is(doc => {
  describe('#Products', function () {
    doc.action('Get all products').is(doc => {
      it('should get all products', function () {
        // Write specs towards your API endpoint as you would normally do
        // Just decorate with some utility methods
        return request(app)
          .get(doc.get('/products'))
          .query(doc.query({
            minPrice: doc.val(10, 'Only products of which price >= this value should be returned')
          }))
          .expect(200)
          .then(res => {
            body = doc.resBody(res.body)
            body.desc('List of all products')
              .should.not.be.empty()
            body[0].should.have.properties('id', 'name', 'price')
            body[0].price.desc('Price of this product').should.be.a.Number
          })
      })
    })
  })
}) 
```

# r - 在R中的ffdf数据框中排序和删除重复项

> ID：11969547
> 
> 赞同：1
> 
> 时间：2012-08-15T12:49:12.220
> 
> 标签：r

关于 ff 数据帧的另一个问题，但希望这应该是我关于它们的最后一个问题。有一个尴尬的问题，但首先是代码：

```
fda<-data.frame(c(1,2),c(3,4))
colnames(fda)<-c("col1","col2")
fdb<-data.frame(c(3,7),c(1,5))
colnames(fdb)<-c("col1","col2")
fd<-rbind(fda,fdb)
fd<-data.frame(fd)
library(ff)
library(ffbase)
fd<-as.ffdf(fd)
a<-c(10,12,13,11)
b<-c(13,15,10,14)
fd$col3<-as.ff(a)
fd$col4<-as.ff(b)
fd 
```

该表如下所示：

```
col1 col2 col3 col4
    1    3   10   13
    2    4   12   15
    3    1   13   10
    7    5   11   14 
```

下面的代码删除了所有重复的行。

```
rm(fda)
rm(fdb)
fd$dup<-duplicated.ffdf(fd)
fdfin<-subset.ffdf(fd, fd$dup == "FALSE")
fdfin<-as.ffdf(fdfin[,-5])
fdfin 
```

如果您看到第 1 行和第 3 行有点重复，但顺序略有不同。我需要对代码进行排序以使行匹配，然后应用上面的重复代码或一些替代代码来仅删除第 1 行或第 3 行。

这是一个约 12,000,000 行表的小样本，因此我需要使用 ff 或 ffbase 包来执行此操作。

以下适用于普通数据框，所以想知道如何使用 ff 函数来做同样的事情：

```
df<-temp1[,1:2] #temp1 is a data frame
df.sort<-t(apply(df,1,sort))
sortdup<-temp1[!duplicated(df.sort),] 
```

让我知道是否需要更多信息，
干杯，
Lorcan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:52:02.787

查看 ff 包中的 ?ffrowapply 以对行进行排序 (apply(df,1,sort))

sortdup<-temp1[!duplicated(df.sort),] 在 ffbase 包的 0.6 版中可以正常工作，因为它允许基于逻辑的 ff 向量进行索引。

要安装 ffbase 0.6 版，请运行以下代码。

```
download.file(url="http://fffunctions.googlecode.com/git-history/b6fa5617810e012e5d809d77a9a99dbb25c7e6dc/output/ffbase_0.6.tar.gz", destfile="ffbase_0.6.tar.gz")
install.packages("ffbase_0.6.tar.gz", repos=NULL) 
```

如果 ?ffapply 不起作用，您始终可以将此类函数用于问题的应用部分：

```
ffdfapply <- function(X, MARGIN, FUN, ...){
    ## Currently only handles return types ffdf and ff_vector
    stopifnot(is.ffdf(X))
    xchunks <- chunk(X)
    result <- NULL
    if(MARGIN==1){  
        for (i in xchunks){         
            res.chunk <- apply(X[i, ], MARGIN=1, FUN=FUN, ...)
            if(is.data.frame(res.chunk)){
                result <- ffdfappend(result, res.chunk)
            }else{
                result <- ffappend(result, res.chunk)
            }
    }   
    }else{
        stop("only MARGIN=1 currently allowed")
    }
    result
} 
```

# jquery - jQuery 如何找到具有特定属性的下一个元素？

> ID：11969548
> 
> 赞同：0
> 
> 时间：2012-08-15T12:49:13.587
> 
> 标签：jquery

我的页面上有一些`label`标签，其中一些具有`myAttr`属性。

我选择他们喜欢`$('label[myAttr="lorem"]')`

如何在那个之后找到下一个`label`（带有`myAttr`属性）？`myAttr`每个`label`标签的值是不同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:52:04.173

您可以选择`<label>`具有该属性的所有 s，如下所示：

```
$('label[myAttr]') 
```

并使用 . 遍历该集合[`.each()`](http://api.jquery.com/each/)。如果您已经拥有该集合，并且只想使用该属性跳到`$('label[myAttr="lorem"]')`下一个集合，则可以使用：`<label>`

```
var $labels = $('label[myAttr]');
var $current = $('label[myAttr="lorem"]');
var currentIndex = $labels.index($current);
var $next = $labels.eq(currentIndex + 1); 
```

[http://jsfiddle.net/mattball/xZKGk](http://jsfiddle.net/mattball/xZKGk)

**注意**我不建议在循环中这样做，因为它的渐近运行时行为。

# vba - 使用来自两列的信息创建超链接

> ID：11969554
> 
> 赞同：1
> 
> 时间：2012-08-15T12:49:29.963
> 
> 标签：vba, excel, hyperlink, excel-2010

使用 Excel 2010，在每一行中，我想在 G 列中创建一个超链接。

此列已经包含应用作超链接的显示文本（或友好名称）的信息。

为了使超链接指向正确的位置，它需要列 M 包含的数字。匹配信息总是在同一行。

所以基本上，这可能只是特定行的两个单元格中的两位信息的合并。

这是我开始的：

```
 Sub Macro2()
'
' Macro2 Macro
'
Dim Name As String
Dim Branch As String

' Combination of two rows
Dim CombineRow As Range

Dim cell As Range
Dim row As Range
Dim Branch_ID As Range

Set Branch_ID = Worksheets("Default").Range("M2")

Set CombineRow = Range("G2:M2")

For Each row In CombineRow.Rows
     For Each cell In row.Cells
        Branch = Branch_ID.Cells.Value
        Name = Name_ID.Cells.Value
        ActiveSheet.Hyperlinks.Add Anchor:=Selection, Address:= _
            "https://www.example.com/", SubAddress:= _
            "something:", _
            TextToDisplay:=Name
        Next cell
        ' relative one row down
        Set Branch_ID = Branch_ID.Offset(1, 0)
        Set Name_ID = Branch_ID.Offset(1, 0)
    Next row
End Sub 
```

我不知道如何将 M 列的值（例如`600021610`）附加到超链接的末尾？

我在正确的道路上吗？

编辑：

我现在拥有的是这样的：

```
Sub Macro2()
'
' Macro2 Macro
'
Dim Branch As String
Dim Name As String

' combine two rows
Dim CombineRow As Range

Dim cell As Range
Dim row As Range
Dim Branch_ID As Range
Dim Name_ID As Range

Set Branch_ID = Worksheets("Default").Range("M2")
Set Name_ID = Worksheets("Default").Range("G2")

Set CombineRow = Range("G2:M2")

For Each row In CombineRow.Rows
    For Each cell In row.Cells
        Branch = Branch_ID.Cells.Value
        Name = Name_ID.Cells.Value
        ActiveSheet.Hyperlinks.Add Anchor:=Name_ID, Address:= _
            "https://www.example.com/", SubAddress:= _
            "something" & Branch, _
            TextToDisplay:=Name
        Next cell
        Set Branch_ID = Branch_ID.Offset(1, 0)
        Set Name_ID = Name_ID.Offset(1, 0)
    Next row
End Sub 
```

这有效，但仅适用于第一行。为什么它不做循环？像这样真的正确吗`CombineRow`，还是必须是这样：`G:G;M:M`或类似的东西？

我也可以想象使用`Do ... While`循环，因为放入 an`end_tag`不会有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:03:28.573

尝试将参数设置为超链接。添加使用变量。

```
dim addressStr as string
dim targetRng as Range

For Each row In CombineRow.Rows
     For Each cell In row.Cells
        Branch = Branch_ID.Cells.Value
        Name = Name_ID.Cells.Value

        set targetRng = range("A1")   'change this to whatever you want it to be each loop
        addressStr = "https://www.example.com/" & cells(cell.row,15).value

        ActiveSheet.Hyperlinks.Add Anchor:=targetRng , Address:= _
            addressStr, SubAddress:= _
            "something:", _
            TextToDisplay:=Name
        Next cell
        ' relative one row down
        Set Branch_ID = Branch_ID.Offset(1, 0)
        Set Name_ID = Branch_ID.Offset(1, 0)
    Next row<BR>
End Sub<BR> 
```

此外，您在偏移量中将 Name_ID 和 Branch_ID 设置为相同的值。

* * *

在您的循环中，您只会遍历 1 行（因为您的范围都在第 2 行内）。所以你唯一的循环是单元格 - 你永远不会设置不同的分支/名称 ID，因为它们发生在你的循环之后：

```
For Each cell In row.Cells
    'stuff
Next cell

Set Branch_ID = Branch_ID.Offset(1, 0)
Set Name_ID = Name_ID.Offset(1, 0) 
```

因此，每次调用超链接函数时，您都使用相同的 Name_ID 范围。您可能还想制作这些 Offset(0,1) 因为 Offset 是 Offset(row,column) 并且您似乎正在迭代水平范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:04:35.623

您可以简单地使用`&`运算符来连接字符串并创建 URL。

```
addressStr = "https://www.example.com/" & <<Specify Cell for M Column and Row>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:20:02.690

有用！
感谢大家的帮助。
解决方案是不要放置 (G2:M2)，因为这只会创建七个超链接。
相反，只需将 (G:M) 和 IF 放在它周围，以防止它在单元格已经为空时创建无意义的超链接。

```
 Sub Macro2()
'
' Macro2 Macro
'
Dim Branch As String
Dim Name As String

' combine two rows
Dim CombineRow As Range

Dim cell As Range
Dim row As Range
Dim Branch_ID As Range
Dim Name_ID As Range

Set Branch_ID = Worksheets("Default").Range("M2")
Set Name_ID = Worksheets("Default").Range("G2")

Set CombineRow = Range("G:M")

For Each row In CombineRow.Rows
For Each cell In row.Cells

    Branch = Branch_ID.Cells.Value
    Name = Name_ID.Cells.Value

    If Name <> "" Then

        ActiveSheet.Hyperlinks.Add Anchor:=Name_ID, Address:= _
            "https://www.example.com", SubAddress:= _
            "something" & Branch, _
            TextToDisplay:=Name

    Set Branch_ID = Branch_ID.Offset(1, 0)
    Set Name_ID = Name_ID.Offset(1, 0)

    End If

    Next cell

    Next row

End Sub 
```

我很确定还有很大的改进空间，尤其是在 IF 构造方面。
但到目前为止，它有效。这并不意味着任何人都应该保留他们对改进这一点的评论；）。这些基本上是我在 VBA 中的第一步！:)

# php - 我的 SQL 语法真的错了吗？

> ID：11969564
> 
> 赞同：-6
> 
> 时间：2012-08-15T12:50:05.333
> 
> 标签：php, mysql, syntax, insert

这是我用来插入值的代码`$id`，`$str`并且`$name`在数据库中：

```
$r=mysql_query("INSERT INTO varta(id,data,name) VALUES('$id','$str','$name');"); 
```

但是我收到上述语句的语法错误。这是为什么？我的语法真的错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:56:47.867

尝试在查询词之间添加空格并确保您**转义输入**：

```
$id = mysql_real_escape_string($id);
$str = mysql_real_escape_string($str);
$name = mysql_real_escape_string($name);

$r=mysql_query("INSERT INTO varta (id,data,name) VALUES ('$id','$str','$name');"); 
```

或者更好 - 看看[MySQLi](http://php.net/mysqli)或[PDO](http://php.net/pdo)并使用准备好的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:54:24.157

只要您的输入变量正确转义，您的代码在面值上看起来还可以。试试这个，这样你就可以看到你正在执行的语句：

```
$s = "INSERT INTO varta (id,data,name) VALUES('$id','$str','$name');";
echo $s;
$r = mysql_query($s); 
```

检查您的变量是否不包含撇号，例如“Daisy O'Donnel”（这表明您没有正确转义它们）。

# python - AttributeError：stat 实例没有属性 X？

> ID：11969565
> 
> 赞同：0
> 
> 时间：2012-08-15T12:50:06.677
> 
> 标签：python, class, object

运行以下代码时，我得到`AttributeError: stat instance has no attribute 'printStats'`. 这里有什么问题？

```
class stat():
    def __init__(self, fname, blocks, backEdges):
        self.fname = fname
        self.blocks = blocks
        self.backEdges = backEdges

    def printStats(self):
        print self.fname + str(self.blocks) + str(self.backEdges)

element = stat("a", 1, 2)
element.printStats() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:51:13.207

您的缩进很糟糕，混合了制表符和空格。用于`python -tt`验证。

# mysql - 经典结构——自连接数据库表、列表

> ID：11969568
> 
> 赞同：1
> 
> 时间：2012-08-15T12:50:10.460
> 
> 标签：mysql, sql, join

我有以下内容：

```
ID NAME PAREN_ID
1   a    null
2   b    null
3   c     2
4   d     3 
```

我想列出 ID 4 项及其所有父项，所以我想得到：

```
4 d 3
3 c 2
2 b null 
```

我尝试了一些东西：

```
SELECT * FROM categories c1
JOIN categories c2 ON c2.ID = c1.PARENT_ID; 
```

但这不是好的结果，即使我尝试过滤到 ID 4，它也不会返回任何内容。它的MySQL！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:01:07.883

我不太确定如何使用 MySQL 来做到这一点。我认为您最好的选择是递归地获取所有内容。

```
function getCategories( $id ) {
    $ret = array();
    $cat = mysql_query( 'SELECT * FROM categories' );
    $curid = $id;
    do {
        $ret[] = $cat[ $curid ];
        $curid = $cat[ $curid ][ 'PARENT_ID' ];
    } while ( $curid );
    return $ret;
} 
```

**您应该更改它以使其使用 PDO。**

唯一的问题是查询返回大量数据。

# c# - ConcurrentDictionary Object - 通过不同的线程读写

> ID：11969570
> 
> 赞同：10
> 
> 时间：2012-08-15T12:50:11.777
> 
> 标签：c#, multithreading, thread-safety

我想在我的应用程序中使用 ConcurrentDictionary，但首先我需要确保我正确理解它的工作原理。在我的应用程序中，我将有一个或多个线程写入字典或从中删除字典。而且，我将有一个或多个从字典中读取的线程。有可能同时发生。

我是否正确 ConcurrentDictionary 的实现会处理发生这种情况所需的所有锁定，并且我不需要提供自己的锁定？换句话说，如果一个线程正在写入字典或从中删除字典，则读取线程（或另一个写入线程）将被阻塞，直到更新或删除完成？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T14:23:47.840

当前的实现使用了条带锁的混合（我昨天在[https://stackoverflow.com/a/11950835/400547](https://stackoverflow.com/a/11950835/400547)对某人的回答中建议的技术）并且**非常非常认真地**思考操作不可能导致的情况并发操作的问题或由并发操作引起的问题（其中有很多，但您必须*非常*确定是否使用它们）。

因此，如果您同时在并发字典上发生多个操作，则以下每种操作都是可能的：

1.  甚至没有线程锁定，但一切正常。
2.  一些线程锁，但它们锁在不同的东西上，没有锁争用。
3.  一两个线程相互争用锁，速度变慢，但对性能的影响小于单个锁。
4.  一个或两个线程需要将整个事物锁定一段时间（通常用于内部调整大小），这会阻塞在上述情况 3 中可能被阻塞的所有线程，尽管有些线程可以继续运行（那些读取的线程）。

这些都不涉及脏读，这只是与锁定模糊相关的问题（我自己的并发字典形式根本不使用锁，也没有脏读）。

此线程安全不适用于您的代码完成的批处理（如果您读取一个值然后写入一个值，则读取的值可能在您完成写入之前已更改），但请注意一些常见情况需要几个on 的调用`Dictionary`由单个方法处理`ConcurrentDictionary`（`GetOrAdd`并`AddOrUpdate`执行两个调用 a 的`Dictionary`操作，因此它们可以原子地完成 - 尽管请注意，`Func`某些重载中涉及的调用可能会被多次调用）。

因此， 没有额外的危险`ConcurrentDictionary`，所以你应该选择如下：

如果您将不得不锁定一些与`ConcurrentDictionary`提供的不匹配的操作批次，例如：

```
lock(lockObj)
{
  var test = dict[key1];
  var test2 = dict[key2];
  if(test < test2 && test2 < dict[key3] && SomeOtherBooleanProducer())
    dict[key4] = SomeFactoryCall(key4);
} 
```

然后你必须 lock on `ConcurrentDictionary`，虽然可能有一种方法可以将它与它提供的并发支持结合起来，但可能不会，所以只需使用`Dictionary`lock 即可。

否则，它归结为可能会有多少并发命中。如果您大多数情况下只有一个线程访问字典，但您需要防止并发访问的*可能性*，那么您绝对应该`Dictionary`使用锁。如果您将有六个或更多线程访问字典的时间段，那么您绝对应该选择`ConcurrentDictionary`（如果他们可能会访问相同数量的少量键，那么请查看我的版本，因为那是我表现更好的一种情况）。

很难说“很少”和“很多”线程之间的中间点在哪里。我会说，如果定期有两个以上的线程，那么使用`ConcurrentDictionary`. 如果不出意外，在项目的整个生命周期中，并发需求往往会增加而不是减少。

编辑：要回答您给出的一位作者和一位读者的特定案例，根本不会有任何阻塞，因为这与多位读者和一位作者安全的大致相同的原因是安全的`Hashtable`，尽管`ConcurrentDictionary`超出了这在几个方面。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T12:54:58.730

> 换句话说，如果一个线程正在写入字典或从中删除字典，则读取线程（或另一个写入线程）将被阻塞，直到更新或删除完成？

我不*相信*它会阻塞 - 它只是*安全*的。不会有任何损坏 - 您只会在读取是否看到写入方面进行竞赛。

来自[关于并发集合的无锁性的常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2010/01/26/9953725.aspx)：

> `ConcurrentDictionary<TKey,TValue>`在字典中添加或更新数据时使用细粒度锁定，但对于读取操作它是完全无锁的。通过这种方式，它针对从字典中读取是最频繁操作的场景进行了优化。

# mysql - 我可以将 MySQL 与 ASP.NET MVC3 一起使用吗？

> ID：11969572
> 
> 赞同：3
> 
> 时间：2012-08-15T12:50:16.950
> 
> 标签：mysql, asp.net-mvc-3

我`MVC3`最近开始使用，

我想知道，我可以使用`MySQL`with`ASP.NET MVC3`吗？

如何将数据库与它链接？建议我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:52:30.490

ASP.NET MVC 是一个 Web 开发框架。它与您的数据访问方法无关，也不会关心您的后端数据源是什么。您可以创建从任何数据源（如 SQL Server/MySQL/Oracle/XML 文件等）查询数据的应用程序。

**所以答案是肯定的**。您可以将 ASP.NET MVC 与 MySQl 一起使用。[这](http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL)是一个很好的教程，如何从您的 C# 代码连接到 MySQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:53:39.990

MySQL 有一个 ADO.NET 提供程序（与 MVC 无关） [http://www.mysql.com/products/connector/](http://www.mysql.com/products/connector/)

Devart 是另一家提供名为 dotConnect 的提供商的公司。 [http://www.devart.com/dotconnect/mysql/](http://www.devart.com/dotconnect/mysql/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T12:58:45.013

我尝试通过添加一个新项目（数据模板）来连接数据库，这将加载您创建的数据库。您需要一个连接字符串、一个打开/关闭连接的方法和一个执行 sql 命令的方法。

# mysql - 按平均日期排序（时间戳）

> ID：11969573
> 
> 赞同：0
> 
> 时间：2012-08-15T12:50:19.400
> 
> 标签：mysql, average

非常感谢您对此提供的帮助。

我有一个应用程序，用户创建一个由 4 个朋友组成的团队。应用程序将朋友插入数据库，该表有一个“问题”列和“答案”列，当朋友回答问题时更新最后一个。这个“朋友”表还有一个“date_answer”（时间戳）列，默认值设置为 ON UPDATE CURRENT_TIMESTAMP。

一切正常，我现在要做的是按团队的平均 date_answer 对团队进行排序。我的意思是，第一个团队将是用户首先回答问题的团队。

我希望我能解释清楚。表格如下：

```
Teams
------
id
name
created
*******

Friends
-------
id
name
team_id
question
answer
date_answer 
```

可能是第 1 组这样回答的情况： 朋友 1：凌晨 1 点 朋友 2：凌晨 2 点 朋友 3：凌晨 3 点 朋友 4：下午 3 点

第 2 队： 朋友 1：凌晨 1 点 朋友 2：凌晨 4 点 朋友 3：凌晨 1 点 朋友 4：下午 6 点

获胜者将是第 1 队，因为朋友们回答得更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:38:52.503

据我了解，这样的事情应该有所帮助。我已经包括了第三个团队，其中一个团队成员仍在努力回答这个问题......

```
create table Teams
(
id int unsigned not null auto_increment primary key,
name varchar(50) not null,
created datetime not null
);

create table Friends
(
id int unsigned not null auto_increment primary key,
name varchar(50) not null,
team_id int unsigned not null,
question varchar(100) default null,
answer varchar(100) default null,
date_answer timestamp default CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

insert into Teams (name,created) values ("Team 1",now());
insert into Teams (name,created) values ("Team 2",now());
insert into Teams (name,created) values ("Team 3",now());

insert into Friends (name,team_id,question,answer,date_answer) values ("Bob",1,"What Is Your Name?","Bob",'2012-08-15 01:00:00');
insert into Friends (name,team_id,question,answer,date_answer) values ("Joe",1,"What Is Your Name?","Joe",'2012-08-15 02:00:00');
insert into Friends (name,team_id,question,answer,date_answer) values ("Tim",1,"What Is Your Name?","Tim",'2012-08-15 03:00:00');
insert into Friends (name,team_id,question,answer,date_answer) values ("Tom",1,"What Is Your Name?","Tom",'2012-08-15 15:00:00');

insert into Friends (name,team_id,question,answer,date_answer) values ("Jon",2,"What Is Your Name?","Jon",'2012-08-15 01:00:00');
insert into Friends (name,team_id,question,answer,date_answer) values ("Jim",2,"What Is Your Name?","Jim",'2012-08-15 04:00:00');
insert into Friends (name,team_id,question,answer,date_answer) values ("Josh",2,"What Is Your Name?","Josh",'2012-08-15 01:00:00');
insert into Friends (name,team_id,question,answer,date_answer) values ("Jack",2,"What Is Your Name?","Jack",'2012-08-15 18:00:00');

insert into Friends (name,team_id,question,answer,date_answer) values ("Dave",3,"What Is Your Name?","Jon",'2012-08-15 01:00:00');
insert into Friends (name,team_id,question,answer,date_answer) values ("Dug",3,"What Is Your Name?","Jim",'2012-08-15 04:00:00');
insert into Friends (name,team_id,question,answer,date_answer) values ("Dappy",3,"What Is Your Name?",null,null);

-- Winning team must have an answer from all teams members and have earliest average 
-- date_answer
select t.name as "Winning Team",
sum(case when f.answer is not null then 1 else 0 end) as answerCount,
count(*) as teamCount,
timestamp(avg(f.date_answer)) as averageAnswerDate
from Teams t
left join Friends f on f.team_id = t.id
group by t.name
having answerCount = teamCount
order by averageAnswerDate asc
limit 1; 
```

# c# - 在模式对话框关闭时更新父页面？

> ID：11969574
> 
> 赞同：4
> 
> 时间：2012-08-15T12:50:19.843
> 
> 标签：c#, .net, wpf

我有一个带有网格的窗口。这个窗口有一个按钮，当按下这个按钮时，会显示一个模态对话框。

代码：

```
 private void Edit_Click6S(object sender, RoutedEventArgs e)
    {
        TextEditWindow editWindow = new TextEditWindow();
        editWindow.ShowDialog();
    } 
```

当用户完成此对话框时，将调用以下代码：

```
 Window.Close() 
```

但是父窗口的网格没有更新。有没有办法在子对话框关闭时重新初始化父窗口网格？是这样，怎么样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:56:20.283

由于对话框在关闭之前会阻止执行，因此您可以在`ShowDialog()`调用后直接填充网格：

```
private void Edit_Click6S(object sender, RoutedEventArgs e)
{
    TextEditWindow editWindow = new TextEditWindow();
    editWindow.ShowDialog();
    PopulateGrid();
} 
```

否则你可以处理对话框的 Closed 事件

```
editWindow.Closed += dialog_Closed;    

private void dialog_Closed(object sender, System.EventArgs e)
{
    PopulateGrid();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:18:25.527

更详细地阐述我的评论；这是一个常见问题，可能有点令人困惑。但是使用委托来管理表单之间的数据。这是一些代码。我不能保证它已准备好编译，但它应该有助于向您展示如何正确执行此操作。

```
 public partial class MainWindow : Window
{
    public delegate void MenuClickedDelegate(); 
    public MainWindow()
    {
       InitializeComponent();
    }
    private void MenuItem_Click(object sender, RoutedEventArgs e)
    {
       YourDialog yourDialog = new YourForm();
       yourDialog .MenuClickCallback = new MenuClickedDelegate(this.DoSomething);
       yourDialog .ShowDialog();
    }
    private void DoSomething()
    {
    }
} 
```

然后为您的对话框：

```
public partial class YourDialog  : Window
{
     public MainWindow.MenuClickedDelegate MenuClickCallback;
     public YourDialog()
     {
         InitializeComponent();
     }

     private void Edit_Click6S(object sender, RoutedEventArgs e)
     {
         this.close();
         MenuClickCallback;
     }
} 
```

# c# - 有没有更快的方法从网站下载内容？

> ID：11969575
> 
> 赞同：2
> 
> 时间：2012-08-15T12:50:26.440
> 
> 标签：c#

这是我现在的代码：

```
private string downloadContent() 
        {
            try
            {
                WebRequest request = WebRequest.Create(url);
                request.Method = "GET";
                response = request.GetResponse();
                Stream stream = response.GetResponseStream();
                reader = new StreamReader(stream);
                string content = reader.ReadToEnd();
                return content;
            }
            catch
            {
                return error;
            }
        } 
```

这是网站：

```
http://chatroll.com/testings 
```

当我在聊天中写东西时，我这样做了，这样每隔 n 秒它就会显示我在程序 textBox1 中写的内容，并将其写在我硬盘上的文本文件记录器上。

问题是有时如果我在聊天中输入非常快的内容（例如：hello(enter)、Hi(enter)、Daniel(enter)），有时 Hi 不会在我的程序中显示。我认为我输入的内容阅读速度不够快。

有没有更快的方法来下载页面源并进行处理？也许我下载它的方式不是那么快？

你可以在这里看到我的项目：

[https://skydrive.live.com/redir?resid=3B8A7D9F66FF985B!171&authkey=!AFO6EmoF38MtkKQ](https://skydrive.live.com/redir?resid=3B8A7D9F66FF985B!171&authkey=!AFO6EmoF38MtkKQ)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:56:52.357

为什么不使用更高级别的 WebClient？我不知道它是否更快，但至少它更不容易出错。您需要注意[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)释放任何资源（套接字等）的声明。

```
using (var downloader = new WebClient())
{
    string result = downloader.DownloadString(url);
} 
```

* * *

关于性能的编辑：如果 Web 服务器支持 GZIP 等压缩，您可能需要使用它：

1.  设置[标题](http://msdn.microsoft.com/en-us/library/system.net.webclient.headers.aspx)：

    ```
    downloader.Headers["Accept-Encoding"] = "gzip"; 
    ```

2.  用于[`WebClient.DownloadData`](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)将压缩响应加载到`byte[]`.

3.  使用解压[`GZipStream`](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)

* * *

另一个编辑：您的 BackgroundWorker.DoWork 看起来很糟糕：您有很多冗余代码、大量不必要的循环等。我*强烈建议您在*[Code Review](http://codereview.stackexchange.com)中提出一个问题并发布该方法。顺便说一句，您每次迭代都会调用*两次下载代码。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:33:49.380

*只是一些想法*

1-设置`request.Proxy`为空。这可能有助于加快速度。

2- 在函数中`Conditions`使用`HttpUtility.HtmlDecode`而不是字符串操作

3- 不要使用字符串操作来解析 html（如 in`GetProfileNames`或`GetTextFromProfile`）。请改用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。例如：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(page);
var text = doc.DocumentNode.Descendants("img")
    .Where(x => x.Attributes["class"].Value="????????")
    .Select(x=>x.InnerText)
    .ToArray(); 
```

# sql - 通过正则表达式获取 [ ] 和 [ ] 之外的值之间的值

> ID：11969579
> 
> 赞同：1
> 
> 时间：2012-08-15T12:50:36.217
> 
> 标签：sql, regex, string, plsql

我有这样的字符串：

```
var = This a string, [This is another string] 
```

我想让它们在 PLSQL 中分解成这样的东西

```
var1 = This is string
var2 = This is another string 
```

如果如下所示，则不应包含逗号：

```
, [ 
```

基本上这决定是否有另一个字符串。

我该怎么做？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:54:02.697

您可以使用[`SUBSTR`](http://psoug.org/reference/substr_instr.html)和的组合[`INSTR`](http://psoug.org/reference/substr_instr.html)来拆分字符串。例如，要获取第一个字符串，您可以使用以下内容：

```
SELECT NVL(SUBSTR(var, 1, INSTR(var, ',') - 1), var)
FROM dual; 
```

也就是说，找到分隔符 ( `INSTR(var, ',')`) 的索引，然后使用它`SUBSTR`来捕获直到该索引的所有内容。同样适用于第二个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T14:42:02.917

我认为这会给你想要的，尽管我对你的解析要求不是 100% 清楚。

```
var1 := regexp_replace( var, '^([^[,]*).*$', '\1')
var2 := regexp_replace( var, '^[^[]*(\[([^]]*)\])?.*$', '\2') 
```

这是一个测试正则表达式函数的[sql fiddle 。](http://www.sqlfiddle.com/#!4/d41d8/2403)

我也不确定正则表达式解决方案与其他方法的性能。

# java - 如何通过单击超链接 (Firefox) 运行 jar 文件

> ID：11969586
> 
> 赞同：0
> 
> 时间：2012-08-15T12:51:02.433
> 
> 标签：java, firefox, browser, jar

我习惯于在我的服务器上超链接到一个 jar 文件，然后下载并打开它，而不需要进一步的用户端操作。

```
<a href="demo.jar">Run Demo</a>. 
```

使用 Firefox（当前版本 14）我只能手动存储和运行它。我试图通过 为 jar 文件类型设置 JDK `Firefox -> Preferences- -> Contents -> Runnable Jar`，但随后`javaw.exe demo.jar`被调用。显然应该是`javaw.exe -jar demo.jar`，但我没有找到设置此参数的选项。

如何通过单击超链接直接运行 jar 文件？

**编辑**：我有 50 多个这样的 jar 文件，使用 WebStart 不是一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:01:29.610

另一种选择是创建 jar 的快捷方式 (.lnk)。然后可以将快捷方式的文件路径添加为超链接。这样，您还可以通过修改快捷方式属性的目标字段为 Java 应用程序指定附加参数（参数）。请参阅快捷方式属性中的以下示例设置。

目标：C:\WINDOWS\system32\javaw.exe -Xmx900m -jar demo.jar

开始于：W:\DemoFolder

唯一的问题是某些 Windows 7 (IE9) 用户无法使用超链接启动应用程序，因此更喜欢使用快捷方式。我刚刚开始调查这个问题。但也许其他人已经知道问题可能是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:55:50.173

从一个bat文件（现成的工具）制作另一个exe文件（假设ABC.exe），让它成为中间人，它调用

```
java -jar %1 
```

而不是 javaw.exe 将其设置为 ABC.exe。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T06:39:14.393

我自己找到了一个可行的解决方案。仅限 Windows，但在其他操作系统下可能有类似的解决方案。

在 Windows 下，只需通过 . 设置`explorer.exe`jar 文件类型的设置`Firefox -> Preferences -> Contents -> Runnable Jar`。点击超链接时，将直接启动 Jar 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T12:59:02.453

为什么不考虑让您的应用程序使用 Java Web Start 来运行呢？

这可能需要更多的工作，但如果您要从网络开始。imo感觉像是一个更正确的解决方案。

以下是一些可能有帮助的初步阅读： [http ://www.oracle.com/technetwork/articles/javase/index-135962.html](http://www.oracle.com/technetwork/articles/javase/index-135962.html)

# android - Android：OnClickListener 抛出 NullPointerException

> ID：11969587
> 
> 赞同：0
> 
> 时间：2012-08-15T12:51:06.607
> 
> 标签：android

我有两个活动。在我的主要活动中，我正在创建一个启动另一个活动的意图：

```
Intent intent = new Intent(context, Settings.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这是应该启动的第二个 Activity 的代码：

```
public class Settings extends Activity {

    Button settingsBack;
    //Some other layout resources
    final Context context = this;   //Creating reference to this Activity Context

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.help);

        //References to layout resources
        settingsBack = (Button) findViewById(R.id.settingsBack);
        //...
        //-----

        //Assigning listeners to Buttons
        settingsBack.setOnClickListener(listenerBack);
        //-----
    }

    //Button listeners definitions
    final OnClickListener listenerBack = new OnClickListener() {

        public void onClick(View v) {
            finish();
        }

    };    
    //-----

} 
```

但是当第二个 Activity 应该启动时，我在该行收到 NullPointerException，我将 Listener 分配给 Button。我试图清理项目以防 R 文件没有正确生成，但它没有解决问题。第二个活动在清单文件中声明：

```
<activity android:name=".Settings" android:label="@string/app_name"></activity> 
```

我确定这只是某个地方的一个简单的小问题，但我找不到它:(感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:59:42.997

我一直这样做，我将一个活动`onCreate`方法复制到一个新活动，但忘记更改 .xml 文件中的 XML 文件`setContentView`。

我猜这个活动被称为**Settings**，但是 XML 被称为**help**你可能已经做了同样的事情！？

# java - 请求.get参数

> ID：11969588
> 
> 赞同：-6
> 
> 时间：2012-08-15T12:51:12.797
> 
> 标签：java

```
int no=request.getParameter(Integer.parseInt("rollnumber")); 
```

> 描述资源路径位置类型ServletRequest类型中的方法getParameter(String)不适用于参数(int) Controller.java /SecondApp/src 第21行Java问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:53:50.480

首先，请编辑您的问题标题，使其成为一个实际问题。

其次，你`parseInt()`打错地方了。
正确的语法是：

```
int no= Integer.parseInt(request.getParameter("rollnumber")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:53:13.273

```
int no=Integer.parseInt(request.getParameter("rollnumber")); 
```

# asp.net-mvc - ViewBag ViewData 和 Session 值无法从视图中访问

> ID：11969594
> 
> 赞同：0
> 
> 时间：2012-08-15T12:51:37.143
> 
> 标签：asp.net-mvc, jquery, viewbag

我尝试使用上述所有方法在控制器方法中存储一个值，然后调用局部视图。

这里的问题是我之前存储的值被刷新了。

我需要坚持这个价值。我应该怎么办？

# css - 如何指定可以匹配给定选择器的多个类？

> ID：11969595
> 
> 赞同：1
> 
> 时间：2012-08-15T12:51:51.973
> 
> 标签：css, css-selectors

我正在尝试在我的 CSS (wink) 中练习 DRY，但我一直坚持如何解决这个问题。

我如何减少这种情况：

```
table.shipmentItemList TD.title,
table.shipmentItemList TD.author,
table.shipmentItemList TD.options {
    font-size: 1.0em;
    font-weight: normal;
} 
```

对于这样的事情：

```
table.shipmentItemList TD.title, TD.author, TD.options {
    font-size: 1.0em;
    font-weight: normal;
} 
```

或者更好的是：

```
table.shipmentItemList TD .title, .author, .options {
    font-size: 1.0em;
    font-weight: normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:54:10.593

我认为在这种情况下，您只能使用 SASS：[http ://sass-lang.com/](http://sass-lang.com/)

标准 CSS 不允许您尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:55:25.973

如果您想在服务器上进行，请查看[LESS](http://lesscss.org/)或[LESS PHP 。](http://leafo.net/lessphp/)使用香草 CSS 无法实现您的要求。

您的示例如下所示：

```
table.shipmentItemList {
    td {
        &.title, &.author, &.options {
            font-size: 1.0em;
            font-weight: normal;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:56:24.217

看看 less.js 它会让你做这样的事情：

```
table.shipmentItemList{
  TD.title, TD.author, TD.options {
    font-size: 1.0em;
    font-weight: normal;
  }
} 
```

# svn - 如何在 PowerShell 中抑制标准错误输出？

> ID：11969596
> 
> 赞同：30
> 
> 时间：2012-08-15T12:51:52.533
> 
> 标签：svn, powershell, io-redirection

在自动执行一些 SVN 任务的 PowerShell 脚本中，我具有以下功能：

```
function SvnUrlExists($url)
{
  svn info $url | out-null 2>&1
  return $?
} 
```

由于这明确测试是否存在某些 SVN 存储库 URL，因此我对任何错误输出都不感兴趣。但是，尽管我`stderr`在 PowerShell 中发现了所有关于重定向的建议，建议`2>&1`将其重定向到`stdout`，***但这仍然会输出一条错误消息***：

```
svn：警告：W170000：修订版 26762 中不存在 URL 'blahblah'
svn: E200009: 无法显示所有目标的信息，因为某些目标不存在

```

不幸的是，这严重扰乱了我的脚本的输出。

我在做什么错，我应该如何抑制这个错误输出？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-07-28T15:18:51.793

如果您只想抑制标准错误，请使用**：**

```
svn info $url 2>$null 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-15T12:57:44.967

以防万一其他人像我一样搜索类似的术语：

在我用前额撞了几个小时之后，当然我在这里发布问题后几分钟内就找到了解决方案：

```
svn info $url 2>&1 | out-null 
```

这就像一个魅力。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-20T16:35:00.307

也可以这样做：

```
svn info $url *> $null 
```

请参阅*[在 PowerShell 中抑制控制台输出](https://stackoverflow.com/q/18780956/#comment27698289_18782669)*

[about_Redirection](http://technet.microsoft.com/library/hh847746)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-15T14:45:54.807

投票的答案对我来说会产生错误。解决方案最终如下：

```
cmd /c "MyProgram MyArguments 2>&1" | Out-Null 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-09-11T15:04:14.743

**tl;博士**

```
function SvnUrlExists($url)
{

  # Suppress all output streams (external stdout and stderr in this case)
  # To suppress stderr output only, use 2>$null
  svn info $url *>$null 

  # For predictable results with external programs, 
  # infer success from the *process exit code*, not from the automatic $? variable.
  # See https://github.com/PowerShell/PowerShell/issues/10512
  $LASTEXITCODE -eq 0
} 
```

* * *

您[自己的答案](https://stackoverflow.com/a/11969703/45375)有效地解决了**重定向问题**。

[Steven Penny 的回答](https://stackoverflow.com/a/24331889/45375)提出`*>$null`，即抑制*所有*输出流作为一种方便的替代方案 - 它消除了`Out-Null`我通常建议替换的需要`$null = ...`- 请参阅[此答案](https://stackoverflow.com/a/55047179/45375)。

但是，您的问题中的代码还有**另一个问题：**

虽然它可能适用于您的特定命令，**`$?`但不幸的是，它*并不是*外部程序是否成功的可靠指标**-请改为**使用`$LASTEXITCODE -eq 0`**，因为 - 由于 GitHub 上报告的 PowerShell Core 7.0.0-preview.3 的错误[在这里](https://github.com/PowerShell/PowerShell/issues/10512)-即使是（明确表示成功）`$?`也可以最终反映。`$false``$LASTEXITCODE``0`

*   *更新*：如果并且当命名的 pre-v7.2[实验功能](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Experimental_Features)`PSNotApplyErrorActionToStderr`成为官方功能时，此问题将消失 - 请参阅[此答案](https://stackoverflow.com/a/66726535/45375)以获取更多信息。

* * *

至于**你**在你的问题中尝试了什么：

```
svn info $url | out-null 2>&1  # WRONG 
```

*   只有*成功*输出被发送到管道（来自外部程序的*stdout输出被发送到 PowerShell 的成功输出*[流](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_redirection)）。

*   [重定向](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_redirection)，例如`2>&1`作用于管道中的*单个命令，而不是**整个*管道。

*   因此，如果`svn info $url`产生*stderr*输出，它会直接打印到*主机*（控制台） -`Out-Null`永远不会看到它。

# javascript - 我的内容使用 Javascript 淡入后如何加载页脚？

> ID：11969606
> 
> 赞同：0
> 
> 时间：2012-08-15T12:52:32.047
> 
> 标签：javascript, function, callback, fadein

我的网站上的缩略图在加载时一次淡出。我想知道如何让页脚出现在我的缩略图之后，所以它不会立即显示并随着图像淡入而被推下。

经过一些初步研究后，我意识到我需要为我的函数添加某种回调，所以我在其中放置了一个警报，但由于某种原因，它在图像淡入后没有弹出。

```
<script type="text/javascript">

    $(window).load(function() {
        var images = $('figure');
        var imageCount = images.length;
        var count = 0;

        var fadeImages = function(image, callback) {
            $(image).fadeIn(170, function() {
                // Increase the count.
                count++;
                if (images[count]) {
                    // Pass the callback to the recursively called function.
                    fadeImages(images[count], callback);
                }
            });

            // Make sure that we're only calling the callback once the images have all loaded.
            if (typeof callback === 'function' && count === imageCount) { 
                callback.call(this); // brings the scope to the callback
            }
        };

        fadeImages(images[0], function() {
            alert('Load footer');  // your callback here
        });
    });
 </script> 
```

[你会在我的网站上看到](http://edharrisondesign.com/portfolio-site/)我的意思。

我的主要问题是：

1）如何让回调函数在图像加载后运行？

2）有人可以指出我正确的方向，写什么让页脚在图像消失后出现？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:59:08.887

您需要在所有图像上绑定称为 onload 的回调，例如您有 10 个图像，使用 jquery：

```
var imagesLoaded = 0;
    // alter this selector to match only your images you want to wait for
    $("img").load(function() {
       imagesLoaded++;
       if(imagesLoaded == 10) {
          // all 10 images are loaded, show footer
       }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:02:24.293

仅在所有图像加载后才尝试调用回调。

**编辑：** [JSFiddle](http://jsfiddle.net/pdJfe/1/)显示此代码在运行中。

```
var images = $('figure');
var imageCount = images.length;
var count = 0;

var fadeImages = function(image, callback) {
    $(image).fadeIn(170, function() {
        // Increase the count.
        count++;
        if (images[count]) {
            // Pass the callback to the recursively called function.
            fadeImages(images[count], callback);
        }
    });

    // Make sure that we're only calling the callback once the images have all loaded.
    if (typeof callback === 'function' && count === imageCount - 1) { 
        callback.call(this); // brings the scope to the callback
    }
};

fadeImages(images[0], function() {
    alert('Load footer');  // your callback here
}); 
```

# php - 重新排序/重新排列多维数组

> ID：11969608
> 
> 赞同：1
> 
> 时间：2012-08-15T12:52:48.343
> 
> 标签：php, arrays, object, multidimensional-array, grouping

我有一组包含买卖交易的数据。我正在尝试根据日期对交易进行分组，然后将买卖合并到他们自己的组中。我的输入如下：

```
 Array
(
    [0] => stdClass Object
        (
            [action] => Buy
            [date] => 2011-02-14
            [instrument] => USD/CAD
            [units] => 2000.0
            [gbp_amount] => 12.4869
            [costs] => 0
            [duty] => 0
        )

    [1] => stdClass Object
        (
            [action] => Sell
            [date] => 2011-02-14
            [instrument] => USD/CAD
            [units] => 2000.0
            [gbp_amount] => 14.62840335
            [costs] => 0
            [duty] => 0
        )

    [2] => stdClass Object
        (
            [action] => Buy
            [date] => 2011-02-15
            [instrument] => USD/CAD
            [units] => 4000.0
            [gbp_amount] => 24.80064
            [costs] => 0
            [duty] => 0
        )

    [3] => stdClass Object
        (
            [action] => Sell
            [date] => 2011-02-15
            [instrument] => USD/CAD
            [units] => 4000.0
            [gbp_amount] => 30.32498256
            [costs] => 0
            [duty] => 0
        )

    [4] => stdClass Object
        (
            [action] => Buy
            [date] => 2011-02-21
            [instrument] => USD/CAD
            [units] => 4000.0
            [gbp_amount] => 24.63168
            [costs] => 0
            [duty] => 0
        )

    [5] => stdClass Object
        (
            [action] => Sell
            [date] => 2011-02-21
            [instrument] => USD/CAD
            [units] => 4000.0
            [gbp_amount] => 26.633004
            [costs] => 0
            [duty] => 0
        )

    [6] => stdClass Object
        (
            [action] => Buy
            [date] => 2011-02-21
            [instrument] => USD/CAD
            [units] => 4000.0
            [gbp_amount] => 24.63168
            [costs] => 0
            [duty] => 0
        )

    [7] => stdClass Object
        (
            [action] => Sell
            [date] => 2011-02-22
            [instrument] => USD/CAD
            [units] => 4000.0
            [gbp_amount] => 27.0270324
            [costs] => 0
            [duty] => 0
        )

    [8] => stdClass Object
        (
            [action] => Buy
            [date] => 2011-02-21
            [instrument] => USD/CAD
            [units] => 2000.0
            [gbp_amount] => 12.31584
            [costs] => 0
            [duty] => 0
        )

    [9] => stdClass Object
        (
            [action] => Sell
            [date] => 2011-02-22
            [instrument] => USD/CAD
            [units] => 2000.0
            [gbp_amount] => 13.88811768
            [costs] => 0
            [duty] => 0
        )

    [10] => stdClass Object
        (
            [action] => Buy
            [date] => 2011-04-21
            [instrument] => USD/CAD
            [units] => 1000.0
            [gbp_amount] => 12.09882
            [costs] => 0
            [duty] => 0
        )

    [11] => stdClass Object
        (
            [action] => Sell
            [date] => 2011-04-22
            [instrument] => USD/CAD
            [units] => 1000.0
            [gbp_amount] => 13.87129713
            [costs] => 0
            [duty] => 0
        )

    [12] => stdClass Object
        (
            [action] => Buy
            [date] => 2012-02-01
            [instrument] => USD/CAD
            [units] => 13.5
            [gbp_amount] => 0.8517069
            [costs] => 0
            [duty] => 0
        )

    [13] => stdClass Object
        (
            [action] => Sell
            [date] => 2012-02-01
            [instrument] => USD/CAD
            [units] => 13.5
            [gbp_amount] => 0.8517069
            [costs] => 0
            [duty] => 0
        )

    [14] => stdClass Object
        (
            [action] => Buy
            [date] => 2012-02-01
            [instrument] => USD/CAD
            [units] => 27.0
            [gbp_amount] => 0.68136552
            [costs] => 0
            [duty] => 0
        )

    [15] => stdClass Object
        (
            [action] => Sell
            [date] => 2012-02-01
            [instrument] => USD/CAD
            [units] => 27.0
            [gbp_amount] => 0.68136552
            [costs] => 0
            [duty] => 0
        )

    [16] => stdClass Object
        (
            [action] => Buy
            [date] => 2012-02-01
            [instrument] => USD/CAD
            [units] => 13.5
            [gbp_amount] => 0.34068276
            [costs] => 0
            [duty] => 0
        )

    [17] => stdClass Object
        (
            [action] => Sell
            [date] => 2012-02-01
            [instrument] => USD/CAD
            [units] => 13.5
            [gbp_amount] => 0.34068276
            [costs] => 0
            [duty] => 0
        )

    [18] => stdClass Object
        (
            [action] => Buy
            [date] => 2012-02-01
            [instrument] => USD/CAD
            [units] => 13.5
            [gbp_amount] => 0.34068276
            [costs] => 0
            [duty] => 0
        )

    [19] => stdClass Object
        (
            [action] => Sell
            [date] => 2012-02-01
            [instrument] => USD/CAD
            [units] => 13.5
            [gbp_amount] => 0.34068276
            [costs] => 0
            [duty] => 0
        )

) 
```

我希望实现的输出是这样的：

```
 Array
(
    [2011-02-14] => stdClass Object
            [Buy] => Array
                [0] = Array
                    (
                        [instrument] => USD/CAD
                        [units] => 2000.0
                        [gbp_amount] => 12.4869
                        [costs] => 0
                        [duty] => 0
                    )

            [Sell] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 2000.0
                        [gbp_amount] => 14.62840335
                        [costs] => 0
                        [duty] => 0
                    )

    [2011-02-15] => stdClass Object
            [Buy] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 4000.0
                        [gbp_amount] => 24.80064
                        [costs] => 0
                        [duty] => 0
                    )

            [Sell] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 4000.0
                        [gbp_amount] => 30.32498256
                        [costs] => 0
                        [duty] => 0
                    )

    [2011-02-21] => stdClass Object
            [Buy] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 4000.0
                        [gbp_amount] => 24.63168
                        [costs] => 0
                        [duty] => 0
                    )
                [1] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 4000.0
                        [gbp_amount] => 24.63168
                        [costs] => 0
                        [duty] => 0
                    )

            [Sell] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 4000.0
                        [gbp_amount] => 26.633004
                        [costs] => 0
                        [duty] => 0
                    )

    [2011-02-22] => stdClass Object
            [Buy] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 2000.0
                        [gbp_amount] => 12.31584
                        [costs] => 0
                        [duty] => 0
                    )

            [Sell] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 4000.0
                        [gbp_amount] => 27.0270324
                        [costs] => 0
                        [duty] => 0
                    )

                [1] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 2000.0
                        [gbp_amount] => 13.88811768
                        [costs] => 0
                        [duty] => 0
                    )

    [2011-04-21] => stdClass Object
            [Buy] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 1000.0
                        [gbp_amount] => 12.09882
                        [costs] => 0
                        [duty] => 0
                    )

    [2011-04-22] => stdClass Object
            [Sell] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 1000.0
                        [gbp_amount] => 13.87129713
                        [costs] => 0
                        [duty] => 0
                    )

    [2012-02-01] => stdClass Object
            [Buy] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 13.5
                        [gbp_amount] => 0.8517069
                        [costs] => 0
                        [duty] => 0
                    )

                [1] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 27.0
                        [gbp_amount] => 0.68136552
                        [costs] => 0
                        [duty] => 0
                    )

                [2] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 13.5
                        [gbp_amount] => 0.34068276
                        [costs] => 0
                        [duty] => 0
                    )

                [3] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 13.5
                        [gbp_amount] => 0.34068276
                        [costs] => 0
                        [duty] => 0
                    )

            [Sell] => Array
                [0] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 13.5
                        [gbp_amount] => 0.8517069
                        [costs] => 0
                        [duty] => 0
                    )

                [1] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 27.0
                        [gbp_amount] => 0.68136552
                        [costs] => 0
                        [duty] => 0
                    )

                [2] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 13.5
                        [gbp_amount] => 0.34068276
                        [costs] => 0
                        [duty] => 0
                    )

                [3] => Array
                    (
                        [instrument] => USD/CAD
                        [units] => 13.5
                        [gbp_amount] => 0.34068276
                        [costs] => 0
                        [duty] => 0
                    )

) 
```

我尝试使用 foreach 循环重新排列数组，但除了让交易按日期列出之外，我几乎没有成功，但我无法根据买入/卖出列出这些。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:04:33.840

这应该这样做：

```
$res = array();
foreach ($items as $item) {
    $tmp = (array)$item;
    unset($tmp['date'], $tmp['action']);
    $res[$item->date][$item->action][] = $tmp;
}
print_r($res); 
```

它将每个对象转换为一个数组，使用（然后删除）日期和操作字段作为结果数组的键，瞧 :)

# java - Junit mockito when(..).thenReturn() 抛出 NullPointerException

> ID：11969609
> 
> 赞同：7
> 
> 时间：2012-08-15T12:52:49.293
> 
> 标签：java, unit-testing, junit, mockito

谁能解释我下面
要测试的场景代码
UserTransaction.java

```
@Override
public ServiceResponse<User> get(String name) {
    ServiceResponse<User> response = new ServiceResponse<User>();
    List<Map<String, Object>> exp = new ArrayList<Map<String, Object>>();
    Map<String, Object> map = new HashMap<String, Object>();
    map.put("expression", "eq");
    map.put("property", "name");
    map.put("value", name);
    exp.add(map);
    List<User> users = userDao.getByCriteria(exp);
    if (!users.isEmpty()) {
        response.setResponse(users.get(0));
    } else {
        response.setResponse(null);
    }
    return response;
} 
```

用户道.java

```
public List<User> getByCriteria(List<Map<String, Object>> exp) {
  DetachedCriteria criteria = DetachedCriteria.forClass(User.class);
  for (Integer i=0;i<exp.size();i++){
    String expression = (String) exp.get(i).get("expression");
    String property = (String) exp.get(i).get("property");
    if(expression.equals("eq"){
       criteria.add(Restrictions.eq(property,exp.get(i).get("value")));
    }
  }
  return hibernateTemplate.findByCriteria(criteria);
 } 
```

UserTransactionTest.java

```
private UserTransaction userTransactions = new UserTransaction();
private UserDao userDao = mock(UserDao.class);

@Test
public void testGet() {
   User user = new User();
   user.setName("Raman");
    try {
        when(userDao.getByCriteria(anyList())).thenReturn(user);
    } catch (Exception e) {
        e.printStackTrace();
    }
    ServiceResponse<User> response = userTransactions.get("raman");
    User result = response.getResponse();
    assertEquals("Raman", result.getName());
    assertEquals(0, response.getErrors().size());
} 
```

工作正常。

但是我没有传递“anyList()”，而是传递了一个用户定义的列表“myList”

```
List<Map<String,Object>> myList = new ArrayList<Map<String,Object>>();
Map<String,Object> map = new HashMap<String,Object>();
map.put("expression","eq");
map.put("property","name");
map.put("value","raman");
myList.add(map);
when(userTransactions.getByCriteria(myList)).thenReturn(user); 
```

投掷`NullPointerException`线`assertEquals()`。为什么？如果`anyList()`给出，实际会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-05T14:15:06.667

我相信你现在已经解决了你的问题，但如果有人偶然发现同样的问题，答案是：

在您提供的代码中，您没有使用`myList`您创建的模拟。该`get()`方法总是调用`userDao.getByCriteria(exp)`局部变量。

这就是为什么`anyList()`有效，而`myList`无效。

如果您**确实**想测试表达式，`List<Map<String,Object>> exp`则应该是您的类的成员，而不是局部变量：

```
public class UserTransaction {
    private List<Map<String,Object>> exp;

    public UserTransaction() {
        // creating a default exp value
        Map<String, Object> map = new HashMap<String, Object>();
        map.put("expression", "eq");
        map.put("property", "name");
        map.put("value", name);
        exp.add(map);
    }

    // getters and setters for exp

    public ServiceResponse<User> get(String name) {
        ServiceResponse<User> response = new ServiceResponse<User>();
        List<User> users = userDao.getByCriteria(exp);
        if (!users.isEmpty()) {
            response.setResponse(users.get(0));
        } else {
            response.setResponse(null);
        }
        return response;
    }
} 
```

在你的测试中：

```
private UserTransaction userTransactions = new UserTransaction();
private UserDao userDao = mock(UserDao.class);

@Test
public void testGet() {
    User user = new User();
    user.setName("Raman");

    // creating a custom expression
    List<Map<String,Object>> myList = new ArrayList<Map<String,Object>>();
    Map<String,Object> map = new HashMap<String,Object>();
    map.put("expression","eq");
    map.put("property","name");
    map.put("value","raman");
    myList.add(map);

    // replacing exp with the list created
    userTransactions.setExp(myList);
    // return user when calling getByCriteria(myList)
    when(userDao.getByCriteria(myList)).thenReturn(user);

    ServiceResponse<User> response = userTransactions.get("raman");
    User result = response.getResponse();
    assertEquals("Raman", result.getName());
    assertEquals(0, response.getErrors().size());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T13:17:29.723

如果您的代码是完整的（我怀疑它可能不完整），那么您还没有指定包含该`get()`方法的模拟对象。这应该出现在对`when(...)`

我期待这样的代码......

```
UserDao mockDao = mock(UserDao.class);

when(mockDao.get(list)).thenReturn(users); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:01:08.950

我认为 anyList() 是一种您正在模拟的方法，而 list 不是一种方法，您能否发布您正在编写此测试用例的源代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T23:26:34.773

首先，您不是在测试 UserDao。

接下来，anyList() 生成 mockito 匹配器，您应该将 matcher 传递给 userDao.getByCriteria 以执行某些操作，因此，您应该使用 Matchers.same(your list) 或 Matchers.eq(your list)。

出现异常是因为默认情况下 Mockito 创建了很好的模拟，并且默认情况下它们在任何意外的方法调用上返回 null。

# iphone - iOS - 如何正确访问数组中的对象属性？

> ID：11969610
> 
> 赞同：1
> 
> 时间：2012-08-15T12:52:52.840
> 
> 标签：iphone, ios, properties, nsarray, ivar

**设置：**

`ViewController`持有一个`MyArray`来自 的对象`PersonClass`。 `PersonClass`只有两个属性：`name`和`age`。

**问题：**

当我想`name`从第一个对象中读出一个属性时，`MyArray`这样做的正确方法是什么？

我是否必须临时创建一个`PersonClass`这样的实例？

```
PersonClass *tmp = [PersonClass alloc] init];
tmp = [MyArray objectAtIndex:0];

NSLog(@"%@", tmp.name); 
```

或者我可以直接参考`properties`中`objects`的`MyArray`吗？

像这样的东西：

```
 NSLog(@"%@", [self.contactsArray objectAtIndex:0].name); // not working 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T13:08:08.727

我强烈建议使用

```
[(PersonClass *)[MyArray objectAtIndex:0] name] 
```

而不是看似干净，但麻烦的形式

```
[[MyArray objectAtIndex:0] name] 
```

有两个原因。首先，对于读者来说，在哪个对象上调用了什么是明确的。其次，它对**编译器来说是明确的**——如果两个方法共享相同的名称，但返回值不同，事情就会变得很糟糕。Cocoa With Love 的 Matt Gallagher[对这个问题有很好的解释。](http://cocoawithlove.com/2011/06/big-weakness-of-objective-c-weak-typing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:01:45.347

如果您希望或需要该类型，请像这样引入该类型：

```
PersonClass * person = [array objectAtIndex:0]; 
```

*为了可读性*，我经常这样做，因为包含文件的声明否则会破坏事情。

请注意，从值分配 objc 变量时**不需要**`id`强制转换。

> 我必须临时创建一个 PersonClass 的实例吗？

不。您编写的程序会创建一个从未使用过的临时文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:55:33.090

你可以这样做

```
PersonClass *tmp = (PersonClass *) [MyArray objectAtIndex:0];
NSLog(@"%@",tmp.name); 
```

或者我们可以把它放在一行上：

```
NSLog(@"%@",((PersonClass *)[MyArray objectatIndex:0]).name); 
```

`NSLog(@"%@", [self.contactsArray objectAtIndex:0].name);`不起作用的原因 是你没有告诉编译器是什么类型的对象`[self.contactsArray objectAtIndex:0]`。因为它不知道数组中有什么类型的对象，所以它无法知道它有一个`name`属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:56:22.090

```
((PersonClass *)[MyArray objectAtIndex:0]).name 
```

要不就`[[MyArray objectAtIndex:0] name]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T12:57:33.793

> 我是否必须像这样临时创建 PersonClass 的实例？
> 
> ```
> PersonClass *tmp = [PersonClass alloc] init];
> tmp = [MyArray objectAtIndex:0];
> 
> NSLog(@"%@", tmp.name); 
> ```

不，只需使用

```
PersonClass *tmp = (PersonClass *)[myArray objectAtIndex:0];
NSLog(@"%@", tmp.name); 
```

由于您从 myArray 获得的对象是（或应该是！）在添加到数组之前已经分配和初始化。数组中的事物是指向对象的指针。这就是你正在传递的东西。你必须告诉它你在那里拥有哪种类型的对象（演员表是`(PersonClass *)`），因为 NSArray 只存储 NSObjects。

你也可以在一行中这样做

`((PersonClass *)[myArray objectAtIndex:0]).name;`

# email - 带有脚本的 Outlook 规则不断重复

> ID：11969615
> 
> 赞同：3
> 
> 时间：2012-08-15T12:53:04.347
> 
> 标签：email, vba, vbscript, outlook, gmail

我正在尝试在 Outlook 中运行一条规则，该规则将转发进入特定帐户的任何新邮件，这将更改主题行并将邮件转发到不同的帐户。

我已经设置了一个规则，在邮件到达后应用该规则，它有一个附件，并且在这台机器上只运行 Project1.ThisOutlookSession.SubjForward 除非邮件正文包含“某些文本”

脚本看起来像这样

```
Sub SubjForward(Item As Outlook.MailItem)

Item.Subject = "New Subject"
Item.Save

Set myForward = Item.Forward
myForward.Recipients.Add "forwardmail@domain.com"

myForward.DeleteAfterSubmit = True

myForward.Send

End Sub 
```

该规则可以将邮件转发到新地址，但它会继续转发相同的电子邮件，直到我终止脚本。

有人知道我哪里出错了吗？

**我在下面的评论中更新了更多细节，谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T16:15:58.643

尝试使用 ItemAdd 事件处理程序，这样您的脚本只会在新的“项目”添加到您的收件箱时运行，即。当您收到邮件时。

或者，我真的看不到需要使用 VBA 吗？你可以在outlook上设置一个规则来转发消息吗？

问候保罗

# javascript - 具有 UpLoad 功能的录音机 - 为什么“var myRecording”不包含任何录音？

> ID：11969618
> 
> 赞同：0
> 
> 时间：2012-08-15T12:53:13.900
> 
> 标签：javascript, file-upload, makefile, audio-recording, titanium-mobile

我正在编写一个简单的音频录制代码，该代码获取录制的音频并让另一个上传功能 - 将其上传到 Web 服务器。该代码基于 KitchenSinks 录音机。问题是“var myRecording”似乎不包含录音。我的代码遗漏了什么？如何获取录制文件，存储它，然后再次获取并上传？那里有录音机/上传器的例子吗？这是我的一些代码：

```
var myRecording = null;

var buttonUpload = Titanium.UI.createButton({
    title: 'Upload Recording'
});

Titanium.Media.audioSessionMode = Ti.Media.AUDIO_SESSION_MODE_PLAY_AND_RECORD;
var recording = Ti.Media.createAudioRecorder();

recording.compression = Ti.Media.AUDIO_FORMAT_ULAW;
recording.format = Ti.Media.AUDIO_FILEFORMAT_WAVE;

Ti.Media.addEventListener('recordinginput', function(e) {
    Ti.API.info('Input availability changed: '+e.available);
    if (!e.available && recording.recording) {
        b1.fireEvent('click', {});
    }
});

var file;
var sound;

var b1 = Titanium.UI.createButton({
    title:'Start Recording',
    width:200,
    height:40,
    top:20
});

b1.addEventListener('click', function(){
    if (recording.recording)
    {
        file = recording.stop();
        var f = Ti.Filesystem.getFile(file.path);
        var m = f.move(Ti.Filesystem.applicationDataDirectory + '/audio.m4a');
        b1.title = "Make New Recording";
        b2.show();
        pause.hide();
    }
    else
    {
        if (!Ti.Media.canRecord) {
            Ti.UI.createAlertDialog({
                title:'Error!',
                message:'No microphone is found.'
            }).show();
            return;
    }
        b1.title = "Stop Recording";
        recording.start();
        b2.hide();
        pause.show();       
    }
});
win.add(b1);

var pause = Titanium.UI.createButton({
    title:'Pause Recording',
    width:200,
    height:40,
    top:80
});
win.add(pause);
pause.hide();

pause.addEventListener('click', function(){
    if (recording.paused) {
        pause.title = 'Pause Recording';
        recording.resume();
    }
    else {
        pause.title = 'Continue Recording';
        recording.pause();
    }
});

var b2 = Titanium.UI.createButton({
    title:'Play recording',
    width:200,
    height:40,
    top:80
});

win.add(b2);
b2.hide();
b2.addEventListener('click', function(){
    if (sound && sound.playing)
    {
        sound.stop();
        sound.release();
        sound = null;
        b2.title = 'Play recording';
    }
    else
    {
        Ti.API.info("recording file size: "+file.size);
        sound = Titanium.Media.createSound({sound:file});
        if(Ti.Platform.osname == 'iphone'){
        win.rightNavButton = buttonUpload;
        }else{
        buttonUpload.right = 20;
        buttonUpload.top = 20;
        }
        sound.addEventListener('complete', function(){
            b2.title = 'Play recording';
        });
        sound.play();
        b2.title = 'Stop Playback';

    }
});

buttonUpload.addEventListener('click', function(e){
        myRecording = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, '/audio.m4a');
        if(myRecording != null) {
        myPostFunction();
        }else{
        alert('Nothing is recorded!');
        }
});

function myPostFunction(){ continues here… 
```

# java - 爪哇。重用 try-finally 构造并返回

> ID：11969619
> 
> 赞同：3
> 
> 时间：2012-08-15T12:53:15.117
> 
> 标签：java, try-catch, code-reuse

看看这段代码：

```
IDfSessionManager manager = DfcSessionManager.getSessionManager();
    try {
        IDfSession session = manager.getSession(DfsUtils.getCurrentRepository());
        ...
        return somewhat; //May be without return statement
    } finally {
        if (session != null) {
            manager.release(session);
        }
    } 
```

这样的结构会重复很多次，并围绕着不同的代码。这可以是带有或不带有 return 语句的方法。我想对这个 try-finally 块做一些可重用的东西。

我已经想到了这样的认识。

```
public abstract class ISafeExecute<T> {

private IDfSession session = null;

protected abstract T execute() throws DfException;

public T executeSafely() throws Exception {
    IDfSessionManager manager = DfcSessionManager.getSessionManager();
    try {
        session = manager.getSession(DfsUtils.getCurrentRepository());
        return execute();
    } finally {
        if (session != null) {
            manager.release(session);
        }
    }
}

public IDfSession getSession() {
    return session;
} 
```

}

会话字段是用公共吸气剂制作的。

我们可以像这样使用这个类（返回对象）：

```
return new ISafeExecute<String>() {
        @Override
        public String execute() throws DfException {
            return getSession().getLoginTicket();
        }
    }.executeSafely(); 
```

或者没有返回对象：

```
 new ISafeExecute() {
        @Override
        public Object execute() {
            someMethod();
            return null;
        }
    }.executeSafely(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:59:20.513

您可以使用`Runnable<T>`构建一种机制来执行此操作（将一个函数注入另一个函数）：

```
public void runInSession(Runnable<IDfSession> runnable) {

    IDfSession session = null;
    try {

        session = manager.getSession(DfsUtils.getCurrentRepository());
        runnable.run(session);        

    } finally {
        if (session != null) {
            manager.release(session);
        }
    }

} 
```

您也可以使用更多泛型来使您能够返回值。我这里缺少 Java 编译器，但我对语法有点不确定。

编辑，因为我看到您的编辑：

使用自定义`ISafeExecute`界面可能比使用 更简洁`Runnable<T>`，但想法保持不变。您可以构建它，以便可以优雅地放置返回值（或错误）：

```
interface ISafeExecute<T> {

  void execute(IDfSession session);

  T getResult();

  Exception getException();

}

mySafeExecute.execute(session);

if(mySafeExecute.getException() == null) {
    return mySafeExecute.getResult();
} else {
    // runtime exception or declaration in method
    // signature
    throw new RuntimeException(mySafeExecute.getException());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:17:19.063

我做出了这样的决定：

```
 public abstract class SafeExecute<T> {

    protected IDfSession session = null;

    public T executeSafely() throws Exception {
        IDfSessionManager manager = DfcSessionManager.getSessionManager();
        try {
            session = manager.getSession(DfsUtils.getCurrentRepository());
            return logic();
        } finally {
            if (session != null) {
                manager.release(session);
            }
        }
    }

    protected abstract T logic() throws Exception;

} 
```

然后通过扩展这个类：

```
public class Service extends SafeExecute<String> {

    public String getLoginTicket() throws Exception {
        return executeSafely();
    }

    @Override
    protected String logic() throws Exception {
        //TODO implement
    }
} 
```

# ruby-on-rails - Ruby on Rails - 将日期时间的哈希转换为日期

> ID：11969620
> 
> 赞同：4
> 
> 时间：2012-08-15T12:53:22.880
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, date, datetime

我正在根据这个[Railscast 教程](http://railscasts.com/episodes/213-calendars-revised)创建一个日历视图。在本教程中，:published_on 字段是一个日期字段。我的问题是，如果 :published_on 是日期时间字段而不是日期字段，我将如何调整下面的代码以使其工作？

**移民**

```
t.date :published_on 
```

**控制器：**

```
def index
  @articles = Article.all
  @articles_by_date = @articles.group_by(&:published_on)
  @date = params[:date] ? Date.parse(params[:date]) : Date.today
end 
```

**看法：**

```
<div id="articles">
  <h2 id="month">
    <%= link_to "<", date: @date.prev_month %>
    <%= @date.strftime("%B %Y") %>
    <%= link_to ">", date: @date.next_month %>
  </h2>
  <%= calendar @date do |date| %>
    <%= date.day %>
    <% if @articles_by_date[date] %>
       <ul>
        <% @articles_by_date[date].each do |article| %>
          <li><%= link_to article.name, article %></li>
         <% end %>
      </ul>
    <% end %>
  <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T17:12:29.333

我们只需要按日期而不是日期时间对文章进行分组：

```
 @articles_by_date = Article.all.group_by {|i| i.created_at.to_date} 
```

删除@articles 行，它看起来没有任何作用。

这应该就是全部了。

对于使用 ActiveRecord[分组](http://guides.rubyonrails.org/active_record_querying.html#group)功能的 rails 3.x + 方法，它将使用数据库执行分组，而不是实例化所有记录然后分组。

```
@articles_by_date = Article.group("date(created_at)") 
```

# c# - 从 C# 远程连接到 powershell

> ID：11969621
> 
> 赞同：2
> 
> 时间：2012-08-15T12:53:33.493
> 
> 标签：c#, powershell

我想使用 ASP.NET 将 powershell 从 windows 7 远程连接到 windows server 2008 R2（安装在 VMware 中）。

这是我的代码：

```
 string shell = "http://schemas.microsoft.com/powershell/Microsoft.PowerShell";
    var target = new Uri("http://win-qkheb9s51i8/wsman");

    Pipeline p = runSpace.CreatePipeline();
    SecureString passing = new SecureString();
    string password = "A123456a";

    foreach (char c in password)
    {
        passing.AppendChar(c);
    }
    passing.MakeReadOnly();

    var cred = new PSCredential(@"win-qkheb9s51i8\Administrator", passing);

    var connectionInfo = new WSManConnectionInfo(target, shell, cred);
    connectionInfo.OperationTimeout = 4 * 60 * 1000; // 4 minutes.
    connectionInfo.OpenTimeout = 1 * 60 * 1000;
   runSpace = RunspaceFactory.CreateRunspace(connectionInfo);
   runSpace.Open(); 
```

但在 runSpace.open() 中有时会出现此错误

> 连接到远程服务器失败并显示以下错误消息：访问被拒绝。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。

有时这个错误：

> 错误：客户端无法连接到请求中指定的目的地。验证目标上的服务是否正在运行并且正在接受请求。

我读过`about_Remote_Troubleshooting`，但我不明白为什么会发生这些错误。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:56:44.087

好的，你说两台机器都在同一个域上，但我看到你正在尝试使用本地管理员帐户。这可能是一个问题，但不一定。为了复制这一点，我在 VM 上设置了 Win2k8R2 并按照以下步骤操作：

**步骤 #1 和 2 适用于 Server 2008 R2 Core 安装。如果您有完整安装，只需跳到#3。**

1.  运行以下命令以安装 .NET2 和 PowerShell（在 cmd.exe 中）
    *   DISM /在线 /Enable-Feature /Featurename:NetFx2-ServerCore
    *   DISM /在线 /Enable-Feature /FeatureName:MicrosoftWindowsPowerShell
2.  安装一些有用的 PS CmdLets（在 cmd.exe 中）
    *   DISM /online /enable-feature /featurename=ServerManager-PSH-Cmdlets
    *   DISM /online /enable-feature /featurename=BestPractices-PSH-Cmdlets
3.  启用远程外壳（在 powershell.exe 中）
    *   设置执行策略 RemoteSigend
    *   配置-SMRemoting.ps1 -force -enable

然后我拿了你的示例代码，我并没有对它做任何实质性的改变

```
 Console.Write("Target: ");
        var target = Console.ReadLine();
        Console.Write("User: ");
        var user = Console.ReadLine();
        user = string.Format("{0}\\{1}", target, user);
        string shell = "http://schemas.microsoft.com/powershell/Microsoft.PowerShell";
        var targetWsMan = new Uri(string.Format("http://{0}:5985/wsman", target));

        using (var passing = new SecureString())
        {
            Console.Write("Password: ");
            var cki = default(ConsoleKeyInfo);
            do
            {
                cki = Console.ReadKey(true);
                if (cki.Key == ConsoleKey.Enter)
                    Console.Write(cki.KeyChar);
                else
                    passing.AppendChar(cki.KeyChar);
            }
            while (cki.Key != ConsoleKey.Enter);
            passing.MakeReadOnly();

            var cred = new PSCredential(user, passing);

            var connectionInfo = new WSManConnectionInfo(targetWsMan, shell, cred);
            connectionInfo.OperationTimeout = 4 * 60 * 1000; // 4 minutes.
            connectionInfo.OpenTimeout = 1 * 60 * 1000;
            using (var runSpace = RunspaceFactory.CreateRunspace(connectionInfo))
            {
                var p = runSpace.CreatePipeline();
                runSpace.Open();
                Console.WriteLine("Connected to {0}", targetWsMan);
                Console.WriteLine("As {0}", user);
                Console.Write("Command to run: ");
                var cmd = Console.ReadLine();
                p.Commands.Add(cmd);
                var returnValue = p.Invoke();
                foreach (var v in returnValue)
                    Console.WriteLine(v.ToString());
            }
        }

        Console.WriteLine("End...");
        Console.ReadLine(); 
```

我确实添加了一个 dll 引用，`C:\Program Files\Reference Assemblies\Microsoft\WindowsPowerShell\v1.0\System.Management.Automation.dll`以防万一它不是您使用的。

然后它起作用了。所以我的感觉是它不是你的代码，而是你的凭据，或者目标机器上的远程设置。

# javascript - android混合应用程序中的javascript延迟加载

> ID：11969626
> 
> 赞同：0
> 
> 时间：2012-08-15T12:53:45.580
> 
> 标签：javascript, android

我有这段代码的html页面的头部

```
<script type="text/javascript" src="js/head.load.min.js"></script>
<script type="text/javascript">
    head.js("js/jquery.js","docs/_assets/js/jqm-docs.js","js/jquery.mobile-  1.1.1.js",function(){alert('scripts have been loaded')});
</script> 
```

我的javascript文件以及我的css和html文件位于android项目的assests文件夹中。我想做的是从assests文件夹异步加载javascript文件，以便在webview中初始呈现html页面很快。但这似乎不起作用，因为它没有加载 javascript 文件。可能是什么原因？

顺便说一句，我正在使用 headjs javascript 库进行异步加载..这里是站点参考`http://headjs.com/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:04:04.407

您是否查看过任何异步加载器，例如[requireJS](http://requirejs.org/)？

问题是您要实现什么，因为从您的代码中我可以看到您正在加载 Jquery Mobile，它增强了页面上的大多数元素。因此，在 JQM 完成加载并初始化之前，我不想向用户显示任何内容，因为他将看到“pre-JQM-enhanced”内容。

因此，要么将 js 文件放入您的`head`部分，如下所示：

```
<script type="text/javascript" src="jquery"></script>
<script type="text/javascript" src="jqm-docs"></script>
<script type="text/javascript" src="jqm"></script> 
```

这将直接加载它们（而不是异步），并且仅在一切运行后才显示内容，或者使用异步加载器。但是，这不会改变最终结果，因为您的页面似乎至少需要`jquery`and `jqm`，因此您无法在没有加载它们的情况下“启动”您的应用程序。

使用异步加载器时，您必须记住，js 文件是如何相互依赖的。Jquery Mobile 需要 Jquery，所以在加载 Jquery 之前最好不要初始化 Jquery Mobile。

# perl - 在 Cacti 中从 Perl 脚本和图形创建和更新 RRD

> ID：11969632
> 
> 赞同：4
> 
> 时间：2012-08-15T12:53:58.347
> 
> 标签：perl, rrdtool, rrd, cacti

我对 Perl 有点陌生，对 RRD 来说绝对是新手，而且我有一个 Perl 脚本，它运行一些 Web 服务测试并从垃圾收集日志中检索行。该脚本还执行其他任务，但我只需要与这两个相关的图表。

这段脚本读取结果报告 .html，从表中提取一些时间值并将它们存储在变量中。

```
my $html = "./report/archive/results-$now/web_results.html";
my @headers = qw( Page Initial Resource STB UI );
my $te = HTML::TableExtract->new(headers => \@headers);
$te->parse_file($html);
my ($table) = $te->tables;
for my $row ($te->rows) {
    my $pageDisplay = "@$row[0]";
    $pageDisplay =~ s/\D//g;

    my $initialLoad = "@$row[1]";
    $initialLoad =~ s/\D//g;

    my $resourceAudit = "@$row[2]";
    $resourceAudit =~ s/\D//g;

    my $uiRefresh = "@$row[3]";
    $uiRefresh =~ s/\D//g;

    my $stbRefresh = "@$row[4]";
    $stbRefresh =~ s/\D//g;
} 
```

我想使用[RRDTool::OO](http://search.cpan.org/dist/RRDTool-OO/lib/RRDTool/OO.pm)或[RRD::Simple](http://search.cpan.org/dist/RRD-Simple/lib/RRD/Simple.pm)将这些变量存储在 RRD 中，并在脚本的每个循环之后更新它们。

我还想对另一段循环执行一些垃圾收集日志行并为每行返回一个运行时的脚本执行相同的操作。

```
open LOG,"<","./report/archive/logs-$now/garbage.collection.txt" or die "Unable to read file: $!";
    while (my $line = <LOG>) {
        my ($time) = $line =~ m/\breal=([0-9.]+)/;
    }
close LOG; 
```

我相信[RRDTool::OO](http://search.cpan.org/dist/RRDTool-OO/lib/RRDTool/OO.pm)有一个可以用我的变量调用的更新函数，但我的主要问题是创建 RRD(s) 开始以便它们可以用它们更新。我不确定我是否需要多个 RRD、最好的步长值、数据源等。

如果我可以成功创建/更新 RRD 或 RRD，我很确定我可以按照[Cacti 的 Externally Updated RRDs doc](http://docs.cacti.net/manual:087:8_rrdtool.05_external_rrds)将它们加载到 cacti 上进行绘制。尽管有人可能有更好的方法。任何帮助表示赞赏！

**编辑**

我在脚本的第二部分尝试了以下内容......

```
#RRDTool::OO

my $rrd = RRDTool::OO->new(
             file => "gcRuntimes.rrd" );

$rrd->create(
     step        => 1,
     data_source => { name      => "GC",
                      type      => "GAUGE" },
     archive     => { rows      => 50 });
...

open LOG,"<","./report/archive/logs-$now/garbage.collection.txt" or die "Unable to read file: $!";
    while (my $line = <LOG>) {
        my ($time) = $line =~ m/\breal=([0-9.]+)/;
        $rrd->update($time);
}
close LOG; 
```

..但这失败并出现错误： `rrdtool create gcRuntimes.rrd --step 1 DS:GC:GAUGE:2:U:U RRA:MAX:0.5:1:5 failed: creating 'gcRuntimes.rrd': Invalid argument at /home/foo/perl5/lib/perl5/RRDTool/OO.pm line 438`

`strace`使用我的脚本运行将`(invalid argument)`在`mmap2`系统调用中显示这一点。

```
mmap2(NULL, 1344, PROT_READ|PROT_WRITE, MAP_SHARED, 3, 0) = -1 EINVAL (Invalid argument)
close(3) 
```

如果我使用 RRD::Simple 或 RRDTool::OO 对我来说并不重要，但目前它们都返回相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:34:09.830

根据[这个错误报告](https://www.virtualbox.org/ticket/819)`vboxfs`，创建文件的文件系统很可能`mmap`在写入模式下无法支持系统调用。

您应该在常规 Linux 文件系统（ext3、ext4、reiserfs...）的另一个位置尝试您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:55:04.743

您也可以在 perl 脚本中自己调用 rrdtool 命令。

```
my $result = `/usr/bin/rrdtool create /path/to/gcRuntimes.rrd --step 1 DS:GC:GAUGE:2:U:U RRA:MAX:0.5:1:5`; 
```

和

```
my $result = `/usr/bin/rrdtool update /path/to/gcRuntimes.rrd $time:$data`; 
```

# java - 首次提交后检票验证“挂起”

> ID：11969641
> 
> 赞同：2
> 
> 时间：2012-08-15T12:54:17.620
> 
> 标签：java, wicket, wicket-1.5

我有一个对某些字段（必填字段）进行验证的表单。每当我提交缺少值的表单时，我都会在反馈面板中收到相应的错误消息。当我输入缺少的信息并再次提交表单时，错误消息没有改变；表格未提交。

在我的环境中，验证似乎是一次性的事情，一旦我提交了一个表单，我就会被初始提交的结果所困扰。

对此有何解释？建议？？帮助？？？

我正在使用 Wicket-1.5.7（刚刚升级以确保它不是一个已经修复的错误）和 Tomcat v6.0 ...还有 EclipseLink 作为 JPA 提供者和 H2 作为 DB - 只是为了完整性。

以下简单示例展示了所描述的问题：

爪哇：

```
public class TestPage extends WebPage {

    public TestPage() {
        final MyModel myModel = new MyModel();
        final Form<MyModel> form = new Form<MyModel>("form", new CompoundPropertyModel<MyModel>(myModel));
        add(form);

        add(new FeedbackPanel("feedback"));

        final TextField<String> textField = new TextField<String>("name");
        textField.setRequired(true);
        form.add(textField);
        form.add(new Button("submit"));
    }

    public class MyModel implements Serializable {

        public String name;

    }

} 
```

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<div wicket:id="feedback"></div>

<form wicket:id="form">
<input type="text" id="name" wicket:id="name" />
<input type="submit" wicket:id="submit" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:06:23.167

只需将您的代码扔到我的 Wicket 1.5.7 上，它就可以正常工作。从描述的行为来看，您正在使用 Ajax 提交表单，并且没有在 onSuccess 中将 FeedbackPanel 添加到 AjaxRequestTarget。

# ruby-on-rails-3 - 更改设计默认根

> ID：11969651
> 
> 赞同：1
> 
> 时间：2012-08-15T12:54:45.577
> 
> 标签：ruby-on-rails-3, devise

我的根页面是一个欢迎页面，其中包含一个打开注册模式的链接。

我有需要身份验证的特定页面。当我转到那个特定页面时，我被重定向到 localhost:3000/users/sign_in。但我想将用户重定向到我的主页并显示模式。我的意思是我希望登录页面是 localhost:3000/ 并且不知何故，只是在这种情况下传递一个参数，让我知道我必须打开弹出窗口。

我的意思是，当我转到 localhost:3000 时，我应该只显示主屏幕。

但是如果我去 localhost:3000/myspecificpagewithauthentication 我应该被重定向到 localhost:3000?showsignup=true （以便能够使用 JS 显示模式）并且在注册后我应该再次被重定向到 localhost:3000/myspecificpagewithauthentication （已经认证）。

我正在使用设计和 RoR 3。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:08:50.593

设计是一个有据可查的宝石。给[你](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)

**更新：**

要更改登录后路径，请将您自己的 after_sign_in_path_for 方法写入应用程序控制器。这将覆盖设计的方法。

```
class ApplicationController < ActionController::Base

def after_sign_in_path_for(resource)
  your_custom_path
end

end 
```

# javascript - 地理编码器 - IE8 中的编码问题

> ID：11969652
> 
> 赞同：2
> 
> 时间：2012-08-15T12:54:47.697
> 
> 标签：javascript, google-maps, internet-explorer-8

我正在使用 Google Maps API 版本 3 在地理编码器对象的帮助下检索位置。

问题是当使用德语特殊字符时，我在 IE8 中得到了不想要的结果，这可能与 IE8 执行的编码有关。

例如，在搜索德国城市“Köln”时，geocoder 在 Chrome、FF、Safari 和 IE9 中返回正确的结果并将我带到相应的位置。

当我在 IE8 中搜索同一个城市时，它会将我带到法国的一个不对应的城市。

这就是我的代码的样子：

```
var gcreq = {
  address: searchAddress, // e.g. ('Köln, DE')
  region: 'de',
  language: 'de'
};

geocoder.geocode(gcreq, function(results, status) {

...

} 
```

我可以通过使用 JS 函数在 Chrome 中模仿这种行为`encodeURI`。因此，使用`encodeURI(searchAddress)`也会产生我在 IE8 中观察到的不良结果，即地理编码器查找“K%C3%B6ln”而不是“Köln”。

有没有办法阻止 IE8 这样做？或者有没有办法将 UTF8 编码的搜索词而不是 URLified 的搜索词发送到地理编码器？

编辑：我在提交之前对搜索词进行了 HTML 编码（即`Köln`变为`K&ouml;ln`）。令人惊讶的是，即使该术语是 HTML 编码的，Chrome 也会返回所需的结果，而 IE8 仍然失败。也许根本不是编码问题......但奇怪的是，只有在使用德语“元音变音”（ä,ö,ü,ß）时才会出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:01:33.733

尝试`<meta charset=utf-8">`在您的 HTML 页面`<head>`部分中添加。
还请查看这些页面以获取更多参考：

*   [url 编码在 Firefox 和 Internet Explorer 中的行为不同](https://stackoverflow.com/questions/8323009/url-encode-behaving-differently-in-firefox-and-internet-explorer)
*   [UTF-8 内容编码问题](https://groups.google.com/forum/?fromgroups#!topic/google-maps-api/ZCc9wftdI5k%5B1-25%5D)
*   [Google Maps API“地理编码简单”示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)

# css - IE8中的背景透明

> ID：11969653
> 
> 赞同：0
> 
> 时间：2012-08-15T12:54:49.297
> 
> 标签：css, internet-explorer-8, background

我有这个 CSS 在 div 中设置背景，但在 IE8 中它显示为透明。我看不出我做错了什么，有什么想法吗？

```
.drop .holder{
  float:right;
  padding:16px 11px 15px;
  box-shadow:0 0 6px rgba(0,0,0,0.3);
  -webkit-box-shadow:0 0 6px rgba(0,0,0,0.3);
  -moz-box-shadow:0 0 6px rgba(0,0,0,0.3);
  border-bottom:1px solid #a1a1a1;
  background: #fafafa;
  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZhZmFmYSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlOGU4ZTgiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
  background: -moz-linear-gradient(top,  #fafafa 0%, #e8e8e8 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fafafa), color-stop(100%,#e8e8e8));
  background: -webkit-linear-gradient(top,  #fafafa 0%,#e8e8e8 100%);
  background: -o-linear-gradient(top,  #fafafa 0%,#e8e8e8 100%);
  background: -ms-linear-gradient(top,  #fafafa 0%,#e8e8e8 100%);
  background: linear-gradient(top,  #fafafa 0%,#e8e8e8 100%);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:30:23.647

这样的东西只适用于现代浏览器，而不是 IE。你需要为 IE 使用像这样的非标准的东西：
`progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#909090')`

另请注意，您的数据 url 在 IE 中也不起作用，您的 SVG 在某些版本的 IE 中也不起作用。不过，它们在现代浏览器中可以正常工作。

# c++ - Visual Studio C++ 包含字符串最大长度

> ID：11969657
> 
> 赞同：12
> 
> 时间：2012-08-15T12:55:01.310
> 
> 标签：c++, visual-studio, include

我一直在尝试在 Windows 上编译 Qt，我遇到了一个有趣的问题，#includes 失败，错误是包含的文件不存在（“没有这样的文件或目录”）。但是该文件确实存在。执行包含的文件是自动生成的“moc”文件（由 Qt 制作），包含如下内容：

`#include "../../../../../../../../qt-everywhere-opensource-src-4.8.2/examples/tools/plugandpaintplugins/extrafilters/extrafiltersplugin.h"`

该包含中的字符串长度为 127 个字符。在构建中生成和编译了许多“moc”文件，但只有像这样长度很长（127+ 个字符）的文件会失败。

有问题的文件恰好位于 UNIX 系统上，通过 Samba 共享到 Windows。我能够通过创建符号链接并将受影响文件中的“qt-everywhere-opensource-src-4.8.2”替换为“qt-4.8.2”来解决此问题。结果包括：

`#include "../../../../../../../../qt-4.8.2/examples/tools/plugandpaintplugins/extrafilters/extrafiltersplugin.h"`

仅 102 个字符长并且工作得很好。

我四处搜索，找不到任何对此的参考。我也不能在这个 Qt 构建之外复制这个问题（只是制作任意长的文件名并尝试包含它们）。因此`nmake`，Qt 创建的 makefile 在运行时可能会以某种方式执行某些操作，`cl`从而导致它以某种方式拒绝长包含。

有没有人对此有任何额外的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:58:20.533

由于这是用来查找包含文件的，我倾向于认为它与操作系统的文件路径限制有关。

也许预处理器的实现也以某种方式限制了它，但这对于每个编译器都是特定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:02:48.420

I've encountered the same issue when building projects using GCC on windows. The issue seems to relate to the way in which the Path is assembled,

`../../../../../../../../qt-everywhere-opensource-src-4.8.2/examples/tools/plugandpaintplugins/extrafilters/extrafiltersplugin.h`

becomes

`c:/some/working/structure/that_is/at_least/as_deep/as_the_up/levels/are/../../../../../../../../qt-everywhere-opensource-src-4.8.2/examples/tools/plugandpaintplugins/extrafilters/extrafiltersplugin.h`

(example may not be to scale, I didn't count characters...)
At this point the path-handling breaks down due to being too long. In our case, forcing the compiler to use a contracted version,

`c:/some/qt-everywhere-opensource-src-4.8.2/examples/tools/plugandpaintplugins/extrafilters/extrafiltersplugin.h`

would make the problem go away.
MSDN does contain some hints of the problem at [http://msdn.microsoft.com/en-us/library/windows/desktop/aa364963(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364963%28v=vs.85%29.aspx "MSDN")
Note that the alternative,longer supporting, path format, \?\, does not seem to support relative paths.

**Quick Fix**: Don't use relative paths of such depth.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:17:56.983

.NET 框架可能设置了一个限制，但还没有找到确切的行。

这里有一些有趣的链接：在[社交 msdn](http://social.msdn.microsoft.com/Forums/zh/vssetup/thread/4007ecaf-7c44-4ceb-be46-a9a2c8b351b5)和[博客 msdn](http://blogs.msdn.com/mohamedg/archive/2007/12/14/file-system-limits.aspx)上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:04:12.863

我最近在使用 msys 和 mingw 在 Windows 上构建 qt 时遇到了完全相同的问题。构建系统无法通过以下相对路径找到包含的头文件：

> “../../../../../../../qt-everywhere-opensource-src-5.0.1/qtbase/src/platformsupport/fontdatabases/basic/qbasicfontdatabase_p.h”

但是文件存在并且路径也正确。

我在 qt 源代码树之外创建了一个类似的文件结构，并且能够从命令行使用 g++ 重现该问题。

我做了一些修改，一次减少一个文件名字符的数量。五个字符下来，错误消失了。g++突然找到了文件。

它**在 include 语句**中的总字符数等于**120**时起作用。这只是一个定量数字，可以粗略了解引擎盖下的限制。不同版本的编译器可能会有所不同。我认为操作系统在确定它方面没有任何作用。这个瓶颈似乎更多是由于预处理器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T13:39:08.100

您应该只将您要引用的路径添加到编译器选项，而不是使用那些可怕的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T13:09:08.187

在我过去的一个工作地点，我们遇到了另一个类似的问题。该项目非常大，并且包含太多文件，以至于 Visual Studio 在构建项目时生成的编译器命令太长，以至于超出了某些限制并且编译失败。但是，这发生在 Visual Studio 2008 上，我不知道较新的版本。

我知道这无关紧要，但这只是附加信息。它可能会帮助某人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-13T08:23:22.740

选择“项目”选项卡并取消选中“影子构建”解决了我的问题。

# javascript - 调用 onload 时缺少 Window 对象的某些变量

> ID：11969659
> 
> 赞同：-1
> 
> 时间：2012-08-15T12:55:05.083
> 
> 标签：javascript, onload

这个[简单的小提琴](http://jsfiddle.net/4x3Tx/2/)显示了 Window 对象的属性：

```
var obj = this; // object Window
var variables = "";
for (var name in obj) {
    if (obj.hasOwnProperty(name)) {
        variables += name + " : " + obj[name] + "<br/>";
    }
}
document.writeln(variables); 
```

当这个脚本被[直接调用而不换行时](http://jsfiddle.net/4x3Tx/1/)，它会显示这个结果：

```
window : [object Window]
document : [object HTMLDocument]
InstallTrigger : [object Object]
obj : [object Window]
variables : window : [object Window]  document : [object HTMLDocument]  InstallTrigger : [object Object] obj : [object Window]
name : name
getInterface : function getInterface() { [native code] }
location : http://fiddle.jshell.net/_display/
navigator : [object Navigator] 
```

但是当[调用 onload](http://jsfiddle.net/4x3Tx/2/)时，它只显示：

```
window : [object Window]
document : [object HTMLDocument]
InstallTrigger : [object Object]
getInterface : function getInterface() { [native code] }
location : http://fiddle.jshell.net/4x3Tx/2/show/
navigator : [object Navigator] 
```

所以问题很明显：有人可以解释为什么是`obj`，`variables`并且`name`第二小提琴结果中缺少变量吗？在这两种情况下，都`obj`指的是 Window 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:58:40.440

执行代码的函数范围发生了变化。

**场景一** *（在全局范围内调用脚本）*：

脚本可以访问在其当前范围 ( `obj`,`variables`和`name`您的情况下定义的变量/参数。

**场景二** *（脚本从 onload 事件的处理程序执行）*：

除了范围更改为事件处理程序内的函数外，与场景一中的情况相同。因此，上述本地人不在范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:00:39.403

当您运行代码“onLoad”时，它被放在一个函数中并分配给`window.onload`：

```
window.onload=function(){
    var obj = this;
    var variables = "";
    for (var name in obj) {
        if (obj.hasOwnProperty(name)) {
            variables += name + " : " + obj[name] + "<br/>";
        }
    }
    document.writeln(variables);
    console.log(obj);
} 
```

`obj`，`variables`并且`name`现在是该函数的本地，而不是全局，因此不是`window`对象的属性。

# javascript - 尝试将 URL 存储为 JSON

> ID：11969665
> 
> 赞同：1
> 
> 时间：2012-08-15T12:55:38.293
> 
> 标签：javascript, json, stringify

我正在尝试使用 HTML5 本地存储存储有关许多站点的一些详细信息，但我遇到了一些麻烦。

基本上，我希望应用程序能够离线缓存数据，并且我一直在开发它的方式，每次主页加载时，内容都被缓存为 localStorage.sitedata。我将其存储为 JSON。

我为其编写的代码如下所示：

```
 // Retrieve response as JSON
            response = $.parseJSON(data);

            // Store the data in HTML5 local storage as well
            var dataToCacheArray = new Array();
            for(var item in response){
                var obj = response[item];
                dataToCacheArray.push(obj);
            }
            var dataToCache = JSON.stringify(dataToCacheArray);
            localStorage.sitedata = dataToCache; 
```

现在，dataToCacheArray 中的数据正是我想要的——它是一个包含许多 JavaScript 对象的数组。这是其中之一，如果我使用 console.log() 来查看 dataToCacheArray，如 Chrome 的开发人员工具中所示：

```
lastChecked: "13:46:55 Wednesday 15 August 2012"
siteId: "34"
status: "1"
success: "1"
url: "http://localhost" 
```

之后，我将 dataToCacheArray 的字符串化版本存储为 dataToCache，如果我使用 console.log() 查看它，我会得到：

```
[{"status":"1","success":"1","siteId":"34","lastChecked":"13:46:55 Wednesday 15 August 2012"}] 
```

如您所见，由于某种原因，URL 未包含在字符串化版本中。关于我可能在哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:19:10.790

将 URL 设置为 encodeURIComponent(url) 以便在序列化为 JSON 之前在原始数据中正确转义。

# blackberry - 光标未出现在 Blackberry 的 Editfield 中

> ID：11969671
> 
> 赞同：3
> 
> 时间：2012-08-15T12:55:57.347
> 
> 标签：blackberry

光标未出现在 Editfield 中。

以下是代码..

```
ef_mob = new EditField("", "", 11, EditField.NO_NEWLINE|EditField.FILTER_NUMERIC|EditField.FOCUSABLE) {
   protected void paint(Graphics graphics) {
      graphics.setColor(Color.WHITE);
      // graphics.drawRoundRect(0, 0, getWidth()-(getWidth()/10), getHeight(), 5, 5);

      graphics.fillRoundRect(0, 0, getWidth()-(getWidth()/10), getHeight(), 5, 5);
      graphics.setColor(Color.BLACK);

      graphics.drawText(ef_mob.getText(), 0, 0);
      super.paint(graphics);
   }
}; 
```

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:33:40.867

仅仅在 上正确绘制圆角矩形背景就需要做很多工作，这有点愚蠢`EditField`，但看起来[其他人也遇到了这个问题](http://supportforums.blackberry.com/t5/Java-Development/Cursor-Caret-not-appearing-in-EditField/m-p/553556#M112688)

## 解决方案一

如果您调整 Peter Strange 对该问题的回答，您的代码可能`MobEditField`如下所示。我将您的匿名`EditField`类拆分为一个单独的类，因为添加了很多代码。如果您真的想要，您可以将代码保留为匿名类（我认为这对可读性非常不利）。

```
private class MobEditField extends EditField {
    private boolean _drawFocus = false;

    public MobEditField() {
        super("", "", 11, EditField.NO_NEWLINE|EditField.FILTER_NUMERIC|EditField.FOCUSABLE);
    }

    protected void paint(Graphics graphics) {
        if (!_drawFocus) {
            int oldColor = graphics.getColor();

            graphics.setColor(Color.WHITE);
            graphics.fillRoundRect(0, 0, getWidth() - (getWidth() / 10), getHeight(), 5, 5);

            graphics.setColor(Color.BLACK);
            graphics.drawText(getText(), 0, 0);

            graphics.setColor(oldColor);
        }
        super.paint(graphics);
    }

    protected void drawFocus(Graphics graphics, boolean on) {
        _drawFocus = on;
        super.drawFocus(graphics, on);
        _drawFocus = false;
    }

    protected void onFocus( int direction ) {
        super.onFocus( direction );
        invalidate();
    }

    protected void onUnfocus() {
        super.onUnfocus();
        invalidate();
    }
} 
```

然后你就这样做：

```
ef_mob = new MobEditField(); 
```

注意几点：

1.  不要`ef_mob.getText()`从匿名类的`paint()`方法中调用。只要打电话`getText()`。我不知道你的原始代码是如何编译的。
2.  最好在覆盖该`paint()`方法时保存初始`Graphics`对象颜色（或 alpha，或您更改的任何内容），然后在最后重置它。
3.  和方法被`onFocus()`覆盖`onUnfocus()`以强制重绘
4.  该`paint()`方法只允许`super.paint()`在关注该领域时完成所有工作。根据您希望字段的外观，您可能需要稍微调整一下。

## 解决方案二

对我有用的另一种选择是利用**未记录** `paintBackground()`的方法`EditField`。当然，使用未记录的方法总是有缺点。所以，我只提供它作为一个选项：

```
 ef_mob = new EditField("", "", 11, EditField.NO_NEWLINE|EditField.FILTER_NUMERIC|EditField.FOCUSABLE) {
            protected void paint(Graphics graphics) {
                int oldColor = graphics.getColor();

                graphics.setColor(Color.BLACK);
                graphics.drawText(getText(), 0, 0);

                graphics.setColor(oldColor);
                super.paint(graphics);
            }

            protected void paintBackground(Graphics g) {
                int oldColor = g.getColor();
                g.setColor(Color.WHITE);
                g.fillRoundRect(0, 0, getWidth()-(getWidth()/10), getHeight(), 5, 5);
                g.setColor(oldColor);
            }

        }; 
```

在这里，我将`fillRoundRect()`呼叫移出`paint()`和移入`paintBackground()`.

# unicode - SQL 中的 Unicode 字符问题 - 印度卢比

> ID：11969682
> 
> 赞同：0
> 
> 时间：2012-08-15T12:56:33.450
> 
> 标签：unicode, sql-server-2008-r2, currency

我正在尝试将新的印度卢比符号插入数据库，但它不起作用。下面是一些示例代码来说明：

```
DECLARE @symbolData TABLE ( SomeSymbol nvarchar(100))
INSERT @symbolData VALUES(N'лв');
INSERT @symbolData VALUES(N'र');
INSERT @symbolData VALUES(N'₹');
SELECT * FROM @symbolData

SELECT N'र' AS 'Char', UNICODE(N'र') AS 'Unicode value', NCHAR(UNICODE(N'र')) AS 'Created Char'
UNION ALL
SELECT N'₹' AS 'Char', UNICODE(N'₹') AS 'Unicode value', NCHAR(UNICODE(N'₹')) AS 'Created Char' 
```

在第二次选择中，您可以看到第一个字符显示正确，但第二个字符显示不正确。我在 SQL Server 2008 R2 (v10.50) SP1 上运行它。

# php - 在 PHP 中将 PDF 转换为图像/flash/东西

> ID：11969683
> 
> 赞同：2
> 
> 时间：2012-08-15T12:56:45.287
> 
> 标签：php, flash, pdf, jpeg, ghostscript

我需要一个解决方案来将动态创建的多页 PDF 文件转换为另一种格式，如 Jpegs 或 swf 文件等。我知道`Ghostscript`和`ImageMagick`，但两者都对我没有任何用处，因为我们的服务提供商不能（不会）授予足够的权限允许它们使用 PHP exec、system 等命令运行（只是给出旧的*“无法分叉”*）。在我详尽的搜索中，我[遇到了这个](http://brettvanderhaar.com/php-windows-server-2008iis7-unable-to-fork-error-with-ghostscript/)，但我不知道如何实现它，如何生成这个 asmx 文件等。

PDF 文件在创建后位于服务器上，所以我只需要能够调用某些东西，然后通过另一个函数来转换它们。

即使有人知道我可以从 PHP 或其他方式调用的托管服务来转换 PDF 文件，这也会很有用，因为目前我已经没有想法了。

# objective-c - 将定时器循环设置为固定时间

> ID：11969684
> 
> 赞同：0
> 
> 时间：2012-08-15T12:56:46.493
> 
> 标签：objective-c, ios, loops, nstimer

我正在创建一个游戏。当用户完成游戏时，我正在向他展示分数。为了使其具有交互性，我将分数从 0 计算到分数。

现在，由于用户可以赚取 10 分或 100,000，我不想让他等太久，所以我希望无论分数如何，总时间都是固定的。

所以我这样做了，但似乎计时器间隔不受间隔值的影响。

哪里有问题 ？

```
///score timer
-(void)startScoreCountTimer:(NSNumber*)score{

finishedGameFinalScore = [score integerValue];
CGFloat finishedGameFinalScoreAsFloat = [score floatValue];
CGFloat interval = 2.0f/finishedGameFinalScoreAsFloat;
NSLog(@"interval = %f",interval);

NSDate *fireDate = [NSDate dateWithTimeIntervalSinceNow:0];
timer = [[NSTimer alloc] initWithFireDate:fireDate
                                 interval:interval
                                   target:self
                                 selector:@selector(timerMethod:)
                                 userInfo:nil
                                  repeats:YES];

NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
[runLoop addTimer:timer forMode:NSDefaultRunLoopMode];
}

- (void)timerMethod:(NSTimer*)theTimer{

scoreCount++;
finalScoreLabel.text = [NSString stringWithFormat:@"%i",scoreCount];

   if (scoreCount == finishedGameFinalScore ||finishedGameFinalScore ==0) {
    [theTimer invalidate];
    scoreCount=0;
    [self updateMedalsBoard];
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:05:52.253

我会使用重复的 NSTimer 而不是 runloop。

```
aTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(timerMethod:) userInfo:nil repeats:NO]; 
```

并将您的更改`timerMethod`为更像以下内容：

```
- (void)timerMethod:(NSTimer*)theTimer{  
     scoreCount = scoreCount + (finishedGameFinalScore * (numberOfSecondsYouWantToRun/100));
     finalScoreLabel.text = [NSString stringWithFormat:@"%i",scoreCount];
     if (scoreCount == finishedGameFinalScore ||finishedGameFinalScore ==0) {
         [theTimer invalidate];
         scoreCount=0;
         [self updateMedalsBoard];
     } else {
         theTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(timerMethod:) userInfo:nil repeats:NO];
     }
} 
```

这将使得 scoreCount 将根据他们的总分增加一个非固定数字。因此，如果您希望计分器运行 2 秒并且您的玩家得分为 100，那么它将每十分之一秒增加 2 分。如果您的玩家得分 100,000 分，那么分数将每十分之一秒增加 2000 分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T13:07:01.903

NSTimers 不能保证每*X*秒（或毫秒，或在您的情况下为微秒）准确触发一次。您只能确定它们会在*X*秒（等）过去后的某个时间触发。在您的情况下，看起来您一次只增加分数，并且在 NSTimer 有机会再次触发之前占用主线程上的时间，这会减慢整个过程。

更好的方法可能是让计时器每隔 0.1 秒重复一次，持续 2 秒。在 的每次调用中`timerMethod:`，添加总分的 1/20，直到在最后一次迭代中达到最终总分。当然，您可以使用确切的间隔来寻找看起来不错的东西。

# image - 无法使用 cfdocument/cfcontent 在 pdf 中包含图像

> ID：11969692
> 
> 赞同：2
> 
> 时间：2012-08-15T12:57:07.707
> 
> 标签：image, coldfusion, pdf-generation, cfdocument

我正在使用 cfcontent 从 Web 根目录外部流式传输图像。虽然在浏览器中直接调用各个页面时图像正确显示，但图像在生成的 pdf 内显示一个红色 X。在导出页面上：

```
<cfsavecontent variable = "gridCode">
    <cfinclude template="pathToGeneratedPage.cfm" >     
</cfsavecontent>
<cfdocument format="pdf" filename="#filename#" overwrite="yes" localUrl="yes">
    <cfdocumentsection >
        <cfoutput>#gridCode#</cfoutput>     
    </cfdocumentsection>
</cfdocument> 
```

在要生成内容的页面上：

```
<img src="pathToDisplayPhoto.cfm?image=#someImage#" /> 
```

在 displayPhoto.cfm 页面上：

```
<cfcontent type="image/*" file="#pathToUploadFolderOutsideWebRoot##url.image#" deleteFile = "No"> 
```

我包含了 cfdocument 属性 localUrl="yes" 因为默认（否）不起作用。明确设置为“否”也不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T18:59:47.073

我正在保存创建的 pdf 并查找`localUrl="yes"`（或`=true`）失败。

```
<img src="file:\\\#replace(getCurrentTemplatePath(),"my.cfm")#images\my.png"> 
```

为任何在桶底寻找想法的人工作。getCurrentTemplatePath() 获取文件名和路径，所以我不得不删除它（因此是 replace(...,"my.cfm")。我也尝试了 expandPath(".") 并且也失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:48:50.047

您将'localUrl'设置为yes，这意味着Coldfusion将查看图像中的文件路径并尝试在硬盘驱动器上找到它们而不进行HTTP或HTTPS调用，因此它试图打开'pathToDisplayPhoto.cfm?image= #someImage#' 作为图像，但由于它不是 HTTP 请求，它不会处理 CFML。

如果将 loclUrl 设置为 No，则应该可以解决此问题。

[cfdocument ref](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c21.html) - 在参数列表中查找 localUrl。

# mysql - MySQL - 使用触发器查找 SUM

> ID：11969697
> 
> 赞同：0
> 
> 时间：2012-08-15T12:57:25.220
> 
> 标签：mysql, triggers, phpmyadmin

我是触发器（和 MySQL）的新手，每次在“喜欢”表上添加条目时，我都会尝试在“帖子”表中更新“喜欢”字段（以及这篇文章的喜欢的总和）。我将如何做到这一点？

发布表：user_id,likes,comment... 喜欢表：user_id, post_id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:01:13.293

在您的触发器中设置它。

```
UPDATE posts SET likes=likes+1 WHERE ID=new.post_id 
```

所以你更新你的表格帖子，likes=likes+1，你的帖子 ID 等于 new(like).post_id。

编辑：在触发器中，新、删除、更新等内容指的是触发触发器的行。

有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

编辑：这并不能完全回答你的问题。为了回答您的问题，我会设置一个每天/每周/每月运行一次的 cron 作业，以刷新帖子中的点赞数。

# math - 与无限个球体的射线相交

> ID：11969704
> 
> 赞同：1
> 
> 时间：2012-08-15T12:57:48.347
> 
> 标签：math, equation, raytracing

我目前正在尝试在光线追踪器中对光线和其他类型的对象进行交叉测试。射线的碰撞通过求解方程以数学方式求解，而不是像距离场那样以恒定或动态大小的步长进行迭代。这运作良好，但有一个我正在尝试解决的问题。

```
// So if we put these two together (changing x,y,z in
// equation 1 with the values from equation 2, we get:

cx,cy,cz = sphere center
r        = sphere radius
ox,oy,oz = ray origin
dx,dy,dz = ray direction
t        = if the ray will hit, then that point is origin + direction * t

(Eq1) SphereEquation = (x - cx)^2 + (y - cy)^2 + (z - cz)^2 == r^2;
(Eq2) RayEquation    = {x,y,z} == {ox,oy,oz} + t*{dx,dy,dz};

CollisionEquation    = ((ox + t*dx) - cx)^2 + 
                       ((oy + t*dy) - cy)^2 + 
                       ((oz + t*dz) - cz)^2 
                       == r^2 
```

该变量`t`表示光线何时发生碰撞*。*因此，如果我们使用 pq 公式求解变量`t`，我们可以看到光线是否会发生碰撞。我的问题是我有*无数*个位于网格上的球体，它们之间的步长恒定。我想创建一个方程，其中光线可以与它们中的任何一个相交。我试图找到这样的东西，但我找不到任何东西。那么，如何创建这个等式呢？如果不可能，为什么不呢？

PS 我在需要时使用 Mathematica，如果有人想知道，光线追踪器是在 GLSL 中完成的；）

提前感谢您提供的各种帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:48:10.157

这在一定程度上取决于*确切的*设置：

对象是否必须在二维网格上（如草示例）？如果是这样，

1）计算你的射线和包含网格的平面之间的交点`s`（这大致是任何物体必须是被你的射线击中的候选对象），

2）计算任何候选对象可以具有的合适的最大距离`s`（这可能不是微不足道的，它取决于对象大小和视角）

3)`t`如上计算所有候选对象（即比计算出的最大距离更近的所有对象`s`）。最小的`t`胜利。

# java - 接口和实现的名称，哪个更好？

> ID：11969710
> 
> 赞同：0
> 
> 时间：2012-08-15T12:58:31.157
> 
> 标签：java, interface

```
public interface MemcachedAccessor {

     void set(String key, Object value, int cacheTime, long timeout,
        TimeUnit timeUnit);

     Object get(String key);
} 
```

我有一个 interface:`MemcachedAccessor`和一个 implementation: `MemcachedAccessorImpl`。

哪种名字风格更好？

`MemcachedAccessor`和`MemcachedAccessorImpl`

或者

`MemcachedAccess`和`MemcachedAccessImpl`

?

有什么规则吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T13:13:44.187

界面可能更通用：

```
public interface CacheAccessor {
} 
```

虽然实现显示了意图（访问[Memcached](http://memcached.org/)分布式缓存）：

```
public class MemcachedAccessor implements CacheAccessor {
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T13:03:46.447

只是为了逆向，我不会说，而是投票支持：

`Memcacheable`和`DefaultMemcacheable`或：

`Memcached`和`DefaultMemcached`

本身没有“规则”，但“-able”/“-ible”接口名称很常见。唯一*真正的*规则是以清晰简洁地表明其意图的方式命名事物。我扩展了一点，以确保名称（因此代码）在大声朗读时听起来不错，就像代码在讲述一个故事一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T13:31:21.673

在发出命令模式左右时，我只会使用访问器之类的名称。在这

```
class MemCache implements Cache {
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T13:00:14.200

如果它是一个接口，你肯定会避免 *Impl，因为它表示接口的实现。

**编辑**
这个答案是在另一个用户编辑问题之前发布的，但是好的，请继续投票:)
另外，我个人的偏好是使用 .Net 样式以立即清晰可见：接口将是`ICachedAccessor`，实现它的类将是`CachedAccessor`。

# html - 为什么这些 CSS 背景图片不显示？

> ID：11969715
> 
> 赞同：0
> 
> 时间：2012-08-15T12:58:52.167
> 
> 标签：html, css, image, background, height

我在显示此页面顶部的左右边框图像时遇到问题：

[http://www.designated.net.au/testbed/theme/](http://www.designated.net.au/testbed/theme/)

如您所见，我为左边框图像设置了 50px 的高度，以向您展示我希望它的外观。但我需要它们都以 100% 的高度工作。

当主分区中有任何文本时，侧面显示似乎也存在问题。

任何帮助将不胜感激！

*   编辑：

固定版本： http: [//www.designated.net.au/testbed/themefixed/](http://www.designated.net.au/testbed/themefixed/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:03:17.180

您的`#theme-page`元素没有高度，因此您将高度设置为 100% 的每个 div 都不知道该怎么做，因为 100% 意味着：“包含我的元素的 100%”如果您将高度设置为 100 % 到您的边框，以及主 div 的固定或百分比高度（#theme-age），边框将出现，因为它们的容器也将具有高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:11:13.693

用边框替换左右图像更容易和优化。

```
#theme-header-top {
  position: relative;
  background-color: white;
  border: 10px solid rgb(51, 51, 51);
  border-width: 0 10px;
} 
```

您必须删除 width:100% 才能使其正常工作。事实上它是没用的，因为你的元素是一个块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:32:25.970

首先，顶部区域到底部之间有一些像素间隙。
当您在 div 中只有视觉内容时，这在 css 中很常见。
发生这种情况是因为您需要提供 font-size:0; 到 div，否则它有一些额外的高度，你无法用正常的高度克服：值。

```
#theme-header-top {
   background-color: #FFFFFF;
   position: relative;
   width: 100%;
   font-size: 0;
} 
```

图像本身（对于主题标题左下角）是 35X35，所以当你想要 100% 高度时，我不知道你的意思。
我只能猜测您指的是底部区域和顶部区域之间的间隙。

# javascript - jQuery 导航巨型菜单通过单击不悬停

> ID：11969720
> 
> 赞同：0
> 
> 时间：2012-08-15T12:59:02.383
> 
> 标签：javascript, jquery, html, css

我有一个导航菜单，我想让某些链接在下面显示一个子菜单，这是总体布局[http://jsfiddle.net/hcharge/HGtTz/](http://jsfiddle.net/hcharge/HGtTz/)

在我使用 jQuery hoverintent 来显示下面的菜单之前，但是这次我希望它在没有悬停和单击的情况下显示，并且能够通过 Tab 键使用键盘进行导航。

我对 jQuery 很陌生，我试图让菜单显示没有任何运气，有人能指出我正确的方向吗？我敢肯定这很简单，在下拉菜单中显示 none，然后单击或其他什么滑动？

如果您单击框外或其他链接，菜单也需要关闭。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:02:58.997

这是出于可访问性目的吗？如果是这样，请尝试 tabindex

[http://www.w3schools.com/tags/att_standard_tabindex.asp](http://www.w3schools.com/tags/att_standard_tabindex.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:21:56.973

使用 tabindex 和 jquery 绑定焦点事件而不是触发任何你想要的

```
​$("li a").focus(function() {
    $(this).parent().find('ul').slideDown(200); // example of targeting nested UL with slide down animation
}); 
```

它应该像这样工作，然后使用模糊事件隐藏该子菜单

```
​$("li a").blur(function() {
        // your code here to hide submenu
    }); 
```

启用点击事件：

```
​$("li a").click(function() {
   // target all opened submenus and hide them by its class name
   $("ul.active-submenu").slideUp(200).removeClass("active-submenu"); 
   // adds class to submenu so you can determine easily which is active
   $(this).parent().find('ul').slideToggle(200).toggleClass('active-submenu');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:57:25.633

jsfiddle.net/hcharge/HGtTz

以下链接是上述问题的解决方案

jsfiddle.net/HGtTz/23/

# java - TomCat：使用类路径打开文件

> ID：11969721
> 
> 赞同：0
> 
> 时间：2012-08-15T12:59:04.543
> 
> 标签：java, eclipse, tomcat, file-io

当我在 Tomcat 上运行服务器应用程序时，我想在磁盘上打开一个文件。当我打印我的类路径时，我得到

```
C:\JavaDev\tools\apache-tomcat-6.0.33\bin\bootstrap.jar;
C:\Program Files\Java\jdk1.6.0_23\lib\tools.jar 
```

这对我来说毫无意义，但话又说回来，我什至没有基本的了解它是如何工作的。我的项目从哪里加载？他们不需要在类路径上吗？

这是我目前正在处理的域的目录布局：

```
src/main/java/com/company/product/domain/b/beans/MyClass.java
src/main/resources/whatever/myfile.txt 
```

我尝试使用以下变体打开文件：

```
String filename = "../resources/whatver/myfile.txt";
URL url = MyClass.class.getResource(filename); 
```

唉`url==null`，每次。在我尝试过的其他路径变体中：

```
whatver/myfile.txt
../whatver/myfile.txt
../../../../../../../resources/whatver/myfile.txt 
```

我需要一个我可以提交的解决方案（即不存储在 Eclipse 工作区中），因此并非所有团队成员都必须更新他们的设置。

这是我正在使用的环境：

*   雄猫 6.0
*   面向 Web 开发人员的 Eclipse Java EE IDE，版本：Helios Service Release 2
*   Maven 3.0.3 (r1075438; 2011-02-28 18:31:09+0100)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:06:47.270

在 Maven 项目中，其中的文件`resources`通常打包在某个地方的类路径中。尝试这个：

```
InputStream in = this.getClass().getClassLoader().getResourceAsStream("whatever/myfile.txt"); 
```

这是一个被 Maven 打包为 .war 的 Web 应用程序吗？

# facebook - Facebook 登录是否足够安全？

> ID：11969728
> 
> 赞同：1
> 
> 时间：2012-08-15T12:59:38.367
> 
> 标签：facebook, security, facebook-login

我正在考虑将 Facebook 登录用于包含一些“类似银行”的信息（例如查看帐户余额）的大型网站。当前登录是用户名/密码系统，否则我不知道当前采取的安全措施。

有哪些陷阱？目前，我正在考虑授权和正常运行时间的安全性。

Facebook 的 OAuth 2.0 是否足够安全？刚刚读到 OAuth 2.0 的主要作者离开了工作组（参见：[http](http://hueniverse.com/2012/07/oauth-2-0-and-the-road-to-hell/) ://hueniverse.com/2012/07/oauth-2-0-and-the-road-to-hell/ ），因为它“未能实现其两个主要目标——安全性和互操作性”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:12:47.993

这在 Security.StackExchange.com 但是会更好。

在我看来，它不够安全。我意识到有潜在的好处，并且我意识到 OpenId、OAuth 和其他类似机制等系统的价值，但将银行信息置于其背后，我不这么认为。

在我的脑海中，这是我最犹豫的两个原因：

1.  由于 OAuth 用于如此多的网站，它可能对坏人更有吸引力。
2.  你相信别人的系统。如果 Facebook 遭到入侵，您的网站也会突然遭到入侵。

    *   虽然 OAuth 可能比您自己制作的任何东西都要好，但它也受到您无法监控活动/无效登录等事实的影响。审核此类事情是确保您的网站安全的主要部分。

[Jeff Atwood 在这篇优秀的博客文章](http://www.codinghorror.com/blog/2008/05/openid-does-the-world-really-need-yet-another-username-and-password.html)中列出了 OpenId 的优点以及几个问题（类似）。

# linux - tar 文件数限制

> ID：11969731
> 
> 赞同：1
> 
> 时间：2012-08-15T12:59:50.727
> 
> 标签：linux, gzip, tar

gzip 有文件限制吗谢谢 ER

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:01:51.530

`gzip`只需要一个文件。如果您需要更多压缩，请使用`tar`（或其他归档工具）创建一个归档文件`gzip`（通常会生成一个*.tar.gz*或*.tgz*文件）。

*编辑*

此外，近十年来，gzip 不再有 4 GB 的限制。

# continuous-integration - Clang 静态分析器和持续集成？

> ID：11969732
> 
> 赞同：4
> 
> 时间：2012-08-15T12:59:55.940
> 
> 标签：continuous-integration, clang, static-analysis, clang-static-analyzer

事实证明，Clang 静态分析器在发现实际问题方面比 PC-Lint 和其他 Lint 变体和类似软件可靠得多（在阅读背景时毫不奇怪）。即使对于自动构建，该`scan-build`方法也很好，但它缺少一个我没有找到任何信息的重要功能。我如何才能确定最新的提交是否会恶化整体代码质量？！当然，我必须比较前一次运行的错误计数。但是解析 HTML（也给出了伪随机命名方案）似乎很奇怪。

在这种情况下，有什么方法可以有意义地集成静态分析器？

注意：在`ccc-analyzer`这里运行似乎也没有多大意义。虽然在这种情况下，输出是纯文本（即不是 HTML），因此更容易解析。但我愿意接受建议，即使它们涉及`ccc-analyzer`在单个文件而不是`scan-build`整个`make`过程上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:09:40.997

你提到你正在使用持续集成，但你没有提到你正在使用什么平台。我认为您正在寻找的应该在平台报告中。大多数 CI 平台将跟踪许多用于报告和绘图的关键指标。如果你弄清楚你的系统是如何工作的，你应该能够跟踪每个构建的错误计数，然后你的图表应该提供一个简单的视觉线索，让数字随着时间的推移而上升。或者，您可以使用您的平台 API 来确定当前构建中的值是否高于上次构建中的值。

# java - ObjectOutput / InputStream 的上下文切换

> ID：11969743
> 
> 赞同：0
> 
> 时间：2012-08-15T13:00:49.253
> 
> 标签：java, stream, context-switching

一个开放的 ObjectOutputStream 最初发送了一个特定的对象，并且补充的 ObjectInputStream 成功地反序列化了它。然后将此 OIS 传递给单独线程类的构造函数，该线程类需要继续无缝地读取（）进一步（更新）对象。这部分没有发生。当“上下文切换”流在这里进行时，我是否有一些关于要求的问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:12:59.390

最重要的事情是`flush()`在创建 ObjectInputStream 之前对 ObjectOutputStream 进行处理，如果不这样做可能会陷入死锁。

将 ObjectInputStream 传递给另一个线程不会导致问题，事实上，如果您从不同的线程读取而不是写入，它可以避免这个问题。

# facebook-opengraph - 开放图教程假设？和误解？导致“发生错误”？

> ID：11969745
> 
> 赞同：0
> 
> 时间：2012-08-15T13:01:05.463
> 
> 标签：facebook-opengraph

重要的是要注意，我以前从未创建过 Facebook 应用程序，也不知道从哪里开始 - 假设答案将在开放图形分步教程中给出。

我到了第 4 步，得到了现在著名的“发生错误”对话框——这可能是由于代码示例的一个或多个误解和问题。我很欣赏一些清晰度，因为某些“假设”可能是我所有问题的根源

为了节省时间，我跳到教程的末尾并下载了示例代码并将其用于我的最终代码（object.html）

1.  应用程序域和站点 URL - 你的教程说选择网站选项 - 我使用以下应用程序域：

www.teamworks.co.za 和网站网址：www.teamworks.co.za/grow/object.html

这意味着我可以独立于 facebook 访问该页面，无论我是否登录

问题：这是意图还是应该在 facebook 内部运行？（即我在这里遗漏了什么吗？） 问题：该页面会从我的 Facebook 登录中获取我的用户凭据吗？（当我打开 facebook 并在同一浏览器上登录时 - 但选项卡不同）打开页面的链接？

1.  图片：这里没有明确的说明来更改示例代码中的图片位置：`<meta property="og:image" content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" />`

或在这里：

```
<img title="Stuffed Cookies" src="http://fbwerks.com:8000/zhen/cookie.jpg" width="550"/> 
```

除了在最终的可下载代码示例中表明：

```
<meta property="og:image" content="http://YOUR_URL/cookie.jpg" /> 
```

和

```
<img title="Oreo Stuffed Cookies" src="http://YOUR_URL/cookie.jpg" width="550"/><br /> 
```

当我使用提供的图像位置时，我在调试时遇到错误，例如：

Tiny og:image：og:image 引用的所有图像在两个维度上都必须至少为 200px。请检查给定 url 中带有标签 og:image 的所有图像，并确保其符合最低规格。

当我使用自己的图像位置时，调试器不会抱怨，即 mydomain/grow/cookie.jpg（对于两个图像）

问题：因此我可以安全地假设我可以用我自己的替换图像 url 并且这不是“发生错误”对话框的原因吗？

1.  下载示例有一个额外的代码，即 `<fb:add-to-timeline></fb:add-to-timeline>`>注意最后的双>>-我现在删除了它，因为它不在教程中问题：我可以安全地假设删除不是“错误”的原因发生”对话框？

2.  下载的示例标签： `<head prefix="og: http://ogp.me/ns# og_recipebox: http://ogp.me/ns/apps/YOUR_NAMESPACE#">` 翻译为： `<head prefix="og: http://ogp.me/ns# og_recipebox: http://ogp.me/ns/apps/groworganic#">` 看起来与单击接收对象“获取代码”按钮时生成的标签不同，即 `<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# groworganic: http://ogp.me/ns/fb/groworganic#">` 问题：哪个是正确的使用？

5.下载的例子有这个脚本标签

```
<script src="http://connect.facebook.net/en_US/all.js"></script> 
```

我假设它替换了教程中的以下代码：

```
// Load the SDK Asynchronously
(function(d){
  var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  d.getElementsByTagName('head')[0].appendChild(js);
}(document)); 
```

问题：这个假设正确吗？

我不再收到错误，但我也没有成功 - 我现在没有得到任何响应 - 但是代码通过了调试测试。

我将不得不重新开始，同时我在下面复制了我的代码，希望我能得到上面问题的一些答案。

下面是我的 object.html 的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"> 
<head prefix="og: http://ogp.me/ns# og_recipebox: http://ogp.me/ns/apps/groworganic#"> 
<meta property="fb:app_id" content="472670852757244" /> 
<meta property="og:type" content="groworganic:recepie" />
<meta property="og:title" content="Oreo Stuffed Cookies" /> 
<meta property="og:image"  content="http://www.teamworks.co.za/grow/cookie.jpg" /> 
<meta property="og:description" content="The Turducken of Cookies" /> 
<meta property="og:url" content="http://www.teamworks.co.za/grow/object.html"> <script type="text/javascript">
function postCook()
{
FB.api(
'/me/groworganic:cook',
'post',
{ recipe: 'http://www.teamworks.co.za/grow/object.html' },
function(response) {
if (!response) {
alert('Error occurred : No Response');
} else if (response.error) {
alert('Error occurred : ' + response.error);
} else {
alert('Cook was successful! Action ID: ' + response.id);
}
});
}
</script>
</head> 
<body> 
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
FB.init({ 
appId:'472670852757244', cookie:true, 
status:true, xfbml:true, oauth:true
});
</script>
<h3>
<font size="30" face="verdana" color="grey">Stuffed Cookies
</font> 
</h3> 
<p>
<img title="Oreo Stuffed Cookies" src="http://www.teamworks.co.za/grow/cookie.jpg" width="550"/><br />
</p>       
<form>
<input type="button" value="Cook" onclick="postCook()" />
</form>
<fb:activity actions="groworganic:cook"></fb:activity>
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:22:58.353

> 问题：该页面会从我的 Facebook 登录中获取我的用户凭据吗？

不，您必须先让用户自己登录（让他们“连接”到您的应用程序）。您可以`FB.login`为此使用 JS SDK。

对于您的其余帖子：**一次有太多问题。**

> 重要的是要注意我以前从未创建过 Facebook 应用程序

那么您可能不应该立即开始发布 Open Graph 操作，而是首先加深您对用户身份验证和与 Graph API 交互如何工作的了解。做一些简单的事情，用户可以登录并从显示的 Graph API 或其他东西中获取他的个人信息……一旦您了解了这些基本知识，您就可以转到更复杂的主题，例如 Open Graph 操作。

# sql - 从 SQL 轮询 BizTalk - 提交/回滚事务

> ID：11969749
> 
> 赞同：2
> 
> 时间：2012-08-15T13:01:08.590
> 
> 标签：sql, biztalk

我有一个接收位置，它正在使用 WCF-SQL 适配器对存储过程进行轮询。

接收位置正在使用自定义管道。

该存储过程正在对某些行执行“更新”操作。

我需要 BizTalk 对事务执行 ROLLBACK 以防管道在稍后阶段失败。

我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:02:06.387

默认情况下，WCF-SQL 适配器将在[分布式 DTC 事务下调用您的存储过程](http://social.technet.microsoft.com/wiki/contents/articles/3470.typed-polling-with-wcf-sql-adapter-best-practices-and-troubleshooting-tips.aspx)

此设置 ( `UseAmbientTransaction`) 位于接收位置属性、绑定选项卡、事务中。

（未经测试！）这应该意味着如果 proc 或管道失败，连接将自动回滚。

当在编排中的原子范围内使用时，这同样应该在适配器上强制执行 2 阶段提交/ACID。

# php - 如果在同一订单中多次购买同一商品，则视为多个单独商品

> ID：11969754
> 
> 赞同：0
> 
> 时间：2012-08-15T13:01:38.717
> 
> 标签：php, magento

我正在使用以下代码提取 Magento (4.1.1) 中的订单详细信息，效果很好。但是，如果一个产品被订购了两次，我需要有一个重复的行，所以如果同一个项目在同一个订单中多次购买，它们需要被视为多个单独的项目 - 目前 Magento 返回一个单一的产品线，对于同一商品的多次购买具有 Quantity 值：

```
$_customerId = Mage::getSingleton('customer/session')->getCustomerId();
    $lastOrderId = Mage::getSingleton('checkout/session')->getLastOrderId();
    $order = Mage::getSingleton('sales/order'); 
    $order->load($lastOrderId);
    $_totalData =$order->getData(); 
    $_order   = $this->getOrder();
    $allitems = $order->getAllItems();
    $index    = 1;

    $data   = ""

    foreach($allitems as $item)
    {
      $cjData.="|".$item->getPrice()."::".$item->getName()."::".$item->getQtyToShip();
      $index++;
    }

    echo $cjData 
```

如果以相同的顺序多次购买相同的物品，我需要将它们视为多个单独的物品 - 任何有助于实现这一点的帮助都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:24:13.667

您可以尝试添加一个[for 循环](http://php.net/manual/en/control-structures.for.php)以根据每个订单项的数量循环 x 次：

```
foreach($allitems as $item)
{   
    for($i = 1; $i <= $item->getQtyToShip(); $i++) {
        $cjData.="|".$item->getPrice()."::".$item->getName()."::1";
        $index++;   
    }
} 
```

我还没有测试过这个，所以它可能需要一些调整，但基本概念是循环直到`$i`等于`$item->getQtyToShip()`并且在循环的每次迭代`$i`中将通过`$i++`.

我还将字符串分配更改`$cjData`为仅将`1`每个项目的数量添加到`$cjData`. 我认为这应该会给您所要求的结果。

# c# - Oracle UDT (SdoGeometry) 插入 DBNull.Value 失败

> ID：11969756
> 
> 赞同：0
> 
> 时间：2012-08-15T13:01:44.027
> 
> 标签：c#, oracle, odp.net, user-defined-types, dbnull

我正在使用 ODP.NET 在远程 Oracle DB 和本地 Oracle XE DB 之间编写某种同步机制。我正在同步的表有一个空间列（因此是一个用户定义的类型，sdo_geometry）。我在 C# 中的逻辑在远程数据库上进行选择，遍历 OracleDataReader 的结果并将结果插入本地数据库。

这就像一个魅力，但是当空间列的值为 DBNull.Value 时，插入失败并显示以下消息：

```
Object reference not set to an instance of an object.

   at Oracle.DataAccess.Client.OracleParameter.PostBind_OracleObject(OracleConnection conn)
   at Oracle.DataAccess.Client.OracleParameter.PostBind(OracleConnection conn, OpoSqlValCtx* pOpoSqlValCtx, Int32 arraySize)
   at Oracle.DataAccess.Client.OracleCommand.ExecuteNonQuery()
   at Gwr.Bsb.Oli.Framework.Helpers.SynchronizationHelper.TryModifyData(OracleCommand cmd) 
```

代码看起来像：

```
var parameter = new OracleParameter(parameterName, OracleDbType.Object);
parameter.OracleDbType = OracleDbType.Object;
parameter.UdtTypeName = "MDSYS.SDO_GEOMETRY";
parameter.Direction = ParameterDirection.InputOutput;
parameter.Value = reader[i]; 
```

正如我之前所说。当有空间值时，代码效果很好。但是当**reader[i]**的值为 DBNull.Value 时，它​​会失败...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:33:50.107

有趣的东西......我看错了方向。

问题不在于插入，而是在执行插入时出现。问题与参数方向有关。似乎代码无法处理参数的输出方向。当我改变它时，一切又开始工作了。

所以问题暂时解决了。

# python - 使用 solr 和 haystack 进行高级搜索？

> ID：11969761
> 
> 赞同：2
> 
> 时间：2012-08-15T13:02:11.743
> 
> 标签：python, solr, django-haystack

假设您有一个查询：

```
(apples OR oranges) AND fresh location:cityGoesHere 
```

默认情况下，haystack 使用 auto_query，其中数据会自动转义，因此搜索将被记录为：

```
INFO: [collection1] webapp=/solr path=/select/ params={spellcheck=true&facet=on&fl=*+score&start=0&q=(\(apples+or+oranges\)+and+fresh+location\:cityGoesHere)&spellcheck.count=1&... 
```

当然，Solr 会将 "("、")" 和 ":" 字符视为文字，因此不会进行分组，并且将根据默认字段搜索整个文本，并且将忽略位置字段

有没有什么方法可以通过 haystack 实现高级 solr 搜索，除了解析查询并将其中的不同部分分配给 AutoQuery、Raw、Exact 输入类型（如认为合适），然后将 SearchQuerySets 链接在一起？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T10:41:03.567

我最终创建了自己的输入，主要是使用 Raw haystack 输入。

唯一的缺点是这个输入使用了 Solr 特定的语法，所以它不能与其他搜索后端一起使用。

* * *

后期编辑：

AltParser 也可以与 Extended Dismax 解析器结合使用。像黄油一样工作！

# c++ - 将枚举传递给另一个文件？C++

> ID：11969762
> 
> 赞同：5
> 
> 时间：2012-08-15T13:02:15.190
> 
> 标签：c++

第一次在这里发帖，我是 C++ 编程的初学者，学习它主要是因为我想知道它，因为它总是很有趣，因为它是如何工作的等等。
我正在尝试使用 SFML 2.0 制作一个简单的游戏，我的问题是：
我有一个枚举，例如：

```
 enum GameState
    {
        Menu,
        Battle,
        Map,
        SubMenu,
        Typing
    }; 
```

所以，我想制作一个这样的变量，使用

```
 GameState State = Menu; 
```

然后，将其传递给另一个文件

```
 extern GameState State; 
```

但我得到错误

```
 error: 'GameState' does not name a type 
```

如何将枚举传递给另一个文件？我试图通过将其作为 main.cpp 中的全局变量，然后将其包含在另一个文件的标题中来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T13:07:41.800

您必须将枚举放在头文件中，并用于`#include`将其包含在源文件中。

像这样的东西：

文件`gamestate.h`：

```
// These two lines prevents the file from being included multiple
// times in the same source file
#ifndef GAMESTATE_H_
#define GAMESTATE_H_

enum GameState
{
    Menu,
    Battle,
    Map,
    SubMenu,
    Typing
};

// Declare (which is different from defining) a global variable, to be
// visible by all who include this file.
// The actual definition of the variable is in the gamestate.cpp file.
extern GameState State;

#endif // GAMESTATE_H_ 
```

文件`gamestate.cpp`：

```
#include "gamestate.h"

// Define (which is different from declaring) a global variable.
GameState State = Menu;  // State is `Menu` when program is started

// Other variables and functions etc. 
```

文件`main.cpp`：

```
#include <iostream>
#include "gamestate.h"

int main()
{
    if (State == Menu)
        std::cout << "State is Menu\n";
} 
```

现在全局变量在文件`State`中*定义*，但由于该文件中的声明，`gamestate.cpp`可以在包含的所有源文件中引用。更重要的是，当您包含在源文件中时，也会定义枚举类型，因此您对它未定义的错误将消失。`gamestate.h``extern``GameState``gamestate.h`

有关声明和定义之间的区别，请参见例如[https://stackoverflow.com/a/1410632/440558](https://stackoverflow.com/a/1410632/440558)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:08:15.713

问题似乎是您已经在一个文件中定义了 GameState 的含义，但是 2 个文件需要知道定义。完成此操作的典型方法是创建一个头文件（扩展名为 .h），该头文件（使用#include）包含在两个源代码文件（最有可能是 .cpp）中，以便它出现在两个源代码文件中。这比仅复制和粘贴定义要好（要在其他地方使用它，您只需要 #include 语句；如果定义发生更改，您只需在 .h 文件中更改它，并且包含它的每个文件在重新编译时都会得到更改） .

# jsf - h:outputText 如果值出现在列表中，则呈现

> ID：11969768
> 
> 赞同：0
> 
> 时间：2012-08-15T13:02:56.717
> 
> 标签：jsf

只是想知道是否有可能在不遍历列表的情况下检查特定值是否出现在其中？

我有个人详细信息、姓名、年龄、出生日期等的列表，并且根据特定的出生日期，我将呈现一些 outputText。我确实遍历列表以填充表格，但我希望 outputText 出现在该表格之外，所以我有点不确定如何处理这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:07:46.660

您可以通过在托管 bean 中编写一个方法来执行此操作，该方法将执行逻辑并返回一个布尔值。然后，您可以在 EL 表达式中引用此方法。

```
public boolean isDateOfBirthFoshizzle() {
   //do business logic to check if DOB of any persons is foshizzle
   return retVal;
} 
```

在你的 EL 表达式中

```
<h:outputText value="Someone is foshizzle" rendered="#{managedBean.isDateOfBirthFoshizzle()}" /> 
```

# html - 边距：自动自动；

> ID：11969772
> 
> 赞同：0
> 
> 时间：2012-08-15T13:03:01.890
> 
> 标签：html, margin

这个工作吗？

```
margin: auto auto; 
```

我用过它，但它不是以垂直为中心，而是以水平为中心。

作为补充，我确实更改了第一个具有恒定大小的自动，但我仍然需要将其设为自动，因为我有动态变化的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:05:50.000

它按预期工作。[`margin: auto`](https://developer.mozilla.org/en-US/docs/CSS/margin)从不*垂直*居中。

# sql-server - SSAS 填补缺失的空白

> ID：11969773
> 
> 赞同：1
> 
> 时间：2012-08-15T13:03:02.420
> 
> 标签：sql-server, ssas, olap

假设我有一个这样的事实表：

```
ID  Date      Amount
1   Jan2012    100
1   Feb2012    110
1   April2012  150 
```

以及包含 2012 年所有月份的维度 dimDate。

浏览我的多维数据集时，我确切地看到了上面的内容，但我希望在 dimDate 维度上看到所有日期的一行，但更重要的是，我希望看到 March2012 行的值为 110（最后一个可用值）

它是可以在立方体上完成的吗？我知道可以通过在 4 月插入一行或者使用左连接查询在 DW 上完成，但我想知道它是否可以在多维数据集上完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:33:58.350

您可以创建计算度量。让我们称之为 [CalcAmount] 。表达式应该是

```
IIF(ISNULL([Measures].[Amount]),[Measures].[Amount].PREVMEMBER,[Measures].[Amount]) 
```

希望有帮助。

# yii - 引用 yii 中的关系应用默认范围

> ID：11969774
> 
> 赞同：5
> 
> 时间：2012-08-15T13:03:03.137
> 
> 标签：yii, relation, scopes, default-scope

我找不到太多关于在 yii 中将默认范围应用于模型的文档，我想知道是否有人可以解释或指出我正确的方向。

**我的问题的快速版本：**

是否可以将关系添加到默认范围，或者默认为模型上的每个 AR 搜索添加“with”条件？

**我的问题的长版本：**

我的应用程序的快速摘要：

我有两个模型，`provider`和`item`。其中有 am:1 关系，提供者可以有许多项目，但每个项目只能有一个提供者。

到目前为止，我有这些关系：

```
class Provider extends CActiveRecord
{
    ...
    public function relations()
    {
        return array(
            'items' => array(self::HAS_MANY, 'Item', 'id_provider', 'order'=>'rank DESC'),
        );
    }
    ...
}

class Item extends CActiveRecord
{
    ...
    public function relations()
    {
        return array(
            'provider' => array(self::BELONGS_TO, 'Provider', 'id_provider'),
        );
    }
    ...
} 
```

在我的项目模型中，我已经有一个 defaultScope 过滤掉所有离线项目（即只显示设置为的项目`offline = false`）：

```
public function defaultScope()
{
    $alias = $this->getTableAlias(false,false);
    return array(
        'condition'=>"`$alias`.`offline` = false",
    );
} 
```

我现在想要做的，也是过滤掉他们的提供者设置为离线的项目（即只显示`provider.offline = false`与 current 并排的项目`item.offline = false`）。

我尝试在 defaultScope 中加入提供者表：

```
public function defaultScope()
{
    $alias = $this->getTableAlias(false,false);
    return array(
        'join'=>"JOIN `provider` AS `provider` ON `provider`.`id` = `$alias`.`id_provider`",
        'condition'=>"`$alias`.`offline` = false AND `provider`.`offline` = false",
    );
} 
```

但是 JOIN 在 ON 语句之后应用，并导致错误 ( `CDbCommand failed to execute the SQL statement: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'provider.offline' in 'on clause'`)。

我还尝试向 defaultScope 添加一个 with 条件：

```
public function defaultScope()
{
    $alias = $this->getTableAlias(false,false);
    return array(
        'with'=>"provider",
        'condition'=>"`$alias`.`offline` = false AND `provider`.`offline` = false",
    );
} 
```

但是我得到了同样的错误：SQLSTATE[42S22]: Column not found: 1054 Unknown column 'provider.offline' in 'on clause'`）。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T17:08:27.140

我会尝试几件事：

首先，将您的条件更改为适用于整个事情（不要忘记，如果没有提供者的项目，它将不会返回提供者）

```
public function defaultScope()
{
    return array(
        'with'=> array("provider" => array(
            'condition'=> "t.offline = false AND provider.offline = false",
        )
    );
} 
```

其次，尝试将作用域添加到模型中，然后在默认作用域中引用它们，如下所示：

```
public function defaultScope()
{
    return array(
        'scopes'=> array('default'),
    );
}

class Provider extends CActiveRecord
{
    ...
    public function scopes()
    {
        ...
    }
    ...
}

class Item extends CActiveRecord
{
    ...
    public function scopes()
    {
        ...
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T08:24:37.067

刚遇到类似的问题。虽然 Benjamin 的第一个建议为我指明了正确的方向（非常感谢！），但我在使用 'condition' 和 'with' 时遇到了一个意想不到的问题，了解它可能会有所帮助。

如果您要加入的表（示例中的“provider”）有自己的 defaultScope，那么当您使用“with”时，它似乎会作为 SQL ON 子句的一部分应用，从而限制返回的行。

由于使用了外连接，因此您仍会为主表（“item”）中的每一行返回一条记录，但如果提供者的 defaultScope 阻止返回这些行，则某些行的“提供者”字段可能为空。

在您尝试应用涉及这些提供者字段之一的“条件”之前，这不会导致问题。这是作为连接后处理的 WHERE 子句的一部分完成的，但由于该字段为空，条件将失败，并且不会返回记录。

在某些情况下，这可能是您想要的行为，但在其他情况下，您可能希望使用[**on**](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-options)选项将 'provider' 字段上的测试移动到连接内：

```
public function defaultScope()
{
return array(
    'with'=> array("provider" => array(
        'condition'=> "t.offline = false",
        'on'=>"provider.offline = false",
    )
);
} 
```

# perl - 如何在 perl 中编码邮件主题？

> ID：11969775
> 
> 赞同：6
> 
> 时间：2012-08-15T13:03:02.950
> 
> 标签：perl, email, encoding, utf-8, subject

如何在 perl 中编码邮件主题？

现在我终于找到了一些东西，但它仍然无法正常工作：

```
use MIME::Words qw/encode_mimewords/;
$recipientsubject = encode_mimewords('Votre fichier a bien été envoyé'); 
```

但是（错误的）结果是：

> 主题：Votre fichier a bien =?ISO-8859-1?Q?=E9t=E9?= =?ISO-8859-1?Q?envoy=E9?=

显示：

> Votre fichier a bien étéenvoyé

（它吃掉一些空间）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T13:45:51.963

使用[Encode](http://p3rl.org/Encode::MIME::Header)，它是一个核心模块。

```
perl -Mutf8 -MEncode -E 'say encode("MIME-Header", "Votre fichier a bien été envoyé")' 
```

... 将输出以下任一项：

```
=?UTF-8?Q?Votre=20fichier=20a=20bien=20?= =?UTF-8?Q?=C3=A9t=C3=A9=20envoy=C3=A9?=
=?UTF-8?B?Vm90cmUgZmljaGllciBhIGJpZW4gw6l0w6kgZW52b3nDqQ==?= 
```

并解码：

```
perl -C -MEncode -E 'say decode("MIME-Header", "=?UTF-8?Q?Votre=20fichier=20a=20bien=20?= =?UTF-8?Q?=C3=A9t=C3=A9=20envoy=C3=A9?=")'
perl -C -MEncode -E 'say decode("MIME-Header", "=?UTF-8?B?Vm90cmUgZmljaGllciBhIGJpZW4gw6l0w6kgZW52b3nDqQ==?=")' 
```

这将打印：

```
Votre fichier a bien été envoyé 
```

如果您仍然有相同的结果，您应该提供有关您的 Perl 环境的更多信息。该版本是一个很好的入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-29T23:30:38.473

另一个处理非 ASCII 字符串 MIME 编码的模块是[Email::MIME::RFC2047](https://metacpan.org/pod/Email::MIME::RFC2047)。例如

```
use strict;
use warnings;
use utf8;

use Email::MIME::RFC2047::Encoder;
use Email::MIME::RFC2047::Decoder;

binmode(STDOUT, ':utf8');

my $encoder = Email::MIME::RFC2047::Encoder->new;
my $encoded = $encoder->encode_text('Votre fichier a bien été envoyé');
print "$encoded\n";

my $decoder = Email::MIME::RFC2047::Decoder->new;
my $decoded = $decoder->decode_text($encoded);
print "$decoded\n"; 
```

印刷

```
Votre fichier a bien =?utf-8?Q?=c3=a9t=c3=a9_envoy=c3=a9?=
Votre fichier a bien été envoyé 
```

Email::MIME::RFC2047 优于 Encode 的一些好处：

*   它尝试对尽可能少的单词使用 MIME 编码，也通过在短语中使用带引号的字符串。
*   它支持正确解码 To、From 或 Cc 标头中使用的 MIME 短语（使用 Encode 是不可能的）。
*   它支持 UTF-8 以外的其他字符集。
*   它在 MIME-Q 编码的单词中将空格编码为下划线。
*   它的 bug 比 Encode 少（据我所知没有）。

[披露：我是该模块的作者。]

# magento - Magento：管理员 - 产品搜索过滤器

> ID：11969777
> 
> 赞同：2
> 
> 时间：2012-08-15T13:03:06.637
> 
> 标签：magento, admin, filtering

我正在为拥有基于 Magento 的商店的客户工作。它塞满了产品，但所说的产品的名称有点乱。他没有坚持一种命名约定，而是多年来使用不同的约定。因此，每当他使用“管理”->“管理产品”部分中的“名称”过滤器查找某些内容时，结果仍有很多不足之处。

所以我想知道是否有办法让过滤算法更加宽松，特别是在词序方面。因为如果您有一个名称如“ *word1 word2 word3* ”的产品并且您搜索“ *word1 word3* ”，则该产品不会出现在结果中。

任何提示将不胜感激。干杯!

**8 月 28 日更新：**我的搜索将我带到 *Mage_Adminhtml_Block_Widget_Grid* 类，更准确地说是它的受保护方法 *_addColumnFilterToCollection()*。在这里你有*$cond*变量，如果你打印出来它会给你这样的东西：

> 数组 ([like] => Zend_Db_Expr Object([_expression:protected] => '%search term%' ))

在这里，如果我可以在它被提交到 *Zend_Db_Expr* 对象之前拦截该搜索词并将其变为“ *%search%term%* ”，我可能会解决我的问题。那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T21:42:41.843

这将需要编写具有一定复杂性的自定义模块。

`word1 word3`过滤应该至少返回匹配的子集，过滤确实返回的期望`word1 word2 word3`是基于 Magento 确实执行`OR`此网格过滤器搜索的错误假设。

事实*并非*如此。Magento 不执行`OR`，但`LIKE`在这种情况下搜索。

这也解释了为什么

```
LIKE name = '%word1 word2 word3%' 
```

通常*从不** 可以匹配 a 的结果集

```
LIKE name = '%word1 word3%' 
```

我认为这`Mage_Adminhtml_Block_Catalog_Product_Grid::_prepareCollection()`将是您的代码需要覆盖的最小值，以帮助您入门。

祝你好运！

* * *

[* 除了`word2 == word3`, 当然]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T22:15:44.997

您可以将“filter_condition_callback”添加到 Magento 中的任何网格。为 Magento 产品网格创建重写并将此参数添加到“名称”字段。像

```
$this->addColumn('name',
            array(
                'header'=> Mage::helper('catalog')->__('Name'),
                'index' => 'name',
                'filter_condition_callback' => array($this, 'filter_name_callback'),
        )); 
```

然后确定同一个类中的filter_name_callback方法。像这样的东西：

```
protected function filter_name_callback($collection, $column)
    {
        $names = $column->getFilter()->getValue();
        $namesArray = explode(' ', $names);
        $cond = array();
        foreach ($namesArray as $item)
        {
            $cond[] = 'main_table.name LIKe %'.$item.'%';
        }

        $collection->getSelect()->where("(".implode(' OR ', $cond).")");
    } 
```

代码没有经过测试，例子很简单，但我想你理解了这个想法；）祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:52:48.150

好的，这是解决此问题的方法。请注意，我没有对此进行太多测试，只是在我的本地测试 magento 上。所以可能会出现问题。

我们的工作类是 Mage_Adminhtml_Block_Widget_Grid，在 'app/code/core/Mage/Adminhtml/Block/Widget/Grid.php' 中找到。您应该将此文件复制到“app/code/local/Mage/Adminhtml/Block/Widget/Grid.php”中，以免覆盖核心类。

现在，在该文件中转到名为 _addColumnFilterToCollection 的函数。在这里，删除 '} else {' 语句中的所有内容并替换为：

```
$cond = $column->getFilter()->getCondition();
if ($field == "name" && isset($cond)) {
$filterOrig = $cond['like'];
$filterReplaced = str_replace(" ", "%", $filterOrig);
$newZendDbExpr = new Zend_Db_Expr($filterReplaced);
$modifCond = array('like'=>$newZendDbExpr);
$this->getCollection()->addFieldToFilter($field , $modifCond);
} else if ($field && isset($cond)) {
$this->getCollection()->addFieldToFilter($field , $cond);
} 
```

'$cond' 变量是这里的关键。如果你打印它，你会得到类似的东西：

```
Array([like] => Zend_Db_Expr Object([_expression:protected] => '%filter term%')); 
```

该代码片段基本上拦截了传递给 Zend_Db_Expr 对象的过滤器术语，将其传递给 str_replace() 以用 '%' 通配符替换任何空格，然后将其发送回对象。

因此，现在如果您有一个名称如“word1 word2 word3”的产品并按“word1 word3”搜索过滤器，您将获得正确的结果。我愿意接受建议，这可能不是最好的方法。我会在正确测试后更新。干杯!

**9 月 6 日更新**：嗯，经过一些现场测试，结果很好，正是我想要的。似乎也没有负面的性能影响。

有趣的事实是，这个小修改适用于在管理界面中有产品网格的每个地方进行过滤（例如，当手动创建新订单并单击添加产品时，或在管理类别 -> 任何类别中 - > 类别产品选项卡）

**9 月 6 日更新 2**：有一个问题。如果您在订单网格中并尝试​​按状态过滤，则会引发错误。我需要使此过滤器仅适用于名称字段。有任何想法吗？

**9 月 6 日更新 3**：我将脚本修改为仅适用于产品网格的名称字段。现在，通过可见性过滤产品或按状态排序等没有冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-15T06:59:20.247

要做通配符 % 搜索给定的列，如果你可以覆盖 core `Grid.php`，那么你可以在你的网格类中做这样的事情：

```
protected function _prepareColumns()
{
    parent::_prepareColumns();   

    // assuming the column is 'name' for product name in the product grid
    $this->getColumn('name')->setFilterConditionCallback([$this, 'allowWildcardInFilter']);
    ...
}

/**
 * Allow wildcard % in column search
 */
public function allowWildcardInFilter($collection, $column)
{
    if ($value = $column->getFilter()->getValue()) {
        if ($field = $column->getFilterIndex() ? $column->getFilterIndex() : $column->getIndex()) {
            /**
             * @var $helper Mage_Core_Model_Resource_Helper_Mysql4
             */
            $helper = Mage::getResourceHelper('core');
            $likeExpression = $helper->addLikeEscape($value, [
                'position' => 'any',
                'allow_string_mask' => true
            ]);
            $collection->addFieldToFilter($field, ['like' => $likeExpression]);
        }
    }
} 
```

# c++ - 编译包含在头文件中声明的函数的源文件

> ID：11969778
> 
> 赞同：0
> 
> 时间：2012-08-15T13:03:11.523
> 
> 标签：c++, class, compiler-construction, g++, forward-declaration

假设有一个源文件 un2.cpp

```
----un2.cpp----

class employee;
void employee::setname(string s)
{
.....(some  code)
} 
```

雇员类在 un2.h 中定义，其中声明了 setname()。现在，当我尝试通过 'cc -c un2.cpp -o un2.o' 编译 un2.cpp 时，我收到一条错误消息

```
 un2.cpp:3:16: error: invalid use of incomplete type ‘struct employee’
 un2.cpp:1:7: error: forward declaration of ‘struct employee’ 
```

为什么编译器不将employee 作为外部符号（就像它采用先前声明但未定义的符号一样）并编译un2.cpp 文件。

编译普通的未定义符号和未定义的类有什么区别吗？还有谁能告诉我（如果可能的话），只转发声明一个类并在其中定义符号的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:07:35.023

external 用于链接器，在编译代码时不会帮助您，因为编译器仅通过编写前向声明不知道您的类声明。

相反，您需要在 un2.cpp 文件中包含带有声明的标头才能进行编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T13:13:16.883

关键是类不是用符号表示的，而是必须知道完整的类结构才能生成代码。首先，编译器需要类定义来检查该类是否`employee`确实包含一个名为`setname`take a `string`and return 的成员函数`void`（如果没有，编译器必须返回一个错误）。此外，您需要在函数内访问类的其他成员（调用其他成员函数或访问数据成员），因此您需要这些声明，它们是类定义的一部分。在链接时，类名完全消失了（除了调试信息，以及作为成员函数和虚拟表符号的一部分）。

通常，在编写头文件的实现文件时，您应该在实现文件中包含头文件。这将确保您拥有定义在那里声明的所有内容所需的一切，除此之外还测试头文件，前提是您将其作为实现文件中的第一件事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T13:10:54.910

您没有将文件包含在类的声明中。前向声明在这里没有帮助，因为编译器不知道类是否包含这样的方法。

包括头文件，错误应该消失。

# memory - 伊甸园空间为 100% 时 JVM 崩溃

> ID：11969793
> 
> 赞同：2
> 
> 时间：2012-08-15T13:03:42.607
> 
> 标签：memory, jboss, crash, jvm

我有一个生产系统，其 JBoss 应用程序服务器在 JDK 1.6.0_24、JBoss 4.3 上运行。时不时地，服务器崩溃并且JVM创建的转储文件具有一致的结果：

```
{Heap before GC invocations=6421 (full 4675):
  PSYoungGen      total 521536K, used 518784K [0xdbc00000, 0xfbc00000, 0xfbc00000)
  eden space 518784K, 100% used [0xdbc00000,0xfb6a0000,0xfb6a0000)

  from space 2752K, 0% used [0xfb950000,0xfb950000,0xfbc00000)
  to   space 2752K, 0% used [0xfb6a0000,0xfb6a0000,0xfb950000)

 PSOldGen        total 1572864K, used 1572855K [0x7bc00000, 0xdbc00000, 0xdbc00000)
  object space 1572864K, 99% used [0x7bc00000,0xdbbfdeb8,0xdbc00000)
 PSPermGen       total 524288K, used 92683K [0x5bc00000, 0x7bc00000, 0x7bc00000)
  object space 524288K, 17% used [0x5bc00000,0x61682c30,0x7bc00000)
81507.318: [Full GC [PSYoungGen: 518784K->518784K(521536K)] [PSOldGen: 1572855K->1572855K(1572864K)] 2091639K->2091639K(2094400K) [PSPermGen: 92683K->92683K(524288K)], 1.5334976 secs] [Times: user=1.53 sys=0.00, real=1.53 secs] 
Heap after GC invocations=6421 (full 4675):
 PSYoungGen      total 521536K, used 518784K [0xdbc00000, 0xfbc00000, 0xfbc00000)
  eden space 518784K, 100% used [0xdbc00000,0xfb6a0000,0xfb6a0000)
  from space 2752K, 0% used [0xfb950000,0xfb950000,0xfbc00000)
  to   space 2752K, 0% used [0xfb6a0000,0xfb6a0000,0xfb950000)
 PSOldGen        total 1572864K, used 1572855K [0x7bc00000, 0xdbc00000, 0xdbc00000)
  object space 1572864K, 99% used [0x7bc00000,0xdbbfdeb8,0xdbc00000)
 PSPermGen       total 524288K, used 92683K [0x5bc00000, 0x7bc00000, 0x7bc00000)
  object space 524288K, 17% used [0x5bc00000,0x61682c30,0x7bc00000)
} 
```

对于 JAVA_OPTS，我们有：

> -服务器
> 
> -Xms2048m
> 
> -Xmx2048m
> 
> -Dsun.rmi.dgc.client.gcInterval=3600000
> 
> -Dsun.rmi.dgc.server.gcInterval=3600000
> 
> -Dsun.lang.ClassLoader.allowArraySyntax=true
> 
> -XX:NewSize=512m
> 
> -XX:MaxNewSize=512m
> 
> -XX:PermSize=512m
> 
> -XX:MaxPermSize=512m
> 
> -verbosegc
> 
> -XX:+PrintGC详情
> 
> -XX:+PrintGCTimeStamps
> 
> -XX:+PrintHeapAtGC
> 
> -XX:+CMSPermGenSweepingEnabled
> 
> -XX:-TraceClassLoading
> 
> -XX:-TraceClassUnloading

所以在我看来2GB就足够了，还有更多的内存可以使用，所以应该没有任何问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:23:05.633

你的内存用完了。您将堆大小设置为 2G，年轻代为 500M，老年代为 1500M，填充它可以使用的最大 2G（您的幸存者空间是空的但很低，它们可能太低而无法从伊甸园空间获取任何对象。

您应该尝试增加最大堆大小，如果仍然有问题，则需要监视内存使用情况，以检查是否没有任何泄漏或某些进程在内存使用量已经很高的情况下请求过多的新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:09:49.913

增加您的 Xmx 值。伊甸园空间物体在约 100% 的 OldGen 中无处可溢出。

[考虑使用JConsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)之类的东西附加到有问题的应用程序的 PID 并监视 JVM 内存使用情况。这将有助于确定与 JBoss 的某些交互是否导致堆崩溃，或者它是否是缓慢的内存泄漏。

# linq - linq 扩展方法，如何更新单个项目的多个属性？

> ID：11969796
> 
> 赞同：2
> 
> 时间：2012-08-15T13:03:45.757
> 
> 标签：linq, ado.net, sql-update, linq-extensions

在我的数据库中，我有一个要更新的项目。我尝试做这样的事情，但它不起作用：

```
db.Items.Where(t => t.Id == itemId).Select(t =>
            {
                t.CurrentValue = 99;
                t.TotalValue = 999;
            }); 
```

这段代码有什么用，但我认为这是低效的（我错了吗？）：

```
db.Items.Single(t => t.Id == itemId).TotalValue = 999;
db.Items.Single(t => t.Id == itemId).CurrentValue = 99;
db.SaveChanges(); 
```

有没有办法通过单个查询更新单个对象的不同属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:06:02.723

你是对的，`db.Items.Single(...)`多次运行可能不是最理想的。

调用它一次然后引用它的属性应该更有效：

```
var item = db.Items.Single(t => t.Id == itemId);
item.TotalValue = 999;
item.CurrentValue = 99;
db.SaveChanges(); 
```

# c - 使用 gstreamer 播放传入的 RTP 视频流

> ID：11969797
> 
> 赞同：1
> 
> 时间：2012-08-15T13:03:53.607
> 
> 标签：c, video-streaming, gstreamer, rtp

我找到了一个基于 gst-launch 的工作示例，用于通过 RTP 发送和接收视频流。我已将它们重写为 C。发件人工作正常，但收件人没有。我有两台电脑，A 和 B。当流式传输 B->A 时，它工作正常，但是当 A->B 时，B 没有显示流。流即将到达 B（使用 wireshark 检查）。你能看一下代码，看看有没有我没有发现的错误吗？

这是 gst-launch 应用程序：

```
VIDEO_CAPS="application/x-rtp,media=(string)video,clock-rate=(int)90000,encoding-name=(string)H263-1998"
gst-launch-0.10 -v gstrtpbin name=rtpbin latency=100 \
    udpsrc caps=$VIDEO_CAPS port=5000 \
    ! rtpbin.recv_rtp_sink_0 rtpbin. \
    ! rtph263pdepay \
    ! ffdec_h263 \
    ! ffmpegcolorspace \
    ! autovideosink
    udpsrc port=5001 \
    ! rtpbin.recv_rtcp_sink_0 rtpbin.send_rtcp_src_0 \
    ! udpsink host=$1 port=5005 sync=false async=false 
```

相应的 C 代码在 [1] 上，因为它很长。

[1] [http://pastebin.com/54eHvZWH](http://pastebin.com/54eHvZWH)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:24:02.453

您没有连接到 rtpbin 中的 request-pt-map 信号，而是在 udpsrc 上设置了上限。一般的想法是 rtpbin 告诉您“嘿，我收到了一个新的有效载荷编号，我应该分配给它的上限是多少？”。然后，您提供现在直接在 udpsrc 上设置的上限（减去有效负载编号）。我不确定这是否会有所帮助，但这是你应该这样做的方式。使用 GST_DEBUG=*rtp*:5 运行接收器也可能提供一些线索。

# c# - 使用 Fluent Validation 时禁用默认 DataAnnotations 不显眼的验证

> ID：11969798
> 
> 赞同：1
> 
> 时间：2012-08-15T13:04:03.333
> 
> 标签：c#, asp.net-mvc, data-annotations, fluentvalidation

我在 MVC 中使用 Fluent Validation 进行服务器端和不显眼的客户端验证。我不得不对其进行扩展以满足业务需求，并且遇到了默认 DataAnnotations 验证的问题。所以我只想完全禁用内置的 DataAnnotations 提供程序，并使用我自己的 Fluent Validation 扩展来进行此验证。

基本上，我需要停止呈现值类型的内置不显眼`data-val-`属性，例如数字和日期（data-val-number、data-val-date、data-val-required）。

我试过了：

```
ModelValidatorProviders.Providers.Clear(); 
```

这似乎摆脱了数字/日期属性，但所需的属性仍然存在。

我试过：

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

但这似乎没有任何作用。也许我把它放在错误的位置/顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:37:06.530

使用 Fluent Validation，它有自己的标志来禁用必需的属性，必须使用`FluentValidationModelValidatorProvider`. 以下代码将处理默认类型属性和必需属性：

```
//Don't use built-in type attributes (data-val-number, data-val-date)
ModelValidatorProviders.Providers.Clear();

FluentValidationModelValidatorProvider.Configure(
    provider =>
    {
        provider.ValidatorFactory = new UnityValidatorFactory(container);

        //Don't use built-in data-val-required
        provider.AddImplicitRequiredValidator = false;
    }
); 
```

# asp.net - 从将显示在 aspx 文件中的源文件中添加 换行符

> ID：11969805
> 
> 赞同：-2
> 
> 时间：2012-08-15T13:04:37.177
> 
> 标签：asp.net, .net, line-breaks

我的源文件中有如下代码：

```
desc = p.Description; 
```

我想在这个“desc”字段中添加一个中断，如下所示：

```
desc = p.Description +"<br>"+ moreDesc; 
```

这当然行不通。我想使用这个 desc 字段写入 aspx。关于如何引入
源文件的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:41:41.293

听起来换行符在页面上显示之前正在被编码。尝试[HttpUtility.HtmlDecode](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode.aspx)：

```
desc = HtmlDecode(p.Description + "<br>" + moreDesc); 
```

# java - java中的静态块和对象块访问

> ID：11969806
> 
> 赞同：1
> 
> 时间：2012-08-15T13:04:40.733
> 
> 标签：java, jvm

我读到了我在下面提到的对象块：

```
class Check {

    static {
        System.out.println("hello from Static");
    }
    //object block
    {
        System.out.println("This is my object block");
    }

    public static void main(String args[]) {
    }
} 
```

这是程序的输出

```
Hello from Static 
```

但是当我制作类的对象时，就会执行对象块。**我不明白这个过程是如何由 jvm 完成的。**垃圾收集器有什么作用吗？

```
class Check {

    static {
        System.out.println("hello from Static");
    }
    //object block

    {
        System.out.println("This is my object block");
    }

    public static void main(String args[]) {
        System.out.println("hello from main");
        Check obj = new check();
    }
} 
```

这是输出：

```
hello from Static
hello from main
This is my object block 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T13:10:20.497

每当类加载器加载类时，就会执行这些`static`块（这通常在每个 JVM 实例中执行一次，但我想您可能会创建一些*非常*奇怪的情况，即您有多个类加载器都加载类；这不是一个非常初学者级别的情况， 尽管）。每次创建该类（或其子类之一）的实例时，都会执行实例初始化程序块。您的程序要求：

1.  该类由JVM加载；这会触发静态初始化程序块 ( `hello from Static`)。
2.  执行`main`静态方法
    1.  A`println`被执行 ( `hello from main`)。
    2.  您创建一个`Check`. 这会触发实例初始化程序，导致`This is my object block`.

GC 与您所询问的行为 FTR 没有任何关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T13:09:47.847

根据 Java 语言规范，静态块将在类加载器加载和初始化时执行。至于初始化块，它们将在类实例化时执行。

请参阅Java 语言规范 (1.6) 中的[静态初始化](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.7)程序和[实例初始化程序部分](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T13:10:12.387

事件顺序

*   类被初始化，打印`hello from Static`
*   调用main方法，打印`hello from main`
*   对象被构造，打印`This is my object block`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T13:10:02.447

每当类加载到 JVM 中时，都会执行静态块。而对象块或构造器块将在您创建所述对象的实例时运行。

这篇文章很好地描述了这些差异： [http ://www.jusfortechies.com/java/core-java/static-blocks.php](http://www.jusfortechies.com/java/core-java/static-blocks.php)

# mysql - 让 SQL 使用选择表单元素，逗号分隔

> ID：11969808
> 
> 赞同：0
> 
> 时间：2012-08-15T13:04:45.273
> 
> 标签：mysql, select, where, comma, delimited

我试图允许用户仅查看某些记录，其中查询变量由用户使用表单给出。该表单包含一个日期选择器和 3 个选择元素，用户可以在其中选择多个选项，允许的选项由 SQL 使用`SELECT DISTINCT`.

日期选择有效，但 SELECT 列表仅在选择一个值时有效。我觉得问题是由“结果”页面上不正确的 SQL 引起的。我不知道如何使 SQL 使用逗号分隔的字符串（例如：user1、user2、user3 等。这是我的 SQL 查询：

```
SELECT *
FROM exp_core
WHERE `time` >= startdate 
AND `time` <= enddate 
AND user LIKE uservar 
AND type LIKE typevar 
AND trnsact LIKE trnsactvar 
```

`uservar`,`typevar`和`trnsactvar`是逗号分隔的形式变量。谁知道如何让 SQL 将这些值视为单独的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:11:47.417

对于多个变量，您必须使用 IN 运算符。

```
SELECT *
FROM exp_core
WHERE `time` >= startdate 
AND `time` <= enddate 
AND user IN (uservar) 
AND type IN (typevar) 
AND trnsact IN (trnsactvar) 
```

# javascript - 在 js sdk 中手动设置访问令牌

> ID：11969812
> 
> 赞同：1
> 
> 时间：2012-08-15T13:05:08.323
> 
> 标签：javascript, facebook-javascript-sdk

我目前正在开发一个使用 Facebook 登录并希望使用 Facebook 评论的 iOS 应用程序。

iOS SDK 不支持 Facebook 评论，也无法使用 /graph API 访问。所以我们被迫使用这个的网络版本。

现在我们希望用户需要先使用 iOS SDK 在应用程序内部登录，然后才能使用评论。但是由于两者都使用不同的 cookie，虽然您可以在应用程序中登录，但这并不意味着加载的 web 视图将正确地代表登录的用户（如果他完全登录的话）。

现在我在 facebook js sdk 中挖掘了一下，发现了一些关于 setAccessToken 的提及，这些都是我无法访问的私有方法，所以我有什么办法可以强制或伪造，但是你会称之为 javascript SDK 登录？使用我从 iOS SDK 收到的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:21:33.303

好的，好吧，回答我自己的问题，以便其他人可以看到。

基本上只使用 iOS SDK 这是不可能的。要为 javascript 保留此会话，您需要所谓的 signed_request。创建此签名请求所需的数据在 iOS sdk 中不可用。

一个可能的解决方法是有一个单独的后端。在那里发送 oauth 信息（例如 PHP 设置）。使用 PHP SDK 来授权所说的 oauth 信息。PHP sdk 确实允许您检索签名的请求。将此请求返回给客户端（应用程序）并使用它来设置 facebook 的 authResponse 数据。（我没有使用过这个设置，但这将是一种获取签名请求的方法）

# objective-c - 将 UIImage 转换为 tiff/tif 文件

> ID：11969813
> 
> 赞同：3
> 
> 时间：2012-08-15T13:05:13.050
> 
> 标签：objective-c, uiimage, uiimagepickercontroller, tiff, image-conversion

在我的 iPhone 应用程序中，我需要将 UIImage 转换为 tiff/tif 文件，以便使用 tif 类型的参数调用一些 API。所以我应该从 iphone 照片库中获取 UIImage 或从相机中拍照。请让我知道这种转换（UIImage 到 tif/tiff）是否可行，如果可能的话，最好的方法是什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-22T07:02:43.427

```
NSLog(@"I am using MagicWand Library");
//GIT path https://github.com/marforic/imagemagick_lib_iphone

MagickWandGenesis();
magick_wand = NewMagickWand();
MagickSetFormat(magick_wand, "tiff");
//NSData * dataObject = UIImagePNGRepresentation([UIImage imageNamed:@"daftpunk.jpg"]);
NSData * dataObject = UIImageJPEGRepresentation([UIImage imageNamed:@"daftpunk.jpg"], 1.0);
//UIImageJPEGRepresentation([imageViewButton imageForState:UIControlStateNormal], 90);
MagickBooleanType status;
status = MagickReadImageBlob(magick_wand, [dataObject bytes], [dataObject length]);
if (status == MagickFalse) {
    ThrowWandException(magick_wand);
}

size_t my_size;
unsigned char * my_image = MagickGetImageBlob(magick_wand, &my_size);
NSData * data = [[NSData alloc] initWithBytes:my_image length:my_size];
free(my_image);
magick_wand = DestroyMagickWand(magick_wand);
MagickWandTerminus();
UIImage * image = [[UIImage alloc] initWithData:data];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0]; //Get the docs directory
NSString *filePath = [documentsPath stringByAppendingPathComponent:@"DAFTPUNK.tif"]; //Add the file name
[data writeToFile:filePath atomically:YES];

[imageViewButton setImage:image forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:30:02.813

`UIImage`不是一种图像文件格式；这只是 iOS 显示图像的一种方式。它从手机上的某个地方获取图像并将它们放在屏幕上。无论这些图像采用何种格式，您都可以将它们转换为 tiff，因为`UIImage`支持显示该文件类型。

tiff 方法没有原生`UIImage`方法，但您可以执行`UIImagePNGRepresentation`or `UIImageJPEGRepresentation`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:13:11.177

[ImageMagick](http://www.imagemagick.org/script/index.php)在 iOS 上运行，似乎符合要求。但是，我会考虑修改 API，假设您可以访问它。如果大多数图像已经采用某种格式并且必须进行转换，那么您的客户需要等待很多时间。如果您的 API 可以与多种格式的图像进行交互，那么您已经为许多人节省了一些时间。

# python - 涉及 py2exe 和 python 服务的问题

> ID：11969815
> 
> 赞同：1
> 
> 时间：2012-08-15T13:05:31.303
> 
> 标签：python

我的目标是创建一个（或多个）可用于安装 Windows 系统服务的 .exe。目前这只是一个概念证明，所以我的所有服务都是写入文件以确认它的存在。

当我从 .py 文件调用服务时，它会安装并运行良好。当我使用 py2exe 从中生成 .exe 时，它​​会运行良好，但是我确实在 Windows 事件日志（应用程序）中收到一些消息，表明某些库未找到。有时windows在启动后会停止服务，有时windows会忽略“找不到模块”错误。所有这些都发生在 XP SP3 机器上。

当我将使用 py2exe 编译的相同 .exe 移动到 Win 7 SP1 机器时，win7 通知我 .exe 无法在没有 python27.dll 的情况下运行。所以我在.exe的cwd中移动了python27.dll，然后Win 7告诉我它无法加载.dll。当我尝试在 XP SP2 机器上运行 .exe 时，XP 告诉我无法加载该文件。

下面是对应的代码：

PySvc.py（这是实际的服务，PySvc.py install 是用于从提示符安装它的字符串：

```
import win32service  
import win32serviceutil  
import win32event
import servicemanager

class PySvc(win32serviceutil.ServiceFramework):  
    _svc_name_ = "PySvc"  

    _svc_display_name_ = "Python Test"  
    _svc_description_ = "Service Test"  

    def __init__(self, args):  
        win32serviceutil.ServiceFramework.__init__(self,args)  
        self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)  

    # Meat and potatos. This is the actual code that's run. Currently testing
    # to see behavior inside and outside of loop.
    def SvcDoRun(self):  

        f = open('test.dat', 'w+')  
        rc = None  
        f.write('OUTSIDE L00P\n')  
        # continue iteration if stop event not recieved  
        while rc != win32event.WAIT_OBJECT_0:  
            f.write('BEAUTIFUL TEST DATA NEW INSIDE L00P\n')  
            f.flush()  
            # block for 5 seconds and listen for a stop event  
            rc = win32event.WaitForSingleObject(self.hWaitStop, 5000)  

        f.write('SHUTTING DOWN\n')  
        f.close()  

    # called on shut down      
    def SvcStop(self):  
        self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)  
        win32event.SetEvent(self.hWaitStop)  

if __name__ == '__main__':  
    win32serviceutil.HandleCommandLine(PySvc) 
```

以下是“setup.py”的代码。Setup.py py2exe 是用于创建 .exe 的字符串。

```
from distutils.core import setup
import py2exe

setup(
            name = 'PySvc',
            description = 'Service Test',
            version = '1.00.00',
                service = ['PySvc'],

                console = ['PySvc.py'],
                zipfile=None,
                options = {
                                "py2exe":{
                                           "includes":"win32service,win32serviceutil,win32event,servicemanager",

                                    },
                            },
    ) 
```

由于 .exe 在本地机器上明显成功，但在其他几台机器（没有安装 python）上失败，我目前倾向于认为这是导入或编译导入方式的问题。如果有人能提供一些关于为什么这个 .exe 不想像它应该那样表现的见解，我将永远感激不尽。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:07:35.880

如果没有更多信息，我无法 100% 确定，但是，我遇到了类似的问题。事实证明，在 Python 2.6、2.7、3.0、3.1 中，您需要自己将 c 运行时 dll 与您的包捆绑在一起。

因为您已经安装了 python，所以您可能已经安装了它。您的最终用户可能不会。[您可以在 py2exe 的网站](http://www.py2exe.org/index.cgi/Tutorial#Step52)上找到有关此问题的更多信息。

# vhdl - 双向数据总线设计

> ID：11969826
> 
> 赞同：6
> 
> 时间：2012-08-15T13:06:09.773
> 
> 标签：vhdl

我需要通过双向数据总线 (ULPI) 与芯片通信。

据我所知，数据在时钟上升沿移出 ULPI 总线，并在时钟下降沿读取。我的问题是，在读取寄存器时，我首先需要对上升沿敏感（将命令写入数据总线上的芯片），然后在从芯片读取寄存器输出到总线时对下降沿敏感。

我不清楚如何设计这个最好的方式。

我尝试了一个带有 case 语句的进程，但要使其正常工作，我的进程需要对上升沿和下降沿都敏感，我认为这不好。还是真的没问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T16:06:53.720

双向总线通常通过使用三态缓冲器来实现。当三态缓冲器输出为“Z”时，您可以从`inout`端口读取，当缓冲器驱动线路时，它充当输出。在 VHDL 中，这可以通过直接实例化一个原语（例如`IOBUF`，对于 Xilinx 器件）来实现，或者通过让您的综合工具通过描述如上所述的逻辑来推断三态缓冲区来实现。

您在这里处理 3 个信号：

*   `T`这是你的三态控制。该信号将来自您的同步逻辑，了解 ULPI 的协议。那是因为总线是共享的，所以必须有某种方法可以知道何时应该接收数据和发送数据。
*   `I`这是您希望通过总线发送的输入数据，在被适当的时钟注册后。
*   `O`这是您在任何注册/同步之前通过总线接收的输出数据。

**关键：三态缓冲区不是同步的。**这是您在三态缓冲区之前/之后所做的，它将正确同步您的信号。在这种情况下，您必须在时钟上升沿将您的输入同步到三态缓冲区（待发送），并在时钟下降沿同步从三态缓冲区/IOBUF 接收的注册数据。

**样品设计。**

```
library ieee;
use ieee.std_logic_1164.all; 

library unisim; -- for xilinx IOBUF
use unisim.vcomponents.all;

entity iobuffer_example is
   port (
      I_CLK                : in    std_logic;  -- synchronized with bidir bus
      IO_DATA              : inout std_logic;  -- data to/from external pin on bidir bus
      I_DIR_CTRL           : in    std_logic;  -- from other VHDL logic, controlling bidir bus direction
      O_DATA_FROM_EXTERNAL : out   std_logic;  -- data received over bidir bus
      I_DATA_TO_EXTERNAL   : in    std_logic);  -- data to send over bidir bus

end entity iobuffer_example;

architecture io_buffer_arch of iobuffer_example is
   signal data_in : std_logic;
   signal data_out : std_logic;
begin

   IOBUF_Inst : IOBUF
      port map (
         O     => data_in,              -- data from bidir bus
         IO    => IO_DATA,              -- data on bidir bus
         I     => data_out,             -- data to bidir bus
         T     => I_DIR_CTRL); -- 3-state enable input, high=input, low=output

   Register_Input : process (I_CLK) is
   begin
      if (falling_edge(I_CLK)) then
         O_DATA_FROM_EXTERNAL <= data_in;
      end if;
   end process Register_Input;

   Register_Output : process (I_CLK) is
   begin
      if (rising_edge(I_CLK)) then
         data_out <= I_DATA_TO_EXTERNAL;
      end if;
   end process Register_Output;

end architecture io_buffer_arch; 
```

**笔记。**

注意跨时钟域交叉。这里有许多可能的数据从总线传出和传出的交叉点，特别是如果您的内部逻辑驱动在与总线时钟不同的时钟上。如果没有更多细节，我无法提出建议。

如果您希望综合工具推断出三态缓冲区的行为表示，您可以做这样的事情，而不是使用 unisim 库和`IOBUF`：

```
PROCESS (I_DIR_CTRL, IO_DATA)
   BEGIN 
      IF( I_DIR_CTRL = '1') THEN 
         IO_DATA <= 'Z'; 
      ELSE 
         IO_DATA <= data_out; 
      END IF; 
      data_in <= IO_DATA;
END PROCESS; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-27T07:28:32.323

我知道这是一篇非常古老的文章，但我的评论是针对想要连接/实施 ULPI 的人。在 ULPI 中没有三态数据缓冲区。如果您想了解如何在 ULPI 中实现传输/传输，请阅读“ULPI 接口规范”中的第 2.3.1 章总线所有权。

如果您在接受的答案中编写 vhdl，您的代码将不会一直有效。您必须注意的一些事项是：

*   轮回循环
*   中止数据

# sql - Rails - 在 sql 查询中

> ID：11969829
> 
> 赞同：0
> 
> 时间：2012-08-15T13:06:32.630
> 
> 标签：sql, ruby-on-rails

我有两个模型，书籍和目录。

```
class Book < ActiveRecord::Base
   has_and_belongs_to_many :catalogs
end

class Catalog < ActiveRecord::Base
   has_and_belongs_to_many :books
end 
```

我需要查找**仅**属于特定目录列表的书籍。我努力了，

```
DEFAULT_CATALOGS = ["A","B"]
Book.joins(:catalogs).where("catalogname = ?",DEFAULT_CATALOGS) 
```

但我得到一个异常 Mysql2::Error: Operand should contain 1 column(s):

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:10:34.277

它应该是：

```
Book.joins(:catalogs).where("catalogs.catalogname IN (?)", DEFAULT_CATALOGS) 
```

或者：

```
Book.joins(:catalogs).where(:catalogs => {:catalogname => DEFAULT_CATALOGS}) 
```

# eclipse - M2E不适合大项目？

> ID：11969830
> 
> 赞同：-1
> 
> 时间：2012-08-15T13:06:37.463
> 
> 标签：eclipse, memory, eclipse-plugin, m2eclipse, m2e

我有一个由 10 个 eclipse 项目组成的基于 java 的网站。

```
4 of them contains Entities+DTOs
4 of them contains EJBs+DAOs+services
1 EAR that contains those 8 projects
1 WAR that is made of 20 managed beans and 20 JSF page, along with 12 composite component.
A Jboss As 5.1 server and a tomcat 7 server. 
```

问题是eclipse很慢，经常会出现“out of memory”的错误然后关机。它在具有 6GB 内存的计算机上运行良好，但具有 4GB 的计算机无法处理它。

我有一个朋友有相同的环境（eclipse 版本，jboss 版本等），它运行良好，3GB 内存，而且他的项目比我的大得多。

唯一不同的是他没有使用M2E。相反，他在`pom.xml`从这里到那里的复制 jar 中有一些疯狂的代码。但是他的 pom.xml 需要 7h30 才能执行`mvn clean install -t4`，我的需要 2 分钟。

这是一个常见问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:08:24.710

如果 Eclipse 告诉您它快用完了，我建议您为 Eclipse 分配更多内存。将此添加到您的`eclipse.ini`：

```
-vmargs
-Xms256m
-Xmx512m 
```

每行后都需要回车，我认为它应该在文件的最后。至于为什么您遇到问题而您的朋友没有，没有简单的答案。你们有不同的项目和可能不同的设置（IDE 版本、Java 版本、环境变量等）。我认为与 M2E 本身相关的内存问题并不常见。

# php - 返回空字符串或空值是否有更多优势？

> ID：11969831
> 
> 赞同：6
> 
> 时间：2012-08-15T13:06:45.657
> 
> 标签：php, return-value, return-type

如果我正在编写以下方法（例如），是否被认为是一种好的做法：

A：如果文档不存在，返回一个空字符串？

B：返回`null`值？

在完成了很多 Java 和 Java 中的方法需要返回类型之后，我的印象是返回一致类型是最佳实践，在 PHP 中也是这种情况还是返回`null`值更好？

```
DocumentClass
{
    public function getDir($documentId)
    {
        /* Code to get location of document  */
        return (file_exists($document) ? $document : '');
    }
}

if (!empty($documentClass->getDir(5))
{
    /* Do this */
} 
```

如果返回一个`null`值更好，你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T13:14:04.657

### PHP 约定

返回布尔值`FALSE`。

### 面向对象方法

抛出异常。此外，您应该使用`dir_exitsts`仅返回布尔值（true of false）的方法（或您喜欢的任何其他名称）。并在调用之前使用它`getDir`

这确实没有具体的规则。它完全取决于你。

我遵循 返回的*PHP 方式*`false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T13:11:22.007

你会如何处理这个返回值？这应该表示逻辑错误、非法输入 - 还是只是一些边缘情况？

`==`在这两种“错误”情况下，我都会坚持使用异常而不是一些边缘返回值 - 特别是因为 PHP 是弱类型语言，并且在某些（愚蠢的）书面表达中混合 NULL 和 '' 太容易了。

对于边缘情况，也许我会坚持`FALSE`作为返回值。在我看来，这是一种有点坏的方法（查看这个链接以获得[真正令人抓狂的例子](http://php.net/function.array-search#refsect1-function.array-search-returnvalues)），但至少它是 PHP 中的一个常见习语。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T13:12:31.580

[`file_exists`](http://php.net/manual/en/function.file-exists.php)对不存在的文件返回**FALSE 。**

所以你可以用这种方式改变你的状况

```
if (false ! == $documentClass->getDir(5))
{
    /* Do this */
} 
```

选择 ： **[`is_readable`](http://www.php.net/manual/en/function.is-readable.php)**

> 如果文件名指定的文件或目录存在并且可读，则返回**TRUE ，否则返回 FALSE。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T13:19:54.200

有两个流行的返回值：`false`或`null`

PHP 的内部函数似乎`false`出于任意原因而受到青睐，但我个人更喜欢它，`null`因为它是代表`undefined`.

旁注：测试 false ( `false`=== $x) 比`is_null($x)`:)输入更多

然而，在很多情况下，接收到这个返回值的代码不能用它做任何有意义的事情；这是您可以抛出异常以跳过该代码段的时候，就像在 Java 中一样；它是一种方便的错误处理流控制机制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T14:04:39.563

看到 questoin 似乎是关于 OOP 的，那么请注意，您也可以决定自己创建一个[null object](http://en.wikipedia.org/wiki/Null_Object_pattern)，该模式上的这个维基百科页面包含一个“描述”，碰巧使用目录列表器作为示例, 伙计们和女孩们...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-24T11:45:54.840

我将尝试用尽可能少的意见来回答这个基于意见的边缘问题。

从 PHP7.1 开始，“[可空返回类型](https://www.php.net/manual/en/migration71.new-features.php)”可用。

没有“错误的返回类型”或“空字符串返回类型”之类的东西。

从 PHP8 开始，“[空安全运算符](https://stackoverflow.com/q/12351737/2943403)”变得可用。

如果我正在创建一个返回布尔值的函数（或方法），那么它将具有一个函数名，该函数名也表明应该期望布尔返回值（例如以`is`, `was`,`has`等开头的东西）并且调用代码总是可以安全地使用`===`如果需要，检查它的值。我不会选择性地`null`从这些函数中返回。如果有任何理由偏离布尔类型结果，那么我将抛出异常。

当一个函数要返回一个数组时，我也不会选择返回`null`——如果数组以外的任何东西都是合适的，我会再次抛出一个异常。一个空数组是一个错误的值，所以我不需要`null`为此目的。

至于字符串和对象类型的返回，我绝对赞成选择性地使用空值。区分零长度字符串和空字符串可能非常有用。我也更喜欢 a`null`而不是空对象，因为与空数组不同，[空对象是真实](https://3v4l.org/Sscjn)的。

从 PHP7 开始，“[空合并运算符](https://www.php.net/manual/en/migration70.new-features.php)”变得可用。这允许非常简洁的语法回退到默认值。

所有这些对语言的贡献都促使 PHP 开发人员为了方便而倾向于使用空值。

诚然，“[混合返回类型](https://php.watch/versions/8.0/mixed-type#:%7E:text=mixed%20is%20a%20pseudo%20type,%2C%20callable%20%2C%20and%20even%20resource%20.)”在 PHP8 中变得可用，但这只会打开一个已经松散/宽容的系统。我更经常尝试寻找方法来收紧我的项目，以使它们不易损坏。

# ios - 在 Facebook 上发布文本

> ID：11969833
> 
> 赞同：-4
> 
> 时间：2012-08-15T13:06:56.443
> 
> 标签：ios, objective-c, iphone, facebook

我有一个 NSString，我想将它发布在我的墙上。[我在这里](https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/)阅读了文件。我遵循这一步。第二步，我下载了sdk。在 sdk 文件夹中的 src 文件夹中有 facebook-ios-sdk.xcodeproj 文件。我打开文件并运行它。但我不知道如何导入我的项目。此外，文件夹中有示例项目，但它们不起作用。

[我从这里](https://developers.facebook.com)下载 FacebookSDK.framework 。示例项目在 sdk 中工作，但是当我导入框架并在框架中获取实例对象时，出现 15 个错误。请帮我。从现在开始谢谢你。FBLoginView* fb = [[FBLoginView alloc] init]; // 我实例化了它

错误是；

```
Ld /Users/apple/Library/Developer/Xcode/DerivedData/FaceDeneme-gatrfdmgbcwtpyecvenlafosmqfn/Build/Products/Debug-iphonesimulator/FaceDeneme.app/FaceDeneme normal i386
    cd /Users/apple/Documents/FaceDeneme
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Volumes/Xcode/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang
-arch i386 -isysroot /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk
-L/Users/apple/Library/Developer/Xcode/DerivedData/FaceDeneme-gatrfdmgbcwtpyecvenlafosmqfn/Build/Products/Debug-iphonesimulator
-L/Users/apple/Documents/FaceDeneme -F/Users/apple/Library/Developer/Xcode/DerivedData/FaceDeneme-gatrfdmgbcwtpyecvenlafosmqfn/Build/Products/Debug-iphonesimulator
-F/Users/apple/Documents/FaceDeneme/../FacebookSDK -filelist /Users/apple/Library/Developer/Xcode/DerivedData/FaceDeneme-gatrfdmgbcwtpyecvenlafosmqfn/Build/Intermediates/FaceDeneme.build/Debug-iphonesimulator/FaceDeneme.build/Objects-normal/i386/FaceDeneme.LinkFileList
-mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -framework CoreLocation -framework FacebookSDK -framework Accounts -o /Users/apple/Library/Developer/Xcode/DerivedData/FaceDeneme-gatrfdmgbcwtpyecvenlafosmqfn/Build/Products/Debug-iphonesimulator/FaceDeneme.app/FaceDeneme

Undefined symbols for architecture i386:   "_sqlite3_open_v2", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)   "_sqlite3_exec", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)   "_sqlite3_close", referenced from:
      ___23-[FBCacheIndex dealloc]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)   "_sqlite3_finalize", referenced from:
      _releaseStatement in FacebookSDK(FBCacheIndex.o)   "_sqlite3_errmsg", referenced from:
      _releaseStatement in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      _initializeStatement in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
      ...   "_sqlite3_bind_text", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_bind_double", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_bind_int", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_step", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _dropTrimmingTable] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
      ...   "_sqlite3_prepare_v2", referenced from:
      _initializeStatement in FacebookSDK(FBCacheIndex.o)   "_sqlite3_reset", referenced from:
      _initializeStatement in FacebookSDK(FBCacheIndex.o)   "_sqlite3_column_text", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_column_double", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_column_int", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o) ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:21:21.407

您应该再次遵循 Facebook 设置指南。你没有正确设置它，你还没有准备好使用它。您那里的错误告诉您您没有包含 sqlite3 库。

Facebook 库需要此库，您的工作是确保它也存在于您的项目中。这是设置的一部分，请查看以下链接：

[https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project](https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project)

[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

# soap - 使用 wsimport 为 nillable 生成多态方法

> ID：11969837
> 
> 赞同：1
> 
> 时间：2012-08-15T13:07:13.530
> 
> 标签：soap, wsdl, wsdl2java

当使用 wsimport 为带有第二个可空（所谓的“可选”）参数的 SOAP ws 生成 java 客户端时，我得到：

```
ISoap.mySoapMethod(Integer notOptional, Integer optional) { … } 
```

而不是获得两种方法：

```
ISoap.mySoapMethod(Integer notOptional) {
    return this.mySoapMethod(notOptional, NULL);
}

ISoap.mySoapMethod(Integer notOptional, Integer optional) { … } 
```

有什么办法可以存档，或者有什么理由说明这不是一个好主意？

# r - 使用表达式等创建多行标签

> ID：11969838
> 
> 赞同：2
> 
> 时间：2012-08-15T13:07:17.170
> 
> 标签：r

这是代码示例

```
set.seed(1)
tmp <- matrix(replicate(4, rnorm(50)), ncol=4)
panel.cor <- function(x, y, digits=2, prefix="", cex.cor, ...)
{
  usr <- par("usr"); on.exit(par(usr))
  par(usr = c(0, 1, 0, 1))
  rp <- cor(x, y, method="pearson", use="pairwise.complete.obs")
  rs <- cor(x, y, method="spearman", use="pairwise.complete.obs")
  rp <- format(rp, digits=digits)
  rs <- format(rs, digits=digits)
  txt <- substitute(list(R[p] == rp, R[s] == rs), list(rp=rp, rs=rs))
  if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
  text(0.5, 0.5, txt, cex = 1.5)
}
panel.my.points <- function(x, y) {
  points(x, y)
  abline(0, 1)
}
pairs(tmp, 
      lower.panel=panel.cor, 
      upper.panel=panel.my.points, 
      labels=c("model 1\nD1", "model 2\nD1", "model 1\nD2", "model 2\nD2")) 
```

它返回绘图 ![在此处输入图像描述](../Images/6057931ef327007048dd95e39c2806ef.png) 但我想在单独的行上显示两个相关系数 Pearson 和 Spearman。对于我插入的普通文本`\n`以进行两行输出（如对角线上的标签）。我怎样才能在两行中输出相关系数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:41:22.427

分别定义 Pearson (`txta`在下面的代码中) 和 Spearman ( `txtb`) 系数然后调用`text`两次怎么样：

```
set.seed(1)
tmp <- matrix(replicate(4, rnorm(50)), ncol=4)
panel.cor <- function(x, y, digits=2, prefix="", cex.cor, ...)
{
  usr <- par("usr"); on.exit(par(usr))
  par(usr = c(0, 1, 0, 1))
  rp <- cor(x, y, method="pearson", use="pairwise.complete.obs")
  rs <- cor(x, y, method="spearman", use="pairwise.complete.obs")
  rp <- format(rp, digits=digits)
  rs <- format(rs, digits=digits)
  txt <- substitute(list(R[p] == rp, R[s] == rs), list(rp=rp, rs=rs))
  txta <- substitute(R[p] == rp, list(rp=rp))
  txtb <- substitute(R[s] == rs, list(rs=rs))
  if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
  text(0.5, 0.6, txta, cex = 1.5)
  text(0.5, 0.4, txtb, cex = 1.5)
}
panel.my.points <- function(x, y) {
  points(x, y)
  abline(0, 1)
}
pairs(tmp, 
      lower.panel=panel.cor, 
      upper.panel=panel.my.points, 
      labels=c("model 1\nD1", "model 2\nD1", "model 1\nD2", "model 2\nD2")) 
```

这给出了：

![在此处输入图像描述](../Images/a8e886fbe8646c53baa3da4ef90c7f49.png)

# javascript - 从 Google Drive 请求文件元数据时缺少“downloadUrl”参数

> ID：11969839
> 
> 赞同：2
> 
> 时间：2012-08-15T13:07:18.290
> 
> 标签：javascript, google-drive-api

我正在尝试从 javascript 应用程序中获取电子表格文档的内容。但是来自的响应`'/drive/v2/files/' + documentId`没有“downloadUrl”属性。

我的代码是：

```
var apiKey, clientId, documentId, scopes;

documentId = "XXXXXXXXXX";
clientId = 'XXXXXXXXXXXXX.apps.googleusercontent.com';
apiKey = 'XXXXXXXXXXXXXXXXXXXXXXXX';

scopes = 'https://www.googleapis.com/auth/drive';

window.OnLoadCallback = function() {
  console.log("google client loaded!");
  gapi.client.setApiKey(apiKey);
  return window.setTimeout(checkAuth, 1);
};

window.checkAuth = function() {
  return gapi.auth.authorize({
    client_id: clientId,
    scope: scopes,
    immediate: true
  }, function(e) {
    console.log("authorized!");
    return gapi.client.request({
      'path': '/drive/v2/files/' + documentId,
      'method': 'GET',
      callback: function(theResponseJS, theResponseTXT) {
        var downloadUrl, myToken, myXHR;
        console.log(theResponseJS);
        console.log(theResponseJS.downloadUrl); //is missing

        myToken = gapi.auth.getToken();
        myXHR = new XMLHttpRequest();
        myXHR.open('GET', theResponseJS.downloadUrl, true);
        myXHR.setRequestHeader('Authorization', 'Bearer ' + myToken.access_token);
        myXHR.onreadystatechange = function(theProgressEvent) {
          if (myXHR.readyState === 4) {
            if (myXHR.status === 200) {
              return console.log(myXHR.response);
            }
          }
        };
        return myXHR.send();
      }
    });
  });
}; 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:52:41.147

Google doc 文件有一些内部/专有格式，似乎无法直接访问。唯一的选择是通过“exportLinks”集合将 Google 文档转换为其他一些明确定义的文档类型。

# java - 如何将基数为 10 的数字转换为 HTML 中的有序列表

> ID：11969840
> 
> 赞同：10
> 
> 时间：2012-08-15T13:07:22.073
> 
> 标签：java, decimal, numeric, alphabetical

我想将整数转换为等效的字母，例如 HTML 中的有序列表。

```
<ol type="a"> 
```

我试图将一个基数为 10 的数字转换为一个基数为 26 的 az 数字。
但这不是我想要的。

```
IN     WANT        GET      
-----------------------
1   =>  a       <=  a
2   =>  b       <=  b
3   =>  c       <=  c
4   =>  d       <=  d
5   =>  e       <=  e
6   =>  f       <=  f
7   =>  g       <=  g
8   =>  h       <=  h
9   =>  i       <=  i
10  =>  j       <=  j
11  =>  k       <=  k
12  =>  l       <=  l
13  =>  m       <=  m
14  =>  n       <=  n
15  =>  o       <=  o
16  =>  p       <=  p
17  =>  q       <=  q
18  =>  r       <=  r
19  =>  s       <=  s
20  =>  t       <=  t
21  =>  u       <=  u
22  =>  v       <=  v
23  =>  w       <=  w
24  =>  x       <=  x
25  =>  y       <=  y
26  =>  z       <=  az
27  =>  aa      <=  aa
28  =>  ab      <=  ab
29  =>  ac      <=  ac 
```

* * *

```
private final static char[] digits = {
'0' , 'a' , 'b' , 'c' , 'd' , 'e' , 'f' , 
'g' , 'h' , 'i' , 'j' , 'k' , 'l' , 
'm' , 'n' , 'o' , 'p' , 'q' , 'r' , 
's' , 't' , 'u' , 'v' , 'w' , 'x' , 'y' , 'z'
};

private static String numberToAlphaNumeric(long i, int radix) {

    char[] buf = new char[65];
    int charPos = 64;
    boolean negative = (i < 0);
    if (!negative) {
        i = -i;
    }
    while (i <= -radix) {
        buf[charPos--] = digits[(int)(-(i % radix))];
        i = i / radix;
    }
    buf[charPos] = digits[(int)(-i)];
    if (negative) { 
        buf[--charPos] = '-';
    }
    return new String(buf, charPos, (65 - charPos));
}

public static String numberToAlphaNumeric(long number) {
    ArrayList<String> list = new ArrayList<String>();
    for( int j = 0; list.size() != number; j++ ) {
        String alpha = numberToAlphaNumeric( j, digits.length );
        if(!alpha.contains( "0" )) {
            list.add( alpha );
        }
    }
    return list.get( list.size()-1 );
} 
```

我的第二个想法：

如果我将一个新的前导符号扩展到数字并将我的数字转换为以 27 为基数的数字，我在每个结转中都有新的符号，这是错误的，我可以将它们过滤掉。

这是非常低效和丑陋的，但我没有更多的想法。常用的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T13:36:21.183

这是基本算法。如果您需要更高效，请使用 StringBuffer：

```
 public static String getAlpha(int num) {

    String result = "";
    while (num > 0) {
      num--; // 1 => a, not 0 => a
      int remainder = num % 26;
      char digit = (char) (remainder + 97);
      result = digit + result;
      num = (num - remainder) / 26;
    }

    return result;
  } 
```

另一种方法是转换为基数 26，然后将 97 添加到您获得的字符串中的每个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T06:18:18.040

将 A 到 Z 存储在从 1 到 26 的数组索引中，例如 alphArr[]

```
i = Input

If(i<26){
  Print alphArr[i]
  }else{
  //Consider i=27
  count = i/26  (here, count=1)
  alphabet = i%26  (here alphabet =1)
  print alphArr[count]+””+alphArr[alphabet] // Which will be “AA”
} 
```

# python - django-registration：由于密码中的字符无效，中文用户无法注册

> ID：11969847
> 
> 赞同：2
> 
> 时间：2012-08-15T13:07:44.650
> 
> 标签：python, django, internationalization, django-registration

来自新加坡的人报告说他无法注册我的网站。该网站是一个 Django 项目，我们使用 django-registration 模块。错误消息说关于密码字段：

```
this value may contain only letters, numbers and etc 
```

用户说他在密码中只使用了拉丁字母，但他有一个中文键盘，并且他的系统 (Windows) 配置为输入中文字符。我不知道如何在我的开发环境中重现该问题。

有谁知道什么可能导致这个问题？django-registration 是否适用于非 ASCII 字符？用户说他只使用拉丁字符，所以问题可能是他的密码被编码为 Unicode，但我不太确定。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:41:31.550

我想问题不在于密码，而在于用户名。见功能`UserCreationForm`和`UserChangeForm` [这里](https://github.com/django/django/blob/master/django/contrib/auth/forms.py)

```
username = forms.RegexField(
        label=_("Username"), max_length=30, regex=r"^[\w.@+-]+$",
        help_text = _("Required. 30 characters or fewer. Letters, digits and "
                      "@/./+/-/_ only."),
        error_messages = {
            'invalid': _("This value may contain only letters, numbers and "
                         "@/./+/-/_ characters.")}) 
```

可能是他使用了一些不满足这个正则表达式的拉丁字符。

在不匹配此正则表达式时，您可能会收到此错误。

# php - 试图理解 Drupal 7 计算域模块

> ID：11969849
> 
> 赞同：0
> 
> 时间：2012-08-15T13:07:48.010
> 
> 标签：php, drupal, drupal-7, drupal-computed-field

我刚刚安装了计算字段模块，我对如何使用它有点迷茫。我的内容类型中有 2 个字段：`field_shortdesc`和`field_audio_description`.

如果`field_shortdesc`是空白我需要显示`field_audio_description`，反之亦然。

我需要将哪些代码放入计算代码和显示代码区域？似乎我连最简单的代码都无法工作。

例如，如果我放入`$entity_field[0]['value'] = "test";`计算区域，然后放入`print $entity_field[0]['value'];`显示代码区域，则不会打印任何内容。显然我在做一些完全错误的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:41:22.280

请注意“显示代码”部分中的帮助文本：

> 此代码应为`$display_output`变量分配一个字符串，该字符串将在显示字段时打印。

而不是`print $entity_field[0]['value']`尝试`$display_output = $entity_field[0]['value']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:16:05.907

我认为计算字段模块不是满足您要求的正确解决方案。

在我看来，使用 Ajax 状态系统是最好的选择。

[http://colorado2010.camps.drupal.org/drupalcampcolorado.org/sessions/dynamic-forms-drupal-7-ajax-and-states.html](http://colorado2010.camps.drupal.org/drupalcampcolorado.org/sessions/dynamic-forms-drupal-7-ajax-and-states.html)

[http://drupal.org/node/752056](http://drupal.org/node/752056)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T19:44:45.670

如果您正在谈论在使用字段的视图中显示值，而不是查看节点，则可以通过视图设置更简单的方法来执行此操作，而无需添加其他字段。

**如果您只想显示一个默认值，即使两者都存在**：

*   将字段 1（可选字段）添加到视图但从显示中排除
*   将字段 2（默认字段）添加到视图并编辑“无结果行为”以在字段 2 为空时显示字段 1 的值。

**如果您想在两者都存在的情况下显示这两个值，并且您正在使用表格**：

*   将这两个字段都添加到视图中，但在表格设置中，使用适当的分隔符将字段 1 的显示与字段 2 放在同一列中。如果一个字段或另一个字段为空，则视图似乎足够聪明，不会输出分隔符。

**如果不使用表格，但想要显示两个值**：

*   添加字段 1 并从显示中排除。
*   添加字段 2 并编辑“重写结果”设置以显示两者。确保未选中“无结果行为”下的“如果为空则隐藏重写”框。

# asp.net-mvc - 路由表中的 Html.Action 和 No route 与提供的值匹配 which route which route

> ID：11969850
> 
> 赞同：0
> 
> 时间：2012-08-15T13:08:05.803
> 
> 标签：asp.net-mvc

当使用特定控制器和操作调用 Html.Action 时，我得到“路由表中的路由与提供的值不匹配”。是否有可能获得不匹配的实际路线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:26:29.077

我建议您查看可以从 NuGet 获得的[Route Debugger 工具(MVC 3/.NET 4)。](http://haacked.com/archive/2011/04/13/routedebugger-2.aspx)这应该提供您将/将需要查看生成的内容以及匹配的路由/为什么没有匹配的相关诊断。

对于以前的版本，请查看为 Route Debugging 创建的[Phil Haack 工具。](https://github.com/Haacked/RouteMagic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T09:00:47.260

有同样的问题，在这篇文章的帮助下解决了：

[https://eliasbland.wordpress.com/2010/04/06/error-no-route-in-the-route-table-matches-the-supplied-values-when-using-html-action-or-html- renderaction-in-asp-net-mvc/](https://eliasbland.wordpress.com/2010/04/06/error-no-route-in-the-route-table-matches-the-supplied-values-when-using-html-action-or-html-renderaction-in-asp-net-mvc/)

# TL;博士;

需要有一个默认路由处理程序映射控制器和操作值`Html.Action`以及`Html.RenderAction`方法才能工作。

# google-app-engine - 在 AppEngine 日志查看器中，我可以按与模式不匹配的标签进行过滤

> ID：11969853
> 
> 赞同：3
> 
> 时间：2012-08-15T13:08:19.943
> 
> 标签：google-app-engine

AppEngine 日志查看器能够按标签进行过滤。例如，如果我想查找 url 以 /static 开头的所有日志，我可以将带有标签选项的过滤器选择为

```
path:/static.* 
```

但是，我应该放置什么以使过滤器显示与此模式**不匹配的日志？**[在此处](https://stackoverflow.com/questions/899422/regular-expression-for-a-string-that-does-not-start-with-a-sequence)尝试示例会使日志查看器崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:08:32.613

语法应该是

```
path:/(?!static).* 
```

但是，这也不起作用。

同时，假设您没有其他以 开头的网址`s`，您可以这样做

```
path:/[^s].* 
```

ps：下次您发现崩溃或错误时，请您在[http://code.google.com/p/googleappengine/issues/list](http://code.google.com/p/googleappengine/issues/list)提出问题。

**编辑：**

在一般情况下，正则表达式将是

```
path:/([^s]|s[^t]|st[^a]|sta[^t]|stat[^i]|stati[^c]).* 
```

# javascript - Highcharts没有在点之间画线

> ID：11969864
> 
> 赞同：4
> 
> 时间：2012-08-15T13:09:06.947
> 
> 标签：javascript, ajax, highcharts

编辑：问题是间隔不一致。在这篇文章和[这篇](https://stackoverflow.com/questions/11970233/how-to-access-javascript-array-values-within-a-setinterval-function)文章之间，它可以很容易地修复。

我正在使用 highcharts 绘制图表，在 highcharts 代码中提供初始点，然后使用 ajax 提取其余点。

初始点绘制得很好，前几个提取的点也可以正常工作，但是每隔几分钟这些点就会停止在图表上连接，然后它会自行纠正，然后又搞砸了。

![](../Images/a085e31683ff6ac8d0335674139ccf97.png)

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-26T19:35:50.417

有同样的问题。我的问题是空值（不是零，而是无值存在类型场景）是空字符串（“”）。将这些值更改为 null 为我神奇地连接了这些点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-11T19:49:17.770

您需要确保您有 null 而不是空字符串等，但还需要确保您已启用`connectNulls`如下`plotOptions`：

```
plotOptions: {
    series: {
        connectNulls: true
    }
} 
```

见[JS 小提琴](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/series-connectnulls-true/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T09:57:42.450

我有一个类似的问题，我注意到我的一些“空”值是`undefined`，有些是`null`值。我把这一切都改变了`null`，它成功了。

# outlook - Microsoft.Office.Interop.Outlook.SelectNamesDialog 获取电子邮件组

> ID：11969866
> 
> 赞同：1
> 
> 时间：2012-08-15T13:09:12.000
> 
> 标签：outlook, mapi

目前我正在使用 Outlook`Microsoft.Office.Interop.Outlook.SelectNamesDialog`获取**联系人**，但在**通讯簿**( `Microsoft.Office.Interop.Outlook.SelectNamesDialog`) 中也有**群组电子邮件**。

我正在寻找一种方法来获取该电子邮件组中的所有电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:44:49.757

对于您的联系人文件夹中的通讯组列表，上一个答案将失败。您需要做的就是访问 Recipient.AddressEntry.Members 集合（准备好处理空值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:27:02.673

以下是有关如何通过选择从**Exchange 分发列表中检索成员的示例。**[`SelectNamesDialog`](http://msdn.microsoft.com/en-us/library/bb147595.aspx)

```
Outlook.SelectNamesDialog names =  Globals.ThisAddIn.Application.Session.GetSelectNamesDialog();
names.SetDefaultDisplayMode(Outlook.OlDefaultSelectNamesDisplayMode.olDefaultMembers);
names.ForceResolution = true;
names.Caption = "Please selection something";
if (names.Display())
{
    Outlook.Recipients recipients = names.Recipients;
    foreach (Outlook.Recipient recipient in recipients)
    {
        Outlook.AddressEntry entry = recipient.AddressEntry;
        if (entry.AddressEntryUserType == Outlook.OlAddressEntryUserType.olExchangeDistributionListAddressEntry)
        {
            Outlook.ExchangeDistributionList list = entry.GetExchangeDistributionList();
            Outlook.AddressEntries members = list.GetExchangeDistributionListMembers();
            foreach (Outlook.AddressEntry member in members)
            {
                Outlook.ExchangeUser user = member.GetExchangeUser();
                string address = user.PrimarySmtpAddress;
            }
        }
    }
} 
```

一旦你有了地址，就很容易将它们添加到集合中。

# android - Android：GridView 右侧没有显示任何内容（wrap_content 不起作用？）

> ID：11969873
> 
> 赞同：0
> 
> 时间：2012-08-15T13:09:56.243
> 
> 标签：android, android-layout

我想在 android 中创建一个具有 2 个组件的 DialogFragment：左侧带有图像的 GridView 和右侧的大图像（这是 gridview 中所选图像的更大版本）。

问题是我看不到我的大图。似乎 GridView 占用了所有空间。

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingLeft="16dp"
android:paddingRight="16dp"
android:orientation="horizontal" 
android:background="#FFFFFF">

<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/image_overview"
android:layout_width="wrap_content" 
android:layout_height="fill_parent"
android:columnWidth="50dp"
android:numColumns="1"
android:gravity="left"
android:background="#FFFFFF"
/>

<ImageView
android:id="@+id/main_image"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:background="#FFFFFF"
/>
</LinearLayout> 
```

我已经尝试了很多参数，看看它是否有任何区别，但没有任何帮助。我的gridview很小（因为我放了一个小尺寸），但是右边的空间是空的。

如果我删除我的gridview，我可以看到大图。如果我为我的 gridview 设置一个特定的宽度，我也可以看到我的大图。

因此，如果我更改 GridView 的以下行

```
 android:layout_width="wrap_content" 
```

经过

```
 android:layout_width="100dp" 
```

它按预期工作。看起来 wrap_content 设置了更大的宽度。

这是创建我的 topvew 的代码（一些代码是注释，因为我尝试了一些东西来查看它是否有任何影响）：

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    getDialog().setTitle("Title Item");

    //Get complete View
    topView = inflater.inflate(R.layout.something, container, false);
imageAdapter = new ImageAdapter(this.getDialog().getContext());

    //Create the left panel (gridview of small images)
    GridView gridview = (GridView)topView.findViewById(R.id.image_overview);
    gridview.setAdapter(imageAdapter);
    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            currentBigImage = imageAdapter.getFilePath(position);
            updateMainImage();
        }

    });

    //gridview.setAdjustViewBounds(true);

    //Create the middle panel (big image)
    imageView = (ImageView)topView.findViewById(R.id.main_image);
    imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
    //imageView.setAdjustViewBounds(true);
    //imageView.setPadding(8, 8, 8, 8);
    updateMainImage();
    //v.invalidate();

    return topView;
} 
```

这是来自我的适配器的代码（为小图像创建单个视图）：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(50, 50));
        //imageView.setAdjustViewBounds(true);
        imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }
    imageView.setImageBitmap(BitmapFactory.decodeFile(paths.get(position)));
Log.i("parent.getWidth(): ", ""+parent.getWidth());
    return imageView;
} 
```

如您所见，我还打印了父级的宽度，这是一个非常大的数字。因为这里的视图是gridview中的单个item，所以我假设父级是gridview？如果是这样，我不确定宽度大是否正常，因为它是在 wrap_content 上配置的，但如果 Android 创建具有特定大小的对话框，即使使用 wrap_content 也可能是正常的。

任何人都知道如何使用 wrap_content 而不是固定大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:13:46.537

首先，感谢 Andy Harris 和 Dipak Keshariya 的帮助。它并没有完全解决问题，但它帮助我理解 android:layout_weight="0" 会导致问题。

在我在这里发布我的答案之前，我已经尝试过配置

```
android:layout_weight="1" 
```

仅适用于图像视图，但这不起作用。将两者都设置为 1，确实使 ImageView 可见，但是，它没有正确显示。imageview 的大小似乎是正确的，但它显示了图像的一部分（所以放大了）。

我尝试使用 ImageView.ScaleType 和 AdjustViewBounds，但没有任何效果。

如果我配置

```
android:layout_weight="1" 
```

仅对于 GridView，它会正确显示 GridView 和 ImageView，但在这种情况下，gridview 会占用所有相应的宽度，这使得对话框的宽度与平板电脑的屏幕一样（将 parentview 的宽度更改为 match_parent 不会不要改变它）。

所以我现在将继续使用固定大小。

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:56:28.293

在 GridView 和 ImageView 中，使用：

```
android:layout_width="0dp"
android:layout_weight="1" 
```

这应该解决它。如果您希望一个视图比另一个占用更多的可用屏幕空间，您可以尝试为每个视图使用不同的权重。

# django - Django 查询过滤

> ID：11969876
> 
> 赞同：1
> 
> 时间：2012-08-15T13:10:03.843
> 
> 标签：django, search, date, time

我正在为我的应用程序创建一个受欢迎的页面，在大多数情况下，这只是为了获得理解。

这个想法是将视图数除以天数，现在我不知道这是否会成功甚至有效，但就像我说的那样，它可以了解查询的工作原理......

在我看来，我有：

```
def popular(request):
    popular_posts = Post.objects.all().order_by('-id')[:50]
    return render_to_response(
        'posts/popular.html', 
        {'popular_posts': popular_posts}, 
    ) 
```

显然，这只是获取所有按 id 排序的对象。有没有一种方法可以实现类似于我正在寻找的东西而不需要大量复杂的代码？

我的字段被命名为：views 和 created。以下是我的想法。

```
(now - created) / views 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:22:47.427

您最好的选择是使用[查询表达式](https://docs.djangoproject.com/en/1.4/topics/db/queries/#query-expressions "查询表达式")。但是，我认为不可能使用这些将日期时间对象除以数字。我会试试看能不能让它工作。

# qt - 使用qt样式表拉伸边框图像时保留角落

> ID：11969877
> 
> 赞同：1
> 
> 时间：2012-08-15T13:10:05.253
> 
> 标签：qt, stylesheet, slice, css

我正在使用 Qt 4.7 并尝试将 Qt 样式表应用于我的应用程序。[正如这里](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-reference.html#border-image)提到的，在border-image的帮助下，您可以“按原样”拉伸带有左角的图像。这是一个[很好的例子](http://css-tricks.com/understanding-border-image/)，说明它应该如何工作。不幸的是，我无法得到相同的结果。我没有被保留的角落，而是在图像的中间部分被剪切和重复。我的代码中是否有任何错误或未在 Qt 中实现？（通过 gui 设计器添加到 MainWindow 的按钮）。

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    a.setStyleSheet( "QPushButton{ border-image: url(:/border-image-marked.png) 25 30 10 20 repeat repeat; }" );

    MainWindow w;
    w.show();

    return a.exec();
} 
```

图片取自上面的示例。[直接链接](http://www.norabrowndesign.com/css-experiments/images/border-image.png)到它。

ps 它在 QML 的[BorderImage](http://doc.qt.nokia.com/4.7-snapshot/qml-borderimage.html)中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:15:31.363

您正在尝试将您的 styleSheet 应用于不存在的 QPushButton。

根据[http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#border-image-prop](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#border-image-prop)只有以下元素支持这个 CSS 属性：

> QAbstractItemView 子类、QAbstractSpinBox 子类、QCheckBox、QComboBox、QFrame、QGroupBox、QLabel、QLineEdit、QMenu、QMenuBar、QPushButton、QRadioButton、QSplitter、QTextEdit 和 QToolTip 支持此属性。

# multithreading - 如何从工作线程打开对话框？

> ID：11969878
> 
> 赞同：1
> 
> 时间：2012-08-15T13:10:06.643
> 
> 标签：multithreading, pyside

我有一个在后台执行任务的 PySide 应用程序`QThread`。有时在任务的中间有一个步骤需要用户通过对话框进行输入。我无法`QtGui.QinputDialog.getText`从工作线程调用代码。

我有这样的事情：

```
class Communicate(QtCore.QObject):
   signal = QtCore.Signal((str, str))

def ask_user(title, text):
   return QtGui.QInputDialog.getText(None, title, text) 
```

（然后在实际完成工作的函数中）

```
def longtask():
   dialogneeded = network_io()
   if dialogneeded:
      x = Communicate()
      x.signal.connect(ask_user)
      x.signal.emit("A title", "Some text")
   more_long_work_to_do() 
```

我知道这个片段甚至没有查看用户给出的值，但我只是想得到至少可以显示对话框的东西。

这是我得到的错误：

```
[xcb] Extra reply data still left in queue
[xcb] This is most likely caused by a broken X extension library
[xcb] Aborting, sorry about that.
python: xcb_io.c:575: _XReply: Assertion `!xcb_xlib_extra_reply_data_left' failed.
Aborted 
```

# android - 使用 Android 运动传感器计算投掷运动力

> ID：11969883
> 
> 赞同：1
> 
> 时间：2012-08-15T13:10:41.550
> 
> 标签：android, accelerometer, distance, gravity

我已经学习 Android 一段时间了，并决定尝试创建一个简单的应用程序项目。该项目是一个简单的游戏，您可以将手机握在手中并进行投掷动作，之后应用程序将根据投掷动作的力量和手机的高度来计算投掷距离（可能还有轨迹） .

现在，我正在寻找的主要是一些关于从哪里开始的建议，因为我还没有任何使用内置传感器的经验（我选择这个项目的部分原因）。具体来说，您认为我应该使用哪些传感器（我假设加速度计和重力传感器的组合？）以及我应该如何使用它们来计算抛出的距离。

谁能指出我正确的方向？你将如何实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:49:47.560

据我了解，该任务在实践中几乎不可能正确完成，部分原因是该[问题](https://stackoverflow.com/questions/6647314/need-to-find-distance-using-gyroaccelerometer)的最佳答案指出了 Google Tech Talk 中的这段[视频](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)，特别是在 23:20，解释了这种困难任务。

物理学远远超出了我的理解，所以我无法解释具体原因，但我会接受这个作为我的答案。

# javascript - 正则表达式和javascript：匹配数字后跟空格和大写字母之间的所有内容

> ID：11969885
> 
> 赞同：1
> 
> 时间：2012-08-15T13:10:54.343
> 
> 标签：javascript, regex

我正在尝试编写一个与 javascript 一起使用的正则表达式。这个正则表达式应该能够匹配数字+空格+大写字母之间的所有内容。

这是一个例子：

```
var string = testtesttesttesttest1 This shuld be matched2 This shuld also be matched3 fdsfsfsd 
```

从这个字符串，我想得到

```
[0] = 1 This shuld be matched 
[1] = 2 This shuld also be matched 
```

我试过这个正则表达式：

```
(?<=\d)(.*)(?=[A-Z]) 
```

但是我找不到我需要的那个。这是示例[http://regexr.com?31reo](http://regexr.com?31reo)

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:16:07.820

```
var s = "testtesttesttesttest1 This shuld be matched2 This shuld also be matched3 fdsfsfsd";
var result = s.match(/\d [A-Z][^\d]+/g);
// ["1 This shuld be matched", "2 This shuld also be matched"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:16:13.877

```
string.match(/\d [A-Z]\D+(?=\d)/g);

["1 This shuld be matched", "2 This shuld also be matched"] 
```

# c# - 客户端按 CorrelationId 过滤消息

> ID：11969886
> 
> 赞同：0
> 
> 时间：2012-08-15T13:10:59.490
> 
> 标签：c#, ibm-mq

即使该消息不是队列中的第一个消息，我是否可以通过其 CorrelationId 过滤并从队列中获取消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:39:35.447

是的。您必须`MQGMO_MATCH_CORREL_ID`在`MQGetMessageOptions`.

```
 MQMessage getMsg = new MQMessage();

   MQGetMessageOptions gmo = new MQGetMessageOptions();
   gmo.MatchOptions = MQC.MQMO_MATCH_CORREL_ID;

   // Copy correlationID of the message you want to receive       
   getMsg.CorrelationId = correlationId;

   queue.Get(getMsg, gmo); 
```

编辑：

CorrelationId 用于关联两条消息，通常是请求和回复消息。所以它是这样做的。

1) 客户端应用程序发送请求消息。发送消息后缓存发送消息的messageId。

2）将此messageId用作消息选择的correlationId。

```
 recvdResponseMsg.CorrelationId = requestMsg.MessageId;
 gmo.MatchOptions = MQC.MQMO_MATCH_CORREL_ID; 
```

3）在服务器应用程序（处理请求消息）中，发送响应消息时，只需将请求消息的messageId复制到响应消息的correlationId即可。

```
 responseMsg.CorrelationId = requestMsg.MessageId; 
```

# java - 有没有办法将已经运行的浏览器附加到 java 中的 selenium webdriver？

> ID：11969893
> 
> 赞同：7
> 
> 时间：2012-08-15T13:11:23.233
> 
> 标签：java, selenium-webdriver

我正在开发一个应用程序，我们需要在其中检查 Web 应用程序是否正在运行，并且 url 给出了预期的结果。

我们的调度程序每天运行这个应用程序 12 次。在每次启动时，都会执行 firefox 驱动程序并打开一个新的浏览器窗口来执行操作。

我想要一种技术，我们打开 firefox 浏览器 1 次，并在 selenium-driver 的每次调用中重用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T07:39:22.777

我实际上并不完全确定您可以切换到不是由驱动程序生成的窗口。我认为从事 selenium 2 项目的人在切换到由不同驱动程序生成的窗口方面做了一些工作。当你这样做时：

```
driver.getWindowHandles() 
```

您所得到的只是由调用它的驱动程序对象产生的窗口。

这是一个相当古老的功能请求：[允许 webdriver 附加到正在运行的浏览器](http://code.google.com/p/selenium/issues/detail?id=18&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary)。所以现在是不可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T20:04:22.160

你可以看到[我写的一个例子](https://github.com/djangofan/WebDriverTestingTemplate)，它证明重用浏览器在 WebDriver 中工作得很好。基本上，只要浏览器窗口是从 WebDriver 实例化的，那么您就可以使用 getWindowHandles() 始终抓住它。如果您打开了多个窗口，只需使用 List 跟踪它们。您可以使用各种 WebDriver 方法来识别以某种方式出现或包含某些信息的窗口。

换句话说，如果浏览器窗口不是由 WebDriver 打开的，那么 WebDriver 就没有能力挂钩它。

一个粗略的例子：

```
public static boolean selectWindow(WebDriver driver, String windowTitle){
    //Search ALL currently available windows
    for (String handle : driver.getWindowHandles()) {
        String newWindowTitle = driver.switchTo().window(handle).getTitle();
        if(newWindowTitle.equalsIgnoreCase(windowTitle))
            //if it was found break out of the wait
            return true;
    }
    return false;

} 
```

在我做的一个项目中，我创建了一种返回某些 int 状态代码的方法，具体取决于我的窗口排列。如果状态码是我所期望的，那么我知道下一个测试可以继续进行，而无需再次登录或打开新窗口。

当然，如果您的测试框架（例如 Surefire 或 TestNG）按类分叉线程，那么每个类都需要一个 webdriver 实例。如果您的测试框架按方法分叉，那么您需要将 webdriver 实例作为参数传递给测试方法，以便线程可以访问它。

# c# - 字符串消息问题 = Regex.Replace(message , "\\", "");

> ID：11969894
> 
> 赞同：3
> 
> 时间：2012-08-15T13:11:26.377
> 
> 标签：c#, regex, string

我正在用黑色空格替换字符“\”。

这是字符串，

```
string message = "http:\/\/www.youtube.com\/v\/"
string message = Regex.Replace(message , "\\", ""); 
```

但它无法正常工作，输出消息假设为“http://www.youtube.com/v/”，任何人都可以帮助我，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T13:14:30.747

您的字符串没有反斜杠！

字符串中的单个反斜杠具有“转义”下一个字符的特殊属性。因此，您的字符串确实包含以下内容：

> [http://www.youtube.com/v/](http://www.youtube.com/v/)

字符串中的每个反斜杠都在转义下一个正斜杠。它不是一个实际的反斜杠字符，因此搜索该字符将一无所获。

**编辑：**根据我的编译器，`\/`这不是有效的转义序列。正斜杠没有特殊含义，因此无法转义。您的字符串在技术上无效。根据您获得该字符串的方式，您有不同的选择。`@`在字符串前放置一个 at 符号：

```
string message = @"http:\/\/www.youtube.com\/v\/" 
```

将按字面意思查看它，什么都不转义（除了关闭引号）。在这种情况下，您的字符串中将有可以替换的实际反斜杠字符。

如其他答案中所述，要替换反斜杠，您实际上需要四个，如下所示：

```
Regex.Replace(message, "\\\\", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T13:14:46.277

您不需要转义正斜杠：

```
string message = "http://www.youtube.com/v/"; 
```

是一个非常好的字符串文字。

`Replace`不起作用，因为反斜杠在`\`C# 的字符串文字和正则表达式中都是转义符号。因此，您需要四个反斜杠来匹配字符串中的单个反斜杠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T13:15:16.337

该字符串`message`不包含任何`\`字符。您根本不必逃避`/`角色。

如果您希望字符串与显示的一样，请使用`@`符号：

```
string message = @"http:\/\/www.youtube.com\/v\/"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T13:33:07.103

你的字符串没有错。您可以直接使用“http://www.youtube.com/v/”作为消息。/ 不需要转义。这是一个完全合法的字符。

如果您想使用其他一些特殊字符，您可以使用**Verbatim string literals**。它以@ 开头，也用双引号括起来。

如果要替换“/”，可以直接使用 YourString.Replace("/","") 方法。

# asp.net - 包括用户和成员表

> ID：11969895
> 
> 赞同：0
> 
> 时间：2012-08-15T13:11:32.650
> 
> 标签：asp.net, linq, entity-framework-4

这是一个简单的问题：我使用的是实体框架 4.0 和默认的 sql 成员资格。我需要将我的自定义客户表加入到 aspnet_Users 和 aspnet_Membership 表中。

此代码由于某种原因不起作用：

```
context.Customers.Include("aspnet_Users.aspnet_Membership").ToList(); 
```

customer.aspnet_Users 始终为空，尽管这样可以正常工作：

```
context.Customers.Include("aspnet_Users").ToList(); 
```

这也有效：

```
context.aspnet_Users.Include("aspnet_Membership").ToList(); 
```

那么为什么我不能加入这两个表，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:15:36.463

怎么样

```
context.Customers.Include("aspnet_Users").Include("aspnet_Membership").ToList(); 
```

# java - Twitter4j：获取特定推文的回复列表

> ID：11969896
> 
> 赞同：4
> 
> 时间：2012-08-15T13:11:32.400
> 
> 标签：java, android, twitter4j

是否可以使用 twitter4j 获取回复推文（或其回复）的推文列表？Twitter 网站和 Android 应用程序具有此功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:14:37.493

这是我在[welshare中使用的代码](http://welshare.com)

第一部分获取推文打开时推文下方显示的所有推文。其余的负责对话，以防推文是对其他推文的回复。

```
RelatedResults results = t.getRelatedResults(tweetId);
List<Status> conversations = results.getTweetsWithConversation();
/////////
Status originalStatus = t.showStatus(tweetId);
if (conversations.isEmpty()) {
    conversations = results.getTweetsWithReply();
}

if (conversations.isEmpty()) {
    conversations = new ArrayList<Status>();
    Status status = originalStatus;
    while (status.getInReplyToStatusId() > 0) {
        status = t.showStatus(status.getInReplyToStatusId());
        conversations.add(status);
    }
}
// show the current message in the conversation, if there's such
if (!conversations.isEmpty()) {
    conversations.add(originalStatus);
} 
```

编辑：这将不再起作用，因为 Twitter API v 1 现在没有使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T09:13:25.813

您可以使用`InReplyToStatusId`字段值`Status.getInReplyToStatusId()`

使用以下代码递归地使用 API v1.1 获取推文的所有回复或对话：

```
Status replyStatus = twitter.showStatus(status.getInReplyToStatusId());
System.out.println(replyStatus.getText()) 
```

使用它，我可以使用他们所有的回复来拉取推文。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-29T08:17:28.487

不要在网名前使用“@”。它仅搜索提及该帐户的其他人。要从该帐户搜索对推文的回复，请使用“to:”。请参阅[https://dev.twitter.com/rest/public/search](https://dev.twitter.com/rest/public/search)查询运算符。

```
public ArrayList<Status> getReplies(String screenName, long tweetID) {
    ArrayList<Status> replies = new ArrayList<>();

    try {
        Query query = new Query("to:" + screenName + " since_id:" + tweetID);
        QueryResult results;

        do {
            results = twitter.search(query);
            System.out.println("Results: " + results.getTweets().size());
            List<Status> tweets = results.getTweets();

            for (Status tweet : tweets) 
                if (tweet.getInReplyToStatusId() == tweetID)
                    replies.add(tweet);
        } while ((query = results.nextQuery()) != null);

    } catch (Exception e) {
        e.printStackTrace();
    }
    return replies;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-24T01:29:39.277

[我在https://github.com/klinker24/Talon-for-Twitter](https://github.com/klinker24/Talon-for-Twitter)中找到了执行此操作的方法并对其进行了一些修改

```
public ArrayList<Status> getDiscussion(Status status, Twitter twitter) {
    ArrayList<Status> replies = new ArrayList<>();

    ArrayList<Status> all = null;

    try {
        long id = status.getId();
        String screenname = status.getUser().getScreenName();

        Query query = new Query("@" + screenname + " since_id:" + id);

        System.out.println("query string: " + query.getQuery());

        try {
            query.setCount(100);
        } catch (Throwable e) {
            // enlarge buffer error?
            query.setCount(30);
        }

        QueryResult result = twitter.search(query);
        System.out.println("result: " + result.getTweets().size());

        all = new ArrayList<Status>();

        do {
            System.out.println("do loop repetition");

            List<Status> tweets = result.getTweets();

            for (Status tweet : tweets)
                if (tweet.getInReplyToStatusId() == id)
                    all.add(tweet);

            if (all.size() > 0) {
                for (int i = all.size() - 1; i >= 0; i--)
                    replies.add(all.get(i));
                all.clear();
            }

            query = result.nextQuery();

            if (query != null)
                result = twitter.search(query);

        } while (query != null);

    } catch (Exception e) {
        e.printStackTrace();
    } catch (OutOfMemoryError e) {
        e.printStackTrace();
    }
    return replies;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-21T09:07:36.860

Twitter API 没有获取推文回复的功能，但您可以通过几个步骤来实现它。这是 Twitter API 7.0 版最有效的方法。

* * *

**第 1 步 -**获取所有回复。（此功能最多只能返回 800 条最近的回复）

```
List<Status> replyList = twitter.getMentionsTimeline(new Paging(1, 800)); 
```

* * *

**第 2 步 -**如果用户回复他自己的推文，这些回复将返回到`getUserTimeline()`而不是`getMentionsTimeline()`. 因此，您需要将这些回复移动到正确的位置。

```
List<Status> tweetList = new ArrayList<>();
for (Status tweet : twitter.getUserTimeline()) {
    if (tweet.getInReplyToStatusId() == -1) {
        tweetList.add(tweet);
    } else {
        replyList.add(tweet);
    }
} 
```

* * *

**第 3 步 -**用于`getInReplyToStatusId()`识别每个回复的原始推文。如果您还想获取嵌套回复，请使您的函数递归（如下所示）。

```
public void getReply(Status tweet) {
    for (Status reply : replyList) {
        if (tweet.getId() == reply.getInReplyToStatusId()) {
            System.out.println(reply.getText());
            getReply(reply);
        }
    }
} 
```

# javascript - IE中的jQuery onClick()音效和重定向

> ID：11969900
> 
> 赞同：0
> 
> 时间：2012-08-15T13:11:50.787
> 
> 标签：javascript, jquery, internet-explorer, audio, embed

因此，反对我和老板的建议，客户坚持认为，当他们在链接实际将用户带到新页面之前单击它们时，他们希望在其网站主导航上的所有链接上产生“boing”音效。

为此，我使用 jQuery`embed`在将用户发送到新页面之前单击链接时将标签附加到正文。这是我正在使用的 jQuery：

```
<script type="text/javascript">
    (function($) {
        $(document).ready(function() {
            $("#menu_container a").click(function(e) {
                e.preventDefault();
                var url = $(this).attr('href');

                $('body').append('<embed src="/media/sounds/boing_spring.mp3" autostart="true" width="1" height="1" id="LegacySound" enablejavascript="true">');

                setTimeout(function() {
                    window.location = url;
                }, 500);

                setTimeout();
            });
        });
    })(jQuery)
</script> 
```

因此，这在 OSX/Ubuntu 和 Windows 上的 Safari/Chrome/FF/Opera 中似乎可以正常工作。

但是，当谈到 Internet Explorer 时，在我的带有 IE8 的 WinXP 机器上运行良好，但在运行 IE9 的老板 Win7 机器上声音不起作用。那么，这可能是什么原因呢？是 IE 是 IE，还是我搞砸了？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-31T14:30:45.963

通过添加另一行（如以下行）解决，但链接到 wma 声音

```
$('body').append('<embed src="/media/sounds/boing_spring.mp3" autostart="true" width="1" height="1" id="LegacySound" enablejavascript="true">'); 
```

# node.js - Node.js v0.8.6 nvm 安装失败，原因？

> ID：11969902
> 
> 赞同：0
> 
> 时间：2012-08-15T13:11:55.690
> 
> 标签：node.js, nvm

请帮忙！

谁知道我无法使用 nvm 安装 Node.Js 以上 v0.8.6（也无法安装 Node.Js v.0.7.5）的原因（但成功安装 Node.Js v0.6.13）

提前非常感谢！

信息如下：

CentOS 5.4

```
# python --版本
Python 2.7.3

# nvm 安装 v0.8.6
编译时的附加选项：
################################################# ###################### 100.0%
  文件“./configure”，第 325 行
    o['default_configuration'] = 'Debug' if options.debug else 'Release'
                                          ^
SyntaxError：无效的语法
nvm：安装 v0.8.6 失败！

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:50:58.820

当我的 python 版本是 2.4 时，我遇到了完全相同的问题。但是在我将我的 python 升级到 2.7.1 之后，它就可以工作了。但是您的python版本似乎还可以。

# javascript - Jquery在CSS下面更新

> ID：11969905
> 
> 赞同：1
> 
> 时间：2012-08-15T13:12:24.397
> 
> 标签：javascript, jquery, html, css

请帮忙，我需要从“background:#000;”更新背景颜色属性 到“背景：#25981B; 或使用 JQuery 的样式表中的任何颜色、绿色、蓝色等”</p>

谢谢，我正在尝试使用 JQUERY 在矩形顶部动态实现圆角。请检查 URL，在示例中，我们现在如何将顶部的黑色更改为绿色或其他任何东西... [http:// jsfiddle.net/samansari/cD4kf/](http://jsfiddle.net/samansari/cD4kf/)

提前感谢您的帮助。

谢谢，山姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T13:14:20.240

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/RYwv5/)**

```
$('.rtop').closest('div').css('background-color', '#981B1B') 
```

根据OP的评论更新

[**现场演示**](http://jsfiddle.net/rajaadil/cD4kf/17/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:58:11.817

这个怎么样：

[关联](http://jsfiddle.net/ComboZhc/3Jntr/)

```
$('div').css('background-color', '#981B1B');
$('b.r1').css('background-color', '#981B1B');
$('b.r2').css('background-color', '#981B1B');
$('b.r3').css('background-color', '#981B1B');
$('b.r4').css('background-color', '#981B1B'); 
```

​它并不漂亮，但它有效。

```
$('div').css('background-color', '#981B1B');
$('b').css('background-color', '#981B1B');​ 
```

这是一个更漂亮的方式来做到这一点。

编辑：哎呀，我犯了一个小错误。JsFiddle 已更新，一个不错的解决方案是：

```
$('div').css('background-color', '#bcd');
$('b.rtop b').css('background-color', '#bcd');​ 
```

# c++ - C++ 错误：“内联”只能出现在函数上

> ID：11969908
> 
> 赞同：2
> 
> 时间：2012-08-15T13:12:35.427
> 
> 标签：c++, clang, libc++

我正在尝试使用 clang++ 在 OS X 10.7 下编译[VCMI 。](http://forum.vcmi.eu/portal.php)

我配置了项目，`CXX=clang++`因为 Apple 的 gcc 似乎无法识别所需的`-std=c++0x`标志。

我已经添加`-stdlib=libc++`了，`CXXFLAGS`因为没有那个 clang 甚至无法找到`#include <array>`.

目前我有：`CXXFLAGS= -std=c++0x -stdlib=libc++ -Wall -Wextra -Wcast-align -Wpointer-arith -Wno-switch -Wno-sign-compare -Wno-unused-parameter -Wc++11-extensions`

问题是我收到以下错误：

```
clang: warning: treating 'c-header' input as 'c++-header' when in C++ mode, this behavior    is deprecated
clang: warning: argument unused during compilation: '-ggdb'
StdInc.h:1:9: warning: #pragma once in main file
#pragma once
        ^
In file included from StdInc.h:3:
In file included from ./../Global.h:32:
In file included from /usr/bin/../lib/c++/v1/algorithm:594:
In file included from /usr/bin/../lib/c++/v1/memory:596:
/usr/bin/../lib/c++/v1/iterator:1696:1: error: 'inline' can only appear on functions
inline _LIBCPP_INLINE_VISIBILITY
^
/usr/bin/../lib/c++/v1/iterator:1698:1: error: variable 'begin' declared as a template
begin(_T (&__array)[_N])
^
/usr/bin/../lib/c++/v1/iterator:1698:12: error: use of undeclared identifier '__array'
begin(_T (&__array)[_N])
           ^
./../tchar_amigaos4.h:157:16: note: expanded from macro '_T'
#define _T(x)           x
                        ^
In file included from StdInc.h:3:
In file included from ./../Global.h:32:
In file included from /usr/bin/../lib/c++/v1/algorithm:594:
In file included from /usr/bin/../lib/c++/v1/memory:596:
/usr/bin/../lib/c++/v1/iterator:1698:25: error: expected ';' at end of declaration
begin(_T (&__array)[_N])
                        ^
                        ;
/usr/bin/../lib/c++/v1/iterator:1699:1: error: expected unqualified-id
{
^
1 warning and 5 errors generated. 
```

我必须承认我从未见过这样的事情。这些在 libc++ 源代码中！有人知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T18:13:18.707

你的问题在这里：

```
./../tchar_amigaos4.h:157:16: note: expanded from macro '_T'
#define _T(x)           x 
```

严格来说，在代码中定义一个名为 _T 的宏，然后包括标准头文件，是未定义的行为。

IIRC，较新版本的 libc++ 避免使用名称 _T 特别是因为人们倾向于将其搞砸，因此您可能想尝试升级到最新版本的命令行工具。

# c# - LINQ to Objects - ICollection 的属性到 CSV 的通用转换

> ID：11969909
> 
> 赞同：1
> 
> 时间：2012-08-15T13:12:39.607
> 
> 标签：c#, linq, linq-to-objects

我一直在我的代码中写出几个不同的地方，我想创建一个单一的通用函数，但我不太清楚如何。

这是我正在做的一个例子：

```
public static string FormatCompaniesAsCSV(ICollection<Company> companies)
{
    string csv = "";
    foreach(Company c in companies)
    {
        csv += c.CompanyName + ",";
    }

    return csv.Substring(0, csv.LastIndexOf(","));
} 
```

问题是，如果我想显示所有公司 SKU 或制造该产品的所有工厂，我必须编写基本相同的代码。唯一改变的是对象类型和我正在访问的属性。我想做的是如下所示：

```
public static string FormatCSV<T>(ICollection<T> elements, string propertyName)
{
    string csv = "";
    foreach(T element in elements)
    {
        //I know this next line doesn't work
        //this is just a high level conceptualization of what I want to do
        csv += element.getPropertyValue(propertyName) + ","; 
    }

    return csv.Substring(0, csv.LastIndexOf(","));
} 
```

我需要一些方法来访问 foreach 循环中元素的属性，但我真的不知道从哪里开始。我已经简要地查看了 System.Linq.Expressions 库，但我并没有找到我想要的东西。

我在正确的轨道上吗？如果没有，有没有更好的方法来完成我想做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:16:23.663

我建议你传递一个代表：

```
public static string FormatAsCSV<T>(IEnumerable<T> elements,
                                    Func<T, string> converter) 
{ 
    string csv = ""; 
    foreach(T element in elements) 
    { 
        csv += converter(element) + ","; 
    } 

    return csv.Substring(0, csv.LastIndexOf(",")); 
} 
```

你可以像这样调用这个方法：

```
FormatAsCsv(companies, x => x.CompanyName);
FormatAsCsv(factories, x => x.ZipCode + " " + x.City); 
```

您甚至可以通过`this`在第一个参数的类型之前添加来创建扩展方法：

```
public static string FormatAsCSV<T>(this IEnumerable<T> elements,
                                    Func<T, string> converter) 
```

现在你可以这样称呼它：

```
companies.FormatAsCsv(x => x.CompanyName);
factories.FormatAsCsv(x => x.ZipCode + " " + x.City); 
```

顺便说一句：我将类型从 更改`ICollection<T>`为`IEnumerable<T>`因为您只使用`IEnumerable<T>`.

您可以改进 CSV 字符串的生成：

```
public static string FormatAsCSV<T>(this IEnumerable<T> elements,
                                        Func<T, string> converter) 
{
    return elements.Select(x => converter(x)).Aggregate((x, y) => x + "," + y);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:58:09.920

带逗号的 concat 可以在 1 行中完成：

```
List<string> list = new List<string>() { "Hi", "Old" };
string line = String.Join(",", list.ToArray()); 
```

你也可以写一个扩展方法（像这样）

```
public static string SuperJoin(string joinCharacter, IEnumerable<string> strings)
{
    return String.Join(",", strings.ToArray());
} 
```

然后使用 Linq 从对象中选择要组合的字段。无需代表

# java - Java中的短url安全数字加密？

> ID：11969917
> 
> 赞同：0
> 
> 时间：2012-08-15T13:13:02.367
> 
> 标签：java, encryption, primary-key

我正在研究将一个简单的数据库主键加密为一个简短的 url 安全字符串。我查看了 jasypt 加密库，但每个加密数字的长度至少为 20 个字符。我正在寻找尽可能小的东西，但仍然可以 2 路加密，可能大约 5 个字符长。加密不必非常安全，我希望它不那么明显。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:20:53.890

最短的方法是使用具有足够大的 url 安全字符字母表和 url 的索引。只需“计数”索引并将其保存到带有 url 的数据库中。

长度仅由您必须存储的 url 数量定义。

例如，如果您将使用的字母表使用所有字母加数字并区分大小写，您可以存储 (24+24+10)^5 个 URL（包含 5 个字符）。

所以第一个 url 可能是：00001。这个 apporach 假设可以猜到 url 键是可以的。

如果您需要确保它们不容易被猜到，只需随机化下一个密钥，检查该密钥是否不在数据库中并使用它。键的数量可能如此之快，除非您在数据库中有数百万个键，否则它们不应该经常发生冲突。

# jquery - jQuery将属性禁用更改为true会触发任何事件吗？

> ID：11969918
> 
> 赞同：5
> 
> 时间：2012-08-15T13:13:08.930
> 
> 标签：jquery, event-handling, event-listener

做

```
$('#myElem').attr('disabled',true); 
```

在禁用元素上触发与之关联的任何事件侦听器？（更改（），点击（）或其他）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T13:17:27.263

不。

[http://jsfiddle.net/5sbpq/1/](http://jsfiddle.net/5sbpq/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T13:19:30.540

`disabled`这是[http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1)

> 17.12.1 禁用控件
> 
> 属性定义
> 
> disabled [CI] 当为表单控件设置时，此布尔属性禁用用户输入控件。设置后， disabled 属性对元素有以下影响：
> 
> 禁用的控件不会获得焦点。在选项卡导航中会跳过禁用的控件。禁用的控件不能成功。以下元素支持禁用属性：BUTTON、INPUT、OPTGROUP、OPTION、SELECT 和 TEXTAREA。
> 
> 此属性是继承的，但本地声明会覆盖继承的值。
> 
> 禁用元素的呈现方式取决于用户代理。例如，一些用户代理“灰显”禁用菜单项、按钮标签等。

它不会触发任何事件。它更多的是一种功能性的东西，它不允许用户与元素交互，也不会在提交时发送字段的值（如果它在表单内）。

# sql-server - 加速 ETL DB2 到 SQL Server？

> ID：11969920
> 
> 赞同：0
> 
> 时间：2012-08-15T13:13:13.520
> 
> 标签：sql-server, ssis, db2, etl

在寻找将数据从 DB2 数据库导入 SQL Server 2008 的更快方法时，我偶然发现了这篇博文。

[http://blog.stevienova.com/2009/05/20/etl-method-fastest-way-to-get-data-from-db2-to-microsoft-sql-server/](http://blog.stevienova.com/2009/05/20/etl-method-fastest-way-to-get-data-from-db2-to-microsoft-sql-server/)

我试图弄清楚如何实现以下目标：

***3) 创建一个 BULK Insert 任务，并加载执行过程任务创建的文件。（请注意，您必须创建一个 .FMT 文件以通过导入进行修复。我创建了一个 .NET 应用程序来加载 FDF 文件（传输描述），它将自动为我创建一个 .FMT 文件，以及一个 SQL Create 语句 –节省时间和繁琐的工作）***

我有一个 TXT 文件和一个单独的 FDF 中的数据，其中包含表结构的详细信息。如何组合它们以创建合适的 .FMT 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:02:36.403

我不知道如何创建合适的 .FMT 文件。

相反，我最终从 SQL Server 中的源 DB2 系统创建了副本表，并确保该列顺序与 IBM File Transfer Utility 中的列顺序相同。

使用 Excel 工作表来控制应该加载哪些文件传输/表，允许我随意启用/禁用，以及 SSIS 中的 For Each 循环，我有一个合适的解决方案可以从我们的 DB2 系统中快速加载多个表。

# android - Android 是否需要在对文件进行采样之前从文件中加载完整的位图？

> ID：11969923
> 
> 赞同：0
> 
> 时间：2012-08-15T13:13:16.620
> 
> 标签：android

在：[在 Android 中以正确的大小解码位图](https://stackoverflow.com/questions/2641726/decoding-bitmaps-in-android-with-the-right-size)- 已发布对位图进行采样仍可能导致内存错误。

这个问题对较新版本的 Android 仍然有效吗？

这是否意味着在向下采样之前，Android 需要将全尺寸位图加载到内存中？我相信这使用本机内存，因为图像处理是在本机代码中实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:20:31.363

较新的版本可能有更多的物理内存，但它仍然受限于系统堆栈大小；这样，编程位图仍然应该非常小心地使用所使用的内存量。

在今年的 Google I/O（2012 年）上，有一个名为“Doing more with less”的精彩演讲，展示了一些您应该研究的非常好的缓存技术。我相信您可以在 YouTube Android 开发者帐户上找到此视频。

找到视频：[http ://www.youtube.com/watch?v=gbQb1PVjfqM](http://www.youtube.com/watch?v=gbQb1PVjfqM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:33:26.687

以下是获取可用内存量的方法：

```
Runtime.getRuntime().maxMemory() 
```

这是一个关于记忆的有趣博客：http: [//codelog.dexetra.com/getting-around-android-memory-blues](http://codelog.dexetra.com/getting-around-android-memory-blues)

Android 的问题是你永远不知道什么时候你可能会耗尽内存并且应用程序会崩溃。这就是为什么你应该尽量避免加载太大的双图（我通常使用最大 800 / 600 或类似的东西，具体取决于屏幕方向......）

~~如果为画廊或其他视图组加载多个位图，您应该使用弱引用：http: [//developer.android.com/reference/java/lang/ref/WeakReference.html](http://developer.android.com/reference/java/lang/ref/WeakReference.html)~~

此外，如果您查看链接中的示例，您提供的缩放首先仅解码边界，然后决定要使用的比例。

当您不再需要位图时，请调用：

```
 bitmap.recycle(); 
```

# javascript - IFrame 传递值

> ID：11969924
> 
> 赞同：0
> 
> 时间：2012-08-15T13:13:21.877
> 
> 标签：javascript, javascript-events

您好，我有一个 iframe 问题。我有一个页面，我有一个拨号。点击表盘指针显示角度值。现在我想将这个角度值从我的 dial.html 页面传递到某个位置的父页面。我尝试了下面的代码。它为我提供了框架内的刻度盘和角度。我想取这个角度值并在不同的位置显示它。那么我如何将这个角度值从 iframe 拉到我父页面中的不同位置。

```
<iframe name="clkwise1" id="clkwise1" src="Dial1.htm" width=150 height=215 frameborder=0 scrolling="no" ></iframe>

function myAngle() {

    var iframeVal= document.getElementById('clkwise1').contentWindow;       
    document.getElementById("anglevalue").innerHTML = iframeVal;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:20:36.073

只需访问 iframe`document`并在那里设置一个变量：

```
var iframe = document.getElementById('clkwise1').contentWindow;
iframe.clockAngle = localClockAngle; 
```

# zend-framework2 - 如何获取应用程序的根目录？

> ID：11969925
> 
> 赞同：18
> 
> 时间：2012-08-15T13:13:22.347
> 
> 标签：zend-framework2

如何在操作中获取应用程序的根目录？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-15T16:44:07.383

ZF2 做的第一件事是通过改变当前目录`chdir(dirname(__DIR__));`

这意味着未来的每个包含都基于应用程序的根路径，而不是公用文件夹。或任何其他当前文件夹。

当然，这只适用于 PHP 文件。

如果你想手动定义根路径，你可以去`/public/index.php`添加一行像`define('ROOT_PATH', dirname(__DIR__));`

正如我之前所说，对于 INCLUDES，这不是必需的；）因为当涉及到 PHP 文件时，您总是在根文件夹中；）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-10T12:14:58.867

getcwd() 最适合我，**DIR**返回模块根目录。在这种情况下用处不大

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-02T12:54:08.680

> @Sam：我不太明白你的问题。基本上，当前路径等于 ZF2-Apps Root。[...] 你也可以随时升级，也可以通过 ../

不完全是。当您创建在多个应用程序中共享的模块时，例如。供应商中的文件上传模块，外部应用程序。您想将文件上传到应用程序子目录而不是共享模块:) 在这种情况下`__DIR__`等于模块路径而不是应用程序路径，这不是`../`一个好的解决方案；)

正如您所提到的，我喜欢 ROOT_PATH：

> `define('ROOT_PATH', dirname(__DIR__));`

甚至更好：

```
getcwd() 
```

# symfony1 - 删除日志中不存在的文件 Symfony 1.4

> ID：11969929
> 
> 赞同：0
> 
> 时间：2012-08-15T13:13:35.920
> 
> 标签：symfony1, symfony-1.4

所以在我的 symfony 项目的日志文件中，我有不存在文件的错误，然后过了一小段时间我有一个大于 50 Mb 的大日志文件，我不知道我能做些什么来解决这个问题？？我从不使用这个什么样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:58:11.073

> php symfony 日志：旋转 [--history="..."] [--period="..."] 应用程序环境

您可以在以下位置找到此文档： [http ://www.symfony-project.org/reference/1_4/en/16-Tasks](http://www.symfony-project.org/reference/1_4/en/16-Tasks)

在 Unix 上，您可以将其作为 cron 作业运行，其格式与您对任何任务执行的格式相同。

# css - GWT + Eclipse——如何刷新CSS等静态资源

> ID：11969931
> 
> 赞同：12
> 
> 时间：2012-08-15T13:13:39.913
> 
> 标签：css, gwt

我正在以托管模式在 Eclipse 中开发 GWT 应用程序。

当我在 CSS 中更改某些内容时，我无法在浏览器中看到它。我正在尝试使用 CTRL+F5 在浏览器中完全重新加载，在 Eclipse 中重新启动我的应用程序并且没有任何变化。

唯一有帮助的是使用 maven clean install 重建我的应用程序，在 Eclipse 中重新启动应用程序，然后我可以看到更改。这需要很多时间。

知道我做错了什么吗？我认为必须有更好的方法。

问候，卢卡斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-12T12:28:34.993

问题是在开发模式下，src webapp 文件夹仅在启动时复制到目标，而开发模式不会刷新它。作为一种解决方法，您可以使用[copy-resources](https://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html)，它负责即时应用更改。

```
 <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>3.0.1</version>
        <executions>
            <execution>
                <id>copy-resources</id>
                <phase>validate</phase>
                <goals>
                    <goal>copy-resources</goal>
                </goals>
                <configuration>
                    <outputDirectory>${project.build.directory}/gwt-webapp</outputDirectory>
                    <resources>
                        <resource>
                            <directory>src/main/webapp</directory>
                            <filtering>true</filtering>
                        </resource>
                    </resources>
                </configuration>
            </execution>
        </executions>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T12:56:47.940

我为我的应用程序使用了一个外部 CSS 文件，在 Chrome 和 Firefox 中进行简单刷新（没有清空缓存、服务器重启等）后，我会立即看到浏览器中的所有更改。

问题可能与您的文件的位置有关。我的文件在 /war 目录下，我直接编辑它。另一种可能性是您如何在主机页面中引用您的文件。确保你有一个像“/myCss.css”这样的相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T04:12:28.037

有3种方法可以解决这个问题。虽然我不使用 eclipse（我使用 IntelliJ 编码并从我的命令行 Gradle 脚本中使用托管模式），但希望它们无论如何都应该工作。

首先是找出您的托管模式从哪里提供文件，理想情况下是一个展开的战争目录。在那里，您可以找到 CSS 文件，这将是您尝试更改的 CSS 文件的精确副本。在那里进行修改，重新加载，修改等，然后在完成后不要忘记复制该文件并将其粘贴回源目录。我使用VIM并来回切换。我相信您可以编写一个脚本，在托管模式结束时将文件复制回来，如果您更热衷的话。

正如 user1570921 所指出的，第二种方法（也是一种更好的方法）是将 CSS 嵌入到 UIBinder 代码中。例如，您可能有：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">

<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
         xmlns:g='urn:import:com.google.gwt.user.client.ui'>

<ui:style>
    .outsidePanel {
        background: #00F;
    }
</ui:style>

<g:HTMLPanel styleName="{style.outsidePanel}">
    Hello, World!
</g:HTMLPanel> 
```

在上面的示例中，您可以编辑 ui:style 部分中的 CSS，按 F5 并查看更改，然后进行更多更改等。无需复制文件。

这是获取更多信息的好链接：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Hello_Stylish_World](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Hello_Stylish_World)

第三种方法是在 Firefox 中使用 Google Chrome 的开发工具 (CTRL-Shift-I) 或 F12。在那里，您可以编辑内联 CSS，而无需修改您的文件。找出所有正确的值，添加新值，删除旧值，然后对 CSS 文件进行相同的更改。然后，您不必继续重新部署即可查看更改。

我个人使用#2 和#3 的组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T08:04:47.157

从您的项目/应用程序网页，查看页面源代码。当我们右键单击页面时，通常是一个选项。

单击 .css 文件链接，该链接如下所示：

```
<link type="text/css" rel="stylesheet" href="Foo.css" 
```

在这种情况下，单击 Foo.css

将显示 .css 文件的内容，但可能不包括您的更改。在这种情况下，按 F5 或浏览器刷新按钮刷新 .css 文本。

如果您的 .css 更改现在出现，请返回您的 GWT 项目网页并再次刷新。

或者，使用不同的浏览器可能会暂时显示您的新更改，但如果它也无法刷新 .css 文件，则上述过程将是必要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-13T15:17:33.500

尝试将一行`<stylesheet src="sheet.css" />`或`<stylesheet src="/sheet.css" />`放入您的 project.gwt.xml 文件中。

问候，

涡流

# ruby-on-rails - 在 ruby 中创建登录会话时了解“current_user”概念

> ID：11969935
> 
> 赞同：4
> 
> 时间：2012-08-15T13:13:50.167
> 
> 标签：ruby-on-rails, ruby, session, session-variables, session-cookies

我正在阅读很棒的 Michael Hartl 教程来[在这里](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec%3acurrent_user)构建 ruby​​ 应用程序。

我试图理解如何创建会话的概念，但我一直在理解这一行：

```
self.current_user = user 
```

在这种方法中：

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end
end 
```

我了解使用 user_token 创建 cookie 的整个概念。

**但我不明白是什么** `self.current_user = user` **意思，为什么还要保留这行代码——我有带有令牌的 cookie——为什么我需要知道当前用户？**

此外，这个“自我”存储在哪里 - 它不像`flash[:success]`我可以在我的一个视图中看到的参数。所以我不明白它在哪里。

同一模块中还有这两种方法：

```
 def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end 
```

我仍然试图将这个神秘的目的点点滴滴联系起来`current user`——它的目的是创建`@current_user`全局变量以在视图中使用吗？

如果是这样 - 为什么有这两个重复的功能`def current_user=(user)`和`def current_user`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T13:38:44.417

一些东西。

首先，您读错了方法名称（考虑到 ruby​​ 方法命名的神秘程度，这并不奇怪）。`def current_user=(user)`实际上被解读为定义`current_user=`带参数的方法`user`，而`def current_user`定义`current_user`不带参数的方法。它们分别称为**setter**和**getter**。

这是一个参考：[Ruby（编程语言）：Ruby 中的 setter 和 getter 是什么？](http://www.quora.com/Ruby-programming-language/What-are-setters-and-getters-in-Ruby)

所以这解释了重复。关于你的下一个问题。

> 我不明白 self.current_user = user 是什么意思

`self`本身就是一个话题，值得自己讨论，所以我什至不会尝试解释它（这是众多[参考](http://yehudakatz.com/2009/11/15/metaprogramming-in-ruby-its-all-about-the-self/)中的一个）。就这个问题而言，重要的是要记住，为了设置实例变量，您需要在分配前加上`self`，即使在类中也是如此（对于其他目的，它是隐式的）。该行的其余部分是对`current_user=`我上面提到的 setter 方法的调用，带有参数`user`.

> 为什么甚至有必要保留这行代码 - 我有带有令牌的 cookie - 为什么我需要知道当前用户？

之所以有必要，是因为您不希望每次需要获取当前用户时都从令牌中查找用户。看一下getter方法：

```
def current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

这就是说：如果我还没有查找并设置实例变量`@current_user`，那么请查找它；如果我已经设置它，那么只需返回它。这样可以节省很多查找时间。

我认为这回答了你的问题。有很多更深层次的问题（`self`等），您可以在其他地方找到更多信息。这里有一个关于为什么需要`self`在 SO 上包含在 setter 中的讨论：[为什么 Ruby setter 需要“self”。班级内的资格？](https://stackoverflow.com/questions/44715/why-do-ruby-setters-need-self-qualification-within-the-class)

更新：小澄清，关于`self`在类中使用设置器的最后一个链接实际上有点离题，因为您是在模块中调用它而不是直接从类中调用它。在模块的上下文中，`self`in`self.current_user = user`将成为模块包含在其中的类，例如，`User.current_user`如果它在 class 中被调用`User`，等等。同样，另一个讨论主题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:49:07.540

该方法`def current_user=(user)`基本上是一个 setter，sign_in 方法使用它来设置 current_user。

`def current_user`将返回@current_user，或者如果未设置，它将通过remember_token 在Users 表中找到它。这基本上允许您在任何时间点获取 current_user。

`self.current_user`在这种情况下，在 sign_in 方法的上下文中将引用调用类或模块。它将`current_user`从`Session Helper`模块调用。

# soap - 在 sencha touch 应用程序中使用 SOAP Web 服务

> ID：11969945
> 
> 赞同：-1
> 
> 时间：2012-08-15T13:14:20.873
> 
> 标签：soap, sencha-touch, extjs, jsonp, sencha-touch-2

我必须使用 sencha touch 使用 SOAP Web 服务。

有谁能够帮我

我可以使用 JSONP 代理来消费肥皂网络服务吗？

请提供一些示例代码或参考。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:10:17.337

我相信完成您的项目的最佳方法是在您的 Sencha Touch 应用程序和您的 WS SOAP 服务之间开发某种中间件。

该中间件将处理 WS 请求，将结果转换为 JSON 格式，并最终交付给 Sencha Touch 应用程序。

几个月前，我在一个项目中实现了这个小架构，它就像一个魅力。对于中间件，就我而言，我使用的是 Java Apache Axis2 开源库

希望对你有所帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T14:17:08.473

我知道为时已晚...

我有一个解决这个问题的方法。也许这仅适用于开发环境而不是

生产环境。（因为它需要服务器端配置）

1.  我将我们的服务器配置为允许 CORS。因此请参阅：[http ://enable-cors.org/](http://enable-cors.org/)

2.  使用参数启动 chrome：chrome.exe --disable-web-security

3.  制作 Ajax.request(...) 方法：POST。使用正确的 SOAP 信封。有帮助：

[http://www.soapclient.com/SoapMsg.html](http://www.soapclient.com/SoapMsg.html)

# c - printf 打印 scanf 读取的浮点数而不是整数参数

> ID：11969947
> 
> 赞同：0
> 
> 时间：2012-08-15T13:14:27.250
> 
> 标签：c, printf

下面的程序应该读取一个浮点数，然后打印一个整数。但是当我运行它时，它不会打印整数。相反，它会打印我输入的值`scanf`。谁能解释一下输出？

```
#include<stdio.h>
void main()
{
    long x;
    float t;
    scanf("%f",&t);
    printf("%d\n",t);
    x=90;
    printf("%f\n",x);
    {
        x=1;
        printf("%f\n",x);
        {
            x=30;
            printf("%f\n",x);
        }
    x=9;
    printf("%f\n",x);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:17:52.020

`t`有类型`float`，所以`printf("%d\n",t)`调用**未定义的行为**，因为`%d`需要一个类型的参数`int`。任何事情都有可能发生。（对于`printf("%f\n",x)`:也一样，`%f`需要 a `double`，但类型`x`是`long int`。）

我曾经[详细](https://stackoverflow.com/a/7295097/596781)回答过其中一个案例；也许这有点意思。结果是，在实践中，您可以通过研究 IEEE754 浮点数的解剖结构以及了解平台上整数类型的大小来解释观察到的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:18:40.863

您应该`%d`在打印`int`变量时使用，如下所示：

```
printf("%ld", x); 
```

您正在使用`%f`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T13:26:18.860

> ```
> printf("%f\n",x); 
> ```

`x`具有类型`long`，但`%f`转换器需要一个浮点值（类型`double`）。通常，当您将整数传递给需要浮点值的函数时，该值会被静默转换。但是，这仅适用于具有固定数量参数和指示每个参数类型的原型的函数。它不适用于诸如 的可变参数函数`printf`，因为编译器没有足够的信息来知道将值转换为什么：格式字符串只能在运行时进行分析。

语言规范未定义该程序的行为：它可以做任何事情。在这种情况下可能发生的事情`x`是存储在某个整数寄存器中，并`f`存储在某个浮点寄存器中。由于`printf`调用正在查找浮点值，因此编译后的代码将查找第一个浮点寄存器。如果您已将浮点值传递给`printf`，则参数将最终出现在该寄存器中。但你没有，所以该寄存器中的值是存储在那里的最后一个值：读取的值`scanf`。

一个好的编译器会警告你你做错了什么。例如，这是我在编译代码时得到的`gcc -O -Wall`：

```
a.c:2: warning: return type of 'main' is not 'int'
a.c: In function 'main':
a.c:7: warning: format '%d' expects type 'int', but argument 2 has type 'double'
a.c:9: warning: format '%f' expects type 'double', but argument 2 has type 'long int'
a.c:12: warning: format '%f' expects type 'double', but argument 2 has type 'long int'
a.c:15: warning: format '%f' expects type 'double', but argument 2 has type 'long int'
a.c:18: warning: format '%f' expects type 'double', but argument 2 has type 'long int' 
```

我建议配置您的编译器以打印此类警告并注意它们。

要使您的程序正常工作，请在期望的地方传递一个浮点值，或者告诉`printf`期望一个整数值。任何一个

```
printf("%f", (double)x); 
```

或者

```
printf("%ld", x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T13:17:51.287

x 是一个长整数，但您将其打印为浮点数。并且 t 是一个浮点数，但您将其打印为整数。在 printf 调用中切换 %d 和 %f 格式说明符。

# javascript - 扩展 $.mobile.changePage 以接受更多选项？

> ID：11969953
> 
> 赞同：1
> 
> 时间：2012-08-15T13:14:55.857
> 
> 标签：javascript, jquery, jquery-plugins, jquery-mobile

我想扩展 $.mobile.changePage 以接受更多选项，例如在页面完成加载时添加回调函数，以及为 AJAX 调用（如 contentType）添加更多选项。有没有办法在不更改源代码的情况下做到这一点？如果没有，我愿意为教育目的更改源代码，但在 jQuery Mobile GitHub 中找不到它：[https](https://github.com/jquery/jquery-mobile) ://github.com/jquery/jquery-mobile 。感谢您提供任何帮助或指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:47:34.010

JavaScript 更令人兴奋的部分之一是能够使用通常称为[Monkey Patching](http://en.wikipedia.org/wiki/Monkey_patch)的技术重新定义任何函数。（顺便说一句，ES5 提供了一种新的[freeze](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/freeze)方法，允许开发人员防止此类修改。）

这是一个 JavaScript MonkeyPatch 的示例，它允许我们修改函数的行为而无需编辑它的源代码：

```
// A namespace object.
var Example = {};

// Sums two values.
Example.sum = function (a, b) {
    return a + b;
}

// Usage:
var result = Example.sum(1, 2); 
```

假设我们想在 sum 方法中添加日志记录，我们可以`console.log`在函数中添加一行，但我们也可以对其进行修补：

```
// Store a reference to the current 'Example.sum' function.
var originalSum = Example.sum;

// Now redeclare Example.sum...
Example.sum = function (a, b) { 

    // Call the originalSum function first...
    var result = originalSum(a, b);

    // Now add some logging...
    console.log("Example.sum(" + a + ", " + b + ") yields " + result);

    return result;
}; 
```

现在当`Example.sum`被调用时，我们不仅会像以前一样得到结果，而且还会写入一个控制台消息。`$.mobile.changePage`考虑到这一点，您可以用同样的方式对方法进行修补：

```
var originalChangePage = $.mobile.changePage;

// Redefine `changePage` so it accepts a 'complete' function in the options
// object which will be invoked when the page change is complete.
$.mobile.changePage = function (to, options) {
    if (typeof options.complete === "function") {
        $(body).one("pagechange", function (event) { 
            options.complete(event);
        });
    }

    originalChangePage(to, options);
}; 
```

# wpf - 访问第 3 方 ContentTemplate 内部控件

> ID：11969956
> 
> 赞同：0
> 
> 时间：2012-08-15T13:14:59.710
> 
> 标签：wpf

我正在使用第 3 方控件（在本例中为 Telerik 的 RadChart 控件），它具有包含图表的多个元素的复杂内部 ControlTemplate。不幸的是，并不是所有的部分都明确地暴露给我的样式，我发现自己想通过 XAML 或通过代码在 ControlTemplate 内的特定子元素上设置一个属性。在与 XAML 斗争了一段时间后，我决定采用以代码为中心的方法，但我仍然陷入困境。

使用 Snoop，我可以看到最顶层的 ChartArea 控件（我可以访问）呈现了一个名为 PART_AxisX 的 AxisX2D 对象，该对象又具有一个包含 PART_AxisLabels 对象的模板，这是我需要设置样式的对象。（顺便说一下，我要设置的属性是 AlternationCount，但我找不到更简单的方法来获取它）。

![视觉树](../Images/d894c09f7028f162973274ad20bc01bc.png)

我尝试使用该`ControlTemplate.FindName`方法（如图所示[）](https://stackoverflow.com/questions/820201/how-to-access-a-wpf-control-located-in-a-controltemplate)来获取 AxisX2D 对象，然后再次在该对象上获取 AxisLabels 对象，但 FindName 始终返回 null：

```
 var chartArea = myChart.DefaultView.ChartArea;
 var visualAxisX = chartArea.Template.FindName("PART_AxisX", chartArea) as AxisX2D; 
```

尽管 Snoop 确认这`chartArea`实际上是 AxisX2D 的`TemplatedParent`. 我检查了调试器，我可以在 chartArea 的内部 Template 属性中找到 PART_AxisX。

所以我的问题是：1）我在这里做错了什么？2）有没有更好的方法来解决这个问题，而不是像这样迂回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:55:51.973

解决方案是等到`Loaded`控件上发生事件之后。

发生此事件时，您知道已应用模板并且已为控件构建可视化树，因此您可以使用 FindName 访问元素。

*   [http://blogs.msdn.com/b/mikehillberg/archive/2006/09/19/loadedvsinitialized.aspx](http://blogs.msdn.com/b/mikehillberg/archive/2006/09/19/loadedvsinitialized.aspx)

在 ContentControl 上使用内容模板时，此处给出了稍微相关的链接。

*   [为什么“this.ContentTemplate.FindName”会在自己的模板上抛出 InvalidOperationException？](https://stackoverflow.com/questions/5679648/why-would-this-contenttemplate-findname-throw-an-invalidoperationexception-on)

# silverlight - silverlight 画布和矩形鼠标事件

> ID：11969958
> 
> 赞同：0
> 
> 时间：2012-08-15T13:15:07.290
> 
> 标签：silverlight, xaml, mouseevent

我在 xaml 中有以下控件：

```
<Canvas Height="500" Width="500" Name="canPreview" VerticalAlignment="top" Grid.Row="1" Grid.RowSpan="3" MouseLeftButtonDown="canPreview_MouseLeftButtonDown" 
                MouseLeftButtonUp="canPreview_MouseLeftButtonUp" MouseLeave="canPreview_MouseLeave" MouseMove="canPreview_MouseMove"
                Height="{Binding Path=ActualHeight, ElementName=imgPreview}" Width="{Binding Path=ActualWidth, ElementName=imgPreview}">
            <Rectangle Name="recSelection" StrokeThickness="2" Stroke="Black" Fill="Transparent"  Opacity=".5" Height="100" Width="100" />
        </Canvas> 
```

由于某种原因，Canvas 事件仅在鼠标指针位于矩形上方时触发。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:17:55.587

设置 Canvas 的背景颜色；您无法单击未绘制的内容。

如果您不想看到画布，可以使用透明画笔，它是可点击的。

# kernel-extension - 内核通信

> ID：11969961
> 
> 赞同：3
> 
> 时间：2012-08-15T13:15:23.793
> 
> 标签：kernel-extension

我想将一组数据发送到内核空间，（我在我的 kext 中使用了回调函数）问题是当我使用发送函数时，我看到了一些奇怪的东西，我在 2 个场景中解释了：1）... char f[] ={'1','2','3','4','5','6'}; 发送（袜子，f，sizeof（f），0）；好吧，当我 printf 我在 kext 中收到的内容时：123456

2) ... // 我用 0 替换 f[2]

字符 f[]={'1','2', **0** ,'4','5','6'}; 发送（袜子，f，sizeof（f），0）；

但是这一次，当我 printf 我在 kext 中收到的内容时：120000

似乎发送函数在第一个 0 字节之后的每个字节都为零？到底是怎么回事？这是发送功能错误吗？我使用了 xcode 4.1，我的操作系统是 lion 这里是用户空间部分：

```
int main(int argc, char* const*argv)
{
    struct ctl_info ctl_info;
    struct sockaddr_ctl sc;
    char str[MAX_STRING_LEN];
    int sock = socket(PF_SYSTEM, SOCK_DGRAM, SYSPROTO_CONTROL);
    if (sock < 0)
        return -1;
    bzero(&ctl_info, sizeof(struct ctl_info));
    strcpy(ctl_info.ctl_name, "pana.ifmonitor.nke.foo");
    if (ioctl(sock, CTLIOCGINFO, &ctl_info) == -1)
        return -1;
    bzero(&sc, sizeof(struct sockaddr_ctl));
    sc.sc_len = sizeof(struct sockaddr_ctl);
    sc.sc_family = AF_SYSTEM;
    sc.ss_sysaddr = SYSPROTO_CONTROL;
    sc.sc_id = ctl_info.ctl_id;
    sc.sc_unit = 0;
    if (connect(sock, (struct sockaddr *)&sc, sizeof(struct sockaddr_ctl)))
        return -1;

     unsigned char data_send[]={'a','l','i','0','1','2','4','l','i',0,'1','2','4','l','i','0','1'};

    size_t data_recive;
    int j=0;
    char data_rcv[8192];

        send( sock, data_send, 17*sizeof(char), 10 );

        printf("\n");
        sleep(1);

        close(sock);
        return 0;

    } 
```

这是负责获取用户空间数据的内核空间代码的一部分：

```
errno_t EPHandleWrite(kern_ctl_ref ctlref, unsigned int unit, void *userdata,mbuf_t m, int flags)
{

    printf("\n EPHandleWrite called---------------------- \n");
    //char data_rec[50];

    //unsigned char *ptr = (unsigned char*)mbuf_data(m);
    //char ch;
    //mbuf_copydata(m, 0, 50, data_rec);

    //strncpy(&ch, ptr, 1 );

    size_t data_lenght;
    data_lenght = mbuf_pkthdr_len(m);

    char data_receive[data_lenght];
    strncpy( data_receive, ( char * ) mbuf_data(m) , data_lenght );

    printf("data recied %lu\n",data_lenght);

    for(int i=0;i<data_lenght;++i)
    {
        printf("%X ",data_receive[i]);
    }
 return 0
} 
```

好吧，它在控制台中打印：61 6C 69 30 31 32 34 6C 69 0 0 0 0 0 0 0 0 当我将发送数据更改为： `{'a','l','i','0','1','2','4','l','i',**'0'**,'1','2','4','l','i','0','1'};` 我得到正确的，实际上我在发送数据中的第一个零字节之后得到所有 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:47:16.107

问题出在这`strncpy`行——如果您查看 的文档`strncpy`，您会注意到它只会复制到 0 字节，因此它仅适用于处理 C 字符串。如果您需要复制任意二进制数据，请使用 memcpy。

# java - 将 Object 与无序整数对作为变量进行比较时需要适当的 hashCode

> ID：11969962
> 
> 赞同：3
> 
> 时间：2012-08-15T13:15:27.550
> 
> 标签：java, comparison, equals, hashcode

我有一堂课

```
final class BuildingPair {

    int mBA;
    int mBB;

    public BuildingPair(int pBuildingA,int pBuildingB) {
        mBA = pBuildingA;
        mBB = pBuildingB;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + mBA;
        result = prime * result + mBB;
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        BuildingPair other = (BuildingPair) obj;
        if ((mBA==other.mBA&&mBB==other.mBB)||(mBA==other.mBB&&mBB==other.mBA)) return true;
        return false;
    }
} 
```

我想比较两个对象，当它们具有相同的建筑物 id 时，它们是相等的

所以它们在以下情况下需要在两个方向上相等：

```
BuildingPair(1,2) vs BuildingPair(2,1) 
BuildingPair(1,2) vs BuildingPair(1,2)
BuildingPair(2,1) vs BuildingPair(1,2) 
```

我认为equals方法还可以，但是hashcode是错误的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T13:22:11.600

您需要计算相同结果的东西，无论是通过`A,B`还是`B,A`. 可能有更微妙的解决方案，但我可能会选择：

```
@Override
public int hashCode() {
    return mBA * mBB;
} 
```

或任何其他使用可交换运算符的东西。

* * *

或者，您可以更改您的构造函数，使其始终存储`min(a,b)`在`mBA`其中- 然后您可以简化您`max(a,b)`的`mBB`比较代码并保持您的哈希代码为当前状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T13:21:53.797

您需要一个对称哈希码 ( `hashcode(a,b) == hashcode(b,a)`)，例如：

```
return mBB ^ mBA; 
```

（您当前的代码不是对称的 - 例如：hascode (2,1) = 1024 但 hashcode(1,2) = 994）

注意：这是从哈希码的启发`Long`：

```
return (int)(value ^ (value >>> 32)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T13:26:09.727

如果它们是无序的，您可以使用任意顺序来简化其余代码。

```
public BuildingPair(int pBuildingA,int pBuildingB) {
    mBA = Math.min(pBuildingA, pBuildingB);
    mBB = Math.max(pBuildingA, pBuildingB);
} 
```

将其余方法编码为正常，BuildingPair(2,1) 将与 BuildingPair(1,2) 完全相同

# asp.net-mvc - 排序逻辑应该放在模型、视图还是控制器中？

> ID：11969964
> 
> 赞同：157
> 
> 时间：2012-08-15T13:15:36.337
> 
> 标签：asp.net-mvc, model-view-controller

我有一个下拉列表，显示从表到最终用户的值。我想让这些值按字母顺序排序。

根据正确的 MVC 设计，我应该将排序逻辑放在哪一层：模型、视图或控制器？

**编辑**：在回答 LarsH 的问题时，“您的意思是确定所需排序顺序的代码？还是执行排序的代码？”，我最初指的是确定所需排序顺序的代码。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-15T14:13:00.037

## 谁控制排序顺序？

![简单的MVC图](../Images/74e56e1816c63ec35b0df6f8f1afa517.png)（来自[维基百科](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）

### 1）数据本身的自然顺序：

订单是模型的一部分，所以它应该去那里。“所有数据”的原始拉取将按排序顺序返回数据，并且没有选择排序顺序的界面。

### 2) 用户应该控制他们如何查看数据：

View 将提供与 Controller 交互的接口（例如升序/降序箭头），并且 Model 对数据的理解足以对数据进行请求的排序。但是，与 (1) 不同，不一定要对数据的原始拉取进行排序。

### 在任一情况下，

视图不理解正在进行排序，除了显示选择了哪个排序方向的能力。不要把逻辑放在那里。

### 小警告

在一种情况下（我可以临时想到；可能还有更多），排序功能*可以纯粹在视图中进行：*

一种“哑”排序，其中所有数据都已经在视图中，并且它不必使用任何领域知识来进行排序。例如，非常简单的字符串或数字比较。例如，当结果可能被拆分到多个页面时，这在网页上的搜索结果中是不可能的。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-08-15T16:08:31.513

（注意：此引用和引文摘自[@dasblinkenlight 的回答](https://stackoverflow.com/a/11970033/370671)，但我们不同意我们对它的解释。阅读他的帖子并下定决心）。

根据[MVC 描述](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，

> 控制器可以向其关联视图发送命令以更改视图对模型的表示（例如，通过滚动文档）。它可以向模型发送命令以更新模型的状态（例如编辑文档）。

排序逻辑（例如排序比较器/排序算法）属于模型，因为它包含业务规则和状态数据。由于更改模型数据的排序方式完全属于“更改视图对模型的表示”类别，因此控制器负责通过调用 model.changeSortedState() 方法来“进行排序”。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-15T13:19:55.810

根据[MVC 描述](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，

> 控制器可以向其关联视图发送命令以更改视图对模型的表示（例如，通过滚动文档）。它可以向模型发送命令以更新模型的状态（例如编辑文档）。

据此，排序逻辑属于控制器，因为改变模型数据的排序方式直接属于“改变视图对模型的表示”类别。

**编辑：**为了澄清评论中表达的多种误解，“排序逻辑”**不是**执行排序的代码；它是*定义*排序的代码。排序逻辑将各个项目相互比较以建立顺序（例如通过 的实例`IComparator<T>`）或包含构造要由外部系统用于排序的对象的逻辑（例如通过 的实例`IOrderedQueryable<T>`）。此逻辑属于您的控制器，因为它需要与应用程序的“业务”端相关的知识。*执行排序就足够了，但它与实际执行*的代码是分开的*它。排序的代码可能在您的视图中，在您的模型中，甚至在支持您的模型的持久层中（例如，您的 SQL 数据库）。*

 ** * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-15T18:17:33.477

**以上都不是。**排序是业务逻辑，业务逻辑不属于这三者中的任何一个。并非应用程序中的每一段代码都是模型、视图或控制器。

我通常在我的 MVC 应用程序中做的是我有一个执行所有业务逻辑的服务层。服务层中的方法应该有一个干净、简单的 API，并带有命名良好的参数。然后，您可以从控制器调用这些方法来操作模型中的数据。

从这个意义上说，排序是“在控制器中”，但是进行排序的代码本身不应该在控制器中实现，只能从那里调用。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-15T14:54:56.213

绝对不是控制器：它向视图和模型发送消息，但应该做的工作尽可能少。如果用户可以通过通知模型或视图来更改请求由控制器处理的排序。

如果它是一个纯粹的 View 东西，也许是 View。如果应用程序在没有排序的情况下也能正常工作，那么排序只是表示的一部分，应该出现在视图中。

如果排序是域的固有部分，它应该进入模型。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-08-15T13:43:04.757

*   视图是 MVC 的一部分，它应该包含表示逻辑。
*   模型层是包含业务逻辑的地方。
*   控制器仅根据用户输入更改两者的状态。

所以选择是——你认为这是领域业务逻辑还是表示逻辑的一部分。

如果您正在实现适当的 MVC Model2 或经典 MVC 模式，那么我会说模型层提供的数据的排序应该由视图对模型层的请求触发。视图要求有序数据，模型层提供它。

但是，由于您使用的是 ASP.NET MVC 对 MVC 模式的解释，这与您的标准 MVC 有点不同 - ViewModel 实例应该从模型层请求有序信息（出于某种原因，ASP.NET 框架认为应该调用模板“视图”和视图应该被称为“视图模型”......这很奇怪）。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-08-15T13:20:29.753

我通常会在控制器中执行此操作，以根据其他答案与模式保持一致。推理见下文。

我一直在考虑这个问题并阅读答案和相关材料，务实地说，我会说这取决于您的应用程序，例如：

它是一个中型/大型应用程序和/或有多个与之关联的 UI（即 Windows 应用程序、Web 界面和电话界面）。

*   在这种情况下，我可能会构建一个服务层并将其放入业务对象中，然后从控制器调用适当的方法。

如果它是一个定义明确的单一 UI 网站，并且您使用的是 EF Code First 之类的东西，并且您没有或无意创建服务层并计划使用简单的开箱即用的扩展方法来实现它：

*   在这种情况下，我可能会把它放在控制器中，因为它在时间/预算方面最合适。

如果它与上述相同，但无法使用开箱即用的扩展方法实现。

*   我可能会选择在 Model 类中弹出它（如果它真的是为那个单一类型定制的），因为它在这里比在控制器中更合适。如果排序可以应用于多个类，那么我将在扩展方法中实现它，然后在控制器中调用它。

总结一下：

教条式的回答：服务层

务实的回答：通常是控制器

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-08-15T19:42:38.243

我建议从一个足够小以在下拉列表中使用的表数据中排序数据——应该来自已经通过查询排序的数据库。对我来说，这使模型成为应用排序的地方。

如果您决定手动进行排序，我认为使用模型或控制器作为逻辑的首选位置有很好的论据。限制将是您的特定框架。我更喜欢仅在模型中管理数据。我使用控制器来结合数据（模型）和演示（视图），因为我已经（自学）自学了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-21T22:39:11.703

虽然我原则上同意排序是业务逻辑的想法，因为通过将其分解为它的起源，您最终会得到类似“客户希望产品页面显示按日期排序的图像”的结果，那么很明显数据的排序顺序通常不是任意的 - 即使没有排序，因为这仍然是遗漏的业务决策（空列表仍然是列表）。

但是......这些答案似乎没有考虑到ORM技术的进步，我只能谈论与微软的实体框架（让我们避免关于这是否是真正的ORM的争论，这不是重点）作为这就是我使用的，但我确信其他 ORM 也提供类似的功能。

如果我使用 MS MVC 和实体框架为产品类创建强类型视图，并且产品和图像表之间存在外键关系（例如 FK_Product_Image_ProductId），那么我将开箱即用能够快速排序在显示过程中的图像在视图中使用类似这样的东西：

```
@foreach(Image i in Model.Image.OrderBy(e => e.DisplayOrder)){ //etc etc... } 
```

提到了一个特定的业务逻辑层，我也用它来执行我 80% 的业务逻辑，但我不会将排序功能写入我的业务逻辑层来模仿一些开箱即用的东西来自实体框架。

除了这么说，我认为这个问题没有正确的答案；您应该尽可能抽象复杂的业务逻辑，但不要以重新发明轮子为代价。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-22T08:05:36.937

假设您有 MVC 网站、WebForms 网站和一个移动应用程序。

如果您希望这些表示层之间的排序保持一致，那么我会说在表示层之外进行排序。服务将是一个很好的候选人。

**否则，我会将该逻辑存储在视图模型中。为什么？因为它将是可重用且易于测试的。**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-15T13:21:54.327

在您列出的三个中，我会说它属于控制器。不过，我真的不喜欢在控制器中放置这种逻辑。我通常创建一个与控制器通信的服务层，该服务层将负责与数据存储通信并处理排序逻辑。不过，对于小型应用程序，它可以放在控制器中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-15T19:47:13.053

这是一个考虑到 asp.net 的问题，但由于有人确实提到了 Rails，我认为在这种情况下考虑这个问题会很有趣。在 Rails 中，执行排序和检索作为控制器操作是很自然且非常常见的，因为框架和 ActiveRecord/ActiveQuery api 都为此提供了规定。另一方面，可以为静态项目定义某种自定义排序顺序并将其放入模型中以供控制器使用，因此模型可以在排序逻辑中发挥作用，即使它不执行直接操作。不管是什么，可以肯定地说，将排序逻辑放在视图中通常是不受欢迎的。

我有点好笑，有些答案绝对反对将排序放在控制器或模型中，而且我觉得它们对我的口味来说太迂腐了，但我想这取决于所使用框架的性质和与相关的通常约定它。我也同意 Bill K 的评论，即首先进行分离更为重要。*

# php - 在数据库上创建多个表

> ID：11969967
> 
> 赞同：1
> 
> 时间：2012-08-15T13:15:42.183
> 
> 标签：php, database, pdo

使用 PHP 在包含数据库的数据库上创建表`$fsdbh`。显然我错过了一些东西。

```
function createdb($tables){
    global $fsdbh;
    $sth = $fsdbh->prepare('CREATE TABLE IF NOT EXISTS system');
    $sth->execute();
} 
```

此功能在触发时会导致黑屏。

目的是使用该函数创建一系列表：

```
function createdb($tables){
    global $fsdbh;
    $sql = 'CREATE TABLE IF NOT EXISTS system';
    foreach($tables as $table){
       $sql.= '; CREATE TABLE IF NOT EXISTS $table';
    }
    $sth = $fsdbh->prepare($sql);
    $sth->execute();
} 
```

我们如何让它发挥作用？

# asp.net-mvc-3 - MVC3 从模型中获取随机值

> ID：11969968
> 
> 赞同：-2
> 
> 时间：2012-08-15T13:15:49.287
> 
> 标签：asp.net-mvc-3

有没有办法从模型中随机获取值？

```
public string Oku()
        {

            var query = (from b in db.banner orderby Guid.NewGuid() select new { b.banner_image_name }).Take(1);

            return ("<img src='/banner_image/" + query.FirstOrDefault().banner_image_name.ToString() + "' width='154px' height='108px'/>");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:29:50.207

获取项目，在 0 和横幅总数之间创建一个随机数，从横幅列表中获取该横幅

```
public string SomeImage()
{    
   var banners=db.banner.ToList();
   int totalBanners=banners.Count();
   Random rand=new Random();
   int randomNumb=rand.Next(0, totalBanners);
   var randomBanner=banners[randomNumb];
   return ("<img src='/banner_image/"+randomBanner..banner_image_name+"' />");
} 
```

# c# - .NET 程序集未找到来自用户控件的错误

> ID：11969971
> 
> 赞同：2
> 
> 时间：2012-08-15T13:15:52.580
> 
> 标签：c#, .net, assemblies

我有一个问题，我的用户控件在运行时找不到特定的引用程序集。

我在运行时从嵌入式资源中提取引用的程序集，但这是用户控件在提取之前以某种方式寻找的唯一程序集，因此无法找到它。

为什么应用程序不等待创建程序集的实例来查找它？

我试图理解。为什么这个程序集属于“预绑定”类别？

**下面的融合日志**

```
*** Assembly Binder Log Entry  (8/15/2012 @ 8:55:28 AM) ***

    The operation failed.
    Bind result: hr = 0x80070002\. The system cannot find the file specified.

    Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
    Running under executable  C:\Temp\gn\WPFDemo\bin\Debug\WPFDemo.exe
    --- A detailed error log follows. 

    === Pre-bind state information ===
    LOG: User = xxxx
    LOG: DisplayName = AVX.NET, Version=1.2.0.1551, Culture=neutral, PublicKeyToken=4300bc540bfb680e
     (Fully-specified)
    LOG: Appbase = file:///C:/Temp/gn/WPFDemo/bin/Debug/
    LOG: Initial PrivatePath = NULL
    LOG: Dynamic Base = NULL
    LOG: Cache Base = NULL
    LOG: AppName = WPFDemo.exe
    Calling assembly : Test, Version=1.0.6.39680, Culture=neutral, PublicKeyToken=4300bc540bfb680e.
    ===
    LOG: This bind starts in default load context.
    LOG: Using application configuration file: C:\Temp\gn\WPFDemo\bin\Debug\WPFDemo.exe.Config
    LOG: Using host configuration file: 
    LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
    LOG: Post-policy reference: AVX.NET, Version=1.2.0.1551, Culture=neutral, PublicKeyToken=4300bc540bfb680e
    LOG: GAC Lookup was unsuccessful.
    LOG: Attempting download of new URL file:///C:/Temp/gn/WPFDemo/bin/Debug/AVX.NET.DLL.
    LOG: Attempting download of new URL file:///C:/Temp/gn/WPFDemo/bin/Debug/AVX.NET/AVX.NET.DLL.
    LOG: Attempting download of new URL file:///C:/Temp/gn/WPFDemo/bin/Debug/AVX.NET.EXE.
    LOG: Attempting download of new URL file:///C:/Temp/gn/WPFDemo/bin/Debug/AVX.NET/AVX.NET.EXE.
    LOG: All probing URLs attempted and failed.

    *** Assembly Binder Log Entry  (8/15/2012 @ 8:55:28 AM) ***

    The operation failed.
    Bind result: hr = 0x80070002\. The system cannot find the file specified.

    Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
    Running under executable  C:\Temp\gn\WPFDemo\bin\Debug\WPFDemo.exe
    --- A detailed error log follows. 

    === Pre-bind state information ===
    LOG: User = xxxx
    LOG: DisplayName = AVX.NET, Version=1.2.0.1551, Culture=neutral, PublicKeyToken=4300bc540bfb680e
     (Fully-specified)
    LOG: Appbase = file:///C:/Temp/gn/WPFDemo/bin/Debug/
    LOG: Initial PrivatePath = NULL
    LOG: Dynamic Base = NULL
    LOG: Cache Base = NULL
    LOG: AppName = WPFDemo.exe
    Calling assembly : Test, Version=1.0.6.39680, Culture=neutral, PublicKeyToken=4300bc540bfb680e.
    ===
    LOG: This bind starts in default load context.
    LOG: Using application configuration file: C:\Temp\gn\WPFDemo\bin\Debug\WPFDemo.exe.Config
    LOG: Using host configuration file: 
    LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
    LOG: Post-policy reference: AVX.NET, Version=1.2.0.1551, Culture=neutral, PublicKeyToken=4300bc540bfb680e
    LOG: GAC Lookup was unsuccessful.
    LOG: Attempting download of new URL file:///C:/Temp/gn/WPFDemo/bin/Debug/AVX.NET.DLL.
    LOG: Attempting download of new URL file:///C:/Temp/gn/WPFDemo/bin/Debug/AVX.NET/AVX.NET.DLL.
    LOG: Attempting download of new URL file:///C:/Temp/gn/WPFDemo/bin/Debug/AVX.NET.EXE.
    LOG: Attempting download of new URL file:///C:/Temp/gn/WPFDemo/bin/Debug/AVX.NET/AVX.NET.EXE.
    LOG: All probing URLs attempted and failed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:37:15.530

CLR 有几个触发器来加载程序集。除了显式的 Assembly.LoadXxx() 调用之外，迄今为止最常见的调用是即时编译器。这需要程序集在该方法执行*之前为该方法正确生成代码。*

因此，如果您有任何代码使用此类程序集中的类型，并且该代码与您提取 DLL 的代码“接近”，那么您很可能会得到这个结果。在您的提取代码可以运行之前，抖动很可能需要程序集。

您必须特别注意抖动优化器执行的内联优化，在没有附加调试器的情况下在发布版本中启用。现在“关闭”超出了方法体。为了防止这种情况发生，从执行 DLL 提取代码的方法调用的任何方法都必须用 [MethodImpl(MethodImplOptions.Noinlining)] 修饰。

使用这种方法，您可能会遇到另一个问题。您似乎没有编写自定义 AppDomain.AssemblyResolve 事件处理程序。或者它可能还没有注册。在最新版本的 Windows 上，您无法将 DLL 提取到与 EXE 相同的目录，UAC 会阻止此操作。需要解压到可写目录。说 TEMP 目录。然后需要一个自定义程序集解析处理程序。当可执行文件不知从何处出现时，病毒扫描程序会感到紧张，这是另一种高度随机且完全无法诊断的可能故障模式。

使用部署单个可执行文件的最常见方法来避免此类问题。一个名为 setup.exe，由安装项目创建。在VS中很容易做到。

# php - PHP 构造函数中的类型提示？

> ID：11969975
> 
> 赞同：0
> 
> 时间：2012-08-15T13:16:05.897
> 
> 标签：php, class, oop, constructor

有什么可以阻止我在`__construct()`括号内进行这样的类型提示吗？

```
<?php

    class SomeClass extends BaseClass {

        public function __construct(array $someArray) {

            parent::__construct($someArray);
        } 
```

还是我只能这样做？

```
<?php

    class SomeClass extends BaseClass {

        public function __construct($someArray = array()) {

            parent::__construct($someArray);
        } 
```

**编辑：**

这是有效的：（感谢@hakra 和@Leigh）

```
<?php

    class SomeClass extends BaseClass {

        public function __construct( array $someArray = NULL ) {

            parent::__construct( (array) $someArray);
        } 
```

对我来说，它看起来又好又干净，我确切地知道它应该意味着什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T13:19:44.280

这是没有默认值的类型提示，说明**必须**给出一个参数，并且它的类型**必须**是一个数组

`public function __construct(array $someArray) {`

* * *

如果没有传递参数，这将提供参数的默认值，没有类型提示。

`public function __construct($someArray = array()) {`

* * *

他们是两个不同的东西。

在第二个实例中，您可以调用不带参数的函数，它会工作，但第一个不会。

如果需要，可以将两者结合起来，以指定默认值并指定所需的类型。

`public function __construct(array $someArray = array()) {`

或者正如@hakre 所说，你可以这样做：

`public function __construct(array $someArray = NULL) {`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T13:22:50.477

你可以这样做：

```
public function __construct(array $someArray = NULL)
{
    $someArray = (array) $someArray;
    parent::__construct($someArray);
    ... 
```

这里的情况是利用规则的`= NULL`例外。下一行：

```
 $someArray = (array) $someArray; 
```

只是转换`NULL`为空数组的一些简写，否则将数组保持原样（所谓的*[cast ^(Docs)](http://php.net/manual/en/language.types.type-juggling.php) to array*）：

> 转换`NULL`为数组会产生一个空数组。

（来自：*[转换为数组^(文档)](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting)*）

当然你可以写得更短：

```
public function __construct(array $someArray = NULL)
{
    parent::__construct((array) $someArray);
} 
```

但它并没有很好地解释它。

# c# - 如何优化数据网格的代码

> ID：11969980
> 
> 赞同：0
> 
> 时间：2012-08-15T13:16:13.813
> 
> 标签：c#, wpf, mvvm

我想在我的应用程序中重复这个设计。

![http://imageshack.us/photo/my-images/651/50171626.jpg/](../Images/52072b8401f6dab00980a004d4a17661.png)

我写了这段代码。

```
public class CellViewModel
{
    public string Background { get; set; }

    public string FontWeight { get; set; }

    public string Foreground { get; set; }

    public string Value { get; set; }
} 
```

DataGridCell 的 ViewModel

* * *

```
public class PerformanceItemViewModel
{
    public CellViewModel Title { get; set; }

    public CellViewModel AllTrades { get; set; }

    public CellViewModel LongTrades { get; set; }

    public CellViewModel ShortTrades { get; set; }

    public CellViewModel BuyAndHold { get; set; }
} 
```

* * *

```
public class PerformanceViewModel
{
    public PerformanceViewModel()
    {
        this.Items = new ObservableCollection<PerformanceItemViewModel>
            {
                new PerformanceItemViewModel
                    {
                        Title = new CellViewModel { Value = "Net Profit", FontWeight = "Bold", Foreground = "Black", Background = "White" },
                        AllTrades = new CellViewModel { Value = "-683,84", FontWeight = "Normal", Foreground = "Red", Background = "White" },
                        LongTrades = new CellViewModel { Value = "-683,84", FontWeight = "Normal", Foreground = "Red", Background = "White" },
                        ShortTrades = new CellViewModel { Value = "0,00", FontWeight = "Normal", Foreground = "Black", Background = "White" },
                        BuyAndHold = new CellViewModel { Value = "-2010,00", FontWeight = "Normal", Foreground = "Red", Background = "White" }
                    }
            };
    }

    public ObservableCollection<PerformanceItemViewModel> Items { get; set; }
} 
```

我想优化这段代码。

主要问题是如何通知 DataGrid 背景、字体重量、前景？

* * *

```
<Grid>
    <datagrid:ThemedDataGrid AlternatingRowBackground="{Binding Background}"
                             AutoGenerateColumns="False"
                             GridLinesVisibility="None"
                             HeadersVisibility="Column"
                             IsHitTestVisible="False"
                             IsReadOnly="True"
                             ItemsSource="{Binding Performance.Items}">

        <datagrid:ThemedDataGrid.CellStyle>
            <Style TargetType="DataGridCell">
                <Setter Property="BorderThickness" Value="0" />
            </Style>
        </datagrid:ThemedDataGrid.CellStyle>

        <datagrid:ThemedDataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Path=Title.Value}">
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="{Binding Path=Title.Background}" />
                        <Setter Property="FontWeight" Value="{Binding Path=Title.FontWeight}" />
                        <Setter Property="Foreground" Value="{Binding Path=Title.Foreground}" />
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
            <DataGridTextColumn Header="All Trades" Binding="{Binding Path=AllTrades.Value}">
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="{Binding Path=AllTrades.Background}" />
                        <Setter Property="FontWeight" Value="{Binding Path=AllTrades.FontWeight}" />
                        <Setter Property="Foreground" Value="{Binding Path=AllTrades.Foreground}" />
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
            <DataGridTextColumn Header="Long Trades" Binding="{Binding Path=LongTrades.Value}">
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="{Binding Path=LongTrades.Background}" />
                        <Setter Property="FontWeight" Value="{Binding Path=LongTrades.FontWeight}" />
                        <Setter Property="Foreground" Value="{Binding Path=LongTrades.Foreground}" />
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
            <DataGridTextColumn Header="Short Trades" Binding="{Binding Path=ShortTrades.Value}">
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="{Binding Path=ShortTrades.Background}" />
                        <Setter Property="FontWeight" Value="{Binding Path=ShortTrades.FontWeight}" />
                        <Setter Property="Foreground" Value="{Binding Path=ShortTrades.Foreground}" />
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
            <DataGridTextColumn Header="Buy And Hold" Binding="{Binding Path=BuyAndHold.Value}">
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="{Binding Path=BuyAndHold.Background}" />
                        <Setter Property="FontWeight" Value="{Binding Path=BuyAndHold.FontWeight}" />
                        <Setter Property="Foreground" Value="{Binding Path=BuyAndHold.Foreground}" />
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
        </datagrid:ThemedDataGrid.Columns>
    </datagrid:ThemedDataGrid>
</Grid> 
```

但不幸的是，这段代码非常繁琐。

也许你有一些想法如何改进它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:51:32.520

WPF 中的 DataGrid 支持分组，请查看这篇文章[How to: Group, Sort, and Filter Data in the DataGrid Control](http://msdn.microsoft.com/en-us/library/ff407126.aspx)。MSDN上的相同与您的问题非常相似。

# flash - AS2 符号深度冲突

> ID：11969981
> 
> 赞同：0
> 
> 时间：2012-08-15T13:16:21.770
> 
> 标签：flash, actionscript-2, flash-8

我正在使用以下代码段来创建带纹理的背景。

```
tileBG = function () {

tile_width = 7.75;
tile_height = 7.75;

x_max = Math.round(Stage.width/tile_width);
y_max = Math.round(Stage.height/tile_height);
trace(x_max);
trace(y_max);
for (x=0; x<=x_max; x++) {

for (y=0; y<=y_max; y++) {

bg = _root.attachMovie("square", "bg"+x+y, this.getNextHighestDepth());
bg._x = tile_width*x;
bg._y = tile_height*y;
}

}

};

tileBG(); 
```

我遇到的问题是模式/teture 出现在一切之上（我猜这是因为：getNextHighestDepth()）。当我设置较低的深度时，例如 2，由于重复效应而失败，如果我执行 2+x，它会失败，因为该层上方大约有 8 层，它们可能分配了一些相同的深度。

我想知道是否有人对此有解决方案，或者我是否可以强制我的顶层（8 左右）具有特定的深度，例如 100+ 或类似的深度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:48:57.400

在您要附加图片的深度处创建一个空剪辑，并将其放置在位置 0x0。假设它将被称为“mcTexture”。

然后，您可以修改调用“attachMovie”的代码行：

```
bg = mcTexture.attachMovie("square", "bg"+x+y, mcTexture.getNextHighestDepth()); 
```

# java - 在 struts 操作中间调用远程 servlet

> ID：11969983
> 
> 赞同：0
> 
> 时间：2012-08-15T13:16:34.583
> 
> 标签：java, jsp, servlets, struts

是否可以在 struts 操作中间调用远程 servlet，然后使用其结果？

例如，假设我在同一台服务器上有两个 webapps A 和 B

Webapp A 有一个动作，我想做这样的事情：

```
processing
"call" servlet in webapp B
process using response from remote servlet
forward to whatever page is appropriate (success/error/etc) 
```

在我的具体示例中，webapp B 中的 servlet 将生成一个 PDF 文件，该文件在响应中返回，我需要在 webapp A 中的操作的进一步处理中使用此 pdf 文件。

所以我希望对servlet的调用就像调用一个方法，如果可能的话，它会返回我需要进一步处理的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:04:24.167

您可以使用 vanilla [HttpURLConnection](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/HttpURLConnection.html)或更强大的[Apache HttpClient Api](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d4e37)

# ssas - 仅聚合现有事实的 MDX 查询结果

> ID：11969988
> 
> 赞同：0
> 
> 时间：2012-08-15T13:17:17.373
> 
> 标签：ssas, mdx, olap, cube

我对 MDX 很陌生，所以可能我错过了一些非常简单的东西。

在我的多维数据集中，我有一个维度`[Asset]`和一个度量`[Visits]`，计算（在这种情况下）资产已被消耗了多少次访问。需要注意的重要一点是，并非每次访问都与资产相关联。

我需要找出的是有多少次访问至少消耗了一项资产。我写了以下查询：

```
SELECT
  [Asset].[All] ON COLUMNS,
  [Measures].[Visits] ON ROWS
FROM
  [Analytics] 
```

但是这个查询只返回多维数据集中的访问总数。我尝试将`NON EMPTY`修改器应用于两个轴，但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:15:03.650

这个查询应该给你你所期望的：

```
WITH MEMBER [Asset].[Asset Name].[All Assets] AS
  AGGREGATE( EXCEPT( [Asset].[Asset Name].MEMBERS, { [Asset].[All] } ) )
SELECT
  { [Asset].[Asset Name].[All Assets] } ON COLUMNS,
  [Measures].[Visits] ON ROWS
FROM
  [Analytics] 
```

`{[Asset].[Asset Name].[All]}`如果未排除 All 成员，您可能需要将其作为“除外”的第二个参数。

在查询中，我创建了一个`[Asset].[Asset Name].[all assets]`应该代表所有现有资产的计算成员。我假设您现有的资产是该级别的所有成员，`[Asset].[Asset Name]`但`All`成员。

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms145524)找到有关聚合函数的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:48:44.250

这也有效：

```
SELECT
  [Measures].[Visits] ON 0
FROM
  [Analytics]
WHERE
  DRILLDOWNLEVEL([Asset].[All]) 
```

**更新：**以及这个：

```
SELECT
  [Measures].[Visits] ON 0
FROM
  [Analytics]
WHERE
  [Asset].[All].CHILDREN 
```

# c# - 如何以二进制帧格式发送数据 (TCP)

> ID：11969993
> 
> 赞同：3
> 
> 时间：2012-08-15T13:17:32.457
> 
> 标签：c#, tcp, binary-data

我需要将数据流式传输到 TCP 服务器并且之前没有做过。数据应为二进制帧格式。我用谷歌搜索并找到了本教程，我认为它描述了我需要做的事情：

[http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient(v=vs.71).aspx)

但我不知道如何以所需格式创建数据，以便我可以以正确的方式发送它。它应该是这种格式：

```
Field|Offset|    Type  | size(octets)
id   |  0   |unsign int|      1
name |  1   |Byte Array|      40
grade|  41  |sign float|      8 
```

例子：

```
Field| Data | InBytes  |
id   |  133 | 133      |
name |  247 | 247 0    |
grade|  0   | 0        | 
```

我应该存储 int、字节数组、浮点数的数据类型是什么，我在哪里指定偏移量和大小，最后应该如何将它发送到服务器（在示例中，它们只发送一个字节数组）。

AC#-如何使用上面提供的链接中的代码发送此类数据的示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:34:45.863

我将采取的方法是在我的其余代码和正在发送的数据的物理表示之间有两个函数作为接口。这将允许我封装发送出 TCP 连接的物理数据表示，并允许它在需要时进行更改。

所以你可能想要的是有一个 TCP 读取器类，它提供帧组合功能和从帧的原始字节到数据结构的转换和一个 TCP 写入器类，它采用数据结构并创建一个原始字节帧，然后将其写入 TCP 连接。

我将有一个消息缓冲区，它将是一个字节数组。这是将从 TCP 连接发出的消息缓冲区。

接下来是一个数据结构，其中包含系统其余部分使用的数据。

然后我会有一个函数，比如`FromTcpToDataStruct (dataStruct, messageArray)`从原始字节字符串转换为我正在使用的数据结构，然后`FromDataStructToTcp (messageArray, dataStruct)`从数据结构转换为原始字符串。

你有几个问题需要考虑。首先是目标服务器上无符号整数和浮点数的表示，即[Little Endian Big Endian 问题](http://en.wikipedia.org/wiki/Endianness)。第二个是将来自 TCP 连接的字节串转换为离散帧（从 TCP 连接读取字节并使用临时缓冲区组成完整的原始字节帧，以便读取提供完整的字节帧）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T13:46:15.997

您不能只发送该数据。TCP 是基于流的，这意味着可以使用一个操作 ( `socket.Receive()`) 或使用多个操作来接收您的信息。

解决此问题的最简单方法是使用包含标头（简单长度标头就足够了）和正文（您指定的信息）的数据包格式。

我不知道您是否必须自己实现所有内容，或者您​​是否可以使用网络库。我创建了一个库来为您处理所有套接字 IO。您需要做的就是处理编码和解码。我已经为一个简单的二进制协议写了一个小例子（未完成）。

编码器/解码器类可以在这里找到：[https ://github.com/jgauffin/griffin.networking/tree/master/Source/Protocols/SimpleBinary/Griffin.Networking.Protocol.SimpleBinary/Handlers](https://github.com/jgauffin/griffin.networking/tree/master/Source/Protocols/SimpleBinary/Griffin.Networking.Protocol.SimpleBinary/Handlers)

Griffin.Networking 简介：http: [//blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/](http://blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T15:03:29.747

要表示要序列化（和反序列化）的数据，您可以使用结构并设置正确的元数据，因此 CLR 会为您完成其余的工作。就像其他人在这里所说的那样，您将需要处理端点上的数据包接收。此外，您还必须考虑接收方期望的字符集，因为您的数据中有一个字符串字段。以下代码是有关如何实现结构以将托管数据转换为二进制格式的示例，并带有注释。

```
// setting the layout to sequential will prevent the compiler/JIT
// to reorder the struct fields
// NOTE: Observe here that the Charset used is Ansi. You may need to
// change this depending on the format expected by the receiver.
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
struct DataPacket
{

    [MarshalAs(UnmanagedType.U4)]
    public uint Id;

    // As I understood from your question, the Name field
    // has a prefixed size of 40 bytes. Attention here:
    // the SizeConst actually means '40 characters', not bytes
    // If you choose to use the Unicode charset, set SizeConst = 20
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 40)]
    public String Name;

    // This will be serialized in little endian format
    // in your question this field is 8 bytes long, which 
    // in c# corresponds to the double type. If you really mean
    // the float type (4 bytes), change here.
    public double Grade;

    // Calling this method will return a byte array with the contents
    // of the struct ready to be sent via the tcp socket.
    public byte[] Serialize()
    {
        // allocate a byte array for the struct data
        var buffer = new byte[Marshal.SizeOf(typeof(DataPacket))];

        // Allocate a GCHandle and get the array pointer
        var gch = GCHandle.Alloc(buffer, GCHandleType.Pinned);
        var pBuffer = gch.AddrOfPinnedObject();

        // copy data from struct to array and unpin the gc pointer
        Marshal.StructureToPtr(this, pBuffer, false);
        gch.Free();

        return buffer;
    }

    // this method will deserialize a byte array into the struct.
    public void Deserialize(ref byte[] data)
    {
        var gch = GCHandle.Alloc(data, GCHandleType.Pinned);
        this = (DataPacket)Marshal.PtrToStructure(gch.AddrOfPinnedObject(), typeof(DataPacket));
        gch.Free();
    }
} 
```

用法：

```
DataPacket packet;
packet.Id = 1234;
packet.Name = "Marvin the paranoid robot";
packet.Grade = 9.2;

// serialize
var bytes = packet.Serialize();

// send via tcp
var tcp = new TcpClient(...); 
tcp.GetStream().Write(bytes, 0, bytes.Length);

// deserializing;
DataPacket receivedPacket;
receivedPacket.Deserialize(bytes); 
```

您已经有了数据包，现在您需要处理接收器上的数据包接收。那部分你不需要全部手工完成，你可以使用一些工具，比如@jgauffin 说的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T13:35:31.333

我会简单地使用二进制写入器将数据转换为字节数组，然后像示例中一样发送它。

您可能需要检查字符串以确保它形成 40 个字节

```
 MemoryStream MS = new MemoryStream();
        BinaryWriter Writer = new BinaryWriter(MS);
        Writer.Write(MyByte);
        Writer.Write(ASCIIEncoding.UTF8.GetBytes(MyString));
        Writer.Write(MyDouble); 
```

# c - 如何正确测量 CUDA 时间？

> ID：11969994
> 
> 赞同：2
> 
> 时间：2012-08-15T13:17:36.733
> 
> 标签：c, performance, algorithm, cuda, measurement

我试图正确测量并行和顺序执行的时间，但我有疑问，因为：

假设我们有以下代码：

```
 //get the time
    clock_t start,finish;
    double totaltime;
    start = clock(); 

    double *d_A, *d_B, *d_X;

    cudaMalloc((void**)&d_A, sizeof(double) * Width * Width);
    cudaMalloc((void**)&d_B, sizeof(double) * Width);
    cudaMalloc((void**)&d_X, sizeof(double) * Width);

    cudaMemcpy(d_A, A, sizeof(double) * Width * Width, cudaMemcpyHostToDevice);
    cudaMemcpy(d_B, B, sizeof(double) * Width, cudaMemcpyHostToDevice);  

    do_parallel_matmul<<<dimB, dimT>>>(d_A, d_B, d_X, Width);   

    cudaMemcpy(X, d_X, sizeof(double) * Width, cudaMemcpyDeviceToHost);

    finish = clock();

    totaltime=(double)(finish-start)/CLOCKS_PER_SEC;   

    printf("%f", totaltime); 
```

这个时间比连续时间长得多，测量如下：

```
clock_t start,finish;
double totaltime;
start = clock(); 

do_seq_matmult();

finish = clock();

totaltime=(double)(finish-start)/CLOCKS_PER_SEC;   

printf("%f", totaltime); 
```

所以我不知道我是否应该只测量CUDA内核时间如下：

```
clock_t start,finish;
double totaltime;
start = clock(); 

do_parallel_matmul();

finish = clock();

totaltime=(double)(finish-start)/CLOCKS_PER_SEC;   

printf("%f", totaltime); 
```

并避免主机和设备之间的内存复制......

我之所以问上述问题，是因为我必须提交并行执行和顺序执行之间的比较...但是如果我在 CUDA 中测量内存副本，那么 CUDA 和 C 之间并没有很大的区别...

编辑：

```
void do_seq_matmult(const double *A, const double *X, double *resul, const int tam)
{
    *resul = 0;
    for(int i = 0; i < tam; i++)
    {
        for(int  j = 0; j < tam; j++)
        {
            if(i != j)
                *resul += A[i * tam + j] * X[j];
        }
    }
}

__global__ void do_parallel_matmul( double * mat_A, 
                            double * vec, 
                            double * rst, 
                            int dim)
{
     int rowIdx = threadIdx.x + blockIdx.x * blockDim.x; // Get the row Index 
     int aIdx;
     while( rowIdx < dim)
     {
          rst[rowIdx] = 0; // clean the value at first
          for (int i = 0; i < dim; i++)
          {
               aIdx = rowIdx * dim + i; // Get the index for the element a_{rowIdx, i}
               rst[rowIdx] += (mat_A[aIdx] * vec[i] ); // do the multiplication
          }
          rowIdx += gridDim.x * blockDim.x;
     }
     __syncthreads();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:47:52.830

您在测量中使用了错误的功能。`clock`测量您的进程在 CPU 上花费的时间，而不是挂钟时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:53:57.047

看看[High Precision Timer](http://www.songho.ca/misc/timer/timer.html)库，它使用 OS 相关的计时功能来测量时间。

它使用了一组可以为您提供*微秒精度*的函数。

如果你在 Windows 上，你应该 在 Linux 上使用`QueryPerformanceFrequency`和：`QueryPerformanceCounter``gettimeofday()`

它非常轻便且易于使用。适用于 Windows 和 Linux。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:52:54.730

一些想法：

1.  在没有主机分配内存的情况下，将设备内存分配的时间与 CPU 进行比较是不公平的。

2.  如果 `cudaMalloc((void**)&d_A, sizeof(double) * Width * Width);` 是第一个 CUDA 调用，它将包括 CUDA 上下文创建，这可能是一个很大的开销。

3.  计时 cudamemcpy 不是一个公平的 CPU/GPU 比较，因为这个时间将取决于系统的 PCI-e 带宽。另一方面，如果您从 CPU 的角度将内核视为加速，则需要包含 memcpy。为了使 PCI-e 带宽达到峰值，请使用页面锁定内存。

4.  如果您的应用程序要多次运行乘法运算，那么您可以通过将副本与内核执行重叠来隐藏大部分 memcpy。这在你有双 DMA 引擎的特斯拉单元上更好。

5.  为内核本身计时将要求您在停止计时器之前将 CPU 与 GPU 同步，否则您将只为内核启动本身而不是执行计时。从 CPU 调用内核是异步的。如果您想为 GPU 上的内核执行计时，请使用 cudaEvents。

6.  在 GPU 上运行多个线程以获得公平的比较。

7.  改进内核，你可以做得更好。

# ios - 以编程方式在两个 UIViewController 之间切换

> ID：11969998
> 
> 赞同：2
> 
> 时间：2012-08-15T13:17:51.923
> 
> 标签：ios, uiviewcontroller

我有两个 xib 文件，每个文件都有一个覆盖 UIViewController 类的类。我在第一个 xib 文件中有一个按钮，当它被按下时应该带我到新的 UIViewController。我设法以不同的方式实现了这种转变：

```
UIViewController* secondViewController = [[UIViewController alloc] initWithNibName:@"SecondViewControllerName" bundle:[NSBundle mainBundle]];
        [self.view addSubview:secondViewController.view]; 
```

或者

```
UIViewController* secondViewController = [[UIViewController alloc] initWithNibName:@"SecondViewControllerName" bundle:[NSBundle mainBundle]];
        [self.navigationController pushViewController:secondViewController animated:YES]; 
```

在第二个 UIViewController xib 文件中，我还有一个按钮可以让我回到第一个 UIViewController。但我不知道如何导航回第一个 UIViewController。

我试过：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

对于导航到第二个 UIViewController 的第二种方式，但我收到*无法识别的选择器发送到实例*错误。

非常感谢您提供的任何帮助。

* * *

**[编辑#1：添加源代码]**

这是第一个视图控制器 .m 文件的源代码：

```
#import "ViewController.h"
#import "SecondViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)switchToSecondPage:(id)sender
{
    SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    [UIView beginAnimations:@"flipping view" context:nil];
    [UIView setAnimationDuration:1];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition: UIViewAnimationTransitionCurlDown forView:self.view cache:YES];

    [self.view addSubview:secondViewController.view];

    [UIView commitAnimations];  

}

@end 
```

这是第二个视图控制器 .m 文件的源代码：

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)switchToFirstPage:(id)sender
{
    [UIView beginAnimations:@"flipping view" context:nil];
    [UIView setAnimationDuration:1];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
    [UIView setAnimationTransition: UIViewAnimationTransitionCurlUp forView:self.view.superview cache:YES];

    [self.view removeFromSuperview];

    [UIView commitAnimations];
}

@end 
```

这是我的 AppDelegate.m 文件：

```
#import "AppDelegate.h"

#import "ViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
}

- (void)applicationWillTerminate:(UIApplication *)application
{
}

@end 
```

整个项目被制作为单视图应用程序，并针对 XCode 4.3 中的 iOS 5.1。我找到了示例项目，它与我遇到的问题相同。这是该项目的 URL：http: [//www.devx.com/wireless/Article/42476/0/page/2](http://www.devx.com/wireless/Article/42476/0/page/2) 它只是为早期的 iO​​S 版本编写的。有没有人能看到我做错了什么，因为我真的没有想法？

PS：在代码中使用这个动画，或者没有 - 发生同样的问题，所以动画不是问题，我已经检查过了。

* * *

**[编辑#2：添加错误信息]**

这是错误描述。在返回线的主要方法中，如下所示：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

我收到此错误：

> 线程 1：EXC_BAD_ACCESS（代码=1，地址=0xc00000008）

* * *

**[编辑#3：解决方案]**

我要感谢@btype 下面的解决方案。我发现了为什么编辑#2 中的代码不起作用。问题是这样做：

```
SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil]; 
```

**IBAction 方法的内部！**看起来ARC在到达范围结束时就擦除了我的UIViewController，这就是为什么我得到有关向已发布实例发送消息的信息的原因。我在 ViewController 类中创建了 SecondViewController 私有字段，之后一切正常。

如果有人认为我的解释是错误的并且知道真正困扰我的事情，请随时回答这个问题并纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:34:49.737

编辑代码：

在 AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
ViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];
self.window.rootViewController = navController;
[self.window makeKeyAndVisible];
return YES;
} 
```

第一视图控制器.m

```
- (IBAction)switchToSecondPage:(id)sender
{
    [self.navigationController pushViewController:secondViewController animated:YES];
} 
```

SeconViewController.m

```
- (IBAction)switchToFirstPage:(id)sender
{
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

这应该会有所帮助。