# StackOverflow 问答 11026000-11026999

# php - PDO 查询数据库 ODBC

> ID：11026002
> 
> 赞同：0
> 
> 时间：2012-06-14T02:48:49.800
> 
> 标签：php, ms-access, pdo, odbc

我正在从 phpro.org 学习 PDO，有点困惑。

```
<?php
try {
    $dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=C:\pdo-tutorial.mdb;Uid=Admin");
    }
catch (PDOException $e)
    {
    echo $e->getMessage();
    } 
?> 
```

**什么是uid？我应该输入什么值？**

而且，关于查询

```
<?php

try {
    $dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=C:\pdo-tutorial.mdb;Uid=Admin");
    /*** echo a message saying we have connected ***/
    echo 'Connected to database<br />';

    /*** The SQL SELECT statement ***/
    $sql = "SELECT * FROM animals";

    /*** fetch into an PDOStatement object ***/
    $stmt = $dbh->query($sql);

    /*** echo number of columns ***/
    $result = $stmt->fetch(PDO::FETCH_ASSOC);

    /*** loop over the object directly ***/
    foreach($result as $key=>$val)
    {
    echo $key.' - '.$val.'<br />';
    }

    /*** close the database connection ***/
    $dbh = null;
}
catch(PDOException $e)
    {
    echo $e->getMessage();
    }
?> 
```

我正在使用 odbc，但为什么 foreach 函数只回显第一行，而不是循环回显我在数据库中的所有值？这是结果。

```
Connected to database
ID - 1
animal_type - kookaburra
animal_name - bruce 
```

你能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:51:33.020

对于你的第二个问题：

您需要使用`fetchAll()`而不是`fetch()`，它一次只给您一行。

在您的代码中，尝试：（ `$result = $stmt->fetchAll(PDO::FETCH_ASSOC);`尽管这会改变您的 foreach 循环的外观）。

或者，您可以根据需要使用 while 循环来获取每一行：

```
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)){
    //Do something with $row
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T02:52:07.040

Uid 是您要连接到数据库的用户名，如果您的 mdb 文件不受保护，您可以省略此参数。

要获取所有结果，您必须使用 fetchAll (http://php.net/manual/en/pdostatement.fetchall.php)。

# castle-windsor - 是否可以使用 XmlInterpreter 向现有 WindsorContainer 添加其他注册？

> ID：11026005
> 
> 赞同：0
> 
> 时间：2012-06-14T02:49:22.677
> 
> 标签：castle-windsor

我希望能够在容器上注册一些类型，然后在 XML 配置文件中声明一些额外的类型。不幸的是，IConfigurationInterpreter（由 XmlInterpreter 实现）仅在 WindsorContainer() 构造函数中可用，而不在任何 AddXXX() 方法中可用。有没有其他方法可以在不诉诸父/子容器的情况下实现这一点（可能很快就会不受支持）。

背景：我们的大型应用程序才刚刚开始使用 Castle 框架来注册和解析它的一些组件。因为 Castle 正在被改造到这个应用程序中，所以我们使用单例类来维护 WindsorContainer() 的全局实例。在单元测试中，我们需要连接这个容器实例以使用自定义模拟实现（特定于测试）+一些默认模拟实现的组合。由于 DLL 依赖的原因，这些模拟类类型在此单元测试夹具抽象基类中不可用，因此需要动态注册（使用字符串）。我希望使用 XML 资源文件来注册默认模拟。否则，我必须使用 IWindsorInstaller 实现来做同样的事情，这实际上复制了 XmlInterpreter 所做的事情。这个 API 似乎在强制这个方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:04:39.213

我认为这些会起作用......

container.Install(Castle.Windsor.Installer.Configuration.FromXml(resource))

或者

container.Install（Castle.Windsor.Installer.Configuration.FromXmlFile（路径））

这两者都避免使用 IConfigurationInterpreter 接口。

# python - 为什么当我追加到其中的列表时，元组的内容会发生变化，但更新变量时不会发生变化？

> ID：11026011
> 
> 赞同：7
> 
> 时间：2012-06-14T02:49:55.597
> 
> 标签：python, list, append, tuples, variable-assignment

```
myVar = ["jhhj", "hgc"]
myTuple = ([1,2,3], [4,5,6], myVar)
myVar.append('lololol')
print myTuple 
```

为什么以及如何通过在构造后追加来修改这个元组？

```
myVar = "lol"
myTuple = ([1,2,3], [4,5,6], myVar)
myVar = "lolol"
print myTuple 
```

为什么这会打印出来`([1,2,3], [4,5,6], "lol")`而不是`([1,2,3], [4,5,6], "lolol")`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T03:36:54.177

好吧，让我尝试用一​​些图像来解释。

在 Python 中，一切都是对象。这些对象由变量*引用。*某些类型的对象，例如列表和元组，只是存储对其他对象的引用。

也就是说，当你执行

```
myVar = ["jhhj", "hgc"]
myTuple = ([1,2,3], [4,5,6], myVar) 
```

您或多或少会遇到这种情况：

![一个指向三个列表的元组； 指向两个字符串的列表](../Images/f165e40657d657ae40f46e78a230fe00.png)

每个对象都由一个框/矩形表示。我们有两个字符串对象，`"jhhj"`和`"hgc"`。此外，我们有一个由变量指向的列表对象`myVar`；此列表对象指向两个字符串对象。此外，我们有一个元组对象，由`myTuple`;引用。这个元组对象指向另外两个列表和引用的列表`myVar`。

当你执行

```
myVar.append('lololol') 
```

会发生什么？好吧，列表对象（由 偶然指向`myVar`）开始引用另一个值，即字符串对象`"lololol"`：

![一个指向三个列表的元组； 指向两个字符串的列表； 一个新的字符串被添加到列表中](../Images/68e139550fb9597a55b8de59109f5fb5.png)

请注意，`myVar`仍然引用列表对象。发生的事情是列表对象发生了*变化*。您可以从元组或从元组查看此列表对象`myVar`，您将看到具有相同更改的相同对象。

OTOH，当你执行

```
myVar = "lol"
myTuple = ([1,2,3], [4,5,6], myVar) 
```

你会得到这样的东西：

![一个指向两个列表和一个字符串的元组，也由一个变量指向](../Images/aac4d1d74cee0a0b4851eaef480d6293.png)

现在`myVar`指向字符串 object `"lol"`，并且元组在其第三个位置引用它。现在，如果你执行

```
myVar = "lolol" 
```

您只是`myVar`在指向另一个对象。元组对象仍然像以前一样指向`"lol"`：

![一个指向两个列表的元组和一个字符串，也由一个变量指向。 该变量现在引用另一个字符串。](../Images/1b2626898178386f23481c2ea11f1dd6.png)

所以，如果你给一个变量赋予一个新值，它只会改变这个变量所指向的值。变量引用的先前值将仍然存在*，并且指向它的任何其他变量或对象将保持指向它。只是属性变量会改变。

PS：另外，[我前段时间回答了一个模糊相关的问题](https://stackoverflow.com/questions/10748158/why-does-the-operator-not-change-a-list-while-append-does/10748191#10748191)。您可能会发现答案很有帮助。

* 除非它是由垃圾收集器收集的，但这是另一个漫长的历史。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T02:53:08.753

python中的所有东西都是对象。

所以当你做你最初的任务时

`myVar = "lol"`

您正在给 myVar 对象“lol”的引用

然后创建一个元组。第三个槽中的这个元组引用了“lol”

然后创建一个新对象“lolol”并给 myVar 一个引用。元组保留其对“lol”的原始引用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T02:55:13.947

元组是不可变的，但您可以将它们连接在一起，例如：

```
var a = (1, 2)
var b = a + (3, 4) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T03:38:22.693

在这两种情况下，当您创建元组时，您正在复制对`myvar`当时任何对象的引用。

在第一种情况下，`myvar`是一个可变对象。您可以在对对象的引用存储在元组中之后更改对象。

在第二种情况下，`myvar`是一个不可变的字符串。你不能改变对象，但你可以改变`myvar`它本身所指的东西。不过，这不会改变元组中包含的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T04:31:00.500

其他答案中有一些重要的观点，我将不再重复，解释*names*和*objects*之间的区别。我认为缺少的只是说明某些 Python 代码何时对名称进行操作以及何时对对象进行操作。

但是，您需要了解的关键是，*唯一*直接影响名称的是赋值语句[1]。赋值语句重新绑定名称以指向不同的对象。出现在*任何*其他上下文中的名称只是执行该代码行时名称绑定到的任何对象的简单表示。

让我们看看您的示例中的这一行：

```
myTuple = ([1,2,3], [4,5,6], myVar) 
```

`myTuple`出现在赋值语句的左侧，所以*名称* `myTuple`是在那里受到影响的。`myVar`另一方面，在表达式内部，因此绑定的*对象* `myVar`是元组的第三个元素，**而不是**名称`myVar`。

*因此，名称* 后面发生的任何事情`myVar`对元组都没有任何影响。但只要元组的第三个元素`myVar`引用同一个对象，更改该*对象*（通过其中一个`myVar`或元组）显然会影响您通过任一引用查看对象时获得的结果。

* * *

[1] 对于高级学习，`def`语句`class`也是“赋值语句”（它们创建一个函数或一个类，然后将其分配给名称）。

此外，像`+=`,`*=`等运算符*有时*是赋值语句，有时不是，具体取决于 LHS 上当前名称所指对象的类型：

```
myList = []
myList += ['this calls a method on a list object which mutates it in place; the name is not changed']

myInt = 1
myInt += 10  # This rebinds myInt to refer to a new object 11; the object 1 is not changed 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T02:52:23.357

元组是不可变的，所以如果你想修改它的一个成员，你需要构造一个新的元组......

# r - ggplot 绘制类别内观察值的比例

> ID：11026016
> 
> 赞同：13
> 
> 时间：2012-06-14T02:50:48.130
> 
> 标签：r, ggplot2

我正在寻找更好的方法来绘制不同类别​​的观察比例的建议。

我有一个看起来像这样的数据框：

```
cat1 <- c("high", "low", "high", "high", "high", "low", "low", "low", "high", "low", "low")
cat2 <- c("1-young", "3-old", "2-middle-aged", "3-old", "2-middle-aged", "2-middle-aged", "1-young", "1-young", "3-old", "3-old", "1-young")
df <- as.data.frame(cbind(cat1, cat2)) 
```

在此处的示例中，我想绘制具有“高”值的每个年龄组的比例，以及*具有*“低”值*的每个年龄组的比例。*更一般地说，我想为*类别 2 的每个值*绘制属于类别 1 的每个级别的观察百分比。

以下代码产生正确的结果，但只能在绘图前手动计数和除法。在 ggplot 中是否有一个好方法可以即时执行此操作？

```
library(plyr)
count1 <- count(df, vars=c("cat1", "cat2"))
count2 <- count(df, "cat2")

count1$totals <- count2$freq
count1$pct <- count1$freq / count1$totals

ggplot(data = count1, aes(x=cat2, y=pct))+
facet_wrap(~cat1)+
geom_bar() 
```

[这个先前的stackoverflow问题](https://stackoverflow.com/questions/3695497/ggplot-showing-instead-of-counts-in-charts-of-categorical-variables)提供了类似的东西，代码如下：

```
ggplot(mydataf, aes(x = foo)) + 
geom_bar(aes(y = (..count..)/sum(..count..))) 
```

但我不希望在分母中出现“sum(..count..)”——它给出了*所有*箱子的计数的总和；相反，我想要每个“cat2”类别的计数总和。我还研究了[stat_bin](http://had.co.nz/ggplot2/stat_bin.html)文档。

对于如何完成这项工作的任何提示和建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-14T03:49:51.537

如果这不是您真正想要的，我会理解，但是我发现您对您想要的内容的描述非常混乱，直到我意识到您只是试图以一种对我来说似乎非常不自然的方式来可视化您的数据。

如果有人要求我制作每个类别中的比例图表，我可能会转向分段条形图：

```
ggplot(df,aes(x = cat2,fill = cat1)) + 
    geom_bar(position = "fill") 
```

![在此处输入图像描述](../Images/27bc5b81e304a9a0517d98c6be4d3ac5.png)

请注意，y 轴根据需要记录比例，而不是计数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-27T09:17:58.167

这对你来说可能有点晚了，它不涉及 ggplot，但是：

我认为马赛克图是可视化两个因素相互作用的前进方向：

```
cat1 <- c("high", "low", "high", "high", "high", "low", "low", "low", "high", "low", "low")
cat2 <- c("1-young", "3-old", "2-middle-aged", "3-old", "2-middle-aged", "2-middle-aged", "1-young", "1-young", "3-old", "3-old", "1-young")
df <- as.data.frame(cbind(cat1, cat2))

mosaicplot(cat2 ~ cat1, data = df, col = c(lightskyblue2', 'tomato')) 
```

[![具有两个因素的数据马赛克图](../Images/40d73c44f8dab6d68747cdb44abb949a.png)](https://i.stack.imgur.com/sQRvB.png)

在此图中，每个值对的框根据该类别中的观察数进行缩放。您可以提供颜色矢量以帮助进行可视化。

# powershell - Powershell 根据用户主要组将计算机移动到 OU

> ID：11026018
> 
> 赞同：1
> 
> 时间：2012-06-14T02:51:12.127
> 
> 标签：powershell, active-directory

我是 powershell 的新手并自学，但我想弄清楚是否可以使用 powershell 检查用户主要组，然后将他们登录的计算机移动到某个 OU。

我正在寻找一个 txt 文件来显示根据主要组将其移动到的位置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:39:31.180

我建议从 Quest免费下载并安装[它](http://www.quest.com/powershell/activeroles-server.aspx)`PSSnap-in`以检查用户`PrimaryGroup`并将计算机/用户移入`ActiveDirectory`.

要检索用户实际登录的计算机，您可以使用：

[PsLoggedOn](http://technet.microsoft.com/en-us/sysinternals/bb897545.aspx)

要读取 txt 文件的内容并将其分配给 powershell 中的变量，请使用：

```
$a = get-content c:\OuList.txt 
```

# windows - 在 Windows 上使用 ssh 进行 Git 连接

> ID：11026020
> 
> 赞同：4
> 
> 时间：2012-06-14T02:51:31.390
> 
> 标签：windows, git, github

我已经阅读了一些问题，但仍然没有找到解决这个问题的方法

我在 Windows 上有 git，我想使用 ssh 连接到 github。按照本教程[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys) 我已经成功设置了我的密钥

如果我打开一个 git-bash 并尝试 ssh github 我可以连接，所以这行得通

```
ssh -T git@github.com
Hi username! You've successfully authenticated, but GitHub does not
provide shell access. 
```

这意味着 git-bash 实际上看到了我的密钥。但是，如果我尝试推动

```
git push origin master 
```

git提示我输入用户名和密码
谢谢你的帮助

编辑：通过使用 git 协议而不是 http 协议解决，我的错
所以替换这个

```
https://github.com/_user_/_repository_.git 
```

用这个

```
git@github.com:_user_/_repository_.git 
```

在远程链接中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T04:14:51.530

无需删除/添加，只需执行以下操作：

```
git remote set-url origin git@github.com:username/repo.git 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T04:07:18.457

You probably cloned a remote that uses the https protocol, rather than the git protocol. You need to redefine your remote for *origin*.

```
# Change this as needed.
github_username="$LOGNAME"

# Replace your remote, then push.
git remote rm origin
git remote add origin "git@github.com:${github_username}/${PWD##*/}.git"
git push --tags --set-upstream origin master 
```

# solr - 如何修复 SolrException：加载类“dataimport.DataImportHandler”时出错？

> ID：11026021
> 
> 赞同：2
> 
> 时间：2012-06-14T02:51:32.223
> 
> 标签：solr, full-text-search

我只是按照这个[DIHQuickStart](http://wiki.apache.org/solr/DIHQuickStart)，尝试从 mysql 导入数据到 solr。

将请求处理程序添加到 solrconfig.xml

```
....

<!-- A request handler for demonstrating the elevator component -->
  <requestHandler name="/elevate" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="df">text</str>
    </lst>
    <arr name="last-components">
      <str>elevator</str>
    </arr>
  </requestHandler>

  <!-- Add by me-->
  <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
      <str name="config">data-config.xml</str>
    </lst>
  </requestHandler> 
```

我的数据-config.xml

```
<dataConfig>
  <dataSource type="JdbcDataSource" 
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://localhost:3306/mydb" 
              user="root" 
              password="Pwd2011"/>
  <document>
    <entity name="subject" 
            query="select id,name,description from subject">
    </entity>
  </document>
</dataConfig> 
```

将 drop mysql-connector-java-5.1.17.jar 添加到 lib 文件夹中。

现在我启动 tomcat（这是我的 solr servlet 容器）。访问 localhost:8180/solr，现在出现错误：

```
HTTP Status 500 - Severe errors in solr configuration. Check your log files for more detailed information on what may be wrong. If you want solr to continue after configuration errors, change: <abortOnConfigurationError>false</abortOnConfigurationError> in solr.xml ------------------------------------------------------------- org.apache.solr.common.SolrException: Error loading class 'org.apache.solr.handler.dataimport.DataImportHandler' at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:394) at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:419) at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:455) at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:159) at org.apache.solr.core.SolrCore.<init>(SolrCore.java:563) at org.apache.solr.core.CoreContainer.create(CoreContainer.java:483) at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335) at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219) at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161) at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96) at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258) at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103) at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4624) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5281) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:866) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:842) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649) at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1581) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) at java.util.concurrent.FutureTask.run(FutureTask.java:166) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) Caused by: java.lang.ClassNotFoundException: org.apache.solr.handler.dataimport.DataImportHandler at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:789) at java.lang.ClassLoader.loadClass(ClassLoader.java:356) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:378) ... 27 more 
```

我检查了solr和tomcat的所有文件夹，没有更多的日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:54:47.763

检查您的类路径，看起来 DataImportHandler 不在您的类路径中

# ruby-on-rails - 查找在上午 9 点到下午 4 点之间创建的所有数据 Rails 3.2.1 和 postgreSQL

> ID：11026025
> 
> 赞同：0
> 
> 时间：2012-06-14T02:52:16.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, time

我需要显示在上午 9 点到下午 5 点之间插入的所有数据，忽略日期。

我努力了

```
.where(created_at: Time.parse("9am")..Time.parse("5pm")) 
```

**因为 Time.parse 产生当前数据和时间。所以这个只显示今天上午 9 点到下午 5 点之间的结果。但是我需要在上午 9 点到下午 5 点之间输入的所有数据**

* * *

我试图解决使用数据库中的时间数据字段。数据库存储正确，但是当我们通过 rails 查询时，及时追加了 01-01-2000 年。

虽然这是一个非常简单的问题，但我被卡住了。

## 请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:32:58.377

PostgreSQL 定义了一个`EXTRACT`这里描述的函数：[http ://www.postgresql.org/docs/current/interactive/functions-datetime.html](http://www.postgresql.org/docs/current/interactive/functions-datetime.html)

您可能可以使用以下内容进行查询：

```
SELECT * FROM (modelname) WHERE EXTRACT(HOUR FROM created_at) > (minhour) AND EXTRACT(HOUR FROM created_at) < (maxhour); 
```

# visual-studio - Visual Studio - 设置项目输出路径与在构建后事件中使用 xcopy

> ID：11026029
> 
> 赞同：0
> 
> 时间：2012-06-14T02:52:50.140
> 
> 标签：visual-studio, projects-and-solutions

我认为这是一个相当简单的问题，但我真的找不到答案，所以我会问它以防其他人可能需要它。

有些开发人员为了将所有项目复制到 bin 文件夹，使用项目输出路径属性设置 bin 文件夹路径，有些开发人员在构建后事件中使用 xcopy 命令。

其主要原因是什么？

问候 ，

詹姆斯·罗伊特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:07:49.900

我认为设置项目输出路径是一个更好的选择。原因是在这种情况下，Visual Studio 处于控制之中：它负责清理、替换旧文件、决定要复制哪些文件……使用 xcopy 时，Visual Studio 只是盲目地调用一个批处理文件。它将运行批处理上的所有命令，这将导致文件被复制，无论它们是否被编译。另外，如果项目的编译顺序发生变化，或者添加或删除了新项目，则需要更新相应的构建后操作，从而导致额外的步骤。

# php - 4.2.1 中不推荐使用 defineAuditFields() 吗？

> ID：11026031
> 
> 赞同：0
> 
> 时间：2012-06-14T02:52:55.023
> 
> 标签：php, frameworks, atk4

如果我在我的模型中使用defineAuditFields，我会得到错误 ->exception("Method is not defined for this object", "Logic")

4.2.1 中不推荐使用 defineAuditFields() 吗？

有新方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:23:41.247

defineAuditFields 是旧 MVC 模型的产物。新的敏捷工具包允许您使用控制器来做同样的事情。Janis 在他的迁移指南中概述了这一点：http: [//www.ambienttech.lv/blog/](http://www.ambienttech.lv/blog/)说您现在可以使用控制器。

```
class Controller_Audit extends AbstractController {
    function init(){
        parent::init();
        $this->owner->hasOne('User','created_by')->system(true);
        $this->owner->hasOne('created_dts')->type('datetime')->system(true);
        $this->owner->hasOne('modified_dts')->type('datetime')->system(true);

        $this->owner->addHook('beforeInsert,beforeModify',$this);
    }

    function beforeInsert($m){
        $m['created_by']=$this->api->auth->model->id;
        $m['created_dts']=date('Y-m-d H:i:s');
    }

    function beforeModify($m){
        $m['modified_dts']=date('Y-m-d H:i:s');
    }
} 
```

当然你可以在这里做更多的动作。如果您需要软删除，那么这样的事情会很好用：

```
class Controller_SoftDelete extends AbstractController {
    function init(){
        parent::init();
        $this->owner->hasOne('deleted')
            ->type('boolean')->enum(array('Y','N'))
            ->system(true);

        $this->owner->addCondition('deleted',false);

        $this->owner->addHook('beforeDelete',$this);
    }

    function beforeDelete($m,$q){
        $q->set('deleted','Y')->update();

        $q->where('1=2'); // avoid actual deletion
    }
} 
```

ps 如果我这里的代码包含一些小错误，请[编辑]它们。

# c# - C#正则表达式在调试字符串中查找所有字符串期望

> ID：11026033
> 
> 赞同：0
> 
> 时间：2012-06-14T02:53:04.050
> 
> 标签：c#, regex, regex-negation

首先，我只能使用 C# 正则表达式，因此建议其他语言或非正则表达式解决方案将无济于事。现在提问。

我必须找到代码中的所有字符串（几千个文件）。基本上有6种情况：

```
 string a = "something"; // output" "something"
   sring b = "something else" + " more"; // output: "something else" and " more"
   Print("this should match"); // output: "this should match"
   Print("So" + "should this"); // output: "So" and "should this"
   Debug("just some bebug text"); // output: this should not match
   Debug("more " + "debug text"); // output: this should not match 
```

正则表达式应该匹配前 4 个（我只需要引号内的内容，打印也可以是任何其他函数）

到目前为止，我有这个，它返回引号中的任何内容：

```
 ".*?" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:37:42.397

**简而言之：** `@"^(?!Debug\("")([^""]*""(?<Text>[^""]*)"")*.*$"`

**它能做什么：**

*   不匹配以开头的字符串`Debug("`
*   沿着绳子跑，直到遇到第一个`"`，然后越过它
    *   如果`"`没有找到 a 并且它到达了字符串的末尾，它将停止。
*   开始“录制”到一个名为`Text`
*   沿着字符串运行，直到遇到下一个`"`，停止录制，然后越过它。
*   返回步骤 2

**结果：**`"`您在一个名为 的组中拥有 ' 之间的所有字符串`Text`。

**剩下要做的事情：**将其转换为多行正则表达式并在 Debug 之前支持 whitepsaces ( `\s`) 作为更好的过滤器。

**进一步的使用示例和测试：**

```
var regex = new Regex(@"^(?!Debug\("")([^""]*""(?<Text>[^""]*)"")*.*$");

var inputs = new[]
                 {
                     @"string a = ""something"";",
                     @"sring b = ""something else"" + "" more"";",
                     @"Print(""this should match"");",
                     @"Print(""So"" + ""should this"");",
                     @"Debug(""just some bebug text"");",
                     @"Debug(""more "" + ""debug text"");"
                 };

foreach (var input in inputs)
{
    Console.WriteLine(input);
    Console.WriteLine("=====");

    var match = regex.Match(input);

    var captures = match.Groups["Text"].Captures;

    for (var i = 0; i < captures.Count; i++)
    {
        Console.WriteLine(captures[i].Value);
    }

    Console.WriteLine("=====");
    Console.WriteLine();
} 
```

**输出：**

```
string a = "something";
=====
something
=====

sring b = "something else" + " more";
=====
something else
 more
=====

Print("this should match");
=====
this should match
=====

Print("So" + "should this");
=====
So
should this
=====

Debug("just some bebug text");
=====
=====

Debug("more " + "debug text");
=====
===== 
```

# php - PHP 数组搜索和添加？

> ID：11026034
> 
> 赞同：0
> 
> 时间：2012-06-14T02:53:08.083
> 
> 标签：php, arrays, multidimensional-array

我有一个由 PHP 生成的数组

```
array(
  array(
  'name'=>'node1',
  'id' => '4'
   ),
  array(
  'name'=>'node2'
  'id'=>'7'
  )
) 
```

我正在尝试将一个数组添加到一个特定的 id （所以我们说 id 4）

```
'children'=>
        array(
          array('name'=>'node2','id'=>'5'),
          array('name'=>'node3','id'=>'6')
        ) 
```

那么它看起来像

```
array(
  array(
  'name'=>'node1',
  'id' => '4'
  'children'=>
        array(
          array('name'=>'node2','id'=>'5'),
          array('name'=>'node3','id'=>'6')
        )
   ),
  array(
  'name'=>'node2'
  'id'=>'7'
  )
) 
```

但我似乎无法找到搜索多维数组并将多维数组添加到该数组的方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:55:32.370

使用`foreach`循环遍历数组（确保也获得键），检查值，如果需要添加并在找到时中断。

```
foreach($array as $k=>$v) {
    if( $v['id'] == 4) {
        $array[$k]['children'] = array(...);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:51:37.870

这是一个怪物，但它会做你想做的事。在递归函数中使用 push 失败，因为引用在第二次函数调用后被破坏，所以如果你不知道关键有多深，可以选择使用任意数量的循环和希望最好的循环，导入变量和使用eval 推送新值，或拉开并重建数组。我选择了评估。您想要的内容的描述与推送值略有不同，因为您正在寻找数组中的键值对，而不是数组。此函数查找键值对并将您想要的任何内容添加为同级，如果未指定值，则将值作为同级添加到匹配的第一个键。如果未指定 pushval，它将返回指向匹配键/键值的键链。

`$ref_array`是要修改的多数组， `$key`是您要查找的键， `$val`是您要查找的 `$newkey`键的值，是将引用新值的新键， `$pushval`是要索引的新值`$newkey`。

**不要**为参数传递`$val_array`参数。它仅用于递归调用。这是函数如何区分新调用和递归调用的方式，也是函数如何在不中断传递引用的情况下找到键值的方式。

```
function deepPush(&$ref_array, $key, $val=null, $newkey=null, $pushval=null, $val_array=null)
{
    static $r, $keys;

    #reset static vars on first call
    if(!$val_array){ $r = 0; $keys = array();}
    #cap recursion
    if($r > 100){ trigger_error('Stack exceeded 100'); return;}
    #init val_array
    $val_array = ($r) ? $val_array : $ref_array;
    #specified search value???
    $search_val = ($val!==null && !in_array($val, $val_array)) ? true : false;
    if(!array_key_exists($key, $val_array) || $search_val) {
    $i=0;foreach($val_array as $k=>$v){
            if(gettype($v) == 'array') {
                if($i>0){/*dead-end*/array_pop($keys); /*keep recusion accurate*/$r-=$i;}
                $keys[] = $k;/*build keychain*/
                $r++; $i++; /*increment recursion, iteration*/
                if(deepPush($ref_array, $key, $val, $newkey, $pushval, $v)){ /*close stack on 1st success*/return $keys;}
            }//if
        }//foreach
    }//if
    else{
        if($pushval === null){return $keys;}
        #add $newkey to the keychain
        $keys[] = $newkey;
        #process $pushval based on type
        $pushval = (gettype($pushval) == 'string') ? sprintf("'%s'", $pushval) : var_export($pushval, true);

        #link keys together to form pointer
        $p = '$ref_array';
        for($j=0,$c=count($keys); $j<$c; $j++) {
            $k = $keys[$j];
            $p .= "['$k']";
        }//for

        #concat the value to be pushed
        $p .= sprintf("= %s;",$pushval);
        #push it
        eval($p);

        $keys = array();
        return true;

    }//else

}

deepPush($array, 'id', 4, 'children', $addThis); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:16:20.857

```
foreach($a as $k => $v)
{
  if(is_array($v))
  {
   foreach($v as $ke => $va)
   {
    if($ke == 'children')
    {
     ......
    }
   }
 }
} 
```

# ruby-on-rails - 我应该将我的 facebook_ids 存储为整数还是字符串在 mongo 中？

> ID：11026036
> 
> 赞同：1
> 
> 时间：2012-06-14T02:53:09.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我有以下（使用mongoid）：

```
class FacebookUser
  include Mongoid::Document
  include Mongoid::Timestamps    
  field :uid,   type: String
  field :friends,   type: Array
end 
```

我正在使用 mongoid，想知道是否将 facebook_ids 和 facebook_ids_of_friends(Array) 存储为 BigDecimal、Integer 或 String。我将使用 uid 进行查询，所以有点担心速度。

或者：

```
class FacebookUser
  include Mongoid::Document
  include Mongoid::Timestamps    
  field :uid,   type: Integer
  field :friends,   type: Array  #???How do I get this to store ints instead of strings
end 
```

为了避免重复投射，我认为第一个选项更好但想获得另一个意见？此外，如果我使用选项 2，我将如何使用整数存储数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T09:00:34.687

Use a string. The only reason to use numeric types is if you will be doing calculations on the data. It is nonsensical to try to add two user id's so they should not be stored as integers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:41:25.787

试试这个

```
class FacebookUser

    identity :type => String

end 
```

由于行，`identity :type => String`您的模型 id 将变为 String 类型，您可以直接在其中保存 facebook 用户 id(uid) 而不是创建新字段。查找用户之类的查询将非常简单快捷

例如

找一个用户

```
FacebookUser.find(facebook user id) 
```

# clojure - Datomic 教程的“重温过去”部分的问题

> ID：11026038
> 
> 赞同：1
> 
> 时间：2012-06-14T02:53:22.227
> 
> 标签：clojure, datomic

我在“重温过去”部分的 datomic 教程遇到问题[http://datomic.com/company/resources/tutorial.html](http://datomic.com/company/resources/tutorial.html)

对于以下两个查询：

```
query = "[:find ?c :where [?c :community/name]]";
db_asOf_schema = conn.db().asOf(schema_tx_date);
System.out.println(Peer.q(query, db_asOf_schema).size()); // 0

db_since_data = conn.db().since(data_tx_date);
System.out.println(Peer.q(query, db_since_data).size()); // 0 
```

我已经在 clojure 中尝试过这些命令，但无法让它们按照教程中的描述工作：

```
(since (db conn) (java.util.Date.) ) 
;; It should return 0 but returns the whole database instead

(def ts (q '[:find ?when :where [?tx :db/txInstant ?when]] (db conn)))

(count (since (db conn) (ffirst (reverse (sort ts))))))
;; returns 13, but should return 0

(count (as-of (db conn) (ffirst (sort ts)))))
;; returns 13, but should return 0 
```

我不太确定这是正确的行为，我做错了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T18:05:33.833

如果您正在阅读 Clojure 中的西雅图教程，那么可能最重要的一件事就是知道工作的 Clojure 代码包含在 Datomic 发行版中。文件名是`samples/seattle/getting-started.clj`，您可以在 REPL 中简单地跟随。

在您的问题中对 Clojure 代码的两个观察：

该`since`函数被记录为返回一个数据库值，而不是一个数字，因此您看到的行为与预期的一样。为了查看数据库中的内容，您需要发出查询。

数据库没有任何 Clojure`count`函数的书面语义，因此您不应调用`count`它们。同样，如果您想查看数据库中的内容，则需要发出查询，例如

```
;; Find all transaction times, sort them in reverse order
(def tx-instants (reverse (sort (q '[:find ?when :where [_ :db/txInstant ?when]]
                                       (db conn)))))

;; pull out two most recent transactions, most recent loaded
;; seed data, second most recent loaded schema
(def data-tx-date (ffirst tx-instants))
(def schema-tx-date (first (second tx-instants)))

;; make query to find all communities
(def communities-query '[:find ?c :where [?c :community/name]])

;; find all communities as of schema transaction
(let [db-asof-schema (-> conn db (d/as-of schema-tx-date))]
  (println (count (seq (q communities-query db-asof-schema)))))

;; find all communities as of seed data transaction
(let [db-asof-data (-> conn db (d/as-of data-tx-date))]
  (println (count (seq (q communities-query db-asof-data)))))

;; find all communities since seed data transaction
(let [db-since-data (-> conn db (d/since data-tx-date))]
  (println (count (seq (q communities-query db-since-data))))) 
```

希望这可以帮助。如果您有更多问题，还有一个[Datomic google 小组。](http://groups.google.com/group/datomic)

# database - 在集群环境中读取数据库表的最快方法

> ID：11026039
> 
> 赞同：1
> 
> 时间：2012-06-14T02:53:30.923
> 
> 标签：database, multithreading, performance, jboss, cluster-computing

在集群环境中从非常大的数据库表中读取的最佳方法是什么。

假设我们需要尽可能快地读取巨大的数据库表，然后将这些数据发送到 jms 队列。我们希望避免读取相同的数据，因为它需要处理，所以最好不要交叉。而且这个应用程序要部署在 jboss 集群中，所以节点应该如何通信。

所以在一个节点的情况下——非集群环境我只能让一个进程读取表。在两个节点的情况下 - 这种读取应该是如何协调以避免两个节点读取相同的数据......三个节点等......

不知道目标环境中有多少节点，节点可以使用 db 表或 jboss 缓存进行通信

因此很明显，每个进程读取块或页面将提供最大性能。

在简单的 java 多线程环境中这将是一件容易的事，因为我们知道有多少线程将被读取，并且很容易计算如何划分页面并将页面读取分配给单个线程。

但是在不知道有多少节点的情况下，节点之间应该有一些协议来通信和优化读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:43:00.737

由于您必须保持庞大的数据库数据分布，我建议您查看某种分布式哈希表。我在一个具有相同要求的企业项目中使用了[GemFire ，它已经得到了充分证明。](http://www.vmware.com/products/application-platform/vfabric-gemfire/overview.html)但是你总是有最大数据库连接的限制，所以你不能无限增长。

# emacs - 调整文本：Lisp 嵌套超过 `max-lisp-eval-depth

> ID：11026040
> 
> 赞同：1
> 
> 时间：2012-06-14T02:54:41.343
> 
> 标签：emacs, lisp, elisp, land-of-lisp

该程序应重新格式化字符串，如下所示。

示例：（game-print '（这是一个句子。关于这个？可能。））

这是一个句子。那个呢？大概。

但是出了点问题（Lisp 嵌套超过了 `max-lisp-eval-depth），我不知道为什么。这段代码其实是出自《Land of lisp》一书97页。原始代码是用common lisp写的。我想用elisp重写它。调整文本中的最后两个参数表示船长和文字。

```
(defun tweak-text (lst caps lit)
  (when lst
    (let ((item (car lst))
          (rest (cdr lst)))
      (cond ((eql item ?\ ) (cons item (tweak-text rest caps lit)))
            ((member item '(?\! ?\? ?\.)) (cons item (tweak-text rest t lit)))
            ((eql item ?\") (tweak-text rest caps (not lit)))
            (lit (cons item (tweak-text rest nil lit)))
            (caps (cons (upcase item) (tweak-text rest nil lit)))
            (t (cons (downcase item) (tweak-text rest nil nil)))))))

(defun game-print (lst)
  (print (coerce (tweak-text (coerce (prin1-to-string lst) 'list) t nil) 'string)))

(game-print '(not only does this sentence have a "comma," it also mentions the "iPad.")) 
```

用 common lisp 编写的原始代码。

```
(defun tweak-text (lst caps lit)
  (when lst
    (let ((item (car lst))
          (rest (cdr lst)))
      (cond ((eql item #\space) (cons item (tweak-text rest caps lit)))
            ((member item '(#\! #\? #\.)) (cons item (tweak-text rest t lit)))
            ((eql item #\") (tweak-text rest caps (not lit)))
            (lit (cons item (tweak-text rest nil lit)))
            (caps (cons (char-upcase item) (tweak-text rest nil lit)))
            (t (cons (char-downcase item) (tweak-text rest nil nil)))))))

(defun game-print (lst)
    (princ (coerce (tweak-text (coerce (string-trim "() " (prin1-to-string lst)) 'list) t nil) 'string))
    (fresh-line)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:07:09.060

在这两种情况下，您都有非终端递归，因此您使用的是 O(length(lst)) 堆栈空间。显然，系统可能会限制您可以使用的堆栈空间，而您确实在 emacs 中达到了这个限制。（现在在 emacs 中，您可以通过更改 max-lisp-eval-depth 来增加限制，但这不会解决根本问题）。

解决方案是使用迭代而不是递归。

但首先，在 emacs 中编写：

```
(defun character (x)
  "common-lisp: return the character designated by X."
  (etypecase x
    (integer x)
    (string (aref x 0))
    (symbol (aref (symbol-name x) 0))))

(defun string-trim (character-bag string-designator)
  "common-lisp: returns a substring of string, with all characters in \
character-bag stripped off the beginning and end."
  (unless (sequencep character-bag)
    (signal 'type-error  "expected a sequence for `character-bag'."))
  (let* ((string (string* string-designator))
         (margin (format "[%s]*" (regexp-quote
                                  (if (stringp character-bag)
                                      character-bag
                                      (map 'string 'identity character-bag)))))
         (trimer (format "\\`%s\\(\\(.\\|\n\\)*?\\)%s\\'" margin margin)))
    (replace-regexp-in-string  trimer "\\1" string)))

(require 'cl) 
```

这样您就可以为 CL 和 elisp 编写一个函数：

```
(defun tweak-text (list caps lit)
  (let ((result '()))
    (dolist (item list (nreverse result))
      (cond ((find item " !?.")          (push item result))
            ((eql item (character "\"")) (setf lit (not lit)))
            (lit                         (push item result)
                                         (setf caps nil))
            (caps                        (push (char-upcase item) result)
                                         (setf caps nil))
            (t                           (push (char-downcase item) result)
                                         (setf caps nil
                                               lit nil))))))

(defun game-print (list)
  (princ (coerce (tweak-text (coerce (string-trim "() " (prin1-to-string list)) 'list)
                             t nil)
                 'string))
  (terpri)) 
```

然后：

```
(game-print '(not only does this sentence have a "comma," it also mentions the "iPad.")) 
```

在 emacs 中：

```
prints:   Not only does this sentence have a comma, it also mentions the iPad.
returns:  t 
```

在 Common Lisp 中：

```
prints:   Not only does this sentence have a comma, it also mentions the iPad.
returns:  nil 
```

现在，通常使用列表来处理字符串没有什么意义，emacs lisp 和 Common Lisp 都有强大的原语来直接处理序列和字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T04:27:10.423

请注意，elisp（遗憾的是）没有针对尾递归进行优化，因此事实证明这是编写此函数的一种非常低效的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T03:30:54.243

在调整文本中递归时，您确实达到了“max-lisp-eval-depth”限制。我看不出代码的方式有什么问题（我没有检查它是否在做你想做的事情）。

您可以配置/提高“max-lisp-eval-depth”限制。该变量的文档指出，只要您确信自己不会遇到堆栈空间不足的情况，就可以提高它。我的机器上的限制保守地设置为 541。将其提高到 600 使上面的函数定义可以处理您作为示例提供的输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T08:37:52.003

正如 Pascal Bourguignon 已经提到的那样，使用不强制它们到列表并返回的字符串是一种更好的方法，下面是我的看法。请注意，在验证文字字符串是否有标点符号方面略有不同，如果它们看起来有标点符号，否则会导致下一个字母大写，那么它也会大写。我不确定这是一个缺点，这就是我没有处理这种差异的原因。

```
(defun tweak-text (source)
  (let ((i 0) (separator "") (cap t) current)
    (with-output-to-string
      (dolist (i source)
        (setq current
              (concat separator 
                      (etypecase i
                        (string i)
                        (symbol (downcase (symbol-name i)))))
              separator " ")
        (let (current-char)
          (dotimes (j (length current))
            (setq current-char (aref current j))
            (cond
             ((position current-char " \t\n\r"))
             (cap (setq cap nil
                        current-char (upcase current-char)))
             ((position current-char ".?!")
              (setq cap t)))
            (princ (char-to-string current-char))))))))

(tweak-text '(not only does this sentence have a "comma," it also mentions the "iPad."))
"Not only does this sentence have a comma, it also mentions the iPad." 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T04:34:42.367

我认为你应该写这样的东西：

```
(defun tweak-text-wrapper (&rest args)
  (let ((max-lisp-eval-depth 9001)) ; as much as you want
    (apply tweak-text args))) 
```

# objective-c - 如何在 iOS 上使用 ARC 实现自定义复制属性

> ID：11026055
> 
> 赞同：2
> 
> 时间：2012-06-14T02:56:06.373
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在尝试在 iOS 上实现具有自动引用计数的自定义属性。

我的`.h`文件：

```
@interface AObject : NSObject
@property(nonatomic,copy) NSString* str;
@end 
```

我的`.m`文件：

```
@implementation AObject

@synthesize str = _str;

-(void)setStr:(NSString *)str {
    if (![_str isEqualToString:str]) {
       // Which one is right?
        _str = [str copy];   //(1)
        _str = str;          //(2)
    }
}

@end 
```

我应该使用 (1) 和 (2) 两条线中的哪一条？我对两者都进行了测试，两者似乎都有效。有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:41:03.240

ARC 只会自动进行保留，而不是复制。如果您希望它被复制，那么 (1) 是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:46:41.180

`_str = [str copy];`是正确的。`copy`代替`retain`（ARC 隐含为您保留对象）的原因是因为`NSMutableString`是`NSString`. 这意味着它`str`可能是一个`NSMutableString`并且以后可能会改变它的值，这可能不是你想要的。使用没有性能影响，`copy`因为如果`str`是非可变的`NSString`，则`copy`不会创建另一个副本，它只会增加保留计数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T10:45:47.917

本尼迪克特在对您的问题的具体回答中所说的是正确的（+1），但您还有另一个小“问题”。

```
if (![_str isEqualToString:str]) 
```

是矫枉过正。你也可以这样做

```
if (_str != str) 
```

这是一个更快的比较，如果`str`是一个比较等于的可变字符串，只会导致显着的惩罚`_str`。

# javascript - 使用 JQuery 获取触发事件的元素的类

> ID：11026056
> 
> 赞同：87
> 
> 时间：2012-06-14T02:56:14.447
> 
> 标签：javascript, jquery, jquery-events

当点击事件被触发时，无论如何都可以获得类。我的代码如下，它只适用于 id 而不是类。

```
$(document).ready(function() {
  $("a").click(function(event) {
    alert(event.target.id + " and " + event.target.class);
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<html>

<body>
  <a href="#" id="kana1" class="konbo">click me 1</a>
  <a href="#" id="kana2" class="kinta">click me 2</a>
</body>

</html>
```

jsfiddle代码[在这里](http://jsfiddle.net/fv3Ca/1/)

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-06-14T02:59:19.937

尝试：

```
$(document).ready(function() {
    $("a").click(function(event) {
       alert(event.target.id+" and "+$(event.target).attr('class'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2012-06-14T02:59:29.547

这将包含完整的类（如果元素有多个类，则可能是多个空格分隔的类）。在您的代码中，它将包含“konbo”或“kinta”：

```
event.target.className 
```

您可以使用 jQuery 按名称检查类：

```
$(event.target).hasClass('konbo'); 
```

并使用[addClass](http://api.jquery.com/addClass/)和[removeClass](http://api.jquery.com/removeClass/)添加或删除它们。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-10-10T11:59:08.720

您将获得以下数组中的所有课程

```
event.target.classList 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T03:07:24.177

```
$(document).ready(function() {
  $("a").click(function(event) {
    var myClass = $(this).attr("class");
    var myId = $(this).attr('id');
    alert(myClass + " " + myId);
  });
})
```

```
<html>

<head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
</head>

<body>
  <a href="#" id="kana1" class="konbo">click me 1</a>
  <a href="#" id="kana2" class="kinta">click me 2</a>
</body>

</html>
```

这对我有用。jQuery 中没有 event.target.class 函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T03:00:49.763

如果您使用的是 jQuery 1.7：

```
alert($(this).prop("class")); 
```

或者：

```
alert($(event.target).prop("class")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-23T19:43:03.230

小心`target`可能不适用于所有浏览器，它适用于 Chrome，但我认为 Firefox（或 IE/Edge，不记得了）有点不同并使用 srcElement。我通常会做类似的事情

```
var t = ev.srcElement || ev.target; 
```

从而导致

```
$(document).ready(function() {
    $("a").click(function(ev) {
        // get target depending on what API's in use
        var t = ev.srcElement || ev.target;

        alert(t.id+" and "+$(t).attr('class'));
    });
}); 
```

谢谢你的好答案！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-26T10:08:23.013

对 Vishesh 答案的改进，它返回一个布尔值：

```
event.target.classList.contains(className) 
```

# django - 查询 Django-crispy-forms 的 form.helper

> ID：11026059
> 
> 赞同：0
> 
> 时间：2012-06-14T02:56:59.150
> 
> 标签：django, django-forms, twitter-bootstrap

我正在使用 Django Crispy Forms 和 Twitter-bootstrap 并关注此页面：[http](http://django-crispy-forms.readthedocs.org/en/d-0/tags.html#bootstrap-layout-objects) ://django-crispy-forms.readthedocs.org/en/d-0/tags.html#bootstrap-layout-objects 标签`{% crispy example_form example_form.helper %}`给了我一些错误。

就我而言：它是`{% crispy gameserver gameserver.helper %}`.

它给了我这个奇怪的错误：

```
Failed lookup for key [gameserver] in u"[{}, {'csrf_token': <django.utils.functional.__proxy__ object at 0x10e417210>}, {'perms': <django.contrib.auth.context_processors.PermWrapper object at 0x10e417290>, 'user': <django.utils.functional.SimpleLazyObject object at 0x10e40ad10>}, {}, {'LANGUAGES': (('ar', 'Arabic'), ('az', 'Azerbaijani'), ('bg', 'Bulgarian'), ('bn', 'Bengali'), ('bs', 'Bosnian'), ('ca', 'Catalan'), ('cs', 'Czech'), ('cy', 'Welsh'), ('da', 'Danish'), ('de', 'German'), ('el', 'Greek'), ('en', 'English'), ('en-gb', 'British English'), ('eo', 'Esperanto'), ('es', 'Spanish'), ('es-ar', 'Argentinian Spanish'), ('es-mx', 'Mexican Spanish'), ('es-ni', 'Nicaraguan Spanish'), ('et', 'Estonian'), ('eu', 'Basque'), ('fa', 'Persian'), ('fi', 'Finnish'), ('fr', 'French'), ('fy-nl', 'Frisian'), ('ga', 'Irish'), ('gl', 'Galician'), ('he', 'Hebrew'), ('hi', 'Hindi'), ('hr', 'Croatian'), ('hu', 'Hungarian'), ('id', 'Indonesian'), ('is', 'Icelandic'), ('it', 'Italian'), ('ja', 'Japanese'), ('ka', 'Georgian'), ('kk', 'Kazakh'), ('km', 'Khmer'), ('kn', 'Kannada'), ('ko', 'Korean'), ('lt', 'Lithuanian'), ('lv', 'Latvian'), ('mk', 'Macedonian'), ('ml', 'Malayalam'), ('mn', 'Mongolian'), ('nb', 'Norwegian Bokmal'), ('ne', 'Nepali'), ('nl', 'Dutch'), ('nn', 'Norwegian Nynorsk'), ('pa', 'Punjabi'), ('pl', 'Polish'), ('pt', 'Portuguese'), ('pt-br', 'Brazilian Portuguese'), ('ro', 'Romanian'), ('ru', 'Russian'), ('sk', 'Slovak'), ('sl', 'Slovenian'), ('sq', 'Albanian'), ('sr', 'Serbian'), ('sr-latn', 'Serbian Latin'), ('sv', 'Swedish'), ('sw', 'Swahili'), ('ta', 'Tamil'), ('te', 'Telugu'), ('th', 'Thai'), ('tr', 'Turkish'), ('tt', 'Tatar'), ('uk', 'Ukrainian'), ('ur', 'Urdu'), ('vi', 'Vietnamese'), ('zh-cn', 'Simplified Chinese'), ('zh-tw', 'Traditional Chinese')), 'LANGUAGE_BIDI': False, 'LANGUAGE_CODE': 'en-us'}, {'MEDIA_URL': ''}, {'STATIC_URL': '/static/'}, {'TIME_ZONE': 'CDT'}, {'messages': <django.contrib.messages.storage.fallback.FallbackStorage object at 0x10e412310>}, {'form': <polls.models.GSMemberForm object at 0x10e3f69d0>}]" 
```

需要一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:45:52.983

您需要使用`{% crispy gameserver helper %}`if`gameserver`是上下文中表单的名称并且`helper`是`FormHelper`实例来调用它。如果您还没有创建一个单独的`FormHelper`实例，并且您已经创建了一个附加到表单本身的实例，您可以这样做`{% crispy form form.helper_attribute %}`

如果您的表单具有`FormHelper`附加到`helper`属性（`helper`用作名称），那么您不必传递单独的`helper`. 做就是了`{% crispy form %}`

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:03:21.090

而不是这个：`{% crispy gameserver gameserver.helper %}`

输入这个：`{% crispy form %}`

# java - UUID.randomUUID() 是否适合用作一次性密码？

> ID：11026061
> 
> 赞同：31
> 
> 时间：2012-06-14T02:57:25.133
> 
> 标签：java, random, security, uuid

如前所述，确认电子邮件应[在](https://stackoverflow.com/questions/212758/best-way-for-confirmation-email-links-to-submit-id)确认链接中具有唯一的（实际上）不可猜测的代码——本质上是[一次性密码](http://en.wikipedia.org/wiki/One-time_password)。

[UUID.randomUUID() 文档](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html#randomUUID())说：

> UUID 是使用加密强的伪随机数生成器生成的。

这是否意味着正确实现的 JVM 中的 UUID 随机生成器适合用作唯一的（实际上）不可猜测的 OTP？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T03:17:49.910

如果您阅读定义 UUID 的[RFC](http://www.ietf.org/rfc/rfc4122.txt)，并从 API 文档链接到该 RFC，您会发现并非 UUID 的所有位实际上都是随机的（“变体”和“版本”不是随机的）。因此，如果正确实施，类型 4 UUID（您打算使用的那种）应该具有 122 位（对于此实施而言是安全的）随机信息，总大小为 128 位。

所以是的，它与来自“安全”生成器的 122 位随机数一样有效。 *但*较短的值可能包含足够的随机性，并且对用户来说可能更容易（也许我是唯一仍然在终端中阅读电子邮件的老式人，但是跨行的确认 URL 很烦人......） .

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-10-16T03:50:39.450

**不**，根据[UUID 规范](https://www.ietf.org/rfc/rfc4122.txt)：

> 不要假设 UUID 很难猜；例如，它们不应该用作安全功能（仅拥有授予访问权限的标识符）。一个可预测的随机数源会加剧这种情况。

此外，UUID 只有 16 个可能的字符（0 到 F）。`SecureRandom`您可以使用（感谢@erickson）生成更紧凑且更明确安全的随机密码。

```
import java.security.SecureRandom;
import java.math.BigInteger;

public final class PasswordGenerator {
    private SecureRandom random = new SecureRandom();

    public String nextPassword() {
        return new BigInteger(130, random).toString(32);
    }
} 
```

* * *

附言

我想给出一个清楚的例子，说明使用 UUID 作为安全令牌可能会导致问题：

在[uuid-random](https://github.com/jchook/uuid-random)中，我们 通过巧妙的方式在内部重新使用随机字节发现[了巨大的速度提升，从而产生了可预测的 UUID。](https://github.com/jchook/uuid-random/issues/4#issuecomment-443034293)尽管我们没有发布更改，但 RFC 允许这样做，并且此类优化可能会潜入您的 UUID 库而不引起注意。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-14T04:19:08.893

是的，使用 a`java.util.UUID`很好，`randomUUID`方法从加密安全源[生成](https://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#randomUUID())。没有太多需要说的了。

这是我的建议：

1.  向用户发送一个包含巨大密码的链接作为 URL 参数。
2.  当用户单击链接时，编写您的后端，以便确定参数是否正确以及用户是否已登录。
3.  UUID 在发布 24 小时后失效。

这将需要一些工作，但如果您真的关心编写一个健壮、安全的系统，这是必要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-29T01:45:20.273

密码强度可以根据所需的熵进行量化（越高越好）。

对于二进制计算机，

> 熵 = 密码长度 * log [2]（符号空间）

> 符号空间是可供选择的唯一符号（字符）总数

对于使用 qwerty 键盘的普通英语用户，

1.  符号是从`52`字符中选择的（两种情况下都是 26 * 2）+`10`数字 + 可能还有`15`其他字符，例如 (*, + -, ...)，一般符号空间在`75`.
2.  如果我们期望最小密码长度为`8`：

> 熵 = 8 * log [2] 75 ~= 8 * 6.x ~= 50

要为仅使用十六进制（符号空间 = 0-9,af）`50`的自动生成的一次性密码实现熵（ ），`16`

> 密码长度 = 50 / log [2] 16 = 50 / 4 ~= 12

如果应用程序可以放宽考虑完整的区分大小写的英文字母和数字，样本空间将是`62`（26 * 2 + 10），

> 密码长度 = 50 / log [2] 62 = 50 / 6 ~= 8

这将用户输入的字符数减少到 8 个（从 12 个十六进制）。

使用 UUID.randomUUID()，两个主要问题是

1.  用户必须输入 32 个字符（对用户不友好）
2.  实现必须确保唯一性标准（与库版本和语言依赖关系紧密耦合）

我知道这不是一个直接的答案，考虑到安全性和可用性限制，它真的取决于应用程序所有者来选择最佳策略。

就个人而言，我不会使用 UUID.randomUUID() 作为一次性密码。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-14T03:15:19.907

确认链接的随机代码的要点是攻击者不应该能够猜测或预测该值。如您所见，要找到确认链接的正确代码，128 位长度的 UUID 会产生 2^128 个不同的可能代码，即 340,282,366,920,938,463,463,374,607,431,768,211,456 个可能的代码尝试。我想你的确认链接不是用来发射核武器的，对吧？这对于攻击者来说很难猜到。它是安全的。

- 更新 -

如果您不信任提供的**加密强**随机数生成器，您可以将一些更不可预测的参数与 UUID 代码一起放入并散列它们。例如，

code = SHA1(UUID、进程PID、线程ID、本地连接端口号、CPU温度)

这使得预测变得更加困难。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-14T03:03:44.943

我认为这应该是合适的，因为它是随机生成的，而不是从任何特定输入中生成的（即你没有用用户名或类似的东西来提供它）——所以多次调用这段代码会产生不同的结果。它声明它是一个 128 位密钥，因此它的长度足以破解是不切实际的。

然后您打算使用此密钥来加密一个值，还是希望将其用作实际密码？无论如何，您都需要将密钥重新解释为可以通过键盘输入的格式。例如，进行 Base64 或 Hex 转换，或以某种方式将值映射到字母数字，否则用户将尝试输入键盘上不存在的字节值。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-06-14T03:05:56.423

它非常适合作为一次性密码，因为即使我已经为正在工作的应用程序实现了相同的密码。此外，您共享的链接说明了一切。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2018-05-28T01:19:01.257

我认为 java.util.UUID 应该没问题。[您可以从这篇文章](https://littlemaninmyhead.wordpress.com/2015/11/22/cautionary-note-uuids-should-generally-not-be-used-for-authentication-tokens/)中找到更多信息：

# php - PHP 面向对象设计

> ID：11026063
> 
> 赞同：1
> 
> 时间：2012-06-14T02:57:25.570
> 
> 标签：php, oop, polymorphism

我在想出我正在构建的一个小型 php 应用程序的 OOP 设计时遇到了一点困难。我在数据库中有餐厅的信息，分为一个`restaurant`表和一个`locations`表。两个表都有一些共同的列，例如`phone`、`website`和`logo url`。`locations`显然和之间的关系`restaurants`是多对一的。

所以问题来了：我想创建一个`Restaurant`包含与全球餐厅信息相关的所有信息的类，例如名称、电话、网站、徽标等。然后我想创建一个`Location`包含特定位置信息的类，例如地址、电话、网站、标志等

我遇到的问题是我希望能够实例化这两种对象类型，但`Location`如果它本身不存在，还希望让类回退到父数据上。通常，您可以编写如下内容（缩写）：

```
class Restaurant {

    protected $phone;

    function __construct($restaurant_id) {
        // Perform db call here and set class attributes
    }

    public function getPhone() {
        return $this->phone;
    }
}

class Location extends Restaurant {

    function __construct($location_id) {
        // Perform db call here and set class attributes

        // $restaurant_id would be loaded from the DB above
        parent::__construct($restaurant_id)
    }
}

$location = new Location(123);
echo $location->getPhone();

$restaurant = new Restaurant(456);
echo $restaurant->getPhone(); 
```

但就像我说的，我希望 getPhone() 方法首先检查 $this->phone，如果它不存在，则回退到父级。这样的事情会是正确的方法吗？

```
class Restaurant {

    private $phone;

    function __construct($restaurant_id) {
        // Perform db call here and set class attributes
    }

    public getPhone() {
        return $this->phone;
    }
}

class Location extends Restaurant {

    private $phone;

    function __construct($location_id) {
        // Perform db call here and set class attributes

        // $restaurant_id would be loaded from the DB above
        parent::__construct($restaurant_id)
    }

    public function getPhone() {
        if(!empty($this->phone)) {
            return $this->phone;
        }
        return parent::getPhone();
    }
}

$location = new Location(123);
echo $location->getPhone(); 
```

我觉得上面的代码真的很hacky，可能有更好的方法来完成这个。`Location`由于两者具有共同的属性，类*不*扩展`Restaurant`而是`Restaurant`为“父”对象保存一个类型的变量会更好吗？那么在`Location::getPhone()`方法中，是否进行了类似的`if(empty())`检查呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:59:52.977

`Location`不应扩展`Restaurant`，因为它本身不是餐厅；这是那家餐厅的众多地点之一。

```
class Location {
    private $restaurant;
    private $phone;

    public function getPhone() {
        return $this->phone ?: $restaurant->getPhone();
    }
} 
```

现在，由于这两个类之间有很多共同的字段，您可能想要定义一个它们各自扩展的公共基类，例如`CompanyInfoHolder`包含网站、电话和徽标的类。在这种情况下，将完全按照上面的`Location`方式覆盖。`getPhone`

# c# - C# - 更改按钮图像事件没有上升

> ID：11026064
> 
> 赞同：0
> 
> 时间：2012-06-14T02:57:33.693
> 
> 标签：c#, image, events, button

我正在制作一个简单的程序，当用户与之交互时它会更改按钮的图像。当计算机鼠标进入按钮内部时，图像会突出显示，当鼠标单击时，图像会变暗，当鼠标离开按钮时，图像会变得正常。为了实现这种行为，我正在更改 3 个图像之间的按钮图像，但是当我单击按钮并显示模态控件（例如 MessageBox）时，当它从 MessageBox 返回时，按钮中的图像仍然是“里面的鼠标” " 图像，但是鼠标已经不在按钮上了……所以我认为 button1_MouseLeave 事件没有上升，但我不明白为什么以及如何修复它……你们能帮我解决这个问题吗？我使用的代码很简单：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace teste1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_MouseLeave(object sender, EventArgs e)
        {
            button1.Image = ((System.Drawing.Image)(Properties.Resources.Botao_Del_Normal));
        }

        private void button1_MouseEnter(object sender, EventArgs e)
        {
            button1.Image = ((System.Drawing.Image)(Properties.Resources.Botao_Del_Claro));
        }

        private void button1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Test");            
        }

        private void button1_MouseDown(object sender, MouseEventArgs e)
        {
            button1.Image = ((System.Drawing.Image)(Properties.Resources.Botao_Del_Clique));
        }

        private void button1_MouseUp(object sender, MouseEventArgs e)
        {
            button1.Image = ((System.Drawing.Image)(Properties.Resources.Botao_Del_Claro));
        }        
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:04:23.287

鼠标肯定不会离开，因为在此之前按钮上的焦点被偷了，所以它没有收到那些消息。您还应该监听 LostFocus 事件并在按钮失去焦点时切换到正常图像。

```
private void button1_LostFocus(object sender, EventArgs e)
{
    button1.Image = (System.Drawing.Image)Properties.Resources.Botao_Del_Normal;
} 
```

确保真正聆听 LostFocus 事件！只是添加代码不会做任何事情。

请注意，由于预期的 LostFocus 和 MouseLeave 委托的签名是相同的，因此您实际上可以使用相同的方法监听这两个事件（并将其称为类似`button1_MouseLeaveOrLostFocus`或任何适合您的名称）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:41:07.917

请尝试 button1_MouseHover 事件而不是 button1_MouseEnter 事件。我会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T03:02:52.803

这是意料之中的，因为根据您的代码，当您停止单击时图像会重置，这将由窗口由于 messageBox 而失去焦点而触发。

删除 MouseUp 处理程序以实现您想要的行为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:46:51.573

已解决：好的，伙计们，我想出了如何让它工作！我必须删除该`MouseClick`事件，并将所有处理添加到该`MouseUp`事件中，所以现在应该按原样`MouseLeave`调用（即使使用 ALT+TAB）。`MouseUp`现在的代码是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace teste1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_MouseEnter(object sender, EventArgs e)
        {
            button1.Image = ((System.Drawing.Image)(Properties.Resources.Botao_Del_Claro));
        }

        private void button1_MouseDown(object sender, MouseEventArgs e)
        {
            button1.Image = ((System.Drawing.Image)(Properties.Resources.Botao_Del_Clique));              
        }

        private void button1_MouseLeave(object sender, EventArgs e)
        {
            button1.Image = ((System.Drawing.Image)(Properties.Resources.Botao_Del_Normal));
        }

        private void button1_Click(object sender, EventArgs e)
        {
            button1.Image = ((System.Drawing.Image)(Properties.Resources.Botao_Del_Normal));
            // Processing is made here!
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T04:40:21.543

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent(); 
        }
        private void Form1_Load(object sender, EventArgs e)
        {
            button1.Text = "Hello World!";
        }

        private void button1_MouseHover(object sender, EventArgs e)
        {
            button1.Text = "Mouse Hover";
        }

        private void button1_MouseDown(object sender, MouseEventArgs e)
        {
            button1.Text = "Mouse Down";
        }

        private void button1_MouseUp(object sender, MouseEventArgs e)
        {
            button1.Text = "Mouse Up";
        }

        private void button1_MouseLeave(object sender, EventArgs e)
        {
            button1.Text = "Mouse Leave";      
        }      
    }    
} 
```

# sql - SQL 困难查询

> ID：11026070
> 
> 赞同：-5
> 
> 时间：2012-06-14T02:58:23.010
> 
> 标签：sql

我试图为考试补习，这些是给出的一些最难的例子

```
Movie(title, year, director, budget, earnings)
Actor(stagename, realname, birthyear)
ActedIn(stagename, title, year, pay)
CanWorkWith(stagename, director) 
```

对于在 2006 年参演电影的每位演员，找出他们在所有参演电影中的艺名和总片酬（即包括 2006 年未参演的电影）。

对于每个可以与至少 5 位演员合作的导演，请找出该导演每年制作一部电影的电影总数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T03:14:38.967

您需要沉迷于一些 TDQD — 测试驱动的查询设计。

对于第一个问题：

*   您如何列出 2006 年在电影中工作的演员？
*   给定这样一个列表，你如何计算每个演员在他们曾经工作过的所有电影中的片酬总和？
*   找到他们的舞台名称很容易，因为它似乎是相关表之间的 FK。

您需要了解子查询，以及如何在 FROM 子句中嵌入子查询。您可能还需要了解表别名。

对于第二个问题：

*   你如何计算每个导演可以与多少演员合作？
*   您如何将该名单限制在可以与五名或更多演员合作的导演？（有）
*   给定一份导演名单（可以与四位以上演员合作），你如何计算导演每年制作的电影数量？（分组依据，计数）

对于任何复杂的查询，分阶段构建查询是可行的方法，特别是如果您可以随时测试您的查询。

# php - 网页内目录浏览

> ID：11026079
> 
> 赞同：3
> 
> 时间：2012-06-14T02:59:34.973
> 
> 标签：php, jquery, html, perl, directory

我想给用户一个网页内的文件浏览器。

这是我尝试过的。我正在尝试自己呈现文件内容。我正在努力做到这一点，因此 div 与您在网页中的普通目录浏览中获得的 div 相同。我已成功使 div 以可视方式工作，显示所选文件夹的内容，但是当尝试单击该目录中的文件时，它找不到该文件，因为它正在查找错误的文件路径`index.html/`而不是`index.html/videos`.

代码：

```
<div id="new-nav"></div>

<script>
  $("#new-nav").load("/videos");
</script> 
```

在网页中为用户提供“文件浏览器”体验的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:04:04.083

我建议改用[http://ckfinder.com/demo](http://ckfinder.com/demo)。

其网站上列出的 CkFinder 的功能

*   轻量级界面。

*   无页面刷新：快速响应。

*   文件夹树导航：对所有用户都直观。

*   高质量的图像缩略图，可以快速找到东西。

*   具有自动用户语言检测的多语言支持。

*   文件和文件夹的上下文相关菜单。

*   使用进度条 (*) 上传多个文件。

*   内容的完全用户控制：创建、重命名和删除文件夹和文件。

*   拖放支持在文件夹之间复制和移动文件。

*   完全的开发人员控制：所有功能都可以通过强大的 ACL 和用户角色系统进行精确配置。

*   灵活的配置：将文件存储在私人文件夹中，也在文档根目录之外。

*   安全文件上传：根据开发者设置的规则检查所有上传的文件。

*   包含用于服务器端集成的完整源代码。

*   与 CKEditor 和 FCKeditor 即时集成。

# ruby-on-rails - 在未更新的页面部分显示 Flash 消息

> ID：11026088
> 
> 赞同：0
> 
> 时间：2012-06-14T03:01:16.207
> 
> 标签：ruby-on-rails, ajax

我希望在页面的一部分中显示我的 Flash 消息，否则并不总是在更新的部分中。

换句话说，我可以提交一个通过 ajax 更新部分内容的表单。但我想在该部分之外的页面的一部分中显示 Flash 消息。

我可以在每个必要的 js.erb 文件中包含一些 javascript 来更新 flash 部分，但这似乎很疯狂。有没有更简单的方法来解决这个问题？

如果定制的东西会更好，我也不必一定使用闪信。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:19:45.993

您可以通过在表单上使用调用来以低技术方式完成此操作，该`:remote`调用在执行时会将一些 HTML 从您选择的部分注入到您的页面中。

`.rjs`在视图中很容易做到：

```
page['flash'].html(render(:partial => 'flash')) 
```

您也可以`.js.erb`使用 jQuery 在视图中执行此操作：

```
$('#flash').html("<%= escape_javascript(render(:partial => 'flash')) %>"); 
```

我倾向于认为这种`.js.erb`方法更丑陋，但我们都有自己的喜好。

# ruby - 如何创建一个在线程休眠时暂停的 Ruby 计时器？

> ID：11026090
> 
> 赞同：1
> 
> 时间：2012-06-14T03:01:43.647
> 
> 标签：ruby, multithreading, timer, benchmarking, stopwatch

我的 Ruby 应用程序处理每个需要大约 10 秒才能执行的作业。每个作业都会花费大量时间等待 IO。我有使用简单 Time.now 比较的计时器来记录工作的每个阶段需要多长时间：

```
def timer
  t = Time.now
  yield
  (Time.now - t).seconds
end

timer do
  # IO
end
=> 1.342 
```

最初，我按顺序处理所有作业，这很好，只是机器有 50% 的时间处于空闲状态（由于 IO）。

我转向多线程模型以收回一些 IO 时间。现在我为每个作业生成一个新线程，最多同时有 10 个线程。这很好用，除了当线程在运行计时器块时被抢占时，计时器在线程休眠时继续“运行”，导致计时器返回人为夸大的数字。

我需要的是一种计算计时器块的实际*运行时间的方法，忽略睡眠时间。*有没有办法实现这一点，比如询问 Thread.current 运行了多少时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:54:05.850

如果您想测量除挂钟时间以外的任何东西，就像您在这里所做的那样，您需要使用类似[rusage](https://github.com/sandofsky/rusage) gem 之类的东西，它是 UNIX`getrusage`方法的包装器。

这应该让您分解实际执行而不是等待所花费的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:53:05.313

[Benchmark](http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html)通过测量挂钟时间和 CPU 时间来做到这一点。

# jquery - 当 jquery.html() 用于加载动态表单时，单选按钮不起作用

> ID：11026093
> 
> 赞同：3
> 
> 时间：2012-06-14T03:02:04.317
> 
> 标签：jquery, html, forms, radio

[http://ano-mag.com/black-foil/](http://ano-mag.com/black-foil/)请检查此网址 - 单击左侧的“立即订购”按钮 - 注意单选按钮如何不起作用？我想不通！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T03:21:31.010

[我在你的fiddle](http://jsfiddle.net/ult_combo/sJpUT/1/)上重现了错误行为，这是由于这段代码：

```
$('.ano-box').click(function(e) {
    e.stopPropagation();
    return false;
}); 
```

这可以防止`click`事件将 DOM 冒泡到您的单选按钮。`=]`

**补充编辑：**

您的 text`input`仍然在错误场景中获得焦点，因为文本输入在事件中获得焦点，事件在`mousedown`事件之前触发时正确执行`click`。`radio`但是，在`click`您的函数取消的事件中检查输入。`=]`

# sql - 在给定的年份间隔中选择年/月格式

> ID：11026094
> 
> 赞同：0
> 
> 时间：2012-06-14T03:02:05.037
> 
> 标签：sql, sql-server, tsql

我正在寻找一个简单的解决方案。
我可以通过这个选择给定年份间隔中的月份 -

```
SELECT DISTINCT DATEPART(month, colDate) AS 'Month'    --result=> 4
FROM MyTable
WHERE YEAR(colDate)>='2012'
AND YEAR(colDate)<='2013' 
```

而且，我可以通过这个在给定的年份间隔中选择年份 -

```
SELECT DISTINCT DATEPART(year, colDate) AS 'Year'      --result=> 2012
FROM MyTable
WHERE YEAR(colDate)>='2012'
AND YEAR(colDate)<='2013' 
```

如何以 yyyy/MM 格式直接选择这些结果？ `=>2012/04`
有没有办法解决这个问题？
感谢您的关注和回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:08:11.303

与您当前的方法（最重要的是 where 子句）相比，您应该会发现这种方法在执行计划和 colDate 列上的潜在索引使用方面（如果存在）要好得多。

```
SELECT d = REPLACE(CONVERT(CHAR(7), d, 121), '-', '/')
FROM 
(
  SELECT DISTINCT 
    d = DATEADD(MONTH, DATEDIFF(MONTH, '19000101', colDate), '19000101')
    FROM dbo.MyTable
    WHERE colDate >= '20120101'
    AND colDate < '20140101'
) AS x
ORDER BY d; 
```

# android - 使用带有一些预定义术语的 SearchRecentSuggestionsProvider？

> ID：11026100
> 
> 赞同：1
> 
> 时间：2012-06-14T03:03:02.540
> 
> 标签：android, search, autocomplete

我正在寻找一些关于扩展 SearchRecentSuggestionsProvider 的信息，以便它处理两种类型的建议：

*   用户搜索历史
*   我希望始终提供的预定义术语作为可能的建议

例如，当用户开始输入“Goo”时，也许他们之前已经搜索过“Goo Gone”——也许我还想包括“Google”，因为它在我的“特殊条款”列表中。

参考[Google](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html)的文档，我发现我真的可以使用 Google 的代码或滚动我自己的 SQLite 数据库来存储东西。有没有办法覆盖 SearchRecentSuggestionsProvider 的一部分来做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:16:10.103

是的，您可以使用自己的类扩展 SearchRecentSuggestionsProvider。这是我为此编写的课程：[https ://github.com/bostonbusmap/bostonbusmap/blob/master/src/boston/Bus/Map/provider/TransitContentProvider.java](https://github.com/bostonbusmap/bostonbusmap/blob/master/src/boston/Bus/Map/provider/TransitContentProvider.java)

```
package boston.Bus.Map.provider;

import boston.Bus.Map.data.RoutePool;
import boston.Bus.Map.main.Main;
import boston.Bus.Map.provider.DatabaseContentProvider.DatabaseAgent;
import boston.Bus.Map.transit.TransitSystem;
import android.app.SearchManager;
import android.content.ContentProvider;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.SearchRecentSuggestionsProvider;
import android.content.UriMatcher;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteQueryBuilder;
import android.net.Uri;

public class TransitContentProvider extends SearchRecentSuggestionsProvider {

    private UriMatcher matcher;

    public static final String AUTHORITY = "com.bostonbusmap.transitprovider";
    public static final int MODE = SearchRecentSuggestionsProvider.DATABASE_MODE_QUERIES;

    private static final int SUGGESTIONS_CODE = 5;

    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY);

    public TransitContentProvider()
    {
        matcher = new UriMatcher(UriMatcher.NO_MATCH);

        matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY, SUGGESTIONS_CODE);
        setupSuggestions(AUTHORITY, MODE);
    }

    @Override
    public boolean onCreate() {
        boolean create = super.onCreate();
        return create;
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder)
    {
        int code = matcher.match(uri);
        switch (code)
        {
        case SUGGESTIONS_CODE:
            if (selectionArgs == null || selectionArgs.length == 0 || selectionArgs[0].trim().length() == 0)
            {
                return super.query(uri, projection, selection, selectionArgs, sortOrder);
            }
            else
            {
                ContentResolver resolver = getContext().getContentResolver();
                return DatabaseAgent.getCursorForSearch(resolver, selectionArgs[0]);
            }
        default:
            return super.query(uri, projection, selection, selectionArgs, sortOrder);
        }
    }
} 
```

# json - php从yql检索json值

> ID：11026103
> 
> 赞同：0
> 
> 时间：2012-06-14T03:03:21.230
> 
> 标签：json, oauth, yql

努力从存储在 php 变量中的这个复杂的 json 中提取必要的数据。

通过php脚本，我调用了yql。数据返回并分配给 $retarr；

然后再往下， $retarr[2] 正在存储完整的值，如下所示：

```
$debugarrays= print_r($retarr[2], true);
echo "<pre>";
echo $debugarrays;
echo "</pre>";

cbfunc({
   "query":{
      "count":10,
      "created":"2012-06-13T09:13:45Z",
      "lang":"en-US",
      "results":{

         "contact":[    

            {
               "created":"2006-10-29T04:32:07Z",
               "updated":"2006-10-29T04:32:07Z",
               "uri":"http://social.yahooapis.com/v1/user/MNQJOMYDQYLY2FZSMROV4QDA6MI/contact/12",
               "isConnection":"false",
               "id":"12",
               "fields":[
                  {
                     "created":"2006-10-29T04:32:07Z",
                     "updated":"2006-10-29T04:32:07Z",
                     "uri":"http://social.yahooapis.com/v1/user/MNQJOMYDQYLY2FZSMROV4QDA6MI/contact/12/email/6",
                     "id":"6",
                     "type":"email",
                     "value":"jaq@lifemastr.com",
                     "editedBy":"OWNER"
                  },
                  {
                     "created":"2006-10-29T04:32:07Z",
                     "updated":"2006-10-29T04:32:07Z",
                     "uri":"http://social.yahooapis.com/v1/user/MNQJOMYDQYLY2FZSMROV4QDA6MI/contact/12/name/5",
                     "id":"5",
                     "type":"name",
                     "value":{
                        "givenName":"'Jaq'",
                        "middleName":null,
                        "familyName":null,
                        "prefix":null,
                        "suffix":null,
                        "givenNameSound":null,
                        "familyNameSound":null
                     },
                     "editedBy":"OWNER"
                  }
               ]
            } 

         ]
      }
   }
});

$sJson= $retarr[2];
$aNative   = json_decode($sJson);
print_r($aNative);

echo $retarr[2]->fields[0]->id."<br>";
echo $retarr[2]->fields[0]->type."<br>";
echo $retarr[2]->fields[0]->value."<br>"; 
```

未能获得所需的值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:11:52.360

那似乎是一个 JSONP 字符串，它不是“纯”json。是 JSON 被包裹在一个回调函数中——JSONP 被用来绕过 AJAX 跨域请求限制，而这个回调业务就是其中的一部分。

您必须去掉前导`cbfun(`和尾随`);`才能获得真正的 JSON 数据，然后您可以将其传递给 json_decode()。

# c++ - 在 C++ 中覆盖继承

> ID：11026104
> 
> 赞同：0
> 
> 时间：2012-06-14T03:03:35.063
> 
> 标签：c++, inheritance, overriding

```
class X {

  int i;

public:

  X() { i = 0; }

  void set(int ii) { i = ii; }

  int read() const { return i; }

  int permute() { return i = i * 47; }
}; 
```

以上是X类的定义

另一个 Y 类是

```
class Y : public X {

    int i; // Different from X's i

public:

    Y() { i = 0; }

    int change() {
        i = permute(); // Different name call
        return i;
    }

    void set(int ii) {
        i = ii;
        X::set(ii); // Same-name function call
    }
}; 
```

我怀疑X类也包含一个名为i的变量，它被Y类继承，但是Y类的i应该覆盖它，但是类（Y）的大小是8。

其次，对于线路

```
X::set(ii) 
```

我们可以这样调用函数吗？是否为任何对象调用了 X 类的这个函数？

非常感谢提前

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T03:11:37.137

`Y::i`不覆盖任何东西（你只能覆盖一个虚函数）。它*隐藏* `X::i`了，所以有两个不同`i`的，一个在基类中，一个在派生类中。

对于第二个问题，在类之外，您只能使用诸如`X::set(ii);`when`set`是`static`成员函数的语法，而不是普通函数或`virtual`成员函数。在类内部，您可以使用它来强制使用特定类的成员函数定义。

编辑：我可能应该回答棘手的（有些相关的）问题：如果静态类型与动态类型不同，`i`使用哪个？例如，让我们考虑一个简化版本：

```
class base { 
protected:  // we'll make `i` protected, so `derived` can access it if necessary.
    int i;
public:
    base() : i(0) {}
    void hide() { i = 2; }
    virtual void set() { i = 10; }
};

class derived : public base { 
    int i;
public:
    derived() : i(0) {}
    void hide() { i = 1; }
    void set() { i = 5; }
}; 
```

现在，因为`set`是虚拟的，所以调用`main`是 to `derived::set`。由于`hide`不是虚拟的，因此调用`main`将是 to `base::hide()`。`i`问题是，他们每个人将分配到哪个班级？

答案很简单：即使*函数*是虚拟的，变量也不是，所以每个函数都引用自己类中的变量。拥有/缺少`virtual`控制您调用哪个函数，但不控制该函数引用哪个变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T03:11:22.927

请注意，您的代码中没有*覆盖*，只有 name *hidden*。

> 我怀疑X类也包含一个名为i的变量，它被Y类继承，但是Y类的i应该覆盖它，但是类（Y）的大小是8。

继承不会覆盖变量。`i`in class`Y`将隐藏 class 的名称`i`，但`X`两者都会存在，因此大小为*8*。

> X::set(ii) 我们可以这样调用函数吗？是否为任何对象调用了 X 类的这个函数？

在类`Y`中，这个*限定*的调用请求以静态方式调用`set`from而不是of 。`X``set``Y`

# php - CodeIgniter + Active Record Spark 保存功能不起作用

> ID：11026106
> 
> 赞同：0
> 
> 时间：2012-06-14T03:03:40.480
> 
> 标签：php, codeigniter, activerecord

这让我彻底困惑。我正在尝试在我的网站上收集非常基本的统计数据，即我每天获得多少点击量。

在每个控制器继承的超类中，我都有这个代码。

```
 // log every hit
    if(STATISTICS == 'all')
    {
        $stat = new Statistic();
        $stat->ip = $this->_get_ip_address();
        $stat->save();
    } 
```

我在这个块之前加载火花。我确实有一个名为 Statistics 的表设置。我创建了名为 Statistic 的模型文件，其类名为 Statistic。一切都很好，除非我尝试保存。

我可以打印出该`$stat`对象，它会返回一个活动记录对象，所有内容都已正确设置。但是由于某种原因，当我尝试调用`$stat->save();`每个页面时，只会返回一个内部服务器错误。

我有一段时间没有在我的网站上添加新模型了，所以我可能忘记了一些东西，但这真的让我很烦。

有人有想法么？

更多信息：

我的统计模型：

```
class Statistic extends ActiveRecord\Model {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:47:03.853

我的代码似乎没有任何问题。这一切都很好。

提示：不要忘记将您的 id 设置为在数据库中自动递增。

# dynamics-crm-2011 - 在 CRM 2011 中建立 dev/qa/prod 组织的正确方法

> ID：11026109
> 
> 赞同：2
> 
> 时间：2012-06-14T03:03:56.003
> 
> 标签：dynamics-crm-2011

考虑以下场景：CRM 被用作应用程序开发平台，其中跨多个开发组织构建多个应用程序（CRM 解决方案），这些解决方案最终将托管在 PROD 组织中的一个组织下。开发环境如下所示：

1) 一个不受管理的“通用”解决方案，在一个名为 COMMON 的组织中包含通用实体、角色和其他工件

2) 团队 A 在 ORG 1 中处理非托管解决方案 1，其中 COMMON 已作为托管解决方案导入

3) B 团队在 ORG 2 中处理非托管解决方案 2，其中 COMMON 已作为托管
解决方案导入

4) 团队 C 在 ORG 3 中处理非托管解决方案 3，其中 COMMON 已作为托管解决方案导入

还有另一个称为集成，旨在将所有应用程序（解决方案）作为托管解决方案组合在一起

问题：

1) 在同一个开发组织中并行开发多个应用程序是个好主意吗？例如，让团队 A 和团队 B 在分别开发解决方案 A 和解决方案 B 时共享 Org 1 是否有意义？

2) 如果上述任何应用程序需要站点地图自定义，则应在将它们导入集成之前进行这些自定义并将其包含在各自的托管解决方案中，或者是否应在集成中进行所有站点地图自定义，然后将这些自定义导出为用于最终导入 PRODUCTION 组织的托管解决方案（仅包含站点地图）。

3) 解决方案 1-3 在其各自的组织中具有自定义实体，并且需要为这些实体（读取、写入等）添加权限，以获取来自安装在各自组织中的托管通用解决方案的角色“角色 X”组织。是否应该授予实体角色的权限并将其包含在相应的托管解决方案中，或者是否也应该在集成组织中完成此配置？

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:03:32.630

1）您可以同时在同一个组织中开发多个解决方案。我们经常这样做，当我们与同一个实体打交道时，确实会出现唯一的问题。在一个完美的世界中，您的 COMMON（这是您的核心库）将是该解决方案开发组织中的托管解决方案。事实上，我强烈建议将 COMMON 尽可能地隔离，高度记录，并自动保存在 SVN 中。

2）站点地图通常很容易按照您想要的方式进行。丝带是杀手。无论如何，我喜欢在 UAT 中手动进行更改，然后将其导入 PROD。这不是理想的方式，只是似乎导致错误最少的方式。从 DEV 导入似乎会覆盖现有项目，因为这完全是关于“最后获胜”。

3）我会将这些保留在解决方案中，因为它们取决于应用程序。现在，如果由于繁文缛节或用户断开连接而无法管理 DEV，我将在 UAT 内部构建一个与每个解决方案相关联的非托管集成解决方案。所以解决方案-A-集成、解决方案-B-集成等由其他人处理。然后将这些从 UAT 中导出，作为托管解决方案导入 PROD。

# jakarta-ee - Weblogic 错误 403--禁止

> ID：11026110
> 
> 赞同：14
> 
> 时间：2012-06-14T03:03:57.563
> 
> 标签：jakarta-ee, web-applications, weblogic, war, http-status-code-403

我正在尝试在 weblogic 上运行 Java EE 应用程序。该应用程序在 Tomcat 上运行良好。我已经自定义了 war 文件以包含 weblogic.xml。该文件包含以下代码：-

```
<container-descriptor>
    <show-archived-real-path-enabled>true</show-archived-real-path-enabled>
</container-descriptor> 
```

我还更改了应用程序属性文件中的配置，以反映容器正在侦听的端口。server.port=7001 server.modjk.enabled=false

我的 web.xml 文件包含以下代码：-

```
<servlet>
    <servlet-name>olatservlet</servlet-name>
    <servlet-class>org.olat.core.servlets.OLATServlet</servlet-class>

    <!-- Set the load order -->
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>olatservlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>olatservlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

当我最初在 weblogic 11g 上运行 war 文件时，我得到了一个空指针异常。但是，当我从 lib 文件夹中删除 XerceImpl.jar 时，我可以部署该文件。现在我可以成功部署应用程序了。我将weblogic中的上下文根命名为war文件的名称。当我尝试在其测试选项卡中打开 weblogic 生成的链接时，我收到以下错误：-

错误 403--禁止

来自 RFC 2068 超文本传输​​协议——HTTP/1.1：

10.4.4 403 禁止

服务器理解请求，但拒绝执行。授权将无济于事，并且不应重复请求。如果请求方法不是 HEAD 并且服务器希望公开请求未完成的原因，它应该在实体中描述拒绝的原因。当服务器不希望确切地揭示请求被拒绝的原因或没有其他响应适用时，通常使用此状态代码。

我想知道是否有人可以告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-08T23:04:15.647

我知道现在回答这个问题已经很晚了。但我用我的小知识回答，希望它会帮助那里的人。

您应该在 web.xml 文件中的welcome-file-list 中定义起始页。例如，如果client.jsp 是您运行项目时要显示的页面，则web.xml 中的welcome-file-list 中的第一行文件应该是

```
<welcome-file-list>
    <welcome-file>client.jsp</welcome-file>
    <welcome-file>index.html</welcome-file>
 </welcome-file-list> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-27T06:03:06.743

我知道这已经很晚了，但我也遇到了同样的问题，在谷歌搜索之后，我发现了原因，我决定只为可能遇到同样问题的其他人发布它。这个网页给了我提示：

[错误 403 解释](http://www.checkupdown.com/status/E403.html)

默认情况下，WebLogic 会禁用目录浏览，因此如果您有一个带有 index.html 作为主页的网站（例如 example.com）并且您键入

```
http://localhost:7001/example.com, 
```

默认情况下，weblogic 不会自动为您检索主页。您需要输入完整路径，即

```
http://localhost:7001/example.com/index.html. 
```

无论哪种方式，您都需要在 weblogic 中启用目录浏览。无论如何，这就是发生在我身上的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-15T10:55:54.760

如果您错过在 weblogic.xml 中添加相应的安全配置，您将收到“ **403 Forbidden。服务器理解请求，但拒绝执行它。** ”错误。

因此，请确保除了使用“ *security-constraint* ”、“ *login-config* ”和“ *security-role ”设置配置您的***web.xml**之外，您还可以在**weblogic.xml中进行“** *security-role-assignment* ”配置，如下所示：

 *****```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-web-app xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-web-app" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.8/weblogic-web-app.xsd">
     <wls:weblogic-version>12.2.1</wls:weblogic-version>
     <wls:context-root>SomeApp</wls:context-root>
     ***************
     ***************
     <wls:security-role-assignment>
         <wls:role-name>someGroupeDefinedInWebLogicServer</wls:role-name>
         <wls:principal-name>someUserDefinedInWebLogicServer</wls:principal-name>
     </wls:security-role-assignment>
     ***************
     ***************
</wls:weblogic-web-app> 
```

希望，这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-20T09:00:35.440

我创建的服务提供商之一遇到了同样的问题。

我试图通过我的网络浏览器访问它，但我无法找到出现此错误消息的原因，直到我理解服务器确实理解了请求但为了让您获得响应，您必须指定正确的格式（或媒体类型）能够读取它，然后服务器会给你响应。

总而言之，**服务提供者**在我请求“ **application/html** ”时提供了“ **application/xml** ”响应，直到我构建了自己的期望“ **application/xml ”的****客户端消费者**，然后服务器接受回复响应。

 ******* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-02T22:20:36.173

这可能与问题无关，但对于那些在尝试打开网站时来自谷歌的人来说：在链接的标题中添加 HTTPS:// 对我来说很有帮助。访问航班网站时出现此错误。也许可以帮助来自谷歌的其他人解决同样的问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-01-29T21:45:06.757

您可以在 web.xml 文件的末尾添加此代码

```
<welcome-file-list>
    <welcome-file>faces/my_page.jspx</welcome-file>
</welcome-file-list> 
```

或者，如果您使用的是 JDeveloper，您可以转到概览选项卡、页面和欢迎文件中，将路由添加到您希望默认打开的页面。此外，您应该在页面名称之前添加“faces/”，因为这是您创建的页面的默认路由。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-19T08:49:30.870

请检查您的 web.xml 文件，不遵循 xml 语法，表示有效的 xml 文件，即使是像额外的 < 或 > 这样的小错误也会导致此类问题（我也遇到过）***********

# asp.net - 如何使用重定向设置跨域 Cookie？

> ID：11026115
> 
> 赞同：1
> 
> 时间：2012-06-14T03:04:35.363
> 
> 标签：asp.net, cookies, cross-domain, single-sign-on

每个人

我有两个网站 www.web1.com 和 www.web2.com。现在我想在 web1 中写入一个 cookie，并通过 Response.Redirect 将其写入 web2。如果可行，我想通过这种方法实现一个简单的 sso。但是，我无法读取 web2 中的 cookie。有人可以帮我看看我的代码是否有问题，或者 cookie 是否无法通过这种方式跨域共享。谢谢：）

这是代码：

在 www.web1.com/Default.aspx

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpCookie ck = new HttpCookie("userid", "00000001");

    ck.Expires = DateTime.Now.AddDays(1);

    ck.Domain = ".web2.com";

    Response.Cookies.Add(ck);

    Response.Redirect("http://www.web2.com/Default.aspx");
} 
```

和 www.web2.com/Default.aspx 中的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request.Cookies["userid"] != null)
    {
        lbCookie.Text = Request.Cookies["userid"].Value;
    }
    else
    {
        lbCookie.Text = "No Cookies";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-09T08:17:15.100

不要费心设置跨域 cookie，在大多数情况下，它们会在所有现代浏览器中被阻止。

使用带有参数的纯 HTTP GET 和服务器端加密来执行跨域 SSO。

例如，在页面上，`www.web1.com/Default.aspx`您可以将隐藏的 IFrame 添加到某些特殊页面`www.web2.com/sso.aspx?userid=<encrypted,timestamped userid>`，从而将 cookie 设置为 on `web2.com`。

# css - 将内容浮动到网站宽度之外

> ID：11026118
> 
> 赞同：2
> 
> 时间：2012-06-14T03:04:43.863
> 
> 标签：css, css-float

我有一个 960 像素宽的网站，想在右侧放一张图片。

Vimeo 已经在主页上完成了它：http: [//vimeo.com](http://vimeo.com) 你可以看到一张折纸鸟的图画，它停留在网站宽度之外，而不会导致屏幕出现水平滚动条

他们怎么做到的？！

[漂浮在 Vimeos 布局之外的折纸鸟](http://i.stack.imgur.com/omVJM.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:58:36.853

# 新答案：

经过进一步调查，似乎一个关键方面是框/图像不会导致水平滚动条，而内容会。这是 vimeo 应用的一个有趣的技巧，而且非常偷偷摸摸。

它与盒子/图像的非直接父级`min-width`on`body`和on 的组合有关。`overflow-x: hidden`当与`position: absolute`, 和负数结合使用时，`right`可以达到预期的结果。

## HTML：

```
<div id="wrap">
    <div id="width_wrap">
        <div class="crane"></div>
    </div>
</div>​ 
```

## CSS：

```
body
{
    min-width: 960px;
}

#wrap
{
    overflow-x: hidden;
}

#width_wrap {
    position: relative;
    width: 960px;
    height: 400px;
}

.crane
{
    position: absolute;
    width: 200px;
    height: 200px;
    right: -40px;
} 
```

这是一个最小的 Fiddle，带有轮廓，您可以看到发生了什么：http: [//jsfiddle.net/rUj8s/2/](http://jsfiddle.net/rUj8s/2/) ​</p>

# 原答案：

答案很可能会`position: absolute`起作用，但也会使图像/ div 脱离文档的正常流程。这可能不是你想要的。

您*可能*想要的是否定的`margin-right`：

```
.your_picture {
    margin-right: -30px;
} 
```

或者，也许`position: relative`和一个否定的`right`

```
.your_picture {
    position: relative;
    right: -30px;
} 
```

或者，最后，`position: relative`和一个积极的`left`

```
.your_picture {
    position: relative;
    left: 30px;
} 
```

这就是存在负边距和相对定位的原因。相对于它们通常所在的位置移动物体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:11:43.393

```
.your_picture {
  position:absolute;
   /* this needs to be negative to have the image sticking outside of the width */
  right:-30px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T03:56:02.233

```
#parentDiv{
  position: relative;
}

#your_picture {
  position:absolute;
  right:-30px; /*change it to a number that you like */
  top: 30px; /*change it to a number that you like */
} 
```

html 标记会像：

```
<div id="parentDiv">
   <div id="your_picture"></div>
</div> 
```

# jquery - jQuery 删除：$("...").remove() 与 .remove("...")

> ID：11026122
> 
> 赞同：3
> 
> 时间：2012-06-14T03:05:36.813
> 
> 标签：jquery

阅读文档，我希望`$("#wrap2").remove(".error")`从. 但是看看这个 JSFiddle： http: **[//jsfiddle.net/hCGUS/](http://jsfiddle.net/hCGUS/)**似乎不是这样？`.error``#wrap2`

```
$(function() {
    $("#wrap1 .error").remove(); // works 
    $("#wrap2").remove(".error"); // fails ...
})​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T03:09:14.077

正如文档所述，要删除的选择器参数是

> 筛选要删除的匹配元素集的选择器表达式。

第一个示例是您应该使用什么来删除`error`id 元素中包含的class 元素`wrap1`。

第二个示例将找到具有 id 的元素`wrap2`，然后为具有 class 的元素过滤该集合`error`，并删除这些元素。也就是说，它只会删除匹配的元素`#wrap2.error`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T03:07:18.217

[文档](http://api.jquery.com/remove/)说，在传递参数时，它充当被调用的包装集上的过滤器，所以如果你有一个 jQuery 集，但只想删除集中的一些元素，你可以将选择器传递给只删除那些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T03:10:50.337

根据 jQuery 文档。我认为

```
$("#wrap2").remove(".error"); 
```

等于：

```
$("#wrap2.error").remove(); 
```

表示一个元素有 id`wrap2`和 class`error`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T03:11:46.140

基于 x1a4 的答案，`$("wrap2")`仅包含一个元素，而不包含其任何子元素。如果你这样做了：

```
$("wrap2 *").remove(".error") 
```

它的性能与您的工作版本相同。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-14T03:17:49.150

**请使用 removeClass 而不是 remove**

$("#wrap2").removeClass("error");

# json - 我们可以使用 $.ajax 调用检索一定数量的 JSON 记录吗？

> ID：11026123
> 
> 赞同：0
> 
> 时间：2012-06-14T03:05:43.413
> 
> 标签：json, jquery, jquery-mobile

我正在通过 $.ajax() 调用调用 Web API。我得到了 JSON 格式的结果集。有什么方法可以检索 X 条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T01:19:58.313

我使用 Slice 函数来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:10:36.793

您必须在 ajax 调用之前在 php 文件中执行此操作，或者在调用之后在 javascript 中执行此操作。很确定你不能直接用 $.ajax() 做到这一点。

# iphone - xcode 4.3.2 存档构建不创建 dsym

> ID：11026124
> 
> 赞同：6
> 
> 时间：2012-06-14T03:05:54.770
> 
> 标签：iphone, ios, xcode4.3

我有一个用 Xcode 4 开发的旧项目，我记得在 Xcode 上做 xarchive 可以正确生成 dsym。但在最新版本 x 4.3.2 上，创建的 xarchive 没有 dsym 文件。我验证了这些设置的设置

1.  dwarf 与 dsym 用于调试和发布

还有什么导致问题，还有其他我应该注意的设置吗？请建议解决此问题的方法。

注意：我在方案中选择归档调试而不是归档发布。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T03:12:24.973

验证 是否`Generate Debug Symbols`设置为`YES`in `Build Settings`。确保在编译之前清理目标。这样做后，请确保您正在寻找`.dSYM`正确的位置。

*   右键单击管理器中的存档，然后`Show In Finder`
*   右键单击`.xarchive`文件和`Show Package Contents`
*   导航到`dSYMs`目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-15T08:53:05.560

**识别问题**

1.  检查发布和调试配置的构建设置：

    *   生成调试符号 → 是
    *   调试信息... → DWARF 与 DSYM
    *   部署后处理 → 是
    *   剥离链接产品... → 否
    *   剥离调试... → 否
2.  尝试检查报告导航器。就我而言，dSYM 文件尚未生成，也没有相应的行，`"Generate Appname.dSYM ...in {path}"` 但已安装 Fabric，它记录了 dSYM 文件不存在的事实：

[![没有动态符号](../Images/15569bfce543fe770689bd851d59f867.png)](https://i.stack.imgur.com/ARamh.png)

只需通过“dSYM”提交报告导航器。

**定影**

就我而言，我只需要做我被要求做的事情：

> 对于所有配置，DEBUG_INFORMATION_FORMAT 应设置为 dwarf-with-dsym。

此外，可能会在意外的地方生成 dSYM 文件。检查环境变量，尤其是`DWARF_DSYM_FOLDER_PATH`和`DWARF_DSYM_FILE_NAME`.

要将 dSYM 嵌入应用程序包中，只需设置`DWARF_DSYM_FOLDER_PATH`为`$(CONFIGURATION_BUILD_DIR)/$(EXECUTABLE_FOLDER_PATH)`和`DWARF_DSYM_FILE_NAME``$(EXECUTABLE_NAME).dSYM`

**检查**

现在构建应该为您的目标创建 dSYM

[![生成target.dSYM](../Images/ff6b66ee9e52c3bc78df5cc5f148c088.png)](https://i.stack.imgur.com/NQR5p.png)

# uiscrollview - 为什么我的 UIpageControl 不显示？

> ID：11026128
> 
> 赞同：0
> 
> 时间：2012-06-14T03:06:00.107
> 
> 标签：uiscrollview, uipagecontrol

我下载了一个关于 UIScorllView 和 UIPageControl 的圆顶。为什么 UIPageControl 不显示？这是代码，我是 Iphone 的新手。任何帮助将不胜感激！

ScrollView.MI 将 ResultViewController 放入 ScrollView。我想用 PageController 滚动 resultViewController。

```
- (void)loadScrollViewWithPage:(int)page
{
    if (page < 0)
        return;
    if (page >= pageNumber)
        return;

    ResultViewController *controller = [viewControllers objectAtIndex:page];
    if ((NSNull *)controller == [NSNull null])
    {
        controller = [[ResultViewController alloc] initWithPageNumber:page locations:existLocations];
        [viewControllers replaceObjectAtIndex:page withObject:controller];
        [controller release];
    }

    if (controller.view.superview == nil)
    {
        CGRect frame = scrollView.frame;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0;
        controller.view.frame = frame;
        [scrollView addSubview:controller.view];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    existLocations = [FileManagerUtil readPlistFileForDictionary:@"Locations" fileName:@"CloudCheckLocations.plist"];

    pageNumber = [existLocations count];
    NSMutableArray *controllers = [[NSMutableArray alloc] init];
    for (unsigned i = 0; i < pageNumber; i++)
    {
        [controllers addObject:[NSNull null]];
    }
    self.viewControllers = controllers;
    [controllers release];

    scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

    [self.navigationItem setTitle:@"NetWork condition"];
    scrollView.pagingEnabled = YES;
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * pageNumber, scrollView.frame.size.height);
    scrollView.showsHorizontalScrollIndicator = NO;
    scrollView.showsVerticalScrollIndicator = NO;
    scrollView.scrollsToTop = NO;
    scrollView.delegate = self;

    pageContronl.numberOfPages = pageNumber;
    pageContronl.currentPage = 0;

    [pageContronl addTarget:self action:@selector(changePage:) forControlEvents:UIControlEventValueChanged];

    [pageContronl setBackgroundColor:[UIColor blackColor]];
    [self loadScrollViewWithPage:0];
    [self loadScrollViewWithPage:1];
    [scrollView addSubview:pageContronl];

    [self.view addSubview:scrollView];

}

- (void)scrollViewDidScroll:(UIScrollView *)sender
{

    if (pageControlUsed)
    {

        return;
    }

    CGFloat pageWidth = scrollView.frame.size.width;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    pageContronl.currentPage = page;

    [self loadScrollViewWithPage:page - 1];
    [self loadScrollViewWithPage:page];
    [self loadScrollViewWithPage:page + 1];

}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    pageControlUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    pageControlUsed = NO;
}

- (IBAction)changePage:(id)sender
{
    int page = pageContronl.currentPage;

    [self loadScrollViewWithPage:page - 1];
    [self loadScrollViewWithPage:page];
    [self loadScrollViewWithPage:page + 1];

    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;
    [scrollView scrollRectToVisible:frame animated:YES];

    pageControlUsed = YES;
} 
```

滚动视图.h

```
@interface ScrollViewController : UIViewController<UIScrollViewDelegate>
{
    NSMutableArray *viewControllers;
    NSString *currectNetWork;
    NSString *flag;
    NSString *locationName;

    IBOutlet UIScrollView *scrollView;
    IBOutlet UIPageControl *pageContronl;
    BOOL pageControlUsed;
    int pageNumber;

    NSMutableDictionary *existLocations;

}
@property (nonatomic,retain) NSString *currectNetWork;
@property (nonatomic,retain) NSString *flag;
@property (nonatomic,retain) NSString *locationName;
@property (nonatomic,retain) UIPageControl * pageContronl;
@property (nonatomic,retain) UIScrollView * scrollView;
@property (nonatomic,retain) NSMutableArray *viewControllers;
@property (nonatomic,retain) NSMutableDictionary *existLocations; 
```

*   (IBAction)changePage:(id)sender;

ResultViewControl.M 该方法将由 ScrollView.M 调用

```
- (id)initWithPageNumber:(int)page locations :(NSMutableDictionary *) locations
{
    titilArray = [[NSArray alloc] initWithObjects:@"Today", @"Past 7 Day",@"Past 30 Day",nil];

    if (self = [super initWithNibName:@"ResultViewController" bundle:nil])
    {
        pageNumber = page;
        existLocations = locations;
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:27:08.933

检查 pageControl 和父视图的背景颜色。如果两者具有相同的颜色（默认为白色），则不会显示页面控件。

在 IOS6 中，您有新的方法`pageIndicatorTintColor`和`currentPageIndicatorTintColor`.

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T09:48:03.743

检查容器视图/ tableView（如果存在）的顶部和底部约束。两者都不得附有顶部/底部布局指南。用容器边距附加它们。

# wpf - 如何使用 AutoCompleteBox 以多种方式进行搜索

> ID：11026129
> 
> 赞同：1
> 
> 时间：2012-06-14T03:06:41.973
> 
> 标签：wpf, autocomplete, wpftoolkit, autocompletebox

我正在开发 WPF Windows 应用程序。我想在 AutoCompleteBox 中以多种方式搜索。例如：我想在同一个 AutocompleteBox 中按 Id 和 Name 搜索。

外汇：我的表数据是

身份证名称

1个

2个BB

3cc

现在，我想搜索表格数据。我希望该用户能够通过 Id 和 Name 两种方式进行搜索。他输入**1**或**aaa**他获得了记录。

那么，如何使用一个 AutoCompleteBox 按 ID 和名称搜索？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:41:11.750

您需要实现自定义过滤器。正如[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.autocompletebox%28v=vs.95%29.aspx)所说，只需设置 ItemFilter 属性。它将允许您定义自定义方法来确定元素是否满足搜索条件。在您的示例中，您可能会实现类似这样的 Filter 方法...

```
 private bool Filter(string search, object item)
    {
        var myItem = item as Item;
        if (myItem == null)
            return false;

        // you would obviously check if you can parse search to number
        if (myItem.ID == int.Parse(search) || myItem.ItemName.StartsWith(search))
        {
            return true;
        }

        return false;
    } 
```

# visual-studio-2010 - 我可以将 nuget 包配置从一个项目复制到另一个项目吗？

> ID：11026137
> 
> 赞同：44
> 
> 时间：2012-06-14T03:08:07.997
> 
> 标签：visual-studio-2010, nuget

如果我在 VS2010 中有一个项目，我已经使用 nuget 添加了许多包，那么我可以在该解决方案中创建另一个项目并以某种方式获得完全相同的包配置吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-11-12T09:26:24.857

这个问题有点老了，但我决定与任何寻找相同问题的人分享我是如何做到这一点的：

1.  将 packages.config 从已安装软件包的项目拖放到新项目中。
2.  打开包管理器控制台
3.  类型：

    > Update-Package -Reinstall -ProjectName [目标项目的名称]

4.  按回车:)

我希望它有帮助

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-27T10:29:50.683

您可以右键单击解决方案节点并选择“管理解决方案包”，然后您将看到解决方案中已安装包的列表，通过选择每个包并单击“管理”按钮，您可以说出哪个包属于哪个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-28T13:23:50.443

使用 Visual Studio - 打开两个项目（.csproj 文件）。复制`<ItemGroup>`包含`<PackageReference />`定义的内容。保存目标项目。

# android - 如何处理android自定义组件中的@string属性？

> ID：11026140
> 
> 赞同：0
> 
> 时间：2012-06-14T03:08:46.683
> 
> 标签：android, custom-component

在布局 xml 文件中，我使用 @string 设置属性，如下所示：

```
<com.hardpass.MyCustomComponent
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    mynamespace:title="@string/xxootitle" /> 
```

如何处理`@string/xxootitle`自定义组件`com.hardpass.MyCustomComponent`？或者如何解析`@string/xxootitle`为 strings.xml 中定义的真实值。

```
String title = attrs.getAttributeValue(mynamespace, "title"); 
//the title got here is "@string/xxootitle",
//but how to parse `@string/xxootitle` to the real value which is defined in strings.xml. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:21:12.453

使用 getAttributeResourceValue 和 getString，

```
getString(attrs.getAttributeResourceValue(mynamespace, "title", R.string.xxootitle)); 
```

# jqgrid - 简单的 jqgrid 示例无法加载数据

> ID：11026142
> 
> 赞同：1
> 
> 时间：2012-06-14T03:08:59.853
> 
> 标签：jqgrid

我是 jqGrid 的新手，我试图让一个简单的 jqGrid 工作。

[我从http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)复制了代码 并放到了一个html文件中，然后用firefox打开，但是网格无法成功加载数据

这是html：

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="http://www.trirand.com/blog/jqgrid/themes/redmond/jquery-ui-1.8.1.custom.css"/>
    <link rel="stylesheet" type="text/css" href="http://www.trirand.com/blog/jqgrid/themes/ui.jqgrid.css"/>
    <script type="text/javascript" src="http://www.trirand.com/blog/jqgrid/js/jquery.js"></script>
        <script type="text/javascript" src="http://www.trirand.com/blog/jqgrid/js/jquery-ui-1.8.1.custom.min.js"></script>

        <script type="text/javascript" src="http://www.trirand.com/blog/jqgrid/js/jquery.layout.js"></script>
        <script type="text/javascript" src="http://www.trirand.com/blog/jqgrid/js/i18n/grid.locale-en.js"></script>
        <script type="text/javascript" src="http://www.trirand.com/blog/jqgrid/js/ui.multiselect.js"></script>
        <script type="text/javascript" src="http://www.trirand.com/blog/jqgrid/js/jquery.jqGrid.min.js"></script>
        <script type="text/javascript" src="http://www.trirand.com/blog/jqgrid/js/jquery.tablednd.js"></script>
        <script type="text/javascript" src="http://www.trirand.com/blog/jqgrid/js/jquery.contextmenu.js"></script>
    </head>
<body>
    <table id="list2">
        </table><div id="pager2"></div>
</body>
<script type="text/javascript">
    jQuery("#list2").jqGrid({
    url:'http://www.trirand.com/blog/jqgrid/server.php?q=2',
    datatype: "json",
    colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
    colModel:[
        {name:'id',index:'id', width:55},
        {name:'invdate',index:'invdate', width:90},
        {name:'name',index:'name asc, invdate', width:100},
        {name:'amount',index:'amount', width:80, align:"right"},
        {name:'tax',index:'tax', width:80, align:"right"},      
        {name:'total',index:'total', width:80,align:"right"},       
        {name:'note',index:'note', width:150, sortable:false}       
    ],
    rowNum:10,
    rowList:[10,20,30],
    pager: '#pager2',
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    caption:"JSON Example"
});
jQuery("#list2").jqGrid('navGrid','#pager2',{edit:false,add:false,del:false});

</script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:23:28.840

您发布的代码有很多问题。

第一个是您使用`url:'http://www.trirand.com/blog/jqgrid/server.php?q=2'`的**错误**。您可以在 Web 浏览器中打开 URL 并查看结果，但您不能在 Ajax 请求中使用它，因为称为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的重要安全限制。*您只能从他自己的网站获取 JSON 数据*。因此，您可以例如将返回的数据保存`url:'http://www.trirand.com/blog/jqgrid/server.php?q=2'`在类似的文件中`my.json`并使用`url: 'my.json'`. 在这种情况下，您的代码将起作用。

下一个问题是您必须在`<!DOCTYPE html ...`之前包含某种形式的语句`<html>`。真的很重要！！！如果您不这样做，那么 Web 浏览器将尝试在 Internet Explorer 浏览器中模拟非常旧的浏览器（如 IE5）的行为。这种模式的名称为[quirks mode](http://en.wikipedia.org/wiki/Quirks_mode)。

下一个问题是您的代码不包含任何 HTML 标准，因为您`<script>`在`<body>`. [我建议您在像这样](http://validator.w3.org/)的一些 HTML 验证器中验证您的页面。

将 JavaScript 代码放在`$(function(){/*place code here*/});`. 有关更多详细信息，请参阅[jQuery.ready](http://api.jquery.com/ready/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:12:59.807

您正在调用的 URL

[http://www.trirand.com/blog/jqgrid/server.php?q=2](http://www.trirand.com/blog/jqgrid/server.php?q=2)

正在返回一个错误：

> 警告：第 145 行 /home/trirand/public_html/blog/jqgrid/server.php 中除以零无法执行查询。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

您需要先让数据查询工作:-)

可能还值得处理加载错误，以便在出现问题时显示有意义的错误消息。这里有一个完整的讨论：

[如何让 JQGrid 识别服务器发送的错误？](https://stackoverflow.com/questions/1636580/how-can-i-get-jqgrid-to-recognize-server-sent-errors)

# ruby - 如何在 ruby 类中获取（和设置）变量？

> ID：11026144
> 
> 赞同：0
> 
> 时间：2012-06-14T03:09:23.597
> 
> 标签：ruby, class

我更新了这个问题，以更好地反映我需要掌握的问题。下面的例子有点工作，但是我如何访问 Sub 类，然后我在 Base 类中定义了它？在课外打电话不是更好吗？如果是这样，我该怎么做？在这个例子中我遇到的第二个问题是如何获取值以便我可以在另一个类中使用它们。在这里，我将值存储在一个数组中，稍后我需要在另一个类中解包。我应该不能为此使用 proc 吗？

基本上我想要做的是根据它们是否嵌套将方法分类为两个不同的类。

```
class Sub 

  def initialize(base_class_method)
     @base_class_method = base_class_method
     @sub_methods = []
  end

   # omitted code here

  def base_class_method
     @base_class_method
  end

  def sub_actions(method)
     @sub_methods << method
  end

  def return_sub_methods
    @sub_methods
  end

  def method_missing(sub_method, &block)
    if sub_method
      sub_method
    else
      super
    end
  end
end

class Base

  def initialize
    @base_methods = []
  end

  # omitted code here

  def base_actions(method)
    @base_methods << method
  end

  def return_base_methods
    @base_methods
  end

  def method_missing(method, &block)
    if block_given?
      Sub.new(method).instance_eval(&block)
    elsif method
    base_actions(method)
    else
      super
    end
  end
end

base = Base.new
base.instance_eval do
  something1
  something_with_a_block do
    something_inside_block1_1
    something_inside_block1_2
  end
  something2
  something_with_a_block2_2 do
  something_inside_block2_1
  end
end

p base.return_base_methods   #=> [:something1, :something2]   works! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:28:18.377

你可以做这样的事情。

```
class Test
  # reserved method to instantiate object
  def initialize(a,b,c)
    @a = a
    @b = b
    @c = c
  end

  # getters
  def a
    @a
  end

  def b
    @b
  end

  def c
    @c
  end

  def abc
    [@a, @b, @c] # returns an array
  end

  # setters
  def a=(var)
    @a = var
  end

  def b=(var)
    @b = var
  end

  def c=(var)
    @c = var
  end

  # set values all at once
  def update(a, b, c)
    @a = a
    @b = b
    @c = c
  end
end

z = Test.new('something','something','something')
z.update('something!','nothing!',"a thing!")
z.a
z.b
z.c
z.a = 'wow, new value!' 
```

# ios - 处理 NSMutableArray 保留属性的正确内存管理

> ID：11026151
> 
> 赞同：0
> 
> 时间：2012-06-14T03:10:55.500
> 
> 标签：ios, memory-management, properties

我想知道我是否正确管理数组的内存。下面我将这个数组与 tableView 一起使用，所以我想在 ViewController 的生命周期中保留它。因为我将它创建为一个属性，所以我对保留计数以及如何处理它有点困惑，因为我在代码中分配了它。以下是我目前对其进行编码的方式。

在.h

```
@property (nonatomic, retain) NSMutableArray *mutableArray; 
```

米

```
self.mutableArray = [NSMutableArray alloc] init];

//fill with object I'm going to be using throughout the life of the viewController

- (void) dealloc {
   [mutableArray release];
   [super dealloc];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:17:20.973

如果你这样做，你会泄漏你的数组。因为您的属性设置为保留，`self.mutableArray = [[NSMutableArray alloc] init];`所以与`mutableArray = [[[NSMutableArray alloc] init] retain];`.

所以改成

```
self.mutableArray = [NSMutableArray array]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:20:02.693

iOS 会自己做内存管理。这是[Apple Arc 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。[Mikeash Friday Q&A 博客](http://mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)中还有一个关于内存管理的极好简明信息

# javascript - 如何检测用户是否在 PHP 中离开页面

> ID：11026152
> 
> 赞同：7
> 
> 时间：2012-06-14T03:11:04.563
> 
> 标签：javascript

如果用户离开特定页面，我想执行此功能。这个函数基本上会改变我数据库中某个列中的所有数据。因此，如果用户离开此页面，我希望此功能由系统执行。有没有办法检测用户是否已经离开页面。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T03:13:09.720

100% 的可靠性，不，这是不可能的。由于离开特定页面是客户端操作，因此您无法控制客户端的操作。您可以通过 Javascript 注册一个`onbeforeunload`处理程序，并希望客户端浏览器支持它。但同样，对此的支持并不普遍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T03:15:36.917

您不能在 php 中执行此操作，但您可以使用 javascript 函数 onbeforeunload，这里是一个[示例](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)

```
<script type="text/javascript">
  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
    return "You have attempted to leave this page.  If you have made any changes to the fields without clicking the Save button, your changes will be lost.  Are you sure you want to exit this page?";
  }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T03:12:53.970

使用 PHP 无法做到这一点，因为它是一种服务器端语言。您将需要使用 JavaScript。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T03:18:02.507

由于服务器端 php 只运行服务器脚本，然后将结果发送到浏览器，因此您不能单独使用 php 执行此操作。您可以使用 javascript 使用 onunload 事件向您的 php 脚本发送 ajax 请求，然后运行 ​​php 脚本以响应该请求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-03T08:34:11.150

为了涵盖用户离开特定页面以导航到同一网站内的另一个页面的情况，您可以尝试使用页面 ID 来实现这一点，将“page_to_be_left”的 ID 存储在会话变量中，并检查当前页面是否ID 与会话变量中存储的 ID 匹配。如果没有匹配项，则可以触发您的函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-26T15:12:14.007

您需要使用javascript函数onbeforeunload

# javascript - 我怎样才能在 twitter 引导程序中只显示一次模式？

> ID：11026153
> 
> 赞同：5
> 
> 时间：2012-06-14T03:11:22.270
> 
> 标签：javascript, twitter-bootstrap

这是我现在的代码：

```
<script type="text/javascript">
        $(document).ready(function() {

            if($.cookie('msg') == 0)
            {
                $('#myModal').modal('show');
                $.cookie('msg', 1);
            }

        });
</script> 
```

在页面加载模型显示但当我刷新它一直显示它应该只显示一次。$.cookie 来自[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

更新：

这行得通：“隐藏”由于某种原因不起作用

```
<script type="text/javascript">
        $(document).ready(function() {
            if($.cookie('msg') == null)
            {
                $('#myModal').modal('show');
                $.cookie('msg', 'str');
            }
            else
            {
                $("div#myModal.modal").css('display','none');
            }

        });

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T17:19:20.967

@SarmenB 的更新适用于大多数浏览器（FF、IE9），但不适用于 IE8。

我修改了他更新的解决方案，让它在 IE8 中工作......

这是@SarmenB 的解决方案：

```
<script type="text/javascript">
    $(document).ready(function() {
        if($.cookie('msg') == null)
        {
            $('#myModal').modal('show');
            $.cookie('msg', 'str');
        }
        else
        {
            $("div#myModal.modal").css('display','none');
        }
    });
</script> 
```

这是我想出的修改后的解决方案，它也**适用于 IE8**：

```
<script type="text/javascript">
    $(document).ready(function() {
        if($.cookie('msg') != null && $.cookie('msg') != "")
        {
            $("div#myModal.modal, .modal-backdrop").hide();
        }
        else
        {
            $('#myModal').modal('show');
            $.cookie('msg', 'str');
        }
    });
</script> 
```

基本上为了让它在 IE8 中工作，我不得不反转 if/else 语句中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:19:22.143

从库的外观来看，该值应该是一个字符串。尝试：

```
<script type="text/javascript">
        $(document).ready(function() {

            if($.cookie('msg') == null)
            {
                $('#myModal').modal('show');
                $.cookie('msg', '1');
            }

        });
</script> 
```

# sql-server - 复制表数据并填充新列

> ID：11026162
> 
> 赞同：1
> 
> 时间：2012-06-14T03:12:25.670
> 
> 标签：sql-server, sql-server-2008, tsql, ssms

所以我试图将一些数据从数据库表复制到另一个。但问题是，目标数据库表有 2 个新列是必需的。我想在 SQL Server Management Studio 上使用导出/导入向导，但如果我使用它，我需要为每个表编写一个查询，并且一次只能执行 1 个查询。想知道是否有更有效的方法。

这是 1 个表的示例：

```
dbase1.dbo.Appointment { id, name, description, createdate }
dbase2.dbo.Appointment { id, name, description, createdate, auditby, auditat} 
```

我总共有 8 个表，其中有 2 个附加列。并且它们中的大多数通过 fk 相互关联，所以我想使用向导来确定首先插入哪个表。问题在于，它仅在我执行“从一个或多个表中复制数据”而不是“编写查询以指定数据”时才有效（我使用它来填充这两个新列）。

我在复制数据时一直在执行这个非常缓慢的过程，因为我在我的应用程序中使用 MVC Code First，并且我无法访问服务器以便能够在闲暇时删除和创建表。所以我不得不求助于这个来维护我已经拥有的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:27:48.447

一个想法：暂时禁用目标数据库中的外键约束。然后，您运行插入的顺序无关紧要。为了填充两个新的和必需的列，您只需要选择一些股票值放入其中（因为显然这些行最初不受初始审计的影响）。例如：

```
INSERT dbase2.dbo.appointment
(id, name, description, createdate, auditby, auditat)
  SELECT id, name, description, createdate, 
    auditby = 'me', auditat = GETDATE()
  FROM dbo.appointment; 
```

由于挑战似乎仅仅是目标需要不在源中的列，并且您需要确定应该在这些审计列中填充什么，这似乎可以同时解决多个问题。你只需要弄清楚要放什么而不是`'me'`and `GETDATE()`。

（要让向导为您提取这 8 个表，您可能可以创建一个类似于上述查询的选择部分的视图，但这需要更多的工作，并且它不会看到在无论如何都是正确的顺序。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:30:57.973

`Default values`为这两列设置

喜欢 AuditAt - 默认日期，即`GetDate()` AuditBy - 人员 ID/姓名

现在，您可以在不输入这两列的情况下插入这些表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T03:19:34.217

按照您想要的顺序为每个插入进程编写 sql 查询。那将是最简单的方法。

# mysql - MySQL Pad 空月在汇总报告中。（那里的3/4）

> ID：11026166
> 
> 赞同：3
> 
> 时间：2012-06-14T03:13:28.527
> 
> 标签：mysql, sql

这个问题来自：[MySQL Number of Days inside a DateRange, inside a month (Booking Table)](https://stackoverflow.com/questions/10528237/mysql-number-of-days-inside-a-daterange-inside-a-month-booking-table)

我有一个包含以下数据的表：

```
CREATE TABLE IF NOT EXISTS `bookingdata` (
`idBookingData` int(11) NOT NULL AUTO_INCREMENT,
`PropertyID` int(10) NOT NULL,
`Checkin` date DEFAULT NULL,
`Checkout` date DEFAULT NULL,
`Rent` decimal(10,2) DEFAULT NULL,
`BookingID` int(11) DEFAULT NULL,
PRIMARY KEY (`idBookingData`),
UNIQUE KEY `idBookingData_UNIQUE` (`idBookingData`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=10472 ;

INSERT INTO `bookingdata` (`idBookingData`, `PropertyID`, `Checkin`, `Checkout`, `Rent`, `BookingID`) VALUES
(5148, 2, '2011-07-02', '2011-07-05', 1105.00, 10612),
(5149, 2, '2011-07-05', '2011-07-13', 2155.00, 10184),
(5151, 2, '2011-07-14', '2011-07-17', 1105.00, 11102),
(5153, 2, '2011-07-22', '2011-07-24', 930.00, 14256),
(5154, 2, '2011-07-24', '2011-08-04', 1832.73, 9216),
(5907, 2, '2011-07-24', '2011-08-04', 687.27, 9216),
(5910, 2, '2011-08-11', '2011-08-14', 1140.00, 13633),
(5911, 2, '2011-08-15', '2011-08-16', 380.00, 17770),
(5915, 2, '2011-08-25', '2011-08-29', 1350.00, 17719),
(5916, 2, '2011-08-30', '2011-09-01', 740.00, 16813); 
```

然后我有这个 SQL 查询：

```
SELECT   
    YEAR(month.d),
    MONTHNAME(month.d),
    IFNULL(SUM(
           DATEDIFF(LEAST(Checkout, LAST_DAY(month.d)), GREATEST(Checkin, month.d))
    ),'0') AS Days
FROM    bookingdata
RIGHT JOIN (
        SELECT 20110101 AS d
        UNION ALL SELECT 20110201 UNION ALL SELECT 20110301
        UNION ALL SELECT 20110401 UNION ALL SELECT 20110501
        UNION ALL SELECT 20110601 UNION ALL SELECT 20110701
        UNION ALL SELECT 20110801 UNION ALL SELECT 20110901
        UNION ALL SELECT 20111001 UNION ALL SELECT 20111101
        UNION ALL SELECT 20111201
        ) AS month ON (
            Checkin BETWEEN month.d AND LAST_DAY(month.d) OR month.d BETWEEN Checkin AND Checkout
        )
WHERE  PropertyID = "Mount Olive" 
GROUP BY month.d 
```

并输出以下内容：

```
+-------------+-------------------+------+
|YEAR(MONTH.D)| MONTHNAME(MONTH.D)| DAYS |
+-------------+-------------------+------+
|2011         | July              | 30   |
|2011         | August            | 15   |
|2011         | September         |  0   |
+-------------+-------------------+------+ 
```

虽然我希望它创建以下内容（使用填充的空值）：

```
+-------------+-------------------+------+
|YEAR(MONTH.D)| MONTHNAME(MONTH.D)| DAYS |
+-------------+-------------------+------+
|2011         | January           | 0    |
|2011         | Feburary          | 0    |
|2011         | March             | 0    |
|2011         | April             | 0    |
|2011         | May               | 0    |
|2011         | June              | 0    |
|2011         | July              | 30   |
|2011         | August            | 15   |
|2011         | September         |  0   |
|2011         | October           | 0    |
|2011         | Novemeber         | 0    |
|2011         | December          | 0    |
+-------------+-------------------+------+ 
```

我需要添加什么才能做到这一点？这是在 SQL Fiddle 上：[http ://sqlfiddle.com/#!2/c6bdc/2/0](http://sqlfiddle.com/#!2/c6bdc/2/0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:00:13.050

它连接正确——正确的连接是完全正确的。问题是你过滤掉了你的结果。在右侧（月份）与左侧（预订）不匹配的行上，左侧的字段（包括 propertyId）将为 NULL。NULL 不是“2”或“Mount Olive”，因此该行被排除在外。

检查 PropertyId 时，使用 IFNULL/COALESCE：

```
WHERE  COALESCE(PropertyID, "Mount Olive") = "Mount Olive" 
```

或者使条件复合：WHERE PropertyID is NULL or PropertyID = "Mount Olive"

小提琴： [http ://sqlfiddle.com/#!2/c6bdc/4/0](http://sqlfiddle.com/#!2/c6bdc/4/0)

# python - 间隔重叠大小

> ID：11026167
> 
> 赞同：0
> 
> 时间：2012-06-14T03:14:17.527
> 
> 标签：python, math, intervals

Python中计算间隔重叠大小的最简洁方法是什么？

`overlap([a, b], [c, d])`如果间隔相同，则应返回 0，当它们重叠但不相同时返回 N（其中 N 是重叠），如果它们不重叠，则返回 None。

谢谢。

*编辑*：`overlap`具有误导性，我的意思是间隔不重叠的大小。所以 0 是它们是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:29:20.623

它并没有比 sjr 链接的问题中接受的答案更简洁，但是：

```
def overlap(a,b,c,d):
    r = 0 if a==c and b==d else min(b,d)-max(a,c)
    if r>=0: return r 
```

根据需要，对于相同的间隔也将返回 0，对于不重叠的间隔也将返回 None。

# visual-studio - VSHost 崩溃，REGDB_E_INVALIDVALUE 加载特定项目

> ID：11026168
> 
> 赞同：6
> 
> 时间：2012-06-14T03:14:20.273
> 
> 标签：visual-studio, debugging, comexception, vshost32

每当我在 Visual Studio 中加载一个将特定项目设置为启动项目的解决方案时，我都会遇到 VSHost32.exe 崩溃。如果我继续运行并启动应用程序，我会收到 COMException：

```
{"Invalid value for registry (Exception from HRESULT: 0x80040153 (REGDB_E_INVALIDVALUE))"} 
```

使用堆栈跟踪：

```
at System.Runtime.InteropServices.RuntimeEnvironment.GetDeveloperPath()
at System.AppDomain.SetupFusionStore(AppDomainSetup info)
at System.AppDomain.SetupDomain(Boolean allowRedirects, String path, String configFile) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T03:14:21.037

当项目的配置文件设置了 developmentMode，但机器没有设置 devPath 时，可能会发生这种情况。

```
<runtime>
    <developmentMode developerInstallation="true"/>
</runtime> 
```

删除它将修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-30T21:11:34.887

导航到 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\machine.config 并从您的机器配置中删除以下设置

<developmentModedeveloperinstallation=”true”/>

# python - 如何使用 SQLAlchem 获取除 NULL 之外的值？

> ID：11026171
> 
> 赞同：0
> 
> 时间：2012-06-14T03:14:34.827
> 
> 标签：python, sqlalchemy

我想获取除 NULL 之外的值。这是一个例子。

```
from sqlalchemy import select
select([table]).execute().fetchone()
 -> ('1', 'some value', 'some value', None, None) 
```

我不想得到`None`。除了 NULL 有什么方法可以获取值吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:59:47.957

默认情况下，它会返回所有列。您应该只选择要避免额外的 NULL/None 值的列。

[文档对此](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html#sqlalchemy.sql.expression.select)有更多信息。由于您正在传递整个表格，因此您将获得所有列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:20:36.227

SQL 的一个基本特性是查询为每一行返回相同数量的列，因此无法根据 SQL 端的某些每行条件*不返回列。*SQLAlchemy 只是遵循这个逻辑。

如果要从 SQLAlchemy 返回的数据中排除 None 值，可以在 Python 中执行：

```
def no_nulls(row):
    return [column for column in row if column is not None]

no_nulls(select([table]).execute().fetchone())
 -> ('1', 'some value', 'some value') 
```

如果某列在某些行中为 NULL，但在其他行中不为 NULL，则此方法可能会为不同的行返回不同数量的元素。

# event-handling - 我希望 SSIS 捕获错误，分支然后成功退出

> ID：11026174
> 
> 赞同：1
> 
> 时间：2012-06-14T03:14:46.247
> 
> 标签：event-handling, ssis

我已经四处搜索，并认为我已经尝试了几乎所有我看到的建议，但我似乎无法让它以我想要的方式工作。我确信 SSIS 可以做到这一点。

我有一个包含 4 个任务的 SSIS 包，它们按顺序执行：任务 A，然后是 B，然后是 C。如果 B 失败，DI 将使用第 4 个任务作为终点……稍后会详细介绍。

任务 A 做了一些不相关的工作。我包含它是因为在包的开头有处理，如果其中任何一个失败，那么我希望包失败 - 只是 SSIS 默认值，如果任务 A 失败，则以 1 的返回码退出包。

B 是具有平面文件源的 DFT，它传输要在步骤 C 中处理的数据。 B 是我问题的症结所在，因为我想以不同于其他方式处理任务 B 中的错误。平面文件源不存在或损坏并不少见，我想捕获/捕获它但不会导致整个包失败。如果 B 确实有错误，我不想处理任务 C。

当B没有错误时，C处理我在DFT B中传输的数据。

我使用“OnError”事件处理程序捕获 DFT-B 中的错误，该事件处理程序执行发送电子邮件的 SQL 任务。然后，我使用“完成时”优先约束将控制流转移到端点 - 任务 D。（D 什么都不做，它只是一个虚拟端点，我部分用于调试，部分用于在某处提供事件处理程序“去”——我不确定是否需要 D）。

无论如何，当我运行包并在 B 中触发错误时，我的包执行事件处理程序（发送电子邮件就好了），它甚至继续执行任务“D”，在调试器中，“D”以成功结束（显示绿色）。问题是，我的包失败，退出代码为“1”。

我试过搞乱各种事情...... ForceExecutionValue/ForceExecutionResult/MaximumErrorcount。现在我有一个包实际上甚至没有继续我的“任务 D”，我不确定我是如何到达那里的（但异常处理程序 SQL 忠实地向我发送了一封电子邮件！）。

我不希望退出代码为 1！我要0！

帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:25:10.447

你有没有尝试过这样的事情：

![条件流](../Images/1bbb61dba050be6a12372088bdc32203.png)

要获得过渡线上的不同条件，只需双击您要编辑的线。红线表示前一个任务失败时的控制流

**编辑：**我相信我误读了这个问题！据我所知，您已经可以按预期控制流程。您的问题与退出代码有关。您是否尝试`propagate`在事件处理程序屏幕中将变量设置为 false？

检查以下链接以获取更多信息： [http ://simonworth.wordpress.com/2009/11/11/ssis-event-handler-variables-propagate/](http://simonworth.wordpress.com/2009/11/11/ssis-event-handler-variables-propagate/)

# https - Nginx 如何支持 http 和 https 后端应用程序？

> ID：11026179
> 
> 赞同：0
> 
> 时间：2012-06-14T03:16:05.490
> 
> 标签：https, nginx, glassfish

![在此处输入图像描述](../Images/f642c35ae93414bf5c7738781135b9a5.png)

有人对这种架构有经验吗？
注意：1.11 上的 GalssFish2.x 本身支持 SSL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:24:05.047

您可以简单地定义多个单独的上游服务器并基于`location`块代理它们。

```
http {
    upstream backend1 {
        server 1.2.3.4:80;
    }
    upstream backend2 {
        server 5.6.7.8:80;
    }

    server {
        [...]
        location / {
            proxy_pass http://backend1;
        }

        location /flow {
            proxy_pass https://backend2;
        }
    }
} 
```

当然，这个例子被简化了很多。查看[wiki](http://wiki.nginx.org/Modules)和[文档](http://nginx.org/en/docs/)。

# c - 函数内的函数

> ID：11026183
> 
> 赞同：0
> 
> 时间：2012-06-14T03:16:34.657
> 
> 标签：c, macros, inline

如果我做：

```
void foo() {
    if( .. ) {
      inline int baa(..) { return .. }
    } else {
      inline int baa(..) { return .. }
    }

} 
```

并调用：我得到的`baa(..)`内部`foo`函数`implicit declaration of 'baa'`。但是如果我做原型声明：`inline int baa(int);`错误是`inline function 'baa' declared but never defined`. 我正在使用内联函数来替换宏函数。

如何解决这个问题？

**编辑** 得更好：有人可以解释为什么编译器声称上述错误消息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T03:19:14.093

> 我正在使用内联函数来替换宏函数。

你不能在函数内部*定义*函数，你只能*声明*它们。声明它们会使它们的名称在该范围内可见，但这些函数仍然需要在某个地方定义，而且我们知道我们不能在另一个函数中定义它们。这就是编译器说该函数已*声明*但从*未定义*的原因。

相反，只需在全局范围内*声明*您的函数。`inline`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:21:59.300

虽然它不是标准的一部分，但您可以使用标志进行编译`-fnested-functions`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:32:09.747

K-ballo的建议确实看起来最好，但他并没有真正指出问题所在。

在块中定义的嵌套函数仅在块内有效。就像一个正常的变量。您在子句中定义一个函数，在`if`子句中定义另一个函数`else`，并且每个函数在该子句中都是有效的。`if-else`但是在关闭后两者都无效。

与变量完全相同：

```
if (a) {
    int x = 3;
} else {
    int x = 4;
}
// x isn't valid here. 
```

# cakephp - 在 Windows/IIS 上使用 CakePHP 安装 PHPUnit

> ID：11026191
> 
> 赞同：0
> 
> 时间：2012-06-14T03:17:51.113
> 
> 标签：cakephp, phpunit, cakephp-2.0, pear

我按照 CakePHP 2.x（通过 test.php）给出的说明安装 PHPUnit：

```
pear channel-discover pear.phpunit.de
pear channel-discover components.ez.no
pear channel-discover pear.symfony-project.com
pear install phpunit/PHPUnit-3.6.4 
```

这一切似乎都成功完成了，但 test.php 仍然说`PHPUnit is not installed!`

它还说要验证 PHPUnit 是否在 php.ini 的 include_path 中。我不确定哪个路径应该在 include_path 中。我当前的 include_path 是：

`include_path=".;C:\Program Files (x86)\PHP\v5.3\PEAR\pear;C:\Program Files (x86)\PHP\v5.3\pear"`

我没有看到 PHPUnit 文件夹或类似的东西，`PHPUnit-3.5.14.tar`尽管`C:\Program Files (x86)\PHP\v5.3\PEAR\`. 我对 PEAR 很陌生，所以很容易出现根本问题。

我还尝试在运行 PEAR 命令后重新启动 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:51:04.887

这是几个因素的结合。

我的 PEAR 版本过时了，所以我安装了最新的。contrebis 的评论也是一个因素，更新了 CakePHP 文档。最后，我在安装 PHPUnit 时遇到了[这个问题。](https://stackoverflow.com/questions/2006626/installing-phpunit-via-pear)毕竟，更新了 php.ini 的 include_path，我得到了它的工作。

# arrays - Bash 数组：意外的语法错误

> ID：11026192
> 
> 赞同：20
> 
> 时间：2012-06-14T03:17:54.460
> 
> 标签：arrays, bash, shell, syntax

我正在编写这个简单的 bash 脚本，如下所示。

```
#!/bin/bash

array=( /home/abc/Downloads/something.bat /home/abc/Downloads/smb.conf )
echo ${array[@]} 
```

我希望它打印数组中所有文件的名称。但我得到了这个错误：

```
test.sh: 3: Syntax error: "(" unexpected 
```

如果我将数组的声明更改为

```
array = {/home/abc/Downloads/something.bat /home/abc/Downloads/smb.conf} 
```

这个错误消失了，但我仍然有新的错误

```
test.sh: 3: array: not found
test.sh: 4: Bad substitution 
```

我该如何解决这个问题？这是我第一次使用 shell 编程，所以我无法自己解决问题。

解决：

我将它作为 sh test.sh 执行，但我忘记了我必须将它作为**bash test.sh执行**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T03:22:15.377

变量赋值不能在`=`符号周围有空格：

```
array=( /a/b/  /c/d )
     ^--no spaces 
```

* * *

你确定吗？

```
marc@panic:~$ array =(a b)      
bash: syntax error near unexpected token `('
marc@panic:~$ array= (a b)  
bash: syntax error near unexpected token `('
marc@panic:~$ array = (a b)
bash: syntax error near unexpected token `('
marc@panic:~$ array=(a b)  
marc@panic:~$ echo ${array[1]}
b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T03:30:36.553

指针：空格对于 BASH 中的变量赋值很重要。不要在等号**之前**或**之后使用它们。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T03:42:47.853

您是否使用 DOS 编辑器来创建脚本？

Bash 等 shell，不喜欢 CRLF 对，只喜欢 LF（或`\r\n`字符 VS 只是普通`\n`字符）。

把你的脚本通过这个测试

```
cat -vet myScript.sh 
```

你在行尾看到'^M'字符吗？如果是这样，那是一个dos文件。

查看您的系统是否有 dos2unix 然后像使用它一样使用它

```
dos2unix myScript.sh 
```

此外，正如一些人对此发表评论的那样，请编辑您的原始问题，以消除`=`作业中您的标志周围的空格`array`。

我希望这有帮助。

# java - java.lang.UnsatisfiedLinkError：java6 中的 java.library.path 中没有 j2pkcs11

> ID：11026196
> 
> 赞同：1
> 
> 时间：2012-06-14T03:18:51.097
> 
> 标签：java, keystore, e-token

我正在尝试使用我编写的 java 应用程序使用 eToken 对 pdf 文件进行签名。我正在使用带有 java 6.0.30 的 Windows 7 64 位版本。

当我运行应用程序时，我得到一个异常说

```
Exception in thread "signer" java.lang.UnsatisfiedLinkError: no j2pkcs11 in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1028)
    at sun.security.pkcs11.wrapper.PKCS11$1.run(PKCS11.java:88)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.security.pkcs11.wrapper.PKCS11.<clinit>(PKCS11.java:86)
    at sun.security.pkcs11.SunPKCS11.<init>(SunPKCS11.java:281)
    at sun.security.pkcs11.SunPKCS11.<init>(SunPKCS11.java:90)
    at com.greytip.cougar.pdfsigner.PdfSigner.getProvider(PdfSigner.java:364) 
```

但是当我查找该`j2pkcs11.dll`文件时，该文件对 jdk 1.5 可用，但在我的 jdk 1.6 64 位中不可用。

是否与 java 安全策略有关，因为异常正在进入`AccessController`，即 dll 在 Windows 7 内的受保护目录中？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T06:34:31.820

看起来 pkcs11 没有在任何 64 位版本的 java 中实现。它仅在 32 位版本中可用。

所以我打算安装一个 32 位版本的 java 并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T13:14:11.707

我有类似的问题并在 jre-8u31-windows-x64 上测试了签名代码并取得了成功。所以我建议使用这个java版本。在我的场景中，我必须为一个名为 e-defter 的政府应用程序签署一个大小约为 196MB 的 xml 文件。要签署这个文件，java 需要大约 3GB 的内存（HEAP）。我可以用 64 位 java 获得这个内存。

# spring - EclipseLink/JPA 和多个具有相似结构的数据库

> ID：11026199
> 
> 赞同：0
> 
> 时间：2012-06-14T03:18:59.943
> 
> 标签：spring, jpa, eclipselink, ddl

由于我无法控制的决定，我有两个几乎是克隆的现有数据库。

“几乎”，因为 #1 中的表/列在 #2 中不存在，反之亦然。

这里最好的方法是什么？

“蛮力”路线似乎是“为一个创建所有实体，复制到新包并为第二个数据库添加/删除”。这不是我真正想走的路线。

哦，绝对不允许 JPA 更改任一数据库中的模式。

除了 EclipseLink，我还使用 Spring 3.1 和 SpringData。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:42:54.173

您可能想查看 EclipseLink 的可扩展性支持。

您可以将属性映射添加到类中，并使用 orm.xml 将其他数据库中的附加属性映射到此映射中。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Extensible_Entities](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Extensible_Entities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:24:14.647

如果您的数据库不同，您需要制作不同的类/映射。例如，如果您`Foo`在两个数据库中都有一个表，该表在 db1 ( `id`, `baz`, `pleh`) 中有 3 列，在 db2 ( `id`, `baz`, `qux`) 中有 3 个其他列，则不能这样做：

```
@Entity
public class Foo
{
    @Column(name = "id")
    private Long id;
    @Column(name = "baz")
    private String baz;
    @Column(name = "pleh")
    private String pleh;
    @Column(name = "qux")
    private String qux;
} 
```

这样做会导致异常，因为 JPA 将生成插入语句，例如：

```
insert into Foo (id, baz, pleh, qux) values (?, ?, ?, ?) 
```

对于 DB1，您需要`Foo`像这样创建一个类：

```
@Entity
public class Foo
{
    @Column(name = "id")
    private Long id;
    @Column(name = "baz")
    private String baz;
    @Column(name = "pleh")
    private String pleh;
} 
```

对于这样的 DB2：

```
@Entity
public class Foo
{
    @Column(name = "id")
    private Long id;
    @Column(name = "baz")
    private String baz;
    @Column(name = "qux")
    private String qux;
} 
```

# html - 使用 CSS3/HTML5 旋转文本

> ID：11026200
> 
> 赞同：7
> 
> 时间：2012-06-14T03:19:00.257
> 
> 标签：html, css, css-transitions

我有一个`<span>`我想旋转的。我正在使用 HTML5、CSS3 和 Internet Explorer 9。

我尝试了下面的 CSS，但它不起作用：

```
-webkit-transform: rotate(-90deg); 
-moz-transform: rotate(-90deg); 
```

如何旋转跨度？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T03:21:26.750

`-webkit-`和`-moz-`属性分别适用于 webkit 浏览器（Chrome、Safari）和 Gecko 浏览器（Firefox）。

您还需要对 IE 使用等效项。

```
.rotate {

/* Safari, Chrome */
-webkit-transform: rotate(-90deg);

/* Firefox */
-moz-transform: rotate(-90deg);

/* IE */
-ms-transform: rotate(-90deg);

/* Opera */
-o-transform: rotate(-90deg);

/* Older versions of IE */
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);

/* CSS3 standard as defined here: http://www.w3.org/TR/css3-transforms/ */
transform: rotate(-90deg);

} 
```

[来源](http://css-tricks.com/snippets/css/text-rotation/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T03:21:55.120

尝试`-ms-transform: rotate(-90deg);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-24T01:16:39.457

内联元素不能旋转。您必须将它们显示为块级别。

# python - 我正在使用 excel 构建网站 - 寻找替代方案

> ID：11026205
> 
> 赞同：5
> 
> 时间：2012-06-14T03:19:24.080
> 
> 标签：python, mysql, html

我目前正在连接 excel 中的相邻单元格以重复常见的 HTML 元素和 div - 感觉就像我在开发我的网页时走上了一条奇怪的 excel 路径，我想知道是否有经验的网页设计师可以让我知道我可能使用更传统的方法（旨在使用 python 和 mysql）完成我的站点目标。

1.  我的网站上有大约 40 张图片。在这个页面上，我想看到它们都排成一个网格，所以我在每一行有三个彼此相邻的 div，都向左浮动。

2.  我没有手动输入每行图像所需的所有代码，而是开始将代码的重复部分与代码的不同部分连接起来。我采用了四个 div 类并分离了需要为每个图像更改的代码（src="XXX" 和

    “XXX”）。

例子：

```
>  Column D               Column E             Column F     
>  '1  <div> <img src="   filename.jpg         "></div>' 
```

生成我的 HTML 的公式如下所示：

= D1 & E1 & F1

我确信使用为我的每个图像保存的文件路径和属性创建一个 MySQL 数据库会更容易，因此我可以使用脚本语言查看数据。任何人都可以提供他们的建议或快速脚本来自动生成 html 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T03:23:28.457

哇，听起来真的很痛苦。

如果您只有 40 张要为其生成 HTML 的图像，而站点的其余部分是静态的，那么最简单的方法可能是拥有一个文本文件，每行包含一个图像文件路径。然后，使用 Python 查看每一行，生成适当的 HTML 并将其连接起来。

如果您的站点有更复杂的交互要求，那么 Django 可能是您的最佳选择。Django 是一个很棒的 Python Web 应用程序框架，它支持 MySQL，以及许多不同的数据库后端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:34:02.893

您可以将这些并且仅这些图像保留在它们自己的目录中，然后使用简单的 shell 脚本来生成该部分的静态 html。

假设您已经将文件放置到位，可能是这样的：

```
cp <all_teh_kitteh_images> images/grid 
```

此命令将生成 html

```
for file in images/grid/*.jpg ; do echo "<div><img src=\"$file\"></div>" ; done 
```

哦，对不起，我错过了你问题的 python 部分（IMO MySQL 是矫枉过正，你没有关系，不要使用关系数据库）这在 python 中是一样的。

```
import glob
for file in glob.glob('images/grid/*.jpg'):
    print "<div><img src=\"%s\"></div>" % file 
```

# cassandra - 如何将 CQL 3.0 与 JDBC 驱动程序或 Hector 一起使用

> ID：11026207
> 
> 赞同：1
> 
> 时间：2012-06-14T03:19:36.847
> 
> 标签：cassandra

我正在使用 cassandra 1.1.1。但是，每当我使用复合键创建列族时，都会出现如下错误，

```
java.sql.SQLSyntaxErrorException: line 1:117 mismatched input ')' expecting EOF 
at org.apache.cassandra.cql.jdbc.CassandraStatement.
                                          doExecute(CassandraStatement.java:180) 
at org.apache.cassandra.cql.jdbc.CassandraStatement.executeUpdate(
                                                    CassandraStatement.java:237) 
at jdbc.cassandra.JdbcCassandra.main(JdbcCassandra.java:59) 
```

我的查询是`CREATE TABLE sblocks (block_id uuid, subblock_id uuid, data blob, PRIMARY KEY (block_id, subblock_id));`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:17:55.847

您在问题标题中提到了答案：您的连接可能实际上并未使用 CQL 版本 3。必须明确请求使用版本 3 语法。

最新版本的 JDBC 驱动程序尚不支持请求 CQL 3。不过，如果您不介意使用 JDBC 驱动程序边缘，则“主干”分支中的版本支持。

此提交的更改日志：[http ://code.google.com/a/apache-extras.org/p/cassandra-jdbc/source/browse/src/main/java/org/apache/cassandra/cql/jdbc/ CassandraConnection.java?name=trunk](http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/source/browse/src/main/java/org/apache/cassandra/cql/jdbc/CassandraConnection.java?name=trunk)解释了如何使用它。

# java - 如何查看 jOOQ 执行的 SQL 语句？

> ID：11026214
> 
> 赞同：8
> 
> 时间：2012-06-14T03:21:01.580
> 
> 标签：java, sql, jooq

我使用 jOOQ 从表中查询/插入/更新数据。

有没有办法查看 JOOQ 执行的 SQL 语句？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-03-22T13:22:44.320

查找您的日志配置文件（或创建一个）并将类的日志级别设置`org.jooq.tools.LoggerListener`为`debug`或`trace`，例如设置为`log4j.properties`。

在春天，您可以通过这种方式将日志级别 DEBUG 设置到您的 application.properties

```
logging.level.org.jooq.tools.LoggerListener=DEBUG 
```

对于以下查询

```
create.select(BOOK.ID, BOOK.TITLE).from(BOOK).orderBy(BOOK.ID).limit(1, 2).fetch(); 
```

你应该得到一个像

```
Executing query          : select "BOOK"."ID", "BOOK"."TITLE" from "BOOK" order by "BOOK"."ID" asc limit ? offset ?
-> with bind values      : select "BOOK"."ID", "BOOK"."TITLE" from "BOOK" order by "BOOK"."ID" asc limit 2 offset 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T22:17:39.723

jOOQ 博客上有一篇博客文章描述了如何调试日志生成的 SQL：

[https://blog.jooq.org/debug-logging-sql-with-jooq/](https://blog.jooq.org/debug-logging-sql-with-jooq/)

请注意，这里的 Stack Overflow 问题也对此进行了处理：

[我们如何分析 JOOQ 语句的速度](https://stackoverflow.com/questions/8561317/how-can-we-profile-jooq-statements-for-speed)

# javascript - 有什么方法可以在不使用 zClip 的情况下使用 HTML、JavaScript 和 ActionScript 创建“复制到剪贴板”按钮？

> ID：11026215
> 
> 赞同：1
> 
> 时间：2012-06-14T03:21:10.367
> 
> 标签：javascript, html, actionscript-3, air, adobe

我没有代码可以在这里真正显示，因为在我找到答案之前我无法真正开始。我一直在检查 Stack 和整个互联网，发现许多参考资料似乎暗示 Adob​​e AIR 能够以某些方式直接写入剪贴板，但没有具体的例子说明这是如何实现的。

是否有任何方法可以使用 HTML FORM 输入按钮，或者可以使用简单的 URL 链接直接复制到 Adob​​e AIR 中的 Windows 剪贴板，而不使用覆盖在按钮上的不可见 flash 文件（例如 zClip 或 zeroClipboard）？

这是针对将在我们员工的计算机上运行的内部应用程序。这个想法是能够有一个按钮，当单击该按钮时，它将运行一个 JavaScript 函数来获取一堆不同表单字段（名称、地址等）的值，将它们输出到页面上的文本区域，然后拥有textarea 自动复制到剪贴板以粘贴到客户端文件中。

我完全理解为什么复制到剪贴板功能已从 JavaScript 中完全删除，即使现在在网络浏览器中使用 flash 也几乎不可能做到，但我希望通过使用更像是本地应用程序的 AIR，我能够坚持到我所知道的（HTML 和 Jscript），但在没有 zClip 的情况下实现了我的目标。我认为这不会是一个安全问题，因为它都是内部的，永远不会离开员工机器。

对于那些想知道的人，我不喜欢 zClip 的原因是因为它不适用于选项卡顺序，我喜欢在输入信息时只使用键盘，并在提交和复制按钮上使用选项卡，但是由于 zClip 覆盖了一个不可见的flash 文件覆盖实际按钮，当您切换到按钮时，它什么也不做，使选项卡功能无用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:47:12.390

不确定我是否完全理解这个问题。

If you are looking to expose clipboard functionality in Air using JS take a look at the [Adobe Air HTML reference](http://help.adobe.com/en_US/air/reference/html/) - it contains a [clipboard](http://help.adobe.com/en_US/air/reference/html/flash/desktop/Clipboard.html) class for use with JS Air applications.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:14:43.027

您可以使用 JS click 事件将其路由到 AS3 处理程序中`ExternalInterface.addCallback()`，请参见[示例](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7e92.html)。使用参数传输要粘贴的数据。
然后`Clipboard.generalClipboard.setData()`可以以文本格式粘贴数据。请参阅Adob​​e 文档中的[示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/Clipboard.html#includeExamplesSummary)。

# asp.net-mvc-3 - Razor 引擎中的错误@Html.X() Ext.net？

> ID：11026217
> 
> 赞同：1
> 
> 时间：2012-06-14T03:21:19.747
> 
> 标签：asp.net-mvc-3, razor, ext.net

当我在查看错误消息中编写此代码 @Html.X().ResourceManager() 时出现错误：

*编译器错误消息：CS1928：“System.Web.Mvc.HtmlHelper”不包含“X”的定义，并且最佳扩展方法重载“Ext.Net.Extensions.X(System.Web.UI.Page)”有一些无效参数*

有没有更少的设置？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T03:26:05.233

这个发布的代码在我看来是一种 WebForm 语法。

如果您使用的是 ASP.NET MVC Razor 和最新的 Ext.NET v2.x 版本，则可以使用 Razor 语法呈现所有/任何 Ext.NET 组件。

下面的示例演示了呈现一个非常简单的 TabPanel。

```
@{
    Layout = "";    
}

<!DOCTYPE html>

<html>
<head>
    <title>Ext.NET Examples</title>
</head>
<body>    
    @Html.X().ResourceManager()

    @(Html.X().TabPanel()
        .Height(300)
        .Items(items => {
            items.Add(Html.X().Panel().Title("Test"));
        }));
</body>
</html> 
```

# algorithm - 为什么迭代 k 路合并 O(nk^2)？

> ID：11026219
> 
> 赞同：59
> 
> 时间：2012-06-14T03:21:28.683
> 
> 标签：algorithm

k-way merge 是将 k 个排序数组作为输入的算法，每个数组的大小为 n。它输出所有元素的单个排序数组。

它通过使用合并排序算法的核心“合并”例程将数组 1 合并到数组 2，然后将数组 3 合并到这个合并的数组，依此类推，直到所有 k 个数组合并。

我曾认为这个算法是 O(kn)，因为该算法遍历每个 k 个数组（每个数组的长度为 n）一次。为什么是 O(nk^2)？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-14T03:31:45.903

因为它不会遍历每个 k 数组一次。第一个数组被遍历 k-1 次，第一个为 merge(array-1,array-2)，第二个为 merge(merge(array-1, array-2), array-3) ... 以此类推.

结果是 k-1 合并，平均大小为 n*(k+1)/2，复杂度为 O(n*(k^2-1)/2)，即 O(nk^2)。

您犯的错误是忘记了合并是串行而不是并行完成的，因此数组的大小不都是 n。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-14T12:34:55.110

实际上，在最坏的情况下，第一个数组将进行*n*次比较，第二个数组进行*2n*次比较，第三个数组进行*3n*次比较，很快直到*(k - 1)n*。
所以现在复杂性变得简单了

```
n + 2n + 3n + 4n + ... + (k - 1)n
= n(1 + 2 + 3 + 4 + ... + (k - 1))
= n((k - 1)*k) / 2
= n(k^2 - k) / 2
= O(nk ^ 2) 
```

:-)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-06T02:16:06.387

这个怎么样：

第 1 步：合并数组（1 和 2）、数组（3 和 4）等。（k/2 数组合并 2n，总工作量 kn）。

第 2 步：合并数组（1,2 和 3,4）、数组（5,6 和 7,8），依此类推（k/4 合并 4n，总工作量 kn）。

第 3 步：重复...

会有 log(k) 这样的“步骤”，每个都有 kn 个工作。因此完成的总工作量 = O(knlog(k))。

即便如此，如果我们只对数组的所有元素进行排序，我们仍然可以在 O(knlog(kn)) 时间内合并所有元素。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-13T16:12:37.010

> k-way merge 是将 k 个排序数组作为输入的算法，每个数组的大小为 n。它输出所有元素的单个排序数组。
> 
> 我原以为这个算法是 O(kn)

我们可以通过反证来反驳这一点。为 m 个项目定义一个排序算法，该算法使用 k=m 和 n=1 的算法。根据假设，排序算法在 O(m) 时间内成功。矛盾的是，众所周知，任何排序算法的最坏情况至少为 O(m log m)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-06T23:53:54.783

您不必每次都逐一比较项目。您应该简单地维护排序集中最近的 K 项。您删除最小的并用它的下一个元素替换它。这应该是 n.log(k)

相关[文章](http://www.sinbadsoft.com/blog/sorting-big-files-using-k-way-merge-sort/)。免责声明：我参与编写

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-09T19:42:02.170

1）你有k个排序数组，每个大小为n。因此元素总数 = k * n

2）取所有k个数组的第一个元素并创建一个序列。然后找到这个序列的最小值。该最小值存储在输出数组中。找到 k 个元素的最小值的比较次数为 k - 1。

3) 因此，比较总数
= (comparisons/element) * 元素数
= (k - 1) * k * n
= k^2 * n // 大约

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-14T04:14:50.210

一个常见的实现为 k 个排序数组 {i_1, i_2, i__k} 中的每一个保留一个索引数组。在每次迭代中，算法从所有 k 个数组中找到最小的下一个元素并将其存储在输出数组中。由于您正在进行 kn 次迭代并每次迭代扫描 k 个数组，因此总复杂度为 O(k^2 * n)。

这是一些伪代码：

```
Input: A[j] j = 1..k : k sorted arrays each of length n
Output: B : Sorted array of length kn

// Initialize array of indexes
I[j] = 0 for j = 1..k

q = 0

while (q < kn):
    p = argmin({A[j][I[j]]}) j = 1..k           // Get the array for which the next unprocessed element is minimal (ignores arrays for which I[j] > n)
    B[q] = A[p][I[p]]
    I[p] = I[p] + 1
    q = q + 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-13T05:58:25.590

1.  你有 k 个数组，每个数组都有 n 个元素。这意味着总共 k*n 个元素。

2.  将其视为 k*n 的矩阵。要将第一个元素添加到合并/最终数组中，您需要比较 k 个数组的头。这意味着对于最终数组中的一个元素，您需要进行 k 次比较。

因此，从 1 和 2 开始，对于 K *n 个元素，所花费的总时间为 O(k* k*n)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-25T19:32:04.620

对于那些想了解细节或需要帮助的人，我将扩展 Recurse 的[答案](https://stackoverflow.com/a/11026293/828547)和后续评论

*   我们只需要`k-1`合并，因为最后一个数组没有与任何东西合并
*   对等差数列的项求和的公式很有帮助；`Sn=n(a1 + an)2`

`k`逐步完成数组与`n`元素的前 4 次合并

```
+-------+-------------------+-------------+
| Merge | Size of new array |    Note     |
+-------+-------------------+-------------+
| 1     | n+n  = 2n         | first merge  |
| 2     | 2n+n = 3n         |             |
| 3     | 3n+n = 4n         |             |
| 4     | 4n+n = 5n         |             |
| k-1   | (k-1)n+n = kn     | last merge  |
+-------+-------------------+-------------+ 
```

要找到平均大小，我们需要将所有大小相加并除以合并数 ( `k-1`)。`n`使用对第一项求和的公式`Sn=n(a1 + an)2`，我们只需要**第一**项和**最后一项**：

*   ***a1*** =`2n`（第一项）
*   ***an*** =`kn`（最后一项）

我们想将所有术语相加`n=k-1`（我们拥有的术语数）。插入数字，我们得到所有项之和的公式

`Sn = ( (k-1)(2n+kn) )/2`

但是，要找到*平均*大小，我们必须除以项数 ( `k-1`)。这抵消了`k-1`分子中的 ，我们剩下的平均大小为

`(2n + kn)/2`

现在我们有了平均大小，我们可以将它乘以合并数，即`k-1`. 为了使乘法更容易，忽略`/2`，只乘分子：

```
 (k-1)(2n+kn)
= (k^2)n + kn - 2n 
```

此时您可以重新引入`/2`，但应该没有任何必要，因为很明显主要术语是`(k^2)*n`

# php - .htaccess 全部拒绝，包括 htaccess 文件并显示 404 - 我该怎么做？

> ID：11026221
> 
> 赞同：8
> 
> 时间：2012-06-14T03:21:37.117
> 
> 标签：php, apache, security, .htaccess

如何在 .htaccess 文件中为文档根目录中的特定目录执行此操作？：

1.  拒绝对任何东西的所有访问（包括 .htaccess 太）
2.  返回 404，而不是 403 错误
3.  人类或机器人不应访问或检测到任何文件或子目录
4.  只允许本地主机的 php 访问

好像会很简单。这有效，但抛出 403 而不是 404：

```
deny from all 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T21:45:07.203

为什么不创建自定义错误页面？

```
deny from all
ErrorDocument 403 /error/404.html 
```

如果某人无权查看该页面，服务器将始终希望抛出 403 错误，而这正是您想要做的。但是，您可以更改错误 403 的 ErrorDocument 以显示一个表明它是 404 错误的 HTML*页面*。

我的示例在根目录中有一个名为的文件夹，其中有一个名为`error`.html 的 html 文件`404.html`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:41:16.213

你有没有尝试过这样的事情？当有人试图查看 DIRECTORY 中的任何内容时，这将强制出现 403 Forbidden 错误。PHP 脚本仍然可以访问目录中的所有内容。显然将 DIRECTORY 替换为您的首选目录。

`RewriteRule ^DIRECTORY - [F]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T08:50:02.273

我不喜欢发送一些说它是 404 错误的 html 页面，而实际上它只是一个 html 页面，也可能位于 Iamafake404error.html

你可以试试这个：

```
Order Deny,Allow
Deny from all
Allow from 1.2.3.4

ErrorDocument 403 /throwaREAL404error.html
ErrorDocument 404 /throwaREAL404error.html
ErrorDocument 500 /throwaREAL404error.html

### never deliver .git folders, .gitIgnore
RewriteRule ^(.*/)?\throwaREAL404error.html+ - [R=404,L]

# 2nd line of defense (if no mod_rewrite)
RedirectMatch 404 ^(.*/)?\throwaREAL404error+ 
```

[https://serverfault.com/a/510951/194845](https://serverfault.com/a/510951/194845)

# javascript - 需要找到朝向网格上某物移动的方程

> ID：11026224
> 
> 赞同：2
> 
> 时间：2012-06-14T03:21:53.560
> 
> 标签：javascript, tracking

好的，我写了一个脚本，可以让你四处走动，而不是在由一堆“x”字母组成的网格上。所以你知道它是什么样子的，这是制作它的 JS：

```
function generate_page() {
    var x = 0;
    var y = 0;
    var lines = 20;
    var output;
    while (x <= lines) {
        while( y <= lines*2){
            if (x == 0 && y == 1) {
                output = "<span id='x" + x + "_" + y + "' style='background-color: red'>o</span>";
            } else if (x == 3 && y == 5) {
                output = "<span id='x" + x + "_" + y + "' style='background-color: green'>z</span>";
            } else {
                output = ("<span id='x" + x + "_" + y + "'>x</span>");
            }
            $('#board').append(output);
            y++;
        }
        y = 0;
        x++;
        $('#board').append('<br />');
    }
} 
```

现在，我在板上有一个绿色字符，我正在尝试对其进行编程，以使其朝向您控制的红色字符。我已经制定了北、南、东和西功能。但是，对于我的一生，我*无法*弄清楚使一个人走向另一个人的小算法。我尝试了以下方法，但它从来没有起作用。谁能帮我想出一种让一个角色跟踪另一个角色的方法？这是我失败的尝试：

```
function moveGreen() {
    var x_distance = currentX_green - currentX_red;
    var y_distance = currentY_green - currentY_red;
    var larger;
    if (x_distance > y_distance) {
        larger = 'x';
    } else if (y_distance > x_distance) {
        larger = 'y';
    } else {
        larger = 'o';
    }
    if (larger == 'x') {
        if (x_distance > 0){
            north('green');
        } else {
            south('green');
        }
    } else if (larger == 'y'){
        if (y_distance > 0) {
            west('green');
        } else {
            east('green');
        }
    } else if (larger == 'o'){
        if (y_distance > 0){
            east();
        } else if (y_distance == 0) {
            if (x_distance > 0) {
                north();
            } else {
                south();
            }
        } else {
            west();
        }
    }
} 
```

编辑：[这](http://jackscode.99k.org/nav_large.html)是当前程序。忽略红色东西上的绿色移动。

编辑2：好的，我更新了西方的问题和没有绿色的东西。这是新代码：

```
function moveGreen() {
    var x_distance = currentX_green - currentX_red;
    var y_distance = currentY_green - currentY_red;
    var larger;
    if (Math.abs(x_distance) > Math.abs(y_distance)) {
        larger = 'x';
    } else if (Math.abs(y_distance) > Math.abs(x_distance)) {
        larger = 'y';
    } else {
        larger = 'o';
    }
    if (larger == 'x') {
        if (x_distance > 0){
            north('green');
        } else {
            south('green');
        }
    } else if (larger == 'y'){
        if (y_distance > 0) {
            west('green');
        } else {
            east('green');
        }
    } else if (larger == 'o'){
        if (y_distance > 0){
            east('green');
        } else if (y_distance == 0) {
            if (x_distance > 0) {
                north('green');
            } else if (x_distance < 0){
                south('green');
            }
        } else {
            west('green');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:45:51.817

一个明显的问题是您需要检查顶部附近的绝对值。

代替

```
if (x_distance > y_distance) {
    larger = 'x';
} else if (y_distance > x_distance) { 
```

你需要

```
if (Math.abs(x_distance) > Math.abs(y_distance)) {
    larger = 'x';
} else if (Math.abs(y_distance) > Math.abs(x_distance)) { 
```

因为即使它是负数，您仍然想要“最大”。

*现在更新*它在 x=y 处停止。查看代码，在这种情况下，东部等的参数中没有“绿色”。

*更新*得很好，现在它在对角线上时出错了，所以我猜东/西对于“o”情况是错误的（实际上，它们与“y”情况不一致）。现在看起来好多了！

# ruby-on-rails-3 - 设计 config.action_mailer.default_url_options 不起作用

> ID：11026228
> 
> 赞同：0
> 
> 时间：2012-06-14T03:22:05.717
> 
> 标签：ruby-on-rails-3, devise, actionmailer, devise-confirmable

我已经切换到 pow 以便在开发中使用 ssl，并且我想在开发中切换主机配置，但是 devise 继续发送以 localhost:3000 域为前缀的电子邮件。这是我的 config/environments/development.rb 文件中的内容：

```
config.action_mailer.default_url_options = { :host => 'want_freight.dev' } 
```

我已经重新启动了我的服务器，并且我已经对我的整个应用程序进行了 grep，以寻找 localhost:3000 的违规使用，但是我的搜索结果除了 tmp 和日志文件之外什么都没有。有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T23:50:40.520

我将 config.action_mailer.default_url_options 更改为指向 Pow 的 .dev URL，[重新启动我的计算机](http://www.youtube.com/watch?v=p85xwZ_OLX0)，并且，无论如何，它再次工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:49:34.047

因此，通过将 :only_path => false 添加到 default_url_options 哈希并使用命名 url，例如 user_url(@user.id) 而不是 link_to，我能够取得一些成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T02:20:49.807

这个问题实际上与导致与邮件程序冲突的 devise_async gem 有关，我能够通过从我的 gemfile 中删除 gem 来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T00:11:03.777

无需重启电脑，重启POW即可：

触摸 ~/.pow/restart.txt

# javascript - phonegap 1.7.0 插件android不工作

> ID：11026229
> 
> 赞同：0
> 
> 时间：2012-06-14T03:22:09.363
> 
> 标签：javascript, android, cordova, phonegap-plugins, applicationcraft

我正在使用 Applicationcraft 编写一个 android 应用程序，但是我需要为某个要求创建自己的插件。所以我从 applicationcraft 下载了我的应用程序，然后使用 phonegap 1.7.0 手动编译它，但我的插件有问题。我已按照本[教程](http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android)中的每个步骤进行操作，但是每当我在测试设备中使用我的插件时，我总是会收到此错误：

无法调用未定义的方法“myfunction”。函数：调用函数

[我还在这里](https://stackoverflow.com/questions/10397210/sendsms-plugin-not-working-on-phonegap)咨询了另一个问题，但我仍然遇到同样的问题。

**谁能告诉我可能的解决方案是什么？**或者指出我正确的方向（为 PhoneGap 1.7.0 制作插件的任何教程）。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:21:36.270

不用了，我[这里](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)已经找到了。

# ruby - 如何通过 Pony 发送二进制文件？

> ID：11026232
> 
> 赞同：1
> 
> 时间：2012-06-14T03:22:55.027
> 
> 标签：ruby, pony

我使用下面的函数来创建目录全部内容的哈希，以便我可以将所有文件作为附件发送。

```
def get_attachments_from_directory(dir)
    attachment_to_send = Hash.new   
    Dir[dir.gsub("\\","/")+"/*"].each {|file|
        file_to_send = File.read(file)
        #file_to_send = File.read(file, :binmode => true)
        attachment_to_send[File.basename(file)]=file_to_send
    }
    return attachment_to_send
end 
```

然后我使用下面的函数发送附件

```
def email_it(body, subject, to, from, attachment_to_send)

  $smtp = 'mail.com'
  $smtp_port = 25

    Pony.mail(
        :to => to, 
        :from => from,
        :subject => subject, 
        :body => Nokogiri::HTML(body).text, 
        :html_body =>  body
        :attachments => attachment_to_send,
        :via => :smtp, 
        :via_options => {
                :address     => $smtp,
                :port     => $smtp_port,
                :enable_starttls_auto => false
        }
    )
end 
```

我的测试目录中有两个文件：`.log`和`.png`. 它们都已发送和接收，但 .png 已损坏。gmail说图片文件不能显示，因为里面有错误。.png 文件的文件名在我的 gmail 帐户中是正确的。文件大小错误。小得多。

在 gmail 中显示原件给了我

```
----==_mimepart_4fd9515347359_fc1e853c88342d
Date: Thu, 14 Jun 2012 12:49:55 +1000
Mime-Version: 1.0
Content-Type: image/png;
 charset=UTF-8;
 filename="error_when_time_out - login at 2012-06-14  12.48.55.png"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="error_when_time_out - login at 2012-06-14  12.48.55.png"
Content-ID: <4fd95153648c7_fc1e853c883518@RATionalxp.mail>

iVBORwq/XNErlnbxOOrmtdDZDYaMWm16lTatQptSpk4t12RW6HNq6IJGvvyB
sabbUovDe5+loc9U3yPX9Yr1vWJDv9Q4KNcPydUDQnkfV9LNFrTTOc2GrEZd
Rr0uo06fUUdn1jOZ9RxRnZBZJ2bXG3M4yoTplFqeWJFGFoVBjDanha5JoWOM
bx3hi0aTQPSQNcikNoMVeYrndSi9YeVl1jxLr07oNrrn11F1kv3AeL9C8Mpi
bkTrjvku73RaeOP6/KvXVv5yzfC6vfCqHf/H64Y/XNf//obujzf0f7lp+PMt
... it continues ....
Xvjq8X//p/Ocdy68s2/DZ//5/Muvf/rvt319XzQf8p9J+7wpSTTguXYPo3Dy
TYiIaNAvYXs5ir9gv4akEz5MOO6DxGPf150oPfApIe6Yu5SVblRBYgL1TrWq
QqWsUnFag5rYTagbCD4lJCgO2hYdpGzQteqR9NCgo3ZTmh0=

----==_mimepart_4fd9515347359_fc1e853c88342d-- 
```

检查哈希输出

```
{"error_when_time_out - login at 2012-06-14  12.50.12.png"=>"\211PNG\n\277\\\321
+\226v\3618\352\346\265\320\331\r\206\214Zmz\2256\255B\233R\246N-\327dV\350sj\35
0\202F\276\374\201\261\246\333R\213\303{\237\245\241\317T\337#\327\365\212\365\2
75bC\277\3248(\327\017\311\325\003By\037W\322\315\026\264\3239\315\206\254F]F\27
5.\243N\237QGg\3263\231\365\034Q\235\220Y'f\327\es8\312\204\351\224Z\236X\221F\0
26\205A\2146\247\205\256I\241c\214o\035\341\213F\223@\364\2205\310\2446\203\025y 
```

如果我尝试读取文件，`#file_to_send = File.read(file, :binmode => true)` 则会收到错误消息：`TypeError - can't convert Hash into Integer:`

*   ruby 1.8.7 (2010-08-16 补丁级别 302) [i386-mingw32]
*   哑剧类型 (1.16)
*   小马 (1.3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:06:36.000

在不进行任何 CR+LF 转换的情况下读取二进制数据的常规方法是：

```
File.open(file, 'rb').read 
```

Ruby 1.9 引入了一些新方法来执行此操作，您可能会在 1.8.7 环境中无意中尝试这些方法。to的第二个参数`read`是你想要读取的字节数，而不是文件的模式。

请务必阅读有关您不熟悉的任何方法[的文档。](http://apidock.com/ruby/v1_8_7_330/IO/read/class)有时事情并不完全是你所期望的。

# android - 如何检查当前活动前面是否有对话框？

> ID：11026234
> 
> 赞同：23
> 
> 时间：2012-06-14T03:23:01.330
> 
> 标签：android, android-activity

我正在使用第三方库，有时它会弹出一个对话框。在完成当前活动之前，我想检查当前上下文中是否弹出对话框。

有没有这方面的API？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-06-30T10:37:29.690

您可以检查它是否在该活动的活动片段上运行，并检查其中一个是否是 DialogFragment，这意味着屏幕上有一个活动对话框：

```
 public static boolean hasOpenedDialogs(FragmentActivity activity) {
        List<Fragment> fragments = activity.getSupportFragmentManager().getFragments();
        if (fragments != null) {
            for (Fragment fragment : fragments) {
                if (fragment instanceof DialogFragment) {
                    return true;
                }
            }
        }

        return false;
    } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-01T23:30:59.240

我遇到了类似的问题，并且不想修改所有创建和显示对话框的位置。`hasWindowFocus()`我的解决方案是通过该方法查看我显示的视图是否具有窗口焦点。这不适用于所有情况，但适用于我的特定情况（这是用于在相当有限的情况下使用的内部录音应用程序）。

这个解决方案没有经过彻底的健壮性测试，但我想我会发布以防它帮助某人。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-05-30T22:46:10.707

这使用反射和隐藏 API 来获取当前活动的视图根。如果一个警告对话框显示这将返回一个额外的视图根。但要小心，因为即使是 toast 弹出窗口也会返回一个额外的视图根。

我已经确认了从 Android 4.1 到 Android 6.0 的兼容性，但当然这可能不适用于早期或更新的 Android 版本。

我没有检查多窗口模式的行为。

```
@SuppressWarnings("unchecked")
public static List<ViewParent> getViewRoots() {

    List<ViewParent> viewRoots = new ArrayList<>();

    try {
        Object windowManager;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
            windowManager = Class.forName("android.view.WindowManagerGlobal")
                    .getMethod("getInstance").invoke(null);
        } else {
            Field f = Class.forName("android.view.WindowManagerImpl")
                    .getDeclaredField("sWindowManager");
            f.setAccessible(true);
            windowManager = f.get(null);
        }

        Field rootsField = windowManager.getClass().getDeclaredField("mRoots");
        rootsField.setAccessible(true);

        Field stoppedField = Class.forName("android.view.ViewRootImpl")
                .getDeclaredField("mStopped");
        stoppedField.setAccessible(true);

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
            List<ViewParent> viewParents = (List<ViewParent>) rootsField.get(windowManager);
            // Filter out inactive view roots
            for (ViewParent viewParent : viewParents) {
                boolean stopped = (boolean) stoppedField.get(viewParent);
                if (!stopped) {
                    viewRoots.add(viewParent);
                }
            }
        } else {
            ViewParent[] viewParents = (ViewParent[]) rootsField.get(windowManager);
            // Filter out inactive view roots
            for (ViewParent viewParent : viewParents) {
                boolean stopped = (boolean) stoppedField.get(viewParent);
                if (!stopped) {
                    viewRoots.add(viewParent);
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return viewRoots;
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-14T03:48:30.127

AFAIK - 没有为此的公共 API。

推荐的方法是引用对话框，并在必要时检查`isShowing()`并调用`dismiss()`，但由于您使用的是第三方库，这可能不适合您。

最好的办法是检查您使用的库的文档。如果这没有帮助，那你就不走运了。

提示：如果弹出对话框，活动将切换到“暂停”状态。您也许可以“滥用”这种行为；）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-04-28T11:54:46.393

您可以覆盖活动方法`onWindowFocusChanged(boolean hasFocus)`并跟踪活动的状态。

通常，如果您的活动上方显示一些警报对话框，则活动不会获取`onPause()`和`onResume()`事件。但它失去了对显示的警报对话框的关注，并在它关闭时获得它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-11-25T13:22:47.267

对于阅读本文并想知道如何检测`Dialog`上述片段或活动的任何人，我的问题是在我的基本片段中，我想检测是否`Dialog`在我的片段顶部显示一个。对话框本身是从我的活动中显示的，我不想在那里找到它，所以我想出的解决方案（感谢与此类问题相关的所有答案）是获得`view`（或者你可以得到`view.rootView`）我的片段并检查它的任何孩子是否有焦点。如果没有一个孩子没有焦点，则意味着`Dialog`在我的片段上方显示了一些东西（希望是 a ）。

```
// Code inside my base fragment:
val dialogIsDisplayed = (view as ViewGroup).children.any { it.hasWindowFocus() } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-08T09:44:22.627

我假设，您正在处理第三方库并且您无权访问对话框对象。

您可以从活动中获取根视图，

然后您可以使用树遍历算法来查看是否可以到达任何子视图。如果显示警告框，您不应访问任何子视图。

当显示警报视图时（使用 Ui Automator 检查），UI 树中存在的唯一元素来自 DialogBox / DialogActivity。您可以使用此技巧查看屏幕上是否显示对话框。虽然听起来很昂贵，但它可以优化。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-27T21:19:17.933

如果您只使用 Kotlin：

```
supportFragmentManager.fragments.any { it is DialogFragment } 
```

# php - 搜索两个表的迷你 PHP 搜索引擎

> ID：11026235
> 
> 赞同：1
> 
> 时间：2012-06-14T03:23:01.583
> 
> 标签：php, mysql, search

我正在尝试创建一个迷你 PHP 搜索引擎，它只是在两个不同的表中搜索并在另一个表下显示一个表的结果。但我遇到了一个错误。这是我设置查询的地方。

```
$var = $_GET['q']; 
$trimmed = trim($var);
$get_fighters = "
SELECT * 
FROM fighters 
WHERE name LIKE '%$trimmed%' 
ORDER BY name ASC";
$get_events = "
SELECT * 
FROM events 
WHERE event_name LIKE '%$trimmed%' 
ORDER BY date DESC";
$search_result_fighters = mysql_query($get_fighters); 
$search_result_events = mysql_query($get_events); 
$check_results_fighters = mysql_num_rows($search_result_fighters); 
$check_results_events = mysql_num_rows($search_result_events); 
```

这是我返回战士的地方（有效）

```
if ($check_results_fighters == 0) {
    echo "<tr>";
    echo "<td colspan='6'>" . "No Fighters Found." . "</td>";
    echo "</tr>";
}
else if ($check_results_fighters != 0) {
    while($row = mysql_fetch_array($search_result_fighters)) {
      echo "<tr>";
      echo "<td>" . $row['name'] . "</td>";
      echo "</tr>";
    } 
} 
```

这是我返回事件的地方，但它不起作用。我收到错误：警告：mysql_num_rows() 期望参数 1 是资源，在第 30 行的 C:\xampp\htdocs\search.php 中给出的布尔值

```
if ($check_results_events == 0) {
    echo "<tr>";
    echo "<td colspan='6'>" . "No Events Found." . "</td>";
    echo "</tr>";
}
else if ($check_results_events != 0) {
    while($row = mysql_fetch_array($search_result_events)) {
      echo "<tr>";
      echo "<td>" .  $row['event_name'] . "</td>";
      echo "</tr>";
    } 
} 
```

第 30 行很简单：

```
$check_results_events = mysql_num_rows($search_result_events); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:27:28.617

在 SQL 查询中出现错误时会引发该错误。成功的 SQL 查询会返回一个资源，该资源可用作`mysql_num_rows()`. 失败的 SQL 查询返回一个布尔值`false`，它不是 的有效参数`mysql_num_rows()`，因此会出现错误。

仔细检查您的表结构、字段名称和 SQL 查询。

要进行其他调试，请执行以下操作：

```
$search_result_events = mysql_query($yourQuery) or die(mysql_error()); 
```

这将输出 MySQL 抛出的错误。

**旁注**

没有必要做

```
if ($check_results == 0) {
} 
// the if condition here is redundant, don't you agree?
else if ($check_results != 0) {
} 
```

虽然额外比较的性能损失非常、非常、非常微小，但它会让可能阅读您代码的人望而却步。

另外，请停止使用这些`mysql_`功能。[这是关于 PDO 的精彩教程](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)。你应该使用这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:30:25.083

根据您其他[问题](https://stackoverflow.com/questions/11006025/complex-if-statement-with-3-tables)中的表结构，您的事件表中的“日期”应该是“事件日期”：

```
$get_events = "
SELECT * 
FROM events 
WHERE event_name LIKE '%$trimmed%' 
ORDER BY event_date DESC"; 
```

# mongodb - 为特定项目设计 mongodb 模式：嵌入文档或使用外键

> ID：11026236
> 
> 赞同：0
> 
> 时间：2012-06-14T03:23:01.657
> 
> 标签：mongodb, schema-design

在我的项目中，它有 3 个模型：

1.  城市
2.  广场
3.  店铺

一个城市有广场和商店；一个广场有商店。

我最初的设计是为关系使用“外键”。（我是从mysql和jsut开始接mongodb的）

```
class City(Document):
     name = StringField()

class Plaza(Document):
     name = StringField()
     city = ObjectIdField()

class Store(Document):
     name = StringField()
     city = ObjectIDField()
     plaza = ObjectIdField() 
```

我觉得这个设计很像sql的做法。

项目范围是这样的：5个城市；每个城市有5个广场；一个广场有200家商店。一家商店有许多产品（上面的代码中没有建模）

我将查询一个城市或一个广场的所有商店；一个城市的所有广场。

我应该在 City collection 中嵌入所有商店和广场吗？我听说不要在 mongodb 中使用引用，而是使用嵌入文档。在我的具体项目中，哪一个是更好的方法？对我来说，我对“外键”设计感到满意，但害怕不利用 mongodb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:55:43.587

我认为拥有一个单一的商店集合是有意义的。

在每个商店文档中，您可以有一个名为 city 的属性，也可以有一个 plaza 属性。还有许多其他方式来构造其属性，包括更复杂的（子文档）值。

如果您的文件是：

```
{ storeName:  "Books and Coffee",
  location:   "plaza 17",
  city:       "Anytown",
} 
```

您可以通过以下方式轻松查询 Anytown 中的所有商店

```
db.stores.find({"city":"Anytown"}) 
```

将 city 和 plaza 存储在单独的集合中是没有意义的，因为这样每次您需要跨越多个集合的信息时，您都必须进行多次查询，例如商店及其所在的城市，或 city “X”中的所有商店”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:33:48.990

从您描述项目的方式来看，似乎可能不需要嵌入式方法 - 如果您在城市和广场上使用索引，您可以非常快速地执行您提到的查询。嵌入往往对缓存更有帮助，或者当嵌入的数据本身没有多大意义时，并且总是与父数据同时访问 - 这里并非如此，像地址这样的东西就是一个很好的例子。

# c - C中的“uns”是什么？

> ID：11026238
> 
> 赞同：3
> 
> 时间：2012-06-14T03:23:17.513
> 
> 标签：c, debugging, typedef, unsigned

我遇到了这个 C 库：[http](http://www.ucw.cz/libucw/)
://www.ucw.cz/libucw/ 它包含一个排序例程：[http](http://www.ucw.cz/libucw/doc/sort.html)
: //www.ucw.cz/libucw/doc/sort.html 在 array_simple.h 中有这个函数声明：

```
static void ASORT_PREFIX(sort)(ASORT_ARRAY_ARG uns array_size ASORT_EXTRA_ARGS) 
```

并在代码中进一步：

```
struct stk { int l, r; } stack[8*sizeof(uns)];
uns sp = 0; 
```

该文件中不再有#include，也没有提及“uns”。不用说 VC2010 和 GCC (mingw32) 都不明白 uns 是什么。帮助 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T03:27:54.167

```
typedef unsigned int uns; 
```

[http://www.ucw.cz/libucw/doc/def_index.html](http://www.ucw.cz/libucw/doc/def_index.html)

它在 ucw/config.h 中，由 ucw/lib.h 自动包含。

（我想知道他们为什么不选择`uint`别名。虽然，一些系统已经将它作为这种确切的类型定义。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T03:29:03.547

[文档](http://www.ucw.cz/libucw/doc/basics.html#type_uns)说它是一个`typedef`for `unsigned int`：

> `typedef unsigned int uns;`
> 
> 更好发音的别名`unsigned int`。

# django - 仅邀请 Django Auth 的应用程序

> ID：11026244
> 
> 赞同：3
> 
> 时间：2012-06-14T03:24:05.933
> 
> 标签：django

我正在开发一个 Django 网络应用程序，并希望限制注册到我的网站。为此，我想使用仅邀请应用程序..我可以找到几个建立在 Django 注册之上的应用程序，但我正在使用 Django Auth 。是否有任何应用程序可以与 Django 应用程序一起使用以获得相同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:33:38.247

总体思路：首先，您可以查看我编写[的代码](http://pastebin.com/sd9p3MwV)，这对我来说很好用。

> 看看应用程序中包含的示例，您将学习如何编写自己的管道。此管道可以重定向到您想要的任何视图。
> 
> 从那里您可以在会话中保存一个邀请密钥，如果该密钥有效，您可以继续使用 create_user 内置管道。

我已[将此应用程序](http://code.larlet.fr/django-invitation/wiki/Home)用于生成和验证邀请密钥的邀请。

[执行](http://pastebin.com/embed_iframe.php?i=sd9p3MwV)

我花了整整一天的时间才弄明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T14:24:13.143

这是一个基于 allauth 的邀请应用程序，它限制注册仅限于邀请：

[https://pypi.python.org/pypi/django-invitations/0.12](https://pypi.python.org/pypi/django-invitations/0.12)

# javascript - JeasyUI（jquery grid）如何将焦点放在单元格内的输入文本中

> ID：11026246
> 
> 赞同：1
> 
> 时间：2012-06-14T03:24:20.053
> 
> 标签：javascript, jquery, jsp

我使用 jeasyui 创建一个数据网格，网格有最后一行可以编辑数据，每次用户按 Enter 时，我保存数据并插入新行让用户输入另一个数据。我的问题是如何通过 jquery 在下一个文本框中设置焦点，因为输入文本会生成自动化 ID，我无法通过 find 函数找到它。

我的代码：

```
 $(function(){
        $('#test').datagrid({
            width:700,
            height:350,
            url:'/getlistdemoajax'<%-- '<%=Configuration
                .getCssServerPath("/resources/vinamilk/datagrid_data.json")%>' --%>,
            sortName: 'code',
            sortOrder: 'asc',
            remoteSort: false,
            idField:'code',
            singleSelect:true,
            columns:[[
                {field:'code',title:'TT',width:40,editor:'text'},
                {field:'name',title:'code',width:110,editor:'text'},
                {field:'name',title:'name',width:110,editor:'text'},
                {field:'name',title:'name2',width:110,editor:'text'},
                {field:'name',title:'name2',width:110,editor:'text'},
                {field:'name',title:'name2',width:110,editor:'text'},

            ]],
            pagination:true,
            onLoadSuccess:function(){
                loadSuccess = false;
                $('#test').datagrid('appendRow',{
                    code:'',
                    name:'',
                    })
                $('#test').datagrid('beginEdit', $('#test').datagrid('getRows').length-1);

        },
        onClickRow:function(rowIndex){
            var rowss = $('#test').datagrid('getSelected');
            var selected = $('#test').datagrid('getSelected');
            if (selected){

                if (selected.code ==''){
                    $('#test').datagrid('beginEdit', rowIndex);
                }
            }
            }

        });
        $.extend($('#test').datagrid.defaults.editors, {  
            text: {  
                init: function(container, options){  
                    var input = $('<input type="text" class="datagrid-editable-input" onkeypress="saveData(event);">').appendTo(container);  
                    return input;  
                },  
                getValue: function(target){  
                    return $(target).val();  
                },  
                setValue: function(target, value){  
                    $(target).val(value);  
                },  
                resize: function(target, width){  
                    var input = $(target);  
                    if ($.boxModel == true){  
                        input.width(width - (input.outerWidth() - input.width()));  
                    } else {  
                        input.width(width);  
                    }  
                }  
            }  
        });  
    function saveData(e)
    {
        // look for window.event in case event isn't passed in
        if (typeof e == 'undefined' && window.event) { e = window.event; }
        if (e.keyCode == 13)
        {
            $('#test').datagrid('acceptChanges');
            //Create one row
            $('#test').datagrid('appendRow',{
                    code:'',
                    name:'',
                    })
            $('#test').datagrid('beginEdit', $('#test').datagrid('getRows').length-1);
        }
    } 
```

# ruby - 如何分隔字符串？

> ID：11026247
> 
> 赞同：2
> 
> 时间：2012-06-14T03:24:25.610
> 
> 标签：ruby

如果我有一个包含这样结构的数据的文件：

```
unknown|0   
Action|1  
Adventure|2  
Animation|3  
... 
```

如何将“ `|`”前面的字符串和后面的数字分开，以便我可以创建一个像这样的哈希：

```
{"unknown"=> 0, "Action" => 1...} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:32:07.993

`String#split`是你的朋友：

```
s = "unknown|0"
key, value = s.split("|")
hash = { key => value } 
```

或者，如果您更喜欢输入更少并混淆更多：

```
Hash[*s.split("|")] 
```

编辑

显然，这不涉及从文件中读取行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:35:33.000

我认为最容易遵循的是：

```
hash = {}  
data.each_line do |line|
  split = line.split('|')
  hash[split[0]] = split[1]
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T03:30:46.307

太丑了，但它有效！

```
h=Hash[*s.chomp.split("\n").map{|i| i.split("|")}.flatten] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T03:43:54.310

给定文件**/tmp/foo**，您可以将整个文件解析为一行中的哈希，如下所示：

```
Hash[*IO.readlines('/tmp/foo').map(&:chomp).collect { |l| l.split('|') }.flatten] 
```

它的可读性不是很高，但它确实有效。

# xml - 让两个 XML 数据元素出现在同一行

> ID：11026249
> 
> 赞同：3
> 
> 时间：2012-06-14T03:24:57.883
> 
> 标签：xml, xslt, adobe-indesign

我正在将 XML 导入 Adob​​e InDesign。我正在尝试使用以下 XSLT 按摩 XML 以创建所需的数据流。

感谢 StackOverflow 上的帮助，我的 XSLT 几乎可以完美运行。我只有几个似乎无法克服的顽固问题。我已经尝试了几十种选择，但我仍然很难过。

XML 有四个基本级别`<Root><Story<CL>+<BK>+...</BK></CL></Story><Root>`

CL 和 BK 节点有多个元素。

我试图让出现在 CL 节点下的两个元素出现在 XSLT 结果的同一行上，但无论我尝试什么都无法让它工作。

这是完整的 XSLT，记住我唯一想做的就是获取元素`<CityDescription>`并`<Population>`出现在输出的同一行：

```
<?xml version="1.0" encoding="UTF-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:output omit-xml-declaration="yes" indent="no" />
 <xsl:strip-space elements="*"/>

 <xsl:output method="XML"/>
 <xsl:template match="/">

 <Root>
 <Story><xsl:apply-templates select="Root/Story/CL"/></Story>
 </Root>
 </xsl:template>
 <xsl:template match="CityDescription"><CityDescription><xsl:value-of select="."/></CityDescription><xsl:text>  </xsl:text></xsl:template><xsl:template match="CL/Population"><Population><xsl:value-of select="."/></Population></xsl:template>

 <xsl:template match="BankName | Address1 | Hours | Established | RoutingNbr | CO/CityOfficePhone | CO/CityOfficeAddress2 "><xsl:element name="{name()}"><xsl:value-of select="."/></xsl:element></xsl:template>
 <xsl:template match="BK">
 <xsl:apply-templates select="BankName"/><xsl:text> </xsl:text><xsl:apply-templates select="Established"/><xsl:text>    </xsl:text><xsl:apply-templates select="RoutingNbr"/><xsl:text>
 </xsl:text>
 <xsl:apply-templates select="OfficeOfLabel"/>
 <xsl:apply-templates select="Address1"/><xsl:text> </xsl:text><xsl:apply-templates select="Hours"/><xsl:text>
 </xsl:text>
 <xsl:apply-templates select="Address2"/><xsl:apply-templates select="Zip"/>
 <xsl:apply-templates select="Phone"/><xsl:apply-templates select="Fax"/><xsl:text>
 </xsl:text>
 <xsl:apply-templates select="Email"/>
 <xsl:apply-templates select="Web"/>
 <xsl:apply-templates select="HoldingCo"/>
 <xsl:apply-templates select="TotalAssets"/><xsl:apply-templates select="TotalLiabilities"/>
 <xsl:apply-templates select="TotalDeposits"/><xsl:apply-templates select="EquityCapital"/>
 <xsl:apply-templates select="EH/Employee"/>
 <xsl:apply-templates select="D"/>
 <xsl:apply-templates select="CB"/>
 <xsl:apply-templates select="OFF"/>
 <xsl:apply-templates select="CO"/>
 <xsl:apply-templates select="MultiBankLabel"/>
 <xsl:apply-templates select="IBAGroup"/><xsl:apply-templates select="FDICNbr"/>
 </xsl:template>

 <xsl:template match="HoldingCo">
 <HoldingCo>
 <xsl:text>Holding Co: </xsl:text>
 <xsl:value-of select="."/></HoldingCo><xsl:text>
 </xsl:text></xsl:template>

 <xsl:template match="Phone">
 <Phone><xsl:value-of select="."/></Phone><xsl:text>    </xsl:text></xsl:template>

 <xsl:template match="Fax">
 <Fax><xsl:value-of select="."/></Fax></xsl:template>

 <xsl:template match="EH/Employee">
 <Employee><xsl:value-of select="."/></Employee><xsl:text>
 </xsl:text></xsl:template>

 <xsl:template match="Zip">
 <Zip><xsl:value-of select="."/></Zip><xsl:text>
 </xsl:text></xsl:template>

 <xsl:template match="Address2">
 <Address2><xsl:value-of select="."/></Address2><xsl:text>  </xsl:text>
 </xsl:template>

 <xsl:template match="Email">
  <Email><xsl:value-of select="."/></Email><xsl:text>
 </xsl:text></xsl:template>

 <xsl:template match="Web">
  <Web><xsl:text>Web: </xsl:text><xsl:value-of select="."/></Web><xsl:text>
 </xsl:text></xsl:template>

 <xsl:template match="TotalAssets">
  <TotalAssets><xsl:text>Total Assets   $</xsl:text><xsl:value-of select="."/></TotalAssets><xsl:text>  </xsl:text>
 </xsl:template>

 <xsl:template match="TotalLiabilities">
  <TotalLiabilities><xsl:text>Total Liabilities $</xsl:text>
   <xsl:value-of select="."/></TotalLiabilities><xsl:text>
 </xsl:text></xsl:template>

 <xsl:template match="TotalDeposits">
  <TotalDeposits><xsl:text>Total Deposits   </xsl:text>
   <xsl:value-of select="."/></TotalDeposits><xsl:text> </xsl:text>
 </xsl:template>

 <xsl:template match="EquityCapital">
  <EquityCapital><xsl:text>Equity Capital   </xsl:text><xsl:value-of select="."/></EquityCapital><xsl:text>
 </xsl:text></xsl:template>

 <xsl:template match="IBAGroup">
  <IBAGroup><xsl:text>IBA Group: </xsl:text><xsl:value-of select="."/></IBAGroup><xsl:text> </xsl:text>
 </xsl:template>

 <xsl:template match="FDICNbr">
  <FDICNbr><xsl:text>FDIC Certificate No.: </xsl:text><xsl:value-of select="."/></FDICNbr><xsl:text>
 </xsl:text></xsl:template> 

 <xsl:template match="OFF"><OfficeLabel><xsl:value-of select="OfficeLabel"/><xsl:text>: </xsl:text></OfficeLabel><Office><xsl:value-of select="Office"/></Office><xsl:text>
 </xsl:text></xsl:template> 

 <xsl:template match="D"><DirectorLabel><xsl:value-of select="DirectorLabel"/><xsl:text>: </xsl:text></DirectorLabel><Director><xsl:value-of select="Director"/></Director><xsl:text>
 </xsl:text></xsl:template> 

 <xsl:template match="CB"><CorrespondingBankLabel><xsl:value-of select="CorrespondingBankLabel"/></CorrespondingBankLabel><xsl:text>: </xsl:text><CorrespondingBank><xsl:value-of select="CorrespondingBank"/></CorrespondingBank><xsl:text>
 </xsl:text></xsl:template> 

 <xsl:template match="OfficeOfLabel">
 <OfficeOfLabel><xsl:value-of select="."/></OfficeOfLabel><xsl:text>
 </xsl:text></xsl:template>

 <xsl:template match="CO"><CityOfficeLabel><xsl:value-of select="CityOfficeLabel"/><xsl:text>:
 </xsl:text></CityOfficeLabel><CityOfficeAddress1><xsl:value-of select="CityOfficeAddress1"/></CityOfficeAddress1><xsl:text>
 </xsl:text><CityOfficeZip><xsl:value-of select="CityOfficeZip"/></CityOfficeZip><xsl:text>
 </xsl:text><CityOfficePhone><xsl:value-of select="CityOfficePhone"/></CityOfficePhone><xsl:text>
 </xsl:text></xsl:template> 

 </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:04:30.107

> 我唯一想做的就是获取元素 `<CityDescription>`并`<Population>`出现在输出的同一行

**这部分代码**：

```
<xsl:template match="CityDescription"><CityDescription><xsl:value-of select="."/></CityDescription> <xsl:text>  
</xsl:text></xsl:template> 
```

**`CityDescription`在元素之后显式生成一个 NL 字符**。

`CityDescription`这会导致额外生成的任何内容出现在元素下方至少一行。

一种明显的解决方案是删除`xslt:text`生成 NL 字符的 。

如果 NL 字符仅被几个空格替换，那么问题就消失了。

**这是修正后的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
          <xsl:output omit-xml-declaration="yes" indent="no" />
     <xsl:strip-space elements="*"/>

     <xsl:output method="xml"/>
     <xsl:template match="/">

     <Root>
     <Story><xsl:apply-templates select="Root/Story/CL"/></Story>
     </Root>
     </xsl:template>
     <xsl:template match="CityDescription"><CityDescription><xsl:value-of select="."/></CityDescription>
    <xsl:text> </xsl:text></xsl:template><xsl:template match="CL/Population"><Population><xsl:value-of select="."/></Population></xsl:template>

     <xsl:template match="BankName | Address1 | Hours | Established | RoutingNbr | CO/CityOfficePhone | CO/CityOfficeAddress2 "><xsl:element name="{name()}"><xsl:value-of select="."/></xsl:element></xsl:template>
     <xsl:template match="BK">
     <xsl:apply-templates select="BankName"/><xsl:text> </xsl:text><xsl:apply-templates select="Established"/><xsl:text>    </xsl:text><xsl:apply-templates select="RoutingNbr"/><xsl:text>
     </xsl:text>
     <xsl:apply-templates select="OfficeOfLabel"/>
     <xsl:apply-templates select="Address1"/><xsl:text> </xsl:text><xsl:apply-templates select="Hours"/><xsl:text>
     </xsl:text>
     <xsl:apply-templates select="Address2"/><xsl:apply-templates select="Zip"/>
     <xsl:apply-templates select="Phone"/><xsl:apply-templates select="Fax"/><xsl:text>
     </xsl:text>
     <xsl:apply-templates select="Email"/>
     <xsl:apply-templates select="Web"/>
     <xsl:apply-templates select="HoldingCo"/>
     <xsl:apply-templates select="TotalAssets"/><xsl:apply-templates select="TotalLiabilities"/>
     <xsl:apply-templates select="TotalDeposits"/><xsl:apply-templates select="EquityCapital"/>
     <xsl:apply-templates select="EH/Employee"/>
     <xsl:apply-templates select="D"/>
     <xsl:apply-templates select="CB"/>
     <xsl:apply-templates select="OFF"/>
     <xsl:apply-templates select="CO"/>
     <xsl:apply-templates select="MultiBankLabel"/>
     <xsl:apply-templates select="IBAGroup"/><xsl:apply-templates select="FDICNbr"/>
     </xsl:template>

     <xsl:template match="HoldingCo">
     <HoldingCo>
     <xsl:text>Holding Co: </xsl:text>
     <xsl:value-of select="."/></HoldingCo><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="Phone">
     <Phone><xsl:value-of select="."/></Phone><xsl:text>    </xsl:text></xsl:template>

     <xsl:template match="Fax">
     <Fax><xsl:value-of select="."/></Fax></xsl:template>

     <xsl:template match="EH/Employee">
     <Employee><xsl:value-of select="."/></Employee><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="Zip">
     <Zip><xsl:value-of select="."/></Zip><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="Address2">
     <Address2><xsl:value-of select="."/></Address2><xsl:text>  </xsl:text>
     </xsl:template>

     <xsl:template match="Email">
      <Email><xsl:value-of select="."/></Email><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="Web">
      <Web><xsl:text>Web: </xsl:text><xsl:value-of select="."/></Web><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="TotalAssets">
      <TotalAssets><xsl:text>Total Assets   $</xsl:text><xsl:value-of select="."/></TotalAssets><xsl:text>  </xsl:text>
     </xsl:template>

     <xsl:template match="TotalLiabilities">
      <TotalLiabilities><xsl:text>Total Liabilities $</xsl:text>
       <xsl:value-of select="."/></TotalLiabilities><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="TotalDeposits">
      <TotalDeposits><xsl:text>Total Deposits   </xsl:text>
       <xsl:value-of select="."/></TotalDeposits><xsl:text> </xsl:text>
     </xsl:template>

     <xsl:template match="EquityCapital">
      <EquityCapital><xsl:text>Equity Capital   </xsl:text><xsl:value-of select="."/></EquityCapital><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="IBAGroup">
      <IBAGroup><xsl:text>IBA Group: </xsl:text><xsl:value-of select="."/></IBAGroup><xsl:text> </xsl:text>
     </xsl:template>

     <xsl:template match="FDICNbr">
      <FDICNbr><xsl:text>FDIC Certificate No.: </xsl:text><xsl:value-of select="."/></FDICNbr><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="OFF"><OfficeLabel><xsl:value-of select="OfficeLabel"/><xsl:text>: </xsl:text></OfficeLabel><Office><xsl:value-of select="Office"/></Office><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="D"><DirectorLabel><xsl:value-of select="DirectorLabel"/><xsl:text>: </xsl:text></DirectorLabel><Director><xsl:value-of select="Director"/></Director><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="CB"><CorrespondingBankLabel><xsl:value-of select="CorrespondingBankLabel"/></CorrespondingBankLabel><xsl:text>: </xsl:text><CorrespondingBank><xsl:value-of select="CorrespondingBank"/></CorrespondingBank><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="OfficeOfLabel">
     <OfficeOfLabel><xsl:value-of select="."/></OfficeOfLabel><xsl:text>
     </xsl:text></xsl:template>

     <xsl:template match="CO"><CityOfficeLabel><xsl:value-of select="CityOfficeLabel"/><xsl:text>:
     </xsl:text></CityOfficeLabel><CityOfficeAddress1><xsl:value-of select="CityOfficeAddress1"/></CityOfficeAddress1><xsl:text>
     </xsl:text><CityOfficeZip><xsl:value-of select="CityOfficeZip"/></CityOfficeZip><xsl:text>
     </xsl:text><CityOfficePhone><xsl:value-of select="CityOfficePhone"/></CityOfficePhone><xsl:text>
     </xsl:text></xsl:template>

</xsl:stylesheet> 
```

**当应用于您上一个问题中提供的 XML 文档时，我正在使用所有九种不同的 XSLT 1.0 和 XSLT 2.0 处理器**：

```
<Root>
    <Story>
        <CL>
            <CityDescription>ACKLEY, HARDIN CO.</CityDescription>
            <Population>POP. 1589</Population>
            <BK>
                <BankName>Ackley State Bank</BankName>
                <BankType>BANKS</BankType>
                <Established>Est. 1934</Established>
                <RoutingNbr>0739-0535-2</RoutingNbr>
                <Address1>650 Main St</Address1>
                <Hours>Hrs: M-F 8-3</Hours>
                <Address2>PO Box 149</Address2>
                <Zip>50601-1438</Zip>
                <Fax>FAX: (641) 847-2011</Fax>
                <Phone>(641) 847-2651</Phone>
                <Email>e-Mail: asbinfo@bankasb.com</Email>
                <WebURL>Web: www.ackleystatebank.com</WebURL>
                <HoldingCo>GNB Bancorporation, Grundy Center</HoldingCo>
                <SubChapS>Yes</SubChapS>
                <TotalAssets>128,319,000</TotalAssets>
                <TotalLiabilities>117,059,000</TotalLiabilities>
                <TotalDeposits>89,847,000</TotalDeposits>
                <EquityCapital>11,260,000</EquityCapital>
                <IBAGroup>7</IBAGroup>
                <FDICNbr>14936</FDICNbr>
                <EH>
                    <Employee>Kevin Swalley, Chmn</Employee>
                </EH>
                <EH>
                    <Employee>V.J. Barker, Pres</Employee>
                </EH>
                <EH>
                    <Employee>Kathy M Eichmeier, VP, Cash</Employee>
                </EH>
                <EH>
                    <Employee>Darren Janssen, VP</Employee>
                </EH>
                <EH>
                    <Employee>Gene Sandell, CFO</Employee>
                </EH>
                <EH>
                    <Employee>Angela M Luhring, SLO</Employee>
                </EH>
                <EH>
                    <Employee>Briget Meyer, Mktg</Employee>
                </EH>
                <EH>
                    <Employee>Josh Meyer, LO</Employee>
                </EH>
                <EH>
                    <Employee>Sharon Pudenz, LO</Employee>
                </EH>
                <EH>
                    <Employee>Deb Willms, TO</Employee>
                </EH>
                <D>
                    <DirectorLabel>Directors</DirectorLabel>
                    <Director>Doug Hofmeister, Hollis Janssen, Joseph Wojcik, Bob Johanns, Steve McDowell, Kevin Swalley, Mark Sexton, Verlin (Gus) Barker</Director>
                </D>
                <CB>
                    <CorrespondingBankLabel>Correspondent Banks</CorrespondingBankLabel>
                    <CorrespondingBank>Bankers Bank, Madison; FHLB, Des Moines; Quad City Bank &amp; Trust; UMB, Kansas City; US Bank, NA, Cedar Rapids</CorrespondingBank>
                </CB>
                <OFF>
                    <OfficeLabel>Offices</OfficeLabel>
                    <Office>Geneva, Iowa Falls, Story City</Office>
                </OFF>
            </BK>
            <BK>
                <BankName>Green Belt Bank &amp; Trust</BankName>
                <RoutingNbr>0739-2167-9</RoutingNbr>
                <Address1>419 Sherman Ave</Address1>
                <Zip>50601-1206</Zip>
                <Fax>FAX: (641) 847-0022</Fax>
                <Phone>(641) 847-0011</Phone>
                <OfficeOfLabel>Office of Green Belt Bank &amp; Trust, Iowa Falls</OfficeOfLabel>
                <EH>
                    <Employee>Janet DeBerg, VP, OM</Employee>
                </EH>
            </BK>
            <BK>
                <BankName>Peoples Savings Bank</BankName>
                <Address1>33149 161st St</Address1>
                <Zip>50601-7774</Zip>
                <Fax>FAX: (641) 847-2602</Fax>
                <Phone>(641) 847-3126</Phone>
                <OfficeOfLabel>Office of Peoples Savings Bank, Wellsburg</OfficeOfLabel>
                <EH>
                    <Employee>Lance Haupt, LO</Employee>
                </EH>
            </BK>
        </CL>
        <CL>
            <CityDescription>ADAIR, ADAIR CO.</CityDescription>
            <Population>POP. 781</Population>
            <BK>
                <BankName>Exchange State Bank</BankName>
                <BankType>BANKS</BankType>
                <Established>Est. 1879</Established>
                <RoutingNbr>0739-0680-1</RoutingNbr>
                <Address1>322 Audubon</Address1>
                <Hours>Hrs: M-TH 9-3 F 9-5</Hours>
                <Address2>PO Box 98</Address2>
                <Zip>50002-0098</Zip>
                <Fax>FAX: (641) 742-3424</Fax>
                <Phone>(641) 742-3201</Phone>
                <WebURL>Web: www.esbanks.com</WebURL>
                <HoldingCo>Exchange Financial Inc., Adair</HoldingCo>
                <SubChapS>Yes</SubChapS>
                <TotalAssets>51,817,000</TotalAssets>
                <TotalLiabilities>46,937,000</TotalLiabilities>
                <TotalDeposits>39,503,000</TotalDeposits>
                <EquityCapital>4,880,000</EquityCapital>
                <IBAGroup>5</IBAGroup>
                <FDICNbr>18838</FDICNbr>
                <EH>
                    <Employee>Charles J Gaffey, Pres, CEO</Employee>
                </EH>
                <EH>
                    <Employee>Kendall Kerns, EVP, RELO</Employee>
                </EH>
                <EH>
                    <Employee>Debra Lemke, VP, Cash</Employee>
                </EH>
                <EH>
                    <Employee>Lisa J Plowman, AVP, IT</Employee>
                </EH>
                <EH>
                    <Employee>Mel Jorgensen, COO</Employee>
                </EH>
                <D>
                    <DirectorLabel>Directors</DirectorLabel>
                    <Director>Harold Scholl, Rex Noland, W. Edward Littler, Jr., Forrest Schnobrich, Stan Kading, Chris Schafer, Charles Gaffey</Director>
                </D>
                <CB>
                    <CorrespondingBankLabel>Correspondent Banks</CorrespondingBankLabel>
                    <CorrespondingBank>FHLB, Des Moines; MIB, Jefferson City, MO</CorrespondingBank>
                </CB>
                <OFF>
                    <OfficeLabel>Office</OfficeLabel>
                    <Office>Winterset</Office>
                </OFF>
            </BK>
            <BK>
                <BankName>Rolling Hills Bank &amp; Trust</BankName>
                <Address1>502 Broad Street</Address1>
                <Zip>50002</Zip>
                <Fax>FAX: (641) 742-3436</Fax>
                <Phone>(641) 742-3432</Phone>
                <OfficeOfLabel>Office of Rolling Hills Bank &amp; Trust, Atlantic</OfficeOfLabel>
                <EH>
                    <Employee>Mary Beth Petty, VP, BM</Employee>
                </EH>
            </BK>
        </CL>
        <CL>
            <CityDescription>ADEL, DALLAS CO.</CityDescription>
            <Population>POP. 3682</Population>
            <BK>
                <BankName>Lincoln Savings Bank</BankName>
                <BankType>BANKS</BankType>
                <Address1>805 Main Street</Address1>
                <Zip>50003</Zip>
                <Fax>FAX: (515) 253-9502</Fax>
                <OfficeOfLabel>Office of Lincoln Savings Bank, Reinbeck</OfficeOfLabel>
            </BK>
            <BK>
                <BankName>Peoples Trust &amp; Savings Bank</BankName>
                <Established>Est. 1917</Established>
                <RoutingNbr>0739-1921-2</RoutingNbr>
                <Address1>804 Greenwood Hills Dr</Address1>
                <Hours>Hrs: M-F 9-4 Sat 9-12</Hours>
                <Address2>PO Box 98</Address2>
                <Zip>50003-0098</Zip>
                <Fax>FAX: (515) 993-5681</Fax>
                <Phone>(515) 993-5680</Phone>
                <Email>e-Mail: info@ptsbank.com</Email>
                <WebURL>Web: www.ptsbank.com</WebURL>
                <OfficeOfLabel>Office of Peoples Trust &amp; Savings Bank, Clive</OfficeOfLabel>
                <EH>
                    <Employee>Dean W Boettcher, EVP, Mkt Pres</Employee>
                </EH>
                <EH>
                    <Employee>Colby Dawes, VP</Employee>
                </EH>
                <EH>
                    <Employee>Doran T Ryan, VP</Employee>
                </EH>
            </BK>
            <BK>
                <BankName>Raccoon Valley Bank</BankName>
                <Established>Est. 1914</Established>
                <Address1>1009 Court St</Address1>
                <Hours>Hrs: M-F 8-6  SAT 9-12</Hours>
                <Zip>50003-1477</Zip>
                <Fax>FAX: (515) 993-5127</Fax>
                <Phone>(515) 993-4581</Phone>
                <Email>e-Mail: roger-platz@raccoonvalleybank.com</Email>
                <WebURL>Web: www.raccoonvalleybank.com</WebURL>
                <OfficeOfLabel>Office of Raccoon Valley Bank, Perry</OfficeOfLabel>
                <EH>
                    <Employee>Doug Zeigler, VP</Employee>
                </EH>
                <EH>
                    <Employee>Joan Barber, AC</Employee>
                </EH>
            </BK>
            <BK>
                <BankName>Wells Fargo Bank, N.A.</BankName>
                <RoutingNbr>0730-0082-0</RoutingNbr>
                <Address1>100 Nile Kinnick Drive</Address1>
                <Zip>50003</Zip>
                <Fax>FAX: (515) 993-4555</Fax>
                <Phone>(515) 993-4551</Phone>
                <OfficeOfLabel>Office of Wells Fargo Bank, N.A., Des Moines</OfficeOfLabel>
                <EH>
                    <Employee>Brett A Smith, Dist. Mgr</Employee>
                </EH>
            </BK>
        </CL>
    </Story>
</Root> 
```

**产生以下结果 - 和元素`CityDescription`在`Population`同一行**：

<Root><Story><CityDescription>ACKLEY, HARDIN CO.</CityDescription> <Population>POP. 1589</Population><BankName>Ackley State Bank</BankName> <Established>Est。1934</Established> <RoutingNbr>0739-0535-2</RoutingNbr> <Address1>650 Main St</Address1> <Hours>Hrs: MF 8-3</Hours> <Address2>PO Box 149</Address2> <邮编>50601-1438</邮编> <电话>(641) 847-2651</电话> <传真>传真：(641) 847-2011</传真> <电子邮件>电子邮件：asbinfo@bankasb.com </Email> <HoldingCo>Holding Co: GNB Bancorporation, Grundy Center</HoldingCo> <TotalAssets>总资产 $128,319,000</TotalAssets> <TotalLiabilities>总负债 $117,059,000< 董事>Doug Hofmeister、Hollis Janssen、Joseph Wojcik、Bob Johanns、Steve McDowell、Kevin Swalley、Mark Sexton、Verlin (Gus) Barker</Director> <CorrespondingBankLabel>Correspondent Banks</CorrespondingBankLabel>：<CorrespondingBank>Bankers Bank, Madison；FHLB，得梅因；四城银行和信托；UMB，堪萨斯城；US Bank, NA, Cedar Rapids</CorrespondingBank> <OfficeLabel>办事处：</OfficeLabel><Office>日内瓦，爱荷华瀑布，故事城</Office> <IBAGroup>IBA 集团：7</IBAGroup> <FDICNbr>FDIC 证书编号：14936</FDICNbr> <BankName>绿带银行和信托</BankName> <RoutingNbr>0739-2167-9</RoutingNbr> <OfficeOfLabel>绿带银行和信托办公室，爱荷华瀑布<
<OfficeOfLabel>威尔斯堡人民储蓄银行办公室</OfficeOfLabel> <Address1>33149 161st St</Address1>
<邮编>50601-7774</邮编> <电话>(641) 847-3126</电话> <传真>传真：(641) 847-2602</Fax> <Employee>Lance Haupt, LO</Employee> < CityDescription>ADAIR, ADAIR CO.</CityDescription> <Population>POP. 781</Population><BankName>Exchange State Bank</BankName> <Established>Est. 1879</Established> <RoutingNbr>0739-0680-1</RoutingNbr> <Address1>322 Audubon</Address1> <Hours>Hrs: M-TH 9-3 F 9-5</Hours> <Address2>邮政信箱98</Address2> <Zip>50002-0098</Zip> <Phone>(641) 742-3201</Phone> <Fax>FAX: (641) 742-3424</Fax> <HoldingCo>Holding Co: Exchange金融公司，阿代尔</HoldingCo> < CorrespondingBankLabel>代理银行</CorrespondingBankLabel>: <CorrespondingBank>FHLB, Des Moines; MIB, Jefferson City, MO</CorrespondingBank> <OfficeLabel>办公室：</OfficeLabel><Office>Winterset</Office> <IBAGroup>IBA 集团：5</IBAGroup> <FDICNbr>FDIC 证书编号：18838</FDICNbr > <BankName>Rolling Hills Bank & Trust</BankName>
<OfficeOfLabel>大西洋 Rolling Hills Bank & Trust 办公室</OfficeOfLabel> <Address1>502 Broad Street</Address1>
<Zip>50002</Zip> <Phone>(641) 742-3432</Phone> <Fax>传真：(641) 742-3436</Fax> <Employee>Mary Beth Petty, VP, BM</Employee> <CityDescription>ADEL, DALLAS CO.</CityDescription> <Population>POP. 3682</Population><BankName>林肯储蓄银行</BankName>
<OfficeOfLabel>林肯储蓄银行办公室，Reinbeck</OfficeOfLabel> <Address1>805 Main Street</Address1> <Zip>50003</Zip> <Fax>传真：(515) 253-9502</Fax> <BankName>人民信托储蓄银行</BankName> <Established>Est。1917</Established> <RoutingNbr>0739-1921-2</RoutingNbr> <OfficeOfLabel>克莱夫人民信托和储蓄银行办公室</OfficeOfLabel> <Address1>804 Greenwood Hills Dr</Address1> <Hours>Hrs: MF 9-4 Sat 9-12</Hours> <Address2>PO Box 98</Address2> <Zip>50003-0098</Zip> <Phone>(515) 993-5680</Phone> <Fax>FAX: ( 515) 993-5681</Fax> <Email>电子邮件：info@ptsbank.com</Email> <Employee>Dean W Boettcher，执行副总裁，Mkt Pres</Employee> <Employee>Colby Dawes，副总裁</Employee> <Employee>Doran T Ryan，副总裁</Employee> <BankName>浣熊谷银行</BankName> <Established>Est。1914</成立>
<OfficeOfLabel>Perry 浣熊谷银行办公室</OfficeOfLabel> <Address1>1009 Court St</Address1> <Hours>Hrs: MF 8-6 SAT 9-12</Hours> <Zip>50003-1477</Zip > <电话>(515) 993-4581</电话> <传真>传真：(515) 993-5127</Fax> <电子邮件>电子邮件：roger-platz@raccoonvalleybank.com</电子邮件> <员工> Doug Zeigler, VP</Employee> <Employee>Joan Barber, AC</Employee> <BankName>Wells Fargo Bank, NA</BankName> <RoutingNbr>0730-0082-0</RoutingNbr> <OfficeOfLabel>富国银行办公室Bank, NA, Des Moines</OfficeOfLabel> <Address1>100 Nile Kinnick Drive</Address1>
<Zip>50003</Zip> <电话>(515) 993-4551</Phone> <Fax>传真：(515) 993-4555</Fax> <Employee>Brett A Smith, Dist. 经理</Employee> </Story></Root>

# jquery - django 将“post”识别为“get”

> ID：11026257
> 
> 赞同：1
> 
> 时间：2012-06-14T03:27:03.957
> 
> 标签：jquery, python, html, django

我所有的“发布”操作都被识别为“获取”我已经尝试了我所知道的一切来解决这个问题，但一切似乎都井井有条。每次提交表单都会返回“GET”。

网址.py

```
from django.conf.urls.defaults import *
urlpatterns = patterns('',
 url(r'^buildit/$', 'main.apps.builder.views.main'),
) 
```

视图.py

```
from django.http import HttpResponse

def main(request):
  return HttpResponse(request.method) 
```

html表单

```
<form id="myform">
<input type="checkbox" name="list" value="audio"/> Audio<br />
<input type="checkbox" name="list" value="video"/> Video<br />
<input type="submit" value="Get Custom Library!" /> 
</form> 
```

jQuery

```
$(document).ready(function() {

$("#myform").submit(function() {

    serialize = $(this).serialize()

    $.ajax({
    type: 'POST',
    url: '/django/builder/buildit',
    data: serialize,
    crossDomain: false,
    success: function(response){
        alert(response);
    }
});

    return false;

    $(document).ajaxSend(function(event, xhr, settings) {
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
function sameOrigin(url) {
    // url could be relative or scheme relative or absolute
    var host = document.location.host; // host + port
    var protocol = document.location.protocol;
    var sr_origin = '//' + host;
    var origin = protocol + sr_origin;
    // Allow absolute or scheme relative URLs to same origin
    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
        // or any other URL that isn't scheme relative or absolute i.e relative.
        !(/^(\/\/|http:|https:).*/.test(url));
}
function safeMethod(method) {
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}

if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
    xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
}
});

});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:10:07.187

Now I'm no expert on Django here...but it seems like Django will override any requests if there is an Append_Slash issue. It will redirect the request with the slash appended at the end, at this point, it will lose any POST information and will return the GET method. Maybe try putting a / at the end of /django/builder/buildit? Shot in the dark... (Would seem this only matters if APPEND_SLASH = false...)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T03:33:16.007

不妨把它放在你的表格中

```
<form id="myform" method="post"> 
```

奇怪缩进的 javascript 很难阅读。`return false;`但是，为什么在没有关闭提交回调的情况下还有代码呢？

# javascript - HTML 和 JavaScript 自动递增编号

> ID：11026258
> 
> 赞同：5
> 
> 时间：2012-06-14T03:27:09.290
> 
> 标签：javascript, html, dom, html-table

我是 HTML 和 JavaScript 的新手。我在 HTML 中遇到了这样的问题（下面的代码仅将问题可视化以方便您参考。）

```
<tr>
    <td>1</td>
    <td>Harry</td>
</tr>
<tr>
    <td>2</td>
    <td>Simon</td>
</tr>
    <td>3</td>
    <td>Maria</td>
</tr>
</tr>
    <td>4</td>
    <td>Victory</td>
</tr> 
```

这是一个名字列表，但问题是有时我需要在这个表中添加更多名字，我必须在数字 1 前面添加，所以这意味着我必须重新编写数字列表，（例如：1 1 2 3 4 --> 1 2 3 4 5)。我觉得这不是一个好方法。

注意：我不想更改列表编号从上到下减少。这是一个 HTML 文件，所以不能应用 PHP

任何人都可以帮我把数字变成像“i”这样的变量，一个函数可以帮助我填充变量我从上到下自动递增，比如

```
<tr>
    <td>i</td>
    <td>Harry</td>
</tr>
<tr>
    <td>i</td>
    <td>Simon</td>
</tr>
    <td>i</td>
    <td>Maria</td>
</tr>
</tr>
    <td>i</td>
    <td>Victory</td>
</tr> 
```

以函数Fill_i为例：我认为在这种情况下应该使用JavaScript。感谢您对此问题的帮助和建议。

再说一遍：我不允许使用 PHP 或 ASP，当我添加新名称时，我会通过 HTML 手动添加它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T03:41:46.217

您可以使用[css 计数器](http://www.w3.org/TR/CSS21/generate.html#counters)- [MDN](https://developer.mozilla.org/en/CSS_Counters)

```
table {
  counter-reset: section;
}

.count:before {
  counter-increment: section;
  content: counter(section);
}
```

```
<table>
  <tr>
    <td class="count"></td>
    <td>Harry</td>
  </tr>
  <tr>
    <td class="count"></td>
    <td>Simon</td>
  </tr>
  <tr>
    <td class="count"></td>
    <td>Maria</td>
  </tr>
  <tr>
    <td class="count"></td>
    <td>Victory</td>
  </tr>
</table>
```

[小提琴](http://jsfiddle.net/mowglisanu/cqaNB/3/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T03:34:47.110

这应该适合你：

```
<table>
  <tr>
    <td>Harry</td>
  </tr>
  <tr>
    <td>Simon</td>
  </tr>
  <tr>
    <td>Maria</td>
  </tr>
  <tr>
    <td>Victory</td>
  </tr>
</table>
<script>
    var tables = document.getElementsByTagName('table');
    var table = tables[tables.length - 1];
    var rows = table.rows;
    for(var i = 0, td; i < rows.length; i++){
        td = document.createElement('td');
        td.appendChild(document.createTextNode(i + 1));
        rows[i].insertBefore(td, rows[i].firstChild);
    }
</script> 
```

该脚本应立即放在您的桌子之后。它遍历表格的每一行，并在开头添加一个额外的单元格，该单元格内的数字递增。

[**JSFiddle 演示**](http://jsfiddle.net/Paulpro/4WHpr/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T03:37:26.277

编辑：似乎发布的[其他解决方案](https://stackoverflow.com/a/11026311/1405819)可以工作（在我输入时添加）。

你真的应该使用 PHP 来做这样的动态事情，这对于单个 for 循环来说将变得微不足道。

但是，如果您坚持使用 HTML/Javascript（或者这可能是一个“静态页面”......），那么您所要求的应该是可能的。

您可以为要使用的每个`<td>`元素添加一个类，因此：

```
<tr>
    <td class='personid'>i</td>
    <td>Harry</td>
</tr>
<tr>
    <td class='personid'>i</td>
    <td>Simon</td>
</tr>
    <td class='personid'>i</td>
    <td>Maria</td>
</tr>
</tr>
    <td class='personid'>i</td>
    <td>Victory</td>
</tr> 
```

然后你会有一个 javascript 函数来做这样的事情：

```
var list = document.getElementsByClassName("personid");
for (var i = 1; i <= list.length; i++) {
    list[i].innerHTML = i;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T03:53:16.557

```
<script>
function addRow(index, name){
    var tbody = document.getElementById("nameList");
    var row = document.createElement("tr");
    var data1 = document.createElement("td");
    data1.appendChild(document.createTextNode(index));
    var data2 = document.createElement("td");
    data2.appendChild(document.createTextNode(name));
    row.appendChild(data1);
    row.appendChild(data2);
    tbody.appendChild(row);
}
var name=new Array();
name[0]="Harry";
name[1]="Simon";
name[2]="Maria";
name[3]="Victory";
for(var i=0; i < name.length; i++) {
    addRow(i,name[i]);
}
</script>
<html>
<body>
<table id="nameList">
</table>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T03:46:16.233

你确定你不想要一个有序列表吗？

```
<ol>
  <li>Fred</li>
  <li>Barry</li>
</ol> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T03:43:09.790

我会说这样做（我会假设你不会加载 jquery 或任何花哨的东西）：

```
<html>
<head>
<script type="text/javascript>
function writeTable(){
// list of names
var myList = [ "name1", "name2", "etc", "etc"];
// your variable to write your output
var outputTable = "<table>";
//the div to write the output to
var outputDiv = document.getElementById("output");
//the loop that writes the table
for (var i=0; i<myList.length; i++){
   outputTable += "</tr><td>"+i+"</td><td>"+myList[i]+"</td></tr>";
}
//close the table
outputTable += "</table>";
//write the table
outputDiv.innerHTML = outputTable;
}
</script>
</head>
<body onload=writeTable()>
<div id='output'></div>
</body>
</html> 
```

希望这可以帮助 ：）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-20T06:53:52.783

尝试这个

```
$(document).ready(function() {
    var addSerialNumber = function () {
        $('table tr').each(function(index) {
            $(this).find('td:nth-child(1)').html(index);
        });
    };
    addSerialNumber();
 }); 
```

# mysql - 在一个结果集中的不同行上多次连接表

> ID：11026267
> 
> 赞同：0
> 
> 时间：2012-06-14T03:28:10.010
> 
> 标签：mysql, group-by, outer-join

所以我有 2 个表（简化如下）

```
members                     documents
------------                ------------------
id | name | registered      id | member_id | type | expiry
----------------------      ------------------------------
1  | AAA  | 1234567890      1  | 1         | 1    | 1234567890
2  | BBB  | 1234567890      2  | 1         | 2    | 1234567891
3  | CCC  | 1234567890      3  | 1         | 3    | 1234567892
                            4  | 2         | 1    | 1234567893
                            5  | 2         | 2    | 1234567894
                            6  | 2         | 3    | 1234567890 
```

我需要像这样显示这些：

```
member id | name | doc 1 expiry | doc 2 expiry | doc 3 expiry 
--------------------------------------------------------------
1         | AAA  | 1234567890   | 1234567891   | 1234567892
2         | BBB  | 1234567893   | 1234567894   | 1234567895 
```

我尝试使用多个外部连接和别名进行查询，但它只是重复文档到期时间戳。这是我到目前为止所拥有的：

```
 SELECT DISTINCT `members`.`id`, `members`.`name`, `a`.`expiry` AS `expiry1`, `b`.`expiry` AS `expiry2`, `c`.`expiry` AS `expiry3` 
    FROM `members` 
    LEFT OUTER JOIN `documents` a ON `a`.`member_id` = `members`.`id` 
    LEFT OUTER JOIN `documents` b ON `b`.`member_id` = `members`.`id` 
    LEFT OUTER JOIN `documents` c ON `c`.`member_id` = `members`.`id` 
    GROUP BY `members`.`id` 
```

人们需要能够通过它进行搜索，例如列出文档类型 3 已过期的每个人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:40:49.090

尝试

```
SELECT 
    a.id AS 'member id',
    a.name
    SUM(a.d1exp) AS 'doc 1 expiry',
    SUM(a.d2exp) AS 'doc 2 expiry',
    SUM(a.d3exp) AS 'doc 3 expiry'
FROM
    (
        SELECT 
            aa.id,
            aa.name,
            COALESCE(d1.expiry, 0) AS d1exp,
            COALESCE(d2.expiry, 0) AS d2exp,
            COALESCE(d3.expiry, 0) AS d3exp
        FROM
            members aa
        LEFT JOIN
            documents d1 ON aa.id = d1.member_id AND d1.type = 1
        LEFT JOIN
            documents d2 ON aa.id = d2.member_id AND d2.type = 2
        LEFT JOIN
            documents d3 ON aa.id = d3.member_id AND d3.type = 3
    ) a
GROUP BY
    a.id,
    a.name 
```

这是假设“到期”字段中的值是数字的。

# php - 使用 PHP 序列化 XML 数据以存储在 MySQL 中

> ID：11026272
> 
> 赞同：0
> 
> 时间：2012-06-14T03:28:53.027
> 
> 标签：php, mysql, xml, serialization, storage

我有一系列非常复杂的 XML 文件。我需要经常访问这些，所以阅读 .xml 文件有点麻烦。我一直在考虑编写一系列大型 SQL 语句，但在开始这项大型任务之前，我想知道如何将整个 XML 文件序列化以在 MySQL 中存储为 blob。

```
My intentions: 
XML -> store_into_database()
database -> read_seralized_data($row)
echo -> un_serialize_data($row) 
```

这将允许我存储从在线数据库解析的 .xml 文件，并且只需执行一次 I/O 操作。

还是这样做的错误方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:35:12.790

XML 是存储制造商强加给世界的一个阴谋，他们希望通过对所有数据进行 xml 化来使所有数据的大小呈指数膨胀，从而增加他们的利润。它作为一种存储/检索格式很糟糕，具有大量存储和解析开销。

由于您需要经常访问这些 xml 文件，因此最好将它们转换为原生 SQL 表结构，以便您可以在它们上使用实际的数据库操作、索引等。如果你幸运的话，也许你有一个可以本地处理 XML 的数据库，你应该利用它。否则，您每次都需要检查天空是否仍然是蓝色时，您会卡住检索 blob、反序列化 blob、将该 blob 输入 DOM 解析器、然后执行 DOM 操作。

# google-chrome-extension - 在不属于 chrome 扩展的随机选项卡中执行脚本将结果发送回后台 javascript

> ID：11026279
> 
> 赞同：0
> 
> 时间：2012-06-14T03:30:16.277
> 
> 标签：google-chrome-extension

我想检查 a 元素的 html

```
chrome.tabs.executeScript(tab_id,{code: 'sendRequestToBackground(document.getElementById('important_val').innerHTML); '},

function(){

}); 
```

我希望能够从我的后台脚本中获取此值，我看到了很多示例，`chrome.extension.sendRequest`因为`chrome.extension.onRequest.addListener`所有示例都是从扩展 popup.html 到后台脚本，反之亦然。

但是我打开一个全新的选项卡，更改 URL，并且我想获取一个字段的值（顺便说一句，它是通过 Javascript 生成的）属于这个随机选项卡。

有可能这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:01:56.757

如果要将代码注入随机选项卡，请执行以下操作：

1.  确保对manifest.json 中的“tabs”和“<all_urls>”有[权限](http://code.google.com/chrome/extensions/manifest.html#permissions)
2.  [使用chrome.tabs.query](http://code.google.com/chrome/extensions/tabs.html#method-query)获取所有选项卡
3.  使用随机选择标签`Math.random()`
4.  [使用chrome.tabs.executeScript](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)注入代码
5.  在注入的代码中调用[chrome.extension.sendRequest](http://code.google.com/chrome/extensions/extension.html#method-sendRequest)
6.  在后台页面上使用[chrome.extension.onRequest接收消息](http://code.google.com/chrome/extensions/extension.html#event-onRequest)

# python - 关于使用 Python 渲染 web 框架的代码问题

> ID：11026285
> 
> 赞同：0
> 
> 时间：2012-06-14T03:30:48.220
> 
> 标签：python, google-app-engine, templates, render

绝对是初学者的问题......基本上，我想从这个网站获得相同的设计。我了解 HTML 部分，但问题是我不完全确定如何在一个视图中实际呈现多个 html 文件。

[http://www.htmliseasy.com/frames_tutor/templates/template1.html](http://www.htmliseasy.com/frames_tutor/templates/template1.html)

我的网页在这个链接中。[http://everyology.appspot.com/biology](http://everyology.appspot.com/biology)

我使用的是谷歌应用引擎。这是与问题相关的部分代码。我关心的是 BioPage 类...我写了这些并且看到了框架，但在我的网页中出现了 404 错误。

```
import os
import webapp2
from string import letters

import jinja2

template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                           autoescape = True)

def render_str(template, **params):
    t = jinja_env.get_template(template)
    return t.render(params)

class MainHandler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)

    def render_str(self, template, **params):
        return render_str(template, **params)

    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

class MainPage(MainHandler):
    def get(self):
        self.render('index.html')

class BioPage(MainHandler):
    def get(self):
        self.render('biology.html') 
        self.render('doc1.html')
        self.render('doc2.html') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:11:42.723

您遇到的问题是`<frame>`标签的运作方式。*为了填充帧，浏览器每帧*发出一个额外的请求。您的代码试图提前猜测，将所有帧内容打包返回。这不是它的工作原理。除了主页之外，您还需要为每个框架提供单独的处理程序。或者，可以为那些完全静态的页面提供静态页面。

# ruby-on-rails-3 - 带有 optgroup 标签的 awesome_nested_set

> ID：11026288
> 
> 赞同：2
> 
> 时间：2012-06-14T03:31:06.753
> 
> 标签：ruby-on-rails-3, optgroup

我正在使用位于[https://github.com/collectiveidea/awesome_nested_set](https://github.com/collectiveidea/awesome_nested_set)的 awesome_nested_set gem 。我想制作父类别 optgroup 标签，但不知道如何做到这一点，或者是否有可能。在某处有这种行为的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:49:21.267

这当然不是最有效的方法，但它满足了任务的要求。

```
 <select name="category_id" data-placeholder="Select a Category" class="chzn-select">
     <option value=""></option>
     <% @cats.each do |cat| %>
     <optgroup label="<%= cat.name %>">
        <% cat.children.each do |child| %>
        <option value="<%= child.id %>"><%= child.name %></option>
        <% end %>
     </optgroup>
     <% end %>
  </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T21:01:24.057

有点晚了，但我有同样的问题，并根据[https://github.com/collectiveidea/awesome_nested_set/blob/master/lib/awesome_nested_set/helper.rb使用辅助方法解决了它](https://github.com/collectiveidea/awesome_nested_set/blob/master/lib/awesome_nested_set/helper.rb)

```
module ApplicationHelper
  def grouped_nested_set_options(class_or_item, mover = nil)
    if class_or_item.is_a? Array
      items = class_or_item.reject { |e| !e.root? }
    else
      class_or_item = class_or_item.roots if class_or_item.respond_to?(:scope)
      items = Array(class_or_item)
    end
    result = []
    group = []
    items.each do |root|
      root.class.associate_parents(root.self_and_descendants).map do |i|
        if i.level == 0
          group = []
          group.push yield(i)
          group.push []
          result.push group
        else
          if mover.nil? || mover.new_record? || mover.move_possible?(i)
            group[1].push [yield(i), i.primary_id]
          end
        end
      end.compact
    end
    result
  end
end 
```

这样您就可以使用 grouped_nested_set_options 而不是 nested_set_options 并且您仍然可以使用 rails 的表单助手来生成 html。

# r - 用m维数组选择N维数组的子集？

> ID：11026289
> 
> 赞同：2
> 
> 时间：2012-06-14T03:31:08.540
> 
> 标签：r, multidimensional-array

是否可以选择具有二维二进制数组的三维数组的子集？我希望能够做到这一点，以便我可以将值推送到选择中

例如，我有一个数组 dim(a) = (lat, long, time)，我想使用 dim(b) = (lat, long) 进行选择，这是一个充满 TRUE/FALSE 值的数组。我希望能够做类似的事情：

```
> a <- array(c(1,2,3,4,5,6,7,8),c(2,2,2))
> b <- matrix(c(0,1,0,0), c(2,2))==TRUE
> a[[b]] <- 0
> a
, , 1
     [,1] [,2]
[1,]    1    3
[2,]    0    4

, , 2
     [,1] [,2]
[1,]    5    7
[2,]    0    8 
```

**编辑**：好的，所以这看起来像一个愚蠢的问题，因为我刚刚意识到它的工作原理与上述完全一样，如果你使用`a[b] <- 0`（单括号）。但这仅在您要跨越的维度是最后的维度时才有效。所以，为了让它更有趣：

**如果您要跨越的维度是第一个或第二个维度，您怎么能做到这一点 - 例如。如果暗淡（b）==（纬度，年）？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T03:44:46.670

R 支持使用运算符对数组进行矩阵子集`[`（即单括号，而不是双括号 - 双括号将始终只返回单个元素）：

```
a[b] <- 0
a

, , 1

     [,1] [,2]
[1,]    1    3
[2,]    0    4

, , 2

     [,1] [,2]
[1,]    5    7
[2,]    0    8 
```

* * *

请注意，这与您在问题中指定的结果有些不同。在您的问题中，第二个元素（即矩阵的左下角元素）是 1，因此您会期望每个数组切片的第二个元素被修改。（换句话说，不是第一个，就像你在你的例子中那样。）

# opengl - 在OpenGL中使对象跟随相机

> ID：11026298
> 
> 赞同：1
> 
> 时间：2012-06-14T03:32:15.707
> 
> 标签：opengl, 3d, camera

我正在使用 OpenGL 制作赛车游戏（只是一个小项目），但在尝试让我的汽车跟随相机视图时遇到问题。

当相机向前和/或向后移动时，让它跟随相机并不难，但是当我旋转相机（向右或向左看）时，汽车仍然静止。我的意思是，它仍然向前和向后移动，但它不在相机前面（它在侧面）。

这是我的代码（我尝试实现它的部分）：

```
void updateCam() {
    gluLookAt(posX,posY + 0.025 * std::abs(sin(headPosAux*PI/180)),posZ,
        posX + sin(roty*PI/180),posY + 0.025 * std::abs(sin(headPosAux*PI/180)) + cos(rotx*PI/180),posZ -cos(roty*PI/180),
        0.0,1.0,0.0);

    listenerPos[0] = posX;
    listenerPos[1] = posY;
    listenerPos[2] = posZ;

    source0Pos[0] = posX;
    source0Pos[1] = posY;
    source0Pos[2] = posZ;

    GLfloat distD;

    distD = posZ - 3.3;

    //makes the car "follow" the camera
    modelPOR.Translate(posX,posY,distD);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:38:15.420

我认为问题在于您更改了 gluLookAt 中的中心位置，而不是 modelPOR.Translate

gluLookAt 的 3 个中间参数设置视图的中心，因此汽车应该在完全相同的位置，但您修改中心而不修改汽车的位置。

```
gluLookAt(posX,posY + 0.025 * std::abs(sin(headPosAux*PI/180)),posZ,

    // center x
    posX + sin(roty*PI/180),
    // center y
    posY + 0.025 * std::abs(sin(headPosAux*PI/180)) + cos(rotx*PI/180),
    // center z
    posZ -cos(roty*PI/180),

    0.0,1.0,0.0); 
```

你可能应该用这些相同的值来翻译汽车。然后它将居中。

该代码中似乎存在的另一个问题是您旋转了相机而不是汽车，因此汽车可能不会与相机保持指向同一方向。（这是想要的还是你在其他地方做的？）

但是你真的确定要让汽车跟随摄像头吗？反过来可能会更好。

# autocomplete - 如何在 Komodo Edit 7 上更改自动完成字体大小？

> ID：11026303
> 
> 赞同：1
> 
> 时间：2012-06-14T03:33:01.920
> 
> 标签：autocomplete, komodoedit

我最近从 6.1 升级到 Komodo Edit 7，虽然升级相当顺利，但自动完成建议的字体大小突然变大了

![](../Images/78d732237ecc4d5cfbc0d5c0ba1cd649.png)

有什么办法可以改变这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:35:47.533

在 Komodo 编辑论坛上找到答案：http: [//community.activestate.com/node/7289](http://community.activestate.com/node/7289)

要解决此问题，您需要在（[不同操作系统的应用数据位置](http://community.activestate.com/faq/komodo-file-locations#appdata_dir)）文件夹中创建（如果尚未这样做）一个[`userChrome.css`](http://community.activestate.com/faq/customizing-komodo-ui)文件，以覆盖自动完成菜单的原始样式。将以下代码复制到文件中并保存，然后重新启动 Komodo，菜单字体大小应恢复正常。`<application data folder>/XRE/chrome`

```
scintilla > panel[anonid="autocompletepopup"] .ko-autocomplete-item {
    font-size: 100% !important;
} 
```

# facebook - Open Graph 中的 Publsih 操作给出错误

> ID：11026308
> 
> 赞同：0
> 
> 时间：2012-06-14T03:34:14.703
> 
> 标签：facebook, facebook-c#-sdk, facebook-opengraph

我正在使用下面的代码在打开图中使用 Post 操作，但收到错误消息“[Object Object]”

可能是什么问题？？？，我按照所有分步指南从该 URL [https://developers.facebook.com/docs/opengraph/tutorial/#publish发布操作](https://developers.facebook.com/docs/opengraph/tutorial/#publish)

```
<script type="text/javascript">
       function postArticle() {
           FB.api(
        '/me/ICONSolutions-test:Read',
        'post',
        { Article: 'http://fbwerks.com:8000/zhen/cookie.html' },
        function (response) {
            if (!response || response.error) {
                alert(response.error);
            } else {
                alert('Successful! Action ID: ' + response.id);
            }
        });
       }
  </script>

<input type="button" value="POST" onclick="postArticle()" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:11:11.263

您正在`alert()`处理一个没有 toString 方法的对象，该方法提供对象的可读表示。

将值转储到控制台，`console.log(response)`然后在 Firebug 或实现控制台的类似调试工具中查看它。

# html - 保持元素可见，但防止溢出其父元素？

> ID：11026310
> 
> 赞同：1
> 
> 时间：2012-06-14T03:34:43.290
> 
> 标签：html, css, position, background-image, css-position

有没有办法让元素不导致父溢出，但保持可见？让我澄清一下

有一个类似水印的标志以下面的方式应用到一个页面上。它应该部分位于主要内容之外（蓝色虚线）

我不知道以这样一种方式设置元素背景的选项，它会随着浏览器窗口水平调整大小而持续存在，所以我刚刚添加了一个`<div>`带有徽标作为其背景并`position:absolute`具有相对于 main 的必要偏移量的选项内容容器。

以前，只要浏览器宽度大于`W1`. 现在，*在主内容框之外添加了一个额外的“水印”元素*，只要浏览器比`W2`

我有什么明显的遗漏吗？背景设置，或者可能是一个整洁的边距解决方法/

![小样](../Images/277ff532460105ef7ad1fee7c98c2b83.png)

## 更新：

我添加了一个[粗略的 jsfiddle 来说明这个问题](http://jsfiddle.net/ovfiddle/spsww/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:40:11.413

请记住，元素的宽度大于包含填充和边距的实际“宽度”，如果您的 div 上有填充，则将“宽度”减少等量。

那有意义吗？如果您发布实际的 css 和 html，可能会更容易给您更详细的答案

另外，您能否不将图像指定为实际主体元素的背景并将其设置为居中？

我玩过代码，并为你想出了一个可能的解决方案。

放

```
body{overflow-x:hidden;} 
```

然后加

```
@media all and (max-width: 400px)
{
 body{overflow-x:auto;   }
} 
```

一旦您的屏幕小于 400 像素（div 的宽度），您的溢出：隐藏将被覆盖，您将获得滚动条。

此时您可能还想减小水印的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:37:53.767

不幸的是，仅仅因为您嵌套了“水印” div 并将其定位绝对不会使其位于文档之外。如果将其放在文档之外，页面将滚动（如您所见）。

对我来说，我想到的第一个解决方案是将水印移到“内容”div 之外，并将水印应用到其父容器。我猜你没有这样做，因为你需要它与“内容”div相关，但这是值得尝试的。

此外，它滚动的原因是因为文档已经溢出。快速修复但不推荐使用“overflow-x: hidden;” 在“内容” div 的父容器上。

由于您已经剥离了 HTML 的其余部分，因此很难为您提供解决方案，如果您的结构在某些方面很复杂，一些“修复”可能不适用。

# python - 从 UDP 套接字读取所有数据

> ID：11026316
> 
> 赞同：4
> 
> 时间：2012-06-14T03:35:20.193
> 
> 标签：python, sockets, udp

## 情况：

我有一个绑定到 localhost UDP 端口 33100 的 sendersocket。我有一个绑定到 localhost UDP 端口 33101 的 receiversocket 套接字。

发送方套接字发送 4500 字节的数据（字符串“hello man”* 500）。在接收方，我有一个 epoll 对象，它等待接收方套接字上的 EPOLLIN 事件。当有活动时，我会：

```
while True:
    msg_received = receiver_socket.recv(128)
    if msg_received.decode("UTF-8") == "":
        break
    else:
        print msg_received.decode("UTF-8") 
```

## 问题：

*主要*问题是在读取了前 128 个字节的数据后，我无法再次读取。发送方说它按预期发送了 4500 字节的数据。

如果发送方再次发送相同的 4500 字节数据，则再次注册 EPOLLIN 事件并读取新字符串。不知何故，缓冲区在我第一次阅读后被清除。

现在即使发件人刚刚给我发送了 4500 字节的数据，第一个`recv`给了我 128 字节的数据，然后什么都没有`recv`。

我可能正在做一些非常愚蠢的事情，所以请赐教。我想接收所有 4500 字节的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T04:32:39.190

`65535`如果您还不知道数据包的大小，则应始终使用（UDP 数据包的最大大小）调用 recv 。否则，当您调用 时`recv`，整个数据包被标记为已读并从缓冲区中清除，但只有第一个`128`字节被馈送到`msg_received`.

**编辑**：当（如果）您转换为仅通过网络接收数据时，您可以使用较小的数字`recv`，如[文档中所述](http://docs.python.org/library/socket.html#socket.socket.recv)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:39:56.343

如果你知道你将获得 4500 字节的数据，你可以调用`receiver_socket.recv(4500)`

您的代码是说要读取的*最大*字节数是 128`receiver_socket.recv(128)`

请参阅[套接字的 python 文档](http://docs.python.org/library/socket.html)

# android - 当绘制位图/圆形/文本或任何内容并且用户切换到横向或纵向时，画布会崩溃

> ID：11026317
> 
> 赞同：0
> 
> 时间：2012-06-14T03:35:25.397
> 
> 标签：android, canvas, switch-statement, landscape, portrait

我几乎只是在我的 android 应用程序上有一个画布，在屏幕中央有一个文本（我尝试了一个像 100,100 或像 canvas.getWidth()/2、canvas.getHeight()/2 这样的设置位置）当用户在切换过程中将模式从纵向切换到横向或从横向切换到纵向，它会崩溃并报告空指针异常。当画布上没有任何内容时，我可以在两种模式之间自由切换。我怎样才能停止崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:44:12.317

在 Android 清单文件中将此属性添加到活动标记中

```
 android:configChanges="orientation" 
```

那么可能是您的问题解决了，因为当方向发生变化时，活动正在重新启动并且所有对象都具有空引用..

# html - 如何完全切断由溢出部分隐藏的未知高度的列表元素：隐藏

> ID：11026319
> 
> 赞同：0
> 
> 时间：2012-06-14T03:35:47.913
> 
> 标签：html, css, list, twitter, hidden

我有一些 javascript 从 twitter 提要中提取状态更新，以及`div`一个将高度设置为`overflow:hidden`. 问题是 hidden 并没有完全切断列表元素，而是从字面上切断高度停止的地方。

如何删除整个`li`元素？我从不知道每个列表元素的高度，因为 twitter 状态的大小各不相同。

此代码吐出一个带有未定义高度的列表元素的无序列表：
... 编辑：

这是大部分代码。$param 变量是用户输入。

```
<style type="text/css">
<!--
#twitterbox { border: 1.5px $paramborder $parambordercolor; width: $paramwidth; height: $paramheight; overflow: hidden; display: block; }
#twitter_update_list { padding-left: 30px; list-style-image:url(local/smalltwitter.png);}
#twitter_update_list li { word-wrap: break-word; margin-right: 10px; }
#twitter_update_list li a { display: block; text-align: right;}
#twitter_update_list li span a { display: inline; text-align: left;}
-->
</style>

<div id="twitterbox">
<div class="tabletitle" id="twittertitle" style="width:100%">$paramheader</div>
<div id="twitter_div">
<ul id="twitter_update_list"></ul>
</div>
<script type="text/javascript" src="https://twitter.com/javascripts/blogger.js">
</script>
<script type="text/javascript"
src="https://twitter.com/statuses/user_timeline/$generalUtil.urlEncode("$paramuser").concat(".json?callback=twitterCallback2&amp;count=$paramcount")">
</script>
</div>

<script type="text/javascript">
var list = document.getElementById("twitter_update_list");
var sHeight = list.scrollHeight;
var dHeight = document.getElementById("twitterbox").offsetHeight;
var titleHeight = document.getElementById("twittertitle").offsetHeight;

while (sHeight > dHeight-titleHeight) {
  list.removeChild(list.lastChild);
  sHeight =  list.scrollHeight;
}
</script> 
```

两件事情。在大多数情况下，它都在工作。在 li 元素中，twitter 脚本会生成一个 span 元素和一个锚点。如果它在跨度处截断，它将删除整个列表元素，但如果它在锚点处截断，那么它会显示出来。然而，现在已经是深夜了，我一定是做了一些事情，导致提要本身无法正常工作。这是最有效的做事方式吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:55:00.667

由于您已经使用 javascript 填充 div，因此您可以检查它[`scrollHeight`](https://developer.mozilla.org/en/DOM/element.scrollHeight)是否大于`height`. 如果是，则从底部删除列表项，直到`scrollHeight <= height`.

# c# - C# 日期时间算术溢出错误

> ID：11026320
> 
> 赞同：2
> 
> 时间：2012-06-14T03:36:38.530
> 
> 标签：c#, sql, datetime

我编写了一个代码来存储当前日期和时间值。前天完全按照我的意愿工作。但是今天它显示错误`"Arithmetic overflow error converting expression to data type datetime. The statement has been terminated."`

有谁能够帮助我？这是我的代码，

```
protected void Button1_Click(object sender, EventArgs e)
{
    con.Open();
    string q;
    q = "insert into tbl_MR(RequirementFor,Category,MRNO,CreatedBy,CreatedDate)values(@rf,@cat,@mr,@cb,@cd)";
    SqlCommand cmd = new SqlCommand(q, con);
    cmd.Parameters.AddWithValue("@rf", CCddl.SelectedItem.Text);
    cmd.Parameters.AddWithValue("@mr", TextBox1.Text.Trim());
    cmd.Parameters.AddWithValue("@cat", TextBox3.Text.Trim());
    cmd.Parameters.AddWithValue("@cb", Session["loginid"].ToString());
    string cd1, date1;
    cd1 = System.DateTime.Today.ToShortDateString();
    date1 = Convert.ToDateTime(cd1).ToString("dd/MM/yyyy");
    cmd.Parameters.AddWithValue("@cd", date1.ToString());
    cmd.ExecuteNonQuery();
    string alertmessage = "";
    alertmessage = "Component Details Saved";
    this.CreateMessageAlert(this, alertmessage, "alertKey");
    con.Close();  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:47:15.590

您无需将日期转换为字符串即可将其发送到 SQL Server。

而不是所有这些：

```
string cd1, date1;
cd1 = System.DateTime.Today.ToShortDateString();
date1 = Convert.ToDateTime(cd1).ToString("dd/MM/yyyy");
cmd.Parameters.AddWithValue("@cd", date1.ToString()); 
```

只需这样做：

```
 cmd.Parameters.AddWithValue("@cd", DateTime.Today); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:42:29.400

`date1`将格式更改为`yyyy/MM/dd`或`MM/dd/yyyy`。

昨天是 2012 年 6 月 12 日。实际插入数据库的可能是 2012 年 12 月 6 日（12/06 与 06/12）。现在是第 13 个月，因为没有第 13 个月，所以您得到了例外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T03:43:07.043

听起来你有文化信息差异。您可以尝试将日期的 ToString() 方法修改为不同的格式。

```
cmd.Parameters.AddWithValue("@cd", System.DateTime.Now.ToString("yyyyMMdd", CultureInfo.InvariantCulture)); 
```

# javascript - 正则表达式模式匹配顺序

> ID：11026322
> 
> 赞同：4
> 
> 时间：2012-06-14T03:36:51.527
> 
> 标签：javascript, python, regex

在我熟悉的所有语言的正则表达式引擎中，`.*`符号表示匹配零个或多个字符。考虑以下 Javascript 代码：

```
var s = "baaabcccb";
var pattern = new RegExp("b.*b");
var match = pattern.exec(s);
if (match) alert(match); 
```

这输出`baaabcccb`

Python也会发生同样的事情：

```
>>> import re
>>> s = "baaabcccb"
>>> m = re.search("b.*b", s)
>>> m.group(0)
'baaabcccb' 
```

这两种语言都匹配`"baaabcccb"`而不是简单的原因是什么`"baaab"`？我阅读模式的方式`b.*b`是“找到一个以 开头的子字符串`b`，然后包含任意数量的其他字符，然后以 . 结尾`b`。” 两者都`baaab`满足`baaabcccb`这个要求，但 Javascript 和 Python 都匹配后者。我本来希望它 match `baaab`，仅仅是因为该子字符串满足要求*并*首先出现。

那么为什么`baaabcccb`在这种情况下模式匹配呢？而且，有没有办法修改这种行为（在任何一种语言中），以使其匹配`baaab`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T03:39:02.007

`?`您可以通过在`*`这样的后面添加 a 来使正则表达式不贪心： `b.*?b`。然后它将匹配可能的最小字符串。默认情况下，正则表达式是贪婪的，并会尝试找到最长的匹配项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T03:39:43.910

`.*`是一个贪婪的匹配。`.*?`是非贪婪版本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T03:40:38.507

因为 * 和 + 本质上是贪婪的（至少在 python 中，我不确定 js）。他们会尽量匹配。如果你想避免这个问题，你可以添加？在他们之后。

这是一个很棒的教程，在贪婪与非贪婪部分： [google python class](http://code.google.com/edu/languages/google-python-class/regular-expressions.html)

# clojure - Clojure 中是否存在惰性变量？

> ID：11026335
> 
> 赞同：13
> 
> 时间：2012-06-14T03:38:48.960
> 
> 标签：clojure, lazy-evaluation, variables

我有一些有点昂贵的计算（启动数据库），如果我真的要使用它，我只想创建数据库。我正在寻找一个参考变量（或者只是一个普通变量，如果可能的话），它只会在它被使用（或取消引用）的情况下评估它的值。概念上类似于以下内容。

```
(def v (lazy-var (fn [] (do (println "REALLY EXPENSIVE FUNCTION") true)))) 
```

将来，当我只使用 var v 或调用 @v 时，我会让它打印出“非常昂贵的功能”，并且从那时起 v 的值为 true。这里重要的是 fn 直到变量被（取消）引用时才被评估。需要时，对函数进行一次且仅计算一次以计算变量的值。这在clojure中可能吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-14T03:52:02.283

[`delay`](http://clojuredocs.org/clojure_core/clojure.core/delay)将非常适合此应用程序：

> **`delay`**`- (delay & body)`
> 
> 接受一个表达式主体并产生一个延迟对象，该对象仅在第一次被强制时调用主体（使用`force`或`deref`/ `@`），并将缓存结果并在所有后续`force`调用中返回它。

将用于构造数据库句柄的代码放在`delay`调用主体中，存储为 Var。然后在需要使用 DB 句柄时取消引用此 Var — 在第一次取消引用时将运行主体，在随后的取消引用时将返回缓存的句柄。

```
(def db (delay (println "DB stuff") x))

(select @db ...) ; "DB stuff" printed, x returned
(insert @db ...) ; x returned (cached) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T00:06:24.033

Clojure 1.3 为此目的引入了 memoize 函数：

> （记住 f）
> 
> 返回引用透明函数的记忆版本。该函数的记忆化版本保留了从参数到结果的映射的缓存，并且当经常重复使用相同参数的调用时，以更高的内存使用为代价具有更高的性能。

在您的示例中，将不存在的lazy-var 替换为 memoize：

```
(def v (memoize (fn [] (do (println "REALLY EXPENSIVE FUNCTION") true))))
(v)
=>REALLY EXPENSIVE FUNCTION
=>true
(v)
=>true 
```

(delay expr) 正如另一个答案所解释的那样，也可以完成这项工作。关于取消引用延迟的额外评论 - force 和 deref/@ 之间的区别在于，如果在非延迟变量上使用 force 不会引发异常，而 deref/@ 可能会抛出 ClassCastException“无法转换为 clojure.lang.IDeref”。

# java - AspectJ 声明注释 @method 不起作用

> ID：11026337
> 
> 赞同：0
> 
> 时间：2012-06-14T03:39:04.300
> 
> 标签：java, aspectj

我定义了这个注释：

```
public @interface MyAspectWeaved { } 
```

而这方面：

```
aspect MyAspect {
   declare @method : * *(..) : @MyAspectWeaved;
   // Other pointcuts and advices which work without issues
   // ...
} 
```

我基本上是在尝试标记所有可能受 MyAspect 影响的方法。方面的其余部分工作正常，但由于某种原因，没有使用@MyAspectWeaved 注释任何方法。谷歌搜索和重新阅读文档并没有给我任何线索。我对 AspectJ 不是很熟悉，所以我认为要么我遗漏了一些明显的东西，要么我对 declare @method 的理解不正确。任何人都看到有什么问题吗？

我正在使用 AspectJ 1.6.12。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:01:33.110

您必须将注释更改为：

```
@Retention(RetentionPolicy.RUNTIME)
public @interface MyAspectWeaved {
} 
```

# javascript - 使用扩展的继承和 ExtJs

> ID：11026340
> 
> 赞同：3
> 
> 时间：2012-06-14T03:39:19.230
> 
> 标签：javascript, extjs

我正在尝试使用 ExtJS 设置基类和派生类`Ext.extend`。

**：基类：**

```
var Base = Ext.extend(Object, {
    settings: {},
    constructor: function(args) {
        var baseArgs = { 'user': '', 'password': '' };
        Ext.apply(this.settings, args, baseArgs);
    }
}); 
```

**：派生类：**

```
var Derived = Ext.extend(Base, {
    constructor: function(args) {
        Derived.superclass.constructor.call(this, args);
    }
}); 
```

**：问题：**

```
var test1 = new Derived({ 'user': 'blackey1', 'password': 'blackeypw1' });
var test2 = new Derived({ 'user': 'blackey2', 'password': 'blackeypw2' }); 
```

此时`test1.settings`相当于`test2.settings`（使用`blackey2`and `blackeypw2`）好像它们指向同一个对象，我正在寻找如何创建独立对象。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T05:05:39.580

使用您当前的代码，将空`settings`对象添加到 的原型中`Base`，以便一个`settings`对象由 的所有实例`Base`和派生自`Base`（如`Derived`）的类的任何实例共享。相反，您应该做的是在's函数中创建空`settings`对象，以便每个实例都有自己的对象：`Base``constructor``settings`

```
var Base = Ext.extend(Object, {
    constructor: function(args) {
        var baseArgs = { 'user': '', 'password': '' };
        this.settings = {};
        Ext.apply(this.settings, args, baseArgs);
    }
}); 
```

# twitter - Twitter 集成 Klout 的工作方式

> ID：11026341
> 
> 赞同：0
> 
> 时间：2012-06-14T03:39:21.197
> 
> 标签：twitter

我正在设计一个类似于 Klout 的服务，即不断扫描用户的 Twitter 帐户以更新某种指标，即我的服务的附加值。为此，我的应用程序需要得到用户的批准，但我对下一步该做什么有点困惑。在他/她第一次批准该应用程序后，我如何（有效地）设法使我的服务与用户的新推文保持同步？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:45:07.823

假设您拥有用户的 OAuth 令牌的两种解决方案：

1.  每天轮询用户的朋友/追随者/时间线，并使用 REST API 对其进行分析。谨防速率限制。
2.  使用流式 API 实时获取此数据，然后进行分析。

我确定你会想要使用#2。创建一个从 twitter 接收推送事件的侦听器，然后将其存储并稍后在其上运行您的业务逻辑分析。

您将使用的数据模型和预测 (DB) 取决于您需要运行的业务逻辑。

# r - 需要比 mapply 更快的东西

> ID：11026342
> 
> 赞同：1
> 
> 时间：2012-06-14T03:39:25.550
> 
> 标签：r, function

我有这个函数可以计算从 1 到 1600 的滞后的相关性。

```
t=min(length(x), length(y))
corf=function(i) {
            x=x[c(1:(t-i+1))]
            y=y[c(i:t)]
            cor(x,y, use="pairwise.complete.obs")
        } 
```

其中 x 和 y 是每个包含大约 10,000 个值的数据集。

```
lg=c(1:1600) 
```

我必须找到：

```
corf(lg) 
```

为此，我正在使用：

```
mapply(corf, lg) 
```

但这需要很长时间，因为我有 100 个数据集。

有没有`mapply`更快的替代方案？

感谢您的阅读。

# sql - Codeigniter result_array() 返回一行

> ID：11026345
> 
> 赞同：0
> 
> 时间：2012-06-14T03:39:39.073
> 
> 标签：sql, codeigniter, model

在我的表中，我有两行，但是当我连接`print_r`到`$data`这个模型函数时，它只返回数据库中的第二行，为什么？

**型号功能：**

```
function getAllUsers()
{
    $query = $this->db->get('users');

    foreach($query->result_array() as $row)
    {
        $row['id'];
        $row['fName'];
        $row['lName'];
        $row['email'];
        $row['password'];
    }

    return $row;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T03:41:21.023

因为`$row`是循环变量，所以它只会在循环退出后保存上次迭代的数据。

像这样做：

```
function getAllUsers()
{
    $rows = array(); //will hold all results
    $query = $this->db->get('users');

    foreach($query->result_array() as $row)
    {    
        $rows[] = $row; //add the fetched result to the result array;
    }

   return $rows; // returning rows, not row
} 
```

**在您的控制器中：**

```
$data['users'] = $this->yourModel->getAllUsers();
$this->load->view('yourView',$data); 
```

**在你看来**

```
//in your view, $users is an array. Iterate over it

<?php foreach($users as $user) : ?>

<p> Your first name is <?= $user['fName'] ?> </p>

<?php endforeach; ?> 
```

# java - 过时的编程软件会有害吗？

> ID：11026352
> 
> 赞同：2
> 
> 时间：2012-06-14T03:40:21.383
> 
> 标签：java

我最近买了一本名为“Killer Game Programming in Java”的书，它已经有 5 年的历史了，这些程序在 Java2SE 和 Java 2SE 1.4 上运行得最好。由于这些版本较旧且未更新，因此使用这些软件版本可能是有害的。下面的链接说是的，但在我尝试安装之前我想要第二个意见。另外，我在 Mac 上运行。如果一切都失败了，我会尝试给作者发电子邮件。 [http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase14-419411.html#7501-j2sdk-1.4.2-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase14-419411.html#7501-j2sdk-1.4.2-oth-JPR)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T03:46:10.960

您不需要在 Java 1.4 中创建游戏。您说的这本书将帮助您理解 Java，但您不必在 1.4 中创建最终游戏。从这本书中汲取灵感并相应地更新它们以适应最新版本的 Java。

# java - 访问者模式 Java 和全局变量

> ID：11026353
> 
> 赞同：0
> 
> 时间：2012-06-14T03:40:22.127
> 
> 标签：java, global-variables, jsoup, visitor-pattern

我正在使用 JSoup，我正在做一些节点遍历。

```
String myString;
NodeTraversor articleNodeTraversor  = new NodeTraversor(new NodeVisitor() {

            @Override
            public void tail(Node node, int depth) {
                //Do some processing.
                                    myString += "foo";
            }

            @Override
            public void head(Node node, int depth) { 
                //Do some processing.
            }
        }); 
```

首先，这种编程叫什么？访客模式？其次，上面的代码只有在 myString 是全局的时候才有效。如何使我的字符串仅在创建它的方法中本地化，并且仍然使上述工作正常？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:05:18.430

您正在使用匿名类，因此它们只能访问其上下文之外的最终局部变量（假设它在方法中声明）和类的任何变量（静态或非静态）。您也可以在内部类中声明变量，但不允许静态非最终变量声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:48:27.853

该块`new NodeVisitor() {}`被称为匿名间类。

您可以将块中的变量视为公共类。

# android - 在java中使用带有edittext对象的！=语句？

> ID：11026354
> 
> 赞同：0
> 
> 时间：2012-06-14T03:40:35.137
> 
> 标签：android, string, if-statement, android-edittext, sharedpreferences

我正在尝试创建一个按钮，当按下该按钮时会读取编辑文本框

1.  确保它不是空白的
2.  在这种情况下，请确保它不是默认文本“名字”。

但是，当按下按钮时，即使 edittext 文本是 First Name 或空白，它仍然会执行操作。有没有更简单的方法来做到这一点？当文本是名字或空白时，也不会吐司。

```
createp.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) { 

                if (fname.getText().toString() != "")
                    if (fname.getText().toString() != "First Name"){

                            prefsEditor.putInt("user", 1);
                            prefsEditor.commit();

                    }

        if (fname.getText().toString() == "")
        {
                    Toast.makeText(createactivity.this, "You need a first name to create a profile!", 
                              Toast.LENGTH_LONG).show();
        }
        if (fname.getText().toString() == "First Name")  {

            Toast.makeText(createactivity.this, "You need a first name to create a profile!", 
                              Toast.LENGTH_LONG).show();
        }

            }});

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:44:25.453

试试这个：

```
if (!fname.getText().toString().equals(""))
    ... 
```

另一个例子：

```
if (fname.getText().toString().equals("First Name"))
    .... 
```

# c# - 将CheckBoxes 或图像放入UniformGrid

> ID：11026357
> 
> 赞同：1
> 
> 时间：2012-06-14T03:40:49.120
> 
> 标签：c#, wpf, universal, uniformgrid

我尝试在 WPF中实现[一个鼹鼠游戏。](http://en.wikipedia.org/wiki/Whac-A-Mole)

Molehills 在*UniformGrid*中。根据选项，鼹鼠山是复选框或图像。麻烦来了。

我不知道如何实现*UniformGrid*以同时接受*checkboxes*和*images*。
也许您对我如何解决它有更好的想法。也许用于复选框和图像的*UniformGrid*不是一个好主意。

我试过这样：

```
<ItemsControl Name="GameBlocksItemsControl" ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=Window},Path=Moles}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Columns="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}, Path=Conf.Cols}" 
                            Rows="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}, Path=Conf.Rows}" 
                            Name="MolesGrid">
            </UniformGrid>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

**Moles**是**Object**的集合，因此我可以将**Checkbox**或**BitmapImage**放在那里。

不幸的是，在将一些**BitmapImage**添加到集合后，它们无法正确显示（而不是图像，写成：*System.Windows.Media.Imaging.BitmapImage*）。如果我将**CheckBox** es 添加到集合中，它们会显示得很好。

我考虑编写转换器，但这样的转换器必须知道指定的**Object**是**CheckBox**还是**BitmapImage**。即使可以编码，也不是很优雅的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:28:36.270

就个人而言，我会简单地设置`ItemTemplate`基于`SelectedViewOption`

例如，`SelectedViewOption`为简单起见，假设是一个字符串：

```
<Style x:Key="MyItemsControlStyle" TargetType="{x:Type ItemsControl}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding SelectedViewOption}" Value="Image">
            <Setter Property="ItemTemplate" Value="{StaticResource ImageTemplate}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding SelectedViewOption}" Value="CheckBox">
            <Setter Property="ItemTemplate" Value="{StaticResource CheckBoxTemplate}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

这不仅允许您在以后轻松添加其他视图选项，而且还可以从您`DataContext`的. 通常，您希望您的 UI 和业务逻辑层分开，这允许您这样做。`CheckBoxes``Images`

# clojure - Korma 未正确加载 JDBC

> ID：11026359
> 
> 赞同：0
> 
> 时间：2012-06-14T03:40:57.077
> 
> 标签：clojure, korma

我真的很想在我的项目中使用 Korma，但是每次我尝试在我的 REPL 中测试它时，它都会引发以下错误：

```
core=> (require 'korma.db)
FileNotFoundException Could not locate clojure/java/jdbc/internal__init.class or clojure/java/jdbc/internal.clj on classpath:   clojure.lang.RT.load (RT.java:432) 
```

我的“核心”命名空间中有以下内容：

```
(ns core
  (:require [clojure.java.jdbc :as sql])) 
```

以及我的 project.clj 中的以下内容：

```
(defproject wknd "1.0.0-SNAPSHOT"
  :description "weekend side project"
  :dependencies [[org.clojure/clojure "1.4.0"]
             [org.clojure/clojure-contrib "1.2.0"]
             [org.xerial/sqlite-jdbc "3.7.2"] 
             [org.clojure/java.jdbc "0.2.2"]
             [korma "0.3.0-beta9"]]
  :dev-dependencies [[org.clojars.scott/lein-nailgun "1.1.0"]]) 
```

我刚开始使用clojure，不知道为什么会出现这个错误。我四处搜索，在其他地方找不到类似的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:37:55.507

来自作者：

> 自重组以来，Korma 没有升级到最新的 JDBC。试试beta11，应该是固定的。
> 
> 干杯，克里斯。

这个错误对我来说消失了。

# javascript - 模块模式中函数表达的主要目的是什么

> ID：11026361
> 
> 赞同：2
> 
> 时间：2012-06-14T03:41:10.930
> 
> 标签：javascript

我知道模块模式在 Javascript 编程中非常有用和强大。[我第一次在Eric Miraglia 的博客](http://yuiblog.com/blog/2007/06/12/module-pattern/)中认识到这种模式，但我想知道一件事。在其他解释模块模式的博客和文章中，我注意到他们的示例代码与 Eric 的文章略有不同，即它们使用带括号的函数表达式而不是函数语句，例如[ben cherry 的文章](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)就是其中之一。

使用函数表达式而不是函数语句有什么具体原因吗？请用简单的方式解释一下，我刚进入Javascript编程世界:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:46:04.383

Miraglia 模式也是如此，定义一个匿名函数并执行它。不同之处在于，为了*使用*模块的功能，您必须在某处引用一个实例。将模块分配给全局变量（YAHOO.*）是一种将引用保留在全局已知位置的方法，这对于框架（如 YUI）尤其重要。

有时你不需要那个参考。例如，如果您正在为网页编写 JavaScript，您通常会使用选择器（id / 类型等）将事件绑定到函数。这确实消除了对模块函数的任何全局引用的需要。

希望有道理...

# css - 图像不会出现在外部 CSS 中

> ID：11026364
> 
> 赞同：2
> 
> 时间：2012-06-14T03:41:24.580
> 
> 标签：css, image, html, aptana

大家好，这个问题困扰我很久了。

我在外部样式表中的图像不会出现。当我将它放在 html 的头部时，它就会出现！我目前正在使用 Aptana Studio 3，但我认为这与 Aptana 无关。

这是我的外部css中的代码：

```
 .menuMainwrapper {
  position: relative;
  height: 54px;
  z-index: 30;
  background: url("img/menuwrapper.png") center top repeat-x;
  margin: 0 -20px;
  padding-left: 20px;
  } 
```

这是html：

```
 <div class="menuMainwrapper">
  <ul class="menus menuMain">
  <li><a href="#">Home</a></li>
  </ul>
  </div> 
```

我已经检查了目录，如果我将它放在文档的头部，它应该是正确的，因为它可以工作。哦，我正在使用来自 Aptana 的 Html 5 模板

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T03:48:09.740

我怀疑您图片的参考网址不正确

尝试

```
background: url("../img/menuwrapper.png") center top repeat-x; 
```

如果您的 css 在 /css 文件夹中并且图像在 /img 文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:14:04.053

检查您的图像路径。您可以使用 Chrome 开发者工具。如果路径不正确，右下角应该有错误。

# c# - 如何在网格视图的单元格中显示图标c#

> ID：11026373
> 
> 赞同：1
> 
> 时间：2012-06-14T03:42:31.820
> 
> 标签：c#, winforms, datagridview, icons

我想在特定单元格中显示一个图标。

我正在使用此代码。我已经评论了我想在哪里显示图标：

```
string lastScripDate = this.GetLastScripDate(sFolderPath, pb);
string sQuery = "select * from database";
DataTable table = new DataTable();
table = this.Retrieve_Data(sQuery, "database");
pb.Maximum = table.Rows.Count;
pb.Value = 0;
double num = 0.0;
double num2 = 0.0;
double num3 = 0.0;
double num4 = 0.0;
if (table.Rows.Count > 0)
{
    for (int i = 0; i < table.Rows.Count; i++)
    {
        Application.DoEvents();
        dgv.Rows.Add();
        dgv.Rows[i].Cells["Sname"].Value = table.Rows[i]["Symbol"].ToString();
        dgv.Rows[i].Cells["clsprice"].Value = table.Rows[i]["SCRIP"].ToString();
        string str3 = table.Rows[i]["TradeType"].ToString();
        dgv.Rows[i].Cells["trd"].Value = str3;
        string str4 = str3;
        if (str4 != null)
        {
            if (!(str4 == "p"))
            {
                if (str4 == "q")
                {
                    goto Label_01DD;
                }
            }
            else
            {
               dgv.Rows[i].Cells["trd"].Style.ForeColor = Color.Green;///////I Want to Display Icon in this Cell(Up.Ico)
            }
        }
        goto Label_020B;
    Label_01DD:

        dgv.Rows[i].Cells["Trade"].Style.ForeColor = Color.Red;///////////////An Want to Display Icon in this Cell also(Down.Ico

    Label_020B:
    dgv.Rows[i].Cells["date"].Value = table.Rows[i]["TDate"].ToString();
        num = Convert.ToDouble(table.Rows[i]["CPrice"]);
        dgv.Rows[i].Cells["tp"].Value = string.Format("{0:0.00}", num);
        num2 = Convert.ToDouble(table.Rows[i]["Price"]);
        dgv.Rows[i].Cells["tp"].Value = string.Format("{0:0.00}", num2);
        num3 = Convert.ToDouble(table.Rows[i]["Loss"]);
        dgv.Rows[i].Cells["sl"].Value = string.Format("{0:0.00}", num3);
        try
        {
            num4 = Convert.ToDouble(table.Rows[i]["Ratio"]);
            dgv.Rows[i].Cells["Ratio"].Value = string.Format("{0:0.00}", num4);
        }
        catch
        { }
        pb.Value++;
    }
    if (pb.Value == pb.Maximum)
    {
        pb.Value = pb.Minimum;
    }
    return true;
}
return false; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T04:26:00.047

实现此目的的一种方法是添加[DataGridViewImageColumn](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewimagecolumn.aspx)，然后将图标设置为该单元格。这是一个示例

```
 dataGridView1.Columns.Add(new DataGridViewImageColumn());
        dataGridView1.Rows.Add(2);

        DataGridViewImageCell cell = (DataGridViewImageCell)dataGridView1.Rows[0].Cells[0];

        Icon ic = new Icon("icon.ico");

        cell.Value = ic; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:23:40.313

你可以通过使用[DataGridViewImageColumn](http://social.msdn.microsoft.com/Forums/en/winforms/thread/119222d6-0189-49ab-a01a-c5eeb201723e)

# django - mdbtools 的 Django requirements.txt pip

> ID：11026374
> 
> 赞同：0
> 
> 时间：2012-06-14T03:42:37.310
> 
> 标签：django, installation, requirements, mdbtools

我正在尝试在我拥有的 django 应用程序中使用 mdbtools。我在 requirements.txt 文件中包含了以下两行：

```
mdbtools-dev
mdbtools 
```

但我遇到了一些错误：

```
....
Requirement already satisfied (use --upgrade to upgrade): stripe in ./lib/python2.7/site-packages (from -r requirements.txt (line 7))
Downloading/unpacking mdbtools-dev (from -r requirements.txt (line 8))
Could not find any downloads that satisfy the requirement mdbtools-dev (from -r requirements.txt (line 8))
No distributions at all found for mdbtools-dev (from -r requirements.txt (line 8))
Storing complete log in /app/.pip/pip.log 
```

！Heroku 推送被拒绝，无法编译 Python 应用程序

我 sudo apt-get install mdbtools 和 mdbtools-dev 都没有问题。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:07:27.267

`requirements.txt`文件不适用于一般系统要求 - 它仅适用于您的应用程序所需的 Python 库。

由于没有调用 Python 包`mdbtools`，因此您会收到该错误。

# macos - bash 错误：找不到 /Library/...../setclasspath.sh，但它在那里

> ID：11026376
> 
> 赞同：21
> 
> 时间：2012-06-14T03:42:44.860
> 
> 标签：macos, bash, tomcat, terminal

我正在尝试设置 tomcat 服务器，并且我正在使用来自指示我的网站的说明

```
 # Execute the Tomcat startup script
      ./startup.sh 
```

但是当我输入 ./startup.sh 命令时出现错误

```
 Cannot find /Library/Tomcat/Home/bin/setclasspath.sh 
```

但是 setclasspath.sh 在那里（见下面的截图）：

![在此处输入图像描述](../Images/9233db29bf728646eaa037cb99f9c2cb.png)

我究竟做错了什么？？？？

* * *

现在我不能 cd 到主页（见下面的截图）：

![在此处输入图像描述](../Images/22477b2450186c76e8d4924967543fea.png)

这是路径信息： ![在此处输入图像描述](../Images/bf9880559d3e198b429a6597c987ef84.png)

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-19T16:54:27.683

我在我的山狮机器上遇到了同样的问题，我使用这个命令：

```
$ unset CATALINA_HOME 
```

之后它解决了我的问题。这个命令将取消设置环境变量`CATALINA_HOME`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-28T11:42:16.300

只需在终端中运行：$ unset CATALINA_HOME，它就会再次运行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-06T08:18:39.623

请重置 CATALINA_HOME 以指向正确的路径。那应该可以解决问题。例如; 目前它可能位于“/usr/share/tomcat6/”，但您需要验证并指向正确的目录，如“/usr/share/tomcat6/apache-tomcat-6.0.37/”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-28T07:00:26.457

它是因为权限，你可以使用 root 运行它 `$ sudo pathtotomcat/bin/./startup.sh`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T06:06:35.577

我也有类似的问题，我可以通过简单地更改 tomcat 文件夹的文件权限来解决它。让它为每个人读写。并且 sh`startup.sh`命令适用于 Tomcat/7.0.34

[我从这里得到了这个解决方案](http://wolfpaulus.com/journal/mac/tomcat7)

使所有脚本可运行：

```
sudo chmod +x /Library/Tomcat/bin/*.sh 
```

我希望它也能解决你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-18T12:02:59.407

ali的回答很好，但不知为何我还需要打开.bash_profile并注释掉CATALINA_HOME

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-22T08:11:33.637

你需要在两个地方设置两条线

路径详情

导出 JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 导出 CATALINA_HOME=/opt/tomcat/apache-tomcat-7.0.90

将此路径放在行尾

要编辑的文件 vi ~/.bashrc vi ~/.bash_profile

./shutdown.sh ./startup.sh

它对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-22T09:45:27.363

这几乎肯定是由于`CATALINA_HOME`当前 shell 中的环境变量值不正确而发生的。例如，在我的情况下，我有一个较旧的 tomcat 安装，我删除并安装了另一个版本，但忘记更改`.bash_profile`. 因此，建议的任何删除 var 的方法都将起作用。如果您已`CATALINA_HOME`设置`.bash_profile`，请将其删除。 `unset CATALINA_HOME`也可以，但如果它在配置文件中，它将在您打开新外壳时再次设置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-23T07:38:20.190

尽管所有提到的答案看起来都很好，但了解主要原因是个好主意。

在您的操作系统的某个地方，一个文件正在为您的操作系统设置环境变量，其中一个变量名称`CATALINA_HOME`是指向地址或路径。当您尝试运行`./startup.sh`or时`catalina.sh run`，这些命令需要`CATALINA_HOME`由您的操作系统设置，并将覆盖默认`CATALINA_HOME`的 tomcat 配置。（你可能之前使用过tomcat并设置了这个变量，现在你忘记了）

所以主要的解决方案是编辑那个特殊的文件，它真的取决于操作系统。在我的情况下，`Fedora`有两个文件是候选文件，其中一个是`~/.bashrc`，另一个是`/etc/profile`. 编辑它们后，您需要`source`它们或`log out`然后`log in`（`OS X`我认为它应该在`/Users/username/.bash_profile`文件中）。

当然`unset CATALINA_HOME`命令有效，但是在关闭并打开新终端后，由于刷新，您需要再次使用此命令。

# iphone - “strdup”泄漏 - 未知原因

> ID：11026378
> 
> 赞同：0
> 
> 时间：2012-06-14T03:42:59.977
> 
> 标签：iphone, objective-c, ios, instruments, strdup

使用 Instruments 检查我的代码是否泄漏，我发现一个我无法找出解决方案的出现。是这样的：

Malloc 48 字节负责库 - libsystem_c.dylib 负责框架 - strdup

我在谷歌上搜索了这个，一些建议告诉人们不要管它，但提交给 Apple 泄露似乎是一件愚蠢的事情，所以我想看看是否有人能告诉我更多关于这个的信息，或者它可能在哪里来自（哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:04:14.733

如果您的代码没有直接使用 strdup()，那么基本上有两个可能的原因导致内存泄漏：

1.  Apple 的代码有一个错误：它调用`strdup()`但在使用后不释放它的返回值。
2.  您正在使用的调试工具（仪器或由它调用的命令行工具？）错误地检测到内存泄漏。

在这两种情况下，您都可以向 Apple 提交错误报告。

# php - CakePHP 2.1 向登录页面添加字段

> ID：11026381
> 
> 赞同：0
> 
> 时间：2012-06-14T03:43:09.637
> 
> 标签：php, cakephp, cakephp-2.1

我制作了一个包含三个字段的基本登录表单，它们是“公司”、“员工”和“密码”，我尝试使用默认的 Auth 组件：

```
public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Invalid username or password, try again'));
        }
    }
} 
```

但是由于这会解析默认的“用户名”和“密码”字段，我无法登录。如何更改 Auth 功能以验证我的三个字段并让我登录？

抱歉，如果这是一个菜鸟问题，我已经阅读了[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)但那里没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:02:11.293

尝试以下操作：

```
public function beforeFilter() {
    $this->Auth->authenticate = array(
        'Form' => array(
            'fields' => array(
                'username' => 'employee', 
            ),
        ),
    );
}

public function login() {
    if ($this->request->is('post')) {
        $this->Auth->authenticate['Form']['scope'] = array(
            'User.company_id' => $this->request->data['User']['company_id'],
            // or however this condition needs to be setup as
        );
        if ($this->Auth->login()) {
             // login success
        } else {
             // login fail
        }
    }
} 
```

基本上，将第三个条件添加为范围。

# html - 浏览器是否需要检测用户时区以进行日期时间输入？

> ID：11026383
> 
> 赞同：4
> 
> 时间：2012-06-14T03:43:26.653
> 
> 标签：html, datetime, browser, timezone, utc

我安装了 Opera 浏览器，因为它是目前唯一拥有 HTML5`datetime`日历功能的浏览器。有两种类型的`datetime`输入：一种`datetime-local`是省略时区信息的地方；另一个是`datetime`添加时区信息的地方。

根据我在 Opera 中观察到的情况，时区固定为 UTC，而不是遵循用户的时区进行`datetime`输入。这似乎违反直觉，因为用户通常不知道 UTC 时间是什么，更不用说根据自己的时区计算正确的 UTC 时间了。

W3C 是否要求 UTC 作为`datetime`输入的默认时区，或者 Opera 浏览器是否通过将时区固定为 UTC 来做正确的事情？

经过进一步研究，这是我发现的：

[whatwg](http://wiki.whatwg.org/wiki/Input_element)似乎提出了相反的建议：

*   datetime（特定年、月、日、时间）
*   datetime-local（特定年、月、日、时间、时区）

[Mozilla 文档](https://developer.mozilla.org/en/HTML/Element/Input)是这样说的：

*   datetime: HTML5 用于输入基于 UTC 时区的日期和时间（小时、分钟、秒和秒的小数部分）的控件。

[W3C](http://www.w3.org/TR/2011/WD-html5-20110405/states-of-the-type-attribute.html#date-and-time-state)提出以下建议：

*   用户代理不得允许用户将值设置为非空字符串，该字符串不是以 UTC 表示的有效全球日期和时间字符串，尽管用户代理可能允许用户在另一个时区静默设置和查看时间在值中转换与 UTC 时区的时间。如果用户代理提供用于选择全局日期和时间的用户界面，则该值必须设置为以 UTC 表示的有效全局日期和时间字符串，表示用户的选择。

*   向用户显示的格式与用于表单提交的格式无关。鼓励浏览器使用根据用户首选区域设置的约定来显示日期和时间的用户界面。

在我看来，W3C 允许`datetime`输入为本地格式，但要求表单提交的最终值以 UTC 格式表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T19:20:02.340

你问的唯一*问题*是：

> W3C 是否要求 UTC 作为日期时间输入的默认时区，或者 Opera 浏览器是否通过将时区固定为 UTC 来做正确的事情？

但正如你所指出的：

> 用户代理**可能**允许用户设置和查看另一个时区的时间

所以你的问题的答案是 W3C*不需要*UTC 输入，但确实*允许*它，所以 Opera 无论如何都会做正确的事情。

These kinds of ambiguous specifications are pretty silly. Actually, they are fairly counterproductive. I don't understand why they even bother if they're not going to actually define the required behavior.

# javascript - Javascript数组结构

> ID：11026384
> 
> 赞同：-2
> 
> 时间：2012-06-14T03:43:30.570
> 
> 标签：javascript, arrays

我有一个如下所示的数组结构。我需要将其转换为不同的格式

```
 test = [
    S1 {
        science : 90
    }
    S2
    {
        Science:80,
        Maths  :56
    }
    ] 
```

我有一个数组，其中包含以下所有主题

```
 Subjects {
    Science : 0
    Maths :0
    English:0
    } 
```

我想将上面的数组转换为下面的结构

```
S1 {
science : 90,
Maths  :0,
English:0

}
S2
{
Science:80,
Maths  :56,
English:0
} 
```

这意味着如果主题不可用，我想输入一个键值对作为 0

我尝试了以下

```
 for (var i = 0; i < test.length; i++) { 
                        for (var key in test[i]) { 
                    for (var iKey in test[i][key]) { 
                varr s = (t.hasOwnProperty(iKey)) ? t[iKey] : createSubjects();
                s[key] = test[i][key][iKey];
                 t[iKey] = s;
                            }
                        }
                    }

    function createSubjects (){
                            var obj = [];
                            //categoryArray

                            for ( var a = 0, l = Subjects a < l; ++a ) {

                                 obj[Subjects [a]] = 0;
                        }

                        return obj;
                        } 
```

我没有得到预期的答案，请有人帮我纠正这个问题。谢谢

这是没有语法错误的正确代码

```
var test = [
    S1 = {
    science : 90

    },
S2 =
{
    Science:80,
    Maths  :56
}
]

var Subjects = {
Science : 0,
Maths :0,
English:0
}
function createSubjects (){
return {'Maths' : 0, 'Science': 0,'English':0}
}

var t = {}
console.log(createSubjects())
for (var i = 0; i < test.length; i++) { 
    for (var key in test[i]) 
    { 
            var s = (t.hasOwnProperty(key)) ? t[key] : createSubjects();
            console.log(s)
    }
} 
```

我得到的是 `Object { Maths=0, Science=0, English=0}`所有类型的。但我需要的是

```
Object { Maths=0, Science=90, English=0} 
Object { Maths=56, Science=80, English=0} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:31:02.867

这就是我想出的。从您的原始对象数组开始（语法固定）：

```
var test = [
    {
        "Science": 90
    },
    {
        "Science": 80,
        "Maths": 56
    }
]; 
```

然后你有一个想要的输出（一个模板）：

```
var template = {
    "Science" : 0,
    "Maths": 0,
    "English": 0
}; 
```

以下是如何转换原始数组以获取模板的所有属性（如果它们尚不存在）（排序合并）：

```
function convertArray(r, t) {
   for (var i = 0, l = r.length; i < l; i++) {
       tp_loop:
        for (var tp in t) {
            for (var rp in r[i]) {
                if (!r[i].hasOwnProperty(tp)) {
                    r[i][tp] = t[tp];
                    continue tp_loop;
                }
            }
        }
    }
} 
```

用法：

```
convertArray(test, template); 
```

这是一个简化的[JSFiddle](http://jsfiddle.net/EA9KR/3/)来说明它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:15:42.410

如果我正确理解了您的问题，这应该可以。

```
marks = [ s1 = { science : 90 }, s2 = { science : 80, maths : 56 } ];
for ( var i = 0; i< marks.length; i++ ) { 
 if( !(marks[i].hasOwnProperty("science"))){
   marks[i].science = 0;
 }

 if( !(marks[i].hasOwnProperty("maths"))){
   marks[i].maths = 0;
 }

 if( !(marks[i].hasOwnProperty("english"))){
   marks[i].english = 0;
 }
} 
```

# android - tabwidget 未显示在 Eclipse 图形布局编辑器中

> ID：11026385
> 
> 赞同：1
> 
> 时间：2012-06-14T03:43:50.947
> 
> 标签：android, eclipse, android-tabhost, tabwidget

我正在创建一个选项卡式应用程序，我正在为此测试一个谷歌关于选项卡布局的教程。我能够在模拟器中成功运行 hellotabwidget，但是当我在 eclipse 的图形布局编辑器中查看 main.xml 文件时，它不显示选项卡，而是显示内容。它只是显示了某种

因此我无法使用图形编辑器将按钮或其他内容添加到创建的选项卡中，因为我无法在图形编辑器中查看它们。

任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:34:31.513

根据您对这个问题的评论，您对`TabHost`这里有误解，我为您提供一些解释。

## 标签主机

选项卡式窗口视图的容器。该对象包含两个子对象：一组标签标签，用户单击以选择特定标签，以及一个显示该页面内容的 FrameLayout 对象。单个元素通常使用此容器对象进行控制，而不是在子元素本身上设置值。

## 选项卡小部件

显示代表父选项卡集合中每个页面的选项卡标签列表。此小部件的容器对象是 TabHost。当用户选择一个选项卡时，该对象会向父容器 TabHost 发送一条消息，告诉它切换显示的页面。您通常不会直接在此对象上使用许多方法。容器 TabHost 用于添加标签、添加回调处理程序和管理回调。您可以调用此对象来迭代选项卡列表，或调整选项卡列表的布局，但大多数方法应在包含的 TabHost 对象上调用。

* * *

而且，重要的是下图是`TabWidget`，您不能将任何按钮拖放到那里直接制作标签。

![图片](../Images/56c01393cb2ff9b9d8b61f2d13c5ef8d.png)

感叹号不是错误。那是tabwidget的标志。看看下面的代码 -

```
public class AndroidTabLayoutActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();

        // Tab for Photos
        TabSpec photospec = tabHost.newTabSpec("Photos");
        // setting Title and Icon for the Tab
        photospec.setIndicator("Photos", getResources().getDrawable(R.drawable.icon_photos_tab));
        Intent photosIntent = new Intent(this, PhotosActivity.class);
        photospec.setContent(photosIntent);

        // Tab for Songs
        TabSpec songspec = tabHost.newTabSpec("Songs");
        songspec.setIndicator("Songs", getResources().getDrawable(R.drawable.icon_songs_tab));
        Intent songsIntent = new Intent(this, SongsActivity.class);
        songspec.setContent(songsIntent);

        // Tab for Videos
        TabSpec videospec = tabHost.newTabSpec("Videos");
        videospec.setIndicator("Videos", getResources().getDrawable(R.drawable.icon_videos_tab));
        Intent videosIntent = new Intent(this, VideosActivity.class);
        videospec.setContent(videosIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(photospec); // Adding photos tab
        tabHost.addTab(songspec); // Adding songs tab
        tabHost.addTab(videospec); // Adding videos tab
    }
} 
```

从注释行中，您可以了解我们如何创建选项卡。通过仅为您的活动扩展[TabActivity](http://developer.android.com/reference/android/app/TabActivity.html)，您可以使用上述代码。

[看看这个基本示例](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

希望这些解释对您有所帮助。

# java - 将字符串添加到数组并返回数组列表

> ID：11026387
> 
> 赞同：-1
> 
> 时间：2012-06-14T03:43:55.780
> 
> 标签：java, android, arraylist

我想将字符串 s 添加到列表数组并在添加 s 添加到 arrayadapter 以在列表视图中显示后返回列表。

```
 ArrayList<String> arraylist;
 for (int i = 0; i < friendsData.length(); i++) 
 {
   JSONObject friend = friendsData.getJSONObject(i);
   String s=friend.getString("name");
   arraylist.add(s);
 }
 ArrayAdapter<String> adapter=new  ArrayAdapter(myactivity.this,android.R.layout.simple_list_item1,arraylist);
 listview.setAdapter(adapter); 
```

但列表视图不显示项目和错误空指针。帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T03:46:59.960

```
ArrayList<String> arraylist; 
```

您只是在声明一个引用而不创建 arraylist 并使引用指向它。但是，您需要的是：

```
ArrayList<String> arraylist = new ArrayList<String>(); 
```

where`new ArrayList<String>();`在内存中创建数组列表，`=`并使引用`arraylist`指向该数组列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T03:47:19.800

你没有初始化你的arrayList

```
ArrayList<String> arraylist=new ArrayList<String>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T03:51:58.630

一个`object must be initialized`在它使用之前。

```
ArrayList<String> arraylist = new ArrayList<String>; 
```

# facebook - Facebook 加载缩略图

> ID：11026388
> 
> 赞同：0
> 
> 时间：2012-06-14T03:44:03.797
> 
> 标签：facebook, hyperlink, thumbnails, feed

我正在尝试模仿 Facebook 的缩略图功能。让我更具体一点：当您将链接粘贴到您的 Facebook 提要中时，它会在您发布之前从该链接加载缩略图。有没有人知道如何做到这一点？谢谢大家亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:09:18.300

Facebook“抓取”给定的 URL，并寻找[Open Graph](http://ogp.me/)元元素，或者如果找不到，它会尝试从 HTML 代码本身找出相关的图像和内容。

# html - 如何进行内联 拉伸容器的全宽

> ID：11026395
> 
> 赞同：1
> 
> 时间：2012-06-14T03:45:06.390
> 
> 标签：html, css

我的 HTML

```
<div id="main_navigation">
    <ul><li><a href="/One">One</li></a><li><a href="/Two">Two</li></a><li><a href="/three">Three</li></a>
    </ul>
</div> 
```

我的 CSS

```
#main_navigation ul {
margin: 10px 0 15px 0;
padding: 0;
list-style-type: none;
text-align: center;
}

#main_navigation ul li {
display: inline;
font-size:24px;
}

#main_navigation ul li a {
text-decoration: none;
padding: .2em 1em;
color: #cbc19e;
background-color: #322918;
}

#main_navigation ul li a:hover {
color: #322918;
background-color: #cbc19e;
} 
```

这看起来很完美，除非它没有完全延伸到页面上其余对象的全宽。容器有：

```
margin:0 50px 0 50px; 
```

页面上的所有其他容器也是如此。唯一不拉伸整个宽度的是导航栏。如果可能的话，我不想使用表格或 jscript。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:32:50.260

```
#main_navigation ul li {
  display: inline-block;
  font-size:24px;
}

#main_navigation ul li a {
  text-decoration: none;
  padding: .2em 1em;
  color: #cbc19e;
  background-color: #322918;
  width: 200px;
  display: block;
} 
```

`display`将属性分别更改为`inline-block`和`block`，并设置`width`为您想要的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-18T10:14:02.203

```
#main_navigation ul 
    {display:table;
    width:100%;}
#main_navigation ul li {
    list-style-type: none;
    display: table-cell;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:33:14.087

基本上，你只需要在元素上应用`display: block`,`float: left`和，让它们伸展元素的整个宽度，这已经是包含 100% 的宽度了。`width: 33.3%``<li>``<ul>``<div>`

[在这个演示](http://jsfiddle.net/bnj9v/)中看看它是如何工作的。

代码如下：

```
#container {
    margin:0 50px 0 50px;
}

#main_navigation ul {
    margin: 10px 0 15px 0;
    padding: 0;
    list-style-type: none;
    text-align: center;
    background: cyan;
    overflow: hidden;
}

#main_navigation ul li {
    margin: 0;
    padding: 0;
    display: block;
    font-size:24px;
    width: 33.3%;
    float: left;
}

#main_navigation ul li a {
    text-decoration: none;
    padding: .2em 1em;
    color: #cbc19e;
    background-color: #322918;
}

#main_navigation ul li a:hover {
    color: #322918;
    background-color: #cbc19e;
} 
```

请注意，您的 HTML 代码中的链接存在错误，

它应该是：

```
 <div id="main_navigation">
  <ul>
   <li><a href="/One">One</a></li>
   <li><a href="/Two">Two</a></li>
   <li><a href="/three">Three</a></li>
  </ul>
 </div> 
```

# sql - SQL 将表与自身进行比较

> ID：11026398
> 
> 赞同：-1
> 
> 时间：2012-06-14T03:45:23.207
> 
> 标签：sql

```
Movie(title, year, director, budget, earnings)
Actor(stagename, realname, birthyear)
ActedIn(stagename, title, year, pay)
CanWorkWith(stagename, director) 
```

找到所有成对的艺名（重命名为 stagename1 和 stagename2），使得 stagename1 的演员与 stagename2 的演员在同一部电影中表演，但在该电影中表演的收入较少。

```
SELECT A.stagename, B.stagename
FROM ActedIn A
LEFT JOIN ActedIn B ON A.title = B.title AND A.year = B.year
          AND B.pay > A.pay
WHERE B.name IS NOT NULL 
```

不确定 WHERE B.name IS NOT NULL 是否有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:58:17.333

[http://sqlfiddle.com/#!2/67568/1](http://sqlfiddle.com/#!2/67568/1)

```
select a1.stagename as stagename1, a2.stagename as stagename2, a1.title
from ActedIn as a1
 inner join ActedIn as a2 on (a1.title = a2.title and a1.year = a2.year)
where a1.pay < a2.pay 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:53:29.693

```
SELECT A.stagename, B.stagename
FROM ActedIn A
INNER JOIN ActedIn B ON A.title = B.title 
AND A.year = B.year AND B.pay > A.pay
WHERE B.name IS NOT NULL 
```

如果您不想要 B 的 NULL 值，则 LEFT JOIN 将毫无用处。

# django - Django：链接 filter() 函数是否会产生与使用多个 kwargs 相同的 SQL？

> ID：11026401
> 
> 赞同：2
> 
> 时间：2012-06-14T03:45:49.473
> 
> 标签：django, django-orm

在 Django 中，以下两个片段是否产生相同的底层 SQL 查询？

```
qs = MyModel.objects.filter(group=1, type=2) 
```

和

```
qs = MyModel.objects.filter(group=1).filter(type=2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:03:15.850

这实际上取决于是否存在连接或跨区查找，尤其是通过`M2M`关系。例如

```
>>> print User.objects.filter(groups__gt=1).filter(groups__lt=2).query
SELECT "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."password", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."last_login", "auth_user"."date_joined" FROM "auth_user" INNER JOIN "auth_user_groups" ON ("auth_user"."id" = "auth_user_groups"."user_id") INNER JOIN "auth_user_groups" T4 ON ("auth_user"."id" = T4."user_id") WHERE ("auth_user_groups"."group_id" > 1  AND T4."group_id" < 2 )

>>> print User.objects.filter(groups__gt=1, groups__lt=2).query
SELECT "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."password", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."last_login", "auth_user"."date_joined" FROM "auth_user" INNER JOIN "auth_user_groups" ON ("auth_user"."id" = "auth_user_groups"."user_id") WHERE ("auth_user_groups"."group_id" < 2  AND "auth_user_groups"."group_id" > 1 ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T03:52:54.963

**是的**

## 更多`QuerySet`关于

更多关于 chaining`QuerySet`的文档`filter`：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#chaining-filters](https://docs.djangoproject.com/en/dev/topics/db/queries/#chaining-filters)

## 两个提到的电话之间的区别

但是，有一些区别。对于每个`filter()`方法调用，您都会收到新`QuerySet`对象，因此请执行以下调用：

```
qs = Model.objects.filter(group=1, type=2) 
```

似乎比执行此调用更明智（就性能和您需要编写的代码量而言）：

```
qs = Model.objects.filter(group=1).filter(type=2) 
```

## `QuerySet`s很懒

如本节标题所示，仅仅`QuerySet`返回并不意味着查询已经在数据库上执行。它只是将用于执行查询的条件的容器。

[文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)说：

> `QuerySet`s 是懒惰的——创建 a 的行为`QuerySet`不涉及任何数据库*活动*。您可以整天将过滤器堆叠在一起，并且 Django 在`QuerySet`被*评估*之前不会实际运行查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:01:57.300

两者都是相同的，我什至检查了正在生成的 sql 查询。它们是相同的。

```
CreateCardTrack.objects.filter(email='vivek').filter(id=1)
>>> connection.queries
[{'time': '0.000', 'sql': u'SELECT `CreateCardTrack`.`id`, `CreateCardTrack`.`email`, `    CreateCardTrack`.`date` FROM `CreateCardTrack` WHERE (`CreateCardTrack`.`email` =     vivek.s  AND `CreateCardTrack`.`id` = 1 ) LIMIT 21'}]
>>> CreateCardTrack.objects.filter(email='vivek.s',id=1)
[<CreateCardTrack: CreateCardTrack object>]
>>> #SELECT `CreateCardTrack`.`id`, `CreateCardTrack`.`email`, `CreateCardTrack`.`date` FROM `CreateCardTrack` WHERE (`CreateCardTrack`.`email` = vivek.s  AND `CreateCardTrack`.`id` = 1 ) LIMIT 21 
```

# ruby-on-rails - 如何将 MM:SS:splits 转换为 MM:SSSS？

> ID：11026406
> 
> 赞同：0
> 
> 时间：2012-06-14T03:46:19.477
> 
> 标签：ruby-on-rails, ruby, time

我有一个看起来像这样的音频标签：“ `00:14:164`”，即“ `MM:SS:splits`”。

我希望格式为数字，并且仅以秒为单位。

例如：

“ `00:14:164`”将是`14.164`

和

“ `01:59:582`”将是`119.582`

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:49:49.087

```
def tag_to_f(tag)
  a = tag.split(':').map(&:to_i)
  "#{a[0] * 60 + a[1]}.#{a[2]}".to_f
end

tag_to_f "01:59:582" 
```

或猴子补丁`String`：

```
class String
  def to_f_with_audio_tag
    if a = match(/^(\d+):(\d+):(\d+)$/).to_a[1..3].map(&:to_i) rescue nil
      "#{a[0] * 60 + a[1]}.#{a[2]}".to_f_without_audio_tag
    else
      to_f_without_audio_tag
    end
  end

  alias_method_chain :to_f, :audio_tag
end

"01:59:582".to_f 
```

# java - Wordpress 程序化编辑 HTTP POST

> ID：11026407
> 
> 赞同：0
> 
> 时间：2012-06-14T03:46:47.493
> 
> 标签：java, wordpress, http, post, edit

我正在尝试使用 Java 中的 HTTP 请求自动执行一些 Wordpress 更改。但是，Wordpress 似乎像往常一样设法使事情变得过于复杂。

为什么用我的 wordpress 登录 cookie 和数据 post=123&action=edit&content=NewContent 发布 www.mysite.com/wp-admin/post.php 似乎几乎不可能

?

这怎么不可能？他们真的愚蠢到可以用 post-new.php 为每次编辑重新创建整个帖子吗？（根据标题中发现的巨大混乱，他们似乎正在这样做）

我是内容管理系统的新手，但我无法相信这些框架看起来有多么可怕。

我可能被迫将 XMLRPC 用于我的目的，我想这没问题，但我仍然想知道我是否可以替代地执行原始 HTTP 请求，如果不能；为什么不。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:23:39.350

我不明白你为什么想要那个。但是让您无法通过 HTTP 请求编辑帖子的一件事是因为所有数据都是通过 $_POST 而不是 $_GET 提交的。因此，除非您对 wp-admin/post.php 和与之相关的任何文件进行一些更改，否则这是可能的。

恕我直言，复杂化不是一件简单的事情，要变得安全只是一件简单的事情。

# actionscript-3 - 滑动手势是否适用于 AS3 中的对象？

> ID：11026409
> 
> 赞同：1
> 
> 时间：2012-06-14T03:47:12.300
> 
> 标签：actionscript-3, mobile, swipe

我找到了有关在 AS3 中使用触摸手势的教程： [http ://www.republicofcode.com/tutorials/flash/as3swipegesture/](http://www.republicofcode.com/tutorials/flash/as3swipegesture/)

但是按照它所说的那样做对我不起作用：我无法让滑动手势对一个对象起作用。如果我将听众应用在舞台上，它似乎才有效。但是 Flash 帮助说这确实适用于对象！任何人都可以得到这个工作？

如果我将它应用到一个对象上什么都不做，但如果将它应用到舞台上，相同的代码就可以工作！我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:32:06.227

如果你想有一个 throw 行为，也许`TOUCH_BEGIN`,`TOUCH_MOVE`和`TOUCH_END`会有所帮助。

我建议也阅读这篇文章：http:
[//www.adobe.com/devnet/flash/articles/multitouch_gestures.html](http://www.adobe.com/devnet/flash/articles/multitouch_gestures.html)

# iphone - UIImage 难度

> ID：11026415
> 
> 赞同：-1
> 
> 时间：2012-06-14T03:48:08.507
> 
> 标签：iphone, ios, xcode

我在`HSImageSidebarView`开源项目中包含的示例中使用 and ，这是在边栏中加载图像的方法：

```
-(UIImage *)sidebar:(HSImageSidebarView *)sidebar imageForIndex:(NSUInteger)anIndex {
    int color = [[colors objectAtIndex:anIndex] intValue];
    switch (color % 3) {
        case 0:
            return [UIImage imageNamed:@"Blue"];
            break;
        case 1:
            return [UIImage imageNamed:@"Red"];
            break;
        default:
            return [UIImage imageNamed:@"Green"];

    }
} 
```

我的问题是如何从`NSDocumentDirectory`. 这是我的数组：

```
self.images = [NSMutableArray new];  
for(int i = 0; i <= 100; i++) 
{ 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", i]]; 
    NSLog(@"savedImagePath=%@",savedImagePath);

    if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
        [images addObject:[UIImage imageWithContentsOfFile:savedImagePath]]; 
        NSLog(@"file exists");
    } 
    NSLog(@"file does not exist");
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:08:14.640

会做这样的事情。

```
-(UIImage *)sidebar:(HSImageSidebarView *)sidebar imageForIndex:(NSUInteger)anIndex {

    return (UIImage*)[self.images objectAtIndex:anIndex];

} 
```

您已经将`UIImage`' 存储到您的`images`数组中。所以没有必要`-imageNamed:`像例子那样使用方法。相反，您所做的是使用该方法从`images`数组中返回所述索引处的图像。`objectAtIndex:`

希望这可以帮助。

# python - Python在比较中缺少短数字

> ID：11026419
> 
> 赞同：0
> 
> 时间：2012-06-14T03:48:26.213
> 
> 标签：python, sqlite, csv

出于某种原因，我的代码适用于所有 10 位数字，但不适用于 3-4 位数字。我创建了一个示例概念来尝试简化这一点，以便我可以看到我的逻辑出了什么问题。但是**我的示例运行良好，但我的实际代码却没有**。我的结论是它必须与从 SQLite 或 CSV 读取数据有关。这是一个很好的示例概念代码：

```
test_list = [ (1, 1234567890), (2, 987654321), (3, 123), (4, 4567) ]
# showing all contents
print test_list

# proving it is a list
print type(test_list)

# comparison list
new_list = [ 1234567890, 987654321, 123, 4567, 1567839890, 987654321 ]

# find k given matching v
for num in new_list:
  for k, v in test_list:
    if v == num:
      print 'the key of ' + str(num) + ' = ' + str(k) 
```

这是非工作代码：

```
def populateTextMsgs(csvfile, db):
  conn = sqlite3.connect(db)
  conn.text_factory = str  # 8-bit bytestrings
  cur = conn.cursor()

  # get subscribers and write to subscriber_list, no problems here
  cur.execute('SELECT subscriber_id, phone_number FROM subscriber')
  subscriber_list = cur.fetchall()  # this is getting all the subscribers

  # no problems here
  # read values from tab-delimited csv file
  i = 1  # do not use first line (contains headers)
  reader = csv.reader(open(csvfile, "rU"), delimiter = '\t')
  for Number, Name, Message, Datetime, Type in reader:
    # check to ensure name/number not null and not first record
    if Number and Name and i > 1:
      # if number starts with '1' then remove first digit
      if str(Number)[0] == '1':
        Number = int(str(Number)[1:])

      # this is where I think the problem is, but cannot figure out why
      # return subscriber_id (sid) given phone number
      for sid, num in subscriber_list:
        if num == Number:
          # insert messages into textmsg table
          cur.execute('INSERT OR IGNORE INTO textmsg (subscriber_id, msg, datetime, type) VALUES (?,?,?,?)', (sid, Message, Datetime, Type))
          conn.commit()

    i += 1  # iterator to ensure first line is not used but others are

  cur.close()
  conn.close()
  print '...Successfully populated textmsg table.' 
```

这适用于所有长数字，但它不会获得短数字的数据。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:07:29.640

只需替换`if num == Number:`为`if num == int(Number):`，你应该很好，你已经转换了其中一些，那些以 1 开头但不是其他的，csv阅读器只返回字符串，而 sqlite 根据列返回不同的类型......因此你正在比较字符串和整数...

# apache - apache 工作正常，但 netstat 没有显示 apache 的端口

> ID：11026423
> 
> 赞同：0
> 
> 时间：2012-06-14T03:48:45.307
> 
> 标签：apache, system, netstat

我遇到了一个问题：我的 apache 在端口 80 上监听工作正常，我可以通过浏览器访问它，我在这个 apache 打印信息中看到了关于我访问的日志。----所以我可以保证我访问正确服务器，服务器正在为我工​​作。和 telnet xxxx 80，没关系。（xxxx 是我的服务器 ip）但是当我使用 netstat -nap|grep 80 时，我看不到任何东西。

我怀疑 80 端口有点敏感，所以我的系统可能会从 netstat 工具中筛选它。所以我通过将端口设置为 81 并启动我的 apache 来更改 http.conf，它工作正常，但仍然与 netstat 被愚弄不显示关于 81 端口的信息。

有什么帮助吗？tks 我想我可以通过重新启动我的机器来获得正确的状态，但我不想这样做，我只想知道为什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:05:30.077

这些`nap`选项不显示有关侦听端口的进程的任何信息。使用类似的东西`netstat -lt`来显示你正在监听的端口。

# asp.net - 在 mvc3 中处理登录/身份验证的最佳方法

> ID：11026427
> 
> 赞同：1
> 
> 时间：2012-06-14T03:49:22.263
> 
> 标签：asp.net, asp.net-mvc-3, authentication, cookies, asp.net-membership

只是想知道在 mvc3 中处理登录/用户身份验证的最佳实践是什么。最好使用内置的成员资格，例如：

```
 [HttpPost]
    public ActionResult Register(RegisterUser model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                return RedirectToAction("Index","User");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        }

        return View(model);
    } 
```

或者更简单和自定义的东西，例如制作自己的 cookie 以避免每次都使用预打包的数据库结构？

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
    1,
    user.UserName,
    DateTime.Now,
    DateTime.Now.AddMinutes(10),
    false,
    null);

string encryptedTicket = FormsAuthentication.Encrypt(ticket);
HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);

this.Response.Cookies.Add(cookie); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:03:03.867

我个人同意 Stack Overflow 提供两种直接通过 Stack Exchange 和 OpenId / OAuth 访问进行注册的方法；谷歌、雅虎、脸书、推特等。

在提供您自己的注册时，我会坚持使用 ASP.NET Membership 提供程序或通过[NuGet](http://nuget.org/packages?q=membershipprovider)提供的类似提供程序。

在使用 OpenId 和 OAuth 时，我在[DotNetOpenAuth](http://www.dotnetopenauth.net/)方面取得了巨大成功。请参阅 Andrew Arnott 的详细回答使用 OpenId 的好处和理由：[To OpenID or not to OpenID？这值得么？](https://stackoverflow.com/questions/1316983/to-openid-or-not-to-openid-is-it-worth-it)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T03:57:38.193

**ASP.NET 成员资格的存在是有原因的。**

如果它像设置 cookie 一样简单，LinkedIn 黑客就不会知道我的密码。

### 除非您真的知道自己在做什么，否则不要编写自己的会员提供程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T05:05:58.463

我建议您最好的选择是提供自定义提供程序，这样您就不必使用“预打包”数据库。通过这种方式，您可以重复使用内置的身份验证和授权内容，同时仍然拥有自定义的用户数据库。

这并不难，只需创建一个派生自`MembershipProvider`（`RoleProvider`如果您想包含角色）的类。这些是抽象类，因此您需要提供各种方法的实现。为了省去为所有方法提供实现的麻烦，您可以使用不会使用 throw 的方法`NotImplementedException`。

# javascript - 翻转时的文本幻灯片

> ID：11026430
> 
> 赞同：0
> 
> 时间：2012-06-14T03:49:41.160
> 
> 标签：javascript, jquery, jquery-slide-effects

我的翻滚拇指在我的页面上消失了，但我喜欢文本滑入到位而不是淡出，但在文本下方有一个透明的彩色条。

```
$(document).ready(function()
{
$("img.b").hover(
function() {
$(this).stop().animate({"opacity": "1"}, "70");
},
function() {
$(this).stop().animate({"opacity": "0"}, "100"); 
```

它现在的运作方式

[http://toddheymandirector.com/REEL/](http://toddheymandirector.com/REEL/)

我喜欢它的运作方式

[http://toddheymandirector.com/slide.html](http://toddheymandirector.com/slide.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T03:56:50.707

你可以这样做：http: [//jsfiddle.net/xze3g/2/](http://jsfiddle.net/xze3g/2/)

编辑：为 IE 添加了不透明度

# c - 在不使用联合的情况下，如何在 C 中将 64 个字节的数组视为 16 个整数的数组（反之亦然）？

> ID：11026435
> 
> 赞同：1
> 
> 时间：2012-06-14T03:51:05.450
> 
> 标签：c, arrays, pointers, types, type-conversion

所以，在我的程序中，我有一个变量

```
uint32_t buffer[16]; 
```

但是，有时我需要将其视为

```
uint8_t char_buffer[64]; 
```

最明显的解决方案是工会。但是，出于求知欲，是否有另一种方法可以告诉编译器我想将数组视为某种任意类型的数组？类似的东西

```
((uint8_t *)buffer)[i] 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:00:16.857

铸造方法是完美的。它*将使*编译器将数组视为整数数组。在您的特殊情况下，使用

```
((uint32_t *)buffer)[index]; 
```

然而，正如@JerryCoffin 指出的那样，存在对齐问题。如果您将数组静态分配为 a `char []`，则它不一定是 4 字节对齐的（整数需要这样）。如果您确实想避免这个问题，请使用它，`malloc()`因为它可以保证适当的 alginment。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T04:16:20.360

ISO C99 标准说：

> 当指向对象的指针转换为指向字符类型的指针时，结果指向对象的最低寻址字节。结果的连续增量，直到对象的大小，产生指向对象剩余字节的指针。

这表示如果`uint8_t`是`typedef unsigned char`（并且它必须是如果`uint8_t`存在于您的系统中），那么您的代码必须工作：数组引用相当于取消引用的指针 + int 加法。

请注意，这仅在转换*为* `char`. 以其他方式或其他方式转换只能保证在您最终可以转换回来的意义上起作用，并且最终将等于原始值。例如，您不能从 32 位长数组转换为 16 位短数组并确保符合标准的任何内容，尽管它可能在大多数 CPU/编译器组合的实践中工作。

# objective-c - iPad 游戏：Objective-C 是否太慢（与普通 C 相比）？

> ID：11026447
> 
> 赞同：1
> 
> 时间：2012-06-14T03:53:41.303
> 
> 标签：objective-c, ios, c

我开始为 iPad 设计一个新游戏，我看到一篇文章说我应该用 C 而不是 Objective-c 来编写游戏，因为 Objective-c 太慢了。

任何人都可以对此发表评论吗？我不知道 C 或 C++，但我正在努力寻找开发这款游戏的最佳方式。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T03:56:40.353

不要害怕 Objective-C 的速度。它的运行时间经过 Apple 工程师的高度优化，不要忘记最近的 iDevices 具有非常好的和快速的硬件。

反对纯 C 的主要原因是你找不到一个好的/易于使用的 C 游戏开发库，因为所有 iOS 的图形和其他媒体处理库都是用 Objctive-C 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:09:09.043

你需要问自己一些问题；答案将有助于确定您要学习的课程。有两个我觉得很重要：

1.  什么样的游戏？当她/他玩游戏时，性能会在哪些方面对用户体验产生影响？

2.  你目前的技能是什么？你需要学多少？（正如你所说，你不知道 C，你至少需要学习 C。这有多难取决于你的经验和你目前流利的语言数量。当然还有在 Objective- C 意味着至少对 C 有中等深度的理解。）

3.  游戏需要什么样的能力？（例如，带有碰撞检测的 3-D？在字典中查找单词？）您将如何提供这些？您可以利用哪些现有软件来满足此类需求？

如果您觉得某个领域的性能很重要，那么模拟一种基本方法并了解您的方法具有什么样的性能是有意义的。大量提高性能的最佳方法是提出更好的方法/算法。通过分析和调整从现有方法中获得巨大的性能提升要困难得多。

iOS 最简单最“原生”的开发方法当然是使用 Objective-C。这是绝大多数应用程序的编写方式，也是您可以找到最佳工具和技术的地方。另外，您可能想要使用的大多数支持库都将用于 Objective-C。

希望能给你一些有用的方向。

# javascript - 从 JavaScript 数组中删除对象？

> ID：11026448
> 
> 赞同：38
> 
> 时间：2012-06-14T03:54:08.367
> 
> 标签：javascript, arrays, object

> **可能重复：**
> [从 javascript 数组中删除特定元素？](https://stackoverflow.com/questions/5767325/remove-specific-element-from-a-javascript-array)

具体来说，我有一个数组如下：

```
var arr = [
    {url: 'link 1'},
    {url: 'link 2'},
    {url: 'link 3'}
]; 
```

现在您要删除有价值的元素 url “link 2”，并在删除唯一的数组后如下所示：

```
arr = [
    {url: 'link 1'},
    {url: 'link 3'}
]; 
```

那么谁能帮我解决这个问题呢？非常感谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-14T03:58:03.777

你可以做一个过滤器。

```
var arr = [
  {url: "link 1"},
  {url: "link 2"},
  {url: "link 3"}
];

arr = arr.filter(function(el){
  return el.url !== "link 2";
}); 
```

***PS：*** [`Array.filter`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)方法是在JavaScript 1.6中实现的，大多数现代浏览器都支持，如果要支持旧浏览器，你可以自己写一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T03:56:10.173

使用 splice 函数删除数组中的元素：

```
arr.splice(1, 1); 
```

如果您想在不知道基于元素属性的索引的情况下删除数组的元素，则必须遍历数组和每个元素的每个属性：

```
for(var a = 0; a < arr.length; a++) {
    for(var b in arr[a]) {
        if(arr[a][b] === 'link 2') {
            arr.splice(a, 1);
            a--;
            break;
        }
    }
} 
```

# c++ - C++ 虚拟继承，类可见性？

> ID：11026450
> 
> 赞同：2
> 
> 时间：2012-06-14T03:54:28.040
> 
> 标签：c++, oop, class, inheritance

所以这是我的困境：

*我有一个基类（假设是一个通用的 Person 类）：*

```
class Person{
public:
    Person();
    ~Person();
    virtual void Init();
    virtual void SaySomething();
}; 
```

*现在我想让其他类继承这些方法。*

```
class Worker: public Person{
public:

   Worker();
   ~Worker();

   void Init(){
     // would do some special initializing.
   }

   void SaySomething(){
     // Print something about the worker.
   }

}; 
```

*现在我会有一个经理班：*

```
class Manager{
public:

   void Init();
   void Run();

   void SwitchPerson(Person* p);

protected:
   vector<Person*> people;
}; 
```

我给出的 Worker 是 Person 的子类的例子可能不是最好的。但重点不是类的内容，而是继承，更具体地说，是类如何理解和了解其他类。

现在在我的主要功能中，我将拥有以下内容：

```
int main()
{
  Manager* m = new Manager();
  m->Init();

  // Create a new worker;
  Person* w = new Worker();

  m->SwitchPerson(w);

  return 0;
} 
```

现在我不确定这是否是解决问题的正确方法。问题是可以有无限数量的子类，而经理类不能知道它们。manager 类只知道父（Person）类。因此 SwitchPerson 将添加 Person 类型的新 Worker 类（现在我不确定这是否在结构上不正确，我有一种感觉。）到向量中。但首先它需要确保向量中已经没有 Worker Class。我尝试使用 typeid.name 但这显然返回了父（人）类的名称。

我曾想过使用带有向量的模板.. 但这又需要管理器类了解 Worker 或任何其他子类。

如果您需要我解释其他任何内容或添加任何相关信息，请告诉我。

编辑：

注意：Person、Worker 和 Manager 是无关紧要的。它可以是相机、镜头和舞台。

开关人：

假设一次只能有一个人处于活动状态。使用相机、镜头和舞台类比会更有意义。由于只有一台相机可以进入屏幕，可以说。

假设我们保持相机类比。我们有了第一个场景，我们首先调用 SwitchCamera() 并传入新的 Camera。但问题是舞台对象（即经理）不了解镜头或不同类型的镜头。可能有 100 或 10000。没关系。场景只知道作为所有镜头类的基类的相机。

因此，当我们 switchCamera() 时，我们可以利用对象来控制镜头，比如说（不是很现实，但无论如何）。所有控件首先作为 Camera 基类中的虚拟成员实现。所以镜头类都有相同的成员。

现在您已经完成了第一个场景并想再次切换相机。您将再次调用 SwitchCamera() 并传入新的第二个摄像头。在切换相机中，目标是将传递的相机对象设置为活动相机，然后将其推送到矢量。

但我们不想要相同镜头的两个副本。这就是问题所在。我希望能够检查传入的 Camera* camera = new Lense123(); 已经在向量内。如果是，那么我想使用原始的并丢弃新通过的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:18:52.377

听起来您希望 Manager 拥有一个*唯一*人员的向量，即您可以有一个 Worker、一个 Person 和一个 ThirdPerson，但向量中的每个人不能超过一个？为什么不在 Person 中重载一个函数，该函数返回子类的字符串标签并遍历向量，为每个调用 pPerson->GetLabel() ，并将其与您正在考虑添加到向量中的新对象的标签进行比较.

Manager 仍然只知道 Person 类，不需要知道 Person 的不同子类，但可以从每个类型中获取唯一的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:59:23.143

经理是一个人，而不是经理有一个人。我会从 Person 继承 Manager，而 Manager 有 1...N 个员工，所以最好的办法是：从 Person 继承 Manager 在 Manager 中有一个向量。我会将 Person 类设为虚拟，因此没有人可以实现“Person”

# c# - 使用 RadGridView、DataForm 和 MVVM-light 的 CRUD 方法

> ID：11026451
> 
> 赞同：1
> 
> 时间：2012-06-14T03:55:28.427
> 
> 标签：c#, telerik, mvvm-light, radgridview, dataform

我一直在不停地敲打我的头，我似乎无法解决我面临的问题。

`Scenario :` 我有一个销售订单页面，我正在尝试使用此页面来创建新的销售订单，以及编辑现有的销售订单。SalesOrder Page 主机，以及绑定到当前销售订单、RadGridView 和 DataForm 的其他控件。两者都绑定到 MVVM 中的同一个 Observable Collection。

> 我面临的问题是，

1) DataForm 和 Grid 可以绑定到集合，但是绑定到 DataForm Edit Command 的 Edit Button 是 Disabled。仅启用新按钮。

2）向数据表单添加新项目后，`Edit`按钮已启用，但无论我选择了哪一行，它总是编辑插入的第一行，除非我插入一行，否则我无法编辑任何现有行。似乎 DataForm 并没有真正意识到集合中的任何现有行！

`My Implimentation :`我正在使用 MVVM-light，以下是我的代码的相关块：

`**ViewModel**`

下面`qsdcvSOPDoc`是QueryableSouceDomainCollectionView（mvvm域数据源的封装），Model中的Sales Order Entity叫做`SOPDoc`

```
 public const string qsdcvSOPDocPropertyName = "qsdcvSOPDoc";
   private QueryableDomainServiceCollectionView<SOPDoc> _qsdcvSOPDoc;
   public QueryableDomainServiceCollectionView<SOPDoc> qsdcvSOPDoc
    {
        get
        {
            return _qsdcvSOPDoc;
        }

        set
        {
            if (_qsdcvSOPDoc == value)
            {
                return;
            }

            var oldValue = _qsdcvSOPDoc;
            _qsdcvSOPDoc = value;
            RaisePropertyChanged(qsdcvSOPDocPropertyName, oldValue, value, true); 
```

下面`ocSalesOrderItemsList`是由 IEnumerable、SOPDoc 的子实体填充的可观察集合，其中 SOPDoc.SOPDocDetails

```
 public const string ocSalesOrderItemsListPropertyName = "ocSalesOrderItemsList";
    private ObservableCollection<SOPDocDetail> _ocSalesOrderItemsList;
    public ObservableCollection<SOPDocDetail> ocSalesOrderItemsList
    {
        get
        {
            return _ocSalesOrderItemsList;
        }

        set
        {
            if (_ocSalesOrderItemsList == value)
            {
                return;
            }

            var oldValue = _ocSalesOrderItemsList;
            _ocSalesOrderItemsList = value;
            RaisePropertyChanged(ocSalesOrderItemsListPropertyName, oldValue, value, true);
        }
    } 
```

当`qsdcvSOPDoc`加载数据时，`entCurrentOrder`实体填充当前销售订单，视图中的不同控件绑定到此。

```
 public const string entCurrentOrderPropertyName = "entCurrentOrder";
    private SOPDoc _entCurrentOrder; public SOPDoc entCurrentOrder
    {
        get
        {
            return _entCurrentOrder;
        }

        set
        {
            if (_entCurrentOrder == value)
            {
                return;
            }
            _entCurrentOrder = value;
            RaisePropertyChanged(entCurrentOrderPropertyName);
        }
    } 
```

`PageMode`在导航到此页面之前设置，设置为“新建”或“编辑”，它有助于检查执行加载和保存命令以及触发一些设置默认值的事件。

```
 public const string PageModePropertyName = "PageMode";
    private string _pageMode;
    public string PageMode
    {
        get
        {
            return _pageMode;
        }

        set
        {
            if (_pageMode == value)
            {
                return;
            }
            _pageMode = value;
            RaisePropertyChanged(PageModePropertyName);
        }
    } 
```

`CurrentSalesOrderId`在导航到此页面时设置。

```
 public const string CurrentSalesOrderIdPropertyName = "CurrentSalesOrderId";
    private int _currentSalesOrderId;
    public int CurrentSalesOrderId
    {
        get
        {
            return _currentSalesOrderId;
        }

        set
        {
            if (_currentSalesOrderId == value)
            {
                return;
            }

            var oldValue = _currentSalesOrderId;
            _currentSalesOrderId = value;
            RaisePropertyChanged(CurrentSalesOrderIdPropertyName, oldValue, value, true);
        }
    } 
```

`Constructor of ViewModel`

```
 public SalesOrderViewModel()
    {          
            ctx = new KERPDomainContext();
            var ctxDetail = new KERPDomainContext();

            qry = ctx.GetSalesOrderByIdQuery(CurrentSalesOrderId);
            qsdcvSOPDoc = new QueryableDomainServiceCollectionView<SOPDoc>(ctx, qry);
            qsdcvSOPDoc.Load();
            qsdcvSOPDoc.LoadedData += qsdcvSOPDoc_LoadedData;

            ocSalesOrderItemsList = new ObservableCollection<SOPDocDetail>();
            ocSalesOrderItemsList.CollectionChanged += ocSalesOrderItemsList_CollectionChanged; // This will re-calculate the GrossAmount

           //Commands Binding
            SaveSalesOrder = new RelayCommand(SaveSalesOrderExecute, SaveSalesOrderCanExecute);

        }
    }

 void qsdcvSOPDoc_LoadedData(object sender, LoadedDataEventArgs e)
    {

        entCurrentOrder = (SOPDoc)e.Entities.FirstOrDefault();

        if (PageMode == Enums.SODModes.New.ToString() && CurrentSalesOrderId <= 0)
        { // this is a new Sales Order

            if (entCurrentOrder != null)
                ocSalesOrderItemsList.AddRange((entCurrentOrder.SOPDocDetails.Where(i => i.IsActive == true))); // Adds all active items to the collection list

           // setting some values, the property decleration i omitted here for brevity 
           GrossAmount = 0;
            Carriage = 0;
            Discount = 0;

        }

        if (PageMode == Enums.SODModes.Edit.ToString() && CurrentSalesOrderId > 0)
        {
            if (entCurrentOrder != null)
            {
                ocSalesOrderItemsList.AddRange(entCurrentOrder.SOPDocDetails);

                GrossAmount = entCurrentOrder.SOPDocDetails.Sum(i => i.NetAmount);
                Carriage = entCurrentOrder.Carriage;
                Discount = entCurrentOrder.Discount;
            }
        }
    } 
```

**看法**

View 有一个 RadGridView 控件和一个 dataform 控件，它们都绑定到相同的 ItemSource 和 CurrentItem：

```
 <telerik:RadGridView ItemsSource="{Binding ocSalesOrderItemsList}"  Grid.Row="1"                            
                         AutoExpandGroups="True" AutoGenerateColumns="False" ColumnWidth="*" CurrentItem="{Binding entSOPDocDetail}" IsSynchronizedWithCurrentItem="True" IsReadOnly="False">

            <telerik:RadGridView.Columns>
                <telerik:GridViewDataColumn Header="Product Code" DataMemberBinding="{Binding ProductCode}" Width="1.5*"/>
                <telerik:GridViewDataColumn Header="Description" DataMemberBinding="{Binding Description}" Width="5*"/>
                <telerik:GridViewDataColumn Header="Qty" DataMemberBinding="{Binding Qty}" Width="*"/>
                <telerik:GridViewDataColumn Header="UnitType" DataMemberBinding="{Binding UnitType}"/>
                <telerik:GridViewDataColumn Header="Unit Price" DataMemberBinding="{Binding UnitPrice}" DataFormatString="{}{0:0,0.00}"/>
                <telerik:GridViewDataColumn Header="Line Total" DataMemberBinding="{Binding NetAmount}" DataFormatString="{}{0:0,0.00}"/>
                <telerik:GridViewColumn Width="90">
                    <telerik:GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <telerik:RadButton Content="Delete" Command="telerik:RadGridViewCommands.Delete" CommandParameter="{Binding}" />
                        </DataTemplate>
                    </telerik:GridViewColumn.CellTemplate>
                </telerik:GridViewColumn>
            </telerik:RadGridView.Columns>           
    </telerik:RadGridView>

  <telerik:RadDataForm x:Name="dataForm"
                         ItemsSource="{Binding ocSalesOrderItemsList}" 
                         CommandButtonsVisibility="Cancel,Commit" 
                         AutoGenerateFields="False"
                         ValidationSummaryVisibility="Collapsed"
                         EditEnded="RadDataForm_EditEnded"
                         CurrentItemChanged="OnDataFormCurrentItemChanged"
                         LabelPosition="Above"
                         EditTemplate="{StaticResource SOItemsEditTemplate}"
                         NewItemTemplate="{StaticResource SOItemsEditTemplate}" 
                         VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" CurrentItem="{Binding entSOPDocDetail}"/> 
```

`Add`和`Edit`按钮绑定到 DataForm 命令：

```
 <telerik:RadButton RenderTransformOrigin="0.5,0.5" Style="{StaticResource smallCommandCircleRadButtons}" Tag="EDIT"
                               Command="telerik:RadDataFormCommands.BeginEdit" CommandTarget="{Binding ElementName=dataForm}" />

      <telerik:RadButton RenderTransformOrigin="0.5,0.5" Style="{StaticResource smallCommandCircleRadButtons}" Margin="0,0,40,0" Tag="ADD ITEM" 
                               Command="telerik:RadDataFormCommands.AddNew" CommandTarget="{Binding ElementName=dataForm}" /> 
```

> 再次 - 问题我面临的问题是，1）DataForm 和 Grid 可以绑定到集合，但是绑定到 DataForm 编辑命令的编辑按钮被禁用。仅启用新按钮。

2）向数据表单添加新项目后，`Edit`按钮已启用，但无论我选择了哪一行，它总是编辑插入的第一行，除非我插入一行，否则我无法编辑任何现有行。似乎 DataForm 并没有真正意识到集合中的任何现有行！

我知道上面的方法可能存在原则错误，或者可能整个方法都是错误的，但这就是我寻求帮助的原因！！任何建议，即使是涉及 CRUD、数据表单和支持 MVVM 的网格的不同方法建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:53:18.560

好吧，最后我找到了一种自己解决上述问题的方法，并借助我在 SO [Here](https://stackoverflow.com/questions/11114015/silverlight-domaincontext-load-with-two-saperate-domaindatasources "使用两个 DomainDataContext 在同一个 DomainContext 中加载实体")上发布的另一个问题。

我实际上所做的是，声明了一个 DomainContext `ctx`，然后我通过它加载了销售订单`DomainDataSource1`，另一个`DomainDataSource2`加载了订单详细信息。这两个都分别绑定到 Grid 和 Dataform。在完成所有记录的编辑和添加之后，我只调用`ctx.SaveChanges`了将所有已加载实体的所有更改保存回 Ria.Entity.AcceptChanges() 保护方法。而已...

结论：无论我们使用多少个 DomainDataSource 将数据加载到上下文中，如果您想将它们全部保存在一起，请`DomainContext`对所有这些使用 SINGLE。`DomainContexts`仅当您要使用部分 SubmitChanges时才使用 saperate :)。

还需要澄清吗？评论我.......

# objective-c - 使用类似于 Apple 的 avTouch 项目的 AVAudioPlayer

> ID：11026452
> 
> 赞同：1
> 
> 时间：2012-06-14T03:55:45.400
> 
> 标签：objective-c, ios, avaudioplayer

我正在尝试复制 Apple avTouch 中的一些功能，但我无法`AVAudioPlayer`播放曲目。

它记录`Could not play (null)`. (null) 代表 AVAudioplayer `player.url`。但是，当我登录时`player.url`，它会正确返回。我还测试了流 URL（它来自 soundcloud）。

我几乎只对示例代码进行了两次更改。

1.  我使用的是音频流 URL，而不是文件。
2.  我必须添加`__bridge`以下代码（虽然我真的不知道它是做什么的）

    ```
    OSStatus result = AudioSessionInitialize(NULL, NULL, NULL, NULL);
      if (result)
    NSLog(@"Error initializing audio session! %@", result);

      [[AVAudioSession sharedInstance] setDelegate: self];
      NSError *setCategoryError = nil;
      [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryError];
      if (setCategoryError)
        NSLog(@"Error setting category! %@", setCategoryError);

        result = AudioSessionAddPropertyListener (kAudioSessionProperty_AudioRouteChange, RouteChangeListener, (__bridge void *)self);
       if (result) 
    NSLog(@"Could not add property listener! %@", result);

    void RouteChangeListener(   void *                  inClientData,
                     AudioSessionPropertyID inID,
                     UInt32                  inDataSize,
                     const void *            inData)
    {
    SongsViewController* This = (__bridge SongsViewController*)inClientData;

    if (inID == kAudioSessionProperty_AudioRouteChange) {

    CFDictionaryRef routeDict = (CFDictionaryRef)inData;
    NSNumber* reasonValue = (__bridge NSNumber*)CFDictionaryGetValue(routeDict, CFSTR(kAudioSession_AudioRouteChangeKey_Reason));

    int reason = [reasonValue intValue];

    if (reason == kAudioSessionRouteChangeReason_OldDeviceUnavailable) {

        [This pausePlaybackForPlayer:This.player];
      }
     }
    } 
    ```

**编辑**：我认为这种情况正在发生 b/c`AVAudioPlayer`并不适用于网络流。我可以简单地将 AVAudioPlayer 更改为 AVPLayer 吗？我有一种感觉，这并不容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:52:17.773

AVAudioPlayer 不适用于网络流。苹果文档：

`Apple recommends that you use this class for audio playback unless you are playing audio captured from a network stream or require very low I/O latency.`

# php - 使用 MySQL 插入和选择数组内容？

> ID：11026455
> 
> 赞同：-3
> 
> 时间：2012-06-14T03:56:29.823
> 
> 标签：php, mysql, arrays

例如，我有 1 个数组：

```
Array(
    [Griffin] => Array (
        [0] => Peter
        [1] => Lois
        [2] => Megan
    )
    [Quagmire] => Array (
        [0] => Glenn
    )
    [Brown] => Array (
        [0] => Cleveland
        [1] => Loretta
        [2] => Junior
    )
) 
```

请让我知道如何插入和选择 1 个具有多级到 1 个字段 MySQL 类型的数组，如下所示：

```
a:9:{s:8:"platform";s:7:"Windows";s:4:"name";s:6:"Chrome";s:7:"version";s:11:"16.0.912.75";s:10:"update_url";s:28:"http://www.google.com/chrome";s:7:"img_src";s:49:"http://s.wordpress.org/images/browsers/chrome.png";s:11:"img_src_ssl";s:48:"https://wordpress.org/images/browsers/chrome.png";s:15:"current_version";s:2:"16";s:7:"upgrade";b:0;s:8:"insecure";b:0;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:20:53.873

看来您正在寻找[`serialize`](http://php.net/manual/en/function.serialize.php).

# html - 新的 three.js 版本不再适用于搅拌机模型？

> ID：11026457
> 
> 赞同：0
> 
> 时间：2012-06-14T03:56:48.303
> 
> 标签：html, 3d, blender, three.js

我曾经导出搅拌机模型以将它们与 three.js 一起使用。那是在 r47 和之前的时间。但是今天我将 three.js 更新到最新版本 r49，它不再适用于 r48，我的意思是在浏览器中显示模型的相同简单代码，只是因为我更新了 three.js 没有现在显示任何东西。我该怎么办？留在 r47 还是有我不知道新版本的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:04:33.557

您需要使用最新的 Blender 导出器重新导出。

# python - 无法使用 MySQL 数据写入文件

> ID：11026460
> 
> 赞同：0
> 
> 时间：2012-06-14T03:57:44.190
> 
> 标签：python, mysql, database, file, file-io

我收到此错误：

```
TyperError: sequence item 2: expected string, long found 
```

这是[我的代码](http://pastebin.com/HhD6cSsD)：

```
import MySQLdb
connection = MySQLdb.connect (host = "localhost", user = "root", passwd = "*****", db = "test")
cursor = connection.cursor ()
cursor.execute ("SELECT * FROM names")
data = cursor.fetchall ()
no = []
no += ["<users>\n"]
for row in data :
        no += ["        <user id='", row[0], "' name='", row[1], "' blend='", row[2], "'/>\n"]
        no += ["                <nick color='0x", row[3], "' font='", row[4], "'/>\n"]
        no += ["                <glow color='0x", row[5], "' alpha='", row[6], "' blurX='", row[7], "' blurY='", row[8], "' strength='", row[9], "' quality='", row[10], "'/>\n"]
        no += ["        </user>\n", row[11]]
cursor.close ()
connection.close ()
no += ["</users>"]
s = ''.join(no)
file = open('test.xml','w')
file.write(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:15:48.050

您可以执行以下操作，而不是按照您的方式将字符串连接到子列表中

```
# Don't do this
no += ["        <user id='", row[0], "' name='", row[1], "' blend='", row[2], "'/>\n"]

# Do this instead
no += ["        <user id='%s' name='%s' blend='%s'/>\n" % (row[0], row[1], row[2])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:15:50.773

您必须首先将检索到的数据转换为字符串，以便在它说您必须说的`str()`任何地方： . 例如。`row[INDEX]``str(row[INDEX])``str(row[3])`

# google-chrome - 用chrome打开而不是下载

> ID：11026466
> 
> 赞同：6
> 
> 时间：2012-06-14T03:59:13.967
> 
> 标签：google-chrome, file-io

当我尝试从本地文件系统（file:///home/solomon/Desktop/temp2.​​txt）打开带有 chrome 的 txt 文件时遇到问题，chrome 在我的下载文件夹中保存另一个副本而不是打开它：（

我想用chrome打开和查看任何基于文本的文件，因为它在查找文本时方便突出显示。所以我能问一下如何进行这个设置，使用chrome打开文件而不是下载文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:07:28.583

Try `ctrl+O`, then select that file. it allows you to view the file in the browser.

# html - HTML5 使用按钮和 td 拖放

> ID：11026467
> 
> 赞同：2
> 
> 时间：2012-06-14T03:59:21.967
> 
> 标签：html, drag-and-drop

我正在尝试拖动一个按钮并将其放到 td 上，但它似乎不起作用。拖动很容易。但我似乎无法将 td 设置为接受丢弃。这是[jsFiddle 链接](http://jsfiddle.net/t5LPj/2/)

我查看了[一些](http://www.html5rocks.com/en/tutorials/dnd/basics/) [优秀](https://developer.mozilla.org/En/DragDrop/Drag_Operations) [文章](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_draganddrop)的文档，但仍然无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:23:03.257

在我看来，您的`dragenter`处理程序中的警报调用存在问题。我已经更新了你的[小提琴](http://jsfiddle.net/38pcN/1/)中的调试语句，`console.log`而不是`alert`在最新版本的 Chrome 中导致预期的行为。

`console.log`是输出调试语句比`alert`方法更好的选择，尤其是因为它的侵入性要小得多。如果您担心不支持控制台的浏览器中的错误，那么您可能应该考虑使用[HTML5 样板中包含的 shiv。](http://html5boilerplate.com/)

在跨浏览器支持方面，我的建议是检查您希望支持的所有浏览器是否完全支持拖放。[caniuse.com](http://caniuse.com/dragndrop)是进行此类检查的绝佳资源，尽管您也可以在每个目标浏览器中测试您链接到的演示之一。如果没有，那么您应该接受 DaneSoul 的建议并考虑使用 jQueryUI，它旨在弥补这些令人沮丧的差距和特性，以支持某些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:06:03.913

您可以使用 JQueryUI 轻松实现拖放：

JQueryUI：可[拖动](http://jqueryui.com/demos/draggable/)和[可放置](http://jqueryui.com/demos/droppable/)

# c++ - c ++使用STL从字符串中删除字符

> ID：11026469
> 
> 赞同：5
> 
> 时间：2012-06-14T03:59:44.860
> 
> 标签：c++, stl, stdstring

`'\n'`我脑子里放了一个小屁：我想删除`std::string`. 我更喜欢使用 STL 而不是手动的、多嵌套的 for 循环；唯一的问题是我忘记了如何...

会`for(...) { std::string::remove_if(...); } ;`工作吗？我需要使用`std::for_each(...,..., std::string::remove_if(...));`吗？还是需要其他东西？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T04:04:16.057

第一个想法：删除/擦除习语：

```
str.erase(std::remove(str.begin(), str.end(), '\n'), str.end()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-20T15:39:40.667

如果你有 Boost.Range 它的工作时间会更短：

```
#include <boost\range\algorithm_ext\erase.hpp>

boost::remove_erase(str, '\n'); 
```

# javascript - 新手 html/Javascript 问题。反应迟钝

> ID：11026471
> 
> 赞同：0
> 
> 时间：2012-06-14T03:59:54.040
> 
> 标签：javascript, html

过去我用 javascript 编写过很多代码，所以当我盯着这么简单的东西看几个小时却不知道为什么它不起作用时，这尤其令人沮丧。有人能告诉我为什么这段代码完全没有响应吗？

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
var passCode = 0;

function oneFunc()
{
    passCode = 1;
}
function oneFunc()
{
    passCode = 2;
}
function oneFunc()
{
    passCode = 3;
}
function oneFunc()
{
    passCode = 4;
}

if(passCode == 1)
{
    if(passCode == 2)
    {
        if(passCode == 3)
        {
            if(passCode == 4)
            {
                window.location.href = 'frompassCode.html';
            }
        }
    }
}
</script>
<title> </title>
</head>

<body>

<button onclick="oneFunc()">Button1</button><br/>
<button onclick="twoFunc()">Button2</button><br/>
<button onclick="threeFunc()">Button3</button><br/>
<button onclick="fourFunc()">Button4</button><br/>

</body>
</html> 
```

如果我的逻辑不正确，我可以处理它，但它不会做任何事情。我在函数中设置了一个警报让它移动，但没有。我敢肯定这个问题一定很简单......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:02:56.397

if 语句不应嵌套。如果 passCode 是 1，它不可能是 2，那么如果你已经知道它的 1，为什么还要检查它呢？此外，所有东西都被命名为 onefunc.. 它们需要有唯一的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:26:09.270

除了 oneFunc() 被多次声明并且 if 语句的逻辑永远不会起作用的事实之外，Javascript 被线性解释的事实是问题所在。如果你看一下代码：

```
<script type="text/javascript">
var passCode = 0;

function oneFunc()
{
    passCode = 1;
}
function oneFunc()
{
    passCode = 2;
}
function oneFunc()
{
    passCode = 3;
}
function oneFunc()
{
    passCode = 4;
}

if(passCode == 1)
{
    if(passCode == 2)
    {
        if(passCode == 3)
        {
            if(passCode == 4)
            {
                window.location.href = 'frompassCode.html';
            }
        }
    }
}
</script> 
```

此代码在 HTML 文档加载到浏览器时执行。首先，它将变量 passCode 设置为 0。然后它通过（并且可能有问题）声明所有函数。然后它遍历 if 语句并执行它们，因为它们不在函数中。任何不在函数中的 Javascript 代码都会立即在页面下方线性执行。这意味着您的 if 语句将永远不会再次执行。你可以随意点击按钮，它们显然会改变 passCode 的值，但 if 语句将永远不会再次执行，因为它们是全局代码。您可能必须将 if 语句放在一个新函数中，并始终在 oneFunc() 调用之后调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:02:53.543

您的函数声明都被命名为相同的东西。尝试做这样的事情：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
var passCode = 0;

function oneFuncToRuleThemAll(val)
{
    passCode = val;

  switch (passCode){
     case 1:
        // Do stuff...
        break;
     case 2:
        // Do other stuff...
        break;
     case 3:
        // You get the idea.
        break;
     case 4:
        window.location.href = 'frompassCode.html';
  }
}

</script>
<title> </title>
</head>

<body>

<button onclick="oneFuncToRuleThemAll(1)">Button1</button><br/>
<button onclick="oneFuncToRuleThemAll(2)">Button2</button><br/>
<button onclick="oneFuncToRuleThemAll(3)">Button3</button><br/>
<button onclick="oneFuncToRuleThemAll(4)">Button4</button><br/>

</body>
</html> 
```

# methods - 将任何方法（不仅仅是 Action 或 Func）作为参数传递

> ID：11026474
> 
> 赞同：1
> 
> 时间：2012-06-14T04:00:46.477
> 
> 标签：methods, delegates

在 C# 中，我想知道如何将方法（任何方法）作为参数传递？

我知道 Action 和 Func，但它们受到方法的限制，前者要么是无效的，要么需要在后者中返回一个值。如果可能的话，我想包括对这两种情况的支持（我可能有一个参数数组方法）。

我认为涉及到委托的一些使用，但我不确定如何（使用和不使用 lambdas）。谢谢！

就像是...

```
public void DoSomething(int num)
{...}

public void DoSomethingElse()
{...}

public int ReturnSomething(string str, int num)
{...}

public void RunMethods(params object[] methods) // (params delegate[] methods)?
{
    foreach(var method in methods)
    {
        ...determine whether its void or not and run.
    }
}

RunMethod(DoSomething, ReturnSomething, DoSomethingElse);

... 
```

# javascript - 在chrome中实现firebug的console.table

> ID：11026475
> 
> 赞同：5
> 
> 时间：2012-06-14T04:01:08.190
> 
> 标签：javascript, google-chrome, console, firebug

我正在将各种性能指标记录到控制台（如果存在）。最好将此内容视为表格，FireBug 的`console.table()`方法效果很好——但我的大多数用户都在 Chrome 中。

`console.table()`是一个很好的解决方案，因为我无需构建和维护专用的 UI 控件即可获得格式良好的 UI 样式网格。目前，在 Chrome 中，我只能记录未格式化的文本。

或者，如果有办法在控制台中*呈现*HTML 内容，那也可以。我可以将 html 发送到控制台，但它呈现为元素选项卡中的 DOM 内容。我知道检查器只是 HTML/JS/CSS——所以它在技术上是可行的。事实上，当我检查检查员时，我可以做到这一点——但这并不能解决现实世界的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:41:38.730

现在您可以在 Chrome Canary 中执行此操作[https://plus.google.com/+GoogleChromeDevelopers/posts/j8dMDxqbVv7](https://plus.google.com/+GoogleChromeDevelopers/posts/j8dMDxqbVv7)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T07:42:11.297

我有同样的问题并写了下面的代码。它不像console.table那样功能齐全，它只接受记录数组，而不接受列列表。输出也不是很好，但对我来说已经足够了。一个例子：

```
$ console_table([{who:"World",message:"Hello"}
                ,{who:"My wife",message:"Good Morning!"}])
|who    |message      |
|World  |Hello        |
|My wife|Good Morning!| 
```

以及它背后的代码：

```
// Will be available in the latest Chrome, then I can delete this
function console_table(xs)
{
    if (xs.length === 0)
        console.log("No data");
    else
    {
        var widths = [];
        var cells = [];
        for (var i = 0; i <= xs.length; i++)
            cells.push([]);
        for (var s in xs[0])
        {
            var len = s.length;
            cells[0].push(s);
            for (var i = 0; i < xs.length; i++)
            {
                var ss = "" + xs[i][s];
                len = Math.max(len, ss.length);
                cells[i+1].push(ss);
            }
            widths.push(len);
        }
        var s = "";
        for (var x = 0; x < cells.length; x++)
        {
            for (var y = 0; y < widths.length; y++)
                s += "|" + pad(widths[y], cells[x][y]);
            s += "|\n";
        }
        console.log(s);
    }
}

function pad(n,s)
{
    var res = s;
    for (var i = s.length; i < n; i++)
        res += " ";
    return res;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-18T06:02:42.383

截至今天，它也适用于 Chrome 31 和 Firefox 25。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T19:02:53.373

内部移动垫

```
// Will be available in the latest Chrome, then I can delete this
function console_table(xs)
{

    function pad(n,s)
    {
        var res = s;
        for (var i = s.length; i < n; i++)
            res += " ";
        return res;
    }

    if (xs.length === 0)
        console.log("No data");
    else
    {
        var widths = [];
        var cells = [];
        for (var i = 0; i <= xs.length; i++)
            cells.push([]);
        for (var s in xs[0])
        {
            var len = s.length;
            cells[0].push(s);
            for (var i = 0; i < xs.length; i++)
            {
                var ss = "" + xs[i][s];
                len = Math.max(len, ss.length);
                cells[i+1].push(ss);
            }
            widths.push(len);
        }
        var s = "";
        for (var x = 0; x < cells.length; x++)
        {
            for (var y = 0; y < widths.length; y++)
                s += "|" + pad(widths[y], cells[x][y]);
            s += "|\n";
        }
        console.log(s);
    }
} 
```

# mongodb - 只返回一个属性“_id”

> ID：11026476
> 
> 赞同：27
> 
> 时间：2012-06-14T04:01:09.127
> 
> 标签：mongodb

我想知道是否有办法只返回`_id`,`user_id`而`total`没有`items`子文档。

```
{
    "_id" : 122,
    "user_id" : 123456,
    "total" : 100,
    "items" : [
            {
                    "item_name" : "my_item_one",
                    "price" : 20
            },
            {
                    "item_name" : "my_item_two",
                    "price" : 50
            },
            {
                    "item_name" : "my_item_three",
                    "price" : 30
            }
    ]
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-14T04:11:48.717

The second parameter of [find lets you select fields](http://www.mongodb.org/display/DOCS/Querying#Querying-FieldSelection). So you can use this (note that the _id field is always selected anyway):

```
db.mycollection.find({}, {"user_id": 1, "total": 1}); 
```

You can also exclude certain fields, so this would be equivalent:

```
db.mycollection.find({}, {"items": 0}); 
```

You can exclude _id field by doing:

```
db.mycollection.find({}, {"user_id": 1, "_id": 0}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-10-16T18:43:36.383

我正在寻找的是返回一个 id 列表，所以只返回 _id 但作为所有文档的数组。我是这样做的：

```
db. mycollection.distinct("_id", {}) 
```

第一个参数是您的 distict 字段，第二个是您的查询。更多关于不同的[here](https://docs.mongodb.com/manual/reference/method/db.collection.distinct/)。希望这可以帮助有类似要求的人。干杯!

# android - 从android中的整个字符串中检索特定单词？

> ID：11026486
> 
> 赞同：0
> 
> 时间：2012-06-14T04:02:09.210
> 
> 标签：android, regex

我有一些 html 格式的数据。我在将数据设置为 android 中的 textview 时使用 Html.fromHtml(String)。html 数据还包含 2 到 3 张图像。我想从 html 数据中获取图像的名称并将它们存储在一个数组中。根据数组中图像的数量，我将它们设置为图像视图。如何从图像标签中的 src 获取图像名称？

*哪一个是更好的选择。即使用正则表达式或子字符串？*

请提出一些解决方案并帮助我举一些例子。

我的代码：

```
public View getView(int position, View convertView, ViewGroup parent) 
{ 
---
---
   desc = (TextView) view.findViewById(R.id.description);
   URLImageParser p = new URLImageParser(desc, this);
   Spanned htmlSpan = Html.fromHtml(listItem.getdesc(), p, null);
   desc.setText(htmlSpan);
----
----
----
----
}

public class URLDrawable extends BitmapDrawable {
        // the drawable that you need to set, you could set the initial drawing
        // with the loading image if you need to
        protected Drawable drawable;

        @Override
        public void draw(Canvas canvas) {
            // override the draw to facilitate refresh function later
            if(drawable != null) {
                drawable.draw(canvas);
            }
        }
    }

    public class URLImageParser implements ImageGetter {
        ListAdapter c;
        View container;

        /***
         * Construct the URLImageParser which will execute AsyncTask and refresh the container
         * @param t
         * @param listAdapter
         */
        public URLImageParser(View t, ListAdapter listAdapter) {
            this.c = listAdapter;
            this.container = t;
        }

        public Drawable getDrawable(String source) {
            URLDrawable urlDrawable = new URLDrawable();

            // get the actual source
            ImageGetterAsyncTask asyncTask = 
                new ImageGetterAsyncTask( urlDrawable);

            asyncTask.execute(source);

            // return reference to URLDrawable where I will change with actual image from
            // the src tag
            return urlDrawable;
        }

        public class ImageGetterAsyncTask extends AsyncTask<String, Void, Drawable>  {
            URLDrawable urlDrawable;

            public ImageGetterAsyncTask(URLDrawable d) {
                this.urlDrawable = d;
            }

            @Override
            protected Drawable doInBackground(String... params) {
                String source = params[0];
                return fetchDrawable(source);
            }

            @Override
            protected void onPostExecute(Drawable result) {
                // set the correct bound according to the result from HTTP call
                urlDrawable.setBounds(0, 0, 0 + result.getIntrinsicWidth(), 0 
                        + result.getIntrinsicHeight()); 

                // change the reference of the current drawable to the result
                // from the HTTP call
                urlDrawable.drawable = result;

                // redraw the image by invalidating the container
                URLImageParser.this.container.invalidate();
            }

            /***
             * Get the Drawable from URL
             * @param urlString
             * @return
             */
            public Drawable fetchDrawable(String urlString) {
                try {
                    InputStream is = fetch(urlString);
                    Drawable drawable = Drawable.createFromStream(is, "src");
                    drawable.setBounds(0, 0, 0 + drawable.getIntrinsicWidth(), 0 
                            + drawable.getIntrinsicHeight()); 
                    return drawable;
                } catch (Exception e) {
                    return null;
                } 
            }

            private InputStream fetch(String urlString) throws MalformedURLException, IOException {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet request = new HttpGet(urlString);
                HttpResponse response = httpClient.execute(request);
                return response.getEntity().getContent();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:10:39.963

`Html.ImageGetter()`会更有帮助，它会找到标签`<img>` [http://developer.android.com/reference/android/text/Html.ImageGetter.html](http://developer.android.com/reference/android/text/Html.ImageGetter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:13:11.740

> 我想获取图像的名称

如果您使用的是 jsoup html 解析器，那么生活会容易得多。

我不知道图像名称在 HTML 数据中是如何出现的。

但是假设您的 html 有如下图像

```
<img src='image_url/abc.png'>

File input = new File("/tmp/input.html");
Document doc = Jsoup.parse(input, "UTF-8", "http://example.com/");

Elements pngs = doc.select("img[src$=.png]").first();

String imageurl= pngs.attr("src"); which will return 
```

> image_url/abc.png

我在[这里发布了示例片段](https://stackoverflow.com/questions/11026937/parsing-particular-data-from-website-in-android/11026988#11026988)

# java - 在 Windows 8 中为 Java 应用程序提供 Metro 外观

> ID：11026487
> 
> 赞同：19
> 
> 时间：2012-06-14T04:02:10.927
> 
> 标签：java, swing, windows-8, windows-runtime, look-and-feel

我已经开发了一个在 Windows XP、Windows 7 和 Windows 8 消费者预览版中运行良好的 Java 应用程序。该应用程序使用 GWT、CSS3 和 Spring 框架开发，内置 Jetty 服务器，用于使用 Internet Explorer 启动应用程序。

在探索了地铁应用程序的原则之后，我想给我的应用程序用户一个额外的好处，那就是使用[地铁应用程序](http://msdn.microsoft.com/en-us/windows/apps/hh852650)

我读到了[DWR](http://directwebremoting.org/dwr/index.html)，[gwt-explorer](http://code.google.com/p/gwt-exporter/)。但我仍然不确定。有没有其他最小代码更改的解决方法？

谢谢安德鲁·汤普森先生对我的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T11:30:11.443

您可以在 Java 应用程序中模仿 Metro 风格。这是使用 JavaFX UI 框架的一项工作：

[http://pixelduke.wordpress.com/category/metro/](http://pixelduke.wordpress.com/category/metro/)

您只能在 Windows 8 的桌面环境中使用此类应用程序，而不能在 Metro 环境中使用。但这仍然有用，具体取决于具体情况。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-14T04:29:37.943

> Metro 风格的外观和感觉是否会出现在 Java 中？

我认为这更多地与 Pluggable Look & Feel 有关。好吧，不要等待，创造！看：

*   [如何编写自定义外观](http://today.java.net/pub/a/today/2006/09/12/how-to-write-custom-look-and-feel.html)
*   [创建自定义外观](http://java.sun.com/products/jfc/tsc/articles/sce/index.html)
*   [合成器的外观和感觉](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/synth.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-23T03:13:30.857

你们都需要重新阅读这篇文章或完全了解技术，然后再跳过这个家伙。他说他是在 GWT 中开发的，它是 Java 编译成 HTML/Javascript，在 Metro**中可以工作。**

我知道这是一个旧线程，但是当人们这样做时我无法忍受，这只会让其他阅读此问题的人更加困惑。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-14T04:19:39.553

所以我再次阅读了这个问题，并意识到你问的是如何让 Web 应用程序获得“Metro”外观和感觉，而不是经典的 Java 应用程序。

试试这个[http://metroui.org.ua/](http://metroui.org.ua/) 包提供了一组 CSS 和 Javascript 文件来帮助你的网站有 Metro 的外观和感觉。

高温高压

* * *

**::旧答案::**

Java 不是 JavaScript，就像 CAR 不是 CARpet 一样。

最好的办法是使用 .NET 语言（C# 或 VB）制作需要与操作系统交互的 UI 和部件，并尝试将现有的 Java 代码转换为 JSharp。

不过，我无法确认是否支持在 Metro Style 应用程序中使用 JSharp。

其他选择是，如果您有基于 Web 的应用程序替代方案，那么尝试转换可能比转换为 HTML/JavaScript Metro 应用程序更好。

简而言之，Java 和 Metro 无法相处，而且他们可能永远也不会相处。

# java - Java中类的静态上下文中的静态嵌套类

> ID：11026503
> 
> 赞同：1
> 
> 时间：2012-06-14T04:04:09.717
> 
> 标签：java

我正在学习静态嵌套类，我遇到了以下问题：

静态嵌套类在另一个类中使用 static 关键字或在该类的静态上下文中声明。

我无法理解的是当它说“或在该类的静态上下文中”时是什么意思。

如果可能的话，有人可以给我几个例子。我不明白“静态上下文”是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:09:21.923

I think it means a class inside a static initializer:

```
public class OuterClass
{
    static
    {
        class InnerClass
        {

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:08:42.750

when they say static context means anything declared static, it can be nested inside a nested static class, enum or interface (enums and interfaces are static by default and can only be declared inside a top level context).

Also, you can declare inner classes within static methods , static declarations or static blocks, this referring to local classes or anonymous classes.

Regards

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:31:25.010

声明为静态的嵌套类称为静态嵌套类。任何静态嵌套类的对象的内存都是独立于任何特定的外部类对象分配的。静态嵌套类仅通过对象引用使用在其封闭类中定义的实例变量或方法。静态嵌套类与其外部类或任何其他类的实例成员交互，就像顶级类一样。

下面给出的是静态嵌套类的语法，它定义了在外部类中具有关键字 static 的静态嵌套类。

```
 class OuterClass {
           ....
         static class StaticNestedClass {
           ....
        }
         class InnerClass {
          .... }
       } 
```

可以使用封闭类名访问静态嵌套类：OuterClass.StaticNestedClass

如果我们想创建一个静态嵌套类的对象，那么我们必须写下以下代码：

```
 OuterClass.StaticNestedClass nestedObject = new OuterClass.StaticNestedClass(); 
```

这是一个静态嵌套类的例子，它处理访问内部类内部的外部类的实例。该示例创建了一个实例 x 值为 100 的“外部”类，然后我们在内部类方法检查中调用此值。除此之外，该示例还创建了另一个函数 check 并在其中调用内部类 check() 方法。当示例使用 Outer 类调用 check() 时，它显示了 Outer 类实例 x 的值。

这是示例的代码：

外部.java

```
 import java.lang.*;

    public class Outer{

     int x = 100;

    class Inner{

     int x = 200;

    public void check(){

    System.out.println("Value of x is: "+ Outer.this.x );

     }

     }

    public void check(){

         new Inner().check();

    }

     public static void main(String args[]){

       new Outer().check();

    }

     } 
```

转到链接[http://littletutorials.com/2008/03/06/static-nested-classes/](http://littletutorials.com/2008/03/06/static-nested-classes/)

# python - 使用 SQL/Python 构建概率分布

> ID：11026509
> 
> 赞同：1
> 
> 时间：2012-06-14T04:05:31.510
> 
> 标签：python, mysql, sql

假设以下作业表：

```
`jobpost`
 - name
 - position
 - is_featured (boolean) 
```

我想为给定用户建立一个建议工作列表，其中`jobpost.position`与用户的职位相匹配（例如，会计师将获得会计工作）。

完成此操作的基本查询类似于：

```
SELECT name FROM jobpost WHERE jobpost.position IN (list of user positions) LIMIT 10 
```

我还想确保以 ( `is_featured=True`) 为特色的工作获得额外的权重。然后我需要建立一个概率分布列表，从中选择随机数量的工作。为此，我正在考虑构建一个包含作业名称和概率的 python 元组列表，然后使用`random.random()`. 例如，类似（伪代码）：

```
x = [('job 1', 0.2), ('job 2', 0.2), ('job 3', 0.2),  ('job 4', 0.4)]
# pick three out of the list of jobs above
random.random.sample(x,  3) 
```

我有三个与此相关的问题：

1.  这看起来是正确的方法吗？

2.  我将如何使用该`random`模块（或另一个模块）来选择 n 个对象，每个对象具有一定的给定概率？

3.  在给特色工作相对于非特色工作赋予加权平均值方面，以下查询是正确的方法吗？如果没有，有什么更好的方法？

    `SELECT name, 1 * (CASE WHEN is_featured=True THEN % ELSE 1) as weighted_average FROM ...`

这会给我一个包含工作名称和相对权重的元组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:19:32.810

我建议使用[SQLAlchemy](http://www.sqlalchemy.org/)并使用 Python 的语法，而不是 SQL。但要解决您的问题，我会尝试以下方法：

```
import random

x = [('job 1', 0.2), ('job 2', 0.2), ('job 3', 0.2), ('job 4', 0.2), ('job 5', 0.4)]

def random_choice(jobs_list, number=1):
  jobs = jobs_list[:]
  choice = random.uniform(0, 1)
  total = 0

  while total < number:
    index, job_item = random.choice(list(enumerate(jobs)))
    job, weight = job_item

    if weight > random.uniform(0, 1):
      yield job
      jobs.pop(index)
      total += 1

print list(random_choice(x, 3)) 
```

顺便说一句，为了让您的“权重”遵循离散的 PDF，它们需要精确地加起来`1.0`.

老实说，我不认为这种“加权”是解决问题的正确方法。您没有合适的 PDF 来为给定作业创建离散的“权重”。相反，为什么不只为工作设置单独的类别呢？

# jquery - jQuery ui 滑块调整 div 中所有元素的大小

> ID：11026510
> 
> 赞同：1
> 
> 时间：2012-06-14T04:05:56.853
> 
> 标签：jquery, resize, uislider

真的为此苦苦挣扎？？我对 Jquery 很陌生，并试图通过它偶然发现......

这是我到目前为止所拥有的[http://jsfiddle.net/VUY4p/](http://jsfiddle.net/VUY4p/)

我不知道如何让它工作，我需要所有的 div 与瓶子图像一起缩放并居中，所以当主滑块一直向右时，视图只是带有标签区域的大约 300px 宽的文本，然后当向左移动滑块时，整个瓶子都是可见的，其他一切都随之缩小，包括与特写视图相同比例的文本。

我希望这是有道理的，我希望有人可以看看，看看有什么问题？

当瓶子图像增加时字体发生变化时，文本也会发生一些奇怪的事情？它跳到左边？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:20:15.843

为您修复了放大问题，但我不太明白您希望文本做什么。你想让它适合瓶子标签吗？

[http://jsfiddle.net/NtMhF/1/](http://jsfiddle.net/NtMhF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:46:48.940

这可能会或可能不会帮助您，但我认为重做图像区域可能会更好。也许其中一些会对你有所帮助。我认为在答案中发布的代码太多了。

演示：http: [//jsfiddle.net/lucuma/ggC8s/6/](http://jsfiddle.net/lucuma/ggC8s/6/)

# python - Converting large matrices to Sparse matrix in python

> ID：11026515
> 
> 赞同：2
> 
> 时间：2012-06-14T04:06:58.920
> 
> 标签：python, numpy, scipy

I need to do the following

```
b = numpy.random.randn(50001,2)

cof = numpy.corrcoef(b)

c= b>=0.3 

return np.dot(c, np.ones([50001,1])) 
```

It is throwing me a segmentation fault.

Also if I try to use a sparse matrix, for instance:

```
asp = scipy.sparse.csc_matrix(c) 
```

I get a Segmentation fault

The conversion works if the matrix size is small.

Any advice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:00:54.390

您是否尝试计算 50001 维空间的两个样本或 2D 空间的 50001 个样本之间的相关性？

在您当前的情况下，您正在创建一个隐式 50001 x 50001 协方差矩阵（这会导致段错误）。执行以下操作不会炸毁内存

```
b = numpy.random.randn(2,50001)
cof = numpy.corrcoef(b) 
```

希望这是您所需要的（另一种方式会产生对协方差矩阵和段错误的非常差的近似值）。

# java - 从 ArrayList 中获取特定的类

> ID：11026518
> 
> 赞同：1
> 
> 时间：2012-06-14T04:07:20.120
> 
> 标签：java, arraylist

我正在做一个项目，我需要向 ArrayList 添加大量对象，然后稍后在其中调用特定函数。我有这部分，但在我的程序中，我需要从 ArrayList 访问特定实例，只需要我正在寻找的类的参数。例如：

```
public class Manager {
    public static ArrayList<O> loadedHacks = new ArrayList<O>();
    public void initOs(){
        loadedHacks.add(new O());
    }
}

public class O {
    public boolean enabled = false;
    public void onEnable(){}
}

public class A extends O{
} 
```

然后稍后我想做这样的事情：

```
if(Helper.get(A.class).enabled){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:14:14.580

从您的问题中并不清楚您要解决的实际问题是什么，但是如果我理解正确，您要做的是说：“对象 X 可能是 A 类的某个子类。如果它是 B 的子类，那么我想调用 B.method()，它没有在 A 上定义”。

在这种情况下，您可以执行以下操作：

```
if (object instanceof SpecificSubclass) {
  SpecificSubclass specificObject = (SpecificSubclass) object;
  specificObject.specificMethod();
} 
```

**编辑：**从您的评论来看，您正在寻找的功能似乎略有不同。如果您有一个类作为参数，那么要查看特定对象是否实际上是该类的实例，请使用 Class.isAssignableFrom() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:19:50.690

如果我理解正确，您将不得不遍历 ArrayList 并将您作为 Class 对象的参数与数组中 getClass() 的返回类型进行比较，以获取对象并返回它。由于 getClass() 方法返回的是对象的 Class 类型，而不是引用。

# gcc - 需要 gcc44-c++ 支持

> ID：11026525
> 
> 赞同：3
> 
> 时间：2012-06-14T04:08:24.980
> 
> 标签：gcc, llvm-gcc

[我最近下载了http://clang.llvm.org/get_started.html](http://clang.llvm.org/get_started.html)链接中提到的代码 。我的 GCC 版本是 4.1.2。在控制台中开始出现以下错误之前，编译运行良好至少一个小时。

LLVM 支持声明我需要使用 gcc44-c++，这在我们的盒子中不可用：

```
Red Hat Enterprise Linux Server release 5.5 (Tikanga)
# yum install gcc44-c++
Loaded plugins: security
ppsd-nonprod-base                                                              
                      | 2.1 kB     00:00
ppsd-nonprod-extras                                                            
                      | 2.1 kB     00:00
ppsd-nonprod-extras/primary_db                                                 
                      | 173 kB     00:00
ppsd-prod-base                                                                 
                      | 2.1 kB     00:00
ppsd-prod-extras                                                               
                      | 2.1 kB     00:00
ppsd-prod-updates                                                              
                      | 1.9 kB     00:00
Setting up Install Process
No package gcc44-c++ available.
Nothing to do 
```

请让我知道 gcc44-c++ 是否真的意味着 GCC 4.4 C++ 编译器或者它是一个不同的编译器。如果不同，请告诉我如何为 Red Hat 5.4 OS 下载和安装相同的版本？

```
 MKDIR:    
prakash_prasad/install_packages/LLVM/build/tools/clang/runtime/compiler-rt/clang_linux/asan-x86_64/x86_64/SubDir.lib__asan
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_allocator.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_globals.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_interceptors.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_linux.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_mac.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_malloc_linux.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_malloc_mac.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_malloc_win.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_new_delete.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_poisoning.cc
  COMPILE:   clang_linux/asan-x86_64/x86_64:
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_posix.cc
In file included from
prakash_prasad/install_packages/LLVM/llvm/projects/compiler-rt/lib/asan/asan_posix.cc:38:
In file included from
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/algorithm:64:
In file included from
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_algobase.h:69:
In file included from
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/iosfwd:45:
In file included from
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/c++io.h:38:
In file included from
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr.h:132:
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:100:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_once)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:101:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_getspecific)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:102:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_setspecific)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:103:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_create)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:104:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_cancel)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:105:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_mutex_lock)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:106:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_mutex_trylock)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:107:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_mutex_unlock)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:108:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_mutex_init)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:109:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_cond_broadcast)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:110:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_cond_wait)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:113:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_key_create)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:114:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_key_delete)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:115:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_mutexattr_init)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:116:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_mutexattr_settype)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \
                                             ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:117:1:
error: weakref declaration must have
      internal linkage
__gthrw(pthread_mutexattr_destroy)
^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:81:23:
note: expanded from macro '__gthrw'
#define __gthrw(name) __gthrw2(__gthrw_ ## name,name,name)
                      ^
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/x86_64-redhat-linux/bits/gthr-default.h:72:46:
note: expanded from macro '__gthrw2'
  extern __typeof(type) name __attribute__ ((__weakref__(#name2))); \ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:12:40.603

> 请让我知道 gcc44-c++ 是否真的意味着 GCC 4.4 C++ 编译器或者它是一个不同的编译器。

这意味着您需要 GCC 4.4（或更高版本）。我建议您升级到最新的 4.7。

> 如果不同，请告诉我如何为 Red Hat 5.4 OS 下载和安装相同的版本？

您将需要升级您的编译器。快速搜索会发现有相当多的 RPM 可用。选择一个适合您的系统。

# exception - Servlet throwing exception

> ID：11026531
> 
> 赞同：0
> 
> 时间：2012-06-14T04:09:34.037
> 
> 标签：exception

My servlet is throwing following exception, even though the required jar is placed in webcontent/lib. Any solution for this?

java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@localhost:1521:orcl

# ruby-on-rails - Prevent an action in a controller within a rails engine from executing

> ID：11026534
> 
> 赞同：1
> 
> 时间：2012-06-14T04:10:11.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-engines

To prevent an action from executing in some controller in a rails app unless authenticated you could use

```
before_filter :validate_user, :only => [:create, :update] 
```

This would prevent create and update from being executed unless an authorized user was attempting it. If the actions create and update are in a controller within a rails engine this does not work.

How do you conditionally block the execution of an action on a controller that is within a rails engine?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:14:33.143

如果有`validate_user`问题的方法返回`false`，过滤器链将停止并且不会执行操作。

典型的模式如下所示：

```
def validate_user
  unless (...valid_conditions...)
     flash[:error] = "You're not logged in."
     redirect_to(login_path)
     return false
   end
end 
```

在停止过滤器链之前，您可以做任何您想做的事情，但理想情况下，您可以先做`redirect`一些`render`事情。

# java - Getting "java.io.EOFException" when reading data from the socket over a loop

> ID：11026535
> 
> 赞同：1
> 
> 时间：2012-06-14T04:10:24.500
> 
> 标签：java, android, networking

I am making a chess game application for a practice and finished up all the functionalities.

Now I am trying to implement the networking part so to enable 2 players mode...

In my server code I am using a loop to continuously get the data from both player turn by turn.

At the first turn of each player, the server works just fine and I confirmed the data is transferred correctly to the other player. But when it goes back to `int[] data1 = (int[]) in1.readUnshared();` this very first line of the loop,

```
java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source) 
```

the error occurs...

```
while(true){

    int[] data1 = (int[]) in1.readUnshared(); // THIS PART!!

    if(data1.length != 96)
        break;

    out2.writeUnshared(data1);
    out2.flush();

    int[] data2 = (int[]) in2.readUnshared();
    if(data1.length != 96)
        break;

    out1.writeUnshared(data2);
    out1.flush();
} 
```

Here, "in" and "out" variables are class variables I declared

```
static ObjectInputStream in1;
static ObjectInputStream in2;
static ObjectOutputStream out1;
static ObjectOutputStream out2; 
```

and I initilized them on the main function like this :

```
in1 = new ObjectInputStream(player1.getInputStream()); 
```

Is there any problem with the way I initialized streams...? been stuck for this problem for quite long... and desperate to see my application working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:34:58.140

`EOFException`当您在没有更多缓冲数据要读取并且已被另一端关闭的套接字上调用`readObject()`,等时抛出，就像返回 null 或返回 -`。这是一个“正常的例外”。只需关闭套接字并忘记连接。`readInt()``readLine()``read()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:19:09.733

我认为这是一个错误，它可能与您刷新缓冲区但在调用 readUnshared() 之前不写入或检查它是否为空有关。

EOFException 只是说你到达了流或文件的末尾（End Of File）。

仅使用您发布的代码我无法真正调试它。但请确保在调用 Stream 之前将移动写入保留或检查“未共享”移动的任何位置。

# javascript - JQGrid：排序和自定义格式化程序

> ID：11026537
> 
> 赞同：1
> 
> 时间：2012-06-14T04:10:26.493
> 
> 标签：javascript, jqgrid, jqgrid-formatter

所以我有一个jqgrid，我使用自定义格式化程序来格式化列，无论如何，当我单击列头进行排序时，它会按预期对列进行排序，但它会删除我所做的格式，而是放置“[object Object]”进入格式化程序应该完成工作的列。

特定的格式化程序是：

```
function(cellVal, options, rowObject){
    var optsURI = '../webrelease/common/images/page_v2_u'+(rowObject.opt2Up==2?1:0)+'_s'+(rowObject.optDuplex?1:0)+'_c'+(rowObject.optColor?1:0)+'_52.png';
    return $('<img class="finishing_icon" height="40" src="'+optsURI+'" />').attr('jobid', rowObject.jobid).click(finishingOptsCycle);
} 
```

这似乎适用于删除和添加行，但是一旦我点击度假村，列就会从图像变为字符串 [object Object]

关于如何解决这个问题的任何想法？

为了完整起见，这里是我的整个 jqgrid（不包括行和格式化程序）：

```
grid.jqGrid({
    datatype: "local",
    editurl: "clientArray",
    width: 680,
    height: 290,
    colNames: [...],
    colModel: [...],
    hidegrid: false,
    shrinkToFit:false,
    multiselect: true,
    scroll:1,
    loadui: "block",
    loadtext: "Loading job list...",
    caption: 'Job List <img class="refreshbutton" width="20" height="20" src="../webrelease/desktop/images/icon_circle_arrow_right.png" />',
    pager: '#jqgrid_pager',
    onSelectRow: rowSelect,
    onSelectAll: allRowsSelect
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:10:39.620

问题的原因是[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)的错误使用。实现自定义格式化程序的函数必须返回**string**。

`id`如果不是真的需要，我不建议您将属性分配给网格元素。我不明白为什么你可能需要有`<img>`身份证。

如果您需要在单击单元格时实现一些自定义操作，`<img>`您可以更好地使用`onCellSelect`回调。

如果您还`unformat`为使用[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)的同一列实现了网络，我建议您这样做。

# java - Accessing a Servlet Initialization Parameter from REST resource

> ID：11026538
> 
> 赞同：0
> 
> 时间：2012-06-14T04:10:34.677
> 
> 标签：java, rest, servlets

I have a JAX-RS REST web app that is used to store and retrieve files for a desktop client. I will be deploying this in two different environments on two different servers, so I would like the path where the files will be stored to be configured outside of the code.

I know how to read initialization parameters (in web.xml) from a Servlet. Can I do something similar for a REST resource class? If I could read from some other file inside the WEB-INF directory, that should work fine too.

Here is the code I'm working with:

```
import javax.ws.rs.*;
import java.io.*;

@Path("/upload")
public class UploadSchedule {

    static String path = "/home/proctor/data/schoolData/";
    //I would like to store the path value in web.xml
    @PUT
    @Path("/pxml/{id}/")
    @Consumes("text/xml")   @Produces("text/plain")
    public String receiveSchedule(@PathParam("id") final Integer schoolID, String content) {
        if (saveFile(schoolID, "schedule.pxml", content))
            return schoolID + " saved assignment schedule."
        else
            return "Error writing schedule. ("+content.length()+" Bytes)";
    }

    /**
     * Receives and stores the CSV file faculty list. The location on the server
     * is not directly associated with the request URI. 
     * @param schoolID
     * @param content
     * @return a String confirmation message.
     */
    @POST
    @Path("/faculty/{id}/")
    @Consumes("text/plain")     @Produces("text/plain")
    public String receiveFaculty(@PathParam("id") final Integer schoolID, String content) {
        if (saveFile(schoolID, "faculty.csv", content))
            return schoolID + " saved faculty.";
        else
            return "Error writing faculty file.(" +content.length()+ " Bytes)";

    }
    //more methods like these

    /**
     * Saves content sent from the user to the specified filename. 
     * The directory is determined by the static field in this class and 
     * by the school id.
     * @param id SchoolID
     * @param filename  location to save content
     */
    private boolean saveFile(int id, String filename, String content) {
        File saveDirectory = (new File(path + id));
        if (!saveDirectory.exists()) {
            //create the directory since it isn't there yet.
            if (!saveDirectory.mkdir()) 
                return false;
        }
        File saveFile = new File(saveDirectory, filename);
        try(FileWriter writer = new FileWriter(saveFile)) {
            writer.write(content);
            return true;
        } catch (IOException ioe) {
            return false;
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:46:25.173

虽然从 web.xml 获取 init 参数似乎是一项常见任务，但我花了相当长的时间才弄清楚这一点并找到一个可行的解决方案。为了让其他人免于沮丧，让我发布我的解决方案。我正在使用 Jersey 实现，即 `com.sun.jersey.spi.container.servlet.ServletContainer` 也许其他 REST 实现可以访问 web.xml 初始化参数，`ServletContext`但尽管有文档让我相信这会起作用，但它没有。

我需要改用以下内容：`@Context ResourceConfig context;` 这被列为我的 Resource 类中的字段之一。然后在我的一种资源方法中，我能够使用以下内容访问 web.xml 初始化参数：

```
String uploadDirectory = (String) context.getProperty("dataStoragePath"); 
```

该属性指的是 web.xml 文件：

```
 <init-param>
      <param-name>dataStoragePath</param-name>
      <param-value>C:/ztestServer</param-value>
  </init-param> 
```

令人惊讶的是，当我使用时，`@Context ServletContext context;`我发现上下文对象确实引用了一个 ApplicationContextFacade。我看不出有办法通过那个门面并访问我关心的信息。我打印出参数图，它向我展示了这个对象唯一知道的参数：

```
 java.util.Enumeration<String> params = context.getInitParameterNames();
    while(params.hasMoreElements())
        System.out.println(params.nextElement()); 
```

输出：

```
 com.sun.faces.forceLoadConfiguration
 com.sun.faces.validateXml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:53:05.727

首先，您必须使用 servlet 上下文

```
@Context 
ServletContext context; 
```

然后在你的休息资源中

```
context.getInitParameter("praram-name") 
```

# c++ - 构建 Mac 和 Windows GUI 应用程序

> ID：11026541
> 
> 赞同：15
> 
> 时间：2012-06-14T04:10:52.517
> 
> 标签：c++, python, cross-platform, wxpython, py2app

我计划为 Mac 和 Windows 构建一个 GUI 应用程序。我一直在对技术选择进行一些研究，例如语言、库和构建工具，以便我可以在两个平台之间共享尽可能多的代码。

**主要要求是：**

1.  符合 Mac App Store 要求。
2.  Mac 和 Windows 上的原生外观。
3.  需要在 Mac 上调用 Quartz Window Services，在 Windows 上调用 Windows API。
4.  使用 SQLite 存储和读取数据。

我的帖子的长度已经失控，所以我把我的问题作为摘要移到了顶部，而上下文在下面。

## 问题

1.  我倾向于使用 Python 来简化编程。这对我来说是正确的选择吗？如果不是，为什么 C++ 会更好？如果是这样，我该如何设置 py2app 和 pyobjc 来编译 python 并构建一个独立的应用程序来为 GUI 加载 XIBs？
2.  为了更本机的界面，我不应该在 Mac 上使用跨平台 GUI 库，这对吗？还是使用 QT 或 wxWidgets 会更好？
3.  如果我走错了路和/或有我没有考虑过的更好的解决方案，请指出:)

## 到目前为止我的研究和结论

### 图形用户界面库

对于 Mac，我排除了使用跨平台 GUI 库（如 QT），因为它们似乎无法在 Mac 上提供原生外观和感觉（看起来不合适和/或难以编写遵循 Apple 的应用程序）人机界面指南）。wxWidgets 说它使用原生库，但这篇[文章](https://stackoverflow.com/a/4999048/1448071)提到 wxPython 可能使用私有的 Objective-C 调用，并且不太可能被 Mac App Store 批准。最后，即使外观正确，两个平台的布局可能仍然需要有所不同。

因此，我计划为 Mac 界面使用本机 Cocoa GUI 库，但仍在考虑将 wxWidgets 用于 Windows GUI。

### 语言

对于主要应用程序逻辑的语言，我的最佳选择似乎是 C++ 或 Python。显然，用 Python 编写跨平台代码比 C++ 容易得多，但总要权衡取舍。

**Python**

*优点：*编写速度更快，维护更容易。强大的跨平台库，可以大大缩短开发时间。

*缺点：*使用 Python 意味着使用 PyObjC，它已经有一年多没有更新了（从 svn 可以看出），我不清楚它是否仍然适用于未来版本的 Xcode 和 OSX。此外，在 Xcode 之外使用 PyObjc 和 py2app 设置任何健全的构建配置并使用 xibs 进行 GUI 是一场噩梦。

**C++**

*优点：*更容易在 Mac 和 Windows 上设置构建配置和依赖项。运行速度比 Python 快得多，尽管在我的情况下性能并不是一个大问题。

*缺点：*我不懂 C++。我很擅长 C，但看起来这对我编写好的 C++ 没有多大帮助。我的总体印象是编写跨平台 C++ 要困难得多，但我可能错了。有很多关于模糊错误的帖子。不过，Boost 看起来很有希望。

### 构建工具

如果使用 C++ 作为主要语言，在这两个平台上进行设置似乎都很简单。如果我使用 Python，在 Windows 上设置似乎也很简单，因为我会使用 wxWidgets 作为 GUI 和 py2exe 进行部署。

至于 Mac 和 Python，标准的选择似乎是 pyobjc 和 py2app。不幸的是，我没有找到任何使用 py2app 构建配置的示例，它使用 XIB 和 Cocoa 库而不是 QT 或 wxWidgets。我不希望 Xcode 管理构建，因为我希望将 Python 文件和应用程序资源放在 Xcode 项目目录之外。这将大大简化 Windows 的设置并使文件树更清晰。

**关于 QT 的编辑：**我又看了一眼 QT，花了几个小时和 QT 设计师一起玩。基本的 UI 元素（按钮、文本字段、标签）看起来与 Cocoa 元素相同。我用一些元素轻松地将 QWindow 和 QTabView 组合在一起，它看起来像一个 Cocoa 应用程序。但是，有一些负面影响：

*   行为有点偏离，比如缺乏弹性滚动，QTextEdit 没有表示焦点的蓝色阴影。
*   QTableView 看起来不太像它的 Cocoa 对应物。
*   元素之间的间距，与父视图的间距，不遵循准则。它主要可以通过调整布局来修复，但需要在任何地方完成，我会通过 Xcode 免费获得它。
*   缺少用于制作检查器的 HUD 元素。这是我很可能在我的应用程序中需要的东西，至少在 Mac 端是这样。
*   可访问性支持差。

我知道我很挑剔，但需要挑剔才能做出好的 UI。总体而言，QT 似乎是 Windows 的一个很好的解决方案，但我认为我会坚持使用 Cocoa for Mac。我对现有程序做了一些额外的研究，发现[VLC](http://wiki.videolan.org/Interfaces)、[Chrome](https://stackoverflow.com/questions/874609/which-gui-library-does-google-chrome-use)和[Transmission](http://www.transmissionbt.com/)都为 Mac 制作原生 GUI，而 VLC 使用 QT 用于 Windows，Chrome 使用自定义框架，Transmission 使用 GTK+ 和 QT 用于 Linux。

我想我已经决定使用 Cocoa GUI for Mac 和 Qt 或 wxWidgets for Windows，但仍然在 C++ 和 Python 之间进行共享逻辑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T04:44:27.157

我认为您可能过快地排除了 Qt。这个[人](https://stackoverflow.com/a/5430867/245265)报告说他在 Mac App Store 上发布了一个基于 Qt 的应用程序。

根据这个相关的[答案](https://stackoverflow.com/a/10767009/245265)，您可以指定 Qt 构建目标以使用 Cocoa 而不是已弃用的 Carbon API。

这个 Qt[错误](https://bugreports.qt-project.org/browse/QTBUG-16549)在 4.8 版中已解决，其中某些 plist 文件将被写入 Apple 未批准的位置。

这篇[Qt 文章](https://web.archive.org/web/20120609170628/http://doc.qt.nokia.com/qq/qq18-macfeatures.html)讨论了为支持 Mac 的原生外观而引入的特殊功能。

* * *

关于 C++，如果您使用 Qt 或 Boost 等库来抽象出与平台相关的位（例如 Boost.Asio、Boost.Filesystem 和 Boost.Thread，Qt 也有类似的），通常不会出现跨平台问题网络、文件和线程的抽象）。

C++ 绝对是一种“专家友好”的语言。如果可以为 Qt 使用 Python 和 PySide 绑定，同时仍然能够发布到 App Store，那么我猜这可能是你最好的选择。

如果您最终使用 C++，那么我强烈建议您学习使用所有可用的工具，这将最大限度地减少手动内存管理和原始指针。了解容器类、字符串类和智能（引用计数）指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-12T00:21:21.810

我最终选择了 Python 来实现共享逻辑。

在 Mac 上，我使用 py2objc 作为桥梁，使用 py2app 和一些自定义配置进行打包。在 Windows 上，我直接使用了 Python 和 wxWidgets。

这让我在两个平台上都拥有原生 UI，并且对于较低级别的代码效果很好。

但是，在继续进行更令人兴奋的冒险之前，我实际上并没有在应用程序上走得太远。如果任何读者希望将此问题/答案用作参考，我强烈建议查看列出的所有技术并得出自己的结论。

# ajax - get JSON data from struts

> ID：11026542
> 
> 赞同：0
> 
> 时间：2012-06-14T04:11:04.660
> 
> 标签：ajax, json, struts

I can get part of data from the Action function, by using the `JSONArray.fromObject` method, using AJAX to receive the json object. But it is very strange that the same solution did not work with beans files.

The Error is below. I searched for a solution to the three main errors. Maybe I need to import the `java.lang.reflect.InvocationTargetException` library, or add some libs in a package, or maybe `Java,util.data` conflicts with `util.sql.data`. I am not sure if it will work even I made all of the potential suggestions above.

Error info:

```
 [   00000015 SystemErr     R 

net.sf.json.JSONException: java.lang.reflect.InvocationTargetException
    at net.sf.json.JSONObject.defaultBeanProcessing

(JSONObject.java:818)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:699)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:172)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:274)
    at net.sf.json.JSONObject._processValue(JSONObject.java:2655)
    at net.sf.json.JSONObject.processValue(JSONObject.java:2721)
    at net.sf.json.JSONObject.setInternal(JSONObject.java:2736)
    at net.sf.json.JSONObject.setValue(JSONObject.java:1424)
    at net.sf.json.JSONObject.defaultBeanProcessing

(JSONObject.java:765)
    at net.sf.json.JSONObject._fromBean(JSONObject.java:699)
    at net.sf.json.JSONObject.fromObject(JSONObject.java:172)
    at net.sf.json.AbstractJSON._processValue(AbstractJSON.java:274)
    at net.sf.json.JSONArray._processValue(JSONArray.java:2513)
    at net.sf.json.JSONArray.processValue(JSONArray.java:2538)
    at net.sf.json.JSONArray.addValue(JSONArray.java:2525)
    at net.sf.json.JSONArray._fromCollection(JSONArray.java:1056)
    at net.sf.json.JSONArray.fromObject(JSONArray.java:123)
    at net.sf.json.JSONArray.fromObject(JSONArray.java:105)
    at 

(SearchAction.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke

(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke

(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at org.apache.struts.actions.DispatchAction.dispatchMethod
Caused by: java.lang.reflect.InvocationTargetExceptionat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke

(NativeMethodAccessorImpl.java:60)

Caused by: java.lang.IllegalArgumentException
    at java.sql.Date.getHours(Date.java:79)
    ... 69 more`] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:53:34.223

试试这个，将在 Struts 2.0.14 中使用 jsonplugin-0.32.jar 帮助您。

struts.xml：

```
<struts>
     <package name="example" extends="json-default">
        <action name="HelloWorld" class="example.HelloWorld"  >
            <result type="json" />
        </action>
              <action name="HelloWorld1" class="example.HelloWorld"  >
            <result name="success" >example/HelloWorld.jsp</result>
        </action>
    </package>
</struts> 
```

动作类 Helloworld.java：

```
package prabhakar;

import glb.DB;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

/**
 * Prabhakar
 */
public class HelloWorld  {

    private List<StateMaster> stateList= new ArrayList<StateMaster>();
    private List<RegnMaster> regnList= new ArrayList<StateMaster>();

    private Integer stateId;
    public Integer getStateId()
    {
    return this.stateId;
    }
    public void setStateId(Integer stateId)
    {
    this.stateId=stateId;
    }
    public List<StateMaster> getStateList() {
        return stateList;
    }

    public void setStateList(List<StateMaster> stateList) {
        this.stateList = stateList;
    }
     public void setRegnList(List<RegnMaster> regnList) {
        this.regnList = regnList;
    }
    public List<RegnMaster> getRegnList() {
        return regnList;
    }

    public String execute() throws Exception {

        stateList=DB.getStateData()//
        if(stateId !=null)
          {
         regnList=DB.getRegnByStateId(stateId);
          }

        //setMessage(getText(MESSAGE));
        return "success";
    }

    /**
     * Provide default valuie for Message property.
     */

} 
```

您可以直接调用 HelloWorld.action 来查看 JSON 数据，也可以将 JSON 数据绑定到下面的表单元素。

JSP 页面 HelloWorld.jsp：

```
 /*
     Prabhakar
  */

<%@ page contentType="text/html; charset=UTF-8" %>

<%@ taglib prefix="s" uri="/struts-tags" %>
<script>
<%@include file="../js/jquery-1.7.1.min.js"%>
</script>
    <html>

<!-- JavaScript Plugins -->
  <script>
       function getLoad(){

       var stateId = $('#state').val();

$.getJSON('HelloWorld.action', {'stateId': stateId},
    function(data) {

           var divisionList = (data.regnList);

                var options = $("#regn");
                options.find('option')
    .remove()
    .end();
     options.append($("<option />").val("-1").text("--Select--"));
$.each(divisionList, function() {

    options.append($("<option />").val(this.regnId).text(this.regnName));
});
    }
);}
   </script>

<!-- jQuery-UI Dependent Scripts -->

    <body>
        State List <s:select name="stateId" list="stateList" id="state" listKey="stateId" onchange="getLoad()" listValue="stateName" headerKey="0" headerValue="--select--" />
        Regn List <s:select name="regnId"  list="regnList" listKey="regnId" id="regn" listValue="regnName" headerKey="0" headerValue="--select--" />
    </body>
</html> 
```

快乐编码:)

# wpf - Int32Converter cannot convert from 'MyNamespace.MyEnum' when data-binding ComboBox.SelectedItem

> ID：11026543
> 
> 赞同：1
> 
> 时间：2012-06-14T04:11:07.203
> 
> 标签：wpf, data-binding, mvvm

*For skimmers.* The question is near the bottom just after the bold text.

I am data-binding a `ComboBox` to an enumeration type using an `ObjectDataProvider`. The `ObjectDataProvider` is very simple.

```
<ObjectDataProvider x:Key="FaultAreaValues" 
                    ObjectType="{x:Type FaultTrackCoreDBValues:FaultAreas}"
                    MethodName="GetValues">

    <ObjectDataProvider.MethodParameters>
        <x:Type TypeName="FaultTrackCoreDBValues:FaultAreas" />
    </ObjectDataProvider.MethodParameters>

</ObjectDataProvider> 
```

I data-bind the `ComboBox` via `ItemsSource`, which is also simple.

```
ItemsSource="{Binding Source={StaticResource FaultAreaValues}}" 
```

All of this works fine. The `ComboBox` is populated with the proper values from the enumeration. I am also using the MVVM Pattern, so the view's `DataContext` is set to an instance of its associated `ViewModel`, which looks (trimmed down) like this.

```
public class ViewModel : INotifyPropertyChanged
{
    private IFault _Fault;

    public IFault Fault {
        get {
            return _Fault;
        }
        set {
            _Fault = value;
            OnPropertyChanged("Fault");
        }
    }
} 
```

And the Model:

```
public interface IFault
{
    FaultAreas Area { get; set; }
}

public partial class Fault : IFault, INotifyPropertyChanged
{
    FaultAreas IFault.Area {
        get {
            return (FaultAreas)Area;
        }
        set {
            Area = (Int32)value;
        }
    }
} 
```

**It is important to note that `Fault` is a partial class that is actually an `Entity` in an Entity Data Model.** Because Entity does not support enumerations prior to .NET 4.5 and Entity Framework 4.5, I use an explicit interface to add that support, as well as completely decouple everything from knowing anything about the Entity objects.

Here is the actual `SelectedItem` binding:

```
SelectedItem="{Binding Fault.Area}" 
```

The problem is that the selection of the ComboBox is never initially set, and changing the selection causes the adorner to show, and causes the following exception:

> System.Windows.Data Error: 23 : Cannot convert 'Behavior' from type 'FaultAreas' to type 'System.Int32' for 'en-US' culture with default conversions; consider using Converter property of Binding. NotSupportedException:'System.NotSupportedException: Int32Converter cannot convert from FaultTrack.Core.DBValues.FaultAreas. at System.ComponentModel.TypeConverter.GetConvertFromException(Object value) at System.ComponentModel.TypeConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value) at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value) at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)'

I'm not sure what causes this. I can solve the error by binding to a `FaultAreas` property directly on the ViewModel, but that's not what I want to do. I want to bind to the instance of the model `IFault`, and understand why this error happens.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:25:33.993

当我稍微改变你的代码时，它对我有用。

```
public partial class Fault : IFault, INotifyPropertyChanged
{
    private FaultAreas _area;
    public FaultAreas Area 
    {
        get { return (FaultAreas)_area; }
        set 
        {
            _area= value;
            OnPropertyChanged("Area");
        }
   }
 } 
```

我可以看到初始值并且绑定所选项目也可以。我只是更改接口实现并调用 OnPropertyChanged("Area"); .

编辑：它也适用于显式接口实现

```
public partial class Fault : IFault, INotifyPropertyChanged
{
    private int Area;

    public Fault()
    {
        Area = 0;//default?
    }

    FaultAreas IFault.Area
    {
        get{ return (FaultAreas)Area; }
        set
        {
            Area = (int)value;
            OnPropertyChanged("Area");
        }
    }
 } 
```

绑定如下所示：

```
 SelectedItem="{Binding Path=Fault.(local:IFault.Area)}" 
```

# jpa - How to use mongodb in Spring roo project?

> ID：11026545
> 
> 赞同：1
> 
> 时间：2012-06-14T04:11:17.297
> 
> 标签：jpa, spring-roo, datanucleus

In Spring Roo when we enable our project for JPA using the following command:-

```
jpa setup --provider DATANUCLEUS --database 
```

Then I found that there is no option for MongoDB after --database option.So i want to know how can I do it.

I am thinking to create a JPA setup for MySql and then make changes in the generated persistence.xml for MongoDB cause at the end even ROO is a java project.But I don't know whether its the correct approach.

I would appreciate any assistance in doing this.Any link or example will be great.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T23:48:45.553

MongoDB 有一个类似的 Roo 命令：

```
roo> mongo setup 
```

并创建实体：

```
roo> entity mongo --class ~.domain.Pizza 
```

在此 URL 找到更多详细信息：http: [//blog.springsource.org/2011/09/14/new-application-layering-and-persistence-choices-in-spring-roo/](http://blog.springsource.org/2011/09/14/new-application-layering-and-persistence-choices-in-spring-roo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T13:41:35.190

```
mongo setup --databaseName personDB
entity mongo --class ~.model.Person --testAutomatically
field string --fieldName name --notNull
repository mongo --interface ~.repository.PersonRepository --entity ~.model.Person 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T07:53:54.047

无论数据存储如何，JPA 都是 JPA。只需将数据存储设置为“支持 Spring”的数据库，然后按照您的说法更新 persistence.xml。DataNucleus 对 MongoDB 的支持将忽略不适用于特定数据存储的注释（根据 DN 文档和支持的功能页面）

# xcode - 什么是适合 10.6.8 的 Xcode？

> ID：11026550
> 
> 赞同：1
> 
> 时间：2012-06-14T04:11:48.447
> 
> 标签：xcode, macos, osx-snow-leopard

谁能告诉我什么是适合 10.6.8（雪豹）的 Xcode 版本？是否安装了 Xcode 4.2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:14:40.790

您可以在 Mac OS 10.6.8 上安装 Xcode 4.2。Xcode 4.3 仅在 Max OS Lion 中受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T17:37:36.283

不，Xcode 4.2.1 不会与 OS X 10.6.8 一起安装！我按照上面的建议，花了几个小时下载才发现需要安装 10.7！

# mysql - 开始和结束时间的 SQL 连接表

> ID：11026554
> 
> 赞同：3
> 
> 时间：2012-06-14T04:12:38.673
> 
> 标签：mysql, sql, closest

我有两张桌子：

```
Events (ID, Name, Time, Recorder)
Video (ID, StartTime, EndTime, Recorder, Filename) 
```

我希望将事件数据加入视频数据，以便为每个事件我获得视频文件名。记录器字段用于指定在事件发生时哪个记录器可操作，并协助多个记录器同时录制视频。

如果我不关心没有视频的事件，那么这很好（我可以获得 SQL），但是在我的情况下，我希望显示最接近的视频文件名和秒差。

**编辑**

样本数据

活动

```
1, EV1, 2012-01-01 12:00, A
2, EV2, 2012-01-01 13:00, B
3, EV3, 2012-01-01 12:15, B
4, EV4, 2012-01-01 11:45, A 
```

视频

```
1, 2012-01-01 12:00, 2012-01-01 12:30, A, 1.mpg
2, 2012-01-01 13:00, 2012-01-01 13:30, A, 2.mpg 
3, 2012-01-01 12:00, 2012-01-01 12:30, B, 3.mpg 
```

结果（EventID、VideoID、文件名、IsBetween、SecondsDifference）

```
1, 1, 1.mpg, TRUE, 0
2, 3, 3.mpg, FALSE, 1800 //1800 seconds from the end of video 3
3, 3, 3.mpg, TRUE, 900
4, 1, 1.mpg, FALSE, 900  //900 seconds from the start of video 1 
```

奖金

如果最近的视频没有考虑到记录器，我会更好（但第一个边界（开始和结束）检查考虑到它）如果这太难了，那很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:11:01.197

这有点笨拙，但这是我想出的：

```
SELECT
    *
FROM
    (
        SELECT
            a.ID AS EventID,
            b.ID AS VideoID,
            b.Filename,
            (
                CASE
                    WHEN a.Time < b.StartTime THEN UNIX_TIMESTAMP(b.StartTime) - UNIX_TIMESTAMP(a.Time)
                    WHEN a.Time > b.EndTime THEN UNIX_TIMESTAMP(a.Time) - UNIX_TIMESTAMP(b.EndTime)
                END
            ) AS distance_factor
        FROM
            `Events` a
        CROSS JOIN
            video b
        WHERE
            NOT EXISTS
            (
                SELECT NULL
                FROM Video
                WHERE a.Time BETWEEN StartTime AND EndTime
            )
    ) c
WHERE 
    c.distance_factor = 
    (
        SELECT
            MIN(CASE WHEN d.Time < e.StartTime THEN UNIX_TIMESTAMP(e.StartTime) - UNIX_TIMESTAMP(d.Time) WHEN d.Time > e.EndTime THEN UNIX_TIMESTAMP(d.Time) - UNIX_TIMESTAMP(e.EndTime) END)
        FROM
            `Events` d
        CROSS JOIN
            video e
        WHERE d.ID = c.EventID
    )
GROUP BY
    c.EventID 
```

这将返回日期不在任何视频的任何时间范围之间的事件，但随后返回最接近该事件日期的视频。

现在唯一的问题是，有些视频的秒差完全相同。我不知道您是否希望它返回 2 行，但现在，我放入 GROUP BY 以仅选择一个。

让我知道它是如何工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:41:30.433

我的最终结果是：

```
SELECT * FROM
    (SELECT * FROM
        (SELECT * FROM
            (SELECT *, (CASE WHEN Time < StartTime THEN UNIX_TIMESTAMP(StartTime) - UNIX_TIMESTAMP(Time)
                    WHEN Time > EndTime THEN UNIX_TIMESTAMP(Time) - UNIX_TIMESTAMP(EndTime)
                END
                ) AS SecondsDifference 

            FROM
            (
                SELECT * FROM Events E
                    LEFT JOIN Video V ON (E.Time >= V.StartTime AND E.Time <= V.EndTime)
                    WHERE DVID IS NULL GROUP BY E.EventID
            ) A ORDER BY A.EventID, A.SecondsDifference
    ) B GROUP BY EventID
) C WHERE C.SecondsDifference IS NOT NULL 
```

本质上，这首先获取没有任何视频的所有事件，然后将此结果加入整个视频列表中，按`EventID`和对其进行排序，`ClosestSeconds`然后按 对结果进行分组`EventID`以删除重复项。最后，我需要删除任何`SecondsDifference`为空的事件。

它产生与赞恩的答案相同的结果。

非常感谢赞恩。

# iphone - 当用户取消 SSO 过程时，我如何通知 iPhone 应用程序？

> ID：11026558
> 
> 赞同：2
> 
> 时间：2012-06-14T04:13:16.437
> 
> 标签：iphone, objective-c, ios

我的 iPhone 应用程序中的 SSO facebook 存在问题。我已经搜索过，但没有对我有用的结果。我的应用程序有两个功能：使用 facebook 登录/sigup。我的问题是如何通知我的应用用户取消 SSO？以下步骤对其进行了描述：

1.  用户点击“使用 facebook 连接”，然后应用程序将用户切换到 Facebook 应用程序。
2.  当 facebook 验证过程未完成时，用户按下主页按钮（在他的设备上）并返回我的应用程序。--> 如何通知我的应用程序发生了什么。我在 Facebook SDK 中找到了，但没有提及它。

感谢阅读。通用电气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:46:20.867

对于 SSO 实施，您将您的 facebook 密钥保存在`NSUserDefault`（我猜是因为它是内部 Facebook 或 www.facebook.com 的 cookie 存在与否。）

`applicationDidBecomeActive` 因此，当您启动您的应用程序时，请检查您的`NSUserDefault`或 Cookie 是否存在的回调方法，并相应地显示弹出窗口。

# javascript - Chrome Javascript 调试器在暂停时不会重新加载页面

> ID：11026560
> 
> 赞同：16
> 
> 时间：2012-06-14T04:13:31.873
> 
> 标签：javascript, debugging, google-chrome

有时，当我在 Chrome 中调试一些 javascript 并且我暂停了 javascript 时，如果我尝试重新加载页面，则 chrome 只是“继续”调试器，进入下一个断点。

似乎没有任何方法可以强制 javascript 完全停止运行，让 chrome 重新加载页面。每次按 -R 或单击重新加载按钮都会继续到下一个断点。

我现在的临时解决方案是

1.  复制url栏地址
2.  关闭该选项卡
3.  打开一个新标签
4.  然后在新标签页中打开网址。

这是相当蛮力的，但它是我让 Chrome 实际加载该页面的新副本的唯一方法，而不是继续现有正在运行的页面。清空缓存没有任何影响，因为它甚至不会尝试重新加载页面。

ps我还注意到javascript调试器也没有“停止”按钮。我如何告诉 chrome 停止执行 javascript，无需继续。唯一的控件是“继续”、“跨步”、“步入”、“步出”。怎么没有“停止”或“取消”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T04:18:08.963

当我想这样做时，我关闭调试器（让脚本完成运行），然后重新打开它并点击刷新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T05:14:32.233

我发现对我来说造成这种情况的问题是我不小心点击了左下角的一个按钮来[“暂停 JavaScript 异常”](https://developers.google.com/chrome-developer-tools/docs/javascript-debugging#pause-on-exceptions)。它是蓝色的——我点击了两次让它变回灰色，调试器完全停止了暂停。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:15:48.107

您可以停用所有断点，重新加载页面并重新激活它们，这是最后一个按钮（从暂停开始的第五个按钮）

谷歌浏览器调试器很棒，但它不像 gdb 那样你可以启动或杀死它，虽然你可以通过调用开发工具来启用/禁用它，把它想象成解释器的监视器或管理器，由于 JS 在大多数情况下总是在运行或在需要解析 JS 时运行，因此`debugger`只需与解释器交互，这就是我的解释方式，如果我错了，我深表歉意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-21T22:44:43.147

如果您想真正停止选项卡中的所有活动而不实际关闭它或开发人员工具窗口，您可以强制它进入“Aw，snap！” 通过Chrome的任务管理器（更多工具->任务管理器，选择选项卡，点击“结束进程”）状态（带有方便的重新加载按钮）。

这样，您可以立即重新加载选项卡，而无需等待所有脚本完成。当您点击刷新时，开发人员工具窗口将自动重新连接。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2013-02-14T20:28:34.583

Google chrome 调试器永远不会关闭。一旦我创建了 1 个断点，但现在没有断点，但它仍然暂停，并且没有断点暂停。我强烈建议不要使用调试器，如果你这样做了，只需卸载 chrome 并重新安装，不要设置任何断点。

# javascript - Safari 在收到 Javascript 警报消息时冻结

> ID：11026563
> 
> 赞同：0
> 
> 时间：2012-06-14T04:13:53.217
> 
> 标签：javascript, asp-classic, safari, uploadify, alert

我的问题听起来很模糊。

我创建了一个网站，每当一个 jQuery 函数或我的一个 javascript 函数显示一个“警告”框时，Safari 就会冻结。

Safari 或浏览器通常会因警报框而冻结，这是众所周知的 JavaScript 问题吗？jQuery 函数是否会因为等待我按下“确定”而陷入循环？

我的页面是 ASP 经典的，冻结是指我只能用任务管理器关闭它。

[编辑]

是什么让我的 Safari 崩溃是 Uploadify。[并且http://www.uploadify.com/demos/](http://www.uploadify.com/demos/)上的原始 Uploadify 演示在Safari 上也崩溃了，所以我不会继续讨论它。

所以代码块将是：

*   使用 Safari 访问此地址 - [http://www.uploadify.com/demos/](http://www.uploadify.com/demos/)
*   上传两个足够大的相同文件，让您有时间在第一个完成之前添加第二个
*   将弹出一个警报，使您的 Safari 崩溃

我会写信给 Uploadify。

# windows - 安排任务在登录时运行

> ID：11026573
> 
> 赞同：0
> 
> 时间：2012-06-14T04:15:37.763
> 
> 标签：windows, windows-7, tcp, operating-system, ip

当我的电脑开机时，我想向另一台机器发送一个数据包。我在登录时安排了任务，但是我的 LAN 似乎进行了某种检查，并且我的计算机需要在网络真正工作之前初始化网络内容。因此，我登录时无法运行我的任务。您对我的想法是否正确或我需要学习的其他内容有任何想法吗？十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:21:57.247

Windows 建立网络连接所花费的时间变化很大。您知道要与之通信的机器的 IP 地址吗？如果是这样，那么我将简单地使用 SendARP() 轮询该地址，直到它成功（或者您达到最大重试次数并放弃）。一旦您收到对 ARP 数据包的响应，您应该能够进行通信。

# java - 在 Netbeans GUI Builder 中开发现有的 GUI 代码

> ID：11026583
> 
> 赞同：2
> 
> 时间：2012-06-14T04:16:17.290
> 
> 标签：java, swing, user-interface, netbeans

我在eclipse中做项目，我做了swing部分。但是现在，我希望使用 Netbeans 来完成项目的 Swing 部分，因为它更容易做，而且我能够更整洁地完成它，因为我对 Swing 及其布局管理器没有太多经验。这是我在 stackoverflow 上找到的一个示例，其中包含一些摆动组件。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.*;
import java.util.HashMap;
import java.util.Map;
import javax.imageio.ImageIO;
import javax.swing.*;

public class MoveIcon extends JPanel {

    private static final long serialVersionUID = 1L;
    private static final String IMAGE_PATH = "http://duke.kenai.com/misc/Bullfight.jpg";
    private static final String IMAGE_PATH_PLAYER = "http://duke.kenai.com/iconSized/duke4.gif";
    public static final int STEP = 3;
    private static final int TIMER_DELAY = STEP * 8;
    private BufferedImage bkgrndImage = null;
    private BufferedImage playerImage = null;
    private Map<Direction, Boolean> directionMap = new HashMap<Direction, Boolean>();
    private int playerX = 0;
    private int playerY = 0;

    enum Direction {

        UP(KeyEvent.VK_UP, 0, -1), DOWN(KeyEvent.VK_DOWN, 0, 1),
        LEFT(KeyEvent.VK_LEFT, -1, 0), RIGHT(KeyEvent.VK_RIGHT, 1, 0);
        private int keyCode;
        private int xDirection;
        private int yDirection;

        private Direction(int keyCode, int xDirection, int yDirection) {
            this.keyCode = keyCode;
            this.xDirection = xDirection;
            this.yDirection = yDirection;
        }

        public int getKeyCode() {
            return keyCode;
        }

        public int getXDirection() {
            return xDirection;
        }

        public int getYDirection() {
            return yDirection;
        }
    }

    public MoveIcon() {
        try {
            URL bkgrdImageURL = new URL(IMAGE_PATH);
            URL playerImageURL = new URL(IMAGE_PATH_PLAYER);
            bkgrndImage = ImageIO.read(bkgrdImageURL);
            playerImage = ImageIO.read(playerImageURL);
            setPreferredSize(new Dimension(bkgrndImage.getWidth(), bkgrndImage.getHeight()));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        for (Direction direction : Direction.values()) {
            directionMap.put(direction, false);
        }
        setKeyBindings();
        Timer timer = new Timer(TIMER_DELAY, new TimerListener());
        timer.start();
    }

    private void setKeyBindings() {
        InputMap inMap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        ActionMap actMap = getActionMap();
        for (final Direction direction : Direction.values()) {
            KeyStroke pressed = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, false);
            KeyStroke released = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, true);
            inMap.put(pressed, direction.toString() + "pressed");
            inMap.put(released, direction.toString() + "released");
            actMap.put(direction.toString() + "pressed", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, true);
                }
            });
            actMap.put(direction.toString() + "released", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, false);
                }
            });
        }

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (bkgrndImage != null) {
            g.drawImage(bkgrndImage, 0, 0, null);
        }
        if (playerImage != null) {
            g.drawImage(playerImage, playerX, playerY, null);
        }
    }

    private class TimerListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            boolean moved = false;
            for (Direction direction : Direction.values()) {
                if (directionMap.get(direction)) {
                    playerX += STEP * direction.getXDirection();
                    playerY += STEP * direction.getYDirection();
                    moved = true;
                }
            }
            if (moved) {
                int x = playerX - 2 * STEP;
                int y = playerY - 2 * STEP;
                int w = playerImage.getWidth() + 4 * STEP;
                int h = playerImage.getHeight() + 4 * STEP;
                MoveIcon.this.repaint(x, y, w, h); // !! repaint just the player
            }
        }
    }

    private static void createAndShowUI() {
        JFrame frame = new JFrame("MoveIcon");
        frame.getContentPane().add(new MoveIcon());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

问题是：由于已经以编程方式设计了一些 Swing 组件，我可以在 netbeans 中打开这个项目并使用它的 GUI Builder 来进一步构建 GUI 部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:22:31.293

不支持您提出的建议，但您可以`JPanel Form`向现有框架添加任意数量的新实例。`SouthPanel`是通过选择`File > New File > Swing GUI Forms > JPanel Form`、添加`JLabel`和指定来创建的`FlowLayout`。

```
private static void createAndShowUI() {
    JFrame frame = new JFrame("MoveIcon");
    frame.add(new MoveIcon(), BorderLayout.CENTER);
    frame.add(new SouthPanel(), BorderLayout.SOUTH);
    ...
} 
```

![移动图标图像](../Images/85747a709676818c94f636934fadc502.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:15:29.360

不，但是是的。

问题与 NetBeans 如何处理其项目和 UI 构建器有关。

Netbeans 在项目文件夹的根目录中放置了一个名为“nbproject”的文件夹，其中包含在 Eclipse 中不会发生的 Netbeans 独有的内容（我会解释，但这超出了您的问题范围）。但是，您可以使用`File -> Import Project -> Eclipse Project...`它并且它应该可以工作。

Swing GUI 附带了更棘手的部分。您绝对可以将 Swing 代码导入 Netbeans，但 Netbeans 有自己的库，它不完全是纯 Swing。它被称为`org.jdesktop.application`，它包括`SingleFrameApplication`,`FrameView`和一些其他定制的东西。当您使用 Netbeans 框架构建应用程序时，它会优先创建这些类而不是“实际的”Swing。你可以使用拖放编辑器吗？我从未尝试过，但我敢打赌答案是否定的。另一方面，我现在确实有一个正在处理的项目，我放弃了 Netbeans Swing 转而使用纯 Swing，如果您对没有拖放功能感到满意，那实际上还不错。它更加灵活和强大，因为生成的代码没有被编辑阻止。

# ajax - 带有 jQ uery pushState 和共享页眉/页脚的动态 url

> ID：11026586
> 
> 赞同：0
> 
> 时间：2012-06-14T04:16:30.850
> 
> 标签：ajax, header, footer, pushstate

我正在做一个小的网站工作，并尝试使用 jQuery + ajax 来动态加载信息。截至目前，我有一个主页 ~/home 和一个个人资料页面 ~/profile。这两个页面共享相同的页眉和页脚，我首先加载页眉，然后是页面，然后是页脚。当我切换页面时，我只需将页面 div 替换为另一个 html。但是这里的问题是，如果您导航到 ~/profile 并加载它，它只会加载一个带有页面 div 内容的 html 页面。

基本上我想知道是否有人对系统有很好的建议，以便能够导航到任何链接并让浏览器知道加载单独的页眉和页脚文件，而无需将所有这些文件硬编码到每个文件中。我认为它会涉及某种 PHP / 框架，但我唯一使用过的 CodeIgniter 是我非常缺乏经验的。

这里的这个片段看起来很有希望：[CodeIgniter + jQuery(ajax) + HTML5 pushstate: How can I make a clean navigation with real URLs?](https://stackoverflow.com/questions/6638738/codeigniter-jqueryajax-html5-pushstate-how-can-i-make-a-clean-navigation)

```
if (!$this->input->is_ajax_request())
    $this->load->view('header');

$this->load->view('your_view', $data);

if (!$this->input->is_ajax_request())
    $this->load->view('footer'); 
```

我唯一的问题是如何设置一个控制器来拦截我的域上的任何链接并加载页眉和页脚，头文件具有链接的 js 文件，该文件知道通过 ajax 将哪个页面加载到中间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:19:36.807

这个问题并不像你想象的那么简单。这不仅仅是关于页眉和页脚，你也有 mime 类型的变化。您必须发送带有 text/html 的 html 消息，以及带有 text/plain 内容类型标头的 ajax 消息。您将需要 2 个皮肤/骨架：一个用于 html，一个用于 ajax 调用。您需要皮肤提供者能够决定在当前情况下使用哪种皮肤。您必须独立于皮肤渲染内容，或者皮肤必须调用内容的渲染方法。

它看起来非常非常粗略地像这样：

```
class Controller
{
    public function __construct()
    {
        $provider = new SkinProvider();
        $this->skin = $provider->getSkin();
    }

    public function action()
    {
        $this->skin->render(new Content());
    }
}

class SkinProvider
{
    public function getSkin()
    {
        if ($this->input->is_ajax_request())
            return new AjaxSkin();
        else
            return new HtmlSkin();
    }
}

class AjaxSkin extends AbstractSkin
{
    public function render($content)
    {
        $this->contentType('text/plain');
        $content->render();
    }
}

class HtmlSkin extends AbstractSkin
{
    public function render($content)
    {
        $this->contentType('text/html');
        $this->load->view('header');
        $content->render();
        $this->load->view('footer');
    }
}

class Content extends AbstractView
{
    public function render()
    {
        $data = $this->model->ask();
        $this->load->view('your_view', $data);
    }
} 
```

您可以将控制器的构造函数放入并抽象控制器，并且您将在从该控制器扩展的每个控制器中拥有实际的皮肤。

# php - 防止成人图像被上传到照片网站的想法

> ID：11026587
> 
> 赞同：3
> 
> 时间：2012-06-14T04:16:56.593
> 
> 标签：php, javascript, image, flash, photos

我经营一个小型照片网站。最近我注意到，上传的一些图片本质上是成人的。如果可能的话，我需要一个很好的简单方法来防止上传成人图像。任何想法都会有所帮助，谢谢。

此外，该网站运行时几乎使用了 PHP、JavaScript 和 flash。 [http://superlame.com](http://superlame.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:28:04.310

我建议你看一下[nude.js。](http://www.patrick-wied.at/static/nudejs/ "裸体.js |  使用 JavaScript 和 HTMLCanvas 进行裸体检测")也许这就是你所需要的。这似乎是您问题的完美解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T04:39:09.653

[这是一个裸体.js](http://www.patrick-wied.at/static/nudejs/)[的 PHP 端口](https://github.com/azwan082/php-nudity-filter)，我刚刚尝试过，在某种程度上，它似乎在工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:28:13.653

有一些选择，但你永远无法完全阻止它

1.  购买识别成人图像的脚本。
2.  做一个成人部分。
3.  创建一个按钮来报告成人图像。
4.  自己检查每张传入的照片。

第一个选择很昂贵，第二个给你更多的访问者，最后一个给你更多的垃圾邮件发送者，

亲切的问候，

# java - PKCS#7 加密

> ID：11026588
> 
> 赞同：2
> 
> 时间：2012-06-14T04:16:58.257
> 
> 标签：java, encryption, cryptography, pkcs#7

使用java加密、签名、解密和验证签名需要遵循哪些步骤。使用 PKCS#7 算法，java key store 有什么用？关于 PKCS#7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:32:01.250

**步骤 1**使用 keytool 实用程序生成密钥。[在这里](http://i-proving.com/wordpress/2006/05/30/configuring-jboss-ssl)你会找到很好的教程

**步骤 2**加载密钥库

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.security.GeneralSecurityException;
import java.security.KeyStore;

import org.apache.commons.io.IOUtils;
import org.apache.commons.lang.SystemUtils;

public class MyKeystoreProvider {
  public KeyStore getKeystore(char[] password) throws GeneralSecurityException, IOException {
    KeyStore keystore = KeyStore.getInstance("jks");
    InputStream input = new FileInputStream(SystemUtils.USER_HOME + File.separator + ".keystore");
    try {
      keystore.load(input, password);
    } catch (IOException e) {
    } finally {
      IOUtils.closeQuietly(input);
    }
    return keystore;
  }
} 
```

第 3 步接下来，假设您想要一些代码来签署一些内容。假设您的内容是一堆 ASCII 文本，您可以将其表示为字节数组。因此您将使用一些 Bouncy Castle 类来生成“CMS 签名数据”：

```
 public byte[] sign(byte[] data) throws 
           GeneralSecurityException, CMSException, IOException {
      Security.addProvider(new BouncyCastleProvider());
      CMSSignedDataGenerator generator = new CMSSignedDataGenerator();
      generator.addSigner(getPrivateKey(), (X509Certificate) getCertificate(),
          CMSSignedDataGenerator.DIGEST_SHA1);
      generator.addCertificatesAndCRLs(getCertStore());
      CMSProcessable content = new CMSProcessableByteArray(data);

      CMSSignedData signedData = generator.generate(content, true, "BC");
      return signedData.getEncoded();
    }

private CertStore getCertStore() throws GeneralSecurityException {
  ArrayList<Certificate> list = new ArrayList<Certificate>();
  Certificate[] certificates = getKeystore().getCertificateChain(this.alias);
  for (int i = 0, length = certificates == null ? 0 : certificates.length; i < length; i++) {
    list.add(certificates[i]);
  }
  return CertStore.getInstance("Collection", new CollectionCertStoreParameters(list), "BC");
}

private PrivateKey getPrivateKey() throws GeneralSecurityException {
  if (this.privateKey == null) {
     this.privateKey = initalizePrivateKey();
  }
  return this.privateKey;
}

private PrivateKey initalizePrivateKey() throws GeneralSecurityException {
   KeyStore keystore = new MyKeystoreProvider().getKeystore();
   return (PrivateKey) keystore.getKey(this.alias, getPasswordAsCharArray());
} 
```

现在终于拿到了原版内容。

```
CMSSignedData s = new CMSSignedData(signedBytes);
CertStore certs = s.getCertificatesAndCRLs("Collection", "BC");
SignerInformationStore signers = s.getSignerInfos();
boolean verified = false;

    for (Iterator i = signers.getSigners().iterator(); i.hasNext(); ) {
      SignerInformation signer = (SignerInformation) i.next();
      Collection<? extends Certificate> certCollection = certs.getCertificates(signer.getSID());
      if (!certCollection.isEmpty()) {
        X509Certificate cert = (X509Certificate) certCollection.iterator().next();
        if (signer.verify(cert.getPublicKey(), "BC")) {
          verified = true;
        }
      }
    }
    CMSProcessable signedContent = s.getSignedContent() ;
    byte[] originalContent  = (byte[]) signedContent.getContent(); 
```

# html - 菜单显示在 Chrome 中但不显示在 Safari 中

> ID：11026589
> 
> 赞同：0
> 
> 时间：2012-06-14T04:16:59.100
> 
> 标签：html, css

所以我正在为客户建立一个网站，我遇到了一个有趣的错误。顶部导航出现在除 Safari 之外的所有浏览器中。问题是，链接在那里，它们只是不可见。但是光标指向一个指针！这太奇怪了！去看看吧，我很想知道这到底是怎么回事。

[http://www.51degreessouth.com](http://www.51degreessouth.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:31:50.873

可能是你必须`float`从你的中删除`#nav-primary a`并给它你的`.menu li`. 像这样写：

```
 #nav-primary a{
     float:none;
    }
    .menu li{
     float:left;
    } 
```

# wcf - 如何同步调用 WCF 服务

> ID：11026590
> 
> 赞同：4
> 
> 时间：2012-06-14T04:17:09.277
> 
> 标签：wcf, visual-studio-2010, c#-4.0, wcf-binding, wcf-behaviour

我有一个 WCF 服务，我正在使用 VS 2010 中的“添加服务引用”创建客户端。

问题是服务被异步调用，尽管“生成异步操作”选项未选中。![在此处输入图像描述](../Images/ef97490be18c2b10986b0041e7a14e1b.png)

那么我怎样才能同步调用服务呢？这种行为在哪里定义（在客户端或服务器上）？我是 WCF 的新手。请多多指教

客户端是一个控制台应用程序。

我没有选中“生成异步操作”。即使这样，代理也包含以下几行，表明该方法是异步调用的。不知道为什么:)

```
 [System.ServiceModel.OperationContractAttribute(IsOneWay=true, Action="urn:COBService")]
    [System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
    [System.ServiceModel.ServiceKnownTypeAttribute(typeof(MemberType))]
    void ABC(TestProject.ServiceReference1.ProcessCOBRecord request);

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, AsyncPattern=true, Action="urn:COBService")]
    System.IAsyncResult BeginABC(TestProject.ServiceReference1.ProcessCOBRecord request, System.**AsyncCallback** callback, object asyncState);

    void EndABC(System.IAsyncResult result); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:22:36.073

**更新**

事实证明，WCF 服务配置导致了这种异步行为，特别是[OperationContract 属性的 IsOneWay 属性](https://msdn.microsoft.com/en-us/library/ms575867(v=vs.110).aspx)。这在技术上不是异步的，但它[“通常呈现异步调用的外观”](https://web.archive.org/web/20140614071811/http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)。

* * *

您不必做任何特别的事情，只需调用客户端代理上的普通方法——这就是同步方法。因此，如果您有一个名为*DoSomething*的 WCF 方法，那么您只需调用：

```
var client = new MyService.MyServiceClient();
client.DoSomething(); 
```

*client.DoSomethingAsync*是异步方法。

这种区别与客户端行为有关，无论您的应用程序在等待 WCF 服务响应时是否阻塞线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:24:12.610

添加完服务引用后，您应该为每个公开的服务操作获取同步方法。

同步方法的命名与服务操作相同，例如`GetCustomers`. 另一方面，异步方法以两种方式生成：`GetCustomersAsync`, `BeginGetCustomers`/ `EndGetCustomers`。

如果要同步获取客户，则需要调用`GetCustomers`. 在这种情况下，`GetCustomers`将阻塞直到服务操作完成，然后代码移动到下一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:24:51.517

如果未选中“*生成异步操作*”选项，则将同步调用该服务

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb514724.aspx)

> **生成异步操作**
> 确定 WCF 服务方法是同步调用（默认）还是异步调用。

# php - jquery ui自动完成自动关闭

> ID：11026592
> 
> 赞同：4
> 
> 时间：2012-06-14T04:17:37.387
> 
> 标签：php, jquery, autocomplete

我使用 jquery ui 来实现自动完成。我的代码看起来像这样

```
$(function(){

$('input[name=store]').attr('autocomplete','on');

        $( "input[name=store]" ).autocomplete({
        source: function( request, response ) {
            //alert('hello');
            $.ajax({
                url: "http://localhost/dheeps/admin/calls/callback.php",
                dataType: "jsonp",
                data: {

                    sub:"searchstore",

                    store: request.term
                },
                success: function( data ) {
                    //alert('hello');
                    response( $.map( data.data, function( item ) {
                        //alert(item);
                        return {
                            label: item.name + (item.id1 ? ", " + item.adminName1 : "") + ", " + item.id,
                            value: item.id
                        }
                    }));

                }
            });
        },
        minLength: 2,
        select: function( event, ui ) {

        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
            //alert('helo');
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    });

}); 
```

在表单的 html 中，我发现输入的元素自动完成属性设置为关闭。这就是我的代码不起作用的原因。请指导我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T04:23:27.197

放在下面

```
$('input[name=store]').attr('autocomplete','on'); 
```

在这之后

```
 $( "input[name=store]" ).autocomplete({}); 
```

因为`autocomplete`属性会在初始化后添加到元素中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-02T14:37:05.520

感谢您提供此信息。这解决了问题。我认为这很奇怪，一个简单的测试示例可以正常工作。然后，当我把它放到一个大项目中时，它会自动被禁用。

```
$(function () {
    var availableTags = ["One", "Two", "Three"];

    $("#myinput").autocomplete({
        source: availableTags
    });

    $("#myinput").attr('autocomplete', 'on');
}); 
```

# java-me - 不同平台的键码

> ID：11026596
> 
> 赞同：1
> 
> 时间：2012-06-14T04:18:25.747
> 
> 标签：java-me, midp, lcdui

我正在为移动设备开发一个 j2me 应用程序。在我的应用程序中，我必须使用设备的平台，并在此基础上获取密钥代码。

我参考了以下链接：[http](http://www.iteye.com/topic/179073) ://www.iteye.com/topic/179073 （请参阅下面的平台检测代码片段）。

现在我的问题是我必须使用 Micromax 和 lava 手机的平台，但该链接中没有。我也在网上搜索过，但我无法获得正确的链接。

```
/** 
 * Returns mobile phone platform 
 * 
 * @return name mobile phone platform 
 */  
private String getPlatform() {  
    // detecting NOKIA or SonyEricsson  
    try {  
        final String currentPlatform = System.getProperty("microedition.platform");  
        if (currentPlatform.indexOf("Nokia") != -1) {  
            return PLATFORM_NOKIA;  
        } else if (currentPlatform.indexOf("SonyEricsson") != -1) {  
            return PLATFORM_SONY_ERICSSON;  
        }  
    } catch (Throwable ex) {  
    }  
    // detecting SAMSUNG  
    try {  
        Class.forName("com.samsung.util.Vibration");  
        return PLATFORM_SAMSUNG;  
    } catch (Throwable ex) {  
    }  
    // detecting MOTOROLA  
    try {  
        Class.forName("com.motorola.multimedia.Vibrator");  
        return PLATFORM_MOTOROLA;  
    } catch (Throwable ex) {  
        try {  
            Class.forName("com.motorola.graphics.j3d.Effect3D");  
            return PLATFORM_MOTOROLA;  
        } catch (Throwable ex2) {  
            try {  
                Class.forName("com.motorola.multimedia.Lighting");  
                return PLATFORM_MOTOROLA;  
            } catch (Throwable ex3) {  
                try {  
                    Class.forName("com.motorola.multimedia.FunLight");  
                    return PLATFORM_MOTOROLA;  
                } catch (Throwable ex4) {  
                }  
            }  
        }  
    }  
    try {  
        if (adaptorCanvas.getKeyName(SOFT_KEY_LEFT_MOTOROLA).toUpperCase().indexOf(SOFT_WORD) > -1) {  
            return PLATFORM_MOTOROLA;  
        }  
    } catch (Throwable e) {  
        try {  
            if (adaptorCanvas.getKeyName(SOFT_KEY_LEFT_MOTOROLA1).toUpperCase().indexOf(SOFT_WORD) > -1) {  
                return PLATFORM_MOTOROLA;  
            }  
        } catch (Throwable e1) {  
            try {  
                if (adaptorCanvas.getKeyName(SOFT_KEY_LEFT_MOTOROLA2).toUpperCase().indexOf(SOFT_WORD) > -1) {  
                    return PLATFORM_MOTOROLA;  
                }  
            } catch (Throwable e2) {  
            }  
        }  
    }  
    // detecting SIEMENS  
    try {  
        Class.forName("com.siemens.mp.io.File");  
        return PLATFORM_SIEMENS;  
    } catch (Throwable ex) {  
    }  
    // detecting LG  
    try {  
        Class.forName("mmpp.media.MediaPlayer");  
        return PLATFORM_LG;  
    } catch (Throwable ex) {  
        try {  
            Class.forName("mmpp.phone.Phone");  
            return PLATFORM_LG;  
        } catch (Throwable ex1) {  
            try {  
                Class.forName("mmpp.lang.MathFP");  
                return PLATFORM_LG;  
            } catch (Throwable ex2) {  
                try {  
                    Class.forName("mmpp.media.BackLight");  
                    return PLATFORM_LG;  
                } catch (Throwable ex3) {  
                }  
            }  
        }  
    }  
    return PLATFORM_NOT_DEFINED;  
} 
```

# bash - Bash：模式匹配/文件名扩展

> ID：11026597
> 
> 赞同：0
> 
> 时间：2012-06-14T04:18:28.933
> 
> 标签：bash, scripting, expansion

所以，我目前倾向于 Bash 脚本，我对模式匹配和文件名扩展之间的区别有点困惑。

[Bash 参考手册](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC36)内容如下：

> 分词后，除非`-f' option has been set (see section 4.3.1 The Set Builtin), Bash scans each word for the characters`*'、`?', and`['。如果出现这些字符之一，则该词被视为一种模式，并替换为按字母顺序排列的与该模式匹配的文件名列表。

这对我来说表明以下内容可能不应该做我们想要的：

```
if [[ $a == [cb]at* ]] ; then ... 
```

在这种情况下`[cb]at*`，不会像上面引用的那样扩展到以*cat*或*bat*开头的文件列表，而是更像一个非常有限的正则表达式。为什么？字符 *?[ 什么时候像正则表达式一样而不是扩展为当前目录中的匹配文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:34:28.730

[bash](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)以不同的方式解释令牌`[[ ... ]]`。这是一个特点。

# ruby-on-rails - Rails：如何取消 Rails 控制台中的当前语句？

> ID：11026598
> 
> 赞同：5
> 
> 时间：2012-06-14T04:18:46.857
> 
> 标签：ruby-on-rails, irb

我在一个项目中使用带有 jRuby 的 Rails 2.3.8。我经常用它`rails console`来测试我的类和 API，不知何故我遇到了一个问题。当我在 Rails 控制台中工作时，如果我错误地输入了一些多行命令，有没有办法在中间的某个地方取消它？

例如：

```
>> [1,2,3,4].inject(1){
?> 
```

我发现它会期望我完成整个完成的语句，但我想做的就是取消所有当前的语句。

我试过 Ctrl+C，但它对我不起作用。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:54:07.240

在提示符下，您可以使用以下命令来控制 irb 会话。

```
conf.ignore_sigint= true/false 
```

这指定了 ^C (control-c) 的行为。如果为 false，^C 将退出 irb。如果为true，输入过程中的^C将取消输入并返回顶层；在执行期间，^C 将中止当前操作。

在底部，rails 控制台使用 IRB。另见：

```
http://www.rubycentral.com/pickaxe/irb.html 
```

## 编辑

`rubycentral.com`链接已死。

# java - 在java中打印只会导致截图

> ID：11026599
> 
> 赞同：1
> 
> 时间：2012-06-14T04:18:50.757
> 
> 标签：java, printing, jframe, jscrollpane

我使用了这个很棒的网站上的代码来帮助我打印 JFrame：

[http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-Printing.html](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-Printing.html)

但是，当我将它传递给我的 JScrollPane 或 JScrollPane 内包含其他 jpanels 和摆动组件的 JPanel 时，它只会切断我打印时未显示的窗格部分......是否有解决此问题的方法? 谢谢你的帮助！

# ruby-on-rails - 使用 cancan 的用户配置文件授权

> ID：11026602
> 
> 赞同：0
> 
> 时间：2012-06-14T04:19:14.997
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, authorization

我有一个使用 Devise、Rolify 和 Cancan 的应用程序。

现在，它唯一的设置是区分管理员和用户，以防止访问用户索引和站点的管理部分。

我的问题是没有用户可以访问其他用户配置文件，这不应该是这种情况。例如，如果我在 ....user/2 登录，我可以更改我的 url 并查看 user/1。我如何阻止这个？

**能力.rb**

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.has_role? :admin
      can :manage, :all
      can :access, :rails_admin
      can :dashboard 
    else
      can :manage, Profile, :user_id => user.id
    end
 end
end 
```

**应用程序控制器**

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_path, :alert => exception.message
  end 
```

**角色.rb**

```
class Role < ActiveRecord::Base
  has_and_belongs_to_many :users, :join_table => :users_roles
  belongs_to :resource, :polymorphic => true
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:54:00.810

您必须检查控制器中的功能，根据 CanCan 文档，这可以通过将其放在控制器顶部来完成：`load_and_authorize_resource`

这应该会限制用户查看其他个人资料，因为您似乎已经定义了将查看限制为仅查看个人资料的能力。

有关更多信息，请参阅 CanCan wiki： [https ://github.com/ryanb/cancan/wiki](https://github.com/ryanb/cancan/wiki)

祝你好运！

# c# - CheckBox Click 事件未触发 (WPF)

> ID：11026603
> 
> 赞同：0
> 
> 时间：2012-06-14T04:19:20.320
> 
> 标签：c#, wpf, events, checkbox, click

我在*UniformGrid中放置了一些***CheckBox**。我还修改了拉伸第一个复选框，如下图所示：

 *[![统一网格](../Images/b7ff01ec4393661ea2e121e9ce4aa942.png)](https://i.stack.imgur.com/2ZUnQ.png)

我为选中的复选框编写了**单击事件处理程序（上图）。**它的垂直和水平对齐方式是**Stretch**。但是只有当我精确地单击复选框时，事件处理程序才会触发。**如果我单击(0,0)**单元格区域中的任意位置，我希望能够触发该事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:11:05.240

添加到具有透明背景的单元格 (0,0) 网格，并且在鼠标向上\向下事件将被触发。*

# android - HVGA 在 android 4.3 的模拟器中显示不同的屏幕尺寸？

> ID：11026604
> 
> 赞同：0
> 
> 时间：2012-06-14T04:19:22.567
> 
> 标签：android, android-emulator, android-4.0-ice-cream-sandwich, screen-size

我正在尝试开发 HVGA [320 x 480] 的应用程序，它在 android 2.3 中显示相同的尺寸，但在 android 4.3 中屏幕尺寸不同，它在日志中显示 320 x 432。任何原因。请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:32:17.740

48个像素的差异被系统栏占据。

# android - Android 应用开发 - 滑动操作

> ID：11026612
> 
> 赞同：0
> 
> 时间：2012-06-14T04:20:19.977
> 
> 标签：android

我想创建一个显示内容列表的信息应用程序。列表中的每个条目对应于一张幻灯片/页面。用户可以选择一张幻灯片来访问该页面。从那里，用户可以左右滑动以访问其他页面。商店里有很多这样的应用程序。我只是不知道它们叫什么[滑块应用程序？？]。不确定，这就是为什么我对我打算做什么给出了很大的解释。

这是我在 Android 中发现的实现这一目标的方法。如果我遗漏了什么，请纠正我。还请建议是否有更好的方法来做到这一点，或者我是否做得太过分了。

1.  内容存储在 SQLite 数据库中，因此可以轻松管理和更新数据。这也将帮助用户喜欢一张幻灯片，我可以在数据库中捕获信息。
2.  使用 ListView 显示内容列表
3.  用于在幻灯片中显示内容的 ScrollView
4.  问题 - 我如何实现滑动动作？我可以有一个活动来显示页面并在为滑动操作加载新页面时使用它，还是需要多个活动？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:33:02.447

您可以使用 Horizo​​ntal viewpager 来完成您的任务。这是示例[Horizo​​ntal ViewPager 之一](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging)。还有一篇很好的文章，里面有这个例子[。](http://blahti.wordpress.com/2012/05/14/horizontal-scrolling-pages/)请检查一下。这可能很有帮助。

# javascript - Rally SDK 2.0 RallyGrid 在点击页面时出现 IndexOf 错误

> ID：11026613
> 
> 赞同：1
> 
> 时间：2012-06-14T04:20:43.453
> 
> 标签：javascript, extjs, rally

我有一个只有 3 个项目的拉力网格。网格会自动显示每页显示 25/50/100/etc 的链接。例如，当我单击 50 时，我只是得到一个恒定的微调器说“正在加载...”，在 JS 控制台中，我收到一个未捕获的错误“无法调用方法'indexOf'...”

我假设这意味着我的数据存储缺少某些东西？

这是网格的东西：

```
 var resultsModel = Ext.define('ResultsModel', {
            extend: 'Ext.data.Model',
            fields: [
            {name: 'FID', type: 'string'},
            {name: 'TestName', type: 'string'},
            {name: 'TestDuration', type: 'string'},
            {name: 'Verdict', type: 'string'},
            ]       
        }); 
```

this.resultsStore = Ext.create('Ext.data.Store', { model: 'ResultsModel', pageSize: 25 });

```
 this.down('#testResults').add({
                xtype: 'rallygrid',
                store: this.resultsStore,
                width: 800,
                viewConfig: {
                stripeRows: true,
                emptyText: "No test cases run"
                },
                columnCfgs: [
                    {
                        text: 'TestCase', dataIndex: 'FID', width: 65 
                    },
                    {
                        text: 'Test Name', dataIndex: 'TestName', flex: 1
                    },
                    {
                        text: 'Run Time (s)', dataIndex: 'TestDuration', width: 75
                    },                      
                    {
                        text: 'Verdict', dataIndex: 'Verdict', width: 65, 
                        renderer: function(value){
                            if((value == "Fail") || (value == "Error")){
                                return Ext.String.format("<div style='background-color:#F00;color:#FFF;font-weight:bold;text-align:center'>{0}</div>", value);
                            }
                            else{
                                return Ext.String.format("<div style='background-color:#2EFE2E;color:#000;font-weight:bold;text-align:center'>{0}</div>", value);

                            }
                        }
                    }

                ]
            }); 
```

这是被推入数据存储区的数据：

```
 Ext.Array.each(data, function(record) {     
        records.push({
            FID: record.get('TestCase')['FormattedID'],  //record.data.TestCase might work too.
            TestName: record.get('TestCase')['Name'],
            TestDuration: record.get('Duration'),
            Verdict: record.get('Verdict')
        });
    });

    this.resultsStore.loadData(records, false); 
```

Ext 正在迭代的数组中的数据只是测试运行的获取。

这是控制台输出：

```
Uncaught TypeError: Cannot call method 'indexOf' of undefined sdk-debug.js:5304
Ext.apply.urlAppend sdk-debug.js:5304
Ext.define.buildUrl sdk-debug.js:26016
Ext.define.buildRequest sdk-debug.js:25859
Ext.define.doRequest sdk-debug.js:26059
Ext.define.read sdk-debug.js:25828
Ext.define.load sdk-debug.js:44668
Base.callParent sdk-debug.js:2894
Ext.define.load sdk-debug.js:45283
Ext.define.read sdk-debug.js:44420
Ext.define.loadPage sdk-debug.js:45562
Ext.define.changePageSize sdk-debug.js:96872
(anonymous function) sdk-debug.js:1540
(anonymous function)
wrap 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:58:54.110

你见过这个例子吗？

[https://rally1.rallydev.com/apps/2.0p/doc/#!/example/GridWithFreeformData](https://rally1.rallydev.com/apps/2.0p/doc/#!/example/GridWithFreeformData)

我们创建了一个与网格配合得很好的商店，它将自动创建一个模型并为您加载您的自定义数据。

# android - 捕获的照片方向在 android 中发生了变化

> ID：11026615
> 
> 赞同：9
> 
> 时间：2012-06-14T04:21:08.413
> 
> 标签：android, bitmap, camera

我正在单击按钮打开相机应用程序。并在下一个活动中显示拍摄的照片。但拍摄的照片旋转了 90 度。当我在捕获图像后在视图中显示图像时，它的方向始终是横向的。为什么在人像模式下拍摄的照片没有以人像模式显示？

onClick 按钮：

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
i.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(APP_DIR+"/latest.png")));       
startActivityForResult(i, CAPTURE_PHOTO_CONSTANT); 
```

在 onActivityresult 里面：

```
bmp = BitmapFactory.decodeFile(APP_DIR+"/latest.png");
startActivity(new Intent(this, DisplayActivity.class)); 
```

显示拍摄的照片：

```
photoViewRelativeLayout.setBackgroundDrawable(new BitmapDrawable(getResources(), CaptureActivity.bmp)); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T04:29:59.613

我在三星手机上遇到了同样的问题。显然三星手机设置了 EXIF 方向标签，而不是旋转单个像素。使用 BitmapFactory 读取位图不支持这个标签。我发现这个问题的解决方案是在 onActivityResult 中使用 ExifInterface活动的方法。它检查与从相机捕获的图像的 URI 相关联的方向。

```
 int rotate = 0;
                        try {
                            getContentResolver().notifyChange(imageUri, null);
                            File imageFile = new File(imagePath);
                            ExifInterface exif = new ExifInterface(
                                    imageFile.getAbsolutePath());
                            int orientation = exif.getAttributeInt(
                                    ExifInterface.TAG_ORIENTATION,
                                    ExifInterface.ORIENTATION_NORMAL);

                            switch (orientation) {
                            case ExifInterface.ORIENTATION_ROTATE_270:
                                rotate = 270;
                                break;
                            case ExifInterface.ORIENTATION_ROTATE_180:
                                rotate = 180;
                                break;
                            case ExifInterface.ORIENTATION_ROTATE_90:
                                rotate = 90;
                                break;
                            }
                            Log.v(Common.TAG, "Exif orientation: " + orientation);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        /****** Image rotation ****/
                        Matrix matrix = new Matrix();
                        matrix.postRotate(orientation);
                        Bitmap cropped = Bitmap.createBitmap(scaled, x, y, width, height, matrix, true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-02T06:15:27.147

请改用 Glide。它本身固定方向，与您使用的手机无关。这里\一个样本

```
Glide.with(_c).load(horizontalList.get(position).imagePath).into(holder.img_injury); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-10T04:44:13.680

> 用位图和位图的路径调用这个方法

```
 getRotateImage(path, bm) 
```

> 在任何 util 类中添加 getRotateImage 方法作为静态方法并使用它。

```
public static Bitmap getRotateImage(String photoPath, Bitmap bitmap) throws IOException {
        ExifInterface ei = new ExifInterface(photoPath);
        int orientation = ei.getAttributeInt(ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_UNDEFINED);

        Bitmap rotatedBitmap = null;
        switch (orientation) {

            case ExifInterface.ORIENTATION_ROTATE_90:
                rotatedBitmap = rotateImage(bitmap, 90);
                break;

            case ExifInterface.ORIENTATION_ROTATE_180:
                rotatedBitmap = rotateImage(bitmap, 180);
                break;

            case ExifInterface.ORIENTATION_ROTATE_270:
                rotatedBitmap = rotateImage(bitmap, 270);
                break;

            case ExifInterface.ORIENTATION_NORMAL:
            default:
                rotatedBitmap = bitmap;
        }

        return rotatedBitmap;

    }

  public static Bitmap rotateImage(Bitmap source, float angle) {
        Matrix matrix = new Matrix();
        matrix.postRotate(angle);
        return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(),
                matrix, true);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-25T06:22:14.930

我得到它有点工作。当我在横向模式下拍照时，一切都像以前一样正常。如果我以人像模式拍摄照片，我需要将相机倒置并且照片看起来不错。如果您注意到我通过在每个方向前面添加“ExifInterface”来稍微更改您的代码。我使用了以下代码：

```
 try {
      ExifInterface exif = new ExifInterface(filename); 
      int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 
                          ExifInterface.ORIENTATION_NORMAL);
      int rotate = 0;
         switch(orientation) {
            case  ExifInterface.ORIENTATION_ROTATE_270:
                 rotate-=90;break;
            case  ExifInterface.ORIENTATION_ROTATE_180:
                 rotate-=90;break;
            case  ExifInterface.ORIENTATION_ROTATE_90:
                 rotate-=90;break;
            }
              Log.d("Fragment", "EXIF info for file " + filename + ": " + rotate);
         } catch (IOException e) {
             Log.d("Fragment", "Could not get EXIF info for file " + filename + ": " + e);
         } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T04:27:45.057

你可以简单地旋转它

在 onActvityresult ... 中获取使用此代码拍摄的图像的方向。

```
File imageFile = new File(imageUri.toString());
       ExifInterface exif = new ExifInterface(imageFile.getAbsolutePath());
       int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);
       int rotate = 0;
       switch(orientation) {
         case ORIENTATION_ROTATE_270:
             rotate-=90;break;
         case ORIENTATION_ROTATE_180:
             rotate-=90;break
         case ORIENTATION_ROTATE_90:
             rotate-=90;break
       } 
```

# algorithm - 寻找将数字表示为平方和的多种方法的精度问题

> ID：11026617
> 
> 赞同：1
> 
> 时间：2012-06-14T04:21:10.593
> 
> 标签：algorithm, math

我正在尝试这个问题， [http://www.spoj.pl/problems/TWOSQ/](http://www.spoj.pl/problems/TWOSQ/)。我们必须找到将数字（大至 10^15）表示为平方和的不同方式的数量（不计算两次，即 5^2 + 1^2 和 1^2 + 5^2 是相同的） . 我以前见过这个任务，这也是我之前解决它的方法。我一直在法官那里得到错误的答案。有人能告诉我为什么吗？或完全提出不同的方法。我已经添加了必要的评论以便理解。提前致谢！。

```
#include<cstdio>
#include<iostream>
#include<cmath>
using namespace std;

int main()
{
long long X;
cin >> X;
const double EPS = 1e-6;
long long int count = 0;
// add EPS to avoid flooring x.99999 to x
for (int a = 0; a <= sqrt(X/2) + EPS; a++)
{
    long long int b2 = X - a*a; // b^2
    long long int b = (long long int) (sqrt(b2) + EPS);
    if (abs(b - sqrt(b2)) < EPS) // check b is an integer
        count++;
}
cout << count << endl; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:31:45.953

我可以看到两个问题。

1.  在计算 时`b2`，您使用表达式`a*a`。如果`a`只是一个 int，那么这将很快溢出。
2.  你的价值`EPS`太大了。你会得到误报。

双精度浮点数最多使用 53 个有效位进行存储。这意味着可以精确表示高达约 8e15 的所有整数。要正确舍入此类数字的平方根，您需要将精度提高一倍左右，这样您的 4e15 仍然在您的范围内。

所以，我会做两件事：

1.  将我所有的变量更改为双精度数。
2.  完全取消`EPS`并使用精确的比较。它们应该在您指定的范围内正常工作（最多 X = 1e15）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:45:48.317

您在主循环中使用 EPS 存在根本缺陷（可以想象，由于丢番图的原因，它可以避免任何实际错误，但这需要更多的思考而不是保证）。假设 X/2 非常接近完美正方形，例如 10^14-1。那么 sqrt(X/2) 将约为 10^7 - 0.5*10^-7，这将下溢双精度浮点数并舍入到 10^7。

为什么不在 2*a*a > X 时停止循环？当然，修复你的整数溢出危险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:21:45.707

我想我知道您要做什么，这很酷……试试这个：

```
#include<cstdio>
#include<iostream>
#include<cmath>

using namespace std;

typedef unsigned long long int data_type;

int main()
{
    data_type value = 0,
              count = 0, 
              index = 0, 
              max = 0,         
              b_1 = 0; 

    cin >> value;
    max = (data_type)sqrt(value);
    char *flags = new char[max];
    memset(flags, 0, max);

    for (index = 0; index < max; index++)
    {   
        b_1 = value - (index * index);        

        if (!((data_type)sqrt(b_1) - sqrt(b_1)) && !flags[(data_type)(sqrt(b_1))] && !flags[index])
        {
            flags[(data_type)sqrt(b_1)] = 1;
            flags[index] = 1;
            count++;                          
        }
    }        

    cout << count << endl;
} 
```

据我所知，平方然后取差，通过取平方根并检查任何剩余浮点值来检查该差本身是否是一个完美的平方，有点酷。

**这还没有经过彻底测试**因此，如果有任何错误或问题，我深表歉意。

**正如我认为它的好把戏，问题是重复。**

**请注意，这`(10**15)**.5`大约是 32 兆，所以这就是分配**
好运的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T01:18:05.457

我尝试了很多，但由于某种原因仍然得到错误的答案。因此，我研究了一种不同的方法，并能够找出这个非常快速的解决方案。

```
 long long L=res=0, R=(long long)sqrt(X) + 1;     
while (L<=R)
{
    long long Y = L*L + R*R;
    if (Y > X) R--;
    else if (Y < X) L++;
    else res++, L++;
} 
```

# java - 如果一个类被声明为final，是否有必要将方法声明为final

> ID：11026618
> 
> 赞同：6
> 
> 时间：2012-06-14T04:21:13.813
> 
> 标签：java, class, methods, final

我正在阅读并需要对最终类和方法进行一些说明。我的理解是，将一个类声明为 final 会阻止该类被扩展。因此，是否有必要将 final 类中的方法声明为 final？在我看来，如果类不能扩展，则没有必要将方法声明为 final。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T04:22:40.423

如果类被声明为final，则不需要将方法声明为final，因为该类已经无法扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:22:30.380

不，这是隐含的，所以没有必要（但如果你愿意，你也可以这样做）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:23:50.083

`final`意味着类不能被扩展意味着任何方法都没有重载的范围。因此，在方法上使用 final 修饰符是多余的。

# java - 使用 onUpgrade 备份旧数据库、替换数据库和恢复数据

> ID：11026619
> 
> 赞同：1
> 
> 时间：2012-06-14T04:21:32.533
> 
> 标签：java, android, sqlite

在我的应用程序中，我通过 assets 文件夹提供最新版本的数据库。为简单起见，假设我的数据库方案是 PRIM KEY INTEGER _id、TEXT 名称和 INTEGER 数量。数量是用户可以在应用程序中编辑的唯一内容，其他一切都是静态数据。数量默认为 0。

这是我目前正在尝试做的 onUpgrade：

1.) 遍历所有表，找到数量 > 0 的条目，并将这些条目存储在包含 ID 和 Quantity 值以及原始表名称的对象列表中。

2.) 删除我刚刚迭代的旧数据库

3.) 从包含更新的静态信息的资产中复制新数据库。

4.) 遍历步骤 1 中的列表，并使用相应表中的数量更新相应的 ID。

这是我的 onUpdate 方法（titleArray 是一个包含我的表名的字符串数组）：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    Log.w("TaskDBAdapter", "Upgrading from version " + oldVersion + " to " + newVersion);

    ArrayList<backupKey> bak = new ArrayList<backupKey>();

    Cursor cursor = null;
        for(int i = 0; i < titleArray.length; i++)
        {
             cursor = db.rawQuery("SELECT * FROM " + titleArray[i] + " WHERE quantity > 0", null);
             if (cursor.moveToFirst()){
                   do{
                       backupKey key = new backupKey(titleArray[i],
                               cursor.getInt(cursor.getColumnIndex("_id")),
                               cursor.getInt(cursor.getColumnIndex("quantity")));
                       bak.add(key);

                   }while(cursor.moveToNext());
                }

        }
        cursor.close();

        myContext.deleteDatabase(DB_NAME);

        try 
        {
            InputStream myInput = myContext.getAssets().open(DB_NAME);

            String outFileName = DB_PATH + DB_NAME;

            OutputStream myOutput = new FileOutputStream(outFileName, false);

            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer))>0){
                myOutput.write(buffer, 0, length);
            }

            myOutput.flush();
            myOutput.close();
            myInput.close();

        } catch (IOException e) 
        {
            Log.w("TaskDBAdapter", "failed");
            throw new Error("Error copying database");

        }

    for (int i = 0; i < bak.size(); i++)
    {

        ContentValues args = new ContentValues();
        args.put("quantity", bak.get(i).quantity);
        String where = "_id = ?";
        String[] whereArgs = {Integer.toString(bak.get(i).id)};
        db.update(bak.get(i).range, args, where, whereArgs);
    }

} //End of onUpgrade 
```

我可以确认 arraylist 已成功填充正确的数据。我之前试图覆盖数据库，但它似乎从来没有工作过。我必须添加 myContext.deleteDatabase(DB_NAME); 在数据库被成功替换的文件写入操作之前。我可以确认我的最终更新迭代没有生成任何奇怪的数据——它具有正确的表名、id 和数量值。

问题是，在我的 onUpgrade 之后数量没有更新。静态数据更新到我的资产文件夹中包含的最新版本，但数量数据没有更新。这是因为我破坏了最初提供给方法的数据库（在这种情况下是“db”参数）吗？这甚至是参数吗？如何在新数据库中更新数据？

另外：如果有更好的方法来解决这个问题，我会全神贯注=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:29:44.900

`onUpgarde()`用于更新数据库结构（添加/重命名列等），而不是实际数据。第一次启动时，您可能希望在实际应用程序中执行此操作。此外，尝试升级用户输入的数据可能不是最好的主意。为什么没有两张表（甚至是数据库）——一张是你提供的数据，一张是用户输入的数据？您可以简单地复制用户编辑的行，并将原始数据保留为只读。

# nginx - 基于 Cloud Foundry 上下文的路由的 nginx 重写规则

> ID：11026624
> 
> 赞同：0
> 
> 时间：2012-06-14T04:22:25.607
> 
> 标签：nginx, cloud-foundry

可以使用 nginx rewrite 执行以下操作：

将 url 从 CTX_URL=http://my-cloudfoundry.com/app/home 转换为 SUB_DOMAIN_URL=http://app.my-cloudfoundry.com/home

my-cloudfoundry 是运行 Nginx 的服务器，它当前可以路由 SUB_DOMAIN_URL，我希望它接受 CTX_URL 并在内部将其转换为 SUB_DOMAIN_URL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:10:35.177

这是完全可能的，事实上我已经在使用 vcap.me 域的本地 CloudFoundry 副本上运行它。

您需要在 server_name 指令下方的 nginx.conf 中添加一个简单的重写规则（在当前的 vcap 安装中，它位于 '~/cloudfoundry/.deployments/devbox/deploy/nginx/nginx-0.8.54/conf'）在服务器块中，插入；

```
if ($host ~* "^vcap.me$"){
  rewrite ^\/([^\/]+)\/?(.*)$ http://$1.vcap.me/$2 break;
  break;
} 
```

显然，您需要将“vcap.me”更改为您在配置中使用的域。

# java - 为什么 Java 不允许在方法中定义枚举？

> ID：11026626
> 
> 赞同：9
> 
> 时间：2012-06-14T04:22:31.393
> 
> 标签：java, methods, enums

> **可能重复：**
> [Java：本地枚举](https://stackoverflow.com/questions/700831/java-local-enums)

为什么我们不能在 java 中的特定方法中定义枚举？如果我有一个场景，我将在一个方法中使用这些枚举值，而不是在任何其他地方。在方法中声明而不是在全局范围内定义它不是很好吗？我的意思是公开或默认。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T04:24:18.163

您不能如[JavaDocs](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9)所述在方法级别进行定义。（我希望看到一种允许这样做的语言）

> 嵌套枚举类型是隐式静态的。可以将嵌套枚举类型显式声明为静态。
> 
> 这意味着不可能定义本地（第 14.3 节）枚举，或在内部类（第 8.1.3 节）中定义枚举。

你可以做什么它在类级别声明它并在方法级别声明一个变量：

```
public class Light {
    ...
    private LightSwitch position;
    private enum LightSwitch {
        On,
        Off
    }
    public void SwitchOn() {
        Switch(LightSwitch.On);
    }
    public void SwitchOff() {
        Switch(LightSwitch.Off);
    }
    private void Switch(LightSwitch pos) {
        position = pos;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T04:30:47.100

来自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9)

> 嵌套枚举类型是隐式静态的。可以将嵌套枚举类型显式声明为静态。
> 
> 这意味着不可能定义本地（第 14.3 节）枚举，或在内部类（第 8.1.3 节）中定义枚举。

而且，它们通常是隐含的最终结果。将枚举作为类的一部分是一般模式，因为它们通常表现为常量。

> 枚举类型是隐式最终的，除非它包含至少一个具有类主体的枚举常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:31:30.140

你不能在方法中定义枚举，但你可以定义类，所以如果你真的希望以这种方式设计你的方法，你可以定义一个本地类对象的数组。

```
public void doSomething() {
    class Country {
        int population = 0;
        String name = null;

        public Country(int population, String name) {
            this.population = population;
            this.name = name;
        }

    }
    Country[] countries = { new Country(85029304, "Germany"), new Country(61492053, "Spain") };
    // do stuff with countries
} 
```

# java - 如何通过传递搜索字符串在浏览器中显示pdf文件，并且需要使用java显示包含突出显示的搜索字符串的第一页

> ID：11026632
> 
> 赞同：3
> 
> 时间：2012-06-14T04:23:05.433
> 
> 标签：java, ajax, lucene, pdfbox

我已经在浏览器中显示了一个 pdf 文件，我正在传递一个搜索字符串，但是它将字符串解析为单词，然后在 pdf 文件中搜索。当我传递搜索字符串时，我希望直接在 pdf 文件中搜索整个字符串

在java中，我为pdf搜索引擎做了一个项目工具，我使用了lucene 3.x和pdfbox0.7，类似于google搜索引擎......

1) 在文本框中输入搜索字符串

2）点击搜索时，它将在pdf文件中搜索并将匹配的结果显示为文件中某些文本的片段，并在结果中以突出显示的单词显示

3) 现在，当用户单击找到的结果时，它应该打开 pdf 文件，并且必须在 pdf 文件中突出显示搜索字符串...

<object data=".<%=filename%>#search=<%=key1%>&view=FitBH,top&toolbar=0" type="application/pdf" width="1350" height="650"> alt : < a href=".<%=filename%>">test.pdf</a> </object>

它在浏览器中显示 pdf 文件，其中突出显示了搜索字符串的单词，但我需要突出显示整个字符串...

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:10:30.900

关于直接在浏览器中显示pdf的部分：你是怎么做的？并非每个人的浏览器中都有 pdf 插件，因此浏览器会提供将 pdf 作为文件下载。发生这种情况时，您无法突出显示 pdf 中的文本。或者你为此使用图书馆？

要在浏览器中显示 PDF，您可以查看[pdf.js](http://mozilla.github.com/pdf.js/)。也许它甚至支持突出显示给定的搜索字符串（即触发 pdf.js 中的搜索）。

# php - php将格式化的int转换为int

> ID：11026640
> 
> 赞同：9
> 
> 时间：2012-06-14T04:24:12.080
> 
> 标签：php, number-formatting

很抱歉问这个问题，但是我找不到一个解决方案可以得到这个 -> 7,000 到 7000。

我正在使用 intval() 和 number_format() 但它只会给我 7 而不是 7000。

```
$myVal = '7,000';
echo intval($myVal); 
```

这返回 7

number_format() 也一样

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T04:43:22.263

如果您使用的是 PHP >= 5.3（或安装了“intl”扩展，至少版本为 1.0），那么您还可以使用[`NumberFormatter`](http://www.php.net/manual/en/class.numberformatter.php)该类来解析特定于语言环境的数字。

```
$myVal = '7,000';
$nf = new NumberFormatter("en_EN", NumberFormatter::DECIMAL);

var_dump($nf->parse($myVal, NumberFormatter::TYPE_INT32));

# output: int(7000) 
```

如果您使用低于 5.3 的 PHP 版本，则最好使用@KevinS。解决方案。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-14T04:28:49.533

`intval()`由于逗号，无法使用您拥有的字符串。您可以使用删除逗号`str_replace()`，然后`intval()`像这样调用：

`echo intval(str_replace(',', '', $myVal))`

# c# - 不同实体类型的 C# IQueryable 定义

> ID：11026644
> 
> 赞同：0
> 
> 时间：2012-06-14T04:24:31.237
> 
> 标签：c#, asp.net, .net, generics, iqueryable

```
//I need to deifne productQuery here
    if (test == true)
    {
      var productQuery = ordersRepository.ProductIn; //it returns IQueryable<ProductIn> type
    }
    else
    {
      var productQuery = ordersRepository.ProductOut; //it returns IQueryable<ProductOut> type
    } 
```

如何定义 productQuery 变量？

谢谢！

[编辑]

```
dynamic productType;

if (test == true)
    {
      productType = ordersRepository.ProductIn; //it returns IQueryable<ProductIn> type
    }
    else
    {
      productType = ordersRepository.ProductOut; //it returns IQueryable<ProductOut> type
    }

var productQuery = productType as IQueryable<ProductIn>;
if (productQuery == null)
{
     productQuery = productType as IQueryable<ProductIn>;
} 
```

我这样做是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T04:27:17.397

如果您可以将类型解析推迟到运行时，您可以将其声明为*动态类型。*

```
dynamic productQuery;
if (test == true)
{
    productQuery = ordersRepository.ProductIn; //it returns IQueryable<ProductIn> type
}
else
{
    productQuery = ordersRepository.ProductOut; //it returns IQueryable<ProductOut> type
} 
```

您的另一个选择是将其声明为*对象*类型，然后根据需要将其转换回其他类型。

```
object productQuery;

if (test == true)
{
    productQuery = ordersRepository.ProductIn; //it returns IQueryable<ProductIn> type
}
else
{
    productQuery = ordersRepository.ProductOut; //it returns IQueryable<ProductOut> type
}

// ... more logic ...
var unboxed = productQuery as IQueryable<ProductIn>;
if (unboxed != null) {
    unboxed.Where( ... and away you go with Linq ...);
} 
```

**操作编辑后更新**

假设您有一个动态类型*productQuery*。要在其上使用 Linq，您需要定义委托的类型。假设*ProductIn*和*ProductOut*类型都有一个字符串类型属性*ProductNo*。然后你可以像这样写你的查询，再次使用*dynamic*。

```
productQuery.Where(new Func<dynamic,bool>(item => item.productNo)); 
```

**但是......**我认为你可以通过改变你的整个方法来让你的生活更轻松。您显然正在针对*ProductIn*和*ProductOut*的通用接口工作，那么为什么不明确定义呢？

```
public interface IProduct
{
    public string ProductNo { get; set; }
}

public class ProductIn : IProduct { ... }
public class ProductOut : IProduct { ... } 
```

现在你的代码变得简单多了。像这样写：

```
IQueryable<IProduct> productQuery;

if (test == true)
{
    productQuery = ordersRepository.ProductIn; //it returns IQueryable<ProductIn> type
}
else
{
    productQuery = ordersRepository.ProductOut; //it returns IQueryable<ProductOut> type
}

string myResult = productQuery.Where(item => item.productNo == productNo).FirstOrDefault(); 
```

# abstract-syntax-tree - 带有等式运算符 (==) 的语句的 AST 节点

> ID：11026648
> 
> 赞同：1
> 
> 时间：2012-06-14T04:25:26.210
> 
> 标签：abstract-syntax-tree, eclipse-jdt

请让我知道带有相等运算符 (==) 的语句将出现在 ASTNode (org.eclipse.jdt.core.dom.ASTNode) 的哪个子类下。

我需要找出代码中使用“==”运算符完成非原始类型（例如：整数）比较的实例。我想确保“==”运算符仅用于原始类型（例如：int）。

我有执行此检查的***Java 代码逻辑（******使用 JDT 库***），但不确定***我必须访问哪种类型的 ASTNode***才能访问此类语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:17:05.043

您需要查找“运算符”为 ==（或 InfixExpression.Operator.EQUALS）的“InfixExpressions”。

请注意，您可以简单地使用[ASTView](http://www.eclipse.org/jdt/ui/astview/index.php)自己找出此类问题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:57:24.257

这完全取决于你。您的 AST 结构如何？

一般来说，这是我会做的：

```
EqualityNode : Node 
{
  Node LHS;
  Node RHS;
} 
```

至于确保语法正确性，那是有人不做的：

`if == else`

在将节点添加到 AST 之前，解析器应该对此进行检查。

# c# - 如何使用列表或数组进行这项工作？

> ID：11026651
> 
> 赞同：-3
> 
> 时间：2012-06-14T04:25:57.663
> 
> 标签：c#, arrays, list, loops

除此之外一切正常： links.Remove(linkToClick) 因为 HtmlElementCollection 没有“删除”方法。

我最近在这里问了一个问题：[如何让循环移动到下一个可用的 id 而不是连续做同样的事情？](https://stackoverflow.com/questions/11025617/how-to-have-loop-move-to-the-next-id-available-rather-than-doing-the-same-contin)

这就是向我推荐的，但在过去的两个小时里我一直在寻找并试图弄清楚，但仍然无法弄清楚。

```
HtmlElementCollection links = null;

private void button2_Click(object sender, EventArgs e)
{
    // This way you only get the links once.
    links = webBrowser1.Document.GetElementsByTagName("a");

    timer1.Start();
}

private void timer1_Tick(object sender, EventArgs e)
{
    HtmlElement linkToClick = null;

    foreach (HtmlElement link in links)
    {
        if (link.GetAttribute("id").Contains("user"))
        {
            linkToClick = link;
            break;
        }
    }

    // did I find a link?
    if (linkToClick != null)
    {
        // Remove it from the list so you don't click it again.
        links.Remove(linkToClick);

        link.InvokeMember("click");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:38:09.733

```
List<HtmlElement> links = null;

private void button2_Click(object sender, EventArgs e)
{
    // This way you only get the links once.
    links = new List<HtmlElement>(webBrowser1.Document.GetElementsByTagName("a")
                                                      .Cast<HtmlElement>());

    timer1.Start();
}

private void timer1_Tick(object sender, EventArgs e)
{
    HtmlElement linkToClick = null;

    foreach (HtmlElement link in links)
    {
        if (link.GetAttribute("id").Contains("user"))
        {
            linkToClick = link;
            break;
        }
    }

    // did I find a link?
    if (linkToClick != null)
    {
        // Remove it from the list so you don't click it again.
        links.Remove(linkToClick);

        linkToClick.InvokeMember("click");
    }
} 
```

我还建议从计时器中停止计时器 if `linkToClick == null`，为什么你不提前过滤列表？

```
links = new List<HtmlElement>(webBrowser1.Document.GetElementsByTagName("a")
                                                  .Cast<HtmlElement>());

links.RemoveAll(link => !link.GetAttribute("id").Contains("user")); 
```

在计时器中：

```
if (links.Count > 0)
{
    links[0].InvokeMember("click");
    links.RemoveAt(0);
}
// else timer.Stop(); 
```

# iphone - iOS核心图形填充路径的反转？

> ID：11026658
> 
> 赞同：2
> 
> 时间：2012-06-14T04:26:42.797
> 
> 标签：iphone, ios, ipad, ios5

我正在使用 CGPathCreateMutable() 和 CGPathAddArcToPoint 绘制自定义形状。正如预期的那样，当我关闭并填充路径时，我得到了刚刚绘制的形状。但是，我要做的是填充我刚刚绘制的路径的倒数。也就是说，如果我绘制了一个圆形路径，我想填充除了我刚刚绘制的这个圆圈之外的所有内容。

有没有办法进行反向填充？或者另一个解决方案是如果可能的话我可以在两条路径之间填充？这样我就可以创建我的边界框的矩形路径，然后在它和我的自定义路径之间填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:41:27.373

如果您绘制路径并使用奇偶 (EO) 填充来填充它们，那应该会得到您想要的（填充内部）。

OSX（和 iPhone）上的默认填充是非零绕组（NZW）填充
您也可以使用非零绕组获得相同的效果，方法是相应地更改不同部分的绕组（“顺时针”参数），但使用奇数会简单很多。

# oauth-2.0 - 访问抄写员代码的 Oauth 时出错

> ID：11026660
> 
> 赞同：0
> 
> 时间：2012-06-14T04:27:12.920
> 
> 标签：oauth-2.0

获取请求令牌...线程“main”中的异常 java.lang.Error：未解决的编译问题：无法解析导入 org.apache Base64 无法解析

```
at org.scribe.services.HMACSha1SignatureService.<init>(HMACSha1SignatureService.java:6)
at org.scribe.builder.api.DefaultApi10a.getSignatureService(DefaultApi10a.java:73)
at org.scribe.oauth.OAuth10aServiceImpl.addOAuthParams(OAuth10aServiceImpl.java:60)
at org.scribe.oauth.OAuth10aServiceImpl.getRequestToken(OAuth10aServiceImpl.java:43)
at org.scribe.examples.DiggExample2.main(DiggExample2.java:36) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:42:25.007

你需要 apache commons-codec jar。我可以从项目的 POM 文件依赖列表中看到它。

```
<dependencies>
    <dependency>
      <groupId>commons-codec</groupId>
      <artifactId>commons-codec</artifactId>
      <version>1.4</version>
    </dependency>

    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.8.1</version>
      <scope>test</scope>
    </dependency> 
```

# sql-server - 在 sql server 2008 存储过程的局部变量中使用 Table 数据类型

> ID：11026662
> 
> 赞同：0
> 
> 时间：2012-06-14T04:27:24.463
> 
> 标签：sql-server, sql-server-2008

我在变量中使用表类型`@temporaltable`

```
FETCH MyCursor Into @temporaltable 
```

但是当我尝试进入 e 领域时，我得到了一个错误......

```
insert into T1 (t1field1,t1field2, t1field3) 
values(@temporaltable.field1, @temporaltable.field2, @temporaltable.field3) 
```

它无法识别`@temporaltable`，我得到了错误

> 必须声明标量变量@temporaltable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:40:16.347

这种语法应该会有所帮助，显然可以替代正确的数据类型、表名和选择语句。

```
DECLARE @myTable TABLE 
( 
    ... 
) 

DECLARE @var1 [DataType]
DECLARE @var2 [DataType]
DECLARE @var3 [DataType]

DECLARE myCursor CURSOR LOCAL FAST_FORWARD FOR
    SELECT ....
    FROM .....
OPEN myCursor

FETCH NEXT FROM myCursor INTO @var1, @var2, @var3

WHILE @@FETCH_STATUS = 0 BEGIN
    INSERT INTO T1 ([Col1], [Col2], [Col3]) VALUES (@var1, @var2, @var3)

    FETCH NEXT FROM myCursor INTO @var1, @var2, @var3
END

CLOSE myCursor
DEALLOCATE myCursor 
```

# ios - 源代码控制误区

> ID：11026670
> 
> 赞同：0
> 
> 时间：2012-06-14T04:28:17.413
> 
> 标签：ios, xcode, git

我在 XCode 中创建了一个新分支来构建一个新功能。在对大量错误感到沮丧之后，我决定切换回我的主分支来处理其他事情。切换后，在我创建新分支之前，我的代码都没有变回原来的状态。

什么？我认为这是源代码控制的重点。我是否误解了这是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:34:23.340

一种方法是在 xcode 分支中提交您的更改。然后签出主分支。不提交更改然后签出另一个分支会带来所述更改。如果要删除 xcode 分支，请执行以下操作： git branch -D xcode

# c++ - QGraphicsScene 类似 removeAt() 和 insert() 函数？

> ID：11026671
> 
> 赞同：2
> 
> 时间：2012-06-14T04:28:18.410
> 
> 标签：c++, qt, qgraphicsitem, qgraphicsscene

我有一个 QGraphicsScene，其中项目的顺序非常重要。我想在项目列表中的某个索引处添加项目（即`items()`调用时返回的列表）。

我知道 QList 具有`removeAt()`and`insert()`功能，但 QGraphicsScene 是否有类似的东西，比如`addItemAt()`所有这些行？如果没有，有没有人知道解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:53:44.697

没有选项可以在插入时指定订单。默认情况下，最近添加的项目将显示在顶部。

在将同级项目（具有相同父项的项目）添加到场景后，您有两个选项来确定它们的堆叠顺序。

1.  指定 Z 值。

2.  更改插入顺序（适用于具有相同 Z 值的项目）。

如果您希望按 Z 值排列，则需要为您的项目分配特定的 Z 值，并在使用[QGraphicsItem::setZValue()](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#setZValue)添加新项目时根据需要重新分配它们。

[或者，您可以通过调用QGraphicsItem::stackBefore()](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#stackBefore)来更改项目的插入顺序。

# google-apps-script - Google Apps 脚本 - submitButton UI 元素 - 发生意外错误

> ID：11026672
> 
> 赞同：0
> 
> 时间：2012-06-14T04:28:34.493
> 
> 标签：google-apps-script

我刚开始使用 gApps 脚本，在尝试设置我的 UI 以在处理任务时禁用提交按钮时，我的代码（如下）遇到了两个问题。

1.  尝试加载脚本时，我偶尔会收到以下错误：“遇到错误：发生意外错误”。这个错误是不一致的，因为我需要做的就是刷新脚本，然后它会为我加载。当我根本没有更改代码时，它有时有效，有时无效，这真的让我很困扰。

2.  当最后第三行`//button_submit.setEnabled(true);`未注释时，每次我尝试加载脚本时都会发生错误。

在试图找出问题所在时，我注意到 getElementById() 似乎没有为提交按钮分配正确的 UI 类型。我不确定这是否是问题的原因，但我怀疑这与我在测试脚本中看到的相同行为不同，我为查看是否可以从更简单的基础复制问题。

如果您对导致此问题的原因提供任何反馈，我将不胜感激。

谢谢

克里斯·BP

```
Logging output

populate_assign_list spinner.getId():spinner
populate_assign_list spinner.getType():Image
populate_assign_list button_submit.getId():button_submit
populate_assign_list button_submit.getType():Generic
doGet button_submit.getId():spinner
doGet button_submit.getType():Image
doGet button_submit.getId():button_submit
doGet button_submit.getType():SubmitButton 
```

.

```
//define global script property variables
var prop_home_folder_id;       //String - Contains the home folder's ID string
var prop_subject_folder_names; //Array of Strings - Listing of folder names
var prop_subject_folder_ids;   //Array of Strings - Listing of folder IDs associated with folder names
var prop_submisison_ss_ids;    //Array of Strings - Losting of sumission spreadsheet IDs
var prop_allow_anon_submit;    //Flag - Allow manual entry of email address (ie. non domain access) Default to FALSE

function save_script_prop_(home_folder_id, subject_folder_names, subject_folder_ids, submisison_ss_ids, allow_anon_submit) {
  //array values must be sent to this function as comma separated strings ie   <array>.join(',')
  if (home_folder_id != null) ScriptProperties.setProperty("home_folder_id", home_folder_id);
  if (subject_folder_names != null) ScriptProperties.setProperty("subject_folder_names", subject_folder_names);
  if (subject_folder_ids != null) ScriptProperties.setProperty("subject_folder_ids", subject_folder_ids);
  if (submisison_ss_ids != null) ScriptProperties.setProperty("submisison_ss_ids", submisison_ss_ids);
  if (allow_anon_submit != null) ScriptProperties.setProperty("allow_anon_submit", allow_anon_submit);
}

function load_script_prop_() {
  /*
  prop_home_folder_id = ScriptProperties.getProperty("home_folder_id");
  prop_subject_folder_names = ScriptProperties.getProperty("subject_folder_names").split(",");
  prop_subject_folder_ids = ScriptProperties.getProperty("subject_folder_ids").split(",");
  prop_submisison_ss_ids = ScriptProperties.getProperty("submisison_ss_ids").split(",");
  prop_allow_anon_submit = ScriptProperties.getProperty("allow_anon_submit");
  //*/
  prop_home_folder_id = "";
  prop_subject_folder_names = ["1","2","3"];
  prop_subject_folder_ids = ["1","2","3"];
  prop_submisison_ss_ids = ["a","b","c"];
  prop_allow_anon_submit = false;
}

function doPost(e) {
  var app = UiApp.getActiveApplication();
   app.add(app.createLabel("Form submitted"));
   return app;
}

function doGet() {
  load_script_prop_();
  var testing_message = "";

  //create ui app and panels
  var app = UiApp.createApplication().setTitle("Assignment Submission");
  var v_panel = app.createVerticalPanel();
  v_panel.setSpacing(20);
  var layout_grid = app.createGrid(5,2);
  var form_panel = app.createFormPanel();
  var tab_panel_upload = app.createTabPanel().setId("tab_panel_upload");
  var v_panel_upload_file = app.createVerticalPanel().setTag(0); //Tag refrenced the number of upload elements currently in the tab
  var v_panel_upload_gdoc = app.createVerticalPanel().setTag(0); //Tag refrenced the number of gdoc elements currently in the tab

  //create menu objects
  var spinner = app.createImage("http://www.worldmsday.org/1000-faces/images/whatami/spinner.gif").setVisible(false).setId("spinner");
  var datebox_submission = app.createDateBox().setId("submission_datebox").setValue(new Date()).setEnabled(false);
  var textbox_user = app.createTextBox().setId("textbox_user").setName("textbox_user").setValue(Session.getUser().getEmail()).setEnabled(false);

  var lb_subject_folder = app.createListBox().setId("lb_subject_folder").setName("lb_subject_folder");
  lb_subject_folder.setVisibleItemCount(1);
  for (var i in prop_subject_folder_names) lb_subject_folder.addItem(prop_subject_folder_names[i], i);
  lb_subject_folder.setSelectedIndex(0);

  var lb_assign_list = app.createListBox().setId("lb_assign_list").setName("lb_assign_list");
  lb_assign_list.setVisibleItemCount(1);
  populate_assign_list();
  lb_assign_list.setSelectedIndex(0);

  var button_submit = app.createSubmitButton("Submit").setId("button_submit");
  Logger.log("doGet button_submit.getId():"+spinner.getId());
  Logger.log("doGet button_submit.getType():"+spinner.getType());
  Logger.log("doGet button_submit.getId():"+button_submit.getId());
  Logger.log("doGet button_submit.getType():"+button_submit.getType());

  //button_submit.setEnabled(false);
  //button_submit.setEnabled(true);

  var upload_1 = app.createFileUpload().setName("upload_1");
  var gdoc_1 = app.createLabel("Not Yet Implemented");

  //create menu handlers
  var handler_lb_subject_folder_spinner = app.createClientHandler().forTargets(spinner).setVisible(true);
  handler_lb_subject_folder_spinner.forTargets([lb_assign_list, tab_panel_upload]).setVisible(false);
  handler_lb_subject_folder_spinner.forTargets(button_submit).setEnabled(false);

  var handler_lb_subject_folder = app.createServerHandler("populate_assign_list").addCallbackElement(v_panel);
  lb_subject_folder.addChangeHandler(handler_lb_subject_folder_spinner);
  lb_subject_folder.addChangeHandler(handler_lb_subject_folder);
  //need to add an onchange handler for subject folder listbox which updates the assignment selection listbox.

  //add ui objects to ui
  layout_grid.setText(0,0, "Date: ");
  layout_grid.setWidget(0, 1, datebox_submission);
  layout_grid.setText(1,0, "Name: ");
  //layout_grid.setWidget(1, 1, "");  
  layout_grid.setText(2,0, "Email Address: ");
  layout_grid.setWidget(2, 1, textbox_user);
  layout_grid.setText(3,0, "Course: ");
  layout_grid.setWidget(3, 1, lb_subject_folder);
  layout_grid.setText(4,0, "Assignment: ");
  layout_grid.setWidget(4, 1, lb_assign_list);
  v_panel.add(layout_grid);

  v_panel.add(spinner);

  v_panel_upload_file.add(upload_1);
  tab_panel_upload.add(v_panel_upload_file, "Upload File");

  v_panel_upload_file.add(gdoc_1);
  tab_panel_upload.add(v_panel_upload_gdoc, "Share gDoc");
  tab_panel_upload.selectTab(0);
  v_panel.add(tab_panel_upload);

  v_panel.add(button_submit);

  form_panel.add(v_panel);
  app.add(form_panel);

  var testing_label = app.createLabel("No Test Output").setStyleAttribute("textAlign", "center");
  if (testing_message != "") debug_label.setText(testing_label);
  app.add(testing_label);

  return(app);
 }

function populate_assign_list(e) {
  load_script_prop_();

  if (e == null) subject_id=0;
    else subject_id = e.parameter.lb_subject_folder;

  var app = UiApp.getActiveApplication();
  var lb_assign_list = app.getElementById("lb_assign_list");
  lb_assign_list.clear();

  var assign_list = ["x","y","z" ];

  for (var i = 1; i < assign_list.length; i++) {
    lb_assign_list.addItem(assign_list[i]  );
  }

  lb_assign_list.setVisible(true);
  var spinner = app.getElementById("spinner").setVisible(false);
  Logger.log("populate_assign_list spinner.getId():" + spinner.getId());
  Logger.log("populate_assign_list spinner.getType():" + spinner.getType());
  app.getElementById("tab_panel_upload").setVisible(true);

  var button_submit = app.getElementById("button_submit");
  Logger.log("populate_assign_list button_submit.getId():"+button_submit.getId());
  Logger.log("populate_assign_list button_submit.getType():"+button_submit.getType());
  //button_submit.setEnabled(true);

  return app; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:39:43.720

分而治之——

我有几次这个错误，我能找到原因的唯一方法是“分而治之”。

...

因为我知道...

A) 相同的对象 ID 用于不同类型的对象，即使旧对象已被移除。

B) 无效的颜色值

C) 使用 createApplication 两次创建应用程序对象

The error looks to be a kind of catch all error message. It also looks to be a client side error, so not sure logging will help.

# php - 仅在部分 PHP 网站上使用 memcached

> ID：11026677
> 
> 赞同：1
> 
> 时间：2012-06-14T04:29:33.370
> 
> 标签：php, mysql, memcached

我有一个使用 PHP 和 mysql 构建的网站，并希望将 memcached 集成到该网站中。

但是我只是考虑将它添加到某些部分（例如在商店中查找产品数量和价格的查询，或用户信息）。

这是明智的还是将 memcached 添加到所有 sql 查询会更好？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:50:20.070

我决定只缓存应用程序中使用最多的重要部分，在[这里查看重要信息](http://papermashup.com/using-memcache-with-php/)并[查看会话](http://orig.keboola.com/blog/php-sessions-with-memcached)

# windows - 服务器管理 - 需要脚本来监控服务器上的可用空间

> ID：11026687
> 
> 赞同：2
> 
> 时间：2012-06-14T04:31:21.373
> 
> 标签：windows, powershell

**需要脚本来监控服务器上**的可用空间，如果可用内存空间完成某个阈值，则**发送警报邮件。**

**PS** - 我认为解决方案将是 Power Shell + Windows Timer Job。不过，我是 Power Shell 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:52:01.093

您需要处理 WMI 对象。

[http://technet.microsoft.com/en-us/library/dd315295.aspx](http://technet.microsoft.com/en-us/library/dd315295.aspx)

可能不需要编写脚本。如果您在 Wk3 Server 上，您可以对卷启用配额管理。W2k8 也将配额管理扩展到卷文件夹。

[http://technet.microsoft.com/en-us/library/cc733029.aspx](http://technet.microsoft.com/en-us/library/cc733029.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T07:00:59.023

您可以使用如下命令获取可用磁盘空间：

```
([wmi]"\\$computer\root\cimv2:Win32_logicalDisk.DeviceID='$drive'").FreeSpace 
```

您可以使用以下功能发送电子邮件：

```
function Send-EMail 
{ 
    param (
        [parameter(Mandatory = $false)][string] $EmailTo = "<Your destination email>",
        [parameter(Mandatory = $false)][string] $EmailFrom = "<The sending email address>",
        [parameter(Mandatory = $false)][string] $EmailSubject = "Disk space problem",
        [parameter(Mandatory = $false)][string] $SMTPServer = "<your smtp server>"
    )

    $MailMessage = New-Object System.Net.Mail.MailMessage  
    $MailMessage.From = ($EmailFrom)  
    $MailMessage.To.Add($EmailTo) 
    $MailMessage.Subject = $EmailSubject 
    $MailMessage.Body = $EmailBody 
    $MailMessage.IsBodyHTML = $true 

    $SMTPClient = New-Object Net.Mail.SmtpClient($SmtpServer, 25)   
    $SMTPClient.Send($MailMessage) 
} 
```

现在将这两个函数组合到一个 PowerShell 脚本中，您可以[使用 Windows 调度程序进行调度](http://www.searchmarked.com/windows/how-to-schedule-a-windows-powershell-script.php)。

# ruby - 如何在升级 ruby 期间解决这些错误？

> ID：11026690
> 
> 赞同：1
> 
> 时间：2012-06-14T04:31:43.717
> 
> 标签：ruby, osx-lion, upgrade

```
Fetching yaml-0.1.4.tar.gz to /Users/dmonkeys/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/dmonkeys/.rvm/src
Error running 'tar xmzf /Users/dmonkeys/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/dmonkeys/.rvm/src ', please read /Users/dmonkeys/.rvm/log/ruby-1.9.3-p194/yaml/extract.log
Configuring yaml in /Users/dmonkeys/.rvm/src/yaml-0.1.4.
Error running ' ./configure --prefix="/Users/dmonkeys/.rvm/usr"  ', please read     /Users/dmonkeys/.rvm/log/ruby-1.9.3-p194/yaml/configure.log
Compiling yaml in /Users/dmonkeys/.rvm/src/yaml-0.1.4.
Error running 'make  -j2', please read /Users/dmonkeys/.rvm/log/ruby-1.9.3-p194/yaml/make.log

Database file /Users/dmonkeys/.rvm/config/packages does not exist.

Installing Ruby from source to: /Users/dmonkeys/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...

ruby-1.9.3-p194 - #fetching 
ruby-1.9.3-p194 - #extracted to /Users/dmonkeys/.rvm/src/ruby-1.9.3-p194 (already extracted)
ruby-1.9.3-p194 - #configuring 
Error running ' ./configure --prefix=/Users/dmonkeys/.rvm/rubies/ruby-1.9.3-p194 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/dmonkeys/.rvm/usr ', please read /Users/dmonkeys/.rvm/log/ruby-1.9.3-p194/configure.log
There has been an error while running configure. Halting the installation.
ruby-1.9.3-p194 is not installed.
Creating alias default for ruby-1.9.3-p194.
Recording alias default for ruby-1.9.3-p194.
Creating default links/files
ruby-1.9.3-p194 is not installed.
Could not load ruby ruby-1.9.3-p194.
/Users/dmonkeys/.rvm/scripts/alias: line 133: /Users/dmonkeys/.rvm/rubies/ruby-1.9.3-p194/bin/ruby: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:50:07.617

确保安装了 Xcode“命令行工具”包。单靠 Xcode 已经不够了。

您可以通过单独下载它们或在管理器中启用该包来完成此操作。

这是安装失败的最常见情况。您没有发布您粘贴的输出中提到的日志内容。

# wpf - 自动提交文件

> ID：11026693
> 
> 赞同：0
> 
> 时间：2012-06-14T04:31:54.430
> 
> 标签：wpf, file-upload, webbrowser-control

我有一个 WPF WebBrowser 应用程序，我想自动在 html 页面上上传文件。我希望这样的事情可能会奏效，但它不会：

```
string _inputId = "File_Input";
string _attrName = "value";
string _attrValue = "C:/MyFile.txt";

((mshtml.IHTMLElement)doc.all.item(_inputId)).setAttribute(_attrName, _attrValue); 
```

我想这与无法在 JavaScript 中设置该值有关。有没有解决的办法？

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-24T09:49:47.450

使用ftp上传文件，不能这样上传。

# git - git命令查找其他人提交和推送的所有文件

> ID：11026694
> 
> 赞同：0
> 
> 时间：2012-06-14T04:31:58.800
> 
> 标签：git, show

> **可能重复：**
> [使用 Git 如何在本地和远程之间找到修改过的文件](https://stackoverflow.com/questions/231211/using-git-how-do-i-find-modified-files-between-local-and-remote)

谁能告诉我 Git 命令可以在我的存储库中查找由其他人提交和推送的所有文件名，而不是由我提取（更新）的文件名。我想在不运行 pull 命令的情况下查看更改的文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:22:05.553

您可以运行`git fetch`which 从远程服务器获取新提交，但它不会进行合并。所以你可以运行这个..

```
git diff master origin/master 
```

您可以通过以下方式获取所有`master`需要成为超集的提交的 git 日志`origin/master`

```
git log master origin/master 
```

反之亦然，通过改变`master`和 `origin/master`位置

# php - 会话变量不传递到其他页面

> ID：11026698
> 
> 赞同：2
> 
> 时间：2012-06-14T04:32:33.483
> 
> 标签：php, session-variables

我的本地主机上有一个站点，我正在使用会话变量。

这是我为用户名定义会话变量的第一页：Newcust.php

```
<?php 
session_start();
?>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>

<?php

$mysqli = mysqli_connect("localhost", "root", "", "bms");

if (mysqli_connect_errno())
{
    printf("Connection Failed: %s\n", mysqli_connect_errno());
    exit();
}

else

$_Session ['uname'] = $_POST['uname'];
$pword = $_POST['pword'];
$enc = sha1($pword); 
```

在同一页面上回显会话变量会返回正确的用户名。当我尝试在站点的下一页上使用 $_Session ['uname'] 变量时，它根本没有注册。

插入客户.php

```
<?php 
session_start();
echo "hello " .$_Session ['uname'];
?> 
```

这可能是服务器问题吗？我在我的 macbook 上运行 Apache，还没有遇到 php 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:35:27.690

它是`$_SESSION`，你有`$_Session`哪个是不正确的

# php - 我如何在 Pyrocms 中扩展 Codeigniter 库

> ID：11026701
> 
> 赞同：0
> 
> 时间：2012-06-14T04:32:47.303
> 
> 标签：php, facebook, codeigniter, pyrocms

我想在基于 codeigniter 的 Pyrocms 中添加更多库和帮助文件。实际上我必须添加 facebook connect 并找到一些 facebook connect 的良好工作示例，所以现在我想在 Pyrocms 中实现这些 codeingiter 库和其他文件。让让我知道将这些库放在哪里。您的帮助将是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:16:43.970

从 1.3.0 版`addons/default/libraries` 或`addons/shared_addons/libraries`专业版开始。（这一点将有助于在哪里放置东西主题...... [http://www.pyrocms.com/docs/1.3/manuals/developers/understanding-the-addons-directory](http://www.pyrocms.com/docs/1.3/manuals/developers/understanding-the-addons-directory)）

然后在您的控制器中加载 lib 等，`$this->load->library('cool_facebook_connect_lib');` 并且，根据您的版本，您可能需要在 MY_loader 中更改几行才能使其工作，[http: //www.pyrocms.com/forums/topics/view/18087](http://www.pyrocms.com/forums/topics/view/18087)

# gps - 如何在 Arduino 的库中使用多个软件序列？

> ID：11026702
> 
> 赞同：1
> 
> 时间：2012-06-14T04:32:48.457
> 
> 标签：gps, serial-port, arduino

我目前正在做一个项目，我将 GPS 模块、数字罗盘和[ZigBee](http://en.wikipedia.org/wiki/ZigBee)（[XBee](http://en.wikipedia.org/wiki/XBee)调制解调器）连接到 Arduino。顺便说一句，我使用[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29) IDE 来做这个项目，所以我把我的代码分解成几个库。

XBee 目前使用硬件[UART](http://en.wikipedia.org/wiki/Universal_asynchronous_receiver/transmitter)并且工作正常。GPS 模块和数字罗盘都使用软件串行。

我的问题是，如果我实例化两个软件序列号，则只有最新的序列号可以工作。

下面是我的示例代码。

```
void CSensor::initSensors()
{
    //For GPS
    this->gpsSerial = new SoftwareSerial(2, 3);
    this->gpsSerial->begin(9600);

    //For digital compass
    this->compassSerial = new SoftwareSerial(6, 7);
    this->compassSerial->begin(9600);
} 
```

**`gpsSerial`被声明为`CSensor`类的指针成员。-> `SoftwareSerial* gpsSerial`; `compassSerial`也被声明为相同->`SoftwareSerial* compassSerial;`**

在上面的示例代码中，只有数字罗盘可以工作，GPS 不能工作。但是，如果我交换代码的位置，使其看起来像这样：

```
void CSensor::initSensors()
{
    //For digital compass
    this->compassSerial = new SoftwareSerial(6, 7);
    this->compassSerial->begin(9600);

    //For GPS
    this->gpsSerial = new SoftwareSerial(2, 3);
    this->gpsSerial->begin(9600);
} 
```

GPS 现在可以工作，但数字罗盘不能。我认为软件序列号有问题。解决办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:18:02.483

一个问题：您是否考虑过在您的项目中使用 Arduino Mega？使用此板，您可以获得 4 个（真正的）硬件 UART，这对于您的目的应该足够了。

使用“软件串行”库太棘手了。在某些情况下它可能工作得很好，但与普通串口相比有很大的局限性，而且很可能会导致数据丢失。

在管理多个串行设备时，我不建议您花更多时间在“串行仿真”上。只需使用更好的微控制器，仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:59:44.730

您的 SoftwareSerial 很好。就像 jdh 说的，Arduino 一次只能读取一个软件序列。但如果您使用的是 Sparkfun GPS，您实际上可以将 UART 用于 GPS（通过使用 UART/Dline 开关并将 RX/TX 引脚编号分别从 2、3 更改为 0 和 1）。

为此，请将开关保持在 dline 上并上传代码。在此之后将其更改回 UART，以便 Arduino 可以从 GPS 读取。这将工作得很好。

有关更多详细信息，请查看 GPS 教程的 UART 部分。 [http://www.sparkfun.com/tutorials/173](http://www.sparkfun.com/tutorials/173)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:51:58.480

根据[Ardiuno 文档](http://arduino.cc/en/Reference/SoftwareSerial)：

> 该库具有以下已知限制：
> 
> 如果使用多个软件串口，一次只能接收一个数据。

所以看起来你必须添加代码才能在每个软件序列的采样之间切换。我知道 GPS 每隔一秒就会广播一次。所以也许在获得有效的 GPS 读数后，断开它，然后观察指南针，直到下一个预定的 GPS。一个研究问题是初始化事物并保持代码足够高效需要多长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T18:36:32.387

您应该从 GPS 接收器读取一行文本，然后使用`this->compassSerial->listen()`切换回指南针，然后切换回 GPS。您会丢失一些报告，但这可能不是您的限制条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T00:12:50.520

设置使用哪个 SoftwareSerial 端口来侦听

```
mySerial.listen() 
```

这意味着您必须在设置后等待消息到达`listen()`。通过检查来做到这一点`mySerial.available()>0`

缺点是您会错过来自其他设备的消息，因此良好的程序设计变得非常重要。但我相信你知道:)

# testng - 使用 testNG 和 Data Providers 参数化数据和对象名称

> ID：11026707
> 
> 赞同：1
> 
> 时间：2012-06-14T04:33:34.900
> 
> 标签：testng, testng-dataprovider

我正在尝试创建一个混合框架，我将从 Excel 表中传递对象名称和相应的值。这是我想做的

```
FieldName   Type   Value1   Value2  Value3  
FName       Edit   John     Smith   Carla    
LName       Edit   Fellow   Carson  Black    
Submit      Link   Click    Click   Click 
```

*   字段名称：包含用于标识对象的 Xpath 或 ID
*   类型：包含类型，如文本框或列表框等，以便我可以使用 IF 循环相应地处理对象的每个 TYPE。
*   值 1..3..：我想要运行测试（对象）的不同值。

我该如何使用数据提供程序来执行此操作，因为理想情况下，当我使用不同的数据值时，前 2 列需要保持不变。此外，数据提供者似乎正在逐行读取数组。抱歉，如果这是一个基本问题，我是 testNG 的新手，听说过一些很棒的事情，想去看看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:17:10.120

数据提供者返回对您有用的任何数据，因此您只需考虑如何将此电子表格转换为您的测试方法将接受的对象。例如，如果您希望测试每列采用一个参数：

```
@Test(dataProvider = "dp")
public void f(String fieldName, String type, String value1, String value2, String value3) {
  // test
}

@DataProvider
public Object[][] dp() {
  // read the spreadsheet
  return new Object[][] {
    new Object[] { fieldName, type, value1, value2, value3 },  // row 1
    new Object[] { fieldName, type, value1, value2, value3 },  // row 2
  }
} 
```

# java - 在ddd实践中，CRUD方法是否应该放在Model Objects中

> ID：11026708
> 
> 赞同：4
> 
> 时间：2012-06-14T04:33:35.413
> 
> 标签：java, domain-driven-design, crud

我正在尝试实践领域驱动设计，代码的基本结构包括以下对象：

```
Action->Facade->
Service
Model
Repository 
```

您认为应该将 CRUD 方法放在 Model 中的什么位置，如下所示：

```
order.save(new order()) 
```

或者像下面这样放在门面：

```
addOrderFacade.save(new order()) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T06:35:46.813

“保存”或“删除”方法属于存储库。通常保存由服务或命令处理程序调用（如果您使用基于命令的方法来更新域）。从 CRUD 中保存句柄 CU，D 有自己的方法，R 部分是有趣的部分。

当 R 表示“GetEntity”以便更新它时，它可以是域存储库的一部分（有超过 1 个存储库），在与保存相同的位置处理。

但是，如果您想阅读以显示，基本上只是将结果返回给用户的查询，则应使用专用于查询的不同存储库以及简化的只读模型。可以从控制器甚至 UI 调用此 repo。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T04:35:13.913

我建议不要将它们放在域类中，因为，

您的域类包可以在其他应用程序的某个地方重用，您的 DAO 层会有所不同，因此最好在 DAO 模型上创建另一个层

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T07:21:04.590

惯例是将 CRUD 方法放在存储库或服务层而不是模型中。事实上，当使用 Spring 或 Hibernate 等框架时，您会被诱使使用这种方法。仅出于这个原因，它通常更容易：

*   其他开发者期待它
*   框架支持它
*   教程和示例假设它

然而，从设计的角度来看，有充分的理由反对这种方法。它导致了一个[贫乏的领域模型](http://en.wikipedia.org/wiki/Anemic_domain_model)，换句话说，对象只有状态而没有行为（结构），公平地说，它不是非常面向对象的。需要通过视图、控制器、服务和存储库层传递大量数据，并且需要大量“开销”代码来将状态和行为结合在一起。对规范模型层缺乏关注也可能导致团队之间的模型不匹配、碎片化。

试图避免这种设计陷阱的方法通常被称为[领域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)，由 Eric Evans 定义。请注意，在 DDD 中，仍然有服务和存储库的位置，来自 Wikipedia 页面：

*   服务：当操作在概念上不属于任何对象时。遵循问题的自然轮廓，您可以在服务中实现这些操作。服务概念在 GRASP 中称为“Pure Fabrication”。
*   Repository：检索域对象的方法应委托给专门的 Repository 对象，以便可以轻松地互换替代存储实现。
*   工厂：用于创建领域对象的方法应该委托给专门的工厂对象，以便可以轻松地互换替代实现。

如果您有兴趣，请查看支持 DDD的[软件工具和（就在下方）DDD 示例应用程序。](http://en.wikipedia.org/wiki/Domain-driven_design#Software_tools_to_support_domain-driven_design)

# jquery - 在 jQueryMobile 的页面转换期间出现股票行

> ID：11026716
> 
> 赞同：0
> 
> 时间：2012-06-14T04:34:32.373
> 
> 标签：jquery, mobile, jquery-mobile, transitions

我正在使用 jQueryMobile 开发移动网页。我发现在页面转换过程中总是有一条线`(at the bottom ~40px)`，尤其是在`slideup`转换时。

例如，当使用 调用`$.mobile.changePage()`新页面时`slideup`，将显示一个空白页面，中间底部有一条股票线，然后页面转到显示的新页面。没有功能故障只是看起来很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:16:33.553

我之前遇到过这个问题，尝试从stackoverflow和github上搜索答案。但是我没有找到一个非常完美的解决方案。

最后我尝试使用一些技巧来解决这个问题。

关于线路：

默认情况下，jquery mobile ui-mobile 类或任何其他类将网页最小高度设置为 460px。所以我将最小高度设置为 460+ 或更高。然后白线会消失。

关于页面闪烁或闪烁：

通常我们会像这样编写 jquery 移动网络应用程序：

```
page1: 
<body>
  <div>...All Main Content Here</div>
</body>

page2:
<body>
  <div>...All Main Content Here</div>
</body> 
```

但我这样改变它：

```
page1:
<body>
  <div id="page1">
    <div>...All Main Content here</div>
  </div>
</body>

page2:
<body>
  <div id="page2" style="display:none">
    <div>...All Main Content here</div>
  </div>
</body> 
```

并且在每次页面转换后调用一个函数：

```
setTimeout(function(){ $("#page2").css("display","block"); } , 80 ); 
```

你会发现一切都很好。

# session - 有没有办法直接向用户提供 s3 文件，其 url 不能共享？

> ID：11026719
> 
> 赞同：4
> 
> 时间：2012-06-14T04:34:59.267
> 
> 标签：session, authentication, amazon-s3, amazon-web-services, amazon

我正在为 S3 上的网站存储一些文件。目前，当用户需要文件时，我会创建一个过期的签名 url（查询字符串身份验证）并将其发送到他们的浏览器。但是，他们可以在到期前与其他人共享此 URL。

我想要的是某种身份验证，以确保 url 只能在经过身份验证的用户浏览器中使用。

我已经通过使用我的服务器作为亚马逊和用户之间的中继实现了一种方法，但更愿意将用户直接指向亚马逊。

有没有办法在用户浏览器中创建某种会话 cookie，然后让亚马逊在提供文件之前期望该会话 cookie？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:48:02.147

单独使用 S3 是不可能的，但 CloudFront 提供了此功能。请查看文档中的这一章：[使用签名 URL 服务私有内容](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/PrivateContent.html)。

# objective-c - 防止 UISearchDisplayController 隐藏 UiTable

> ID：11026720
> 
> 赞同：1
> 
> 时间：2012-06-14T04:35:03.060
> 
> 标签：objective-c, uisearchdisplaycontroller

我是 objC 的新手，我目前正在尝试 UISearchDisplayController。基本上我有一个字符串数组作为我的数据，我使用 UISearchBarDisplayController 来过滤我的数据。当我在搜索栏中输入我的 searchText 时，我能够检索到正确的值。但是，当我的 searhBar 文本为空时，tableView 会消失。

在这种情况下是否可以防止 tableView 隐藏。如果 searchBar 文本为空，我想要的只是在表中显示我的数组中的所有值。

我检查了表格的 hidden/alpha/frame 属性并试图在这里解决我的问题，但我认为我在这里走错了路。我在想是否需要继承 UISearchDisplayController 并覆盖 [setActive:YES animated:YES];？任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:32:43.930

您应该收到搜索参数的任何更改的事件，包括字符串为空时。

如果更改该委托方法的实现以检查字符串是否为空，则可以返回原始数据而不是过滤后的数据。这应该可以实现您的要求，而无需子类化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:51:11.090

我最终使用了 UISearchBar 和 UITable。所以这里是我遇到的场景。

1.  单击 searchBar 时显示 UITable。
2.  当 searchText 为空时，UITable 会显示我的 plist 中的所有数据。
3.  UITable 显示我的 plist 中与 searchText 匹配的过滤结果。
4.  按下搜索按钮时关闭键盘，但不要禁用搜索栏上的取消按钮。
5.  按下取消按钮时删除 UITable。

我现在没有显示表格的动画，但这对我有用。此外，我允许用户在搜索期间在我的表格上进行交互和滚动，因此在这种情况下不需要覆盖。很高兴它现在工作。:)

我为可能需要的人创建了一个示例项目。这是[链接](https://github.com/shoktong29/TheSearchBar.git)。为混乱的代码和泄漏问题道歉。刚发这个分享一下。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T10:06:40.130

您可以尝试在搜索文本字段中始终保留零空格宽度的字符：

```
static NSString* zsp = @"\u200B";

//In the UISearchBarDelegate

- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if(searchBar.text.length == 1 && [text isEqualToString:@""])
    {
        searchBar.text = zsp;
        return NO;
    }

    return YES;
} 
```

# mysql - 当我尝试定义 MySQL 表时，请帮助解决语法错误

> ID：11026728
> 
> 赞同：0
> 
> 时间：2012-06-14T04:35:44.523
> 
> 标签：mysql

错误是这样的；

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''order'(
 orderID VARCHAR(6) NOT NULL DEFAULT 0,
 orderDate DATE NOT NULL DEFAUL' at line 1 
```

我的 DDL 是这样的：

```
CREATE TABLE 'order'(
orderID VARCHAR(6) NOT NULL DEFAULT 0,
orderDate DATE NOT NULL DEFAULT 1,
claimCondition VARCHAR(30) NOT NULL DEFAULT ''
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:40:41.823

名称*order*是保留字，因此您必须将表命名为其他名称。此外，值 1 不是*date*类型的有效默认值。

这有效：

```
CREATE TABLE order1 (
    orderID VARCHAR(6) NOT NULL DEFAULT 0,
    orderDate DATE NOT NULL,
    claimCondition VARCHAR(30) NOT NULL DEFAULT ''
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:46:13.723

您不能将默认值 1 分配给日期字段，因为数据类型是日期，所以默认值必须是日期值（使用默认日期或当前日期）

```
 create table orders(orderId varchar(6 ) NOT NULL DEFAULT 0,order_Date DATE NOT NULL DEFAULT "0000-00-00",claimCondition VARCHAR(30) NOT NULL DEFAULT ''); 
```

上面的查询正在工作，知道日期字段没有默认值

请参阅此链接，您将了解数据类型及其默认值 [http://kimbriggs.com/computers/computer-notes/mysql-notes/mysql-data-types-50.file](http://kimbriggs.com/computers/computer-notes/mysql-notes/mysql-data-types-50.file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:44:15.377

```
CREATE TABLE `order`(
`orderID` VARCHAR(6) NOT NULL DEFAULT 0,
`orderDate` TIMESTAMP  NOT NULL DEFAULT CURRENT_TIMESTAMP,
`claimCondition` VARCHAR(30) NOT NULL DEFAULT ' '
); 
```

# java - 在按钮操作上将背景图像添加到 JPanel

> ID：11026731
> 
> 赞同：0
> 
> 时间：2012-06-14T04:36:02.107
> 
> 标签：java, swing, jpanel, actionlistener

调用 JButton 时将背景图像添加到 JPanel/JLabel 的最佳方法是什么？我知道如何获得 JButton 动作等。当按下该按钮时，我只是无法弄清楚或找到一种方法来更改背景图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T04:58:03.463

这是一个例子：

![在此处输入图像描述](../Images/9fc2a01856cc01333f5b41258cced885.png)

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.URL;
import java.util.concurrent.ExecutionException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;

public class ModifiableBackgroundFrame extends JFrame implements ActionListener
{
    private static final long serialVersionUID = 1L;
    private ImageIcon image;
    private JPanel pan;
    private JButton btn;
    private int count = 0;
    private static final String[] images = 
        {"http://www.dvd-ppt-slideshow.com/images/ppt-background/background-3.jpg",
        "http://www.psdgraphics.com/wp-content/uploads/2009/02/abstract-background.jpg",
        "http://hdwallpaperpics.com/wallpaper/picture/image/background.jpg",
        "http://www.highresolutionpics.info/wp-content/uploads/images/beautiful-on-green-backgrounds-for-powerpoint.jpg"};

    public ModifiableBackgroundFrame()
    {
        super("The title");

        image = new ImageIcon();

        btn = new JButton("Change background");
        btn.setFocusPainted(false);
        btn.addActionListener(this);
        pan = new JPanel()
        {
            private static final long serialVersionUID = 1L;

            @Override
            public void paintComponent(Graphics g)
            {
                g.drawImage(image.getImage(), 0, 0, null);
            }
        };
        pan.setPreferredSize(new Dimension(400, 400));

        Container contentPane = getContentPane();
        contentPane.setLayout(new BorderLayout());
        contentPane.add(pan, BorderLayout.CENTER);
        contentPane.add(btn, BorderLayout.SOUTH);

        pack();
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new ModifiableBackgroundFrame();
            }
        });
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        btn.setEnabled(false);
        btn.setText("Loading...");
        new SwingWorker<Image, Void>()
        {
            @Override
            protected Image doInBackground() throws Exception
            {
                return ImageIO.read(new URL(images[count++ % 4]));
            }

            @Override
            protected void done()
            {
                try
                {
                    image.setImage(get());
                    pan.repaint();
                }
                catch(InterruptedException e)
                {
                    e.printStackTrace();
                }
                catch(ExecutionException e)
                {
                    e.printStackTrace();
                }
                btn.setText("Change background");
                btn.setEnabled(true);
            }
        }.execute();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:04:12.477

在您的 JButton 中`actionPerformed`，您可以调用[JLabel.setIcon(Icon)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#setIcon%28javax.swing.Icon%29)来设置背景图像。

```
final JLabel label = new JLabel();
button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        label.setIcon(new ImageIcon(SOME_IMAGE));
    }
} 
```

# java - Java Netbeans GUI builder制作可执行jar

> ID：11026732
> 
> 赞同：1
> 
> 时间：2012-06-14T04:36:08.003
> 
> 标签：java, user-interface, netbeans, executable, builder

因此，由于 Netbeans 生成的 jar 需要它也生成的 lib 文件夹，我该如何将 lib 文件夹添加到生成的 jar 并更改 Manifest 以便它在不使用任何命令行的情况下启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:15:12.653

> ..所以它在没有任何命令行使用的情况下启动？

如果它有 GUI，请使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)启动它。

> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、*桌面集成*¹、文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、架构或 Java 版本划分本地和其他资源下载，运行时环境配置（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

1.  *桌面集成*：支持平台上的桌面快捷方式和菜单项 - 不再基于命令行启动！

请参阅[在 NetBeans IDE 中启用 Java Web Start](http://netbeans.org/kb/docs/java/javase-jws.html)以开始使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:15:46.867

虽然有很多方法可以做到这一点，但它们大多涉及到 Ant build.xml 的修改。[这](http://java.sun.com/developer/technicalArticles/java_warehouse/single_jar/)是迄今为止我发现的最好的教程。仅供参考，还有其他非常相似的 SO 问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T05:16:17.253

NetBeans IDE 自动处理所有这些。

1.  新项目 -> Java / Java 桌面应用程序
2.  按下一步，填写所有内容并选中“使用专用文件夹存储库”，按完成
3.  转到文件视图，双击 build.xml 并从“Ant 目标”列表中找到“jar”目标，右键单击“运行目标”。
4.  这样，生成的 .jar 文件将包含所有依赖项并具有带有 Main-Class 集的清单：

    ```
    Manifest-Version: 1.0
    Ant-Version: Apache Ant 1.8.1
    Created-By: 1.6.0_26-b03 (Sun Microsystems Inc.)
    Main-Class: desktopapplication1.DesktopApplication1
    Class-Path: lib/appframework-1.0.3.jar lib/swing-worker-1.1.jar 
    ```

已编辑：这不会将库打包到 .jar 中，而是将它们放在旁边的单独库中。见@user845279

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T05:03:29.677

I ended up using ninjacave.com/jarsplice to compile it all (libraries included) into one executable jar. (I got an error with the background color being the default color even though I had set it to a different color, so I modified the code that jarsplice uses to launch your program using java rather than the path to java)

# google-apps-script - 如何停用 Gmail 计量器电子邮件？

> ID：11026733
> 
> 赞同：10
> 
> 时间：2012-06-14T04:36:35.527
> 
> 标签：google-apps-script

如何停用谷歌应用程序脚本：activityReport。我试用了 gmail 仪表，最后删除了 google docs 中的文档。现在，每天晚上我都会收到一份报告，见下文：

Ihr Skript, Gmail Meter, konnte nicht erfolgreich fertiggestellt werden。Unten finden Sie eine Zusammenfassung der Fehler。Klicken Sie hier, um die Trigger für dieses Skript zu konfigurieren oder Ihre Einstellung für den Empfang künftiger Benachrichtigungen zu ändern。

“ 细节：

Beginn Funktion Fehlermeldung Auslöser Ende 14.06.12 01:15 activityReport Leider ist ein Serverfehler aufgetreten。Warten Sie eine Weile und versuchen Sie es später erneut。基于时间的 14.06.12 01:15 Mit freundlichen Grüßen

Google Apps 脚本"

如何取消激活此功能？

问候罗兰

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-14T05:38:51.323

打开任何 Google 电子表格，然后打开脚本编辑器，转到“资源”>“触发器”>“所有触发器”>，然后删除名为“活动报告”的那个，它每天在凌晨 1 点到凌晨 2 点之间运行。就是这样。

编辑：这是一个[指向 Romain Vialard 说明的链接](http://blog.gmailmeter.com/2016/uninstalling-the-legacy-gmail-meter-script/)，它清楚地解释了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-01T16:34:28.977

这是我第一次注册 Gmail Meter 时收到的卸载链接。我最近用它来卸载，删除应用的权限和触发：

[https://script.google.com/macros/d/MVg3JbkghVMfVvxN1M5l0HJrpgLqM6szJ/manage/uninstall](https://script.google.com/macros/d/MVg3JbkghVMfVvxN1M5l0HJrpgLqM6szJ/manage/uninstall)

我猜每个人的宏 URL 都是一样的，但如果它对你不起作用，请告诉我，我会删除这个答案，以免造成混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-08T16:21:31.090

对于旧版 Gmail Meter 带来的不便，我们深表歉意。由于缺乏对 Apps 脚本平台的支持，我们实际上已经弃用了该版本的工具。卸载这个版本主要分为三个步骤，上面已经介绍了第三个：

# 撤销脚本对您帐户的访问权限

首先是通过访问您的 Google 帐户页面来撤销 Gmail Meter 的权限，在左侧的登录和安全部分下方选择连接的应用程序和站点。在下一页上，单击管理应用程序以查看授权的应用程序。

从此列表中，您将能够找到 Gmail Meter 访问您帐户的授权。要撤消访问权限，只需单击“删除”按钮。

# 删除 Gmail Meter Drive 文件

撤销旧版 Gmail Meter 的授权后，下一步是删除存储在 Google Drive 根文件夹中的名为“Gmail Meter Data – Do not delete”的文件。此文件是您帐户的原始数据在分析之前存储的位置。还要确保清空云端硬盘中的垃圾箱以确保完全卸载。

# 停用您帐户上的脚本触发器

最后，您需要删除在您的 Google 帐户中仍处于活动状态的脚本触发器。脚本触发器对于 Apps 脚本至关重要，并确定脚本何时运行。原始注册电子邮件很有帮助，因为它包含一个删除这些脚本触发器的按钮。

另一种方法是按照以下说明手动删除与 activityReport 关联的所有脚本触发器。为此，请执行以下操作：

1.  以隐身模式打开浏览器（对于 Chrome，请按 CTRL+SHIFT+N）。
2.  转到[https://script.google.com](https://script.google.com)并登录您的 Google 帐户。
3.  单击“编辑”，然后从下拉菜单中选择“所有触发器”。
4.  如果系统提示您“编辑项目名称”，任何名称都可以，只需单击“确定”即可。
5.  给系统一点时间来保存新项目。
6.  然后，您应该会在您的 Google 帐户中看到所有处于活动状态的 Apps 脚本触发器的列表。删除所有标记为“activityReport”的触发器。

再次感谢您的支持和理解。

# c# - 列表中的错误 .InsertRange()，还是设计决策？

> ID：11026735
> 
> 赞同：3
> 
> 时间：2012-06-14T04:36:46.973
> 
> 标签：c#, .net, list, frameworks, implementation

`List<T>.InsertRange()`当我注意到一个奇怪的特性时，我正在阅读 .NET 4.0 框架中的代码。这是供参考的代码：

```
 public void InsertRange(int index, IEnumerable<T> collection) {
        if (collection==null) { 
            ThrowHelper.ThrowArgumentNullException(ExceptionArgument.collection);
        } 

        if ((uint)index > (uint)_size) {
            ThrowHelper.ThrowArgumentOutOfRangeException(ExceptionArgument.index, ExceptionResource.ArgumentOutOfRange_Index); 
        }
        Contract.EndContractBlock();

        ICollection<T> c = collection as ICollection<T>; 
        if( c != null ) {    // if collection is ICollection<T>
            int count = c.Count; 
            if (count > 0) { 
                EnsureCapacity(_size + count);
                if (index < _size) { 
                    Array.Copy(_items, index, _items, index + count, _size - index);
                }

                // If we're inserting a List into itself, we want to be able to deal with that. 
                if (this == c) {
                    // Copy first part of _items to insert location 
                    Array.Copy(_items, 0, _items, index, index); 
                    // Copy last part of _items back to inserted location
                    Array.Copy(_items, index+count, _items, index*2, _size-index); 
                }
                else {
                    T[] itemsToInsert = new T[count];
                    c.CopyTo(itemsToInsert, 0); 
                    itemsToInsert.CopyTo(_items, index);
                } 
                _size += count; 
            }
        } 
        else {
            using(IEnumerator<T> en = collection.GetEnumerator()) {
                while(en.MoveNext()) {
                    Insert(index++, en.Current); 
                }
            } 
        } 
        _version++;
    } 
```

特别要注意，_version 总是在函数结束时递增。这意味着在对 InsertRange 的任何非异常调用中，正在进行的列表枚举将失效，**即使列表没有更改。** 例如，以下代码抛出：

```
static void Main(string [] args) {
    var list = new List<object>() {1, 2 };

    using(var enumerator = list.GetEnumerator()) {
    if(enumerator.MoveNext())
        Console.WriteLine(enumerator.Current);

    list.InsertRange(1, new object[]{});

    if(enumerator.MoveNext()) // ** InvalidOperationException
        Console.WriteLine(enumerator.Current);
    }
} 
```

修改方法以使枚举不会以这种方式无效，根本不会增加执行时间，因为代码已经检查了`count`. 可以改写如下：

```
public void InsertRange(int index, IEnumerable<T> collection) {
    if (collection==null) { 
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.collection);
    } 

    if ((uint)index > (uint)_size) {
        ThrowHelper.ThrowArgumentOutOfRangeException(ExceptionArgument.index, ExceptionResource.ArgumentOutOfRange_Index); 
    }
    Contract.EndContractBlock();

    ICollection<T> c = collection as ICollection<T>; 
    if( c != null ) {    // if collection is ICollection<T>
        int count = c.Count; 
        if (count > 0) { 
            EnsureCapacity(_size + count);
            if (index < _size) { 
                Array.Copy(_items, index, _items, index + count, _size - index);
            }

            // If we're inserting a List into itself, we want to be able to deal with that. 
            if (this == c) {
                // Copy first part of _items to insert location 
                Array.Copy(_items, 0, _items, index, index); 
                // Copy last part of _items back to inserted location
                Array.Copy(_items, index+count, _items, index*2, _size-index); 
            }
            else {
                T[] itemsToInsert = new T[count];
                c.CopyTo(itemsToInsert, 0); 
                itemsToInsert.CopyTo(_items, index);
            } 
            _size += count;
            _version++;
        }
    } 
    else {
        var inserted = false;

        using(IEnumerator<T> en = collection.GetEnumerator()) {
            while(en.MoveNext()) {
                inserted = true;
                Insert(index++, en.Current); 
            }  
        }

        if (inserted) _version++; 
    } 
} 
```

`IEnumerable`它的唯一缺点是额外的局部变量（可能会被 JIT 到寄存器中），工作集中可能增加 20 个字节，以及插入s时额外的 CPU 工作量无关紧要。如果需要避免额外的 bool 或循环分配，则`IEnumerable`可以将 s 的插入执行为

```
if(en.MoveNext()) {
    Insert(index++, en.Current); 
    _version++;
}

while(en.MoveNext()) {
    Insert(index++, en.Current); 
} 
```

所以...

**.NET 实现是预期的行为，还是错误？**

**编辑：**

我意识到，如果您在一个线程上枚举同时修改另一个线程上的线程，那么您做错了什么。根据文档，这些情况下的行为是未定义的。但是，`List<T>`在这些情况下，程序员是否会帮上忙并引发异常。我不是在问是否`List<T>`正确遵循了文档：确实如此。我问的是它的实现方式是否不是微软的意图。

如果`InsertRange()`行为符合预期，则`List<T>`行为不一致。该`RemoveRange()`方法仅在实际删除项目时使枚举无效：

```
static void Main(string [] args) {
    var list = new List<object>() {1, 2 };

    using(var enumerator = list.GetEnumerator()) {
    if(enumerator.MoveNext())
        Console.WriteLine(enumerator.Current);

    list.RemoveRange(1, 0);

    if(enumerator.MoveNext()) // ** Does not throw
        Console.WriteLine(enumerator.Current);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:06:32.617

我猜这是故意的。C# 遵循“成功的坑”设计——他们希望不容易*出错*。

最终，现有设计使分析该方法的使用变得更加容易。我的意思是什么？好：

您引用的示例是微不足道的，一眼就能看出它并没有真正修改列表。但在几乎所有真实世界的代码中，情况并非如此。插入的序列几乎肯定是动态创建的，并且可能是几乎随机的空序列。空序列真的应该表现不同吗？如果插入的序列是空的，你的代码就可以工作，但是当你把真实的东西放在那里的那一刻，ka-boom。

想象一下，如果您首先编写此代码并且您的所有序列都是空的；看起来它有效。然后，一段时间后，您有一个非空插入。现在你得到了例外。插入问题和检测到问题之间的距离可能非常大。

随着它抛出任何成功的调用，该故障模式变得更容易检测到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:45:21.840

大概是故意的吧。调用函数插入项目时的想法是修改列表。列表最终未被修改的情况是一个例外，但目的是修改它。我想这里的意图很重要。如果有人`InsertRange`在同时迭代列表的同时调用，那么已经存在概念问题。

就我个人而言，我更喜欢这里的 Java 集合框架——`ListIterator`该类可以通过自己的`Add`,`Set`和`Remove`方法修改列表。即使是将军`Iterator`也可以从迭代集合中删除项目。但据我所知，Java 还将迭代器本身以外的任何修改尝试视为使（列表）迭代器无效的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:55:32.760

这里的想法是，您不应该在修改列表时编写从列表中读取的代码，即使您的调用实际上并未修改列表，也可能会出现不同的调用。每次都简单地使列表无效是最安全的，即使有时它可能效率较低。

# android - 无法在未调用 Looper.prepare() 的线程内创建处理程序 - 后台服务

> ID：11026736
> 
> 赞同：0
> 
> 时间：2012-06-14T04:36:51.170
> 
> 标签：android

我的应用程序想要将数据上传到后端。上传功能可用 2 个地方。一种是在放发票后，它需要上传到后端而不影响其他 UI，这意味着如果用户点击按钮需要上传，通过`Service`另一个上传功能将向用户显示所有表格，通过.`Upload``AsyncTask`

现在的问题是，如果我调用相同的上传表方法，那么它就会出现`can't create handler inside thread that has not called looper.prepare()`这个错误。

```
06-14 09:53:52.504: W/System.err(2288): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
06-14 09:53:52.514: W/System.err(2288):     at android.os.Handler.<init>(Handler.java:152)
06-14 09:53:52.514: W/System.err(2288):     at android.app.Activity.<init>(Activity.java:714)
06-14 09:53:52.514: W/System.err(2288):     at xont.ventura.controller.syn.UploadActivity.<init>(UploadActivity.java:43)
06-14 09:53:52.514: W/System.err(2288):     at xont.ventura.controller.service.UploadService.uploadUsingService(UploadService.java:102)
06-14 09:53:52.514: W/System.err(2288):     at xont.ventura.controller.service.UploadService$ServiceThread.run(UploadService.java:3872) 
```

我的代码是：

```
 @Override
public void onStart(Intent intent, int startid) {
    Toast.makeText(this, "Upload Service Started", Toast.LENGTH_LONG).show();
    if(! APPURL.equals("")){
        serviceThread = new ServiceThread();
        serviceThread.start();
        if(result.equals("The operation timed out")) {
            Toast.makeText(this,"Service is not working  OR Time out to Connect to service !!!!!!!",Toast.LENGTH_LONG).show();
        }
    }else{
        Toast.makeText(this, "GPRS/WIFI is not available", Toast.LENGTH_LONG).show();
    }
    Log.d(TAG, "onStart");
}

    private class ServiceThread extends Thread {
    @Override
    public void run() {
         result = uploadUsingService();
    }   
};

    public String uploadUsingService(){
    uploadTable = getUploadTable();
    String result = "";
    try {
      //  dbAdapter.openDataBase();
        if(uploadTable.size() > 0){
            for (Map.Entry<Integer, String> entry : uploadTable.entrySet()) {
                String value = entry.getValue();
                if(value.equals("WMInvoiceHeader")){
                    result = new UploadActivity().getInvoiceHeader();
                }else if(value.equals("WMInvoiceLine")){
                    result = new UploadActivity().getInvoiceLine();
                }else if(value.equals("WMInvoiceHeaderDiscount")){
                    result = new UploadActivity().getInvoiceHeaderDiscount();
                }else if(value.equals("WMInvoiceSpecialDiscount")){
                    result = new UploadActivity().getInvoiceSpecialDiscount();
                }else if(value.equals("WMInvoiceCancelHeader")){
                    result = new UploadActivity().getInvoiceCancelHeader();
                }else if(value.equals("WMInvoiceCancelLine")){
                    result = new UploadActivity().getInvoiceCancelLine();
                }else if(value.equals("WMTransactionControl")){
                    result = new UploadActivity().getTransactionControl();
                }else if(value.equals("WMVisitDetail")){
                    result = new UploadActivity().getVisitDetail();
                }
                if(result.equals("The operation timed out")) break;
            }
        }
        //Toast.makeText(this, "Upload Service End", Toast.LENGTH_LONG).show();

    } catch (Exception e) {
        e.printStackTrace();
    }

    return result;
} 
```

这里的问题是调用`new UploadActivity().functionname`如果我在同一个类中编写这个函数。它没有任何问题。喜欢`getInvoiceCancelLine()`。如果我这样写，那么有两个地方必须写上传功能方法。我怎样才能重复使用相同的方法 2 地方。

请帮我解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:44:12.853

你想在 mainActivity 中运行另一个线程，我们需要一个 Handler 来处理它。

查看[链接](http://developer.android.com/reference/android/os/Handler.html)

我认为它对你有帮助。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:46:29.853

> java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

通常是在您尝试对非 UI 线程上的 UI 元素执行操作时引起的。

您只显示了代码片段。所以不能肯定地评论您在哪里犯了错误。但请确保您没有尝试访问或修改 ServiceThread 中的 UI 元素。

如果您可以向我们显示更多代码，我们可以为您提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:55:16.167

UI 线程（事件线程）不是线程安全的，所以你不能对 UI 进行任何操作到另一个线程。通过查看您的代码，您似乎正在对方法进行一些 UI 操作

```
getUploadTable() 
```

您可以在另一个线程之外调用此方法，然后将结果传递给 ServiceThread。

# jquery - jQuery 选择器查找 td 的内容

> ID：11026738
> 
> 赞同：3
> 
> 时间：2012-06-14T04:37:15.733
> 
> 标签：jquery

我的 HTML 结构如下所示：

```
<div id="mainDiv">
<table></table>
<table></table>
<table>
<tr>
<td id="first">FirstCell</td><td id="second">SecondCell</td>
</tr>
<tr>
<td></td><td></td>
</tr>
</table>
</div> 
```

现在我想根据第一个 td 的值找到第二个 td 的内容。

我试过跟随但似乎没有用。

```
$("#mainDiv tr td:contains('first')").each(function(){
                var secondCell = $(this).find('#second').value();
            }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:42:58.733

根据您的 html 结构，您可以像这样实现您想要的

```
$("#mainDiv tr td:contains('First')").each(function(){
                var secondCell = $(this).next().text();
                console.log(secondCell);
            });​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/uBQuy/)

就像@Blender 所说`.value()`的不是函数，[`.text()`](http://api.jquery.com/text/)而是使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:43:09.060

value 不是有效的方法。

您应该根据要求使用其中之一。

```
.html()  // for html content.
.text()  // for text content.
.val()   // for value attribute. Like value of input element. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:39:05.163

`.value()`不是函数。您可能正在寻找`.text()`.

查看您的结构，我看到您正在寻找`#second`相对于`#first`. 是否有多个元素`id="second"`？如果是这样，您将在使用 jQuery 时遇到*很多*麻烦，因为该`id`属性对于单个元素来说是唯一的。如果该属性用于标识多个元素，则应该使用`class`而不是。`id`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T04:43:20.247

当您使用`each`时，应该使用类名而不是 id，试试这个：

```
$("#mainDiv tr td:contains('first')").each(function(){
    var secondCell = $(this).siblings('.second').text();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T04:53:35.473

当您说查找时，您的意思是使用正则表达式吗？或通过/与第一个的关系。

如果通过关系，那么这将起作用

```
$("#mainDiv tr td:contains('first')").each(function(){
            var secondCell = $(this).next().html();
        }); 
```

.text() 有时比 .html() 更好，具体取决于您在做什么。有关工作示例和更多信息，请参见[此处。](https://stackoverflow.com/questions/1910794/jquery-text-vs-html)

如果使用正则表达式，您必须在第一个`<td>`.

# mysql - 如何从相关子查询中获取“COUNT”？

> ID：11026744
> 
> 赞同：1
> 
> 时间：2012-06-14T04:38:42.250
> 
> 标签：mysql, sql

我有一个看起来像的查询..

```
SELECT id_b FROM id_table
WHERE id_a = ?
AND (
       SELECT COUNT(*) AS rowCount FROM other_table
       WHERE id = id_b
     )  > 0; 
```

我将如何检索值 rowCount？

编辑：这是一个 MYSQL 数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:58:57.257

```
Select A..., Z.RowCount
From id_table As A
    Cross Join  (
                Select Count(*) As RowCount
                From other_table
                Where id_b = ?
                ) As Z
Where A.id_a = ?
    And Z.RowCount > 0 
```

**编辑**

鉴于您的编辑，我猜您正在尝试实现类似于：

```
Select A..., Z.RowCount
From id_table As A
    Join    (
            Select id_b, Count(*) As RowCount
            From other_table
            Group By id_b
            ) As Z
        On Z.id_b = A.id_b
Where A.id_a = ?
    And Z.Cnt > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:43:03.513

你可以试试：

```
SELECT (
       SELECT COUNT(*) AS rowCount FROM other_table
       WHERE id_b = ?
     ) AS rowCount, id_b FROM id_table
WHERE id_a = ?
AND (
       SELECT COUNT(*) AS rowCount FROM other_table
       WHERE id_b = ?
     )  > 0; 
```

这将在 SQL Server 中工作

# php - set a class property as a float or decimal value when being echo'd

> ID：11026748
> 
> 赞同：0
> 
> 时间：2012-06-14T04:39:06.883
> 
> 标签：php

i'm curious how something like this would work

```
class Test
{
    public $price;
}

$obj = new Test();
$obj->price = 4500.00;

echo $obj->price; 
```

how can I return that value as `4500.00` and not `4500`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:40:49.863

```
echo number_format($obj->price,2); 
```

If you don't what the thousands seperator:

```
echo number_format($obj->price,2,'.',''); 
```

See [number_format](http://php.net/manual/en/function.number-format.php)

# wpf - 如何在 WPF RichTextBox 中将空格呈现为点？

> ID：11026751
> 
> 赞同：19
> 
> 时间：2012-06-14T04:39:17.470
> 
> 标签：wpf, fonts, whitespace

当您选择显示不可打印字符时，我需要渲染常规空格、不间断空格和一些其他格式字符（如从左到右标记）的方法，例如 MS Word 渲染它们。

我尝试了两种方法：

1）用很少使用的字符替换字符。它有效，但在这种情况下，我们失去了不可破坏空间的“非破坏”行为（并且 LTR 和 RTL 标记也停止工作）

2）使用自定义字体

它允许保留不间断空格和 LTR/RTL 标记的特殊行为，但出于某种奇怪的原因，WPF 会使用通常的空格字形呈现不间断空格。

WinForms RichTextBox 正确呈现具有相同字体的文本。

这个问题可以通过为空格和不间断空格应用具有不同空格字形的不同字体来解决，但是即使我为它们添加字形，也根本不会渲染 LTR 和 RTL 标记。

你有什么想法我可以用可见的字形渲染这些字符，保留它们的“LTR”、“RTL”、“不间断”行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:18:22.840

直到现在我还没有尝试过类似的事情，但我可以想到两个选择：

**警告 -> 我没试过**

## 第一种方法：

1.  创建 UIElement 的子类
2.  使用 ControlTemplate 获取 Richtextbox 的样式并将其添加到 App.xaml
3.  从 RichTextBox ControlTemplate 在 Scrollviewer 的内部面板中添加子类 UIElement 的实例
4.  通过 ControlTemplate 中的 DataBinding（如果可能）或任何其他完成工作的方式，使 RTBox 可用于您的类中的依赖项属性
5.  在您的 UIElement 子类中，您遍历文档的字符
6.  在您的装饰器中为您遇到的每个空间和 LineBreak 绘制一个符号
7.  使用 RichTextBox 获取特定位置的字符的 Rect。使用此矩形放置符号。

这种方法的优点是您有一个清晰的分隔并且不需要子类化 RTFBox，但是您将无法操纵间距的宽度来为更大的符号腾出空间。此外，其他开发人员需要知道他们需要该样式才能获得该功能。

## 第二种方法：

1.  创建自定义装饰器
2.  用自定义装饰器装饰 RTBox
3.  从装饰器，您应该能够访问子 RTBox
4.  在您的 UIElement 子类中，您遍历文档的字符
5.  在 UIElement 中为遇到的每个空格和 LineBreak 绘制一个符号
6.  我记得有可能使用 RichTextBox 在特定位置获取字符的 Rect。使用此矩形放置符号。

它也没有继承 RTBox。您也无法调整间距。与方法 1 相比，其他开发人员会立即意识到已添加此功能。一个缺点是您也必须处理滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:48:48.587

将所有值存储为其特殊字符。听起来您的打印功能需要处理a）用户想要什么样的输出，b）解释您的数据数组/大量字符串并吐出与用户想要看到的内容有关的值。你没有提供太多关于你的东西如何存储的细节，但这将是一种非常合理的处理方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T07:56:13.023

您可以尝试在 LTR/RTL 可见字形附近插入而不是替换它。

# testflight - TestFlight 用户多次要求安装应用

> ID：11026753
> 
> 赞同：0
> 
> 时间：2012-06-14T04:39:37.400
> 
> 标签：testflight

这是我的 iPad Beta 测试人员使用 Testflight 安装新版本时发生的情况。他们...

1.  删除他们 iPad 应用程序的当前版本。
2.  通过 TestFlight 电子邮件在他们的 iPad 上安装应用程序的新版本。
3.  打开应用程序。

然后会出现一个 Testflight 屏幕，说明有该应用程序的新版本，并询问他们是否要安装它。如果用户重新安装应用程序，当他们打开应用程序时会再次出现相同的屏幕。

他们已经安装了新版本。这是一个Testflight错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:23:36.593

有关通过切换服务解决的相关问题，请参阅我在[无法使用 TestFlight 安装 xCode 4.3 beta 应用程序的答案。](https://stackoverflow.com/questions/11023757/)

# sql - 链接两个数据库表

> ID：11026755
> 
> 赞同：1
> 
> 时间：2012-06-14T04:40:13.747
> 
> 标签：sql, database

一个非常快速的问题。是否有一个主要功能是持有两个外键的表的术语？例如，如果我有两个表，user 和 group，是否有一个官方术语来表示包含 user_id 和 group_id 的“membership”表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:41:50.713

这是一个支持多对多关系的交集表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:49:13.813

解决多对多的链接/交叉表。例如，如果一辆汽车可以有多个司机，而一个司机可以有多个汽车，您将使用链接表来解决多对多关系。我在 OmniGraffle 中画了一个示例 ERD 作为说明：

![示例 ERD](../Images/da3df14e34def5a7ae52e9ea66804f17.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T04:46:10.187

正如 Stefan 已经回答的那样：这种情况有链接/插入表。他们将映射多对多关系，因为数据库中没有其他可能性。您只需创建一个表“UserGroup”和两列用于特定 id 的主键和外键。

# applescript - 使用现有轨道使用 AppleScript 设置轨道图稿

> ID：11026756
> 
> 赞同：0
> 
> 时间：2012-06-14T04:40:14.613
> 
> 标签：applescript, itunes, automator, itunesartwork

我正在尝试制作一个使用 AppleScript 的 Automater 工作流程。工作流获取两个轨道并将它们传递给以下脚本：

```
on run {input, parameters}
     set artwork of item 1 of input to artwork of item 2 of input
     return input
end run 
```

我试图让脚本从一首曲目中获取艺术品并将其应用于另一首曲目。但是，运行时出现以下错误：

> 发生描述符类型不匹配。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:29:46.990

您必须指定应用程序。尝试这个 ：

```
on run {input, parameters}
    if (count input) > 1 then
        set t2 to (item 2 of input)
        tell application "iTunes"
            if artworks of t2 is not {} then
                set data of artwork 1 of (item 1 of input) to (get raw data of artwork 1 of t2)
            end if
        end tell
    else
        display dialog "Select two tracks first..." buttons {"OK"} cancel button 1
    end if
    return input
end run 
```

# javascript - 将文本框输出转换为单引号而不是双引号

> ID：11026761
> 
> 赞同：1
> 
> 时间：2012-06-14T04:40:51.657
> 
> 标签：javascript, json, jqplot

在将文本框中的字符串输入提供给 Json 变量的键时，在 firebug 中，我发现该值被双引号括起来。我可以避免这种情况并让我的字符串被单引号包围吗？

我在使用 [jqplot](http://www.jqplot.com)时得到了这个需求，它用于渲染图形。[在配置 jqpot 选项时，jqplot选项](http://www.jqplot.com/docs/files/jqPlotOptions-txt.html)中的一些值（如 options.axesDefaults.tickOptions.mark 等） 要求将值括在单引号中。我需要根据用户输入设置这些选项。

任何人都可以为我提供解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:46:39.027

尝试：

```
var someVal = "\"test\""
// Global search for " and replace with ' in supplied string
var quoteReplacedVal = someVal.replace(/\"/g,"'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:43:45.597

单引号分隔的字符串不是有效的 JSON。看起来您有一个 JavaScript 对象，它不是 JSON。

在 JavaScript 中，单引号和双引号没有区别。

您链接的示例*不需要*单引号，它只是在示例中有它们。

# cakephp - 使用 CakePHP 获取关联模型的 HABTM 值的更简洁方法

> ID：11026762
> 
> 赞同：1
> 
> 时间：2012-06-14T04:41:28.983
> 
> 标签：cakephp, cakephp-2.0, has-and-belongs-to-many

我有以下设置：

型号：用户

型号：客户

用户 hasAndBelongsToMany 客户

客户端 hasAndBelongsToMany 用户

数据库表：

用户

*   ID
*   很多领域

客户

*   ID
*   很多领域

客户_用户

*   ID
*   client_id
*   用户身份
*   地位

一切都很好，但我想知道是否有更好的方法来使用我的客户端模型获取状态字段（与 HABTM 表相关联）。

这是我正在做的事情：

客户端控制器.php

```
public function view($id = null) {
    $this->Client->id = $id;
    if (!$this->Client->exists()) {
      throw new NotFoundException(__('Invalid client'));
    }

    $this->Client->contain('User.id');
    $this->Client = $this->Client->read(null, $id);
    $this->set('client', $this->Client);

} 
```

我的 $this->Client 上的 var_dump 如下所示：

```
array
  'Client' => 
    array
      'id' => string '1' (length=1)
      'first_name' => string 'Matt' (length=4)
      'last_name' => string 'Moses' (length=4)
      'address_1' => string '123 S Happy Lane' (length=16)
      'address_2' => string '' (length=0)
      'city' => string 'Yourtown' (length=5)
      'state' => string 'TX' (length=2)
      'zip' => string '12345' (length=5)
      'phone_home' => string '8014567899' (length=10)
      'phone_work' => string '8014567899' (length=10)
      'phone_cell' => string '8014567899' (length=10)
      'email' => string 'matt@matt.com' (length=13)
      'created' => string '2012-06-13 04:41:19' (length=19)
      'modified' => string '2012-06-13 04:41:19' (length=19)
'User' => 
  array
    0 => 
      array
        'id' => string '1' (length=1)
        'ClientsUser' => 
          array
            ... 
```

客户/view.ctp

```
...
<?php echo $client['User'][0]['ClientsUser']['status']; ?>
... 
```

对我来说，最后一行尖叫“有一种更清洁的方式”，但我似乎找不到任何关于此事的信息。有什么想法吗？

# ruby-on-rails-3 - 如果我的查询在模型中，Kaminari 不起作用

> ID：11026766
> 
> 赞同：3
> 
> 时间：2012-06-14T04:42:18.950
> 
> 标签：ruby-on-rails-3, pagination, mongoid, kaminari

我在模型中有我的 mongoid 查询

```
def self.get_result collection_name, hash_params, page, per_page 
  self.collection_name = collection_name
  @result_pg = self.where(hash_params).page(page).per(per_page)
end 
```

我把它放在这里是因为我的集合名称是作为参数传递的，而且我的所有集合都没有模型。相反，我有一个模型，我根据请求参数动态设置它的名称。

我的控制器代码

```
Collection.get_result params[:state], hash_param, params[:page], params[:per] 
```

我的查看代码

```
<%= paginate @result_pg %> 
```

当我使用上面的代码时，我得到

```
undefined method `current_page' for nil:NilClass   ERROR 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:44:40.630

我认为当您在模型中调用它时，该变量正在丢失。相反，让它像这样将对象返回给您：

```
return self.where(hash_params).page(page).per(per_page) // put this in your model 
```

然后，我是控制器，连接各个部分：

```
@result_pg = Collection.get_result params[:state], hash_param, params[:page], params[:per] 
// in your controller like so 
```

现在，控制器没有设置@result_pg，这就是为什么它是 nil 并且你得到 nil 错误。试试这个，让我知道这是否适合你。

**更新**

好的，至于发生这种情况的原因。当 Rails 加载控制器时，您使用 @ 符号声明的变量`@bologna`将被传递给视图，并使用它们完成某些操作。

另一方面，从技术上讲，您并没有在控制器中声明和实例化该变量，而是根据您上面发布的源代码在模型中执行此操作。可以在那里声明变量，但它没有用，因为控制器甚至不知道它发生了。当你告诉类集合执行一个方法时，通常你让那个方法返回一些东西给你，如果你不这样做，那么变量就会丢失。

这类似于我要求某人去商店给我买一些杂货，你做了正确的事情，给方法提供了它需要的所有信息，传递给它正确的变量以正确地完成它的工作，但实际上并没有告诉它和他们一起回来，就是错误发生的地方。在您的方法中，杂货在商店购买并留在那里。我为您编写的修改后的函数告诉它与杂货一起返回并将它们放入变量中`@result_pg`。变量在 Controller 中声明，就像它应该的那样。

所以简而言之，任何你想在视图中访问的东西，都需要在控制器中声明。并且无论何时你想从一个方法中返回一些东西，总是让它返回信息给你。

此外，甚至不需要对类集合进行方法调用。在我自己使用 Kaminari 的项目中，我只是简单地从控制器中进行整个调用，如下所示：

```
@notes = current_user.notes.page params[:page]
// My Application has :users that have_many :notes 
```

因此，如果您愿意，您可以以这种方式简化它，但我建议的按照您的方式修复它的方法也可以，但您更喜欢。

我希望我的解释有所帮助，并且不要太啰嗦。

# iphone - Array1 添加到 Array2 然后 Array1 被清除并突然从 Array2 中消失

> ID：11026767
> 
> 赞同：0
> 
> 时间：2012-06-14T04:42:19.500
> 
> 标签：iphone, objective-c, arrays

我在这里发生了这种奇怪的事情，每次 if 语句发生时，都应该将 tempArray 添加到 masterArray 中。（if 语句完美运行，并在它应该被触发时被触发。）

我还需要每次清除临时数组。

然后我的最终结果应该是一个包含它添加的每个数组的主数组。（意味着我在整个 for 循环中添加的所有临时数组）

相反，它每次只在索引 0 处将 tempArray 添加到 MasterArray。

**代码：**

```
- (void)alpabetize:(NSArray *)arr {

self.tempArray = [[NSMutableArray alloc] init];
self.masterArray = [[NSMutableArray alloc] init];

for (int i = 0; i<[arr count]; i++) {

    NSString *currentString = [NSString stringWithFormat:@"%@", [[[arr objectAtIndex:i] valueForKey:@"first_name"] substringToIndex:1]];
    NSString *nextString = [NSString stringWithFormat:@"%@", [[[arr objectAtIndex:(i+1)] valueForKey:@"first_name"] substringToIndex:1]];

    [self.tempArray addObject:[arr objectAtIndex:i]];

    if (![currentString isEqualToString:nextString]) {

    [self.masterArray addObject:tempArray];
    [self.tempArray removeAllObjects];

    }

}

} 
```

如果您从先前添加到其他数组的原始数组中删除所有对象。这是否也清除了另一个数组？这对我来说毫无意义。我的代码一定有问题。有人可以帮我发现我的错误吗？

感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:49:34.227

利用

```
[self.masterArray addObject:[tempArray copy]]; // retained copy of array 
```

或者

```
[self.masterArray addObject:[NSArray arrayWithArray:tempArray]]; // auto released copy of array 
```

代替

```
[self.masterArray addObject:tempArray]; 
```

在您的代码中，您正在添加您在下一条语句中清除的同一数组的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T04:55:13.103

```
[self.masterArray addObjectsFromArray:tempArray];
[tempArray removeAllObjects]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:50:47.617

您确定要在循环内释放 self.tempArray 吗？一旦它进入您的 IF 条件，该数组将为零，除非您再次调用此方法，否则您将无法使用它。尝试在 for 循环之后释放 self.tempArray。

# php - 使用面向对象的概念更新数据库上的值

> ID：11026774
> 
> 赞同：0
> 
> 时间：2012-06-14T04:43:09.677
> 
> 标签：php, oop

> **可能重复：**
> [使用面向对象编程将值插入数据库](https://stackoverflow.com/questions/11027619/inserting-values-into-database-using-object-oriented-programming)

我对 PHP 中面向对象的概念非常陌生。我一直在尝试使用面向对象的概念将表单的值插入数据库。我没有收到任何错误消息，但数据库中的值没有得到更新。

请看一下代码，让我知道我应该做哪些更改才能使其正常工作。

输入.php

```
<html>
<body>
<form action="database.php" method="post">
Name : <input type ="text" name = "name"/>
Number  :<input type ="text" name = "number"/>
<input type ="submit" value = "submit"/>
</form>
</body>
</html> 
```

数据库.php

```
<?php
class Database
{
    var $host;
    var $user;
    var $pass;
    var $data;
    var $con;
    var $table;
    var $db;

    public function hostname()
    {
        $this->host="localhost";
    }
    public function username()
    {
        $this->user="cgiadmin";
    }
    public function password()
    {
        $this->pass="cgi";
    }
    public function databasename()
    {
        $this->data="j2";
    }
    public function connection()
    {
        $this->con="mysql_connect($this->host,$this->user,$this->pass)";
    }
    public function tablename()
    {
        $this->table="Insert into table(name,number) values('$_POST[name]','$_POST[number]')";
    }
    public function databaseconnection()
    {
        $this->db="mysql_select_db($this->data,$this->con)";
    }
    public function mysql_close()
    {
    }
}
$name=new Database;
$name->connection();
$name->databaseconnection();
$name->tablename();

echo "thanks for taking the survey";
$name->mysql_close();
?> 
```

请让我知道需要做的更改。谢谢你 。

编辑

我做了一些改变，但它似乎仍然没有用。请帮忙

```
<?php
class Database
{
    var $host;
    var $user;
    var $pass;
    var $data;
    var $con;
    var $table;
    var $db;

    public function controls()
    {
        $this->host="localhost";
        $this->user="cgiadmin";
        $this->pass="cgi";
        $this->data="j2";
    }

    public function connection()
    {
        $this->con="mysql_connect($this->host,$this->user,$this->pass)";
    }
    public function tablename()
    {
        $this->table="Insert into employee(name,number) values('$_POST[name]','$_POST[number]')";
    }
    public function databaseconnection()
    {
        $this->db="mysql_select_db($this->data,$this->con)";
    }

}
$name=new Database;
$name->connection();
$name->databaseconnection();
$name->tablename();

echo "thanks for taking the survey";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:52:18.360

尝试改变

```
$this->table="Insert into table(name,number) values('$_POST[name]','$_POST[number]')"; 
```

像这样的东西

```
$this->table="Insert into sometable(name,number) values('$_POST[name]','$_POST[number]')"; 
```

确保您的数据库也已更新。

看起来**table**不是表的有效名称。它是一个 SQL 关键字。

而且您没有调用任何[mysql_db_query](http://www.php.net/manual/en/function.mysql-db-query.php)函数或等效函数。

编辑：

mysql_db_query 已弃用。使用给定链接中的替代方法。

# javascript - jQuery 的 .load() 是否总是自动执行脚本？

> ID：11026777
> 
> 赞同：0
> 
> 时间：2012-06-14T04:43:20.160
> 
> 标签：javascript, jquery

我注意到如果你`.load(url)`和 url 是一个包含脚本的页面，这些脚本会自动执行。有没有办法在`.load(url)`不执行脚本的情况下调用，然后再执行它们？即使我在`.load(url)`尚未附加到文档的元素上使用了它们，它们似乎也会执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:50:57.517

jQuery`load()`检查`script`块并执行它们（通过它的 DOM 操作帮助代码）。

您可以请求页面，`$.ajax()`然后使用该`html()`方法设置 HTML - 不要使用`append()`，因为它也会执行`script`块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T04:52:45.190

我相信你可以使用`.get()`. [http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

例如：

```
$.get('test.html', function(data) {
  // HTML text is now in data variable
  // If we use .html() the scripts are then executed.
  $('.result').html(data);
}); 
```

此外，来自`.load()`文档（[http://api.jquery.com/load/](http://api.jquery.com/load/)）：

> 当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。

# amazon-ec2 - 无法将图像添加到 AWS Autoscale 启动配置

> ID：11026786
> 
> 赞同：3
> 
> 时间：2012-06-14T04:44:19.370
> 
> 标签：amazon-ec2, amazon-web-services, ec2-ami

我正在使用以下命令来设置 AWS 启动配置：

```
as-create-launch-config test1autoscale --image-id ami-xxxx --instance-type m1.small 
```

其中 ami-xxxx 是我通过 Web 控制台从我的实例中获得的图像 ID。我收到以下错误：

```
Malformed input-AMI ami-xxxx is invalid: The AMI ID 'ami-xxxx' does not exist 
```

我已经三次检查图像 ID 是否与实例图像 ID 匹配。我的可用区是 ap-southeast-1a。如果它不接受我希望添加到自动缩放组的实例的图像，我不清楚要求什么图像

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T07:30:00.883

尝试将区域端点（因为默认情况下它正在查看 us-east-1 端点）添加到您的配置命令，然后它应该可以工作：

```
as-create-launch-config test1autoscale --region ap-southeast-1 --image-id ami-xxxx --instance-type m1.small 
```

另请参阅：[区域和端点 - Amazon Web Services Glossary](http://docs.amazonwebservices.com/general/latest/gr/rande.html#as_region)

# iphone - 如何使用 unicode 将十字符号显示为上标？

> ID：11026788
> 
> 赞同：0
> 
> 时间：2012-06-14T04:44:22.240
> 
> 标签：iphone, unicode

我想在上标的位置显示一个十字，我知道十字的 unicode 字符（\u2020）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:57:11.950

Unicode 编码纯文本。上标不是纯文本，因此您需要在纯文本之外或“之上”的内容。例如，在网页上，您可以使用 CSS 将字符定位在基线之上（并减小字体大小）。在文字处理器中，您将使用上标命令或样式。

在 Unicode 中，上标字符的数量是有限的，即上标样式的字符变体编码为单独的字符，例如上标两个“²”。但是 Unicode 通常没有上标机制。

# java - 在 SPARQL 中组合多组行

> ID：11026790
> 
> 赞同：7
> 
> 时间：2012-06-14T04:44:38.647
> 
> 标签：java, sparql, jena

由于我的英语不好，我无法正式描述我的问题；让我用一个例子来告诉它。下表实际上是按“主语”、“谓语”分组的。

我们在行上定义一个集合，如果它们是相同的“主题”。现在我想组合任何两个集合，如果它们包含相同的“谓词”，将相同“谓词”的“计数”相加，并计算具有相同集合的不同主题的数量。

```
subject    predicate    count
-----------------------------
s1           p1           1
s1           p2           2
s2           p1           3
s3           p1           2
s3           p2           2 
```

因此，从这张表中想要的是两组：

```
{2, (p1, 3), (p2, 4)}, 
{1, (p1,3)} 
```

其中，在第一组中，2 表示有两个对象（s1 和 s3）拥有该组；(p1,3) 是 (s1, p1, 1) 和 (s3, p1, 2) 的总和。

那么如何检索这些集合并将它们存储在 Java 中呢？

*   我怎样才能使用 SPARQL 做到这一点？

*   或者，首先将这些三元组存储在 Java 中，然后如何使用 Java 获取这些集合？

* * *

一种解决方案可能是 concat 谓词和计数，

```
SELECT (COUNT(?s) AS ?distinct)
?propset
(group_concat(?count; separator = \"\\t\") AS ?counts)
{
    SELECT ?s 
    (group_concat(?p; separator = \" \") AS ?propset)
    (group_concat(?c; separator = \" \") AS ?count
    {
        ?s ?p ?c        
    } GROUP BY ?s ORDER BY ?s
} GROUP BY ?propset ORDER BY ?propset 
```

然后可以将计数解耦，然后求和。它在小型数据集上运行良好，但非常耗时。

我想我会放弃这个奇怪的问题。非常感谢您的回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T09:00:17.670

让我们从

```
select ?predicate (sum(?count) as ?totalcount) 
{
    ?subject ?predicate ?count
}
group by ?predicate 
```

这是基本位，但分组不正确（现已澄清）。

分组变量应该是这样的（希望这是正确的语法）：

```
select ?subject (group_concat(distinct ?p ; separator = ",") AS ?propset)
{
    ?subject ?p ?c
}
group by ?subject 
```

我希望这给了：

```
subject    propset
------------------
s1          "p1,p2" 
s2          "p1"  
s3          "p1,p2" 
```

所以最终的查询应该是：

```
select ?predicate (sum(?count) as ?totalcount) 
{
    ?subject ?predicate ?count .
    {
        select ?subject (group_concat(distinct ?p ; separator = ",") AS ?propset)
        {
            ?subject ?p ?c
        }
        group by ?subject
    }
}
group by ?propset ?predicate 
```

那样有用吗？

# sql-server-2008 - 不使用命令将数据插入 SQL 表

> ID：11026791
> 
> 赞同：0
> 
> 时间：2012-06-14T04:45:07.577
> 
> 标签：sql-server-2008, ssms

我使用 sql server 2008。我不想使用命令插入。我可以通过管理工作室输入任何列的值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:47:08.620

是的，您可以右键单击任何表格并选择编辑前 X 行。这将打开一个可编辑的记录表，您可以在其中插入和编辑行。

如果您需要编辑超过前 200 名（这是默认设置），您可以通过右键单击选项卡下方并选择窗格 -> SQL 来编辑 sql 用户以获取行。打开此窗格后，您可以编辑 sql 以返回要编辑的不同结果集。

# ssl - SSL 301 重定向错误 - Joomla 和 Nginx

> ID：11026792
> 
> 赞同：1
> 
> 时间：2012-06-14T04:45:19.827
> 
> 标签：ssl, joomla, http-status-code-301, joomla2.5

我的网站是 www.survivorssupply.com。我想为我的整个站点使用 SSL，因为当我仅在某些部分使用 SSL 时，SSL 证书表明某些部分未安全交付，并非所有内容都是安全的，等等。

当我进入 Joomla 管理面板时，我将整个站点设置为对所有内容强制使用 SSL。然后我遇到了一个无限重定向循环的问题（301 错误）。我的网站在 Nginx 上运行最新版本的 Joomla 2.5。

有没有我可以使用的某种重写，或者有人知道任何 Joomla 技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:32:56.747

您可能在 Nginx 配置的 443 部分中缺少一个额外的参数。添加“fastcgi_param HTTPS on;” 到 fastcgi 部分。

@alfasin，Nginx 不使用 httpd.conf 或 .htaccess 之类的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:08:25.323

1.  检查您的 httpd.conf 和 .htaccess 以了解有关 HTTPS 的 301 重定向规则
2.  您收到警告说您的网站的某些部分不安全，因为您嵌入了使用 HTTP 而不是 HTTPS 的链接 - 我将创建网站的备份并开始更改以下所有网址：模板、文章、模块等。

# php - 在php中添加带数字的字符串

> ID：11026796
> 
> 赞同：18
> 
> 时间：2012-06-14T04:45:29.563
> 
> 标签：php

```
$a = "3dollars";
$b = 20;
echo $a += $b;
print($a += $b); 
```

结果：

```
23
43

```

我对这个计算有一个问题。$a 是一个字符串，$b 是数字。我正在添加两者并使用 echo 它的 print 23 打印并使用 print return 43 打印。它是怎么回事

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-14T04:48:01.497

它将“3dollars”作为一个数字，得到`$a = 3`.

当您回显时，您将 20, 添加到`$a`，因此它会打印`23`and `$a = 23`。

然后，当您打印时，您再次添加 20，所以 now `$a = 43`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-20T12:51:45.357

添加（技术上连接）字符串的正确方法是

```
$a = 7;
$b = "3 dollars";
print ($a . $b);  // 73 dollars 
```

php 中的`+`运算符自动将字符串转换为数字，这就解释了为什么您的代码执行的是arimethic 而不是串联

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-07T12:37:50.283

PHP 根据变量的值自动将数据类型关联到变量。由于数据类型不是严格意义上的设置，您可以执行诸如将字符串添加到整数之类的操作而不会导致错误。

在 PHP 7 中，添加了类型声明。这为我们提供了在声明函数时指定预期数据类型的选项，并且通过添加严格声明，如果数据类型不匹配，它将抛出“致命错误”。

要指定严格，我们需要设置 declare(strict_types=1);。这必须在 PHP 文件的第一行。然后它会显示致命错误，如果你没有声明这个严格的，那么它将字符串转换为整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-17T11:23:34.707

如果您需要这两个值，请将它们返回到数组中

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-20T12:46:48.090

PHP 将 '3dollars' 视为整数 3 因为字符串以整数开头并参与算术运算，所以

```
 $a = "3dollars";
    $b = 20;
    echo $a += $b;
    it echo 23;   //$a=$a+$b;

    now $a = 23 + 20;
    print($a += $b);    //$a=$a+$b;
    it print 43; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-12-13T20:24:49.417

由于您为这两个变量创建了一个变量，它存储了每个变量的结果，因此当您将 $a 添加到 20 时，它将回显 23 存储在系统中，当您打印 $a 时，它们现在是 23 除了 $b即 20。你将得到 43。

# php - 从PHP中的数组中删除黑名单键

> ID：11026799
> 
> 赞同：52
> 
> 时间：2012-06-14T04:45:33.823
> 
> 标签：php, arrays, key

我有一个关联的数据数组，并且我有一个要从该数组中删除的键数组（同时保持其余键的原始顺序——这可能不是一个约束）。

我正在寻找***一个单行***的 php 来做到这一点。
我已经知道如何遍历数组，但似乎应该有一些我无法`array_map`掌握`unset`的`array_filter`解决方案。

我四处搜索了一下，但没有找到太简洁的东西。

***需要明确的是，这是一行***要做的问题：

```
//have this example associative array of data
$data = array(
    'blue'   => 43,
    'red'    => 87,
    'purple' => 130,
    'green'  => 12,
    'yellow' => 31
);

//and this array of keys to remove
$bad_keys = array(
    'purple',
    'yellow'
);

//some one liner here and then $data will only have the keys blue, red, green 
```

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-06-14T04:50:13.140

`$out =`[`array_diff_key`](http://php.net/array-diff-key)`($data,`[`array_flip`](http://php.net/array-flip)`($bad_keys));`

我所做的只是查看[Array 函数](http://php.net/manual/en/ref.array.php)列表，直到找到我需要的那个 ( `_diff_key`)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-01-03T09:21:25.403

解决方案确实是[**Niet the Dark Absol**](https://stackoverflow.com/questions/11026799/remove-keys-from-array-within-a-blacklist-in-php#answer-11026840)[提供](https://stackoverflow.com/questions/11026799/remove-keys-from-array-within-a-blacklist-in-php#answer-11026840)**的解决方案。我想为追求类似事情的任何人提供另一种类似的解决方案，但这个解决方案使用**白名单**而不是**黑名单**：**

 **```
$whitelist = array( 'good_key1', 'good_key2', ... );
$output = array_intersect_key( $data, array_flip( $whitelist ) ); 
```

这将保留`$whitelist`数组中的键并删除其余键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T11:10:25.300

这是我为关联数组创建的黑名单函数。

```
if(!function_exists('array_blacklist_assoc')){

    /**
     * Returns an array containing all the entries from array1 whose keys are not present in any of the other arrays when using their values as keys.
     * @param array $array1 The array to compare from
     * @param array $array2 The array to compare against
     * @return array $array2,... More arrays to compare against
     */

    function array_blacklist_assoc(Array $array1, Array $array2) {
        if(func_num_args() > 2){
            $args = func_get_args();
            array_shift($args);
            $array2 = call_user_func_array('array_merge', $args);
        } 
        return array_diff_key($array1, array_flip($array2));
    }
}

$sanitized_data = array_blacklist_assoc($data, $bad_keys); 
```**

# android - 如何从 Android 设备中查找崩溃报告？

> ID：11026803
> 
> 赞同：0
> 
> 时间：2012-06-14T04:45:59.790
> 
> 标签：android, crash

我正在为客户端开发 android 应用程序。现在客户在各种设备上测试我的应用程序。在测试时，我的应用程序有时会崩溃。现在我需要知道应用程序崩溃的时间和地点。

如何从设备获取崩溃报告？由于我的客户端没有sdk和eclipse来查看logcat错误报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:47:43.300

有像[ACRA](http://code.google.com/p/acra/)这样的机制可以让你从 Android 应用程序中获取崩溃报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-25T15:05:24.057

[Instabug](https://instabug.com/)是一个错误和崩溃报告服务，它正是您正在寻找的。一旦发生崩溃，它会自动发送包含所有崩溃和设备详细信息的报告，而且只需一行代码即可集成到您的应用程序中。

* * *

为了全面披露，我在 Instabug 工作。让我知道我是否可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T05:27:03.567

通过在项目中添加[Crash Report SDK](https://github.com/liu-yanjun/crash-log-report)，可以查看发布的应用崩溃日志，有助于定位问题。

这是一个[演示页面](http://www.crashlog.org/log_list.jsp?package_name=org.crashlog.sample)

# php - 如何使用 Doctrine2 和 Symfony2 创建原始 MongoDB 查询

> ID：11026820
> 
> 赞同：2
> 
> 时间：2012-06-14T04:47:52.310
> 
> 标签：php, mongodb, symfony, doctrine-orm

我正在尝试使用点符号查询嵌入的文档——这里有一些例子：

[http://www.mongodb.org/display/DOCS/Dot+Notation+(Reaching+into+Objects)](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)

由于我挂断了 DQL/QueryBuilder API，我只想通过 Doctrine 传递原始查询。我似乎无法在 Symfony2 的构造中弄清楚这一点。我可以确定的唯一代码是：

```
$dm = $this->get('doctrine.odm.mongodb.document_manager');
$dm->getSchemaManager()->ensureIndexes();
$repo = $dm->getRepository('MyBundle:MyDocument');
$qb = $repo->createQueryBuilder();

// insert magic here

$query = $qb->getQuery();
$result = $query->execute(); 
```

以下是点符号的工作原理：

```
$dm = $this->get('doctrine.odm.mongodb.document_manager');
$dm->getSchemaManager()->ensureIndexes();
$repo = $dm->getRepository('MyBundle:MyDocument');
$qb = $repo->createQueryBuilder();

$qb
    ->field('embedded_document_field.field1')->equals(1)
    ->field('embedded_document_field.field2')->equals('foo')
;

$query = $qb->getQuery();
$result = $query->execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T00:43:42.587

这个问题很古老，但如果有人遇到它，使用查询生成器执行此操作相当简单：

```
 $qb = $this->createQueryBuilder();
    $qb->addOr($qb->expr()->field('embedded.embedded2.username')->equals($username));
    $qb->addOr($qb->expr()->field('embedded.embedded3.username')->equals($username));
    $qb->addOr($qb->expr()->field('embedded.embedded4.username')->equals($username));
    $qb->field('status')->lt(10);
    $involved = $qb->getQuery()->execute();
    return $involved; 
```

我承认这实际上并没有回答与通过 raw 相关的问题（这是我自己的问题），但它确实解决了您的问题。

# list - 替换外来词列表中的重音符号

> ID：11026823
> 
> 赞同：0
> 
> 时间：2012-06-14T04:48:12.400
> 
> 标签：list, localization

你知道是否有任何 linux 程序可以从外来词列表中删除重音（在 utf8 中）？比如西班牙语、捷克语、法语。例如：

administrátoři (捷克) administratori
français (法语) francais
niñez (西班牙语) Ninez 等

我知道我可以使用 sed 手动完成，但考虑到我正在研究多种语言，这相对耗时。我认为可以做到这一点的程序可能已经存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:09:54.803

您想要的称为*Unicode 分解*- Unicode 组合的逆过程（将基本字符与变音符号组合在一起）。有许多相关的 SO 问题使用：

1.  [JavaScript](https://stackoverflow.com/questions/990904/javascript-remove-accents-in-strings)
2.  [动作脚本](https://stackoverflow.com/questions/587242/replacing-accents-w-their-counterparts-in-as3)
3.  [Python](https://stackoverflow.com/questions/517923/what-is-the-best-way-to-remove-accents-in-a-python-unicode-string)

您可以将其用作起点。

Python 存储库具有[`unicodedata.decomposition`](http://docs.python.org/library/unicodedata.html)返回分解的映射。

您的系统可能也有`iconv`适当的[规范化](https://stackoverflow.com/questions/9892897/why-can-iconv-convert-precomposed-form-but-not-decomposed-form-of-from-utf)，它也可能让您到达那里！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T14:19:47.590

您是否尝试过使用重新编码（在[https://github.com/pinard/Recode/](https://github.com/pinard/Recode/)）？它在努力保留信息的同时消除*重音，还可以生成用 C 表示的 xlat 表。*

```
$ cat testfile 
administrátoři (czech) administratori
français (french) francais
niñez (spanish) ninez etc.
$ LANG= recode -f UTF-8..texte <testfile 
administrtori (czech) administratori
franc,ais (french) francais
niez (spanish) ninez etc. 
```

# solr - Solr 4 生产准备好了吗？

> ID：11026825
> 
> 赞同：2
> 
> 时间：2012-06-14T04:48:32.317
> 
> 标签：solr, lucene, search-engine

我们现在正在将 Solr Search 与其中一个购物车应用程序集成。我已经阅读了关于 stackoverflow 的几个建议，以使用 Solr 4 来支持加入索引。

我的问题是，Solr 4 生产准备好了吗？更重要的是，在两个索引之间使用连接对性能有什么影响？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T06:08:02.747

查看Solr 4.0的[路线图](http://wiki.apache.org/solr/Solr4.0)

开发人员（截至 2012 年 5 月）为 4.0 讨论的当前路线图是：

*   2012 年 6 月/7 月某个时间发布 4.0-alpha。
*   在 4.0-alpha 发布 30 天后，4.0-beta 发布。与 alpha 版本相比，beta 版本可能包含额外的功能和 API 更改，但除非绝对需要修复错误，否则不应更改索引格式。
*   4.0（最终版）发布不早于 4.0-beta 后 30 天。与 beta 版本相比，最终版本可能包含额外的功能和 API 添加，但不应更改 beta 版本的任何 API（或索引格式），除非绝对需要修复错误。

另外，我认为 Solr 不支持跨索引连接。实体需要在索引内。但是你可以确认。
对于性能，我认为最好在 Solr 论坛上询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:36:18.843

您还可以使用[弹性搜索](http://www.elasticsearch.org/)。它是生产就绪的，建立在 Lucene 之上，准备好进行水平扩展和分片，还支持跨多个索引进行搜索。

# java - 如何在netbeans平台中访问我自己的窗口类中的外部类？

> ID：11026828
> 
> 赞同：0
> 
> 时间：2012-06-14T04:48:38.807
> 
> 标签：java, swing, netbeans, noclassdeffounderror, netbeans-platform

我正在开发一个应用程序，我想在我自己的窗口类中使用 Netbeans 平台访问另一个包的类方法。但是，我得到一个`NoClassDefFoundError`.

具体来说，我想在`JScrollPane`我的窗口类中添加一个' `JPanel`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:58:21.017

将包含该类的 jar 添加到应用程序的[运行时类路径](http://netbeans.org/kb/docs/java/project-setup.html#deploy-classpath)。

# hibernate - 冲洗模式不起作用

> ID：11026834
> 
> 赞同：0
> 
> 时间：2012-06-14T04:50:02.380
> 
> 标签：hibernate, jpa, type-conversion, seam, seam2

我在对话中遇到了刷新模式的问题：

如果我在 @Begin(..) 注释中将刷新模式设置为手动，Hibernate 仍然会将附加实体上的任何更改直接填充到数据库中。

CustomerBranch 是实体

> @Begin(join=true) public String addCustBranch() 抛出异常 {
> 
> ```
>  CustomerBranch customerBranch=new CustomerBranch();
>  BeanUtils.copyProperties(customerBranch,doCustomerBranch)
> 
> branchesMap.get(selectedBranch.toLowerCase()).getCustomerBranch().add(customerBranch)
>  custBranchesList.add(customerBranch); 
>  } 
> ```

```
 @Begin(flushMode=FlushModeType.MANUAL,join = true)

 public void populateSelectedList() throws Exception {

    // PersistenceProvider.instance().setFlushModeManual(getEntityManager());

     ((Session)getEntityManager().getDelegate()).setFlushMode(FlushMode.MANUAL);

      custBranchesList.clear();

             custBranchesList.addAll(branchesMap.get(selectedBranch.toLowerCase()).getCustomerBranch());

} 
```

在上面的方法中，我在这里将列表添加到 custBranchesList 我不能使用任何持久化仍然直接更改反映数据库

组件.xml

对话超时=“120000”父对话-id-参数=“pid”/>

```
<web:hot-deploy-filter url-pattern="/*.mobee"/>

<persistence:entity-manager-factory installed="@seamBootstrapsPu@"

  name="entityManagerFactory" persistence-unit-name="mobeeadmin"/>

<persistence:managed-persistence-context auto-create="true"

  entity-manager-factory="@seamEmfRef@" name="entityManager" persistence-unit-jndi- name="@puJndiName@"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:13:31.070

`@Begin`当你的方法执行时，也许你已经在对话中了？`join=true`即使您指定了另一个值，也只会保持先前的对话不变，并且不会更改其 flushMode。检查尝试`nested=true`。

# jquery - 为什么 MVC 4 基本 CSS 顶起 jquery-ui 的对话框？

> ID：11026835
> 
> 赞同：2
> 
> 时间：2012-06-14T04:50:05.040
> 
> 标签：jquery, css, jquery-ui-dialog, asp.net-mvc-4

任何 css 忍者都可能猜到为什么当我在项目中包含 MVC 4 的基本 css 文件时会导致 Jquery UI 的对话框出现问题？标题栏出现在内容旁边，当然所有内容都被卡住了——不用说，它看起来不太好。

我不是 HTML 忍者，但似乎有什么东西导致了“float：left”或类似的东西，尽管我可以在 HTML（使用 firebug）中看到“display：block；”

嗯 - 这是我正在使用的 HTML 和 JS，但我不知道它是否真的有帮助。

```
 $("#addCompanyDialog").dialog({
            title: "Add New Company",
            autoOpen: false
        });

        $("#addCompanyLink").click(function (evt) {
            evt.preventDefault();
            $("#addCompanyDialog").dialog("open");
        }); 

<div id="addCompanyDialog" style="display:none; background-color: yellow; ">
    <input type="text" id="companyName"/>
    <input type="submit" id="addCompany" value="Add Company"/>
</div> 
```

如果我注释掉这一行

```
@Styles.Render("~/Content/css") 
```

对话框恢复正常，即文本框和按钮上方的标题栏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T03:09:01.787

我找到了——它们覆盖了其中的一些 jquery-ui 内容。这是 CSS 令人讨厌的地方

```
.ui-dialog-titlebar {
    color: inherit;
    font-weight: inherit;
    border: 0 none;
    background: none;
   /* float: right;*/    
} 
```

我一直在搜索 div 并且实际上搜索了“float”，但昨晚错过了这个，我认为它值得寻找，因为它是一个非常好的 CSS 模板，所以也许这会对其他人有所帮助。

甜的！

# javascript - 使用 ASP.NET 解析 XML DOM

> ID：11026836
> 
> 赞同：1
> 
> 时间：2012-06-14T04:50:05.127
> 
> 标签：javascript, asp.net, xmldom

我在 Web 开发方面相当新，尤其是 ASP.NET（但我是 CS 专业的，所以这很有帮助）。我以前做过一些网络开发，但其他人总是可以帮助解决我不明白的任何事情。

无论如何，我正在尝试链接到一个站点，该站点将链接名称作为查询字符串传递，然后该查询字符串将用于加载正确的 XML 文档并对其进行解析。我遇到的问题是我只用javascript解析了XML，这对于练习来说很好，但问题是查询字符串正在服务器端读取，而javascript在客户端运行。

这是我到目前为止所拥有的（显然没有工作）：

```
@{Layout="/Shared/GuideLayout.cshtml";}

<!-- I like to keep layouts separate from variables, not sure if this is proper -->
@{string name = Request.QueryString["name"];}

<script type="text/javascript">

    var aname = @name;
    document.write(aname);
    xmlDoc = loadXMLDoc("/XML/" + aname + ".xml");
    document.write(xmlDoc.getElementsByTagName("title")[0].childNodes[0].nodeValue));
</script>

@name 
```

如您所见，我得到了查询字符串，它工作得很好，问题是标题没有打印在任何地方（正如预期的那样）。这是 loadXMLDoc 的代码：

```
function loadXMLDoc(dname)
    {
        if (window.XMLHttpRequest)
        {
            xhttp=new XMLHttpRequest();
        }

        else
        {
            xhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xhttp.open("GET",dname,false);
        xhttp.send();
        return xhttp.responseXML;
    } 
```

我尝试使用脚本的“runat="server"”属性，但没有做任何事情。我之前已经解析过这个 XML 文档，所以我知道代码可以工作，问题是我不确定如何根据我目前的知识来实现​​它。

当我用谷歌搜索这个时，有人建议创建一个包含 javascript 的页面，然后将其传递给我在那里定义的函数，问题是我仍然不知道如何将查询字符串从 ASP.NET 获取到 javascript 中传入。我还看到一些页面顶部带有 <%@ Page Language=”C#” %> 标记，但这似乎已经过时，因为我在放入此标记时收到错误。

我正在使用 microsoft webmatrix 创建这个网站，我所知道的一切都来自谷歌和 W3School 关于 ASP.NET 网页的文章（我不需要使用 webforms，并且这个项目不需要 MVC 架构）。谢谢你的帮助。

# php - php 中的 pg_connect 返回 false

> ID：11026837
> 
> 赞同：1
> 
> 时间：2012-06-14T04:50:07.120
> 
> 标签：php

我显示 phpinfo() 信息页面有 pgsql 启用支持但在文件 php

```
$dbconn =pg_connect("host=localhost port=5432 dbname=qlbv user=postgres password=123456")
 or die("can't connect db"); 
```

$dbconn 的结果为假；

我有配置

```
# "local" is for Unix domain socket connections only
local  all        all                              md5   
# IPv4 local connections:
host    all        all        127.0.0.1/32        md5   
# IPv6 local connections:
host    all        all        ::1/128              md5   
# IPv4 internet connections:
host    all        all        0.0.0.0/0            md5 

# - Connection Settings -
listen_addresses='*'
#listen_addresses = 'localhost'        # what IP address(es) to listen on;
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost', '*' = all
                                        # (change requires restart)
port = 5432                            # (change requires restart) 
```

我在centos 中设置webserver 结果$dbconn 为假；你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:31:05.353

你尝试类型：

```
getsebool -a | grep ftp
setsebool -P ftp_home_dir on
getsebool -a | grep ftp 
```

# php - 为过程添加参数

> ID：11026841
> 
> 赞同：0
> 
> 时间：2012-06-14T04:50:38.317
> 
> 标签：php, telnet

我想用 PHP 模拟 Telnet。我的问题是：我`proc_open`用来执行命令 telnet。在运行 telnet 时，如何发送此命令的参数，例如：`open 192.168.1.1`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:06:01.813

`proc_open`就像一个更灵活`popen`的写到你在管道上使用 fwrite 的进程。

请参阅[http://uk.php.net/manual/en/function.proc-open.php上的示例 #1](http://uk.php.net/manual/en/function.proc-open.php)

# android - 将数据传递给后台活动而不更改当前活动

> ID：11026844
> 
> 赞同：0
> 
> 时间：2012-06-14T04:50:58.097
> 
> 标签：android, android-intent

我有 2 个活动。Activiy A 将列出要下载的链接。活动 B 有一个下载项目的列表视图。当我单击活动 A 中的链接时，如何将链接发送到活动 B 以在不更改活动 A 的情况下进行下载（而活动 B 仍在后台下载）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:02:57.267

您需要了解活动不需要任何结果才能工作，活动需要数据。而Activities可以使用这些数据来加载其内容。在进入后台之前，不会将这些数据用于活动。所以这是解决方案：

1.  为应用程序创建一些全局数据数组列表或标志。
2.  将此数据更改为处于前台的第二个活动，并希望通知某些结果。
3.  当 First Activity 在后台，并且想要监听结果时，在 onResume 方法中检查数据的变化，并在变化时加载新的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:12:03.760

我的方法是：

> 活动 A：显示要下载的项目列表。
> 
> 服务 B：在后台下载项目。也许您可以排队多个下载项目。
> 
> 文件 C：当您完成下载某些内容时，您应该将该事实保存在一个文件中。
> 
> 活动 D：当这个活动开始时，它应该读取“文件 C”并显示其内容。

如果不启动它，您就无法真正将数据发送到 Activity。当一个 Activity 不可见时，它几乎处于睡眠状态。

你应该读这个：[应用基础](http://developer.android.com/guide/topics/fundamentals.html)，读很多遍……然后再读一遍。在使用 Android 多年后，我仍然会回去阅读它。

# jquery - 如何在此菜单栏上应用手风琴 jquery 效果？

> ID：11026845
> 
> 赞同：0
> 
> 时间：2012-06-14T04:51:05.553
> 
> 标签：jquery, menubar, jquery-ui-accordion

我想对这段代码应用手风琴效果，但我是 JQuery 的初学者。有人可以帮我吗？

```
<div id="left_menu">
            <ul id="main_menu" class="main_menu">
                <li class="limenu" ><a href="dashboard.html"><span class="ico gray shadow home" ></span><b>Dashboard</b></a></li>
                <li class="limenu select" ><a href="#" ><span class="ico gray shadow window"></span><b>Form elements</b></a>
                    <ul>
                        <li ><a href="form.html"> basic form </a></li>
                        <li ><a href="vform.html"> validation </a></li>
                        <li ><a href="wizard.html"> wizard </a></li>
                    </ul>
                </li>
                <li class="limenu" ><a href="#"><span class="ico gray  dimensions" ></span><b>Sample pages</b></a>
                    <ul>
                        <li ><a href="profile.html"> Profile setting </a></li>
                        <li ><a href="conversation.html"> conversation</a></li>
                        <li ><a href="imagesEditor.html"> Images Editor </a></li>
                    </ul>
                </li>
                <li class="limenu" ><a href="table.html"><span class="ico gray shadow  spreadsheet"></span><b>Tables</b> </a></li>
                <li class="limenu" ><a href="gallery.html"><span class="ico gray shadow pictures_folder"></span><b>Gallery </b></a></li>
                <li class="limenu" ><a href="#"><span class="ico gray shadow stats_lines"></span><b>Graph and Charts</b> </a>
                    <ul>
                        <li><a href="modalchartLive.html" class="pop_box">live chart </a></li>
                        <li><a href="chart.html">all chart</a></li>
                    </ul>
                </li>
                <li class="limenu" ><a href="filemanager.html"><span class="ico gray shadow  file"></span><b>File manager </b></a></li>
                <li class="limenu" ><a href="calendar.html"><span class="ico gray shadow calendar"></span><b>Calendar </b></a></li>
                <li class="limenu" ><a href="typography.html"><span class="ico gray  shadow paragraph_align_left"></span><b>Typography</b></a></li>
                <li class="limenu" ><a href="inelement.html"><span class="ico gray shadow abacus"></span><b>Interface elements </b></a></li>
                <li class="limenu" ><a href="map.html"><span class="ico gray shadow  location"></span><b>Map location </b></a></li>
                <li class="limenu" ><a href="icon.html"><span class="ico gray  shadow satellite"></span><b>Icon and Button </b></a></li>
                <li class="limenu" ><a href="404.html"><span class="ico gray  shadow firewall"></span><b>Error Pages</b></a></li>

            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:55:54.663

你可以像这样使用 jQuery UI：http: [//jsfiddle.net/J5jg4/](http://jsfiddle.net/J5jg4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:58:09.903

您应该真正符合 API 中列出的 HTML 格式：

[JqueryUI 手风琴](http://jqueryui.com/demos/accordion/)

所以这意味着一个标题标签来命名这些部分，而 divs 在标题之后直接划分手风琴部分。

但坦率地说，我不确定您在这里寻找的是手风琴。如果我了解您要完成的工作，您真的不想要这样一个简单的下拉菜单吗？

[jQuery 下拉菜单插件](http://javascript-array.com/scripts/jquery_simple_drop_down_menu/)

# ios - 弹出到导航堆栈中的特定视图控制器

> ID：11026849
> 
> 赞同：6
> 
> 时间：2012-06-14T04:52:21.433
> 
> 标签：ios, objective-c, iphone, swift

我遇到一段代码弹出到导航堆栈中的特定视图控制器，如下所示

```
for (UIViewController* viewController in self.navigationController.viewControllers) {
    if ([viewController isKindOfClass:[MyGroupViewController class]] ) {
        MyGroupViewController *groupViewController = (MyGroupViewController*)viewController;
        [self.navigationController popToViewController:groupViewController animated:YES];
    }
} 
```

目标是弹出到 MyGroupViewController。但我不理解这行代码。

```
MyGroupViewController *groupViewController = (MyGroupViewController*)viewController; 
```

这里到底发生了什么。我认为这里没有创建 MyGroupViewController 的新实例。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T05:25:29.510

```
//This for loop iterates through all the view controllers in navigation stack.   
for (UIViewController* viewController in self.navigationController.viewControllers) {

    //This if condition checks whether the viewController's class is MyGroupViewController 
    // if true that means its the MyGroupViewController (which has been pushed at some point)
    if ([viewController isKindOfClass:[MyGroupViewController class]] ) {

        // Here viewController is a reference of UIViewController base class of MyGroupViewController 
        // but viewController holds MyGroupViewController  object so we can type cast it here
        MyGroupViewController *groupViewController = (MyGroupViewController*)viewController;
        [self.navigationController popToViewController:groupViewController animated:YES];
    }
} 
```

你也可以这样做

```
if ([viewController isKindOfClass:[MyGroupViewController class]] ) {
            [self.navigationController popToViewController:viewController  animated:YES];
 } 
```

* * *

**SWIFT代码**

```
//Itrate through all the view controllers in navigation stack
for vc in self.navigationController!.viewControllers {
  // Check if the view controller is of MyGroupViewController type
  if let myGropupVC = vc as? MyGroupViewController {
    self.navigationController?.popToViewController(myGropupVC, animated: true)
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:00:27.107

正在枚举导航控制器堆栈的视图控制器。由于这些视图控制器可以是任何类型的（但总是从 UIViewController 继承），所以使用通用的 UIViewController。但是，编译器将不知道该视图控制器是什么类型，因此它被强制转换为 MyGroupViewController。发生这种情况时，编译器知道类的类型，您可以向它发送仅适用于该类的消息。

在这种情况下，这是不必要的，因为它可以简化为：

```
(UIViewController* viewController in self.navigationController.viewControllers) {
    if ([viewController isKindOfClass:[MyGroupViewController class]] ) {
        [self.navigationController popToViewController:viewController animated:YES];
    }
} 
```

简短的回答：它将变量类型更改为括号中指定的类型以避免编译器警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T05:09:22.663

```
for (int m=0; m<[self.navigationController.viewControllers count]; m++) {  

  if([[self.navigationController.viewControllers objectAtIndex:m] isKindOfClass:[MyGroupViewController class]]) { 
    MyGroupViewController * groupViewController = [self.navigationController.viewControllers    objectAtIndex:m];  
   [self.navigationController popToViewController:groupViewController animated:YES];   
  }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T07:45:04.487

```
- (void) RetunToSpecificViewController{

    for (UIViewController *controller in self.navigationController.viewControllers) {
        if ([controller isKindOfClass:[AnOldViewController class]]) { 
        //Do not forget to import AnOldViewController.h

            [self.navigationController popToViewController:controller
                                              animated:YES];
            break;
        }
    } 
```

斯威夫特

```
func RetunToSpecificViewController()
{
    let viewControllers: [UIViewController] =  self.navigationController!.viewControllers as [UIViewController]
  self.navigationController!.popToViewController(viewControllers[viewControllers.count
        - 5], animated: true)
} 
```

我们已经写了一个更好的教程，你可以查看 [https://appengineer.in/2014/03/13/pop-to-specific-view-controller-in-ios/](https://appengineer.in/2014/03/13/pop-to-specific-view-controller-in-ios/)

# android - 接近传感器浏览器支持

> ID：11026853
> 
> 赞同：1
> 
> 时间：2012-06-14T04:53:29.333
> 
> 标签：android, iphone, html, browser, sensors

我还没有找到任何支持接近传感器的浏览器。有人知道任何支持访问接近传感器的浏览器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:08:36.423

我所知道的唯一支持接近传感器的移动浏览器是[使用 WebWorks](https://developer.blackberry.com/html5/apis/blackberry.sensors.html#.event%3adeviceproximity)的 BB10 浏览器。也就是说，[该规范](http://www.w3.org/TR/2012/WD-proximity-20121206/)今天（1 月 24 日结束）进入了*Last Call 工作草案*状态。希望我们很快会在 Android 中看到一些支持。

# windows-7 - virtualbox win7 主机 debx64 来宾网络问题

> ID：11026858
> 
> 赞同：0
> 
> 时间：2012-06-14T04:54:08.760
> 
> 标签：windows-7, virtualbox

首先，我有一个稳定的虚拟机工作正常，然后升级到最新的 virtualbox 版本，事情就变糟了。首先，我的 .vdi 崩溃了，无法重新导入，所以我降级到 4.1.4 运行良好。我已经从 deb amd64 名片 iso 复制了以前的版本。

来宾从网络上获取所有必需的依赖项，构建过程没有问题。但是在重新启动时，我遇到了网络问题。

最初我可以 ssh 进入 192.168.56.112，但是 apt-get 返回的网络无法访问。我无法通过 ssh 访问其他 IP。所以我做了一点挖掘并删除了 70-persistent-net.rules，重新启动，现在是一个不同的排列。

我现在可以通过适配器 3 (192.168.20.104) 上的 dhcp 地址 ssh 进入，DNS 似乎与 apt-get fetching 一起正常工作。只要 ssh 请求登录，我就可以在适配器 4 上启动会话，它会终止连接并且不会重新参与。本地 IP 的 192.168.56.x 也拒绝连接。

经过 3 天和多次重新安装后，我仍然无法让这个东西像以前一样进行基本配置，感谢任何帮助，谢谢艺术

我的设置如下，

```
adapter 1 => host-only (intel pro/1000 T server (82543GC)
Adapter 2 => NAT                  (intel pro/1000 T server (82543GC)
Adapter 3 =>  bridged            (intel pro/1000 T server (82543GC) //bridged to :  [Ethernet adapter Local Area Connection:]
Adapter 4 =>  bridged            (intel pro/1000 T server (82543GC) // bridged to : [Ethernet adapter Local Area Connection:] 
```

70-persistent-net.rules

```
 # PCI device 0x8086:0x100f (e1000)
 SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="08:00:27:a7:b9:b2", ATTR{dev_id}=="0x0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth2"

 # PCI device 0x8086:0x100f (e1000)
 SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="08:00:27:ae:b0:9b", ATTR{dev_id}=="0x0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"

# PCI device 0x1af4:0x1000 (virtio_net)
 SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="08:00:27:1b:16:b4", ATTR{dev_id}=="0x0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"

 # PCI device 0x8086:0x100f (e1000)
 SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="08:00:27:38:85:3a", ATTR{dev_id}=="0x0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth3"[/code] 
```

interfaces # loopback 网络接口 auto lo iface lo inet loopback

```
 # The primary network interface
 allow-hotplug eth0
 iface eth0 inet static
 address 192.168.56.112
 netmask 255.255.255.0
 broadcast 192.168.56.255

 allow-hotplug eth1
 iface eth1 inet dhcp

 allow-hotplug eth2
 iface eth2 inet dhcp

 allow-hotplug eth3
 iface eth3 inet static
 address 192.168.20.112
 netmask 255.255.255.0
 broadcast 192.168.20.255 
```

ifconfig -a

```
 eth0      Link encap:Ethernet  HWaddr 08:00:27:ae:b0:9b
      inet addr:192.168.56.112  Bcast:192.168.56.255  Mask:255.255.255.0
      inet6 addr: fe80::a00:27ff:feae:b09b/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:0 errors:0 dropped:0 overruns:0 frame:0
      TX packets:6 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000
      RX bytes:0 (0.0 B)  TX bytes:468 (468.0 B)
      Interrupt:9 Base address:0xd240

 eth1      Link encap:Ethernet  HWaddr 08:00:27:1b:16:b4
      inet addr:192.168.56.101  Bcast:192.168.56.255  Mask:255.255.255.0
      inet6 addr: fe80::a00:27ff:fe1b:16b4/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:6 errors:0 dropped:0 overruns:0 frame:0
      TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000
      RX bytes:1699 (1.6 KiB)  TX bytes:1152 (1.1 KiB)

 eth2      Link encap:Ethernet  HWaddr 08:00:27:a7:b9:b2
      inet addr:192.168.20.104  Bcast:192.168.20.255  Mask:255.255.255.0
      inet6 addr: fe80::a00:27ff:fea7:b9b2/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:23 errors:0 dropped:0 overruns:0 frame:0
      TX packets:9 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000
      RX bytes:3284 (3.2 KiB)  TX bytes:1138 (1.1 KiB)

 eth3      Link encap:Ethernet  HWaddr 08:00:27:38:85:3a
      inet addr:192.168.20.112  Bcast:192.168.20.255  Mask:255.255.255.0
      inet6 addr: fe80::a00:27ff:fe38:853a/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:87 errors:0 dropped:0 overruns:0 frame:0
      TX packets:67 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000
      RX bytes:10846 (10.5 KiB)  TX bytes:11466 (11.1 KiB)

 lo        Link encap:Local Loopback
      inet addr:127.0.0.1  Mask:255.0.0.0
      inet6 addr: ::1/128 Scope:Host
      UP LOOPBACK RUNNING  MTU:16436  Metric:1
      RX packets:8 errors:0 dropped:0 overruns:0 frame:0
      TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:0
      RX bytes:560 (560.0 B)  TX bytes:560 (560.0 B) 
```

主机 Windows IP 配置的 ipconfig

```
 Host Name . . . . . . . . . . . . : tosx500
 Primary Dns Suffix  . . . . . . . : 
 Node Type . . . . . . . . . . . . : Mixed
 IP Routing Enabled. . . . . . . . : No
 WINS Proxy Enabled. . . . . . . . : No

 Ethernet adapter Local Area Connection 10: 

 Media State . . . . . . . . . . . : Media disconnected
 Connection-specific DNS Suffix  . : 
 Description . . . . . . . . . . . : TAP-Win32 Adapter V9
 Physical Address. . . . . . . . . : 00-FF-6A-96-C7-8E
 DHCP Enabled. . . . . . . . . . . : Yes
 Autoconfiguration Enabled . . . . : Yes

 Ethernet adapter Local Area Connection 6:

 Connection-specific DNS Suffix  . : 
 Description . . . . . . . . . . . : Microsoft Loopback Adapter
 Physical Address. . . . . . . . . : 02-00-4C-4F-4F-50
 DHCP Enabled. . . . . . . . . . . : Yes
 Autoconfiguration Enabled . . . . : Yes
 Link-local IPv6 Address . . . . . : fe80::f139:e3f3:81f4:cb87%20(Preferred) 
 Autoconfiguration IPv4 Address. . : 169.254.203.135(Preferred) 
 Subnet Mask . . . . . . . . . . . : 255.255.0.0
 Default Gateway . . . . . . . . . : 
 DHCPv6 IAID . . . . . . . . . . . : 654442572
 DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-13-B2-35-4A-C8-0A-A9-0D-C5-90
 DNS Servers . . . . . . . . . . . : fec0:0:0:ffff::1%1
                                   fec0:0:0:ffff::2%1
                                   fec0:0:0:ffff::3%1
 NetBIOS over Tcpip. . . . . . . . : Enabled

 Wireless LAN adapter Wireless Network Connection 2:

 Media State . . . . . . . . . . . : Media disconnected
 Connection-specific DNS Suffix  . : 
 Description . . . . . . . . . . . : Microsoft Virtual WiFi Miniport Adapter
 Physical Address. . . . . . . . . : 70-F1-A1-04-70-B5
 DHCP Enabled. . . . . . . . . . . : Yes
 Autoconfiguration Enabled . . . . : Yes

 Wireless LAN adapter Wireless Network Connection:

 Media State . . . . . . . . . . . : Media disconnected
 Connection-specific DNS Suffix  . : 
 Description . . . . . . . . . . . : Realtek RTL8191SE Wireless LAN 802.11n PCI-E NIC
 Physical Address. . . . . . . . . : 70-F1-A1-04-70-B5
 DHCP Enabled. . . . . . . . . . . : No
 Autoconfiguration Enabled . . . . : Yes

 Ethernet adapter Local Area Connection:

 Connection-specific DNS Suffix  . : 
 Description . . . . . . . . . . . : Atheros AR8131 PCI-E Gigabit Ethernet Controller
 Physical Address. . . . . . . . . : C8-0A-A9-0D-C5-90
 DHCP Enabled. . . . . . . . . . . : No
 Autoconfiguration Enabled . . . . : Yes
 Link-local IPv6 Address . . . . . : fe80::3593:4f1f:e8a5:9468%11(Preferred) 
 IPv4 Address. . . . . . . . . . . : 192.168.20.103(Preferred) 
 Subnet Mask . . . . . . . . . . . : 255.255.255.0
 Default Gateway . . . . . . . . . : fe80::204:edff:fea9:39c%11
                                   192.168.20.1
 DNS Servers . . . . . . . . . . . : 192.168.20.1
 NetBIOS over Tcpip. . . . . . . . : Enabled

Ethernet adapter VirtualBox Host-Only Network:

 Connection-specific DNS Suffix  . : 
 Description . . . . . . . . . . . : VirtualBox Host-Only Ethernet Adapter
Physical Address. . . . . . . . . : 08-00-27-00-4C-76
DHCP Enabled. . . . . . . . . . . : No
Autoconfiguration Enabled . . . . : Yes
IPv4 Address. . . . . . . . . . . : 192.168.56.1(Preferred) 
Subnet Mask . . . . . . . . . . . : 255.255.255.0
Default Gateway . . . . . . . . . : 
DNS Servers . . . . . . . . . . . : 192.168.20.1
NetBIOS over Tcpip. . . . . . . . : Enabled

 Tunnel adapter Teredo Tunneling Pseudo-Interface:

 Media State . . . . . . . . . . . : Media disconnected
 Connection-specific DNS Suffix  . : 
 Description . . . . . . . . . . . : Teredo Tunneling Pseudo-Interface
 Physical Address. . . . . . . . . : 00-00-00-00-00-00-00-E0
 DHCP Enabled. . . . . . . . . . . : No
 Autoconfiguration Enabled . . . . : Yes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:31:15.853

您可能需要在 Windows 7 上创建网桥，以便将虚拟 NIC 与物理 NIC 桥接。使用 VirtualBox 设置桥接网络有点棘手（VMware 会自动执行此操作）。想我刚刚将两个适配器都添加到网桥并为其启用了 DHCP（如果我没记错的话）。以防万一：使用 WireShark 查看实际情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-30T22:04:06.423

这对我有用，在 Windows 主机上。

将您的网络适配器配置为

1）允许网络适配器唤醒计算机，

2）允许一个魔术包唤醒计算机，

3) 允许 IPV6

[http://www.worldstart.com/dropped-internet-connection-in-sleep-mode/](http://www.worldstart.com/dropped-internet-connection-in-sleep-mode/)

现在，我可以睡觉和唤醒我的机器了，来宾和主机都可以联网，而不仅仅是主机。

# powershell - 复制没有文件的文件夹树

> ID：11026859
> 
> 赞同：0
> 
> 时间：2012-06-14T04:54:27.547
> 
> 标签：powershell, copy, directory

我需要制作带有子文件夹的文件夹的副本，但是除了包含文件夹“Project”的数据之外，没有任何文件。

所以我需要做新的文件夹树，但它应该只包含名为“Project”的子文件夹中存在的文件。

好的，我的解决方案：

```
$folder = dir D:\ -r
$folder

foreach ($f in $folder)
{
    switch ($f.name)
    {
    "project"
    {
        Copy-Item -i *.* $f.FullName D:\test2
    }

    default
    {
    Copy-Item  -exclude *.* $f.FullName D:\test2
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:31:41.850

用于`xcopy /t`仅复制文件夹结构，然后`Project`单独复制文件夹。像这样的东西：

```
'test2\' | Out-File D:\exclude -Encoding ASCII
xcopy /t /exclude:d:\exclude D:\ D:\test2
gci -r -filter Project | ?{$_.PSIsContainer} | %{ copy -r $_.FullName d:\test2}
ri d:\exclude 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:07:13.620

用于`Get-ChildItem`递归文件夹并使用`New-Item`. 在递归中，您可以轻松检查“项目”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:50:59.930

另一种解决方案：

```
$source = "c:\dev"
$destination = "c:\temp\copydev"

Get-ChildItem -Path $source -Recurse -Force |
    Where-Object { $_.psIsContainer } |
    ForEach-Object { $_.FullName -replace [regex]::Escape($source), $destination } |
    ForEach-Object { $null = New-Item -ItemType Container -Path $_ -Force }

Get-ChildItem -Path $source -Recurse -Force |
    Where-Object { -not $_.psIsContainer -and (Split-Path $_.PSParentPath -Leaf) -eq "Project"} |
    Copy-Item -Force -Destination { $_.FullName -replace [regex]::Escape($source), $destination } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:59:01.050

首先，创建目录结构：

```
xcopy D:\source D:\destination /t /e 
```

现在，遍历源目录，复制项目目录中的每个文件：

```
Get-ChildItem D:\Source * -Recurse |
    # filter out directories
    Where-Object { -not $_.PsIsContainer } |

    # grab files that are in Project directories
    Where-Object { (Split-Path -Leaf (Split-Path -Parent $_.FullName)) -eq 'Project' } | 

    # copy the files from source to destination
    Copy-Item -Destination ($_.FullName.Replace('D:\source', 'D:\destination')) 
```

# imagej - imagej 从 imagestack 中获取当前图像

> ID：11026860
> 
> 赞同：1
> 
> 时间：2012-06-14T04:54:28.657
> 
> 标签：imagej

在将图像序列导入 ImageJ 后，我需要打开当前图像。因为我需要将叠加信息保存到带有图像名称的文本文件中

```
int number = imp.getImageStackSize();
if(number > 1)
{
  ImagePlus check = imp.duplicate();
  gd.removeAll();
  gd.addMessage(check.getTitle());
  gd.showDialog();          
} 
```

`imp.gettitle`返回加载图像的文件夹名称。

到目前为止找不到任何解决方案:(

任何在状态栏中查找文本的方法将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:26:30.143

这是一个简单的问题..可以通过以下代码检索当前图像的名称..

```
fileName = imp.getImageStack().getShortSliceLabel(imp.getCurrentSlice()); 
```

谢谢大家..

# android - 在Android上流式传输通话语音？

> ID：11026869
> 
> 赞同：2
> 
> 时间：2012-06-14T04:56:46.693
> 
> 标签：android, call, recorder

经过一番谷歌搜索后，我才知道在 android 中录制通话是不可能的，可能是因为某些法律原因，但我想知道是否可以从 android 流式传输通话语音，我不想录制它，只是想将它拴在一些功能要求上..

提前致谢...

# javascript - 在此人选择隐藏 div 后，如何让 div 再次出现？(javascript相关)

> ID：11026876
> 
> 赞同：1
> 
> 时间：2012-06-14T04:57:20.303
> 
> 标签：javascript

所以我是 javascript 文盲，但我确实在网上找到了这个有用的代码：

```
<script type="text/javascript">
function readCookie( cName )
{
  var v;

  return decodeURIComponent( ( v = ( document.cookie || "" ).match( "(^|\\s)" + cName + "=([^;$]+)" ) ) ? v[ 2 ] : "" );
}

function setCookie( cName, cValue, life, cPath, cDomain, cSecure )
{
 var dt = new Date(), 
     expSecs = ( expSecs = life.toString().match( /\bsecs\s*=\s*(\d+)/i ) ) ? Number( expSecs[ 1 ] ) : 0,
     params = ( life ? ( ";expires=" + new Date( expSecs ? ( dt.setTime( dt.getTime() + expSecs * 1000 ) )                                                          : ( dt.setDate( dt.getDate() + life) ) ).toUTCString() ) : "" )
            + ( cPath ? (";path=" + cPath) : "" )
            + ( cDomain ? ";domain=" + cDomain : "" )
            + ( cSecure ? ";secure" : "" );

 document.cookie = cName + "=" + encodeURIComponent( cValue ) + params;

 return readCookie( cName );
}

if( readCookie( "close" ) )
{
  document.getElementById("thing").style.display="none";
}

function close_thing()
{
  document.getElementById("thing").style.display="none";
  setCookie( "close", "true", 20 );
}
</script> 
```

它适用于这个 div

```
<div id="thing">
<div id="close_stuff" onclick="close_thing();"><a href="#">Close this</a></div>
</div> 
```

我的问题是，如果我希望我的 div 包含内容，用户可以根据需要关闭这些内容。但是，当我将新内容放入 div 时，我希望 div 重新出现。

有没有办法我可以手动做到这一点？就像将所有“close_thing”重命名为“klose_thing”，还是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:35:03.253

添加另一个功能将为您执行此操作。将显示属性设置为阻止。

```
function show_thing()
{
  document.getElementById("thing").style.display="block";
} 
```

然后调用 show_thing 函数再次显示 div。

# php - 将撇号置于状态时出错

> ID：11026878
> 
> 赞同：-2
> 
> 时间：2012-06-14T04:57:25.557
> 
> 标签：php

我现在正在制作一些涉及用户放置状态的东西，但是每当用户使用撇号或双引号放置状态时，他们都会出错。

任何人都可以帮忙吗？谢谢！ps“你的帖子没有太多的上下文来解释代码部分；请更清楚地解释你的场景。”

我的 get-posts.php

```
<?php

require('database/connect.php');

$result = mysql_query("SELECT * FROM posts ORDER BY date DESC");

while($row = mysql_fetch_array($result)) {

$email = $row['email'];

// To find username

$username = mysql_query("SELECT name FROM users WHERE email = '$email'");

$name = mysql_fetch_assoc($username);

// To make the date look prettier

$id = $row['id'];

$date_get = mysql_query("SELECT date FROM posts WHERE id='$id'");

$time = mysql_fetch_assoc($date_get);

$mysqldate = $time['date'];

$phpdate = strtotime( $mysqldate );

$DayMonthDay = date('l, F j', $phpdate);

$HourMinutePMAM = date('g:ia', $phpdate);

$date = $DayMonthDay." at ".$HourMinutePMAM;

echo "<div class='home-echoed-posts'>";

echo "<a href='#' class='home-echoed-posts-name'>".$name['name']."</a> ";

echo "<div class='home-echoed-posts-post'>".nl2br(stripslashes($row['post']))."</div>";

echo "<div class='home-echoed-posts-date'>".$date."</div>";

echo "</div>";

} 

?> 
```

和 post.php：

```
<?php
session_start();
require('database/connect.php');

if(empty($_POST['post'])){
    header('Location: home.php');
    }

$post = $_POST['post'];

$useremail =  $_SESSION['email'];

$result = mysql_query("INSERT INTO posts (post, email) VALUE ('$post', '$useremail')");

if($result==1) {
    header('Location: home.php');
    }else{
    die('We have experienced some technical problems, please try again');
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:08:04.903

也许您需要逃避用户的输入？

在 PHP 中有`addslashes ($user_status)`

参考是： http: [//php.net/manual/en/function.addslashes.php](http://php.net/manual/en/function.addslashes.php)

如果您使用的是 DBMS，请务必在将状态保存到数据库之前使用 DBMS 特定的转义：

*   mysql_real_escape_string() 用于 MySQL
*   pg_escape_string() 用于 PostgreSQL

# excel - 如何使用 POI api 从 Excel 工作表中删除公式？

> ID：11026879
> 
> 赞同：0
> 
> 时间：2012-06-14T04:57:26.357
> 
> 标签：excel, apache-poi, excel-formula

使用 cell.setCellFormula(null) 方法，我们可以删除公式，但它会影响具有取决于此单元格的值的单元格。我想从整个工作表中删除所有公式而不更改任何单元格的值。请给我一些想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:10:50.083

你的问题有点模棱两可，但我会猜测你在追求什么，然后回答我认为你的意思......

假设一个看起来像这样的 excel 文件：

```
|   |      A      |     B   |    C    |
| 1 |      2      |     4   |    6    |
| 2 | =SUM(A1:C1) | =A2*3   | =A2*4   | 
```

我相信您所追求的是从 A2 中删除公式，但保留当前计算的值 (12)，以便公式 B2 和 C2 不受影响？

有两种方法可以做到这一点。如果您刚刚加载了文件，并且没有对其进行任何更改，那么这很容易。您需要做的就是将单元格类型从公式单元格更改为数值单元格。它将保留旧的计算值。

```
sheet.getRow(1).getCell(0).setCellType(Cell.CELL_TYPE_NUMERIC); 
```

如果您对文件区域进行了其他更改，那么您需要做的是评估单元格，然后用评估值替换内容。您可以使用[evaluteInCell](http://poi.apache.org/spreadsheet/eval.html#EvaluateInCell)方法通过公式解析器执行此操作。

# delphi - 使用 DOM Delphi 7 的访问冲突错误

> ID：11026884
> 
> 赞同：1
> 
> 时间：2012-06-14T04:58:19.197
> 
> 标签：delphi, dom

我正在构建一个软件来处理网站上的订单。我正在使用 DOM 浏览网站，并且我希望我的应用在“错误”页面上使用命令时不会挂起。

前任：

```
try
  WebBrowser.OleObject.Document.GetElementByID('ContentPlaceHolder1_txtCommande').setAttribute('value', lblDate.Caption);
except
end; 
```

我想要的只是如果找不到该字段，则忽略该错误，因为此错误并不重要。谢谢！

编辑：当我指的是 DOM 时写了 ADO

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T06:10:27.963

您自己说可能找不到该元素，那么您期望什么

```
WebBrowser.OleObject.Document.GetElementByID('ContentPlaceHolder1_txtCommande') 
```

在那种情况下返回`nil`？然而，您“公然”使用通过附加返回的任何内容

```
.setAttribute('value', lblDate.Caption); 
```

给它。

将您的代码更改为

```
var
  element: IDomElement; // Whatever it should really be
begin
  element := WebBrowser.OleObject.Document.GetElementByID('ContentPlaceHolder1_txtCommande');
  if Assigned(element) then
    element.setAttribute('value', lblDate.Caption); 
```

**编辑**

如果您使用变体而不是通过其类型库或其他一些 xml 库使用变体，您可以在其中找到 GetElementID 返回的正确类型，那么，正如@GerryColl 所提到的，您可以使用`element: OLEVariant`并检查 NULL 而不是 nil指针。

# html - Chrome上的Textarea轮廓只是黑色

> ID：11026885
> 
> 赞同：2
> 
> 时间：2012-06-14T04:58:20.533
> 
> 标签：html, google-chrome

所以我试图完成我的投资组合网站，但我被困在这个可怕的联系表格上。

所以这是我的网页.. www.heatherkirk.net/contact.php

在 Chrome 和（我猜是 Safari，因为这两个看起来很相似）上，textarea 框看起来与其他浏览器不同。我只是想知道如何在 Chrome 的评论部分中获得较深的颜色和整个较浅的颜色，而不仅仅是黑色轮廓。如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:02:27.600

好吧，Chrome 的属性检查器（右键单击，检查元素）说您的输入有`border: 2px inset`，而您的 textarea 有`border: 1px solid`. 换个试试？

但是， Firefox 的属性检查器根本没有为 显示任何值`border`，`textarea`因此（并查看您的样式表）让我认为您已经应用`border-radius`了 ，但根本没有`border`为您的 textarea 设置 a ；碰巧Firefox的默认`textarea`有一个`2px inset`边框，而Webkit的（Chrome/Safari）有`1px black`一个。

`border: 2px inset`为你的风格添加一个`textarea`，这就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:12:19.157

`border:0 none;`在 CSS 中设置为您的文本区域

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:02:43.230

当您删除`border-radius`黑色轮廓消失。

但是如果您需要保留圆角，则只需添加`border-width:0px`到 textarea 样式。

就像上面提到的用户一样，当您只有`border:solid 1px;`默认颜色为黑色时，请稍微调整一下。

# jquery - 单击链接时，如何全屏显示 youtube 视频？

> ID：11026891
> 
> 赞同：0
> 
> 时间：2012-06-14T04:59:19.687
> 
> 标签：jquery, youtube-api

在我的一个网络应用程序中，我正在显示一个 youtube 视频缩略图，例如

```
<img height="150px" id="youtubeImage" src="http://img.youtube.com/vi/VIDEO_ID/default.jpg" href=""> 
```

我正在从数据库中获取视频 ID。如果此视频在单击此链接时，我想显示全屏。我使用 jQuery 在 iframe 中展示了这一点。但是如何全屏显示呢？

请帮忙谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:05:38.333

不是真正的 jQuery 答案，但这几乎可以通过使用 URL 来实现：

> http://www.youtube.com/v/[VIDEO_ID]

这将重定向到

> http://youtube.googleapis.com/v/[VIDEO_ID]

哪个视频占据了整个浏览器选项卡。不是严格全屏，因为它不会隐藏播放器组件，但我不确定您是否可以通过其他方式做到这一点。

# validation - 范围验证器错误

> ID：11026893
> 
> 赞同：1
> 
> 时间：2012-06-14T04:59:30.203
> 
> 标签：validation, c#-2.0

当我设置文本框的范围时，当我删除或评论它时出现错误页面运行请查看我的代码并告诉我其中的错误。

```
<asp:TextBox ID="TxtName" runat="server" ValidationGroup="Adduser" MaxLength="32"
                        Width="200px"></asp:TextBox>
                </td>
                <td>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ValidationGroup="Adduser"
                        ErrorMessage="Provide user name" ControlToValidate="TxtName" Display="Dynamic">*</asp:RequiredFieldValidator>
                        <%--<asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server" ValidationGroup="Adduser" ControlToValidate="TxtName" ErrorMessage="User ID Must be at least 8 Alpha Numeric Characters." ValidationExpression="^[a-zA-Z0-9]{8,}$">*</asp:RegularExpressionValidator>--%>
                    <asp:RangeValidator ID="RangeValidator2" runat="server" ErrorMessage="The ID Must Be 8 Characters." MaximumValue="32" MinimumValue="8" ControlToValidate="TxtName" Type="String"></asp:RangeValidator>
                </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:11:15.850

您不应将 RangeValidator 用于 String 类型，而应使用 RegularExpressionValidator

试试这个，

```
<asp:TextBox ID="TxtName" 
             runat="server" 
             ValidationGroup="Adduser" 
             MaxLength="32"
             Width="200px"></asp:TextBox>

<asp:RegularExpressionValidator 
             ID="RegularExpressionValidator2" 
             runat="server" 
             ValidationGroup="Adduser" 
             ControlToValidate="TxtName" 
             ErrorMessage="User ID Must be at least 8 Alpha Numeric Characters."
             ValidationExpression="[a-zA-Z0-9]{8}">*</asp:RegularExpressionValidator> 
```

# android - 表格布局的动态行未绑定到活动

> ID：11026896
> 
> 赞同：0
> 
> 时间：2012-06-14T04:59:48.497
> 
> 标签：android, android-layout

大家好，我想创建一个简单的应用程序，用户可以在其中输入要在列表视图中显示的记录数。然后我向数据库查询该行数并将其显示在表格布局中，如图所示。

![在此处输入图像描述](../Images/66eed64010794d7c9406994febaaf6df.png)

并将动态行添加到表格布局中

```
 package com.heavy.test;

import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TableRow.LayoutParams;
import android.widget.TextView;

public class TestHeavyDBActivity extends Activity {

    TableLayout t1;
    Button btnSubmit;
    EditText edtRecords;

    ArrayList<Record> recordsList = new ArrayList<Record>();
    ArrayAdapter<String> adapter; 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        t1 = (TableLayout) findViewById(R.id.tableLayout);
        edtRecords = (EditText) findViewById(R.id.editText);
        btnSubmit = (Button) findViewById(R.id.btnRecords);

        btnSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                System.out.println(new Date().getTime());
                int recordsNum = Integer.parseInt(edtRecords.getText().toString().trim());

                SQLiteDatabase db;
                ConferenceDBHelper helper;

                helper = new ConferenceDBHelper(TestHeavyDBActivity.this);
                db = helper.getWritableDatabase();

                Cursor cursor = db.rawQuery("select VP_BRAND_DESC, VP_BOOK, VP_DATE, VP_SIZE_DESC from SOL_SALES  LIMIT "+recordsNum, null);
                while(cursor.moveToNext()){

                    Record record = new Record();
                    record.setBrand(cursor.getString(0));
                    record.setBookName(cursor.getString(1));
                    record.setDate(cursor.getString(2));
                    record.setSize(cursor.getString(3));

                    recordsList.add(record);

                }

                helper.close();
                db.close();

                TableRow tr = new TableRow(TestHeavyDBActivity.this);
                LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
                lp.setMargins(5, 5 , 5, 5);
                tr.setLayoutParams(lp);

                Iterator<Record> it = recordsList.iterator();
                while (it.hasNext()) {

                    Record r = it.next();

                    TextView tv1 = new TextView(TestHeavyDBActivity.this);
                    tv1.setLayoutParams(lp);
                    tv1.setText("OMG");

                    TextView tv2 = new TextView(TestHeavyDBActivity.this);
                    tv2.setLayoutParams(lp);
                    tv2.setText("It");

                    TextView tv3 = new TextView(TestHeavyDBActivity.this);
                    tv3.setLayoutParams(lp);
                    tv3.setText("WORKED!!!");

                    TextView tv4 = new TextView(TestHeavyDBActivity.this);
                    tv4.setLayoutParams(lp);
                    tv4.setText("Tes!!!");

                    tr.addView(tv1);
                    tr.addView(tv2);
                    tr.addView(tv3);
                    tr.addView(tv4);

                    t1.addView(tr, new TableLayout.LayoutParams(
                            LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                }
                System.out.println(new Date().getTime());

            }
        });

    }
} 
```

编译后我得到了以下堆栈跟踪

```
 06-14 10:12:36.948: E/AndroidRuntime(203): Uncaught handler: thread main exiting due to uncaught exception
06-14 10:12:36.978: E/AndroidRuntime(203): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewGroup.addViewInner(ViewGroup.java:1861)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewGroup.addView(ViewGroup.java:1756)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.widget.TableLayout.addView(TableLayout.java:418)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewGroup.addView(ViewGroup.java:1736)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.widget.TableLayout.addView(TableLayout.java:409)
06-14 10:12:36.978: E/AndroidRuntime(203):  at com.heavy.test.TestHeavyDBActivity$1.onClick(TestHeavyDBActivity.java:103)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.View.performClick(View.java:2364)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.View.onTouchEvent(View.java:4179)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.widget.TextView.onTouchEvent(TextView.java:6540)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.View.dispatchTouchEvent(View.java:3709)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-14 10:12:36.978: E/AndroidRuntime(203):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
06-14 10:12:36.978: E/AndroidRuntime(203):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
06-14 10:12:36.978: E/AndroidRuntime(203):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.os.Looper.loop(Looper.java:123)
06-14 10:12:36.978: E/AndroidRuntime(203):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-14 10:12:36.978: E/AndroidRuntime(203):  at java.lang.reflect.Method.invokeNative(Native Method)
06-14 10:12:36.978: E/AndroidRuntime(203):  at java.lang.reflect.Method.invoke(Method.java:521)
06-14 10:12:36.978: E/AndroidRuntime(203):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-14 10:12:36.978: E/AndroidRuntime(203):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-14 10:12:36.978: E/AndroidRuntime(203):  at dalvik.system.NativeStart.main(Native Method) 
```

所以请告诉我如何将动态行设置为表格视图。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:16:14.897

问题是因为您只创建`TableRow`一次（在`while`循环外）并多次添加它。

`while`解决方案 - 在循环内移动对象创建：

```
Iterator<Record> it = recordsList.iterator();
while (it.hasNext()) {

    TableRow tr = new TableRow(TestHeavyDBActivity.this);
    LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    lp.setMargins(5, 5 , 5, 5);
    tr.setLayoutParams(lp);

    //populate the TableRow
    // ...

    t1.addView(tr, new TableLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:05:03.157

使用`TableLayout.LayoutParams`insted `LayoutParams`_

```
LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T05:10:57.660

在我的代码中看到的 linearContainer 是 Table。

```
linearContainer = new TableLayout(getApplicationContext());
TableLayout.LayoutParams tab_lp = new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
linearContainer.setLayoutParams(tab_lp); 
```

所以设置表参数后。

```
 for (int j = 0; j < productList.length; j++)
    {
        createLayout2(productList[j], beerBrand);   

    } 
```

然后创建方法

```
public void createLayout2(String product, final String beerBrand) { 

    TableRow row = new TableRow(this);

    final TextView tvProduct = new TextView(getApplicationContext());

    LinearLayout.LayoutParams lp_l3 = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, (LayoutParams.WRAP_CONTENT));
    tvProduct.setLayoutParams(lp_l3);
    tvProduct.setText(product);

    row.addView(tvProduct,  new TableRow.LayoutParams(1));
    linearContainer.addView(row,new TableLayout.LayoutParams());        

} 
```

所以我认为你必须添加如下行

```
 row.addView(tvProduct,  new TableRow.LayoutParams(1));
 linearContainer.addView(row,new TableLayout.LayoutParams()); 
```

# sharepoint - 修改共享点编辑对话框

> ID：11026902
> 
> 赞同：2
> 
> 时间：2012-06-14T05:00:34.423
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-api, sharepoint-feature

我已经成功地在 sharepoint 中创建了一个功能，它可以修改现有的编辑对话框并像这样向它添加一个自定义按钮。

![修改共享点对话框](../Images/d94e64bf6ea844d0132f3497f7639667.png)

而且我知道当用户单击这样的自定义按钮时，我可以传回数据。

```
<CommandUIHandlers>
    <CommandUIHandler Command="ActivateUser" CommandAction="/_layouts/MyFeature/MakeUserActive.aspx?ListID={ListId}&amp;ItemID={ItemId}&amp;ItemUrl={ItemUrl}&amp;ListUrlDir={ListUrlDir}" />
</CommandUIHandlers> 
```

[如此处](http://msdn.microsoft.com/en-us/library/ff458385.aspx)详述

我现在可以处理列表项并对其执行所需的操作，但是鉴于此按钮已添加到修改上下文中（IE：在共享点编辑项对话框中），如果您想保存对数据本身的更改怎么办？

对我来说，使用自定义按钮似乎总是意味着丢失用户对数据所做的任何更改。有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T07:40:24.193

好问题！

您实际上已经链接到解决方案：现在您只是通过使用 URL 作为您的 CommandAction 来重定向用户：`CommandAction="/_layouts/MyFeature/MakeUserActive.aspx?ListID={ListId}&amp;ItemID={ItemId}&amp;ItemUrl={ItemUrl}&amp;ListUrlDir={ListUrlDir}"`

这当然会将用户重定向到另一个页面而不保存当前条目。您要做的是使用 MSDN 文章中链接的 Javascript：

```
CommandAction="javascript:alert('here be dragons');" 
```

您可以在此处使用 SharePoint Javascript 对象模型并使用类似的东西`SP.ListOperation.Selection.getSelectedItems();`，也可以使用完整的自定义代码。
从您的 aspx 页面名称中，我可以看到您想要“激活使用”（顺便说一句：“ActivateUser.aspx”不是更好吗？）。如果这只是意味着在另一个列表中设置一个属性，您可以使用 SharePoint OM 执行此操作，如果它是一些自定义内容，您将需要一个 Web 服务，您可以从 JavaScript 调用它并像这样“激活用户”。当然，您始终可以访问当前表单并传递用户输入的值。或者您可以创建一个自定义[保存按钮](http://nerudo.mregi.com/post/12281535574/sharepoint-2010-survey-list-custom-new-edit-form-save)，在保存之前执行一些操作（激活用户）。

最后：您还可以在自定义按钮中进行回发，您可以在其中做任何您想做的事情。

# symfony - Symfony2：如何限制注册用户对登录页面的访问

> ID：11026903
> 
> 赞同：1
> 
> 时间：2012-06-14T05:00:37.423
> 
> 标签：symfony, fosuserbundle

我有一个带有独立登录页面的 Symfony2 应用程序。这是我的快照`security.yml`

```
# defaut login area for standard users
        main:
            pattern:            .*
            form_login:
                provider:       fos_userbundle
                login_path:     /auth/login
                use_referer:    true
                check_path:     /auth/login_check
                always_use_default_target_path: false
                default_target_path: gd_top_merchants
            logout:
                path:           /auth/logout
                target:         /
            anonymous:          true

    role_hierarchy:
        ROLE_ADMIN:       [ROLE_USER, ROLE_SONATA_ADMIN]
        ROLE_SUPER_ADMIN: [ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    access_control:
        # URL of FOSUserBundle which need to be available to anonymous users
        - { path: ^/_wdt, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/_profiler, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }

        # -> custom access control for the admin area of the URL 
```

现在，如果登录用户键入 /auth/login，他就可以访问登录页面。我不希望这种情况发生。我怎样才能做到这一点？

我正在使用`JMSSecurityExtra`捆绑`JMSDiExtra`包。

我还没有扩展任何`FOSUserBundle`控制器。有没有办法在不覆盖的情况下解决我的问题`loginAction`？

# php - 在codeigniter中清理输出

> ID：11026904
> 
> 赞同：0
> 
> 时间：2012-06-14T05:00:40.017
> 
> 标签：php, javascript, codeigniter

我在我的项目中使用 codeigniter。我有很多带有特殊字符的数据，如引号（'，"）。当我们在一些 JavaScript 函数中动态地以表单形式打印它们时，它破坏了 JavaScript 函数。所以有什么方法可以清理（期待像做 addlashes 之类的事情（ ）所有输出数据）通过codeigniter查询的所有输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:17:37.690

用于`quotes_to_entities()`将引号更改为 html 实体

[在这里查看](http://codeigniter.com/user_guide/helpers/string_helper.html)

# jquery - 使用 JQuery ajax 调用 PHP 文件，处理，但保持在同一页面上

> ID：11026907
> 
> 赞同：0
> 
> 时间：2012-06-14T05:00:56.767
> 
> 标签：jquery

此代码在实时站点上（按原样）工作。我试图通过 XAMPP 在 localhost 上运行它，但没有调用 addToCart.php。

想知道是否有更好的方法来编写它，因此它更健壮并且也可以在 localhost 配置上工作。我对 JQuery 或 PHP 不是很熟悉，这从代码中可能很明显。

```
<a id="atcAnchorTag'.$thisProduct['id'].'" 
href="#" 
onclick="
jQuery.ajax(\'./addToCart.php?id='.$thisProduct['id'].'\');
jQuery(atcAnchorTag'.$thisProduct['id'].').hide();
jQuery(rfcAnchorTag'.$thisProduct['id'].').show();
jQuery(mt'.$thisProduct['id'].').hide();
jQuery(grn'.$thisProduct['id'].').show();
scItemsCountJS++ ;
return false ; "
style="display:'.$atcDisplayType.'">add to cart</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:35:09.470

实际上，Blender 是正确的，如果有办法，我会相信他的答案。按照他的建议重写代码并不是很困难，但我自己花了很长时间才弄清楚。

这是有效的。HTML：

```
<a id="atcAnchorTag'.$thisProduct['id'].'" 
    href="#" 
    style="display:'.$atcDisplayType.'">
    add to cart
</a> 
```

查询：

```
<script type="text/javascript">
    $("#atcAnchorTag'.$thisProduct['id'].'").click(function() { 
        //alert("Hello");
        jQuery(atcAnchorTag'.$thisProduct['id'].').hide();
        jQuery(rfcAnchorTag'.$thisProduct['id'].').show();
        jQuery(mt'.$thisProduct['id'].').hide();
        jQuery(grn'.$thisProduct['id'].').show();
        scItemsCountJS++ ;
        var prodid = '.$thisProduct['id'].';
        $.post("addToCartJQ.php", {id: prodid}, function() {
        });
    });
</script> 
```

# asp.net - 我无法使用 UpdatePanel 的 Gridview 中的 FileUpload，也使用了触发器，我该如何解决这个问题？

> ID：11026908
> 
> 赞同：0
> 
> 时间：2012-06-14T05:01:03.837
> 
> 标签：asp.net, ajax, gridview, updatepanel

我想使用`UpdatePanel`我的`GridView`，但是即使我添加了触发器， `FileUpload`in`GridView`也不起作用......因为它找不到`FileUpload` `Button`，解决方案是什么？

```
<asp:TemplateField HeaderText="Upload Kundli">
  <ItemTemplate>
    <asp:FileUpload ID="FileUpload1" runat="server" /><br />
    <asp:Button ID="btnupload" runat="server" Text="Upload" OnClick="btnupload_Click" />
  </ItemTemplate>
  <ItemStyle HorizontalAlign="Center" />
  <HeaderStyle HorizontalAlign="Center" />
</asp:TemplateField>

</Columns>

</asp:GridView>

</ContentTemplate>
<Triggers>
  <asp:PostBackTrigger ControlID="btnupload" />
</Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:47:43.887

这是我通过后面的代码实现的一种方法，它只是一个虚拟模型，可以给你一个想法：

ASPX 代码：

```
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">        
    </asp:ScriptManager>  

<asp:UpdatePanel runat="server">
<ContentTemplate>
    <asp:Label runat="server" ID="Label1" Text=""></asp:Label>    
<asp:GridView runat="server" ID="GridView1" OnRowDataBound="GridView1_RowDataBound">
    <Columns>
    <asp:TemplateField HeaderText="Upload Kundli">
                                <ItemTemplate>
                                    <asp:FileUpload ID="FileUpload1" runat="server" /><br />
                                    <asp:Button ID="btnupload" runat="server" Text="Upload"       OnClick="btnupload_Click" />
                                </ItemTemplate>
                                 <ItemStyle HorizontalAlign="Center" />
                                <HeaderStyle HorizontalAlign="Center" />
                            </asp:TemplateField>

          </Columns>

    </asp:GridView>

    </ContentTemplate>

        </asp:UpdatePanel>
        </form> 
```

代码背后（ASPX.CS）：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                List<int> gridItems = new List<int>();
                gridItems.Add(1);
                gridItems.Add(2);
                GridView1.DataSource = gridItems;
                GridView1.DataBind();
            }
        }

        protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
        {
            //May not need this if. So check depending on what and how you are binding.
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                Button UploadButon = (Button) e.Row.Cells[0].FindControl("btnupload");
                if(UploadButon != null)
                {
                    if (this.ScriptManager1 != null)
                    {
                        this.ScriptManager1.
                            RegisterAsyncPostBackControl(UploadButon);
                    }
                }

            }

        }
        protected void btnupload_Click(object sender, EventArgs e)
        {
            Label1.Text = Label1.Text + "a";
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:54:43.150

FileUpload 需要完整的回发才能工作。

*   尝试将 GridView 放在 UpdatePanel 中。
*   设置gridview的OnRowCommand="GridView1_RowCommand"事件
*   将命令名设置为按钮 CommandName="upload"

    ```
     <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="conditional">
       <Triggers>
         <asp:PostBackTrigger ControlID="btnupload" />
       </Triggers>
       <ContentTemplate>
          <asp:GridView ID="GridView1" Runat="server" OnRowCommand="GridView1_RowCommand">
          <Columns>
            <asp:TemplateField HeaderText="Upload Kundli">
             <ItemTemplate>
                <asp:FileUpload ID="FileUpload1" runat="server" /><br />
                <asp:Button ID="btnupload" runat="server" Text="Upload" CommandName="upload" />
             </ItemTemplate>
           </asp:TemplateField>
      </Columns> 
    ```

现在通过 rowcommand 事件获取 Button。

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "upload")
    {
       //your stuff
    }
} 
```

# c++ - 在 Visual C++ 中必须有 const 值

> ID：11026911
> 
> 赞同：0
> 
> 时间：2012-06-14T05:01:25.700
> 
> 标签：c++, visual-c++

我有这个代码：

```
std::string name = "kingfisher";
char node_name[name.size()+1];
strcpy(node_name,name.c_str());
node_name[name.size()] = '\0'; 
```

它在 DevC++ 中运行良好，但在 Visual C++ 中，我遇到了一个名为“name.size() 必须是常量值”的问题！如何解决问题？我知道我必须在声明中使用 const 值`node_name`，但有时（如上面的情况）我不能！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:04:36.940

```
char node_name[name.size()+1]; 
```

由于`name.size()`在编译时不知道 的值，因此在上述声明中，`node_name`是可变长度数组 (VLA)，这在 ISO C++ 中是不允许的。

在 DevC++ 中，它可以编译并工作，因为它提供 VLA 功能作为扩展，在您的编译配置中启用。

使用`std::string`，或`char *`与`new[]/delete[]`任何适合您需要的东西一起使用。

在您的特定情况下，即如果您已经知道字符串文字，那么您可以这样写：

```
char node_name[] = "kingfisher"; //this works great! 
```

但是，如果字符串值未知并且您想从某处复制它，请执行以下操作：

```
char *node_name = new char[name.size()+1];
std::strncpy(node_name, name.c_str(), name.size()+1); //use strncpy

//work with node_name

//must deallocate the memory
 delete []node_name; //not `delete node_name;` 
```

使用`std::strncpy`代替`std::strcpy`，因为前者将缓冲区大小也作为第三个参数，如上所示，而后者则没有（这通常是不安全的；但在这种情况下不是）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T05:04:27.800

可变长度数组不是标准 C++ 的一部分。您需要在编译时给出大小。`name.size()`将在运行时发生。注释应该足以解释幻数或常数。

```
char node_name[11]; //length of "kingfisher" + null 
```

如果您在编译时不知道字符串的长度（但在您的示例中知道），您可以使用动态数组，正如 Nawaz 的回答中很好解释的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T05:19:57.207

有很多选择：

```
std::string name = "kingfisher";
char* node_name = alloca(name.size() + 1);
strcpy(node_name, name.c_str());
// no need to explicitly set the '\0' - strcpy copies it too
...OR...
char* node_name = new char[name.size() + 1];
strcpy(node_name, name.c_str());
...OR...
char* node_name = strdup(name.c_str());  // allocate on malloc/free/realloc "C" heap
...OR...
std::vector<char> node_name(name.data(), name.data() + name.size()); // sans '\0'
...OR...
std::vector<char> node_name(name.c_str(), name.c_str() + name.size() + 1); // with '\0'
...OR...
std::string node_name = node;  // do something with node_name.c_str() / .data() etc. 
```

注意：尽管 Ernest 对 Stefan 的已删除答案发表了“不要在 C++ 中使用 malloc()，使用 new[]”的评论，但它可能是必要的 - 例如，当传递指向可能重新分配或释放内存的 C 代码的指针时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T05:05:42.117

大小在运行时确定的数组称为*变长数组*或*VLA*。VLA 是 C99 中的一个特性。一些 C++ 编译器支持它们作为扩展，而一些不支持；听起来你的 Visual C++ 版本没有。

`node_name`您始终可以使用 动态分配`new`，而不是在堆栈上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T08:30:40.490

我的第一种方法是查看您使用数组的目的，并询问是否有更好的方法。

如果你真的需要这个数组，我会建议一个向量：它是动态大小的，但不需要删除。

```
 std::string name = "kingfisher";
    std::vector<char> name_buff(name.begin(), name.end());
    name_buff.push_back(0);  // nul-terminate
    char *node_name = &name_buff[0];
    // ... 
```

# jquery - 使用第 n 个孩子

> ID：11026915
> 
> 赞同：1
> 
> 时间：2012-06-14T05:02:32.040
> 
> 标签：jquery, html, css-selectors

我正在尝试通过 nav9 添加 nav1 及其工作，但它也在它之前添加了所有额外的类。所以第二个导航项目的类最终是“nav1 nav2”等等。我只想要“nav1”作为第一个导航项目，“nav2”用于第二个，“nav3”用于第三个等等。这就是我所拥有的：

```
$("#navigation ul li:nth-child(n)").addClass("nav1")
$("#navigation ul li:nth-child(n+2)").addClass("nav2")
$("#navigation ul li:nth-child(n+3)").addClass("nav3")
$("#navigation ul li:nth-child(n+4)").addClass("nav4")
$("#navigation ul li:nth-child(n+5)").addClass("nav5")
$("#navigation ul li:nth-child(n+6)").addClass("nav6")
$("#navigation ul li:nth-child(n+7)").addClass("nav7")
$("#navigation ul li:nth-child(n+8)").addClass("nav8")
$("#navigation ul li:nth-child(n+9)").addClass("nav9") 
```

我看到它说 n+#，但我如何让它只显示我想要的 1 个类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:04:25.713

这样做

```
$("#navigation ul li").each(function(i){
   $(this).addClass('nav'+(i+1));
}); 
```

[。每个（）](http://api.jquery.com/each/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:05:45.500

尝试这个：

```
$("#navigation ul li").each(function(i, v){
    $(this).addClass('nav' + (i + 1))
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:06:01.637

你也可以这样做：

```
var liCount = $("#navigation ul li").size();
var modConstant = 9;
for(var i=0;i<liCount;i++){
    $("#navigation ul li:eq(" + i + ")").addClass("nav" + ((i % modConstant)+1));
} 
```

mod 用于重复第 10 个列表项上的 nav1 类，第 11 个列表项上的 nav2 等类，因为您在这里使用 nth-child。

如果您只想在第 10 个元素上使用 nav10 并在第 11 个元素上使用 nav11 重复一次，依此类推，您可以使用如下模式：

```
var liCount = $("#navigation ul li").size();
for(var i=0;i<liCount;i++){
    $("#navigation ul li:eq(" + i + ")").addClass("nav" + (i+1));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T05:17:27.863

您可以使用`each function`它不会一次又一次地重复课程。声明你的变量，你想从什么数字开始你的课程，例如`i=1`应用像 nav1、nav 2 这样的类......

不管你有多少物品，它都会按顺序添加类。

```
var i = 1;
$(".nav li").each(function() {
    $(this).addClass('nav' + i);
    i++
})​ 
```

[这是一个演示](http://jsfiddle.net/C5F5R/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T05:19:25.320

无需过多地清理你的 javascript，我认为复习一下“nth-child”是什么以及它是如何使用的可能会有用。

在等式“n+5”中，“5”是起点，“n”是所有正整数（包括零）的集合。因此，CSS 规则将从 5 开始应用于*每个子元素*

在等式“2n+5”中，起点是 5，2n = {0, 2, 4, 6, 8, etc.}。因此 CSS 规则将应用于第 5 个子元素 (0 + 5)，然后是第 7 个 (2 + 5)、第 9 个 (4 + 5)、第 11 个 (6 + 5) 等。

因此，要修复您的代码，请从每个`nth-child()`指令中删除“n”。

**前任：**

改变

`$("#navigation ul li:nth-child(n+6)").addClass("nav6")`

至

`$("#navigation ul li:nth-child(6)").addClass("nav6")`

阅读此处了解更多详细信息... [w3.org N-th Child](http://www.w3.org/TR/selectors/#nth-child-pseudo)

# cordova - 如何在没有插件的情况下将 Google Analytics 与 Phonegap 一起使用？

> ID：11026916
> 
> 赞同：46
> 
> 时间：2012-06-14T05:02:39.127
> 
> 标签：cordova, google-analytics, phonegap-plugins

我正在制作一个应用程序，我想从用户那里获得分析。我尝试使用 Phonegap 插件，但我没有任何运气尝试实现它。

我想知道是否可以通过将应用程序视为普通网页并在我的页面头部放置一些 javascript 来获得 Google Analytics。

有一个更好的方法吗？Phonegap Google Analytics 是否比我正在尝试做的要好得多？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-14T05:02:39.720

查看视频以查看其实际效果：

[http://screencast.com/t/6vkWlZOp](http://screencast.com/t/6vkWlZOp)

经过一番研究，我找到了解决方案。我在 Phonegap Google Group 上遇到了这个帖子：[https](https://groups.google.com/forum/#!msg/phonegap/uqYjTmd4w_E/YD1QPmLSxf4J) ://groups.google.com/forum/#!msg/phonegap/uqYjTmd4w_E/YD1QPmLSxf4J（感谢 TimW 和 Dan Levine！）在这个帖子中我发现有可能在没有插件的情况下使用 Google Analytics。您所要做的就是从 Google [http://www.google-analytics.com/ga.js](http://www.google-analytics.com/ga.js)下载 ga.js 文件（只需将页面保存到您的 www 文件夹中）

然后通过添加一个字符来修改 ga.js 文件。在 ga.js 文件中搜索单词“file:”并将其替换为“_file:”。

在我上面链接的线程中，“TimW”解释了这样做的原因：

> 从本质上讲，如果从 file:/// url 使用 Google Analytics，它就无法工作。在 iOS/PhoneGap 中就是这种情况。为了解决这个问题，您必须首先从 google 下载 ga.js 文件并将其作为本地构建的一部分。你会注意到这个文件被混淆了。在文件中搜索应该只出现一次的字符串“file:”。当你找到它时，在开头添加一个下划线（这样它就变成了“_file:”）。这可以防止它匹配页面位置的协议（即“文件：”）。

在 ga.js 文件中添加一个字符后，只需在页面顶部包含以下内容：

```
<script type="text/javascript" src="ga.js"></script>
    <script>
 var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-YOUR_ID_HERE']);
    _gaq.push(['_setDomainName', 'none']);
    _gaq.push(['_trackPageview', 'NAME_OF_PAGE']);
    </script> 
```

我在模拟器上对此进行了测试，并证明它使用 Google Analytics 中的实时视图工作。模拟器在 iOS 5.0 上运行。我的手机仍在 iOS 4.2 上，当我在我的设备上对其进行测试时，它没有显示在实时跟踪中。

在线程中，有人提到了与 Android 4.0+ 相同的问题......希望将来会有更好的解决方案，但目前这是为我的应用程序获取基本分析的最简单和最简单的方法。它不能进行离线跟踪，但无论如何这有点令人毛骨悚然。

尽管 iOS 4 和 Android 用户在市场上是少数（见饼图）：

[http://static7.businessinsider.com/image/4fd65fac6bb3f7925700000f/chart-of-the-day-ios-vs-android-june-2012.jpg](http://static7.businessinsider.com/image/4fd65fac6bb3f7925700000f/chart-of-the-day-ios-vs-android-june-2012.jpg)

我仍然想从所有操作系统中获取数据。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-04T09:37:54.833

# [编辑] Google Analytics 现在可以在混合应用程序中使用本地存储。

Google Analytics 现在在[这里解释了](https://developers.google.com/analytics/devguides/collection/analyticsjs/cookies-user-id#automatic_cookie_domain_configuration)一个使用 LocalStorage 而不是 cookie 的选项，并且还有一个 hack 可以使其在 webviews ( `file://`urls ) 中工作。因此，您可以这样做，而不是使用我之前建议的代码：

```
// THIS IS FOR LOCALSTORAGE
var GA_LOCAL_STORAGE_KEY = 'ga:clientId';
ga('create', 'UA-XXXXX-Y', {
  'storage': 'none',
  'clientId': localStorage.getItem(GA_LOCAL_STORAGE_KEY)
});
ga(function(tracker) {
  localStorage.setItem(GA_LOCAL_STORAGE_KEY, tracker.get('clientId'));
});

// THIS IS FOR FILE URL SUPPORT
ga('set', 'checkProtocolTask', function(){ /* noop */});

// And then as usual...
ga('send', 'pageview'); 
```

# 之前的回答内容：

Alex 建议的 pokki 解决方案通过一些调整来消除对 Pokki 的需求，效果很好。

我在这里为这个清理版本创建了一个 git 项目：

[https://github.com/ggendre/GALocalStorage](https://github.com/ggendre/GALocalStorage)

在 android 4.1 和 ios6 上运行良好，我将很快测试更多设备。希望这可以帮助 ！:)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-02-14T01:47:19.383

这是 2017 年 2 月，不需要编辑 analytics.js，也不需要库或插件，或者至少我不需要它们。过去几年所说的许多事情都已被弃用或过时，所以这是我最新的综合指南。

**1.config.xml文件**

在您的 config.xml 中，您必须允许跨站点请求：

`<access origin="https://www.google-analytics.com" />`

**2\. HTML**

在您的 CSP 元标记中，如果您选择有一个，您还必须允许调用 Google。它可能看起来像：

`<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' 'unsafe-eval' https://ssl.gstatic.com https://www.google-analytics.com;">`

**3\. javascript**

这是可以在浏览器和 Cordova 打包应用程序中运行的 web 应用程序的注释代码。`else`如果您不关心浏览器，则可以忽略该块。

```
// the default GA code, nothing to change
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

var fields = {
  // note: you can use a single tracking id for both the app and the website,
  // don't worry it won't mix the data. More about this in the 3rd section
  trackingId: 'UA-XXXXXXXX-Y'
};

// if we are in the app (the protocol will be file://)
if(document.URL.indexOf('http://') !== 0){

  // we store and provide the clientId ourselves in localstorage since there are no
  // cookies in Cordova
  fields.clientId = localStorage.getItem('ga:clientId');
  // disable GA's cookie storage functions
  fields.storage = 'none';

  ga('create', fields);

  // prevent tasks that would abort tracking
  ga('set', {
    // don't abort if the protocol is not http(s)
    checkProtocolTask: null,
    // don't expect cookies to be enabled
    checkStorageTask: null
  });

  // a callback function to get the clientId and store it ourselves
  ga(function(tracker){
    localStorage.setItem('ga:clientId', tracker.get('clientId'));
  });

  // send a screenview event
  ga('send', {
    // these are the three required properties, check GA's doc for the optional ones
    hitType: 'screenview',
    // you can edit these two values as you wish
    screenName: '/index.html',
    appName: 'YourAppName'
  });
}
// if we are in a browser
else {

  ga('create', fields);

  // send a pageview event
  ga('send', {
    // this is required, there are optional properties too if you want them
    hitType: 'pageview'
  });
} 
```

**3.您的GA账户**

*   要监控移动应用程序的流量，请创建该`App`类型的视图。

如果您不需要监控来自网站的 Web 应用程序的流量，您可以在此处停止阅读，否则请继续阅读。我假设您使用单个帐户来跟踪网站和应用程序。

*   在创建的视图上应用名为“Application? => yes”的自定义过滤器，以便它只显示`screenview`命中。[这里](https://developers.google.com/analytics/devguides/collection/analyticsjs/screens)有官方指南
*   然后，要跟踪来自网站的流量，请创建该`Website`类型的第二个视图。在其上应用自定义过滤器“应用程序？=> 否”。
*   如果您想要在线和应用内流量的合并视图，请创建该`App`类型的第三个视图。默认情况下（没有过滤器），它将显示所有数据。

**补充说明**

*   `<access>`现在一切都通过 https，您和 CSP中不再需要 http 协议
*   请注意，`*.google-analytics.com`在 CSP 中写入是行不通的。尽管该策略适用于 Chrome (56)，但不适用于 Cordova (5.6.0)
*   谷歌分析不需要任何应用程序权限，如我在其他地方读到的 ACCESS_NETWORK_STATE 或 ACCESS_WIFI_STATE
*   所有这些都使用 Android 应用程序进行了测试（我希望它也可以在 iOS 应用程序中运行），并安装了 Crosswalk 插件

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-09T15:41:46.717

**这一年是 2019 年 11 月**，谷歌不断更新他们的 API、“最佳”实践等，但没有任何好的文档或向后兼容性。

这是我为我的解决方案所做的，我在这里使用了两个答案的组合。

在我开始之前，如果您正在阅读本文并且您遇到了科尔多瓦的谷歌分析/firebase 插件的问题，请留下它们**，**使用 webview 时，您不需要任何插件。

1）首先你必须去谷歌分析并创建一个新的“属性”来衡量“网站”活动（谁知道在你阅读这篇文章时这些将如何被调用，但一切都应该在“管理”部分面板）。

这里想到的问题之一是“但它需要 url，我没有 url 我正在制作 Cordova 应用程序”

是的，你是对的，对于我使用我的应用程序 API 的 URL（这意味着你输入的任何 URL 很可能都可以使用）

2）然后按照@Louis Ameline 的回答中的说明进行操作，这就是[这个](https://stackoverflow.com/a/42216498/2204279)，您将在您的应用程序中加载脚本并准备好使用。

3) 现在，如果您在浏览器中运行您的应用程序，一切都应该没问题，您可能会在“实时分析”中看到有 1 个在线用户。

[4）现在为了在 Webview 中工作，您应该在此处](https://stackoverflow.com/a/14154554/2204279)遵循@Guillaume Gendre（更新的）的答案。我只是复制粘贴的代码（当然还有我的 trackingId），现在当我构建应用程序并在我的 Android 上运行它时，它会按预期工作并发送分析。

* * *

我希望我的解决方案实际上可以帮助某人并节省一些时间。只需保留所有插件，因为它们会导致构建不成功的深洞，并且不会因为版本问题而结束。

此外，我的应用程序是基于 React 的，但这根本不重要，它应该适用于所有框架和库，因为这是纯 js。我建议你对这类问题使用这种解决方案，因为它没有连接到任何特定的库。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-28T09:16:37.310

我正在使用 Ionic 应用程序（基于 cordova）作为移动网站，GA 正在为此工作。当我将相同的应用程序发送到本机 ios 时，它停止工作。

**问题1.**
查看模拟器的日志，发现GA没有正确加载。它正在尝试负载`file://`。`https:`为了解决这个问题，我在 GA 网址前面添加了

```
(window,document,'script','//www.google-analytics.com/analytics.js','ga') 
```

**问题 2.** 如果页面协议不是 http 或 https，Google 默认会中止请求。要解决这个问题

```
ga('set', 'checkProtocolTask', null); 
```

你应该准备好了。进行这些更改后，我能够在 GA 上确认事件。希望对你也有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-23T12:54:23.077

没有为我工作。谷歌代码使用 cookie 的问题，它不适用于 file:// url。

我发现使用 localStorage 代替 cookie 的良好实现： [https ://developers.pokki.com/docs/tutorials.php](https://developers.pokki.com/docs/tutorials.php)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-25T10:57:57.877

我已经在 HTML5/meteor 应用程序中实现了 segment.io - analytics.js 库。

我在 phonegap (3.1) 中没有分析插件。立即为 iOS 工作。

实施后，来自 Android 应用的分析在大约 4 小时内没有显示。然后它开始工作，无需更改 phonegap 或流星设置。

希望这可以帮助人们避免花费几个小时来寻找一个神秘的错误。

注意：确保设置了正确的访问源，例如添加

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-02T12:05:13.153

这个[phonegap 插件](https://github.com/danwilson/google-analytics-plugin)将有助于将谷歌分析集成到 phonegap 应用程序中。 [阅读此博客](http://shashibadhuk.com/phonegap/implement-google-analytics-on-phonegap-mobile-app/)以了解更多如何在 phonegap 中集成谷歌分析。您也可以从[这里](https://github.com/ShashiBadhuk/Cordova-Google-Analytics-Demo)下载工作演示代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-18T11:49:13.270

对我来说，事实证明不需要插件！我有用 Cordova 包装的 Angular 8 应用程序（与 Ionic 的用例非常相似）我在 Google Analytics 中注册了新网站。我将 GA 的代码修改为如下所示：

```
const gaScript = document.createElement('script');
        gaScript.src = "https://www.google-analytics.com/analytics.js";
        gaScript.type = "text/javascript";
        document.getElementsByTagName('head')[0].appendChild(gaScript);
        gaScript.onload = (ev: Event) => {
            const GA_LOCAL_STORAGE_KEY = 'ga:clientId';
            window['ga']('create', 'XXXX-XXXXX', {
                'storage': 'none',
                'clientId': localStorage.getItem(GA_LOCAL_STORAGE_KEY)
            });
            window['ga'](function(tracker) {
                localStorage.setItem(GA_LOCAL_STORAGE_KEY, tracker.get('clientId'));
            });

            // THIS IS FOR FILE URL SUPPORT
            window['ga']('set', 'checkProtocolTask', function(){ /* noop */});
            console.log('GA OK!')
        } 
```

然后我可以以常规方式使用 GA：window['ga']('send', 'pageview', screenName); 这是因为在使用 file:// 协议提供服务时没有自动跟踪页面更改。

这个解决方案非常方便，因为它是 DRY，因为我只有一种方法可以将 Google Analytics 嵌入到我的应用程序中，用于混合版本和托管版本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-25T16:10:28.430

您可以使用`GALocalstorage`库，它在移动设备上运行良好

很容易设置

```
<script type="text/javascript" src="js/libs/GALocalStorage.js"></script>
<script>
    ga_storage._setAccount('UA-37167XXX-1'); //Replace with your own
    ga_storage._trackPageview('/index.html');

</script> 
```

就是这样，没有修改或其他任何东西。

> 您需要创建`Website Account`才能`Google analytics`使用此库

[GitHub 上的库](https://github.com/ggendre/GALocalStorage)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-13T08:56:27.723

对于在 Android 4.1 或其他特定平台上遇到 Guillaume Gendre 的出色解决方案的任何人，这可能会解决他们。

如果您的 Android 控制台日志显示“Unknown Chromium error: 0”，您可能需要在 config.xml 中优化您的访问权限。我解决了我的问题并在[此处](https://stackoverflow.com/questions/18654693/phonegap-how-to-use-google-analytics-without-plugin/18782123#18782123)进行了描述。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-05-16T04:43:09.743

快速而肮脏的解决方案。使用可以像这样使用一个光隐藏的 iframe；

```
<iframe src="http://www.yourwebsite.com/userControls/GoogleAnalytics.html?param=extraParamHere" style="visibility: hidden"></iframe> 
```

并且每次在 PhoneGap 应用中请求页面时，重新加载此 iframe 以初始化轨道。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-09T11:24:24.117

注意：为移动平台生成的 Google Analytics 客户端跟踪 ID 仅支持 IOS 和 Android。因此，如果您想跟踪您的谷歌分析，请确保您已为网站创建它。只有网站的 Tracking ID 适用于所有平台应用程序的电话间隙。然后，您可以从下面的链接简单地下载 GALocalStorage，然后将其放在 www 文件夹下的 js 文件夹中

```
www
 |__
    js
      |__
          GALocalStorage.js 
```

然后在您的 <head> 标签下编写以下代码，并开始在您的仪表板中显示实时活动用户。

[https://github.com/ggendre/GALocalStorage](https://github.com/ggendre/GALocalStorage)

```
 <script>
        ga_storage._setAccount('UA-XXXXXXXX-X'); //Replace with your own
        ga_storage._trackPageview('Home Screen');
        </script> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-12-09T21:20:25.287

我想加我的 2 美分。和这里的每个人一样，我对分析插件没有运气，所以开始寻找纯 JavaScript 解决方案。

我遵循[了这个答案](https://stackoverflow.com/a/42216498/2534191)，它对我有用。意味着，我可以在 Google Analytics Realtime 中看到将用户活动与浏览器和 iOS 模拟器分开。（还没有测试过安卓。）

我稍微改变了脚本。

1)

```
// if we are in the app (the protocol will be file://)
if(document.URL.indexOf('http://') !== 0){ 
```

改为

```
if(document.URL.indexOf('http') !== 0){ 
```

包括*https*案例。

2) 与我所在的位置无关：在浏览器或移动应用程序中，我跟踪如下事件：

```
ga('send', 'event', '<myAppName>', '<eventName>'); 
```

所以我可以在同一个分析属性下跟踪不同的应用程序。

**在 Google Analytics 中**，我创建了一个属性，并在此属性下创建了三个视图。一种是Web 类型，另一种是Mobile 类型。

**将自定义**过滤器应用于每个视图：

应用到 iOS 视图**包括**字段**操作系统**上的过滤器，值为**iOS**

到 Android 视图应用在字段**操作系统上****包含**过滤器，值为**Android**

 ****到 Web 视图在字段**操作系统上应用了两个****排除**过滤器，其值为**Android**和**iOS**

 ******快乐的绳索！**********

# sql-server-2008 - SQL Server 2008 创建过程和创建视图

> ID：11026920
> 
> 赞同：-1
> 
> 时间：2012-06-14T05:03:19.257
> 
> 标签：sql-server-2008, stored-procedures, view

我试图创建一个视图和一个过程。然而，没有一个可以做到。

我试过创建这样的过程：

```
create procedure name ( @time )
as 
begin
    select tag_ID from Location where tag_ID=@time;
end

create procedure name 
as 
    select tag_ID from Location where tag_ID=@time;
end 
```

两者都导致以下错误

> 主要错误 0x80040E14，次要错误 25501 create procedure name as select tag_ID from Location where tag_ID=@time 解析查询时出错。[令牌行号=1，令牌行偏移量=8，错误令牌=过程]

用于创建视图

```
create view Time as select time from Location; 
```

我收到的错误是：

> 主要错误 0x80040E14，次要错误 25501 create view Time as select time from Location 解析查询时出错。[令牌行号=1，令牌行偏移量=8，错误令牌=查看]

使用 CREATE 似乎有些问题，但我无法弄清楚。

我已经尝试了大部分语法，但似乎不起作用，其中大多数都会弹出相同的错误。

** 我使用的是 SQL 精简版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:10:53.803

您缺少过程参数中的类型。尝试这样的事情：

```
CREATE procedure name ( @time varchar(100)) 
AS BEGIN
    select tag_ID from Location where tag_ID=@time; 
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:11:14.180

错误，因为你失踪了`datatype for procedure's parameter`。注意：请重新检查您使用的数据类型我在这里使用日期时间。

```
CREATE PROCEDURE Name (@time DATETIME)
AS
BEGIN
  SELECT tag_id
  FROM   location
  WHERE  tag_id = @time;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:11:02.200

您使用的是 Sql Server 数据库引擎还是 SQL CE？我认为您正在使用不允许查看和过程的 SQL CE 或受限版本；

参考 [http://social.msdn.microsoft.com/Forums/uk/sqlce/thread/f6ba9114-a962-41c2-b142-448c0f427cce](http://social.msdn.microsoft.com/Forums/uk/sqlce/thread/f6ba9114-a962-41c2-b142-448c0f427cce)

# performance - 我的 VPS 服务器很慢。比我的共享托管慢得多

> ID：11026921
> 
> 赞同：0
> 
> 时间：2012-06-14T05:03:26.083
> 
> 标签：performance, vps

我最近从共享主机升级到 VPS 主机。但是 VPS 比共享主机慢得多。有什么建议吗？

我的网站是 www.sgyuan.com

```
顶部 - 08:59:55 上升 2 天，15:10，3 个用户，平均负载：0.52、0.40、0.36
任务：共 28 个，运行 1 个，睡眠 27 个，停止 0 个，僵尸 0 个
中央处理器：0.0%us、0.0%sy、0.0%ni、100.0%id、0.0%wa、0.0%hi、0.0%si、0.0%st
内存：总共 1048576k，已使用 499848k，空闲 548728k，0k 缓冲区
交换：总共 0k，使用 0k，免费 0k，缓存 0k

  PID 用户 PR NI VIRT RES SHR S %CPU %MEM TIME+ 命令
13782 mysql 15 0 157m 44m 6420 S 22 4.3 107:26.02 mysqld
19902 www-数据 15 0 66396 12m 6916 S 1 1.2 0:06.69 apache2
19924 www-数据 15 0 65928 12m 7120 S 1 1.2 0:07.39 apache2
    1 根 18 0 2604 1464 1212 S 0 0.1 0:02.46 初始化
 1155 根 15 0 2216 884 704 S 0 0.1 0:00.34 cron
 1203 系统日志 15 0 2020 724 572 S 0 0.1 0:02.38 系统日志
 1264 根 15 0 5600 2156 1736 S 0 0.2 0:03.12 sshd
 7555 根 15 0 8536 2884 2276 S 0 0.3 0:01.83 sshd
 7567 根 15 0 3104 1760 1412 S 0 0.2 0:00.02 重击
 7735 根 15 0 8548 2888 2268 S 0 0.3 0:01.86 sshd
 7751 根 18 0 3176 1848 1428 S 0 0.2 0:00.21 重击
18341 内存缓存 18 0 43924 1104 808 S 0 0.1 0:00.02 内存缓存
19549 根 18 0 63972 8824 4960 S 0 0.8 0:00.13 apache2
19897 www-数据 16 0 65652 12m 7008 S 0 1.2 0:06.78 apache2
19898 www-数据 15 0 65896 12m 7328 S 0 1.2 0:07.16 apache2
19899 www-数据 16 0 65932 12m 7328 S 0 1.2 0:07.29 apache2
19900 www 数据 15 0 65640 12m 7320 S 0 1.2 0:07.60 apache2
19901 www-数据 15 0 65676 12m 7048 S 0 1.2 0:10.32 apache2
19903 www 数据 15 0 65672 11m 6568 S 0 1.2 0:06.38 apache2
19904 www 数据 15 0 65640 12m 6876 S 0 1.2 0:06.32 apache2
19905 www-数据 15 0 65928 12m 6800 S 0 1.2 0:06.66 apache2
20452 绑定 18 0 105m 16m 2304 S 0 1.7 0:00.10 命名
21720 根 15 0 17592 13m 1712 S 0 1.3 0:12.25 miniserv.pl
21991 根 18 0 2180 996 832 S 0 0.1 0:00.00 xinetd
22378 根 15 0 2452 1128 920 R 0 0.1 0:00.06 顶部
23834 根 15 0 8536 2920 2272 S 0 0.3 0:23.63 sshd
23850 根 15 0 3184 1868 1436 S 0 0.2 0:00.44 巴什
29812 根 15 0 3820 1064 836 S 0 0.1 0:00.24 vsftpd

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:26:56.943

VPS 和共享主机配置的 Web 服务器配置是否相同？那将是我看的第一个地方，因为调整 apache 以使其表现良好并非易事。我假设使用 VPS，配置 Web 服务器是您 100% 的责任，您必须决定客户端数量、进程模型、操作码缓存等。

# performance - RHQ可以减慢系统速度吗？

> ID：11026923
> 
> 赞同：2
> 
> 时间：2012-06-14T05:03:39.403
> 
> 标签：performance, postgresql, jboss, openfire, rhq

我们已经安装了 RHQ 监控系统[http://rhq-project.org/display/RHQ/Home](http://rhq-project.org/display/RHQ/Home)。从那时起，我们的程序开始变慢。它发生在每天上午 9:20~30。RHQ可以减慢系统速度吗？因为我们的管理员声称 RHQ 不能减慢系统速度 :)

系统包括：

*   开火 3.7.1
*   JbossEAP 5.1
*   PostgreSQL 9.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:00:12.783

如果它每天都在同一时间发生，请监视机器此时正在做什么。“top”、“vmstat”和“iotop”的输出可能是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T18:24:46.533

Check the different metrics that are being gathered by RHQ. One thought could be that several metrics are being gathered at exactly the same time (which happens to be 9:20) and that is causing a bit of a slow down.

Is the slow down on only one server or are you monitoring multiple servers?

# android - Android 显示存储弹出窗口

> ID：11026932
> 
> 赞同：1
> 
> 时间：2012-06-14T05:04:41.847
> 
> 标签：android, dialog, popup

我有一个 android 应用程序，它将下载一个文件并将其保存到存储中。我希望我的应用程序显示一个弹出窗口，其中显示 /sdcard 中的所有列表文件，并让用户选择下载文件的放置位置。

我知道如何下载文件，但我不知道如何显示这样的弹出窗口。任何人都可以帮助我吗？

# android - 从android中的网站解析特定数据

> ID：11026937
> 
> 赞同：0
> 
> 时间：2012-06-14T05:05:13.840
> 
> 标签：android

我是 android 和 java 的新手。我想在我的 android 应用程序中显示来自网站的特定数据作为列表视图，然后将这些数据保存到 sqlite 数据库。谁能告​​诉我如何从网站获取所需的数据？

实际上我想从一开始就知道。因为我不明白如何开始。请帮助我。我需要以下问题的帮助 1.如何打开一个解析数据的项目？2.构建目标是什么？3.项目中如何使用jsoup或其他进程？

我在这里是全新的。所以，请帮助我。提前致谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T05:11:01.433

您可以使用 JSoup 解析。

你去[http://jsoup.org/cookbook/](http://jsoup.org/cookbook/)

JSoup 很棒而且非常有效，您会在上面的链接中找到很好的例子。

**首先，您必须使用以下方式连接到要解析的网页：**

```
Document doc = Jsoup.connect("http://example.com/").get(); 
```

**确保使用 Asynctask 或处理程序在非 ui 线程中执行上述代码。**

然后，您可以使用[JSoup 选择器语法](http://jsoup.org/cookbook/extracting-data/selector-syntax)选择页面元素。

例如，假设您要选择属性设置为的`div`标签的所有内容，您只需使用：`id``test`

`Elements divs = doc.select("div#test");`

要检索 div，然后您可以使用以下方法对其进行迭代：

```
for (Element div : divs)
    System.out.println(div.text());
} 
```

**下面是示例代码段。**

```
package org.jsoup.examples;

import org.jsoup.Jsoup;
import org.jsoup.helper.Validate;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import java.io.IOException;

/**
 * Example program to list links from a URL.
 */
public class ListLinks {
    public static void main(String[] args) throws IOException {
        Validate.isTrue(args.length == 1, "usage: supply url to fetch");
        String url = args[0];
        print("Fetching %s...", url);

        Document doc = Jsoup.connect(url).get();
        Elements links = doc.select("a[href]");
        Elements media = doc.select("[src]");
        Elements imports = doc.select("link[href]");

        print("\nMedia: (%d)", media.size());
        for (Element src : media) {
            if (src.tagName().equals("img"))
                print(" * %s: <%s> %sx%s (%s)",
                        src.tagName(), src.attr("abs:src"), src.attr("width"), src.attr("height"),
                        trim(src.attr("alt"), 20));
            else
                print(" * %s: <%s>", src.tagName(), src.attr("abs:src"));
        }

        print("\nImports: (%d)", imports.size());
        for (Element link : imports) {
            print(" * %s <%s> (%s)", link.tagName(),link.attr("abs:href"), link.attr("rel"));
        }

        print("\nLinks: (%d)", links.size());
        for (Element link : links) {
            print(" * a: <%s>  (%s)", link.attr("abs:href"), trim(link.text(), 35));
        }
    }

    private static void print(String msg, Object... args) {
        System.out.println(String.format(msg, args));
    }

    private static String trim(String s, int width) {
        if (s.length() > width)
            return s.substring(0, width-1) + ".";
        else
            return s;
    }
} 
```

最后但未列出。

> 如果您曾经做过异步操作，那么请在非 UI 线程中执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:23:21.077

有许多方法可以从 Web 中检索数据。数据可以是 json 字符串或 xml 的形式，两者都有不同的解析方式

对于 xml 解析，我们可以使用 SAX 解析器或 DOM 解析器

要了解有关 SAX 解析器的更多信息，请查看此链接：[试试这个！！！](http://www.happygeek.in/sax-parsing-in-android)

# sql - SQL Server 2008 列名“类型”未显示在更新查询中

> ID：11026938
> 
> 赞同：2
> 
> 时间：2012-06-14T05:05:15.273
> 
> 标签：sql, sql-server, tsql, sql-update

我有一个名为的表`Bowzer`，其中有一列名为`Type`.

当我尝试运行此查询时，SSMS 无法识别该列`Type`。

这是我的查询

```
update Bowzer
set inserted_by = ISNULL(inserted_by, 'Auto')
where (bowzer_id = 8 and inserted_by is null and type='CRUDE') 
```

在这里它无法识别列`Type`并给出错误

> 列名类型无效

`Type`不允许使用此列名吗？

另外，我想检查该`Inserted_By`列是否为空，然后将其替换为一个值`Auto`

我怎么做？

**编辑 - 表 Bowzer 的 1 个 DDL**

```
CREATE TABLE [dbo].[Bowzer](
    [bowzer_id] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
    [bowzer_no] [nvarchar](20) NULL,
    [quantity] [numeric](18, 0) NULL,
    [dip1] [numeric](18, 0) NULL,
    [Cmpt_Capacity1] [numeric](5, 0) NULL,
    [dip2] [numeric](18, 0) NULL,
    [Cmpt_Capacity2] [numeric](5, 0) NULL,
    [dip3] [numeric](18, 0) NULL,
    [Cmpt_Capacity3] [numeric](5, 0) NULL,
    [dip4] [numeric](18, 0) NULL,
    [Cmpt_Capacity4] [numeric](5, 0) NULL,
    [dip5] [numeric](18, 0) NULL,
    [Cmpt_Capacity5] [numeric](5, 0) NULL,
    [expiry_date] [datetime] NOT NULL,
    [status] [bit] NOT NULL,
    [inserted_on] [datetime] NULL,
    [inserted_by] [nvarchar](20) NULL,
    [Type] [nvarchar](50) NULL,
 CONSTRAINT [PK_Bowzer] PRIMARY KEY CLUSTERED 
(
    [bowzer_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:07:40.010

试试这个

```
update Bowzer
set inserted_by = ISNULL(inserted_by, 'Auto')
where (bowzer_id = 8 and inserted_by is null and [type]='CRUDE') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:11:30.887

检查是否为空，用例

```
Update Bowzer set inserted_by  = Case When inserted_by IS NULL THEN 'Auto' Else inserted_by End
where (bowzer_id = 8 and inserted_by is null and [type]='CRUDE') 
```

# internet-explorer - VBScript 检测用户是否退出/退出 Internet Explorer 窗口

> ID：11026949
> 
> 赞同：1
> 
> 时间：2012-06-14T05:06:15.517
> 
> 标签：internet-explorer, vbscript

我有一个进度指示器实现为我的脚本（VbScript）启动的一个小的 IE 窗口。除了在 HTML 文件中嵌入脚本之外，我希望有一种方法来检测用户是否退出此窗口，以便我可以“清理”。

是否有任何内置方法，使用 VBScript（再次，真的希望不在 html 中嵌入脚本）来检测用户是否退出了这个 IE 窗口？目前，我正在尝试检查 iexplore.exe 是否不存在，但是由于此进度对话框的性质，这被证明是一项艰巨的任务，并且它带来了太多无法接受的风险。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:20:42.457

如果使用 CreateObject 的第二个参数，则可以编写脚本来响应 IE 事件。IE 公开了关闭窗口时触发的 onQuit 事件。确保指定 CreateObject 方法的 WScript 变体。本机 VBScript 不支持所需的第二个参数。

```
Set objIE = WScript.CreateObject("InternetExplorer.Application", "IE_")

' Set up IE and navigate to page
   ' ...

' Keep the script busy so it doesn't end while waiting for the IE event
' It will start executing inside the subroutine below when the event fires
Do While True
    WScript.Sleep 1000
Loop

' Execute code when IE closes
Sub IE_onQuit
    'Do something here
End Sub 
```

[您可以在此处](http://technet.microsoft.com/en-us/library/ee176557.aspx)通过更详尽的示例了解有关此方法的更多信息。这是一个很好的异步解决方案。

第二种方法使用 WMI 来启动 IE，这样您就可以直接访问正在运行的实例。当实例关闭时，对象引用变为空。

```
Const SW_NORMAL = 1
strCommandLine = "%PROGRAMFILES%\Internet Explorer\iexplore.exe"

strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set objProcessStartup = objWMIService.Get("Win32_ProcessStartup")
Set objStartupInformation = objProcessStartup.SpawnInstance_
objStartupInformation.ShowWindow = SW_NORMAL
objStartupInformation.Title = strUniqueTitle

Set objProcess = GetObject("winmgmts:root\cimv2:Win32_Process")
intReturn = objProcess.Create("cmd /k" & vbQuote & strCommandLine & vbQuote, null, objStartupInformation, intProcessID)

Set objEvents = objWMIService.ExecNotificationQuery( _
    "SELECT * FROM __InstanceDeletionEvent " & _
    "WHERE TargetInstance ISA 'Win32_Process' " & _
    "AND TargetInstance.PID = '" & intProcessID & "'")

' The script will wait here until the process terminates and then execute any code below.
Set objReceivedEvent = objEvents.NextEvent

' Code below executes after IE closes 
```

此解决方案使用 WMI 启动流程实例并返回其流程 ID。然后它使用 WMI 事件来监视进程是否结束。这在同步方法中，脚本执行将停止并等待该过程完成。这也可以通过该`ExecNotificationQueryAsync`方法异步完成，但这种类型的脚本不太常见。

# iphone - 崩溃我的应用程序

> ID：11026955
> 
> 赞同：0
> 
> 时间：2012-06-14T05:06:47.297
> 
> 标签：iphone, xcode, crash, uitabbar

我是 iPhone SDK 的新手。

我正在使用基于 Tabbar 的应用程序。它有 5 个 tabs.named by

*   一般的
*   学校
*   工作
*   最喜欢的
*   接触。

在常规选项卡中：我正在显示他的基本信息以及他/她的家人和朋友的照片（拇指图片，注意用户可以上传任意数量的朋友和家人照片）。

在学校选项卡中：他/她学习的所有学校的列表。他/她可以放一张他/她学校的照片（拇指图片）。

工作中：和学校一样。

在收藏夹中：它显示所有数据（大约 20 个文本字段）。

在联系人中：它还显示很少的文本字段。

用户也可以编辑任何选项卡。

现在我的问题是我正在玩标签 10 分钟，然后它在没有任何警告的情况下崩溃。它从来没有给我任何形式的确认。

*我现在该怎么办？*

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:31:30.667

这将是因为内存问题。`didReceiveMemoryWarning`在方法而不是方法中释放您的对象`dealloc`。在 viewDidLoad 方法中重新初始化数据。前任：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        yesNoLabel = [[UILabel alloc] initWithFrame:CGRectMake(520, 580, 80, 36)];
        [yesNoLabel setFont:[UIFont boldSystemFontOfSize:14.0]];
        [self.view addSubview:yesNoLabel];
    }
    return self;
}

- (void)viewDidLoad
{ 
    [yesNoLabel setText:@"NO"];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    [yesNoLabel release];
} 
```

# javascript - 为用户反馈创建页面的模态窗口加载

> ID：11026956
> 
> 赞同：0
> 
> 时间：2012-06-14T05:06:53.693
> 
> 标签：javascript, jquery, jquery-ui, jsp

我必须创建一个模式窗口来显示一个弹出窗口或一个模式窗口来获取用户对我们 Intranet 的反馈。这个窗口应该有一个复选框，上面写着“不要再问这个问题”。我尝试使用 jquery 创建此窗口，但我不明白该怎么做。我什至尝试用谷歌搜索，但没有得到正确的答案。谁能帮我解决这个问题。我是 jquery 的新手。我见过很多网站，他们创建了模式窗口，但他们使用 php，我不能。请为此目的使用 jquery、jsp 或 javascript 代码帮助我。附上用例文档的屏幕截图。任何帮助表示赞赏。提前致谢。ps 我正在使用 websphere 门户。

抱歉，图片不被允许。。

下面提到的代码也不起作用。请帮忙。

```
 <html>
<head>
<%@page session="false" contentType="text/html" pageEncoding="ISO-8859-1" import="java.util.*,javax.portlet.*,com.ibm.accessitservicesfeedbackpopup.*" %>
<%@ taglib uri="http://java.sun.com/portlet" prefix="portlet"%>        
<%@taglib uri="http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portlet-client-model" prefix="portlet-client-model" %>        
<portlet:defineObjects/>
<link rel="stylesheet" type="text/css" href="<%= renderRequest.getContextPath() %>/style.css"/>
<link rel="stylesheet" type="text/css" href="<%= renderRequest.getContextPath() %>/jqModal.css"/>
<script language="javascript" type="text/javascript" src="<%= renderRequest.getContextPath() %>/jqModal.js"></script>
<script language="javascript" type="text/javascript">
function confirm(msg,callback) {
  $('#confirm')
    .jqmShow()
    .find('p.jqmConfirmMsg')
      .html(msg)
    .end()
    .find(':submit:visible')
      .click(function(){
        if(this.value == 'yes')
          (typeof callback == 'string') ?
            window.location.href = callback :
            callback();
        $('#confirm').jqmHide();
      });
}

$().ready(function() {
  $('#confirm').jqm({overlay: 88, modal: true, trigger: false});

  // trigger a confirm whenever links of class alert are pressed.
  $('a.confirm').click(function() { 
    confirm('About to visit: '+this.href+' !',this.href); 
    return false;
  });
});
</script>
</head>
<body>
<a href="#" class="jqModal">view</a> (confirm)

<!-- Confirm Dialog -->
<div class="jqmWindow" id="confirm">

<div id="ex3b" class="jqmConfirmWindow">
    <div class="jqmConfirmTitle clearfix">
    <a href="#" class="jqmClose"><em>Close</em></a>
  </div>

  <div class="jqmConfirmContent">
  <p class="jqmConfirmMsg"></p>
  <p>Continue?</p>
  </div>

  <input type="submit" value="no" />
  <input type="submit" value="yes" />

</div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:15:59.160

There is nice jQuery dialog you can use. Just download jQuery and jquery ui (both js and css) and include to your project. It works prefectlly.

# python - 将 dict 写入 txt 文件并将其读回？

> ID：11026959
> 
> 赞同：130
> 
> 时间：2012-06-14T05:07:15.010
> 
> 标签：python

我正在尝试将字典写入 txt 文件。然后通过键入带有 的键来读取 dict 值`raw_input`。我觉得我只是错过了一步，但我已经找了一段时间了。

我收到这个错误

```
File "name.py", line 24, in reading
    print whip[name]
TypeError: string indices must be integers, not str 
```

我的代码：

```
#!/usr/bin/env python
from sys import exit

class Person(object):
    def __init__(self):
        self.name = ""
        self.address = ""
        self.phone = ""
        self.age = ""
        self.whip = {}

    def writing(self):
        self.whip[p.name] = p.age, p.address, p.phone
        target = open('deed.txt', 'a')
        target.write(str(self.whip))
        print self.whip

    def reading(self):
        self.whip = open('deed.txt', 'r').read()
        name = raw_input("> ")
        if name in self.whip:
            print self.whip[name]

p = Person()

while True:
    print "Type:\n\t*read to read data base\n\t*write to write to data base\n\t*exit to exit"
    action = raw_input("\n> ")
    if "write" in action:
        p.name = raw_input("Name?\n> ")
        p.phone = raw_input("Phone Number?\n> ")
        p.age = raw_input("Age?\n> ")
        p.address = raw_input("Address?\n>")
        p.writing()
    elif "read" in action:
        p.reading()
    elif "exit" in action:
        exit(0) 
```

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-06-14T05:14:27.987

您是否尝试[过 json 模块](http://docs.python.org/library/json.html)？JSON 格式与 python 字典非常相似。它是人类可读/可写的：

```
>>> import json
>>> d = {"one":1, "two":2}
>>> json.dump(d, open("text.txt",'w')) 
```

此代码转储到文本文件

```
$ cat text.txt 
{"two": 2, "one": 1} 
```

您也可以从 JSON 文件加载：

```
>>> d2 = json.load(open("text.txt"))
>>> print d2
{u'two': 2, u'one': 1} 
```

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2012-06-14T05:20:12.273

您的代码*几乎是正确的*！你是对的，你只是少了一步。当您读入文件时，您将其作为字符串读取；但是您想将字符串转回字典。

您看到的错误消息是因为`self.whip`是字符串，而不是字典。因此，您需要将字符串转换为字典。

## 例子

这是最简单的方法：将字符串输入`eval()`. 像这样：

```
def reading(self):
    s = open('deed.txt', 'r').read()
    self.whip = eval(s) 
```

您可以在一行中完成，但我认为这样看起来很乱：

```
def reading(self):
    self.whip = eval(open('deed.txt', 'r').read()) 
```

但`eval()`有时不推荐。问题是它`eval()`会评估*任何*字符串，如果有人欺骗你运行一个非常棘手的字符串，可能会发生一些不好的事情。在这种情况下，您只是`eval()`在自己的文件上运行，所以应该没问题。

但是因为`eval()`有用，所以有人做了一个更安全的替代品。这被调用`literal_eval`，你可以从一个名为`ast`.

```
import ast

def reading(self):
    s = open('deed.txt', 'r').read()
    self.whip = ast.literal_eval(s) 
```

`ast.literal_eval()`只会评估变成基本 Python 类型的字符串，所以一个棘手的字符串不可能在你的计算机上做坏事。

## 编辑

实际上，Python 中的最佳实践是使用`with`语句来确保文件正确关闭。重写上面的语句以使用`with`语句：

```
import ast

def reading(self):
    with open('deed.txt', 'r') as f:
        s = f.read()
        self.whip = ast.literal_eval(s) 
```

在最流行的 Python 中，称为“CPython”，您通常不需要该`with`语句，因为内置的“垃圾收集”功能会确定您已完成文件并为您关闭它。但是其他 Python 实现，例如“Jython”（用于 Java VM 的 Python）或“PyPy”（具有即时代码优化的非常酷的实验系统）可能无法为您关闭文件。养成使用的习惯是件好事`with`，而且我认为它使代码很容易理解。

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2012-06-14T05:14:09.857

要将 Python 对象存储在文件中，请使用以下[`pickle`](http://docs.python.org/library/pickle.html)模块：

```
import pickle

a = {
  'a': 1,
  'b': 2
}

with open('file.txt', 'wb') as handle:
  pickle.dump(a, handle)

with open('file.txt', 'rb') as handle:
  b = pickle.loads(handle.read())

print a == b # True 
```

请注意，我从未设置过`b = a`，而是腌制`a`到一个文件，然后将其解压缩到`b`.

至于你的错误：

```
self.whip = open('deed.txt', 'r').read() 
```

`self.whip`是一个字典对象。`deed.txt`包含文本，因此当您加载`deed.txt`into的内容时`self.whip`，`self.whip`将成为其自身的*字符串*表示形式。

您可能希望将字符串评估回 Python 对象：

```
self.whip = eval(open('deed.txt', 'r').read()) 
```

注意`eval`听起来如何`evil`。那是故意的。请改用该`pickle`模块。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-08-12T05:37:20.037

您好，有一种方法可以将字典写入和读取到文件中，您可以将字典转换为 JSON 格式并快速读取和写入，只需执行以下操作：

**写下**你的日期：

```
 import json

 your_dictionary = {"some_date" : "date"}
 f = open('destFile.txt', 'w+')
 f.write(json.dumps(your_dictionary)) 
```

并**读取**您的数据：

```
 import json

 f = open('destFile.txt', 'r')
 your_dictionary = json.loads(f.read()) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-09-15T08:27:46.853

我创建了自己的功能，这些功能非常好用：

```
def writeDict(dict, filename, sep):
    with open(filename, "a") as f:
        for i in dict.keys():            
            f.write(i + " " + sep.join([str(x) for x in dict[i]]) + "\n") 
```

它将首先存储键名，然后是所有值。请注意，在这种情况下，我的 dict 包含整数，这就是它转换为`int`. 这很可能是您需要根据自己的情况进行更改的部分。

```
def readDict(filename, sep):
    with open(filename, "r") as f:
        dict = {}
        for line in f:
            values = line.split(sep)
            dict[values[0]] = {int(x) for x in values[1:len(values)]}
        return(dict) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-12-09T01:50:52.290

您可以遍历键值对并将其写入文件

```
pair = {'name': name,'location': location}
with open('F:\\twitter.json', 'a') as f:
     f.writelines('{}:{}'.format(k,v) for k, v in pair.items())
     f.write('\n') 
```

# php - 来自 PHP 脚本的 Plesk DNS 管理？

> ID：11026964
> 
> 赞同：1
> 
> 时间：2012-06-14T05:07:41.687
> 
> 标签：php, dns, web-deployment, plesk, whmcs

我们公司目前提供免费的子域，用于重定向到我们的客户。这些是相当受欢迎的功能，但不幸的是，每次有人请求它时，我们的工作人员都必须登录到 Plesk 面板并手动创建它。它只是为 A-Record 指定 DNS 名称和 IP 地址，但如果能够在我们的计费系统中自动执行此操作以便于创建，那就太好了。

由于我对 Plesk 不太熟悉，有谁知道我可以如何通过 PHP 在我们的 Plesk 安装中处理创建 A 记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:11:02.620

您可以使用命令行界面或直接使用 plesk 的 rpc api。请参阅[http://www.parallels.com/ptn/documentation/plesk/](http://www.parallels.com/ptn/documentation/plesk/)了解更多信息。

对于命令行，这似乎很简单：http: [//download1.parallels.com/Plesk/PP10/10.1.1/Doc/en-US/online/plesk-unix-cli/37771.htm](http://download1.parallels.com/Plesk/PP10/10.1.1/Doc/en-US/online/plesk-unix-cli/37771.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:31:31.490

据我所知，Plesk 是一个用于交互和管理您的 Web 服务器设置的界面。但它不提供免费的 api 来做你要求的事情。

您可以使用`RPC API`相同的。但这使用命令提示符有效。

我相信这样做会有点复杂。

# iphone - 使用 sudzc 的 SOAP 服务仅在 iPhone 上返回布尔值“真”？

> ID：11026967
> 
> 赞同：0
> 
> 时间：2012-06-14T05:08:31.967
> 
> 标签：iphone, soap, boolean, sudzc

我正在使用[http://sudzc.com/](http://sudzc.com/)在我的 iPhone 应用程序上实现 SOAP 服务调用。该服务是为登录详细信息编写的，它应该根据登录返回值 true 或 false。当我调用服务时，它总是返回值'true'。我检查了错误的电子邮件和密码，但返回值仍然为真。

这是我的代码

```
 - (IBAction)whenLoginButtonPressed:(id)sender
  {

   MFLSoap *service=[[MFLSoap alloc]init];

   [service Login:self action:@selector(handleFind:) Email:emailField.text Password:passwordField.text Token:@"B3A8FFA7F863"];
  }

 -(BOOL)handleFind: (BOOL) result 
  {
    if (false) 
      {
         NSLog(@"false value");
      }

    else if(true)
      {

         NSLog(@"true  value");
      }

    return result;
  } 
```

它只返回真值:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T10:33:34.020

您的 handleFind: 方法有缺陷。if(false) 总是失败，if(true) 总是成功。无论结果状态如何，您的 NSLog 将始终是“真实值”。正确的代码是：

```
-(BOOL)handleFind: (BOOL) result 
  {
    if (result) 
      {
         NSLog(@"true value");
      }
    else 
      {

         NSLog(@"false  value");
      }
    return result;
  } 
```

# android - Eclipse Logcat 没有在当前过滤器上获得更新（Android）

> ID：11026968
> 
> 赞同：5
> 
> 时间：2012-06-14T05:08:33.527
> 
> 标签：android, eclipse, logcat, android-logcat

我有这个烦人的问题，我很确定你们所有人也会遇到。

我向 logacat 添加了一个过滤器，以便查看仅属于我的应用程序的消息。问题是在当前过滤器中时 logcat 没有得到更新（每个过滤器都会发生这种情况，包括“所有消息（无过滤器）”过滤器）。

为了查看我错过的所有消息，我需要用鼠标单击过滤器。

如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:14:25.767

不幸的是，这是 eclipse 或 adb 或 logcat 中的错误。也许“经典”之外的其他版本的 Eclipse 不会受到该错误的影响，例如 Eclipse Indigo。值得尝试

# java - 使用 OAI-PMH 从机构存储库中获取数据

> ID：11026969
> 
> 赞同：2
> 
> 时间：2012-06-14T05:08:36.080
> 
> 标签：java, xml-parsing, oai

我正在开发一个应用程序，我从外部机构的网站请求数据。他们通知我数据将由 OAI-PMH 提供。

有人可以向我展示一些*Java*中的示例代码如何从 OAI-PMH 中提取数据吗？

我想知道它与读取和解析 XML 数据有什么不同。

谢谢你。

最热烈的祝愿，舒比克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T23:32:27.353

例如，对于 Java 实现，您可以使用一些已经存在的库，例如具有易于使用的 API 的[XOAI 。](https://github.com/lyncode/xoai)有一些提供的[样本](https://github.com/lyncode/xoai/wiki/Service-Provider)。

要从每条记录中提取元数据，您可以使用 XML 解析器或 XML 绑定方法 (JAXB)。对于其他语言，如 PHP 和 Perl，也有其他选择。

# android - 如何找到启动状态栏通知的应用程序

> ID：11026972
> 
> 赞同：3
> 
> 时间：2012-06-14T05:08:54.333
> 
> 标签：android, notifications, statusbar

有没有找到负责状态栏通知的应用程序？

一种查找方法是选择通知图标。但是，如果应用程序没有添加启动器，则很难找到。如果您知道任何其他方法可以找到它，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:49:43.400

[我已经在Detect a new Android notification](https://stackoverflow.com/questions/9367196/detect-a-new-android-notification/9632076#9632076)中发布了答案：

您需要注册一个[AccessibilityService](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html)并确保用户启用该服务。

服务示例：

```
public class InstantMessenger extends AccessibilityService {

@Override
public void onAccessibilityEvent(AccessibilityEvent event) {
    if (event.getEventType() == AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED) {
        //Do something, eg getting packagename
        final String packagename = String.valueOf(event.getPackageName());  
}
}

@Override
protected void onServiceConnected() {
    if (isInit) {
        return;
    }
    AccessibilityServiceInfo info = new AccessibilityServiceInfo();
    info.eventTypes = AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED;
    info.feedbackType = AccessibilityServiceInfo.FEEDBACK_SPOKEN;
    setServiceInfo(info);
    isInit = true;
}

@Override
public void onInterrupt() {
    isInit = false;
}
} 
```

# java - primefaces：确认对话框按钮不调用 managedbean 方法

> ID：11026973
> 
> 赞同：2
> 
> 时间：2012-06-14T05:09:01.743
> 
> 标签：java, jsf, jsf-2, primefaces

我正在使用 primefaces 3.3 和 jsf 2.0。我在删除惰性数据模型中的记录时遇到问题。由于排序和过滤在数据表中无法正常工作，我不得不使用惰性数据模型概念。现在保存（通过向导）、编辑、排序和过滤工作正常。当我尝试从数据表中删除记录时，出现对​​话框，当我单击是（命令按钮）删除记录时，而不是调用 bean 方法控制转到惰性数据模型的加载方法。没有调用 clientUitility.java(managedbean) 的 deleterecord。任何人都可以指导我通过传递客户端对象从数据表中删除记录这是代码片段

clientMaster.xhtml

```
 <h:form id="cm">
                <p:growl life="5000" showDetail="true" showSummary="true" id="mymessage" />
                <p:wizard widgetVar="wiz" flowListener="#{clientUitility.onFlowProcess}" showNavBar="true" >
                    <p:tab id="personal" title="Personal" >
.....
.....// tab and columns
.....

                                        <p:commandButton id="addClient" immediate="true" value="Add Client" actionListener="#{clientUitility.save}" oncomplete="wiz.loadStep (wiz.cfg.steps [0], true)" update=":fce:clientList" > <!-- update="@parent,:cm:clientList" -->
                                        </p:commandButton>
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:panel>
                    </p:tab>
                </p:wizard>
            </h:form>
            <ui:include id="ce" src="ClientEditDatatable.xhtml"/> 
```

ClientEditdatatable.xhtml

```
<h:form id="fce">

        <p:dataTable var="client" value="#{clientUitility.lazyModel}" id="clientList" editable="true" widgetVar="clientTable" rowKey="#{client.clientID}"
                     paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                     paginator="true" rows="10" rowsPerPageTemplate="5,10,15" lazy="true">

            <p:column headerText="First Name" style="width:100px" filterBy="#{client.firstName}" sortBy="#{client.firstName}" >
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{client.firstName}" />
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText id="dtFirstName" value="#{client.firstName}" style="width:100%" label="FirstName" onkeyup="valid(this)" onblur="convertUpper(this.id)"  >
                            <f:validateLength for="dtFirstName" maximum="100" minimum="3"/>
                        </p:inputText>
                    </f:facet>
                </p:cellEditor>
            </p:column>
.....
..... // code of column
.....
            <p:ajax event="rowEdit" listener="#{clientUitility.editRowListner}" update=":cm:mymessage"/>
            <p:column headerText="Delete" style="width:50px">
                <p:commandButton id="deleteClient" value="Delete" onclick="confirmDeleteClient.show()" title="Delete this Client" styleClass="ui-icon-trash">
                    <f:setPropertyActionListener target="#{client}" value="#{clientUitility.client}"/>
                </p:commandButton>
            </p:column>
        </p:dataTable>
        <p:confirmDialog message="Delete client?" severity="alert" widgetVar="confirmDeleteClient" visible="false" appendToBody="true" >
            <p:commandButton value="Yes" update="clientList" immediate="true" oncomplete="confirmDeleteClient.hide()" actionListener="#{clientUitility.deleteRecord}" >
<f:setPropertyActionListener target="#{client}" value="#{client}"
            </p:commandButton>
            <p:commandButton value="No" onclick="confirmDeleteClient.hide()" type="button" />
        </p:confirmDialog>
        <br/> 
```

LazyClientDataModel.java

```
public class LazyClientDataModel extends LazyDataModel<ClientBean> {
private List<ClientBean> datasource;
public LazyClientDataModel(List<ClientBean> datasource) {
    this.datasource = datasource;
}
@Override
public ClientBean getRowData(String rowKey) {
    for(ClientBean client : datasource) {
        if(Integer.toString(client.getclientID()).equals(rowKey))
            return client;
    }
    return null;
}
@Override
public Object getRowKey(ClientBean client) {
    return Integer.toString(client.getclientID());
}
@Override
public List<ClientBean> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters) {
    List<ClientBean> data = new ArrayList<ClientBean>();
    //filter
    for(ClientBean client : datasource) {
        boolean match = true;
        for(Iterator<String> it = filters.keySet().iterator(); it.hasNext();) {
            try {
                String filterProperty = it.next();
                String filterValue = filters.get(filterProperty);
                String fieldValue = String.valueOf(client.getClass().getField(filterProperty).get(client));
                if(filterValue == null || fieldValue.toLowerCase().startsWith(filterValue.toLowerCase())) {
                    match = true;
                } else {
                    match = false;
                    break;
                }
            } catch(Exception e) {
                match = false;
            }
        }
        if(match) {
            data.add(client);
        }
    }
    //sort
    if(sortField != null) {
        Collections.sort(data, new LazySorter(sortField, sortOrder));
    }
    //rowCount
    int dataSize = data.size();
    this.setRowCount(dataSize);
    //paginate
    if(dataSize > pageSize) {
        try {
            return data.subList(first, first + pageSize);
        }
        catch(IndexOutOfBoundsException e) {
            return data.subList(first, first + (dataSize % pageSize));
        }
    }else {
        return data;
    }
}
} 
```

clientUitility.java（托管bean）

```
public class ClientUitility {
private LazyDataModel<ClientBean> lazyModel;
private ClientBean client = new ClientBean();
private List<ClientBean> clientAll;// = new ArrayList<ClientBean>();

/** Creates a new instance of ClientUitility */
public ClientUitility() {
    client = new ClientBean();
    clientAll = new ArrayList<ClientBean>();
    //int userID = Integer.parseInt(FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("USER_ID").toString());
    clientAll = ClientService.GenerateClientList(1);
    lazyModel = new LazyClientDataModel(clientAll);
}
// setter and getter of client 
// getter for lazymodel
public void deleteRecord(ActionEvent actionEvent) {
    try {
        System.out.println("Delete record Called....");
        int ClientID = client.getclientID();            
        ClientService.DeleteClient(client);
        client = new ClientBean();
        clientAll = ClientService.GenerateClientList(1);
        lazyModel = new LazyClientDataModel(clientAll);
        FacesMessage msg = new FacesMessage("Client Deleted", "");
        FacesContext.getCurrentInstance().addMessage(null, msg);
    } catch (Exception e) {
        e.printStackTrace();
    }
public void save(ActionEvent actionEvent) {
    System.out.println("Save record Called....");
    ClientService.AddClient(client);
    client = new ClientBean();
    clientAll = ClientService.GenerateClientList(1);
    lazyModel = new LazyClientDataModel(clientAll);
    FacesMessage msg = new FacesMessage("Client Created", "");
    FacesContext.getCurrentInstance().addMessage(null, msg);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:14:10.770

这是预期的行为，因为您使用的是 appendToBody="true"。您应该在确认对话框中添加一个表单。

```
<p:confirmDialog message="Delete client?" severity="alert" widgetVar="confirmDeleteClient" visible="false" appendToBody="true" >
  <h:form>
    <p:commandButton value="Yes" update="clientList" immediate="true" oncomplete="confirmDeleteClient.hide()" actionListener="#{clientUitility.deleteRecord}" >
      <f:setPropertyActionListener target="#{client}" value="#{client}"
    </p:commandButton>
   <p:commandButton value="No" onclick="confirmDeleteClient.hide()" type="button" />
  </h:form>
</p:confirmDialog> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T20:29:56.910

删除属性类型=“按钮”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:07:01.713

我已经更改了 PF 3.2 而不是 PF 3.3，并且运行顺利。检查此链接： http: [//forum.primefaces.org/viewtopic.php?f=3](http://forum.primefaces.org/viewtopic.php?f=3&t=22216) &t=22216 。它在 PF3.3 中的错误。无需更改我的项目中的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T22:35:59.037

您还可以使用在 confirmDialog 之外定义的 remoteCommand 组件，该组件仍将在表单内（当您使用 appendToBody=true 时）。

# php - 为什么我的 facebook fql 不能查询超过 2 个 facebook 值？

> ID：11026977
> 
> 赞同：-2
> 
> 时间：2012-06-14T05:09:43.103
> 
> 标签：php, facebook, facebook-fql

尝试创建一个 facebook 应用程序只是为了学习并遇到一个我不知道该怎么做的奇怪现象。

我了解所有的 JSON 转换，但似乎我一次不能查询超过 2 个 facebook 值，而我应该能够......（？？？抱歉，如果那是混淆）。下面是我断章取义的代码。

```
$query="query".$i;
$idarray["$query"]="SELECT+pic,name+FROM+user+WHERE+uid=".$friend_id[$i]; 
```

当我尝试查询的不仅仅是图片和名称时，它只给了我两个。它不会让我查询诸如“图片、姓名、用户名”之类的内容。有人知道原因吗？如果是这样，我该如何解决这个问题以查询超过 2 个？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:58:32.310

这对我来说很好，我无法确定你在做什么导致它不起作用：

```
select uid, name, first_name, middle_name, last_name, sex, locale, pic_small_with_logo, pic_big_with_logo, pic_square_with_logo, pic_with_logo, username from user where uid in (4,5,6,7) 
```

回报是：

```
{
  "data": [
    {
      "uid": 4, 
      "name": "Mark Zuckerberg", 
      "first_name": "Mark", 
      "middle_name": "", 
      "last_name": "Zuckerberg", 
      "sex": "male", 
      "locale": "en_US", 
      "pic_small_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQDIpcVgo2Fz4U4e&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F157340_4_3955636_t.jpg&logo&v=5", 
      "pic_big_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQCa1XUcpDZryPMM&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F49942_4_1525300_n.jpg&logo&v=5", 
      "pic_square_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQBYWqMD88h5CkD3&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F157340_4_3955636_q.jpg&logo&v=5", 
      "pic_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQDqZdUCq_U_senP&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F157340_4_3955636_s.jpg&logo&v=5", 
      "username": "zuck"
    }, 
    {
      "uid": 5, 
      "name": "Chris Hughes", 
      "first_name": "Chris", 
      "middle_name": "", 
      "last_name": "Hughes", 
      "sex": "male", 
      "locale": "en_US", 
      "pic_small_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQBm5Un8ZmN8OMxy&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F211833_5_64370680_t.jpg&logo&v=5", 
      "pic_big_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQB0gVdhHSj4v6gN&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F211833_5_64370680_n.jpg&logo&v=5", 
      "pic_square_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQBTEKDI6lBvbtcE&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F211833_5_64370680_q.jpg&logo&v=5", 
      "pic_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQCYybISnGDBbBfO&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F211833_5_64370680_s.jpg&logo&v=5", 
      "username": "ChrisHughes"
    }, 
    {
      "uid": 6, 
      "name": "Dustin Moskovitz", 
      "first_name": "Dustin", 
      "middle_name": "", 
      "last_name": "Moskovitz", 
      "sex": "male", 
      "locale": "en_US", 
      "pic_small_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQAq87DIy_gbhxVb&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F173132_6_1123895199_t.jpg&logo&v=5", 
      "pic_big_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQBtlc6qP74cEMpQ&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F173132_6_1123895199_n.jpg&logo&v=5", 
      "pic_square_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQAumnkA5BT4KUVk&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F173132_6_1123895199_q.jpg&logo&v=5", 
      "pic_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQBJZfp6ui5GWXRZ&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F173132_6_1123895199_s.jpg&logo&v=5", 
      "username": "moskov"
    }, 
    {
      "uid": 7, 
      "name": "Arie Hasit", 
      "first_name": "Arie", 
      "middle_name": "", 
      "last_name": "Hasit", 
      "sex": "male", 
      "locale": "en_US", 
      "pic_small_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQAVKTiIJr8Yf9KR&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F23251_7_6318_t.jpg&logo&v=5", 
      "pic_big_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQDonksAfqN0W_GS&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F23161_7_4183_n.jpg&logo&v=5", 
      "pic_square_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQAP10kv_ZDVA6XF&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F23251_7_6318_q.jpg&logo&v=5", 
      "pic_with_logo": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQCL96KpL_7TLRar&url=https\u00253A\u00252F\u00252Ffbcdn-profile-a.akamaihd.net\u00252Fhprofile-ak-snc4\u00252F23251_7_6318_s.jpg&logo&v=5", 
      "username": "arie.hasit"
    }
  ]
} 
```

# c# - 在asp.net中拆分后如何在不同标签中显示逗号分隔值？

> ID：11026982
> 
> 赞同：0
> 
> 时间：2012-06-14T05:10:13.177
> 
> 标签：c#, .net

我在 lblsubject.text 中有逗号分隔的值，例如 English,Science，我使用下面的代码进行分隔。下面给出的代码在 Label1 和 Label2 中都显示 Science，因为它被覆盖......但我想在一个标签中显示英语，在另一个标签中显示科学。怎么做...请帮助..！

```
string[] lines = Regex.Split(lblsubject.Text, ",");

foreach (string line in lines)
 {
   Label1.Text = line;
   Label2.Text = line;          
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:11:55.597

您将在数组中获得两个元素，为什么要使用 foreach 循环。你可以做

```
Label1.Text = lines[0];
Label2.Text = lines[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:19:26.753

如果您不知道会有多少标签，您可能想要动态添加标签。（另请注意，Regex.Split 对此有点过分，您可以只使用 String.Split 扩展方法。）

```
string[] lines = lblsubject.Text.Split(',');

for (int i=0 ; i<lines.Length ; i++)
{
    var newLabel = new Label();
    newLabel.Text = lines[i];
    form1.Controls.Add(newLabel);
} 
```

其中*form1*可以是您想要添加标签的任何容器控件。

另一种选择可能是将 HTML 直接添加到您的输出中。像这样的东西：

```
var html = string.Join("<br/>", 
    lblsubject.Text.Split(',').Select( 
        category => string.Format("<div>{0}</div>", category) 
    )
);
panel1.Controls.Add(new LiteralControl(html)); 
```

（同样，*panel1*只是您的输出的容器。）

**编辑，根据评论**

```
DrowDownList1.Items.AddRange(
    lblsubject.Text.Split(',')
        .Select(category => new ListItem(category))
        .ToArray()
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:14:51.700

使用`Split()`功能

```
string[] lines = lblsubject.Text.Split(',');

Label1.Text = lines[0];         
Label2.Text = lines[1]; 
```

# javascript - Seem more..issue（点击查看更多5-10次后操作变慢）

> ID：11026983
> 
> 赞同：0
> 
> 时间：2012-06-14T05:10:17.210
> 
> 标签：javascript, jquery

Seem more..issue（点击查看更多5-10次后操作变慢）

我已经修改了 See More.. 基于代码的技术在这里[http://jsfiddle.net/hgxbf/](http://jsfiddle.net/hgxbf/) 我面临的问题是点击查看更多/少看 5-10 次后操作变得非常慢并且不展开/正确折叠。

```
 <div class="seeMore" /> 
```

由脚本动态添加

HTML 结构。

```
<div class="Blk">
    <div class="Title">
        Donec at elit sed metus placerat placerat congue ut purus
    </div>
    <p class="trunc">
                                    Proin ipsum lectus, facilisis sed ornare eget, egestas vel mi. Nullam ac odio arcu. Nunc congue, urna vitae malesuada consequat, leo erat bibendum nunc, et fringilla nibh diam ac tellus. Sed quis ante a ipsum placerat fermentum. Aliquam erat volutpat. Praesent rutrum ornare lectus tincidunt suscipit.
    </p>
    <div class="seeMore">
        <span>SEE MORE</span>
    </div>                          
</div> 
```

我的代码[http://jsfiddle.net/y4GXL/1/](http://jsfiddle.net/y4GXL/1/)

任何帮助真的很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:55:56.247

我有一些空闲时间，所以我已经为你修好了。

基本上，您必须保留一个对“多看/少看”元素的引用并保留一个状态变量。在点击处理程序中，您决定根据状态采取行动；折叠或展开。每次状态更改后，您都会更新“按钮”文本和状态。

我还应用了更方便的变量命名（所有 jquery 元素都以美元为前缀）并使顶部函数返回结果`.each`；否则 jQuery 链被破坏。

```
(function($) {
    $.fn.truncateText = function(maxWords) {
        return this.each(function() {
            var $el = $(this),
            origText = $el.text(),
            truncText = origText.split(' '),
            state,
            $toggleButton;

            // decide whether to place a button    
            if (truncText.length <= maxWords) {
                return;
            }

            truncText.length = maxWords;
            truncText = truncText.join(' ');

            // add button and define click handler    
            $toggleButton = $('<div class="seeMore"></div>')
                .insertAfter($el)
                .on('click', function() {
                    if ('open' == state) {
                        collapse(); // old state was open, so close it
                    } else {
                        expand(); // old state was closed, so open it
                    }
                });

            function collapse()
            {
                $el.text(truncText + ' ...');
                state = 'closed';
                $toggleButton.text('See More');
            }

            function expand()
            {
                $el.text(origText);
                state = 'open';
                $toggleButton.text('See Less');
            }

            collapse();
        });
    }
})(jQuery);
$(".trunc").truncateText(4);​ 
```

* * *

在这里行动：http: [//jsfiddle.net/y4GXL/6/](http://jsfiddle.net/y4GXL/6/)

# magento - 如何让这个 Magento 类别数组按位置排序？

> ID：11026985
> 
> 赞同：0
> 
> 时间：2012-06-14T05:10:49.763
> 
> 标签：magento

```
 <?php $currentCat = Mage::registry('current_category');
            if ( $currentCat->getParentId() == Mage::app()->getStore()->getRootCategoryId() )
            {
                $loadCategory = $currentCat;
            }
            else
            {
                $loadCategory = Mage::getModel('catalog/category')->load($currentCat->getParentId());
            }    
            $subCategories = explode(',', $loadCategory->getChildren());

            foreach ( $subCategories as $subCategoryId )
            {
                $cat = Mage::getModel('catalog/category')->load($subCategoryId);

                if($cat->getIsActive())
                {
                    if ($currentCat->getEntityId() == $subCategoryId)
                    {
                        echo '<b>'.$cat->getName().'</b><br />';
                    }
                    else
                    {
                        echo '<a href="'.$cat->getURL().'">'.$cat->getName().'</a> ('.$cat->getProductCount().')<br />';
                    }
                }
            }
        ?> 
```

# android - 为什么这个弹出窗口没有关闭？

> ID：11026992
> 
> 赞同：0
> 
> 时间：2012-06-14T05:11:07.693
> 
> 标签：android, android-widget

我是android开发的新手，所以请耐心等待。我有一个应用程序，它显示一个包含“下一步”按钮的弹出窗口。单击它时，前一个会关闭，新的会打开并显示不同的信息。

问题是当这个按钮被点击率非常高时，有时以前的对话框窗口会停留，而新窗口会同时出现。这种情况并非每次都发生。Dialog 用于创建弹出窗口。每次单击下一个按钮时都会使用 dialog.dismiss() 。我正在尝试解决这个问题，以防某些用户尝试做同样的事情。

在按钮动作中

```
dialog.dismiss();
nextaction(); 
```

nextaction() 包含初始化以及加载到弹出窗口的图像和文本，例如

```
dialog = new Dialog(ctx);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.popupview); 
```

（对话框是全局变量）所以任何人都可以提供一些建议。提前致谢

# php - PHP创建一个png图像

> ID：11026999
> 
> 赞同：0
> 
> 时间：2012-06-14T05:11:43.370
> 
> 标签：php, image

我正在尝试创建一个 PHP 图像，尽管我遇到了一些问题。我正在尝试将 URL 添加到 php 文件。url (global.php) 包含获取特定用户的用户名并将某些图像文件输入到 php 图像中的信息。

但是每当我添加 global.php 链接时，图像都不会显示。我的主要问题是，我是否能够添加文件链接，以及添加诸如 echo ' ' 之类的内容；到php图像文件？

```
 <?php
// MySQL Connect & Select
mysql_connect('localhost', 'root', 'password') or die('Error connecting to mysql');
mysql_select_db('database');

$result = mysql_query("SELECT * FROM users WHERE username = '".stripslashes(trim(htmlspecialchars(mysql_real_escape_string(mysql_escape_string($_GET['user'])))))."'");
$row = mysql_fetch_array($result);
$result_stats = mysql_query("SELECT * FROM user_stats WHERE id = '".$row['id']."'") or die("USER_STATS: ".mysql_error());
$row_stats = mysql_fetch_array($result_stats);
$result_info = mysql_query("SELECT * FROM user_info WHERE user_id = '".$row['id']."'") or die("USER_INFO: ".mysql_error());
$row_info = mysql_fetch_array($result_info);

$text[1] = "Hiya, ".$row['username']."!";
$text[2] = "Your last login was ".@date("d-M-Y\n H:i",$row['last_online']).". We missed you :)";
$text[3] = "Do you know the Rare! Way";
$text[4] = "".$row['username']."?";
$text[5] = "I do!";
$text[6] = "Be sure to follow the Rare! Way. \n \n When you follow the Way, you're giving \n yourself the best experience on Rare! that you \n can ever get! Stay tuned for more.";

// Colors
$image      = imagecreatefrompng('userbanner/hotel.png');
$black      = imagecolorallocate($image, 0, 0, 0);
$white      = imagecolorallocate($image, 250, 250, 250);
$grey       = imagecolorallocate($image, 77, 77, 77);

// Font
$volterB    = 'userbanner/Ubuntu-B.ttf';
$volder     = 'userbanner/Ubuntu-M.ttf';
$conden     = 'userbanner/Ubuntu-L.ttf';
$light      = 'userbanner/Ubuntu-Regular.ttf';

$userimage1 = imagecreatefrompng("http://www.habbo.com/habbo-imaging/avatarimage?figure=".$row['look']."&direction=2&head_direction=2&gesture=spk&img_format=png");
imagecopy($image, $userimage1, 420, 288, 0, 0, 64, 110);

$userimage  = imagecreatefrompng("http://www.habbo.com/habbo-imaging/avatarimage?figure=".$row['look']."&direction=2&head_direction=2&gesture=sml&img_format=png");
imagecopy($image, $userimage, 220, 628, 0, 0, 64, 110);

// Create image from text
imagettftext($image, 15, 0, 20, 465, $black, $volterB, $text[1]);
imagettftext($image, 8, 0, 20, 483, $black, $conden, $text[2]);
imagettftext($image, 18, 0, 510, 300, $black, $volterB, $text[3]);
imagettftext($image, 15, 0, 510, 330, $black, $volterB, $text[4]);
imagettftext($image, 15, 0, 345, 333, $black, $volder, $text[5]);
imagettftext($image, 10, 0, 520, 360, $grey, $light, $text[6]);
header('Content-type: image/png');
imagepng($image);
imagedestroy($image);

?> 
```

如果我有任何不清楚的地方，请告诉我。谢谢 ：）