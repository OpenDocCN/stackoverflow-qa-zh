# StackOverflow 问答 10433000-10433999

# java - Java：在一个字符串中解析多个 Json 对象

> ID：10433001
> 
> 赞同：1
> 
> 时间：2012-05-03T14:01:11.913
> 
> 标签：java, php, json

我正在尝试解析来自我的网络服务的 Json 响应。我从我的网络服务器收到这个字符串。

```
{"lon0":"30.13689","lat0":"-96.3331183333333"}{"lon1":"30.136965","lat1":"-96.33252"}{"lon2":"30.1370383333333","lat2":"-96.3319233333333"} 
```

我将它放入一个名为 jsonStr.. 的字符串中，然后将其放入一个对象中。并获得我需要的字符串。

```
JSONObject jsonObj = new JSONObject(jsonStr);//place it into an object
String longitudecord = jsonObj.getString("lon0");//retrieve the lon0
String latitudecord = jsonObj.getString("lat0"); 
```

当我尝试上面的代码时，我得到正确的经度线是 30.13689，​​而正确的纬度线是 -96.3331183333333。

但是当我运行这个

```
 String longitudecord = jsonObj.getString("lon1");
String latitudecord = jsonObj.getString("lat1"); 
```

我没有得到正确的经度和纬度。它抛出一个异常。所以我不认为我试图正确获得“lon1”和“lat1”。

谁能帮我这个？

**********更新****** ** *** ***** 我的 php 代码片段...**

 **```
 $counter = 0;
// read them back
$result = mysql_query( "SELECT * FROM locations" );
while( $data = mysql_fetch_assoc($result) ) {
$latFromDb = $data['latitude'];
$longFromDb = $data['longitude'];
$variable = array( 'lon'.$counter => "$longFromDb", 'lat'.$counter => "$latFromDb" );
    // One JSON for both variables
echo json_encode($variable);
$counter++;
} 
```

我怎样才能返回正确的 json 格式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:12:17.693

看起来您正在返回 3 个单独的结果。所以，一些可能性...

1.  将字符串形成一个 JSONArray，然后解析它......

    `JSONArray jsonObj = new JSONArray("["+jsonStr.replaceAll("}{","},{")+"]");`

    然后遍历数组的每个子元素以获取纬度/经度。

2.  将返回的字符串拆分为单独的结果字符串，并单独解析它们。也许像这样的东西......

    `String[] results = jsonStr.replaceAll("}{","}}{{").split("}{");`

    请注意，我们先替换所有，因此我们可以将`}`and保留`{`在每个结果的开始/结束处。

* * *

更好的办法是修复您的 PHP 服务器代码。您基本上只需要 a`[`在开头，`]`结尾和`,`每个结果之间。我认为这样的事情可能会做到（请为我修复语法 - 我不是 PHP 编码器）。

```
 $counter = 0;
// read them back
$result = mysql_query( "SELECT * FROM locations" );
echo '[';
while( $data = mysql_fetch_assoc($result) ) {
if (&counter >= 1){
  echo ',';
}
$latFromDb = $data['latitude'];
$longFromDb = $data['longitude'];
$variable = array( 'lon'.$counter => "$longFromDb", 'lat'.$counter => "$latFromDb" );
    // One JSON for both variables
echo json_encode($variable);
$counter++;
}
echo ']'; 
```

一旦你明白了，你应该能够说`new JSONArray(serverResult)`，它会将你所有的结果解析成一个 JSON 数组，你可以遍历它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:10:44.370

您的 jsonStr 无效，每条记录之间缺少括号和逗号。利用：

```
[
    {
        "lon0": "30.13689",
        "lat0": "-96.3331183333333"
    },
    {
        "lon1": "30.136965",
        "lat1": "-96.33252"
    },
    {
        "lon2": "30.1370383333333",
        "lat2": "-96.3319233333333"
    }
] 
```

PHP：

```
$sth = mysql_query("SELECT latitude,longitude FROM locations");
$rows = array();
while($r = mysql_fetch_assoc($sth)) {
    $rows[] = $r;
}
echo json_encode($rows); 
```

这应该输出正确的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:23:51.160

JSONObject 只会采用字符串中出现的第一个 JSON。通过做这个：

```
JSONObject jsonObj = new JSONObject(jsonStr); 
```

您的对象最终将包含第一个 json：

```
{"lon0":"30.13689","lat0":"-96.3331183333333"} 
```

因此，当您尝试获取有关另一个 json 对象的数据时，它不会找到您指定的键。您必须以某种方式解析字符串，我认为这样做可能会起作用：

```
String separatedJsons= jsonStr.replace("}{", "}###{");
String jsons[] = separatedJsons.split("###"); 
```

这样你就得到了一个字符串数组，每个字符串都有单独的 json。您可以稍后创建您的 JSONObjects。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:13:36.853

我不确定 Web 服务响应的 JSON 格式是否正确，这可能是问题所在？

如果您有办法编辑应用程序生成的字符串，您可以尝试以下操作：

```
[
{"lon0":"30.13689","lat0":"-96.3331183333333"},
{"lon1":"30.136965","lat1":"-96.33252"},
{"lon2":"30.1370383333333","lat2":"-96.3319233333333"}
] 
```**

# c# - 如果在运行时只知道类型参数，如何调用泛型方法？

> ID：10433007
> 
> 赞同：8
> 
> 时间：2012-05-03T14:01:26.387
> 
> 标签：c#, generics, reflection

我有这个方法：

```
public List<T> SomeMethod<T>( params ) where T : new() 
```

所以我想调用`SomeMethod`它，如果我知道类型就可以了：

```
SomeMethod<Class1>(); 
```

但是，如果我只有`Class1`在运行时我无法调用它？

那么如何调用`SomeMethod`未知的T类型呢？我通过使用反射得到了类型。

我有类型的类型但`SomeMethod<Type | GetType()>`不起作用。

**更新 7\. 五月：**

这是我想要实现的示例代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;

namespace ConsoleApplication63
{
    public class DummyClass
    {
    }

    public class Class1
    {
        public string Name;
    }

    class AssemblyTypesReflection
    {
        static void Main(string[] args)
        {
            object obj = new Class1() { Name = "John" } ;

            Assembly assembly = Assembly.GetExecutingAssembly();
            var AsmClass1 = (from i in assembly.GetTypes() where i.Name == "Class1" select i).FirstOrDefault();

            var list = SomeMethod<AsmClass1>((AsmClass1)obj); //Here it fails
        }

        static List<T> SomeMethod<T>(T obj) where T : new()
        {
            return new List<T> { obj };
        }
    }
} 
```

这是一个从更大的背景中取出的演示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:02:43.660

您需要使用反射来调用它：

```
var method = typeof(SomeClass).GetMethod("SomeMethod");
method.MakeGenericMethod(someType).Invoke(...); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-18T07:01:31.857

您可以`dynamic`在 C# 4 中使用关键字。您还需要 .NET 4.0 或更高版本。：

```
SomeMethod((dynamic)obj); 
```

The runtime infers the actual type argument and makes the call. It fails if `obj` is null since then there is no type information left. null in C# has no type.

# ruby-on-rails - 当我使用 form_tag 时，为什么动作问我两个参数

> ID：10433009
> 
> 赞同：0
> 
> 时间：2012-05-03T14:01:35.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, routes

为什么当我尝试发送这三个参数（recipients_emails）时出现错误：

> FreeRegistrationCouponsController#send 中的参数错误
> 
> 参数数量错误（2 代表 0） Rails.root：/Users/regedarek/code/wifiname
> 
> 应用程序跟踪 | 框架跟踪 | 完整跟踪 app/controllers/free_registration_coupons_controller.rbin `send'

我做错了什么？

```
<div class="span6">
  <b>Give three of your friends a free registration</b>
  <%= form_tag :controller => 'free_registration_coupons', :action => "send" do %>
    <%= label_tag :recipient_email_1 %>
    <%= text_field_tag :recipient_email_1 %>
    <%= label_tag :recipient_email_2 %>
    <%= text_field_tag :recipient_email_2 %>
    <%= label_tag :recipient_email_3 %>
    <%= text_field_tag :recipient_email_3 %>
    <%= submit_tag %>
  <% end %>
</div>

class FreeRegistrationCouponsController < ApplicationController
  def send
    @sender_id = current_user.id

    binding.pry
    redirect_to root_path
  end
end

resources :free_registration_coupons do
  collection do
    get 'send'
    post 'send'
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:10:19.940

不要调用您的操作发送 - 您正在覆盖核心 ruby​​ 方法。Rails 试图调用这个核心 ruby​​ 方法，但最终却调用了你的方法，它具有不同的签名。

可能应该使用 Rails，`__send__`以便您可以自由地`send`用于自己的目的，但现在您无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:17:03.740

尝试将您的表单更改为如下所示：

```
<div class="span6">
  <b>Give three of your friends a free registration</b>
  <%= form_tag '/free_registration_coupons/send' do %>
    <%= label_tag :recipient_email_1 %>
    <%= text_field_tag :recipient_email_1 %>
    <%= label_tag :recipient_email_2 %>
    <%= text_field_tag :recipient_email_2 %>
    <%= label_tag :recipient_email_3 %>
    <%= text_field_tag :recipient_email_3 %>
    <%= submit_tag %>
  <% end %>
</div> 
```

我认为问题在于您的 form_tag 并不期望您包含它们的方式的论点。

# c++ - FOO 没有可用的资源

> ID：10433011
> 
> 赞同：0
> 
> 时间：2012-05-03T14:01:39.430
> 
> 标签：c++

我遇到了一个以前从未见过的新错误/错误。这是指什么或我应该在哪里看？或者这种错误的原因是什么？

`No source available for "libstdc++-6!_ZNSsC1ERKSs() at 0x6fc89524"`

我怀疑它是在这个虚拟数据函数之后弹出的：

```
template <class T>
void DummyDataStudents(Array <T> A){
    for(int i=0; i<A.lenght; i++){
        A.M[i].setStudent(i, i%2,"student"+i);
    }
    cout<<"Done Stundents"<<endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:20:13.587

正如@Nick 已经说过的，这条消息来自调试器，它无法打开 std::string 的构造函数的源文件（uce`c++filt`来解码这个神秘的名字）。

您的问题是`A.M[i].setStudent(i, i%2,"student"+i);`行，因为您将 i 添加到“student”-Pointer，使其成为 i=0 的“student”，i=1 的“tudent”，i=2 的“udent”，...“” i=7 和 i>=8 的未定义行为。您可以使用 将 i 转换为字符串`std::stringstream`。

# nhibernate - 如何使用多个表创建一对至少一个流畅的映射？

> ID：10433012
> 
> 赞同：0
> 
> 时间：2012-05-03T14:01:50.770
> 
> 标签：nhibernate, fluent-nhibernate

我有一个旧设计的数据库模式，我想用 Fluent-Nhibenrate 映射它。

架构看起来像这样：

```
Table:Users
ID Number PK

Table:Kiosk
User_ID Number PK, FK -> Users.ID
Xml Varchar

Table:Email
User_ID Number PK, FK -> Users.ID
Update_Date Date 
```

我想用看起来像这样的映射对象来实现：

```
public class User
{
    private virtual Email _email {get;set;}

    public virtual int Id {get;set;}
    public virtual string Email
    {
        get
        {
            return _email.Email;
        }
        set
        {
            _email.Email = value;
            _email.UpdateDate = DateTime.Now();
        }
    }

    public virtual Kiosk Kiosk {get;set;}

    public virtual bool HasKiosk
    {
        get
        {
            return (Kiosk != null);
        }
    }
}

public class Kiosk
{
    public virtual string XmlKiosk {get;set;}
}

public class Email
{
    public virtual string Email {get;set;}
    public virtual DateTime UpdateDate {get;set;}
} 
```

有任何想法吗？

谢谢你，阿米尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:29:53.350

使用[这篇文章](http://brunoreis.com/tech/fluent-nhibernate-hasone-how-implement-one-to-one-relationship/) ，我通过对“Kiosk”和“Email”类的微小修改实现了我想要的......

### 结果如下：

```
public class Kiosk
{
    private int UserId {get;set;}
    private User User {get;set;}

    protected Kiosk();

    public Kiosk(User user)
    {
        User = user;
    }

    public virtual string XmlKiosk {get;set;}
}

public class Email
{
    private int UserId {get;set;}
    private User User {get;set;}

    protected Email();

    public Email(User user)
    {
        User = user;
    }   

    public virtual string Email {get;set;}
    public virtual DateTime UpdateDate {get;set;}
} 
```

### 映射如下所示：

```
 Public class UserMapping : IAutoMappingOverride<User>
    {
        public void override Map(AutoMapping<User> mapping)
        {
            mapping.Id(o => o.Id) // Not needed, already mapped with auto mapper, just for the example...

            mapping.HasOne(o => o.Kiosk)
                .Cascade.All();
            mapping.HasOne(Reveal.Member<User, Email>("_email"))
                .Cascade.All();

            mapping.IgnoreProperty(o => o.HasKiosk); // Simple getter, no mapping needed here.
        }
    }

    public class KioskMapping : IAutoMappingOverride<Kiosk>
    {
        public void override Map(AutoMapping<Kiosk> mapping)
        {
            mapping.Id(Reveal.Member<Kiosk>("UserId"), "ColumnName");

            mapping.HasOne<User>(Reveal.Member<Kiosk, User>("User")
                .Constrained()
                .ForeignKey();
        }
    }

    public class EmailMapping : IAutoMappingOverride<Email>
    {
        public void override Map(AutoMapping<Email> mapping)
        {
            mapping.Id(Reveal.Member<Email>("UserId"), "ColumnName");

            mapping.HasOne<User>(Reveal.Member<Email, User>("User")
                .Constrained()
                .ForeignKey();
        }
    } 
```

像魅力一样工作，谢谢大家。

# javascript - '$(this)' 的成本是多少？

> ID：10433014
> 
> 赞同：56
> 
> 时间：2012-05-03T14:01:53.893
> 
> 标签：javascript, jquery, performance

这里的人们经常建议缓存从元素`jQuery`创建的对象，就像下面的代码：`DOM`

```
$('#container input').each(function() {
    $(this).addClass('fooClass');
    $(this).attr('data-bar', "bar");
    $(this).css('background-color', 'red');
}); 
```

*   缓存 jQuery 对象真的可以提高我们代码的性能吗？
*   **当您将 DOM 元素传递给 jQuery 构造函数时，“幕后”会发生什么？**

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-03T14:02:15.877

在 jQuery[标记信息](https://stackoverflow.com/tags/jquery/info)中会出现此警告：

> jQuery 函数 $() 很昂贵。反复调用它效率极低。

嗯......这仅适用于字符串选择器，它会被正则表达式解析以找出它们是什么：

```
quickExpr = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/ 
```

然后，如果字符串是一个选择器（不是`id`），jQuery 会遍历 DOM 以找到与其昂贵`find`函数的匹配项：

```
} else if ( !context || context.jquery ) {
    return ( context || rootjQuery ).find( selector );
} 
```

**所以是的，它很昂贵，但这仅适用于选择器！**

如果我们传递 a `DOMElement`，jQuery 所做的唯一操作就是将 DOMElement 参数保存为新创建的 jQuery 对象的上下文，并将上下文的长度设置为 1：

```
// Handle $(DOMElement)
if ( selector.nodeType ) {
    this.context = this[0] = selector; // Selector here is a DOMElement
    this.length = 1;
    return this;
} 
```

我[用 jsPerf 做了一些测试](http://jsperf.com/this-cost)，我发现缓存 jQuery 对象确实只有一点效果：

![条形图，如下所述](../Images/4158acb6d32a75d186fbf07eb2e0cb8f.png)

在 Chrome 中，它只慢了 7%。（在 IE 中它更重要一点：12%。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-03T14:04:54.127

要回答您的第二个问题，请查看[源代码](https://github.com/jquery/jquery/blob/master/src/core.js#L86)：

```
// Handle $(DOMElement)
if ( selector.nodeType ) {
    this.context = this[0] = selector;
    this.length = 1;
    return this;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-03T15:23:31.277

关于性能差异，如果您正在寻找两者之间的直接比较，删除任何可能导致结果偏差的额外代码会很有帮助，例如 DOM 选择和其他不直接相关的方法。

[http://jsperf.com/this-cost/2](http://jsperf.com/this-cost/2)

![在此处输入图像描述](../Images/763cbbb4c85e0a488a999661683d7f46.png)

在更真实的世界环境中，相对差异很小，如您的测试所示

要记住的另一件事是，每次创建 jQuery 对象时，都需要为其分配内存，这增加了垃圾收集器需要做的工作。

所以我认为人们建议缓存的原因是从某种原则的角度来看。正在进行额外的工作，虽然它通常不会产生明显的影响，但最终确实需要一些可以轻松避免的开销。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-04T02:26:36.090

这里所有的运行时性能测试都遗漏了一件事是另一个主要考虑因素：

**网络带宽。**

缓存`$(this)`到局部变量通常会减小脚本的大小，尤其是在缩小时（因为`this`不能从四个字符减少）。

考虑：

```
function hello(text) {
    $(this).attr();
    $(this).css();
    $(this).data();
    $(this).click();
    $(this).mouseover();
    $(this).mouseleave();
    $(this).html(text);
}
hello('Hello world'); 
```

闭包编译器的缩小输出是

```
function hello(a){$(this).attr();$(this).css();$(this).data();$(this).click();$(this).mouseover();$(this).mouseleave();$(this).html(a)}hello("Hello world"); 
```

这节省了 39 个字节 (20%)。现在考虑：

```
function hello(name) {
    var $this = $(this);
    $this.attr();
    $this.css();
    $this.data();
    $this.click();
    $this.mouseover();
    $this.mouseleave();
    $this.html(name);
}
hello('Hello world'); 
```

缩小后的输出是

```
function hello(b){var a=$(this);a.attr();a.css();a.data();a.click();a.mouseover();a.mouseleave();a.html(b)}hello("Hello world"); 
```

这节省了 74 个字节 (37%)，几乎是我们节省的字节数的两倍。显然，大型脚本在现实世界中的节省会更少，但您仍然可以通过缓存显着减少脚本的大小。

真的，缓存只有一个好处`$(this)`。您可以获得微不足道但可衡量的运行时性能提升。更重要的是，您可以减少通过网络传输的字节数，**这直接转化为更多的美元**，因为[更快的页面加载等于更多的销售额](http://blog.kissmetrics.com/loading-time/)。

当您以这种方式看待它时，您实际上可以说重复而不是缓存它会产生可量化的*美元成本。*`$(this)`

# php - curl --resolve PHP CURL 库中的等效项

> ID：10433016
> 
> 赞同：9
> 
> 时间：2012-05-03T14:01:56.407
> 
> 标签：php, http, ssl, curl

`curl --resolve ....`PHP CURL 库中是否有等价物？

背景：我有循环 DNS（一个域名解析为多个 IP），我想向*特定*主机发送请求。我使用基于 apache 名称的虚拟主机，因此 HTTP 请求中必须出现正确的域名。

我尝试在请求 URL: 中指定 IP `curl_setopt($ch, CURLOPT_URL, '127.0.0.1')`，并使用`curl_setopt($ch, CURLOPT_HTTPHEADER, 'Host: example.com')`. 它适用于 HTTP，但对于 HTTPS，我收到 SSL 验证错误（显然 CURL 验证证书与 URL 主机名而不是`Host:`主机名）。

使用`hosts`文件不是一个方便的选择。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T20:28:53.360

首先，了解*任何*curl 选项如何转换为 libcurl（或 PHP/CURL）的最佳方法是使用[--libcurl](https://curl.haxx.se/docs/manpage.html#--libcurl)选项。

如果您这样做，您将了解到[--resolve](https://curl.haxx.se/docs/manpage.html#--resolve)使用 libcurl转换为[CURLOPT_RESOLVE](https://curl.haxx.se/libcurl/c/CURLOPT_RESOLVE.html)，PHP[自 5.5.0 起](http://php.net/ChangeLog-5.php#5.5.0)支持该功能。[自7.21.3](https://curl.haxx.se/changes.html#7_21_3)起受 libcurl 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T06:37:26.060

在 Python 的帮助下，我有一个解决方案。

在 .php 文件中，只需回显 python 的输出：

```
<?php
echo passthru("python python.py");
?> 
```

在 python.py 中：

```
import httplib
conn = httplib.HTTPSConnection('127.0.0.1');
url = "example.com"
conn.request("GET", url)
content = conn.getresponse()
print content.read()
conn.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T18:53:13.233

如果您打算分叉另一个进程，只需使用“--resolve”选项分叉 curl 本身，而不是另一个脚本。

# python - Python导入导致语法错误

> ID：10433017
> 
> 赞同：0
> 
> 时间：2012-05-03T14:01:56.983
> 
> 标签：python

我是一个老式的 Pascal 程序员，是 OOP 和 Python 的新手，所以请多多包涵……我有一本关于 Python 的书，我先在这里搜索过（虽然有很多类似的线程 - 不是每个都检查过)...

我正在尝试编写一个程序来包含我公司其他人编写的现有模块。根据我的 Python 书，我应该能够导入整个模块或只导入特定的类。这本书说，当使用'import'时，它实际上运行指定的代码（不像我在Pascal中习惯的INHERIT）。

我在模块 mod.py 中有这个结构，我想使用：

```
from x.y.z import stuff

class c1(superclass):
    def func1(self):
        ....
    def func2(self, db):
        ....
        with self.db as handler:
            .... 
```

我有一个基本脚本 test.py，它就是这样做的：

```
from mod import c1

print "Hello" 
```

当我执行“python test.py”时，我收到错误消息：

```
'with self.db as handler' - invalid syntax 
```

我想我在这里遗漏了一些基本的东西，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:05:16.780

在 Python 2.5 中，with 语句默认不可用。但它就在那里！:-) 尝试添加

`from __future__ import with_statement`

到您的 mod.py 或使用 Python 2.6+。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:05:44.373

您已修改错误消息，但我认为它看起来像

```
 File "mod.py", line 8
    with self.db as handler:
         ^
SyntaxError: invalid syntax 
```

这意味着您的 Python 版本太旧而无法识别该[`with`语句](http://docs.python.org/reference/compound_stmts.html#with)。更新到支持 python 2.6+ 的实现。

在 Python 2.5 中，您还可以在 顶部添加[`__future__`声明](http://docs.python.org/library/__future__.html)`mod.py`，如下所示：

```
from __future__ import with_statement 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:06:42.910

鉴于该行的外观和错误是语法错误，我会查看它之前的行并查找不匹配的大括号或引号。

# javascript - 在骨干网中路由时的持久操作？

> ID：10433024
> 
> 赞同：2
> 
> 时间：2012-05-03T14:02:26.810
> 
> 标签：javascript, model-view-controller, backbone.js, url-routing

我的 Web 应用程序的许多部分在 Backbone 中路由。所有呈现的项目都在 html 的主体内，并且标题中的一些项目会根据用户导航到（或从）的位置而变化。

这一切都很好，但是，控制这些动态变化需要一些冗余代码。是否可以在路由时添加始终触发的操作？例如，一个用例可能是在渲染之间将加载图标推送到屏幕上。

不是在寻找默认操作（当没有定义路由时），而是在每次新导航时触发的持久操作。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:32:51.740

您可以将路由器中的每个路由更改绑定到一个函数。只需在`initializer/constructor`路由器的方法中添加它：

```
initialize: function() {
  this.on('all', this.routeChanged, this)
},

routeChanged: function(route) {
  // perform repeating tasks here
} 
```

# sockets - 异步套接字与同步

> ID：10433028
> 
> 赞同：1
> 
> 时间：2012-05-03T14:02:48.683
> 
> 标签：sockets

我有一个关于异步套接字的问题。在过去的几个月里，这一直困扰着我，我认为我应该明智地从这里的专业人士那里得到事实。

我有一个来自客户端的传入流，我想接收数据。此传入流需要通过字符串进行初始设置，然后才能开始发送数据。

我听说过像 node.js 这样的异步 tcp 服务器的强大可扩展性。我的问题是我是否可以使用 node.js 或任何其他异步 tcp 服务器与此客户端握手并接收传入流。

您可以将传入数据视为给定时间点的库存数据或用电量流。本质上，数据将连续流入。

请让我知道我需要分享哪些其他信息来帮助我了解异步套接字以及如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:36:50.433

是的，在异步套接字之上实现握手是完全正常的。

考虑伪代码：

```
socket = accept() # or connect()
// now socket is connected
socket.write(logon_request)
logon_response = socket.read()
assert(logon_response ok)
// now socket is logged in
socket.write(more_handshake);
handshake_response = socket.read()
assert(handshake_response ok)
// now socket is ready to go

while data = socket.read()
{    process data ... } 
```

您可以将其建模为状态机，然后很容易与异步套接字一起使用。看看下面的代码如何与上面的代码相似，但分解为多个回调：

```
# state Idle -> LoggingOn
handle_connection_event(socket)
    state = LoggingOn
    socket.write(logon_request)

# state LoggingOn -> Handshaking
handle_login_response(socket)
    logon_response = socket.read()
    assert(logon_response ok)
    state = Handshaking
    socket.write(more_handshake);

# state Handshaking -> Ready
handle_handshake_response(socket)
    handshake_response = socket.read()
    assert(handshake_response ok)
    state = Ready 
```

并且所有读取都进入这里，并根据状态机进行调度

```
handle_read(socket)
    switch(state) {
    case LoggingOn: handle_logon_response(socket)
    case Handshaking: handle_handshake_response(socket)
    case Ready: process(socket.read())
    } 
```

* * *

PS。由于某种原因，我在这里遇到了严重的格式化失败，希望它是可读的

# objective-c - 收到通知后重新加载视图

> ID：10433031
> 
> 赞同：1
> 
> 时间：2012-05-03T14:03:00.317
> 
> 标签：objective-c, xcode, ios5, notifications

我有一个带有两个视图的标签栏控制器。当我在第二个视图中按下按钮时，我会向我的第一个视图发送通知，我希望我的第一个视图重新加载其数据。但是，如果我从第二个视图切换到第一个视图，则第一个视图数据尚未重新加载。我正在使用 AQGridview，顺便说一句。

//firstView.m

```
-(void) reloadGridView: (NSNotification *)notification
{
[_gridView reloadData];
}
- (void)viewDidLoad
{  
//notification for added exercise
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadGridView:) name:@"reloadGridView" object:nil];
} 
```

//secondView.m

```
 - (IBAction)AddExercise:(id)sender 
 {
         [[NSNotificationCenter defaultCenter] postNotificationName: @"reloadGridView" object: nil];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:07:41.640

从第一个选项卡中的 viewDidAppear 调用 reloadData 可能比使用通知更好。

# html - 锚点在 HTML 中恢复到顶部

> ID：10433045
> 
> 赞同：1
> 
> 时间：2012-05-03T14:03:22.983
> 
> 标签：html, anchor

我有一个链接到锚点的页面：

```
<a name="1"></a> 
```

与链接

```
<a href="examplepage.htm#1">Link</a>. 
```

当我在锚点所在的页面中单击该链接时，它会按预期工作。但是，当我从另一个页面单击该链接时，它会按预期在锚点处加载页面，但随后会在几分之一秒后恢复到页面顶部。

不知道为什么，我所有的研究都被关于如何链接到页面顶部的教程所迷惑，这与我想做的相反！

任何帮助深表感谢。

谢谢，奥利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:59:54.253

您正在调用`scroll()`函数`onload`！

```
<body class="LTR Safari Chrome Safari18 Chrome18 ENUS ContentBody" onload="scroll()"> 
```

# javascript - 使用 jQuery 创建画布元素并设置其宽度和高度属性

> ID：10433046
> 
> 赞同：32
> 
> 时间：2012-05-03T14:03:27.010
> 
> 标签：javascript, jquery, canvas, html

我只是想在 jQuery 中执行以下操作：

```
var newCanvas = $('<canvas/>',{'width':100,'height':200,'class':'radHuh'});
$(body).append(newCanvas); 
```

这是有效的（有点）并生成以下标记：

```
<canvas style="width:100px; height:200px;" class="radHuh"></canvas> 
```

你们中的大多数人可能都知道`canvas`元素并不真正喜欢 CSS 尺寸，但需要一个 width 和 height 属性，所以这个对象创建对我来说失败了。

我知道我可以这样做：

```
var newCanvas = $('<canvas/>',{'class':'radHuh'}).attr({'width':100,'height':200}); 
```

相反，但我只是想知道是否有任何方法可以告诉 jQuery，`width`并且在通过而不是 CSS`height`创建元素时应该将其视为属性？`$('element',{attributes})`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-08T11:35:21.213

jQuery 尝试将每个属性名称与 jQuery 函数名称匹配。调用匹配的函数。

`width`并且`height`是 jQuery 函数，因此您的原始代码等效于：

```
 var newCanvas = 
    $('<canvas/>',{'class':'radHuh'})
    .width(100)
    .height(100); 
```

[width(value)](http://api.jquery.com/width/#width2)和[height(value)](http://api.jquery.com/height/#height2)函数设置**CSS**元素的宽度和高度。

* * *

相关 jQuery 源代码行 ( [https://github.com/jquery/jquery/blob/master/src/attributes.js#L308](https://github.com/jquery/jquery/blob/master/src/attributes.js#L308) )

```
if ( pass && name in jQuery.attrFn ) { 
```

`attrFn`对象定义（[https://github.com/jquery/jquery/blob/master/src/attributes.js#L288](https://github.com/jquery/jquery/blob/master/src/attributes.js#L288)）：

```
attrFn: {
    val: true,
    css: true,
    html: true,
    text: true,
    data: true,
    width: true,
    height: true,
    offset: true
}, 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-08T14:04:56.753

```
var newCanvas = $('<canvas/>',{
                   'class':'radHuh',
                    id: 'myCanvas'                   
                }).prop({
                    width: 200,
                    height: 200
                });
$('#canvas').append(newCanvas); 
```

**[证明](http://jsfiddle.net/pjQKg/)**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-03T14:15:08.953

你可以这样使用

```
$('<canvas/>',{'class':'radHuh','Width':100,'Height':200}); 
```

换个案例试试

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-09T19:36:32.363

似乎更改任何字母的大小写都会阻止 jQuery 将属性转换为样式，因此 ranganadh 可能偶然发现了 jQuery 中的一些意外缺陷，它会根据样式检查属性，但不区分大小写。

例如，这似乎也有效？

```
var newCanvas = $('<canvas/>', {heiGht: 200, widtH: 100});
$('body').append(newCanvas);​​​ 
```

本机 JS 属性不会转换为样式，我可能会使用以下解决方案以确保它是“面向未来的”（`setAttribute()`似乎也可以正常工作）：

```
var newCanvas = $('<canvas/>');
    newCanvas[0].height = 200;
    newCanvas[0].width = 100;

$('body').append(newCanvas);​​​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-31T21:22:44.163

我发现这效果最好：

```
$('<canvas height="50px" width="50px"/>') 
```

您也可以通过这种方式添加`id`、`class`或其他属性。因为它不在`style=""`属性中，所以它不算作 CSS 并且会弄乱你的形状。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-09T15:26:39.710

**编辑：**这比较慢，请参阅下面的评论。

这可能比此处发布的任何解决方法都要快：

```
var attributes = {width: 100, height: 100, class: "whatever"};
$('<canvas width="'+attributes.width+'" height="'+attributes.height+'" class="'+attributes.class+'""></canvas>').appendTo(document.body); 
```

稍微不那么花哨，但它与更少的函数调用基本相同。

# php - 最近从 5.3 更新的 PHP 5.4 在使用等于条件快捷方式的变量时崩溃

> ID：10433047
> 
> 赞同：3
> 
> 时间：2012-05-03T14:03:29.257
> 
> 标签：php, apache2

我正在使用 Apache 2.4 和 PHP 5.4。

我正在执行以下操作：

```
# retrieve caller name
$calledby = debug_backtrace(); print_r($calledby);
$caller = (strlen($calledby[1]['class'])) ? $calledby[1]['class'] : $calledby[0]['class'];
# arguments are required
if (!func_num_args()) { return; }
# fill variables with argument contents if exists
$variables = (func_num_args() == 0) ? NULL : (is_array(func_get_arg(0)) ? func_get_arg(0) : NULL); 
```

从类的私有方法中。

如果我注释掉 $caller = 和 $variables = 行，那么它可以工作。

如果我将代码更改为以下代码，它也可以工作（按定义）

```
if (strlen($calledby[1]['class']))  $caller = $calledby[1]['class'];
else                                $caller = $calledby[0]['class']; 
```

我应该提交错误报告还是我对新的 5.4 语法怪癖做错了什么？

提前致谢！

[更新] 我使用 CLI 执行了文件，脚本产生了预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:44:22.127

我已经尝试使用 php 5.4 配置并且没有问题你应该看到 apache / php 日志

# c++ - c++：OpenMP 和非随机访问 STL 容器 - 一种可能的解决方法

> ID：10433048
> 
> 赞同：11
> 
> 时间：2012-05-03T14:03:29.837
> 
> 标签：c++, multithreading, stl, parallel-processing, openmp

所以在 SO 和整个 Internet 上，对于如何使 OpenMP 的易于使用的`#pragma`指令与 C++ 的同样易于使用的 STL 容器相配合，存在很多困惑和挫败感。

每个人都在谈论 STL 的变通方法`vector`，但非随机访问/双向容器，如`map`、`list`、`set`等呢？

我遇到了这个问题，并设计了一个非常简单、明显的解决方法。我在这里为 STL 介绍它`map`，但它显然是可推广的。

系列版本：

```
for (std::map<A,B>::iterator it = my_map.begin();
        it != my_map.end();
        ++it)       
    { /* do work with  it   */  } 
```

我提出的将 OpenMP 与 STL 结合使用的解决方案`map`：

```
 //make an array of iterators.
    int loop_length = my_map.size();
    std::map<A,B>::iterator loop_array[ loop_length ];

    std::map<A,B>::iterator allocate_it = my_map.begin();
    for (int j=0; j<loop_length; ++j)
        loop_array[j] = allocate_it++;

    // now you can use OpenMP as usual:
    #pragma omp parallel for
    for (uint j=0; j<loop_length; ++j) 
       { /* do work with    loop_array[j]    */  } 
```

但是，我远非 OpenMP 专家，因此**我想知道我提出的解决方法是否有效且是良好的实践。**

请假设程序员负责在 for 循环中对 STL 容器进行线程安全处理。

最后，我提出的解决方案是否比以下普遍提出的解决方案更有效[（请参阅对此 SO 问题的回答）](https://stackoverflow.com/questions/2513988/iteration-through-std-containers-in-openmp)，因为在我的解决方案中，每个线程不会遍历整个容器？

```
#pragma omp parallel
{
    for (std::map<A,B>::iterator it = my_map.begin();
            it != my_map.end();
            ++it) 
    #pragma single nowait
       {   /*  do work  */   }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T22:01:56.253

OpenMP 提供了`task`从 3.0 版开始的结构，这对于与 STL 一起使用非常有用：

```
for (std::map<A,B>::iterator it = my_map.begin();
        it != my_map.end();
        ++it)       
{
   #pragma omp task
   { /* do work with  it   */  }
} 
```

当然，迭代之间的数据依赖关系不应该存在。

# svn - 如何使用 svn 将单个服务器用于开发、生产和 QA

> ID：10433050
> 
> 赞同：0
> 
> 时间：2012-05-03T14:03:43.030
> 
> 标签：svn

我是 Web 开发人员，是 SVN 的新手。我必须对 PROD 和 DEV 进程都使用一个。通常我会创建两台服务器，一个用于 DEV 站点，另一个用于 PROD 站点。一旦我们的开发过程完成，我会将 DEV 站点链接发送给客户。如果客户批准了这些更改，那么我会将这些更改移至 PROD 服务器以供查看。在某些情况下，我们忘记从开发服务器更新 PROD 服务器中的某些代码。

请指导我，如何在此处使用 svn 以避免这些问题以及单个服务器中的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:09:36.730

在这种情况下，默认用法是为此目的使用分支。例如。完成开发后在主干上开始开发为 release-1.0.0 制作标签，如果您需要在生产中更改某些内容，只需基于标签 release-1.0.0 创建一个分支。这可以持续到任意多个版本。

# php - 如何在 foreach 循环内创建多维关联数组？

> ID：10433053
> 
> 赞同：1
> 
> 时间：2012-05-03T14:03:56.623
> 
> 标签：php

我想创建一个看起来像这样的数组

```
 $appsByOs = Array(
                  osName1 =>Array(0=>app1,1=>app2)
                  osName2 =>Array(0=>app1,1=>app2)
                  etc.....
  ) 
```

我怎么能在 foreach 循环中做到这一点？

```
 foreach($osInstanceNames as $osInstanceName){
                    $appNames(array of app names for current os)

            } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:08:58.467

您需要做的就是这个。

```
 $appsByOs = Array();
 foreach($osInstanceNames as $osInstanceName){
                     $appsByOs[$osInstanceName] = $appNames;

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:23:17.567

恢复上一篇文章并为一个操作系统实例添加多个应用程序的可能性

```
 $appsByOs = Array(); 
 foreach($osInstanceNames as $osInstanceName){ 
                     $appsByOs[$osInstanceName][] = $appNames; 

 } 
```

# wpf - WPF 中对象之间的关联

> ID：10433054
> 
> 赞同：1
> 
> 时间：2012-05-03T14:03:58.183
> 
> 标签：wpf, mvvm

我有一个 XML 文件，其中包含一些实体的描述。每个实体都有自己的属性，每个属性都有自己的属性，并且在 XML 文件的末尾，实体之间存在关联。

我正在使用 WPF ( **MVVM** ) 将此 XML 文件转换为图形图。每个实体都显示为一个块，并且关联必须显示为连接实体的线（与 VS 中的“edmx”相比）。到目前为止，我可以使用 DataTemplates、Styles 和 ItemsControls 显示所有具有所有属性的实体。唯一的问题是我无法将关联转换为图形线。

![在此处输入图像描述](../Images/c3514d27e499c22f785d016a838c6e5a.png)

我试图按照这个[例子](http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4)没有任何进展。有谁知道如何显示我的块（实体）之间的这些关联？

谢谢

# sql - MS Access SQL，更改数据类型

> ID：10433060
> 
> 赞同：6
> 
> 时间：2012-05-03T14:04:24.207
> 
> 标签：sql, ms-access, types, sqldatatypes

在 Access 的设计模式中尝试将数据类型从文本更改为数字时，我不断收到“磁盘空间或内存不足”错误（使用接近 2 gb 的数据库），所以我找到了一种解决方法，基本上是创建一个新列，将数据类型设置为数字，复制旧列的内容，删除旧列并将新列重命名为旧列的名称。

我听说 ALTER TABLE 也可以用来更改数据类型。

有人能给我一个例子，说明如何使用 ALTER TABLE 将整列数据类型从文本更改为数字，

还是有人有更好的方法来更改数据类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T15:46:44.503

本文可以帮助您使用 ALTER TABLE： http: [//msdn.microsoft.com/en-us/library/bb177883 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb177883(v=office.12).aspx)

因此，在您的情况下，声明将是：

```
ALTER TABLE TableName ALTER COLUMN ColumnName INTEGER 
```

顺便说一句，列 == 字段（在 Access 中）。除非我错过了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:47:21.980

您可能想从 MSDN 阅读此内容：

[http://msdn.microsoft.com/en-us/library/bb177883(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb177883(v=office.12).aspx)

```
ALTER TABLE yourTable ALTER COLUMN yourColumn TEXT(10) -- or whatever your new datatype is 
```

这是文章中的示例函数：

```
Sub AlterTableX2()

    Dim dbs As Database

    ' Modify this line to include the path to Northwind
    ' on your computer.
    Set dbs = OpenDatabase("Northwind.mdb")

    ' Add the Salary field to the Employees table 
    ' and make it a Money data type.
    dbs.Execute "ALTER TABLE Employees " _
        & "ALTER COLUMN Salary CHAR(20);"

    dbs.Close

End Sub 
```

# c++ - C++ 客户端使用 libcurl 将文件上传到 EFT 服务器

> ID：10433064
> 
> 赞同：0
> 
> 时间：2012-05-03T14:04:33.170
> 
> 标签：c++, http, libcurl

我目前一直在处理一个最初不是由我构建的项目。它是一个连接到 EFT 服务器的客户端，需要一键上传文件。在构建软件时，我们没有为在 Apache 服务器上进行本地测试而构建的凭据。

GUI 使用 Visual C# 构建，服务使用 libcurl 和 C++ 构建。

有一个名为 fileCurl.cpp 的文件，我在 _startUpload 类中添加了凭据

```
// What URL that receives this POST 
curl_easy_setopt(cFileCurl->mCurl, CURLOPT_URL, sUrl.c_str());
//Username and Password
curl_easy_setopt(cFileCurl->mCurl, CURLOPT_USERPWD, "myname:thesecret"); 
```

使用 JSON 解析 GUI 并获取主机和端口。即使在此之后，服务器也会返回 401（用户身份验证错误）。

我需要一些线索，如果我留下的任何信息让我知道，我会立即发布。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:48:12.340

您使用 401 获得的响应标头包含您需要的信息，例如服务器支持此 URL 的 HTTP 身份验证方法。您的 libcurl 选项似乎只使用默认方法，即 Basic。

# sql - Oracle SQL：需要语法来减少查询中的结果

> ID：10433065
> 
> 赞同：0
> 
> 时间：2012-05-03T14:04:35.063
> 
> 标签：sql

有人可以帮我获得所需结果的正确语法吗？在下面的查询中，子查询获取两个课程（A 和 B）。整个查询获取它们被持有的时间段。但是，我只想要两个班级共有的时期。

```
select m.period
  from course
  join meets m
 using (start_yy, school, class_cd)
  join section s
 using (start_yy, school, class_cd, section)
 where start_yy = '11'
   and school = 'MYSCH'
   and class_cd in (select cl.class_cd
                      from crslink cl, linkhead lh
                     where cl.start_yy = '11'
                       and cl.school = 'MYSCH'
                       and cl.seq_number = lh.seq_number)   
 order by period; 
```

子查询中的两个类包含多个周期，但周期 4 是它们共同的唯一周期。我如何得到这个结果？

结果是：1,2,4,7

我需要：4

以下是包含查询中使用的字段的表结构。

```
TABLE_NAME,COLUMN_ID,COLUMN_NAME,DATA_TYPE,DATA_LENGTH
COURSE    ,1        ,START_YY   ,VARCHAR2 ,2
COURSE    ,2        ,SCHOOL     ,VARCHAR2 ,4
COURSE    ,3        ,CLASS_CD   ,VARCHAR2 ,10
CRSLINK   ,1        ,START_YY   ,VARCHAR2 ,2
CRSLINK   ,2        ,SCHOOL     ,VARCHAR2 ,4
CRSLINK   ,3        ,CLASS_CD   ,VARCHAR2 ,10
CRSLINK   ,4        ,SEQ_NUMBER ,NUMBER   ,22
LINKHEAD  ,1        ,START_YY   ,VARCHAR2 ,2
LINKHEAD  ,2        ,SCHOOL     ,VARCHAR2 ,4
LINKHEAD  ,7        ,SEQ_NUMBER ,NUMBER   ,22
MEETS     ,1        ,START_YY   ,VARCHAR2 ,2
MEETS     ,2        ,SCHOOL     ,VARCHAR2 ,4
MEETS     ,3        ,CLASS_CD   ,VARCHAR2 ,10
MEETS     ,4        ,SECTION    ,VARCHAR2 ,3
MEETS     ,6        ,PERIOD     ,VARCHAR2 ,2
SECTION   ,1        ,START_YY   ,VARCHAR2 ,2
SECTION   ,2        ,SCHOOL     ,VARCHAR2 ,4
SECTION   ,3        ,CLASS_CD   ,VARCHAR2 ,10
SECTION   ,4        ,SECTION    ,VARCHAR2 ,3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:09:16.257

```
select distinct m.period
  from course
  join meets m
 using (start_yy, school, class_cd)
  join section s
 using (start_yy, school, class_cd, section)
 where start_yy = '11'
   and school = 'MYSCH'
   and class_cd exists (select 1 
                      from crslink cl, linkhead lh
                     where cl.class_cd =course.class_cd 
                         And cl.start_yy = '11'
                       and cl.school = 'MYSCH'
                       and cl.seq_number = lh.seq_number)   
 order by period; 
```

**解决方案：**

在以下查询中的 where 子句中为表名添加三个字段的前缀。

```
select m.period
  from course
  join meets m
 using (start_yy, school, class_cd)
  join section s
 using (start_yy, school, class_cd, section)
 join 
 crslink cl on cl.class_cd = class_cd
 join 
 linkhead lh on cl.seq_number = lh.seq_number
 where start_yy = '11'
   and school = 'MYSCH'
   and class_cd 
   and cl.start_yy = '11'
   and cl.school = 'MYSCH'
   and cl.class_cd is not null
   and lh.seq_number is not null
 order by period; 
```

# drupal - Drupal 6 多站点，共享主题问题

> ID：10433077
> 
> 赞同：0
> 
> 时间：2012-05-03T14:05:05.700
> 
> 标签：drupal

我有一个当前运行 1 个站点的 drupal 站点。该站点使用位于 /themes 的主题（意味着主题文件夹不在站点文件夹中）。

所以我正在尝试添加另一个使用相同数据库的站点，并采用当前主题并对其进行一些更改。所以我将主题文件夹复制到：/sites/newsite.com/themes/。我在信息文件中更改了主题的名称。

但你知道发生了什么吗？旧站点现在使用以下主题：“/sites/newsite.com/themes/”！这怎么可能？它自动改变了......

真的很奇怪....

顺便说一句，新站点也在新主题文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:50:31.590

您说您为新站点更改了 .info 文件中的主题名称。您是否还更改了新主题的目录名称？

# asp.net - 动态添加数据到加载的文本文件

> ID：10433079
> 
> 赞同：0
> 
> 时间：2012-05-03T14:05:08.603
> 
> 标签：asp.net, vb.net

我有一个 asp.net(VB) 网站，我通过文本文件加载表单。在文本文件中，我有 3 个字段需要在我的代码中使用函数动态填充。

有没有办法加载文本文件，然后在加载后填充它的某些区域？

这是我阅读文本文件的方式：

```
If Not File.Exists(FILE_NAME) Then
    'file does not exist
    System.Web.HttpContext.Current.Response.Write("File Does Not Exist!")
    Return
End If
Using sr As StreamReader = File.OpenText(FILE_NAME)
    Dim input As String
    Do
        input = sr.ReadLine()
        If Not (input Is Nothing) Then
            System.Web.HttpContext.Current.Response.Write(input)
            fileText = fileText & input.ToString
        End If
    Loop Until input Is Nothing
End Using 
```

谢谢！

# entity-framework - Entity Framework 中的 IQueryable 对象是否在 Visual Studio 中显示 SQL？

> ID：10433085
> 
> 赞同：1
> 
> 时间：2012-05-03T14:05:29.290
> 
> 标签：entity-framework, c#-4.0

当我们将 linq 调试到 Sql 实体时，当我们将鼠标悬停在 IQueryable 对象上时，我们会看到在屏幕后面构造实际查询，有什么方法可以看到为 EF 生成的 sql？

除了 LinqPad 和 SQL 分析器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:10:15.713

尝试[`.ToTraceString`](http://msdn.microsoft.com/en-us/library/system.data.objects.objectquery.totracestring.aspx)：

```
query.ToTraceString() 
```

这将返回 SQL。

# devexpress - ASPxClientDateEdit GetDate()

> ID：10433086
> 
> 赞同：0
> 
> 时间：2012-05-03T14:05:30.223
> 
> 标签：devexpress

我正在使用 DevExpress v10。我在网页上有一个 ASPxDateEdit 控件。单击窗体上的按钮时，我的客户端 JavaScript 代码需要获取 ASPxDateEdit 控件的值。为此，我使用了 ASPxClientDateEdit.GetDate() 方法。但我发现了以下问题： GetDate() 在某些情况下不返回当前值。假设我在 ASPxDateEdit 控件中有一些日期。我清除该字段（使用键盘）并立即单击我的按钮，而不是从 ASPxDateEdit 控件移动焦点。在这种情况下，ASPxClientDateEdit.GetDate() 调用返回 OLD 值，尽管控件的字段已经为空。

我的脚本如何准确检索屏幕上的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:56:03.840

您可以使用客户端**ASPxClientDateEdit.GetText()**方法并将其结果与**ASPxClientDateEdit.GetDate()**值进行比较。

PS 为什么不就您的问题联系 DX 人员？

# java - SimpleOpenNI / Kinect：sceneMap / depthMap 颜色控制

> ID：10433092
> 
> 赞同：0
> 
> 时间：2012-05-03T14:06:09.730
> 
> 标签：java, kinect, processing, openni, simple-openni

[背景] 我正在帮助一名研究生（MFA）完成一个艺术项目：

我正在尝试控制 depthMap 生成的输出颜色，以便可以*独立*控制 Red、Green 和 Blue 值。理想的最终结果是，每个 depthMap 生成的值都可以更改为各种深浅的洋红色 (255,0,255)，这样每个 SimpleOpenNI 用户就会出现差异化。

到目前为止，我还没有找到在 pde 文件中执行此操作的方法，也没有找到修改 SimpleOpenNI 类以适应相同目标的正确方法。- 无论出于何种原因，tint() 调用都会更改画布的 alpha 值，*但似乎不会*调整颜色值。

任何适用的建议将不胜感激。

资源：[SimpleOpenNI 源](http://code.google.com/p/simple-openni/source/browse/trunk/SimpleOpenNI/src/p5_src/SimpleOpenNI.java) 我的 pde：

```
import SimpleOpenNI.*;

SimpleOpenNI  context;

void setup()
{
  context = new SimpleOpenNI(this);

  // enable depthMap generation
  if(context.enableScene() == false)
  {
     println("Can't open the sceneMap, maybe the camera is not connected!"); 
     exit();
     return;
  }

  frameRate(30);
  background(128);
  size(context.sceneWidth() , context.sceneHeight()); 
}

void draw()
{

  // update the cam
  context.update(); 

  // draw irImageMap && Sets frame size.
  image(context.sceneImage(),25,25, 590,430);

  // "blend" shapes BG & previous the frame
   tint(#ED145B, 125);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:13:45.010

除了`sceneImage()`，SimpleOpenNI 还提供了一个名为的方法，该方法`sceneMap()`以 int[] 作为输入。它使用与该用户对应的数字填充数组中映射到特定用户的值。

例如，如果您没有用户，sceneMap 数组将用零填充（例如`[0,0,0.....0]`），如果您有 1 个用户，则某些元素将用 1 填充，因为属于该用户的像素（例如`[0,0,0,1,1,...1,0,0,0,1,0...etc.]`）等等。

您可以尝试在 PImage 中进行一些颜色替换，但这不是很灵活（如果您也启用了深度图怎么办？）并且您依赖于每个用户的硬编码值（R、B、G、C ,M,Y，无论顺序可能在 SimpleOpenNI 中），因此`sceneMap()`是更灵活的选项。

这是一个关于如何使用它的注释示例：

```
import SimpleOpenNI.*;

SimpleOpenNI  context;

int[] sceneMap;//this will store data about the scene (bg pixels will be 0, and if there are any users, they will have the value of the user id - e.g. if there are no users, the array will be filled with zeros, if there is one user, some array entries will be equal to 1, etc. the size of the array is the same as the number of pixels in scene image, so it's easy to use with the pixels[] of a PImage
PImage myUserImage;//this is where we'll draw the user
int user1Colour = color(180,130,30);//change to whatever you like

void setup()
{
  context = new SimpleOpenNI(this);
  context.enableScene();

  background(200,0,0);
  size(context.sceneWidth() , context.sceneHeight());
  //set scene map array
  sceneMap = new int[context.sceneWidth()*context.sceneHeight()];
  //create the image to draw the user into, by default it will be filled black
  myUserImage = createImage( context.sceneWidth() , context.sceneHeight(), RGB );
}

void draw()
{
  context.update(); 

  // // gives you a label map, 0 = no person, 0+n = person n - tell OpenNI to update the numbers in the array
  context.sceneMap(sceneMap);
  //clear myUserImage - fill everything with black
  Arrays.fill(myUserImage.pixels,color(0));//We've never used Arrays.fill() before, but all it does is it loops through all elements on an array you pass and sets a value you want for each element - fills an array with a value
  for(int i = 0 ; i < myUserImage.pixels.length; i++){
    //check if there is a user for the current pixel, if so, use our custom colour for the pixel at this index
    if(sceneMap[i] > 0) myUserImage.pixels[i] = user1Colour;
  }
  myUserImage.updatePixels();

  //display image
  image(myUserImage,0,0);
} 
```

从长远来看，如果你想满足多个用户的需求，编写一个基本的实用程序类是值得的：

```
import SimpleOpenNI.*;

SimpleOpenNI  context;

SceneMapper sceneMap;

void setup()
{
  context = new SimpleOpenNI(this);
  context.enableScene();

  background(200,0,0);
  size(context.sceneWidth() , context.sceneHeight());

  sceneMap = new SceneMapper(context);
}

void draw()
{
  context.update(); 
  sceneMap.update();
  //display image
  image(sceneMap.scene,0,0);
}
class SceneMapper{
  PImage scene;//this is a PImage where we'll actually draw the user with what colour we want
  int[] sceneMap;//this will store scene data - an array of ints which has the same length as context.sceneImage().pixels, the only difference is, sceneImage already has colours set, while scene map has numbers representing user(1,2,3etc.) on top of background(0s)
  int numPixels;//total number of pixels, we only store it so we can reuse it
  color bg;//background colour
  color[] users = {color(255),color(192),color(127),color(64),color(32)};//fill colours for users

  SceneMapper(SimpleOpenNI context){
    numPixels = context.sceneWidth()*context.sceneHeight();
    sceneMap = new int[numPixels];//init scene nap array
    scene = createImage( context.sceneWidth(), context.sceneHeight(), RGB );//create a PImage to display scene data
    scene.loadPixels();  
    bg = color(0);
  }
  void update(){
    context.sceneMap(sceneMap);//ask SimpleOpenNI to store scene map data into our array
    Arrays.fill(scene.pixels, bg);//clear the image - fill it with the background colours
    for(int i = 0 ; i < numPixels ; i++){//loop through all pixels
      for(int u = 0 ; u < users.length; u++){//loop through user colours
        if(sceneMap[i] > 0) scene.pixels[i] = users[u];//if there are user pixels, use set user colour for those pixels (e.g. pixels with value 1 will use colours stored in users[0], pixels with value 2 will use colour from users[1], etc.) 
      } 
    }
    scene.updatePixels();//we've use pixels, so update the image at the end
  }
} 
```

但这取决于学生是否熟悉课程，并且考虑到它是 MFA，我认为清洁代码的压力较小，而完成任务的压力更大。

# php - 我的“if”语句即使它是真的也返回假，为什么？

> ID：10433093
> 
> 赞同：0
> 
> 时间：2012-05-03T14:06:09.793
> 
> 标签：php, mysql

$status 返回 0，但循环就像它的“1”一样。有趣的是我的错误消息是“MySQL DB 正在使用中（状态 0）”。

换句话说：即使它是真的，我的 if 语句也会失败。

错在哪里？

```
include 'status_check.php'; //it takes $check from MySQL DB
if($status = "0") { //if status is 0 go on
    include 'status_1.php'; //set status to 1
            ...
    include 'status_0.php'; //after finished operation set status back to 0
} else { //if status is 1 say that its 1
    echo "MySQL DB is in use (status ". $status .")";
    die;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-03T14:07:30.723

你是在分配，而不是比较。

```
if($status = "0") { 
```

做`==`一个比较。

因此它是错误的，因为字符串“0”在 PHP 中被视为“虚假”值。文档： http: [//php.net/boolean#language.types.boolean.casting](http://php.net/boolean#language.types.boolean.casting)

# c# - 如何编译 ServiceDescription 以便内联其导入语句？

> ID：10433094
> 
> 赞同：3
> 
> 时间：2012-05-03T14:06:10.757
> 
> 标签：c#, .net, web-services, wsdl

我正在尝试以编程方式读取 C# 中的 wsdl 文件。我正在为 wsdl 中的 import 语句而苦苦挣扎。.net 类“ServiceDescription”和“DiscoveryClientProtocol”允许我读取 wsdl 文件及其导入的所有 wsdl 文件，但这些文件作为单独的 ServiceDescriptions 返回。理想情况下，我想要一个 ServiceDescription，其中所有导入都已“内联”/“扁平化”。对于模式，有一个很好的 XmlSchemaSet.Compile 方法，但我还没有找到类似的 Web 服务。

# c# - 路径中的目录名称

> ID：10433098
> 
> 赞同：2
> 
> 时间：2012-05-03T14:06:47.577
> 
> 标签：c#

使用此代码

```
string[] directories = Directory.GetDirectories(path); 
```

我能够获得该路径中的目录，但我获得了完整路径，例如：

> C:\Users\test1\Documents\Visual Studio 2010
> C:\Users\test1\Documents\test
> C:\Users\test1\Documents\example

我怎样才能得到最后一个目录的名称！？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:08:20.473

调用[`Path.GetFileName()`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)以获取路径的最后一段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:12:25.630

如果你打电话

```
DirectoryInfo.GetDirectories(path) 
```

您将获得一个 DirectoryInfo 对象数组，这些对象具有包含您要查找的信息的 Name 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:10:33.390

试试这个：

```
string[] directories = Directory.GetDirectories(path).Select(x => x.Replace(path, "")).ToArray(); 
```

不要忘记导入`System.Linq`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:14:30.793

在我的头顶上：

```
DirectoryInfo path = new DirectoryInfo('path to your folder');
IList<DirectoryInfo> directories = path.GetDirectories();
string last = directories.Last().Name; 
```

这个`DirectoryInfo`类很好，因为它为您提供了更多关于目录的信息`Directory.GetDirectories()`；

# java - 为什么 JTable 不显示用户输入？

> ID：10433100
> 
> 赞同：0
> 
> 时间：2012-05-03T14:06:57.493
> 
> 标签：java, swing, jtable, tablecelleditor

MyTableCellEditor 需要将覆盖编辑（如 Excel 单元格）和数据输入规则（parseDouble）添加到 JTable。当用户单击另一个单元格时，为什么单元格会擦除用户输入的值？IOW：输入到一个单元格中的值是可见的，直到单击另一个单元格，然后它就消失了。单步执行程序，当用户编辑单元格值时调用getTableCellEditorComponent，当单元格编辑完成时调用getCellEditorValue。

```
public class MyTableFrame extends javax.swing.JFrame 
    implements TableModelListener {
    private static TableColumn column2;

    public MyTableFrame() {
        initComponents();
        ...
        column2 = jTable.getColumnModel().getColumn(2);
        column2.setCellEditor(new MyTableCellEditor());
        jTable.getModel().addTableModelListener(this);
    }
}

public class MyTableCellEditor extends AbstractCellEditor implements
        TableCellEditor {

    // Component to handle the editing of a cell value
    private JTextField component = new JTextField();
    // Return value
    private Object value;
    private DefaultTableModel model;
    private int rowIndex;
    private int columnIndex;

    public Component getTableCellEditorComponent(JTable table, Object value,
            boolean isSelected, int rowIndex, int columnIndex) {
        model = (DefaultTableModel) table.getModel();
        this.value = value;
        this.rowIndex = rowIndex;
        this.columnIndex = columnIndex;
        component.setText("");
        return component;
    }

    public Object getCellEditorValue() {
        try {
            return Double.parseDouble(model.getValueAt(rowIndex, columnIndex)
                .toString());
        } catch (Exception ex) {
            return value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:22:39.813

我猜是在编辑完成后将条目放入模型中。因此，从模型中获取值`getCellEditorValue()`将为您提供编辑前的值。

相反，您应该使用它`component.getText()`来获取值。

```
 return Double.parseDouble(component.getText()) 
```

# jquery - mouseover mouseout 在多个 ul 上不起作用动画

> ID：10433101
> 
> 赞同：0
> 
> 时间：2012-05-03T14:07:01.007
> 
> 标签：jquery, menu, jquery-animate, mouseover, mouseout

有人知道如何使我的脚本适用于多个 ul 吗？

请看看[我的 jsfiddle](http://jsfiddle.net/Autodealers/YFUsJ/)。
如您所见，该脚本仅适用于鼠标悬停时的第二个 ul。

提前谢谢你！
亲切的问候，
乔纳森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:05:31.807

所以让我解释一下，发生了什么。你只选择了最后一个创建的 div，所以只有那个。

我必须找到选中`.active`的和选中的`div`

这是示例：

[http://jsfiddle.net/JoshuaPack/YFUsJ/23/](http://jsfiddle.net/JoshuaPack/YFUsJ/23/)

在`mouseover`我将其添加到顶部以更改`active`和`animation`vars

```
 active = $(this).parent().find('.active');
    animation = $(this).parent().find('div'); 
```

在`mouseout`我添加了这个。

```
 active = $(this).find('.active');
    animation = $(this).find('div'); 
```

**编辑：** 对于将类移动`active`到其他对象的问题，您必须分别为每个类`<li>`附加以下示例：`<div>``.active`

[http://jsfiddle.net/JoshuaPack/YFUsJ/31/](http://jsfiddle.net/JoshuaPack/YFUsJ/31/)

我所做的是将动画变量包装成`.each`

```
$.each(active, function() {
    var animation = $('<div>').css({
        'position': 'absolute',
        'height': $(this).outerHeight()-1,
        'width': $(this).outerWidth(),
        'marginTop': ($(this).parent().index() * $(this).outerHeight()),
        'borderBottom': '1px solid #000',
        'z-index': -10
    });
    $(this).parent().parent().prepend(animation);
}); 
```

取而代之的是，或者在之前的`<ul>`类似内容之前，我对父级的父级进行了操作，该父级应该始终存在用于带有 class 的菜单`active`。

# html - HTML：从列表框中选择一个元素并将其与页面链接

> ID：10433104
> 
> 赞同：0
> 
> 时间：2012-05-03T14:07:18.410
> 
> 标签：html, listbox

我不太喜欢 HTML，我需要一些帮助。

我有一个包含 3 个元素的小列表框：

```
<select size="20">
<option>Spiderman</option>
<option>Superman</option>
<option>Hulk</option>
</select>
<input type="submit" value="Search!" /> 
```

我想要的是如果有人选择“蜘蛛侠”并点击搜索，我希望他去网站“蜘蛛侠.html”。其余的也一样，如果他点击 Superman，转到 Superman.html，如果他点击 Hulk，转到 Hulk.html。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:14:58.207

试试这个 ：）

```
<select size="20" id="myselect" >
<option value="spiderman.html">Spiderman</option>
<option value="superman.html">Superman</option>
<option value="hulk.html">Hulk</option>
</select>
<input type="submit" value="Search!" onclick="document.location.href = 'http://your-website/' + document.getElementById('myselect').value;" /> 
```

# git - 在指定的存储库中使用 Git 分支动态填充 Jenkins 选择参数

> ID：10433105
> 
> 赞同：67
> 
> 时间：2012-05-03T14:07:21.223
> 
> 标签：git, parameters, branch, jenkins, choice

我有一个参数化的 Jenkins 作业，它需要在特定的 Git 存储库中输入特定的 Git 分支。目前这个参数是一个字符串参数。

有没有办法让这个参数成为选择参数并用 Git 分支动态填充下拉列表？我不想要求有人通过在每次创建新分支时手动配置下拉菜单来维护此选择参数。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2015-03-23T16:16:25.770

我尝试了这个链接中提到的几个答案，但不知道如何告诉詹金斯用户选择的分支。正如我在上面线程中的先前评论中提到的，我将分支选择器字段留空。

但是，在进一步调查期间，我发现了另一种方法来做同样的事情 - [https://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin) 我发现这种方法要简单得多，而且东西更少配置！

这是我配置的 -

1.  安装了git参数插件
2.  检查“此构建已参数化”并添加了“Git 参数”
3.  添加了以下值：![作业中的 Git Parameter 插件配置](../Images/4028b745b90824f23a29d4453762e18e.png)

4.  然后在作业的 git SCM 部分中，我添加了在“名称”部分中提到的相同值，就好像它是一个环境变量一样。（如果你仔细阅读这个 git 参数插件的帮助，你就会意识到这一点） ![分支选择器](../Images/1a99152841d2993fdcf26722cbfc91d8.png)

在此之后，我刚刚运行构建，选择了我的分支（Jenkins 在构建之前检查了这个分支）并且它成功地完成了构建，并且选择了我指定的分支。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-03T15:44:29.167

[扩展选择参数插件](https://wiki.jenkins-ci.org/display/JENKINS/Extended+Choice+Parameter+plugin)将允许您从文件中读取选择。

当然，现在您还有另一个问题：如何确保文件是最新的（可以通过 post-commit 挂钩完成）并传播给所有用户（可以通过将文件放在共享文件上来完成）文件服务器）。但可能有更好的解决方案。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-09-02T16:42:42.883

我能够使用[Jenkins Dynamic Parameter Plug-in](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+Dynamic+Parameter+Plug-in)实现这个结果。我使用了动态选择参数选项，对于选择脚本，我使用了以下内容：

```
proc1 = ['/bin/bash', '-c', "/usr/bin/git ls-remote -h ssh://user@server.com/path/to/repo.git"].execute()
proc2 = ['/bin/bash', '-c', "awk '{print \$2}'"].execute()
proc3 = ['/bin/bash', '-c', "sed s%^refs/heads%origin%"].execute()

all = proc1 | proc2 | proc3
String result = all.text

String filename = "/tmp/branches.txt"
boolean success = new File(filename).write(result) 

def multiline = "cat /tmp/branches.txt".execute().text
def list = multiline.readLines() 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-10-15T15:54:42.387

使用[“Git Parameter Plug-in”](https://plugins.jenkins.io/git-parameter)非常简单。

添加名称，例如“SELECT_BRANCH”##确保此变量，因为稍后将使用它。然后参数类型：分支

然后联系 SCM：选择：Git 和分支说明符：${SELECT_BRANCH}

要验证，请在 jenkins 的 shell 中执行以下命令：

回声 ${SELECT_BRANCH}

env.enter image description here

![在此处输入图像描述](../Images/4bdb969b76a75fa2178ccc6fe699d936.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-06-06T14:19:46.517

对于我来说，我使用输入级参数：

1.  我通过检查 git 项目开始我的管道。
2.  我使用 awk commade 生成包含所有分支列表的 barnch.txt 文件
3.  在阶段 setps 中，我读取文件并使用它来生成输入选择参数

当用户启动一个管道时，这个管道将等待他在列表中进行选择。

```
pipeline{
agent any

stages{

    stage('checkout scm') {
        steps {
            script{
                git credentialsId: '8bd8-419d-8af0-30960441fcd7', url: 'ssh://jenkins@git.company.com:/usr/company/repositories/repo.git'
                sh 'git branch -r | awk \'{print $1}\' ORS=\'\\n\' >>branch.txt'
            }

        }
    }
     stage('get build Params User Input') {
        steps{
            script{

                liste = readFile 'branch.txt'
                echo "please click on the link here to chose the branch to build"
                env.BRANCH_SCOPE = input message: 'Please choose the branch to build ', ok: 'Validate!',
                        parameters: [choice(name: 'BRANCH_NAME', choices: "${liste}", description: 'Branch to build?')]

            }
        }
    } 
    stage("checkout the branch"){
        steps{
            echo "${env.BRANCH_SCOPE}"
            git  credentialsId: 'ea346a50-8bd8-419d-8af0-30960441fcd7', url: 'ssh://jenkins@git.company.com/usr/company/repositories/repo.git'
            sh "git checkout -b build ${env.BRANCH_NAME}"
        }
    }
    stage(" exec maven build"){
        steps{
            withMaven(maven: 'M3', mavenSettingsConfig: 'mvn-setting-xml') {
               sh "mvn clean install "
            }
        }
    }
    stage("clean workwpace"){
        steps{
            cleanWs()
        }
    }
} 
```

}

然后用户将与构建进行交互：

[在此处输入图像描述](https://i.stack.imgur.com/cFbaX.png)

[在此处输入图像描述](https://i.stack.imgur.com/rAOG8.png)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-12-25T09:28:00.193

我在这里面临类似的问题。我们的用户正在将他们的工作从自由式迁移到流水线。他们不希望将 Jenkinsfile 存储在他们的存储库中（历史原因）并且仍然想使用“Git Parameter”插件

所以我们必须使用“管道脚本”并开发一个像“Git Parameter”一样工作的不同插件。

这个新插件不与项目中的 SCM 设置集成。该插件位于[https://plugins.jenkins.io/list-git-branches-parameter](https://plugins.jenkins.io/list-git-branches-parameter)

希望它也能帮助你

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-04-18T11:17:51.177

我对这种情况有一个新的回应：解决这个问题的简单方法是让你从源代码中获取 jenkinsFile。

然后你选择了：这个工作有一个 git 参数

[![在此处输入图像描述](../Images/f9b2f59303e1b65b9bdf7e921f6d4afe.png)](https://i.stack.imgur.com/TpH8E.png)

并且管道设置，取消选中“轻量级结帐”复选框，这将在作业工作区执行真正的 git 结帐。

[![在此处输入图像描述](../Images/ea24fc2e132b4600e55e49508e4ec8de.png)](https://i.stack.imgur.com/5pkT2.png)

之后，参数将由您的 git 分支自动填充

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-12T09:18:27.823

扩展@malenkiy_scot 的答案。我创建了一个新的 jenkins 作业来构建扩展选择插件使用的文件。

您可以执行以下操作（我在 jenkins 中执行 shell 步骤，但您可以在脚本中执行此操作）：

```
git ls-remote git@github.com:my/repo.git |grep refs/heads/* >tmp.txt
sed -e 's/.*refs\/heads\///' tmp.txt > tmp2.txt
tr '\n' ',' < tmp2.txt > tmp3.txt
sed '1i\branches=' tmp3.txt > tmp4.txt
tr -d '\n'  < tmp4.txt > branches.txt 
```

然后我使用 Artifact deployer 插件将该文件推送到共享位置，该位置位于 web url 中，然后只需使用 Extended Choice 插件中的“http://localhost/branches.txt”作为 url。奇迹般有效。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-06T09:25:47.267

您可以使用之前由malenkiy_scot提到的扩展选择参数插件和一个简单的php脚本来完成相同的操作（假设您有一个服务器来部署您可以从Jenkins机器上访问的php脚本）

```
<?php
chdir('/path/to/repo');
exec('git branch -r', $output);
print('branches='.str_replace('  origin/','',implode(',', $output)));
?> 
```

或者

```
<?php
exec('git ls-remote -h http://user:pass@repo.git', $output);
print('branches='.preg_replace('/[a-z0-9]*\trefs\/heads\//','',implode(',', $output)));
?> 
```

使用第一个选项，您需要克隆 repo。对于第二个，您不需要，但在这两种情况下，您都需要在托管您的 php 脚本的服务器中安装 git。如果使用任何这些选项，它会完全动态化，您无需构建列表文件。只需将脚本的 URL 放在扩展选择参数“属性文件”字段中。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-03-16T17:36:51.803

是的，我写了一个小 groovy 脚本，它可以解决问题您应该为您的工作添加一个“动态选择参数”，并根据您的需要自定义以下 groovy 脚本：

```
#!/usr/bin/groovy

def gitURL = "git repo url"
def command = "git ls-remote --heads --tags ${gitURL}"

def proc = command.execute()
proc.waitFor()              

if ( proc.exitValue() != 0 ) {
   println "Error, ${proc.err.text}"
   System.exit(-1)
}

def text = proc.in.text
# put your version string match
def match = /<REGEX>/
def tags = []

text.eachMatch(match) { tags.push(it[1]) }
tags.unique()
tags.sort( { a, b ->
         def a1 = a.tokenize('._-')
         def b1 = b.tokenize('._-')
         try {
            for (i in 1..<[a1.size(), b1.size()].min()) { 
                 if (a1[i].toInteger() != b1[i].toInteger()) return a1[i].toInteger() <=> b1[i].toInteger()
            }
            return 1
         } catch (e) {
            return -1;
         }
} )
tags.reverse() 
```

在我的情况下，版本字符串采用以下格式 XXXX 并且可以具有格式为 XXX-username 等的用户分支......所以我必须编写自己的排序函数。这是我的第一个 groovy 脚本，所以如果有更好的做事方法，我想知道。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-12T10:33:55.333

我们可以通过使用`text`. 我的完整解决方案如下：

```
proc1 = ['/bin/bash', '-c', 
  "/usr/bin/git ls-remote --heads ssh://repo_url.git"].execute()
proc2 = ['/bin/bash', '-c', 
  "/usr/bin/awk ' { gsub(/refs\\/heads\\//, \"\"); print \$2 }' "].execute()
all = proc1 | proc2

choices = all.text
return choices.split().toList(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-15T21:19:44.040

**如果您的工作不直接使用“源代码管理”**（同样是“Git 参数插件”），但仍然可以访问本地（克隆）git 存储库，则以下 groovy 脚本将很有用：

```
import jenkins.model.Jenkins

def envVars = Jenkins.instance.getNodeProperties()[0].getEnvVars() 
def GIT_PROJECT_PATH = envVars.get('GIT_PROJECT_PATH') 
def gettags = "git ls-remote -t --heads origin".execute(null, new File(GIT_PROJECT_PATH))

return gettags.text.readLines()
         .collect { it.split()[1].replaceAll('\\^\\{\\}', '').replaceAll('refs/\\w+/', '')  }
         .unique() 
```

在此处查看完整说明： [https ://stackoverflow.com/a/37810768/658497](https://stackoverflow.com/a/37810768/658497)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-03T09:43:23.167

我知道在最初的问题中没有提到 Jenkins 管道，但如果它仍然适用（使用它），我发现这个解决方案易于维护和方便。

这种方法描述了组成 Jenkins 管道所需的设置，该管道动态“轮询”（列出）特定存储库的所有分支，然后允许用户在运行此作业的构建时使用某些特定分支运行管道。

这里的假设是：

*   Jenkins 服务器是**2.204.2**（托管在**Ubuntu 18.04**上）
*   存储库托管在**BitBucket**中。

首先要做的是提供 Jenkins 凭据以连接（和“获取”）到 BitBucket 中的私有存储库。这可以通过创建一个 SSH 密钥对来“链接”托管 Jenkins 服务器的机器上的 Jenkins (!!) 用户和（私有）BitBucket 存储库。

1.  首先是为 Jenkins 用户（即运行 Jenkins 服务器的用户 - 它很可能在安装时默认创建）创建一个 SSH 密钥：

    ```
    guya@ubuntu_jenkins:~$ sudo su jenkins 
    [sudo] password for guya:
    jenkins@ubuntu_jenkins:/home/guya$ ssh-keygen 
    ```

    输出应类似于以下内容：

> 生成公钥/私钥 rsa 密钥对。输入保存密钥的文件
> （/var/lib/jenkins/.ssh/id_rsa）：创建目录'/var/lib/jenkins/.ssh'。Enter passphrase (empty for no passphrase): Enter the same passphrase again: 您的身份已保存在 /var/lib/jenkins/.ssh/id_rsa 中。您的公钥已保存在 /var/lib/jenkins/.ssh/id_rsa.pub 中。密钥指纹为：SHA256:q6PfEthg+74QFwO+esLbOtKbwLG1dhtMLfxIVSN8fQY jenkins@ubuntu_jenkins 密钥的随机艺术图像为：+---[RSA 2048]----+ | . .. OE | | . . .o... o | | . o..o | | +.oo | | . ooX..S | |..+.Bo* . | |.++oo* o. | |..+*..*o | | .=+o==+。| +----[SHA256]-----+ jenkins@ubuntu_jenkins:/home/guya$

2.  现在需要在 BitBucket 存储库中设置这个 SSH 密钥的内容，如下所示：

*   在 BitBucket 存储库中创建（添加）一个 SSH 密钥，方法是：`Settings --> Access keys --> Add key`。
*   授予密钥读取权限并将 PUBLIC 密钥的内容复制到密钥的“正文”。可以通过运行显示密钥的内容：`cat /var/lib/jenkins/.ssh/id_rsa.pub`

3.  在 BitBucket 存储库中设置 SSH 密钥之后，我们需要“告诉”Jenkins 在尝试获取（在本例中为读取）存储库的内容时实际使用它。请注意，通过让 Jenkins 知道，实际上意味着让用户拥有`jenkins`这个“特权”。

这可以通过将带有私钥的新 SSH 用户名添加到`Jenkins --> Credentials --> System --> Global Credentials --> Add credentials`.

*   在 ID 部分中，将任何描述性名称放入键中。
*   在用户名部分输入 Jenkins 服务器的用户名，即`jenkins`.
*   勾选 Private key 部分并粘贴之前通过复制粘贴以下内容生成的 PRIVATE key 的内容：`~/.ssh/id_rsa`。`-----BEGIN RSA PRIVATE KEY-----`这是以 string: 开头并以 string:结尾的私钥`-----END RSA PRIVATE KEY-----`。请注意，应将整个“块”复制粘贴到上述部分中。

4.  安装可以在其[官方页面中找到的 Git Parameter 插件](https://plugins.jenkins.io/git-parameter/)

5.  列出（动态）给定存储库的所有分支所需的最小管道如下：

    ```
    pipeline 
    { 
        agent any parameters
        { 
            gitParameter branchFilter: 'origin/(.*)', defaultValue: 'master', name: 'BRANCH', type: 'PT_BRANCH' 
        }
        stages 
        { 
           stage("list all branches") 
           { 
               steps 
               { 
                    git branch: "${params.BRANCH}", credentialsId: "SSH_user_name_with_private_key", url: "ssh://git@myCompanyBitBucketSite.com:port/myRepository.git" 
               } 
          } 
       } 
    } 
    ```

笔记：

*   `defaultValue`设置为以便如果`master`不存在分支 - 它将显示在管道的“下拉列表”中。
*   具有先前配置的凭据的`credentialsId`名称。
*   在这种情况下，我在 url 参数中使用了存储库的 SSH URL。
*   此答案假定（并已配置）git 服务器是 BitBucket。我假设在初始步骤中完成的所有“管理”设置在 GitHub 中都有其等效设置。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-05T08:00:02.620

你可以试试这个，这个列表在下拉列表中输入了 Git Repo 的动态分支名称。

需要 Jenkins 插件：

1.  [验证字符串参数](https://plugins.jenkins.io/validating-string-parameter/)
2.  [主动选择](https://plugins.jenkins.io/uno-choice/)

**选项 1：詹金斯文件：**

```
 properties([
        [$class: 'JobRestrictionProperty'], parameters([validatingString(defaultValue: 'https://github.com/kubernetes/kubernetes.git', description: 'Input Git Repo (https) Url', failedValidationMessage: 'Invalid Git Url. Retry again', name: 'GIT_REPO', regex: 'https://.*'), [$class: 'CascadeChoiceParameter', choiceType: 'PT_SINGLE_SELECT', description: 'Select Git Branch Name', filterLength: 1, filterable: false, name: 'BRANCH_NAME', randomName: 'choice-parameter-8292706885056518', referencedParameters: 'GIT_REPO', script: [$class: 'GroovyScript', fallbackScript: [classpath: [], sandbox: false, script: 'return[\'Error - Unable to retrive Branch name\']'], script: [classpath: [], sandbox: false, script: ''
                            'def GIT_REPO_SRC = GIT_REPO.tokenize(\'/\')
                            GIT_REPO_FULL = GIT_REPO_SRC[-2] + \'/\' + GIT_REPO_SRC[-1]
                            def GET_LIST = ("git ls-remote --heads git@github.com:${GIT_REPO_FULL}").execute()
                            GET_LIST.waitFor()
                            BRANCH_LIST = GET_LIST.in.text.readLines().collect {
                                it.split()[1].replaceAll("refs/heads/", "").replaceAll("refs/tags/", "").replaceAll("\\\\^\\\\{\\\\}", "")
                            }
                            return BRANCH_LIST ''
                            ']]]]), throttleJobProperty(categories: [], limitOneJobWithMatchingParams: false, maxConcurrentPerNode: 0, maxConcurrentTotal: 0, paramsToUseForLimit: '
                            ', throttleEnabled: false, throttleOption: '
                            project '), [$class: '
                            JobLocalConfiguration ', changeReasonComment: '
                            ']])
    try {
        node('master') {
            stage('Print Variables') {
                echo "Branch Name: ${BRANCH_NAME}"
            }
    }
    catch (e) {
        currentBuild.result = "FAILURE"
        print e.getMessage();
        print e.getStackTrace();
    } 
```

**选项 2：詹金斯用户界面**

[![在此处输入图像描述](../Images/a64034298111a519afef95bfaeddefda.png)](https://i.stack.imgur.com/fY7Ta.png)

[![在此处输入图像描述](../Images/213871af633ce5bc003f5261c0932bac.png)](https://i.stack.imgur.com/cg74U.png)

**样本输出：**

[![在此处输入图像描述](../Images/21558c34d7e94b90561f32bec686a9c5.png)](https://i.stack.imgur.com/3rw8Q.png)

# powershell - 如何修改 cspkg 中定义的 csdef

> ID：10433107
> 
> 赞同：4
> 
> 时间：2012-05-03T14:07:25.797
> 
> 标签：powershell, msbuild, azure

为了部署到不同的天蓝色环境，我在编译步骤中修改了 csdef 以更改主机头。这样做需要为每个环境构建一次 cspkg，而不是能够重用 cspkg 并为部署指定不同的配置。

我想在创建 cspkg 后修改它的 csdef 文件，而不需要重新编译。这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T22:30:31.607

我已经做了类似于您所追求的东西来区分测试和实时环境。首先，您需要创建一个新的 .csdef 文件，用于替代设置。这需要是完整的文件，因为我们只是将其与原始文件交换。现在我们需要将它添加到云项目中。右键单击云项目并选择卸载项目。再次右键单击它并选择编辑[项目名称]。有一个部分看起来有点像这样：

```
<ItemGroup>
    <ServiceConfiguration Include="ServiceConfiguration.Test.cscfg" />
    <ServiceDefinition Include="ServiceDefinition.csdef" />
    <ServiceConfiguration Include="ServiceConfiguration.cscfg" />
</ItemGroup> 
```

添加一个指向新创建文件的新 ServiceDefinition 项。现在找到以下行：

```
<Import Project="$(CloudExtensionsDir)Microsoft.WindowsAzure.targets" /> 
```

然后添加此代码块，将 TargetProfile 检查编辑为您要用于替代的构建配置，并确保它指向您的新 .csdef 文件

```
<Target Name="AfterResolveServiceModel">
    <!-- This should be run after it has figured out which definition file to use
        but before it's done anything with it.  This is all a bit hard coded, but
        basically it should remove everything from the SourceServiceDefinition
        item and replace it with the one we want if this is a build for test-->
    <ItemGroup>
      <!-- This is an interesting way of saying remove everything that is in me from me-->
      <SourceServiceDefinition Remove="@(SourceServiceDefinition)" />
      <TargetServiceDefinition Remove="@(TargetServiceDefinition)" />
    </ItemGroup>
    <ItemGroup Condition="'$(TargetProfile)' == 'Test'">
      <SourceServiceDefinition Include="ServiceDefinition.Test.csdef" />
    </ItemGroup>
    <ItemGroup Condition="'$(TargetProfile)' != 'Test'">
      <SourceServiceDefinition Include="ServiceDefinition.csdef" />
    </ItemGroup>
    <ItemGroup>
      <TargetServiceDefinition Include="@(SourceServiceDefinition->'%(RecursiveDirectory)%(Filename).build%(Extension)')" />
    </ItemGroup>
    <Message Text="Source Service Definition Changed To Be: @(SourceServiceDefinition)" />
  </Target> 
```

要恢复正常，请右键单击项目并选择重新加载项目。现在，当您构建项目时，根据您使用的配置，它将使用不同的 .csdef 文件。值得注意的是，其中的设置编辑器不知道您的第二个 .csdef 文件，因此如果您通过 GUI 添加任何新设置，则需要手动将它们添加到此备用版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:41:02.650

如果您只想拥有不同的 CSDEF，那么您可以直接使用 CSPACK 命令提示符轻松完成，如下所示：

1.  打开命令窗口并找到与 Windows Azure 项目相关的 CSDEF/CSCFG 和 CSX 文件夹所在的文件夹
2.  根据您的微小更改创建多个 CSDEF
3.  确保在启动 CS* 命令的路径中有 Windows Azure SDK
4.  使用 CSPACK 命令并传递参数以使用不同的 CSDEF 和输出 CSPKG 文件，如下所示：

`cspack <ProjectName>\ServiceDefinitionOne.csdef /out:ProjectNameSame.csx /out:ProjectOne.cspkg /_AddMoreParams`

`cspack <ProjectName>\ServiceDefinitionTwo.csdef /out:ProjectNameSame.csx /out:ProjectTwo.cspkg /_AddMoreParams`

有关 CSPACK 的更多信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:21:20.343

据我所知，.cspkg 创建后不能轻易修改。我想你可能在技术上*可以*，因为 .cspkg 是一个遵循特定结构的 zip 文件。

我要问的问题是为什么？如果要修改 VM 角色大小等设置（因为它是在 .csdef 文件中定义的），那么我认为您有几种替代方法：

*   为每个变体创建一个单独的 Windows Azure 部署项目 (.csproj)。是的，我意识到这可能很痛苦，但它确实让 Visual Studio 工具运行良好。拥有更易于使用的工具支持可能是值得的。
*   在构建过程中运行配置文件转换。类似于 web.config 转换。

就个人而言，我采用不同的 .csproj 方法。主要是因为我不是配置文件转换忍者。. . 然而。;) 这是阻力最小的路径，到目前为止效果很好。

# visual-studio-2010 - 如何配置 Visual Stuidio 2010“测试结果”窗口以在测试运行后自动展开“分组依据”部分？

> ID：10433110
> 
> 赞同：3
> 
> 时间：2012-05-03T14:07:34.630
> 
> 标签：visual-studio-2010, tdd, mstest

我目前正在从事一个大型 C#.NET 4.0 项目，并且正在使用 TDD 方法。

在我们的单元测试中，我们采用了基于 Roy Overshore 的“[单元测试的艺术](http://www.amazon.co.uk/The-Art-Unit-Testing-Examples/dp/1933988274)”一书中的命名模式。本质上，对于每个类“XXX”，我们都有一个对应的“XXXFacts”测试类，并且该类中的每个 [TestMethod] 方法都以“[Method/Prop name] *[sate/result]* [preconditions]”的模式命名，例如“ AccessLevel_IsInvalid_WhenNotAuthenticated"

现在最初为了查看测试结果，我刚刚配置了测试结果窗口以添加看起来不错的 ClassName 列，但如您所见，它占用了很多水平屏幕空间； ![在此处输入图像描述](../Images/ef3585e9d9ba4061640f34db6f3e47cc.png)

然后我在窗口中发现了“分组依据”选项。顾名思义，它按类名对输出进行分组，因此我可以删除重复的列并为任何错误消息文本获得更多空间。

但是，每次我运行测试时，我得到的视图都会按内容分组，就像这样折叠；

![在此处输入图像描述](../Images/79c6d1af9a8d54b21e62aca1e3084273.png)

我想做的是以某种方式配置 Visual Stuidio 2010 测试结果窗口以在测试运行后自动展开“分组依据”部分，因此在测试运行后它看起来像这样；

![在此处输入图像描述](../Images/17fdf3e12568cdc7053ac87ee5e0443d.png)

至少如果它可以扩展一个包含失败测试的组，那将是一个巨大的优势。

我知道这只是懒惰，但在每次运行 TDD 项目后打开所有这些组已经过时了！

我在工具对话框中查看但未能找到此配置选项，但也许我一直在寻找错误的地方。我希望如此。

# c# - 从 C# 类创建 SQL Server 数据库表

> ID：10433115
> 
> 赞同：4
> 
> 时间：2012-05-03T14:07:45.437
> 
> 标签：c#, sql-server, class, ssis, xsd

是否可以自动将大量 C# 类转换为 SQL Server 数据库表？

我需要将一些 xml 文件导入 SQL Server，但使用 SSIS，一旦我选择 xsd 文件，运行时就会停止工作。但是我很容易将 xsd 转换为类文件，所以这就是为什么我问是否有可能有一个解决方法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:10:55.060

您可以使用 Entity Framework Code First 功能，通过一些额外的工作来完成数据库中的表。

ScottGu有一篇[很好的帖子](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:10:53.107

是的，可以自动执行此操作。Entity Framework 有一个名为 Code First 的模型，它本质上是这样做的：获取您的 C# 类并自动为您创建数据库和表。

看看Scott Guthrie[的这篇](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:50:27.597

您可能测试的其他选项是 DataSet.ReadXml() 函数。缺点是数据集不能处理 complexType="mixed"，但它可以很好地处理大文件（我的文件每个大约有 50M）。所有表和列都由 XML 标记命名，关系由 DataSet 本身自动生成。

# java - 包括指令行为奇怪

> ID：10433116
> 
> 赞同：1
> 
> 时间：2012-05-03T14:07:46.477
> 
> 标签：java, jsp

我有 5 个 JSP 页面，我们只需将它们称为 page1.jsp、page2.jsp 等。第五个称为 init.jsp ..

在 init jsp 我有这个代码：

```
<%
    String currentPage = "page1" //Default value
%> 
```

在所有其他页面中，我都包含了这段代码：

```
<%@ include file="init.jsp" %>

<%
    currentPage = "page2" //re-sets value to whatever respective page you're on
%> 
```

然后我编译代码并将其部署到服务器......然后我得到这个错误：

> PWC6197：jsp 文件中的第 12 行发生错误：/init.jsp PWC6199：生成的 servlet 错误：string:///index_jsp.java:101：currentActiveTab 已在 _jspService(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)

所以我想知道的是......为什么？为什么我会收到此错误，如果在所有其他页面中我没有再次声明变量，我只是引用它并更改值....？

PS - 错误消息中的“currentActiveTab”在我的示例中等于“currentPage”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:03:15.763

除非您在包含“init.jsp”的主页中声明 currentActiveTab

我的意思是，除非您按以下方式声明它两次

`<%@ include file="init.jsp" %>`

 ````
 <% String currentPage = "page2"  %> 
````  `**代替**

`<%@ include file="init.jsp" %>`

 ````
 <% currentPage = "page2" %> 
````  `你应该没事。``

# c# - jquery 在发布到 localhost 后无法在 asp.net mvc 中工作

> ID：10433117
> 
> 赞同：1
> 
> 时间：2012-05-03T14:07:48.727
> 
> 标签：c#, javascript, jquery

我已经构建了一个包含一些 jquery 代码的 mvc 应用程序。当我从我的 ide 运行应用程序时，一切正常。当我发布到服务器并打开页面时，jquery 不起作用。我得到对象预期的错误。

我在页面中没有得到任何东西，它在加载 dhtmlxsheduler.js 时显示错误你能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:11:31.427

您的问题很可能是由于您定义正在加载的 JavaScript 文件的路径的方式。

确保在调用文件源时使用**相对路径**，而不是绝对路径。

如果您有 runat="server" 您还可以使用 ~ 运算符，ASP.Net 将其转换为您的主目录。

在此处阅读更多信息[http://msdn.microsoft.com/en-us/library/ms178116.aspx](http://msdn.microsoft.com/en-us/library/ms178116.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:13:25.370

您指向 .js 文件的链接已损坏。在浏览器中查看页面的源代码，并检查标签的 src 属性。它一定是指向错误的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:14:03.093

我的猜测是删除`../`你有 iis express 吗？还是开发服务器？还是iis？

或者使用来自 Google 的 CDN：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# java - jcifs.smb.SmbException：访问被拒绝。smb 目录的例外

> ID：10433119
> 
> 赞同：1
> 
> 时间：2012-05-03T14:07:54.753
> 
> 标签：java, android, samba, cifs, jcifs

在下面的代码语句中：

```
SmbFileInputStream din==new SmbFileInputStream(src); 
```

我正在尝试创建一个 SmbFileInputStream 对象。如果 SmbFile 'src' 是一个文件，这将正常工作，但如果 'src' 是一个 smb 目录，那么它会抛出异常：

```
jcifs.smb.SmbException: Access is Denied.
at jcifs.smb.SmbTransport.checkStatus(SmbTransport.java:622)
at jcifs.smb.SmbTransport.send(SmbTransport.java:722)
at jcifs.smb.SmbSession.send(SmbSession.java:262)
at jcifs.smb.SmbTree.send(SmbTree.java:119)
at jcifs.smb.SmbFile.send(SmbFile.java:785)
at jcifs.smb.SmbFile.open0(SmbFile.java:1009)
at jcifs.smb.SmbFile.open(SmbFile.java:1026)
at jcifs.smb.SmbFileInputStream.<init>(SmbFileInputStream.java:73)
at jcifs.smb.SmbFileInputStream.<init>(SmbFileInputStream.java:65)
at testhelp.main(testhelp.java:25) 
```

这段代码有什么问题？或者我哪里错了？

嗨，请检查此代码：

```
case DOWNLOAD2:

/*This code snippet is used to download a file/folder from smb nETWORK to android sd card.
when I run this code its throwing some exception. It have commented where ever necessary. rest of the code is self
explanatory. So please go through the code and please tell why this exception is thrown.
IF POSSIBLE PLEASE ADD A PROGRESS BAR WHICH SHOULD HELP USER SAYING SOME WORK IS GOING ON.
I have tried including a progress bar, but its not working. I ve read some materials related to this,
but every thing makes use threads. I am not that good at threads. So is it possible to include a progess bar,
without using threads?If possible please help me to do it.
And this code is working file for smb files, I dont know why its throwing exception in case of directories.
Please see why this is throwing exception..
So please see that the modified code contains:
a)no exceptions
b)a progress bar(more specifically a horizontal bar)*/

/*exception thrown:
jcifs.smb.SmbException: Access is Denied.
at jcifs.smb.SmbTransport.checkStatus(SmbTransport.java:622)
at jcifs.smb.SmbTransport.send(SmbTransport.java:722)
at jcifs.smb.SmbSession.send(SmbSession.java:262)
at jcifs.smb.SmbTree.send(SmbTree.java:119)
at jcifs.smb.SmbFile.send(SmbFile.java:785)
at jcifs.smb.SmbFile.open0(SmbFile.java:1009)
at jcifs.smb.SmbFile.open(SmbFile.java:1026)
at jcifs.smb.SmbFileInputStream.<init>(SmbFileInputStream.java:73)
at jcifs.smb.SmbFileInputStream.<init>(SmbFileInputStream.java:65)
at testhelp.main(testhelp.java:25)*/

StatFs statFs = new StatFs(Environment.getExternalStorageDirectory().getAbsolutePath()); 
//if sd card is mounted then only this operation occur:
if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
{
    //object.getCount() gets the number of objects in list view
    for(int i=0;i<object.getCount();i++)
    {
        //for each object in list view, if it is checked:
        if(object.getter(i)==true)
        {
            SmbFileInputStream din=null;
            FileOutputStream dout=null;
            try 
            {
                //I have used a hash table, which maps list view name with smb object
                SmbFile src=map.get(object.getItem(i));
                long blockSize = statFs.getBlockSize();
                long freeSize = statFs.getFreeBlocks()*blockSize;
                long diff=freeSize-src.length();
                boolean can=false;
                if(!(diff<0))
                {
                    can=true;
                }
                if(!src.isHidden() && can)
                {
                    try
                    {
                        if(src.isFile())
                        {
                            din=new SmbFileInputStream(src);
                            dout=new FileOutputStream(Environment.getExternalStorageDirectory()+"/"+src.getName());
                        }
                        else
                        {
                            din=new SmbFileInputStream(src);
                            File outputFile = new File(Environment.getExternalStorageDirectory()+"/"+src.getName()); // ADDED
                            outputFile.mkdirs(); // ADDED
                            dout=new FileOutputStream(outputFile); // CHANGED
                        }
                        int c;
                        while((c=din.read())!=-1)
                        {
                            dout.write(c);
                        }
                    }
                    finally
                    {
                        if (din != null) 
                        {
                            din.close();
                        }
                        if (dout != null) 
                        {
                            dout.close();
                        }
                    }
                }
                else
                {
                    Toast.makeText(this,src.getName()+" cannot be downloaded",Toast.LENGTH_LONG).show();
                }
            } 
            catch(IOException e)
            {
                Toast.makeText(this,"DOWNLOAD FAILED--IO EXCEPTION\n"+e,Toast.LENGTH_LONG).show();
            }
        }
    }
}
else
{
    Toast.makeText(this,"DOWNLOAD FAILED--NO SD CARD FOUND",Toast.LENGTH_LONG).show();
}
return true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:18:41.713

您不能`SmbFileInputStream`为目录创建一个，因为您不能直接读取/写入目录对象。目录没有任何内容，至少不像文件有内容那样。

如果您尝试读取目录的内容，您可能应该`SmbFile`改用（例如，使用该`listFiles()`方法）。该`SmbFileInputStream`对象仅用于从文件中读取信息。

要将文件写入目录，请执行以下操作...

```
File file = new File("/mnt/sdcard/filename.txt");
file.mkdirs(); // this creates all the directories that are missing
FileOutputStream os = new FileOutputStream (file);
// now write the file data
os.write(...); 
```

在您的代码中，更改以下几行...

```
 try
   {
    din=new SmbFileInputStream(src);
    dout=new FileOutputStream(Environment.getExternalStorageDirectory()+"/"+src.getName());
    int c;
    while((c=din.read())!=-1) 
```

对此...

```
 try
   {
    din=new SmbFileInputStream(src);

    File outputFile = new File(Environment.getExternalStorageDirectory()+"/"+src.getName()); // ADDED
    outputFile.mkdirs(); // ADDED

    dout=new FileOutputStream(outputFile); // CHANGED
    int c;
    while((c=din.read())!=-1) 
```

还要更改以下...

```
if(src.isFile()){
    din=new SmbFileInputStream(src);
    //dout=new FileOutputStream(Environment.getExternalStorageDirectory()+"/"+src.getName());// REMOVE THIS LINE
    File outputFile = new File(Environment.getExternalStorageDirectory()+"/"+src.getName()); // ADDED
    outputFile.mkdirs();  // ADDED
    dout=new FileOutputStream(outputFile);  // ADDED
}
else {
    //din=new SmbFileInputStream(src); // REMOVE THIS LINE
    File outputFile = new File(Environment.getExternalStorageDirectory()+"/"+src.getName());
    outputFile.mkdirs(); 
    //dout=new FileOutputStream(outputFile); // REMOVE THIS LINE
} 
```

# spring - 弹簧+石英做一项工作7次

> ID：10433121
> 
> 赞同：0
> 
> 时间：2012-05-03T14:08:14.067
> 
> 标签：spring, glassfish, quartz-scheduler

我正在尝试通过此链接进行石英调度：[QUARTZ+SPRING](http://static.springsource.org/spring/docs/1.2.x/reference/scheduling.html)

但是当我在 glassfish 上运行它时，它会完成 7 次工作。

应用程序上下文.xml

```
<bean id="exampleBusinessObject" class="cz.elit.ediplus.core.dao.ExampleBusinessObject" 
    p:companyService-ref="CompanyService"
    p:invoiceService-ref="InvoiceService" 
    p:orderService-ref="OrderService" 
    p:packingListService-ref="PackingListService" />

<bean id="jobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="exampleBusinessObject"/>
    <property name="targetMethod" value="doIt"/>
    <property name="concurrent" value="false"/>
</bean>
<bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean">
      <property name="jobDetail" ref="jobDetail"/>
    <property name="startDelay" value="10000"/>
    <property name="repeatInterval" value="300000"/>
</bean>
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <ref bean="simpleTrigger"/>
        </list>
    </property>
</bean> 
```

以及来自 web.xml 的一些代码

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/log4j.properties</param-value>    
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet>
    <servlet-name>jaxws-servlet</servlet-name>
    <servlet-class>com.sun.xml.ws.transport.http.servlet.WSSpringServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping> 
```

有谁知道错误可能在哪里？我读了一些论坛，但没有任何效果。奇怪的是，当我在 localhost 上运行时，作业只运行一次，但当我将它部署在主服务器上时，作业运行了七次。

# security - 用于 64 位 Windows 的 Thawte 驱动程序签名

> ID：10433122
> 
> 赞同：6
> 
> 时间：2012-05-03T14:08:18.883
> 
> 标签：security, code-signing, code-signing-certificate

如果这个问题是题外话，请推荐另一个 StackExchange 站点在 :-) 上发布此问题

我们公司最近从 Thawte 购买了 G2 代码签名证书。我已经完成了签署 64 位驱动程序所需的所有步骤，因此可以在 Windows 7 64 位下安装它。

即，我有：

*   下载了 G2 Thawte 交叉证书
*   获得了我们自己的 Thawte 证书（实际上是一个 .p12 文件，我必须将其导入并重新导出为 .pfx 文件才能正常工作）
*   通过以下命令成功签署了驱动程序：**signtool.exe sign /ac cross.cer /f private_key.pfx /p ***** /t "http://timestamp.verisign.com/scripts/timstamp.dll" / v my_driver.sys**
*   将我们公司的证书（甚至是第一个不起作用时的所有 Thawte 证书）导入机器的受信任的根授权和受信任的发布者
*   将 thawte 交叉证书导入中间证书颁发机构

我尝试使用已通过的**signtool.exe verify /pa /v my_driver.sys**验证签名。如果我不在命令行中使用 /pa，这将显示“SignTool 错误：已处理证书链，但在信任提供者不信任的根证书中终止。” （这是我应该担心的事情吗？）

现在，当我尝试使用简单的 INF 文件（不是 cab 文件）安装驱动程序时，结果是关于 Windows 无法验证驱动程序的发行者的红色警告。当我选择不安装驱动程序时，我收到以下额外消息：无法验证文件，因为它没有通过 Authenticode(tm) 签名的关联目录。

我读过 Thawte 过去并不能真正用于签署这样的驱动程序，因为不知何故 MS 停止支持它，但它仍在他们的网站上列出交叉证书。不确定这是否仍然有效，找不到任何证据。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:14:50.690

您需要添加`CatalogFile`对 inf 文件的引用，运行[`Inf2Cat.exe`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553618%28v=vs.85%29.aspx)（在 DDK 中）以生成 cat 文件，然后`signtool.exe`也使用它来签名。

# c# - MsMq 安装凭据

> ID：10433128
> 
> 赞同：0
> 
> 时间：2012-05-03T14:08:31.720
> 
> 标签：c#, wcf, msmq

我们有一个问题`MSMQ`。
设计是我们使用用户 X 安装了一些带有 msmq 的服务器。
现在我们使用用户 y 凭据安装一些 Windows 服务。问题是服务无法到达或创建新的私有队列。我们得到以下异常：
`Ensure that MSMQ is installed and running, the queue exists and has proper authorization to be read from. The inner exception may contain additional information. An error occurred while opening the queue:Access is denied. (-1072824283, 0xc00e0025). The message cannot be sent or received from the queue. Ensure that MSMQ is installed and running. Also ensure that the queue is available to open with the required access mode and authorization. at System.ServiceModel.Channels.MsmqQueue.OpenQueue() at System.ServiceModel.Channels.MsmqQueue.GetHandle() at System.ServiceModel.Channels.MsmqQueue.SupportsAccessMode(String formatName, Int32 accessType, MsmqException& msmqException) at System.ServiceModel.Channels.MsmqVerifier.VerifyReceiver(MsmqReceiveParameters receiveParameters, Uri listenUri) at System.ServiceModel.Channels.MsmqTransportBindingElement.BuildChannelListener[TChannel](BindingContext context) at System.ServiceModel.Channels.Binding.BuildChannelListener[TChannel](Uri listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode listenUriMode, BindingParameterCollection parameters) at System.ServiceModel.Description.DispatcherBuilder.MaybeCreateListener(Boolean actuallyCreate, Type[] supportedChannels, Binding binding, BindingParameterCollection parameters, Uri listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode listenUriMode, ServiceThrottle throttle, IChannelListener& result, Boolean supportContextSession) at System.ServiceModel.Description.DispatcherBuilder.BuildChannelListener(StuffPerListenUriInfo stuff, ServiceHostBase serviceHost, Uri listenUri, ListenUriMode listenUriMode, Boolean supportContextSession, IChannelListener& result) at System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription description, ServiceHostBase serviceHost) at System.ServiceModel.ServiceHostBase.InitializeRuntime() at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout) at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)`

我们目前的解决方案是删除 MSMQ 并使用服务的用户凭据安装它。有什么方法可以做到这一点吗？

**更新**

好的，我发现了问题，使用用户 X 凭据的服务创建了一个私有队列.. 服务被删除，然后使用用户 Y 凭据再次安装.. 队列没有被删除。因此，当用户 Y 尝试创建或使用私有队列时，它会出现安全异常。有没有办法使用预定义的凭据创建队列？

# java-me - 在多个类中设置可显示对象 (J2ME)

> ID：10433130
> 
> 赞同：2
> 
> 时间：2012-05-03T14:08:33.140
> 
> 标签：java-me, nullpointerexception, midp, lcdui

我试图通过为我的应用程序
表单选项使用多个类来使我的代码更整洁。目前，我在尝试`setCurrent`.

这是我的主类，当我调用另一个类时，错误在我的命令侦听器中开始。

```
import java.util.*;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.MIDlet;

public class CalFrontEnd extends MIDlet implements CommandListener {

  private Display display;
  private List list = new List("Please Select a Option", List.IMPLICIT);
  private List Blist = new List("Please Select a Browsing Option", List.IMPLICIT);
  private Command select = new Command("Select", Command.SCREEN, 1);
  private Command exit = new Command("Exit", Command.EXIT, 2);
  private Command save = new Command("Save,", Command.SCREEN, 2);
  private DateField calendar;
  Alert alert;

  //
  //
  //
  public CalFrontEnd() {
    display = Display.getDisplay(this);   

    list.append("Select Date", null);
    list.append("Add Events", null);
    list.append("Remove Events", null);
    list.append("Browse Events", null);
    list.addCommand(select);
    list.addCommand(exit);
    list.setCommandListener(this);

  }

  //
  //Start Application Method
  //
  public void startApp() {
    display.setCurrent(list);
  }

  //
  //Pause Application Method
  //
  public void pauseApp() {
  }

  //
  //Destroy Application Method
  //
  public void destroyApp(boolean unconditional) {
  }

  //
  //Method creates form which contains calendar
  //
  /*public void selectDate()
  {
      calendar = new DateField("Date In :", DateField.DATE, TimeZone.getTimeZone("GMT"));
      Form cform = new Form("Calendar");
      cform.append(calendar);
      cform.addCommand(exit);
      display.setCurrent(cform);
  }*/

  //
  //Method creates form which contains adding events
  //
  public void AddEvents()
  {
      TextBox aeText = new TextBox("Add Event","", 256, 0);
      display.setCurrent(aeText);
  }

  //
  //Method creates form which contains removing events
  //
  public void RemoveEvents()
  {

      Form reform = new Form("Remove Event");
      reform.append(calendar);
      display.setCurrent(reform);
  }

  //
  //Method creates form which contains removing events
  //
  public void BrowseEvents()
  {
      Blist.append("Monthly", null);
      Blist.append("Daily", null);
      Blist.addCommand(select);
      Blist.addCommand(exit);
      Blist.setCommandListener(this);
      display.setCurrent(Blist);
  }

  //
  //but it's better practice to make each form a different class extending CommandListener and it's own commandAction. And leave the display public static in MIDlet class
  //...
  public void commandAction(Command command, Displayable displayable) {
      if (displayable == list) {
          if (command == List.SELECT_COMMAND) {
              switch (list.getSelectedIndex()) {
                  case 0: // select date
                      SelectDate.BuildCalendar(); //Error Here
                      break;
                  case 1: //add events
                      AddEvents();
                      break;
              }
          } else if (command == exit) {
             destroyApp(false);
             notifyDestroyed();
          }
      }         
  }
} 
```

这是被调用的类。

```
public class SelectDate
{

    private static DateField calendar;
    private static Form form = new Form("derb");
    private static Command select = new Command("Select", Command.SCREEN, 1);
    private static Command exit = new Command("Exit", Command.EXIT, 2);
    private static Command save = new Command("Save,", Command.SCREEN, 2);
    private static Display display;

    public static void BuildCalendar()
    {
        calendar = new DateField("Date In :", DateField.DATE, TimeZone.getTimeZone("GMT"));
        form.append(calendar);
        form.addCommand(exit);
        display.setCurrent(form);
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:58:02.850

NullPointerException 发生是因为`display`在 SelectDate 类中为空。

要解决这个问题，您可以例如从那里删除它，而是添加到方法参数：

```
// ...
public static void BuildCalendar(Display display) // added parameter 
```

然后，当您从 调用上述方法时`CalFrontEnd`，传递`display`那里的实例：

```
 // ...
                      SelectDate.BuildCalendar(display); //Error will go away 
```

# asp.net-mvc-2 - 在 asp.net mvc 2 中创建和调用自定义控制器操作

> ID：10433133
> 
> 赞同：0
> 
> 时间：2012-05-03T14:08:41.923
> 
> 标签：asp.net-mvc-2

在 asp.net mvc 2 web 应用程序中，我创建了一个控制器，默认操作可以正常工作（索引、显示、创建）。现在我想创建一个自定义控制器操作，它接受一个对象 id 并命名为 Rotate，我创建了一个公共方法，它执行一些逻辑并再次重定向到索引页面。

问题是当我试图打电话时

```
<%: Html.ActionLink("Click on me", "Rotate", new { id = item.Id })%> 
```

有404错误。有什么问题？我应该在某处注册创建的控制器操作以使用它吗？

编辑：

```
public ActionResult Rotate(int id)
            {
                /* does some stuff to the object */
                return RedirectToAction("Index");
            } 
```

网址是这样的：[http://localhost/Home/Rotate/1](http://localhost/Home/Rotate/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:14:09.920

如果您的控制器和操作与您的默认路由（控制器/操作/ID）匹配，那么您不需要做任何其他事情来“注册”您的操作。

*你需要编译项目;-)*

# php - 在 jquery 对话框上单击确定后使用 jquery 对话框输入

> ID：10433138
> 
> 赞同：0
> 
> 时间：2012-05-03T14:08:57.320
> 
> 标签：php, jquery, jquery-ui

我想在 jquery 对话框输入框中使用用户输入，以便在按下 jquery 对话框确定按钮时使用。

现在的问题是 jquery 对话框之后的代码也被执行而无需等待用户填写 jquery 输入字段

```
<p id="text"> click me </p>
<div id="test" class="sandy" > 
    <input id="username" class="sandy1" />
</div>​

$('#text').click(function(){
    $('.sandy').dialog({ 
     buttons: { 
    "OK": function() { 
     $(this).dialog('close'); 
    }}
    });
    var myvalue= $("#test").val();
    alert(myvalue);
}) 
```

[您可以在此链接](http://jsfiddle.net/zCFD5/88/)查看演示：http : [//jsfiddle.net/zCFD5/86/](http://jsfiddle.net/zCFD5/86/)

请建议我一些方法来保持 jquery 对话框，直到用户按下确定按钮，然后继续执行它之后的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:15:52.150

试试这个 JS：

```
$('#text').click(function(){
    $('.sandy').dialog({
        buttons: {
            "OK": function() {
                if($('#username').val() == '') {
                    $('#username').focus();
                } else {
                    var myvalue= $("#username").val();
                    $(this).dialog('close');
                    alert(myvalue);
                }
            }
        }
    });
}); 
```

编辑：我还在 JSFIDDLE 更新了代码，它工作正常 :-) [http://jsfiddle.net/zCFD5/96/](http://jsfiddle.net/zCFD5/96/)

# java - android在出现时获取adMob横幅高度

> ID：10433140
> 
> 赞同：9
> 
> 时间：2012-05-03T14:09:11.280
> 
> 标签：java, android, eclipse, admob

我正在成功地将 adMob 横幅添加到我的应用程序中。当横幅出现时，我需要获取它的高度以调整所有布局元素的大小。我正在使用正确触发的事件 onReceivedAd。但是，alturaBanner = 0。那么，如何得到它的高度呢？谢谢你。

```
 /** Called when an ad is received. */
    @Override
    public void onReceiveAd(Ad ad) 
    {
        adView.setVisibility(View.VISIBLE);

        int alturaBanner = adView.getHeight();

        RelativeLayout.LayoutParams params1 = (android.widget.RelativeLayout.LayoutParams) browse2
        .getLayoutParams();

        params1.setMargins(0, alturaBanner, 0, 0);

      Log.d(LOG_TAG, "onReceiveAd");
      Toast.makeText(this, "onReceiveAd", Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-12-01T06:37:24.653

您甚至可以在将任何类型的横幅添加到布局之前获取其高度。

```
int heightPixels = AdSize.SMART_BANNER.getHeightInPixels(this); 
```

或者

```
int heightPixels = AdSize.FULL_BANNER.getHeightInPixels(myContext); 
```

或 DIP 的

```
int heightDP = AdSize.BANNER.getHeight(); 
```

因此，根据您的需要，您可以这样做：

```
/** Called when an ad is received. */
@Override
public void onReceiveAd(Ad ad) 
{
    adView.setVisibility(View.VISIBLE);

    int alturaBanner = AdSize.BANNER.getHeight(); // This gets the adsize, even if the view is not inflated. 

    RelativeLayout.LayoutParams params1 = (android.widget.RelativeLayout.LayoutParams) browse2
    .getLayoutParams();

    params1.setMargins(0, alturaBanner, 0, 0);

  Log.d(LOG_TAG, "onReceiveAd");
  Toast.makeText(this, "onReceiveAd", Toast.LENGTH_SHORT).show();
} 
```

只需更改`AdSize.BANNER`为`AdSize.SMART_BANNER`您使用的任何横幅类型。

[添加尺寸获取高度](https://developers.google.com/android/reference/com/google/android/gms/ads/AdSize.html#getHeight%28%29)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T14:23:17.863

在准备好之前获取视图的高度将始终返回 0 。使用下一个代码以获得正确的尺寸，无论您拥有哪种设备/屏幕：

```
private static void runJustBeforeBeingDrawn(final View view, final Runnable runnable)
{
    final ViewTreeObserver vto = view.getViewTreeObserver();
    final OnPreDrawListener preDrawListener = new OnPreDrawListener()
    {
        @Override
        public boolean onPreDraw()
        {
            runnable.run();
            final ViewTreeObserver vto = view.getViewTreeObserver();
            vto.removeOnPreDrawListener(this);
            return true;
        }
    };
    vto.addOnPreDrawListener(preDrawListener);
} 
```

在给定的 runnable 中，您可以查询视图的实际大小。

或者，您可以根据需要使用 addOnGlobalLayoutListener 而不是 addOnPreDrawListener。

另一种方法是使用 onWindowFocusChanged（并检查 hasFocus==true），但这并不总是最好的方法（仅用于简单的视图创建，而不用于动态创建）

编辑：替代 runJustBeforeBeingDrawn：[https ://stackoverflow.com/a/28136027/878126](https://stackoverflow.com/a/28136027/878126)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-04T09:48:13.823

我使用以下方法获取 AdView 的高度：

```
adView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        int height = adView.getHeight();
        if (height > 0) {
            // now the height is gotten, you can do things you want
        }
    }
}); 
```

当全局布局状态或视图树中视图的可见性发生变化时，会触发 onGlobalLayout()。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-10T18:36:40.027

实际上，如果您使用智能横幅类型来显示横幅广告，则无需等待 adview 出现即可获得 adMob 横幅高度。

使用智能横幅，因为它会根据设备尺寸自动决定广告的高度。使用全屏显示广告。

来自 android 开发者[网站](https://developers.google.com/admob/android/banner)：

> 智能横幅广告单元可以在任何屏幕尺寸上以任一方向在不同设备上呈现全屏横幅广告。智能横幅通过“智能”检测手机在当前方向上的宽度，并使广告视图具有该尺寸，从而帮助处理不同设备上日益增加的屏幕碎片。
> 
> 提供三种广告高度（以 dp 为单位，与密度无关的像素）：
> 
> 32 - 当设备的屏幕高度小于 400
> 时使用 50 - 当设备的屏幕高度在 400 和 720 之间时使用 90 - 当设备的屏幕高度大于 720 时使用

现在，获取 AdView 的高度并调整您希望放置横幅广告的布局的边距。加载广告后（通过覆盖`onAdLoaded`API），您可以使用以下方法知道高度：

```
public static int getAdViewHeightInDP(Activity activity) {
    int adHeight = 0;

    int screenHeightInDP = getScreenHeightInDP(activity);
    if (screenHeightInDP < 400)
        adHeight = 32;
    else if (screenHeightInDP <= 720)
        adHeight = 50;
    else
        adHeight = 90;

    return adHeight;
}

public static int getScreenHeightInDP(Activity activity) {
    DisplayMetrics displayMetrics = ((Context) activity).getResources().getDisplayMetrics();

    float screenHeightInDP = displayMetrics.heightPixels / displayMetrics.density;

    return Math.round(screenHeightInDP);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T15:29:47.903

当 AdMob 无法接收广告或接收到空广告（高度 = 0）时，我同样需要能够展示自己的广告。

我基于 AdView 扩展 RelativeLayout 的事实使用以下代码：

```
mAdMobView = new AdView(pActivity, AdSize.SMART_BANNER, Constants.ADMOB_AD_UNIT_ID);
mAdMobView.addOnLayoutChangeListener(new OnLayoutChangeListener() {
    @Override
    public void onLayoutChange(final View pV, final int pLeft, final int pTop, final int pRight, final int pBottom, final int pOldLeft, final int pOldTop, final int pOldRight, final int pOldBottom) {
        final float lAdHeight = mAdMobView.getHeight();
        if (lAdHeight == 0) {
            Debug.i(LOG_TAG, "mAdMobView.onLayoutChange(...) mAdMobView.height='" + lAdHeight + "'. AdMob returned an empty ad !");
            // Show custom ads
        } else {
            Debug.d(LOG_TAG, "mAdMobView.onLayoutChange(...) mAdMobView.height='" + lAdHeight + "'");
            // Make AdView visible
        }
    }
});
mAdMobView.setAdListener(new AdListener() {
    @Override public void onReceiveAd(final Ad pAd) {
        Debug.d(LOG_TAG, "onReceiveAd(...) AdMob ad received (mAdMobView.visibility='" + mAdMobView.getVisibility() + "').");
    }
    @Override public void onPresentScreen(final Ad pAd) {
        Debug.d(LOG_TAG, "onPresentScreen(...)");
    }
    @Override public void onLeaveApplication(final Ad pAd) {
        Debug.d(LOG_TAG, "onLeaveApplication(...)");
    }
    @Override public void onDismissScreen(final Ad pAd) {
        Debug.d(LOG_TAG, "onDismissScreen(...)");
    }

    @Override
    public void onFailedToReceiveAd(final Ad pAd, final ErrorCode pErrorCode) {
        Debug.i(LOG_TAG, "onFailedToReceiveAd(...) AdMob ad error (" + pErrorCode + ").");
        // Show custom ads
    }
}); 
```

每次 Admob 收到新广告时，都会执行“onLayoutChange”中的代码。

编辑：我的答案是不正确的，因为这个方法是随 API 11 添加的......我改变了它以使用 onPreDraw() 如上一个答案中所述。

# python - 链式条件的 Python 语法

> ID：10433142
> 
> 赞同：5
> 
> 时间：2012-05-03T14:09:15.013
> 
> 标签：python, conditional-operator

我是 Python 的初学者，目前通过“如何像计算机科学家一样思考”这本书自学，从关于链式条件的书中的练习中，教授的语法是：

```
 def function(x,y)
   if ..:
      print ".."
   elif..:
      print ".."
   else:
      print".." 
```

但是，当我尝试这样做以了解其是否合法时，它起作用了：

```
 def function (x,y)
   if ..:
     print ".."
   if ..:
     print ".." 
```

后者是正确的语法吗？或者它甚至不被认为是链式条件？我想知道，即使这在 Python 中是合法的，它是编写代码的“好方法”吗？

真诚感谢所有善意的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T14:10:40.563

尽管您的第二个示例有效，但它*与*第一​​个示例不同。在第二种情况下，`if`将评估每个条件，无论前一个条件是否为真并执行。在链式`if/elif`示例中，整个事物被视为一个单元，并且只会执行第一个匹配的条件。

### 例如：

```
# An if/elif chain
a = 2
b = 3

if a == 2:
  print "a is 2"
elif b == 3:
  print "b is 3"
else:
  print "whatever"

# prints only
"a is 2"
# even though the b condition is also true. 
```

### 然而

```
# Sequential if statements, not chained
a = 2
b = 3

if a == 2:
  print "a is 2"

if b == 3:
  print "b is 3"

# prints both
"a is 2"
"b is 3" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T14:10:52.013

我不会将第二个变体称为链式条件。这只是一系列（可能不相关的）`if`语句。

主要区别在于第一个变体总是只执行一个`print`语句，而在第二个变体`print`中可以执行多个语句。

# java - doWork() 的“连接”参数是否应该关闭？

> ID：10433145
> 
> 赞同：10
> 
> 时间：2012-05-03T14:09:22.773
> 
> 标签：java, hibernate, jdbc, c3p0

我正在使用带有 Hibernate 的 C3P0 连接池来执行一些 JDBC 操作。但是，使用一段时间后，我收到“关闭连接”（SQL 错误：17008，SQLState：null）错误。

我正在使用[org.hibernate.jdbc.Work](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/jdbc/Work.html)接口来执行我的操作：

```
public class ClassThatDoesWork implements Work {

    @Override
    public void execute(final Connection connection)
            throws SQLException {

        doSomeWork();
        //should connection be closed here?
    }
} 
```

我的问题是：`connection`作为参数传递给`execute()`方法的对象应该在该方法结束时关闭还是 Hibernate 自动处理？

编辑这些是使用的 Hibernate 和 c3p0 参数：

```
hibernate.connection.driver_class=oracle.jdbc.driver.OracleDriver
hibernate.connection.pool_size=10
hibernate.dialect=org.hibernate.dialect.Oracle9iDialect
hibernate.connection.provider_class=org.hibernate.connection.C3P0ConnectionProvider
hibernate.show_sql=false
acquireIncrement=3
acquireRetryDelay=500
acquireRetryAttempts=5
breakAfterAcquireFailure=false
checkoutTimeout=0
connectionTesterClassName=com.mchange.v2.impl.DefaultConnectionTester
debugUnreturnedConnectionStackTraces=false
dataSourceName=irrelevantDB
identityToken=irrelevantDB
idleConnectionTestPeriod=0
initialPoolSize=3
maxConnectionAge=0
maxIdleTime=7200
maxIdleTimeExcessConnections=0
maxPoolSize=20
maxStatements=50
maxStatementsPerConnection=0
minPoolSize=5
numHelperThreads=3
propertyCycle=0
testConnectionOnCheckin=false
testConnectionOnCheckout=true
unreturnedConnectionTimeout=0
hibernate.c3p0.min_size=5
hibernate.c3p0.max_size=20
hibernate.c3p0.timeout=10
hibernate.c3p0.max_statements=50 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T14:25:44.503

数据库连接由 Hibernate 作为方法参数传入，因此不应在方法内部尝试（例如关闭）——这是 Hibernate 的责任。

# sql-server - SQL Server 列名区分大小写

> ID：10433149
> 
> 赞同：7
> 
> 时间：2012-05-03T14:09:28.140
> 
> 标签：sql-server, collation, case-sensitive, case-insensitive, sqlbulkcopy

我使用的数据库有 French_CI_AS 排序规则（CI 应该代表不区分大小写），但无论如何都是区分大小写的。我试图理解为什么。

我断言这一点的原因是具有“给定”案例设置的批量插入失败，但它们通过另一个“给定”案例设置成功。

例如：

*   `INSERT INTO SomeTable([GIVEN],[COLNAME]) VALUES ("value1", "value2")`失败，但是
*   `INSERT INTO SomeTable([Given],[ColName]) VALUES ("value1", "value2")`作品。

**编辑** 刚刚看到这个：

[http://msdn.microsoft.com/en-us/library/ms190920.aspx](http://msdn.microsoft.com/en-us/library/ms190920.aspx)

所以这意味着应该可以在不清空所有数据并重新创建相关表的情况下更改列的排序规则？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-05-20T13:04:11.207

鉴于这条关键信息（即在对问题的评论中，而不是*在*实际问题中）：

> 事实上，我使用 Microsoft .Net 的批量插入方法，所以我真的不知道它发送到数据库服务器的确切查询。

即使在不区分大小写的数据库中，列名被视为区分大小写也是有道理的，因为这就是`SqlBulkCopy`类的工作方式。请参阅[SqlBulkCopy 中的列映射区分大小写](https://blogs.msdn.microsoft.com/yingqin/2015/07/15/column-mappings-in-sqlbulkcopy-are-case-sensitive/)。

**补充说明**

1.  在询问错误时，请始终在问题中包含*实际*且*完整*的错误消息。简单地说有一个错误会导致大量的猜测和疯狂的追逐，进而导致离题的答案。
2.  提出问题时，请不要改变您正在处理的情况。例如，问题状态（强调）：

    > *具有“给定”案例设置的*批量插入失败，但它们通过另一个“给定”案例设置成功。**

     *然而，示例语句是单`INSERT`s。此外，对该问题的评论指出：

    > 事实上，我使用 Microsoft .Net 的批量插入方法，所以我真的不知道它发送到数据库服务器的确切查询。

    使用 .NET 与`SqlBulkCopy`使用`BULK INSERT`or完全不同`INSERT`，这会使当前问题具有误导性，从而难以（甚至不可能）正确回答。这条新信息也引发了更多问题，因为在使用 时`SqlBulkCopy`，您无需编写任何`INSERT`语句：您只需编写一条`SELECT`语句并指定目标表的名称。如果您完全为目标表指定列名，则它位于可选列映射中。这就是问题所在吗？* 
**   关于问题的“编辑”部分：

    不，即使您没有使用`SqlBulkCopy`. 列的排序规则决定了*存储在列中的数据的*行为方式，而不是列名（即表的元数据）的行为方式。数据库本身的排序规则决定了数据库级对象元数据的行为方式。在这种情况下，您声称数据库正在使用不区分大小写的排序规则（正确，`_CI_`排序规则名称的一部分确实意味着“**不****区分**大小写”）。

    ***   关于 Jonathan Leffler 就该问题所作的以下陈述：

    > 这进入了分隔标识符（通常区分大小写）和排序规则（这个不区分大小写）之间交互的一个非常微妙的领域。

    不，分隔标识符通常不区分大小写。分隔标识符的敏感性（大小写、重音、假名类型、宽度和在 SQL Server 2017 变体选择器中的开头）与同一级别的非分隔标识符相同。“同一级别”是指实例级别的名称（数据库、登录名等）由实例级别的排序规则控制，而数据库级别的名称（架构、对象--表、视图、函数、存储过程等--、用户等）由数据库级排序规则控制。并且这两个级别可以有不同的排序规则。

    > 您需要研究数据库中的 SQL 列名在分隔时是否区分大小写。它还可能取决于 CREATE TABLE 语句的编写方式（名称是否在其中分隔？）。通常，SQL 对列名和表名不区分大小写；你可以写`INSERT INTO SoMeTaBlE(GiVeN, cOlNaMe) VALUES("v1", "v2")`，如果名字从来没有分隔，那就没问题了。

    在创建表时列名是否被分隔并不重要，至少在如何处理它们的分辨率方面无关紧要。列名是数据库级元数据，由数据库的默认排序规则控制。每个数据库中的所有数据库级元数据都是相同的。您不能让某些列名区分大小写而其他列名不区分大小写。

    此外，表名和列名也没有什么特别之处。它们是数据库级别的元数据，就像用户名、模式名称、索引名称等一样。所有这些元数据都由数据库的默认排序规则控制。

    元数据（实例级别和数据库级别）仅“通常”不区分大小写，因为安装期间建议的默认排序规则是不区分大小写的排序规则。

    > 'delimited identifier' 是列名、表名或用双引号括起来的类似内容，例如 CREATE TABLE "table"(...)

    更准确地说，定界标识符是包含在所讨论的 DBMS 定义为其定界符的任何字符中的标识符。哪些特定字符用于分隔符在不同的 DBMS 之间有所不同。

    > 在 SQL Server 中，分隔标识符用方括号括起来：[GIVEN]

    虽然方括号始终用作标识符的分隔符，但如果您将会话级属性`QUOTED_IDENTIFIER`设置为`ON`（最好始终这样做），则可以使用双引号作为分隔符。

    > SQL 有一些晦涩难懂的部分（分隔标识符处理就是其中之一）

    好吧，分隔标识符实际上非常简单。定界标识符的全部意义在于有效地忽略常规（即非定界）标识符的规则。但是，就常规标识符而言，是的，这些规则相当神秘（主要是由于官方文档不完整且不正确）。因此，为了揭开 SQL Server 中标识符实际工作原理的神秘面纱，我进行了大量研究并在此处发布了结果（其中包括研究本身的链接）：

    [完整的 T-SQL 标识符规则列表](https://sqlquantumleap.com/reference/completely-complete-list-of-rules-for-t-sql-identifiers)*** 

 ***有关排序规则 / 编码 / Unicode / ASCII 的更多信息，尤其是与 Microsoft SQL Server 相关的信息，请访问：

[校对信息](https://Collations.Info/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-20T09:36:22.797

列名区分大小写的事实意味着 MASTER 数据库是使用区分大小写的排序规则创建的。

如果我只是让我对此进行调查，有人进入

Latin1_C **S** _A **I** 而不是 Latin1_C **I** _A **S**

设置 SQL 服务器时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:25:27.410

检查表定义中列的排序规则，以及 tempdb 数据库的排序规则（即服务器排序规则）。它们可能与您的数据库排序规则不同。***

# javascript - 将 datepicker() 放在动态创建的元素上 - JQuery/JQueryUI

> ID：10433154
> 
> 赞同：123
> 
> 时间：2012-05-03T14:09:45.340
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我已经动态创建了文本框，我希望它们中的每一个都能够在点击时显示一个日历。我正在使用的代码是：

```
$(".datepicker_recurring_start" ).datepicker(); 
```

这只适用于第一个文本框，即使我所有的文本框都有一个名为 datepicker_recurring_start 的类。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2012-05-03T14:18:26.103

这是诀窍：

```
$('body').on('focus',".datepicker_recurring_start", function(){
    $(this).datepicker();
});​ 
```

[演示](http://jsfiddle.net/SJ7bJ/98/)

`$('...selector..').on('..event..', '...another-selector...', ...callback...);`语法意味着：为事件（在我们的示例中为'focus' ）
添加一个监听器`...selector..`（在我们的示例中）。对于匹配选择器（在我们的示例中）的匹配节点的所有后代，应用事件处理程序（在我们的示例中为内联函数）`body``..event..``...another-selector...``.datepicker_recurring_start``...callback...`

请参阅[http://api.jquery.com/on/](http://api.jquery.com/on/)，尤其是有关“委托事件”的部分

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-02-12T09:37:12.073

对我来说，下面的 jquery 工作：

将“正文”更改为文档

```
$(document).on('focus',".datepicker_recurring_start", function(){
    $(this).datepicker();
}); 
```

感谢[斯卡凡德里](https://stackoverflow.com/users/1308134/skafandri)

注意：确保每个字段的 id 都不同

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-12-17T12:16:06.853

skafandri +1的出色回答

这只是更新以检查 hasDatepicker 类。

```
$('body').on('focus',".datepicker", function(){

    if( $(this).hasClass('hasDatepicker') === false )  {
        $(this).datepicker();
    }

}); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-01-25T16:12:37.263

确保您的类元素`.date-picker`还没有`hasDatepicker`类。如果是这样，即使尝试重新初始化`$myDatepicker.datepicker();`也会失败！相反，你需要做...

```
$myDatepicker.removeClass('hasDatepicker').datepicker(); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-03T14:12:48.100

您需要`.datepicker();`在动态创建其他文本框元素后再次运行。

我建议在将元素添加到 DOM 的调用的回调方法中这样做。

因此，假设您使用 JQuery Load 方法从源中提取元素并将它们加载到 DOM 中，您将执行以下操作：

```
$('#id_of_div_youre_dynamically_adding_to').load('ajax/get_textbox', function() {
  $(".datepicker_recurring_start" ).datepicker();
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-04T16:22:10.473

动态元素的新方法是[MutationsObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver) .. 以下示例使用[underscore.js](http://underscorejs.org/)来使用 (_.each) 函数。

```
MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;    

var observerjQueryPlugins = new MutationObserver(function (repeaterWrapper) {

    _.each(repeaterWrapper, function (repeaterItem, index) {

        var jq_nodes = $(repeaterItem.addedNodes);

        jq_nodes.each(function () {

            // Date Picker
            $(this).parents('.current-repeateritem-container').find('.element-datepicker').datepicker({
                dateFormat: "dd MM, yy",
                showAnim: "slideDown",
                changeMonth: true,
                numberOfMonths: 1
            });

        });

    });

});

observerjQueryPlugins.observe(document, {
    childList: true,
    subtree: true,
    attributes: false,
    characterData: false
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-02T20:17:20.440

这对我有用（使用 jquery datepicker）：

```
$('body').on('focus', '.datepicker', function() {
 $(this).removeClass('hasDatepicker').datepicker();
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-22T17:09:57.643

其他解决方案都不适合我。在我的应用程序中，我使用 jquery 将日期范围元素添加到文档中，然后将 datepicker 应用于它们。因此，由于某种原因，没有一个事件解决方案起作用。

这就是最终奏效的方法：

```
$(document).on('changeDate',"#elementid", function(){
    alert('event fired');
}); 
```

希望这对某人有所帮助，因为这让我有点退缩。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-23T12:54:26.927

您可以在 javascript 函数中添加类 .datepicker，以便能够动态更改输入类型

```
 $("#ddlDefault").addClass("datepicker");
 $(".datepicker").datetimepicker({ timepicker: false, format: 'd/m/Y', }); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-31T19:31:00.400

`datepicker`我已经修改了@skafandri 答案，以避免将构造函数重新应用于所有带`.datepicker_recurring_start`类的输入。

这是HTML：

```
<div id="content"></div>
<button id="cmd">add a datepicker</button> 
```

这是JS：

```
$('#cmd').click(function() {
  var new_datepicker = $('<input type="text">').datepicker();
  $('#content').append('<br>a datepicker ').append(new_datepicker);
}); 
```

这是一个[工作演示](http://jsfiddle.net/cjdp/5Lpxnrh9/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-11T21:31:37.337

这在 JQuery 1.3 上对我有用，并在第一次单击/聚焦时显示

```
function vincularDatePickers() {
    $('.mostrar_calendario').live('click', function () {
        $(this).datepicker({ showButtonPanel: true, changeMonth: true, changeYear: true, showOn: 'focus' }).focus();
    });
} 
```

这需要您的输入具有“mostrar_calendario”类

Live 适用于 JQuery 1.3+，您需要将其调整为“on”

在此处查看更多关于差异的信息[http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-11T07:57:50.860

```
$( ".datepicker_recurring_start" ).each(function(){
    $(this).datepicker({
        dateFormat:"dd/mm/yy",
        yearRange: '2000:2012',
        changeYear: true,
        changeMonth: true
    });
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-22T10:08:55.223

```
 $('body').on('focus',".my_date_picker", function(){
            $(this).datepicker({
                minDate: new Date(),
            });
        }); 
```

# javascript - 在第一次调用rails应用程序后不会显示的jquery滑块

> ID：10433155
> 
> 赞同：0
> 
> 时间：2012-05-03T14:09:49.880
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, slider

我有一个 Rails 应用程序，可以为您提供人员列表。

1.  当您单击一个名称时，它会向您显示一个由带有 jquery 滑块的 ajax 调用带来的 div，您可以对其进行调整。

2.  然后，您可以关闭该 div。

3.  如果您再次打开它（对于同一用户），ajax 调用会返回以使用滑块检索 div

4.  除了滑块，一切都在那里。为什么？

代码：在index.html里面，调用了一个div

```
<div id='relationships'>
  <%= render @relationships %>
</div> 
```

div 有一个部分。这是部分 _relationship.html.erb

```
<%= div_for relationship do %>
  <%= link_to image_tag('images/orange_man.jpg'), show_path(:id => relationship.id), :remote => true %>
<% end %> 
```

当您单击图像“橙色人”时，js 请求将执行，直到显示操作：

```
def show
  @relationship = Relationship.find(params[:id])
  respond_to do |format|
    format.html
    format.js
  end
end 
```

然后因为它是一个 js 调用，所以调用了 show.js.erb

```
$("#relationship_<%= @relationship.id %>").append("<%= escape_javascript(render 'knows_me')%>"); 
```

它调用了 know_me 部分。_knows_me.html.erb

```
<div id ="relationship_knows_me_#{@relationship.id}">

  <a class="close">X</a> 
  *****this is where you click to hide the div*****

  <% div_slider_id = "slider_knows_me_#{@relationship.id}" %>

  <%= form_tag('/relationships/update/', :remote => true) do %>

    <%= hidden_field_tag 'relationship_id', value = @relationship.id %>

    <div id="<%= div_slider_id %>" class="sliders"></div>

  <% end %>

</div>

<script type='text/javascript'>

$('a.close').on("click", function() {
    $(this).parent().slideUp();
  });

$(document).ready( function() {
  $(function() {
    $( "#<%= div_slider_id %>" ).slider({
      orientation: "horizontal",
      range: "min",
      value: <%= @knows_me %>,
      min: 0,
      max: 100,
      stop: function( event, ui ) {
        $( "#<%= amount_id %>" ).val( ui.value );
        $(this).submit();
      }
    });
 });
});
</script> 
```

为什么幻灯片只第一次出现？为什么在我滑动 div 并再次请求后它不会显示？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:38:09.430

而不是使用 div id 使用 div 类。我遇到了同样的问题，但在使用 div 类后解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:26:05.480

事实证明，超级工程师是对的。div 的 id 已经存在，所以自从我把它藏起来后，它就不会再出现了。我只是在收到回电并解决问题时更改了 div 的 ID。

# java - 微型 Java Web 服务器和 JMX

> ID：10433157
> 
> 赞同：1
> 
> 时间：2012-05-03T14:09:59.660
> 
> 标签：java, jmx, java-server, tjws

我在理解如何将 JMX 代理链接到我的 TJWS（Tiny java Web 服务器）时遇到了一些麻烦

> Web 服务器配备了动态 MBean，这些 MBean 在运行时公开其管理接口（属性和操作）。我们将一组组件标识为 TJWS 的一部分，并为每个组件创建了一个相应的 MBean。ThreadPool 或 HTTP Session 就是这类组件。创建时，相应的 MBean 通过它们的构造函数接收对这些组件的引用。创建时，相应的 MBean 通过它们的构造函数接收对这些组件的引用。对于每个组件，我们选择了一组重要的属性进行监控

那么这是否意味着我必须修改服务器代码以便它在组件创建事件上创建 MBean？还是有别的意思？:)

如果有人能指出我正确的方向，我会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:59:14.747

我看了你发给我的链接。我只能阅读它的前 3 页（无需付费）。然而，[TJWS](http://tjws.sourceforge.net/)的文档没有提到任何关于 JMX 或 MBeans 的内容，所以我认为这篇论文的作者一定是自己实现了 JMX 钩子。

话虽如此，概述的三个模型中的每一个都引用了“托管应用程序”，这意味着应用程序本身应该提供“挂钩”来公开管理接口。（以下主要是我的猜测工作，因为论文的可访问部分在描述开始时就结束了......）

**守护程序模型** MBeanServer 及其 MBean 对托管应用程序是远程的，因此应用程序需要提供一种远程调用公开的管理功能的方法。这可能是 RMI、REST、WebServices 等。

**组件模型** 与守护程序模型相同，但暴露的函数可以在本地调用，不需要远程处理。

**驱动模型** 与组件模型相同。

老实说，除非这是一个学术练习，否则我会坚持使用简化的组件模型，其中现有的 TJWS 组件被检测并实现 MBean 接口。例如，您的 ThreadPools 将实现 MBean 接口并提供 JMX 属性，例如**MaxThreadCount**和**ActiveThreadCount**。然后这些 MBean 应该在本地 VM 的平台 MBeanServer 中注册。（假设 Java 1.5+）

MBeanServers 的远程处理和联合将得到处理，因为远程处理内置于 JVM（RMI、IIOP、WebServices 和 REST 都可用），并且可以使用[OpenDMK](https://stackoverflow.com/questions/9710003/is-it-possible-with-jmx-to-register-or-show-the-mbeans-form-different-vms-in-one)实现联合。

# facebook - 如何获得通过我的应用发布到 Facebook 社区页面的适当权限？

> ID：10433158
> 
> 赞同：0
> 
> 时间：2012-05-03T14:10:05.853
> 
> 标签：facebook, facebook-graph-api

我有一个应用程序已成功安装到我的几个社区页面（不是人员页面）。其中一个是我很久以前做过的，它具有所有适当的权限，因此应用程序可以通过 php sdk 发布到社区页面墙上。我的其他社区页面需要相同的功能。

到目前为止我发现的链接，例如：

[https://graph.facebook.com/oauth/authorize?client_id=APPID&redirect_uri=REDIRECTURL&scope=publish_stream](https://graph.facebook.com/oauth/authorize?client_id=APPID&redirect_uri=REDIRECTURL&scope=publish_stream)

刚刚给了我错误：

您正在使用 Facebook 作为 CommunityWallName 要访问此页面，您需要从使用 Facebook 作为您的页面切换到使用 Facebook 作为您自己。

并允许我个人接受权限，但不会将其应用于我的任何社区页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:00:20.773

您需要请求`manage_pages`许可。

有关更多详细信息，请参见此处： [https ://developers.facebook.com/docs/authentication/permissions/#page_perms](https://developers.facebook.com/docs/authentication/permissions/#page_perms)

# javascript - jquery/javascript-根据周数和年数计算本周的天数

> ID：10433164
> 
> 赞同：0
> 
> 时间：2012-05-03T14:10:43.167
> 
> 标签：javascript, jquery

我正在寻找一种简单的方法来计算使用 jquery/javascript 给定周数和年份数时的日历天数。

示例：2012 年第 18 周将生成从星期日开始的列表

```
2012-04-29 
2012-04-30 
2012-05-01 
2012-05-02 
2012-05-03 
2012-05-04 
2012-05-05 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:46:45.227

如果您从[这个问题](https://stackoverflow.com/questions/4555324/get-friday-from-week-number-and-year-in-javascript)重新编写代码，您将得到如下内容：

```
function getDays(year, week) {
    var j10 = new Date(year, 0, 10, 12, 0, 0),
        j4 = new Date(year, 0, 4, 12, 0, 0),
        mon = j4.getTime() - j10.getDay() * 86400000,
        result = [];

    for (var i = -1; i < 6; i++) {
        result.push(new Date(mon + ((week - 1) * 7 + i) * 86400000));
    }

    return result;
} 
```

**演示：http:** [//jsfiddle.net/TtmPt/](http://jsfiddle.net/TtmPt/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:23:15.647

您需要决定一周从哪一天开始 - 您指定了星期日。（ISO 周从星期一开始）。

1.  获取**Jan 1 的星期几**。
2.  获取**最近的星期日**的日期。
3.  如果**1 月 1 日**是星期四、星期五、星期六或星期日，则一年中的第一周从 12 月的最后一个星期日开始一周。否则，一年的第一周从 12 月的最后一个星期日开始。
4.  通过将日期设置为**第一天 + (weeks * 7) - 7**来查找一年中任何一周的第一天。

    var year= new Date().getFullYear(), firstDay= new Date(year, 0, 1), wd= firstDay.getDay();

    firstDay.setDate(1 +(-1*(wd%7)));

    if(wd>3){ firstDay.setDate(firstDay.getDate()+ 7); } var week4= 新日期（第一天）；week4.setDate(week4.getDate()+(4*7)- 7);

    警报（第 4 周）；

    返回值：（日期）

    2013 年 1 月 20 日星期日 00:00:00 GMT-0500（东部标准时间）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T12:10:04.093

jquery/javascript-根据周数和年数计算本周的天数

```
 var years = $('#yr').val(); 
var weeks = $('#weekNo').val();

    var d = new Date(years, 0, 1);
        var dayNum = d.getDay();
        var diff = --weeks * 7;

        if (!dayNum || dayNum > 4) {
            diff += 7;
        }

        d.setDate(d.getDate() - d.getDay() + ++diff);
$('#result').val(d); 
```

[演示] [1]：[https ://jsfiddle.net/2bhLw084/](https://jsfiddle.net/2bhLw084/)

# c# - 如何使用 json-ajax 解析字典类型

> ID：10433166
> 
> 赞同：1
> 
> 时间：2012-05-03T14:10:49.037
> 
> 标签：c#, jquery, asp.net, ajax, json

我有将从服务器返回的字典，我将其转换为 json 字符串格式，如下所示：

```
public static class Extensions 
{ 
    public static string ToJson<T>(this T obj) 
    { 
        MemoryStream stream = new MemoryStream(); 
        try { 
            DataContractJsonSerializer jsSerializer = new DataContractJsonSerializer(typeof(T)); 
            jsSerializer.WriteObject(stream, obj); 

            return Encoding.UTF8.GetString(stream.ToArray()); 
        } 
        finally 
        { 
            stream.Close(); 
            stream.Dispose();
        } 
    } 
    public static T FromJson<T>(this string input) 
    { 
        MemoryStream stream = new MemoryStream();
        try {
            DataContractJsonSerializer jsSerializer = new DataContractJsonSerializer(typeof(T));
            stream = new MemoryStream(Encoding.UTF8.GetBytes(input)); 
            T obj = (T)jsSerializer.ReadObject(stream); return obj; 
        } 
        finally 
        { 
            stream.Close(); 
            stream.Dispose();
        }
    } 
}

[WebMethod]
public string callme()
{
    Dictionary<int, string> myObjects = new Dictionary<int, string>();
    myObjects.Add(1, "This");
    myObjects.Add(2, "is");
    myObjects.Add(3, "cool");
    string json = myObjects.ToJson();
    return json;
} 
```

所以结果是：

```
{"d":"[{\"Key\":1,\"Value\":\"This\"},{\"Key\":2,\"Value\":\"is\"},{\"Key\":3,\"Value\":\"cool\"}]"} 
```

**我如何在 jquery 中解析它？我正在尝试这个但没有帮助**

```
$.ajax({
      type: "POST",
      url: "web.asmx/callme",
      data: "{}",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(msg){
          $.each(msg.d, function (i) {
          $("#data2").append(i.Key + " " + i.Value + "<br/>");
        });
      }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:38:16.250

在它起作用之前你必须做这些事情：

*   为您的网络服务添加一个`ScriptService`属性
*   在您的网络服务中添加一个`ScriptMethod`属性

如果这样做，您甚至不需要自己在服务器中解析创建 JSON。WS 基础架构将为您完成。

然后，只需在客户端站点上使用 msg.d。它将自动从 JSOn 字符串反序列化。

看这里[Using jQuery to Consume ASP.NET JSON Web Services](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)你需要在客户端做什么。

[在这里，您有一个完整的客户端和服务器端工作示例](http://www.codeproject.com/Articles/45275/Create-a-JSON-WebService-in-ASP-NET-2-0-with-a-jQu)。

请注意，在 ASP.NET 3.5 之前，响应消息会直接带来数据。在 3.5 及更高版本中，数据位于消息的 .d 属性中。

**EDIT2：更简单的方法** 我在第一次编辑中犯了一个错误：.asmx 无法将 Dictionay 序列化为 XML。因此，当我通过 .asmx 页面在第一次编辑中测试解决方案时，出现了错误。但是 JSON 可以序列化具有字符串或对象作为键的字典。

因此，您可以使用此类将您转换`Dictionary<int,string>`为`Dictionary<string,string>`使用此泛型类：

```
 public class DictionaryConverter
    {
        public static Dictionary<string,TValue> 
            ConvertDictionary<TKey,TValue>(Dictionary<TKey,TValue> dict)
        {
            Dictionary<string,TValue> newDict
                = new Dictionary<string, TValue>();
            foreach(TKey key in dict.Keys)
            {
                newDict.Add(key.ToString(), dict[key]);
            }
            return newDict;
        }
    } 
```

该类可以将任何键类型的 Dictionary 转换为 `Dictionary<string,Tvalue>`字典，可以序列化为 JSON，但不能序列化为 XML。它使用键类型`toString()`方法将键转换为字符串。这将适用于`int`许多其他类型。如果需要，可以扩展此方法以接收委托以将密钥转换为字符串。

在客户端，您可以使用此解决方案和第一次编辑中的解决方案获得相同的结果。第一次编辑的优点是它还可以支持序列化为 XML：您可以通过 .asmx 页面调用方法，并将 WebMethod 用作常规 XML WebMethod。

**编辑：在 .asmx Web 服务中序列化 Dictionary<>：**

与 asmx 一起使用的序列化程序不支持**为 XML**序列化字典。您可以创建一个自定义类并将您的字典转换为该自定义类的列表，该列表具有一个键和一个值属性（序列化程序不支持序列化`KeyValuePair`或`Tuple`，因此您必须使用自己的类）。

这个类有两个目的：

*   它是一个可以用 asmx 用于 JSON 的序列化器序列化的类
*   允许在类的元素列表中转换字典

    ```
    public class KeyValue<TKey, TValue>
    {
        public KeyValue()
        {
        }

        public TKey Key { get; set; }
        public TValue Value { get; set; }

        public static List<KeyValue<TKey,TValue>> ConvertDictionary
            (Dictionary<TKey,TValue> dictionary)
        {
            List<KeyValue<TKey, TValue>> newList
                = new List<KeyValue<TKey, TValue>>();
            foreach (TKey key in dictionary.Keys)
            {
                newList.Add(new KeyValue<TKey, TValue> 
                  { Key = key, Value = dictionary[key] });
            }
            return newList;
        }
    } 
    ```

您的 Web 方法应如下所示：

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)] // it's JSON by default
    public List<KeyValue<int,string>> GetKeyValueList()
    {
        List<KeyValue<int, string>> list
            = KeyValue<int,string>.ConvertDictionary(yourDictionary);
        return list;
    } 
```

笔记：

*   您可以使用任何方法名称而不是`GetKeyValueList`
*   TKey、TValue 必须与你的字典键和值类型相同。

在客户端，您会得到一组具有 Key 和 Value 属性的对象，可以像这样访问：

```
 msg.d[0].Key
  msg.d[0].Value 
```

这是 jquery ajax 调用：

```
 $(document).ready(function () {
    $.ajax({
        url: 'MyService.asmx/GetKeyValueList',
        type: "POST",
        data: "{}",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (msg) {
            // use msg.d array of objects with Key and Value
        }
    });
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:22:48.517

```
$.each(msg.d, function() {
    $("#data2").append(this.Key + " " + this.Value + "<br/>");
}); 
```

此外，您的序列化似乎无法正常工作，因为返回的响应并未完全解析为 JSON。的内容不`d`应该是一个字符串，它应该是一个对象/数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T11:25:39.757

基于上面的 JotaBe 回答，我创建了这个扩展方法：

```
 public class KeyValue<TKey, TValue>
    {
        public TKey Key { get; set; }
        public TValue Value { get; set; }

        public KeyValue()
        {
        }       
    }
    public static class KeyValue_extensionMethods
    {
        public static List<KeyValue<TKey, TValue>> ConvertDictionary<TKey, TValue>(this Dictionary<TKey, TValue> dictionary)
        {
            var  keyValueList = new List<KeyValue<TKey, TValue>>();
            foreach (TKey key in dictionary.Keys)
                keyValueList.Add(new KeyValue<TKey, TValue> { Key = key, Value = dictionary[key] });
            return keyValueList;
        }
    } 
```

然后允许我使用*{object}.ConvertDictionary()*语法来使用它。例如：

```
[WebMethod(EnableSession = true)] [Admin(SecurityAction.Demand)]       
public List<KeyValue<Guid, string>>     Data_GuidanceItems_FileMappings()        
{
    return TM_Xml_Database.GuidanceItems_FileMappings.ConvertDictionary();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-05T19:53:17.677

它对我有用的唯一方法是

```
var $nomeP = $("#<%= tbxBuscaJornalista.ClientID %>").val();

             $.ajax({
             url: "MyPage.asmx/MyMethod",
             dataType: "json",
             type: "POST",
             data: "{ 'variableName': '"+$nomeP+"' }",
             contentType: "application/json; charset=utf-8",
             success: function (msg) {
                 $.each(msg.d, function (index, value) {
                     $("#somePanel").append(index + " " + value + "<br/>");
                 });
             },
             error: function (XMLHttpRequest, textStatus, errorThrown) {
                 alert("Error: " + errorThrown + " XmlRequest: " + XMLHttpRequest);
             }
         }); 
```

请注意`data: "{ 'variableName': '"+$nomeP+"' }"`显示我必须**将变量名（与代码隐藏中的预期相同）和单引号中*的值***括起来的行。否则它将无法正常工作。另外，我尝试迭代和使用`$(this).Key`，`$(this).Value`但这也行不通。我被迫使用这种`function (index, value)`方法。

# javascript - 谷歌地图方向点

> ID：10433167
> 
> 赞同：0
> 
> 时间：2012-05-03T14:10:50.503
> 
> 标签：javascript, html, google-maps

我有一个带有方向线的 gmap（2 个或更多点）。有没有办法从地图中获取所有点，取决于视口（缩放级别），只有用户可以看到的点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:16:38.687

我不会给你茶匙版本，但这是你的做法。首先，确保您在数组中拥有所有可用的标记。

1.  从您的地图中获取边界：`map.getBounds()`. 这将返回一个`LatLngBounds`对象，其中包含视口左下角和右上角的坐标。
2.  遍历所有标记。获取他们的位置：`marker.getPosition()`并检查他们是否在地图边界西南点的**上方**和**右侧，**以及地图边界东北点的**下方**和**左侧。**
3.  如果是，请将这些点添加到数组中。

该数组现在包含视口中的所有点。根据需要重复。

可以在[Google Maps API v3 参考中找到更多信息](https://developers.google.com/maps/documentation/javascript/reference)

# c++ - 在 OpenGL 中使用 FBO 绘画应用程序

> ID：10433168
> 
> 赞同：1
> 
> 时间：2012-05-03T14:10:51.263
> 
> 标签：c++, opengl, fbo, cinder

我正在使用 C++ 和 OpenGL 开发一个应用程序（使用 Cinder 库）。

它只是简单地获取鼠标输入，并在 draw 方法中将鼠标位置上的圆圈绘制到 FBO。之后，FBO 被绘制到屏幕上。FBO不是每次都清零，所以之前的圈子还在里面。问题是，当我在 FBO 上绘制新圆时，它不是在其上绘制，而是在 FBO 的先前内容下绘制。FBO 仅使用宽度和高度参数创建，没有其他设置。它也在 setup() 中被清除。

# iphone - 应用程序在不在模拟器上的设备上崩溃，在控制台上没有任何内容，在单击文本字段时

> ID：10433170
> 
> 赞同：0
> 
> 时间：2012-05-03T14:10:52.780
> 
> 标签：iphone, objective-c, ios, xcode4

我的应用程序在滚动视图上有一个视图和几个文本字段，但是在单击文本字段（在 ios5 设备上）时，它崩溃了。，文本字段代表正在调用 .. 当我进入函数时 .. 它只有几行在 xcode 上，然后它崩溃了。

我的应用程序在 ios 4.0（模拟器和设备）上运行良好，但在 ios5.0 上崩溃（仅在设备上，不在模拟器上），我无法从设备调试。

我的崩溃报告说——

作业似乎已崩溃：分段错误：11

应用程序“ttk”异常退出，信号 11：分段错误：11

如何解决这个问题，任何链接都会有用。谢谢。

已经尝试过 - NSZombieEnabled ，静态分析器..

崩溃后，日志控制台上没有任何有用的信息。

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"button index : %d",buttonIndex);
    if(buttonIndex == 0) {
        if( [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
            ImageController = [[UIImagePickerController alloc] init];
            ImageController.allowsEditing = YES;
            ImageController.delegate      = self; 
            ImageController.sourceType    = UIImagePickerControllerSourceTypePhotoLibrary;
            [self.navigationController.topViewController presentModalViewController:ImageController animated:YES];
        } else {
            [self callAlertViewWithTitle:@"Message!" Message:@"Album not available."];
        }
    } else if(buttonIndex == 1) {
        if( [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera ]) {
            ImageController = [[UIImagePickerController alloc] init];
            ImageController.allowsEditing = YES;
            ImageController.delegate      = self; 
            ImageController.sourceType    = UIImagePickerControllerSourceTypeCamera;
            [self.navigationController presentModalViewController:ImageController animated:YES];
        } else {
            [self callAlertViewWithTitle:@"Message!" Message:@"Camera not available."];
        }
    }
} 
```

谢谢大家。我解决了我的问题..我的产品名称包含特殊字符（'）..导致崩溃，从产品名称中删除特殊字符后..它工作正常。即从（肖恩的应用程序）到（肖恩应用程序）。

解决了..感谢@saad、@netrace、@andrea、@paul 在这么短的时间内回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:34:37.057

有时可能会发生分段错误。就像这里描述的：[iPhone上无法解释的分段错误](https://stackoverflow.com/questions/7645399/unexplainable-segmentation-fault-on-iphone)尝试重新启动您的设备并再试一次

# django - 防止 django 管理员在列表表单上运行 SELECT COUNT(*)

> ID：10433173
> 
> 赞同：29
> 
> 时间：2012-05-03T14:11:02.653
> 
> 标签：django, django-models, django-admin

每次我使用 Admin 列出模型的条目时，Admin 都会计算表中的行数。更糟糕的是，即使您正在过滤查询，它似乎也会这样做。

例如，如果我只想显示 id 为 123、456、789 的模型，我可以这样做：

```
/admin/myapp/mymodel/?id__in=123,456,789 
```

但是运行的查询（除其他外）是：

```
SELECT COUNT(*) FROM `myapp_mymodel` WHERE `myapp_mymodel`.`id` IN (123, 456, 789) # okay
SELECT COUNT(*) FROM `myapp_mymodel` # why??? 
```

这是杀死mysql + innodb。[这个问题似乎在这张票中](https://code.djangoproject.com/ticket/8408)得到了部分承认，但我的问题似乎更具体，因为它计算了所有行，即使它不应该计算在内。

有没有办法禁用全局行数？

注意：我使用的是 django 1.2.7。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-01-26T16:23:10.860

Django 1.8 允许您通过设置禁用此功能`show_full_result_count = False`。

[https://docs.djangoproject.com/en/stable/ref/contrib/admin/#django.contrib.admin.ModelAdmin.show_full_result_count](https://docs.djangoproject.com/en/stable/ref/contrib/admin/#django.contrib.admin.ModelAdmin.show_full_result_count)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-04T09:32:19.380

好的，我想我找到了解决方案。正如彼得建议的那样，最好的方法是处理该`count`属性，并且可以通过使用自定义查询集（如 [本文](http://www.tablix.org/~avian/blog/archives/2011/07/django_admin_with_large_tables/)中所见）覆盖它来完成，该查询集专门使用近似等价的计数：

```
from django.db import connections, models
from django.db.models.query import QuerySet

class ApproxCountQuerySet(QuerySet):
    """Counting all rows is very expensive on large Innodb tables. This
    is a replacement for QuerySet that returns an approximation if count()
    is called with no additional constraints. In all other cases it should
    behave exactly as QuerySet.

    Only works with MySQL. Behaves normally for all other engines.
    """

    def count(self):
        # Code from django/db/models/query.py

        if self._result_cache is not None and not self._iter:
            return len(self._result_cache)

        is_mysql = 'mysql' in connections[self.db].client.executable_name.lower()

        query = self.query
        if (is_mysql and not query.where and
                query.high_mark is None and
                query.low_mark == 0 and
                not query.select and
                not query.group_by and
                not query.having and
                not query.distinct):
            # If query has no constraints, we would be simply doing
            # "SELECT COUNT(*) FROM foo". Monkey patch so the we
            # get an approximation instead.
            cursor = connections[self.db].cursor()
            cursor.execute("SHOW TABLE STATUS LIKE %s",
                    (self.model._meta.db_table,))
            return cursor.fetchall()[0][4]
        else:
            return self.query.get_count(using=self.db) 
```

然后在管理员中：

```
class MyAdmin(admin.ModelAdmin):

    def queryset(self, request):
        qs = super(MyAdmin, self).queryset(request)
        return qs._clone(klass=ApproxCountQuerySet) 
```

近似函数可能会在页码 100000 上搞砸，但对于我的情况来说已经足够了。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-16T19:44:40.407

我发现 Nova 的回答很有帮助，但我使用的是 postgres。我稍微修改了它以适用于 postgres，对处理表命名空间进行了一些细微的改动，以及稍微不同的“检测 postgres”逻辑。

这是pg版本。

```
class ApproxCountPgQuerySet(models.query.QuerySet):
  """approximate unconstrained count(*) with reltuples from pg_class"""

  def count(self):
      if self._result_cache is not None and not self._iter:
          return len(self._result_cache)

      if hasattr(connections[self.db].client.connection, 'pg_version'):
          query = self.query
          if (not query.where and query.high_mark is None and query.low_mark == 0 and
              not query.select and not query.group_by and not query.having and not query.distinct):
              # If query has no constraints, we would be simply doing
              # "SELECT COUNT(*) FROM foo". Monkey patch so the we get an approximation instead.
              parts = [p.strip('"') for p in self.model._meta.db_table.split('.')]
              cursor = connections[self.db].cursor()
              if len(parts) == 1:
                  cursor.execute("select reltuples::bigint FROM pg_class WHERE relname = %s", parts)
              else:
                  cursor.execute("select reltuples::bigint FROM pg_class c JOIN pg_namespace n on (c.relnamespace = n.oid) WHERE n.nspname = %s AND c.relname = %s", parts)
          return cursor.fetchall()[0][0]
      return self.query.get_count(using=self.db) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-14T14:54:40.997

Nova 的解决方案（ApproxCountQuerySet）效果很好，但是在较新版本的 Django 中，queryset 方法被 get_queryset 取代，所以现在应该是：

```
class MyAdmin(admin.ModelAdmin):

    def get_queryset(self, request):
        qs = super(MyAdmin, self).get_queryset(request)
        return qs._clone(klass=ApproxCountQuerySet) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-03T17:04:20.533

如果这是一个严重的问题，您可能必须采取 Drastic Actions™。

查看 1.3.1 安装的代码，我看到管理代码正在使用由`get_paginator()`. 默认分页器类似乎在`django/core/paginator.py`. 该类有一个名为的私有值`_count`，该值设置在`Paginator._get_count()`（我的副本中的第 120 行）中。这又用于设置*Paginator*类的一个名为`count`. 我认为那`_get_count()`是你的目标。现在舞台已经搭建好了。

你有几个选择：

1.  直接修改源码。我*不*建议这样做，但由于您似乎被困在 1.2.7 上，您可能会发现它是最方便的。*请记住记录此更改！*未来的维护者（可能包括您自己）会感谢您的提醒。

2.  Monkeypatch 班级。这比直接修改要好，因为a）如果您不喜欢更改，只需注释掉monkeypatch，b）它更有可能与Django的未来版本一起使用。我有一个可以追溯到 4 年多的猴子补丁，因为他们仍然没有修复模板变量`_resolve_lookup()`代码中的错误，该错误无法识别顶层评估的可调用对象，仅在较低级别。尽管补丁（包装类的方法）是针对 0.97-pre 编写的，但它仍然适用于 1.3.1。

我没有花时间确切地弄清楚您必须为您的问题做出哪些更改，但它可能类似于将`_approx_count`成员添加到适当的类`class META`，然后测试以查看该 attr 是否存在。如果是并且是，`None`那么您执行`sql.count()`并设置它。如果您在（或接近）列表的最后一页，您可能还需要重置它。如果您需要更多帮助，请与我联系；我的电子邮件在我的个人资料中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-06T11:20:08.937

可以[更改管理类使用的默认分页](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.paginator)器。这是一个在短时间内缓存结果的方法：[https ://gist.github.com/e4c5/6852723](https://gist.github.com/e4c5/6852723)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-19T08:15:32.153

我设法创建了一个自定义分页器，它显示当前页面编号、一个下一步按钮和一个显示完整计数链接。如果需要，它允许使用原始分页器。

[![在此处输入图像描述](../Images/644507a65e00e80feacbc9e6ede19231.png)](https://i.stack.imgur.com/Fn2Pk.png)

使用的技巧是`per_page + 1`从 db 中获取元素，以查看是否有更多元素，然后提供虚假计数。

假设我们想要第三页并且页面有 25 个元素 => 我们想要`object_list[50:75]`。调用查询集时`Paginator.count`，将对查询集进行评估`object_list[50:76]`（请注意，我们采用**75+1 个**元素），然后如果我们从 db 获得 25+1 个元素，则返回计数为 76，如果没有收到 26，则返回 50 + 收到的元素数元素。

* * *

TL;DR：我为以下内容创建了一个 mixin `ModelAdmin`：

```
from django.core.paginator import Paginator
from django.utils.functional import cached_property

class FastCountPaginator(Paginator):
    """A faster paginator implementation than the Paginator. Paginator is slow
    mainly because QuerySet.count() is expensive on large queries.

    The idea is to use the requested page to generate a 'fake' count. In
    order to see if the page is the final one  it queries n+1 elements
    from db then reports the count as page_number * per_page + received_elements.
    """

    use_fast_pagination = True

    def __init__(self, page_number, *args, **kwargs):
        self.page_number = page_number
        super(FastCountPaginator, self).__init__(*args, **kwargs)

    @cached_property
    def count(self):
        # Populate the object list when count is called. As this is a cached property,
        # it will be called only once per instance
        return self.populate_object_list()

    def page(self, page_number):
        """Return a Page object for the given 1-based page number."""
        page_number = self.validate_number(page_number)
        return self._get_page(self.object_list, page_number, self)

    def populate_object_list(self):
        # converts queryset object_list to a list and return the number of elements until there
        # the trick is to get per_page elements + 1 in order to see if the next page exists.
        bottom = self.page_number * self.per_page
        # get one more object than needed to see if we should show next page
        top = bottom + self.per_page + 1
        object_list = list(self.object_list[bottom:top])
        # not the last page
        if len(object_list) == self.per_page + 1:
            object_list = object_list[:-1]
        else:
            top = bottom + len(object_list)
        self.object_list = object_list
        return top

class ModelAdminFastPaginationMixin:
    show_full_result_count = False  # prevents root_queryset.count() call

    def changelist_view(self, request, extra_context=None):
        # strip count_all query parameter from the request before it is processed
        # this allows all links to be generated like this parameter was not present and without raising errors
        request.GET = request.GET.copy()
        request.GET.paginator_count_all = request.GET.pop('count_all', False)

        return super().changelist_view(request, extra_context)

    def get_paginator(self, request, queryset, per_page, orphans=0, allow_empty_first_page=True):
        # use the normal paginator if we want to count all the ads
        if hasattr(request.GET, 'paginator_count_all') and request.GET.paginator_count_all:
            return Paginator(queryset, per_page, orphans, allow_empty_first_page)
        page = self._validate_page_number(request.GET.get('p', '0'))
        return FastCountPaginator(page, queryset, per_page, orphans, allow_empty_first_page)

    def _validate_page_number(self, number):
        # taken from Paginator.validate_number and adjusted
        try:
            if isinstance(number, float) and not number.is_integer():
                raise ValueError
            number = int(number)
        except (TypeError, ValueError):
            return 0
        if number < 1:
            number = 0
        return number 
```

`pagination.html`模板：

```
{% if cl and cl.paginator and cl.paginator.use_fast_pagination %}
    {# Fast paginator with only next button and show the total number of results#}
    {% load admin_list %}
    {% load i18n %}
    {% load admin_templatetags %}
    <p class="paginator">
        {% if pagination_required %}
            {% for i in page_range %}
                {% if forloop.last %}
                    {% fast_paginator_number cl i 'Next' %}
                {% else %}
                    {% fast_paginator_number cl i %}
                {% endif %}
            {% endfor %}
        {% endif %}
        {% show_count_all_link cl "showall" %}
    </p>
{% else %}
    {#  use the default pagination template if we are not using the FastPaginator  #}
    {% include "admin/pagination.html" %}
{% endif %} 
```

和使用的模板标签：

```
from django import template
from django.contrib.admin.views.main import PAGE_VAR
from django.utils.html import format_html
from django.utils.safestring import mark_safe

register = template.Library()

DOT = '.'

@register.simple_tag
def fast_paginator_number(cl, i, text_display=None):
    """Generate an individual page index link in a paginated list.

    Allows to change the link text by setting text_display
    """
    if i == DOT:
        return '… '
    elif i == cl.page_num:
        return format_html('<span class="this-page">{}</span> ', i + 1)
    else:
        return format_html(
            '<a href="{}"{}>{}</a> ',
            cl.get_query_string({PAGE_VAR: i}),
            mark_safe(' class="end"' if i == cl.paginator.num_pages - 1 else ''),
            text_display if text_display else i + 1,
        )

@register.simple_tag
def show_count_all_link(cl, css_class='', text_display='Show the total number of results'):
    """Generate a button that toggles between FastPaginator and the normal
    Paginator."""
    return format_html(
        '<a href="{}"{}>{}</a> ',
        cl.get_query_string({PAGE_VAR: cl.page_num, 'count_all': True}),
        mark_safe(f' class="{css_class}"' if css_class else ''),
        text_display,
    ) 
```

你可以这样使用它：

```
class MyVeryLargeModelAdmin(ModelAdminFastPaginationMixin, admin.ModelAdmin):
# ... 
```

* * *

或者更简单的版本，不显示*Next*按钮和*Show the total number of results*：

```
from django.core.paginator import Paginator
from django.utils.functional import cached_property

class FastCountPaginator(Paginator):
    """A faster paginator implementation than the Paginator. Paginator is slow
    mainly because QuerySet.count() is expensive on large queries.

    The idea is to use the requested page to generate a 'fake' count. In
    order to see if the page is the final one  it queries n+1 elements
    from db then reports the count as page_number * per_page + received_elements.
    """

    use_fast_pagination = True

    def __init__(self, page_number, *args, **kwargs):
        self.page_number = page_number
        super(FastCountPaginator, self).__init__(*args, **kwargs)

    @cached_property
    def count(self):
        # Populate the object list when count is called. As this is a cached property,
        # it will be called only once per instance
        return self.populate_object_list()

    def page(self, page_number):
        """Return a Page object for the given 1-based page number."""
        page_number = self.validate_number(page_number)
        return self._get_page(self.object_list, page_number, self)

    def populate_object_list(self):
        # converts queryset object_list to a list and return the number of elements until there
        # the trick is to get per_page elements + 1 in order to see if the next page exists.
        bottom = self.page_number * self.per_page
        # get one more object than needed to see if we should show next page
        top = bottom + self.per_page + 1
        object_list = list(self.object_list[bottom:top])
        # not the last page
        if len(object_list) == self.per_page + 1:
            object_list = object_list[:-1]
        else:
            top = bottom + len(object_list)
        self.object_list = object_list
        return top

class ModelAdminFastPaginationMixin:
    show_full_result_count = False  # prevents root_queryset.count() call

    def get_paginator(self, request, queryset, per_page, orphans=0, allow_empty_first_page=True):
        page = self._validate_page_number(request.GET.get('p', '0'))
        return FastCountPaginator(page, queryset, per_page, orphans, allow_empty_first_page)

    def _validate_page_number(self, number):
        # taken from Paginator.validate_number and adjusted
        try:
            if isinstance(number, float) and not number.is_integer():
                raise ValueError
            number = int(number)
        except (TypeError, ValueError):
            return 0
        if number < 1:
            number = 0
        return number 
```

# mongodb - Grails GORM MongoDB。父模型类的问题

> ID：10433174
> 
> 赞同：0
> 
> 时间：2012-05-03T14:11:09.887
> 
> 标签：mongodb, grails, gorm-mongodb

**背景**：我在 Grails 中为 MongoDB 使用 GORM 插件。

**问题**：假设我有两个域类 A 和 B。B 扩展 A。如果我执行 B.save()，插件将在 MongoDB 中创建一个名为 A 的集合。我应该怎么做才能让插件创建集合 B？

非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:08:52.467

它应该在数据库中创建集合 B。您能否提供更多信息，A 和 B 类的定义？

# zend-framework - Zend Framework - fetchAll 在没有返回行时返回致命错误？

> ID：10433175
> 
> 赞同：0
> 
> 时间：2012-05-03T14:11:11.640
> 
> 标签：zend-framework, fatal-error, fetchall

我知道当我尝试使用 top`fetchAll`并返回一个致命错误时，原因是它没有返回查询记录。但我的问题是，如何治疗？我怎么知道查询是否不会返回任何记录，所以我不使用`toArray()`？

例如，

```
$table = new Application_Model_Proucts();
$products = $table->fetchAll()->toArray(); 
```

在输入方法之前如何验证查询`toArray`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:19:09.703

如果没有从中返回任何记录，`fetchAll()`那么您将什么也不传递给`toArray()`，这是发生错误的地方。

尝试在 if 语句中包装你的代码的最后一个：

```
$products = $table->fetchAll();

if(count($products))
{
  $products = $products->toArray();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T03:24:13.527

将查询包装在条件中和/或在不满足条件时抛出新异常

# java - 安卓数组列表 到 PHP

> ID：10433176
> 
> 赞同：1
> 
> 时间：2012-05-03T14:11:11.653
> 
> 标签：java, php, android, json

我需要我的应用程序向 php 发送一个`ArrayList<String[]>`，我有这个来调用服务：

```
ArrayList<String[]> Items = new ArrayList<String[]>();
(...)
JSONObject JSONSend= new JSONObject();
JSONSend.put("Items", Items );

HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000);
HttpResponse response;
HttpPost post = new HttpPost(SERVICE);
post.setHeader("json", JSONSend.toString());
StringEntity se = new StringEntity(JSONSend.toString());
se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,"application/json"));
post.setEntity(se);
response = client.execute(post); 
```

在 PHP 服务上：

```
$data = file_get_contents('php://input');
$json = json_decode($data);
$Items = $json->{'Items'};
error_log($Items); 
```

并且 php 正在返回这个：

```
[[Ljava.lang.String;@413e2fd0, [Ljava.lang.String;@413a2940, [Ljava.lang.String;@4139df18, [Ljava.lang.String;@4141b5b0, [Ljava.lang.String;@413931c8, [Ljava.lang.String;@41348b40, [Ljava.lang.String;@41393928] 
```

$ServMade 的类型是字符串，那么如何在 php 中将数据作为数组处理？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:34:39.983

在android中生成json字符串时尝试以下操作：

```
JSONObject JSONSend= new JSONObject();
JSONArray ja = null;
JSONArray tmp = new JSONArray();
for(String s[] : Items){
    ja = new JSONArray();
    for(int i = 0; i<s.length; i++)
        ja.put(s[i]);
    tmp.put(ja);
}
JSONSend.put("Items", tmp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:31:34.320

这里的问题是，您在字符串数组 (String[]) 上调用 .toString()（在 Java 中），虽然没有被覆盖，但返回的正是您在 JSON 中得到的内容：[Ljava.lang.String;@413e2fd0]。

不确切知道 JSONObject 但我猜你应该将`ArrayList<String[]>`（所以字符串数组的数组）转换为不同的东西，以便 JSONObject 正确处理它。

此外，在 PHP 中，您不必调用`$Items = $json->{'Items'};`- 可以调用`$Items = $json->Items;`.

# java - 如何使用算法对未知短信进行分组？

> ID：10433177
> 
> 赞同：3
> 
> 时间：2012-05-03T14:11:13.523
> 
> 标签：java, algorithm, machine-learning

以下是我需要组合在一起的示例数据集，如果您仔细观察，它们大多是相似的文本行，但具有 person id 或 ID 的差异非常小。

```
Unexpected error:java.lang.RuntimeException:Data not found for person 1X99999123 . Clear set not defined . Dump
Unexpected error:java.lang.RuntimeException:Data not found for person 2X99999123 . Clear set not defined . Dump
Unexpected error:java.lang.RuntimeException:Data not found for person 31X9393912 . Clear set not defined . Dump
Unexpected error:java.lang.RuntimeException:Data not found for person 36X9393912 . Clear set not defined . Dump
Exception in thread "main" javax.crypto.BadPaddingException: ID 1 Given final block not properly padded
Exception in thread "main" javax.crypto.BadPaddingException: ID 2 Given final block not properly padded
Unexpected error:java.lang.RuntimeException:Data not found for person 5 . Clear set not defined . Dump
Unexpected error:java.lang.RuntimeException:Data not found for person 6 . Clear set not defined . Dump
Exception in thread "main" java.lang.NullPointerException at TripleDESTest.encrypt(TripleDESTest.java:18) 
```

我想将它们分组，以便最终结果就像

```
Unexpected error:java.lang.RuntimeException:Data not found - 6
Exception in thread "main" javax.crypto.BadPaddingException - 2
Exception in thread "main" java.lang.NullPointerException at - 1 
```

是否有现有的 API 或算法可用于处理此类情况？

提前致谢。干杯沙克蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:21:03.253

这个问题被标记为机器学习，所以我将建议分类方法。

您可以对每个字符串进行标记，并将训练集中的所有标记用作可能的布尔特征 - 如果实例包含此标记，则实例具有该特征。

现在，使用这些数据，您可以（例如）构建[C4.5](http://en.wikipedia.org/wiki/C4.5_algorithm) - 从数据中创建[决策树](http://en.wikipedia.org/wiki/Decision_tree_learning)。确保树在构建后使用修剪，并且每个叶子的最小示例数> 1。

一旦树建立起来，“聚类”就由树本身完成了！每个叶子都包含被认为彼此相似的示例。

您现在可以通过遍历分类树并将存储在每个叶子中的样本提取到其相关集群中来提取此数据。

**笔记：**

*   对于您提供的示例数据，此算法将失败，因为如果一个 msg 是唯一的（您的示例中的 NPE）它不能很好地处理 - 它可能与`BadPaddingException`.
*   无需重新发明轮子 - 您可以使用[weka](http://www.cs.waikato.ac.nz/ml/weka/) - java 中的开源机器学习库，或其他现有的算法库
*   除了将标记用作二进制特征，它们还可以是数字特征，您可以使用字符串中的标记在哪里，是第 1 个标记还是第 10 个标记？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:59:37.277

如果您知道消息的格式，最简单的方法是使用正则表达式并计算匹配项。

Java 完全支持正则表达式，并且它们的使用肯定比聚类算法更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:13:55.550

我认为你应该适当地创建一个解析文本并过滤掉你想要删除的模式的方法......但是我不完全确定你想要做什么......

我想你想做的事情大概可以通过StringTokenizer类来实现……

# c# - 动态切换到无cookie会话状态asp.net？

> ID：10433179
> 
> 赞同：2
> 
> 时间：2012-05-03T14:11:23.230
> 
> 标签：c#, asp.net, session, state-management

我们有一个需求，需要动态切换到无cookie会话。下面的msdn链接显示我们可以通过修改webconfig [http://msdn.microsoft.com/en-us/library/aa479314.aspx](http://msdn.microsoft.com/en-us/library/aa479314.aspx)来启用无cookie会话，是是否有任何方法可以动态切换到无 cookie 会话？任何帮助将不胜感激.. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:40:56.700

我不相信有。通常，您只需检查他们是否使用 Session.IsCookieless 启用了 cookie，如果没有，则将它们重定向到通知他们需要 cookie 的页面。查看此链接了解更多信息：

[无 Cookie 会话状态 Asp.net](http://dotnetfarrukhabbas.blogspot.com/2011/04/cookieless-session-state-aspnet.html)

# sql - 什么时候需要在 SQL 中给表名起别名？

> ID：10433183
> 
> 赞同：8
> 
> 时间：2012-05-03T14:11:38.143
> 
> 标签：sql, join, alias, table-alias

我注意到在使用多个 JOIN 进行查询时，除非我为其中一个表名指定别名，否则我的查询不起作用。

这是一个简单的例子来解释这一点：

这**不起作用**：

```
SELECT subject
from items
join purchases on items.folder_id=purchases.item_id
join purchases on items.date=purchases.purchase_date
group by folder_id 
```

这样**做**：

```
SELECT subject
from items
join purchases on items.folder_id=purchases.item_id
join purchases as p on items.date=p.purchase_date
group by folder_id 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:16:37.173

您在查询中使用了同一个表 Purchases 两次。您需要通过提供不同的名称来区分它们。

您需要提供别名：

*   **`When the same table name is referenced multiple times`**

想象一下两个人拥有完全相同的 John Doe。如果您打电话给约翰，双方都会响应您的电话。你不能给两个人相同的名字，并假设他们会知道你在打电话给谁。类似地，当您提供名称完全相同的相同结果集时，SQL 无法识别从哪一个中获取值。您需要给出不同的名称来区分结果集，这样 SQL 引擎就不会混淆。

*脚本 1*：**t1**和**t2**是这里的别名

```
SELECT      t1.col2
FROM        table1 t1
INNER JOIN  table1 t2
ON          t1.col1 = t2.col1 
```

*   **`When there is a derived table/sub query output`**

如果一个人没有名字，你打电话给他们，因为你不能打电话给那个人，他们不会回复你。同样，当您生成派生表输出或子查询输出时，它是 SQL 引擎未知的，它不会调用什么。因此，您需要为派生输出命名，以便 SQL 引擎可以适当地处理该派生输出。

*脚本 2*：**t1**是这里的别名。

```
SELECT col1
FROM
(
    SELECT col1
    FROM   table1
) t1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T14:15:09.423

唯一需要提供别名的情况是，当您多次引用该表并且您有派生输出（充当表的子查询）时（感谢您发现 Siva）。这样您就可以消除在其余查询中使用哪个表引用之间的歧义。

为了进一步详细说明，在您的示例中：

```
SELECT subject
from items
join purchases on items.folder_id=purchases.item_id
join purchases on items.date=purchases.purchase_date
group by folder_id 
```

我的假设是您觉得每个`join`及其对应`on`的都将使用相关表，但是您可以使用您想要的任何表引用。因此，当您说 时`on items.date=purchases.purchase_date`，SQL 引擎会混淆您是指第一个购买表还是第二个表。

通过添加别名，您现在可以更明确地消除歧义。SQL 引擎现在可以 100% 确定您要使用哪个版本的购买。如果它必须在两个相等的选择之间进行猜测，那么它总是会抛出一个错误，要求你更明确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:15:13.277

当同一个表在查询中使用两次时，需要给它们命名。在您的情况下，查询将不知道从哪个表中选择 purchase.purchase_date。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T14:16:17.003

在这种情况下，只是您指定了两次购买，并且 SQL 引擎需要能够以唯一的方式引用连接中的每个数据集，因此需要别名。

顺便说一句，您真的需要两次参与购买吗？这行不通：

```
SELECT 
    subject
from 
    items
    join purchases 
        on items.folder_id=purchases.item_id
        and items.date=purchases.purchase_date
group by folder_id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T14:18:35.947

别名对于消除从中获取列的表的歧义是必要的。

因此，如果列的名称在 from 列表中的表中可用的所有可能列的列表中是唯一的，那么您可以直接使用列名称。

如果列的名称在 from 列表中的几个可用表中重复，则 DB 服务器无法猜测哪个表是获取该列的正确表。

在您的示例查询中，所有列名称都是重复的，因为您获得了同一个表（购买）的“两个实例”，因此服务器需要知道从哪个实例中获取该列。所以你必须指定它。

事实上，我建议您始终使用别名，除非只有一个表。这样您就可以避免很多问题，并使查询更加清晰易懂。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T14:15:51.043

您不能在同一查询中使用相同的表名，除非它被别名为其他名称以防止不明确的连接条件。这就是为什么它不允许。我应该注意，使用 always qualified table.field 或 alias.field 也更好，这样您后面的其他开发人员就不必猜测哪些列来自哪些表。

编写查询时，您知道自己在处理什么，但您身后的开发人员又如何。如果有人不习惯什么列来自什么表，那么跟随它可能会模棱两可，尤其是在 S/O 中。通过始终使用表引用和字段或别名引用和字段进行限定，它更容易遵循。

```
select
      SomeField,
      AnotherField
   from
      OneOfMyTables
         Join SecondTable
            on SomeID = SecondID 
```

将其与

```
select
      T1.SomeField,
      T2.AnotherField
   from
      OneOfMyTables T1
         JOIN SecondTable T2
            on T1.SomeID = T2.SecondID 
```

在这两种情况下，您更喜欢阅读哪一种……请注意，我使用较短的别名“T1”和“T2”简化了查询，但它们可以是任何东西，甚至是表名的首字母缩写词或缩写别名。 .“oomt”（我的一张桌子）和“st”（第二张桌子）。或者，就像其他帖子中的超长内容一样......

```
Select * from ContractPurchaseOffice_AgencyLookupTable

vs 

Select * from ContractPurchaseOffice_AgencyLookupTable  AgencyLkup 
```

如果您必须保留符合条件的联接或字段列，您更愿意查看哪个。

希望这能澄清你的问题。

# java - 如何在 Spring 中读取具有相同键的多个属性？

> ID：10433186
> 
> 赞同：9
> 
> 时间：2012-05-03T14:11:53.517
> 
> 标签：java, spring

我在这里面临一个简单的问题。我有两个要读取的属性文件来创建两个数据源。然而，这些属性文件具有完全相同的键！我可以使用以下方法读取这两个文件：

```
<context:property-placeholder 
    location="classpath:foo1.properties,classpath:foo2.properties"/> 
```

但是我无法访问正确的值：

```
<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${driver}" /> <!-- Which one? -->
    <property name="url" value="${url}" />                <!-- Which one? -->
    ...
</bean> 
```

如何读取我的属性，以便我可以使用变量，例如`${foo1.driver}`并知道调用了哪个变量？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T14:48:20.093

尝试这样的事情（未测试）：

```
<bean id="config1" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
       <property name="ignoreUnresolvablePlaceholders" value="true"/>
       <property name="placeholderPrefix" value="${foo1."/>
       <property name="locations">
        <list>
          <value>classpath:foo1.properties</value>
        </list>
      </property>
    </bean>

    <bean id="config2" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
       <property name="ignoreUnresolvablePlaceholders" value="false"/>
       <property name="placeholderPrefix" value="${foo2."/>
       <property name="locations">
        <list>
          <value>classpath:foo2.properties</value>
        </list>
      </property>
    </bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:48:29.380

我想我要做的是扩展 PropertyPlaceHolderConfigurer。

对我来说，您似乎必须重写该方法[`PropertiesLoaderSupport.loadProperties(Properties)`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/support/PropertiesLoaderSupport.html#loadProperties%28java.util.Properties%29)

我要做的是添加一个属性“前缀”

```
public void setPrefixes(List<String> prefixes){
    this.prefixes = prefixes;
} 
```

并在读取属性资源时遍历这些前缀。

# wcf - WCF 反序列化包含多态对象的 SOAP 数组的问题

> ID：10433188
> 
> 赞同：1
> 
> 时间：2012-05-03T14:11:59.207
> 
> 标签：wcf, soap, wsdl

我对反序列化多态对象数组的 WCF Web 服务有疑问。服务器端不是 WCF，但我从 WSDL 创建了存根。WSDL 中的重要部分是

```
<complexType name="NodeList">
    <sequence>
        <element name="data" type="cmtypes:Node" minOccurs="0" maxOccurs="unbounded" nillable="true"/>
    </sequence>
</complexType> 
```

和

```
<complexType name="Device">
    <sequence>
        <element name="uniqueKey" type="xsd:unsignedLong" minOccurs="1" maxOccurs="1"/>
        <element name="revision" type="xsd:string" minOccurs="1" maxOccurs="1"/>
        [...}
    </sequence>
</complexType>

<complexType name="Node">
    <complexContent>
        <extension base="cmtypes:Device">
            <sequence>
                <element name="cmdaemonUrl" type="xsd:string" minOccurs="1" maxOccurs="1"/>
                <element name="networks" type="cmtypes:NetworkInterfaceList" minOccurs="0" maxOccurs="1" nillable="true"/>
                [...]
            </sequence>
        </extension>
    </complexContent>
</complexType>

<complexType name="MasterNode">
    <complexContent>
        <extension base="cmtypes:Node">
            <sequence>
            </sequence>
        </extension>
    </complexContent>
</complexType> 
```

VS 为列表创建了以下类型：

```
[System.Xml.Serialization.SoapIncludeAttribute(typeof(MasterNode))]
[System.Xml.Serialization.SoapIncludeAttribute(typeof(SlaveNode))]
[System.Xml.Serialization.SoapIncludeAttribute(typeof(VirtualSMPNode))]
[System.Xml.Serialization.SoapIncludeAttribute(typeof(VirtualNode))]
[System.Xml.Serialization.SoapIncludeAttribute(typeof(PhysicalNode))]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.SoapTypeAttribute(Namespace="http://www.brightcomputing.com/cmtypes.xsd")]
public partial class Node : Device {

    private string cmdaemonUrlField;

    [...]
} 
```

但是，如果我收到一条包含主节点的消息，例如

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:cmtypes="http://www.brightcomputing.com/cmtypes.xsd" xmlns:cmdevice="http://www.brightcomputing.com/cmdevice.wsdl">
    <s:Header xmlns:s="http://www.w3.org/2003/05/soap-envelope"></s:Header>
    <SOAP-ENV:Body>
        <cmdevice:getNodesResponse SOAP-ENV:encodingStyle="http://www.w3.org/2003/05/soap-encoding">
            <nodes xsi:type="cmtypes:NodeList" xmlns="">
                <data xsi:type="cmtypes:MasterNode">
                    <uniqueKey xsi:type="xsd:unsignedLong">38654705666</uniqueKey>
                    <revision xsi:type="xsd:string"></revision>
                    <modified xsi:type="xsd:boolean">false</modified>
                    <toBeRemoved xsi:type="xsd:boolean">false</toBeRemoved>
[...] 
```

整个事情都爆发了`System.ServiceModel.CommunicationException`“反序列化操作'getNodes'的回复消息正文时出错”。和“对象不能存储在这种类型的数组中。” 在内部异常中。为什么？我能做些什么来解决这个问题（存根生成）？

由于 WCF/SOAP 知识非常有限，我完全没有任何线索，因此感谢您提供任何帮助。

最好的问候，克里斯托夫

*编辑：*响应实际上包含不同的多态类型的“数据”元素可能是相关的，即`cmtypes:MasterNode`和`cmtypes:PhysicalNode`。

*编辑：*可能是存根和消息不一起吗？据我了解，存根需要一个`data`属性，它是一个数组：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.SoapTypeAttribute(Namespace="http://www.brightcomputing.com/cmtypes.xsd")]
public partial class NodeList : object, System.ComponentModel.INotifyPropertyChanged {

    private Node[] dataField;

    /// <remarks/>
    [System.Xml.Serialization.SoapElementAttribute(IsNullable=true)]
    public Node[] data {
        get {
            return this.dataField;
        }
        set {
            this.dataField = value;
            this.RaisePropertyChanged("data");
        }
    }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName) {
        System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null)) {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

但是，在我的回答中，我得到一个`NodeList`直接包含一系列元素的`data`元素，这些元素实际上是节点或从节点派生的：

```
<cmdevice:getNodesResponse SOAP-ENV:encodingStyle="http://www.w3.org/2003/05/soap-encoding">
    <nodes xsi:type="cmtypes:NodeList" xmlns="">
        <data xsi:type="cmtypes:MasterNode">
            <uniqueKey xsi:type="xsd:unsignedLong">38654705666</uniqueKey>

            [...]
        </data>
        <data xsi:type="cmtypes:PhysicalNode">
            <uniqueKey xsi:type="xsd:unsignedLong">38654705669</uniqueKey>
            [...]
        </data>
    [...] 
```

你认为我可以通过在 WCF 中注入一个行为来解决这个问题吗？我的大问题是我绝对不可能改变服务器端......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:56:22.887

对此进行故障排除将很困难。我会尝试的一件事是使用[XmlSerializer](http://msdn.microsoft.com/en-us/library/d5wt2he6%28v=vs.71%29.aspx)来查看它是否可以反序列化，然后开始减少消息，直到你得到有问题的类型。

# android - Android广播接收器始终运行

> ID：10433189
> 
> 赞同：0
> 
> 时间：2012-05-03T14:11:59.490
> 
> 标签：android, broadcastreceiver, android-c2dm

如何从设备一开始就制作始终运行的广播接收器？如果不启动声明它的应用程序，这是否可能？

如果不是，我想我必须在设备启动时启动我的应用程序。但这可能会增加很多开销，而且是不需要的。

我想要这个始终运行的广播接收器，以便始终监听 c2dm 通知。这些应该通知用户应用程序中有新消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:20:57.440

如果您使用 Intent Filter 将 BroadcastReceiver 添加到 Manifest 以侦听特定 Intent，则 Receiver 在安装时将处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:18:43.323

你是什​​么意思“总是跑”？

如果您需要某样东西长时间存活，并且从操作系统启动开始，您需要：

1.  让应用程序仅安装在内部存储上（否则它将无法工作）。

2.  设置广播接收器以监听启动意图。

3.  收到引导意图后，启动服务并在那里收听您希望收听的意图。

# python - 在 Gevent 中查找 JoinableQueue 的长度

> ID：10433190
> 
> 赞同：1
> 
> 时间：2012-05-03T14:12:08.783
> 
> 标签：python, queue, gevent

我一直试图`JoinableQueue`在 Gevent 中找到 a 的长度，但它会抛出一个错误，指出队列不可迭代。

有没有办法在我开始从中弹出项目之前找出排队的项目数量。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:23:30.240

从[这里](http://www.gevent.org/gevent.queue.html)：

```
class gevent.queue.Queue(maxsize=None)
    [...]
    qsize()

        Return the size of the queue.

[...]
class gevent.queue.JoinableQueue(maxsize=None)
    A subclass of Queue 
```

所以，我认为你可以使用：`your_queue.qsize()`

# c# - Merge 2 排序时间序列算法

> ID：10433203
> 
> 赞同：1
> 
> 时间：2012-05-03T14:12:52.873
> 
> 标签：c#, algorithm, sorting, collections, merge

我有 2 个包含 Bar 对象的时间序列，每个 Bar 对象都包含一个 long 类型的成员变量，每个时间序列都存储在它自己的 BlockingCollection 中。时间序列按 long 值的升序排序。

我喜欢设计一种合并算法，它允许我删除包含相对于另一个 BlockingCollection 中相同比较元素的最低值的 long 成员变量的 Bar。

例如，如果 BlockingCollection1 中第一个 Bar (bar1) 中包含的 long 值低于 BlockingCollection2 中第一个 Bar (bar2) 中包含的 long 值，则从 BlockingCollection1 和 Add() 中的 Take() 到 MasterBlockingCollection，基本上结束使用按每个 Bar 的 long 成员变量的值排序的 Bar 对象的合并流。

我想稍后扩展到 n BlockingCollections，而不仅仅是 2。我使用了保存长值的数组以使映射更容易，但我认为在使用与此特定目标算法有关的指针时数组更方便。

我想知道是否有人可以向我指出 Linq 实现并评论这种方法的计算成本有多大。我问是因为吞吐量很重要，因为有数亿个 Bar 对象流过集合。如果有人有比使用 Linq 更聪明的想法，那将非常受欢迎。前段时间我在 DrDobbs 遇到了一些重新合并算法的想法，但再也找不到这篇文章了。如果现在还不明显，我以 C# (.Net4.0) 为目标

非常感谢

编辑：我忘了提到合并过程应该与将新项目添加到阻塞集合中的工作人员同时发生（在不同的任务上运行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:17:44.743

这是合并的一个实现。它应该在 O(cN) 时间内运行，其中 c 是集合的数量。这是你要找的吗？

```
 public static BlockingCollection<Bar> Merge(IEnumerable<BlockingCollection<Bar>> collections)
    {
        BlockingCollection<Bar> masterCollection = new BlockingCollection<Bar>();
        LinkedList<BarWrapper> orderedLows = new LinkedList<BarWrapper>();

        foreach (var c in collections)
            OrderedInsert(new BarWrapper { Value = c.Take(), Source = c }, orderedLows);

        while (orderedLows.Any())
        {
            BarWrapper currentLow = orderedLows.First.Value;
            orderedLows.RemoveFirst();

            BlockingCollection<Bar> collection = currentLow.Source;

            if (collection.Any())
                OrderedInsert(new BarWrapper { Value = collection.Take(), Source = collection }, orderedLows);

            masterCollection.Add(currentLow.Value);
        }
        return masterCollection;
    }

    private static void OrderedInsert(BarWrapper bar, LinkedList<BarWrapper> orderedLows)
    {
        if (!orderedLows.Any())
        {
            orderedLows.AddFirst(bar);
            return;
        }

        var iterator = orderedLows.First;
        while (iterator != null && iterator.Value.Value.LongValue < bar.Value.LongValue)
            iterator = iterator.Next;

        if (iterator == null)
            orderedLows.AddLast(bar);
        else
            orderedLows.AddBefore(iterator, bar);
    }

    class BarWrapper
    {
        public Bar Value { get; set; }
        public BlockingCollection<Bar> Source { get; set; }
    }

    class Bar
    {
        public Bar(long l)
        {
            this.LongValue = l;
        }
        public long LongValue { get; set; }
    } 
```

# windows-phone-7 - wp7 中的 ListBox 对我不起作用

> ID：10433208
> 
> 赞同：-1
> 
> 时间：2012-05-03T14:13:10.500
> 
> 标签：windows-phone-7, listbox

我正在尝试在 wp7 中显示一个列表视图，但由于某种原因它似乎不起作用

我的 xml

```
 <!--ContentPanel - place additional content here-->
        <StackPanel x:Name="ContentPanel2" Grid.Row="1" Margin="12,0,12,0">
            <ListBox x:Name="list">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="5">
                        <Image Source="{Binding ImageUri}" Stretch="None"/>
                        <TextBlock Text="{Binding Text}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>

    </Grid> 
```

我的 C# 代码

```
 public class list
{
    public string title { get; set; }
    public string imageSource { get; set; }
} 
```

和

```
 private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        List<list> dataSources = new List<list>();
        dataSources.Add(new list() { title = "Shacharit", imageSource = "Images/shacharit.png" });
        dataSources.Add(new list() { title = "Mincha", imageSource = "Images/mincha.png" });
        dataSources.Add(new list() { title = "Arvit", imageSource = "Images/arvit.png" });
        dataSources.Add(new list() { title = "Birkat HaMazon", imageSource = "Images/shacharit.png" });
        list.ItemsSource = dataSources;
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:49:47.100

试试下面的方法，将图像和文本块的绑定更改为绑定到您当前声明的字符串，您正在尝试绑定到 ImageURI 和 Text，并且它们在您的任何代码中都不存在。

```
 <!--ContentPanel - place additional content here-->
    <StackPanel x:Name="ContentPanel2" Grid.Row="1" Margin="12,0,12,0">
        <ListBox x:Name="list" Da>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="5">
                    <Image Source="{Binding imageSource }" Stretch="None"/>
                    <TextBlock Text="{Binding title}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel>

</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:53:43.087

为了澄清 Jon D 的答案，您正在后面的代码中创建具有“imagePath”和“title”属性的数据对象

```
new list() { title = "Shacharit", imageSource = "Images/shacharit.png" }; 
```

但试图绑定名为“ImageUri”和“Text”的属性。

在 VS 的输出窗口中，您应该会看到这些绑定错误。

以下 2 行（您在 XAML 中进行绑定的地方）应该为您解决问题......

```
<Image Source="{Binding imageSource }" Stretch="None"/>
<TextBlock Text="{Binding title}"/> 
```

# haskell - 如何在 Persistent 中定义复合键

> ID：10433212
> 
> 赞同：13
> 
> 时间：2012-05-03T14:13:23.637
> 
> 标签：haskell, persistent, yesod

如何向 Persistent 声明我有一个主键是两个字段组合的表？

例如，假设我有一个包含 first_name 和 last_name 的表，那么在 SQL 语法中，我需要类似：

```
CONSTRAINT pk_PersonID PRIMARY KEY (first_name,last_name) 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-02T05:20:35.467

您可以`Primary <field1> <field2>`按照下面的代码使用语法。

```
PrimaryCompositeWithOtherNullableFields
    foo String       maxlen=20
    bar String       maxlen=20
    baz String Maybe
    Primary foo bar   -- THIS LINE --
    deriving Eq Show
    enter code here 
```

上述代码取自[https://github.com/yesodweb/persistent/blob/master/persistent-test/src/CompositeTest.hs#L74的一项测试](https://github.com/yesodweb/persistent/blob/master/persistent-test/src/CompositeTest.hs#L74)

[这个 wiki 页面](https://github.com/yesodweb/persistent/wiki/Persistent-entity-syntax)解释了在持久化中定义模型的不同语法。它真的应该是 Yesod 书的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T09:27:18.943

请参阅[http://www.yesodweb.com/book/persistent](http://www.yesodweb.com/book/persistent)，唯一性部分

```
Person
    firstName String
    lastName String
    age Int
    PersonName firstName lastName
    deriving Show 
```

这定义了一个由 firstName 和 lastName 组成的唯一键。

# java - 序列化对象的文件扩展名

> ID：10433214
> 
> 赞同：21
> 
> 时间：2012-05-03T14:13:26.353
> 
> 标签：java, serialization, filenames, serializable

`Serializable`将对象保存到磁盘时，哪种文件扩展名最合适？

```
FileOutputStream fos = null;
ObjectOutputStream out = null;
try {
    fos = new FileOutputStream(filename);
    out = new ObjectOutputStream(fos);
    out.writeObject(mySerializableObject);
} catch (IOException ex) {
    ex.printStackTrace();
} finally {
    IOUtils.closeQuietly(out);
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-03T14:31:42.533

“.ser”是文件后缀的合理选择 - [http://www.file-extensions.org/ser-file-extension](http://www.file-extensions.org/ser-file-extension)

但是，您可能会争辩说，您使用什么后缀几乎没有什么区别……前提是它不会与其他常用的应用程序后缀发生冲突。

Java 序列化对象文件只能由在其类路径上具有相关类的 Java 应用程序读取（以正常方式）。一刀切的“.ser”后缀没有提供关于这些类可能是什么以及应用程序启动框架应该在哪里找到它们的任何线索。因此，您将无法设置 Windows 样式的文件关联来提供双击应用程序启动。

* * *

> 有没有办法可以查看或编辑“.ser”文件？

可能，但难度很大，而且只有在某些条件下。

文件的内容将高度依赖于被序列化的类。现在可以确定该类的名称，以及（在某些情况下）序列化字段的名称和类型。但是，如果该类使用自定义序列化/外部化，则表示将是二进制数据的不透明 blob，文件中没有关于如何解码的线索。不透明 blob 问题相当普遍，因为 Java SE 类库中的许多重要类都使用自定义序列化……为了提高效率……许多应用程序类也是如此。

另一种可能的方法是找到 .ser 文件中提到的所有类的 .class 文件，反序列化为对象，并使用反射来访问反序列化对象的字段。你甚至可以调整它们并重新序列化它们。但是，如果您没有所有 .class 文件的正确版本，那么这将是不可行的。

最后，使用二进制编辑器编辑“.ser”文件在技术上是可行的，但会很危险。序列化格式并非旨在支持这一点。

# svn - 仅将 SVN 修改的文件复制到另一个目录

> ID：10433215
> 
> 赞同：3
> 
> 时间：2012-05-03T14:13:29.767
> 
> 标签：svn, unix, version-control, ack

我的当前工作副本中有一个已在本地修改的文件列表。大约有 50 个文件已更改。

我可以通过这样做获得这些文件的列表：

```
svn st | ack '^M' 
```

有没有办法可以将这些文件复制到另一个目录中，并且*仅*将这些文件复制到另一个目录，该目录称为`backup`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:28:16.513

假设 ack 就像 grep ......你可以这样做：

```
cp`svn st | 确认'^M' | cut -b 8-` 备份

```

我会把它作为评论发布......但我不知道如何逃避评论中的反引号......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T06:55:39.537

```
svn status | grep '^[ADMR]' | cut -b 8- | xargs -I '{}' rsync -R  {} /directry/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:18:16.063

这会做（bash）：

```
#!/bin/bash
set -eu

# for each modified file
for f in $(svn st| awk '/^M/{print $2}'); do
    # create a directory under backup root and copy the file there
    mkdir -p .../backup/${f%/*} && cp -a $f .../backup/$f
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-02T09:37:02.793

在 Windows 8 中，可以在当前 svn 目录下使用这个命令：

```
(FOR /F "tokens=2 delims== " %i IN ('svn st ^| findstr "^[ADMR]"') DO @echo %i & echo f| xcopy /f /y %i c:\projects\backup\%i) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-22T11:01:06.740

这对我行得通：

```
svn status | grep ^M | awk '{print $2}' | xargs -I '{}' cp --parents {} /backup/ 
```

# android - 将 FragmentDialog 添加到 getSupportFragmentManager 后，标签无法立即找到它

> ID：10433216
> 
> 赞同：0
> 
> 时间：2012-05-03T14:13:30.113
> 
> 标签：android, android-fragments

你们中的任何人在将片段添加到片段管理器后都没有遇到过片段吗？当我们试图隐藏它时，它会停留在屏幕上。

从 fragment:onActivityCreated 我们显示对话框：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);

    // Push the progress dialog
    String text = getActivity().getString(R.string.httpLoadingData);
    ((BaseFragmentActivity) getActivity()).showHttpWaitingDialog(text);

    ... 
} 
```

稍后从新线程中的同一片段中我们隐藏对话框：

```
private void prepareInitialWebViewData() {
    initialFragmentWebDataLoadingThread = new Thread(new Runnable() {

        @Override
        public void run() {
            updateDataAndView();

            BaseFragmentActivity activity = (BaseFragmentActivity) getActivity();

                    BaseFragmentActivity activity = (BaseFragmentActivity) getActivity();
                    if (activity != null) 
                    {
                        activity.hideHttpWaitingDialog();
                    }

            // We don't need to keep this handle any longer since we've done
            // the work
            initialFragmentWebDataLoadingThread = null;
        }
    });

    initialFragmentWebDataLoadingThread.start();
} 
```

这是在我们的 BaseFragmentActivity 中找到的用于显示和隐藏的代码。请注意，可能会多次调用 showdialog，因此我们保留一个 refcount。

首先是show函数：

```
public void showHttpWaitingDialog(CharSequence title)
{
    synchronized (mRefCount)
    {
        mRefCount++;

        Log.w("showhideHttpWaitingDialog", "++mRefCount:" + mRefCount + ", Title:" + title);

        FragmentManager fm = getSupportFragmentManager();
        if (fm != null)
        {
            Fragment frag = fm.findFragmentByTag("httpWaitDialog");

            if (frag == null)
            {
                WaitingOnHttpFragmentDialog dialog = WaitingOnHttpFragmentDialog.newInstance(title);

                fm.beginTransaction().add(dialog, "httpWaitDialog").commit();
            }
        }
        else
            Log.w("showhideHttpWaitingDialog", "fragman == null");
    }
} 
```

然后隐藏功能：

```
public void hideHttpWaitingDialog()
{
    synchronized (mRefCount)
    {
        Log.w("showhideHttpWaitingDialog", "--mRefCount:" + mRefCount);

        if (mRefCount < 0)
        {
            Log.w("showhideHttpWaitingDialog", "Why are you trying to hide something that doesn't exists?");
            mRefCount = 0;
        }
        else
        {
            if (mRefCount == 0)
            {
                FragmentManager fragman = getSupportFragmentManager();
                if (fragman != null)
                {
                    Fragment frag = fragman.findFragmentByTag("httpWaitDialog");

                    if (frag != null)
                    {
                        fragman.beginTransaction().remove(frag).commit();
                        Log.w("showhideHttpWaitingDialog", "dismissed normally");
                    }
                    else
                        Log.w("showhideHttpWaitingDialog", "httpWaitDialog not found!");
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:06:21.527

我可以告诉你你的问题是什么......你不能在除了 UI 线程之外的任何其他线程中更新 UI。

我不知道如何自己修复它，但快速搜索会发现以下可能有用的问题。

[所以问题1](https://stackoverflow.com/questions/4369537/update-ui-from-thread)

[所以问题2](https://stackoverflow.com/questions/6223389/do-some-android-ui-stuff-in-non-ui-thread)

第二个似乎更接近于您当前的代码。

# ios - ipad1 vs ipad2：使用 OpenGL 的不同渲染结果

> ID：10433220
> 
> 赞同：0
> 
> 时间：2012-05-03T14:13:50.747
> 
> 标签：ios, ipad, opengl-es-2.0, ipad-2

当我在 ipad1 上运行我的应用程序时，我看到的结果与在 ipad2 上运行相同的应用程序时不同。我对屏幕中间的书本大小感兴趣。

[iPad1 结果](https://docs.google.com/open?id=0B7GtgDpKUdBzQWVvRWp2WE1XMlE)

[iPad2 结果](https://docs.google.com/open?id=0B7GtgDpKUdBzNkFQX09haktDV0U "iPad1 结果")

我的代码如下。

```
- (void)drawGallery{

glDepthFunc(GL_LESS);
glEnable(GL_DEPTH_TEST);

ResourceManager *rm = [ResourceManager sharedInstance];
GLuint currProgram = [rm getProgram:PROGRAM_BASIC_LIGHTNING];

glUseProgram(currProgram);

glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
glViewport(0, 0, 768, 1024 + 2 * GALLERY_OFFSET_Y);

GLfloat modelviewProj[16];

for (Sheet *sh in self.interfaceManager.gallery.sheets){

    if ([self.interfaceManager.gallery shouldDrawSheet:sh]){

        [self MakePerspectiveMatrix:modelviewProj 
                            OriginX:0.0 
                            OriginY:0.0 
                              Width:SCREEN_WIDTH 
                             Height:SCREEN_HEIGHT
                           Rotation:sh.rotation
                       TranslationX:sh.translationX 
                       TranslationZ:sh.translationZ
                             ScaleX:1.0
                             ScaleY:SCREEN_HEIGHT/(SCREEN_HEIGHT + 2 * GALLERY_OFFSET_Y)];

        vertexDataTextured *model;
        if (sh.type == SHEET_TYPE_LEFT){
            model = (vertexDataTextured *)[rm getModel:MODEL_SHEET_LEFT];
        } else {
            model = (vertexDataTextured *)[rm getModel:MODEL_SHEET_RIGHT];
        }

        // update uniform values

        glUniformMatrix4fv(basic_lighting_uniforms[BASIC_LIGHTING_UNIFORM_MODEL_VIEW_PROJECTION_MATRIX], 1, GL_FALSE, modelviewProj);

        glUniform1f(basic_lighting_uniforms[BASIC_LIGHTING_UNIFORM_ROTATION], degreeToRadians(-sh.rotation));

        glActiveTexture(GL_TEXTURE0);
        GLuint texture = [rm getTexture:TEXTURE_COLORING_PICTURE Index1:self.currentBook.number Index2:sh.number];
        glBindTexture (GL_TEXTURE_2D, texture);

        glUniform1i(basic_lighting_uniforms[BASIC_LIGHTING_UNIFORM_TEXTURE], 0);

        glVertexAttribPointer(BASIC_LIGHTING_ATTRIB_VERTEX, 3, GL_FLOAT, GL_FALSE, sizeof(vertexDataTextured), &model[0].vertex);
        glEnableVertexAttribArray(BASIC_LIGHTING_ATTRIB_VERTEX);

        glVertexAttribPointer(BASIC_LIGHTING_ATTRIB_TEX_COORDS, 2, GL_FLOAT, GL_FALSE, sizeof(vertexDataTextured), &model[0].texCoord);
        glEnableVertexAttribArray(BASIC_LIGHTING_ATTRIB_TEX_COORDS);

        glDrawArrays(GL_TRIANGLES, 0, 6);  

        if (![self validateProgram:currProgram]) {
            NSLog(@"Failed to validate program: (%d)", currProgram);
        }
    }
}
} 
```

顶点着色器：

```
uniform mat4 modelViewProjectionMatrix;
uniform float rotation;
attribute lowp vec3 position;
attribute lowp vec2 texCoords;
varying lowp vec2 fTexCoords;
varying lowp vec4 computed_color;

void main()
{ 
    fTexCoords = texCoords;

    vec4 postmp = vec4(position.xyz, 1.0);
    vec4 newposition = modelViewProjectionMatrix * postmp;
    gl_Position = newposition;

    vec3 ambient_color = vec3(0.5, 0.5, 0.5);
    vec3 norm = vec3(sin(rotation), 0.0, cos(rotation));

    vec3 light_position1 = vec3(15.0, 0.0, 20.0);
    vec3 light_direction1 = normalize( vec3 (0.2, 0.0, 1.0) );
    vec4 light_diffuse_color1 = vec4 (0.4, 0.4, 0.4, 1.0);
    float ndotl1 = max(0.0, dot(light_direction1, norm));
    vec4 temp_color1 = ndotl1 * light_diffuse_color1 * 15.0 / (length(light_position1 - newposition.xyz));

    vec3 light_position2 = vec3(-30.0, 0.0, 25.0);
    vec3 light_direction2 = normalize( vec3(-0.2, 0.0, 1.0) );
    vec4 light_diffuse_color2 = vec4 (0.5, 0.5, 0.5, 1.0);
    float ndotl2 = max(0.0, dot(light_direction2, norm));
    vec4 temp_color2 = ndotl2 * light_diffuse_color2 * 15.0 / (length(light_position2 - newposition.xyz));

    computed_color = vec4(temp_color1.rgb + temp_color2.rgb + ambient_color, 1.0);
} 
```

片段着色器：

```
precision lowp float;
uniform sampler2D texture;
varying vec2 fTexCoords;
varying lowp vec4 computed_color;

void main()
{
    gl_FragColor = texture2D(texture, fTexCoords) * computed_color;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:16:01.870

问题在于位置的低精度。感谢布拉德·拉森。

# html - 当我播放 HTML5 mp3 文件时，为什么 Firefox 不在 HTTP 标头中发送 Referer？

> ID：10433222
> 
> 赞同：4
> 
> 时间：2012-05-03T14:13:55.910
> 
> 标签：html, firefox, browser, header, http-headers

当我通过 HTML5 访问 MP3 文件时，我遇到的问题是 Firefox 没有在 HTTP 标头中发送引用者。

我正在使用来自 jPlayer.org 的播放器来播放 mp3 文件，并且我试图通过从 HTTP-sniffer/FireBug/similar 读取 URL 来阻止人们下载歌曲。我的方法是检查我的 .htaccess 文件中的 HTTP 标头：

```
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC]
RewriteRule ^play/(\S+)$ /uploads/error.mp3
RewriteRule ^play/(\S+)$ /uploads/mp3/$1.mp3 
```

如果 HTTP-referer 未设置为 mydomain.com，则这三行告诉浏览器播放 error.mp3。否则，它会得到真正的 mp3 文件。

这在 Chrome、Internet Explorer 7/8/9、Safari(PC) 和 Opera 中运行良好。但是，在 Firefox（PC 和 Mac）和 Safari (Mac) 中，它不起作用。这似乎是因为根本没有发送 HTTP 引用。当我查看 FireBug 时，我在 Request-headers 中的任何地方都看不到Referer，所以我猜它根本没有发送？当我查看 Web 开发人员工具中的“网络”选项卡时，我可以在 Chrome 中看到它。

还有其他人熟悉这个问题吗？您知道如何阻止 MP3 文件的下载或至少使其更难下载吗？通过 PHP 传递 MP3 文件似乎不起作用，因为暂停/恢复不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:34:14.620

我不相信 Firefox 支持 HTML5 音频中的 MP3 格式。也许你也应该用 ogg 文件试试这个代码？

请参阅[HTML 音频和视频元素支持的媒体格式](https://developer.mozilla.org/en-US/docs/Media_formats_supported_by_the_audio_and_video_elements)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:43:45.703

就像 tim 所说，Firefox 不支持 HTML5 [http://caniuse.com/#search=audio](http://caniuse.com/#search=audio)中的 MP3，在这种情况下，您应该回退到 oog 或 wav。

当然，您说您正在使用来自 jplayer.org 的播放器，它具有 Flash 后备功能，在这种情况下，我们不再真正处理 html5。

jPlayer 支持的 html5 格式 [http://www.jplayer.org/latest/developer-guide/#reference-html5-audio-format](http://www.jplayer.org/latest/developer-guide/#reference-html5-audio-format)

**HTML5 音频格式**

*   Firefox (OSX, Win): WEBMA, OGA
*   Safari (OSX, Win): MP3, M4A
*   移动 Safari iOS4（iPad、iPhone、iPod）：MP3、M4A
*   Opera (OSX, Win): WEBMA, OGA
*   Chrome (OSX, Win): WEBMA, OGA, MP3, M4A
*   IE9（Win）：MP3、M4A（可以安装WebM编解码器。）

因此，您的标题内容很可能与不支持 mp3 的 FF 有关。

它也可能是一些奇怪的东西，比如服务器上缺少 mime 类型。再一次，如果我们是合乎逻辑的，浏览器发出的任何请求都应该伴随一个引荐来源网址，无论它是否请求它支持的文件..hmm。

您可以尝试的一件事是，与其直接链接 mp3，不如给它一个 id，并为此向您的服务器发出请求，然后通过重定向返回一个 mp3。

为了理智起见..用oog/wav对其进行测试，并删除您的推荐人检测..只是为了确保它完全有效:)

也就是说，如果你真的关心水蛭，我不会对推荐人信息过于重视，因为这在 FF 和 Chrome 中都很容易被欺骗。使用手工制作的 http 客户端（大多数语言中只需几行代码），您几乎可以欺骗任何东西：cookie、引荐来源网址、跨域策略以及诸如此类的东西 ..不管怎样都离题了 :)

但是，是的，推荐人信息将保护您免受 95% 的人口的伤害。

# r - 是否有任何工具或 IDE 来调试 R 包并逐步运行它？

> ID：10433223
> 
> 赞同：5
> 
> 时间：2012-05-03T13:53:29.623
> 
> 标签：r

我对一些 R 包感兴趣，想了解它是如何工作的，是否有任何工具可以逐步运行包中的方法并打印中间输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:16:27.333

前两个答案已经告诉您基本 R 和附加包可以做什么。

就 IDE 而言，您有两种选择：

1.  Eclipse的[StatET 插件为此](http://www.walware.de/goto/statet)提供了一些功能（我没有使用过）。

2.  ESS for Emacs 集成了最新的 ESS 版本`ess-tracebug`，它也可以做到这一点。这是[ess-tracebug 仍然是第三方项目](http://code.google.com/p/ess-tracebug/)而不是[ESS](http://ess.r-project.org)的一部分时的一些文档。虽然我是 ESS 用户，但我还没有尝试过。

以下是 ess-tracebug 的帮助，说明它可以做什么：

```
Documentation:

Default ess-tracebug key bindings:

* Breakpoints:

 b   . Set BP (repeat to cycle BP type) . `ess-bp-set'
 B   . Set conditional BP               . `ess-bp-set-conditional'
 k   . Kill BP                          . `ess-bp-kil'
 K   . Kill all BPs                     . `ess-bp-kill-all'
 t   . Toggle BP state                  . `ess-bp-toggle-state'
 l   . Set logger BP                    . `ess-bp-set-logger'
 C-n . Goto next BP                     . `ess-bp-next'
 C-p . Goto previous BP                 . `ess-bp-previous'

* General Debugging:

 `   . Show R Traceback                     . `ess-show-R-traceback'
 e   . Toggle error action (repeat to cycle). `ess-dbg-toggle-error-action'
 d   . Flag for debugging                   . `ess-dbg-flag-for-debugging'
 u   . Unflag for debugging                 . `ess-dbg-unflag-for-debugging'
 w   . Watch window                         . `ess-watch'

* Navigation to errors (emacs general functionality):

 C-x `, M-g n   . `next-error'
 M-g p          . `previous-error'

* Interactive Debugging:

 c   . Continue                  . `ess-dbg-command-c'
 n   . Next step                 . `ess-dbg-command-n'
 p   . Previous step             . `previous-error'
 q   . Quit debugging            . `ess-dbg-command-Q'
 1..9\. Enter recover frame       . `ess-dbg-command-digit'
 0   . Exit recover (also q,n,c) . `ess-dbg-command-digit'

* Input Ring:

 i   . Goto input event marker forwards     . `ess-dbg-goto-input-event-marker'
 I   . Goto input event marker backwards    . `ess-dbg-goto-input-event-marker'

* Misc:
 s   . Source current file  . `ess-tracebug-source-current-file'
 ?   . Show this help       . `ess-tracebug-show-help' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T14:15:45.180

有调试包，结合 mtrace 功能。还有一个新的 Eclipse 调试模块（正如 Dirk 在他的回答中提到的那样），将来可能会在 Rstudio 中添加类似的功能。一旦这些到位，问题将是如何让他们调试相关功能。这基本上意味着获取您感兴趣的所有功能的列表并跟踪它们。

ps：你可以看看这个 - [http://www.r-bloggers.com/what-does-this-package-look-like/](http://www.r-bloggers.com/what-does-this-package-look-like/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T14:02:49.397

我认为 R 指令会让你做你想做的事`debug`。`browser`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T16:07:25.857

Revolution R 中的 IDE 包括方便的可视化调试功能，类似于 MS Visual Studio 中的功能。尽管该软件是专有的并且需要支付许可费用，但您始终可以下载免费的学术版本。

[http://www.revolutionanalytics.com/downloads/free-academic.php](http://www.revolutionanalytics.com/downloads/free-academic.php)

# sql - 内联标量函数：实数还是汽化件？

> ID：10433225
> 
> 赞同：19
> 
> 时间：2012-05-03T14:14:01.703
> 
> 标签：sql, sql-server, tsql, user-defined-functions

在 SQL Server中创建**内联标量函数的正确语法是什么？**

Books Online，在[Types of Functions](http://msdn.microsoft.com/en-us/library/ms177499%28v=sql.90%29.aspx)章节（2005 年及以上）中，讨论了内联标量函数，就好像它们存在并且好像不需要`BEGIN...END`块（与多行函数相比）：

> 对于内联标量函数，没有函数体；标量值是单个语句的结果。对于多语句标量函数，在 BEGIN...END 块中定义的函数体包含一系列返回单个值的 Transact-SQL 语句。

我还注意到spt_values 表的对象类型列表中有一行*“IS：内联标量函数” ：*

```
SELECT name
FROM master..spt_values
WHERE type = 'O9T'
AND name LIKE '%function%' 
```

我试图创建这样的功能但没有成功：

```
CREATE FUNCTION AddOne(@n int) RETURNS int
AS
    RETURN @n + 1 
```

错误信息是

> 消息 102，级别 15，状态 31，过程 AddOne，第 3 行“返回”附近的语法不正确。

是我遗漏了什么还是联机丛书中有错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T14:53:36.273

好吧，AFAIK，不存在（甚至在隐藏的 [ **mssqlsystemresource** ] 数据库中也不存在），并且没有创建语法的语法。因此，这似乎是微软在 SQL Server 2005 的准备阶段通过为其添加类型（和文档！）而预期的东西，但由于某种原因从未真正实现过。

尽管它是所有 Ms Sql Server 最需要的功能之一。主要是因为默认的 UDF 太慢了，我们最终不得不后端 ITVF 来获得相同的效果。（困难且笨拙，但它有效）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-02T18:36:02.483

正确，没有内联标量函数这样的东西。可以通过使用内联 TVF 进行“模拟”，但是，任何“客户端”的语法都需要更改。1）创建他的功能：

```
 create function dbo.AddOne(@input int) returns table as return (select @input + 1 as value); 
```

2）在“客户端”代码中，执行此操作...

```
 (select value from dbo.AddOne(Column)) as ColumnPlusOne 
```

现在你有一个正常工作的内联标量函数。

我不得不这样做来替换我的客户端代码中的许多标量 UDF，看起来像这样......

```
create function dbo.GetLookupID(@code varchar(50)) returns int
as
begin
    declare @return int;
    select @return = LookupID from dbo.Lookups where Code = @code;
    return @return;
end; 
```

我尝试通过删除变量来修复它...

```
create function dbo.GetLookupID(@code varchar(50)) returns int
as
begin
    return (select LookupID from dbo.Lookups where Code = @code);
end; 
```

这是一个改进，但是，仍然存在令人不快的性能打击。当我更改为 iTVF 并更改调用约定时……它变得更好了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-05T18:12:01.777

从 SQL Server 2019 CTP2.1 开始，有一个称为“标量 UDF 内联”的新功能，可以在满足某些先决条件时自动内联标量 UDF。

介绍该功能的官方博文在这里：[https ://blogs.msdn.microsoft.com/sqlserverstorageengine/2018/11/07/introducing-scalar-udf-inlining/](https://blogs.msdn.microsoft.com/sqlserverstorageengine/2018/11/07/introducing-scalar-udf-inlining/)

描述该功能的详细文档在这里： [https ://docs.microsoft.com/en-us/sql/relational-databases/user-defined-functions/scalar-udf-inlining?view=azuresqldb-current](https://docs.microsoft.com/en-us/sql/relational-databases/user-defined-functions/scalar-udf-inlining?view=azuresqldb-current)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T14:43:29.023

我看到同样的事情。这句话似乎是对“内联标量函数”的唯一引用。[本文](http://www.sqlmag.com/article/sql-server/inline-scalar-functions)声称内联表值函数可以足够快地完成这项工作。

# mysql - MySQL子查询从一个表中获取ID列表以查询第二个表

> ID：10433233
> 
> 赞同：0
> 
> 时间：2012-05-03T14:14:28.313
> 
> 标签：mysql, subquery

我有两张桌子，一张是`products`一张`salesRecords`

我正在使用这个查询：

```
SELECT 
    DAY(FROM_UNIXTIME(saleDate)) as day,
    MONTH(FROM_UNIXTIME(saleDate)) as mnth,
    YEAR(FROM_UNIXTIME(saleDate)) as yr,   
    COUNT(id) as invCount, SUM(quantity) as qty 
 FROM salesRecords WHERE itemNo IN 
      (SELECT GROUP_CONCAT(convert(id, CHAR(8))) as ids FROM products WHERE brand =100 GROUP by brand) 
    GROUP BY 
       mnth, yr 
    ORDER BY saleDate 
```

products 表包含我需要了解的有关产品的所有信息，而 salesRecords 包含诸如 saleDate、已售数量、给予的折扣等详细信息，所以我在这里尝试实现的是所有具有品牌 ID`100`的产品的销售列表来自名为“saleDate”的 Unix 时间字段的月份和年份

它可以工作，但速度很慢。

任何人都可以建议一种更快的方法吗？

如果我手动将 ID 列表插入到查询中，它似乎工作得更快，那么我应该运行两个查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:19:04.570

我已经用一个内部联接重写了您的查询。试试看，然后回来新闻：

```
SELECT 
    DAY(FROM_UNIXTIME(saleDate)) as day,
    MONTH(FROM_UNIXTIME(saleDate)) as mnth,
    YEAR(FROM_UNIXTIME(saleDate)) as yr,   
    COUNT(id) as invCount, 
    SUM(quantity) as qty 
 FROM salesRecords s inner join 
      products on s.itemNo = p.id 
 WHERE 
      p.brand =100
 GROUP BY 
       `day`, mnth, yr 
 ORDER BY 
       saleDate 
```

此外，为了避免 where 子句，您可以在`on`操作中使用限制：

```
 ...
    SUM(quantity) as qty 
 FROM salesRecords s inner join 
      products on p.brand =100 and s.itemNo = p.id 
 GROUP BY 
    ... 
```

# xcode - 应用程序失败的代码设计

> ID：10433236
> 
> 赞同：1
> 
> 时间：2012-05-03T14:14:37.300
> 
> 标签：xcode, ios5, xcode4, xcode4.2

我正在为此拉头发，但仍然找不到问题所在。基本上，我有一个准备启动的应用程序，但每当我存档和构建时，我都会收到“应用程序失败的代码设计”警告。

这是代码签名：

![代码签名截图](../Images/3625c749a71bad69434658b3090fb216.png)

这是我得到的警告： ![警告截图](../Images/b46a39759a2b6b95b69cd8b695ac6d12.png)

这是我的钥匙串，所有证书都处于活动状态： ![钥匙串截图](../Images/a328ad75bfe83ddf46555b65f2d32913.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:37:46.053

确保使用分发证书而不是开发证书对发布配置进行签名。

# maven - 使用 JRebel 运行时更改 Maven 配置文件

> ID：10433239
> 
> 赞同：0
> 
> 时间：2012-05-03T14:14:52.557
> 
> 标签：maven, jrebel, maven-profiles

我刚刚开始使用 JRebel。在我当前的设置中，从 Eclipse 启动 JBoss 实例，我使用命令行 maven 进行部署。我想知道当我需要从 test-A 配置文件更改为 test-B 配置文件时，是否有可能避免重新部署。此处使用配置文件来设置多个配置值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:03:30.870

如果您使用的是 JRebel，则应该忘记 Maven，因为每次更改后都无需构建包。如果配置文件仅用于配置，为什么不直接对配置文件进行更改？根据配置文件的性质，这些可以由 JRebel 处理。那些配置文件是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:54:41.337

您不能更改已经运行的 Maven 实例的配置文件。但是您可以使用系统属性在 Maven 启动时激活特定配置文件。

# jquery - jQuery UI 的 sortable 函数的奇怪行为：不是函数

> ID：10433247
> 
> 赞同：0
> 
> 时间：2012-05-03T14:15:21.090
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在为我的一个项目使用 jQuery UI 的 sortable。现在，在调用更新方法之前一切都很好。代码如下所示：

```
$(document).ready(function() {
    $('#menu_sections').sortable({
        cursor: 'move',
        update: function(event, ui) {
            var new_order = $(this).sortable('serialize');
        }
    });
}); 
```

可排序的工作完全正常，项目是可排序的。但是，当我更改一项的位置时，会调用更新事件，并在 Firebug 的控制台中收到以下消息：

```
$("#menu_sections").sortable is not a function
var new_order = $('#menu_sections').sortable('serialize'); 
```

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:20:43.353

您需要在外部范围内定义一个指针。

```
update: function(event, ui) {
    var new_order = $(this).sortable('serialize');
    } 
```

在您的更新回调中，“this”并不指向您想要的“this”。

# c# - CDO 电子邮件配置

> ID：10433248
> 
> 赞同：1
> 
> 时间：2012-05-03T14:15:26.787
> 
> 标签：c#, email, configuration, cdo.message

我正在尝试使用 CDO 发送电子邮件。我想将设置更改为始终从具有特定用户、传递和来自的特定 smtp 服务器发送。但是，当我尝试更改配置时，我收到一个错误，即数据是只读的。您如何更改消息的配置？

```
Message msg = new Message();
            IConfiguration config = msg.Configuration;
            config.Fields["smtpserver"] = "SERVER";
            msg.Subject = "TEST";
            msg.From = "FROM@FROM.com";
            msg.To = "TO@TO.com";
            msg.TextBody = "TESTING";
            msg.Send(); 
```

我尝试过使用`System.Net.Mail`，但这似乎被防火墙阻止了。我收到异常消息`Unable to connect to the remote server : No connection could be made because the target machine actively refused it {IP}:67`

```
MailMessage msg = new MailMessage();
            msg.Subject = "TESTING";
            msg.From = new MailAddress("MYMAIL@MYMAIL.org");
            msg.To.Add(new System.Net.Mail.MailAddress("TOMAIL@TOMAIL.org"));
            msg.Body = "dubbly doo";

            SmtpClient client = new SmtpClient();
            client.Host = "HOST";
            client.Port = 67;
            client.EnableSsl = true;
            client.Credentials = new NetworkCredential("USERNAME", "PASSWORD", "DOMAIN");
            client.DeliveryMethod = SmtpDeliveryMethod.Network;
            try
            {
                client.Send(msg);
            }
            catch(SmtpException e)
            {
                Console.Write(e.InnerException.Message+":"+e.InnerException.InnerException.Message);
                Console.ReadLine();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:43:25.230

使用 CDO 是必需的吗？您已经在使用 C#，因此我建议将您的 CDO 代码移植到`System.Net.Mail`.

[http://msdn.microsoft.com/en-us/library/dk1fb84h.aspx](http://msdn.microsoft.com/en-us/library/dk1fb84h.aspx)

编辑：

由于在评论中听起来好像您遇到了配置问题`System.Net.Mail`，因此我会在您逐步执行 CDO 代码时使用一些 SysInternals 工具（特别是[TcpView](http://technet.microsoft.com/en-us/sysinternals/bb897437)）来监控您的连接。这样您就可以看到您的代码用于连接的 IP 和端口。

然后有了这些信息，您应该能够`System.Net.Mail`使用正确的设置配置您的代码。

# jquery - CSS IE Dropdown 扩展 onclick 修复

> ID：10433249
> 
> 赞同：0
> 
> 时间：2012-05-03T14:15:26.880
> 
> 标签：jquery, css

所以我发现这个修复了点击时在 IE 中展开的下拉菜单

```
if ($j.browser.msie && $j.browser.version < 9)
    $j("#partDropdown,#categoryDropdown")
        .live("focus mouseover", function() { $j(this).addClass('expand').removeClass('clicked'); })
        .live('click', function() { $j(this).toggleClass('clicked'); })
        .live('mouseout', function() {
            if (!$j(this).hasClass('clicked')) {
                $j(this).removeClass('expand');
            }
        })
        .live('blur', function() { $j(this).removeClass('expand clicked'); }); 
```

其中也有以下css

```
.expand select
{
    width: auto !important;
} 
```

但是从来没有点击过的CSS？需要吗？还是 jquery 只是添加一个空的 clicked 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:30:05.733

`clicked`-class 用于防止在单击该元素后“鼠标外出”时崩溃：

```
if (!$j(this).hasClass('clicked')){...} 
```

这就是你需要这门课的全部。您不必在 CSS 中为此类指定任何规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:30:38.603

您可以使用未在任何 CSS 文件或`<style>`标签中定义的 CSS 类，它们只是不会更改标签的呈现方式。

实际上，将元数据附加到您的标签是一种非常常见的做法，因为它们很容易添加和删除，而且查询起来也很简单（例如，您可以在 jQuery 等中使用选择表达式）。在这种情况下，`clicked`该类用于保留下拉菜单是否已被单击，否则将需要混乱的全局变量（或棘手的 lambda 函数）。

# svn - 从他们的 SVN 中检查 Lucene

> ID：10433250
> 
> 赞同：0
> 
> 时间：2012-05-03T14:15:41.907
> 
> 标签：svn, lucene

我正在尝试从他们的 svn 中检查 lucene。我已经为 Eclipse 安装了 Subeclipse 插件，但是，我在连接到 svn 存储库时遇到了问题。

我得到的错误如下：

```
Bad URL passed to RA layer
svn: URL 'http://svn.apache.org/repos/asf/lucene/dev/trunk%20lucene_trunk' non-existent in revision 1333463 
```

你能帮我解决吗。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:21:21.820

试试： http: [//svn.apache.org/repos/asf/lucene/dev/trunk/lucene](http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene)

# events - 时间线、事件监听器、清理

> ID：10433255
> 
> 赞同：0
> 
> 时间：2012-05-03T14:15:52.090
> 
> 标签：events, actionscript

如果我在前几帧的时间轴上有一个按钮，但随后我将其删除...

如果按钮已从舞台上移除，我是否需要担心移除按钮 (MovieClip) 的事件侦听器？

即使我在时间轴上使用对象，我也在编写一个文档类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:05:16.320

您可以使用 removedFromStage 事件来清除按钮实例上的任何事件侦听器：

```
package 
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class Button extends MovieClip
    {
        public function Button():void
        {
            addListeners();
        }

        private function addListeners():void
        {
            this.addEventListener(Event.ADDED_TO_STAGE, addedHandler);
            this.addEventListener(Event.REMOVED_FROM_STAGE, removedHandler);
            this.addEventListener(MouseEvent.CLICK, clickHandler);
        }

        private function addedHandler(event:Event):void
        {
            trace("button added");
        }

        private function removedHandler(event:Event):void
        {
            trace("button removed");
            removeListeners();
        }

        private function clickHandler(event:MouseEvent):void
        {
            trace("button clicked");
        }

        private function removeListeners():void
        {
            this.removeEventListener(Event.ADDED_TO_STAGE, addedHandler);
            this.removeEventListener(Event.REMOVED_FROM_STAGE, removedHandler);
            this.removeEventListener(MouseEvent.CLICK, clickHandler);

            trace("has added listener: " + this.hasEventListener(Event.ADDED_TO_STAGE)); 
            trace("has removed listener: " + this.hasEventListener(Event.REMOVED_FROM_STAGE));
            trace("has click listener: " + this.hasEventListener(MouseEvent.CLICK));
        }
    }
} 
```

# asp.net-mvc - 使用 linq To sql 进行高级搜索

> ID：10433259
> 
> 赞同：0
> 
> 时间：2012-05-03T14:16:00.997
> 
> 标签：asp.net-mvc, linq, linq-to-sql, ado.net

我正在开发我的第一个 ASP.net MVC 应用程序，在这个应用程序中，我需要搜索简单和高级类型：

> 需要简单搜索 olny dd、df 和 gov
> 高级搜索用户有更多选项，即使在高级搜索中 dd、df 和 gov 是必填字段。

所以这是我的搜索操作

```
[HttpPost]
    public ActionResult search(LogModel.Search soption)
    {
        // this part will not change the same in simple and advenced
        DateTime dd1 = soption.dd;
        DateTime df1 = soption.df;
        var model = (from p in entity.vehicule                        
                     where p.agence.idgov == soption.gov
                     where !p.indisponible.Any(b => (dd1 >= b.Dd && dd1 <= b.Df) || (df1 >= b.Dd && df1 <= b.Df))
                     where !p.indisponible.Any(c => (c.Dd >= dd1 && c.Dd <= df1) || (c.Df >= dd1 && c.Df <= df1))
                     select p).ToList();

        // here i want to add my filtring action advanced search
        if (!soption.mark)
            model = model.Any(b => b.idmarque == soption.mark );

        return View(model);

    } 
```

简单的搜索模式工作得很好，但现在我正在尝试实现高级搜索，这就是我的想法：

> **如果**model.myVar 不为空（这意味着用户放了一些东西）
> **，那么**我将从我的原则模型搜索请求中过滤一些结果。

所以我想知道我是否正确？这条线也用红色下划线：

```
model = model.Any(b => b.idmarque == soption.mark ); 
```

无法将 bool 类型转换为 Systeme.collection.generic.list

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:19:38.810

只需再次使用 where 子句

```
if (!soption.mark) 
            model = from x in model
                    where (b => b.idmarque == soption.mark )
                    select x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:24:44.163

模型的 Any() 方法返回 bool。你可以试试 select()

# c# - 包含成员字段的对象映射器

> ID：10433261
> 
> 赞同：1
> 
> 时间：2012-05-03T14:16:11.560
> 
> 标签：c#, .net, mapping, automapper

除了属性之外，是否有任何对象-对象映射器支持与公共成员变量的映射？

我想使用映射解决方案，不幸的是我不控制对象图一侧的代码。

```
 public class Source
    {
        public string A_String { get; set; }
        public int A_Number { get; set; }
    }
    public class ICantControlThisClass
    {
        public string A_String;
        public int A_Number;
    } 
```

AutoMapper 或 ValueInjecter 或任何其他 OO Mapper 可以做到这一点：

```
 var source = new Source() { A_String = "hi", A_Number = 10 };
    var target = new ICantControlThisClass();
    Mapper.Map(source, target); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:33:23.000

你可以这样做。只需创建地图

```
Mapper.CreateMap<Source, ICantControlThisClass>(); 
```

Automapper 将完成剩下的工作：

```
var source = new Source() { A_String = "hi", A_Number = 10 };
var target = Mapper.Map<ICantControlThisClass>(source); 
```

# java - 保护 Java webapp（使用 JAX-RS）免受过大的 HTTP 请求

> ID：10433265
> 
> 赞同：1
> 
> 时间：2012-05-03T14:16:26.927
> 
> 标签：java, jersey, jax-rs

我有一个 JAX-RS 1.1 资源`FooBar`，它有一个接受`String`POST 参数的方法，如下所示

```
@Path("/foobar")
public class FooBar {

  @POST
  public void doSomething(@FormParam("name") String name) {
    //...
  }
} 
```

如果`name`长于指定的最大值，是否可以保护它不被调用？我想知道如果名称的大小为 1GB，它会做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:45:00.443

通常，您可以在 ServletContainer 上配置发布请求的最大大小。例如，Tomcat`maxPostSize`在 httpConnector 指令中有设置。默认情况下，它在 Tomcat 中为 2 mb 左右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:45:00.650

通常您会使用过滤器。这是[Grails](http://grails.org/doc/2.0.x/ref/Plug-ins/filters.html)中的一个示例，[以及 Ruby](http://guides.rubyonrails.org/action_controller_overview.html#filters)中的一个示例。这是一个教程，将展示如何在[Jersey](http://docs.oracle.com/cd/E19182-01/821-0540/ug_restbc-filters_p/index.html)中执行此操作。

# rtsp - RTSP 到 Flash 媒体服务器

> ID：10433267
> 
> 赞同：1
> 
> 时间：2012-05-03T14:16:34.560
> 
> 标签：rtsp, rtmp, flash-media-server

我有一个实时 RTSP h.264 720p 8Mb 流，我需要将其连接到流媒体提供商的 Flash 媒体服务器。我目前必须流式传输到我的提供商的 FMS 的唯一方法是通过 Adob​​e 的“Flash Media Live Encoder”，它与我们的 SD 模拟采集卡配合得很好，可以进行实时流式传输。
我可以使用 VLC 打开和重新流式传输 RTSP 流，但是 VLC 不会将 RTMP 流式传输到 Flash 媒体服务器。关于如何在不通过模拟孔的情况下做到这一点的任何想法？

# c++ - 使用 luabind 和 std::shared_ptr 进行继承

> ID：10433273
> 
> 赞同：9
> 
> 时间：2012-05-03T14:16:43.680
> 
> 标签：c++, c++11, lua, shared-ptr, luabind

我有一个依赖`std::shared_ptr`很多的 API（一个特定的 GUI 库），即它们通常用作函数参数并存储在其他对象中。例如，容器小部件（如拆分器和框）会将其子小部件存储在`shared_ptr`s 中。现在我想通过 luabind 将此 API 映射到 Lua。在理想情况下，Luabind 会在 shared_ptr 中创建新对象，并允许我将这些对象直接传递给采用 shared_ptr 参数的函数。这似乎适用于单个课程，例如：

```
luabind::class_<Button, std::shared_ptr<Button>>("Button") 
```

虽然我这样声明它，但我可以公开和使用`void foo(std::shared_ptr<Button> const&)`.

现在 luabind 手册提到，为了使用类的层次结构，我必须对层次结构中的所有类使用相同的 shared_ptr 模板实例，例如

```
luabind::class_<BaseWidget, std::shared_ptr<BaseWidget>>("BaseWidget"),
luabind::class_<Button, BaseWidget, std::shared_ptr<BaseWidget>>("Button") 
```

现在我不能再调用`foo`了——它将无法从 Lua 中找到函数。我能以某种方式让 luabind 仍然支持在`shared_ptr`s 中传递按钮吗？另外，我想知道为什么 luabind 要求您对层次结构中的所有类使用相同的智能指针，而不是仅仅将它们转换为基类指针。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T14:42:36.523

我认为要让它工作，你必须像这样绑定你的派生类：

```
luabind::class_<Button, BaseWidget, std::shared_ptr<Button>> ("Button") 
```

例如：

```
class BaseWidget
{
public:
    static void Bind2Lua(lua_State* l)
    {
        luabind::module(l)
        [
            luabind::class_<BaseWidget, std::shared_ptr<BaseWidget>> ("BaseWidget")
            .def(luabind::constructor<>())
        ];
    }

    virtual ~BaseWidget()
    {

    }
};

class Button : public BaseWidget
{
public:
    static void Bind2Lua(lua_State* l)
    {
        luabind::module(l)
        [
            luabind::class_<Button, BaseWidget, std::shared_ptr<Button>> ("Button")
            .def(luabind::constructor<>())
            .def("Click", &Button::Click)
        ];
    }

    void Click()
    {
        std::cout << "Button::Click" << std::endl;
    }
}; 
```

现在您可以将它与 shared_ptr 一起使用：

```
class Action
{
public:
    void DoClick(const std::shared_ptr<Button>& b)
    {
        // perform click action
        b->Click();
    }

    static void Bind2Lua(lua_State* l)
    {
        luabind::module(l)
        [
            luabind::class_<Action> ("Action")
            .def(luabind::constructor<>())
            .def("DoClick", &Action::DoClick)
        ];
    }
}; 
```

在 lua 中：

```
b = Button()

a = Action()

a:DoClick(b) 
```

原因是 luabind 使用带整数的类型 ID 系统（更准确地说，std::size_t 在inheritance.hpp 中定义）。
您可以使用以下函数获取任何已注册类型的类型 ID：

```
luabind::detail::static_class_id<T>(nullptr); 
```

其中 T 是注册类。
在我的演示程序中，它们是：

*   基本小部件 = 3
*   std::shared_ptr<BaseWidget> = 6
*   按钮 = 4
*   std::shared_ptr< 按钮 > = 7
*   行动 = 5

所以当你从lua调用DoClick时，它会调用instance_holder.hpp中模板类pointer_holder的get成员：

```
std::pair<void*, int> get(class_id target) const
{
    if (target == registered_class<P>::id)
        return std::pair<void*, int>(&this->p, 0);

    void* naked_ptr = const_cast<void*>(static_cast<void const*>(
        weak ? weak : get_pointer(p)));

    if (!naked_ptr)
        return std::pair<void*, int>((void*)0, 0);

    return get_class()->casts().cast(
        naked_ptr
      , static_class_id(false ? get_pointer(p) : 0)
      , target
      , dynamic_id
      , dynamic_ptr
    );
} 
```

如您所见，如果目标类与注册的不同，它将尝试进行强制转换。
这就是事情变得有趣的地方。如果您将 Button 类声明为

```
luabind::class_<Button, BaseWidget,std::shared_ptr<BaseWidget>>("Button") 
```

然后该实例将作为一个 shared_ptr 保存到 BaseWidget，因此 cast 函数将尝试从 BaseWidget (3) 转换为 std::shared_ptr< Button > (7) 并且失败。如果 luabind 支持 base-to-derived 转换，它可以工作，但它似乎不支持。

但是，如果您将 Button 类声明为

```
luabind::class_<Button, BaseWidget, std::shared_ptr<Button>> ("Button") 
```

然后该实例将作为一个 shared_ptr 保存到 Button ，然后目标 id 将匹配注册的类型。get 函数将在第一次返回时分支，从不打扰演员表。

您还可以[在 pastebin 找到我在这里](http://pastebin.com/sX93J9vh)使用的自包含程序。

这里有一个有趣的断点列表，你可以设置看看发生了什么（luabind 版本 900）：

*   instance_holder.hpp 中的第 94 行（pointer_holder::get 的第一行）
*   instance.cpp 中的第 143 行（cast_graph::impl::cast 的第一行）

# actionscript-3 - 单击图像以在 flex 中调度事件

> ID：10433277
> 
> 赞同：1
> 
> 时间：2012-05-03T14:16:57.687
> 
> 标签：actionscript-3, apache-flex, flex4

我在渲染器类中有一个图像，如果我单击图像，我需要将一个事件发送到 flex 中的主 mxml 页面。

**在渲染器类中：-**

```
public function clickOnMoreImage(event:Event):void {                
    var moreImageEvent:Event = new Event("clickOnMoreImage");
    var parent:EventDispatcher = parentDocument.parentDocument as EventDispatcher;
    if (parent != null) {
        parent.dispatchEvent(moreImageEvent);
    }
}

<mx:Image id="imgStatus" buttonMode="true" useHandCursor="true" click="clickOnMoreImage(event)" /> 
```

**父类：-**

```
this.addEventListener("clickOnMoreImage", showMoreImagePopUpData);

public function showMoreImagePopUpData(event:Event):void {
    Alert.show("clicked on More Image");
} 
```

这是行不通的。我可以知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:31:54.290

1.  在这种情况下不要使用`parent`or 。`parentDocument`您无法确定渲染器与顶级应用程序的嵌套级别。
2.  “Flex”方式是使用[事件冒泡](http://livedocs.adobe.com/flex/3/html/help.html?content=events_08.html)。

通过渲染器本身调度事件（`bubbles`设置为`true`）。它会在舞台上“冒泡”（如果渲染器不是弹出窗口的子级），因此您可以在渲染器的任何父级中收听它（例如 -> DataGroup -> List -> Application -> SystemManager ->阶段）。

```
var moreImageEvent:Event = new Event("clickOnMoreImage", true); //2nd parameter "true"
dispatchEvent(moreImageEvent); 
```

# javascript - 首次加载网页时如何向地图添加标记？

> ID：10433282
> 
> 赞同：1
> 
> 时间：2012-05-03T14:17:02.527
> 
> 标签：javascript, html, ajax, google-maps-api-3

在页面加载期间调用函数并向地图添加标记似乎真的很容易，但是我无法在页面加载时执行此操作，并且必须在地图加载并准备好后按下搜索按钮. 我尝试使用此页面：

[http://www.mkyong.com/javascript/javascript-call-funtion-after-page-load/](http://www.mkyong.com/javascript/javascript-call-funtion-after-page-load/)

我在正文末尾放置了一个脚本来调用函数“addMarkers”，但没有任何反应。当我使用搜索按钮调用它时，我只能让这个功能正常工作。

地图自动加载后如何加载标记？

这是我的html正文：

```
<body>
<TR>
    <TD>
        <div id="map" style="width: 1250px; height: 750px"></div>
    </TD>
    <TD>
        <!--field for start-->
        <p>Start Date Time:</p>
        <form method="post" action="">
    <!--addMarkers button is called and executed correctly when this button is pressed-->
            <input type="button" value="Search" onclick="addMarkers()">
        </form>
    </TD>
</TR>
   <!--this does nothing or is not executed as I hoped-->
<script>
    window.onload=addMarkers() ;
</script>
</body> 
```

我的地图加载功能位于我的 html 文档的末尾：

```
<script type="text/javascript">
   //***************Function moved out of header***************************************************
var map;
    var markersArray = [];
    var startformat;
    var endformat;

function load() {

    var myOptions = {
      center: new google.maps.LatLng(42, -70),
      zoom: 3,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map"),myOptions);
alert("Click search to look for markers.");

}
load();
</script> 
```

如果有什么我可以澄清的，请告诉我。

编辑： addMarkers() 使用显示的地图区域和来自两个文本字段的一些文本。就像人们一直在说的那样，似乎函数在一切准备就绪之前就被执行了。我需要先加载页面上的所有内容，然后以某种方式执行 addMarkers()...

这是我现在拥有的，但工作方式与以前相同。在我按下搜索按钮之前不会生成标记：

```
 //************Part of head***************************************************
  <script src="addcreateclear_Markers.js"></script> 
  <script type="text/javascript">

    var map;
    var markersArray = [];
    var startformat;
    var endformat;

    function load() {

    var myOptions = {
      center: new google.maps.LatLng(42, -70),
      zoom: 3,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map"),myOptions);
    addMarkers();
    //alert("Click search to look for markers.");

   }

</script>
</head>

 <!--************Function in body***************************************************-->
 <body onload='load()'>
 <TABLE BORDER="0" CELLSPACING="0" CELLPADDING="2" ALIGN="Center" WIDTH=100%>
<TR>
    <TD>
        <div id="map" style="width: 1250px; height: 750px"></div>

    </TD>
    <TD>
        <!--field for start-->
        <p>Start Date Time:</p>
        <form method="post" action="">
            <input type="button" value="Search" onclick="addMarkers()">
        </form>
    </TD>
</TR>

</TABLE>

<script>
window.onload = addMarkers();
</script>

</body> 
```

更多编辑：在 html 正文的末尾调用此函数使这项工作如我所愿：

```
<script type="text/javascript">
function addMarkersLag() {
  //Print the map object out to the console
    console.log(map);
    //Zoom in on the map after 2 seconds so you can see this function being called
    window.setTimeout(function() {
    addMarkers();
        alert("Does it work?.");
    }, 1000);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:46:51.117

您在`load()`DOM 完成加载之前调用该函数。将对函数的调用移动到 HTML 中的正文：

`<body onload='load()'>`

您应该在实例化地图对象后调用 addMarkers()：

```
map = new google.maps.Map(document.getElementById("map"),myOptions);
addMarkers(); 
```

这是一个显示如何加载标记的示例：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple) （查看源代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:14:07.810

我要求提供更多代码，以便我可以给你一个我更确定的答案。就像这里的其他答案一样，我的答案有点猜测，因为我们没有完整的源代码。

好像您将`load()`函数移到了文件的末尾。所以可能发生的是`window.onload`（您的`addMarkers()`函数）实际上是在执行地图脚本之前触发的。如果这是不正确的，请评论和/或使用更多信息更新您的原始问题。

有关何时被解雇的问题，请参见[此处。](https://stackoverflow.com/questions/3520780/when-is-window-onload-fired)`window.onload`

**编辑**：见[JSFiddle 下面的工作代码](http://jsfiddle.net/BigPete/DnkZP/1)：

```
 <script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script type="text/javascript">
function addMarkers() {
  //Print the map object out to the console
    console.log(map);
    //Zoom in on the map after 2 seconds so you can see this function being called
    window.setTimeout(function() {
        map.setZoom(10);
    }, 3000);
}
</script>
<body onload='load()'>
    <TABLE BORDER="0" CELLSPACING="0" CELLPADDING="2" ALIGN="Center" WIDTH=100%>
        <TR>
            <TD>
                <div id="map" style="width: 1250px; height: 750px"></div>
            </TD>
            <TD>
                <!--field for start-->
                <p>Start Date Time:</p>
                <form method="post" action="">
                    <input type="button" value="Search" onclick="addMarkers()">
                </form>
            </TD>
        </TR>
    </TABLE>
<script>
function load() {
    var myOptions = {
      center: new google.maps.LatLng(42, -70),
      zoom: 3,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map"),myOptions);
    alert("Click search to look for markers.");
}
load();
   //***************Function moved out of header***************************************************
var map;
    var markersArray = [];
    var startformat;
    var endformat;
addMarkers();
</script>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:46:25.647

为什么不在地图创建后直接调用该函数呢？

```
 <script type="text/javascript">
//***************Function moved out of header***************************************************
var map;
var markersArray = [];
var startformat;
var endformat;

function load() {

var myOptions = {
  center: new google.maps.LatLng(42, -70),
  zoom: 3,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById("map"),myOptions);
alert("Click search to look for markers.");

addMarkers();    <---- ADDED HERE

}
load();
</script> 
```

# ruby-on-rails - 可以在 Ruby on Rails Web 应用程序中使用管理模板吗？

> ID：10433287
> 
> 赞同：2
> 
> 时间：2012-05-03T14:17:29.280
> 
> 标签：ruby-on-rails, templates

我一直在做 UI 研究，并在[http://themeforest.net/](http://themeforest.net/)遇到过管理模板。我想知道如何将这些应用到基于 Rails 的 Web 应用程序中。这些模板看起来与 wordpress 主题非常相似。它们有那么容易配置吗？是否就像设置到数据库的链接以使字段形式捕获数据一样简单？我一直在看[这个主题](http://themeforest.net/item/pastel-dashboard-admin-template-iphone-web-app/1694914)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:22:39.010

对于管理模板，我建议使用[Active Admin](http://activeadmin.info/)。它相对容易实现，并且可以毫不费力地为您提供出色的管理屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:20:10.367

是的你可以。我正在尝试解决同样的问题，到目前为止我有几个选择：

1.) 手工完成，我以前做过，它有效，但需要很多时间才能真正理解你的主题是如何组合在一起的。首先，我建议使用包含的主题资产，就像它们与主题捆绑在一起一样。不要仅仅因为你有 twitter-bootstrap-rails gem 就认为主题中的引导类可以工作。静态链接资产，一旦您知道它们可以工作，就慢慢提取静态资产并在资产管道中替换它们。

2.) 使用 install_theme gem ( [http://drnicwilliams.com/2009/10/06/install-any-html-themetemplate-into-your-rails-app/](http://drnicwilliams.com/2009/10/06/install-any-html-themetemplate-into-your-rails-app/) ) 中建议的策略，gem 本身没有任何维护更长的时间（我不确定是否有任何分叉），但策略是合理的。将模板的核心部分提取为部分。

简短的回答是肯定的，但没有直接的方法来“导入到 Rails”

# iphone - 节目接收信号sigterm

> ID：10433292
> 
> 赞同：1
> 
> 时间：2012-05-03T14:17:42.340
> 
> 标签：iphone, uiimageview

在我的应用程序中有一个图像视图，我在其中执行两项操作： 1\. 反映图像：

-（无效）反射图像{

```
UIImage *alterImage=[[UIImage alloc]init];
alterImage=photoView.image;
UIImageOrientation flippedOrientation = alterImage.imageOrientation;
if (flippedOrientation==UIImageOrientationUp) {
    flippedOrientation = UIImageOrientationDownMirrored;

}
else if (flippedOrientation==UIImageOrientationDown) {
    flippedOrientation = UIImageOrientationUpMirrored;

}
else if (flippedOrientation==UIImageOrientationDownMirrored) {
    flippedOrientation = UIImageOrientationUp;

}
else if (flippedOrientation==UIImageOrientationUpMirrored) {
    flippedOrientation = UIImageOrientationDown;

}
UIImage * flippedImage = [UIImage imageWithCGImage:alterImage.CGImage scale:alterImage.scale orientation:flippedOrientation];
photoView.image=flippedImage; 
```

}

和 2\. 简单图像：

```
-(IBAction)getSimpleImage:(id)sender{

    [photoView setImage:simpleImage];

} 
```

simpleImage 是原始图像。当我反射图像并取回原始图像时，应用程序崩溃了。它显示错误为“程序接收信号sigterm”。

# ruby-on-rails - 使用 rspec 测试 Rails 引擎生成器

> ID：10433293
> 
> 赞同：5
> 
> 时间：2012-05-03T14:17:43.290
> 
> 标签：ruby-on-rails, rspec, rubygems

我创建了一个包含安装生成器的 simpe gem，生成器工作正常，但现在我想使用 rspec 测试它，我找到了这个 [gem](https://github.com/sinisterchipmunk/genspec)，并尝试测试我的生成器，我的规范代码是：

```
require 'genspec'
require 'rosalie'

describe :install_generator do

  it "should generate model" do
    subject.should generate("message.rb")
  end
end 
```

rosalie 是 may gem 的名称，现在当我运行它时出现错误：/stuff/work/my_projects/rosalie/lib/rosalie/engine.rb:2:in `': uninitialized constant Rosalie::Rails (NameError)

我的 engine.rb 代码是：

```
module Rosalie
  class Engine < Rails::Engine

    initializer "rosalie.models.messageable" do
      ActiveSupport.on_load(:active_record) do
        include Rosalie::Models::Messageable
      end
    end
  end
end 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:53:06.347

您必须先加载代码，然后再将其包含在某处。

需要或自动加载您的主文件。

[这是我的宝石的一个例子。](https://github.com/apneadiving/Google-Maps-for-Rails/blob/master/lib/gmaps4rails.rb#L3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:33:51.043

您需要在您的 spec_helper.rb 中添加这些代码，并在每个规范中要求 spec_helper。

```
require File.expand_path("../dummy/config/environment", __FILE__)
require 'rspec/rails' 
```

# knockout.js - 什么外部模板最适合 knockout.js？

> ID：10433295
> 
> 赞同：0
> 
> 时间：2012-05-03T14:18:03.633
> 
> 标签：knockout.js

在文档页面[Template Binding](http://knockoutjs.com/documentation/template-binding.html)上，注 5。它说，

> 请注意，截至 2011 年 12 月，jQuery.tmpl 不再处于积极开发中。在适当的时候，它会被 JsRender 接替，JsRender 目前还没有处于测试阶段。

经过一番谷歌搜索后，我找到了不同的选择（例如`koExternalTemplateEngine`等）并且很难决定。如果模板可以放在单独的文件中，我仍然觉得会很棒。这里的任何专家都可以提出最好的解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T08:18:23.547

它是一个示例 webapi 应用程序
JavaScript 包：“~/Scripts/infuser.js”“~/Scripts/koExternalTemplateEngine_all.js”

```
configure:
infuser.defaults.templateUrl = "/templates";
infuser.defaults.templateSuffix = ".tmpl.html";

DEMO:
/Views/Home.cshtml
<!-- ko template:{name:'XXXHolic'} -->
<!-- /ko -->

/Templates/XXXHolic.tmpl.html

<div>
     This is a template.
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:05:29.853

Knockout 具有内置模板，您可以将模板放在文件中，并将它们与页面上的脚本标签一起包含。脚本类型并不重要，但我见过`text/html`最常用的。

[http://knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

# web-services - 如何在 intalio 中执行 BPEL 文件？

> ID：10433297
> 
> 赞同：0
> 
> 时间：2012-05-03T14:18:07.177
> 
> 标签：web-services, wsdl, bpel, apache-ode

我想使用 Intalio 服务器执行一个 BPEL 文件，您知道我们如何在服务器中或直接在 ODE 中上传或设置此 BPEL 文件吗？

第二个问题，我有这个BPEL一个wsdl文件，我认为没有必要用bpel文件上传它，它只是用于从另一个调用这个服务......我说的对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:19:07.710

Intalio BPMS 使用自定义部署组件，它会干扰 ODE 的标准热部署。尽管可以手动将 BPEL 流程包部署到 ODE，但 Intalio|BPMS 部署组件很可能会抱怨未知部署。

关于您的第二个问题，一个小型 BPEL 流程伴随着至少一个 WSDL（描述流程模型公开的服务接口）和一个 deploy.xml（它是 ODE 特定的部署描述符）。如果您的流程正在编排第 3 方服务，那么这些 WSDL 也需要成为捆绑包的一部分。

# linq - CF Entity Framework 过滤相关数据

> ID：10433303
> 
> 赞同：0
> 
> 时间：2012-05-03T14:18:17.330
> 
> 标签：linq, entity-framework, linq-to-entities

使用以下示例，我尝试检索 IsAssigned 为 false 的所有作业。

```
public class Job {
  public int JobId { get; set; }
  ...
  public virtual ICollection<Bid> Bids { get; set; }
}

public class Bid {
  public int BidId { get; set; }
  public int JobId { get; set; }
  ...
  public bool IsAssigned { get; set; }
  ...
  public virtual Job Job { get; set; }
} 
```

下面是用于显示可用作业的 View 方法。

```
public ViewResult AvailableJobs() {
  var jobs = db.Jobs.Include(j => j.Bids.Select(b => b.IsAssigned));
  return View(jobs.ToList());
} 
```

这会产生以下错误

指定的包含路径无效。EntityType 'MvcTuition.DAL.Bid' 未声明名为 'IsAssigned' 的导航属性。

关于如何返回 IsAssigned 为假的所有工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:20:44.430

```
var jobs = db.Jobs.Include(j => j.Bids.Where(b => b.IsAssigned)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:25:29.437

尝试

```
var jobs = db.Jobs.Include(j => j.Bids).Where(j => j.Bids.Any(b => b.IsAssigned)); 
```

# firefox - CentOS 6.2 上的 Selenium Server 在测试时没有键盘输入

> ID：10433306
> 
> 赞同：0
> 
> 时间：2012-05-03T14:18:23.180
> 
> 标签：firefox, selenium, keyboard, centos

我们目前遇到**SeleniumServer**的问题，这让我困扰了 2 天，现在......希望你能帮助我。

**Selenium Server在****CentOS 6.2**上运行，**Selenium Server 是 2.21**，**Firefox 是 10.0.4**。

启动测试时，**SeleniumServer**启动**Firefox**，但他无法在表单字段中输入任何内容或按“Enter”提交。

更好的是，没有人（甚至没有我的**VNC-Server**）可以在表单字段、url 栏、菜单、按“Enter”之类的键等中写一些东西......这是因为键盘不存在...... . 这就像**Firefox**以某种方式被锁定。

如果使用**Interactive-Mode** : &启动**Firefox**一切正常，我可以手动进行所有测试。**`selenium-server.jar -interactive``cmd=getNewBrowserSession&1=*firefox&2=http://www.google.com`**

 **我也可以手动启动 Firefox，只需`firefox`在 shell 中输入，这也可以正常工作。

那么 Selenium 中发生了什么以及 Selenium 是**如何****启动**Firefox的**呢**？为什么在使用**SeleniumServer**运行**Selenium-Test时没有可用的****键盘输入**？我们也使用**MacOS**和**Windows**进行了测试，并且在相同的测试中都可以正常工作。

 ******任何想法将不胜感激。

来自柏林的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:45:56.787

用旧版本的 Firefox 自己修复了它。Firefox 7 为我工作。********

# asp.net - 在我将@Html.EditorFor 更改为@Html.TextBox 后，将显示默认日期格式

> ID：10433312
> 
> 赞同：0
> 
> 时间：2012-05-03T14:18:39.840
> 
> 标签：asp.net, asp.net-mvc, html.textbox

我在我的模型类上定义了日期格式如下：-

```
[DisplayFormat(DataFormatString = "{0:f}", ApplyFormatInEditMode = true)]
        [Display(Name = "Date Taken")]
        public DateTime DateTaken { get; set; } 
```

它在 上正确显示`@Html.EditorFor(model => model.DateTaken)`，但是在我将其更改为`editorfor`之后`@Html.TextBox("DateTaken", null, new { @id = "DateTaken"+item.ToString() })`；日期格式现在显示为*03/05/2012*而不是*05 May 2012*，所以我如何在`@Html.TextBox`

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:15:04.657

不用太花哨，你可以这样做：

```
@Html.TextBox("DateTaken", Model.DateTaken.ToString("d MMM yyyy"), 
                           new { @id = ... }) 
```

# vba - 使用带有 VBA 的 SFTP 下载文件

> ID：10433315
> 
> 赞同：3
> 
> 时间：2012-05-03T14:18:57.953
> 
> 标签：vba, ms-access, download, sftp

我的目标是下载，而不是从 SFTP 服务器上传文件，并且我正在尝试修改此站点上另一个问题的代码来做到这一点（为方便起见，我粘贴了下面的代码）。

我从 Putty 下载了 PSFTP。当我尝试使用以下命令行连接时，PSFTP 关闭：

```
open username:password@server.com.port:1111 
```

我有三个问题：

1.  我的命令行有问题吗？如果不是那么可能是什么问题？

2.  据我所知，SFTP 通常会使用 get/put 命令，但我在下面的代码中没有看到 put 命令，所以我不明白应该在哪里输入 get 命令来下载文件而不是上传文件（这就是下面的代码应该做的）。

3.  pRemotePath 是 SFTP 服务器上文件的位置是否正确，而 pFile 是我希望将文件下载到的位置？

一个简单的解释将不胜感激。

```
Public Sub SftpGet()

    Const cstrSftp As String = """C:\Users\Ron\UtilityTools\psftp.exe"""
    Dim strCommand As String
    Dim pUser As String
    Dim pPass As String
    Dim pHost As String
    Dim pFile As String
    Dim pRemotePath As String

    pUser = "uid"
    pPass = "PW"
    pHost = "dns"
    pFile = "C:\Users\Ron\activity.txt" 
    pRemotePath = "Z:/activity.log"

    strCommand = cstrSftp & " -sftp -l " & pUser & " -pw " & pPass & _
        " " & pFile & " " & pHost & ":" & pRemotePath
    Debug.Print strCommand
    Shell strCommand, 1 ' vbNormalFocus '
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:29:20.183

我认为您应该从 Windows 命令提示符会话开始。正如我在回答类似问题时所建议的那样，在那里制定命令行的详细信息：[SFTP upload with VBA](https://stackoverflow.com/a/3789851/77335)。一旦你有一个在那里工作的命令行，就可以很容易地从 VBA 执行相同的命令。

我从来没有使用过 Putty 的`psftp.exe`工具，只有`pscp.exe`，所以我无法提供有关如何构建`psftp.exe`命令行的帮助。[我在Putty 的文档](http://the.earth.li/~sgtatham/putty/0.62/htmldoc/Chapter6.html#psftp)中注意到的一件事 是 PSFTP ( `pscp.exe`) 只能与 SSH-2 服务器一起使用 --- 如果您的目标服务器仅支持 SSH-1，PSFTP 将无法工作。

我认为您值得在该链接上查看 Putty 文档。

# javascript - 冰面配置

> ID：10433320
> 
> 赞同：0
> 
> 时间：2012-05-03T14:19:13.653
> 
> 标签：javascript, java, jakarta-ee, icefaces-3

我正在尝试使用 icefaces3。我做了一些例子，它们完美地工作，但是当我尝试一些例子时

[http://icefaces-showcase.icesoft.org/showcase.jsf?grp=compatMenu&exp=menuBar](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=compatMenu&exp=menuBar)

我收到以下错误：

```
import org.icefaces.samples.showcase.metadata.annotation.ComponentExample;
import org.icefaces.samples.showcase.metadata.annotation.ExampleResource;
import org.icefaces.samples.showcase.metadata.annotation.ExampleResources;
import org.icefaces.samples.showcase.metadata.annotation.Menu;
import org.icefaces.samples.showcase.metadata.annotation.MenuLink;
import org.icefaces.samples.showcase.metadata.annotation.ResourceType;
import org.icefaces.samples.showcase.metadata.context.ComponentExampleImpl; 
```

Eclipse 可以找到这些类，而不是将必要的 jars 自动添加到我的项目中。

包 Explorer 中显示了 icefaces jar（由 eclipse 自动添加）。

icefaces.jar

commons-logging.jar

icefaces-compat.jar

jxl.jar

krysalis-jCharts-1.0.0-alpha-1.jar

icefaces-ace.jar

冰推.jar

请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:39:29.220

您不需要任何这些类。删除所有展示柜注释，如 @ComponentExample、@ExampleResources 和 @Menu。这些注释只是 icefaces 展示门户需要的。icefaces做得不是很好...

# java - 即使按下设备的剪切按钮，Midlet 也不能 关闭

> ID：10433330
> 
> 赞同：4
> 
> 时间：2012-05-03T14:19:47.687
> 
> 标签：java, java-me, midp

我在 J2ME 中工作。我希望我的 MIDlet 必须无限运行。即使我按下设备上的任何键，它也不能关闭。

请帮助我，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:36:50.080

如果您使用的是诺基亚手机，您可以在 Jad 文件中添加 Nokia-MIDlet-No-Exit: true：http://library.developer.nokia.com/index.jsp?topic=/Java_Developers_Library/GUID- [C5D3E0F5-72B9- 4EE7-8BA7-20DE4A538FB8.html](http://library.developer.nokia.com/index.jsp?topic=/Java_Developers_Library/GUID-C5D3E0F5-72B9-4EE7-8BA7-20DE4A538FB8.html)

另一个问题也是关于[在按下退出按钮时最小化移动应用程序](https://stackoverflow.com/questions/9869653/minimizing-a-mobile-application-on-exit-button-press)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:32:38.373

恐怕任何设备都可以关闭它运行的任何 MIDlet。这可以由平台完成，而您在 J2ME 中无能为力。唯一的解决方案是通过修补来制作您的自定义固件（或操作系统）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T03:20:18.627

不应该`Nokia-MIDlet-No-Exit:true`，但应该是
`Nokia-MIDlet-no-exit: true`
，但为了使用它，您将首先通过入侵您的 s40 设备来破坏诺基亚安全防火墙。

# grails - Grails Quartz 作业集成测试 - 未自动装配作业

> ID：10433333
> 
> 赞同：4
> 
> 时间：2012-05-03T14:19:54.120
> 
> 标签：grails, quartz-scheduler, integration-testing

我正在为 grails 应用程序中的 Quartz Job 编写集成测试。我在*grails-app/jobs*文件夹中有工作，如果我启动应用程序，它就可以工作。问题是我想在集成测试中得到它，但自动接线不起作用。测试是这样的：

```
class MyJobTest{
    MyJob myJob
    def setUp(){
        assert myJob != null
    }

    def testExecute(){
         //test logic
    }

} 
```

但它失败了，因为 myJob 为空......一些帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:11:36.417

Quartz Jobs 不像服务在测试环境下那样自动连接。Quartz 作业的文档还明确指出，默认情况下它不会在测试环境下按计划执行（如果您愿意，您可以更改它，但我不会）。我会`myJob = new MyJob()`在你的实例中实例化`setUp`并调用该`execute()`方法来测试它。如果您正在尝试测试触发器，您可能想找到一种方法来查看`triggers {}`可能检查元类的内部内容？

编辑回应评论：

我从来没有从应用程序上下文中得到服务，所以这可能会起作用。我可能会测试它的方式如下：

假设您的班级看起来像这样：

```
class MyJob {
    def myServiceA
    def myServiceB

    def execute() {
        if(myJobLogicToDetermineWhatToDo) {
            myServiceA.doStuff(parameter)
        } else {
            myServiceB.doStuff(parameter)
        }

    }        
} 
```

您真正想要在这里测试的是`myJobLogicToDetermineWhatToDo`. 我假设您已经（或可以轻松编写）针对您的服务 myServiceA 和 myServiceB 的集成和/或单元测试，以确保它们正常工作。然后我会编写单元测试来测试你的工作的逻辑/接线到适当的服务。

```
@Test
void routeOne() {
    def job = new MyJob()
    def myServiceA = new Object()
    def expectedParameter = "Name"
    def wasCalled = false
    myServiceA.metaClass.doStuff = {someParameter ->
        assert expectedParameter == someParameter
        wasCalled = true
    }
    job.myServiceA = myServiceA
    //Setup data to cause myServiceA to be invoked

    job.execute()

    assert wasCalled
} 
```

然后对您通过工作的所有路线重复此过程。这样，您可以将测试隔离到尽可能小的部分，并测试您正在调用的对象的逻辑，而不是它正在使用的服务。我假设您正在使用服务，因为系统的另一部分正在使用其中的逻辑。如果您正在通过该作业测试服务并且由于某种原因该作业消失了，那么您必须重新编写测试以直接调用该服务。我建议您使用测试直接测试服务并模拟这些服务调用的测试的方式。如果工作消失，您只需删除与之关联的测试，您就不会失去任何测试覆盖率。有点啰嗦，但这就是我测试它的方式。

# ruby-on-rails - 带有 2 个数据库的 rails 应用程序 - 1 个用于读取数据，另一个用于写入数据

> ID：10433334
> 
> 赞同：2
> 
> 时间：2012-05-03T14:19:56.677
> 
> 标签：ruby-on-rails, ruby, activerecord, connection

我需要使用 postgresql db 将一些旧数据从 sqlite3 db 导入到我的 rails 应用程序中。所以我用遗留 sqlite3 db 的所有列类型创建了一个模型“businesses”。我更改了 database.yml 文件等......在模型 business.rb 我添加了这一行：

```
class Business < ActiveRecord::Base

establish_connection "citylistings_development"
end 
```

这使我能够连接到 sqlite3 db，并创建了一个 index.html.erb 文件，我可以在浏览器中看到其中的内容。

在控制器中，我的代码是这样的：

```
class BusinessesController < ApplicationController
def get_all
  @businesses = Business.all
end

def create_db_entries
 self.get_all
end

def index
respond_to do |format|
  format.html #index.html.erb

end
end
end 
```

现在我注意到，当我创建模型“business.rb”时，它在我的 postgresql 数据库中创建了表。

但是，很明显它从我的 sqlite3 数据库中读取数据，因为它连接到该数据库。

我的问题是这样的

如何将其输出到 index.html.erb 文件的数据写入 pg db？这甚至可能吗？

模型实例可以一次连接到 2 个数据库并从 1 读取并写入另一个吗？

我知道解决这个问题的一种方法是创建另一个模型“tempbiz”，它将条目写入 pg 数据库，而“业务”模型从 sqlite3 数据库读取。我想知道“商业”模型是否可以同时完成这两项任务？

谢谢

* * *

编辑这是我的 database.yml 根据下面的评论（我排除了所有被注释掉的东西）

```
#===============================================================================
development:
 adapter: postgresql
 encoding: unicode
 database: XXX_development
 pool: 5
 username: XXX
 password: XXXX
#===============================================================================
citylistings_development:
 adapter: sqlite3
 database: db/citylistings.sqlite3
 pool: 5
 timeout: 5000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:07:49.213

我看到了有关此主题的演示文稿，您需要查看 secondbase gem。引用它的文档“SecondBase 为您的应用程序添加了第二个数据库。虽然 Rails 允许您建立与任意数量的外部数据库的连接，但 Rails 只能管理单个数据库及其迁移和测试任务。”

```
https://github.com/karledurante/secondbase 
```

It was created for the exact reason you need it. They had a legacy database that they needed to import.

Cheers, Sean

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-02T19:35:01.500

This will be native in Rails 6.

```
class AnimalsBase < ApplicationRecord
  connects_to database: { writing: :animals, reading: :animals_replica }
end 
```

Here's the [PR that introduced it](https://github.com/rails/rails/pull/34052).

# json - JSON嵌套对象发布到node.js服务器？

> ID：10433337
> 
> 赞同：0
> 
> 时间：2012-05-03T14:20:12.403
> 
> 标签：json, node.js

我想通过 JSON 将一个对象发布到 node.js 服务器。

Object 结构是嵌套的，并且从未成功在 node.js 服务器站点上正确接收和解析。

* * *

编辑2

我找到了解决方案：请参阅答案部分...

* * *

编辑

我发现

```
 console.log(body); 
```

自身输出

val1=你好&val2%5Bval3%5D=世界

//= {"val1":"hello","val2[val3]":"world"}

奇怪的 JSON 方式

* * *

客户端.js

```
 var data ={val1:"hello",val2:{val3:"world"}};
    console.log(data); // -> *1
    $.ajax({
        url:"/",
        type:"POST",
        dataType: 'json',
        data:data,
        success:function (res)
        {
            resHandler(res);
        }
    }); 
```

* * *

*1 Chrome 开发者工具

目的

val1：“你好”

val2：对象

val3：“世界”

* * *

服务器.js

```
var onreq = function (req, res)
{
    if(req.method == 'POST')
    {
        var body = '';
        req.on('data', function (data)
        {
            body += data;
        });
        req.on('end', function ()
        {
            var json = qs.parse(body);
            console.log(json.val1); //hello
            console.log(json.val2); //undefined
            console.log(json.val3); //undefined

            console.log(JSON.stringify(json)); 
            //{"val1":"hello","val2[val3]":"world"}
        });
    } 
```

* * *

我明白

val2[val3] 是 val2.val3

然而，

* * *

问题 1

JSON.stringify 打印出来

{"val1":"hello","val2[val3]":"world"}

不是

{val1：“你好”，val2：{val3：“世界”}}

很丑，我不知道为什么会这样。

* * *

问题 2

我永远无法得到 {val3:"world"}

控制台.log(json.val3); //不明确的

* * *

任何人都可以解释，我如何将嵌套的 JSON 发布到 node.js 服务器？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:43:36.980

不要在 jQuery Ajax 上使用 JSON 类型的数据，而是使用 Stringified JSON

我创建了一个 WIKI

[http://code.google.com/p/kenokabe/wiki/nestedJSONproblem](http://code.google.com/p/kenokabe/wiki/nestedJSONproblem)

# powershell - Powershell - 如何检查具有所需创建时间的文件是否存在？

> ID：10433339
> 
> 赞同：4
> 
> 时间：2012-05-03T14:20:14.737
> 
> 标签：powershell, powershell-2.0

我正在使用这个脚本

```
$date = Get-Date
Get-Childitem -name | where {$_.CreationTime -eq "$date"} 
```

但它不起作用。我需要做的只是做一个布尔检查是否有在特定日期创建的文件。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:36:50.743

`Get-Date`获取当前日期和时间。如果您将文件的创建日期与当前日期**和**时间进行比较，您将找不到任何文件（除非您在检索当前日期时刚刚创建了一个文件；））。

```
$today = (get-date).Date
Get-ChildItem | where { $_.CreationTime.Date -eq $today } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T19:12:50.880

```
Get-ChildItem | where-object { $_.CreationTime.Date -match "2014" } 
```

`2014`创世年在哪里。

# windows-phone-7 - 必应地图控制的内存问题

> ID：10433340
> 
> 赞同：1
> 
> 时间：2012-05-03T14:20:19.580
> 
> 标签：windows-phone-7

在我的应用程序中，当从具有地图控件的页面导航时，内存使用量会变高。有没有办法减少 bing 地图控件的内存使用量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:41:46.697

我相信这样做的原因是在您导航回上一页后维护了对 Map 控件的引用。除了释放任何引用之外，我发现使用 SetMode 方法还有助于释放引用：-

```
map1.SetMode(new NullMode(), false); 
```

我想我使用以下论坛帖子作为参考（这是不久前）：-

[http://forums.create.msdn.com/forums/p/65180/463528.aspx](http://forums.create.msdn.com/forums/p/65180/463528.aspx)

在我的情况下，我必须做一些额外的清理和更改与使用触发器和注销 MVVM Light Messenger 相关的代码结构。

# regex - hgignore 中奇怪的负前瞻处理

> ID：10433342
> 
> 赞同：1
> 
> 时间：2012-05-03T14:20:37.627
> 
> 标签：regex, mercurial, tortoisehg, hgignore, regex-lookarounds

在一个巨大的源代码树中，我希望 Mercurial 只跟踪一个子文件夹。

```
specific/component/subfolder 
```

在任何像样的正则表达式工具（Regex Coach，regexpal.com）中，以下内容绝对足够（并且可以理解）

```
^(?!specific/component/subfolder).+ 
```

同时 .hgignore 坚持

```
^(?!extras).+
^extras/(?!extensions).+
^extras/extensions/(?!sharing).+ 
```

一旦我将斜线放在前瞻组中，就什么都没有通过。

在称这是一个错误（也许是另一个本土的正则表达式解析器？）之前，我问了集体智能:-)

关于 hgignore 想要做什么的间接线索的学分

[使用负前瞻来磨练 .hgignore 文件](https://stackoverflow.com/questions/8996920/honing-the-hgignore-file-using-a-negative-lookahead)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:53:40.990

只是不要在 .hgignore 中使用负前瞻。真的。每次有人在 Stack Overflow 中建议它时，我都会让他们知道它不能很好地工作，因为它不是预期的功能。如果 Mercurial 的 .hgignore 文件应该是一个白名单系统，它就会有一个真正的白名单语法。这是一个黑名单，应该这样使用。

负前瞻语法几乎可以正常工作，因为它不是一个本土的正则表达式解析器——它是内置在 python 中的，并且不妨碍禁用负前瞻似乎有点矫枉过正，但也许是更好的选择。

两种解决方案比使用永远不会满足您的负面展望处理更好：

*   只需将存储库向下移动一级 - 向下移动到您实际要跟踪的文件夹中
*   - 或 - 将所有内容列入黑名单，然后“添加”您想要跟踪的文件 - 添加覆盖忽略

严重地。这不是一个预期的功能，它永远不会很好地工作，但由于向后兼容性的原因不能被删除。

# android - 在哪里阅读有关 id 属性格式的信息？

> ID：10433343
> 
> 赞同：2
> 
> 时间：2012-05-03T14:20:38.220
> 
> 标签：android, resources, android-xml

这是什么意思

`@[+][package:]type:name`

或这个

`@+id/my_id`

?

加什么？apidoc [http://developer.android.com/reference/android/R.attr.html#id中没有详细说明](http://developer.android.com/reference/android/R.attr.html#id)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:26:46.950

```
@[+][package:]type:name 
```

您可以使用其他包中元素的 id。这就是主题和其他可变内容的工作方式。他们从其他包中获取资源。

加号 + 表示这是一个新的资源 ID，如果它不存在，aapt 工具将在 R.java 类中创建一个新的资源整数。

参考：

[http://developer.android.com/guide/topics/resources/layout-resource.html#idvalue](http://developer.android.com/guide/topics/resources/layout-resource.html#idvalue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:23:12.007

`@+id/my_id`确实意味着您在 xml 中为该布局对象创建一个新 ID。此 id 用于使用`findViewById()`或类似方法将其安装在您的 JavaCode 中。

更多信息：http: [//developer.android.com/guide/topics/resources/layout-resource.html](http://developer.android.com/guide/topics/resources/layout-resource.html)

# c# - 如何从绑定的 Microsoft.Office.Interop.Excel.ListRow 中检索基础对象？

> ID：10433353
> 
> 赞同：2
> 
> 时间：2012-05-03T14:21:14.833
> 
> 标签：c#, excel, vsto, bindinglist

我正在`BingingList<T>`使用带有 Visual Studio 2010 的 VSTO 将 a 绑定到 excel 列表对象。

我希望能够在给定 excel ListRow 对象的情况下检索对象 T。我知道的唯一方法是使用 ListRow.Range[1,1].ID。它似乎返回了 BindingList 中 T 的索引。但是当列表发生变化时，索引通常不会及时更新。

有没有更好的方法来实现这一目标？

谢谢

# ms-access - ActiveX 控件崩溃访问

> ID：10433361
> 
> 赞同：1
> 
> 时间：2012-05-03T14:22:02.867
> 
> 标签：ms-access, ms-access-2007

当我尝试将 ActiveX 控件添加到 MS Access 2007 中的堆叠布局表单时，Access 崩溃。

**重新创建问题的步骤：**

1.  创建表
2.  从对象面板中选择表格
3.  创建表单（为所有列创建默认表单）
4.  切换到表单的设计视图
5.  选择 ActiveX 控件，然后将日历控件拖到表单中（不管是哪个）
6.  将日历控件拖动到默认表单的堆叠布局中
7.  切换到表单视图
8.  访问崩溃

只要我将控件留在堆叠布局之外，它就可以正常工作。就在我将它添加到堆叠布局的那一刻……崩溃。

有什么建议么？

# svn - 使用命令在 SVN 中标记多个文件

> ID：10433362
> 
> 赞同：1
> 
> 时间：2012-05-03T14:22:09.107
> 
> 标签：svn

我有一个包含版本和文件名的文件列表，如下所示，

*1475|宠物/狗/GetName.sh*

*1476|priceLogic/CheckdogPrice.sh*

这只是一个很小的集合，它可以扩展到更大的数量。

我想为特定版本标记它们，并希望使用 svn 中的单个命令标记它们，否则我需要一次标记它们。

我想过使用更改列表，但这无助于我携带文件的版本号。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:23:08.563

请不要采取错误的方式，但很有可能您还没有完全理解在 Subversion 中应该如何完成。

您永远不应该标记错过的匹配修订的混杂。颠覆标记应该基于某个分支或主干的统一修订。将标签视为您的存储库在某个时间点的快照。事实上，许多商店并不费心标记，而是简单地使用 Subversion 修订号。（“*将修订版 14485 发送给 QA 进行测试*”）。

问题是你为什么需要这样做。*我可以想到人们尝试进行稀疏标记*的几个原因：

*   他们想要一份已修改文件的列表。您可以使用`svn diff --summarize`来做到这一点。
*   他们在工作区中签出了各种文件的各种版本。在这种情况下，您应该根据特定版本在分支上工作，并将这些更改放在分支中。
*   他们习惯于 CVS，不想浪费标记所有内容的时间。在 CVS 中，标记 cat 需要 30 到 40 分钟，在大型存储库中可能更长。但是，Subversion 标记基于指向特定 URL 和修订版的链接。在 Subversion 中进行标记既快速又轻松，因此您只需标记所有内容。

所以，如果你让我知道你想做什么，我可能会指导你在 Subversion 中找到更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:30:21.353

根据您的问题和您在 David W 的回答下的评论，让我重申一下我认为您在问的问题：为简单起见，假设您刚刚发布了产品的 1.6 版并且您做得正确，即您创建了一个 1.6 标签并且一切都很好从那里继续前进。但是您的团队没有遵循最佳实践，并且您在版本 1.5、版本 1.4 或任何更早版本上没有标签，并且您预见到由于错误修复或其他原因您将不可避免地需要返回到一个或多个以前的修订版.

我建议的行动方案是这样的：

**确定代表 1.5 版的*单个*修订号。**

根据您的问题，我怀疑您对此的后果不太清楚。如果您在修订版 128 提交文件 A 然后在修订版 129 提交文件 B 那么*两个文件现在都在修订版 129*。（假设您再次提交文件 A，得到修订版 130。现在，如果您将文件 A 回滚到修订版 129，您会得到什么？提交时存在于 128 的相同文件。）该图试图说明这一点。条形的顶部代表每个文件的最新提交，因此代表头部修订。这个头版本由文件 A 的 128、文件 B 的 129 和文件 C 的 126 组成。*但是这个头版本也是版本 129。*要掌握的一点是文件的**当前版本**不必（通常不）匹配**文件的最新提交版本**。在谈论头部修订时最容易看到这一点，但它同样适用于早期修订。什么构成修订版 125？嗯，文件 A 在 124 提交，文件 B 在 125 提交，文件 C 在 123 提交。因此，对于给定的版本，您必须确定包含所有最新提交的修订版。

![Subversion 提交的可视化](../Images/f2fb82dcdaceb7ff41361d44274fa483.png)

**将标签应用于标识的修订号。**

一旦您确定了 1.5 版的单个修订号，请使用 svn branch/tag 命令指定已识别的修订号，而不是头修订号，作为标记的目标。

**对要标记的每个先前版本重复上述操作。**

重复、冲洗和清洗，直到完成。

**并发症**

上述过程*大部分*时间都应该有效。但是，有时您想标记**混合**版本。请注意，根据我的示例，128 和 129***不***构成混合修订。例如，混合修订是 124 处的文件 A 和 127 处的文件 B。您可以通过将工作副本更新到该混合修订来标记混合修订，然后根据您的工作副本创建标记。

* * *

有关此特定主题的更多信息，您可能还想查看我在 Simple-Talk.com 上发布的**TortoiseSVN 和 Subversion Cookbook的**[第 6 部分。](http://www.simple-talk.com/dotnet/.net-framework/tortoisesvn-and-subversion-cookbook-part-6-snapshots/#earlierversion)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:40:05.767

没有标准的命令方式可以从您的列表中读取并执行。如果整个主干中的所有文件都具有相同的版本，则可以轻松标记。

可以做的是一个小的 perl/bash 脚本，它可以将列表中的所有文件以及相应的修订版复制到公共标记文件夹中。**

# sql - SQL Azure 数据不写入？

> ID：10433364
> 
> 赞同：2
> 
> 时间：2012-05-03T14:22:26.537
> 
> 标签：sql, asp-classic, azure, azure-sql-database, response.write

我是 Azure 的新手，正在为我公司的内部公司网站探索它。我们一直在使用本地 MS SQL 2008 Express 数据库，我已将其设置为与 Azure 同步以进行测试。一切都完美同步，所有数据都在那里，但由于某种原因，我的 ASP 代码中不会遇到一个数据点。

数据点是一个 pdf 文件名。我没有将文件存储在数据库中，只是文件名（现在）。在本地 SQL 服务器上一切正常，但由于切换没有运气。奇怪的是 if 语句仍然适用于数据，它只是不会将文件名放在我的 response.write() 方法中，因此，它不会将文件名放在我的链接中供用户下载。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:40:59.433

根据[安全指南和限制（SQL Azure 数据库）](http://msdn.microsoft.com/en-us/library/windowsazure/ff394108.aspx#authentication)：“SQL Azure 数据库仅支持 SQL Server 身份验证。不支持 Windows 身份验证（集成安全）。用户每次连接到 SQL Azure 数据库时都必须提供凭据（登录名和密码）。 "

因此，我建议您将连接字符串更改为以下格式：

```
"Server=avl6qnn22s.database.windows.net;Database=CRMDB;
 User ID=WebSvrAdmin@avl6qnn22s;Password=password;Trusted_Connection=False;" 
```

另外我建议您不要使用 NVARCHAR(MAX) 来存储文件名。这将导致性能下降。替换为

```
nvarchar(4000) 
```

# java - 更新包含相同对象的其他列表时，休眠删除列表关系

> ID：10433368
> 
> 赞同：0
> 
> 时间：2012-05-03T14:22:43.227
> 
> 标签：java, hibernate, hibernate-mapping

在我的应用程序中，我有如下设置：

```
class A {
    String id;
    List<C> list;
}

class B {
    String id;
    List<C> list;
}

class C {
    String id;
} 
```

它在休眠中映射，例如

```
<class name="A" lazy="false">
    <id name="id">
        <generator class="org.hibernate.id.UUIDGenerator"/>
    </id>
    <list name="list" lazy="false" mutable="false">
        <key column="listA_id"/>
        <list-index column="listA_index"/>
        <many-to-many class="C"/>
    </list>
</class>

<class name="B" lazy="false">
    <id name="id">
        <generator class="org.hibernate.id.UUIDGenerator"/>
    </id>
    <list name="list" lazy="false" mutable="false">
        <key column="listB_id"/>
        <list-index column="listB_index"/>
        <many-to-many class="C"/>
    </list>
</class>

<class name="C" lazy="false">
    <id name="id">
        <generator class="org.hibernate.id.UUIDGenerator"/>
    </id>
</class> 
```

所有 5 个表（每个类一个，多对多关系 2 个）按预期创建。当我执行如下代码时出现问题：

```
A a = new A();
B b = new B();
C c1 = new C();
C c2 = new C();
C c3 = new C();

<hibernatesession>.save(c1);
<hibernatesession>.save(c2);
<hibernatesession>.save(c3);

a.list.add(c1);
a.list.add(c2);

<hibernatesession>.save(a);

b.list.add(c1);
b.list.add(c3);

<hibernatesession>.save(b); 
```

我在 HSQL 日志文件中跟踪生成的 SQL，发现一切都很好，直到最后一次保存。保存 b 将导致 a 和 c1 之间的关联从 many-many-tabel A_list 中删除。从数据库中重新获取对象 a 和 b 将导致 c1 和 c3 在 b.list 中，但只有 c2 在 a.list 中。

观察： * 游戏中没有级联。* 切换保存 a/b 的顺序将导致 c1 从先保存的列表中删除。* 两个列表都映射到索引。* 两个列表都使用不同的键/索引列名称进行映射。* hibernate 完全删除列表共有的那些元素

有人可以向我解释这种休眠行为并知道如何正确实现相应的映射吗？

提前谢谢！！！猪蹄草

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:52:08.340

修复了错误。经验教训：如果您在 hibernate 中的某些集合之间有奇怪的相关性，请首先检查您是否不小心为它们使用了相同的 Java 实例...几个小时 pairDebugging 到 hibernate 终于让我们做出了正确的猜测。棘手的事情。问题解决了。

谢谢你暗示布拉德！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:56:45.773

尝试向 C 类添加多对多映射，使其成为双向关系。也许通过明确“父”关系，它会知道保留多个关系，而不是像您解释的那样删除第一个关系。

```
<class name="C" lazy="false">
    <id name="id">
        <generator class="org.hibernate.id.UUIDGenerator"/>
    </id>
    <list name="listA" lazy="false" mutable="false" inverse="true">
        <key column="listC_id"/>
        <many-to-many class="A"/>
    </list>
    <list name="listB" lazy="false" mutable="false" inverse="true">
        <key column="listC_id"/>
        <many-to-many class="B"/>
    </list>
</class> 
```

# android - ARM-9 和 ARM-11 上的 NDK

> ID：10433370
> 
> 赞同：1
> 
> 时间：2012-05-03T14:22:44.057
> 
> 标签：android, video, android-ndk, codec, android-ndk-r5

来自[developer.android.com](http://developer.android.com/sdk/ndk/overview.html)

最新版本的 NDK 支持以下指令集： ARMv5TE，包括 Thumb-1 指令（有关更多信息，请参见 docs/CPU-ARCH-ABIS.html） ARMv7-A，包括 Thumb-2 和 VFPv3-D16 指令，可选支持 NEON/VFPv3-D32 指令（有关更多信息，请参阅 docs/CPU-ARM-NEON.html） x86 指令（有关更多信息，请参阅 docs/CPU-X86.html） MIPS 指令（有关更多信息，请参阅 docs/CPU-MIPS.html更多信息）

…………

这是否意味着如果我在具有 ARM-9 或 ARM-11 的手机上运行我的应用程序，会有一些性能损失？

# java - 在构造函数java中更改数据

> ID：10433371
> 
> 赞同：0
> 
> 时间：2012-05-03T14:22:45.773
> 
> 标签：java, constructor

我正在做一些基本的 Java 编程，我必须创建具有链接到其他类构造函数的构造函数的类。例如，参考我下面的代码...

```
public class Friend {

    private String name;
    private Date dateOfBirth;
    private String phoneNum;

    public Friend(String name){
        this.name=name;
        this.dateOfBirth = null;
    }

    public Date setDOB(Date input){
        return dateOfBirth;
    }
}

public class Date {

    final int MINDAYSINMONTH=1; 
    final int MAXDAYSINMONTH=30;
    final int MINMONTHSINYEAR=1; 
    final int MAXMONTHSINYEAR=12;
    private int day;
    private int month;
    private int year;

    //constructor
    public Date(int day, int month, int year){
        this.day=day;
        this.month=month;
        this.year=year;
    }
} 
```

我正在尝试创建一个新的`Friend`，然后更改类中的`dateOfBirth`值`Friend`，就像这样......

```
Friend trial = new Friend(input);
trial.setDOB(new Date(2, 15, 1991)); 
```

但是我的输出表明我已经创建了一个新`Friend`的但`dateOfBirth`没有更改为我上面提供的值。有人可以帮我理解我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:24:57.017

因为你`setDOB`的方法只返回值

```
 public Date setDOB(Date input){
    return dateOfBirth;
} 
```

它在哪里设置什么？您应该重命名该方法`getDOB`，因为这就是它正在做的事情，并编写一个`public void setDOB`设置值的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:25:35.480

你的`setDOB`方法是错误的 - 它实际上并没有设置任何东西。

试试改这个...

```
public void setDOB(Date input){
    this.dateOfBirth = input;
} 
```

您可能还应该有一个 getter 方法，以便您可以在设置后检查该值...

```
public Date getDOB(){
    return dateOfBirth;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:26:12.833

线索：你的 setter 把自己当成一个 getter。

# html - 通过QWebView 中的应答器导航到 HTML 本地文件

> ID：10433372
> 
> 赞同：0
> 
> 时间：2012-05-03T14:22:45.897
> 
> 标签：html, qt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:29:34.930

我想出了一种方法来做到这一点，它有点“更长”，但对我来说，它甚至更好，因为我可以`url`根据需要进行管理：

`this->page()->setLinkDelegationPolicy(QWebPage::DelegateAllLinks);`

有了这个，我设置了链接委托的适当性，我让它发送信号

`linkClicked(QUrl)`

每次点击链接。所以我只需要将它连接到`slot`. 这样，我会收到`href`点击的链接。所以现在很容易查看`href`我需要的文件，因为`href`看起来像这样：

`qrc:/my/path/file.html`

qrc: 用于本地文件，但我现在可以显示文件！

# excel - Displaytag 将整个列表导出到 Excel

> ID：10433375
> 
> 赞同：0
> 
> 时间：2012-05-03T14:22:51.837
> 
> 标签：excel, export, displaytag

我只是想知道是否可以使用显示标签的导出功能来导出列表的所有数据，而不是例如。1~10（一页数据）。

例如：我的列表中有 100 行。一页显示1~10个数据。因此，我的 displaytag 表中将有 10 页。

displa 标签的导出功能仅导出/打印当前显示的页面（例如，如果当前数据来自 1 ~ 10 ，我无法导出导出文件中剩余的 11 ~ 100 个数据。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:33:28.650

看看“export.amount”属性（http://displaytag.sourceforge.net/1.2/configuration.html）

“指示当用户请求数据导出时应向用户发送多少数据。默认情况下，它会发送整个列表。您可以指示表格标签仅发送当前显示在页面上的数据”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T07:29:36.003

从属性文件中删除以下行：

```
export.excel.class=org.displaytag.export.excel.DefaultHssfExportView
export.pdf.class=org.displaytag.export.DefaultPdfExportView 
```

它将为您提供 excel 和 pdf 格式的完整列表。

但它将日期格式（如果提到任何日期列）更改为标准格式 - mm/dd/yyyy。如果有人有解决方案，请告诉我。

# html - 如何在 freeBSD 服务器上，在不同的搜索字符串之后在 447 个 html 文件的中间添加三行？

> ID：10433378
> 
> 赞同：2
> 
> 时间：2012-05-03T14:23:04.707
> 
> 标签：html, perl

我需要在 447 页的 html 中添加三行。具体来说，我需要添加以下行：

```
<input name="prev" type="button" value="prev" onClick="handlePrev()" id="prevButton">
<input name="next" type="button" value="next" onClick="handleNext()" id="nextButton">
<script src="nav.js"></script> 
```

之后

```
</table> 
```

标签。

我更愿意在 perl 中执行此操作，但实际上任何可能的方式都可以。如果这样更容易，我也愿意在 Windows 中执行此操作。

我尝试过的脚本之一：

```
#!/usr/bin/perl -i.bak -p
my $prevButton = '<input name="prev" type="button" value="prev" onClick="handlePrev()" id="prevButton">\n';
my $nextButton = '<input name="next" type="button" value="next" onClick="handleNext()" id="nextButton">\n';
my $jsInclude = '<script src="nav.js"></script>\n';
print "TEST" if /\<\/table\>/; 
```

它触及页面，但没有像我所期望的那样用 TEST 替换 table 标记。

仅供参考：我完全是 perl 新手，所以我可能完全不在这儿了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:29:04.723

你想要的是：

```
#!/usr/bin/perl -i.bak -p
my $prevButton = ...
my $nextButton = ...
my $jsInclude = ...
$_.="$prevButton\n$nextButton\n$jsInclude" if /\<\/table\>/; 
```

并将脚本运行为：

```
perl prg.pl /path/*.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:33:43.243

```
sed -i -e '/<table>/aYourStringToAppendHere' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:51:50.030

这可能对您有用：

```
cat <<\! >append.txt
> <input name="prev" type="button" value="prev" onClick="handlePrev()" id="prevButton">
> <input name="next" type="button" value="next" onClick="handleNext()" id="nextButton">
> <script src="nav.js"></script>
> !
cat <<\! >file.txt
> a
> b
> c
> <table>
> x
> y
> z
> </table>
> d
> e
> f
> !
sed '/<\/table>/r append.txt' file.txt
a
b
c
<table>
x 
y
z
</table>
<input name="prev" type="button" value="prev" onClick="handlePrev()" id="prevButton">
<input name="next" type="button" value="next" onClick="handleNext()" id="nextButton">
<script src="nav.js"></script>
d
e
f 
```

当一切看起来都很好时：

```
sed -i.bak '/<\/table>/r append.txt' <list of files> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T15:16:02.543

这是一个有效的 Perl 脚本。它会在目录中具有特定文档类型的所有文件中添加 3 行。输入目录的路径和 doctype 并试一试：

```
#!/usr/bin/perl

use strict;
use warnings;
use File::Find;

my $startdir = 'enter the path to your files here!';
my $find = '</table>';
my $replace = '</table><input name="prev" type="button" value="prev" onClick="handlePrev()" id="prevButton">
<input name="next" type="button" value="next" onClick="handleNext()" id="nextButton">
<script src="nav.js"></script>';

my $doctype = 'enter your doctype here!';

find(
sub{
  return unless (/\.$doctype$/i);
  local @ARGV = $_;
  local $^I = '.bac';

  while( <> ){
    if( s/$find/$replace/ig ) {
      print;
    }
    else {
      print;
    }
  }
}, $startdir);

print "done"; 
```

# ios - ViewController 链接到界面构建器

> ID：10433379
> 
> 赞同：1
> 
> 时间：2012-05-03T14:23:08.967
> 
> 标签：ios

我是 ios 开发的新手...我创建了一个基于 Windows 的应用程序。如何将视图链接到我创建的控制器？单击按钮时如何转到下一个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:31:54.423

您通常不会将视图链接到视图控制器——相反。将 IBOutlet 添加到您的视图控制器，它将指向您的 .xib 或情节提要中的视图。然后，在 IB 中，将连接从视图拖到视图控制器并选择该插座。这个过程[在 Apple 的文档中有详细描述](http://developer.apple.com/library/mac/documentation/General/Conceptual/Mac101/Articles/03_ConfiguringUI.html#//apple_ref/doc/uid/TP40010611-CH7-SW6)。

要在单击按钮时移动到下一个屏幕，您将在视图控制器中创建 IBAction 方法。然后，您可以将连接从按钮拖到该视图控制器并选择操作。点击按钮时，将发送操作方法。动作中的代码然后可以调用适当的方法来转换到下一个控制器。或者，您可以使用故事板和转场，并让按钮触发转场到下一个视图。您将在我上面链接的同一文档中找到目标/操作系统的描述。

# c# - 实体框架传递对静态类的引用

> ID：10433384
> 
> 赞同：0
> 
> 时间：2012-05-03T14:23:16.800
> 
> 标签：c#, entity-framework-4

这个大家都知道

```
using (var db = new DatabaseEntites())
{
    var row = db.SomeTable.SingleOrDefault(r => r.Id == 5)
} 
```

我打算用这样的静态方法创建一个静态类

```
public static class SomeTableRepository
{
   public static class GetSomeTableRow(DatabaseEntities db, int id)
   {
        return db.SomeTable.SingleOrDefault(r => r.Id == 5);
   }
} 
```

然后第一个代码看起来像这样

```
using (var db = new DatabaseEntites())
{
    var row = SomeTableRepository.GetSomeTableRow(db, id);
} 
```

如果这将是一个网络应用程序...这种编程会好吗...或者这种编程会引起一些麻烦吗？...或者这是非常好的代码:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:25:35.387

该代码在技术上是可以接受的，但您为什么要这样做？它创建了一个间接而不使代码实质上更简洁。因此，您使大多数人更难理解您的代码。好处是您的代码短了两个字符。这对我来说似乎不是一场胜利。

我自己，我会使用标准的 LINQ 运算符，除非我真的增加了一些真正的价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:27:35.313

正如柯克所说，我认为唯一的好处是可读性很小。但是，如果您`this`在第一个参数之前添加并使其成为[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)，那么您可能会为您的代码的潜在读者获得一些可读性：

**更新**

我也注意到`public static class GetSomeTableRow`不会编译。我将其更改为更通用，对未来的读者来说更少混淆（`class`to `YourClassName`）

```
public static class SomeTableRepository
{
   public static YourClassName GetSomeTableRow(this DatabaseEntities db, int id)
   {
        return db.SomeTable.SingleOrDefault(r => r.Id == 5);
   }
}

...

database.GetSomeTableRow(id); 
```

此外，您可以重命名它以使其读起来更像它的实际内容：

```
database.GetOneRowFromSomeTableById(id); 
```

是的，它很长，但抽象出这样一个简单方法的唯一原因`SingleOrDefault`是让代码一目了然。这`ById`部分是值得商榷的，因为该参数被命名`id`（这使得它看起来是多余的），但是只有在使用智能感知编码时才会出现。您可以将其排除在外（或将其简化为`By`没有`Id`...但是对于每个实施者IMO来说都太多了）

```
database.GetOneRowFromSomeTable(id); 
```

# php - PHP 的 FILTER_VALIDATE_EMAIL 是否提供足够的安全性？

> ID：10433387
> 
> 赞同：11
> 
> 时间：2012-05-03T14:23:19.870
> 
> 标签：php, security

我有一个页面，我想在 GET 参数中接受电子邮件地址。如果我使用`FILTER_VALIDATE_EMAIL`，我是否仍然容易受到 xss 和 javascript 注入攻击等？

我不是在问它是否是一个好的或足够好的电子邮件地址验证器。我想知道是否仍然可以通过传递的任意字符串注入不良的网络代码——我是否需要进行额外的过滤来防止这种情况发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T14:31:37.000

是的，一个有效的电子邮件地址可以**很容易**地用作一些精心设计的字符串的容器，这些字符串可以用来攻击你。

摆脱“过滤”的心态，进入“逃避”的心态。根本不存在通用的“使其安全”过滤器。它不可能存在，因为所有转义都必须以特定于上下文的方式完成。

例如，如果将电子邮件地址输出到纯文本文档，则无需执行任何操作。如果它被输出到一个 html 文档中，作为一个文本节点，那么它需要为一个 html 上下文进行转义，所以转义 html 特殊字符和实体。如果将其放入 html 文档中，并且它的值将在 html 属性中，则需要非常小心地进行转义，这取决于**哪个**html 属性。如果在 sql 查询中使用它，则需要通过数据库特定的转义函数对其进行转义，即使这样，如果您将其用作参数值（即`where someColumn = '$paramVal'`），与符号名称（如表名，列名（即`order by $myEscapedColumnName DESC`）。等等。

这完全是关于使用的上下文，而不是字符串的内容。这适用于所有事情（不仅仅是电子邮件或其他用户输入），这不仅仅是安全问题，而是编程和语法正确性问题。正确的转义很复杂，需要大量时间来学习，并且在编码时需要仔细考虑和考虑。由于付出了努力，许多编码人员都懒得去做，他们才是导致公司被黑的人。

仅供参考，电子邮件地址规范允许引用字符串，因此您可以注入类似`"<script>alert('xss')</script>"@example.com`. 可能性是显而易见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:25:06.983

这应该已经足够好了，但是当您将它输入数据库等时，您自然仍然应该将其转义。您永远不知道 PHP 或 Apache 等中可能存在什么样的错误，这可能会导致攻击发生。

# php - 通过控制器的引用设置 Zend_Form 中元素的默认值

> ID：10433389
> 
> 赞同：1
> 
> 时间：2012-05-03T14:23:23.823
> 
> 标签：php, model-view-controller, zend-framework, zend-form

通过命令行，我设置了一个名为 BookSlot 的新表单：

```
zf create form BookSlot 
```

大多数人可能都知道，在 Zend 框架的应用程序目录中创建了一个表单目录。

在表单的 init 方法中，我添加了一个名为 time 的文本元素，并为其指定了标签“time”：

```
$time = new Zend_Form_Element_Text('time');
$this->addElement($time);
$time->setLabel('Time'); 
```

我需要它具有用户无法更改的默认值，因此我添加：

```
$time->setValue($value); 
```

在我的控制器中，我创建了一个函数来获取上面的书槽表单：

```
public function getBookSlotForm(){
        return new Application_Form_BookSlot();
    } 
```

我的索引控制器中还有一个书槽操作。

我将表单分配给一个变量，并使其可传递给书槽操作中的视图：

```
$form = $this->getBookSlotForm();
    $this->view->form = $form; 
```

在同一个书槽操作中，我有一个动态生成的 id 变量，但为此假设它为 5：

```
$id = 5; 
```

如何在上面的书槽表单中将 的值`$id`设为默认值？`$time`另外，我想让用户无法更改此值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T14:40:55.640

对于用户无法更改值，请使用 readOnly 属性。在您的表单类中

```
$time->setAttrib('readonly', 'readonly'); 
```

要将您的 id 分配为时间字段的默认值，请在您的操作中

```
$form->time->setValue($id); 
```

# python - Scrapy mysql管道错误

> ID：10433392
> 
> 赞同：2
> 
> 时间：2012-05-03T14:23:28.743
> 
> 标签：python, mysql, scrapy

我正在使用scrapy，并且正在尝试将抓取的数据从蜘蛛程序保存到MySql 数据库中。我正在使用管道来实现这一点，但没有运气。这是我的管道代码：

```
from scrapy import log
from scrapy.core.exceptions import DropItem
from twisted.enterprise import adbapi

import time
import MySQLdb.cursors

class FilterWordsPipeline(object):
"""A pipeline for filtering out items which contain certain words in their
description"""

# put all words in lowercase
words_to_filter = ['politics', 'religion']

def process_item(self, spider, item):
    print spider
    for word in self.words_to_filter:
        if word in unicode(item['description']).lower():
            raise DropItem("Contains forbidden word: %s" % word)
    else:
        return item

class MySQLStorePipeline(object):

def __init__(self):
    # @@@ hardcoded db settings
    # TODO: make settings configurable through settings
    self.dbpool = adbapi.ConnectionPool('adress_to_db',
            db='my_db',
            user='my_user',
            passwd='my_pw',
            cursorclass=MySQLdb.cursors.DictCursor,
            charset='utf8',
            use_unicode=True
        )

def process_item(self, spider, item):
    # run db query in thread pool
    query = self.dbpool.runInteraction(self._conditional_insert, item)
    query.addErrback(self.handle_error)

    return item

def _conditional_insert(self, tx, item):
    # create record if doesn't exist. 
    # all this block run on it's own thread
    tx.execute("select * from scrapytest where link = %s", (item['link'][0], ))
    result = tx.fetchone()
    if result:
        log.msg("Item already stored in db: %s" % item, level=log.DEBUG)
    else:
        tx.execute(\
            "insert into scrapytest (title, link, desc) "
            "values (%s, %s, %s)",
            (item['title'][0],
             item['link'][0],
             item['desc'][0]
        )
        log.msg("Item stored in db: %s" % item, level=log.DEBUG)

def handle_error(self, e):
    log.err(e) 
```

这是我收到的错误消息：

```
SyntaxError: invalid syntax
PS C:\Python27\testscrapy\tutorial> scrapy crawl dmoz
2012-05-03 16:03:11+0200 [scrapy] INFO: Scrapy 0.14.3 started (bot: tutorial)
2012-05-03 16:03:12+0200 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole,                        
CloseSpider, WebService, CoreStats
 , SpiderState
2012-05-03 16:03:12+0200 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware,                           
DownloadTimeoutMiddleware,
UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware,     
CookiesMiddleware, HttpCompressionMi
ddleware, ChunkedTransferMiddleware, DownloaderStats
2012-05-03 16:03:12+0200 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware,        
OffsiteMiddleware, RefererMidd
leware, UrlLengthMiddleware, DepthMiddleware
Traceback (most recent call last):
File "C:\Python27\Scripts\scrapy", line 5, in <module>
pkg_resources.run_script('Scrapy==0.14.3', 'scrapy')
File "C:\Python27\lib\site-packages\pkg_resources.py", line 489, in run_script
self.require(requires)[0].run_script(script_name, ns)
File "C:\Python27\lib\site-packages\pkg_resources.py", line 1207, in run_script
execfile(script_filename, namespace, namespace)
File "c:\python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\EGG-INFO\scripts\scrapy", line   
4, in <module>
execute()
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\cmdline.py", line 132,   
in execute
run_print_help(parser, _run_command, cmd, args, opts)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\cmdline.py", line 97, in   
_run_print_help
func(*a, **kw)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\cmdline.py", line 139,   
in _run_command
cmd.run(args, opts)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\commands\crawl.py", line   
43, in run
spider = self.crawler.spiders.create(spname, **opts.spargs)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\command.py", line 34,   
in crawler
self._crawler.configure()
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\crawler.py", line 37, in   
configure
self.engine = ExecutionEngine(self, self._spider_closed)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\core\engine.py", line   
62, in __init__
self.scraper = Scraper(crawler)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\core\scraper.py", line   
68, in __init__
self.itemproc = itemproc_cls.from_crawler(crawler)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\middleware.py", line 48,   
in from_crawler
return cls.from_settings(crawler.settings, crawler)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\middleware.py", line 29,   
in from_settings
mwcls = load_object(clspath)
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\utils\misc.py", line 37,  
in load_object
mod = __import__(module, {}, {}, [''])
File "C:\Python27\testscrapy\tutorial\tutorial\pipelines.py", line 64
log.msg("Item stored in db: %s" % item, level=log.DEBUG)
  ^
SyntaxError: invalid syntax 
```

我不知道从哪里开始，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:25:06.767

```
tx.execute(\
            "insert into scrapytest (title, link, desc) "
            "values (%s, %s, %s)",
            (item['title'][0],
             item['link'][0],
             item['desc'][0])
        ) 
```

需要右括号^^

一个好的起点通常是错误指向的行或之前的行

# php - 从 echo 获取最后一部分并存储在变量 PHP 中

> ID：10433394
> 
> 赞同：1
> 
> 时间：2012-05-03T14:23:32.467
> 
> 标签：php, function

我有一个函数可以从 Wordpress 的内容中回显图像的 URL。

我的功能现在没问题了

```
// Get Image Attachments
function sa_get_image($postid=0, $size='thumbnail') { //it can be thumbnail or full
    if ($postid<1)
    $postid = get_the_ID();
    $thumb = get_post_meta($postid, "thumb", TRUE); // Declare the custom field for the image
    if ($thumb != null or $thumb != '') {
        echo $thumb;
    }
    elseif ($images = get_children(array( //If you upload an image function gets first image
        'post_parent' => $postid,
        'post_type' => 'attachment',
        'numberposts' => '5',
        'post_mime_type' => 'image', )))
        foreach($images as $image) {
            $thumbnail=wp_get_attachment_image_src($image->ID, $size);
            ?>
    <?php echo $thumbnail[0]; ?>
    <?php }
        else { //If you don't upload or declare as thumb custom field func. gets custom (default) image
        echo get_bloginfo ( 'template_directory' ); //same as wp-content/themes/your-theme/
        echo '/images/image-pending.gif'; // Put this image into your themes images folder and set the path here
    }
} 
```

现在唯一的问题是， `<?php echo $thumbnail[0]; ?>`如果有多个图像，它会回显所有图像，如下所示

```
<img src="    http://applesiam.com/wp-content/uploads/2555-05-02_19h14_34-150x150.png        http://applesiam.com/wp-content/uploads/2555-05-02_19h14_11-150x150.png        http://applesiam.com/wp-content/uploads/2555-05-02_19h13_43-150x123.png        http://applesiam.com/wp-content/uploads/2555-05-02_19h13_20-150x150.png        http://applesiam.com/wp-content/uploads/2555-05-02_19h13_17-150x150.png    "> 
```

正如你所看到的，它只是被一些空格隔开。

现在我只想拥有最后一张图像，如果有多个图像`$thumbnail`

我不是 PHP 方面的专家，因为我的 PHP 课程将于下周开始。

提前感谢您提出的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:29:15.610

尝试：

```
$imgSrc = end((explode(' ', trim($imgSrc))); 
```

`$imgSrc`你投入的价值在哪里`<img src="!!!==>>here<<==!!!">`。

快速打字，无任何保修。应该保持单个 URL 不变，如果多个用空格分隔的 URL 将采用最后一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:29:03.443

试试这个。回声修剪($thumbnail[sizeof($thumbnail)-1]);

# java - 如何禁用ognl评估？

> ID：10433395
> 
> 赞同：0
> 
> 时间：2012-05-03T14:23:32.320
> 
> 标签：java, struts2, ognl

要强制 OGNL 评估，可以使用 %{} 语法，但应该使用什么来禁用它？

考虑以下代码 -

```
<s:a action="likeButton">
   <s:param name="returnAction" value="viewItem" />
</s:a> 
```

发生的情况是在值堆栈上查找 viewItem，当找不到时返回一个空字符串。

```
likeButton?returnAction= 
```

这不是我想要的。我想要的是作为参数传递的文字值 viewItem。

```
likeButton?returnAction=viewItem 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:40:23.423

您应该在双引号内用单引号分隔您的文字，然后就可以了。

```
<s:a action="likeButton">    
    <s:param name="returnAction" value="'viewItem'" /> 
</s:a> 
```

问候，

# java - 在JAVA中按顺序将多个mp3文件连接成1个mp3文件

> ID：10433397
> 
> 赞同：0
> 
> 时间：2012-05-03T14:23:37.920
> 
> 标签：java, audio, mp3

假设我有**多个 mp3**文件，我想将它们组合为**1 个 mp3**文件或在**JAVA**中另存为 1 个 mp3 文件。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:59:31.853

您也许可以使用[JLayer](http://www.javazoom.net/javalayer/javalayer.html)。这是一个较旧的库，但据报道是稳定的。浏览 api 似乎有一种方法可以完成您的任务。

这篇[文章](https://stackoverflow.com/questions/62618/what-is-the-best-way-to-merge-mp3-files)似乎还有一些您也可以调查的选项。

如果您可以在将文件加载到 Java 程序之前将它们转换为 .wav 格式，那么过去的[这个问题可能会有所帮助。](https://stackoverflow.com/questions/653861/join-two-wav-files-from-java)

您是否有理由需要使用 Java？像 FFmpeg 这样的工具可以创造奇迹，尽管学习曲线可能有点陡峭。

# c# - XML Schema 声明如何工作并相互引用？

> ID：10433400
> 
> 赞同：1
> 
> 时间：2012-05-03T14:23:46.240
> 
> 标签：c#, .net, xml, xsd

关于 Xml Schema 声明，我有一些基本的不理解。我在 .xsd 文件中有以下声明：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:simpleType name="tile">
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-z][0-9]"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:element name="move">
     <xs:complexType>
        <xs:sequence>
           <xs:element name="T" type="tile" />
        </xs:sequence>
     </xs:complexType>
  </xs:element>

</xs:schema> 
```

因此，例如，`<move><T>a0</T><T>v5</T></move>`根据 xsd 文件应该是一个有效的 XML 元素。（我已经简化了实际的声明，所以这个举动可能没有意义）

背景：我正在用 C# 4.0 开发一个项目。我使用这个 xsd 文件作为项目源。当我从某个地方收到一个 XElement 时，我首先根据上面的 xsd 检查它是否有效。C# 代码工作正常。

这是我的问题（希望是一个问题，被问了三遍）：

1）我想把我的声明放在一个域上。比方说`aliferhat.com`。还是我想要？我为什么要这样做？我怎样才能做到这一点？我以后如何从其他地方使用该声明？

2）我会有很多类似的xsd文件。他们中的大多数将使用“平铺”定义，所以我想将“平铺”部分放在一个单独的文件中，并从其他 xsd 文件中引用该文件。我怎样才能做到这一点？系统如何知道在哪里寻找定义？

3) 这是我在项目中添加新的 XSD 文件时 Visual Studio 生成的内容：

```
<xs:schema id="temp"
    targetNamespace="http://tempuri.org/temp.xsd"
    elementFormDefault="qualified"
    xmlns="http://tempuri.org/temp.xsd"
    xmlns:mstns="http://tempuri.org/temp.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
</xs:schema> 
```

`xmlns:xs`和属性有什么作用`targetNamespace`？其他的是否`xs:element`真的在这些 URI 之一中定义？C# 编译器真的会查找这些 URI 的定义吗？

我希望并且猜想我只问了一个问题。我已经阅读了 W3 学校的“XML 模式定义”页面，但找不到答案。任何帮助将不胜感激。

# objective-c - 使用 AFNetworking 的 setImageWithURL 时如何配置缓存

> ID：10433403
> 
> 赞同：3
> 
> 时间：2012-05-03T14:23:52.583
> 
> 标签：objective-c, caching, ios5, afnetworking

我`setImageWithURL`用来在我的应用程序中下载一些图像。是否可以：

1.  指定此图像必须在缓存中保存多长时间（例如 1 周）？
2.  指定缓存的最大总大小（例如 200 MB）
3.  看看图像缓存中有什么？
4.  清除缓存？

[文档](http://engineering.gowalla.com/AFNetworking/index.html)在这些点上并不是很清楚..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T16:06:21.330

该`UIImageView`类别使用内部的临时缓存来实现高性能，例如`UITableView`. 对于长期缓存，请使用系统级缓存系统——即 Peter Steinberger`SDURLCache`的`NSURLCache`.

在应用程序委托中使用以下代码进行设置`applicationDidFinishLaunching:withOptions:`：

```
SDURLCache *URLCache = [[SDURLCache alloc] initWithMemoryCapacity:1024*1024*2 diskCapacity:1024*1024*20 diskPath:[SDURLCache defaultCachePath]];
[URLCache setIgnoreMemoryOnlyStoragePolicy:YES];
[NSURLCache setSharedURLCache:URLCache];
[URLCache release]; 
```

# android - 没有数据库但保存游标的内容提供者：我可以/需要关闭查询的游标吗？

> ID：10433405
> 
> 赞同：0
> 
> 时间：2012-05-03T14:23:58.557
> 
> 标签：android

我对使用没有数据库的内容提供者有疑问。

这有一个带有矩阵游标的列表/HashMap。当对内容提供者进行查询时，通过说返回请求的数据（这是伪代码）

```
MatrixCursor mc = someMap[2];
return mc; 
```

如果查询客户端关闭游标怎么办？我猜 someMap 中的游标也将被关闭，因为返回的游标是对该对象的引用。我在这里正确吗？

编辑：

我想知道 getContentResolver() 机制是否总是处理光标的副本，因为 query() 不是直接的方法调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:37:24.703

我们没有足够的元素来回答您的问题，因为您没有显示您的哈希图以及如何填充它。

但是在 Java 中，如果你这样做：

```
Cursor cursorA =  new ....
Cursor cursorB = cursorA;
Cursor cursorC = getCursorAViaAMethod(); 
```

cursorC、cursorB 和 cursorA 是同一个 java 对象的引用（代码中的名称）。因此关闭一个，将关闭它们。

# ruby-on-rails - 在 Rails 3 中替换 Find[:all]

> ID：10433407
> 
> 赞同：1
> 
> 时间：2012-05-03T14:24:02.993
> 
> 标签：ruby-on-rails, ruby, activerecord

相当愚蠢的问题：我知道 activerecord 弃用了从 rails 2 到 rails 3 的一堆。我看过这样的页面[，](http://m.onkey.org/active-record-query-interface)可以解释如何用 User.where(etc 等等替换复杂的字符串。

但是，对于简单的替换，现在可行的解决方案是什么？给定一个“User”类，我将如何更新 Rails 3 activerecord 的 User.find[:all]？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:26:15.363

如果你想找到所有用户，你可以这样做

```
User.all # returns Array so you can not chain more Arel methods 
```

或已应用 default_scope 的范围方法（如果您正在使用它）

```
users = User.scoped  # returns ActiveRelation array so you can chain more Arel methods 
users.where(...).order(...) 
```

或跳过 default_scope 的无范围方法

```
User.unscoped # returns ActiveRelation array so you can chain more Arel methods 
users.where(...).order(...) 
```

# android - 保持 tcp 连接打开直到断开 Android

> ID：10433408
> 
> 赞同：0
> 
> 时间：2012-05-03T14:24:06.553
> 
> 标签：android, tcp

我目前正在编程 vor Android。我正在使用 C2DM 服务向我的应用程序发送通知。

当我回答通知时，我想连接到服务器，每次发送 http get 时都会连续发送图像。

我可以使用带有 while(!userDisconnect) 的 Asynctask 来执行此操作吗？或者我可以检查 Asynctask 何时完成并再次执行？我不确定，我在想它会在 while 循环中运行得非常慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:57:28.870

我自己找到了答案：

```
private OnClickListener getlistener = new OnClickListener() {

public void onClick(View v) {
    mHandler.removeCallbacks(mUpdateTimeTask);
    mHandler.postDelayed(mUpdateTimeTask, 1000);

}
};

private Runnable mUpdateTimeTask = new Runnable() {
   public void run() {
      if (response != null)
      {
          getal++;
          response.setText("Hallo" + getal);
          new NetworkTask().execute();
          //network();
       Log.i("Runnable", "OKE");
       mHandler.postAtTime(this, SystemClock.uptimeMillis() + 100);
      }
      else
      {
          Log.i("Runnable", "NULL");
      }
   }
}; 
```

# bash - 如何从文本文件中过滤 .exe 文件

> ID：10433410
> 
> 赞同：2
> 
> 时间：2012-05-03T14:24:12.240
> 
> 标签：bash, grep

这是文件中的示例行：

> O4 - HKLM..\Run: [TkBellExe] C:\Program Files\Common Files\Real\Update_OB\realsched.exe (RealNetworks, Inc.)

我只需要**realsched.exe**

```
egrep '^O4' file.txt | egrep '[[:alnum:]]{0,99}\.exe' 
```

模糊，但最接近有效的东西。（忽略第一个 grep，用它来查找 4 行）但是当 exe 文件有`_`then 之类的字符时，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:29:23.223

```
$ LINE='O4 - HKLM..\Run: [TkBellExe] C:\Program Files\Common Files\Real\Update_OB\realsched.exe (RealNetworks, Inc.)'
$ echo "$LINE" | egrep -o '[^\\]+\.exe'
realsched.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:36:49.010

您可以简单地在字符集中添加下划线。例如，'[[:alnum:]_]{0,99}.exe'。您需要包含所有可接受作为文件名的字符 (http://en.wikipedia.org/wiki/Filename)。

# internet-explorer - 使用 PowerShell 自动执行任务时如何在 IE8 中加载 Silverlight？

> ID：10433412
> 
> 赞同：1
> 
> 时间：2012-05-03T14:24:18.223
> 
> 标签：internet-explorer, powershell, powershell-2.0

我正在编写一个 PowerShell 脚本来自动执行一些任务。该脚本在我的测试环境中工作，但是当我转移到生产环境时，该脚本不起作用。我很快注意到 Silverlight 在生产环境中没有加载到 IE8 中（Web 应用程序只是提示安装 Silverlight）。

最初，这是代码的开头：`$ie = new-object -comobject "InternetExplorer.Application"`

不幸的是，Silverlight 没有在这里加载。

然后我尝试通过这样做（实际上加载了 Silverlight）在 IE8 中加载 Silverlight：`Start-Process iexplore.exe`

问题是，我无法捕获对象然后从那里导航......通过执行以下操作：`$ie = Start-Process iexplore.exe`和`$ie.navigate("blah")`

有一个更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:14:37.093

为了启动 32 位版本的 IE8，为什么不使用 32 位版本的 PowerShell 启动脚本，我的意思是：`%SystemRoot%\syswow64\WindowsPowerShell\v1.0\powershell.exe`

据我了解，UAC 帮助它将在注册表的 32Bits 部分中找到 32Bits COM 对象。

# google-chrome - 节点扩展框在 Internet Explorer 和 Chrome 中不可见，但在 Firefox 中可见

> ID：10433413
> 
> 赞同：3
> 
> 时间：2012-05-03T14:24:19.747
> 
> 标签：google-chrome, internet-explorer, radtreeview

我在 radcombobox 的项目模板中有一个 radtreeview。父节点可见，但其展开框不在 chrome 和 IE 中，但在 Firefox 中可见。![图片来自火狐](../Images/52c9731f6ea633628d2ee05cc7a2ac50.png)

![图片来自 IE](../Images/c9647836fac02c7cb09154a2e2edb397.png)

我错过了什么或者我能做些什么来解决这个问题。

# java - Java中replace方法的解释

> ID：10433415
> 
> 赞同：2
> 
> 时间：2012-05-03T14:24:26.720
> 
> 标签：java

我经常`replace(CharSequence,CharSequence)`在Java中使用该方法，但是今天遇到了一些我不太了解的东西。

当我做 ：

```
"|||".replace("||","| |"); 
```

为什么它会导致：`| ||`而不是`| | |`？为什么第二个`|`不能包含在两个模式中？

为了解决我的问题，我必须写`"|||".replace("||","| |").replace("||","| |");`这看起来有点多余。

任何人都有解释来帮助我更好地理解背后的机制？

**编辑**

所以有人说这是javadoc中指定的特殊情况，但是错误的例子如下：

```
 * The replacement proceeds from the beginning of the string to the end, for
 * example, replacing "aa" with "b" in the string "aaa" will result in
 * "ba" rather than "ab". 
```

所以它与我的情况不同，因为结果“ba”不再匹配“aa”。而在我的情况下，结果“| ||” 仍然包含模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:29:25.447

这里有两件事可能会导致混乱。首先，`replace`不会对同一个字符进行两次处理，所以中间`|`只能适用于单次替换。其次，replace 不处理替换字符，所以在第一次替换后你会有`| ||`，但第二次`|`是第一次替换的一部分。

所以基本上你得到的是在一次替换之后，你有第一个`||`被替换，其余的是`|`不匹配的，所以替换完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:24:20.907

不是真正的原因的答案，但这是一件好事

```
"|||".replace("||","| |"); 
```

不会导致`"| | |"`. 如果结果是这样，这意味着替换也在已经发生替换的字符串的一部分上执行。这将使编写无限循环变得非常容易，例如`"|".replace("|", "||" );`会导致`"||||||...."`直到您的字符串变得如此之大以至于内存不足

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:30:13.653

替换首先查看要在原始字符串中找到的字符序列，一旦找到，它会说，好的匹配开始`start`并结束于，让我们用替换替换该部分，然后继续从该位置`end`寻找下一个匹配`end + 1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T14:28:26.140

`replace()`为什么会按照您期望的方式运行，有两种可能性：

1.  它可以考虑重叠匹配（在您的示例中：匹配字符 1 和 2，然后是 2 和 3）。它不这样做。

2.  它可以递归替换，这意味着由于替换而添加/更改的内容将有资格进行进一步的匹配。它也不这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T14:34:24.177

你正在寻找的是

```
"|||".replace("|","| "); 
```

或者

```
"|||".replace("|","| ").trim(); 
```

如果你不想要最后一个空间。

为什么我让你自学。提示：搜索正则表达式替换。

# javascript - 在现有代码（HTML5 和 CSS 3）上实现新的图像叠加

> ID：10433416
> 
> 赞同：2
> 
> 时间：2012-05-03T14:24:35.420
> 
> 标签：javascript, jquery, html, css

如何让图像叠加层与此代码一起使用？

我想要的是一组图标，当光标移到图像上时，它们会覆盖在图像上。

[http://socialartist.co/index.html](http://socialartist.co/index.html)

有问题的代码是 HTML 5 和 CSS 3，并且有很多标记：

```
<ul class="items x_columns">
 <li data-id="id-1" data-cat="#luxury">
  <div class="preview"><a href="#" class="frame">
   <img src="https://i1.sndcdn.com/avatars-000008744854-5sr588-large.jpg?d408275" id="imgSmile" alt=""/></a>
  </div>
 <a class="title" href="#">Kirkbridge DNB</a>
 <p>UK | Drum and Bass</p>
</li> 
```

当我尝试添加一个新的 div 时，它只是破坏了设计（例如弄乱了预览类边框）

如上所述，是否有“一种简单的方法”来覆盖现有图像。

我真的不知道如何在 Fiddle 上进行设置；我希望 ppl 可以在上面的页面 URL 上使用开发人员工具（检查元素）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:32:18.960

如果我做对了：

在锚标签中添加要显示的图标：

快速而肮脏的例子：http: [//jsfiddle.net/ZVSVw/](http://jsfiddle.net/ZVSVw/)

```
<a href="#" class="frame">
   <img src="https://i1.sndcdn.com/avatars-000008744854-5sr588-large.jpg?d408275" id="imgSmile" alt=""/>
   <div class=overlay>ICON</div>
</a> 
```

将其设置为`display: none`默认设置并使用选择器对其进行样式设置`.frame:hover > .overlay`。

**对你的评论**

从您的 style.css:1654 中删除以下行：

```
a > .frame:hover, a.frame:hover{
    background: #ffffff;
    /* border: 1px solid #24bfb6;  remove this line */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:52:21.900

您可以使用属性集添加另一个覆盖图片，`display: none;`然后基本上在两张图片之间[切换](http://jsfiddle.net/junior87/cVRu7/)

Javascript：

```
jQuery('li[data-id="id-3"] > div').on('hover', 'a', function() {
    jQuery(this).find('img').toggle();
    jQuery(this).find('div.overlayContent').toggle();
});​ 
```

html:

```
<li data-id="id-3" data-cat="#holiday">
    <div class="preview">
        <a href="#" class="frame">
            <img src="http://..." alt="default picture">
            <div class="overlayContent" style="display: none;">...overlay content</div>
            <!--img src="http://..." alt="alternate picture" style="display: none;"-->
        </a>
    </div>
    <a class="title" href="#">TEST ME!</a>
    <p>Test this one!</p>
</li> 
```

# elasticsearch - 在 Elasticsearch 中，如何在仍然使用通配符的同时提升选定的术语？

> ID：10433424
> 
> 赞同：2
> 
> 时间：2012-05-03T14:25:05.220
> 
> 标签：elasticsearch, wildcard

我无法从文档中弄清楚如何跨多个术语进行通配符搜索，而只是提升/去提升一些。

我有一个 JSON 结构，例如：

```
{
  'indices_boost': {
    'football': 1.2,
    'horse-race': 1.1
  },
  'query': {
    'bool': {
      'minimum_number_should_match': 2,
      'should': [
        {
          'wildcard': {
            'name': {
              'boost': 1.2,
              'value': 'polan*'
            }
          }
        },
        {
          'wildcard': {
            'nicknames': u
            'polan*'
          }
        },
        {
          'wildcard': {
            'horses': 'polan*'
          }
        },
        {
          'wildcard': {
            'jockeys': 'polan*'
          }
        },
        {
          'wildcard': {
            'parent': {
              'boost': 0.7,
              'value': 'polan*'
            }
          }
        },
        {
          'terms': {
            'minimum_match': 1,
            'state': [
              'upcoming',
              'live'
            ]
          }
        }
      ]
    }
  },
  'size': 5
} 
```

目的是`name`应该提升该字段上的通配符匹配，而该`parent`字段上的通配符匹配仍然是相关的，但不应放在`name`匹配的结果之上。

此特定查询不会返回结果，即使它应该返回（`_all`使用通配符的查询会返回结果）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:53:52.930

您可以使用 'boost':0.0 来消除匹配项对分数的影响。

如果您为字段指定了非默认分析器，则这些字段可能包含与 _all 字段不同的术语，这可能解释了为什么通配符对 _all 有效，但对个别字段无效。

# primefaces - 验证错误值无效：primefaces

> ID：10433437
> 
> 赞同：-1
> 
> 时间：2012-05-03T14:25:44.317
> 
> 标签：primefaces

请帮助我找到解决方案。

这是 xhtml 代码：

```
<p:selectOneMenu value="#{activteBean.act.activiteFamille}" 
    converter="familleAct"
    var="f" required="Une famille est obligatoire" >
    <f:selectItems value="#{activteBean.actFamList}" var="famille" itemLabel="#        {famille.dsgFam}" itemValue="#{famille}"/>  
    <p:column>#{f.refFam}</p:column>  
    <p:column>#{f.dsgFam}</p:column>  
</p:selectOneMenu> 
```

这是我的转换器：

```
@FacesConverter(forClass=ActiviteFamille.class,value="familleAct" )
public class ActiviteFamilleConverter implements Converter {

@Override
public Object getAsObject(FacesContext arg0, UIComponent arg1, String code) {
    if (code.trim().equals("")) {
        return null;
    } else {
        ActiviteFamilleDao actFamDao = new ActiviteFamilleDao();
        List<ActiviteFamille> actFamList = actFamDao.findAll();

        for (ActiviteFamille af : actFamList) {
            if (af.getRefFam().equals(code)) {
                return af;
            }
        }

    }
    return null;
}

@Override
public String getAsString(FacesContext arg0, UIComponent arg1, Object value) {
    if (value == null || value.equals("")) {
        return "";
    } else {
        return String.valueOf(((ActiviteFamille) value).getRefFam());
    }
}
} 
```

托管bean：

```
@ManagedBean(name = "activteBean")
@ViewScoped
public class ActivteBean implements Serializable {

private Activite act = new Activite();
private ActiviteDao actDao = new ActiviteDao();
private List<Activite> actList;
private boolean init;

private ActiviteFamilleDao actFamDao = new ActiviteFamilleDao();
private List<ActiviteFamille> actFamList;

public boolean isInit() {
    act = new Activite();
    actList = actDao.findAll();
    actFamList=actFamDao.findAll();
    return init;
}
....
} 
```

并感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T06:38:11.877

如果`equals()`for 的方法`ActiveFamille`没有正确实现，就会发生这种情况。

错误消息表明所选（和转换的）值与列表中的任何元素都不匹配`activteBean.actFamList`。

尝试调试并在 equals() 方法中设置一个断点，`ActiveFamille`并尝试找出它不匹配的原因。

# django - 如何更改上传文件的文件名？

> ID：10433440
> 
> 赞同：0
> 
> 时间：2012-05-03T14:25:57.590
> 
> 标签：django

我有一个`ImageField()`我指定`upload_to`路径的地方。它可以保存到`MEDIA_ROOT`网址。但是我想将上传的文件更改为其他文件名。

我应该从 forms.py 还是从 models.py 执行此操作，还应该覆盖保存功能以存档吗？

**表格.py**

```
class UserAvatarForm(forms.ModelForm):
    class Meta:
        model = UserProfile
        fields = ('avatar',)
    def __init__(self, *args, **kwargs):
        super(UserAvatarForm, self).__init__(*args, **kwargs) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:29:55.790

[`upload_to`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)直接在`ImageField`头像中自定义。

通常它看起来像

```
def upload_to(instance, filename):
    import os.path
    # get extension from raw filename
    fn, ext = os.path.splitext(filename)
    new_filename = ...
    # return new filename, including its parent directories (based on MEDIA_ROOT)
    return "path/{new_filename}{ext}".format(new_filename=new_filename, ext=ext) 
```

您可以在该行引入新名称`new_filename`，取决于`instance`或`filename`任何其他有意义的字符串。甚至可以[通过 instance.pk 命名文件](https://stackoverflow.com/questions/9968532/django-admin-file-upload-with-current-model-id)

# ruby-on-rails-3 - 在 Rails 中为没有模型的控制器使用路由助手

> ID：10433441
> 
> 赞同：1
> 
> 时间：2012-05-03T14:26:09.427
> 
> 标签：ruby-on-rails-3, rails-routing, view-helpers

我有一个控制器`JaxDataController`用于响应没有关联模型的 ajax 请求。

它有一个 routes.rb 条目`match "/jaxdata/:shape_set_id" => "jax_data#fetch"`

我想在我的应用程序的其他地方的 .js.coffee.erb 视图中包含此模型的路径。有没有可用的路由助手？如果做不到这一点，我应该在哪里声明要在任何视图中使用的路由助手？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:58:22.973

如果您`:as`在路由中指定选项，它将为该路由创建助手。因此：

```
 match "/jaxdata/:shape_set_id" => "jax_data#fetch", :as => :jaxdata 
```

然后您应该能够`jaxdata_path`在您的视图中引用。

请参阅本指南的第 3.6 节：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# java - 我可以使用 BigInteger 中的哪个操作

> ID：10433443
> 
> 赞同：0
> 
> 时间：2012-05-03T14:26:14.350
> 
> 标签：java, biginteger

我有 bigInteger = 256，即二进制 100000000。我必须使用哪些操作来获得二进制结果 1 = 000000001？

编辑：

```
BigInteger.valueOf(256).xxx = 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:31:16.233

```
BigInteger newInt = new BigInteger("256").shiftRight(8); 
```

# javascript - 画廊删除图标

> ID：10433444
> 
> 赞同：0
> 
> 时间：2012-05-03T14:26:14.677
> 
> 标签：javascript, jquery-ui, galleria

我一直在使用 Galleria 包来创建一个图片库。我现在想添加一个删除工具，以便用户可以删除他们想要的任何图像。

使用[这个](http://jqueryui.com/demos/droppable/photo-manager.html)演示作为基线，我获取了我需要的代码元素，并尝试将其合并到我的画廊页面[中](http://www.mapmyfinds.co.uk/development/testgallery.php)。问题是，我无法让“bin”图标出现在每个图像的底部，因此我无法看到使图像从屏幕上消失的功能是否真的有效。我不需要从服务器中删除图像的代码。我稍后会处理这个问题。

我对 Javacript 和 jQuery 真的很陌生，所以请随时跟我说话。但是我已经为此工作了数周，但我找不到解决方案。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:42:44.743

将此样式添加到您的 CSS 规则中：

```
.btn-delete {
    width: 14px; height: 14px;
    margin: 38px 0 0 66px;
    position: absolute;
}
.icon-remove { background-position: -312px 0; }
.icon-white { background-image: url('http://twitter.github.com/bootstrap/assets/img/glyphicons-halflings-white.png'); } 
```

在你的 jQuery 中：

```
$(".galleria-image").append(
     "<span class='btn-delete icon-remove icon-white'></span>");

$(".btn-delete").live("click", function() {
    var img = $(this).closest(".galleria-image").find("img");

    alert('Deleting image... ' + $(img).attr("src"));
    return false;
}); 
```

这将执行以下操作：

![在此处输入图像描述](../Images/f8418c9d9ae5e833448cebffb1ff52f4.png)

现在，您可以简单地发送一个 ajax 请求`$.get()`，例如，传递用户想要删除的图像的 ID/SRC 并刷新您的代码/删除属于该选定图像的所有图像。

# c# - 跨线程问题，BackgroundWorker 和 ReportProgress

> ID：10433446
> 
> 赞同：0
> 
> 时间：2012-05-03T14:26:20.677
> 
> 标签：c#, winforms, multithreading

我有一个 [STAThread] main，其中包含以下内容：

```
try
{
    // Start the port enumerator.

    Enumerator enumerator = new Enumerator();

    // Display the main window and start everything going.

    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new TopViewForm(ref enumerator));
}
catch (Exception)
{
} 
```

枚举器对象本身包含一个后台工作线程。后台工作初始化如下：

```
MyBackgroundWorker = new BackgroundWorker();
MyBackgroundWorker.WorkerSupportsCancellation = true;
MyBackgroundWorker.WorkerReportsProgress = true;
MyBackgroundWorker.DoWork +=new DoWorkEventHandler(MyBackgroundWorker_DoWork);
MyBackgroundWorker.ProgressChanged += new ProgressChangedEventHandler(MyBackgroundWorker_ProgressChanged);
MyBackgroundWorker.RunWorkerCompleted +=new RunWorkerCompletedEventHandler(MyBackgroundWorker_RunWorkerCompleted);
MyBackgroundWorker.RunWorkerAsync(); 
```

现在，为了向主窗体（TopViewForm 的实例）报告进度，Enumerator 中的线程正在使用一些适当的用户对象调用 ReportProgress。我假设 ReportProgress 将以 ProgressChanged 事件的形式到达并在主 UI 线程上执行，主 UI 线程是 Enumerator 本身创建的线程（即不是 BackgroundWorker 的线程）。

鉴于这种情况，当我尝试在主进程线程上的 TreeView 中设置一个节点以响应来自该对象的事件时，我怎么可能遇到跨线程冲突错误？ProgressChanged 绝对*没有*在主进程线程上运行，查看调用堆栈。

那么我假设 Application.Run 会生成一个新线程并使用它运行表单？但文件另有说明。要么我犯了一个愚蠢的错误，要么这里有一些我不明白的地方。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:45:19.923

我相信进度更改事件在`Application.Run`第一次调用之前正在运行。如果您不从 启动后台工作`Main`程序，而是从其中一种表单中启动，您将确保在创建后台工作程序并开始报告进度时消息循环已经存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:46:47.663

BackgroundWorker 依赖于设置的当前 SynchronizationContext 才能运行。ProgressChanged 事件作为[SendOrPostCallback Delegate](http://msdn.microsoft.com/en-us/library/system.threading.sendorpostcallback.aspx)实现，正如 msdn 文档中所述，SendOrPostCallback 表示您希望在将消息分派到同步上下文时执行的回调方法。在表单设计器中将 BackgroundWorker 添加到表单会正确设置 SynchronizationContext。在您的情况下，BackgroundWorker 没有分配 SynchronizationContext。

# iphone - 如何使用 zlib（示例）将一组文件压缩为目标 c 中的 zip 文件？

> ID：10433451
> 
> 赞同：1
> 
> 时间：2012-05-03T14:26:48.310
> 
> 标签：iphone, objective-c, cocoa-touch, zlib

我正在一个将一组文件压缩为一个zip文件的项目中工作，我想使用内置框架（zlib）来避免其他类型的框架（如objective zip）可能暴露的任何链接或任何其他类型的错误，所以我想要任何讨论如何使用这个库的示例代码，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:31:55.733

您可能会查看[objective-zip](http://code.google.com/p/objective-zip/)。

例子：

```
ZipWriteStream *stream= [zipFile writeFileInZipWithName:@"abc.txt" compressionLevel:ZipCompressionLevelBest];
[stream writeData:abcData];
[stream finishedWriting]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:30:32.410

查看这个库：[ZipKit](https://bitbucket.org/kolpanic/zipkit/wiki/Home)

# iphone - UIWindow 子视图在应用程序变为活动状态后消失

> ID：10433459
> 
> 赞同：1
> 
> 时间：2012-05-03T14:27:22.793
> 
> 标签：iphone, ios, uiview, uiviewcontroller

所以，我试图在 Application UIWindow 上实现一个固定的顶部横幅和多个视图控制器的工作导航。我知道还有其他方法可以执行此操作，但对于我的项目要求，我需要使用 xibs。

下面的代码允许实现这一点：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    self.headerView = [[UIImageView alloc] init];
    self.headerView.frame = CGRectMake(0.0f, 20.0f, 320.0f, 44.0f);
    self.headerView.image = [UIImage imageNamed: @"header-banner-background.png"];
    [self.window addSubview:self.headerView];

    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

然后在每个 ViewController viewWillAppear 方法中，我调整了 self.view 和 self.navigationController.navigationBar.frame 的大小，以便在横幅下方显示自己：

```
self.navigationController.navigationBar.frame = CGRectMake(0, 64, 320, 44);
self.view.frame = CGRectMake(0, 64, 320, 396); 
```

这很好，完全按照我想要的方式工作。

**但是如果用户按下主页按钮并且应用程序退出活动状态，当它再次变为活动状态时，最后一个 viewController 会显示但没有 UIWindow 横幅，并且 self.view 和 navigationBar 显示在顶部。**

当然，当前的 UIViewController viewWillAppear 方法在应用程序返回活动时不会被调用，但即使我将调整大小代码放在另一个函数中并通过通知调用它也不起作用。但是当用户按下一个 bar item 并在导航堆栈中移动时，一切都会再次运行，UIWindow 会显示 headerView。

**任何人都明白为什么当应用程序返回活动时 UIWindow headerView 会消失？**

**编辑1：可能的解决方案？**

```
@interface RootViewController ()
{
    ViewController *viewController;
    UINavigationController *navigationController;
}

@end

@implementation RootViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
    }
    return self;
}

- (void)loadView
{
    // Implement loadView to create a view hierarchy programmatically, without using a nib.
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 88)];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [imageView setImage:[UIImage imageNamed:@"header"]];

    [view addSubview:imageView];

    navigationController.navigationBar.frame = CGRectMake(0, 44, 320, 44); 

    [view addSubview:navigationController.navigationBar];

    self.view = view;

} 
```

**编辑 2：第二种可能的解决方案，仍然无法正常工作**

```
- (void)loadView
{
    NSLog(@"loadView root");

    // Implement loadView to create a view hierarchy programmatically, without using a nib.
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 88)];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [imageView setImage:[UIImage imageNamed:@"banner"]];
    [view addSubview:imageView];

    navigationController = [[UINavigationController alloc] init];
    navigationController.navigationBar.frame = CGRectMake(0, 43, 320, 44); 
    [view addSubview:navigationController.navigationBar];

    [self addChildViewController:navigationController];

    self.view = view;
    [self.view setBackgroundColor:[UIColor yellowColor]];
} 
```

这是结果，看起来很好，没有 viewController1 的推送（注意黄色背景来自 rootViewController）：

![无推](../Images/f452658db29eb5ae3c6c121e6e360bb2.png)

相反，这是添加的结果：

```
- (void)viewDidLoad
{
    viewController1 = [[ViewController1 alloc] initWithNibName:@"ViewController1" bundle:nil];
    [navigationController pushViewController:viewController1 animated:YES];    
} 
```

![带推](../Images/0b04bf9104a5e3751bee619fbfa67342.png)

新的视图控制器没有被推送（背景应该是黑色的）并且导航栏已经消失了。

**编辑 3：Olloqui 解决方案，仍然无法正常工作**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window setBackgroundColor:[UIColor redColor]];

  UIView *bannerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [self.window addSubview:bannerView];

    UIView *navigationView = [[UIView alloc] initWithFrame:CGRectMake(0, 44, 320, 416)];

    ViewController1 *viewController1 = [[ViewController1 alloc] initWithNibName:@"ViewController1" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:viewController1];
    self.navigationController.navigationBar.frame = CGRectMake(0, 0, 320, 44); 

    [navigationView addSubview:self.navigationController.navigationBar];

    [self.window addSubview:navigationView];

    self.window.rootViewController = self.navigationController;

    self.window.autoresizesSubviews = YES;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

结果是我只有横幅，viewController1 被推送但没有显示导航栏。我真的需要弄清楚这一点，有人有不同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:51:36.537

窗口期望有一个由它的 rootViewController 属性控制的根视图。从后台返回时，窗口只要求 rootViewController 恢复该视图控制器视图的外观。它不会要求所有子视图刷新。

为了解决这个问题，我将创建一个新的根视图控制器。这将具有横幅和导航控制器。然后，该导航控制器将保存您的普通视图控制器并管理导航。应用程序从后台返回后，横幅将正确显示。当导航发生在导航控制器中时，您的横幅将是静止的。

**编辑：**我制作了一个小示例程序。

我从一个简单的单视图应用程序模板开始。我为内容添加了两个视图控制器。仅具有用于区分的标签，并且具有用于加载第二个视图的按钮。

所有的魔法都发生在主视图控制器的 viewDidLoad 方法中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    OneViewController *oneVC = [[OneViewController alloc] initWithNibName:@"OneViewController" bundle:nil];
    self.navController = [[UINavigationController alloc]initWithRootViewController:oneVC];
    self.navController.view.frame = CGRectMake(0.0, 64.0, 320.0, 416.0);
    [self.view addSubview:self.navController.view];
    [self addChildViewController:self.navController];   
} 
```

此视图的 nib 加载横幅的图像视图。

[Bitbucket 上的示例项目。](https://bitbucket.org/mr_berna/uinavigationcontroller-with-banner)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:51:47.077

我以前从未尝试过，但我会尝试在 UIWindow 中创建 2 个视图，一个用于横幅，另一个用于导航 + 内容。然后，在第二个视图中插入导航栏视图，该视图的大小将正确。我不确定导航是否会尝试占用整个窗口，但是在每个 viewWillAppear 上调整导航控制器的大小对我来说并不是一个好的解决方案。尝试并评论结果！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-26T07:26:26.743

我认为您可以尝试通过将横幅视图添加到 window.rootViewController.view 来解决此问题，如下所示：

```
[window.rootViewController.view addSubview:bannerView] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:31:53.690

好的，我真的需要尽快解决这个问题，因此我选择了一个我有幸在[这里](https://stackoverflow.com/questions/3181193/how-to-add-a-banner-image-view-on-top-of-uinavigation-bar)找到的解决方案。我仍然必须解决底部添加的 UITabBarController 的管理，但其余部分似乎工作正常。感谢大家的帮助和其他提示。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    [self.window setBackgroundColor:[UIColor redColor]];

    // Create a view  for the banner add the banner to this view
    UIImageView *bannerImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 45)];
    bannerImageView.image = [UIImage imageNamed:@"banner"];

    // put this banner above the nav bar 
    UIView *bannerView = [[UIView alloc] initWithFrame:CGRectMake(0, -44, 320, 44)];
    [bannerView addSubview:bannerImageView];

    //add the tabBarController as a subview of the view
    UITabBarController *tabBarController = [[UITabBarController alloc] init];
    [tabBarController.view addSubview:bannerView];

    // Move the root view to show status bar & banner
    tabBarController.view.frame = CGRectMake(0, 20+44, 320, 480-20-44); 

    //add the modified logo view to window
    [self.window addSubview:tabBarController.view];

    ViewController1 *viewController1 = [[ViewController1 alloc] initWithNibName:@"ViewController1" bundle:nil];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:viewController1];

    tabBarController.viewControllers = [NSArray arrayWithObjects:navigationController, nil];
    //tabBarController.tabBar.hidden = YES;

    [self.window setRootViewController:tabBarController];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

# c++ - 线程作为类，如何保证子类的数据在之后被销毁？

> ID：10433460
> 
> 赞同：2
> 
> 时间：2012-05-03T14:27:28.603
> 
> 标签：c++, multithreading, design-patterns, pthreads

我写了一个模仿java线程的pthread/windows本机线程的包装器。

```
class Thread{
public:
  virtual void run()=0;
  void start();
  void join();

  virtual ~Thread(){
   join(); 
  }
}; 
```

认为

```
 class B:public Thread{
  int x;     
  void run(){
    while some condition do soemething on x;
  }
}; 
```

如果 B 的实例在 run() 返回之前被破坏，线程将继续访问 x，这显然是不可取的。为了解决我需要添加的问题

```
B::~B(){
 join();
} 
```

因为 Thread::~Thread() 是在 B::x 被销毁之后调用的，所以 join 没有效果。

但是，如果我有 class C: public B 和一些额外的数据，我仍然需要定义 C::~C(){join();}

依此类推，所有的层次结构

另一种方法是做

```
template<typename R>
 struct SafeThread:public R,public Thread{
  void run(){
    R::run();
  }
}; 
```

这样 R 数据（我们之前的 B::x ）将在线程加入后被销毁。然而，仍然

```
class B{
  virtual void f(){...}
  void run(){ f();}
};

class C:public SafeThread<B>{
  int y;
  void f(){
  ...something on y;
  }

}; 
```

仍然会有类似的问题。您是否认为有任何优雅的解决方案可以解决在 run 方法终止后确保数据被销毁的问题，而不是强制每个子类 SC 定义 SC::~SC(){join();} ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:48:39.407

你可以把你的`Thread`类写成一个模板，接受任何带有 的类`operator()`，当`Thread::run()`被调用时会相应地调用它。下面的代码显示了这个想法。必要时进行更改。

```
template<typename T>
class MyThread
{
    T & _obj;
    MyThread() = delete;
    MyThread(T& o) : _obj(o) {}
    void run() 
    {
        _obj();
    }
    // other member functions
};

struct B {
    int data_to_process;
    void operator()() {
        // do something with data
    }
}

// usage
B b;
MyThread<B> t(b);
t.run(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:31:25.560

我认为您只需要使用带有调用连接的基类的虚拟析构函数即可。

例如

```
class Thread{
public:
  virtual void run()=0;
  void start();
  void join();

protected:
  virtual ~Thread() 
  {
     join( ); 
  }
}; 
```

# silverlight - Silverlight RichTextBox 中的 XAML 标记大小过大

> ID：10433461
> 
> 赞同：5
> 
> 时间：2012-05-03T14:27:34.810
> 
> 标签：silverlight, richtextbox, silverlight-5.0

我在 silverlight 5 应用程序中有一个非常简单的 RichTextBox 控件。

```
<RichTextBox x:Name="rtbControl" 
    Height="Auto" 
    ContentChanged="rtbControl_ContentChanged" /> 
```

随着数据的更改，我将其捕获在一个局部变量中，如下所示：

```
 private void rtbControl_ContentChanged(object sender, ContentChangedEventArgs e)
    {
        RichTextContent = rtbControl.Xaml;
    } 
```

所有作品。但是，如果我只输入几个单词并检查`<Paragraph>`标记，那就太棒了！下面是一个片段。有没有办法在标记中不包含所有排版内容？为什么它存在并且需要它？有没有办法删除它？

```
<Section xml:space="preserve" HasTrailingParagraphBreakOnPaste="False" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
<Paragraph FontSize="11" FontFamily="Segoe UI" Foreground="#FF000000" FontWeight="Normal" FontStyle="Normal" FontStretch="Normal" 
CharacterSpacing="0" Typography.AnnotationAlternates="0" Typography.EastAsianExpertForms="False" Typography.EastAsianLanguage="Normal" 
Typography.EastAsianWidths="Normal" Typography.StandardLigatures="True" Typography.ContextualLigatures="True" 
Typography.DiscretionaryLigatures="False" Typography.HistoricalLigatures="False" Typography.StandardSwashes="0" Typography.ContextualSwashes="0" 
Typography.ContextualAlternates="True" Typography.StylisticAlternates="0" Typography.StylisticSet1="False" Typography.StylisticSet2="False"
 Typography.StylisticSet3="False" Typography.StylisticSet4="False" Typography.StylisticSet5="False" Typography.StylisticSet6="False" Typography.StylisticSet7="False" 
Typography.StylisticSet8="False" Typography.StylisticSet9="False" Typography.StylisticSet10="False" Typography.StylisticSet11="False" 
Typography.StylisticSet12="False" Typography.StylisticSet13="False" Typography.StylisticSet14="False" Typography.StylisticSet15="False" 
Typography.StylisticSet16="False" Typography.StylisticSet17="False" Typography.StylisticSet18="False" Typography.StylisticSet19="False" 
Typography.StylisticSet20="False" Typography.Capitals="Normal" Typography.CapitalSpacing="False" Typography.Kerning="True" Typography.CaseSensitiveForms="False" 
Typography.HistoricalForms="False" Typography.Fraction="Normal" Typography.NumeralStyle="Normal" Typography.NumeralAlignment="Normal" Typography.SlashedZero="False"
 Typography.MathematicalGreek="False" Typography.Variants="Normal" TextOptions.TextHintingMode="Fixed" TextOptions.TextFormattingMode="Ideal" 
TextOptions.TextRenderingMode="Auto" TextAlignment="Left" LineHeight="0" LineStackingStrategy="MaxHeight"><Run>was it a </Run><Run TextDecorations="Underline">bad 
</Run><Run>blah? or </Run></Paragraph></section> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T13:20:40.057

我想我会分享我的解决方案来帮助别人......它已经存在了几个月，我还没有看到任何不良的副作用。

我创建了一些扩展方法来帮助删除 Typography 属性。

```
public static class RichTextBoxExtensions {
        // <summary>
        /// Removes any xml tag with the prefix given from a string
        /// </summary>
        /// <param name="XMLString"></param>
        /// <param name="TagPrefix"></param>
        /// <returns></returns>
        public static string RemoveXMLAttributesFromNode(this string XMLString, string prefix)
        {
            //Match [Prefix][any number of Not =][=]["][any number of Not "]["][ ] <-must have space!!!
            string replace = prefix + "[^\\=]*=\"[^\"]*\" ";
            return Regex.Replace(XMLString, replace, string.Empty);
        }
        /// <summary>
        /// Removes any xml tag with prefixed by an element in unWanted
        /// </summary>
        /// <param name="XMLString"></param>
        /// <param name="TagPrefix"></param>
        /// <returns></returns>
        public static string RemoveXMLAttributesFromNode(this string XMLString, List<string> unWanted)
        {

            foreach (string prefix in unWanted)
            {
                //Match [Prefix][any number of Not =][=]["][any number of Not "]["][ ] <-must have space!!!
                string replace = prefix + "[^\\=]*=\"[^\"]*\" ";
                XMLString = Regex.Replace(XMLString, replace, string.Empty);
            }
            return XMLString;
        } 
```

接下来，在我将字符串保存到数据库之前，我删除了错误的属性，如下所示：

```
 List<string> badAttributes = new List<string>();
        badAttributes.Add("Typography");
        var ffText = ffi.FreeFormText == null ? null : ffi.FreeFormText.RemoveXMLAttributesFromNode(badAttributes); 
```

删除这些属性后重新渲染 RTF 时，我没有看到任何问题。希望这个解决方案可以帮助某人！

# actionscript-3 - 为什么 TRY / CATCH 会覆盖默认属性值？

> ID：10433464
> 
> 赞同：2
> 
> 时间：2012-05-03T14:27:40.197
> 
> 标签：actionscript-3, flex4, try-catch

我正在使用一个值对象，它可以在实例化时接收对象，因此可以在创建新 VO 时直接更新其默认值，如下所示：

```
public class SeatSettingsVO
{
    public var globalPosition:Point = new Point(0, 0);
    public var dealerChipOffset:Point = new Point(0, 0);
    public var chipStackOffset:Point = new Point(0, 0);

    public function SeatSettingsVO(obj:Object = null)
    {
        if (obj)
            parseSettings(obj);
    }
} 
```

该`parseSettings`方法使用**try/catch**块来仅获取传递给构造函数的对象中的现有属性（或者至少，这是意图）：

```
 private function parseSettings(obj:Object):void
    {
        try
        {
            this.globalPosition = obj.globalPosition;
            this.chipStackOffset = obj.chipStackOffset;
            this.dealerChipOffset = obj.dealerChipOffset;
        }
        catch (error:Error)
        {
        }
    } 
```

现在考虑这种情况：需要创建一个新的值对象，但只定义了三个属性之一：

```
new SeatSettingsVO({globalPosition:new Point(300, 277)}) 
```

问题在于，如果`obj`不包含特定属性（例如`chipStackOffset`），则该方法不会保持初始属性值（Point(0,0)），而是将其覆盖为`null`。

我的猜测是，访问 Object 类实例上不存在的属性不会触发错误，而是`null`会返回，这反过来会导致默认值被覆盖。谁能解释这种行为，并可能提出解决方案？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:52:36.553

比其他更简洁的解决方案：

```
this.globalPosition = obj.globalPosition || DEFAULT_GLOBAL_POSITION; 
```

就像在 Python 中一样，|| 如果该操作数的计算结果为 0、null、false、NaN、"" 或 undefined 以外的值，则运算符返回第一个操作数。否则，它按原样返回第二个操作数：

```
trace(new Point(3, 3) || "hi"); //(x=3, y=3)
trace(false || "hi"); //hi
trace("hi" || "bye"); //hi
trace(0 || null); //null
trace(NaN || 0); //0
trace("" || undefined); //undefined
trace(undefined || new Point(0.4, 0)); //(x=0.4, y=0)
trace(null || false); //false 
```

因此，您可以使用它来检查是否定义了一个值，如果是，则使用该值，如果没有，则使用默认值。老实说，我不确定它是否使您的代码更具可读性，但这是一种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:44:04.137

在这种情况下，您的对象是动态的，因此如果该属性不存在，您不会收到异常。但是，您确实得到`undefined`. `undefined`计算结果为 null，所以你总是可以说：

```
this.globalPosition = obj.globalPosition ? obj.globalPosition : default; 
```

`default`你想放在那里的东西在哪里......如果你想把它设置回原来的样子，甚至可以`this.globalPosition`工作。

您还可以询问该属性是否存在：

```
if( "globalPosition" in obj) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T14:34:43.643

Flex 对象有一个[`hasOwnProperty()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Object.html#hasOwnProperty%28%29)您可能会觉得有用的方法。您可以使用它来检查动态对象是否定义了参数，并且仅在存在时将其拉出，而不是获取空值。

```
if (obj.hasOwnProperty("globalPosition"))
    this.globalPosition = obj.globalPosition;
//etc... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:49:27.917

```
 private function parseSettings(obj:Object):void
    {
        try
        {
            this.globalPosition = obj.globalPosition;
            this.chipStackOffset = obj.chipStackOffset;// when error occured here,
            // this.chipStackOffset still waiting for a value to set and it sets to null.
            // probably dealerChipOffset doesnt change by default value.
            this.dealerChipOffset = obj.dealerChipOffset; // this is {0,0} point prob,didnt try it.
        }
        catch (error:Error)
        {
        }
    } 
```

我会使用类似下面的东西。希望能帮助到你。

```
 private function parseSettings(obj:Object):void
    {
       for(var name in obj){
            this[name] = obj[name];
       }
    } 
```

# android - Mapview 地理点正在按住屏幕

> ID：10433465
> 
> 赞同：0
> 
> 时间：2012-05-03T14:27:40.253
> 
> 标签：android, android-mapview, projection

我在一个简单的任务上遇到了麻烦。

我正在尝试在如下所示的地图左上角绘制一个正方形。（地图投影左上角）

![在此处输入图像描述](../Images/1179f1e6a96137eb67bb533be914fe0e.png)

但是，当我使用 TileSystem ( `TileSystem.PixelXYToLatLong`) 将像素 0,0 转换为纬度和经度时，该点看起来像是在屏幕上而不是在地图上绘制的......为什么？

编码：

```
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    // Translate point to x y coordinates on the screen

    Paint paint = new Paint();
    paint.setStyle(Paint.Style.FILL);

    Point point1_draw = new Point();
    Point point2_draw = new Point();
    Point point3_draw = new Point();
    Point point4_draw = new Point();

    mapView.getProjection().toPixels(geoPointFromScreenCoords(0,0,mapView),
            point1_draw);
    mapView.getProjection().toPixels(geoPointFromScreenCoords(0,100,mapView),
            point2_draw);
    mapView.getProjection().toPixels(geoPointFromScreenCoords(100,0,mapView),
            point3_draw);
    mapView.getProjection().toPixels(geoPointFromScreenCoords(100,100,mapView),
            point4_draw);

    Path path = new Path();
    path.setFillType(Path.FillType.EVEN_ODD);
    path.moveTo(point1_draw.x, point1_draw.y);
    path.lineTo(point2_draw.x, point2_draw.y);
    path.lineTo(point3_draw.x, point3_draw.y);
    path.lineTo(point4_draw.x, point4_draw.y);
    path.lineTo(point1_draw.x, point1_draw.y);
    path.close();

     //canvas.drawCircle(120, 20, 15, paint);
    canvas.drawPath(path, paint);

    super.draw(canvas, mapView, false);

}` 
```

我正在扩展 ItemizedOverlay。而且这条路径是在屏幕上而不是在地图上绘制的。所以当我滚动离开时，这条路径会随着地图移动......我不想要那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:49:13.500

你为什么要覆盖`draw`而不是`addItem`？

这是有关如何在地图上绘制的[视频](http://www.youtube.com/watch?v=soxX_3QYUVc)

# asp.net - ASP.NET 4 解析器错误

> ID：10433467
> 
> 赞同：1
> 
> 时间：2012-05-03T14:27:41.890
> 
> 标签：asp.net, html, asp.net-4.0

我收到了一个 asp.net 2 来升级到 .net 4。虽然大部分进展顺利，但我被困在一条找不到解决方案的线上。

我得到一个`Parser Error Message: The server tag is not well formed.`

在这条线上

```
<li><a class="tooltip viewPolicyLink" rel="<%#Eval("key")%>"
              title="<%#Eval("value")%>"
              href="<%#ResolveUrl("~/Views/Pages/ViewPolicy.aspx")%>"
              runat="server"><%#Eval("key")%></a></li> 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:30:29.253

你搞砸了`"` 尝试：

```
 <li><a class='tooltip viewPolicyLink' rel='<%#Eval("key")%>'
                  title='<%#Eval("value")%>'
                  href='<%#ResolveUrl("~/Views/Pages/ViewPolicy.aspx")%>'
                  runat="server"><%#Eval("key")%></a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:30:57.340

双引号嵌套在 rel、title、href 属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:31:08.150

`Eval()`设置包含表达式的标记值时需要使用单引号。原因是`Eval`需要双引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:31:40.183

尝试对包含服务器端命令的属性使用单引号：

```
<li><a class="tooltip viewPolicyLink" rel='<%#Eval("key")%>'
              title='<%#Eval("value")%>'
              href='<%#ResolveUrl("~/Views/Pages/ViewPolicy.aspx")%>'
              runat="server"><%#Eval("key")%></a></li> 
```

# android - Android中的启动画面

> ID：10433469
> 
> 赞同：0
> 
> 时间：2012-05-03T14:27:46.727
> 
> 标签：android, android-activity

我正在创建一个加载动态 UI 的应用程序。我的问题是当我从一个活动开始到另一个活动时，第二个活动由于动态加载 UI 而显示黑屏。

我有以下问题：我可以启动一个活动以在另一个活动（如启动画面）的后台（如服务）中运行。

***示例***活动 A（启动画面）启动活动 B（主要活动）。Activity B 需要一些时间来加载其动态 UI。完成加载后，我想显示 Activity B。在完成加载之前，我希望 Activity A 在前台运行，B 在后台运行。

我尝试过线程、定时器和异步任务。立即开始活动 B.. 请分享您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:37:25.083

我认为在 AsyncTask 中加载数据时，您应该有一种启动屏幕或全局覆盖。

```
ActivityA -> launches -> ActivityB
ActivityB -> displays SplashScreen
          -> run AsyncTask -> populated ActivityB 
```

阅读[正确完成的 Android SplashScreens](http://blog.iangclifton.com/2011/01/01/android-splash-screens-done-right/)

所以你不需要 ActivityB 在后台。你刚才：

*   在ActivityB**上方**显示一个等待屏幕/覆盖/任何内容
*   ActivityB 被实时填充

# java - eclipse 用感叹号标记每个新项目

> ID：10433474
> 
> 赞同：4
> 
> 时间：2012-05-03T14:27:57.013
> 
> 标签：java, eclipse

我的 Eclipse 用感叹号标记每个新项目。 ![在此处输入图像描述](../Images/ac6c30bc621626f3b00e049529d6e745.png)

我尝试了此处提供的步骤：[Unbound classpath container in Eclipse](https://stackoverflow.com/questions/2083461/unbound-classpath-container-in-eclipse) but no cigar。

我能够删除 java 1.7 并添加旧的 1.6 但现在我收到此错误：

```
java.lang.UnsupportedClassVersionError: klasse : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$000(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source) 
```

线程“主”中的异常

我几乎迷路了。java对我来说似乎很简单。也许我应该重新安装它？

/编辑：因为有些人不相信我： ![在此处输入图像描述](../Images/9442cbe3d479fda8c8cdf55397cdbcff.png)

klasse.java 没有问题（其他一些项目有一些我无法打扰的正常错误，并且 CSVAufbereitung 在我按照上述步骤操作之前在 klasse.java 中有错误。

（这就是我首先提出这个问题的原因）

**重要提示**：我刚刚意识到我在安装 jdk1.7 和 jre1.7 的同时只安装了 jre1.6。

所以当我切换回 1.6 时它不会工作，因为我没有安装 jdk1.6。

傻我。但我想继续使用 1.7

所以主要问题是：为什么 1.7 不再可用（“未绑定”）？

**更新：**

我发现我可以创建 1.6 项目，并且它们将毫无错误地运行。

如果我用 1.7 创建项目，它们将无法运行。

如果我将这些项目降级到 1.6，它们仍然无法运行。

因为我想使用 1.7，所以这很烦人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:42:23.403

去`Window > Preferences`看看`Java > Installed JREs`，有问题。。。

![在此处输入图像描述](../Images/59cc83e951a58e7e330f17934b27b95f.png)

当您更改 JRE/JDK 时，您应该执行`Project > Clean...`强制重建，这应该会有所帮助。

我写的这个“问题”视图

![在此处输入图像描述](../Images/331abbac95db692900281bc35d0e9248.png)

并检查 Shadark 关于合规级别的建议，1.6 是您想要的。

![在此处输入图像描述](../Images/eaf2bafaf8528753d9029c66789f5112.png)

还要检查你的项目`Java build path`

![在此处输入图像描述](../Images/5ebb8b839e66cd9d9acfe0a20dec44c3.png)

如果选中“启用项目特定设置”，则还有项目编译器设置，这些设置具有更高的优先级。

![在此处输入图像描述](../Images/5da14ec6af8ce284d7906a9b2023e96b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:46:40.117

您应该在构建选项中选择使用 Java 1.6 而不是 1.7 构建项目，因为您没有安装它。希望它有所帮助（我也得到了不受支持的major.minor版本错误）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T14:37:22.843

> java对我来说似乎很简单。也许我应该重新安装它？

这不太可能是问题/解决方案。

事实上，Eclipse 正在运行这一事实清楚地表明您已经安装了可行的 Java。即 Eclipse 用来运行的那个。

我建议您查看 Eclipse“问题”视图并阅读与标记项目相关的错误消息。这可能是项目或 Eclipse 的工作空间首选项的问题。

* * *

您可以尝试的其他操作包括刷新工作区 (F5) 和重新启动 Eclipse。

* * *

还要查看“错误”视图和/或 Eclipse 错误日志，看看它是否包含任何可能为您指明正确方向的消息/堆栈跟踪。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T14:39:15.433

首先，你应该以大写字母开头你的类名：

```
public class Klasse { 
```

其次，当您右键单击您的项目并转到 Properties，然后转到 Java Build Path，您应该在此处列出您的 Java 库。它是否列为 JRE 系统库？您可以通过单击 Add Library... -> JRE System Library -> Next -> 正确添加它，然后选择工作区默认值或备用 JRE。

您的堆栈跟踪转储看起来好像没有添加到项目中的 JRE。

如果你的问题不能通过这个解决，你可以去窗口 -> 显示视图 -> 问题。有时您可以在那里找到一些附加信息。很可能，您的项目设置有问题。

# php - PHP 输出标签不起作用

> ID：10433475
> 
> 赞同：0
> 
> 时间：2012-05-03T14:27:58.387
> 
> 标签：php

我在我的电脑上安装了一个新的 WAMP（在我使用 XAMPP 之前 - 我记得一切都很好）。我的问题是 php 输出标记 ( `<?= ?>`) 不起作用（在浏览器中，当我单击显示源代码时，它完全出现在文件中 - 所以它没有被处理......）

我错了吗？php.ini 中有一个选项可以打开这个标签吗？我需要这个标签。

编码我如何尝试：

```
<?php
 $examples = "Some text...";
?>
<!DOCTYPE html>
<html>
    <head>
        <title>Examples</title>
    </head>
    <body>
        <h1>Examples</h1>
        <ul>
            <?= $examples ?>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T14:28:59.900

您可以打开它来更新 php.ini 以允许短标签。将鼠标悬停在 WAMP 中的 PHP 菜单选项上并查找设置。设置`short_open_tag`为`on`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:33:07.623

您可以更新您的 php.ini。但我认为最好使用经典标签来避免xml标签的问题

# json - Struts ajax 表单验证

> ID：10433481
> 
> 赞同：2
> 
> 时间：2012-05-03T14:28:16.883
> 
> 标签：json, jquery, struts2, struts-validation

我对 ajax 表单验证有疑问。我正在使用 struts-core 2.3.1.2、struts-jquery-plugin 3.3.0 和 struts-json-plugin。

如果 ajax 请求将提交 ajax 表单并且验证失败，则会出现此问题。因为整个表单将被放置在结果元素上。因此，您可以在 ajax sumbit 按钮上激活 ajax 验证。 [http://code.google.com/p/struts2-jquery/wiki/Validation](http://code.google.com/p/struts2-jquery/wiki/Validation)

这里也有过时的信息： [http ://struts.apache.org/2.2.3.1/docs/ajax-validation.html](http://struts.apache.org/2.2.3.1/docs/ajax-validation.html)

但是在 struts-default.xml 中缺少拦截器“jsonValidationWorkflowStack”，就像在帖子中写的那样：[jsonValidationWorkflowStack 似乎在 Struts 2.3.1 中被删除](https://stackoverflow.com/questions/9168417/jsonvalidationworkflowstack-seems-to-be-removed-in-struts-2-3-1)

它来源于 struts-plugin.xml 中的 struts-json-plugin。我不知道如何直接使用它，但我在 struts.xml 中构建了自己的堆栈：

```
<!-- Sample JSON validation stack  -->
<interceptor-stack name="jsonValidationWorkflowStack">
            <interceptor-ref name="basicStack"/>
            <interceptor-ref name="validation">
                <param name="excludeMethods">input,back,cancel</param>
            </interceptor-ref>
            <interceptor-ref name="jsonValidation"/>
            <interceptor-ref name="workflow"/>
        </interceptor-stack> 
    </interceptors>
<action name="updateMySettings" method="execute" class="de.ra.daod.actions.MyAppSettingAction">
        <interceptor-ref name="jsonValidationWorkflowStack"/>
                    <!-- This is not beauty within ajax -->
        <result name="input">/WEB-INF/jsp/mysetting_ajax.jsp</result>
        <result name="success" type="stream">
            <param name="contentType">text/html</param>
            <param name="inputName">inputStream</param>
        </result>
    </action> 
```

我的表格看起来像：

```
<s:head />
<sj:head />
    <!-- This files are needed for AJAX Validation of XHTML Forms -->
    <script src="${pageContext.request.contextPath}/struts/xhtml/validation.js" type="text/javascript"></script>

<s:form id="form" action="private/updateMySettings" theme="xhtml">
                <s:textfield id="screenRes" key="appSetting.screenResolution" label="Screen resolution" required="true" />
<s:select key="appSetting.screenDepth" label="Color depth" list="#{'8':'8','16':'16','24':'24'}" required="true" />
<sj:submit value="Update Settings" targets="status" validate="true"/>
            </s:form> 
```

不幸的是，如果验证失败，我会收到一个 javascript 错误：

```
Uncaught TypeError: Object #<Object> has no method 'indexOf'
f.extend.ajax  jquery-1.7.1.min.js:4
b.fn.ajaxSubmit
a.struts2_jquery.validateForm  jquery.struts2-3.3.0.min.js:18
a.subscribeHandler.h.beforeSubmit  jquery.struts2-3.3.0.min.js:18
b.fn.ajaxSubmit
a.subscribeHandler.e  jquery.struts2-3.3.0.min.js:18
e.extend.each  jquery-1.7.1.min.js:2
a.subscribeHandler.e  jquery.struts2-3.3.0.min.js:18
f.event.dispatch  jquery-1.7.1.min.js:3
f.event.add.h.handle.i  jquery-1.7.1.min.js:3
f.event.trigger  jquery-1.7.1.min.js:3
f.fn.extend.trigger  jquery-1.7.1.min.js:3
e.extend.each  jquery-1.7.1.min.js:2
e.fn.e.each  jquery-1.7.1.min.js:2
f.fn.extend.trigger  jquery-1.7.1.min.js:3
d.fn.extend.publish  jquery.subscribe.min.js:16
e.extend.each  jquery-1.7.1.min.js:2
d.fn.extend.publish  jquery.subscribe.min.js:16
(anonymous function)  jquery.struts2-3.3.0.min.js:18
f.event.dispatch  jquery-1.7.1.min.js:3
f.event.add.h.handle.i  jquery-1.7.1.min.js:3 
```

似乎无法处理响应中的 json 对象，我不知道为什么我遵循了旧的说明。我假设原因是 struts/utils.js 中的函数 StrutsUtils.getValidationErrors 如果此函数与 json 对象一起使用，但我不确定。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:10:49.567

*我猜流结果和 ajax 不能很好地结合在一起。只需删除目标属性。– 慢跑*

我不同意你的观点，因为 AJAX 的主旨不是加载新页面，而是将任何内容加载到当前页面，这就是我使用 AJAX 提交按钮的原因。在不重新加载页面本身的情况下通知用户的操作。解决方法是使用 javascript 清除 status div 元素的内容。我认为这可以在 struts2-jquery-plugin 中实现自动化。这是我嵌入在选项卡式窗格中的表单。

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>

<s:if test="appSetting != null">
<h3>Application settings</h3>
<div id="status" class="welcome"></div> 
<table>
    <tr>
        <td>
            <s:form id="form" action="updateMySettings" theme="xhtml">
                <s:textfield id="screenRes" key="appSetting.screenResolution"
                    label="Screen resolution" required="true" />
                <s:select key="appSetting.screenDepth" label="Color depth"
                    list="#{'8':'8','16':'16','24':'24'}" required="true" />
                <sj:submit id="updateSetting" value="Update Settings" targets="status" validate="true" />
            </s:form>
        </td>
        <td valign="top">
            <button id="fullScreen">Use full screen</button>
            <button id="fullBrowser">Use full browser</button>
        </td>
    </tr>
</table>
<script>
$("#fullScreen").click(function() {
    scr_width = Math.max(screen.width,screen.height);
    scr_height = Math.min(screen.width,screen.height);
    $("#screenRes").val(scr_width + 'x' + scr_height);
});
$("#fullBrowser").click(function() {
    brw_width = Math.max(window.innerWidth, window.innerHeight);
    brw_height = Math.min(window.innerWidth, window.innerHeight);
    $("#screenRes").val(brw_width + 'x' + brw_height);
});
$("#updateSetting").click(function() {
    $("#status").empty();
})
</script>
</s:if>
<s:else>
<p>No settings available.</p>
</s:else> 
```

它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:10:48.030

您正在解决[Struts2 问题](https://issues.apache.org/jira/browse/WW-3736)。升级到最新版本 2.3.3 或 2.3.4，您的问题应该会消失。

# sql - Sequel 可以批量更新吗？

> ID：10433486
> 
> 赞同：9
> 
> 时间：2012-05-03T14:28:35.240
> 
> 标签：sql, ruby, batch-file, sequel

[是否可以使用Sequel](http://sequel.rubyforge.org/)在一次调用中进行多次更新？

例如，在我的服务器上进行大约 200 次更新可能需要几分钟，但如果我伪造一个 SQL 查询，它会在几秒钟内运行。我想知道是否可以使用 Sequel 来伪造那个 SQL 查询，或者更好的是，自己完成整个操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:39:28.327

我遇到的解决方案涉及 update_sql 方法。它不执行操作本身，而是输出原始 SQL 查询。要批量更新多个更新，只需将它们与 ; 在这两者之间，使用生成的字符串调用 run 方法，一切就绪。

批处理解决方案比多次更新要快得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-03T08:54:11.740

可以使用`Datset#import` [http://sequel.jeremyevans.net/rdoc/classes/Sequel/Dataset.html#method-i-import](http://sequel.jeremyevans.net/rdoc/classes/Sequel/Dataset.html#method-i-import) "向关联表中插入多条记录。该方法可用于高效插入大量记录如果数据库支持，则在单个查询中放入表中。插入会自动包装在事务中。”

这是如何使用它的示例：

```
DB = Sequel.connect(...)
DB[:movies].import([:id, :director, :title, :year], [[1, "Orson Welles", "Citizen Kane", 1941],[2, "Robert Wiene", "Cabinet of Dr. Caligari, The", 1920]]) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-05-14T16:21:47.050

`Dataset#update`不适合你？

[http://sequel.jeremyevans.net/rdoc/classes/Sequel/Dataset.html#method-i-update](http://sequel.jeremyevans.net/rdoc/classes/Sequel/Dataset.html#method-i-update)

# jsp - JSP、JSTL、Bean 继承和 PropertyNotFoundException

> ID：10433490
> 
> 赞同：1
> 
> 时间：2012-05-03T14:28:40.680
> 
> 标签：jsp, jstl, javabeans, propertynotfoundexception

我有两个 JavaBean。

1.  用户
2.  工程师

工程师扩展用户。

用户包含此属性：

```
public String getName() { return name; } 
```

我的 JSP 包含：

```
<c:forEach var="engineer" items="${engineers}" >
    <c:out value="${engineer.Name}" />
</c:forEach> 
```

抛出的异常是：

```
javax.el.PropertyNotFoundException: Property 'Name' not found on type Engineer 
```

这是因为 JSTL 找不到继承的属性吗？`getName`即使它继承`getName`自 User ，我是否需要在 Engineer 上显式声明另一个属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:46:48.337

它应该是

```
${engineer.name} 
```

应该是`name`小写。

# javascript - JavaScript removeChild 不起作用

> ID：10433492
> 
> 赞同：0
> 
> 时间：2012-05-03T14:28:44.253
> 
> 标签：javascript, removechild

我正在使用此 JavaScript 代码从页面中删除几个元素，但它不起作用。当我用 Opera Dragonfly 检查代码时，它会说：

```
Uncaught exception: Error: WRONG_ARGUMENTS_ERR 
```

并指向文件和函数名。

奇怪的是，我在同一页面上的另一个函数中使用了完全相同的代码，并且它可以正常工作。代码非常小而且简单：

```
var docBody = document.getElementById("body");
if(document.getElementById("marginDiv")){
  docBody.removeChild("marginDiv");
} 
```

两者都`body`存在`marginDiv`于页面上。我的目标是在单击背景时使缩略图消失。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:31:09.850

您正在尝试删除字符串。字符串几乎不是 HTML 元素。您还依赖于`marginDiv`成为 的直系子女`body`，但情况可能并非如此。

相反，试试这个：

```
var remove = document.getElementById('marginDiv');
if( remove) remove.parentNode.removeChild(remove); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T14:31:22.597

尝试

```
docBody.removeChild(document.getElementById("marginDiv")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:37:29.800

`removeChild`需要对 DOM 元素的引用，而不是字符串。试试这个：

```
var docBody = document.getElementById("body");
var marginDiv = document.getElementById("marginDiv");

if(marginDiv)){
docBody.removeChild(marginDiv);
} 
```

# bash - 用于导入的 sqlite 字段分隔符

> ID：10433494
> 
> 赞同：3
> 
> 时间：2012-05-03T14:28:59.363
> 
> 标签：bash, sqlite

我刚开始将 SQLite 用于我们的日志处理系统，我只是将一个文件导入到 sqlite 数据库中，该数据库具有“@”作为字段分隔符。

如果我在 SQLite repl 中运行以下命令

```
$ sqlite3 log.db 
sqlite> .separator "@"
sqlite> .import output log_dump 
```

它有效[导入成功]。但是如果我尝试通过 bash 脚本做同样的事情

```
sqlite log.db '.separator "@"'
sqlite log.db '.import output log_dump' 
```

它没有。分隔符移回“|” 我收到一条错误消息，指出列数不足

```
output line 1: expected 12 columns of data but found 1 
```

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:33:00.573

您应该同时向 sqlite 传递两个命令：

```
echo -e '.separator "@"\n.import output log_dump' | sqlite log.db 
```

# java - HttpConnection 在 30 秒后发送另一个请求

> ID：10433498
> 
> 赞同：1
> 
> 时间：2012-05-03T14:29:07.133
> 
> 标签：java, http, java-me, j2mepolish, nokia-s40

我正在编写一个应用程序，在该应用程序中我将发布请求发送到服务器。问题是诺基亚 S40 系列手机如果在 30 秒内没有得到响应，则会发送 2 个请求。我在我的应用程序中检查了与 s60 系列手机相同的工作正常。

我发现的一种解决方案是在打开连接时启动计时器，如果连接没有得到响应，则在 25 秒后终止连接。但这也是一文不值。在这里我附上我的代码。如果可能，请查看并帮助我。

```
 try
                { 

                          param="function=CloseRecharge&LoginId="+SharedVariable.getUserInfo().getLoginID()
                                +"&BatchId="+SharedVariable.getSelectedProduct().getBatchID()
                                +"&SystemServiceID="+SharedVariable.getSelectedProduct().getSystemServiceID()
                                +"&ReferalNumber="+strMobileNo
                                +"&FromANI="+fromMoNo
                                +"&Email="+""
                                +"&Checksum="+Checksum;

                          connection = (HttpConnection) Connector.open(url);

                            timeout=0;
                            t.schedule(new TimerTask()
                            {
                                public void run()
                                {
                                   try
                                   {
                                       timeout+=1;
                                       System.out.println("Timeout value:"+timeout);

                                       if(timeout>=25)
                                       {
                                           //timeout every 1 munite
                                            timeout=0;
                                            System.out.print("Connection is closing");

                                                connection.close();
                                                connection=null;
                                                if(is!=null)
                                                    is.close();

                                               Alert alert=new Alert("HttpConn Closed", "connection closed",null, AlertType.WARNING);
                                               alert.setTimeout(Alert.FOREVER);

                                                display.setCurrent(alert,new MainMenu("Menu", parent));
                                                this.cancel();

                                       }
                                   }
                                   catch(Exception e)
                                   {
                                       System.out.println("========Exception occured in Timer Task");
                                       e.printStackTrace();
                                   } 
                                }
                            }
                        , 0, 1000);

                             connection.setRequestMethod(HttpConnection.POST);
                             connection.setRequestProperty("User-Agent", "Profile/MIDP-1.0 Configuration/CLDC-1.0");
                             connection.setRequestProperty("Accept_Language","en-US");
                             connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
                             connection.setRequestProperty("Content-length", ""+param.getBytes().length);
                             out = connection.openOutputStream();
                             out.write(param.getBytes());
                             out.flush();
                             param=null;
                             if (connection.getResponseCode() == HttpConnection.HTTP_OK )
                             {
                               t.cancel();
                               int len = (int)connection.getLength();
                               InputStream istrm = connection.openInputStream();
                                if (istrm == null)
                                {
                                  throw new IOException("Cannot open HTTP InputStream, aborting");
                                }
                               if (len != -1)
                               {
                                  data = new byte[len];
                                  int bytesRead = istrm.read(data);
                               }
                               else
                               {
                                  ByteArrayOutputStream bo = new ByteArrayOutputStream();
                                  int ch;
                                  int count = 0;

                                  while ((ch = istrm.read()) != -1)
                                  {
                                    bo.write(ch);
                                    count++;
                                  }
                                  data = bo.toByteArray();
                                  bo.close();
                                }
                                String response = new String(data);
        displayResponse();
                             }//if
                             else
                             {
                                 Alert error=new Alert("ResponseCode:"+connection.getResponseCode(),
                                                        null,
                                                        null,AlertType.INFO);
                                  error.setTimeout(Alert.FOREVER);
                                  display.setCurrent(error,new MainMenu("Menu", parent));
                             }
                catch(Exception exception)
                {
                    displayErrorMessage(exception); 
                }
                finally
                {
                    try
                    {
                        if(connection!=null)
                            connection.close();
                        if(is!=null)
                            is.close();
                    }
                    catch (IOException ex)
                    {
                        System.out.println("Exception in Finally block....");
                        ex.printStackTrace();
                    }
                } 
```

# java - for-each 和 for 循环

> ID：10433499
> 
> 赞同：0
> 
> 时间：2012-05-03T14:29:07.327
> 
> 标签：java, loops

有几次我遇到过 for-each 循环会导致问题的情况，包括异常和崩溃，而 for-each 循环`for(it=list.iterator;it.hasNext();)`可以正常工作。这包括修改集合（我知道这不应该发生在 for-each 上，但不知道为什么）以及我克隆东西的其他情况。不记得我刚刚想到的任何具体的例子。

不是 for-each 只是我指出的第二种循环类型的快捷方式吗？有人可以准确解释那里有什么区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:31:51.087

问题是当`foreach`你循环`remove`一个元素时。使用迭代器时，您有一个`remove`方法。使用时，`foreach`您无法直接访问底层迭代器，也无法调用其`remove`方法。

否则是一样的。Foreach 不会导致更多问题或崩溃。你只是不能删除一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:34:54.143

`for-each`只是 java 1.5 中引入的一种语法糖。它使用从`Iterable`幕后获得的迭代器。

您提到的唯一一个合理的区别是迭代期间的集合修改。是的，这是不可能的。不能在迭代期间使用 修改集合`Iterator`。企图引起`ConcurrentModificationException`。这与两种情况都相关（迭代器的显式和隐式使用）。

唯一的一个例外是使用`Iterator.remove()`（当它被支持时）。在这种情况下，迭代器不会抛出异常。

原因很清楚。迭代器无法迭代在迭代期间正在更改的集合，除非它知道更改并可以重新安排自己。这就是您使用`Iterator.remove()`.

# c# - 当用户关闭主窗口时，PowerPoint 进程不会关闭

> ID：10433507
> 
> 赞同：2
> 
> 时间：2012-05-03T14:29:33.253
> 
> 标签：c#, process, automation, ms-office, powerpoint

如果我通过自动化创建 PowerPoint 应用程序，则当用户关闭主窗口时，该过程仍保留在任务管理器中。我可以假设这是因为我的应用程序持有对 PowerPoint 应用程序的引用，因此它不能被垃圾收集。但是我怎么知道用户关闭了 PowerPoint 应用程序以便我可以释放对它的所有引用呢？这里似乎是鸡或蛋的问题。以下是我在表单加载时调用的函数。如果 PowerPoint 已打开，则它使用当前实例。如果没有，它会创建一个新实例。

```
Private Function TryAttachToApplication() As PowerPoint.Application
        Dim app As PowerPoint.Application

        Try
            app = CType(Marshal.GetActiveObject("PowerPoint.Application"), PowerPoint.Application)
        Catch ex As COMException
            app = New PowerPoint.Application
        End Try

        app.Visible = True
        Return app
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:20:59.613

> > 如果 PowerPoint 已打开，则它使用当前实例。如果没有，它会创建一个新实例。

我不这么认为。PowerPoint 只允许它自己的一个实例，尽管有时它在自动化时会错误地留下僵尸实例。它的行为不像 Word 或 Excel，您可以根据需要创建自己的 add'l 实例。

如果已经有一个实例正在运行，您将获得对它的引用。如果没有正在运行的实例，您将创建一个新实例并获得对它的引用。

释放对 PPT 实例的引用应该不会导致任何问题。如果用户一开始就打开它，它应该保持打开状态。

问题更可能是：“我应该调用 PPT 应用程序的 .Quit 方法吗？”

一种方法是检查 app.Presentations.Count 我不记得 PPT 在通过自动化调用时是否会自动创建一个新的空白演示文稿；我记得，它没有，但你会想要仔细检查。IAC，如果 .Count > 0（或者可能是 1），您知道您已经获得了对 PPT 的预先存在实例的引用...即，有人已经在使用它...所以您不想退出他们。

# c# - 访问多个数据库列的更有效方式

> ID：10433508
> 
> 赞同：0
> 
> 时间：2012-05-03T14:29:39.463
> 
> 标签：c#, database, linq-to-sql, c#-4.0, nullable

我正在寻找一种更有效的方法来构建多个数据库列的分号分隔列表。我现在使用的代码如下所示（并且有效）：

```
//Process List of things
var things = DB.DbColumn_1.HasValue ? DB.DbColumn_1.Value.Equals(true) ? "thing 1;" : "" : "");
things += DB.DbColumn_2.HasValue ? DB.DbColumn_2.Value.Equals(true) ? "thing 2;" : "" : "");
things += DB.DbColumn_3.HasValue ? DB.DbColumn_3.Value.Equals(true) ? "thing 3;" : "" : "");
things += DB.DbColumn_4.HasValue ? DB.DbColumn_4.Value.Equals(true) ? "thing 4;" : "" : "");
// Remove final ';' from thing list if non-empty
things = things.Length > 0 ? things.Substring(0, things.Length-1) : things; 
```

实际上，我有大约 8 列要处理——这个例子为你省去了一些。所以我有一大段丑陋的代码来构建一个简单的字符串。尽管这似乎工作得很好，但对于我正在尝试做的事情来说，似乎代码太多了。另外，在这种情况下我应该警惕使用“.Equals()”吗？

经过一番头脑风暴后，我想出了比这更有效的方法，例如构建一个单独的函数来创建字符串本身。所有列都是唯一的可为空的布尔值，并且对于结果列表都有唯一的字符串输出。

或者我是否足够有效地访问这些元素而不用担心它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:47:29.610

`DB.DbColumn_1.HasValue && DB.DbColumn_1.Value.Equals(true)`是一种非常困难的书写方式`DB.DbColumn_1.GetValueOrDefault()`，但它们在功能上是等价的。在http://msdn.microsoft.com/en-us/library/1t3y8s4s(v=vs.80).aspx`Nullable<T>`和http [：](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)`bool?` _ [_](http://msdn.microsoft.com/en-us/library/1t3y8s4s(v=vs.80).aspx) [//msdn.microsoft.com/en-us/library/b3h38hb0.aspx](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)`Nullable<bool>`

您可以使用以下方法之一：

```
var sections = new List<string>();
if (DB.DbColumn_1.GetValueOrDefault()) sections.Add("thing 1");
if (DB.DbColumn_2.GetValueOrDefault()) sections.Add("thing 2");
//...other columns
var things = string.Join(";", sections); 
```

或者：

```
var pairs = new List<Tuple<bool?, string>>
{
    Tuple.Create(DB.DbColumn_1, "thing 1"),
    Tuple.Create(DB.DbColumn_2, "thing 2")
    //...other columns
};
var things = string.Join(";", pairs.Where(x => x.Item1.GetValueOrDefault()).Select(x => x.Item2)); 
```

或者只设置`pairs`一次：

```
static readonly List<Tuple<Func<DBType, bool?>, string>> pairs = new List<Tuple<Func<DBType, bool?>, string>>
    {
        new Tuple<Func<DBType, bool?>, string>(d => d.DbColumn_1, "thing 1"),
        new Tuple<Func<DBType, bool?>, string>(d => d.DbColumn_2, "thing 2")
        //...other columns
    };

void inSomeMethod()
{
    var things = string.Join(";", pairs.Where(x => x.Item1(DB).GetValueOrDefault()).Select(x => x.Item2));
} 
```

当然，这取决于情况，但我最喜欢最后一个。如果`pairs`声明的冗长困扰你，（即重复`Tuple<Func<DBType, bool?>, string>`）你可以这样做：

```
class ReadDbBools : Tuple<Func<DBType, bool?>, string>
{
    public ReadDbBools(Func<DBType, bool?> retrieveFunc, string ifTrue) : base(retrieveFunc, ifTrue) { }
}

static readonly List<ReadDbBools> pairs = new List<ReadDbBools>
{
    new ReadDbBools(d => d.DbColumn_1, "thing 1"),
    new ReadDbBools(d => d.DbColumn_2, "thing 2")
    //...other columns
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:45:06.387

您可以稍微扩展您的 linq-to-sql 模型以返回您期望的值，这样您就可以将那部分排除在外：

```
public partial class Entity {
    public string DbColumn_1_Display {
        return (DbColumn_1 ?? false) ? "thing_1" : "";
    }
    /*for each property*/
} 
```

然后选择它，您可以执行以下操作：

```
var result = from db in DB
             select new { 
                   c1 = DbColumn_1_Display,  
                   c2 = DbColumn_2_Display /*etc*/};
var string = string.Format("{0};{1};{2}/*...*/", result.c1, result.c2 /*...*/); 
```

不知道这是否使事情变得更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:48:07.653

那么从可空类型开始覆盖`Equals`方法，所以而不是这个

```
DB.DbColumn_1.HasValue ? DB.DbColumn_1.Value.Equals(true) ? "thing 1;" : "" : "" 
```

你可以写这个

```
DB.DbColumn_1.Equals(true) ? "thing1;" : "" 
```

同样使用[`string.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)是一种更简洁的方式来处理末尾的额外分号，这让你有了这个：

```
var things = string.Join(";", new []
    {
        DB.DbColumn_1.Equals(true) ? "thing1" : null,
        DB.DbColumn_2.Equals(true) ? "thing2" : null,
        // etc...
    }.Where(i => i != null)); 
```

这使代码更具可读性，但不会真正提高性能，因为无论如何这个处理应该已经相当快了。

# iphone - 拆分字符串并将其存储在 NSDictionary

> ID：10433510
> 
> 赞同：1
> 
> 时间：2012-05-03T14:29:46.340
> 
> 标签：iphone, xcode, nsdictionary

我的字符串如下所示：

```
{
    alert = "albert has sent you message for Tomatos.";
    badge = 144;
    notification_text = "28520303-b666-43c8-bb3b-bd0215084cc3";
    sound = default;
} 
```

我想分隔这个字符串，并想将 NSdictionary 构造为键（= 之前的字符串）和值（= 之后）

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:34:38.307

通常你使用[NSScanner](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)来解析这种数据。
查看[标记的答案](https://stackoverflow.com/questions/594797/how-to-use-nsscanner)以获取示例。

# apache - CSS文件上的Apache重写排除

> ID：10433514
> 
> 赞同：0
> 
> 时间：2012-05-03T14:29:58.303
> 
> 标签：apache, codeigniter, mod-rewrite, rewrite, expressionengine

一个慈善机构要求我帮助他们开发他们的新网站，这是一个使用 Expression Engine 作为博客的 PHP 网站。

他们要求我摆脱 .php 扩展名，并将博客的表达式引擎路径从 /index.php/blog 重写为 /blog。我已经通过下面的重写做到了这一点，但是没有显示博客的 CSS 文件，必须在重写中赶上。

我该如何排除？

mysite.org/?css=Home/site_styles.v.1335444432

从重写？

非常感谢。

```
DirectoryIndex home.php
Options Indexes Includes FollowSymLinks
RewriteEngine on
RewriteCond %{THE_REQUEST} ^GET\s.+\.php [NC]
RewriteRule ^(.+)\.php$ /$1 [NE,R=301,L,NC]
RewriteCond %{REQUEST_URI} !\.php$ [NC]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)/?$ /$1.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:06:29.447

把它放在所有其他规则之前

```
RewriteRule ^(site_styles)($|/) - [L] 
```

如果你想排除多个东西：

```
RewriteRule ^(site_styles|js|css|images)($|/) - [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:17:52.133

您可能还想检查您是否使用绝对路径而不是相对路径调用 CSS，因为您可能刚刚破坏了与重写的相对链接？

# windows - emacs windows编译器文件权限

> ID：10433517
> 
> 赞同：0
> 
> 时间：2012-05-03T14:30:12.050
> 
> 标签：windows, emacs, compiler-construction

在 Windows 上使用 emacs 编译共享库和可执行文件时遇到问题

编译器生成的文件的权限使我无法重新编译代码，因为它无法覆盖以前的 .dll 或 .exe

目前，我必须先通过资源管理器手动删除文件，然后才能重新编译

在linux下从来没有这个问题

任何人都知道解决方法，因为所有这些手动文件删除都变得乏味

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:58:04.107

原来这不是文件权限的事情。问题是 Windows 下的 gdb（由 MinGW 提供）在运行时锁定可执行文件和任何关联的共享库，因此您无法在 gdb 运行时重新编译可执行文件或任何共享库。在 linux 下做同样的事情时，情况并非如此。在windows下你需要做的就是停止调试器`k`然后重新编译然后重新启动它。

# sevenzipsharp - SevenZipSharp 密码检查？

> ID：10433520
> 
> 赞同：2
> 
> 时间：2012-05-03T14:30:17.200
> 
> 标签：sevenzipsharp

过去，有人建议我使用 SevenZipExtractor.Check() 来查看文件是否受密码保护。这个解决方案给我带来了问题，因为 Check() 会进行完整性检查，这意味着它会解压缩所有内容。对于我正在运行的文件的数量、大小和压缩级别，这需要很长时间。

如何检查档案是否有密码？如果有一种方法可以在不提取所有文件的情况下检查我认为的密码是否正确，那也会很有用。

# java - 在嵌入式 Jetty Web 容器内运行 OSGi 容器。可能的？

> ID：10433521
> 
> 赞同：3
> 
> 时间：2012-05-03T14:30:17.467
> 
> 标签：java, jetty, osgi

处理一个运行嵌入式 Jetty Web 服务器及其基础架构的项目。我们正在考虑添加一个新的 Web 应用程序，该应用程序将极大地受益于允许使用 OSGi 插入视图。Vaadin 是我们选择的 Web 框架。

在 GlassFish 中创建 OSGi 可插拔 Vaadin 应用程序有一个很棒的教程，其中 Web 容器和 OSGi 容器是桥接的。也就是说，Web 容器没有在 OSGi 容器中运行。这是教程：[https ://vaadin.com/wiki/-/wiki/Main/Creating%20a%20Modular%20Vaadin%20Application%20with%20OSGi](https://vaadin.com/wiki/-/wiki/Main/Creating%20a%20Modular%20Vaadin%20Application%20with%20OSGi)

我的问题是。是否可以按照本教程中描述的相同方式桥接嵌入式 Jetty Web 容器和 OSGi 容器。

在 OSGi 容器中运行 jetty 对我们来说根本不是一种选择，因为我们必须使用现有的部署。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:42:35.060

您应该能够通过[org.osgi.framework.launch.FrameworkFactory](http://www.osgi.org/javadoc/r4v42/org/osgi/framework/launch/FrameworkFactory.html)类嵌入任何符合 4.2 的框架。如果你用谷歌搜索，有几个很好的例子，[Felix 网站](http://felix.apache.org/site/apache-felix-framework-launching-and-embedding.html)和[Neil Barlett 的博客](http://njbartlett.name/2011/03/07/embedding-osgi.html)上有两个很好的例子。

配置它需要更多的工作——你需要通过系统属性 org.osgi.framework.system.packages.extra 导出所有的 Jetty 和 servlet 包，并使用[Felix fileinstall](http://felix.apache.org/site/apache-felix-file-install.html)或控制台和[pax-url](http://team.ops4j.org/wiki/display/paxurl/Pax+URL)来取消/部署包。

虽然您的 Vaadin 应用程序将是动态的 - Jetty 或嵌入应用程序将不会是动态的（即域实体、服务等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:03:31.777

你能嵌入一个不同的容器吗？Eclipse Virgo 和 JBoss AS 都是 OSGi 和 J2EE 容器。

*   [http://www.eclipse.org/virgo/](http://www.eclipse.org/virgo/)
*   [http://www.jboss.org/as7](http://www.jboss.org/as7)

# c# - 尝试访问调用 AzMan 的已卸载应用程序域

> ID：10433530
> 
> 赞同：2
> 
> 时间：2012-05-03T14:30:46.727
> 
> 标签：c#, asp.net-mvc-3, appdomain, azman

在 ASP.NET MVC Web 应用程序中，我偶尔会看到以下错误：

> System.AppDomainUnloadedException：尝试访问已卸载的应用程序域。（HRESULT 异常：0x80131014）在 System.StubHelpers.StubHelpers.InternalGetCOMHRExceptionObject（Int32 hr，IntPtr pCPCMD，Object pThis）在 System.StubHelpers.StubHelpers.GetCOMHRExceptionObject（Int32 hr，IntPtr pCPCMD，Object pThis）在 Microsoft.Interop.Security。 AzRoles.IAzApplication.OpenOperation（字符串 bstrOperationName，对象 varReserved）

抛出此异常的代码行是这一行：

```
IAzOperation operation = _azManApp.OpenOperation(operationName); 
```

大多数时候，代码工作正常。当错误发生时，它似乎会再次发生，因此回收 AppPool 是唯一好的补救措施。

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T16:03:51.480

我遇到了同样的问题，偶然发现了[以下链接](http://forums.asp.net/t/1804768.aspx/1)

总而言之，似乎有一个文件夹更改通知过程，当您在应用程序中获得更多文件/文件夹时，它开始导致一些时间问题。链接文章中有一个链接指向该问题的修补程序。

# c# - Razor 试图显示带有重音符号的文本

> ID：10433532
> 
> 赞同：3
> 
> 时间：2012-05-03T14:30:52.877
> 
> 标签：c#, asp.net-mvc, razor, character-encoding

我正在尝试在 html 标记之间显示一些文本，我正在使用 @HTML.Raw 方法来完成此操作，代码片段如下所示：

```
<!-- SEO -->
<title>@Html.Raw(Model.Title)</title>
<meta name="Description" content="@Html.Raw(Model.Description)">
<meta name="KEYWORDS" content="@Html.Raw(Model.Keywords)">
<!-- END SEO -->

Description: @Html.Raw(Model.Description)
Keywords: @Html.Raw(Model.Keywords) 
```

但代码执行后，显示如下：

```
<!-- SEO -->
<title>FÚTBOL - El portal de los hinchas del fútbol</title>
<meta name="Description" content="F&#218;TBOL - El portal de los hinchas del f&#250;tbol">
<meta name="KEYWORDS" content="F&#250;tbol,hinchas">
<!-- END SEO -->
Description: FÚTBOL - El portal de los hinchas del fútbol
Keywords: Fútbol, hinchas 
```

当转义字符串在 " 字符之间时发生了一些事情。

有谁知道为什么会这样？

**编辑**

变量的内容是这样的：

```
Title: FÚTBOL - El portal de los hinchas del fútbol
Description: FÚTBOL - El portal de los hinchas del fútbol
Keywords: Fútbol, hinchas 
```

我的 _Layout 中的字符集和文档类型是：

```
<!DOCTYPE html>
<html lang="es" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://ogp.me/ns#">
<head>     
  <meta charset="utf-8" /> 
```

问题不在于它显示 Ú 或 ú 的字母的情况。我不明白的是为什么它在一种情况下而不是在另一种情况下逃脱了这封信，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:43:23.003

既然`&x250;`是 "ú" 而 218 是 "Ú" 有什么问题呢？您只是看到了一些使用 HTML 实体的案例，而没有看到其他案例。

如果您使用合适的编码提供输出，最终结果将是相同的 - 实体将是客户端进行取消编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T17:01:28.830

我的建议是在您想强制使用 Raw 字符串时使用 @Html.Raw("your string") 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-26T19:44:15.563

尝试`HttpUtility.HtmlDecode("Your string with special characters")`

例如：

```
Description: @HttpUtility.HtmlDecode(Html.Raw(Model.Description))
Keywords: @HttpUtility.HtmlDecode(Html.Raw(Model.Keywords)) 
```

致谢：[@Hakan Fıstık](https://stackoverflow.com/users/194623/luke-duddridge)

帖子：[ASP MVC Razor 在输入占位符中编码特殊字符](https://stackoverflow.com/questions/15246439/asp-mvc-razor-encode-special-characters-in-input-placeholder)

# wpf - WPF TreeView 悬停时突出显示行

> ID：10433534
> 
> 赞同：1
> 
> 时间：2012-05-03T14:30:55.047
> 
> 标签：wpf, treeview, styles, hover, highlight

目前，将鼠标悬停在 TreeView 中的标题上会突出显示标题。我想将鼠标悬停在 TreeView 中行的任何部分以突出显示整行（就像 Windows 资源管理器一样）。有人可以提供一个如何做到这一点的例子吗？

![在此处输入图像描述](../Images/e399b1b009f8e1460de73d4591994c59.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:06:41.393

您需要将 更改`ControlTemplate`为`TreeViewItem`实际上是控件的整个宽度。

这里有一个关于这个问题的讨论以及一个解决方案：

[http://leecampbell.blogspot.com/2009/01/horizo​​ntal-stretch-on-treeviewitems.html](http://leecampbell.blogspot.com/2009/01/horizontal-stretch-on-treeviewitems.html)

这里还有另一个冗长的答案，没有讨论：

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b04f73e2-0b10-4d97-a6da-64df2e30c21d/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b04f73e2-0b10-4d97-a6da-64df2e30c21d/)

所以我的意思是这些例子是指导。如果您采用与上面第二个链接（来自 MSDN 论坛）完全相同的代码，只需添加以下代码：

```
<Trigger Property="IsMouseOver" Value="True">
    <Setter Property="Background" TargetName="Bd"
            Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
</Trigger> 
```

你会`ControlTemplate`看到你在鼠标悬停时获得了高亮颜色。显然，您需要调整颜色等等，但这就是您需要做的 - 修改 的`ControlTemplate`，`TreeViewItem`使其占据整个宽度并添加一个`Trigger`for `IsMouseOver`。

# algorithm - 计算 1 2 4 8 模式的算法复杂度

> ID：10433536
> 
> 赞同：4
> 
> 时间：2012-05-03T14:31:04.097
> 
> 标签：algorithm, complexity-theory

我需要计算这个算法的复杂度：

```
f=1;
x=2;

for(int i=1;i<=n;i*=2)
   for(int j=1;j<=i*i;j++)   
      if(j%i==0)
         for(int k=1;k<=j*i;k++)
             f=x*f; 
```

我找出了内部循环的模式和总和，即 i^2(i(i+1)/2) 但我无法沿着 (1 2 4 8 16 .. .)

那么，我怎样才能找到这个系列的总和呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:37:22.080

我不会为你解决这个问题（这看起来像家庭作业）。但这里有一个简化问题的提示。

这段代码：

```
for(int j=1; j<=i*i; j++)   
    if(j%i==0)
        // ... blah ... 
```

相当于这段代码：

```
for(int j=i; j<=i*i; j += i)
    // ... blah ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T18:04:15.663

外部的另一个提示`for(int i=1;i<=n;i*=2)`：每次执行`for`循环体后，将*i*乘以 2：

> 1 · 2 · 2 · … · 2

只要条件为真，这就会重复：

> 1 · 2 · 2 · … · 2 ≤ *n*

我们还可以将 2 的重复乘法写成如下：

> 2 · 2 · … · 2 = 2 ^(*x*) ≤ *n*

*i*乘以 2的次数，即*x*，可以用以 2 为底的[对数](http://en.wikipedia.org/wiki/Logarithm)计算，即 log [2] ( *n* )：

> 2 ^(*x*) ≤ *n*

使用*x* = log [2] ( *n* ) 它实际上是相等的：

> 2^(日志[2] ( *n* )) = *n*

因此`for`条件是 floor(log [2] ( *n* )) 乘以 true，因此其复杂度是 Ο(log( *n* ))、Ω(log( *n* ))，因此是 θ(log( *n* ))。

# scala - 如何在 Scala 的 match case 语句中使用 Map 值

> ID：10433539
> 
> 赞同：2
> 
> 时间：2012-05-03T14:31:12.457
> 
> 标签：scala

我有一张这样的地图：

```
val mealIdsMap: Map[String, String]    =
Map (
      "breakfast"     ->    "omelet",
      "lunch"         ->    "steak",
      "dinner"        ->    "salad"
) 
```

然后我尝试在这样的匹配语句中使用它：

```
"omelet" match 
{ 
  case mealIdsMap("breakfast") => "Thank God"
} 
```

我得到这个错误：

```
error: value mealIdsMap is not a case class constructor,
nor does it have an unapply/unapplySeq method
              case mealIdsMap("breakfast") => "Thank God" 
```

任何人都知道如何在匹配/案例声明中使用这样的地图？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T14:38:16.980

您应该从教程中阅读模式匹配的目的是什么，可能来自[这个](http://kerflyn.wordpress.com/2011/02/14/playing-with-scalas-pattern-matching/)（谷歌上的第一个非平凡示例）。

您已经反转了测试：

```
mealIdsMap("breakfast") match {
  case "omelet" => "Thank God"
  case _ => "Don't forget a default"
} 
```

如果您不确定密钥是否存在（即使您是，如果您想编写惯用的 scala，您应该更喜欢：

```
mealIdsMap.get("breakfast") match {
  case Some("omelet") => "Thank God"
  case _ => "Don't forget a default"
} 
```

Where`get`返回一个选项，避免您尝试捕获代码或让它静默中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:01:48.997

尽管如此，尝试实现这种行为仍然很有趣。看看这个例子：

```
 case class InvMatcher (m:Map[String, String]){
 def unapply(v:String):Option[String] = {
   return m collectFirst {case (k, `v`) => k}
 } 
```

}

此类可帮助您逆向匹配地图。用法：

```
val ma = InvMatcher (Map (
  "breakfast"     ->    "omelet",
  "lunch"         ->    "steak",
  "dinner"        ->    "salad"
));

"steak" match {
  case ma(s) => s match {
    case "breakfast" => print("Thank God")
    case "lunch" => print("whatever")

    case _ => print("dont forget default")
  }
  case _ => print("dont forget default")
} 
```

这几乎是您想要的，尽管您需要第二个匹配语句（这里不需要默认情况......）

# c# - 正则表达式匹配方法无法正常工作

> ID：10433549
> 
> 赞同：0
> 
> 时间：2012-05-03T14:31:44.607
> 
> 标签：c#, .net, windows

我有一个方法可以简单地检查一个文本文件中的几个字符串——尽管一些字符串没有被选为匹配项，即使它们存在于文本文档中。我已包含在此示例中未找到的违规字符串：

```
static void Main(string[] args)
{
    string str = @"1009 10.32.0.28 03/05/2012 09:11:48 The license expires in 1192 day(s).";
        StreamReader sr = new StreamReader(@"event_history.txt");
        string allRead = sr.ReadToEnd();
        sr.Close();
        string regMatch = str;
        if (Regex.IsMatch(allRead, regMatch))
        {
            Console.WriteLine("found\n");
        }
        else
        {
            Console.WriteLine("not found\n");
        }

        Console.ReadKey();

} 
```

**event_history.txt**

```
1009 10.32.0.28 03/05/2012 09:11:48 The license expires in 1192 day(s). 
```

如果我将正则表达式匹配替换为“testing”，然后将“testing”添加到文本文件中，它会将其作为匹配项进行选择，没问题：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:37:18.247

`str`对于您要完成的工作，这不是正确的正则表达式。例如，`.`表示任何字符和周围的括号`s`都是一个分组，不会被捕获。您实际上只需要检查是否`allRead`包含`str`您始终要检查的字符串（1009、1192 天，IP 地址和日期始终是静态的）。

```
string str = @"1009 10.32.0.28 03/05/2012 09:11:48 The license expires in 1192 day(s).";
StreamReader sr = new StreamReader(@"event_history.txt");
string allRead = sr.ReadToEnd();

if(allRead.Contains(str))
{
    Console.WriteLine("found\n");
}
else
{
    Console.WriteLine("not found\n");
} 
```

如果你正在寻找一个捕获非静态值的正则表达式，你可以去

```
string str = @"\d+ \d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3} \d{2}/\d{2}/\d{4} \d{2}:\d{2}:\d{2} The license expires in \d+ day\(s\)\."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:34:36.907

regMatch=str 和 str 不是正则表达式。你为什么使用正则表达式？你应该使用类似的东西

```
".*The license expires in [0-9]* day(s).". 
```

更进一步，对于 IP 10.23.0.28 的所有条目：

```
"1009 10\.32\.0\.28 ..\/..\/.... ..\:..\:.. The license expires in [0-9]* day(s)." 
```

使用文件 regex.txt 例如：

```
$ cat regex.txt
1009 10.32.0.28 03/05/2012 09:11:48 The license expires in 1192 day(s).
1009 10.32.0.28 04/05/2012 09:11:48 The license expires in 1192 day(s).
1009 10.32.0.29 04/05/2012 09:11:48 The license expires in 1192 day(s).
1009 10.32.0.30 04/05/2012 09:11:48 The license expires in 1192 day(s). 
```

结果是：

```
$ grep "1009 10\.32\.0\.28 ..\/..\/.... ..\:..\:.. The license expires in [0-9]* day(s)." regex.txt
1009 10.32.0.28 03/05/2012 09:11:48 The license expires in 1192 day(s).
1009 10.32.0.28 04/05/2012 09:11:48 The license expires in 1192 day(s). 
```

> 如果这是您一直想要检查的字符串（1009、1192 天，IP 地址和日期始终是静态的）。

利用：

```
".... 10\.32\.0\.28 04\/05\/2012 ..\:..\:.. The license expires in 1192 day(s)." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:36:52.843

您正在使用`Regex.IsMatch`as `String.Contains`。正则表达式有自己的语法，因此（通常）不起作用。

在您的特定示例中，您需要转义 周围的括号`s`，因为正则表达式引擎不会像现在写的那样匹配它们，它们是捕获运算符。这些点也应该被转义，尽管具有讽刺意味的是正则表达式点确实匹配点。所以：

```
string str = @"1009 10\.32\.0\.28 03/05/2012 09:11:48 The license expires in 1192 day\(s\)\."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:41:02.140

正则表达式不匹配的原因是因为 ( 和 ) 是正则表达式中的特殊字符。它们代表一个分组，一个您想稍后引用的值。要将它们更改为常规字符，请在它们前面附加一个 \。所以你的正则表达式应该看起来像

```
@"1009 10.32.0.28 03/05/2012 09:11:48 The license expires in 1192 day\(s\)." 
```

# asp.net - 在 ASP.net Web 服务和 ASP.Net Web 客户端之间发送和接收 JSON 的问题

> ID：10433551
> 
> 赞同：1
> 
> 时间：2012-05-03T14:31:47.983
> 
> 标签：asp.net, json, web-services

您会认为这里的所有帖子都很容易弄清楚。:| 那么这应该是一个简单的例子。注意 Web 服务是 VB，客户端是 c#。wb 服务在从 JQuery 调用时可以正常发送和接收。来自 .NET 有一个问题，如果服务要求如下所示的参数，则客户端的 getresponse 方法会收到错误 500 Internal server error

网络服务

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json, XmlSerializeString:=False)> _
Public Function Test(WebInfo As GetUserID) As Person
    Dim Someone As New Person
    Someone.Name = "Bob"
    Someone.FavoriteColor = "Green"
    Someone.ID = WebInfo.WebUserID.ToString()
    Return Someone
End Function 
```

Web 客户端（设置为发送和接收 JSON）

```
 public Person Test(int UserID, string url) {
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url + "test.asmx/Test");
        webRequest.Method = "POST";
        webRequest.ContentType = "application/json; charset=utf-8";
        StreamWriter sw = new StreamWriter(webRequest.GetRequestStream());
        sw.Write("{'WebInfo':{'WebUserID':1}}");  // this works from JQuery
        HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();
        Stream responseStream = webResponse.GetResponseStream();
        DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(Person));
        Person someone = (Person)jsonSerializer.ReadObject(responseStream);
        return someone;
    } 
```

有没有人成功做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T14:41:46.350

这是一种调用 JSON Web 服务的方法，允许开发人员发送和接收复杂数据类型。传入的对象可以是任何数据类型或类。结果是 JSON 字符串，或方法类型的任何错误消息如下所示

```
public class WebServiceCallReturn {
    public string JSONResponse { get; set; }
    public string SimpleResponse { get; set; }
    public string Error { get; set; }
}

public WebServiceCallReturn WebServiceJSONCall(string uri, string requestType, object postData = null) {
    WebServiceCallReturn result = new WebServiceCallReturn();

    // create request
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uri);
    webRequest.ContentType = "application/json; charset=utf-8";
    webRequest.Method = requestType;
    webRequest.Accept = "application/json; charset=utf-8";
    // add json data object to send
    if (requestType == "POST") {
        string json = "{ }";
        if (postData != null) {
            try {   // the serializer is fairly robust when used this way
                DataContractJsonSerializer ser = new DataContractJsonSerializer(postData.GetType());
                MemoryStream ms = new MemoryStream();
                ser.WriteObject(ms, postData);
                json = Encoding.UTF8.GetString(ms.ToArray());
            } catch {
                result.Error = "Error serializing post";
            }
        }
        webRequest.ContentLength = json.Length;
        StreamWriter sw;
        try {
            sw = new StreamWriter(webRequest.GetRequestStream());
        } catch (Exception ex) {
            // the remote name could not be resolved
            result.Error = ex.Message;
            return result;
        }
        sw.Write(json);
        sw.Close();
    }

    // read response
    HttpWebResponse webResponse;
    try {
        webResponse = (HttpWebResponse)webRequest.GetResponse();
    } catch (Exception ex) {
        // The remote server returned an error...
        // (400) Bad Request
        // (403) Access forbidden   (check the application pool)
        // (404) Not Found
        // (405) Method not allowed
        // (415) ...not the expected type
        // (500) Internal Server Error   (problem with IIS or unhandled error in web service)
        result.Error = ex.Message;
        return result;
    }
    Stream responseStream = webResponse.GetResponseStream();
    StreamReader sr = new StreamReader(responseStream, Encoding.UTF8);
    string resultString = sr.ReadToEnd();
    sr.Close();
    responseStream.Close();
    result.JSONResponse = resultString;
    return result;
} 
```

该方法可以如下使用

```
public SomeCustomDataClass Getsomeinformation(int userID) {

    UserInfoClass postData = new UserInfoClass();
    postData.WebUserID = userID;
    SomeCustomDataClass result = new SomeCustomDataClass();

    string uri = URL + "SomeServices.svc/GetSomething";
    WebServiceCallReturn webReturn = WebServiceJSONCall(uri, "POST", postData);
    if (webReturn.Error == null) {
        //resultString = CleanJSON(resultString);
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        try {
            result = serializer.Deserialize<SomeCustomDataClass>(webReturn.JSONResponse);
        } catch {
            result.Error = "Error deserializing";
        }
    } else {
        result.Error = webReturn.Error;
    }
    return result;
} 
```

希望对某人有所帮助

# asp.net - 如何在 Formview 上同时拥有 EditItemTemplate 和 ItemTemplate？

> ID：10433557
> 
> 赞同：0
> 
> 时间：2012-05-03T14:31:55.203
> 
> 标签：asp.net, vb.net, formview

我在表单视图中有以下内容，我希望能够显示信息，如果有人进行更改，我应该通过单击更新来更新此信息。我对 asp.net 开发相当陌生，我该怎么做？我一直有异常，说 frm1 期待编辑模式。

提前致谢

```
<<asp:Formview D="FormView1" runat="server" DataSourceID="SqlDesc" ID="frm1">
   <ItemTemplate>
        <table>  
        <tr>
            <td>
                Description:<br />
            </td>
            <td style="">
                <asp:TextBox ID="DescTbox" runat="server" Width="450px" TextMode="MultiLine" Text='<%# Bind("Description") %>' Enabled="True" Rows="4"></asp:TextBox>                 
            </td>                
        </tr>
        <tr>
        <td></td>
        <td>
           <asp:Button ID="UpdateButton" runat="server" CausesValidation="True" CommandName="Update" Text="Update"> </asp:Button>
        </td>                 
        </tr>
    </table>
    </ItemTemplate>
    <EditItemTemplate>
     <table>
        <tr>
            <td>
                Description:<br />
            </td>
            <td style="">
                <asp:TextBox ID="DescTbox" runat="server" Width="450px" TextMode="MultiLine" Text='<%# Bind("Description") %>' Enabled="True" Rows="4"></asp:TextBox>                 
            </td>                
        </tr>
        <tr>
        <td></td>
        <td>
           <asp:Button ID="UpdateButton" runat="server" CausesValidation="True" CommandName="Update" Text="Update"> </asp:Button>
        </td>                 
        </tr>
    </table>

    </EditItemTemplate>
    </asp:Formview> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:35:50.973

如果可能，您`<Itemtemplate>`应该提供数据的只读视图，更新仅在`<EditItemTemplate>`. 然后，您需要将该行置于编辑模式，以便能够通过`EditRowIndex`在表格上设置 来编辑行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:39:10.023

我必须添加`DefaultMode`为编辑并使用`EditItemTemplate`而不是`ItemTemplate`

```
 <asp:Formview ID="FormView1" runat="server" DefaultMode="Edit" > 
        <EditItemTemplate> ...
        </EditItemTemplate>  <asp:Formview> 
```

谢谢

# vim - 在 vsplit 中打开可编辑文件，但在 vimscript 中保持原始位置

> ID：10433560
> 
> 赞同：6
> 
> 时间：2012-05-03T14:32:07.403
> 
> 标签：vim

我正在尝试编写一个插件，该插件将`system`根据当前缓冲区生成一个文件，然后在 a 中打开生成的文件`vsplit`，或者如果已经打开，它将在源文件更改时更新它。

我已经得到了生成文件并打开/更新拆分的代码，但问题是当它第一次打开拆分时，焦点转到拆分，当它更新源文件上的光标位置时跳转到页面顶部。

这是我正在尝试的，任何帮助将不胜感激。

```
execute 'keepjumps silent ! ' . s:cmd . ' ' . s:src_file . ' > ' . s:dst_file

if exists("s:outputbufnr") && bufexists(s:outputbufnr)
  execute 'keepjumps ' . bufwinnr(s:outputbufnr)
else
  " execute "keepjumps vnew " s:dst_file
  execute "keepjumps rightbelow vertical new " . s:dst_file
  let s:outputbufnr=bufnr(s:dst_file)
endif 
```

然而，从我认为`keepjumps`应该将光标返回到其先前位置的情况来看，情况似乎并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:55:24.803

这听起来像是对 vim 中预览窗口的完美使用。在预览窗口 ( `:pedit /path/to/file`) 中打开文件时，焦点不会从当前窗口中移开。如果需要，您还可以在需要时直接跳转到预览窗口`wincmd P`。您也可以在任何地方使用 关闭预览窗口`:pclose`。如果文件已更改并且您想查看更新，则可以`:pedit /path/to/file`再次获取更新。

另一个小好处，即使您在预览窗口中有一个文件，您仍然可以使用纯文本`:q`而不是`:qa`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:39:46.307

我怀疑你想`wincmd p`在拆分后使用，这会让你回到你所在的前一个窗口。

# xcode - 使用 UITableViews 跨应用程序使用 ADBannerView 的共享实例

> ID：10433565
> 
> 赞同：4
> 
> 时间：2012-05-03T14:32:21.503
> 
> 标签：xcode, singleton, uitableview, uiapplicationdelegate, adbannerview

我有一个包含多个 UITableViews 的应用程序，并且正在实施 iADs。根据 Apple 文档（[http://developer.apple.com/library/ios/#technotes/tn2286/_index.html#//apple_ref/doc/uid/DTS40011212](http://developer.apple.com/library/ios/#technotes/tn2286/_index.html#//apple_ref/doc/uid/DTS40011212)），我创建了一个属于我的应用程序委托的共享横幅并且应用程序代表也是横幅的代表。这很有效，并且在加载横幅和用户切换屏幕后，广告在各种视图控制器中很好地显示。

问题是在出现的第一个 viewController 上没有看到广告，因为视图控制器的 viweWillAppear 方法（我在其中调用我的“fixUpAdView”方法）在加载横幅之前出现。

我想我没有得到的部分是这个（来自苹果文档）：“让你的应用程序委托告诉当前视图控制器它是否应该显示或隐藏横幅。你可以使用 UINavigationControllerDelegate 或 UITabBarControllerDelegate 协议来推送横幅以显示它。” 我知道我需要在我的bannerViewDidLoadAd 和failToReceive 方法中添加一些内容，但是对于如何执行此操作有点困惑。

我不希望广告显示在我的所有视图控制器（只有 6 个）上，并且我在应用程序中也有几个模态视图（其中任何一个都没有广告）。

这是我的一些代码： 在我的 appDelegate 中：

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner {
    NSLog(@"bannerViewDidLoadAD");
    if (!_adBannerViewIsVisible) 
        _adBannerViewIsVisible = YES;

}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{

    NSLog(@"BannerAd didfailtoreceive");
    if (_adBannerViewIsVisible)
        _adBannerViewIsVisible = NO;

}

- (ADBannerView *)sharedAdBannerView 
{
    if (_sharedAdBannerView == nil) {

        Class classAdBannerView = NSClassFromString(@"ADBannerView");

        if (classAdBannerView != nil) {
            _sharedAdBannerView = [[classAdBannerView alloc] initWithFrame:CGRectZero];
            [_sharedAdBannerView setRequiredContentSizeIdentifiers:[NSSet setWithObjects: 
                                                              ADBannerContentSizeIdentifier320x50, 
                                                              ADBannerContentSizeIdentifier480x32, nil]];
            [_sharedAdBannerView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifier320x50];            
            [_sharedAdBannerView setFrame:CGRectOffset([_sharedAdBannerView frame], 0, 
                                                 -(iAD_BANNER_HEIGHT))];
            [_sharedAdBannerView setDelegate:self];
        }
    }

    return _sharedAdBannerView;
} 
```

在我的视图控制器中：

```
- (void)viewWillAppear:(BOOL)animated {

    if ([[AppDelegate ad] shouldShowAds]) {

        if (!self.contentView) {
            self.contentView = [[UIView alloc] initWithFrame:[[self view] bounds]];
            [self.view addSubview:_contentView];
        }
        [self.contentView addSubview:topView];
        [self fixupAdView];
        [self.view addSubview:[[AppDelegate ad] sharedAdBannerView]];
    }
    [super viewWillAppear:NO];
}

#pragma mark
#pragma mark iADS

- (void)fixupAdView {

    if ([[AppDelegate ad] sharedAdBannerView] != nil) {        

        [[[AppDelegate ad] sharedAdBannerView] setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifier320x50];
        [UIView beginAnimations:@"fixupViews" context:nil];

        if ([[AppDelegate ad] adBannerViewIsVisible]) {
            CGRect adBannerViewFrame = [[[AppDelegate ad] sharedAdBannerView] frame];
            adBannerViewFrame.origin.x = 0;
            adBannerViewFrame.origin.y = 0;
            [[[AppDelegate ad] sharedAdBannerView] setFrame:adBannerViewFrame];
            CGRect contentViewFrame = _contentView.frame;
            contentViewFrame.origin.y = iAD_BANNER_HEIGHT;
            contentViewFrame.size.height = self.view.frame.size.height - 
            iAD_BANNER_HEIGHT;
            _contentView.frame = contentViewFrame;
        } 
        else {
            CGRect adBannerViewFrame = [[[AppDelegate ad] sharedAdBannerView] frame];
            adBannerViewFrame.origin.x = 0;
            adBannerViewFrame.origin.y = -(iAD_BANNER_HEIGHT);
            [[[AppDelegate ad] sharedAdBannerView] setFrame:adBannerViewFrame];
            CGRect contentViewFrame = _contentView.frame;
            contentViewFrame.origin.y = 0;
            contentViewFrame.size.height = self.view.frame.size.height;
            _contentView.frame = contentViewFrame;            
        }
        [UIView commitAnimations];
    }   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T15:34:56.247

使用 NSNotificationCenter 来解决这个问题就像一个魅力，现在我的 iAd 一加载就会出现 - 耶！如果其他人需要这里是我输入的额外代码：（在我的 appDelegate.m 中）

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner {
NSLog(@"bannerViewDidLoadAD");
if (!_adBannerViewIsVisible) {
    _adBannerViewIsVisible = YES;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"adjustAdBannerView" object:nil];
} 
```

}

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error 
```

{

```
 NSLog(@"BannerAd didfailtoreceive");
if (_adBannerViewIsVisible) {
    _adBannerViewIsVisible = NO;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"adjustAdBannerView" object:nil];
} 
```

}

在我的视图控制器中（在 viewWillAppear 中）：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(fixupAdView)
                                                 name:@"adjustAdBannerView"
                                               object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T15:45:02.337

我自己一直在努力解决这个问题，这个和许多其他答案都非常有帮助。然而，它们似乎都依赖于与 AppDelegate 交互的 someViewController.m 代码，这似乎是错误的方式。

我的解决方案是让 App Delegate 将 adBannerView 对象传递给 subViewControllers，如下所示：

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    if (VERBOSE) NSLog(@"sharedAdBannerView %@ failed with error: %@", banner, error);
    if (self.adBannerIsVisible)
    {
        [someViewController setAdBannerViewIsVisible:NO];
        [someViewController setAdBannerView:nil];
        [otherViewController setAdBannerViewIsVisible:NO];
        [otherViewController setAdBannerView:nil];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"adjustAdBannerView" object:nil];
    }
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    if (VERBOSE) NSLog(@"sharedAdBannerView %@ loaded", banner);
    if (!self.adBannerIsVisible)
    {
        [someViewController setAdBannerViewIsVisible:YES];
        [someViewController setAdBannerView:sharedAdBannerView];
        [otherViewController setAdBannerViewIsVisible:YES];
        [otherViewController setAdBannerView:sharedAdBannerView];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"adjustAdBannerView" object:nil];
    }
} 
```

然后`someViewController`可以有代码来显示或`adBannerView`从视图中删除对象。

在几个不同的视图中使用相同的 AdBannerView 会有问题吗？

# php - mysql_real_escape_string 被忽略

> ID：10433570
> 
> 赞同：0
> 
> 时间：2012-05-03T14:32:41.917
> 
> 标签：php, mysql

我非常感谢我能得到的任何帮助。

我在使用表单时遇到了真正的麻烦，我似乎根本无法让 mysql_real_escape_string 工作。

我正在使用 MySQL 5.5 和 PHP 并对其进行测试，我创建了一个简单的表单 Magic Quotes 根本没有打开。

使用这种形式：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<form name="event_ad" action="test.php" method="post">
    <table>
    <tr>
        <td>Event Name:</td>
        <td><input name="event_name" type="text" size="90" /></td>
    </tr>
    <tr>
        <td>Start Date:</td>
        <td><input name="start_date" type="text" size="90" /></td>
    </tr>
    <tr>
        <td colspan="2" align="center"><input name="Submit" type="submit" id="Submit" value="Add New Event" /></td>
    </tr>
    </table>
</form>
</body>
</html> 
```

然后使用 test.php 将数据输入到表中

```
<?php
    mysql_connect("localhost","username","password") or die(mysql_error());
    mysql_select_db("databasename") or die(mysql_error());

    $name = $_POST['event_name'];
    $sdate = $_POST['start_date'];
    $name = mysql_real_escape_string($name);

    $sql = "INSERT INTO tblevents (event_name, event_date) VALUES ('" . $name . "','" . $sdate . "')";

    mysql_query($sql);

    echo "success";
?> 
```

（连接细节已更改）

当我输入事件名称 O'Rielly "Smith" 时，它作为 O'Rielly "Smith" 插入到 MySQL 表中

没有反斜杠，根本没有转义。

我真的在互联网上搜索过，试图解决这个问题，但似乎它适用于其他所有人。

我在这里误解了一些基本的东西吗？如果有人能引导我朝着正确的方向前进，我将不胜感激。

这是我在这个论坛上的第一篇文章，html 和代码格式似乎与我访问过的大多数论坛不一样，并且您无法预览所以我希望结果可以。

提前感谢任何提供帮助的人。干杯艾尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:35:00.410

这是设计使然，您不应该在表格中看到任何转义输入。只是为了插入。通过使用`mysql_real_escape_string`，您的查询看起来像

```
INSERT INTO tblevents (event_name, event_date) VALUES ('O\'Rielly \"Smith\"','1.4.2001')"; 
```

这些反斜杠确保您不会破坏撇号

MySQL“删除”所有反斜杠，直到它们被反斜杠转义:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:35:39.510

> 当我输入事件名称 O'Rielly "Smith" 时，它作为 O'Rielly "Smith" 插入到 MySQL 表中

这就是应该发生的事情。

转义使数据通过查询，以便原始数据最终进入数据库。目的不是为您存储的数据添加额外的字符，而是阻止具有特殊含义的字符破坏您的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:37:23.360

把逃跑想象成生日礼物上的包装纸。

您对数据进行转义，以便数据中的任何特殊字符在传输过程中失去其特殊含义。一旦它们“进入”目标系统（html 页面、数据库记录等），就不再需要转义，因为它们可能影响进程的地方现在已经结束。

包装好的礼物也一样——一旦收到礼物，你就不再需要包装纸了，所以它被移除了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:38:10.223

它运行良好。

删除`mysql_real_escape_string`将阻止数据被插入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T14:42:52.207

```
$name = $_POST['event_name'];
$sdate = $_POST['start_date'];

$db = new mysqli("localhost", "username", "password", "databasename");

$query = "INSERT INTO tblevents (event_name, event_date) VALUES (?, ?)";
$statement = $db->prepare($query);
$statement->bind_param("ss", $name, $sdate);

$statement->execute();
$statement->close();

$db->close(); 
```

（我省略了连接错误检查）

# javascript - 重新加载标记和列表，如 Foursquare

> ID：10433576
> 
> 赞同：0
> 
> 时间：2012-05-03T14:33:04.277
> 
> 标签：javascript, google-maps-api-3, dom-events

我有类似于foursquare的地图，侧边栏列出地点和地图显示标记，我返回带有描述和位置的JSON，在我的侧边栏列表上显示所有标记而不是显示在地图上的标记，我想做类似foursquare，当我' dragend'重新加载侧边栏上的列表和地图边界内的标记，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:17:08.407

使用[商店定位器库](http://storelocator.googlecode.com/git/index.html)。

披露：我写的。

# servlets - 使用 servlet 将报告下载为 pdf

> ID：10433578
> 
> 赞同：0
> 
> 时间：2012-05-03T14:33:22.430
> 
> 标签：servlets, jasper-reports, pdf-generation

我的 POJO 类中有 pdf 文件位置和 pdf 文件。我想使用 servlet 下载你的 pdf。请告诉我一些完成它的方法。文件位置=/tmp/SWBC_444Thu May 03 20:01:07 IST 20124366242221752147545.pdf 使用此文件位置我想提示用户将文件下载为 pdf。

这是我的代码。

```
File file = new File(filePath);
  OutputStream responseOutputStream = response.getOutputStream(); 
  response.setContentLength((int)filePath.length());
  FileInputStream fileInputStream = new FileInputStream(file);
  int size = fileInputStream.available();
  byte[] content = new byte[size];
  int bytesRead;
  while ((bytesRead = fileInputStream.read(content)) != -1)   
  {  
   responseOutputStream.write(content, 0, bytesRead);  
  }
  responseOutputStream.flush();
  fileInputStream.close();
  responseOutputStream.close(); 
```

. 我读取并生成了文件，但是当打开文件时它是空的。

感谢您..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:36:43.267

httpservletresponse.setHeader("Content-disposition", "attachment; filename=\"" + title + ".pdf\""); 应该做

# jsp - 在 build.xml 中自动创建 web.xml

> ID：10433583
> 
> 赞同：0
> 
> 时间：2012-05-03T14:33:45.220
> 
> 标签：jsp, ant

有没有办法`web.xml`使用文件创建`ANT` `build.xml`文件？

我知道我可以使用它来做到这一点`org.apache.jasper.JspC`，但由于某种原因，我**只使用**`web.xml`根节点......

 **谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:11:50.090

`web.xml`可以使用`org.apache.jasper.JspC`类向文件添加映射。也可以`web.xml`使用相同的类创建文件。**

# mysql - mysql相交

> ID：10433587
> 
> 赞同：1
> 
> 时间：2012-05-03T14:34:23.377
> 
> 标签：mysql

我是 mysql 新手，所以请善待。我的脚本出现以下错误，我不确定它有什么问题。

```
SELECT uoid 
FROM mint 
WHERE mint_id='6' and userid='3836'
INTERSECT 
SELECT id as uoid
FROM cats 
WHERE category='Health, Fitness' 
ORDER BY 1; 
```

给

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INTERSECT SELECT id as uoid FROM cats WHERE category='Health, Fitness'' at line 4 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T14:37:59.147

MySQL 没有 INTERSECT 关键字。有关如何实现您所追求的建议，请参阅[这个问题](https://stackoverflow.com/q/2300322/306084)和[这个问题。](https://stackoverflow.com/q/2621382/306084)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:37:09.210

`INTERSECT`MySQL 不支持。您需要以某种方式重组您的查询。如果您的 MySQL 版本支持子查询，您可能可以使用子查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T07:46:24.793

这是因为 intersect 仅适用于同一张桌子，而不是您尝试的不同桌子。看到[这个](http://www.tutorialspoint.com/sql/sql-intersect-clause.htm)

代替 intersect 使用连接语句语法。并且 INTERSECT 确实存在于sql中

# bash - 将程序提交给 launchctl，但参数无法正常工作

> ID：10433590
> 
> 赞同：4
> 
> 时间：2012-05-03T14:34:27.190
> 
> 标签：bash, osx-lion, launchd

我发现，LaunchCtl 在使用它的“提交”协议时会跳过参数。

我有以下脚本（script.sh）：

```
#!/bin/bash
arg1="$1"
arg2="$2"
arg3="$3"
arg4="$4"
echo $arg1$arg2$arg3$arg4
exit 1 
```

当我从终端调用 script.sh 时，将参数传递给它没有问题。当我通过 LaunchCtl 做同样的事情时，出现了问题，第一个参数消失了。

```
launchctl submit -l MyUniqueScript -p ROOT/script.sh -o ROOT/out.txt -e ROOT/err.txt "abc" "def" "ghi" "jkl" 
```

我什至检查我的过程

```
launchctl list MyUniqueScript 
```

我所有的论点都在那里。终端将它们打印出来。

```
{
"Label" = "MyUniqueScript";
"LimitLoadToSessionType" = "Background";
"OnDemand" = false;
"LastExitStatus" = 256;
"TimeOut" = 30;
"Program" = "/Users/ROOT/script.sh";
"StandardOutPath" = "/Users/ROOT/out.txt";
"StandardErrorPath" = "/Users/ROOT/err.txt";
"ProgramArguments" = (
    "abc";
    "def";
    "ghi";
    "jkl";
);
}; 
```

但是我在 out.txt 中的内容非常混乱：

```
defghijkl 
```

而不是

```
abcdefghijkl 
```

谁能帮我解决这个问题？有谁知道我应该做什么，或者我错了什么？

我还必须说，上面的小例子当然不是我正在处理的原始脚本。这更容易显示我的问题。

请帮我！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:42:50.117

您的 launchctl 语法错误。第一个“参数”应该是脚本的路径：

```
launchctl submit -l MyUniqueScript -p ROOT/script.sh -o ROOT/out.txt -e ROOT/err.txt -- ROOT/script.sh "abc" "def" "ghi" "jkl" 
```

从手册页：

> 提交 -l 标签 [-p 可执行文件] [-o 路径] [-e 路径] --**命令**[args]

该`-p`设置似乎用于混叠，但我不确定为什么会有用

> -p program 真正执行什么程序，不管提交子命令中的 -- 后面是什么**。**

因此，在您的情况下，launchctl 将您的第一个参数视为要运行的脚本，但实际上是在运行您的脚本，因为您将其指定为带有`-p`. 如上所述，将脚本指定为 arg 0，或者只是删除`-p`规范并在其 args 之前包含脚本的路径。

# objective-c - (iOS) 在字符串中转义反斜杠时出错

> ID：10433595
> 
> 赞同：1
> 
> 时间：2012-05-03T14:34:40.147
> 
> 标签：objective-c, ios

我在替换字符串中的反斜杠时遇到问题`K90wuRcDX43cqDB7xkjReuzb\/nDaC0xc7Bqxi4Ft0T6EscKzEBXBJ6k8fFLl6j0S`。

如果我手动转义字符串中的反斜杠，我没有问题

```
NSString *mytoken = @"K90wuRcDX43cqDB7xkjReuzb\\/nDaC0xc7Bqxi4Ft0T6EscKzEBXBJ6k8fFLl6j0S";
NSLog(@"mytoken %@",mytoken);
    mytoken K90wuRcDX43cqDB7xkjReuzb\/nDaC0xc7Bqxi4Ft0T6EscKzEBXBJ6k8fFLl6j0S 
```

但是，如果我尝试以编程方式执行此操作，那么我将无法逃脱反斜杠（我尝试了一切：CFString, `stringByReplacingOccurrencesOfString`, `replaceOccurrencesOfString`）

```
NSMutableString *mytokenOrig = [NSMutableString stringWithFormat:@"K90wuRcDX43cqDB7xkjReuzb\/nDaC0xc7Bqxi4Ft0T6EscKzEBXBJ6k8fFLl6j0S"];
[mytokenOrig replaceOccurrencesOfString:@"\\" withString:@"\\\\" options:NSCaseInsensitiveSearch range:(NSRange){0,[mytokenOrig length]}];
NSLog(@"mytokenOrig %@",mytokenOrig);

mytokenOrig K90wuRcDX43cqDB7xkjReuzb/
nDaC0xc7Bqxi4Ft0T6EscKzEBXBJ6k8fFLl6j0S 
```

注意：我必须将此标记附加到一个字符串并计算一个哈希值，所以让它工作非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:39:11.143

那是因为`mytokenOrig`不包含反斜杠，它已经包含转义的换行符。

```
[mytokenOrig replaceOccurrencesOfString:@"\n" withString:@"\\n" options:NSCaseInsensitiveSearch range:(NSRange){0,[mytokenOrig length]}]; 
```

但是，您不需要（重新）转义字符串。[转义字符](http://en.wikipedia.org/wiki/Escape_character)是为了让您能够在代码中编写特殊字符。

# android - 如何获取原始文件夹uri路径并保存在android的内部存储器中？

> ID：10433598
> 
> 赞同：0
> 
> 时间：2012-05-03T14:34:53.837
> 
> 标签：android

这里是我的代码。哪里是我的错误错误。错误是找不到文件异常。

```
Uri video = Uri.parse("android.resource://com.ring.app/raw/"+a[i]+".mp3");
file= new File(video.toString());
try 
{ 
inputStream= new FileInputStream(file);
fos = super.openFileOutput("output"+i+".mp3", MODE_WORLD_READABLE);
byte buffer[]=new byte[1024];
while((len=inputStream.read(buffer))>0)
fos.write(buffer,0,len);
fos.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:37:21.073

```
String uri = "android.resource://" + getPackageName() + "/"+R.raw.filename; 
```

# iphone - IOS：找不到 -lz.1.2.3 的库

> ID：10433603
> 
> 赞同：2
> 
> 时间：2012-05-03T14:35:04.220
> 
> 标签：iphone, ios, llvm, llvm-gcc

我不明白我的错误：

> ld库/开发者/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator/Test.app/Test normal i386
> 
> ```
> cd /Users/lol/Desktop/Test
> 
> setenv MACOSX_DEPLOYMENT_TARGET 10.6
> 
> setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
> 
> /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 
> ```
> 
> -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk
> 
> -L/Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator
> 
> -L/Users/lol/Desktop/Test -F/Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator
> 
> -filelist /Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Intermediates/Test.build/Debug-iphonesimulator/Test.build/Objects-normal/i386/Test.LinkFileList
> 
> -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -ObjC -D__IPHONE_OS_VERSION_MIN_REQUIRED=40000 -lextThree20JSON+SBJSON /Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator libThree20UICommon.a
> 
> /Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator/libThree20.a
> 
> /Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator/libThree20UINavigator.a
> 
> /Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator/libThree20Core.a
> 
> /Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator/libThree20UI.a
> 
> /Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator/libThree20Network.a
> 
> /Users/lol/Library/Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator/libThree20Style.a
> 
> -framework SystemConfiguration -framework MobileCoreServices -framework CFNetwork -framework AddressBook -framework AddressBookUI -framework QuartzCore -framework UIKit -framework Foundation -framework MessageUI -framework CoreGraphics -lz.1.2.3 -lxml2.2.7.3 -o /Users/lol/Library /Developer/Xcode/DerivedData/Test-aywxyvnakaqhmwfbwellynwqmoik/Build/Products/Debug-iphonesimulator/Test.app/Test

```
ld: library not found for -lz.1.2.3
Command /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 failed with exit code 1 
```

你能帮我理解这个吗？

非常感谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:50:13.023

选项 -lz.1.2.3 表示编译器正在尝试链接文件 libz.1.2.3.a、libz.1.2.3.so 或 libz.1.2.3.dylib。它找不到任何这些变化，因此失败了。

您可以尝试查找此文件的位置并将其包含在您的库包含路径中。

我的问题是你为什么要链接特定版本的 z lib？通常，只需要 -lz 或 -llibz.dylib 就足够了。您有理由选择特定版本吗？当您使用未版本化的名称进行链接时会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-21T09:54:10.550

只需使用 -lz，无需使用版本链接。所以从框架中删除 libz-1.2.3.tbd 并添加 libz.tbd。

1.  在项目导航器中，选择您的项目。
2.  选择你的目标。
3.  选择“构建阶段”选项卡。
4.  打开“将二进制文件与库链接”扩展器。
5.  删除 libz-1.2.3.tbd
6.  单击 + 按钮。
7.  添加 libz.tbd

[![导入库](../Images/c97267a3bf1e601f161d9055881fd95f.png)](https://i.stack.imgur.com/R8po8.png)

# c# - 如何在 GridView 中检索列的值

> ID：10433607
> 
> 赞同：0
> 
> 时间：2012-05-03T14:35:20.770
> 
> 标签：c#, asp.net, gridview

我有一个包含以下列的表：

> ```
> FileID | username | filename 
> ```

我正在使用一个有两个列的gridview：

> 文件名 | 下载

在下载栏中，我有一个名为“下载”的按钮，用于下载文件。现在我想在单击“下载”按钮时检索文件 ID 或文件名。

我试过这条线来获取文件ID，但它给出了一个错误：

```
int FileID = (int)GridView1.DataKeys[Convert.ToInt32(e.CommandArgument)].Value; 
```

错误：System.ArgumentOutOfRangeException 未被用户代码处理 Message=Index 超出范围。必须是非负数且小于集合的大小。

这是我的aspx页面代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="filelist" 
    Width="404px" onrowcommand="GridView1_RowCommand" Height="131px">
    <Columns>
        <asp:BoundField DataField="fileid" HeaderText="fileid" InsertVisible="False" 
            ReadOnly="True" SortExpression="fileid" Visible="False" />
        <asp:BoundField DataField="userid" HeaderText="userid" SortExpression="userid" 
            Visible="False" />
        <asp:BoundField DataField="filename" HeaderText="FileName" 
            SortExpression="filename" />
        <asp:ButtonField HeaderText="Download" Text="Download" CommandName="download"/>
    </Columns>
</asp:GridView>

<asp:SqlDataSource ID="filelist" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT * FROM [FileDetails] WHERE ([userid] = @userid)">
    <SelectParameters>
        <asp:SessionParameter Name="userid" SessionField="userid" Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource> 
```

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:43:54.187

您可以使用您的第一个`BoundField`来获得`fileid`：

```
GridViewRow row = (GridViewRow)((Control)sender).NamingContainer;
int FileID = int.Parse(row.Cells[0].Text); 
```

**编辑**：当您处理 GridView 的`RowCommand`事件时，上面的代码不起作用，因为它`sender`是 GridView 而不是 Button。然后您会在以下位置找到您的 Button [`GridViewCommandEventArgs.CommandSource`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewcommandeventargs.commandsource.aspx)：

```
GridViewRow row = (GridViewRow)((Control)e.CommandSource).NamingContainer;
int FileID = int.Parse(row.Cells[0].Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:40:39.320

这是我如何访问数据网格内的列中的值

```
GridView1.Rows[rowId].Cells[columnId].Value 
```

# python - 无法在 Windows 7 中安装图形工具

> ID：10433609
> 
> 赞同：8
> 
> 时间：2012-05-03T14:35:22.087
> 
> 标签：python, boost, windows-7, mingw, boost-python

我想在 Windows 7 上使用[图形工具](http://projects.skewed.de/graph-tool/)，但我无法安装它。

[此处](http://projects.skewed.de/graph-tool/wiki/GraphToolDownload)列出的所有要求均已成功安装。Python 2.7 安装在`C:\python27`. Boost 1.49.0 用mingw 编译成功，安装进去`C:\boost`，`BOOST_ROOT`环境变量指向它。Boost 是在调试和发布模式下编译的，静态和动态的。

* * *

从 MSyS 内部调用`configure`会导致以下错误。

```
configure: error:
  Could not link test program to Python. Maybe the main Python library has been
  installed in some non-standard library path. If so, pass it to configure,
  via the LDFLAGS environment variable.
  Example: ./configure LDFLAGS="-L/usr/non-standard-path/python/lib"
  ============================================================================
   ERROR!
   You probably have to install the development version of the Python package
   for your distribution.  The exact name of this package varies among them.
  ============================================================================ 
```

* * *

调用`configure LDFLAGS="-LC:/python27/libs"`修复了此错误，但导致以下错误

```
checking for boostlib >= 1.38.0... configure: error: We could not detect the boo
st libraries (version 1.38 or higher). If you have a staged boost library (still
 not installed) please specify $BOOST_ROOT in your environment and do not give a
 PATH to --with-boost option.  If you are sure you have boost installed, then ch
eck your version number looking in <boost/version.hpp>. See http://randspringer.
de/boost for more documentation. 
```

这很奇怪，因为`BOOST_ROOT`已明确定义（用`printenv`命令检查）。

* * *

我尝试的下一个命令是`configure --with-boost="C:/boost" LDFLAGS="-LC:/python27/libs"`

```
checking for boostlib >= 1.38.0... yes
checking whether the Boost::Python library is available... no
configure: error: No usable boost::python found 
```

好的，它检测到 boost，但它找不到 boost::python。由于它的大小，我无法`config.log`在 stackoverflow 上发布，但你可以在[这里](http://pastebin.com/ApSJgkyB)找到它。

我现在真的很困惑，不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:56:24.073

我在为 Windows 编译图形工具（或其他任何东西）方面的经验为零，但是 config.log 的以下部分很突出：

```
 configure:17224: checking whether the Boost::Python library is available
    configure:17254: g++ -c  -Wall -ftemplate-depth-150 -Wno-deprecated -Wno-unknown-pragmas -O99 -fvisibility=default -fvisibility-inlines-hidden -Wno-unknown-pragmas  -Ic:\python27\include conftest.cpp >&5
    conftest.cpp:32:36: fatal error: boost/python/module.hpp: No such file or directory
    compilation terminated. 
```

请注意您传递的提升路径没有被使用！尝试通过 CXXFLAGS="-IC:\boost\include" 进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:52:33.187

可能这样的事情会有所帮助：

```
./configure --prefix=/usr/ 
```

因为windows路径不同，自己试试。

# macos - erlang在mac osx 10.7.x上出错

> ID：10433611
> 
> 赞同：0
> 
> 时间：2012-05-03T14:35:33.410
> 
> 标签：macos, erlang

我正在尝试在 mac osx 上安装 otp R14B04 版本。

`./configure`进展顺利，但`make`给了我这个错误：

```
make -f i386-apple-darwin11.3.0/Makefile TYPE=opt
make[3]: Nothing to be done for `all'.
cd lib && \
      ERL_TOP=/Users/abhinavsingh/Documents/otp_src_R14B04 PATH=/Users/abhinavsingh/Documents/otp_src_R14B04/bootstrap/bin:${PATH} \
        make opt SECONDARY_BOOTSTRAP=true
=== Entering application hipe
erlc -W  +debug_info +inline -o../ebin hipe_rtl.erl
(no error logger present) error: "Error in process <0.1.0> with exit value: {{badfun,[<<5 bytes>>,<<54 bytes>>,<<9 bytes>>,<<3 bytes>>,<<2 bytes>>,<<5 bytes>>,<<19 bytes>>,<<2 bytes>>,<<8 bytes>>,<<8 bytes>>,<<5 bytes>>,<<7 bytes>>,<<5 bytes>>,<<11 bytes>>,<<2 bytes>>,<<11 bytes>>,<<15 bytes>>,<<4 bytes>>,<<57 bytes>>,<<5 bytes>>,<<1 byte>>,<<7 bytes>>,<<10 bytes>>,<<7 bytes>>,<<6 bytes>>,<<7 bytes>>,<<7 bytes>>,<<6 bytes>>,<<12 bytes>>]},[{erlang,apply,2}]}\n" 
```

任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:05:30.153

这似乎是一个已知的 MacPorts 问题。详情请参阅：

[https://trac.macports.org/ticket/31698](https://trac.macports.org/ticket/31698)

# html - 减小屏幕尺寸时的 CSS 问题

> ID：10433612
> 
> 赞同：-2
> 
> 时间：2012-05-03T14:35:35.527
> 
> 标签：html, css, user-interface

我的 IE 有问题。当我最大化屏幕时，一切正常。当我减小屏幕尺寸时，输入框和其他 div 标签保持原样，并且这些标签超出了页面布局，我的页面看起来很乱。我希望我的输入框和其他 Div 标签能够根据需要容纳并且不要外出页面布局。

我的输入框示例：

```
<div style="background-color:#c2d69b; 
            width: 628px; 
            padding-left: 5px;
            padding-right: 5px;
            border-color: #6699CC;
            border-width: 1px;
            border-style: solid;">

    <b>Keywords</b><br />
    <input id="keywords" 
           runat="server" 
           type="text" 
           size="100" 
           title="Keywords" /><br /><br />

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:45:07.633

标签的固定宽度`<div>`强制容器具有 628px 的宽度。也许您可以使用百分比值（例如 100%）来适应周围的容器。

此外，您的标签具有导致固定宽度`<input>`的属性。`size`您也可以`style`根据输入字段周围的元素尝试该标签的百分比值以获得灵活的宽度。

# javascript - 使用 JavaScript 动态加载 Choropleth

> ID：10433615
> 
> 赞同：0
> 
> 时间：2012-05-03T14:35:41.050
> 
> 标签：javascript, jquery, dynamic, graphic

我有一个数据库和 Web 服务器，其中填充了特定国家/地区的值。我希望能够显示一个交互式地图，该地图在查询时根据我的数据库中的值进行颜色编码。（通过交互，我的意思是一个简单的放大和移动功能就足够了）。

我有世界的形状文件（.shp），也可以轻松获取 KML 文件。这一切都需要在 JavaScript/JQuery 中完成（使用 JQuery 从数据库中获取数据），然后将颜色代码方案应用于形状文件（填写国家边界）。

什么是一个好的 JavaScript 库可以用来做这个？我已经研究过 OpenLayers，但不确定它能否满足我的需求（也许我还没有深入挖掘）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T16:24:37.340

听起来[Leaflet.js](http://leafletjs.com)对您来说是另一个不错的选择。在 Leaflet 中制作等值线地图非常容易，而且城际（缩放）是标准的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:40:04.497

您可能会尝试 D3.js，它通常是一个很棒的框架，并且有一些基本的 Choropleth 支持，但我不确定它与您现有的文件在本机上的工作情况如何。

查看：

[http://mbostock.github.com/d3/ex/choropleth.html](http://mbostock.github.com/d3/ex/choropleth.html)

# excel - Excel中如何改变数字的方向（从右（0）到左（100））？

> ID：10433627
> 
> 赞同：0
> 
> 时间：2012-05-03T14:37:14.793
> 
> 标签：excel, numbers, excel-formula

我有一行从 0 到 100 的数字。它们像往常一样互相跟随：

```
1 2 3 4 5 6 7 8 9 10 ... and so on --> ... 100 
```

但我需要将它们的方向从右向左改变，如下所示：

```
100 <-- and so on ... 10 9 8 7 6 5 4 3 2 1 0 
```

这个操作有什么特殊的工具吗？

每个数字都在其单独的单元格中，水平方向：1 in `[A1]`、2 in `[B1]`、3 in `[C1]`，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:43:00.877

如果这正是您所需要的，您只需在 A1 中输入 100，在 B1 中输入 99，选择 2 个单元格并将公式向右拖动（通过单击所选范围右下角的小方块）。

如果您的实际问题有点复杂，并且您需要按降序对数据进行排序，您可以：

*   转置它以使其垂直（复制/粘贴特殊并选择转置）
*   使用标准排序功能对数据集进行排序
*   再次将其移回其原始范围

# mongodb - MongoDB - 将存储的值强制为大写并搜索

> ID：10433632
> 
> 赞同：1
> 
> 时间：2012-05-03T14:37:19.630
> 
> 标签：mongodb, mongodb-query

在 SQL 世界中，我可以做一些事情：

```
SELECT name FROM table WHERE UPPER(name) = UPPER('Smith'); 
```

这将匹配对“Smith”、“SMITH”、“SmiTH”等的搜索……因为它强制查询和值是相同的大小写。

但是，如果不使用 RegEx，MongoDB 似乎没有此功能，RegEx 不会使用索引，并且对于大量数据会很慢。

有没有办法在 MongoDB 中对存储的值进行搜索之前将其转换为特定的情况？

我遇到了 $toUpper 聚合，但我不知道在这种特殊情况下如何使用它。

如果在搜索之前无法转换存储的值，是否可以让 MongoDB 在 Mongo 中创建值时转换它？因此，当我将文档添加到集合中时，它会强制将“名称”属性用于特定情况吗？类似于 Rails 世界中的回调。

看起来也可以为 MongoDB 创建存储的 JS，类似于存储过程。这也是一个可行的解决方案吗？

主要是在寻找正确方向的推动力；一旦我知道我在寻找什么，我就可以找出特定的代码，但到目前为止，我什至不确定我想要的功能是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:52:40.090

您必须在存储数据之前对其进行规范化。不支持在运行时将规范化作为查询的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:54:22.543

最简单的做法可能是保存您要搜索的字段的大小写规范化（即全大写）和显示版本。假设您正在存储用户并希望对姓氏进行不区分大小写的搜索。您可能会存储：

```
{
    _id: ObjectId(...),
    first_name: "Dan",
    last_name: "Crosta",
    last_name_upper: "CROSTA"
} 
```

然后，您可以在 上创建索引`last_name_upper`，并进行如下查询：

```
> db.users.find({last_name_upper: "CROSTA"}) 
```

# apache - apache服务器上同一目录中不同用户的不同权限

> ID：10433634
> 
> 赞同：2
> 
> 时间：2012-05-03T14:37:21.820
> 
> 标签：apache, webdav

是否可以对 apache 服务器上的目录中的用户访问进行不同的限制？

例如，用户 foo 可以读取和写入文件而另一个用户 bar 只能读取？

**更新**：到目前为止我尝试了什么

```
<Directory /var/www/html/uploads>
    DAV On
    AuthType Basic
    AuthName "WebDAV access"
    AuthUserFile /var/www/html/uploads/.passwdfile
    AllowOverride None
    Options None
    <LimitExcept GET>
        Require user testUserGet testUserPut
    </LimitExcept>
    <LimitExcept PUT>
        Require user testUserPut
    </LimitExcept>
    Require valid-user
</Directory> 
```

但是，我知道只需指定一个有效的用户就可以`PUT`填充`uploads`（我猜这是由于`Require valid-user`）。我需要的是 testUserGet 只能执行`GET`和 testUserPut`PUT`和`GET`.

# android - 按钮上的 nulPointException

> ID：10433636
> 
> 赞同：0
> 
> 时间：2012-05-03T14:37:22.317
> 
> 标签：android, button, nullpointerexception

我需要能够从活动中拨打电话。所以这是我的一个活动，它显示了人们的详细信息，我有一个通话按钮。但是当我调用 setOnClickListener(...) 时出现 nullPointerError。为什么？谢谢任何帮助。

```
package com.AndroidApp.pagine;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Set;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.os.Bundle;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

import com.AndroidApp.ApplicationController;
import com.AndroidApp.R;
import com.AndroidApp.XMLFunctions;
import com.AndroidApp.Login.LoginActivity;
import com.AndroidApp.domain.Anagrafica;

public class DettagliPagina extends ListActivity {

    public Anagrafica anagrafica;
    public ArrayList<HashMap<String, String>> mylist;
    private boolean paused, newIntentSelected = false;  
    private ProgressDialog progressDialog;
    private SharedPreferences mPreferences;
    public ApplicationController ac;

    private Button bCall;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ac = (ApplicationController)getApplication();

        mPreferences = getSharedPreferences("CurrentUser", MODE_PRIVATE);
        String nome = mPreferences.getString("nome", "Errore");
        String cognome = mPreferences.getString("cognome", "Errore");
        setTitle("Sessione di : " + nome + " " + cognome);

        new BackgroundAsyncTask().execute();
    }

    @Override
    protected void onStart() {
        super.onStart();

        bCall = (Button) findViewById(R.id.bCall);

        // add PhoneStateListener
        PhoneCallListener phoneListener = new PhoneCallListener();
        TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(phoneListener, PhoneStateListener.LISTEN_CALL_STATE);

        // add button listener
        bCall.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {

                    Intent callIntent = new Intent(Intent.ACTION_CALL);
                    callIntent.setData(Uri.parse("tel:3492395504"));
                    startActivity(callIntent);

                }
        }); 

    }

    @Override
    protected void onPause() {
        super.onPause();
        paused = true;
        ac.setOraAttuale(Calendar.getInstance());
        ac.oraAttuale.add(Calendar.MINUTE, 1);
        ac.setOraScadenza(ac.getOraAttuale());
        Log.d("DettagliPAgina scadenza", ac.getOraScadenza().getTime().toString());
    }

    @Override
    protected void onResume() {
        super.onResume();
        if (ac.isKill) {
            finish();
        }
        if (paused && !newIntentSelected){
            if (Calendar.getInstance().after(ac.getOraScadenza())){
                //torna al login con toast sessione scaduta
                ac.setSessioneTerminata(true);
                Toast.makeText(getApplicationContext(), "Sessione Scaduta", Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(DettagliPagina.this, LoginActivity.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent);
            }
        }
    }

    public class BackgroundAsyncTask extends
            AsyncTask<String, Integer, ArrayList<HashMap<String, String>>> {

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(
                String... paths) {
            mylist = new ArrayList<HashMap<String, String>>();

            String xml = XMLFunctions.getXML();
            Document doc = XMLFunctions.xmlFromString(xml);
            int numResults = XMLFunctions.numResults(doc);

            if ((numResults <= 0)) {
                Log.i("doInBack", "nussun risultato");
                DettagliPagina.this.runOnUiThread(new Runnable() {
                    public void run() {
                        Toast.makeText(getApplicationContext(), "Nessun risultato trovato", Toast.LENGTH_LONG).show();
                    }
                });

                Intent intent = new Intent(DettagliPagina.this, FiltriAnagraficaPagina.class);
                startActivity(intent);
            }

            Bundle extras = getIntent().getExtras();
            int id = 0;
            System.out.print(id);
            if (extras != null) {
                id = extras.getInt("id");
            }

            Log.i("Dettagli", "D1");
            Set<Anagrafica> anagrafici = new HashSet<Anagrafica>();
            NodeList nodes = doc.getElementsByTagName("anagrafica");    

            Element e = (Element) nodes.item(id);
            anagrafica = new Anagrafica();
            anagrafica.setId(XMLFunctions.getValue(e, "idAnagrafica"));
            anagrafica.setNome(XMLFunctions.getValue(e, "nome"));
            anagrafica.setCognome(XMLFunctions.getValue(e, "cognome"));
            anagrafica.setIndirizzo(XMLFunctions.getValue(e, "indirizzo"));
            anagrafica.setDataDiNascita(XMLFunctions.getValue(e, "dataDiNascita"));
            anagrafica.setEmail(XMLFunctions.getValue(e, "email"));
            anagrafica.setTipologiaUtente(XMLFunctions.getValue(e, "tipologieUtente"));
            anagrafica.setAziendaCollegata(XMLFunctions.getValue(e, "aziendaCollegata"));
            anagrafica.setTelefono(XMLFunctions.getValue(e, "telefono"));
            anagrafica.setCellulare(XMLFunctions.getValue(e, "cellulare"));
            anagrafica.setInteressi(XMLFunctions.getValue(e, "interessi"));
            anagrafica.setRiferimenti(XMLFunctions.getValue(e, "riferimenti"));
            anagrafici.add(anagrafica);

            HashMap<String, String> map = new HashMap<String, String>();
            map.put("idAnagrafica",anagrafica.getId());
            map.put("nomeCognome",anagrafica.getNome() + " " + anagrafica.getCognome());
            map.put("indirizzo", "Indirizzo: " + anagrafica.getIndirizzo());
            map.put("dataDiNascita", "Data Nascita: " + anagrafica.getDataDiNascita());
            map.put("email", "Email: " + anagrafica.getEmail());
            map.put("tipologieUtente", "Tipologie Utente: " + anagrafica.getTipologiaUtente());
            map.put("aziendaCollegata", "Azienda Collegata: " + anagrafica.getAziendaCollegata());
            map.put("telefono", "Telefono: " + anagrafica.getTelefono());
            map.put("cellulare", "Cellulare: " + anagrafica.getCellulare());
            map.put("interessi", "Interessi: " + anagrafica.getInteressi());
            map.put("riferimenti", "Riferimenti" + anagrafica.getRiferimenti());

            mylist.add(map);
            Log.i("Dettagli", "D2");
            return mylist;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = new ProgressDialog(DettagliPagina.this);
            progressDialog.setCancelable(true);
            progressDialog.setMessage("Loading...");
            progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            progressDialog.setProgress(0);
            progressDialog.show();
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            super.onProgressUpdate(values);
        }

        protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

            final ListAdapter adapter = new SimpleAdapter(DettagliPagina.this,  mylist, R.layout.dettagli,
                    new String[] { "nomeCognome", "dataDiNascita",
                            "tipologieUtente", "aziendaCollegata", "email",
                            "telefono", "cellulare", "interessi", "indirizzo",
                            "riferimenti" },
                    new int[] { R.id.tvNomeCognome, R.id.tvDataDiNascita,
                            R.id.tvTipologiaUtente, R.id.tvAziendaCollegata,
                            R.id.tvEmail, R.id.tvTelefono, R.id.tvCellulare,
                            R.id.tvInteressi, R.id.tvIndirizzo, R.id.tvRiferimenti });

            setListAdapter(adapter);

            final ListView lv = getListView();
            lv.setTextFilterEnabled(true);
            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    @SuppressWarnings("unchecked")
                    HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);
                    Toast.makeText(getApplicationContext(), "ID '" + o.get("idAnagrafica") + "' was clicked.",
                            Toast.LENGTH_LONG).show();

                }
            });

            progressDialog.dismiss();
        }
    }

    public class PhoneCallListener extends PhoneStateListener {

        private boolean isPhoneCalling = false;

        String LOG_TAG = "LOGGING 123";

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {

            if (TelephonyManager.CALL_STATE_RINGING == state) {
                // phone ringing
                Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
            }

            if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
                // active
                Log.i(LOG_TAG, "OFFHOOK");

                isPhoneCalling = true;
            }

            if (TelephonyManager.CALL_STATE_IDLE == state) {
                // run when class initial and phone call ended, need detect flag
                // from CALL_STATE_OFFHOOK
                Log.i(LOG_TAG, "IDLE");

                if (isPhoneCalling) {

                    Log.i(LOG_TAG, "restart app");

                    // restart app
                    Intent i = getBaseContext().getPackageManager()
                            .getLaunchIntentForPackage(
                                    getBaseContext().getPackageName());
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);

                    isPhoneCalling = false;
                }

            }
        }
    }
} 
```

这是详细的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/tvNomeCognome"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:drawableLeft="@drawable/icon"
                android:drawablePadding="10dp"
                android:padding="7dp"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="24dp" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:padding="4dp" >

            <TextView
                android:id="@+id/tvTipologiaUtente"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:textSize="20dp" />

            <TextView
                android:id="@+id/tvDataDiNascita"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:textSize="18dp" />

            <TextView
                android:id="@+id/tvEmail"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:autoLink="email"
                android:linksClickable="true"
                android:padding="2dp"
                android:textSize="18dp" />

            <TextView
                android:id="@+id/tvTelefono"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:autoLink="phone"
                android:linksClickable="true"
                android:padding="2dp"
                android:textSize="18dp" />

            <TextView
                android:id="@+id/tvCellulare"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:autoLink="phone"
                android:linksClickable="true"
                android:padding="2dp"
                android:textSize="18dp" />

            <TextView
                android:id="@+id/tvInteressi"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:textSize="18dp" />

            <TextView
                android:id="@+id/tvAziendaCollegata"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:textSize="18dp" />

            <TextView
                android:id="@+id/tvIndirizzo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:textSize="18dp" />

            <TextView
                android:id="@+id/tvRiferimenti"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:textSize="18dp" />

            <Button
                android:id="@+id/bCall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="@string/chiama" />
        </LinearLayout>
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:41:08.167

好像你忘了调用`setContentView(R.layout.your_layout);`你的**onCreate**方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:58:22.537

请尝试使用 onItemClikListener，而不是使用 OnClickListener。

您在 ListActivity 中，所以我认为（也许我错了）您想要的是使用选定的行进行调用。所以删除 bCall 及其 onClickListener 并尝试

```
getListView().setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:3492395504"));
            startActivity(callIntent);

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:28:03.577

您正在获得 NPE，因为您正在尝试这样做：

```
bCall = (Button) findViewById(R.id.bCall); 
```

当您尚未设置屏幕布局时。

该按钮位于列表行布局中，因此您需要在列表适配器中设置它的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T15:38:58.620

> 该按钮可能不是 ListView 的一部分，只是该 Activity 的主要布局。

如果我明白你在说什么，你有一个包含 ListView 和 Button 的主视图。如果该确认是正确的，那么您需要使用 Activity 而不是 ListActivity 或使用：

```
mActivity= this ;
Button button = new Button(this);
button.setText("push me");
button.setLayoutParams(new AbsListView.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
            Toast.makeText(mActivity, "push", Toast.LENGTH_SHORT).show();
        }
    });
getListView().addFooterView(button); 
```

一定要提前`addFooterView(View v)`打电话`setAdapter(ListAdapter adapter)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T15:56:38.240

如果我理解你的代码，你正在启动一个`AsyncTask`in `onCreate`，它设置了`listAdaper`它的`onPostExecute`方法。另外，在`onStart`您尝试获取 button 时`bCall`。

但是，如果`onStart`在后台任务完成之前执行，那么您还没有设置适配器，因此您的按钮将不存在并且您的调用`(Button) findViewById(R.id.bCall)` 将返回`null`

# salesforce - 想要显示标注的结果

> ID：10433643
> 
> 赞同：0
> 
> 时间：2012-05-03T14:37:35.793
> 
> 标签：salesforce, apex-code, visualforce

当用户“保存”联系人（例如）时，无论它是新的还是刚刚更新的，我都需要： 使用联系人字段值之一作为查找进行外部标注 显示标注的结果，以便用户可以制作一个选择 根据用户的选择更新联系人 显示更新的联系人 我找到了两个方法，但都达到了我需要解决的问题。

**基于触发器的方法**

在“后”触发器中，将查找字符串传递给回调。使用选择更新联系人

*问题*

*   如何将查找字符串或结果传递到 visualforce 页面以显示查找结果？
*   当用户做出选择并且更新已经完成时，我如何回到更新后的联系人？

**覆盖基本方法**

[我在这里](http://boards.developerforce.com/t5/Apex-Code-Development/redirecting-to-a-URL-through-triggers/td-p/148518)找到了一个讨论，似乎建议使用覆盖和重定向到询问“编辑”的人。我认为这也可以通过“保存”按钮来完成。

*问题*

*   这是一个可部署的解决方案，所以我认为必须在代码中设置覆盖（我正在使用 IDE）而不是通过设置（或者我错了吗？）。我不知道这是否可行或如何做

对不起，详细的问题。不想只问错误的问题（即假设我知道最好的方法）。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:30:45.513

对于基于触发器的方法，您无法更改内置的保存功能，但是（根据您的第二个解决方案）您可以覆盖“编辑”按钮并使用 Visualforce 重新创建“编辑”页面，这将使您可以完全控制“保存”按钮以及如何您处理标注和重定向。

Spring '10 的发行说明表明标准按钮覆盖现在可用于打包，因为它们可以通过元数据 API 创建。

# c# - 如何使用 LINQ 从 XDocument 将 XML 元素加载到类中（不使用后代）

> ID：10433647
> 
> 赞同：0
> 
> 时间：2012-05-03T14:37:41.113
> 
> 标签：c#, xml, linq, linq-to-xml

如何使用 LINQ 从 XDocument 将 XML 元素加载到 ac# 类中。我不想使用 XDocument.Descendants 因为设置不会重复并且在 XML 中只出现一次。

这可行，但我认为必须有另一种方式，我不必使用 IEnumerable 或使用 ToArray() 并使用第一个元素 [0]。有什么建议么？

**代码**

```
public class BackupItem  // class needed so LINQ reads XML into an editable DbGrid
{
  public bool Backup { get; set; }
  public bool IncludeSubDir { get; set; }
  public string BackupLabel { get; set; }
  public string BackupPath { get; set; }
}

public class BackupSettings  
{
  public bool IncludeDateStamp { get; set; }
  public bool DatePrefix { get; set; }
  public bool DateSuffix { get; set; }
  public string DateFormat { get; set; }
  public bool ZipCompress { get; set; }
  public bool ZipPrefix { get; set; }
  public bool ZipSuffix { get; set; }
  public string ZipText { get; set; }
  public bool BackupToSiblingFolder { get; set; }
  public string SiblingFolder { get; set; }
  public bool BackupToFolder { get; set; }
  public bool IncludeFullPath { get; set; }
  public string BackupFolder { get; set; }
}

  // use a LINQ query to load xml file into datagridview and make datagrid editable (create class with get/set)
  var q = from arg in GvXMLDoc.Descendants("BackupItem")
          select new BackupItem()
          {
            Backup = (bool)arg.Element("IncludeDirectory"),
            IncludeSubDir = (bool)arg.Element("IncludeSubDirectories"),
            BackupLabel = (string)arg.Element("BackupLabel"),
            BackupPath = (string)arg.Element("BackupPath")
          };
  dataGridView1.DataSource = q.ToList();

    // load global variable
    IEnumerable<BackupSettings> GvBackupSettings = from arg in GvXMLDoc.Element("Backup").Elements("Settings")
                                                   select new BackupSettings()
            {
              IncludeDateStamp = (bool)arg.Element("IncludeDateStamp"),
              DatePrefix = (bool)arg.Element("DatePrefix"),
              DateSuffix = (bool)arg.Element("DateSuffix"),
              DateFormat = (string)arg.Element("DateFormat"),
              ZipCompress = (bool)arg.Element("ZipCompress"),
              ZipPrefix = (bool)arg.Element("ZipPrefix"),
              ZipSuffix = (bool)arg.Element("ZipSuffix"),
              ZipText = (string)arg.Element("ZipText"),
              BackupToSiblingFolder = (bool)arg.Element("BackupToSiblingFolder"),
              SiblingFolder = (string)arg.Element("SiblingFolder"),
              BackupToFolder = (bool)arg.Element("BackupToFolder"),
              IncludeFullPath = (bool)arg.Element("IncludeFullPath"),
              BackupFolder = (string)arg.Element("BackupFolder")
            }; 
```

我可以访问这些值，但这似乎是一种非常“混乱的方式”。

```
var s = GvBackupSettings.ToArray()[0].DateSuffix;
var t = GvBackupSettings.ToArray()[0].DateFormat; 
```

**文件**

```
<?xml version='1.0'?>
<Backup>
  <Settings>
    <IncludeDateStamp>true</IncludeDateStamp>
    <DatePrefix>false</DatePrefix>
    <DateSuffix>true</DateSuffix>
    <DateFormat>yyyy-MM-dd h.m.s</DateFormat>
    <ZipCompress>false</ZipCompress>
    <ZipPrefix>false</ZipPrefix>
    <ZipSuffix>false</ZipSuffix>
    <ZipText></ZipText>
    <BackupToSiblingFolder>true</BackupToSiblingFolder>
    <SiblingFolder>backups</SiblingFolder>
    <BackupToFolder>false</BackupToFolder>
    <IncludeFullPath>true</IncludeFullPath>
    <BackupFolder>C:\\backup</BackupFolder>
  </Settings>
  <BackupItem>
    <IncludeDirectory>true</IncludeDirectory>
    <IncludeSubDirectories>true</IncludeSubDirectories>
    <BackupLabel>Backup1</BackupLabel>
    <BackupPath>C:\TestFiles\Xml\Samples</BackupPath>
  </BackupItem>
  <BackupItem>
    <IncludeDirectory>true</IncludeDirectory>
    <IncludeSubDirectories>false</IncludeSubDirectories>
    <BackupLabel>Backup2</BackupLabel>
    <BackupPath>C:\TestFiles\Xml\Samples</BackupPath>
  </BackupItem>
</Backup> 
```

**编辑 1** 我也在尝试反序列化 XML（感谢您的想法），所以我不必强制转换每个项目。这不起作用..我也不想运行 XSD 工具并拥有一个巨大的类文件......

```
 XmlRootAttribute rootAttribute = new XmlRootAttribute("Backup");
  XmlSerializer deserializer = new XmlSerializer((typeof(BackupSettings)), rootAttribute);
  GvBackupSettings = (BackupSettings)deserializer.Deserialize(XmlReader.Create(GvXMLFileName)); 
```

**编辑 2** 结束序列化和反序列化 xml，如下所示，使用标准 XSD.exe 工具生成 c# 类。特别是因为我必须读取和写入相同的 xml 文件。注意：确保首先验证/修改生成的 xsd 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:42:08.227

如果您只需要第一个元素，则不需要查询：

```
XElement settings = GvXMLDoc.Element("Backup").Element("Settings");

BackupSettings GvBackupSettings = new BackupSettings
{
    IncludeDateStamp = (bool)settings.Element("IncludeDateStamp"),
    DatePrefix = (bool)settings.Element("DatePrefix"),
    ...
};

var s = GvBackupSettings.DateSuffix;
var t = GvBackupSettings.DateFormat; 
```

# c++ - 向网站发送 http get 请求，忽略 C++ 的响应

> ID：10433649
> 
> 赞同：2
> 
> 时间：2012-05-03T14:37:49.850
> 
> 标签：c++, http, get

我需要使用 c++ 发送一个 http get 请求。我现在的代码是：

```
#include <iostream>
#include <fstream>
#include <cstdlib>
using namespace std;

int main ()
{
    ifstream llfile;
    llfile.open("C:/AdobeRenderServerLog.txt");

    if(!llfile.is_open()){
        exit(EXIT_FAILURE);
    }

    char word[50];
    llfile >> word;
    cout << word;
    llfile.close();
    return 0;
} 
```

该请求将发送到：

www.example.com/logger.php?data=word

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:53:05.140

可能最简单的是使用[libCurl](http://curl.haxx.se/libcurl/)。

使用“[简单界面](http://curl.haxx.se/libcurl/c/libcurl-easy.html)”，您只需调用 curl_easy_init()，然后调用 curl_easy_setopt() 来设置 url，然后调用 curl_easy_perform() 来获取。如果您想要响应（或进度等），请在 setopt() 中设置适当的属性。完成后，调用 curl_easy_cleanup()。任务完成！

文档很全面——它不仅仅是一个简单的获取 http 请求的库，而且几乎适用于所有网络协议。意识到文档因此看起来相当复杂，但事实并非如此。

直接进入[示例](http://curl.haxx.se/libcurl/c/example.html)代码可能是一个想法，简单的代码如下所示：

```
#include <stdio.h>
#include <curl/curl.h>

int main(void)
{
  CURL *curl;
  CURLcode res;

  curl = curl_easy_init();
  if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, "http://example.com");
    res = curl_easy_perform(curl);

    /* always cleanup */ 
    curl_easy_cleanup(curl);
  }
  return 0;
} 
```

但是您可能还想查看“[在内存中获取文件](http://curl.haxx.se/libcurl/c/getinmemory.html)”示例或“[替换 fopen](http://curl.haxx.se/libcurl/c/fopen.html) ”示例。

# android - android 2.1SDK - 调整位图大小

> ID：10433651
> 
> 赞同：1
> 
> 时间：2012-05-03T14:37:57.697
> 
> 标签：android, bitmap, image-resizing, bitmapfactory, forceclose

我使用以下代码下载位图并调整其大小：

```
private void downloadImage(String urlImg, ImageView v) {
    Bitmap bitmap = null, resized= null;
    try {
        URL urlImage = new URL("http://.../" + urlImg);
        HttpURLConnection connexion = (HttpURLConnection) urlImage
                .openConnection();
        InputStream inputStream = connexion.getInputStream();
        bitmap = BitmapFactory.decodeStream(inputStream);
        resized = Bitmap.createScaledBitmap(bitmap, 100, 100, false);
        v.setImageBitmap(resized);

        connexion.disconnect();
        inputStream.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

在我的 onCreate() 函数中，我在使用以前的函数的地方动态创建 ImageViews

```
 ImageView view = new ImageView(this);
   downloadImage(list.getOneAnnonce(i).getPhoto(), view);
   trMain.addView(view); 
```

如果我不尝试调整位图大小，则没有错误，但如果我尝试调整大小 -> 强制关闭

# algorithm - 如何确定字符相似度？

> ID：10433657
> 
> 赞同：5
> 
> 时间：2012-05-03T14:38:11.817
> 
> 标签：algorithm, pattern-matching, levenshtein-distance, similarity

我在 OCR 之后使用 Levenshtein 距离来查找类似的字符串。但是，对于某些字符串，编辑距离是相同的，尽管视觉外观明显不同。

例如，字符串`Co`将返回这些匹配项：

```
CY (1)
CZ (1)
Ca (1) 
```

考虑到，这`Co`是来自 OCR 引擎的结果，它`Ca`比那些更可能匹配。因此，在计算完 Levenshtein 距离之后，我想通过视觉相似度排序来优化查询结果。为了计算这种相似性，我想使用标准的无衬线字体，比如 Arial。

有没有我可以用于此目的的库，或者我如何自己实现它？或者，是否有任何比 Levenshtein 距离更准确的字符串相似性算法，我可以另外使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:21:39.563

如果您正在寻找一个允许您根据视觉相似性计算各种“替换成本”的表格，那么我一直在寻找这样的东西但收效甚微，所以我开始将它视为一个新的问题。我没有使用 OCR，但我正在寻找一种方法来限制在概率搜索中对**错误输入**字符的搜索参数。由于人类在视觉上混淆了字符，因此它们被错误输入，同样的原则应该适用于您。

我的方法是根据 8 位字段中的笔画成分对字母进行分类。这些位是，从左到右：

```
7: Left Vertical
6: Center Vertical
5: Right Vertical
4: Top Horizontal
3: Middle Horizontal
2: Bottom Horizontal
1: Top-left to bottom-right stroke
0: Bottom-left to top-right stroke 
```

对于小写字符，左侧的下降线记录在位 1 中，右侧的下降线记录在位 0 中，作为对角线。

通过该方案，我提出了以下值，这些值试图根据视觉相似性对字符进行排名。

```
m:               11110000: F0
g:               10111101: BD
S,B,G,a,e,s:     10111100: BC
R,p:             10111010: BA
q:               10111001: B9
P:               10111000: B8
Q:               10110110: B6
D,O,o:           10110100: B4
n:               10110000: B0
b,h,d:           10101100: AC
H:               10101000: A8
U,u:             10100100: A4
M,W,w:           10100011: A3
N:               10100010: A2
E:               10011100: 9C
F,f:             10011000: 98
C,c:             10010100: 94
r:               10010000: 90
L:               10000100: 84
K,k:             10000011: 83
T:               01010000: 50
t:               01001000: 48
J,j:             01000100: 44
Y:               01000011: 43
I,l,i:           01000000: 40
Z,z:             00010101: 15
A:               00001011: 0B
y:               00000101: 05
V,v,X,x:         00000011: 03 
```

就目前而言，这对于我的目的来说太原始​​了，需要更多的工作。但是，您也许可以使用它，或者根据您的目的对其进行调整。该方案相当简单。此排名适用于等宽字体。如果您使用的是 sans-serif 字体，那么您可能需要重新处理这些值。

该表是一个混合表，包括所有字符，小写和大写，但如果将其拆分为仅大写和仅小写，它可能会更有效，并且还允许应用特定的大小写惩罚。

请记住，这是早期的实验。如果您看到改进它的方法（例如通过更改位序列），请随时这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:42:36.450

因此，在您的距离函数中，替换不同字符对的成本不同。

也就是说，与其添加一个或两个不考虑所涉及字符的集合成本的替换 - 而是具有一个**替换成本函数**，该函数返回介于 0.0 和 2.0 之间的值，用于在某些上下文中替换某些字符的成本。

在记忆的每一步，只需调用这个成本函数：

```
cost[x][y] = min(
    cost[x-1][y] + 1, // insert
    cost[x][y-1] + 1, // delete,
    cost[x-1][y-1] + cost_to_replace(a[x],b[y]) // replace
); 
```

这是我的完整编辑距离实现，只需将 replace_cost 常量交换为 replace_cost 函数，如下所示：

[https://codereview.stackexchange.com/questions/10130/edit-distance-between-two-strings](https://codereview.stackexchange.com/questions/10130/edit-distance-between-two-strings)

在实现 cost_to_replace 函数方面，您需要一个字符矩阵，其成本基于字符的相似程度。可能会有这样的表格浮动，或者您可以通过将每对字符写入一对图像然后使用标准视觉技术比较图像的相似性来自己实现它。

或者，您可以使用有监督的方法来纠正几个 OCR 误读并注意表格中的出现，然后该表格将成为上述成本表。（即如果 OCR 弄错了，那么字符必须是相似的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T14:44:17.680

一般来说，我看到[Damerau-Levenshtein比](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)[Levenshtein](http://en.wikipedia.org/wiki/Levenshtein_distance)更常用，它基本上添加了换位操作。它应该占人类拼写错误的 80% 以上，所以你当然应该考虑这一点。

至于您的具体问题，您可以轻松地修改算法以在用非大写字母替换大写字母时增加成本，反之获得类似的东西：

```
dist(Co, CY) = 2
dist(Co, CZ) = 2
dist(Co, Ca) = 1 
```

# twitter - 带有投票的网站上的 Twitter 消息

> ID：10433669
> 
> 赞同：0
> 
> 时间：2012-05-03T14:38:49.307
> 
> 标签：twitter

我不确定它是如何完成的，因此我的问题如下：

我想在 Twitter 上向人们询问有关特定主题的建议。我可以告诉他们使用某个主题标签，并在我的网站上发布带有该主题标签的所有评论吗？

我只是选择一个标签还是需要以某种方式创建它？

我可以让我网站上的用户评价这些建议吗？在那种情况下，我是否需要以某种方式获取 Twitter 消息并在本地存储？

只是试图了解该过程以实施它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:03:59.390

不必创建标签 - 只需在推文中使用它。

为了获取带有特定主题标签的所有推文，请使用搜索 API：[https](https://dev.twitter.com/docs/api/1/get/search) ://dev.twitter.com/docs/api/1/get/search并搜索此主题标签。您应该保存所有相关的推文（推特搜索对旧推文不可靠）。

# php - MySQL/PHP 更新查询未执行

> ID：10433671
> 
> 赞同：0
> 
> 时间：2012-05-03T14:38:57.903
> 
> 标签：php, mysql, database

我测试了更新语句中的变量并检查了是否建立了数据库连接，但是查询没有运行，你能告诉我代码中的错误吗？

```
for($i=0; $i <= $numcourses; $i++){
    echo '<div class="new'.$i.'" id="new'.$i.'"><label>'.$course_names[$i].'</label>
    <input name="edit'.$i.'" type="submit" value="Edit" /><input name="delete'.$i.'" type="submit" value="Delete" /><br /></div>';
    $name="edit".$i;    
    if (isset($_POST[$name])){
        echo '<input name="text" type="text" value="'.$course_names[$i].'" /><input name="save'.$i.'" type="submit" value="Save"/>';
    }   
    $name2="save".$i;
    if (isset($_POST[$name2])){
        include "includes/open.php";
            $newname=($_POST['text']);
            $int=$i+1;
            $query = "UPDATE course SET cname = '".$newname."' WHERE cid = '".$int."'";
            mysql_query($query) or die(mysql_error());
            include "includes/close.php";
    }
} 
```

更新：Thanx Marc B，添加`or die(mysql_error());`显示我的代码中的错误，一切正常，我回到了正轨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:42:15.793

您的查询调用没有错误处理：

```
mysql_query($query) or die(mysql_error());
                   ^^^^^^^^^^^^^^^^^^^^^^ 
```

这会告诉您查询执行是否有任何问题。在元级别上，您对[SQL 注入攻击](http://bobby-tables.com)持开放态度，因此您最好先阅读相关内容并解决问题，然后再进一步处理您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:47:23.533

```
$query = "UPDATE course SET cname = '".$newname."' WHERE cid = '".$int."'"; 
```

cID 是整数吗？在更新语句中，在我看来像一个字符串，尝试回显每个查询并通过直接在您的数据库中执行它来检查有效性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:46:57.287

你在哪里连接到数据库？

用于连接到数据库，然后在使用..`mysql_connect(string hostname, string username, string password');`选择数据库后执行查询`mysql_select_db`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T14:49:35.037

首先你应该删除额外`;`的`$name="edit".$i;;`

那么，你如何发布这些值？我`<form>`在您的代码中看不到任何属性，因此无法发布。

此外，一切都在 for 循环中。`$newname=($_POST['text']);`永远不会被设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T14:51:26.160

也许不是这个：

```
if (isset($_POST[$name2])) 
```

试试这个：

```
if ($name2!="") 
```

# cuda - CUDA 的内存访问性能非常差

> ID：10433677
> 
> 赞同：0
> 
> 时间：2012-05-03T14:39:20.037
> 
> 标签：cuda

我对 CUDA 很陌生，正在尝试编写一个测试程序。我在 GeForce GT 520 卡上运行应用程序，性能非常差。

该应用程序用于处理一些图像，每一行都由一个单独的线程处理。以下是该应用程序的简化版本。请注意，在实际应用中，所有常量实际上都是变量，只要是调用者。

运行下面的代码时，需要**20多秒**才能完成执行。

但是与使用***malloc/free 不同***，当`l_SrcIntegral`被定义为本地数组（如注释行中所示）时，完成执行所需的时间**不到 1 秒。**

由于数组的实际大小是动态的（而不是 1700），所以这个本地数组不能在实际应用中使用。

任何关于如何提高这个相当简单的代码性能的建议都将不胜感激。

```
#include "cuda_runtime.h"
#include <stdio.h>

#define d_MaxParallelRows 320
#define d_MinTreatedRow   5
#define d_MaxTreatedRow   915
#define d_RowsResolution  1
#define k_ThreadsPerBlock 64

__global__ void myKernel(int Xi_FirstTreatedRow)
{
  int l_ThreadIndex = blockDim.x * blockIdx.x + threadIdx.x;
  if (l_ThreadIndex >= d_MaxParallelRows)
    return;
  int l_Row = Xi_FirstTreatedRow + (l_ThreadIndex * d_RowsResolution);
  if (l_Row <= d_MaxTreatedRow) {

    //float l_SrcIntegral[1700];
    float* l_SrcIntegral = (float*)malloc(1700 * sizeof(float));

    for (int x=185; x<1407; x++) {
      for (int i=0; i<1700; i++)
        l_SrcIntegral[i] = i;
    }

    free(l_SrcIntegral);
  }
}

int main()
{
  cudaError_t cudaStatus;

  cudaStatus = cudaSetDevice(0);

  int l_ThreadsPerBlock = k_ThreadsPerBlock;
  int l_BlocksPerGrid = (d_MaxParallelRows + l_ThreadsPerBlock - 1) / l_ThreadsPerBlock;

  int l_FirstRow = d_MinTreatedRow;
  while (l_FirstRow <= d_MaxTreatedRow) {
    printf("CUDA: FirstRow=%d\n", l_FirstRow);
    fflush(stdout);

    myKernel<<<l_BlocksPerGrid, l_ThreadsPerBlock>>>(l_FirstRow);

    cudaDeviceSynchronize();

    l_FirstRow += (d_MaxParallelRows * d_RowsResolution);
  }

  printf("CUDA: Done\n");

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:11:47.353

**1.**

正如@aland 所说，您甚至可能会遇到更差的性能，在每个内核调用中只计算一行。

您必须考虑处理整个输入，只是为了在理论上使用大规模并行处理的力量。

为什么只用 320 个线程启动多个内核来计算一行？如何使用尽可能多的块并让每个块的线程处理一行。

（每块 320 个线程不是一个好的选择，看看如何达到更好的占用率）

**2.**

如果您作为寄存器和共享内存的快速资源还不够，您必须使用 tile apporach，这是使用 GPGPU 编程的基础之一。

将输入数据分成大小相等的图块，并在线程中循环处理它们。

在这里，我发布了这种平铺方法的示例：

[CUDA中的并行化，为每一列分配线程](https://stackoverflow.com/questions/10340296/parallelization-in-cuda-assigning-threads-to-each-column/10343277#10343277)

请注意该瓷砖方法中的范围检查！

**给你的想法的例子：**

计算任意大小矩阵中列向量中所有元素的总和。

每个块处理一列，并且该块的线程将它们的元素存储在 tile 循环中的共享内存数组中。完成后，他们使用并行归约计算总和，以开始下一次迭代。
最后，每个块计算其向量的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:43:56.993

您仍然可以使用共享内存来使用动态数组大小。`<<<...>>>`只需在内核调用中传递第三个参数。那就是每个块的共享内存的大小。

到达那里后，只需将所有相关数据放入共享数组（您仍应尝试保持合并访问），为每个线程带来一个或多个（如果与保持合并访问相关）元素。在引入线程后同步线程（仅当您需要停止竞争条件时，以确保在完成任何计算之前整个数组都在共享内存中），您就可以开始了。

另外：您应该使用块和线程进行镶嵌，而不是循环。我知道这只是一个使用本地数组的示例，但是仍然可以通过块/线程进行细分，而不是嵌套 for 循环（这对性能非常不利！）我希望您仅使用 1 个块来运行示例代码和1个线程，否则它没有多大意义。

# ruby-on-rails - 为什么 Devise + Omniauth 回调没有击中正确的控制器？

> ID：10433681
> 
> 赞同：6
> 
> 时间：2012-05-03T14:39:42.987
> 
> 标签：ruby-on-rails, devise, omniauth

任何人都可以帮我解决这个问题吗？

我在 Rails 3.2 应用程序中使用 Devise + Omniauth。`user_omniauth_authorize_path(provider)`我想知道的是，使用 Devise 的方法在幕后发生了什么。

我已经通过 rake 路线和 gem 的来源进行了挖掘，但我看不到任何明显会导致我遇到的问题的东西。

我假设此方法只是调用提供者的登录 url（例如 Twitter），然后返回到 routes.rb 中定义的回调路径。

在我的 routes.rb 我有

```
devise_for :users, :controllers => { :omniauth_callbacks => 'users/omniauth_callbacks'}

devise_scope :user do
    get '/users/auth/:provider' => 'users/omniauth_callbacks#passthru'
end 
```

在 users/omniauth_callbacks_controller.rb 我有

```
def twitter
    render :text => "This works" 
end

def passthru
    render :text => "This doesn't work"
end 
```

在我看来`<%= link_to "Twitter", user_omniauth_authorize_path(:twitter) %>`。单击此链接会转到 Twitter，我可以在其中登录，但返回我的应用程序后，我收到错误消息“您已经登录”。

我无法弄清楚如何或为什么会生成此错误。我应该只看到“这行得通”或“这行不通”。

我还以完全相同的方式设置了 Facebook 提供程序，并且按预期工作。

如果我将 Devise 的omniauth 链接替换为`<a href="/users/auth/twitter">Twitter</a>`“This works”。

所以这解决了我的问题，但它并不理想，我想知道为什么。

任何人都可以解释一下吗？

**编辑**

耙路线看起来像这样：

```
user_omniauth_callback        /users/auth/:action/callback(.:format)                       users/omniauth_callbacks#(?-mix:twitter|facebook) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:10:39.357

好吧，它对我有用，所以这绝对是你的事。首先，您是否在控制台中比较了 GET 调用`/users/auth/twitter`并`/users/auth/twitter?callback`通过两种不同的方法获得？它们应该看起来完全一样（当然，除了令牌和验证者）。

现在，我不确定这是否相关，但是通过设计，您不使用直通路线，因此您可以删除该路线。相反，在您的回调控制器中，您应该实现一个名为 failure 的操作来处理错误的请求。[有关设计的实现，请参见此处](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/omniauth_callbacks_controller.rb)。

我在这里抓住了稻草，但你也应该在回调控制器的末尾有这个：

```
# This is necessary since Rails 3.0.4
# See https://github.com/intridea/omniauth/issues/185
# and http://www.arailsdemo.com/posts/44
protected
def handle_unverified_request
  true
end 
```

# xslt - 使用 XSL 文件中的链接

> ID：10433688
> 
> 赞同：1
> 
> 时间：2012-05-03T14:40:20.990
> 
> 标签：xslt, hyperlink

我对 XML 完全陌生，所以希望我的解释会有意义..

我正在使用带有 2 个 HTML 文本部分的 XSL 文件，从文件中设置的 2 个模板读取。

第一个文本和相关模板是一个表格，我在其中设置了一个链接。我希望链接指向第二个 HTML 文本/模板中的图片。

表中的链接设置为显示为链接、带下划线等。但是单击时它不会去任何地方。

第二部分可以自己正常工作，例如出现图片和文字。

但我想不通的是如何真正让链接工作。我尝试了很多东西，但到目前为止没有任何效果。而且我不确定我是否非常接近，也许只需要更改一行代码。或者我是否需要做一些非常不同的事情。此外，没有错误消息，一切都显示良好，只是链接本身不起作用。

```
 <xsl:template match="portion">
  <tr>
 <td valign="top"><xsl:value-of select="food-description"/></td>
 <td valign="top"><xsl:value-of select="food-number"/></td>
 <!--the following is the link text-->  
 <td valign="top"><a><xsl:attribute name="href">#<xsl:value-of select="portion-     photo/@file"/></xsl:attribute>
 <xsl:value-of select="portion-photo/@file"/></a><br/>
 </td>
 </tr>
 </xsl:template>

 <xsl:template match="portion-photo">
 <!--I know that this is the code that is not correct, however, believe it should      be something similar-->  
 <a><xsl:attribute name="portion-photo"><xsl:value-of select="./@file"/></xsl:attribute></a>  

 <p><xsl:value-of select="../food-description"/>
 <xsl:value-of select="./@file"/></p>

 <img>
   <xsl:attribute name="src"><xsl:value-of select="./@file"/></xsl:attribute>
   <xsl:attribute name="width"><xsl:value-of select="ceiling(./@w div v2)"/></xsl:attribute>
   <xsl:attribute name="height"><xsl:value-of select="ceiling(./@h div 2)"/></xsl:attribute>
  </img>
 </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:16:00.563

像下面这样的东西应该可以工作。只需将缺少的*名称*属性添加到锚元素：

```
<xsl:template match="portion">
  ...
  <a href="#{portion-photo/@file}">
    <xsl:value-of select="portion-photo/@file"/>
  </a>
  ...
</xsl:template>

<xsl:template match="portion-photo">
  <a name="{@file}">
    <xsl:value-of select="@file"/>
  </a>
</xsl:template> 
```

但是，您必须确保`@file`计算结果为有效的锚名称。如果所有*文件*属性的值都是唯一的，您还可以使用以下命令创建保存 ID `generate-id()`：

```
<xsl:template match="portion">
  ...
  <a href="#{generate-id(portion-photo)}">
    <xsl:value-of select="portion-photo/@file"/>
  </a>
  ...
</xsl:template>

<xsl:template match="portion-photo">
  <a name="{generate-id()}">
    <xsl:value-of select="@file"/>
  </a>
</xsl:template> 
```

# java - Java/SWT：发生错误，请参阅日志了解更多信息

> ID：10433691
> 
> 赞同：1
> 
> 时间：2012-05-03T14:40:31.833
> 
> 标签：java, swt

我们看到在某些情况下会弹出这个非常普遍的错误，但我们似乎无法追踪产生它的原因，我希望有人对从哪里开始有所了解。我们有多个客户端机器都运行相同版本的软件，使用 SWT 构建，并且都访问同一个服务器，但不是每个人都会收到此错误。我们的客户端或服务器日志中没有显示任何内容，我不知道此错误可能指的是哪个日志文件，因此我们在任何地方都没有发现错误，我们没有关于此的详细信息。因为它是一个弹出消息，让我认为它可能是一个 SWT 错误。我见过有人在使用 Eclipse 时提到过这个错误，但我没有发现有人在他们构建的应用程序中提到过这个错误。

我知道这很模糊，但我没有更多的事情要做。有谁知道从哪里开始寻找罪魁祸首？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:57:40.680

您正在构建 RCP 应用程序？在这种情况下，这个错误是关于**Eclipse 平台日志**。

`.metadata\.log`程序的*实例位置*中应该有一个文件。如果您不知道您的实例位置，您可以通过调用来查询它：

```
Platform.getInstanceLocation(); 
```

# php - 在基于 PHP 的联系表单中发出过滤词

> ID：10433692
> 
> 赞同：0
> 
> 时间：2012-05-03T14:40:33.313
> 
> 标签：php, html, function, filter, contact

我在过滤联系表单消息中的坏词时遇到问题。它会删除除单词首字母之外的所有消息。有什么帮助吗？

下面只是获取信息

```
<?php
$error = '';
if(!empty($_POST['username'])) $username = $_POST['username'];
if(!empty($_POST['email'])) $email = $_POST['email'];
if(!empty($_POST['subject'])) $subject = check($_POST['subject']);
if(!empty($_POST['message'])) $msg = filter($_POST['message']); 
```

这是我试图用来去除坏词并替换它们的功能

```
$bad_words = array(
'word1' => 'gosh',
'word2' => 'darn',);

 function filter($matches) {
 global $bad_words;
 $replace = $bad_words[$matches[0]];
 return !empty($replace) ? $replace : $matches[0];
 } 
```

检查下拉选项并且不允许通过电子邮件发送某些主题。

```
function check($str){
global $error;
if ($str == 'Mean Spirited Comment'){
  $error = 'You sent a Mean-Spirited Comment';
} else if ($str =='Political Comment'){
  $error = 'You sent a Political Comment';
}
 return $str;
} 
```

放置信息并发送

```
$to = 'email@email.com';
 if (!empty($subject) && !empty($msg) && !empty($email) && !empty($username)){
if ($error == ''){
  mail($to, $subject, $msg, 'From:' . $email);
} else {
  print $error;
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:58:43.133

您可以使用 str_replace 因为它可以使用数组。

例如：

```
$message = "Hello there my good friends! I am very happy to see you all today even though I feel like crap.";
$badWords = array("Crap", "Damnit", "Frack");
echo str_replace($badWords, "*", $message); 
```

结果会是：你好，我的好朋友们！我很高兴今天见到大家，尽管我感觉很*。

当 PHP 已经提供了大量有用的方法时，为什么要重新发明新方法？这应该足以从正在发送的消息中删除“坏词”。

# sql-server - 如何解析 SQL Server 2008 中的数据？

> ID：10433696
> 
> 赞同：0
> 
> 时间：2012-05-03T14:40:43.827
> 
> 标签：sql-server, sql-server-2008, tsql

我在 SQL Server 2008 的表中有一个名为 Username 的列名。用户名有以下数据

```
Username
corp\abc
corp\petern
corp\timw 
```

等等

我需要我的用户名

```
Username
abc
petern
timw 
```

如何解析 Username 中的数据以跳过 corp\ ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:59:11.770

您可以使用[**PARSENAME**](http://msdn.microsoft.com/en-us/library/ms188006.aspx)来拆分数据，但该函数使用点 ( `.`) 作为分隔符。因此，您必须首先将反斜杠 ( `\`) 替换为句点或点 ( `.`)。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/d9afd/11)

*脚本*：

```
CREATE TABLE users
( 
    username VARCHAR(30) NOT NULL
);

INSERT INTO users (username) VALUES
     ('corp\abc'),
     ('corp\corporate\'),
     ('corp\yescorp'),
     ('corp\def'),
     ('\corpabc\'),
     ('corpabc\');

SELECT  username
    ,   PARSENAME(REPLACE(username, '\', '.'), 1) AS usernameonly
FROM    users; 
```

*输出*：

```
USERNAME            USERNAMEONLY
-----------------   ------------
corp\abc            abc
corp\corporate\ 
corp\yescorp        yescorp
corp\def            def
\corpabc\   
corpabc\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:46:37.833

您可以使用以下表达式来提取用户名：

```
select substring (username, charindex ('\', username, 1) + 1, len(username)) 
```

如果用户名函数中没有反斜杠将返回整个用户名 - 如果您混合使用 sql server 和 Windows 身份验证，则实用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:48:26.153

```
Update dbo.Users
Set    Username = replace(Username, 'corp\\', ''); 
```

请事先检查引用，首先检查 select 的结果是否正常（通常，使用数据更新语句是一个很好的做法）：

```
select replace(Username, 'corp\\', '') from dbo.Users 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:50:48.573

您可以像这样获取用户名：

```
SELECT RIGHT('corp\username',LEN('corp\username')-PATINDEX('%\%','corp\username')) 
```

=>

```
SELECT RIGHT(username,LEN(username)-PATINDEX('%\%',username)) 
```

这项工作在文本上，nvarchar(n - max)

# iphone - 使用 UIProgressView 和 NSTimer 实现倒计时

> ID：10433697
> 
> 赞同：0
> 
> 时间：2012-05-03T14:40:48.540
> 
> 标签：iphone, objective-c, ios5, nstimer, uiprogressview

我正在尝试实现一个在 10 秒内连续完成的 UIProgressView。我正在使用 NSTimer 来尝试实现这一目标，但我很难弄清楚。我已经查阅了有关 UIProgressView 和 NSTimer 的文档，以及其他已发布的问题，如果可以，请帮助我。

我当前的实现根本不更新 UIProgress 视图。源代码摘录如下：

```
- (void)updateTimer:(NSTimer *)timer
{
    // sets timer
    [self setTimer:[NSTimer scheduledTimerWithTimeInterval:0.25f 
                                                  target:self 
                                                selector:@selector(updateTimer:) 
                                                userInfo:nil 
                                                repeats:YES]];
    float newProgress = [self.timeProgressView progress] + 0.025;
    [self.timeProgressView setProgress:newProgress animated:YES];
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:48:25.833

尝试这个

```
progressView.progress = 1;
    time = 1;
    timer = [NSTimer scheduledTimerWithTimeInterval: 0.1f
                                             target: self
                                           selector: @selector(updateTimer)
                                           userInfo: nil
                                            repeats: YES];

-(void) updateTimer
{
    if(time <= 0.0f)
    {
        //Invalidate timer when time reaches 0
        [timer invalidate];
    }
    else
    {
        time -= 0.01;
        progressView.progress = time;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:44:25.803

尝试设置

```
[self setTimer:[NSTimer scheduledTimerWithTimeInterval:0.25f 
                                                  target:self 
                                                selector:@selector(updateTimer:) 
                                                userInfo:nil 
                                                repeats:YES]]; 
```

updateTimer 之外的方法，除非它每 0.25 秒调用一次。

或者：

```
- (void)setupTimerWithTimer:(NSTimer *) timer{
[self setTimer:[NSTimer scheduledTimerWithTimeInterval:0.25f 
                                                      target:self 
                                                    selector:@selector(updateTimer) 
                                                    userInfo:nil 
                                                    repeats:YES]];
}

- (void)updateTimer{
   float newProgress = [self.timeProgressView progress] + 0.025;
   [self.timeProgressView setProgress:newProgress animated:YES];
} 
```

# jquery - 带有浏览器警告的jQuery表单提交

> ID：10433698
> 
> 赞同：0
> 
> 时间：2012-05-03T14:40:49.133
> 
> 标签：jquery, asp.net-mvc-3, post, form-submit

我正在使用 MVC 3 开发网站，当用户在主页选择列表中选择首选语言时，以下代码将处理该事件。它将读取选择列表的值并将其保存到 cookie。最后，我将提交表单以回发页面。

```
$(document).ready(function () {
    $('#lang').change(function () {

        var languageId = $('#lang').val();

        document.cookie = 'culture=' + languageId;

        $('#postback').submit();
    });
}); 
```

现在的问题是当我重新加载页面时浏览器不断警告我。

铬 说：

> 您正在查找的页面使用了您输入的信息。返回该页面可能会导致您重复执行的任何操作。你要继续吗？

火狐说：

> 要显示此页面，Firefox 必须发送将重复之前执行的任何操作（例如搜索或订单确认）的信息。

是什么原因？以及如何解决？

**编辑**

```
 public ViewResult Index()
    {
        int languageId = LocalizationHelper.TryGetCookiesLanguageId();

        LoginPageViewModel model = new LoginPageViewModel
        {
            LanguageId = languageId,
            Languages = Mapper.Map<IEnumerable<SvcLanguageList>, IEnumerable<Language>>(new[]{
             new SvcLanguageList{ LanguageId = 1, LanguageName="English" },
             new SvcLanguageList{ LanguageId = 2, LanguageName="简体中文" },// Simplified Chinese
             new SvcLanguageList{ LanguageId = 3, LanguageName="繁體中文" },// Traditional Chinese
            })
        };

        return View(model);
    } 
```

**编辑 2**

我已将我的 jquery 代码更改为以下内容：

```
 $(document).ready(function () {
    $('#lang').change(function () {

        $('img#loading').show(800);
        var culture = $('#lang').val();

        $.ajax({
            url: '@Url.Action("ChangeCulture", "Account")',
            type: 'POST',
            data: JSON.stringify({ culture: culture }),
            datatype: 'json',
            contentType: 'application/json;charset=ascii',
            success: function (data) {
                window.location = '/';
            }
        });
    });
}); 
```

这是我在控制器中的操作

```
 [HttpPost]
    public ActionResult ChangeCulture(string culture, string returnUrl)
    {
        Session["CultureInfo"] = new CultureInfo(culture);
        Response.Cookies["culture"].Value = culture;
        Response.Cookies["culture"].Expires = DateTime.UtcNow.AddYears(1);
        if (Request.IsAjaxRequest())
        {
            return new EmptyResult();
        }
        else
        {
            return Redirect(returnUrl);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:45:08.753

当您提交表单时，您会被重定向到一个新页面，该页面`POST`包含上一页的内容。如果没有编辑的表单内容，该页面将不存在`POST`。因此，试图返回该页面将需要重新`POST`加载到该页面的相同数据。

要解决这个问题，您需要克服`POST`对该页面的 ing，最有可能是使用 Ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:46:49.253

你的控制器功能在做什么？如果您只是返回，如果您想留在该页面上，`View`您可以返回。`RedirectToAction`

# mysql - 如果发现重复记录，则更新记录字段

> ID：10433703
> 
> 赞同：0
> 
> 时间：2012-05-03T14:41:05.917
> 
> 标签：mysql, duplicates

我有以下 Mysql 选择，它返回表中所有重复的电子邮件地址。

```
SELECT users.FirstName, `Surname`, users.email1
FROM users
INNER JOIN (  
    SELECT email1   
  FROM users
GROUP BY email1   
HAVING count(email1) > 1) dup ON users.email1 = dup.email1   
ORDER BY users.email1 
```

这很好用，我现在想做的是用“YES”更新一个名为 users.DupEmail 的字段，但我不确定如何做到这一点。我曾尝试放置一条更新行来替换选择，但显然我弄错了，因为我回到这里寻求帮助。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:46:10.703

您可以将多表`UPDATE`语法与自联接一起使用：

```
UPDATE users AS u1
  JOIN users AS u2 USING (email1)
   SET u1.DupEmail = 'YES'
 WHERE NOT u1.id = u2.id; -- use your primary key here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:53:27.317

以下脚本必须解决您的问题 - 安全并在应用更新之前使用 SELECT 测试结果：

```
-- SELECT FirstName, Surname, email1
-- FROM users

UPDATE users
SET DupEmail = 1
WHERE u0.email1 IN (
    SELECT u1.email1
    FROM users u1
    GROUP BY u1.email1
    HAVING COUNT(*) > 1
) 
```

# asp.net-mvc - 您对将 MVCExtensions 与 Autofac 结合使用有何看法

> ID：10433705
> 
> 赞同：0
> 
> 时间：2012-05-03T14:41:09.380
> 
> 标签：asp.net-mvc, asp.net-mvc-3, autofac, mvcextensions

我想知道你对使用 MVCExtensions 和 Autofac 的看法。

我在[我](https://github.com/MvcExtensions/Core/wiki/)的. 我只是不明白为什么要创建这些扩展？我真的不能说它让我的生活更轻松。我在 global.asax.cs 文件中使用 Autofac 所做的所有事情都可以使用 MVC 扩展进行。我可以只用 Autofac 注册路由、控制器、我的服务和存储库等。`Autofac``MVC 3 web app`

任何意见为什么使用这些 MVC 扩展可能是更好的方法？

我需要在`Application_Error`. 如何获取已注册记录器的实例？如果我需要在我的应用程序的其他地方解决依赖关系，我该怎么做？这就是我注册记录器的方式：

```
builder.RegisterType<Logger>().As<ILogger>(); 
```

我可以实例化我的记录器，但更愿意使用已注册的记录器。

这些扩展有标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:29:13.790

您应该能够通过 DependencyResolver 访问您的记录器：

```
var logger = DependencyResolver.Current.GetService<ILogger>(); 
```

# sql-server-2008 - 在sql server中用不同的信息在sql中分割一行

> ID：10433706
> 
> 赞同：0
> 
> 时间：2012-05-03T14:41:28.023
> 
> 标签：sql-server-2008

我的数据库中有一行包含许多不同信息的字符串。

例如，如果我的行是注释，并且每行包含以下内容： a|b|c 我如何将每行放入单独的列并命名每一列？我只是使用子字符串，但必须分开的信息有不同的起始位置

编辑：表格注释

列注释，每一行都包含类似“地址：123 main st | 名称：bob | 日期：2012 年 1 月 1 日”我需要将每个项目放在自己的列中并相应地标记。该| 实际上是在行中分解数据。

# ios - 根据两个属性对 NSArray 进行排序 - int 和 date

> ID：10433713
> 
> 赞同：0
> 
> 时间：2012-05-03T14:42:07.090
> 
> 标签：ios, sorting, nsarray

再次从 N00B 登陆。我已经阅读了很多关于排序数组的内容——想尝试使用 block 方法，但还没有完全理解它。相反，我选择了描述符方法。我[通过它们的 NSDate 属性阅读了自定义对象的排序 NSArray](https://stackoverflow.com/questions/6083408/sort-nsarray-of-custom-objects-by-their-nsdate-properties)以及[如何对包含自定义对象的 NSMutableArray 进行排序？](https://stackoverflow.com/questions/805547/how-to-sort-an-nsmutablearray-with-custom-objects-in-it)在 oodles 和 oodles 中。在我的代码中，我这样做了：

```
NSString *lastHighScore = @"_highScore";
NSString *dateScoreCreated = @"_dateCreated";
NSSortDescriptor *highScoreDescriptor = [[[NSSortDescriptor alloc]
    initWithKey:lastHighScore                                        
    ascending:NO                                          
    selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];

NSSortDescriptor *dateScoreCreatedDescriptor = [[[NSSortDescriptor alloc]
                                      initWithKey:dateScoreCreated
                                      ascending:NO
    selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];
NSArray *descriptors = [NSArray arrayWithObjects:highScoreDescriptor, 
dateScoreCreatedDescriptor, nil];

NSArray *sortedArray = [[[FlipHighScoreStore sharedStore] allHighScores] sortedArrayUsingDescriptors:descriptors]; 
```

可悲的是，我一开始就遇到错误 - 初始化元素不是编译时元素。我查看了这个并尝试了设置`NSSortDescriptor *highScoreDescriptor = nil`，但随后我收到一条警告，说 highScoreDescriptor“缺少类型说明符，默认为 int”，在这种情况下是可以的，但对于下一个描述符中的 Date 对象来说就不是那么好了。（结果我也收到一个错误，说我正在用不同的类型重新定义 highSoreDescriptor。）

此外，是否有可用选择器的列表？我怀疑这`localizedCaseInsensitiveCompare:`是我想要使用的，因为第一个属性“_highScore”是一个 int，第二个“_dateCreated”是一个日期。我在某处读到默认值是“比较”，所以我可以输入“比较：”吗？（找到一个答案，我想 - 我可以使用 (intValue) 作为第一个描述符：

```
selector:@selector(intValue)] autorelease]; 
```

更多的阅读让我认为我可以完全取消选择器行来进行日期排序。那是对的吗？

最后，如果我说`ascending:NO`这和降序一样吗？我猜是这样，但人们永远不会知道编程，不是吗？

我是否将所有这些代码包装在自己的方法中？或者我可以（直到稍后）将它插入我正在布置表格的代码中吗？

这个项目不是 ARC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:18:37.580

为了回答我自己的问题，在朋友的帮助下，我基本上做错了两件事。首先，我在一个方法之外编写代码——这就是为什么我得到所有关于初始化元素的错误。我想当我添加这个时我很累。

至于实际排序，我从描述符描述中删除了选择器选项，排序确实发生了！

最后，是的，`ascending:NO`等于降序。

最后一点，必须等到我准备好处理更多的应用程序重构。

# java - 是否可以不继承java中的一些私有内部类？

> ID：10433715
> 
> 赞同：0
> 
> 时间：2012-05-03T14:42:08.540
> 
> 标签：java, class, inheritance, methods, anonymous

我有 Class1 包含许多私有内部匿名类，例如：

```
ClassAInterface var1=new ClassAInterface {
 ..... 
```

当我从 Class1 继承 Class2 时，是否可以不继承所有这些类而是用新的替换？所以所有使用这些类变量的方法将只使用继承类中的对象。还是以另一种方式存在？所以我想继承方法，工作逻辑，但不喜欢继承数据结构。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:56:47.390

您应该使用嵌套类或也称为静态内部类：

```
public class Class1{

   // fields and methods for Class1

   protected static MyInnerClassA{

       //some fields methods here for MyInnerClassA
   } 
} 
```

因此，当您从 Class1 继承时，您可以创建 MyInnerClassA 的新实例，因为该实例是可访问的。简而言之，在这种情况下，静态关键字允许独立于其父类的内部类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:57:52.227

任何私有的东西都不能在子类中继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:57:47.077

如果您希望继承“方法、工作逻辑，而不是数据结构”，则需要使用`interface`更多和[组合](http://en.wikipedia.org/wiki/Object_composition)而不是继承。

# javascript - Google Closure Compiler 的 ADVANCED_OPTIMIZATIONS 选项

> ID：10433716
> 
> 赞同：2
> 
> 时间：2012-05-03T14:42:08.227
> 
> 标签：javascript, google-closure-compiler

我最近一直在查看 Google Closure Compiler。我下载了 .jar 文件并进行了试驾。到目前为止，我必须说我印象非常深刻。我当然可以看到它在最小化之外的用处。对 Google 团队的支持！

不过，我确实有一个小小的抱怨。在我看来，就优化而言，您只有两个选择。它是 SIMPLE_OPTIMIZATIONS 或 ADVANCED_OPTIMIZATIONS。前者虽然足够，但恕我直言非常简单。一方面，除非我遗漏了什么，否则所有属性名称都不会受到影响。它也不会删除无法访问的代码。另一方面，后一种选择简直太具有破坏性了。

现在，我对 JavaScript 还很陌生，所以我很可能遗漏了一些东西。如果我说一些愚蠢的话，请随时教育我。也就是说，我可以理解在 JavaScript 中重命名的问题。Google 团队建议使用方括号表示法 (object['property']) 而不是点表示法 (object.property) 来访问您不想更改的属性，并且不要混合使用这两种用法。他们还建议使用以下模式“导出”方法：

```
MyClass = function(name) {
  this.myName = name;
};

MyClass.prototype.myMethod = function() {
  alert(this.myName);
};

window['MyClass'] = MyClass; // <-- Constructor
MyClass.prototype['myMethod'] = MyClass.prototype.myMethod; 
```

但是，在某些情况下，您希望混合使用这两种表示法。假设我们正在构建一个游戏。游戏的代码完全隔离在一个闭包中。它不会将任何内容“导出”到全局范围，也不需要这样做。事实上，它真的不应该接触窗口对象。但是，它*确实*需要从 XML 配置文件中读取一些游戏内属性。

示例 JavaScript：

```
var TheGreatAdventure = (function(window) {

    function Fighter() {
        // Private to application
        this.id        = 42;
        // Accessible to XML configuration system
        this.name      = 'Generic Jen';
        this.hitPoints = 100;
        this.onAttack  = genericFighterAttack;
        this.onSpeak   = genericFighterSpeak;
        ...
    }
    Fighter.publishedProperties = ['name', 'hitPoints', 'onAttack', 'onSpeak']

    function genericFighterAttack() {...}
    function genericFighterSpeak() {...}

    function cassieAttack() {...}
    function cassieSpeak() {...}

    ...

    EntityReader = {
        ...
        function readFromXMLNode(attributes, entityClass, entityInstance) {
            for (var i = 0; i < attributes.length; i++) {
                var attribute = attributes[i];
                if (attribute.nodeName in entityClass.publishedProperties)
                    entityInstance[attribute.nodeName] = bindContext[attribute.value];
            }
        }
        ...
    }

}(window)); 
```

示例 XML 配置文件：

```
<Fighter name='Custom Cassie' onAttack='cassieAttack' onSpeak='cassieSpeak'/> 
```

不仅上述系统无法分配属性，cassieAttack 和 cassieSpeak 函数将在最小化期间​​作为死代码被消除！

现在，我无法在整个游戏代码中使用括号表示法访问所有“已发布”属性。即使这样做没有运行时惩罚（不应该有），仍然涉及很多额外的输入，并且（IMO）是一个令人眼花缭乱的东西。有了这样的通用属性，所有内容都会在文本编辑器中显示为字符串，违背了语法高亮的目的！

在我看来，对这些属性的简单@preserve（或类似的）指令将允许在最终程序大小中以最低成本使用 ADVANCED_OPTIMIZATIONS。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:02:51.127

编译器对此有支持，但它很笨拙，并且依赖于闭包库中名为“goog.reflect.object”的“原语”：

```
/** @nocollapse */
Fighter.publishedProperties = goog.object.transpose(goog.reflect.object(
    Fighter, {fullName:1, hitPoints:2})); 
```

这避免了使用引用的属性。如果这是你从闭包库中使用的唯一东西，那么除了“goog.object.transpose”函数之外的所有东西都将被编译出来（goog.object.transpose 并不特殊，所以你可以自由使用替代实现）。这是类型安全的，可以与编译器的基于类型的优化一起使用（请参阅此处的描述：[http](http://code.google.com/p/closure-compiler/wiki/ExperimentalTypeBasedPropertyRenaming) ://code.google.com/p/closure-compiler/wiki/ExperimentalTypeBasedPropertyRenaming ）。

关键是 goog.reflect.object 必须直接使用，将构造函数和对象字面量与您需要保留的属性的键一起使用。

您需要注意的另一件事是，在 ADVANCED 模式下，如果 Fighter.publishedProperties 在全局范围内定义，由于命名空间崩溃，它将从构造函数中删除。 `@nocollapse`防止这种情况。另一种方法是使用辅助方法来添加属性：

```
function addPublishedProperties(obj, value) {
  obj.publishedProperties = goog.object.transpose(value);
} 
```

好的，我在这里介绍了很多内容，所以请务必让我知道您是否需要澄清。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T14:46:51.420

这个答案被完全重写，原来有一种方法可以做 user1127813 想要的。

您需要提供一个属性映射文件，使用该`--property_map_input_file`标志将一些名称映射到它们自身。假设您有以下原始代码`test.js`：

```
/** @constructor */
function Fighter() {
    this.ID        = 42;
    this.fullName  = 'Generic Jen';
    this.hitPoints = 100;
}
Fighter.publishedProperties = ['fullName', 'hitPoints'];

var jen = new Fighter();
var bob = new Fighter();

bob.ID = 54;
bob.fullName = 'Bob the Destructor';
bob.hitPoints = 1337;

for(i = 0; i < Fighter.publishedProperties.length; i++) {
    prop = Fighter.publishedProperties[i];
    alert(prop + ' = ' + bob[prop]);
} 
```

像这样编译它：

```
java -jar closure-compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --js test.js --property_map_output_file testprop.txt --js_output_file test2.js 
```

您将获得一个新文件`test2.js`（内容无效）和另一个文件`testprop.txt`，其中包含：

```
ID:a
hitPoints:c
fullName:b 
```

改变`testprop.txt`它看起来像这样：

```
ID:ID
hitPoints:hitPoints
fullName:fullName 
```

然后使用`testprop.txt`作为输入而不是输出重新编译：

```
java -jar closure-compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --js test.js --property_map_input_file testprop.txt --js_output_file test2.js 
```

观察内容`test2.js`：

```
var a=["fullName","hitPoints"],b=new function(){};b.ID=54;b.fullName="Bob the Destructor";b.hitPoints=1337;for(i=0;i<a.length;i++)prop=a[i],alert(prop+" = "+b[prop]); 
```

现在使用点符号使用其原始名称访问所需的属性，并且程序将正确显示带有 bob 已发布属性的弹出窗口。

# mysql - mysql 针对另一列递增

> ID：10433717
> 
> 赞同：0
> 
> 时间：2012-05-03T14:42:08.723
> 
> 标签：mysql, phpmyadmin

这是我的产品表。

```
+---------+------------+------------+
| item_id | item_order | 项目名称 |
+---------+------------+------------+
| 10 | | 项目 x |
| 12 | | b项|
| 33 | | 项目 j |
| 39 | | 项目 k |
+---------+------------+------------+

```

我想在 phpMyAdmin 中运行一个 sql 查询，以便 item_order 随着 item_id 数量的减少而增加。我想按 item_order 在我的特色产品页面上排列产品。稍后我将重新排列“item_order”列中的数字以使某些产品更加突出，但现在这里是查询更新后表格的外观...

```
+---------+------------+------------+
| item_id | item_order | 项目名称 |
+---------+------------+------------+
| 10 | 4 | 项目 x |
| 12 | 3 | b项|
| 33 | 2 | 项目 j |
| 39 | 1 | 项目 k |
+---------+------------+------------+

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:10:33.597

这个怎么样？

```
SELECT *, (
  SELECT COUNT(1) FROM Products pd WHERE pd.item_id >= p.item_id
) item_order
FROM Products p 
```

# ios - UITableViewCell - 如何处理来自 Nibs 的动态大小的内容视图

> ID：10433721
> 
> 赞同：1
> 
> 时间：2012-05-03T14:42:21.143
> 
> 标签：ios, uikit, uitableview

当我想要一个自定义单元格时，我通常`UIView`会在单元格的内容视图中添加一个子类。对于我的子视图的布局，我使用笔尖。然后我将笔尖连接到我的`UIView`子类。我的问题是如何动态调整内容大小。说我的观点有很多`UILabels`内容。我`layoutSubviews`用来定位所有子视图 - 但只有在完成之前我才真正知道我的单元格的高度。所以目前`tableView:heightForRowAtIndexPath`我设置了我的子视图并调用`layoutIfNeeded`，所以一切都正确定位。现在我知道我的单元格的高度并在`tableView:heightForRowAtIndexPath`方法中返回它。但是现在什么时候`tableView:cellForRowAtIndexPath`被称为给我的单元格的高度为`44.0`. 当我将我的子视图添加到它时 - 我的子视图超出了其父视图的范围。然后，当稍后在 iOS 中将单元格调整到我说需要的高度时，我的内容会因为我的`autoresizingMask`. 只是想弄清楚这是否是其他人处理的问题，或者我是否完全错误地接近它。我们要求高度似乎是倒退，然后创建一个不是那个高度的单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:23:24.140

不幸的是，这就是 UITableViews 的工作方式：您需要在实际呈现 UITableViewCells 之前提供高度。是的，每个人都必须处理它。:)

您可以创建一个 NSArray，添加所有自定义 contentView，`frame`根据预期的 contentView 边界设置它们，然后将此数组用作`tableView:heightForRowAtIndexPath:`和中的数据源`tableView:cellForRowAtIndexPath:`。虽然这不是很有效，但它适用于小型数据集。

另外，这里有一个关于这个主题的很好的教程： [UITableViewCell Dynamic Height (by Matt Long)](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

关于 SO 的类似问题： [如何在 iPhone 上正确执行可变高度表格单元格？](https://stackoverflow.com/questions/1443335/how-can-i-do-variable-height-table-cells-on-the-iphone-properly)

# java - 使用另一个线程终止一个线程（循环）

> ID：10433725
> 
> 赞同：0
> 
> 时间：2012-05-03T14:42:44.750
> 
> 标签：java, multithreading, infinite-loop

我正在尝试找到一种方法来终止当前无限循环的线程。以我的经验，我尝试创建第二个线程，该线程将中断第一个无限循环的线程，但当然由于无限循环......第一个线程永远不会到达睡眠功能。所以现在我回到这个

```
public class Pulse{

private static int z = 0;

public static void main( String[] args ) throws Exception {
    try {
        final long stop=System.currentTimeMillis()+5L;
            //Creating the 2 threads
        for (int i=0; i<2; i++) {
            final String id=""+i+": ";
            new Thread(new Runnable() {
                public void run() {
                    System.err.println("Started thread "+id);
                    try{
                        while ( System.currentTimeMillis() < stop ) {
                                    //Purposely looping infinite
                            while(true){
                                z++;
                                System.out.println(z);
                            }
                        }
                    } catch (Exception e) {
                        System.err.println(e);
                    }
                }
            }).start();
        }
    } catch (Exception x) {
        x.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:45:36.633

有一个`volatile boolean`领域，说`running`。让它`true`。您在哪里将其`while (true)`更改为`while (running)`和。现在，从其他线程更改为。那应该很好地停止循环。`while ( System.currentTimeMillis() < stop ) {``while (running && ( System.currentTimeMillis() < stop) ) {` `running``false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:46:02.980

你能改变吗

```
 while(true){ 
```

至

```
while(!Thread.currentThread().isInterrupted()){ //or Thread.interrupted() 
```

现在，当您中断线程时，它应该正确地跳出无限循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:46:19.993

您必须在循环内进行 Thread.interrupted() 调用以检查其是否被中断并适当地处理它。或者 while(!Thread.interrupted()) 代替。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T14:49:48.267

你必须做这样的事情：

```
public class ThreadStopExample {
    public static volatile boolean terminate = false;

    public static void main(String[] args) {
        new Thread(new Runnable() {
            private int i;

            public void run() {
                while (!terminate) {
                    System.out.println(i++);
                }
                System.out.println("terminated");
            }
        }).start();
        // spend some time in another thread
        for (int i = 0; i < 10000; i++) {
            System.out.println("\t" + i);
        }
        // then terminate the thread above
        terminate = true;
    }
} 
```

# bash - Bash：删除存储在变量中的列表的第一个元素

> ID：10433727
> 
> 赞同：1
> 
> 时间：2012-05-03T14:42:50.770
> 
> 标签：bash, list, find

我`Dirlist=$(find $1 -type d)`用来获取作为`$1`参数给出的目录的子目录列表，但我需要从`Dirlist`列表的第一个元素（目录`$1`本身）中删除。有人可以告诉我我该怎么做，好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:48:32.700

您可以添加`-mindepth 1`选项：

```
find $1 -mindepth 1 -type d 
```

# c# - 枚举 int 列表

> ID：10433729
> 
> 赞同：2
> 
> 时间：2012-05-03T14:42:52.763
> 
> 标签：c#, asp.net

我真的对枚举列表一无所知，但经过一些研究，我发现这个列表可能有助于解决我的问题。所以我的设置中有一个名为 strGrades 的字符串，它是我手动更新的一系列字符串。范围为 0155-0160、0271-0388、0455-0503、0588-687。我基本上想要做的是找到不在这个成绩列表中的值（例如0161,0389、0504-0587 ...）

所以我想出了一个函数，可以让我在年级范围内获得每场比赛：

```
public static List<GradeRange> GetValidGrades()
{
    MatchCollection matches= Regex.Matches(Settings.Default.productRange,
                                           Settings.Default.srGradeRange);

    List<GradeRange> ranges= new List<GradeRange();

    if(matches.Count >0)
    {
        foreach (Match match in matches)
        {
            ranges.Add(new GradeRange() 23 {
                       Start= int.Parse(match.Groups["Start"].Value),
                       Stop= int.Parse(match.Groups["Stop"].Value)
            });    
         }

     }
     return ranges;
} 
```

这是年级范围类

```
public class GrandRange
{
    public int Start{get; set;)
    public int Stop {get; set; )
} 
```

所以上面的函数捕获了我的开始和结束值，任何人都可以帮我把它放到一个列表中，在那里我可以找到超出范围值的值，我只需要一个起点。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:47:40.217

您可以使用[创建 .Between 的自定义扩展方法](https://stackoverflow.com/questions/5023213/is-there-a-between-function-in-c)以及[Where](http://msdn.microsoft.com/en-us/library/bb534803.aspx)

```
var myFilteredList = list.Where(x=>!myValue.Between(x.Start, x.Stop, true)); 
```

这不是最有效的答案，但如果您需要不在特定范围内的所有数字的列表，那么您可以执行以下操作：

```
var missingNumbers = new List<int>();
var minStop = list.OrderBy(x=>x.Stop).Min().Stop;
var maxStart = list.OrderBy(x=>x.Start).Max().Start;
Enumerable.Range(minStop, maxStart).ToList()
    .ForEach(x=>
        {
            if(!x.Between(x.Start, x.Stop, true))
                missingNumbers.Add(x);
        }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:52:28.610

这应该让你开始

```
 var strings = "0155-0160, 0271-0388, 0455-0503, 0588-687";
        var splitStrings = strings.Split(char.Parse(","));
        var grads = new List<GrandRange>();
        foreach (var item in splitStrings) { 
            var splitAgain = item.Split(char.Parse("-"));
            var grand = new GrandRange
            {
                Start = int.Parse(splitAgain[0]),
                Stop = int.Parse(splitAgain[1])
            };
            grads.Add(grand);
        }

    } 
```

# windows-7 - 在 windows 7（32 位）上配置 jre 版本

> ID：10433730
> 
> 赞同：0
> 
> 时间：2012-05-03T14:42:57.803
> 
> 标签：windows-7, java, configure

我安装了 java jre7 和 jre6，但当前使用的版本是 jre7。如何告诉 Windows 使用 jre6 而不是 7？我已经看到了一些有关如何执行此操作的指南，但它们似乎与 winXP 有关，因为它们正在处理 JAVA_HOME 变量（在 win7 上不存在）。

我尝试将 jre6 的 bin 文件夹的路径添加到 PATH 环境变量中，但没有成功。你还有其他建议吗？

顺便说一句 - 我确实希望我的 eclipse 运行 jre7，所以我发现我需要在 eclipse.ini 文件中添加/更改行，我到底需要在那里做什么？

在此先感谢，盖伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:10:33.080

就像在其他 Windows 版本上一样（顺便说一下，在 linux 上也是如此），您必须设置 JAVA_HOME 环境变量。

如果此 var 尚不存在，则仅表示您必须创建它。

这是在 Win7 上设置环境变量的方法：http: [//www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/](http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/)

对于 Eclipse，进入首选项，选择`java/installed JREs`你想要的。但是对于大多数其他基于 java 的程序，JAVA_HOME 确实是重要的变量（与 PATH 一起）。

# objective-c - 在指定位置发布带有坐标的图像

> ID：10433742
> 
> 赞同：0
> 
> 时间：2012-05-03T14:44:00.990
> 
> 标签：objective-c, image, http, post, coordinates

我知道这个问题可能看起来是重复的，但我找不到任何对我有用的东西。

在我的应用程序中，我有一个转换为 NSData 的图像，它应该被发送到特定的 URL。

```
url = [NSURL URLWithString:@"http://someHost/internet/index.php"]; 
dataRequest = [ASIFormDataRequest requestWithURL:url];
NSData *imageData=UIImageJPEGRepresentation(imageToSend,1);

[dataRequest setData:imageData withFileName:@"myphoto.jpg" andContentType:@"image/jpeg" forKey:@"file"];[dataRequest startSynchronous];
NSError *error = [dataRequest error];
if (!error) {
    NSString *response = [dataRequest responseString];
   NSLog(@"ResponseCapture: %@",response);
}  else{
    NSLog(@"Error: %@",error);
} 
```

这是发送我的图像的作品。但是，我需要将其发送到特定的 URL，而不是上面提到的 URL，如下所示：

`URL – https://<HOST>/grid.dll?HOST<CN><P_FLAG><X><Y><W><H><IMG_ID><TOKEN>`

HOST——服务器主机。现在只需通过允许从应用程序输入其值来使其可配置。
CN——频道号。现在只需将其硬编码为 123422
P_FLAG – 如果图像是全屏图像，则为 0。1 如果图像是局部的。
X –x 图像相对于完整图像 (0,0) 的坐标。它应该是 4 位以 0 开头的数字。如果 P_FLAG 为 0 X 也应为 0000。
Y - 图像相对于完整图像 (0,0) 的 y 坐标。它应该是 4 位以 0 开头的数字。如果 P_FLAG 为 0，Y 也应为 0000。
W——图像宽度。它应该是 4 位以 0 开头的数字。
H——图像高度。它应该是 4 位以 0 开头的数字。
IMG_ID – 从 1 到 9999 的图像序列 id。达到最大值后，此 id 应重置为 0。如有必要，它应为 4 位数字前加 0。
TOKEN——会话令牌。现在只需通过允许从应用程序输入其值来使其可配置。
但是当我想用这个 URL 发送 POST 时，它会给出错误的 URL 错误。

问题是-如何使用此 URL 发送 POST 数据。请帮忙..

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:06:38.340

我不确定我是否正确，但是，

我的第一个问题是检查你的 url 是否构建成功。（我不知道你是否有机会测试它）

此外，也许[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)会帮助你找到你正在寻找的东西。

我希望这能帮到您..

# xcode - Mac OS X Lion 上缺少 llvm-gcc：无法安装 mysql-python

> ID：10433745
> 
> 赞同：4
> 
> 时间：2012-05-03T14:44:17.103
> 
> 标签：xcode, osx-lion, mysql-python, llvm-gcc

我最近从 10.6 升级到 Mac OS X 10.7。

我决定使用 Python 2.7。

但是当我尝试安装 MySQLdb 模块来运行 Django 时，它失败了：

```
$ sudo pip install MySQL-python
Downloading/unpacking MySQL-python
  […]
  Running setup.py install for MySQL-python
    building '_mysql' extension
    llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -pipe -Dversion_info=(1,2,3,'final',0) -D__version__=1.2.3 -I/usr/local/mysql/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o build/temp.macosx-10.7-intel-2.7/_mysql.o -Os -g -fno-common -fno-strict-aliasing -arch x86_64
    unable to execute llvm-gcc-4.2: No such file or directory
    error: command 'llvm-gcc-4.2' failed with exit status 1
    Complete output from command /usr/bin/python -c "import setuptools;__file__='~/Sites/gugsm/build/MySQL-python/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-AwMuqj-record/install-record.txt:
    running install

running build

[…]

building '_mysql' extension

creating build/temp.macosx-10.7-intel-2.7

llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -pipe -Dversion_info=(1,2,3,'final',0) -D__version__=1.2.3 -I/usr/local/mysql/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o build/temp.macosx-10.7-intel-2.7/_mysql.o -Os -g -fno-common -fno-strict-aliasing -arch x86_64

unable to execute llvm-gcc-4.2: No such file or directory

error: command 'llvm-gcc-4.2' failed with exit status 1

---------------------------------------- 
```

原因是我不再有`llvm-gcc`二进制`gcc`文件。

我尝试将 XCode 从 3.something 升级到 4.3.2，但没有帮助。它是一个简单的应用程序，它没有`/usr/bin`填充`llvm-gcc`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T15:02:38.437

在 Xcode 4.3 的`Preferences`菜单中，选择`Downloads`然后安装`Command Line Tools`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T03:36:53.427

制作符号链接对我有用：

```
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

# iphone - UINavigationController... PopToRootNavigationController 弹出顺序.. stange

> ID：10433750
> 
> 赞同：0
> 
> 时间：2012-05-03T14:44:28.803
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

今天，在寻找一个讨厌的错误之后，我追踪了视图控制器被弹出的顺序，以防调用 PopToRootNavigationController。我很震惊。

假设我们有 3 个视图控制器

一个根）

```
B

  C 
```

如果我们在控制器 C 上调用 PopToRoot。从堆栈中移除的第一个控制器是 B，只有在移除 B 之后，控制器 C 才会被移除。

我的预期正好相反。最后一个被推送的是第一个被弹出的。

有人可以解释为什么苹果会选择这种行为吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:57:45.413

如果我没记错的话，这就是交易：

```
popToRootViewControllerAnimated: 
```

弹出堆栈上除根视图控制器之外的所有视图控制器并更新显示。

但`popViewControllerAnimated:`

从导航堆栈中弹出顶视图控制器并更新显示。（在您的情况下，顶视图控制器将是 C 我猜）

希望这就是你要找的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:53:58.487

假设您在堆栈上有 100 个视图控制器并且您想要执行

```
popToRootViewControllerAnimated: 
```

所以一个一个地弹出每个视图控制器直到到达最后一个视图控制器是没有意义的..因为你期望它一个一个地释放每个对象，这需要时间..所以 ios 所做的是，它只是弹出到最后一个视图控制器并释放第二个视图控制器。因此，一旦 2nd 被释放，其所有后续子对象也会被释放，因此速度更快（我猜它适用于堆系统）。

当你弹出它喜欢的地方。

```
popToViewController:animated: 
```

弹出视图控制器，直到指定的视图控制器位于导航堆栈的顶部。

希望这可以清除一些空气..

# c# - 尝试在动态创建的类之间调用方法

> ID：10433753
> 
> 赞同：1
> 
> 时间：2012-05-03T14:44:53.640
> 
> 标签：c#

我一直在尝试弄清楚如何在不同的类中调用方法。这两个类都是在运行时动态创建的。我在这里看到的大多数问题都与继承有关，这与我所拥有的不同（我认为。）

我对 C# 还很陌生，并且正在尝试测试一些概念。

第一堂课是这样的：

```
public class Record
{
    CustomPanel _panel;

    public void recordFunc(){}
} 
```

内部创建的类是这样的：

```
public class CustomPanel : Panel
{
    List<Control> _myControls = new List<Control>;
    // _myControls[0] += new EventHandler(myFunc);

    public void myFunc(object sender, EventArgs e)
    {
        // parentClass.recordFunc();
    }
} 
```

我的目标是在运行时从数据库调用创建一个记录。此时，它会创建一个面板（来自我的 CustomPanel 类），该面板会被添加到 FlowLayoutControl。当面板的内部控件触发事件时，我需要让它更新父 Record 类的部分内容。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:56:28.747

仅仅因为一个实例包含`Record`一个. 你必须自己建立这样的关系。例如`CustomPanel``Record``CustomPanel`

```
public class Record
{
    CustomPanel _panel;
    public CustomPanel panel
    {
         get { return _panel; }
         set { _panel = value; _panel.parent = this; }
    }

    public void recordFunc(){}
}

public class CustomPanel : Panel
{
    public Record parent { get; set; }

    public void myFunc(object sender, EventArgs e)
    {
        parent.recordFunc();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:02:47.483

我不是 100% 确定您在问什么，但是当您在运行时不知道类类型时，您似乎想知道如何在类上调用函数，但它可能是一种或多种记录类型. 那是对的吗？

如果是这样，那么干净地实现上述目标的一种方法是在派生类型上实现接口并调用接口方法。例如，如果您有多个“记录”类并且在运行时不知道类型，请尝试以下操作：

```
public interface IRecord 
{
    void RecordFunc();
} 

public class ARecord : IRecord
{
    public void RecordFunc()
    {
        Console.WriteLine("ARecord.RecordFunc");
    }
}

public class AnotherRecord : IRecord
{
    public void RecordFunc()
    {
        Console.WriteLine("AnotherRecord.RecordFunc");
    }
}

public class CustomPanel : Panel
{    
    private IRecord _parentRecord;

    // Where parentRecord could be ARecord or AnotherRecord
    public class CustomPanel(IRecord parentRecord)
    {
        _parentRecord = parentRecord;
    }

    public void MyFunc(object sender, EventArgs e)
    {
        _parentRecord.RecordFunc();
    }
} 
```

如果这不是你要找的，请澄清。

# json - 如何告诉我的舞者应用程序序列化其缓存中的对象？

> ID：10433756
> 
> 赞同：1
> 
> 时间：2012-05-03T14:45:08.197
> 
> 标签：json, perl, memcached, dancer

我在我的 Dancer 应用程序中使用 CHI 接口连接 memcached（或 devel 中的文件），但是当我缓存对象时，序列化程序出现错误。我的舞者配置中有以下内容：

```
engines:
  JSON:
    allow_blessed: 1
    convert_blessed: 1 
```

我还需要什么？

```
Error message:
Error while loading bin/app.pl: encountered object 'C3M::CMF=HASH(0x3ef8aa8)', but neither allow_blessed nor convert_blessed settings are enabled at /usr/lib/perl5/site_perl/5.10/CHI/Serializer/JSON.pm line 19. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:49:29.857

CHI::Serializer::JSON 不使用与 Dancer::Serializer::JSON 相同的序列化器。Dancer::Serializer::JSON 在 config.yml 中使用 setting('engines')，但无法将配置选项发送到 CHI::Serializer::JSON。

*解决方法*：

```
use CHI::Serializer::JSON; 
my $JSON = JSON->new->utf8->canonical;
$JSON->allow_blessed(1);
$JSON->convert_blessed(1);
*CHI::Serializer::JSON::serialize   = sub { $JSON->encode( $_[1] ) };
*CHI::Serializer::JSON::deserialize = sub { $JSON->decode( $_[1] ) }; 
```

# internet-explorer-8 - '$.signalR.transports' 为空或不是 IE8 中的对象

> ID：10433757
> 
> 赞同：1
> 
> 时间：2012-05-03T14:45:09.157
> 
> 标签：internet-explorer-8

我在我的项目中使用 SignalR。它与 mozilla 和 google chrome 一起工作正常。当我加载页面时。加载期间错误消息显示在 IE 开发人员工具中。错误是 '$.signalR.transports' 为空或不是对象 connect?transport=foreverFrame&connectionId=f233ca33-962e-4b47-9ec4-f4398fda38d0&connectionData=%5B%5D&frameId=1，第 5 行字符 9。

同样在错误弹出窗口中，此消息显示网页错误详细信息

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；.NET4 .0C；.NET4.0E；InfoPath.2) 时间戳：2012 年 5 月 4 日星期五 06:06:17 UTC

消息：HTML 解析错误：在关闭子元素之前无法修改父容器元素 (KB927917) 行：0 字符：0 代码：0 URI： http: [//127.0.0.1 :81/AddItem/AddItem?CourseItemID=0&CourseID =9976&SystemObjectName=讨论&IsCourseHomePage=1](http://127.0.0.1:81/AddItem/AddItem?CourseItemID=0&CourseID=9976&SystemObjectName=Discussion&IsCourseHomePage=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:03:23.407

认为您可能需要 json2.js 文件。看这里？

[http://lostinthegc.blogspot.com/2011/09/signalr-doesn-work-in-ie-internet.html](http://lostinthegc.blogspot.com/2011/09/signalr-doesn-work-in-ie-internet.html)

# c# - vs c# - Outlook 中附件的问题

> ID：10433762
> 
> 赞同：0
> 
> 时间：2012-05-03T14:45:25.963
> 
> 标签：c#, visual-studio-2008

我在将文件附加到 Outlook 时遇到问题。

我有这段代码，我可以在其中附加一个文件，然后使用我的 Outlook 发送它（没有凭据，只需在 Windows 中使用我的个人资料凭据）

```
private void tsbOk_Click(object sender, EventArgs e)
{
  Outlook.Application oApp = new Outlook.Application();
  Outlook.MailItem email = (Outlook.MailItem)(oApp.CreateItem(Outlook.OlItemType.olMailItem));
  ((Outlook.MailItem)email).Importance = Outlook.OlImportance.olImportanceHigh;
  ((Outlook.MailItem)email).To = "myemail@maydomain.com";
  //((Outlook.MailItem)email).CC = "myemail@maydomain.com";  
  ((Outlook.MailItem)email).Subject = lblUser.Text + " - " + lblDepartment.Text;
  **((Outlook.MailItem)email).Attachments.Add(lblAdd.Text.ToString(), Outlook.OlAttachmentType.olByValue, Type.Missing, Type.Missing); **
  ((Outlook.MailItem)email).Body = lblFail.Text + "\n" + "\n" + lblDescription.Text + "\n" + "\n" + lblComment.Text;
  ((Outlook.MailItem)email).Send();
  {
    MessageBox.Show("Su solicitud ha sido enviada." + "\n" + "Gracias por contactar ServiceDesk BA.");
    Close();
  }
} 
```

我将此部分用于文件， lblAdd.text 是我获取文件路径的地方：

**((Outlook.MailItem)email).Attachments.Add(lblAdd.Text.ToString(), Outlook.OlAttachmentType.olByValue, Type.Missing, Type.Missing);**

问题是当此路径为空时，我无法在没有附件的情况下发送电子邮件，因为我更改了这部分代码。我怎样才能为此添加“例外”？？？

非常感谢您的帮助。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:55:24.900

所以你想知道文件是否存在？

利用 ：

```
// set up email

if(File.Exists(lblAdd.Text))
{
  // add attachment
  email.Attachments.Add(...);
}

// send 
```

# android - AlertDialog：如何删除视图上方和下方的黑色边框

> ID：10433764
> 
> 赞同：30
> 
> 时间：2012-05-03T14:45:36.240
> 
> 标签：android, android-layout, android-dialog

之前有人问过这个问题：[AlertDialog custom title has black border](https://stackoverflow.com/questions/10222241/alertdialog-custom-title-has-black-border)

但没有得到令人满意的回答 - 并且缺少一些信息。

* * *

我正在尝试在 Android 中创建一个没有标题且底部没有任何按钮的自定义对话框。

但是，生成的对话框在视图的顶部和底部有黑色的“边框”/“间距”/一些东西。

从[文档](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)：

> 使用基本 Dialog 类创建的对话框必须有标题。如果您不调用 setTitle()，则用于标题的空间仍然是空的，但仍然可见。如果您根本不想要标题，那么您应该使用 AlertDialog 类创建自定义对话框。但是，由于使用 AlertDialog.Builder 类最容易创建 AlertDialog，因此您无法访问上面使用的 setContentView(int) 方法。相反，您必须使用 setView(View)。此方法接受一个 View 对象，因此您需要从 XML 扩展布局的根 View 对象。

所以，这就是我所做的：

**欢迎.java**

```
public class Welcome  extends Activity
{
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.welcome);

        LayoutInflater inflater = (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.welcomedialog, (ViewGroup)findViewById(R.id.layout_root));

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setView(layout);
        builder.create().show();
    }
} 
```

**欢迎对话框.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:background="@drawable/texturebg"
              android:id="@+id/layout_root"
              android:orientation="vertical"
              android:padding="40px">
    ...
</LinearLayout> 
```

**注意：**我尝试使用`FrameLayout`作为根`ViewGroup`而不是`LinearLayout`按照我在某处找到的建议使用 - 但这没有帮助。

**结果**

![在此处输入图像描述](../Images/0d9d4b08a1fbb61c08628b902a5ba3ce.png) ![在此处输入图像描述](../Images/afc71a09c0db31eb3ced52a24b636b74.png)

* * *

## setBackgroundDrawable 建议

```
public class Welcome  extends Activity
{
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.welcome);

        LayoutInflater inflater = (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.welcomedialog, (ViewGroup)findViewById(R.id.layout_root));

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setView(layout);
        AlertDialog dialog = builder.create();

        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(0));

        dialog.show();
    }
} 
```

没有为我工作。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-11T18:38:16.780

如果您查看[AlertDialog 类源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/app/AlertDialog.java)，您会发现大多数方法都是简单的代理方法（外观）`private AlertController mAlert`。

查看[AlertController 类源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/com/android/internal/app/AlertController.java#AlertController)，您会看到 4 个有趣的成员变量：

```
private int mViewSpacingLeft;
private int mViewSpacingTop;
private int mViewSpacingRight;
private int mViewSpacingBottom;
private boolean mViewSpacingSpecified = false; 
```

设置`mViewSpacingSpecified`为`true`将删除对话框顶部和底部的边框。

这可以通过更改此行来正确完成：

```
dialog.setView(layout); 
```

到：

```
dialog.setView(layout, 0, 0, 0, 0); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T15:07:12.280

```
dialog.setInverseBackgroundForced(true); 
```

在您的代码中使用上述内容来删除警报对话框的边框。

请参阅此[链接](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setInverseBackgroundForced(boolean))以获取 InverseBackgroundForced。

**更新**试试这个代码::::

```
public class Welcome  extends Activity
{
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.welcome);

        AlertDialog.Builder builder = new AlertDialog.Builder(Welcome.this);
        LayoutInflater _inflater = LayoutInflater.from(Welcome.this);
        View view = _inflater.inflate(R.layout.welcomedialog,null);
        builder.setView(view);

        AlertDialog alert = builder.create();
        alert.show();
    }
} 
```

**注意::**也可以尝试从 welcomedialog.xml 中删除 android:padding="40px"。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-24T22:28:36.420

就我而言，该边框是由 AlertDialog 的父 Activity 的主题引起的。要完全摆脱边框，请给它一个不同的主题（在本例中为 Holo）：

```
AlertDialog.Builder builder = new AlertDialog.Builder(
                                new ContextThemeWrapper(this, android.R.style.Theme_Holo)
                              ); 
```

这为我修好了。希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-23T07:54:49.030

只是为了让史蒂夫的回答更清楚，这很容易做到。例如，在我的情况下，我在对话框中设置的视图是 WebView。

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    WebView webView = new WebView(getActivity());
    webView.loadUrl(" url to show ");

    OnClickListener clickListenerOk = new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            ...
        }
    };

    OnClickListener clickListenerCancel = new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            ...
        }
    };

    AlertDialog dialog = new AlertDialog.Builder(getActivity())

            .setPositiveButton("OK", clickListenerOk)

            .setNegativeButton("Cancel",clickListenerCancel)

            .create();

    dialog.setView(webView, 0, 0, 0, 0);

    return dialog;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T14:48:09.797

```
setBackgroundDrawable(new ColorDrawable(0)); 
```

在你的对话框中调用它。

# haskell - 作业：在 Haskell 中将中间表达式与 == 进行比较

> ID：10433768
> 
> 赞同：3
> 
> 时间：2012-05-03T14:45:46.200
> 
> 标签：haskell

我编写了下面的代码来测试列表是否是回文。令我惊讶的是，它没有编译错误“使用 == .... 导致 (Eq a) 没有实例”。我的假设是编译器不知道这一点`leftHalf`并且`rightHalf`是列表。

```
 isPalindrome :: [a] -> Bool
    isPalindrome [] = False
    isPalindrome xs = if (leftHalf == reverse rightHalf)
              then True
              else False
     where leftHalf = take center xs
           rightHalf = drop center xs
           center = if  even (length xs)
                       then (length xs) `div` 2
                   else ((length xs) - 1) `div` 2 
```

1）我如何告诉编译器`leftHalf`和`rightHalf`是列表？
2) 我将如何使用模式匹配或其他 haskell 语言功能来解决这个问题？

编辑：谢谢大家的意见。特别提到 Matt Fenwick 的文档链接和 Duri 的优雅提示。我将在下面写下最终解决方案以防万一

```
 isPalindrome' :: (Eq a) => [a] -> Bool
     isPalindrome' [] = False
     isPalindrome' xs = if p then True else False
                   where p = leftHalf == rightHalf
                         leftHalf = take c xs
                         rightHalf = take c (reverse xs)
                         c = div l 2
                         l = length xs 
```

`isPalindrome'`可以像黛米指出的那样改进

```
 isPalindrome'' :: (Eq a) => [a] -> Bool
      isPalindrome'' [] = False
      isPalindrome'' xs = if (reverse xs) == xs then True else False 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:52:47.210

为了测试两个列表是否相等，必须可以测试列表中的项目是否相等。因此，您的类型列表`[a]`必须确保它`a`是`Eq`.

另外，作为风格问题：

```
x = if c then True else False 
```

可以替换为

```
x = c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T14:54:00.383

查看`Eq`类型类：

```
ghci> :i (==)
class Eq a where
  (==) :: a -> a -> Bool
  ...
    -- Defined in GHC.Classes
infix 4 == 
```

您需要的[是](http://learnyouahaskell.com/types-and-typeclasses#typeclasses-101)对`isPalindrome`.

另外，这段代码

```
if (leftHalf == reverse rightHalf)
              then True
              else False 
```

不必要的长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:53:28.060

您应该将类​​型更改为：

```
isPalindrome :: Eq a => [a] -> Bool 
```

找到中心真的是无关紧要的，只需编写就足够了`xs == reverse xs`- 当您计算时，`length xs`您会遍历所有列表并且没有经济性。

# c# - 在 MVC 控制器中使用命令-查询分离原则

> ID：10433769
> 
> 赞同：6
> 
> 时间：2012-05-03T14:45:47.043
> 
> 标签：c#, asp.net-mvc, command-query-separation

我喜欢[命令查询分离](http://martinfowler.com/bliki/CommandQuerySeparation.html)的想法，但看不到如何在添加实体的 MVC 控制器操作中使用它，并且在添加后需要新实体的 ID。

例如，在下面的简化示例中，服务用于创建新项目：

```
public ActionResult Assign(AssignViewModel viewModel)
{
     var newItem = _AssignItemService.AssignItem(viewModel.ItemName, viewModel.ItemValue);

     return RedirectToAction("ListItem", new {id = newItem.Id);
} 
```

但是当我重定向到要显示新项目的操作时，我需要知道新创建的项目的 ID，以便可以从数据库中检索它。所以我必须要求服务返回新创建的项目（或至少，它的 ID）。

在纯 CQS 中，命令没有返回值，所以上面的模式是无效的。

感激地收到任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:53:52.570

我认为你被困在一个迂腐的观点上。

查询是您想向数据库询问一个问题，例如*“密西西比河以西有多少客户在 6 月份购买了红色商品？”* 那是一个查询。在插入期间返回 ID 本身并不是典型的查询。

与软件开发中的大多数其他事情一样，这种模式不是*绝对的。* 甚至 Fowler 都说他愿意在方便的时候打破它：

> 弹出堆栈是修改状态的修饰符的一个很好的例子。Meyer 正确地说您可以避免使用这种方法，但它是一个有用的成语。所以我更愿意尽可能地遵循这个原则，但我准备打破它以获得我的流行。

如果你真的想从数据库中检索最近添加的 ID，而不是插入它，你可以使用类似[Scope Identity](http://msdn.microsoft.com/en-us/library/aa259185%28v=sql.80%29.aspx)的东西。但我认为你增加了复杂性而没有额外的好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T15:02:44.053

您应该将`AssignItem`根据视图模型的值创建的“Item”（或任何您的实体名称）的实例传递给方法，然后该方法不必返回任何内容，而是只需更新实体的 Id 属性使其成为 Command 方法。

然后，您可以将 entity.Id 用于您想要的任何内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:07:20.147

这样做的方法是让调用者指定新实体的 ID（这很可能意味着使用 GUID 作为键）。

但是，根据我的经验，强加命令可能不会返回结果的（纯粹的）规则将导致问题收效甚微。

# xcode - AVURLAsset 获取视频大小

> ID：10433774
> 
> 赞同：29
> 
> 时间：2012-05-03T14:46:08.037
> 
> 标签：xcode, ios5, avurlasset

这很令人沮丧。我正在尝试获取 AVURLasset 的大小，但尽量避免，`naturalSize`因为 Xcode 告诉我，这在 iOS5 中已被弃用。

但是：替代品是什么？

我找不到任何关于如何在不使用«naturalsize»的情况下获得视频尺寸的线索......

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-12-18T22:36:00.640

Swift 3 中的分辨率：

```
func resolutionSizeForLocalVideo(url:NSURL) -> CGSize? {
    guard let track = AVAsset(URL: url).tracksWithMediaType(AVMediaTypeVideo).first else { return nil }
    let size = CGSizeApplyAffineTransform(track.naturalSize, track.preferredTransform)
    return CGSize(width: fabs(size.width), height: fabs(size.height))
} 
```

对于斯威夫特 4：

```
func resolutionSizeForLocalVideo(url:NSURL) -> CGSize? {
    guard let track = AVAsset(url: url as URL).tracks(withMediaType: AVMediaType.video).first else { return nil }
    let size = track.naturalSize.applying(track.preferredTransform)
    return CGSize(width: fabs(size.width), height: fabs(size.height))
} 
```

没有的解决方案不会`preferredTransform`为最新设备上的某些视频返回正确的值！

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-03T16:17:37.403

我刚刚在线查看了文档，并且该`naturalSize`方法已被 AVAsset 对象弃用。但是，应该始终有一个 AVAssetTrack 引用 AVAsset，并且 AVAssetTrack 有一个`naturalSize`您可以调用的方法。

> **自然尺寸**
> 
> 轨道引用的媒体数据的自然维度。（只读）
> 
> @property(nonatomic, readonly) CGSize naturalSize
> 
> **可用性**
> 
> 在 iOS 4.0 及更高版本中可用。在 AVAssetTrack.h 中声明

通过：[iOS 的 AVAssetTrack 参考](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAssetTrack_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-08-20T00:16:00.953

[官方文档中](https://developer.apple.com/library/ios/DOCUMENTATION/AVFoundation/Reference/AVAsset_Class/DeprecationAppendix/AppendixADeprecatedAPI.html)的弃用警告建议，“酌情使用资产视频轨道的`naturalSize`and `preferredTransform`（另请参阅[`tracksWithMediaType:`](https://developer.apple.com/library/ios/DOCUMENTATION/AVFoundation/Reference/AVAsset_Class/Reference/Reference.html#//apple_ref/occ/instm/AVAsset/tracksWithMediaType%3a)）。”

我改变了我的代码：

```
CGSize size = [movieAsset naturalSize]; 
```

至

```
CGSize size = [[[movieAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] naturalSize]; 
```

它现在不那么漂亮和不安全了，但是当他们放弃该方法时不会破坏。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-01-07T19:55:41.197

弃用警告说：

```
Use the naturalSize and preferredTransform, as appropriate, 
of the asset’s video tracks instead (see also tracksWithMediaType:). 
```

所以我们需要一个**AVAssetTrack**，我们想要它的**naturalSize**和**preferredTransform**。这可以通过以下方式访问：

```
AVAssetTrack *track = [[asset tracksWithMediaType:AVMediaTypeVideo] firstObject];
CGSize dimensions = CGSizeApplyAffineTransform(track.naturalSize, track.preferredTransform); 
```

**资产**显然是你的**AVAsset**。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-20T21:45:30.420

**这是Swift 4**`AVAsset`中一个相当简单的扩展，用于获取视频的大小（如果可用）：

 **```
extension AVAsset {
    var screenSize: CGSize? {
        if let track = tracks(withMediaType: .video).first {
            let size = __CGSizeApplyAffineTransform(track.naturalSize, track.preferredTransform)
            return CGSize(width: fabs(size.width), height: fabs(size.height))
        } 
        return nil
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-10T01:21:41.953

要导出 的维度`AVAsset`，您应该计算所有视觉轨迹矩形的并集（在应用它们相应的首选变换之后）：

```
CGRect unionRect = CGRectZero;
for (AVAssetTrack *track in [asset tracksWithMediaCharacteristic:AVMediaCharacteristicVisual]) {
    CGRect trackRect = CGRectApplyAffineTransform(CGRectMake(0.f,
                                                             0.f,
                                                             track.naturalSize.width,
                                                             track.naturalSize.height),
                                                  track.preferredTransform);
    unionRect = CGRectUnion(unionRect, trackRect);
}
CGSize naturalSize = unionRect.size; 
```

当您的资产包含具有非平凡`CGSizeApplyAffineTransform`仿射变换的轨道（例如，45 度旋转）或您的资产包含具有不同来源的轨道（例如，两个轨道并排播放而第二个轨道的原点增加了第一条轨道的宽度）。

请参阅：[https](https://opensource.apple.com/source/WebCore/WebCore-7536.30.2/platform/graphics/avfoundation/cf/MediaPlayerPrivateAVFoundationCF.cpp)`MediaPlayerPrivateAVFoundationCF::sizeChanged()` : //opensource.apple.com/source/WebCore/WebCore-7536.30.2/platform/graphics/avfoundation/cf/MediaPlayerPrivateAVFoundationCF.cpp

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-17T12:39:31.057

对于斯威夫特 5

```
 let assetSize =  asset.tracks(withMediaType: .video)[0].naturalSize 
```**

# android - android：相机变焦和opengl

> ID：10433775
> 
> 赞同：1
> 
> 时间：2012-05-03T14:46:09.847
> 
> 标签：android, opengl-es, zooming

我想将捏/缩放和平移添加到使用 opengl 编写的 2D 应用程序中。它由几个形状、图像等组成。我怎么能这样做？相机变焦可能吗？另一种选择也是缩放，但我认为这是不可能的，因为我在屏幕上有几个对象，而且真的很难做到这一点。

请给我一些例子或简单的教程。我已经找到了一些有关缩放的示例，但找不到任何用于相机移动的示例。

# qt4 - 在这里用 deleteLater() 删除 sender() 是否安全？

> ID：10433777
> 
> 赞同：0
> 
> 时间：2012-05-03T14:46:17.087
> 
> 标签：qt4

假设某个插槽被某个基于 QDialog 的类调用，

我在别处创建对话框，例如

```
 MyDialog *dlg = new MyDialog (this);
 connect (dlg , SIGNAL(valueSet(QString)) , SLOT(slotGetValue(QString)));
 dlg->exec (); 
```

在插槽中，我使用删除它的“最深”父类来删除对象，即 QObject：

```
 void slotGetValue (const QString & key)
 {
    // process the value we retrieved
    // now delete the dialog created
    sender()->deletLater ();
 } 
```

这是正确的做法吗？那安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:53:21.047

应该没有理由删除模态对话框。由于 QDialog::exec() 阻塞，对话框可以在返回后立即安全删除。

```
MyDialog *dlg = new MyDialog (this);
connect (dlg , SIGNAL(valueSet(QString)) , SLOT(slotGetValue(QString)));
dlg->exec ();
delete (dlg); 
```

由此，您可能猜到不需要使用 new 和 delete。你可以把它放在堆栈上，离开作用域时它会被销毁。像这样：

```
MyDialog dlg(this);
connect(&dlg, SIGNAL(valueSet(QString)) , SLOT(slotGetValue(QString)));
dlg.exec(); 
```

除非您在 MyDialog 构造函数中需要 this 指针，否则没有理由传递它。

# c# - Castle Windsor - 在应用程序之外设置 AOP

> ID：10433780
> 
> 赞同：1
> 
> 时间：2012-05-03T14:46:27.167
> 
> 标签：c#, castle-windsor, aop

我们目前使用 Castle Windsor 来管理 Web 应用程序中的依赖注入。DI 注册代码出现在应用程序本身中，因此每个应用程序在其 Global.asax`Application_Start()`方法中具有大致相同的代码。我们认为这是适当的，因为每个应用程序可能需要对某些相关接口进行不同的实现。

我现在正在研究 AOP，特别是围绕授权。我们希望为类库中特定类的方法添加属性，这些属性定义是否允许用户执行该方法。AOP 听起来很好地呼吁如何实现这一点。

唯一让我不舒服的是每个 Web 应用程序都必须为自己设置拦截器。如果其中一个 Web 应用程序错误地配置了 AOP 内容，我们最终可能会遇到授权代码没有执行的不可接受的情况。

类库是否可以通过某种方式配置自己的 AOP，或者配置 AOP 的责任可以从 Web 应用程序中移除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:08:34.980

将此 AOP 初始化代码放入[安装程序](http://stw.castleproject.org/Windsor.Installers.ashx)或[工具](http://stw.castleproject.org/Windsor.Facilities.ashx)中，将其放入所有 Web 应用程序共享的库中，然后让 Web 应用程序调用此安装程序，或者让 Web 应用程序扫描所有安装程序`container.Install(FromAssembly.InThisApplication());`

# ruby-on-rails - Refinery CMS：将自定义字段添加到自定义引擎索引页面

> ID：10433781
> 
> 赞同：0
> 
> 时间：2012-05-03T14:46:30.453
> 
> 标签：ruby-on-rails, refinerycms

我在炼油厂 cms 内生成了一个自定义引擎“钢琴”。在索引钢琴页面上，我想显示一个名为“pianos_introduction_text”的相关自定义字段的内容。

生成和显示此自定义字段的正确方法是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:51:31.277

然而，我们的偏好是在普通页面部分创建自定义页面部分，而不是使用文案引擎。

在页面管理部分下，您应该会看到已为钢琴添加了一个页面。如果您添加新的页面部件（甚至使用现有的页面部件），您可以从引擎的索引页面检索并呈现它，如下所示：

```
<%= raw @page.content_for(:new_page_part) %> 
```

# visual-studio-2010 - SSIS 脚本编辑器引发异常

> ID：10433791
> 
> 赞同：3
> 
> 时间：2012-05-03T14:46:48.720
> 
> 标签：visual-studio-2010, ssis, bids, vsta

我有 SQL Server 2012、SSIS、SSDT 和 Visual Studio 2010。我可以创建一个新的 SSIS 包并添加一个脚本任务，但如果我尝试打开该脚本任务的脚本编辑器，我会收到以下错误：

```
TITLE: Microsoft Visual Studio
------------------------------

Cannot show Visual Studio 2010 Tools for Applications editor.

------------------------------
ADDITIONAL INFORMATION:

Could not load file or assembly 'Microsoft.VisualStudio.Tools.Applications.Core, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified. (mscorlib)

------------------------------
BUTTONS:

OK
------------------------------ 
```

根据我自己对该错误的调查，我发现 Visual Studio Tools for Applications 似乎是 MS Office 2007 及更高版本的一部分。这似乎是一个奇怪的依赖，但我安装 MS Office 2010 只是为了笑。它没有改变任何东西。我还应该尝试什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T21:14:17.390

如果您尝试在 VS 2010 中调试脚本任务并且 Run64BitRuntime 设置为 true，您也会收到此错误。为了调试，将其设置为 false。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T21:59:13.973

我收到了这个错误，直到我以普通用户身份注销并以本地管理员用户身份登录之前，我都没有遇到任何纠正问题。一旦我以管理员身份登录，我就可以编辑包中的脚本。一旦我以普通用户身份重新登录，编辑脚本按钮也可以使用。

我认为它需要在第一次启动时注册程序集，并且不能与我的常规域用户一起注册。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T15:52:03.153

我在尝试打开脚本编辑器时也遇到了同样的错误，但原因不同。不知道它是怎么发生的，但我安装了 3 个 VSTA（不同版本）副本。一旦我删除了所有这些并重新安装了 SQL Server 2012，问题就解决了。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-30T13:19:18.063

对我来说，解决方案是：

*   收盘价（我在 2008r2 上）
*   重新打开
*   编辑脚本（它允许我在重新开始投标后编辑一次）
*   删除所有断点
*   进行微不足道的更改，例如添加空行
*   节省

这为我解决了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-04T06:59:20.823

**这对我有用，无需进行任何类型的卸载。**

我的环境：Microsoft Visual Studio 9.0 (2008)

解决方案：

1.  转到 cd "C:\program files (x86)\microsoft visual studio 9.0\common7\ide\"

2.  执行命令 vsta.exe /setup /hostid SSIS_ScriptTask。这将打开带有空白项目的 VSTA。让它打开然后关闭它。

3.  执行命令 vsta.exe /setup /hostid SSIS_ScriptComponent。这将打开带有空白项目的 VSTA。让它打开然后关闭它。

4.  打开包含脚本任务的解决方案/包。

5.  单击脚本任务中的编辑按钮，它现在应该打开。以防万一，我建议保持第 2 步和第 3 步的空白 vsta 打开，然后单击脚本任务中的编辑按钮。

花了将近两个小时，谢天谢地它对我有用。我没有管理员权限来执行所有讨厌的卸载和注册表编辑解决方案。

希望它可以帮助某人！

参考：http: [//blogs.msdn.com/b/jason_howell/archive/2010/08/18/vsta-setup-and-configuration-troubles-for-ssis-2008-and-r2-installations.aspx](http://blogs.msdn.com/b/jason_howell/archive/2010/08/18/vsta-setup-and-configuration-troubles-for-ssis-2008-and-r2-installations.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-11T09:12:40.263

**无法显示 Visual Studio 2010 Tools for Applications 编辑器。**

只需按照以下解决方案：

1.  转到 SQL Server 安装程序文件夹。
2.  在该文件夹“redist”中。
3.  在另一个文件夹“VSTA”下。
4.  在 VSTA 文件夹“X86”和“X64”下
5.  安装 VSTA_RT30。
6.  它工作正常。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-07T19:37:15.597

今天早上我发现了我的问题。当我卸载 SQL Server 2012（以及上个月升级时留下的 2008 的残余）时，我还卸载了实际上是 Visual Studio 2010 一部分的 3 个包。如果我没有这样做，可能会重新安装 SQL Server 2012诀窍，但我发现了新的错误。当我从 Visual Studio 2010 分发媒体重新安装这 3 个包时，一切都开始工作了。

有问题的 3 个软件包是：

*   Microsoft SQL Server 2008 R2 数据层应用程序项目
*   Microsoft SQL Server 2008 R2 数据层应用程序框架
*   Microsoft SQL Server 2008 R2 Transact-SQL 语言服务

# java - Play 2.0 与 Play 1.2.5-RC1 + CRUD + 其他模块

> ID：10433797
> 
> 赞同：0
> 
> 时间：2012-05-03T14:47:03.260
> 
> 标签：java, playframework, playframework-2.0, playframework-1.x

我一直在询问和调查新的 Play Framework 2.0。它似乎是用 Java 创建网站的好工具。我必须说它是高质量的框架。

但是，我注意到还没有 2.0 版本的模块。这是因为 2.0 太新了，而且根据其他 stackoverflow 用户的说法，这是因为 2.0 中的一个错误。

此外，其他用户建议 2.0 是一个更好的框架，并且差异不是很小的功能。

我的问题是...

你会放弃 CRUD 和其他很棒的模块来坚持 2.0 框架吗？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:38:56.293

选择 2.0，因为：

1.  Play framework 1.2.x 将在未来停止使用，因此如果您打算多次使用它，那么投入时间是没有意义的。
2.  2.0 刚刚发布，如果社区（意味着：我、你和其他人）发布它们，将会有更多的模块。
3.  2.0 不仅“更好”，而且“更适合未来”。1.x 中的一些众所周知的属性仍然缺失，在这里我们可以以与第 1 点相同的方式得出结论。2.
4.  最后 CRUD：这是个人喜好问题，我发现 1.2.x CRUD 对我来说使用起来不太舒服，尤其是当我需要对其进行较大部分的修改时。只是我更喜欢从头开始创建自定义控制器/视图来执行类似 CRUD 的任务。[2.0 中的方法类似，但使用Play 的表单](http://www.playframework.org/documentation/2.0/JavaForms)更舒适，您可以实现这两个目标：编辑对象的非常简单的视图 + 更大的灵活性。

# node.js - mac npm 安装 mysql-libmysqlclient 错误

> ID：10433799
> 
> 赞同：0
> 
> 时间：2012-05-03T14:47:07.757
> 
> 标签：node.js, npm

操作系统：Mac OS X Lion 10.7.3(64bit)
Xcode:4.3.2
命令行工具：已安装
gcc:4.2
g++:4.2
node:0.6.16
npm:1.1.20
mysql:5.5.21
我尝试安装 npm-modules mysql-libmysqlclient，我在CentOS 6.2上安装成功，但是操作系统有问题，这个说说它的[https://github.com/Sannis/node-mysql-libmysqlclient/issues/107#issuecomment-5485498](https://github.com/Sannis/node-mysql-libmysqlclient/issues/107#issuecomment-5485498)

```
localhost:nodejs yangzhaojie$ npm -d install mysql-libmysqlclient
npm info it worked if it ends with ok
npm info using npm@1.1.20
npm info using node@v0.6.16
npm http GET https://registry.npmjs.org/mysql-libmysqlclient
npm http 200 https://registry.npmjs.org/mysql-libmysqlclient
npm http GET https://registry.npmjs.org/mysql-libmysqlclient/-/mysql-libmysqlclient-1.3.2.tgz
npm http 200 https://registry.npmjs.org/mysql-libmysqlclient/-/mysql-libmysqlclient-1.3.2.tgz
npm info shasum 8ae08483d5e37fcb5a37e6e459c7eda073ff486b
npm info shasum /var/folders/bc/gxqr_gj55lg1x77dgcym3mmc0000gn/T/npm-1336054761009/1336054761009-0.6183159125503153/tmp.tgz
npm info shasum 2e0901d4c28613050078931d2930b7f98a9353d0
npm info shasum /Users/yangzhaojie/.npm/mysql-libmysqlclient/1.3.2/package.tgz
npm info into /Users/yangzhaojie/tech/nodejs mysql-libmysqlclient@1.3.2
npm info installOne mysql-libmysqlclient@1.3.2
npm info unbuild /Users/yangzhaojie/tech/nodejs/node_modules/mysql-libmysqlclient
npm info preinstall mysql-libmysqlclient@1.3.2
npm info build /Users/yangzhaojie/tech/nodejs/node_modules/mysql-libmysqlclient
npm info linkStuff mysql-libmysqlclient@1.3.2
npm info install mysql-libmysqlclient@1.3.2

> mysql-libmysqlclient@1.3.2 install /Users/yangzhaojie/tech/nodejs/node_modules/mysql-libmysqlclient
> node-gyp rebuild

info it worked if it ends with ok 
spawn python [ '/Users/yangzhaojie/.node-gyp/0.6.16/tools/gyp_addon',
  'binding.gyp',
  '-I/Users/yangzhaojie/tech/nodejs/node_modules/mysql-libmysqlclient/build/config.gypi',
  '-f',
  'make' ]
spawn make [ 'BUILDTYPE=Release', '-C', 'build' ]
  CXX(target) Release/obj.target/mysql_bindings/src/mysql_bindings.o
  CXX(target) Release/obj.target/mysql_bindings/src/mysql_bindings_connection.o
../src/mysql_bindings_connection.cc:1322:22: error: variable length array of non-POD element type 'Local<v8::Value>'
    Local<Value> argv[argc];
                     ^
../src/mysql_bindings_connection.cc:1627:22: error: variable length array of non-POD element type 'Local<v8::Value>'
    Local<Value> argv[argc];
                     ^
../src/mysql_bindings_connection.cc:1691:22: error: variable length array of non-POD element type 'Local<v8::Value>'
    Local<Value> argv[argc];
                     ^
3 errors generated.
make: *** [Release/obj.target/mysql_bindings/src/mysql_bindings_connection.o] Error 1
ERR! Error: `make` failed with exit code: 2
    at ChildProcess.onExit (/Users/yangzhaojie/app/node-0.6.16/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:209:23)
    at ChildProcess.emit (events.js:70:17)
    at maybeExit (child_process.js:362:16)
    at Process.onexit (child_process.js:398:5)
ERR! not ok
npm info mysql-libmysqlclient@1.3.2 Failed to exec install script
npm info unbuild /Users/yangzhaojie/tech/nodejs/node_modules/mysql-libmysqlclient
npm info preuninstall mysql-libmysqlclient@1.3.2
npm info uninstall mysql-libmysqlclient@1.3.2
npm info postuninstall mysql-libmysqlclient@1.3.2

npm ERR! mysql-libmysqlclient@1.3.2 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! 
npm ERR! Failed at the mysql-libmysqlclient@1.3.2 install script.
npm ERR! This is most likely a problem with the mysql-libmysqlclient package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls mysql-libmysqlclient
npm ERR! There is likely additional logging output above.
npm ERR! 
npm ERR! System Darwin 11.3.0
npm ERR! command "node" "/Users/yangzhaojie/app/node-0.6.16/bin/npm" "-d" "install" "mysql-libmysqlclient"
npm ERR! cwd /Users/yangzhaojie/tech/nodejs
npm ERR! node -v v0.6.16
npm ERR! npm -v 1.1.20
npm ERR! code ELIFECYCLE
npm ERR! message mysql-libmysqlclient@1.3.2 install: `node-gyp rebuild`
npm ERR! message `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! errno {}
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/yangzhaojie/tech/nodejs/npm-debug.log
npm not ok
localhost:nodejs yangzhaojie$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:07:42.050

你执行了

```
npm -d install mysql-libmysqlclient 
```

作为超级用户？

尝试

```
sudo npm -d install mysql-libmysqlclient 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:05:07.970

```
wangmingle@wangmingle01 //
$ npm -d install mysql
npm info it worked if it ends with ok
npm info using npm@1.0.106
npm info using node@v0.4.7
npm info addNamed [ 'mysql', '' ]
npm info fetch http:/registry.npmjs.org/mysql/-/mysql-0.9.6.tgz
npm info shasum 95a3a9f41f94353c6460664b5867997e88b625bc
npm info shasum /tmp/npm-1337774338269/1337774338269-0.257753849029541/tmp.tgz
npm info shasum 7f9fab740989daba691215768ada0d8c36dd477f
npm info shasum /home/wangmingle/.npm/mysql/0.9.6/package.tgz
npm info into / mysql@0.9.6
npm info installOne mysql@0.9.6
npm info unbuild /node_modules/mysql
npm info preinstall mysql@0.9.6
npm info addNamed [ 'hashish', '0.0.4' ]
npm info fetch http:/registry.npmjs.org/hashish/-/hashish-0.0.4.tgz
npm info shasum 6d60bc6ffaf711b6afd60e426d077988014e6554
npm info shasum /tmp/npm-1337774338269/1337774360833-0.05971289472654462/tmp.tgz
npm info shasum 08ecd695975ee21ddb4b6f3e76e288dec99b2617
npm info shasum /home/wangmingle/.npm/hashish/0.0.4/package.tgz
npm info into /node_modules/mysql hashish@0.0.4
npm info installOne hashish@0.0.4
npm info unbuild /node_modules/mysql/node_modules/hashish
npm info preinstall hashish@0.0.4
npm info addNamed [ 'traverse', '>=0.2.4' ]
npm info fetch http:/registry.npmjs.org/traverse/-/traverse-0.6.1.tgz
npm info shasum abba3297d8cd608796189e9bbcda6c7fc6b7a4f9
npm info shasum /tmp/npm-1337774338269/1337774387669-0.5074084696825594/tmp.tgz
npm info shasum 636da24fb8f438ec6b1ca39a6a4f07e130e9aea0
npm info shasum /home/wangmingle/.npm/traverse/0.6.1/package.tgz
npm info into /node_modules/mysql/node_modules/hashish traverse@0.6.1
npm info installOne traverse@0.6.1
npm info unbuild /node_modules/mysql/node_modules/hashish/node_modules/traverse
npm info preinstall traverse@0.6.1
npm info build /node_modules/mysql/node_modules/hashish/node_modules/traverse
npm info linkStuff traverse@0.6.1
npm info install traverse@0.6.1
npm info postinstall traverse@0.6.1
npm info build /node_modules/mysql/node_modules/hashish
npm info linkStuff hashish@0.0.4
npm info install hashish@0.0.4
npm info postinstall hashish@0.0.4
npm info build /node_modules/mysql
npm info linkStuff mysql@0.9.6
npm info install mysql@0.9.6
npm info postinstall mysql@0.9.6
mysql@0.9.6 /node_modules/mysql
└── hashish@0.0.4
npm info ok 
```

# silverlight - 如何在调试配置中禁用 XAML 条目？

> ID：10433800
> 
> 赞同：1
> 
> 时间：2012-05-03T14:47:11.967
> 
> 标签：silverlight, debugging, bing-maps

如何在 XAML 中使用类似“#if”指令的东西。我已经为我的 Bing 地图控件声明了一个凭据密钥，并且我想在我不在的时候关闭该密钥。密钥在资源字典中。如何在调试中禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:17:27.010

我还没有测试过这个，但我想知道这个或类似的东西是否会起作用。

无论地图的 DataContext 是什么（视图模型或其他），您都可以声明此公共属性。

```
public CredentialsProvider MyCredentialsProvider
{
#if DEBUG
    return null;
#else
    return new ApplicationIdCredentialsProvider(MyResources.MyCredentialsKey);
#endif
} 
```

（[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.clienttokencredentialsprovider.aspx)说我们应该使用[ApplicationIdCredentialsProvider](http://msdn.microsoft.com/en-us/library/ee682016.aspx)。）

然后你可以简单地绑定到这个属性，因为[CredentialsProvider](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.map.credentialsprovider.aspx)是一个[依赖属性](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.core.mapbase.credentialsproviderproperty.aspx)：

```
<m:Map CredentialsProvider="{Binding MyCredentialsProvider}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:21:48.647

我最近发布了一篇博客文章，[管理跨平台应用程序中 Xaml 元素的可见性](http://www.abtsoftware.co.uk/News/tabid/93/articleType/ArticleView/articleId/26/Managing_Visibility_of_Xaml_elements_in_Cross-Platform_WPF_Silverlight.aspx)，其中描述了如何根据构建是 Silverlight 还是 WPF 来显示或隐藏 Xaml。

这基本上使用了一个附加属性，当应用如下时会隐藏（或显示）一个元素：

```
local:FrameworkVisibilityManager.VisibleIn="Silverlight"

// OR 

local:FrameworkVisibilityManager.VisibleIn="Wpf" 
```

不幸的是，没有办法根据配置排除 Xaml，但您当然可以根据配置更改诸如可见性之类的属性。

使用上述方法，您可以创建一个名为 DebugCredentialsProvider 的附加属性，该属性仅在 Debug 中将凭据应用于 Bing Maps 控件。

# php - move_uploaded_file 无法正常工作

> ID：10433802
> 
> 赞同：0
> 
> 时间：2012-05-03T14:47:20.923
> 
> 标签：php

我四处搜寻，但找不到我的问题。我有一个简单的脚本，可以将文件上传到目标文件夹。

```
$target = "img/fotos-artikels/";
$target .= basename($_FILES["uploadBron"]["name"]); 
if(move_uploaded_file($_FILES["uploadBron"]["tmpname"], $target)) {
    echo "The file " . basename($_FILES["uploadBron"]["name"]) . " has been uploaded.";
} else {
    echo " Sorry there was a problem";
} 
```

这是形式：

```
<form enctype="multipart/form-data" action="" method="post">
    <label for="txtBronNaam">Naam:</label>
    <input type="text" name="txtBronNaam" id="txtBronNaam" value="" /><br />
    <label for="uploadBron">File:</label>
    <input type="file" name="uploadBron" id="uploadBron" value="" /><br />
    <input type="submit" name="" value="Voeg bron toe" />
</form> 
```

我是否必须在 apache 中启用某些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:50:06.707

`tmpname`应该`tmp_name`

# xcode - 如何再次添加已删除的框架

> ID：10433804
> 
> 赞同：12
> 
> 时间：2012-05-03T14:47:23.690
> 
> 标签：xcode, frameworks

我不小心删除了我的 Xcode 中的 AVFoundation 、 CoreFoundation 、 Foundation 和 UIKit.framework 、 CoreGraphics.frameworks 框架。有什么方法可以恢复它们.. 否则我将不得不再次重新安装 Xcode。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-03T20:52:23.000

如果您还没有清空垃圾箱，请关闭 Xcode 并在 Finder 中打开垃圾箱。找到您不小心删除的框架文件夹。在 Finder 中，使用路径打开另一个窗口`/System/Library/Frameworks`（如果要手动打开文件夹，则从 Macintosh HD 开始），然后将框架从垃圾箱拖放到框架文件夹中。重新打开 Xcode，您应该能够在目标设置中再次添加框架。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-09T12:42:05.657

如果你还没有清空你的垃圾，你会在那里找到你的框架。如果删除的框架是 iOS 框架，只需将它们从垃圾箱复制/移动回 XCode 框架目录，对于迄今为止的大多数安装（XCode 5 + iOS 7），该目录如下：

`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7.0.sdk/System/Library/Frameworks/`

对于 OS X 框架，*555nick*发布的路径可能是正确的（虽然还没有测试过）： `/System/Library/Frameworks`

`Shift+Cmd+G`顺便说一句：您可以通过打开查找器并使用快捷方式来快速打开此类路径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-09T10:11:19.927

如果您的 xCode 的位置不同，上述方法将不起作用。对于该 Open xCode，单击顶部项目蓝色图标。单击目标-> 构建阶段-> 将二进制文件与库链接

现在右键或控制单击任何现有框架并在 Finder 中显示。

这样您将获得所有现有框架的默认位置。现在转到该位置并再次添加已删除的框架。

重新启动 xcode 然后你会看到你删除的框架和以前一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-08T19:52:51.630

好的。因此，如果您从 finder 和垃圾箱中删除了框架，这是一个解决方案。如果您的 Mac 中安装了另一个版本的 xcode，请打开它。在您的任何项目中尝试添加您最近删除的任何框架。右键单击它并转到查找器窗口并复制它。

现在转到已删除框架的 xcode，在上面相同的过程中转到 fnder 窗口并粘贴刚刚复制的框架。我和你有同样的问题，它帮助了我。

# jquery - jQuery 1.7.1 on() 不工作而 live() 工作

> ID：10433805
> 
> 赞同：1
> 
> 时间：2012-05-03T14:47:23.917
> 
> 标签：jquery

我有一个简单的代码片段

```
$('.box_tile_image').live('click', function() {
console.log('click');   
}); 
```

问题是我想`on()`按`live()`已弃用的方式使用，但是如果我在上述情况下使用**on - 我没有得到“***点击*”，而如果我用**live替换****on** ，它就像轻而易举。

 **可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:48:33.080

主选择器应位于*WRAPPER ELEMENT*

```
$('#MyWrapperElement').on('click',".box_tile_image",function() {
console.log('click');   
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T14:49:41.200

相当于：

```
$(document).on('click', '.box_tile_image', function() {
    console.log('click');   
}); 
```

...事实上，如果您从 1.7 开始查看 jQuery 源代码，`live`就是这样。

现在，就是说，我强烈建议将点击挂在靠近目标元素的地方，而不是一直挂在`document`. 但是对于字面上的等价物，如果所讨论的元素确实没有其他共同的祖先，那就是你会做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:59:48.027

```
$(document).on('click', '.box_tile_image', function() {
    console.log('click');   
}); 
```

或者您可以使用[***委托（）***](http://api.jquery.com/delegate/)

```
$(document).delegate('.box_tile_image', 'click', function() {
    console.log('click');   
}); 
```

代替`document`你也可以使用`box_title_image`.

假设你有如下的 DOM：

```
<div id="container">
  <img class="box_tile_image" src="" alt="">
</div> 
```

然后你可以写：

```
$('#container').on('click', '.box_tile_image', function() {
    console.log('click');   
}); 
```

或者

```
$('#container').delegate('.box_tile_image', 'click', function() {
    console.log('click');   
}); 
```**

# spring - Spring3.1+Hibernate4.1.2+GlassFish3.1.2 : JTA : 没有事务正在进行

> ID：10433806
> 
> 赞同：3
> 
> 时间：2012-05-03T14:47:26.193
> 
> 标签：spring, hibernate, jpa, glassfish, jta

我正在使用 Spring3.1、Hibernate(JPA) 4.1.2、GlassFish 3.1.2。

我已经成功通过 JPA 和 JNDI 数据源访问 DB，但是当我尝试向 DB 插入数据时，遇到了以下问题。

```
[#|2012-05-02T21:19:55.714+0900|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=20;_ThreadName=Thread-2;|StandardWrapperValve[appServlet]: PWC1406: Servlet.service() for servlet appServlet threw exception
javax.persistence.TransactionRequiredException: no transaction is in progress
        at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:976)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
        at $Proxy227.flush(Unknown Source) 
```

我的源代码如下。

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
        version="2.0">
        <persistence-unit name="persistenceUnit" transaction-type="JTA">
                <provider>org.hibernate.ejb.HibernatePersistence</provider>
                <jta-data-source>jdbc/myDataSource</jta-data-source>
                <properties>
                        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
                        <property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.SunOneJtaPlatform" />
                        <property name="hibernate.transaction.factory_class" value="org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory" />
                </properties>
        </persistence-unit>
</persistence> 
```

弹簧配置

```
<context:annotation-config/>

<bean id="loadTimeWeaver" class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />

<jee:jndi-lookup id="dataSource" jndi-name="jdbc/myDataSource" />

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="loadTimeWeaver" ref="loadTimeWeaver" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"></bean>
    </property>
</bean>

<bean id="txManager" class="org.springframework.transaction.jta.JtaTransactionManager" />
<tx:annotation-driven transaction-manager="txManager"/>

<tx:advice id="txAdvice" transaction-manager="txManager">
    <tx:attributes>
        <tx:method name="*" />
    </tx:attributes>
</tx:advice>

<aop:config>
    <aop:pointcut id="fooServiceOperation" expression="execution(* x.y.z.*.*(..))" />
    <aop:advisor advice-ref="txAdvice" pointcut-ref="fooServiceOperation" />
</aop:config> 
```

道接口

```
package x.y.z;

import org.springframework.transaction.annotation.Transactional;

public interface MyTableDao {

    @Transactional
    public void persist(MyTable myTable);

} 
```

道实现

```
package x.y.z;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import org.springframework.stereotype.Repository;

@Repository
public class MyTableDaoImpl implements MyTableDao {

    @PersistenceContext
    private EntityManager em;

    public void persist(MyTable myTable) {
        em.persist(myTable);
        em.flush();
    }
} 
```

请教我什么是错的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:38:46.187

将@Transactional 注解放在具体的persist 方法而不是接口上。

# .net-3.5 - 在没有受信任的发布者证书的情况下使用 MSI 部署 Office 2007 加载项 - .NET 3.5

> ID：10433809
> 
> 赞同：3
> 
> 时间：2012-05-03T14:47:39.610
> 
> 标签：.net-3.5, vsto, ms-office, setup-project

使用 .NET 3.5 是否可以将 Office 加载项部署到为所有用户安装的程序文件目录中，并且用户不会收到不受信任的发布者警告？

[将 VSTO 加载项部署到所有用户](http://blogs.msdn.com/b/vsto/archive/2010/03/08/deploying-your-vsto-add-ins-to-all-users-saurabh-bhatia.aspx)说明如下：

> 如果您使用 Visual Studio 2010 开发解决方案并以 .NET 4 为目标，则使用受信任的发布者证书签名的替代方法是将加载项安装到计算机程序文件位置。此位置还需要管理权限才能写入，并且会受到 VSTO 的固有信任，因此即使解决方案未使用受信任的发布者证书进行签名，也不会出现信任提示。

如果我理解这正确安装到带有面向 .NET 4 的加载项的程序文件目录，则不需要使用受信任的发布者证书进行签名。

目前以 .NET 4 为目标不是一个选项。如果我向我的安装程序添加一个自定义操作，该操作授予对在我的部署目标目录中执行的代码的 FullTrust 权限，我是否仍然需要使用受信任的发布者证书签署我的清单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:24:58.303

如果使用 .NET 4 不是一个选项，那么我认为创建包含列表应该是您所追求的。你可能想看看这些文章：

[如何：](http://msdn.microsoft.com/en-us/library/bb398239.aspx)
[使用包含列表添加或删除信任 Office 解决方案的包含列表条目](http://msdn.microsoft.com/en-us/library/bb608607.aspx)

# xcode4 - 如何在 Xcode4 中打开 UITextField 的字体选择器？

> ID：10433811
> 
> 赞同：0
> 
> 时间：2012-05-03T14:47:41.170
> 
> 标签：xcode4, uitextfield

在 Xcode 3 中，您曾经简单地使用 Cmd T。

但是，在 Xcode 4 中，这会打开一个新选项卡。

在 Xcode 4 中打开 UITextField 的字体选择器的快捷方式（或菜单命令）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:07:15.907

打开字体选择器的快捷键是：control + command + shift + T

# javascript - 堆叠条和散点对齐

> ID：10433813
> 
> 赞同：2
> 
> 时间：2012-05-03T14:47:53.383
> 
> 标签：javascript, highcharts

我在这里有一张图表：http: [//jsfiddle.net/wergeld/bx82z/](http://jsfiddle.net/wergeld/bx82z/)

我需要的是堆叠条和散点根据数据 X 元素（在本例中为县名）相互排列。让酒吧堆叠起来很简单。但正如您在示例中看到的那样，散点显示在图表的中间 - 与其他点不在同一个 x 值上。我想我可以创建一个类别列表（使用县名），但可能存在我没有所有县的所有 3 个数据元素的情况 - 如何处理这种情况？我在类别轴上做得很好，它仍然在做同样的事情：http: [//jsfiddle.net/wergeld/YckwW/](http://jsfiddle.net/wergeld/YckwW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:47:44.330

您没有正确定义系列以实现您想要的。有关我认为您正在寻找的内容，请参阅[更新的 jsfiddle 。](http://jsfiddle.net/bx82z/5/)

如果您缺少某个国家/地区的一条数据，您始终可以使用**null**，这仅意味着该数据点没有可显示的内容。有关示例，请参阅[缺失数据样本](http://jsfiddle.net/bx82z/7/)。它区分大小写，因此请确保 null 全部为小写。

# apache-flex - 应用自定义项目渲染器后，如何恢复到火花列表中的默认项目渲染器？

> ID：10433814
> 
> 赞同：0
> 
> 时间：2012-05-03T14:47:56.600
> 
> 标签：apache-flex, itemrenderer

我有一个由动态生成的 ArrayCollection 填充的 flex spark 列表（并在可回收组件中使用）。如果数组集合少于 9 个项目，则应用复选框项目渲染器。如果 ArrayCollection 大于 8 项，我想恢复为默认 sparkList 项 Renderer。如何从火花列表中删除 itemRenderer？

```
if ((ac.length>0)&&(ac.length <=8))
{
    //implement a renderer in the control for check boxes - this works!
    this._s_g_ListBoxLong._list.itemRenderer = new ClassFactory(morris.renderers.Renderer_checkBoxes);
}
else if (ac.length >=9)
{
    //apply the default item renderer for a spark list or remove the itemRenderer pointer
    //?????  HOW DO I DO THIS?
}
else
{
    //do nothing
}
this._s_g_ListBoxLong._list.dataProvider = ac; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:52:43.133

尝试使用[`DefaultItemRenderer`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/skins/spark/DefaultItemRenderer.html).

> DefaultItemRenderer 类定义 List 控件的默认项呈现器。默认项目渲染器仅绘制与列表中每个项目关联的文本。

```
this._s_g_ListBoxLong._list.itemRenderer = new ClassFactory(DefaultItemRenderer); 
```

# magento - magento 自定义付款方式表单未显示

> ID：10433819
> 
> 赞同：2
> 
> 时间：2012-05-03T14:48:10.780
> 
> 标签：magento, magento-1.4, payment, checkout

我写了一个自定义支付模块。它似乎工作正常，但我无法在结帐过程中显示方法表单。我的意思是：我看到我的方法，我可以选择它，但看不到表格。我想显示一个带有几个选项的选择框，但没有呈现任何表单。

**app\code\local\Neurona\Sistarbanc\Block\Form\sistarbanc.php**

```
class Neurona_Sistarbanc_Block_Form_Sistarbanc extends Mage_Payment_Block_Form
{
  protected function _construct()
   {
    parent::_construct();
    $this->setTemplate('payment/form/sistarbanc.phtml');
   }
.... 
```

以及**app\design\frontend\base\default\template\payment\form\sistarbanc.phtml 中的表单**

任何帮助将不胜感激！！

**编辑**

![它适用于具有默认主题的全新 magento 安装](../Images/2d77955efd9ff9aeb81c5f9632fa4235.png) ![它在 onestepcheckout 中不起作用](../Images/ee2e13a2f3e263f4f5e32ccf9c2d3891.png)

**所以，它似乎在默认的 ckeckout 过程中工作，但不是在 onestepcheckout**

## **编辑 2**

我发现在 onestepheckout 中，这是呈现付款方式表单的方式：

```
<?php if ($html = $this->getPaymentMethodFormHtml($_method)): ?>
  <dd id="container_payment_method_<?php echo $_code; ?>" class="payment-method" <?php if(!$this->getSelectedMethodCode()==$_code || !($hide_nonfree_methods && $_code == 'free')): ?> style="display:none"<?php endif; ?>>
<?php echo $html; ?>
</dd> 
```

所以，对于我的方法`$this->getPaymentMethodFormHtml($_method)`是`FALSE`. 为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:34:23.943

您的模板文件名是`Sisterbanc.phtml`，但您的块将尝试加载`sisterbanc.phtml`（大写“s”与小写“s”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:55:01.080

也许您需要在 Model/Payment.php 中添加这一行。

`protected $_formBlockType = "sistarbanc/form/sistarbanc"`

我不知道为什么。我与其他支付模块代码进行了比较，得到了这个。

# java - 使用请求调度程序从 servlet 调用 jsp？

> ID：10433834
> 
> 赞同：0
> 
> 时间：2012-05-03T14:48:57.633
> 
> 标签：java, jsp, servlets

我正在尝试从 servlet 调用 jsp，如下所示。

```
request.getRequestDispatcher("/Hello.jsp").forward(request, response); 
```

我的是maven项目。jsp 位于以下位置。

```
SomeProject/src/main/webapp/Hello.jsp 
```

但我收到 HTTP ERROR: 404。我怎么能提到 jsp 路径？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:02:47.047

您应该首先检查您是否可以访问该路由中的 jsp，是否`http://host:port/context_root/Hello.jsp`在您的 Web 浏览器中工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:51:54.210

利用

```
request.getRequestDispatcher("Hello.jsp").forward(request, response); 
```

看看它是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T04:45:19.873

首先你必须定义 RequestDispatcher 方法，

像这样：

```
RequestDispatcher rd=request.getRequestDispatcher("filename.jsp");
rd.forward(request,response); 
```

确保您的 jsp 文件与 servlet 目录位于同一目录中。

# tfsbuild - 如何手动删除 TFS 构建服务？

> ID：10433836
> 
> 赞同：1
> 
> 时间：2012-05-03T14:49:11.310
> 
> 标签：tfsbuild

我有一个严重的混乱，我希望有人可以帮助我解决。我有一台 Windows 2008 服务器和一台已安装 TFS 构建服务的 Windows 2003 服务器。最初，我将 Windows 2008 机器 (VM) 配置为使用一个构建代理运行构建控制器。这似乎设置得很好，但是我决定重新配置它并删除了 Build Agent。当我在 Windows 2003 上重新安装构建服务时，它显示 1 个构建控制器和 0 个构建代理在 3 台机器上运行。

不幸的是，我遇到了无法让 BuildAgent 帐户登录的问题，所以现在我已经从 2003 和 2008 vm 中注销了构建服务。我已经从两个虚拟机中卸载了 TFS 构建服务并重新启动。现在，当我尝试在 Windows 2003 VM 上重新安装和重新配置 TFS 构建服务时，我收到一条错误消息，指出机器上已经有一个 buildservicehost 并且将被删除，但是在下一步中，向导在尝试删除 BuildServiceHost。有没有办法删除 TFS BuildService 和任何工件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:31:26.513

如果你查看你正在运行的服务，你能看到原始的构建服务吗？然后你可以在命令提示符下使用“sc delete”来摆脱它吗？另外，您是否尝试过在安装时更改为下一个免费端口？

tinternet 上有一堆（[链接）关于在一台主机上运行多个构建服务的帖子，您想要做的是撤消这种情况吗？](http://sorin.serbans.net/blog/index.php/2010/07/27/configure-build-in-tfs2010-and-multiple-build-agents-on-the-same-build-machine/ "束")

# actionscript-3 - flex 验证失效（组件生命周期）

> ID：10433837
> 
> 赞同：0
> 
> 时间：2012-05-03T14:49:18.237
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我仍然对 Flex 中组件的验证和无效感到困惑。谁能给我简单的比较一下验证可以做什么，哪些无效不能做，反之亦然。

我真的很感谢你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:52:00.017

尽管我确实同意这些评论，但这是有据可查的，我认为您只是错过了“无效”和“验证”方法之间的整体关系。基本上，每当您调用使某些内容无效时，无论是显示列表、大小还是属性，您所做的只是告诉它为其中一个设置一个布尔标志（任何时候您修改将修改的属性这三个中的任何一个都会在调用 set width 时调用适当的 invalidate 方法，例如 invalidateProperties）。当下一个进入帧/渲染发生时，它将检查标志，如果其中任何一个设置为无效，它会调用相应的验证方法（updateDisplayList、commitProperties、measure）。

要在 FB/Eclipse 中查看自己的代码，请按 Ctrl+Shift+T 并拉出 UIComponent，在打开 UIComponent.as 后按 Ctrl+O 并输入 validateNow 您可以看到方法主体是 1 行，并且有一个很好的 ASDoc 注释那里解释了它的作用。更好的是，您会看到它在 ILayoutManager 上调用 validateClient，弹出打开 LayoutManager（再次按 Ctrl+Shift+T）查看 validateClient，它基本上解释了我在这里所做的事情。

我认为这就是您的出发点，因为我也曾在那艘船上，不了解更新属性与影响其兄弟姐妹/父/子之间的关系，但由于可以修改属性，因此这确实是减少处理负载的关键在帧刷新之间多次，它不需要重新计算它周围的所有东西，直到它实际被重绘。

问题是有时您想修改一个属性并立即（即在下一行执行）能够看到它的副作用如何修改布局的其他部分，在这种情况下您可以在修改后调用 validateNow()属性强制它立即更新所有这些，即使它可能在重绘发生之前发生多次。这通常不是一个很好的做法，因为它通常意味着浪费了不希望的 CPU 时间，但有时它是最简单的选择。

# javascript - Event.observe 仅适用于文档而不适用于特定 ID？

> ID：10433840
> 
> 赞同：0
> 
> 时间：2012-05-03T14:49:24.247
> 
> 标签：javascript, prototypejs

我有一个页面，我正在学习原型 js 并与 Event.observe 一起玩。我的问题是，如果我单击文档上的任何位置，这将有效：

```
Event.observe(document, 'click', respondToClick);

function respondToClick() {
  alert("Test...");
} 
```

但我想为不同的 id 制作几个 Event.observe 函数，所以我这样做了：

```
Event.observe('foo', 'click', respondToClick);

function respondToClick() {
  alert("Test...");
} 
```

现在 foo 只是如下所示的一行：

```
<tr id="foo">
                <th>Row Title</th>

                <th>Open/Close</th>
            </tr> 
```

但是当我单击该行时，它不会触发警报框。我尝试了太多东西，现在正在寻求帮助。任何想法为什么特定元素不会生成警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:24:35.153

取决于执行顺序。

```
Event.observe('foo', 'click', respondToClick); 
```

只有在

```
<tr id="foo">... 
```

已经存在于 HTML DOM 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:53:33.757

你也可以试试这个

```
Event.observe($('foo'), 'click', respondToClick); 
```

或者

```
 $("foo").observe('click', respondToClick); 
```

参考：[http ://api.prototypejs.org/dom/Event/observe/](http://api.prototypejs.org/dom/Event/observe/)

看到它在行动

[http://plugins.amiwithyou.com/sof/event.htm](http://plugins.amiwithyou.com/sof/event.htm)

# jquery - 更改悬停时文本颜色的脚本适用于 Firefox，但不适用于其他浏览器

> ID：10433841
> 
> 赞同：0
> 
> 时间：2012-05-03T14:49:25.210
> 
> 标签：jquery, cross-browser, click, hover

我有以下脚本，它随机为 DIV 中的字母分配不同的颜色（来自数组），并在悬停时更改这些颜色。该脚本应该在鼠标离开 DIV 时（即没有悬停时）将颜色改回来。它在 Firefox 中这样做，但在其他浏览器（Safari、Chrome 和 IE）中没有。此外，点击功能在这些浏览器中也无法正常工作（同样在 Firefox 中）。

[您可以在此处](http://monthlymixup.com/test.html)查看正在运行的脚本。

我想知道是否有人可以帮助解决这个问题？

谢谢，

缺口

```
$(document).ready(function() {
  var test = $("#example p").text().split('');

    var normal = generateColors(test);
    var hover = generateColors(test);
    $("#example p").html(normal);

    $("#example").hover( 
      function(event) { $("#example p").html(hover) }, 
      function(event) { $("#example p").html(normal) });

    $("#example").click(function() { 
    location.href = "http://www.google.co.uk"; 
    });

});

function generateColors(characters) {
    var result = "";
    var i = 0;
    for(i=0; i < characters.length; i++) {
        result += "<span style='color:"+getColor()+"'>"+characters[i]+"</span>";
    }

   return result;
}        

function getColor() {
    var colList = ['#7EA404', '#14AFB0','#B05718', '#B0A914', '#B01617','#902BB0', '#B003A2', '#4A429C','#33821E', '#226795', '#D0B600','#886833'];

    var i = Math.floor((Math.random()*colList.length));
  return colList[i];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:23:46.630

The problem seems to be that it's not always picking up the mouseleave event when you're hovering over text. The simplest solution is to add padding to the div so that there is space between the text and the edge of the container. [Fiddle](http://jsfiddle.net/6aLmL/1/)

# android - achartengine 演示编译，但运行时错误

> ID：10433847
> 
> 赞同：12
> 
> 时间：2012-05-03T14:49:40.633
> 
> 标签：android, achartengine

我按照页面[http://www.achartengine.org/content/goodies.html上的演示说明进行操作](http://www.achartengine.org/content/goodies.html)

我成功导入了演示项目，但是每个图表`NoClassDefFoundError`在运行时都会抛出一个，类似于：

```
java.lang.NoClassDefFoundError:
org.achartengine.model.XYMultipleSeriesDataset 
```

**achartengine-1.0.0.jar**位于构建路径上，并在“引用的库”下报告。我想这是一个新手问题，但我决定报告它，因为我只是*“按原样”*导入演示项目 并尝试在我的手机上运行它。

我是否需要其他未在“好东西”页面上列出的步骤？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-04T08:45:40.887

[我在google groups](https://groups.google.com/forum/?hl=en&fromgroups#!topic/achartengine/TLHv3a08GdA)上找到了一个很好的答案，对其进行了测试，它似乎正在工作：

在这种情况下，我唯一遇到的就是**罐子的出口**……如果这有意义的话。

在 Eclipse 中：

1.  右键单击您的项目-转到构建路径-选择配置构建路径
2.  转到“订购和导出”选项卡
3.  选中“achartengine-1.0.0.jar”框，然后单击其名称
4.  将其向上移动，使其位于 Android 依赖项的正下方（有时，如果您有多个 Jars，这可能会有所不同）

单击确定，然后清理您的项目。（项目->清理...）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T05:40:19.667

提醒**先将“lib”目录改为“libs”**！

然后`achartengine-1.0.0.jar` 在“Configure build path”-“Order and Export”选项卡中勾选并移到Android Dependencies上！</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:03:32.003

`NoClassDefFoundError`您看到的错误 ( ) 是运行时错误。引用的库仅解决编译时错误而不是运行时错误。将这些 jar 添加到项目的 lib 文件夹中。这些罐子也应该在运行时可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:12:44.907

'Shine' 的答案是在 Eclipse 同意编译之前添加删除 from 的导入和`android.R`删除两个`PieChartBuilder`。`@Overrides``PieChartBuilder``XY_ChartBuilder`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-26T04:54:45.320

您只需将 jar 文件添加到 Libraries 文件夹即可。它应该可以正常工作。

# ms-access - 子窗体内的 MS Access 参数查询不会打印

> ID：10433851
> 
> 赞同：2
> 
> 时间：2012-05-03T14:49:57.777
> 
> 标签：ms-access, ms-access-2010

这是我所做的：

我创建了一个参数查询，其中一个条件是在 [开始日期] 和 [结束日期] 之间。然后，我将该参数查询与其他绑定字段一起放入并创建了一个子表单。到目前为止，没有任何问题，而且效果很好。

但是在打印或尝试将表单转换为 PDF 时我遇到了问题。例如，一旦我要求它打印，参数查询的弹出窗口就会再次弹出询问我日期，即使在我（再次）输入它们之后，它也会不断询问我多次并取消打印作业.

当我尝试打印屏幕上的内容时，如何防止查询基本上运行？如果我尝试创建 PDF，也会发生同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:35:12.373

在我看来，参数在 MS Access 中处理得不好。

我认为无论何时运行都必须在查询中输入值（除非它是一次性的实验性查询）是错误的。如果您可以传递参数，那么自动化这样的报告会容易得多。

通常，我在查询的 where 子句中创建一个不带参数的报告，然后传入您自己的 where 条件，该条件将添加到[Remou 的答案中](https://stackoverflow.com/a/398854/685)

您也可以在调用它之前更改报告中的查询，但这很老套。

- 编辑 -

我看到了混乱。我将您正在做的事情解释为报告（而不是表格）。

可能发生的情况是，当它尝试渲染/格式化打印作业时，它必须多次调用表单的记录源。这就是为什么它一直要求你提供这些数据的原因。

根据我对您的问题的理解，您的查询如下所示：

```
select foo 
from bar 
where 
    yaddah_date between [Start Date] and [End Date] 
```

然后，您将该查询用作您尝试稍后打印为 PDF 的表单的记录源。首先，您可能应该创建一个类似于表单的报告。然后打开带有过滤器的报告进行打印：

```
DoCmd.OpenReport "myReport", , , , _
                    "yaddah_date between " & txtStartDate & _
                        " and " & txtEndDate 
```

（最后一部分基本上是报告将应用于生成其数据的查询结果的 filter/where 子句）。

如果你必须打印表格，你可以做类似的事情

```
DoCmd.OpenForm "foo", acNormal, , _
                "yaddah_date between " & txtStartDate & _
                    " and " & txtEndDate 
```

或者您可以设置`filter`表单/子表单的属性。

# drupal - Drupal 7 preprocess_views 不工作

> ID：10433853
> 
> 赞同：6
> 
> 时间：2012-05-03T14:50:10.440
> 
> 标签：drupal, drupal-7, drupal-views, drupal-templates

我的 Drupal 7`template.php`文件中有以下代码：

```
 function mytheme_preprocess_views_view__videos__videos(&$vars) {
        drupal_add_css(drupal_get_path('theme', 'mytheme') . "/css/qwembed-jquery-1.0.css");
        drupal_add_js(drupal_get_path('theme', 'mytheme').'/js/jquery.swfobject.1-1-1.min.js', array('type' => 'file', 'scope' => 'footer'));
        drupal_add_js(drupal_get_path('theme', 'mytheme').'/js/qwembed-jquery-1.0.js', array('type' => 'file', 'scope' => 'footer'));
    } 
```

仅当显示此视图时，我才需要加载这些 css 和 js 文件。

视图显示名称为：`Videos` 视图机器名称为：`videos`

覆盖文件是：

```
views-view--videos--videos.tpl.php

views-view-unformatted--videos--videos.tpl.php

views-view-fields--videos--videos.tpl.php 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T10:26:25.493

问题很可能是您尝试基于与模板覆盖相同的命名模式来实现预处理功能。但是预处理函数有点不同，默认情况下，它们只能基于“base”模板的名称来实现，并且对于基于模板建议的“特定”版本没有相同的机制。有关详细信息，请参阅我[对更通用问题](https://stackoverflow.com/questions/2383865/how-do-i-use-theme-preprocessor-functions-for-my-own-templates/2387782#2387782)的回答。

因此，您需要回退到实现“基本”预处理函数，并检查它是否在该函数中被调用以获取所需的视图（以及可选的显示），大致如下：

```
function [yourThemeName]_preprocess_views_view(&$vars) {
  $view = $vars['view'];
  if ('videos' == $view->name) {
    // Add desired manipulations for all 'videos' views
    if ('videos' == $view->current_display) {
      // Add desired manipulations for the 'videos' display only
    }
  }
} 
```

您还*可以*通过实现一个通用预处理函数来添加您期望的行为，该函数尝试通过检查具有正确名称的函数来调用特定版本 - 请参阅本文末尾[的](http://evolvingweb.ca/story/theming-views-drupal-templates-and-preprocess-functions)示例 - 但这会引入相当多的处理开销并且只会使感觉，如果您需要许多视图的特定预处理功能。

您可以直接实现每种视图类型的更多“基本”预处理功能 - 请参阅`template_preprocess_views_view_*`“views/theme/theme.inc”中的列表以获取可用选项。

As a base rule, whenever there is a `template_preprocess_*` function for a template, you can implement a corresponding `yourThemeOrModuleName_preprocess_*` function as well. If you need to manipulate for templates based on template name suggestions, you need to find the 'base' preprocess function name, implement that and check for your specific case in that function (like for the specific view as in the example above).

# css - 将块元素放置在字段集的右下角

> ID：10433854
> 
> 赞同：4
> 
> 时间：2012-05-03T14:50:12.247
> 
> 标签：css, asp.net-mvc, razor, alignment

我在 MVC4 项目中有几个 Razor 页面，它们遵循可以在[此处](http://sylvandaletech.com/BottomRight.html)查看的一般布局。每个页面都会有一个`fieldset`，并且大多数都会有一个 Save 或 Next 或任何类型的按钮。我真正想要但不知道的是如何让 Save/Next/Whatever 按钮始终位于`fieldset`. 我尝试了其他[几个](https://stackoverflow.com/questions/1118513/how-do-i-align-a-div-at-the-bottom-right-corner-of-a-web-page-even-if-the-conten)[问题](https://stackoverflow.com/questions/585945/how-to-align-content-of-a-div-to-the-bottom-with-css)的解决方案，但遗憾的是似乎没有一个适用于这种情况。这甚至可能吗？

这是[样式表](http://sylvandaletech.com/BottomRight.css)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T14:54:06.877

将字段集放入并使用and`position:relative`放入按钮，这应该适用于一个按钮，放置其他按钮，做同样的事情，但将正确的值更改为其他按钮的组合宽度。`Position:Aboslute``bottom:0``right:0`

例子：

```
.lower-right-button{
    position:absolute;
    bottom: 0;
    right: 0;
}
<fieldset style="position: relative">
<input type="submit" value="Save" class="lower-right-button">
<input type="submit" value="New" class="lower-right-button" style="right: 110 px">
</fieldset> 
```

编辑：底部和右侧属性将元素的底部和右侧边缘与其容器的底部和右侧边缘对齐。在这种情况下，`bottom: 0`并将`right: 0`其放置在距右下角 0 像素处，您可能需要放置其他内容，例如`bottom: 5px` `right:5px`

再次编辑：已修复，初始命题不起作用，这是一个[JSFiddle](http://jsfiddle.net/rqHjz/2/)

再次编辑：使用 Romias 提议，将按钮放在 div 中并将 div 放置在右下角，这是更新后的[JSFiddle](http://jsfiddle.net/rqHjz/3/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T15:17:56.053

**先相对，后绝对。**

这真的很简单。第一步是**将父容器的位置属性设置为*相对***，如下所示：

```
<fieldset style="position: relative;">
    ...
</fieldset> 
```

这将为您的下一个要定位的元素**设置边界，只是这一次使用***绝对*定位。

```
<div style="position: absolute; bottom: 0; right: 0;">
    <input type="submit" value="Save" />
</div> 
```

将两者放在一起：

```
<fieldset style="position: relative;">

    ...

    <div style="position: absolute; bottom: 0; right: 0;">
        <input type="submit" value="Save" />
    </div>
</fieldset> 
```

在此之后，您可以为这个*div*标签添加一些边距（或从右下角拉开一点）以添加一些填充，添加一些样式等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:57:41.260

对按钮使用以下 CSS（请调整边距）

```
position: relative;
margin-top: 45%;
margin-left: 90%; 
```

# ajax - grails中的jquery-ui自动完成

> ID：10433858
> 
> 赞同：3
> 
> 时间：2012-05-03T14:50:24.043
> 
> 标签：ajax, jquery-ui, grails, grails-plugin

谁能给我使用 jquery-ui 自动完成功能的完整步骤。我正在使用 grails 2.0.1。

我需要一个完整的示例，包括控制器和视图的代码。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T11:00:37.610

首先，您需要将 main.gsp （在头中）添加到行中

```
 <g:javascript library="jquery"/>
 <g:javascript library="jquery-ui"/> 
```

该插件将自动下载。

对于完整的示例，您可以使用此链接

[http://jay-chandran.blogspot.com/2011/09/using-grails-with-jquery-autocomplete.html](http://jay-chandran.blogspot.com/2011/09/using-grails-with-jquery-autocomplete.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T16:44:31.967

你真的应该尝试自己做这件事，然后问一个关于某事如何工作或为什么某事不工作的问题。

但一个好的起点是一般的 jquery - ui 文档

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

然后你可以通过一个简单的例子来运行这样的：

[http://ohmiserableme.blogspot.com/2011/08/grails-jquery-ajax-autocomplete-with.html](http://ohmiserableme.blogspot.com/2011/08/grails-jquery-ajax-autocomplete-with.html)

# c# - MVC3 Ajax 错误

> ID：10433862
> 
> 赞同：0
> 
> 时间：2012-05-03T14:50:43.760
> 
> 标签：c#, json, asp.net-mvc-3, jquery

第一次使用 jquery（在 MVC3 中使用开箱即用的 1.4.4，即使它已经过时了）。我正在尝试更新屏幕上的一些元素，如下所示，

```
$(document).ready(function () {
    $.ajax({
        url: '<snip />',
        dataType: 'json',
        success: function (data, textStatus, jqXHR) {
            // <snip />
        },
        error: function (jqXHR, textStatus, errorThrown) {
             // <snip />
        }
    });
 }); 
```

这总是调用错误函数，即使在 jqXHR 对象中我可以清楚地看到文本响应

```
"{
  "DBHealth": "Grey",
  "FSHealth": "Grey",
  "WSHealth": "Grey"
}" 
```

完整的 HTTP 服务器响应是（由 WireShark 提供），

```
HTTP/1.1 200 OK
Cache-Control: private, s-maxage=0
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Persistent-Auth: true
Date: Thu, 03 May 2012 14:11:23 GMT
Content-Length: 72

{
  "DBHealth": "Grey",
  "FSHealth": "Grey",
  "WSHealth": "Grey"
} 
```

textStatus 是错误而不是 parsererror，所以我认为问题不是我的 JSON。不出所料，errorThrown 为 null。

显而易见的问题是，为什么会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:56:30.743

Visual Studio 很傻。重新启动调试会话，它成功了。没有更改 javascript 或服务器端控制器中的任何内容。

# android - 在 Android WebView 中集中对齐 Youtube 剪辑的问题

> ID：10433865
> 
> 赞同：3
> 
> 时间：2012-05-03T14:50:49.780
> 
> 标签：android, android-layout

我正在尝试显示嵌入在 Android 中的 WebView 中的 YouTube 剪辑，其 Web 视图的大小为 640x360 dip 并位于平板电脑屏幕的中心。我已经设法做到了，但是 YouTube 剪辑似乎被切断了，并且显示了白色背景，如下面的屏幕截图所示：

![截屏](../Images/26c48b632ce6030521a515a0c19061ca.png)

这是Java代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class VideoWebViewActivity extends Activity {

    private static final int VIDEO_WIDTH = 640; 
    private static final int VIDEO_HEIGHT = 360;
    private WebView webView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        webView = (WebView) findViewById(R.id.weblink_webview);

        webView.getSettings().setPluginsEnabled(true);
        webView.getSettings().setJavaScriptEnabled(true);

        webView.setWebChromeClient(new WebChromeClient());

        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(final WebView view, final int errorCode, final String description, final String failingUrl) {
            }

            @Override
            public boolean shouldOverrideUrlLoading(final WebView view, final String url) {
                view.loadUrl(url);
                return true;
            }

            @Override
            public void onLoadResource(WebView view, String url) {
                super.onLoadResource(view, url);

            }

            @Override
            public void onPageFinished(WebView view, String url) {

            }
        });

        String youtubeUrl = "http://www.youtube.com/embed/O1N2rENXq_Y";

        String embedCode = "<!DOCTYPE html><html><head>" + " <style type=\"text/css\"> body { background-color: transparent; padding:0; margin:0; }</style>"
                        + "</head><body><div align=\"center\"><iframe align=\"middle\" width=\"" + (VIDEO_WIDTH) + "\" height=\""
                        + (VIDEO_HEIGHT) + "\" src=\"" + youtubeUrl
                        + "\" frameborder=\"0\" allowfullscreen></iframe></div></body></html>";

        webView.loadData(embedCode, "text/html", null);
    }

    @Override
    public void onDestroy() {
        if (webView != null) {
            webView.destroy();
        }
        super.onDestroy();
    }
} 
```

这是布局xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/weblink"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:visibility="visible" >

    <WebView
        android:id="@+id/weblink_webview"
        android:layout_width="640dip"
        android:layout_height="wrap_content"
         />

</RelativeLayout> 
```

编辑：最奇怪的是，在带有 Android 3.2 的 7 英寸平板电脑上它工作正常，但是在带有 4.0.3 (ICS) 的 10 英寸平板电脑上，它看起来像在屏幕截图中。10 英寸平板电脑上的同样问题使用蜂窝 3.1。这让我相信 Web 视图本身存在某种设置/问题，导致了这种行为。

编辑 2：在尝试各种想法来解决问题时，我们注意到剪辑右侧的白色矩形的大小似乎与您添加到 Web 视图的左边距量直接相关。例如，如果我们放弃使视图居中并添加 100dip 边距，我们将在剪辑右侧获得大约 100dip 宽的白色条带。

欢迎任何建议。

谢谢，

米海

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:48:30.550

这篇文章有点旧，但如果您仍在寻找解决方案：

ICS 上的 Webview 非常错误，您的问题与带有左边距的 WebView 中的谷歌地图相同。

为了解决这个问题，在清单中，我改变了

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" /> 
```

经过

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11" /> 
```

这允许不激活 ICS 的新功能并解决问题

干杯

# java - Java中动态SQL库的比较

> ID：10433867
> 
> 赞同：7
> 
> 时间：2012-05-03T14:50:53.713
> 
> 标签：java, hibernate, dynamic-sql, mybatis

考虑一个需要实时搜索后备数据库的只读服务。该服务需要能够生成相当复杂的选择查询，以基于多表对象生成摘要、报告和结果。库/框架选择的优先级是（sql 的）性能、可维护性和寿命。

*Hibernate* - 似乎需要“技巧”才能让它生成正确的 SQL，Criteria API 看起来很有希望，但在任意查询方面也有一些限制。

*MyBatis* - 没有类似 Criteria 的 API，但它清晰干净，通常不需要 Hibernate 的技巧和技巧。有限的数据库抽象。

其他一些尚待评估的解决方案包括：SQLBuilder、Squiggle、Querydsl、JOOQ 或自定义解决方案。

SO 用户发现的内容最适合制作快速的多功能搜索服务。

**[更新] -**我在使用 Hibernate 时遇到的一些技巧和问题是......

*   [https://hibernate.onjira.com/browse/HHH-879](https://hibernate.onjira.com/browse/HHH-879)
*   [https://hibernate.onjira.com/browse/HHH-5291](https://hibernate.onjira.com/browse/HHH-5291)
*   [如何将 Where 子句应用于辅助表](https://stackoverflow.com/questions/6038158/how-to-apply-where-clause-to-secondary-table)
*   [https://forum.hibernate.org/viewtopic.php?f=1&t=973514](https://forum.hibernate.org/viewtopic.php?f=1&t=973514)

一般来说，加入同一张表两次似乎会导致问题。我什至设法欺骗 hibernate 生成正确的 SQL 只是让它映射结果错误，因为它缓存了实体的第一个实例并假设来自第二个连接的列是多余的。通过注释表达的条件连接也很痛苦。并不是说这是不可能的，而是非常神秘且不直观。

为了回答下面的 X-Zero，我想从规范到结果。即，消费者告诉我他们知道什么，然后我构建一个查询来即时回答他们的问题。在实践中，我打算对它们可以传递的内容进行一些限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:43:23.087

对于面向查询的服务，我强烈建议远离 Hibernate 或类似的 JPA 框架。MyBatis 可能是一个不错的选择，它为从 SQL 片段动态构造查询提供了一些基本的脚本支持，但您必须自己处理 SQL 方言。

此外，要添加到您的列表中，还有[Spring SQL 模板](http://static.springsource.org/spring/docs/2.0.x/reference/jdbc.html)类和[JDBI](http://www.jdbi.org/)，尽管它们都没有解决 SQL 方言的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T12:30:46.060

根据您的要求，我认为[jOOQ](http://www.jooq.org "jOOQ 是用于类型安全 SQL 查询构造和执行的流畅 API")将是一个很好的匹配。您还提到了 jOOQ 作为潜在框架之一，所以让我们从 jOOQ 的角度考虑您的需求：

> 该服务需要能够生成相当复杂的选择查询

jOOQ 将 SQL 建模为 Java 中的内部特定领域语言。这意味着 SQL（或看起来几乎像 SQL 的东西）是使用 Java 对象和方法构造的。我最近写了一篇关于 jOOQ 的 DSL / fluent API 是如何构建的博客，以及为什么它允许任意复杂查询的类型安全构建。请参阅此处的博客文章（包括一个相当复杂的查询）：

[http://blog.jooq.org/2012/01/05/the-java-fluent-api-designer-crash-course/](http://blog.jooq.org/2012/01/05/the-java-fluent-api-designer-crash-course/)

> 基于多表对象生成摘要、报告和结果。

jOOQ 包含用于生成摘要、报告等的高级 OLAP 功能。支持的功能包括`GROUPING SETS`( `CUBE()`, `ROLLUP()`)、数据透视表、分层查询、窗口函数和任意 SQL。

> 库/框架选择的优先级是（sql的）性能，

jOOQ 以您编写的方式生成 SQL。

> 可维护性

jOOQ 附带一个源代码生成器，将您的数据库模式建模为 Java 代码。这类似于 Hibernate 和/或 QueryDSL 能够做的事情。当您的架构更改时，您的 Java 代码也会更改（可能导致编译错误）

> 和长寿。

jOOQ 已经成熟，每年有 10k 的下载量，而且还在不断增长。API 在过去的版本中一直非常稳定。

> Hibernate - 似乎需要“技巧”才能让它生成正确的 SQL，Criteria API 看起来很有希望，但在任意查询方面也有一些限制。

Hibernate 生成 HQL（或 JPQL），而不是 SQL。您无法通过 Hibernate 充分利用 SQL 功能。

> MyBatis - 没有类似 Criteria 的 API，但它清晰干净，通常不需要 Hibernate 的技巧和技巧。

对于您的目标，这也是一个不错的选择

> 有限的数据库抽象。

jOOQ 的 API 对于每个底层数据库都是相同的。生成的 SQL 针对 13 个主要 RDBMS 进行了集成测试。这包括在其他数据库中翻译和/或模拟的各种功能。这篇博文给出了一个这样的例子，其中`ON DUPLICATE KEY UPDATE`描述了在其他 RDBMS 中模拟 MySQL 的子句：

[http://blog.jooq.org/2012/05/01/how-to-simulate-mysqls-insert-statement-extensions/](http://blog.jooq.org/2012/05/01/how-to-simulate-mysqls-insert-statement-extensions/)

或者正确处理`DUAL`表格有多么棘手：

[http://blog.jooq.org/2011/10/16/sql-trouble-with-dummy-tables/](http://blog.jooq.org/2011/10/16/sql-trouble-with-dummy-tables/)

免责声明：我是 jOOQ 的开发者，所以这个答案可能有点偏颇。

# nosql - Amazon DynamoDB 项目大小？

> ID：10433868
> 
> 赞同：1
> 
> 时间：2012-05-03T14:50:57.490
> 
> 标签：nosql, amazon-dynamodb

我只是在探索整个 NoSQL 概念。我一直在玩亚马逊的 DynamoDB，我真的很喜欢这个概念。但是，这表示我不太确定应该如何分离数据。我的意思是我应该像在关系数据库中那样为相关数据功能创建一个新表，还是使用单个表来存储所有应用程序数据？

例如，在关系数据库中，我可能有一个名为 users 的表和一个名为 users_details 的表。例如，我会在两个表之间创建 1:1 的关系。使用 NoSQL 概念，理论上我也可以创建两个表，但让我印象深刻的是，将所有数据放在一个表中更有效。

如果是这种情况，那么你什么时候停止？将给定用户的所有应用程序数据存储在一个表中的想法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:18:37.610

首先问自己：为什么我首先在​​ RDBMS 中将用户与用户详细信息分开。
更笼统地说，在谈论 NoSQL 时，您真的不应该查看表之间的关系。
您不应该考虑“连接”来自不同表的信息，而应该以可以最佳检索的方式准备数据。
在 user/user_details 场景中，将所有信息放在一个 users 表中，通过指定要获取的属性查询你想要的。

# android - 如何更新Android数据库中的一行

> ID：10433869
> 
> 赞同：2
> 
> 时间：2012-05-03T14:51:05.297
> 
> 标签：android, database

大家好，我想在点击更新按钮时更新一行，但它不起作用。我使用了以下代码。

```
 public void btnUpdate(View v) { 
handeler.updateData(updateName.getText().toString(), updatePhone .getText().toString(), updateEmail.getText().toString(),id);
 } 

public void updateData(String name, String phone, String email, String id) {
 ContentValues values = new ContentValues(); 
values.put(COLUMN_FIRST, name); 
values.put(COLUMN_SECOND, phone); values.put(COLUMN_THIRD, email); database.update(TABLE_NAME, values, id, null); 
} 
public void search() {
        Cursor cursor = handeler.getData();
        if (cursor.moveToFirst()) {
            String phoneNo;
            phoneNo = updateByPhone.getText().toString();
            do {
                String s1 = cursor.getString(2);
                if (phoneNo.compareTo(s1) == 0) {
                    id = cursor.getString(0);
                    updateName.setText(cursor.getString(1));
                    updateEmail.setText(cursor.getString(3));
                    updatePhone.setText(cursor.getString(2));

                }
            } while (cursor.moveToNext());

        }

    } 
```

所以如果有人知道，请建议我如何解决它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:18:03.620

我看到几个可能的问题：

`updatePhone .getText().toString()`1）你应该有一个额外的空间`updatePhone.getText().toString()`

2）你正在传递一个变量`id`from `btnUpdate`to`updateData`但不清楚它来自哪里（或者即使它确实存在）

我敢打赌，#2 是你的问题。您可能需要将 id（我假设这意味着您要在数据库中修改的 RowId）传递给`btnUpdate`方法：

```
public void btnUpdate(View v, long id) 
```

还有其他可能性......您没有显示您的数据库结构，因此可能是某些约束导致更新失败。

**编辑**

`update method`文档显示了这一点 ：

```
public int update (String table, ContentValues values, String whereClause, String[] whereArgs) 
```

注意部分`String whereClause`。这应该是一个 SQL WHERE 语句（没有 WHERE）。您只传入 id，而不是 WHERE 子句。更改对 update 的调用以使其成为 WHERE 子句，它应该可以工作。几个例子：

```
database.update(TABLE_NAME, values, "_id = " + id, null); 

database.update(TABLE_NAME, values, "_id = '" + id + "'", null); 
```

这两个示例都假设您的行 id 列标记为 _id。

第一个例子是 if`id`是一个整数值。那里的问题是您设置`id`为字符串，所以我不确定是否是这种情况。如果它应该是一个 int，你应该使用它来`id = cursor.getInt(0);`代替`id = cursor.getString(0);`.

如果它确实是一个字符串而不是一个 int，请使用第二个版本，它`id`用单引号括起来表示它是一个字符串。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:05:18.883

更改代码

```
database.update(TABLE_NAME, values, "_id='?'", new String[]{id}); 
```

**编辑**

```
database.update(TABLE_NAME, values, "_id=?", new String[]{id}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:04:44.663

最后我得到了解决方案，这是一个小错误，使用以下代码我们可以执行更新操作

```
database.update(TABLE_NAME, values, BaseColumns._ID + "=" + id, null); 
```

# c++ - 使用 C++ STL 的 DFT（离散傅立叶变换）

> ID：10433871
> 
> 赞同：4
> 
> 时间：2012-05-03T14:51:26.050
> 
> 标签：c++, stl, dft

我尝试计算这个数组的 DFT `x_1`。它一定很简单，但我的价值观太低了。我的代码有什么问题？

请**不要**链接到其他示例 - 只是为我自己的代码寻找修复。

```
#include <iostream>
#include <complex>
#include <cassert>

int main ()
{
    const unsigned int N = 20;

    const double x_1[N] = {0, 0.3, 0.6, 0.8, 1, 1, 0.9, 0.7, 0.5, 0.2, 0.2, 0.5, 0.7, 0.9, 1, 1, 0.8, 0.6, 0.3, 0};

    for(unsigned int k = 0; k < N; k++)
    {
        std::complex<double> sum(0.0,0.0);
        for(unsigned int j = 0; j < N; j++)
        {
            int integers = -2*j*k;
            std::complex<double> my_exponent(0.0, M_PI/N*(double)integers);
            sum += x_1[j] * std::exp(my_exponent);
        }
        std::cout << abs(sum)/N << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:07:12.893

```
std::cout << abs(sum)/N << std::endl; 
```

你为什么要除以N？

系数没有除法。见[维基](https://en.wikipedia.org/wiki/Discrete_Fourier_transform#Definition)。

这些是我用 Matlab 得到的值：

```
12.0000000000000 + 0.00000000000000i
-0.971586454726535 - 0.153884176858763i
-4.26246117974981 - 1.38495759172886i   
-0.0712959999079796 - 0.0363271264002681i   
-0.473606797749979 - 0.344095480117793i
0.00000000000000 + 0.00000000000000i
-0.237538820250189 - 0.326944137602412i
0.0185095954079375 + 0.0363271264002681i
-0.0263932022500213 - 0.0812299240582274i
0.0243728592265771 + 0.153884176858763i
0.00000000000000 + 0.00000000000000i    
0.0243728592265771 - 0.153884176858763i
-0.0263932022500213 + 0.0812299240582274i
0.0185095954079375 - 0.0363271264002681i    
-0.237538820250189 + 0.326944137602412i 
0.00000000000000 + 0.00000000000000i    
-0.473606797749979 + 0.344095480117793i 
-0.0712959999079796 + 0.0363271264002681i
-4.26246117974981 + 1.38495759172886i   
-0.971586454726535 + 0.153884176858763i 
```

当我使用 std::cout << sum << std::endl; 打印时，我看到或多或少相同的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T08:03:35.230

我认为这条线`integers = -2*j*k`不应该有减号（-），因为这不是逆变换

# sql-server-2008 - 在 Entity Framework 4.1 中，如何使用 SqlQuery 创建在编译时不知道查询详细信息的匿名对象

> ID：10433876
> 
> 赞同：0
> 
> 时间：2012-05-03T14:51:40.873
> 
> 标签：sql-server-2008, entity-framework-4.1, anonymous-types

我正在使用 EF 4.1 并且需要使用**DbContext.Database.SqlQuery<T>**来运行存储过程，这将有效地执行**SELECT * FROM 表**，其中**表**在编译时甚至可能不存在。

我可能很厚，但我不知道用什么来表示**<T>**它将表示一个包含表中单行数据的对象。

我不会对**<T>**类型的结果对象进行操作，但它们最终会被序列化为 JSON。

如果我问的是不可能或不可行的，那么非常欢迎指向更简单的路线！

皮特赛克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:15:51.423

我目前正在研究类似的问题。到目前为止，我已经找到[了这个博客条目](http://www.markzhou.com/blog/post/2011/06/02/Use-dynamic-type-in-Entity-Framework-41-SqlQuery()-method.aspx)。它可能会解决您的问题，但是，我对动态创建类型有点谨慎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:54:04.253

此事件中的泛型是将结果映射到的对象。即使您只是对它们进行序列化，您也需要将结果放入一个列表中。

# parsing - 重新创建评估函数

> ID：10433882
> 
> 赞同：1
> 
> 时间：2012-05-03T14:52:10.810
> 
> 标签：parsing, scheme, eval, racket, multiplication

我试图在不调用内置 eval 函数的情况下复制球拍中的 eval 函数。我目前正在使用一个简单的数学词法分析器和解析器

```
$(define simple-math-lexer
       (lexer
        ((re-+ number10) (token-NUM (string->number lexeme)))
        ("-" (token--))
        ("+" (token-+))
        ;; recursively calls the lexer which effectively skips whitespace
        (whitespace (simple-math-lexer input-port))
        ((eof) (token-EOF))))

(define simple-math-parser
       (parser
        (start exp)
        (end EOF)
        (error void)
        (tokens a b)
        (precs (left - +))
        (grammar
         (exp ((NUM) $1)
              ((+ exp exp) (+ $2 $3))
              ((- exp exp) (- $2 $3)))))) 
```

目前我不确定如何为解析器实现乘法。任何建议或帮助链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:03:02.287

您应该发布[SSCCE](http://sscce.org/)。根据问题中提供的少量信息，我可以建议：

*   将评估与解析分开，评估者应该收到准备评估的符号列表，这里似乎您正在混合解析和评估阶段
*   只需添加另一种情况，就像您处理加法和减法一样，您可以包括乘法：`((* exp exp) (* $2 $3))`

[SICP](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-26.html#%_sec_4.1)是一本非常好的书，可帮助您开始学习如何在 Scheme 中编写自己的评估器。

# javascript - requirejs 如何处理子页面？

> ID：10433883
> 
> 赞同：0
> 
> 时间：2012-05-03T14:52:14.180
> 
> 标签：javascript, requirejs

我理解使用 requirejs 以特定顺序加载特定模块的概念，但是如果子页面需要其他脚本，特别是如果它们很广泛，应该如何使用它？

我不明白您如何能够在子页面上使用 require js，因为您已经在母版页上包含了脚本标记，该母版页因此出现在子页上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:24:20.937

由于页面已经从模板加载了脚本，您只需通过调用`require()`函数来使用它。

# mysql - 如何在我的 sql 中添加总计作为最后一行？

> ID：10433885
> 
> 赞同：9
> 
> 时间：2012-05-03T14:52:22.637
> 
> 标签：mysql, sql, sql-server

我正在尝试显示一行“总计”，它将对 Count 列进行总和。下面的代码将有两列，Environment 和 Count。

```
select 
case 
when env is null THEN 'Unknown' 
else env
end,
count(*) as Count
from env_table
group by env
order by env
/ 
```

我想要的输出：

视窗 200

Linux 120

总计 320

正如您在上面看到的，我想做的是在最后添加一个名为“Total”的行，它实际上会执行 SUM(count(*))。执行此操作的正确语法是什么？谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-03T14:54:10.107

使用[`WITH ROLLUP`](http://dev.mysql.com/doc/en/group-by-modifiers.html)修饰符`GROUP BY`：

```
SELECT   IFNULL(env, 'Unknown'),
         COUNT(*) AS Count
FROM     env_table
GROUP BY env WITH ROLLUP
ORDER BY env 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T14:55:14.893

也许是这样的？

```
SELECT   IFNULL(env, 'Unknown'),
         COUNT(*) AS Count
FROM env_table
GROUP BY env
ORDER BY env
UNION ALL
SELECT   null,
         Count(*)
FROM env_table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-21T14:41:23.053

```
SELECT   COALESCE(env, 'Total') AS Description,
         COUNT(*) AS Count
FROM     env_table
GROUP BY env WITH ROLLUP
ORDER BY env 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T15:03:57.590

```
SELECT env, count 
  FROM (SELECT CASE WHEN env is null THEN 'Unknown' ELSE env END env,
               count(*) count
          FROM env_table
         GROUP BY env
      ORDER BY env)
UNION ALL
SELECT 'Total' env,
       count(*) count
  FROM env_table 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-26T12:11:12.710

我希望它有效。以防万一，如果需要任何更正，很想听听我的错误。

```
select environment, count from table a
union all
(select "total" as environment, sum(count) from table b
group by 1) 
```

# ruby-on-rails - 通过模型设置先前在nested_attributes 控制器中设置的值

> ID：10433887
> 
> 赞同：0
> 
> 时间：2012-05-03T14:52:28.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我之前通过轨道控制器的 create 方法将我当前的用户 ID 添加到我的轨道中，使用：

```
@track.user_id = current_user.id 
```

这工作得很好，但是，我现在在我的发布模型中嵌套了轨道，并试图通过我的发布模型中的回调来做同样的事情，使用：

```
before_save :add_user_to_tracks
before_update :add_user_to_tracks

def add_user_to_tracks
  tracks.each { |t| t.user_id = self.current_user.id}
end 
```

我收到一个**未定义的方法“current_user”**错误，但是，我知道这非常接近工作，就好像我使用“99”而不是 self.current_user.id 测试它一样，它将 99 添加到数据库中每个轨道的 user_id。

为什么我无法访问**current_user.id的任何想法**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:00:16.313

我认为您应该使用隐藏字段从表单中发送 user_id。

如果您在 Release 模型中没有 user_id。您可以将其创建为虚拟属性。

```
class Release < ActiveRecord::Base
  attr_accessor :user_id

  before_save :add_user_to_tracks 
  before_update :add_user_to_tracks

  def add_user_to_tracks
    tracks.each { |t| t.user_id = user_id}
  end
end 
```

# sql - 连接/桥接表 Oracle SQL

> ID：10433896
> 
> 赞同：1
> 
> 时间：2012-05-03T14:52:58.687
> 
> 标签：sql, oracle, foreign-key-relationship, junction-table

只是一个关于 Oracle SQL 中连接表的快速问题。我了解它们在“多对多”关系中的功能和作用，但是“一对多”关系呢？我有两张桌子，`Employees`和`Positions`。每个员工只能担任一个职位，但每个职位可以有多个员工。例如，John Doe 只能担任销售主管，但公司有 4 位销售主管。到目前为止，这就是我的编码方式：

```
CREATE TABLE Positions (
position_id NUMBER(2) NOT NULL,
position_name VARCHAR2(25) NOT NULL,
CONSTRAINT pk_position PRIMARY KEY(position_id)
);

CREATE TABLE Employee (
emp_id NUMBER(3) NOT NULL,
emp_name VARCHAR2(30) NOT NULL,
emp_position NUMBER(2) NOT NULL,
emp_salary NUMBER(5) NOT NULL,
CONSTRAINT pk_employee PRIMARY KEY(emp_id),
CONSTRAINT fk_emp_pos FOREIGN KEY (emp_position) 
REFERENCES Position(position_id)
);

CREATE TABLE pos_emp (
position_id NUMBER(2) NOT NULL,
emp_id NUMBER(3) NOT NULL,
CONSTRAINT pk_pos_emp PRIMARY KEY(position_id, emp_id)
); 
```

它是否正确？是否需要
：表中的外键`Employee`？
湾。接线表？

我想在员工表中强制执行一个员工对一个角色的关系，同时能够在联结表中拥有一个角色对多个员工的关系。

希望这是有道理的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:57:04.813

您建立的关系是多对多关系。因此，如果您想要一对多。那么最常见的方式就是直接跳过`pos_emp`并且有外键了 `Employee`。所以表格看起来像这样：

```
CREATE TABLE Employee (
emp_id NUMBER(3) NOT NULL,
emp_name VARCHAR2(30) NOT NULL,
emp_position NUMBER(2) NOT NULL,
emp_salary NUMBER(5) NOT NULL,
position_id NUMBER(2) NOT NULL,
... 
```

**编辑**

> 我在我的代码中设置了这样的员工表。将 Employee 表中的 Position_id 作为外键是否足以强制每个职位有很多员工？

如果`position_id`在`Employee`不允许`null`s 中，则您不能添加没有职位的 Employee。这意味着，如果您尝试插入没有职位的 Employee，您将得到一个异常，即外部关系不满足。

但是您需要在代码中检查它，以便在添加 Employee 时 position_id 有一个值。因此，如果它没有值，则不要将插入发送到该数据库。因为这是一个不必要的数据库调用。

另一个有趣的点是，如果你删除 a 会发生什么`Employee`？您是否应该删除`Employee`与该职位相关的内容？如果答案是肯定的。您可能会考虑从位置表中级联删除。否则你可能需要一个触发器。

# asp.net-mvc - ajax 链接处理不当

> ID：10433897
> 
> 赞同：4
> 
> 时间：2012-05-03T14:53:04.880
> 
> 标签：asp.net-mvc, jquery-mobile

我有一个带有 jquery-mobile 应用程序的 asp.net mvc 4。

在一个页面（url：/StatementBatch）上，我有一个批次列表，它们只是指向批次详细信息页面（url：/StetementBatch/Details/4）的链接。

```
<li>
    <a href="/StatementBatch/Details/4">
        <h3>January 2012</h3>

        <div style="float: right; width: 30%;"><strong>Issued  : </strong>1/10/2012 12:00:00 AM</div>
        <div style="float: right; width: 30%;">Completed</div>

        <p class="ui-li-aside"><strong>1277</strong></p>
    </a>

</li> 
```

奇怪的是，一旦点击链接并呈现详细信息页面，浏览器的当前 url 现在是`http://localhost:49457/StatementBatch#/StatementBatch/Details/4`

我需要在应用程序中进行哪些更改才能修复此行为？

我的猜测是它与某种 ajax 加载相关的问题，但我共享的 _Layout.cshtml 文件包含`$.mobile.ajaxEnabled = false;`，我预计它会杀死所有 ajax 加载，但我显然误解了那个。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:20:28.303

我怀疑这可能是答案

[jQuery Mobile ajaxEnabled 不起作用？](https://stackoverflow.com/questions/9424968/jquery-mobile-ajaxenabled-doesnt-work)

将测试，看看我是否可以使它工作

**将`mobileinit`绑定移动到 jquery 之后，但在 jquery-mobile 之前。这似乎是 MVC4（新）移动 Web 应用程序模板中的一个错误，该模板只是将所有脚本捆绑在一起**

这失败了……

```
<link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script>

<script>
    $(document).bind("mobileinit", function() {
        // As of Beta 2, jQuery Mobile's Ajax navigation does not work in all cases (e.g.,
        // when navigating from a mobile to a non-mobile page, or when clicking "back"
        // after a form post), hence disabling it.
        $.mobile.ajaxEnabled = false;
    });
</script> 
```

但这有效....

```
<link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />

<script src="../../Scripts/jquery-1.7.2.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>

<script>
    $(document).bind("mobileinit", function() {
        // As of Beta 2, jQuery Mobile's Ajax navigation does not work in all cases (e.g.,
        // when navigating from a mobile to a non-mobile page, or when clicking "back"
        // after a form post), hence disabling it.
        $.mobile.ajaxEnabled = false;
    });
</script>

<script src="../../Scripts/jquery.mobile-1.1.0.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.js" type="text/javascript"></script>
<script src="../../Scripts/modernizr-2.5.3.js" type="text/javascript"></script> 
```

谢谢...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:49:33.917

如果您使用 jQuery mobile，这是默认行为。jQuery mobile 将使您的所有链接都被 ajaxified。这意味着它将通过 ajax 加载链接页面的内容并更新 url。如果你想禁用一个链接被 ajaxified，你可以添加`rel`属性`external`作为值

```
<a href="somepagep.aspx" rel="external">This will open without ajax</a> 
```

这将正常打开页面，因此您的网址将根据新页面进行更新。

或者，您也可以 `data-ajax="false"`使用

```
<a href="somepagep.aspx" data-ajax="false">This link also will open without ajax</a> 
```

这个链接有更多关于它的信息[http://jquerymobile.com/test/docs/pages/page-links.html](http://jquerymobile.com/test/docs/pages/page-links.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:46:21.103

这很奇怪。如果`$.mobile.ajaxEnabled = false;`设置了，那么它不应该生成 ajax 链接。请检查您的视图是否正在使用已启用此设置的其他母版页。在对应的视图目录下查找“_ViewStart.cshtml”，查看链接到哪个master。

为了禁用特定超链接使用 `data-ajax="false"`属性的 Ajax 行为。像下面

```
<a href="/StatementBatch/Details/4" data-ajax="false">
   <h3>January 2012</h3>
   <div style="float: right; width: 30%;"><strong>Issued  : </strong>1/10/2012 12:00:00 AM</div>
   <div style="float: right; width: 30%;">Completed</div>
    <p class="ui-li-aside"><strong>1277</strong></p>
</a> 
```

# ruby-on-rails - Rails“has_many”与 NULL 外键关联

> ID：10433899
> 
> 赞同：4
> 
> 时间：2012-05-03T14:53:07.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我们的 Rails 3 应用程序有模型`Person`和`Message`. 消息可以特定于某个人（当`person_id`设置了消息列时），也可以是“全局的”（当`person_id`列为 NULL 时）。

我们希望使用以下[选项](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to-label-Options)`has_many`建立一个简单的关系：[`:conditions`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to-label-Options)

```
class Person < ActiveRecord::Base
  has_many :messages,
      :conditions => proc { ['(messages.person_id IS NULL) OR ' +
                             '(messages.person_id = ?)'], self.id }
  # ...
end 
```

但似乎`has_many`在强制外键约束与 Person 对象的 id 相等（例如“ `FROM messages WHERE person_id=123 AND (person_id IS NULL OR person_id=123)`”）之后，类方法将“条件”选项编码为逻辑“AND”子句。似乎没有办法允许具有空外键的关联对象属于此类关联。

Rails 3 / ActiveRecord 是否提供了一种方法来做到这一点，还是我必须破解我自己的类似关联的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:28:47.080

您不能像在 ActiveRecord 关联中使用条件那样拥有 OR 子句。您可以在没有条件的情况下进行关联，然后添加一个方法来包含您想要的全局消息。这样，您在构建关联记录时仍然可以利用关联。

```
# person.rb
has_many :messages

def all_messages
  Message.where('messages.person_id=? OR messages.person_id IS NULL', id)
end 
```

* * *

[这是我的Squeel](https://github.com/ernie/squeel) gem的标准插件，如果您不想在代码中包含一些 SQL，它对于像这样的更高级的查询很方便。一探究竟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:07:16.927

我认为您是正确的，您可以放弃 has_many，并使用外部连接创建一个范围，例如：

```
class Person < ActiveRecord::Base
   scope :messages lambda { 
      joins("RIGHT OUTER Join messages on persons.id = messages.person_id")
      .where('persons.id = ?',self.id)
   } 
```

# opencart - 收不到任何邮件

> ID：10433901
> 
> 赞同：0
> 
> 时间：2012-05-03T14:53:13.853
> 
> 标签：opencart

我正在使用 opencart 1.5.1，并且正在测试客户下订单时发送的电子邮件。

我已进入管理员并确保我输入了有效的商店电子邮件，并确保将`New Order Alert Mail:`其设置为是。

每当我下订单（我使用的是 Barclays ePDQ）时，我都会下订单，但作为客户，我没有收到任何订单电子邮件。店主似乎也没有被发送。

我在 error.log 文件`system/log`中什么也没有我在文件中也没有任何内容`vqmod.log`。

我完全不知道为什么这些电子邮件没有发送。

我检查了客户和店主的垃圾邮件文件夹。

查看服务器上的邮件日志，没有记录表明电子邮件已发送（这可能是未收到电子邮件的原因），但这并不能解释为什么根本没有发送电子邮件。

订单在 admin 下列出`Sales->Orders`，只是没有电子邮件。

谢谢

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:48:53.470

确保在 Plesk 中设置/编辑在 下的域时，`PHP Support`确保`safe_mode`未选中该选项。

这只会导致完全的挫败感。

# javascript - javascript：window.location 不会在所有浏览器上打开新窗口

> ID：10433903
> 
> 赞同：0
> 
> 时间：2012-05-03T14:53:23.320
> 
> 标签：javascript, window.location

我有一个奇怪的问题。在某些浏览器（如 chrome）上，下面的代码会打开一个新窗口。所以它按预期工作。在其他浏览器（如 Firefox）上它只显示警告框所以它不会打开请求的窗口。对适用于所有浏览器的代码有什么建议吗？

```
if(TestVar == "1810" ) 
            {
                alert ("test  " + TestVar + "! ");
                window.location.href="http://astyle.home.xs4all.nl/beautyfarm2003/wellnessbon_321442.html";
            }

if(TestVar == "1920" ) 
            {
                alert ("Test " + TestVar + "! "); 
                window.location="http://astyle.home.xs4all.nl/beautyfarm2003/wellnessbon_1925485.html";
            }  // Vriendinnendag 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:55:27.707

对我来说，该代码在 Chrome、Internet Explorer 9/10 和 Firefox 中似乎运行良好。

尝试以下操作：http: [//jsbin.com/uluziz/edit#javascript,html](http://jsbin.com/uluziz/edit#javascript,html)

如果你想打开一个新窗口，你不会改变`window.location`. 只是改变*当前*窗口所在的位置。`window.open()`改为使用打开新窗口到新位置：

```
var myWin = window.open('http://stackoverflow.com','SO','width=640,height=480');

setTimeout(function(){
  myWin.close();
}, 2000); 
```

演示：http: [//jsbin.com/ekoluk/3/edit](http://jsbin.com/ekoluk/3/edit)

# xml - Eclipse xtext- XML 语法

> ID：10433904
> 
> 赞同：0
> 
> 时间：2012-05-03T14:53:27.487
> 
> 标签：xml, eclipse, xtext

我正在使用 Eclipse xtext 框架编写一个项目。我想为 XML 语言做一个语法。

如何解析打开和关闭标签？

当我给出这样的东西时：

> `Body: '<'Type'>''</'type=[Type]'>';`
> 
> `Type: name=ID;`

它允许有这样的标签：

> `<foo></foo>` `<bar></foo>`

我只想有这样的可能性：

> `<foo></foo>` `<bar></bar>`

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:00:31.803

我只需解析结束标记中的任何标识符并在解析后进行验证。

```
Element : 
  '<' type=[Type] '>
    children+=Element*
  '</' closingTagName=ID '>'; 
```

您还需要相应地调整内容辅助。

# java - 自定义 maven 插件 - 默认参数是什么？

> ID：10433906
> 
> 赞同：2
> 
> 时间：2012-05-03T14:53:28.047
> 
> 标签：java, maven-2, maven-plugin

我正在尝试编写一个自定义 maven 插件，并希望获得有关该项目的一些信息。

经过一番搜索，我发现我可以将参数设置为某些与项目相关的值（大概来自 POM？） - 例如

```
/**
 * @goal myPlugin
 */
public class MyTestMojo extends AbstractMojo {

  /**
   * @parameter expression="${project}"
   * @required
   * @read-only
   */
  private Object project;

  @Override
  public void execute() throws MojoExecutionException, MojoFailureException {
    getLog().info(project.toString());
  }
} 
```

但是，我找不到任何有关此格式可用参数的文档。目前，我正在进行反复试验，但事实证明这有点令人沮丧。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:05:58.940

这是可用属性的[简短列表](http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide)。您可能还想查看可用的 Maven[插件](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html) [教程](http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-custom-plugin.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:03:20.533

请参阅[Mojo API 规范，Descriptor and Annotations 部分](http://maven.apache.org/developers/mojo-api-specification.html)。

在 Maven 中编写插件有一个很好的介绍[：完整参考：11.4 编写自定义插件，第 11.4.5 节。](http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-custom-plugin.html)Sonatype 网站上的[Mojo 类注释。](http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-custom-plugin.html)

# sql - SQL Server 中的表大小奇怪

> ID：10433907
> 
> 赞同：1
> 
> 时间：2012-05-03T14:53:33.693
> 
> 标签：sql, database, sql-server-2008, database-design

我在 SQL Server 中有 2 个表

**网址**

*   索引空间 12,531 MB
*   行数 247505
*   数据空间 1.965,891 MB

表结构：

```
CREATE TABLE [TbUrl](
    [IdUrl] [Int] IDENTITY(1,1) NOT NULL,
    [IdSupply] [Int] NOT NULL,
    [Uri] [varchar](512) NOT NULL,
    [UrlCod] [varchar](256) NOT NULL,
    [Status] [Int] NOT NULL,
    [InsertionDate] [datetime] NOT NULL,
    [UpdatedDate] [datetime] NULL,
    [UpdatedIp] [varchar](15) NULL 
```

**TbUrl详细信息**

*   索引空间 29,406 MB
*   行数 234209
*   数据空间 386,047 MB

结构：

```
CREATE TABLE .[TbUrlDetail](
    [IdUrlDetail] [Int] IDENTITY(1,1) NOT NULL,
    [IdUri] [Int] NOT NULL,
    [Title] [varchar](512) NOT NULL,
    [Sku] [varchar](32) NOT NULL,
    [MetaKeywords] [varchar](512) NOT NULL,
    [MetaDescription] [varchar](512) NOT NULL,
    [Price] [money] NOT NULL,
    [Description] [text] NOT NULL,
    [Stock] [Bit] NOT NULL,
    [StarNumber] [Int] NOT NULL,
    [ReviewNumber] [Int] NOT NULL,
    [Category] [varchar](256) NOT NULL,
    [UrlShort] [varchar](32) NULL,
    [ReleaseDate] [datetime] NOT NULL,
    [InsertionDate] [datetime] NOT NULL 
```

的尺寸`TbUrl`相比是非常大的`TbUrlDetail`

表的布局（设计）与其他数据空间`TbUrl`相比较少。`TbUrlDetail`

我已经完成了`SHRINK ON DATABASE`，但空间`TbUrl`并没有减少。

可能会发生什么？如何减少此表的空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:07:27.687

表上有聚集索引吗？（如果不是，您可能会遇到很多前向指针 -[参考](http://sqlblog.com/blogs/tibor_karaszi/archive/2009/08/28/heaps-forwarding-pointers-alter-table-rebuild-and-non-clustered-indexes.aspx)。）您是否对数据或数据类型进行了重大更改或添加/删除了列？（如果您有很多以前占用的空间可能无法重新使用。[一个参考](http://sqlblog.com/blogs/kalen_delaney/archive/2006/10/13/301.aspx)将固定长度的 col 更改为变量不会回收空间。）

在这两种情况下，您都应该能够通过重建表来恢复浪费的空间（这也将重建所有聚集索引）：

```
ALTER TABLE dbo.TblUrl REBUILD; 
```

如果您使用的是企业版，则可以在线执行此操作：

```
ALTER TABLE dbo.TblUrl REBUILD WITH (ONLINE = ON); 
```

缩小整个数据库并不是这里的神奇答案。如果此表上没有聚集索引，我强烈建议您在执行重建*之前考虑一个。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:08:33.917

With VARCHAR() fields, the amount of space actually taken does vary according to the amount of text put in those fields.

Could you perhaps have (on average) much shorter entries in one table than in the other?

Try

```
SELECT
  SUM(CAST(LENGTH(uri) + LENGTH(urlcod) AS BIGINT)) AS character_count
FROM
  TbUrl

SELECT
  SUM(CAST(LENGTH(title) + LENGTH(metakeywords) + LENGTH(metadescription) + LENGTH(Category) AS BIGINT)) AS character_count
FROM
  TbUrlDetail 
```

# android - 通过按钮更改矩形颜色

> ID：10433911
> 
> 赞同：1
> 
> 时间：2012-05-03T14:53:38.327
> 
> 标签：android

我正在尝试制作显示矩形并能够通过按钮更改其颜色的简单应用程序。

矩形类是：

```
public class DrawView extends View{
Paint paint = new Paint();

public DrawView(Context context) {
    super(context);
}
public DrawView(Context context, AttributeSet attrs) {
    super(context, attrs);
}
public DrawView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
public void onDraw(Canvas canvas) {

    paint.setColor(Color.YELLOW);
    canvas.drawRect(300, 550, 150, 400, paint );

}

public void setColorRed()
{
   paint.setColor(Color.RED);
   invalidate();
} 
```

我的应用是选项卡布局应用。此类以这种方式显示在第三个选项卡中：

主要的.xml

```
<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"  >

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

    <Button
    android:id="@+id/bRedColor"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Red" />

   <com.thms.systemy3.DrawView
        android:id="@+id/yourID"
        android:layout_margin="10dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    </com.thms.systemy3.DrawView>
                </FrameLayout>

            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

我试图通过我的 MainClass.java 类访问 setColorRed()

```
DrawView drawview; 
```

然后使用

```
drawview.setColorRed() 
```

主类.java：

```
public class MainClass extends Activity implements OnClickListener{

TabHost th;
DrawView drawview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    th = (TabHost) findViewById(R.id.tabhost);

    //tab3
    Button bColorRed = (Button) findViewById(R.id.bRedColor);

    th.setup();

    TabSpec specs = th.newTabSpec("tag1");
    specs.setContent(R.id.tab1);
    specs.setIndicator("TAB1");
    th.addTab(specs);

    specs = th.newTabSpec("tag2");
    specs.setContent(R.id.tab2);
    specs.setIndicator("TAB2");
    th.addTab(specs);

    specs = th.newTabSpec("tag3");
    specs.setContent(R.id.tab3);
    specs.setIndicator("TAB3");
    th.addTab(specs);

}

@Override
public void onClick(View v) {
    switch (v.getId()){
    case R.id.bRedColor:
        drawview.setColorRed();
        break;
    } 
```

我究竟做错了什么？任何人都可以更正此代码或给我一个适当的示例来设置简单的应用程序，该应用程序绘制矩形并能够通过按钮更改颜色？

谢谢你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:42:06.650

尝试使用这个：

```
paint.setStyle(Paint.Style.FILL); 
```

# c++ - 我应该在这个问题中使用 inline 还是 #define ？

> ID：10433912
> 
> 赞同：2
> 
> 时间：2012-05-03T14:53:39.823
> 
> 标签：c++, pthreads

我使用 pthreads，我想使用以下代码：

```
if(pthread_mutex_lock(&lock)){
        cout<<"error"<<endl;
        return ERROR;
    } 
```

我的问题是我`#define`应该使用内联函数还是应该使用内联函数：

```
inline void func() {

if(pthread_mutex_lock(&lock)){
        cout<<"error"<<endl;
        return ERROR;
    }

} 
```

函数应该是静态的吗？如：

```
static inline void func() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:55:53.800

如果你能帮助它，你不应该对宏做任何事情（在这里，你可以帮助它）。

如果您的函数存在并且仅在 cpp 中使用，则它应该位于未命名的命名空间中...

```
namespace
{
    void func(){/*...*/}
} 
```

如果它在标头中声明并打算从许多其他 cpp 中使用，则它不应该是静态的或在未命名的命名空间中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:48:27.900

C++ 方式是以[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)方式获取锁，如果锁定失败，则从构造函数中抛出异常。请参阅[此示例](https://stackoverflow.com/a/7977272/104774)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T14:58:43.957

`inline`无关紧要。您确实意识到您必须使函数作为参数作为对任何类型的引用`lock`，然后允许返回类型。

所以做类似的事情：

```
ErrorType func(LockType &lock) 
{
     if(pthread_mutex_lock(&lock))
     { 
           prtSysErr(!DIRECT_EXIT,!FATAL); 
           return ERROR; 
     } 
     return NOERROR;
} 
```

然后这样称呼它：

```
if(func(lock)==ERROR)
{
     return ERROR;
} 
```

我正在调用锁`LockType`的类型和错误的类型，`ErrorType`以便您将它们放在任何位置。我还假设`NOERROR`类似地调用没有错误的值。

是的，不要叫它`func`，把它放在`namespace`@Dave 说的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T14:58:52.053

不，您不应该使用宏。
您可以将其标记为内联或仅将其用作普通函数，如果编译器找到合适的候选者，它将内联它。
请注意，如果将函数标记为`static`只能在声明它的翻译单元中使用它。

**为什么？**

使用函数，您可以对传递的函数参数进行类型检查，而宏无法做到这一点。
此外，使用宏，您会接触到宏可能产生的愚蠢和奇怪的副作用。

# php - 数据库插入中的特殊字符错误

> ID：10433914
> 
> 赞同：0
> 
> 时间：2012-05-03T14:53:42.677
> 
> 标签：php, mysql, phpmyadmin

我在我的 HTML 中使用 UTF-8 并将我的数据库表的排序规则设置为 UTF-8 Unicode。我保存的数据来自外部来源，但在网站上（UTF-8 格式）查看时效果很好。

现在，当我使用插入查询存储来自 php 的值时，像“Bearwölf”这样的值会错误地转换为“Bearwölf”。

我该如何解决这个问题？我不认为有更多的细节可以提供，如果你想到了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:46:25.217

更改 API 以提供 utf 8 编码字符串，问题解决。

# gnu-screen - GNU Screen 如果存在则连接，如果不存在则创建

> ID：10433922
> 
> 赞同：23
> 
> 时间：2012-05-03T14:54:00.683
> 
> 标签：gnu-screen

目前，我在 iPad 上使用 GNU 屏幕，并在连接丢失时使用屏幕作为安全措施。目前，我只是运行 screen -S ipad 作为第一个命令，但是有没有办法让它自动连接到旧的 ipad 会话，如果它存在（如果不存在，则创建它）？我的一个警告是，我想在一个命令中自动执行此操作。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-03T15:15:45.277

这些`-D -R`选项将使屏幕在必要时尝试分离或创建。

```
screen -D -R -S ipad 
```

我建议您查看`-d|D -r|-R|-RR`屏幕手册中的所有选项，因为有许多选项具有相似的结果。

```
-d -r
    Reattach a session and if necessary detach it first. 
-d -R
    Reattach a session and if necessary detach or even create it first. 
-d -RR
    Reattach a session and if necessary detach or create it. Use the first session if more than
    one session is available. 
-D -r
    Reattach a session. If necessary detach and logout remotely first. 
-D -R
    Attach here and now. In detail this means: If a session is running, then reattach. If necessary
    detach and logout remotely first. If it was not running create it and notify the user. This is
    the author's favorite. 
-D -RR
    Attach here and now. Whatever that means, just do it. 
    Note: It is always a good idea to check the status of your sessions by means of "screen -list". 
```

# extjs - ExtJS 4“始终在顶部”窗口

> ID：10433925
> 
> 赞同：8
> 
> 时间：2012-05-03T14:54:08.997
> 
> 标签：extjs

我需要实现可以始终位于顶部的 Window。我该怎么做？我对 WindowManager 的所有尝试都没有结果:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T13:33:15.220

在 Ext.window.Window 中，有一个名为“ *modal* ”的属性：将其设置为 true。

否则，请使用**WindowManager**管理您的窗口：在这种情况下，您必须按照以下步骤操作：

1.  **将您的窗口注册**到 WindowManager ( *Ext.WindowManager.register (winId)* )
2.  使用**bringToFront**方法将窗口设置在顶部（*Ext.WindowManager.bringToFront (winId)*）
3.  **最后，使用getActive**方法（*Ext.WindowManager.getActive ()*）检查顶部的元素

例如：

```
Ext.create ('Ext.window.Window', {
  title: 'Your window' ,
  width: 300 ,
  height: 300 ,
  html: 'ciao ciao' ,
  modal: true
}).show (); 
```

或者：

```
var win1 = Ext.create ('Ext.window.Window', {
  title: 'Your window' ,
  id: 'firstWin' ,
  width: 300 ,
  height: 300 ,
  html: 'ciao ciao' ,
});
win1.showAt (50, 50);

var win2 = Ext.create ('Ext.window.Window', {
  title: 'Your window' ,
  id: 'secondWin' ,
  width: 300 ,
  height: 300 ,
  html: 'I love pizza' ,
});
win2.showAt (60, 60);

// Register your floating objects (window in this case) to the WindowManager
Ext.WindowManager.register (win1);
Ext.WindowManager.register (win2);

// Bring 'firstWin' on top
Ext.WindowManager.bringToFront ('firstWin');

// Then, check the zIndexStack
alert (Ext.WindowManager.getActive().getId ()); // this is firstWin, the window with the highest zIndex 
```

希望这对您有所帮助。

恰兹

# android - Android：将实际日期和时间转换为毫秒和其他时区

> ID：10433928
> 
> 赞同：0
> 
> 时间：2012-05-03T14:54:10.470
> 
> 标签：android, time, timezone

我必须将实际日期和时间转换为毫秒并转换为其他时区 GMT+3（我的时区是 GMT-2）。我使用此代码，但它返回我的时间，但进入我的时区....为什么？

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT-3"));
cal.get(Calendar.DAY_OF_MONTH);
cal.get(Calendar.MONTH);
cal.get(Calendar.YEAR);
cal.get(Calendar.HOUR_OF_DAY);
cal.get(Calendar.MINUTE);
cal.get(Calendar.SECOND);
cal.get(Calendar.MILLISECOND);
long timez = cal.getTime().getTime(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:03:03.670

```
Date date = new Date();
  DateFormat firstFormat = new SimpleDateFormat();
  DateFormat secondFormat = new SimpleDateFormat();
  TimeZone firstTime = TimeZone.getTimeZone(args[0]);
  TimeZone secondTime = TimeZone.getTimeZone(args[1]);
  firstFormat.setTimeZone(firstTime);
  secondFormat.setTimeZone(secondTime);
  System.out.println("-->"+args[0]+": " + firstFormat.format(date));
  System.out.println("-->"+args[1]+": " + secondFormat.format(date));
  } 
```

其中 arg[0] 和 arg [1](http://www.roseindia.net/java/javadate/converting-time-time-zone.shtml)是两个时区。参考这个[链接](http://www.roseindia.net/java/javadate/converting-time-time-zone.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:59:16.810

您需要使用 SimpleDateFormat。日历始终使用您机器上默认配置的时区。这是有关如何使用 SimpleDateFormat 实现此功能的[示例。](http://www.javablogging.com/java-simpledateformat-examples/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T14:59:47.543

getTime() 方法返回相同的时间。它与时区无关。

# php - 使用 Factual 的 PHP 错误

> ID：10433932
> 
> 赞同：3
> 
> 时间：2012-05-03T14:54:25.687
> 
> 标签：php, codeigniter, factual

我使用 Codeigniter 作为我的 PHP 框架。当我运行实际 API 时，我得到了结果，但有 PHP 警告。

```
Severity: Warning 

Message: include(/home/bwilson/public_html/factual/CI_DB.php): failed to open stream: No such file or directory 

Filename: factual/Factual.php 

Line Number: 217 

Severity: Warning 

Message: include(): Failed opening '/home/bwilson/public_html/factual/CI_DB.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') 

Filename: factual/Factual.php 

Line Number: 217 
```

我看了一下 factual.php 文件中的第 217 行，它显示：

```
include dirname(__FILE__)."/".$className . ".php"; 
```

指的是什么？我在没有运行 Factual API 和控制器加载查找的情况下对此进行了测试。只有当我开始使用 Factual API 时。

这是我从 Factual 收到的回复：

> 驱动程序使用 SPL 自动加载功能来动态包含已卸载类的文件。
> 
> 在这里，CI_DB 类——一个 Codeigniter 类，而不是 Factual——在没有被加载的情况下被调用。这会在最终尝试加载文件时触发我们的自动加载功能。
> 
> 简而言之：这不是事实驱动程序问题；要解决此问题，请确保正确加载包含 CI_DB 类的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:58:22.367

它只是试图`CI_DB.php`在与`factual.php`.

确保该文件确实存在于它试图找到它的位置。注意文件名是什么大小写。

如果文件确实存在于它应该存在的位置，请检查其权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:23:23.057

查找错误后返回不受支持的模块。`index.php`我只是通过将错误报告设置为生产来禁用文件中的错误报告。同时，只要我的结果相同，我就可以接受。

感谢所有做出贡献的人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T17:21:57.500

你用吗？：

```
require_once BASEPATH . "/{$className}.php"; 
```

# c# - 在 Windows Server 2008 SP2 64 位上使用库时出错

> ID：10433934
> 
> 赞同：0
> 
> 时间：2012-05-03T14:54:31.353
> 
> 标签：c#, 64-bit, fdf

**我使用在32 位**服务器上运行的 fdf 工具包开发了一个应用程序（C# Framework 4） ，一切正常。

我已将此应用程序迁移到 Windows Server 2008 SP2 **64 位**，有时此应用程序会出现此错误：

> System.Runtime.InteropServices.COMException (0x800703FA)：检索具有 CLSID {CB830891-2E18-11D1-B8CF-00A0C9259304} 的组件的 COM 类工厂失败，原因是以下错误：800703fa 尝试对已标记的注册表项进行非法操作用于删除。

在这个错误之后，我回收了网站池并且应用程序再次运行良好。

申请详情：

1.  在 c:\windows\SysWOW64 中注册了库 FDF.dll、FDFACX.dll 和 FDFTK.dll。
2.  在网站池中启用“启用 32 位应用程序”属性
3.  在组策略编辑器中启用“不要在用户注销时强制卸载用户注册表”属性

你可以帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:11:20.957

您构建应用程序的目标平台是什么？它将是 x86、x64、Itanium，或者很可能是“任何 CPU”。

您可以尝试将其设置为 x86，这样您就知道一切都是为使用 .Net 的 32 位版本而构建的。或者，您可以在您的程序集上运行[CorFlags](http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.100%29.aspx)以将其更改为 x86 而无需重新编译。

如果这不能解决问题，那么我们将需要更多代码:)

# html - 如何在标题中将徽标背景 img 和文本居中？

> ID：10433935
> 
> 赞同：2
> 
> 时间：2012-05-03T14:54:34.347
> 
> 标签：html, css

我被一些感觉应该很简单的事情难住了！

我正在尝试将徽标居中在`<header>`. 徽标由`<a>`带有背景图像的徽标组成，锚文本是徽标名称。我将徽标图标居中使用`margin: 0 auto;`，`<h1>`但找不到将图标和文本作为一个单元居中的良好解决方案。

```
<header>
  <h1>
    <a href="#" class="logo">Logo Name</a>
   </h1>
</header> 
```

CSS：

```
header h1 {
  height: 54px;
  width: 54px;
  background: url('../img/logo.png') no-repeat left;
  margin: 0 auto;
}

a.logo {
  font-size: 33px;
  margin: 0 auto;
  display: block;
  padding-top: 20px;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:00:18.297

您可以使用 css 定位背景。

```
background-position:center; 
```

你也可以用像素或百分比来定义它

```
background-position:20px 50px;
background-position:50% 50%; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:00:52.893

我通常这样做：

```
<style>
    .logo{
        margin: 0px auto;
        padding-left: 120px; /* the space between the start of your logo and your text */
        padding-top: 30px; /* the vertical space between the top and your text, to center the logo*/
        display: block; /* very important since normally anchors are inline */
        background: url(path/to/logo.png) top left no-repeat; /* obviously :) */
    }
</style> 
```

它真的不需要在 h1 中。

当你看到结果时，你可能看不到它居中，好吧，测量你的单位，并在上面的 .logo 规则中指定宽度和高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:34:31.663

你把背景网址放在左边它应该是中心

试试这个

```
background: url('../img/logo.png') no-repeat center; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T15:00:16.763

这可能会奏效。

```
<header style="align:center"> 
```

# olap - BigQuery 中有哪些 OLAP 功能？

> ID：10433940
> 
> 赞同：3
> 
> 时间：2012-05-03T14:55:00.247
> 
> 标签：olap, google-bigquery

在 BigQuery 文档中提到它使用 OLAP 函数。但开发人员文档没有提及 MDX 查询语言、维度或事实表。BQ 中有哪些 OLAP 功能（如果有）以及它们如何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:03:54.683

BigQuery 不是传统的 OLAP 系统。与 OLAP 的相似之处在于它能够快速回答多维查询。在传统的 OLAP 系统中没有多维数据集或星形/雪花模式。相反，BigQuery 擅长即席查询，通常是在大型扁平表上。如果您可以分享您的用例，本论坛上的其他人或许可以提出一些最佳做法来使用 BigQuery 实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-22T09:37:14.233

BigQuery 是 OLAP。它是 ROLAP，而不是作为 SSAS 的 MOLAP。具有分析功能的 SQL。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-27T17:29:20.810

我同意安德鲁的观点。没有 OLAP 进程，没有 MDX 或类似的，只有 sql 并且没有集成到谷歌电子表格中！我不认为业务用户会使用大查询作为olap系统，假设它是像DB这样的云访问，那很好

# .net-4.0 - API 更改：Surface 2.0 中的 Affine2DOperationDeltaEventArgs 等效项

> ID：10433941
> 
> 赞同：1
> 
> 时间：2012-05-03T14:55:06.720
> 
> 标签：.net-4.0, pixelsense

我正在将[SurfaceToTUIO](http://johannesluderschmidt.de/lang/de/microsoft-surface-tuio-overlay/895/)软件从 Surface 1.0 移植到 2.0 API。修复了几个错误后，我遇到了以下错误：

```
Error 1 The type or namespace name 'Affine2DOperationDeltaEventArgs' 
could not be found (are you missing a using directive or an assembly 
reference?) App1.cs 82 33 SurfaceToTUIO 
```

我正在检查 2.0 中的 API 更改，但没有对等效类的引用。

该类属于 Microsoft.Surface.Core.Manipulations 命名空间，已被移除并集成到[System.Windows.Input.Manipulations](http://msdn.microsoft.com/en-us/library/system.windows.input.manipulations.aspx)命名空间中。但是，该类似乎已消失或重命名。

有什么帮助或想法吗？

提前谢谢了

# ruby - 转换为 OSGB36（红宝石）

> ID：10433942
> 
> 赞同：0
> 
> 时间：2012-05-03T14:55:11.010
> 
> 标签：ruby, maps

我使用以下代码尝试将 OSGB36 转换为 WGS84，

```
#!/usr/bin/ruby

# Some UK Ordnance Survey coordinate conversions in pure ruby.
#
# WGS84 lat/lons -> OSGB64 lat/lons-> OS Eastings & Northings 

# http://www.movable-type.co.uk/scripts/latlong-convert-coords.html
# (c) Chris Veness 2005-2010  Released under an LGPL license
# http://www.fsf.org/licensing/licenses/lgpl.html
# Ported to ruby by Harry Wood

#ellipse parameters
@e = { :wgs84 =>   { :a=> 6378137,     :b=> 6356752.3142, :f=> 1 / 298.257223563 },
      :airy1830 => { :a=> 6377563.396, :b=> 6356256.910,  :f=> 1 / 299.3249646   } };

#helmert transform parameters
@h = { :wgs84toOSGB36 => { :tx=> -446.448,  :ty=>  125.157,  :tz=> -542.060,  # m
                           :rx=>  -0.1502,  :ry=>   -0.2470, :rz=>  -0.8421,  # sec
                           :s=>   20.4894 },                                  # ppm
       :osgb36toWGS84 => { :tx=>  446.448,  :ty=> -125.157,  :tz=>  542.060,
                           :rx=>    0.1502, :ry=>    0.2470, :rz=>    0.8421,
                           :s=>   -20.4894 } };

def convertOSGB36toWGS84(p1lat, p1lon, p1height) 
   p2 = convert(p1lat, p1lon, p1height, @e[:airy1830], @h[:osgb36toWGS84], @e[:wgs84]);
   return p2;
end

def convertWGS84toOSGB36(p1lat, p1lon, p1height)
   p2 = convert(p1lat, p1lon, p1height, @e[:wgs84], @h[:wgs84toOSGB36], @e[:airy1830]);
   return p2;
end

def convert(p1lat, p1lon, p1height, e1, t, e2)
   # -- convert polar to cartesian coordinates (using ellipse 1)

   p1lat = toRad(p1lat); p1lon = toRad(p1lon); 

   a = e1[:a]; b = e1[:b];

   sinPhi = Math.sin(p1lat); cosPhi = Math.cos(p1lat);
   sinLambda = Math.sin(p1lon); cosLambda = Math.cos(p1lon);
   h = p1height;

   eSq = (a*a - b*b) / (a*a);
   nu = a / Math.sqrt(1 - eSq*sinPhi*sinPhi);

   x1 = (nu+h) * cosPhi * cosLambda;
   y1 = (nu+h) * cosPhi * sinLambda;
   z1 = ((1-eSq)*nu + h) * sinPhi;

   # -- apply helmert transform using appropriate params

   tx = t[:tx]; ty = t[:ty]; tz = t[:tz];
   rx = t[:rx] / 3600 * Math::PI/180;  #normalise seconds to radians
   ry = t[:ry] / 3600 * Math::PI/180;
   rz = t[:rz] / 3600 * Math::PI/180;
   s1 = t[:s] / 1e6 + 1;              #normalise ppm to (s+1)

   #apply transform
   x2 = tx + x1*s1 - y1*rz + z1*ry;
   y2 = ty + x1*rz + y1*s1 - z1*rx;
   z2 = tz - x1*ry + y1*rx + z1*s1;

   # -- convert cartesian to polar coordinates (using ellipse 2)

   a = e2[:a]; b = e2[:b];
   precision = 4 / a;  # results accurate to around 4 metres

   eSq = (a*a - b*b) / (a*a);
   p = Math.sqrt(x2*x2 + y2*y2);
   phi = Math.atan2(z2, p*(1-eSq)); phiP = 2 * Math::PI;
   while ( (phi-phiP).abs > precision) do
      nu = a / Math.sqrt(1 - eSq*Math.sin(phi)*Math.sin(phi));
      phiP = phi;
      phi = Math.atan2(z2 + eSq*nu*Math.sin(phi), p);
   end
   lambda = Math.atan2(y2, x2);
   h = p/Math.cos(phi) - nu;

   #return array [lat,lon,height]
   return [ toDeg(phi), toDeg(lambda), h ]; 
end

# http://www.movable-type.co.uk/scripts/latlong-gridref.html
# (c) Chris Veness 2005-2010  Released under an LGPL license
# http://www.fsf.org/licensing/licenses/lgpl.html
# Ported to ruby by Harry Wood

# OSGB36 lat lon to OS UK grid eastings & northings
def LatLongToOSGrid(lat, long)
   lat = toRad(lat);
   lon = toRad(long);

   a = 6377563.396; b = 6356256.910          # Airy 1830 major & minor semi-axes
   f0 = 0.9996012717                         # NatGrid scale factor on central meridian
   lat0 = toRad(49); lon0 = toRad(-2)        # NatGrid true origin
   n0 = -100000; e0 = 400000;                # northing & easting of true origin, metres
   e2 = 1 - (b*b) / (a*a);                   # eccentricity squared
   n = (a-b) / (a+b); n2 = n*n; n3 = n*n*n;

   cosLat = Math.cos(lat); sinLat = Math.sin(lat);
   nu = a*f0/Math.sqrt(1-e2*sinLat*sinLat);              # transverse radius of curvature
   rho = a*f0*(1-e2) / ( (1-e2*sinLat*sinLat) ** 1.5);  # meridional radius of curvature
   eta2 = nu/rho-1;

   ma = (1 + n + (5/4)*n2 + (5/4)*n3) * (lat-lat0);
   mb = (3*n + 3*n*n + (21/8)*n3) * Math.sin(lat-lat0) * Math.cos(lat+lat0);
   mc = ((15/8)*n2 + (15/8)*n3) * Math.sin(2*(lat-lat0)) * Math.cos(2*(lat+lat0));
   md = (35/24)*n3 * Math.sin(3*(lat-lat0)) * Math.cos(3*(lat+lat0));
   m = b * f0 * (ma - mb + mc - md);              # meridional arc

   cos3lat = cosLat*cosLat*cosLat;
   cos5lat = cos3lat*cosLat*cosLat;
   tan2lat = Math.tan(lat)*Math.tan(lat);
   tan4lat = tan2lat*tan2lat;

   i = m + n0;
   ii = (nu/2)*sinLat*cosLat;
   iii = (nu/24)*sinLat*cos3lat*(5-tan2lat+9*eta2);
   iiiA = (nu/720)*sinLat*cos5lat*(61-58*tan2lat+tan4lat);
   iv = nu*cosLat;
   v = (nu/6)*cos3lat*(nu/rho-tan2lat);
   vi = (nu/120) * cos5lat * (5 - 18*tan2lat + tan4lat + 14*eta2 - 58*tan2lat*eta2);

   dLon = lon-lon0;
   dLon2 = dLon*dLon
   dLon3 = dLon2*dLon
   dLon4 = dLon3*dLon
   dLon5 = dLon4*dLon
   dLon6 = dLon5*dLon

   n = i + ii*dLon2 + iii*dLon4 + iiiA*dLon6;
   e = e0 + iv*dLon + v*dLon3 + vi*dLon5;

   return [ e, n ]   #return raw easting and northings instead

   #return gridrefNumToLet( e, n, 8) 
end

def toRad(degrees)
   return degrees * Math::PI / 180;
end

def toDeg(rads)
   return rads * 180 / Math::PI 
end

#convert numeric grid reference (in metres) to standard-form grid ref
def gridrefNumToLet(e, n, digits) 
   #get the 100km-grid indices
   e100k = (e / 100000).floor; n100k = (n / 100000).floor;

   return '' if (e100k<0 or e100k>6 or n100k<0 or n100k>12)

   #translate those into numeric equivalents of the grid letters
   l1 = (19-n100k) - (19-n100k) % 5 + ((e100k+10) / 5).floor;
   l2 = (19-n100k) * 5 % 25 + e100k % 5;

   # compensate for skipped 'I' and build grid letter-pairs         
   l1=l1+1 if (l1 > 7)
   l2=l2+1 if (l2 > 7) 
   letPair =  (l1 +'A'[0]).chr +  (l2 +'A'[0]).chr ;

   # strip 100km-grid indices from easting & northing, and reduce precision
   e = ( (e % 100000) / (10 ** (5 - digits / 2)) ).floor;
   n = ( (n % 100000) / (10 ** (5 - digits / 2)) ).floor;

   gridRef = letPair + e.to_s.rjust(digits / 2) + n.to_s.rjust(digits / 2)

   return gridRef;
end

# Example WGS84 lat/lon to convert
lon = -0.10322
lat = 51.52237
height = 0

osgb36point = convertWGS84toOSGB36(lat,lon, height)
oslat = osgb36point[0]
oslon = osgb36point[1]
osh = osgb36point[2]

osUKgridPoint = LatLongToOSGrid(oslat,oslon)
easting  = osUKgridPoint[0].round
northing = osUKgridPoint[1].round

gridrefLetters = gridrefNumToLet(easting,northing, 8)

puts "wgs84 lat:" + lat.to_s + ", wgs84 lon:" + lon.to_s
puts "http://www.openstreetmap.org/?mlat=" + lat.to_s + "&mlon=" + lon.to_s + "&zoom=16"
puts "Converts to:";
puts "osgb36 lat:" + oslat.to_s + ", osgb36 lon:" + oslon.to_s
puts "Converts to:";
puts "easting:" + easting.to_s + ", northing:" + northing.to_s + "  As a grid ref:" + gridrefLetters
puts "http://streetmap.co.uk/grid/" + easting.to_s + "_" + northing.to_s + "_106" 
```

我似乎无法让它工作，有人可以给我一个使用 OSGB36toWGS84 方法的示例方法。它确实运行（在我编辑的那个上），但是输出不正确。

我的代码：

```
lon =  521490
lat =  192263
height = 0

osgb36point = convertOSGB36toWGS84(lat,lon, height)
oslat = osgb36point[0]
oslon = osgb36point[1]
osh = osgb36point[2]

osUKgridPoint = LatLongToOSGrid(oslat,oslon)
easting  = osUKgridPoint[0].round
northing = osUKgridPoint[1].round 
```

输出：

```
wgs84 lat:192263, wgs84 lon:521490
Converts to:
osgb36 lat:23.00619802206627, osgb36 lon:-149.99650128215052
Converts to:
easting:-33856949, northing:56599846 
```

下面是博客条目（参见纯 ruby​​ 实现部分） [http://www.harrywood.co.uk/blog/category/maps/page/2/](http://www.harrywood.co.uk/blog/category/maps/page/2/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:55:54.990

从博客文章中，您似乎正在使用不会改变的地理数据（管线的位置），因此提前进行一次转换似乎更有意义，而不是 on-苍蝇。这意味着您可以使用 ogr2ogr 并完全避免编写转换例程： [http ://www.mercatorgeosystems.com/blog-articles/2008/05/30/using-ogr2ogr-to-re-project-a-shape-file /](http://www.mercatorgeosystems.com/blog-articles/2008/05/30/using-ogr2ogr-to-re-project-a-shape-file/)

# javascript - 任何现有的 JavaScript 执行上下文可视化工具？

> ID：10433947
> 
> 赞同：2
> 
> 时间：2012-05-03T14:55:25.173
> 
> 标签：javascript

我想知道是否已经存在这样的工具：

1.  解析 JS 代码（不期望大块）
2.  可视化执行上下文/范围链，甚至原型链。

动机仅仅是因为 JS 执行上下文，作用域链通常令人困惑，尤其是对于非高级人员。可视化可以使事情更好地理解。

否则，您能否对从头开始构建有一些建议。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-05T14:52:55.387

我最近在 youtube 上看到了一个视频[JS-Visualizer 先睹为快演示](https://www.youtube.com/watch?v=tPyNIWm47-4)。但是我找不到任何在线链接或 github repo 来试验它。我已经为作者留下了一条 youtube 评论，以提供一些访问该工具的链接。可能更多的反馈和评论给作者会鼓励他这样做。

# ruby-on-rails - 使用 RJS 从下拉列表中选择一个选项

> ID：10433948
> 
> 赞同：0
> 
> 时间：2012-05-03T14:55:27.123
> 
> 标签：ruby-on-rails, rjs

使用 RJS：

`page[:greeting].replace_html 'Hello World!'`用 'Hello World' 替换 'greeting' 字段中的文本。

我有一个下拉列表，想使用 rjs 选择具有特定 ID 的选项。

我的问题如何使用 rjs 从 ID 为“sub_book”的下拉列表中选择一个选项。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:04:49.653

尝试

```
<select id="sub_book">
  <option value="1">First</option>
  <option value="2">Second</option>
  <option value="3">Third</option>
  <option value="4">Fourth</option>
</select>

<script type="text/javascript"> 
$(document).ready(function() {
    $("#sub_book").val(3);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:11:18.890

这是我使用的解决方案：

`page["sub_book"].selectedIndex = 5`//在这种情况下，我选择 id 为 5 的选项

希望它可能对其他人有帮助

# php - 谁能告诉我为什么没有在下面的 php 代码中执行查询？

> ID：10433950
> 
> 赞同：0
> 
> 时间：2012-05-03T14:55:27.723
> 
> 标签：php, mysql

```
<html>
  <head>
    <title>
      Welcome
    </title>
  </head>
  <body>
    <?php
$fn=$_POST['f_name'];
$ln=$_POST['l_name'];
$gen=$_POST['sex'];
$dob=$_POST['dob'];
$em=$_POST['email'];
$un=$_POST['u_name'];
$pd=$_POST['pswd'];
$mb=$_POST['mob'];
$con=mysqli_connect('localhost','username','password','db')
   or die("Error connecting to database");
$query="INSERT INTO user_details(First_Name, Last_Name, Gender, DOB, Email_Address,
Username, Password, Mobile_No) VALUES                   
('$fn','$ln','$gen','$dob','$em','$un',SHA('$pd'),'$mb')";
echo $gen;
$result=mysqli_query($con,$query) 
  or die("Error querying the database");

mysqli_close($con);
$name=$fn.' '.$ln;
echo "<b>Welcome $name</b>";
    ?>
  </body>
</html> 
```

我在这段代码中试图做的是从 HTML 表单中获取数据并将其存储到 MYSQL 数据库中。我什至彻底检查了我的数据库是否存在任何类型冲突或任何数据类型长度问题，但我仍然没有得到它。我不知道它为什么显示 >> 查询数据库时出错？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:59:44.413

改变

```
$result=mysqli_query($con,$query) 
  or die("Error querying the database"); 
```

到

```
$result=mysqli_query($con,$query) 
  or die($mysqli->error); 
```

这将为您提供来自服务器的确切错误消息。[文档在这里](http://www.php.net/manual/en/mysqli.error.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:59:40.007

首先，您应该在 mysqli 中使用准备好的语句。这很简单。

其次，你应该使用`...or die($mysqli->error)`来查看错误信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:05:20.863

来自有线索的人的正确代码，以防查询失败

```
$result = mysqli_query($con,$query) 
  or trigger_error(mysqli_error($con)." ".$query); 
```

# zooming - d3.js 缩放 xScale / xAxis

> ID：10433951
> 
> 赞同：3
> 
> 时间：2012-05-03T14:55:33.910
> 
> 标签：zooming, d3.js

我正在尝试创建一个允许缩放功能的简单图表，到目前为止我发现的示例手动生成轴和刻度：http: [//bl.ocks.org/1182434](http://bl.ocks.org/1182434)

然而，我使用的是内置的轴对象，我不知道如何转换比例以使其工作 - 有什么想法吗？

```
var xScale = d3.scale.linear().
    domain([0, 80]). // your data minimum and maximum
    range([0, width]); // the pixels to map to, e.g., the width of the diagram.

var yScale = d3.scale.linear().
    domain([100, 0]). 
    range([0, height]); 

var xAxis = d3.svg.axis().orient("bottom").scale(xScale).ticks(10, d3.format(",d")),
    yAxis = d3.svg.axis().orient("left").scale(yScale);

var chart = d3.select("#chart").append("svg")
    .attr("class", "chart")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .attr("pointer-events", "all")
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.behavior.zoom().on("zoom", redraw))
    .append("g")

chart.append('svg:rect')
    .attr('width', width)
    .attr('height', height)
    .attr('fill', 'white');

// x-axis
var xaxis = chart.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

// y-axis
var yaxis = chart.append("g")
    .attr("class", "y axis")
    .call(yAxis);

// omitted code to draw the path, it's just a path object that uses a line and passes data to it

function redraw() 
{
    console.log("here", d3.event.translate, d3.event.scale);
    path.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");

    // d3.event.transform(xScale, yScale);
    // HERE is where I need to figure out how to scale the x and y axes!    

    xAxis.scale(xScale);
    yAxis.scale(yScale);

    xaxis.call(xAxis);
    yaxis.call(yAxis);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:54:02.630

You can check out a chart that I did that includes zoom functionality by using a separate graph, the same thing would work to zoom in on the existing graph. The chart is available at [http://bl.ocks.org/1962173](http://bl.ocks.org/1962173).

Here's the way that I zoom:

```
var rects, labels
  , minExtent = d3.time.day(brush.extent()[0])
  , maxExtent = d3.time.day(brush.extent()[1])
  , visItems = items.filter(function (d) { return d.start < maxExtent && d.end > minExtent});

mini.select('.brush').call(brush.extent([minExtent, maxExtent]));       

    // modify the domain (this is what actually does the 'zoom')
x1.domain([minExtent, maxExtent]);

// then redraw the updated axis which are based on the modified domain
main.select('.main.axis.date').call(x1DateAxis);
main.select('.main.axis.month').call(x1MonthAxis)
    .selectAll('text')
        .attr('dx', 5)
        .attr('dy', 12);

// upate the item rects that are visible
rects = itemRects.selectAll('rect')
    .data(visItems, function (d) { return d.id; })
    .attr('x', function(d) { return x1(d.start); })
    .attr('width', function(d) { return x1(d.end) - x1(d.start); });

    // append any new data that is now in view
rects.enter().append('rect')
    .attr('x', function(d) { return x1(d.start); })
    .attr('y', function(d) { return y1(d.lane) + .1 * y1(1) + 0.5; })
    .attr('width', function(d) { return x1(d.end) - x1(d.start); })
    .attr('height', function(d) { return .8 * y1(1); })
    .attr('class', function(d) { return 'mainItem ' + d.class; });

    // remove any data that is no longer in view
rects.exit().remove(); 
```

All of the code is available at the link I provided above.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:12:51.270

好吧，如果有人感兴趣，这就是我最终这样做的方式：

```
function redraw() 
{

    console.log("here", d3.event.translate, d3.event.scale);
    path.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");     

    var xoffset = (xMax + xMin) / 2;
    var yoffset = (yMax + yMin) / 2;

    var xTemp = [(0 - xoffset) * (1/d3.event.scale), (0 + xoffset) * (1/d3.event.scale)];
    var yTemp = [(0 - yoffset) * (1/d3.event.scale), (0 + yoffset) * (1/d3.event.scale)];

    xMin = xTemp[0] + xoffset;
    xMax = xTemp[1] + xoffset;
    yMin = yTemp[0] + yoffset;
    yMax = yTemp[1] + yoffset;

    console.log("", xMin, xMax, yMin, yMax);

    xScale.domain([xMin, xMax]);
    yScale.domain([yMax, yMin]);

    xaxis.call(xAxis);
    yaxis.call(yAxis);

    path.attr("d", line)
        .attr("transform", null)
        .transition()       
        .ease("linear")     
        ;
} 
```

请注意，我还必须设置比例限制：

```
var chart = d3.select("#chart").append("svg")
.attr("class", "chart")
.attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
.attr("pointer-events", "all")
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
.call(d3.behavior.zoom().scaleExtent([0.2, 5]).on("zoom", redraw))
.append("g"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T23:01:01.333

您可以将图表附加到敏感事件区域（必须是最后一个附加）：

```
var rect = svg.append("svg:rect")
    .attr("class", "pane")
    .attr("width", w)
    .attr("height", h); 
```

之后（不包括）在此区域添加事件管理

```
rect.call(d3.behavior.zoom().x(x).scaleExtent([0.5, 4]).on("zoom", draw)); 
```

添加绘图功能，例如

```
function draw() {
    svg.select("g.x.axis").call(xAxis);
    svg.select("g.y.axis").call(yAxis);
    svg.select("path.area").attr("d", area);
    svg.select("path.line").attr("d", line);
} 
```

看到这个例子：[https ://groups.google.com/forum/?fromgroups=#!topic/d3-js/6p7Lbnz-jRQ%5B1-25-false%5D](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/6p7Lbnz-jRQ%5B1-25-false%5D)

# javascript - 如何找到 id 元素的文本值？

> ID：10433952
> 
> 赞同：-1
> 
> 时间：2012-05-03T14:55:45.583
> 
> 标签：javascript, jquery

我正在尝试禁用提交按钮，直到返回用户名和电子邮件检查这可行，但我不希望它继续并在出现错误时显示提交按钮。即用户名/电子邮件已经存在！

我一直在尝试从表单中的 id="livesearchEmail" 检索我的错误值。如果它清楚即没有错误，那么我希望按钮变为活动状态！我所拥有的看起来很直截了当，但它不起作用！我错过了什么？

我整天都在尝试从#livesearchEmail 返回一个值，但无济于事。

任何帮助或正确方向的点都将被感激地接受！

```
<div id="livesearchEmail" class="livesearchEmail"></div>

<script type="text/javascript">  
    $(document).ready(function() {    
        $('input[id="registerButton"]').attr('disabled','disabled');
        $('input[type="text"]').keyup(function() {
        if ($('#user_name').val() != "" && $('#email').val() != "") {
            if ($("#livesearchEmail") == ''){
                $('input[id="registerButton"]').removeAttr('disabled');
            }
        }
        });        
    });​​
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:10:51.747

假设您尝试获取的数据位于 DOM 元素（如 <div>）而不是表单元素中，您可以这样做：
`if ($("#livesearchEmail")[0].innerHTML === '')`

或者如果想保留它 jQuery 我认为你可以使用 text() 函数：
`if ($("#livesearchEmail").text() === '')`

另外，请注意我使用三等号来防止错误的评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:14:19.143

[**jQuery ID 选择器（“#id”）**](http://api.jquery.com/id-selector/)

因为 ID 是唯一的，所以您不需要使用标签和所有东西构造一个特殊的选择器。例如，您可以简单地将 this: 转换`$('input[id="registerButton"]')`为 this: `$("#registerButton")`。

我不太确定您为什么要检查是否没有返回错误，因为如果您检查该按钮将永远不会激活。但是，根据您的要求，此 jQuery 代码将为您工作：

```
$(document).ready(function() {    
    $("#registerButton").attr('disabled','disabled');
    $('input[type="text"]').keyup(function() {
    if ($('#user_name').val() && $('#email').val() && (!$("#livesearchEmail").length || !$("#livesearchEmail").text())) {
        $("#registerButton").removeAttr('disabled');
    }
    });        
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:57:22.100

尝试使用 `$("#livesearchEmail").text();`

* * *

**编辑 - 添加代码**

```
$(document).ready(function() {  
     $('input[id="registerButton"]').attr('disabled','disabled');
     $('input[type="text"]').keyup(function() {
        if($('#user_name').val() != "" && $('#email').val() != ""){
            if ($("#livesearchEmail").text() == ""){
                $('input[id="registerButton"]').removeAttr('disabled');
            }
        }
     });  
 }); 
```

# xcode - 在 ios 5 中搜索后触发呼叫气泡

> ID：10433957
> 
> 赞同：0
> 
> 时间：2012-05-03T14:56:07.287
> 
> 标签：xcode, ios5, mkmapview, mapkit, mkannotation

我的视图中有一个搜索栏，用户可以使用它来输入关键字并根据该关键字进行搜索。我为此使用 uisearchbar 委托。现在地图正在搜索关键字的中心，但我也想显示与此相关的调用。我有 lat long 和 title，我认为这很有用。这是代码：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar{
     NSLog(@"text %@",searchBar.text);
    NSEnumerator *enumerator = [res objectEnumerator];
    id obj;
    NSString *stringToSearchFor = [searchBar text];
    stringToSearchFor= [stringToSearchFor lowercaseString];
    NSString *searchInThisString = @"";
    while(obj = [enumerator nextObject]){
        searchInThisString = [obj title];
        searchInThisString = [searchInThisString stringByAppendingString:@" "];
        searchInThisString = [searchInThisString stringByAppendingString:[obj address]];
        searchInThisString = [searchInThisString lowercaseString];
        if([searchInThisString rangeOfString:stringToSearchFor].location == NSNotFound ){
            NSLog(@"not found ");
            continue;
        }else{
            NSLog(@"found");

            NSString *lat = [obj latitude];
            NSString *longi = [obj longitude];
            MKCoordinateRegion region = self.gpMapView.region;
            region.center.latitude = [lat doubleValue];
            region.center.longitude = [longi doubleValue];
            id<MKAnnotation> myAnnotation = [self.gpMapView.annotations objectAtIndex:0];
            MKAnnotationView *mkv = [[MKAnnotationView alloc]init];
            [mkv setSelected:YES];
            [self.gpMapView selectAnnotation:myAnnotation animated:YES];
            [self.gpMapView setRegion:region animated:YES];

            break;
        }
    } 
```

请问我怎样才能触发标注气泡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:53:05.367

我确定您已经解决了这个问题，但以防万一……根据 Apple 文档，SelectAnnotation 仅在 pin 已经在屏幕上可见时才有效。

> MKMapView 类参考 > SelectAnnotation 如果指定的注释不在屏幕上，因此没有关联的注释视图，则此方法无效。

# iphone - 如何控制UITabBar

> ID：10433966
> 
> 赞同：1
> 
> 时间：2012-05-03T14:56:38.550
> 
> 标签：iphone, objective-c, xcode, storyboard, uitabbar

我在内容中间创建了 UITabBar（项目：信息、位置和描述），现在我想为标签栏设置自定义背景图像，默认选择第一个按钮并在用户选择另一个标签栏项目时获取操作。

这是标签栏的ss：http: [//dl.dropbox.com/u/77033905/tabBar%20in%20the%20middle.png](http://dl.dropbox.com/u/77033905/tabBar%20in%20the%20middle.png)

告诉我请回答这个问题：

1.  如何为这个标签栏设置自定义背景图像？
2.  如何获得选定的项目？
3.  如何默认选择第一项？

现在我已经创建了 UITabBar 并包含在这个 ViewController 中，下一步是什么？

这是 ViewController.h：

```
@interface ViewController : UIViewController<UITabBarDelegate> {
    UITabBar *tabBar;
}
@property (strong, nonatomic) IBOutlet UITabBar *tabBar;
... 
```

视图.m：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation OfferViewController

@synthesize tabBar;
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *selectedImage0 = [UIImage imageNamed:@"HomeDB.png"];
    UIImage *unselectedImage0 = [UIImage imageNamed:@"HomeLB.png"];

    UIImage *selectedImage1 = [UIImage imageNamed:@"ScheduleDB.png"];
    UIImage *unselectedImage1 = [UIImage imageNamed:@"ScheduleLB.png"];

    UIImage *selectedImage2 = [UIImage imageNamed:@"BuildingsDB.png"];
    UIImage *unselectedImage2 = [UIImage imageNamed:@"BuildingsLB.png"];

    //UITabBar *tabBar = self.tabBar;
    UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
    UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
    UITabBarItem *item2 = [tabBar.items objectAtIndex:2];

    [item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
    [item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
    [item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2];

    [super viewDidLoad];
}
... 
```

我现在如何默认选择项目并获取用户在某些标签栏项目上的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:00:34.553

这是我使用的链接：[自定义标签栏](http://kurrytran.blogspot.com/2011/10/ios-5-tutorial-creating-custom-tab-bar.html)

我希望这可以帮助你 ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:22:56.790

链接@iremk给你的第5步是你必须做的自定义你的标签栏，即使它不受 AppDelegate 控制：只要你在你的 viewController 或其他东西上有一个引用，你可以使用方法/属性UITabBar 类。

顺便说一句，如果“自定义”只是指在项目上设置图标，并保持标签栏的灰色样式，则可以`Image`在 InterfaceBuilder 中设置项目的属性。

对于步骤 2 和 3，只需查看 UITabBar 和 UITabBarDelegate 文档：

*   [选择一个项目](http://developer.apple.com/library/ios/documentation/uikit/reference/UITabBar_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBar/selectedItem)
*   [对项目选择做出反应](http://developer.apple.com/library/ios/documentation/uikit/reference/UITabBarDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITabBarDelegate/tabBar%3adidSelectItem%3a)

# javascript - Jquery 不会选择 JQuery 验证插件的动态创建的错误元素

> ID：10433968
> 
> 赞同：0
> 
> 时间：2012-05-03T14:56:42.617
> 
> 标签：javascript, jquery, html

基本上，当使用 Jquery Validate 插件时，它会创建一个错误元素（在本例中为 div ）。我遇到的问题是，一旦创建了这些元素， .each() 函数将不会选择任何新元素。

jQuery

```
 $('#section_1_form').validate({
        debug: true,
        errorElement: "div",
        errorClass: "form_error",
        invalidHandler: function(form, validator) {
            var errors = validator.numberOfInvalids();
            $("div.form_error").each(function(){
                alert($(this));
            });
        }
    }); 
```

由 jquery validate 创建的示例元素

```
 <div for="sector" generated="true" class="form_error">This field is required.</div> 
```

# crystal-reports - 通过省略隐藏的记录在报表页脚中创建摘要

> ID：10433969
> 
> 赞同：0
> 
> 时间：2012-05-03T14:56:44.850
> 
> 标签：crystal-reports, crystal-reports-2008

我在报告中有一个组标题部分，它显示来自名为 Personal 的公式字段的汇总，

```
if not IsNull({AirBilling.BillingCode}) and {AirBilling.BillingCode} = 'P' then
    {AirBilling.Gross}
else
    0 
```

现在，在报告页脚的报告末尾，我显示了在组标题部分中计算的所有个人总计的汇总总计。现在我有一个过滤某些记录的子报表，根据子报表返回的计数，我在主报表中隐藏记录。我的问题是，我的主要报告也在页脚总数中考虑了被抑制记录的计数。当我尝试在上面的公式字段逻辑中放置一个条件时，如果 RowCount>0 则..（如果不是 IsNull..），但是当我尝试运行报告时，它给了我一个错误，上面写着“摘要有在非经常性字段上指定'。有没有办法可以省略要在页脚部分计算的抑制记录。RowCount 是子报表返回的共享变量值，我用它来过滤主报表中的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:51:32.500

Would it be possible to have another field, kept hidden, that ran a formula to determine if the row was suppressed or not. Based on that it shows a 0 or 1\. Then you can tally that field for your row count.

Alternatively you could build that subreport off a stored procedure that generates a column that has already done the legwork for you. Then you can just use the data column it returns to assist with this problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:44:17.140

据我了解，您正在尝试运行子报表以确定是否应排除主报表中的某些行（包括显示和总计）。您可以使用两种方法来解决此问题：

*   在主报表的查询/存储过程中复制子报表中的逻辑，以便相关记录在到达 Crystal 之前被排除。不需要子报告。
*   交换子报表和主报表（假设当前子报表中不需要来自当前主报表的数据，除了用户输入的参数）并将当前主报表中的相关数据传递给什么已成为子报表，作为参数。

我推荐前一种方法，因为 Crystal 作为格式化数据的工具比操作数据更好 - SQL 通常是一个更好的数据操作工具。

# c++ - 寻找低影响的 C++ 探查器

> ID：10433971
> 
> 赞同：10
> 
> 时间：2012-05-03T14:56:45.813
> 
> 标签：c++, performance, profiling

我正在为 c++ 代码寻找一种低影响、独立于操作系统的分析器。

当我说低影响时，我指的是比 valgrind 更少侵入性的东西。我计划在基于 MIPS 的嵌入式环境中使用它（因此是操作系统独立性）并尝试了 valgrind 的移植版本，它完全改变了性能特征（工作中的海森堡原理太多了），所以我不能走那条路。我们知道内存总线速度是一个瓶颈，这很可能解释了为什么 valgrind 如此具有侵入性。

我创建了一种基于检查点的本地分析器类型，可以让我测量代码的某些部分。基本上我必须修改代码（并重新编译）以在代码的战略位置设置检查点。然后，在执行时，它会存储每个检查点被命中的次数以及自最后一个检查点被命中以来的时间。然后，在运行它之后，我可以转储检查点并为每个它计算：num-hits、max-time、min-time、avg-time 等。

这个分析器（我称之为 LowImpactProfiler）工作正常，但我想知道那里是否有更好的东西。

我考虑过 oProfile，它是一个采样分析器，但由于我没有运行 Linux，我认为它很难实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T14:59:37.563

我已经使用[Shiny](http://code.google.com/p/shinyprofiler/)在非常有限的嵌入式设备上进行了分析，并取得了巨大的成功。根据您的描述，它采用与 LowImpactProfiler 类似的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:54:49.583

如果您使用的是 Windows，您可以尝试我的分析器，此处描述为[http://ravenspoint.wordpress.com/2010/06/16/timing/](http://ravenspoint.wordpress.com/2010/06/16/timing/)

听起来它可能比你的更容易使用，但它不是独立于操作系统的。它使用对 Windows API 的 QueryPerformanceCounter() 的调用。它是开源的，因此使用那里可用的任何高性能计时器将其移植到您的操作系统可能是值得的。

# php - 在 PHP 中将 mm/yyyy 转换为 mmyy

> ID：10433972
> 
> 赞同：1
> 
> 时间：2012-05-03T14:56:46.517
> 
> 标签：php, date

如果这是重复的，我很抱歉，但我确实寻找答案无济于事。

我有个约会。这是一个对象，我已将其转换为字符串：

```
$exp = (string)$date; 
```

此变量显示为：`10/2013`

但是当我尝试将 mm/yyyy 格式转换为 mmyy 时，使用以下代码：

```
$ex = date($exp);
$e = date('m Y',$ex); 
```

...我不仅收到以下错误通知：

```
Notice: A non well formed numeric value encountered in ... 
```

...但我的日期也更改为：（`1269`如 1969 年 12 月 [嗯？]）

我究竟做错了什么？

-鲍勃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:11:38.803

```
$date = substr_replace($date,' ',2,3); 
```

不知道为什么你需要这么奇怪的格式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:06:44.383

该[`date()`](http://php.net/date)函数接受 Unix 时间戳作为其第二个参数。如果它不将其识别为数字，则可以将其视为`0`（表示时代，1969 年 12 月 31 日）。要创建时间戳，我认为您的意思是

```
$ex = strtotime($exp); 
```

代替

```
$ex = date($exp); 
```

但即便如此，'10/2013' 也不是`strtotime()`.

您可以像这样从旧日期格式创建时间戳：

```
$exp = '10/2013';
$date = explode('/', $exp);
$ex = mktime(0, 0, 0, $date[0], 1, $date[1]);
$e = date('m Y',$ex); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:06:04.330

从一个不完整的日期开始，`10/2013`您需要进行一些字符串操作才能将其放入`mmyy`. 如果您实际上不需要时间戳输出，则根本不需要将其转换为任何类型的日期对象或时间戳。您只能进行字符串操作。

```
list($month, $year) = explode("/", $date);
$newdate = $month . substr($year, 2);
// 1013 
```

**编辑（来自评论）**：如果月份并不总是两位数，但您的输出需要 2 位数的月份，请使用：

```
$newdate = str_pad($month, 2, "0", STR_PAD_LEFT) . substr($year, 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T15:11:14.890

您应该能够直接转换 $date 字段：

```
 $e = date('m/Y', strtotime($date)); 
```

如果没有，那么这应该工作

```
 $e = date('m/Y', strtotime(((string)$date))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T15:15:43.310

`$exp = date("my");`

其中`my`表示“月”“年”。

# perl - 如何从具有多个根的多个列表中生成有序的父子元素列表？

> ID：10433977
> 
> 赞同：1
> 
> 时间：2012-05-03T14:57:02.787
> 
> 标签：perl, list, parent-child

我最近在这里问了一个问题，并得到了一些非常优雅的答案。这里是：

访问[如何从多个列表中生成一个有序的父子元素列表？](https://stackoverflow.com/questions/10320398/how-to-generate-an-ordered-list-of-parent-child-elements-from-multiple-lists)

我有一个类似的问题，其中可以有多个根，这意味着有单独的树。这是一个示例（在 perl 中）；

```
my @rules = (
  [ qw( A B C ) ],
  [ qw( B D E ) ],
  [ qw( C H G ) ],
  [ qw( G H   ) ],
  [ qw( Z C   ) ]
); 
```

在列表列表中`@rules`，A 是 B 和 C 的父元素。通常，第一个元素是列表中其余元素的父元素。

我想处理这组数组，并生成一个包含正确顺序的列表。在这里，A 和 Z 必须在其他元素之前（A 和 Z 的顺序并不重要，因为它们是独立的）。以下是两个示例解决方案：

```
(A,Z,B,C,D,E,F,G,H), or (Z,A,B,D,E,F,C,G,H) 
```

**重要提示：**查看数组编号 3；H 在 G 之前，即使它是第四个数组中 G 的子元素。因此，每个数组中没有特定的子元素顺序，但在最终结果中（如上所示）必须在子元素/人之前有任何父元素。

![这里，A 和 H 相互独立，但使用公共节点。](../Images/0cf3641eaa1f2f5cd67c5d9a63f87d59.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:50:23.800

这个怎么样？不过，这很简单。

```
my @rules = (
  [ qw( A B C ) ],
  [ qw( B D E F ) ],
  [ qw( C H G ) ],
  [ qw( G H   ) ],
  [ qw( Z C   ) ]
);

my %weight_for;
for (@rules) {
  my ($parent, @children) = @{$_};
  $weight_for{$_}++ for ($parent, @children);
  $weight_for{$_} += $weight_for{$parent} 
    for @children; 
}

print "$_ = $weight_for{$_}\n" 
  for sort { $weight_for{$a} <=> $weight_for{$b} } keys %weight_for; 
```

# android - 使用 Eclipse 测试 PhoneGap 应用程序时不断收到“发生网络错误”

> ID：10433978
> 
> 赞同：2
> 
> 时间：2012-05-03T14:57:03.290
> 
> 标签：android, eclipse, cordova

我刚刚从分包商那里收到了 PhoneGap 解决方案，以便在发布前在我的手机上进行测试。

我将项目导入 Eclipse，一切看起来都很好。

我可以通过打开 index.html 文件在我的计算机上本地测试应用程序：

```
file://E:/AppDevelopment/Workspace/myproject/assets/www/index.html 
```

到现在为止还挺好。然后我尝试在我的手机上启动它（通过 USB 电缆）。首页打开，但缺少 CSS。当我单击任何链接时，我会收到以下消息：

```
"A network error occurred. (file:///android_asset/www/car.html?carID=106" 
```

有没有人遇到过类似的问题？关于如何调试错误的任何建议？

**更新**

按照 Dmyto 的建议，我正在尝试更改 onReceivedError。但我只会遇到编码错误。

```
package com.phonegap.mysite;

import android.os.Bundle;
import org.apache.cordova.*;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class Mysiteextends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

    }

/** This is where it goes wrong **/

    WebView webview = new WebView(this);

    webview.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Log.i("WEB_VIEW_TEST", "error code:" + errorCode);
                super.onReceivedError(view, errorCode, description, failingUrl);
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:23:20.127

如果没有看到您的`index.html`代码，很难判断您是否正确引用了您的 css 文件。另外，那个 url:`file:///android_asset/www/car.html=carID=106`似乎无效？是什么`=carID=106`？正确的 URL 应该是`?carID=106`. 但是等等，Android 上有一个错误，即无法正确读取 url 参数。

这是Android上的一个错误。你应该去给它加星标：

```
https://code.google.com/p/android/issues/detail?id=17535 
```

同时使用`localStorage.setItem()`/`getItem()`在页面之间传递值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:02:45.420

您可以将[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)设置为您的 Web 视图和 ovveride`onReceivedError`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T18:34:06.730

您可能需要使用 IceCreamCordovaWebViewClient

```
@Override
    public void init() {
    super.init(webView, new IceCreamCordovaWebViewClient(this, webView), new CordovaChromeClient(this, webView));
} 
```

# ruby-on-rails - 结合简单搜索、will_paginate 和排序

> ID：10433980
> 
> 赞同：0
> 
> 时间：2012-05-03T14:57:10.327
> 
> 标签：ruby-on-rails, will-paginate

您好，我将一个简单的搜索工具与 will_paginate 分页相结合，基于各自的优秀 RailsCasts 教程。

代码（在模型中）如下所示，

```
def search(search, page)

  # See RailsCasts #37 Simple Search Form & #51 will_paginate

  if search
    @matches = SalesActivity.where('salespeople.name LIKE ? OR products.name LIKE ?',
                                      "%#{search}%", "%#{search}%")

    @matches.paginate :per_page => 30,
                      :page => page,
                      :order => 'created_at DESC' # <--- causes exception
  else
    paginate :include => [:salesperson, :product],
             :order => 'created_at DESC',  # works 
             :per_page => 30,
             :page => page
  end
end 
```

指定的排序在没有搜索的路径上的分页请求中工作正常。

但是，在使用搜索结果 (@matches) 的路径上，出现以下错误，

```
SQLite3::SQLException: ambiguous column name: created_at: SELECT ...  ORDER BY created_at DESC LIMIT 30 OFFSET 
```

如果我删除 order 参数，它工作正常。

我很感激有关如何解决此问题的建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:38:02.387

这两个铁轨铸件都很旧，我会查看它们的来源，以确保它们的轨道 2 和 3 之间没有重大变化

还要仔细检查您是否在迁移过程中生成了 created_at。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:28:10.243

此处的解决方法是将“all”添加到“where”请求的末尾，以根据 Active Record Query 协议启动实际查询以加载数据。

```
@matches = SalesActivity.where('salespeople.name LIKE ? OR products.name LIKE ?',
                                  "%#{search}%", "%#{search}%").all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T15:00:08.393

```
@matches.paginate(:per_page => 30,:page => page).order('created_at DESC') 
```

# linux - 为什么 C99 抱怨存储大小？

> ID：10433982
> 
> 赞同：14
> 
> 时间：2012-05-03T14:57:18.907
> 
> 标签：linux, gcc, network-programming, c99, gnu99

这是我在 Linux 上编译的一些代码：

```
#include <net/if.h>

int main() {
  struct ifreq ifr;
} 
```

`gcc test.c`很好。

`gcc -std=gnu99 test.c`很好。

`gcc -std=c99 test.c`失败并出现以下错误：

```
test.c: In function ‘main’:
test.c:4:16: error: storage size of ‘ifr’ isn’t known 
```

C99 有什么不同之处在于它不喜欢`struct ifreq`Linux 中的定义？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-03T16:50:00.287

这是预处理和 GNU C 与 C99 的一系列后果。

首先，`net/if.h`：

1.  `net/if.h`包括`features.h`
2.  稍后，它`struct ifreq`在`#ifdef __USE_MISC`块内定义。

所以：

1.  是什么`__USE_MISC`？-- 这是 BSD 和 System V 共有的东西
2.  在这一点上定义了吗？-- 我们需要检查一下`features.h`

所以现在，`features.h`：

1.  默认情况下使用`--std=c99`GCC 时定义`__STRICT_ANSI__`（因为这就是 C99）
2.  在 preprocessing`features.h`时，当`__STRICT_ANSI__`打开时，BSD 和 System V 功能不会启动。即`__USE_MISC`未定义。

备份到`net/if.h`：`struct ifreq`预处理后甚至不存在！**因此，关于存储大小的抱怨**。

您可以通过以下方式了解整个故事：

```
vimdiff <(cpp test.c --std=c99 -dD) <(cpp test.c --std=gnu99 -dD) 
```

或以任何其他方式（如`diff --side-by-side`）而不是`vimdiff`.

如果您希望使用 进行干净编译`-std=c99`，则必须考虑包含`_DEFAULT_SOURCE`功能测试宏（对于 glibc 版本 >= 2.19；对于较旧的 glibc 版本，请使用`_BSD_SOURCE`或`_SVID_SOURCE`），以便在提供的功能之上启用所需的功能C99。

# php - 在 php 中显示一个简单的日历

> ID：10433984
> 
> 赞同：0
> 
> 时间：2012-05-03T14:57:23.130
> 
> 标签：php

我有一张包含日期和星期几的表格，例如：2012-05-01、星期二 2012-05-02、星期三等。

我正在尝试将它显示在像表格这样的日历中。问题是它每天都在不同的行中显示它。

```
$date4 = date("Y-m-d");
$date3 = date('Y-m-d',strtotime('-1 second',strtotime('+1 month',strtotime(date('m').'/01/'.date('Y').' 00:00:00'))));

    $sql3 = "SELECT * FROM trn_cal WHERE dat >= '$date4' AND dat <= '$date3'";
    $res3 = mysql_query($sql3);
    echo "<table width='700px' border='1'>";
    echo "  <tr>";
    echo "      <td width='100px'>Sunday</td>";
    echo "      <td width='100px'>Monday</td>";
    echo "      <td width='100px'>Tuesday</td>";
    echo "      <td width='100px'>Wednesday</td>";
    echo "      <td width='100px'>Thursday</td>";
    echo "      <td width='100px'>Friday</td>";
    echo "      <td width='100px'>Saturday</td>";
    echo "  </tr>";
    echo "</table>";

    echo "<table width='700px' border='1'>";
    while ($row3 = mysql_fetch_assoc($res3)) {
    $weekday = $row3['weekday'];
    $weekdate = $row3['weekdate'];
    echo "  <tr>";
    echo "      <td width='100px'>";
    if ($weekday == "Sunday") {
    echo $weekdate;
    }
    echo "</td>";
    echo "      <td width='100px'>";
    if ($weekday == "Monday") {
    echo $weekdate;
    }
    echo "</td>";
    echo "      <td width='100px'>";
    if ($weekday == "Tuesday") {
    echo $weekdate;
    }
    echo "</td>";
    echo "      <td width='100px'>";
    if ($weekday == "Wednesday") {
    echo $weekdate;
    }
    echo "</td>";
    echo "      <td width='100px'>";
    if ($weekday == "Thursday") {
    echo $weekdate;
    }
    echo "</td>";
    echo "      <td width='100px'>";
    if ($weekday == "Friday") {
    echo $weekdate;
    }
    echo "</td>";
    echo "      <td width='100px'>";
    if ($weekday == "Saturday") {
    echo $weekdate;
    } 
    echo "</td>";
    echo "  </tr>";
    }
    echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:18:16.293

尝试这个：

```
$date4 = date("Y-m-d");
$date3 = date('Y-m-d',strtotime('-1 second',strtotime('+1 month',strtotime(date('m').'/01/'.date('Y').' 00:00:00'))));

$sql3 = "SELECT * FROM trn_cal WHERE dat >= '$date4' AND dat <= '$date3'";
$res3 = mysql_query($sql3);

echo "<table width='700px' border='1'>";

echo "  <tr>";
echo "      <td width='100px'>Sunday</td>";
echo "      <td width='100px'>Monday</td>";
echo "      <td width='100px'>Tuesday</td>";
echo "      <td width='100px'>Wednesday</td>";
echo "      <td width='100px'>Thursday</td>";
echo "      <td width='100px'>Friday</td>";
echo "      <td width='100px'>Saturday</td>";
echo "  </tr>";

echo "  <tr>";
$results_count = mysql_num_rows($res3);
$i = 1;
while ($row3 = mysql_fetch_assoc($res3)) {
    $weekday = $row3['weekday'];
    $weekdate = $row3['weekdate'];
    echo "      <td width='100px'>" . $weekdate . "</td>";
    if ($weekday == "Sunday") {
        echo "  </tr>";
        if($i < $results_count) echo "  <tr>";
    }
    $i++;
}

echo "</table>"; 
```

# database - ORA-02086: 数据库（链接）名称太长

> ID：10433989
> 
> 赞同：0
> 
> 时间：2012-05-03T14:57:33.723
> 
> 标签：database, oracle, plsql

有人可以说明如何解决此错误。可能很明显的是，要插入数据库的字符串很长。除了我们需要缩短长度这一事实之外，还有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:43:03.400

您需要首先使用创建数据库链接

```
create public database link 
mylink
connect to 
remote_username
identified by 
mypassword 
using 'tns_service_name'; 
```

在您使用的这个 mylink 中应该少于 128 个字符

创建数据库链接后使用例如

```
insert into remote_username.remote_table@mylink values ('a','b','c'); 
```

# jquery - Cakephp按钮不会直接查看，“自动”功能做到这一点？

> ID：10433994
> 
> 赞同：0
> 
> 时间：2012-05-03T14:57:45.537
> 
> 标签：jquery, cakephp, button

我有一个我想要 3 个按钮的视图；保存，保存和下一个，保存和上一个。保存按钮是标准的提交类型按钮，它可以工作。其他两个按钮显示为按钮，但不会执行任何操作。我编写了一个名为 save_move_next.js 的文件来调用一个动作，并给按钮一个 id 并将所有适当的东西放在它们应该放在的位置，但它没有做任何事情。

有一些预先构建的方法可以做到这一点吗？基本上，用户单击按钮，控制器中的操作接管，保存信息然后移动到下一个项目。

将它放在表格上方会解决问题吗？或更改它，使其看起来像：

```
$this->Form->submit('Button text', array(some controller, action);
$this->Form->submit('Button text', array(some controller, action);
$this->Form->submit('Button text', array(some controller, action);
$this->Form->end(); 
```

部分视图：

```
<?php echo $this->Form->end(__('Submit', true));?>
<?php echo $this->Form->button('Save and next drug', array('type'=>'button','id'=>'save_move_next')); ?> 
```

JS函数：

```
$(document).ready(function(){

    $("#save_move_next").click(function(){
        var drug_id = $(this).val();
        if(drug_id.length > 0)
        {
            window.location = "<?php echo Router::url(array('controller' => 'french_translations', 'action' => 'next'), true) ?>/" + drug_id;
        }
    });

}); 
```

在 default.ctp 的头中：

```
echo $javascript->link('save_move_next'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:05:05.643

Cakephp 无法识别提交按钮 ID。你可以做的是将另外两个按钮作为ajax调用并将url更改为不同的方法并在那里编写你的逻辑。

```
 <a href="#" id="saveNextBtn">Save & Next</a>

    jQuery("#saveNextBtn").bind('submit', function(event) {
            jQuery.ajax({
                beforeSend : function(XMLHttpRequest) {
                    jQuery("#sending").show();
                },
                data : jQuery("#saveNextBtn").closest("form").serialize(),
                dataType : "html",
                success : function(data) {
                    jQuery("#success").html(data);
                    jQuery("#sending").hide();
                },
                type : "post",
                url : "\/AppName\/ControllerName\/Method"
            });
            return false;
        }); 
```

**更新**

我根据您使用的是 CakePHP 2.1 的假设给出了这个解决方案。如果您使用的是 CakePHP1.3，您可以从表单参数中获取按钮详细信息。

您可以使用以下代码来实现这一点。

```
 echo $this->Form->submit('Save', array('name'=>'save');
    echo $this->Form->submit('Save & Next', array('name'=>'savenext');

    if (isset($this->params['form']['submit']) && $this->params['form']['submit'] == "Save") {
      // Save button Clicked
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:20:34.263

我在 Saanch 的回答的帮助下弄清楚了这一点。如果正在使用 cakephp 1.3，您可以确定单击了哪个按钮并简单地重定向到所需的视图。gvLearner 为我指出了正确的方向，但他提供的代码存在一些问题。

视图中的按钮：

```
echo $form->submit('Save', array('name'=>'save');
echo $form->submit('Save & Next', array('name'=>'saveNext'); 
```

确定按钮单击和重定向的代码：

```
if (isset($this->params['form']['name-you-gave-the-button-in-the-view']) && $this->params['form']['name-you-gave-the-button-in-the-view'] == 'name-you-gave-the-button-in-the-view') {
  // The button was clicked and you can redirect or whatever here.
} 
```

# string - 在 Groovy Switch-Case 语句中使用静态字符串

> ID：10433997
> 
> 赞同：3
> 
> 时间：2012-05-03T14:57:55.770
> 
> 标签：string, groovy, switch-statement, case

我是一名涉足 Groovy 的 Java 程序员。您会在我的代码中注意到，我混合了一些特定于 Java 的语法，这在 Groovy 中被认为是 A-Okay。

谁能向我解释为什么 Groovy 不接受静态变量作为`CASE`参数？或者如果可以，你能看到我在这里做错了什么吗？

```
public static final String HIGH_STRING = "high";
public static final String LOW_STRING  = "low";

... //other code, method signature, etc.

def val = "high";
switch (val) {

   case HIGH_STRING:
     println("string was high"); //this won't match
     break;

   case LOW_STRING:
     println("string was low");  //this won't match
     break;

   //case "high":
   //  println("string was high"); //this will match because "high" is a literal
   //  break;

   default:
     println("no match");
}

... //other code, method closeout, etc. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:27:36.500

我知道这并不能回答您的问题，即为什么您的代码不适合您，但是如果您想要一种更简洁/更好的方式来实现您的代码，您可以将您的值放入映射中，这样您就不必使用声明`switch`：

```
class ValueTests {
    public static final String HIGH_STRING = "high"
    public static final String LOW_STRING  = "low"

    @Test
    void stuff() {
        assert "string was high" == getValue("high")
        assert "string was low" == getValue("low")
        assert "no match" == getValue("higher")
    }

    def getValue(String key) {
        def valuesMap = [
            (HIGH_STRING): "string was high", 
            (LOW_STRING):"string was low"
        ]
        valuesMap.get(key) ?: "no match"
    }

} 
```

比`switch`IMO 干净一点。