# StackOverflow 问答 10695000-10695999

# php - 哈希 URL 参数，MD5 哈希 (PHP)

> ID：10695002
> 
> 赞同：0
> 
> 时间：2012-05-22T02:21:12.310
> 
> 标签：php, javascript, hash, md5

我使用 ajax 向服务器提交值。

```
$.ajax({
type: "POST",
url: "services.php",
data: "a=1&b=2&c=3&d=4",
success: function(msg)
{
}
}); 
```

我面临一个问题。如您所知，有经验的用户可以通过在浏览器 url 栏中键入以下 url 轻松更改传递参数值。

例如：mywebsite.com/services.php?a=0&b=0&c=0&d=0

据我所知，Javascript 中的散列（参数+密钥）。然后，我将参数值与散列值一起传递给服务器。散列（参数+密钥）在 php 脚本中完成。如果两个散列值匹配，它将更新数据库中的数据。

基本上，

在 javascript 中：sort(parameter) -> join(parameter) -> md5(parameter) 在 php 脚本中：sort(parameter) -> join(parameter) -> md5(parameter) -> 比较两个散列值

有没有合适的方法来防止它被改变？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:23:48.640

诀窍是如何在 javascript 中对用户隐藏密钥？如果您公开它，用户仍然可以进行更改并重新散列参数。您无法真正阻止这种修改，这就是您需要清理和验证服务器端的所有输入的原因。

# android - 如何检索所选联系人中的号码？

> ID：10695006
> 
> 赞同：1
> 
> 时间：2012-05-22T02:21:42.620
> 
> 标签：android, contacts

```
import android.app.Activity;
import android.content.ContentResolver;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.Contacts.People;
import android.provider.ContactsContract;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class ImportContactsActivity extends Activity {
/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button pickContact = (Button) findViewById(R.id.contacts);
        pickContact.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {

                Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
                startActivityForResult(intent, 1);
            }
        });
    }

    public void onActivityResult(int reqCode, int resultCode, Intent data) {

        super.onActivityResult(reqCode, resultCode, data);

        switch (reqCode) {
        case (1) :
          if (resultCode == Activity.RESULT_OK) {
              Uri contactData = data.getData();
              Cursor cursor =  managedQuery(contactData, null, null, null, null);
              ContentResolver cr = getContentResolver();
              Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
              if (cur.getCount() > 0) {
                  while (cur.moveToNext()) {
                      String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                      String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                      if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                          Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, 
                                             ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                                             new String[]{id}, null);
                          while (pCur.moveToNext()) {
                              // Do something with phones
                              TextView contactView = (TextView) findViewById(R.id.contactView);
                              contactView.setText(name.toString());
                      } 
                           pCur.close();
                      }
                  }
              }
              cursor.moveToFirst();
              String number = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.));

              TextView contactView = (TextView) findViewById(R.id.contactView);
              contactView.setText(number.toString());
          }
          break;
        }
    }
} 
```

我要将手机联系人导入应用程序，一旦用户点击按钮，手机联系人列表将显示，一旦用户点击其中一个联系人，联系人被选中，号码将显示在文本视图。但是当我点击联系人时，发生了错误

> java.lang.RuntimeException: 传递结果失败 ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.contacts/contacts/lookup/0r1-3F4927292B/1 flg = 0x1 }} 到活动 {com.example.importcontacts/com.example.importcontacts.ImportContactsActivity}：java.lang.SecurityException：权限拒绝：读取 com.android.providers.contacts.ContactsProvider2 uri content://com.android。来自 pid=609、uid=10053 的联系人/联系人需要 android.permission.READ_CONTACTS

请在编码方面给我建议，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:27:24.317

好像您忘记在清单文件中添加 READ_CONTACTS 权限

```
<uses-permission
    android:name="android.permission.READ_CONTACTS" /> 
```

# vb.net - 使用可为空的布尔值时的 VB.NET 编译错误？或日期？作为可选参数

> ID：10695013
> 
> 赞同：2
> 
> 时间：2012-05-22T02:22:22.963
> 
> 标签：vb.net, nullable, optional-parameters

如果我有一个接受可选空日期或布尔值的方法：

```
Public Function GetAll(Optional ByVal publishToDate As Date? = Nothing, _
                       Optional ByVal publishFromDate As Date? = Nothing, _
                       Optional ByVal isDisabled As Boolean? = Nothing) As DataTable 
```

我在不传递任何参数的情况下调用此方法：

```
dt = GetAll() 
```

构建时会出现编译错误：

*   **错误 37 编译失败：'0xC0000005' vbc：命令行**

如果我只使用可选的可空整数，那很好。但是在使用 Date 或 Boolean 作为 Nullable Optional 参数时总是会引发错误。我不想重载，因为我想使用这些参数（以及更多）作为 SQL WHERE 子句的条件。

奇怪的是，我已经在一个单独的控制台应用程序中测试了上述内容，它工作正常。

注意 - 目前，此方法驻留在网站引用的其自己的程序集中。IDE是VS 2010。框架3.5。

成功构建的任何想法？

提前致谢。

# asp.net-mvc-3 - 选择包含具有验证错误的控件的选项卡

> ID：10695019
> 
> 赞同：1
> 
> 时间：2012-05-22T02:23:02.460
> 
> 标签：asp.net-mvc-3, jquery-ui

我发现了一些接近我想在[这里](https://stackoverflow.com/questions/8149849/jquery-ui-select-tab-based-on-validation/8169063#8169063)做的事情，但不完全是。我想找到具有验证错误的控件的第一个选项卡并选择该选项卡。我让 JQUERY 工作以单击带有下一个和上一个链接的选项卡，现在如果我可以进入带有验证错误的选项卡，那就太好了。

MVC3 DataAnnotations 正在进行验证。任何建议都会很棒。注意：我确实缩短了模型并查看代码。

我想要做的是，当单击按钮以“提交”表单并执行验证时，如果发生任何验证错误，那么我希望选项卡列表中的第一个选项卡带有一个具有验证错误的控件选择。

这是视图模型。

```
public class RegistrationViewModel
{
    [Required(ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "Required")]
    [StringLength(50, ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "StringLength")]
    [Display(Name = "First Name")]
    public string FirstName { get; set; }

    [StringLength(100, ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "StringLength")]
    [Display(Name = "Street")]
    public string Street1 { get; set; }

    public IEnumerable<SelectListItem> SecurityQuestionOneList { get; set; }

    [Required(ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "Required")]
    [Remote("DistinctSecurityQuestionOne", "Validation", AdditionalFields = "SecurityQuestionTwo, SecurityQuestionThree", ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "DistinctSecurityQuestions")]
    public string SecurityQuestionOne { get; set; }

    [Required(ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "Required")]
    [StringLength(200, ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "StringLength")]
    public string SecurityQuestionOneAnswer { get; set; }
} 
```

这是我认为的代码。

```
@model SteadyPayCustomer.Models.RegistrationViewModel
@using Resources;

@{
    ViewBag.Title = "Register";
}

<h2>Create a New Account</h2>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var $tabs = $('#tabs').tabs();

        $(".ui-tab-panel").each(function (i) {
            var totalTabs = $(".ui-tab-panel").size() - 1;

            if (i != totalTabs) {
                next = i + 2;
                $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Step &#187;</a>");
            }

            if (i != 0) {
                previous = i;
                $(this).append("<a href='#' class='previous-tab mover' rel='" + previous + "'>&#171; Previous Step</a>");
            }
        });

        $(".next-tab, .previous-tab").click(function () {
            $tabs.tabs('select', $(this).attr("rel"));
            return false;
        });
    });
</script>

<div id="tabs">
    <ul id="tabstyle">
        <li><a href="#fragment-1"><span style="color:#000000;font-weight:bold;font-size:12px">User</span></a></li>
        <li><a href="#fragment-2"><span style="color:#000000;font-weight:bold;font-size:12px">Contact</span></a></li>
        <li><a href="#fragment-3"><span style="color:#000000;font-weight:bold;font-size:12px">Security</span></a></li>
    </ul>

    @using (Html.BeginForm())
    {
        @Html.ValidationSummary(true)

        <div id="fragment-1" class="ui-tab-panel">
            <fieldset>
                <legend>User Information</legend>

                <div class="editor-label">
                    @Html.Label(UserViewText.FirstNameLabel)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.FirstName)
                    @Html.ValidationMessageFor(model => model.FirstName)
                </div>
            </fieldset>
        </div>
        <div id="fragment-2" class="ui-tab-panel">
            <fieldset>
                <legend>Customer Information</legend>

                <div class="editor-label">
                    @Html.Label(CustomerGeneralViewText.Street1Label)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Street1)
                    @Html.ValidationMessageFor(model => model.Street1)
                </div>
            </fieldset>
        </div>
        <div id="fragment-3" class="ui-tab-panel">
            <fieldset>
                <legend>Security Questions</legend>

                <div class="editor-label">
                    @Html.Label(SecurityQuestionsViewText.SecurityQuestionOneLabel)
                </div>
                <div class="editor-field">
                    @Html.DropDownListFor(model => model.SecurityQuestionOne, Model.SecurityQuestionOneList, string.Empty, Model.SecurityQuestionOne)
                    @Html.ValidationMessageFor(model => model.SecurityQuestionOne)
                </div>

                <div class="editor-label">
                    @Html.Label(SecurityQuestionsViewText.SecurityQuestionOneAnswerLabel)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.SecurityQuestionOneAnswer)
                    @Html.ValidationMessageFor(model => model.SecurityQuestionOneAnswer)
                </div>

                <p>
                    <input type="submit" value="@General.FinishButtonText" />
                </p>
            </fieldset>
        </div>
    }
</div> 
```

# android - 如何在android中删除视图

> ID：10695022
> 
> 赞同：0
> 
> 时间：2012-05-22T02:23:50.087
> 
> 标签：android, viewgroup

当视图被移除时，出现错误，我找不到错误原因：</p>

```
**java:**

  package com.test;
    import android.app.Activity;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.view.ViewGroup;
    import android.view.animation.AlphaAnimation;
    import android.view.animation.Animation;
    import android.view.animation.Animation.AnimationListener;
    import android.widget.ImageView;

    public class AnimationActivity extends Activity {
        ImageView imageView = null;
        ViewGroup viewGroup = null;
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            imageView = (ImageView)findViewById(R.id.imageviewID);
            viewGroup = (ViewGroup)findViewById(R.id.layoutId); 
        }
        public void buttonOnclick(View e){
            int id = e.getId();
            if(id==R.id.alpha){
                AlphaAnimation alphaAnimation = new AlphaAnimation(1.0f, 0f);
                alphaAnimation.setDuration(5000);
                alphaAnimation.setStartOffset(500);
                alphaAnimation.setFillAfter(true);
                alphaAnimation.setFillBefore(false);
                alphaAnimation.setAnimationListener(new RemoveAnimationListener());
                imageView.startAnimation(alphaAnimation);
                Log.d("mydebug","imageView------------>"+imageView);
                Log.d("mydebug","viewGroup------------>"+viewGroup);
            }
        }
        private class RemoveAnimationListener implements AnimationListener{

            @Override
            public void onAnimationEnd(Animation animation) {
                // TODO Auto-generated method stub
                viewGroup.removeView(imageView);

            }
            @Override
            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }
        }
    } 
```

以下是错误：</p>

```
 05-22 10:01:16.367: W/dalvikvm(1839): threadid=1: thread exiting with uncaught exception (group=0x4001d7c8)ss
    05-22 10:01:16.397: E/AndroidRuntime(1839): FATAL EXCEPTION: main
    05-22 10:01:16.397: E/AndroidRuntime(1839): java.lang.NullPointerException
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1366)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.View.draw(View.java:6743)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.View.draw(View.java:6743)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1857)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewRoot.draw(ViewRoot.java:1407)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.os.Handler.dispatchMessage(Handler.java:99)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.os.Looper.loop(Looper.java:123)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at java.lang.reflect.Method.invokeNative(Native Method)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at java.lang.reflect.Method.invoke(Method.java:521)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    05-22 10:01:16.397: E/AndroidRuntime(1839):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:39:00.207

您在课堂上有使用`buttononclick`方法。`AnimationActivity`因此，如果您提到了单击 XML 文件中的哪个按钮，那就太好了。如果您没有
在 XML 中提及单击哪个按钮，那么您必须在您的活动中提及单击哪个按钮，以便进行相应的方法调用。另一件事是，如果它没有找到视图组，那么它就会显示空指针异常。您正在尝试访问或使用值为 null 或未找到的视图组。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutId"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView android:id="@+id/imageviewID"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"
        android:contentDescription="@string/app_name"
        android:paddingBottom="50dip"
        />
    <Button android:id="@+id/alpha"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/alpha"
        android:onClick="buttonOnclick"
        android:layout_below="@id/imageviewID"
        />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:51:50.297

你先按下按钮，viewgroup 将删除 imageview，然后 viewgroup 不包含 Imageview；如果您第二次按下按钮，则 imageview 为空，因此您无法从视图组中删除 imageview。

# ios - iPad UISplitviewControllers with Storyboards ands Cocos2d 多场景报错

> ID：10695025
> 
> 赞同：0
> 
> 时间：2012-05-22T02:25:25.440
> 
> 标签：ios, cocos2d-iphone, uistoryboard

我有一个 UISplitviewController 应用程序，其结构类似于此问题中的图片：

[带有情节提要的 iPad 上的 UISplitViewController？](https://stackoverflow.com/questions/9272244/uisplitviewcontroller-on-ipad-with-storyboards)

当我点击游戏 #1 或游戏 #2 时，它们各自的游戏就会运行。但是，如果我单击第二个游戏（＃1 或＃2），我会收到此错误：

```
由于未捕获的异常而终止应用程序
'NSInternalInconsistencyException'，原因：'你不能运行一个场景
如果另一个场景正在运行。改用 replaceScene 或 pushScene '

```

如何检查是否已经存在 Cocos2d 场景并在单击第二个游戏时替换它？理想情况下，我认为我应该让两个游戏都运行，以便用户可以点击返回到另一个游戏。这可能吗？

我试图简单地替换这一行：[director runWithScene:scene];

用这一行：[director replaceScene:scene];

不幸的是，我在方法中收到错误 CCTextureAtlas.m：

-（void）drawNumberOfQuads：（NSUInteger）n fromIndex：（NSUInteger）开始{...}

![在此处输入图像描述](../Images/07e2a1c3284708dcdd17f7be392cce90.png)

[更新]

我想我可能需要停止现场，以便正确清理所有内容。例如，当我单击帮助屏幕时，我的控制器的 viewWillDisappear 会被调用。在 Cocos2d 视图控制器之间切换时不会发生这种情况。

* * *

遵循这些[说明](http://fidgetware.com/Tutorials/page15/page15.html)，并且只创建一次 EAGLView 后，我几乎可以正常工作，但是第二个场景出现黑屏。请注意，我确实简要地看到了新场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:59:26.173

> 如何检查是否已经存在 Cocos2d 场景并在单击第二个游戏时替换它？

```
if ([[CCDirector sharedDirector] runningScene] == nil) {
        [[CCDirector sharedDirector] runWithScene:sceneToRun];
    } else {
        [[CCDirector sharedDirector] replaceScene:sceneToRun];
    } 
```

# c# - 如何用 0xFF 字节填充 byte[]？

> ID：10695026
> 
> 赞同：0
> 
> 时间：2012-05-22T02:25:45.643
> 
> 标签：c#, bytearray, padding

**[这个问题是这个问题](https://stackoverflow.com/questions/10570142/how-to-fill-a-memorystream-with-0xff-bytes)的后续**

我写了一个小方法来填充`byte[]`就像`MemoryStream`：

```
public static Stream FillWithPadding(Stream MS, int Count)
{
    byte[] buffer = new byte[64];
    for (int i = 0; i < buffer.Length; i++)
    {
        buffer[i] = 0xFF;
    }
    while (Count > buffer.Length)
    {
        MS.Write(buffer, 0, buffer.Length);
        Count -= buffer.Length;
    }
    MS.Write(buffer, 0, Count);
    return MS;
}

public static byte[] FillWithPadding(byte[] Buffer, int Count)
{
    using (MemoryStream MS = new MemoryStream())
    {
        MS.Write(Buffer, 0, Buffer.Length);
        MemoryStream msw = FillWithPadding(MS, Count) as MemoryStream;
        return msw.GetBuffer();
    }
} 
```

此代码不起作用！

相反，它在最后创建`0xFF`+ `0x00`！

任何人都可以请清理，为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T02:29:43.757

`MemoryStream.GetBuffer()`返回 MemoryStream 用于存储数据的内部字节数组。最初它用 0 填充，然后由 Write 填充到流长度。

您很可能希望使用 MemoryStream.ToArray() 来代替返回截断为实际长度的缓冲区副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:51:32.073

这就是现在流中的位置。在写入之前使用 MS.Position = 0。

```
public static Stream FillWithPadding(Stream MS, int Count)
{
    byte[] buffer = new byte[64];
    for (int i = 0; i < buffer.Length; i++)
    {
        buffer[i] = 0xFF;
    }
    MS.Position = 0;
    while (Count > buffer.Length)
    {
        MS.Write(buffer, 0, buffer.Length);
        Count -= buffer.Length;
    }
    MS.Write(buffer, 0, Count);
    return MS;
} 
```

# unicode - 将 Delphi 2006 应用程序移植到 XE

> ID：10695027
> 
> 赞同：1
> 
> 时间：2012-05-22T02:25:48.687
> 
> 标签：unicode, delphi-xe, porting, delphi-2006, ansistring

我想将几个大型应用程序从 Delphi 2006 移植到 XE。原因与 Unicode 没有太大关系，而是利用（希望）更好的 IDE 稳定性、原生 PNG 支持、更多组件、更少 VCL 错误、更少依赖 3rd 方的东西、更少从你们那里抄袭等等。的应用程序可能会受益于 Unicode，但目前这不是问题。目前我只想采取最直接的方法让它们再次编译。

作为开始，我已经改变了所有不明确的字符串声明，即字符串到 AnsiString 或 ShortString，char 到 AnsiChar 和 pChar 到 pAnsiChar，并用 D2006 重新编译。到目前为止，一切都很好。什么都没坏。

我的问题是：从这里到哪里？假设我只是向 XE 编译器展示我的源代码并点亮触摸纸，那么可能是什么大问题？

例如，

```
var
    S : AnsiString ; 
...
MainForm.Caption := S ; 
```

这会产生错误吗？一个警告？我假设 VCL 现在是 Unicode，或者 XE 会引入非 Unicode 组件，还是转换字符串？在 XE 中保留一个使用 8 位字符串的应用程序实际上是否可行，还是会让人头疼？

如果最好/最简单的方法是使用 Unicode，我会这样做，即使我不会使用扩展字符，至少在不久的将来是这样。

我想知道的另一件事是 3rd 方的东西。我想我需要获得与 XE 兼容的更新版本。

任何（积极的！）评论表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:41:47.623

It is a long jump taking 2006 to 2011

But it is possible if you consider that:

*   You have to convert String variables using the new conversions methods ;
*   You have to check all the versions between 2006 and xe to know how the libraries have changed, bacause some have been spplited, others merged, and a few deleted ;
*   You have to buy/download the upgrade (if any) of your 3rd party components.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:34:55.757

`AnsiString`VCL 现在完全是 Unicode，因此您显示的代码将生成关于从to隐式转换的编译器警告，而不是错误`UnicodeString`。`AnsiString`如果包含非 ASCII 字符（编译器无法验证），那将是一个潜在的有损转换。如果您继续使用`AnsiString`，则必须进行显式类型转换以避免警告：

```
var
  S : AnsiString ; 
...
MainForm.Caption := String(S); 
```

你最好不要像这样对你的代码进行 Ansi-fying。拥抱 Unicode。您的代码将更易于管理，并且更易于移植到未来的版本和平台。您应该将`AnsiString`使用限制在实际需要 Ansi 的地方 - 网络通信、遗留数据的文件 I/O 等。如果您想在应用程序中节省内存，特别是如果您只使用 ASCII 字符，请使用`UTF8String`而不是`AnsiString`. UTF-8 是 Unicode 的 8 位编码，和之间的转换`UTF8String`是`UnicodeString`无损的，没有编译器警告。

# java - 休眠/MySQL 连接超时

> ID：10695028
> 
> 赞同：5
> 
> 时间：2012-05-22T02:25:57.347
> 
> 标签：java, mysql, hibernate, connection-pooling, c3p0

我编写了一个为网站和多个移动客户端提供支持的服务器端应用程序。我使用 Hibernate 进行数据访问。后来我发现应用程序在一天后失败了！当我在网上查看时，我发现 MySQL 在 8 小时后终止“陈旧”连接是一个众所周知的问题。为了避免这种情况，我找到了很多建议，比如 include `?autoReconnect=true`， using`c3P0`等。由于`autoReconnect`官方不鼓励（尤其是在生产环境中），而且因为我应用它时没有任何效果，所以我决定去`c3p0`. 不幸的是，在我的文件中引入`c3p0`配置后，应用程序开始在我调用的代码中`hibernate.cfg.xml`抛出一个地方， 这意味着实际返回`NullPointerException``dbSession.close()``HibernateUtil.getSessionFactory()``null`. 我已经添加了所需的罐子（c3p0-0.9.2-pre2.jar、hibernate-core-3.3.1.GA.jar、hibernate-c3p0-3.3.2.GA.jar、mchange-commons-java-0.2.1 .jar 和 c3p0-oracle-thin-extras-0.9.2-pre2.jar），尽管我不认为它们都是必需的。我浏览了许多讨论此问题的页面，但我仍然无法正确设置它。请帮助我使用“初学者友好”的易于实现的分步程序来设置`c3p0`Hibernate。我在 JDK 1.6、MySQL 5.5 上使用 Hibernate 3.3.6，并且在 Netbeans 7.0 中进行开发。

这是我的`hibernate.cfg.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/religion_app</property>
    <property name="hibernate.connection.username">*****</property>
    <property name="hibernate.connection.password">*****</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>

    <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
    <property name="connection.autoReconnect">true</property>
    <property name="connection.autoReconnectForPools">true</property>
    <property name="connection.is-connection-validation-required">true</property>

    <!-- configuration pool via c3p0-->
    <property name="c3p0.acquire_increment">1</property> 
    <property name="c3p0.idle_test_period">120</property> <!-- seconds --> 
    <property name="c3p0.max_size">100</property> 
    <property name="c3p0.max_statements">0</property> 
    <property name="c3p0.min_size">10</property> 
    <property name="c3p0.timeout">180</property> <!-- seconds -->
    <property name="c3p0.preferredTestQuery">select 1;</property>

    <!--Mappings go here-->
  </session-factory>
</hibernate-configuration> 
```

这是我添加 c3p0（没有 slf4j）后得到的：

```
 May 23, 2012 2:42:14 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet LoginChurch threw exception
java.lang.NullPointerException
    at com.pacesolutions.religionapp.services.LoginChurch.processRequest(LoginChurch.java:109)
    at com.pacesolutions.religionapp.services.LoginChurch.doPost(LoginChurch.java:138)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:859)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)
    at java.lang.Thread.run(Thread.java:722)

May 23, 2012 2:45:13 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet LoginChurch threw exception
java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1516)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1361)
    at org.hibernate.connection.C3P0ConnectionProvider.<clinit>(C3P0ConnectionProvider.java:52)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at java.lang.Class.newInstance0(Class.java:372)
    at java.lang.Class.newInstance(Class.java:325)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:73)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:56)
    at org.hibernate.cfg.SettingsFactory.createConnectionProvider(SettingsFactory.java:414)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:62)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2009)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1292)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:859)
    at com.pacesolutions.religionapp.HibernateUtil.<clinit>(HibernateUtil.java:23)
    at com.pacesolutions.religionapp.services.LoginChurch.processRequest(LoginChurch.java:68)
    at com.pacesolutions.religionapp.services.LoginChurch.doPost(LoginChurch.java:143)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:859)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)
    at java.lang.Thread.run(Thread.java:722)

    note The full stack trace of the root cause is available in the Apache Tomcat/6.0.26 logs. 
```

我的大部分 Hibernate 配置文件都是由 Netbeans 生成的。我有数据库，然后我使用 Netbeans 中的 Hibernate 向导从中生成配置文件、实体类和映射文件。在我介绍 c3p0 之前，它们工作正常（但它们在 8 小时后失败）。我在我的项目中使用了 Mecurial，并将整个项目恢复到我引入 c3p0 之前的时间，它再次工作（8 小时）。甚至手动删除 hibernate.cfg.xml 中的所有 c3p0 配置也会使应用程序再次运行。*我可能做错了什么？*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T05:45:37.563

C3P0 配置所需的 jar 是*c3p0-0.9.2-pre2.jar*和*mchange-commons-java-0.2.1.jar*。此外，您还需要将*c3p0.properties*放在类路径中。

以下是在使用 C3P0 和 Hibernate 时应配置的属性。

**休眠.cfg.xml**

```
<property name="connection.provider_class">
                org.hibernate.connection.C3P0ConnectionProvider</property>
<property name="hibernate.c3p0.acquire_increment">1</property> 
<property name="hibernate.c3p0.idle_test_period">100</property>
<property name="hibernate.c3p0.max_size">100</property> 
<property name="hibernate.c3p0.max_statements">100</property> 
<property name="hibernate.c3p0.min_size">10</property> 
<property name="hibernate.c3p0.timeout">180</property> 
```

**c3p0.properties**

*   您可以在每次结帐时验证连接`c3p0.testConnectionOnCheckout=true`，但这是一项昂贵的操作。

*   否则，您可以定期重试建立连接。

    > c3p0.acquireRetryAttempts = 4
    > c3p0.acquireRetryDelay = 5000

    这将重试 4 次，每次连续尝试之间有 5 秒的延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:26:17.963

c3p0 不依赖于 SLF4J。如果将该库添加到您的类路径中解决了您的问题，那很有趣，但并不那么容易解释。

当您遇到问题时，记录原始 NPE tomcat 的堆栈跟踪会很有帮助。（我是 c3p0 的开发者。）

请注意，c3p0.properties 需要位于应用程序的 CLASSPATH 的顶​​层，这可能不是其他配置文件所在的位置。c3p0.properties 作为 ClassLoader 资源加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:46:16.973

如上所述，可以使用商业池库修复该错误。我完全按照@NayanWadekar 的建议使用了 c3p0。请注意，c3p0 依赖于 SLF4J。因此，在类路径中包含 c3p0 jar 之后，您还必须在类路径中添加 SLF4J jar。这件事的诀窍是，如果那些 SLF4J jar 不存在，编译器仍然不会抱怨，你只会在部署应用程序后得到错误。此外，如果您使用的是 Netbeans，请避免从slf4.org 上捆绑在一起[的](http://www.slf4j.org/dist/slf4j-1.6.4.zip)所有 jars 创建 SLF4J 库。原因是某些 jar 不打算在同一个项目中一起使用。只需从库中单独使用以下两个 jar：slf4j-api-1.6.4.jar 和 slf4j-jdk14-1.6.4.jar。您可以访问[www.slf4j.org](http://www.slf4j.org)了解详情。

# bash - 当 nocasematch 关闭时，为什么 case 语句不区分大小写？

> ID：10695029
> 
> 赞同：6
> 
> 时间：2012-05-22T02:26:03.270
> 
> 标签：bash, pattern-matching

鉴于以下情况：

```
$ echo $BASH_VERSION
4.2.10(1)-release

$ shopt | fgrep case
nocaseglob      off
nocasematch     off

$ case A in [a-z]) echo TRUE;; esac
TRUE 
```

我希望大写字母**A***不*应该与**[az]**的小写字符类匹配，但确实如此。为什么这场比赛没有失败？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T02:43:28.553

您不能以这种方式可靠地使用破折号。如果我不使用破折号，它会按预期工作：

```
$ bash --version
GNU bash, version 4.2.10(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
$ shopt -s nocasematch
$ case A in [abc]) echo TRUE;; esac
TRUE
$ shopt -u nocasematch
$ case A in [abc]) echo TRUE;; esac
$ 
```

但是*使用*破折号，无论`nocasematch`.

Bash 在这里进行模式匹配。查看[参考手册的这一部分，](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)其中说使用连字符 MIGHT 解释`[a-z]`为`[A-Za-z]`! 它告诉您如何获得传统解释（将 LC_COLLATE 或 LC_ALL 设置为 C）。基本上，您的默认语言环境是按字典顺序排序的。参考手册很好地解释了事情。

**附录**

好的，我有一份成绩单给你。

```
$ shopt -u nocasematch
$ case A in [a-z]) echo TRUE;; esac
TRUE
$ shopt -s nocasematch
$ case A in [a-z]) echo TRUE;; esac
TRUE
$ LC_ALL=C
$ shopt -u nocasematch
$ case A in [a-z]) echo TRUE;; esac
$ shopt -s nocasematch
$ case A in [a-z]) echo TRUE;; esac
TRUE 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T02:56:51.917

它与您的语言环境设置有关。具体来说，整理顺序是不区分大小写的。

例如，`LC_COLLATE`设置为`en_AU.utf8`（我系统上的默认设置），您可以看到它包括小写和大写：

```
pax> case A in [a-b]) echo TRUE;; esac
TRUE
pax> _ 
```

但是，如果你去掉范围说明符，它会按预期工作：

```
pax> case A in [ab]) echo TRUE;; esac
pax> _ 
```

那是因为`between a and b inclusive`对于该整理序列，第一个意味着包含`A`. 对于后一种方式`a`，并且`b`仅适用于不受整理顺序影响的范围。

如果您将整理顺序设置为区分大小写的顺序，它将按预期工作：

```
pax> export LC_COLLATE="C"
pax> case A in [a-b]) echo TRUE;; esac
pax> 
```

如果您只想将其作为一次性操作执行而不影响其他任何操作，则可以在子 shell 中执行此操作：

```
( export LC_COLLATE="C" ; case A in [a-b]) echo TRUE;; esac ) 
```

# lua - 使用字符串键索引时错误的 lua 表大小

> ID：10695035
> 
> 赞同：2
> 
> 时间：2012-05-22T02:26:51.587
> 
> 标签：lua

通常为了获取表大小，标准表库函数 # 运算符起作用。

但是，当我创建一个具有字符串键索引的表时，它不起作用。

```
local function addWriterIdListToTable()

        local returnTable = {}
        local requestString = "1234:16 5678:8 9012:1"
        local idList = requestString:split(" ")
        for i,v in ipairs(idList) do
                local oneId = v:split(":")
                returnTable[oneId[1]] = oneId[2]
        end

        for k,v in pairs(returnTable) do
                print (k .. " " .. v)
        end
        print("size of table: " .. #returnTable)

        return returnTable

end 
```

我想将字符串转换为表格。函数“split”解析一个字符串，以参数为分隔符将其拆分，并以表格形式返回。

执行上述函数的结果如下所示。

```
1234 16
9012 1
5678 8
size of table: 0 
```

它完全按照我的预期显示了 table 的内容，但它的计数不是。

有人帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T02:33:49.727

运算符告诉您表中的`#`最高数字索引。如果数字索引中有任何间隙，它可能会返回间隙下方的最高值。基本上，`#`只有当您将表格视为密集阵列时，运算符才能正常工作。

如果您真的想知道一个表中有多少条目，您需要使用该`pairs()`函数对其进行迭代并计算您获得了多少项目。

```
function countTableSize(table)
    local n = 0
    for k, v in pairs(table) do
        n = n + 1
    end
    return n
end 
```

尽管我确实想知道为什么您甚至需要知道表中有多少条目。通常，您只关心表是否为空，您可以通过查看 if 来检查`next(table) == nil`。

# soap - 如何为 WSDL 服务生成 Web 应用程序客户端？

> ID：10695037
> 
> 赞同：2
> 
> 时间：2012-05-22T02:27:08.390
> 
> 标签：soap, wsdl, code-generation

我正在尝试生成一个快速网站，以允许客户访问 WSDL 中指定的 SOAP 服务。任何语言/工具包都可以。

理想情况下，我想将 WSDL 文件提供给代码生成器并让它发出 servlets/PHP/python，每个操作在 WSDL 中指定一个 URL，表单字段与 WSDL 中的属性等效。生成的应用程序将允许用户填写表单、将操作提交给 SOAP 服务并返回结果。

[http://www.soapclient.com/SoapTest.html](http://www.soapclient.com/SoapTest.html)上有一个网站，它几乎完全符合我的要求，但他们没有发布任何源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:33:46.553

[http://www.soapclient.com/SoapTest.html](http://www.soapclient.com/SoapTest.html)网站是使用此工具生成的： [http ://www.sqldata.com/SoapClient/soapclient30.htm](http://www.sqldata.com/SoapClient/soapclient30.htm)

这是一个仅限 Windows 的程序，但它生成的 C++ 代码可能很容易移植到另一个平台，或者被翻译成 PHP 等。

# qt - 在 QGridLayout 中获取 QCheckBox 的状态？

> ID：10695041
> 
> 赞同：1
> 
> 时间：2012-05-22T02:27:39.343
> 
> 标签：qt, layout, checkbox, grid, qgridlayout

我有一个简单的布局来获取/设置 USB 板的 IO 状态。每行对应一个模块，每列对应一个 IO 引脚。目的是在一行上设置输出状态，并查看输入是否与另一行上检查的输入相匹配。

我做了这个来设置布局

```
QLabel * templab = new QLabel;
templab ->setText(QString("Broche ->"));
gridLayout_2->addWidget(templab, 0, 0);
for (int row = 1; row < modules+1 ;row++)
{
    QLabel * templab = new QLabel;
    templab ->setText(QString("Module %1").arg(row-1));
    gridLayout_2->addWidget(templab, row, 0);
}
for (int col = 1; col < colonnes+1 ;col++)
{
    QLabel * templab = new QLabel;
    templab ->setNum(col);
    gridLayout_2->addWidget(templab, 0, col);
}
for (int row = 1; row < modules +1 ;row++)
{
    for (int col = 1; col < colonnes+1 ;col++)
    {
        QCheckBox* checkBox = new QCheckBox();
        gridLayout_2 ->addWidget(checkBox,row,col);
    }
} 
```

如何检查复选框的状态？

我没有找到有关如何使用 gridLayout_2->itematposition(x,y) 获取复选框状态的任何线索

非常感谢。

编辑：按照 Spyke 的建议，我使用了：

```
QCheckBox * checkBox = findChild<QCheckBox*>(ui->gridLayout_5->itemAtPosition(x,y)->widget()->objectName()); 
```

我发现了另一种方法：

```
QCheckBox * ios[8][16];

 for (int row = 1; row < modules +1 ;row++)
    {
        for (int col = 1; col < colonnes+1 ;col++)
        {
            ios[row-1][col-1]= new QCheckBox();
            ui->gridLayout_5 ->addWidget(ios[row-1][col-1],row,col);
        }
    } 
```

并测试状态：

```
if (ios[x][y]->checkState() == Qt::Checked)
{
    qDebug()<<"Checked"<<endl;
}
else
    qDebug()<<"UN Checked"<<endl;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:08:11.180

您可以使用`gridLayout->findChild<QCheckBox*>(gridLayout->itemAt(0)->widget()->objectName());`

# ios - 如何在 iPhone 上使用 phonegap 发送带有文本的短信？

> ID：10695044
> 
> 赞同：2
> 
> 时间：2012-05-22T02:28:12.197
> 
> 标签：ios, iphone, cordova

我正在尝试在 iPhone 上发送短信。但它只适用于短信号码，但不适用于短信号码和文本。

换句话说，跟随效果很好。

> `<a href="sms:+05212341234">Send sms</a>`

但它不起作用。

> `<a href="sms:+05212341234?body=hello">Send sms</a>`

我现在正在使用phonegap，如果你知道它的原因，请帮助我。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:15:40.830

我不知道是不是这样，但你拼错了“href”，你写成了“herf”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:30:48.227

使用这个 SMS composer plugins for phonegap，它对我来说工作正常。

```
https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/SMSComposer 
```

# php - 未找到 JSON 模块

> ID：10695046
> 
> 赞同：1
> 
> 时间：2012-05-22T02:28:24.627
> 
> 标签：php, json, freebsd

我正在使用 PHP 5.4.3 运行 FreeBSD。我收到错误：

```
fatal error: call to undefined function json_decode() 
```

我已经安装了 PHP 5.3.x，之后 JSON 就可以使用了。我运行时它不是列出的模块

```
php -m 
```

关于如何安装/加载这个模块的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:32:10.633

嗯，伙计们，当您回答问题时，请将其作为**ANSWER**提供，这样问题就会显示为已回答。

重申一下，安装 php5-json 包或端口。

# windows-phone-7 - 使用 XNA 绘制最佳 WP7 位图

> ID：10695047
> 
> 赞同：0
> 
> 时间：2012-05-22T02:28:29.630
> 
> 标签：windows-phone-7, bitmap, xna-4.0

我想在 WP7 上以垂直位置显示位图，但它将它旋转 90 度并且坐标处于横向位置。是否可以让 WP7 在垂直模式下显示所有内容并在垂直模式下从左上角开始坐标？如果没有，以垂直模式显示位图的最佳方式是什么？我应该在设计时旋转我的位图，还是应该在我的绘图功能中使用旋转？我使用 XNA spriteBatch.Draw 来绘制我的位图，但它有一些我不明白的高级旋转技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:43:04.887

XNA 应用程序基于游戏将以横向模式显示的假设。在设计时或在应用程序中显示它们时是否更容易/更好地旋转事物将取决于各种因素，包括：游戏的功能；您的偏好；项目数量；对运动计算的影响；ETC...

# asp.net-mvc - 在控制器和视图之前和之后使用 EF VS 项目将模型添加到 MVC 的优缺点是什么？

> ID：10695048
> 
> 赞同：0
> 
> 时间：2012-05-22T02:28:48.233
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, asp.net-mvc-2, entity-framework-4

在使用 EF（EntityFramework、Entity Framework 4.1/4.2）开发 MVC3 (MVC2) 的教程和演练中，我观察到在 Microsoft Visual Studio 2010 中将模型、视图、控制器添加到项目中的顺序完全不同。

添加 M、V 和 Cs 的不同顺序的优缺点是什么？
例如，在视图和控制器之前，更具体地说，在视图和控制器之后添加模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:41:41.420

首先添加一个在另一个上没有特定的规则。当您创建一个空的 ASP.NET MVC3 项目时，它会带有一些默认的文件夹结构，其中包括一个**Controller**文件夹、**Views**文件夹和**Models**文件夹。

现在，如果您是初学者，这就是我的建议。先加一个`controller`。

只需右键单击`Controller`文件夹并`Add->Controller`从上下文菜单中选择并添加您的第一个控制器（将名称命名为`HomeController`）。它将带有一个默认`Index`操作方法，您可以看到一个返回视图语句。立即运行您的项目。它会显示一个错误，说它找不到视图。所以现在是添加视图的时候了。在 home 控制器中执行 index 操作。右键单击该`Return View()`语句并选择添加视图，这将在 Views 下的主文件夹下添加一个视图 (index.xshtml)。现在运行应用程序，您将看到页面内容。

如果要与数据库交互，可以添加模型类。如果您可以将 POCO 类文件添加到您的`Models`文件夹中，或者您可以将它放在引用此项目的不同库中。全取决于你。

正如 Lavinski 所说，如果您首先创建模型，则可以使用 Scaffolding 为您创建控制器动作。**但如果您是初学者，我建议您手动创建控制器和视图**。这将帮助您了解 MVC 的`configuration`工作原理

# php - Soundcloud API PHP 集成

> ID：10695049
> 
> 赞同：0
> 
> 时间：2012-05-22T02:28:55.177
> 
> 标签：php, api, soundcloud

我目前正在尝试将音轨从 soundcloud 流式传输到我的新网络应用程序。我目前能够获得专辑封面，但现在我需要获得用户名、曲目标题和永久链接才能显示在专辑封面下。到目前为止，这是我的代码

```
<body onload="setupBlocks();">

<?php 
    if(isset($tracks)){
        foreach($tracks as $track){
            debug($track['stream_url']);
            debug($track['artist']);

            echo '<div class="block">';
            echo "<p><img src='".$track['artwork_url']."' width='275' height='125' /></p>"; 
```

我需要做另一个回声语句`echo "<p><src='".$track['title']."'/></p>";`吗？

...并为用户名和永久链接遵循相同的回显语句格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:54:51.837

是的。如果您已经拥有跟踪资源，则可以访问所需的所有信息。只需发出更多的 echo 语句，如下所示：

```
echo $track['title'];
echo $track['user']['username'];
echo $track['permalink_url']; 
```

如果您想查看所有可用字段，可以尝试以下调试语句：

```
print_r($track); 
```

希望有帮助！

# ios - 在 OSX 10.7 上为 IOS 5.1 编译 FFTW3

> ID：10695053
> 
> 赞同：4
> 
> 时间：2012-05-22T02:29:53.387
> 
> 标签：ios, xcode4, signal-processing, fftw

之前有人问过这个问题的类似版本（[如何在 iOS 上编译 fftw3](https://stackoverflow.com/questions/7850624/how-to-compile-fftw3-on-ios)）关于以前版本的 IOS 和/或 OSX，但我无法让 fftw3 在实际的 IOS 设备上工作。（尽管它在使用 MacPorts“通用”发行版的模拟器中运行良好）。如果有人使用 fftw3 取得任何成功，请告诉我你是如何让它工作的！我正在使用 OSX 10.7，并且正在尝试在安装了 IOS 5.1 的 iPad3 上运行 fftw。谢谢。

# asp.net - jqGrid - 多选行和行选择

> ID：10695057
> 
> 赞同：0
> 
> 时间：2012-05-22T02:31:41.757
> 
> 标签：asp.net, jqgrid, jqgrid-asp.net

我有一个使用 asp.net jqGrid 将多选设置为 true 的 jqGrid。我希望它选择多极行，然后单击一个按钮，某些内容将应用于所有这些行的 ID。同时，单击一行应填充一些字段（例如文本框）。问题是我使用了 rowselect 方法，虽然这允许我在行选择上填充表单，但它不允许我选择多个复选框行。

有没有办法让复选框不激活 rowselect 方法？或者是在单元格中的值的结果上创建超链接的替代方法，该单元格在传递 ID 之后调用代码中的方法？我的最后一个想法可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:19:02.420

您可能需要编写客户端代码 [javascript]，您可以添加标签 [server] 并为其添加 cellselect 选项。有关更多信息，请查看以下链接

[http://www.trirand.net/forum/default.aspx?g=posts&t=1452](http://www.trirand.net/forum/default.aspx?g=posts&t=1452)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:35:32.430

为了使复选框不激活 rowselect 事件，您可以使用 cellselect 代替 rowselect 函数。在 cellselect 函数下，如果不是复选框列，则检查列索引，然后执行您为 rowselect 编写的代码。

# com - IE如何加载特定文件类型的应用程序

> ID：10695060
> 
> 赞同：0
> 
> 时间：2012-05-22T02:32:05.750
> 
> 标签：com, activex

我有一个处理一组特定扩展的应用程序。如果我希望能够在我的 IE 浏览器中打开该应用程序，我必须支持什么？

从我的研究看来，我必须将我的应用程序实现为 COM 服务器并注册一个 MIME 处理程序。这样，当 IE 遇到我的扩展时，它可以使用 COM 在浏览器中加载我的应用程序并调用我的接口？

这是它应该如何工作的吗？我在想这就是如何在浏览器中加载 pdf 或 msdocs 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:55:39.740

[如何将 ActiveX 对象注册为媒体类型的播放器](http://msdn.microsoft.com/en-us/library/aa751976%28v=VS.85%29.aspx)

另请参阅[MimeType.exe 使 ActiveX 对象成为默认 MIME 类型播放器](http://support.microsoft.com/kb/165072)

# python - 在 Django 中以编辑表单（数据预填充）传递整个初始对象

> ID：10695061
> 
> 赞同：0
> 
> 时间：2012-05-22T02:32:07.310
> 
> 标签：python, django, django-forms

我有一个非常复杂的表格，我选择不使用`ModelForm`，因为我需要灵活性和对字段的控制。由于我没有使用`ModelForm`，我不能简单地做类似`instance=order`, where的事情`order = Order.objects.get(pk=1)`。

目前，我正在预先填充每个字段，与`initial`此`forms.py`相反`views.py`

```
self.fields['work_type'] = forms.ChoiceField(choices=Order.WORK_TYPE_CHOICES, initial=order.work_type) 
```

但我想知道是否可以将整个`order`对象传递给表单，还是必须向`initial`每个*字段*声明？

有没有办法做类似的事情

```
order_form = OrderEditForm(data=request.POST, initial=order) 
```

在`views.py`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:05:25.423

> 我有一个非常复杂的表单，我选择不使用 ModelForm，因为我需要灵活性和对字段的控制

您可以使用表单执行的所有操作，都可以在 ModelForm 中执行，例如添加新字段或覆盖字段上的属性等。

> 但我想知道是否可以将整个订单对象传递给表单，还是必须为每个字段声明初始值？

您可以将订单对象传递到表单中，但您仍然必须在表单或视图函数中单独填充每个字段。

所以在你看来，你会做这样的事情：

```
intial = {'order_number': order.number, 'order_id': order.id}

form = OrderForm(initial=initial) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:07:32.943

将数据预填充到表单的最简单方法是将字典作为第一个参数传递给表单构造函数。

```
order_form = OrderEditForm(order.__dict__()) 
```

where`__dict__()`是将“订单”对象属性传递给字典的方法，其中每个属性的名称作为键，它们的内容作为值。

如何“发明”这种方法的一个例子可能是这样的：

```
order_initial = Order.objects.filter(pk=order.pk).values()[0] 
```

然后构造表单：

```
order_form = OrderEditForm(order_initial) 
```

看[这个](https://docs.djangoproject.com/en/dev/topics/forms/#using-a-form-in-a-view)例子（他们如何在“发布”时间填充值）：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:49:14.877

供其他人参考：

我在阅读了 SO 的评论和答案后发现，`ModelForm`即使您最终手动明确定义每个字段（使用类似的东西`self.fields['foo'] = forms.CharField()`），也最好使用它。

在任何情况下，如果您尝试在表单中传递当前值的字典，那么将模型转换为字典的最佳（内置）方法实际上是使用`model_to_dict`：

```
from django.forms.models import model_to_dict

order = Order.objects.get(pk=1)
dictionary = model_to_dict(order)
form = OrderEditForm(dictionary) 
```

我从[这个博客](http://www.ironzebra.com/news/3/how-to-quickly-create-a-django-edit-form-from-object-instance)得到了解决方案。我希望这对某人有帮助。

# jquery - 数据绑定拆分按钮列表 jQuery Mobile

> ID：10695066
> 
> 赞同：0
> 
> 时间：2012-05-22T02:33:43.503
> 
> 标签：jquery, list, data-binding, jquery-mobile, split-button

我正在使用以下[教程](http://jquerymobile.com/test/docs/lists/lists-split.html)作为指南在 jQuery mobile 中创建拆分按钮列表。我需要将数据和处理程序绑定到每个按钮（在给定的列表元素内）。下面我概述了三种方法，但似乎都不起作用。谁能告诉我如何为拆分按钮列表绑定数据？

```
function createSingleList(dataArray) {
var i;
var list = $("<ul></ul>");
for (i = 0; i <= singleArray.length - 1; i = i + 1) {
    var button1 = $('<div><a id="button1" href="">Button 1</a><div>');
    var button2 = $('<div><a id="button2" href="">Button 2</a><div>');

    //Approach 1
    button1.data("data", dataArray[i])
    button2.data("data", dataArray[i])

    //Approach 2
    $("#button1").bind("click", {
        data: dataArray[i]
    }, clickHandler1);

    $("#button2").bind("click", {
        data: dataArray[i]
    }, clickHandler2);

    //Approach 3
    $("#button1").on("click", {
        data: dataArray[i]
    }, clickHandler1);

    $("#button2").on("click", {
        data: dataArray[i]
    }, clickHandler2);

    var listElement = $('<li></li>').html($(button1.html() + button2.html()));

    list.append(listElement);
   }
}

function clickHandler1(e) {
   alert(e.data);
}

function clickHandler2(e) {
   alert(e.data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:39:00.900

```
var list = $('<ul data-split-icon="some_icon"></ul>'); 
```

var html = ''; for (i = 0; i <= singleArray.length - 1; i++) {

```
var param1 = "'"+ dataArray[i] +"'";
html += '<li><a href="#" onclick="clickHandler1('+param1+')"></a>Button 1<a href="#" onclick="clickHandler2('+param1+')"></a>Button 2 </li>'; 
```

}

list.append($(html));

```
$('<ul>').trigger('create'); 
```

和

```
function clickHandler1(e){ 
```

警报（e）；

}

# service-layer - 外部 API 调用 - 数据访问层还是服务层？

> ID：10695070
> 
> 赞同：1
> 
> 时间：2012-05-22T02:33:58.483
> 
> 标签：service-layer, n-tier-architecture, picasa

我有一个 N 层应用程序：

1.  数据库
2.  领域层
3.  数据访问层
4.  服务层
5.  表示层（iOS、Android、MVC 3）

我正在尝试使用 Google Api for Picasa 供用户上传照片。在我的服务层中的数据访问层或 IImageService 中放置上传功能逻辑、picasa 身份验证的好地方在哪里？

我*认为*它应该在服务层内，但我不完全确定。

我还有一个图像域类

```
 public class Image
 {
    public int ImageId {get; set;}
    public string Name {get; set;}
    public string Src {get; set;}
    public string AltText {get; set;}
 } 
```

# php - 创建可自定义的书籍节点列表

> ID：10695080
> 
> 赞同：0
> 
> 时间：2012-05-22T02:37:11.643
> 
> 标签：php, drupal, module

我现在正在使用 Drupal 和 book 模块，它非常适合我的需要。

问题是，我需要一种方法来打印类似于书芯生成的导航，但这样我就可以更改它的输出。

如何打印出书芯/书本导航打印出的自定义版本？例如，这样我就可以更改 HTML 输出。

我希望这足够清楚，如果我需要添加任何内容以使问题更清楚，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:14:07.817

我不完全知道您想如何修改该块，但您有几个选择。

*   如果您不需要太大的更改，可能可以通过一些 CSS hacking 来完成
*   有一些模块可以做类似的事情，例如[Book Block](http://drupal.org/project/bookblock)或[Advanced Book Block](http://drupal.org/project/advancedbookblocks)
*   最后，您可以随时查看 book_block 函数，该函数会打印块并创建具有必要修改的自定义块

# c - 如何使用 C 搜索文件

> ID：10695088
> 
> 赞同：0
> 
> 时间：2012-05-22T02:39:37.427
> 
> 标签：c, file-io

在过去的几天里，我一直在寻找一种基于模式（例如 *-stack.txt）搜索文件的方法，并且一直很难找到这样做的方法，我说过我想知道是否有人知道这样做的方法？已经在谷歌等上搜索过，但找不到任何有用的东西：/这只会用于在 linux 目录中搜索与特定模式匹配的文件

（目录加out的例子）

```
/dev/shm/123-stack.txt abc-stack.txt overflow-stack.txt

searching for *-overflow.txt would return all of the above files 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:55:01.487

您最好的选择可能是[glob(3)](http://linux.die.net/man/3/glob)。它几乎完全符合您的要求。从你所说的正确代码的草图是

```
char glob_pattern[PATH_MAX];
glob_t glob_result;
snprintf(glob_pattern, PATH_MAX, "%s/%s", directory, file_pattern);
glob(glob_pattern, 0, NULL, &glob_result);
for (size_t i = 0; i < glob_result.gl_pathc; ++i) {
  char *path = glob_result.gl_pathv[i];
  /* process path */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:42:43.703

我认为您应该使用`opendir`系统调用，就像在[这个问题](https://stackoverflow.com/questions/3554120/open-directory-using-c)中描述的那样。

但除此之外还有很多工作要做——因此高级语言提供了更好的接口。

# python - 如何在 Flask-Login 中实现 user_loader 回调

> ID：10695093
> 
> 赞同：32
> 
> 时间：2012-05-22T02:40:23.957
> 
> 标签：python, authentication, login, flask, python-2.x

我正在尝试使用 Flask 和[Flask-Login](http://packages.python.org/Flask-Login)扩展在 Flask 应用程序中实现用户身份验证。目标是从数据库中提取用户帐户信息，然后登录用户，但我卡住了；但是，我已将其范围缩小到 Flask-Login 行为的特定部分。

根据[Flask-Login 文档](http://packages.python.org/Flask-Login/#how-it-works)，我需要创建一个 user_loader“回调”函数。这个函数的实际目的和实现让我困惑了几天：

> 您将需要提供一个 user_loader 回调。此回调用于从会话中存储的用户 ID 重新加载用户对象。它应该获取用户的 Unicode ID，并返回相应的用户对象。例如：
> 
> ```
> @login_manager.user_loader
> def load_user(userid):
>     return User.get(userid) 
> ```

现在，假设我希望用户在表单中输入名称和密码，检查数据库，然后登录用户。数据库的东西工作正常，对我来说没问题。

这个“回调”函数想要传递一个用户 ID #，并返回用户对象（我从数据库加载的内容）。但我并没有真正得到它应该检查/做的事情，因为无论如何用户ID都是从同一个地方提取的。我可以“有点”让回调工作，但它看起来很混乱/hackish，它会使用浏览器请求的每一个资源来访问数据库。我真的不想检查我的数据库以便在每次刷新页面时下载 favicon.ico，但 flask-login 似乎是在强迫这样做。

如果我不再次检查数据库，那么我无法从此函数返回用户对象。User 对象/类在烧瓶路由中创建用于登录，因此超出了回调的范围。

我想不通的是如何将一个用户对象传递给这个回调函数，而不必每次都访问数据库。或者，以其他方式找出如何以更有效的方式执行此操作。我一定错过了一些基本的东西，但我已经盯着它看了几天，向它扔了各种函数和方法，但没有任何效果。

以下是我的测试代码中的相关片段。用户类：

```
class UserClass(UserMixin):
     def __init__(self, name, id, active=True):
          self.name = name
          self.id = id
          self.active = active

     def is_active(self):
          return self.active 
```

我为将用户对象返回给 Flask-Login 的 user_loader 回调函数所做的函数：

```
def check_db(userid):

     # query database (again), just so we can pass an object to the callback
     db_check = users_collection.find_one({ 'userid' : userid })
     UserObject = UserClass(db_check['username'], userid, active=True)
     if userObject.id == userid:
          return UserObject
     else:
          return None 
```

我不完全理解的“回调”（必须返回用户对象，该对象是在从数据库中提取后创建的）：

```
@login_manager.user_loader
def load_user(id):
     return check_db(id) 
```

登录路径：

```
@app.route("/login", methods=["GET", "POST"])
def login():
     if request.method == "POST" and "username" in request.form:
          username = request.form["username"]

          # check MongoDB for the existence of the entered username
          db_result = users_collection.find_one({ 'username' : username })

          result_id = int(db_result['userid'])

          # create User object/instance
          User = UserClass(db_result['username'], result_id, active=True)

          # if username entered matches database, log user in
          if username == db_result['username']:
               # log user in, 
               login_user(User)
               return url_for("index"))
          else:
               flash("Invalid username.")
      else:
           flash(u"Invalid login.")
      return render_template("login.html") 
```

我的代码“有点”有效，我可以登录和注销，但正如我所说，它必须为所有内容访问数据库，因为我必须在与其他名称空间/范围不同的回调函数中提供用户对象的登录操作发生。我很确定我做错了，但我不知道怎么做。

flask-login 提供的示例代码[就是这样做](https://github.com/maxcountryman/flask-login/blob/master/example/login-example.py)的，但这只是因为它从全局硬编码字典中提取用户对象，而不是像数据库这样的真实场景中，必须检查数据库和在用户输入其登录凭据*后*创建的用户对象。而且我似乎找不到任何其他示例代码来说明使用带有烧瓶登录的数据库。

这里缺少什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-22T05:38:03.387

您需要在每次请求时从数据库加载用户对象。该要求的最强有力的原因是 Flask-Login 每次都会检查身份验证令牌以确保其持续有效性。该令牌的计算可能需要存储在用户对象上的参数。

例如，假设一个用户有两个并发会话。在其中之一中，用户更改了他们的密码。在随后的请求中，用户必须退出第二个会话并强制重新登录，以确保您的应用程序安全。想想第二个会话因为您的用户忘记注销计算机而被盗的情况——您希望更改密码以立即解决这种情况。您可能还希望让您的管理员能够将用户踢出。

为了发生这种强制注销，存储在 cookie 中的身份验证令牌必须 1) 部分基于密码或每次设置新密码时都会更改的其他内容；2) 在运行任何视图之前检查用户对象的最新已知属性 - 这些属性存储在数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-27T13:38:32.823

我确实和你一样担心 Edmond：每次需要知道用户的角色或名称时都访问数据库是疯狂的。最好的方法是将您的用户对象存储在会话甚至应用程序范围的缓存中，每隔几分钟从数据库中更新一次。我个人为此使用 Redis（这样网站可以在使用单个缓存入口点时由多个线程/进程运行）。我只是确保 Redis 配置了密码和非默认端口，并且任何机密数据（如用户哈希等）都以加密形式存储在那里。缓存可以由在指定时间间隔运行的单独脚本填充，或者可以在 Flask 中生成单独的线程。注意：Flask-Session 也可以配置为使用（相同的）redis 实例来存储会话数据，在这种情况下，将需要具有 'bytes' 数据类型的实例，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-13T03:06:21.557

这是我的代码，另一个`User`作为数据映射对象提供的`query_pwd_md5`方法。

用户登录：

```
@app.route('/users/login', methods=['POST'])
def login():
    # check post.
    uname = request.form.get('user_name')
    request_pwd = request.form.get('password_md5')

    user = User()
    user.id = uname

    try:
        user.check_pwd(request_pwd, BacktestUser.query_pwd_md5(
            uname, DBSessionMaker.get_session()
        ))
        if user.is_authenticated:
            login_user(user)
            LOGGER.info('User login, username: {}'.format(user.id))
            return utils.serialize({'userName': uname}, msg='login success.')
        LOGGER.info('User login failed, username: {}'.format(user.id))
        return abort(401)
    except (MultipleResultsFound, TypeError):
        return abort(401) 
```

用户等级：

```
class User(UserMixin):
"""Flask-login user class.
"""

def __init__(self):
    self.id = None
    self._is_authenticated = False
    self._is_active = True
    self._is_anoymous = False

@property
def is_authenticated(self):
    return self._is_authenticated

@is_authenticated.setter
def is_authenticated(self, val):
    self._is_authenticated = val

@property
def is_active(self):
    return self._is_active

@is_active.setter
def is_active(self, val):
    self._is_active = val

@property
def is_anoymous(self):
    return self._is_anoymous

@is_anoymous.setter
def is_anoymous(self, val):
    self._is_anoymous = val

def check_pwd(self, request_pwd, pwd):
    """Check user request pwd and update authenticate status.

    Args:
        request_pwd: (str)
        pwd: (unicode)
    """
    if request_pwd:
        self.is_authenticated = request_pwd == str(pwd)
    else:
        self.is_authenticated = False 
```

# ruby-on-rails - 在表单中使用 date_select 并希望拒绝日期为空

> ID：10695094
> 
> 赞同：0
> 
> 时间：2012-05-22T02:40:27.153
> 
> 标签：ruby-on-rails, nested-form-for

我有一个周期模型，包含 start_date 和 end_date。它属于一个主题模型。

在我的主题表单中，我也想管理期间。因此，首先我只为该期间的两个日期使用了两个文本字段。我也有一个reject_if end_date 为零。

```
 accepts_nested_attributes_for :period,
    reject_if: lambda { |p| p[:end_date].blank? } 
```

有用。几个月后，我将表单更改为使用 date_select，它显示了一些用于输入日期的选择语句。

当我这样做时，我发现每个选择都会是这样的：

```
<select name="topic[period_attributes][end_date(1i)]" id="topic_period_attributes_end_date_1i"> 
```

注意`1i`，这意味着我的reject_if 不再起作用，因为任何东西都会被拒绝。我需要更改为：

```
 accepts_nested_attributes_for :period,
    reject_if: lambda { |p| p[:'end_date(1i)']].blank? } 
```

这会起作用，但不如以前好（只检查日期的年份似乎容易出错）。

使用 date_select 时是否有正确的拒绝方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:54:17.990

`:end_date`您可以添加一个类帮助方法来检查属性的所有部分：

```
def self.date_populated?(params)
  ['1i', '2i', '3i'].select{|date_part| 
    params[:"end_date(#{date_part})"].blank?
  }.blank?
end 
```

并检查助手：

```
reject_if: lambda { |p| !date_populated?(p) } 
```

# c++ - “空记录器” - 将使用 ostream 运算符清空类，该运算符不会从优化代码中编译出来？

> ID：10695096
> 
> 赞同：4
> 
> 时间：2012-05-22T02:40:50.990
> 
> 标签：c++, performance

如果我有一个在发布模式下为空的日志记录类，并且有一个不执行任何操作的 ostream 运算符。它或多或少看起来像这样：

```
struct null_logger
{
    template<typename T> inline null_logger& operator<<(T) { return *this; }
}; 
```

我创建了一个简单的测试并将生成的程序集粘贴在下面：

```
const char* foo()
{
    return "hello";
}

int main()
{
    int i = 0;
    null_logger() << i << foo() << " this is a test";
    return 0;
} 
```

老实说，我并不完全了解大会。根据@Als 的建议，我已经查找了`call`没有的语句。因此可以安全地假设，在发布模式下，对这个 ostream 运算符的任何调用都将被编译出来？

这是生成的程序集，使用`g++ -O3 -S main.cpp`

```
 .file   "main.cpp"
    .section    .rodata.str1.1,"aMS",@progbits,1
.LC0:
    .string "hello"
    .text
    .p2align 4,,15
.globl _Z3foov
    .type   _Z3foov, @function
_Z3foov:
.LFB3:
    movl    $.LC0, %eax
    ret
.LFE3:
    .size   _Z3foov, .-_Z3foov
    .p2align 4,,15
.globl main
    .type   main, @function
main:
.LFB4:
    xorl    %eax, %eax
    ret
.LFE4:
    .size   main, .-main
    .section    .eh_frame,"a",@progbits
.Lframe1:
    .long   .LECIE1-.LSCIE1
.LSCIE1:
    .long   0x0
    .byte   0x1
.globl __gxx_personality_v0
    .string "zPR"
    .uleb128 0x1
    .sleb128 -8
    .byte   0x10
    .uleb128 0x6
    .byte   0x3
    .long   __gxx_personality_v0
    .byte   0x3
    .byte   0xc
    .uleb128 0x7
    .uleb128 0x8
    .byte   0x90
    .uleb128 0x1
    .align 8
.LECIE1:
.LSFDE1:
    .long   .LEFDE1-.LASFDE1
.LASFDE1:
    .long   .LASFDE1-.Lframe1
    .long   .LFB3
    .long   .LFE3-.LFB3
    .uleb128 0x0
    .align 8
.LEFDE1:
.LSFDE3:
    .long   .LEFDE3-.LASFDE3
.LASFDE3:
    .long   .LASFDE3-.Lframe1
    .long   .LFB4
    .long   .LFE4-.LFB4
    .uleb128 0x0
    .align 8
.LEFDE3:
    .ident  "GCC: (SUSE Linux) 4.3.4 [gcc-4_3-branch revision 152973]"
    .section    .comment.SUSE.OPTs,"MS",@progbits,1
    .string "Ospwg"
    .section    .note.GNU-stack,"",@progbits 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T03:23:25.460

不是对您的问题的直接回答，但通常您会以另一种方式禁用日志记录：您根本不评估`LOG_DBG`通过短路之后的任何内容，这很简单：

```
#ifdef NDEBUG
#define LOG_CHECK false &&
#elseif
#define LOG_CHECK /*empty*/

#define LOG_DBG LOG_CHECK /*your_debug_logging_code*/ 
```

这样，您可以保证之后的所有内容`LOG_DBG`都是可以在发布模式下优化的死代码。

请注意，即使它们没有被编译出来，由于短路，它们也不会在运行时执行。

现在，要使其真正起作用，`/*your_debug_logging_code*/`需要评估为布尔值，例如通过 safe-bool 习惯用法。例如，IOstreams 会这样做，让您知道流的状态是否仍然正常。

```
class Logger{
  typedef void (Logger::*safe_bool)();
  void safe_bool_check(){}
public:
  // ...

  operator safe_bool() const{
    return check_state() ? &Logger::safe_bool_check : 0;
  }
}; 
```

当然，如果你只是想让布尔转换使短路工作，你可以简单地`return 0;`在转换运算符中。

请注意，如果您使用的是最新版本的 GCC 或 Clang，您可能已经可以访问`explicit`转换运算符，[因此不需要 safe-bool idiom](https://stackoverflow.com/q/6242768/500104)：

```
explicit operator bool() const{ return check_state(); } 
```

* * *

另一种方法可能是使用三元运算符进行短路。然而，两个“分支”需要是相同的类型，所以我们将在这里使用一个小技巧，一个可以从任何东西构造的简单类：

```
namespace log_detail{
struct log_check_helper{
  log_check_helper(){}
  template<class T>
  log_check_helper(T const&){}
};
}

#ifdef NDEBUG
#define LOG_CHECK true ? log_detail::log_check_helper() : 
#else
#define LOG_CHECK /*empty*/
#endif

#define LOG_DBG LOG_CHECK /*your_debug_logging_code*/ 
```

使用一个编译但不评估 Ideone[上](http://ideone.com/JsM2a)的 IOstream 代码的工作示例。

# oop - 如何通过 OOP 传输 ifelse 代码段？

> ID：10695098
> 
> 赞同：1
> 
> 时间：2012-05-22T02:41:16.997
> 
> 标签：oop, design-patterns

我知道我应该按条件分解方法，并为每个子类实现接口，但我不知道客户端类如何使用它，你能给我简单的例子吗？

```
 public void buildInfoItemUpdater() {
    for (int i = 0; i < this.projectInfoInputItemUpdaters.size(); i++) {
        if (this.projectInfoInputItemUpdaters.get(i) instanceof ComboBoxUpdater) {
            ComboBoxUpdater tempItem = (ComboBoxUpdater) this.projectInfoInputItemUpdaters.get(i);
            projectInfoInputItemUpdaters.get(i).setAnswer(tempItem.getUserAnswer());
        } else if (this.projectInfoInputItemUpdaters.get(i) instanceof TextBoxUpdater) {
            TextBoxUpdater tempItem = (TextBoxUpdater) this.projectInfoInputItemUpdaters.get(i);
            projectInfoInputItemUpdaters.get(i).setAnswer(tempItem.getUserAnswer());
        } else if (this.projectInfoInputItemUpdaters.get(i) instanceof TextFieldUpdater) {
            TextFieldUpdater tempItem = (TextFieldUpdater) this.projectInfoInputItemUpdaters.get(i);
            projectInfoInputItemUpdaters.get(i).setAnswer(tempItem.getUserAnswer());
        }
    }
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:49:24.553

[正如@SirPentor 所建议的](https://stackoverflow.com/questions/10695098/how-to-transfer-ifelse-code-segment-by-oop/10697911#comment13884384_10695098)，如果 Updater 类有一个公共基类（我们称之为 UpdaterBase），那么在那里定义 getUserAnswer() 方法，很可能是抽象的。

然后你可以简化 buildInfoItemUpdater() 如下：

```
public void buildInfoItemUpdater() {
    for (int i = 0; i < this.projectInfoInputItemUpdaters.size(); i++) {
        UpdaterBase tempItem =
              (UpdaterBase) this.projectInfoInputItemUpdaters.get(i);
        projectInfoInputItemUpdaters.get(i).setAnswer(tempItem.getUserAnswer());
    }
} 
```

`this.projectInfoInputItemUpdaters.get(i)`此外，和 和有什么区别`projectInfoInputItemUpdaters.get(i)`？好像你在同一个对象上调用 get() 两次，对吧？您也可以简化这部分。

# php - 如何将默认索引设置为 index.html

> ID：10695099
> 
> 赞同：0
> 
> 时间：2012-05-22T02:41:19.583
> 
> 标签：php, html, wordpress

我正在构建 wordpress 网站，但还没有完成。我想将访问[http://domain.com](http://domain.com)的访问者重定向到[http://domain.com/under-construction](http://domain.com/under-construction)但我希望能够看到我的 index.php ...

我尝试将名称更改为 index.html index.htm default.asp .....它们都不起作用。

如果我使用`htaccess`它将我所有的页面重定向到 index.html 所以它不起作用。

有任何想法吗？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:42:32.967

在您的博客根目录中，将其放在您的 .htaccess 文件中：

```
DirectoryIndex index.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:44:02.173

您可以使用一个插件：[http ://wordpress.org/extend/plugins/maintenance-mode/](http://wordpress.org/extend/plugins/maintenance-mode/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T03:11:45.110

按照 Sudhir 的建议在 /.htaccess 中写入。在 /index.php 中写入 require('./under-construction/wp-blog-header.php');。在 /under-construction/ 和 /under-construction/index.php 中没有 .htaccess 写入 require('./wp-blog-header.php');。这就是我的情况。

# android - 创建自定义警报对话框？什么是根视图？

> ID：10695103
> 
> 赞同：17
> 
> 时间：2012-05-22T02:42:13.047
> 
> 标签：android

我想做的是：

创建自定义警报对话框。按钮就像任何警报对话框一样，但上面是两个 TextEdit 输入框。我不想创建自定义对话框，而是自定义警报对话框

这是我正在尝试的#3：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

它说：

```
AlertDialog.Builder builder;
AlertDialog alertDialog;

Context mContext = getApplicationContext();
LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.custom_dialog,
                           (ViewGroup) findViewById(R.id.layout_root));
TextView text = (TextView) layout.findViewById(R.id.text);
text.setText("Hello, this is a custom dialog!");

builder = new AlertDialog.Builder(mContext);
builder.setView(layout);
alertDialog = builder.create(); 
```

文档说：

```
View layout = inflater.inflate(R.layout.custom_dialog,
                           (ViewGroup) findViewById(R.id.layout_root)); 
```

其中第一个参数是布局资源 ID，第二个参数是根 View 的 ID。

问题是我不知道布局根是什么？这是我将在 Activity 中启动的对话框。如果活动，我应该使用布局ID吗？layout_root 是不是脱胎换骨了？

也试过：

```
 View layout = inflater.inflate(R.layout.my_custom_layout,
                                   (ViewGroup)   findViewById(android.R.id.content).getRootView()); 
```

结果空指针。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-07-13T08:48:01.957

即使是一个较旧的问题，这篇文章也可能对搜索此答案的其他人有用：

[**布局膨胀按预期**](http://www.doubleencore.com/2013/05/layout-inflation-as-intended/)：

> 如果您曾经在 Android 应用程序中使用 LayoutInflater 编写过类似以下代码：
> 
> ```
> inflater.inflate(R.layout.my_layout, null); 
> ```
> 
> 请继续阅读，因为您做错了，我想向您解释原因。

...**但是**...

> ### 每条规则都有例外
> 
> 当然，在某些情况下，您可以`null` 在通货膨胀期间真正证明父母是正当的，但它们很少。当您将自定义布局膨胀以附加到 **`AlertDialog`**. 考虑以下示例，我们希望使用相同的 XML 布局，但将其设置为对话框视图：
> 
> ```
> AlertDialog.Builder builder = new AlertDialog.Builder(context);
> View content = LayoutInflater.from(context).inflate(R.layout.item_row, null);
> 
> builder.setTitle("My Dialog");
> builder.setView(content);
> builder.setPositiveButton("OK", null);
> builder.show(); 
> ```
> 
> 这里的问题是 AlertDialog.Builder 支持自定义视图，但不提供采用布局资源的 setView() 的实现；所以你必须手动扩充 XML。然而，因为结果会进入对话框，它并没有暴露它的根视图（事实上，它还不存在），我们无法访问布局的最终​​父级，所以我们不能用它来膨胀. 事实证明，这无关紧要，因为 AlertDialog 无论如何都会擦除布局上的任何 LayoutParams 并用 match_parent 替换它们。

这篇文章解释了为什么在对话框构建之外的大多数其他情况下*应该*提供父级。`ViewGroup`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:22:22.747

你试过这个吗？

```
View layout = inflater.inflate(R.layout.custom_dialog,null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T04:03:06.317

好的。文档中的根视图是指自定义布局中的元素。所以自定义布局将有一个称为根视图的最外层视图。你需要给它一个 Id，然后你可以将它传递进去，如图所示。所以第一个参数是自定义视图 id，第二个参数是自定义视图中根布局元素的 id。

```
 View layout = inflater.inflate(R.layout.custom_dialog,
                       (ViewGroup) findViewById(R.id.layout_root)); 
```

因此，在上面文档中给出的这个示例中，R.id.layout_root 指的是您提供的 id，例如 custom_dialog 布局中最外层的 LinearLayout。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T16:38:49.623

```
builder.setView(layout);
layout.getRootView(); 
```

应该给`LinearLayout`。

# java - Java 在 ^ 上拆分（插入符号？）不起作用，这是一个特殊字符吗？

> ID：10695104
> 
> 赞同：26
> 
> 时间：2012-05-22T02:42:27.603
> 
> 标签：java, split

在 Java 中，我试图拆分`^`字符，但它无法识别它。转义`\^`会引发代码错误。

这是一个特殊字符还是我需要做其他事情才能让它识别它？

```
String splitChr = "^";
String[] fmgStrng = aryToSplit.split(splitChr); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-22T02:45:58.817

The`^`是 Java 正则表达式中的一个特殊字符 - 它表示“匹配输入的开头”。

您将需要使用`"\\^"`. 需要双斜杠来转义`\`，否则 Java 的编译器会认为您正在尝试`\^`在字符串中使用特殊序列，类似于`\n`换行符。

`\^`不是一个特殊的转义序列，所以你会得到编译器错误。

简而言之，使用`"\\^"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:57:06.853

以上答案都没有任何意义。这是正确的解释。

1.  众所周知，Java String 中的 ^ 不需要转义。
2.  由于 ^ 是 RegulalExpression 中的特殊字符，它希望您传入 \^
3.  我们如何在java中制作字符串\^？像这样 `String splitstr = "\\^";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T02:45:41.173

^ 匹配字符串的开头。您需要转义它，但在这种情况下，您需要转义它，以便正则表达式解析器理解这意味着转义转义，所以：

```
String splitChr = "\\^";
... 
```

应该得到你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T02:46:01.857

`String.split()`接受一个正则表达式。符号是一个特殊符号，`^`表示输入序列的开始。您需要逃脱它才能使其工作。你试图用它来转义它是对的，`\`但它是一个特殊字符来转义Java字符串中的东西，所以你需要用另一个`\`. 它会给你：

```
\\^ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T02:47:07.490

使用`"\\^"`. 使用此示例作为指南：

```
 String aryToSplit = "word1^word2";
    String splitChr = "\\^";
    String[] fmgStrng = aryToSplit.split(splitChr); 
    System.out.println(fmgStrng[0]+","+fmgStrng[1]); 
```

它应该打印“word1,word2”，有效地使用`"\\^"`. 第一个斜线用于转义第二个斜线。如果没有双斜线，Java 会认为 ^ 是一个转义字符，就像换行符一样`"\n"`

# php - 如何阻止用户伪造请求？或者如何检测虚假请求？

> ID：10695107
> 
> 赞同：2
> 
> 时间：2012-05-22T02:42:35.310
> 
> 标签：php, javascript, ajax, http, request

假设您有一个包含单个按钮的网站。

当按下此按钮时，将向服务器发送一个 ajax 请求 - 服务器接收请求并在其数据库的内部计数器中添加 1。

用户可以复制整个请求（及其标头）并创建一个脚本来发送无限请求以使服务器过载（并弄乱计数器）。

我试图避免：

1.  记录用户IP
2.  使用验证码

我在后端使用 php。有什么办法可以防止这种情况发生吗？有什么方法可以发送“隐形”请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:06:19.793

您的问题称为“跨站点请求伪造”。

解决此问题的一个好方法是在调用带有按钮的页面时生成一个随机字符串，将其写入用户会话和生成的页面，并与您的按钮按下一起发送（例如在 GET要求）。

在后端，您检查提交的字符串是否与用户会话中的字符串匹配，然后从会话中删除该字符串。仅当两个字符串匹配且不为空时才继续。

这样，每个请求 URL 仅有效一次，并且仅对最初打开带有按钮的页面的用户有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T02:46:23.403

您可以创建一个分配给按钮的唯一令牌，并且只能在按下按钮时提交一次。

这意味着用户将需要刷新页面以获取新按钮，如果这是一个问题，请将令牌与用户而不是按钮相关联

上述方法意味着您需要添加服务器端代码。您可能可以使用[evercookie](http://samy.pl/evercookie/)之类的东西来记录客户端上的按钮按下并尝试阻止用户发送另一个请求并接收来自用户的另一个请求 - 我不建议在产品中这样做，但这可能很有趣;)

* * *

生病尝试更清楚一点：

生成按钮，以便它提交一个表单，其中包含一个名为“uuid”的隐藏字段，该字段包含该按钮的预生成 uuid。此 uuid 需要保存在数据库或内存中。如果您使用良好的 uuid 库，则用户生成现有 uuid 的机会微乎其微。

现在，用户单击按钮，操作转到 /my-button/?uuid=3394b0e0-a3bb-11e1-b3dd-0800200c9a66

现在服务器检查 uuid 是否是以前生成的。如果是，它会从其存储位置中删除 uuid，并让操作执行任何操作。uuid 不存在，它返回 404。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T02:58:32.693

你不可能知道请求是如何发起的，你所能做的就是让它更难伪造。但是，如果这与安全有关，那么您最需要注意的是能够成功伪造请求的人。因此，尝试将其作为某种安全措施可能是无用的（甚至是误导性的）。

您可以尝试使用服务器仅在特定时间限制内接受一次的加密密钥，但您仍然不知道请求是如何发起的（而且您真的不应该依赖它）。按钮是一种 UI 功能，可以根据用户代理已配置为呈现给用户的任何内容（如果有用户参与）转换为其他一些 UI 工件。

# database - pg_hba.conf 文件

> ID：10695109
> 
> 赞同：5
> 
> 时间：2012-05-22T02:43:11.270
> 
> 标签：database, postgresql

有人可以在ubuntu上为postgresql 9.1发布未经编辑的pg_hba.conf文件的原始副本。我把它搞砸了，找不到原件，也无法重新安装。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T03:20:28.333

事实上，您可以接收此文件的唯一方法是其他人将在他的机器上运行**initdb**并通过电子邮件或通过某些主机将文件发送给您。

**官方**的方式是（文档说）：

> 客户端身份验证由配置文件控制，该文件传统上命名为 pg_hba.conf 并存储在数据库集群的数据目录中。**当数据目录由 initdb 初始化时，会安装**一个默认的 pg_hba.conf 文件。但是，可以将身份验证配置文件放在其他地方；请参阅 hba_file 配置参数。

**更新：** 这是您要找的[pg_hba.conf **(**](http://pastebin.com/SCPMvTh3) pastebin.com *)吗？*这是我现在在 Debian 6 上安装 PostgreSQL 9.1 时收到的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T04:59:16.787

我手头没有 Ubuntu，但在大多数情况下有三个规则（其余的只是评论）。在大多数发行版中，该方法设置为 ident。

```
# TYPE  DATABASE        USER            CIDR-ADDRESS            METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     ident
# IPv4 local connections:
host    all             all             127.0.0.1/32            ident
# IPv6 local connections:
host    all             all             ::1/128                 ident 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:10:29.010

您不能再次运行 initdb 来创建一个具有新 pg_hba.conf 的新数据库集群吗？

# php - $_FILES 内容空白

> ID：10695112
> 
> 赞同：-1
> 
> 时间：2012-05-22T02:43:32.247
> 
> 标签：php, file, file-upload, upload

我对 php 中的 $_FILES 全局变量有疑问。当我在我的文件数组上执行 print_r 时，我得到一个空白数组（） 1 显示（但我已经上传了一个文件，其中包含来自另一页表单的帖子）。上传的 post 变量（上传是输入类型 = 文件名）设置为文件名，但 Files 中没有设置任何内容，如果我尝试调用 $_FILES['upload']['name'] 没有任何显示。这可能是什么原因造成的？当我提交表单时，我有一堆不同的字段（文本框、选择框、复选框等），但这不应该影响我的文件上传吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T02:45:07.460

确保您的表单标签具有`enctype=multipart/form-data`属性集：

```
<form action="test.php" method="POST" enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:45:53.670

您需要确保您的表单具有该`enctype`属性，例如：

```
<form method="post" enctype="multipart/form-data">
    <input type="file" name="fileUpload"/>
    <input type="submit"/>
</form> 
```

# ios - 使用 ARC 的 UIImageView 内存泄漏

> ID：10695117
> 
> 赞同：3
> 
> 时间：2012-05-22T02:44:12.627
> 
> 标签：ios, memory-leaks

在 DetailViewController.h 中：@property`(weak, nonatomic) IBOutlet UIImageView *recipeImage;`

在 DetailViewController.m

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.recipeTitle.text = rec.title;
    self.recipeDetail.text = rec.details;
    NSString *fileName = [NSString stringWithFormat: @"%@/%@", [[NSBundle mainBundle] resourcePath], rec.image];
    UIImage *tmp = [[UIImage alloc] initWithContentsOfFile: fileName];
    self.recipeImage.image = tmp;
    NSLog(@"%@", rec.image);
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    recipeTitle = nil;
    recipeDetail = nil;
    recipeImage = nil;
    rec = nil;
} 
```

由于某种原因 recipeImage UIImageView IBOutlet 导致内存泄漏

![在此处输入图像描述](../Images/b06bb46d461f109a9a62adf381cf1644.png)

![在此处输入图像描述](../Images/cb8ed285d2ec4b92624a2d4a84c8870a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:57:05.843

唔。我对此感到有些惊讶，因为我在您的代码中没有看到任何明显的泄漏。所以我做了一个小测试项目（Xcode 4.3.2、iPhone 模拟器 5.1、ARC、故事板），看看我是否可以重现你的问题并通过分析器运行它，瞧，没有发现泄漏。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.label1.text = @"Line 1";
    self.label2.text = @"Line 2";

    NSString *filename = [NSString stringWithFormat: @"%@/%@", [[NSBundle mainBundle] resourcePath], @"IMG_0999.PNG"];

    UIImage *image = [[UIImage alloc] initWithContentsOfFile:filename];

    self.image1.image = image;
} 
```

和你一样，我使用了弱属性：

```
@property (weak, nonatomic) IBOutlet UILabel *label1;
@property (weak, nonatomic) IBOutlet UILabel *label2;
@property (weak, nonatomic) IBOutlet UIImageView *image1; 
```

我不认为 API 超出了泄漏范围（例如，我肯定在 Twitter API 中看到了一些泄漏），但我无法重现您的问题。

我觉得有一些合乎逻辑的可能性（这是一个延伸）：首先，你的 PNG 有什么独特之处吗？也许与我们分享，我可以在我的测试中尝试一下。或者，也许您可​​以尝试其他一些 PNG 文件。或者你可以像我一样做，这是一个超级简单的项目，可以尝试重现泄漏，看看你是否在测试项目中遇到同样的问题。其次，泄漏可能在您的代码中的其他地方吗？我知道这些与 malloc 相关的泄漏并不适合将您指向相关代码，所以我想知道您的泄漏是否可能来自其他地方。

底线，我试图重现你的问题，但不能。看起来可能需要进一步诊断。

**更新：**

图像文件格式非常复杂，如果您查看[PNG 描述](http://en.wikipedia.org/wiki/Portable_Network_Graphics)，您会发现 iOS 算法可能存在泄漏的十几个潜在区域（可能是因为 iOS 逻辑中的错误，或者是 PNG 文件的一些问题）。显然，它不应该泄漏，但显然 iOS 确实预期或正确处理了一些排列。似乎值得[http://bugreport.apple.com](http://bugreport.apple.com)。无论如何，我建议在您选择的图形编辑器中打开并重新保存 PNG 文件。有一个外部机会可以解决它。

# objective-c - 反转 UILabel.text 值

> ID：10695125
> 
> 赞同：0
> 
> 时间：2012-05-22T02:45:31.720
> 
> 标签：objective-c, ios, cocoa-touch

我有一个我正在完成的程序，它是一个名称生成器。现在它从 2 个单独的数组中获取一个随机值，将它们连接起来并将结果显示为标签。text -- 我想要一个按钮来反转标签文本（而不是 John Doe，它会说 Doe John）。这是我用来执行此操作的代码。我的想法是，我使用数组中的相同值，然后将字符串分配给一个变量，以便稍后在另一个名为“reverseNameValue”或其他方法的方法中使用。它不起作用:) 当我单击“反向”按钮时，它完全显示了一个不同的名称。有什么建议吗？

```
- (IBAction)generateBName:(id)sender {
int a = arc4random() % 3;
int b = arc4random() % 3;

// populate the array for the names
NSArray *firstNameArray = [NSArray arrayWithObjects: @"Jacob",
                           @"Ethan",
                           @"Justin", nil];
NSArray *middleNameArray = [NSArray arrayWithObjects: @"Jose",
                            @"Jeremiah",
                            @"Julian", nil];

// concatenate strings at index of array
NSString *fullName = [NSString stringWithFormat:@"%@ %@", [firstNameArray objectAtIndex:a], [middleNameArray objectAtIndex:b]];
NSString *reverseName = [NSString stringWithFormat:@"%@ %@", [firstNameArray objectAtIndex:b], [middleNameArray objectAtIndex:a]];

// display the newly created first & middle names
reverseNameString = reverseName;
babyname.text = fullName; 
```

和相反的方法：

```
- (IBAction)reverseLabel:(id)sender {
babyname.text = reverseNameString;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:51:19.767

您设置 reverseName 字符串的行的名称是向后的，因此它先获取名字，然后是中间名，但索引相反。它应该是：

```
 NSString *reverseName = [NSString stringWithFormat:@"%@ %@", [middleNameArray objectAtIndex:b],[firstNameArray objectAtIndex:a]]; 
```

# batch-file - 批处理文件：无法使用写字板打开特定文件并保存

> ID：10695128
> 
> 赞同：0
> 
> 时间：2012-05-22T02:45:54.357
> 
> 标签：batch-file

最初我使用批处理文件捕获了一个文件，并使用记事本打开它。如何对批处理文件进行编码，以便使用写字板保存。

批处理文件：

```
Remarks:This document is for Linksys for version v4.30.5, the auto sensing part.
"C:\Program Files (x86)\Wireless Guard\wget" "http://192.168.1.254/xslt@PAGE=C_2_0"
copy "xslt@PAGE=C_2_0" "xslt@PAGE=C_2_0.txt"
del "xslt@PAGE=C_2_0" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:41:52.690

您实际上不需要做任何事情就可以使用写字板保存它。如前所述，批处理文件输出为纯文本，因此您可以根据需要使用写字板打开它。

您可以使用以下方法批量执行此操作：

`write txtfile.txt`

或者要永久关联写字板，请将其设置为控制面板中的默认 txt 程序。

希望这可以帮助。

# cloud-foundry - Cloudfoundry 中的 remoteAddr

> ID：10695131
> 
> 赞同：2
> 
> 时间：2012-05-22T02:46:19.130
> 
> 标签：cloud-foundry

我开发了一个 grails 应用程序，它使用 request.remoteAddr 来识别访问者所在的国家/地区。我将应用程序推送到 cloudfoundry，它运行良好，但 remoteAddr 的所有值都是 cloudfoundry 内部的，比如 172.30.49.25，所以我的应用程序不识别任何国家。[我在http://www.ip2location.com/demo](http://www.ip2location.com/demo)中尝试了这个地址- 结果相同。

那么问题来了：如何在 CloudFoudry 中部署的 Grails 或 Java 应用程序中获取用户的实际 IP 地址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T23:17:51.437

您应该能够从`X-Cluster-Client-IP`或`X-Forwarded-For`HTTP 请求标头中获取此数据。

就像是：

```
request.getHeader("X-Cluster-Client-IP") 
```

# android - 如何检测互联网连接

> ID：10695133
> 
> 赞同：0
> 
> 时间：2012-05-22T02:46:41.093
> 
> 标签：android

> **可能重复：**
> [Android 检测设备是否有互联网连接](https://stackoverflow.com/questions/6493517/android-detect-if-device-has-internet-connection)

我有一个程序，我只允许连接互联网的安卓用户可以访问，其他没有互联网连接的用户会提醒他们连接到互联网，如果没有连接问题将退出。

我的主要活动代码如下。如果移动用户连接了互联网，我想显示主布局，但如果没有连接，则提醒用户先连接互联网。

我该怎么做？请帮我。

# 我的主要活动：

```
public class MainSong extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  //My Profile
    Button myProfile = (Button) findViewById(R.id.myprofile);

    myProfile.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent();
            i.setClassName("aaa.bbb.ccc", "aaa.bbb.ccc.myprofile");
            startActivity(i); }
    });

  //My Songs
    Button mySong = (Button) findViewById(R.id.mysongs);
    mySong.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent();
            i.setClassName("aaa.bbb.ccc", "aaa.bbb.ccc.mysong");
            startActivity(i); }
    });

    //bar album
    Button album = (Button) findViewById(R.id.myalbum);
    album.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent();
            i.setClassName("aaa.bbb.ccc", "aaa.bbb.ccc.myalbum");
            startActivity(i); }
    });

    //bar video
    Button video = (Button) findViewById(R.id.myvideo);
    video.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent();
            i.setClassName("aaa.bbb.ccc", "aaa.bbb.ccc.myvideo");
            startActivity(i); }
    });
}
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:48:57.753

您可以使用 ConnectivityManager 检查用户是否连接到互联网：

```
public boolean checkNetworkStatus() {

    final ConnectivityManager connMgr = (ConnectivityManager) this
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    final android.net.NetworkInfo wifi = connMgr
            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    final android.net.NetworkInfo mobile = connMgr
            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if (wifi.isAvailable()) {
     if (wifiInfo.getState() == NetworkInfo.State.CONNECTED)
      {
        Toast.makeText(this, "Wifi connection.", Toast.LENGTH_LONG).show();
        return true;
      }
      else
      {
        Toast.makeText(this, "No Connect using wifi connection.", Toast.LENGTH_LONG).show();
        return false;
      }
    } else if (mobile.isAvailable()) {
      if (mobile.getState() == NetworkInfo.State.CONNECTED)
      {
        Toast.makeText(this, "Connected using GPRS connection.", Toast.LENGTH_LONG).show();
        return true;
      }
      else
      {
        Toast.makeText(this, "No Connect using GPRS connection.", Toast.LENGTH_LONG).show();
        return false;
      }

    } else {
        Toast.makeText(this, "No network connection.", Toast.LENGTH_LONG).show();
        return false;
    }       

} 
```

**AndroidManifest.xml：**

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:00:15.747

```
//To check whether network connection is available on device or not
public static boolean checkInternetConnection(Context _activity) {
        ConnectivityManager conMgr = (ConnectivityManager) _activity.getSystemService(Context.CONNECTIVITY_SERVICE);
        if (conMgr.getActiveNetworkInfo() != null
                && conMgr.getActiveNetworkInfo().isAvailable()
                && conMgr.getActiveNetworkInfo().isConnected()) 
            return true;
        else
            return false;
    }//checkInternetConnection() 
```

**AndroidManifest.xml：**

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:03:57.777

这是我在我的 Android 应用程序中使用的代码：

```
 CharSequence network_fail = "This application requires that you are connected to the Internet.";
            int duration = Toast.LENGTH_SHORT;
            boolean isAvailable = false;

            // Check availability of network connection
            try
            {
                ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
                if(cm == null)
                    isAvailable = false;
                else
                    isAvailable = cm.getActiveNetworkInfo().isAvailable();
            }
            catch(Exception e){} 
```

如果：

```
 // Check if user is connected to the Internet, and show an error if they are not.
            if(isAvailable && (isAirplaneModeOn(context) == false))
            {
              // Internet-reliant code
            }
            else
            {
                Toast fail = Toast.makeText(context, network_fail, duration);
                fail.show();
            } 
```

`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />`您还需要在您的 AndroidManifest.xml 文件中使用我的代码强制执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T07:00:30.893

您应该`BroadcastReceiver`在连接状态发生变化时触发一个：

```
 public class BroadCastSampleActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.registerReceiver(this.mConnReceiver,
                new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
    }
    private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
            boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

            NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

            if(currentNetworkInfo.isConnected()){
                Toast.makeText(getApplicationContext(), "Connected", Toast.LENGTH_LONG).show();
            }else{
                Toast.makeText(getApplicationContext(), "Not Connected", Toast.LENGTH_LONG).show();
            }
        }
    };
} 
```

然后在你的`AndroidManifest`你可以检查你是否有连接：

```
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

供参考[here来源](http://paragchauhan2010.blogspot.com)

# html - HTML 搜索功能

> ID：10695134
> 
> 赞同：0
> 
> 时间：2012-05-22T02:46:54.883
> 
> 标签：html, search

我需要在 Intranet 上的搜索功能，我可以纯粹在 HTML 中执行此操作吗？如果是这样，您能否指出我正确的方向，我尝试用谷歌搜索它，但它通过搜索引擎进行搜索。

干杯

编辑：我只需要它在 1 页上搜索文本，它不是整个网站，只是一页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:48:34.793

您**将**需要一些服务器端脚本来提供目录列表。

我建议递归地使用 PHP 的`[glob](http://php.net/manual/en/function.glob.php)`函数，但可能有更好的选择。

编辑：

对于一个页面，使用 JavaScript，您可以获取所有元素的内容，并使用[正则表达式](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)或`[indexOf](http://www.w3schools.com/jsref/jsref_indexof.asp)`确定字符串是否存在于文本中，如果存在，则*在哪里*。

如果您要使用该`indexOf`函数，因为该函数只返回字符串**第一次**出现的索引，您将需要重复搜索，直到您收集了所有出现。

您可以指定`start`参数来剪切搜索区域的前面，以便在您最后一次找到的事件*之后开始新的搜索。*

# c# - 如果 AllowPaging 为 False，gridview 中的选中项目是否会被取消选中？

> ID：10695138
> 
> 赞同：0
> 
> 时间：2012-05-22T02:47:51.097
> 
> 标签：c#, gridview, checkbox

我有一个 13 页的 gridview，每页有 5 个项目。第一列是一个复选框，我想在所有页面中获取所有选中的项目。

所以我想遍历整个 GRIDVIEW 并获取所有检查项目。那可能吗？或者如果我将 AllowPaging 设置为 false 并重新绑定它，所有选中的项目都会被取消选中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:37:50.677

无论是否使用分页，当您再次绑定gridview 时，所有检查都将消失。您需要做的是设置一个全局变量，如果所有复选框都应该被选中，它将保存该值，并且在 gridview_rowdatabound 事件中，即使您启用了分页，它也会再次检查复选框。

# python - 按第二项（整数值）对元组列表进行排序

> ID：10695139
> 
> 赞同：502
> 
> 时间：2012-05-22T02:48:02.687
> 
> 标签：python, list, tuples

我有一个看起来像这样的元组列表：

```
[('abc', 121),('abc', 231),('abc', 148), ('abc',221)] 
```

我想按元组内的整数值升序对该列表进行排序。是否可以？

* * *

## 回答 #1

> 赞同：762
> 
> 时间：2012-05-22T02:51:36.023

尝试使用`key`关键字 with `sorted()`。

```
sorted([('abc', 121),('abc', 231),('abc', 148), ('abc',221)], 
       key=lambda x: x[1]) 
```

`key`应该是一个函数，用于标识如何从数据结构中检索可比较元素。在您的情况下，它是元组的第二个元素，因此我们访问`[1]`.

对于优化，请参阅 jamylak 使用 的响应`itemgetter(1)`，它本质上是一个更快的版本`lambda x: x[1]`。

* * *

## 回答 #2

> 赞同：225
> 
> 时间：2012-05-22T02:51:24.010

```
>>> from operator import itemgetter
>>> data = [('abc', 121),('abc', 231),('abc', 148), ('abc',221)]
>>> sorted(data,key=itemgetter(1))
[('abc', 121), ('abc', 148), ('abc', 221), ('abc', 231)] 
```

在这种情况下， IMO using`itemgetter`比@cheeken 的解决方案更具可读性。它也更快，因为几乎所有的计算都将在`c`旁边完成（不是双关语），而不是通过使用`lambda`.

```
>python -m timeit -s "from operator import itemgetter; data = [('abc', 121),('abc', 231),('abc', 148), ('abc',221)]" "sorted(data,key=itemgetter(1))"
1000000 loops, best of 3: 1.22 usec per loop

>python -m timeit -s "data = [('abc', 121),('abc', 231),('abc', 148), ('abc',221)]" "sorted(data,key=lambda x: x[1])"
1000000 loops, best of 3: 1.4 usec per loop 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2015-03-29T17:50:13.270

添加到 Cheeken 的答案中，这就是您如何按第二项按**降序对元组列表进行排序**。

```
sorted([('abc', 121),('abc', 231),('abc', 148), ('abc',221)],key=lambda x: x[1], reverse=True) 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2013-11-20T22:49:59.440

作为一个 python 新手，我只想提一下，如果数据确实看起来像这样：

```
data = [('abc', 121),('abc', 231),('abc', 148), ('abc',221)] 
```

then`sorted()`将自动按元组中的第二个元素排序，因为第一个元素都是相同的。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2017-06-30T18:13:23.223

对于就地排序，请使用

```
foo = [(list of tuples)]
foo.sort(key=lambda x:x[0]) #To sort by first element of the tuple 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-05-22T02:54:10.873

来自 python 维基：

```
>>> from operator import itemgetter, attrgetter    
>>> sorted(student_tuples, key=itemgetter(2))
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]    
>>> sorted(student_objects, key=attrgetter('age'))
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)] 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-02-16T02:58:13.143

对于避免 lambda 的方法，首先定义您自己的函数：

```
def MyFn(a):
    return a[1] 
```

然后：

```
sorted([('abc', 121),('abc', 231),('abc', 148), ('abc',221)], key=MyFn) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-02-05T11:01:05.483

对于`Python 2.7+`，这使接受的答案更具可读性：

```
sorted([('abc', 121),('abc', 231),('abc', 148), ('abc',221)], key=lambda (k, val): val) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-01T15:15:15.507

OP 中的排序值是整数这一事实与问题本身无关。换句话说，如果排序值为文本，则接受的答案将起作用。我提出这一点还指出可以在排序期间修改排序（例如，考虑大写和小写）。

```
>>> sorted([(121, 'abc'), (231, 'def'), (148, 'ABC'), (221, 'DEF')], key=lambda x: x[1])
[(148, 'ABC'), (221, 'DEF'), (121, 'abc'), (231, 'def')]
>>> sorted([(121, 'abc'), (231, 'def'), (148, 'ABC'), (221, 'DEF')], key=lambda x: str.lower(x[1]))
[(121, 'abc'), (148, 'ABC'), (231, 'def'), (221, 'DEF')] 
```

# web-services - 什么是好的 SaaS 消息队列系统？

> ID：10695140
> 
> 赞同：2
> 
> 时间：2012-05-22T02:48:03.467
> 
> 标签：web-services, message-queue, saas, data-synchronization, simperium

我正在考虑使用类似消息队列的系统作为 Web 应用程序的后端，以提供 Web 服务器、移动应用程序和浏览器之间的同步。是否有任何现有的交钥匙 SaaS 解决方案？该解决方案最好能理解 JSON。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:45:18.310

当我问这个问题时，我实际上想到了一家特定的创业公司，但我终生无法记住公司的名称。但现在我想起来了：[Simperium](https://simperium.com/)

此外，[Firebase](http://www.firebase.com/)与 Simperium 类似，而且可能更成熟。

* * *

[Parse](http://www.parse.com)解决了类似的需求（托管后端），但它是 RESTful，因此无法解决相同的问题。

# java - 用分隔符拆分带引号的字符串

> ID：10695143
> 
> 赞同：7
> 
> 时间：2012-05-22T02:48:56.337
> 
> 标签：java, string, split

我想用分隔符空格分割一个字符串。但它应该智能地处理带引号的字符串。例如对于像这样的字符串

```
"John Smith" Ted Barry 
```

它应该返回三个字符串 John Smith、Ted 和 Barry。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T03:12:23.890

在弄乱它之后，您可以为此使用正则表达式。运行相当于“匹配所有”的：

```
((?<=("))[\w ]*(?=("(\s|$))))|((?<!")\w+(?!")) 
```

Java 示例：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class Test
{ 
    public static void main(String[] args)
    {
        String someString = "\"Multiple quote test\" not in quotes \"inside quote\" \"A work in progress\"";
        Pattern p = Pattern.compile("((?<=(\"))[\\w ]*(?=(\"(\\s|$))))|((?<!\")\\w+(?!\"))");
        Matcher m = p.matcher(someString);

        while(m.find()) {
            System.out.println("'" + m.group() + "'");
        }
    }
} 
```

输出：

```
'Multiple quote test'
'not'
'in'
'quotes'
'inside quote'
'A work in progress' 
```

可以在此处查看上面使用的示例的正则表达式细分：

[http://regex101.com/r/wM6yT9](http://regex101.com/r/wM6yT9)

* * *

尽管如此，正则表达式不应该是所有事情的解决方案——我只是在玩。这个例子有很多边缘情况，例如处理 unicode 字符、符号等。对于这类任务，最好使用经过验证的真实库。在使用此答案之前，请查看其他答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T03:35:13.743

试试这段丑陋的代码。

```
 String str = "hello my dear \"John Smith\" where is Ted Barry";
    List<String> list = Arrays.asList(str.split("\\s"));
    List<String> resultList = new ArrayList<String>();
    StringBuilder builder = new StringBuilder();
    for(String s : list){
        if(s.startsWith("\"")) {
            builder.append(s.substring(1)).append(" ");
        } else {
            resultList.add((s.endsWith("\"") 
                    ? builder.append(s.substring(0, s.length() - 1)) 
                    : builder.append(s)).toString());
            builder.delete(0, builder.length());
        }
    }
    System.out.println(resultList); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T03:35:29.793

好吧，我做了一个小片段，可以做你想做的事情和更多的事情。由于您没有指定更多条件，因此我没有遇到麻烦。我知道这是一种肮脏的方式，您可能可以通过已经制作的东西获得更好的结果。但是为了编程的乐趣，这里是一个例子：

```
 String example = "hello\"John Smith\" Ted Barry lol\"Basi German\"hello";
    int wordQuoteStartIndex=0;
    int wordQuoteEndIndex=0;

    int wordSpaceStartIndex = 0;
    int wordSpaceEndIndex = 0;

    boolean foundQuote = false;
    for(int index=0;index<example.length();index++) {
        if(example.charAt(index)=='\"') {
            if(foundQuote==true) {
                wordQuoteEndIndex=index+1;
                //Print the quoted word
                System.out.println(example.substring(wordQuoteStartIndex, wordQuoteEndIndex));//here you can remove quotes by changing to (wordQuoteStartIndex+1, wordQuoteEndIndex-1)
                foundQuote=false;
                if(index+1<example.length()) {
                    wordSpaceStartIndex = index+1;
                }
            }else {
                wordSpaceEndIndex=index;
                if(wordSpaceStartIndex!=wordSpaceEndIndex) {
                    //print the word in spaces
                    System.out.println(example.substring(wordSpaceStartIndex, wordSpaceEndIndex));
                }
                wordQuoteStartIndex=index;
                foundQuote = true;
            }
        }

        if(foundQuote==false) {
            if(example.charAt(index)==' ') {
                wordSpaceEndIndex = index;
                if(wordSpaceStartIndex!=wordSpaceEndIndex) {
                    //print the word in spaces
                    System.out.println(example.substring(wordSpaceStartIndex, wordSpaceEndIndex));
                }
                wordSpaceStartIndex = index+1;
            }

            if(index==example.length()-1) {
                if(example.charAt(index)!='\"') {
                    //print the word in spaces
                    System.out.println(example.substring(wordSpaceStartIndex, example.length()));
                }
            }
        }
    } 
```

这还会检查引号前后没有用空格分隔的单词，例如“John Smith”之前和“Basi German”之后的单词“hello”。

当字符串被修改为`"John Smith" Ted Barry`输出时是三个字符串，1) "John Smith" 2) Ted 3) Barry

示例中的字符串是 hello"John Smith" Ted Barry lol"Basi German"hello 并打印 1)hello 2)"John Smith" 3)Ted 4)Barry 5)lol 6)"Basi German" 7)hello

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T03:35:18.047

commons-lang 有一个 StrTokenizer 类来为你做这件事，还有 java-csv 库。

使用 StrTokenizer 的示例：

```
String params = "\"John Smith\" Ted Barry"
// Initialize tokenizer with input string, delimiter character, quote character
StrTokenizer tokenizer = new StrTokenizer(params, ' ', '"');
for (String token : tokenizer.getTokenArray()) {
   System.out.println(token);
} 
```

输出：

```
John Smith
Ted
Barry 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T04:23:00.360

[这是我自己的版本，从http://pastebin.com/aZngu65y](http://pastebin.com/aZngu65y)清理（发布在评论中）。它可以处理 Unicode。它会清理所有多余的空间（即使是在报价中）——这取决于需要是好是坏。不支持转义引用。

```
private static String[] parse(String param) {
  String[] output;

  param = param.replaceAll("\"", " \" ").trim();
  String[] fragments = param.split("\\s+");

  int curr = 0;
  boolean matched = fragments[curr].matches("[^\"]*");
  if (matched) curr++;

  for (int i = 1; i < fragments.length; i++) {
    if (!matched)
      fragments[curr] = fragments[curr] + " " + fragments[i];

    if (!fragments[curr].matches("(\"[^\"]*\"|[^\"]*)"))
      matched = false;
    else {
      matched = true;

      if (fragments[curr].matches("\"[^\"]*\""))
        fragments[curr] = fragments[curr].substring(1, fragments[curr].length() - 1).trim();

      if (fragments[curr].length() != 0)
        curr++;

      if (i + 1 < fragments.length)
        fragments[curr] = fragments[i + 1];
    }
  }

  if (matched) { 
    return Arrays.copyOf(fragments, curr);
  }

  return null; // Parameter failure (double-quotes do not match up properly).
} 
```

用于比较的样本输入：

```
"sdfskjf" sdfjkhsd "hfrif ehref" "fksdfj sdkfj fkdsjf" sdf sfssd

asjdhj    sdf ffhj "fdsf   fsdjh"
日本語　中文 "Tiếng Việt" "English"
    dsfsd    
   sdf     " s dfs    fsd f   "  sd f   fs df  fdssf  "日本語　中文"
""   ""     ""
"   sdfsfds "   "f fsdf 
```

（第 2 行为空，第 3 行为空格，最后一行格式错误）。请根据您自己的预期输出来判断，因为它可能会有所不同，但基线是，第一种情况应该返回 [sdfskjf, sdfjkhsd, hfrif ehref, fksdfj sdkfj fkdsjf, sdf, sfssd]。

# c++ - 为什么下面的代码用 MSVC++ 编译？

> ID：10695148
> 
> 赞同：11
> 
> 时间：2012-05-22T02:50:00.830
> 
> 标签：c++, templates, visual-c++, c++11, decltype

```
struct X{};

template<class T>
decltype(X() == int()) f(T const&){ return true; }

int main(void) {
  X x;
  f(x);
} 
```

为什么，只是*为什么*？*任何地方*都没有`operator==`定义！

 *我真的很想了解这里发生了什么，以提供有关 MS Connect 的详细错误报告。[我的](https://chat.stackoverflow.com/transcript/message/3791988#3791988)疯狂之旅始于Lounge<C++> 聊天室……

（注意：[GCC](http://ideone.com/JV6Co)和 Clang 都不接受此代码。）

哦，顺便说一句，添加私有`X(int)`ctor 会导致编译失败：

```
struct X{
    X(){}
private:
    X(int);
};

template<class T>
decltype(X() == int()) f(T const&){ return true; }

int main(void) {
  X x;
  f(x);
} 
```

输出：

```
1>src\main.cpp(12): error C2248: 'X::X' : cannot access private member declared in class 'X'
1>          src\main.cpp(4) : see declaration of 'X::X'
1>          src\main.cpp(1) : see declaration of 'X' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T03:11:44.437

您使用的是什么版本的 MS VC++？

无论价值如何，VC++11 Beta 都会拒绝您的代码：

```
trash.cpp(8): error C2893: Failed to specialize function template ''unknown-type' f(const T &)'
          With the following template arguments:
          'X' 
```

我不确定这是否是我所说的最有用或信息最丰富的错误消息，但它*拒绝*了代码。

在这种情况下，我猜提交错误报告可能收效甚微（如果有的话）。我期望的响应基本上是：“已经在 VC++11 中修复。尽可能升级。”*

# java - 嵌套回调的Java模式？

> ID：10695152
> 
> 赞同：43
> 
> 时间：2012-05-22T02:50:18.330
> 
> 标签：java, design-patterns, asynchronous, callback, nested

我正在寻找一种 Java 模式来进行嵌套的非阻塞方法调用序列。就我而言，某些客户端代码需要异步调用服务来执行某些用例，并且该用例的每个步骤本身都必须异步执行（出于此问题范围之外的原因）。想象一下，我有如下现有接口：

```
public interface Request {} 

public interface Response {} 

public interface Callback<R extends Response> {
    void onSuccess(R response);
    void onError(Exception e);
} 
```

`Request`和接口有多种成对的实现`Response`，即`RequestA`+ `ResponseA`（由客户端提供）、`RequestB`+ `ResponseB`（由服务内部使用）等。

处理流程如下所示：

![显示嵌套回调的序列图。](../Images/608510e767994a8319e83d796bbe7aa7.png)

在收到每个响应和发送下一个请求之间，需要进行一些额外的处理（例如，基于任何先前请求或响应中的值）。

到目前为止，我已经尝试了两种用 Java 编写代码的方法：

*   匿名类：由于需要嵌套而很快变得丑陋
*   内部类：比上面的更整洁，但其他开发人员仍然难以理解执行流程

是否有一些模式可以使这段代码更具可读性？例如，我可以将服务方法表示为一个自包含操作的列表，这些操作由一些负责嵌套的框架类按顺序执行吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T05:56:37.420

由于实现（不仅是接口）不能阻塞，我喜欢你的列表想法。

设置一个“操作”列表（可能是`Future`s？），其设置应该非常清晰易读。然后在收到每个响应后，应该调用下一个操作。

稍微想象一下，这听起来像是[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)。这是我想象的一些伪代码：

```
public void setup() {
    this.operations.add(new Operation(new RequestA(), new CallbackA()));
    this.operations.add(new Operation(new RequestB(), new CallbackB()));
    this.operations.add(new Operation(new RequestC(), new CallbackC()));
    this.operations.add(new Operation(new RequestD(), new CallbackD()));
    startNextOperation();
}
private void startNextOperation() {
    if ( this.operations.isEmpty() ) { reportAllOperationsComplete(); }
    Operation op = this.operations.remove(0);
    op.request.go( op.callback );
}
private class CallbackA implements Callback<Boolean> {
    public void onSuccess(Boolean response) {
        // store response? etc?
        startNextOperation();
    }
}
... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T06:56:15.190

在我看来，对这类问题建模最自然的方法是使用[`Future<V>`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html).

因此，不要使用回调，而是返回一个“thunk”：a `Future<Response>`，它表示将来某个时候可用的响应。

然后，您可以将后续步骤建模为类似的东西`Future<ResponseB> step2(Future<ResponseA>)`，或者使用[`ListenableFuture<V>`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/ListenableFuture.html)Guava。然后，您可以使用[`Futures.transform()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/Futures.html#transform%28com.google.common.util.concurrent.ListenableFuture,%20com.google.common.base.Function,%20java.util.concurrent.Executor%29)它的重载之一以自然的方式链接您的函数，但同时仍保留异步性质。

如果以这种方式使用，`Future<V>`其行为就像一个 monad（事实上，我认为它可能有资格作为一个，虽然我不确定我的头顶），所以整个过程感觉有点像 Haskell 中执行的 IO通过 IO 单子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T05:00:03.467

您可以使用参与者计算模型。在您的情况下，客户端、服务和回调 [BD] 都可以表示为参与者。

java有很多actor库。然而，它们中的大多数都是重量级的，所以我写了一个紧凑且可扩展的：[df4j](https://github.com/rfqu/df4j "df4j")。它将actor模型视为更通用的数据流计算模型的一个特定案例，因此允许用户创建新类型的actor，以最佳地满足用户的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T07:32:32.207

我不确定我是否正确地回答了你的问题。如果你想调用一个服务并且它的完成结果需要传递给其他可以使用结果继续处理的对象。您可以考虑使用 Composite 和 Observer 来实现这一点。

# python - 如何导入 Python 命名空间包的所有子模块？

> ID：10695162
> 
> 赞同：7
> 
> 时间：2012-05-22T02:51:49.983
> 
> 标签：python, python-module

Python 命名空间包可以分布在许多目录、zip 文件或自定义导入器中。迭代命名空间包的所有可导入子模块的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:11:57.903

请阅读[导入混淆](http://effbot.org/zone/import-confusion.htm)。

它非常清楚地区分了您可以导入包及其子模块的所有不同方式，并在此过程中回答了您的问题。当您需要某个包中的某个子模块时，编写起来通常比 . 方便`from io.drivers import zip`得多`import io.drivers.zip`，因为前者允许您将模块简单地称为 zip 而不是其全名。

`from modname import *`，这提供了一种将模块中的所有项目导入当前命名空间的简单方法；但是，应谨慎使用此语句。

# javascript - 如何使用 jQuery 显示默认选项卡 - 手动编码选项卡，而不是 jQuery UI

> ID：10695163
> 
> 赞同：1
> 
> 时间：2012-05-22T02:52:09.643
> 
> 标签：javascript, jquery, html, tabs, default

我手动编写了我的选项卡结构，它并不完全遵循 jQuery UI 默认选项卡结构。现在我想在页面加载时将第一个选项卡显示为默认选项卡，但这似乎没有发生。任何帮助，将不胜感激。

```
<div class="container">
    <div id="tabs">
        <ul class="tabNavi">
            <li><a href="#tabs_1">Tab1</a>
        </li>
        <li><a href="#tabs_2">Tab2</a>
        </li>
        </ul>
        <div id="tabs_1"></div>
        <div id="tabs_2" style="overflow: hidden; display: block;"></div>
    </div>
</div> 
```

我使用的jQuery代码如下：

```
tabnone: function(){
    $('#tabs ul.tabNavi li a').each(function(){
        $(this).removeClass('active');
        var divIDS = $(this).attr('href').substr(0,10);
        var divID = divIDS.split(',');
        $('div#'+divID).slideUp(25);
    });
},

setupNavigation: function() {
    $('#tabs ul.tabNavi li a').each(function(){
        var divIDS = $(this).attr('href').substr(0,10);
        var divID = divIDS.split(',');
        $('div#'+divID).hide();
    });

    $('#tabs ul.tabNavi li a').each(function(){
        if ($(this).hasClass('active')) {
            var divIDS = $(this).attr('href').substr(0,10);
            var divID = divIDS.split(',');
            $('div#'+divID).slideDown(250);
        }
    });

    $('#tabs ul.tabNavi li a').ready(function(){
        if (!$(this).hasClass('active')) {
            $(this).addClass('active');
            var divContent = $(this).attr('href').substr(0,10);
            var div_ID = divContent.split(',');
            // Show the div
            alert(div_ID);
            $('div#'+div_ID).show();
            $('div#'+div_ID).slideDown(250);
        }
     });

     $('#tabs ul.tabNavi li a').click(function(){
         if (!$(this).hasClass('active')) {
             GATECore.Pages.IndexHelper.tabnone();
             $(this).addClass('active');
             var divContent = $(this).attr('href').substr(0,10);
             var div_ID = divContent.split(',');
             // Show the div
             $('div#'+div_ID).show();
             $('div#'+div_ID).slideDown(250);
         }
    });
} 
```

# c# - 将日期格式转换为 mm-dd-yyyyy

> ID：10695165
> 
> 赞同：0
> 
> 时间：2012-05-22T02:52:34.240
> 
> 标签：c#, asp.net, datetime, foreach

我正在用日期填充列表“结果”。在查询结果中，我得到一组值..其中日期值采用这种格式..

> 20120510000000000

在我的代码中，我正在执行以下操作..

```
 query = service.GetData();
    List<String> results = new List<String>();
    foreach (var item in query)
    {
        results.Add(item.InDate);  
        //This is in this format - 20120510000000000
        //Here I want to convert to mm-dd-yyyy                              
    }
    return results; 
```

我想将上述日期格式转换为“mm/dd/yyyy”并将其发布到“结果”列表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:59:36.360

```
query = service.GetData();
    List<String> results = new List<String>();
    foreach (var item in query)
    {
        var unformattedDate = item.InDate;
        var formattedDate = DateTime.ParseExact(unformattedDate,
                                    "yyyyMMddHHmmssfff",
                                    System.Globalization.CultureInfo.InvariantCulture)
        results.Add(formattedDate);                              
    }
    return results; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T02:58:22.713

如果日期保证为 [year][month][day][hour][minute][second][millisecond] 格式（看起来像），您可以使用简单的字符串操作：

```
var newDate = item.InDate.Substring(2, 2) + "-" +
              item.InDate.Substring(4, 2) + "-" +
              item.InDate.Substring(0, 4); 
```

如果你想在 DateTime 对象中使用它，你可以使用 DateTime.ParseExact 方法：

```
var newDate = DateTime.ParseExact(indate, "yyyyMMddHHmmssfff", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T04:24:29.763

上面提供的答案是正确的。更好地存储您期望的日期格式和您要转换为显示的日期格式，将其存储在配置文件或资源文件中。硬编码不好。

# ruby - 在 Ruby 中访问/处理变量

> ID：10695168
> 
> 赞同：2
> 
> 时间：2012-05-22T02:53:01.667
> 
> 标签：ruby

让我先声明我是一名“新”程序员——一名 IT 人员在完成各种教程后尝试解决他的第一个“真正”问题。

所以 - 这就是我想要做的。我正在查看 .csv 文件的目录 - 它将采用以下格式：999999_888_filename.csv

我想将“_”文件名的每个部分作为变量返回，以传递给另一个程序/脚本以执行其他任务。我想出了以下代码：

```
require 'rubygems'
require 'fssm'

class Watcher

def start
  monitor = FSSM::Monitor.new(:directories => true)
  monitor.path('/data/testing/uploads') do |path|
    path.update do |base, relative, ftype| 
      output(relative)
    end
    path.create do |base, relative, ftype| 
      output(relative)
    end
    path.delete { |base, relative, ftype| puts "DELETED #{relative} (#{ftype})" }   
  end
  monitor.run
end

def output(relative)
  puts "#{relative} added"
  values    = relative.split('_',)
  sitenum  = values[0]
  numrecs  = values[1]
  filename = values[2]
  puts sitenum
 end
end 
```

我的第一个“puts”给了我完整的文件名（它只是在那里显示脚本正在运行），第二个 puts 返回了“sitenum”。我希望能够访问此输出方法的“外部”。我在 libs/ 文件夹中有这个文件（名为 watcher.rb），我在项目根目录中有第二个文件，名为“monitor.rb”，它只包含：

```
require './lib/watcher'

watcher = Watcher.new
watcher.start 
```

而且我不知道如何从这个文件中访问我的“sitenum”、“numrecs”和“filename”。我不确定它是否需要是变量、实例变量或什么。我玩过 attr_accessible 和其他东西，但没有任何效果。我决定在这里问，因为我一直在旋转我的轮子来做几件事，而且我开始通过自己的搜索来迷惑自己。

提前感谢您提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:57:44.657

在`Watcher`类的顶部，您将要定义三个`attr_accessor`声明，它们给出了您想要的行为。（`attr_reader`如果你只是在阅读，`attr_writer`如果你只是在写作，`attr_accessor`如果两者兼而有之。）

```
class Watcher
    attr_accessor :sitenum, :numrecs, :filename

    ... 
    # later on, use @ for class variables
    ...
        @sitenum = 5
    ...
end 
```

现在你应该对 etc 没有任何问题`watcher.sitenum`。这是[一个例子](http://codepad.org/bhG3Qbw8)。

**编辑：**一些错别字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T03:46:03.440

除了 Jordan Scales 的回答，这些变量应该初始化

```
class Watcher
  attr_accessor :sitenum, :numrecs, :filename

  def initialize
    @sitenum = 'default value'
    @numrecs = 'default value'
    @filename = 'default value'
  end

  ...
end 
```

否则你会得到无意义的价值`nil`

# actionscript-3 - 如何设置 MonsterDebugger 和 FlashDevelop？

> ID：10695171
> 
> 赞同：0
> 
> 时间：2012-05-22T02:53:51.790
> 
> 标签：actionscript-3, flash, flashdevelop

我正在尝试遵循[MonsterDebugger 给出的指示，](http://demonsterdebugger.com/tour/quick-start)我已经链接了 SWC，添加了代码。然后建项目。

他们说的最后一句话：“发布你的项目，看着奇迹发生。”

我得到的是一个构建到 http 目录的 SWF，我的 PHP 文件在该目录中提取它并在浏览器中显示它。

我期望/想要的是通过浏览器与我的 SWF 应用程序交互并使用 MonsterDebugger 对其进行调试。

我显然遗漏了一些东西，因为怪物工具似乎无法将自己附加到 SWF？我不确定 Monster 如何知道我发布的 SWF？

我正在使用 FlashDevelop/FlashCS5 和 Actionscript 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:50:30.477

抱歉，如果这是一个愚蠢的问题，但在浏览器中发布和打开项目后，您是否真的启动了 Monster Debugger.exe？还有 MonsterDebugger.initialize(); 如果您在我想的服务器上发布和访问您的项目，则有第二个参数是地址。你试过改变它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:31:38.420

我的错。我在文档文件的构造函数中最后执行了 MonsterDebugger.initialize() 语句。我将初始化语句移动到构造函数的第一行。现在它附上了。显然在初始化之前执行了一些导致问题的代码。现在一切都很好，因为它是文档文件中的第一行。

# android - Android Asynctask HTTP 未在 ListView 中显示结果？

> ID：10695173
> 
> 赞同：1
> 
> 时间：2012-05-22T02:54:02.557
> 
> 标签：android, android-listview, android-asynctask

我对 Android 编程很陌生，所以任何帮助都会很棒:) 我正在尝试远程获取一些虚拟数据，解析 json 响应并将其显示在列表视图中。

这是我尝试与列表活动一起使用的 xml 布局文件：-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <ListView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/list"
    />
</LinearLayout> 
```

这是我的 http 搜索活动：-

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.net.ParseException;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class searchResultActivity extends ListActivity {

    ListView listview;
    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    String url;
    String fd_name;
    ArrayList<String> listItems;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        /*setContentView(R.layout.test);
        listview = (ListView)findViewById(R.id.list);*/
        url = "http://pjchambers.comuf.com/index.php";
        new getData().execute();
    }

    public class getData extends AsyncTask<String, Void, ArrayList<String>> {

        protected ArrayList<String> doInBackground(String...urls) {
            // TODO Auto-generated method stub
            listItems = new ArrayList<String>();

            try {
                // Set of http statements setting up the connections to the php
                // and database
                HttpClient httpclient = new DefaultHttpClient();
                HttpGet httpget = new HttpGet(url);
                HttpResponse response = httpclient.execute(httpget);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection" + e.toString());
            }

            // convert response to string
            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                sb = new StringBuilder();
                sb.append(reader.readLine() + "\n");
                String line = "0";
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }

            // paring data
            try {
                JSONArray jArray = new JSONArray(result);
                JSONObject json_data = null;
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    fd_name = json_data.getString("Name");
                    listItems.add(fd_name);
                }
            } catch (JSONException e1) {
                Toast.makeText(getBaseContext(), "No Results Found",
                        Toast.LENGTH_LONG).show();
            } catch (ParseException e1) {
                e1.printStackTrace();
            }

            Log.d("debug", "- " + listItems.toString());
            return listItems;
        }

        protected void doPostExecute() {
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                    searchResultActivity.this, android.R.layout.simple_list_item_1, R.id.list, listItems);
            setListAdapter(adapter);
        }

    }

} 
```

我花了几个小时尝试不同的方法和方法，使用了一些不同的在线教程，但它们都以相同的结果结束。就目前而言，该应用程序可以正常工作，但会显示显示；但是，如果我在 onCreate 方法中声明布局，应用程序就会崩溃。必须感谢任何帮助或建议，新的眼睛可能会立即注意到问题

这是我取消注释这两个语句后的 logcat

```
05-22 12:12:20.234: D/debug(631): - [The Arena, Empire]
05-22 12:12:42.004: I/dalvikvm(691): threadid=3: reacting to signal 3
05-22 12:12:42.244: I/dalvikvm(691): Wrote stack traces to '/data/anr/traces.txt'
05-22 12:12:42.404: D/gralloc_goldfish(691): Emulator without GPU emulation detected.
05-22 12:12:48.415: I/dalvikvm(691): threadid=3: reacting to signal 3
05-22 12:12:48.424: I/dalvikvm(691): Wrote stack traces to '/data/anr/traces.txt'
05-22 12:12:50.595: D/AndroidRuntime(691): Shutting down VM
05-22 12:12:50.595: W/dalvikvm(691): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-22 12:12:50.614: E/AndroidRuntime(691): FATAL EXCEPTION: main
05-22 12:12:50.614: E/AndroidRuntime(691): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.project.barcrawl/com.project.barcrawl.searchResultActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.os.Looper.loop(Looper.java:137)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-22 12:12:50.614: E/AndroidRuntime(691):  at java.lang.reflect.Method.invokeNative(Native Method)
05-22 12:12:50.614: E/AndroidRuntime(691):  at java.lang.reflect.Method.invoke(Method.java:511)
05-22 12:12:50.614: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-22 12:12:50.614: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-22 12:12:50.614: E/AndroidRuntime(691):  at dalvik.system.NativeStart.main(Native Method)
05-22 12:12:50.614: E/AndroidRuntime(691): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.ListActivity.onContentChanged(ListActivity.java:243)
05-22 12:12:50.614: E/AndroidRuntime(691):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:254)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.Activity.setContentView(Activity.java:1835)
05-22 12:12:50.614: E/AndroidRuntime(691):  at com.project.barcrawl.searchResultActivity.onCreate(searchResultActivity.java:41)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.Activity.performCreate(Activity.java:4465)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-22 12:12:50.614: E/AndroidRuntime(691):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-22 12:12:50.614: E/AndroidRuntime(691):  ... 11 more
05-22 12:12:51.004: I/dalvikvm(691): threadid=3: reacting to signal 3
05-22 12:12:51.024: I/dalvikvm(691): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:54:35.610

您在 XML 中的 id 应该`id="@android:id/list"`可以工作。在您的代码中，将创建一个新 id 作为“您的” R.class 的一部分，它不同于`android.R.id.list`. 因此无法找到列表视图并因此引发异常。

此外，构造函数的第三个参数`ArrayAdapter`应该是要填充数据的文本资源的 id。你正在通过`R.id.list`这是错误的。如果我没记错的话，`android.R.id.simple_list_item_1`它应该是它定义的资源。`android.R.id.text1`

# networking - 数据包中源和目标字段的 MAC 地址

> ID：10695174
> 
> 赞同：0
> 
> 时间：2012-05-22T02:54:10.433
> 
> 标签：networking

我一直对以下问题感到好奇：

假设有一台PC连接到交换机A，交换机A又连接到路由器B。这台路由器又连接到路由器C。现在，路由器C连接到交换机D，交换机D连接到服务器E。

那么，如果 PC 发送一个目标为 Server E 的数据包，那么数据包中目标和源字段的 MAC 地址区域是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:04:38.293

源将是通过 PC 上的路由表确定的*传出*网卡的 MAC 地址。目的地将是路由器 B 上面向交换机 A 的网卡的 MAC 地址，通过 PC 上的路由表和地址解析协议 (ARP) 结果再次确定。

# ios - 通过 XCode 提交应用程序时出错

> ID：10695177
> 
> 赞同：53
> 
> 时间：2012-05-22T02:54:27.517
> 
> 标签：ios, xcode

我今晚尝试提交一个应用程序，我可以验证应用程序找到，但是当我去提交时，收到以下错误：

`Apple's web service operation was not successful`

`Unable to Authenticate the package`

`exception occurred when creating MZContentProviderUpload`

有没有其他人看到这个错误？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-11-05T19:25:26.167

刚刚在 Xcode 7 上发生了这种情况。退出 Xcode，打开它，重新提交，它工作正常。

编辑：我在评论中同意@arlomedia，这是苹果方面的一个问题。只是再次发生并重新启动并没有解决它。也许我第一次很幸运:)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-22T04:55:43.917

从苹果的角度来看，这似乎是一个暂时的问题。现在应该已经修好了。再次尝试上传。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-16T10:24:16.867

我看到一条略有不同的错误消息，连续六次：

```
Exception occurred when creating MZContentProviderUpload for provider. (1004) 
```

重新启动我的mac，重新提交并繁荣 - 工作。

不能确定是否是重新启动，正如其他答案所指出的那样，可能只是苹果服务器上的某些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T19:50:51.330

我一直得到它好几天，直到我将部署目标从 3.1.3 更改为 4.3。

我的错误还说“该捆绑包不包含完全 '72x72' 像素的 iPad 图标”。我检查了图标并更新了 5 次 :)

# java - Android：从 MySQL 数据库填充列表视图？

> ID：10695181
> 
> 赞同：0
> 
> 时间：2012-05-22T02:54:55.100
> 
> 标签：java, android, mysql, json, listview

我有一些来自 mysql 的数据，我正在从我的手机应用程序中检索这些数据。用多个数据填充列表视图的最佳方法是什么？我有这样简单的事情：

```
try {
        JSONArray jArray = new JSONArray(result);
        int jArrayLength = jArray.length();
        List<String> listContents = new ArrayList<String>(jArrayLength);

        for(int i =0; i<jArray.length(); i++){

            JSONObject json_data = jArray.getJSONObject(i);
            listContents.add(json_data.getString("full_name"));

        }

        ListView myListView = (ListView) findViewById(R.id.front_page_listview);
        myListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listContents));

    }catch(JSONException e){
        Log.e("log_tag","Error parsin data "+e.toString());
    } 
```

我可以很好地添加名称，但是如果我想在同一行中获得更多信息怎么办？即：电子邮件，生日等...

```
listContents.add(json_data.getString("full_name"),json_data.getString("email")); 
```

给我错误。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:07:26.420

我不认为列表视图可以有“列”，所以你应该连接这些字符串。喜欢：

```
listContents.add(json_data.getString("full_name")+ ' ' +json_data.getString("email")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:13:35.780

定义数组适配器

```
 ArrayList<String> al = new ArrayList<String>(); 
            String fullName; 
```

然后通过 http 获取值并在数组适配器（a1）上设置：

尝试{

```
 jArray = new JSONArray(result);
                    JSONObject json_data = null;
                    for (int i = 0; i < jArray.length(); i++) {
                        json_data = jArray.getJSONObject(i); 
                        targetamount=json_data.getString("full_name");

                        al.add(fullName); 

                    }
                } 
```

现在执行事件：

```
 protected void onPostExecute(final Void unused) {  
                 this.progressDialog.dismiss(); 
                try{
                         ListView listview = (ListView) findViewById(R.id.listView1);  
                        this.progressDialog.dismiss();  
                         listview.setAdapter(new DataAdapter(DemoActivity.this,al.toArray(new String[al.size()])));

                    }
                    catch(Exception e){

                        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
                    } 

            } 
```

想了解有关此问题的更多信息，然后转到以下链接：

[http://p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/](http://p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/)

[http://fahmirahman.wordpress.com/2011/04/21/connection-between-php-server-and-android-client-using-http-and-json/](http://fahmirahman.wordpress.com/2011/04/21/connection-between-php-server-and-android-client-using-http-and-json/)

[http://www.helloandroid.com/tutorials/connecting-mysql-database](http://www.helloandroid.com/tutorials/connecting-mysql-database) 和 [http://www.androidhive.info/2012/03/android-listview-with-load-more-button/](http://www.androidhive.info/2012/03/android-listview-with-load-more-button/)

# ruby-on-rails - 用于用户组的最佳 Rails Gem 是什么？

> ID：10695183
> 
> 赞同：0
> 
> 时间：2012-05-22T02:55:59.547
> 
> 标签：ruby-on-rails, ruby, rubygems, usergroups

我希望用户能够创建组并加入他们。这已经有宝石了吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-22T04:43:36.297

阅读如何在 rails 中执行 has_many :through 或 has_and_belongs_to_many 关联

# c# - 在 ImageResizer 中解析图像路径

> ID：10695186
> 
> 赞同：1
> 
> 时间：2012-05-22T02:56:07.697
> 
> 标签：c#, asp.net, string, imageresizer

我正在动态调整图像大小：

```
ImageJob i = new ImageJob(file, "~/eventimages/<guid>_<filename:A-Za-z0-9>.<ext>", 
    new ResizeSettings("width=200&height=133&format=jpg&crop=auto"));
i.Build(); 
```

我正在尝试将图像相对 URL 存储在数据库中。该`i.FinalPath`物业给了我：

```
C:\inetpub\wwwroot\Church\eventimages\56b640bff5ba43e8aa161fff775c5f97_scenery.jpg 
```

如何仅获取图像文件名 - 解析它的最佳方法？

所需字符串：/eventimages/56b640bff5ba43e8aa161fff775c5f97_scenery.jpg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:51:50.907

只需使用正则表达式

```
Regex.Match 
```

创建您的模式并提取所需的值

```
string input = "C:\\inetpub\\wwwroot\\Church\\eventimages\\56b640bff5ba43e8aa161fff775c5f97_scenery.jpg";
Match match = Regex.Match(input, @"^C:\\[A-Za-z0-9_]+\\[A-Za-z0-9_]+\\[A-Za-z0-9_]+\\([A-Za-z0-9_]+\\[A-Za-z0-9_]+\.jpg)$", RegexOptions.IgnoreCase);
if (match.Success)
{
    // Finally, we get the Group value and display it.
    string path = match.Groups[1].Value.Replace("\\", "/");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T03:59:10.810

像下面的东西，

```
var sitePath = MapPath(@"~");
var relativePath= i.FinalPath.Replace(sitePath, "~"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:25:50.987

这是我在实用程序方法中使用的内容：

```
Uri uri1 = new Uri(i.FinalPath);
Uri uri2 = new Uri(HttpContext.Current.Server.MapPath("/"));
Uri relativeUri = uri2.MakeRelativeUri(uri1); 
```

（从别人那里偷来的……不记得是谁了，但是谢谢）

# node.js - Node.js：使用多个胡子模板

> ID：10695195
> 
> 赞同：0
> 
> 时间：2012-05-22T02:57:31.323
> 
> 标签：node.js, mustache

我正在尝试将 mustache 模板分解为各种组件，以便我可以重用它们，并通过 node.js 返回组合文本。我找不到做过这件事的人。

我可以返回必须疼痛的页面暗示：

```
function index(request, response, next) {
    var stream = mu.compileAndRender('index.mu', 
        {name: "Me"}
        );
    util.pump(stream, response);
} 
```

我只是不知道如何渲染模板并在另一个模板中使用它。我试过像这样单独渲染它：

```
function index(request, response, next) {
    var headerStream = mu.compileAndRender('header.mu', {title:'Home page'});
    var headerText;

    headerStream.on('data', function(data) {
       headerText = headerText + data.toString();
    });

    var stream = mu.compileAndRender('index.mu',        
        {
            heading: 'Home Page',
            content: 'hello this is the home page',
            header: headerText
        });
    util.pump(stream, response);
} 
```

但问题是标题没有在页面之前呈现，即使我做到了。标题被视为显示文本而不是 html。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:56:55.933

您需要将行`var stream = ...`和`util.pump(...`in 放入`headerStream.on('end', function () { /* here */ });`，以便在`headerStream`将所有数据发送到您的`data`侦听器之后运行它们。

要包含原始 HTML，您必须使用三重大括号：`{{{raw}}}`在您的模板中，如 [http://mustache.github.com/mustache.5.html](http://mustache.github.com/mustache.5.html)状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T02:08:20.677

小胡子家伙带着答案回来了。我可以通过使用这样的部分来做到这一点：

```
{{> index.mu}} 
```

在 mustache 模板中，而不是尝试在 node.js 中进行。

# wcf - EF4.x 和 WCF 服务（Persistence ignorant）更新具有 1 到 n 和 m 到 n 关系的嵌套实体。

> ID：10695199
> 
> 赞同：0
> 
> 时间：2012-05-22T02:58:41.650
> 
> 标签：wcf, entity-framework-4, self-tracking-entities, persistence-ignorance

我有 SQL Server 数据库，想使用 LINQ to Entities 并用 WCF 层包装它并将其公开给客户端。（典型的 N 层架构）。还希望有 Persistence ignorant 选项，并且还希望有一个选项忽略数据库中的某些字段（敏感信息）以将其序列化到客户端。

那么，使用具有持久性无知、具有 WCF 支持的自我跟踪的实体框架的最佳方法是什么。我可以找到带有 Self Tracking 或 Persistence Ignorant 的 T4 模板。但所有内容都捆绑为单个包。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:36:10.823

STE 不允许任何预测 - 您必须以确切的形式公开您的实体。如果要隐藏某些字段，则必须放弃 STE 并创建自己的 DTO（数据传输对象），仅公开实体数据的子集。使用 DTO 后，您必须手动处理所有更改跟踪。

# javascript - JavaScript 改变文本颜色

> ID：10695200
> 
> 赞同：-1
> 
> 时间：2012-05-22T02:58:42.197
> 
> 标签：javascript, html

我正在尝试更改单词的颜色。换句话说，如果我有“男孩女孩男孩女孩”，我希望“男孩”的文本颜色为蓝色。

```
<html>
    <head>
    <title>color</title>
        <script language="javascript">
            function turnRed() {
                var myPara = document.getElementById("changeText");
                if(myPara=="boy"){
                    myPara.style.color = "blue";
                }
            }
        </script>
    </head>
    <body>
        <p id="changeText">boy girl boy girl boy girl boy girl boy girl boy girl</p>
        <p1><button onclick='turnRed()'>Turn Red</button></p1>
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T03:03:25.190

```
function turnRed() {
  var myPara = document.getElementById("changeText");
  myPara.innerHTML = myPara.innerHTML.replace(/\bboy\b(?!<)/g, '<span style="color:blue">boy</span>');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:04:08.413

我建议在您的 css 中创建一个类，然后将其添加到元素中并根据需要将其删除。查看 jQuery ( [http://www.jquery.com](http://www.jquery.com) )，因为它为您完成了大部分 javascript 的繁重工作，并允许您快速开发大型应用程序。另外文档非常好。

```
<style type="text/css">
    .color1 { color: blue; }
</style> 
```

添加它

```
document.getElementById('changeText').classList.add('color1'); 
```

删除它

```
document.getElementById('changeText').classList.remove('color1'); 
```

# php - UnixTimeStamp 显示 6 天前的日期

> ID：10695201
> 
> 赞同：0
> 
> 时间：2012-05-22T02:59:15.907
> 
> 标签：php, mysql

我有一封邮件要发送提醒，说明客户上次登录日期。我的时间保存在 unixtimestamp 中。因此，当我从数据库中获取并将其包含在电子邮件中时，它会在日期前 6 天给我。我在这里做错了什么？

部分数据：

```
$lastlogin = mysql_result($result,$i,"lastlogin");
$newlastlogin = date("d-m-Y", $lastlogin); 
```

电子邮件正文：

```
 $msg .= "Your Last Activity: $newlastlogin.<BR>"; 
```

mysql 的 lastlogin 日期为 27-05-2012

但是当邮件发送时，它显示 21-05-2012

顺便说一句，我试过

```
$newlastlogin = date("d-m-Y", strtotime($lastlogin)); 
```

任何帮助和建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:14:06.220

您可以在 select 语句中使用 unix_timestamp(date) 直接从数据库将日期转换为 Unix 时间戳。

示例：（假设您在登录表上有一个名为 last_login 的字段）

```
$sql = "SELECT UNIX_TIMESTAMP(last_login) as lastlogin from logins"; 
```

详细信息：http: [//dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_unix-timestamp](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_unix-timestamp)

# libjingle - WebRTC 如何使用 libjingle？

> ID：10695205
> 
> 赞同：11
> 
> 时间：2012-05-22T02:59:45.253
> 
> 标签：libjingle, webrtc

我下载了WebRTC的源代码，但是在WebRTC上找不到任何libjingle的代码，也找不到WebRTC如何使用libjingle（在WebRTC的代码中找不到诸如XmppTask类）

谁能给我一个指导？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-11-10T21:29:40.523

Libjingle 现在是 WebRTC 项目和代码库的一部分。WebRTC 是一组 API，通过对等连接使视频、音频和数据交互变得简单。Libjingle 被用作 WebRTC 实现的一部分来处理 NAT 遍历和流处理。

Libjingle 最初仅通过 XMPP 用于在两个聊天客户端之间创建点对点连接。使用的技术是 ICE、STUN 和 TURN。

WebRTC 非常关注 Javascript，主要是因为它的核心用途是通过浏览器使用功能。然而，WebRTC（带有 Libjingle），可以为许多平台构建，并且有许多不同语言的不同 API。

Libjingle 是用 C++ 编写的，因此可以在没有 WebRTC 的情况下单独使用。但是，我建议通过 WebRTC API 的方式使用 Libjingle 的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-17T10:05:12.853

是的，webrtc 中的 libjingle 文件夹已在最新版本中删除。你可以忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:13:44.750

这是两个独立的包。

WebRTC 只是多媒体部分——与信令无关（这就是 XMPP 和 Jingle）。

libjingle 用于构建在设备或 PC 上运行的应用程序，而 WebRTC 旨在使用 Web 浏览器集成到 HTML 页面中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-24T15:53:15.157

WebRTC - 音频/视频/数据传输 p2p。信令 - 在 2 个基于 WebRTC 的应用程序之间建立连接。看看这个 android [webrtc 视频通话应用](https://github.com/pchab/AndroidRTC/blob/android-studio/webrtc-client/src/main/java/fr/pchab/webrtcclient/WebRtcClient.java)和这个[nodejs 信号中继](https://github.com/andyet/signalmaster)。您发送一条“消息”（`sockets.js`在中继项目中的以下行签入文件

```
`client.on('message', function (details) {` 
```

看看它发生了什么）从设备 A 到设备 B 的类型为“init”，然后设备 B 向设备 A 创建一个报价。之后 A 回答 B，交换 Ice Candidates，然后视频连接准备就绪。（如果我不是很明确，我很抱歉）。

# mysql - 投票赞成/投票反对 SQL 查询返回“失败！” 每一次

> ID：10695211
> 
> 赞同：0
> 
> 时间：2012-05-22T03:00:34.707
> 
> 标签：mysql, sql, rating, voting, voting-system

我正在尝试为表格中的每个项目添加**投票赞成/反对票**功能。我目前正在这里实现这个：[www.technabled.com/2009/02/reddit-style-voting-with-php-mysql-and.html](http://www.technabled.com/2009/02/reddit-style-voting-with-php-mysql-and.html)

但是，它对我不起作用。一旦动作运行，它总是返回“**失败！** ”，我不知道我做错了什么了。

这是我`votes.php`页面内的内容。

```
function getAllVotes($id)
    {
    $votes = array();
    $q = "SELECT * FROM cover WHERE id='$id' ";
    $r = mysql_query($q) or die("Error: ". mysql_error(). " with query ". $q);
    if(mysql_num_rows($r)==1) {

        $row = mysql_fetch_assoc($r);
        $votes[0] = $row['votes_up'];
        $votes[1] = $row['votes_down'];
        }
    return $votes;
    }

function getEffectiveVotes($id)
    {
    /**
    Returns an integer
    **/
    $votes = getAllVotes($id);
    $effectiveVote = $votes[0] - $votes[1];
    return $effectiveVote;
    }

$id = $_POST['id'];
$action = $_POST['action'];

//get the current votes
$cur_votes = getAllVotes($id);

//ok, now update the votes

if($action=='vote_up') //voting up
{
    $votes_up = $cur_votes[0]+1;
    $q = "UPDATE cover SET votes_up = $votes_up WHERE id = $id";
}
elseif($action=='vote_down') //voting down
{
    $votes_down = $cur_votes[1]+1;
    $q = "UPDATE cover SET votes_down = $votes_down WHERE id = $id";
}

$r = mysql_query($q);
if($r) //voting done
    {
    $effectiveVote = getEffectiveVotes($id);
    echo $effectiveVote." votes";
    }
elseif(!$r) //voting failed
    {
    echo "Failed!";
    } 
```

如果重要的话，这里是所用列的表结构：

**votes_up**和**votes_down**：
类型：`int(11)`/空：`No`/默认值：`0`

列**id**：
类型：`int(8)`/空：`No`/额外：`AUTO_INCREMENT`

我使用参数进行检查：
**site.com/votes.php**`?action=vote_up&id=123`

希望有人能发现错误。感谢您的时间和帮助！

# php - 在不使用 file_get_contents 的情况下提高模板类的速度

> ID：10695214
> 
> 赞同：0
> 
> 时间：2012-05-22T03:01:19.670
> 
> 标签：php, file-get-contents

我正在构建一个模板引擎，其概念是我在我的 Web 应用程序中从[http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=1433&lngWId=8学到的。](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=1433&lngWId=8)

我意识到由于使用了file_get_contents，这不是一种非常有效的模板引擎方式。这将花费加载时间。

这里的任何人都可以就我如何不能使用 file_get_contents 提供任何专家？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:05:19.343

我的魔法水晶球告诉我您正在通过 url 加载模板。

```
file_get_contents("http://..."); 
```

别那样做。它很慢。

使用本地文件系统路径。

```
file_get_contents("../templates/foo.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:08:13.997

谢谢大家的建议。我在不使用 file_get_contents 的情况下重新设计了模板引擎。似乎使用 include 更适合本地系统。

# tomcat - 如何将现有的 OpenSSL 签名证书导入到 Tomcat

> ID：10695216
> 
> 赞同：2
> 
> 时间：2012-05-22T03:01:20.793
> 
> 标签：tomcat

我是 Tomcat SSL 的新手，现在我有一个用 openssl 签名的证书，其中包含的文件如下：

```
ca.csr --server CSR
ca.key --root private key
cert.crt    --server certificate
root.crt --root certificate 
```

基本上我想知道如何将 openssl 证书导入到我的 Tomcat7 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:15:16.820

您需要将 OpenSSL 的 PEM 格式转换为 DER，然后将证书放入密钥库中。您还需要证书的密钥。您可以在此处查看如何导入密钥和证书：

```
http://www.agentbob.info/agentbob/79-AB.html 
```

只需为每个证书重复证书程序。还请记住，您希望使用“-alias tomcat”作为您希望 Tomcat 用作服务器证书 (cert.crt) 的证书。

此时您不需要 CSR 做任何事情：它仅用于让证书颁发机构 (CA) 向您颁发证书。

# c++ - 未知模板类的函数指针

> ID：10695217
> 
> 赞同：0
> 
> 时间：2012-05-22T03:01:48.367
> 
> 标签：c++, com

我在这里撞墙了......我不知道如何说出这个问题的标题，因为我不知道如何去寻找解决方案。

我有一个基本模板类（组件），其中包含每个组件类型（如位置、方向、网格）的所有实例的映射。我无法制定一个“迭代”函数，该函数将遍历地图并为每个实例调用一个 void 成员函数（作为迭代函数的参数提供）。我很确定我应该使用函数指针，但是我在网上找到的所有示例都是针对全局函数或非模板类的。

这是基本模板类

```
typedef unsigned long uuid;

template <class T>
class Component {

public:
    static std::map<uuid, T*> IDS;
    static typename std::map<uuid, T*>::iterator Iterator;
    static T* Create(uuid fID) {
        Component<T>::IDS[fID] = new T(fID);
        return Component<T>::IDS[fID];
    };

    static void Iterate(); //how do I add in void function pointers?
    static bool ifExists(uuid fID);
};

template <typename T>
std::map<uuid, T*> Component<T>::IDS;

template <typename T>
typename std::map<uuid, T*>::iterator Component<T>::Iterator;

template <typename T>
void Component<T>::Iterate() {
    for(Iterator = IDS.begin(); Iterator != IDS.end(); Iterator++) {
        //This references the instance that performs the given function
        //(*Iterator).second
    }
} 
```

这是与模板一起使用的组件的示例。

```
class COM_Position {
    float x, y, z;
public:
    COM_Position(uuid fID);
    uuid ID;
    void Set(float fX, float fY, float fZ);
    void Display();
};

COM_Position::COM_Position(uuid fID) : ID(fID) {
    x = 0; y = 0; z = 0;
}

void COM_Position::Display() {
    printf("%lu : (%f, %f, %f)", ID, x, y, z);
}

typedef Component<COM_Position> Position; 
```

我将如何创建一个迭代函数，该函数将函数指针作为可应用于每个实例的参数（例如，为每个实例调用 Display）？我希望能够做这样的事情。

```
int main() {
    for(int ii = 0; ii < 4; ii++) {
        Position::Create(ii);
    }

    /*
    This is what I am aiming for; a clean iterator function
    Position::Iterate(Display());
    */
} 
```

如果这是不可能的，我知道我可以用宏来模拟......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:11:30.147

像这样的东西？

```
template <typename T>
void Component<T>::Iterate(void (T::*method)() ) {
    for(Iterator i= IDS.begin(); i != IDS.end(); i++) {
        (i->second->*method)();
    }
} 
```

并迭代：

```
Position::Iterate( &COM_Position::Display ); 
```

* * *

# 编辑：一些neet重载：

使用 C++0x 的可变参数模板，您可以使用一些通用方法。我没有测试它，但它看起来很有希望：

```
template <typename T, typename... Args>
void Component<T>::Iterate(void (T::*method)(Args... args), Args&&... params) {
    for(Iterator i= IDS.begin(); i != IDS.end(); i++) {
        (i->second->*method)(std::forward<Args>(params)...);
    }
} 
```

大多数函数和仿函数可用于：

```
template <typename T, typename F>
void Component<T>::Iterate( F func ) { // using generic functor 
    for(Iterator i= IDS.begin(); i != IDS.end(); i++) {
        func(i->second->*method);
    }
} 
```

# c# - 确定许多变量是否唯一的最优雅/有效的方法是什么？

> ID：10695218
> 
> 赞同：1
> 
> 时间：2012-05-22T03:01:53.220
> 
> 标签：c#

如果我有五个变量

```
int a,b,c,d,e; 
```

确保它们都是独一无二的最有效方法是什么？

```
if(a!=b && a!=c && a!=d && a!=e && b!=c && b!=d && b!=e && c!=d && c!=e && d!=e)
{ 
   //Is this the most efficient way??
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T03:03:35.560

**优雅的**

```
int[] arr = { a, b, c, d, e };

bool b = arr.Distinct().Count() == arr.Length; 
```

**高效的**

```
Your code is the most efficient 
```

我想这是对您问题的最简单的解释。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T03:04:32.147

这几乎*是*最有效的方法。它不一定是我见过的最好看的代码，但它会工作得很好。任何其他涉及数据结构或函数的解决方案都不太可能更快。

我会重新编码它的美感：

```
if (a != b && a != c && a != d && a != e
           && b != c && b != d && b != e
                     && c != d && c != e
                               && d != e
) { 
    // Blah blah blah
} 
```

不一定*完全*一样，只是阅读时眼睛更容易一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:08:01.070

我会认为是这样的：

```
int[] x = new int[] {a,b,c,d,e};
if (x == x.Distinct().ToArray())
{
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T03:47:31.690

如果我们正在玩代码高尔夫，我们可以将这一切归结为一行并刮掉 6 个字符：

```
bool d = (new int[]{ a, b, c, d, e })
              .GroupBy(i => i)
              .Where(i => i.Count() > 1)
              .Any(); 
```

# actionscript-3 - as3获取缩放/调整大小的宽度和高度-movieClip / mc？

> ID：10695219
> 
> 赞同：1
> 
> 时间：2012-05-22T03:02:30.977
> 
> 标签：actionscript-3, flash, height, width, scale

我经常缩放一个movieClip，需要根据它的大小将它放在屏幕上的某些地方。

**缩放后，如何获得影片剪辑的宽度和高度？**

```
trace(my_mc.width); /// would equal 333

/// This code makes my movie clip fit in the correct proportions. 
my_mc.height = stage.stageHeight;
my_mc.scaleX = my_mc.scaleY;

/// Its been resized!
trace(my_mc.width); /// STILL equals 333 
```

..

**任何想法如何获得新的宽度和高度？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:35:22.340

您可能遇到舞台缩放问题。

如果您依赖于舞台大小，请设置：

```
import flash.display.StageAlign;
import flash.display.StageScaleMode;

stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT; 
```

您提供的示例没有封装问题。它按预期工作。

![规模](../Images/87257f7c6d937483ad64e4f9a037e5db.png)

如果您正在制作基于帧的动画，也可能是跟踪语句的时间安排。也许您正在查看大小的工件，而不是您期望的生命周期。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T04:05:12.383

感谢您的所有努力。我找到了答案！:)

* * *

```
import flash.display.MovieClip;

/// My stage is 500 by 500.
/// My Image or movieClip is 446 by 688.
/// I am calling it my_mc.
trace(my_mc.width + " by " + my_mc.height); /// OUTPUT: 446 by 688

// I want the height to match the height of my stage but keep the same 
// proportions. So I use the code below. WORKS GREAT!
my_mc.height = stage.stageHeight;
my_mc.scaleX = my_mc.scaleY;

// But if I want to trace the width and the height it will still be the same.
trace(my_mc.width + " by " + my_mc.height); /// OUTPUT: 446 by 688.

///So I make a NEW movieClip below after I scaled it.
var NewMC:MovieClip = my_mc as MovieClip; 

/// NOW WHEN I TRACE IT... :)
trace(NewMC.width + " by " + NewMC.height); /// 324.1 by 500

// YES!!! I can't believe I figured this out on my own! Woo hoo! :) 
```

# ruby-on-rails - Rails to_param自定义路线不起作用

> ID：10695222
> 
> 赞同：0
> 
> 时间：2012-05-22T03:02:54.190
> 
> 标签：ruby-on-rails, ruby, routes

在 Rails 3.2.2 中，我想设置自定义 URL（使用状态 2 位数字：abbr，而不是默认的：id）

阅读谷歌结果和stackoverflow页面，我想出了这个：

# 路线

```
match 'cars/:abbr' => 'states#show', :as => 'state_abbr' 
```

# 模型

```
def to_param
  abbr
end 
```

# 控制器

```
@state = State.find_by_abbr(params[:id]) 
```

state#show 页面抛出错误（nil:NilClass 的未定义方法 `fullname'），因为路由似乎没有在模型中找到*缩写*词。

运行*rake routes*，我得到：

```
 root  /                    states#index
 state_abbr  /cars/:abbr(.:format) states#show 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:42:14.560

你想用`params[:abbr]`不`params[:id]`。如果您想使用`:id`更改路线`'cars/:id'`而不是`'cars/:abbr'`

# .net - 为什么 UdpClient.Send 中有一个 'bytes' 参数？

> ID：10695226
> 
> 赞同：1
> 
> 时间：2012-05-22T03:03:30.803
> 
> 标签：.net, udpclient

有一个接受 dgram、字节和端点的[UdpClient.Send方法的重载。](http://msdn.microsoft.com/en-us/library/82dxxas0.aspx)

```
public int Send(byte[] dgram, int bytes, IPEndPoint endPoint) 
```

在 MSDN 文档中，'bytes' 参数的描述如下。

> bytes
> 类型：System.Int32
> 数据报中的字节数。

为什么有一个“字节”参数？是不是可以在 Send 方法中计算出 dgram 数组中的字节数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:07:31.180

因为当您在网络上“发送”时，您通常会发送从其他来源编码的字节流。序列化等

您使用此重载，以便您可以提供缓冲区并可能仅发送该缓冲区字节的一部分。

通常你会创建一个更大的缓冲区，但你可能只填充其中的一部分。这样您就可以发送该缓冲区并说请仅从我的缓冲区发送 X 个字节。

# mysql - 将 Perl 中的字符串拆分到数据库中

> ID：10695235
> 
> 赞同：1
> 
> 时间：2012-05-22T03:05:11.757
> 
> 标签：mysql, sql, perl

我使用代码：

```
$data_read=$port_obj->read($buffer);
print "$data_read\n"; 
```

输出如下所示：

```
T=3420499518  A=914 B=97 C=49 D=436 E=428 F=863 G=34 H=771 I=214 J=493 K=165 
```

我想把它放在这个：

```
$T,$A,$B,$C,$D,$E,$F,$G,$H,$I,$J,$K 
```

所以我可以将它写入 MySQL 数据库。我该怎么做 ？

我的数据库处理程序：

```
$query = "INSERT INTO myhouse (T,A,B,C,D,E,F,G,H,I,J,K)
          VALUES ($T,$A,$B,$C,$D,$E,$F,$G,$H,$I,$J,$K)";

$query_handle = $connect->prepare($query);

$query_handle->execute(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T05:07:34.337

您应该将数据值存储在散列中，在准备好的 SQL 语句中使用占位符，并将散列切片传递给`execute`方法。

代码看起来像这样

```
my $data_read = 'T=3420499518  A=914 B=97 C=49 D=436 E=428 F=863 G=34 H=771 I=214 J=493 K=165';

my %data = $data_read =~/([A-Z0-9]+)/g;

my $query_handle = $connect->prepare(<<SQL);
INSERT INTO myhouse (T,A,B,C,D,E,F,G,H,I,J,K)
VALUES (?,?,?,?,?,?,?,?,?,?,?,?)
SQL

$query_handle->execute(@data{ qw/ T A B C D E F G H I J K / }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:48:44.357

扩展对 Jonathan Leffler 的回答的评论，[perldoc keys](http://perldoc.perl.org/functions/keys.html)告诉我们：

> 哈希的键以明显随机的顺序返回。实际的随机顺序在 Perl 的未来版本中可能会发生变化，但它保证与*or* *函数产生**的顺序相同`values``each`*（假设哈希没有被修改）。

（强调我的）这意味着我们可以使用哈希来收集所有字段名称及其关联值，而无需在代码中显式枚举它们：

```
#!/usr/bin/env perl

use 5.010;
use strict;
use warnings;

my $in = 'T=3420499518  A=914 B=97 C=49 D=436 E=428 F=863 G=34 H=771 I=214 J=493 K=165';

my %data = $in =~ /([A-Z])=([0-9]+)/g;

my $query = 'INSERT INTO myhouse (' . join(',', keys %data)
          . ') VALUES (' . join(',', values %data) . ')';

say $query; 
```

（请注意，正如 TLP 在对原始问题的评论中提到的那样，这*只是*安全的，因为填充的正则表达式向`%data`我们保证，键都是单个大写字母，而值将仅由英语数字组成。如果有恶意输入可能会导致 中的键或值不受控制`%data`，那么您需要对字段名称进行硬编码并使用占位符作为值，除非您想从小[Bobby Tables](http://bobby-tables.com/)访问。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:41:34.187

我不确定将它们放入单独命名的变量中是最好的选择，但客户总是对的：

```
use strict;
use warnings;

my $data_read = "T=3420499518  A=914 B=97 C=49 D=436 E=428 F=863 G=34 H=771 I=214 J=493 K=165";

my $data = $data_read;
$data =~ s/[A-KT]=//g;

print "$data\n";

my($T,$A,$B,$C,$D,$E,$F,$G,$H,$I,$J,$K) = split /\s+/, $data;

my $query = "INSERT INTO myhouse (T,A,B,C,D,E,F,G,H,I,J,K) VALUES\n" .
            "($T,$A,$B,$C,$D,$E,$F,$G,$H,$I,$J,$K)";

print "$query\n";

print "\nAlternative:\n";
my(@list) = split /\s+/, $data;
print "@list\n";

my $query2 = "INSERT INTO myhouse (T,A,B,C,D,E,F,G,H,I,J,K)\nVALUES(" .
             join(",", @list) . ")";

print "$query2\n"; 
```

运行此代码段时，它会产生：

```
3420499518  914 97 49 436 428 863 34 771 214 493 165
INSERT INTO myhouse (T,A,B,C,D,E,F,G,H,I,J,K) VALUES
(3420499518,914,97,49,436,428,863,34,771,214,493,165)

Alternative:
3420499518 914 97 49 436 428 863 34 771 214 493 165
INSERT INTO myhouse (T,A,B,C,D,E,F,G,H,I,J,K)
VALUES(3420499518,914,97,49,436,428,863,34,771,214,493,165) 
```

脚本的后半部分显示了一个更简单的替代方案，它使用一个数组来保存读入的值。

显然，如果您愿意，您可以检查是否为所有变量分配了值以及其他此类错误检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:02:35.893

我喜欢这样：

```
use strict;
use warnings;

my $data_read = "T=3420499518  A=914 B=97 C=49 D=436 E=428 F=863 G=34 H=771 I=214 J=493 K=165";
my %data = split(/\s+|=/, $data_read);

my @cols = keys %data;
my $cols = join(', ', @cols);
my $placeholders = join(', ', ('?')x scalar @cols );

my $query = "INSERT INTO table ($cols) VALUES ($placeholders)";
    # execute like this:
# $dbh->do($query, undef, @data{@cols});

print "$query\n"; 
```

# eclipse - Egit 的团队上下文菜单只有一个选项：应用补丁

> ID：10695238
> 
> 赞同：10
> 
> 时间：2012-05-22T03:06:05.983
> 
> 标签：eclipse, git, egit

我确定我无意中在某个地方勾选了一个导致此问题的框，其中所有其他选项都丢失了：获取、推送、合并等。在我的其他机器上，当我右键单击一个项目并选择“团队”时，我会得到所有的菜单选项。在一台笔记本电脑上，我得到的只是一个选项，“应用补丁...”我可以进入 Git 存储库视图并在那里获取所有其他 GIT 功能，这是我想要同步时必须做的最多一个遥控器。

我无法弄清楚如何解决这个问题，所以我可以从常规编辑器视图中访问所有 git 功能，这让我发疯了。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-31T15:56:35.763

好吧，您的项目与 Git Team Provider 没有关联。我在使用 EGit 设置 eclipse juno 时遇到了同样的问题。

*   如果尚未完成，请使用 git 初始化或克隆现有项目
*   右键单击您的项目并选择：
*   团队 -> 共享项目 ... -> Git -> [检查您的项目] -> 完成

现在，您正在寻找的所有 Git 选项都应该就位了。

HTH，马丁

# mercurial - Mercurial：如何让远程用户更改他们的密码？

> ID：10695247
> 
> 赞同：0
> 
> 时间：2012-05-22T03:07:39.290
> 
> 标签：mercurial, windows-server, hgweb

我使用 Apache 和 hgweb 在我的 Web 服务器上配置了 Mercurial 存储库。我了解如何使用 htdigest 创建新用户帐户，但我想知道如何使远程用户能够更改他们的密码。理想情况下，我会使用临时密码创建他们的帐户，然后向他们发送一封电子邮件，邀请他们更改密码。用户应该能够更改他们自己的密码，而不是其他用户的密码（否则我只需为他们提供一个 shell 帐户）。

这可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:32:18.500

Htdigest 是一个[Apache 用户配置文件](http://httpd.apache.org/docs/2.0/programs/htdigest.html)，原则上管理这些文件超出了 Mercurial 本身的范围。

要提供密码更改表单，您必须编写自己的脚本来操作 htdigest 文件。应该不会太难。据我[了解](https://stackoverflow.com/questions/394552/htdigest-file-format)，该文件的每一行都具有以下格式：

```
user:realm:MD5(user:realm:pass) 
```

可以在此处找到一些生成此格式的 MD5 哈希部分的示例代码：

[http://httpd.apache.org/docs/trunk/misc/password_encryptions.html#digest](http://httpd.apache.org/docs/trunk/misc/password_encryptions.html#digest)

可能你应该能够在谷歌上搜索一些可以做到这一点的预制脚本，尽管很遗憾我没能快速找到一个。我认为也可以将 Apache 配置为连接到以这种格式存储密码的预先存在的数据库，并通过它处理密码管理。

或者，我建议考虑存储库服务器包，例如[RhodeCode](http://rhodecode.org/)或[SCM-Manager](http://www.scm-manager.org/)，它们具有对此类管理任务的内置支持。

# javascript - 为什么我不能在 javascript 中访问对象的属性？

> ID：10695249
> 
> 赞同：2
> 
> 时间：2012-05-22T03:07:44.253
> 
> 标签：javascript, oop, object

我正在用 javascript 构建自己的照片库，部分是为了体验，部分是为了一个项目。现在，我遇到了一些关于对象的问题。

创建 Image 对象时，会将其推送到 Gallery 对象中的数组。围绕评论`// constrain to width`（要点中的第 55 行），我试图从对象中获取`width`and`height`属性。如果我 console.log 变量`img`，我可以看到对象的属性和功能。但是，如果 I `console.log(img.height);`，我会变得不确定。我究竟做错了什么？

整个文件如下。它也是为了更容易阅读[的要点](https://gist.github.com/2766269)。

```
var Image = function(img, gallery){
    // init with an image in jquery form
    this.src = img.attr('src');

    this.setDimensions = function(){
        var temp_height, temp_width;
        $this = this;
        $this.image = $('<img />').attr('src', this.src).load(function(){
            $this.height = this.height;
            $this.width = this.width;
        });
    };

    // init functions
    this.setDimensions();
    gallery.images.push(this);

}; // Image

var Gallery = function(){
    this.width = $(window).width();
    this.height = $(window).height();
    this.images = [];

    this.createElements = function(){
        $('body').append('<div id="the_gallery"></div>');
        $('#the_gallery').css({width: this.width, height: this.height});
    };

    this.open = function(){
        this.createElements();

        var img = this.images[0];

        // see if the image is bigger than the window
        if( this.width >= img.width && this.height >= img.height) {
            console.log('image < window');
            // just show the image, centered
        }

        else {
            console.log('image > window');
            var temp_width, temp_height;
            // constrain to height
            if( img.width < img.height ) {
                console.log('image width < image height');
                temp_height = this.height;
                temp_width = (temp_height/img.height) * img.width;

                img.css({height:temp_height, width:temp_width});

            }

            // constrain to width
            else {
                console.log('image width > image height');
                temp_width = this.width;
                temp_height = (temp_width/img.width) * img.height;
                img.image.css({height:temp_height, width:temp_width});
            }

        }

        img.image.appendTo($('#the_gallery'));

    }; // open

    this.close = function(){
        $('#the_gallery').remove();
    }; // close
}; // Gallery

$(document).ready(function(){
    $('#gallery img').click(function(){
        launchGallery($(this));
    }); // click

    var gallery = new Gallery(),
        test = new Image($('#gallery img:first'), gallery);

    gallery.open();
}); // doc ready 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:24:09.560

我投票赞成关闭，但这里有一些帮助：

当您调用 时`new Image`，您重新加载它并设置`width`事件触发时`height`。`load`那是*在*其余代码运行之后 - 当您到达第 55 行时，图像可能尚未加载。

一个简单的解决方案是直接从中获取宽度/高度`img.width()`并始终在`window.onload`. 如果您想支持动态加载的图像，则必须重新了解该逻辑，并等到所有内容都加载完毕后再构建图库。

另外，避免泄漏全局变量，您`var`在`$this = this`（第 7 行）中丢失了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T03:12:33.640

我对此不确定：但值得一试。而不是“$('#the_gallery').css({width: this.width, height: this.height});”

也许试试这个：

"$('#the_gallery').css('width', this.width +'px').css('height', this.height +'px');"

# matlab - 眼矩阵应用

> ID：10695254
> 
> 赞同：0
> 
> 时间：2012-05-22T03:09:04.923
> 
> 标签：matlab, matrix, identity, octave

以下几行：

```
a=[1;2;10;9]
eye(10)(a,:) 
```

返回：

```
[1   0   0   0   0   0   0   0   0   0
 0   1   0   0   0   0   0   0   0   0
 0   0   0   0   0   0   0   0   0   1
 0   0   0   0   0   0   0   0   1   0] 
```

它是如何工作的？为什么它得到了价值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T03:13:24.747

它从 10x10 单位矩阵中选择第 1、2、10 和 9 行以及所有列。

如果没有像下面这样的中间步骤，这会给我一个语法错误。您是否跳过了该步骤或在 Matlab 版本之间进行了此更改的语法？

```
a=[1;2;10;9];
eye(10)(a,:) 
```

产量`??? Error: ()-indexing must appear last in an index expression.`

这确实给出了您发布的矩阵：

```
e = eye(10); 
e(a,:) 
```

# layout - 有人知道 div 是如何在 pinterest.com 中发出的吗？

> ID：10695256
> 
> 赞同：2
> 
> 时间：2012-05-22T03:09:35.920
> 
> 标签：layout, html, pinterest

我尝试水平渲染我的 div 图像（从左到右，从上到下）。但这并不完全正确。想知道它是否只是垂直完成每列呈现的位置（从上到下，从右到左）。

有人知道如何模仿/复制此页面吗？

*** 更新 *** 作为对以下答案的回应，我快速搜索了“砌体与同位素”。对于所有感兴趣的人，以下**[帖子](https://stackoverflow.com/questions/8856893/difference-between-isotope-and-masonry-jquery-plugins)**很好地解释了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:19:38.630

每个项目都使用 JavaScript 动态放置。尝试在关闭 JS 的情况下查看它。他们可能正在使用[Masonry](http://masonry.desandro.com/)、[Isotope](http://isotope.metafizzy.co/)或类似的东西。

# iphone - 如何捕获 UITableView / UIScrollView 的完整内容的 UIImage 并使其在 ios 设备上工作

> ID：10695258
> 
> 赞同：3
> 
> 时间：2012-05-22T03:10:20.740
> 
> 标签：iphone, ios, uiscrollview, screenshot, graphicscontext

我正在使用这段非常优雅的代码 [获取 UIScrollView 的屏幕截图，包括](https://stackoverflow.com/questions/3539717/getting-a-screenshot-of-a-uiscrollview-including-offscreen-parts)用于捕获要导出到 UIImage 的 UITableView 的全部内容的屏幕外部分。

```
UIGraphicsBeginImageContextWithOptions(self.controller.tableView.contentSize, YES, 0);
{
    CGPoint savedContentOffset = self.controller.tableView.contentOffset;
    CGRect savedFrame = self.controller.tableView.frame;

    self.controller.tableView.contentOffset = CGPointZero;
    self.controller.tableView.frame = CGRectMake(0, 0, self.controller.tableView.contentSize.width, self.controller.tableView.contentSize.height);

    [self.controller.tableView.layer renderInContext: UIGraphicsGetCurrentContext()];
    image = UIGraphicsGetImageFromCurrentImageContext();

    self.controller.tableView.contentOffset = savedContentOffset;
    self.controller.tableView.frame = savedFrame;
}

UIGraphicsEndImageContext(); 
```

它在模拟器中运行得非常好，但是，当我在 iOS 设备（iphone 4s）上运行此代码时，调用此方法时会出现以下错误：

```
[self.controller.tableView.layer renderInContext: UIGraphicsGetCurrentContext()]; 
```

**错误：**

```
Error: CGContextTranslateCTM: invalid context 0x2924b0
Error: CGContextDrawImage: invalid context 0x2924b0
Error: CGContextRestoreGState: invalid context 0x2924b0
Error: CGContextSaveGState: invalid context 0x2924b0
Error: CGContextScaleCTM: invalid context 0x2924b0
Error: CGContextClipToRect: invalid context 0x2924b0
etc... 
```

当表格视图内容大小在其范围内时，此代码运行良好，但一旦大于其范围（甚至 1 个像素），它就会进入上述错误的无限循环。但这仅发生在设备上。不是模拟器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T08:31:54.383

事实证明，使用 [UIImage ..] resizableImageWithCapInsets] 方法并将其应用于单元格 backgroundView 并调整框架会导致在实际设备上发生各种时髦的错误，但不会在模拟器上发生。

恢复到已弃用的 [UIImage ..] stretchableImageWithLeftCapWidth: topCapHeight:] 方法解决了它。

# ios - 取消 UITapGestureRecognizer

> ID：10695260
> 
> 赞同：0
> 
> 时间：2012-05-22T03:10:34.890
> 
> 标签：ios, tableview, cell, tap

我已将 UITabGestureRecognizer 附加到我的表格视图中，以便检测特定位置的选项卡。

```
- (void)cellTapped:(UITapGestureRecognizer *)gesture
{
    CGPoint tapLocation = [gesture locationInView:self.tableView];

    if(tapLocation.x > 95)
    {
        NSIndexPath *swipedIndexPath = [self.tableView indexPathForRowAtPoint:tapLocation];
        ItemCell *cell = (ItemCell *)[self.tableView cellForRowAtIndexPath:swipedIndexPath];

        [cell toggleCell:YES fromTap:YES];
     } 
```

}

这里我检查了选项卡的x位置，只有当这个位置在95以上时才应该执行toggleCell函数，否则应该取消手势。

虽然这很好用，但单元格中的按钮真的很难点击。这些按钮位于 95 x 点的左侧。（因此我为什么要检查位置）

似乎我必须在实际单击按钮之前按住按钮一秒钟，这与点击手势有关吗？（当我删除它时，一切正常）

所以这里的绿色区域是可点击的。

![在此处输入图像描述](../Images/265b191a451bd282dee3bd90d2b71a86.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:38:21.517

解决方案是在单元格本身中单独附加手势并收听不同的通知。

# javascript - 骨干.js：如何在集合/其他模型中实例化模型

> ID：10695261
> 
> 赞同：1
> 
> 时间：2012-05-22T03:10:45.717
> 
> 标签：javascript, data-structures, backbone.js

我仍在学习 Backbone，发现很难处理模型/集合之间的关系。我有一个包含嵌套集合的相当复杂的结构（很像论坛系统，其中一个板可以有多个线程，可能有多个评论）。

基本上我正在尝试制作一个应用程序，它将为不同部分（标题、列表、表单等）内的多个选择器生成 CSS 代码。这是我认为有意义的结构：

> 截面（集合）>截面（模型）>选择器（集合）>选择器（模型）

**我的问题：**如何实例化一个新的选择器并将其放入选择器集合中，该集合将位于部分集合中的一个部分中？我必须手动完成这一切吗？

这是我到目前为止提出的代码：

```
// The selector model containing the styling properties 
window.Selector = Backbone.Model.extend({
    defaults: {
        title: '',
        classname: '',
        locked: false,
        comments: null,
        properties: {},
        code: null,
        type: 'text',
        edited: false
    }
});

// The collection of selectors
window.Selectors = Backbone.Collection.extend({ 
    model: Selector,
    localStorage : new Store("selectors")
}); 

// A section that can contain multiple selectors
window.Section = Backbone.Model.extend({
    name: '',
    selectors : new Selectors
});

// The collection of sections 
window.Sections = Backbone.Collection.extend({
    model : Section,
    localStorage : new Store("sections")
});

// The view that will display the available selectors in the HTML template
window.SelectorsCollectionView = Backbone.View.extend({
    el : $('#selectors-collection-container'),

    initialize : function() {
        this.template = _.template( $('#selectors-collection-template').html() );

        _.bindAll(this, 'render');

        this.render();
    },

    render : function() {
        var renderedContent = this.template({ selectors : this.collection.toJSON() });
        $( this.el ).html( renderedContent );
        return this;
    }
}); 
```

这基本上是我发现实例化新模型对象并将它们手动存储在各自集合中的唯一方法：

```
$(function() {
    // Create the selectors available initially; they will be used 
    // by the view and put in the HTML template
    var headings1 = new Selector({ title: 'h1', classname: 'alpha' });
    var headings2 = new Selector({ title: 'h2', classname: 'beta' });
    var headings3 = new Selector({ title: 'h3', classname: 'gamma' });
    var headings4 = new Selector({ title: 'h4', classname: 'delta' });
    var headings5 = new Selector({ title: 'h5', classname: 'epsilon' });
    var headings6 = new Selector({ title: 'h6', classname: 'zeta' });

    // Manually add the selectors to their collections
    selectors = new Selectors().add([ headings1, headings2, headings3, headings4, headings5, headings6 ]);

    // Now create a new section that will contain and represent
    // the previous selectors collection
    var headings = new Section({ name: 'headings' });

    /* Now we should have something like this: 
     * Selectors: headings1 ... headings6
     * Section: headings
     */

     // Now create another selector
    var list_item = new Selector({ title: 'li', comments: 'default style for the list-items' });

    // Manually add the list-item selector to a new collection
    // that will belong to a different section
    var selectors2 = new Selectors().add([ list_item ]);

    // Add the list collection to it's section
    var lists = new Section({ name: 'lists' });

    // Finally create a sections collections containing
    // all the different selector sections
    var sections = new Sections().add([ headings, lists ]);

    /* Now we should have something like this: 
     * Selectors: headings1 ... headings6
     * Section: headings
     *
     * Selectors: list_item
     * Section: lists
     */

    // Call the view and render the available selectors from the 
    // sections collection
    var selectorsView = new SelectorsCollectionView({ collection : sections });
    selectorsView.render();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:29:25.910

从我可以从你的问题中推断出来，也许这些例子可能会有所帮助：

```
var headingsSelectors = new Selectors([{ title: 'h1', classname: 'alpha' }, { title: 'h2', classname: 'beta' }]);
var headingsSection = new Section({ name: 'headings', selectors: headingsSelectors });

// later you can do something like headingsSection.selectors.add([{ whatever }]);

var listingSelectors = new Selectors([{ title: 'li', comments: 'default style for the list-items' }]);
var listsSection = new Section({ name: 'lists', selectors: listingSelectors });

var sections = new Sections([headingsSection, listsSection]); 
```

# xml - 使用 Altova Stylevision 从 XML 设置变量的值

> ID：10695262
> 
> 赞同：0
> 
> 时间：2012-05-22T03:10:48.837
> 
> 标签：xml, pdf, pdf-generation, altova

我正在从 Altova StyleVision 创建一个 SPS 文件。我想从 XML 文件中获取值，以设置要在我的 PDF 报告中显示的变量值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:45:20.093

在您的 SPS 中，可以声明一个变量，该变量可以包含选定元素或属性的值。在相关模板上声明变量，例如 $Names，然后为其提供值的路径，例如 $XML/Personnel/Department/Managers/@Name

它现在将在您的工作 xml 文件中包含此路径的值，如果您将 sps 与不同的 xml 文件一起使用，或者当您将生成的 xslt 传递给另一个 xml 文件时，它将包含相同的路径但不同的值。

一旦掌握了窍门，使用变量就相对容易了

参数以类似的方式工作，只是它们在 sps 中是静态的。您可以给它一个默认值，如“John”或“5”，但不能访问 xml 文件数据。但是您可以做的是，在通过 Altova XML 或 StyleVisionBatch 中的命令行处理 xslt 或 sps 时覆盖参数的值。请参阅手册中的此页面：[源的 SPS 参数](http://manual.altova.com/stylevision/stylevisionenterprise/index.html?svauto_howtoautomate.htm)

您可以在此处使用 XPath 表达式，从而使您的参数值随着处理的 xml 文件的值而变化。

# delphi - Delphi/ASM 代码与 64 位不兼容？

> ID：10695264
> 
> 赞同：5
> 
> 时间：2012-05-22T03:11:12.987
> 
> 标签：delphi, assembly, 64-bit, delphi-xe2, basm

我有一些 OpenGL 的示例源代码，我想编译一个 64 位版本（使用 Delphi XE2）但是有一些 ASM 代码无法编译，我对 ASM 一无所知。这是下面的代码，我将两条错误消息放在失败的行上......

```
// Copy a pixel from source to dest and Swap the RGB color values
procedure CopySwapPixel(const Source, Destination: Pointer);
asm
  push ebx //[DCC Error]: E2116 Invalid combination of opcode and operands
  mov bl,[eax+0]
  mov bh,[eax+1]
  mov [edx+2],bl
  mov [edx+1],bh
  mov bl,[eax+2]
  mov bh,[eax+3]
  mov [edx+0],bl
  mov [edx+3],bh
  pop ebx //[DCC Error]: E2116 Invalid combination of opcode and operands
end; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T04:56:19.923

此过程将 ABGR 字节顺序交换为 ARGB，反之亦然。
在 32 位中，这段代码应该完成所有工作：

```
mov ecx, [eax]  //ABGR from src
bswap ecx       //RGBA  
ror ecx, 8      //ARGB 
mov [edx], ecx  //to dest 
```

X64 的正确代码是

```
mov ecx, [rcx]  //ABGR from src
bswap ecx       //RGBA  
ror ecx, 8      //ARGB 
mov [rdx], ecx  //to dest 
```

另一个选项 - 制作纯 Pascal 版本，它更改数组表示中的字节顺序：0123 到 2103（交换第 0 和第 2 个字节）。

```
procedure Swp(const Source, Destination: Pointer);
var
  s, d: PByteArray;
begin
  s := PByteArray(Source);
  d := PByteArray(Destination);
  d[0] := s[2];
  d[1] := s[1];
  d[2] := s[0];
  d[3] := s[3];
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T14:37:53.050

64位有不同的指针寄存器名称，传递差异。内联汇编函数的前四个参数分别通过 RCX、RDX、R8 和 R9 传递

```
EBX -> RBX
EAX -> RAX
EDX -> RDX 
```

试试这个

```
procedure CopySwapPixel(const Source, Destination: Pointer);
{$IFDEF CPUX64}
asm
  mov al,[rcx+0]
  mov ah,[rcx+1]
  mov [rdx+2],al
  mov [rdx+1],ah
  mov al,[rcx+2]
  mov ah,[rcx+3]
  mov [rdx+0],al
  mov [rdx+3],ah
end;
{$ELSE}
asm
  push ebx //[DCC Error]: E2116 Invalid combination of opcode and operands
  mov bl,[eax+0]
  mov bh,[eax+1]
  mov [edx+2],bl
  mov [edx+1],bh
  mov bl,[eax+2]
  mov bh,[eax+3]
  mov [edx+0],bl
  mov [edx+3],bh
  pop ebx //[DCC Error]: E2116 Invalid combination of opcode and operands
end;
{$ENDIF} 
```

# java - 广度优先目录列表

> ID：10695266
> 
> 赞同：0
> 
> 时间：2012-05-22T03:11:30.020
> 
> 标签：java, implementation

我最近被告知 BFS 和 DFS，并被要求在 DFS 中实现一些东西：目录列表/搜索文件名。我能够做到这一点（平心而论，我确实得到了关于如何进行的提示），但从那时起我就对 BFS 很感兴趣，我什至无法掌握如何在同样的问题。

根据我在维基百科和几个谷歌搜索上找到的图表，这是我迄今为止得到的最接近的东西：

编码：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.io.File;

public class foo {
    private List<List<String>> queue = new ArrayList<List<String>>();

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        foo f = new foo();
        f.traverse("src");
        f.report();
    }

    public void traverse(String dir) throws Exception {
        // add dir to the top of the tree
        queue.add(0, Arrays.asList(dir));
        traverse(dir, 1);
    }

    public void traverse(String dir, int depth) throws Exception {
        // add a new depth if this is a new one
        if (queue.size() <= depth) {
            queue.add(new ArrayList<String>());
        }

        File file = new File(dir);
        for (File curfile: file.listFiles()) {
            queue.get(depth).add(curfile.getPath());
            // recursive function call if curfile is a directory
            if (curfile.isDirectory()) traverse(curfile.getPath(), depth+1);
        }
    }

    public void report() {
        for (int i=0; i<queue.size()-1; i++) {
            log(String.format("****** Level %d ******", i));
            for (String node : queue.get(i))
                log(String.format("[%d] `%s'", i, node));
        }
    }

    public void log(String s) {
        System.out.printf("[foo] %s\n", s);
    }
} 
```

输出：

```
[foo] ****** Level 0 ******
[foo] [0] 'src'
[foo] ****** Level 1 ******
[foo] [1] 'src/A'
[foo] [1] 'src/C'
[foo] [1] 'src/foo.java'
[foo] [1] 'src/B'
[foo] ****** Level 2 ******
[foo] [2] 'src/A/A2'
[foo] [2] 'src/A/A1'
[foo] [2] 'src/C/C1'
[foo] ****** Level 3 ******
[foo] [3] 'src/A/A2/A2A'
[foo] [3] 'src/A/A1/A1A'
[foo] [3] 'src/C/C1/C1A'
[foo] [3] 'src/C/C1/C1B'
[foo] ****** Level 4 ******
[foo] [4] 'src/A/A2/A2A/A2A1'
[foo] [4] 'src/C/C1/C1A/C1A1'
[foo] ****** Level 5 ******
[foo] [5] 'src/A/A2/A2A/A2A1/A2A1A'
[foo] ****** Level 6 ******
[foo] [6] 'src/A/A2/A2A/A2A1/A2A1A/A2A1A1'
[foo] [6] 'src/A/A2/A2A/A2A1/A2A1A/A2A1A2' 
```

我知道这不可能是正确的，因为尽管它吐出的输出看起来正确，但我知道内部运作是错误的。它本质上是一个伪装成 BFS 的 DFS，使用 ArrayList 来隐藏证据。

非常希望有人可以帮助我在这里结束，因为自从我开始拖延试图理解这个概念以来，我已经有一本框架书在我的桌子上烧了将近一个月。因此，埋头于大量的杂乱无章，我的问题是：BFS 如何应用于目录结构？此外，是否有在线或任何地方印刷的 BFS/DFS 实施示例的“For-Dummies”版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:35:54.177

BFS 如何应用于目录结构？BFS 和 DFS 的概念都是关于树数据结构的（目录也可以是树）。假设您了解树的深度，BFS 基本上是按照从最低深度​​到最高深度的顺序访问所有节点。Stack 之于 DFS 就像 Queue 之于 BFS。

我不确定是否有“傻瓜”实现。我认为这个概念和我解释的一样简单。维基百科应提供缺失的信息。

您对您的实施有什么疑问？就像我说的，DFS 和 BFS 之间的唯一区别是使用堆栈或队列。

# php - 使用 PHP 连接到 Gmail

> ID：10695271
> 
> 赞同：-1
> 
> 时间：2012-05-22T03:11:47.170
> 
> 标签：php, web-services, email, port, imap

我正在尝试通过 PHP 访问我的 Gmail 帐户。我试过这样的代码：

```
$mbox = imap_open("{imap.gmail.com:993/imap/ssl/}", "my email", "my password"); 
```

然而，在对这段代码进行了多次修改后，这不起作用，我与我的网络托管公司 (Bluehost) 进行了交谈，并被告知错误是由于他们的服务器上的防火墙造成的。获得专用 IP 地址将允许我访问端口 993，但由于防火墙，仍然无法检索 Gmail。

有谁知道：

-如何使用这些防火墙设置访问 Gmail，或者

- 我可以使用什么网络托管服务，让我可以访问外部服务器（如 Gmail）上的电子邮件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-29T18:14:26.743

如果 imap_last_error() 返回“登录失败次数过多”错误，请转到[https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps) 并选择“打开”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:17:28.223

而BlueHost 只是说“不能”？没有进一步的帮助？DTMFA！

我想你彻底搜索了谷歌的优秀帮助？

我只能说我使用[Hostony.com](http://hostony.com/)，它们价格便宜，功能强大，并且可能拥有我收到过的最好的技术支持。

也许你可以联系他们的技术支持并说“如果你能告诉你的服务可以做到这一点以及如何做到这一点，那么我会转向你”。询问所有潜在的主人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T03:22:20.933

引用自：http://php.net/manual/en/function.imap-open.php

> > 对于那些有Gmail问题的人（我的问题是：网络服务器上的“登录失败太多”，但在本地主机上没有问题..），而不是打开：
> 
> $inbox = imap_open($hostname,$username,$password,NULL,1) or die('无法连接到 Gmail: ' . imap_last_error());
> 
> 利用 ：
> 
> $inbox = imap_open($hostname,$username,$password,NULL,1) or die('无法连接到 Gmail: ' . print_r(imap_errors()));
> 
> 您将能够看到发生的错误的完整列表，并希望它能引导您找到答案。就我而言，谷歌希望我通过输入验证码来解锁我的帐户。但是这个错误并没有通过 imap_last_error() 清楚地显示出来。
> 
> 干杯，PH

尝试他的建议并回复回复。

编辑：

找到此线程：[http](http://osticket.com/forums/showthread.php?t=2597) : //osticket.com/forums/showthread.php?t=2597 引用其中一篇文章：

> 这是您的服务器配置的问题，而不是 osTicket。您需要启用 SSL 支持。联系您的托管服务提供商或使用 ssl/imap-ssl 重新编译 PHP

所以是的，也许您的主机服务有问题。如果可以，请尝试该建议...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T18:12:30.940

我复制并粘贴了您的第一个代码并收到“无法打开邮箱”错误。我删除了最后的 / 使其成为“{imap.gmail.com:993/imap/ssl}”......现在它可以工作了。一定要喜欢简单的错误（尽管我不认为这是一个错误，可能是 imap_open 函数中的错误......他们最后忘记检查的东西）你把头撞了好几个小时！如果您仍然需要它或其他需要它的人，希望它对您有用！

# mysql - MySQL INNER JOIN - '=' vs 'like'

> ID：10695274
> 
> 赞同：17
> 
> 时间：2012-05-22T03:12:27.867
> 
> 标签：mysql, activerecord, inner-join

我们在 MySQL 内部连接方面遇到了一些奇怪的问题。基本上，我们在使用 '=' 运算符时会遇到一个奇怪的错误，但使用 'like' 会使其工作。不幸的是，这是通过 ActiveRecord 实现的，没有简单的方法可以直接在其中“点赞”，而且我们想了解这里实际发生的情况。

这是失败的查询：

```
mysql> SELECT COUNT(*) FROM `versions` INNER JOIN `site_versions`
              ON `versions`.id = `site_versions`.version_id; 
```

这是错误：

```
ERROR 1296 (HY000): Got error 20008 'Query aborted due to out of query memory'
from NDBCLUSTER 
```

这是有效的查询：

```
mysql> SELECT COUNT(*) FROM `versions` INNER JOIN `site_versions`
              ON `versions`.id like `site_versions`.version_id; 
```

以下是有关表格本身的一些详细信息：

```
mysql> desc site_versions;
+----------------------+----------+------+-----+---------+----------------+
| Field                | Type     | Null | Key | Default | Extra          |
+----------------------+----------+------+-----+---------+----------------+
| id                   | int(11)  | NO   | PRI | NULL    | auto_increment |
| version_id           | int(11)  | YES  | MUL | NULL    |                |
[..snip..]
+----------------------+----------+------+-----+---------+----------------+

mysql> desc versions;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
[..snip..]
+------------+--------------+------+-----+---------+----------------+ 
```

任何想法为什么“喜欢”有效而“=”无效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:15:29.823

具有讽刺意味的是，这似乎与优化有关。通过使用`LIKE`您强制 MySQL 停止使用可能的索引（至少对于数字列，因为它必须将它们全部转换为字符串以进行比较）。

因此，通过使用`=`似乎 MySQL 只是用完了空间（内存/磁盘）来使用索引（检查`key_buffer`设置）。

当然，这只是一种预感，我对 NDB 的了解不多，无法进一步帮助您，但我希望这能让您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:50:01.670

我无法想象`like`在这种情况下效果如何，但是尝试检查变量的值`MaxAllocate`并增加它怎么样？它的默认值是`32M`并且可以增加到`1G`.

参考：[http ://dev.mysql.com/doc/refman/5.1/en/mysql-cluster-ndbd-definition.html#ndbparam-ndbd-maxallocate](http://dev.mysql.com/doc/refman/5.1/en/mysql-cluster-ndbd-definition.html#ndbparam-ndbd-maxallocate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:51:40.353

不确定这是否会解决您的问题，但这是可能的。不要使用`count(*)`. 也许它对计算什么感到“困惑”。计算特定字段是最佳实践，例如`id`. 为此，您需要为表使用别名。

```
SELECT COUNT(v.id) FROM versions as v
INNER JOIN site_versions as sv ON v.id = sv.version_id; 
```

# objective-c - iOS JSON 身份验证令牌请求说缺少参数

> ID：10695280
> 
> 赞同：0
> 
> 时间：2012-05-22T03:13:15.963
> 
> 标签：objective-c, ios, json

我一直在寻找，似乎无法弄清楚这一点。我看到的所有 JSON 示例都没有在 url 中有方法名称，所以我认为这可能是一个问题。这是我的代码：

```
NSString *username = @"xxxx";
NSString *password = @"xxxx";
NSString *loginURL = @"http://www.xxxxxx.com/services/api/rest/json?method=xxxxxx.auth.gettoken";

NSURL *url = [NSURL URLWithString:loginURL];

NSString *JSONString = [NSString stringWithFormat:@"{\"username\":\"%@\",\"password\":\"%@\"}", username, password];

NSData *JSONBody = [JSONString dataUsingEncoding:NSUTF8StringEncoding];

NSMutableURLRequest *loginRequest = [[NSMutableURLRequest alloc] initWithURL:url];
loginRequest.HTTPMethod = @"POST";
loginRequest.HTTPBody = JSONBody;

NSOperationQueue *queue = [NSOperationQueue new];

[NSURLConnection sendAsynchronousRequest:loginRequest 
                                   queue:queue 
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){

                           // Manage the response here.
                           NSString *txt = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
                           NSLog(@"%@", txt);
                       }]; 
```

我正在使用 SquidMan 窥探请求，我注意到访问日志列出：www.xxxxx.com/services/api/rest/json? - DIRECT/..... 方法名称不存在，这是我第一次为此使用 SquidMan，但我认为它会存在。

我得到的消息是参数用户名丢失。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:47:53.360

我发现了问题，我没有编写 web 服务，显然以 JSON 格式发送数据是错误的。如果我以“¶m=value¶m2=value2”的格式发布数据，它就可以工作。

```
 NSString *JSONString = [NSString stringWithFormat:@"&username=%@&password=%@",
                      [username stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                      [password stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSData *JSONBody = [JSONString dataUsingEncoding:NSUTF8StringEncoding];

NSMutableURLRequest *loginRequest = [[NSMutableURLRequest alloc] initWithURL:url];
loginRequest.HTTPMethod = @"POST";
loginRequest.HTTPBody = JSONBody; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:13:43.097

可能是因为你没有`Content-Type`为你的请求指定，所以服务器不知道如何解释数据。分配后尝试将此行添加到您的代码中`loginRequest`：

```
[loginRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"]; 
```

希望有帮助。

# r - R - end1 == start2 的连续案例序列

> ID：10695283
> 
> 赞同：3
> 
> 时间：2012-05-22T03:13:37.710
> 
> 标签：r, dataframe, sequence, match

拿这个数据集...

```
test <- data.frame(
    t1=c(2,3,5,6,7,10,10),
    t2=c(3,4,6,7,8,11,12),
    id=1:7
) 
```

...看起来像这样。为了澄清，每一行都是先前确定的两个案例的链接，必须保持绑定在一起。

```
 t1 t2 id
1  2  3  1
2  3  4  2
3  5  6  3
4  6  7  4
5  7  8  5
6 10 11  6
7 10 12  7 
```

我希望递归地识别基于 t2 == t1 的连续序列，以便链接是：

```
link1 -  2-3,3-4
link2 -  5-6,6-7,7-8
link3 -  10-11
link4 -  10-12 
```

我正在寻找的最终结果是：

```
 t1 t2 id matchid
1  2  3  1       1
2  3  4  2       1
3  5  6  3       2
4  6  7  4       2
5  7  8  5       2
6 10 11  6       3
7 10 12  7       4 
```

我已经尝试过`match(test$t2,test$t1)`获取初始链接，但现在我陷入了如何继续链接过程的困境。我的想法不断退回到使用循环，这听起来像是一种糟糕的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T03:28:32.260

这是一种方法：

```
test$matchid <- c(1, 1 + cumsum(tail(test$t1, -1) != head(test$t2, -1))) 
```

# algorithm - 如果要加密的字母数量发生变化，Hill Cipher 密钥是否会有所不同？

> ID：10695284
> 
> 赞同：1
> 
> 时间：2012-05-22T03:13:43.923
> 
> 标签：algorithm, matrix, linear-algebra, encryption

如果我想加密 26 个字符的字母集，希尔密码中使用的密钥与加密 35 个字母集的密钥是否不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:42:04.403

这个想法没有改变，只是计算略有不同。我记得您在 Hill Cipher 上的最后一个问题是您实际上想为其实现 CBC 模式。我建议您选择计算 mod 256，而不是计算 mod 26 - 这样您就可以轻松地来回映射到密钥、IV 和生成的密文的字节表示。此外，它还允许您使用空格和其他标点符号，您甚至可以为您的消息使用 UTF-8 或类似编码。

密钥的想法不会改变 mod 256，但它的计算方式会有所不同。您必须选择在 Z^n/256 中可逆的矩阵，而不是选择在 Z^n/26 中可逆的矩阵。假设您选择了一个 3 x 3 矩阵，它仍然很容易可逆，然后您可以通过检查非零行列式模 256 来检查您选择的键（矩阵）是否可逆，如[Wikipedia 文章](http://en.wikipedia.org/wiki/Hill_cipher)中所述。然后，您的键的字节数组表示将只是一个长度为 9 的数组，从矩阵到数组的直接映射：元素 (1,2)（假设从零开始索引）将是数组的第五个元素（ 1*3 + 2) 等

然后，您会将消息拆分为 3 字节块（如果最后一个块未与三个字节对齐，则使用某种形式的填充），这些块表示要与键矩阵相乘的向量，再次产生 3 字节输出块。

如您所见，使用 mod 256 表示非常简洁，因为这种方式加密/解密可以与相同的接口一起使用，该接口也可用于最先进的分组密码（如 AES），即加密消息通过对消息应用基于字节数组密钥的加密/解密函数，该消息被划分为适当大小的块/块。

### 在 Z^n/256 中生成 3x3 加密和解密矩阵

生成加密矩阵只需要创建一个随机 3x3 矩阵，其元素来自 Z256，直到找到具有非零行列式（模 256）和模逆元素模 256（我们将使用扩展欧几里得算法计算）的矩阵。然后，计算逆矩阵遵循与计算常规 3x3 矩阵逆相同的规则，除了所有计算都需要在 Z256 中进行。有一个用于计算 3x3 矩阵逆的封闭公式，如在[此处](http://www.dr-lex.be/random/matrix_inv.html)找到。我们可以使用 Z256 中的模运算来计算完全相同的东西，以获得 Z^n/256 中的倒数。

这是一些生成键矩阵及其逆矩阵的 Ruby 代码：

```
require 'matrix'

class Integer
  def modinv(modulus)
    a, b = modulus, self
    q, r = a / b, a % b
    t0, t1 = 0, 1

    while r > 0
      t0, t1 = t1, (t0 - q * t1) % modulus
      a, b = b, r
      q, r = a / b, a % b
    end

    raise RuntimeError.new("#{self} has no inverse modulo #{modulus}") unless b == 1
    t1
  end
end

while true
  m = Matrix.build(3) { rand(0..256) }
  mod_det = m.determinant % 256
  next if mod_det == 0
  begin
    det_inv = mod_det.modinv(256)
    break
  rescue RuntimeError => e
    next
  end
end

inv = Matrix[
  [ (m[2,2]*m[1,1] - m[2,1]*m[1,2]), -(m[2,2]*m[0,1] - m[2,1]*m[0,2]),  (m[1,2]*m[0,1] - m[1,1]*m[0,2])],
  [-(m[2,2]*m[1,0] - m[2,0]*m[1,2]),  (m[2,2]*m[0,0] - m[2,0]*m[0,2]), -(m[1,2]*m[0,0] - m[1,0]*m[0,2])],
  [ (m[2,1]*m[1,0] - m[2,0]*m[1,1]), -(m[2,1]*m[0,0] - m[2,0]*m[0,1]),  (m[1,1]*m[0,0] - m[1,0]*m[0,1])]
].map { |e| e * det_inv % 256 }

p m #=> encryption matrix
p inv #=> decryption matrix
identity = (inv * m).map { |e| e % 256 }
p identity #=> living proof that m * inv is the identity matrix 
```

示例输出：

```
m   = Matrix[[167, 8, 48], [54, 107, 25], [170, 184, 107]]
inv = Matrix[[119, 152, 136], [184, 235, 231], [174, 120, 59]] 
```

# video - 使用avisynth批量标准化几个视频文件？

> ID：10695285
> 
> 赞同：0
> 
> 时间：2012-05-22T03:13:46.263
> 
> 标签：video, normalization, batch-processing, normalize, avisynth

我的问题是两个部分。

首先，我想标准化几个视频剪辑的音频，以便在回放时，所有剪辑的音频音量相对相同。我不确定如何做到这一点，但我确信这很简单。我已经看过 Normalize 函数，但我想参考所有其他剪辑而不是其本身进行标准化。提前感谢您对此的任何帮助。

其次，更重要的是，我想知道是否有脚本之外的工具可以将单个 avisynth 脚本应用于多个剪辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:04:50.990

DDVideo Video to MP4 Gain可以批量转换和标准化相同声级（从75db到105db）的视频或音乐文件，而不会损失原始音质。它可以调整或保持原始视频大小。非常好用。

# javascript - 在 drupal 7 中添加 javascript-jquery-and-nacl 页面的最佳方法是什么？

> ID：10695286
> 
> 赞同：0
> 
> 时间：2012-05-22T03:13:47.587
> 
> 标签：javascript, jquery, drupal-7, google-nativeclient

我有一个调用一些 javascript 和 jQuery 函数的 html 页面，并且还有一个“嵌入”标签来加载 NaCl（本机客户端）模块。该页面按原样运行良好，但现在我想建立一个为该页面提供服务的网站。我已经建立了一个 drupal 7 站点，但我对包含我的页面的最佳方式感到困惑。

我认为我可以添加一个基本页面内容，将我的代码粘贴到文本编辑器中，然后确保该页面可以找到所有必要的 .js 和 nacl 文件。但这并不能解决问题。（我已经安装了 CKEditor 并使用了完整的 HTML 选项）。

我已阅读建议通过 .info 在主题模板中包含 javascript 代码的帖子。或添加为 js 库，或添加到模块中。我不确定哪个是最好的方法。现在我只需要能够编写一个调用我的javascript并加载我的NaCl模块的drupal“基本页面”节点。理想情况下，这应该与主题无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:07:50.670

好的，我找到了一种在 drupal 7 中添加 javascript 和 jquery 的简单方法，无需构建您自己的模块，无需将其包含在主题中，也无需自己合并您的库。有一个模块为您包含您的 javascript 库并管理它在 drupal 7 中的包含。它使您的 javascript 可用于每个页面：drupal.org/project/javascript_libraries –</p>

# google-maps - 如何防止地图标记捕捉到道路

> ID：10695287
> 
> 赞同：0
> 
> 时间：2012-05-22T03:14:05.313
> 
> 标签：google-maps, google-maps-api-3

我的谷歌地图需要支持“越野”位置。

我想知道如何防止我的地图标记捕捉到道路。

地址是从输入字段传递的，而 lat 和 lng 是从标记的位置中提取的。

```
function geoCodeLocation(address, lat, lng) {
    geocoder.geocode( 
    { 
        "address" : address ? address : '', 
        "location" : new google.maps.LatLng(lat, lng) 
    },
     /* ... */

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:58:13.860

您显示的代码非常少，所以我可能错过了重点，但地理编码通常会做以下两件事之一：

1.  你有一个 LatLng，你需要地址
2.  您有一个地址并且需要 LatLng

GeocodingService 需要地址或位置，但*不能同时*需要。

您的代码看起来总是希望有 LatLng 并且地址可能存在。如果您使用 LatLng 调用地理编码器，它将返回一个地址。在这种情况下，将标记附加到道路上是有道理的。

另一方面，如果你有一个地址，你返回的 LatLng 将基于地址，所以它会附加到道路上也是有道理的。

但是，如果您始终拥有 LatLng，为什么不直接使用 LatLng 创建标记并跳过地理编码调用（特别是因为您不希望标记出现在路上）？

如果我不正确，您能否在您的问题中添加更多细节？

# ftp - FTP 错误“530 登录验证失败”

> ID：10695290
> 
> 赞同：5
> 
> 时间：2012-05-22T03:14:49.803
> 
> 标签：ftp, ftp-client

当我尝试通过 Firefox 或 IE 连接到我的 ftp 服务器时，我收到了以下消息：

```
530 Login authentication failed 
```

为什么我会收到此消息？用户名和密码正确。

在登录 ftp 服务器之前，我需要在本地计算机上执行他们的任何要求吗？

我`ftp://example.com`以前登录的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-07T09:01:41.620

您需要在 中进行一些更改`/etc/vsftpd.conf`，特别是您需要设置

```
pam_service_name=ftp 
```

如果您想`/var/www`为本地用户的目录设置默认访问权限，您可以使用

```
local_root=/var/www 
```

如果您需要不同的目录，则需要更改`/var/www`. 进行更改后，`/etc/vsftpd.conf`您需要重新启动 vsftpd 服务器

```
sudo service vsftpd restart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T08:49:51.400

我的密码有一个小数点（例如`Tomatoes.X`）->删除点（`.`）后我能够登录。

# ruby-on-rails - Rails - 研究如何通过链接从控制器访问方法

> ID：10695292
> 
> 赞同：0
> 
> 时间：2012-05-22T03:14:55.717
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

有一个关于 Rails 的非常基本的问题 - 花了几个小时在互联网上寻找解决方案 - 但找不到解决方案。

我只需要在点击链接时调用一个方法。

这个想法是我需要导出一个由控制器中的方法生成的 xml 文件。

公司控制器.rb（摘录）

```
.....def xml
    @entries = Entry.find(:all)
    send_data @entries.to_xml,
    :type => 'text/xml; charset=UTF-8;',
    :disposition => "attachment; filename=entries.xml"
end.... 
```

我只需要从公司查看页面调用此方法即可下载要下载的 xml 文件，但无法使其正常工作。XML 代码确实有效 - 如果我将它添加到控制器中的 index 方法中，它可以完美运行。

这是我在阅读了一些在线文章后尝试使链接正常工作的一些方法。

```
<% url = url_for({:action => "xml", :controller => 'firms'}.merge(params)) %>
<%= link_to "XML", url %> 
```

尝试过的最基本的方法

```
<%= link_to "XML", :action => 'xml' %> 
```

在我看来，这应该是非常简单的事情——但无法让它发挥作用。

我得到的错误：

```
ActiveRecord::RecordNotFound in FirmsController#show

Couldn't find Firm with ID=xml

Rails.root: /home/james/rails/KPSmart
Application Trace | Framework Trace | Full Trace

app/controllers/firms_controller.rb:25:in `show' 
```

在公司控制器中显示方法

```
 def show
  @firm = Firm.find(params[:id])
  end 
```

尝试弄乱路线以使其无法正常工作。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:50:28.807

试试这个

在路由中将其写在我们为公司控制器编写的资源之上

```
match 'firms/xml', :controller => 'firms', :action => 'xml',:as => :firms_xml 
```

并以下列方式链接它

```
<%= link_to "XML", firms_xml_path %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:29:58.327

这看起来像是路由问题或链接问题。是否需要将 ID 参数传递给 XML 控制器方法？您的示例链接没有显示。您需要查看如何在您的 link_to 助手中传递参数：

[http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)

如果您在 routes.rb 中设置了默认路由：

匹配 ':controller(/:action(/:id))(.:format)'

那么你的 link_to 应该如下所示：

link_to "XML", :controller => "firms", :action => "xml", :id => 1234

其中 1234 是您要查找的实际 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:30:19.797

检查该链接网址！

我不认为这是你所期待的。当您通过 合并两个哈希时`hash1.merge(hash2)`，任何重复的键都会产生来自 的那些`hash2`。并且由于（如果我没记错的话）在 Rails 的路由过程中添加了`params`哈希`:action`和`:controller`键，因此您的预期路由被当前（显示）页面的路由覆盖。

你可以尝试`reverse_merge`，这会给你一个更可预测的结果，但我建议使用 Rails 的路径生成助手让你的生活更轻松：

```
<%= link_to "XML", firm_xml_path(@firm) %> 
```

希望有帮助！

# c# - 我可以通过异步调用并行执行 Linq OrderBy 吗？

> ID：10695293
> 
> 赞同：1
> 
> 时间：2012-05-22T03:15:23.100
> 
> 标签：c#, .net, linq, sorting, asynchronous

我有一个 linq 查询的订单，如下所示：

```
var sortedList = unsortedList
                    .OrderBy(foo => foo.GetCurrentValue()) 
```

但是，GetCurrentValue 方法响应缓慢（因为它涉及网络通信并且具有相当大的延迟）。据我观察，上面的代码顺序调用该方法（一个调用必须在下一个调用之前完成，所以如果列表很长，排序会很慢。

有没有办法告诉 linq 并行执行？即异步评估表达式，然后在每个人都完成后比较结果？

如果没有，知道如何干净、轻松地制作我们自己的实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:44:15.467

MSDN 在 PLINQ 中有一篇专门关于“订单保留”的文章 - [http://msdn.microsoft.com/en-us/library/dd460677.aspx](http://msdn.microsoft.com/en-us/library/dd460677.aspx)（根据我之前的评论）。链接给出的示例：

```
var cityQuery = (from city in cities.AsParallel()
                 where city.Population > 10000
                 select city); 
```

只是把它作为一个可能的实现扔出去，像这样？`slowList`您的“慢”对象的可枚举集合在哪里。`Parallel.ForEach`可以用任何其他异步“登台”操作代替以收集慢速值。

```
 var stage1List = new List<dynamic>();
    var parOpt = new System.Threading.Tasks.ParallelOptions() { MaxDegreeOfParallelism = 30 };

    System.Threading.Tasks.Parallel.ForEach(slowList, parOpt, slowObj =>
    {
        stage1List.Add(new { Obj = slowObj, Value = slowObj.GetSlowValue() });
    });

    var stage2List = stage1List.OrderBy(p => p.Value).Select(p => p.Obj); 
```

# javascript - 使用 JavaScript/AJAX 连接两个 XML 文件

> ID：10695294
> 
> 赞同：1
> 
> 时间：2012-05-22T03:15:32.797
> 
> 标签：javascript, xml, ajax, dom

我的任务是将 XML 文件分成两部分以便于编辑。

但是所有现有的代码库都旨在将其视为单个文件。

作为中间立场（由于时间不足），我决定拆分文件，但只需使用以下代码连接拆分文件

```
 var xmlDoc;
    xmlhttp.open("GET","distributome-relations.xml",false);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML;
    xmlhttp=createAjaxRequest();
    xmlhttp.open("GET","distributome-references.xml",false);
    xmlhttp.send();
    xmlDoc = xmlDoc+xmlhttp.responseXML;
            try{
        DistributomeXML_Objects=xmlDoc.documentElement.childNodes;
    }catch(error){
        DistributomeXML_Objects=xmlDoc.childNodes;
    } 
```

原始代码似乎不起作用

```
xmlhttp.open("GET","Distributome.xml",false);
    xmlhttp.send();
    if (!xmlhttp.responseXML.documentElement && xmlhttp.responseStream)
        xmlhttp.responseXML.load(xmlhttp.responseStream);
    xmlDoc = xmlhttp.responseXML;
    try{
        DistributomeXML_Objects=xmlDoc.documentElement.childNodes;
    }catch(error){
        DistributomeXML_Objects=xmlDoc.childNodes;
    } 
```

工作得很好。

我不确定如何进行此操作。

我只是拆分了文件

[http://www.distributome.avinashc.com/avinash/Distributome.xml](http://www.distributome.avinashc.com/avinash/Distributome.xml)进入

[http://www.distributome.avinashc.com/avinash/distributome-relations.xml](http://www.distributome.avinashc.com/avinash/distributome-relations.xml)和 [http://www.distributome.avinashc.com/avinash/distributome-references.xml](http://www.distributome.avinashc.com/avinash/distributome-references.xml)

最后两个文件将出现格式不正确的情况，因为只有两个文件的简单连接才能成为有效的 XML 文档。

我怀疑这是由于使用了 responseXML 方法，我应该使用另一种方法。

有一个更好的方法吗。我会欢迎任何建议，当然 - 回答我原来的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:21:18.857

如果您解释了`doesn't seem to work`转换为的内容，这将有所帮助，但通过快速查看您的代码，我可以看出**您正在尝试[`DOM Document`](https://developer.mozilla.org/en/DOM/document)使用`+`**. 这一行：

```
xmlDoc = xmlDoc + xmlhttp.responseXML; 
```

XHR的`responseXML`属性不会像您期望的那样返回字符串（顺便说一句，像这样连接两个 XML 文件很可能会导致格式不正确的 XML）。第二个示例正确对待它的本质 - DOM Document 对象。

`responseXML` [你可以在 MDN](https://developer.mozilla.org/en/DOM/XMLHttpRequest)阅读更多关于over 的信息。如果服务器没有正确设置标头，请注意关于`Content-Type`以及如何在 XHR 上使用它以使其相信它从服务器接收到 XML 的注释。`overrideMimeType()`

要以支持 XML 的方式进行连接，您需要从第二个文档 ( [`document.documentElement`](https://developer.mozilla.org/en/DOM/document.documentElement))中获取[`importNode()`](https://developer.mozilla.org/en/DOM/document.importNode)根节点，使用[`appendChild()`](https://developer.mozilla.org/en/DOM/Node.appendChild)

# iphone - iOS-OAuth实现如何创建Framework？（简单的）

> ID：10695297
> 
> 赞同：2
> 
> 时间：2012-05-22T03:16:57.527
> 
> 标签：iphone, ios, oauth

**嗨**，

我需要在我的项目中**包含 OAuth**，为此我发现了这个简单的“教程”。但我不明白**如何从提供的文件转到已编译的框架文件。**

这就是他们所说的：

> *   导入框架 在 Xcode 中将预编译的框架添加到您的应用程序有 3 个步骤：
>     
>     
>     *   将框架拖到 Xcode 中的 Linked Frameworks 组中，选择复制框架而不是简单地引用它。
>     *   为您的应用程序的主要目标创建一个新的复制文件构建阶段。
>     *   将框架从 Linked Frameworks 文件夹拖到新的 Copy Files Build Phase 并选择“Frameworks”作为其目标。
> 
> 目前，请将其用作私有嵌入式框架，而不是在安装时将其复制到系统的框架文件夹中。

框架：[OAuthLibrary](http://code.google.com/p/oauthconsumer/wiki/UsingOAuthConsumer)

**当我编译它时，我得到一个 .a 文件，我不明白该怎么做。（什么是链接框架组）？我把这个 .a 文件放在哪里？**

谢谢。

* * *

**编辑：我刚刚找到了这个[RSOAuthEngine - OAuth with ARC](https://github.com/rsieiro/RSOAuthEngine)，但它适用于 OAuth 1。我正在寻找相同的想法，但适用于 OAuth 2。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:10:18.263

从 OAuthLibrary 的网页来看，它似乎只针对 Mac OS X，而不是 iOS。

此外，iOS 不支持第三方构建的框架。但是，支持静态库。因此，您需要 (1) 使用 OAuthLibrary 源文件构建静态库，或者 (2) 将源文件直接合并到您的应用程序项目中。但这并没有改变这个库似乎只为 Mac OS X 设计的事实。

# java - Java GC：为什么有两个幸存者区域？

> ID：10695298
> 
> 赞同：83
> 
> 时间：2012-05-22T03:17:05.417
> 
> 标签：java, garbage-collection, jvm

对于 Sun/Oracle 的 JVM，我读到 GC 算法将新一代划分为一个 Eden 区域和两个幸存者区域。我想知道的是，为什么有两个幸存者区域而不仅仅是一个？该算法可以在伊甸园和一个幸存者区域之间保持乒乓球（就像它目前在两个幸存者区域之间所做的那样）；或者这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-22T03:37:34.763

我相信 JRockit 的 GC 实现更像你建议的那样工作，只有一个伊甸园和一个幸存者空间，但不要引用我的话。

HotSpot JVM 有两个幸存者空间的原因是为了减少处理碎片的需要。新对象分配在伊甸园空间中。一切都很好。当它满了时，你需要一个 GC，所以杀死陈旧的对象并将活的对象移动到幸存者空间，在那里它们可以成熟一段时间，然后再被提升到老年代。到目前为止还是不错的。但是，下次我们用完伊甸园空间时，我们遇到了一个难题。下一次 GC 出现并清除了 eden 和我们的幸存者空间中的一些空间，但这些空间并不连续。那么是不是更好

1.  尝试将来自伊甸园的幸存者放入被 GC 清除的幸存者空间中的孔中？
2.  将幸存者空间中的所有物体向下移动以消除碎片，*然后*将幸存者移入其中？
3.  只需说“去他妈的，无论如何我们都在移动所有东西”，然后将两个空间中的所有幸存者复制到一个完全独立的空间——第二个幸存者空间——从而为你留下一个干净的伊甸园和幸存者空间，在那里你可以在下一个 GC 上重复序列？

Sun对这个问题的回答是显而易见的。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-16T16:11:45.047

**小型垃圾收集操作后，两个幸存者空间的角色被颠倒了**

两个幸存者空间。这些保存的对象至少在一次次要垃圾回收中幸存下来，但在被提升到老年代之前又被赋予了另一个机会变得不可访问。其中只有一个持有对象，而另一个大部分时间未使用。

在一次次要垃圾回收的操作过程中，已经发现为垃圾的对象将被标记。伊甸园中在集合中幸存下来的活动对象被复制到未使用的幸存者空间。幸存者空间中正在使用的活动对象，将在年轻代中再次有机会被回收，也被复制到未使用的幸存者空间。最后，幸存者空间中正在使用的、被认为“足够老”的活动对象被提升到老年代。

在次要垃圾回收结束时，两个幸存者空间交换角色。伊甸园完全是空的；只有一个幸存者空间正在使用中；并且老年代的入住率略有增长。因为活动对象在其操作过程中被复制，所以这种类型的垃圾收集器被称为复制垃圾收集器。

来源：以上是Charlie Hunt 和 Binu John的*[Java Performance](https://rads.stackoverflow.com/amzn/click/com/B005R4NELQ)*第 83 页的节选。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-16T14:39:57.363

**年轻一代：**是短期居住的地方，分为两个空间：

*伊甸园空间：*新对象将被分配到内存池中。假设大多数对象在创建后不久就会被取消引用并变得无法访问。未被取消引用的对象将被新一代垃圾收集器复制到幸存者空间中。在某些特殊情况下，它们可能会被直接复制到老年代池中。

*幸存者空间：*这两个小空间保存年轻代垃圾收集的幸存对象。幸存的对象将从一个幸存者复制到另一个幸存者（少量）次。这允许收获我们更多取消引用的对象。

**老年代：**最大的内存池，应该保存长寿命的对象。一旦离开幸存者空间，对象就会被复制到这个池中。

**永久生成：**这个相当未知的池保存所有类的信息。对于大多数应用程序来说，它不需要任何关注。它可能需要适应一些具有许多类的应用程序。如果应用程序永久加载和卸载类，它也可能需要一些注意。

其他优点：

*   内存碎片
*   它提高了 GC 性能

请找到以下链接以获取更多详细信息，这可以帮助您了解更多

[http://www.scalingbits.com/javaprimer](http://www.scalingbits.com/javaprimer)

[http://java.sys-con.com/node/84695](http://java.sys-con.com/node/84695)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-27T11:13:56.480

当前所有的答案都在谈论内存碎片，这也是在 GC 中产生世代的另一个原因。

运行时记录所有指向“新对象”的“旧对象”，每次更新“指针”字段时都会这样做。然后，当“次要”GC 完成时，只需要扫描“新”对象。

多年来发现，只有“新”和“旧”是不够的，有一个“中年”的第三代就好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T21:49:18.873

将一代的所有实例从一个空间复制到另一个空间，而不是将它们按内存地址顺序复制到一代空间的开始，有什么优点和缺点？按顺序处理项目可能需要为每个项目添加一个额外的指针，但会消除对“幸存者”空间之一的需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-13T19:17:18.453

Java 中的堆内存 Java 对象在一个称为堆内存的区域中创建。堆内存是在 JVM 启动时创建的，当 Java 应用程序运行时会增加或减少堆内存。当堆内存变满时，垃圾收集器会移除未使用的对象，从而垃圾收集器为新对象腾出空间。

堆内存分为两个区域（或代），称为

1.年轻的空间。2.旧空间。

1.在young space，有Eden space for new Object，有两个Survivor Spaces(from和to)，这两个Survivor Spaces的大小总是一样的。

2.Survivor Spaces用于存储存活对象。当年轻空间满时，垃圾收集器通过运行一个特殊的年轻收集来移除未使用的对象，其中所有在年轻空间中存活足够长的对象都被提升（移动）到旧空间，从而释放年轻空间以进行更多对象分配。

3.如果Eden空间满了，GC就会运行，如果这个Eden空间里有任何对象，就会被移到Survivor Space。

4.在young space中，GC一般使用Copying Algorithm，速度快，每次都将survivor Objects复制到Survivor Space中的一个。

5.如果Survivor Space满了，剩下的live Objects直接复制到Old space。

6.在Old space，GC一般使用Mark-Compact算法，速度慢但占用内存少。

7.当旧空间变满时，垃圾会在那里收集，一个称为旧收集的过程。在旧空间中，长寿命的对象会停留在那里。

8.Out of Memory会发生新对象没有空间，即使对OLD或Perm部分进行了GC。

9.垃圾收集期间对象被移动：伊甸园->幸存者->终身（旧空间）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-21T10:28:27.863

两个幸存者是标记和复制算法的实现。这些在GC中用于年轻一代。正如 Ryan 在选项 3 中提到的[那样](https://stackoverflow.com/a/10695418/3509609)

[![在此处输入图像描述](../Images/7a48889d316eccb292f415c25af89b68.png)](https://i.stack.imgur.com/SYH5i.png)

# jquery - 使用 Jquery 将元素附加到表中

> ID：10695300
> 
> 赞同：0
> 
> 时间：2012-05-22T03:17:54.217
> 
> 标签：jquery, asp.net-mvc, json

我有一个空的 div：

```
<div id="productlist" class="productlist" style="float:left;"> </div> 
```

我将表格附加在：

```
$parent = $("#productlist").empty();
$parent.append('<table id="myTable" cellpadding="0" cellspacing="0" width="100%" class="productlist"><tbody>'); 
```

在我尝试在其中添加行和列：

```
$("#myTable > tbody").append('<br />');
$("#myTable > tbody").append('<tr align="center"><td align="center" id="colunm-product"><div id="brand-item"><a href="#" class="brand_id">Image here.</a></div>');
$("#myTable > tbody").append('<div class="newproduct" id="newproduct"><a href="#">New product.</a></div>');
$("#myTable > tbody").append('<div id="product_image"><a href="#" style="text-decoration:none">My image</a></div>');
$("#myTable > tbody").append('</td></tr></table>'); 
```

但在我看来结果：

```
 <table id="myTable" class="productlist" width="100%" cellspacing="0" cellpadding="0" style="margin-left: 4px; padding-top: 2px;">
  <tbody>
    <br />
    <tr align="center">
       <td align="center" id="colunm-product">
           <div id="brand-item">
             <a href="#" class="brand_id">
                Image here.
             </a>
           </div>
       </td></tr>

       <div class="newproduct" id="newproduct"><a href="#">New product.</a></div>
       <div id="product_image"><a href="#" style="text-decoration:none">My image</a>
       </div>
 </table> 
```

td 中只有一个 div。其他 2 div 呢，为什么他们不在那个 td 中？谁能告诉我，我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:24:24.637

那是因为您实际上是将 div 附加到 tbody 元素，而不是 td。

您可能想要创建一个 td 元素，将 div 添加到 td，然后将 td 添加到 tbody。

```
$("#myTable > tbody").append('<br />');
var td  = $("<td align="center" id="colunm-product"></td>");
td.append("<div id="brand-item"><a href="#" class="brand_id">Image here.</a></div>");
td.append('<div class="newproduct" id="newproduct"><a href="#">New product.</a></div>');
td.append('<div id="product_image"><a href="#" style="text-decoration:none">My image</a></div>');
var tr = $('<tr align="center"></tr>');
tr.append(td);
$("#myTable > tbody").append(tr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:24:36.113

不要`append`多次调用方法。将字符串存储在变量中并仅调用一次

```
 var strRow='<tr align="center"><td align="center" id="colunm-product"><div id="brand-item"><a href="#" class="brand_id">Image here.</a></div>';
 strRow+='<div class="newproduct" id="newproduct"><a href="#">New product.</a></div>';
 strRow+='<div id="product_image"><a href="#" style="text-decoration:none">My image</a></div>';
 strRow+='</td></tr>';
 $("#myTable > tbody").append(strRow); 
```

示例：http: [//jsfiddle.net/srrht/6/](http://jsfiddle.net/srrht/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:30:39.530

示例：http: [//jsfiddle.net/Q2WzA/](http://jsfiddle.net/Q2WzA/)

```
$parent = $("#productlist").html('');
$parent.append('<table id="myTable" cellpadding="0" cellspacing="0" width="100%" class="productlist"><tbody>');

var $table = $parent.find("#myTable > tbody");

var htmlRow = [
    '<tr align="center">',
     '<td align="center" id="colunm-product">',
      '<div id="brand-item"><a href="#" class="brand_id">Image here.</a></div>',
      '<div class="newproduct" id="newproduct"><a href="#">New product.</a></div>',
      '<div id="product_image"><a href="#" style="text-decoration:none">My image</a></div>',
     '</td>',
    '</tr>'];

$table.append(htmlRow.join(''));​ 
```

# java - ANTLR - 将完全匹配的文本放入 AST

> ID：10695301
> 
> 赞同：1
> 
> 时间：2012-05-22T03:18:05.120
> 
> 标签：java, parsing, antlr

我试图让我的 AST 节点包含匹配规则的全文。试

```
statement: 'blah' subrule ';' -> ^(MY_STATEMENT subrule $text); 
```

不起作用。我正在查看我返回的 CommonTree 实例，它们确实包含 startIndex 和 stopIndex 字段，但它们似乎是令牌流的索引，我看不到从中重新组装匹配文本的清晰方法。这似乎是一件很明显的事情，可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:16:33.763

当然，您可以在虚构的标记之后放置方括号，以将自定义文本放入（虚构的）AST 节点中：

```
tokens {
  TEXT;
}

rule
 : subrule1 subrule2 -> ^(TEXT["custom text here"] subrule1)
 ; 
```

但是你不能引用重写规则`$text` *中匹配的所有文本。*在重写规则中，以 开头的所有内容都`$`被视为规则的标签/变量：

```
rule
 : text=subrule1 other=subrule2 -> ^($text $other)
 ; 
```

`$text`只能在解析器（或词法分析器）规则中使用以获取规则匹配的所有文本：

```
rule
 : subrule1 subrule2 {System.out.println("I matched: " + $text);} -> ^(...)
 ; 
```

要获取重写规则中的文本，请执行以下操作：

```
grammar T;

options { 
 output=AST; 
}

tokens { 
 MY_STATEMENT;
 TEXT;
}

statement
 : 'blah' subrule ';' -> ^(MY_STATEMENT subrule TEXT[$statement.text])
 ;

subrule
 : Digit Digit
 ;

Digit
 : '0'..'9'
 ; 
```

这会将输入解析`"blah78;"`为以下 AST：

![在此处输入图像描述](../Images/015a303763f4f15f9853ab12fbd3181c.png)

# django - 两个 Django 项目相互冲突

> ID：10695302
> 
> 赞同：0
> 
> 时间：2012-05-22T03:18:26.463
> 
> 标签：django, apache, mod-wsgi

我有两个独立的 Django 项目，一个在 /，另一个在 /foo。间歇性地，如果我尝试访问 / 处的项目，它将引发 PageNotFound 异常并显示 /foo 项目中的 URL 文件，反之亦然。我假设与 Apache 或 mod_wsgi 存在某种冲突，但我真的找不到它是什么。有没有办法避免这种情况？我真的不想在单独的域上运行每个项目，这似乎可行。

**编辑**：我的 django/wsgi 配置（我的 httpd.conf 与安装基本没有变化）

```
 WSGIPythonPath /var/django/bumppoman:/var/django/roads:/var/django/hawthorn:/var/django/wiffleball
    <VirtualHost *:8081>
    ServerName site1.com

    WSGIScriptAlias /hawthorn /var/django/hawthorn/apache-files/wsgi.py
    WSGIScriptAlias /roads /var/django/roads/apache/wsgi.py
    WSGIScriptAlias / /var/django/bumppoman/apache/wsgi.py

    <Directory "/var/django/roads/apache">
            Require all granted
    </Directory>

    <Directory "/var/django/bumppoman/apache">
            Require all granted
    </Directory>

    <Directory "/var/django/hawthorn/apache-files">
            Require all granted
    </Directory>
    </VirtualHost>

    <VirtualHost *:8081>
    ServerName site2.com

    WSGIScriptAlias / /var/django/wiffleball/apache/django.wsgi

    <Directory "/var/django/wiffleball/apache">
            Require all granted
    </Directory>
    </VirtualHost> 
```

# django - 如何显示 sql django 运行？

> ID：10695305
> 
> 赞同：1
> 
> 时间：2012-05-22T03:19:09.613
> 
> 标签：django

是的，所以已经有一个这样的问题，答案是：

```
>>> from django.db import connection
>>> connection.queries
[{'sql': 'SELECT polls_polls.id,polls_polls.question,polls_polls.pub_date FROM polls_polls',
'time': '0.002'}] 
```

问题是，我不知道那是什么意思。我可以看到它是从控制台运行的，但是我的 django 项目，嗯，它作为 django 项目运行！

我把这段代码放在哪里？在 html 视图中？在 view.py? 在model.py中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:36:46.663

In debug mode, you could use [django-debug-toolbar](http://pypi.python.org/pypi/django-debug-toolbar), it prints all SQLs executed, as well as callees and explains of the SQLs, and extra info such as templates invoking, request, signals, etc. Very handy indeed.

In shell, as Yuji Tomita suggests, `print queryset.query` (in legacy Django it's something like `queryset._get_sql_clause()`, just FYI) or `connection.queries` in your question.

# c++ - RWTexture2D的头文件

> ID：10695306
> 
> 赞同：2
> 
> 时间：2012-05-22T03:19:19.333
> 
> 标签：c++, directx

我收到标识符“RWTexture2D”的错误未定义，但无处可找到 RWTexture2D 的听者文件。有没有人知道这一点或任何其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:34:54.783

[RWTexture2D](http://msdn.microsoft.com/en-us/library/windows/desktop/ff471505%28v=vs.85%29.aspx)是您将在 HLSL（着色器）代码中使用的类型，而不是在 C++ 代码中使用的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:35:13.067

您需要在着色器/HLSL 代码中提供类型（如模板）。所以是这样的：

所以这是错误的：

`RWTexture2D tex;`

但这是正确的：

`RWTexture2D<float> tex;`

请参阅`[RWTexture2D][1]`HLSL 类型的文档。

# javascript - 如何设置 Fabric.js？

> ID：10695308
> 
> 赞同：6
> 
> 时间：2012-05-22T03:19:41.373
> 
> 标签：javascript, fabricjs

我对 fabric.js 很陌生。我已经下载了fabric.js，但我不知道如何启动它。例如：

```
<html>
<head>
    <script src="fabric.min.js"></script>
</head>

<body>
    <canvas id="canvas" width="800" height="450" style="border:1px solid #000000"></canvas>
    <script>
        var canvas = new fabric.Canvas('c1');
        canvas.add(new fabric.Circle({ radius: 30, fill: '#f55', top: 100, left: 100 }));

        canvas.selectionColor = 'rgba(0,255,0,0.3)';
        canvas.selectionBorderColor = 'red';
        canvas.selectionLineWidth = 5;
    </script>
</body>
</html> 
```

在这个脚本中，我应该看到一个圆圈。我按照这个例子： http: [//fabricjs.com/customization/](http://fabricjs.com/customization/)

但是为什么我什么都看不见；我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T10:11:06.840

的参数应该与HTML`fabric.Canvas`中的画布匹配。`id`

换行

```
var canvas = new fabric.Canvas('c1'); 
```

至

```
var canvas = new fabric.Canvas('canvas'); 
```

这应该有效。

# c - 使用 fwrite() 进行 Jpeg 无线传输；需要处理丢失的数据包

> ID：10695309
> 
> 赞同：0
> 
> 时间：2012-05-22T03:19:52.873
> 
> 标签：c, jpeg, wireless

我正在开发一种设备，它可以拍照并通过无线电波将该图片无线传输到台式计算机接收器。在接收端，我使用 C 和 fwrite() 来重建拆分数据包发送的图像文件。接收数据包执行：

```
 fwrite(&data[3], size, 1, filename); 
```

data[3] 是一个无符号 8 位整数，数据类型为 u08。

我确认有线文件传输有效。如果发射器和接收器直接连接，则没有问题。

但是，无线电信号的强度不足以保证接收到所有数据包。在我的测试中，传输数据包丢失是很常见的。即使丢失一个数据包，图像文件也会损坏。接收率约为 85%。

每个数据包都有编号。如果接收到的数据包编号大于预期的数据包编号，则接收方知道数据包已被丢弃。

我的解决方案是循环并用默认数据包替换丢失的数据包，同时增加预期的数据包编号计数器。基本上，我计划用黑色像素填充丢失的像素，使用接收到的数据包来创建尽可能完整的图片。我不知道该怎么做。如果接收到的数据包编号和预期的数据包编号不匹配，我尝试简单地将 data[3] 设置为 0，但这不起作用。

我欢迎其他提出的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:09:51.743

你没有提到图像格式。如果您要发送原始 RGB 图像，那么设置为零应该可以工作，但是如果您正在使用压缩图像（如 jpeg）并且您丢失了包含有关块大小或用于熵编码的表的信息的标头数据包，则无法获取图像背部。

# php - php - 通过匹配外部文本文件从数组中删除单词

> ID：10695311
> 
> 赞同：0
> 
> 时间：2012-05-22T03:20:33.060
> 
> 标签：php

我有一个数组和一个外部文件，都包含很多单词。我想将数组中的字符串与整个外部文件匹配。然后，如果有相同的单词，我想从数组中删除单词。

大大缩短示例：

```
 $words = {"apple", "orange", "banana", "grape", "peach"} 
```

外部文本文件是一个纯单词列表

```
apple
banana
melon
... 
```

我想删除外部文件中的单词，最后得到这个。

```
$words = {"orange", "grape", "peach"} 
```

我应该调用外部文件，对每一行进行切片，然后将它们保存到另一个数组中吗？然后与源数组进行比较？比较数组和文本文件的最有效方法是什么？我很感激你的智慧！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:23:44.103

您可以使用[array_diff](http://www.php.net/manual/en/function.array-diff.php) .( [file](http://jp.php.net/manual/en/function.file.php)从文件中获取数组。)

```
$result = array_diff($words, file('path_to_file', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES)); 
```

PS：如果你的外部文本文件很大，不想一次加载到内存中，可以逐行读取，检查是否存在于数组中。

# sql-server - 加入不相关的表

> ID：10695313
> 
> 赞同：0
> 
> 时间：2012-05-22T03:20:59.347
> 
> 标签：sql-server

我想加入这两个不相关的表：

表格1

```
id   name   age
--   ----   ---
1    a      9
2    b      11
3    c      10 
```

表 2

```
id   school   address
--   ------   -------
1    aa       abc
1    aa       efg
3    bb       hij 
```

期望的结果：

```
id   school   address   age   name
--   ------   -------   ---   ---- 
1    aa       abc       9     a
1    aa       efg       9     a
2    NULL     NULL      11    b
3    bb       hij       10    c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:27:13.507

```
SELECT t1.id, t2.school, t2.address, t1.age, t1.name
FROM dbo.table1 AS t1
LEFT OUTER JOIN dbo.table2 AS t2
ON t1.id = t2.id
ORDER BY t1.id; 
```

# mercurial - 将较早的 Mercurial 变更集与提示合并

> ID：10695314
> 
> 赞同：0
> 
> 时间：2012-05-22T03:21:02.000
> 
> 标签：mercurial, merge

我有一个本地 Mercurial 项目。提示修订为 562。

在修订版 549 中，我对项目中的 4 个文件进行了更改。从修订版 550 到 562，这些文件还进行了其他更改。

如何比较和合并修订版 562（提示）与修订版 549 中所做的更改？基本上我想将我在修订版 549 中删除的代码添加回提示。

此外，我已将 WinMerge 配置为我的外部差异工具，因此我希望能够以交互方式合并，而不是让 mercurial 自动完成。我的合并命令是`hg winmerge`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:38:42.933

> 基本上我想将我在修订版 549 中删除的代码添加回提示。

在 Mercurial 中，这可以使用`hg backout`（参见[手册页](http://www.selenic.com/mercurial/hg.1.html#backout)）来完成。此操作将指定修订的逆应用到当前存储库状态。

# winapi - 从 NSIS 脚本内部/外部获取 windows id

> ID：10695318
> 
> 赞同：0
> 
> 时间：2012-05-22T03:21:32.543
> 
> 标签：winapi, installation, nsis

**如何获取窗口“id” - 与 Win32 窗口关联的唯一编号？**

我可以在 NSIS 脚本（.nsi 文件）中获取 id 吗？如果不是，我可以使用什么外部程序？出于某种原因，当我运行我的安装程序时，ResHacker 没有向我显示正确的对话框。我听说过 GDISpy 或类似名称的东西。

我要做的是更改 MUI2 页面中某些窗口的 z 索引，并将复选框背景设置为自定义页面中的透明。

**找出 Windows 唯一 ID 的最简单方法是什么？**

**编辑** 对不起，我不熟悉我所说的正确术语。我不是在谈论 HWND 变量/句柄我在谈论那个 windows 唯一的窗口 id 那是一个整数。

```
# In NSIS 
GetDlgItem $R0 ${parentHWND} 1012 # the 1012 is what I am referring to as the window ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:48:09.560

可以使用[Winspy++](http://www.catch22.net/software/winspy-17)之类的间谍工具找到对话框子控件的 ID （此工具以十六进制显示，因此请使用 calc.exe 进行转换，或在 .nsi 中为数字添加前缀 0x）

NSIS 有两个嵌套对话框，外层对话框承载下一个、返回和取消按钮。内部对话框承载当前页面的控件。

要获取外部对话框中按钮的句柄：

```
GetDlgItem $1 $hwndparent 1 
```

对于内部对话框：

```
FindWindow $0 "#32770" "" $HWNDPARENT ;Find inner dialog first
GetDlgItem $1 $0 0x666 
```

对于自定义页面，id（和 z 顺序）取决于您在其中创建控件的顺序...

# objective-c - 我应该何时将标头导入 Prefix.pch？

> ID：10695319
> 
> 赞同：0
> 
> 时间：2012-05-22T03:22:08.157
> 
> 标签：objective-c, ios, header, header-files, prefix

我听说将标头导入 Prefix.pch 可以提高性能，因为它将加载标头一次，而不是在每个实例上。那么什么时候在项目中导入的标头足够多次以保证将其包含在 Prefix.pch 中？十几次？几次？只是两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:23:12.170

如果 Prefix.pch 被#imported 到 3 个以上的类中，我通常会在 Prefix.pch 中添加一个标题。我不认为有一个经验法则——它取决于你自己的标准，你认为混乱、优雅、代码的全局使用等等。例如，我的大多数项目都有一个 Utilities.h 和 Utilities.m我声明了许多地方使用的辅助函数。我总是将 Utilities.h 添加到我的 .pch 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T08:42:23.127

我倾向于避免在 .pch 中添加太多东西的诱惑。特别是，它混淆了代码中的依赖关系。假设您想查看您的代码在哪里使用`AFNetworking`lib（例如）：您搜索`#import`语句，然后看到 .pch 文件导入了它，这告诉您……什么也没有。

如果在使用模块/lib 时，您通常会导入许多相关的头文件，您可以创建一个新的头文件，该文件只导入相关头文件的 glob，然后将其导入。

# django - django - 在模板中显示查询集的长度

> ID：10695322
> 
> 赞同：47
> 
> 时间：2012-05-22T03:22:27.023
> 
> 标签：django

在我的 html 文件中，如何输出我正在使用的查询集的大小（出于调试目的）

我试过了

```
{{ len(some_queryset) }} 
```

但这没有用。格式是什么？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-22T03:25:35.010

试一试`{{ some_queryset.count }}`。

这比使用 len （可以用 调用`{{ some_queryset.__len__ }}`）要好，因为它优化了后台生成的 SQL，只检索记录的数量而不是记录本身。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-22T03:26:40.827

`some_queryset.count()`或`{{some_queryset.count}}`在您的模板中。

不要使用`len`，效率要低得多。数据库应该做这项工作。请参阅有关[`count()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#count).

但是，考虑到缓冲区的建议，如果您打算无论如何都要遍历记录，您不妨使用`len`这将涉及解析查询集并使结果行驻留在主内存中 - 这不会浪费，因为您将访问这些反正行。它实际上可能更快，具体取决于数据库连接延迟，但您应该始终测量。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-11-17T11:11:49.680

接受的答案并不完全正确。您是否应该使用 len() （或模板中的长度过滤器）与 count() 取决于您的用例。

如果**QuerySet 仅用于计算行**数，请使用 count()。

如果**QuerySet 在别处使用**，即在循环中，使用 len() 或 |length。在这里使用 count() 将发出另一个 SELECT 查询来计算行数，而 len() 只是计算 QuerySet 中缓存结果的数量。

从[文档](https://docs.djangoproject.com/en/2.1/ref/models/querysets/#django.db.models.query.QuerySet.count)：

> 请注意，如果您想要 QuerySet 中的项目数并且还从中检索模型实例（例如，通过迭代它），使用 len(queryset) 可能更有效，它不会导致额外的数据库查询，例如count() 会。

尽管您似乎已经使用 prefetch_related() 预先加载了相关对象，但您可以安全地使用 count() 并且 Django 将足够聪明地使用缓存数据而不是执行另一个 SELECT 查询。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-06-08T18:30:14.737

只是为了突出上面的@Yuji'Tomita'Tomita 评论作为单独的答案：

> 有一个过滤器`length`可以调用`len()`任何东西。

所以你可以使用：

```
{{ some_queryset|length }} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-07-19T17:39:22.330

虽然我试图用 Django（3.8.3）显示追随者的数量，但我解决了“计数”问题。

```
 <p>{{profile.following.count}}</p> 
```

# ios - 在 MKMapView 中的当前位置周围添加随机 MKAnnotations

> ID：10695323
> 
> 赞同：3
> 
> 时间：2012-05-22T03:22:32.340
> 
> 标签：ios, cocoa-touch, mkmapview, mapkit, mkannotation

我有一个`MKMapView`显示当前用户位置的。当我单击导航栏中的按钮时，我想随机放置 10 个`MKAnnotation`图钉。这些可以随机放置在任何地方，但只能在当前可见的地图区域内和当前位置周围。

怎么会去做这样的事情？有没有办法在用户位置附近但在地图区域内有一个长/纬度范围？那么，我可以从这个范围中随机选择吗？

基本上，我需要找到当前可用的坐标`MKCoordinateRegion`。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T04:42:39.637

您可以使用用户位置与其他位置之间的距离来获取注释

看看下面的代码

```
#define DISTANCE_RADIUS     10.0    // in KM
-(NSArray *)findNearMe:(NSArray *)lounges {
NSMutableArray *arNearme = [NSMutableArray array];

CLLocation *currentLocation;
for(NSDictionary *d in lounges) 
{

currentLocation = [[CLLocation alloc] initWithLatitude:29.33891 longitude:48.077202];

    CGFloat latitude=[[d valueForKey:@"latitude"] floatValue];
    CGFloat longitude=[[d valueForKey:@"longitude"] floatValue];
    CLLocation *newPinLocation=[[CLLocation alloc] initWithLatitude:latitude longitude:longitude];
    double distanceValue=[currentLocation distanceFromLocation:newPinLocation]; 

    if(distanceValue/1000.0<=DISTANCE_RADIUS) {
        [arNearme addObject:d];
    }
}
return  arNearme;
} 
```

它将返回用户位置附近 1 到 1000 公里范围的数组。使用注释数组并将您的注释显示在带有用户位置的地图视图中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:34:36.113

我想通了，我是这样做的：

```
/**
 * Adds new pins to the map
 *
 * @version $Revision: 0.1
 */
+ (void)addPinsToMap:(MKMapView *)mapView amount:(int)howMany {

    //First we need to calculate the corners of the map so we get the points
    CGPoint nePoint = CGPointMake(mapView.bounds.origin.x + mapView.bounds.size.width, mapView.bounds.origin.y);
    CGPoint swPoint = CGPointMake((mapView.bounds.origin.x), (mapView.bounds.origin.y + mapView.bounds.size.height));

    //Then transform those point into lat,lng values
    CLLocationCoordinate2D neCoord = [mapView convertPoint:nePoint toCoordinateFromView:mapView];
    CLLocationCoordinate2D swCoord = [mapView convertPoint:swPoint toCoordinateFromView:mapView];

    // Loop
    for (int y = 0; y < howMany; y++) {
        double latRange = [MapUtility randomFloatBetween:neCoord.latitude andBig:swCoord.latitude];
        double longRange = [MapUtility randomFloatBetween:neCoord.longitude andBig:swCoord.longitude];

        // Add new waypoint to map
        CLLocationCoordinate2D location = CLLocationCoordinate2DMake(latRange, longRange);
        MPin *pin = [[MPin alloc] init];
        pin.coordinate = location;
        [mapView addAnnotation:pin];

    }//end

}//end

/**
 * Random numbers
 *
 * @version $Revision: 0.1
 */
+ (double)randomFloatBetween:(double)smallNumber andBig:(double)bigNumber {
    double diff = bigNumber - smallNumber;
    return (((double) (arc4random() % ((unsigned)RAND_MAX + 1)) / RAND_MAX) * diff) + smallNumber;
}//end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T15:40:28.497

在 Swift 3.0 中

```
func addPins() {
    let nePoint = CGPoint(x: mapView.bounds.origin.x + mapView.bounds.size.width, y: mapView.bounds.origin.y)
    let sePoint = CGPoint(x: mapView.bounds.origin.x, y: mapView.bounds.origin.y + mapView.bounds.size.height)

    let neCoord = mapView.convert(nePoint, toCoordinateFrom: mapView)
    let seCoord = mapView.convert(sePoint, toCoordinateFrom: mapView)

    var y = 5
    while y > 0 {
        let latRange = randomBetweenNumbers(firstNum: Float(neCoord.latitude), secondNum: Float(seCoord.latitude))
        let longRange = randomBetweenNumbers(firstNum: Float(neCoord.longitude), secondNum: Float(seCoord.longitude))
        let location = CLLocationCoordinate2D(latitude: CLLocationDegrees(latRange), longitude: CLLocationDegrees(longRange))
        let pin = MKPointAnnotation()
        pin.coordinate = location
        pin.title = "Home"
        mapView.addAnnotation(pin)
        y -= 1
    }

}

func randomBetweenNumbers(firstNum: Float, secondNum: Float) -> Float{
    return Float(arc4random()) / Float(UINT32_MAX) * abs(firstNum - secondNum) + min(firstNum, secondNum)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-14T14:09:01.907

迅捷4：

```
// returned coordinates all restricted to the provided bound
// nwCoordinate: north West coordinate of the target bound
// seCoordinate: south east coordinate of the target bound

func createRandomLocation(nwCoordinate: CLLocationCoordinate2D, seCoordinate: CLLocationCoordinate2D) -> [CLLocationCoordinate2D]
{
   return (0 ... 30).enumerated().map { _ in
        let latitude = randomFloatBetween(nwCoordinate.latitude, andBig: seCoordinate.latitude)
        let longitude = randomFloatBetween(nwCoordinate.longitude, andBig: seCoordinate.longitude)
        return CLLocationCoordinate2D(latitude: latitude, longitude: longitude)
    }
}

private func randomFloatBetween(_ smallNumber: Double, andBig bigNumber: Double) -> Double {
    let diff: Double = bigNumber - smallNumber
    return ((Double(arc4random() % (UInt32(RAND_MAX) + 1)) / Double(RAND_MAX)) * diff) + smallNumber
} 
```

# c# - 如何在 .Net 中更新内存映射文件中的值

> ID：10695324
> 
> 赞同：0
> 
> 时间：2012-05-22T03:22:40.860
> 
> 标签：c#, .net, c#-4.0

我有一个代理进程，许多客户端应用程序将使用 .Net 远程处理连接到该进程。我想通过使用一些引用计数方案来管理这个代理的存在。为此，我想我会使用一个小的内存映射文件，我将在其中存储一个键值（字符串-整数）对，它看起来像这样：

> ref_count 2

但是，我想不时更新 ref_count 值，但这样做时遇到问题。这是我的代码：

```
using System;
using System.IO;
using System.IO.MemoryMappedFiles;
using System.Threading;

class Program
{
    static void Main(string[] args)
    {
        using (MemoryMappedFile mmf = MemoryMappedFile.CreateNew("testmap", 100))
        {
            bool mutexCreated;
            Mutex mutex = new Mutex(true, "testmapmutex", out mutexCreated);
            using (MemoryMappedViewStream stream = mmf.CreateViewStream())
            {
                BinaryWriter writer = new BinaryWriter(stream);
                writer.Write("count:");
                writer.Write(3);
            }
            mutex.ReleaseMutex();

            mutex.WaitOne();
            using (MemoryMappedViewStream stream = mmf.CreateViewStream())
            {
                BinaryReader reader = new BinaryReader(stream);
                BinaryWriter writer = new BinaryWriter(stream);

                Console.WriteLine("String value is: {0}", reader.ReadString()); 
                Console.WriteLine("UInt32 value is: {0}", reader.ReadUInt32()); 

                // Update mmf data
                writer.Write("count:");
                writer.Write(30);

                // empty string where "count" was expected
                Console.WriteLine("String value is: {0}", reader.ReadString());
                // 0 where 30 was expected
                Console.WriteLine("UInt32 value is: {0}", reader.ReadUInt32()); 
            }
            mutex.ReleaseMutex();
        }
    }
} 
```

所以，我的问题是，更新我的引用计数的最佳方法是什么，以及为什么我的第二次写入在上面的代码示例中不起作用？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:07:55.517

第二个 Write 调用工作 - 但您正在从“错误”位置写入/读取。

完成所有这些之后，您应该在内存中拥有：

5（“代码：”的长度）“代码：”（“代码：”的实际字符）3（您写入/读取的值）5（“代码：”的长度）“代码：”（“代码：”的实际字符） code:") 30 (你写的值) 0 (你读的空字符串的长度) 0 (你读的值)

对任何 BinaryReader/BinaryWriter 方法的每次调用都在推进底层 Stream。它第一次起作用，因为您在内存映射文件的视图上构建了一个新流（从而重置了流）。尝试在写入和读取之间调用 stream.Seek(0L, SeekOrigin.Begin) 并查看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:56:50.407

它是一条溪流。因此，从中读取会推进职位。您需要添加

```
 stream.Position = 0; 
```

在更新计数的代码*和*再次读取它的代码之前。通过不写字符串进一步改进它，你不需要它。

# javascript - 卡住：使用下一个按钮隐藏/显示 div，重定向最后一个 div

> ID：10695326
> 
> 赞同：1
> 
> 时间：2012-05-22T03:22:58.223
> 
> 标签：javascript, jquery

这是我到目前为止所拥有的，它允许用户单击图像以打开一个新窗口并转到一个位置。发生该单击时，父窗口中的图像将替换为下一个 div。

示例：http: [//jsfiddle.net/rzTHw/](http://jsfiddle.net/rzTHw/)

这是到目前为止的工作代码......

```
<div class = "box"><a href="link1.html" target="_blank"><img src="http://placehold.it/300x150/cf5/&text=img+1"></a></div>
<div class = "box"><a href="link2.html" target="_blank"><img src="http://placehold.it/300x150/f0f/&text=img+1"></a></div>
<div class = "box"><a href="link3.html" target="_blank"><img src="http://placehold.it/300x150/fb1/&text=img+1"></a></div>
<div class = "box"><a href="link4.html" target="_blank"><img src="http://placehold.it/300x150/444/&text=img+1"></a></div>​ 
```

查询：

```
$('.box').not(':first').hide();
$('.box a').click(
    function(e){
        e.preventDefault();
        var newWin = window.open(this.href,'newWindow'),
            that = $(this).closest('.box'),
            duration = 1200;
        if (that.next('.box').length){
            that.fadeOut(duration,
                         function(){
                             that.next('.box').fadeIn(duration);
                         });
        }
    }); 
```

我遇到的问题是：

1.  创建一个“下一个”按钮，以便用户无需单击图像即可循环到下一个 div，从而避免打开新窗口以获取下一个图像。
2.  单击最后一个 div 将窗口位置重定向到 URL，同时在`a href`单击图像时仍执行正常功能，即打开一个新窗口到该位置。否则，如果在显示最后一个 div 时单击“下一步”按钮，只需重定向用户。

解决这个问题的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:26:48.693

这是我尝试调整您的代码以允许下一个按钮，以及我对您希望对最后一张图像发生什么的最佳猜测：

```
var redirectUrl = 'http://www.google.com'; // replace in your code

function next(event, duration) {
    duration = duration || 1200; // default value
    var that = $('.box:visible');
    if (that.next('.box').length) {
        that.fadeOut(duration, function() {
            that.next('.box').fadeIn(duration);
        });
    } else {
        window.location.href = redirectUrl;
        // the above line doesn't work inside jsFiddle, but should on your page
    }
    return false;
}

$('.box').not(':first').hide();
$('.box a').click(

function(e) {
    e.preventDefault();
    var newWin = window.open(this.href, 'newWindow'),
        duration = 1200;
    next(e, duration);
});
$('.next').click(next); 
```

[jsFiddle 示例在这里](http://jsfiddle.net/greglockwood/dUa5L/1/)。请注意，某些浏览器会阻止重定向，因为它在 iframe 中运行。但它应该在正常页面中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:12:18.010

也许看看幻灯片 jquery 插件。[JQuery Cycle](http://jquery.malsup.com/cycle/more.html?v2.23)只是一个例子。有很多。只需 google jquery Slideshow 或 jquery cycle 并选择最适合您的那个。循环插件本身有许多“寻呼机”示例，可让您在不离开页面的情况下更改显示图片的内容。

他们中的大多数都提供内容是 html 而不仅仅是一张简单的图片，这样你就可以玩弄你想要的东西。

如果这是您想要完成的，还有 Fancybox、lightbox、colorbox 等。

# python - 如何在pywsgi中处理非http请求

> ID：10695329
> 
> 赞同：0
> 
> 时间：2012-05-22T03:23:09.113
> 
> 标签：python, gevent

我有一个使用 gevent.pywsgi.WSGIServer [(http://www.gevent.org/gevent.pywsgi.html)](http://www.gevent.org/gevent.pywsgi.html)的 Web 服务器，我需要处理非 http 请求以及正常的 http 请求。

```
Server:
    web_server = gevent.pywsgi.WSGIServer(('', 8080), web_server);
    web_server.serve_forever();

Handler:
def viewer_command_server(env, start_response):
    if env['REQUEST_METHOD'].upper() == "PUT":
        path = env["PATH_INFO"]
        start_response("200 OK", [("Content-Type", "text/html"), ("Cache-Control", "no-cache"), ("Connection","keep-alive")])
            return [ ""] 
```

这处理正常的 PUT 请求，但我还想为 flash 应用程序使用的 crossdomain.xml 文件提供服务。但问题是当 Flash 应用程序尝试检索其 crossdomain.xml 文件时，我得到了这个。

```
"socket fileno=13 sock=66.228.55.170:9090 peer=96.54.202.251:63380: Invalid HTTP method: '<policy-file-request/>\x00'
96.54.202.251 - - [2012-05-21 22:58:53] "<policy-file-request/>" 400 0 2.940527
" 
```

有没有办法处理这个请求？Adobe 建议在端口 843 上运行单独的 tcp 服务器来提供此文件。我想把所有东西都保留在 8080 端口上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:34:35.190

在端口 843 上使用的协议不是 HTTP。请参阅[http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html](http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html)。

一个有效的 HTTP 请求看起来像

```
GET /path HTTP/1.0 
```

（有关更多示例，请参见例如[http://www.jmarshall.com/easy/http/#sample](http://www.jmarshall.com/easy/http/#sample)。）

如果有办法告诉 Flash Player 客户端在 843 以外的某个端口上查找策略文件，那么也许有办法告诉它使用 HTTP 而不是这个自定义的 XML-ish "" 消息，然后只有这样你能从你的HTTP服务器处理这个吗？

一切皆有可能，但我认为在用于 HTTP 的同一端口 8080 上处理非 HTTP 请求作为 WSGI 服务器的一部分听起来根本不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:40:05.727

我今天设法把这个剥得更远一点。埋在 adobe 文档中的是一个注释，如果您使用的是原始套接字，那么 fit 将使用他们的原始 XML 查询来查找您的跨域文件。如果您指定“http”，它似乎确实可以工作，并且它确实可以通过 http 获取跨域文件。对我来说，问题是我在我的 Flash 脚本中使用了原始 tcp 套接字。所以它开始尝试从该服务器获取跨域文件。因此，为了简单起见，我将更改网络调用以使用 http。无论如何，这就是他们正在做的事情（我使用的是我发现的使用 http 多部分响应进行流式传输的示例）

# ios - iOS 未接收用户到用户应用程序请求

> ID：10695333
> 
> 赞同：7
> 
> 时间：2012-05-22T03:23:30.340
> 
> 标签：ios, facebook, apprequests, facebook-app-requests

我正在使用 Facebook SDK 对话框从 iOS 本机应用程序发送应用程序请求。我创建了一个画布应用程序并设置了 iTunes ID（现在使用商店中不同应用程序的有效 ID，因为我的不是）。请求到达桌面 www 站点，并显示在“应用和游戏>来自朋友的邀请”下。但是，它们不会出现在 iOS 原生 Facebook 应用程序上，除非我首先使用我的应用程序执行 Facebook SSO。然后，我的应用书签出现在 FB 中，并且新的请求增加了计数器。

在安装我的应用程序之前，如何获取在 iOS 上显示的请求？其他可能相关的特殊情况是，我在 iOS 上的“通知”下没有任何活动，只有应用书签。在桌面上，我在第一次登录时看到通知地球闪烁带有红色徽章，但随后徽章消失并且什么都没有，尽管请求出现在“应用程序和游戏”下。这似乎并不完全一致，因为一些测试过我的应用程序的人得到了预期的通知行为，但我从来没有在我自己的 FB 帐户上这样做。难道是因为如果重复添加和删除应用程序进行测试？

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:27:47.337

我的问题似乎是 Facebook 数据库中的一些问题，可能是由于我在早期开发中的各种失误造成的。在某些时候，它开始正常工作，而我没有任何改变。

# c# - TextSelection 的 GetAsTargetRange() 导致未设置对象引用

> ID：10695336
> 
> 赞同：-1
> 
> 时间：2012-05-22T03:24:00.857
> 
> 标签：c#, .net, ms-word

我在 Microsoft Word 中自动突出显示文本。

```
TextSelection[] textSelections = document.FindAllString(this.textBox1.Text, true, true);
foreach(TextSelection selection in textSelections)
{
   selection.GetAsTargetRange().CharacterFormat.HighlightColor = Color.Yellow;
} 
```

上述结果：

> 消息=对象引用未设置为对象的实例

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:37:11.193

原因之一可能是 this.textBox1.Text 不应为空或文档中不存在某些字符。这意味着您应该添加一些文本来将您的对象设置为目标范围。

# android - Android 和 Jsoup

> ID：10695350
> 
> 赞同：4
> 
> 时间：2012-05-22T03:26:46.520
> 
> 标签：android, webview, jsoup

我正在尝试将网站的一部分内容。我决定使用 Jsoup，因为有了它，我可以获取您想要的网站部分，并在 web 视图中播放此撤回的 html 部分。这似乎很容易，但我尝试运行我的应用程序但没有成功。下面是我的代码。他究竟怎么了？

注意：如果有其他更简单的方法可以做到这一点，请给我提示！但我想实时获取内容，好吗？谢谢大家！

> 公共类 RestauranteUniversitarioActivity 扩展 Activity {
> 
> ```
> @Override
> public void onCreate(Bundle savedInstanceState) {
> 
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.main);
>     WebView cardapio = (WebView)findViewById(R.id.web_engine);
>     
>     cardapio.getSettings().setJavaScriptEnabled(true);
>     
>     String data = "";
>     
>     Document doc = null;
>     try {
>     doc = Jsoup.connect("http://www.iguatu.ce.gov.br/").get();
>     }
>   catch (IOException e) {
>     e.printStackTrace();
>   }
>     
>     Elements content = doc.getElementsByClass("dest-left");
>     if(content.size() > 0) {
>       data = content.get(1).text();
>     }
>           cardapio.loadData(data, "text/html", "UTF-8");
> } 
> ```
> 
> }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T17:20:26.153

问题很可能是您在主 (UI) 线程中解析网页。这将锁定 UI/导致您的应用程序冻结。将 移动`doc = Jsoup.connect("http://www.iguatu.ce.gov.br/").get();`到后台线程，例如使用`AsyncTask`或`(Intent)Service`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:11:25.677

如果您正在寻找替代的 html 解析器，请参阅[此线程。](https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281)

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class HtmlParserActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        WebView cardapio = (WebView) findViewById(R.id.web_engine);
        cardapio.getSettings().setJavaScriptEnabled(true);
        String data = "";
        Document doc = null;
        try {
            doc = Jsoup.connect("https://stackoverflow.com/questions/10695350/androi-and-jsoup").get();
            Elements elements = doc.getElementsByClass("post-tag");
            for(Element element : elements) {
                data += element.outerHtml();
                data += "<br/>";
            }
            cardapio.loadData(data, "text/html", "UTF-8");
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    } 
} 
```

参考[Jsoup 食谱](http://jsoup.org/cookbook/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T07:15:46.273

不幸的是，在 Dira 的回答下，我没有足够的声誉来发表评论。请检查 Jsoup.connect(...) 中的 url 并将“android-”替换为“android-”

# ios - iOS App 中的时间线

> ID：10695355
> 
> 赞同：0
> 
> 时间：2012-05-22T03:27:04.087
> 
> 标签：ios, xcode, facebook, sharekit, facebook-timeline

我在我的大多数应用程序中使用 ShareKit，但想在我的应用程序中添加时间轴功能。就像 Spotify 如何自动发布您在时间轴上收听的歌曲一样。这是否可以添加到我的 ShareKit 实现中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:33:51.133

不，ShareKit 没有时间线视图。你必须自己做。

# c# - 从 S3 获取图像

> ID：10695363
> 
> 赞同：3
> 
> 时间：2012-05-22T03:28:24.973
> 
> 标签：c#, amazon-s3

我需要从 S3 检索图像。我不能公开文件夹，也不能使用预签名的 URL，所以我只剩下 GetObject();。现在，我要返回的图像必须设置为 iframe 的源。为此，我使用了 HttpWebHandler。问题是，如果我检索一个 html 页面，它工作正常。但是当我尝试取回图像时，我得到的只是垃圾数据。这是我的代码：

```
 public void ProcessRequest(HttpContext context)
        {

            NameValueCollection appConfig = ConfigurationManager.AppSettings;
            _accessKeyId = appConfig["AWSAccessKey"];
            _secretAccessKeyId = appConfig["AWSSecretKey"];
            S3 = new AmazonS3Client(_accessKeyId, _secretAccessKeyId);
            string responseBody = "";
            var request = new GetObjectRequest()
            .WithBucketName(bucketName).WithKey("020/images/intro.jpg");
            var responseHeaders = new ResponseHeaderOverrides
                                      {
                                          ContentType = "image/jpeg"
                                      };

            request.ResponseHeaderOverrides = responseHeaders;
            using (var response = S3.GetObject(request))
            {
                using (var responseStream = response.ResponseStream)
                {
                    using (var reader =
                        new StreamReader(responseStream))
                    {
                        responseBody = reader.ReadToEnd();
                    }
                }

            }
            context.Response.Write(responseBody);
            context.Response.Flush();
            context.Response.End();
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:55:14.540

这里有几个问题：

1.  您在从亚马逊返回的响应上设置 Content-Type，而不是在您的应用程序的响应上
2.  您正在使用 StreamReader 将流的内容作为文本读取，然后将其作为文本写回

试试这个：

```
using (var response = S3.GetObject(request))
{
    using (var responseStream = response.ResponseStream)
    {
        context.Response.ContentType = "image/jpeg";

        var buffer = new byte[8000];
        int bytesRead = -1;
        while ((bytesRead = responseStream.Read(buffer, 0, buffer.Length)) > 0)
        {
            context.Response.OutputStream.Write(buffer, 0, bytesRead);
        }
    }
}

context.Response.End(); 
```

# java - 如何在休眠中映射 2 个子类和 1 个父抽象类？

> ID：10695364
> 
> 赞同：1
> 
> 时间：2012-05-22T03:28:25.160
> 
> 标签：java, hibernate

我有一个具有 2 个子类的抽象基类。每个子类都有一个映射到其中的表，而基类没有。为了让我映射到 Hibernate，我这样做：

在子类A.hbm.xml

```
<class name="BaseClass" abstract="true">
  <id name="theid" type="string" column="THE_ID" lenght="15"/>

  <union-subclass name="SubClassA" table="TABLE_A">
     ...
  </union-subclass>
</class> 
```

同样的事情去`SubClassB`。

在子类 B.hbm.xml

```
<class name="BaseClass" abstract="true">
  <id name="theid" type="string" column="THE_ID" lenght="15"/>

  <union-subclass name="SubClassB" table="TABLE_B">
     ...
  </union-subclass>
</class> 
```

id 是 中的成员变量`BaseClass`，`TABLE_A`并且`TABLE_B`两者都有`THE_ID`字段。我收到一个运行时错误，提到`BaseClass`有**重复映射**。

当我有两个子类时，我可以知道如何进行 Hibernate 映射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:32:10.973

`SubClassB`在定义中定义`BaseClass`，与`SubClassA`定义一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:45:53.470

如果您创建两个类，则可以使用两个映射文件：

```
public class SubClassA extends BaseClass {
}

public class SubClassB extends BaseClass {
} 
```

类的主体可以是空的，或者它们可以有额外的成员变量（它们只需要默认的无参数构造函数，如果你不编写另一个构造函数，它们就有）。在休眠映射中，您可以访问父类的成员变量（甚至是私有成员变量！）。

然后你只需写两个映射文件 subclassA.hbm.xml

```
<class name="SubClassA" >
   <id name="theid" type="string" column="THE_ID" lenght="15"/>
   ...
</class> 
```

和子类B.hbm.xml

```
<class name="SubClassB">
  <id name="theid" type="string" column="THE_ID" lenght="15"/>
  ...
</class> 
```

PS 在这种情况下，您*不能*映射 BaseClass。如果超类和子类都被映射，Hibernate 会感到困惑。

# c# - C# Tabcontrol 搞砸了我的表单

> ID：10695366
> 
> 赞同：0
> 
> 时间：2012-05-22T03:28:34.770
> 
> 标签：c#, tabcontrol

我有一个由按钮、文本框和标签组成的表单。然后我决定看看是否可以使用选项卡控件，因为我想添加其他按钮，但我不希望它们在同一页面上。所以我剪掉了所有的按钮、文本框和标签，然后粘贴了 tabcontrol。然后我将所有按钮和内容粘贴回 tab1。所以在我开始制作按钮之前，我决定测试运行程序。我得到一个页面，说 nullreferenceexeption 未处理。当我尝试点击我的一个按钮时，我看到里面没有代码，它来自

```
private void Button1_Click(object sender, EventArgs e) 
```

至

```
private void Button1_Click_1(object sender, EventArgs e) 
```

然后错误不断出现。现在我只想让我的表单保持以前的样子，但即使我删除了 tabcontrol，当我点击我的按钮时，它们仍然有`_Click_1`东西。请告诉我如何解决这个问题。我是 C# 新手，所以试着简单地解释一下。

如果可以的话，请告诉我如何在不搞乱整个程序的情况下添加 tabcontrol。

还有一种方法可以让我在 Visual Studio Ultimate 中回滚一天或两天的更改吗？请尽快回来。我正在扯掉我的头发我不能失去我已经工作了 2 周的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:42:10.630

您可以解决大多数这些问题，但这需要一些工作。对于每个按钮，打开属性选项卡并转到事件部分，找到事件`Click`并在文本字段中单击一次。您应该会看到一个下拉箭头，单击该箭头并查看列表。找到您希望按钮触发的事件并单击它*（提示：最后没有`_1`）*

![在此处输入图像描述](../Images/e89029e889716fbf47c1757bbc683b56.png)

# asp.net - 使用 NET4 和 .NET 4.5 并行扩展加速 Azure 存储 API

> ID：10695367
> 
> 赞同：0
> 
> 时间：2012-05-22T03:29:16.113
> 
> 标签：asp.net, stream, threadpool, task-parallel-library, azure-storage

.NET 4 和 4.5 白皮书对并行库如何提高 IO 访问性能进行了评论。（下面的缓冲串行队列示例）

![在此处输入图像描述](../Images/aa52e7391c63a3aa01aa95e9837748cb.png)

**问题：**

有没有人成功地将 .NET 4 并行缓冲或 .NET 4.5 [Async/Await](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)与 Azure 存储集成？

如果是这样，对 ThreadPool 有什么影响，在 ASP.NET 的线程池之外运行它是否有利？

我对 Webrole 和 Worker-only 实现感兴趣。

**资源：**

*   并行编程的白皮书[模式：使用 .NET 4 理解和应用并行模式](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=19222) （参见第 58 页）

*   [覆盖流异步](http://blogs.msdn.com/b/pfxteam/archive/2012/04/06/10291582.aspx)的博客

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:19:32.467

TPL 或 async/await 是纯粹的框架结构。如果您管理线程或手动使用异步调用，它们“简单地”使您可以更轻松地完成相同的任务。无需将任何东西与 Azure 存储集成。

TPL 和建立在它之上的 async/await 功能，使用调度程序来安排工作。默认调度程序使用工作窃取技术的[4.0 线程池。](http://www.danielmoth.com/Blog/New-And-Improved-CLR-4-Thread-Pool-Engine.aspx)这意味着您不必担心将工作安排到 ThreadPool。

至于加速流操作，性能提升来自于分解复杂的流操作并创建一个步骤管道。每个步骤都异步执行，可能使用单独的核心或超线程（如果可用）。这允许 IO-bound 操作与 CPU-bound 操作并行运行。

在您的示例中， TransforStream 将块从输入流异步复制到加密器，然后再到压缩器。这允许每个步骤尽可能快地异步执行：输入流继续从磁盘读取，而压缩器和加密器处理内存中的数据。

至于 Windows Azure 存储性能，这些问题并非特定于 TPL。您应该注意，每个分区或 blob 最多可以处理 IO 操作。最好的选择是对数据进行分区，以便您可以将并行请求发送到不同的分区。您将不得不使用不会创建“热”分区的分区方案。虽然分区对于所有 Azure 应用程序都很重要，但使用异步操作意味着为每个 Web 请求执行更多的 IO 请求。

在回答您的问题时，在 Azure 上使用 TPL 与任何其他应用程序没有什么不同。

# jsf - 如何在 security.xml [spring security] 中设置 css、primefaces、javascript、jquery 模式

> ID：10695370
> 
> 赞同：0
> 
> 时间：2012-05-22T03:30:18.250
> 
> 标签：jsf, jakarta-ee, spring-security, primefaces

**大家好！**
在我的 jsf 页面中，我无法加载任何脚本 [javascript、css、jquery 和 primefaces]，我认为我的问题与我设置 security.xml 的方式有关

**我正在使用：**
primefaces 3.1.1
jsf 2.0
弹簧框架 3.0.2

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/app-config.xml</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/springsecurity.taglib.xml</param-value>
</context-param>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/app-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>faces/index.jsp</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

**我的 security.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<b:beans xmlns="http://www.springframework.org/schema/security"
xmlns:b="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<http auto-config="true" use-expressions="true">

    <intercept-url pattern="/assets/previews/**" filters="none"/>
    <intercept-url pattern="/assets/thumbs/**" filters="none"/>
    <intercept-url pattern="/css/**" filters="none" />
    <intercept-url pattern="/design/**" filters="none" />
    <intercept-url pattern="/images/**" filters="none" />
    <intercept-url pattern="/js/**" filters="none" />
    <intercept-url pattern="/pageAllNews/**" filters="none" />
    <intercept-url pattern="/pageLogin/**" filters="none" />
    <intercept-url pattern="/resources/css/**" filters="none" />
    <intercept-url pattern="/resources/skins/**" filters="none" />
    <intercept-url pattern="/templates/**" filters="none" />

    <intercept-url pattern="/userPage/**" filters="none"/>
    <intercept-url pattern="/**" access="hasRole('ROLE_ADMIN')"/>
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')"/>
    <intercept-url pattern="/**" access="hasAnyRole('ROLE_ADMIN','ROLE_USER')"/>

    <form-login login-page="/userPage/home.jsf"/>
    <logout logout-success-url="/userPage/home.jsf"/>
    <remember-me />
</http>

<authentication-manager>
    <authentication-provider>
        <password-encoder hash="md5"/>
        <jdbc-user-service data-source-ref="dataSource" />
    </authentication-provider>
</authentication-manager>

</b:beans> 
```

谁能给我一个关于这个问题的建议？
谢谢

agungdmt :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:45:31.577

您需要设置`intercept-url`指向静态 Web 资源的标签，以允许匿名用户进行身份验证。

```
<intercept-url pattern="/images/**" access="IS_AUTHENTICATED_ANONYMOUSLY" /> 
```

要么通过与 Web 应用程序上下文不同的上下文来提供静态 Web 内容，我个人就是这样做的。

# javascript - jquery - 如果未找到匹配项，则隐藏过滤选项（元素）

> ID：10695375
> 
> 赞同：0
> 
> 时间：2012-05-22T03:30:54.070
> 
> 标签：javascript, jquery, filter

我有以下代码（也在 JSFIDDLE 上启动并运行：http: [//jsfiddle.net/DSuua/12/](http://jsfiddle.net/DSuua/12/)）

它根据价格匹配对产品进行分类。如果在该价格范围内没有产品，我想在页面加载时完全隐藏左侧面板列表中的过滤器选项（与显示价格范围相比，无论如何，就像我现在所做的那样）。

因此，例如，如果在 10 - 20 的价格范围内没有产品，则隐藏左侧面板上的“$10 - $20”，因为它无关紧要，它只会向用户显示令人讨厌的“未找到匹配”消息。

现在过滤是在点击事件上执行的。在过滤完成之前，它需要首先检查列表属性值（名称、标题）和产品价格值（最低和最高价格），如果没有找到匹配范围，则从列表中隐藏这些过滤项。

我仅限于客户端的此解决方案。

此外，欢迎任何改进此代码的整体提示。

HTML：

```
<ul id="filterByPrice">    
    <li><span class="section-header">PRICE</span></li>    
    <li><a href="#" title="">Any Price</a></li>
    <li><a href="#" name="0" title="9">Under $10</a></li>
    <li><a href="#" name="10" title="19">$10 - $20</a></li>
    <li><a href="#" name="20" title="29">$20 - $30</a></li>
    <li><a href="#" name="30" title="39">$30 - $40</a></li>
    <li><a href="#" name="40" title="49">$40 - $50</a></li>
    <li><a href="#" name="50" title="9999">Over $50</a></li>
</ul>

<ul id="products">
    <li>
        <a href="/product-one">Product One</a><br>
        <span id="lowestPriceRange">0</span>
        <span id="highestPriceRange">9</span>
    </li>
    <li>
        <a href="/product-two">Product Two</a><br>
        <span id="lowestPriceRange">20</span>
        <span id="highestPriceRange">29</span>
    </li>
    <li>
        <a href="/product-three">Product Three</a><br>
        <span id="lowestPriceRange">30</span>
        <span id="highestPriceRange">39</span>
    </li>
    <div id="nothingFound" style="display:none;">
        Nothing found
    </div>
</ul> 
```

CSS：

```
#filterByPrice, #products {
 border:1px solid #ccc;
 padding:10px;  
 width:100px; 
 margin:10px; 
 float:left;
 position:relative;   
} 
```

JS：

```
var noProductMatches = $('#nothingFound');

$('#filterByPrice li a').click(function() 
{
    noProductMatches.hide();

    var priceRangeSelectedItem = $(this).html().toLowerCase();
    var minSelectedPrice = parseInt( $(this).attr("name") );
    var maxSelectedPrice = parseInt( $(this).attr("title") );
    var productContainer = $('#products li');

    if (priceRangeSelectedItem == 'any price')
    {
        productContainer.fadeOut("slow");
        productContainer.delay(100).fadeIn("slow");
    }
    else
    {
        var results = productContainer
            .fadeOut(100)
            .delay(100)
            .filter(function() 
            {
                var minProductPrice = parseInt( $(this).find("#lowestPriceRange").html().toLowerCase() );
                var maxProductPrice = parseInt( $(this).find("#highestPriceRange").html().toLowerCase() );

                return (minProductPrice >= minSelectedPrice &&  maxProductPrice <= maxSelectedPrice);
            })
            .each(function(index, item) 
            {
                $(item).fadeIn("slow");
            });

            if (results.length == 0)
            {
                noProductMatches.fadeIn();
            }
    }
});
​ 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:54:37.473

首先，您应该在页面上只有一个给定 id 的 HTML 元素，因此`highestPriceRange`and`lowestPriceRange`应该是类。其次，这听起来像是在服务器端更容易做的事情，但如果你必须在客户端做这件事，这应该可以解决问题：

```
var hidePrices = {};
hidePrices[0] = true;
hidePrices[10] = true;
hidePrices[20] = true;
hidePrices[30] = true;
hidePrices[40] = true;
hidePrices[50] = true;

$('#products').find('span').each(function(i, el){
    // round price down to nearest 10s
    var key = parseInt(Math.floor($(this).html() / 10) * 10, 10);
    hidePrices[key] = false;
});

$('#filterByPrice').find('li').each(function(i, el){
    if (hidePrices[Number($(this).find('a').attr('name'))]) {
        $(this).hide();
    }
}); 
```

## [看演示](http://jsfiddle.net/DSuua/15/)

# java - 异步Java RMI？

> ID：10695376
> 
> 赞同：2
> 
> 时间：2012-05-22T03:31:33.630
> 
> 标签：java

我正在寻找异步 Java RMI 的框架或实现（最好使用 Lipe RMI，但不是绝对必要的）。我做了一些谷歌搜索，但实际上还没有找到一个简单的实现。如果你们中的任何人已经实现了它并且想节省我自己做的时间，那将是非常棒的。

它可能不相关，但我实际上将在 Android 上使用它来与我的 RMI 后端通信（这就是我需要异步 RMI 的原因）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:57:21.523

我刚刚完成并发布了一个 Lipe RMI 的分支，它正是这样做的，以防有人感兴趣。

[https://github.com/terraframe/lipermi](https://github.com/terraframe/lipermi)

# javascript - jQuery通过带方括号的动态名称选择元素（包括小提琴）

> ID：10695377
> 
> 赞同：0
> 
> 时间：2012-05-22T03:31:56.360
> 
> 标签：javascript, jquery

我怎样才能使这个小提琴工作：http: [//jsfiddle.net/gAHwW/](http://jsfiddle.net/gAHwW/)

```
function $escape(string) { 
    return string.replace(/\\(\[|\]\\)/g,'\\\\$1');
}

$(function() {
    $('input[type="button"]').click(function() {
        alert($escape( $(this).attr('id') )); // to show you what the escape does

        $('#' + $(this).attr('id')).hide(); // doesn't work
        $('#' + $escape( $(this).attr('id') )).hide(); // doesn't work
        $('#alsosquare[]').hide(); // doesn't work

        //$(this).hide(); // works
        //$('#alsosquare\\[\\]').hide(); // works
    });
});​ 
```

我需要通过名称/id 动态选择元素，并且它们的名称/id 可以有方括号。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:39:36.560

您只需要将`\\`括号加倍 escape()。

这是一个演示：http: [//jsfiddle.net/k3YyX/](http://jsfiddle.net/k3YyX/)

* * *

[这是来自jQuery 文档](http://api.jquery.com/category/selectors/)的引用：

> 如果您希望使用任何元字符（例如**!"#$%&'()*+,./:;<=>?@[\]^`{|}~**）作为一个名字，你必须用两个反斜杠转义字符：**\\**。例如，如果你有一个**id="foo.bar"**的元素，你可以使用选择器**$("#foo\\.bar")**。

* * *

**更新：**

这是你的小提琴，处于工作状态：http: [//jsfiddle.net/gAHwW/1/](http://jsfiddle.net/gAHwW/1/)

我所做的只是在你的函数`'\\\\$1'`中用这个替换。`'\\$1'``$escape`

# java - Java - 打包文件 (zip) 更改 lastModified 日期

> ID：10695379
> 
> 赞同：2
> 
> 时间：2012-05-22T03:32:00.900
> 
> 标签：java, zip, unzip

目前，我有一种机制可以检查进出系统的文档。如果某些内容尚未修改，则不会将其签入文档管理系统。不幸的是，我现在在这个过程中一直在压缩和解压缩文件，任何解压缩/压缩的文件都有一个新的修改日期，而不是对象的实际修改日期。

无论如何，Java 中是否有确定文件最后一次打开和修改与打包相比的实际时间？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T05:24:52.860

像这样：

```
// when zipping:
ZipEntry e = ...
e.setTime(file.lastModified());

...

// when unzipping
File file = ...
file.setLastModified(e.getTime()); 
```

# android - 在 Android TableLayout 中打印出 ArrayList 内容

> ID：10695380
> 
> 赞同：0
> 
> 时间：2012-05-22T03:32:18.330
> 
> 标签：android, loops, arraylist, tablelayout

我有这个 ArrayList：

```
 ArrayList<Double> debtList = datasource.debtList;
 ArrayList<Double> feeList = datasource.feeList; 
```

如何在循环中的 TableLayout 中并排打印这两个列表（格式无关紧要）？这是布局：

```
 TableLayout table = (TableLayout) findViewById(R.id.myTableLayout); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T04:00:05.867

好的，你有两个arraylists debtList和feeList，我假设arraylist都包含相同数量的元素，现在遍历这个列表，Create Table Row将两个textViews添加到table row，并将tablerow添加到tableLayout，所以你可以执行以下操作：

```
ArrayList<Double> debtList = datasource.debtList;
ArrayList<Double> feeList = datasource.feeList;
TableLayout table = (TableLayout) findViewById(R.id.myTableLayout);
for(int i=0;i<debtList.size();i++)
{
    TableRow row=new TableRow(this);
    double debt = debtList.get(i);
    double fee = feeList.get(i);
    TextView tvDebt=new TextView(this);
    tvDebt.setText(""+debt);
    TextView tvFee=new TextView(this);
    tvFee.setText(""+fee);
    row.addView(tvDebt);
    row.addView(tvFee);
    table.addView(row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:19:33.583

**如果arrayLists 大小不相等，**我已经找到了解决方案。

这是我实现的逻辑：

这是我的活动：

```
public class TestStringActivity extends Activity {
private ArrayList<String> input1 = new ArrayList<String>();
private ArrayList<String> input2 = new ArrayList<String>();
private TableRow row;
private TableLayout inflate;
private TextView txtcol1, txtcol2;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    //Populating the arrayList
    input1.add("1 ");
    input1.add("2 ");
    input1.add("3 ");
    input2.add(" Red");
    input2.add(" Blue");
    input2.add(" Green");
    input2.add(" White");

    inflate = (TableLayout) TestStringActivity.this
            .findViewById(R.id.mytable);

    for (int i = 0, j = 0; i < input1.size() || j < input2.size();) {
        row = new TableRow(TestStringActivity.this);
        txtcol1 = new TextView(TestStringActivity.this);
        if (input1.size() > i) {
            if ((input1.get(i) != null)) {
                txtcol1.setText(input1.get(i));
                i++;
            }
        } else {
            txtcol1.setText("");
        }
        row.addView(txtcol1);

        txtcol2 = new TextView(TestStringActivity.this);
        if ((input2.size() > j)) {
            if (input2.get(j) != null) {
                txtcol2.setText(input2.get(j));
                j++;
            }
        } else {
            txtcol2.setText("");
        }
        this.row.addView(txtcol2);

        inflate.addView(row);

    }

  }
} 
```

这是我的表格布局 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mytable"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

</TableLayout> 
```

如果 arrayLists 大小不相等，希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T03:47:13.593

假设 s 中的条目数`ArrayList`等于 s 中的单元格数`TableLayout`，您可以尝试以下操作：

```
int index = 0;
TableLayout tableLayout = findViewById(R.id.table_layout);

for(int n = 0, s = tableLayout.getChildCount(); n < s; ++n) {
    double debt = debtList.get(index);
    double fee = feeList.get(index);

    TableRow row = (TableRow) tableLayout.getChildAt(n);
    TextView cell = (TextView) row.findViewById(R.id.textview_cell);

    name.setText("debt = " + debt + ", fee = " + fee);
    index++;
} 
```

# html - HTML标签调试问题

> ID：10695382
> 
> 赞同：0
> 
> 时间：2012-05-22T03:32:35.597
> 
> 标签：html

好的，所以我似乎无法弄清楚我的代码有什么问题。

```
<html>
<head>
<title></title>
</head>
<h1>This is a heading</h1>
<h2>This is a heading</h2>
<h3>This is a heading</h> 
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T03:33:22.227

您缺少一个`<body>`标签。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
        <title></title>
    </head>
    <body>
        <h1>This is a heading</h1>
        <h2>This is a heading</h2>
        <h3>This is a heading</h3> 
    </body>
</html> 
```

此外，h3 结束标签有一个错字，我已修复。它应该是`</h3>`，但你有`</h>`。最后，如果这是一个 html 或 xhtml 文档，它需要一个 doctype 声明。我也添加了其中之一——严格的 XHTML。有几种可能的文档类型；你必须选择一个适合你的情况。这有点超出你的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:04:34.180

要查找语法错误，请首先使用[W3C 标记验证器](http://validator.w3.org)。您将看到唯一的错误是结束标记 for`h3`被错误输入为 as`</h>`而不是正确的`</h3>`。由于技术原因，错误在两条错误消息中报告。

出于实际原因，您应该在文档的最开始添加文档类型声明，例如`<!doctype html>`，以避免[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)。

`<body>`像和这样的标签的使用`</head>`是可选的，除了在 XHTML 中，它有自己的规则。使用这样的标签是品味和编码风格的问题，而不是正确性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:33:23.333

好吧，对于初学者来说，你没有身体......

```
<html>
<head>
<title></title>
</head>
<body>
    <h1>This is a heading</h1>
    <h2>This is a heading</h2>
    <h3>This is a heading</h3> 
</body>
</html> 
```

其次，如果您有问题，请详细描述问题。您遇到的问题是什么？查看[常见](https://stackoverflow.com/faq)问题解答，了解如何在 StackOverflow 上正确提问。

# c++ - 缓冲来自 QResource 的原始数据？

> ID：10695383
> 
> 赞同：0
> 
> 时间：2012-05-22T03:32:56.737
> 
> 标签：c++, qt

我正在使用 Qt 创建一个 3ds 模型加载器。

我想利用 Qt 资源系统并将其用于加载模型等。

我想做类似于这样的语法：

```
Mesh* MeshLoader::loadMesh(const QString& resource) {
    QResource qResource(resource);
    QResource::registerResource(resource); 
    SomeBuffer buffer(qResource.data())
    while (!buffer.eof()) { 
        // Process the file
    }
    QResource::unregisterResource(resource);
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:56:49.030

您发布的代码有什么问题？

请注意：您几乎可以在每个 Qt 数据/流阅读器中使用 Qt 资源表示法（路径中的前导 :）。例如，您可以使用 QFile(":/someresource")。使用 QFile 和 QDataStream 我认为（但也许我错了）你可以只读取文件的块而不加载整个资源并在读取过程中阻塞线程。如果它阻塞了主线程，你总是可以使用 QRunnable 或 QThread 在后台加载资源。

对于缓冲：我不知道 Qt 中内置了任何缓存解决方案（网络相关部分除外），因此您应该自己实现它。

通过这种方式，您可以构建一个 MyResource 类，该类在后台线程中加载目标资源，并在完成时通过信号/插槽进行通知，并且可以按照您想要的方式缓存资源的数据。

# javascript - 解析或使用被调用脚本中的变量？

> ID：10695391
> 
> 赞同：0
> 
> 时间：2012-05-22T03:34:11.837
> 
> 标签：javascript

我有一个 AJAX 函数，它从文件加载内容并显示在调用它的文件中。

但是被调用的脚本我想循环一个数组，该数组实际上是在调用它的脚本中设置的......这是调用文件的主脚本：

```
function call_file(file, div_id) {
    var xmlhttp;
    if(window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById(div_id).innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", file, true);
    xmlhttp.send();
}
var global = new Array();
global[0] = 1;
global[1] = 2;
call_script('html.html', 'main'); 
```

html.html 是被调用的文件，其中包含：

```
<script>
    i = 0;
    for(var id in global) {
        alert(i + ' = ' + id);
        i++;
    }
</script> 
```

这是可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:39:19.153

一种方法是提取脚本并自己进行评估。例如：

```
//....
document.getElementById(div_id).innerHTML = xmlhttp.responseText;
var str = xmlhttp.responseText;
var reg = /<script>([^>]*)<\/script>/img;
while(reg.test(str))eval(RegExp.$1);
//... 
```

# ruby - Ruby：获取具有最大值的哈希对

> ID：10695392
> 
> 赞同：6
> 
> 时间：2012-05-22T03:34:13.880
> 
> 标签：ruby

这是一个哈希，可以记录我有多少每种水果

```
水果 = {“苹果” => 10，“梨” => 15，“香蕉” => 15，“葡萄” => 12}

```

我想知道我吃的最多的是哪种水果。
如果有决胜局，则将它们全部归还。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T03:45:58.413

```
# easy
max_quantity = fruits.values.max
max_fruits = fruits.select { |k, v| v == max_quantity }.keys

# fast                                                                          
max_quantity = -1.0/0.0
max_fruits = []
fruits.each do |k, v|
  if v > max_quantity
    max_quantity = v
    max_fruits = []
  end
  max_fruits.push k if v == max_quantity
end 
```

由于异常情况是 Bad(tm)，因此这两种情况总是返回一个数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T03:38:10.460

```
max_value = fruits.values.max
keys = fruits.select{|k, v| v == max_value}.keys 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-28T10:51:37.443

使用[Ruby 的 Select](https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-select)方法返回最高值哈希的简短答案（包括决胜局）

```
most_fruit = fruits.select {|x,i| i == fruits.values.max} 
```

例子：

```
fruits = {"apples" => 10, "pears" => 15, "bananas" => 15, "grapes" => 12}
fruits.select {|x,i| i == fruits.values.max } 
```

输出

`{"pears"=>15, "bananas"=>15}`

# jquery - iOS上的VoiceOver在父元素可见后没有将焦点放在子元素上

> ID：10695396
> 
> 赞同：1
> 
> 时间：2012-05-22T03:34:59.670
> 
> 标签：jquery, ios, mobile, accessibility, voiceover

我正在开发一个移动网页，用户在该网页上点击一个按钮来切换默认隐藏的内容的显示。这是一个简单的例子：

```
<div role="button" id="button1">Show Link 1</div>

<div style="display:none" id="div1">
    <a href="#" id="link1">Link 1</a>
</div> 
```

通过点击#button1，我想显示隐藏的 div，然后将焦点放在链接 1 上。这是 JQuery 代码：

```
$(document).ready(function() {      
    $('#button1').click(function() { 
        $('#div1').show(function() { 
            $('#link1').focus();
        })
    });
}); 
```

通常这是有效的。我使用 CSS 为 :focus 添加了一个红色边框，因此我知道该链接在可见后正在接收焦点。但是，当链接获得焦点时，iOS 上的 VoiceOver 不会宣布它。VoiceOver 的焦点仍然在按钮上。（我已经在运行 iOS 4.3.3 的 iPad 和运行 iOS 5.1.1 的 iPhone 4S 上对此进行了测试）。

与上述场景相反，如果获得焦点的元素与刚刚显示的元素相同，则一切正常，VoiceOver 会宣布新获得焦点的链接。这是一个有效的场景示例：

```
<div role="button" id="button2">Show Link 2</div>

<div>
    <a style="display:none" href="#" id="link2">Link 2</a>
</div>

$(document).ready(function() {      
    $('#button2').click(function() { 
        $('#link2').show().focus();
    });
}); 
```

当该元素是刚刚变得可见的元素的子元素时，如何让 VoiceOver 宣布新聚焦的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:29:51.533

> 通常这是有效的。

如果这意味着“有时它可以工作，有时它不能使用相同的代码工作”，这让我相信存在时间问题。链接是在屏幕外还是在聚焦时处于动画状态？尝试在最后一个回调中添加 1 秒超时，看看是否会得到不同的结果。您需要在任何过渡动画完成*后移动焦点。*

> 通常这是有效的。

如果这意味着“某些代码有效（100% 的时间）而其他类似的代码无效（100% 的时间）”，您需要在 bugreport.apple.com 提交错误。

在这两种情况下，如果您发布一个可以测试您的问题场景的 URL，也会有所帮助。

# java - 我可以将 pipedoutputstream 用于多线程吗？

> ID：10695405
> 
> 赞同：3
> 
> 时间：2012-05-22T03:35:35.843
> 
> 标签：java

我可以将一个管道输出流用于多线程并将其连接到一个管道输入流，然后从多线程获取所有输出吗？

以下是代码片段，我想要的是修改和删除线程的输出可用于同步线程，但删除线程的输出丢失了。最后列出 P4Thread 的 run() 方法。

```
PipedInputStream input = new PipedInputStream();
PipedOutputStream output = new PipedOutputStream();

input.connect(output);

P4Thread syncthread = new P4Thread (new String[]{p4exe, "-x-", "sync", "-f"},input, out);
P4Thread modifythread = new P4Thread (new String[]{p4exe, "diff", "-se"},new ClosedInputStream(), output);
P4Thread deletethread = new P4Thread (new String[]{p4exe, "diff", "-sd"},new ClosedInputStream(), output);  

try {
    syncthread.start();
    modifythread.run();
    output.flush();

    deletethread.run();
    output.flush();
    output.close();

    syncthread .join();
    } catch (InterruptedException e) {
        syncthread .interrupt();
    }

public void run() { 
Launcher.ProcStarter ps = new Launcher.LocalLauncher(listener).launch(); 
ps.envs(env).stdin(input).stdout(output).cmds(cmdList); 
if (workDir != null) { 
    ps.pwd(workDir); 
}
try{
   ps.join();
   }catch (InterruptedException e) {
            if (output != null && closePipes) {
                IOUtils.closeQuietly(output);
            }
            //return -1;
        } catch (IOException e) {
            if (output != null && closePipes) {
                IOUtils.closeQuietly(output);
            }
        } finally {
            if (closePipes) {
                IOUtils.closeQuietly(input);
                IOUtils.closeQuietly(output);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:01:33.747

是的，你可以，只要你注意同步你的多线程写入，这样它们就不会交错。

# iphone - 应用程序可以在模拟器上运行，但不能在设备上运行

> ID：10695406
> 
> 赞同：4
> 
> 时间：2012-05-22T03:35:39.433
> 
> 标签：iphone, objective-c, ios, ipad

我有一个使用开源 PSStackedView 来实现类似 twitter 的界面的应用程序。该应用程序在模拟器上运行良好，但是当我在设备上运行它时，一旦我尝试将视图控制器添加到堆栈中，应用程序就会崩溃并突出显示`viewController.view.height = [self screenHeight];`该行`Thread 1: breakpoint 1.1`

该应用程序然后只是挂在设备上。我曾尝试在启用僵尸的情况下进行调试，但它没有显示任何问题。

我对此感到恶心，因为我终于在设备上进行了操作，我在这个应用程序上投入了很多时间！任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T03:41:02.113

您的应用程序没有挂起 - 它只是在该行遇到了一个断点，这很可能是您意外设置的。转到代码停止的行，然后按 Cmd + \ 禁用断点。您还可以按 Ctrl+Cmd+Y 继续在断点后运行应用程序。您可以在 Xcode 的 Debug 菜单下尝试其他热键和命令。

# php - 无法获取 mysqli ...调用非对象上的成员函数 fetch_assoc()

> ID：10695410
> 
> 赞同：0
> 
> 时间：2012-05-22T03:36:14.283
> 
> 标签：php, mysql

我完全感到困惑。我的整个页面代码如下。

最初，我在页面顶部包含 header.php、sidebar、topMenuBar 和 mainContentShell，在它之后运行第一个查询，然后是第二个查询，等等页面的其余部分。一切正常。不过，我的第一个查询有所不同...我检查了 $_GET['stone'] 数字是否大于零且小于 select max(StoneID)，但如果有人手动输入 StoneID，我仍然会出错从库存中删除的石头。我修改了我的 $_GET 验证计划，并将其移到包含的文件上方，以便 header() 重定向可以正常工作。现在，我的第二个查询不起作用，即使它完全没有改变。

**Var_dump($querySN)**产生**string(53) "select StoneName from stonetypes where StoneID = '1'"**和**var_dump($resultSN)**产生**NULL**。它指出：第 35 行发生错误 --- $resultSN = $db->query($querySN); 状态数次：无法获取 mysqli 状态数次：尚不允许属性访问 结论是：在第 36 行对非对象调用成员函数 fetch_assoc() ---$rowSN = $resultSN ->fetch_assoc();

有谁知道这里发生了什么以及我该如何解决？页面代码如下。谢谢！！！

```
<?php 
require('./inc/config.inc.php');

$stone = (INT)$_GET['stone'];   

require(MYSQL1);

$queryCk = "select StoneID from stonetypes";
$resultCk = $db->query($queryCk);
$var = array();
while ($rowCk = $resultCk->fetch_assoc()){
     $var[] = $rowCk['StoneID'];
}

if(!in_array($stone, $var)) {
     header('Location: beadgallery.php?type=stones');
     exit;
} else {

include('inc/header.inc.php');
include('inc/sidebar.inc.php');
include('inc/topMenuBar.inc.php');
include('inc/mainContentShell.inc.php');
?>

<div id="mainContent">
<div class="center">

<?php

             $querySN = "select StoneName from stonetypes where StoneID = '$stone' ";
             $resultSN = $db->query($querySN);
             $rowSN = $resultSN->fetch_assoc();

                echo '<table id="cartDisplayTable">';
                echo '<tr>';
                echo '<td colspan="2">';
                        echo '<table id="titleTable">';
                        echo '<tr>';
                            echo '<td id="stoneTitle">';
                            if (isset($rowSN['StoneName'])){
                            echo '<h2>'.ucwords($rowSN['StoneName']).'</h2>';}
                            echo '</td>';
                        echo '</tr>';

             $query = "select * from organized_inventory2 where StoneID = '$stone' ";
             $result = $db->query($query);

             $num_beadItems = $result->num_rows;
                $justused='abc';
                for ($i=0; $i < $num_beadItems; $i++) {
                    $row = $result->fetch_assoc();

                    if (!isset($row['itmphoto'])) {
                                    echo '</table>';
                        echo '</td>';
                        echo '</tr>';

                        echo '<tr><td colspan="2"><hr id="cartDivider"></td></tr>';

                        echo '<tr>';
                        echo '<td id="cartImgCell">';
                        echo '<img src="img/nophoto.gif">';
                        echo '</td>';
                        echo '<td id="cartInfoCell">';
                            echo '<table id="innerTable">';
                                    include ('inc/stoneCartInfo.inc.php');

                    } elseif ($row['itmphoto'] == $justused) {
                                echo '<tr><td colspan="2"><hr id="itemDivider"></td></tr>';
                                    include ('inc/stoneCartInfo.inc.php');

                    } else {

                                    echo '</table>';
                        echo '</td>';
                        echo '</tr>'
                        ;

                    echo '<tr><td colspan="2"><hr id="cartDivider"></td></tr>'
                    ;
                    echo '<tr>';
                    echo '<td id="cartImgCell">';

                        echo '<img src="img/invent/'.$row['itmphoto'].'">';
                        $justused = $row['itmphoto'];

                        echo '</td>';
                        echo '<td id="cartInfoCell">';
                            echo '<table id="innerTable">';
                                    include ('inc/stoneCartInfo.inc.php');                  }
                    }

                                    echo '</table>'
                                    ;
                        echo '</td>';
                        echo '</tr>'
                        ;

                echo '</table>'
                ;
            } 
                 $result->free();
                 unset($result);
             $db->close();

        ?>

    </div> <!-- div class="center" -->

</div> <!-- div id="mainContent" --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:15:46.047

整数不需要像**StoneID = '1'**那样在值周围加上引号，这应该不是问题，因为 MySQL 应该进行类型转换。

您尚未检查 "$result" 包含的内容，如果它是布尔值，则查询失败，您需要查看[mysqli_error](http://php.net/manual/en/mysqli.error.php)的输出。

# wordpress - 将鼠标悬停在我的 wordpress 网页上的文本上时如何显示图像

> ID：10695411
> 
> 赞同：0
> 
> 时间：2012-05-22T03:36:31.790
> 
> 标签：wordpress, hover, blogs

好的极客...

我有一个包含数百名玩家图像的文件夹。

图像以玩家名称命名：

“约翰·多伊”“简·多伊”

我想在您将鼠标悬停在播放器名称文本上时显示播放器图像。

有什么想法我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:19:19.277

看看tippy插件

[http://croberts.me/projects/wordpress-plugins/tippy-for-wordpress/](http://croberts.me/projects/wordpress-plugins/tippy-for-wordpress/)

它正是您要找的。

例如，请参阅 - [http://scrobbn.com/cakedogg-and-presentcat/](http://scrobbn.com/cakedogg-and-presentcat/)

我发现我不得不关闭移动浏览，因为图像不适合纵向的 iPhone 屏幕。

谷歌“viewport wordpress”关于如何注释掉 header.php 中的代码

我敢肯定，如果您更改选项，您可以使其适用于移动设备，但我不会被打扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T20:09:27.917

这篇简短的文章解释了如何使用插件在几秒钟内为您的 Wordpress 网站创建图像翻转动画。无需代码。

[http://wpvisualslideboxbuilder.com/how-to-create-a-wordpress-slide-box/](http://wpvisualslideboxbuilder.com/how-to-create-a-wordpress-slide-box/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:50:50.500

你可以使用一些 CSS 技能来做到这一点。就像在玩家姓名的文本中使用标签一样。将 a.hover css 添加到与相应播放器具有背景图像的相同文本中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T03:46:25.293

如果您从头开始，最好的方式来做谷歌。检查以下链接，我希望这是您所需要的-

[链接1](http://internetbrothers.com/dhtml_mouseover.htm)

[链接2](http://www.dynamicdrive.com/dynamicindex4/imagetooltip.htm)

[链接3](http://www.dynamicdrive.com/dynamicindex4/thumbnail2.htm)

`Wordpress`检查负责这些文本显示的文件，然后根据您的要求呈现这些文本，如上面的链接所示。

# c# - 如何指定仅在有平局时才使用 Linq ThenBy 子句？

> ID：10695414
> 
> 赞同：2
> 
> 时间：2012-05-22T03:37:15.570
> 
> 标签：c#, .net, linq, sorting, ienumerable

我有一个带有 OrderBy 和 ThenBy 的 linq 查询（与数据库无关）

```
var sortedList = unsortedList
                .OrderBy(foo => foo.Bar) //this property access is relatively fast
                .ThenBy(foo => foo.GetCurrentValue()) //this method execution is slow 
```

获取`foo.Bar`速度很快，但执行`foo.GetCurrentValue()`速度很慢。仅当某些成员具有相等的 Bar 值时，返回值才重要，这种情况很少发生，但在发生这种情况时需要考虑。是否可以选择仅在 Bar 值相等的情况下需要平局时才执行 ThenBy 子句？（即如果 foo.Bar 值是唯一的，则不会执行）。

另外，实际上 Bar 也有点慢，所以最好不要为同一个对象调用两次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T03:43:45.837

由于您不在数据库中，并且您需要对排序进行严格控制，因此您可以将单个 OrderBy 与自定义 IComparer 一起使用，该 IComparer 仅访问它需要的内容，而不执行不必要的评估。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T07:13:58.020

这有点笨拙，但我确信它可以改进 - 也许它不会在一个 linq 语句中完成，但它应该可以工作：

```
var sortedList2 = unsortedList
                .OrderBy(foo => foo.Bar)
                .GroupBy(foo => foo.Bar);

            var result = new List<Foo>();
            foreach (var s in sortedList2)
            {
                if (s.Count() > 1)
                {
                    var ordered = s
                        .OrderBy(el => el.GetCurrentValue());
                    result.AddRange(ordered);
                }
                else
                {
                    result.AddRange(s);
                }
            } 
```

**更新：**
我们可以争论这是否是一种改进，但至少看起来更简洁：

```
var list3 = (from s in sortedList2
             let x = s.Count()
             select x == 1 
                    ? s.Select(el => el) 
                    : s.OrderBy(el => el.GetCurrentValue()))
             .SelectMany(n => n); 
```

**更新2：**

您可以使用`Skip(1).Any()`代替`Count()`- 这应该避免我猜想的整个序列的枚举。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:13:06.480

```
var query = unsortedList
  .GroupBy(foo => foo.Bar)
  .OrderBy(g => g.Key)
  .SelectMany(g => g.Skip(1).Any() ? g.OrderBy(foo => foo.GetCurrentValue()) : g); 
```

这有不返回的明显缺点`IOrderedEnumerable<Foo>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T03:43:18.633

试试这个

```
var sortedList = unsortedList.OrderBy(foo => foo.Bar);

if(some_Condition)
{ 
   sortedList = sortedList.OrderBy(foo => foo.GetCurrentValue()); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T01:49:00.143

我更改了 Joanna Turban 的解决方案并开发了以下扩展方法：

```
public static IEnumerable<TSource> OrderByThenBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> orderBy, Func<TSource, TKey> thenBy)
{
    var sorted = source
        .Select(s => new Tuple<TSource, TKey>(s, orderBy(s)))
        .OrderBy(s => s.Item2)
        .GroupBy(s => s.Item2);

    var result = new List<TSource>();
    foreach (var s in sorted)
    {
        if (s.Count() > 1)
            result.AddRange(s.Select(p => p.Item1).OrderBy(thenBy));
        else
            result.Add(s.First().Item1);
    }
    return result;
} 
```

# python - 为什么“文件结尾”（EOF）是此处文档的实际分隔符？

> ID：10695419
> 
> 赞同：1
> 
> 时间：2012-05-22T03:37:35.187
> 
> 标签：python, ruby, file, shell, heredoc

用于此处文档的“文件结尾”一词从何而来？

```
something <<EOF
something else 1
something else 2
...
EOF 
```

我假设有一些历史可以证明非直观的限制字符串是合理的，并且阅读[Wikipedia 的文章](http://en.wikipedia.org/wiki/End-of-file)还不够：为什么“文件”仍然遍布程序，而流和块更常用于构建此处的文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T03:52:10.487

它来自 Unix 传统，[一切都是文件](http://en.wikipedia.org/wiki/Everything_is_a_file)。在这种情况下，“文件”并不意味着“磁盘文件”，也不一定意味着任何相关的元数据——它意味着更接近现在被称为“流”的东西。最多，“文件”是“由文件描述符访问的东西”。换句话说，您正在生成的进程的 STDIN*是一个文件*，而 heredoc 的 EOF 标志着它的结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T03:46:23.843

因为 EOF 代表“文件结尾”传统上被用作在程序中读取文件时返回的标记或异常的名称，以指示已到达文件末尾。这是一个非常古老的用法。

因此，当在这里编写文档并且您需要一个标记来标记它的结尾（这应该是不太可能意外发生的事情）时，如果您习惯使用该短语来指代结尾，“EOF”会很自然地浮现在脑海中——文件标记。由于它被如此频繁地使用，它甚至被那些不习惯以这种方式思考 EOF 的人*所*接受，因为他们在学习如何使用这里文档时看到它在示例中使用。因此使用传播。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:18:31.170

这只是一个约定。在 shell 脚本中，您几乎可以使用任何东西，例如，

```
cat <<stackoverflow
something else 1
something else 2
...
stackoverflow 
```

in`bash`和它说的一样`EOF`。

# c# - 仅获取和设置类/对象中的 public List<> 成员/字段

> ID：10695420
> 
> 赞同：2
> 
> 时间：2012-05-22T03:37:55.673
> 
> 标签：c#, list, reflection, unity3d, field

我有一个对象/类，我想只为它获取任何公共 List<> 成员/字段的列表/数组。稍后设置这些成员。

目前我可以通过以下方式获得所有公共领域：

```
var fieldValues = obj[index].GetType().GetFields(BindingFlags.Instance | BindingFlags.Public); 
```

一些研究表明我可以测试 GetGenericTypeDefinition() == typeof(List<>)，但我无法直接针对 fieldValues 中返回的值进行测试。

所以总而言之，我想获取一个对象的所有公共字段。整理 List<>，并设置这些成员。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:19:51.167

这样的事情怎么样

```
var fieldValues = test.GetType().GetFields(BindingFlags.Instance | BindingFlags.Public);

foreach(var fieldValue in fieldValues)
{
    if (fieldValue.FieldType.IsGenericType && fieldValue.FieldType.GetGenericTypeDefinition() == typeof(List<>))
    {
        fieldValue.SetValue(test, new List<string>()
        {
            "List Item 1",
            "List Item 2"
        });
    }
} 
```

# css - Sass CSS 渐变生成器

> ID：10695423
> 
> 赞同：0
> 
> 时间：2012-05-22T03:38:18.963
> 
> 标签：css, sass

看看这个 JSFiddle

> [http://jsfiddle.net/JamesKyle/wLkLE/2/](http://jsfiddle.net/JamesKyle/wLkLE/2/)

尝试使用 SASS 重新创建此外观[http://jsfiddle.net/JamesKyle/EyxHE/3/](http://jsfiddle.net/JamesKyle/EyxHE/3/)以便可以轻松修改。

这是我遇到问题的代码......

```
@for $i from 1 through $numberOfUnits {
  if $i == 1 {
    $lineargradient: $majorColor 0%, $majorColor $majorWidthPercent, $gapColor $majorWidthPercent, $gapColor $unitWidthPercent
  }
  else if $i > 1 {
    $minor-begin: ($i-1)*$unitWidthPercent;
    $minor-end: (($i-1)*$unitWidthPercent)+$minorWidthPercent;
    $gap-begin: $minor-end;
    $gap-end: $i*$unitWidthPercent;

    $lineargradient: #{$lineargradient}, $minorColor $minor-begin, $minorColor $minor-end, $gapColor $gap-begin, $gapColor $gap-end;
  }
}​ 
```

我不确定如何对其进行编码以使其输出：

```
$lineargradient: rgba(0,0,0,0.15)... 
```

[SASS 文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#variables_)对如何做这样的事情不是很清楚

同样，您可以在此处以 JSFiddle 形式看到：

> > [http://jsfiddle.net/JamesKyle/wLkLE/2/](http://jsfiddle.net/JamesKyle/wLkLE/2/)

# zend-framework - Zend 框架形式的装饰器

> ID：10695424
> 
> 赞同：0
> 
> 时间：2012-05-22T03:38:37.930
> 
> 标签：zend-framework, zend-form, zend-decorators

我有这个小问题，所以我使用 zend 装饰器将我的输入放在表中，但我需要将 2 个文本输入放在同一个 tr 中，而且我有超过 2 个。

我正在使用的代码

```
$title = new Zend_Form_Element_Text('title');
    $title->setAttrib('size', '100');
    $title->setLabel('Title')
            ->setAttrib('class', 'promoinputs');
$begindate = new Zend_Form_Element_Text('begindate');
    $begindate->setLabel('Time')
            ->setAttrib('class', 'dateinputs');

    $enddate = new Zend_Form_Element_Text('enddate');
    $enddate->setLabel('to')
            ->setAttrib('class', 'dateinputs');
    $radius = new Zend_Form_Element_Text('radius');
    $radius->setLabel('Raduis')
            ->setAttrib('class', 'promoinputs');
    $submit = new Zend_Form_Element_Submit('save');

    $this->addElements(array($title, $begindate, $enddate, $radius, $submit));

    $this->setElementDecorators(
            array(
                'ViewHelper',
                array('Errors', array('data' => 'tr')),
                array(array('data' => 'HtmlTag'), array('tag' => 'td', 'class' => 'element')),
                array('Label',  array('tag' => 'td', 'class' => 'promolabel')),
                array(array('row' => 'HtmlTag'), array('tag' => 'tr', 'class' => 'promotr')),
    ));
    $submit->setDecorators(
            array(
                'ViewHelper',
                array(array('data' => 'HtmlTag'), array('tag' => 'td', 'class' => 'element')),
                array(array('emptyrow' => 'HtmlTag'), array('tag' => 'td', 'class' => 'element', 'placement' => 'PREPEND')),
                array(array('row' => 'HtmlTag'), array('tag' => 'tr'))
    ));
    $this->setDecorators(
                array(
                    'FormElements',
                    array('HtmlTag', array('tag' => 'table', 'class' => 'promotable')),
                    'Form'
        )); 
```

所以我需要将 begindate 和 enddate 放在同一个 tr 中，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:38:41.173

Use subform for it

```
 $subform = new Zend_Form_SubForm();
    $subform->addElement($text1)
            ->addElement($text2)
            ->setDecorators('FormElements',array('HtmlTag',array('tag'=>'tr')));

    $form->addSubForm($subform,'my'); 
```

# javascript - 使用 DistanceMatrixService.GetDistanceMatrix，获取“B”为空或不是对象

> ID：10695425
> 
> 赞同：0
> 
> 时间：2012-05-22T03:39:02.317
> 
> 标签：javascript

```
<script type=text/javascript src=https://maps.googleapis.com/maps/api/js?    sensor=false></script>
<script language=JavaScript>
var mileageidx = new Number();
function getMileage(idx)
{
  // code snipped
  mileageidx = idx;
  var service = new google.maps.DistanceMatrixService();
  service.getDistanceMatrix({ origins: [zipCode], destinations: [hostClubZipCode],    travelMode: google.maps.TravelMode.DRIVING, unitSystem: google.maps.UnitSystem.IMPERIAL, avoidHighways: false, avoidTolls: false}, callback());
  // code snipped
}
function callback(response, status)
{
  alert('in callback routine, mileageidx ='+mileageidx+' google status = '+status);
  if (status == google.maps.DistanceMatrixStatus.OK)
  {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;
    for (var i = 0; i < origins.length; i++)
    {
      var results = response.rows[i].elements;\n";
      for (var j = 0; j < results.length; j++)\n";
      {
        var element = results[j];
        var distance = element.distance.text;
        alert('distance='+distance);
        var duration = element.duration.text;
        var from = origins[i];
        var to = destinations[j];
      }
    }
  }
  else
  {
    if (status == google.maps.DistanceMatrixStatus.INVALID_REQUEST)
    {
      alert('google.maps.DistanceMatrixStatus was INVALID_REQUEST');
    }
    if (status == google.maps.DistanceMatrixStatus.MAX_ELEMENTS_EXCEEDED)
    {
      alert('google.maps.DistanceMatrixStatus was MAX_ELEMENTS_EXCEEDED');
    }
    if (status == google.maps.DistanceMatrixStatus.OVER_QUERY_LIMIT)
    {
      alert('google.maps.DistanceMatrixStatus was OVER_QUERY_LIMIT ');
    }
    if (status == google.maps.DistanceMatrixStatus.REQUEST_DENIED)
    {
      alert('google.maps.DistanceMatrixStatus was REQUEST_DENIED');
    }
    if (status == google.maps.DistanceMatrixStatus.UNKNOWN_ERROR)
    {
      alert('google.maps.DistanceMatrixStatus was UNKNOWN_ERROR');
    }
  }
} 
```

执行代码时，我收到消息“b”为空或不是对象 DistanceMatrixService.getDistanceMatrix 第 1 行代码：0 字符：1 URL：[https://maps.googleapis.com/maps/api/js/DistanceMatrixService。 GetDistanceMatrix?1m1&2s80](https://maps.googleapis.com/maps/api/js/DistanceMatrixService.GetDistanceMatrix?1m1&2s80) ...

此代码工作了两次，然后开始出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T02:00:27.963

发现问题了，如果在同一个范围内（例如同一个例程），似乎代码的两个部分是冲突的。

当我将 api 移到它自己的例程中时，一切都开始工作了。冲突/导致错误的代码是：

```
xmlhttp.open(\"GET\",getClubURL,false);
xmlhttp.send();
textToParse = xmlhttp.responseText;

function calculateDistances(start,end)
{
  //alert('Made it to calculateDistances');
  var service = new google.maps.DistanceMatrixService();
  alert('In calculateDistances, start is '+start+', end is '+end);
  service.getDistanceMatrix(
  {
    origins: [start],
    destinations: [end],
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    avoidHighways: false,
    avoidTolls: false
  }, callback);
}

function callback(response, status)
{
  if (status != google.maps.DistanceMatrixStatus.OK)
  {
    alert('Error was: ' + status);
  }
  else
  {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;
    document.getElementById("mileage[mileageidx]").value =
                                                   response.destinationAddresses;
    for (var i = 0; i < origins.length; i++)
    {
      var results = response.rows[i].elements;
      for (var j = 0; j < results.length; j++)
      {
         var tmpTxt = new String(results[j].distance.text);
         eos = tmpTxt.indexOf(' ');
         alert('eos = '+eos);
         tmpTxt = tmpTxt.substr(0,eos);
         alert('tmpTxt is '+tmpTxt);
         var miles = new Number(tmpTxt);
         miles = Math.round(miles);
         document.getElementById(\"mileage[\"+mileageidx+\"]\").value=miles;
      }
    }
  }
} // End of callback routine 
```

# class - 如何在调解中按名称获取 OMElement？

> ID：10695431
> 
> 赞同：2
> 
> 时间：2012-05-22T03:40:10.697
> 
> 标签：class, wso2

我有这样的响应消息：

```
<message>
    <header>
        <TransactionID>1</TransactionID>
        <Timestamp>2012-05-22 10:10:36</Timestamp>
        <OpCode>BOSS_DELETE_USER_SME.CD</OpCode>
        <MsgType>RESP</MsgType>
        <ReturnCode>1016</ReturnCode>
        <ErrorMessage>uif return error message!</ErrorMessage>
    </header>
</message> 
```

我需要在扩展类中将 RetuenCode“1016”转换为“0”。如何在调解中获得 OMElement“ReturnCode”？我的代码失败了。

```
SOAPEnvelope envelope = context.getEnvelope();
SOAPBody soapBody = envelope.getBody();
QName ReturnCode = new QName(null, "ReturnCode");       
OMElement response = soapBody.getFirstChildWithName(ReturnCode); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:45:40.793

这部分

```
<header> 
```

它在 SOAP 体内吗？如果是这种情况，首先您需要从 SOAP 正文中获取 Header 元素，然后从该元素中获取名称为 ReturnCode 的第一个子元素。

干杯，慈善机构

# javascript - 在回调函数中导出变量 || 重新编辑

> ID：10695432
> 
> 赞同：1
> 
> 时间：2012-05-22T03:40:12.957
> 
> 标签：javascript

真相...我对这个问题有点立场

```
foo(function(err, a){
    foo.buu(function(err, b){
    d = x(b);
    });
}); 
```

考虑到结构不能修改。如何访问变量`d`？

考虑到......问题真的不知道我的问题是这个。

```
var db = new Db(database, server);
db.open(function(err, db){
    list = new Array();
    db.collectionNames(function(err, collections){
        collections.map(function (coll){
            list.push( coll.name ) );
    });
}); 
```

但是`console.log(list);`只做退货的时候`[]`。我不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:47:08.507

您在代码中拥有的变量`d`（假设它是整个代码）将附加到`window`.

所以访问它只需`d`.

# android - 错误请求：将字符串从 Android 客户端发送到 .NET REST 服务

> ID：10695433
> 
> 赞同：0
> 
> 时间：2012-05-22T03:40:17.327
> 
> 标签：android, .net, rest

我正在尝试将 json 字符串从我的 android 客户端（Android 4.03）发送到我的 .net Rest 服务（WCF）。我得到了“错误请求”作为回应。我有这个服务的 .NET 测试器，它工作正常。

服务器端代码：

```
[WebInvoke(UriTemplate = "submit", Method = "POST", RequestFormat = WebMessageFormat.Json)]
public bool SubmitPackage(string instance)
{      

 log.WriteWarning("Submit");
 return true;
} 
```

我的 WCF 配置

```
<standardEndpoints>
    <webHttpEndpoint>
      <standardEndpoint name="" maxReceivedMessageSize="327680" helpEnabled="true" automaticFormatSelectionEnabled="false" defaultOutgoingResponseFormat="Json" transferMode="Buffered" />
    </webHttpEndpoint>
</standardEndpoints> 
```

我在 Android 客户端上的代码

```
HttpPost request2 = new HttpPost(URL_Submit);
request2.setHeader("content-type", "application/json");

JSONStringer json1 = new JSONStringer().object().key("instance")
                .value("hello world").endObject();

StringEntity entity1 = new StringEntity(json1.toString());
entity1.setContentType("application/json;charset=UTF-8");
entity1.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                "application/json;charset=UTF-8"));

request2.setEntity(entity1);
// Send request to WCF service
DefaultHttpClient httpClient = new DefaultHttpClient();
String response1 = httpClient.execute(request2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:04:36.577

您的 WCF 服务是否托管在 IIS 中？打开失败的请求日志并查看结果。

还可以使用 fiddler 查看正在发送的流量。您可以将 fiddler 配置为在服务器上运行。它通常在客户端上运行，但不能在 Android 上运行。

要配置 fiddler 在服务器上运行，

[http://www.fiddler2.com/fiddler/help/reverseproxy.asp](http://www.fiddler2.com/fiddler/help/reverseproxy.asp)

我也经常把它放在我的 web.config 中，

```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
        <listeners>
          <add name="traceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\logs\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

记录与请求相关的错误。这可以打开并剖析请求。

# cordova - PhoneGap 开发语言

> ID：10695438
> 
> 赞同：0
> 
> 时间：2012-05-22T03:41:54.063
> 
> 标签：cordova

对不起，虽然我在phoneGap上看了官方文档，但我仍然对此感到困惑：

**问题：**

如果它声称我们不需要使用不同的语言来开发各种平台的应用程序，那么我为什么从网站上阅读这一段：

[移动 Tutsplus](http://mobile.tutsplus.com/tutorials/phonegap/phonegap-development/)

该`PhoneGap Android`文档提供了完整的要求列表以及每个要求的安装说明。

如果您正在为 iPhone 开发，您将需要：

**基于英特尔的 Apple 电脑** 、iPhone SDK、Xcode、Mac OS X Snow Leopard

这意味着我仍然需要购买 Mac 产品来开发应用程序。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:47:18.507

您需要 Apple 计算机来编译 PhoneGap 包装器（可能使用 iPhone SDK 编写）。

PhoneGap 中的代码是用 HTML 5 / JavaScript 编写的，并且是跨平台的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T11:12:44.157

PhoneGap 是一个跨平台移动应用程序开发框架。您无需为不同的平台编写不同的代码库。相同的代码库用于为不同平台构建应用程序。但是每个平台的构建环境是不同的。你需要一本 MAC 书来为 iPhone 构建应用程序。否则，您可以使用 phoneGap 构建服务。只需将您的代码库上传到 PhoneGap 构建云服务。构建服务将为每个平台生成构建。生成的构建可以从云服务下载。欲了解更多信息，请访问[https://build.phonegap.com](https://build.phonegap.com)。

# ruby-on-rails - 处理黄瓜暧昧步骤

> ID：10695440
> 
> 赞同：1
> 
> 时间：2012-05-22T03:42:26.153
> 
> 标签：ruby-on-rails, cucumber

我是黄瓜的新手，我想就如何组织以下步骤定义寻求建议，

```
Feature: Manage events
  In order to Manage events
  Organizer
  wants to create new events

  Background:
    Given I am logged in as organizer

  Scenario: Publish new event
    Given I am on the new event page
    When I fill in "Title" with "Rails event"
    And I fill in "Start at" with "2012-5-4"
    And I fill in "End at" with "2012-5-5"
    And I fill in "Description" with "Bla bla"
    And I check "Published"
    And I press "Create Event"
    Then I should see "Rails event" 
```

以下是造成歧义的步骤定义，

```
 When /^I fill in "Start at" with "(.*?)-(.*?)-(.*?)"$/ do |year, month, day|
      enter_date(:event_start_at, year, month, day)
    end

    When /^I fill in "End at" with "(.*?)-(.*?)-(.*?)"$/ do |year, month, day|
      enter_date(:event_end_at, year, month, day)
    end

    When /^I fill in "(.*?)" with "(.*?)"$/ do |name, value|
      fill_in name, :with => value
    end

    private
    def enter_date(id, year, month, day)
        select year, :with => "#{id}_1i"
        select month, :with => "#{id}_2i"
        select day, :with => "#{id}_3i"
    end 
```

发生的情况是前 2 个定义与最后一个定义不明确。但是对于开始和结束日期，我必须以不同的方式处理它们。我所知道的是 cucumber 具有解决该问题的 --guess 选项。但这是最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:32:34.697

为什么不这样做：

```
When /^I fill in "([^"]*)" with "([^"]*)"$/ do |name, value|
  case(name)
  when "Start at" then
    parts = value.split(/-/)
    enter_date(:event_start_at, parts[0], parts[1], parts[2])
  when "End at" then
    parts = value.split(/-/)
    enter_date(:event_end_at, parts[0], parts[1], parts[2])
  else
    file_in name, :with => value
  end
end 
```

（或者，在文本框中输入了类似的内容，因此不确定它是否会按原样正确运行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:16:11.843

去掉围绕“开始于”和“结束于”的引号。它们将不再符合您的最后一步。我发现引号会引起很多歧义，因此我通常只将它们用于文件名或其中包含空格的路径之类的东西。如有疑问，我发现删除引号是最佳做法，因为它消除了 Cucumber 的大量猜测。

# eclipse - 如何使用 Pyramid Framework 使用 Aptana/Eclipse 调试和设置断点？

> ID：10695442
> 
> 赞同：1
> 
> 时间：2012-05-22T03:42:29.227
> 
> 标签：eclipse, python-3.x, aptana, pydev, pyramid

我无法使用 Pyramid 框架在 Aptana 中启动调试模式。

我使用的平台是 Debian/Linux，运行 Python 3。

这些是我用来创建和运行 Pyramid 项目的命令。（[来源](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/project.html)）

```
1\. pcreate -s starter MyProject      //create project
2\. python3.2 setup.py develop        //setup develop mode
3\. pserve development.ini            //run application 
```

当我运行第三步时，终端会显示这一点，我可以打开浏览器并查看该站点。

```
Starting server in PID 15507.
serving on "http://0.0.0.0:6543" 
```

如何运行调试器并设置断点，以便逐步执行代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:47:17.460

我建议您查看[python 调试器](http://docs.python.org/library/pdb.html)。还有[一个调试 Pyramid 应用程序的示例](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/debugging.html)。这也可能有帮助：[通过 Eclipse 调试 Pylons 应用程序](https://stackoverflow.com/questions/147650/debug-pylons-application-through-eclipse)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:06:35.557

这是（或至少是）Waitress（运行您的 web 应用程序的本地服务器）与 Aptana/pydev/Eclipse 交互的问题。

对于 Python 2.7，简单的答案是使用 paster 作为本地服务器，这就是我成功的做法。不幸的是，Paster 还没有被移植到 Python 3，所以如果 Python 3 是必需的，那就不走运了。

不过，这现在可能已经修复，详见[此处](https://stackoverflow.com/questions/11073858/cant-debug-a-pyramid-project-in-eclipse-pydev-with-waitress)。还有一些更详细的关于如何让贴纸工作的说明，尽管对于 3.x 这对你没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T12:42:13.660

我使用 Xubuntu/linux - python3 我正在使用 eclipse-pydev。，这就是我通过 eclipse 调试的方式，我使用 app.py，在项目文件夹中（*MyProject）

*应用程序.py*

```
from MyProject import main

if __name__ == '__main__':
    settings = {
    'pyramid.reload_templates': 'true',
    'pyramid.debug_authorization': 'false',
    'pyramid.debug_notfound': 'false',
    'pyramid.debug_routematch': 'false',
    'pyramid.default_locale_name': 'en'
    }
    ip="127.0.0.1"
    port="6543"
    app = main(None,settings)

#For waitress
    from waitress import serve
    print("Starting Server on http://{0}:{1}".format(ip,port))    
    serve(app,host=ip,port=port,threads=50) 
```

放置断点（例如将其放置在 app.py 中并查看代码运行，将其放置在 views.py-return 语句中并查看它被触发，当您移动到不同的路线时）并单击 eclipse-debug python app 中的 DEBUG 图标.py.，eclipse 要求打开调试透视窗口并且 eclipse-console 显示，

```
pydev debugger: starting (pid: 9380) 
```

eclipse 打开调试透视窗口，触发的断点显示在调试窗口中。

我正在使用，

```
 pserve development.ini 
```

但我觉得使用上面的脚本很容易从 eclipse 启动 web 应用程序，我可以使用控制台（eclipse）轻松停止运行 server-localhost。

# jquery - ajax 和 json 错误找不到对象 elment/id

> ID：10695445
> 
> 赞同：1
> 
> 时间：2012-05-22T03:42:45.733
> 
> 标签：jquery, ajax, json, object

所以我创造了这种倒计时发生的情况，当它倒计时到零时，一个 ajax 帖子被触发，`php` 然后返回一个`json_encoded array`我想循环抛出这个数组和`.remove`需要删除的`.appendTo`东西以及需要删除的东西添加。但是，我似乎很难从服务器返回的内容中访问`element`...。`json object`我进入`undefined`了`console log`

jQuery：

```
 $.ajax({
            url: "morphelo/splash.php",
                type: "POST",
                data: "x=<?=md5('countdown')?>&CountdownType="+type+"&id="+ID+"&what=<?md5('drop')?>",
                datatype: "html",
                success: function(data){ 
data = // {"19e0fa430b5a0437b87cf5bf7a365011":{"clutch-1337653726-445648193-0a6e039a028dd9a64239473ff08c82c6":"sub-clu-li**clutch-1337653726-445648193-0a6e039a028dd9a64239473ff08c82c6"}}

    var x = type.split('/');// 19e0fa430b5a0437b87cf5bf7a365011/unclock
        var m = x[0]; // 19e0fa430b5a0437b87cf5bf7a365011
    var y = $.parseJSON(data);
    console.log(y);
    console.log(m);
    console.log(data.m) // but it says undefinded.....          
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:44:51.503

你应该`data[m]`改用。

`data.m`表示您的对象中有一个属性名称`m`，而不是`m`.

```
var obj = {a:1,b:2};
var m = 'a';
console.log(obj.m); // undefined
console.log(obj[m]); // 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:52:12.577

你的`data.m`不起作用，因为`data`是一个字符串。

您可能打算访问您称之为`m`的解码版本：`data``y`

```
console.log(y[m]); 
```

我使用`[m]`而不是`.m`因为`m`以数字开头。

**顺便提一句**

如果您总是要将 HTML 解码为 JSON，您还可以`datatype`将`$.ajax`选项设置为`'json'`.

# java - Java - JFrame 根本不显示其内容

> ID：10695446
> 
> 赞同：0
> 
> 时间：2012-05-22T03:43:14.797
> 
> 标签：java, swing, jframe

给我的第一篇文章。我是计算机科学学位第一年的学生。

我只是为分配构建一个基本的 GUI，由于某种原因，我一生都看不到，这是我创建的 JFrame 之一，当从注册按钮调用注册类的实例时，它显示完全空白登录类中的动作侦听器...

我还有一个单独的主类，其中包含 Main 方法并调用 Login 类。登录类 JFrame 工作正常，如前所述，只有在登录类的注册按钮操作侦听器中调用注册类时，才会出现问题。程序中的所有其他 JFrame 也可以正常工作。

我试图直接从 main 调用 Register 类，它也有同样的问题，尽管我试图将其简化为最基本的形式，但除了空白的无色 JFrame 之外，它仍然不显示任何内容。

这是代码（未完成但按原样工作）。我为我的草率道歉，但我是一个完整的初学者。

谁能看到它有什么问题？

提前致谢！

```
 package guitest;

    import java.awt.Color;
    import java.awt.Component;
    import java.awt.FlowLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.io.BufferedWriter;
    import java.io.FileWriter;
    import java.awt.event.*;
    import java.io.*;
    import javax.swing.*;

    public class Register extends JFrame{

        JButton regSubmit = new JButton("Submit");

        JTextField email = new JTextField();
        JTextField name = new JTextField();
        JTextField Address1 = new JTextField();
        JTextField Address2 = new JTextField();

        JPasswordField password1 = new JPasswordField();
        JPasswordField password2 = new JPasswordField();

        String nameTxt = email.getText();
        String passTxt = password1.getText();
        String info = "";

        FlowLayout layout1 = new FlowLayout();    

        public void Reg(){
            this.setTitle("La Volpe Registration");
            this.setLayout(layout1);    
            this.add(Address1);
            this.add(Address2);
            this.add(email);
            this.add(password1);
            this.add(password2);
            this.add(name);
            this.add(regSubmit);
            this.getContentPane().setBackground(Color.green);
            this.setSize(370, 160);

            regSubmit.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    regSubmitActionPerformed(evt);
                }

                private void regSubmitActionPerformed(java.awt.event.ActionEvent evt) { 

                String name = email.getText();
                String pass = password1.getText();
                String info = "";

                System.out.println("registering...");

                boolean eof;

                try{
                    // Create file
                    FileWriter file = new FileWriter("\\regdata.txt");
                    BufferedWriter out = new BufferedWriter(file);
                    out.write("\n"+nameTxt+", "+passTxt);
                }

                catch (Exception e){
                }   
            }   
        });
        this.setVisible(true);
    }    
} 
```

* * *

以及链接到它的类...

* * *

```
package guitest;

    import java.awt.Color;
    import java.awt.Component;
    import java.awt.FlowLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.io.BufferedWriter;
    import java.io.FileWriter;
    import java.awt.event.*;
    import java.io.*;
    import javax.swing.*;

    /**
    * @author david
    */

    public class Login {

    JFrame loginFrame = new JFrame();
    Register reg3 = new Register();

    JButton submit = new JButton("Submit");
    JButton clear = new JButton("Clear");
    JButton register = new JButton ("Register with Us");

    JPasswordField pass = new JPasswordField(20);
    JTextField email = new JTextField(20);
    JLabel em = new JLabel("Email Address: ");
    JLabel pw = new JLabel("Password: ");

    String pathname;
    String line;
    String [] records = new String [1000];
    int count = 0;

    FlowLayout layout1 = new FlowLayout();

        public Login(){

            //Adds Email label and text field
            loginFrame.add(em);
            loginFrame.add(email);

            //Adds password label and field
            loginFrame.add(pw);
            loginFrame.add(pass);

            //Adds buttons
            loginFrame.add(submit);
            loginFrame.add(clear);
            loginFrame.add(register);

            loginFrame.getContentPane().setBackground(Color.green);

            loginFrame.setLayout(layout1);

            loginFrame.setSize(370, 160);

            loginFrame.setTitle("La Volpe - Login");

            submit.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    submitActionPerformed(evt);    
                }            

                private void submitActionPerformed(java.awt.event.ActionEvent evt){                                         
                String emailadd = email.getText();
                String password = pass.getText();
                pathname = "\\regdata.txt";

                boolean eof;

                try{
                    FileReader file = new FileReader(pathname);
                    BufferedReader buff = new BufferedReader(file);

                    eof = false; // set the eof boolean to false

                        while (!eof){
                        line = buff.readLine();
                        if (line == null){ // test to see if the end of file has been reached
                        eof = true;  // if the end of file has been found set the eof Boolean to true
                        }
                        else{ 
                        // end of file not reached so move the contents of the line to the records
                        //array
                        records[count] = line;
                        count ++;
                        System.out.println(line);  // print out the new line input for error checking
                        }
                    }    
                    buff.close();
                }
                catch (IOException e){
                    System.out.println("Error --  "+ e.toString());
                }

                boolean notTrue = false;

                for (int i = 0; i < count; i++) {       
                    if ((!notTrue)&&((emailadd + "," + password).equals(records[i]))) {
                        FoodSelectionMain loggedIn = new FoodSelectionMain();
                        loggedIn.setVisible(true);
                    } 
                }
                if (!notTrue){
                    JOptionPane.showInputDialog("Please check your login "
                    + "and try again. If you are a new user, please "
                    + "register by pressing the 'REGISTER' button");
                }
            }   

        }); 

        // TODO add your handling code here:

        clear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                clearActionPerformed(evt);
            }

            public void clearActionPerformed(java.awt.event.ActionEvent evt){
                email.setText(null);
                pass.setText(null);
            }

        }); 
        register.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                registerActionPerformed(evt);
            }

            public void registerActionPerformed(java.awt.event.ActionEvent evt){
                reg3.setVisible(true);
                    System.out.println("Register pressed");
            }
        });
        loginFrame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:22:35.887

试试这个，在 Register 类中，将构造函数名称从 Reg() 更正为 Register()。

在构建 gui 应用程序之前，请牢记这些准则

1.  创建容器子类的对象。

2.  将容器中的所有组件视为实例变量。

3.  在方法的构造函数之外设置这些实例变量和事件处理（即 setComponent()、setHandler().etc），但从构造函数执行这些方法调用。

4.  现在主要使用这个...

.

```
EventQueue.invokeLater(new Runnable() {

    public void run() {
        Myframe f = new Myframe();
        f.setVisible(true);
    }
} 
```

# android - 当在列表行中填充微调器时，android onListItemClick 不起作用

> ID：10695451
> 
> 赞同：6
> 
> 时间：2012-05-22T03:44:00.300
> 
> 标签：android, spinner

我正在尝试填充一个列表视图，其中行包含一个复选框、四个文本视图和两个微调器。每行的微调器中的值需要不同，因为它们与该行上的实际项目直接相关。只是为了让它更复杂一点，除非选中复选框，否则微调器和它们旁边的两个文本字段是不可见的（setVisibility(View.GONE)）。我只希望列表项可单击（而不是复选框），并且微调器在显示后需要可单击。

我的所有代码都正常工作，除了当填充微调器时，我无法单击该行上的列表项。我仍然可以从该行的微调器中选择值，但触摸该行的其他任何地方根本没有任何作用。有些行不会将数据返回到微调器，它们会继续正常运行，所以我相信这与连接到微调器的适配器有关。

另外我知道我将不得不考虑列表视图回收，但我还没有做到这一点。

我希望有人能在我完全发疯之前指出这里出了什么问题。

这是列表视图 xml

```
 <ListView android:id="@+id/android:list"
      android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

<TextView android:id="@+id/android:empty"
          android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty"/>
</LinearLayout> 
```

这是行xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <CheckBox android:id="@+id/pl_selected"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:layout_weight="1"/>

        <TextView android:id="@+id/name"
                android:layout_width="fill_parent"
            android:layout_height="wrap_content"
        android:layout_weight="1"
        android:focusableInTouchMode="false"
        android:clickable="false"
        android:focusable="false"/>

    <TextView android:id="@+id/name2" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:focusableInTouchMode="false"
        android:clickable="false"
        android:focusable="false"/>

</LinearLayout>

<LinearLayout android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView android:id="@+id/pl_tv1" 
            android:text="@string/pl_tv1" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:visibility="gone"/>

    <Spinner android:id="@+id/pl_spin1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_weight="1"
            android:visibility="gone"
            android:focusableInTouchMode="false"
            android:focusable="false"/>
</LinearLayout>
<LinearLayout android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView android:id="@+id/pl_tv2"
            android:text="@string/pl_tv2" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:visibility="gone"/>

    <Spinner android:id="@+id/pl_spin2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_weight="1"
            android:visibility="gone"
            android:focusableInTouchMode="false"
            android:focusable="false"/>
</LinearLayout>
</LinearLayout> 
```

这是删除了大部分不相关内容的活动：

```
import android.widget.SimpleCursorAdapter;
import mdhsoft.band.Tab.DbAdapter;
import mdhsoft.band.Tab.R;
import android.os.Bundle;
import android.app.ListActivity;
import android.database.Cursor;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.TextView;

public class PLActivity extends ListActivity {
    private static final int DONE_ID = Menu.FIRST;
    private DbAdapter mDbHelper;
private int mPlId;
private CheckBox mCheckBox;
private Spinner mSpin1;
private Spinner mSpin2;
private TextView mtv1;
private TextView mtv2;
private int mItemId; 
private SimpleCursorAdapter mAllItems;
private Cursor mSCursor;
private Cursor mcurSpin1;
private Cursor mcurSpin2;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pl_list);

        Bundle extras = getIntent().getExtras();
        mPlId = extras.getInt(DbAdapter.KEY_PLID);
        mDbHelper = new DbAdapter(this);
        mDbHelper.open();

        fillData();
        registerForContextMenu(getListView());
    }

private void fillData() {
    mSCursor = mDbHelper.fetchAllPl(mPlId);
    startManagingCursor(mSCursor);
    String[] from = new String[]
        {"pl_selected", DbAdapter.KEY_SNAME, DbAdapter.KEY_SNAME2};
    int[] to = new int[]{R.id.pl_selected, R.id.name, R.id.name2};
    mAllItems = new SimpleCursorAdapter(this, R.layout.pl_row, mSCursor, from, to);
    mAllItems.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            if(columnIndex == 3) {
                    CheckBox cb = (CheckBox) view; 
                    cb.setChecked(cursor.getInt(3) > 0);
                    ViewGroup row = (ViewGroup)view.getParent();
                    if (cursor.getInt(3) > 0) {
                        mcurSpin1 = (Spinner) row.findViewById(R.id.pl_spin1);
                        mcurSpin2 = (Spinner) row.findViewById(R.id.pl_spin2);
                        mtv1 = (TextView) row.findViewById(R.id.pl_tv1);
                        mtv2 = (TextView) row.findViewById(R.id.pl_tv2);
                        mcurSpin1.setVisibility(View.VISIBLE);
                        mtv1.setVisibility(View.VISIBLE);
                        mcurSpin2.setVisibility(View.VISIBLE);
                        mtv2.setVisibility(View.VISIBLE);
                        PopulateSpinner1();
                        PopulateSpinner2(); 
                    }
                    return true;
            }
            return false;
        }
    });
    setListAdapter(mAllItems);
}

private void PopulateSpinner1(){
    mcurSpin1 = mDbHelper.fetchSByItemId(mItemId);
    startManagingCursor(mcurSpin1);
    String[] from = new String[]{DbAdapter.KEY_SNAME};
    int[] to = new int[]{android.R.id.text1};
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,                  
           android.R.layout.simple_spinner_item, mcurSpin1, from, to );
    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item);
    mSpin1.setAdapter(adapter);

}

private void PopulateSpinner2(){
    mcurSpin2 = mDbHelper.fetchMByItemId(mItemId);
    startManagingCursor(mcurSpin2);
    String[] from = new String[]{DbAdapter.KEY_MNAME};
    int[] to = new int[]{android.R.id.text1};
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
          android.R.layout.simple_spinner_item, mcurSpin2, from, to );
    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item);
    mSpin2.setAdapter(adapter);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    ViewGroup row = (ViewGroup)v;
    mSCursor.moveToPosition(position);
    mItemId = mSCursor.getInt(mSCursor.getColumnIndex(DbAdapter.KEY_SID));
    mCheckBox = (CheckBox) row.findViewById(R.id.pl_selected);
    mcurSpin1 = (Spinner) row.findViewById(R.id.pl_spin1);
mcurSpin2 = (Spinner) row.findViewById(R.id.pl_spin1);
mtv1 = (TextView) row.findViewById(R.id.pl_tv1);
mtv2 = (TextView) row.findViewById(R.id.pl_tv2);
    if (mCheckBox.isChecked()) {
        mCheckBox.setChecked(false);
        mcurSpin1.setVisibility(View.GONE);
        mtv1.setVisibility(View.GONE);
        mcurSpin2.setVisibility(View.GONE);
        mtv2.setVisibility(View.GONE);
}
    else {
        mCheckBox.setChecked(true);
        mcurSpin1.setVisibility(View.VISIBLE);
        mtv1.setVisibility(View.VISIBLE);
        mcurSpin2.setVisibility(View.VISIBLE);
        PopulateSpinner1();
        PopulateSpinner2(); 

    }
  }

} 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T04:22:12.030

您可以尝试添加`android:descendantFocussability=blocksDescendants`到最顶部的线性布局。这可能会有所帮助。

# jquery-ui - 在元素上删除和重新应用小部件

> ID：10695454
> 
> 赞同：9
> 
> 时间：2012-05-22T03:44:39.563
> 
> 标签：jquery-ui, jquery-widgets

我有一个问题。我在元素上应用小 `select`部件。当我重新加载相同的`select`元素值时，我将删除元素上的小`select`部件并重新应用。但是，当在同一个元素上重新应用小部件时，这些变化并没有反映出来。

下面是 HTML 选择语句：

```
<select id="countries" class="multiselect" multiple="multiple" name="countries">
        <option value="USA">United States</option>
        ...
</select> 
```

要将小部件应用于同一元素：

```
function applyWidget(){ 
    $(".multiselect").multiselect();
} 
```

一旦应用了小部件，它就会创建一个`div`with `class=".ui-multiselect"`。

要删除小部件类：

```
function removeWidget(){
    $(".ui-multiselect").remove();
} 
```

第一次调用该`applyWidget()`方法工作正常。第二次打电话是不行的。如何在元素上重新加载小部件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T16:13:07.613

首先，您的小部件需要有一个`destroy`可用的方法，而如何做到这一点取决于您使用的是 jQueryUI 1.8 及更低版本还是 jQueryUI 1.9 及更高版本。

对于这些示例，我假设您`div`使用以下代码引用多选：

```
_create: function () {
    this.multiselect = $("<div>").addClass("ui-multiselect")...
} 
```

如果您使用的是 jQuery 1.8，您的小部件应定义`destroy`：

```
destroy: function()
{
    this.multiselect.remove();
    $.Widget.prototype.destroy.call(this);
} 
```

否则，在 jQuery 1.9+ 下，您需要定义`_destroy`：

```
_destroy: function () 
{
    this.multiselect.remove();
} 
```

*请注意，您只包含上述两种方法之一，具体取决于您的 jQueryUI 版本，并且 1.9 版本之前带有下划线`_`。在 jQueryUI 1.9 下，不要在没有下划线的情况下定义 destroy，因为小部件工厂定义了该方法，您将覆盖（并破坏）该方法。*

完成后，您需要更改代码，以便在重新创建之前“销毁”小部件。

```
function removeWidget(){
    $(".multiselect").multiselect("destroy");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T20:46:52.310

您必须销毁小部件，否则它不会重新绑定。

```
function removeWidget() { 
    $(".ui-multiselect").multiselect("destroy");
    $(".ui-multiselect").multiselect(); 
} 
```

# asp.net - LINQ2SQL 堆栈溢出

> ID：10695455
> 
> 赞同：0
> 
> 时间：2012-05-22T03:44:49.677
> 
> 标签：asp.net, asp.net-mvc-3, linq-to-sql

我收到以下代码的堆栈溢出。我知道问题是什么，它执行了所有“GetAllPages”

```
 Children = new LazyList<Page>(from p in GetAllPages(language)
                                         where p.ParentPage == s.Id
                                         select p) 
```

在它添加 p.ParentPage == s.Id 之前

```
private IQueryable<Page> GetAllPages(string language)
{
    return from s in context.Pages
           where (from c in GetAllContent()
                  where c.PageId == s.Id &&
                        c.Language.ToLower() == language.ToLower()
                  select c).Any()

           let contents = (from c in GetAllContent()
                           where c.PageId == s.Id
                           select c)
           select new Page()
           {
               Id = s.Id,
               SiteId = s.SiteId,
               Type = s.Type,
               Template = s.Template,
               ParentPage = s.ParentPage,
               Visible = s.Visible,
               Order = s.Order,

               Contents = contents.ToList(),
               Children = new LazyList<Page>(from p in GetAllPages(language)
                                             where p.ParentPage == s.Id
                                             select p)
           };
} 
```

我该如何正确地做到这一点？

更新：代码背后的原因是，我有一个树形结构的菜单，其中一个菜单项可以有 0 到多个子项。可以跳过语言部分，但我的网站支持多种语言，并且使用语言参数我只希望菜单项具有给定语言的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:10:23.503

从您调用 this 的那一刻起，`GetAllPages(language)`然后再次调用它而不进行更改，`language`您将获得 100% 的堆栈溢出。

你需要得到不同的东西，不一样的！你唯一的参数是`language`，这不会改变。

```
private IQueryable<Page> GetAllPages(string language)
{
 ....
   Children = new LazyList<Page>(from p in GetAllPages(language) // <-- here you 
          // call him self again with the same parametre.
          // Your function is going to call him self asking the same think
          //  This is bring the stack overflow
          //  When you make call to the same function you need some how
          //   to get different results with some different parameter. 
```

# python - Python中的yield表达式的结果是什么？

> ID：10695456
> 
> 赞同：63
> 
> 时间：2012-05-22T03:44:50.847
> 
> 标签：python, generator, yield

我知道yield把一个函数变成了一个生成器，但是yield表达式本身的返回值是多少呢？例如：

```
def whizbang(): 
    for i in range(10): 
        x = yield i 
```

`x`这个函数执行时变量的值是多少？

我已经阅读了 Python 文档：[http](http://docs.python.org/reference/simple_stmts.html#grammar-token-yield_stmt) ://docs.python.org/reference/simple_stmts.html#grammar-token-yield_stmt似乎没有提到 yield 表达式本身的值。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-22T03:49:42.220

您还可以`send`对生成器进行赋值。如果没有发送值，则`x`is `None`，否则`x`采用发送的值。这是一些信息：[http ://docs.python.org/whatsnew/2.5.html#pep-342-new-generator-features](http://docs.python.org/whatsnew/2.5.html#pep-342-new-generator-features)

```
>>> def whizbang():
        for i in range(10):
            x = yield i
            print 'got sent:', x

>>> i = whizbang()
>>> next(i)
0
>>> next(i)
got sent: None
1
>>> i.send("hi")
got sent: hi
2 
```

# android - Android：我想在安装 apk 时在 sdcard 中创建一个新文件

> ID：10695458
> 
> 赞同：0
> 
> 时间：2012-05-22T03:44:58.647
> 
> 标签：android

我想在***安装 apk***时在 sdcard 中创建一个新文件......我应该如何或在哪里编码？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:18:00.130

你绝对不能那样做。这将引入各种安全问题。正如 Ken Y -N 在他的回答中所说，最好的办法是检测您的应用程序第一次打开的时间，并在那里做一些事情。

这是一个执行此操作的活动类：

```
public class StartupChoiceActivity extends Activity {
    private static final String TAG = StartupChoiceActivity.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SharedPreferences mPrefs = getSharedPreferences("prefs", Context.MODE_PRIVATE);

        if(!mPrefs.getBoolean("has_started_before", false)) {
            // Do what ever you want to do the first time the app is run

        } else {
            //Remember our choice for next time
            mPrefs.edit().putBoolean("has_started_before", true).commit();
            Log.i(TAG, "We've already started the app at least once");
        }

        //Do what ever we want to do on a normal startup. This is pretty much always mean starting a new activity
        startActivity(new Intent(this, MyNormalFirstActivity.class);
        finish();
    }
} 
```

您唯一需要做的另一件事是确保在 AndroidManifest.xml 中将此活动设置为您的“启动”活动。您可以通过将此代码放入您的应用程序标签中来做到这一点：

```
<activity android:name=".StartupChoiceActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:54:50.077

你不能这样做; 例如，这样的功能将是让木马传播的好方法。

只需检查程序的第一次运行并在那里进行初始化。

# java - JFrame & JDialog 链接

> ID：10695466
> 
> 赞同：1
> 
> 时间：2012-05-22T03:46:08.737
> 
> 标签：java, swing

我正在为 Eclipse 使用视觉摆动插件 - 这就是问题所在。在我单击按钮时，它应该显示对话框（或其他 jForm，但我读过应用程序只能使用一个 jfrom）并隐藏第一个没有问题的对话框。但是在第二个表单上，我需要同样的事情发生，当单击按钮时，我需要显示第一个表单并处理第二个表单。这是代码（它可能没有很好地排序，因为我无法绕过这个视觉摆动）

```
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.WindowConstants;

import org.dyno.visual.swing.layouts.Bilateral;
import org.dyno.visual.swing.layouts.Constraints;
import org.dyno.visual.swing.layouts.GroupLayout;
import org.dyno.visual.swing.layouts.Leading;
import org.dyno.visual.swing.layouts.Trailing;

//VS4E -- DO NOT REMOVE THIS LINE!
public class Intervencije extends JFrame {

    private static final long serialVersionUID = 1L;
    private JPanel jPanel1;
    private JButton btnObjekat;
    private JButton btnEkipa;
    private JButton btnIzlaz;
    private JLabel jLabel0;
    private JPanel jPanel0;
    private JTextField txtBrojIntervencije;
    private JButton btnUcitaj;
    private JLabel jLabel3;
    private JPanel jPanel2;
    private JLabel jLabel1;
    private JLabel jLabel2;
    private JTextField txtDatum;
    private JTextField txtBroj;
    private JTextArea txtOpisi;
    private JScrollPane jScrollPane0;
    private static final String PREFERRED_LOOK_AND_FEEL = "javax.swing.plaf.metal.MetalLookAndFeel";
    public Intervencije() {

        this.pack();
        this.setDefaultCloseOperation(Intervencije.EXIT_ON_CLOSE);
        this.setVisible(true);
        //this.setLocationRelativeTo(null);
        initComponents();
    }

    private void initComponents() {
        setTitle("Intervencije");
        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        setLayout(new GroupLayout());
        add(getJPanel2(), new Constraints(new Leading(17, 422, 10, 10), new Leading(226, 71, 10, 10)));
        add(getJPanel0(), new Constraints(new Leading(12, 189, 12, 12), new Leading(18, 100, 10, 10)));
        add(getJPanel1(), new Constraints(new Leading(205, 227, 12, 12), new Leading(15, 202, 10, 10)));
        setSize(454, 334);
    }

    private JTextArea getTxtOpisi() {
        if (txtOpisi == null) {
            txtOpisi = new JTextArea();
            txtOpisi.setEditable(false);
            txtOpisi.setText("txtOpisi");
            txtOpisi.setMinimumSize(new Dimension(80, 16));
            txtOpisi.setPreferredSize(new Dimension(80, 16));
        }
        return txtOpisi;
    }

    private JScrollPane getJScrollPane0() {
        if (jScrollPane0 == null) {
            jScrollPane0 = new JScrollPane();
            jScrollPane0.setViewportView(getJTextArea0());
        }
        return jScrollPane0;
    }

    private JTextArea getJTextArea0() {
        if (txtOpisi == null) {
            txtOpisi = new JTextArea();
        }
        return txtOpisi;
    }

    private JTextField getJTextField2() {
        if (txtBroj == null) {
            txtBroj = new JTextField();
        }
        return txtBroj;
    }

    private JTextField getJTextField1() {
        if (txtDatum == null) {
            txtDatum = new JTextField();
        }
        return txtDatum;
    }

    private JLabel getJLabel2() {
        if (jLabel2 == null) {
            jLabel2 = new JLabel();
            jLabel2.setText("Opis");
        }
        return jLabel2;
    }

    private JLabel getJLabel1() {
        if (jLabel1 == null) {
            jLabel1 = new JLabel();
            jLabel1.setText("Datum i vreme");
        }
        return jLabel1;
    }

    private JPanel getJPanel2() {
        if (jPanel2 == null) {
            jPanel2 = new JPanel();
            jPanel2.setLayout(new GroupLayout());
            jPanel2.add(getJButton0(), new Constraints(new Leading(278, 10, 10), new Leading(35, 10, 10)));
            jPanel2.add(getJButton1(), new Constraints(new Leading(151, 10, 10), new Leading(35, 12, 12)));
            jPanel2.add(getJButton2(), new Constraints(new Leading(23, 10, 10), new Leading(35, 12, 12)));
            jPanel2.add(getJLabel3(), new Constraints(new Leading(184, 173, 10, 10), new Leading(9, 10, 10)));
        }
        return jPanel2;
    }

    private JLabel getJLabel3() {
        if (jLabel3 == null) {
            jLabel3 = new JLabel();
            jLabel3.setText("Vise informacija o");
        }
        return jLabel3;
    }

    private JButton getJButton3() {
        if (btnUcitaj == null) {
            btnUcitaj = new JButton();
            btnUcitaj.setText("Ucitaj");
        }
        return btnUcitaj;
    }

    private JPanel getJPanel0() {
        if (jPanel0 == null) {
            jPanel0 = new JPanel();
            jPanel0.setLayout(new GroupLayout());
            jPanel0.add(getJLabel0(), new Constraints(new Trailing(12, 12, 12), new Leading(3, 19, 10, 10)));
            jPanel0.add(getJButton3(), new Constraints(new Leading(21, 10, 10), new Leading(66, 12, 12)));
            jPanel0.add(getJTextField2(), new Constraints(new Leading(15, 72, 12, 12), new Leading(28, 12, 12)));
        }
        return jPanel0;
    }

    private JLabel getJLabel0() {
        if (jLabel0 == null) {
            jLabel0 = new JLabel();
            jLabel0.setText("Unesite redni broj intervencije");
        }
        return jLabel0;
    }

    private JButton getJButton2() {
        if (btnIzlaz == null) {
            btnIzlaz = new JButton();
            btnIzlaz.setText("Izlaz");
            btnIzlaz.addMouseListener(new MouseAdapter() {

                public void mouseClicked(MouseEvent event) {
                    btnIzlazMouseMouseClicked(event);
                }
            });
        }
        return btnIzlaz;
    }

    private JButton getJButton1() {
        if (btnEkipa == null) {
            btnEkipa = new JButton();
            btnEkipa.setText("Ekipi");
            btnEkipa.addMouseListener(new MouseAdapter() {

                public void mouseClicked(MouseEvent event) {
                    btnEkipaMouseMouseClicked(event);
                }
            });
        }
        return btnEkipa;
    }

    private JButton getJButton0() {
        if (btnObjekat == null) {
            btnObjekat = new JButton();
            btnObjekat.setText("Objektu");
        }
        return btnObjekat;
    }

    private JPanel getJPanel1() {
        if (jPanel1 == null) {
            jPanel1 = new JPanel();
            jPanel1.setLayout(new GroupLayout());
            jPanel1.add(getJLabel1(), new Constraints(new Leading(4, 135, 10, 10), new Leading(2, 29, 10, 10)));
            jPanel1.add(getJLabel2(), new Constraints(new Leading(13, 12, 12), new Leading(69, 57, 115)));
            jPanel1.add(getJTextField1(), new Constraints(new Leading(8, 105, 12, 12), new Leading(31, 12, 12)));
            jPanel1.add(getJScrollPane0(), new Constraints(new Bilateral(12, 12, 22), new Bilateral(99, 12, 22)));
        }
        return jPanel1;
    }

    public static void installLnF() {
        try {
            String lnfClassname = PREFERRED_LOOK_AND_FEEL;
            if (lnfClassname == null)
                lnfClassname = UIManager.getCrossPlatformLookAndFeelClassName();
            UIManager.setLookAndFeel(lnfClassname);
        } catch (Exception e) {
            System.err.println("Cannot install " + PREFERRED_LOOK_AND_FEEL
                    + " on this platform:" + e.getMessage());
        }
    }

    /**
     * Main entry of the class.
     * Note: This class is only created so that you can easily preview the result at runtime.
     * It is not expected to be managed by the designer.
     * You can modify it as you like.
     */

    private void btnIzlazMouseMouseClicked(MouseEvent event) {
        this.dispose();
    }

    public void btnEkipaMouseMouseClicked(MouseEvent event) {
    this.setVisible(false);
    Objekat o = new Objekat();
    o.setVisible(true);

    }
} 
```

这里 objekat o 是扩展 JFrame 或 JDialog 的类

```
import java.awt.Color;
import java.awt.Dialog;
import java.awt.Font;
import java.awt.Frame;
import java.awt.GraphicsConfiguration;
import java.awt.Window;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

import org.dyno.visual.swing.layouts.Constraints;
import org.dyno.visual.swing.layouts.GroupLayout;
import org.dyno.visual.swing.layouts.Leading;

//VS4E -- DO NOT REMOVE THIS LINE!
public class Objekat extends JDialog {

    private static final long serialVersionUID = 1L;
    private JButton jButton0;
    private static final String PREFERRED_LOOK_AND_FEEL = "javax.swing.plaf.metal.MetalLookAndFeel";
    public Objekat(JFrame parent) {
        super(parent);
        initComponents();
    }

    public Objekat(Dialog parent, String title, boolean modal,
            GraphicsConfiguration arg) {
        super(parent, title, modal, arg);
        initComponents();
    }

    public Objekat(Dialog parent, String title, boolean modal) {
        super(parent, title, modal);
        initComponents();
    }

    public Objekat(Dialog parent, String title) {
        super(parent, title);
        initComponents();
    }

    public Objekat(Window parent, String title, ModalityType modalityType,
            GraphicsConfiguration arg) {
        super(parent, title, modalityType, arg);
        initComponents();
    }

    public Objekat(Window parent, String title, ModalityType modalityType) {
        super(parent, title, modalityType);
        initComponents();
    }

    public Objekat(Window parent, String title) {
        super(parent, title);
        initComponents();
    }

    public Objekat(Window parent, ModalityType modalityType) {
        super(parent, modalityType);
        initComponents();
    }

    public Objekat(Frame parent, String title) {
        super(parent, title);
        initComponents();
    }

    public Objekat(Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
    }

    public Objekat(Frame parent) {
        super(parent);
        initComponents();
    }

    public Objekat() {
        initComponents();
    }

    public Objekat(Dialog parent, boolean modal) {
        super(parent, modal);
        initComponents();
    }

    public Objekat(Dialog parent) {
        super(parent);
        initComponents();
    }

    public Objekat(Frame parent, String title, boolean modal,
            GraphicsConfiguration arg) {
        super(parent, title, modal, arg);
        initComponents();
    }

    public Objekat(Frame parent, String title, boolean modal) {
        super(parent, title, modal);
        initComponents();
    }

    private void initComponents() {
        setFont(new Font("Dialog", Font.PLAIN, 12));
        setBackground(Color.white);
        setForeground(Color.black);
        setLayout(new GroupLayout());
        add(getJButton0(), new Constraints(new Leading(237, 10, 10), new Leading(81, 10, 10)));
        addMouseListener(new MouseAdapter() {

            public void mouseClicked(MouseEvent event) {
                mouseMouseClicked(event);
            }
        });
        setSize(428, 240);
    }

    private JButton getJButton0() {
        if (jButton0 == null) {
            jButton0 = new JButton();
            jButton0.setText("jButton0");
        }
        return jButton0;
    }

    private static void installLnF() {
        try {
            String lnfClassname = PREFERRED_LOOK_AND_FEEL;
            if (lnfClassname == null)
                lnfClassname = UIManager.getCrossPlatformLookAndFeelClassName();
            UIManager.setLookAndFeel(lnfClassname);
        } catch (Exception e) {
            System.err.println("Cannot install " + PREFERRED_LOOK_AND_FEEL
                    + " on this platform:" + e.getMessage());
        }
    }

    /**
     * Main entry of the class.
     * Note: This class is only created so that you can easily preview the result at runtime.
     * It is not expected to be managed by the designer.
     * You can modify it as you like.
     */
//  public static void main(String[] args) {
//      installLnF();
//      SwingUtilities.invokeLater(new Runnable() {
//          public void run() {
//              Objekat dialog = new Objekat();
//              dialog.setDefaultCloseOperation(Objekat.DISPOSE_ON_CLOSE);
//              dialog.setTitle("Objekat");
//              dialog.setLocationRelativeTo(null);
//              dialog.getContentPane().setPreferredSize(dialog.getSize());
//              dialog.pack();
//              dialog.setVisible(true);
//          }
//      });

    private void mouseMouseClicked(MouseEvent event) {
        //this.getParent().setVisible(true);
        this.setVisible(false);
    }

} 
```

主要的

```
public class main {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Intervencije d = new Intervencije();
    d.setLocationRelativeTo(null);
    //d.setVisible(true);
    //d.installLnF(); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:59:30.053

我查看了您的代码，看看您在哪里创建了 JButtons 和所有内容，但我没有看到 ActionListeners 被添加到*任何东西*的任何地方。如果没有 AcionListeners，JButtons 将不会在按钮按下时调用行为。我认为您需要先解决此问题，并阅读 Oracle Java 教程网站上的基本 Swing 教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:43:17.623

当您想打开一个新的框架或对话框时，您必须使用 JButton 的 ActionListeners 事件来处理 JButton ActionListeners 事件，请参阅 ActionListener 上的[示例](http://tutorialdata.com/example/swing/JButtonActionExample.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T04:30:48.190

在您的类中为，例如`Objekat`创建一个实例变量，现在在您的构造函数中，您从调用类中获取一个对象，获取此引用，例如，现在将您的以下给定方法修改为这种形式：`JFrame``private JFrame frame;``JFrame``this.frame = frame;`

```
private void mouseMouseClicked(MouseEvent event) 
{
    frame.setVisible(true);
    this.dispose();
} 
```

并修改您的以下方法，如下所述：

```
public void btnEkipaMouseMouseClicked(MouseEvent event) 
{
    this.setVisible(false);
    Objekat o = new Objekat(this);
    o.setVisible(true);
} 
```

在我看来，这就是完成这项工作所需要的一切。由于在您的示例中，您在创建`Objekat`Class 的对象时没有传递任何内容，因此我认为没有为其分配父级，因此您`actionPerformed(...)`在该 Class 中的方法没有按预期工作，请尝试进行这些更改，希望它会起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T05:11:24.393

Excellent tutorial for swing [Here](http://www.javabeginner.com/java-swing/java-swing-tutorial)

for opening any frame or dialog box when u click a button you have to create an object of that class in the action performed method and set its visiblity to true; in swing by default the visiblity is false for the frame which we've created....

instead of writing this

```
 public void btnEkipaMouseMouseClicked(MouseEvent event) {
    this.setVisible(false);
    Objekat o = new Objekat();
    o.setVisible(true); 
```

code it'd be better to write actionlinstener like this

```
btn.addActionListener(new ActionListener(){
   public void actionPerformed(ActionEvent e){ Objekat o = new Objekat(this);}
}); 
```

the above code is just the same as your code but it uses the default event listener rather than creating a new one.....

this is because if there is a available actionlistener available in the standard library it won't be praiseworthy to create custom handlers for a simple button click event... if i am wrong please let me know...

if you want to dispose the second frame and show again the first frame then you can create reference of both frames in your class and assign the object to it while constructing the frame of the class that would five a dteady reference for both frames if you wanted to do any operations on any of them....

```
public class Intervencije extends JFrame {
Objekat prev, next;
} 
```

the constructor will be like this

```
public Objekat (Objekat prev) {
   //the next frame is obviously the onn in which u r working
next = this;
prev.setVisible(true);
next.setVisible(false);//you can do whatever you want with prev and next
} 
```

actionlistener will be like this

```
Objekat prev = this;
public void actionPerformed(Actionevent e){
    Objekat newFrame = new Objekat(prev)
} 
```

# ruby-on-rails-3 - 创建对象时出现 utf8 编码错误。更新时正常

> ID：10695470
> 
> 赞同：0
> 
> 时间：2012-05-22T03:46:28.630
> 
> 标签：ruby-on-rails-3, encoding, ckeditor

对不起，我的英语不好。我有一个非常奇怪的错误。 当我使用 utf8 内容创建*任务模型的实例时，数据库中存储的**内容*不是输入的内容。*内容*字段是使用 ckeditor 创建的。这里是：

*   什么用户输入：`Lưu`
*   参数：`{"task"=> {"name"=>"Store", "description"=>"Store", "price"=>"10000", "content"=>"<p>\r\n\tLưu</p>\r\n"}, "commit"=>"Create Task", "action"=>"create", "controller"=>"tasks"}`
*   内存中的实例：`#<Task id: nil, name: "Store", description: "Store", price: 10000, created_at: nil, updated_at: nil, content: "<p>\r\n\tLưu</p>\r\n">`
*   存储的内容：`#<Task id: 10, name: "Store", description: "Store", price: 10000, created_at: "2012-05-22 03:47:11", updated_at: "2012-05-22 03:47:11", content: "\\x3c703e0d0a094cc6b0753c2f703e0d0a">`

但是，最奇怪的是，当我编辑该模型并保存它时，内容会在输入时存储。

这是我对内容列的迁移：

```
class AddContentToTasks < ActiveRecord::Migration
  def change                   
    add_column :tasks, :content, :text
  end
end 
```

这是我的控制器：

```
 def update
    @task.update_attributes!(params[:task])
  end

  def create                   
    binding.pry                
    @task = Task.new(params[:task])   
    @task.user = current_user  
    @task.save                 
    redirect_to tasks_path
  end 
```

当我调试（使用 binding.pry）时，我看到 @task.content 是正确的。但是，在@task.save 之后，最后创建的Task 的内容（Task.last）不是。

更新 1：我的 database.yml

```
development:                   
  adapter: postgresql          
  encoding: utf8
  reconnect: false             
  database: crowd              
  pool: 5
  username: username          
  password: password           
  host: localhost

test: &test
  adapter: postgresql
  encoding: utf8
  reconnect: false
  database: crowd-test
  pool: 5
  username: username          
  password: password           
  host: localhost 
```

我的 schema.rb 内容。

```
# encoding: UTF-8

ActiveRecord::Schema.define(:version => 20120519133158) do

     create_table "tasks", :force => true do |t|
        t.string   "name"
        t.string   "description"
        t.integer  "price"
        t.datetime "created_at",   :null => false
        t.datetime "updated_at",   :null => false
        t.integer  "user_id"
        t.integer  "task_type_id"
        t.text     "content"
        t.date     "expired_at"
      end
end 
```

我来自 postgre 的架构信息

```
 List of databases
    Name    |   Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
------------+-----------+----------+-------------+-------------+-----------------------
 crowd      | username  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 crowd-test | username  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
```

更新 2：我没有使用`@task = Task.new(params[:task])`，而是自己设置了 @task 实例的所有属性。存储的内容也是正确的。

# javascript - 是否可以从浏览器创建到 redis 服务器的连接？

> ID：10695471
> 
> 赞同：3
> 
> 时间：2012-05-22T03:46:32.103
> 
> 标签：javascript, node.js, redis, browserify

是否可以从浏览器创建到 redis 服务器的连接？您可以使用`var client = net.connect(port, host);`. 我想知道是否有办法在浏览器中使用 Browserify 或本地方式连接到服务器？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:17:39.143

无法直接从浏览器执行此操作，但您可以使用浏览器插件建立 TCP 连接。

检查此网址以获取更多信息： http://news.ycombinator.com/item?id= [3972368](http://news.ycombinator.com/item?id=3972368)

# assembly - x86汇编 乘除涉及哪些寄存器

> ID：10695472
> 
> 赞同：-4
> 
> 时间：2012-05-22T03:46:52.843
> 
> 标签：assembly, x86, masm, masm32

这是我的代码：

```
.data
        ans1 db 0
        ans2 db 0
.data? 
        in1 db 100 dup(?) ; first input value
        in2 db 100 dup(?) ; second input value
.code
start:
        ; here I have code for input 
        ; I get 2 nums, and I want to multiply and divide them
        ; here is what I already have to mul/div them:
        lea eax, in1
        lea edx, in2
        imul eax ; multiply in1 and in2
        mov ans1, eax ; move result to ans1
        xor eax, eax ; clear register
        xor edx, edx ; " "
        lea eax, in1
        lea edx, in2
        idiv eax ; divide in1 by in2
        mov ans2, eax ; move result to ans2
        lea eax, ans1
        push eax
        call StdOut ; print ans1 (I have include instructions at the start)
        lea ebx, ans2
        push ebx  
        call StdOut ; print ans2 ("") 
```

我的问题： 1\. 我到底应该放哪个寄存器并将`in1`它们`in2`相乘？2.“”来划分它们？3\. 余数在除法中存储在哪里？

不要担心一般性的陈述，你能告诉我哪些寄存器肯定（尽可能接近）在乘法和除法中工作。

注意：有些人可能会说这篇文章是[x86 汇编的重复 - masm32：乘法和除法的绝对崩溃](https://stackoverflow.com/questions/10684736/x86-assembly-masm32-absolute-breakdown-of-multiplication-and-division)，但是（如果我错了，请纠正我）发新帖子而不是添加更尊重论坛社区对旧的评论并使其脱离主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:18:22.103

[如果您正在编写程序集，则永远不要离参考规范](http://download.intel.com/products/processor/manual/325383.pdf)太远：

```
Unsigned multiply (AX ← AL ∗ r/m8). 
```

告诉你你需要知道的一切。结果将放在`AX`. 源是 AL 和任何 8 位寄存器或内存位置。

编辑

您的问题的格式不正确/格式不正确，您的问题在同一行。

划分是`DIV`：

```
Unsigned divide AX by r/m8, with result stored in AL ← Quotient, AH ← Remainder 
```

认真：阅读手册。

# android - 如何从片段 B 访问片段 A 的按钮

> ID：10695473
> 
> 赞同：3
> 
> 时间：2012-05-22T03:47:03.400
> 
> 标签：android, android-fragments

`Fragment`我的 s 中有两个`Activity`：`A`带有按钮的片段和带有按钮的`X`片段。`B``Y`

单击按钮时如何更改按钮`X`的背景图像`B`？是否可以？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T03:54:37.473

从文档中，

> 因为每个片段都通过自己的生命周期回调定义了自己的布局和自己的行为，所以您可以在多个活动中包含一个片段，因此您应该设计重用并避免直接从另一个片段操作一个片段。

话虽如此，您想要做的是为[活动创建事件回调](http://tinyurl.com/3zmuc97)。一个好的方法是在片段内定义一个回调接口并要求宿主活动实现它。当Activity通过接口接收到回调时，它可以根据需要与布局中的其他Fragment共享信息。这是在两个独立的 s 之间共享事件的推荐方式`Fragment`——即通过活动共享事件。

查看上面的链接......它提供了几个很好的例子。如果您仍然遇到问题，请告诉我，也许我可以更明确一点。

* * *

## 编辑＃1：

假设您单击 fragment 中的一个按钮，`A`并且您希望这会导致对 fragment 中的按钮进行更改`B`。以下是一些说明该概念的示例代码：

### 回调接口：

```
public interface OnButtonClickedListener {
    public void onButtonClicked(); 
} 
```

### 活动：

```
public class SampleActivity extends Activity implements OnButtonClickedListener {

    /* Implementation goes here */     

    public void onButtonClicked() {
        // This method is called from fragment A, and when it is called,
        //   it will send information to fragment B. Remember to first
        //   check to see if fragment B is non-null.

        /* Make call to a method in fragment B that will update its display */
    }
} 
```

### 片段 A：

```
public class FragmentA extends Fragment {
    OnButtonClickedListener mListener;

    /* Implementation goes here */

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnButtonClickedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement OnButtonClickedListener ");
        }
    }

    public void clickButton() {
        // When the button is clicked, notify the activity.
        //   The activity will then pass the information to fragment
        //   B (if it has been created).

        mListener.onButtonClicked();
    }
} 
```

* * *

## 编辑#2：

现在，您可能想知道，“为什么有人会经历所有这些麻烦？当您可以让 fragment`A`直接操作 fragment时，创建一个单独的活动回调方法有什么意义`B`？”

这样做的主要原因是确保每个片段都设计为模块化和可重用的活动组件。这一点尤其重要，因为模块化片段允许您针对不同的屏幕尺寸更改片段组合。在设计您的应用程序以同时支持平板电脑和手机时，您可以在不同的布局配置中重用您的片段，以根据可用的屏幕空间优化用户体验。例如，在手机上，当多个片段无法容纳在同一个活动中时，可能需要分离片段以提供单窗格 UI。使用活动回调确保您可以轻松地在片段的情况下重用您的片段`B`在屏幕上不可见。例如，如果您在手持设备上并且没有足够的空间来显示 fragment `B`，那么您可以轻松地让您的活动检查以查看 fragment`B`当前是否正在屏幕上显示。

抱歉，如果不清楚...我发现很难描述：P。按照您的方式学习本[**教程**](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)可能会有所帮助...当您使用交互式多窗格布局时，活动回调使您作为开发人员的生活特别轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T09:33:59.933

基于亚历克斯洛克伍德的回答：

**活动：**

```
public class SampleActivity extends Activity{

    public interface OnButtonClickedListener {
           public void onButtonClicked(); 
    }

    private OnButtonClickedListener onButtonClickedListener = null;

    public OnButtonClickedListener getOnButtonClickedListener () {
           return onButtonClickedListener 
    }

    public void setOnButtonClickedListener (
        OnButtonClickedListener onButtonClickedListener {
           this.onButtonClickedListener  = onButtonClickedListener;
    }

} 
```

**片段 A：**

```
public class FragmentA extends Fragment {

private OnButtonClickedListener onButtonClickedListener = null;

private OnClickListener actionBarClickListener = new OnClickListener() {

    @Override
    public void onClick(View view) {
        if (onButtonClickedListener == null){
            onButtonClickedListener = ((SampleActivity) getActivity()).onButtonClickedListener ();
        }
        if (onButtonClickedListener != null) {
            onButtonClickedListener
                    .onButtonClicked();
        }
    }
}; 
```

}

**片段 B：**

```
 public class FragmentB extends Fragment {

private OnButtonClickedListener onButtonClickedListener = new OnButtonClickedListener() {

    @Override
    public void onButtonClicked() {

        Toast.makeText(getActivity(), "Button clicked", Toast.LENGTH_SHORT).show();
    }
};

@Override
public void onResume() {
    super.onResume();
    SampleActivity sampleActivity = (SampleActivity) getActivity();
    sampleActivity.setSearchBoxTextChangedListener(onButtonClickedListener);
} 
```

}

希望可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-09T09:30:45.647

在布局中设置`onClick`按钮的属性，甚至是片段的布局，都会在`Activity`.

然后，您的应用程序可以将此信号从您发送`Activity`到片段 B。

# android - 什么是 Android 4.0 的日历 API？

> ID：10695481
> 
> 赞同：0
> 
> 时间：2012-05-22T03:48:19.263
> 
> 标签：android, api

我正在查看谷歌开发者页面参考部分，并试图找到 4.0 的日历 API，因为谷歌说有一种处理某些事件的新方法，但我不知道如何找到它。我确实找到了 MonthDisplayHelper 类，但我认为这不是 API。有谁知道我在开发者网站上哪里可以得到这些信息？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:52:43.373

这里是对ICS中新API的介绍，

[http://android-developers.blogspot.co.nz/2011/10/ics-and-non-public-apis.html](http://android-developers.blogspot.co.nz/2011/10/ics-and-non-public-apis.html)

这是API，

[http://developer.android.com/reference/android/provider/CalendarContract.html](http://developer.android.com/reference/android/provider/CalendarContract.html)

这里有一个活动部分，

[http://developer.android.com/reference/android/provider/CalendarContract.Events.html](http://developer.android.com/reference/android/provider/CalendarContract.Events.html)

# ajax - 页面加载时的多个 AJAX 调用

> ID：10695483
> 
> 赞同：1
> 
> 时间：2012-05-22T03:48:23.747
> 
> 标签：ajax, jquery, request

我试图从外部资源中提取两个不同的东西，放到我正在创建的 HTML 页面上。我有一个成功的 AJAX 功能，可以通过解析该频道的 XML/RSS 提要从特定的 Youtube 频道提取最新视频。我通过 AJAX 调用收到此提要。

我还想从 Blogger 帐户获取最新的博客文章。解析提要以获取最新条目的代码应该不难，但我在同时调用 AJAX 时遇到了麻烦。我在某处读到它一次只能处理一个？我厌倦了排队，因为我不希望页面上的内容分步加载。我宁愿同时获取所有内容。我该怎么做呢？

这是我当前的脚本：

```
<script type="text/javascript" charset="utf-8">
    $(function() {
      $.ajax({
        type: "GET",
        url: "http://gdata.youtube.com/feeds/base/users/devinsupertramp/uploads?orderby=updated&alt=rss&client=ytapi-youtube-rss-redirect&v=2",
        dataType: "xml",
        success: parseXml
      });
    });

    function parseXml(xml) {
        $(xml).find("item:first").each(
            function() {
                var tmp = $(this).find("link:first").text();
                tmp = tmp.replace("http://www.youtube.com/watch?v=", "");
                tmp = tmp.replace("&feature=youtube_gdata", "");
                var tmp2 = "http://www.youtube.com/embed/" + tmp + "?autoplay=1&controls=0&rel=0&showinfo=0&autohide=1";
                var iframe = $("#ytplayer");
                $(iframe).attr('src', tmp2);
            }
        );
    }
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T04:00:21.683

> 我在某处读到它一次只能处理一个？

要么你误解了对方想说的话，要么他们不正确。Javascript 不会同时运行任何函数，因此英语不好的人可能会将其改写为“一次只能处理一个”，但这并不意味着您不能进行多个 AJAX 调用。jQuery 很聪明，会做它需要做的事情来确保最终执行这两个调用。

如果您希望同时加载所有内容，可悲的事实是您不能。但是，您可以通过声明由每个调用的成功方法设置的标志来使其对用户*显示这种方式。*然后将内容隐藏起来，直到设置了两个标志。

**编辑：**

这是一种*非常*简单的方法，可以使它们看起来是同时获取的：

```
<script type="text/javascript" charset="utf-8">
    var youtubComplete = false;
    var otherComplete = false;

    $(function() {
      $.ajax({
        type: "GET",
        url: "http://gdata.youtube.com/feeds/base/users/devinsupertramp/uploads?orderby=updated&alt=rss&client=ytapi-youtube-rss-redirect&v=2",
        dataType: "xml",
        success: parseXml
      });
      $.ajax({
        type: "GET",
        url: "http://someotherdata.com/",
        dataType: "xml",
        success: function() { otherComplete = true; checkFinished(); }
      });
    });

    function parseXml(xml) {
        $(xml).find("item:first").each(
            function() {
                var tmp = $(this).find("link:first").text();
                tmp = tmp.replace("http://www.youtube.com/watch?v=", "");
                tmp = tmp.replace("&feature=youtube_gdata", "");
                var tmp2 = "http://www.youtube.com/embed/" + tmp + "?autoplay=1&controls=0&rel=0&showinfo=0&autohide=1";
                var iframe = $("#ytplayer");
                $(iframe).attr('src', tmp2);
            }
        );
        youtubeComplete = true;
        checkFinished();
    }
    function checkFinished()
    {
        if(!youtubeComplete || !otherComplete) return;
        // ... Unhide your content.
    }
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T04:15:48.480

浏览器将支持多个出站呼叫，但每个域有一个上限。看看这个相关的 Q/A[在流行的浏览器中允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse).

有几个很好的库可以进行请求调度，包括链接和并行化 AJAX 调用。一个很好的库是[https://github.com/kriskowal/q](https://github.com/kriskowal/q)，它提供了异步承诺框架来实现任意复杂的 AJAX 请求链接。Q 缩小后约为 3.3KB。

```
// The jQuery.ajax function returns a 'then' able
Q.when($.ajax(url, {dataType: "xml"}))
  .then(function (data) {
     var parsedXML = parseXML(data)
     ...
     // some other ajax call
     var urls = [Q.when($.ajax(url2, {data: {user: data.userId}})),
                 Q.when($.ajax(url3, {data: {user: data.userId}}))];
     // run in parallel
     return Q.all(urls)
  })
  .then(function (data) {
    // data retrieved from url2, url2
  }) 
```

# php - 更新while循环内的全局变量

> ID：10695487
> 
> 赞同：-1
> 
> 时间：2012-05-22T03:48:50.160
> 
> 标签：php

有人可以解释从while循环中返回值的最有效方法，以便在while循环启动之前使用。
尝试了以下 -

```
echo $var1;
while($row = mysql_fetch_array($query1)){
    $var1 = $row[0];
} 
```

返回未设置的变量。

我也试过：

```
$var1= 1;
echo $var1;
while($row = mysql_fetch_array($query1)){
    global $var1;    
    $var1 = $row[0];
} 
```

只是回声1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:52:09.113

这听起来可能很奇怪，但是您的回声是在 while 循环之前还是之后？在您上面的示例中，您向我们展示了它是在循环之前 - 我们不希望它显示太多。

# android - 我为我的安卓手机使用了 adb install 方法。我在手机上找不到ap

> ID：10695491
> 
> 赞同：2
> 
> 时间：2012-05-22T03:49:44.137
> 
> 标签：android

我按照 adb 命令教程在我的手机上安装了一个应用程序，但在我的手机上找不到它。

我使用了以下命令：

`adb install androidapp.apk`

有人可以帮帮我吗？这将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:58:01.327

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:23:51.220

当应用程序在模拟器上运行时，它会在 project/bin 文件夹中创建一个 .apk 文件。您只需将您的 android 手机与 USB 大容量存储连接，然后将此 apk 复制到 SD 卡。然后它将通过单击手机上的 apk 文件在手机上安装该应用程序。否则发布您的代码以检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:09:33.383

如果您在 SDK 版本 2.1 下编译和导出您的 apk 文件，它将不适用于您的 SDK 导出“2.1”以下的任何 android 版本。Android 软件是向前兼容而不是向后兼容。例如，如果您正在使用允许在 C/C++ 系列中开发的 android NDK（android SDK 的附加组件）包进行编程，则它仅与 android 2.3 兼容，android 2.2 及以下版本仅支持 java 构建。因此，您将收到“解析包时出现问题”错误。

创建一个新项目并选择 2.1 版本的 AVD 现在尝试在两者中运行

# javascript - 用鼠标水平滚动 ul

> ID：10695501
> 
> 赞同：0
> 
> 时间：2012-05-22T03:53:07.693
> 
> 标签：javascript, jquery, jquery-ui, jquery-tools

如何使用鼠标光标水平滚动 ul？基本上我想模仿[这个](http://www.tn3gallery.com/examples/default/)图片库的底部。我在网上找到了一个javascript方法，但它并不那么顺利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:34:58.677

```
<div>
    <ul>
        <li></li>
        ...
    </ul>
</div> 
```

和 Javascript：

```
var $div = $('div');
var $ul = $('ul');

// width of div
var width = $div.width();

// width of ul - width of div
var ulWidth = $ul.width() - width;

$div
    .on('mouseenter', function(e) {
        // get left offset of div on page
        var divLeft = $div.offset().left;

        $(window).on('mousemove', function(e) {
            var left = e.pageX - divLeft;
            // get percent of width the mouse position is at
            var percent = left / width;

            // set margin-left on ul to achieve a 'scroll' effect
            $ul.css('margin-left', -(percent * ulWidth));
        });
    })
    .on('mouseleave', function() {
        // remove mousemove event
        $(window).off('mousemove');
    })
;​ 
```

[http://jsfiddle.net/aarongloege/gQyz6/](http://jsfiddle.net/aarongloege/gQyz6/)

您基本上需要根据鼠标位置距视口左侧的百分比（在我的示例中为 div）定位 ul 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:44:38.120

查看这两个现有的 jQuery 插件，它们完全符合您的要求：

1) [http://manos.malihu.gr/jquery-thumbnail-scroller](http://manos.malihu.gr/jquery-thumbnail-scroller)

2) [http://www.convergent-evolution.co.uk/resources/jquery-plugins/scrolling-carousel/](http://www.convergent-evolution.co.uk/resources/jquery-plugins/scrolling-carousel/)

# android - 重命名 Android 应用的应用名称

> ID：10695503
> 
> 赞同：-5
> 
> 时间：2012-05-22T03:53:24.310
> 
> 标签：android

我的项目名称是 XXXX，apk 是 XXX。我通过右键单击->重构->重命名将项目重命名为 YYY。现在 apk 名称为 YYY。

但是当我尝试安装或卸载 apk 时，它显示为 XXXX。我该如何改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:59:20.453

您应该将应用程序的名称从 更改为`androidManifest.xml`，或者如果有指向字符串资源的资源 id，则在`strings.xml`.

如果清单中有类似的内容：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" > 
```

然后你应该查找`app_name`里面的字符串`strings.xml`并将其更改为

```
<string name="app_name">YYY</string> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T03:57:33.683

您的应用程序名称与您的 Eclipse 项目名称无关，打开您的 res/values/strings.xml 并修改 app_name 项以更改您的应用程序名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T03:59:49.563

检查你的 AndroidManifest.xml 和你的 values/strings.xml (app_name)

# mercurial - hgweb：向不同的用户显示不同的存储库？

> ID：10695504
> 
> 赞同：2
> 
> 时间：2012-05-22T03:53:24.917
> 
> 标签：mercurial, hgweb

我想在同一个服务器/虚拟主机上托管两组不同的私有存储库，并让用户根据他们的凭据看到一组或另一组。

有没有比托管两个具有单独用户帐户和配置文件的[单独hgweb 实例更简单的方法？](http://mercurial.selenic.com/wiki/PublishingRepositories#Public_and_Private_Repositories-1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:06:32.663

从技术上讲，没有什么能阻止你拥有这条线：

```
allow_read = user1 user2 user3 
```

在`.hg/hgrc`一半的回购中，并且：

```
allow_read = user4 user5 user6 
```

在另一半。即使要在列表中*查看*repo，用户也必须在`allow_read`列表中。

但是，管理这可能会很麻烦。

# javascript - 向对象原型添加函数会导致函数出现在所有“for X in OBJ”循环中

> ID：10695506
> 
> 赞同：8
> 
> 时间：2012-05-22T03:53:45.057
> 
> 标签：javascript

所以，这里有一些示例 javascript 代码：

```
Object.prototype.simpleFunction = function () {
    return true;
}
var tempObject = {};
for (var temp in tempObject) {
    console.log(temp);
} 
```

请注意，如果您执行此操作，您将从`console.log`Google Chrome 中的命令获得“simpleFunction”输出。（我正在使用 19.0.1084.46m 。）

但是，种类繁多的相关 Object 函数*不会*传递给`console.log`.

如何在`Object`原型中添加函数而不让它们出现在我的“`for property in`对象”循环中？

**编辑**：我应该提到我想要的最后一件事是在那里抛出另一个'if'语句，因为这意味着我需要将它添加到所有`for`循环中。:(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T03:57:47.877

这就是为什么你应该经常检查`hasOwnProperty`：

```
for (var temp in tempObject) {
    if (Object.prototype.hasOwnProperty(tempObject, temp)) {
        console.log(temp);
    }
} 
```

Crockford 提倡使用`Object.prototype.hasOwnProperty`而不是`tempObject.hasOwnProperty`，以防万一您`hasOwnProperty`在对象中覆盖。

* * *

在 ES5 中，您可以将其设置为 not `enumerable`：

```
Object.defineProperty(Object.prototype, 'simpleFunction', {
    value: function() {
        return true;
    },
    enumerable: false, // this is actually the default
}); 
```

或者（在 ES5 中），您可以使用`Object.keys()`仅获取对象自己的键：

```
Object.keys(tempObject).forEach(function(key) {
    console.log(key);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:57:48.773

你的意思是这样的：

```
for (var temp in tempObject) {
    if (tempObject.hasOwnProperty(temp )) {
         console.log(temp);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T03:58:47.350

您可以通过执行以下操作跳过继承的属性：

```
if (tempObject.hasOwnProperty(temp)) {
    // property didn't come from the prototype chain
} 
```

底线是，如果不使用`in`.

您可以定义一个始终传递对象的外部接口，例如

```
function simpleFunction(obj) {
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T04:04:39.670

在 javascript 中无法做到这一点。您需要自己过滤结果。一种可能的方法是在另一个对象中定义自己的原型属性：

```
var myObjectExt = {
    sampleFunciton: function(){}
}
var p;
for(p in myObjectExt){
    Object.prototype[p] = myObjectExt[p];
}

var obj = {};
for(p in obj){
    if(myObjectExt[p])continue;
    //do what you need
} 
```

# ruby-on-rails - 如何在 Ruby on Rails 中使用 omniauth-facebook 删除 facebook 提供程序？

> ID：10695507
> 
> 赞同：2
> 
> 时间：2012-05-22T03:53:45.257
> 
> 标签：ruby-on-rails, omniauth

我可以使用常规`omniauth-facebook`方法将帐户附加到我的用户。如何从用户那里删除应用程序？是否`omniauth-facebook`具有执行此操作的功能？例如，我知道 Pinterest 能够与他们的用户链接和取消链接 facebook。取消链接后，Pinterest 应用程序将从 facebook 用户的应用程序列表中消失。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-27T06:16:39.223

您可以使用 Facebook Graph API 撤销对您的应用程序的访问权限。

您可以在此处的 FB Graph API 文档中找到更多信息[https://developers.facebook.com/docs/facebook-login/permissions/requesting-and-revoking](https://developers.facebook.com/docs/facebook-login/permissions/requesting-and-revoking)

并在以下 stackoverflow 线程中：[Facebook API SDK revoke access](https://stackoverflow.com/questions/9050190/facebook-api-sdk-revoke-access)

最后是使用 Koala gem（控制 Facebook Graph API 的宝石）实现的以下 stackoverflow 线程：[How to deauthorize User Facebook Permissions using Koala gem](https://stackoverflow.com/questions/37640242/how-to-deauthorize-user-facebook-permissions-using-koala-gem)

# iphone - UITableViewCellStyleValue1 detailTextLabel 显示方式错误

> ID：10695508
> 
> 赞同：-1
> 
> 时间：2012-05-22T03:53:50.797
> 
> 标签：iphone, detailtextlabel

当我制作一个 detailTextLabel 时，我只想让它在标签中正确，但它总是在 textLabel 下方，我如何像 UITableViewCellStyleValue1 演示一样更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:19:25.653

您必须设置详细文本标签右对齐的单元格属性，如下所示

```
cell.detailTextLabel.textAlignment = UITextAlignmentRight 
```

# java - 包含 PowerMock 的生成代码测试

> ID：10695509
> 
> 赞同：0
> 
> 时间：2012-05-22T03:53:51.873
> 
> 标签：java, compiler-construction, code-generation, classloader, powermock

我最近遇到了一个障碍。我正在编写一些单元测试来锻炼我负责代码生成的库的某些部分。代码接受配置对象的输入，使用 CodeModel 编写代码，将这些类转储到 String，然后使用 Java 6 编译器 api 将它们即时编译成可用的类。

我遇到的障碍是我在生成的代码中测试的方法之一，它使用具有最终方法的类（Android Bundle）并在使用时抛出异常（“java.lang.RuntimeException：Stub！”）。因此，为了解决这个问题，我使用 PowerMock 来模拟最终方法。但是，在这种情况下，编译器 API 会引发 NPE。我认为这是因为 PowerMock 在幕后使用的设施，但我不确定。

这是一个例外：

```
at org.androidtransfuse.gen.classloader.MemoryFileManager.<init>(MemoryFileManager.java:11)
at org.androidtransfuse.gen.classloader.MemoryClassLoader.<init>(MemoryClassLoader.java:16)
at org.androidtransfuse.gen.ParcelableGeneratorTest.setup(ParcelableGeneratorTest.java:67)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at org.junit.internal.runners.MethodRoadie.runBefores(MethodRoadie.java:129)
at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:93)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:296) 
```

内存文件管理器.java：

```
class MemoryFileManager extends ForwardingJavaFileManager<JavaFileManager> {
    public final Map<String, Output> map = new HashMap<String, Output>();

    MemoryFileManager(JavaCompiler compiler) {
        super(compiler.getStandardFileManager(null, null, null));
    }

    @Override
    public Output getJavaFileForOutput
            (Location location, String name, JavaFileObject.Kind kind, FileObject source) {
        Output mc = new Output(name, kind);
        this.map.put(name, mc);
        return mc;
    }
} 
```

MemoryClassLoader.java（使用 MemoryFileManager）：

```
public class MemoryClassLoader extends ClassLoader {
    private final JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    private final MemoryFileManager manager = new MemoryFileManager(this.compiler);

    public void add(String classname, String filecontent) {
        add(Collections.singletonMap(classname, filecontent));
    }

    public void add(Map<String, String> map) {
        List<Source> list = new ArrayList<Source>();
        for (Map.Entry<String, String> entry : map.entrySet()) {
            list.add(new Source(entry.getKey(), JavaFileObject.Kind.SOURCE, entry.getValue()));
        }
        this.compiler.getTask(null, this.manager, null, null, null, list).call();
    }

    @Override
    protected Class<?> findClass(String name) throws ClassNotFoundException {
        synchronized (this.manager) {
            Output mc = this.manager.map.remove(name);
            if (mc != null) {
                byte[] array = mc.toByteArray();
                return defineClass(name, array, 0, array.length);
            }
        }
        return super.findClass(name);
    }
} 
```

一个非常基本的测试证明了这个问题：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Parcel.class)
public class ExampleTest {

    private static final String TEST_VALUE = "test value";

    String classToCompile =
            "import android.os.Parcel;\n" +
            "\n" +
            "public class ClassToCompile\n" +
            "{\n" +
            "\n" +
            "    private Parcel parcel;\n" +
            "}";

    @Test
    public void test() throws ClassNotFoundException, IOException, NoSuchMethodException, InvocationTargetException, IllegalAccessException, InstantiationException {
        MemoryClassLoader classLoader = new MemoryClassLoader();
        classLoader.add("ClassToCompile", classToCompile);
        classLoader.loadClass("ClassToCompile");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:38:12.543

Powermock Google Group 上的 Johan为我[回答](https://groups.google.com/forum/?fromgroups#!topic/powermock/Ad7icV8Chdw)了这个问题，但我想我也会在这里添加结果。

对我有用的是从 @RunWith(PowerMockRunner.class) 方法更改为[此处](http://code.google.com/p/powermock/wiki/PowerMockAgent)描述的 Java 代理方法。

这要求我删除 @RunWith 注释并将以下内容添加到我的 Maven POM：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <argLine>
            -javaagent:${settings.localRepository}/org/powermock/powermock-module-javaagent/1.4.12/powermock-module-javaagent-1.4.12.jar
        </argLine>
    </configuration>
</plugin> 
```

在 IDE 中运行单元测试时，我必须添加

```
-javaagent: <jarpath>/powermock-module-javaagent-1.4.12.jar 
```

到运行配置。

# sorting - 如何在java中对字符串数组进行排序？

> ID：10695514
> 
> 赞同：0
> 
> 时间：2012-05-22T03:54:27.493
> 
> 标签：sorting

我为示例自定义了字符串数组：

```
String[] myArr = {"Zen", "Maruthi","Swift", "Audi"}; 
```

我有一个工具可以生成类似的数组

```
String[] output = getCars();//returns {"Swift", "Audi", "Zen", "Maruthi"}

// it should return same as myArr...means {"Zen", "Maruthi","Swift", "Audi"} 
```

我想将**输出**数组排序到**myArr**；我正在使用 for 循环与**myArr 比较进行排序；**

那么还有其他方法可以对自定义数组进行排序吗？请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:56:51.373

编辑：

这里不需要排序。只需将类似的字符串添加到数组`list`中的每个元素序列中。`myArr`

```
List<String> items=new ArrayList<String>();
for(String item:myArr)
 {
  for(String outputItem:output)
   {
     if(item.equals(outputItem))
        items.add(outputItem);
     }                    
   } 
 for(String s:items)
     System.out.println(s); 
```

# nhibernate - Nhibernate 3.x Cascade - 正在更新

> ID：10695518
> 
> 赞同：1
> 
> 时间：2012-05-22T03:55:00.610
> 
> 标签：nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我有以下映射，但是当我删除状态实体时，Nhibernate 会对子项执行更新而不是删除。

```
public StatusMap()
{
    Property(x => x.Date);
    Property(x => x.Text, map => map.Type(NHibernateUtil.StringClob));
    Property(x => x.Type);         
    ManyToOne(x => x.User, map => map.Column("UserId"));            
    Bag(x => x.Comments, map => { map.Key(km => km.Column("StatusId")); }, action => action.OneToMany());

    Bag(x => x.Likes, map => { map.Key(km => km.Column("StatusId"));  map.Cascade(Cascade.DeleteOrphans);  }, action => action.OneToMany());
}

public StatusLikeMap()
{
    ManyToOne(x => x.User, map => map.Column("UserId"));
    ManyToOne(x => x.Status, map => { map.Column("StatusId");  });
    Property(x => x.Date);
} 
```

Delete(status) 在此 SQL 中的结果：

```
UPDATE
    CommentStatus 
SET
    StatusId = null 
WHERE
    StatusId = @p0;
@p0 = ce350d55-e476-4874-9e95-341cad9342e2 [Type: Guid (0)]

UPDATE
    StatusLike 
SET
    StatusId = null 
WHERE
    StatusId = @p0;
@p0 = ce350d55-e476-4874-9e95-341cad9342e2 [Type: Guid (0)]

DELETE 
FROM
    Status 
WHERE
    Id = @p0;
@p0 = ce350d55-e476-4874-9e95-341cad9342e2 [Type: Guid (0)] 
```

任何想法 ？？请帮帮我 ！

# 编辑：

我在下面进行了更改并且排除工作，但是这样是触发删除命令的数据库。

如何让 nhibernate 执行删除而不是数据库？

```
Bag(p => p.Likes, map =>
{
   map.Key(k =>
   {
      k.Column("StatusId");
      k.OnDelete(OnDeleteAction.Cascade);
    });
    map.Cascade(Cascade.DeleteOrphans);
    map.Inverse(true);
 }, ce => ce.OneToMany()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:52:12.347

Cascade.DeleteOrphans 只说孤儿被删除。这并不意味着当父级被删除时，子级也被删除。

您还需要级联“删除”或“全部”：

```
map.Cascade(Cascade.All | Cascade.DeleteOrphans) 
```

# vb.net - 在 GridView 单元格/列中获取数据

> ID：10695524
> 
> 赞同：0
> 
> 时间：2012-05-22T03:55:42.560
> 
> 标签：vb.net

我是 VB.net（编程）的新手。我需要你关于 Gridview 控制的建议。

我有一个加载了两列的gridview - 一列（名称）带有一些文本，另一列（价格）是空的。

我有一个包含名称和价格数据的文本框。

现在，我想遍历文本框，看看 GridView 控件的列（名称）的数据/符号是否与文本框中的数据匹配。

如果 GridView 的第一列数据的名称与文本框的名称匹配，则应在 GridView 的第二列（价格）中获取价格数据。

为了更清楚，说：

我在 Textbox 中有以下数据：

名称-价格

AB- 50

DE- 80

我在 GridView 中有两列，设置如下：

名称(column1) – 价格(column2)

AB- 空
DE- 空

现在，如何获取文本框的价格数据，并将它们提取到与 Column1 的名称匹配的 Gridview 的 Column2 中。因此，GridView 中的输出应该是：

名称(column1) – 价格(column2)

AB- 50
DE- 80

到目前为止，我已经能够遍历 GridView 的第一列……..我不确定如何从 Textbox 获取数据并将数据提取到 GridView 的 Column2 中。

任何建议将不胜感激。

> 公开课形式1
> 
> ```
> Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
> 
>     'Data of GridView
>     Dim dt As New DataTable()
>     dt.Columns.Add("Name")
>     dt.Columns.Add("Price")
>     dt.Rows.Add(New [Object]() {"AB"})
>     dt.Rows.Add(New [Object]() {"DE"})
>     Me.DataGridView1.DataSource = dt
> 
>     'Data of Textbox
>     TextBox1.Text = "AB, 50" & vbNewLine & "DE, 100"
> 
> End Sub
> 
> Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
>     'loop through the gridview
>     Dim marketvalue As String
>     For Each r As DataGridViewRow In Me.DataGridView1.Rows
>         marketvalue = r.Cells(0).Value
>         MessageBox.Show(marketvalue)
>     Next
> End Sub End Class 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:06:32.663

我会使用一个单独的函数从您的 TextBox 中获取价格

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    'loop through the gridview
    Dim marketvalue As String
    Dim price As String
    For Each r As DataGridViewRow In Me.DataGridView1.Rows

        marketvalue = r.Cells(0).Value
        MessageBox.Show(marketvalue)

        'Get the price by calling a function and update it back to the DataGrid
        price = get_price(marketvalue)
        r.Cell(1).Value = price
    Next
End Sub 
```

下面的函数可以通过传递name参数返回价格，如果没有找到name则为空

```
Private Function get_price(ByVal strName As String) As String

    Dim string_array() As String = TextBox1.Text.Split(System.Environment.vbNewLine)
    For Each s As String In string_array
        Dim string_detail() As String = s.Split(",")
        If string_detail(0) = strName Then
            Return Trim(string_detail(1))
        End If
    Next

    Return ""
End Function 
```

# sql - 如何使用单个命令选择性地 [双] 插入（T-SQL）？

> ID：10695527
> 
> 赞同：4
> 
> 时间：2012-05-22T03:56:41.690
> 
> 标签：sql, sql-server, tsql

这是一个 SQL 专家的问题。我正在使用 SQL Server 2008 R2

我有两个相关的表：`Labs`和`LabUsers`.

用户被分配到实验室，没有任何顺序的整个组的重复。

目标是插入一个`@userName`（例如`@user = "Paul"`）来`LabUsers`满足以下所有限制：

1.  不超过`@maxUsers`一个组（例如`@maxUsers=4`）

2.  **没有完整**组的重复（完整实验室）。组中用户的顺序并不重要。**[编辑]**

3.  如果不允许现有实验室，则创建 ( `INSERT`) 一个新实验室，然后插入 的行`@user`，不超过`@maxLabs`（例如`@maxLabs=5`）。

4.  **非常重要**：一秒钟内有许多来自服务器的并发相同请求，这可能会相互干扰。因此，该命令一开始执行，就不允许执行其他查询，直到该命令结束。

5.  如果不能满足上述限制，查询应返回 0，并返回`LabID`插入行的 。

6.  **[编辑]**有几个实验室的区域。区域是独立的。每个区域 #labCount 由`@maxLabs`. 所有区域的`@maxLabs`都相等，因此`Total_maxLabs`= `@maxLabs`x `#zonesCount`。例如`@zone=51`（稍后`@zone=52, 53 etc.`）。（相同的 LabUser 可以不受限制地使用区域。区域之间不“了解”彼此）

7.  `LabID`in`LabUsers`是来自 的外键`Labs`。

这个例子：

这是`Labs`表格：

```
LabID   LabName     LabZone
-----   -------     -------
1       North       51  
2       North East  51
3       South West  51 
```

而且`LabUsers`是：

```
LabUserID   LabUserName LabID
---------   ----------- -----
1           Diana       3
2           Julia       2
3           Paula       2
4           Romeo       1
5           Julia       3
6           Rose        2
7           Diana       1
8           Diana       2
9           Julia       1
10          Romeo       3
11          Paul        1 
```

在示例中，用户的分配方式如下：

```
LabID   LabName     LabZone LabUsers (ordered LTR a>z)
-----   -------     ------- --------
1       North       51      Diana•Julia•Paul•Romeo
2       North East  51      Diana•Julia•Paula•Rose
3       South West  51      Diana•Julia•Romeo 
```

*   插入不应是 into`LabID=1`或 2，因为这些实验室中已经有 4 个用户。
*   由于`LabID=3`使用`LabID=1`.

因此，因为`@maxLabs`不是 3（现有实验室），所以需要插入一个新行`Labs`，其值为`LabZone=@zone=51`。

`IDENTITY`将为新行设置4 `LabID`。

现在是插入新实验室的`Paul`时候了`LabUsers`。`LabID`

如何解决这个问题呢？

使用什么方法来确保命令作为一个整体执行而不受干扰？

创建数据库的脚本是：

```
CREATE DATABASE [Allocation]
GO

USE [Allocation]
GO

CREATE TABLE [dbo].[LabUsers](
    [LabUserID] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY CLUSTERED ,
    [LabUserName] [nvarchar](50) NOT NULL,
    [LabID] [int] NOT NULL)
GO

SET IDENTITY_INSERT [dbo].[LabUsers] ON
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (1, N'Diana', 3)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (2, N'Julia', 2)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (3, N'Paula', 2)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (4, N'Romeo', 1)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (5, N'Julia', 3)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (6, N'Rose', 2)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (7, N'Diana', 1)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (8, N'Diana', 2)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (9, N'Julia', 1)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (10, N'Romeo', 3)
INSERT [dbo].[LabUsers] ([LabUserID], [LabUserName], [LabID]) VALUES (11, N'Paul', 1)
SET IDENTITY_INSERT [dbo].[LabUsers] OFF

CREATE TABLE [dbo].[Labs](
    [LabID] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY CLUSTERED ,
    [LabName] [nvarchar](50) NULL,
    [LabZone] [int] NOT NULL)
GO

SET IDENTITY_INSERT [dbo].[Labs] ON
INSERT [dbo].[Labs] ([LabID], [LabName], [LabZone]) VALUES (1, N'North', 51)
INSERT [dbo].[Labs] ([LabID], [LabName], [LabZone]) VALUES (2, N'North East', 51)
INSERT [dbo].[Labs] ([LabID], [LabName], [LabZone]) VALUES (3, N'South West', 51)
SET IDENTITY_INSERT [dbo].[Labs] OFF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:50:52.730

我背弃了 dradu 的变量并实施了一个类似但不同的解决方案。它确实假设新实验室将比当前最大可用实验室多 1 个。我还假设实验室不会删除用户。

此解决方案的目标是查看用户插入的最终结果是什么样的，并对其运行检查以查看哪个最终结果是有效的。逻辑如下：

1.  获取可用的实验室以插入
    *   检查以确保用户不在实验室中
    *   检查以确保此处的实验室未满
    *   在这里也包括新的实验室可能性
2.  如果在插入用户后实验室将满员，则创建按字母顺序排列的每个实验室的所有实验室用户列表
    *   新的可能实验室被标记
3.  比较标记的实验室列表与未标记的实验室列表，并选择不与现有完整实验室列表重复的最小 labId
4.  返回插入的 LabId 或 0 作为输出

给定原始问题的起始数据并按以下顺序执行：

1.  插入@userName =“保罗”，@labZone = 51
    *   保罗被添加到新创建的实验室 4
2.  插入@userName =“保罗”，@labZone = 51
    *   保罗被添加到新创建的实验室 5
3.  插入@userName =“保罗”，@labZone = 51
    *   没有新的实验室，也没有可供 Paul 去的现有实验室，所以返回 0
4.  插入@userName =“玫瑰”，@labZone = 51
    *   Rose 被添加到现有的 Lab 3
5.  插入@userName =“玫瑰”，@labZone = 51
    *   Rose 被添加到现有的 Lab 4
6.  插入@userName =“玫瑰”，@labZone = 51
    *   Rose 被添加到现有的 Lab 5

LabUsers 事务中的 tabblockx 应防止并发事务造成破坏。

此外，在调试公用表表达式时，将它们替换为临时表会很有帮助，这样您就可以一路查看每个步骤的结果。

```
BEGIN TRAN

DECLARE @maxUsers INT
DECLARE @maxLabs INT
DECLARE @userName VARCHAR(50)
DECLARE @labZone INT
DECLARE @labID INT

SET @maxUsers = 4
SET @maxLabs = 5

SET @userName = 'Paul'
SET @labZone = 52
SET @labID = NULL

declare @currentLabCount int

-- get current number of labs
select @currentLabCount = count(*)
from Labs l
/*
-- uncomment this if the max labs applies individual lab zones rather than across all lab zones
where LabZone = @labZone
*/  

;with availableLabs as ( -- get available labs to insert into
    -- check existing labs for valid spots
    select
        lu.LabID
    ,   count(*) + 1 as LabUserCount -- need this to see when we're at max users
    from LabUsers lu with (tablockx) -- ensures blocking until this completes (serialization)
      inner join Labs l with (tablockx) -- might as well lock this too
        on l.LabId = lu.LabID
        and l.LabZone = @labZone -- check Lab Zone
    where not exists( -- make sure lab user isn't already in this lab
        select 1
        from LabUsers lu2
        where lu2.LabId = lu.LabId
        and lu2.LabUserName = @userName
    )
    group by lu.LabID
    having count(*) < @maxUsers -- make sure lab isn't full
    union all
    -- create new lab if not at limit
    select
        max(LabId) + 1 as LabId
    ,   1 as LabUserCount
    from Labs -- check all labs
    where @currentLabCount < @maxLabs -- don't bother checking new labs if going to exceed max allowable labs
)
-- only do this check if lab is going to be filled
, dupeCheck as( -- generates a lab user list sorted alphabetically by lab user name per lab
    select
        y.LabId
    ,   max(y.newLabFlag) as newLabFlag -- if existing lab getting new lab user, then 1, if new lab with new lab user, then 1 else 0
    ,   replace(replace(replace(stuff( -- cool way to comma concatenate without looping/recursion taking advantage of "XML path"
            (
                select
                    ',' + x.LabUserName + '' -- lab users
                from (
                    select
                        LabId
                    ,   @userName as LabUserName 
                    from availableLabs -- the new user and his/her potential labs
                    union all
                    select
                        lu.LabId
                    ,   lu.LabUserName
                    from LabUsers lu -- the current lab users and the labs they belong to
                ) x
                where x.LabID = y.LabId -- make sure the LabId's match
                and max(y.LabUserCount) = @maxUsers -- don't generate this list if lab is not full
                order by x.LabUserName -- sorted alphabetically
                for xml path('')
            ), 1, 1, ''
        )
        , '&lt;', '<'), '&gt;', '>'), '&amp;', '&') as LabUserList
    from (
        -- get list of old labs and flag them as such
        select
            lu.LabId
        ,   convert(tinyint,0) as newLabFlag
        ,   count(*) as LabUserCount -- need the current lab user count
        from LabUsers lu
        /*
            -- uncomment this if full labs can be duplicated across lab zones
            inner join Labs l
                on l.LabId = lu.LabId
                and l.LabZone = @labZone
        */
        group by lu.LabId
        union all
        -- get list of potential candidate labs for lab user and flag them as such
        select
            al.LabId
        ,   convert(tinyint,1) as newLabFlag
        ,   al.LabUserCount -- new lab user count if we were to insert the new user
        from availableLabs al
    ) y
    group by y.LabId
)
select
    @labID = min(dc.LabID)
from dupeCheck dc
where dc.newLabFlag = 1
-- make sure the same list of users does not already exist at an existing lab
and not exists(
    select 1
    from dupeCheck dupe
    where dupe.LabUserList = dc.LabUserList
    and dupe.newLabFlag = 0
)

-- insert new lab if doesn't exist
insert into Labs(LabName, LabZone) -- always better to be clearer
select
    'New Lab' as LabName
,   @labZone as LabZone
where @currentLabCount < @maxLabs -- make sure we can't have more than max labs
and not exists(
    select 1
    from Labs
    where LabId = @labId
)

-- insert lab users
insert into LabUsers(LabUserName, LabId)
select
    @userName as LabUserName
,   @labId as LabId
where @labId is not null

-- return labId
select isnull(@labId,0)
commit tran 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:03:38.947

由于`MERGE`不能使用，所以需要几个语句。我想不出一个更简单的解决方案，抱歉。我相信专家可以找到更好的解决方案。

首先，我根据指定的规则寻找潜在的实验室。为避免重复组，我在可能插入之前和之后比较了每个实验室的用户。如果有任何实验室可用，请插入用户。如果没有，请插入实验室，然后插入用户。为了在事务完成之前锁定表，我使用`isolation level serializable`. 这是代码：

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE -- Range locks until transaction completes

BEGIN TRAN

DECLARE @maxUsers INT
DECLARE @maxLabs INT
DECLARE @userName VARCHAR(50)
DECLARE @labZone INT
DECLARE @labID INT

SET @maxUsers = 4
SET @maxLabs = 5

SET @userName = 'Paul'
SET @labZone = 51
SET @labID = NULL

--Check potential spots
;WITH U1(LabID, UserName) AS(
    SELECT LabID, LabUserName FROM dbo.LabUsers WHERE LabID IN (
        SELECT LabID 
        FROM dbo.LabUsers 
        WHERE LabUserName <> @userName 
        GROUP BY LabID 
        HAVING COUNT(LabUserName) < @maxUsers
    )
)
, U2(LabID, UserName) AS(
    SELECT LabID, LabUserName FROM dbo.LabUsers WHERE LabID IN (
        SELECT LabID 
        FROM dbo.LabUsers 
        GROUP BY LabID 
        HAVING COUNT(LabUserName) = @maxUsers
    )
)
--Get the first potential LabID
SELECT @labID = (
SELECT TOP 1 potential.LabID FROM (
SELECT DISTINCT LabID, SUBSTRING((SELECT ',' + UserName FROM (
    SELECT LabID, UserName FROM U1
    UNION SELECT LabID, @userName FROM U1
) t WHERE LabID = lu.LabID ORDER BY UserName FOR XML PATH('')
), 2, 50) AS AfterUsers, SUBSTRING((SELECT ',|' + UserName + '|' FROM (
    SELECT LabID, UserName FROM U1
) t WHERE LabID = lu.LabID ORDER BY UserName FOR XML PATH('')
), 2, 50) AS BeforeUsers
FROM U1 lu) potential
LEFT OUTER JOIN (
SELECT DISTINCT LabID, SUBSTRING((SELECT ',' + UserName FROM (
    SELECT LabID, UserName FROM U2
    UNION SELECT LabID, @userName FROM U2
) t WHERE LabID = lu.LabID ORDER BY UserName FOR XML PATH('')
), 2, 50) AS Users
FROM U2 lu) allocated
     ON potential.AfterUsers = allocated.Users
WHERE allocated.Users IS NULL 
    AND potential.BeforeUsers NOT LIKE '%|' + @userName + '|%'
ORDER BY 1
)

IF @labID IS NULL --No existing lab available
BEGIN

    --Insert Lab
    INSERT INTO dbo.Labs(LabName, LabZone) 
        SELECT 'New Lab', @labZone 
        WHERE (SELECT COUNT(*) FROM dbo.Labs) < @maxLabs
    IF @@ROWCOUNT = 1
    BEGIN
        SET @labID = SCOPE_IDENTITY() --Get the new LabID
        --Insert Lab user
        INSERT INTO dbo.LabUsers(LabUserName, LabID) 
            SELECT @userName, @labID
    END

END
ELSE --Lab exists, insert user if possible
BEGIN

    INSERT INTO dbo.LabUsers(LabUserName, LabID) 
        SELECT @userName, @labID
        WHERE NOT EXISTS(SELECT * FROM dbo.LabUsers WHERE LabID = @labID AND LabUserName = @userName)

END

--A quick select to check the results
SELECT * FROM dbo.Labs
SELECT DISTINCT LabID, SUBSTRING((SELECT ',' + LabUserName FROM (
    SELECT LabID, LabUserName FROM dbo.LabUsers
) t WHERE LabID = lu.LabID ORDER BY LabUserName FOR XML PATH('')
), 2, 50) AS Users
FROM dbo.LabUsers lu

COMMIT TRAN

SET TRANSACTION ISOLATION LEVEL READ COMMITTED --Restore isolation level to default 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:53:20.717

这是尝试使用[`MERGE`](http://msdn.microsoft.com/en-us/library/bb510625.aspx "合并 (Transact-SQL)"). 作为工作的一部分，该解决方案构建有序的 CSV 列表并进行比较，因此可能效率不高。尽管如此，在我的测试中，它似乎已经满足了所有其他要求。

首先，模式，用原始帖子中的示例完成：

```
CREATE TABLE Labs
    (LabID int IDENTITY, LabName varchar(50), LabZone int);

SET IDENTITY_INSERT Labs ON;
INSERT INTO Labs
    (LabID, LabName, LabZone)
VALUES
    (1, 'North'     , 51),
    (2, 'North East', 51),
    (3, 'South West', 51);
SET IDENTITY_INSERT Labs OFF;

CREATE TABLE LabUsers
    (LabUserID int IDENTITY, LabUserName varchar(50), LabID int);

SET IDENTITY_INSERT LabUsers ON;
INSERT INTO LabUsers
    (LabUserID, LabUserName, LabID)
VALUES
    ( 1, 'Diana', 3),
    ( 2, 'Julia', 2),
    ( 3, 'Paula', 2),
    ( 4, 'Romeo', 1),
    ( 5, 'Julia', 3),
    ( 6, 'Rose' , 2),
    ( 7, 'Diana', 1),
    ( 8, 'Diana', 2),
    ( 9, 'Julia', 1),
    (10, 'Romeo', 3),
    (11, 'Paul' , 1);
SET IDENTITY_INSERT LabUsers OFF; 
```

脚本，注释，参数预先初始化了一些值：

```
/* script parameters */
DECLARE @zone     int         = 51;
DECLARE @maxLabs  int         = 3;
DECLARE @maxUsers int         = 4;
DECLARE @userName varchar(50) = 'Paul';

/* auxiliary variables */
DECLARE @defLabName varchar(50) = 'New Lab';
DECLARE @SelectedLab table (LabID int);

/* the main part begins */
WITH ZoneLabs AS (
  /* get labs for the specified @zone */
  SELECT LabID
  FROM Labs
  WHERE LabZone = @zone
)
, IncompleteLabs AS (
  /* get labs with the number of users < @maxUsers */
  SELECT LabID
  FROM LabUsers
  WHERE LabID IN (SELECT LabID FROM ZoneLabs)
  GROUP BY LabID
  HAVING COUNT(*) < @maxUsers
  UNION ALL
  /* …and add a new lab if the number of labs < @maxLabs */
  SELECT 0
  FROM ZoneLabs
  HAVING COUNT(*) < @maxLabs
)
, LabUsersAdjusted AS (
  /* get all existing users */
  SELECT LabUserID, LabUserName, LabID, 0 AS IsNew
  FROM LabUsers
  WHERE LabID IN (SELECT LabID FROM ZoneLabs)
  UNION ALL
  /* …and add the new user as a member of every incomplete lab
     unless the user is already a member */
  SELECT 0        , @userName  , LabID, 1
  FROM IncompleteLabs
  WHERE LabID NOT IN (SELECT LabID FROM LabUsers WHERE LabUserName = @userName)
)
, UsersGrouped AS (
  /* get labs along with their CSV-lists of users */
  SELECT
    LabID,
    OldUserCount = COUNT(NULLIF(IsNew, 1)),
    NewUserCount = SUM(IsNew),
    LabUsers = SUBSTRING(
      (
        SELECT ',' + LabUserName
        FROM LabUsersAdjusted
        WHERE LabID = lu.LabID
        ORDER BY LabUserName
        FOR XML PATH('')
      ),
      2,
      2147483647
    )
  FROM LabUsersAdjusted lu
  GROUP BY LabID
)
, SelectedLab AS (
  /* (the crucial part) get one of the (currently) incomplete labs
     where the new user is being added:
     - exclude every lab whose set of users is going to match that
       of any existing full lab;
     - prioritise remaining labs by:
       1) the number of users: more users = higher priority;
       2) the order of addition: older labs (those with lower IDs)
          = higher priority;
  */
  SELECT TOP 1 LabID
  FROM UsersGrouped new
  WHERE NewUserCount = 1
    AND NOT EXISTS (
      SELECT *
      FROM UsersGrouped old
      WHERE new.LabUsers = old.LabUsers
        AND old.OldUserCount = @maxUsers
    )
  ORDER BY
    OldUserCount DESC,
    LabID        ASC
)
/* merge the selected lab into the existing lab set */
MERGE INTO Labs
USING SelectedLab s ON (Labs.LabID = s.LabID)
WHEN MATCHED THEN  /* if there's a match, just do nothing */
  UPDATE SET @zone = @zone
WHEN NOT MATCHED THEN  /* when no match, add a new lab */
  INSERT (LabName, LabZone) VALUES (@defLabName, @zone)
/* in any event, remember the final LabID */
OUTPUT INSERTED.LabID INTO @SelectedLab (LabID)
;
/* add the new user as a member of the stored LabID;
   if no LabID was OUTPUT by MERGE, then @SelectedLab
   contains no rows and, consequently, no user gets inserted */
INSERT INTO LabUsers (LabUserName, LabID)
SELECT @userName, LabID FROM @SelectedLab
;
/* return the remembered LabID or 0 */
SELECT ISNULL((SELECT LabID FROM @SelectedLab), 0) AS Result; 
```

对于上面的示例和指定的参数值，脚本返回`0`. 使用参数和/或预先插入的数据来查看其他结果。

# php - 为动态控件创建javascript？

> ID：10695533
> 
> 赞同：0
> 
> 时间：2012-05-22T03:57:16.350
> 
> 标签：php, javascript, html, validation

我想创建一个 javascript 代码来验证我使用 php 和 html 从数据库创建的动态控件。在数据库中，我有一个包含问题和答案的表格，问题和选项（答案）是动态创建的。但我想用 javascript 验证这些控件，假设我有 100 个问题，我不想为每个问题创建 100 个不同的验证，更糟糕的是，如果将更多问题添加到数据库中，它们将被添加到页面中，但是我没有办法验证新答案。我怎样才能动态地创建 javascript 以及问题和答案？我希望这一切都有点意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:13:09.710

尝试实施以下步骤。

1.  您可以创建一个 javascript 函数，该函数将接收问题和答案作为参数。
2.  创建隐藏输入类型，并在您想要验证时（例如在提交事件中）将值分配给隐藏元素并调用该函数。
3.  在 javascript 函数中使用 AJAX 代码并使用您的服务器端脚本（例如 PHP、ASP、CGI）来实际验证您的问题和答案。
4.  服务器端脚本将返回响应，然后您可以在 html 页面上处理它。

# javascript - 浏览器中节点的 net.connect() ？

> ID：10695541
> 
> 赞同：1
> 
> 时间：2012-05-22T03:58:16.400
> 
> 标签：javascript, node.js, tcp, browserify

我想知道是否可以在浏览器中使用这个 node.js TCP 抽象？我现在正在研究 Browserify，但可能已经存在一些东西，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:28:42.080

[您可以使用 socket.io 和tcp.js](https://github.com/bgaff/tcp.js)代理 tcp 连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:20:26.033

你还不能在浏览器中使用普通的 TCP（这是一个 chrome 实验），你应该使用像[Socket.io](http://socket.io/)这样的模块，它就像 TCP，有像 TCP`socket.on("message")`这样的事件。

# iphone - 是否可以突出显示 NSString 或为字符串绘制一些颜色

> ID：10695543
> 
> 赞同：0
> 
> 时间：2012-05-22T03:58:27.650
> 
> 标签：iphone, ios, nsstring

我有这段代码来获取“。”之间的文本。例如，我有很多文本，例如 .1 这是第一个。2 这是第二个。3 这是第四个等等。当我点击第一个分机时，它会在日志中显示第一个文本。代码是

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{

    [NSTimer scheduledTimerWithTimeInterval:0.001 target:maintextview   selector:@selector(resignFirstResponder) userInfo:nil repeats:NO];
}

- (void)textViewDidEndEditing:(UITextView *)textView
{
    NSRange selectedRange = [textView selectedRange];
    NSString *backString = [maintextview.text substringToIndex:selectedRange.location];
    NSRange backRange = [backString rangeOfString:@"." options:NSBackwardsSearch];
    NSRange backRangee = [backString rangeOfString:@"." options:NSBackwardsSearch];
    int  myRangeLenght = backRangee.location - backRange.location;
    NSRange myStringRange = NSMakeRange (backRange.location, myRangeLenght);
    NSString *forwardString  = [maintextview.text substringFromIndex:backRange.location];
    NSLog(@"%@",[[forwardString componentsSeparatedByString:@"."] objectAtIndex:1]);

} 
```

forwadString 包含点击的文本，我只想突出显示该字符串或使用核心图形或类似的东西在该文本上方绘制颜色。可能吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:11:05.750

令我和其他许多人失望的是，Apple 选择在 iOS 3.2 之前不实现[NSAttributedString](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)，即便如此，所有标准 UI 元素都无法呈现它们！

幸运的是，少数、骄傲和勇敢的人响应了号召，[DTCoreText](http://cocoacontrols.com/platforms/ios/controls/nsattributedstring-additions-for-html)诞生了。

至于实际的选择，因为 UITextView 从 iOS 3.2 开始就符合 UITextInput，所以您可以使用和设置`selectedTextRange`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:21:24.337

不可能为 '着色' `NSString`，字符串只是字符的表示，它不包含字体、颜色或样式属性。相反，您需要为将文本绘制到屏幕的 UI 元素着色。

如果 forwardString 在 a 中，`UILabel`或者`UITextView`您可以通过设置`textColor`属性为其中的文本着色。例如，如果您有一个`UILabel`被叫`lbl`，您可以使用以下方法设置颜色：

```
lbl.textColor = [UIColor redColor]; 
```

# javascript - 是否可以在 html 的文本字段中显示图像？

> ID：10695544
> 
> 赞同：5
> 
> 时间：2012-05-22T03:58:33.103
> 
> 标签：javascript, jquery, html, css, web

我们可以在文本字段中显示图像`html`吗？

**编辑**

我想要做的是有一个`editable`区域，并想在`html`其中添加对象（即按钮，图像..等）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-22T04:00:04.963

**文本字段中的图像：**

你可以用 CSS 来做到这一点。

看这个例子：

[http://jsfiddle.net/oscarj24/zy7YP/1/](http://jsfiddle.net/oscarj24/zy7YP/1/)

**CSS：**

```
.icon {
    background:#FFFFFF url(http://icons.iconarchive.com/icons/gakuseisean/ivista-2/16/Start-Menu-Search-icon.png) no-repeat 4px 4px;
    padding:4px 4px 4px 22px;
    height:18px;
}​ 
```

**HTML：**

```
<input type="text" name="sample" class="icon">​ 
```

* * *

根据您的帖子编辑，也许这会有所帮助。

**内部有对象的可编辑区域：**

[http://jsfiddle.net/oscarj24/VSWNX/](http://jsfiddle.net/oscarj24/VSWNX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T16:39:07.860

如果您想使用 HTML，我想更好的方法是将图像保留在表单元素旁边，然后使用 css position:relative 属性将其放置在文本字段中。不优雅，但在大多数情况下都有效。

# javascript - 对数据库进行 AJAX 编辑时，我是否应该立即使用新数据更新界面

> ID：10695545
> 
> 赞同：7
> 
> 时间：2012-05-22T03:58:44.370
> 
> 标签：javascript, ajax, crud, user-experience, inline-editing

我正在使用 inline-edit 使用 AJAX 更新数据库中的文本。这基本上是一个过程，非常常见的东西：

*   文本不可编辑
*   我点击文本，它变成可编辑的
*   我输入新文本
*   然后单击以将更新的文本发送到数据库
*   然后将文本返回为不可编辑的格式

我的问题是什么时候应该用新数据更新界面？我应该在 ajax 调用之前立即更新它，还是应该等待更新响应从数据库返回？

我的顾虑：

*   如果我不立即更新接口并等待从数据库中获取响应，那么我就失去了 ajax 带来的异步好处。
*   但是如果我立即更新它，那么如果数据库响应有错误，我必须以某种方式跟踪我已经做出的更改，然后将其撤消，这需要更多的工作。

那么这种事情通常是怎么做的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:22:30.597

我认为等待响应并由于回调而更新是完全合理的。这样做不会减损异步方法。它仍然是完全异步的，因为您没有阻止整个页面或完全重新加载它。

在应用程序中很多次，尤其是在带宽可能有限的移动应用程序中，我会看到一个微调器，指示该字段正在提交。这不会阻碍应用程序的任何其他部分。当我使用移动视图时，甚至 stackoverflow 也会这样做。依靠回调以保持异步并仍与数据库返回值同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:16:25.387

AJAX 调用非常快，当然网络问题除外。就个人而言，我认为等待数据库的响应不会失去 AJAX 的好处。也就是说，除非您计划由于服务器端处理等而使其变慢...

现在，如果您要将文本字段设置为不可编辑状态，用户可能会认为他的更改已被接受，并且当服务器返回错误并且值恢复到其原始状态时会感到困惑。在服务器返回之前，我会让该字段保持可编辑状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T04:57:11.953

如果您使用的是 jQuery，这非常简单，但如果您使用的是自制的 ajax 调用脚本，则必须添加一些机制来查看一切是好是坏。

```
$.ajax({
 url: '/ajax/doSomething.php',
 type: 'POST',
 dataType: 'json',
 data: {
  'q': $("#editableText").val()
 },
 success: function(json) {
  $("#editableText").html(json.value);
 },
 error: {
  alert('something went wrong!');
 }
}) 
```

因此，当您的 doSomething.php 返回 true 或 false 时，我们的 ajax 调用会根据它执行某些操作。

是的，ajax 调用非常快，但是在更改页面上显示的数据之前，我想您必须确保一切正常，否则用户可能会在不知道他们是否完成编辑的情况下离开页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T17:45:15.257

您提到的案例是 Optimistic UI 更新。在这种情况下，您（隐含地）假设更新将在服务器上执行而没有任何错误。

这种方法的缺点是有以下情况

1.  用户点击不可编辑的文本
2.  文本变为可编辑
3.  用户输入新文本
4.  用户点击发送
5.  UI 更改为新文本并使其不可编辑
6.  用户在回复返回之前关闭浏览器窗口（或导航离开页面）（假设已执行更改）
7.  下次用户登录（或返回页面）时，他们对为什么更改不适用感到困惑！

但是，您还希望使用 ajax 的异步特性，并确保在执行此更改时用户仍然可以与您的应用程序（或页面的其余部分）进行交互。

我们这样做的方式（在我的工作场所）通常是（使用长轮询或 http 推送）

1.  用户与不可编辑的文本交互
2.  文本变为可编辑
3.  用户输入新文本
4.  用户点击发送
5.  我们不是乐观地更新文本，而是显示某种微调器（仅在文本上），向用户表明我们正在等待来自服务器的某种响应。请注意，由于我们只禁用显示此文本的页面部分，因此用户不必等待 ajax 调用返回即可与页面的其余部分进行交互。（实际上我们有很多案例支持并行更新页面的多个部分）。想想 gmail，您可能会在浏览器窗口中与某人聊天，同时您会收到一封电子邮件。聊天可以继续，电子邮件计数器也会增加。它们都在同一页面上但不相互依赖（或以任何方式相互等待）
6.  更新完成后，我们移除微调器（通常使用 css - 切换类显示）并用新文本替换元素的值。

最后，如果您正在执行此类操作，请确保您的服务器也支持向文本字段添加待处理类（这将导致出现微调器）。这样做的原因如下

1.  用户更新文本并提交
2.  用户立即导航到不同的页面
3.  然后用户再次回到原始页面（让我们假设更新尚未完成）
4.  由于您的服务器知道该字段正在更新，并且可以将待处理的 css 类添加到标签/显示字段，因此页面会加载一个微调器。（另一方面，如果没有挂起的请求，则不会显示微调器）
5.  最后，当长轮询消息从服务器返回时，微调器被取下并显示当前值

# jquery - 如何设置 $(this) 指的是什么？

> ID：10695550
> 
> 赞同：1
> 
> 时间：2012-05-22T03:59:21.707
> 
> 标签：jquery

jQuery 菜鸟在这里。

我有一个使用`$(this)`. 有没有办法让我从另一个处理程序调用这个处理程序并指定哪个元素`$(this)`指的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:01:06.880

是的，您可以使用`.apply`或`.call`javascript 函数来做到这一点。

像：

```
handlerName.apply(newScope, [param1, param2]); 
```

或者

```
handlerName.call(newScope, param1, param2); 
```

`newScope`那将在哪里`this`提到`handlerName`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:03:05.847

好的，`$(this)`在 jQuery 中只是确保所指向的内容`this`——也就是说，上下文中的当前对象——具有所有 jQuery 方法。但它仍然只是一个对象引用。听起来您想将其包装在一个闭包中并将其传递给下一个处理程序。

实际代码的示例会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T04:12:53.877

您也可以查看使用该[`jQuery.proxy()`](http://api.jquery.com/jQuery.proxy/)方法。

# python - 如何将测试动态添加到python unittest

> ID：10695551
> 
> 赞同：5
> 
> 时间：2012-05-22T03:59:29.720
> 
> 标签：python, unit-testing

我想建立一个`unittest`TestCase，其中一些案例是动态添加的。这些方法是从 my 中添加的`test_nothing`，但是`unittest`由于它只运行一个测试，所以没有考虑到它们。就好像我建造`test_xxxx`得太晚了，他们没有被看到。是不是`setUpClass`在游戏中执行得太晚了？我应该把它放在`__init__`构建我的方法中，然后调用`super().__init__`吗？

```
import unittest
import blognodes

class Test_base62(unittest.TestCase):
  testset = { 0: '0', 10: 'a', 61: 'Z', 62: '10', 3844: '100'}

  @classmethod
  def setUpClass(cls):
    cls.testme = 5
    print("i am the setUp function")
    for d, b62 in cls.testset.items():
      print("building the first set")
      cls.build_test_base62_values(d, b62)
      print("building the second set")
      cls.build_test_int_values(d, b62)

  @classmethod
  def build_test_base62_values(cls, d, b62):
    def f(cls):
      target = blognodes.base62(d)
      cls.assertEqual(target.str(), b62)
    fname = "test_base62_value_{}".format(d)
    setattr(cls, fname, f)

  @classmethod
  def build_test_int_values(cls, d, b62):
    def f(cls):
      target = blognodes.base62(d)
      cls.assertEqual(target.int(), d)
    fname = "test_int_value_{}".format(d)
    setattr(cls, fname, f)

  def test_nothing(self):
    print("i'm test nothing")
    t = dir(self)
    print(t)
    self.assertEqual(5, self.testme) 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T19:30:51.027

问题是来自 unittest 的加载器在实例化它之前在类上运行一个 dir() ，因此，在哪里创建你的方法并不重要`__new__`，，`__init__`等等`setUpClass`......这些方法创建得太晚了。

有两种方法可以解决这个问题，编写自己的 run() 方法，或者使用元类。前者意味着您必须重新编写已经在 unittest 中编写的发现。元类的实现实际上并不复杂。这是我所做的：

```
import unittest
import blognodes

class meta_Test_base62(type):
  testset = { 0: '0', 10: 'a', 61: 'Z', 62: '10', 3844: '100'}

  @classmethod
  def __prepare__(mcls, name, bases):
    d = dict()
    d['testme'] = 5
    for b10, b62 in mcls.testset.items():
      fname = "test_base62_value_{}".format(b10)
      d[fname] = mcls.build_test_base62_values(b10, b62)
      fname = "test_int_value_{}".format(b10)
      d[fname] = mcls.build_test_int_values(b10, b62)
    return d

  @classmethod
  def build_test_base62_values(cls, b10, b62):
    def f(self):
      target = blognodes.base62(b10)
      self.assertEqual(target.str(), b62)
    return f

  @classmethod
  def build_test_int_values(cls, b10, b62):
    def f(self): 
      target = blognodes.base62(b10)
      self.assertEqual(target.int(), b10)
    return f

class Test_base62(unittest.TestCase, metaclass=meta_Test_base62):

  def test_nothing(self):
    self.assertEqual(5, self.testme) 
```

# vbscript - 如何使用 vbscript 剥离元素并显示在消息框中？

> ID：10695553
> 
> 赞同：1
> 
> 时间：2012-05-22T03:59:35.037
> 
> 标签：vbscript

我想找到 2 年合同的价格并将其显示在消息框中。到目前为止，我有：

```
Dim MyPage
Dim Price
Set MyPage=CreateObject("Microsoft.XMLDOM")
MyPage.load("http://www.verizonwireless.com/b2c/store/controller?item=phoneFirst&action=viewPhoneDetail&selectedPhoneId=5723")
Wscript.Sleep 2000
Set Price = MyPage.getElementsByTagName("span")
For Each Elem In Price
   MsgBox(Elem.firstChild.nodeValue) 
Next 
```

我明白我完全错了，但我什至不知道从哪里开始。我喜欢编写这样的简单程序，但我只需要帮助开始。任何想法都会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:34:05.513

这里有一个更好的版本，使用 HTMLFile 对象

```
Dim HTMLDoc, XML, URL, table
Set HTMLDoc = CreateObject("HTMLFile")
Set XML = CreateObject("MSXML2.XMLHTTP")
URL = "http://www.verizonwireless.com/b2c/store/controller?item=phoneFirst&action=viewPhoneDetail&selectedPhoneId=5723"

With XML
  .Open "GET", URL, False
  .Send
  HTMLDoc.Write .responseText
End With

Set spans = HTMLDoc.getElementsByTagName("span")
for each span in spans
  WScript.Echo span.innerHTML
next

'=><SPAN>Set Location</SPAN>
'=>Set Location
'=><SPAN>Submit</SPAN>
'=>Submit
'=>Connect with us 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:11:23.777

您使用的控件用于读取 XML 文档，您需要这样的东西

```
'Create an xmlhttp object, the string depends on the version that is installed 
'on your pc could eg also be "Msxml2.ServerXMLHTTP.5.0"
Set xmlhttp = CreateObject("Microsoft.XMLHTTP")
xmlhttp.Open "GET", "http://admin:pasword@10.0.0.2/doc/ppp.htm", False 
xmlhttp.Send
text=xmlhttp.responseText
wscript.echo text
Set xmlhttp = Nothing 
```

在您的注册表中运行 XMLHTTP 搜索，以获取标识符的正确字符串/版本。

要从 html 中获取标签，您可以使用以下命令

```
text = "blabla <span>this is what i need</span> bla bla<span>second item</span> end"

function getElementsByTagName(sTextToSeachIn, tag)
  answer = ""
  separator = ""
  set oRegExpre = new RegExp
  with oRegExpre
    .IgnoreCase = true
    .Global = true
    .MultiLine = True
    .Pattern = "<" & tag & ">(.*?)</" & tag & ">"
  end with
  set oColMatches = oRegExpre.Execute(sTextToSeachIn)
  for each match in oColMatches
    answer = answer & separator & match.subMatches(0)
    separator = "|" 'use something that's not in the spancontents
  next
  if separator <> "" then
    getElementsByTagName = split(answer, separator)
  else
    getElementsByTagName = array()
  end if
end function

for each tag in getElementsByTagName(text, "span")
  wscript.echo tag
next

'=>this is what i need
'=>second item 
```

有比 vbscript 更好的技术和更好的语言来做到这一点，我建议看看 Ruby，它在这些事情上表现出色。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T08:11:16.140

亚历克斯，作为对您关于获取 cookie 并在 HTMLFile 中运行 javascript 的评论的回应，我在这里找到了一个 ruby​​ 脚本，希望它在某个时候对您有所帮助，它读入一个页面，将其传递给 HTLMFile 对象并在该 DOM 中执行一个远程 javascript 文件。它还让您了解 activeX 和 Ruby 的综合功能。

```
require "win32ole"

$jsxpath_uri = "http://svn.coderepos.org/share/lang/javascript/javascript-xpath/trunk/release/javascript-xpath-latest-cmp.js"
uri, xpath = "http://gist.github.com/gists", "//div[@class='info']/span/a"

http = WIN32OLE.new('MSXML2.XMLHTTP')
http.Open "GET", uri, false
http.Send
text = http.responseText

dom = WIN32OLE.new("htmlfile")
dom.Write(text)
dom.parentWindow.eval(open($jsxpath_uri){|f| f.read })

items = dom.evaluate(xpath, dom, nil, 7, nil)
len = items.snapshotLength
(0...len).each do |i|
  item = items.snapshotItem(i)
  puts item.innerHTML
end 
```

# 3d - 没有时，Maya 纹理显示褪色边缘

> ID：10695554
> 
> 赞同：0
> 
> 时间：2012-05-22T03:59:40.513
> 
> 标签：3d, textures, maya

我想我会尝试，即使这不是那么多代码，或者可能有 python 或 mel 解决方案。

在 Maya 中，我有 2 个单独的多边形。每个多边形都有一个纹理。这两个纹理实际上是一个纹理，我将其一分为二。在Photoshop中，没有接缝，一切看起来都很正常。

但是使用lambert 将文件加载到maya 中，会出现灰色边缘。我猜它的边框 <5 像素，但它进入了图像，所以我不能简单地移动 uv，因为我会丢失纹理中的数据。没有UV wrap，也没有镜面UV。我不能使用镜面UV，因为我们的后续流程无法识别镜面UV。

我不能做任何烘焙。

任何人都有一个想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:26:42.973

我得出的结论是，maya 的 mip 映射会导致灰色边缘出现问题。唯一的解决方案是结合纹理以形成更大的纹理。然后选择每组UV，改变原点以对齐选择和缩小的角落。将任何 UV 沿着接缝线合并，哇啦，无缝表面。

# c# - Windows 窗体模板化数据

> ID：10695560
> 
> 赞同：0
> 
> 时间：2012-05-22T04:00:08.853
> 
> 标签：c#, winforms

我正在开发一个包装 Lua 以实现与几何形状及其属性的交互性的应用程序，我即将完成，但是......在主窗口中，我有一个流程布局面板，应该显示所述形状的属性，正如 Lua 所指示的那样.

问题/问题来了，因为我不认为清除面板并重新添加代表每个属性的控件，每次我必须更新属性时都是一个好主意，也不是最有效的解决方案，有什么我可以做的吗增强这个？

# jvm - 用于解释 Java HelloWorld 字节码的 C 代码

> ID：10695564
> 
> 赞同：0
> 
> 时间：2012-05-22T04:00:24.103
> 
> 标签：jvm, interpreter, bytecode

什么是可以解释仅包含`System.out.print()`语句的 java 类文件（字节码）的简单 C/C++ 代码。（我查看了简单的开源 JVM，但由于完整性，它们有点复杂。）

或者我在哪里可以找到解释器制作指南（即 Java 字节码的解释）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:21:13.473

也许您正在寻找[*Java 虚拟机规范*](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)。

虽然您的问题一开始可能看起来微不足道，但这仅仅是因为 JVM 对即使是这样的简单类的内部方面的外观也非常好：

```
final class WorldGreeter {

    public static void main(final String[] argv) {
        System.out.println("Greetings, Earth!");
    }
} 
```

阅读规范的第五章，即[*加载、链接和初始化*](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html)，您会发现虚拟机必须做大量工作才能运行最简单的程序。

为了指出所有这些复杂阶段的必要性，我假设您使用的是标准的 Oracle JDK；根据[这篇博](http://luckytoilet.wordpress.com/2010/05/21/how-system-out-println-really-works/)文，您会认为 System.out 的初始化需要做很多工作——即加载几个不同的类，更重要的是一个工作的 JNI 层。

现在，您没有理由需要使用 Oracle JDK 实现......当然，您可以使用更简单的设置，但是加载、链接和初始化阶段的大部分结构和工作仍然有效。这并不像你的直觉告诉你的那么容易。

# c++ - C++ 上的链接列表

> ID：10695565
> 
> 赞同：-1
> 
> 时间：2012-05-22T04:00:41.277
> 
> 标签：c++, linked-list

我创建了一个列表并将一些值放入其中。我的列表将其内容复制到一个数组中，然后打印出来。我的问题是，如何删除我创建的列表？

这是我的代码：

```
void main()
{   
    std::list<char> list;

    while (1)
    {
        char in=0;
        while(1)
        {
            scanf("%c",&in);
            if(in=='\n') break;
            list.push_back(in);
        }
        char* array=new char[list.size()]; // create a dynamic array   
        list<char> first;
       std::copy(list.begin(),list.end(),array); // copy the data 
        for (int i=0 ; i<list.size() ; i++) printf("%c",array[i]);
                printf("\nsize of array is: %d\n", list.size());
                delete [] array; // destroy the dynamic array
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:07:55.550

试图猜测您的意思，我猜您希望名为“列表”的列表在每次外循环迭代后清除其内容。list.clear() 将这样做，将 list 的声明移动到外循环内。析构函数将正确释放您分配的任何资源，并且每次迭代都会有一个新实例。

# c++ - Eclipse CDT 没有识别特征类型的函数

> ID：10695567
> 
> 赞同：2
> 
> 时间：2012-05-22T04:00:58.193
> 
> 标签：c++, c++11, eclipse-cdt

我正在尝试将 C++11 项目导入 Eclipse。该代码是从现有的 Makefile 构建的，并且可以正常工作。我已经能够让 Eclipse 使用现有的 makefile，[这](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)也有助于在 eclipse 中获得 C++11 支持。我正在使用 eigen 库并设置了它的包含路径，并且 eclipse 能够识别 eigen 对象的类型。

Eclipse 无法识别递归包含的头文件中的所有类型和函数。

前者将自己表示为

```
a.b.c() 
```

并且 Eclipse 会声称方法 c 无法解析。这里 a 是一个结构， b 是一个特征类型。a 和 b 的类型被正确识别。这里 b 是 Vector2i，c() 是 Vector2i 上可用的函数 y()

后一个问题是我有一堆头文件需要包含在很多地方，所以我制作了一个包含它们的通用头文件，现在我只在所有地方都包含通用头文件。现在 eclipse 抱怨单个头文件中的函数声明没有得到解决。如果我单独包含头文件，那么eclipse就可以了，但我真的不想这样做。

我第一次使用 CDT，所以关于如何（或哪些）eclipse 设置检查/修复的任何想法都会很好。

# android - 我在 Textview 的 settext(charSeq) 方法上遇到空指针异常？

> ID：10695570
> 
> 赞同：1
> 
> 时间：2012-05-22T04:01:21.177
> 
> 标签：android, textview

我在下面给出了我的代码。我只想在android中创建一个自定义对话框。每当我点击按钮时，它都会显示一个自定义对话框。我已经创建了一个xml“alert.xml”。点击按钮后我会显示string.xml 中的内容

```
 public class TriangleActivity extends Activity implements View.OnClickListener{
            /** Called when the activity is first created. */
            private Button bt;
            private Dialog dialog;
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);
                bt=(Button) findViewById(R.id.button1);
                bt.setOnClickListener(this);
                //Context mContext = getApplicationContext();
                dialog = new Dialog(TriangleActivity.this);
                dialog.setContentView(R.layout.alert);
                dialog.setTitle("This is my custom dialog box");
                TextView t=(TextView) findViewById(R.id.tv1);

                t.setText(getString(R.string.h));

            }
            public void onClick(View v)
            {

                dialog.show();
            }
        } 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    >

    <Button
        android:id="@+id/button1"
        android:layout_width="60dp"
        android:layout_height="60dp"
        />

</LinearLayout> 
```

警报.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scrollbars="vertical" >

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollbarAlwaysDrawVerticalTrack="true" >
        <TextView 
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:id="@+id/tv1" >           

        </TextView>
    </LinearLayout>

</ScrollView> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>I am getting 
<resources>

    <string name="hello">Hello World, TriangleActivity!</string>
    <string name="app_name">Triangle</string>
     <string name="h">The Royal Society of Chemistry’s interactive periodic table which </string>

</resources> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T04:22:51.487

使用它来查找文本视图：

```
TextView t=(TextView)dialog.findViewById(R.id.tv1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:16:37.573

```
TextView t=(TextView)dialog.findViewById(R.id.tv1); 
```

这是你的解决方案老兄

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T04:22:20.053

修改你的 textView 初始化..因为它无法找到对话框视图..所以这样做 -

```
TextView t=(TextView)dialog.findViewById(R.id.tv1); 
```

希望对你有帮助..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T04:07:30.730

如果 t.setText(getString(R.string.h)); 正在抛出异常 NullPointerException，这意味着 t 或 getString(R.string.h) 为空。t 可能为 null，如果 main.xml 没有带有 id、@+id/tv1 的 TextView。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T04:52:42.317

TextView 文本 = (TextView)findviewByid(R.id.text1);

# qt - QT5 文本渲染问题

> ID：10695571
> 
> 赞同：2
> 
> 时间：2012-05-22T04:01:34.303
> 
> 标签：qt, qtwebkit, qt5

我在基于 MIPS 的平台上交叉编译了 QT5。每当我运行包括示例应用程序的应用程序（其中包含文本）时，它首先绘制文本，然后使用文本颜色的“矩形”填充绘制文本区域。

所以最后我在所有显示文本的地方都看到了一个黑色矩形。如果我改变文本颜色，矩形的颜色也会改变。有人遇到过这个问题吗？有什么建议么？

即使当我运行 qtwebkit 时，我也会看到那个 URL 部分，任何 HTML 页面中的文本都是用矩形填充绘制的。

谢谢

# xpages - xpages 验证数据库是否存在

> ID：10695573
> 
> 赞同：0
> 
> 时间：2012-05-22T04:02:17.673
> 
> 标签：xpages, xpages-ssjs

我是 javascript 和 xpages 的新手。我正在将旧的笔记应用程序升级到 xpages。在我的 xpage 中，我有一个字段、一个保存按钮和一个错误消息控件。该字段用于保存用户输入以供以后使用的 nsf 路径/名称的值（例如：//SAS/address.nsf）。如何验证该路径/数据库是否存在？以前的lotusscript是这样的（它使用2个字段，一个获取服务器路径，另一个获取db路径。但是对于当前的xpage，要求只使用一个字段）：

```
svr$= source.FieldGetText("ServerPath")
dbsvr$= source.FieldGetText("DBPath")
Dim db1 As New NotesDatabase(svr$ , dbsvr$)

If Not db1.IsOpen  Then
Messagebox "Cannot find the database."
Call source.GotoField("DBPath")
continue = False
Exit Sub
End If 
```

在 xpage 的字段中，我添加了一个 validateExpression 验证器。在表达式属性中，我计算以下 SSJS：

```
var dbdir:NotesDbDirectory = session.getDbDirectory(null);
var db:NotesDatabase = dbdir.openDatabase(document1.getItemValue("dbpath"));
return db.isOpen(); 
```

在验证器的消息属性中，我输入了“找不到数据库”。

我不断收到的错误是：

*   表达式无效。
*   表达式未返回布尔值。

有任何解决这个问题的方法吗？是验证器的错误使用吗？我已经在其他服务器上使用本地数据库和数据库进行了测试。似乎没有一个工作。我尝试过的所有这些数据库我都有权访问它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:50:12.120

您可能应该使用 sessionAsSigner 来打开数据库作为 XPage 的签名者 - 而不是匿名（如果您没有登录）。此外，考虑在 dbdir.OpenDatabase() 周围添加 try/catch 以捕获打开具有无效路径的数据库的错误。

此外，请注意 validateExpression 验证器必须返回布尔值 true 或 false。在您的情况下，如果无法打开数据库，则 dbdir.openDatabase() 将返回 null - 这意味着 db.isOpen() 将无法工作，因为它无法对 null 对象进行操作。

您可以考虑使用必须返回错误消息（而不是布尔值 true 或 false）的 customValidator 验证器。

我希望这可以帮助您完成验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:18:23.323

使用 try/catch 块尝试打开数据库。如果一切正常，只需在 try 块中返回 true。Catch 块将返回 false，它将处理大多数可能的失败：错误的服务器、断开的连接、无效的路径、无法访问等等。

`try {
// open database here and touch some property, doc count, for example
return true;
} catch (e) {
return false; // failed to open database
}`

# java - 为什么我的文件写入方法不起作用？

> ID：10695575
> 
> 赞同：0
> 
> 时间：2012-05-22T04:02:42.977
> 
> 标签：java, file, io, printwriter, bufferedwriter

这个方法应该写随机字符，但它根本不写任何东西。我可能在这里做一些愚蠢的错误，但对于我的生活，我找不到它。

```
public void writeRandomChunk(String fileName) {
    try {
        File saveFile = new File(folderName + '/' + fileName);

        PrintWriter writer = new PrintWriter(
                             new BufferedWriter(
                             new FileWriter(saveFile)));

        Random r = new Random(System.currentTimeMillis());

        for (int i = 0; i < chunkSize; i++) {
            for (int j = 0; j < chunkSize; j++) {
                writer.print((char)(r.nextInt(26) + 'a'));
            }
            writer.println();
        }

    } catch (Exception e) {
        System.out.println("Error in WorldFile writeRandomFile:\n"
                           + e.getLocalizedMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T04:07:56.673

与任何流一样（这适用于大多数任何语言），您需要在完成后关闭它。

流被优化为快速，因此，并非您写入它们的所有数据都会立即出现在文件中。当您[`close()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintWriter.html#close%28%29)或[`flush()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintWriter.html#flush%28%29)流时，数据将写入文件（或您正在使用的任何其他存储机制）。

在您的情况下，请尝试以下操作。

```
public void writeRandomChunk(String fileName) {
    PrintWriter writer = null;
    try {
        File saveFile = new File(folderName + '/' + fileName);
        writer = new PrintWriter(
                             new BufferedWriter(
                             new FileWriter(saveFile)));

        Random r = new Random(System.currentTimeMillis());

        for (int i = 0; i < chunkSize; i++) {
            for (int j = 0; j < chunkSize; j++) {
                writer.print((char)(r.nextInt(26) + 'a'));
            }
            writer.println();
        }

    } catch (Exception e) {
        System.out.println("Error in WorldFile writeRandomFile:\n"
                           + e.getLocalizedMessage());
    } finally {
        if (writer != null)
            writer.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:08:04.113

您需要在某个时候刷新（）和/或关闭（）文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T04:12:50.523

还没关完，作者终于试了。

```
finally  {
  writer.close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T04:17:46.133

你应该总是关闭你的流。与作家一起尝试这种模式：

```
PrinterWriter writer = null;
try {
    writer = new PrinterWriter(...);
    // do your write loop here.
} catch (Exception e) {
    // recover from exception.
} finally {
    if (writer != null) {
        writer.close();
    }
} 
```

# java - 网络不可达异常

> ID：10695576
> 
> 赞同：0
> 
> 时间：2012-05-22T04:02:48.393
> 
> 标签：java, facebook, tomcat, facebook-access-token

当我尝试通过`https://graph.facebook.com/oauth/access_token?client_id=xxx&client_secret=xxx8&grant_type=fb_exchange_token&fb_exchange_token=xxx`类 HttpClient 调用 facebook 时，我收到了类似`Exception: Network is unreachable`. 它以前工作，今天突然停止工作。我没有对我的代码和网络配置设置进行任何更改，我想知道可能是什么问题。当我检查日志时，错误是`Caused by: java.net.SocketException: Network is unreachable`.

如果我尝试`https://graph.facebook.com/oauth/access_token?client_id=xxx&client_secret=xxx8&grant_type=fb_exchange_token&fb_exchange_token=xxx`直接从浏览器调用 url，我可以获得 accesstoken。

我被困在这个问题上。提前谢谢。

异常堆栈跟踪如下。

```
at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.Socket.connect(Socket.java:507)
    at java.net.Socket.connect(Socket.java:457)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:157)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:365)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:477)
    at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:280)
    at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:337)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:176)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:736)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:162)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:133)
    at eqs.snp.util.HTTPRequestClient.setContent(HTTPRequestClient.java:132)
    at eqs.snp.sn.facebook.connector.FacebookAPI.refreshAccessToken(FacebookAPI.java:1750)
    at eqs.snp.sn.facebook.facade.FacebookFacade.getRegisterUser(FacebookFacade.java:262)
    at eqs.snp.sn.facebook.struts.action.FbUserAction.fbredirect(FbUserAction.java:195)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:440)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:279)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:163)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:249)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:148)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:93)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:128)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:104)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:148)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:128)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:468)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.valves.FastCommonAccessLogValve.invoke(FastCommonAccessLogValve.java:482)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:200)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:283)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:773)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:703)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:895)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:595) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:37:02.163

如果您运行的是 Debian，它可能与 IPv6 设置有关。根据[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=560044](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=560044)

> 包：sun-java6-jdk 版本：6-17-1 严重性：重要
> 
> Netbase 最近在 /etc/sysctl.d/bindv6only.conf 中引入了 sysctl-setting net.ipv6.bindv6only=1 ，这个设置可能是挤压中的默认设置。
> 
> 这个设置会破坏 java 中的网络，任何流量都会导致“java.net.SocketException: Network is unreachable”。
> 
> 它可能应该是一个 rc-bug，但现在设置很重要，因为用户可以轻松地纠正这个问题。
> 
> 快速修复受此影响的用户：
> 
> sudo sed -i 's/net.ipv6.bindv6only\ =\ 1/net.ipv6.bindv6only\ =\ 0/' \ /etc/sysctl.d/bindv6only.conf && sudo invoke-rc.d procps restart

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:05:22.577

问题是`jdk`在服务器上运行。也许某些文件已损坏。所以安装一个新的jdk并运行应用程序，它就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:18:14.990

您的环境中可能存在网络连接故障。我不确定您的电话是来自 PC 还是通过 WiFi 的移动应用程序。您别无选择，只能等到重新建立连接。

顺便说一句：来自浏览器和您的应用程序的调用是同时进行的吗？

`ping graph.facebook.com`或者，您可以使用等 检查网络连接的可用性。

[***您还可以在此处***](https://stackoverflow.com/a/6826494/767881)查看类似查询的解释。

# android - 用于直播电视频道流的 Youtube api

> ID：10695577
> 
> 赞同：0
> 
> 时间：2012-05-22T04:03:02.273
> 
> 标签：android, live-streaming, youtube-channels

我正在为 android 制作直播电视流媒体应用程序。是否有任何用于直播电视流媒体的 youtube api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:56:13.643

您可以在这里找到所有内容 [https://developers.google.com/youtube/2.0/developers_guide_protocol_retrieving_live_events](https://developers.google.com/youtube/2.0/developers_guide_protocol_retrieving_live_events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:06:07.123

他们确实有 Live 服务，但没有关于 API 的信息，因为它仅限于某些合作伙伴

**参考资料：**
[http ://www.youtube.com/live](http://www.youtube.com/live)
[http://youtube-global.blogspot.com/2011/04/youtube-is-going-live.html](http://youtube-global.blogspot.com/2011/04/youtube-is-going-live.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T10:27:42.987

一旦检查您的网络连接并重试，我认为您的互联网速度很高，您的问题将解决

# ios - 我应该如何在 iOS 中获取 App Store 应用评论信息？

> ID：10695580
> 
> 赞同：1
> 
> 时间：2012-05-22T04:03:08.953
> 
> 标签：ios, comments, app-store

> **可能重复：**
> [iTunes Connect API](https://stackoverflow.com/questions/1619172/itunes-connect-api)

我想在 iOS 中获取我的 App Store 应用评论或星级信息。

Apple 是否提供 API 来获取这些信息？

# java - 在 Windows 7 上使用自动安装 JDK 安装和配置 Jenkins

> ID：10695587
> 
> 赞同：3
> 
> 时间：2012-05-22T04:04:52.680
> 
> 标签：java, windows-7, jenkins, java-7

我正在浏览[jenkins-the-definitive-guide](http://www.wakaleo.com/books/jenkins-the-definitive-guide)。我已经使用 Windows 安装程序在 Windows 7 64 位上安装了 Jenkins。我已经配置了构建并设置 Jenkins 以在第一次构建时自动安装 JDK 7u3。当构建开始时，我在控制台日志中看到了这一点：

```
Started by user anonymous
Building in workspace C:\Program Files (x86)\Jenkins\workspace\gameoflife-default
Installing C:\Program Files (x86)\Jenkins\tools\JDK_7u3\jdk.exe 
[JDK_7u3] $ "C:\Program Files (x86)\Jenkins\tools\JDK_7u3\jdk.exe" /s /v /qn /L '\"C:\Program Files (x86)\Jenkins\tools\JDK_7u3\jdk.exe.install.log\"' REBOOT=ReallySuppress 'INSTALLDIR=\"C:\Program Files (x86)\Jenkins\tools\JDK_7u3\"' 
```

它永远不会超越这一点。

我尝试过： - 确保 exe 未被阻止 - 确保服务帐户具有管理员权限 - 尝试安装其他 JDK。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T19:11:49.440

JDK7的JDK自动安装出现错误，似乎：
[https ://issues.jenkins-ci.org/browse/JENKINS-5408](https://issues.jenkins-ci.org/browse/JENKINS-5408)

如果您尝试在命令行上运行该命令，则会出现`msiexec`对话框，这意味着参数不正确。由于我也遇到了这个问题，我去看看詹金斯实际通过了什么。它确实（在我们的例子中）：

```
c:\jenkins\tools\JDK\jdk-1.7.0_06\jdk.exe /s /v /qn /L \"c:\jenkins\tools\JDK\jdk-1.7.0_06\jdk.exe.install.log\" REBOOT=ReallySuppress INSTALLDIR=\"c:\jenkins\tools\JDK\jdk-1.7.0_06\" 
```

转义引号是旧式`msiexec`安装的保留，其中所有之后的内容`/v`都必须用单引号引起来，因为它们都被传递给其他东西。单引号转义已被删除，但实际语法也不再正确（安装程序已更改，选项也已更改）。问题是在`INSTALLDIR`变量中进行的引号转义。如果您删除它，它将进行安装（您可能仍然有一个 msiexec 进程挂起）。例子：

```
c:\jenkins\tools\JDK\jdk-1.7.0_06\jdk.exe /s /L \"c:\jenkins\tools\JDK\jdk-1.7.0_06\jdk.exe.install.log\" REBOOT=ReallySuppress INSTALLDIR=\"c:\jenkins\tools\JDK\jdk-1.7.0_06\" 
```

您可能可以走得更远，使用`/norestart`而不是设置 reboot 属性，具体取决于它是否受到尊重。

我提出的所有这些建议仍然没有解决实际问题，即“如何正确自动安装 JDK7”。如果您遇到此问题，我不知道您是否可以不手动完成安装然后在主配置中关闭自动安装。对我来说，清理缓存文件似乎没有帮助。

# mysql - 复杂的 MySQL 查询，离我很近，我能闻到它

> ID：10695591
> 
> 赞同：3
> 
> 时间：2012-05-22T04:05:37.187
> 
> 标签：mysql

我用我的模式和一些测试数据创建了一个[SQLFiddle](http://sqlfiddle.com/#!2/f25a6/2)（感谢[Amadan](https://stackoverflow.com/users/240443/amadan)！）。由于某种原因，计算的列在 SQLFiddle 中不起作用，但它们在我的 MYSQL Workbench 中运行良好。假设它们正常工作。

我的查询已经做到了这一点：

```
SELECT DISTINCT o.orderid,i.invoiceid,i.subinvoicenumber,stockingorderid AS oistockingorderid,

IF(stockingorderid > 0, 0, po.purchaseorderid) AS purchaseorderid,subponumber,po.paidvia,dropshipfee,i.taxstate,

COALESCE(
    (SELECT mfrname 
        FROM cs_products.tblstockingorders so 
        WHERE so.stockingorderid=oistockingorderid),
    po.mfrname)
AS source,

(i.shipping + i.surcharge + 
    (SELECT SUM(additionalshipping * quantity) AS additionalshipping 
        FROM cs_products.tblorderitems 
        WHERE invoiceid=i.invoiceid)) 
AS shipping,

CAST(IF(o.paymentmethod=2, CONCAT('Check: ', i.checknumber),o.paymentmethod) AS CHAR) AS invoicepaidvia,

COALESCE(
    (SELECT (SUM(cost * quantity) * IF(so.mfrdiscount > 0, 1 - so.mfrdiscount, 1)) AS cost 
        FROM cs_products.tblorderitems oi 
        JOIN cs_products.tblallocations a ON oi.orderitemid=a.orderitemid 
        JOIN cs_products.tblstockingorders so ON a.stockingorderid=so.stockingorderid
        WHERE a.stockingorderid=oistockingorderid),
    (SELECT (SUM(cost * quantity) * IF(po.mfrdiscount > 0, 1 - po.mfrdiscount, 1)) AS cost 
        FROM cs_products.tblorderitems 
        WHERE purchaseorderid=po.purchaseorderid)) 
    AS grosscost,

(SELECT SUM(price * quantity)
    FROM cs_products.tblorderitems 
    WHERE invoiceid=i.invoiceid) 
AS grossprice

FROM cs_products.tblorders o 
    JOIN cs_products.tblinvoices i ON o.orderid=i.orderid
    #ordertype of 0 means the order came from the website
    LEFT JOIN cs_products.tblpurchaseorders po ON o.orderid=po.orderid AND IF(o.ordertype<>0, subinvoicenumber=subponumber, subinvoicenumber=0 AND subponumber>=0)
    LEFT JOIN cs_products.tblallocations a ON a.orderid=o.orderid 
```

这让我到达那里的 95%。正如您所看到的，对于`OrderId`1287，它显示了两条带有`stockingorderid`s 的记录，而没有一条带有 a 的记录，`purchaseorderid`即使采购订单已归属于 1287。我期望看到的缺失行类似于：

```
1287|276|0|NULL|194|0||0|0|'Quality Fabricators'|357.53|0|781.43|11917.70 
```

同样，不要担心计算列，我只希望记录出现。我觉得我错过了最小的东西，但我不知道它是什么。

谢谢！

**更新**计算列不起作用的原因是因为使用了旧的订单项目数据。有机会我会更新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:09:49.863

我建议您使用`NULL`（而不是`0`）分别表示PO 和 SO 记录的`stockingorderid`and ：`purchaseorderid`

```
ALTER TABLE tblorderitems MODIFY purchaseorderid int(10) unsigned NULL;
UPDATE tblorderitems SET purchaseorderid = NULL WHERE purchaseorderid = 0; 
```

然后，您可以将查询与`UNION`提供一组所有 ( *order* , *stockingorder* ) 和 ( *order* , *purchaseorder* ) 对的子查询连接：

```
 SELECT orderid, stockingorderid, NULL AS purchaseorderid FROM tblallocations
UNION ALL
  SELECT orderid, NULL AS stockingorderid, purchaseorderid FROM tblpurchaseorders 
```

我认为您的查询可以简化为：

```
SELECT   orderid, invoiceid, subinvoicenumber, purchaseorderid, subponumber,
         tblpurchaseorders.paidvia, dropshipfee, tblinvoices.taxstate,
         invoicedate, datepaid, stockingorderid,

         COALESCE(tblstockingorders.mfrname, tblpurchaseorders.mfrname) AS source,

         shipping + surcharge + SUM(quantity * additionalshipping) AS shipping,

         CASE paymentmethod
           WHEN 2 THEN CONCAT('Check: ', checknumber)
           ELSE CAST(paymentmethod AS CHAR)
         END AS InvoicePaidVia,

         (1-COALESCE(tblstockingorders.mfrdiscount, tblpurchaseorders.mfrdiscount))
           * SUM(quantity * cost) AS grosscost,

         SUM(quantity * price) AS grossprice

FROM     tblorders
  JOIN   tblinvoices          USING (orderid)
  JOIN (
          SELECT orderid, orderitemid, stockingorderid, NULL AS purchaseorderid
          FROM   tblallocations
        UNION ALL
          SELECT orderid, NULL, NULL, purchaseorderid
          FROM   tblpurchaseorders
       ) AS t                 USING (orderid)
  LEFT JOIN tblpurchaseorders USING (orderid,purchaseorderid)
  LEFT JOIN tblstockingorders USING (stockingorderid)
  LEFT JOIN tblorderitems     USING (orderid,orderitemid,invoiceid,purchaseorderid)
WHERE    ordertype = 0 OR subinvoicenumber = subponumber
GROUP BY orderid, invoiceid, subinvoicenumber, purchaseorderid, subponumber,
         tblpurchaseorders.paidvia, dropshipfee, tblinvoices.taxstate, datepaid,
         invoicedate, stockingorderid, shipping, surcharge, paymentmethod,
         tblstockingorders.mfrname, tblpurchaseorders.mfrname, checknumber,
         tblstockingorders.mfrdiscount, tblpurchaseorders.mfrdiscount 
```

[在sqlfiddle](http://sqlfiddle.com/#!2/f25a6/77)上查看它，删除了对`invoicedate`列的引用（因为它不存在于您的示例架构中）。

# spring-security - 使用多个数据库时，Grails 2 无法使用 Spring Security 登录

> ID：10695592
> 
> 赞同：3
> 
> 时间：2012-05-22T04:05:38.640
> 
> 标签：spring-security, multiple-databases, grails-2.0

在 Grails 2.0.3 上，我安装了 Spring Security Core 并按照教程创建了 User、UserRole 和 Role 对象：http: [//blog.springsource.org/2010/08/11/simplified-spring-security-with-grails /](http://blog.springsource.org/2010/08/11/simplified-spring-security-with-grails/)

一切都很好，直到我决定添加第二个数据源以准备访问来自不同数据库的对象。DataSource.groovy 看起来像这样：

```
test {
    dataSource_product {
        dbCreate = "update"
        url = "jdbc:mysql://localhost/products"
        pooled = true
        driverClassName = "com.mysql.jdbc.Driver"
        username = "blah"
        password = "blah"
        loggingSql = true
        dialect = 'org.hibernate.dialect.MySQL5InnoDBDialect'
    }
    dataSource {
        dbCreate = "update"
        url = "jdbc:mysql://localhost/core"
        pooled = true
        driverClassName = "com.mysql.jdbc.Driver"
        username = "blah"
        password = "blah"
        loggingSql = true
        dialect = 'org.hibernate.dialect.MySQL5InnoDBDialect'
    }
} 
```

现在我无法登录 - 即使我所做的只是添加 datasource_product。如果我将此注释掉并重新创建用户（在 Bootstrap.groovy 中），那么我可以再次登录。Bootstrap.groovy 包含：

```
def init =
{ servletContext ->

    // Add in roles
    Role.withTransaction { 
        def adminRole = Role.findByAuthority ( Role.ROLE_ADMIN ) ?: new Role ( authority: Role.ROLE_ADMIN ).save ( failOnError: true )

        def adminUser = User.findByUsername ( 'admin' ) ?: new User (
                username: 'blah',
                password: 'blah',
                enabled: true ).save ( failOnError: true )
        if ( !adminUser.authorities.contains ( adminRole ) ) UserRole.create ( adminUser, adminRole )
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T12:10:11.200

啊啊啊。发现这个： http: [//jira.grails.org/browse/GRAILS-8237](http://jira.grails.org/browse/GRAILS-8237) - 显然，beforeInsert 被每个数据源的每个域调用。这意味着，在我的 User 对象中 encodePassword 被调用了两次——我对密码进行了双重编码：

```
def beforeInsert() {
    encodePassword()
}

def beforeUpdate() {
    if (isDirty('password'))
        encodePassword()
}

protected void encodePassword() {
    password = springSecurityService.encodePassword(password)
} 
```

我在 JIRA 中看到了一个补丁，但在它发布之前，我使用 isPasswordEncoded 标志创建了一个解决方法，以防止用户中的多个编码：

```
class User {
    boolean isPasswordEncoded = false
....snip....
    def beforeInsert() {
        if ( !isPasswordEncoded )
        {
            isPasswordEncoded = true
            encodePassword ()
        }
    }

    def beforeUpdate() {
        if (isDirty('password')) {
            isPasswordEncoded = false
            encodePassword()
        }
    }
....snip....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T11:51:45.600

原始答案发布的代码解决方案不适用于更新。并且也不考虑对同一对象实例的多次更新。我对插入和更新操作使用单独的标志，将它们标记为瞬态以便它们不会被持久化，并使用 afterUpdate() 事件处理程序来重置这些标志。

```
 static transients = ['beforeInsertRunOnce','beforeUpdateRunOnce']
    boolean beforeInsertRunOnce
    boolean beforeUpdateRunOnce

    def beforeInsert() {
        if (! beforeInsertRunOnce) {
            beforeInsertRunOnce = true
            encodePassword()
        }
    }

    def afterInsert() {
        beforeInsertRunOnce = false
    }

    def beforeUpdate() {
        if (isDirty('password') && ! beforeUpdateRunOnce ) {
            beforeUpdateRunOnce = true
            encodePassword()
        }
    }

    def afterUpdate() {
        beforeUpdateRunOnce = false
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-05T11:16:12.953

我确实有类似的问题。是因为我忘记添加了

```
grails.plugin.springsecurity.userLookup.userDomainClassName ='yourpackage.User'
grails.plugin.springsecurity.userLookup.authorityJoinClassName =yourpackage.UserRole'
grails.plugin.springsecurity.authority.className ='yourpackage.Role' 
```

之后，身份验证工作。

# alfresco - 如何使用 Alfresco 在指定文件夹中搜索文档

> ID：10695600
> 
> 赞同：2
> 
> 时间：2012-05-22T04:06:46.690
> 
> 标签：alfresco

我想搜索指定文件夹中的文档。我的意思是，如下例所示，搜索 mainfolder1 的文档。我怎样才能做到这一点？？可以用lucene吗？？我知道 lucene 可以指定商店。我不知道文件夹。

-->公司首页

---->主文件夹1

------->doc1

------->doc2

---->主文件夹2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T04:43:48.730

好像

```
+PATH:"/app:company_home/cm:mainfolder1//." 
```

是您在搜索表达式中想要的。

关于 Alfresco 搜索的完整详细信息，特别是在路径查询中，位于[http://wiki.alfresco.com/wiki/Search#Path_Queries](http://wiki.alfresco.com/wiki/Search#Path_Queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T16:13:39.783

正确的是

路径：“/app:company_home/cm:mainfolder1/*”

因为您不需要搜索任何深度的节点，而只需搜索主文件夹 1 的直接子节点。

您可以在此处找到其他说明

[http://alfrescoblog.com/2014/07/09/alfresco-lucene-tutorial/](http://alfrescoblog.com/2014/07/09/alfresco-lucene-tutorial/)

# android - MSISDN : 是 SIM 卡数据吗？为什么获取 MSISDN 的所有提供的功能（来自 Blackberry 和 Android）都不可靠？

> ID：10695601
> 
> 赞同：15
> 
> 时间：2012-05-22T04:06:54.690
> 
> 标签：android, blackberry, phone-number, sim-card, msisdn

我有几个关于 MSISDN 的问题。我明白：

1.  MSISDN 基本上是电话号码
2.  不是IMSI

我需要进一步了解的是：

1.  MSISDN 号码是否被烧毁（存储）在 SIM 卡中？如果是，是否所有提供商都确保 SIM 卡中有 MSISDN 信息？如果不是，需要澄清一下，没有任何编程代码可以获取 MSISDN 号码？

2.  有些人建议按照以下代码获取 MSISDN。但如果设备中未设置“我的电话号码”，则这两个代码都返回 null。相反，如果设置了，它将返回“我的电话号码”。因此，问题是：“我的电话号码”等于 MSISDN？

    `TelephonyManager.getLine1Number();` --> 对于安卓

    `Phone.getDevicePhoneNumber(true);` --> 对于黑莓

3.  如上面的代码，返回的字符串数据是从设备本身还是从 SIM 卡中获取的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-21T09:45:24.887

我对你有一些了解。

1.  MSISDN*可以*存储在 SIM 卡上，但是大多数网络提供商（所有南非的提供商）不会将 MSISDN 存储在 SIM 卡上。这有几个原因，最值得注意的是：
    *   动态 MSISDN 分配：预付费 SIM 在首次使用时有时会分配一个 MSISDN。这意味着网络有一个可用的 MSISDN 池，并在新的预付费 SIM 上线时分配它们。这意味着在运送 SIM 卡时，它们还没有 MSISDN，这意味着您无法在运送 SIM 卡之前存储 MSISDN。一些网络在一段时间不活动后“过期” MSISDN 分配，尤其是当它们的可用号码运行不足时，并将这些号码返回到可用池。
    *   移动号码可携带性：一些国家允许移动用户保留其 MSISDN，但更改网络。这意味着 MSISDN 将从用于 1 个网络的 SIM 转移到用于另一个网络的 SIM。

因此，用户经常以 SIM 上的 MSISDN 条目为空白而告终。用户仍然可以将 MSISDN 存储在自己的 SIM 卡上，但这也允许他们存储任意号码，并且不能保证设置或什至是用户的实际电话号码。

   2.您询问的那些电话获取存储在 SIM 卡中的号码。如果未设置号码，您将不会得到它，如果用户设置了错误的号码，那么您将获得不正确的详细信息。

   3\. 正确，此字符串是从 SIM 卡本身获取的。

当移动运营商在标头中包含 MSISDN 时，我检测 MSISDN 的唯一半可靠方法是通过 WAP/WEB（您可以做一些 webview 技巧来查看正在通过的标头） - 但是您只能在网络上看到这些支持它，如果用户使用移动数据 - 即如果用户使用 WiFi，它将无法工作。

我能想到的另一种机制（我能想到的唯一有保证的机​​制）是通过 USSD 会话，因为您总是从运营商那里获得正确的 MSISDN，但我还没有找到一种以编程方式打开 USSD 会话并阅读的方法响应（至少在 Android 中）。我有一个 USSD 服务，它的唯一输出是 MSISDN，但不幸的是，这还没有证明对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:44:19.997

由于在您发布问题后的最后一个小时内没有人回复，所以这是我所知道的（虽然我不是这方面的专家，只是有一些经验）：

1.  MSISDN 是电话号码；人们可以打电话给你的号码。
2.  它不能“烧”到 sim 卡中，因为您可以更改 sim 卡（升级或更改为其他运营商）并保留您的电话号码 = MSISDN。我认为运营商有一个映射表，可以在进行呼叫/数据传输时从 sim 卡 ID 转换为 MSISDN 并返回。MSISDN 可能存储在卡上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T14:42:09.590

您应该考虑到 MSISDN 具有 BIGINT 类型。因此输出它提前进行类型转换，像这样

# php - 类存在检查比较

> ID：10695607
> 
> 赞同：0
> 
> 时间：2012-05-22T04:07:49.480
> 
> 标签：php, comparison

这种比较之间有区别吗？有什么区别！和 === 假？

```
if (!class_exists($class)) {
  require($class.'.php');
}

if (class_exists($class) === FALSE) {
  require($class.'.php');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:11:33.473

在这种情况下，没有。

有些人认为明确表明他们正在与布尔值进行比较是一种很好的编程风格。就个人而言......我不喜欢它，但我想更冗长的形式更明显，因为！运算符在括号和其他垂直字符之间粉碎时不是最明显的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T04:31:20.450

是的，两者都是不同的东西：

php 自动将 0 视为“假”，将 1 视为“真”，因此当您直接在 if 条件内使用函数响应时，这两者都会有所不同。

考虑一个函数，如果正确执行它会返回 int 数。它也可能是0。但是，如果函数不符合要求，则返回 false。

所以此时函数返回值0就是成功。事件虽然结果为零。在这个如果你检查这个如果条件像

```
$return = someFunction();

if($return){
  //code if ture
} 
```

因此，如果 $return 为 0，即使您的函数执行正确，您的 if 代码也不会执行，因此在这种情况下，您应该检查一下

```
$return = someFunction();

if($return !== FALSE){
  //code if ture
} 
```

=== 和 !== 也用于检查响应是否完全匹配返回类型。

```
if('0' === 0) 
```

将返回 false 但

```
if('0' == 0) 
```

将返回真...

希望你的想法现在很清楚。

看一下这个：

```
if('0' == 0){
    echo 'Hi, I will be in screen :)';
}

if('0' === 0){
    echo 'I will not be in screen :(';
} 
```

# c# - 将列表分配给列表框时，对象引用未设置为对象异常的实例

> ID：10695611
> 
> 赞同：2
> 
> 时间：2012-05-22T04:07:58.730
> 
> 标签：c#, winforms, list, nullreferenceexception

我编写了以下方法来加载具有尚未加载的值的列表框，但是在分配以下内容时，我得到的对象引用未设置为对象异常的实例。任何信息都有帮助。谢谢。

```
lbxCabinetName.Items.Add(cabinetsCurrentNotUsed[i].ToString());

// Defined outside a method
List<string> cabinetsCurrentNotUsed; 

// Set value in the constructor
cabinetsCurrentNotUsed = new List<string>(); 
```

这是整个过程。

```
 private void selectCabinetToAdd()
    {

        // Loop through all server and form cabinet types to see if there are matches
        for (int x = 0; x < opticalFile.serverCabinetNames.Count; x++)
        {
            bool cabinetExists = false;
            for (int i = 0; i < opticalFile.CabinetValues.Count; i++)
            {
                if (opticalFile.serverCabinetNames[x].ToString() == opticalFile.CabinetValues[i].ToString())
                {
                    cabinetExists = true;
                }
            }
            // Add cabinets not used to cabinetsCurrentNotUsed List
            if (!cabinetExists)
            {
                cabinetsCurrentNotUsed.Add(opticalFile.serverCabinetNames[x].ToString());
            }
        }

        // Send cabinetsCurrentNotUsed List to list box
        for (int i = 0; i < cabinetsCurrentNotUsed.Count; i++)
        {
            lbxCabinetName.Items.Add(cabinetsCurrentNotUsed[i].ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:46:06.777

您正在尝试将 null 添加到列表框。

安装在

```
for (int i = 0; i < cabinetsCurrentNotUsed.Count; i++)
{
     lbxCabinetName.Items.Add(cabinetsCurrentNotUsed[i].ToString());
} 
```

利用

```
foreach (string s in cabinetsCurrentNotUsed)
{
    if(s != null)
          lbxCabinetName.Items.Add(s);
} 
```

**笔记**

这部分与问题无关。但是在设置后的内部 for 循环中，`cabinetExists = true;`您可以跳出内部循环（如果满足至少一个条件，您可以确保 cabinetExists 为真。您不必检查内部循环中的其余项目）

**编辑**

```
private void selectCabinetToAdd()
{
        foreach (string sc in serverCabinetNames)
        {
            bool cabinetExists = false;
            foreach (string cv in CabinetValues)
            {
                if (sc == cv)
                {
                    cabinetExists = true;
                    break;
                }                    
            }

            if (!cabinetExists)
            {
                cabinetsCurrentNotUsed.Add(sc);
            }

        }

        foreach (string ccnu in cabinetsCurrentNotUsed)
        {
            if (ccnu != null)
                lbxCabinetName.Items.Add(ccnu);
        }
   } 
```

此外，如果您的 listBox 可以为空，请确保在填充列表框之前先检查它。

```
if(lbxCabinetName != null)
{
    selectCabinetToAdd();
} 
```

**编辑 2**

动态添加控件

```
ListBox lbxCabinetName = new ListBox();
lbxCabinetName.Location = new System.Drawing.Point(10, 55);
lbxCabinetName.Size = new System.Drawing.Size(130, 95);
this.Controls.Add(lbxCabinetName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:17:30.257

字符串是可以为空的，所以在某些时候你必须做类似的事情：

```
cabinetsCurrentNotUsed.Add(null); 
```

要么，要么正如 dbaseman 所说，它可能`lbxCabinetName`是空的，但我敢打赌，情况并非如此。

顺便说一句，这并不是一个真正的问题，但如果您使用的是通用字符串列表，`ToString()`则不需要调用。你可以这样做：

```
lbxCabinetName.Items.Add(cabinetsCurrentNotUsed[i]); 
```

# java - 得到奇怪的时间，比如 csv 文件的输出

> ID：10695619
> 
> 赞同：0
> 
> 时间：2012-05-22T04:09:13.910
> 
> 标签：java

我的输出没有问题 我得到的输出看起来像这样 01:08.0 02:07.6 03:07.1 04:07.1 05:07.4 06:07.2 07:07.6 08:07.1 09:07.1 10:07.2 当我点击on 给了我相应的时间。输出实际上应该看起来像这样 1:8.035156,2:7.619141,3:7.105469,4:7.072266 只有当我在 append 语句的末尾添加“，”字符时才会发生错误的输出。

```
public class GeneCsv {
 public static void main(String[]args) throws IOException{
File file = new File("file.csv");
FileWriter writer = new FileWriter("/Users/home/fileExpression.csv");
PrintWriter pw = new PrintWriter(writer);
Scanner in = new Scanner(file);
boolean firstLine = true;
String[] temp = null;
while(in.hasNextLine()){
    if(firstLine== true){

        pw.println(in.nextLine());
        firstLine= false;
        continue;
    }
    else{
    String line = in.nextLine();
    temp = line.split(",");
    for(int i =0; i < temp.length ; i++){
        pw.append(i + ":" + temp[i] + ",");

    }
    pw.append("\n");
    }
    }

pw.flush();
pw.close();
writer.close();
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:37:34.197

除了换行之外，如果要保留逗号，则需要像这样附加它，`pw.print(i + ":" + temp[i] + ",")` 因为拆分数组不会保留拆分器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:36:16.960

您永远不会向 pw 打印新行。在 for 循环之外做一个`pw.print("\n");`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T04:41:51.823

我从您的问题中了解到的是，您需要在单独的行中打印每个逗号分隔值。

为此，只需在循环`"\n"`外打印一个换行符：`for`

```
for(int i =1; i < temp.length ; i++){
   pw.print(i + ":" + temp[i]);    
}
pw.print("\n"); 
```

希望这可以帮助！

# php - 在 Chrome 中显示为空

> ID：10695620
> 
> 赞同：8
> 
> 时间：2012-05-22T04:09:44.237
> 
> 标签：php, html, character-encoding, meta-tags, html-head

使用最新版本的 Google Chrome 浏览我的网站并使用 F12 查看源代码时，和之间的所有内容都`<head>`显示为`</head>`空。在 Firefox 和 IE 的最新版本中，一切都正常显示。

实际上内容被移动到谷歌浏览器的正文中。

这显然不是 CSS 问题。我正在使用 Twitter Bootstrap CSS 和 JS，以及一个 MVC PHP 框架。有人有提示吗？

这是我的 document.html 页面：

```
<!DOCTYPE html>
<html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<title><?php echo (Template::$titre); ?></title>

<?php foreach(Template::$meta as $key=>$value): ?>
        <meta name="<?php echo $key; ?>" content="<?php echo $value; ?>" />
<?php endforeach; ?>

<link rel="shortcut icon" href="<?php echo WEB; ?>assets/style/favicon.ico" type="image/x-icon" />  

<link rel="stylesheet" href="<?php echo WEB; ?>assets/style/bootstrap.min.css" />   
<link rel="stylesheet" href="<?php echo WEB; ?>assets/style/bootstrap-responsive.min.css" />    
<link rel="stylesheet" href="<?php echo WEB; ?>assets/style/main.css" />    
<link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head> 
<body>
<?php require Template::child(); ?>
(...) 
```

Firebug查看的源代码：

```
<html lang="fr"><head></head><body>?

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Vélos d'occasion dans toute la France</title>
<meta name="keywords" content="velos d'occasion, velos dans toute la France, velos occasion Toute la france, velo occasion, velo">
<meta name="description" content="Petites annonces de velos d'occasion dans toute la France, velo d'occasion à vendre Toute la france">

<link rel="shortcut icon" href="/assets/style/favicon.ico" type="image/x-icon"> 

<link rel="stylesheet" href="/assets/style/bootstrap.min.css">  
<link rel="stylesheet" href="/assets/style/bootstrap-responsive.min.css">   
<link rel="stylesheet" href="/assets/style/main.css">   
<link href="http://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css">

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<section id="maincontainer">
<div class="container">
(...) 
```

**编辑：问题解决了，记事本++是用UTF8编码的，我改成ANSI并且工作正常。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T04:49:10.723

您的文档开头有某种格式错误的字符。

我通过 W3C 验证器运行了您的页面，它显示：

> 错误第 1 行，第 1 列：在没有先查看文档类型的情况下找到非空格字符。预期`<!DOCTYPE html>`。

[http://validator.w3.org/check?uri=http%3A%2F%2Fveloccasion.net%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fveloccasion.net%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

这似乎导致 Chrome 放弃您的文档类型并以 Quirks 模式呈现页面，您可以通过有趣的按钮和文本字段高度看到。尝试在 DOCTYPE 之前删除任何奇怪的东西（或删除 DOCTYPE 并重新输入）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:21:10.423

要以 Elijah 的回答为基础，请使用 CTRL+U 在 chrome 和 firefox 上查看源代码。

我刚刚检查了 chrome，它不是空的。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<title>Veloccasion - V&eacute;los d'occasion dans toute la France</title>
<meta name="keywords" content="velos d'occasion, velos dans toute la France, velos occasion Toute la france, velo occasion, velo" />
<meta name="description" content="Petites annonces de velos d'occasion dans toute la France, velo d'occasion &agrave; vendre Toute la france" />
<meta name="author" content="Veloccasion.net" />

<link rel="shortcut icon" href="/assets/style/favicon.ico" type="image/x-icon" />   

<link rel="stylesheet" href="/assets/style/bootstrap.min.css" />    
<link rel="stylesheet" href="/assets/style/bootstrap-responsive.min.css" /> 
<link rel="stylesheet" href="/assets/style/main.css" /> 
<link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T04:45:59.540

我找到了！

在 chrome 中按 CTRL+SHIFT+I，

...在`<body>`标签之后有一行很多空白文本。找到它，然后删除它，空白就消失了。不知道是什么原因造成的，因为我没有你的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T04:18:01.843

F12 不是查看源代码。F12 是 dom 检查器。有没有可能你只是看到头塌了？这是默认显示的方式。

编辑：

发现你的问题：

```
 <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'> 
```

那个标签没有关闭。你需要结束它`/>`

编辑：

可能是您`/>`在此行之前需要一个空格：

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-22T04:26:30.977

希望能帮助到你

下面的行

```
<link href="http://fonts.googleapis.com/css?family=Lobster"
 rel="stylesheet" type="text/css 
```

注意“？” 在其中尝试删除此行并查看源代码

# javascript - 如何在 node.js 中强制调用同步

> ID：10695621
> 
> 赞同：2
> 
> 时间：2012-05-22T04:10:14.050
> 
> 标签：javascript, node.js, mongodb, express

请看下面的代码片段。我希望只有在获得第一个查询的结果后才执行第二个 MongoDB 查询。但正如您可以想象的那样，它不会按照那个顺序发生。

```
db.collection('student_profile', function (err, stuColl) {
  //This if-else can be refactored in to a seperate function
  if (req.params.stuId == req.header('x-stuId')) {
    var stuInQuestion = student;
  } else {
    var stuInQuestionId = new ObjectID.createFromHexString(req.params.stuId);
    stuColl.findOne({
      '_id': stuInQuestionId
    }, function (err, stuInQuestionObj) {
      if (!stuInQuestionObj) {
        process.nextTick(function () {
          callback(null);
        });
      } else {
        var stuInQuestion = stuInQuestionObj;
      }
    });
  }

  stuColl.find({
    '_id': {
      $in: stuInQuestion['courses']
    }
  }).limit(25).sort({
    '_id': -1
  }).toArray(function (error, courses) {
    if (error) {
      process.nextTick(function () {
        callback(null);
      });
    } else {
      process.nextTick(function () {
        callback(courses);
      });
    }
  });
}); 
```

那么我在这里的选择是什么？

1.  有没有办法以不需要任何控制流库的方式对此进行编码？如果是的话，有人可以告诉我怎么做吗？

2.  如果这确实需要使用控制流库，我应该使用哪一个？异步，FuturesJs，还有什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T04:30:33.497

您不需要任何控制流库，因为这些库只是在后台使用回调。

尝试这样的事情：

```
db.collection('student_profile', function (err, collection) {

  // Suppose that `firstQuery` and `secondQuery` are functions that make your
  // queries and that they're already defined.
  firstQuery(function firstCallback(err, firstRes) {

    // Do some logic here.

    // Make your second query inside the callback
    secondQuery(function secondCallback(err, secondRes) {
      // More logic here
    });
  });
}); 
```

基本上，您要做的是从第一个查询的回调中调用您的第二个查询。

这可能会让你觉得嵌套很深。如果这成为一个问题，您可以通过定义函数而不是内联所有函数以及将逻辑包装在模块中来缓解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:26:50.243

我会创建一个`findStudent`函数并让两种情况都调用它：

```
db.collection('student_profile', function (err, stuColl) {
  //This if-else can be refactored in to a seperate function
  if (req.params.stuId == req.header('x-stuId')) {
    return findStudent(student);
  } else {
    var stuInQuestionId = new ObjectID.createFromHexString(req.params.stuId);
    stuColl.findOne({
      '_id': stuInQuestionId
    }, function (err, stuInQuestionObj) {
      if (!stuInQuestionObj) {
        process.nextTick(function () {
          callback(null);
        });
      } else {
        return findStudent(stuInQuestionObj);
      }
    });
  }

  function findStudent(stuInQuestion) {
    stuColl.find({
      '_id': {
        $in: stuInQuestion['courses']
      }
    }).limit(25).sort({
      '_id': -1
    }).toArray(function (error, courses) {
      if (error) {
        process.nextTick(function () {
          callback(null);
        });
      } else {
        process.nextTick(function () {
          callback(courses);
        });
      }
    });
  }
}); 
```

# facebook-c#-sdk - 获取当前 facebook 用户 id

> ID：10695623
> 
> 赞同：0
> 
> 时间：2012-05-22T04:10:28.137
> 
> 标签：facebook-c#-sdk

我正在尝试让当前的 facebook 用户获得一个未托管在 .NET 页面中的 Silverlight 游戏，而只是一个 html 页面。silverlight 游戏将使用他们的 id 作为提交高分的凭证。

我不希望他们使用我的应用程序登录 Facebook。我希望他们在我的应用程序之外登录到 Facebook。然后我的应用程序使用 Graph API 的 .Get("me") 进行检查。但是，.Get("me") 总是返回 null。即使 facebookClient 有 App 访问令牌或 appid+secret。

我正在使用 C# facebook sdk 版本 5.4.1.0（用于 SL4 支持）。

这就是我尝试使用 appid+secret 的方式：

```
 var app = new Facebook.FacebookClient(appId, appSecret);
        app.GetCompleted += new EventHandler<Facebook.FacebookApiEventArgs>(app_GetCompleted);
        app.GetAsync("me");
    }

    void app_GetCompleted(object sender, Facebook.FacebookApiEventArgs e)
    {
        //the value of me below is always null
        var me = e.GetResultData() as IDictionary<string, object>;
        string id = (string)me["id"];
    } 
```

根据其他网站，应用程序访问令牌应该足以获取当前 facebook 用户的 id：

*   [Facebook C# SDK 获取当前用户](https://stackoverflow.com/questions/10094652/facebook-c-sharp-sdk-get-current-user)
*   [http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)
*   [Facebook C# sdk - FacebookApp.Get("me") 是访问 Facebook 还是仅访问 cookie？](https://stackoverflow.com/questions/4730468/facebook-c-sharp-sdk-does-the-facebookapp-getme-access-to-facebook-or-just)
*   [获取当前用户的 UserId 的最佳方法是什么](https://stackoverflow.com/questions/5240935/what-is-the-best-way-to-get-the-userid-of-the-current-user)
*   [Facebook C# SDK 和访问令牌](https://stackoverflow.com/questions/5171309/facebook-c-sharp-sdk-and-access-token)

我在做什么错/误解来获取当前的 facebook 用户 ID？

**编辑：**调试信息

Fiddler2 结果 404：

```
 "message": "(#803) Some of the aliases you requested do not exist: clientaccesspolicy.xml",
  "type": "OAuthException",
  "code": 803 
```

Fiddler2 结果 400：

```
 "message": "An active access token must be used to query information about the current user.",
  "type": "OAuthException",
  "code": 2500 
```

FacebookApiEventArgs e.Error.Message：

```
Value cannot be null.  Parameter name: stream 
```

FacebookApiEventArgs e.Error.StackTrace：

```
at System.IO.StreamReader..ctor(Stream stream, Encoding encoding, Boolean detectEncodingFromByteOrderMarks, Int32 bufferSize, Boolean leaveOpen)
   at System.IO.StreamReader..ctor(Stream stream)
   at Facebook.FacebookClient.ProcessResponse(HttpHelper httpHelper, Stream responseStream, Type resultType, String& responseStr, Exception& exception, Boolean& cancelled) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:36:04.647

使用 Facebook C# sdk：

```
string signedRequest = Request.Form["signed_request"];
var DecodedSignedRequest = FacebookSignedRequest.Parse(Facebook.Web.FacebookWebContext.Current.Settings.AppSecret, signedRequest);
dynamic SignedRequestData = DecodedSignedRequest.Data;
accessToken = (String)SignedRequestData.oauth_token;
var app = new FacebookWebClient();
var me = (IDictionary<string, object>)app.Get("me");
firstName = (string)me["name"];
U_Id = (string)me["id"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:44:13.053

在执行上述代码时尝试运行 Fiddler。然后，您可以期待 Facebook 的回复。例如，Facebook OAuthExceptions。

[http://www.fiddler2.com/fiddler2/version.asp](http://www.fiddler2.com/fiddler2/version.asp)

# regex - UNIX：使用 sed 消除和替换字符串中的内容？

> ID：10695624
> 
> 赞同：0
> 
> 时间：2012-05-22T04:10:30.023
> 
> 标签：regex, string, unix, sed, awk

我有一个字符串，可以说：

```
<lic><ic>This is a string</ic>, welcome to my blog.</lic> 
```

我想使用 sed 摆脱`<ic>`and`</ic>`标签，以及文字标签`<lic>`和`</lic>`

最快的方法是什么？我对 sed 很陌生。这将如何在 awk 中完成？我知道 awk 对于类似列的文本要好得多，所以我更倾向于学习如何使用 sed。

任何帮助总是很感激，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:18:57.010

仅删除标签：

```
sed -i.old -r 's;</?l?ic>;;g' infile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T04:21:33.450

```
sed -e 's%</\{0,1\}l\{0,1\}ic>%%g' 
```

这是在 PCRE中编写等价物`\{0,1\}`的标准方式。正则表达式用于分隔位；然后在每行输入中全局查找可能后跟一个斜线，可能后跟一个，然后将其替换为空。`sed``?``%``<``l``ic>`

某些版本`sed`允许您指定正则表达式的替代系统，但这适用于任何地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T04:56:10.960

`sed`不需要很复杂。这里有两种简单的方法来做你想做的事。

这匹配那些确切的模式并在全局范围内删除它们：

`sed -e "s%\(<lic>\|</lic>\|<ic>\|</ic>\)%%g" file.txt`

请记住，`sed`如果需要，您可以使用以下方法设置多个表达式：

`sed -e "s%<lic>%%" -e "s%</lic>%%" -e "s%<ic>%%" -e "s%</ic>%%" file.txt`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T04:19:17.260

您的标签具有左括号结构，后跟许多不是右括号的字符，最后是右括号。所以让我们这样写：

```
sed 's/<[^>]*>//g' 
```

# node.js - Express中使用的参数“next”是什么？

> ID：10695629
> 
> 赞同：362
> 
> 时间：2012-05-22T04:11:38.293
> 
> 标签：node.js, express

假设您有一个简单的代码块，如下所示：

```
app.get('/', function(req, res){
    res.send('Hello World');
}); 
```

该函数有两个参数，`req`和`res`，分别代表请求和响应对象。

另一方面，还有其他带有第三个参数的函数`next`。例如，让我们看看下面的代码：

```
app.get('/users/:id?', function(req, res, next){ // Why do we need next?
    var id = req.params.id;
    if (id) {
        // do something
    } else {
        next(); // What is this doing?
    }
}); 
```

我不明白它的意义`next()`是什么或为什么要使用它。在那个例子中，如果 id 不存在，那么`next`实际上在做什么？

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2012-05-22T04:26:39.667

它将控制权传递给下一个**匹配**的路由。例如，在您给出的示例中，如果给出了 an，您可能会在数据库中查找用户`id`，并将其分配给`req.user`.

下面，你可以有这样的路线：

```
app.get('/users', function(req, res) {
  // check for and maybe do something with req.user
}); 
```

由于 /users/123 将首先匹配您示例中的路线，因此将首先检查并找到 user `123`；然后`/users`可以对结果做点什么。

[不过，在我看来，路由中间件](https://expressjs.com/en/guide/routing.html)是一种更灵活、更强大的工具，因为它不依赖于特定的 URI 方案或路由顺序。我倾向于对这样显示的示例进行建模，假设`Users`模型具有 async `findOne()`：

```
function loadUser(req, res, next) {
  if (req.params.userId) {
    Users.findOne({ id: req.params.userId }, function(err, user) {
      if (err) {
        next(new Error("Couldn't find user: " + err));
        return;
      }

      req.user = user;
      next();
    });
  } else {
    next();
  }
}

// ...

app.get('/user/:userId', loadUser, function(req, res) {
  // do something with req.user
});

app.get('/users/:userId?', loadUser, function(req, res) {
  // if req.user was set, it's because userId was specified (and we found the user).
});

// Pretend there's a "loadItem()" which operates similarly, but with itemId.
app.get('/item/:itemId/addTo/:userId', loadItem, loadUser, function(req, res) {
  req.user.items.append(req.item.name);
}); 
```

能够像这样控制流量非常方便。您可能希望某些页面仅对具有管理员标志的用户可用：

```
/**
 * Only allows the page to be accessed if the user is an admin.
 * Requires use of `loadUser` middleware.
 */
function requireAdmin(req, res, next) {
  if (!req.user || !req.user.admin) {
    next(new Error("Permission denied."));
    return;
  }

  next();
}

app.get('/top/secret', loadUser, requireAdmin, function(req, res) {
  res.send('blahblahblah');
}); 
```

希望这能给你一些启发！

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2016-06-25T15:59:33.133

我也有理解 next() 的问题，但这[有](http://qnimate.com/express-js-middleware-tutorial/)帮助

```
var app = require("express")();

app.get("/", function(httpRequest, httpResponse, next){
    httpResponse.write("Hello");
    next(); //remove this and see what happens 
});

app.get("/", function(httpRequest, httpResponse, next){
    httpResponse.write(" World !!!");
    httpResponse.end();
});

app.listen(8080); 
```

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2018-03-20T15:17:16.320

在理解之前*`next`*，你需要对 node 中的 Request-Response 循环有一点了解，虽然不是很详细。它从您对特定资源发出 HTTP 请求开始，并在您向用户发送回响应时结束，即当您遇到类似 res.send('Hello World'); 之类的东西时。

让我们看一个非常简单的例子。

```
app.get('/hello', function (req, res, next) {
  res.send('USER')
}) 
```

这里我们不需要 next()，因为 resp.send 会结束循环并将控制权交还给路由中间件。

现在让我们看另一个例子。

```
app.get('/hello', function (req, res, next) {
  res.send("Hello World !!!!");
});

app.get('/hello', function (req, res, next) {
  res.send("Hello Planet !!!!");
}); 
```

在这里，我们有 2 个用于同一路径的中间件函数。但你总是会得到第一个的回应。因为它首先安装在中间件堆栈中， res.send 将结束循环。

但是，如果我们总是不想要“Hello World !!!”怎么办？回复。在某些情况下，我们可能需要“Hello Planet !!!” 回复。让我们修改上面的代码，看看会发生什么。

```
app.get('/hello', function (req, res, next) {
  if(some condition){
    next();
    return;
  }
  res.send("Hello World !!!!");  
});

app.get('/hello', function (req, res, next) {
  res.send("Hello Planet !!!!");
}); 
```

在这里做什么`next`。是的，你可能有猜测。如果条件为真，它将跳过第一个中间件函数并调用下一个中间件函数，您将得到`"Hello Planet !!!!"`响应。

因此，接下来将控制权传递给中间件堆栈中的下一个函数。

如果第一个中间件函数没有发回任何响应但确实执行了一段逻辑，然后你从第二个中间件函数得到响应怎么办？

如下所示：-

```
app.get('/hello', function (req, res, next) {
  // Your piece of logic
  next();
});

app.get('/hello', function (req, res, next) {
  res.send("Hello !!!!");
}); 
```

在这种情况下，您需要调用两个中间件函数。因此，到达第二个中间件函数的唯一方法是调用 next();

> 如果您不拨打下一个电话怎么办。不要期望第二个中间件函数会自动调用。调用第一个函数后，您的请求将被挂起。第二个函数永远不会被调用，你也不会得到响应。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-04-14T19:58:10.713

Next 用于将控制权传递给下一个中间件函数。如果不是，该请求将被挂起或打开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-01T11:40:15.913

我还想补充一下为什么`express`不调用下一个中间件并让我们控制它。由于 node 是异步的，如果 express 调用下一个中间件而不等待某个异步调用完成，则响应可能不完整或包含错误，因此用户可以控制何时调用下一个中间件函数。

# android - Android中的ANR keyDispatchingTimedOut

> ID：10695633
> 
> 赞同：2
> 
> 时间：2012-05-22T04:12:34.703
> 
> 标签：android, android-anr-dialog

```
DALVIK THREADS:
"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x2aae0900 self=0xcec8
  | sysTid=4608 nice=0 sched=0/0 cgrp=default handle=1876209304
  at android.media.MediaPlayer.setDataSource(Native Method)
  at android.media.MediaPlayer.create(MediaPlayer.java:662)
  at org.android.PeruLink.android_PeruLink.createSoundEffectPlayerAndPlaySound(android_PeruLink.java:368)
  at org.android.PeruLink.android_PeruLink.onClick(android_PeruLink.java:745)
  at android.view.View.performClick(View.java:2414)
  at android.view.View$PerformClick.run(View.java:8838)
  at android.os.Handler.handleCallback(Handler.java:587)
  at android.os.Handler.dispatchMessage(Handler.java:92)
  at android.os.Looper.loop(Looper.java:123)
  at android.app.ActivityThread.main(ActivityThread.java:4680)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:521)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
  at dalvik.system.NativeStart.main(Native Method)

"Binder Thread #3" prio=5 tid=11 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x2fed0158 self=0x13eed8
  | sysTid=4620 nice=0 sched=0/0 cgrp=default handle=3163808
  at dalvik.system.NativeStart.run(Native Method)

"DispatcherThread" prio=5 tid=10 WAIT
  | group="main" sCount=1 dsCount=0 s=N obj=0x2fe975a8 self=0x2f3848
  | sysTid=4618 nice=0 sched=0/0 cgrp=default handle=3094920
  at java.lang.Object.wait(Native Method)
  - waiting on <0x2fe9bf38> (a android.os.MessageQueue)
  at java.lang.Object.wait(Object.java:288)
  at android.os.MessageQueue.next(MessageQueue.java:146)
  at android.os.Looper.loop(Looper.java:110)
  at android.os.HandlerThread.run(HandlerThread.java:60)

"Thread-10" prio=5 tid=9 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x2fe858b8 self=0x2ad978
  | sysTid=4617 nice=0 sched=0/0 cgrp=default handle=2741680
  at dalvik.system.NativeStart.run(Native Method)

"CookieSyncManager" prio=5 tid=8 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 s=N obj=0x2fe86888 self=0x145e90
  | sysTid=4616 nice=10 sched=0/0 cgrp=bg_non_interactive handle=2597608
  at java.lang.Object.wait(Native Method)
  - waiting on <0x2fe74bc0> (a android.os.MessageQueue)
  at java.lang.Object.wait(Object.java:326)
  at android.os.MessageQueue.next(MessageQueue.java:142)
  at android.os.Looper.loop(Looper.java:110)
  at android.webkit.WebSyncManager.run(WebSyncManager.java:90)
  at java.lang.Thread.run(Thread.java:1096)

"WebViewCoreThread" prio=5 tid=7 WAIT
  | group="main" sCount=1 dsCount=0 s=N obj=0x2fe817f8 self=0x262ff8
  | sysTid=4614 nice=0 sched=0/0 cgrp=default handle=2502968
  at java.lang.Object.wait(Native Method)
  - waiting on <0x2fe81ae0> (a android.os.MessageQueue)
  at java.lang.Object.wait(Object.java:288)
  at android.os.MessageQueue.next(MessageQueue.java:146)
  at android.os.Looper.loop(Looper.java:110)
  at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:665)
  at java.lang.Thread.run(Thread.java:1096)

"Binder Thread #2" prio=5 tid=6 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x2fe553c0 self=0x134580
  | sysTid=4613 nice=0 sched=0/0 cgrp=default handle=1267984
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=5 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x2fe55300 self=0x12d7b8
  | sysTid=4612 nice=0 sched=0/0 cgrp=default handle=1241448
  at dalvik.system.NativeStart.run(Native Method)

"Compiler" daemon prio=5 tid=4 VMWAIT
  | group="system" sCount=1 dsCount=0 s=N obj=0x2fe4e2a0 self=0x134a10
  | sysTid=4611 nice=0 sched=0/0 cgrp=default handle=1299968
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=3 RUNNABLE
  | group="system" sCount=0 dsCount=0 s=N obj=0x2fe4e1e8 self=0x133c60
  | sysTid=4610 nice=0 sched=0/0 cgrp=default handle=1287176
  at dalvik.system.NativeStart.run(Native Method)

"HeapWorker" daemon prio=5 tid=2 VMWAIT
  | group="system" sCount=1 dsCount=0 s=N obj=0x2e704b58 self=0x12f010
  | sysTid=4609 nice=0 sched=0/0 cgrp=default handle=1275152
  at dalvik.system.NativeStart.run(Native Method) 
```

由于我之前没有处理过这个问题，所以我无法提供太多细节，这是一个冻结，我想知道如何处理和解决这个问题。它说原因是 ANR keyDispatchingTimedOut

# asp.net - 从列表框的 onblur 调用 C# 函数

> ID：10695634
> 
> 赞同：0
> 
> 时间：2012-05-22T04:12:46.420
> 
> 标签：asp.net, listbox

如何调用 C#`onblur event`函数`listbox`？

我在用`listbox.Attributes.Add("onblur","CSharpfuncname")..`

请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:28:19.877

据我所知，您不能直接执行此操作（调用服务器端或 c# 函数 onblur 事件）当您查找没有任何与聚焦或模糊相关的事件的事件时，请参阅[MSDN FOR LISTBOX](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listbox.aspx) ，以实现这一点您有实现[页面方法](http://www.dotnetcurry.com/ShowArticle.aspx?ID=109)或[客户端](http://msdn.microsoft.com/en-us/library/ms178208.aspx) [回调](http://brijbhushan.net/2010/12/19/exploring-client-callback/)。查找有关页面方法和客户端回调的这三个链接，希望对您有所帮助。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:14:26.800

您可以进行 ajax 调用，进而可以调用您的 C# 方法

查询：

```
$("#listboxId").blur(function(){//Put your AJAX call here}); 
```

# matlab - 我可以根据 matlab 中的值构建渐变色表吗？

> ID：10695639
> 
> 赞同：6
> 
> 时间：2012-05-22T04:13:29.897
> 
> 标签：matlab, gradient, heatmap

我`24x2`在matlab中有一个矩阵。我需要在表格中表示这些数据，但还要确保每一行都根据第二列的值在颜色的各种色调（如热图）上着色。

是否有可以呈现此类表格图形的matlab函数？或者是否有任何其他语言或工具可以支持这种设施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T04:23:17.927

您可以使用[uitable](http://www.mathworks.nl/help/techdoc/ref/uitable.html)将矩阵显示为表格。它有一个[BackgroundColor 属性](http://www.mathworks.nl/help/techdoc/ref/uitableproperties.html#brf4_6l-1)，但只能为整个表格设置。

但是，您可以通过插入[此处](http://www.mathworks.com/matlabcentral/answers/25038-how-to-change-each-cell-color-in-a-uitable)描述的自定义 HTML 表格来解决此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:31:07.720

这是适用的属性列表：

[http://www.mathworks.com/help/techdoc/ref/uitableproperties.html](http://www.mathworks.com/help/techdoc/ref/uitableproperties.html)

使用句柄，您可以创建一个图形并制作单独的表格，每一列都有自己的 BackgroundColor 和 Position 属性。

这是一个图上有多个 uitables 的示例：

[在同一个图中显示多个合适的对象？](https://stackoverflow.com/questions/10438402/display-multiple-uitable-objects-in-the-same-figure)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T04:26:38.030

这是最终对我有用的方法。

[https://www.mathworks.com/matlabcentral/fileexchange/24253-customizable-heat-maps](http://mathworks.com/matlabcentral/fileexchange/)

我使用的技巧是我将第一列值作为每行的标签（类似于在 y 轴上给出标签），并让每个单元格通过颜色的色调来表示值。

例如：如果我们选择使用红色。单元格将被着色为深红色以表示高值，白色表示零值，并继续用于各种中间值。

这符合我的目的，并为我的工作提供了相当多的定制选项。

# mysql - 在 MySQL 中优先考虑左连接行

> ID：10695642
> 
> 赞同：2
> 
> 时间：2012-05-22T04:13:53.940
> 
> 标签：mysql, join

我正在处理 MySQL (5.5) 中的一些轻微扭曲的数据。我有一个用于跟踪状态（新、活动、非活动等）和“位置”更改的表，其中位置的格式为 x.0.y，x 和 y 为正整数。

我正在尝试将位置更改移动到单独的表中，但为此我需要从表中的其他记录中恢复完整的旧位置。完整的旧位置不会存储在位置更改记录中，如下所示：

```
id      status      new_loc     timestamp
--      ------      -------     ---------
5       1 -> 1      1.0.2       2012-05-21 00:00:00
5       new         1.0.1       2012-05-21 00:00:03
5       1 -> 2      2.0.1       2012-05-22 00:00:00
5       2 -> 3      3.0.1       2012-05-23 00:00:00 
```

因此，当位置发生变化时，所记录的只是完整的新位置和旧位置的第一部分（状态消息的左侧）。但是，我可以查看以前的记录以找到完整的旧位置。

我的主要问题是那里的第二排。“新”状态意味着 ID 为 5 的对象刚刚添加到数据库中。它应该始终是表中任何 id 的第一个状态。但是，在许多情况下，“新”记录在初始更改记录之后大约三秒被插入。在本例中，添加位置为 1.0.1，然后更改为 1.0.2，然后更改为 2.0.1，然后更改为 3.0.1。（编辑：真实的例子并不是这么简单或直接，但总是有一条人类可以很容易辨别的位置“路径”。）

我在尝试编写一个同时考虑第 1 行和第 3 行的查询时遇到了问题。我不能只找到最近的记录，因为它们可能是乱序的。我不能只使用与我的状态匹配的 new_loc 来获取记录，因为可能有多个匹配项。

这是我*认为*可行的方法：

1.  查找最近的先前位置更改（如果存在），并使用其 new_loc。
2.  如果不存在先前的更改，则查找该 id 状态为“新”的记录并使用其 new_loc。

我目前有一个与这两个条件都匹配的 LEFT JOIN，但我不知道如何说“如果没有匹配条件 1，则仅在条件 2 上加入”或“更喜欢在条件 1 上加入的行”。

我只是不知道该怎么做。任何帮助表示赞赏。

编辑：我应该明确 id 是一个对象 id，显然不仅仅是这个表上的一个索引。主键是 (id, status)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:11:25.317

让我确认一下我理解你想要做什么。在伪代码中，这会满足您的需求吗？

```
given
   table A (as in your answer)
   table B (objectid, old, new)
for any `id`
   get all rows
   order rows by `status` column such that 'new' is the first value, and then numerically
   take the location in the first `status` column c and insert it into table B with values id, 'new', (c).location
   for all remaining `status` fields selected: 
       for any field n, insert into table B with values id, (n-1).location, (n).location 
```

这应该可以通过存储过程实现......但编写代码可能会很痛苦。

# ruby-on-rails - rspec没有路由错误

> ID：10695643
> 
> 赞同：1
> 
> 时间：2012-05-22T04:13:57.543
> 
> 标签：ruby-on-rails, rspec, match, routes

我在 route.rb 中设置了如下路径： post "/orders/:id/capture/.:format"

但是当我写控制器的 rspec 帖子“捕获”时

我收到错误：“找不到路线 {:controller => :orders, :action => :capture}

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:53:16.113

这很可能是因为您没有传递订单的 ID。

除非满足所有条件，否则路由将不匹配。

在您的代码中，您有

```
 post "capture", :order => @order, :format => :json 
```

@order 设置了吗？

# java - 我可以在java中将一维数组存储到二维数组中吗？

> ID：10695648
> 
> 赞同：0
> 
> 时间：2012-05-22T04:14:24.007
> 
> 标签：java, arrays

当我发现netbeans给我一个关于以下代码的错误时，我正在编码：

```
String [][]table={getRowArray()};
//getRowArray() will return me a 1D string array 
```

有没有办法将我的方法返回的一维数组直接存储到二维数组中，而不是使用 for 循环？感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:24:33.373

对于初学者 - 是的，有可能做到这一点。

```
public class Test {
    public String[] dum() {
        String[] x = {"Not sure"};
        return x;
    }

    public static void main(String[] args) {
        Test t = new Test();
        String[][] words = {t.dum()};
        System.out.println(words[0][0]); // prints "Not sure"
    }
} 
```

仔细检查您遇到的错误。确保返回类型`getRowArray()`为 true `String[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:17:29.710

对此可能有更好的解决方案，但我相信您需要为其中一个维度指定单个索引才能存储它，因此您将一维数组存储到第一维的单个索引中。

IE

```
String [][]table;
table[0] = getRowArray(); 
```

这应该可以工作，因为数组的第一个维度存储其他数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T04:34:48.407

```
String [] oneD = { "1", "2", "3", "4" }; // getRowArray();
String [][] twoD1 = { oneD };
String [] anotherOneD = null; // or filled
String [][] twoD2 = { oneD, anotherOneD };
String [][] twoD3 = new String[][] { oneD };
String [][] twoD4 = new String[][] { oneD, anotherOneD }; 
```

# ipad - 使用 Xcode 在 html 中添加自定义标签

> ID：10695649
> 
> 赞同：0
> 
> 时间：2012-05-22T04:14:25.297
> 
> 标签：ipad, ios4, ios5, xcode4.2

我处于 iPad 应用程序的开发阶段，用户可以使用 uiwebview 的内容可编辑功能来编辑 html 内容。我的疑问是，是否有任何控件或第三方框架可用于通过 uiwebview 在 html 中添加自定义标签。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:35:44.407

您可以在 UIWebView 内的 HTML 页面中操作 DOM，并将您想要的任何内容添加到 dom。没有可用的 API 或框架。

您必须使用 javascript 执行此操作并使用

```
stringByEvaluatingJavaScriptFromString: 
```

# javascript - 在 SQL 数据库中存储带有函数的 Javascript 对象

> ID：10695651
> 
> 赞同：0
> 
> 时间：2012-05-22T04:15:13.610
> 
> 标签：javascript, jquery, sql, json

我正在开发一个 javascript 菜单（使用 jQuery）。

例如，下面是项目对象的结构，我将传递给我的自定义函数，然后创建菜单。

```
var items = {
    0: {
        name: 'file',
        submenu: {
            0: {
                name: 'open',
                hasSubitems: true,
                subitems: {
                    0: {
                        name: 'file',
                        hasSubitems: false,
                        callback: function() { alert('you opened a file!'); }
                    },
                    1: {
                        name: 'project'
                        hasSubitems: false,
                        callback: function() { alert('you opened a project!'); }
                    }
                }
            },
            1: {
                name: 'exit',
                hasSubitems: false,
                callback: function() { alert('you logged out!'); }
            }
        }
    },
    1: {
        name: 'edit',
        submenu: {
           ...
        }
    }
} 
```

我希望能够将上述内容存储到数据库中，包括他们的预期回调。我打算创建一个界面来动态构建菜单等。

我意识到我可以创建一个 JSON 字符串并以这种方式存储它，但是回调函数呢？有人多次建议我不要使用 eval，那么人们可以通过哪些其他方式安全地将这些信息存储在数据库中，以便以后调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:21:19.113

JSON 是语言中立的（尽管有名称），因此它只支持原始值。回调函数是特定于语言的（在本例中为 JavaScript），因此它们不能包含在任何需要解释为纯 JSON 的内容中。

我建议将你的回调代码从这里拉出来，而是包含你需要区分每个参数的必要参数。然后，通过 JS 模板引擎（如[Handlebars.js](http://handlebarsjs.com)）使用辅助函数而不是回调运行此 JSON 对象。可以使用用于替换（现在有效的）JSON 对象中的回调函数的参数调用这些。

# iphone - 如何从包含图像的 url 中仅检索图像的缩略图和原始大小？

> ID：10695655
> 
> 赞同：0
> 
> 时间：2012-05-22T04:15:29.857
> 
> 标签：iphone

我想制作一个工具来从我的 IOS 设备上运行的网站加载所有图像。但我想过滤掉那些小的图像。

所以，我必须获取图像的大小，如何从包含图像的 url 中检索图像的缩略图和原始大小？确保在加载整个图像后不要这样做，直接请求 url 获取这些数据。）

任何反馈或答案将不胜感激〜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:24:19.643

StackOverflow 并不是真正适用于这样的问题。相反，您需要分解问题。

1.  访问 URL 并下载数据。
2.  将该数据转换为图像类型，以便确定其尺寸
3.  丢弃任何两个大的图像。

我什至不看就知道有无数关于如何完成第 1 步的教程。第 2 步可能有点困难，但我对此表示怀疑。做一些谷歌搜索，尝试一些东西，然后如果你有更多问题再回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:15:32.037

如果不对 HTTP 请求标头进行更具体的访问，您可能无法做到这一点。这个想法是只下载足够的数据来访问存储图像大小的图像标题。但从那里开始，只有在图像格式支持的情况下，您才能真正限制传输的数据。换句话说，您需要采用隔行/逐行编码模式的 JPEG、GIF 或 PNG 才能完全限制数据。此外，您需要能够解码部分传输的图像。

如果您通过 HTML/JavaScript 执行此操作，那么答案会更短：不下载整个图像是不可能的。

# php - 删除具有“has_many”关系的子条目，1:many 关系

> ID：10695662
> 
> 赞同：0
> 
> 时间：2012-05-22T04:17:22.820
> 
> 标签：php, kohana, kohana-3

基于[http://kohanaframework.org/3.2/guide/orm/relationships](http://kohanaframework.org/3.2/guide/orm/relationships)

假设我有 2 个模型；有 1 个用户：许多帖子关系。如何删除选定用户的所有帖子？

**模型_用户**

```
 protected $_has_many = array('posts' => array()); 
```

**模型_帖子**

```
protected $_belongs_to = array(
    'user' => array(
        'foreign_key' => 'author_id',
    ),
); 
```

我试过`$user->posts->delete()`了，但它不起作用。

**编辑：**

只是想补充一点，`remove()`这实际上不适用于这种情况，只能用于`has_many 'through'`关系。

```
 * @param  string $alias    Alias of the has_many "through" relationship
 * @param  mixed  $far_keys Related model, primary key, or an array of primary keys
 * @return ORM
 */
public function remove($alias, $far_keys = NULL) 
```

*orm/classes/kohana/orm.php*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:34:46.130

你可以试试`$user->remove('posts');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:55:53.397

好吧，我发现这曾经有效。Kohana 3.2 不再...

`ORM::factory('posts')->where('user_id','=','1')->delete_all();`

这是我最接近使用 ORM 来实现我想要的东西。

我决定将我自己的 delete_all 添加到 Model_Post。所以我可以做到这一点`ORM::factory('posts')->delete_all($user_id)`

```
public function delete_all($author_id){
    DB::delete('posts')
        ->where('author_id','=',$author_id)
        ->execute();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T15:39:20.030

我刚刚遇到了与删除函数相同的问题，它只是没有用于 _has_many 关系，仅用于 has_many 通过，但它可以很容易地修复，我扩展了 ORM 模型并使用了以下函数：

```
public function remove($alias, $far_keys = NULL)
{
   $far_keys = ($far_keys instanceof ORM) ? $far_keys->pk() : $far_keys;

   if(NULL !== $this->_has_many[$alias]['through'])
   {
      $table_name = $this->_has_many[$alias]['through'];
   }
   else
   {
      $table_name = ORM::factory($this->_has_many[$alias]['model'])->table_name();
   }

   $query = DB::delete($table_name)
              ->where($this->_has_many[$alias]['foreign_key'], '=', $this->pk());

   if ($far_keys !== NULL)
   {
      // Remove all the relationships in the array
      $query->where($this->_has_many[$alias]['far_key'], 'IN', (array) $far_keys);
   }

   $query->execute($this->_db);

   return $this;
} 
```

# javascript - 在 sencha 的主视图中包含多个视图

> ID：10695665
> 
> 赞同：1
> 
> 时间：2012-05-22T04:17:32.003
> 
> 标签：javascript, iphone, model-view-controller, mobile, extjs

我需要做一个应用程序，其中有单独的模块，如用户、类别。我想为所有这些创建单独的视图，然后最后想调用主视图。我是煎茶的新手。这个怎么做？

```
Ext.application({
    name: 'AM',

    appFolder: 'app',

    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: [
                {
                   //need to replace this with app.views.userPage,how??????????
                    xtype: 'panel',
                    title: 'Users',
                    html : 'List of users will go here'
                },
                {
                    xtype: 'panel',
                    title: 'category',
                    html : 'List of category will go here'
                }

            ]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:15:08.087

在 github 上 Francis Shanahan 以 MVC 风格构建了一个简单的 sencha touch 2 应用程序，如果您可以按照他如何定义视图然后使用别名配置来定义自定义 xtypes 那么它应该回答您的问题。[https://github.com/FrancisShanahan/SenchaTouch2MVCHelloworld](https://github.com/FrancisShanahan/SenchaTouch2MVCHelloworld)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:11:26.940

```
you must have folder structure like that:
 -YourApp
   --app.js // here is your Ext.application
   --app
     --view
       --Users
       --Category
     --model
     --controller 
```

用户.js：

```
Ext.define('TheApp.view.Users', {
  extend: 'Ext.Panel',
  xtype: 'userspanel',
  config: {
    // here are some config opts...
  }
}); 
```

应用程序.js

```
Ext.application({
  name: 'TheApp',
  views: [
    'Users',
    'Category'
  ],
  viewport: {
    autoMaximize: true
  },

  launch: function() {
    Ext.Viewport.add({ xtype: 'userspanel' });
  } 
```

# windows - 用于基本安装的简单 NSIS 配方

> ID：10695674
> 
> 赞同：3
> 
> 时间：2012-05-22T04:19:35.170
> 
> 标签：windows, installation, nsis

我正准备为我正在开发的游戏开发我的第一个 Windows 安装程序。我听说过 NSIS 推荐，但我的需求是基本的，我无法弄清楚到底需要什么。

我想要一个简短的 NSIS 脚本，它可以在“程序文件”目录中安装文件目录（必要时请求权限），在“开始”菜单中创建一个简单的快捷方式，并在“添加/删除程序”控制面板中注册卸载程序.

卸载程序只会删除目录并删除快捷方式，如果文件正在使用，则会提示重新启动。

最后，我想通过卸载所有旧文件并安装新文件来支持升级，如果旧文件正在使用，则会提示用户重新启动。

我已经在网上看到了一些示例 NSH 脚本，这些脚本可以做一些零碎的工作；我正在尝试自己将它吊在一起，看起来它将有数百行长。我的代码闻起来像是错误的东西。

我描述的程序真的应该是数百行 NSH 吗？肯定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T04:55:26.887

[下载 Eclipse](http://eclipse.org/downloads/packages/eclipse-classic-372/indigosr2)，然后将[EclipseNSIS 插件](http://eclipsensis.sourceforge.net/index.shtml)安装到 Eclipse 中。这不仅为您提供了 NSIS 文件的全功能编辑器（具有代码完成等功能），而且还提供了一个**向导，**只需回答一些问题（应用程序标题、要使用的图标、... ）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:36:50.283

这应该非常接近（我没有测试这个脚本）你应该填写空白并替换某些字符串......

```
!define Name "Foo"
Name "${Name}"
Outfile "${Name} setup.exe"
RequestExecutionLevel admin ;Require admin rights on NT6+ (When UAC is turned on)
InstallDir "$ProgramFiles\${Name}"

!include LogicLib.nsh
!include MUI.nsh

Function .onInit
SetShellVarContext all
UserInfo::GetAccountType
pop $0
${If} $0 != "admin" ;Require admin rights on NT4+
    MessageBox mb_iconstop "Administrator rights required!"
    SetErrorLevel 740 ;ERROR_ELEVATION_REQUIRED
    Quit
${EndIf}
FunctionEnd

!insertmacro MUI_PAGE_WELCOME
!insertmacro MUI_PAGE_DIRECTORY
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_UNPAGE_CONFIRM
!insertmacro MUI_UNPAGE_INSTFILES
!insertmacro MUI_LANGUAGE "English"

Section
SetOutPath "$INSTDIR"
WriteUninstaller "$INSTDIR\Uninstall.exe"
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Foo By Bar Inc."   "DisplayName" "${Name}"
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Foo By Bar Inc."   "UninstallString" "$INSTDIR\Uninstall.exe"
;TODO: Install your files with the File command
CreateShortCut "$SMPROGRAMS\${Name}.lnk" "$INSTDIR\Foo.exe"
SectionEnd

Section "Uninstall"
;TODO: Delete your files
Delete "$SMPROGRAMS\${Name}.lnk"
DeleteRegKey HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\Foo By Bar Inc."
Delete "$INSTDIR\Uninstall.exe"
RMDir "$INSTDIR"
SectionEnd 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T08:24:33.703

NSIS 的一个很棒的向导是 HM NIS Edit，它可以指导您完成您的第一个安装程序，包括您在上面提到的我相信的内容。

[http://hmne.sourceforge.net/](http://hmne.sourceforge.net/)

如果你想在 NSIS 中提供更新程序，我会推荐一些东西：

1.  为您的应用程序创建一种检查服务器更新的方法，通常在首次加载时完成
2.  下载新的安装程序并运行它（从您的应用程序，尽管任何人都可能也可以从您的网站获取它）。
3.  如果您的旧程序正在运行，您需要将其关闭。NSIS 有插件可以找到一个进程并杀死它。这不是超级“好”，但可能是必要的。

[我推荐这个过程插件](http://nsis.sourceforge.net/Processes_plug-in)

如果您正在使用 DLL，则不能只删除它们。但是，在 NSIS 中，您可以重命名它们，然后在下次重新启动时将它们标记为删除，如下所示：

```
Delete /REBOOTOK file.txt 
```

然后将新的 DLL 复制到文件夹中。

对于 NSIS，有大量的插件、示例和很大的帮助，但是学习该语言需要一点时间。Inno 更容易学习，但当你了解细节时，更难定制。但是，我想说两者总体上具有可比性，并且两者都应该可以正常工作。

# android - HttpTransportSE.call() 花费了太多时间

> ID：10695678
> 
> 赞同：1
> 
> 时间：2012-05-22T04:20:58.803
> 
> 标签：android, soap

我正在android手机（2.3.6）上开发一个带有SOAP API的应用程序，它通过WiFi与服务器通信。现在我遇到了一个大问题：当我调用 HttpTransportSE.call() 时，大约需要 10 秒。但是如果我将soapAction 的地址切换到另一个服务器IP，它就可以正常工作。我还分析了来自服务器的日志，它表明服务器对客户端的响应非常快。有没有人有经验？

```
// Code for reference
HttpTransportSE ht = new HttpTransportSE(url);
ht.call(soapAction, envelope);    // This sentence will take about 10 seconds in some cases. 
```

# visual-studio-2010 - Visual Studio 2010：更改快捷方式“删除整行”

> ID：10695694
> 
> 赞同：4
> 
> 时间：2012-05-22T04:22:58.677
> 
> 标签：visual-studio-2010, shortcut

我从 Eclipse 更改为 Visual Studio。`Ctrl`按+`D`会删除整行我觉得很方便。

我读到一个提示，说要更改快捷键，请转到 : `Tool>Option>Keyboard`。

但是当我去那里时，有很多选择，我不知道哪一个更改了`delete whole line`.

@：我正在使用 VS 2010，但可以选择：我认为它应该`apply the following addition keyboard mapping scheme`是。它有什么问题吗？`C# 2005``C# 2010`

谢谢 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T04:29:55.150

我没有时间测试它，但我相信`Edit.LineDelete`你应该看看。默认是`Ctrl`++`Shift``L`

此外，我的 Visual Studio 2010 也只有 C# 2005，所以我猜这些快捷方式在 7 年内没有太大变化。:)

# mysql - 从 MAMP PRO 中手动删除主机

> ID：10695699
> 
> 赞同：0
> 
> 时间：2012-05-22T04:23:42.760
> 
> 标签：mysql, apache, localhost, mamp

我向 MAMP PRO 添加了一个新主机，但我没有为其放置磁盘位置，现在 MAMP 无法正常启动。我在 MySQL 旁边看到旋转的加载图标，而在 Apache 旁边没有任何东西（没有加载或连接的菱形）。

我已经通过方法确保没有其他 SQL 实例正在运行（活动监视器和通过终端）。

我已经说服自己没有磁盘位置的新主机才是问题所在 - 但因为 MAMP PRO 在加载之前不允许进行任何编辑，我无法删除主机或添加磁盘位置。

我可以手动从 MAMP PRO 中删除主机吗？我已经从 etc/ 中的主机文件中删除了它，但它仍然出现在 MAMP PRO 中。

这会解决问题还是我找错地方了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:29:28.247

实际上，我这几天就遇到了同样的问题，并试图在网上找到答案。没有运气。

这不是如何手动删除主机的答案，但它确实解决了我在添加没有磁盘位置的主机时也出现的相同问题。

经过大量试验和错误后，我测试了编辑 mysql 配置模板的内容。我备份了内容，然后删除了很多内容。保存，重新启动后，MAMP Pro 通知我，我更改的模板已更新，MySQL 启动正常（模板内容恢复），此后一直如此。耶！

所以，我的解决方案是这样的：

1.  打开 MAMP（非专业版），启动服务器。这将让您在没有 mysql 开始旋转并将程序锁定以进行更改的情况下打开 MAMP Pro。
2.  打开 MAMP 专业版
3.  进入菜单->“文件”| '编辑模板' | 'MySQL my.cnf' -> 擦除内容（做备份），保存。
4.  关闭和 MAMP 和 MAMP Pro，重新启动 MAMP Pro。

# model-view-controller - 使用 web2py 的 ID3 决策树

> ID：10695702
> 
> 赞同：2
> 
> 时间：2012-05-22T04:24:09.780
> 
> 标签：model-view-controller, tree, web2py, decision-tree

我想问一下如何使用python中的MVC实现在web2py中创建一个非数据库应用程序。

我正在写一篇关于创建/构建 id3 决策树的论文，我决定让它基于网络。web2py 中的大多数示例都使用数据库。我的论文只需要一个包含我的数据集的上传文件。上传后会自动转化为决策树。

我知道这很令人困惑，但我很感激，如果有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:17:43.190

您无需使用数据库即可使用 web2py。您只需要编写适当的代码来上传和处理您的文件，这将取决于您的应用程序的详细信息。这是一个简单的例子：

```
def id3_tree():
    form = FORM(INPUT(_name='Data', _type='file'),
        INPUT(_type='submit', _value='Submit'))
    if request.vars.Data:
        tree = create_tree(request.vars.Data.file)
    else:
        tree = 'No tree yet'
    return dict(form=form, tree=tree) 
```

这将创建一个用于上传数据文件的表单。上传文件后，代码会调用一个`create_tree()`函数并将文件对象传递给它（request.vars.Data.file 将是一个包含文件内容的 cStringIO.StringO 对象——参见[http://docs.python.org/库/stringio.html](http://docs.python.org/library/stringio.html)）。

请注意，此方法实际上并不保存文件。作为替代方案，您可以保存文件，然后打开保存的文件以进行处理。在这种情况下，您可以使用[`SQLFORM.factory()`](http://web2py.com/books/default/chapter/29/7#SQLFORM.factory)并利用 web2py 的内置文件上传功能。

如果您在进行过程中遇到任何问题，请随时在[Google Group](https://groups.google.com/forum/?fromgroups#!forum/web2py)上提问。

# html - “帐单地址与送货地址相同”jQuery 脚本：有更好的方法吗？

> ID：10695707
> 
> 赞同：1
> 
> 时间：2012-05-22T04:24:28.360
> 
> 标签：html, query-optimization, jquery, keyboard-events

我正在为朋友的自行车快递服务创建一个 php 联系表。基本上，当检查“运输和计费地址是相同”的框时，我希望在每个次要事件之后，我希望两组字段在同步。

表格非常简单：

```
<!-- Get the shipping address inputs -->
<input type="text" name="company_address1" value="" id="company_address1">
<input type="text" name="company_city" value="" id="company_city">

<!-- Get the billing address inputs -->
<p>Same as above <input type="checkbox" name="dupe" id="dupe" value=""></p>
<input type="text" name="billing_address1" value="" id="billing_address1">
<input type="text" name="billing_city" value="" id="billing_city"> 
```

jQuery

```
$("input#dupe").click(function(){ 
if ($("input#dupe").is(':checked')) 
{ 
    // Checked, copy values 
    $("input#billing_address1").val($("input#company_address1").val()); 
    $("input#billing_city").val($("input#company_city").val()); 
} 
else 
{ 
    // Clear on uncheck 
    $("input#billing_address1").val(""); 
    $("input#billing_city").val(""); 
} 
});
$("input#company_address1").keyup(function(event) {
if ($("input#dupe").is(':checked')) {
    var stt=$(this).val();
    $("input#billing_address1").val(stt);
}
});
$("input#company_city").keyup(function(event) {
if ($("input#dupe").is(':checked')) {
    var stt=$(this).val();
    $("input#billing_city").val(stt);                           
}
});
$("input#billing_address1").keyup(function(event) {
if ($("input#dupe").is(':checked')) {
    var stt=$(this).val();
    $("input#company_address1").val(stt);
}
});
    $("input#billing_city").keyup(function(event) {
if ($("input#dupe").is(':checked')) {
    var stt=$(this).val();
    $("input#company_city").val(stt);                           
}
}); 
```

优化不是我的强项之一，有没有办法可以将事件链接在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:32:24.670

您可以让 jQuery 在选中复选框时简单地禁用第二组字段，然后在提交表单时查看服务器端复选框的值。

如果您想保留现有设计，可能会考虑为输入表单中的所有字段编写一个 keyup() 函数；提取触发函数的元素的id；稍微编辑 id（将 'billing' 替换为 'company' 等），然后执行 $("...").val () 位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T04:34:49.597

*   不要双向复制。如果`#dupe:checked`，禁用其中一种形式，并仅复制一个方向。

*   重复：

你可以尝试这样的事情：

```
function copyCompanyToBilling($companyElement) {
  $companyElement.each(function() {
    var $companyElement = $(this);
    var billingId = $companyElement.attr('id').replace(/company/, 'billing');
    $('#' + billingId).val($companyElement.val());
  }
});
$("#company_address1, #company_city").keyup(function(evt) {
  copyCompanyToBilling($(this));
});
$("input#dupe").click(function(){ 
  if ($("input#dupe").is(':checked')) {
    copyCompanyToBilling($('#company_address1, #company_city'))
  } else {
    $('#biling_address1, #billing_city').val('');
  } 
}); 
```

编辑：嗯，我刚才说的和 lxop 差不多。慢的 ：（

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T04:56:19.860

我建议修改服务器端代码以存储用户的“与其他地址相同”选项，并尽可能隐藏第二个地​​址字段。这样，如果您再次显示表单进行编辑，您可以再次隐藏表单字段而不是复制信息......

这是使用此方法的表单示例（没有服务器端部分）：http: [//jsfiddle.net/hzAxU/](http://jsfiddle.net/hzAxU/)

# php - 如何在 SELECT 语句中获取选定的行数？

> ID：10695717
> 
> 赞同：0
> 
> 时间：2012-05-22T04:27:21.030
> 
> 标签：php, sql

我想`sender`使用 sql 查询从表中获取选定的行数和值。

```
$sql='SELECT sender 
      FROM messages 
      WHERE message_id = :message_id';
$sender_result = $db->query($sql, array(':message_id'=>$message_id));
$sender = $sender_result->fetch(); 
```

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:32:00.717

您可能需要单独检索行数，查询如下：

```
select count(*) 
    from messages 
    where message_id = :message_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:33:20.890

您需要使用 count 和 group by 来为您提供每个发件人的行数

```
SELECT sender, COUNT(*) As CNT
FROM messages
WHERE message_id = :message_id
GROUP BY sender 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T04:37:45.833

试试这个

```
$sql='SELECT sender 
      FROM messages 
      WHERE message_id = :message_id';
$sender_result = $db->query($sql, array(':message_id'=>$message_id));
$senders = $sender_result->fetchAll();
$count = count($senders); 
```

它会将所有结果行存储在 $senders 中，因此您只需计算此变量。你也得到所有的发件人（不知道他们是相同还是不同......）

# java - java中的泛型函子类

> ID：10695723
> 
> 赞同：5
> 
> 时间：2012-05-22T04:28:25.927
> 
> 标签：java, generics, functor

我想要这样的仿函数类：

```
public class Functor<T, R> { 
    public R invoke(T a) { ... }
} 
```

以及 2 个参数的另一个类：

```
public class Functor<T1, T2, R> { 
    public R invoke(T1 a, T2 b) { ... }
} 
```

等等。

在 C# 中，我可以编写：

```
class Functor<T> { ... }
class Functor<T1, T2> { ... } 
```

但在 Java 中，这将是一个错误：

```
The type Functor is already defined 
```

java中多参数泛型类的最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T04:39:33.957

因为泛型是通过擦除类型信息在 Java 中实现的（在已编译的 .class 文件`class C<T>`中`T`消失了），所以编译器无法在运行时知道您在谈论什么类。

如果您同时定义`F<T1>`并`F<T1,T2>`加载它们，则某些类`C`无法识别它要使用的类。

这是很长的路要走，我认为你不能在 Java 中做到这一点。:\

您可能想要做的只是有一个参数函子`F<T>`，让我们`T`成为对象、`Pair<T1, T2>`对象`ThreeTuple<T1, T2, T3>`等。Scala 就是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:13:18.810

为什么称它为函子？如果您查看维基百科中函子的定义，您会发现这是一个错误的术语。

在 Scala 中，这称为函数；并且由于 jvm 和字节码的特殊性，有很多版本，取决于 arity:`Function0<Res>, Function1<T1, Res>, Function2<T1,T2, Res>`等，最多`Function22`.

# eclipse - HTML5 API 的内容辅助在 Eclipse 中不起作用

> ID：10695724
> 
> 赞同：2
> 
> 时间：2012-05-22T04:28:38.470
> 
> 标签：eclipse, html, eclipse-wtp

我在 Eclipse Indigo SR2 中安装了**html5wtp 0.36**

[http://marketplace.eclipse.org/content/html5wtp](http://marketplace.eclipse.org/content/html5wtp)

如果我尝试在 HTML 页面中使用以下代码，则 javascript Content Assist 中不会显示任何 HTML5 API。

**var elcanvas=document.getElementById('canvas');**

**var context=elcanvas.getContext("2d");**

请让我知道内容辅助问题是否有任何解决方案。

# entity-framework - 实体框架代码优先，自定义，多对多关系中的附加字段

> ID：10695726
> 
> 赞同：4
> 
> 时间：2012-05-22T04:29:05.967
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, ef-code-first

在多对多关系中，我想保持for a 的`Playlist`集合的序列。该序列将是一个从 0 到 int max 的 int 字段。`Media``Channel`

```
public class Channel
{
    public int ChannelId {get; set;}
    public string Name {get; set;}
    public ICollection<Media> Playlist {get; set;}
}

public class Media
{
    public int MediaId {get; set;}
    public string Name {get; set;}
    public string Location {get; set;}
    public ICollection<Channel> Channels {get; set;}
} 
```

首先使用实体​​框架代码我想设计和之间的多对多关系`Channel`，`Media`以便`Channel`将具有`Playlist`媒体类型的项目并保持顺序顺序。

实体框架将`ChannelMedias`为此关系添加一个具有以下架构的表

```
ChannelMedias
-----------------------------
Channel_ChannelId   (int)
Media_MediaId       (int) 
```

我怎样才能保持这样的顺序：

```
ChannelMedias
------------------------------
Channel_ChannelId   (int)
Media_MediaId       (int)
MediaSequence       (int) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T04:45:31.770

默认实体框架不支持它。您需要再定义一个实体（ChanalMedia）来表示关系。

```
public class Channel
{
    public int ChannelId {get; set;}
    public string Name {get; set;}
    public ICollection<ChanalMedia> ChanalMedias{get; set;}
}

public class ChanalMedia{
      public Channel Channel {get; set;}
      public Media Media {get; set;}
     //additional fields here..
}

public class Media
{
    public int MediaId {get; set;}
    public string Name {get; set;}
    public string Location {get; set;}
    public ICollection<ChanalMedia> ChanalMedias{get; set;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:39:07.610

如果我理解您，您正在寻找一种结构，该结构允许在 Playlist 属性中对媒体实体进行排序。有几种方法可以解决这个问题。一种选择是让 Playlist 类包含 Media 并向其添加 PlaylistOrder 属性。

```
 public class Channel
    {
        public int ChannelId {get; set;}
        public string Name {get; set;}
        public ICollection<PlayListItem> Playlist {get; set;}
    }

    public class PlayListItem  
    {
        public int ID {get; set;}
        public int PlayListOrder {get; set;} 
        public Media Media {get; set;}
    }

    public class Media
    {
        public int MediaId {get; set;}
        public string Name {get; set;}
        public string Location {get; set;} 
    } 
```

这会稍微改变数据库的结构，但会提供您需要的功能。它可能更灵活一些，但是您可以向 PlayListItem 添加更多属性，例如 TimesPlayed、LateDatePlayed 等

# vb.net - 使用控制数组

> ID：10695728
> 
> 赞同：-1
> 
> 时间：2012-05-22T04:29:19.580
> 
> 标签：vb.net, textbox

我又遇到了.net 的问题。我有一系列 10 个文本框。我希望能够从一个数组中填充它们并将那里的值读入另一个数组。在 vb6 中，我将创建一个包含 10 个文本框/索引的文本框数组。然后我可以通过 txtbox(i).text = arrVal(i) 填充它们并引用它们 arrVal(i) = txtbox(i)。我很难过，如果必须的话，我可以在一个表单上创建 10 个文本框，但我希望它们以某种方式相互关联，就像它们在 vb6 中一样。对于我如何做到这一点的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:01:01.483

VB.NET 不支持 VB6 中可用的控件数组。没问题，只需自己创建数组：

```
Public Class Form1
    Sub New()
        InitializeComponent()
        Boxes = New TextBox() {TextBox1, TextBox2, TextBox3}
    End Sub

    Private Boxes() As TextBox

End Class 
```

# iphone - 如何为iphone应用程序创建ipa文件

> ID：10695731
> 
> 赞同：-2
> 
> 时间：2012-05-22T04:30:01.660
> 
> 标签：iphone, xcode

我正在构建一个应用程序并制作一个 ipa 文件，但没有完成。我有 xcode 版本 3.2.6 并按照制作 ipa 文件的必要步骤进行操作。但没有希望。我存档了应用程序并在管理器中打开它然后分发它，但它没有显示任何 ipa 文件正在创建的警报。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T05:27:41.597

制作.ipa文件的步骤

1.  首先清理项目（Command+Shift+K）
2.  构建项目（cammand + B）和/或运行项目（Command + R）（确保进行发布构建）
3.  在项目导航器下，转到 Product/ProjectName.app
4.  右键单击 ProjectName.app 文件并选择“在 Finder 中显示”
5.  复制 ProjectName.app 文件
6.  创建一个新文件夹并粘贴 ProjectName.app 文件
7.  压缩文件夹并将其命名为 ProjectName.ipa 并删除 .zip 扩展名。
8.  弹出窗口会询问您是否使用 .ipa 扩展名，选择“使用 .ipa”并按 Enter。

现在您的 .ipa 文件可以使用了，您可以将其拖放到 iTunes 中，并通过将设备与特定 iTunes 同步来在测试设备中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:22:40.547

创建一个文件夹并将 .app 和配置文件拖放到该文件夹​​中。压缩它。将 .zip 扩展名替换为 .ipa。就是这样。

# calendar - 有没有提供世界假期的地方？[日历]

> ID：10695739
> 
> 赞同：3
> 
> 时间：2012-05-22T04:31:11.230
> 
> 标签：calendar

我将开发一个支持多种语言的日历解决方案，但我不确定我应该如何管理和显示各个国家用户需要的所有不同的假期信息？

有没有地方提供世界的假期信息，所以我可以解析和显示？如果没有，您会推荐一种更好的开发方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:48:07.580

[http://qppstudio.net](http://qppstudio.net)在几乎所有地方都有最新的假期列表。不过，免费服务仅限于今年。

过节一般有两种方式：

1.  将它们全部保存在数据库中，然后从那里查询。
2.  使用硬编码在类或程序中的基于规则的系统来计算它们。

两者都有优点和缺点：

*   数据库可以让您更轻松地快速查看您所拥有的一切。更新通常是一件简单的事情。OTOH，根据数据库，“工作日期”计算可能会更慢。另一个严重的、经常被忽视的缺点是，以这种方式工作并不能明确为什么某个日期应该是假期（除了“它/它不在表中”这一事实之外），因此历史错误可能会堆积起来。快（我见过这种情况）。
*   类或程序要快得多，但更新需要修改源代码、重新编译等。另一个优点（见上文）是基于规则的系统倾向于明确为什么某个日期应该是假期。

一般来说，只需要处理一个国家的系统往往会选择机制#2，而处理多个国家的系统往往会选择机制#1。就个人而言，我更喜欢＃2，因为它更快，并确保不会丢失有关假期原因的知识。

# stream - 如何在处理中使用 Minim 来计算 UDP 流样本的 FFT？

> ID：10695741
> 
> 赞同：1
> 
> 时间：2012-05-22T04:31:40.343
> 
> 标签：stream, udp, fft, processing, minim

我需要在流上实时计算 FFT。我通过 UDP 端口接收带有字节数组的包。是否有可能以某种方式将它们转换为 Minim 可以分析的流？我搜索了很长时间，找到了一些可能的解决方案（FloatSampleBuffer、createSample），但我仍然不知道如何从中计算 FFT。

# python - GAE 中的事务分片计数器

> ID：10695742
> 
> 赞同：0
> 
> 时间：2012-05-22T04:31:52.683
> 
> 标签：python, google-app-engine, transactions, sharding

我需要更新分片计数器并返回当前计数。我在这里遵循示例：[https ://developers.google.com/appengine/articles/sharding_counters](https://developers.google.com/appengine/articles/sharding_counters)

但我不确定您是否可以通过函数间接执行事务查询。这是示例代码：

```
@db.transactional
def updateCounter(name):
    increment(name)
    get_count(name)

updateCounter(TOTAL_USERS) 
```

这会返回当前计数增加吗？还是这种方法无效，因为数据库查询位于 @db.transactional 函数之外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:46:29.263

^*无法获得分片计数器的事务计数。分片计数器的工作方式是您可以在事务中更新它们，并在事务之外对它们进行汇总。通常，这不是问题，因为分片计数器用于计数每秒更新多次的情况；计数的任何交易记录在计算时几乎都是不正确的。

^*您*可以*使用 XG 事务处理最多 5 个分片，但这是一个非常糟糕的主意。首先，由于上述原因，其次是因为它会带来与您试图通过首先使用分片计数器来避免的可伸缩性问题完全相同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:15:04.260

您只能在事务中[使用祖先查询。](https://developers.google.com/appengine/docs/python/datastore/transactions#What_Can_Be_Done_In_a_Transaction)

由于`get_count()`使用非祖先查询，他的代码会产生错误。

# php - 使用 htaccess 和 mod_rewrite 后无法进入特定目录？目录的 RewriteCond 不起作用

> ID：10695745
> 
> 赞同：-1
> 
> 时间：2012-05-22T04:32:01.607
> 
> 标签：php, apache, .htaccess, mod-rewrite, directory

我想在**cp**目录中的项目中设置一个管理面板。但是在使用 htaccess 和 mod_rewrite 之后我就不能去它了。下面是我的代码：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([A-Za-z0-9-]+)?$ ./index.php?p=$1 [NC,N]
RewriteRule ^([A-Za-z0-9-]+)/?$ ./index.php?p=$1 [NC,F] 
```

**当 URL 为http://localhost/project/cp**时，我得到 403 禁止访问

 **我需要做什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:20:41.237

我可以为我的问题找到一个有用的答案，它对我有用。

```
RewriteCond %{REQUEST_FILENAME} -f [NC,OR] 
RewriteCond %{REQUEST_FILENAME} -d [NC] 
RewriteRule .* - [L] 
```**

# matlab - Matlab中图像中两点之间的距离

> ID：10695747
> 
> 赞同：1
> 
> 时间：2012-05-22T04:32:09.330
> 
> 标签：matlab, image-processing

我想找到图像中两点之间的距离，如图所示

![距离](../Images/33f8e9e4608a7fa19194e46610aae832.png)

我通过使用手动选择方法 ginput 获取坐标找到了它。现在我需要另一种方法来找到它们之间的距离。

有人对我有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:46:14.280

您可以使用高斯卷积的拉普拉斯算子来检测不同尺度的斑点（如果这些圆圈始终具有相同的大小，您可以微调您的算法以仅检测这个确切的大小）。在这里查看例如：[http](http://code.google.com/p/blobdetector/) ://code.google.com/p/blobdetector/ （或只是谷歌“matlab blop detection”）

当然，在尝试稳健地实现这一点时，您可能会面临更多问题，但这至少可以帮助您入门。

**编辑**似乎你真的只是在寻找一种计算两点之间距离的方法。根据毕达哥拉斯，给定点 p1 和 p2：

```
sqrt((p1(1) - p2(1))^2 + (p1(2) - p2(2))^2) 
```

或者在你的情况下使用`ginput`：

```
p = ginput(2);
sqrt(sum((p(:,1) - p(:,2)).^2)) 
```

# java - 慢角度旋转

> ID：10695750
> 
> 赞同：2
> 
> 时间：2012-05-22T04:32:25.053
> 
> 标签：java, slick2d

所以显然，即使我已经完成了微积分 3，我的三角函数也让我非常失望（我什至不能称之为三角函数，它只是基本的数学）。所以基本上我有一堆旋转的图像，我不希望它是即时的。我知道如何让它缓慢旋转，但我不确定如何计算它应该转向的方向。

因此，如果`target`我要转向的角度低于 179 度，请向一侧转。如果超过 180 度，则转向另一个方向。不确定我的措辞是否正确，但我基本上只是希望它使用最短距离旋转。想想我想的寻的导弹。

我有两种寻找角度的方法，一种是使用向量，如下所示：

```
hero = new Vector2f(this.x, this.y);
target = new Vector2f(mouseX, mouseY);
target.sub(hero);

// Calculates the rotation
finalRotation = (int) target.getTheta(); 
```

另一种方法是使用`atan2`（看起来更简单，我意识到我可以将它缩短为一个返回语句）：

```
direction = Math.atan2(player.x - this.x, player.y - this.y);
return (int) Math.toDegrees(direction); 
```

我认为找到最短旋转的方法对两者都适用。一段时间以来，我一直在尝试一些反复试验的事情，但我很困惑。帮助我一文不值的编程技巧！任何帮助表示赞赏！

**编辑：** 我实际上忘记提到的是我指向鼠标。*因此，如果我的鼠标与我的“图像”* （即玩家）的角度为 200，并且玩家当前面向 19，我将如何确定它应该变为正值到 200 还是下降到 0，转移到 360 并继续下降到200。

**双重编辑：** 所以我有一个我想要的工作版本，但由于某种原因，最终和当前的旋转偏离了 180，这导致我的角色永远不会停止抽搐。明天我得加倍努力。`currentRotation`由于我的精灵最初旋转的方式，我必须从末尾减去 90 。

**三重编辑：** 好的，所以我将增量和减量语句反转，因此它试图超过 180，然后反转方向。我已经完善了！

```
mouseX = input.getMouseX();
mouseY = input.getMouseY();

hero = new Vector2f(this.x, this.y);
target = new Vector2f(mouseX, mouseY);
target.sub(hero);

// Calculates the rotation
finalRotation = (int) target.getTheta();

if(!(currentRotation <= finalRotation + 1 && currentRotation >= finalRotation - 1)) {
    double tempVal;

    if (currentRotation < finalRotation) {
        tempVal = finalRotation - currentRotation;

        if (tempVal > 180) {
            currentRotation -= .3 * delta;
        } else {
            currentRotation += .3 * delta;
        }
    } else if (currentRotation > finalRotation) {
        tempVal = currentRotation - finalRotation;

        if (tempVal < 180) {
            currentRotation -= .3 * delta;
        } else {
            currentRotation += .3 * delta;
        }               
    }
}

if (currentRotation < 0)
    currentRotation = 359;

if (currentRotation > 360)
    currentRotation = 1;

this.setAngle((int) (currentRotation+90)); 
```

输入的东西和向量来自 Slick2D。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:38:26.930

```
if (finalRotation >= 180) finalRotation = 360 - finalRotation; 
```

这将反转 180 或以上的任何角度的方向。

# java - 在 PlayFramework 中检测数据库持久性失败

> ID：10695752
> 
> 赞同：0
> 
> 时间：2012-05-22T04:32:31.857
> 
> 标签：java, database, playframework, persistence, playframework-1.x

我正在使用 Playframework 1.2x 构建应用程序

我必须在执行 CRUD 操作时检测数据库操作是否成功

这是我到目前为止所拥有的

```
public static void create(Args..) {
        Model m = new Model(Args..);
        m.save();
        if(m.id == null) {
        // Render failure Response
        }else {
        // Render Success Response
        }
}

public static void read(long id) {
        Model m = Model.findById(id);
        if(m == null ) {
            // Render failure Response
        }else{
            // Render Success Response
        }
} 
```

我不太确定必须为`UPDATE`和做什么`DELETE`。

上面的方法不是很优雅。有没有更好的解决方案，比如 Exceptions ？

我尝试关闭给我的数据库服务器这`PersistenceException`是要走的路吗？还有更多类似的例外吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:50:30.477

是的，如果您有数据库连接问题，您将遇到 ORM 抛出的一些异常。PersistenceException 是 JPA 异常的根源，因此如果 ORM 检测到异常，您就会遇到这种异常。

对我来说，捕捉意外的异常不是要走的路。如果您遇到此类技术问题，您的数据库将回滚您的 crud 操作，并且不会保存任何内容。

只需捕获对用户有意义的异常并让其他异常上升，然后在这种情况下 play 将显示一个通用的 500 页面

# javascript - 如何在内容脚本和面板之间进行通信

> ID：10695756
> 
> 赞同：6
> 
> 时间：2012-05-22T04:33:25.850
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

面板和内容脚本之间的通信是如何发生的？我们如何从内容脚本动态更新面板内容？内容脚本访问加载页面的 DOM。现在，每当网页中的 DOM 发生变化时，都应该显示在面板中。我们应该怎么做？任何人都可以用一个例子来解释吗？

更新：这是[我的附加代码](https://builder.addons.mozilla.org/addon/1050256/revision/596/)

请通过此代码。我没有得到输出

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T05:22:00.353

您的问题是关于两个内容脚本之间的通信 - 一个内容脚本加载到网页中，另一个内容脚本加载到面板中。这些内容脚本不能直接通信，它们必须通过扩展（`main.js`或创建它们的任何模块）进行通信。换句话说：网页发生了变化，内容脚本识别出该变化并向扩展发送消息。扩展程序接收消息并将其发送到面板中的内容脚本。然后面板中的内容脚本会根据需要更新面板内容。

# windows-phone-7 - 如何在 Windows Phone 7 中使用 REST WCF 服务？

> ID：10695760
> 
> 赞同：-1
> 
> 时间：2012-05-22T04:34:05.863
> 
> 标签：windows-phone-7

我写了rest wcf services。下面是发布的路径。http://{ipaddress}/Frnetwork/incidents/help

如何在 windows phone 7 中使用这些服务。请告诉我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:14:19.860

我认为您应该使用 RESTSharp，它非常好用且易于使用 RESTClient 帮助程序库。我不确定它是否适用于 WP7，但似乎值得一试，因为 SO 上的帖子说它会起作用。

[http://restsharp.org/](http://restsharp.org/)

[在 Windows Phone 7 中使用 RestSharp](https://stackoverflow.com/questions/3537035/using-restsharp-in-windows-phone-7)

问候。

# ms-access - 从右键单击命令栏菜单打开当前记录

> ID：10695761
> 
> 赞同：1
> 
> 时间：2012-05-22T04:34:14.613
> 
> 标签：ms-access, vba

我正在使用此代码为我的数据表表单 (Access 2007) 创建一个右键菜单。此代码在 Open 事件的数据表子窗体中运行：

```
Dim sMenuName As String
sMenuName = "DatasheetRightClickMenu"

On Error Resume Next
CommandBars(sMenuName).Delete
If Err.Number <> 0 Then Err.Clear
On Error GoTo 0

Dim cmb As Office.CommandBar
Dim cmbItem

Set cmb = CommandBars.Add(sMenuName, _
           msoBarPopup, False, False)

Set cmbItem = cmb.Controls.Add(msoControlButton, , , , True)
With cmbItem
    .Caption = "Open"
    .OnAction = "=OpenDetails()"
End With

Me.ShortcutMenu = True
Me.ShortcutMenuBar = sMenuName 
```

我不知道如何将当前记录的 ID 传递给 OpenDetails 函数。如果我能弄清楚如何传递表单或记录集变量/引用，我会很高兴，但我似乎也不知道如何做到这一点。

将“实时”参数或参数从右键菜单传递到自定义函数的技巧是什么？用户点击的时候一定要建立右键菜单吗？或者有没有更好的方法来做到这一点？

**Edit1：**
这是我到目前为止所做的工作：

```
Private Sub Form_Current()
    Call CreateRightClickMenu
End Sub

Private Sub CreateRightClickMenu()
    Dim sMenuName As String
    sMenuName = Me.Name & "RClickMenu"

    On Error Resume Next
    CommandBars(sMenuName).Delete
    If Err.Number <> 0 Then Err.Clear
    On Error GoTo 0

    Dim cmb As Office.CommandBar
    Dim cmbItem

    Set cmb = CommandBars.Add(sMenuName, _
               msoBarPopup, False, False)

    Dim s1() As String, s2 As String
    If Nz(Me.txtitemdesc, "") <> "" Then
        s2 = Me.txtitemdesc & " "
        s2 = Replace(s2, ",", " ")
        s1 = Split(s2, " ")
        s2 = s1(0)
    End If

    Set cmbItem = cmb.Controls.Add(msoControlButton, , , , True)
    With cmbItem
        .Caption = "Open " & Replace(Me.txtitemdesc, "&", "&&")
        .Parameter = Me!ItemID
        .OnAction = "OpenFromDatasheetRightClick"
    End With

    Set cmbItem = cmb.Controls.Add(msoControlButton, , , , True)
    With cmbItem
        .FaceId = 640
        .Caption = "Filter = '" & s2 & "'"
        .Parameter = s2
        .OnAction = "FilterAllItemsDatasheet"
    End With

    If Me.FilterOn = True And Me.Filter <> "" Then
        Set cmbItem = cmb.Controls.Add(msoControlButton, , , , True)
        With cmbItem
            .Caption = "Clear Filter"
            .Parameter = ""
            .OnAction = "FilterAllItemsDatasheet"
        End With
    End If

    Me.ShortcutMenu = True
    Me.ShortcutMenuBar = sMenuName
End Sub 
```

看来我的回调函数必须在公共模块中，而不是表单模块中。

```
Public Sub FilterAllItemsDatasheet()
    Dim cbar As CommandBarControl
    Set cbar = CommandBars.ActionControl
    If cbar Is Nothing Then
        Debug.Print "CBar is nothing"
        Exit Sub
    End If
    Dim s1
    s1 = cbar.Parameter
    If s1 = "" Then
        Call Forms("frmAllItemsDatasheet").ClearFilter
    Else
        Forms("frmAllItemsDatasheet").cboSearch = s1
        Call Forms("frmAllItemsDatasheet").UpdateSubform
    End If
End Sub

Public Sub OpenFromDatasheetRightClick()
    Dim cbar As CommandBarControl
    Set cbar = CommandBars.ActionControl
    If cbar Is Nothing Then
        Debug.Print "CBar is nothing"
        Exit Sub
    End If
    Dim s1
    s1 = cbar.Parameter
    Call OpenItemDetailForm(s1)
    Forms("frmAllItemsDatasheet").SetFocus
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:49:14.883

怎么样：

```
Set cmbItem = cmb.Controls.Add(msoControlButton, , , , True)
With cmbItem
    .Caption = "Open"
    .OnAction = "=OpenDetails([ID])"
End With

''Function
Function OpenDetails(intID)
    MsgBox intID
    ''This would also work
    MsgBox Screen.ActiveForm.ID
End Function 
```

测试时不要忘记关闭并重新打开表单:)

# zend-framework - 如何在 Zend 中设置 ReCaptcha "en" 语言？

> ID：10695772
> 
> 赞同：0
> 
> 时间：2012-05-22T04:35:42.937
> 
> 标签：zend-framework, recaptcha

我想强制 ReCaptcha 表单在 Zend 中只使用 EN 语言，但是这些代码对我不起作用：

```
 $recaptcha = new Zend_Service_ReCaptcha($publickey, $privatekey);

    $captcha = new Zend_Form_Element_Captcha('captcha',
        array(
            'captcha'       => 'ReCaptcha',
            'captchaOptions' => array('captcha' => 'ReCaptcha', 'service' => $recaptcha, 'lang'=>'en'),
            'ignore' => true
            )
    );

    $this->addElement($captcha); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:37:46.707

我认为这应该可行（目前无法测试，抱歉）

```
 $captcha = new Zend_Form_Element_Captcha('challenge', array(
            'captcha' => 'ReCaptcha',
                'captchaOptions' => array(
                'captcha' => 'ReCaptcha',
                'privKey' => ' ',
                'pubKey' => ' '
            )
    ));

    $captcha->getCaptcha()->getService()
            ->setOption('theme', 'white')
            ->setOption('lang', 'en'); // should do it 
```

# mysql - Mysqli 语句执行错误：结果包含多于一行

> ID：10695773
> 
> 赞同：4
> 
> 时间：2012-05-22T04:35:44.290
> 
> 标签：mysql, zend-framework, stored-procedures

我正在使用选择查询从 TUsers 获取三个值，其中出现错误

Mysqli 语句执行错误：结果包含多于一行。

我已经使用 DISTINCTROW 来避免重复，并且我正在使用 Zend 框架来调用该过程。

这是代码：

程序：

```
 CREATE DEFINER=`root`@`` PROCEDURE `spfetchloginid`(in securityans   varchar(50),out email varchar(50),out loginidout varchar(50),out useridout varchar(50))
         BEGIN

         SELECT DISTINCTROW Email,login_id,user_id into email,loginidout,useridout  FROM DB.TUsers where SecurityAns=securityans ;

         END 
```

从控制器调用 ZendFramework 中的过程：

```
 $db=Zend_Db_Table::getDefaultAdapter();
        $spParams = array(1,'NewValue');
        $stmt = $db->query("CALL   spfetchloginid('$securityans',@email,@loginidout,@useridout)");

        print_r($stmt->fetchAll());
        $stmt->closeCursor();   

        $stmtresult10=$db->query("select @email");
        $email_to=$stmtresult10->fetch();
        $stmtresult10->closeCursor();
        $Emails=$email_to["@email"];
         echo $Emails;  

        $stmtresult11=$db->query("select @loginidout");
        $loginid=$stmtresult11->fetch();
        $stmtresult11->closeCursor();

        $loginids=$loginid["@loginidout"];
        echo $loginids; 

        $stmtresult12=$db->query("select @useridout");
        $userid=$stmtresult12->fetch();
        $stmtresult12->closeCursor();

        $userids=$userid["@useridout"]; 

        echo $userids; 
```

在使用 Zend 和 My Sql 调用过程时，请告诉我任何好的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:44:27.017

来自[精美手册](http://dev.mysql.com/doc/refman//5.5/en/select.html)：

> `DISTINCT`指定从结果集中删除重复行。[...]`DISTINCTROW`是 的同义词`DISTINCT`。

所以这么说：

```
SELECT DISTINCTROW Email, login_id, user_id
...
where SecurityAns = securityans 
```

只是从结果集中删除重复项，但如果您有多个相同的行`SecurityAns`并且它们都是`securityans`，那么您的查询将返回多行。如果`SecurityAns`是对“你最喜欢的颜色是什么”或“你母亲的娘家姓是什么”之类的标准问题的回答，那么你应该期待很多重复，所以`SecurityAns`肯定不足以保证唯一性。

您需要向 WHERE 子句添加更多内容以保证唯一的结果。或者，您可以添加 LIMIT 1 但这只是真正问题的绷带。

您的 WHERE 子句也可能遇到问题：

```
where SecurityAns = securityans 
```

应该对表中的每一行都为真，因为我认为`securityans`将使用列名而不是`securityans`参数。尝试使用不同的参数名称。例如，我看到您的重复问题是这样的：

```
create procedure p(in id int, out result int)
begin
    select id into result from t where id = id;
end 
```

但不适用于此版本：

```
create procedure p(in find_id int, out result int)
begin
    select id into result from t where id = find_id;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:52:10.007

假设所有记录在“SecurityAns”列中具有相同的值，但所有其他列的值不同（通常每个用户都有自己的电子邮件地址，对吗？），无论您使用不同的行还是不同的行，您的查询都会检索到更多一排。这么说，你想如何为“输出”变量分配多个值？Mysql 过程中的 'in' 和 'out' 参数是原子变量，只能被赋予一个和 ONE ONLY 值。如果您想查询一个表的多行并使用检索到的数据做一些事情，我建议您使用 PHP 来做这件事而忘记 MySql 存储过程。

# javascript - 数字、字母块的正则表达式模式匹配

> ID：10695774
> 
> 赞同：6
> 
> 时间：2012-05-22T04:35:53.107
> 
> 标签：javascript, jquery, regex, pattern-matching

我有一些这样的字符串

```
aa11b2s
abc1sff3
a1b1sdd2 
```

等等......我需要将这些字符串更改为这些

```
aa 11 b 2 s
abc 1 sff 3
a 1 b 1 sdd 2 
```

简单地说..我需要在每个（数字/字母）块之间添加一个空格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:49:59.630

```
var str = 'aa11b2s'.replace(/([a-z]+|\d+)(?!$)/gi, '$1 '); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:40:45.393

```
var str = 'aa11b2s';
console.log(str.replace(/([\d.]+)/g, ' $1 ').replace(/^ +| +$/g, '')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T05:00:49.970

```
result = subject.replace(/[a-z](?=[0-9])|[0-9](?=[a-z])/ig, "$& "); 
```

这匹配一个后跟一个数字的字母，或者一个后跟一个字母的数字，而不*消耗*第二个字符。然后它将第一个字符替换为相同的字符，后跟一个空格。

# android - 在android中实现视频聊天应用

> ID：10695776
> 
> 赞同：-1
> 
> 时间：2012-05-22T04:36:09.487
> 
> 标签：android, video-streaming

我有一个学校项目。我需要编写一个视频对话安卓应用。两个客户端设备应通过服务器实时连接。服务器也必须自己写。到目前为止，我还没有开发过如此复杂的应用程序。我不熟悉服务器概念。我做了一些搜索，找不到任何有用的来源。所以我问你我应该从哪里开始。顺便说一句，服务器可以用任何语言开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:12:42.307

来自 github 的这个[项目](https://github.com/justaddwater71/FirstResponder)可能会给你一个想法。我认为服务器是用 ruby​​ 编写的。

# linux - htaccess 专家：将除 root 之外的所有内容重定向到一个 TLD，将 root 重定向到另一个 TLD - WordPress

> ID：10695777
> 
> 赞同：1
> 
> 时间：2012-05-22T04:36:10.423
> 
> 标签：linux, wordpress, .htaccess, redirect, permanent

感谢大师的帮助。

我被要求将客户的 WordPress 主页放在一个 TLD 上（即 domain.eu），并将所有其他页面/目录 301 转换为不同的 TLD 扩展名（即 domain.com/everything-else）。不知道为什么要求这样做，但显然这对客户很重要，我一直在努力让它工作。有任何想法吗？

**例子：**

如果 URL 命中任何域 TLD 的根，则应将它们重定向到 .eu 域 (http://domain.eu/)，但其他所有内容都应转到 .com 域 (http://domain.com/)

**根源：**

```
http://domain.com  OR
http://domain.net  OR
http://domain.edu/index.php OR
http://domain.org/index.html  OR
http://domain.* (* = any extension) 
```

**301 至：** [http ://domain.eu](http://domain.eu)

*但是，其他所有内容都*需要维护目录结构，并重定向到其他 TLD (http://domain.com)。例子..

**从：**

```
 http://domain.net/blog/category 
```

**301 至：**

```
 http://domain.com/blog/category 
```

**从：**

```
 http://domain.org/blog/category/post 
```

**301 至：**

```
 http://domain.com/blog/category/post 
```

我尝试过的一切都以重定向循环结束，或者只是部分成功。例如，下面是 WordPress 重定向的上方，并且在所有目标 URL 都被命中的意义上它正确重定向，但根（主页）有一个重定向循环错误。有什么想法吗？

```
RewriteEngine On
RewriteBase /
Options +FollowSymLinks

RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

RedirectMatch ^/$ http://domain.eu

RewriteCond %{REQUEST_URI} !^/$ [NC]
RewriteCond %{HTTP_HOST} ^domain.com.au$ [NC,OR]
RewriteCond %{HTTP_HOST} ^domain.eu$ [NC,OR]
RewriteCond %{HTTP_HOST} ^domain.de$ [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [R=301,L] 
```

我对htaccess有点新手，所以让我知道我是怎么解决这个错误的，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:14:12.120

WordPress 将重定向任何与 WordPress 配置中的域不匹配的 URL。您需要编写一个 WP 插件或使用代理来获取其他域的主页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:22:47.793

尝试用以下内容替换redirectmatch。

```
RewriteCond %{HTTP_HOST} !^domain.eu$ [NC]
RewriteRule ^/?$ http://domain.eu/ [R=301,L] 
```

# java - 有人可以解释什么是虚拟机以及它们为什么有用吗？

> ID：10695781
> 
> 赞同：5
> 
> 时间：2012-05-22T04:36:47.427
> 
> 标签：java, operating-system, virtual-machine, virtualization

我经常听到这个词，我有点困惑。

*   它只是一个建立在一个操作系统上的软件应用程序，可以模拟另一个操作系统吗？

*   当有人编写虚拟机代码时，他们是否基本上着手制作操作系统，而不是直接访问硬件，他们只是调用他们需要的适当陷阱指令？但是，您将无法模拟某些受保护的操作，例如中断，对吗？

*   除了我能够从 Windows 中远程连接并运行 Linux 桌面之外，还有其他原因可能有用吗？

*   什么是“虚拟机监视器”？

*   Java 虚拟机的意义何在，为什么不做其他语言做的事呢？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T04:41:33.357

那里有很多问题，我将开始解释我使用虚拟机的经验。

它们是在不同操作系统版本上测试代码或应用程序的好方法，例如 vista vs windows 7 或不同版本的 android，例如 2.3 vs 4.0。

它们也是保持主台式计算机清洁的好方法。也许我想安装一些测试版软件，或者测试版操作系统，我不想让我的主机不稳定。我可以安装 Windows 8 预览版并随意使用它，然后再将其丢弃。Windows 8 预览版不够稳定，不能作为我的主要机器，但我可能需要对其进行评估。

我还可以制作虚拟机并拍摄快照。这意味着如果我想测试应用程序，我可以回滚到快照，以便在测试应用程序时知道机器的确切状态。

虚拟机监视器是一个应用程序，我可以在其中查看所有虚拟机的当前状态。也许我正在运行一个运行多个实时服务器的生产系统。如果它们是 Web 服务器，它们都可以在虚拟机中运行。虚拟机监视器是我可以查看它们各自使用多少 CPU 的地方。增加内存、添加服务器、删除服务器、安装新服务器等。

虚拟机在这种情况下非常有用，因为您可以克隆、增加内存、减少内存、添加更多服务器等，这些操作都可以很容易地完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:44:15.827

来自维基：

虚拟机 (VM) 是“在正常主机操作系统中完全隔离的客户操作系统安装”。现代虚拟机通过软件仿真或硬件虚拟化或（在大多数情况下）两者结合来实现。

检查[更多](http://en.wikipedia.org/wiki/Virtual_machine)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T04:45:54.810

**Java虚拟机和虚拟机是两个完全不同的东西。**

*   Java 虚拟机 (JVM) 是可以执行 Java 字节码的虚拟机。
*   虚拟机 (VM) 是“在正常主机操作系统中完全隔离的客户操作系统安装”

**虚拟机**确实会捕获中断并像您的计算机一样运行。从面向开发人员的角度来看，它们对于测试和调试不同的操作系统非常有用。在服务器环境中，它们非常适合单个大型机的虚拟化。

**Java 虚拟机**(JVM) 用于解释 Java 字节码。Java 被“编译”为中间状态，JVM 以对开发人员完全透明的方式在主机上运行它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T04:49:47.557

> 它只是一个建立在一个操作系统上的软件应用程序，可以模拟另一个操作系统吗？

它是基于另一个操作系统的硬件平台的软件模拟。

> 当有人编写虚拟机代码时，他们是否基本上着手制作操作系统，而不是直接访问硬件，他们只是调用他们需要的适当陷阱指令？但是，您将无法模拟某些受保护的操作，例如中断，对吗？

是和不是。通常为虚拟化提供硬件支持。例如，参见：[x86 虚拟化 - 硬件支持](http://en.wikipedia.org/wiki/X86_virtualization#Hardware_support)

> 除了我能够从 Windows 中远程连接并运行 Linux 桌面之外，还有其他原因可能有用吗？

**很多**原因。

*   已经提到了测试。
*   您提到了在主机操作系统中运行不同操作系统的能力。
*   制作虚拟机运行状态*快照*的能力。
*   启动/停止/暂停正在运行的 VM 的能力。

> Java 虚拟机的意义何在，为什么不做其他语言做的事呢？

平台无关。

# javascript - 未捕获的 ReferenceError：未定义 spanArray

> ID：10695783
> 
> 赞同：-1
> 
> 时间：2012-05-22T04:36:58.453
> 
> 标签：javascript

我想制作一个按钮来启动 onclick 以使随机数继续运行，（使用

1.  或 2\. 打电话），但如果我按下它，错误消息会显示“未捕获

ReferenceError: spanArray is not defined" 但上面的数字仍在运行，我不能

明白哪里错了。

PS 但是如果我使用 3 它可以正常工作。

谢谢！

我尝试 3 的完整代码是[http://jsfiddle.net/eVyjC/](http://jsfiddle.net/eVyjC/)

```
function computeRandom(){
// skip code: have used loop to create six spans already
var spanArray = document.getElementsByTagName("span");
//1.document.write("<input type =  button  value = 'start' onclick = \"passKeepMove(value,spanArray) \"  name = button1>");
//2.document.write("<input type =  button  value = 'start' onclick =  \"setInterval(function(){keepMove(value,spanArray);}, 10) \"  name = button1>");
//3.setInterval(function(){keepMove(value,spanArray);}, 10) ;
   }

function keepMove(val,sp){//call by pointer 

    var index = parseInt(Math.random()*43);//set a increment to avoid repeatition

    for( i = 0; i < sp.length; i++){
    sp[i].innerHTML = val[i+index];
    }
}

function passKeepMove(v,s){
    setInterval(function(){keepMove(v, s);}, 10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:40:25.190

前面`var`是`var spanArray`做`spanArray`一个局部变量。所以你不能在`computeRandom`'s 函数范围之外访问它。

您需要使其成为全局变量或提出更好的设计，这样您就不需要全局变量。

# yii - yii中如何使用CgridView中的Filters实现排序和搜索

> ID：10695787
> 
> 赞同：1
> 
> 时间：2012-05-22T04:38:21.353
> 
> 标签：yii

我创建了一个数组并将其放在 CActiveDataProvider 中并呈现给 CGridView。我在 GridView 中有自己的额外列。我无法对额外添加的列进行排序。如果我在 CGridview 中使用过滤器，它会显示错误，因为未定义额外的列。我应该使用 CArrayDataProvider 还是 CActiveDataProvider。请任何人帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:48:47.017

数据提供者的类型对 CGridView 行为没有（或不重要）影响。当您知道将使用哪种数据提供给它时​​，您决定使用哪种类型？

如果您使用 ActiveRecord 从数据库中检索数据，则使用 CActiveDataProvider。如果要运行单个 SQL 查询，则使用 CSqlDataProvider。最后，如果您有数组形式的数据集（是否从数据库中提取），您将使用 CArrayDataProvider。

问题，为什么您额外添加的列不用于排序和问题，数据提供者使用的是两个不同的问题。

你能提供更多细节吗？您在额外的列中放入了什么样的数据？这些数据的来源是什么？您是否将此列包括在要排序或搜索的其他列中？

# ios - 适用于 iOS SQLite 加密算法的 SUP

> ID：10695794
> 
> 赞同：1
> 
> 时间：2012-05-22T04:39:28.107
> 
> 标签：ios, sqlite, sup

谁能告诉我 SUP 在 iOS 上用于加密底层数据库的加密算法是什么？

它是否依赖于 SQLite EE（加密扩展），如果是，那么使用了 4 种可用算法中的哪一种？

我的猜测是某种 AES，但官方文档中没有提到。

还是 SUP 使用不依赖 SQLite EE 的自定义加密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:45:16.993

从 SUP 传道者那里得到了外部答复。SUP 依赖 SQLite 加密，并在 OFB 模式下使用 AES-128 作为密码模式。

# c# - 目录已创建，但文件未在服务器上创建，本地运行正常

> ID：10695798
> 
> 赞同：0
> 
> 时间：2012-05-22T04:40:07.843
> 
> 标签：c#, file-io, permissions

下面代码的问题是在服务器上创建了目录但没有创建文件，当我在我的系统上本地运行时它运行正常，请建议可以做什么，这是我的优先级 1。thnx

```
public static void CreateLog(string strToLog)
    {
        try
        {
            string excepfile = "CacheServerLogs_" + DateTime.Now.ToShortDateString().Replace("-", "_") + ".txt";
            FileStream fs = null;
            StreamWriter sw = null;
            string mydocpath = "C:\\CacheServerLogs";
            if (!Directory.Exists(mydocpath))
                Directory.CreateDirectory(mydocpath);
            string exceptionfile = Path.Combine(mydocpath, excepfile);
            //string exceptionfile = mydocpath + "\\" + excepfile;
            if (!File.Exists(exceptionfile))
                fs = File.Create(exceptionfile);
            else
                sw = File.AppendText(exceptionfile);
            sw = sw == null ? new StreamWriter(fs) : sw;
            sw.WriteLine(DateTime.Now.ToString() + " - " + strToLog);
            sw.Close();
            if (fs != null)
                fs.Close();
        }
        catch (Exception ex)
        {
            HandleException(ex);
        }
    } 
```

可能存在用户权限问题，但我正在尝试这样做......给予文件夹所有可能的权限......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:44:51.553

尝试使用 File.CreateText 或 File.Write

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:50:16.880

由于您显然是在尝试写入日志文件，因此我通常建议您使用“标准”库来执行此操作，例如[log4net](http://logging.apache.org/log4net/)或[NLog](http://nlog-project.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T06:05:40.017

实际上错误在于

```
string excepfile = "CacheServerLogs_" + DateTime.Now.ToShortDateString().Replace("-", "_") + ".txt"; 
```

在我的系统中格式是 22-05-2012 但在服务器上是 22\05\2012 所以这是在找不到路径上创建错误...

# java - 使用 java 服务器引导主干.js 模型

> ID：10695799
> 
> 赞同：4
> 
> 时间：2012-05-22T04:40:11.447
> 
> 标签：java, backbone.js, mustache

我正在计划一个带有backbone.js 和一个运行jersey 的java 后端的单页webapp。我有兴趣在初始加载时将模型数据引导到页面中，以防止额外的 ajax 请求，正如主干.js 文档所建议的那样：

> 当您的应用首次加载时，通常会有一组您知道您将需要的初始模型来呈现页面。与其触发额外的 AJAX 请求来获取它们，更好的模式是让它们的数据已经引导到页面中。

我认为我需要做的例子在ruby​​ 和 php 的[骨干模式](http://ricostacruz.com/backbone-patterns/#bootstrapping_data)中给出，但我并没有将这些点与它在 java 中的工作方式完全联系起来。我是否需要使用诸如 mustache.java 之类的模板库并在页面提供之前对其进行预处理？有人能给我举个例子吗？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:44:06.250

我对 Jersey 不熟悉，但看了看文档，它似乎主要是一个 Restful Web Service 框架。看来您可以使用 @Produces 注释提供“text/html”的内容类型，但我没有看到使用模板系统呈现视图的明显方法。因此，您可能应该从 Java Web 框架（如[Spring](http://www.springsource.org/)或[Play Framework](http://www.playframework.org/)）开始，通过视图模板（如果您愿意，可以使用 Mustache）来提供包含引导数据集合的初始 HTML。您仍然可以使用 Jersey 来提供后续的 Ajax/Restful 调用，但 Spring 和 Play 也都内置了 Restful 概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:48:21.353

是的，您需要某种形式的模板才能将动态数据与 HTML 页面的静态布局混合。但是，如果您只需要一个页面，您可能不想投资设置一个完整的模板方案。相反，您可以简单地将您的页面分成两部分并通过将第一部分放在您的 JSON 表示之后再放在第二部分来提供您的主页。这有点难看，但是否值得为这个单一案例添加模板取决于您。如果你选择使用模板，你可以使用 mustache 或者我建议使用[Velocity Templates。](http://velocity.apache.org/engine/index.html)

通读 Jersey 代码，看起来您将不得不显式调用[Jackson](http://wiki.fasterxml.com/JacksonHome)以将自举模型对象从 Java 转换为 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T08:45:26.310

解决方案因模板引擎而异。我不太了解 Moustache.java 来翻译这个 JSP 示例。使用 Jackson 进行 JSON 序列化，这将是 JSP 标记文件：

```
public class JsonTag extends SimpleTagSupport {

/** the instance to serialize as JSON JSON */
private Object value;

@Override
public void doTag() throws JspException, IOException {
    String json = new ObjectMapper().writeValueAsString(value);
    getJspContext().getOut().print(json);
}

public void setValue(Object value) {
    this.value = value;
}

} 
```

还有你的 HTML 页面：

```
<script>
var router = new App.TabRouter({
    model: new App.MyModel(<k:json value="${it}"/>)
});
</script> 
```

对于一个严肃的应用程序，您应该重用 ObjectMapper 实例，而不是每次都创建一个新实例。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T05:01:32.093

要引导您对数据建模，您只需要将模型 JSON 呈现到标签中。[从主干模式](http://ricostacruz.com/backbone-patterns/)链接释义：

```
<script>
  // app data, rendered on server
  var photosJSON = [
    { id: 2, name: "My dog", filename: "IMG_0392.jpg" },
    { id: 3, name: "Our house", filename: "IMG_0393.jpg" },
    { id: 4, name: "My favorite food", filename: "IMG_0394.jpg" },
    { id: 5, name: "His bag", filename: "IMG_0394.jpg" },
  ];
 </script>      
 ...

 <script>
  var Photo = Backbone.Model.extend({
  // photo attributes (from above)
  });

  var PhotoCollection = Backbone.Collection.extend({
     model:Photo
  });

  // build collection model without AJAX call using
  // server rendered JSON above
  var photosCollection = new Photos(photosJSON);
</script> 
```

您可以在服务器上使用任何适当的技术来呈现带有 JSON 数据的脚本。

# sql - 尝试加入四个表一直给我多个结果，但每个 select 语句都给出了我想要的

> ID：10695802
> 
> 赞同：0
> 
> 时间：2012-05-22T04:40:39.223
> 
> 标签：sql, sql-server-2008, join, union

我有以下两个查询：

1.  ```
    SELECT     
        CondoFeed2.regionCode, CondoFeed2_Resorts.Resort, CondoFeed2_Resorts.Location,  
        CondoFeed2_Resorts.CheckIn, CondoFeed2_Resorts.[Bed Rooms]
    FROM         
        CondoFeed2_Show_All_Resorts 
    INNER JOIN
        CondoFeed2 ON CondoFeed2_Show_All_Resorts.[CondoFeed2 ID] = CondoFeed2.[CondoFeed2 ID] 
    INNER JOIN
        CondoFeed2_Resorts ON CondoFeed2_Show_All_Resorts.[Show All Resorts ID] = CondoFeed2_Resorts.[Show All Resorts ID] 
    ```

2.  ```
    SELECT     
        CondoFeed2_More_Info.[front page image]
    FROM         
        [VWR EXPORT CondoFeed] 
    INNER JOIN
        CondoFeed2_Show_All_Resorts ON [VWR EXPORT CondoFeed].[CondoFeed ID] = CondoFeed2_Show_All_Resorts.[CondoFeed2 ID] 
    RIGHT OUTER JOIN
        CondoFeed2_More_Info ON CondoFeed2_Show_All_Resorts.[Show All Resorts ID] = CondoFeed2_More_Info.[Show All Resorts ID] 
    ```

他们的结果是：

```
regionCode  Resort                                                Location                                   CheckIn       Bed Rooms
----------  ----------------------------------------------------  -----------------------------------------  ------------  ---------
FLNE        Plantation Island                                     Ormond Beach, FL                           Sep 15, 2012  1
FLNE        Georgian Inn Beach Club                               Ormond Beach, FL                           Sep 8, 2012   Studio
FLNE        Islander Beach Resort                                 New Smyrna Beach, FL                       Sep 15, 2012  Studio
FLNE        Islander Beach Resort                                 New Smyrna Beach, FL                       Sep 29, 2012  Studio
FLNE        Vacation Villas                                       Titusville, FL                             Sep 29, 2012  2
FLNE        Silver Beach Club Resort Condo                        Daytona Beach, FL                          Sep 22, 2012  Studio
FLNE        Islander Beach Resort                                 New Smyrna Beach, FL                       Sep 28, 2012  Studio
FLNE        Outrigger Beach Club                                  Ormond Beach, FL                           Sep 8, 2012   Studio
FLNE        Islander Beach Resort                                 New Smyrna Beach, FL                       Sep 7, 2012   Studio
FLNE        Georgian Inn Beach Club                               Ormond Beach, FL                           Sep 22, 2012  Studio
FLNE        Traders Inn Beach Club                                Ormond Beach, FL                           Sep 15, 2012  Studio
FLNE        Outrigger Beach Club                                  Ormond Beach, FL                           Sep 8, 2012   Hotel
FLNE        Ocean East Resort Club                                Ormond Beach, FL                           Sep 22, 2012  Studio
FLNE        Traders Inn Beach Club                                Ormond Beach, FL                           Sep 8, 2012   Studio
FLNE        Sand and Surf Condominium                             Daytona Beach Shores, FL                   Sep 8, 2012   1
FLNE        Grand Lakefront Resort Club Usa / Holly Bluff Marina  Deland, FL                                 Sep 9, 2012   2
FLNE        Dolphin Beach Club                                    Daytona Beach Shores, FL                   Sep 15, 2012  Studio
FLNE        Silver Beach Club Resort Condo                        Daytona Beach, FL                          Sep 29, 2012  Studio
FLNE        Grand Lakefront Resort Club Usa / Holly Bluff Marina  Deland, FL                                 Sep 1, 2012   2
FLNE        Dolphin Beach Club                                    Daytona Beach Shores, FL                   Sep 29, 2012  Studio
FLNE        Vacation Villas                                       Titusville, FL                             Sep 21, 2012  1
FLNE        Traders Inn Beach Club                                Ormond Beach, FL                           Sep 22, 2012  Studio
FLNE        Dolphin Beach Club                                    Daytona Beach Shores, FL                   Sep 29, 2012  Studio
FLNE        Islander Beach Resort                                 New Smyrna Beach, FL                       Sep 8, 2012   Studio
FLNE        Vacation Villas                                       Titusville, FL                             Sep 8, 2012   2
FLNE        Plantation Island                                     Ormond Beach, FL                           Sep 8, 2012   1
FLNE        Vacation Villas                                       Titusville, FL                             Sep 1, 2012   2
FLNE        Traders Inn Beach Club                                Ormond Beach, FL                           Sep 29, 2012  1
FLNE        Grand Lakefront Resort                                Club Usa / Holly Bluff Marina  Deland, FL  Sep 29, 2012  2
FLNE        Traders Inn Beach Club                                Ormond Beach, FL                           Sep 15, 2012  Studio
FLNE        Dolphin Beach Club                                    Daytona Beach Shores, FL                   Sep 22, 2012  Studio
FLNE        Traders Inn Beach Club                                Ormond Beach, FL                           Sep 29, 2012  Studio
FLNE        Outrigger Beach Club                                  Ormond Beach, FL                           Sep 15, 2012  Hotel
FLNE        Sand and Surf Condominium                             Daytona Beach Shores, FL                   Sep 29, 2012  1
FLNE        Islander Beach Resort                                 New Smyrna Beach, FL                       Sep 21, 2012  Studio
FLNE        Islander Beach Resort                                 New Smyrna Beach, FL                       Sep 14, 2012  Studio
FLNE        Ocean East Resort Club                                Ormond Beach, FL                           Sep 22, 2012  Studio
FLNE        Traders Inn Beach Club                                Ormond Beach, FL                           Sep 29, 2012  Studio
FLNE        Vacation Villas                                       Titusville, FL                             Sep 29, 2012  1
FLNE        Georgian Inn Beach Club                               Ormond Beach, FL                           Sep 22, 2012  Studio
FLNE        Sea Club Iv                                           Daytona Beach Shores, FL                   Sep 8, 2012   Studio
FLNE        Fantasy Island Resort                                 Daytona Beach Shores, FL                   Sep 15, 2012  1
FLNE        Plantation Island                                     Ormond Beach, FL                           Sep 21, 2012  1
FLNE        Sea Club Iv                                           Daytona Beach Shores, FL                   Sep 22, 2012  Studio
FLNE        Ocean East Resort Club                                Ormond Beach, FL                           Sep 29, 2012  Studio
FLNE        Georgian Inn Beach Club                               Ormond Beach, FL                           Sep 29, 2012  Studio
FLNE        Islander Beach Resort                                 New Smyrna Beach, FL                       Sep 22, 2012  Studio
FLNE        Turtle Inn                                            Daytona Beach Shores, FL                   Sep 15, 2012  Studio
FLNE        Vacation Villas                                       Titusville, FL                             Sep 22, 2012  1
FLNE        Dolphin Beach Club                                    Daytona Beach Shores, FL                   Sep 8, 2012   Studio
FLNE        Georgian Inn Beach Club                               Ormond Beach, FL                           Sep 22, 2012  Studio
FLNE        Outrigger Beach Club                                  Ormond Beach, FL                           Sep 22, 2012  Studio
FLNE        Outrigger Beach Club                                  Ormond Beach, FL                           Sep 22, 2012  Hotel
FLNE        Grand Lakefront Resort Club Usa / Holly Bluff Marina  Deland, FL                                 Sep 16, 2012  2
FLNE        Georgian Inn Beach Club                               Ormond Beach, FL                           Sep 15, 2012  Studio
FLNE        Fantasy Island Resort                                 Daytona Beach Shores, FL                   Sep 8, 2012   Studio
FLNE        Ocean East Resort Club                                Ormond Beach, FL                           Sep 15, 2012  Studio
FLNE        Georgian Inn Beach Club                               Ormond Beach, FL                           Sep 22, 2012  Studio
FLNE        Ocean East Resort Club                                Ormond Beach, FL                           Sep 8, 2012   Studio
FLNE        Turtle Inn                                            Daytona Beach Shores, FL                   Sep 29, 2012  Studio
FLNE        Club Sea Oats                                         Daytona Beach Shores, FL                   Sep 15, 2012  1
FLNE        Grand Lakefront Resort Club Usa / Holly Bluff Marina  Deland, FL                                 Sep 23, 2012  2 
```

和

```
front page image
---------------------------------------------------------------------------------------------------------------
C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\a7b45df4501c4f899bc4c5b60f357ae0.jpg
NULL

C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\caecc59b0f5947c8a98f9f44680d551b.jpg

C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\6f6465af11fa49338d564ed22de1e97a.jpg

NULL

C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\c76295564f1943bebb66e887ccefc144.jpg

C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\14a99384744c44b49acbf9b3dd8aa91d.jpg
C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\9e2dcd00ab0a403585a7a199e8c82f09.jpg
NULL
C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\4d54041b95d64625894ec4910699d55b.jpg

C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\8625205756c94603a5931065f6f76831.jpg

NULL

C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\03842b7c651b406ab2fb2d3df0d62481.jpg 
```

分别。

以下查询产生一个结果集，但它产生重复：

```
SELECT     CondoFeed2_Resorts.[Bed Rooms], CondoFeed2_Resorts.CheckIn, CondoFeed2_Resorts.Location, CondoFeed2_Resorts.Resort, CondoFeed2.regionCode, 
                      CondoFeed2_More_Info.[front page image]
FROM         CondoFeed2_Show_All_Resorts INNER JOIN
                      CondoFeed2_Resorts ON CondoFeed2_Show_All_Resorts.[Show All Resorts ID] = CondoFeed2_Resorts.[Show All Resorts ID] INNER JOIN
                      CondoFeed2_More_Info ON CondoFeed2_Show_All_Resorts.[Show All Resorts ID] = CondoFeed2_More_Info.[Show All Resorts ID] INNER JOIN
                      CondoFeed2 ON CondoFeed2_Show_All_Resorts.[CondoFeed2 ID] = CondoFeed2.[CondoFeed2 ID] 
```

这产生：

```
房间 入住 地点 度假区​​代码 首页图片
--------- ------------ -------- ---------- ----------- -------------- ------------------------------------ -------------------------------------------------- -------------------------------------------
酒店 2013 年 5 月 11 日 ACAPULCO, GRO MEXICO Hotel & Club Aladino's ACAP  
酒店 2013 年 5 月 11 日 ACAPULCO, GRO MEXICO Hotel & Club Aladino's ACAP  
酒店 2013 年 5 月 4 日 ACAPULCO，GRO MEXICO Hotel & Club Aladino's ACAP  
酒店 2013 年 5 月 4 日 ACAPULCO，GRO MEXICO Hotel & Club Aladino's ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 Sep 23, 2012 Acapulco, GRO MEXICO Mayan Sea Garden Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\e06d05f720d344acaafec5d776694301.jpg
1 Sep 23, 2012 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\f594d4ee4acc4e6387ac425e6c30ca48.jpg
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 Sep 23, 2012 Acapulco, GRO MEXICO Mayan Sea Garden Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\59064e6e752d443e89b271b166ab87b9.jpg
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 Sep 23, 2012 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\6cdb76a4733c46e2ac2361eda6829861.jpg
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 Sep 23, 2012 Acapulco, GRO MEXICO Mayan Sea Garden Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\995d8616aa3f4c85a5dd7c365276e113.jpg
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 Sep 23, 2012 Acapulco, GRO MEXICO Mayan Sea Garden Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\69d05f9cd02e4bd0af5525129116f9a5.jpg
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 Sep 23, 2012 Acapulco, GRO MEXICO Mayan Sea Garden Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\15293494d88a4d19b25a87d9ab294261.jpg
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 Sep 23, 2012 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\0391fdb43e1f4aef85ef2cb8800e2db6.jpg
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
1 2012 年 9 月 23 日 Acapulco, GRO MEXICO 玛雅海洋花园 Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
Hotel Sep 2, 2012 Acapulco, GRO MEXICO The Grand Mayan Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\e06d05f720d344acaafec5d776694301.jpg
2012 年 9 月 2 日酒店 Acapulco, GRO MEXICO The Grand Mayan Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\f594d4ee4acc4e6387ac425e6c30ca48.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
Hotel Sep 2, 2012 Acapulco, GRO MEXICO The Grand Mayan Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\59064e6e752d443e89b271b166ab87b9.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
Hotel Sep 2, 2012 Acapulco, GRO MEXICO The Grand Mayan Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\6cdb76a4733c46e2ac2361eda6829861.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
Hotel Sep 2, 2012 Acapulco, GRO MEXICO The Grand Mayan Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\995d8616aa3f4c85a5dd7c365276e113.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
Hotel Sep 2, 2012 Acapulco, GRO MEXICO The Grand Mayan Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\69d05f9cd02e4bd0af5525129116f9a5.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
Hotel Sep 2, 2012 Acapulco, GRO MEXICO The Grand Mayan Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\15293494d88a4d19b25a87d9ab294261.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
Hotel Sep 2, 2012 Acapulco, GRO MEXICO The Grand Mayan Acapulco ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\0391fdb43e1f4aef85ef2cb8800e2db6.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO The Grand Mayan Acapulco ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\e06d05f720d344acaafec5d776694301.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\f594d4ee4acc4e6387ac425e6c30ca48.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\59064e6e752d443e89b271b166ab87b9.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日 Acapulco, GRO MEXICO Club Vacacional Tortuga ACAP C:\Users\Administrator\Documents\Visual Web Ripper\Output\CondoFeed2\Files\6cdb76a4733c46e2ac2361eda6829861.jpg
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  
酒店 2012 年 9 月 2 日，阿卡普尔科，GRO MEXICO Club Vacacional Tortuga ACAP  

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:06:51.443

The "combined statement" has omitted parts of the constituent queries, such as `VWR Export CondoFeed`.

The following is what I would consider a "simple inner join" of your two queries. Without knowing your schema and data, testing it is up to you.

```
SELECT     
    CondoFeed2.regionCode, CondoFeed2_Resorts.Resort, CondoFeed2_Resorts.Location,  
    CondoFeed2_Resorts.CheckIn, CondoFeed2_Resorts.[Bed Rooms],
    CondoFeed2_More_Info.[front page image]
FROM         
    CondoFeed2_Show_All_Resorts 
INNER JOIN
    CondoFeed2 ON CondoFeed2_Show_All_Resorts.[CondoFeed2 ID] = CondoFeed2.[CondoFeed2 ID] 
INNER JOIN
    CondoFeed2_Resorts ON CondoFeed2_Show_All_Resorts.[Show All Resorts ID] = CondoFeed2_Resorts.[Show All Resorts ID]
INNER JOIN
    [VWR EXPORT CondoFeed] ON [VWR EXPORT CondoFeed].[CondoFeed ID] = CondoFeed2_Show_All_Resorts.[CondoFeed2 ID] 
RIGHT OUTER JOIN
    CondoFeed2_More_Info ON CondoFeed2_Show_All_Resorts.[Show All Resorts ID] = CondoFeed2_More_Info.[Show All Resorts ID] 
```

It is not obvious to me why your query was giving you duplicate rows, but an omitted `INNER JOIN` (which did occur in your case) is definitely expected to give you unwanted extra rows.

(Generally, duplicate rows are also often caused by insufficiently specific join conditions which can cause both sides to "multiply" each other. In a case like yours, it may be useful to check whether the column mentioned in a join condition is the primary key on at least one side of the join, as opposed to being just one column out of many in a composite primary key, or in a multi-column unique constraint. The simplest fix would then be to add those other columns to the join condition as well.)

# c# - 从javascript调用类文件（c#中的.cs）函数并帮助如何编写Ajax+Webservices

> ID：10695811
> 
> 赞同：-3
> 
> 时间：2012-05-22T04:41:52.553
> 
> 标签：c#, javascript

这里我的简单示例代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace PopUpFromCsFile
{
    public class PopUpWindow
    {
        public void PopUpFromCsFile()
        {
         string str1 = "<script> $.ajax({" +
                     "type: 'GET'," +
                      "url: 'Service/Class1.cs/callfromjs'," +
                        "data: '{}'," + "success: function () { getDetails(); } " +
                        "});</script>";

        page.ClientScript.RegisterStartupScript(this.GetType(), "script1", str1);

        }
        [WebMetod]
        public string  CallFromJs()
        {
            return "santosh";
        }

      public void getDetails()
       {
        string str = "<script>alert('Hai');</script>";
        System.Web.UI.Page page = (System.Web.UI.Page)HttpContext.Current.Handler;
        page.ClientScript.RegisterStartupScript(this.GetType(), "script2", str);
       }
    }
} 
```

## 解释

在 PopUpFromCsFile() 中，我为 Ajax+WebMethod 编写了代码。Url 路径是否正确，这里我无法从脚本调用 getDetails()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:45:01.393

你不能。A`.cs`是 C# 源代码文件，不能（来自*任何*语言）按原样使用。您必须将其编译为 DLL。

一旦这样做，您就无法通过 JavaScript 与 DLL 进行通信。JavaScript 被沙盒化到您的浏览器中。您需要编写（并在每台客户端 PC 上安装）浏览器扩展来与本机 DLL 交互。

您需要将 C# 代码重写为 JavaScript。

# php - 贝宝购物车集成

> ID：10695814
> 
> 赞同：0
> 
> 时间：2012-05-22T04:42:25.853
> 
> 标签：php, paypal, shopping-cart

我正在尝试将购物车集成到贝宝，我的应用程序在 PHP 中。表单正在使用所有参数正确提交到贝宝，但是在我尝试打印 POST 数组时返回响应时，它是空白的。可以有人请帮我，我能以什么形式获得paypal返回的交易ID和其他参数。

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:46:52.363

贝宝将获取数组中的数据作为查询参数返回。所以使用 $_GET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:56:45.347

这是paypal ipn吗？如果是，您应该遵循一个**程序**，而不是单向调用。

# c++ - 如何使用 cin 实现单行整数类型命令行输入验证？

> ID：10695818
> 
> 赞同：1
> 
> 时间：2012-05-22T04:42:46.623
> 
> 标签：c++

我有一个程序要求用户输入 [0,2] 范围内的整数。我使用以下链接作为指南。

[使用 cin 的良好输入验证循环 - C++](https://stackoverflow.com/questions/2075898/good-input-validation-loop-using-cin-c)

但是，当用户在不输入数据的情况下按下回车键时，光标只会转到命令提示符中的下一行，而我更希望它提示用户输入有效数字。在这种情况下提示用户是否有意义，或者是否有理由不将验证作为单行输入开始？在字符串的情况下，我会使用 getline 来解决这个问题，在这种情况下我应该以某种方式使用它吗？这是我的代码，基于上面的链接：

```
#include <iostream>

int main()
{
    int answeredNumber;
    while(1)
    {
        std::cout << "Enter your answer: ";
        if(std::cin >> answeredNumber && answeredNumber >= 0 && answeredNumber <= 2)
        {
            break;
        }
        else
        {
            std::cout << "Please enter a valid answer: " ;
            std::cin.clear();
          std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
        }
    }
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:49:31.970

那是因为获得一个整数`cin`将跳过前导空格，*包括*换行符。没有简单的方法解决这个问题。

如果您想要基于行的输入，您可以将输入值作为*字符串*获取，然后将其解释为：

```
#include <iostream>
#include <sstream>
#include <string>

int main (void) {
    std::string inputLine;
    int answer;
    std::cout << "Enter your answer: ";
    while(1) {
        getline (std::cin, inputLine);
        std::stringstream ss (inputLine);
        if ((ss >> answer))
            if ((answer >= 0) && (answer <= 2))
                break;
        std::cout << "No, please enter a VALID answer: " ;
    }
    std::cout << "You entered " << answer << '\n';
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:57:10.923

另一个答案说明了问题。但是，我认为对您的代码稍作修改将解决您的直接问题：

```
int answeredNumber = std::cin.get() - '0';
if(answeredNumber >= 0 && answeredNumber <= 2) 
```

`std::cin`用 >> 操作符接收*格式化的*数据，你将需要使用`get()`和其他函数来接收*未格式化*的数据。

# windows-phone-7 - 从 windows phone 7 中选择多少张照片？

> ID：10695819
> 
> 赞同：1
> 
> 时间：2012-05-22T04:43:00.897
> 
> 标签：windows-phone-7

我放置了一个图像按钮，单击它需要选择照片，并且选择的图像需要显示在该图像控件中。

1.需要从图库一种类型中选择一张照片。

2.如何从存储卡文件夹中选择照片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:40:24.780

您可以使用[PhotoChooserTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.photochoosertask%28v=vs.92%29.aspx)从设备中选择图像。

[请参阅http://msdn.microsoft.com/en-us/library/hh394019(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh394019(v=vs.92).aspx)上的示例用法

# c# - 在 WP7 的独立存储中存储类对象

> ID：10695821
> 
> 赞同：1
> 
> 时间：2012-05-22T04:43:26.453
> 
> 标签：c#, windows-phone-7

如何在 WP7 隔离存储中存储类的对象？我想检索它并在需要时对其进行编辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T05:32:59.313

您需要序列化数据以保存它，然后反序列化它以加载它。[您可以在本文](http://www.codeproject.com/Articles/156254/Simple-Data-Serialization-on-WP7)中找到一个完整的工作示例。

例如，将类和属性标记如下：

```
[DataContract] 
public class Employee  
{  
     [DataMember] 
     public int EmployeeNumber { get; set; }  
     [DataMember] 
     public string Name { get; set; }  
     [DataMember] 
     public string Department { get; set; }  
} 
```

构造一个序列化器：

```
DataContractSerializer mySerializer = new DataContractSerializer(typeof(Employee)); 
```

`ReadObject`然后通过/加载/保存`WriteObject`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:55:36.883

你可以使用xml序列化

```
 public static void Serialize<T>(T obj, string fileName)
    {   
     try
      {
        var store = IsolatedStorageFile.GetUserStoreForApplication();
        IsolatedStorageFileStream stream = store.OpenFile(fileName, FileMode.Create);

        XmlSerializer serializer = new XmlSerializer(typeof(T));

        using (XmlWriter xmlWriter = XmlWriter.Create(stream, writerSettings))
        {
            serializer.Serialize(xmlWriter, obj);
        }

    stream.Close();
   }
   catch (Exception ex)
   {
      throw ex;
   }
  }

    public static T DeSerialize<T>(string fileName)
    {
      try
      {
         var store = IsolatedStorageFile.GetUserStoreForApplication();
         IsolatedStorageFileStream stream = store.OpenFile(fileName, FileMode.Open);

         XmlSerializer serializer = new XmlSerializer(typeof(T));
         return (T)serializer.Deserialize(stream);
      }
      catch (Exception ex)
      {
        throw ex;
      }
    } 
```

# capistrano - 使用 Webistrano 检索远程文件

> ID：10695823
> 
> 赞同：1
> 
> 时间：2012-05-22T04:43:40.353
> 
> 标签：capistrano, webistrano

我想要一个能够捆绑一些远程文件并允许 Webistrano 用户将这些文件下载到他们的机器的任务。

Capistrano 具有[DSL 下载/获取](https://github.com/capistrano/capistrano/wiki/2.x-DSL-Action-File-Transfer-Download)，它将执行 sftp 或 scp 传输。这适用于 webistrano，但仅将其下载到 Webistrano 服务器。

从这一点开始，我可以做些什么来将此文件返回给用户？

# jquery - 我如何获得具有类的元素的 id

> ID：10695828
> 
> 赞同：1
> 
> 时间：2012-05-22T04:44:24.270
> 
> 标签：jquery, element

假设我有清单

```
<ul id="left-side-menu" style="display: block;">

    <li> <a id="1" class="lists active" href="javascript:void(0)">My company 1</a></li>

    <li> <a id="2" class="lists" href="javascript:void(0)">My company 2</a></li>

    <li> <a id="3" class="lists" href="javascript:void(0)">My company 3</a></li>
</ul> 
```

为了使用列表类获取具有活动类的元素的 id，我这样写

> $("a.lists").hasClass("active").attr('id');

但它给出了一个错误

> $("a.lists").hasClass("active").attr 不是函数

请帮我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T04:46:51.537

```
$("a.lists.active").attr('id') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:48:25.623

```
$("a.lists.active").attr('id'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T04:54:09.320

[`.hasClass()`方法](http://api.jquery.com/hasClass/)的返回值是一个布尔值，当然布尔值没有`.attr()`方法。

要选择具有多个类的元素，只需列出所有必需的类，名称之间*没有空格*，如下所示：

```
$("a.lists.active").attr('id'); 
```

这应该返回与该选择器匹配的第一个元素的 id 值，如果没有元素匹配，则返回 undefined。（如果您希望始终只有一个元素具有“活动”类，那会很好。）

# actionscript-3 - 我如何将 fdt.launch.Application 用于 AIR 项目和 FDT 5.5

> ID：10695831
> 
> 赞同：0
> 
> 时间：2012-05-22T04:44:30.320
> 
> 标签：actionscript-3, ant, air, fdt

我正在尝试在 AIR Mobile 项目上运行它..

```
<fdt.launch.application projectname="TestAndroid" mainclass="src/com/powerflasher/SampleApp/TestAndroid.as" debug="false" target="../bin/TestAndroid.swf" startswf="false" /> 
```

给出以下错误.. fdt.launch.Application 不支持 AIR 项目。

有替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:47:42.033

是和不是。

## 是的

FDT 5.5 提供了一个新的“fdt.invoke.launchConfiguration”任务。在 ANT 环境中启用启动配置的执行。

[在这里观看视频。](https://vimeo.com/41847484)

[请参阅此处的文档。](http://fdt.powerflasher.com/docs/FDT_Ant_Tasks#fdt.invoke.launchConfiguration_.28FDT_5.5.29)

## 不

你不完全一样；但是，您可以通过“fdt.invoke.launchConfiguration”任务和启动器 GUI 组合使用所有相同的选项（以及更多选项）。唯一的缺点是这个工作流程不那么便携。FDT 团队正在考虑提供更多选项以使其更便携。

[更新] 另请参阅[此线程](https://stackoverflow.com/questions/10710765/how-to-build-a-modular-air-application-with-fdt-5-5/10739095#10739095)以获取有关构建模块 AIR 应用程序的替代方案的更多信息。

# java - 如何在 JSOUP 中选择此元素？

> ID：10695835
> 
> 赞同：27
> 
> 时间：2012-05-22T04:45:04.753
> 
> 标签：java, jsoup

这是 HTML 结构：

![在此处输入图像描述](../Images/6f4aea4894a8297a7241601894e9a732.png)

```
Element link = doc.select("div.subtabs p").first(); 
```

这似乎不起作用。我该如何选择`p`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-22T04:51:47.430

class="subtabs" 的 DIV 实际上不是元素的父`p`元素，而是`p`. 要检索`p`，您需要首先获取对具有 id="content" 的父 DIV 的引用：

```
Element link = doc.select("div#content > p").first(); 
```

此外，您需要该`>`符号来表明您正在选择 div#content 的子项。

> parent > child：直接从 parent 下降的子元素，例如 div.content > p 找到 p 个元素；和 body > * 找到 body 标签的直接子元素

如果您以后遇到 JSOUP CSS 选择器，请查看[JSOUP 选择器语法手册](http://jsoup.org/cookbook/extracting-data/selector-syntax)，其中有一些很好的示例和解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T04:53:29.677

`div#content p`. 它不是`.subtabs`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-08T12:25:09.253

您尝试提取的**p标签不是****div**的子标签。它是一个兄弟姐妹。父 div 的 id 是**内容**，您想要的 p 标签是其父级中的第一个**p**标签**。**所以使用`doc.select("div#content > p").first();`

**#**表示 id，**>**表示 RHS 是 LHS 的子代。因此，该语句意味着获取第一段，该段落是 div 的子项，以 id 为**内容**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-14T13:32:30.233

Chrome [SelectorGadget](https://chrome.google.com/webstore/detail/selectorgadget/mhjhnkcfbdhnjickkkdbjoemdmbfginb)非常有助于为 jSoup 构建 CSS 选择器，只需点击即可。在尝试针对特定领域时，它为我节省了数小时的开发时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-19T08:57:07.080

`Element link = doc.select("div.subtabs + p")` 它找到紧跟在兄弟元素之前的元素

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-04T08:26:38.147

试试这个：

```
Element link = doc.select("div.subtabs > p").first(); 
```

# twitter-bootstrap - Python 和 Twitter 引导程序

> ID：10695838
> 
> 赞同：1
> 
> 时间：2012-05-22T04:45:27.060
> 
> 标签：twitter-bootstrap, web-frameworks, cherrypy

我目前在 CherryPy 工作，并使用 pymssql 库连接到 mssql 数据库。我正在寻找一个花哨的前端来显示具有花哨的排序、编辑和更新记录功能的表格。使用 Twitter 的 Bootstrap 可以做到这一点吗？还是我应该研究模板引擎？

我是 Python 新手，但据我了解是这个流程

*   使用数据库建立连接
*   将该 python 代码集成到 Web 框架（CherryPy、web2Py 等......）
*   使用模板引擎显示 sql 查询？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:55:13.453

我在 Web 应用程序中显示表格数据的最佳方式是使用数据表：[http ://www.datatables.net/](http://www.datatables.net/)

他们的博客上有一篇关于如何将其与引导外观和感觉集成的帖子：http: [//datatables.net/blog/Twitter_Bootstrap_2](http://datatables.net/blog/Twitter_Bootstrap_2)

# c++ - std::fstream 文件在读取结束时打印垃圾

> ID：10695850
> 
> 赞同：1
> 
> 时间：2012-05-22T04:48:04.297
> 
> 标签：c++, file

我正在编写一个程序来练习该语言，但是我从对我来说似乎正确的代码中得到了一些非常奇怪的输出。

编码：

```
#include <iostream>
#include <fstream>
#include <list>
struct Car
{
    std::string make;
    std::string model;
    int partNo;
    double price;
    int quantity;
    std::string partname;
};
void AddItem();
void _Update(int PartNo, int quantity);
void UpdateList(std::list<Car>& _Car);
int main()
{
    std::list<Car> _Car;
    UpdateList(_Car);
    for(std::list<Car>::iterator iter = _Car.begin(); iter != _Car.end(); iter++)
     {
         std::cout << iter->make << " " << iter->model << " " << iter->partNo << " " << iter->price << " " << iter->quantity << " " << iter->partname << std::endl;
     }
}

void UpdateList(std::list<Car>& _Car)
{
    std::ifstream File("CarParts.txt");
    if(!File.is_open())
        std::cerr << "Bad file input....... closing....";

    while(!File.eof())
    {
        Car tempObj;
        File >> tempObj.make >> tempObj.model >> tempObj.partNo >> tempObj.price >> tempObj.quantity;
        getline(File,tempObj.partname);
        _Car.push_back(tempObj);
    }
    File.close();

} 
```

前哨给出：

```
 Pajero NA1H25 1 3.65 11 BLADE W/S WIPER Honda_Sivic R34gFk 2 4.97 15
 ENGINE CHANGE    2 4.97 15 
```

记事本文件：

```
Pajero NA1H25 1 3.65 11 BLADE W/S WIPER
HondaSivic R34gFk 2 4.97 15 ENGINE CHANGE 
```

我实际上想要打印出来的两行下的三个数字是什么？这真的让我很困惑......如果你能帮忙，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:12:12.000

这是人们在使用 C++ 读取文件数据时遇到的常见问题。问题是您对`eof`. 该标志仅在尝试读取数据失败后设置。

因此，在阅读了前两行之后，它仍然没有到达文件末尾。它已读取到它，但`eof`尚未设置。然后它将循环第三次，尝试读取 2 行，然后退出。`eof`问题是在将第三个循环的结果推送到您的汽车列表之前，您从未检查过。

在您的情况下，您可以将`eof`支票移至`getline`调用后，或使用`getline`返回值。

例如：

```
while(true)
{
    Car tempObj;
    File >> tempObj.make >> tempObj.model >> tempObj.partNo
         >> tempObj.price >> tempObj.quantity;
    if (!getline(File,tempObj.partname)) break;
    _Car.push_back(tempObj);
} 
```

这将在推送之前检查数据是否已成功读取。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-22T05:02:43.740

对于初学者，将程序的命名空间设置为 std 以避免讨厌的 std::string 等语法。

在您的文件顶部附近，在您的导入下，插入： using namespace std;

看起来目标是从文件中填充列表。

看这部分：

```
 File >> tempObj.make >> tempObj.model >> tempObj.partNo >> tempObj.price >> tempObj.quantity;
 getline(File,tempObj.partname); 
```

我认为更好的解决方案是用getLine解析每一行，然后用空格分隔符或逗号相应地解析数据。空白分隔符可能很挑剔。

# python - 在 Unicode 文本文件上的 App Engine Python 错误中接收电子邮件附件

> ID：10695851
> 
> 赞同：2
> 
> 时间：2012-05-22T04:48:11.473
> 
> 标签：python, google-app-engine, email, python-2.7, email-attachments

我有一些代码可以解析电子邮件并找到附件，然后将它们作为 db.BlobProperties 存储到数据存储中（稍后可能会将其更改为 Blobstore）。问题是当我发送一个 UTF8 编码的文本文件时，它会产生一个错误。

该代码基本上保存文件并返回一个密钥，该密钥转换为字符串，然后存储在父电子邮件实体中。如您所见，我对文件进行解码，然后将其存储为 blob。我已经发送了很多附件，并且此代码适用于除使用 Unicode 编码的文本之外的所有内容。有一个更好的方法吗？我可以做些什么来处理 Unicode 文本附件？

代码片段

```
 my_file = []
    my_list = []
    if hasattr(mail_message, 'attachments'):
        file_name = ""
        file_blob = ""
        for filename, filecontents in mail_message.attachments:
            file_name = filename
            file_blob = filecontents.decode()
            my_file.append(file_name)
            my_list.append(str(store_file(self, file_name, file_blob))) 
```

存储文件

```
def store_file(self, file_name, file_blob):
    new_file = myblob(file_name = file_name, 
                      file_blob = file_blob)
    return new_file.put() 
```

我试过`file_blob = str(file_blob)`在上面使用无济于事。这只会破坏代码，并且文件永远不会被存储。

Unicode 文本文件的日志 1

```
Property file_blob must be convertible to a Blob instance (Blob() argument should be str instance, not unicode)
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/webapp/mail_handlers.py", line 65, in post
    self.receive(mail.InboundEmailMessage(self.request.body))
  File "/base/data/home/apps/s~ae-baseapp/1.359073377819595139/controllers/InboundHandler.py", line 51, in receive
    file_list.append(str(store_file(self, file_name, file_blob)))
  File "/base/data/home/apps/s~ae-baseapp/1.359073377819595139/models/MyModel.py", line 63, in store_file
    file_blob = file_blob)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 974, in __init__
    prop.__set__(self, value)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 614, in __set__
    value = self.validate(value)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2780, in validate
    (self.name, self.data_type.__name__, err))
BadValueError: Property file_blob must be convertible to a Blob instance (Blob() argument should be str instance, not unicode) 
```

删除 filecontents.decode() 并将其替换为仅文件内容的日志 2。

```
Property file_blob must be convertible to a Blob instance (Blob() argument should be str instance, not EncodedPayload)
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/webapp/mail_handlers.py", line 65, in post
    self.receive(mail.InboundEmailMessage(self.request.body))
  File "/base/data/home/apps/s~ae-baseapp/1.359097282640216691/controllers/InboundHandler.py", line 57, in receive
    file_list.append(str(store_file(self, file_name, file_blob)))
  File "/base/data/home/apps/s~ae-baseapp/1.359097282640216691/models/MyModel.py", line 64, in store_file
    file_blob = file_blob)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 974, in __init__
    prop.__set__(self, value)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 614, in __set__
    value = self.validate(value)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2780, in validate
    (self.name, self.data_type.__name__, err))
BadValueError: Property file_blob must be convertible to a Blob instance (Blob() argument should be str instance, not EncodedPayload) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:19:03.847

附件负载是[EncodedPayload](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/mail.py#536)类的实例。附件有一个编码和一个可选的字符集。前者指的是base64等传输编码；后者适用于 UTF-8 等字符编码（这里的字符集有点过时且具有误导性）。该`EncodedPayload.decode()`方法同时解码传输编码和文本编码，正如您所注意到的，如果您只想获取用户附加到其消息的原始字节，这并不是很有帮助。

您可以在此处采用多种方法，但我建议您复制 EncodedPayload 用于解码传输编码的逻辑，如下所示：

```
if filecontents.encoding and filecontents.encoding.lower() != '7bit':
  try:
    payload = filecontents.payload.decode(filecontents.encoding)
  except LookupError:
    raise UnknownEncodingError('Unknown decoding %s.' % filecontents.encoding)
  except (Exception, Error), e:
    raise PayloadEncodingError('Could not decode payload: %s' % e)
else:
  payload = filecontents.payload 
```

请注意，如果附件*是*文本，则在存储时需要包含字符编码，否则在将其发送回用户时将无法解释 - 原始文本可能已使用任何字符编码进行编码.

同样，如果可以，您还应该保存附件的 mimetype，但这似乎不会在 API 的任何地方公开。您可能需要考虑完全避免使用 IncomingMessage 类，而是使用 Python 的 mime 消息模块解码 POST 请求的主体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:38:23.637

检查此代码是否有帮助：

============================

```
 my_file = []
    my_list = []
    if hasattr(mail_message, 'attachments'):
        file_name = ""
        for filename, filecontents in mail_message.attachments:
            file_name = filename
            file_blob = filecontents.payload
            file_blob = file_blob.decode(filecontents.encoding)
            my_file.append(file_name)
            my_list.append(str(store_file(self, file_name, file_blob))) 
```

# c++ - 在 C++ 中创建的动态数组

> ID：10695857
> 
> 赞同：0
> 
> 时间：2012-05-22T04:49:15.280
> 
> 标签：c++, visual-studio-2010

我需要创建一个动态数组，其元素可能会根据用户指定的“X”变量的值增加/减少，我尝试使用 CArray 但 VS 2010 不支持其头文件“afxtempl.h”，是否存在解决方法？如果没有，是否有除 CArray 之外的函数用于 c++ 而不是编译器.. 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:50:55.293

使用`std::vector`. 它受 C++ 标准支持，`CArray`而 MFC 特定于该标准。有关介绍，请参阅[A-Beginners-Guide-to-stdvector](http://www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c4027/C-Tutorial-A-Beginners-Guide-to-stdvector-Part-1.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T04:53:36.353

不要使用 CArray，因为它适用于 MFC，而是要学会爱你的 STL。使用`std::vector`,

查看[http://www.sgi.com/tech/stl/Vector.html](http://www.sgi.com/tech/stl/Vector.html)以获取快速参考

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:04:23.260

下面的代码片段创建了一个包含 123 个整数的向量。

```
#include <vector>
int main()
{
    int X = 123;
    vector<int> myContainerOfInts(X);

    myContainerOfInts[0] = 1;
} 
```

# python - django 1.4 本地管理图像 404

> ID：10695860
> 
> 赞同：1
> 
> 时间：2012-05-22T04:49:29.583
> 
> 标签：python, django, django-admin

在 Django 1.4 中，在我的本地开发管理员中，当我为具有 ImageField 的模型上传图像时，上传文件的 url 解析为 404。

我的设置.py

```
MEDIA_ROOT = '%s/../public/media/' % os.path.dirname(__file__)
MEDIA_URL = 'http://mysite.dev:8000/media/' 
```

admin 中的图片路径为[http://mysite.dev:8000/images/image.jpg](http://mysite.dev:8000/images/image.jpg)

如何显示在本地管理员中上传的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:22:32.323

Django 不打算提供图像，您的 HTTP 服务器将（无论如何都应该在生产中），因此是 404。但是您可以要求 django 在 dev 中为您的图像提供服务，正如[其他 SO 主题](https://stackoverflow.com/questions/2451352/cant-figure-out-serving-static-images-in-django-dev-environment)详细解释的那样。

# python - 如何仅显示 django 模板中列表中的不同值？

> ID：10695862
> 
> 赞同：1
> 
> 时间：2012-05-22T04:49:35.060
> 
> 标签：python, django, list, templates, distinct

```
def avail_times(request, club_id):
    club = get_object_or_404(Club,pk=club_id)
    open_slots = Opening.objects.filter(club_id=club_id, day=datetime.date.today(), reservation ='Open')
    return render_to_response('reserve/templates/avail_times.html', {'club':club, 'open_slots':open_slots})

<ul>
{% for slot in open_slots %}
    <li> {{slot }} on Court {{slot.court}} </li>
{% endfor %}
</ul>

from django.db import models
import datetime

class Club(models.Model):
    establishment = models.CharField(max_length=200)
    address = models.CharField(max_length=200)
    def __unicode__(self):
        return self.establishment

class Day(models.Model):
    club = models.ForeignKey(Club)
    day = models.DateField('day')
    def __unicode__(self):
        return unicode(self.day)

class Court(models.Model):
    club = models.ForeignKey(Club)
    day = models.ForeignKey(Day)
    court = models.IntegerField(max_length=200)
    def __unicode__(self):
        return unicode(self.court)

class Opening(models.Model):
    club = models.ForeignKey(Club)
    day = models.DateField('date')
    court = models.ForeignKey(Court)
    slot = models.TimeField('slot')
    reservation = models.CharField(max_length=200)
    def __unicode__(self):
        return unicode(self.slot) 
```

在上面的模板中，我只想显示一个不同的“插槽”时间。因此，即使早上 6 点出现在“法院 1”和“法院 2”下，我也希望它只通过模板显示一次。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T05:57:19.443

内置[`regroup`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)过滤器正是这样做的。

# mysql - MySQL中多个表的总分

> ID：10695864
> 
> 赞同：2
> 
> 时间：2012-05-22T04:49:48.477
> 
> 标签：mysql, sql, aggregate-functions

给定多个表之间的连接，我想在单个查询中找到列的总和。

我有一个活动表，一个映射用户执行活动的表，以及一个将团队映射到执行活动的表。用户和团队都可以多次执行相同的活动。

每个活动都值得一定数量的积分，我想通过将他们的活动与其团队的活动相加来知道给定用户的总积分数。

我已经尝试了三个表之间的各种连接组合，但无法计算出正确的查询来计算给定用户的总分。

以下 SQL 将创建此设置的最小版本：

```
CREATE TABLE `activity` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL DEFAULT '',
  `points` INT(10) UNSIGNED NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=INNODB;

CREATE TABLE `team_action` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `activity_id` INT(11) UNSIGNED NOT NULL,
  `date` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `team_action_ibfk_1` FOREIGN KEY (`activity_id`) REFERENCES `activity` (`id`)
) ENGINE=INNODB;

CREATE TABLE `user_action` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `activity_id` INT(11) UNSIGNED NOT NULL,
  `date` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `user_action_ibfk_1` FOREIGN KEY (`activity_id`) REFERENCES `activity` (`id`)
) ENGINE=INNODB;

INSERT INTO `activity` (`id`, `name`, `points`)
VALUES (1,'Running',10), (2,'Swimming',20), (3,'Hiking',30), (4,'Cycling',40);

INSERT INTO `team_action` (`id`, `activity_id`, `date`)
VALUES (1,2,'2012-05-22 14:32:31'), (2,4,'2012-05-22 14:32:36');

INSERT INTO `user_action` (`id`, `activity_id`, `date`)
VALUES (1,1,'2012-05-22 14:32:08'), (2,1,'2012-05-22 14:32:18'), (3,3,'2012-05-22 14:32:23'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:38:04.007

从表定义中不清楚用户与团队的关系（即对于用户，你怎么知道哪个是“他们的”团队？）但我认为总结积分的关键是`SUM`使用`UNION ALL`in一个子查询。

类似于以下内容：

```
SELECT SUM(points) AS total
FROM
(SELECT points
 FROM team_action JOIN activity ON(activity.id = team_action.activity_id)
 WHERE team_action.id = my_team
 UNION ALL
 SELECT points
 FROM user_action JOIN activity ON(activity.id = user_action.activity_id)
 WHERE user_action.id = my_user) me_and_team 
```

# ruby-on-rails - 将复选框更改为图像导轨

> ID：10695865
> 
> 赞同：2
> 
> 时间：2012-05-22T04:49:51.147
> 
> 标签：ruby-on-rails, image, checkbox

我正在尝试使复选框成为图像。有没有办法用rails标签（即image_tag）来做到这一点，还是只能通过javascript/css？

下面是一个示例标签...但现在只显示图像和复选框。谢谢！

```
 <img src="/images/teddy-bear.jpg" align="left">
  <%= f.check_box :bear %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T23:00:14.740

我最终使用了这个脚本......

[http://jordankasper.com/jquery/imagecheck/examples.php](http://jordankasper.com/jquery/imagecheck/examples.php)

我的 javascript 是：

```
$(function() {
$('#pin_candle')
  .simpleImageCheck({
    image: '/images/candle.jpeg',
    imageChecked: '/images/candle2.jpeg'
  })
  .change(function() {
    var c = 'checked';
    if (!$('#pin_candle').is(':checked')) {
      $(this).closest('form').submit();
    }
    $(this).closest('form').submit();
  });
}); 
```

我的轨道是：

```
<%= f.check_box :candle %> 
```

它给出了一个复选框图像并在单击时更改为另一个复选框图像。复选框更改时提交的表单。

谢谢你。

# ios5 - 推送导航控制器堆栈后视图不显示

> ID：10695871
> 
> 赞同：0
> 
> 时间：2012-05-22T04:50:30.550
> 
> 标签：ios5, uinavigationcontroller, viewcontroller

我正在尝试使用导航控制器来推送/弹出视图，但我不希望顶部带有按钮的栏；我自己在做导航 UI。

所以我在我的 AppDelegate 中创建了一个 navigationController：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[WSViewController alloc] initWithNibName:@"WSViewController" bundle:nil];
    self.window.rootViewController = self.viewController;

    self.navController = [[UINavigationController alloc] 
                      initWithRootViewController: self.viewController];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

然后在我的 WSViewController 中，我有一个 IBAction 方法，它在导航堆栈上推送另一个视图（我已经验证它正确地执行此操作；我在堆栈上看到它）：

```
- (IBAction)showInfo:(UIButton *)sender {
    if (self.wsInfoViewController == nil) {
        WSInfoViewController *wic = [[WSInfoViewController alloc] initWithNibName:@"WSInfoViewController" bundle:nil];
        self.wsInfoViewController = wic;
    }
    [self.navigationController pushViewController:self.wsInfoViewController animated:YES];
} 
```

但是当我点击 WSViewController 中的信息按钮时，我没有看到信息视图出现（显示得很好）。

如果我将navigationController 设为根控制器，那么当我点击信息按钮时我*会*看到wsInfoViewController，但是，我也会在顶部看到导航栏，这是我不想要的！

所以......首先，我认为我可以以这种方式使用导航控制器是错误的（即，将其用于堆栈目的，但根本不能用于任何 UI）？

其次，如果我没记错的话，为什么我推送到堆栈上的视图没有显示出来？我猜这是因为我没有正确地将导航控制器连接到窗口，但我不知道该怎么做。

谢谢！！！

伊丽莎白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:29:11.057

所以我想我有我的问题的答案。也就是说，您必须将导航控制器设置为 AppDelegate 窗口的根视图控制器才能使用它，否则窗口不知道它。我的 WSViewController 仍然是导航控制器的根视图控制器。然后要摆脱导航栏，您可以将其隐藏。这是更新的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[WSViewController alloc] initWithNibName:@"WSViewController" bundle:nil];
    // doesn't work!
    //self.window.rootViewController = self.viewController;

    self.navController = [[UINavigationController alloc] 
                      initWithRootViewController: self.viewController];
    // do this instead
    self.window.rootViewController = self.navController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

要在视图中隐藏导航栏，请在要隐藏的每个视图中添加以下方法：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:YES animated:animated];
}

- (void) viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self.navigationController setNavigationBarHidden:NO animated:animated];
} 
```

到目前为止，这工作得很好！

# php - Symfony 模型抽象（到 SQL 或 NoSQL）

> ID：10695874
> 
> 赞同：0
> 
> 时间：2012-05-22T04:50:59.740
> 
> 标签：php, sql, symfony, nosql, abstraction

我正在使用 Symfony2 开始一个新的（也是第一个）项目，但我还没有选择数据库引擎。它可以是 MySQL 或 NoSQL 引擎，如 MongoDB 或其他引擎，也可以在项目周期中进行更改。所以，我想开始工作，不受选择 Doctrine、Doctrine for Mongo 或其他限制。并允许仅更改模型层而不会对控制器和类产生重大影响。

推荐？注释？最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T09:53:13.503

希望[本](http://www.phpdevtips.com/2011/08/data-encryption-using-aes_encrypt/)教程能帮助您获得一些知识。但是，在进行任何重大开发之前，请尝试学习主要概念。

# c# - 如何对gridview数据进行排序

> ID：10695876
> 
> 赞同：0
> 
> 时间：2012-05-22T04:51:24.390
> 
> 标签：c#, asp.net

请参阅下面的代码，我尝试通过调用 Microsoft vs 2008 提供的函数对 Grid 视图数据进行排序，但分页做得很好但排序过程不起作用，告诉我应该在哪里更改以下代码，是的，我把更新刑罚中的网格视图，更新刑罚有问题吗？

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    showData();
}
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{
    try
    {
        SqlCommand cmd = new SqlCommand("showData", con);
        cmd.CommandType = CommandType.StoredProcedure;
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        if (ds.Tables[0] != null)
        {

            ds.Tables[0].DefaultView.Sort = e.SortExpression + " " + sortType(e.SortDirection);
            GridView1.DataSource = ds;
            GridView1.DataBind();
        }
    }
    catch (Exception ex)
    {
        Label1.Text = ex.ToString();
    }
}

private string sortType(SortDirection sortDirection)
{
    string newSortDirection = String.Empty;

    switch (sortDirection)
    {
        case SortDirection.Ascending:
            newSortDirection = "DESC";
            break;

        case SortDirection.Descending:
            newSortDirection = "ASC";
            break;
    }

    return newSortDirection;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:56:13.937

你能确保 AllowSorting="true" 和 OnSorting="GridView1_Sorting"

另请参阅

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx)

[http://www.codeproject.com/Articles/26882/Gridview-Sorting-with-Up-and-Down-Icons-Paging](http://www.codeproject.com/Articles/26882/Gridview-Sorting-with-Up-and-Down-Icons-Paging)

[使用 gridview asp.net 进行排序和分页](https://stackoverflow.com/questions/702600/sorting-and-paging-with-gridview-asp-net)

[http://www.c-sharpcorner.com/uploadfile/afenster/gridview-sorting/](http://www.c-sharpcorner.com/uploadfile/afenster/gridview-sorting/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:12:18.077

我认为您必须将 dataview 分配给 gridview 的 DataSource 属性，而不是数据集对象。像这样

```
 DataTable dt = ds.Tables[0];

 DataView dv = new DataView(dt); 
 dv.Sort = e.SortExpression + " " + sortType(e.SortDirection);
 GridView1.DataSource = dv;
 GridView1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T05:17:51.603

您缺少`newSortDirection`.

```
private string sortType(SortDirection sortDirection)
{
    string newSortDirection = "ASC";

    switch (sortDirection)
    {
        case SortDirection.Ascending:
            newSortDirection = "DESC";
            break;

        case SortDirection.Descending:
            newSortDirection = "ASC";
            break;
    }

    return newSortDirection;
} 
```

# java - Android 游戏生成激光精灵

> ID：10695877
> 
> 赞同：0
> 
> 时间：2012-05-22T04:51:25.060
> 
> 标签：java, android, eclipse, sprite

在这个游戏中，我试图在给定坐标产生多个激光，但由于某种原因，每次 numLasers 大于 1 时应用程序都会崩溃。我已经尝试了所有方法，我真的可以使用一些帮助。

这是我的代码：

```
public class LaserSpawn {

    private int amountOfVisibleLasers;
    private Context context;
    private long timeLastCreatedLaser;
    private Laser[] holderLaser;

    public LaserSpawn(Context context, int numLasers){
        this.context = context;
        holderLaser = new Laser[numLasers];

        this.amountOfVisibleLasers = numLasers;
        for(int i = 0; i< numLasers; i++){
            holderLaser[0] = new Laser(context, -10, -10);
        }
    }

    public void updatePlayerLaser(boolean shootLaser, float x, float y) {
    // Check if a new Laser should be created

    if(shootLaser == true) {    
        if(timeLastCreatedLaser + 100 < System.currentTimeMillis()) {
            timeLastCreatedLaser = System.currentTimeMillis();
            boolean createdNewLaser = false;

            for(int i = 0; i < this.amountOfVisibleLasers; i++) {
                if(createdNewLaser == false) {
                    if(holderLaser[i].isDisposed()) {
                        this.generateNewLaser(i,x,y);
                        createdNewLaser = true;

                    }
                }
            }
        }
    }

    // Update all the other Lasers
    for(int i = 0; i < this.amountOfVisibleLasers; i++) {
        if(holderLaser[i].isDisposed() == false) {
            holderLaser[i].update();
        }

    }

}

private void generateNewLaser(int i, float x, float y) {
    holderLaser[i].setY(y);
    holderLaser[i].setX(x);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:23:28.507

我很确定这是你的问题：

```
holderLaser[0] = new Laser(context, -10, -10); 
```

您只能在数组的第一个位置创建一个`new Laser`。如果您尝试访问第二个，您将获得一个`null pointer exception`.

它应该是这样的

```
holderLaser[i] = new Laser(context, -10, -10); 
```

# javascript - 使用 Javascript 清除所有 cookie

> ID：10695880
> 
> 赞同：0
> 
> 时间：2012-05-22T04:51:47.743
> 
> 标签：javascript, cookies

反正有没有使用javascript清除cookie？

首先，我需要澄清问题。StackOverflow 中的很多帖子都给出[了这样的答案](https://stackoverflow.com/questions/179355/clearing-all-cookies-with-javascript)。但它正在清除 cookie，就像将所有键的值设置为空字符串一样。但我也需要擦除密钥。我该怎么做？</p>

PS：我试过了，[这里](https://stackoverflow.com/questions/179355/clearing-all-cookies-with-javascript)`document.cookie = null`不行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:57:29.033

我发现最好的方法是让你想删除的 cookie 过期，使用这个 javascript：

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

# jquery - 如何将可拖动恢复到原始位置？

> ID：10695881
> 
> 赞同：1
> 
> 时间：2012-05-22T04:51:54.653
> 
> 标签：jquery, jquery-ui

我正在使用 jquery 的可拖动插件创建一个简单的拖放游戏。

div中有4种形状，圆形、方形、三角形和星形，以及4个下降区域：

```
<div class="drag">
    <div class="container">
        <div id="circle"></div>
    </div>
    <div class="container">
        <div id="square"></div>
    </div>
    <div class="container">
        <div id="triangle"></div>
    </div>
    <div class="container">
        <div id="star"></div>
    </div>
</div>
<div class="drop">
    <div class="container">
        <div id="circle"></div>
    </div>
    <div class="container">
        <div id="square"></div>
    </div>
    <div class="container">
        <div id="triangle"></div>
    </div>
    <div class="container">
        <div id="star"></div>
    </div>
</div> 
```

例如，这是圆形的信息（请想象与其余形状相同）：

```
function init() {
$('.drag #circle').data('shape','circle').draggable({
    cursor: 'move',
    stack: '#circle',
    revert: true
});
    $('.drop #circle').data('shape','circle').droppable( {
        accept: '#circle',
        drop: handleDropEvent
    } );
};
init(); 
```

这是句柄放置事件：

```
function handleDropEvent( event, ui ) {
    var item = $(this).data('shape');
    var drop = $(this).data('shape');
    var dragItem = ui.draggable;
    if (item==drop){
        dragItem.position( { of: $(this), my: 'left top', at: 'left top' } );
        dragItem.draggable( 'option', 'revert', false );
        dragItem.draggable( 'disable' );
        $(this).droppable( 'disable' );
        correctMatch++;

    } 
    if ( correctMatch == 4 ) {
        $('.replay').show();
        $('.replay').click(function(){
            init();
        });
    }
} 
```

现在在重播类中有一个重播按钮。如何让我的形状恢复到原来的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:34:06.443

如果您保存了原始位置，则可以从头开始重建所有内容，然后再次使其全部可拖动。最简单的方法当然是重新加载页面，但我假设您不想这样做。因此，我可以想到几种方法：1）当文档准备好时，保存足够的信息以从头开始重建数组中的项目。我看到你有 4 个类：圆形、方形、三角形和星形。只需将 ID 按顺序存储在数组中

```
var initial_state=['circle', 'square', 'triangle', 'star'] 
```

然后每当用户单击重播按钮时，您就可以使用此信息进行重建。

```
$('.drag, .drop').html('')//Clean up the containers
var a='';
for (i in initial_state){
    a+='<div class="container" ><div id="'+i+'"></div></div>';//generate the html to append
}
$('.drag, .drop').append(a);//append it to the containers 
```

那么您将不得不再次绑定可拖动函数，因为 DOM 已更改。

2）使用相同的数组，但将实际项目移动到它们的位置。这可能成为选择器的噩梦，但这是可能的。您始终可以将 DOM 元素分配给 var，然后在页面中随意移动它：

```
var circle= $('.drag.container #star').eq[0] 
```

使用 eq 从一组元素中选择第一个/第二个/等元素。您必须确保只选择一个元素才能使代码正常运行。考虑到您在 html 代码中重复了 id。这是您要避免的事情，将它们更改为类，否则这种操作充其量只会变得棘手。

# ruby-on-rails-3 - Sprocket：预编译资产指纹不一致

> ID：10695886
> 
> 赞同：2
> 
> 时间：2012-05-22T04:52:56.137
> 
> 标签：ruby-on-rails-3, asset-pipeline, sprockets

我们的 Rails 3.2 应用程序使用 4 个不同的主机作为 CDN。部署后，我们有一个运行 assets:precompile 在这 4 个盒子上的任务。我们面临的问题是编译的资产具有不同的指纹/摘要。我的理解是指纹/摘要是从我们的资产文件的内容中生成的，因此它们在不同的盒子中应该是相同的。有谁知道可能是什么原因？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:42:38.970

我已经在代码中挖掘了，但不明白为什么会这样。他们应该是一样的。

如果您要部署到 4 台主机，您可能需要考虑在本地进行预编译 - 有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/10692348/rails-3-2-precompile-assets-with-same-digest-on-different-hosts)- 因为它要快得多。

# php - PHP：如何在没有表单回发的情况下执行查询？

> ID：10695889
> 
> 赞同：0
> 
> 时间：2012-05-22T04:53:25.297
> 
> 标签：php, ajax

我有一个表格，我想在其中进行验证。但是有一个字段我想验证编写查询。我不希望表单回发，因为在回发后，表单中填写的所有值都丢失了。有什么办法可以在没有回发的情况下编写查询，或者如果我必须回发如何保留这些值？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:03:38.560

如果您使用 AJAX (jQuery)，您可以在不刷新浏览器的情况下发布 XML 请求，如果这是您需要的。为此，只需创建一个带有一些文本字段和一个提交按钮的表单，为所有内容提供一个 ID 并为该按钮添加一个 click-Listener：

```
$('#submit-button').click(function() {
    var name = $('#username').val();
    $.ajax({
        type: 'POST',
        url: 'php_file_to_execute.php',
        data: {username: name},
        success: function(data) {
            if(data == "1") {
                document.write("Success");   
            } else {
                document.write("Something went wrong");
            }
        }
    });
}); 
```

如果用户单击具有“提交按钮”-ID 的按钮，则调用此函数。然后使用 POST 将文本字段的值发送到 php_file_to_execute.php。在这个 .php 文件中，您可以验证用户名并输出结果：

```
if($_POST['username'] != "Neha Raje") {
    echo "0";
} else {
    echo "1";
} 
```

我希望我能帮助你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:42:48.483

使用 jQuery 的`$.post()`方法为：

```
$('#my_submit_button').click(function(event){
  event.preventDefault();
  var username = $('#username').val();
  $.post('validate.php', {username: username, my_submit_button: 1}, function(response){
   console.log(response); //response contain either "true" or "false" bool value 
  });
}); 
```

在 validate.php 中异步获取表单中的用户名，如下所示：

```
if(isset($_POST['my_submit_button']) && $_POST['my_submit_button'] == 1 && isset($_POST['username']) && $_POST['username'] != "") {

  // now here you can check your validations with $_POST['username']
  // after checking validations, return or echo appropriate boolean value like:
  // if(some-condition) echo true;
  // else echo false;

} 
```

**注意**：在使用 AJAX 执行数据库更改脚本之前，请考虑了解与安全相关的漏洞和其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:26:37.243

你可能想改写你写的东西，它有点不清楚。仅供参考，我这样做；

```
<form method="post">
Text 1: <input type="text" name="form[text1]" value="<?=$form["text1"]?>" size="5" /><br />
Text 2: <input type="text" name="form[text2]" value="<?=$form["text2"]?>" size="5" /><br />
<input type="submit" name="submit" value="Post Data" />
</form> 
```

而当我处理数据的时候，是这样的；

```
<?php
if ($_POST["submit"]) {
 $i = $_POST["form"];
 if ($i["text1"] or ..... ) { $error = "Something is wrong."; }
 if ($i["text2"] and ..... ) { $error = "Maybe right."; }

 if (!$error) {
  /*
   * We should do something here, but if you don't want to return to the same
   * form, you should definitely post a header() or something like that here.
   */
   header ("Location: /"); exit;
 }
 //
}

if (!$_POST["form"] and !$_GET["id"]) {
} else {
 $form = $_POST["form"];
}
?> 
```

通过这种方法，值不会丢失*，除非*您将它们设置为丢失。

# android - 不同 Android 存储库之间的 repo 合并

> ID：10695893
> 
> 赞同：1
> 
> 时间：2012-05-22T04:53:42.877
> 
> 标签：android, git, repository

我是MW

我正在尝试合并 2 个 Android 存储库。

假设`Repo A`是原始来源，除了有一些新项目和一些更新之外，其他来源`Repo B`相同。`Repo A``Repo B`

为了合并，我尝试使用以下命令`$ repo forall -c git push Repo B to Repo A`：

```
"New Project" does not appear to be a git repository.
fatal: The remote end hung up unexpectedly. 
```

我的问题是如何将 Repo B 的新项目添加到 Repo A。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:16:45.717

如果我正确理解您的问题，您在远程服务器上有 2 个不同的存储库。像 remotehost:~/repos/repoA 和 /repos/repoB。因此，如果除了一些新目录之外 A 和 B 是相同的，为什么还要使用不同的存储库而不是 2 个分支？您可以将 repoB 克隆到本地计算机。之后编辑 .git/config 并将源主机从 url = ssh://youruser@yourserver/path/to/repoB 临时更改为 repoA 的存储库。然后您可以检查状态并添加、提交和推送到您的其他存储库。希望那是您正在寻找的东西，但对于几乎相同的项目，最好只有一个存储库和不同的分支。对于部署，您可以使用 capistrano 将不同的分支部署到不同的服务器。

干杯

# javascript - 如何在 IE 7/8/9 中使用 wz_jsgraphics.js 库绘制线条

> ID：10695895
> 
> 赞同：1
> 
> 时间：2012-05-22T04:54:12.643
> 
> 标签：javascript, internet-explorer

我正在使用 wz_jsgraphics.js 库来绘制线条。它适用于除 IE 7/8/9 以外的所有浏览器。现在我想在任何 IE7/8/9 浏览器上运行它。请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:13:33.590

当我在四台不同的计算机上使用这些浏览器时，Walter Zorn 的 wz_jsgraphics.js 在 IE7、IE8 和 IE9 中运行良好。

Internet Explorer 有很多选择。也许其中一个需要在您的计算机上进行更改。例如，如果您从文件上的 html 文档脱机运行​​ jsgraphics，则必须选中高级 IE 选项 Allow Active Content To Run From A File（或其他任何名称）。

# visual-c++ - 在 Visual C++ 中设置日期限制

> ID：10695896
> 
> 赞同：0
> 
> 时间：2012-05-22T04:54:48.790
> 
> 标签：visual-c++

我需要为 Visual C++ 中的日期设置一个限制。例如，日期从 2010 年 5 月到 2012 年 5 月。任何人都可以帮我找到解决方案。

为什么这篇文章被否决。现在我无法提问。请帮我激活我的帐户。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:58:23.143

这不是编程的工作方式。您不会`time_t`为每个需要创建或自定义日期对象（无论如何，您正在使用什么？？）。

您获得日期，检查用户输入的内容，然后接受或拒绝它（在这种情况下，您会提示用户更正他们的输入）。这叫做验证。

# android-emulator - Android 平板版广播接收器。

> ID：10695904
> 
> 赞同：0
> 
> 时间：2012-05-22T04:56:09.970
> 
> 标签：android-emulator, android

感谢之前的回复，

我是 android 平板电脑版本的新手，我的应用程序将在设备启动时自动启动，为此我使用了广播接收器。但是当平板电脑重新启动时，接收器不会被调用。我浏览了在线参考资料，他们提到的是，从 android 3 版本（平板电脑版本）开始，广播接收器将不会自动工作，因为某些安全性并防止用户受到恶意软件的侵害。我不确定指导是否正确。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:13:50.830

我也面临同样的问题，我所做的是我设置了启动权限。 `<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission>`

# javascript - 如何在网站上发布谷歌电子表格值？

> ID：10695910
> 
> 赞同：0
> 
> 时间：2012-05-22T04:56:25.417
> 
> 标签：javascript

我想为在线游戏 runescape 制作一个粉丝网站。我正在使用谷歌电子表格为游戏制作一些计算器，我想知道如何以最简单的方式在我的网站上显示表格中的特定值。

这里有一些更多的信息给感兴趣的人。加速表包含来自 runescape 数据库的值，显示在游戏中的项目值。我必须将这些值从 runescape.com 网站提取到 google 电子表格中以进行我想要执行的计算，现在我想在我的网站上发布我的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:02:07.643

我认为，如果您想让网站成为动态的（即，这些值不是静态的），您需要将信息存储在数据库而不是 Google 电子表格中。此处的实际语言（例如`javascript`）并不重要，这样您的 Web 应用程序就可以轻松/持久地访问数据存储。

# c# - 使用 C#/Asp.Net/SQL 插入错误

> ID：10695912
> 
> 赞同：0
> 
> 时间：2012-05-22T04:56:56.117
> 
> 标签：c#

我试图运行查询以将数据插入数据库，但是在运行代码时出现错误..

> ExecuteNonQuery 需要一个开放且可用的连接。连接的当前状态为关闭。

你能告诉我错误是什么以及为什么会发生吗？

```
{
    con2.Open();

    if (TextBox1.Text == "")
    {
        Response.Write("<script>alert('please enter Login Name')</script>");
    }
    else if (TextBox2.Text == "")
    {
        Response.Write("<script>alert('please enter Password')</script>");
    }
    else if (TextBox3.Text == "")
    {
        Response.Write("<script>alert('please enter Confirm Password')</script>");
    }
    else
    {
        //if (TextBox2.Text == TextBox3.Text)
        //{

            string a;
            a = "insert into tbl_Purchase_Users(Login_Name, Password, Uname, Uid, EmailID, Role, Status) values(@LName, @Pswd, @Uname, @uid, @Eid, @role, @stat)";
            SqlCommand cm = new SqlCommand(a, con1);
            cm.Parameters.AddWithValue("@LName", TextBox1.Text);

            string original;
            original = TextBox2.Text.Trim();
            int h = original.GetHashCode();
            string withHash = original;
            b1 = Encoding.BigEndianUnicode.GetBytes(withHash);
            encrypted = Convert.ToBase64String(b1);
            cm.Parameters.AddWithValue("@Pswd", encrypted);
            cm.Parameters.AddWithValue("@Uname", TextBox3.Text);
            cm.Parameters.AddWithValue("@uid", TextBox4.Text);
            cm.Parameters.AddWithValue("@Eid", TextBox5.Text);
            cm.Parameters.AddWithValue("@role", TextBox6.Text);
            cm.Parameters.AddWithValue("@stat", TextBox7.Text);

            cm.ExecuteNonQuery();
            Response.Write("<Script>alert('inserted')</script>");
        }
        con2.Close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:00:48.747

您只打开了 con2 而不是 con1。您在 SqlCommand 中传递了 con1。使用以下代码：

```
SqlCommand cm = new SqlCommand(a, con2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:59:21.843

您正在打开名为 con2 的连接，但您在 SqlCommand 上使用 con1。

从我可以看到你还没有打开 con1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T04:59:30.093

看起来您有两个不同的 SqlConnection 对象 - con1 和 con2。您正在打开 con2，但将 con1 传递给 SqlCommand 构造函数。

如错误消息所述，您使用的连接必须打开。

如果您将 con2 传递给 SqlCommand 构造函数，或者如果您打开 con1，您的代码应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:00:15.063

确保已打开`con1`，因为`.Open()`您的通话中显示的唯一通话与`con2`

```
con1.Open(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T05:02:06.567

只需使用一个连接对象，例如

```
 con2.Open();
 SqlCommand cm = new SqlCommand(a, con2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T05:03:02.917

我看不到 con1.open()。您已经在 Sqlcommand 中使用了 Con1。请打开 Con1.Open();

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T05:11:01.293

First you need to connect with database by using Open(), in ur case con1.Open(); then perform action and close the connection. con1.Close(); else { //if (TextBox2.Text == TextBox3.Text) //{

```
 string a;
        a = "insert into tbl_Purchase_Users(Login_Name,Password,Uname,Uid,EmailID,Role,Status) values(@LName,@Pswd,@Uname,@uid,@Eid,@role,@stat)";
        SqlCommand cm = new SqlCommand(a, con1);
        con1.Open();
        cm.Parameters.AddWithValue("@LName", TextBox1.Text);

        string original;
        original = TextBox2.Text.Trim();
        int h = original.GetHashCode();
        string withHash = original;
        b1 = Encoding.BigEndianUnicode.GetBytes(withHash);
        encrypted = Convert.ToBase64String(b1);
        cm.Parameters.AddWithValue("@Pswd", encrypted);
        cm.Parameters.AddWithValue("@Uname", TextBox3.Text);
        cm.Parameters.AddWithValue("@uid", TextBox4.Text);
        cm.Parameters.AddWithValue("@Eid", TextBox5.Text);
        cm.Parameters.AddWithValue("@role", TextBox6.Text);
        cm.Parameters.AddWithValue("@stat", TextBox7.Text);

        cm.ExecuteNonQuery();
        Response.Write("<Script>alert('inserted')</script>");
        con1.Close(); 
```

}

# asp.net - 保存 asp.net mvc LinqToSQL 后检索对象 ID

> ID：10695921
> 
> 赞同：1
> 
> 时间：2012-05-22T04:58:08.163
> 
> 标签：asp.net, asp.net-mvc, linq-to-sql

我想检索我刚刚保存的对象的 ID，以便将其显示给用户以供将来参考。在不自己生成 ID 的情况下，最好的方法是这样做，因为数据库会自动生成 ID。

我的存储库中有以下方法可以保存到数据库，并且我想在之后立即检索保存的广告的 ID：

```
 public void SaveNewSomeObject(SomeObject someObject)
    {
        db.SomeObjects.InsertOnSubmit(someObject);
        db.SubmitChanges();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:04:19.650

您可以尝试检索在提交更改后立即插入的对象的 ID

```
 db.SomeObjects.InsertOnSubmit(someObject); 
   db.SubmitChanges()
   MessageBox.Show(someObject.SomeID) 
```

或者另一种选择可能是

```
var lastid = db.SomeObjects.OrderByDescending(x => x.SomeID).FirstOrDefault();
int id=lastid.SomeID; 
```

# django - Django ImageField 在模板中不起作用

> ID：10695923
> 
> 赞同：2
> 
> 时间：2012-05-22T04:58:25.837
> 
> 标签：django, imagefield

我可以在 Django admin 中上传图像，它们会出现在正确的目录中，但是当我尝试在模板中查看它们时遇到这些问题时：

`{% if city.main_image %}`在我的模板中返回 false

`{{ city.main_image.url }}`什么都不返回

`{{ city.main_image }}`返回无

当我单击管理员预览时，我得到这个 404：

```
Request URL:    http://127.0.0.1:8000/admin/search/city/1/test/test.jpg/
city object with primary key u'1/test/test.jpg' does not exist. 
```

模板的其余部分输出与城市对象关联的正确信息。这是我的`settings.py`网址：

```
MEDIA_ROOT = os.path.join(os.path.abspath(os.path.dirname(__file__)), "html/static")
MEDIA_URL = '/media/'
STATIC_ROOT = ''
STATIC_URL = '/static/'
ADMIN_MEDIA_PREFIX = '/static/admin/' 
```

我的`urls.py`：

```
from django.conf.urls.defaults import patterns, include, url
from test import settings

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('test.search.views',
    url('^search/$', 'search', name="home_page"),
    url(r'^(\d+)/$', 'city', name="city_page"),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
)

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

我的`models.py`：

```
class City(models.Model):
    name = models.TextField("Course Name", blank=False)
    address = models.TextField("Address", blank=False)
    city = models.TextField("City", blank=False)
    state = models.TextField("State", blank=False)
    country = models.TextField("Country", blank=False)
    main_image = models.ImageField(upload_to="test", blank=True) 
```

谁能发现我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:20:54.943

有趣的是，重新同步我的数据库后，我不再遇到问题。

# android - 如何从 upc 获取产品详细信息？

> ID：10695925
> 
> 赞同：0
> 
> 时间：2012-05-22T04:58:52.577
> 
> 标签：android, barcode

在我的 android 应用程序中，我使用条形码阅读器获取任何产品的 UPC 代码。但是一旦我获得了 upc 代码，我如何才能以编程方式获得详细信息。

我在互联网上搜索，我发现的一件事是“转到 upc 数据库站点，输入 upc 编号并显示详细信息”，但必须有一个 API 才能正确获取这些详细信息。有人可以帮我解决这件事。谢谢你。

忽略下面的代码：

```
package com.android.barcode;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class BarcodeActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        IntentIntegrator.initiateScan(this);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
        case IntentIntegrator.REQUEST_CODE: {
            if (resultCode != RESULT_CANCELED) {
                IntentResult scanResult = IntentIntegrator.parseActivityResult(
                        requestCode, resultCode, data);
                if (scanResult != null) {
                    String upc = scanResult.getContents();

                    // put whatever you want to do with the code here
                    TextView tv = new TextView(this);
                    tv.setText(upc);
                    setContentView(tv);
                }
            }
            break;
        }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:30:45.573

如果您谈论的是 webstie UPC 数据库，这里有一个 API 信息页面：[UPC API 信息](http://www.upcdatabase.org/api.php)

# javascript - 在另一个页面上调用 Javascript 函数

> ID：10695932
> 
> 赞同：2
> 
> 时间：2012-05-22T04:59:58.533
> 
> 标签：javascript

我正在尝试单击加载 JS 函数的另一个页面上的链接（我无权访问该页面）。

**那么我可以通过href=""** 或**onClick=""**从我的页面调用该函数吗

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:02:51.387

如果它在不同的域上并且您无法更改其内容，那么由于[相同的来源策略](https://en.wikipedia.org/wiki/Same_origin_policy)，您无法这样做。对不起。你必须找到一种不同的方式来实现你想要做的任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T05:03:55.163

您不能从另一个页面远程调用函数。此外，您那时已经离开了您的页面。

除非...

*   该其他页面以某种方式加载到您的页面（可能是 AJAX+CORS 或 AJAX+代理服务器），并且它的内容*在您的页面上*解析。

*   该其他页面具有一些读取主题标签或查询字符串并执行相应功能的逻辑。这*可以*通过 iframe 在域间工作，因为您通过它的哈希/查询字符串*间接控制 iframe。*

*   其他页面可以通过 iframe 加载。*如果“我无权访问该页面”*意味着您无法访问当前子域但都*位于同一个顶级域上，*则 iframe 将起作用。

    [子域 iframe 通信可以正常工作](https://stackoverflow.com/q/450960/575527)。页面可以互相交谈，但`example.com`不能互相交谈，因为它们都生活在不同的域中。请参阅有关同源策略的其他答案。`subdomain.example.com``example1.com``example2.com`**

# javascript - 使用 javascript 处理文件

> ID：10695934
> 
> 赞同：1
> 
> 时间：2012-05-22T05:00:10.813
> 
> 标签：javascript

> **可能重复：**
> [如何使用 JavaScript 读写文件](https://stackoverflow.com/questions/585234/how-to-read-and-write-into-file-using-javascript)

**有没有办法使用javascript**读取和写入文件（.txt 或任何其他文件）。
**为了澄清** ，我不想使用**JQuery 库**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T05:02:35.570

JavaScript 在沙箱中执行，以保护计算机免受恶意人员的操纵，因此您无法访问文件系统。

但是，您可以将内容存储在[DOM Local Storage](http://en.wikipedia.org/wiki/Web_storage)中。“Flash Cookies”（[Flash 本地存储对象](http://en.wikipedia.org/wiki/Local_shared_object)）也经常用于类似目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T05:04:43.570

不，不使用非特权 JavaScript。通过 HTTP 或 HTTPS 在 Web 浏览器中加载的任何 JavaScript 都没有访问文件系统的权限。这可能会对个人的个人数据安全产生严重影响。

但是，具有 Chrome 权限的 JavaScript，例如通过`chrome://`Firefox 扩展、Thunderbird 扩展或 XULRunner 应用程序中的 URL 加载的 JavaScript，就是所谓的特权 JavaScript。这种类型的 JavaScript 可以做通常在 Web 上提供的 JavaScript 无法完成的事情。例如，特权 JavaScript 可以读取和写入文件等等。

使基于 chrome 的 JavaScript 或特权 JavaScript 能够做更多事情的主要因素是用户必须在他们的计算机上显式安装它并允许它访问本地计算机。

最后，还有服务器端 JavaScript，例如 Rhino 或 NodeJS，它们被设计为在服务器上运行。虽然他们无法读取/写入客户端用户的文件系统，但他们当然可以读取和写入服务器的文件系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T05:02:03.200

这不可能。浏览器 javascript 无权访问文件系统。否则将是一个巨大的安全漏洞。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T05:04:04.860

使用 node.js [http://nodejs.org/docs/v0.4.8/api/fs.html#file_System](http://nodejs.org/docs/v0.4.8/api/fs.html#file_System)或 HTML 5 [http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)（用于读取文件)

# android - 使用intelliJ在android中调试后台服务

> ID：10695941
> 
> 赞同：3
> 
> 时间：2012-05-22T05:01:09.783
> 
> 标签：android, service, background, intellij-idea

我最近从 eclipse 切换到 IntelliJ 进行 android 开发（由于更好的团队支持 w/projects/modules）。但是，当我尝试调试后台服务时，似乎这是不可能的。有没有人成功让 IntelliJ 调试 bg 服务？

非常感谢本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T13:49:59.000

有两种方法可以做到：

1.  在 Android 运行/调试配置中禁用`Deploy application`和启用`Do not launch Activity`。

2.  在工具栏中使用`Attach debugger to Android process`按钮： ![附加调试器](../Images/49d18cb39a9932f074a0921fdd7eec4a.png)

# c++ - 获取最大变量时，使用函数和宏有什么区别

> ID：10695945
> 
> 赞同：1
> 
> 时间：2012-05-22T05:01:47.903
> 
> 标签：c++

阅读 combase.cpp 代码，我发现以下内容：

```
/* We have to ensure that we DON'T use a max macro, since these will typically   */                    
/* lead to one of the parameters being evaluated twice.  Since we are worried    */                    
/* about concurrency, we can't afford to access the m_cRef twice since we can't  */                    
/* afford to run the risk that its value having changed between accesses.        */                    

    template<class T> inline static T ourmax( const T & a, const T & b )                                   
    {
        return a > b ? a : b;       
    } 
```

我不明白为什么“最大宏导致参数之一被评估两次”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:07:04.600

考虑如下**[代码示例](http://ideone.com/wQ51E)**中的用法：

```
#define max(a,b) (a>b?a:b)

int main()
{

  int a = 0;
  int b = 1;

  int c = max(a++, b++);

  cout << a << endl << b << endl;
  return 0;

} 
```

目的可能是打印`1`and `2`，但宏扩展为：

```
int c = a++ > b++ ? a++ : b++; 
```

`b`增加两次，程序打印`1`和`3`.

因此，
在某些情况下，作为参数传递给宏的表达式可以被多次计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:03:53.427

尽管 Als 已经非常清楚地解释了当前的问题，但我看到了两个更大的问题。第一个很简单：`max`不能是宏，因为它是标准函数模板，定义在`<algorithm>`. （在 VC++ 的情况下，您需要定义`NOMINMAX`才能使用`<algorithm>`. 但由于在完成工作时总是最好使用标准函数，因此您实际上应该始终添加`NOMINMAX`到您的预处理器定义中，并完成它。）

第二个更令人担忧，因为它表明对代码缺乏理解。评论中提到了“并发”，并建议通过使用该函数，不存在并发问题。这是完全不正确的。如果任何其他线程（或进程，在共享内存的情况下）可以修改任一参数，则行为未定义。特别是，如所写，编译器可能会读取其中一个值两次；论据是参考。但无论你如何编写它，编译器都可以重新读取这些值；即使没有，也无法确保访问是原子的。写评论的人不懂多线程代码的基本原理。

# json - 读取 JSON 文件的一部分

> ID：10695950
> 
> 赞同：0
> 
> 时间：2012-05-22T05:02:33.707
> 
> 标签：json, sed, awk, grep

我有一个动态创建的 json 文件。我只想知道“状态”的“错误”部分。有什么简单的方法可以做到这一点？

```
...
a lot of lines 
...

 "status": {
    "errors": [
      {
        "message": "Input contained no data", 
        "reason": "invalid"
      }
    ], 
    "state": "DONE"
  }
...
a lot of lines
... 
```

我需要在 shell 脚本中使用输出，所以首选 awk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:06:41.837

我会用`sed`这样的方式选择一系列行：

```
sed -e '/^    "errors\": \[/,/^    ],/!d' file.txt 
```

结果：

```
 "errors": [
      {
        "message": "Input contained no data", 
        "reason": "invalid"
      }
    ], 
```

如果我误解了您的问题，请考虑添加预期结果。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:26:14.357

这可能对您有用：

```
sed '/^ "status": {/,/^  }$/!d;/^    "errors": \[/,/^    \],/!d' file.txt 
```

# c# - 如何以加密格式将密码存储在从 Web 应用程序输入的数据库中？

> ID：10695954
> 
> 赞同：6
> 
> 时间：2012-05-22T05:02:46.040
> 
> 标签：c#, asp.net, sql-server-2008

在我的应用程序中有一个密码字段。当用户输入密码时，它应该加密该密码并存储到数据库中。当用户登录该应用程序时，应从数据库中获取密码并进行解密。

是否可以？？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T05:11:58.730

你可以看看[这个](http://chandradev819.wordpress.com/2011/04/11/how-to-encrypt-and-decrypt-password-in-asp-net-using-c/)链接，它可以让你朝着正确的方向开始。

话虽如此，通常的做法是存储密码本身的哈希值，而不是密码的加密版本。哈希将允许您检查用户是否输入了正确的密码（通过将数据库中的哈希值与用户输入的哈希值进行比较），而无需知道实际密码是什么。

这样做的好处是它通常更简单、更安全，因为您不需要加密/解密任何值。使用散列的缺点是您永远无法*向*用户发送他们的密码（如果您打算提供某种“忘记我的密码”功能），而是您必须将其重置为一个新的随机密码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T03:59:36.820

如果您不希望使用 ASP.NET 成员资格和角色提供程序，这可能对您有用：

```
 /// <summary>
    /// Decrypts the specified encryption key.
    /// </summary>
    /// <param name="encryptionKey">The encryption key.</param>
    /// <param name="cipherString">The cipher string.</param>
    /// <param name="useHashing">if set to <c>true</c> [use hashing].</param>
    /// <returns>
    ///  The decrypted string based on the key
    /// </returns>
    public static string Decrypt(string encryptionKey, string cipherString, bool useHashing)
    {
        byte[] keyArray;
        //get the byte code of the string

        byte[] toEncryptArray = Convert.FromBase64String(cipherString);

        System.Configuration.AppSettingsReader settingsReader =
                                            new AppSettingsReader();

        if (useHashing)
        {
            //if hashing was used get the hash code with regards to your key
            MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
            keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(encryptionKey));
            //release any resource held by the MD5CryptoServiceProvider

            hashmd5.Clear();
        }
        else
        {
            //if hashing was not implemented get the byte code of the key
            keyArray = UTF8Encoding.UTF8.GetBytes(encryptionKey);
        }

        TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
        //set the secret key for the tripleDES algorithm
        tdes.Key = keyArray;
        //mode of operation. there are other 4 modes.
        //We choose ECB(Electronic code Book)

        tdes.Mode = CipherMode.ECB;
        //padding mode(if any extra byte added)
        tdes.Padding = PaddingMode.PKCS7;

        ICryptoTransform cTransform = tdes.CreateDecryptor();
        byte[] resultArray = cTransform.TransformFinalBlock(
                             toEncryptArray, 0, toEncryptArray.Length);
        //Release resources held by TripleDes Encryptor
        tdes.Clear();
        //return the Clear decrypted TEXT
        return UTF8Encoding.UTF8.GetString(resultArray);
    }

    /// <summary>
    /// Encrypts the specified to encrypt.
    /// </summary>
    /// <param name="toEncrypt">To encrypt.</param>
    /// <param name="useHashing">if set to <c>true</c> [use hashing].</param>
    /// <returns>
    /// The encrypted string to be stored in the Database
    /// </returns>
    public static string Encrypt(string encryptionKey, string toEncrypt, bool useHashing)
    {
        byte[] keyArray;
        byte[] toEncryptArray = UTF8Encoding.UTF8.GetBytes(toEncrypt);

        System.Configuration.AppSettingsReader settingsReader =
                                            new AppSettingsReader();

        //If hashing use get hashcode regards to your key
        if (useHashing)
        {
            MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
            keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(encryptionKey));
            //Always release the resources and flush data
            // of the Cryptographic service provide. Best Practice

            hashmd5.Clear();
        }
        else
            keyArray = UTF8Encoding.UTF8.GetBytes(encryptionKey);

        TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
        //set the secret key for the tripleDES algorithm
        tdes.Key = keyArray;
        //mode of operation. there are other 4 modes.
        //We choose ECB(Electronic code Book)
        tdes.Mode = CipherMode.ECB;
        //padding mode(if any extra byte added)

        tdes.Padding = PaddingMode.PKCS7;

        ICryptoTransform cTransform = tdes.CreateEncryptor();
        //transform the specified region of bytes array to resultArray
        byte[] resultArray =
          cTransform.TransformFinalBlock(toEncryptArray, 0,
          toEncryptArray.Length);
        //Release resources held by TripleDes Encryptor
        tdes.Clear();
        //Return the encrypted data into unreadable string format
        return Convert.ToBase64String(resultArray, 0, resultArray.Length);
    } 
```

使用上述两种方法，您可以在将密码字符串保存到数据库时对其进行加密，并在检索时对其进行解密。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T05:41:35.737

您可以在 SQL SERVER 中创建 SQLCLR UDF，我使用两种主要方法以加密格式保存密码。

Pwdencryp()t 加密密码，返回加密字符串。这在您设置密码时使用，并且加密的密码存储在 master..syslogins 表中。

[http://msdn.microsoft.com/en-us/library/dd822791(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/dd822791(v=sql.105).aspx)

Pwdcompare() 接受明文密码和加密密码，并通过对明文密码进行加密并比较两者来检查它们是否匹配。当您键入密码以登录 SQL Server 时，将调用此例程。

[http://msdn.microsoft.com/en-us/library/dd822792.aspx](http://msdn.microsoft.com/en-us/library/dd822792.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T05:11:36.953

[当您配置ASP.NET 密码散列和密码盐](https://stackoverflow.com/questions/5328642/asp-net-password-hashing-and-password-salt)时，ASP.NET SQL Server 成员资格提供程序为您提供此功能`passwordFormat="Hashed"`

但是，如果您希望自己推出自己的产品，那么您将需要研究 Salted Password。例如[C# 中的哈希和盐密码](https://stackoverflow.com/questions/2138429/hash-and-salt-passwords-in-c-sharp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-03T07:36:29.723

执行此操作的简单方法如下：

```
string hashedpassword= FormsAuthentication.HashPasswordForStoringInConfigFile("your password", "SHA1"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T06:02:16.650

获取哈希密码的最简单方法如下。 `FormsAuthentication.HashPasswordForStoringInConfigFile("value of string", FormsAuthPasswordFormat.MD5.ToString());`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-11-20T10:52:18.877

```
 string hashedPassword = Security.HashSHA1(txtPassword.Value.Trim());
  public class Security
    {
        public static string HashSHA1(string value)
        {
            var sha1 = System.Security.Cryptography.SHA1.Create();
            var inputBytes = Encoding.ASCII.GetBytes(value);
            var hash = sha1.ComputeHash(inputBytes);

            var sb = new StringBuilder();
            for (var i = 0; i < hash.Length; i++)
            {
                sb.Append(hash[i].ToString("X2"));
            }
            return sb.ToString();
        }
    } 
```

# jquery - 使用 jquery 更新 html 标题和 meta og:title

> ID：10695956
> 
> 赞同：2
> 
> 时间：2012-05-22T05:02:55.750
> 
> 标签：jquery, html, facebook, facebook-opengraph

我可以用 jquery 更新我的标题标签，这并不理想，但对于我试图解决的问题是必需的。

```
jQuery(document).ready(
 function(){
var docTitle = document.title;
var newTitle = 'test';
document.title = newTitle + ' - ' + docTitle;
}); 
```

[如果我通过Facebook Lint](http://developers.facebook.com/tools/lint)放置链接，我会得到原始标题。有没有办法可以通过 jQuery 进行更新，以便在用户时间轴中看到更新后的标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:23:33.857

通过 javascript 更新 og:title 毫无意义。

Facebook 通过对您的 URL 执行 HTTP GET 来读取这些标签。Facebook 刮板不运行 javascript。

如果你想要一个不同的对象，你需要一个不同的 URL。如果要更改现有对象的标题，则需要在通过 HTTP 提供新标题并在没有 JS 的情况下进行解析时提供新标题。

# javascript - 循环显示对所有 div 不显示并显示我要显示的特定 div

> ID：10695964
> 
> 赞同：0
> 
> 时间：2012-05-22T05:03:47.097
> 
> 标签：javascript, html

我正在使用 Javascrip，我有一个类似下面的函数，我想隐藏所有 div。但我不知道为什么这段代码不起作用。有人会帮我吗？

Javasvript

```
 function showDiv(divTag,id)
    {
     var i;
      for(i=1;i<7;i++)
     {
       document.getElementById(divTag+i).style.display = 'none';
     }
      document.getElementById(divTag+id).style.display = 'block';
    } 
```

或者

```
function showDiv(divTag,id)
{
  var i;
  for(i=1;i<5;i++)
 {
   var tempDiv = divTag + i;
   document.getElementById(tempDiv).style.display = 'none';
 }
document.getElementById(divTag+id).style.display = 'block';
} 
```

和 HTML

```
 <a href="#" onClick="showDiv(\"hide_\",1)">Show Only Div1</a>
    <div id="hide_1">
    Abc
    </div>
     <a href="#" onClick="showDiv(\"hide_\",2)">Show Only Div2</a>

    <div id="hide_2">
    BCD
    </div>
<a href="#" onClick="showDiv(\"hide_\",3)">Show Only Div2</a>

    <div id="hide_3">
    EDF
    </div>
<a href="#" onClick="showDiv(\"hide_\",4)">Show Only Div2</a>

    <div id="hide_4">
    FGE
    </div> 
```

我尝试过但未能做到的以上两个过程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:23:09.850

几件事：

1.  ( `"onclick"`not `"onClick"`) 是在 html 和 JavaScript 中分配 click 事件处理程序的正确方法。
2.  您在`for(i=1;i<7;i++)`第一个函数的行中从 1 循环到 6，但您的 html 中只有 4 个元素。当达到不存在的第五个时-您的代码将引发错误。类似于“TypeError：无法读取 null 的属性 'style'”的内容。
3.  正如@verisimilitude 所提到的，您的html 中有一个语法错误，您将引用的文本放在另一个以相同方式引用的文本中。应该是`onclick="showDiv('hide_',1)"`。注意'hide_'周围的单引号。

这是有效的代码。**[点击这里查看它的实际效果](http://jsfiddle.net/mwQmx/2/)**。

**这是您的 JavaScript 函数：**

```
// Please note that it must be in the global scope
// otherwise you won't be able to call it from your html.

function showDiv(divTag, id) {
  var i;
  for (i = 1; i < 5; i++) {
    var tempDiv = divTag + i;
    document.getElementById(tempDiv).style.display = 'none';
  }
  document.getElementById(divTag+id).style.display = 'block';
} 
```

此外，请查看**[代码的另一个工作版本，](http://jsfiddle.net/mwQmx/3/)**该版本在隐藏/显示元素之前预先验证元素的存在。因此，您不必担心`for`循环遍历已删除的元素。

**这是你的html：**

```
<a href="#" onclick="showDiv('hide_', 1);">Show Only Div1</a>
<div id="hide_1">Div1</div>

<a href="#" onclick="showDiv('hide_', 2);">Show Only Div2</a>
<div id="hide_2">Div2</div>

<a href="#" onclick="showDiv('hide_', 3);">Show Only Div3</a>
<div id="hide_3">Div3</div>

<a href="#" onclick="showDiv('hide_', 4);">Show Only Div4</a>
<div id="hide_4">Div4</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:13:01.483

```
<a href="#" onClick="showDiv("hide_",1)">Show Only Div1</a> 
```

产生一个 javascript 语法错误。这应该是

```
<a href="#" onClick="showDiv('hide_',1)">Show Only Div1</a> 
```

检查“hide_”周围的单引号

# c++ - 当我使用 operator new 分配大小为 1k 字节的内存时，操作系统在 Windows 中会做什么？

> ID：10695965
> 
> 赞同：0
> 
> 时间：2012-05-22T05:03:54.317
> 
> 标签：c++, memory-leaks

我的代码中似乎发生了内存泄漏，所以我尝试在我的代码中找到导致内存泄漏的位置。

在 [无法获得堆中可用内存的准确信息](https://stackoverflow.com/questions/10681015/cant-obtain-accurate-information-of-available-memory-in-the-heap)的帖子中， 有人告诉我，当请求小内存以减少系统调用时，操作系统可能会分配大内存。

它在 Windows 中正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T05:22:56.480

在看到您的其他问题之后，这里相关的不是您分配内存时发生的情况。重要的是当你释放它时会发生什么。特别是 1 KB 的分配*永远不会*释放回操作系统，它太小了。它被添加到空闲块列表中，准备好被（大约）相同大小的下一次分配使用。

您无法使用 VirtualQuery() 可靠地检测内存泄漏。

如果您使用 Visual Studio，请使用其[内置的泄漏检测功能](http://msdn.microsoft.com/en-us/library/e5ewb1h3%28v=VS.80%29.aspx)。还有很多其他工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:24:19.507

在大多数系统（包括 Windows 上的最新编译器）上，堆管理器将从操作系统分配相对较大的内存“块”，然后将其分成几块供程序使用。来自操作系统的分配通常至少为数十千字节。

当程序结束执行时，这些大块内存将返回给操作系统。它*可以*比这更早发生，但执行结束是最常见的。

操作系统将跟踪这些大块中的每一个作为单个分配（即使堆管理器随后会将其分解为较小的部分以供您的代码使用）。任何已释放回操作系统的内容都将显示为空闲内存块。

# iphone - 简单的 iPhone 应用程序

> ID：10695972
> 
> 赞同：2
> 
> 时间：2012-05-22T05:04:41.933
> 
> 标签：iphone, xcode

我正在构建一个简单的 iphone 应用程序，我有几个问题。

我需要解析 API 密钥搜索的结果，并在我的程序中操作它们。该API来自烂番茄，我找不到适用于ARC的解析器。我知道 JSON 工具包适用于以前版本的 XCode，但我真的很喜欢 ARC，并且迄今为止我的应用程序都在使用它。

1) 是否有针对此类结果的可靠解析器，还是我必须手动执行？

我的应用程序的基本结构包括搜索页面和个人物品列表，使用可变的对象数组来填充表格视图。

2) 设计类和实现的最佳方式是什么？我知道这是一个模糊的问题，所以让我更具体一些。我有一个具有多个属性的对象，我想访问远程服务器和烂番茄 API，并在内部存储本地数据。所以我有我的故事板，每个选项卡视图都有一个控制器（有两个）。然后我有我的对象类。我需要专门为它创建一个控制器还是可以在其他控制器中操作（创建和删除）？

我可以提供有关该应用程序的更多细节，我只是感到有点不知所措，因为这是我第一次使用 Xcode。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:12:12.640

您可以在 ARC 中不会使用的实现上设置编译器标志。

采用：**`-fno-objc-arc`**

![在此处输入图像描述](../Images/9f9615fd967337d7b0e7da51830a1e6a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:13:58.707

我可以建议您使用[NSJSONSerialization 类](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。它应该与 ARC 兼容，因为它兼容`iOS 5`及更高版本。

或者，您可以在您希望将其关闭`ARC`的文件中将该标志设置为 no 。`.m`为此，您可以[在此处](https://stackoverflow.com/a/6658549/876283)参考一个很好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:14:06.240

关于第一个问题，您可以在特定文件上关闭 ARC，这允许您在同一个项目中混合启用 ARC 和未启用 ARC 的类，请参考这个问题的答案 [How can I disable ARC for a single file in一个专案？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

关于第二个问题你有两个不同的类访问相同的 api 服务吗？如果是，我建议您创建一个通用的远程请求类，该类将为您执行请求。

例如：假设我们有 class1（用于 tab1）和 class2（用于 tab2）并且我们有 classCommonRequest（用于两个请求） App 委托将持有对 classCommonRequest 的引用

class1 和 class2 都可以使用

```
YourAppDelegate *delegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate];
//get your refrence of request handler class
MyRequestHandler *request = [delegate myRequestHandler];
//then use functions in it
[request fetchSth]; 
```

如果您的问题更具体，我可以给您更好的答案:) 我希望这对您有所帮助

# html - 在没有滚动条的 1 页中显示 4 个网站？

> ID：10695974
> 
> 赞同：0
> 
> 时间：2012-05-22T05:05:00.870
> 
> 标签：html, iframe

我有一个包含 4 个不同 iframe 网页的网页，我希望所有页面都应在一个页面中显示 100%，但整体页面大小应缩小。平均所有页面显示 25%；当我给 iframe 一个大小时，它会显示滚动条要做什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:07:21.807

除非您可以编辑所有四个已加载网页的源代码，否则这是不可能的。iframe 没有“缩放”参数/属性，因此加载的页面需要自动调整大小以适应自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:09:27.017

有几种方法可以从内联框架中隐藏滚动条。他们来了：

```
** 
```

**使用滚动=“否”。这是在 HTML 4.1（撰写本文时的当前 HTML 版本）中删除 iframe 滚动条的方法。

使用溢出：隐藏。这是如何使用 CSS（层叠样式表）隐藏滚动条，

使用无缝 =“无缝”。该属性是在 HTML 版本 5 工作草案中引入的。因此，为了迎合未来的浏览器，应该包含此代码。**

**

使用哪一个？

您可以安全地同时使用所有三个。话虽如此，如果您更喜欢使用 W3C 验证器来验证您的网页，您应该只使用与您正在验证的 HTML 版本一致的方法。因此，如果您使用的是 HTML 4.1，请使用 scrolling="no"。如果您使用的是 HTML 5，请使用 seamless="seamless"。

在任何情况下，您也可以使用 overflow:hidden 以及任何其他代码。实际上，您通常会发现这会覆盖 HTML 并隐藏任何已定义的滚动条。

# java - Java中匿名内部类的异常处理

> ID：10695976
> 
> 赞同：0
> 
> 时间：2012-05-22T05:05:19.327
> 
> 标签：java, exception

我在处理我自己的来自匿名内部类的异常时遇到了困难，该类是动作侦听器的一部分。

下面给出的是我自己的例外：

```
class Register extends Exception
{
    String Error;
    public Register() 
    {
    Error = new String("Register Exception");
}
} 
```

下面给出的方法在鼠标侦听器的另一个类中。

```
public void Gui() throws Register
{
    jButton.addMouseListener(new MouseAdapter() 
    {
        public void mouseClicked(MouseEvent e) 
        {
                throw new Register();    //Unhandled exception type Register
         }          
     });
     throw new Register();   // This works fine.
} 
```

如果我在方法中抛出异常，我就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:16:52.853

Java 中有两种类型的异常：已检查（即，您被迫捕获它们）和未检查（您不必强制捕获它们）。`RuntimeException`和的子类`Error`未检查，而其他异常的子类被视为已检查。要缓解代码中的问题，请更改行

```
class Register extends Exception 
```

到

```
class Register extends RuntimeException 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:34:42.930

就像评论中建议的@Mortiz 一样，mouseClicked() 没有`throws`子句。您需要处理 mouseClicked() 内部的异常。

如果你想通过编译器错误来获取，这是一个糟糕的主意，你可以`Register`扩展`RuntimeException`. 但是，这可能不是您想要的。`Gui()`方法永远不会捕获`mouseClicked()`因为`Gui()`不是调用者而引发的异常。`mouseClicked()`由 Swing 事件处理类调用。

你遇到的是一个设计问题。如果我没看错，您想处理响应输入事件而引发的异常；并且您期望进行长度恢复操作。在这种情况下，您应该向用户提供反馈并在`mouseClicked()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:36:36.287

查看您的代码，您将在从 mouseClicked 方法抛出自定义异常时遇到编译时错误，这是因为该方法没有抛出您的自定义异常。

您可以通过以下两种方式之一处理异常 - 1）使用 try - catch 2）或让您的方法抛出您的自定义异常。

在您的场景中，mouseClicked 方法不会引发您的自定义异常，这就是您收到错误的原因。

我希望这会有所帮助。

# iphone - IOS activityIndi cator子view上面的MKMapView

> ID：10695977
> 
> 赞同：1
> 
> 时间：2012-05-22T05:05:19.373
> 
> 标签：iphone, ios, user-interface

我有一个 mapView (_mapView)，它本身就是我的 viewController 的一个子视图，我想在获取很多引脚时添加一个 activityIndi​​cator，但是我不能让它出现在 mapView 上方，谁能建议为什么不

```
 UIActivityIndicatorView *activityIndicator = nil;
    activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray] ;
    CGRect frame = activityIndicator.frame;
    frame.origin = CGPointMake(290, 12);
    activityIndicator.frame = frame;
    activityIndicator.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
    activityIndicator.tag = 2;
    [self._mapView addSubview:activityIndicator];
dataMarkers = [[kepnService new] getPlacesByBounds:neCoord.latitude :neCoord.longitude :swCoord.latitude :swCoord.longitude]; // call to webservice
.... other processing code
 [activityIndicator removeFromSuperview]; 
```

有关信息，我的视图堆栈如下所示

```
subviews (
    "<MKMapView: 0x6d6f320; frame = (0 0; 320 460); clipsToBounds = YES; layer = <CALayer: 0x6d99520>>",
    "<UIToolbar: 0x6d93f70; frame = (-1 0; 342 44); autoresize = W+TM; layer = <CALayer: 0x6d8bbf0>>",
    "<UINavigationBar: 0x6d9a4f0; frame = (0 416; 320 44); autoresize = W+BM; layer = <CALayer: 0x6d9a5b0>>"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:08:46.597

好像您正在添加活动指示器，阻塞主线程然后将其删除。

你应该做的是：

添加活动指示器。将线程或块分离到后台以执行处理代码。完成后，移除活动指示器。

# android - 从 expandableListView 的 onChildClick 开始新的活动

> ID：10695978
> 
> 赞同：0
> 
> 时间：2012-05-22T05:05:31.700
> 
> 标签：android, android-intent

我正在使用`ExpandableListView`Android。我必须通过单击孩子来调用不同的活动。每个孩子都必须指导我进行新的活动。请告诉我我该怎么做。

我的代码有点像：

```
list.setOnChildClickListener(new OnChildClickListener() {
    public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {
        // TODO Auto-generated method stub
        ExpandableListAdapter adap = parent.getExpandableListAdapter();
        int gp = (int) adap.getGroupId(groupPosition);
        int cp = (int) adap.getChildId(groupPosition, childPosition);
        if (gp == 0) {
            switch (cp) {
            case 0:
                Intent intent = new Intent(getApplicationContext(),
                    Test11.class);
                    break;
                case 1:
                Intent intent = new Intent(getApplicationContext(),
                            Test12.class);
                }
            } else if (gp == 1) {
                switch (cp) {
                case 0:
                Intent intent = new Intent(getApplicationContext(),
                            Test21.class);
                    break;
                case 1:
                Intent intent = new Intent(getApplicationContext(),
                            Test22.class);
                    break;
                }
            }

            return true;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:13:48.717

也许我相信你缺少 startActivity()，

```
list.setOnChildClickListener(new OnChildClickListener() {
    public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {
        // TODO Auto-generated method stub
        ExpandableListAdapter adap = parent.getExpandableListAdapter();
        int gp = (int) adap.getGroupId(groupPosition);
        int cp = (int) adap.getChildId(groupPosition, childPosition);
        if (gp == 0) {
            switch (cp) {
            case 0:
                Intent intent = new Intent(getApplicationContext(),
                    Test11.class);
                 startActivity(intent);
                    break;
                case 1:
                Intent intent = new Intent(getApplicationContext(),
                            Test12.class);
                startActivity(intent);
                }
            } else if (gp == 1) {
                switch (cp) {
                case 0:
                Intent intent = new Intent(getApplicationContext(),
                            Test21.class);
               startActivity(intent);
                    break;
                case 1:
                Intent intent = new Intent(getApplicationContext(),
                            Test22.class);
               startActivity(intent);
                    break;
                }
            }

            return true;
        }

    }); 
```

# javascript - GPS 拉取 - 在更新到当前位置之前多次拉取旧数据

> ID：10695980
> 
> 赞同：0
> 
> 时间：2012-05-22T05:06:02.963
> 
> 标签：javascript, geolocation, gps, w3c-geolocation

我回顾了一些类似的 GPS 问题。但似乎运气不太好。当我通过这种方法提取 GPS 时 - 它似乎提取了旧数据，即最后一次提取 GPS 的来源。有什么建议么？

这是一个简单的 javascript GPS 拉取 - 在请求时填充表单。

```
 <script type="text/javascript"> 

function getLocationConstant()
{
    if(navigator.geolocation)
    {
        watchID = navigator.geolocation.watchPosition(onGeoSuccess,onGeoError); 
    } else {
        alert("Your browser or device doesn't support Geolocation");
    }
}

// Get a single location update
function getLocationConstant()
{
    if(navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(onGeoSuccess,onGeoError);
    } else {
        alert("Your browser or device doesn't support Geolocation");
    }
}

// If we have a successful location update
function onGeoSuccess(event)
{
    document.getElementById("Latitude").value =  event.coords.latitude; 
    document.getElementById("Longitude").value = event.coords.longitude;

}

// If something has gone wrong with the geolocation request
function onGeoError(event)
{
    alert("Error code " + event.code + ". " + event.message);
}
 </script>

 <div class=general align=center>
 <cfform action="gps_pull.cfm" method="post">
 <div align=center>
 <b>GPS Services Needs to be enabled on your device.</b>
 <br>
 <br>With a GPS Capable Device - Choose "Get Location". Once the GPS data is pulled in, choose "Add GPS".
 <br><span class=code8>You may need to allow GPS Device time to pull current location</span>
 </div>
 <br>
 <table align=center>
 <tr>
 <td>Latitude:</td>
 <td><cfinput type="text" id="Latitude" name="gpslat" value="" required="yes" message="Choose Get Location First"></td>
 </tr>
 <tr>
 <td>Longitude:</td>
 <td><cfinput type="text" id="Longitude" name="gpslong" value=""></td>
 </tr>
 <tr>
 <td colspan=2 align=center><br><input type="button" value="Get Location" onclick="getLocationConstant()"/> &nbsp; <input type="submit" value="Add GPS"></td>
 </tr>
 </table>
 <input type="hidden" name="src" value="gpsup">
 </cfform> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:56:49.757

这也是我的代码。仍然拉旧数据，通常需要 3+ 拉才能获得正确的数据。使用 Android Samsung Galaxy S2 - 已尝试仅使用 GPS 模式和 GPS + 小区三角测量。而且通常仍然需要 3 次以上的拉取才能获得正确的数据。

想法伙计们？

```
 <script type="text/javascript"> 

// Get a single location update
function getLocationConstant()
{
    if(navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(onGeoSuccess,onGeoError,{enableHighAccuracy:true,maximumAge:0});
    } else {
        alert("Your browser or device doesn't support Geolocation");
    }
}

// If we have a successful location update
function onGeoSuccess(event)
{
    document.getElementById("Latitude").value =  event.coords.latitude; 
    document.getElementById("Longitude").value = event.coords.longitude;

}

// If something has gone wrong with the geolocation request
function onGeoError(event)
{
    alert("Error code " + event.code + ". " + event.message);
}
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:30:13.293

watchPosition 可以采用 options:`watchPosition(onGeoSuccess,onGeoError,options);`并且默认值为

```
options = { "enableHighAccuracy": false,
            "timeout"           : Infinity,
            "maximumAge"        : 0 } 
```

`enableHighAccuracy`除非是，否则您的 GPS 设备可能不会记录位置的微小变化`true`。当它注意到位置变化时，`onGeoSuccess`再次调用。并且您可以通过重新创建手表来强制重新找到位置（但 GPS 保持的位置可能不会因为`enableHighAccuracy`设置而改变）。

`enableHighAccuracy`也适用于`getCurrentPosition`选项，并且将以相同的方式工作。

# asp.net-mvc - 如何在 MVC3 中为多行文本框创建多个编辑器模板？

> ID：10695983
> 
> 赞同：9
> 
> 时间：2012-05-22T05:06:49.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, razor

我的观点中有以下两种类型的多行文本区域：

```
<textarea cols="100" rows="15" class="full-width" id="dialogText" 
          name="Text">@Model.Text</textarea>

<textarea cols="100" rows="10" class="full-width" id="dialogText" 
          name="Text">@Model.Text</textarea> 
```

我想利用自定义编辑器模板，但保留以不同方式指定属性的能力（例如，`rows`上述两者之间的不同）。

我可以为同一个字段声明和使用两种不同的模板吗？如果是这样，那么我应该如何声明模板以及如何指定要使用的不同模板？

另外我如何声明不同的列和行。我可以使用 cols,rows 还是应该在 or 中指定高度`CSS`和`width=500px, height=600px`宽度`400px`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-22T06:13:25.037

您可以覆盖[默认编辑器模板](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)( `~/Views/Shared/EditorTemplates/MultilineText.cshtml`)：

```
@Html.TextArea(
    "", 
    ViewData.TemplateInfo.FormattedModelValue.ToString(),
    ViewData
) 
```

然后假设您已经定义了一个视图模型：

```
public class MyViewModel
{
    [DataType(DataType.MultilineText)]
    public string Text { get; set; }
} 
```

在主视图中，您可以这样做：

```
@model MyViewModel

@Html.EditorFor(x => x.Text, new { cols = "100", rows = "15", id = "dialogText", @class = "full-width" })
@Html.EditorFor(x => x.Text, new { cols = "100", rows = "10", id = "dialogText", @class = "full-width" }) 
```

这将呈现预期的输出：

```
<textarea class="full-width" cols="100" id="dialogText" name="Text" rows="15">
    hello world
</textarea>

<textarea class="full-width" cols="100" id="dialogText" name="Text" rows="10">
    hello world
</textarea> 
```

您还可以*增强*编辑器模板，这样您就不需要在每个 EditorFor 调用中指定 @class 属性，如下所示：

```
@{
    var htmlAttributes = ViewData;
    htmlAttributes["class"] = "full-width";

}
@Html.TextArea(
    "", 
    ViewData.TemplateInfo.FormattedModelValue.ToString(),
    htmlAttributes
) 
```

现在你可以：

```
@model MyViewModel
@Html.EditorFor(x => x.Text, new { cols = "100", rows = "15", id = "dialogText" })
@Html.EditorFor(x => x.Text, new { cols = "100", rows = "10", id = "dialogText" }) 
```

哦，别忘了 id 在 HTML 中必须是唯一的，所以这`id = "dialogText"`对于第二个 textarea 显然应该是不同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:04:40.127

您可以创建一个编辑器模板`MultiLine1.cshtml`，`MultiLine2.cshtml`并且在您的视图模型中，您可以使用`UIHint`它来指定要用于该特定属性的编辑器模板。但是您只能为一个属性指定一个模板。但是，在相同类型的不同属性上，您可以使用不同的模板。

# python - Python中嵌套类的正确语法？

> ID：10695986
> 
> 赞同：4
> 
> 时间：2012-05-22T05:07:11.010
> 
> 标签：python, class

我对编程很陌生，但仍在学习我的技巧。如果这个问题太初级，请道歉。

我觉得澄清我的问题有点困难，所以这里有一个我想要完成的示例：假设 a 是类 X 的一个实例，并且应该具有属性 a1、a2、a3、b1、b2、b3、c1 , c2 和 c3。为了便于使用，我想将 a1 到 a3、b1 到 b3 和 c1 到 c3 放入嵌套在 X 下的自己的 A、B、C 类中。这样做的正确语法是什么？

```
 class X:
    def __init__ (self, name, A, B, C):
        self.name = name
        self.A = A
        self.B = B
        self.C = C
    class A (X):
       def _init_ (self, name, a1, a2, a3):
           self.name = name
           self.a1 = a1
           self.a2 = a2
           self.a3 = a3
    class B (x):
       def _init_ (self, name, b1, b2, b3):
           self.name = name
           self.b1 = a1
           self.b2 = a2
           self.b3 = a3
    class C (X):
       def _init_ (self, name, c1, c2, c3):
           self.name = name
           self.c1 = a1
           self.c2 = a2
           self.c3 = a3 
```

由于这完全建立在猜测之上，我有 99.9% 的把握它是错误的，但我不确定接下来我应该做什么才能使它正确。我曾尝试搜索“嵌套类”的答案，但我找到的答案并没有真正阐明我的立场。

请解释 Python 中嵌套类的正确语法。

感谢您的帮助，对于这个基本问题，我深表歉意。

编辑：我的代码中有一些重要的拼写错误，我刚才已经更正了。对于任何不便，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T06:24:56.843

嵌套类只是一个定义存在于另一个范围内的类。它们通常在 Python 中并不是那么有用。但是，可以做任何你想做的事情，并从多个类中派生出一个类的属性。两个主要方法是*mixins/多重继承*和*组合*。

mixin 方法是这样的：

```
class A(object):
    def __init__(self, a=None, *args, **kwargs):
        self.a = a
        super(A, self).__init__(*args, **kwargs)

class B(object):
    def __init__(self, b=None, *args, **kwargs):
        self.b = b
        super(B, self).__init__(*args, **kwargs)

class X(A, B):
    def __init__(self, *args, **kwargs):
        super(X, self).__init__(*args, **kwargs)

x = X(a='foo', b='bar')
print x.a, x.b 
```

*   既然要同时具有和`X`的属性，我们就让它继承自两者：。`A``B``class X(A, B)`

*   每个都`__init__`接受`*args, **kwargs`作为参数；我们的`super()`调用`X`将命名参数传递给 and 的初始化器`A`，`B`因此我们需要它能够接受（然后忽略）*其他*初始化器的参数。也就是说，我们同时传递`a`和 ，`b`但`A.__init__`只使用`a`。

*   阅读`super()`对于理解 Python 的继承至关重要。

但是，过去的简单示例可能难以管理多重继承，因此通常建议您改用*组合*：

```
class A(object):
    def __init__(self, a):
        self.a = a

class B(object):
    def __init__(self, b):
        self.b = b

class X(object):
    def __init__(self, a, b):
        self.A = A(a)
        self.B = B(b)

x = X('foo', 'bar')
print x.A.a, x.B.b 
```

您可以看到这消除了`super()`调用和初始化程序上任何特殊参数处理的需要，使其更加清晰。这里我们取两个参数，然后在内部构造相关的类并附加到`X`实例上。这使得属性查找有点尴尬，但有一些方法可以简化它：

```
class X(object):
    # <etc>
    @property
    def a(self):
        return self.A.a 
```

也可以覆盖`__getattr__`并执行一些动态查找，而不是手动编码每个属性。

```
class X(object):
    # <etc>
    def __getattr__(self, item):
        for component in (getattr(self, c) for c in ['A', 'B']):
            if hasattr(component, item):
                return getattr(component, item) 
```

另一种选择是传递自己的组合实例：

```
class X(object):
    def __init__(self, A, B):
        self.A = A
        self.B = B

x = X(A('foo'), B('bar'))
print x.A.a, x.B.b 
```

这消除了任何需要`X`了解任何关于它们`A`的`B`接口的信息。这使得封装更容易：如果合适的话，您现在可以粘贴`A`到`B`他们自己的模块中。为方便起见，您还可以使用工厂函数：

```
def make_X(a, b):
    return X(
        A(a), 
        B(b)
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:10:43.320

You're looking for inheritance.

Also, I notice that you are missing that python is case sensitive. This means that `a` and `A` are NOT the same variable

```
 class X:
    def __init__ (self, name, a, b, c):
        self.name = name
        self.a = a

class A (X):
   def _init_ (self, name, a1, a2, a3):
       self.name = name
       self.a1 = a1
       self.a2 = a2
       self.a3 = a3

class B (A):
   def _init_ (self, name, a1, a2, a3):
       self.name = name
       self.b1 = a1
       self.b2 = a2
       self.b3 = a3

class C (A):
   def _init_ (self, name, a1, a2, a3):
       self.name = name
       self.c1 = a1
       self.c2 = a2
       self.c3 = a3 
```

Hope this helps

# sockets - 异步套接字客户端/服务器抛出异常 (TcpClient & TcpListener)

> ID：10695990
> 
> 赞同：0
> 
> 时间：2012-05-22T05:07:34.913
> 
> 标签：sockets, c#-4.0, asynchronous

我正在尝试编写一个异步套接字服务器/客户端，但我不断收到以下错误：

```
Unable to read data from the transport connection: A blocking operation was interrupted
    by a call to WSACancelBlockingCall.
Inner Exception: System.Net.Sockets.SocketException (0x80004005): A blocking operation
    was interrupted by a call to WSACancelBlockingCall
at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size,
    SocketFlags socketFlags)
at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 
```

它在我的 SockerServer 类中在以下行中引发了此异常：

```
BytesRead = ClientStream.Read(MessageBuffer, 0, BufferSize); 
```

这只发生在客户端尝试与服务器断开连接时 - 他们似乎断开连接正常，然后我得到这个异常。

这是代码：

## 消息处理程序

客户端中有一个此类的实例，服务器中的每个客户端都有一个实例。这用于为每个客户端包装 NetworkStream，以便可以将消息写入其中。

```
public class MessageHandler
{
    private readonly ASCIIEncoding ByteEncoder = new ASCIIEncoding();

    private readonly NetworkStream ClientStream;

    public MessageHandler(NetworkStream Stream)
    {
        this.ClientStream = Stream;
    }

    public void Send(byte[] Message)
    {
        ClientStream.Write(Message, 0, Message.Length);
        ClientStream.Flush();
    }

    public void Send(string Message)
    {
        byte[] MessageBytes = ByteEncoder.GetBytes(Message);
        ClientStream.Write(MessageBytes, 0, MessageBytes.Length);
        ClientStream.Flush();
    }
} 
```

## MessageHandlerEventArgs

```
public class MessageHandlerEventArgs : EventArgs
{
    public readonly MessageHandler SocketMessage;

    public MessageHandlerEventArgs(MessageHandler Messages)
    {
        this.SocketMessage = Messages;
    }
} 
```

## SocketHandler（SocketServer 和 SocketClient 的基类）

```
public abstract class SocketHandler
{
    protected const int DefaultPort = 3000;
    protected const int BufferSize = 4096;
    protected readonly Action<byte[]> MessageAction;

    public SocketHandler(Action<byte[]> MessageAction)
    {
        this.MessageAction = MessageAction;
        ClientConnected += OnClientConnected;
        ClientDisconnected += OnClientDisconnected;
    }

    protected void HandleConnection(IAsyncResult ar)
    {
        TcpClient Client = (TcpClient)ar.AsyncState;
        ThreadPool.QueueUserWorkItem((x) => HandleConnection(Client));
    }

    protected void HandleConnection(TcpClient NetworkClient)
    {
        try
        {
            using (NetworkStream ClientStream = NetworkClient.GetStream())
            {
                MessageHandler Messages = new MessageHandler(ClientStream);
                DoClientConnected(new MessageHandlerEventArgs(Messages));
                byte[] MessageBuffer = new byte[BufferSize];
                int BytesRead;

                while (true)
                {
                    BytesRead = 0;
                    BytesRead = ClientStream.Read(MessageBuffer, 0, BufferSize);

                    if (BytesRead == 0)
                    {
                        DoClientDisconnected(new MessageHandlerEventArgs(Messages));
                        break;
                    }
                    else
                    {
                        MessageAction.Invoke(MessageBuffer.ToArray());
                    }
                }
                NetworkClient.Close();
            }
        }
        catch (Exception ex)
        {
            Logger.ExceptionLog.AddEntry(ex, "SocketHandler.HandleConnection");
        }
    }

    protected abstract void OnClientConnected(object sender, MessageHandlerEventArgs e);
    protected abstract void OnClientDisconnected(object sender, MessageHandlerEventArgs e);

    public event EventHandler<MessageHandlerEventArgs> ClientConnected;
    protected void DoClientConnected(MessageHandlerEventArgs args)
    {
        if (ClientConnected != null)
        {
            ClientConnected(this, args);
        }
    }

    public event EventHandler<MessageHandlerEventArgs> ClientDisconnected;
    protected void DoClientDisconnected(MessageHandlerEventArgs args)
    {
        if (ClientDisconnected != null)
        {
            OnClientDisconnected(this, args);
        }
    }

    public event EventHandler StatusChanged;
    protected void DoStatusChanged()
    {
        if (StatusChanged != null)
        {
            StatusChanged(this, EventArgs.Empty);
        }
    }
} 
```

## 套接字服务器

```
public class SocketServer : SocketHandler
{
    private static List<MessageHandler> CurrentClients = new List<MessageHandler>();
    private ServerStatus _Status;
    public ServerStatus Status
    {
        get { return _Status; }
        private set
        {
            _Status = value;
            DoStatusChanged();
        }
    }

    private readonly TcpListener NetworkServer;

    public SocketServer(Action<byte[]> MessageAction)
        : base(MessageAction)
    {
        NetworkServer = new TcpListener(IPAddress.Any, DefaultPort);
    }

    public void Start()
    {
        try
        {
            if (Status == ServerStatus.Stopped)
            {
                ThreadPool.QueueUserWorkItem((x) => ListenForClient());
                Status = ServerStatus.Started;
            }
        }
        catch (Exception ex)
        {
            Logger.ExceptionLog.AddEntry(ex, "SocketServer.Start");
        }
    }

    public void Stop()
    {
        try
        {
            if (Status != ServerStatus.Stopped)
            {
                Status = ServerStatus.Stopped;
                NetworkServer.Stop();
            }
        }
        catch (Exception ex)
        {
            Logger.ExceptionLog.AddEntry(ex, "SocketServer.Stop");
        }
    }

    private void ListenForClient()
    {
        try
        {

            Status = ServerStatus.WaitingClient;
            NetworkServer.Start();
            while (Status != ServerStatus.Stopped)
            {
                if (!NetworkServer.Pending())
                {
                    Thread.Sleep(100);
                    continue;
                }
                else
                {
                    TcpClient NetworkClient = NetworkServer.AcceptTcpClient();
                    ThreadPool.QueueUserWorkItem((x) => HandleConnection(NetworkClient));
                    Status = ServerStatus.Connected;
                }
            }
        }
        catch (Exception ex)
        {
            Logger.ExceptionLog.AddEntry(ex, "SocketServer.ListenForClient");
        }
    }

    protected override void OnClientConnected(object sender, MessageHandlerEventArgs e)
    {
        CurrentClients.Add(e.SocketMessage);
    }

    protected override void OnClientDisconnected(object sender, MessageHandlerEventArgs e)
    {
        CurrentClients.Remove(e.SocketMessage);

        Status = (CurrentClients.Count == 0)
            ? ServerStatus.WaitingClient
            : ServerStatus.Connected;
    }
} 
```

## 套接字客户端

```
public class SocketClient : SocketHandler
{
    private ClientStatus _Status;
    public ClientStatus Status
    {
        get { return _Status; }
        set
        {
            _Status = value;
            DoStatusChanged();
        }
    }

    private TcpClient NetworkClient;

    public MessageHandler Messages;

    public SocketClient(Action<byte[]> MessageAction)
        : base(MessageAction)
    {
        NetworkClient = new TcpClient();
    }

    public void Connect(IPAddress ServerAddress, int ServerPort)
    {
        try
        {
            if (Status == ClientStatus.Disconnected)
            {
                Status = ClientStatus.Connecting;
                NetworkClient.Connect(ServerAddress, ServerPort);
                ThreadPool.QueueUserWorkItem((x) => HandleConnection(NetworkClient));
            }
        }
        catch (Exception ex)
        {
            Logger.ExceptionLog.AddEntry(ex, "SocketClient.Connect");
        }
    }

    public void Disconnect()
    {
        try
        {
            if (Status != ClientStatus.Disconnected)
            {
                Status = ClientStatus.Disconnecting;
                NetworkClient.Close();
                Status = ClientStatus.Disconnected;
            }
        }
        catch (Exception ex)
        {
            Logger.ExceptionLog.AddEntry(ex, "SocketClient.Disconnect");
        }

    }

    protected override void OnClientConnected(object sender, MessageHandlerEventArgs e)
    {
        Messages = e.SocketMessage;
        Status = ClientStatus.Connected;
    }

    protected override void OnClientDisconnected(object sender, MessageHandlerEventArgs e)
    {
        Messages = null;
        Status = ClientStatus.Disconnected;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:22:48.813

不要这样编码。使用线程/线程池是错误的。Socket/TcpClient 具有应该使用的异步方法

我创建了一个您可以使用的框架。它会为您处理所有处理。您需要做的就是处理传入/传出数据。

[http://blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/](http://blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/)

# objective-c - Objective C - 矩阵乘法性能缓慢

> ID：10695992
> 
> 赞同：2
> 
> 时间：2012-05-22T05:07:58.327
> 
> 标签：objective-c, matrix, nsmutablearray, multiplication, matrix-multiplication

我有 2 个二维 NSMutableArrays，我正在尝试做一些基本的矩阵乘法。我在下面有我的通用公式代码，但它的性能非常慢（如预期的那样）。我做了很多谷歌搜索，但没有找到任何简单或易于理解的公式来更改代码以提高性能。谁能指出一个简单的公式/教程/示例的正确方向，说明如何在 Objective C 中使用矩阵乘法获得比 0(n^3) 更好的性能。

```
+ (NSMutableArray*)multiply:(NSMutableArray*)a1 withArray:(NSMutableArray*)a2
{
    if([[a1 objectAtIndex: 0] count] != [a2 count])
    {
        NSLog(@"Multiplicaton error!");
        return NULL;
    }

    int a1_rowNum = [a1 count];
    int a2_rowNum = [a2 count];
    int a2_colNum = [[a2 objectAtIndex:0] count];
    NSMutableArray *result = [NSMutableArray arrayWithCapacity:a1_rowNum];
    for (int i = 0; i < a1_rowNum; i++) {
        NSMutableArray *tempRow = [NSMutableArray arrayWithCapacity:a2_colNum];
        for (int j = 0; j < a2_colNum; j++) {
            double tempTotal = 0;
            for (int k = 0; k < a2_rowNum; k++) {
                double temp1 = [[[a1 objectAtIndex:i] objectAtIndex:k] doubleValue];
                double temp2 = [[[a2 objectAtIndex:k] objectAtIndex:j] doubleValue];
                tempTotal += temp1 * temp2;
            }
             //Stored as a string because I upload it to an online database for storage.
            [tempRow addObject:[NSString stringWithFormat:@"%f",tempTotal]];
        }
        [result addObject:tempRow];
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T05:15:18.107

**如果你用 C 编写它**会快得多。

* * *

`double[]`与这个任务`NSArray`的s相比，速度快得离谱。`NSNumber`您将拥有良好的缓存一致性、最少的指令，无需通过运行时或分配来写入或读取元素。无需对每个元素执行引用计数循环……</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T05:16:35.873

您需要查看**Apple 的 Accelerate frameWork** for **ios4.0 onwards**。你可以用它做很多复杂的数学和矩阵操作，这个框架经过**优化，可以在任何 iOS 硬件上运行。**

查看：

[https://developer.apple.com/performance/accelerateframework.html](https://developer.apple.com/performance/accelerateframework.html)

# javascript - 进行不需要响应的 AJAX 调用的正确方法？

> ID：10695993
> 
> 赞同：5
> 
> 时间：2012-05-22T05:08:02.440
> 
> 标签：javascript, ajax

当我不想从服务器返回响应时，是否有适当的方法进行 AJAX 调用？我希望服务器保存一些数据，但客户端不需要响应。如果服务器从不响应，AJAX 连接是否会保持打开状态，等待响应直到超时？

我会像下面这样使用Javascript。这是一个典型的 AJAX 调用，除了我省略了 xmlhttp.onreadystatechange 事件。

```
function SaveLabel()
{
    var xmlhttp = null;
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    } else {
        alert('Your browser does not support this feature.');
        return;
    }

    xmlhttp.open('GET', 'mypage.aspx?label=1');
    xmlhttp.send(null);
} 
```

我发现了一个类似的问题，但它并没有真正回答我的问题：[Ajax 连接是否在某些时候断开？](https://stackoverflow.com/questions/5164081/does-ajax-connection-disconnect-at-some-point)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T05:10:28.983

You need to keep the connection open until the server is done with it, regardless of whether or not you expect (or will be or won't be) a reply from the server.

The reason is that most webservers will kill requests if the client disconnects before the script has finished executing.

The server doesn't have to "respond" as in return data, it just needs to "return".

i.e. in answer to your question "Does Ajax connection disconnect at some point?": Yes, when the server terminates the connection.

So what you need to do is make sure that your ASP(X) script terminates as soon as it has finished its work. Don't let it run forever, pass data to a helper daemon/service, etc. that will need long-running processing.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T05:20:10.820

`xmlhttp.onreadystatechange`只是 XHR 对象的一个​​事件，您可以在其中附加一个侦听器以侦听它的状态变化。它与在页面上有一个按钮并添加一个`onclick`处理程序是同义的。

无论有没有处理程序，它都会做同样的事情（AJAX 仍然调用，按钮仍然是可点击的）。唯一的区别是你不知道刚刚发生了什么（你不知道 AJAX 是否成功/失败，你不知道按钮何时被点击）。