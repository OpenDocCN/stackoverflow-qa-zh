# StackOverflow 问答 10555000-10555999

# asp.net - 使用 ASP.NET/SQL Server 丢失会话状态

> ID：10555000
> 
> 赞同：19
> 
> 时间：2012-05-11T16:12:55.900
> 
> 标签：asp.net, asp.net-mvc, machinekey, sql-session-state

我有一个 ASP.NET MVC 工作流配置为由负载均衡器管理的两个网站。网站使用 Sql Server 作为会话状态提供程序并关闭身份验证（不需要）。

现在，我似乎偶尔会丢失会话状态，我相信这是因为请求正在由备用服务器处理，所以基本上用户正在从服务器跳转到服务器，这取决于负载均衡器认为合适的方式。我并不总是在工作流的同一阶段“丢失会话状态”，所以我相信这与网络场配置 + sql server 会话状态有关。

两个应用程序使用相同的机器密钥来加密和解密存储在 sql server 中的会话状态。

两台服务器上的配置如下：

```
<authentication mode="None" />
<sessionState mode="SQLServer" sqlConnectionString="{connection-string}" />
<machineKey decryptionKey="777CB456774AF02F7F1AC8570FAF31545B156354D9E2DAAD" 
            validationKey="89B5B536D5D17B8FE6A53CBB3CA8B8695289BA3DF0B1370BC47D362D375CF91525DDB5307D8A288230DCD4B3931D23AED4E223955C45CFF2AF66BCC422EC7ECD" /> 
```

我已经确认这在两台服务器上都是相同的，有什么我遗漏的吗？

当我使用单个服务器时，这不会发生在我的开发环境中。

我担心我正遭受周五忧郁症的折磨，毫无疑问下周会找出答案，可悲的是我不想等待！

有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-14T12:59:32.460

发现问题。

当您创建希望使用 Sql Server 共享会话状态的应用程序时，它们需要在 IIS 中配置相同的 ID。这是因为生成的会话 ID 是根据应用 ID 生成的。（内部应用程序 ID 类似于*LM/W3SVC/1*

两台服务器对 IIS 中的每个应用程序都有不同的 ID。解决方法是在每台服务器的“管理网站 -> 高级设置”下更改 ID。

![在此处输入图像描述](../Images/7403db7a4546129d030bf53e6af6f802.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-11T17:22:50.387

1.  使用 IIS 管理器，在根级别和网站级别仔细检查您的计算机密钥设置。

![在此处输入图像描述](../Images/80df5bfdd6e68e8b6315b171e9f2667c.png)

2.  查看机器关键元素上的 IsolateApps 修饰符 - [http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.100%29.aspx)

3.  您最近是否从 3.5 升级到 4.0？

4.  不得已 - 回收两台机器上的 appPools，然后重新启动 IIS。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-11T18:14:28.770

会话具有（网络）应用程序范围。看看[这个 MS KB](http://support.microsoft.com/kb/325056)是否有帮助。

更新：有趣的反对票。也许我的建议需要更加明确。

除了匹配机器密钥外，您**还***必须*匹配站点的 IIS 配置（因此它是 IIS 中的*“相同应用程序”（应用程序路径）*。

# actionscript-3 - 遍历树结构

> ID：10555001
> 
> 赞同：0
> 
> 时间：2012-05-11T16:13:05.350
> 
> 标签：actionscript-3

所以假设我有某种带有节点和子节点的树结构。当我看到某些节点时，我想穿过树并大喊。

看下面，这是 ActionScript 但它类似于 Java 等：

```
for(var i:int=0; i<parent.children.length; i++)
{ 
  child = parent.children[i];
  if(child.nodeName == "A")
  {
    parent = child;
    for(var j:int=0; j<parent.children.length; j++) 
    {
      child = parent.children[j];
      if(child.nodeName == "B")
      {
        trace("B found");
        parent = child;
        //now search for C etc...
      }
    }
  }
} 
```

问题出在'parent = child'行，我想“跳”到下一组孩子，但当然当我回去时，我失去了对上面父母的引用。解决这个问题的通常方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:23:41.290

递归对树来说是一件美妙的事情：

```
public function walkTree(node:Tree)
{
    //here is where you want to check the node's name against your list of
    //'nodes to shout out about'
    trace("Node found: " + node.nodeName);

    for(var i:int=0; i < node.children.length; i++)
    {
        walkTree(node.children[i]);
    } 
} 
```

**注意：**如果其中一个子节点可以拥有其父节点（*或其父节点的父节点，或其父节点的父节点的父节点等*），则递归是危险的，因为它将陷入循环。使用递归时，确保没有子节点引用父节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:21:01.030

制作一个遍历树并检查节点的递归函数？

一些代码：

```
public function traverse(parent:Node, node:Node, search:Array):void
{

    if (search.indexOf(node.nodeName) != -1)
        trace("Found " + node.nodeName);

    for(var i:int=0; i < node.children.length; i++)
    {
        traverse(node,node.children[i],search);
    }
} 
```

# objective-c - 如何在 cocos2d xCode 中使用回调函数

> ID：10555002
> 
> 赞同：-7
> 
> 时间：2012-05-11T16:13:05.367
> 
> 标签：objective-c

每个人。我正在制作一些有趣的游戏。我认为，可能有 3 个模块，主要、演员、目标和其他一些模块。Main 模块处理主要问题，例如精灵动画的检查结束。

我想在其他人因他们的行动而结束时在主模块中捕获事件。但是，主类，它导入其他类，因为通过调用子对象的函数向其他类发出一些命令。然后，在其他类中，当函数结束时，它们会发送一些完整的消息，或者调用 Main 的函数。所以在主类中，知道类的状态结束，或者运行其他命令。我看不到该模型的任何示例。

有什么办法吗？

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:15:50.890

简单，使用块：

```
-(void) myMethodWithCallback:(void (^)(id)) block 
{
    // something happened here
    block(self);
} 
```

而且，您可以像这样使用它：

```
[self myMethodWithCallback:^(id sender) {
      NSLog(@"in callback!");
}]; 
```

# c# - c#泛型抽象类和泛型方法

> ID：10555008
> 
> 赞同：2
> 
> 时间：2012-05-11T16:13:21.653
> 
> 标签：c#, .net, oop

我对通用抽象类及其子类有一些问题，我不知道如何解决。我有以下抽象类：

```
public abstract class Loader<T> where T: CommonPoco {
    public virtual List<T> LoadFromFile(StreamReader input, out List<T> result, bool trackProgress) {
        return LoadFromFile(input, out result, trackProgress, CultureInfo.CurrentCulture);
    }
    public abstract List<T> LoadFromFile(StreamReader input, out List<T> result, bool trackProgress, IFormatProvider format);
    public abstract T UploadToDb(List<T> data);
} 
```

这是我的 CommonPoco：

```
public class CommonPoco {
    private int line;
    public int Line {
        get { return line; }
        set { line = value; }
    }

    private string error;
    public string Error {
        get { return error; }
        set { error = value; }
    }
} 
```

现在我还有很多其他的 Loader 子类，比如这个：

```
public class CountryLoader: Loader<Country> {
    public override List<Country> LoadFromFile(StreamReader input,
        out List<Country> result, bool trackProgress, IFormatProvider format) {
        //Method implementation
    }
    public override Country UploadToDb(List<Country> data) {
        //Method implementation
    } 
```

而且我还有很多 CommonPoco 的子类，包括 Country 类。到现在为止还挺好。现在问题来了，我想实现一个通用的方法。此方法将根据某些参数为任务使用正确的加载器。也许是这样的：

```
void LoadModule<T>(Module module) where T: CommonPoco {
    Loader<T> loader;
    switch (module) {
        case Module.Country:
            loader = new CountryLoader();
            break;
    }
} 
```

这不起作用，编译器抱怨说它不能从 CountryLoader 转换为 Loader。我必须创建一个方法来加载我的每个模块，它们是完全相同的代码，除了 Loader 类的初始化。我真的很讨厌重复的代码，我该如何实现呢？

忘了提，使用 .NET Framework 4.0。我愿意改变任何需要的东西，如果必须的话，甚至是我的抽象类。谢谢。我想知道使用接口而不是抽象类是否可以让我这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:21:47.647

如果你把你的抽象类变成一个接口怎么办，像这样：

```
public interface ILoader<T> where T : CommonPoco
    {
        List<T> LoadFromFile(StreamReader input, out List<T> result, bool trackProgress);
        List<T> LoadFromFile(StreamReader input, out List<T> result, bool trackProgress, IFormatProvider format);
        T UploadToDb(List<T> data);
    } 
```

然后更改您的 CountryLoader 实现：

```
public class CountryLoader : ILoader<Country>
    {
        public List<Country> LoadFromFile(StreamReader input, out List<Country> result, bool trackProgress)
        {
            return LoadFromFile(input, out result, trackProgress, CultureInfo.CurrentCulture);
        }

        public List<Country> LoadFromFile(StreamReader input,
            out List<Country> result, bool trackProgress, IFormatProvider format)
        {
            //Method implementation
            result = null;
            return null;
        }

        public Country UploadToDb(List<Country> data)
        {
            //Method implementation
            return null;
        }
    } 
```

你创建一个这样的方法：

```
void LoadModule<T>(Module module) where T:CommonPoco
        {
            ILoader<T> loader;
            switch (module)
            {
                case Module.Country:
                    loader = new CountryLoader() as ILoader<T>;
                    break;
            }
        } 
```

这样做的问题是你必须多次实现你的公共 LoadFromFile ，除非其他人有办法绕过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:29:43.243

这就是它抱怨的原因：如果您尝试与其他一些`Country`在国内未通过但通过的 POCO 一起做呢？示例：`LoadModule<Continent>(Module.Country)`？现在应该发生什么？正是这种模糊性会给你带来麻烦。

泛型类型的全部意义在于它适用于您传入的任何类型，但是您试图在泛型变量上设置特定类型，而不管泛型定义如何，这是不好的做法（即使受到约束）。保持泛型泛型。也就是说，只需删除通用定义就可以了。

```
void LoadModule(Module module) {
    Loader<CommonPoco> loader;
    switch (module) {
        case Module.Country:
            loader = (Loader<CommonPoco>)new CountryLoader();
            break;
    }
} 
```

这是多态性背后的前提，因为您使用接口/基类作为子类可以/应该做什么的“定义”。这样，您将变量指定为父/基类型（在本例中为`Loader`和`CommonPoco`），并且出于功能（方法和属性）的目的，特定实现（即：`CountryLoader`）仅被视为父/基类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:31:31.387

您遇到了协变和逆变类型的问题。根据您使用的 C# 版本，您可以使用“in”（协变）或“out”（逆变）标记来标记泛型类型。例如，加载程序，但在这种情况下，您的类以协变（获取安全）和逆变（设置安全）方式运行。您可以分解您的类定义以支持这两种用例，或者您可以使用更精细的方案进行类型解析。如果您使用的 IoC 容器支持继承类型的开放通用解析（Castle Windsor 支持，StructureMap 不支持），那么您可以依靠容器来确定在给定情况下要使用哪个 Loader。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:18:15.960

您可以尝试将 Loader<> 中的方法抽象到标记为逆变的接口中。

```
public interface ILoader<out T> 
```

然后让 Loader 基类实现这个，然后使用类似于 SPFiredrake 描述的方法，除了`ILoader<CommonPoco>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T18:33:35.997

但是你可能会不小心调用这样的东西

```
villageLoader = LoadModule<Village>(**countryModuleType**) ; 
```

当您期望一个加载器得到另一个加载器时，这将是编译器错误。请参阅@killinaswine 回答为什么 ms 开发人员认为让您这样做不是一个好主意。

您可以使用类型转换自行解决此问题。

# c# - 如何使此查询在 Entity Framework Code First CTP5 上工作

> ID：10555015
> 
> 赞同：0
> 
> 时间：2012-05-11T16:13:48.877
> 
> 标签：c#, entity-framework, ef-code-first, code-first

我有以下模型（为这个问题简化了）：

```
public class Student
{
    public int ID { get; set; }
    public virtual ICollection<StudentCourse> StudentCourses { get; set; }

     public Student(){
        StudentCourses = new List<StudentCourse>();
    }
}

public class StudentCourse
{
    public int ID { get; set; }
    public string Grade { get; set; }
    public int StudentID { get; set; }
    public int CourseID { get; set; }

    public virtual Student Student { get; set; }
    public virtual Course Course { get; set; }
}

public class Course
{
    public int ID { get; set; }        
    public virtual ICollection<StudentCourse> StudentCourses { get; set; }

    public Course() {
        StudentCourses = new List<StudentCourse>();
    }
} 
```

一切都在我的 DbContext 类中链接并按预期工作。我想找到所有参加过课程的学生，所以我这样做：

```
var query = db.Students
            .Where(s => s.StudentCourses.Course.ID == 11); 
```

但它失败了，因为由于某种原因，EF 看不到 StudentCourse 和 Course 之间的链接。错误信息是：

'System.Collections.Generic.ICollection' 不包含'Course' 的定义，并且找不到接受'System.Collections.Generic.ICollection' 类型的第一个参数的扩展方法'Course'（您是否缺少 using 指令还是程序集参考？）。

但是，以下工作正常：

```
var query = db.StudentCourses
            .Where(s => s.Course.ID == 11)
            .Select(s=>s.Students); 
```

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:32:01.090

StudentCourses 是一个课程列表，您不能使用 .Course 访问其中的单个课程。为此，您需要使用适用于单个记录的子句，例如 select、where、any 等（大多数采用 lambda 表达式的 IEnumerable 扩展都是为此目的。）

```
var query = db.Students.Where(s => s.StudentCourses.Any(r => r.Course.CourseID == 11)); 
```

如果您想使用 db.Students，很好，但是您发布的第二个示例在语义上可能更接近您正在做的事情。StudentCourses 代表学生和课程之间的联系。您的 where 子句仅限于特定课程，select 子句将学生课程集合投射到其连接的学生上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:00:58.497

为什么这部分在您的代码中：

```
public Student(){
    StudentCourses = new List<StudentCourse>();
} 
```

我做的时候不需要包括那部分，只要有它就可以了

```
public virtual ICollection<StudentCourse> StudentCourses { get; set; } 
```

全部靠自己。您通过提前分配列表来阻止内部准备工作。

* * *

请注意

```
var query = db.Students
              .Where(s => s.StudentCourses.Course.ID == 11); 
```

不一定会起作用，因为 StunderdCourses 可能会被懒惰地评估，你会想要使用：

```
var query = db.Students
              .Include("StudentCourses")
              .Where(s => s.StudentCourses.Course.ID == 11); 
```

这将确保每个学生的 StudentCourses 也包含在查询中。

* * *

请注意，上面的查询效率很低，因为您正在获取所有学生，并且对于每个学生，您正在获取他的所有课程，您最后建议的代码要好得多，因为它首先查找正确的课程，然后找到属于的学生对它：

```
var query = db.StudentCourses
              .Include("Course")
              .Where(s => s.Course.ID == 11)
              .Select(s=>s.Students); 
```

请注意`Include`再次使用，这在执行惰性评估的服务器上是必需的。

* * *

但是，请注意，该类实际上具有 CourseID 属性，因此您也可以这样做：

```
var query = db.StudentCourses
              .Where(s => s.CourseID == 11)
              .Select(s=>s.Students); 
```

# python - 在 Python 中使用 for 循环更改数组的元素

> ID：10555016
> 
> 赞同：0
> 
> 时间：2012-05-11T16:13:51.177
> 
> 标签：python, string, list, for-loop

我正在尝试自学 Python，并正在用它做一些琐碎的任务。目前我正在处理列表和字符串。我知道字符串是不可变的，所以我将字符串转换为列表并希望遍历列表以将任何元音更改为 $ 符号。问题是 $ 符号没有归因于元音。这是我的代码：

```
aString = raw_input("Please enter a sentence: ")

aString = list(aString)

for i in xrange(len(aString)):
    if i=='a' or \
       i=='e' or \
       i=='i' or \
       i=='o' or \
       i=='u':
        i.newattribute = '$'

print aString 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:24:04.593

我知道您这样做是为了学习语言，但您应该知道您可以简单地使用该方法`sub`替换为正则表达式：

```
import re
re.sub('[aeiou]', '$', aString) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:20:35.317

```
strs="abcduitryd"
print("".join(('$' if x in 'aeiou' else x for x in strs)))

$bcd$$tryd 
```

**或者：**

```
strs="abcduitryd"
lis=list(strs)
for i,x in enumerate(lis):
    if x in 'aeiou':
        lis[i]='$'
strs="".join(lis)
print(strs)

$bcd$$tryd 
```

**或者 ：**

```
strs="abcduitryd"
for i,x in enumerate(strs):
    if x in 'aeiou':
        strs=strs.replace(strs[i],'$')
print(strs)

$bcd$$tryd 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T16:14:58.430

您想要执行以下操作：

```
for i in xrange(len(aString)):
    if aString[i]=='a' or \
       aString[i]=='e' or \
       aString[i]=='i' or \
       aString[i]=='o' or \
       aString[i]=='u':
          aString[i] = '$' 
```

但是使用替换方法可能会更容易。

```
replaceList = ['a', 'e', 'i', 'o', 'u']
aString = raw_input("Please enter a sentence: ")
for letter in replaceList:
    aString.replace(letter)
print aString 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T16:43:24.267

If you are learning python, one cool feature that can be used is a list comprehension. You can do this:

```
>>> str = "hello world"
>>> l = ["$" if ch in "aeiou" else ch for ch in str]
>>> str = "".join(l)
>>> str
'h$ll$ w$rld' 
```

The second line builds a list, walking through each character and applying `"$" if ch in "aeiou" else ch1 to it. You then just join the list to get a new string. It's doing exactly what you are trying to do, converting the string to a list and in the process, coverting vowels to '$'.

This is not the most efficient way to do it of course. The best way to do it is to use a library meant for this sort of thing as others have mentioned.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T16:42:29.517

“Pythonic”方式是对字符串使用 translate 方法。
例子：

```
import string
mystr="hello world"
vowels="aeiou"
token="$"*len(vowels)
tab=string.maketrans(vowels,token)
mystr.translate(tab)
'h$ll$ w$rld' 
```

# c++ - 模拟按下的快捷方式

> ID：10555018
> 
> 赞同：4
> 
> 时间：2012-05-11T16:14:03.310
> 
> 标签：c++, python, qt, winapi, keyboard-shortcuts

对不起，我不得不以这种迂回的方式描述功能，但我不知道如何最好地实现想要的功能*

我有一个简单的程序，可以在按下全局热键时将一些数据放入剪贴板。用户通常的用例是直接将该文本粘贴到 Photoshop 中的文本字段中。即——假设`ctrl-x`调用全局热键——他们一直在做`ctrl-x ctrl-v`。显然这是糟糕的设计。

那么，基本上模拟`ctrl-v`事件的最简单方法是什么，以便 Photoshop 无需额外按键即可直接粘贴文本？

正如`winapi`标签所暗示的那样，我在这里不关心 Mac。必须在 Win 7 下工作，与 XP/Vista 的兼容性将是一个明确的优势。脚本的其余部分是用 Python3 和 PyQt4 编写的，但如果需要，我也可以编写一些 c 扩展。

PS：任何对标题有更好想法的人都非常欢迎改进它。

*而且我想避免执行问题的简单一半然后要求不可能的事情的陷阱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:46:29.090

Use `SendInput()`. I didn't test this, but it should work:

```
INPUT ctrlV [4];
ZeroMemory(ctrlv, sizeof ctrlV);

ctrlV [0].type = INPUT_KEYBOARD;
ctrlV [0].ki.wVk = VK_LCONTROL;

ctrlV [1].type = INPUT_KEYBOARD;
ctrlV [1].ki.wVk = 'V'; //assuming ASCII

ctrlV [2].type = INPUT_KEYBOARD;
ctrlV [2].ki.wVk = 'V'; //assuming ASCII
ctrlV [2].ki.dwFlags = KEYEVENTF_KEYUP;

ctrlV [3].type = INPUT_KEYBOARD;
ctrlV [3].ki.wVk = VK_LCONTROL;
ctrlV [3].ki.dwFlags = KEYEVENTF_KEYUP;

SendInput (4, ctrlV, sizeof (INPUT)); 
```

# python - 看起来 Python C-API 中的 C 代码将 ptr 返回到堆栈变量。我错过了什么？

> ID：10555024
> 
> 赞同：1
> 
> 时间：2012-05-11T16:14:16.590
> 
> 标签：python, c, python-c-api, python-c-extension

当我看到以下代码片段时，我正在阅读文件 methodobject.c，因为我正在尝试学习如何为 Python 制作 C 扩展：

```
PyObject *
PyCFunction_Call(PyObject *func, PyObject *arg, PyObject *kw)
{
    PyCFunctionObject* f = (PyCFunctionObject*)func;
    PyCFunction meth = PyCFunction_GET_FUNCTION(func);
    PyObject *self = PyCFunction_GET_SELF(func);
    Py_ssize_t size;

    switch (PyCFunction_GET_FLAGS(func) & ~(METH_CLASS | METH_STATIC | METH_COEXIST)) {
    case METH_VARARGS:
        if (kw == NULL || PyDict_Size(kw) == 0)
           return (*meth)(self, arg);
        break; 
```

我看的越多

```
 return (*meth)(self, arg); 
```

我越是意识到我不明白。我*认为*它返回了一个指向 meth 的指针，它是一个函数，它接受 self（一个本地声明的指针）和 arg（一个从外部传递到 PyCFunctionCall 的指针）。但是，因为在我看来 meth 和 self 好像是在堆栈上分配的，所以一旦 PyCFunctionCall 退出，它们将被释放，这将导致它们传递给的任何变量出现问题。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:18:39.403

`meth`是一个函数指针。它使用参数返回函数的*结果*`*meth`（meth指向的地址）`(self, arg)`：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T16:21:29.393

它返回 的返回值`meth(self, arg)`，而不是`meth`它本身。请注意，它使用 derferencing 指针`(*meth)`，然后传入`self`并传递`arg`给该位置的函数。

所以`meth(self, arg)`将在`return`发生之前完全评估，并且不会返回任何堆栈变量。

编辑：当我说时`meth(self, arg)`，我的意思是`the_function_pointed_to_by_meth(self, arg)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T16:26:01.490

`(*meth)(self, arg)`是一个函数**调用**。

恰好*函数指针*是一个局部变量。`return`只是传递从通话中返回的任何内容。

函数指针语法令人困惑。:)

# android - 一个 ExpandableListView 的多种布局

> ID：10555027
> 
> 赞同：1
> 
> 时间：2012-05-11T16:14:28.220
> 
> 标签：android, android-layout, expandablelistview

我有 ExpandableListView 并为我自己的适配器扩展了 BaseExpandableListAdapter。不过，我在使用分隔符时遇到了困难。我添加到我的对象列表中，这些对象转到 ExpandableListView “分隔符”到某些位置，我需要使用不同的行布局在 ExpandableListView 中显示它们。现在的问题是，BaseExpandableListAdapter 没有 BaseAdapter 所具备的 getViewTypeCount() 和 getItemViewType(int position) 方法。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:43:57.223

You could implement those "separators" by providing different `Views` for the position you want. To do this use the :

[`getChildType()`](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html#getChildType%28int,%20int%29) and [`getChildTypeCount()`](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html#getChildTypeCount%28%29) (for different child `Views`)
[`getGroupType()`](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html#getGroupType%28int%29) and [`getGroupTypeCount()`](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html#getGroupTypeCount%28%29) (for different group `Views`)

from the [`BaseExpandableListAdapter`](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html) class.

# django - 如何使用混合类型选项制作嵌套字段？

> ID：10555030
> 
> 赞同：0
> 
> 时间：2012-05-11T16:14:41.677
> 
> 标签：django, form-fields

我正在制作一个网站来管理某种日程安排。

我查看了日历等，发现谷歌日历中的这个表格正是我想要的。![谷歌日历提醒界面](../Images/76a921cf7a0005e84b219b112509bc57.png)

问题是我很难弄清楚如何解决这个问题`Finaliza`。我有一个`Reminder`模型，但是……我应该为每个选项创建一个列并使用表单小部件吗？我可以使用一些罐装解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:06:37.117

为什么不将列添加到模型中：

```
finalize_type = models.CharField(choices=(('Never', ''), ('Repetitions', ''), ('Date', '')))
finalize_repetitions = models.IntegerField()
finalize_date = models.DateField()

# model clean!
def clean(self):
     if finalize_type == 'Repetitions':
          # check that there is number in finalize_repetitions
          # raise validation error if not
     elif finalize_type == 'Date':
          # check date on finalize_date

     # You should also check if date and repetions aren't set when type == 'Never' 
```

如果我没记错的话，模型清洁会在保存时触发。因此，如果您实现 ModelForm，它应该显示在表单错误中。

我也会实现一个方法

```
@property
def next_event()
    """returns date of next repetition, None if finished""" 
```

希望能帮助到你。

# node.js - 创建快速模板引擎时...如何使用部分？

> ID：10555031
> 
> 赞同：1
> 
> 时间：2012-05-11T16:14:52.840
> 
> 标签：node.js, express

我正在 node.js 中为 expressjs 实现我自己的模板引擎，并且根据文档（http://expressjs.com/guide.html#view-partials），我希望能够在视图中呈现部分.

**短篇小说**：我如何调用“部分”并让它返回一个字符串，而不是立即将结果发送到浏览器？

**长篇大论**：问题是我无法弄清楚“.partial”函数在 res.partial 之外的位置......它立即将其结果发送到浏览器，而忽略了包含它的视图。我已经检查了其他模板引擎源中的“部分”一词，但只找到了渲染，当我查看快速代码时......我也找不到响应对象之外的引用。

**问题开始**：也许我做错了？我无法弄清楚幕后的魔力......所以我可能只是错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:04:51.370

当我想让 Mustache 工作时，我遇到了类似的问题，因为我不关心 EJS 模板或其衍生物。Express 的主要作者 TJ Hallowaychuck 宣布他将在即将到来的 v3.0 中放弃对 partials 的内部支持，因为他认为这应该是模板引擎的责任，而不是 express。因此，如果您在 Git 存储库中查找“部分”一词，您将很难找到任何东西。

是时候将您自己的部分支持纳入您的自定义模板引擎了。我会查看“Handlebars.js”的源代码，以获取有关如何完成它的一些灵感。

# javascript - 在复选框勾选时将表单字段从一个表单复制到另一个表单

> ID：10555036
> 
> 赞同：0
> 
> 时间：2012-05-11T16:15:06.510
> 
> 标签：javascript, forms

正如标题所说，我有一个地址表格和另一个地址表格，两个表格都有相同的字段。

当填写一个表单时，希望用户能够选中一个框以将表单数据复制到另一个表单，因为这些值很多时候都是相同的。

我所有的文本字段都在工作，我只是被国家的下拉菜单卡住了。

**JAVASCRIPT**

```
 <script language="javascript" type="text/javascript">

    function CopyAddress(f) {

        var SelCountry = document.getElementById("dCountry");
        var SelAccCountry = document.getElementById("dAccCountry");

        if (f.cCopyAddress.checked == true) {
            f.tAccAddress1.value = f.tAddress1.value;
            f.tAccAddress2.value = f.tAddress2.value;
            f.tAccTown.value = f.tTown.value;
            f.tAccCounty.value = f.tCounty.value;
            f.tAccPostcode.value = f.tPostcode.value;
            f.tAccTel.value = f.tTel.value;
            f.tAccFax.value = f.tFax.value;
            f.tAccEmail.value = f.tEmail.value;
            SelAccCountry.options[SelAccCountry.selectedIndex].value = SelCountry.options[SelCountry.selectedIndex].value;
      }
    }
</script>

<asp:CheckBox ID="cCopyAddress" runat="server" onclick="CopyAddress(this.form)" CssClass="autoWidth" /> 
```

如果您希望我在表单代码中过去，那么请告诉我，但我认为这不是必需的，因为我认为错误不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:17:03.373

只需分配`selectedIndex`财产。

```
SelAccCountry.selectedIndex = SelCountry.selectedIndex; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:34:19.707

```
<script type="text/javascript">
function doit() {
document.getElementById("two").value = document.getElementById("one").value;
}

</script>

<textarea id="one">text goes here</textarea>
<input name="Checkbox1" type="checkbox" onchange="doit()" />
<textarea id="two"></textarea> 
```

# iphone - iPhone 允许其他应用程序在录制音频/Shazam 时播放音频

> ID：10555038
> 
> 赞同：4
> 
> 时间：2012-05-11T16:15:17.877
> 
> 标签：iphone, audio-recording, audio-player, shazam

就在另一个应用程序正在播放音频时录制音频而言，希望做 Shazam 正在做的事情。

1）录音很好，这里没问题

2）当应用程序启动并开始录制时，来自另一个应用程序的音乐停止（iTunes等）。

3) 我玩过所有 AV 音频设置的咒语，但没有运气让音频继续/恢复。

4) 当 Shazam 启动时，音频会停止一段时间，然后再恢复。我假设 Shazam 正在做一些事情来用音乐播放器重新启动音频？我搜索并找不到是否有办法做到这一点。

因此，如果有人有适当的设置来让它工作，我们将不胜感激。

另外，说，请阅读 AV 文档，这不是答案，我已经看过这些，但没有运气。

我试过在这里找到

[http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html)

已经尝试过 AV 和 K 类型的设置。就 MIC 的工作原理而言，我确实看到设置有所不同，但在所有情况下，当我的应用程序获取麦克风时，它都会停止来自其他应用程序的音频。

如果我必须牺牲一只站在苹果方向的鸡，这很好，只要让我知道是什么类型的鸡 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:12:44.060

经过一番来回，看起来使用 MixWithOthers 是关键。您还必须确保将音频路由设置为最后/当前音频路由...

仅供参考，这是使用 AudioQueue 接口

所以我们...

/ 使用 iPod 开始音乐 / 使用以下方式启动我们的应用程序

*   音频队列新输入
*   AudioQueueAddPropertyListener
*   AudioQueueAllocateBuffer(s)
*   AudioQueueEnqueueBuffer(s)
*   setupCat
*   设置鸭
*   设置音频路由
*   设置混合
*   AudioSessionSetActive (true)
*   音频队列开始

* * *

```
typedef union 
{
    OSStatus propertyResult;
    char a[4];
} unionstatus;

unionstatus u2;

typedef union 
{
    UInt32 UI32sessionCat;
    char a[4];
} unionuint32;

unionuint32 usc2;

bool setAudioUInt32 ( UInt32 property, UInt32 value )
{
    bool result = true;

    UInt32 UI32 = value;
    UInt32 UI32size = sizeof(UI32);

    u2.propertyResult = AudioSessionSetProperty (property, UI32size , &UI32 );

    if ( u2.propertyResult )
    {
        printf("Error Set %ld %lx %c%c%c%c\n",u2.propertyResult,u2.propertyResult,u2.a[3],u2.a[2],u2.a[1],u2.a[0]);
        result = false;
    }
    return result;
}

UInt32 getAudioSettingInt ( UInt32 value )
{
    UInt32  I32;
    UInt32  I32size = sizeof(I32);

    u2.propertyResult = AudioSessionGetProperty ( value , &I32size, &I32 );

    if ( u2.propertyResult )
        printf("Error Get %ld %lx %c%c%c%c\n",u2.propertyResult,u2.propertyResult,u2.a[3],u2.a[2],u2.a[1],u2.a[0]);

    return (I32);
} 
```

* * *

```
/// checking taken out

bool otherPlaying = getAudioSettingInt ( kAudioSessionProperty_OtherAudioIsPlaying );
if ( otherPlaying )
{
    setAudioUInt32 (kAudioSessionProperty_OtherMixableAudioShouldDuck, false);
    // this returns a string, arg, have to look for string values, etc.
    UInt32 audioRoute = getAudioSettingInt ( kAudioSessionProperty_AudioRoute );

    CFStringRef ar = (CFStringRef) audioRoute;
    CFStringEncoding encodingMethod = CFStringGetSystemEncoding();
    const char *car = CFStringGetCStringPtr(ar,encodingMethod);
    CFRange range = CFStringFind(ar,CFSTR("Headphones"),kCFCompareCaseInsensitive);

    if ( range.length == 0 ) // we have speakers
        result = setAudioUInt32 (kAudioSessionProperty_OverrideAudioRoute, kAudioSessionOverrideAudioRoute_Speaker);
    else // we have headphones
        {}
} 
```

# ubuntu - SSH 不接受公钥，权限似乎是正确的

> ID：10555039
> 
> 赞同：0
> 
> 时间：2012-05-11T16:15:20.777
> 
> 标签：ubuntu, ssh, public-key

```
me@a1:~/me$ ssh -v ae@1.1.1.1
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Connecting to 1.1.1.1 [1.1.1.1] port 22.
debug1: Connection established.
debug1: identity file /home/me/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/me/.ssh/id_rsa-cert type -1
debug1: identity file /home/me/.ssh/id_dsa type -1
debug1: identity file /home/me/.ssh/id_dsa-cert type -1
debug1: identity file /home/me/.ssh/id_ecdsa type -1
debug1: identity file /home/me/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_4.3
debug1: match: OpenSSH_4.3 pat OpenSSH_4*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 23:2d:18:a3:88:d4:91:34:a4:85:..........
debug1: Host '1.1.1.1' is known and matches the RSA host key.
debug1: Found key in /home/me/.ssh/known_hosts:6
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/me/.ssh/id_rsa
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
debug1: Trying private key: /home/me/.ssh/id_dsa
debug1: Trying private key: /home/me/.ssh/id_ecdsa
debug1: Next authentication method: password
ae@1.1.1.1's password: 
```

接着

```
me@a1:~/me$ tail /var/log/auth.log
May 11 10:17:01 a1 CRON[21454]: pam_unix(cron:session): session closed for user root
May 11 11:17:01 a1 CRON[22859]: pam_unix(cron:session): session opened for user root by (uid=0)
May 11 11:17:01 a1 CRON[22859]: pam_unix(cron:session): session closed for user root 
```

没有说任何关于权限的事情。SSH 适用于其他主机 - 我可以由此得出结论，这是服务器上的公钥问题，而不是我的 PC 上的问题？

我唯一能想到的另一件事是我的 PC 上的用户名是“me”，而远程服务器上的用户名是“ae”。

当它工作时，对于另一台服务器，它看起来像这样：

```
...
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/me/.ssh/id_rsa
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: Authentication succeeded (publickey).
Authenticated to 1.1.1.2 ([1.1.1.2]:22).
debug1: channel 0: new [client-session]
debug1: Entering interactive session.
Last login: Mon May  7 21:25:09 2012 from 2.2.2.2
[username@server2 ~]$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:22:59.283

令人反感的服务器管理员错误地复制了密钥。(X_X)

# xslt - XSLT 中基于页面级别的多个模板

> ID：10555040
> 
> 赞同：1
> 
> 时间：2012-05-11T16:15:20.937
> 
> 标签：xslt

我正在使用 CMS，它允许使用 XSLT 进行导航。该设计规定了具有三个不同级别的导航，并且每个级别都有不同的标记。“不费吹灰之力”，乐观的开发人员说，“我会和 XSLT 一起破解它。我的意思是，它有多难？”。这是我的第一个错误。

让我们切入正题：

**XSLT**

```
 <xsl:template match="/NavigationTree">    
    <xsl:if test="count(//Page) > 0">
      <ul class="floatLeft">

        <xsl:apply-templates select="Page">
          <xsl:with-param name="depth" select="1"/>
        </xsl:apply-templates>

      </ul>
    </xsl:if>
  </xsl:template>

  <xsl:template match="//Page">
    <xsl:param name="depth"/>
    <li>

      <xsl:if test="count(Page)">
        <ul>
          <xsl:apply-templates select="Subpage">
            <xsl:with-param name="depth" select="$depth+1"/>
          </xsl:apply-templates>
        </ul>
      </xsl:if>

    </li>
  </xsl:template>

  <xsl:template match="//Subpage">
    <xsl:param name="depth"/>
    <li class="test">
    </li>
  </xsl:template> 
```

我的想法是，第一级应该使用“页面”模板，所有子页面都应该使用“子页面”模板。相反，第一级中第二个之后的所有项目都使用“子页面”模板。如果我删除该模板，它会正确显示整个第一层——但没有子层。我没有受过教育的猜测是页面模板中的 if 语句有问题。

那有意义吗？

我比我的母语口语更了解 HTML，但在 XSLT 方面我还是个新手。我什至不知道要搜索什么，所以如果这个问题已经在其他地方得到解决，请指导我 O' 强大的智者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:18:23.883

我解决了这样的问题：

```
 <xsl:template match="/NavigationTree">

    <xsl:if test="count(//Page) > 0">
        <xsl:apply-templates select="Page">
          <xsl:with-param name="depth" select="1"/>
        </xsl:apply-templates>
    </xsl:if>

  </xsl:template>  

  <xsl:template match="//Page">
    <xsl:param name="depth"/>
      <a>
        <xsl:attribute name="href"><xsl:value-of select="@FriendlyHref" disable-output-escaping="yes"/></xsl:attribute>
          <xsl:value-of select="@MenuText" disable-output-escaping="yes"/>
      </a>

      <xsl:if test="count(./Page)">

        <xsl:for-each select="./Page">

          <xsl:value-of select="@MenuText" disable-output-escaping="yes"/>

            <xsl:for-each select="./Page">
                <a href="{@FriendlyHref}">
                  <xsl:value-of select="@MenuText" disable-output-escaping="yes"/>
                </a>
            </xsl:for-each>

         </xsl:for-each>

        </xsl:if>

  </xsl:template> 
```

XML 很简单。它只是`<Page />`相互嵌套的节点。

```
<Page ID="99" MenuText="Branding days " Href="Default.aspx?ID=99" FriendlyHref="/en-GB/Corporate/Branding-days.aspx" ShowInSitemap="False" ShowInLegend="True" AbsoluteLevel="2" RelativeLevel="2" ChildCount="3" class="L2"> 
```

如果有人有更清洁的解决方案，请告诉我，但就目前而言，它按预期工作。

# eclipse - 使用 Firefox 进行 PDT/Xdebug

> ID：10555042
> 
> 赞同：3
> 
> 时间：2012-05-11T16:15:29.517
> 
> 标签：eclipse, firefox, xdebug, eclipse-pdt

是否有任何特殊说明可以让 PDT/Xdebug 与 Firefox 一起使用？

我已经能够让它在内部浏览器和 Chrome 上正常工作，但由于某种原因，使用 Firefox，我在尝试启动调试会话时卡在 57%。

过去，我使用 Firefox 进行了所有工作，但不幸的是，我的电脑崩溃了，我从头开始。

我已将 Preferences > General > Web Browser 中的设置更改为 Firefox，甚至让搜索选项扫描目录并成功找到 exe。

不知道此时还要检查什么。Eclipse/PDT/Xdebug 配置似乎不是问题，因为它适用于我尝试过的所有其他浏览器。

版本信息：

```
FF version 12.0
Windows 7 Ultimate (64-bit)
Eclipse Indigo 3.7.2
PDT 3.0.0.v201201110400-77-184_2BEICRgM_fMVcz0M4Va9O 
```

Xdebug信息：

```
zend_extension = "c:/wamp/bin/php/php5.3.8/zend_ext/php_xdebug-2.1.2-5.3-vc9.dll"

[xdebug]
xdebug.remote_log = C:/wamp/bin/php/php5.3.8/tmp
xdebug.remote_enable = on
xdebug.remote_host=127.0.0.1
xdebug.profiler_enable = off
xdebug.profiler_enable_trigger = off
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir = "c:/wamp/tmp" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T18:51:57.210

在尝试使用 Firefox 进行调试时，我也遇到了一些问题。

然后我发现这个 Firefox 插件增加了对 Xdebug 的支持：

[简单的 Xdebug 1.5](https://addons.mozilla.org/en-US/firefox/addon/easy-xdebug/)

就我而言，它成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:25:14.060

我发现这个问题也是如此，但是在它工作了很长时间之后。它很可能与 java 7_21 的新版本有关，尽管我看不出这会导致问题的充分理由。

我以这种方式解决了 [Eclipse、XAMPP、xDebug - 等待 XDebug 会话 - 保持在 57%](https://stackoverflow.com/questions/16121672/eclipse-xampp-xdebug-waiting-for-xdebug-session-stays-in-57/16167484#16167484)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T14:11:17.957

似乎是“自行解决”的问题之一。不知道如何，但它现在正在工作。

# javascript - Web 应用程序无法在 iPad 上运行，但可以在桌面浏览器上运行

> ID：10555043
> 
> 赞同：4
> 
> 时间：2012-05-11T10:24:56.043
> 
> 标签：javascript, html, browser, css, ipad

我正在创建一个使用 JQuery、CSS 和 HTML 在 ipad 上运行的 Web 应用程序，当我在 Web 浏览器上测试我的应用程序时，一切正常，但是当我通过 ipads 浏览器访问 Web 应用程序时，所有窗口看起来都一样，但没有的功能在那里。我不知道为什么，因为我将所有 .js 文件都导入到 .html 文件中，并且所有功能都可以在 safari 上运行并在桌面上运行.... 就好像 ipad 上的网络应用程序忽略了我的所有.js 文件！

这是我的文件的图片，如果有人需要，我可以添加代码

![在此处输入图像描述](../Images/8bc3ccae8953a76d7b39d4b4f2595dfa.png)

有谁知道为什么该功能无法在 ipad 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:20:52.240

您可以尝试在 iPad 中使用的 Webkit 浏览器上启动 Web 应用程序，并尝试找出问题所在。Webkit 浏览器包括 Safari 和 Google Chrome。使用这些启动 Web Inspector 并通过转到网络选项卡查看加载 javascript 文件是否有任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T14:26:44.407

您可以使用 ipad 和 safari 的远程调试功能。警告这仅适用于 IOS 6 [http://moduscreate.com/enable-remote-web-inspector-in-ios-6/](http://moduscreate.com/enable-remote-web-inspector-in-ios-6/)

# asp.net - 如何从动态数据中的list.aspx中删除相关表

> ID：10555061
> 
> 赞同：0
> 
> 时间：2012-05-11T16:16:33.557
> 
> 标签：asp.net, asp.net-dynamic-data

我正在使用 ASP.NET 动态数据。

1.  当在 List.aspx 中列出表行时，有一些列显示具有该表的外键的表的名称。这些列不是表中的字段，动态数据会自动生成它们。我怎样才能删除它们？
2.  如何删除为每个表显示的过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:51:09.013

在 System.ComponentModel.DataAnnotations 中使用元数据标记 DisplayAttribute。下面是一个在表中隐藏 Category 列并且不创建过滤器的示例：

```
[Display(Name="Categories", AutoGenerateField=false, AutoGenerateFilter=false)]        
public object Cats { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:24:53.433

这只是一个[谷歌](https://www.google.com/webhp?sourceid=chrome-instant&ix=seb&ie=UTF-8#hl=en&output=search&sclient=psy-ab&q=remove%20columns%20asp.net%20dynamic%20data&oq=&aq=&aqi=&aql=&gs_l=&pbx=1&fp=5e25d7957546d55b&ix=seb&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1951&bih=1116)。此外，[堆栈](https://stackoverflow.com/questions/6048963/how-to-hide-filtered-column-with-dynamic-data-site)是您的朋友。这是一个可以帮助您的视频教程：[如何从 DynamicData 数据网格中删除列](http://www.asp.net/web-forms/videos/aspnet-dynamic-data/how-to-remove-columns-from-your-dynamicdata-data-grids)。这是一个堆栈帖子，也可能对您有所帮助：[如何使用动态数据站点隐藏过滤列？](https://stackoverflow.com/questions/6048963/how-to-hide-filtered-column-with-dynamic-data-site)

# linux - 在 linux 上查看文件大小

> ID：10555066
> 
> 赞同：44
> 
> 时间：2012-05-11T16:16:58.033
> 
> 标签：linux, shell, command-line, watch

我想观察单个文件不断增长的大小，所以我使用了这个命令：

```
texai@maelstrom ~$ ls -lh club_prod.sql | awk '{print $5}'
116M 
```

现在我想每 5 秒看一次结果，所以：

```
texai@maelstrom ~$ watch -n 5 ls -lh club_prod.sql | awk '{print $5}' 
```

但此命令不返回任何结果

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-11T16:20:43.377

您正在将输出传递`watch`到 into `awk`。如果你简化你的命令行，你所拥有的是：

```
 watch <some arguments> | awk '{print $5}' 
```

那不是你想要的。尝试：

```
watch -n 5 "ls -lh club_prod.sql | awk '{print \$5}'" 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-05-11T16:22:54.083

```
watch -n 5 "du -h club_prod.sql" 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-05-03T11:09:16.787

不完全相关，但如果你想监控某个文件的增长率，你可以使用以下命令：

`tail -f yourfile.txt | pv > /dev/null`

*   `tail -f`- 输出附加到文件的数据

*   `pv`- 测量通过管道的数据流

*   `> /dev/null`- 标准输出被丢弃

*注意：有时`pv`可能没有预装*

我希望这会对某人有所帮助:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-11T16:20:46.153

您需要引用管道，以便*在* `watch`.

```
watch -n 5 "ls -lh club_prod.sql | awk '{print \$5}'" 
```

还要注意`\`添加到，`\$5`因为外部引号现在是双引号，其中 -`$`变量被扩展。（其他引用方法通常比这更难看。）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-11T16:20:29.760

```
watch -n 5 "ls -lh club_prod.sql | awk '{print \$5}'" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-22T14:21:05.527

对于文件的快速详细增长观察，每 0.1 秒：

```
watch -n 0.1 "ls -l /mnt/some/file | awk '{print \$5}' | sed -re ' :rep ; s/([0-9])([0-9]{3})($|[^0-9])/\1,\2\3/ ; t rep '" 
```

这将产生类似 62,673,539,072 的结果。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-19T11:10:11.863

的用法`watch`是正确的，但`ls`我会避免使用。我会推荐使用`stat`or `du`，但这取决于你想要什么。

*   **`du`：**如果你想在你的驱动器上占用空间
*   **`stat`：**如果您想要文件包含的字节数（我可以从文件中读取多少字节）

想象一下使用压缩文件系统，或处理稀疏文件、内部碎片、间接块......

对于这两种情况，结果都是：

```
$ watch -n 5 'stat --printf "%s\n" file'
$ watch -n 5 'du -B1 file' 
```

这两个结果实际上都可以在一个命令中获得`stat`：

```
$ watch -n 5 'stat --printf "%s %b %B\n" file' 
```

最后两列的乘积是 的结果`du`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-26T19:58:30.107

```
#!/bin/bash  
# Watch File Size and Growth  
# Author: Marcelo Pacheco - marcelo@m2j.com.br  
# Syntax: watchfilesize filetomonitor
nm="$1"  
while true  
do  
  sz=$(stat -c %s "$nm")  
  sleep 1m  
  sz1=$(stat -c %s "$nm")  
  echo Growth: $(((sz1-sz)/1024))KB/min Size: $((sz1/1024/1024))MB  
  sz=$sz1  
done 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-19T09:37:54.197

你可以这样执行：

```
while true; do
  du -s **file_or_directory**
 sleep **time_interval**
done 
```

# java - 通过 Solr 中的分片跨内核返回二进制文件

> ID：10555070
> 
> 赞同：0
> 
> 时间：2012-05-11T16:17:10.060
> 
> 标签：java, solr, binary

尽管在 Solr 中使用分片，但我目前正在一次搜索多个内核。我们将一些内容存储为编码二进制（base64），以便我们可以使用它但不能让它可搜索。每当我们搜索直接存储索引的核心时，二进制文件都会正确返回，我们可以对其进行解码并根据需要使用它。当我们使用分片搜索核心时，二进制文件以以下格式返回：

```
[B:[B@26b8320f 
```

后面总是`[B:[B@`跟着一小串字母和数字。未以二进制形式存储的所有其他内容将正常返回。我相信这是某种地址，但不确定。我无法对此进行解码以使用它所包含的内容。知道如何解码吗？或者让它以其当前格式可用？我们目前正在运行 Solr 3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:31:37.290

这似乎`toString()`是`byte[]`. 它包含类类型`[B:[B`及其哈希码（在本例中为地址）。您需要对其进行解码，可能使用您用于对其进行编码的相同库/包。

# python - python beautifulsoup 缩短代码

> ID：10555071
> 
> 赞同：1
> 
> 时间：2012-05-11T16:17:11.230
> 
> 标签：python, beautifulsoup

有没有更有效的方法来写这个只占用一行？这可行，但我觉得可以以某种方式将其压缩为一行代码

Python

```
del(thearticle['data-book-api'])
del(thearticle['data-book-human'])
del(thearticle['data-book'])
del(thearticle['data-chapter'])
del(thearticle['data-selected-verses'])
del(thearticle['data-verse-modal-enabled'])
del(thearticle['data-version']) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:19:29.140

用于：

```
for key in ['data-book-api', 'data-book-human', ...]:
    del thearticle[key] 
```

顺便提一句。`del`不是函数。

# php - 使用 PHP 从数组中调用类后自动加载类

> ID：10555072
> 
> 赞同：1
> 
> 时间：2012-05-11T16:17:16.333
> 
> 标签：php, oop, class, autoloader

我一直在研究不同的框架以及它们如何实现类的自动加载，但我是 PHP 新手，所以不确定我是否正确解释了它的函数。我试图创建自己的类，仅使用它来自动加载我的所有类，无法访问这些类。这是我的代码的样子：

```
class Autoloader {
    private $map = array();
    private $directories = array();

    public function register() {
        spl_autoload_register(array($this, 'load'));
    }
    public function unregister() {
        spl_autoload_unregister(array($this, 'load'));
    }
    public function map($files) {
        $this->map = array_merge($this->map, $files);
        $this->load($this->map);
    }
    public function directory($folder) {
        $this->directories = array_merge($this->directories, $folder);
    }
    public function load($class) {
        if ($file = $this->find($class)) {
            require $file;
        }
    }
    public function find($file) {
        foreach ($this->directories as $path) {
            if (file_exists($path . $file . '.php')) {
                return $path . $file . '.php';
            }
        }
    }
} 
```

我像这样从我的引导文件中加载类

```
require('classes/autoload.php');

$autoload = new Autoloader();
$autoload->map(array(
    'Config' => 'classes/config.php',
    'Sql' => 'classes/db.php'
));

$autoload->directory(array(
    'classes/'
));

$autoload->register(); 
```

然后我尝试实例化已映射的类之一

```
$sql = new SQL($dbinfo);
$sql->query($query); 
```

我所做的有什么问题，我做对了吗？我基本上希望自动加载类从引导文件映射一组类，并在它们被调用/实例化时包含这些文件，并在它们不再使用时停止包含它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:31:53.050

您的“地图”功能似乎发生了一些奇怪的事情。

当 map 被调用时，它传递一个数组来加载，但是加载函数似乎期望 $class 在 find 函数中使用，就好像它是一个字符串一样！

我认为你需要再看看你如何调用你的函数并跟踪在哪里使用了哪些参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:27:50.290

您的课程似乎被称为`Config`您的文件`config`（注意区分大小写）。

猜测 file_exists 失败`"classes/Config.php"`。

您目前根本没有使用您的地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:30:30.577

我认为问题出在这一行 -`$this->map = array_merge($this->map, $files)`因为你传递`$files`给`$autoload->map()`as `Array`，但你试图获取方法中的`String`值`find()`。

# python - 如何在 WebTest 下模拟 HTTPS 请求？

> ID：10555073
> 
> 赞同：1
> 
> 时间：2012-05-11T16:17:17.143
> 
> 标签：python, https, pyramid, webtest

我有一个 Pyramid 应用程序，可以将某些功能锁定到 HTTPS 连接。

服务器前面是 nginx（通常），我使用 PasteDeploy 来检测 HTTPS 连接。从我的 environment.ini 中：

```
[filter:proxy-prefix]
use = egg:PasteDeploy#prefix 
```

如果连接是 HTTPS，粘贴部署将`request.scheme`变量设置为`'https'`.

我现在正在尝试编写一些集成测试，但我似乎无法弄清楚如何让`TestApp`webtest 提供的 . 像处理 HTTPS 一样处理请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:12:24.587

确保您正在加载包含过滤器的完整 WSGI 管道。如果不是，则中间件不会翻译标题。通常这意味着调用`get_app`“main”而不是“myapp”。另外我建议尝试 WebTest 的`extra_environ`选项，它可能会起作用，因为最终中间件只是设置`environ['wsgi.url_scheme']`.

```
testapp.get('/foo', extra_environ={'wsgi.url_scheme': 'https'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:38:18.630

我第三次尝试梳理文档，并找到了基于 PasteDeploy 的解决方法（也许是正确的解决方案）......

PasteDeploy 寻找 2 个标头来设置 https 连接。我将它们添加到我用来管理 cookie 会话的标题字典中，起初它似乎工作正常。

```
{
   "HTTP_X_FORWARDED_SCHEME" : 'https',
   "HTTP_X_FORWARDED_PROTO" : 'https',
} 
```

PasteDeploy 有一个 if/else 链，所以只需要一个......但提交两个作品。

虽然 PasteDeploy 似乎没有被调用 - 我在应用程序中看到这些标头/环境项，但未设置 https。

# qooxdoo - 如何让 qooxdoo 的“border-invalid”装饰器变厚？

> ID：10555076
> 
> 赞同：1
> 
> 时间：2012-05-11T16:18:02.703
> 
> 标签：qooxdoo

我想让无效表单项的指示更加突出，所以我将 qx/theme/modern/Decoration.js 中的“border-invalid”部分复制到 myapp/theme/Decoration.js 并添加了“outerWidth : 4”：

```
qx.Theme.define("myapp.theme.Decoration",
{
    extend : qx.theme.modern.Decoration,

    decorations :
    {
        "border-invalid" :
        {
            decorator : qx.ui.decoration.Beveled,

            style :
            {
                outerColor : "invalid",
                innerColor : "border-inner-input",
                innerOpacity : 0.5,
                backgroundImage : "decoration/form/input.png",
                backgroundRepeat : "repeat-x",
                backgroundColor : "background-light",
                outerWidth: 4
            }
        }
    }
}); 
```

然而，这并没有奏效。在 Linux/chrome 中它似乎根本没有效果，而在 Windows Vista/IE 9 中，textField 边框在无效时会完全消失！我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:49:11.917

您使用的装饰器是不支持 outerWidth 属性的 Beveled 装饰器。您可以使用支持宽度更改的 Double 装饰器。

# python - 从 Google 云存储中删除文件

> ID：10555080
> 
> 赞同：7
> 
> 时间：2012-05-11T16:18:53.057
> 
> 标签：python, django, google-app-engine, google-cloud-storage

因此，我在 appengine 上启动并运行了一个 django 应用程序，并在用户上传文件时让它创建文件。我遇到的问题是试图弄清楚如何删除它们。我创建它们的代码看起来像。

```
from google.appengine.api import files

file = request.FILES['assets_thumbnail']
filename = '/gs/mybucketname/example.jpg'
writable_file_name = files.gs.create(filename, mime_type='image/jpeg', acl='public-read')
with files.open(writable_file_name, 'a') as f:
    f.write(file.read())
files.finalize(writable_file_name) 
```

这工作正常，但在文档中：

[https://developers.google.com/appengine/docs/python/googlestorage/functions](https://developers.google.com/appengine/docs/python/googlestorage/functions)

没有列出删除方法。但是，如果您在下面的链接中查看 google.appengine.api.files 的实际来源（第 504 行）

[http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/files/file.py](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/files/file.py)

我可以调用一个删除方法，但我终其一生都无法弄清楚它想要的参数。我已经尝试了很多与存储桶名称等不同的组合。它似乎希望它以 /blobstore/ 开头，这与我迄今为止在与 Cloud Storage 交互时所做的任何其他事情都不同。我一直在查看 google.appengine.api.files 编写在其之上的底层 blobstore 类，但仍然无法弄清楚如何删除项目。看起来我可能需要为我上传的项目找到 BlobKeys。我可以使用谷歌托管的基于网络的存储桶管理器以及它们提供的 gsutil 命令行实用程序来很好地删除它们。

有没有人通过部署到应用程序引擎的 python 应用程序从谷歌云存储中成功删除文件？非常感谢任何线索/想法/想法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-07-10T16:36:30.197

我来到这里寻找一种**用 python 清**空谷歌存储目录的方法。是`app-engine`实现的一种解决方法（更适用于这个问题），但在 python 脚本中可能很有用。

```
from google.cloud import storage
bucket_name = 'my-bucket'
directory_name = 'this/is/my/path/'

client = storage.Client()
bucket = client.get_bucket(bucket_name)
# list all objects in the directory
blobs = bucket.list_blobs(prefix=directory_name)
for blob in blobs:
    blob.delete() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-12T22:13:29.547

AppEngine 1.7.0 版支持使用 blobstore API 删除 Google Storage 对象。

```
key = blobstore.create_gs_key('/gs/my_bucket/my_object')
blobstore.delete(key) 
```

或者，您可以使用 REST API 调用 Google Storage 以删除文件。

[https://developers.google.com/storage/docs/reference-methods#deleteobject](https://developers.google.com/storage/docs/reference-methods#deleteobject)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2021-08-05T11:07:06.193

在开始执行此类任务之前，从 GCS 中删除对象非常危险，请阅读有关最佳实践的信息，否则请遵循以下步骤：

```
 from google.cloud import storage 
    # bucket_name = "your-bucket-name"
    # blob_name = "your-object-name"   
    storage_client = storage.Client()

    bucket = storage_client.bucket(bucket_name)
    blob = bucket.blob(blob_name)
    blob.delete()

    print("Blob {} deleted.".format(blob_name)) 
```

# c# - 从用户搜索字符串构建 FREETEXT 或 CONTAINS 的参数

> ID：10555081
> 
> 赞同：1
> 
> 时间：2012-05-11T16:19:00.937
> 
> 标签：c#, sql-server-2008, search, full-text-indexing

是否有经过时间考验的库/算法可以从用户输入搜索框中的文本生成 CONTAINS 或 FREETEXT 的参数？

我希望替换从搜索框中的用户“自由文本”条目生成 SQL 的执行不佳的（我是谁？）代码。

*   清理文本以转义 sql 关键字
*   分解和组织文本以使其对 CONTAINS 有意义？
*   FREETEXT 相同（尽管出于某种原因，我认为我没有使用它）

# objective-c - NSString rangeOfString

> ID：10555084
> 
> 赞同：0
> 
> 时间：2012-05-11T16:19:02.810
> 
> 标签：objective-c, nsstring, indexing

如何找到使用搜索的字符串的实际索引`rangeOfString`？所以我有这个：

`[name rangeOfString: @"Arnold"];`

如何检索字符串位置的索引？我需要开始索引和字符串结束的索引。示例会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:22:08.770

```
NSRange range = [name rangeOfString: @"Arnold"];
NSUInteger start = range.location;
NSUInteger end = start + range.length; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T16:22:26.190

`-[NSString rangeOfString:]`返回一个`NSRange`结构，它有两个项目：`location`告诉你搜索字符串的索引，和`length`告诉你长度。所以：

```
[name rangeOfString:@"Arnold"].location 
```

为您提供字符串`Arnold`出现在的索引`name`。

# css - 为静态 Magento 导航创建“活动”状态

> ID：10555091
> 
> 赞同：1
> 
> 时间：2012-05-11T16:19:32.183
> 
> 标签：css, magento, content-management-system, navigation

我在 header.phtml 文件中创建了一个静态导航菜单。

`<li><a href="/about.html"> about</a></li> <li><a href="/store.html">store</a></li>`ETC..

如果页面处于活动状态，如何将“活动”类添加到列表项？

谢谢，-山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:50:47.233

Magento 的内置方法在导航块类中：

```
isCategoryActive($category) 
```

不过，您应该能够检查它，因为您已将模板更改为静态导航，我猜您没有使用正确的模型来调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T14:24:06.193

旧帖子，但仍然可以帮助某人：

```
$url = $category->getUrl();     
if (strpos(Mage::helper('core/url')->getCurrentUrl(),$url) !== false ) {
    $html .= ' <em>&gt;</em>'; // highlight
} 
```

# css - 如何在框内居中水平菜单（div）

> ID：10555095
> 
> 赞同：-2
> 
> 时间：2012-05-11T16:20:00.043
> 
> 标签：css

您能否看一下以下示例，让我知道如何将 .menuBox div 居中。如您所见，我已经使用了 margin: 0 auto; .menuBox div 中的属性，但我不知道为什么它不起作用？！示例：http: [//jsfiddle.net/Behseini/hBDv9/30/](http://jsfiddle.net/Behseini/hBDv9/30/)

你能告诉我如何强制 ul 和 li 元素在父框中自动居中吗？感谢您的时间和评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:38:45.830

尝试在你的 LI 上使用 display: inline-block，在你的 UL 上使用一些 text-align: center。

jsfiddle：http: [//jsfiddle.net/hBDv9/33/](http://jsfiddle.net/hBDv9/33/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:25:11.623

元素向左浮动，这就是它们不居中的原因。

自动边距工作正常（它将整个红色 div 居中在页面上）。

解决方案可能是拥有`margin: auto`而不是`float: left`

# email - 黑莓应用程序中的电子邮件验证

> ID：10555096
> 
> 赞同：0
> 
> 时间：2012-05-11T16:20:06.210
> 
> 标签：email, blackberry, java-me, email-validation

我曾尝试使用此代码片段进行电子邮件验证，但它似乎不起作用或显示任何验证。

```
 EmailAddressEditField email=new EmailAddressEditField("Email Address: ", "");

        String address =email.getText();
        int at = address.indexOf("@");
        int len = address.length();
        String host = address.substring(at + 1, len);
        int dot = host.lastIndexOf('.');
        len = host.length();

        if (at <= 0 || at > len - 6  && dot < 0 || dot >= len - 3)
            Dialog.alert("Invalid email");
        else
        {
             if (host.indexOf("..") >= 0)
             {
                 Dialog.alert("Invalid email");
             }
             else
             {
                 //correct mail id.. continue your process

             }
        } 
```

在我添加（电子邮件）之后；一旦打开表单，它就会给我一个无效电子邮件的对话框错误。请建议我对文本字段/电子邮件地址编辑字段进行适当的电子邮件验证，一旦在字段中输入错误的输入就会显示验证。谢谢

注意：上面的代码取自 stackoverflow.http://stackoverflow.com/questions/7580257/validation-for-email-in-blackberry 的类似模式的先前查询不要建议任何重定向到相同的答案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:38:51.080

我不确定它在 BlackBerry 上是如何工作的，但对于电子邮件验证，我一直使用正则表达式。[这是一个例子](http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:09:05.220

试试这段代码（类似于您的代码，但稍作修改）：

```
/**
   * Validates an email address. Checks that there is an "@"
   * in the field and that the address ends with a host that
   * has a "." with at least two other characters after it and
   * no ".." in it. More complex logic might do better.
   */
  public boolean isDataValid() {
    String address = email.getText();
    int at = address.indexOf("@");
    int len = address.length();
    if (at <= 0 || at > len - 6) return false;
      String host = address.substring(at + 1, len);
    len = host.length();
    if (host.indexOf("..") >= 0) return false;
    int dot = host.lastIndexOf(".");
    return (dot > 0 && dot <= len - 3);
  } 
```

然后调用此方法，根据结果返回 true 或 false。

# javascript - GMaps JS 地理编码：使用/传递具有异步地理编码功能的变量？

> ID：10555097
> 
> 赞同：4
> 
> 时间：2012-05-11T16:20:09.857
> 
> 标签：javascript, google-maps, asynchronous, geocode

我有一个位置对象的数组列表，我正在使用其中一些来构建一个完整的地址，然后对其进行地理编码。一旦我收到 OK 状态，我就会在地图上放置一个标记。这一切都很好。但是，现在我还想在每个标记上放置一个信息窗口，其中包含我的数组列表 LocationName 中的另一个属性。代码在这里：

```
function placeMarkers(myObjList){
var geocoder = new google.maps.Geocoder();
for(var i=0; i<myObjList.length; i++){
    var fullAddress = myObjList[i].Address + ", " + myObjList[i].City + ", " + myObjList[i].State + ", " + myObjList[i].Zip;
    /* The variable I would like to have access to in the geocode call */
    var locationName = myObjList[i].LocationName;

    geocoder.geocode( { 'address': fullAddress}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            alert(locationName);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                clickable: true
            });
            markers.push(marker);
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}
} 
```

当我获得该状态 OK 时，警报只是查看 locationName 是什么。但是在测试中它总是相同的值。一旦我可以调整它以每次都反映正确的值，然后我将代码排列起来以将信息窗口放在标记上。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:12:57.050

最简单的事情可能是在循环中创建一个本地范围块，以便每次添加委托/匿名函数进行地理编码时locationName 实际上引用*不同的变量。*将 var 放在循环中不会创建变量的新实例，var 声明本质上会移动到封闭范围块的顶部。

```
for(var i=0; i<myObjList.length; i++){
    var fullAddress = myObjList[i].Address + ", " + myObjList[i].City + ", " + myObjList[i].State + ", " + myObjList[i].Zip;
    //begin scope block
    (function(){
        var locationName = myObjList[i].LocationName;
        var yourObject = myObjList[i];
         //etc.
        geocoder.geocode( ...);
    //end scope block
    })();
} 
```

编辑：

或者，如果您使用一些框架/允许您传递匿名函数来为数组中的每个项目执行代码，那么您会自动处理此类范围问题。

# php - 如何从 Freebase 获取别名？

> ID：10555098
> 
> 赞同：1
> 
> 时间：2012-05-11T16:20:23.357
> 
> 标签：php, freebase, mql

我只想从 Freebase 获得一个人可以拥有的不同别名。我的 PHP 查询是：

```
$query = array(
    array(
        'id' => NULL, 
        'alias' => NULL, 
        'name' => "Barack Obama", 
        'type' => "/people/person"
    )
); 
```

结果是：

```
Array ( 
    [code] => /api/status/error 
    [messages] => Array ( 
        [0] => Array ( 
            [code] => /api/status/error/mql/type 
            [info] => Array ( 
                [expected_type] => /people/person 
                [property] => alias 
            ) 
            [message] => Type /people/person does not have property alias 
            [path] => 
            [query] => Array (
                [0] => Array (
                    [alias] => 
                    [error_inside] => . 
                    [id] => 
                    [name] => Barack Obama 
                    [type] => /people/person 
                ) 
            ) 
        ) 
    ) 
    [status] => 200 OK 
    [transaction_id] => cache;cache01.p01.sjc1:8101;2012-05-11T16:17:29Z;0082 
) 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T02:40:00.807

该属性的全名是/common/topic/alias。除非该属性属于您正在使用的类型或者是 /type/object 的属性，否则您需要完全指定它。

您可以将类型更改为/common/topic（因为您似乎根本没有使用/people/person）或将属性更改为/common/topic/alias。

# r - 在雪簇上分发列表

> ID：10555106
> 
> 赞同：2
> 
> 时间：2012-05-11T16:20:51.400
> 
> 标签：r, parallel-processing, lapply

当数据仅包含在一个列表或矩阵中时，雪包 parXapply() 函数可以很好地分配工作，但在这种情况下，我需要在四种不同类型的矩阵上运行一个函数。

例如，这就是我现在所拥有的：

```
res.list = parLapply(cl, mynames, myfun, listA, listB, listC, listD)

myfun = function(name, listA, listB, listC, listD) {
  matrixA = listA[[name]]
  matrixB = listB[[name]]
  matrixC = listC[[name]]
  matrixD = listD[[name]]
} 
```

我遇到的问题是矩阵非常大，我怀疑在完整列表上调用 parLapply() 涉及将所有数据传输到每个集群节点。这可能非常耗时并且会降低集群性能。

如何在调用 myfun() 之前拆分列表并仅将相关矩阵发送到每个节点进行处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T19:48:53.950

clusterMap() 完成这项工作：

```
res.list = clusterMap(cl, myfun, mynames, listA, listB, listC, listD) 
```

不知何故，parMapply() 包装器被排除在包之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T22:37:24.003

我认为 Robert Kubrick 给出的答案最好使用`clusterMap`. 但是，我认为寻找相关问题答案的其他人可能会从另一个选项中受益—— `mcmapply`（这是 的多核版本`mapply`）。例如：

```
mcmapply(rep, 1:4, 4:1) 
```

`mcmapply`使用分叉实现并行`mapply`，这意味着它**不是 Windows 机器上的选项。**此外，如果您在 GUI 中运行 R，可能会出现复杂情况。顺便说一句，还有一个`mclapply`就是多核版本`lapply`。

所以`mcmapply`和`mclapply`是你可能期望被称为`parMapply`和的最简单的版本`parLapply`。

# jquery - jquery 删除所有出现的元素

> ID：10555107
> 
> 赞同：2
> 
> 时间：2012-05-11T16:20:53.873
> 
> 标签：jquery

我有以下内容：

```
<div id="preview_invoice_container">
<table class="page_container">
    <tr>
        <td width="30%" id="position_0" class="box_container">
            <div class="box_logo"></div>
        </td>
        <td width="30%" id="position_1">
            <div class="box_logo"></div>
        </td>
        <td width="30%" id="position_2"></td>
    </tr>
</table> 
```

我想**只**在 div="preview_invoice_container" 中删除所有出现的 class="box_logo"

我尝试了以下方法：`$('#preview_invoice_container').find('.box_logo').removeClass("box_logo");`

但它不起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:22:16.617

`.removeClass()`实际上从所有匹配的元素中删除指定的类，它不会删除元素本身。我想你想要的是：

```
$('#preview_invoice_container').find('.box_logo').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:23:40.890

`.box_logo`从指定 ID中删除所有出现的具有该类的元素：

```
$('#preview_invoice_container .box_logo').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:36:35.537

```
$('div.box_logo', '#preview_invoice_container')​​​​​.remove(); 
```

# javascript - Knockout.js 使每个嵌套对象都成为 Observable

> ID：10555115
> 
> 赞同：35
> 
> 时间：2012-05-11T16:21:17.230
> 
> 标签：javascript, mvvm, knockout.js, knockout-mapping-plugin, knockout-2.0

我使用 Knockout.js 作为 MVVM 库将我的数据绑定到某些页面。我目前正在构建一个库来对 Web 服务进行 REST 调用。我的 RESTful Web 服务返回一个简单的结构：

```
{
    id : 1,
    details: {
        name: "Johnny",
        surname: "Boy"
    }
} 
```

我有一个可观察的主要父母，`myObject`. 当我做

```
myObject(ko.mapping.fromJS(data)) 
```

中的可观察值`myObject`是：

*   `id`
*   `name`
*   `surname`

我怎样才能使`details`（理论上结构中的任何对象都是可观察的）？我需要这种行为，以便我可以在细节上设置一个计算出的 observable，并在任何内部数据发生变化时立即引起注意。

我已经设置了一个基本的递归函数，它应该可以解决问题。当然，`myObject.details`它不会成为可观察的。

```
// Makes every object in the tree an observable.
var makeAllObservables = function () {
    makeChildrenObservables(myObject);
};
var makeChildrenObservables = function (object) {
    // Make the parent an observable if it's not already
    if (!ko.isObservable(object)) {
        if ($.isArray(object))
            object = ko.observableArray(object);
        else
            object = ko.observable(object);
    }
    // Loop through its children
    for (var child in object()) {
        makeChildrenObservables(object()[child]);
    }
}; 
```

我很确定这是关于不正确的引用，但我该如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-11T18:54:37.393

我会使用[淘汰赛映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)。

```
var jsonData = {
    id : 1,
    details: {
        name: "Johnny",
        surname: "Boy"
    }
}

var yourMapping = {
    'details': {
        create: function(options) {
            return Details(options.data);
        }
    }
}

function Details(data) {
    ko.mapping.fromJS(data, {}, this);
}

function YourObjectName() {
    ko.mapping.fromJS(jsonData, yourMapping, this);
} 
```

这将创建您的对象层次结构，其中所有子对象都作为可观察对象。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-12T06:47:47.220

我认为淘汰赛没有内置的方法来观察子元素的变化。如果我理解您的问题，当有人更改名称时，您希望将详细信息更改为要注意的实体。你能举一个具体的例子来说明你将如何使用它吗？你会使用订阅可观察到的细节来执行一些操作吗？

您的代码没有使细节成为可观察的原因是因为 javascript 是按值传递的，因此更改函数中“对象”参数的值不会更改您传递的实际值，只会更改您内部参数的值功能。

**编辑**

如果更改*会*自动传播给父母，我认为这应该使所有孩子都可以观察到，但是您第一次通过的根应该已经是可观察的。

```
// object should already be observable
var makeChildrenObservables = function (object) {
    if(!ko.isObservable(object)) return;

    // Loop through its children
    for (var child in object()) {
        if (!ko.isObservable(object()[child])) {
            object()[child] = ko.observable(object()[child]);
        }
        makeChildrenObservables(object()[child]);
    }
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-10T07:30:54.247

通过使用[Knockout-Plugin](http://knockoutjs.com/documentation/plugins-mapping.html)，我们可以使子元素可观察。我们有很多选项来管理我们希望我们的数据如何变得可观察。

这是一个示例代码：

```
var data = {
    people: [
        {
            id: 1,
            age: 25,
            child : [
                {id : 1,childname : "Alice"},
                {id : 2,childname : "Wonderland"}
            ]
        }, 
        {id: 2, age: 35}
    ],
    Address:[
        {
            AddressID : 1,
            City : "NewYork",
            cities : [
                {
                    cityId : 1,
                    cityName : "NewYork"
                },
                {
                    cityId :2,
                    cityName : "California"
                }
            ]
        },
        {
            AddressID : 2,
            City : "California",
            cities : [
                {
                    cityId :1,
                    cityName : "NewYork"
                },
                {
                    cityId :2,
                    cityName : "California"
                }
            ]
        }
    ],
    isSelected : true,
    dataID : 6
};
var mappingOptions = {
    people: {
        create: function(options) {
            console.log(options);
            return ko.mapping.fromJS(options.data, childmappingOptions);
        }
    },
    Address: {
        create: function(options) {
            console.log(options);
            return ko.mapping.fromJS(options.data, childmappingOptions);
        }
    }
};
var childmappingOptions = {
    child: {
        create: function(options) {
            return ko.mapping.fromJS(options.data, { observe: ["id","childname"]});
        }
    },
    cities :{
        create: function(options) {
            return ko.mapping.fromJS(options.data, { observe: ["cityId","cityName"]});
        }
    }
};
var r = ko.mapping.fromJS(data, mappingOptions); 
```

我附上了一个工作小提琴：http: [//jsfiddle.net/wmqTx/5/](http://jsfiddle.net/wmqTx/5/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-27T03:23:40.867

根据我的经验，ko.mapping.fromJS 不会从对象中生成可观察对象。

假设您有这个 ViewModel 构造函数：

```
var VM = function(payload) {
  ko.mapping.fromJS(payload, {}, this);
} 
```

和这个数据对象：

```
var data1 = {
  name: 'Bob',
  class: {
    name: 'CompSci 101',
    room: 112
  } 
```

}

并且您使用 data1 创建 VM1：

```
var VM1 = new VM(data1); 
```

那么 VM1.class 将不是一个 ko.observable，它是一个普通的 javascript 对象。

如果您随后使用具有空类成员的数据对象创建另一个视图模型，即：

```
var data2 = {
  name: 'Bob',
  class: null
}
var VM2 = new VM(data2); 
```

那么 VM2.class 是一个 ko.observable。

如果你然后执行：

```
ko.mapping(data1, {}, VM2) 
```

那么 VM2.class 仍然是一个 ko.observable。

因此，如果您从对象成员为空的种子数据对象创建 ViewModel，然后使用填充的数据对象填充它们，您将拥有可观察的类成员。

这会导致问题，因为有时对象成员是可观察的，有时则不是。表单绑定将适用于 VM1，但不适用于 VM2。如果 ko.mapping.fromJS 总是让所有东西都变成 ko.observable 这样它是一致的，那就太好了？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-04T13:59:42.297

我将用我的示例解决方案扩展**Paolo del Mundo**的答案（我认为它可能很容易成为目前最好和唯一的解决方案）。

考虑**frapontillo**的原始对象：

```
{
    id : 1,
    details: {
        name: "Johnny",
        surname: "Boy"
    }
} 
```

该`details`属性本身是一个对象，因此不能是可观察的。下面示例中的`User`属性也是如此，它也是一个对象。这两个对象不能是 observables **，但它们的 LEAF 属性可以是**.

**数据树/模型的每个叶子属性都可以是可观察的。**实现这一点的最简单方法是在将映射模型作为参数**传递给映射插件之前正确定义映射模型。**

请参阅下面的示例。

**例子：**

假设我们需要显示一个 html 页面/视图，其中我们在网格上有一个用户列表。在“用户”网格旁边，显示了用于从网格中编辑选定用户的表单。

**第 1 步：定义模型**

```
function UsersEdit() {
    this.User = new User();                    // model for the selected user      
    this.ShowUsersGrid = ko.observable(false); // defines the grid's visibility (false by default)
    this.ShowEditForm = ko.observable(false);  // defines the selected user form's visibility (false by default)      
    this.AllGroups = [];                       // NOT AN OBSERVABLE - when editing a user in the user's form beside the grid a multiselect of all available GROUPS is shown (to place the user in one or multiple groups)
    this.AllRoles = [];                        // NOT AN OBSERVABLE - when editing a user in the user's form beside the grid a multiselect of all available ROLES is shown (to assign the user one or multiple roles)
}

function User() {
    this.Id = ko.observable();
    this.Name = ko.observable();
    this.Surname = ko.observable();
    this.Username = ko.observable();
    this.GroupIds = ko.observableArray(); // the ids of the GROUPS that this user belongs to
    this.RoleIds = ko.observableArray();  // the ids of the ROLES that this user has
} 
```

**第 2 步：映射（获取嵌套的 OBSERVABLES）**

假设这是您的原始 JSON 模型，其中包含您想要映射的数据并获得具有嵌套 observables 的 KO 模型。

```
var model = {
    User: {
        Id: 1,
        Name: "Johnny",            
        Surname = "Boy",
        Username = "JohhnyBoy",
        GroupIds = [1, 3, 4],
        RoleIds = [1, 2, 5]
    }
}; 
```

现在所有这些都已定义，您可以映射：

```
var observableUserEditModel = ko.mapping.fromJS(model, new UsersEdit()); 
```

**你就完成了！:)**

observableUserEditModel 将保存所有的 observable，甚至是嵌套的。现在，为了测试这一点，您唯一需要注意的是将`observableUserEditModel`对象与您的 HTML 绑定。提示：使用绑定并测试在您的 HTML 视图中插入`with`的可观察数据结构：`observableUserEditModel`

```
<pre data-bind="text: ko.toJSON($data, null, 2)"></pre> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-28T03:32:42.073

也许在未来的版本中可能会有一个配置选项导致 ko.mapping.fromJS 总是创建 observables。可以为新项目或更新现有项目的绑定后启用它。

我为防止此问题所做的工作是确保模型种子始终在每个级别都填充 Objects 成员属性。通过这种方式，所有对象属性都映射为 POJO（Plain Old Javascript Objects），因此 ViewModel 不会将它们初始化为 ko.observables。它避免了“有时可观察，有时不可观察”的问题。

最好的问候，迈克

# php - mysqli_query() 期望参数 1 为 mysqli，给定 null

> ID：10555118
> 
> 赞同：2
> 
> 时间：2012-05-11T16:21:19.900
> 
> 标签：php, mysqli

我正在尝试按照 YouTube 教程构建 CMS。我开始对它创建的错误消息感到非常困惑。我收到以下错误

> 警告：mysqli_query() 期望参数 1 为 mysqli，在第 7 行的 /home/a8241081/public_html/index.php 中给出 null

我的代码对吗？应该有一个 mysqli_select 语句吗？

```
<?php
$db_host = "********";
$db_username = "******"; 
$db_pass = "*******"; 
$db_name = "********";
mysqli_connect("$db_host","$db_username","$db_pass", "$db_name") or die ("could not connect to mysql");  
?> 
```

```
<?php
session_start();
require_once "scripts/connect_to_mysql.php";

//Build Main Navigation menu and gather page data here
$sqlCommand = "SELECT id, linklabel FROM pages ORDER BY pageorder ASC";
$query = mysqli_query($myConnection,$sqlCommand);

$menuDisplay='';
while ($row=mysqli_fetch_array($query)){
    $pid=$row["id"];
    $linklabel=$row["linklabel"];

    $menuDisplay .='<a href="index.php?pid=' . $pid . '">' . $linklabel . '</a><br/>';

  }
  mysqli_free_result($query);
  //mysqli_close($myConnection); 
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T16:22:58.513

您应该将结果分配`mysqli_connect()`给一个变量：

```
$myConnection = mysqli_connect($db_host, $db_username, $db_pass, $db_name) or die ("could not connect to mysql"); 
```

在您当前的代码中 $myConnection 未在此调用中定义：

```
$query = mysqli_query($myConnection, $sqlCommand); 
```

# git - 从存储库下载之前的 git 提交

> ID：10555121
> 
> 赞同：0
> 
> 时间：2012-05-11T16:21:43.917
> 
> 标签：git

我只是尝试下载之前的提交，因为 gem 损坏了我的本地文件。我已经尝试了以下答案中概述的建议，但在克隆存储库并签出提交后出现以下错误：“您当前不在分支上，所以我不能在您的配置文件中使用任何分支..merge”。 '

[如何从存储库下载特定的 git 提交？](https://stackoverflow.com/questions/3697707/how-do-i-download-a-specific-git-commit-from-a-repository)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:11:46.470

我没有意识到我可以通过在提交代码部分中单击下载为 zip 按钮来手动下载特定的提交。我错误地认为这个按钮只允许下载最近的提交。

# c# - 如何通过后面的代码访问 DataTemplate 下的按钮？

> ID：10555125
> 
> 赞同：0
> 
> 时间：2012-05-11T16:21:53.143
> 
> 标签：c#, wpf, xaml

我有这个代码，我需要以某种方式访问`Button` ​​并调用它的`Command`.

怎么可能做到？

谢谢！

```
<DataTemplate> 
 <Grid>
   <Button  Command="someexternalcontrol:ContentControl1.RotateCommand" Content="Flip"  Visibility="Visible" Height="5" Width="5" />
 </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:30:09.490

请参阅下面的链接。希望对您有所帮助。 [http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/fb16c929-7318-41de-9ef4-fb62cb1bb45f](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/fb16c929-7318-41de-9ef4-fb62cb1bb45f)

# python - Google App Engine 投影查询可以返回实体键吗？

> ID：10555126
> 
> 赞同：4
> 
> 时间：2012-05-11T16:21:54.380
> 
> 标签：python, google-app-engine, google-cloud-datastore

假设我有：

```
class Like(db.Model):
    user = db.ReferenceProperty(User,collection_name='likes')
    photo = db.ReferenceProperty(Photo,collection_name='likes_received')
    created = db.DateTimeProperty(auto_now_add=True) 
```

是否可以运行仅返回照片键列表的投影查询？

```
photos = db.GqlQuery("SELECT photo FROM Like WHERE created < DATETIME(2013, 1, 1, 0, 0, 0)").fetch(10) 
```

上面的代码产生：

```
BadValueError: Unsupported data type (<class 'models.Photo'>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:46:51.757

听起来您的照片课程尚未导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:12:23.440

对不起，我的第一个答案是错误的。投影查询存在一个真正的问题——ReferenceProperty （尚不）受支持。阿尔弗雷德正在调查这个；由于 1.6.6 预发行版 SDK 今天发布了，而且这已经存在于 1.6.5 SDK 中，我怀疑我们是否会在 1.6.6 中修复这个问题，但 1.6.7 是可能的。

作为变通方法，您可以使用 db.ListProperty(db.Key)，它是一个键列表（您只存储一个键），或者一个值为键的 str() 的 StringProperty。

# dependency-injection - Dynamo IoC 是否与 MonoTouch 和 MonoDroid 一起使用？

> ID：10555127
> 
> 赞同：7
> 
> 时间：2012-05-11T16:21:57.093
> 
> 标签：dependency-injection, xamarin.ios, inversion-of-control, xamarin.android, unity3d

我很好奇，在所有可能的 C# .NET 控制反转解决方案中，是否有人尝试过 Dynamo IoC ( [http://www.dynamoioc.com/](http://www.dynamoioc.com/) ) 以及它是否适用于为 MonoTouch 设计的项目和 MonoDroid？

虽然我没有明确使用 MonoTouch 或 MonoDroid，但我使用的是 Unity 3D ( [http://www.unity3d.com](http://www.unity3d.com) )。我希望如果 IoC 框架（例如 Dynamo）在 MonoTouch 和 MonoDroid 上工作，它很可能也能满足我对 Unity 3D 的需求。

**注意：**几天来，我一直在研究控制容器的反转，以及它们与 MonoTouch、MonoDroid 等的兼容性；这个问题不是来自懒惰，而是我在专门研究 Dynamo IOC 及其与 MonoTouch、MonoDroid 等的兼容性时发现缺乏细节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:27:04.517

我无法回答有关 DynamoIoC 的问题，但我在 MonoTouch 和 MonoDroid 上使用了 TinyIoC 和 OpenNetCF IoC，没有任何问题。

*   [https://github.com/grumpydev/TinyIoC](https://github.com/grumpydev/TinyIoC)
*   [http://ioc.codeplex.com/](http://ioc.codeplex.com/)

在 MvvmCross 中，我目前使用了一组非常有限的 OpenNetCF 功能，并且可以跨 wp7、ios、droid 和 winrt 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:00:13.217

Dynamo 似乎无法通过 MonoTouch 或 Unity 3D 与针对 iOS 平台的 C# 项目一起使用。

由于 StackOverflow 上的其他一些问题和答案，我能够在 Mono 的限制中找到[这一点；](http://docs.xamarin.com/ios/about/limitations)在对 Dynamo IoC 的[代码](https://github.com/MartinF/DynamoIOC)进行了更彻底的审查并更好地理解了`System.Linq.Expressions`命名空间的含义之后，看起来 Dynamo 能够通过使用 Linq 提供的动态表达式来实现其大部分速度。据我了解，代码使用`System.Linq.Expressions`与动态代码生成属于同一类别，因此导致 Dynamo IoC 无法用于 MonoTouch（以及针对 iOS 的代理 Unity 3D 项目）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:12:48.450

~~我刚刚开始了一个 MonoTouch 项目，我正在使用[Munq.IocContainer](http://munq.codeplex.com/)。Munq 是我之前在 ASP.NET MVC 项目和 Windows Mobile 6 应用程序中使用过的小型 DI 框架。尽管它没有大型框架的花里胡哨，但配置起来既快速又容易。~~

请忽略以上。我开始使用 Munq，它在模拟器中运行良好，但当我尝试部署到真正的 iPhone 时却失败了。这是因为 Munq JIT 的一些代码在 iOS 上的 MonoTouch 中无法使用 AFAIK。我回到了[Funq](http://funq.codeplex.com/)，Munq 就是从它派生出来的。Munq 实际上是为在 ASP.NET MVC3 中使用而设计的，因此恢复到 Funq 也意味着不需要删除对 system.web 的引用。

# ipad - iPad 日历中的“添加事件”对话框是什么样的视图？

> ID：10555131
> 
> 赞同：0
> 
> 时间：2012-05-11T16:22:08.327
> 
> 标签：ipad, uitableview, dialog

看起来它可能是一个包含各种单元格的 uitableview，但是他们如何在框架的一侧完成指针（有点像 MS Word 标注）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:43:16.187

它是一个嵌套在 UIPopoverController 中的 UITableView。

UIPopoverController 特定于 iPad。

**OP评论后编辑**

为了回应 OP 的评论，虽然我知道有人*会***指责**[投掷](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)RTFM ... ）。如果您的目标是在应用商店中发布应用，那么您真的应该熟悉这份文档。

# php - 下拉列表用于在提交时不刷新注册表单，如果存在错误（在验证的情况下）

> ID：10555134
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:22:23.910
> 
> 标签：php, phpmyadmin

我有一个名为 reg.php 的表单，它的操作是 reg.php，我希望单击提交时选择的下拉值保持选中状态，到目前为止我所做的如下所示

```
<?php
if( $_POST['registerbtn']){
$selected_value = $_POST['selectID'];
$query = mysql_query("SELECT  linecard_name FROM selection WHERE select_id = '$selected_value'");
$rows=mysql_fetch_assoc($query); 
$linecard_name= $rows['linecard_name'];
$sql = "SELECT select_id, linecard_name FROM selection " . "ORDER BY linecard_name";
$rs = mysql_query($sql);

while($rownw = mysql_fetch_array($rs)){
if(  $rownw['linecard_name'] == $linecard_name)  {
$options = "<option  selected =selected  value=".$rownw['select_id']."> " .$rownw['linecard_name']. " </option> ";
}

}
}

require("./connect.php");
$sql = "SELECT select_id, linecard_name FROM selection ". "ORDER BY linecard_name";
$rs = mysql_query($sql);

while($rownw = mysql_fetch_array($rs)){
 $options .= "<option value = ".$rownw['select_id']." > ".$rownw['linecard_name']. " </option> ";
} 
mysql_close() ;

$form = "<form action='./reg.php'  method='post'> 
<table>
<tr>
<td>  </td>
<td>  <font color='red'> $errormsg </font> </td> 
</tr>

<tr>
<td> Select  Linecard </td> 
<td> <Select name='selectID' >  <option value = '0'>  Select  from here </option> $options  </select></td> 

<tr> 
<td  > <input type='submit' name='registerbtn' value='Register' />   </td> 
</tr> 
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:32:15.770

提交表单后获取发布值并与下拉值进行比较，即

```
<?php
require("./connect.php");
$sql = "SELECT select_id, linecard_name FROM selection ". "ORDER BY linecard_name";
$rs = mysql_query($sql);
$options = "<option value= '0' >  Select  from here </option>";
 $_POST['prefix']=isset($_POST['prefix']) ? $_POST['prefix'] : '';
    while($rownw = mysql_fetch_array($rs)){
    $sel='';
        if($rownw['select_id']==$_POST['prefix']){
          $sel="selected='selected'";
        }
     $options .= "<option value = '".$rownw['select_id']."' ".$sel." > ".$rownw['linecard_name']. " </option> ";
    } 

mysql_close() ;

$form = "<form action='./reg.php'  method='post'> 
<table>
<tr>
<td>  </td>
<td>  <font color='red'> $errormsg </font> </td> 
</tr>

<tr>
<td>  Username  </td>
<td>  <input type='text' name='user' />  </td> 
</tr> 

<tr>
<td> Select  Linecard </td> 
<td> <Select name='selectID'> $options </select> 
```

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:26:54.547

如果您确保表单操作与表单位于同一页面，您将能够访问 POSTed 数据。

# git - 删除git中的多个远程分支

> ID：10555136
> 
> 赞同：141
> 
> 时间：2012-05-11T16:22:37.950
> 
> 标签：git, bash

我有一个团队成员无意中将他的 150 多个本地分支机构推到了我们的中央仓库。值得庆幸的是，它们都有相同的前缀。使用该前缀，是否有一个我可以使用的 git 命令或很酷的小 shell 脚本可以一次删除所有这些？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-05-11T16:36:23.890

使用以下命令删除`PREFIX`远程服务器上所有带前缀的分支。

```
git branch -r | awk -F/ '/\/PREFIX/{print $2}' | xargs -I {} git push origin :{} 
```

您可能需要先进行试运行，看看是否是您要删除的分支：

```
git branch -r | awk -F/ '/\/PREFIX/{print $2}' 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2013-12-09T20:46:47.697

如果您喜欢更简单的方法，例如删除 3 或 4 个分支：

```
git push origin --delete <branch1> <branch2> <branch3> 
```

**重要提示：**仅适用于[Git v1.7.0](https://github.com/gitster/git/blob/master/Documentation/RelNotes/1.7.0.txt)及更高版本。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-12-20T14:12:14.343

感谢**Neevek**提供出色而优雅的解决方案！

`awk`但是由于字段分隔符`/`（`-F`选项），分支名称中的斜杠（我正在使用Git Flow）有一些麻烦

所以我的解决方案是基于**Neevek 的**，但正确地用 . 解析分支名称`/`。在这种情况下，我假设您的遥控器调用了`origin`. 用于删除名称以 开头的远程分支的命令`PATTERN`：

```
git branch -r | awk -Forigin/ '/\/PATTERN/ {print $2}' | xargs -I {} git push origin :{} 
```

并且不要忘记检查您要删除的内容：

```
git branch -r | awk -Forigin/ '/\/PATTERN/ {print $2}' 
```

**有用的提示：**如果您的分支名称（不带`origin/`前缀）存储在文本文件中（每行一个分支名称），只需运行：

```
cat your_file.txt | xargs -I {} git push origin :{} 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2019-02-14T19:33:24.963

这可能是一个重复的答案，但经过测试并完美地为我工作。

1.  强行删除本地分支

> git 分支 -D 分支名称

2.  删除远程分支

> git push origin --delete 分支名称

3.  删除超过 1 个本地分支

> git 分支 -D 分支名称1 分支名称2

4.  删除超过 1 个远程分支

> git push origin --delete 分支名称1 分支名称2

5.  删除带前缀的本地分支。例如，特征/*

> git branch -D $(git branch --list 'feature/*')

git branch -D *backticks* $(git branch --list 'feature/*' *backticks* )

6.  列出带有前缀的远程分支。

> git 分支 -r | grep -Eo '特征/.*'

7.  删除带前缀的远程分支

> git 分支 -r | grep -Eo '特征/.*' | xargs -I {} git push origin :{}

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-06-03T11:51:43.637

与 grep: 相同 `git branch -r | grep -Eo 'PREFIX/.*' | xargs -i git push origin :{}`。

`branch -r`显示`origin/prefix/branchname`。所以需要`prefix/branchname`。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-01-30T15:00:58.320

Neevek 的解决方案很优雅，但它可以更好：提议的解决方案在每个分支调用一次“git push”，这意味着要删除每个分支的额外网络往返。既然您无论如何都在使用 awk，为什么不使用它作为前缀 ':' 然后 xargs 可以只调用一次 'git push' 并一次删除所有分支：

试运行以列出将被删除的分支：

```
git branch -r | awk -F/ '/\/PREFIX/{print ":" $2}' 
```

实际推送删除的最终解决方案：

```
git branch -r | awk -F/ '/\/PREFIX/{print ":" $2}' | xargs git push origin 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-06-09T10:56:53.300

资源[https://coderwall.com/p/eis0ba](https://coderwall.com/p/eis0ba)

```
 1 - List all your remote branches:

    $ git branch -r

    2 - Filter the branches by some regular expression. In this case I'm interested in deleting any branch with the 'feature-' prefix:

    $ git branch -r | awk -F/ '/\/feature-/{print $2}'
    3 - Pipe the last command to git push to delete them:
    # **Edit** - Removed extra colon, which is not needed
    $ git branch -r | awk -F/ '/\/feature-/{print $2}' | xargs -I {} git push origin {}
    4 - Grab a beer.

    5 - Remove any local reference to those branches:

    $ git remote prune origin 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-05-23T20:55:18.373

感谢 Steve 和 Neevek，我找到了一个非常适合我的解决方案，我认为值得分享：

史蒂夫的解决方案对我有用，只需稍作调整。我的遥控器被命名`origin/feature/some-feature-name`了，所以我修剪了你的`awk`：

```
git branch -r | awk -Forigin/ '/\/feature/ {print $2 $3}' | xargs -I {} git push origin :{} 
```

它现在正在做一个很好的小删除流程：

```
To github.com:project/project-name.git
- [deleted]         feature/search-min-chars
To github.com:project/project-name.git
- [deleted]         feature/search-placeholder
To github.com:project/project-name.git
- [deleted]         feature/server-error-message
To github.com:project/project-name.git
- [deleted]         feature/six-point-asterisk 
```

不过，想知道是否有人对更优雅的解决方案有任何想法，可能会输出类似这样的内容（我的 CLI 脚本非常糟糕，所以我需要一段时间才能弄清楚）：

```
git push origin :feature/search-min-chars :feature/search-placeholder :feature/server-error-message :feature/six-point-asterisk 
```

这将通过一个网络请求产生一个很好的单一输出：

```
To github.com:project/project-name.git
- [deleted]         feature/search-min-chars
- [deleted]         feature/search-placeholder
- [deleted]         feature/server-error-message
- [deleted]         feature/six-point-asterisk 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-09-04T11:30:34.850

感谢尼维克。在为我的目的重新配置它之后效果很好：

```
git branch -r | awk -Forigin/ '/\/PATTERN/ {print $2 "/" $3}' | xargs -I {} git push origin :{} 
```

我还需要考虑文件夹结构。我的功能分支位于像 origin/feature/PREFIX-FEATURENUMBER 这样的文件夹结构中。所以我必须从 $2=folder + $3= branchname 建立我的模式。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-06-09T16:32:26.370

每个人都在使用`awk`，不知道为什么。我觉得这更复杂。这是我用来删除遥控器上所有远程分支的方法`fork`：

```
$ git branch -r --list 'fork/*' | sed 's/fork\///' | xargs git push --delete fork 
```

如果您需要将列表过滤到仅远程分支的子集，请在和`grep`之间添加一个。`xargs``sed`

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-03-28T16:33:21.577

我意识到这是针对 git 命令的，但是如果您正在寻找替代解决方案来执行类似或相同的结果：

你可以从这里做（Git Remove Remote Branches）：

![](../Images/7aa96fe18a420b499ace83cdfc659b34.png)

然后选择你想要的分支：

![](../Images/f3c1bf07cfb9ced406f2fbc5ae93c813.png)

确保您有权删除远程分支。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-01-28T17:13:24.097

我无法使用 awk，因为我们使用斜杠结构作为分支名称。

```
git branch -r | grep "origin/users/YOURNAME" | sed -r 's/^.{9}//'| xargs -i  sh -c 'git push origin --delete {}' 
```

这将获取所有远程分支，仅获取单个用户的一个，远程“origin/”字符串并在每个分支上执行删除。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-09-09T09:06:05.890

Github 还有一个不错的 UI 和快速删除分支的机制，如果你更愿意使用 UI

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-01-09T13:31:13.463

试运行：

```
git branch -r --list 'origin/your-branch-name/*' | sed "s/origin\///" | xargs -I {} echo {} 
```

删除远程分支：

```
git branch -r --list 'origin/your-branch-name/*' | sed "s/origin\///" | xargs -I {} git push origin --delete {} 
```

仅删除完全合并的远程分支：

```
git branch -r --merged --list 'origin/your-branch-name/*' | sed "s/origin\///" | xargs -I {} git push origin --delete {} 
```

解释：

`sed "s/origin\///"``origin/`将从分支名称中删除。在没有剥离它的情况下，我得到了：`remote ref does not exist`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-03-13T00:30:38.393

以前的答案帮助我删除了 2018 年的所有发布分支。我在 Windows 10 命令提示符下运行了这个。我已经安装了[clink](https://mridgers.github.io/clink/)，所以类似 Linux 的命令对我有用。

空跑：

```
git branch -a | grep -o "release-.*2018" | xargs -I {} echo {} 
```

如果空运行显示不在远程/源中的分支。运行以下 git prune 命令进行修复并再次检查。

```
git remote prune origin 
```

对上述结果满意后删除：

```
git branch -a | grep -o "release-.*2018" | xargs -I {} git push origin --delete {} 
```

如果你看到：`error: unable to delete 'release-...2018': remote ref does not exist`。然后运行之前的 prune 命令并重试。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-03-27T17:53:20.447

我试图删除所有 origin/release/r1-1* 远程分支，因此以下命令行运行良好。

```
git branch -r | awk -Forigin/ '/\/*r1-1/ {print $2}' |  xargs -I {} git push origin :{} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-08-28T14:41:43.790

如果我们可以找到几个 PREFIX 组合的多个遥控器，这是一个很好的解决方案。如果您有许多（比如说数百个）自动创建的分支，例如这样的模式：`build/XXXX`. 此外，还有`upstream`remote 和fork`origin`以便`branch -r`返回`origin/build/XXXX`等`upstream/build/XXXX`。

您可以使用`cut -f2- -d/`更多命令解决方案：[https ://unix.stackexchange.com/a/354984](https://unix.stackexchange.com/a/354984)

试运行，可以结合安全的正则表达式模式，例如：`33[1-3][0-9]`或`[0-9]{4}`：

```
git branch -r | grep -Eo "upstream/build/33[0-9][0-9]" | cut -f2- -d/ | xargs -I {} echo {} 
```

与上游的实际删除相同：

```
git branch -r | grep -Eo "upstream/build/33[0-9][0-9]" | cut -f2- -d/ | xargs -I {} git push upstream --delete {} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-16T02:25:30.667

我不时使用它来删除远程中不需要的分支：

```
git branch -r --list origin/some/prefix/* | sed 's/origin\///' | xargs git push origin --delete 
```

其中以 some/prefix 开头的 brnaches 是不需要的。

这：

*   处理名称中带有（多个）的分支，`/`并且
*   更新远程分支列表（`git remote update origin --prune`运行后不需要）

例子：

```
git branch -r --list origin/bug/* | sed 's/origin\///' | xargs git push origin --delete 
```

删除所有以 'bug/' 开头的分支

[![在此处输入图像描述](../Images/91ddd3d128b95918501afa8fb630f6b9.png)](https://i.stack.imgur.com/3T6km.png)

# sql-server - SSMS 2012 智能感知行为

> ID：10555138
> 
> 赞同：12
> 
> 时间：2012-05-11T16:22:43.423
> 
> 标签：sql-server, intellisense, ssms

似乎智能感知的行为在 SSMS 2012 中已更改，因此它的行为与 Visual Studio 或 SSMS 2008 不同。

以前我总是按空格键，这会从智能感知中插入当前突出显示的单词。但在 SSMS 2012 中，我必须按 TAB 或按向下箭头，然后按空格

这是我输入查询时 SSMS 2012 的样子

![SSMS2012 智能感知](../Images/985b41070e31f4db1de81640b37bd103.png)

如果我点击空间，则会发生这种情况：

![在此处输入图像描述](../Images/01df5fbf73b5cc7948c0734b0b265e0e.png)

在 SSMS 2008 中，它看起来不同

![在此处输入图像描述](../Images/e87a4117794d61b3a93de4c19bc94684.png)

在视觉工作室

![在此处输入图像描述](../Images/f47434cab7ebe1d4fceb76dd51824c7d.png)

在这两个中，只需点击 SPACE 就会插入这个词。有没有办法自定义或更改 SSMS 2012 中的智能感知行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T04:51:42.317

在我看来，这个问题有点严重。

`CTRL`++`ALT`将`SPACE`改变行为，但仅适用于当前选项卡。如果您打开一个新选项卡，它会返回到新的“默认”行为。所以真正的大问题是没有办法将我想要的行为保存为默认行为。我们必须每次都继续打`CTRL`++ `ALT`！！！`SPACE`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T17:37:36.617

按 CTRL + ALT + SPACE 切换智能感知行为，以便空格将提交条目。

感谢 xQbert，他[为 Visual Studio 找到了这个现有问题](https://stackoverflow.com/questions/5718657/intellisense-window-has-input-field-and-doesnt-commit-on-space)，并回答了它

# css - 支持查询的 CSS 预处理器

> ID：10555143
> 
> 赞同：3
> 
> 时间：2012-05-11T16:22:56.563
> 
> 标签：css, less

我需要以下功能：

```
/* define rule */
div.primary { padding: 12px 0 0 0; }

/* use it */
div.secondary { @(div.primary, padding-top) }
/* or */
div.secondary { padding-top: @(div.primary).padding-top } 
```

看起来lesscss 不支持这样的查询。也许扩展它是最好的方法？那么如何扩展呢？

**更新：**我发现less'作者决定放弃这个功能：[https ://github.com/cloudhead/less.js/issues/6](https://github.com/cloudhead/less.js/issues/6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:20:04.350

你必须更加间接。定义一个变量并使用它，如下所示：

```
@topPad: 12px;

/* use it to define rule */ 
div.primary { padding: @topPad 0 0 0; } 

/* use it again */ 
div.secondary { padding-top: @topPad;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:19:25.973

我没有机会对此进行测试，但您可以使用 LessCSS 内置的 javascript 解析来获得您需要的内容。

```
div.secondary{
   padding-top: `((document.createElement('div')).className='primary').style.paddingTop`;
} 
```

# jquery - google ajax api 刚刚停止在 linux 上工作吗？

> ID：10555146
> 
> 赞同：0
> 
> 时间：2012-05-11T16:23:04.417
> 
> 标签：jquery, ajax, api, certificate

我只是在浏览一个我正在开发的网站，突然间所有的 javascript 都停止了工作。在控制台中有这个（在它引起的未捕获的参考错误中）：

无法加载资源[https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js)

如果我尝试将地址放入 chrome 18.0.1025.151 的 url 栏中，我得到：

该服务器的安全证书尚未生效！

如果我在 Firefox 下尝试它，它会显示文件，但如果文件作为脚本包含在模板中，则会中止加载文件。

这些问题只发生在linux下。在窗口上，一切似乎都很好（尝试过：opera、firefox、chrome）。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:25:35.907

您应该确保您的系统日期/时间在您的 linux 系统中设置正确（即当前日期）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:30:46.783

核心问题是，无论出于何种原因，证书都被认为是无效的。不确定您在哪里工作，但许多企业内容过滤器最终会使证书无效。无论如何，您应该能够通过在 Chrome 中安装证书来纠正问题（基本上，说这没关系，允许它）。有关步骤，请参阅[SuperUser 上的此问题](https://superuser.com/questions/27268/how-do-i-disable-the-warning-chrome-gives-if-a-security-certificate-is-not-trust)。

# c++ - 在 Windows CMD 下编译，而不是在 Eclipse CDT 下编译

> ID：10555147
> 
> 赞同：1
> 
> 时间：2012-05-11T16:23:05.877
> 
> 标签：c++, eclipse, cygwin, eclipse-cdt

我已经配置 Eclipse+CDT+Cygwin 很长时间了。最近我确保通过在路径下的 CMD 中键入 make`workspace\project\debug`整个工具链（make、g++ 等）运行良好。但在 Eclipse 中它总是显示`"Cannot run program "make": ?????????¨?"`.

这是输入 make 后在 CMD 中显示的信息

> C:\Users\llz\workspace\test\Debug>make
> 
> 构建文件：../test.cpp
> 
> 调用：Cygwin C++ 编译器
> 
> g++ -I"C:\cygwin\lib\gcc\i686-pc-cygwin\4.5.3\include\c++" -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"测试。 d" -MT"test.d" -o "test.o" "../test.cpp"
> 
> 完成的建筑：../test.cpp
> 
> 构建目标：test.exe
> 
> 调用：Cygwin C++ 链接器
> 
> g++ -L/usr/lib/gcc/i686-pc-cygwin/4.5.3/ -o "test.exe" ./test.o
> 
> 完成构建目标：test.exe

更重要的是，Eclipse经常无法理解符号*std* 。它显示`'std' is ambiguous '`。所以，像*cout*和*endl*这样的符号无法解析。

# grails - Grails datepicker 根据一天中的时间设置日期的默认值

> ID：10555154
> 
> 赞同：0
> 
> 时间：2012-05-11T16:23:34.503
> 
> 标签：grails

我希望能够根据时间设置日期选择器日期属性。因此，如果是在上午 10:00 之前，请将日期设置为昨天。

如果是在上午 10:00 之后，我可以执行

```
<g:datePicker name="myDate" value="${new Date()}"/> 
```

但是您如何设置日期选择器以显示昨天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:46:04.547

这是您可以执行的操作 - 呈现页面时，您可以在模型中发送一个布尔值，指示时间是否在上午 10:00 之后。如果是，则模型将包含昨天的日期，否则将是今天的日期。或者您可以比较客户端上的时间，如果时间小于 10，请执行此操作

```
<g:datePicker name="myDate" value="${myDomainClass?.myDateField}"
              default="${new Date().plus(-1)}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:40:38.607

您可以在 gsp 的 javascript 部分中执行此操作，例如

```
<g:javascript>
var myDate = new Date();
var startDate =(myDate.getDay()-1) + '/' + myDate.getDate() + '/' +
    myDate.getFullYear();
$("#datePickerName").datpicker("setDate", startDate);
</g:javascript> 
```

# java - 为什么泽西客户端在我的列表应该为空时将对象插入到我的列表中？

> ID：10555157
> 
> 赞同：3
> 
> 时间：2012-05-11T16:23:54.800
> 
> 标签：java, json, rest, jaxb, jersey

我已经使用 Jersey 为 REST 服务编写了一个客户端。出于某种原因，当要解组的 JSON 有一个空数组时，List 对象中只有一个元素。该对象的所有成员都设置为 null，就好像它是使用默认构造函数构造的一样。

订单.java：

```
@XmlRootElement
public class Order {

    private int id;
    private List<Photo> photos;
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public List<Photo> getPhotos() {
        return photos;
    }
} 
```

使用 JSON 服务的客户端代码：

```
Client client = Client.create();
WebResource webResource = client.resource(environment.url);

Order order = webResource.path("Orders")
        .type(MediaType.APPLICATION_FORM_URLENCODED_TYPE)
        .accept(MediaType.APPLICATION_JSON_TYPE)
        .post(Order.class, formData); 
```

日志显示返回的 JSON 是：

```
{"id":704,"photos":[]} 
```

但是，“照片”列表并不像预期的那样为空，而是包含一个照片对象。此对象的所有成员都为 null，就好像它是使用默认构造函数构造的一样。

是什么创建了这个对象，为什么？

* * *

**更多详细信息**：如果我尝试反序列化枚举列表而不是对象列表，则存在类似的问题。在这种情况下，这次我还得到一个大小为 1 的列表，其中只包含“null”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:23:57.547

我从来没有找到一个像样的答案，只是恢复使用[Gson](http://code.google.com/p/google-gson/)进行 JSON 的所有编组和解组。现在它实际上更干净了，因为 GSON 对我的 POJO 施加的限制更少（不需要注释或可变性）。

```
ClientResponse response = webResource.path("Orders")
        .type(MediaType.APPLICATION_FORM_URLENCODED_TYPE)
        .accept(MediaType.APPLICATION_JSON_TYPE)
        .post(ClientResponse.class, formData);

Order order = new Gson().fromJson(response.getEntity(String.class), Order.class); 
```

这不是我最初寻找的解决方案。我只是将它发布为下一个最好的东西（结果更好！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:28:29.703

将此注释添加到您的`Order`课程中：

```
@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL) 
```

这个注解告诉`Jackson`序列化器避免用空值写入对象。

UPD。也许这个注释也应该添加到`Photo`类中。

# spring - 如何在框架内调用 Spring MVC 控制器？

> ID：10555161
> 
> 赞同：2
> 
> 时间：2012-05-11T16:24:24.440
> 
> 标签：spring, spring-mvc, jms, spring-jms

在我的 Spring 项目中，我确实有一个由 spring 管理的 JMS 消息侦听器：

```
<bean id="jmsFactory" class="org.apache.activemq.ActiveMQConnectionFactory" p:brokerURL="tcp://localhost:61616"/>

<bean id="simpleExampleListener" class="my.package.ExampleListener" />

<jms:listener-container container-type="default" connection-factory="jmsFactory" acknowledge="auto" concurrency="1-3">
    <jms:listener destination="TEST.FOO" ref="simpleExampleListener" method="onMessage"/>
</jms:listener-container> 
```

在一个特定的消息上，我需要调用一个 Spring MVC 控制器，它是请求范围的（实际上目标是调用一个服务，它也是请求范围的并被控制器调用）。因此，我不能直接从侦听器中执行此操作，因为 Spring 根据需要管理它们并且它们不受请求范围限制（因为我无法通过`@Autowire`or访问控制器`ApplicationContext`）。一种解决方案可能是通过我的控制器映射的带有 Rest Template 到 URL 的 HTTP 调用。但是，我认为这是一种开销，所以也许还有其他方法可以避免 HTTP 协议开销并在 Spring MVC 框架中调用 Controller？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:03:06.823

您需要质疑为什么将服务类定义为请求范围 - 理想情况下，服务层不应该对 Web 层有任何隐式/显式依赖。如果这不在您的控制范围内，您可以使用以下解决方法。您将需要添加 spring-test.jar 作为依赖项。

```
 class Listener {

    @Autowired
    RequestScopedService requestScopedService;

    void handle() {
        MockHttpServletRequest request = new MockHttpServletRequest();
        RequestContextHolder.setRequestAttributes(new ServletRequestAttributes(request));
        try {
             requestScopedService.callSomeMethod();
        } finally {
             ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).requestCompleted();
             RequestContextHolder.resetRequestAttributes();
        } 
```

如果服务 bean 配置了`<aop:scoped-proxy/>`标签，那么它可以自动装配。否则，您需要获取应用程序上下文（通过实现 ApplicationContextAware）并进行查找。

# ajax - Chrome Ajax 响应中的 UTF-8 编码出错

> ID：10555162
> 
> 赞同：5
> 
> 时间：2012-05-11T16:24:24.363
> 
> 标签：ajax, google-chrome, encoding, safari, webkit

我看到了这个问题。在 Chrome/Safari 中，被设置为包含一些特殊字符（即西班牙语波浪号“i”）的内容的 Ajax 响应无法正确解释。

这个问题在这里用一个例子完美总结：

> 我尝试了 Firefox 和 IE，两者都运行良好。只有 Chrome 没有正确显示网页。这是 URL： http: [//maixner.eu/#bio](http://maixner.eu/#bio) 如您所见，有些字符是错误的。此行：2012 - Muzeum moderního umÄ›ní，奥洛穆茨，捷克共和国 应为：2012 - Muzeum moderního umění，奥洛穆茨，捷克共和国
> 
> 开发细节：1) 有 javascript 文件的 index.html 页面，它通过 AJAX（调用 PHP 文件）加载数据 2) index.html 文件的内容类型设置为 UTF-8 3) 所有文件都是 UTF-8 编码 4 ) javascript 使用带有 responseText 的 XMLHttpRequest 类注入 innerHTML 5) php 文件有 header('Content-type: text/html;charset=UTF-8"');

和这里：

> 有类似（或相同）的问题，但有西班牙语字符。我已将 Apache 设置为使用 UTF-8 我已设置 php header('Content-Type: text/html; charset=utf-8'); 我已经设置了 html 我已经设置了 html 但是 Chorme（只有 Chrome、FF、IE 等可以正常工作）显示：
> 
> [帖子标题] ... Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 ... [表单中的一些随机帖子值] ------WebKitFormBoundary0wi0NAscQiUkF2hJ 内容-处置：表格数据；name="s_name" OxÃgeno 100.4 FM Bogotá <-- 字符错误！应阅读：Oxígeno 100.4 FM 波哥大

[原帖](http://productforums.google.com/forum/#!topic/chrome/LVYMBC6LMm8)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:32:16.880

我有同样的问题。

基本上，就我而言，这是因为浏览器发送的请求标头。

chrome 发送：Content-Type:application/x-www-form-urlencoded，**仅**.
firefox 发送：Content-Type:application/x-www-form-urlencoded；字符集=UTF-8

如果没有 charset=UTF-8，则服务器默认为 ISO，并错误地对其进行解码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T17:53:22.947

在 php 标头函数中，您在字符串关闭之前有一个额外的 "。它应该是

```
<?php
header('Content-type: text/html; charset=utf-8'); 
```

# unix - 用 GREP 计算一个短语的出现次数

> ID：10555163
> 
> 赞同：1
> 
> 时间：2012-05-11T16:24:27.170
> 
> 标签：unix, grep

用 GREP 计算一个短语的出现次数

我有一个包含一堆文件的目录。因此，当我需要查看任何文件是否包含某个短语时，我会使用

`grep 'the phrase' mydir/*`

有什么方法可以计算该短语在这些文件中出现的总次数？

我用过`grep 'the phrase' mydir/* --count`

但这会给出每个单独文件中的出现次数，而不是总数，这不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:28:45.417

这应该这样做：

```
find mydir -print0 | xargs -0 grep 'the phrase' | wc -l 
```

`find mydir -print0`- 查找 mydirectory 中的所有文件并将它们打印为空终止行）

`xargs -0`- 转换空终止行的流并将它们转换为引号分隔的参数，例如“mydir/file 1”“mydir/file 2”......现在可以将这些传递到 grep 的参数列表中。

`wc -l`- 计算行数

空终止行业务与处理其中包含空格的文件有关，否则这些可能看起来像 grep 的多个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:00:30.767

它甚至比前两个响应更简单：

```
grep 'the phrase' mydir/* | wc -l 
```

然后将所有匹配“mydir/*”的文件的 grep 输出发送到 wc -l。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:31:16.497

```
grep 'the phrase' mydir/* --count | awk 'BEGIN { FS=":"; sum=0;} { sum = sum + $2; } END { print sum } ' 
```

# javascript - 如何知道浏览器是否失去焦点

> ID：10555171
> 
> 赞同：7
> 
> 时间：2012-05-11T16:24:59.050
> 
> 标签：javascript, focus, onblur

我已经尝试使用 onblur 来解决我的问题，但只有当焦点从一个文本框变为另一个文本框或类似的东西时。我正在为有几个问题的嵌入式浏览器编写网页。当浏览器被隐藏时，gif 不会被隐藏，并且似乎它保留在缓存中。我的想法是也许有一种方法可以在焦点丢失时调用浏览器来隐藏 gif。在这种情况下，焦点类似于用户单击另一个窗口。这似乎超出了网络技术的范围，但我想我会问。

谢谢！

# mysql - 带有 Where 子句的空结果

> ID：10555174
> 
> 赞同：-3
> 
> 时间：2012-05-11T16:25:06.403
> 
> 标签：mysql, php

我在根据搜索表单显示“访问”表的结果时遇到问题！

这是代码！

```
 <?php

                $date1 = $_POST['day'] . "-" . $_POST['month'] . "-" . $_POST['year'];
                $date2 = $_POST['day1'] . "-" . $_POST['month1'] . "-" . $_POST['year1'];
                $product=$_POST['product'];
                $region=$_POST['region'];
                $speciality=$_POST['speciality'];
                $type=$_POST['visit_type'];

$query="SELECT id, name, seller_1_name, seller_2_name FROM visits Where (speciality ='$speciality') AND (type ='$type') AND (product ='$product') AND (date BETWEEN '$date1' AND '$date2')";
$num=mysql_numrows($result);
$row = mysql_fetch_array($result);

?>

<h3> Showing results where Product is <?php echo $product; ?>, Speciality is <?php echo $speciality ?>, Region is <?php echo $region ?> and Type is <?php echo $type ?>.</h3>
        <table class="auto-style4" style="width: 100%" border="1"><tr>
        <td style="height: 18px">ID</td>
        <td style="height: 18px">Name</td>
        <td style="height: 18px">seller one name</td>
        <td style="height: 18px">seller 2 name</td>   
        </tr>
        <tr>
        <?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"id");
$f2=mysql_result($result,$i,"name");
$f4=mysql_result($result,$i,"seller_1_name");
$f5=mysql_result($result,$i,"seller_2_name");

?>        
        <td><?php echo $f1; ?> </td>
        <td><?php echo $f2; ?> </td>
        <td><?php echo $f4; ?></td>
        <td><?php echo $f5; ?></td>
         </tr>

<?php
$i++;
}
?> 
```

它显示了输入正确变量的标题，但表格为空并带有错误代码：

警告：mysql_numrows()：提供的参数不是第 175 行 /home/ebarea/public_html/.../.../results_submitt.php 中的有效 MySQL 结果资源

警告：mysql_fetch_array()：提供的参数不是第 176 行 /home/ebarea/public_html/.../.../results_submitt.php 中的有效 MySQL 结果资源

怎么了>！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:27:40.940

你从来没有执行过[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)。也许是这样的：

```
$query="SELECT id, name, seller_1_name, seller_2_name FROM visits Where (speciality ='$speciality') AND (type ='$type') AND (product ='$product') AND (date BETWEEN '$date1' AND '$date2')";
$result=mysql_query($query); ## This line is new.
$num=mysql_numrows($result);
$row = mysql_fetch_array($result); 
```

要解决日期问题，您可能需要明确告诉 MySQL 日期的方式。例如：

```
$query="SELECT 
            id, name, seller_1_name, seller_2_name
        FROM visits 
        WHERE
            (speciality ='$speciality') AND
            (type ='$type') AND
            (product ='$product') AND
            (date BETWEEN DATE('$date1') AND DATE('$date2'))"; 
```

然而，正如其他人所指出的那样，您用来填充变量的代码容易受到 SQL 注入攻击，因此确实应该更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:27:45.530

没有

```
$result = mysql_query($query); 
```

前

```
$num=mysql_numrows($result);
$row = mysql_fetch_array($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:28:31.217

您只是忘记之前运行 mysql_query ：

```
$result = mysql_query($query);
$num = mysql_numrows($result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T16:31:08.647

这可以帮助你处理多行，idd，不要忘记 mysql_query(); 解析用户输入也是明智之举，现在您完全容易受到 sql-injection 的攻击。

```
$query = mysql_query($sql, $conn);
$total = mysql_num_rows();
while ( $row = mysql_fetch_object() )
{
   $data[] = $row;
}
foreach( $data as $r )
{
  echo "<td>".$r->id."</td>";
  echo "<td>".$r->name."</td>";
  echo "<td>".$r->seller_1_name."</td>";
  echo "<td>".$r->seller_2_name."</td>";
} 
```

# wordpress - HTML5 文章中的 CSS last-child

> ID：10555175
> 
> 赞同：0
> 
> 时间：2012-05-11T16:25:10.797
> 
> 标签：wordpress, css, css-selectors

在我的博客中，我有一系列 HTML5 文章，如下所示：

```
<div id="blog">
<article class="post">  
    <div class="blogLeft">
        <img src="images/5.jpg" />          
    </div>

    <div class="blogRight">
        <h2>Title</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut laoreet, ligula in commodo vestibulum, erat purus consectetur ipsum, ac sodales quam risus id nibh. Suspendisse iaculis egestas nisi et pharetra. Proin gravida, eros et aliquam tempus, massa diam feugiat urna, vestibulum suscipit purus diam vitae turpis. Cras congue aliquet sollicitudin. Fusce sit amet dui odio. In vitae dictum ante. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        <a class="readMore" href="#">Read More</a>
    </div>
</article>

....this article repeats 7 times
</div> 
```

我想使用 css 选择器，last-child 来选择最后一篇文章并移除底部边框。通常我会使用`article.post:last-child{margin-bottom:0; padding:0; border-bottom:0}`，但由于某种原因，这不是选择最后一篇文章。知道我做错了什么吗？如果我要使用无序列表，它会很好用，但对于文章来说就不行了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T13:12:04.113

我知道这是一个老问题，但我遇到了同样的问题并遇到了这个问题。

*如果您在文章*标签之后有任何内容（即您输入“....这篇文章重复 7 次”），上述内容将不起作用如果在文章标签之后有任何内容（例如页脚），那么最后一篇文章是*不是*其父母的最后一个孩子。

这个选择器对我有用（Windows 8、Chrome）：

```
article:last-of-type{} 
```

请参阅[此 JSFiddle](http://jsfiddle.net/gaco79/52M54/1/)并尝试删除页眉和页脚 HTML 标记以查看 :last-child 和 :last-of-type 之间的区别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:34:00.163

你可以试试这个？

```
article.post div:last-child{}​ 
```

看到[这个](http://jsfiddle.net/wFByK/)小提琴。

e：如果我只是在使用，我也无法让它工作`article.post:last-child`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:45:36.357

我认为这只是个人喜好，但尝试在选择器中定义你的父母：

```
#blog article.post:last-child 
```

见：http: [//jsfiddle.net/wjCTx/](http://jsfiddle.net/wjCTx/)

此外，而不是：

```
<div id="blog"> 
```

我认为使用 Section 标签可能更符合语义。

# tridion - 如何将外部 JavaScript 或 CSS 文件添加到我们的 Tridion 页面？

> ID：10555177
> 
> 赞同：8
> 
> 时间：2012-05-11T16:25:27.340
> 
> 标签：tridion, tridion-2011

我有一个外部*JavaScript*和一个*CSS*文件。我不知道如何将此文件添加到我的页面。我将*DWT TBB*用于*CT 和 PT*。

我正在我的页面 TBB 中编写内部 CSS 以暂时获取输出。但我不知道如何实现 JavaScript。有人可以帮助我吗？

我应该将这些文件作为组件并将它们呈现在我的页面上吗？这是正确的方法吗？如果是，请告诉我要遵循的步骤。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T17:44:27.067

这是一个广泛讨论的话题，我将尝试概述各种可能性：

1.  创建 CSS & JS 作为二进制组件，从 DWT 模板链接到这些
2.  创建 CSS 和 JS 作为二进制组件，作为 DCP 发布到服务器，通过 url 链接到二进制
3.  创建 CSS 和 JS 作为文本组件，放置在页面中，发布到服务器，链接 url 到页面
4.  将 CSS 和 JS 复制到交付服务器（不是 Tridion），通过 url 链接到 css 和 js

选项#1 是最简单的，但有很多缺点。

*   使用您需要的 CSS 和 JS 文件在 Tridion 中创建多媒体组件。
*   记下 URI，然后在 DWT 中使用类似这样的内容：

```
<link href="tcm:27-2762" rel="stylesheet" type="text/css" />
<script src="tcm:27-2763" type="text/javascript"></script> 
```

如果您的模板使用默认完成操作构建块，那么 Tridion 将解析对这些二进制文件的引用并将其与您的页面一起发布。这样做的副作用是这些二进制文件将与使用相同模板的所有页面一起发布。

选项 #2 要求您编写一个动态组件模板，可能带有一些代码来确定文件发布到哪里。这更符合我通常实施的方式，但目前我不建议您这样做。随着您对 Tridion 知识的了解，您会感到很自在，可以自己完成这项工作。使用此选项，您可以将 CSS/JS 文件发布到给定位置，然后在 DWT 中使用引用，而不是使用 TCM URI（如上）将使用文件发布到的 URL。

选项 #3 要求您创建一个“代码组件和模板”，这意味着一个简单的模式，只有一个大文本字段（不是富文本），其中复制/粘贴您的 CSS 或 JS 的内容。然后编写一个简单的组件模板，它将按原样输出内容。类似的东西`@@Fields.Code@@`。最后，您使用一个 DW 模板创建 2 个页面模板（一个扩展名为 .js，另一个扩展名为 .css）：

```
<!-- TemplateBeginRepeat name="Components" -->
@@RenderComponentPresentation()@@
<!-- TemplateEndRepeat --> 
```

最后，同样重要的是（有很多方法可以给这只猫换皮），您可以直接将这些 CSS/JS 文件放在您的网络服务器上，并在您的 DWT 中添加一个链接到这些文件可用的 URL。

希望这能给你一些选择。请记住，包含 CSS/JS 应该在页面模板级别（理想情况下在`<head>`您的页面部分）完成，而不是在您的组件模板中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T16:30:56.883

来自 Building Blocks 的大量文章如何解释这一点

查看这些链接：

1.  [http://blog.building-blocks.com/publishing-code-files-from-sdl-tridion](http://blog.building-blocks.com/publishing-code-files-from-sdl-tridion)
2.  [http://blog.building-blocks.com/css-in-sdl-tridion-part-2-handling-image-references](http://blog.building-blocks.com/css-in-sdl-tridion-part-2-handling-image-references)
3.  [http://blog.building-blocks.com/tridion-tbb-automatically-minify-css-javascript-on-publish](http://blog.building-blocks.com/tridion-tbb-automatically-minify-css-javascript-on-publish)

如果您想让事情变得非常简单（但我不建议这样做，因为它会在您每次发布页面时重新发布您的 CSS 或 JS）。您可以将 CSS 存储为多媒体组件（并记下其 URI）并在 DWT 页面布局中像这样引用它：

```
<link rel="stylesheet" href="tcm:1-2-16" />

    or

<script type="text/javascript" src="tcm:1-2-16"></script> 
```

然后使用 Default Finish Actions 确保二进制文件已发布并且链接已解析。

# css - 将 rgba 转换为 CSS 中的单独属性

> ID：10555183
> 
> 赞同：1
> 
> 时间：2012-05-11T16:26:01.127
> 
> 标签：css, opacity

如何将 rgba 分离为单独的属性 - 颜色和不透明度。

IE。`rgba(255,255,255,0.5);`

将会

```
rgba(255,255,255); 
```

和

```
opacity(0.5); 
```

这在 CSS 中可能吗？

PS。我确实需要它具有与 rgba 相同的效果，即。透明背景，而不是整个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:31:32.360

是的，请确保添加浏览器标签以实现不透明度的跨浏览器兼容性。

`-ms-, -web-kit-, -o-, -moz-`

`.someElement { background-color: rgb(255,255,255); opacity: 0.5; }`

重读后。如果只希望背景透明，则必须使用`rgba(255,255,255,0.5);`来避免给元素的子元素提供不透明度。

# ios - iPad 2/ Retina iPad，应用程序如何识别它在哪个设备上运行？

> ID：10555190
> 
> 赞同：3
> 
> 时间：2012-05-11T16:26:26.000
> 
> 标签：ios

我试图弄清楚应用程序如何知道它在哪个版本的 Idevice 上？我知道如何在通用应用程序中将 iPhone 和 iPad 分开，但设备版本之间的区别是什么，即 ipad2、retina iPad。如果我想告诉应用程序它是在 ipad2 上而不是在视网膜 iPad 上，以不使用游戏的视网膜版本或让用户选择他们想要的版本怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:29:02.287

如果您关心屏幕比例，您可以检查是否`[[UIScreen mainScreen] scale] > 1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:28:35.623

您可以通过设备上的分辨率来解决这个问题，`Retina`设备的分辨率是无设备大小的两倍`Retina`:)

# lazy-loading - dojo dijit _HasDropDown LazyLoading

> ID：10555202
> 
> 赞同：1
> 
> 时间：2012-05-11T16:27:51.330
> 
> 标签：lazy-loading, dojo

我在看文档[`Dynamic & lazy-loading drop-downs`](http://dojotoolkit.org/reference-guide/1.7/dijit/_HasDropDown.html#dynamic-lazy-loading-drop-downs)。它看起来`loadDropDown: function(callback){...}`只是必要的，`isLoaded()`可以是任何任意函数`isPresent()`或其他东西。因为`loadDropDown`是唯一一个叫它的人。

如果`DropDown Widget`is no Loaded some `dropDown.refresh()`is Called，它甚至可以是任意方法。在下拉列表中加载数据并报告为的任何方法`loaded`

并且一旦加载`|`如果已经加载，则调用提供的回调。

我的问题是谁打电话`loadDropDown()`？什么是工作`callback`？因为`dropDown.refresh()`已经加载了下拉列表。

在我的情况下，我有一个`data-dojo-attach-event="onkeyup: suggest"`在我的`templateString`和这个`suggest`函数调用`loadDropDown()`一个空的回调。where`dropDown`是一个永远不会出现的基于`dijit._WidgetBase`派生的小部件。`div, ul, li`但它是被创造出来的。并出现，`console.log()`但随后自动销毁。我不知道为什么。

`href`这个属性从哪里来？属性如何`href`成为下拉列表的强制属性？

# android - 通过从字符串中检索值来分配按钮 ID

> ID：10555205
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:28:26.043
> 
> 标签：android, xml, button, assign

我是这里的新手。我的问题如下：

这是我的**value/strings.xml**文件：

```
<string name="bm">Mengawal</string>
<string name="bi">Managing</string>
 <string name="penan">Penan</string>
<string-array name="menu">
    <item>@string/bm</item>
    <item>@string/bi</item>
    <item>@string/penan</item> 
</string-array> 
```

我的 java 文件中有我的动态分配按钮。现在，我想从上面的 xml 中以编程方式设置按钮 ID。例如，

***按钮文本为 ="Mengawal" 我想将按钮 ID 设置为 ="bm"***

我在这里看到了一个例子，但我无法理解它的实际含义。或者我有可能做到这样吗？ [是否可以在 Android 中访问字符串数组项？](https://stackoverflow.com/questions/6571477/is-it-possible-to-access-a-string-array-item-in-android)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:42:51.573

您不能动态设置资源 ID。当你构建你的应用程序时，它们会被编译到你的 apk 中。

[这里](https://stackoverflow.com/a/4591768/1105376)描述了一种解决方法，您可以在其中读取布局，修改它，将其保存到 SD 卡，为其创建 AssetManager，然后您就可以使用它......但它仍然没有修改资源 id现有资源。

# r - R将矩阵或数据框转换为sparseMatrix

> ID：10555210
> 
> 赞同：38
> 
> 时间：2012-05-11T16:28:41.690
> 
> 标签：r, matrix, sparse-matrix

我有一个常规矩阵（非稀疏），我想将其转换为`sparseMatrix`（使用`Matrix`包）。是否有一个功能可以做到这一点，或者我需要做一堆循环？

前任。

```
> regMat <- matrix(0, nrow=10, ncol=10)
> regMat[3,5] <- round(runif(1),2)*100
> regMat[2,8] <- round(runif(1),2)*100
> regMat[8,4] <- round(runif(1),2)*100
> regMat[1,6] <- round(runif(1),2)*100
> regMat[7,4] <- round(runif(1),2)*100
> regMat 
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    0    0    0    0    0   49    0    0    0     0
 [2,]    0    0    0    0    0    0    0   93    0     0
 [3,]    0    0    0    0   20    0    0    0    0     0
 [4,]    0    0    0    0    0    0    0    0    0     0
 [5,]    0    0    0    0    0    0    0    0    0     0
 [6,]    0    0    0    0    0    0    0    0    0     0
 [7,]    0    0    0    8    0    0    0    0    0     0
 [8,]    0    0    0   14    0    0    0    0    0     0
 [9,]    0    0    0    0    0    0    0    0    0     0
[10,]    0    0    0    0    0    0    0    0    0     0 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-11T16:32:19.477

这里有两个选项：

```
library(Matrix)

A <- as(regMat, "sparseMatrix")       # see also `vignette("Intro2Matrix")`
B <- Matrix(regMat, sparse = TRUE)    # Thanks to Aaron for pointing this out

identical(A, B)
# [1] TRUE
A
# 10 x 10 sparse Matrix of class "dgCMatrix"
#                              
#  [1,] . . .  .  . 45 .  . . .
#  [2,] . . .  .  .  . . 59 . .
#  [3,] . . .  . 95  . .  . . .
#  [4,] . . .  .  .  . .  . . .
#  [5,] . . .  .  .  . .  . . .
#  [6,] . . .  .  .  . .  . . .
#  [7,] . . . 23  .  . .  . . .
#  [8,] . . . 63  .  . .  . . .
#  [9,] . . .  .  .  . .  . . .
# [10,] . . .  .  .  . .  . . . 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-16T18:06:35.183

乔希的回答很好，但这里有更多选择和解释。

*Nit Picky* “我有一个常规矩阵（非稀疏）......”实际上你*确实*有一个稀疏矩阵（大多数为 0 的矩阵）；它只是未压缩的格式。您的目标是将其置于压缩存储格式中。

稀疏矩阵可以压缩成多种存储格式。[压缩稀疏列 (CSC)](https://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_column_(CSC_or_CCS))和[压缩稀疏行 (CSR)](https://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_row_(CSR,_CRS_or_Yale_format))是两种主要格式。`as(regMat, "sparseMatrix")`将您的矩阵转换`dgCMatrix`为压缩稀疏列的类型。这通常是您想要的，但我更喜欢明确说明。

```
library(Matrix)

matCSC <- as(regMat, "dgCMatrix")  # compressed sparse column CSC
matCSC
10 x 10 sparse Matrix of class "dgCMatrix"

 [1,] . . .  .  . 57 .  . . .
 [2,] . . .  .  .  . . 27 . .
 [3,] . . .  . 90  . .  . . .
 [4,] . . .  .  .  . .  . . .
 [5,] . . .  .  .  . .  . . .
 [6,] . . .  .  .  . .  . . .
 [7,] . . . 91  .  . .  . . .
 [8,] . . . 37  .  . .  . . .
 [9,] . . .  .  .  . .  . . .
[10,] . . .  .  .  . .  . . .

matCSR <- as(regMat, "dgRMatrix")  # compressed sparse row CSR
matCSR
10 x 10 sparse Matrix of class "dgRMatrix"

 [1,] . . .  .  . 57 .  . . .
 [2,] . . .  .  .  . . 27 . .
 [3,] . . .  . 90  . .  . . .
 [4,] . . .  .  .  . .  . . .
 [5,] . . .  .  .  . .  . . .
 [6,] . . .  .  .  . .  . . .
 [7,] . . . 91  .  . .  . . .
 [8,] . . . 37  .  . .  . . .
 [9,] . . .  .  .  . .  . . .
[10,] . . .  .  .  . .  . . . 
```

虽然它们在表面上看起来和行为相同，但在内部它们存储数据的方式不同。CSC 检索数据列的速度更快，而 CSR 检索行的速度更快。它们还占用不同数量的空间，具体取决于您的数据结构。

此外，在此示例中，您要将未压缩的稀疏矩阵转换为压缩矩阵。通常您这样做是为了节省内存，因此构建一个未压缩的矩阵只是为了将其转换为压缩形式就无法达到目的。在实践中，从（行、列、值）三元组的表中构造压缩稀疏矩阵更为常见。您可以使用 Matrix 的`sparseMatrix()`功能来做到这一点。

```
# Make data.frame of (row, column, value) triplets
df <- data.frame(
  rowIdx = c(3,2,8,1,7),
  colIdx = c(5,8,4,6,4),
  val = round(runif(n = 5), 2) * 100
)

df
  rowIdx colIdx val
1      3      5  90
2      2      8  27
3      8      4  37
4      1      6  57
5      7      4  91

# Build CSC matrix
matSparse <- sparseMatrix(
  i = df$rowIdx,
  j = df$colIdx, 
  x = df$val, 
  dims = c(10, 10)
)

matSparse
10 x 10 sparse Matrix of class "dgCMatrix"

 [1,] . . .  .  . 57 .  . . .
 [2,] . . .  .  .  . . 27 . .
 [3,] . . .  . 90  . .  . . .
 [4,] . . .  .  .  . .  . . .
 [5,] . . .  .  .  . .  . . .
 [6,] . . .  .  .  . .  . . .
 [7,] . . . 91  .  . .  . . .
 [8,] . . . 37  .  . .  . . .
 [9,] . . .  .  .  . .  . . .
[10,] . . .  .  .  . .  . . . 
```

* * *

**Shameless Plug** -如果你有兴趣，我有[一篇关于这些内容的博客文章以及更多内容。](https://www.gormanalysis.com/blog/sparse-matrix-construction-and-use-in-r/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T04:02:45.837

对于矩阵，已经有人给出了答案。

对于 data.table，有一个包完成了这项工作。

```
library(Matrix)
library(mltools)
x = data.table()
sparseM <- sparsify(x) 
```

# ios - tableView - 有时有错误，有时没有 - 尝试在最后一个单元格中加载标签

> ID：10555214
> 
> 赞同：0
> 
> 时间：2012-05-11T16:28:47.060
> 
> 标签：ios, tableview, cell, nsrangeexception

我正在尝试对我的最后一个单元格实施加载更多方法。经过试验，我终于可以对我的单元实现更多的负载（还没有功能）。但这似乎有点困难，因为我正在从 XML 加载我的内容。

这是我所做的：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

   if([tabelle count]>= 10)
{
    return [tabelle count]+1;
}
else
{
    return [tabelle count];

}
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; }

    if(indexPath.row != [tabelle count] )
{

    cell.textLabel.font = [UIFont fontWithName:@"Arial-Bold" size:14.0];
    cell.detailTextLabel.font = [UIFont fontWithName:@"Arial" size:12.0];
    self.tableView.separatorColor = [UIColor clearColor];

    NSString *TableText = [[NSString alloc] initWithFormat:@"%@", [[tabelle objectAtIndex:indexPath.row] number1]]; 
    NSString *TableText2 = [[NSString alloc] initWithFormat:@"%@", [[tabelle objectAtIndex:indexPath.row] number2]];  

    NSString *cellValue = [NSString stringWithFormat:@"%@", TableText2];
    NSString *cellValue2 = [NSString stringWithFormat:@"%@", TableText];
    cell.textLabel.text = cellValue;
    cell.detailTextLabel.textColor = [UIColor colorWithRed:51.0f/255.0f green:102.0f/255.0f blue:220.0f/255.0f alpha:1.0f];
    cell.detailTextLabel.text = cellValue2;

}
else if(indexPath.row==[tabelle count])

{
    UILabel *loadMore =[[UILabel alloc]initWithFrame: CGRectMake(0,0,320,30)];
    loadMore.textColor = [UIColor blackColor];
    loadMore.backgroundColor = [UIColor clearColor];
    loadMore.font=[UIFont fontWithName:@"Verdana" size:20];
    loadMore.textAlignment=UITextAlignmentCenter;
    loadMore.font=[UIFont boldSystemFontOfSize:20];
    loadMore.text=@"Gimme more!";
    [cell addSubview:loadMore];
}
return cell; 
```

}

加载更多单元格（读取给我更多！）在最后一个单元格上弹出（但不是创建一个新的最后一个单元格，只是在正常的最后一个单元格上，因此会干扰其内容），并且还会在 tableview 上随机弹出。

第一个问题是，它用这种方法咬住了自己，所以我不得不稍微改变它，否则我会得到以下错误：

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
if (indexPath.row == [tabelle count]) {

} else {
    NSString *text = [[self.tabelle objectAtIndex:indexPath.row] number1];

    CGSize textSize = [text sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(self.tableView.frame.size.width - PADDING * 7, 1000.0f)];
    return textSize.height + PADDING * 7;
}
}

  - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
{
    if(indexPath.row==[tabelle count])
    {
        [self.tableView cellForRowAtIndexPath:indexPath];
    }
} 
```

这是我遇到的错误（有时在滚动视图时仍然存在）：

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 11 beyond bounds [0 .. 10]' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:19:24.620

您发布的代码似乎有些奇怪。在第一个片段中，if 语句似乎自行浮动（没有封装方法？）。在 heightForRowAtIndexPath 中，您不会从 if 语句的 then 部分返回值。

[编辑] 这就是我写你迄今为止发布的内容的方式：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // I am not the below make sense but that depends on what you are intending
    // I do have a feeling there is a "off by one" issue here
    if ([tabelle count] >= 10) {
        return [tabelle count]+1;
    }else{
        return [tabelle count];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell;
    if (indexPath.row != [tabelle count] ) {
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell1"];
        if (cell == nil) {
            [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Cell1"]; }

            cell.textLabel.font = [UIFont fontWithName:@"Arial-Bold" size:14.0];
            cell.detailTextLabel.font = [UIFont fontWithName:@"Arial" size:12.0];
            cell.detailTextLabel.textColor = [UIColor colorWithRed:51.0f/255.0f green:102.0f/255.0f blue:220.0f/255.0f alpha:1.0f];
            self.tableView.separatorColor = [UIColor clearColor];
        }
        NSString *TableText = [[NSString alloc] initWithFormat:@"%@", [[tabelle objectAtIndex:indexPath.row] number1]]; 
        NSString *TableText2 = [[NSString alloc] initWithFormat:@"%@", [[tabelle objectAtIndex:indexPath.row] number2]];  

        cell.textLabel.text = TableText;
        cell.detailTextLabel.text = TableText2;
    }else{
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell2"];
        if (cell == nil) {
            [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Cell2"]; }
            UILabel *loadMore = [[UILabel alloc] initWithFrame: CGRectMake(0,0,320,30)];
            loadMore.textColor = [UIColor blackColor];
            loadMore.backgroundColor = [UIColor clearColor];
            loadMore.textAlignment = UITextAlignmentCenter;
            loadMore.font = [UIFont boldSystemFontOfSize:20];
            loadMore.text = @"Gimme more!";
            [cell addSubview:loadMore];
        }
    }
    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == [tabelle count]) {
        return 44.0;
    }else{
        NSString *text = [[self.tabelle objectAtIndex:indexPath.row] number1];
        CGSize textSize = [text sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(self.tableView.frame.size.width - PADDING * 7, 1000.0f)];
        return textSize.height + PADDING * 7;
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    if (indexPath.row == [tabelle count]) {
        // TO-DO: user tapped 'Giimie more'
    }else{
        // TO-DO: user tapped a regular cell
    }
} 
```

# apache - Google Analytics 和 Apache2 日志不一致

> ID：10555215
> 
> 赞同：0
> 
> 时间：2012-05-11T16:28:49.210
> 
> 标签：apache, apache2, google-analytics

我正在使用一个声称他们正在向我的网站发送点击的广告平台。我正在使用附加的 URL`?someString`来清楚地识别由于点击广告而产生的页面请求。我的 Google Analytics（分析）报告显示，该 URL 获得的页面请求次数与广告平台声称他们向我发送点击次数大致相同。但是，我的 apache2 日志没有显示这些页面请求的证据。

需要明确的是，我可以创建一个请求`http://mywebsite.com/landingpage/?someString`并显示在我的日志中。但是，广告网络声称的这些点击不会出现。如果情况只是这样，我会认为它要么是点击中断，要么是来自广告网络的彻头彻尾的谎言。但是，来自广告网络的这些点击也显示在 Google Analytics（分析）中。

关于如何发生这种情况的任何想法？可以在我的 apache2 日志中不记录页面请求的情况下调用 Google Analytics 脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:37:55.217

为了记录解决方案，以防万一有人遇到类似情况，回答我自己的问题。像往常一样，这是一个“doh！” 当我意识到发生了什么的那一刻：

原来我的 apache2 日志已满的分区。结果，日志文件没有包含所有内容。一旦我释放了一些空间（通过删除旧的日志文件），一切都按预期工作。也就是说，我的谷歌分析和网络服务器日志文件同意了。

# php - php中的require和require_once错误

> ID：10555217
> 
> 赞同：1
> 
> 时间：2012-05-11T16:28:58.073
> 
> 标签：php

我收到此错误：

```
Fatal error: Cannot redeclare class Logger in C:\xampp\htdocs\Speakom\API\Logger.php on line 3 
```

将我的所有 require_once 更改为 require 后，此错误仍然存​​在。有没有办法防止这个错误？如果我没有require_once，为什么会发生这种情况？

是否有条件语句可用于查询文件是否已包含然后包含它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:31:34.920

解决该错误的一种方法是始终像这样声明您的类：

```
if(!class_exists('ClassName')) {
    class ClassName {
        // ...
    }
} 
```

当然，这并不能解决您多次导入同一个类的根本问题。检查应用程序的逻辑并确定需要它的位置。

**`require`和之间的区别`require_once`**

```
require 'file1.php';
require 'file1.php';

// versus...
require_once 'file1.php';
require_once 'file1.php'; 
```

在第一组中，`file1.php`将执行两次。在第二个中，它只会执行一次。它真的是那么简单。

如果两者都给您一个错误，那么您尝试包含的文件中可能存在错误。请记住，包含或必需文件中的代码在与包含它的点相同的范围内执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:33:24.150

错误在于 require 和 require_once 之间的差异。以前，require_once 语句尝试加载文件一次，任何后续包含都不会执行任何操作。现在您已经更改了它，您需要跟踪您在所有包含中的哪个位置执行了要求。请记住，如果您想要一次，请包含一次，仅此而已。PHP 将其全部保持在全局范围内，因此只要包含树中的一个文件包含该文件，您就不需要将其包含在每个文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:30:55.623

这是因为您有两个名为`Logger`. 也许您复制粘贴了类文件但忘记更改类名？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T16:29:38.540

您是否检查过您的代码中实际上没有两个 Logger 类？

检查你的代码

`class Logger {}`

# html - Codeigniter如何将<>格式化为html实体

> ID：10555218
> 
> 赞同：0
> 
> 时间：2012-05-11T16:28:59.223
> 
> 标签：html, codeigniter, formatting

我与codeigniter堆叠在一起，从数据库中获取数组值时，我将其发送到解析器，解析器显示包含数组值的页面，所以问题是html没有显示如何做到这一点：

```
< to &lt;
> to &gt; 
```

主要问题是html没有按预期显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:32:15.230

查看[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php) PHP 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:31:48.133

您可以将输出包装在`htmlspecialchars();`函数中，例如：

```
print htmlspecialchars($content); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T18:33:53.340

[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)是使用原生 PHP 的方式，但您也可以使用 Codeigniter 的[`html_escape`](http://ellislab.com/codeigniter/user-guide/general/common_functions.html)函数，如下所示：

```
function html_escape($var)
{
    if (is_array($var))
    {
        return array_map('html_escape', $var);
    }
    else
    {
        return htmlspecialchars($var, ENT_QUOTES, config_item('charset'));
    }
} 
```

您也可以传入数组，它会转义每个项目。这也适用于您的字符集（应该是`UTF-8`）。在 PHP 5.4 中，默认编码是`UTF-8`，但在此之前它是`ISO-8859-1`，这意味着您必须在每次调用时设置所有 3 个参数，`htmlspecialchars`否则如果字符串中包含不在默认编码中的字符，您最终可能会得到一个损坏的字符串：

```
$var = htmlspecialchars($str, ENT_QUOTES, 'UTF-8'); 
```

所以这是一个很好的快捷方式，而且它总是可用的（无需加载帮助程序）。

# mysql - MYSQL 游标的当前位置

> ID：10555219
> 
> 赞同：1
> 
> 时间：2012-05-11T16:28:59.853
> 
> 标签：mysql, cursor

```
*DELIMITER //
create procedure test(OUT l_out INT)
begin
DECLARE done INT DEFAULT FALSE;
declare l_sno INT default 0;
declare a INT default 0;
declare b INT default 0;
declare cur_1 cursor for select sno,interest from temp t  where x_coord between 55 and 60 for update of interest;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
open cur_1; 
read_loop: LOOP
fetch cur_1 into a,b;
if done then
    Leave read_loop;
end if;
set l_sno=l_sno+1;
update temp set interest =1 where CURRENT OF cur_1;
END LOOP;
close cur_1;
set l_out=l_sno;
end //
;* 
```

错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'ofinterest 附近使用的正确语法；DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE; 打开 cur_1;' 在第 7 行
> 
> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'OF cur_1; 附近使用的正确语法；结束循环；关闭 cur_1；设置 l_out=l_sno; 在第 16 行结束

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:37:40.123

在我看来，您来自不同类型的 SQL，例如 DB2 —— 那些工作。

引用自[http://dev.mysql.com/doc/refman/5.0/en/cursor-restrictions.html](http://dev.mysql.com/doc/refman/5.0/en/cursor-restrictions.html)

> 光标是只读的；您不能使用游标来更新行。
> 
> UPDATE WHERE CURRENT OF 和 DELETE WHERE CURRENT OF 未实现，因为不支持可更新游标。

所以我猜你不能那样做，你必须指定一个类似mysql的where子句。

# python - 如何在命令行中使用嵌入的文本文件运行 Python 脚本？

> ID：10555220
> 
> 赞同：0
> 
> 时间：2012-05-11T16:29:00.223
> 
> 标签：python, file

那里。我为这个简单的问题道歉，但我是一个完全的新手，需要一些帮助。我正在尝试运行 Peter Norvig 的 Spelling Corrector (http://norvig.com/spell.py)，但收到以下回复：

```
C:\>spelling.py
Traceback (most recent call last):
  File "C:\Python27\spelling.py", line 11, in <module>
    NWORDS = train(words(file('big.txt').read()))
IOError: [Errno 2] No such file or directory: 'big.txt' 
```

该脚本包含一个嵌入的文本文件 (big.txt)，我已创建该文件并将其保存在与 spelling.py 相同的目录中。为什么找不到 big.txt 文件？其次，一旦脚本正常工作，我将如何将它用于需要更正的单词样本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:31:21.347

脚本的工作目录是当前文件夹，而不是脚本的文件夹。

您可以将以下代码添加到脚本中以更改此设置：

```
import os
os.chdir(os.path.dirname(os.path.abspath(__file__))) 
```

当然，您也可以仅在打开文件而不是更改工作目录时使用此文件夹：

```
path = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'big.txt')
NWORDS = train(words(file(path).read())) 
```

# java - OS 系统更新后 Eclipse 内部 Web 浏览器渲染不正确

> ID：10555225
> 
> 赞同：3
> 
> 时间：2012-05-11T16:29:27.720
> 
> 标签：java, eclipse, macos, browser

我已经成功地使用了 eclipse Indigo 内部浏览器来查看我的网络应用程序。我正在玩 Spring petclinic 应用程序。在最近的 OS X 10.7 更新（从 10.7.3 到 10.7.4）之后，在内部 Web 浏览器中呈现的文本框具有黑色背景，并且只有在突出显示时才能看到文本。

我已经在我的 Mac 上使用 chrome、firefox 和 safari 测试了我的应用程序，它们都可以正确呈现。我能想到的唯一变化是操作系统更新。我检查了我的浏览器、操作系统、eclipse 和 eclipse 插件的更新。

我在 Google 上进行了广泛的搜索，看到很多人普遍抱怨内部浏览器，但最近没有。我还发现有人询问如何更换渲染器，并发现帖子说这不再可能。最有趣的部分是，如果我在我的应用程序启动的同时启动 Aptana Studio，我可以使用 Aptana 中的内部浏览器，我的应用程序看起来很好，就像上周一样。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:53:35.587

OS X 上的 Eclipse 使用标准 Web 工具包 (SWT) 浏览器来呈现 HTML 文档。浏览器基于 webkit。文本和密码输入字段中出现黑色背景的症状是出现在 OS X Lion (OS X 10.7) 下的记录错误：[https](https://bugs.webkit.org/show_bug.cgi?id=86266) ://bugs.webkit.org/show_bug.cgi?id=86266 。您可以跳过一些麻烦来将 SWT 浏览器正在使用的 webkit 版本替换为补丁版本，或者您可以等待更新的 Eclipse。警告：替换 webkit 可能会产生意想不到的副作用。

# objective-c - 将部分和行添加到 UITableView 以重置表

> ID：10555244
> 
> 赞同：0
> 
> 时间：2012-05-11T16:31:04.683
> 
> 标签：objective-c, uitableview, reset

我有一个 UITableView，用户可以构建它并向其添加行。

编辑表格视图时，我想添加一个带有单个红色行的部分来重置表格

我的导航栏已经足够忙于使用 UIBarButtonItems 来切换编辑、添加和分隔视图的不动产。

我想我需要对“cellForRowAtIndexPath”和“NumberofSectionsInTableView”做点什么

关于如何实现这一点的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:20:35.103

就像你写的一样，做起来并不难。

在您的导航栏中捕捉编辑按钮的事件并执行一个方法，您可以在其中设置部分和单元格的数量。添加到部分的数量 + 1（对于您的删除部分）和对于部分中的单元格的单元格数量 +1（因为您需要一个单元格 - 没有单元格的部分什么都不是）。

如果您现在调用 [yourtableview reloadData] numberOfCellsInTableView 并且所有其他委托方法会自动被调用并且您的新单元格+部分是可见的。

要自定义此单元格（红色按钮），请调用 cellForRowAtIndexPath 并为此行声明您的自定义单元格。

祝你好运。

# coldfusion - ColdFusion强制变量不明确

> ID：10555249
> 
> 赞同：0
> 
> 时间：2012-05-11T16:31:21.283
> 
> 标签：coldfusion, type-coercion

```
<cfset academic_year = "2012-13">
<cfoutput># academic_year gt "2009-10" #</cfoutput> 
```

输出编号

但如果我将 Academic_year VARIABLE 更改为“2011-12”，则输出为 YES。

ColdFusion 如何强制改变学年？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:03:42.403

只是一个猜测。也许“2011-12”和“2009-10”被视为只有年月的日期，因此 2011 年 12 月大于 2009 年 10 月。“2012-13”没有被视为日期，因为它不是有效的月。

a `cfdump`on Academic_year 向您展示了什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T20:40:35.363

这可能不是您正在寻找的答案，但我强烈建议，如果您要比较日期，请执行以下两项操作之一：

1.  使用[datecompare()](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_c-d_26.html)函数。
2.  [`parseDateTime()`](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_m-r_11.html#134381)按照 Railo 在其[兼容性指南](http://wiki.getrailo.org/wiki/Language_And_Syntax_Differences)中的建议使用。

它会让你免于这样的头痛，让生活更轻松。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T09:09:32.463

您正在比较两个看起来像“yyyy-mm”日期但实际上是“yyyy-yy”字符串的字符串。您想要进行字符串比较而不是日期比较，因此您需要使用显式字符串比较函数而不是让 ColdFusion 推断您的意图。该`Compare`功能将为您完成此任务。

```
<cfset academic_year = "2012-13">
<cfoutput>#Compare(academic_year, "2009-10")#</cfoutput> 
```

*   有关返回值，请参阅[比较文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f84.html)。
*   请参阅[评估和类型转换问题](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7f46.html)了解为什么这是一个问题。

如果出于某种原因您仍想使用 GT 语法，您可以使用`Val`将您的两年字符串转换为单个年份字符串。

```
<cfoutput># Val("2012-13") gt Val("2009-10") #</cfoutput> 
```

被视为：

```
<cfoutput># "2012" gt "2009" #</cfoutput> 
```

请参阅[Val 文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6e64.html)以了解其工作原理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T15:45:47.307

很明显，第二个只是将双方都投射到日期（不正确，但仍然...... CF 像那样“有帮助”），所以答案是“正确的”。

我对为什么您的第一个表达式导致“否”更感兴趣，因为它不能进行日期比较，因为 LHS 不能解释为日期。所以它应该做一个字符串比较，并且“2012-13”*大于*“2009-10”，所以答案应该是“YES”而不是“NO”。

所以我挖了。检查此代码：

```
<!--- literal.cfm --->
<cfset var1 = "2012-13">
<cfoutput>#var1 GT "2009-10"#</cfoutput><!--- this outputs: NO --->

<!--- variable.cfm --->
<cfset var1 = "2012-13">
<cfset var2 = "2009-10">
<cfoutput>#var1 GT var2#</cfoutput><!--- this outputs: YES---> 
```

请注意，他们都在比较“2012-13”和“2009-10”。

为什么这样做？因为...如果我正确阅读了反编译的代码... CF 将第一个表达式中的文字“2009-10”视为日期（2009 年 10 月 1 日）...然后看到它需要与字符串（“2012-13”不能转换为日期），并且似乎将日期“2009 年 10 月 1 日”转换回字符串（“40087”...... 1899 年 12 月 31 日和 10 月 1 日之间的天数, 2009)。在进行字符串比较时，“2012-13”是“小于”“40087”。

在literal.cfm 的反编译代码中不存在“2009-10”。唯一的参考是“40087.0D”。所以 CF 看着“2009-10”，尽管它显然是一个字符串（围绕它的引号等），并说“是的，那是一个日期”，即使它被硬编码为一个不能用作日期的表达式. 叹。

所以，无论如何，这就是为什么你看到你所看到的。

# android - android单击下载两个文件并在单个进度条中分享他们的进度

> ID：10555252
> 
> 赞同：1
> 
> 时间：2012-05-11T16:31:31.267
> 
> 标签：android, download, progress-bar, share

我从 url 获取一些音频文件及其映射的字幕。现在我想通过单击下载按钮下载该 .mp3 文件和 .srt 文件，并且它们应该共享相同的进度条并显示相同的总进度. 他们应该保存在sdcard的两个不同目录中。我已经实现了带有进度条的单个文件下载。任何帮助，将不胜感激！

谢谢。

更新：所有那些仍在寻找这种类型的人的答案......

```
 String strGetFName;
    String strVipEpub;

    public DownloadFile()
    {
        strGetFName = getFilename();
        strVipEpub = getVipLessonEpubFilename();

    }

    @Override
    protected String doInBackground(String... sUrl) 
    {
        try 
        {
            URL url = new URL(sUrl[0]);
            URL urlePub = new URL(sUrl[1]);
            Log.e("urls"," "+sUrl[0]+","+sUrl[1]);
            URLConnection connection = url.openConnection();
            URLConnection connectionePub = urlePub.openConnection();
            Log.e("connection","done");
            connection.connect();
            connectionePub.connect();
            Log.e("connection","Connected");
            // this will be useful so that you can show a typical 0-100% progress bar
            int fileLength = connection.getContentLength();
            int fileLengthePub = connectionePub.getContentLength();
            Log.e("fileLength"," "+fileLength);
            int bytesFromMP3 = fileLength;
            int bytesFromSubtitle = fileLengthePub;
            int totalBytesToDownload = bytesFromMP3 + bytesFromSubtitle;
            Log.e("bytesFromMP3"," "+bytesFromMP3);
            Log.e("bytesFromSubtitle"," "+bytesFromSubtitle);
            Log.e("total"," "+totalBytesToDownload);

            int bytesDownloadedSoFar = 0;
            while(bytesDownloadedSoFar <= bytesFromSubtitle)
            {
                // download the file
                InputStream input = new BufferedInputStream(urlePub.openStream());

                OutputStream output = new FileOutputStream(strVipEpub);

                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) 
                {
                    total += count;
                    bytesDownloadedSoFar += count;
                    // publishing the progress....
                    publishProgress((int) (bytesDownloadedSoFar * 100 / totalBytesToDownload));
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
            }
            while(bytesDownloadedSoFar <= bytesFromMP3)
            {
                // download the file
                InputStream input = new BufferedInputStream(url.openStream());

                OutputStream output = new FileOutputStream(strGetFName);

                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) 
                {
                    total += count;
                    bytesDownloadedSoFar += count;
                    // publishing the progress....
                    publishProgress((int) (bytesDownloadedSoFar * 100 / totalBytesToDownload));
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
            }
        }
        catch (Exception e) 
        {
            Log.e("File"," Not Downloaded"+e.getMessage());
        }
        return null;
    }
    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) 
    {
        super.onProgressUpdate(progress);
        pbDownloading.setProgress(progress[0]);
        tvProgress.setText(progress[0].toString()+"%");
    }

    @Override
    protected void onPostExecute(String result) 
    {
        super.onPostExecute(result);
        Log.e("is ","Downloading complete");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:08:02.500

**下载多个文件**

如果您有单个下载工作，它应该像复制代码并更改它以下载 .srt 文件一样简单。如果您设置了 AsyncTask，您可以将它们设置为一个接一个地下载。

**结合进度条状态**

为此，我猜在开始下载任一文件之前，您需要获取每个文件的大小。将进度条设置为两种大小的总和，然后在下载时使用下载的字节数更新进度条。当您下载下一个文件时，当前的下载值必须继续。

下面是一些非常*粗略的*伪代码。我不知道您如何下载文件以及如何处理它（希望它类似于 AsyncTask）。以下只是我将应用的逻辑。如果您到目前为止向我们展示您的代码，我们可以更具体。

```
int bytesFromMP3 = GetSizeOfFileAtURL(urlOfMP3File);
int bytesFromSubtitle = GetSizeOfFileAtURL(urlOfSubtitlesFile);
int totalBytesToDownload = bytesFromMP3 + bytesFromSubtitle;

progressBar.setMax(totalBytesToDownload);

int bytesDownloadedSoFar = 0;

//Start some loop to download the MP3 File
while(...) 
{
    //Download some data from the MP3 File
    ...

    //Update the number of bytes downloaded based on the size of the chunk you just downloaded
    bytesDownloadedSoFar += sizeOfChunkJustDownloaded

    //Update the progress bar
    progressBar.setProgress(bytesDownloadedSoFar);
}

//Repeat the loop, but this time download the subtitle info. Don't reset bytesDownloadedSoFar, just continue to add to it. 
while(...) 
```

# php - 使用 PHP 从 SVN 中的源分支中提取最新标签

> ID：10555261
> 
> 赞同：0
> 
> 时间：2012-05-11T16:31:44.203
> 
> 标签：php, svn, version-control, php-5.3

我的应用程序中有两个分支：

*   01
*   02

例如，当我从这些分支标记代码发布时，我会创建一个名为 的标记`01.01`。

有没有办法从颠覆或修订图中提取最新的标签？是否有可能有一个 PHP 脚本并将分支 URL 传递给它，它可以解析修订图或类似的东西来给我最新的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:11:51.983

我做类似的事情。我保持这个结构： \repo-base \trunk \branches \releases

在准备发布时，releases 文件夹唯一能得到它的复制（标签）的 \trunk 。然后我通过首先获取最新的发布标签来自动部署它：

```
svn log -l 1 -v <url to release folder> 
```

然后我使用正则表达式解析出我需要的行，这将始终是最新版本。您可以使用 svn PHP 库，或者只是在您的 php 脚本中执行命令。

# qt - 请给我一个简单的代码：如何在 ComboBox 中添加 CheckBox？

> ID：10555272
> 
> 赞同：-4
> 
> 时间：2012-05-11T16:32:31.417
> 
> 标签：qt, qt4.7

请帮帮我。

我已经尝试了很多，但我做不到。

请给出简单的代码

如何在 ComboBox 中添加 CheckBox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:18:14.297

也许你的意思是这样的（但它不是组合框）

![在此处输入图像描述](../Images/160db4f86d744ac6c53c460877c99d3f.png)

# search - 如何在typo3中正确设置索引搜索结果的目标页面？

> ID：10555273
> 
> 赞同：3
> 
> 时间：2012-05-11T16:32:32.483
> 
> 标签：search, typo3, typoscript

我正在使用typo3 4.7，并试图将索引搜索插件的搜索结果重定向到我网站中的一个页面，并设法偶然发现了常量编辑器，我设法使用它来指导我设置对象。以下是我的根模板（映射到电视模板）中对象的当前排版：

```
# --- SEARCHBOX OBJECT ---------------------------------- 
lib.searchbox < plugin.tx_indexedsearch
lib.searchbox{
#Disable the advanced search link
show.advancedSearchLink = 0
show.rules = 0
show.alwaysShowPageLinks = 1

#pid of root page is 1 and pid of the search result page is 9
search.rootPidList = 1
search.targetPid = 1
view.defaultPid = 9
result_link_target = 9
} 
```

到目前为止，我的尝试没有成功，所有结果都显示在执行搜索的页面中。我还想知道是否可以修改显示的搜索框，以便只显示搜索字段。谢谢你的时间。

编辑：我已经安装并且正在尝试 solr，如果有人对此有任何经验，请随时帮助解决此问题。到目前为止，我对 solr 的两个问题是，虽然搜索确实重定向到正确的页面，（1）搜索框太大，所以我需要能够修改这个框的显示（删除按钮并减少大小）（2）它会发出一些关于搜索规则的消息，但到目前为止什么也没返回。

编辑 2：似乎 solr 是前进的方向。除了结果输出之外，我已经设法完成了我想做的所有事情。在意识到 tomcat 容器绑定到 ipv6 协议接口之前，我失去了几天 (5)。解决这个[问题（对于那些可能偶然发现相同问题的人，请参阅此处以了解如何解决此问题）](https://serverfault.com/questions/390840/how-does-one-get-tomcat-to-bind-to-ipv4-address)意味着我现在可以远程管理 solr 服务器以获取更多信息。这些页面正在被编入索引（不定期在调度程序中指定），但我仍然在结果页面上没有得到任何结果，并且 devlog 只返回关于没有typo3 搜索标记的警告，尽管我的电视模板中充斥着它们。我只能猜测，也许我要用某种类型的标记来标记结果页面，以便在这一点上显示结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T06:09:39.707

```
plugin.tx_indexedsearch {
   search {
    targetPid >
    targetPid = 123
   }
} 
```

参考： http: [//lists.typo3.org/pipermail/typo3-team-core/2010-March/036269.html](http://lists.typo3.org/pipermail/typo3-team-core/2010-March/036269.html)

经验：即使在 TYPO3 版本 6.x 中也能正常工作。

plugin.tx_indexedsearch.search.targetPid 的默认设置是：

```
plugin.tx_indexedsearch {
   search {
    # TSFE:id is always the current page
    targetPid.data = TSFE:id
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:25:11.933

我从来没有使用 indexedsearch 插件作为我所有页面上的搜索框。

通常，我这样做

*   创建一个以 indexed_search 插件作为其内容的页面，这是所有搜索请求都得到答复的地方
*   使用 macina_searchbox 将搜索框显示为模板的一部分

详细说明：

安装 macina_searchbox，并使用这个 Typoscript 进行配置

```
plugin.tx_macinasearchbox_pi1 {
    pidSearchpage = {PID_OF_SEARCH_RESULT_PAGE}
    templateFile = {PATH_TO_TEMPLATE_FILE_FOR_SEARCH_BOX}
} 
```

然后，像这样包含 macina_searchbox

```
lib.searchbox <  plugin.tx_macinasearchbox_pi1 
```

搜索结果页面只需要 indexed_search 插件，您希望在其中显示结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:21:59.260

我只需创建一个搜索框，复制 HTML 代码，调整 action-url 和 HTML 代码并输出它。恕我直言，如果您只需要一个搜索输入字段和一个按钮，则无需通过插件呈现它。但不要忘记隐藏的字段！

# node.js - 基本 node.js createServer 和定时输出无法正常工作

> ID：10555275
> 
> 赞同：0
> 
> 时间：2012-05-11T16:32:49.100
> 
> 标签：node.js

我正在从最新的 Ubuntu 运行 Node.js。我得到以下代码：

```
var http = require('http');

var s = http.createServer(function(req, res){
    res.writeHead(200, {'content-type':'text/html'});
    res.write('Hello ');

    setTimeout(function(){
        res.end('world');
    }, 3000);
});

s.listen(8000); 
```

我通过执行“node server.js”来运行它，这一切都很好。但问题是，由于某种原因，在调用 setTimeout 之前没有输出任何内容——即请求后 3 秒。

我或多或少地遵循了[http://www.youtube.com/watch?v=jo_B4LTHi3I](http://www.youtube.com/watch?v=jo_B4LTHi3I)上的示例（见 17:08），但我无法获得与他一样的“流式传输”结果（他的浏览器首先输出“Hello”，然后在 3 秒后输出“world”）。

我尝试了不同的浏览器，甚至尝试在终端中“卷曲”，就像他在剪辑上所做的那样。但这都是一样的。

默认情况下是否打开了某种输出缓冲，或者它为什么会这样？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:15:59.247

这是因为浏览器仅在收到 res.end() 后才呈现页面，即 3 秒后。在视频通知中显示的实施情况下，该行显示为

```
res.write('Hello \n'); 
```

使用 curl，换行会导致 'hello' 输出到控制台，并在 3 秒的延迟后打印出 'world'。

在这两种情况下，即使用 res.write('Hello') 或 res.write('Hello \n')，浏览器仅在接收到 res.end() 后才会呈现它。此外，如果浏览器没有接收到 res.end()，响应将超时并且不会显示任何内容。

# c# - .txt 表格内的内容

> ID：10555279
> 
> 赞同：0
> 
> 时间：2012-05-11T16:33:10.910
> 
> 标签：c#, asp.net, .net

我正在尝试在表格中显示文本文件的内容。我已经成功读取文本文件，并`.txt`在 div 中显示文件内容，但是当我尝试在表格中显示内容时会引发错误。

难道我做错了什么？

这是我的代码隐藏：

```
protected void btnUpld_Click(object sender, EventArgs e)
{
    Stream theStream = file1.PostedFile.InputStream; 
    //file1 is an asp:FileUpload on .aspx

    using (StreamReader viewer = new 
           StreamReader((Stream)file1.PostedFile.InputStream))
    {
        while (viewer.Peek() > 0)
        {
            string txtskip = viewer.ReadLine();
            Table1.InnerHtml += txtskip; 
            //Table1 is the table i'm wanting to put the results in on my .aspx
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:45:11.450

没有像`Innerhtml`表格控件这样的属性。您需要将文本分配给表格行中的列。

你的代码应该是这样的

```
<asp:Table ID="Table2" runat="server">
    <asp:TableRow ID="TableRow1" runat="server">
        <asp:TableCell ID="TableCell1" runat="server">
        This is Cell 1
        </asp:TableCell>
        <asp:TableCell ID="TableCell2" runat="server">
        This is Cell 2
        </asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

现在在服务器端你可以写

```
TableCell1.Text=somestring;
TableCell2.Text=anotherstring; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:00:46.767

这段代码应该可以帮助你

```
 protected void btnRender_Click(object sender, EventArgs e)
{
    using (StreamReader viewer = new StreamReader((Stream)file1.PostedFile.InputStream))
    {
        TableRow tr;
        TableCell tc;
        while (viewer.Peek() > 0)
        {
            string txtskip = viewer.ReadLine();
            //   Table1.InnerHtml += txtskip; //Table1 is the table i'm wanting to put the results in on my .aspx
            tr = new TableRow();
            tc = new TableCell();
            tr.Cells.Add(tc);
            Table1.Rows.Add(tr);
            tc.Text = txtskip;
        }
    }
} 
```

谢谢，

埃森

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:38:29.503

你可以做这样的事情。

您可以在需要填充数据的位置放置一个[LiteralControl 。](http://msdn.microsoft.com/en-us/library/system.web.ui.literalcontrol.aspx)`td`然后

```
while (viewer.Peek() > 0)
                {
                    string txtskip = viewer.ReadLine();
                    yourLiteral.text += txtskip; 
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T16:56:44.500

你真的不应该使用文本文件来加载这样的内容。您一定会遇到问题，因为迟早会锁定对该文件的访问。`Cache`您可以通过将内容加载到并从那里加载来消除这种风险。

按照上面的建议，您将修改下面的示例以从 检索文本`Cache`，但为了清楚起见并回答您的初始问题，此示例直接从文件中加载它：

```
using (var reader = new StreamReader("bla.txt"))
{
    //use the object initializer to prepare a new literal control
    var litCtrl = new Literal 
    { 
        Mode = LiteralMode.PassThrough, 
        Text = string.Format("<table>{0}</table>", reader.ReadToEnd()))
    }

    //use a literal control to display the table on the page
    pnlContainer.Controls.Add(litCtrl);
} 
```

# perl - `fast_abs_path` 以何种方式“危险，但可能更快”？

> ID：10555284
> 
> 赞同：8
> 
> 时间：2012-05-11T16:33:31.127
> 
> 标签：perl

[Cwd 模块](http://perldoc.perl.org/Cwd.html#abs_path-and-friends)的文档指出这`fast_abs_path`是“更危险但可能更快的版本`abs_path`”。在什么方面是危险的？什么情况下比较快？行为是否因平台而异？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T16:45:00.167

`fast_abs_path`调用`chdir`以让内核解析通向您一次性传递的路径的路径，而不是仔细检查每个组件并逐个构建新路径；问题是权限可能会阻止它`chdir`之后返回原始目录。（一些系统可以使用`open`和`fchdir`解决这个问题，但它并不是在所有运行 Perl 的平台上都可靠地可用。）

这是否会发生取决于您的脚本是否可以在无法直接访问的目录中执行。在类 Unix 系统上，当 setuid 包装器`chdir`进入受限权限区域然后删除 setuid 时，可能会发生这种情况。（历史上，受限权限位于名为 的路径组件上`lock`；各种邮件和 Usenet 新闻子系统都使用它来保护其队列目录。）

# ajax - Ajax 响应：[readyState：0，responseText：“”，状态：0，statusText：“错误”]

> ID：10555285
> 
> 赞同：3
> 
> 时间：2012-05-11T16:33:42.297
> 
> 标签：ajax, jquery

我的 ajax 调用导致错误。这是我可以在错误回调中获得的信息：

```
readyState: 0
responseText: ""
status: 0
statusText: "error" 
```

这意味着什么？我究竟做错了什么？

这是我的ajax调用：

```
var ajaxurl = '../mainDir/server.cfc?param1=123&param2=234&method=updateMyInfo';
$.ajax({
    url: ajaxurl,
    dataType:"text",
    success: function( data ) {
        alert('success');
    },
    error: function( xhr, ajaxOptions, thrownError ) {
        alert('ERROR');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T10:07:11.213

问题是您正在运行页面而没有部署到服务器中。所以ajax请求被视为跨域调用。

# google-apps-script - UserProperties 的速率限制是多少？

> ID：10555288
> 
> 赞同：2
> 
> 时间：2012-05-11T16:33:50.200
> 
> 标签：google-apps-script

我正在解析一个大文本文件，然后调用一个速率受限的 Google API（邮件迁移）（API 文档状态每次调用 1 秒）。

即使我有 Utilities.sleep(1000); 在我的循环中，即使我在循环期间只设置了一次属性，我仍然会收到此错误：

> 短时间内服务调用次数过多：属性 rateMax。在通话之间尝试 Utilities.sleep(1000)。（第 146 行）

除了不经常设置属性之外，我还能做些什么来缓解这种情况？我应该尝试使用 CacheService 暂时存储我的属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:33:22.957

不幸的是，没有公开确切的短期利率限制。您可能想尝试增加睡眠量，以期超过避免错误所需的阈值。最终，我认为您的分析是正确的，您应该考虑减少写入用户属性的频率。我不确定 CacheService 是正确的解决方案，但这取决于您如何使用这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:10:16.323

这实际上取决于您的应用程序的设计。如果您正在解析信息并将其汇总到摘要中，则需要更少的调用。也许作为电子邮件发送不是最佳选择。解析后的数据是否可以转到其他地方，然后将用户引导到那里而不是发送电子邮件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T02:12:58.670

属性 v CacheService

CacheService 产生相同的错误（除非我的代码中有一个我错过的错误）。如果它有助于 CacheService 让您存储更长的字符串，那么这可以减少写入次数。

# python - 通过 Python 发送多个 HTTP 请求的理想方法？

> ID：10555292
> 
> 赞同：10
> 
> 时间：2012-05-11T16:34:16.200
> 
> 标签：python, http, concurrency, httprequest

> **可能重复：**
> [与 urllib2 或其他 http 库的多个（异步）连接？](https://stackoverflow.com/questions/4119680/multiple-asynchronous-connections-with-urllib2-or-other-http-library)

我正在开发一个运行 Python 代码的 Linux Web 服务器，以通过 HTTP 从 3rd 方 API 获取实时数据。数据被放入 MySQL 数据库。我需要对很多 URL 进行大量查询，而且我需要快速完成（更快 = 更好）。目前我使用 urllib3 作为我的 HTTP 库。解决此问题的最佳方法是什么？我应该产生多个线程（如果是，有多少？）并且每个查询都针对不同的 URL？我很想听听您对此的看法-谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-12T00:03:24.067

如果真的*很多，***那么**您可能想要使用异步 io 而不是线程。

[请求](https://github.com/psf/requests)+ [gevent](http://www.gevent.org/) = [grequests](https://github.com/kennethreitz/grequests)

GRequests 允许您使用带有 Gevent 的请求来轻松地发出异步 HTTP 请求。

```
import grequests

urls = [
    'http://www.heroku.com',
    'http://tablib.org',
    'http://httpbin.org',
    'http://python-requests.org',
    'http://kennethreitz.com'
]

rs = (grequests.get(u) for u in urls)
grequests.map(rs) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:42:28.807

您应该使用多线程以及流水线请求。例如搜索->详细信息->保存

您可以使用的线程数不仅仅取决于您的设备。该服务可以处理多少个请求？它允许运行多少个并发请求？甚至您的带宽也可能成为瓶颈。

如果您正在谈论一种抓取 - 该服务可能会在一定的请求限制后阻止您，因此您需要使用代理或多个 IP 绑定。

至于我，在大多数情况下，我可以在笔记本电脑上通过 python 脚本运行 50-300 个并发请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:40:59.860

[听起来像是Twisted](http://twistedmatrix.com/trac/)的优秀应用程序。以下是一些[与网络相关的示例](http://twistedmatrix.com/documents/current/web/examples/)，包括如何[下载网页](http://twistedmatrix.com/documents/current/web/examples/getpage.py)。[这是与 Twisted 的数据库连接](https://stackoverflow.com/questions/1705444/python-twisted-and-database-connections)的相关问题。

请注意，Twisted 不**依赖**线程同时执行多项操作。相反，它采用[协作式多任务](http://en.wikipedia.org/wiki/Computer_multitasking#Cooperative_multitasking.2Ftime-sharing)方法——您的主脚本启动反应器，反应器调用您设置的函数。您的函数必须在反应器继续工作之前将控制权返回给反应器。

# python - 消除“游戏”单例中的耦合和全局状态

> ID：10555293
> 
> 赞同：5
> 
> 时间：2012-05-11T16:34:17.103
> 
> 标签：python, unit-testing, python-3.x, singleton, pygame

我正在开发一款游戏（编写自己的物理引擎），并尝试遵循良好的设计来编写它。最近，我遇到了许多难以发现的错误，为了更容易地捕捉这些错误，我一直在尝试编写单元测试。这很难做到，因为我的很多组件都是紧密耦合的，尤其是与`game`模块。

在我的`game`模块中，我导出了一个单例类实例，它保存了当前的游戏状态、时间、游戏事件等。然而，在阅读[了这篇](https://softwareengineering.stackexchange.com/questions/148108/why-is-global-state-so-evil)文章并研究了如何减少这种耦合之后，我决定尝试重写这个类，使得它不再是单例。

这个想法是使用一个`GameState`类，并在任何地方传递这些对象，以便单元测试可以为测试创建最小的状态。然后大多数函数只是成为游戏状态的函数，并返回一个新的游戏状态。但是，**我遇到了一些设计问题**：

我的实体对象的位置和速度是根据当前时间计算的 python 属性。这意味着我不能简单地传入一个`GameState`对象而不将其重写为函数（导致 icky 语法）。代码示例：

```
class Entity:
    @property
    def position(self):
        """Interpolate the position from the last known position from that time."""
        # Here, the game class instance is referenced directly, creating coupling.
        dt = game.game_time - self._last_valid_time
        # x_f = x_i + v_i*t + 1/2 at^2
        return self._position + self._velocity * dt + .5 * self._acceleration * dt**2 
```

我已经对如何解决这个问题进行了一些研究，并遇到了[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)。本质上，我可以将 GameState 'getter' 对象传递给每个实体的初始化程序。所有 GameState 'getter' 对象都会简单地返回当前状态。示例`GameStateGetter`类：

```
class GameStateGetter:
    _CurrentState = None

    def update(self, new_state):
        GameStateGetter._CurrentState = new_state

    def __getattr__(self, name):
        # GameState object properties are immutable, so this can't cause issues
        return getattr(GameStateGetter._CurrentState, name) 
```

现在我的问题。

*   使用 GameState 'getter' 对象会是个好主意吗？

一个问题是更新当前游戏状态的接口（我已经定义了一个`update`方法，但这似乎是一个奇怪的接口）。此外，鉴于全局变量的问题是不可预测的程序状态，这并不能真正阻止这种情况。

*   是否有另一种方法可以将`game`依赖项“注入”到`Entity`类的`position`属性中？

理想情况下，我想让事情变得简单。一个`GameStateGetter`类听起来很抽象（即使实现很简单）。如果我的属性可以隐式传递当前状态，那就太好了。

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:51:12.867

我不确定第一个问题，但听起来确实有点牵强。

至于第二个问题：单元测试时，可以先导入*游戏*模块，然后猴子补丁全局游戏状态为模拟游戏状态。从现在开始，所有功能/属性都将使用模拟游戏状态。我会在所选单元测试框架的*setUp方法中执行此操作。*

编辑：

*为什么不在您的游戏*模块中创建模块级属性“GameState” 。您可以从任何地方访问它。如果您想要 GameState 的副本，请在其上定义一个*克隆*（或 __deepcopy__）方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T20:57:28.347

将 a`GameStateProvider`注入`Entity`构造函数是一个非常简单的起点，随着逻辑变得更加复杂，它会为您留下一些可以重构的东西。

`Entity`但是，当状态发生变化时，无需使用新状态更新每个状态。如果提供者是一个对象，则默认情况下它是可变的。（为什么你想要一直在改变的东西，游戏状态，是不可变的，无论如何？）你可以改变`current_time`提供者的属性，然后任何时候得到`position`它都会包含正确的值。

该模式如下所示：

```
class Entity(object):

   def __init__(self, game_state_provider):
      self.provider = game_state_provider

   @property
   def position(self):
      # lazily evaluate position as a function of the current time
      if self._last_valid_time == self.provider.current_time:
         return self._position
      self._last_valid_time = self.provider.current_time
      self._position = // insert physics here
      return self._position 
```

# xcode - Xcode git add 文件不在当前目录中

> ID：10555294
> 
> 赞同：2
> 
> 时间：2012-05-11T16:34:32.963
> 
> 标签：xcode, git

我正在使用 Xcode 4 的内置 Git 功能，并将我的提交推送到远程存储库。

但是，代码文件位于一个目录中`(~/users/me/projects/theproject)`，而图像位于另一个单独的目录中。`(~/dropbox/projects/theproject)`. 因此，Xcode 允许我添加、提交和推送放在第一个目录中的文件，但不能放在第二个目录中。如果我右键单击其中一个文件，然后执行 Source Control -> Add，它会变灰。

如何在远程存储库的第二个目录中添加文件？是否可以在 Xcode 中完成？如果不是，那么 git 命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T23:41:45.250

我通过创建一个**连接**或**硬链接**（*见下文*）到我的“位于树外的目录”来执行此操作，以便它看起来安装在我的 .git 文件夹/repo 所在的目录层次结构中。

像这样：

```
\(root of project)            <------ \real_images_folder
 |-- .git                     |   
 |-- htdocs                   |
 |-- images  <------junction--- 
```

* * *

### 有关如何创建联结的详细信息，请在此处查看我的答案： [https ://superuser.com/questions/455853/can-i-delete-the-the-folder-c-programdata-package-cache?answertab=active#tab -最佳](https://superuser.com/questions/455853/can-i-delete-the-the-folder-c-programdata-package-cache?answertab=active#tab-top)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:37:46.817

单个 git 存储库中的文件需要是同一目录树的一部分（也就是说，它们都需要位于包含该`.git`目录的目录下的某个位置）。如果要将图像从 移动`~/dropbox/...`到`~/users/me/projects/theproject`中，则可以将它们添加到存储库中。

或者，您可以在`dropbox`文件夹中创建一个单独的存储库，并将其仅用于图像。

# jquery - 选择器jQuery中的变量

> ID：10555296
> 
> 赞同：1
> 
> 时间：2012-05-11T16:34:43.750
> 
> 标签：jquery, html, variables, select

我似乎无法让变量在 jQuery 的选择器中工作。这是一个非常简单但令人讨厌的错误！有关示例，请参[见此 jsFiddle](http://jsfiddle.net/yYzvL/)：

以下不起作用：

```
var folder_id = "folder";

$("#selects select[name='" + folder_id + "']").append('<span>Hi></span>'); 
```

标记：

```
<div id="selects">
    <select name="folder_id">
        <option>hey</option>
    </select>

</div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:37:10.530

回答您实际提出的问题（但另见下文）：

你告诉它`select`用`name` `folder`, 而不是`folder_id`. 但你`select`有名字`folder_id`。

所以要么更改代码：

```
//                     v----- change here
var folder_id = "folder_id";

$("#selects select[name='" + folder_id + "']").append('<span>Hi></span>'); 
```

[更新了小提琴](http://jsfiddle.net/yYzvL/7/)（但同样，请参见下面的休息）

...***或***更改标记：

```
<div id="selects">
    <select name="folder">
        <option>hey</option>
    </select>

</div>​ 
```

[更新的小提琴](http://jsfiddle.net/yYzvL/3/)

* * *

但请注意，您正在尝试将 a 附加`span`到 a `select`，这是无效标记并且不起作用。[`select`元素](http://www.w3.org/TR/html5/the-select-element.html#the-select-element)不能包含`spans`（只有`option`和`optgroup`元素）。如果您打算将其放在*之后*，请`select`使用[`after`](http://api.jquery.com/after/)：

```
//                                             v--- change here
$("#selects select[name='" + folder_id + "']").after('<span>Hi></span>');
//         also note the `>` you probably don't want here ----^ 
```

[另一个小提琴](http://jsfiddle.net/yYzvL/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:37:18.770

它工作正常，但您的 folder_id 错误，因此不匹配。

固定：http: [//jsfiddle.net/trapper/yYzvL/1/](http://jsfiddle.net/trapper/yYzvL/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:38:23.820

```
var folder_id = "folder_id";

$("#selects select[name='" + folder_id + "']").append('<span>Hi</span>'); 
```

您的 id 设置不正确，并且附加的 span 中的一些 HTML 不正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T16:41:57.960

除了其他人的答案都是正确的之外，您为什么`<span>`要在`<select>`列表中添加一个？

如果你想添加一个新选项，你肯定应该添加这样的东西吗？

```
$("#selects select[name='" + folder_id + "']").append('<option>Hi</option>'); 
```

这将在选择列表中添加一个新选项，请参阅[this](http://jsfiddle.net/trapper/yYzvL/1/) fiddle。

* * *

或者，如果您尝试将文本添加到选项列表中，为什么不这样做呢？

```
$("#selects select[name='" + folder_id + "'] option").append('<span>Hi</span>'); 
```

看到[这个](http://jsfiddle.net/yYzvL/9/)小提琴。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T16:42:10.797

请参阅我更新的（工作）示例：

[http://jsfiddle.net/yYzvL/6/](http://jsfiddle.net/yYzvL/6/)

您的代码有几个问题：

1 - 分配给的值不正确`folder_id`
2 - 不使用`<option>`标签作为您要附加的值

更新后的 JavaScript 是：

```
var folder_id = "folder_id";
$('#selects select[name="' + folder_id + '"]').append($('<option>Hi</option>')); 
```

# android - 如何在 Android 上实现推送通知？

> ID：10555297
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:34:50.310
> 
> 标签：android, notifications, push-notification, push

我有一个支持推送通知的网站，但我必须做什么才能在我的应用程序中接收通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:35:16.340

您可以使用[Google 的 Android Cloud 到 Device Messaging](https://developers.google.com/android/c2dm/)。这也称为 C2DM 功能，使您能够将短消息推送到 Android 设备。这些短消息通常不包含实际数据，而仅包含“有东西可用”的代码。在下一步中，您的应用程序从您的服务器中提取实际数据。

你可以通过在 StackOverflow 上搜索[c2dm找到很多有用的信息。](https://developers.google.com/android/c2dm/)另请参阅[这个非常有用的教程](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:38:26.967

要在您的应用程序中实现推送通知，您需要使用[云到设备消息传递](https://developers.google.com/android/c2dm/)或简短的 C2DM

这里有一些在应用程序中实现 C2DM 的教程：

[Android 云到设备消息传递 (C2DM) - 教程](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

[Android 云到设备消息传递](http://android-developers.blogspot.in/2010/05/android-cloud-to-device-messaging.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T06:39:30.120

对于推送通知您需要一个服务器端，它将管理您的推送订阅并将推送发送到您的用户群。

查看[如何集成 Android 推送通知](https://developers.connectycube.com/android/push-notifications)的简单指南，使用本指南很容易将推送通知集成到您的应用程序中，只需添加几行代码。

# android - 重复通知不重复

> ID：10555298
> 
> 赞同：0
> 
> 时间：2012-05-11T16:35:01.987
> 
> 标签：android

我希望从设置之日起每周进行一次通知。它在被调用时初始化，但不是第二次。（我快速转发电话时钟以查看它是否会调用它，但它没有）。它必须是 7*calendar.getTimeInMillis()。我还能如何将其设置为每周一次？

```
 Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.HOUR_OF_DAY, mHour);
        calendar.set(Calendar.MINUTE, mMinute);
        AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(this, OnBootReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);
        //am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);

        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 7*calendar.getTimeInMillis(), pendingIntent); 
```

广播接收器类：

```
 nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
CharSequence from = "from";
CharSequence message = "message";
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(), 0);
Notification notif = new Notification(icon, tickerText, when);
notif.setLatestEventInfo(context, from, message, contentIntent);
nm.notify(1, notif); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:38:18.987

这`7*calendar.getTimeInMillis()`确实是问题，因为`calendar.getTimeInMillis()`返回 1970 年以来的时间，所以你基本上将重复设置为**~42.5 * 7**年后。您需要设置偏移量，例如**7 (days) * 24 (hours) * 60 (minutes) * 60 (seconds) * 1000 (millies)**。

在我们清除之后 - 我建议您避免使用重复，而是在每次调用的代码完成其工作时设置一个新警报，因为重复机制可能存在一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:39:10.477

你不想要当前日期 * 7 你想要：

> 7 天 = 604 800 000 毫秒

这是[7 天的毫秒数](http://tinyurl.com/82aamd5)

IE

```
 am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 604800000L, pendingIntent); 
```

# cocoa - 在 OpenGL 中用颜色渲染的灰度纹理

> ID：10555299
> 
> 赞同：1
> 
> 时间：2012-05-11T16:35:02.887
> 
> 标签：cocoa, opengl, textures, screensaver

我正在写 Cocoa 屏保，简单的 opengl 场景，没什么特别的。我有一堆带有图案的 rgb gif，除了一个之外，它们都很好用。

我在屏幕保护程序预览中看到的（渲染带有纹理的单个四边形）：

![屏保预览](../Images/31d1e67a056756ab420652b764a6c6f3.png)

纹理本身（相应缩放）：

![在此处输入图像描述](../Images/087697e747d5b4c5f23e47e9ff892e14.png)

一些代码：

文本加载：

```
NSBitmapImageRep *bitmap = [NSBitmapImageRep imageRepWithData:[texImg TIFFRepresentation]];
if(bitmap) {
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, (GLsizei)[texImg size].width, 
                 (GLsizei)[texImg size].height, 0, GL_RGB, GL_UNSIGNED_BYTE,
                 [bitmap bitmapData]) ;

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
} 
```

GL初始化：

```
glEnable(GL_TEXTURE_2D);
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:42:49.910

似乎它可能是一个像素包问题。

你可以在创建纹理之前尝试设置这条线吗？

`glPixelStorei(GL_UNPACK_ALIGNMENT, 1);`

您可以在此处阅读有关此功能的信息：

[http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)

和

[http://www.opengl.org/archives/resources/features/KilgardTechniques/oglpitfall/](http://www.opengl.org/archives/resources/features/KilgardTechniques/oglpitfall/)（阅读第 8 节）

但基本上默认情况下，opengl 期望像素行是 4 字节的倍数，这在每个像素使用 1/2/3 字节时并不总是准确的。

建议在创建纹理后将其设置回 4（默认值）。

# c# - 健谈的NHibernate，加入子类等价物？

> ID：10555303
> 
> 赞同：1
> 
> 时间：2012-05-11T16:35:20.780
> 
> 标签：c#, nhibernate, nhibernate-mapping

我正在将一些旧的基于 XML 的 NHibernate 映射转换为更新的“健谈”方法。（ClassMapping）一切都很顺利，直到我遇到了这个小家伙......

```
...
<joined-subclass name="CheckinRecord" table="Checkins">
<key column="TransactionID"/>
</joined-subclass>
... 
```

我想不出一个等价物，当然 NH 的文档至少可以说是缺乏的。如何在类映射或其他方式中表达我的加入子类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:04:38.540

请参阅[这篇文章](http://notherdev.blogspot.com/2012/01/mapping-by-code-inheritance.html)- 加入子类策略在那里被称为“每类表”。

通常，您的映射类应该继承自`JoinedSubclassMapping<T>`，然后您将拥有 `Key`可用于`<key>`等效的方法。

# uiscrollview - 检索滚动视图中的视图数

> ID：10555304
> 
> 赞同：0
> 
> 时间：2012-05-11T16:35:24.233
> 
> 标签：uiscrollview, instruments, ios-ui-automation

我目前正在尝试在仪器中编写一些自动化测试并且遇到了一些问题，是否可以检索 scrollView 中的视图/窗格的数量，以便我可以说，如果有多个视图，scrollRight()例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:44:20.200

```
int count = scrollview.subviews.count;

if ( count > 1 ) 
{
.....
} 
```

??

EDIT:

You will need to get a reference to the view you are looking for. This will be done by iterating through your windows subview collection. In objective-C it would be something like this:

```
 NSInteger count = 0;
 for ( UIView *view in self.window.subviews )
 {
     if([view isKindOfClass:[UIScrollView class]])
     {
          count = (UIScrollView *) view.subviews.count;
     }

 } 
```

# c# - StreamWriter 在 for 循环的第一次迭代后无法运行

> ID：10555306
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:35:58.943
> 
> 标签：c#, html-parsing, streamwriter

我在使用 StreamWriter 为我拥有的当前项目编写刮板时遇到问题。我编码的循环如下

我已经调试了所有进入循环的变量，并且一切都设置好了。当我根据 url 中的 ID GET 变量传入 url 和要搜索的范围时，它无法写入第二个 sourceCode 字符串

有人可以告诉我我是不是在冲洗什么东西还是这里有其他东西在工作吗？

我为了找到根本原因而绞尽脑汁，但事实证明它非常顽固

```
using System;
using System.IO;
using System.Windows.Forms;

namespace Scraper
{
    public partial class Form1 : Form
    {
        Scraper scraper = new Scraper();
        private StreamWriter sw;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string url = textBox1.Text;
            string[] urlBits = url.Split('.');
            string[] domain = urlBits[2].Split('/');

            string filepath = @"C:\Users\Herbaldinho\Desktop\"+urlBits[1]+"-"+domain[0];
            string parentPath = @"C:\Users\Herbaldinho\Desktop\";
            string newPath = Path.Combine(parentPath, filepath);

            if (File.Exists(filepath))
            {}
            else
            {
                Directory.CreateDirectory(newPath);
            }
            DateTime today = DateTime.Today;
            string curDate = String.Format("{0:ddd-MMM-dd-yyyy}", today);
            string subPath = newPath + "\\" + curDate;
            string newSubPath = Path.Combine(newPath, subPath);

            if (File.Exists(subPath))
            { }
            else
            {
                Directory.CreateDirectory(newSubPath);
            }

            string lower = textBox2.Text;
            int lowerValue;
            int.TryParse(lower, out lowerValue);

            string upper = textBox3.Text;
            int upperValue;
            int.TryParse(upper, out upperValue);

            int i;
            for (i = lowerValue; i < upperValue; i++)
            {
                string filename = newSubPath+"\\Advert-"+i+".html";
                string adPage = url + i;
                bool write = scraper.UrlExists(adPage);
                if (write)
                {
                    string sourceCode = scraper.getSourceCode(adPage);
                    using (sw = new StreamWriter(filename))
                    {
                        sw.Write(sourceCode);
                    }
                }
            }
            MessageBox.Show("Scrape Complete");

        }
    }
}

####This is the Scraper Object
using System.Net;

namespace Scraper
{
class Scraper
{
    WebClient w = new WebClient();
    public bool UrlExists(string url)
    {
        try
        {
            HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
            request.Method = "HEAD";
            HttpWebResponse response = request.GetResponse() as HttpWebResponse;
            return (response.StatusCode == HttpStatusCode.OK);
        }
        catch
        {
            return false;
        }
    }

    public string getSourceCode(string url)
    {
        string s = w.DownloadString(url);
        return s;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:38:23.170

今天早上找到了问题的答案对于有类似问题的其他人，UrlExists 方法中的 try catch 逻辑需要关闭响应（response.Close（））据我所知它自动关闭，但事实并非如此希望这有帮助

非常感谢大家的回复帮助我解决这个问题

# php - 使用 $this 回调函数

> ID：10555307
> 
> 赞同：2
> 
> 时间：2012-05-11T16:36:00.300
> 
> 标签：php

我正在尝试使用实例方法作为 PHP 5.2.1 的回调。我知道从 PHP 5.4 开始，您可以`$this`在闭包内使用，而在 PHP 5.3 中，您可以重命名并将`$this`其`$self`传递给闭包。但是，这些方法都不够用，因为我需要它来为 PHP 5.2.1 工作。两行评论是我最后一次尝试。这导致`Fatal error: Call to a member function hello() on a non-object`- 无论如何我可以回调 PHP 5.2.1 中的实例方法吗？

```
<?php

class Test {

    public function __construct() { 
        $self = &$this;

        $cb = function() use ( $self ) {
            $self->hello();
        };
        call_user_func( $cb );

        // $cb = create_function( '$self', '$self->hello();' );
        // call_user_func( $cb );

    }

    public function hello() {
        echo "Hello, World!\n";
    }
}

$t = new Test(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:42:03.800

传递一个数组以包含对象：

```
call_user_func( array( $this, 'hello' ) ); 
```

[http://us3.php.net/manual/en/language.types.callable.php](http://us3.php.net/manual/en/language.types.callable.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:41:09.897

```
$cb = create_function('$self', '$self->hello();'); 
```

这只是制作一个可以接受参数的函数`$self`。与此相同：

```
function test($self){
    $self->hello();
} 
```

您可以在调用函数时尝试将`$self`（或）传递给函数：`$this`

```
call_user_func($cb, $this); 
```

您也可以尝试制作`$self`一个全局变量，以便制作的匿名函数`create_function`可以读取它。

```
$GLOBALS['mySelf'] = $self;
$cb = create_function('', 'global $mySelf;  $mySelf->hello();');
call_user_func($cb);
// You may want to unset this when done
unset($GLOBALS['mySelf']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:44:17.247

简单性怎么**样**？

```
class Test {

    public function __construct() { 
        $this -> funcName($this);
    }

    public function funcName($obj) {
            $obj->hello();
    }

    public function hello() {
        echo "Hello, World!\n";
    }
} 
```

* * *

**更新：**刚刚测试了代码。他们使用它工作得很好。

```
call_user_func_array(array($self, "hello"), array()); 
```

# c - c算术的奇怪行为

> ID：10555308
> 
> 赞同：2
> 
> 时间：2012-05-11T16:36:02.730
> 
> 标签：c, double, long-integer

我有这个代码

```
#include <stdio.h>
#include <math.h>

static double const x = 665857;
static double const y = 470832;

int main(){
    double z = x*x*x*x -y*y*y*y*4 - y*y*4;
    printf("%f \n",z);
    return 0;
} 
```

这个问题的真正解决方案是方程 1。正如我自己在上一个问题上已经回答的那样，此代码由于灾难性取消而失败。然而，现在我发现了一件更奇怪的事情。如果您使用 long long，它会起作用，而据我所知，它们的范围小于 doubles。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:39:32.867

`long long`范围更小，*但*比`double`.

然而，这不是这里的工作。您的计算实际上也超出了范围`long long`，但是由于系统上处理整数溢出的方式，正确的结果无论如何都会失败。（请注意，有符号整数溢出的行为不受 C 标准限制，但“通常”的行为与您在此处看到的一样）。

如果你看一下中间结果`x*x*x*x`，你会发现如果你使用 double 计算它，它有一个合理的值；不精确，但圆润且足以满足大多数用途。然而，如果你在 中计算它`long long`，你会发现一个起初看起来绝对是疯狂的数字，因为溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:46:38.060

在 double 中有尾数和指数位。对于大双打，两个双打之间的距离（相同的指数，尾数加 1）结果远大于 1。因此，您处于与无穷大 + 1 = 无穷大相同的情况。

long long 会溢出，以 2 为模计算，因此应该为 1 的结果确实可以是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:39:29.363

浮点类型的溢出可以被视为未定义或错误，具体取决于语言和环境。整数类型的溢出只是简单地环绕（有时仍会产生正确的结果，有时不会）。

# tinymce - 将占位符放置在当前插入符号位置的 TINY MCE 中

> ID：10555311
> 
> 赞同：0
> 
> 时间：2012-05-11T16:36:16.680
> 
> 标签：tinymce

我想在当前插入符号位置的微型 MCE 中放置一个占位符。也尝试了书签，但没有帮助:(需要帮助

提前感谢，纳曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:47:07.300

tinymce 中有几种书签。

您可以使用例如：`var b = tinymce.activeEditor.selection.getBookmark(2,true);` 以及稍后：`tinymce.activeEditor.selection.moveToBookmark(b);`

# iphone - iPhone：在 Documents 文件夹中创建带有“不备份”标志的文件的排序问题？

> ID：10555319
> 
> 赞同：0
> 
> 时间：2012-05-11T16:36:40.057
> 
> 标签：iphone, backup, icloud

我们的应用程序根据 Apple 的要求设置了“不备份”标志。或者至少我们是这么认为的。最近的提交已被拒绝，因为审阅者发现了一个没有设置标志的文件。我们测试、重新测试并再次测试，发现我们所有的文件都是使用“不备份”标志创建的。嗯！

这不是我们第一个使用相同代码库的应用程序。我们已经让许多其他人顺利通过，即使是最近一些也没有问题。

那么这可能是一个排序问题吗？我们正在从下载包中复制一个数据库文件，用作应用程序的起始内容；然后，随着用户获得更多数据，此内容会更新。初始数据库文件可能很大 - 大至 2MB - 取决于应用程序。我们在 Documents 文件夹中打开一个新文件，将数据库内容复制到新文件中，关闭它，然后设置“不备份”标志。

相反，我们是否应该创建一个空文件，然后立即设置“不备份”标志，然后再打开它以使用捆绑包中的数据库内容覆盖空文件？

我已经向 Apple 审阅者询问了这个问题，但尚未收到答复。我可以简单地尝试不同的顺序，看看在重新审查中会发生什么，但我更愿意知道我应该做什么并去做，而不是猜测问题是什么并在黑暗中拍摄。

那么有没有人知道一种可靠的“Apple 批准”方式将（数据库）文件从捆绑包中复制到 Documents 目录中并设置“不备份”标志？任何人都可以阐明任何类似的拒绝以及他们为取悦审稿人所做的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:39:25.420

获得 Tumbleweed 徽章（=这是一个无聊的问题）这里有一些信息可以回答它......

设置“不备份”标志的方式在 5.0.1 和 5.1 之间发生了变化。[iOS 5.1 SDK](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-5_1/_index.html)的发行说明在“备份”下有以下条目

> iOS 5.1 引入了一个新的 API 来标记不应备份的文件或目录。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。在 iOS 5.1 及更高版本上运行的应用程序必须使用更新的属性，而不是直接添加 com.apple.MobileBackup 扩展属性，如前所述。com.apple.MobileBackup 扩展属性已弃用，未来版本可能会删除对它的支持。

请注意，iCloud 是在 iOS 5.01 中引入的，而此更改是在 5.1 中引入的，这意味着应用程序必须适应设备上运行的 iOS 特定版本。我们的一位开发人员发现了以下[关于处理 iOS 5.1 之前和](https://gist.github.com/1999985)之后的 设备的代码的 Gist。

# c - 将void指针转换为char指针指针是否安全

> ID：10555320
> 
> 赞同：2
> 
> 时间：2012-05-11T16:36:42.000
> 
> 标签：c, pointers, casting

只是想知道这样投射是否安全：

```
char **cpp;
// ... allocation and what not 
void *vp = (void *)cpp;
// ...
cpp = (char **)vp; 
```

应该使用 void ** 还是 void * 可以？这适用于我的几个盒子没有问题，但想知道它是否会导致某些系统出现问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T16:39:24.777

强制转换总是安全的，只要指针有效，取消引用它就是安全的。您使用 a 的唯一情况`void **`是您计划取消引用它以获取`void *`.

但是，除非您进行指针算术运算，否则它并不重要。正如您在[http://codepad.org/UcZUA0UL](http://codepad.org/UcZUA0UL)上看到的，无论您使用`void*`或`void **`. 在您实际使用指针之前，您无论如何都要将其转换回`char **`- 所以它在`void`-ish 时永远不会被取消引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T16:39:50.327

`void*`如果原始指针是 ，则来自 的强制转换（以及之后的用法）`char **`。

你不应该使用`void**`.

# prettyphoto - prettyphoto 如何使用 api 打开特定图像

> ID：10555322
> 
> 赞同：3
> 
> 时间：2012-05-11T16:36:43.803
> 
> 标签：prettyphoto

我正在使用文档中的这个例子：

```
api_images = ['images/fullscreen/image1.jpg','images/fullscreen/image2.jpg','images/fullscreen/image3.jpg'];
api_titles = ['Title 1','Title 2','Title 3'];
api_descriptions = ['Description 1','Description 2','Description 3']
$.prettyPhoto.open(api_images,api_titles,api_descriptions); 
```

例如，当prettyphoto 打开时，如何将数组中的第2 个图像作为起点，这样它也可以从该点向后退？（我可以把它放在数组的第一位，但后来我混合了我的内容）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:12:48.620

虽然没有记录，但它在 API 中可用，如下所示：

```
$.prettyPhoto.changePage(3) //for the 4th image (zero based) 
```

打开集合后立即调用它。

# asp.net-mvc - MVC Web API，获取子项

> ID：10555323
> 
> 赞同：2
> 
> 时间：2012-05-11T16:36:47.993
> 
> 标签：asp.net-mvc, rest, asp.net-web-api, asp.net-4.5

我有一个包含两个表的数据库。每个城市与特定国家有关系的国家和城市。

在我的 ASP.Net Web API 中，我可以通过对[http://example.com/api/countries](http://example.com/api/countries)的 GET 请求获取国家/地区列表，以运行国家控制器。[我可以通过http://example.com/api/countries/1](http://example.com/api/countries/1)获取有关国家/地区的详细信息。

如果我想要一个国家/地区所有城市的列表，REST 查询 URL 应该是[http://example.com/api/countries/1/cities](http://example.com/api/countries/1/cities)？以及城市的详细信息[http://example.com/api/countries/1/cities/1](http://example.com/api/countries/1/cities/1)

如何在 ASP.Net Web API 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T04:27:03.717

How about this, in global.asax.cs define an additional api route like so:

```
 routes.MapHttpRoute(
    name: "CityDetail",
    routeTemplate: "api/countries/{countryid}/cities/{cityid}",
    defaults: new { controller = "Cities" }
); 
```

Then define a new CitiesController like so:

```
 public class CitiesController : ApiController
{
    // GET /api/values
    public IEnumerable Get()
    {
        return new string[] { "value1", "value2" };
    }

    // GET /api/values/5
    public string Get(int countryId, int cityid)
    {
        return "value";
    }

    // POST /api/values
    public void Post(string value)
    {
    }

    // PUT /api/values/5
    public void Put(int countryId, int cityid, string value)
    {
    }

    // DELETE /api/values/5
    public void Delete(int countryId, int cityid)
    {
    }
} 
```

Needless to say you might want to improve the controller implementation a bit :)

# wpf - 选中时具有多绑定显示对象类型的 WPF 可编辑组合框

> ID：10555324
> 
> 赞同：2
> 
> 时间：2012-05-11T16:36:48.163
> 
> 标签：wpf, combobox, multibinding

我有一个可编辑的组合框，我在其中使用使用 MultiBinding 的 ItemTemplate。组合框展开时显示的项目按我的预期显示。However, when an item is selected the text displayed is the object type instead. 我看过建议覆盖 ToString() 的帖子，但如果可能的话，我想避免这种情况。

我绑定的对象是 UserDetail 对象的集合，其中 UserDetail 有一个名字和姓氏以及一个 BarcodeID，我将其显示为 ComboBox 中每个项目的字符串。我想显示与所选项目相同的字符串。相反，我看到的是*MyNameSpace.UserDetail*

这是我的组合框的 xaml。请告诉我哪里出错了：

```
<ComboBox IsEditable="True" IsReadOnly="False" Name="myUser" 
          TextBoxBase.TextChanged="myCombo_TextChanged"  
          SelectionChanged="myCombo_SelectionChanged">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock>
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{1}, {0}, {2}">
                        <Binding Path="FirstName" />
                        <Binding Path="LastName" />
                        <Binding Path="BarcodeId" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

仅供参考，BarcodeID 用于可选的条形码徽章阅读器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:42:12.427

您应该只将文本数据绑定到 IsEditable = true 的组合框。

消除`IsEditable="True"`

请参阅[此处](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.iseditable.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-12-16T09:33:34.757

设置属性

> TextSearch.TextPath="your_binding_property_path"。

来自[http://www.shujaat.net/2010/08/wpf-editable-combobox-with-datatemplate.html](http://www.shujaat.net/2010/08/wpf-editable-combobox-with-datatemplate.html)

# ios - 图像滚动视图崩溃

> ID：10555330
> 
> 赞同：1
> 
> 时间：2012-05-11T16:37:29.367
> 
> 标签：ios, uiscrollview, uiimageview, image-gallery

我已经实现了一个带有分页的滚动视图，可以在整页的一些图像（图表）之间滚动（比如 iPhone 中安装的照片应用程序）。

我发现下面的代码使用了经典的 3 页解决方案（我对我的应用程序进行了一些小修改），但是，即使它“有效”，滚动似乎也很慢，并且通常在滚动一些图像后应用程序崩溃。

我正在使用启用了 ARC 选项的 Xcode 4.2，并在 iPad 设备上进行了测试。图片 (10 jpg) 为 2048x1539，平均尺寸为 200/250Kb。

有没有人可以帮助我找到问题的原因？

谢谢， 科拉多

```
const int numImages = 10;
const float kPageWidth = 1024.0f;
const float kPageHeight = 768.0f;

- (void)viewDidLoad {
[super viewDidLoad];

    scroll.contentSize = CGSizeMake(kPageWidth * numImages, kPageHeight);
imageview1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, kPageWidth, kPageHeight)];

imageview2 = [[UIImageView alloc] initWithFrame:CGRectMake(kPageWidth, 0, kPageWidth, kPageHeight)];    

imageview3 = [[UIImageView alloc] initWithFrame:CGRectMake(kPageWidth * 2, 0, kPageWidth, kPageHeight)];

scroll.contentOffset = CGPointMake(0, 0);

[imageview1 setImage:[UIImage imageNamed:@"grafico_0.jpg"]];
imageview1.contentMode = UIViewContentModeScaleAspectFit;
[imageview1 setTag:1];

imageview2.contentMode = UIViewContentModeScaleAspectFit;
[imageview2 setTag:2];

imageview3.contentMode = UIViewContentModeScaleAspectFit;
[imageview3 setTag:3];

[scroll addSubview:imageview1];
[scroll addSubview:imageview2];
[scroll addSubview:imageview3];        
}

- (void)scrollViewDidScroll:(UIScrollView*)scrollView {

const CGFloat currPos = scrollView.contentOffset.x;
const NSInteger selectedPage = lroundf(currPos * (1.0f / kPageWidth)); 
const NSInteger zone = 1 + (selectedPage % 3); 
const NSInteger nextPage = selectedPage + 1;
const NSInteger prevPage = selectedPage - 1;

/// Next page
if (nextPage < numImages)
{
    NSInteger nextViewTag = zone + 1;
    if (nextViewTag == 4)
        nextViewTag = 1;

    UIImageView* nextView = (UIImageView*)[scrollView viewWithTag:nextViewTag];      
    nextView.frame = (CGRect){.origin.x = nextPage * kPageHeight, .origin.y = 0.0f, kPageHeight, kPageWidth};

    NSString *str = [NSString stringWithFormat:@"grafico_%d.jpg", nextPage];
    UIImage* img = [UIImage imageNamed:str];
    nextView.image = img;
}

/// Prev page
if (prevPage >= 0)
{
    NSInteger prevViewTag = zone - 1;
    if (!prevViewTag)
        prevViewTag = 3;

    UIImageView* prevView = (UIImageView*)[scrollView viewWithTag:prevViewTag];      
    prevView.frame = (CGRect){.origin.x = prevPage * kPageHeight, .origin.y = 0.0f, kPageHeight, kPageWidth};

    NSString *str = [NSString stringWithFormat:@"grafico_%d.jpg", prevPage];
    UIImage* img = [UIImage imageNamed:str];
    prevView.image = img;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:34:14.133

您不应该`imageNamed:`用于加载大图像，因为该方法会缓存图像，并且应该仅用于您在应用程序中多次使用的小图像（例如按钮图像等）。该方法因在与许多大图像一起使用时会导致内存问题而臭名昭著。

改为`imageWithContentsOfFile:`改为。使用该方法加载图像可确保图像不会被缓存，并且在您不再使用该图像后释放内存。

如果滚动似乎很缓慢，您可以使用以下方法将图像的加载移动到后台线程`performSelectorInBackground`：

```
[self performSelectorInBackground:@selector(retrieveImageData:) withObject:imagePath]; 
```

UIImage 的加载发生在这个方法中：

```
- (void)retrieveImageData:(NSString *)imagePath {
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
  UIImage *image = [UIImage imageWithContentsOfFile:imagePath];
  [self performSelectorOnMainThread:@selector(imageDataRetrieved:) withObject:image waitUntilDone:NO];
  [pool release];
} 
```

并将图像附加到主线程上的 UIImageView（UI 操作不得在后台线程上发生）：

```
- (void)imageDataRetrieved:(UIImage)*image {
  yourImageView.image = image;
} 
```

# iphone - URL 重定向到间谍软件站点

> ID：10555331
> 
> 赞同：5
> 
> 时间：2012-05-11T16:37:37.233
> 
> 标签：iphone, facebook, url, google-chrome

我们正在开发一个应用程序，代表我们的用户在 Facebook 上发布帖子。在这些帖子中，我们希望放置指向外部（非 Facebook）网站的链接。

查看浏览器（通常是 Chrome）状态栏中的链接，会显示正确的 URL。然而，Facebook 似乎将实际点击的链接包装成一些额外的花里胡哨。通常，这可以正常工作。

但是，有时，此 URL 包装最终会将点击发送到如下 URL：

> http://spywaresite.info/0/go.php?sid=2

（添加空间使其不可浏览！）这会生成 Chrome 严重警告消息：

![在此处输入图像描述](../Images/c275a7cc861f446c3f098f2e33203447.png)

这种情况在 Chrome 上偶尔会发生，但在 iPhone 上的 iOS 浏览器中则更为常见。

有没有人对如何处理这个问题有任何指示？

* * *

**编辑**

例如，我们在链接中放置的 URL 是

> [http://www.example.com/some/full/path/somewhere](http://www.example.com/some/full/path/somewhere)

但实际被点击的 URL 是：

> [http://platform.ak.fbcdn.net/www/app_full_proxy.php?app=374274329267054&v=1&size=z&cksum=fc1c17ed464a92bc53caae79e5413481&src=http%3A%2F%2Fwww.example.com%2Fsome%2Ffull%2Fpath%2Fsomewhere](http://platform.ak.fbcdn.net/www/app_full_proxy.php?app=374274329267054&v=1&size=z&cksum=fc1c17ed464a92bc53caae79e5413481&src=http%3A%2F%2Fwww.example.com%2Fsome%2Ffull%2Fpath%2Fsomewhere)

页面中似乎有一些 JavaScript 优点可以解读这些内容并且*通常会*正确重定向。

**编辑2**

上面的链接放在图像上，下面的屏幕截图中图像右侧的蓝色文本。

将鼠标悬停在浏览器中的链接（或图像）上会显示正确的链接。右键单击链接并选择“复制链接地址”获取上面的 fbcdn.net 链接（或类似链接）。实际上，单击该链接似乎会将 fbcdn.net 链接的一些 JavaScript 处理触发到正确的链接中……但有时该处理会失败。

![在此处输入图像描述](../Images/58be600d0f8fc571cf8e092b83b21311.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:06:12.527

我不是 100% 确定你在这里问什么，但我会告诉你我所知道的：- 你指的是 Facebook 上的这个屏幕吗？

![插屏截图]](../Images/2b2e0ea97e156dacaa872647b4520a8d.png)
（或者更确切地说，不允许点击的那个屏幕的变化？）

*   如果您手动将用户发送到 facebook.com/l.php?u=something 他们将始终看到该消息 - 这是防止打开重定向器的措施
    *   如果您的用户正在提交此类链接，包括 l.php 链接，您需要提取目标 URL（在“u”参数中）
    *   如果您看到从 API 返回的 l.php URL，这可能是一个错误。

如果*在*facebook.com 上点击的链接最终出现在屏幕上，那是因为 facebook 检测到该链接是可疑的（例如，对于 URL 重定向站点 - 屏幕将允许点击但首先警告用户）或恶意/垃圾邮件（不允许点击）

在您的应用程序中，您将无法发布指向后者的链接（会返回一个错误，说明 URL 已被阻止），而前者有时可能会抛出验证码（如果您使用的是 Feed 对话框，这应该是透明的到应用程序代码，用户将输入验证码，对话框将正常返回）

如果这不是您要问的，请澄清一下，我会更新我的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:31:07.607

与其添加问题，我想我会在这里提供更多细节。

看起来原始标题中提到的 Facebook 是错误的，所以我删除了它。

我们还没有找到问题的根源。

但是，我们同时使用[Wireshark](http://www.wireshark.org/)和[Fiddler](http://www.fiddler2.com/fiddler2/)来查看 Chrome 浏览器（在 PC 上）和 Facebook 之间的 HTTP 流量。两者都表明 Facebook 正在返回正确的 URL 刷新。

以下是 Wireshark 展示的内容：

![在此处输入图像描述](../Images/62d375ff80f4847d9f9f3b5e4c3cfda7.png)

我们在 Fiddler 上看到的是我们的服务器正在向 spywaresite.info 站点发出重定向：

![在此处输入图像描述](../Images/403cc274b4282721172b70ffb1c374ef.png)

我们正在与我们的 ISP 合作，以确定这里发生了什么。

# python - 计算沿轴的修剪平均值

> ID：10555334
> 
> 赞同：0
> 
> 时间：2012-05-11T16:37:55.263
> 
> 标签：python, numpy, scipy

我想计算沿轴的修剪平均值，而不需要显式循环。所以它应该做同样的事情：

```
arr=np.random.randn(3,10000)
arr[:,:5]+=999
arr=np.arange(3)[:,None]+arr
out=np.zeros(arr.shape[0])

for i in range(arr.shape[0]):
   col=arr[i,:]
   m=np.abs(col-col.mean())<2*col.std()    
   out[i]=col[m].mean()

print out
print arr.mean(1) 
```

结果是：

```
[-0.01085947  0.99187648  1.98009922]
[ 0.48822938  1.49126719  2.47951973] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:10:37.363

```
>>> import numpy as np
>>> import numpy.ma as ma
>>> a = np.arange(24).reshape((6,4))
>>> mask=~(np.abs(a - a.mean(axis=1)[:,np.newaxis]) < a.std(axis=1)[:,np.newaxis])
>>> mask
array([[ True, False, False,  True],
       [ True, False, False,  True],
       [ True, False, False,  True],
       [ True, False, False,  True],
       [ True, False, False,  True],
       [ True, False, False,  True]], dtype=bool)
>>> ma.array(a,mask=mask).mean(axis=1).data
array([  1.5,   5.5,   9.5,  13.5,  17.5,  21.5]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:29:22.863

使用掩码数组是这里的方法：

```
import numpy.ma as ma
arr = np.transpose(arr)
mask = np.abs(arr - arr.mean(0)) >= 2 * arr.std(0)
print ma.array(arr,mask=mask).mean(0) 
```

提供与您的代码相同的输出。

# facebook - 通过 FQL 获取“可能”雕像的事件成员返回 NULL

> ID：10555336
> 
> 赞同：0
> 
> 时间：2012-05-11T16:37:58.880
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想展示这个 Facebook 活动的所有成员，他们的状态是“可能”。带有 FQL 查询的 Graph Api 让我为 NULL，但官方 facebook 活动有 (1,898) 个“可能”成员。错在哪里？

**官方FB活动：**

[https://www.facebook.com/events/175525179214102/](https://www.facebook.com/events/175525179214102/)

**通过 Graph API Explorer 查询 FQL**

[https://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20uid%20FROM%20event_member%20WHERE%20eid%20%3D%20175525179214102%20AND%20rsvp_status%20%3D%20'也许'](https://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20uid%20FROM%20event_member%20WHERE%20eid%20%3D%20175525179214102%20AND%20rsvp_status%20%3D%20%27maybe%27)

```
SELECT uid FROM event_member WHERE eid = 175525179214102 AND rsvp_status = 'maybe' 
```

**返回：**

```
{
  "data": [
  ]
} 
```

谢谢大家的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:22:00.193

是`rsvp_status = 'unsure'`。

[https://developers.facebook.com/docs/reference/fql/event_member/](https://developers.facebook.com/docs/reference/fql/event_member/)

# python - ssh 使用没有 RSA 密钥的 python

> ID：10555338
> 
> 赞同：5
> 
> 时间：2012-05-11T16:38:05.003
> 
> 标签：python, ssh, passwords, pty, unison

Stackoverflow 的新手，所以首先，你好。

我正在为我的学校做一个小项目，该项目应该是开源 Unison 程序的自定义 gui（用 python 编写，对我来说是一个教育挑战，因为我从未使用过 python）。我们正在尝试让学生和教职员工在家里和学校同步文件夹，方法是通过尽可能少的输入启动这个程序（如果你愿意的话，请防止白痴）。该界面应该只是他们是学校用户名和密码，而 gui 包装器应该只是将用户名和密码发送到 Unison 并同步它们。

问题是 Unison 依次启动 SSh 并提示输入密码，但 python subprocess.communicate(input) 方法不会让 ssh 获取密码。我意识到 ssh 只会接受来自终端的输入，我不知道如何欺骗它。我读过一些关于使用伪终端的东西，但我仍然很难过。RSA 密钥将是理想的解决方案，但生成它们然后将它们放置在远程服务器上仍然需要我至少使用密码登录一次，这需要解决上述问题，或者终端不是白痴证明。

```
def startSync(self):
    '''
    '''
    userName = self.userNameIn.get()
    userPass = self.userPassIn.get()
    localDir = "/Users/localuser/syncFolder/"
    remoteDir = " ssh://schoolServer/remotesyncFolder" #for testing purposes, I set this to my own home machine which logs into my own account if I don't provide me@myserver.net
    unisonExecRemotePath = " -servercmd /Users/RemoteMe/unison" #unison is the unix executable responsible for launching unison on the remote system
    silenceCmdPrompts = " -silent" #keeps unison from displaying directory differences and asking if its okay to sync
    executionString = "./unison" + localDir + remoteDir + unisonExecRemotePath + silenceCmdPrompts

   mainProcess = subprocess.Popen(executionString,shell = True, stdin = subprocess.PIPE)
   mainProcess.communicate(userPass) 
```

如果我将其粘贴到终端中，执行字符串可以正常工作。如果您愿意，任何一般的 python 提示也将不胜感激。

谢谢！

Unison 用户手册：[http ://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html](http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html)

编辑：我还应该注意，虽然我目前正在 OSX 和 Linux 下进行开发，但我最终必须使这个 Windows 兼容，因为我学校的大多数学生都将 Windows 作为他们的主要（或唯一）机器运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:42:28.930

查看[pexpect](http://pexpect.sourceforge.net/pexpect.html)。

```
import pexpect

child = pexpect.spawn('ssh myname@host.example.com')
child.expect('Password:')
child.sendline(mypassword)
child.interact() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:40:47.393

如果您想向您发送密码，`ssh`您需要打开伪终端 (a `pty`) 并使用它与它交谈，而不仅仅是使用`stdin`/ `stdout`。看看[pexpect](http://www.noah.org/wiki/pexpect)模块，它就是专门为此而设计的。

另一种解决方案将涉及某种用于分发公钥的带外机制：例如，设置一个简单的 Web 应用程序，人们可以在其中粘贴公钥并让它`authorized_keys`代表用户管理文件。

# user-interface - 为什么一个简单的方法会触发一个主循环消息然后阻塞？

> ID：10555344
> 
> 赞同：0
> 
> 时间：2012-05-11T16:38:32.250
> 
> 标签：user-interface, loops, wxpython, return, gui-toolkit

[这里](https://stackoverflow.com/a/10549579/1179158)有人告诉我一些关于 wxPython 和其他 GUI 工具包我无法理解的事情。

当我`GetLabel`从“静态文本”控件调用时，有一个事件入队并且`GetLabel`在主循环处理此事件之前不会返回。

为什么要为这样一个简单的任务排队？

为什么该方法不立即返回，而是阻塞直到消息被处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:14:37.960

我认为 GetLabel 不会触发事件。您在另一个问题中遇到的问题是您正在使用线程来尝试操作 GUI 并从中获取信息。您的线程阻塞了 GUI 的主线程。如果您在 GUI 代码中（例如在按钮的事件处理程序中）调用 GetLabel()，它将立即生效。

# php - JQUERY - .html() 也可以查看php

> ID：10555349
> 
> 赞同：2
> 
> 时间：2012-05-11T16:39:01.370
> 
> 标签：php, javascript, jquery

以下脚本使用 ajax 发送数据以进行登录

我想格式化返回的数据，本质上是一个会话变量（$ _SESSION）

我能做到

```
 $("#login").click(function(){

username=$("#user_name").val();
password=$("#password").val();
 $.ajax({
    type: "POST",
    url: "inc/login.inc.php",
    data: "username="+username+"&password="+password,
    success: function(msg){
      if(msg!='false')
      {
        $("#login_form").fadeOut("normal");
        $("#shadow").fadeOut();
        $("#profile").html("<\?php print(\"$_SESSION['name'].\" <a href='inc\/logout.inc.php' id='logout'>Logout k2<\/a>\");\?>");
        //valori menù
        if(tipo=='1')
        {$("#admin").css('display','none')}

      }
      else
      {
            $("#add_err").html("Username o password errata");
      }
    },
    beforeSend:function()
    {
         $("#add_err").html("<img hspace='84' src='img/loading.gif' alt='Loading...'  width='32' height='32'>" )
    }
});
 return false; 
```

});

特别是这是可能的，这样会打印刚刚登录的用户的名称。否则我不知道该怎么做

```
$("#profile").html("<\?php print(\"$_SESSION['name'].\" <a href='inc\/logout.inc.php' id='logout'>Logout k2<\/a>\");\?>"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:40:21.173

脚本处理完毕后，您无法插入 PHP 代码。

通过 ajax 将其拉入，或者将实际的 PHP 输出包含到您的 javascript 中。

即，在 page.php

```
 <script>
       var sessionName = '<?php echo $_SESSION['name']; ?>';
   </script> 
```

然后当你以后需要它时

```
 $("#profile").html(sessionName + " <a href=\"inc/logout.inc.php\" id=\"logout\">Logout k2</a>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:42:51.560

JavaScript 是客户端，它根本无法执行您的 php 代码。

您必须在 ajax 请求中使用的 php 文件中返回某些内容（例如用户名）并在 JS 中使用它。

有关示例，请参阅[jQuery ajax 文档](http://api.jquery.com/category/ajax/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:45:54.703

You'll need to serve the php code:

```
$("#profile").load("inc/login-header.inc.php"); 
```

login-header.inc.php

```
<?php
  print($_SESSION['name'] . " <a href='inc/logout.inc.php' id='logout'>Logout k2</a>");
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T17:44:06.243

那是行不通的，因为 PHP 代码永远不会被处理。

在`login.inc.php`尝试这样的事情

```
<?php
if (!loginOK()){
     echo "{login:false}";
} else {
     echo "{login:true, name:'".$_SESSION['name']."'}";

} 
```

然后在客户端

```
success: function(msg){
    if (msg.login){
       // stuff
    } else {
       $("#profile").html(msg.name + $('<a>').attr('href', 'logout.php').html('logout'));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T16:51:30.117

将信息从 php 脚本发送回 javascript 的最简单方法是`msg`使用

```
success: function(msg){ 
```

如果你只想发回一个字符串，你只需`echo`在你的 php 文件中发送一个字符串，你就会在`msg`. 如果要发回多个变量，可以将结果打包到 json 对象中。

因此，假设您要发回的所有内容都包含在名为 的 php 数组中`$output`，您可以`echo json_encode($output);`在 php 脚本的末尾执行 a 以获取整个内容`msg`。

# iphone - 当 iphone 中出现视图时，我会收到什么通知？

> ID：10555365
> 
> 赞同：0
> 
> 时间：2012-05-11T16:39:52.887
> 
> 标签：iphone, animation, uiview, uinavigationcontroller, infinite-loop

我想知道当这个视图显示在屏幕上时我会在我的 CustomView 类中得到什么通知。

```
CustomView *customView = [[CustomView alloc] init];
[self.view addSubview:customView];
NewViewController *newController = [[NewViewController alloc] init];
[self.navigationController pushViewController:newController animated:YES]; 
```

经过一些工作，我弹出了这个 viewController。

```
[self.navigationController popViewControllerAnimated:YES]; 
```

我想知道当该视图再次出现在屏幕上时，将调用 CustomView 类中的什么方法。

实际上，我在那个 CustomView 中有一个无限循环动画，并且在推送到 nextController 时，我必须停止那个动画循环，回来后我需要重新启动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:41:59.743

你自己回答了。

```
viewWillAppear 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:47:12.910

UIView 没有得到

```
viewWillAppear
viewDidDisappear 
etc 
```

但是，包含它的 ViewController 确实如此，因此，为了将其传递给 UIView 您将实现以下方法：

```
- (void)viewWillAppear:(BOOL)animated
{
   [super viewWillAppear:animated];
   [[self.view.subviews objectAtIndex:0] viewWIllAppear]; // i assume your subview is the only one, otherwise you need to know the index, or have it as an ivar/property 
} 
```

另一个想法 - 由于您经常使用您的视图，我假设您不会重新创建它。让它成为您的 [[UIApplication sharedApplication] 委托] 的属性。现在您可以像这样访问它：

```
#define SharedView [(appDelegate*)[[UIApplication sharedApplication] delegate] sharedView]; 
```

然后制作自定义 UIViewController 并覆盖 viewWillAppear：

```
- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  if ( [SharedView.superview isEqual:self.view] )
  {
     [SharedView viewWillAppear];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T21:10:58.373

你看过吗：[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-DontLinkElementID_1)

```
Observing View-Related Changes
– didAddSubview:
– willRemoveSubview:
– willMoveToSuperview:
– didMoveToSuperview
– willMoveToWindow:
– didMoveToWindow 
```

# delphi - 用于翻转菜单的 Delphi XE2 组件

> ID：10555366
> 
> 赞同：1
> 
> 时间：2012-05-11T16:39:59.263
> 
> 标签：delphi, user-interface, delphi-xe2, popupmenu

在我的应用程序（Delphi Xe2）中，我有“多选”按钮（即“导出”按钮有“导出到 PDF”和“导出到 XLS”选项）。我需要一个菜单​​，就像我将鼠标移到按钮（或面板或其他对象）上时出现的弹出菜单一样。此菜单需要出现在按钮下方，并且需要是“VCL Stylable”组件。我尝试了一个 TPopUpMenu 但隐藏起来不方便。我也可以考虑使用 OnClick 事件而不是 OnEnter 来显示菜单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:48:04.973

您可以将 a`TButton`的样式设置为`bsSplitButton`，与`TPopupActionBar`设置为按钮[`DropDownMenu`](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TButton.DropDownMenu)属性的 a 一起使用。当您单击具有向下箭头的右侧*拆分时，菜单会下拉。*仅适用于 Vista 及更高版本..

对于较早的操作系统，可以使用以下内容：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Pt: TPoint;
begin
  Pt := ClientToScreen(Point((Sender as TButton).Left, (Sender as TButton).Top));
  PopupActionBar1.Popup(Pt.X, Pt.Y + (Sender as TButton).Height);
end; 
```

# bash - Bash：如何在 sqlite3 中插入 带有特殊字符的文本？

> ID：10555370
> 
> 赞同：1
> 
> 时间：2012-05-11T16:40:13.637
> 
> 标签：bash, sqlite

假设我想用 sqlite3将各种**bash 脚本的文本保存在我的数据库中。**

如果我的脚本这样做

```
VARIABLE=$(cat "bashScript.sh")
sqlite3 mydb.db "CREATE TABLE data (myBash BLOB)" 
sqlite3 mydb.db "INSERT INTO data VALUES (${VARIABLE})" 
```

因为 bash 脚本将包含所有特殊字符，所以这不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:39:36.637

您需要在 Insert 语句中引用该值，并且您需要保护该值本身的引号：未经测试：

```
sql_value=$(sed 's/'\''/&&/g' <<< "$VARIABLE")
sqlite3 mydb.db "insert into data values ('$sql_value')" 
```

# java - 使用 Selenium Webdriver Java 检索第 3 方和所有 Cookie

> ID：10555380
> 
> 赞同：3
> 
> 时间：2012-05-11T16:40:50.490
> 
> 标签：java, cookies, selenium, webdriver

我想使用带有 java 的 selenium webdriver xx.21 从 URl 检索所有 cookie 名称和域，

我正在使用以下代码：

```
driver.navigate().to("http://www.nextag.com");
Set<Cookie> cookies = driver.manage().getCookies();
Iterator<Cookie> itr = cookies.iterator();

    while (itr.hasNext()){
    Cookie c = itr.next();
    System.out.println("Cookie Name: " + c.getName() + " --- " + "Cookie Domain: " + c.getDomain() + " --- " + "Cookie Value: " + c.getValue());
    } 
```

从上面的代码中，我只得到了一些，但是当我手动检查时，广告必须删除更多的 cookie，例如预期的 (scorecardresearch.com) cookie，如何通过 selenium 代码获取所有这些？任何答案都会非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T18:46:19.837

使用 Mozilla firefox[插件可以](https://addons.mozilla.org/en-US/firefox/addon/get-all-cookies-in-xml)解决此问题，该插件会将所有 cookie 以 XML 格式保存在当前配置文件目录下。这个附加组件将保存来自所有域的 cookie，并且可以使用 webdriver 访问。

有关使用 C# 实现的更多详细信息，请参阅以下博客：[http ://automationoverflow.blogspot.in/2013/07/getting-cookies-from-all-domains.html](http://automationoverflow.blogspot.in/2013/07/getting-cookies-from-all-domains.html)

# c# - How to get Yandex panoramic images

> ID：10555381
> 
> 赞同：0
> 
> 时间：2012-05-11T16:40:52.590
> 
> 标签：c#, javascript, jquery, asp.net, yandex

Is there any way to get Yandex map's panoramic images with c# or javascript for asp.net application? I have latitude and longitude points of locations.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:44:08.010

Yandex maps API doesn't allow to show panoramic images on external websites.

# performance - Opengl glScalef 重置性能

> ID：10555385
> 
> 赞同：2
> 
> 时间：2012-05-11T16:41:24.387
> 
> 标签：performance, opengl

```
glScalef(0.5f, 0.5f, 0);
// do some things
glScalef(2.0f, 2.0f, 0); 
```

或者..

```
glPushMatrix();
glScalef(0.5f, 0.5f, 0);
// do some things
glPopMatrix(); 
```

哪个更好，性能明智？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:43:26.100

第二个。因为第一个计算并乘以一个 4x4 矩阵，而第二个只写入和读取它。请注意，OpenGL 可以对其进行智能处理，并且只创建/乘以对角矩阵。不过，您将 3 个浮点乘法与 16 个变量存储进行比较。如果您担心性能差异，则需要编写测试。

在精度方面，第二个肯定更好，因为由于任何舍入误差`0.5 * x * 2`可能会给出与`x`. 这就是为什么，即使另一种方法稍快一些，这种方法也是首选的。

# jquery - jQuery ui.spinner.js 全局微调器

> ID：10555392
> 
> 赞同：1
> 
> 时间：2012-05-11T16:42:02.623
> 
> 标签：jquery, input, html-table, spinner

我正在使用 jQuery 微调器将 +/- 值添加到我在 mysql 数据库传播的表中的输入字段中。

我想将列顶部的 +/- 集成到该列中的每个输入以及每个输入都有自己的按钮的 +/- 1。

我为 jQuery 尝试了以下方法：

```
<script type="text/javascript" src="js/ui.spinner.js"></script>
<script type="text/javascript">
    jQuery().ready(function($) {
        $('.spinner').spinner({ min: 0, max: 100 });
        $('#spinnerall').spinner().change(function() {$('.spinner').spinner('option', 'max', parseInt($(this).val()));});
        $('#spinnerall').spinner().change(function() {$('.spinner').spinner('option', 'min', parseInt($(this).val()));});
    });
</script> 
```

然后是表格代码：

```
<td><input type='text' class='spinner' value='$max' /></td>
<input type='text' id='spinnerall' /> 
```

“spinnerall”实际上并不需要作为输入，但无论如何我都无法弄清楚如何调用它。

带有我上面使用的代码的 spinnerall 输入将所有输入重置为等于其当前打开的相同值，而不仅仅是加或减 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:12:14.543

如果我能理解问题，答案应该是这样的：

```
<script type="text/javascript" src="js/ui.spinner.js"></script>
<script type="text/javascript">
$(function(){
    var $sa = $('#spinnerall').spinner().change(function() {
        var $me = $(this);
        // we need the offset between the start and current position
        var offset = parseInt($me.attr('data-init')) - parseInt($me.val());
        $ss.each(function(){
            // applying the offset to all spinners
            this.value = parseInt($(this).attr('data-init')) - offset;
            // allow only positive or zero
            this.value *= (this.value > 0);
        })
    });
    $sa.attr('data-init',$sa.val());

    var $ss = $('.spinner').spinner({ min: 0, max: 100 }).change(function(){
        var $me = $(this);
        // replacing the initial value with the current (without the offset)
        $me.attr('data-init',parseInt($me.val()) - parseInt($sa.attr('data-init')) - parseInt($sa.val()));
    }).change();
});
</script> 
```

我已经用这个标记测试了它：

```
<input type="text" class="spinner" value="1" /><br/>
<input type="text" class="spinner" value="-5" /><br/>
<input type="text" class="spinner" value="7" /><br/><br/>
<input type='text' id='spinnerall' value="0" /> 
```

[这是jsfiddle.net](http://jsfiddle.net/vDuxc/2/)中的一个示例

# sharepoint - 在 Sharepoint 集成模式下将自定义程序集部署到 SSRS

> ID：10555397
> 
> 赞同：1
> 
> 时间：2012-05-11T16:42:27.847
> 
> 标签：sharepoint, reporting-services

我在将某些报告中使用的自定义程序集部署到 Sharepoint 集成模式下的 SSRS 服务器时遇到了一些问题。[根据微软](http://msdn.microsoft.com/en-us/library/ms155034)的说法，将程序集部署到 SSRS 的两种方法是：

1.  将程序集复制到 %ProgramFiles%\Microsoft SQL Server\MSRSnn.MSSQLSERVER\Reporting Services\ReportServer\bin
2.  将其安装到 GAC

我已经尝试了这两种方法，但在部署报告时仍然出现此错误：

```
Deploying report 'http://localhost:7000/shared documents/xxxxxx.rdl'.
Error rsProcessingError : Error while loading code module: ‘Xxxxxx, Version=1.0.0.0, Culture=neutral, PublicKeyToken=xxxxxx’. Details: Could not load file or assembly 'Xxxxxx, Version=1.0.0.0, Culture=neutral, PublicKeyToken=xxxxxx' or one of its dependencies. The system cannot find the file specified. 
```

该程序集肯定在 ReportServer\bin 中。它也在 Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies 中，并且在 Visual Studio 的预览模式下工作。我也用gacutil把它安装到了GAC，但是还是没有找到。

我需要在一些特殊的地方放置程序集以使其与 Sharepoint 中的 SSRS 一起使用吗？我似乎找不到任何有关此的信息。还有其他原因我会收到该错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-16T05:03:17.380

自定义程序集需要复制到：

C:\Program Files\Common Files\microsoft shared\Web 服务器扩展\15\WebServices\Reporting\bin

需要更新的 rssrvpolicy.config 文件在这里：

C:\Program Files\Common Files\microsoft shared\Web 服务器扩展\15\WebServices\Reporting

资源：

[https://social.msdn.microsoft.com/Forums/sqlserver/en-US/3d76c2d9-09f1-4045-adf4-a78d32c1b113/ssrs-report-with-custom-assembly-error?forum=sqlreportingservices](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/3d76c2d9-09f1-4045-adf4-a78d32c1b113/ssrs-report-with-custom-assembly-error?forum=sqlreportingservices)

从微软文档：

默认情况下，SharePoint 模式的安装目录如下：

C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\15\WebServices\Reporting

[https://docs.microsoft.com/en-us/sql/reporting-services/report-server/reporting-services-configuration-files?view=sql-server-2014#bkmk_config_file_Summary_sharepoint_mode](https://docs.microsoft.com/en-us/sql/reporting-services/report-server/reporting-services-configuration-files?view=sql-server-2014#bkmk_config_file_Summary_sharepoint_mode)

# .net - 为 xamlx 工作流添加 SqlTrackingService

> ID：10555402
> 
> 赞同：1
> 
> 时间：2012-05-11T16:42:36.000
> 
> 标签：.net, workflow-foundation-4, workflow-foundation, tracking

我设计了一个工作流服务 (xamlx)，我想跟踪它，例如使用 SqlTrackingService。由于该过程是在 xamlx 文件中定义的，因此我无法添加

```
WorkflowRuntime wRuntime = new WorkflowRuntime();
wRuntime.AddService(new SqlTrackingService(connectionString));
wRuntime.StartRuntime(); 
```

因为没有地方放它...我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:28:44.550

不太确定你在做什么。您指的是 XAMLX 工作流服务，它是一个 WF4 概念。但是代码使用的是 WF3 工件的 WorkflowRuntime 和 SqlTrackingService。WF3 和 WF4 是两个非常不同且独立的东西，它们并没有真正混合在一起。

# multithreading - 必须始终在主线程上使用 Webkit 吗？

> ID：10555403
> 
> 赞同：2
> 
> 时间：2012-05-11T16:42:50.197
> 
> 标签：multithreading, cocoa, webkit

我正在尝试在后台渲染网页，但遇到了以下问题

```
2012-05-11 12:39:02.086 [77207:1c03] An uncaught exception was raised
2012-05-11 12:39:02.087 [77207:1c03] objc_object* -[WebView initWithFrame:frameName:groupName:](WebView*, objc_selector*, CGRect, NSString*, NSString*) was called from a secondary thread 
```

我知道 webkit 类不是线程安全的，但它们是否也必须始终从主线程中使用？或者，我可以创建一个虚拟 web 视图来初始化 webkit，然后再使用后台线程中的 webkit 类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:03:15.123

`WebView`是 的子类`NSView`。从[线程编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)：

> NSView 类通常是线程安全的，但有一些例外。**您应该仅从应用程序的主线程创建、销毁、调整大小、移动和对 NSView 对象执行其他操作。**只要将绘图调用与 lockFocusIfCanDraw 和 unlockFocus 调用括起来，从辅助线程绘图就是线程安全的。

（强调补充。）

我不太清楚 AppKit 是如何`WebView`工作的，但我的理解是，在 UIKit 中实际上只有一个`UIWebView`出于性能原因而被重用，类似于 AppKit 中的字段编辑器。如果我的理解是正确的，并且`WebView`行为相似，我可以看到您在后台线程方面遇到更大的问题。

# ajax - 带有 POST 的经典 asp 跨域 http 请求

> ID：10555406
> 
> 赞同：0
> 
> 时间：2012-05-11T16:42:54.190
> 
> 标签：ajax, post, asp-classic, jsonp, httprequest

我需要在作为 HTTP 资源公开的外部域中调用远程“服务”。该服务仅接受 POST 请求。

所以，我不能使用 JSONP，因为它不支持 POST 方法。我不能使用 AJAX 请求，因为它是跨域请求。

简单的解决方案是使用 ServerXMLHTTP 对象来管理请求。缺点是使用 ServerXMLHTTP 请求是同步的。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:32:00.953

ServerXMLHTTP 将在您的应用程序托管的服务器端代码中使用，因此即使它是同步的，它也应该对您的应用程序很重要，因为使用常规 XmlHttp 调用此页面可能是异步的。本质上，您是在服务器中创建代理来克服浏览器的跨站点脚本限制。

**服务器端：Proxy.asp**

```
<%    
    Function RemoteMethod1(ByVal param1, ByVal param2)
        'Use ServerXMLHttp to make a call to remote server

        RemoteMethod = ResultFromRemoteServer
    End Function

    Function RemoteMethod2(ByVal param1, ByVal param2)
        'Use ServerXMLHttp to make a call to remote server

        RemoteMethod = ResultFromRemoteServer
    End Function

    'Read QueryString or Post parameters and add a logic to call appropriate remote method

    sRemoteMethodName = Request.QueryString("RemoteMethodName")

    If (sRemoteMethodName = RemoteMethod1) Then
        results = RemoteMethod1(param1, param2)
    Else If (sRemoteMethodName = RemoteMethod2) Then
        results = RemoteMethod1(param1, param2)
    End If

    'Convert the results to appropriate format (say JSON)

    Response.ContentType = "application/json"
    Response.Write(jsonResults)
%> 
```

现在使用 AJAX（比如 jQuery 的 getJSON）从您的客户端调用这个 Proxy.asp。因此，当您的服务器阻塞时，客户端的调用仍然是异步的。

**客户端：**

```
$.getJSON('proxy.aspx?RemoteMethodName=RemoteMethod1&Param1=Val1&Param2=Val2', function(data) {
    // data should be jsonResult
}); 
```

# java - Android：如何通过反射获取成员字段的实例

> ID：10555407
> 
> 赞同：1
> 
> 时间：2012-05-11T16:43:02.847
> 
> 标签：java, android, reflection, android-webview

这是一个相当复杂的问题。我正在尝试通过反射访问 webview 的 webviewcore 实例成员。我想要对我的 webview 使用的 webviewcore 的引用，以便我可以调用 webviewcore 使用的方法。我必须通过反射来做到这一点，因为公共 sdk 不允许您访问此类。我知道不鼓励使用反射来做到这一点，但我已经对此感到平静。

我在[这里](http://tutorials.jenkov.com/java-reflection/fields.html)读到，为了实现这一点，我会做这样的事情：

```
Class  aClass = MyObject.class
Field field = aClass.getField("someField");

MyObject objectInstance = new MyObject();

Object value = field.get(objectInstance);

field.set(objetInstance, value); 
```

这样做的问题（也许我误解了这一点）是看起来我必须创建一个 WebViewCore 的新实例才能使用，然后将其设置回我的实例。首先，我是否正确理解这一点。如果是这样，那么有人可以翻译上面的代码来做我想要做的事情。如果我的理解不正确，有谁知道我还能如何访问 webview 实例的 WebViewCore？

谢谢！

编辑：由于混淆，我将重申我的问题。我有一个 webview 的实例。该 webview 有一个名为“mWebViewCore”的成员字段，它是 WebViewCore 类的一个实例。WebViewCore 有一个名为 TextSelectionData 的成员类。我需要通过反射访问 TextSelectionData 对象。我知道如何通过反射访问 webview 的字段和方法。所以我可以获得 mWebViewCore 字段，但我不知道如何获取该字段并访问它的字段、方法、类等。大写是获取一个对象的实例，在该实例中找到一个特定字段，然后访问这些字段那个领域的。

对困惑感到抱歉。它来自我对反射的薄弱理解，部分来自我没有充分理解 WebViewCore 类的事实。这是我在代码中得到的地方：

```
Class c = mWebView.getClass();

       try {
            Field webViewCoreField = c.getDeclaredField("mWebViewCore");
            webViewCoreField.setAccessible(true);
            //how do i get the fields of webViewCoreField?
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:01:42.333

反射使您能够访问私有字段、类（或者更确切地说，一个对象）的私有方法和运行时信息。

你对反射的理解是正确的。但是在您发布的代码片段中，您对反射的使用对我来说没有意义。您正在为具有该字段值的字段设置值，即您正在执行以下操作：

```
obj.setValue(obj.getValue()); 
```

您说您想访问 WebView 的私有字段，我假设您已经拥有 WebView 实例，因此一旦您获得 Field 引用，您只需在原始 WebView 实例上设置该字段的值，您**不**应该也不**应该t**创建一个新的 WebView 对象，因为它是您想要操作的原始 WebView 对象。

像这样的东西：

```
WebView myWebView = ...;
Object myValueToSet = ...; 
Class webViewClass = WebView.class
Field field = webViewClass.getField("someField");
field.setAccessible(true);
field.set(myWebView, myValueToSet); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T22:06:25.483

假设`WebViewCore`带有一个`private String s`字段：

```
public class WebViewCore {
    private String s;
    public WebViewCore(String s) { this.s = s; }
    @Override
    public String toString() {
        return "WebViewCore{" + "s='" + s + '\'' + '}';
    }
} 
```

假设`WebView`带有一个`private WebViewCore webViewCore`字段：

```
public class WebView {
    private WebViewCore webViewCore;
    public WebView() { webViewCore = new WebViewCore("ohai"); }
} 
```

现在我们反思：

公共类主要{

```
 public static void main(String[] args) throws NoSuchFieldException, IllegalAccessException {
        // First get the private WebViewCore field...
        Field fWvc = WebView.class.getDeclaredField("webViewCore");
        fWvc.setAccessible(true);
        System.out.println(fWvc);

        // Then get an instance of a WebView; you already have one,
        // I'm constructing one...
        WebView wv = new WebView();
        WebViewCore wvc = (WebViewCore) fWvc.get(wv);
        System.out.println(wvc);

        // Now get the private String field from the WebViewCore class...
        Field fS = WebViewCore.class.getDeclaredField("s");
        fS.setAccessible(true);
        System.out.println(fS);

        // Now get the value of the private String field from the instance
        // of the WebViewCore we retrieved above...
        String s = (String) fS.get(wvc);
        System.out.println(s);
    }

} 
```

所以，这是我的咆哮：反射是一种相对先进的技术，尽管它非常简单。（需要注意的是，我已经这样做了很长时间，使用的语言比 Java 具有更好的反射能力。）

这似乎仍然有点遥不可及——在这种情况下，我会非常*非常*小心地使用它，并且基本上会不惜一切代价避免它。我质疑你是否需要做你想做的任何事情，在那之后，我会质疑做任何你想做的事情的*智慧*，直到像我们在这里搞砸的玩具例子这样的东西导致零概念问题。

这里有龙，它们会做饭吃你。

# javascript - Webkit 滞后于画布中的大图像

> ID：10555408
> 
> 赞同：4
> 
> 时间：2012-05-11T16:43:05.327
> 
> 标签：javascript, canvas, webkit

我对 webkit (chrome/safari) 和带有大图像的 Canvas 有一些问题。

对于我的客户，我们必须在画布上以每帧 80 毫秒的速度更改图像的动画介绍电影。

有 130 帧，我们不得不将单个图像放入 4 个 sprite 中，以减少页面的单个请求负载。

每个精灵大小大约为 2.5MB，我们只对所需帧的部分进行切片。到目前为止，可能。

不想用太多代码打扰你。但最终它只是：

> this.$context.drawImage(img, 0, top, img.width-1 ,(img.height / sequenceCount)-1, 0, 0, this.$canvas.width, this.$canvas.height);

女巫在 80 毫秒超时内被调用。

我们做到了，它适用于所有主要浏览器。但是对于 webkit，对下一个精灵的每次更改都会导致大约 400 毫秒的硬延迟。

IE9 也有同样的问题，但可以通过在开始时绘制每个精灵来解决

> ```
>  if (Browser.ie9) {
>        for(var x = 0; x < this.sequence[0].sprites.length; x++){                
>            this.draw(this.sequence[0].sprites[x].obj, 0, 1); 
>        }                   
>        this.$context.clearRect(0, 0, this.$canvas.width, this.$canvas.height);
>    } 
> ```

（draw 函数仅包含前面示例中的 drawImage 函数。）

但是对于 webkit 浏览器，我仍然会得到大约 400 毫秒的滞后时间。

是的，图像是预加载的。所以这不是问题。

任何想法这可能是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:01:28.207

每次获取画布或图像宽度时，都是在访问 DOM，这通常比访问 JS 内存要慢。如果您在调整大小时存储这些值并改用存储的值，您可能会看到改进。

```
var canvasWidth, canvasHeight, imgWidth, imgHeight; 
```

# optimization - Logger slf4j 使用 {} 格式化而不是字符串连接的优势

> ID：10555409
> 
> 赞同：119
> 
> 时间：2012-05-11T16:43:09.720
> 
> 标签：optimization, logging, concatenation, string-formatting, slf4j

`{}`使用而不是字符串连接有什么好处吗？

来自 slf4j 的示例

```
logger.debug("Temperature set to {}. Old temperature was {}.", t, oldT); 
```

代替

```
logger.debug("Temperature set to"+ t + ". Old temperature was " + oldT); 
```

我认为这是关于速度优化的，因为可以根据配置文件在运行时避免参数评估（和字符串连接）。但是只有两个参数是可能的，那么有时除了字符串连接之外别无选择。需要就这个问题发表意见。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-11T16:49:45.847

这*是*关于字符串连接性能的。如果您有密集的日志记录语句，这可能很重要。

> （SLF4J 1.7 之前）但只有两个参数是可能的

因为绝大多数日志语句有 2 个或更少的参数，所以 SLF4J API 直到 1.6 版涵盖（仅）大部分用例。自 API 版本 1.7 起，API 设计者提供了带有可变参数的重载方法。

对于那些你需要超过 2 个并且你坚持使用 1.7 之前的 SLF4J 的情况，那么只需使用字符串连接或`new Object[] { param1, param2, param3, ... }`. 它们的数量应该足够少，以至于性能不那么重要。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-05-15T07:52:07.307

**短版：是的，它更快，代码更少！**

字符串连接在不知道是否需要的情况下做了很多工作（从 log4j 已知的传统“启用调试”测试），如果可能的话应该避免，因为 {} 允许延迟 toString() 调用和字符串构造在确定事件是否需要捕获之后。通过让记录器格式化*单个*字符串，我认为代码变得更清晰。

您可以提供任意数量的参数。请注意，如果您使用旧版本的 sljf4j 并且有两个以上的参数`{}`，则必须使用`new Object[]{a,b,c,d}`语法来传递数组。参见例如[http://slf4j.org/apidocs/org/slf4j/Logger.html#debug(java.lang.String, java.lang.Object[])](http://slf4j.org/apidocs/org/slf4j/Logger.html#debug%28java.lang.String,%20java.lang.Object%5B%5D%29)。

关于速度：Ceki 不久前在其中一个列表上发布了一个基准。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-25T16:12:34.550

由于 String 在 Java 中是**不可变**的，因此对于每一对连接，都必须将左右 String 复制到新的 String 中。所以，最好选择占位符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-05T06:36:49.457

另一种选择是`String.format()`. 我们在[jcabi-log](http://www.jcabi.com/jcabi-log/)（围绕 slf4j 的静态实用程序包装器）中使用它。

```
Logger.debug(this, "some variable = %s", value); 
```

它更易于维护和扩展。此外，它很容易翻译。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-12T21:59:46.830

我认为从作者的角度来看，主要原因是减少字符串连接的开销。我刚刚阅读了记录器的文档，您可以找到以下文字：

```
/**
* <p>This form avoids superfluous string concatenation when the logger
* is disabled for the DEBUG level. However, this variant incurs the hidden
* (and relatively small) cost of creating an <code>Object[]</code> before 
  invoking the method,
* even if this logger is disabled for DEBUG. The variants taking
* {@link #debug(String, Object) one} and {@link #debug(String, Object, Object) two}
* arguments exist solely in order to avoid this hidden cost.</p>
*/
*
 * @param format    the format string
 * @param arguments a list of 3 or more arguments
 */
public void debug(String format, Object... arguments); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-26T13:58:35.643

兼容日志记录对于应用程序开发非常重要，因为它会影响性能。

提到的不合规日志记录导致每次调用时都会调用冗余的*toString()*方法，并且会导致冗余的临时内存分配和 CPU 处理，如示例大规模测试执行中所示，我们可以在其中查看冗余分配的临时内存： ![记忆](../Images/eddd1a400a90fc7f73c40064c4a596bc.png)

查看方法分析：
![查看方法分析](../Images/161c562adf7039b884565e4e86905f4d.png)

注意：我是这篇博文的作者，[日志记录对应用程序性能](https://techblog.cisco.com/blog/logging-impact-on-application-performance/)的影响。

# asp.net-mvc-3 - 附加两个 IEnumerable 项

> ID：10555410
> 
> 赞同：2
> 
> 时间：2012-05-11T16:43:12.497
> 
> 标签：asp.net-mvc-3, c#-4.0, razor

```
IEnumerable<Addresses> AddressSet1=myServices.GetAddresses(LocationId1);
IEnumerable<Addresses> AddressSet2=myServices.GetAddresses(LocationId2); 
```

我想结合以上两个AddressSets

我试过了`IEnumerable<Addresses> AllAddresses=AddressSet1.Concat(AddressSet2)`

但在此之后，当我尝试在我的剃刀视图上访问 IEnumerable AllAddresses 中的项目时

```
 @if(!myHelper.IsNullorEmpty(model.AllAddresses )
   {
     @Html.EditorFor(model => model.AllAddresses  )
   } 
```

我收到错误 - 路径中有非法字符。有什么建议可以确定导致此错误的原因吗？

如果我试图在没有 Concat 的情况下运行我的页面，我可以看到页面上显示的 AddressSet1 /AddressSet2 中的记录。但是当我尝试将两者结合起来形成 I Enumerable AllAddresses 时，它会抛出错误，请帮助

下面粘贴的是我的编辑器模板

```
@model MyServiceRole.Models.Addresses
@{
    ViewBag.Title = "All addresses Items";

    }
<table>
<tr>
 <td>
 <span>Index</span>

   </td>
   <td>

</tr>
 <tr>
 <td>Address XID</td>
 <td>
@Html.EditorFor(model => model.AddressID)
</td>
</tr>
 <tr>
 <td>Title</td>
 <td>
@Html.EditorFor(model => model.Title)
</td>
</tr>
<tr>
 <td>Description</td>
 <td>
 @Html.EditorFor(model => model.Description)
</td>
</tr>
<tr>
 <td>Image URL</td>
 <td>
 @Html.EditorFor(model => model.Photo.URL)
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T23:42:05.933

我测试了你的问题并遇到了同样的问题。

```
List<string> a = new List<string>{ "a" };
List<string> b = new List<string>{ "b" };

IEnumerable<string> concat = a.Concat<string>(b);
foreach(string s in concat) { } // this works

return View(concat); 
```

鉴于：

```
@model IEnumerable<string>

@foreach(string s in Model)  //This blows up
{
}
@Html.EditorFor(m => Model) //Also blows up 
```

看起来你真的不能使用模板或枚举

```
System.Linq.Enumerable.ConcatIterator<T> 
```

`Concat`在视图中创建的类。这似乎是一个错误。

无论如何添加可以`.ToList()`解决您的问题。

```
return View(concat.ToList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:57:12.180

如果您想使用编辑器模板，为什么要编写`foreach`循环？你根本不需要这个循环。只需编写以下内容并摆脱`foreach`：

```
@Html.EditorFor(x => x.AllAddresses) 
```

然后你显然会有一个相应的编辑器模板，ASP.NET MVC 会自动为`AllAddresses`集合的每个元素呈现，这样你就不需要在你的视图中编写任何 foreach 循环（`~/Views/Shared/EditorTemplates/Address.cshtml`）：

```
@model Address
... 
```

# ms-access - How can I count all the NULL values in all columns in an Access 2010 table?

> ID：10555414
> 
> 赞同：1
> 
> 时间：2012-05-11T16:43:18.353
> 
> 标签：ms-access, ms-access-2010

I need to be able to count all the NULLS in all columns of an Access 2010 table. what I mean by that specifically, is that of the 30 columns (fields) there are loads of records with partial data.

I want to count in the entire table how many are empty.

I read the article on this site titled, How to count all NULL values in table, but that referred to SQL and also, was, I am sorry to admit too complex for me.

Anyone got any futher clues?

:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:42:30.160

对于单个字段，您可以使用简单查询。

```
SELECT Count(*) AS CountOfNulls
FROM MyTable
WHERE some_field Is Null; 
```

如果要在单个查询中分别计算多个字段的 Null，可以执行以下操作：

```
SELECT
    Sum(IIf(some_field Is Null, 1, 0)) AS NullsIn_some_field,
    Sum(IIf(another_field Is Null, 1, 0)) AS NullsIn_another_field
FROM MyTable; 
```

如果您想要所有 Null 的总计，而不是每列的计数，您可以将前一个查询用作子查询并将各个列计数相加。

```
SELECT base.NullsIn_some_field + base.NullsIn_another_field AS total_nulls
FROM
    (
        SELECT
            Sum(IIf(some_field Is Null, 1, 0)) AS NullsIn_some_field,
            Sum(IIf(another_field Is Null, 1, 0)) AS NullsIn_another_field
        FROM MyTable
    ) AS base; 
```

OTOH，如果您希望完全避免使用 SQL，或者只是觉得这些语句太复杂，则不需要使用 SQL。您可以`DCount()`在 VBA 过程中使用该函数。

使用数据库中表的名称在“立即”窗口中运行以下过程：

```
HowManyNulls "YourTable" 
```

`CTRL`您可以使用+`g`键盘快捷键转到“立即”窗口。

```
Public Sub HowManyNulls(ByVal pTable As String)
    Dim db As DAO.Database
    Dim fld As DAO.Field
    Dim tdf As DAO.TableDef
    Dim lngNulls As Long
    Dim lngTotal As Long

    Set db = CurrentDb
    Set tdf = db.TableDefs(pTable)
    For Each fld In tdf.Fields
        'lngNulls = DCount("*", pTable, fld.Name & " Is Null")
        ' accommodate field names which need bracketing ...
        lngNulls = DCount("*", pTable, "[" & fld.Name & "] Is Null")
        lngTotal = lngTotal + lngNulls
        Debug.Print fld.Name, lngNulls
    Next fld
    Debug.Print "Grand total", lngTotal
    Set fld = Nothing
    Set tdf = Nothing
    Set db = Nothing
End Sub 
```

如果这些建议都不令人满意，请修改您的问题以帮助我们更好地了解您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:31:35.500

当您事先不知道列名时，没有简单的方法可以跨表的“所有列”执行这种计数。

如果你想这样做，你必须编写一个程序来读取数据库的“元数据”，从该数据中提取列和表的列表，为每一列构建一个单独的 SQL 语句，然后执行该语句并添加您可以返回找到的 NULL 值的运行总数。

这听起来像是您可能考虑追求的东西吗？如果是这样，您应该搜索有关获取 MS Access 数据库中的表列表和获取 Access 数据库中表的列列表的解决方案，然后将该信息与您已经从有关计算 NULL 的问题中获得的信息相结合在一列中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-30T18:38:25.680

要计算所有列的表中的空值：

```
select count(*) from(select a from tt where a is  null
              union all
            select b from tt   where b is  null
              union all
            select c from tt where c is  null) 
```

# java - Should i use null for the ImageObserver parameter of the Graphics.drawImage() function?

> ID：10555415
> 
> 赞同：1
> 
> 时间：2012-05-11T16:43:18.917
> 
> 标签：java, image, graphics, awt, drawimage

I have the following variables: `Image avatar;` and `URL url;`

In the constructor, I set:

```
this.url = new URL("http://www.robottiger.com/user.PNG"); 
```

and

```
this.avatar = ImageIO.read(url); 
```

Then in..

```
public void paint (Graphics g) 
```

..is it correct to use the following?

```
g.drawImage(avatar, 20, 410, null); 
```

Or should the `null` be `this` instead?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:58:21.923

第四个参数是观察者，当更多图像被转换时要通知的对象。它可以完全为空，假设只有在异步获取 Image 参数时它才真正有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:30:38.087

与其他两个回复相比，我建议如果您有一个`ImageObserver`，请**使用它**，并且不要假设图像是同步加载（例如[`ImageIO.read(URL)`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#read%28java.net.URL%29)）、异步加载（例如[`Toolkit.createImage(URL)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#createImage%28java.net.URL%29)）还是在内存中生成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T16:59:55.573

您所指的构造函数`drawImage()`如下：

```
public abstract boolean drawImage(Image img, int x, int y, ImageObserver observer) 
```

第四个参数只是图像观察者，`object to be notified as more of the image is converted.`所以它可以为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-29T15:06:37.960

如果您`Image`通过网络加载（不是从文件系统加载，也不是由程序构建）并且没有明确等待加载，则需要使用 an`ImageObserver`来确保完全绘制`Image`. 除此之外 - 只需使用 null。应该没问题。

# java - Why am I getting conversion exception in this code for xstream?

> ID：10555421
> 
> 赞同：0
> 
> 时间：2012-05-11T16:43:41.713
> 
> 标签：java, xml, xml-serialization, xstream

I've the following test code which is not working.

```
 XStream xStream = new XStream(new DomDriver());
    xStream.alias(clazz.getName(), clazz);
    String test="<list><Person><lastname>abcd</lastname><phone><code>123</code><number>1234-456</number></phone><fax><code>123</code><number>9999-999</number></fax></Person></list>";
    Object object = xStream.fromXML(test);

    clazz=Arraylist.class 
```

Exception Information:

```
com.thoughtworks.xstream.converters.ConversionException: Person : Person : Person : Person
---- Debugging information ----
message             : Person : Person
cause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException
cause-message       : Person : Person
class               : java.util.ArrayList
required-type       : java.util.ArrayList
path                : /list/Person 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:47:31.293

XStream 似乎不知道是什么`Person`，这是有道理的，因为您没有在任何地方给它起别名。

尝试添加

```
xStream.alias("Person", Person.class); 
```

# blackberry - 黑莓：BB 5.0 操作系统/更低版本如BB 粗体3 中数据未完全显示

> ID：10555424
> 
> 赞同：0
> 
> 时间：2012-05-11T16:44:06.270
> 
> 标签：blackberry

我开发了一个应用程序，它在 OS6（操作系统 6）上运行良好，但在 OS5（JDK 5.0）上运行不佳。主要问题是我通过 JSON 获取数据并在屏幕上显示多个标签以显示数据，但垂直滚动不允许用户向下滚动超过某个点。这让我想知道 OS5 中的屏幕是否允许在其上绘制有限的内容。片段代码如下所示

```
JSONArray json = new JSONArray(result);

for (int i = 0; i < json.length(); ++i) 
{
    JSONObject moleculevalue = json.getJSONObject(i);//get the json data object

    String tdescription = moleculevalue.getString("Total Description");

   if (tdescription == "") tdescription = "Not Applicable";              

   _fieldManagerMiddle.add(new SeparatorField());
   _fieldManagerMiddle.add(new LabelField("Description: " + tdescription, Field.FIELD_HCENTER));

} 
```

数据仍然存在，但用户无法在屏幕视图下方滚动。

谁能告诉我解决方法以及可能的原因。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:58:50.593

找到的解决方案：我发现这是触摸设备与非触摸设备的问题。因此，对于非触摸设备，需要通过以下方式将标签控件设置为可聚焦

改变

```
_fieldManagerMiddle.add(new LabelField("Description: " + tdescription, Field.FIELD_HCENTER)); 
```

到

```
_fieldManagerMiddle.add(new LabelField("Description: " + tdescription, Field.FIELD_HCENTER|Field.Focusable)); 
```

# php - jquery上传完成后重定向到新页面

> ID：10555429
> 
> 赞同：2
> 
> 时间：2012-05-11T16:44:19.673
> 
> 标签：php, javascript, jquery, jquery-ui, jquery-plugins

我正在尝试让这个 jquery 工具与我的网站一起使用以进行文件上传：[https](https://github.com/blueimp/jQuery-File-Upload) ://github.com/blueimp/jQuery-File-Upload ，并且我大部分时间都在使用它。我遇到的唯一问题是试图找到一个可以将其重定向到新页面以显示上传结果的地方，而不是在同一页面上显示它们。我希望用户可以选择使用他们刚刚上传的图像和文件进行操作，并且新页面比一遍又一遍地使用同一页面更有意义......

任何人都可以从理解文档/代码中的某些内容的经验中告诉我，我没有掌握如何做到这一点？谢谢 :) 请注意，我希望页面在所有上传结束时重定向，而不是在第一个之后重定向，如果还有四个。我会将数据存储在 PHP 会话中，以便在下一页访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:49:11.673

应该是这样的（在这种情况下重定向到*[http://stackoverflow.com](http://stackoverflow.com)*）：

```
<script>
$(function () {
    $('#fileupload').bind('fileuploadstop', function (e) {/* ... */});

});
</script> 
```

查看[文档](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:12:52.170

```
<script>
$(function () {
    $('#fileupload').fileupload({
        // ... additional parameters
        complete: function (e, data) {
            window.location = "http://www.stackoverflow.com";
        }
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:51:24.280

该插件有一个名为`onComplete`and的事件`onCompleteAll`。使用它们。

# ruby-on-rails - Mass assignment error with nested fields_for

> ID：10555431
> 
> 赞同：1
> 
> 时间：2012-05-11T16:44:43.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, mass-assignment

I know this question has been asked a bunch of times. I already have nested `fields_for` in my app many times w/o issue so I'm confused as to why its not working this time. I apologize for bringing this topic up again.

I have a user model. A user can have many accounts. To prevent a user from existing w/o at least one account I have a `semantic_fields_for` nested in the new user form with just one input for setting account `role_id`.

### class User

```
 attr_accessible :accounts_attributes
    has_many :accounts, :dependent => :destroy
    accepts_nested_attributes_for :accounts 
```

### class Account

```
 attr_accessible :role_id, :user_id, :status
    belongs_to :role
    belongs_to :user 
```

### users/new

```
 <%= f.semantic_fields_for :accounts do |account| %>
    <%= account.input :role, :as => :select, :collection => @roles, :label => "Account" %>
    <% end %> 
```

So, to recap: I have the association set up between users and accounts, users model includes `accepts_nested_attributes_for`, users model includes `attr_accessible :accounts_attributes`, `semantic_fields_for` is set up correctly. The error I get is:

> Can't mass-assign protected attributes: accounts

The stack trace from the submitted form includes all the correct variables. Account `role_id` is being set correctly by the nested attribute. The record is simply being rejected for mass-assignment error but it sure seems my attributes are all properly protected.

Using Rails 3.2.3 and Formtastic 2.2.

EDITED

**class UsersController**

def new

```
 @user = User.new         
  @user.accounts.build 
```

end

**users/new**

```
 <%= semantic_form_for :user, :url => users_path do |f| -%>

    <%= f.inputs do %>
        <%= f.input :name %>
        <%= f.input :username %>
    <%= f.input :email %>   
        <%= f.input :password, :as => :password %>
        <%= f.input :password_confirmation, :label => "Confirm Password", :as => :password %>
    <%= f.input :school_id, :as => :hidden, :input_html => {:value => @school.id} %>        

        <%= f.semantic_fields_for :accounts do |account| %>
          <%= account.input :role_id, :as => :select, :collection => @roles %>
        <% end %>

    <%- end -%> <%# END f.inputs do %>
      <%= submit_tag 'Create User', :class => "button" %>
    <%- end -%> <%# END form %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:08:53.350

知道了！！我删除了 :url => 并在 semantic_form_for 块中将 :user 更改为 @user ......我猜我的方式是导致 params[:account] 引发批量分配

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T17:23:54.567

尝试将此添加到您的用户类

```
attr_accessible :accounts_attributes 
```

# django - Adding django-directupload to Django project

> ID：10555433
> 
> 赞同：0
> 
> 时间：2012-05-11T16:44:52.887
> 
> 标签：django, installation

I was looking to try [django-directupload](https://github.com/cuker/django-directupload#readme) in one of my Django projects, but I'm new to Django and having some trouble with installation. I'm following the installation instructions in the README. I installed django-directupload using `sudo pip install django-directupload`.

Here is my urls.py, which I don't think is right:

```
from django.conf.urls.defaults import patterns, include, url
from testproject import settings

import directupload
from django.contrib import admin
directupload.admin.patch_admin()
admin.autodiscover()

urlpatterns = patterns('testproject.database.views',
    url(r'^(\d+)/$', 'test_view', name="test_page"),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^directupload/', include(directupload.urls))
)

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

**Edit:**
So I've gained some insight into overriding admin templates (Thanks ilvar for the link). I copied and pasted the `contrib/admin/templates/admin/change_form.html` file into the project templates directory in the `/admin/nameofmyapp/` subdirectory, and added `{% load directupload_tags %}{% directupload_head %}` below the rest of the load tags. When I go to the Django admin I get the exception: `'module' object has no attribute 'admin'` on line 6 of `urls.py`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:21:29.503

urls.py 应该是这样的：

```
from django.conf.urls.defaults import patterns, include, url
from testproject import settings

from directupload.admin import patch_admin
from django.contrib import admin
patch_admin()
admin.autodiscover()

urlpatterns = patterns('testproject.database.views',
    url(r'^(\d+)/$', 'test_view', name="test_page"),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^directupload/', include(directupload.urls))
)

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

我的导入不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T21:19:33.660

[https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#overriding-admin-templates](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#overriding-admin-templates)

# python - Rewrite two methods as one in Python

> ID：10555437
> 
> 赞同：1
> 
> 时间：2012-05-11T16:45:00.540
> 
> 标签：python, polymorphism

Imagine I have the following two methods:

```
 def function(self, my_object):
     self.things.add(my_object)

 def function_args(self, arg1, arg2, arg3 = None):
     my_object = MyObject(arg1, arg2, arg3)
     self.things.add(my_object) 
```

I would like to write this as a single function that can be called with positional parameters:

```
 something.function(an_object)
 something.function(arg1, arg2, arg3) 
```

I can see how to do it if I'm willing to always call the resulting function with keyword arguments, and I can see how to do it if I'm willing to change the signature of the second function to accept a list or tuple of the three arguments, so that each version has single argument and I can differentiate by type (which doesn't seem quite right in Python).

Can I cleanly write a single function that will allow me to call it with either set of positional arguments?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:51:56.790

为什么不将 arg2 设置为可选并在调用函数时检查它？

```
 def function_args(self, arg1, arg2 = None, arg3 = None):
     if arg2 != None:
       my_object = MyObject(arg1, arg2, arg3)
       self.things.add(my_object)
     else:
       self.things.add(arg1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:58:59.370

我不会把这个想法称为非常pythonic，但这样的事情会起作用：

```
def fun(*args):
    obj = args[0]
    if not isinstance(obj, MyClass):
        obj = MyClass(*args) 
```

我们不知道您的 API 是什么，但由于您在评论中提到了对象重用，也许您可​​以使其对最终用户透明，例如：

```
def fun(arg1, arg2, arg3=None):
    key = arg1 + arg2 + arg3
    if key not in cache:
        cache[key] = MyClass(arg1, arg2, arg3)
    obj = cache[key]
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:52:21.463

```
def function(self, *args, my_object=None)
    if my_object is None:
        my_object =  MyObject(*args)
    self.things.add(my_object) 
```

这要求您将 my_object 作为关键字参数传递，但 IMO 这正是您想要的，因为它暗示了所涉及的魔法。

如果您真的不想要关键字参数，请将其删除，然后检查 len(args) 是否有分支。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T17:32:21.910

> 我可以干净地编写一个允许我使用任意一组位置参数调用它的函数吗？

我不这么认为。但这是另一个接近接近的尝试。

```
def fn(self, a, *args):
    if args:
        self.things.add(MyObject(*((a,) + args)))
    else:
        self.things.add(a) 
```

# java - Why would ".contains" return false for objects pulled directly from a collection?

> ID：10555439
> 
> 赞同：4
> 
> 时间：2012-05-11T16:45:01.503
> 
> 标签：java, collections, ormlite

```
private Collection<Episode> episodes = new ArrayList<Episode>();

public void checkEpisodes(String string) {
    for(Episode episode : this.episodes){
        System.out.println(string + this.episodes.contains(episode));
    }
} 
```

Why would the above code print false?

I'm using a collection because that's what ormlite allows. I think the issue may be caused by ormlite anyways, because a very similar class has an identical method that prints true.

What I'm trying to do is modify an object returned by:

```
public Episode findEpisode(int num) {
    checkEpisodes("Find: ");
    for(Episode episode : this.episodes) {
        if(episode.getNumber()==num) {
            return episode;
        }
    }
    return null;
} 
```

But modification of that object isn't saved. I'm assuming because it's not contained within the Collection.

My solution, which works but isn't ideal:

```
public void modifyEpisode(Episode episode) {
    checkEpisodes("Modify: ");
    for (Iterator<?> it = this.episodes.iterator(); it.hasNext();) {
        if (((Episode) it.next()).getNumber()==episode.getNumber()) {
            it.remove();
            addEpisode(episode.getNumber(), episode.getLink(), episode.getLinkLabel());
        }
    }
} 
```

If you need to see more of my code, just ask, the project is somewhat involved, but it's hosted on sourceforge and I can post a link to it if necessary.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T16:47:57.970

```
for(Episode episode : this.episodes) {
    System.out.println(string + this.episodes.contains(episode));
} 
```

> 为什么上面的代码会打印错误？

在一般意义上，使用标准集合是我可以查看您的方法中是否存在错误的唯一`equals()`方法。对于大多数集合，`contains()`遍历集合并使用`equals()`. 这`Object.equals()`会起作用，因此可能是您已经覆盖了默认`equals`方法并且其中存在错误。

这也是[ORMLite](http://ormlite.com/)所做的。如果集合是*急切*的，那么它会调用要使用的项目`contains()`的内部。如果集合是*惰性*的，那么它会使用遍历表的迭代器，并再次使用来查看是否匹配。`ArrayList``equals()`*`equals()`*

 ***编辑：**

啊哈。您声明您没有覆盖该`equals()`方法。

要记住的一件重要的事情（就 ORMLite 而言）是这是一个*惰性*集合，内存中没有对象的存储。当您遍历惰性集合时，您会`Episode`从数据库中获取对象的一个​​实例。然后，当您调用 时`contains()`，它会*再次*遍历从数据库创建新`Episode`对象的集合。它会尝试比较两个对象，但如果您正在使用它们，它们将*永远不会*相等，`Object.equals()`因为*没有*相同的对象引用。

您*必须*重写该`equals()`方法才能`contains()`为惰性集合工作。

此外，尽管您的帖子可能是对代码的简化，但您可能会考虑将惰性集合拉入一个数组，然后对其进行迭代。您不能`contains()`对数组执行 a 操作，但如果您需要搜索数组，则不会在数据库中迭代两次。

**编辑：**

所以解决方案变得更加复杂。原来，OP 有一个`Show` 对象，带有急切的对​​象集合`Season`，每个对象都有另一个急切的`Episode`对象集合。默认情况下，只要 ORMLite 嵌套了 Eager集合，出于性能原因，内部集合就会变成*惰性集合。*不幸的是，这在 4.40 版中没有得到很好的记录。您可以通过在对象的集合上设置`maxEagerLevel = 2`（或更多）来更改此设置。`Show`请参阅 上的[文档`maxEagerLevel`](http://ormlite.com/docs/max-eager)。

```
@ForeignCollectionField(eager = false, maxEagerLevel = 2)
ForeignCollection<Season> seasons; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:01:48.007

现在，对象关系映射器 ormlite 管理对象及其修改状态。它还提供了保存修改后的情节的方法；您提到的要点之一。但关于错误：您应该根据值**创建一个 equals 。**在 ORM 和类似的托管库中，您的序列化可能会为您提供同一对象的不同实例/代理，并且对方法的访问可能会被字节码操作 (AOP) 拦截。

[修改](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_2.html#SEC30)示例：

```
for (Order order : account.orders()) {
    // if we are changing some field in the order
    order.setAmount(123);
    // then we need to update it in the database
    account.orders.update(order);
} 
```*

# html - Centering position:absolute div within parent position:relative div

> ID：10555441
> 
> 赞同：2
> 
> 时间：2012-05-11T16:45:23.040
> 
> 标签：html, css, positioning, css-position

Re: [http://jsfiddle.net/WdGdd/3/](http://jsfiddle.net/WdGdd/3/)

Is it possible to center a position:absolute div in its parent position:relative div?

The idea is to make a button whose text is one of two values. Its width stays the length of the whichever value is longer. When the shorter of the two values is being displayed, the text is centered in the button. I don't want to specify any widths in px.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:54:22.550

您不能将#op2 的CSS 更改为：

```
#op2 {
  position: absolute;
  top: 0;
  width:100%;
  text-align:center;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/WdGdd/5/)**。

# android - java.lang.ClassNotFoundException for activity that is defined in manifest and in code

> ID：10555442
> 
> 赞同：0
> 
> 时间：2012-05-11T16:45:24.967
> 
> 标签：android

i have this error every time i run my application , anyone know why ?

and this is my manifest file

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.temp.pk"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ui.TabsActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

```
04-14 14:35:36.133: E/AndroidRuntime(516): FATAL EXCEPTION: main
04-14 14:35:36.133: E/AndroidRuntime(516): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.temp.pk/com.temp.pk.ui.TabsActivity}: java.lang.ClassNotFoundException: com.temp.pk.ui.TabsActivity in loader dalvik.system.PathClassLoader[/data/app/com.temp.pk-1.apk]
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.os.Looper.loop(Looper.java:123)
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-14 14:35:36.133: E/AndroidRuntime(516):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 14:35:36.133: E/AndroidRuntime(516):  at java.lang.reflect.Method.invoke(Method.java:507)
04-14 14:35:36.133: E/AndroidRuntime(516):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-14 14:35:36.133: E/AndroidRuntime(516):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-14 14:35:36.133: E/AndroidRuntime(516):  at dalvik.system.NativeStart.main(Native Method)
04-14 14:35:36.133: E/AndroidRuntime(516): Caused by: java.lang.ClassNotFoundException: com.temp.pk.ui.TabsActivity in loader dalvik.system.PathClassLoader[/data/app/com.temp.pk-1.apk]
04-14 14:35:36.133: E/AndroidRuntime(516):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-14 14:35:36.133: E/AndroidRuntime(516):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-14 14:35:36.133: E/AndroidRuntime(516):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-14 14:35:36.133: E/AndroidRuntime(516):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
04-14 14:35:36.133: E/AndroidRuntime(516):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:47:44.903

利用

```
<activity
            android:name=".TabsActivity"
            android:label="@string/app_name" > 
```

**编辑：**或者你可以使用：

```
 <activity 
      android:name="FULL_PACKAGE_NAME.TabsActivity"
      android:label="@string/app_name" > 
```

代替

```
<activity
            android:name=".ui.TabsActivity"
            android:label="@string/app_name" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:49:42.520

你没有显示任何代码，所以我在这里猜测一下。也许应该是`android:name=".TabsActivity"`？

# jquery - slim box image gallery doesnt work in ie9

> ID：10555443
> 
> 赞同：1
> 
> 时间：2012-05-11T16:45:27.393
> 
> 标签：jquery, css, internet-explorer, slimbox

I'm using [slimbox2](http://www.digitalia.be/software/slimbox2) to create a [image gallery](http://www.georgiadis.biz/newsite/creations.php). It currently works great on Firefox and other browsers, but in IE9 the hidden div does is not displayed, causing the image titles to not be clickable and the gallery to break. I don't know if this is a problem in earlier versions of IE.

[The gallery](http://www.georgiadis.biz/newsite/creations.php)

Any help will be deeply appreciated.

# asp.net-mvc-3 - mvc3 razor editortemplate with abstract classes

> ID：10555448
> 
> 赞同：5
> 
> 时间：2012-05-11T16:45:52.560
> 
> 标签：asp.net-mvc-3, razor, mvc-editor-templates

this is a follow up question from [MVC3 Razor httppost return complex objects child collections](https://stackoverflow.com/questions/10550486/mvc3-razor-httppost-return-complex-objects-child-collections).

The example I gave was very simple. The child collection is actually a collection of objects that all come from an abstract base class. So the collection has a list of base classes.

I have created a template for each derived class and tried using if child is of type then give the template name as a string. The templates are rendered to the view but not populated on the post back.

I am not sure how I use the editorfor bit with the templates to choose the correct template and get the information to be marshalled back into the child objects within the parent container.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T17:15:03.933

您可以使用自定义模型绑定器。让我们举个例子。

模型：

```
public class MyViewModel
{
    public IList<BaseClass> Children { get; set; }
}

public abstract class BaseClass
{
    public int Id { get; set; }

    [HiddenInput(DisplayValue = false)]
    public string ModelType
    {
        get { return GetType().FullName; }
    }
}

public class Derived1 : BaseClass
{
    public string Derived1Property { get; set; }
}

public class Derived2 : BaseClass
{
    public string Derived2Property { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            Children = new BaseClass[]
            {
                new Derived1 { Id = 1, Derived1Property = "prop1" },
                new Derived2 { Id = 2, Derived2Property = "prop2" },
            }
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        // everything will be fine and dandy here
        ...
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
@model MyViewModel

@using (Html.BeginForm())
{
    for (int i = 0; i < Model.Children.Count; i++)
    {
        @Html.EditorFor(x => x.Children[i].ModelType)
        <div>
            @Html.EditorFor(x => x.Children[i].Id)
            @Html.EditorFor(x => x.Children[i])    
        </div>
    }

    <button type="submit">OK</button>
} 
```

`Dervied1`类型 ( )的编辑器模板`~/Views/Home/EditorTemplates/Derived1.cshtml`：

```
@model Derived1
@Html.EditorFor(x => x.Derived1Property) 
```

以及`Dervied2`类型 ( `~/Views/Home/EditorTemplates/Derived2.cshtml`) 的编辑器模板：

```
@model Derived2
@Html.EditorFor(x => x.Derived2Property) 
```

现在剩下的就是一个自定义模型绑定器，它将使用隐藏字段值来实例化集合中的正确类型：

```
public class BaseClassModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        var typeValue = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".ModelType");
        var type = Type.GetType(
            (string)typeValue.ConvertTo(typeof(string)),
            true
        );
        var model = Activator.CreateInstance(type);
        bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => model, type);
        return model;
    }
} 
```

将在以下位置注册`Application_Start`：

```
ModelBinders.Binders.Add(typeof(BaseClass), new BaseClassModelBinder()); 
```

# javascript - 如何在 ASP.NET 应用程序的手风琴 div 中加载部分视图？

> ID：10555451
> 
> 赞同：4
> 
> 时间：2012-05-11T16:46:20.023
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, accordion

所以目前，我有页面加载这个：

```
 <div class="accordion">
        <h2><a href="#">Pending Flyers</a></h2>
        <div id="flyers-0" class="accordion-item"><% Html.RenderPartial("ManageFlyers", new { flyers = pendingFlyersWithCategory }); %></div>
        <h2><a href="#">Approved Flyers</a></h2>
        <div id="flyers-1" class="accordion-item"><% Html.RenderPartial("ManageFlyers", new  { flyers = approvedFlyersWithCategory }); %></div>
        <h2><a href="#">Denied Flyers</a></h2>
        <div id="flyers-2" class="accordion-item"><% Html.RenderPartial("ManageFlyers", new  { flyers = deniedFlyersWithCategory }); %></div>
        <h2><a href="#">Published Flyers</a></h2>
        <div id="flyers-3" class="accordion-item"><% Html.RenderPartial("ManageFlyers", new  { flyers = publishedFlyersWithCategory }); %></div>
        <h2><a href="#">Expired Flyers</a></h2>
        <div id="flyers-4" class="accordion-item"><% Html.RenderPartial("ManageFlyers", new  { flyers = expiredFlyersWithCategory }); %></div>
    </div> 
```

用这个java脚本来做手风琴的东西：

```
<script language="javascript" type="text/javascript">
    if ($('.accordion').length > 0) {
        $('.accordion-item').hide();
        $('.accordion-selected').show();

        $('.accordion h2').click(function () {
            $(this).next('.accordion-item').slideToggle('slow');
        });

        $('.accordion h2 a').click(function () {
            var element = $(this).parent().next('.accordion-item');
            element.slideToggle('slow');
            return false;
        });
    }
 </script>
 <script type="text/javascript">
     $(document).ready(function () {

         // Accordian state restore
         var accord = '<%= Session["accordianIndex"] %>';
         var currentindex = 0;

         if (accord != "") {
             currentindex = accord;
         }

         $("#flyers-" + currentindex).slideToggle("slow");
         // end Accordian state restore
     });

     $("div.description").expander({
         slicePoint: 200
     });
</script> 
```

我想将其设置为使用 AJAX 加载部分视图并在手风琴的那部分展开时插入它们，以加快页面的初始加载。

我已经尝试过`<%= Ajax.ActionLink ... %>`和 javascript 来加载它，但我无法让它工作。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:24:17.180

如果您为这些部分设置控制器操作 (PartialViewResult)，您可以使用 jQuery $.ajax 调用加载它们。你会写类似

```
$.ajax({ url: /controller/Action, data: {stuff} }); 
```

当您切换手风琴时，这种方法可以让您抵消您在点击方法或其他事件中描述的加载时间。

**更新**：

如果您已经拥有此页面的本地数据，我建议您执行类似[Handlebars](http://handlebarsjs.com/)模板之类的操作，只需 $("div").append() 将数据添加到您所在的页面，其中 div 是您要包含的选择器中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:26:30.463

好吧，当请求数据时它并没有完全做到这一点，但是我改变了一些东西，并且能够通过执行以下操作来获得所需的功能：

在`$(document).ready(function() { ... });`我用过的

```
$('#flyers-0').load('<%= Url.Action("ManageFlyers", new { stuff }) %>'); 
```

对于每个手风琴标签。所以现在页面最初加载得更快，然后在加载数据时填充 div。如果在加载数据之前没有打开 div，他们不会知道它做了任何背景工作，否则它只会说“正在加载......”并很快被填写。

# excel - 强制另存为，MS Excel VBA

> ID：10555456
> 
> 赞同：4
> 
> 时间：2012-05-11T16:46:33.027
> 
> 标签：excel, vba

我对 MS Office 产品中的 VBA 有点陌生。我一直在寻找一些代码，这些代码将强制用户“另存为”我用作模板的 .xls 文件（但它不是实际的模板文件类型）

基本上，我有这个：

1.  用户打开 .xls，在某个字段中输入一些数据，然后将 File-->Save As 保存到他们自己的位置
2.  有时用户会点击保存，因此会覆盖我不希望发生的 .xls。

我一直在研究一些想法，但我不确定如何最好地实施它。我认为当用户第一次打开 .xls 以保存到新位置时提示是最好的方法，但是向前考虑，如果他们已经将文件保存到新位置并决定编辑新位置，我希望他们那时能够“保存”，因为现在它是他们自己的文件，而不是原始文件。

如果有人能指出我正确的方向或发现我的逻辑缺陷，我很想听听。

谢谢，迈克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T19:47:49.990

> 我用作模板（但它不是实际的模板文件类型）

最简单的方法是保存文件并将其`Read-Only Recommended`设置为 true。查看快照

![在此处输入图像描述](../Images/f93eb18e20daba9ef1dce96542bc4716.png)

这样，即使用户尝试执行 a `Save`，Excel 也会自动提示输入`Save As`

![在此处输入图像描述](../Images/90a40296d8c719d769b935fcdc126bb1.png)

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T19:51:24.463

我同意其他人的观点，即模板和只读是更好的选择，但如果您打算自己动手，这里有一个示例可以帮助您入门。它进入 ThisWorkbook 模块

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

    Dim sNewName As String

    Cancel = True 'Cancel the save operation

    sNewName = Application.GetSaveAsFilename(Replace(Me.Name, ".xls", "1.xls"))

    If sNewName <> Me.FullName And sNewName <> "False" Then
        Application.EnableEvents = False
            Me.SaveAs sNewName
        Application.EnableEvents = True
    End If

End Sub 
```

# apache-flex - 是否有在 Flash CS 和 Flex 中加载 SWF 的通用代码？

> ID：10555458
> 
> 赞同：0
> 
> 时间：2012-05-11T16:46:41.060
> 
> 标签：apache-flex, load, flash, flash-cs5

似乎在 Flash 中，您可以使用**Loader 加载**SWF（CS 构建） 。要在 Flex 中加载相同的（CS 构建的）SWF，您需要**SWFLoader**。

问题是，我正在创建一个 SWF 加载框架，我希望它能够与 Flash CS 和 Flex 交叉兼容。这是可能的，还是我需要 2 个版本的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:44:42.367

是的，可以在（至少）CS5.5 中使用 SWFLoader 类；您需要下载 Flex SDK 并声明 Flex 库以在创作工具中使用。

换句话说，您必须在“库路径”中添加此路径： ...\flexsdk\frameworks\libs

那么你就可以在 CS5.5 中使用所有的 Flex 库了。

# javascript - jQuery醉意坏了

> ID：10555459
> 
> 赞同：2
> 
> 时间：2012-05-11T16:46:41.927
> 
> 标签：javascript, jquery

帮助！我需要帮助来设置醉酒，我之前有它工作，但现在它在这里不工作是我的网站[http://timothy.techbytbone.com/](http://timothy.techbytbone.com/)

js：

```
$(function () {
$('.info').tipsy({fade:true, gravity:'s', fallback:'Click on me to run the color animation.'});
$('.info2').tipsy({fade:true, gravity:'s', fallback:'Also you get the Invite feature under the Menu.'});
$('.info3').tipsy({fade:true, gravity:'s', fallback:'Bible application.'});
$('.info4').tipsy({fade:true, gravity:'s', fallback:'White board application.'});
$('.info5').tipsy({fade:true, gravity:'s', fallback:'Pac Man game.'});
$('.info6').tipsy({fade:true, gravity:'s', fallback:'Pong game.'});
$('.info7').tipsy({fade:true, gravity:'s', fallback:'Space Invaders game.'});
$('.info8').tipsy({fade:true, gravity:'s', fallback:'Click on a button to change the website color.'});
$('.info9').tipsy({fade:true, gravity:'w', fallback:'Page views counter'});
$('.info10').tipsy({fade:true, gravity:'s', fallback:'No way! you found the portal to my secret site!'});
$('.info11').tipsy({fade:true, gravity:'s', fallback:'Click me to see the time.'});
$('.info12').tipsy({fade:true, gravity:'s', fallback:'Click me to open a popup whiteboard.'});
}); 
```

链接：（包括jquery和我的js文件链接）

```
<script type="text/javascript" src="../js/libs/jquery-1.4.2.min.js"></script>
<link rel="stylesheet" href="../css/tipsy.css" type="text/css"/>
<link rel="stylesheet" href="../css/tipsy-docs.css" type="text/css"/>
<script type="text/javascript" src="../js/jquery.tipsy.js"></script>
<script src="../js/mainjs.js" type="text/javascript"></script>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<link type="text/css" href="../jquery-ui-1.8.20.custom/css/ui-lightness/jquery-ui-1.8.20.custom.css" rel="stylesheet" />
<script type="text/javascript" src="../jquery-ui-1.8.20.custom/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="../jquery-ui-1.8.20.custom/js/jquery-ui-1.8.20.custom.min.js"></script>
<link rel="stylesheet" href="../jquery-ui-1.8.20.custom/development-bundle/themes/base/jquery.ui.all.css"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:09:14.077

我们已经回答了这个我正在加载 2 个版本的 jquery，这是一个问题......

# php - 用表 2 更新表 1，然后截断表 2

> ID：10555462
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:46:59.117
> 
> 标签：php, mysql, join, truncate

*正如我在另一个查询中发布的那样，我有一个包含推文的 MYSQL 表，并使用 PHP 来填充它。为了确保没有重复的帖子，它会在更新之前检查表中的最后一个 ID，我认为这就是为什么当试图让它检查 retweet_count 时它会失败（它忽略了已经存储的推文）。*

我的解决方法是使用相同的脚本来填充第二个表，然后运行以下两个 SQL 命令：

```
 UPDATE table1 JOIN table2 ON table2.col1 = table1.col1 SET table1.col2 = table2.col2; 
```

其次是

```
 TRUNCATE TABLE table2; 
```

它更新第一个表，然后清空（不删除，只是截断）第二个表，以便我可以重复。

问题是如何用 PHP 编写这样的 JOIN 命令，然后再执行 TRUNCATE 命令？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:22:26.210

您的建议 - 在生产系统中定期使用 truncate 存储冗余数据和清理 - 不是最好的方法。

相反，我建议您考虑关闭自动提交并使用 START TRANSACTION、COMMIT 和可选的 ROLL BACK (http://dev.mysql.com/doc/refman/5.1/en/commit.html)。

您会看到，您可以创建一个同时执行多项操作的工作单元，而不必依赖您所提议的内容。

# c++ - std::function -> 函数指针

> ID：10555464
> 
> 赞同：11
> 
> 时间：2012-05-11T16:47:01.320
> 
> 标签：c++, bind, functor

这是一个代码：

```
#include <functional>
using namespace std::tr1;

typedef void(*fp)(void);

void foo(void)
{

}

void f(fp)
{

}

int main()
{
  function<void(void)> fun = foo;
  f(fun); // error
  f(foo); // ok
} 
```

最初我需要从非静态类方法中创建一个函数指针，因为我需要在函数调用之间保存数据。我试过`std::tr1::bind`and `boost::bind`，但它们返回的是函数对象，而不是指针，正如我所见，它不能“强制转换”为纯函数指针。而函数签名 ( `SetupIterateCabinet`) 恰好需要一个纯 func 指针。

我需要一个建议如何解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T16:51:14.330

您不能将 a 转换`std::function`为函数指针（您可以做相反的事情）。您应该使用函数指针或`std::function`s。如果你可以使用`std::function`而不是指针，那么你应该。

这使您的代码工作：

```
typedef function<void(void)> fp; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T17:01:39.017

您大大简化了您的实际问题，并将您的问题变成了[XY 问题](https://meta.stackexchange.com/a/66378/166663)。让我们回到您*真正的*问题：如何[`SetupIterateCabinet`](http://msdn.microsoft.com/en-us/library/aa377404%28VS.85%29.aspx)使用非静态成员函数作为回调进行调用。

给定一些课程：

```
class MyClass
{
public:
    UINT MyCallback(UINT Notification, UINT_PTR Param1, UINT_PTR Param2)
    {
        /* impl */
    }
}; 
```

为了`MyClass::MyCallback`用作 的第三个参数`SetupIterateCabinet`，您需要为参数传递 a`MyClass*`并`Context`使用普通的 shim 函数来获取该`Context`参数并使用它做正确的事情：

```
UINT MyClassCallback(PVOID Context, UINT Notification, UINT_PTR Param1, UINT_PTR Param2)
{
    return static_cast<MyClass*>(Context)->MyCallback(Notification, Param1, Param2);
}

int main()
{
    MyClass mc;
    SetupIterateCabinet(_T("some path"), 0, MyClassCallback, &mc);
} 
```

# jquery - 禁用 HTML 链接标签加载

> ID：10555467
> 
> 赞同：0
> 
> 时间：2012-05-11T16:47:14.913
> 
> 标签：jquery, html, link-tag

我有一个`a`我喜欢在站点负载上禁用的按钮，当检查复选框时，`a`链接将是可单击的。

我在输入类型按钮上试过这个，但问题是输入按钮不适用于我的平滑滚动效果。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:02:02.363

这应该很好地工作：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<a id="alink" href="javascript:void(0);">Some Link</a>

<br /><br />

<input id="chkid" type="checkbox" value"" name="somename" />

<script type="text/javascript">
$(document).ready(function(){
$('#chkid').unbind("click").click(function(){
var chkid = this.id;
if($(this).is(':checked')){
$("a#alink").attr('href', 'http://www.google.com');
}else{
$("a#alink").attr('href', 'javascript:void(0);');
}
});
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:10:40.827

**CSS：**

```
button.dead {
   background: transparent;
   border: none
}

button.dean a {
   color: #ddd
} 
```

**jQuery：**

```
$(function() {

    // toggleWrap() function will call when user change the checkbox
    // wrap -> parameter contain true or false (which is chekcbox status)

    function toggleWrap(wrap) {
        // checking for the condition when checkbox is not checked
        if(!wrap) {
             // wrapping the <a> tag with a button which is 
             // disabled, so it will unclickable
             $('a').wrap($('<button/>', {
                disabled: true,
                'class': 'dead', // this class have some CSS
                 width: $('a').width()  // width of button change to <a> width
            })); 
        } else  {
            // following code will work when checkbox is not checked
            // .unwrap() function will remove the <button> wrapper from <a>
            // and unpack the <a> tag to clickable

            $('a').unwrap();
        }
    }

    $('input:checkbox').on('change', function() {  // bind event to fire when user change the checkbox
        // this.checked hold the checkbox status
        // which is boolean true => if checked or false => if not checked
        toggleWrap(this.checked);
    });
    toggleWrap(false); // this is the initial call to function at page load
});​ 
```

# ssh - 系统启动后 ssh-agent 未运行（Suse 12.1、KDE）

> ID：10555468
> 
> 赞同：-2
> 
> 时间：2012-05-11T16:47:15.527
> 
> 标签：ssh, kde, opensuse, ssh-agent

当我调用 ssh-add 时，我收到以下错误消息：

> 无法打开与您的身份验证代理的连接。

好像`ssh-agent`没有运行。我不想手动运行它。我想让它自动运行。有人知道如何在 Suse 12.1 下使用 KDE 进行配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:17:47.040

解决了。

这对我来说很好：

cp /etc/X11/xdm/sys.xsession ~/.xsession

从这里：

[http://tr.opensuse.org/Using_ssh-agent_globally_for_X_session](http://tr.opensuse.org/Using_ssh-agent_globally_for_X_session)

# wpf - 即使重叠对象为 IsHitTestVisible = false，也会触发底层对象的 MouseLeave

> ID：10555470
> 
> 赞同：3
> 
> 时间：2012-05-11T16:47:27.830
> 
> 标签：wpf, wpf-controls

我创建了一个自定义弹出窗口，用动画工具提示装饰我的按钮。我跟踪按钮的 Button.MouseEnter 以决定何时显示弹出窗口。我使用 Button.MouseLeave 来确定何时隐藏弹出窗口。

问题是 Button.MouseLeave 过早触发如果弹出窗口移动到鼠标光标上（它的外观是动画的），尽管我已经为弹出窗口及其所有可视子项设置了 IsHitTestVisible = false 。

这是 WPF 设计的工作方式吗？我需要 MouseLeave 仅在光标离开按钮本身并且不受弹出窗口影响时触发。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T15:18:01.637

我相信 Popup 控件实际上包含在一个窗口中，这就是为什么在某些情况下弹出窗口可以超出窗口边界的原因。（这也是 Silverlight 不支持弹出透明度的原因。）

我相信，虽然弹出控件不再处理“点击”，但容器窗口是，这就是为什么你失去了按钮的鼠标焦点。

我没有对此进行测试，但您可以尝试为您的按钮创建一个模板并实际将弹出窗口声明为按钮的一部分（而不是在其下方）。这可能会导致 WPF 将弹出控件视为按钮的一部分，并消除失去鼠标焦点的问题。这适用于其他场景，但我不能 100% 确定这将如何与 Popup 一起使用。

编辑：作为旁注，默认 WPF 工具提示允许您覆盖模板。我不确定您的目标是什么，但您可能会发现更改默认工具提示的外观和行为比尝试自己动手更容易，因为默认工具提示中已经解决了很多此类问题.

# sql - 更新表，其中包含来自同一表的选择信息

> ID：10555474
> 
> 赞同：0
> 
> 时间：2012-05-11T16:47:39.937
> 
> 标签：sql, ms-access

[使用同一表中的其他记录](https://stackoverflow.com/questions/9691371/sql-update-info-using-other-record-from-the-same-table)遵循这一 SQL 更新信息中的信息和帮助

我注意到它没有正确地完成工作。

问题是：

它将表 NOEUD 与从内部连接内的子查询创建的表连接起来。它只更新子查询表中的 noeud，而不是 noeud 表中的所有节点。

由于 n_amont 是前一个 noeud，因此在子查询中正确进行了选择（列出所有具有 noeud.n_amont = noeud.noeud 且电缆距离为 1m 的字段）。我想从与整个表 noeud 中的对应 noeud 匹配的选择中更新所有 n_amont。

提前致谢。

```
UPDATE [SELECT noeuds.* FROM noeuds WHERE (((noeuds.LONG_CABLE)="    1") AND (noeuds.DELETED=" "))]. AS a INNER JOIN noeuds AS n ON a.n_amont=n.noeud SET n.INSEE_COM = a.INSEE_COM, n.RIVOLI = a.RIVOLI, n.NUM_VOIE = a.NUM_VOIE
WHERE ((n.INSEE_COM)="     "); 
```

任何人都可以帮忙吗？

编辑：

* * *

我有这张桌子（noues）：

```
NOEUD   TYPE_MAT  N_AMONT   LONG_CABLE   RIVOLI (+3 fields for update)
123     REP       100       12           abc
130     AMP       229       12            
173     PPP       130        1           AAA 
```

我想编写一个 UPDATE 查询来填充节点之后的所有数据地址，即 NODES.LONG_CABLE = 1。

例如：

我搜索了所有具有 LONG_CABLE = 1 的节点，给了我 noeud 173；那么 130 之前的节点应该具有相同的 rivoli 173。

这条电缆给了我安装在某些街道上的设备的地址。当我填写 PPP（类型）时，它不会将地址转换为同一杆或沙井（1 m 距离 = 连接器）的地址。

通过我发布的这个查询，我可以选择具有前一个（173）的节点，但是当加入它时，如果它与其他设备相距 1m，则仅加入 n_amont 130（与节点相关的 130）。在这种情况下，它会被忽略并且地址不会更新。该查询将在 NOEUDS 表上运行，然后找到需要更新的设备。

还有更多关于解决此问题的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:59:59.973

试试这个：

```
UPDATE noeuds INNER JOIN 
(SELECT noeuds.* FROM noeuds WHERE (((noeuds.LONG_CABLE)=" 1") AND (noeuds.DELETED=" "))) a ON noeuds.n_amount = a.n_amount
SET noeuds.insee_com = a.insee_com, noeuds.rivoli = a.rivoli, noeuds.num_voie = a.num_voie 
```

# android - 如何从没有http标头的服务器下载xml文件

> ID：10555479
> 
> 赞同：0
> 
> 时间：2012-05-11T16:47:58.340
> 
> 标签：android, http, network-protocols

我正在尝试下载一个 xml 文件以从服务器解析，但服务器不发送 HTTP 标头，只发送 xml 文本。我已经尝试了几乎所有用我能找到的 URL 下载文件的方法，但一切都给了我一个 I/O 异常。我可以将文件加载到 WebView 中，但我自己无法下载文件。

如何打开连接并下载没有 HTTP 标头的 xml 文件？

编辑：仍然给我一个 I/O 异常，这是我正在使用的代码：

```
 private class UpdateTask extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void...voids ) {
        String url = "http://192.168.1.92/state.xml";
        try{
            //get XML Pull parser
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
            //factory.setValidating(false);
            XmlPullParser xpp = factory.newPullParser();        

            HttpGet httpGet = new HttpGet(url);
            DefaultHttpClient client = new DefaultHttpClient();
            HttpResponse response = client.execute(httpGet);

            if(response == null) return null;

            HttpEntity httpEntity = response.getEntity();
            InputStream inStream  = null;
            StringBuilder sb      = null;
            if (httpEntity == null) return null;

            try {
                inStream = httpEntity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(inStream, "UTF-8"));
                sb = new StringBuilder();
                String line = null;

                while((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }

                inStream.close();
                } catch (Exception ex) {
                }
                String xmlString = sb.toString();

                xpp.setInput(new StringReader(xmlString));
                int eventType = xpp.getEventType();

                String name = null;
                String text = null;
                while (eventType != XmlPullParser.END_DOCUMENT) {
                    if(eventType == XmlPullParser.START_TAG) { // <name>
                        name = xpp.getName();
                        System.out.println("got name: " + name);
                    } else if(eventType == XmlPullParser.END_TAG) {// </name> (xpp.getName();
                    } else if(eventType == XmlPullParser.TEXT) { // <>text</>
                        text = xpp.getText();
                        System.out.println("got text: " + text);

                    }
                    eventType = xpp.next();
                }
                finished = true;
            }catch(MalformedURLException e){
                System.out.println("Malformed URL");
            }catch(IOException e){
                System.out.println("IO Exception updating " + name + " at address: " + address);
            }catch(XmlPullParserException e){
                System.out.println("XML Pull Parser Error updating " + name + " at address: " + address);
            }catch(Exception e){
            }
        return null;
    }
} 
```

每次都给我一个 I/O 异常。但是，如果我将它指向一个提供 HTTP 标头的服务器，它就可以正常下载。服务器是我们内部制造的设备，当您请求 state.xml 文件时，较旧的设备不提供 HTTP 标头，因此我需要能够同时使用两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:15:29.253

查看文档如何正确配置连接，简单地说你会有这样的东西：

```
HttpGet httpGet = new HttpGet(mServerUrl);
DefaultHttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(httpGet);

if(response == null) return;

HttpEntity httpEntity = response.getEntity();
InputStream inStream  = null;
StringBuilder sb      = null;
if (httpEntity == null) return;

try {
    inStream = httpEntity.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(inStream, "UTF-8"));
    sb = new StringBuilder();
String line = null;

while((line = reader.readLine()) != null) {
    sb.append(line + "\n");
}

inStream.close();
} catch (Exception ex) {
}
String xmlString = sb.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:20:26.053

我必须打开我自己的套接字，创建一个 HTTP Get 请求，然后删除具有标头的服务器的 HTTP 标头。

```
 public String getData(){
        String returnData = "";
        String requestmsg = "GET /state.xml HTTP/1.0\r\n";
        requestmsg += "Connection: close\r\n";
        if(cpPassword != null)
            requestmsg += "Authorization: Basic " + Base64.encodeBytes(("admin:" + cpPassword).getBytes()) + "\r\n";
        requestmsg += "\r\n";

        int intPort = 80;
        DataOutputStream dos = null;
        BufferedReader dis = null;
        Socket socket = null;
        try {
            socket = new Socket(address, intPort);
            String data = "";
            socket.setSoTimeout(3000); //timeout after 2 seconds
            dos = new DataOutputStream(socket.getOutputStream());
            dis = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            dos.write(requestmsg.getBytes());

            StringBuilder sb = new StringBuilder();

            while ((data = dis.readLine()) != null) {
                sb.append(data);
            }
            returnData = sb.toString();
            if(returnData.length() == 0)
                return "";
            int xmlIndex = returnData.indexOf( "<?xml" );
            returnData = returnData.substring(xmlIndex);
            return returnData;
        } catch (IOException e) {
            Log.e("ClientActivity", "C: Error Getting Data From Socket", e);
            returnData = "";
        }finally{
            try{
                if(socket!=null)
                    socket.close();
            }catch(IOException e){
                Log.e("ClientActivity", "C: Error Closing Socket", e);
            }
        }
        return returnData;
    } 
```

# iphone - 使用 NSURLConnection 发送一系列 HTTP 请求的最佳方式

> ID：10555482
> 
> 赞同：6
> 
> 时间：2012-05-11T16:48:18.607
> 
> 标签：iphone, ios, cocoa, http

发出的 HTTP 请求`NSURLConnection`是事件驱动的。当您需要一个接一个地发出三个请求时，这会让事情变得有点奇怪，其中每个请求都使用前一个请求返回的信息。

我习惯这样做：

```
response1 = request1();
response2 = request2(response1);
response3 = request3(response2); 
```

但我能找到如何做到这一点的唯一方法`NSURLConnection`是`connectionDidFinishLoading:`提出下一个请求。但是当顺序请求的数量增加时，这可能会变得混乱。

用可可处理顺序 HTTP 请求的惯用方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T16:52:06.347

您可以将请求包装在 NSOperation 中，然后定义操作依赖项，以便每个请求在执行之前必须等待其依赖的请求。

来自[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)：

> 依赖项是一种按特定顺序执行操作的便捷方式。您可以使用 addDependency: 和 removeDependency: 方法为操作添加和删除依赖项。默认情况下，具有依赖关系的操作对象在其所有依赖的操作对象都完成执行之前不会被认为是就绪的。然而，一旦最后一个依赖操作完成，操作对象就准备好并能够执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:51:04.803

我建议您使用名为**MKNetworkKit**的 3rd 方库。它可以为您处理繁重的工作，因此您可以专注于应用程序的关键方面。你可以在[这里](https://github.com/MugunthKumar/MKNetworkKit)找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:21:00.617

您可以而且应该使用`NSOperation`and `NSOperationQueues`。

一个很好的教程可以在这里找到：[如何使用 NSOperations 和 NSOperationQueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

# url - 逃生 | Wiki 标记模板中 URL 中的（垂直条/管道）

> ID：10555483
> 
> 赞同：14
> 
> 时间：2012-05-11T16:48:24.700
> 
> 标签：url, escaping, mediawiki, url-encoding, wiki-markup

是否有可能逃脱并保持不规范 | 在表格中的模板 Wiki 标记中的 URL 中的字符？

```
{| class="wikitable"
|-
! Test in Table
|-
| [http://example.org/{var1}|{var2}|{var3} Example]
|} 
```

应该在表格单元格中呈现类似的内容

```
[http://example.org/1|2|3 Example] 
```

并链接到

```
http://example.org/1|2|3 
```

垂直条按原样而不是这样编码

```
http://example.org/1%7C2%7C3 
```

第三方网站需要«|» 在 URL 中，我会在服务器端修复 URL 处理，但现在我无法控制。任何解决方法的帮助？

我试过这些：

```
[http://example.org/1|2|3 Example] doesn't work within a table   
[http://example.org/{var1}&#124;{var2}&#124;{var3} Example] works in tables 
```

但两者都创建了有效的标准 URL，其中垂直条被正确地 URL 编码为 %7C，就像我想阻止的那样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T06:50:46.130

外部链接，没有额外扩展的支持，只能由`[url description]`语法或纯 URL 本身产生。尽管正如 skalee 所提到的，您可以使用`{{!}}`或其他方法来防止管道符号被解释为 Wikitext 语法的一部分，但最终的链接将始终被编码。

如果没有扩展的帮助，一个快速的解决方案就是 JavaScript。（如果它在您自己的 MediaWiki 站点上，那将非常简单。`MediaWiki:Common.js`包含将为所有用户加载的 JavaScript）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-12T18:02:10.553

除了前面提到的语法之外，还可以使用或 using`{{!}}`转义竖线/管道。使用 HTML 实体也可以。`{{pipe}}``<nowiki>text containing the character | (pipe)</nowiki>``&#124;`

资源：

[https://en.wikipedia.org/wiki/Template:Cite_web#Title](https://en.wikipedia.org/wiki/Template:Cite_web#Title)

[https://en.wikipedia.org/wiki/Help:Table#Rendering_pipe_itself](https://en.wikipedia.org/wiki/Help:Table#Rendering_pipe_itself)

# mercurial - 使用 mercurial 推送：中止：未提供用户名（请参阅“hg help config”）

> ID：10555486
> 
> 赞同：6
> 
> 时间：2012-05-11T16:49:10.773
> 
> 标签：mercurial, hgrc

我不知道为什么，但从今天开始，我在将我的资源推送到 repo 时遇到了问题。我得到了`abort: no username supplied (see "hg help config")` 问题是我`[ui]`在 hgrc 中有部分：

```
[ui]
username = My username
verbose = true 
```

那问题出在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T00:58:20.253

尝试做：

```
hg --debug showconfig 
```

这会向您显示 Mercurial 正在查找的所有配置设置以及在何处找到它们。由于看起来您在 Windows 上，因此一种可能性是`hgrc`文件前面的 BOM（字节顺序标记）。Nodepad 喜欢错误地将它们放在那里。

在紧要关头，您总是可以这样做`hg --config ui.username=Whatever_you_want commit`，但这是一个糟糕的长期解决方案。

最后，人们预计会出现错误`commit`，但你说你会得到它`push`。我无法想象这怎么会发生。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-10-14T13:16:16.017

要么在你的 repo 的 .hg 目录中放一个 hgrc，要么在你的主目录中放一个 hgrc 文件（然后它会覆盖你所有的项目）在你应该写的文件中。

```
[ui]
username = Your Name <your@mail> 
```

# javascript - 如何在多个 SlickGrid 上使用通用格式化程序？

> ID：10555488
> 
> 赞同：0
> 
> 时间：2012-05-11T16:49:15.450
> 
> 标签：javascript, jquery, jquery-ui, grid, slickgrid

我正在使用 SlickGrid 开发一个 Web 应用程序。

我们的应用程序在不同的选项卡/页面中有许多网格，因此我想知道是否可以重构一些代码，这样我就不会一遍又一遍地为单独的网格编写相同的函数。

一个例子：我需要一个自定义格式化程序，因为我们有多个树网格（实现树结构的格式化程序对于每个网格都是相同的。）： function PercentCompleteFormatter(row, cell, value, columnDef, dataContext)

鉴于我不能将网格或数据视图作为参数传递（假设上面的签名必须用于所有自定义格式化程序。），我基本上必须在我创建网格的每个代码块内有相同的格式化程序代码。

有没有一种方法可以创建一个“通用”格式化程序并将其应用于所有网格？

同样的问题适用于排序，过滤等......但我希望上面的解释涵盖了我想要问的内容。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T17:05:29.313

您可以使用 jQuery 的 .proxy() 助手（或类似的）将函数绑定到特定上下文。

例如：

```
function MyFormatter(row, cell, value) { 
  var grid = this;  // the grid will be the executing scope
  // ...
}

var myFormatterForGridA = $.proxy(MyFormatter, gridA);
var myFormatterForGridB = $.proxy(MyFormatter, gridB); 
```

# javascript - 如何在一个文件中添加多个功能？

> ID：10555489
> 
> 赞同：0
> 
> 时间：2012-05-11T16:49:21.370
> 
> 标签：javascript, function, google-maps-api-3

我正在尝试创建各种混搭...我希望这些函数位于一个文件中，但是当我添加我的 Ajax 函数（中途）时，什么也没有显示。

我还想用 jQuery 显示它们，并且顶部函数（带有标记和信息的谷歌地图）在我添加底部函数之前都可以工作。

我应该像谷歌那样将它们添加到 (function () {} ) 中吗？ () 是什么？在 googlemap 函数的末尾？

当我在我的代码中调用我的函数时，我将如何调用 ajax 进行预览，因为在 Google 中调用了 window.onload。

我知道我可以使用 $.ready function(){} 但我只是将函数名称放在 .ready function { }

我不确定如何在一个文件中添加所有功能并使其工作。基本上

这是代码：

```
(function() {

        //define global variables
        var map, geocoder, marker, infowindow;

        window.onload = function() {

            //creating the map
            var options = {
                zoom: 5,
                center: new google.maps.LatLng(53.383, -1.483),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            map = new google.maps.Map(document.getElementById('map'), options);

            //code for catching the form submit event goes here
            //Getting the reference to the HTML form
            var form = document.getElementById('addressForm');

            //Catching the forms submit event
            form.onsubmit = function () {

                //getting the address from the text input
                var address = document.getElementById('address').value;

                //Making the geocode call
                getAddress(address);

                //Preventing the form from doing a page submit
                return false;
                }
            }

            //Function Stub
            function getAddress(address) {

                //Check to see if we already have a geocode object.
                //If not we create one
                if(!geocoder) {
                    geocoder = new google.maps.Geocoder();
                }

                //Creating the geoCoderRequest Object   
                var geocoderRequest = {
                    address: address
                }

                //Making the geocode request
                geocoder.geocode(geocoderRequest, function (results, status) {

                    //Check if status is ok beofre proceeding
                    if (status == google.maps.GeocoderStatus.OK){

                        //Center the map on the returned location
                        map.setCenter(results[0].geometry.location);

                        //Check to see if already a Marker there
                        if (!marker){
                            //Create a new marker and add it to the map
                            marker = new google.maps.Marker({
                                map: map    
                                });
                            }
                        //Setting position of the Marker to returned location
                        marker.setPosition(results[0].geometry.location);

                            //Check to see if we've already an info window
                            if(!infowindow) {
                                //Creating a new info window
                                infowindow = new google.maps.InfoWindow();
                                }
                            //Creating the content of the info window to the Address
                            //and the returned position
                            var content = '<strong>' + results[0].formatted_address + '</strong><br />';
                            content += 'Lat: ' + results[0].geometry.location.lat() + '<br />';
                            content += 'Lng: ' + results[0].geometry.location.lng();

                            //Adding the content to the info window
                            infowindow.setContent(content);

                            //Opening the infoWindow
                            infowindow.open(map, marker);

                        }

                });
            }

            })();

    // beginning of new function
            var xhr = false;
            var xPos, yPos;

            function prev(){
                    var link = document.getElementByTagName("a").onmouseover = showPreview;
                }

        function showPreview(evt) {
            if (evt) {
                var url = evt.target;
            }
            else{
                evt = window.event;
                var url = evt.srcElement;
            }
            xPos = evt.clientX;
            yPos = evt.clientY;

            if (window.XMLHttpRequest) {
                xhr = new XMLHttpRequest();
            }
            else {
                if (window.ActiveXObject) {
                    try {
                        xhr = new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    catch (e) { }
                }
            }

            if (xhr) {
                xhr.onreadystatechange = showContents;
                xhr.open("GET", url, true);
                xhr.send(null);
            }
            else {
                alert("Sorry, but I couldn't create an XMLHttpRequest");
            }
            return false;
        }

            function showContents() {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        var outMsg = xhr.responseText;
                    }
                    else {
                        var outMsg = "There was a problem with the request " + xhr.status;
                        }
                        var preview = document.getElementById('preview');
                        preview.innerHTML = outMsg;
                        preview.style.top = parseInt(yPos)+2 + "px";
                        preview.style.left = parseInt(xPos)+2 + "px";
                        preview.style.visibility = "visible";

                        preview.onmouseout = function(){
                            document.getElementById('preview').style.visibility = "hidden";
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:08:41.813

这取决于您添加功能的原因。但这里有一个简单的公式。如果您希望仅在文档就绪时调用函数，并希望在加载文档时调用它们一次。然后将它们添加为“匿名函数”

例子：

```
$(function () {
    //you code
    ...............
    // you can call your named functions also here. 
    //like
    somefunction();
}); 
```

但是，如果您希望稍后在文档已经加载时调用它们。然后添加“命名函数”

例子：

```
function somename()
{
    ............
} 
```

在这两种情况下，您都可以将它们放在一个文件中，并且关于`();`函数末尾的 ，这是一种在 JavaScript 中立即调用匿名函数的方法，就像`document.ready`在 jQuery 中一样。

# ruby-on-rails - 为什么我会收到“未初始化的常量 Feed::Feedzirra”错误？

> ID：10555490
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:49:26.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rss, feedzirra

我正在开发一个 ruby​​ on rails -v 3.1.3 应用程序，它需要拉下一个 rss 提要。通过将 feedzirra 添加到我的 gemfile 并运行，我已经成功安装了 feedzirra `bundle install`。

在我的控制器中，用于显示我拥有的 rss 提要的页面

`@feed = Feed.new(blog_url_here)`

我的模型文件夹中有一个名为 Feed.rb 的类，其中包含：

```
def initialize(endpoint)
    atom = Feedzirra::Feed.fetch_and_parse endpoint
    @atom = atom.is_a?(Feedzirra::Parser::Atom) ? atom : nil
end 
```

当我加载页面时，我收到“未初始化的常量 Feed::Feedzirra”错误。任何人都知道为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:53:08.667

也许它会帮助某人：

您**应该** `rails server`在`bundle install`.

# ios - 如何用 CFUUIDCreate 替换 uniqueIdentifier？

> ID：10555493
> 
> 赞同：10
> 
> 时间：2012-05-11T16:49:51.840
> 
> 标签：ios, uniqueidentifier

我正在尝试激活 APNS。因为`uniqueIdentifier`已弃用，我正在尝试使用`CFUUIDCreate`以下代码：

```
UIDevice *dev = [UIDevice currentDevice];
NSString *deviceUuid;
if ([dev respondsToSelector:@selector(uniqueIdentifier)])
    deviceUuid = dev.uniqueIdentifier;
else {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    id uuid = [defaults objectForKey:@"deviceUuid"];
    if (uuid)
        deviceUuid = (NSString *)uuid;
    else {
        CFStringRef cfUuid = CFUUIDCreateString(NULL, CFUUIDCreate(NULL));
        deviceUuid = (__bridge NSString *)cfUuid;
        CFRelease(cfUuid);
        [defaults setObject:deviceUuid forKey:@"deviceUuid"];
    }
} 
```

我该如何`uniqueIdentifier`替换`CFUUIDCreate`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-11T17:43:00.557

##  iOS < 6.0

```
// Create universally unique identifier (object)
CFUUIDRef uuidObject = CFUUIDCreate(kCFAllocatorDefault);

// Get the string representation of CFUUID object.
NSString *uuidStr = (__bridge_transfer NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidObject);
CFRelease(uuidObject); 
```

## iOS >= 6.0

```
NSString* UDID = [[[UIDevice currentDevice] identifierForVendor] UUIDString]; 
```

# .net - 使用 .net 应用程序打包视频

> ID：10555495
> 
> 赞同：0
> 
> 时间：2012-05-11T16:50:09.027
> 
> 标签：.net, video

我将使用 c# 创建一个可以播放本地视频的应用程序。我怎样才能：

1.  将视频与应用程序打包在一起，最终用户无法从应用程序中复制或提取视频？
2.  有人建议加密视频并在观看时解密。IMO 这将占用大量 CPU 资源，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:03:13.263

正如 Kirk Woll 在评论中所说，DRM 在很大程度上是一个巨大的失败。你可能对这个视频太偏执了。也就是说，如果你真的真的觉得有必要这样做，那么有几个选择：

*   **简单混淆**：将文件重命名为 data.bin 之类的名称。休闲家庭用户不会解决这个问题。高级用户和编码人员可以，如果他们愿意的话。
*   **简单的加密**：即使是 [rot13](http://en.wikipedia.org/wiki/ROT13)也可能足以放松你的偏执狂。如果不是这样，那么完整的加密就不会对 CPU 造成如此沉重的负担来担心它。每次访问 HTTPS 网站时，您的浏览器都会进行加密。现代 CPU 可以在不费力气的情况下处理它。

# android - 如何使用 pin 按钮 (ImageButtons) 实现静态地图的简单缩放？

> ID：10555496
> 
> 赞同：0
> 
> 时间：2012-05-11T16:50:09.323
> 
> 标签：android, android-layout, android-widget, scrollview, imagebutton

我的应用程序中的一项活动需要显示具有预先确定的地图引脚位置的静态地图（本地 png 文件）。静态地图的大小为 480 px x 904 px，我使用滚动视图实现了它，这样我就可以上下滚动以查看地图及其各种图钉位置。这些引脚被实现为 ImageButtons（以编程方式创建而不是使用 xml），单击它们将启动其他相应的新活动。我想知道如何实现一个简单的缩放功能，用户可以双击地图上的任何地方，它会放大（例如 2 倍）到点击区域（因此点击区域周围的 pin ImageButtons 将被缩放还）。不允许进行捏合或多点触控操作，因此只需简单的双击以放大点击区域并再次双击以缩小。顺便提一句，我的活动仅处于横向模式，因此无需担心切换方向。有什么建议吗？

这是我用于活动的 xml 文件的一部分

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rlayoutResultMap"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="0dp" >

    <ScrollView
        android:id="@+id/scrollResultMap"
        android:fillViewport="true" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:scrollbars="none" >

        <RelativeLayout
            android:id="@+id/rlayoutScrollMap"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <ImageView
                android:id="@+id/imgResultMap"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_alignParentTop="true"
                android:src="@drawable/map_base"/>

        </RelativeLayout>
    </ScrollView>
    ...
</RelativeLayout> 
```

这是我的java类的一部分：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.result_map);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    mapLocArray = getMapCoordinates();

    RelativeLayout rl = (RelativeLayout) findViewById(R.id.rlayoutResultMap);

    // Loop through and create the map location buttons
    int x, y;
    for (int i=1; i<=maxMapLoc; i++ ) {
        mapLocation = i;
        ImageButton btnMapLoc = new ImageButton(ResultMapActivity.this);
        RelativeLayout.LayoutParams vp = new RelativeLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        x = mapLocArray[i-1].getX();
        y = mapLocArray[i-1].getY();
        vp.setMargins(x,y,0,0);         
        btnMapLoc.setLayoutParams(vp);
        btnMapLoc.setBackgroundColor(Color.TRANSPARENT);
        btnMapLoc.requestLayout();

        String imgNameNormal = "map_loc_" + mapLocation + "_normal"; 
        int idNormal = getResources().getIdentifier(imgNameNormal,"drawable",getPackageName());
        btnMapLoc.setImageResource(idNormal);

        rl.addView(btnMapLoc, vp);

         ...
    }
    ...        
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:03:15.580

你为什么不做你

```
<ZoomButton
android:id="@+id/zoomButton1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignBottom="@+id/imageButton1"
android:layout_centerHorizontal="true"
android:src="@android:drawable/btn_plus" /> 
```

让用户知道该怎么做。当您使用 2*tab 制作它时，您必须在第一个选项卡之后启动**Timer Task**，当用户再次按下第二个选项卡时，您必须在 Timer Task 中实现的 ***ms 内进行缩放。

要获得放大的图像，您可以使用

```
int zoom = 2;
Bitmap i = Bitmap.createScaledBitmap(image, image.getWidth() * zoom, image.getHeight() * zoom, false); 
```

我希望我理解你的问题是正确的。

# annotations - 在openjpa中使用@Action注解

> ID：10555497
> 
> 赞同：1
> 
> 时间：2012-05-11T16:50:10.337
> 
> 标签：annotations, openjpa

在我的开放 jpa 类中，我们有一个这样的方法：

```
@Action(Action.ACTION_TYPE.CREATE)
public void createRecord(EntityObject fileStatus) {

    EntityManager em = getEntityManager();
    em.persist(fileStatus);
    em.flush();

} 
```

我的问题是@Action 的用法。我的印象是我们使用注释来避免编写样板代码。在这个特定的方法中，我们可以通过使用注解避免的样板代码是什么？我认为即使没有注释，该方法看起来也一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-13T10:31:01.657

它是 IBM Rational Application Developer (RAD) 使用的注释 - [IBM 支持页面上的相关答案](http://www-01.ibm.com/support/docview.wss?uid=swg21443632)。

注释只能用于记录目的——在这种情况下，它们不会影响已编译的代码。

RAD 最有可能使用这个来识别特定的 JPA 管理器方法，因此它可以在那里的建模工具中列出它们（最后这只是我的猜测）。

# git - 如何将我的本地分支推送到不同的远程跟踪分支？

> ID：10555499
> 
> 赞同：1
> 
> 时间：2012-05-11T16:50:26.860
> 
> 标签：git

我一直在我自己的本地分支上进行开发。我一直在做很多承诺。如何将所有提交推送到不同的远程跟踪分支（与我的本地分支创建的分支不同）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:52:28.373

`git push local_branch:remote_branch`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:54:24.503

```
git push origin localbranch:remotebranch 
```

但最好先获取远程分支上发生的更改，将本地分支合并到其中，然后推送它。

# c++ - 尝试使用值初始化列表，但当我使用变量创建大小时不起作用

> ID：10555500
> 
> 赞同：0
> 
> 时间：2012-05-11T16:50:27.603
> 
> 标签：c++

这是我第二次使用 C++，我正在尝试移植一些我制作的 Java 代码，但无法理解某些行为。我有一个数据列表，想要创建另一个相同大小的列表，但值默认为零（在`Arrays.fill(list, 0);`创建它后使用的 Java 中）。当我尝试在 C++ 中做类似的事情时，我得到了`variable-sized object 'list1' may not be initialized`

这是一个更好的示例代码：

```
#include <iostream>
#include <boost/assign/std/vector.hpp> // for 'operator+=()'

using namespace std;
using namespace boost::assign;

int main()
{
    cout << "Hello World!" << endl;
    vector<short> data;
    data += -40, -30,-10, 20, 50;

    //int coeff [data.size()];
    cout << "data array size is " << data.size() << endl;
    short list1 [data.size()] = {0}; //does not work
    for (int i =0; i<data.size(); i++) {
        cout << "data is " << list1[i] << endl;
    }

    cout << "********** try 2 **************" << endl;
    //this works if I use a actual number to create the list but I want to declare it at runtime
    short list2 [5] = {0};
    for (int ii=0;ii<5;ii++) {
        cout << "data is " << list2[ii] << endl;
    }

    return 0;
} 
```

就像我提到的，当我谈到 C++ 时，我完全是绿色的（我读过一本书并完成了一些教程），所以我可能会做一些完全错误的事情。如果我不能在运行时并且只能在编译时执行此操作，是否还有其他方法可以用来获得相同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:53:36.047

c++ 没有动态大小的数组，所以这是非法的：

```
short list1 [data.size()]; 
```

但您可以使用向量：

```
std::vector<short> list1(data.size(),0); 
```

这将创建一个长度与 相同的向量，其中`data`全是零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:03:06.800

C++ 向量的等价物`Arrays.fill(list, 0);`看起来像`std::fill(list.begin(), list.end(), 0);`

您也可以简单地声明 a`std::vector<short> list1(data.size());`以使用零初始化值或特定值创建它`std::vector<short> list1(data.size(), 0);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T16:58:19.167

如果您想要一个大小在运行时确定的数组，则必须分配它。

```
short * list1 = new short[data.size()];
//do stuff
delete [] list1; //we don't want to leak 
```

您通常希望尽可能避免使用裸指针，因此更简洁的解决方案是 juanchopanza 建议的并尝试使用 std::vector。

# javascript - 在backbone.js 视图中使用当前的jQuery 元素

> ID：10555503
> 
> 赞同：1
> 
> 时间：2012-05-11T16:50:40.980
> 
> 标签：javascript, backbone.js

我正在放慢掌握backbone.js的窍门，但我遇到了一些束缚。我已经成功创建了一个视图，并且能够将事件委托给 DOM 中的元素，但是我似乎能够`$(this)`在以下上下文中使用 jQuery“”

```
Chrono.Views.Sidebar = Backbone.View.extend({
    //Page wrapper
    el:"#wrapper",

    //Delegate events to elements
    events : {
        "click .push-to":"loadPage"
    },
    loadPage: function(event) {
        var url = $(this).attr("href");
        alert(url);
        event.preventDefault();
    }
}); 
```

点击事件被拦截，但这一行“var url = $(this).attr("href");”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:56:20.583

在 的上下文中`loadPage`，`this`已绑定到您的`Chrono.Views.Sidebar`实例。但是，您可以通过 获取触发事件的 DOM 元素`event.currentTarget`。如果您将函数更新为如下所示，它应该可以工作：

```
loadPage: function(event) {
    var url = $(event.currentTarget).attr("href");
    alert(url);
    event.preventDefault();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:59:27.243

在主干中，它绑定到视图，但您仍然可以通过检查 event.target 或使用 event.currentTarget 绑定事件的元素来获取单击的元素。

看看这个问题 [Backbone.js Event Binding](https://stackoverflow.com/questions/5270188/backbone-js-event-binding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:34:05.847

`this`绑定到视图，因此您可以`View.$el`直接访问该属性。

```
loadPage: function(event) {
    var url = this.$el.find('.push-to').attr('href');
    alert(url);
    event.preventDefault();
} 
```

# c# - 使用 OpenXmlReader

> ID：10555507
> 
> 赞同：15
> 
> 时间：2012-05-11T16:50:58.563
> 
> 标签：c#, openxml, openxml-sdk

我讨厌求助于 StackOverflow 来做一些如此（看似）基本的事情，但在过去的几个小时里我一直在与 Microsoft 争吵，似乎走到了死胡同。我正在尝试阅读（大型）Excel 2007+ 电子表格，Google 亲切地告诉我，使用 OpenXml SDK 是一个非常受欢迎的选择。所以我试了一下，阅读了一些教程，检查了微软自己的库页面，但从它们中得到的很少。

我正在使用一个只有一列数字和一列字符串的小型测试电子表格 - 稍后将进行大规模测试。我已经尝试了几种类似于我即将发布的实现，但它们都没有读取数据。下面的代码主要取自另一个 StackOverflow 线程，它似乎在那里工作 - 对我来说并非如此。我想我会让你们检查/调试/帮助这个版本，因为它可能比我今天写的任何东西都要少。

```
static void ReadExcelFileSAX(string fileName)
    {
        using (SpreadsheetDocument spreadsheetDocument = SpreadsheetDocument.Open(fileName, true))
        {
            WorkbookPart workbookPart = spreadsheetDocument.WorkbookPart;
            WorksheetPart worksheetPart = workbookPart.WorksheetParts.First();

            OpenXmlPartReader reader = new OpenXmlPartReader(worksheetPart);
            string text;
            string rowNum;
            while (reader.Read())
            {
                if (reader.ElementType == typeof(Row))
                {
                    do
                    {
                        if (reader.HasAttributes)
                        {
                            rowNum = reader.Attributes.First(a => a.LocalName == "r").Value;
                            Console.Write("rowNum: " + rowNum); //we never even get here, I tested it with a breakpoint
                        }

                    } while (reader.ReadNextSibling()); // Skip to the next row
                    Console.ReadKey();
                    break; // We just looped through all the rows so no need to continue reading the worksheet
                }
                if (reader.ElementType == typeof(Cell))
                {

                }

                if (reader.ElementType != typeof(Worksheet)) // Dont' want to skip the contents of the worksheet
                    reader.Skip(); // Skip contents of any node before finding the first row.
            }
            reader.Close();
            Console.WriteLine();
            Console.ReadKey();
        }
    } 
```

而且，在旁注中，有没有什么好的替代方案来使用我错过的 OpenXml SDK？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-11T18:45:14.183

我认为你`WorksheetPart`读错了行。

线

```
workbookPart.WorksheetParts.First(); 
```

获取`WorksheetPart`集合的第一个，它不一定是您在 Microsoft Excel 中看到的第一个工作表。

因此，遍历所有`WorksheetParts`内容，您应该会在控制台窗口中看到一些输出。

```
static void ReadExcelFileSAX(string fileName)
{
  using (SpreadsheetDocument spreadsheetDocument = 
                                   SpreadsheetDocument.Open(fileName, true))
  {
    WorkbookPart workbookPart = spreadsheetDocument.WorkbookPart;

    // Iterate through all WorksheetParts
    foreach (WorksheetPart worksheetPart in workbookPart.WorksheetParts)
    {          
      OpenXmlPartReader reader = new OpenXmlPartReader(worksheetPart);
      string text;
      string rowNum;
      while (reader.Read())
      {
        if (reader.ElementType == typeof(Row))
        {
          do
          {
            if (reader.HasAttributes)
            {
              rowNum = reader.Attributes.First(a => a.LocalName == "r").Value;
              Console.Write("rowNum: " + rowNum);
            }

          } while (reader.ReadNextSibling()); // Skip to the next row

          break; // We just looped through all the rows so no 
                 // need to continue reading the worksheet
        }

        if (reader.ElementType != typeof(Worksheet))
          reader.Skip(); 
      }
      reader.Close();      
    }
  }  
} 
```

要读取所有单元格值，请使用以下函数（省略所有错误处理细节）：

```
static void ReadAllCellValues(string fileName)
{
  using (SpreadsheetDocument spreadsheetDocument = SpreadsheetDocument.Open(fileName, false))
  {
    WorkbookPart workbookPart = spreadsheetDocument.WorkbookPart;

    foreach(WorksheetPart worksheetPart in workbookPart.WorksheetParts)
    {
      OpenXmlReader reader = OpenXmlReader.Create(worksheetPart);

      while (reader.Read())
      {
        if (reader.ElementType == typeof(Row))
        {
          reader.ReadFirstChild();

          do
          {
            if (reader.ElementType == typeof(Cell))
            {
              Cell c = (Cell)reader.LoadCurrentElement();

              string cellValue;

              if (c.DataType != null && c.DataType == CellValues.SharedString)
              {
                SharedStringItem ssi = workbookPart.SharedStringTablePart.SharedStringTable.Elements<SharedStringItem>().ElementAt(int.Parse(c.CellValue.InnerText));

                cellValue = ssi.Text.Text;
              }
              else
              {
                cellValue = c.CellValue.InnerText;
              }

              Console.Out.Write("{0}: {1} ", c.CellReference, cellValue);
            }
          } while (reader.ReadNextSibling());
          Console.Out.WriteLine();
        }            
      }
    }   
  }
} 
```

在上面的代码中，您看到具有数据类型的单元格`SharedString`必须使用`SharedStringTablePart`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T08:22:43.120

要读取空白单元格，我使用在行读取器外部分配的变量，在 while 循环中，我正在检查列索引是否大于我的变量，因为它在每个单元格读取后递增。如果这不匹配，我将用我想要的值填充我的列。这是我用来将空白单元格赶上我尊重的列值的技巧。这是代码：

```
public static DataTable ReadIntoDatatableFromExcel(string newFilePath)
        {
            /*Creating a table with 20 columns*/
            var dt = CreateProviderRvenueSharingTable();

            try
            {
                /*using stream so that if excel file is in another process then it can read without error*/
                using (Stream stream = new FileStream(newFilePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
                {
                    using (SpreadsheetDocument spreadsheetDocument = SpreadsheetDocument.Open(stream, false))
                    {
                        var workbookPart = spreadsheetDocument.WorkbookPart;
                        var workbook = workbookPart.Workbook;

                        /*get only unhide tabs*/
                        var sheets = workbook.Descendants<Sheet>().Where(e => e.State == null);

                        foreach (var sheet in sheets)
                        {
                            var worksheetPart = (WorksheetPart)workbookPart.GetPartById(sheet.Id);

                            /*Remove empty sheets*/
                            List<Row> rows = worksheetPart.Worksheet.Elements<SheetData>().First().Elements<Row>()
                                .Where(r => r.InnerText != string.Empty).ToList();

                            if (rows.Count > 1)
                            {
                                OpenXmlReader reader = OpenXmlReader.Create(worksheetPart);

                                int i = 0;
                                int BTR = 0;/*Break the reader while empty rows are found*/

                                while (reader.Read())
                                {
                                    if (reader.ElementType == typeof(Row))
                                    {
                                        /*ignoring first row with headers and check if data is there after header*/
                                        if (i < 2)
                                        {
                                            i++;
                                            continue;
                                        }

                                        reader.ReadFirstChild();

                                        DataRow row = dt.NewRow();

                                        int CN = 0;

                                        if (reader.ElementType == typeof(Cell))
                                        {
                                            do
                                            {
                                                Cell c = (Cell)reader.LoadCurrentElement();

                                                /*reader skipping blank cells so data is getting worng in datatable's rows according to header*/
                                                if (CN != 0)
                                                {
                                                    int cellColumnIndex =
                                                        ExcelHelper.GetColumnIndexFromName(
                                                            ExcelHelper.GetColumnName(c.CellReference));

                                                    if (cellColumnIndex < 20 && CN < cellColumnIndex - 1)
                                                    {
                                                        do
                                                        {
                                                            row[CN] = string.Empty;
                                                            CN++;
                                                        } while (CN < cellColumnIndex - 1);
                                                    }
                                                }

                                                /*stopping execution if first cell does not have any value which means empty row*/
                                                if (CN == 0 && c.DataType == null && c.CellValue == null)
                                                {
                                                    BTR++;
                                                    break;
                                                }

                                                string cellValue = GetCellValue(c, workbookPart);
                                                row[CN] = cellValue;
                                                CN++;

                                                /*if any text exists after T column (index 20) then skip the reader*/
                                                if (CN == 20)
                                                {
                                                    break;
                                                }
                                            } while (reader.ReadNextSibling());
                                        }

                                        /*reader skipping blank cells so fill the array upto 19 index*/
                                        while (CN != 0 && CN < 20)
                                        {
                                            row[CN] = string.Empty;
                                            CN++;
                                        }

                                        if (CN == 20)
                                        {
                                            dt.Rows.Add(row);
                                        }
                                    }
                                    /*escaping empty rows below data filled rows after checking 5 times */
                                    if (BTR > 5)
                                        break;
                                }
                                reader.Close();
                            }                            
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
            return dt;
        }

  private static string GetCellValue(Cell c, WorkbookPart workbookPart)
        {
            string cellValue = string.Empty;
            if (c.DataType != null && c.DataType == CellValues.SharedString)
            {
                SharedStringItem ssi =
                    workbookPart.SharedStringTablePart.SharedStringTable
                        .Elements<SharedStringItem>()
                        .ElementAt(int.Parse(c.CellValue.InnerText));
                if (ssi.Text != null)
                {
                    cellValue = ssi.Text.Text;
                }
            }
            else
            {
                if (c.CellValue != null)
                {
                    cellValue = c.CellValue.InnerText;
                }
            }
            return cellValue;
        }

public static int GetColumnIndexFromName(string columnNameOrCellReference)
        {
            int columnIndex = 0;
            int factor = 1;
            for (int pos = columnNameOrCellReference.Length - 1; pos >= 0; pos--)   // R to L
            {
                if (Char.IsLetter(columnNameOrCellReference[pos]))  // for letters (columnName)
                {
                    columnIndex += factor * ((columnNameOrCellReference[pos] - 'A') + 1);
                    factor *= 26;
                }
            }
            return columnIndex;
        }

        public static string GetColumnName(string cellReference)
        {
            /* Advance from L to R until a number, then return 0 through previous position*/
            for (int lastCharPos = 0; lastCharPos <= 3; lastCharPos++)
                if (Char.IsNumber(cellReference[lastCharPos]))
                    return cellReference.Substring(0, lastCharPos);

            throw new ArgumentOutOfRangeException("cellReference");
        } 
```

**代码适用于：** 1\. 此代码读取空白单元格 2\. 读取完成后跳过空行。3\. 以升序从第一个读取工作表 4\. 如果 excel 文件正在被另一个进程使用，OpenXML 仍然会读取该文件。

# python - 需要适当的数据结构或索引，以便基于 3d 点和重要性因素进行快速用户查找

> ID：10555511
> 
> 赞同：4
> 
> 时间：2012-05-11T16:51:07.357
> 
> 标签：python, math, optimization, data-structures, spatial-index

我有大量与重要因素配对的 3d 点。

每个用户有六分。例如：人 Charlie 有 6 个点：(22,44,55) 是他的第一个点，重要性因子为 3，(10,0,0) 是他的第二个向量，重要性因子为 2.8，一直到他的第六点即 (100,300,200)，重要性因子为 0.4。

我想做的是找到与查理最相似的人，而无需遍历每个其他人。基本上为每个用户最小化这个函数（即，匹配从那个用户到查理的正确的六个点）：

```
pythagoras(point, point2) * max(importance_factor, importance_factor2) * (abs(importance_factor - importance_factor2) + 1) 
```

然后通过选择成本最低的用户来找到与查理最相似的用户。我现在以愚蠢的方式编写了代码（通过执行大量循环），但我正在寻找一种方法来正确处理存在多个点和重要因素的事实。

我开始研究空间索引，但我认为它们不会起作用，因为我有多个点，但也许我可以将这些点展开为更高维度的点？所以不是 3 个维度的 6 个点，我可以有 18 个维度的 1 个点？仍然无法处理重要性因素，但总比没有好。

不幸的是，我不能在这里使用向量和余弦，因为 (1,1,1) 和 (400,400,400) 是*完全*相反的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T23:39:33.710

既然你还没有得到任何答案，我想我至少会贡献一些想法。我使用了一个 python kd 树模块来快速搜索最近的邻居点：
[http](http://code.google.com/p/python-kdtree/downloads/detail?name=kdtree.py)
://code.google.com/p/python-kdtree/downloads/detail?name= kdtree.py 只要它们是任意的点长度相同的尺寸。

我不确定你想如何应用“重要性”的权重，但这里只是关于如何使用 kdtree 模块至少让最接近给定人集的每个点的“人”的头脑风暴：

```
import numpy
from kdtree import KDTree
from itertools import chain

class PersonPoint(object):

    def __init__(self, person, point, factor):
        self.person = person 
        self.point = point 
        self.factor = factor 

    def __repr__(self):
        return '<%s: %s, %0.2f>' % (self.person, 
            ['%0.2f' % p for p in self.point], self.factor) 

    def __iter__(self):
        return self.point

    def __len__(self):
        return len(self.point)

    def __getitem__(self, i):
        return self.point[i]

people = {}
for name in ('bill', 'john', 'mary', 'jenny', 'phil', 'george'):
    factors = numpy.random.rand(6)
    points = numpy.random.rand(6, 3).tolist()
    people[name] = [PersonPoint(name, p, f) for p,f in zip(points, factors)]

bill_points = people['bill']
others = list(chain(*[people[name] for name in people if name != 'bill']))

tree = KDTree.construct_from_data(others)

for point in bill_points:
    # t=1 means only return the 1 closest.
    # You could set it higher to return more.
    print point, "=>", tree.query(point, t=1)[0] 
```

结果：

```
<bill: ['0.22', '0.64', '0.14'], 0.07> => 
    <phil: ['0.23', '0.54', '0.11'], 0.90>

<bill: ['0.31', '0.87', '0.16'], 0.88> => 
    <phil: ['0.36', '0.80', '0.14'], 0.40>

<bill: ['0.34', '0.64', '0.25'], 0.65> => 
    <jenny: ['0.29', '0.77', '0.28'], 0.40>

<bill: ['0.24', '0.90', '0.23'], 0.53> => 
    <jenny: ['0.29', '0.77', '0.28'], 0.40>

<bill: ['0.50', '0.69', '0.06'], 0.68> => 
    <phil: ['0.36', '0.80', '0.14'], 0.40>

<bill: ['0.13', '0.67', '0.93'], 0.54> => 
    <jenny: ['0.05', '0.62', '0.94'], 0.84> 
```

我认为根据结果，您可以查看最常匹配的“人”，然后考虑权重。或者，也许您可​​以将结果中的重要因素加起来，然后选择评分最高的因素。这样，如果 mary 只匹配一次但有 10 个因素，而 phil 有 3 个匹配但总共只有 5 个，那么 mary 可能更相关？

我知道您有一个更强大的功能来创建索引，但它需要遍历集合中的每个点。

# html - 为什么 HTML5 视频无法在新的 Windows 版 Safari 中播放？

> ID：10555514
> 
> 赞同：3
> 
> 时间：2012-05-11T16:51:13.990
> 
> 标签：html, html5-video, safari

我已经在 Windows 的 Safari 5.1.7 的多个安装中进行了测试，但我似乎无法播放 HTML5 视频。

我一直在用这个进行测试： [Basic HTML5 video test](http://camendesign.com/code/video_for_everybody/test.html)

它似乎适用于 Mac 的 Safari 5.1.7 以及 Windows 上 Safari 的早期 5.0.x 安装。我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T13:31:07.583

设法解决了这个问题。对于遇到类似问题的其他人，请注意 Safari 需要 quicktime 才能播放 HTML5 视频/音频。如果您升级到更高版本的 Safari 并注意到 HTML5 视频/音频停止工作，您可能还需要升级到最新版本的 quicktime。

# python - 如何在 suds 中创建 xsd:int 实例？

> ID：10555517
> 
> 赞同：0
> 
> 时间：2012-05-11T16:51:21.433
> 
> 标签：python, soap, suds

我正在使用泡沫 0.4

我正在尝试创建这样的节点（来自示例 SOAP 请求）：

```
<id xsi:type="xs:int">123456</id> 
```

它是 SOAP 调用的参数，仅传递一个 int 就会生成：

```
<int>123456</int> 
```

这给了我

```
Expected: class java.lang.Integer, got class org.apache.xerces.dom.ElementNSImpl 
```

所以我需要的是一种创建正确类型的方法。我尝试创建一个有效的 xsd:int 实例，但是我无法看到设置值。

有人有什么想法吗？

**编辑**

代码：

```
findResult = self.client.service.find(self._getSession(), 'Candidate', 123456) 
```

或者

```
find = self.client.factory.create('find')
find.session = self._getSession()
find.entityName = 'Candidate'
find.id = 123456
findResult = self.client.service.find(find) 
```

两次结果相同。它似乎将 id 作为文本字段传递。我检查了类型，我肯定使用的是 int 类型。在 WSDL 模式中，参数类型为：

```
<xs:complexType name="find">
  <xs:sequence>
    <xs:element name="session" type="xs:string" minOccurs="0"/>
    <xs:element name="entityName" type="xs:string" minOccurs="0"/>
    <xs:element name="id" type="xs:anyType" minOccurs="0"/>
  </xs:sequence>
</xs:complexType> 
```

在这里有任何类型的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:57:59.933

我遇到了“类似”问题，我需要一个值来获得 xsi:type="xsd:int" （[Suds 写入请求缺少数据类型？](https://stackoverflow.com/q/13593950/696768)），并且由于某种原因，这没有添加到 xml

[我最终在使用 SUDS 时](https://stackoverflow.com/q/10916433/696768)偶然发现了这个添加 xsi:type 和信封命名空间，并在那里调整了解决方案以供我使用，基本上是一个 Suds 插件“重写”我的 Value 元素以包含 xsi:type="xsd:int" 属性。

您可能可以使用类似的方法在传出 SOAP 上设置类型。

还有一个建议，可能是你知道的，输出 SOAP：

```
import logging
logging.basicConfig(level=logging.INFO)
logging.getLogger('suds.client').setLevel(logging.DEBUG) 
```

# iphone - iOS - “太多上下文”错误？

> ID：10555523
> 
> 赞同：0
> 
> 时间：2012-05-11T16:51:30.603
> 
> 标签：iphone, ios, nsmanagedobject

我的应用程序（正在开发，iOS 5.1）偶尔会崩溃并显示以下消息：

`Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Too many contexts. No space in contextList.'`

谷歌搜索此消息返回零结果。

我正在使用从 AppDelegate 单例中获取的单个 NSManagedObjectContext，简单明了，没有技巧。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:54:30.193

在构造过程中，您可能有一些对象递归到自身中，可能在`alloc`or中`init`。

您还可以为“所有异常”设置异常断点并查看捕获的内容...

# oop - 为什么我们在有类的时候需要抽象类？

> ID：10555527
> 
> 赞同：0
> 
> 时间：2012-05-11T16:52:07.133
> 
> 标签：oop, class, interface, conceptual

当我们谈论概念层面的面向对象编程概念时，假设我们要创建 Car 对象。因此我们需要设计父类。假设如果你要做那部分，你会怎么做？

你会使用类还是接口还是抽象类？那你为什么要使用界面？为什么我们不能对类/抽象类做同样的事情？使用接口作为父级有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:54:29.587

当您不想实例化超类但又想实现**一些**功能时，您需要抽象类。

单亲继承时需要接口，不能使用抽象类。如果 Java 中存在多重继承，我假设您是根据您使用的术语谈论的，那么接口将是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:10:11.560

好吧，使用您的 Car 对象，我将尝试通过一个真实世界的示例来解释这个概念。

想象一下，您是一家制造汽车零件的小公司 (A)，您为一家较大的公司 (B) 制造汽车零件，该公司是您的客户，这些零件将被其他汽车制造商使用。

B 公司**必须**确保您的产品符合标准，并且与所有汽车制造商兼容。

这是你的界面。

接口用于定义一些标准化的方法或属性，以我们为例，我们可以定义一块在每个角落有4个孔，用于固定在另一家公司制造的另一块上。

抽象有点不同，抽象比接口更具体（我同意这是一种废话），但它们是具体的，因为它们直接**实现**（例如接口）功能，而抽象类**永远不能** 被实例化.

抽象类主要用于定义一些基本或共享的功能以使其干燥。

因此，您可以创建一个*扩展*抽象类并*实现*接口的类。

这是一个例子：

```
interface Vehicle {
   protected $engine;
   protected $wheels;

   public function startUp();
   public function stop();
} 
```

您的 Vehicle 接口定义了需要具有引擎和车轮（任意数量）的 Vehicle。

```
abstract class Car implements Vehicle {
   protected $wheels = 4;

   public function startUp() {
       $this->engine->startUp();
   }

   public function stop() {
       $this->engine->stop();
   }
} 
```

因为`startUp()`and`stop()`只是 Engine 对象的代理，我们可以将它们放在抽象类中，以便在所有扩展类中重用。我们将 Car 类设置为有 4 个轮子。

```
class Renault extends Car {
   protected $color = 'yellow';
} 
```

这里我们只需要扩展 Car 抽象类，我们添加一些颜色，因为它很酷。

现在，假设我们想把我们的雷诺带到洗车站，因为我们正在实现一个已知的接口，洗车站将能够在不知道我们的车辆是雷诺的情况下工作，但只知道它是一辆车。

这是一个非常基本的示例，它可以设计得更好，但它应该向您展示它是如何工作的。

*不需要*接口，至少 PHP 不需要任何类来实现任何接口，但是，您应该使用它们，这通常是一种很好的做法，它可以帮助您编写 API、单元测试或在其他开发人员之间共享一些代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:47:36.103

冒着变得太深入甚至太夸张的风险，我会尽我所能回答你的问题。

在您提供的示例的上下文中，具有抽象“车辆”类的“汽车”类将是最合适的解决方案。这是因为如果您允许，汽车可以成为一个非常复杂的物体。您可能希望编写一个车辆类来抽象出一些任意的更高级别的数据，而不是将所有内容都打包到汽车类中。如果您计划稍后实现更多功能或创建其他类型的车辆，例如：飞机，这将非常方便。一个抽象类让你的应用程序更加灵活；如果您觉得需要，您还可以抽象车辆类。从概念上讲，OOP 是关于在抽象和分类方面将代码与我们所有人的思维方式联系起来。但是，如果您正在实现简单的功能集，那么简单的类就足够了。

界面是完全不同的野兽。接口（就计算而言）是一种概念工具，允许程序员在实现和应用程序之间创建一个分离层。例如，如果你想创建一些程序来与声卡通信，你应该创建一个接口类。事实上，这本质上就是设备驱动程序。一些语言，如 Java，有一个内置的接口结构来表示相同的概念。但是，理论上您可以使用任何语言创建界面。

您可以使用一个简单的类来实现简单的功能。请记住：类用于对象的实例化；抽象（或基）类用于从类中抽象出数据以创建基本功能。在这两种情况下，它们都处理与应用程序实现不直接相关的代码。但是，这些概念工具不能互换使用。这就是软件工程师和程序员的区别；分别知道何时使用正确的工具和知道如何使用它们。

正如我之前提到的，应该使用接口将实现与应用程序分开。如果您与设备驱动程序通信，您不想混入 GUI 代码。接口就像两者之间的联络人。从技术上讲，接口是“实现”的，而不是继承自；然而，在没有明确接口结构的语言中，类用于模拟概念，因此将被继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T09:57:50.163

我有一个简单的解释，假设你有一个扩展 A 的 B 类。现在你想在 B 类中进行克隆或者你想进行排序。那么现在你会做什么？如果你已经创建了一个 Clonable 类/Comparable 类，你如何在 B 中使用它，因为 B 已经扩展了 A。所以你的解决方案是创建另一个扩展可克隆类的 D 类。创建另一个扩展 D 的类 E（以使用克隆方法）然后....意味着因为java不支持多重继承，所以您必须不使用任何类来执行dis..但是当您将Clonable定义为接口时，您不需要做的只是在Ur中实现它B 类。即不需要额外的编码。这是我为什么要制作接口的解释。如果我在某处错了，请纠正我。谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T17:32:25.287

*   抽象类。

当您有一些概括其他实体但没有“现实世界”化身的概念时，抽象类很有用。

假设您`Car`的程序中有类，并且您将拥有`HummerH2`,`ToyotaCamry`和`DaewooMatiz`派生自`Car`. `Car`是*Some-Abstract-Car*，任何汽车都属于`Car`类，但`Car`类本身并不表示任何真正的汽车。

所以你可以定义`Car`类如下：

```
abstract class Car
{
    public abstract void Move();
    public abstract void Stop();
    public abstract int GetMaximumSpeed();
    public int GetVehicleID()
    {
        return vehicleID;
    }

    protected int vehicleID;
} 
```

然后派生出你`HummerH2`，`ToyotaCamry`并`DaewooMatiz`从`Car`和实施`Move()`，`Stop()`和`GetMaximumSpeed()`那里。请注意，`Car`类将强制其子类具有`vehicleID`字段。

*   接口

接口类似于抽象类，只是不能在接口中声明字段。接口用于声明类必须实现的一些*公共功能。*

在我们的例子中，我们可以声明接口 IMovable：

```
interface IMovable
{
    void Move();
    void Stop();
    abstract int GetMaximumSpeed();
} 
```

然后从 IMovable 继承 Car 类：

```
abstract class Car: IMovable
{
    public int GetVehicleID()
    {
        return vehicleID;
    }
    protected int vehicleID;
} 
```

请注意，现在`Car` *必须*实现的子类`Move()`和`Stop()`方法。

而且我们可以定义一些`Ship`将实现`IMovable`接口的类。在这种情况下，无论它是汽车还是轮船或任何实现接口，两者`Ship`都`Car`可以作为对象移动，而无需任何对象。`IMovable``IMovable`

**PS**：当然，当您编写一些只有一种汽车的简单游戏时，您可以定义非抽象类`Car`并使用它。

# git - 带有子模块的 git 部署

> ID：10555533
> 
> 赞同：6
> 
> 时间：2012-05-11T16:52:39.263
> 
> 标签：git, git-submodules

我一直在研究使用 git 部署站点的不同方法，并找到了以下教程：

[http://42pixels.com/blog/quick-and-dirty-git-deployment](http://42pixels.com/blog/quick-and-dirty-git-deployment)

我喜欢本教程中提出的想法，并且热衷于将它用于我的网站，只是它似乎不支持子模块。

无论如何，这可以改变，以便子模块也被拉入并根据需要进行更新？

谢谢你。

**更新**

在过去的几个小时里，我一直在解决这个问题，我似乎正在取得进展，但我仍然无法让它发挥作用。

我已经切换到本教程：[http](http://toroid.org/ams/git-website-howto) ://toroid.org/ams/git-website-howto （基本上是相同的，只是一些细微的变化），并在遵循此处找到的一些建议后：[https://stackoverflow .com/a/6636509/1049688](https://stackoverflow.com/a/6636509/1049688)我最终得到了一个如下所示的接收后文件：

```
#!/bin/sh

export GIT_WORK_TREE=/srv/www/limeblast.co.uk/htdocs_test
export GIT_DIR=/srv/www/limeblast.co.uk/.git
cd $GIT_WORK_TREE

git checkout -f master
git submodule init
git submodule update 
```

这一切在理论上似乎都很好，看起来子模块命令正在运行，但我收到以下错误消息：

*远程：为路径“wordpress”注册的子模块“wordpress”（git://github.com/WordPress/WordPress.git）* *远程：子模块“wp-content/themes/limeblastevolution/inc/cssCrush”（git://github. com/peteboere/css-crush.git）为路径“wp-content/themes/limeblastevolution/inc/cssCrush”* *远程注册：致命：工作树“/srv/www/limeblast.co.uk/htdocs_test”已经存在。* *远程：将“git://github.com/WordPress/WordPress.git”克隆到子模块路径“wordpress”中失败*

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T16:59:42.210

您可能会成功使用[git-deploy](https://github.com/mislav/git-deploy)。

但是，如果过于关注 Rails，或者由于其他原因您不能或不会使用它，这里是如何在 post-commit 钩子中强制子模块更新：

```
git submodule init && git submodule sync && git submodule update 
```

您必须在服务器上运行它；所以最好将它添加到您的`hooks/post-receive`脚本中。顺便说一句，它是简单的 BASH 或 SH。

# javascript - 允许用户将自己的 JavaScript 插入我们的 Web 应用程序会产生哪些安全后果？

> ID：10555534
> 
> 赞同：2
> 
> 时间：2012-05-11T16:52:42.820
> 
> 标签：javascript

我要求允许用户将 JavaScript 块粘贴到我们的服务器中，并将其添加到此用户网页的 head 下（用户域将是 customName.oursite.com）。此类功能的安全后果是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:05:08.430

好的，我会举例说明，因为其他人都解释过。我对此也有第一手经验，实际上只是为了好玩和练习：

*   可以创建一个脚本，使页面看起来像您网站的登录页面并记录登录。人们会在不知不觉中使用该欺诈页面（带有一些社交工程）登录并立即登录！用户名和密码。

*   可以在用户不知情的情况下进行操作和记账。假设我在我的个人资料页面上植入了恶意代码，该代码加载了一个带有`http://example.com/account.php`. 如果用户使用脚本访问页面，iframe 将与帐户页面一起加载。由于用户已登录，因此将显示他的信息。然后脚本可以抓取 iframe（因为它是同一个域），并通过 GET 请求（序列化 URL）将其转发到黑客的服务器。

*   一个人可以种植饼干并跟踪你。当不知情的用户访问恶意页面时，脚本可以读取所有 cookie，并将其转发到黑客的服务器。由于 cookie 几乎用于所有事情（从保存会话到存储购物车信息），因此您已经暴露了。

*   使用“访问过的链接是紫色的”技术可以知道您访问过哪些网站。该脚本可以在 DOM 上生成一个链接列表，检查其中哪些是紫色的，然后将该“紫色列表”转发给黑客。

*   使用用户的凭据植入垃圾邮件脚本。假设恶意代码扫描您网站上的其余页面以查找 Facebook 类似按钮，然后单击它们或启动类似的 GET/POST - 在他们不知情的情况下。最后，用户不会知道他们喜欢了一百万页。

*   还有更多……想推荐几个可能的吗？

简而言之，让用户发布任意脚本，尤其是在共享空间中，是……无法形容的邪恶。

* * *

如果您正在运行网络托管服务，则每个用户都应该有自己的“空间”，与其他用户分开，并与主站点分开。这就是为什么在免费托管中，用户拥有自己的子域，或者在付费托管中，用户拥有自己的域。用户可以对自己的空间做任何他们想做的事，*而不会损害*主机或它下面的其他用户。

[* 有一些例外。由于用户可以自由对他们的空间做任何事情，他们可以将他们的空间变成一个完全恶意的站点。尽管如此，其他用户仍应行使基本的站点安全性。就算是在另外一个空间，也有*很多*方法可以进入，或者做一些阴险的事情。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:56:17.950

你让他们做任何他们可以用 Javascript 做的事情，包括像 XSS 攻击和 CSRF 攻击这样的攻击。他们可能会窃取会话、重定向到恶意站点、窃取 cookie 信息，甚至锁定用户的浏览器。从本质上讲，存在许多安全后果，您还将增加您的责任。用户可能会将不良行为与您的网站联系起来，并且可能没有意识到包含恶意 Javascript 的是您的客户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:55:35.010

跨站脚本攻击是一个大问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T16:57:05.780

XSS 是最大的问题。这可能允许访问 cookie、页面、提供提升的权限或重定向到恶意页面，这可能导致病毒在用户机器甚至服务器上传播。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T16:59:23.863

从两个角度考虑：首先，用户几乎已经可以通过书签和浏览器的开发工具 javascript 控制台做到这一点。因此，您的服务器应该已经针对恶意客户端进行了强化。请记住，虽然用户可以使用浏览器访问您的站点，但攻击者可以使用任意 HTTP 或 TCP 消息进行攻击，而您必须处理这些问题。因此，从一开始，您就应该设计您的服务器，以将客户端视为最好的不受信任和最坏的敌对。

现在具体来说，网站很少允许这种事情，因为正如您正确想象的那样，它确实使事情变得更加棘手。但是，许多应用程序需要这种类型的解决方案。所以请记住，您从服务器发出的数据可能会被不受信任、损坏、泄漏（在隐私方面）或其他不安全的用户编写的 javascript 访问。不要相信您的 javascript 可以在浏览器中进行任何授权过滤。所有离开服务器的数据都必须经过适当的授权过滤，并且永远不要假设您的服务器会收到有效/授权的请求。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-11T17:22:30.893

我认为关键问题是 JavaScript 在哪里执行？如果它在仅对用户可见的页面上运行，则只有该用户会受到脚本的影响。例如，如果它在评论板上运行，那么其他用户可能会受到脚本的影响。例如，该脚本可能会向恶意服务器发出一个 http 请求，并将 cookie 与请求一起传递。

# ios - 填充 UITableView 的最有效方法

> ID：10555536
> 
> 赞同：1
> 
> 时间：2012-05-11T16:53:08.433
> 
> 标签：ios, uitableview, core-data, uinavigationcontroller, plist

我正在开发一个由`UINavigationController`和组成的应用程序，`UITableViews`导航控制器的根视图中将有许多项目（50+），并且每个详细视图中可能有 30 行。

填充列表的最有效方法是什么？核心数据还是 Plist？

规范中存在每月向列表推送更新的范围，因此它们始终保持最新。这会影响选择，哪种方法更容易批量更新？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:55:55.713

我会选择核心数据。

它相对容易使用；如果应用程序需要增长，它会为您提供更大的灵活性。Core Data 可以由 SQLLite 支持，因此性能非常好。批量更新也是可管理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:56:15.657

到目前为止，Core Data 是最好的，尤其是因为您希望以后能够更新这些数据

关于更新。我不会“推出”这些内容，而是让应用程序对它们进行投票，也许在启动时，然后在后台获取任何新内容。

编辑：同样使用 Core Data 并使用 NSFetchedResultsController 很容易将新记录平滑地动画化到 UITableView 中，因为它们在后台添加到数据存储中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T22:00:39.627

恕我直言，我会尽量保持简单，遵循古老的[KISS](http://en.wikipedia.org/wiki/KISS_principle)原则。

在您当前的情况下，您似乎只需要显示只读数据，因此您只需要数据（比如文件，plist 格式，或 xml，或 json，或 csv 或其他任何文件。只需解析文件，填充您的业务对象，将它们添加到数组中。将该数组用于您的主视图和详细视图。这里不需要核心数据（假设 50+ 您并不意味着 50 - 50'000，因为在这种情况下，核心数据的内存管理会有所帮助；-)

如果将来您需要处理更新，您将更新整个列表，因此实际上只是替换旧文件（简单），或者进行增量更改。我只建议考虑在后一种情况下开始使用核心数据。

我个人在几个项目中使用核心数据，我喜欢它。但我不会仅仅因为它存在就推荐它，毕竟它会带来开销和复杂性。如果你想使用核心数据，你需要花一些时间来理解它的概念。不要低估这一点，有很多东西要阅读和理解，可能还有几个 WTF 时刻（只需在 SO 中寻找核心数据问题）。

明确一点：我不想劝你不要使用核心数据，我只是问你妈妈可能会问的问题：你真的需要它吗？

# asp.net-mvc - 在 MVC 应用程序中使用 ILog 的单个实例

> ID：10555537
> 
> 赞同：1
> 
> 时间：2012-05-11T16:53:33.030
> 
> 标签：asp.net-mvc, log4net, ninject

我在我的**ASP.NET MVC**应用程序中使用**Ninject**进行**DI 。**我正在使用以下模块解决控制器中的依赖关系**`ILog`**

 **```
 public override void Load()
      {
          var configPath = ConfigurationManager.AppSettings["Log4NetConfigPath"];

          // Load the external config file for Log4Net
          XmlConfigurator.Configure(new System.IO.FileInfo(configPath));
          log4net.Util.LogLog.InternalDebugging = true;

          Bind<ILog>().ToMethod((c) => LogManager.GetLogger("AVLogger")).InSingletonScope();

      } 
```

我正在调用() 以在整个应用程序`InSingletonScope`中提供实例的单个实例。`ILog`我有一些问题？

1.  我真的需要为拥有单个实例而烦恼`ILog`吗？我可以删除`InSingletonScope`方法本身吗？

2.  有一个实例会`ILog`产生一些性能问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:03:39.180

这取决于创建记录器的成本。我不知道 log4net 的性能特点是什么，但如果它不贵，你应该创建一个新的。

当您使用 InSingletonScope() 时，这意味着只要您的工作进程存在，日志就会存在（即当它被回收或关闭时，记录器将被销毁）。这也意味着当你不需要它时，记录器会挂在身边。这与其说是“性能”问题，不如说是管理资源问题之一。**

# c# - 如何解决 ASP.NET DataContext 连接错误

> ID：10555541
> 
> 赞同：1
> 
> 时间：2012-05-11T16:53:54.733
> 
> 标签：c#, asp.net, sql-server, iis

我的 ASP.NET 网站出现以下错误。我刚把它移到另一台电脑上。运行 IIS，SQL Server Express 并将数据源机器名称更改为新机器名称。但是，在任何具有数据库访问权限的页面上，我都会收到屏幕截图中显示的错误： ![应用程序中的服务器错误](../Images/5409694963c5a497e3b8fe6dfaa90f63.png)

Innovations-news.aspx 这样创建了一个新的 DataContext：

```
dataContext = new DataContext(Config.ConnectionString); 
```

我的 Config 类根据当前 IP 返回连接字符串。例如：

```
return ConfigurationManager.ConnectionStrings["Development"].ConnectionString; 
```

在 web.config 中：

```
<connectionStrings>
<add name="Development" connectionString="Data Source=WORK51C0\SQLEXPRESS;Initial Catalog=Jri;Integrated Security=True;" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

以下来自 LinqToSql1.designer.cs

```
public DataContext() : 
            base(global::Jri.Data.Properties.Settings.Default.JriConnectionString1, mappingSource)
    {
        OnCreated();
    }

    public DataContext(string connection) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public DataContext(System.Data.IDbConnection connection) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public DataContext(string connection, System.Data.Linq.Mapping.MappingSource mappingSource) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public DataContext(System.Data.IDbConnection connection, System.Data.Linq.Mapping.MappingSource mappingSource) : 
            base(connection, mappingSource)
    {
        OnCreated();
    } 
```

关于如何最好地调试它的任何建议？或者甚至你知道什么是错的？！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:07:40.557

这是一个 ArgumentNullException。您以某种方式将 null 传递给构造函数或 DataContext。

附加一个调试器，看看为什么 Config.ConnectionString 或 mappingSource 返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:07:14.043

好的，这是我的配置类与 ConfigurationManager 的访问问题。所以我的临时解决方案是让这个类直接输出连接字符串，而不是尝试从web.config中获取。

# git - git push heroku master 中的错误通过代理后面的 ssh

> ID：10555546
> 
> 赞同：11
> 
> 时间：2012-05-11T16:54:25.550
> 
> 标签：git, heroku

**简要背景：**
嗨，我是一名大学生（在代理 10.3.100.211:8080 之后），刚接触 ROR、Git 和 Heroku，并且一直在关注 Ruby on Rails 教程。我使用 ~/.ssh/config 文件中的以下配置解决了通过 ssh 推送 git repo 的问题（之后它工作得很好）：

```
Host github.com  
Hostname ssh.github.com  
User git  
ProxyCommand corkscrew 10.3.100.211 8080 %h %p  
Port 443 
```

**问题：**

但是，在按照[https://devcenter.heroku.com/articles/git](https://devcenter.heroku.com/articles/git)使用 heroku 进行在线应用程序部署时，我收到以下错误：

```
$git push heroku master
ssh: connect to host heroku.com port 22: Connection refused  
fatal: The remote end hung up unexpectedly 
```

我目前的状态是：$ git remote -v

```
heroku  git@heroku.com:deep-dusk-1030.git (fetch)  
heroku  git@heroku.com:deep-dusk-1030.git (push)  
origin  git@github.com:shaileshgupta/testapp.git (fetch)  
origin  git@github.com:shaileshgupta/testapp.git (push) 
```

任何人都可以帮助我使用 github.com，例如将 heroku.com 的设置写入我的 ~/.ssh/config 文件中，以便使用 PORT 443/22 通过代理后面的 ssh 进行无缝连接。

任何帮助将不胜感激。

**更新（一些更多信息）** 我尝试了以下设置并收到以下错误：

配置：

```
Host heroku.com  
  Hostname ssh.heroku.com  
  User git  
  ProxyCommand corkscrew 10.3.100.211 8080 %h %p  
  Port 443 
```

错误：

```
$ git push heroku master  
ssh_exchange_identification: Connection closed by remote host  
fatal: The remote end hung up unexpectedly 
```

另一种配置：

```
Host github.com, heroku.com  
  Hostname ssh.github.com  
  User git  
  ProxyCommand corkscrew 10.3.100.211 8080 %h %p  
  Port 443 
```

错误：

```
$ git push heroku master  
ERROR: Repository not found.  
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:55:00.613

在你的 .ssh/config 中写下：

```
Host git_heroku
  Hostname heroku.com
  User git
  ProxyCommand corkscrew 10.3.100.211 8080 %h %p
  Port 443 
```

并在您的 .git/config 更改中

```
git@heroku.com 
```

到

```
git_heroku 
```

遥控器的完整行如下所示：

```
[remote "appname"]
  url = git_heroku:appname.git
  fetch = +refs/heads/*:refs/remotes/appname/* 
```

`git_heroku`是别名；您需要更改您的 git 配置以使用该别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T09:12:23.183

除了在您的 .ssh/config 中回答上述问题外：

*   使用代替`ssh.heroku.com`_`Hostname``heroku.com`
*   确保包含您的身份文件`IdentityFile "path to identity file"`
*   不指定`Port`

所以我的 .ssh/config 文件看起来像这样：

```
Host git_heroku
ProxyCommand corkscrew proxy.usurt.ru 3128 %h %p
HostName ssh.heroku.com
User git
IdentityFile "~/.ssh/id_rsa.pub" 
```

以及 .git/config 文件中的适当行：

```
[remote "heroku"]
    url = git_heroku:still-taiga-2820.git
    fetch = +refs/heads/*:refs/remotes/heroku/* 
```

# sql - 查询不同日期数据的有效方法？

> ID：10555556
> 
> 赞同：0
> 
> 时间：2012-05-11T16:55:15.733
> 
> 标签：sql, performance, pdo

我想使用 SQL 从 3 个不同的日子（连续）查询统计信息。显示将类似于：

> 今天创建了 15 个用户，昨天创建了 10 个用户，两天前创建了 12 个用户

SQL 将类似于（今天）：

```
SELECT Count(*) FROM Users WHERE created_date >= '2012-05-11' 
```

然后我会为昨天和前一天再做 2 次查询。

因此，我总共对整个数据库进行了 3 次查询。created_date 的格式是`2012-05-11 05:24:11`（日期和时间）。

有没有更有效的 SQL 方法来做到这一点，比如在一个查询中？

具体来说，我使用的是 PHP 和 SQLite（所以是 PDO 扩展）。

结果应该是 3 个不同的数字（每天一个）。

有没有机会有人可以比较一下一些性能数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:06:10.063

您可以使用`GROUP BY`：

```
SELECT Count(*), created_date FROM Users GROUP BY created_date 
```

这将为您提供日期列表，其中包含在该日期找到的记录数。您可以添加`created_date`使用普通`WHERE`子句的条件。

**编辑：**根据您的编辑：

```
SELECT Count(*), created_date FROM Users WHERE created_date>='2012-05-09' GROUP BY date(created_date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:11:32.650

最好的解决方案是使用`GROUP BY DAY(created_date)`. 这是您的查询：

```
SELECT DATE(created_date), count(*) 
FROM users
WHERE created_date > CURRENT_DATE - INTERVAL 3 DAY
GROUP BY DAY(created_date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:06:21.283

我相信这会起作用，尽管我无法对其进行测试：

```
SELECT
  (SELECT Count(*) FROM Users WHERE created_date >= '2012-05-11') as today,
  (SELECT Count(*) FROM Users WHERE created_date >= '2012-05-10') as yesterday,
  (SELECT Count(*) FROM Users WHERE created_date >= '2012-05-11') as day_before
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T17:08:52.923

像 jeroen 建议的那样使用`GROUP BY`，但如果您计划其他时期，您也可以设置如下范围：

```
SELECT SUM(IF(created_date BETWEEN '2012-05-01' AND NOW(), 1, 0)) AS `this_month`,
       SUM(IF(created_date = '2012-05-09', 1, 0)) AS `2_days_ago`
FROM ... 
```

如下所述，SQLite 没有`IF`功能，但有`CASE`。所以这样它应该工作：

```
SELECT SUM(CASE WHEN created_date BETWEEN '2012-05-01' AND NOW() THEN 1 ELSE 0 END) AS `this_month`,
       SUM(CASE created_date WHEN '2012-05-09' THEN 1 ELSE 0 END) AS `2_days_ago`
FROM ... 
```

# flash - 由于浏览器崩溃，node.js 不会结束 TCP 连接？

> ID：10555561
> 
> 赞同：1
> 
> 时间：2012-05-11T16:55:51.260
> 
> 标签：flash, node.js, tcp

我在浏览器窗口中使用 Flash 客户端连接到 nodejs 服务器。当 borwser 正常关闭时套接字连接结束，当我在任务管理器连接中结束浏览器的进程时不会结束。有什么办法可以解决吗？

# git - 多个分支之间的 git 暂存和提交

> ID：10555563
> 
> 赞同：16
> 
> 时间：2012-05-11T16:55:55.690
> 
> 标签：git, branch

我显然根本不懂 git。这就是我得到的：

```
git branch  (outputs that I'm on master)
git checkout -b foo
echo "next line" >> file (file is an existing file)
git add file (stages)
git checkout master
git status (shows that file has "next line" and is staged!!)
git commit (commits the changes that were staged on branch foo!!)
git checkout foo 
```

这是踢球者。foo 现在不显示对工作目录或暂存中的文件所做的任何更改。

所以看起来 - 您所做的任何更改，包括修改文件和暂存，都发生在所有分支上。当您提交到特定分支时，这些更改将在所有其他分支上丢弃，除了您提交的分支。

这实际上是怎么回事？有人可以让我觉得这有意义吗？这听起来完全是古怪的行为，显然我没有得到让这成为明智之举的设计理念。

编辑明确的例子：

```
$ mkdir element
$ cd element
$ git init
Initialized empty Git repository in /home/dan/element/.git/
$ echo "one" >> one
$ git add one
$ git commit -m msg
[master (root-commit) 36dc8b0] msg
1 files changed, 1 insertions(+), 0 deletions(-)
create mode 100644 one
$ git checkout -b fire
Switched to a new branch 'fire'
$ echo "next line" >> one
$ git checkout master
M       one
Switched to branch 'master'
$ cat one
one
next line
$ 
```

这显然与 git pro 书中的内容相矛盾：

`This is an important point to remember: Git resets your working directory to look like the snapshot of the commit that the branch you check out points to. It adds, removes, and modifies files automatically to make sure your working copy is what the branch looked like on your last commit to it.`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T17:11:57.317

*添加*文件时，您在哪个分支上并不重要，只有在您*提交*文件时才重要。所以如果你这样做：

```
git add file
git checkout master
git commit 
```

您已将文件提交到 master 分支。

这是一个完整的示例，带有输出。我们从一个新的存储库开始：

```
$ git init
Initialized empty Git repository in /home/lars/tmp/so/repo/.git/ 
```

此时，我们在`master`分支上，还没有添加任何文件。让我们添加一个文件：

```
$ date > file1
$ cat file1
Fri May 11 13:05:59 EDT 2012
$ git add file1
$ git commit -m 'added a file'
[master (root-commit) b0764b9] added a file
1 files changed, 1 insertions(+), 0 deletions(-)
create mode 100644 file1 
```

太好了，我们现在有了一个`master`带有一次提交的分支 ( )。让我们创建新分支：

```
$ git checkout -b foo
Switched to a new branch 'foo'
$ git branch
* foo
  master
$ ls
file1 
```

现在我们将添加一行到`file1`.

```
$ date >> file1
$ git status
# On branch foo
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   file1
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

这表明该文件已被修改，但尚未暂存。让我们暂存文件并提交它：

```
$ git add file1
$ git commit -m 'made a change'
[foo 761bed9] made a change
 1 files changed, 1 insertions(+), 0 deletions(-) 
```

并重新运行`git status`：

```
$ git status
# On branch foo
nothing to commit (working directory clean) 
```

此时，文件如下所示：

```
Fri May 11 13:05:59 EDT 2012
Fri May 11 13:07:36 EDT 2012 
```

如果我们切换回`master`分支，我们将看到没有第二行的文件的早期版本：

```
$ git checkout master
Switched to branch 'master'
$ cat file1
Fri May 11 13:05:59 EDT 2012 
```

对文件的更改与提交它们的分支隔离。

在您更新的示例中，这...

```
$ git checkout master 
```

...不会产生错误，因为此时两者中的“one”版本`master`是`fire`相同的。工作目录中的更改同样适用于任一版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-06T00:56:59.523

暂存区 aka 索引对所有分支都是通用的，这解释了您的观察

# c++ - C++11 std::bind 和 boost::bind 的区别

> ID：10555566
> 
> 赞同：70
> 
> 时间：2012-05-11T16:56:04.207
> 
> 标签：c++, c++11, boost, boost-bind, stdbind

两者有什么区别吗？或者我是否可以安全地替换代码中出现的每一个`boost::bind`by`std::bind`从而消除对 Boost 的依赖？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-11T17:13:33.333

*   `boost::bind` [重载了关系运算符](http://www.boost.org/libs/bind/#bind.purpose.overloaded_operators_new_in_boos)，`std::bind`没有。

*   `boost::bind` [支持非默认调用约定](http://www.boost.org/libs/bind/#bind.implementation.stdcall)，`std::bind`不保证（标准库实现可以将其作为扩展提供）。

*   `boost::bind`提供了一种直接机制，允许*防止*对嵌套绑定表达式 ( [`boost::protect`](http://www.boost.org/libs/bind/#bind.purpose.using_nested_binds_for_function_)) 的急切求值，`std::bind`但没有。（也就是说，如果他们愿意，可以使用`boost::protect`with `std::bind`，或者自己简单地重新实现它。）

*   `std::bind`提供了一种直接机制，允许将任何用户定义的仿函数视为嵌套绑定表达式，以*强制*进行急切求值（[`std::is_bind_expression`](http://en.cppreference.com/w/cpp/utility/functional/is_bind_expression): [func.bind.isbind]/1, [func.bind.bind]/10），`boost::bind`但没有。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-08-07T00:36:25.143

除了其他答案中引用的几个差异之外，还有另外两个差异：

*   `boost::bind`在某些情况下似乎处理重载的函数名称，而`std::bind`没有以相同的方式处理它们。见 [c++11 常见问题](http://www.stroustrup.com/C++11FAQ.html#std-function)

（使用 gcc 4.7.2，boost lib 版本 1_54）

```
void foo(){}
void foo(int i){}

auto badstd1 = std::bind(foo);  
//compile error: no matching function for call to bind(<unresolved overloaded function type>)
auto badstd2 = std::bind(foo, 1); 
//compile error: no matching function for call to bind(<unresolved overloaded function type>)
auto std1 = std::bind(static_cast<void(*)()>(foo)); //compiles ok
auto std2 = std::bind(static_cast<void(*)(int)>(foo), 1); //compiles ok
auto boost1 = boost::bind(foo, 1); //compiles ok
auto boost2 = boost::bind(foo); //compiles ok 
```

因此，如果您只是将所有内容替换`boost::bind`为`std::bind`，您的构建可能会中断。

*   `std::bind`可以无缝绑定到 c++11 lambda 类型，而`boost::bind`从 boost 1.54 开始，似乎需要用户输入（除非定义了 return_type）。请参阅[提升文档](http://www.boost.org/doc/libs/1_55_0/libs/bind/bind.html#with_function_objects)

（使用 gcc 4.7.2，boost lib 版本 1_54）

```
auto fun = [](int i) { return i;};
auto stdbound = std::bind(fun, std::placeholders::_1);
stdbound(1);

auto boostboundNaive = boost::bind(fun, _1);  //compile error.
// error: no type named ‘result_type’ ...
auto boostbound1 = boost::bind<int>(fun, _1); //ok
boostbound1(1);
auto boostbound2 = boost::bind(boost::type<int>(), fun, _1); //ok
boostbound2(1); 
```

因此，如果您只是将所有内容替换`std::bind`为`boost::bind`，您的构建也可能会中断。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-13T09:54:31.700

除了上面列出的之外，boost::bind 还有一个重要的扩展点：get_pointer() 函数，它允许将 boost::bind 与任何智能指针集成，例如。ATL::CComPtr 等 [http://www.boost.org/doc/libs/1_49_0/libs/bind/mem_fn.html#get_pointer](http://www.boost.org/doc/libs/1_49_0/libs/bind/mem_fn.html#get_pointer)

因此，使用 boost::bind 你也可以绑定一个weak_ptr： http: [//lists.boost.org/Archives/boost/2012/01/189529.php](http://lists.boost.org/Archives/boost/2012/01/189529.php)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-11T16:58:38.247

我没有完整的答案，但`std::bind`会使用可变参数模板而不是参数列表。

占位符在`std::placeholders`as in`std::placeholders::_1`而不是全局命名空间中。

我将命名空间别名为 stdph

```
namespace stdph=std::placeholders; 
```

除此之外，我更新到 C++11 没有问题

# facebook - Facebook 评论框显示带有和不带有“http://www...”前缀的不同内容。（在 joomla 中）

> ID：10555574
> 
> 赞同：0
> 
> 时间：2012-05-11T16:56:29.000
> 
> 标签：facebook, joomla, facebook-comments

我的确切问题是我收到了这些网址的不同评论内容：http: [//kornyezetvedelem.co.hu/index.php/187-a-kozteri-futoversenyt-is-megadoztatjak](http://kornyezetvedelem.co.hu/index.php/187-a-kozteri-futoversenyt-is-megadoztatjak)
[http://www.kornyezetvedelem.co.hu /index.php/187-a-kozteri-futoversenyt-is-megadoztatjak](http://www.kornyezetvedelem.co.hu/index.php/187-a-kozteri-futoversenyt-is-megadoztatjak)

我该如何解决这个问题？

感谢您的回答！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T13:27:53.870

这是正常的。始终使用带有 www 前缀的域

# javascript - 添加动画以显示/隐藏javascript函数

> ID：10555575
> 
> 赞同：1
> 
> 时间：2012-05-11T16:56:34.097
> 
> 标签：javascript, animation, hide, show

这是我编写的第一个 javascript 代码，我遇到了一些麻烦。我正在制作一个垂直菜单，它将显示链接 onclick 的附加信息，同时隐藏任何其他链接的内容。我想将 .animate 'slow' javascript 添加到函数中，但有一些困难。这就是我所拥有的：

```
<script type="text/javascript">
function reveal(id) {
   var e = document.getElementById(id);
   if(e.style.display== 'block')
e.style.display= 'none';
   else
e.style.display= 'block';
e.style.opacity= '1';
    }
 </script>

 <script type="text/javascript">
 function hide(id) {
   var e = document.getElementById(id);
   if(e.style.display== 'block')
e.style.display= 'none';
   else
e.style.display= 'none';
    }
 </script> 
```

我尝试了多种方法来放置“动画”标签，但似乎无法得到它。真诚感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:38:44.930

看着小提琴，似乎很混乱。我想出了一套更简洁的代码，你现在可以使用，但你还有很多东西要学。小提琴添加了[http://jsfiddle.net/KMDjR/7/](http://jsfiddle.net/KMDjR/7/)确保您调用 jquery （在小提琴中，它在左侧调用，但在您的页面中，您需要自己调用它，如下面的代码所示）

```
<html>
<head>

<style>
#foo{
display: none;
}

#poo{
display: none;
}
</style>
<!-- calling jquery  -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $('.toggleFoo').live('click', function() {
        $('#foo').fadeIn(1000);
        $('#poo').fadeOut(1000);
    });

    $('.togglePoo').live('click', function() {
        $('#poo').fadeIn(1000);
        $('#foo').fadeOut(1000);
    });

});
</script>
</head>
    <body>
        <a href="#" class="toggleFoo">Click here to toggle visibility of element #foo</a><br /><br />
        <div id="foo">This is foo</div>

        <a href="#" class="togglePoo">Click here to toggle visibility of element #poo</a><br /><br />
        <div id="poo">This is poo</div>
</body>
</html> 
```

# actionscript-3 - Adobe Flex：无法导航到动态 URL

> ID：10555577
> 
> 赞同：0
> 
> 时间：2012-05-11T16:56:41.427
> 
> 标签：actionscript-3, apache-flex, url, itemrenderer

目前在我的应用程序中，我可以访问我的用户数据库，但现在当我点击他们的头像或用户名时，我需要打开用户的 Facebook 页面。我可以通过 访问用户的 facebook id `data.facebook id`。我之前确实有工作代码，但它需要我输入一个静态 URL，但我需要根据用户的 id 生成 URL。到目前为止，这是我的代码

```
private function newBrowserWindow():void
{
    //Creating a URL for a facebook profile
    trace(data.facebookid);
    var facebookUrl:* = "http://www.facebook.com/" + data.facebookid;
    navigateToURL(facebookUrl);
} 
```

我使用以下代码访问此函数：

```
<s:Image id="fbImg" source="http://graph.facebook.com/{data.facebookid}/picture?type=normal" x="0" y="0" click="newBrowserWindow()"/>          
<s:Label id="usernameLbl" x="120" y="0" fontFamily="Calibri" fontSize="25" fontWeight="bold" text="{data.firstname} {data.lastname}" click="newBrowserWindow()"/> 
```

我的代码没有显示任何错误，所以我不知道出了什么问题。我以前的工作代码要求我通过访问单击处理程序`click="newBrowserWindow('http://www.mysite.com')`，因此该函数需要一个对象来处理，但我删除了它，因为我似乎无法绕过输入静态 URL。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:59:03.210

`URLRequest`在[navigateToURL](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)中使用：

```
 navigateToURL(new URLRequest(facebookUrl)); 
```

# javascript - 如何使用 jQuery Image Gallery 插件加载加载本地图像

> ID：10555578
> 
> 赞同：1
> 
> 时间：2012-05-11T16:56:42.163
> 
> 标签：javascript, json, jquery

我正在使用 **[jQuery-Image-Gallery](https://github.com/blueimp/jQuery-Image-Gallery)** jQuery 插件。它是一个全屏 jQuery 照片库。我下载了它，并且在它的演示中运行良好。它使用 ajax 请求将图像加载到 flickr。如下；

```
$.ajax({
    url: 'http://api.flickr.com/services/rest/',
    data: {
        format: 'json',
        method: 'flickr.interestingness.getList',
        api_key: '7617adae70159d09ba78cfec73c13be3'
    },
 dataType: 'jsonp',
    jsonp: 'jsoncallback'
}).done(function (data) {
    var gallery = $('#gallery'),
        url;
    $.each(data.photos.photo, function (index, photo) {
        url = 'http://farm' + photo.farm + '.static.flickr.com/' +
            photo.server + '/' + photo.id + '_' + photo.secret;
        $('<a rel="gallery"/>')
            .append($('<img>').prop('src', url + '_s.jpg'))
            .prop('href', url + '_b.jpg')
            .prop('title', photo.title)
            .appendTo(gallery);
    });
}); 
```

这是完美的工作。但我想在`images/photos`文件夹中显示我的本地文件（在我的本地主机/服务器中）。我有 PHP 服务器。我怎样才能做到这一点？

我想知道 Ajax JSON 回调结构，以便我们可以使用自定义 PHP 文件人为地重新创建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:31:00.590

**PHP：**

```
<?php 

    $path = dirname(__FILE__). '/images/photo'; // you may need to change the path

    /**
     Use 'opendir(".")' if the PHP file is in the same folder as your images. 
     Or set a relative path 'opendir("../path/to/folder")'.
    */

    $folder = opendir($path); 

    $pic_types = array("jpg", "jpeg", "gif", "png"); // restrict the extension [optional]

    $index = array();

    // looping over the images and push them into array

    while ($file = readdir ($folder)) {

      if(in_array(substr(strtolower($file), strrpos($file,".") + 1),$pic_types))
        {
            array_push($index,$file);
        }
    }
    closedir($folder); // close the dir opended by opendir()

    echo json_encode(array('images' => $index)); // sending to array of images as JSON
?> 
```

**jQuery：**

```
$.ajax({
    url: 'images.php', // assume that you php file name is images.php [change as you need]
    dataType: 'json', // as you send request to same domain, so you don't need jsonp
}).done(function (data) {
    var gallery = $('#gallery'),
        url = '';
    // data.images contain the name of images as array

    $.each(data.image, function (index, photo) {
        url = '/images/photo/' + photo; // photo will contain only image name
        $('<a rel="gallery"/>')
            .append($('<img>').prop('src', url + '_s.jpg'))
            .prop('href', url + '_b.jpg')
            .prop('title', photo.title)
            .appendTo(gallery);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T02:34:47.450

因为数组名称在 PHP 中是 'images'

```
echo json_encode(array('images' => $index)); // sending to array of images as JSON 
```

jQuery中需要相同的数组名称（图像---->图像）

```
$.each(data.images, function (index, photo) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:26:25.440

您需要将此脚本中的 url 更改为本地文件。然后你需要编写一个将json字符串输出到ajax的php脚本。这可能更容易使用[http://husbandman.org/husbandman/fotoexpose/](http://husbandman.org/husbandman/fotoexpose/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:06:20.330

```
$.ajax({
            type: 'POST',
            url: 'ajax.php',
            dataType: 'json',
            cache: false,
            success: function(result) {
                $.each(result, function(key,val){

var gallery = $('#gallery'), url;
            url = val;
            $('<a rel="gallery"/>')
                .append($('<img>').prop('src', 'images/thumbs/' + url))
                .prop('href', 'images/photos/' + url)
                .prop('title', url)
                .appendTo(gallery);

                });
           },
    }); 
```

# python - 通常使用 lambda 函数作为字符串过滤 Python 对象数组中的值

> ID：10555581
> 
> 赞同：3
> 
> 时间：2012-05-11T16:57:00.310
> 
> 标签：python, functional-programming, lambda

我正在研究一个通用框架，并且在某些时候我试图以通用方式过滤变量。以下面的类为例：

```
class X:
    def __init__(self, val):
        self.val = val 
```

`val`然后我有一个具有任意值的对象数组：

```
arr = [X("1"), X("2"), X("2"), X("3"), X("foo"), X("5"), X("3")] 
```

我的目标是有一个函数，它接受一个 lambda 函数和一个变量名**作为字符串**（因为它们是用户提供的），目前实现如下：

```
def process(lambda_f_str, var_str):
    # should return [1, 2, 3, 5]
    return list(set(filter(lambda x: x, map(eval(lambda_f_str), eval(var_str))))) 
```

我希望能够使用给定的 lambda 函数字符串调用此方法，该字符串将仅返回这些对象的唯一整数值​​（在此示例中，我希望`[1 2 3 5]`，顺序无关紧要）。

我试过这样的事情：

```
process("lambda x: x.val if isinstance(x.val, int) else None", "arr") 
```

但这不起作用，因为整数仍然作为我的数组中的字符串传递（我无法控制，这是用户提供的，所以我无法做出任何假设）。

我想做相当于

```
try:
    int(x)
except:
    # do something if not an int 
```

但我不认为你可以在 lambda 函数中做到这一点......你可以吗？至少我还没弄清楚怎么做。

我很想知道如何编写这个 lambda 以通用方式进行过滤。我宁愿避免更改该`process`方法，因为这是一个通用函数，为了简洁起见，它执行此示例代码中未包含的其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:06:27.497

试试这个...

```
s = "lambda x: int(x.val) if x.val.isdigit( ) else None"
print process(s, "arr") 
```

我回...

[1、2、3、5]

请注意，`.isdigit( )`如果数字以逗号或小数形式给出，该方法将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:08:40.517

你真的需要评估吗？

```
f = lambda x: x.val if isinstance(x.val, int) else (int(x.val) if isinstance(x.val, basestring) and x.isdigit() else None) 
```

不是 100% 的证明，例如它不需要`123L`哪个是有效的 Python。

# ios - 默认显示当前位置标注

> ID：10555583
> 
> 赞同：2
> 
> 时间：2012-05-11T16:57:08.357
> 
> 标签：ios, annotations, mapkit, default, show

我在 mapkit 中显示了当前位置注释（蓝点）。点击蓝点后显示注释，如何默认显示注释？，当我启动视图时？没有敲击别针。

```
 - (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views {
    for(MKAnnotationView *annotationView in views) {
        if(annotationView.annotation == mv.userLocation) {

            self.mapView.userLocation.title= @"Current";
            self.mapView.userLocation.subtitle= @"Location";

            MKCoordinateRegion region;
            MKCoordinateSpan span;

            span.latitudeDelta=0.002;
            span.longitudeDelta=0.002; 

            CLLocationCoordinate2D location=mv.userLocation.coordinate;

            region.span=span;
            region.center=location;

            [mv setRegion:region animated:YES];
            [mv regionThatFits:region];

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:46:48.243

在这种情况下， selectAnnotation 应该可以工作，不是吗？稍等片刻后执行选择器。

....与以前相同的代码，但插入：

```
 id annotation = annotationView.annotation;
            [self performSelector:@selector(selectUserLocation:) withObject:annotation afterDelay:0.1f];
        }
    }
}

- (void)selectUserLocation:(id)annotation{
    [self.mapView selectAnnotation:annotation animated:YES];
} 
```

# python - 带有 get_or_create 的 Django IntegrityError

> ID：10555587
> 
> 赞同：0
> 
> 时间：2012-05-11T16:57:23.753
> 
> 标签：python, mysql, django

我对 Django 的 get_or_create 有问题，我在一些帖子中看到了这个问题，已经解释了它是一个 MySQL 问题，所以我关注了这篇文章 [http://www.no-ack.org/2010/07/mysql-transactions-和-django.html](http://www.no-ack.org/2010/07/mysql-transactions-and-django.html)

基本上说，由于`get_or_create`MySQL`IntegrityError`的默认事务隔离为`REPEATABLE READ`.

我按照帖子的建议进行了操作，将其添加`transaction-isolation = READ-COMMITTED`到我的 `/etc/mysql/my.cnf`文件中，但遇到了同样的错误。所以我想知道是否还有其他解决方案。

这是一个复制问题的示例模型

```
class Author(models.Model):
    name = models.CharField(max_length=100, unique=True)

class Book(models.Model):
    name = models.CharField(max_length=100, unique=True)
    author = models.ForeingKey(Author) 
```

如果我有一长串作者和书籍，有些重复。我运行一个forloop来遍历每个作者/书，使用get_or_create来创建或获取相应的对象，它会抛出一个IntegrityError。

循环类似于..

```
authors = ['Author1', 'Author2', 'Author3', 'Author4', 'Author5']
books = ['book1', 'book2', 'book3', 'book4', 'book5']

for author, book in zip(authors, books):
    author = Author.objects.get_or_create(name=author)[0]
    author.book_set.get_or_create(name=book) # Error happens here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:07:12.797

一般来说，您不应该`get_or_create`与数据库中不唯一的字段一起使用。避免此问题的一种方法是强制 name 字段的唯一性：

```
class Author(models.Model):
    name = models.CharField(max_length=100, unique=True) 
```

# php - 如何使用（mod rewrite 驱动的）nice URL 读取 $_GET 变量

> ID：10555589
> 
> 赞同：4
> 
> 时间：2012-05-11T16:57:47.760
> 
> 标签：php, .htaccess, get

各位程序员好，

我第一次使用了不错的 URL，但我不太明白为什么我无法从脚本中读取我的 oAuth 响应。

所以这是我的设置：

.htaccess

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 
```

我有一个使用 googles oAuth 系统登录用户的脚本。该脚本将用户发送到 google api 页面，在那里他们可以允许我的网站读取他们的电子邮件地址，然后使用大量 $_GET 变量将用户直接发送回我的网站。

我告诉谷歌发送给

```
http://mywebsite/login/google/response 
```

它做到了..

问题是谷歌以正常的 GET 格式发送结果，如下所示：

```
http://mywebsite/login/google/response/?openid.ns=http%3A%2F%2Fspecs.openid.ne[..] 
```

我的脚本无法阅读它..

当它们与漂亮的 URL 混合时，有什么方法可以读取 $_GET 变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T16:59:47.907

您需要将[`QSA`](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)（查询字符串追加）添加到您的标志中。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [QSA,PT,L] 
```

然后你的`$_GET`将包含正确的值。

# qt - 在 Qt DBUS 中编组 16 位 unsinged int

> ID：10555591
> 
> 赞同：2
> 
> 时间：2012-05-11T16:57:53.757
> 
> 标签：qt, types, marshalling, dbus

在 QT 中，我们有以下可用的 16 位无符号表示：

```
typedef unsigned short int  uint16_t;   (in stdint.h)
typedef unsigned short      quint16;    (in qglobal.h) 
```

这两者有什么区别？我得到了一个带有以下 typedef 的外部头文件（我不能修改）：

```
typedef uint16_t MyCustomId; 
```

此“MyCustomId”字段用于插槽信号以与 DBUS 通信。

```
class CMyDbusProxy: public QDBusAbstractInterface
{
Q_OBJECT
Q_SIGNALS: 
    void Test(MyCustomId);
}; 
```

问题是 CMyDbusProxy 没有注意到从 DBUS 服务发送的信号，因此根本不会触发任何插槽。如果我手动将 typedef 更改为（我不应该这样做，它只是为了测试）：

```
typedef quint16 MyCustomId; 
```

一切正常。DBUS服务端的信号有“signature='q'”，表示uint16。

如何克服这种类型匹配问题并使用“uint16_t”接收信号？

# apache - 可以按需启动的用于 Windows 的简单 HTTP 服务器应用程序？

> ID：10555592
> 
> 赞同：6
> 
> 时间：2012-05-11T16:57:56.453
> 
> 标签：apache, ant, jetty, httpserver

我需要一个满足以下条件的简单 HTTP 服务器应用程序：

1.  它必须在 Windows 上运行。
2.  它不得*需要*任何类型的**新**Windows 安装：程序、框架、服务等。
3.  它可以使用 Java（例如 JAR）或 .NET 运行，因为这些框架已经全局安装在服务器上。
4.  它必须能够根据需要由 Ant 构建（和/或从命令行）启动**和停止。**
5.  它必须能够托管在运行时指定的端口上（即*不在*配置文件中）。
6.  它必须只能从运行时指定的根目录（即*不在*配置文件中）托管基本的静态内容（JavaScript、CSS、图像、HTML）。
7.  必须不需要一个巨大的分发文件夹，例如完整的 Jetty 分发大约是 40 MB...太大了！最好小于 1 MB。
8.  它*不需要*支持 HTTPS (SSL)。
9.  它不需要*与*任何 IDE 集成。
10.  它*不需要*托管任何“Web 应用程序”，例如 EAR、WAR、JAR 等。

有什么建议吗？我还需要一个指南/教程解释来设置它们，特别是如果它们是基于 Java 的，因为我在 Java 方面的背景很少（老实说，在 Ant 方面也没有*那么多背景）。*

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-23T14:15:09.570

我会推荐 onehttpd - [https://code.google.com/p/onehttpd/](https://code.google.com/p/onehttpd/)

这是一个 62.5K 的可执行文件。您可以像运行它一样简单`onehttpd.exe -p 80 c:\var\www`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T21:31:25.233

如果你需要一个非常轻量级的 HTTP 服务器，你可以使用 NanoHTTPD。它作为一个小罐子分发（如果我记得很清楚，这是一个独特的类）。

此外，根据您的需要（和 BSD 许可）进行修改非常容易。

[http://elonen.iki.fi/code/nanohttpd/](http://elonen.iki.fi/code/nanohttpd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:14:31.867

以下是一些轻量级 Web 服务器，它们似乎可以在 Windows 上运行并且具有最小的依赖项：

树脂： http: [//www.caucho.com/resin-web-server/](http://www.caucho.com/resin-web-server/) <--需要java

海华沙：[http ://www.hiawatha-webserver.org/](http://www.hiawatha-webserver.org/)

切诺基： http: [//www.cherokee-project.com/doc/](http://www.cherokee-project.com/doc/)

# python - 每个节点边数变化的随机邻接矩阵

> ID：10555593
> 
> 赞同：7
> 
> 时间：2012-05-11T16:57:57.483
> 
> 标签：python, algorithm, graph, matrix

以下函数返回一个随机生成的大小为 的邻接矩阵`nxn`，表示一个图。

```
import random

def random_adjacency_matrix(n):   
    matrix = [[random.randint(0, 1) for i in range(n)] for j in range(n)]

    # No vertex connects to itself
    for i in range(n):
        matrix[i][i] = 0

    # If i is connected to j, j is connected to i
    for i in range(n):
        for j in range(n):
            matrix[j][i] = matrix[i][j]

    return matrix 
```

这是一个非常幼稚的解决方案，我希望它满足两个额外的要求。

1.  矩阵表示的图必须是全连接的，换句话说，不能有任何节点在一定数量的步骤中无法从任何其他节点到达。

2.  每个节点都有许多边。现在它是完全随机的，因此一个节点有多少边相当一致，当`n`它很大时，所有图的平均边数往往也很大。我希望每个节点的平均边数变化更大，与图的大小无关，这样一些图的连接很少，而另一些则有很多。

编辑：使用 networkx 包，这似乎是我想要的，只有上面的第 1 点也满足：

```
import networkx, random
G = networkx.binomial_graph(50, random.random()) # 50 nodes, random probability of an edge 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:17:05.117

首先，让我们推荐[networkx图形库](http://networkx.lanl.gov/)。它非常易于使用，并且已经包含了一个很好的算法工具箱。例如，您可以轻松地测试一个图的连通性或在图中请求一组连接的组件。

其次，有多种命名的统计分布是经典的。如果你能找到你想要的那个，那将对你和任何愿意提供帮助的人都有帮助。从您给出的粗略描述来看，听起来您可能正在寻找幂律分布（又名“长尾”分布，另请参见“[无标度网络](http://en.wikipedia.org/wiki/Scale-free_network)”）。您在（例如）社交网络中经常看到这类分布，在这种情况下，连接性非常高的节点相对较少（即流行的节点），然后是连接性非常低的许多节点。在少数高度连接和许多稀疏连接之间，中间存在一种指数衰减。这似乎是描述随机生成的社交网络的论文：[社交网络的随机图模型](http://www.pnas.org/content/99/suppl.1/2566.full.pdf)。

给定 networkx 和适当的统计分布，您应该能够构建您的梦想图。祝你的项目好运，编码愉快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:40:21.750

没有提供足够的信息来完全指定您想要的图表类型。然而，由于图通常是某种物理结构的抽象，所以对随机图的常见要求是**无标度的**。这些图具有度分布渐近服从幂律的性质。人口动态、Facebook 好友、引文网络和互联网流量都对某些领域具有幂律依赖性。生成无标度网络的规范方法是[Barabási-Albert 方法](http://en.wikipedia.org/wiki/BA_Model)。下面转载（来自维基百科）是创建这样一个网络的动画。它保证连接任何 N 并且泛化允许您设置连接。

![在此处输入图像描述](../Images/13ba7fdee324813b10b80dcce48fce26.png)

`networkx`可以轻松生成这些随机图：

```
import networkx

node_number = 20
initial_nodes = 2
G = networkx.barabasi_albert_graph(node_number, initial_nodes) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:09:33.843

问题1：

首先创建一个将所有节点连接在一起的随机生成树，然后添加其他边。

问题2：

创建一个所有`(i,j)`for`1 ≤ i < j ≤ n`的列表，打乱列表并获取前 k 个边。然后，您的图形将具有`n`顶点和`k±n`边。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T17:12:22.650

(1) 这很简单——只需**先创建一棵树**，并且只有在确保连通性之后——开始添加更多边。
这可以通过迭代地增加一组连接的顶点来轻松完成。
伪代码：

```
source <- select random vertex
set <- {source}
while set != V:
   chose a random vertex v from set, and u from V\set
   add (v,u),(u,v) as an edge
   add u to set 
```

(2)
我会**使用[正态分布](http://en.wikipedia.org/wiki/Normal_distribution)来选择每个节点的边数**。每个节点都会得到一个不同的随机变量——因此会有不同数量的节点。

*   我认为这是一个很好的方法，因为现实生活中事物往往呈正态分布（由于[中心极限定理](http://en.wikipedia.org/wiki/Central_limit_theorem)）。
*   您可以通过修改用于确定每个顶点的边数的随机变量的均值和方差来控制连通性。
*   您也可以使用任何其他分布来选择每个节点的边数，但我相信正态分布最适合。

# css - CSS子选择器但有一个标签

> ID：10555594
> 
> 赞同：0
> 
> 时间：2012-05-11T16:58:01.357
> 
> 标签：css, css-selectors

在第三个 li 标记中，无法在此 a 标记上获取 :nth(3) 选择器的语法。多么拗口。甚至可能吗？

在这个网站上

[www.cutlassancane.com/shopping/](http://cutlassandcane.com/shopping/)

我正在尝试更改第三个菜单项的颜色。Bandoli 有红色字体。它是 prestashop，所以我不能在它周围添加 span 标签，因为它会导致其他地方出现问题。

所以，我的问题是，有没有办法通过 CSS 使用第三个孩子或第 n 个选择器来做到这一点？

```
.sf-menu a, .sf-menu a:visited  { /* visited pseudo selector so IE6 applies text colour*/
    color:black;
    font-size:14px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:03:07.607

您可以使用`:nth-child()`，如下所示：

```
.sf-menu > li:nth-child(3) > a {
    color: #c0474c;    
} 
```

请注意，`:nth-child()`仅[现代浏览器支持](http://caniuse.com/css-sel3)。它在 IE8 或更低版本中不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:08:00.813

你的意思是说`.sf-menu > li:nth-child(3) > a`？

# node.js - 在 Mongoose 中插入后找不到文档

> ID：10555597
> 
> 赞同：2
> 
> 时间：2012-05-11T16:58:08.170
> 
> 标签：node.js, mongodb, mongoose

我正在处理一个具体而简单的案例。我需要一些帮助，因为我似乎无法找到解决方案。

我在 javascript 类中为 MongoDB 创建了一个简单的模式和模型。

```
this.UserSchema = new this.Schema({
    UserId: { type: String }, 
    IsToggle: { type: Boolean}
});

this.CalendarViewUserSchema = new this.Schema({ 
    _id:  { type: this.Schema.ObjectId },
    OwnerId: { type: String },
    UserList: [ this.UserSchema ] 
});

this.CalendarViewUser = this.mongoose.model('CalendarViewUsers',this.CalendarViewUserSchema); 
```

这是在构造函数中，我已经有很多数据库交互在工作，但我无法让这个工作正常。

我将此方法称为添加新文档：

```
AddCalendarViewUser : function(Id, UserToAddId){        
        NewUser = { UserId : UserToAddId, IsToggle : false };

        this.CalendarViewUser.update(
        { OwnerId : Id },
        { 
                       $set:  { OwnerId  : Id      },
           $push: { UserList : NewUser } 
                    },
        {upsert:true},
        function(err){
            if(err) {console.log(err);}
            else {console.log('Success');}
        }
    );
}, // this comma just introduces the next method. 
```

这工作正常。我可以看到使用 Mongo Explorer 正确创建了文档，如果我使用 .find() 从集合中检索所有内容，它就会显示出来。

然后，我尝试使用以下方法查找插入的 Doc：

```
FindCalendarViewUser : function(Id){
    this.CalendarViewUser.findOne(
                { OwnerID : Id }, 
                function(err,result){

            if(err) {console.log(err);}
            else{console.log(result);}  
        }
        );
} 
```

在这里，它返回结果 = null。

“Id”参数在这两种方法中都是一个字符串，就像 Schema 中的“OwnerId”一样。

我究竟做错了什么？

“OwnerId”和“Id”都是相同的。我也尝试将两者都转换为 ObjectId，但没有成功。

对不起，代码格式。

编辑：

基本上，我可以使用 _id 字段找到文档：

```
{ _id : '4fb0d1702edfda0104fc2b9f'} 
```

但是我在 OwnerId 字段中找不到它：

```
{ OwnerId : '4f55e1a6c2c7287814000001'} 
```

这些值直接取自数据库，因此它们对应于实际存储的值。

编辑2：

我刚刚发现如果我手动插入值：

```
$set:  { OwnerId  : '4f55e1a6c2c7287814000001' } 
```

然后通过完全相同的字符串搜索，它会返回文档！

```
this.CalendarViewUser.findOne(
                    { OwnerID : '4f55e1a6c2c7287814000001'}
... 
```

所以我猜它是在文档的 OwnerID 字段中插入了某种垃圾，或者与该字段的 Type 存在某种不兼容。我会发布结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:59:12.433

事实证明，FindCalendarViewUser 函数的回调函数需要在其自身周围加上双亲......它现在可以工作了，只需添加这些双亲......

```
FindCalendarViewUser : function(Id){
    this.CalendarViewUser.findOne(
        { OwnerID : Id }, 
        (function(err,result){

            if(err) {console.log(err);}
            else{console.log(result);}  
        })
    );
} 
```

这是工作示例。耶稣基督为什么。我可以发誓我在其他场合没有使用过。

编辑：现在它在没有父母的情况下工作。对不起。这一定是我在代码周围遇到的一些小问题。我就是找不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:57:02.900

错字？

```
if(err) {console.log(err);}
  else{console.log(err);} 
} 
```

# magento - 如何将自定义参数拉到造船厂并在订单网格中显示

> ID：10555602
> 
> 赞同：0
> 
> 时间：2012-05-11T16:58:29.120
> 
> 标签：magento, oscommerce

我正在使用shipworks从购物商店运送和提取订单数据。现在我想提取shipworks xml不支持的新订单字段。从购物商店中提取不支持的订单字段并显示的可能方法是什么它在造船厂订单网格上。任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:13:31.587

我们需要添加一些自定义信息，而造船厂非常有帮助，我们完成了。如果您打开 shipworks3.php 文件，您将在第 760 行看到以下内容

```
// Uncomment the following lines to include a custom product attribute in the downloaded data.
        // These will appear as Order Item Attributes in ShipWorks.
        //$product = Mage::getModel('catalog/product');
        //$productId = $product->getIdBySku($sku);
        //$product->load($productId);
        //$value = $product->getAttributeText("attribute_code_here");
        //if ($value)
        //{
        //     // write the gift message as an attribute
        //     writeStartTag("Attribute");
        //     writeElement("Name", "Attribute_title_here");
        //     writeelement("Value", $value);
        //     writeCloseTag("Attribute");
        //} 
```

您可以使用一个属性，也可以将其调整为一个订单属性。如果您具体让我知道您尝试导入哪些订单详细信息，我可以提供更多指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:19:03.217

[http://www.interapptive.com/ShipWorksIntegrationGuide.pdf](http://www.interapptive.com/ShipWorksIntegrationGuide.pdf)

此页面底部还有一些详细信息，[http://www.shipworks.com/shipworks/help](http://www.shipworks.com/shipworks/help)

# sql - 联合查询的结果顺序

> ID：10555603
> 
> 赞同：3
> 
> 时间：2012-05-11T16:58:30.510
> 
> 标签：sql

我有一个联合查询，它从两个不同的人群中获取计数。如何强制按查询中写入的顺序而不是按升序/降序返回结果？

```
select count(datediff(yyyy,dob,admitdate) as counts
from myTable
where condition
union
select count(datediff(yyyy,dob,admitdate) as counts
from myTable
where condition 
```

我希望第一个结果始终作为第一行返回。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T17:01:23.150

您必须使用 ORDER BY 子句指定顺序。在您的示例中，您可能会这样做：

```
SELECT 1 AS seq, COUNT(datediff(yyyy,dob,admitdate) as counts
  FROM myTable
 WHERE ...condition-1...
UNION
SELECT 2 AS seq, COUNT(datediff(yyyy,dob,admitdate) as counts
  FROM myTable
 WHERE ...condition-2...
 ORDER BY seq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:02:15.733

```
select 1, count(datediff(yyyy,dob,admitdate) as counts
from myTable
where condition
union
select 2, count(datediff(yyyy,dob,admitdate) as counts
from myTable
where condition
order by 1 
```

# jasper-reports - iReport：如何让一个群体依赖另一个群体

> ID：10555606
> 
> 赞同：1
> 
> 时间：2012-05-11T16:58:38.277
> 
> 标签：jasper-reports, ireport

我正在使用`iReport 3.7.1`，我想知道如何使一个组依赖于另一组。我希望第二个仅在第一个更改时出现。

**示例**：让我们考虑一个包含三个级别的示例，我们有一个`group A`包含`group B`和`group B`的`group C`。

在 PDF 中，`group A`出现在之前`group B`和`group B`出现在`group C`. 在每一页上，我们应该有：

```
A1 B11 c11 c12
A1 B12 C13
A2 B21 C21
A2 B22 C21 C22 C23 ... 
```

每次 B 的值发生变化时，A 的值都应该出现在前面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:32:31.203

在 iReport 中，右键单击报告检查器中的报告名称，然后单击“添加报告组”以启动新建组向导。将 A、B 和 C 添加为组。为每个组添加标题栏。在每个组标题带中放置一个文本框以定义组，然后单击“打印重复值”复选框以在每次子组更改时显示组标题。

# ruby-on-rails - 为什么 Rails 3 不允许完整的 html5 表单规范？

> ID：10555607
> 
> 赞同：0
> 
> 时间：2012-05-11T16:58:47.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html

我想我不明白为什么 Rails 3 声称提供 html5 表单助手，但只停留在新的输入类型上。是否有计划（或任何当前方式）允许附加功能，例如“必需”属性等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:20:04.313

您可以设置需要

```
text_field_tag 'text', 'text', :required => true 
```

Rails 还通过“audio_tag”和“video_tag”添加了对 html5 音频和视频的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:55:32.317

我相信您所谈论的所有功能目前都超出了 Rasil 的范围，实际上是由 和 之类的宝石提供`formtastic`的`simple_form`。

# python - 如何使用 boto 设置 S3 对象生命周期？

> ID：10555608
> 
> 赞同：5
> 
> 时间：2012-05-11T16:58:51.993
> 
> 标签：python, amazon-s3, boto

我已经使用[boto](https://github.com/boto/boto)将几个文件上传到 Amazon S3 。但是，我未能设置生命周期 using 语句（我知道这可以使用[AWS 管理控制台](http://aws.amazon.com/console/)来完成，但我需要让每个用户决定要保留文件多长时间）。

S3的[boto API 参考](http://docs.pythonboto.org/en/latest/ref/s3.html?highlight=lifecycle)正确记录了[configure_lifecycle(lifecycle_config, headers=None)](http://docs.pythonboto.org/en/latest/ref/s3.html?highlight=lifecycle#boto.s3.bucket.Bucket.configure_lifecycle)作为解决方案，但我无法配置它。任何人都可以更正我的代码吗？

谢谢！

```
key='key'
secretkey='secretkey'

#build the connection
conn = S3Connection(key, secretkey)
bucket = conn.create_bucket('przm')
k=Key(bucket)

#select and upload the file
name1='run1'
k.key=name1
k.set_contents_from_filename('RUN')
link1='https://s3.amazonaws.com/przm/'+name1
#allow anyone can download this file
k.set_acl('public-read-write')

#delete this file after one day. Can anyone give me some help here?
configure_lifecycle(lifecycle_config, headers=None) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T13:16:45.363

在此示例中，您没有显示“lifecycle_config”的来源。但是，您应该做的是创建一个 Lifecycle 对象，如下所示：

```
import boto.s3.lifecycle
lifecycle_config = boto.s3.lifecycle.Lifecycle()
lifecycle_config.add_rule('lc_rule_1', '/', 'Enabled', 1) 
```

有关Lifecycle 对象的详细信息以及上述参数的含义，请参见 class [boto.s3.lifecycle 。](http://readthedocs.org/docs/boto/en/latest/ref/s3.html#module-boto.s3.lifecycle)

一旦有了 Lifecycle 对象，就可以在调用[configure_lifecycle()](http://docs.pythonboto.org/en/latest/ref/s3.html?highlight=lifecycle#boto.s3.bucket.Bucket.configure_lifecycle)时使用它，如下所示：

```
bucket.configure_lifecycle(lifecycle_config) 
```

# java - Android - 颜色形式 %

> ID：10555612
> 
> 赞同：0
> 
> 时间：2012-05-11T16:59:11.250
> 
> 标签：java, android, colors

我有个问题。我需要从蓝色到红色的渐变。我的问题是我有一个双重价值，我需要得到一种颜色，无论是字符串还是整数。比如 0% 是 #FF0000FF 和 100% id #FFFF0000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:25:35.227

你需要做两件事：

1.  算出蓝色的数量和红色的数量
2.  将百分比缩放为 0-255 之间的数字

例如：

```
// scale from percents to a number between 0-255
private int scale(int percents)
{
    return (percents * 255) / 100;
}

private int getColorForPercents(int percents)
{
    int red = scale(percents);
    int blue = scale(100 - percents);
    return 0xff000000 | (red << 16) | (blue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:13:19.363

FF 是 255，所以 2.55 可以达到百分之一。只需将所需的百分比数字四舍五入转换为 HEX 即可。

# sql - 如何使用 Internet 连接连接到 SQL Server

> ID：10555613
> 
> 赞同：0
> 
> 时间：2012-05-11T16:59:13.567
> 
> 标签：sql, sql-server, sql-server-2008

我已经在我的系统上安装了 SQL Management Studio，并尝试使用 Internet 连接将其连接到放置在我市外的 SQL Server 2008。

到目前为止，安全对我来说并不重要。我怎样才能做到这一点？？提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:15:10.960

本地或互联网连接到您的 DBMS 之间没有区别。唯一要解决的是配置路由器，更准确地说是[NAT](http://fr.wikipedia.org/wiki/Network_address_translation)配置。您必须创建一个新规则，将传入连接重定向到本地主机...

**编辑**：转到您的路由器 IP 地址并输入登录名和密码，然后查看高级设置或其他类似的内容。您将找到指向 NAT 配置的链接。最后添加一个新规则（见我的屏幕）： ![在此处输入图像描述](../Images/d6503134e5b2ea0c1752a6ab560afd86.png)

我刚刚将所有传入流量（TCP）从端口 7878 重定向到我的 NAT 后面的服务器（192.168.1.3），监听端口 7878...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:27:45.173

打开 SQL Server Management Studio（简称 SSMS。）

单击文件->连接对象资源管理器

为服务器类型选择数据库引擎

对于服务器名称，输入数据库的 url

对于身份验证，请选择 SQL Server 身份验证

输入数据库的用户名和密码

基本上有人将不得不为您提供连接到数据库的 url（可能包括实例名称）和用户名/密码。它必须是 SQL Server 身份验证，因为您几乎可以肯定与数据库服务器不在同一个域中。

此外，如果数据库服务器位于防火墙或其他东西后面，您可能无法连接。但我假设您的问题是关于如何使用 SSMS ......

# vba - Excel VBA复制单元格的值以覆盖它的公式？

> ID：10555615
> 
> 赞同：1
> 
> 时间：2012-05-11T16:59:24.133
> 
> 标签：vba, excel

我有一个包含公式的单元格，它显示一个单词，如果我愿意，我希望能够编辑该单元格。问题是如果我尝试，它会显示公式，我想在它旁边创建一个按钮，允许公式被它显示的单词替换。我认为这个脚本会做到这一点，但显然不是。

有人可以告诉我我哪里出错了吗？

```
Sub Edit_Nonconformity()

    ThisWorkbook.Sheets("Sheet2").Cells(2, 40).Value = ThisWorkbook.Sheets("Sheet2").Cells(2, 40).Value
End Sub 
```

我想如果我复制单元格的“值”并将其粘贴回那里，它会覆盖脚本，至少我认为它会这样工作。

基本上，公式是从另一张表中提取的，因此它使用标准公式，我想要做的是按下按钮，如果您希望编辑单元格，则将单元格从显示所述文本的公式更改为可编辑文本。

这对任何人都有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:05:05.630

`Cells(2, 3) = Cells(2, 2)`设置 C2 中公式的结果 = B2 中的文本。

# c# - 可能不会在已启动的任务上调用 RunSynchronously

> ID：10555623
> 
> 赞同：36
> 
> 时间：2012-05-11T17:00:14.623
> 
> 标签：c#, async-await, task-parallel-library

我为对应用程序进行单元测试而创建的 ac# 类存在问题，特别是问题与 System.Threading.Tasks.Task 对象有关。

我有一个此类对象的列表，我想在它们上同步执行每个对象。

我称之为：

```
myTask.RunSynchronously(); 
```

当我这样做时，我总是收到以下错误，我不知道为什么我可以解决它。

> System.InvalidOperationException：可能不会在已启动的任务上调用 RunSynchronously。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-11T17:12:38.850

问题是您在调用时*启动*`TaskFactory.StartNew`了任务- 我的意思是，它甚至是以您正在启动任务的方法的名称。`StartNew`创建任务，然后`Start`代表您调用。=D

如果需要，您可以`Wait`像@Peter Ritchie 所说的那样执行任务，也可以像这样手动创建任务：

```
var task = new Task(() => { ... });
task.RunSynchronously(); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-11T17:04:19.960

它已经开始了，只需使用`myTask.Wait()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-24T12:02:54.260

您尝试再次运行任务，或者它处于执行或取消状态。检查以下文档的一部分：

> **Task.RunSynchronously 方法**
> 
> 在当前 TaskScheduler 上同步运行 Task。
> 
> **InvalidOperationException** 任务未处于要启动的有效状态。它可能已经启动、> 执行或取消，或者它可能是以不支持直接调度的方式创建的。

来源：[Docs .NET Task.RunSynchronously 方法](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.runsynchronously?view=net-5.0)

# jquery - jQuery如果url第一段包含

> ID：10555624
> 
> 赞同：1
> 
> 时间：2012-05-11T17:00:18.713
> 
> 标签：jquery

如果 url 包含这样的内容，并且我想如果 segment1 等于某物，则执行此操作...

```
http://stackoverflow.com/segment1/segment2 
```

喜欢：

```
if (segment1 = 'anyword')
{
 ..then do this
} 
```

类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T17:03:11.983

您可以拆分网址：

```
var url = "http://stackoverflow.com/segment1/segment2";

var splits = url.replace('http://', '').split('/');

if(splits[1] == "segment1"){

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:07:05.433

你可以这样做

```
var myurl = "http://stackoverflow.com/segment1/segment2";

if(myurl.split('/')[3] == "segment1")
{
//your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:02:50.850

```
var s1 = "foo";
alert(s1.indexOf("oo") != -1); 
```

或者

```
if (/anyword/.test(self.location.href))
{
   ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T17:03:52.000

您可以拆分 url，并检查每个路径名等，但如果您只是想检查 url 是否包含您可以执行的操作：

```
var url = 'http://stackoverflow.com/segment1/segment2';

if (url.indexOf('segment1') != -1) {
   //do this
} 
```

# android - Android ContactsContract.Directory API

> ID：10555628
> 
> 赞同：3
> 
> 时间：2012-05-11T17:00:52.657
> 
> 标签：android, contactscontract

我正在尝试从全球通讯簿（公司帐户）中选择一个电话号码。我想使用本机选择器/API，因为我不想提示用户输入登录凭据。我遇到了 ContactsContract.Directory API。但是，我找不到任何有关如何使用它的示例。我试过了：

```
private static final String[] PEOPLE_PROJECTION = new String[] {
    ContactsContract.Directory._ID,
    ContactsContract.Directory.DISPLAY_NAME,
};

StringBuilder buffer = null;
String[] args = null;
if (constraint != null) {
    buffer = new StringBuilder();
    buffer.append("UPPER(");
    buffer.append(Phone.DISPLAY_NAME);
    buffer.append(") GLOB ?");
    args = new String[] { constraint.toString().toUpperCase() + "*" };
}

Cursor c = getContentResolver().query(ContactsContract.Directory.CONTENT_URI, PEOPLE_PROJECTION, buffer == null ? null : buffer.toString(), args, null); 
```

但是 c 总是返回 null。请注意，我正在尝试仅在此处检索 DISPLAY_NAME，因为我还不确定如何检索电话号码。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T06:56:50.487

```
Cursor phones = getActivity().getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,
            null, null);
    while (phones.moveToNext()) {
        Contact_Class contacts = new Contact_Class();
        contacts.setPersonName(phones.getString(phones
                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));
        contacts.setPhoneNumber(phones.getString(phones
                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));

        contact_list.add(contacts);

    }

    phones.close();
public class Contact_Class {
String personName;
String phoneNumber;
public String getPersonName() {
    return personName;
}
public void setPersonName(String personName) {
    this.personName = personName;
}
public String getPhoneNumber() {
    return phoneNumber;
}
public void setPhoneNumber(String phoneNumber) {
    this.phoneNumber = phoneNumber;
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T06:44:07.363

请查看附加到[另一个问题](https://stackoverflow.com/questions/26085599/android-cannot-query-contactscontract-directory-on-htc)的源代码，我在 SO 上问过。该应用程序使用 ContactsContract.Directory 并在许多不同的设备上工作，除了 HTC。
虽然问题很老了，但也许会对其他人有所帮助

# asp.net-mvc - MVC 3 的 System.Data.Entities 运行时错误

> ID：10555634
> 
> 赞同：0
> 
> 时间：2012-05-11T17:01:24.200
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, web-config

我对 .NET MVC 非常陌生，并且收到此运行时错误

```
CS0012: The type 'System.Data.Objects.DataClasses.EntityObject' is defined in an assembly 
that is not referenced. You must add a reference to assembly 'System.Data.Entity,     
Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

这似乎是一个非常常见的问题，但所有的解决方案都是在 web.config 文件中添加一个程序集。我在 web.config 中没有程序集部分。我正在使用剃刀视图引擎。谢谢，我已经添加了参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:06:13.453

1.  右键单击您的项目。
2.  选择添加参考
3.  在 .NET 选项卡上，选择引用 System.Data.Entity 并单击确定

# javascript - 我的开关结构似乎有效（JavaScript 控制结构）

> ID：10555635
> 
> 赞同：0
> 
> 时间：2012-05-11T17:01:31.307
> 
> 标签：javascript

浏览器中没有显示任何内容，并且由于 JavaScript 没有编译器来运行它，尽管我不确定如何检查这种语言的错误。

我的 HTML

```
<!doctype html>
<html>
  <head>
    <title>Where am I?></title>
    <script src="script4.js"></script>
  </head>
  <body>
  </body>
</html> 
```

我的 script4.js

```
var number = 20;
switch(number) {
  case number > 0:
    alert(number + " is Positive");
    break;
  case number ===  0:
    alert(number + " is zero");
    break;
  case number < 0;
    alert(number + " is negative");
  default:
    alert(number + " is not a number");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T17:05:04.860

JavaScript 会将每个 case 表达式与 switch 值进行比较，因此您可以使用 switch 值`true`来编写布尔 case 表达式，例如：

```
switch(true) 
{
    case number > 0:
        alert(number + " is Positive");
        break;
    case number ===  0:
        alert(number + " is zero");
        break;
    case number < 0:
        alert(number + " is negative");
        break;
    default:
        alert(number + " is not a number");
} 
```

[JSFiddle 示例在这里](http://jsfiddle.net/N7cjz/)

请注意，虽然这对我来说是一种常见的模式（并且我希望在其他语言（如 C#）中存在一个特性），但一些开发人员可能会觉得它非常规。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:04:58.073

这不是`switch`通常使用语句的方式。to 的参数`case`必须是数字、字符串或布尔值（在这种情况下，您可以使用解析为布尔值的表达式，但我不明白为什么您必须这样做而不是使用`if`；我发现后者更容易阅读和理解）：

```
switch(number) {
   case 1: 
      alert("number is 1");
      break;
   ...
   ...

   default:
      alert("Unknown number");
} 
```

你应该在这里使用的是`if/else`：

```
if(number > 0) {
   alert("number is positive");

} else if(number === 0) {
   alert("number is zero");

} else if(number < 0) {
   alert("number is negative");

} else {
   alert("not a number");
} 
```

使用布尔表达式时会发生的情况是，将 to 的参数与or`switch`的布尔值进行比较。因此，您基本上是在比较与or的数值，而这永远不会匹配。`true``false``number``true``false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:04:53.360

我不知道 RedFilter 的解决方案会起作用。（很高兴知道！）在大多数基于 C 的语言中，您只能针对特定值进行匹配。因此，通常使用`if/else`链：

```
if (number > 0) 
    alert(number + " is Positive");
else if (number === 0)
    alert(number + " is zero");
else if (number < 0)
    alert(number + " is negative");
else 
    alert(number + " is not a number"); 
```

# git - 如何使用 maven 管理分叉的 git 存储库

> ID：10555640
> 
> 赞同：1
> 
> 时间：2012-05-11T17:01:48.210
> 
> 标签：git, maven

我已经分叉了一个使用 maven 的 3rd 方 git repo，并且我也在我的项目中使用了 maven（它使用了 3rd 方库）。

现在我想在我的 fork 中进行一些更改，但不替换我的 maven repo 中的原始 3rd 方工件。也就是说，我想让我的 fork 的工件和原始的 3rd 方工件共存于我的 maven 存储库中，这样我就可以通过更改我的消费项目中的依赖项在我的更改和原始工件之间切换。

有什么好的方法来处理这个？我是否应该在我的分叉副本中替换第 3 方的工件 groupId（例如，用 org.3rdparty-myfork 替换 org.3rdparty）？这是一个有很多模块的大项目——有没有办法用一个 maven 插件来做到这一点（即运行整个模块层次结构并用新的替换对当前 groupId 的所有引用），类似于`mvn version:set`？

或者我应该更改我的分叉副本中的工件 versionIds（例如用 xy-myfork-SNAPSHOT 替换 xy-SNAPSHOT）？

或者是其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:40:29.480

最简单的方法是使用您建议的将版本更改为 xy-YOURFORK-SNAPSHOT 之类的内容。

# sql - Varchar(max) 列不允许作为 SQL Server 中的主键

> ID：10555642
> 
> 赞同：10
> 
> 时间：2012-05-11T17:01:50.460
> 
> 标签：sql, sql-server

Varchar(max) 列不允许作为 SQL Server 中的主键。

可以作为主键的 varchar 类型的最大长度是多少。

这可能是一个不好的做法，但遇到了这种情况。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T17:04:20.427

900 字节是主键的最大长度，在我看来这是个坏主意，为什么不使用代理键呢？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T17:12:39.830

这个问题已经[在这个线程中](https://stackoverflow.com/a/2043335/1339383)得到了回答；简短的回答是索引字段不能超过 900 字节。也就是说，出于效率和可维护性等诸多原因，使用长 VARCHAR 字段作为索引通常不是一个好主意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T17:33:10.983

主键在所有其他索引中用于标识行。将潜在的数兆字节值作为键几乎没有意义，因此通常限制任何键中的总字节数。

# tfs - Msbuild CoreCompile 依赖于目标

> ID：10555649
> 
> 赞同：5
> 
> 时间：2012-05-11T17:02:51.863
> 
> 标签：tfs, msbuild

这就是我们所拥有的：ccnet+tfs+msbuild。

问题是我们的构建过程太慢了，因为项目很多。

我做了一些调查，这就是我想做的。

每个项目编译完成后，它会从输出文件夹复制到共享文件夹，即使这个项目没有编译，这个操作在任何情况下都会进行。所以我检查了 msbuild 的详细日志，这就是我发现的：跳过目标“CoreCompile”，因为所有输出文件相对于输入文件都是最新的..

此验证操作在 Microsoft.TeamFoundation.Build.targets 中声明。问题是我怎样才能拦截这些信息，创建自己的目标添加一些条件，并做某种触发，如果出现“跳过目标“CoreCompile”消息”，那么不要运行我的复制目标并跳过它，如果项目已经编译然后这个复制目标应该运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T03:03:42.470

我刚刚在[http://sedodream.com/2012/05/14/MSBuildHowToExecuteATargetAfterCoreCompile.aspx](http://sedodream.com/2012/05/14/MSBuildHowToExecuteATargetAfterCoreCompile.aspx)上写了这篇博客，但我在下面为您粘贴了内容。

我今天在 StackOverflow 上，注意到一个问题“<a href="https://stackoverflow.com/q/10555649/105999">如何创建一个在 CoreCompile 时执行的目标，并且被跳过什么时候跳过 CoreCompile？” 下面是我的回答。

对于一般情况，这是一个很难解决的问题，但在您的情况下，这很容易，因为 CoreCompile 对这种情况有特殊的内置支持。在详细介绍如何使用 CoreCompile 完成此任务之前，让我先解释一下它的一般工作原理。

## 一般情况说明

在 MSBuild 中，由于增量构建，目标被跳过。增量构建完全由目标本身的输入和输出属性驱动。输入是目标将“使用”的文件列表，输出是目标“生成”的文件列表。我使用引号是因为它是一个松散的概念，而不是一个具体的概念。为了简化它，您可以将输入/输出视为文件列表。当目标即将执行时，MSBuild 将获取输入并将它们的时间戳与输出进行比较。如果所有输出都比输入新，则将跳过目标。（仅供参考，如果您想知道只有一些输出过期时会发生什么，请阅读我的博客[http://sedodream.com/2010/09/23/MSBuildYouveHeardOfIncrementalBuildingButHaveYouHeardOfPartialBuilding。](http://sedodream.com/2010/09/23/MSBuildYouveHeardOfIncrementalBuildingButHaveYouHeardOfPartialBuilding.aspx)

在任何情况下，如果您希望跳过某个目标，您必须正确地制作您的输入/输出。在您的情况下，您希望在跳过 CoreCompile 时跳过您的目标，因此从表面上看，您似乎可以简单地复制 CoreCompile 的输入/输出，但这不起作用。它不起作用，因为执行 CoreCompile 时，文件可能已过时，但该目标本身会使它们保持最新。然后，当您的目标被执行时，因为它们都是最新的，它将被跳过。您必须复制输入/输出并将附加文件附加到目标创建的输入/输出。这将确保您的目标在第一次通过时不会被跳过。

## CoreCompile的具体解决方案

如果您查看项目文件，您将在底部看到文件 Microsoft.Common.targets 已导入，然后此文件将导入特定于语言的 .targets 文件。例如，它将导入 Microsoft.CSharp.targets 或 Microsoft.VisualBasic.targets（如果您使用的是 C# 或 VB）。在这些 .targets 文件中，您会发现定义了 CoreCompile。在 CoreCompile 的定义中，您将在末尾找到以下内容。

```
<CallTarget Targets="$(TargetsTriggeredByCompilation)" Condition="'$(TargetsTriggeredByCompilation)' != ''"/> 
```

这将调用`TargetsTriggeredByCompilation`属性中定义的所有目标。**因此，如果您希望在执行**CoreCompile 时调用您的目标，您可以扩展该属性。这是如何做到这一点的。

```
<PropertyGroup>
  <TargetsTriggeredByCompilation>
    $(TargetsTriggeredByCompilation);
    MyCustomTarget
  </TargetsTriggeredByCompilation>
</PropertyGroup>

<Target Name="MyCustomTarget">
  <Message Text="MyCustomTarget called" Importance ="high"/>
</Target> 
```

在这种情况下，我定义属性**TargetsTriggeredByCompilation**并将 MyCustomTarget 附加到它。包含**$(TargetsTriggeredByCompilation);非常重要。**在那里，如果你不这样做，那么你将不会追加而是覆盖。因此，如果其他人使用此技术，您将消灭他们的目标。

下图显示了我构建一次并执行 CoreCompile 和 MyCustomTarget 的位置。然后第二个构建 CoreCompile 被跳过，任何 MyCustomTarget 永远不会被调用。

![在此处输入图像描述](../Images/3dd23746133c941e2121ff534389277e.png)

# php - 如何让 Zend Studio 像 NetBeans 7.1 那样格式化 PHP 代码？

> ID：10555654
> 
> 赞同：4
> 
> 时间：2012-05-11T17:03:09.350
> 
> 标签：php, netbeans, code-formatting, netbeans-7, zend-studio

我使用 NetBeans 7.1，我喜欢 NetBeans 格式化 PHP 代码的方式。

我正在与其他开发人员一起开发这个项目，但他使用 Zend Studio (ZS)，当他使用 ZS 重新格式化代码并将更改提交到 git 时，看起来他已经更改了整个文件，而实际上它只是改变了几行。如果代码中的每一个小改动看起来都像是整个文件都被改动了，那么这就超出了拥有版本控制的全部目的。

他喜欢 Zend Studio，我不想强​​加他使用其他产品。我不介意使用 ZS，但不能支付 300 美元的价格标签，因为我可以免费获得所需的 NetBeans。

所以我正在寻找一种让他继续使用他的 IDE 的方法，但是当他格式化他的代码时，ZS 的做法与 NetBeans 的做法相同。

关于在 Zend Studio 上进行哪些更改以使代码格式类似于 NetBeans 7.1 的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:11:40.580

尝试在 NetBeans 中安装 PHPCS 插件并选择 ZEND 框架规则集来设置编码标准，这将像在 ZS 中一样自动格式化 NetBeans 中的代码。您可以 google 或查看其中一些文章：

*   [http://www.summasolutions.net/blogposts/applying-zend-coding-standard-netbeans-phpmd-codesniffer](http://www.summasolutions.net/blogposts/applying-zend-coding-standard-netbeans-phpmd-codesniffer)。

*   [http://drupal.org/node/1019816](http://drupal.org/node/1019816)

*   [http://code.garyjones.co.uk/configuring-netbeans-for-wordpress-coding-standards/](http://code.garyjones.co.uk/configuring-netbeans-for-wordpress-coding-standards/)

简而言之，你们都需要决定并遵循一些编码标准。

# sql - 如何将记录与表进行比较，并插入到现有的临时表中？

> ID：10555658
> 
> 赞同：1
> 
> 时间：2012-05-11T17:03:20.723
> 
> 标签：sql, sql-server

我有一个我创建的临时表：

```
CREATE TABLE #tempIDS (
Name varchar(108),
Id uniqueidentifier,
IsUser bit ) 
```

我已经填充了它：

```
INSERT INTO #tempIDS (Name, Id)
SELECT UName, UId FROM UList
WHERE UName LIKE 'smi%'
ORDER BY UName 
```

所以现在我想要做的是对照另一个表检查临时表中的记录，看看它们是否存在。如果它们在另一个表中，那么我想放一个“1”，如果不是，一个“0”。

这就是我的问题。

如果我这样做：从员工 A 中选择 count(A.UId)，#tempIDS B 其中 A.UId = '480FA1E3-1A4B-4D3B-AB21-5070ADF974EB'

我可以得到“1”或“0”。

但是如何根据比较表中是否存在记录来选择并插入“1”或“0”到我的临时表中？这不起作用：

```
update #tempIDS
set IsUser = (select COUNT(StaffId) FROM Staff
where StaffId= (select Id from #tempIDS)) 
```

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:14:15.473

```
 UPDATE #tempIDS
 SET IsUser= CASE WHEN COALESCE(staff.staffid,0) = 0  THEN 0 ELSE 1 END
 FROM #tempIDS
 LEFT OUTER JOIN staff ON #tempIDS.id = staff.staffid 
```

抱歉，您似乎想更新 IsUser 我正在更新 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:08:13.280

您可以将 IsUser 列默认为 0，然后您只需更新找到匹配员工 ID 的行。

# python - 小数的 Python 算术

> ID：10555659
> 
> 赞同：9
> 
> 时间：2012-05-11T17:03:22.010
> 
> 标签：python, numerical

当我在 Python 中对小数进行算术运算时，我得到以下意外结果：

```
>>> sys.float_info
sys.float_info(max=1.7976931348623157e+308, max_exp=1024, max_10_exp=308, min=2.2250738585072014e-308, min_exp=-1021, min_10_exp=-307, dig=15, mant_dig=53, epsilon=2.220446049250313e-16, radix=2, rounds=1)
>>> (1\. - (1.e-17) ) < 1.
False 
```

我知道浮点数没有无限精度，但它应该能够处理像 1e-17 这样的“大”小数，不是吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T17:10:05.837

浮点数接近 0 的精度高于接近 1 的精度。

*   在 0.0 和 0.1 之间有 4591870180066957722 个浮点数。
*   在 0.9 和 1.0 之间有 900719925474099 个浮点数，到目前为止更少。

浮动密度定期减半，看起来像这样：

![浮子密度的可视化](../Images/dcd1bd0d0af3843021433d8ec3591e1d.png)

这是 之后的下一个浮点数`1.`，方向为`0.`：

```
>>> import math
>>> math.nextafter(1., 0.)
0.9999999999999999
>>> format(math.nextafter(1., 0.), ".32f")  # let's see more decimal places
'0.99999999999999988897769753748435' 
```

*1 - 10 ^(-17)*的数学正确值是*0.99999999999999999*（有 17 个 9），我将这个数字称为*n*。像几乎所有数字一样，*n*不能用浮点数精确表示。

```
0.99999999999999999                    # n
0.00000000000000001                    # distance between n and 1, i.e. 10^-17
0.00000000000000010102230246251565...  # distance between n and nextafter(1., 0.) 
```

所以你看，*1 - 10 ^(-17)*大约是 10`nextafter(1., 0.)`倍`1.`。当`1\. - 1.e-17`解释器评估表达式时，它会返回最接近的可能结果，这`1.`正是。返回任何其他浮点数是没有意义的，这将与“真实”结果相距甚远（请原谅双关语）。

*注意：* [`math.nextafter`](https://docs.python.org/3/library/math.html#math.nextafter)在 Python 3.9+ 中可用。在早期版本中，您可以`numpy.nextafter`类似地使用。

相关问题 ->[将 Python 浮点值增加最小可能量](https://stackoverflow.com/questions/6063755/increment-a-python-floating-point-value-by-the-smallest-possible-amount)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T19:50:08.570

首先，让我们回顾一下`epsilon`的返回值到底是什么`sys.float_info`。

[Epsilon](http://en.wikipedia.org/wiki/Machine_epsilon) (or ) 是满足**0.5 + ≠ 0.5 AND 0.5 - ≠ 0.5**`的最小数`

 `**Python 告诉您，将导致`0.5`重复递增或递减的最小数字是`epsilon=2.220446049250313e-16`-**但这仅适用于值 0.5**。您正试图`1.0`增加`1.0e-17`. 这是一个较大的值（1.0 对 0.5），其增量小于 0.5 的值（1.0e-17 对 2.2e-16）。由于 1.0e-17 的增量值比 1.0 的相对 epsilon 小一个数量级，因此您大致偏离了一个数量级。

你可以在这里看到这个：

这些改变了`0.5`

```
>>> 0.5+sys.float_info.epsilon
0.5000000000000002
>>> 0.5-sys.float_info.epsilon
0.4999999999999998 
```

这些值不会：

```
>>> 0.5+sys.float_info.epsilon/10.0
0.5
>>> 0.5-sys.float_info.epsilon/10.0
0.5
>>> 5.0+sys.float_info.epsilon
5.0
>>> 5.0-sys.float_info.epsilon
5.0 
```

**解释：**

[IEEE 754](http://en.wikipedia.org/wiki/IEEE_754)定义了当今大多数标准计算机上使用的浮点格式（专业计算机或库可能使用不同的格式。） IEEE 754 的[64 位格式](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)使用 53 位精度来计算和 52 位存储到浮点数的尾数点值。由于您有一个固定的 52/53 位可以使用，尾数的大小和精度会随着更大/更小的值而变化。那么随着浮点数的相对大小的变化而变化。0.5 的值不同于 1.0 和 100.0 的值。

由于各种非常好的和特定于平台的原因（存储和表示、舍入等），即使您*可以*使用较小的数字，epsilon 也被定义为对 64 位浮点格式使用 52 位精度。由于大多数 Python 实现使用 C 双浮点数来表示浮点数，因此可以证明这一点：

```
>>> 2**-52==sys.float_info.epsilon
True 
```

*查看您的*平台将执行多少位：

```
>>> 0.5 + 2.0**-53
0.5000000000000001
>>> 0.5 - 2.0**-53
0.4999999999999999
>>> 0.5 + 2.0**-54
0.5                           # fail for 0.5 + 54 bits...
>>> 0.5 - 2.0**-54
0.49999999999999994           # OK for minus
>>> 0.5 - 2.0**-55
0.5                           # fail  for 0.5 minus 55 bits... 
```

您的问题有几种解决方法：

1.  您可以使用[nextafter](http://www.kernel.org/doc/man-pages/online/pages/man3/nextafter.3.html)的C99 概念来计算适当的epsilon 值。对于 Python，使用 numpy 或 Decimal 类来计算`nextafter`. 更多关于`nextafter`我之前的回答[这里](https://stackoverflow.com/a/6163157/648852)
2.  使用整数。64 位整数将清楚地处理 17 数量级的 epsilon 值，无​​需四舍五入。
3.  使用任意精度数学库。[十进制](http://docs.python.org/library/decimal.html)在标准 Python 发行版中。

重要的概念是 的值是**相对于值**的（如果你是递增或递减）。

这可以在这里看到：

```
>>> numpy.nextafter(0.0,1.0)-0.0
4.9406564584124654e-324                 # a relative epsilon value of 4.94e-324
>>> numpy.nextafter(0.01,1.0)-0.01
1.7347234759768071e-18                  # 1e-17 would still work...
>>> numpy.nextafter(0.1,1.0)-0.1
1.3877787807814457e-17                  # 1e-17 would >>barely<< work...
>>> numpy.nextafter(0.5,1.0)-0.5
1.1102230246251565e-16                  # a relative epsilon value of 1.1e-16
>>> numpy.nextafter(500.0,501.0)-500.0
5.6843418860808015e-14                  # relative epsilon of 5.6e-14
>>> numpy.nextafter(1e17,1e18)-1e17
16.0                                    # the other end of the spectrum... 
```

因此，您可以看到 1e-17 可以轻松地增加 0.0 和 0.1 之间的值，但不会有比这更多的值。如上所示，1e17 的相对值是 16。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T17:06:14.560

> 它应该能够处理像 1e-17 这样的“大”小数字，不是吗？

不一定（这取决于数字）。A`float`不能准确地表示`1e-17`或`1-(1e-17)`。在后者的情况下，它*可以*表示的最接近的数字是`1`。

我建议您阅读[每个计算机科学家应该了解的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-11T17:09:41.843

如果您需要这种级别的精度，请考虑使用[Decimal 模块](http://docs.python.org/library/decimal.html)

```
>>> decimal.Decimal(1.0)-decimal.Decimal('1.0e-17')
Decimal('0.999999999999999990')
>>> decimal.Decimal(1.0)-decimal.Decimal('1.0e-17')<decimal.Decimal(1.0)
True 
```

和：

```
>>> decimal.Decimal(1.0)-decimal.Decimal('1.0e-17')<1.0
True 
```

不过要小心最后一个，因为您可能会遇到转换错误。

其他人建议[每个计算机科学家都应该了解浮点运算。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)我还建议[不要将其存储在浮动中](http://www.altdevblogaday.com/2012/02/05/dont-store-that-in-a-float/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-11T17:07:52.047

你可以处理这些。注意

```
>>> 1.e-17 == 0
False 
```

和

```
>>> 1.e-17 + 1.e-18
1.1e-17 
```

您根本无法处理 1-1e-17，因为尾数不适合有限精度

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T17:12:41.727

```
>>> from decimal import Decimal
>>> Decimal('1')-Decimal(str(10**-17)) < Decimal('1')
True 
```

使用[十进制模块](http://docs.python.org/library/decimal.html)，以获得那种精度！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T17:38:08.993

你有`epsilon=2.220446049250313e-16`所以这是正常的，`(1\. - (1.e-17) ) = 1`因为`1.e-17 < epsilon`。**`

# objective-c - 访问 NSArray 中的 NSNumber 对象

> ID：10555661
> 
> 赞同：0
> 
> 时间：2012-05-11T17:03:35.707
> 
> 标签：objective-c, nsarray, nsnumber, nsinteger

我有这个：

```
 NSArray *tags =  [NSArray arrayWithObjects:
                       [NSNumber numberWithInteger:0],
                       [NSNumber numberWithInteger:1], 
                       [NSNumber numberWithInteger:2],
                       [NSNumber numberWithInteger:3],
                       [NSNumber numberWithInteger:4],
                       [NSNumber numberWithInteger:5],
                       nil]; 
```

而且我很难尝试将每个项目作为`int`or访问`NSInteger`。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:04:31.547

称呼`intValue`

```
NSInteger myInt = [[tags objectAtIndex:1] intValue]; 
```

# javascript - 在树状图中按世代排列的 X 位置

> ID：10555666
> 
> 赞同：-1
> 
> 时间：2012-05-11T17:03:59.567
> 
> 标签：javascript, layout, svg, d3.js, dendrogram

我在 D3 中使用标准的树状图布局：

[http://mbostock.github.com/d3/ex/cluster.html](http://mbostock.github.com/d3/ex/cluster.html)

但是我希望将子节点固定到它们“代”的位置，例如，vis.visualization 将出现在与 vis.operator 相同的 X 坐标上，同样，operator.IOoperator 将直接出现在 operator 下方。标签。

节点链接树就是这样做的，所以也许我会在那里找到答案：http: [//mbostock.github.com/d3/ex/tree.html](http://mbostock.github.com/d3/ex/tree.html)

对，有一个布局可以做到这一点...... [http://mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T17:01:42.447

使用这个： http: [//mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

# javascript - 文件上传器的样式问题

> ID：10555667
> 
> 赞同：0
> 
> 时间：2012-05-11T17:04:00.060
> 
> 标签：javascript, jquery, css, file-upload

我有一个文件上传按钮，有一个奇怪的样式问题，我似乎无法解决。生成的 HTML 如下：

```
<div id="uniform-file_upload" class="uploader">
<input id="file_upload" type="file" multiple="multiple" name="file_upload" size="55" style="opacity: 0;">
<span class="filename" style="-moz-user-select: none;">No file selected</span>
<span class="action" style="-moz-user-select: none;">Choose File</span>
</div> 
```

输出如下：

![在此处输入图像描述](../Images/408faf7f02c2c933f0ca5c249e570465.png)

你能看到“选择文件”字样周围的小框吗？嗯，它非常丑陋和分散注意力，我认为摆脱它应该很容易，但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:07:37.477

在这种情况下，一个很好的调试技巧是使用 Chrome 网络浏览器并尝试**检查元素**选项。右键单击表单按钮（在您的网页中）并选择“检查元素”（FireFox 有类似的东西，但我更喜欢 Chrome 那个）

按钮的样式信息显示在侧面板上，您可以调整样式以获得所需的效果。

注意：确认您在单击检查元素后在元素选项卡部分中选择了正确的 html 标记。此外， element.style {...} 是侧面板中的一个选项，它允许您编辑所选 html 元素的内联 css。

# regex - Notepad++ - 正则表达式

> ID：10555668
> 
> 赞同：0
> 
> 时间：2012-05-11T17:04:01.700
> 
> 标签：regex, notepad++

我需要找到所有包含特定字符序列的单词并将它们删除。

例如：我想删除所有包含'all'的单词。这将删除“走廊”、“钱包”、...

我相信 SQL 等价物是：`LIKE '%all%'`. 请问它的RegEx等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:29:10.720

如果您想要在其中任何地方带有“all”的单词，您可以使用：

```
\w*all\w* 
```

如果您只想在中间或末尾带有“all”的单词，您可以使用：

```
\w+all\w* 
```

如果您只想要最后带有“all”的单词，您可以使用：

```
\w+all(?=\W) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:11:13.623

这很简单，我建议您查看一些可以在网上找到的正则表达式备忘单。

```
.*all.* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:11:21.773

```
"Find what": \w*all\w*
"Replace with": <nothing>
"Search mode": Regular expression 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-25T17:04:24.197

尝试在要
终止的特定单词周围添加空格，例如！空格（特定单词）空格，这将避免删除类似的单词，如走廊、墙壁、高大、球或盟友等……试试下面的正则表达式

查找内容：`.*\sall\s.*`
替换为：`leave it empty`

# database - 有没有支持分支的数据库？

> ID：10555670
> 
> 赞同：5
> 
> 时间：2012-05-11T17:04:10.113
> 
> 标签：database, branch, relational-database, branching-and-merging

我真正需要的是可以进一步修改的轻量级数据库快照。

数据库可能很大，但快照本身应该很小并保持与父级的关系。

像这样的东西基本上可以让我每个分支都有一个数据库。它也可以用于测试几乎直接针对生产的环境，但不会影响它。

我对关系数据库实现或扩展最感兴趣。但对任何事情都持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:38:56.460

我认为任何 RDBMS 都不存在分支。您可以获得的最接近的方法是通过备份和还原或 BULK INSERTing 克隆整个数据库到新数据库中。

您可以尝试通过克隆每个分支的目标数据库架构并在其中存储“差异”（即已编辑的记录）来滚动您自己的分支系统，但这需要跨两个数据库进行查询，解决编辑冲突，并降级为唯一的当插入或删除记录时，地狱之环。

就个人而言，我只会使用完整/部分克隆进行主要测试，并使用较小的子集用于您正在编辑架构的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:40:48.790

**想法：**我还没有看到包含分支概念的关系数据库系统......尽管这个概念本身似乎非常有用恕我直言。

我知道 Microsoft Team Foundation Server + Visual Studio 2010（仅限高级版或旗舰版）通过“数据库项目”将数据库开发与源代码控制集成在一起。我确信其他版本控制系统具有类似的功能......但这并不能回答您对轻量级或内置数据库版本控制系统的问题。（因此，这在技术上不是答案——只是一些可以帮助您解决基本问题的信息）。

简短的搜索发现了一些有用的相关文章，但似乎并没有完全回答这个请求：

1.  [RedGate SQL 源代码控制 3.0](http://www.red-gate.com/SupportCenter/Content/SQL_Source_Control/help/3.0/SSC_Branch_and_merge)
2.  [“版本控制数据库 - 分支和合并” - OdeToCode.com 2008](http://odetocode.com/blogs/scott/archive/2008/02/03/versioning-databases-branching-and-merging.aspx)

RedGate 是一家顶级数据库工具公司，为 Microsoft SQL Server、Oracle 和可能的其他数据库解决方案开发解决方案。问题是[RedGate SQL Source Control 3.0](http://www.red-gate.com/SupportCenter/Content/SQL_Source_Control/help/3.0/SSC_Branch_and_merge)可以在 SSMS（Microsoft SQL Server Management Studio）中使用您的版本控制系统，但它本身并不是一个 DB VCS（版本控制系统）。摘自他们的网站：

> SQL Source Control 是 SQL Server Management Studio 的插件，可让您将数据库纳入源代码控制。因此，SQL Source Control 为数据库开发带来了源代码控制的变更管理和协作优势，而不会影响您的工作流程，也不需要新的开发流程。注意：SQL Source Control 不是源代码控制系统；它允许您将数据库存储在现有的源代码控制系统中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-30T02:35:12.373

我创建了[LiteTree](https://github.com/aergoio/litetree)

它是对 SQLite 引擎的修改，以支持分支。

# python - 如何重新引发包含有关原始异常的信息的异常？

> ID：10555671
> 
> 赞同：15
> 
> 时间：2012-05-11T17:04:11.393
> 
> 标签：python, exception-handling, wlst, python-2.2

所以我基本上必须通过异常将应用程序的两层相互隔离。

我有这个 WLST 12c 脚本（python 2.2），就像

```
try:
    something something...
except java.lang.UnsuportedOpperationException, (a, b):
    pass
except java.lang.reflect.UndeclaredThrowableException, (a, b):
    pass 
```

我希望能够重新引发我自己的一种异常类型，其中包含有关导致上一个异常的原因的消息（不，我不知道`a`and`b`参数是什么，但我猜一个其中应该是异常描述）。

我自己是一个java人，所以我期待着类似的东西

```
try {
    something something...
} catch (Exception e) {
    throw new RuntimeException(e, "something horrible happened");
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-03T21:03:27.407

虽然这是一篇旧文章，但对原始问题有一个更简单的答案。要在捕获异常后重新抛出异常，只需使用不带参数的“raise”。原始堆栈跟踪将被保留。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-11T17:17:16.327

我希望我的问题是正确的。

我不确定 Python 2.2 的细节，但这[说明](http://rgruet.free.fr/PQR2.2.html#Statements)你可以像在最近的版本中那样处理异常：

```
try:
    do_stuff()
except ErrorToCatch, e:
    raise ExceptionToThrow(e) 
```

或者也许最后一行应该是`raise ExceptionToThrow(str(e))`. 这取决于您的异常是如何定义的。例子：

```
try:
    raise TypeError('foo')
except TypeError, t:
    raise ValueError(t) 
```

这引起了`ValueError('foo')`.

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-13T13:56:40.840

成语

```
try:
   ...
except SomeException:
   ...
   raise 
```

@normaldotcom 提到的重新抛出已按原样捕获的错误，无需任何修改。它不*回答*OP，“*我如何创建一个包含有关已捕获异常的信息的新异常*”。

实际上，在某些情况下，人们想创建一个新异常，通常是将许多可能的内部错误来源重新组合成一个具有更清晰消息的单个异常，同时仍保留对原始错误的回溯以启用调试。

实现这一点的[`with_traceback`一种方法`BaseException`](https://docs.python.org/3/library/exceptions.html#BaseException.with_traceback)是通过. 例如，

```
import sys

try:
  raise ValueError('internal error message')
except ValueError:
  tb = sys.exc_info()[2]
  raise Exception('new error message').with_traceback(tb) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-05-03T08:25:52.617

我是 Python 3，`raise from`构造完全符合您的要求。它引发新异常，将原始异常保存在新异常的`__cause__`属性中。

见这里：[https ://docs.python.org/3/reference/simple_stmts.html#the-raise-statement](https://docs.python.org/3/reference/simple_stmts.html#the-raise-statement)

```
>>> try:
...     print(1 / 0)
... except Exception as exc:
...     raise RuntimeError("Something bad happened") from exc
...
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
ZeroDivisionError: division by zero

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
RuntimeError: Something bad happened 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T17:21:46.853

```
class MyException(Exception): pass

...

try:
    my_funcion(my_args)
except (IOError, KeyError, some_list_of_other_possible_exceptions), e:
    raise MyException("Uh oh") 
```

您可以从原始异常（此处绑定到 e）中提取信息，然后在引发异常时将其传递给您自己的异常。

# android - Android AnimationDrawable 创建和循环

> ID：10555672
> 
> 赞同：0
> 
> 时间：2012-05-11T17:04:19.407
> 
> 标签：android, animation, imageview, frame, drawable

我正在尝试创建一个可绘制的动画，它只具有两个帧并在屏幕上循环。

但是，由于某种原因，我的 Animationdrawable 甚至没有做一轮，只是显示了第一帧，更不用说循环了......

这是我的代码：

```
Handler handler = new Handler();
AnimationDrawable mouseani = new AnimationDrawable();
ImageView img;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Drawable mouse1 = getResources().getDrawable(R.drawable.mouse_for_use);
    Drawable mouse2 = getResources().getDrawable(R.drawable.mouse_for_use_2);
    mouseani.addFrame(mouse1, 500);
    mouseani.addFrame(mouse2, 500);
    img = (ImageView) findViewById(R.id.imgView);
    img.setBackgroundDrawable(mouseani);
    mouseani.setCallback(img);
    mouseani.setVisible(true, true);
    mouseani.start();
    mouseani.stop();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:24:01.700

你不能像你一个接一个那样开始和停止，动画恰好是一个aysnc过程。

您将不得不找到另一种方法，例如创建一个侦听器，用于在 animationdrawable 超出帧时，然后重新调用动画。

看看这里的提示。 [Android AnimationDrawable 并知道动画何时结束](https://stackoverflow.com/questions/2214735/android-animationdrawable-and-knowing-when-animation-ends)

# c# - 可空对象必须有值？

> ID：10555682
> 
> 赞同：53
> 
> 时间：2012-05-11T17:05:02.673
> 
> 标签：c#, .net, linq-to-sql, exception-handling, nullable

在线：`bool travel = fill.travel.Value;`我收到以下错误：

> 可空对象必须有一个值

我不知道为什么。我想要做的就是获取当前为假的旅行数据库中的值。任何帮助，将不胜感激。

```
using (var db = new DataClasses1DataContext())
{
    var fill = (from f in db.expenseHdrs
                where f.rptNo == getPkRowReport()
                select f).FirstOrDefault();

    txtReportDesc.Text = fill.description;
    txtPeriod.Text = fill.period;
    txtPurpose.Text = fill.purpose;

    bool travel = fill.travel.Value;
    chkTravel.Checked = travel 
 } 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-11T17:10:48.257

你可以随时切换到

```
 fill.travel.GetValueOrDefault() 
```

提供默认值 (false)，或来自数据库的布尔列的值。或者，您可以使用重载指定默认值。无论哪种方式，可空值当前都没有值，这就是您得到该异常的原因。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-11T17:29:18.033

您正在尝试从不存在的对象访问属性（您的 fill.travel 为空，并且您从中调用 prop），您可以使用合并运算符（.Net 4.0）：

```
bool travel = fill.travel ?? false; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-11T17:10:23.887

`InvalidOperationException`如果您在 HasValue 属性为 false 时访问 Nullable.Value 属性，您将得到一个。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-11T17:10:50.110

您可以在实际访问其值之前检查可空变量是否具有类似的值

```
if(fill.travel.HasValue)
{
   bool travel = fill.travel.Value;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-11T17:11:03.893

来自数据库的值是一个可为空的布尔值。当你调用 Nullable.Value 并且值为 null 时，你会得到这个异常。考虑在调用 .Value 之前检查属性 Nullable.HasValue。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-16T20:06:50.323

我发生这种情况是因为有这样的代码：

```
bool? someVariable = (bool)someNullableBool; 
```

someNullableBool 为 null 并引发此错误。

解决方案是将其重写为：

```
bool? someVariable = (bool?)someNullableBool; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-11T18:05:49.587

空不是假的。请参阅 Eric Lippert 的博客文章系列，网址为：http: [//blogs.msdn.com/b/ericlippert/archive/2012/03/26/null-is-not-false.aspx](http://blogs.msdn.com/b/ericlippert/archive/2012/03/26/null-is-not-false.aspx)

如果您想翻译它，您需要将空结果处理为假。

为了清楚地说明这种情况，请考虑以下代码：

```
bool travel;
bool? temptravel = fill.travel.Value;
if( temptravel == true )
    travel = true;
else
    travel = false; 
```

或者，如果您使用的是 .Net 4，则只需使用 Val Bakhtin 的解决方案

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-04T11:54:22.603

你总是可以使用经典的 C 吗？像这样的运算符：

```
bool travel = (fill.travel == null ? false : fill.travel.Value); 
```

# ios - 如何在按钮触摸时填充 UITableView

> ID：10555688
> 
> 赞同：0
> 
> 时间：2012-05-11T17:05:22.607
> 
> 标签：ios, uitableview, button, populate

所以我正在为 iOS 构建一个应用程序，我已经得到它来计算一堆东西并将它们显示在屏幕上，在`-(IBAction)calculate`. 它还构建了一个递增数组，该数组将是一个切割列表。`UITableView`视图的一侧有一个空白。我有它之后`viewDidLoad`。现在，当我按下计算按钮时，我想用递增的切割列表填充这个列表。我找不到任何教程或类似的东西来帮助我。

当我把它放在计算动作中时，它只会给我错误。所以我在之后离开了它，`viewDidLoad`并希望通过按钮触摸来填充它。

这是我所拥有的：

```
// Customize the number of sections in the table view.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [creeperArray count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:         (NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView       dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell.
[cell.textLabel setText:[creeperArray objectAtIndex:indexPath.row]];

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

/*
 <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
 [detailViewController release];
 */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:10:55.360

告诉你的表视图`reloadData`。如果它的委托和数据源设置正确，并且`creeperArray`包含您想要显示的内容，它应该可以工作。

（如果没有，您需要提供更多详细信息。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:29:57.430

您尚未提供有关 UIButton 操作和数组的代码详细信息。无论如何，每次数组更改时，您都必须将更改的数组分配给您的creeperArray，然后重新加载表。

现在，如果更改数组是另一个类，您将需要为其定义一个属性并为某些前向类访问它，而对于后向数据流，您将不得不使用协议委托。

如果数组与 tableview 驻留在同一个视图控制器中，那么您只需将更改数组的内容分配给creeperArray 并重新加载表。

# blackberry-simulator - 在 virtualbox 中运行 BlackBerry 10 模拟器（alpha）

> ID：10555689
> 
> 赞同：16
> 
> 时间：2012-05-11T17:05:22.807
> 
> 标签：blackberry-simulator, blackberry-10

Blackberry 10 (alpha) 提供了在[vmware](http://www.vmware.com/)上运行的[模拟器](https://bdsc.webapps.blackberry.com/devzone/resources/)，我想知道它是否也可以在[virtualbox](https://www.virtualbox.org/)上运行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T02:03:03.573

我试图简单地在 Virtualbox 中安装硬盘（操作系统设置为 QNX），虽然引导顺序似乎工作得很好，但我被困在“启动服务：屏幕”可能无法加载图形服务器......

所以答案似乎是否定的，它不起作用。可悲的是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:33:09.237

我也试过了，我认为是屏幕的问题。尝试禁用 3D 加速。它在 BB 10 alpha 模拟器 vm 中默认启用。

如果这不起作用，您始终可以使用 VMware 播放器。它是免费的，模拟器运行良好。我在 Ubuntu 12.04 x64 上使用它。由于 3D 加速，我必须在 alpha 安全模式下运行，但除此之外，它运行良好。

[https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/5_0](https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/5_0)

# java - Android - 1 除以 2 = 0

> ID：10555690
> 
> 赞同：3
> 
> 时间：2012-05-11T17:05:28.697
> 
> 标签：java, android

我一直在尝试将我的新 IOIO 用于 android，并且需要找到信号的频率。
所以我将信号转换为二进制，然后用 1 除以 1 之间的时间。虽然当我这样做时，我发现我得到了 0 作为我的输出。然后我决定看看 1 / 2 给了我什么，令我惊讶的是它也给了 0！任何人都知道为什么会这样？

代码： `private float frequency = 1/2;`

这可能与使用有关`Float.toString(frequency)`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T17:06:32.153

这是整数除法的一个例子。尝试：

```
private float frequency = 1.0/2.0; 
```

Java 将执行 1/2，产生 0.5。但是，由于 Java 将其视为对整数的操作（并且 0.5 不是整数），它会截断小数并只留下整数部分 0。通过告诉 Java 使用浮点数（1.0 与 1），您告诉它保留中间计算的小数部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T17:07:48.287

1和2是java中的整数。如果您希望它们被明确解释为浮点数，您需要这样做。

```
private float frequency = 1f/2f; 
```

如果您不关心数学是否实际上是先在 double 上完成的，那么这更容易阅读：

```
private float frequency = 1.0/2.0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:06:39.753

这是整数除法（仅整数）。

尝试：

```
private float frequency = 1/2.0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T17:07:26.043

1 和 2 是整数，它们返回一个整数。

在进行除法之前，尝试使用这些值创建两个浮点数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T17:42:03.280

你需要***投***。这里有***[更多信息](http://www.java-samples.com/showtutorial.php?tutorialid=1170)***

`float myValue = (float) 1/2;`

```
class Main {
    public static void main(String[] args) {
        float myValue = (float) 1/2;
        System.out.println("1/2 = " + myValue);
    }
} 
```

输出将是`1/2 = 0.5`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T17:07:56.650

当您使用整数进行算术运算时，结果会变为整数并添加 .0

所以

```
private float frequency = 1.0/2.0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T17:17:39.430

利用

```
 private float frequency = 1F/2F; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-17T13:59:30.047

如果您要划分两个整数并且没有得到正确的输出，只需将评估`int`结果转换`float`为如下所示。

```
 int b = 2;
    int a = 1;

    float out = (float) a / b;
    System.out.println(out); 
```

这将产生输出 0.5

# c# - SqlDependency 不会触发 OnChange 事件

> ID：10555695
> 
> 赞同：2
> 
> 时间：2012-05-11T17:05:44.937
> 
> 标签：c#, sql-server, sql-server-2008, sqldependency

编辑：我修好了。我所做的是将数据库的所有者更改为与我用来连接它的用户不同的东西。检查数据库所有者：

```
select name, suser_sname(owner_sid) from sys.databases 
```

要更改所有者：

```
ALTER AUTHORIZATION ON DATABASE::ISS TO sa; 
```

差不多就是这样，我仍然不知道这是什么原因，但它确实有效，很酷。（也许以前的 dbowner 缺少一些权利？）

这让我头痛太久了，我完全不知道为什么会这样。长话短说，我从以下网址获取了 Mark Nischalke 的项目：http: [//www.codeproject.com/Articles/12335/Using-SqlDependency-for-data-change-events](http://www.codeproject.com/Articles/12335/Using-SqlDependency-for-data-change-events)。该项目有一个 SQL 脚本来创建数据库，并且 SqlDependecy 在他的项目/数据库上触发。现在我知道我以前的数据库有问题，我复制了他的脚本并创建了我自己的数据库。除了表格（显然）之外，一切都是相同的。这意味着我的 SqlDependency 应该可以工作，因为我有一个与另一个可以工作的数据库相同配置的数据库；但不......它不起作用。此时，在*我的*项目中，我更改了 SqlDependecy 以检查*他的*用于通知的数据库并且它可以工作，所以这不是我的项目中的 .NET 问题。然后我尝试让*他*项目中的 SqlDependency 检查*我的*数据库，不，仍然无法正常工作。在这两种情况下，我都使用相同的连接字符串、集成的安全性但不同的初始目录。谢谢你的帮助。

（还要注意，MessageQueue 是在我的数据库上创建的，并在我关闭项目 SqlDependecy.Stop 但事件未触发时删除）

这是他的数据库创建脚本

```
USE [master]
GO
/****** Object:  Database [Chatter]    Script Date: 11/18/2005 13:55:20 ******/
CREATE DATABASE [Chatter] ON  PRIMARY 
( NAME = N'Chatter', FILENAME = N'D:\Microsoft SQL Server\MSSQL.1\MSSQL\DATA\Chatter.mdf' , SIZE = 5120KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'Chatter_log', FILENAME = N'D:\Microsoft SQL Server\MSSQL.1\MSSQL\DATA\Chatter_log.ldf' , SIZE = 1536KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
 COLLATE SQL_Latin1_General_CP1_CI_AS
GO
EXEC dbo.sp_dbcmptlevel @dbname=N'Chatter', @new_cmptlevel=90
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [Chatter].[dbo].[sp_fulltext_database] @action = 'disable'
end
GO
ALTER DATABASE [Chatter] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [Chatter] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [Chatter] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [Chatter] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [Chatter] SET ARITHABORT OFF 
GO
ALTER DATABASE [Chatter] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [Chatter] SET AUTO_CREATE_STATISTICS ON 
GO
ALTER DATABASE [Chatter] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [Chatter] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [Chatter] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [Chatter] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [Chatter] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [Chatter] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [Chatter] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [Chatter] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [Chatter] SET  ENABLE_BROKER 
GO
ALTER DATABASE [Chatter] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [Chatter] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [Chatter] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [Chatter] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [Chatter] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [Chatter] SET  READ_WRITE 
GO
ALTER DATABASE [Chatter] SET RECOVERY FULL 
GO
ALTER DATABASE [Chatter] SET  MULTI_USER 
GO
ALTER DATABASE [Chatter] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [Chatter] SET DB_CHAINING OFF 

/***************************************************/

USE [Chatter]
GO
/****** Object:  Table [dbo].[Message]    Script Date: 11/18/2005 13:56:39 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Message](
    [int] [bigint] IDENTITY(1,1) NOT NULL,
    [Message] [nvarchar](200) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Person_ID] [int] NOT NULL,
 CONSTRAINT [PK_Message] PRIMARY KEY CLUSTERED 
(
    [int] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

USE [Chatter]
GO
/****** Object:  Table [dbo].[Person]    Script Date: 11/18/2005 13:56:56 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Person](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
 CONSTRAINT [PK_Person] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

USE [Chatter]
GO
/****** Object:  StoredProcedure [dbo].[usp_GetMessages]    Script Date: 11/18/2005 13:59:20 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[usp_GetMessages]

AS

SELECT [Message], [Name]
FROM dbo.[Message]
JOIN dbo.Person ON id = [Message].Person_ID

USE [Chatter]
GO
/****** Object:  StoredProcedure [dbo].[usp_InsertMessage]    Script Date: 11/18/2005 13:59:35 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[usp_InsertMessage]
    @Message nvarchar(200),
    @Person_ID int
AS

INSERT INTO [Message] ([Message], Person_ID)
VALUES (@Message, @Person_ID)
GO
/****************************************/
INSERT INTO [Chatter].[dbo].[Person]
([Name])
VALUES('Larry')
GO
INSERT INTO [Chatter].[dbo].[Person]
([Name])
VALUES('Moe')
GO
INSERT INTO [Chatter].[dbo].[Person]
([Name])
VALUES('Curly') 
```

这是我的数据库创建脚本（我只是用“ISS”替换了所有“Chatter”）

```
USE [master]
GO
/****** Object:  Database [ISS]    Script Date: 11/18/2005 13:55:20 ******/
CREATE DATABASE [ISS] ON  PRIMARY 
( NAME = N'ISS', FILENAME = N'D:\iss.mdf' , SIZE = 5120KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'ISS_log', FILENAME = N'D:\iss_log.ldf' , SIZE = 1536KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
 COLLATE SQL_Latin1_General_CP1_CI_AS
GO
EXEC dbo.sp_dbcmptlevel @dbname=N'ISS', @new_cmptlevel=90
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [ISS].[dbo].[sp_fulltext_database] @action = 'disable'
end
GO
ALTER DATABASE [ISS] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [ISS] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [ISS] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [ISS] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [ISS] SET ARITHABORT OFF 
GO
ALTER DATABASE [ISS] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [ISS] SET AUTO_CREATE_STATISTICS ON 
GO
ALTER DATABASE [ISS] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [ISS] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [ISS] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [ISS] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [ISS] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [ISS] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [ISS] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [ISS] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [ISS] SET  ENABLE_BROKER 
GO
ALTER DATABASE [ISS] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [ISS] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [ISS] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [ISS] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [ISS] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [ISS] SET  READ_WRITE 
GO
ALTER DATABASE [ISS] SET RECOVERY FULL 
GO
ALTER DATABASE [ISS] SET  MULTI_USER 
GO
ALTER DATABASE [ISS] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [ISS] SET DB_CHAINING OFF 

USE [ISS]

create table sectii (
    cods int identity(0,1) primary key,
    denumire varchar(30) not null,
)         

create table useri (
    codu int identity(0,1) primary key,
    login varchar(20) not null,
    password varchar(30) not null,
    cods int foreign key references sectii(cods),
    tip int not null,
)

create table medicamente (
    codm int identity(0,1) primary key,
    denumire varchar(50) not null
)

create table comenzi (
    codc int identity(0,1) primary key,
    cods int foreign key references sectii(cods),
    data datetime not null,
    codu int foreign key references useri(codu), --nu e nevoie
    onorata bit
)

create table medicamente_comanda (
    codc int foreign key references comenzi(codc) ON DELETE CASCADE,
    codm int foreign key references medicamente(codm),
    cantitate int
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:27:41.447

您的基础表结构中可能有不正确的数据类型或其他一些非法问题。我建议查看这篇文章并确保您满足“支持的 SELECT 语句”部分下的所有条件：

[http://msdn.microsoft.com/en-us/library/ms181122%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms181122%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T18:56:03.517

确保你已经运行

```
ALTER DATABASE kmsdta SET ENABLE_BROKER; 
```

如果此语句挂起，请使用此启用代理

```
alter database kmsdta set enable_broker with rollback immediate; 
```

你还要确保你在你的 Dababase 中运行了这个

```
CREATE QUEUE ContactChangeMessages;

CREATE SERVICE ContactChangeNotifications
  ON QUEUE ContactChangeMessages 
```

以及使用 SqlDependency 监控表时要考虑的一些重要事项

1.  在前面的代码中，您会注意到我的 SQL 查询没有使用“ *”通配符来返回所有列。您必须返回所需的确切列。如果你使用“* ”，你会产生不好的后果。

2.  同样在前面的代码中，您会注意到我的 SQL 查询包含“两部分”表名。这也是必需的。仅使用“TableName”而不是“owner.TableName”也会导致不良后果。

**一个简单查询的例子：**

```
select OrderID from dbo.[DTAOrders]; 
```

# windows-8 - 禁用列表视图中特定项目的选择和 itemInvoke 事件

> ID：10555697
> 
> 赞同：3
> 
> 时间：2012-05-11T17:05:56.137
> 
> 标签：windows-8, windows-runtime, winjs

我有一个列表视图。默认情况下，所有项目都已`itemInvoke`启用`single-selection`。但是现在，我想为一个ID 为“disableMe”的**特定项目**`selection`禁用和`itemInvoke`（事件和动画） 。有没有办法做到这一点？或者是否可以禁用整个组的事件（而不是整个列表视图）。？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:11:19.587

回答我自己的问题，因为我今天碰巧弄明白了。如果您对此问题有更好的解决方案，请提出建议。

在 Metro Style Application 中，ListView 控件中的选择通常可以通过`Right-Click`鼠标或触摸的小“拖动”/“滑动”来触发。要禁用触摸选择，您需要覆盖该`MSPointerDown`特定项目的事件处理程序。要禁用“右键单击”选择，您需要覆盖该`oncontextmenu`特定项目的事件。

如果您正在`itemTemplate`创建`Javascript`：

```
function listViewItemTemplate(item) {
    // data has boolean properties called 'doNotSelectMe' and 'doNotInvokeMe'
    var data = item.data._value;

    var itemElement = document.createElement('div');
    var itemElement.id = 'testElement';

    if (data.doNotSelectMe) {
        // disable mouse selection
        itemElement.oncontextmenu = function (e) { e.stopPropagation(); };
        // disable touch selection
        itemElement.addEventListener('MSPointerDown', function (e) {
                                          e.stopPropagation();
                                     });
    }

    if (data.doNotInvokeMe) {
        //disable item invoke event
        itemElement.onclick = function (e) { e.stopPropagation(); };
    }

    return {element: itemElement}

} 
```**

# php - 每五个单词后拆分字符串

> ID：10555698
> 
> 赞同：4
> 
> 时间：2012-05-11T17:05:56.963
> 
> 标签：php, preg-split

我想在每五个单词后拆分一个字符串。

**例子**

> 有东西可以在这里输入。这是一个示例文本

**输出**

```
There is something to type
here. This is an example
text 
```

如何做到这一点`preg_split()`？或者有什么方法可以在 PHP GD 中包装文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:32:46.807

您也可以使用正则表达式

```
$str = 'There is something to type here. This is an example text';
echo preg_replace( '~((?:\S*?\s){5})~', "$1\n", $str ); 
```

> 有东西可以
> 在这里输入。这是一个示例
> 文本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:10:12.267

一个简单的算法是在所有空格上拆分字符串以生成单词数组。然后你可以简单地遍历数组并每隔 5 项写一个新行。你真的不需要比这更花哨的东西了。使用[str_split](http://php.net/manual/en/function.str-split.php)获取数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T18:35:36.937

这是我的尝试，虽然我没有使用`preg_spilt()`

```
<?php
$string_to_split='There is something to type here. This is an example text';
$stringexploded=explode(" ",$string_to_split);
$string_five=array_chunk($stringexploded,5); 

for ($x=0;$x<count($string_five);$x++){
    echo implode(" ",$string_five[$x]);
    echo '<br />';
    }
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T17:42:54.653

使用`PREG_SPLIT_DELIM_CAPTURE`和`PREG_SPLIT_NO_EMPTY`标志[`preg_split()`](http://php.net/manual/en/function.preg-split.php)：

```
<?php
$string = preg_split("/([^\s]*\s+[^\s]*\s+[^\s]*\s+[^\s]*\s+[^\s]*)\s+/", $string, PREG_SPLIT_DELIM_CAPTURE|PREG_SPLIT_NO_EMPTY); 
```

## 结果

```
array (
  1 => 'There is something to type',
  2 => 'here. This is an example',
  3 => 'text',
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-11T05:54:47.523

```
<?php 
function limit_words ($text, $max_words) {
    $split = preg_split('/(\s+)/', $text, -1, PREG_SPLIT_DELIM_CAPTURE);
    array_unshift($split,"");
    unset($split[0]);
    $truncated = '';
    $j=1;
    $k=0;
    $a=array();
    for ($i = 0; $i < count($split); $i += 2) {
       $truncated .= $split[$i].$split[$i+1];
        if($j % 5 == 0){
            $a[$k]= $truncated;
            $truncated='';
            $k++;
            $j=0;
        }
        $j++;
    }
    return($a);
}
$text="There is something to type here. This is an example text";

print_r(limit_words($text, 5));

Array
(
    [0] => There is something to type
    [1] =>  here. This is an example
) 
```

# ajax - 如何调试ajax、json和spring

> ID：10555699
> 
> 赞同：0
> 
> 时间：2012-05-11T17:06:04.040
> 
> 标签：ajax, json, spring

我正在使用 Spring 程序开发 Ajax、JSON，我们正在尝试查看为什么 JSP 页面没有从 Spring 控制器获取数据。我觉得是这样，而且 ajax 不能正常工作，但是 ajax 程序员告诉我 Springs 没有任何东西返回......

有人可以给我一些示例代码，我可以将它们放入任何 JSP 中以显示从以下 Spring 控制器返回的 json .. 还有人看到这个控制器有什么问题吗

```
@RequestMapping(value = "/getcerts", method = RequestMethod.GET)
    public @ResponseBody JsonResponse getCertificates(@ModelAttribute(value="certificateData") CertificateData certificateData, BindingResult result ) {

        log.debug("inside CertificateWebAjaxControllor");
        JsonResponse res = new JsonResponse();
        certificateData.setFirstName("Kurt");
        certificateData.setLastName("Kostenbader");

        certList.add(certificateData);
        res.setStatus("SUCCESS");
        res.setResult(certList);

        return res;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:14:54.557

你这里没有任何 JSP；您正在使用`@ResponseBody`注释将返回的对象 (a `JsonResponse`) 作为 HTTP 响应的主体传递。要验证该方法是否有效，您可以：

将对象打印`res`到您的日志中，例如

```
log.debug(res); 
```

然后通过使用诸如[海报](https://addons.mozilla.org/en-US/firefox/addon/poster/)之类的东西来实际测试该方法是否返回了它应该返回的内容，以向您的控制器发送格式正确的请求。

# c++ - 在 CMake 中，指定所有可执行文件 target_link_libraries 某些库

> ID：10555706
> 
> 赞同：7
> 
> 时间：2012-05-11T17:06:26.037
> 
> 标签：c++, c, cmake

在 CMake 中，有没有办法指定我的所有可执行文件都链接到某个库？基本上我希望我的所有可执行文件都链接到 tcmalloc 和分析器。简单地指定 -ltcmalloc 和 -lprofiler 不是一个好的解决方案，因为我想让 CMake 以可移植的方式找到库的路径。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T17:57:09.513

`add_executable`您可以使用自己的函数覆盖内置函数，该函数始终添加所需的链接依赖项：

```
macro (add_executable _name)
    # invoke built-in add_executable
    _add_executable(${ARGV})
    if (TARGET ${_name})
        target_link_libraries(${_name} tcmalloc profiler)
    endif()
endmacro() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:11:42.357

您可以在 CMake 中编写一个为您工作的函数/宏。

```
function(setup name sources
add_executable(name sources)
target_link_library(name tcmalloc profiler)
endfunction(setup)
setup(foo foo.c)
setup(bar bar.c) 
```

查看[文档](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3afunction "CMake 文档")以获取更多信息。

# c++ - 什么 typedef BOOL (WINAPI *FN_SetupDiGetDeviceProperty)？

> ID：10555709
> 
> 赞同：1
> 
> 时间：2012-05-11T17:06:35.247
> 
> 标签：c++, device, wdk

我在这里找到了一些代码，列出了计算机上的所有 USB 设备。这是代码：

```
#include <windows.h>
#include <devguid.h>    // for GUID_DEVCLASS_CDROM etc
#include <setupapi.h>
#include <cfgmgr32.h>   // for MAX_DEVICE_ID_LEN, CM_Get_Parent and CM_Get_Device_ID
#define INITGUID
#include "c:\WinDDK\7600.16385.1\inc\api\devpkey.h"
#include <tchar.h>
#include <stdio.h>
#include <iostream>

#define ARRAY_SIZE(arr)     (sizeof(arr)/sizeof(arr[0]))

#pragma comment (lib, "setupapi.lib")

typedef BOOL (WINAPI *FN_SetupDiGetDeviceProperty)(
  __in       HDEVINFO DeviceInfoSet,
  __in       PSP_DEVINFO_DATA DeviceInfoData,
  __in       const DEVPROPKEY *PropertyKey,
  __out      DEVPROPTYPE *PropertyType,
  __out_opt  PBYTE PropertyBuffer,
  __in       DWORD PropertyBufferSize,
  __out_opt  PDWORD RequiredSize,
  __in       DWORD Flags
);

// List all USB devices with some additional information
void ListUsbDevices(void)
{
    unsigned i, j;
    DWORD dwSize, dwPropertyRegDataType;
    DEVPROPTYPE ulPropertyType;
    OSVERSIONINFO osvi;
    CONFIGRET r;
    HDEVINFO hDevInfo;
    SP_DEVINFO_DATA DeviceInfoData;
    const static LPCTSTR arPrefix[3] = {TEXT("VID_"), TEXT("PID_"), TEXT("MI_")};
    TCHAR szDeviceInstanceID [MAX_DEVICE_ID_LEN];
    TCHAR szDesc[1024];
    LPTSTR pszToken, pszNextToken;
    TCHAR szVid[MAX_DEVICE_ID_LEN], szPid[MAX_DEVICE_ID_LEN], szMi[MAX_DEVICE_ID_LEN];

#ifdef UNICODE
    FN_SetupDiGetDeviceProperty fn_SetupDiGetDeviceProperty = (FN_SetupDiGetDeviceProperty)
        GetProcAddress (GetModuleHandle (TEXT("Setupapi.dll")), "SetupDiGetDevicePropertyW");
#else
    FN_SetupDiGetDeviceProperty fn_SetupDiGetDeviceProperty = (FN_SetupDiGetDeviceProperty)
        GetProcAddress(GetModuleHandle(TEXT("Setupapi.dll")), "SetupDiGetDevicePropertyA");
#endif

    // List all connected USB devices
    hDevInfo = SetupDiGetClassDevs (NULL, TEXT("USB"), NULL, DIGCF_PRESENT|DIGCF_ALLCLASSES);
    if (hDevInfo == INVALID_HANDLE_VALUE)
        return;

    // Find the ones that are driverless
    for (i = 0; ; i++)  {
        DeviceInfoData.cbSize = sizeof (DeviceInfoData);
        if (!SetupDiEnumDeviceInfo(hDevInfo, i, &DeviceInfoData))
            break;

        r = CM_Get_Device_ID(DeviceInfoData.DevInst, szDeviceInstanceID , MAX_PATH, 0);
        if (r != CR_SUCCESS)
            continue;

        _tprintf (TEXT("%s\n"), szDeviceInstanceID );

        if (SetupDiGetDeviceRegistryProperty (hDevInfo, &DeviceInfoData, SPDRP_DEVICEDESC,
                                              &dwPropertyRegDataType, (BYTE*)szDesc,
                                              sizeof(szDesc),   // The size, in bytes
                                              &dwSize))
            _tprintf (TEXT("    Device Description: \"%s\"\n"), szDesc);

        // Retreive the device description as reported by the device itself
        memset(&osvi, 0, sizeof(OSVERSIONINFO));
        osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFO);
        if ( (GetVersionEx(&osvi) != 0)
            && (osvi.dwBuildNumber >= 7000) ) {
                // On Vista and earlier, we can use only SPDRP_DEVICEDESC
                // On Windows 7, the information we want ("Bus reported device description") is
                // accessed through DEVPKEY_Device_BusReportedDeviceDesc
                if (fn_SetupDiGetDeviceProperty && fn_SetupDiGetDeviceProperty (hDevInfo, &DeviceInfoData, &DEVPKEY_Device_BusReportedDeviceDesc,
                                                                                &ulPropertyType, (BYTE*)szDesc, sizeof(szDesc), &dwSize, 0))
                    _tprintf (TEXT("    Bus Reported Device Description: \"%s\"\n"), szDesc);
        }

        pszToken = _tcstok_s (szDeviceInstanceID , TEXT("\\#&"), &pszNextToken);
        while(pszToken != NULL)
        {
            szVid[0] = TEXT('\0');
            szPid[0] = TEXT('\0');
            szMi[0] = TEXT('\0');
            for (j = 0; j < 3; j++) {
                if (_tcsncmp(pszToken, arPrefix[j], lstrlen(arPrefix[j])) == 0) {
                    switch(j) {
                        case 0:
                            _tcscpy_s(szVid, ARRAY_SIZE(szVid), pszToken);
                            break;
                        case 1:
                            _tcscpy_s(szPid, ARRAY_SIZE(szPid), pszToken);
                            break;
                        case 2:
                            _tcscpy_s(szMi, ARRAY_SIZE(szMi), pszToken);
                            break;
                        default:
                            break;
                    }
                }
            }
            if (szVid[0] != TEXT('\0'))
                _tprintf (TEXT("    vid: \"%s\"\n"), szVid);
            if (szPid[0] != TEXT('\0'))
                _tprintf (TEXT("    pid: \"%s\"\n"), szPid);
            if (szMi[0] != TEXT('\0'))
                _tprintf (TEXT("    mi: \"%s\"\n"), szMi);
            pszToken = _tcstok_s (NULL, TEXT("\\#&"), &pszNextToken);

            //VID and PID for the playstation Move.
            if( szVid[4] == TEXT('8') && 
                szVid[5] == TEXT('8') && 
                szVid[6] == TEXT('8') && 
                szVid[7] == TEXT('8') &&
                szPid[4] == TEXT('0') &&
                szPid[5] == TEXT('3') &&
                szPid[6] == TEXT('0') &&
                szPid[7] == TEXT('8'))
            {
                std::cout << "PlayStation Move Detected!" << std::endl;
                break;
            }
        }

    }

    return;
}

int main()
{
    int iQuit;
    ListUsbDevices();
    std::cin >> iQuit;

    return 0;
} 
```

为什么我们需要先定义 FN_SetupDiGetDeviceProperty 代码块？它究竟做了什么？我认为 SetupDiGetDeviceProperty 函数是 WDK 的一部分，所以我们可以立即使用它？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:16:35.467

编译器正在使用预处理器指令来动态编译函数指针，以便调用哪个版本的函数：支持 unicode 的版本，或支持 ansi 的版本。是的，通过正确的库引用和包含，您应该能够直接调用它而无需 loadlibrary()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:18:48.440

```
typedef BOOL (WINAPI *FN_SetupDiGetDeviceProperty)(
  __in       HDEVINFO DeviceInfoSet,
  __in       PSP_DEVINFO_DATA DeviceInfoData,
  __in       const DEVPROPKEY *PropertyKey,
  __out      DEVPROPTYPE *PropertyType,
  __out_opt  PBYTE PropertyBuffer,
  __in       DWORD PropertyBufferSize,
  __out_opt  PDWORD RequiredSize,
  __in       DWORD Flags
); 
```

上面的代码定义`FN_SetupDiGetDeviceProperty`为一个指向函数的指针，该函数采用该（长）参数列表并返回一个`BOOL`. `WINAPI`是一个宏，指定函数的调用约定（`__stdcall`等`__cdecl`）。

稍后在您的代码中，函数指针`fn_SetupDiGetDeviceProperty`被有条件地设置为`SetupDiGetDevicePropertyW`或者`SetupDiGetDevicePropertyA`取决于您是否使用`UNICODE`定义的宏进行编译。

DLL实际上没有命名`SetupDiGetDeviceProperty`导出的函数。如果您仔细研究正在使用的库的标题，您会发现如下内容：

```
#ifdef UNICODE
#define SetupDiGetDeviceProperty SetupDiGetDevicePropertyW
#else
#define SetupDiGetDeviceProperty SetupDiGetDevicePropertyA
#endif 
```

因此，当您调用时，`SetupDiGetDeviceProperty`您实际上是在调用该函数的 2 个变体 (A/W) 之一。

# php - 如何在 PHP 中使用 TripleDes 对文件进行加密和解密

> ID：10555713
> 
> 赞同：1
> 
> 时间：2012-05-11T17:06:49.537
> 
> 标签：php, encryption, tripledes

我找不到关于这个主题的足够资源，我需要学习如何在 PHP 中使用 TripleDes 加密和解密文件（上传时应该加密文件，下载文件时应该解密）。

我也找到了一些例子，但我无法实现它 [http://php.net/manual/en/mcrypt.examples.php](http://php.net/manual/en/mcrypt.examples.php) http://stackoverflow.com/questions/10548386/issue-with-encrypt-and-decrypt -a-word-docx-file-in-php

感谢您的兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:18:07.060

您可以使用此代码加密字符串：

```
$buffer = $file; 
// get the amount of bytes to pad
$extra = 8 - (strlen($buffer) % 8);
// add the zero padding
if($extra > 0) {
    for($i = 0; $i < $extra; $i++) {
        $buffer .= "\0";
    }
}
// very simple ASCII key and IV
$key = "passwordDR0wSS@P6660juht";
$iv = "password";
// hex encode the return value
$encrypted_file = mcrypt_cbc(MCRYPT_3DES, $key, $buffer, MCRYPT_ENCRYPT, $iv); 
```

这是解密它：

```
$decrypted_file = mcrypt_cbc(MCRYPT_3DES, $key, $encrypted_file, MCRYPT_DECRYPT, $iv); 
```

# ruby-on-rails - Rails - 根据上次更新的 has_many 子项的条件选择父项

> ID：10555718
> 
> 赞同：0
> 
> 时间：2012-05-11T17:07:22.840
> 
> 标签：ruby-on-rails

嗨，我有两个导轨模型

```
class Feedback < ActiveRecord::Base
  has_many :conversations, :dependent => :destroy

class Conversation < ActiveRecord::Base
  belongs_to :feedback, :touch => true 
```

在架构中

```
create_table "conversations", :force => true do |t|
t.text     "content"
t.integer  "feedback_id"
t.datetime "created_at"
t.datetime "updated_at"
t.string   "author"
end

create_table "feedbacks", :force => true do |t|
t.datetime "created_at"
t.datetime "updated_at"
t.string   "status"
end 
```

请注意，我已经从与这个问题无关的模型中删除了列和关系，所以请不要建议我以不同的方式重组模型

在我的控制器中，我有一种方法，我想选择状态为“未读”且其最后更新对话的作者是“管理员”的反馈

我知道以下选择状态为“未读”的反馈，但我如何扩展它以选择符合我的对话作者要求的反馈？

```
@feedbacks = Feedback.where(:status => "unread") 
```

* * *

我发现这个网站（http://m.onkey.org/find-users-with-at-least-n-items）似乎在做一些远程相似的事情，因为它根据与子模型相关的条件选择父级，但仍在试图弄清楚如何为我的情况修改它......

提前非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:43:44.357

它应该工作：

```
@feedbacks = Feedback.includes(:conversations).where("status = ? and conversations.author = ?", unread_state, admin_id).select{|a| a.conversations.last().author == admin} 
```

当然，包括您当前的值到`unread_status`,`admin`和`admin_id`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:10:51.420

```
@feedbacks = Feedback.where("status = ? and author = ?", "unread", "admin") 
```

# ajax - 在 WordPress 单个帖子文件中包含页眉/页脚的条件

> ID：10555727
> 
> 赞同：0
> 
> 时间：2012-05-11T17:08:00.377
> 
> 标签：ajax, wordpress, include

我正在构建一个基于 WordPress 的 AJAX 站点，我使用 jQuery 和 .get() 方法将单个帖子页面中的内容显示到同一页面上。现在我不想在检索这些数据时包含页眉/页脚，但我仍然需要让它对 SEO 友好，并让所有单个页面都可以在其他地方访问。是否可以在 single.php 文件中编写一个条件来完成此操作？

尝试使用

```
<?php if (!is_home()) { get_header(); } ?> 
```

特别是在访问该页面时，它可以工作；标题包括在内。但是，如果我通过主页上的 .get() 加载 url，我会得到所有内容并最终得到一个双标题。不知何故 WP 认为它在家庭位置，即使它正在远程运行条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:23:21.310

在以下位置调用您的 AJAX 函数`init hook`：

```
// add_action('init', array($this, 'process_ajax_callback'));
add_action('init', 'process_ajax_callback'); 
```

并`exit`在输出数据后使用（使用`echo`）：

```
function process_ajax_callback()
{
    $output = ''; // your desired output

    // echo json_encode($output);
    echo $output; 

    exit; // kill script here
} 
```

# embedded - VHDL 中的 BRAM_INIT

> ID：10555729
> 
> 赞同：4
> 
> 时间：2012-05-11T17:08:01.017
> 
> 标签：embedded, vhdl, fpga, xilinx

我正在模拟基于处理器的设计，其中程序存储器内容保存在 BRAM 中。我正在使用 VHDL（推断 BRAM）实现程序存储器。我试图避免使用 CoreGen，因为我想保持设计的可移植性。最终，该设计将用于 FPGA。

我想看看是否有办法使用 VHDL 泛型初始化 BRAM 的内存内容？我知道 Coregen 使用 COE 文件来初始化 BRAM，但我们是否有基于 VHDL 代码的方法来执行此操作？

让我知道你的替代建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T18:07:57.990

是的，这当然是可能的。查看[Xilinx 综合工具 (XST) 用户指南](http://www.xilinx.com/support/documentation/sw_manuals/xilinx13_4/xst.pdf)，特别是第 187 页。

他们建议执行此操作的代码在下面复制。他们在用户指南中有关于将要读取的文件格式的注释。请注意，此代码不直接使用泛型，但我可以想象您可以设置一个常量或泛型来保存文件名的名称......

```
--
-- Initializing Block RAM from external data file
--
library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_unsigned.all;
use std.textio.all;

entity rams_20c is
port(clk : in std_logic;
   we : in std_logic;
   addr : in std_logic_vector(5 downto 0);
   din : in std_logic_vector(31 downto 0);
   dout : out std_logic_vector(31 downto 0));
end rams_20c;
architecture syn of rams_20c is
   type RamType is array(0 to 63) of bit_vector(31 downto 0);
   impure function InitRamFromFile (RamFileName : in string) return RamType is
      FILE RamFile : text is in RamFileName;
      variable RamFileLine : line;
      variable RAM : RamType;
   begin
      for I in RamType’range loop
         readline (RamFile, RamFileLine);
         read (RamFileLine, RAM(I));
      end loop;
      return RAM;
   end function;
signal RAM : RamType := InitRamFromFile("rams_20c.data");
begin
   process (clk)
   begin
      if clk’event and clk = ’1’ then
         if we = ’1’ then
            RAM(conv_integer(addr)) <= to_bitvector(din);
         end if;
         dout <= to_stdlogicvector(RAM(conv_integer(addr)));
      end if;
   end process;
end syn; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:52:08.420

或者，不要费心使用泛型或读取文件；只需在包中声明一个常量数组。将它放在一个包而不是主架构中，您甚至可以使用脚本自动编写包（例如，读取汇编器输出或文本文件）。

```
library ieee;
use ieee.std_logic_1164.all;

package ProgMem is

type Word is std_logic_vector(7 downto 0);

constant ROM : array (0 to 3) of Word := 
    (
         X"C3",
         X"00",
         X"00",
         "UUUUUUUU" );         

end package Progmem; 
```

真正的程序可能会更长，但这说明了模式

# python - pyUSB 未发现设备

> ID：10555734
> 
> 赞同：1
> 
> 时间：2012-05-11T17:08:43.310
> 
> 标签：python, macos, usb, libusb, pyusb

所以，我已经在我的 OS X Lion (10.7.3) 机器上安装了 libusb 和 pyUSB，并且我运行了以下脚本：

```
import usb
import time

if __name__ == "__main__":
    while True:
        busses = usb.busses()
        print busses[0]
        print busses[0].__dict__
        time.sleep(2) 
```

我插入了一个 USB 设备：SanDisk cruzer micro，4GB。我可以毫无问题地在 Finder 和磁盘工具中打开这个闪存驱动器。但是，上述脚本的输出是：

```
<usb.legacy.Bus object at 0x108defe10>
{'dirname': '', 'devices': [], 'localtion': 0}
<usb.legacy.Bus object at 0x108ef4610>
{'dirname': '', 'devices': [], 'localtion': 0}
<usb.legacy.Bus object at 0x108defe10>
{'dirname': '', 'devices': [], 'localtion': 0}
<usb.legacy.Bus object at 0x108ef4610>
{'dirname': '', 'devices': [], 'localtion': 0} 
```

至少表明 pyUSB 的第一个也是唯一一个总线不相信当前连接了任何设备。我错过了某种基本设置吗？为什么 pyUSB 找不到我的设备？

**我一直在参考**这个 StackOverflow 问题来开始：[usb 设备识别](https://stackoverflow.com/questions/2487033/usb-device-identification)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:27:40.900

原来这是一个糟糕的 libusb 安装。

[从http://www.libusb.org](http://www.libusb.org)获取新版本。

# javascript - 在 PhoneGap Build 上构建 Android 应用程序

> ID：10555737
> 
> 赞同：1
> 
> 时间：2012-05-11T17:08:56.507
> 
> 标签：javascript, jquery, android, ios, cordova

我正在使用禁用调试模式的 PhoneGap Build 构建 Web 应用程序，但是当我下载文件时处于调试模式。这仅在 Android 上发生，所有其他操作系统都是正确的。

如何禁用 Android 应用程序的调试模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-20T02:26:26.793

当你运行构建时。利用：

```
cordova build android --release 
```

或者

```
phonegap build android --release 
```

如果上传到播放商店错误 ==>

上传失败 您上传了一个可调试的 APK。出于安全原因，您需要先禁用调试，然后才能在 Google Play 中发布它

确保您的清单是这样设置的： android:debuggable="false" 例如

```
<application android:debuggable="false" android:hardwareAccelerated="true" android:icon="@drawable/icon" android:label="@string/app_name"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:59:01.607

在您的 android 项目中，打开 res/xml 和 cordova.xml 或 phonegap.xml，并更改 phonegap 中的调试器级别。

目前是`<log level="DEBUG"/>`。

您可以将其更改为：

1.  断言
2.  错误
3.  信息
4.  详细
5.  警告

使用[http://developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html)

# jquery - 如何在 MVC3 中使用 jquery 显示远程验证消息？

> ID：10555738
> 
> 赞同：0
> 
> 时间：2012-05-11T17:09:10.847
> 
> 标签：jquery, asp.net-mvc-3, remote-validation

我有一个 JQuery 来显示远程验证消息，但我只希望它执行远程验证而不是所需的验证。

到目前为止我有

```
$('#MyElement').keyup(function () {    
         if (!!myEmailTimeoutChecker) {    
            clearTimeout(myEmailTimeoutChecker);    
         }    
         myEmailTimeoutChecker = setTimeout(verifyMyElement, 2000)    
 }); 
```

所以它验证是否已经过了 2 秒，并且在`verifyMyElement`方法中，我打电话给`$('#MyElement').valid();` 也许我只需要做一些不同的事情，不太确定，但我只想看到远程验证消息而不是所需的验证消息。所需的验证消息应仅在表单提交时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:08:34.517

该`valid()`方法将验证所有已到位的验证规则。如果您想要一个独立的，则应该制作一个自定义的，而不是使用内置的。

# javascript - 如何创建一个 html 表单以处理 isitup.org 小部件的 url

> ID：10555743
> 
> 赞同：2
> 
> 时间：2012-05-11T17:09:59.247
> 
> 标签：javascript, html

我想知道如何创建一个 html 表单来处理对[http://isitup.org](http://isitup.org)的 url 请求。

该[网站](http://isitup.org/widget/widget.html)提供了一个 javascript[小部件](http://isitup.org/widget/widget.html)，它让我可以选择在 html 文件中传递 url，但我想知道如何使用 html 表单来执行此操作。

![在此处输入图像描述](../Images/217b5e5baa77803307488f333eda1af2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:48:50.703

您可以在没有 HTML 表单的情况下轻松完成此操作，因为调用可以是异步的

在您的 html 中：

```
<input type="text" id="txtDomain" value="stackoverflow.com" /> 
<button>Check Domain</button>

<div id="result"></div> 
```

在 jQuery 中：

```
$(function() {

  $("button").click(function() {

    var url = 'http://isitup.org/' + $("#txtDomain").val() + '.json';

    $.getJSON(url + "?callback=?", function(data) {

      $("#result").html(
        "<h2>" + data.domain + "</h2>" +
        "<ul>" + 
          "<li>Code: " + data.response_code + "</li>" +
          "<li>IP: " + data.response_ip + "</li>" +
          "<li>Time " + data.response_time + " ms</li>" +
        "</ul>"
      );

    });

  });

}); 
```

> [可以在](http://jsbin.com/umeboq/2/edit)[**JsBIN**](http://jsbin.com/umeboq/2/edit)上找到一个活生生的例子[](http://jsbin.com/umeboq/2/edit)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:03:46.750

```
isitup={    server : "http://isitup.org/",
    exec : function() {
        var doc = document, node = this.get_elements(document, "isitup-widget"), server = this.server, requested = [];
        var i, len;
        for (i = 0, len = node.length; i < len; i++) {
            var HTML = "";
            var domain = node[i].getAttribute("data-domain");
            if (!domain) {
                domain = window.location.hostname;
                node[i].setAttribute("data-domain", domain);
            }
            HTML += '<div class="isitup-icon">';
            HTML += '<img src="'
                    + server
                    + 'widget/img/loader.gif" width="16px" height="16px" style="vertical-align: middle;" />';
            HTML += '</div>';
            HTML += '<div class="isitup-domain">';
            HTML += '<a href="' + server + domain + '">' + domain + '</a>';
            HTML += '</div>';
            node[i].innerHTML = HTML;
            if (this.is_domain(domain)) {
                if (!this.in_list(domain, requested)) {
                    this.get_json(domain);
                    requested.push(domain);
                }
            } else {
                this.update({
                    "domain" : domain,
                    "status_code" : 3
                });
            }
        }
    },
    get_json : function(domain) {
        var t = "script", d = document;
        var j = d.createElement(t), p = d.getElementsByTagName(t)[0];
        j.type = "text/javascript";
        j.src = this.server + domain + ".json?callback=isitup.update";
        p.parentNode.insertBefore(j, p);
    },
    update : function(result) {
        var node = this.get_elements(document, "isitup-widget"), widget = [];
        var i, len;
        for (i = 0, len = node.length; i < len; i++) {
            if (node[i].getAttribute("data-domain") == result.domain
                    && !node[i].getAttribute("data-checked")) {
                widget.push(node[i]);
                node[i].setAttribute("data-checked", true);
            }
        }
        var j;
        for (j = 0, len = widget.length; j < len; j++) {
            switch (result.status_code) {
            case 1:
                this.set_image("online", widget[j]);
                if (widget[j].hasAttribute("data-uplink")) {
                    this.set_link(widget[j].getAttribute("data-uplink"),
                            widget[j]);
                }
                break;
            case 2:
                this.set_image("offline", widget[j]);
                if (widget[j].hasAttribute("data-downlink")) {
                    this.set_link(widget[j].getAttribute("data-downlink"),
                            widget[j]);
                }
                break;
            case 3:
                this.set_image("error", widget[j]);
                this.set_link(this.server + "d/"
                        + widget[j].getAttribute("data-domain"), widget[j]);
                break;
            }
        }
    },
    set_image : function(image, node) {
        this.get_elements(node, "isitup-icon")[0].firstChild.setAttribute(
                "src", this.server + "widget/img/" + image + ".png");
    },
    set_link : function(link, node) {
        this.get_elements(node, "isitup-domain")[0].firstChild.setAttribute(
                "href", link);
    },
    is_domain : function(domain) {
        re = /^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/;
        return (re.test(domain)) ? true : false;
    },
    in_list : function(value, list) {
        var i, len;
        for (i = 0, len = list.length; i < len; i++) {
            if (list[i] == value) {
                return true;
            }
        }
        return false;
    },
    get_elements : function(node, classname) {
        var doc = document;
        if (typeof doc.getElementsByClassName == "function") {
            return node.getElementsByClassName(classname);
        } else if (typeof doc.querySelectorAll == "function") {
            return node.querySelectorAll("." + classname);
        } else {
            var div = doc.getElementsByTagName("div"), widgets = [];
            var i, len;
            for (i = 0, len = div.length; i < len; i++) {
                if (div[i].className == classname) {
                    widgets.push(div[i]);
                }
            }
            return widgets;
        }
    }
};
var alreadyrunflag = 0;
if (document.addEventListener) {
    document.addEventListener("DOMContentLoaded", function() {
        alreadyrunflag = 1;
        isitup.exec();
    }, false);
} else if (document.all && !window.opera) {
    document
            .write('<script type="text/javascript" id="contentloadtag" defer="defer" src="javascript:void(0)"><\/script>');
    var contentloadtag = document.getElementById("contentloadtag");
    contentloadtag.onreadystatechange = function() {
        if (this.readyState == "complete") {
            alreadyrunflag = 1;
            isitup.exec();
        }
    };
}
window.onload = function() {
    setTimeout("if (!alreadyrunflag) { isitup.exec }", 0);
}; 
```

他们用图书馆来做。找出你必须做的事情，只使用那个，重写库，然后附加。我认为这很容易。

```
 get_json : function(domain) {
        var t = "script", d = document;
        var j = d.createElement(t), p = d.getElementsByTagName(t)[0];
        j.type = "text/javascript";
        j.src = this.server + domain + ".json?callback=isitup.update";
        p.parentNode.insertBefore(j, p);
    },
    update : function(result) {
        var node = this.get_elements(document, "isitup-widget"), widget = [];
        var i, len;
        for (i = 0, len = node.length; i < len; i++) {
            if (node[i].getAttribute("data-domain") == result.domain
                    && !node[i].getAttribute("data-checked")) {
                widget.push(node[i]);
                node[i].setAttribute("data-checked", true);
            }
        } 
```

您只需将数据设置为此函数，在更新函数中，您可以使用 result.status_code 进行响应。**

# iphone - 在 TabBar 控制器中打开子视图？

> ID：10555745
> 
> 赞同：0
> 
> 时间：2012-05-11T17:10:05.040
> 
> 标签：iphone, objective-c

我对objective c和iphone开发完全陌生。我正在尝试创建一个具有三个级别的应用程序：TabBarView、TableView 和普通视图。用户从 TabBarView 开始，选择两个 TableView 之一，然后可以选择列出的项目之一来显示其详细信息（在普通视图中）。我在互联网文章中找到了以下代码来帮助解决这个问题：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    Lightbulb *entry = [self.dataController objectInListAtIndex:[indexPath row]];

    DetailsController *dvController = [[DetailsController alloc] initWithNibName:@"DetailsView" bundle:[NSBundle mainBundle]];
    [dvController assignModel:entry];
    [self.navigationController pushViewController:dvController animated:YES];
    [dvController release];

} 
```

（`LightBulb`是我制作的模型类，DetailsController 和 DetailsView 存在模板化实现）。

这是在 TableViewController 中。它被调用，但没有实现任何目标。我不知道为什么会这样。

`didSelectRowAtIndexPath`在响应事件以显示新视图时，我究竟需要做什么？如何以不隐藏/干扰选项卡视图的方式执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:18:41.500

我假设您的选项卡正在两个视图控制器之间进行选择，如果是这种情况，那么“[self.navigationController pushViewController:dvController animated:YES];” 将不起作用，因为您没有该视图控制器的导航控制器。

您将需要具有 tabBarViewController 的结构，其中每个选项卡加载 UINavigationController 而不是 ViewController。我建议学习基于导航的应用程序的基础知识，该应用程序完成从 tableview 中的选择，然后在您理解它时将该代码传输到该项目。这可能是一个很好的[导航教程](http://www.iosdevnotes.com/2011/03/uinavigationcontroller-tutorial/)

# javascript - Ajax div 点击事件

> ID：10555747
> 
> 赞同：-1
> 
> 时间：2012-05-11T17:10:05.803
> 
> 标签：javascript, ajax, facebook, facebook-like

这是一个两步代码。用户应单击喜欢，然后单击继续继续。但是，我无法让 div 事件正常工作。点赞按钮位于名为 postos 的 div 之间。如果在此 div 之间单击某些内容，它应该使thanks.php 可访问。

也试过这个

```
<script type="text/javascript" charset="utf-8">  

$(document).ready(function () {
  $("#postos").click(function () {
    $("#linkos").attr('href', 'thanks.php');
  });
});

 </script>  

<script src="http://code.jquery.com/jquery-1.5.1.min.js"></script> 

        <div id="fb-root"></div>
        <script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

        <div class="fb-like">

<div id="postos">
<div class="fb-like" data-send="true" url="http://tehcplz.org" data-width="450" data-show-faces="true"></div>
</div>

<br><br>

<p>Continue <a id="linkos" href='javascript:window.alert("like us");'> <br/>Click to continue </a>
<br>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:18:16.847

尝试这样的事情

```
$(document).ready(function () {
  $("#postos > *").click(function () {
    $("#linkos").attr('href', 'thanks.php');
  });
}); 
```

# tomcat - 具有 ws 寻址功能的 jaxws 客户端上的 javax.xml.ws.WebServiceException

> ID：10555751
> 
> 赞同：0
> 
> 时间：2012-05-11T17:10:13.230
> 
> 标签：tomcat, client, jax-ws, dispatch, ws-addressing

我在使用 jaxws 客户端调用 Web 服务时遇到了问题，在 Tomcat 中运行

代码如下：

```
 javax.xml.namespace.QName portQname = new javax.xml.namespace.QName("urn:hl7-org:v3","PRPA_AR201302UV02_Service");
    javax.xml.ws.Service service = javax.xml.ws.Service.create(new javax.xml.namespace.QName("urn:hl7-org:v3","PRPA_AR201302UV02_Service"));
    service.addPort(portQname,javax.xml.ws.soap.SOAPBinding.SOAP12HTTP_BINDING,wsaddress);

    Dispatch<Object> dispatch =service.createDispatch(portQname,jaxbContext,javax.xml.ws.Service.Mode.PAYLOAD,new javax.xml.ws.soap.AddressingFeature());

    dispatch.getRequestContext().put(javax.xml.ws.BindingProvider.SOAPACTION_USE_PROPERTY,true);
    dispatch.getRequestContext().put(javax.xml.ws.BindingProvider.SOAPACTION_URI_PROPERTY,"urn:hl7-org:v3:PRPA_IN201301UV02"); 
```

当我从 Eclipse 运行工具运行代码时，该代码与 ws-addressing 功能一起正常工作，而不提供axis2.xml 文件

当我在 Tomcat 实例中运行它时，它给了我以下异常

javax.xml.ws.WebServiceException：获取客户端配置上下文时出错：系统正在尝试使用不可用的模块：在 org.apache.axis2.jaxws.ExceptionFactory.createWebServiceException(ExceptionFactory.java:173) 处寻址。 org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:118) 在 org.apache.axis2.jaxws.ClientConfigurationFactory.getClientConfigurationContext(ClientConfigurationFactory.getClientConfigurationContext(ClientConfigurationFactory. java:119) 在 org.apache.axis2.jaxws.description.impl.DescriptionFactoryImpl.createServiceDescription(DescriptionFactoryImpl.java:92) 在 org.apache.axis2.jaxws.description.impl.DescriptionFactoryImpl.createServiceDescription(DescriptionFactoryImpl.java:79)在 org.apache.axis2.jaxws。description.DescriptionFactory.createServiceDescription(DescriptionFactory.java:78) 在 org.apache.axis2.jaxws.spi.ServiceDelegate.(ServiceDelegate.java:218) 在 org.apache.axis2.jaxws.spi.Provider.createServiceDelegate(Provider.java :83) 在 org.apache.axis2.jaxws.spi.Provider.createServiceDelegate(Provider.java:79) 在 javax.xml.ws.Service.(Service.java:92) 在 javax.xml.ws.Service.create (Service.java:756) 在 wgs.v3.client.impl.V3ClientNoWsdl.invoke(V3ClientNoWsdl.java:89) 在 wgs.tx 的 wgs.v3.client.impl.V3ClientNoWsdl.callMethod(V3ClientNoWsdl.java:128)。 dispatcher.Sender.elab(Sender.java:204) 在 wgs.tx.dispatcher.Sender.elab(Sender.java:158) 在 wgs.tx.system.MessageDispatcherSender.processRequest(MessageDispatcherSender.java:159) 在 wgs.tx .system.MessageDispatcherSender.run（MessageDispatcherSender.java：99) 在 java.lang.Thread.run(Thread.java:595)

有人发出同样的问题吗？我无法摆脱这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:11:39.537

问题解决了。

Eclipse 运行工具不是基于 jax-ws 标准的axis2 实现，而是基于独立发行版。

要使用axis2在Tomcat上正确运行相同的类，我必须在创建服务实例之前添加以下行

```
System.setProperty(org.apache.axis2.Constants.AXIS2_REPO, getServletContext().getRealPath(FILE_SEPARATOR) + FILE_SEPARATOR + "WEB-INF"); 
```

这样axis2实现可以正确访问模块和配置目录。

# silverlight - 如何将服务调用的结果作为文件返回？

> ID：10555754
> 
> 赞同：0
> 
> 时间：2012-05-11T17:10:30.893
> 
> 标签：silverlight, wcf-ria-services

我有一个 Silverlight 应用程序，它获取联系人列表并将它们显示在数据网格中。该应用程序还需要支持将联系人导出到 Excel 并将联系人打印为 HTML 页面。

我使用 WCF RIA 服务在 Silverlight 客户端上构建大部分查询，然后服务器也向查询添加了一些额外的 where 子句。

我试图弄清楚是否有一种方法可以使用 ASP.Net 页面运行查询结果，该页面将格式化它们并提示用户下载结果（或打印结果）。

我想出的唯一想法是将 IQueryable 对象保存为服务器端的变量并将密钥返回给 Silverlight 页面。然后将密钥传递给 Export.aspx 或 Print.aspx，它们将获取查询结果并返回它们。

有更好的想法吗？

似乎必须有一个更好的方法，我只是没有想到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:06:18.870

所以经过大量的工作和研究，我终于能够做到这一点。为了使它工作，我不得不在 Silverlight 端使用一些 WCF RIA 服务内部类（通过反编译）来生成正确的查询字符串以传递给 ASP.Net 页面。然后在服务器端，我不得不反编译更多的类来解析查询字符串并将其转换为有效的 Linq 查询。现在一切正常，我可以在后面的代码中运行查询并将结果输出为文件。

如果有人感兴趣，请告诉我，我可以尝试分享血淋淋的细节。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:14:28.720

不幸的是，至少我所知道的没有更好的方法。我们也一直在为我们在 Silverlight 中的 Excel 导出进行研究。我们尝试使用 url 打开一个新的浏览器窗口，但您无法添加任何标题或 PUT 数据，这是我们需要的。因此，除非您可以在 URL 中完全编码您的查询，否则这种方法将不起作用。

正如您在问题中提到的，我们将实施的方法是将导出的结果保存在存储中并返回该结果的密钥。

另一方面，它确实允许一些不错的功能，例如启用发送资源链接。这当然会引起所有令人头疼的权限等问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T23:24:30.520

I've successfully generated Excel files using [ExcelLite](http://excellite.codeplex.com/) on the client side. Then it is a matter of prompting the user with a Save File dialog. You can do this generically for datagrids. Outputting HTML is not much harder.

# javascript - ASP .NET MVC、DateTimePicker 和 jQuery 验证

> ID：10555769
> 
> 赞同：3
> 
> 时间：2012-05-11T17:11:36.493
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, jquery-ui

我有一个带有 StartTime 日期和 EndTime 日期的模型：

```
[Required]
[DataType(DataType.DateTime)]
public DateTime StartTime { get; set; }

[Required]
[DataType(DataType.DateTime)]
public DateTime EndTime { get; set; } 
```

使用这两个日期的当前视图具有以下形式：

```
@if (Roles.IsUserInRole("Teacher"))
{
    <h2>AddSession</h2>

    using (Html.BeginForm("SessionAdded", "Course", FormMethod.Post, new { id = "myform" }))
    {
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>Add Session</legend>
            <div class="editor-label">
                @Html.LabelFor(model => model.Name)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.StartTime)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.StartTime, new { @class = "date" , id = "StartTime" })
                @Html.ValidationMessageFor(model => model.StartTime)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.EndTime)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.EndTime, new { @class = "date", id = "EndTime" })
                @Html.ValidationMessageFor(model => model.EndTime)
            </div>
            <p>
                <input id="submit" type="submit" />
            </p>
        </fieldset>
    }
} 
```

当我删除 : `<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>`从我看来我没有问题。

但是当我使用 时`jquery.validate`，我的两个字段返回：`Please enter a valid date.`. 我将[DateTimePicker 用于 jQuery UI](http://trentrichardson.com)。

我有以下 Javascript 代码：

```
$(document).ready(function () {

var datepickers = $('.date').datetimepicker({
    minDate: 0,
    dateFormat: "dd/mm/yy",
    timeFormat: "hh:mm",
    onSelect: function (date) {
        var option = this.id == 'StartTime' ? 'minDate' : 'maxDate';
        datepickers.not('#' + this.id).datepicker('option', option, date);
    }
});

$("#myform").validate({
    ignore: ".date"
})

}); 
```

我想忽略对我的两个日期字段（class="date"）的 jQuery 验证，因为它检查特定的日期格式，我必须在我的应用程序中使用这个：`dd/mm/yyyy hh:mm`。

我也尝试做一个自定义验证器，但没有成功。我总是收到 `Please enter a valid date`错误...

谢谢你的帮助，

埃德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T21:10:03.417

我已经做到了这一点，并努力让它在多个本地客户端的浏览器中工作。如果您可以明确地说您只需要一种日期格式，您可以通过以下步骤实现它。

在您的 Views\Shared\EditorTemplates 文件夹中包含一个名为 Date.cshtml 模板的日期编辑器，如下所示：

```
@model DateTime?
@Html.TextBox("", Model.HasValue ? Model.Value.ToString("dd/MM/yyyy") : "", new { @class = "date" }) 
```

包含一些 javascript 以在合理的地方调用日期选择器，例如在共享布局页面或共享脚本中，如下所示：

```
$(document).ready(function () {
    $('.date').datepicker({ dateFormat: "dd/mm/yy", firstDay: 1, maxDate: "+0d" });
    $.validator.methods.date = function () { return true; };
}); 
```

您可能希望更改 validator.methods.date 函数，不仅要返回 true，还要根据您的文化要求进行验证

最后，将您的 IIS 设置设置为文化设置，可以在 Web 配置中设置为 pollirrata，也可以在 .Net 全球化设置中的 IIS 管理 UI 中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:21:20.290

您可能需要将 CurrentCulture 更改为您使用的日期格式。Hanselman 有一篇关于它的好[帖子。](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)您是否使用 MVC 中包含的不显眼的验证？

这将是您需要做的更改（在我的情况下，文化适用于 GB）

网络配置

```
<globalization culture="en-GB" uiCulture="en-GB" enableClientBasedCulture="false" /> 
```

全球.asax

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-GB"); 
```

此外，您可以创建一个操作过滤器以确保操作在提交时获取文化

```
public class CultureAwareActionAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            base.OnActionExecuting(filterContext);

            if (!string.IsNullOrEmpty(filterContext.HttpContext.Request["culture"]))
            {
                Thread.CurrentThread.CurrentCulture = Thread.CurrentThread.CurrentUICulture = new CultureInfo(filterContext.HttpContext.Request["culture"]);
            }
        }
    } 
```

您只需`[CultureAwareAction]`在方法声明中添加注释

（该过滤器是为 Telerik 团队编写的，用于在他们的控件中处理本地化）

# perl - perl. 将 64 位二进制数转换为十进制数

> ID：10555770
> 
> 赞同：2
> 
> 时间：2012-05-11T17:11:41.693
> 
> 标签：perl, pack, unpack

我有一个包含 64 个二进制符号的字符串。

我需要将其转换为十进制数。我怎样才能在 perl 中做到这一点？

```
sub bin2dec {
    return unpack("N", pack("B64", substr("0" x 64 . shift, -64)));
} 
```

不起作用。它只转换前 32 位。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T17:26:50.480

从[文档](http://perldoc.perl.org/functions/pack.html)中，

```
N  An unsigned long (32-bit) in "network" (big-endian) order. 
```

64 位等价物将是“ `Q>`”。

```
q  A signed quad (64-bit) value.
Q  An unsigned quad value.
  (Quads are available only if your system supports 64-bit
  integer values _and_ if Perl has been compiled to support
  those. Raises an exception otherwise.)

>   sSiIlLqQ   Force big-endian byte-order on the type.
    jJfFdDpP   (The "big end" touches the construct.) 
```

所以你可以使用以下内容：

```
unpack("Q>", pack("B64", substr("0" x 64 . shift, -64))) 
```

* * *

也就是说，上面的内容是不必要的复杂。编码的人可能不知道[`oct`](http://perldoc.perl.org/functions/oct.html)解析二进制数的能力，因为上面可以简化为

```
oct("0b" . shift) 
```

* * *

但是，如果您没有 64 位的 Perl 版本，您会怎么做？您需要使用某种重载数学运算的对象。您可以使用[Math::BigInt](http://search.cpan.org/perldoc?Math%3a%3aBigInt)，但我怀疑它不会像[Math::Int64](http://search.cpan.org/perldoc?Math%3a%3aInt64)那样快。

```
use Math::Int64 qw( string_to_int64 );
string_to_int64(shift, 2) 
```

例如，

```
$ perl -MMath::Int64=string_to_int64 -E'say string_to_int64(shift, 2);' \
   100000000000000000000000000000000
4294967296 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T17:31:01.723

```
use Math::BigInt;
my $b = Math::BigInt->new('0b1010000110100001101000011010000110100001101000011010000110100001');
print $b; 
```

只是这个想法，而不是您的子例程的等效代码。
这里的二进制数是任意的。用你的。

# java - Java 泛型类型转换难题

> ID：10555773
> 
> 赞同：6
> 
> 时间：2012-05-11T17:11:49.177
> 
> 标签：java, generics, guava

我正在尝试使用 Google 的 Guava ImmutableSet 类来创建一组具有类时间属性（java.util.Date 和 org.joda.time.DateTime）的不可变类。

```
private static final ImmutableSet<Class<?>> timeLikeObjects = ImmutableSet.of(Date.class, DateTime.class); 
```

我完全不知道为什么会出现此编译器错误（Eclipse 中的 Java 1.6）。

```
Type mismatch: cannot convert from ImmutableSet<Class<? extends Object&Serializable&Comparable<? extends Comparable<?>>>> to ImmutableSet<Class<?>> 
```

请注意，这有效：

```
private static final ImmutableSet<?> timeLikeObjects = ImmutableSet.of(Date.class, DateTime.class); 
```

但是，我显然松散了 timeLikeObjects 类型的通用描述的一部分。

我从未在通用描述中遇到 & 符号，而且它似乎不是有效的语法。

有没有办法在我刚刚缺少的 Java 泛型中指定多重继承？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T17:17:51.623

基本上，编译器正试图让你变得聪明。它为您制​​定了一些界限，并尝试将它们用于`of`.

幸运的是，您可以通过明确来修复它：

```
private static final ImmutableSet<Class<?>> timeLikeObjects =
    ImmutableSet.<Class<?>>of(Date.class, DateTime.class); 
```

该`&`部分*是*有效的语法 - 它是您为多种类型指定边界的方式，例如

```
public class Foo<T extends Serializable & Comparable<T>> 
```

这意味着您只能指定`T`实现`Serializable` *和* `Comparable<T>`的类型。

# eclipse-plugin - 有没有更简单的方法来为自己部署插件项目？

> ID：10555774
> 
> 赞同：1
> 
> 时间：2012-05-11T17:11:52.137
> 
> 标签：eclipse-plugin

在 Eclipse 中工作时，我有一些插件用于提高自己的工作效率。我通过添加功能项目和更新站点项目让他们工作。这是最近更新的朱诺。这是正确的方法吗？这是我所做的：

1.  新 > 插件项目 > drstest > 下一个 > 下一个 > Hello, World 命令 > 下一个 > 完成
2.  drstest/build.properties > 概述 > 启动 Eclipse 应用程序 >（参见“示例菜单”）> 关闭应用程序
3.  新 > 功能项目 > drsfeat > 下一个 >（选择 drstest）> 完成
4.  新建 > 更新站点项目 > drsupd > 完成 > 添加功能... > drsfeat > OK > control-s(ave) > 全部构建
5.  帮助 > 安装新软件 > 添加... > 本地... > 名称：drsupd 位置：C:\my\ewksp\drsupd > (选择 Drsfeat) > 下一步 > 下一步 > (accept lic) 完成 > (安全警告) OK >（重新启动）是
6.  （重启后）>（参见“示例菜单”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T23:16:29.200

就在这里。

1.  创建您的插件项目
2.  文件 -> 导出 -> 可部署的插件和片段 -> 目标 -> 安装到主机中。存储库

这是在 Eclipse 3.6 中添加的。

# java - Java 挂在 foreach 循环上

> ID：10555776
> 
> 赞同：3
> 
> 时间：2012-05-11T17:11:58.970
> 
> 标签：java, foreach, neo4j, blocking

增加 foreach 循环时，Java 似乎挂起。我找不到任何有类似问题的人，所以也许我只是做错了什么，但我无法想象它是什么。我正在从 Neo4J 数据库中提取一组节点，然后对其进行迭代。我没有在循环期间修改那组节点，但过了一会儿，它挂起。这是执行此操作的代码：

```
 IndexHits<Node> usrs = users.get("Type", "User");
        System.out.println("Operating on "+usrs.size()+" Users:");

        for (Node u : usrs) {
            System.out.print(".");
            if (inUserBlacklist(u))
                continue;
            System.out.println("HA");
        } 
```

inUserBlacklist(u) 所做的只是根据预设的一组节点检查节点 u，以查看该节点是否属于黑名单的一部分。它不会改变关于节点 u 的任何内容。

Users 是一个 Neo4J 索引，因此对其调用 get() 应该返回一个可迭代的 IndexHits 对象。这个 foreach 循环运行了 269,938 次 foreach 循环。在该迭代结束时，它会打印“HA”，但它不会再打印另一个“.”。它只是挂在那个点，就在迭代 269,939 之前。这使它成为 foreach 循环的阻塞。总共应该有 270,012 次迭代。

我注意到我的黑名单包含 74 个项目，所有这些项目都应在通过此循环时匹配一次。270,012 - 74 = 269,938，但这并不能解释为什么它会阻塞。我所能想到的是，当我调用 continue 时，foreach 循环正在增加迭代器上的位置而不增加其计数器。然后它到了集合的末尾，没有更多的东西，但计数器认为它只有 270,012 中的 269,938。

你们中有人知道为什么 foreach 循环会这样吗？

编辑：堆栈跟踪显示该进程确实卡在 for 循环中（第 116 行）：

```
 java.lang.Thread.State: RUNNABLE
       at sun.nio.ch.FileDispatcher.pread0(Native Method)
       at sun.nio.ch.FileDispatcher.pread(FileDispatcher.java:49)
       at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:248)
       at sun.nio.ch.IOUtil.read(IOUtil.java:224)
       at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:663)
       at org.neo4j.kernel.impl.nioneo.store.PersistenceRow.readPosition(PersistenceRow.java:91)
       at org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool.acquire(PersistenceWindowPool.java:177)
       at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.acquireWindow(CommonAbstractStore.java:559)
       at org.neo4j.kernel.impl.nioneo.store.RelationshipStore.getChainRecord(RelationshipStore.java:349)
       at org.neo4j.kernel.impl.nioneo.xa.ReadTransaction.getMoreRelationships(ReadTransaction.java:121)
       at org.neo4j.kernel.impl.nioneo.xa.ReadTransaction.getMoreRelationships(ReadTransaction.java:104)
       at org.neo4j.kernel.impl.persistence.PersistenceManager.getMoreRelationships(PersistenceManager.java:108)
       at org.neo4j.kernel.impl.core.NodeManager.getMoreRelationships(NodeManager.java:666)
       at org.neo4j.kernel.impl.core.NodeImpl.getMoreRelationships(NodeImpl.java:427)
       - locked <0x77c9b4a0> (a org.neo4j.kernel.impl.core.NodeImpl)
       at org.neo4j.kernel.impl.core.IntArrayIterator.fetchNextOrNull(IntArrayIterator.java:91)
       at org.neo4j.kernel.impl.core.IntArrayIterator.fetchNextOrNull(IntArrayIterator.java:36)
       at org.neo4j.helpers.collection.PrefetchingIterator.hasNext(PrefetchingIterator.java:55)
       at org.neo4j.kernel.impl.traversal.TraversalBranchImpl.next(TraversalBranchImpl.java:128)
       at org.neo4j.kernel.PreorderBreadthFirstSelector.next(PreorderBreadthFirstSelector.java:48)
       at org.neo4j.kernel.impl.traversal.TraverserImpl$TraverserIterator.fetchNextOrNull(TraverserImpl.java:127)
       at org.neo4j.kernel.impl.traversal.TraverserImpl$TraverserIterator.fetchNextOrNull(TraverserImpl.java:94)
       at org.neo4j.helpers.collection.PrefetchingIterator.hasNext(PrefetchingIterator.java:55)
       at org.neo4j.helpers.collection.IteratorWrapper.hasNext(IteratorWrapper.java:42)
       at NodePlacement.LoadFromNode(NodePlacement.java:116) 
```

所以......看起来线程仍在运行并且没有被任何东西阻塞。然而它并没有脱离这部分代码。也许关于我的数据库设置的某些东西使它陷入了无限循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:18:01.657

我将四处走动，并建议问题出在循环之后的代码中。如所写，代码将为除`inUserBlacklist()`.. 的条目之外的所有条目打印“HA”。如果您的假设基于“HA”输出行的编程计数，那么您给出的计数表明代码完成了循环并继续其他你没有提供的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:52:52.653

好吧，我从来没有弄清楚到底发生了什么，但问题似乎发生在 Neo4J 数据库的磁盘访问中。我回头看看我创建它的方式，我意识到我在创建数据库的方式上犯了一个严重的错误。我重建了整个东西，我现在没有问题。谢谢你们每一个人的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:17:10.150

当它挂起时，您可以从命令行使用 Ctrl-Break 或在调试器下运行时暂停执行，或者使用 jps 和 jstack 工具获取应用程序的线程转储并查看正在执行的方法。

附带说明一下，所有 foreach 循环所做的都是`Iterator`从集合或数组中检索实例`Iterable`并使用 Iterator 的 hasNext() 和 next() 方法。所以，如果这些方法中的任何一个会挂起，你就会得到你现在看到的。

# c - 从补丁文件中去除 C 注释的方法

> ID：10555777
> 
> 赞同：0
> 
> 时间：2012-05-11T17:12:01.233
> 
> 标签：c, patch, strip, utilities

我正在考虑尝试从我们的补丁文件中删除 C 注释，并查看了许多正则表达式，但如果我们从补丁中删除行 - 它会破坏它们。

您将如何编写正则表达式或 sed 命令来搜索 diff 补丁文件中的注释并用空格替换注释行。

这适用于 sed 正则表达式适用于 C 文件，但对于补丁我需要一些不同的东西：

```
sed '/^\/\*/,/\*\//d' 
```

一个示例补丁摘录是：

```
@@ -382,7 +391,109 @@
        return len;
 }

+/**********************************************************************************
+ * Some patch
+ * Author: Mcdoomington
+ * Do somethimg
+ * 
+ * fix me
+ **********************************************************************************/ 
```

有人有想法吗？

编辑：

使用此过滤器：

```
sed -e 's,^+ \*.*,+ \/\/Comment removed,' mypatch.patch > output

+/**********************************************************************************
+ //Comment removed
+ //Comment removed
+ //Comment removed 
```

如何添加以 \ 结尾的 if 行以跳过它？

编辑：解决方案

虽然不是最干净的方式 - 我将 sed 与陪审团操纵的正则表达式一起使用。

```
sed -e '/[^\*\/]$/{N;s,^+ \* .*,+ \* Comment removed,;}' patch > output
sed -e '/[^\*\/]$/{N;s,^+\\\* .*,+ \/\* Comment removed,;}' patch > output 
```

请注意，第二个命令可能有点过于贪婪，但出于清理评论的目的 - 这行得通！

这个怎么运作：

1.）第一个命令要确定这是否是注释的结尾 /[^*/]$/ 确定它是否是*/ 然后 {N;s,^+\* 。*,+ /* 已删除评论，;}' 找到 +*（无论如何）并将其替换为 * 已删除评论。

2.) 第二个命令要确定这是否是注释的结尾 /[^*/]$/ 确定它是否是*/ 然后 {N;s,^+\* 。*,+ /* Comment removed,;}' 找到 + * (whatever) 并将其替换为 * Comment removed。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:04:52.460

我刚刚使用了一个快速而肮脏的hackjob，它使用

```
sed -e '/[^\*\/]$/{N;s,^+ \* .*,+ \* Comment removed,;}' patch > output
sed -e '/[^\*\/]$/{N;s,^+\\\* .*,+ \/\* Comment removed,;}' patch > output 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:18:24.587

正则表达式很美妙，但没那么美妙。

我会在创建补丁之前删除评论。

如果你不能这样做，我会应用补丁。从修补和未修补的文件中删除注释，然后重新创建修补程序。

因此，从 xh 开始，我们将其编辑为 x1.h 并创建一个补丁：

```
diff -u x.h x1.h > patch 
```

然后我们将补丁发布给拥有 xh 的人

```
cp x.h xnc.h
sed -e '/^\/\*/,/\*\//d' -i xnc.h
patch x.h patch
cp x.h xnc2.h
sed -e '/^\/\*/,/\*\//d' -i xnc2.h
diff -u xnc.h xnc2.h > patchnc 
```

应该创建无评论补丁。

但是如果我有修补和未修补的源代码树，那么

```
find unpatched -exec sed -e ':^/\*:,:\*/:d' -i "{}" \;
find patched -exec sed -e ':^/\*:,:\*/:d' -i "{}" \;
diff -urN unpatched patched > patch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:58:49.467

我不会使用正则表达式。一般来说，他们在一条线上工作。您的文件将包含跨越多行的注释。

我会用 C/C++ 或 Java 编写一个简单的解析器。

从状态 0 开始。

在状态 0 中，只需逐个字符读取（并输出），直到找到 /* 序列

然后切换到状态 1。

在状态 1 中，只需逐个字符读取（并且不要输出），直到找到 */ 序列

# java - 如何使用 Java/JDBC 将时间戳数组传递给 Postgres 函数？

> ID：10555782
> 
> 赞同：1
> 
> 时间：2012-05-11T17:12:35.353
> 
> 标签：java, postgresql, jdbc, postgresql-9.1

如何使用 Java 和 JDBC 将时间戳数组传递给 Postgres 函数？

这是函数的签名：

```
CREATE OR REPLACE FUNCTION getlistcount(_id integer, _subs text, _download_array timestamp without time zone[], _filter integer, _fault text) RETURNS refcursor AS... 
```

下面是创建数组的 Java 代码：

```
GregorianCalendar[] dataDownloads = 
        downloadTimes.toArray(new GregorianCalendar[downloadTimes.size()]);

Array sqlArray = conn.createArrayOf("timestamp", dataDownloads);
cstmt.setArray(4, sqlArray); 
```

downloadTimes 是传递给 Java 函数的列表。

一个提示：根据[Postgres 文档](http://www.postgresql.org/docs/8.0/static/datatype-datetime.html)，我们需要将时间与日期连接起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:43:54.993

我[在 StackOverflow 上找到了一个类似的答案](https://stackoverflow.com/questions/7915963/in-jdbc-when-calling-preparedstatement-setarray-how-do-i-specify-the-timezon)，但使用的是 PreparedStatement 而不是 JDBC 表示法。

```
//Get timezone from first entry, assuming all same timezone
if(!downloadTimes.isEmpty()) {
    cal.setTimeZone(downloadTimes.get(0).getTimeZone());
}

//Create an array of timestamps
java.sql.Timestamp [] array = new java.sql.Timestamp [downloadTimes.size()];

for(int i=0; i < array.length; i++) {
    array[i] = new java.sql.Timestamp(downloadTimes.get(i).getTimeInMillis());
} 

//pass the array to JDBC call
//conn is the connection, and cstmt is the CallableStatement
Array sqlArray = conn.createArrayOf("timestamp", array);
cstmt.setArray(4, sqlArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-28T11:04:41.743

该数组不必是旧的**java.sql.Timestamp**类，您可以改用 java.time 类。

像这样

```
LocalDateTime[] localTimes = new LocalDateTime[]{LocalDateTime.now()};
Array sqlArray = conn.createArrayOf("timestamp", localTimes);
cstmt.setArray(4, sqlArray); 
```

对于*带区域的时间戳，*请使用**java.time.OffsetDateTime**

# cakephp - cakephp beforsave - 密码返回随机值

> ID：10555784
> 
> 赞同：0
> 
> 时间：2012-05-11T17:12:38.937
> 
> 标签：cakephp, cakephp-2.0, encryption

我有`beforeSave(..)`用于加密一个字段的模型。它在我的带有 WAMP 服务器的 PC 上运行良好，但是当我将它上传到服务器时，Security::cipher(..) 方法似乎返回随机值。

```
public function beforeSave() 
{
        if(isset($this->data[$this->alias]['somefield']))
            {
                $key = Configure::read('Security.salt');
                $cipher = Security::cipher($this->data[$this->alias]['somefield'],$key);    
                echo $cipher.'</br>'.$this->data[$this->alias]['somefield'];
                die;            
                $this->data[$this->alias]['somefield'] = $cipher;
            }
            return true;
        } 
```

此代码在我的 PC 上返回相同的密码和值对，但在服务器上该值相同，但从该值生成的密码是随机的。我发现这篇文章[CakePHP Security::cipher() is not working specific on server](https://stackoverflow.com/questions/6087463/cakephp-securitycipher-is-not-working-specifically-on-server-solved) - 我不知道这是否是一个问题，但它说 cipher() 使用了可能被禁用的 srand - 我该如何解决这个问题 - 我不能更改 php 配置中的任何内容，我只有 ftp 访问服务器。

PC 上的 PHP：5.3.9 服务器上的 PHP：5.2.17

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:09:00.597

我发现了这个：[http](http://groups.google.com/group/cake-php/browse_thread/thread/7e6cda2e03a7c54?pli=1) ://groups.google.com/group/cake-php/browse_thread/thread/7e6cda2e03a7c54?pli=1它似乎是真正的错误，我刚刚使用了这个人发布的这个功能，它工作正常。

# url - 处理多个 url 的控制器 servlet 的推荐方法是什么？

> ID：10555787
> 
> 赞同：0
> 
> 时间：2012-05-11T17:12:46.397
> 
> 标签：url, jakarta-ee, servlets

我一直在关注 netbeans 电子商务教程，他们[介绍了一个 ControllerServlet](http://netbeans.org/kb/docs/javaee/ecommerce/page-views-controller.html)，他们设置它来处理多个 URL。

然而他们这样做的方式基本上是有一个大的`if then else if`声明：

```
 String userPath = request.getServletPath();

    // if category page is requested
    if (userPath.equals("/category")) {
        // TODO: Implement category request

    // if cart page is requested
    } else if (userPath.equals("/viewCart")) {
        // TODO: Implement cart page request

        userPath = "/cart";

    // if checkout page is requested
    } else if (userPath.equals("/checkout")) {
        // TODO: Implement checkout page request

    // if user switches language
    } else if (userPath.equals("/chooseLanguage")) {
        // TODO: Implement language request

    } 
```

这真的是在单个 servlet 中处理多个 URL 的推荐方法吗？这种方法看起来很可怕而且难以管理。

还是我错过了一些干净利落的处理方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:52:45.457

您应该使用像 Stripes 或 Spring MVC 这样的 MVC 框架，它会为您（以及更多）处理这个问题。在这些框架中，您配置单个 servlet 来拦截对给定 URL 模式（例如 *.action）的所有请求，并且该 servlet 基于注释和/或命名约定和/或配置分派给适当的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:05:58.173

您可以使用**ServletFilter**并以下列方式配置您的 web.xml，以将客户端请求重定向到适当的目标控制器。

这将使您在上面的代码片段中不断更改不同的用户路径。

使用这种方法，您可以根据您的要求将多个 url 发送到相同（或多个）过滤器。

```
<filter>
  <filter-name>My Filter</filter-name>
  <filter-class>com.project.my.MYclass</filter-class>
</filter>

<filter-mapping>
  <filter-name>My Filter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# android - 多个 httpPost 到一个遥远的宁静服务 (JSON)

> ID：10555789
> 
> 赞同：2
> 
> 时间：2012-05-11T17:12:56.770
> 
> 标签：android, json, rest, http-post, restful-architecture

我正在开发一个 Android 应用程序，我在手机的文本文件中本地保存了一些数据。

我想将这些数据保存在一个遥远的 mysql 数据库中。数据库所在的服务器包含一个运行 RESTFul Web 服务的 Java 服务器（GlassFish），REST 服务负责更新数据库。

由于我是所有这些领域的新手（如果它们是基本问题，请原谅我的问题），我认为本地保存的数据应该发送到服务器，因为 httpPost 请求。

我的文件（我的数据保存在哪里）包含几行，每一行对应于应该发送到服务器的 JSON 对象，因此该文件是文本文件，但写为 JSON 对象。

我的问题是：将数据发送到服务器的最佳方式是什么？我无论如何都要为包含的整个文件执行 HttpPost 命令？或者我应该打开文件并一行一行地读取它并每次创建一个 JSON 对象并通过新的 HttpPost 命令发送它？

感谢您的帮助并原谅我的问题，如果它是基本的或愚蠢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:38:50.480

如果您没有从更聪明/更有经验的人那里得到任何答案，我会阅读文件并发布每个 JSON 对象（我假设您的意思是在 URL /..../myObjects使用 myObject 的 JSON 表示。

# c# - 使用 SignalR 的简单注入器

> ID：10555791
> 
> 赞同：35
> 
> 时间：2012-05-11T17:12:58.760
> 
> 标签：c#, signalr, simple-injector

我认为使用 SignalR 使用我自己的 IoC 会非常简单，也许是这样；很可能我做错了什么。这是我到目前为止的代码：

```
private static void InitializeContainer(Container container)
{

   container.Register<IMongoHelper<UserDocument>, MongoHelper<UserDocument>>();
   // ... registrations like about and then:
   var resolver = new SimpleInjectorResolver(container);
   GlobalHost.DependencyResolver = resolver;
} 
```

然后是我的课：

```
public class SimpleInjectorResolver : DefaultDependencyResolver
{
    private Container _container;
    public SimpleInjectorResolver(Container container)
    {
        _container = container;
    }

    public override object GetService(Type serviceType)
    {
        return _container.GetInstance(serviceType) ?? base.GetService(serviceType);
    }

    public override IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.GetAllInstances(serviceType) ?? base.GetServices(serviceType);
    }
} 
```

最终发生的是我收到一个 IJavaScriptProxyGenerator 无法解决的错误，所以我想，我会添加注册：

```
container.Register<IJavaScriptProxyGenerator, DefaultJavaScriptProxyGenerator>(
    ConstructorSelector.MostParameters); 
```

但是还有很多其他人！我得到：

```
container.Register<IDependencyResolver, SimpleInjectorResolver>();
container.Register<IJavaScriptMinifier, NullJavaScriptMinifier>();
container.Register<IJavaScriptProxyGenerator, DefaultJavaScriptProxyGenerator>(
    ConstructorSelector.MostParameters);
container.Register<IHubManager, DefaultHubManager>();
container.Register<IHubActivator, DefaultHubActivator>();
container.Register<IParameterResolver, DefaultParameterResolver>();
container.Register<IMessageBus, InProcessMessageBus>(ConstructorSelector.MostParameters); 
```

这仍然给了我“找不到类型的注册`ITraceManager`”。...但是现在我想知道我是否完全正确地这样做了，因为我希望我不需要重新连接 SignalR 正在做的所有事情......对吗？希望？如果不是，我会继续跋涉，但我是 SignalR 和 Simple Injector 新手，所以我想先问一下。:)

附加：[https](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=88) ://cuttingedge.it/blogs/steven/pivot/entry.php?id= 88 因为 SignalR 有多个构造函数。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-02T21:46:30.000

嗯，我昨天试过了，我找到了解决办法。据我说，我想要在 SignalR 中进行依赖注入的唯一时刻是针对我的集线器：我不关心 SignalR 在内部是如何工作的！因此，我没有替换 DependencyResolver，而是创建了自己的 IHubActivator 实现：

```
public class SimpleInjectorHubActivator : IHubActivator
{
    private readonly Container _container;

    public SimpleInjectorHubActivator(Container container)
    {
        _container = container;
    }

    public IHub Create(HubDescriptor descriptor)
    {
        return (IHub)_container.GetInstance(descriptor.HubType);
    }
} 
```

我可以这样注册（在 Application_Start 中）：

```
var activator = new SimpleInjectorHubActivator(container);
GlobalHost.DependencyResolver.Register(typeof(IHubActivator), () => activator);
RouteTable.Routes.MapHubs(); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-08-28T12:23:05.237

想把我的 2 美分和其他答案一起扔在这里，这有助于在 SignalR 中找到自己的依赖注入方式，无论是使用 SimpleInjector 还是其他 IoC。

# 使用[@Steven 的回答](https://stackoverflow.com/a/10559162/304832)

如果您决定使用 Steven 的答案，请确保在编写根之前注册您的集线器路由。`SignalRRouteExtensions.MapHubs`扩展方法（aka `routes.MapHubs()`）将在映射中心路由时调用，`Register(Type, Func<object>)`因此`GlobalHost.DependencyResolver`如果您在映射路由之前将`DefaultDependencyResolver`与 Steven's交换`SimpleInjectorResolver`，您将遇到他的`NotSupportedException`.

# 使用[@Nathanael Marchand 的回答](https://stackoverflow.com/a/15775013/304832)

这是我最喜欢的。为什么？

1.  代码比`SimpleInjectorDependencyResolver`.
2.  无需替换`DefaultDependencyResolver`(aka `GlobalHost.DependencyResolver`)，这意味着更少的代码。
3.  您可以在映射集线器路由之前或之后组成根，因为您没有替换`DefaultDependencyResolver`，它将“正常工作”。

就像 Nathanael 说的那样，只有当你关心你的`Hub`类的依赖时，这可能是大多数人的情况。如果您想将其他依赖项注入到 SignalR 中，您可能想要使用 Steven 的答案。

# 中每个 Web 请求依赖项的问题`Hub`

SignalR 有一个有趣的事情......当客户端与集线器断开连接时（例如通过关闭他们的浏览器窗口），它将创建`Hub`该类的一个新实例以调用`OnDisconnected()`. 发生这种情况时，**`HttpContext.Current`为 null**。因此，如果这`Hub`有任何按网络请求注册的依赖项，*则可能会出错*。

## 在忍者

我在 nuget 上使用 Ninject 和[ninject signalr 依赖解析器](https://www.nuget.org/packages/Microsoft.AspNet.SignalR.Ninject/)尝试了 SignalR 依赖注入。使用此配置，绑定的依赖项将在断开连接事件期间`.InRequestScope()`注入到 a 时临时创建。`Hub`由于`HttpContext.Current`为空，我想 Ninject 只是决定忽略它并创建瞬态实例而不告诉你。也许有一个配置设置告诉 ninject 对此发出警告，但这不是默认设置。

## 在 SimpleInjector 中

另一方面，当 a`Hub`依赖于注册的实例时，SimpleInjector 将引发异常`WebRequestLifestlyle`：

> NameOfYourHub 类型的注册委托引发了异常。NameOfYourPerRequestDependency 类型的注册委托引发了异常。YourProject.Namespace.NameOfYourPerRequestDependency 注册为“PerWebRequest”，但在 HttpContext 的上下文之外请求实例（HttpContext.Current 为空）。确保在应用程序初始化阶段和在后台线程上运行时不会解析使用这种生活方式的实例。要解析后台线程上的实例，请尝试将此实例注册为“Per Lifetime Scope”：[https](https://simpleinjector.readthedocs.io/en/latest/lifetimes.html#scoped) ://simpleinjector.readthedocs.io/en/latest/lifetimes.html#scoped 。

...请注意，此异常只会在 时冒泡`HttpContext.Current == null`，据我所知，仅在 SignalR 请求`Hub`实例以调用时才会发生`OnDisconnected()`。

# 解决方案中每个 Web 请求的依赖关系`Hub`

请注意，这些都不是真正理想的，这完全取决于您的应用程序要求。

## 在忍者

如果您需要非瞬态依赖项，请不要`OnDisconnected()`使用类依赖项覆盖或执行任何自定义操作。如果这样做，图中的每个依赖项都将是一个单独的（瞬态）实例。

## 在 SimpleInjector 中

您需要一种介于、或之间的[混合生活方式](https://simpleinjector.readthedocs.io/en/latest/lifetimes.html#hybrid)。当不为 null 时，依赖项将仅与您通常期望的 Web 请求一样长。但是，当为 null 时，依赖项将被临时注入，作为单例，或在生命周期范围内。`WebRequestLifestlye``Lifestyle.Transient``Lifestyle.Singleton``LifetimeScopeLifestyle``HttpContext.Current``HttpContext.Current`

```
var lifestyle = Lifestyle.CreateHybrid(
    lifestyleSelector: () => HttpContext.Current != null,
    trueLifestyle: new WebRequestLifestyle(),
    falseLifestyle: Lifestyle.Transient // this is what ninject does
    //falseLifestyle: Lifestyle.Singleton
    //falseLifestyle: new LifetimeScopeLifestyle()
); 
```

### 更多关于`LifetimeScopeLifestyle`

就我而言，我有一个 EntityFramework`DbContext`依赖项。这些可能很棘手，因为它们可能会在临时注册或作为单例注册时暴露问题。临时注册时，您可能会在尝试使用附加到 2 个或更多`DbContext`实例的实体时遇到异常。当注册为单例时，您最终会遇到更一般的异常（永远不要将 a 注册`DbContext`为单例）。就我而言`DbContext`，我需要`LifetimeScopeLifestyle`.

现在，如果您将上面的混合代码与该行一起使用，当您的自定义方法执行`falseLifestyle: new LifetimeScopeLifestyle()`时，您将得到另一个异常：`IHubActivator.Create`

> NameOfYourHub 类型的注册委托引发了异常。NameOfYourLifetimeScopeDependency 注册为“LifetimeScope”，但在生命周期范围的上下文之外请求实例。确保首先调用 container.BeginLifetimeScope()。

您设置生命周期范围依赖项的方式如下：

```
using (simpleInjectorContainer.BeginLifetimeScope())
{
    // resolve solve dependencies here
} 
```

在生命周期范围内注册的任何依赖项都必须在此`using`块内解决。此外，如果这些依赖项中的任何一个实现`IDisposable`，它们将在块的末尾被处理掉`using`。不要试图做这样的事情：

```
public IHub Create(HubDescriptor descriptor)
{
    if (HttpContext.Current == null)
        _container.BeginLifetimeScope();
    return _container.GetInstance(descriptor.HubType) as IHub;
} 
```

我问过 Steven（如果你不知道的话，他也是 SimpleInjector 的作者），他说：

> 嗯.. 如果你不处理 LifetimeScope，你会遇到大麻烦，所以要确保它们被处理掉。如果您不处置范围，它们将在 ASP.NET 中永远存在。这是因为作用域可以嵌套并引用它们的父作用域。因此，线程保持最内部的范围（及其缓存）处于活动状态，并且该范围保持其父范围（及其缓存）处于活动状态，依此类推。ASP.NET 将线程池化，并且在从池中获取线程时不会重置所有值，因此这意味着所有范围都保持活动状态，并且下次从池中获取线程并开始新的生命周期范围时，您只需简单地创建一个新的嵌套范围，这将继续堆叠。迟早，您会收到 OutOfMemoryException。

您不能使用`IHubActivator`来确定依赖项的范围，因为它不会像`Hub`它创建的实例那样存在。因此，即使您将`BeginLifetimeScope()`方法包装在一个`using`块中，您的依赖项也会在`Hub`创建实例后立即释放。您在这里真正需要的是另一层间接。

非常感谢 Steven 的帮助，我最终得到了一个命令装饰器（和一个查询装饰器）。A`Hub`不能依赖于 per-web-request 实例本身，而是必须依赖于另一个接口，其实现取决于 per-request 实例。注入`Hub`构造函数的实现用一个包装器装饰（通过simpleinjector），该包装器开始并处理生命周期范围。

```
public class CommandLifetimeScopeDecorator<TCommand> : ICommandHandler<TCommand>
{
    private readonly Func<ICommandHandler<TCommand>> _handlerFactory;
    private readonly Container _container;

    public CommandLifetimeScopeDecorator(
        Func<ICommandHandler<TCommand>> handlerFactory, Container container)
    {
        _handlerFactory = handlerFactory;
        _container = container;
    }

    [DebuggerStepThrough]
    public void Handle(TCommand command)
    {
        using (_container.BeginLifetimeScope())
        {
            var handler = _handlerFactory(); // resolve scoped dependencies
            handler.Handle(command);
        }
    }
} 
```

...它是`ICommandHandler<T>`依赖于每个网络请求实例的装饰实例。有关所用模式的更多信息，请阅读[this](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[this](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。

### 示例注册

```
container.RegisterManyForOpenGeneric(typeof(ICommandHandler<>), assemblies);

container.RegisterSingleDecorator(
    typeof(ICommandHandler<>),
    typeof(CommandLifetimeScopeDecorator<>)
); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-11T21:56:18.320

***更新****此答案已针对 SignalR 1.0 版进行了更新*

`IDependencyResolver`这是为 Simple Injector构建 SignalR的方法：

```
public sealed class SimpleInjectorResolver 
    : Microsoft.AspNet.SignalR.IDependencyResolver
{
    private Container container;
    private IServiceProvider provider;
    private DefaultDependencyResolver defaultResolver;

    public SimpleInjectorResolver(Container container)
    {
        this.container = container;
        this.provider = container;
        this.defaultResolver = new DefaultDependencyResolver();
    }

    [DebuggerStepThrough]
    public object GetService(Type serviceType)
    {
        // Force the creation of hub implementation to go
        // through Simple Injector without failing silently.
        if (!serviceType.IsAbstract && typeof(IHub).IsAssignableFrom(serviceType))
        {
            return this.container.GetInstance(serviceType);
        }

        return this.provider.GetService(serviceType) ?? 
            this.defaultResolver.GetService(serviceType);
    }

    [DebuggerStepThrough]
    public IEnumerable<object> GetServices(Type serviceType)
    {
        return this.container.GetAllInstances(serviceType);
    }

    public void Register(Type serviceType, IEnumerable<Func<object>> activators)
    {
        throw new NotSupportedException();
    }

    public void Register(Type serviceType, Func<object> activator)
    {
        throw new NotSupportedException();
    }

    public void Dispose()
    {
        this.defaultResolver.Dispose();
    }
} 
```

不幸的是，它的设计存在问题`DefaultDependencyResolver`。这就是为什么上面的实现不继承它，而是包装它。我在 SignalR 网站上创建了一个关于此的问题。你可以在[这里](https://github.com/SignalR/SignalR/issues/400)阅读。虽然设计师同意我的观点，但不幸的是，这个问题在 1.0 版本中并没有得到解决。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-30T15:58:53.703

从 SignalR 2.0（和 beta 版本）开始，有一种设置依赖解析器的新方法。SignalR 移至 OWIN 启动以进行配置。使用 Simple Injector，您可以这样做：

```
public class Startup
{
    public void Configuration(IAppBuilder app)
    {
        var config = new HubConfiguration()
        {
            Resolver = new SignalRSimpleInjectorDependencyResolver(Container)
        };
        app.MapSignalR(config);
    }
}

public class SignalRSimpleInjectorDependencyResolver : DefaultDependencyResolver
{
    private readonly Container _container;
    public SignalRSimpleInjectorDependencyResolver(Container container)
    {
        _container = container;
    }
    public override object GetService(Type serviceType)
    {
        return ((IServiceProvider)_container).GetService(serviceType)
               ?? base.GetService(serviceType);
    }

    public override IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.GetAllInstances(serviceType)
            .Concat(base.GetServices(serviceType));
    }
} 
```

您必须像这样显式注入集线器：

```
container.Register<MessageHub>(() => new MessageHub(new EFUnitOfWork())); 
```

此配置在高流量网站上实时运行，没有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T17:32:33.647

以下对我有用。此外，在实例化依赖解析器之前，您将需要在您的集线器类的容器中注册一个委托。

```
ex: container.Register<MyHub>(() =>
        {
            IMyInterface dependency = container.GetInstance<IMyInterface>();

            return new MyHub(dependency);
        });

public class SignalRDependencyResolver : DefaultDependencyResolver
{
    private Container _container;
    private HashSet<Type> _types = new HashSet<Type>();

    public SignalRDependencyResolver(Container container)
    {
        _container = container;

        RegisterContainerTypes(_container);
    }

    private void RegisterContainerTypes(Container container)
    {
        InstanceProducer[] producers = container.GetCurrentRegistrations();

        foreach (InstanceProducer producer in producers)
        {
            if (producer.ServiceType.IsAbstract || producer.ServiceType.IsInterface)
                continue;

            if (!_types.Contains(producer.ServiceType))
            {
                _types.Add(producer.ServiceType);
            }
        }
    }

    public override object GetService(Type serviceType)
    {
        return _types.Contains(serviceType) ? _container.GetInstance(serviceType) : base.GetService(serviceType);
    }

    public override IEnumerable<object> GetServices(Type serviceType)
    {
        return _types.Contains(serviceType) ? _container.GetAllInstances(serviceType) : base.GetServices(serviceType);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-17T11:46:28.533

在`.NET Core 3.x`signalR 现在是一个瞬态。您可以使用 DI 注入集线器。所以你开始映射集线器，实现接口和集线器，并通过 DI 访问它的上下文。

启动：

```
app.UseSignalR(routes =>
{
    routes.MapHub<YourHub>(NotificationsRoute); // defined as string
}); 
```

```
services.AddSignalR(hubOptions =>
{
    // your options
}) 
```

然后你实现一个接口，如：

```
public interface IYourHub
{
    // Your interface implementation
} 
```

和你的集线器：

```
public class YourHub : Hub<IYourHub>
{
    // your hub implementation
} 
```

最后你像这样注入集线器：

```
private IHubContext<YourHub, IYourHub> YourHub
{
    get
    {
        return this.serviceProvider.GetRequiredService<IHubContext<YourHub, IYourHub>>();
    }
} 
```

您还可以为您的集线器（中间件）定义一个服务，并且不要将上下文直接注入您的类。

想象一下，您在接口中定义了方法`Message`，因此在您的类中您可以像这样发送消息：

```
await this.YourHub.Clients.Group("someGroup").Message("Some Message").ConfigureAwait(false); 
```

如果未在接口中实现，则只需使用：

```
await this.YourHub.Clients.Group("someGroup").SendAsync("Method Name", "Some Message").ConfigureAwait(false); 
```

# css - 1px不等于1px？

> ID：10555792
> 
> 赞同：0
> 
> 时间：2012-05-11T17:13:11.077
> 
> 标签：css, internet-explorer, html

我正在尝试解决 IE 8 及更低版本的一个非常恼人的问题。

似乎 IE 对像素的解释与 FF 和 Chrome 的不同。

我把网站放在这里：[www.therapyoracle.co.uk/new](http://www.therapyoracle.co.uk/new)

如果你向右滚动，你会看到 div 比它应该的大。

`#page`容器的宽度是`1008px`，banner div 是`1008px`，这个banner div里面有两个div，分别是600和408像素。现在我的数学只有C，但是600+408=1008不是吗？它在 FF 和 Chrome 中看起来不错。

我讨厌 IE。

'#page' 虽然没有任何边框。这是我的CSS：

```
#page {
    margin:0 auto;
    width:1008px;
    background:white;
    padding:0px;
    min-height:100%;
    position:relative;
    margin-bottom:-22px;
    box-sizing:content-box;
}

#header {
    width:100%;
    text-align:center;
    background:#000000;
}
    #hCont {
        margin:0 auto;
        width:1000px;
        height:100px;
    }
    #hLogo {
        float:left;
    }
    #hContact p:first-child {
        font-weight:bold;
        font-size:16px;
        margin-bottom:8px;
    }

#navCont {
    width:100%;
    background:#6a8a3f;
    border-bottom:3px solid #1d2b00;
}

#nav {
    margin:0 auto;
    width:1000px;
    height:35px;
    font-size:17px;
    color:#382D07;
}
    #nav ul {
        padding:0;
        margin:0;
        list-style:none;
    }
    #nav li {
        float:left ;
        padding:6px;
        padding-right:25px;
    }

#banner {
    height:201px;
    width:1008px;

}
    #img {
        float:left;
        width:600px;
        height:201px;
    }
    .txt {
        float:left;
        width:408px;
        height:67px;
        padding:0;
    }
#opt1, #opt2 {
    width:407px;
    border-right:1px solid #1d2b00;
}
#right {
    float:right;
    width:250px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:19:40.753

您的问题是由使用的拳击模型（[MDN 链接](https://developer.mozilla.org/En/CSS/Box-sizing)）的差异引起的。IE 通常使用边框模型，而其他的则使用内容框模型。

所以在 IE 中内容的大小`#page`实际上是 1008px 减去边框。作为一种解决方案，您可以`box-sizing`在 IE8+ 中设置 css 属性或将边框设置为零。

有关更多信息，请查看上面的 MDN 链接。

# c# - MVP 三元组之间的通信

> ID：10555794
> 
> 赞同：6
> 
> 时间：2012-05-11T17:13:21.313
> 
> 标签：c#, .net, winforms, design-patterns, mvp

好的，伙计们，例如，我有这个表格，我之前告诉过你[，DockPanel 中只有一个 DockContent](https://stackoverflow.com/questions/10107461/only-one-dockcontent-in-dockpanel)

从那时起，我所做的一个编辑是当用户单击左窗格中的某个项目时，每个项目中出现的单词。我轻松地为左窗格创建了一个三元组。

它具有项目演示者、项目视图、项目模型。这是每个东西的接口：

```
interface IProjectsModel
{
    void AttachPresenter(IProjectsModelObserver observer);
    System.Collections.Generic.List<Project> projects { get; }
    Project selectedProject { get; set; }
}

public interface IProjectsViewObserver
{
    void UserChangedSelectedProject(Project project);
}
public interface IProjectsModelObserver
{
    void SelectedProjectChanged(Project project);
}

public interface IProjectsView : IView
{
    List<Project> projects { set; }
    Project project { set; }

    void AttachPresenter(IProjectsViewObserver presenter);
} 
```

所以目前我正在考虑为右窗格制作一个全新的另一个 MVP 三元组。但这不是主要问题。我运行的主要问题是如何在我上面告诉你的 MVP 三元组之间建立通信过程？

我在网上读过一些文章，告诉我在这种情况下，有必要在项目中引入一些模型协调器吗？

所以伙计们，我的问题是：

1.  我做两个黑社会而不是一个是对的吗？
2.  如何协调两个三合会？
3.  任何建议/建议/提议/建议/提示任何许多其他您认为对我有用的东西都将不胜感激！

提前非常感谢，伙计们！感谢您的关注和时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:17:07.727

为了在演示者之间进行协调，当用户选择不同的项目时，您可以让您的`MainForm`班级实施`IProjectsViewObserver`并在右侧停靠窗格上设置文本。例如：

```
class MainForm : IProjectsViewObserver
{
    void UserChangedSelectedProject(Project project)
    {
          rightDockPane.setText(project.getText());
    }
} 
```

如果你想测试这种行为，你可以创建一个单独的类：

```
class DockPaneProjectUpdater : IProjectsViewObserver 
```

尽管在这种情况下这是不必要的，因为代码非常简单。

[您可以使用匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.80%29.aspx)调查更简单的方法来执行此操作，但我不知道足够的 C# 来帮助您。

> 我做两个三合会而不是一个对吗？

是的，因为停靠栏和窗格是独立的组件，它们可能需要单独的 MVP 三元组。您可以通过尝试使代码可重用和可测试来决定 MVP 三元组的粒度（小）。

> 如何协调两个三合会？

创建一个窗口级演示器，它连接子演示器并可以协调三元组之间的行为。您可以让 window-presenter 成为 a`IProjectsViewObserver`并根据`DockContent`. 或者，如果您真的想对行为进行模块化/单元测试，您可以创建一个单独的演示者类（通常是匿名类）用于三合会之间的通信。

> 任何建议/建议/提议/建议/提示任何许多其他您认为对我有用的东西都将不胜感激！

阅读有关 MVP 和[演示者优先的](http://en.wikipedia.org/wiki/Presenter_First)Wikipedia 和在线文章。MVP 的最大好处是可测试性和行为（演示者）模块化，因此请确保您通过[单元测试](https://sqa.stackexchange.com/questions/1035/unit-testing-the-presenter-in-an-mvp-context-using-mock-objects)（通常使用模拟/DI 框架）利用它们，并在可以重用代码时将行为重构为 MVP 三元组。

弄清楚如何有效地应用 MVP 模式需要一些时间，所以请耐心等待！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:51:43.010

如果你想在你的三元组之间实现完全精简和抽象的交互方式，你可以使用[Mediator 模式](http://www.dofactory.com/Patterns/PatternMediator.aspx)。创建“消息”类/结构，一个演示者将订阅它，另一个将发送它。

这种方法与订阅事件非常相似，但提供了更多的抽象，因为双方的演示者甚至都不知道他们的消息的接收者是否存在。由于您在一个进程的上下文中工作，因此您可以在消息中传递您想要的任何内容，甚至是回调委托。可以在[MVVM Light 框架](http://mvvmlight.codeplex.com)中找到中介模式实现的一个很好的例子。在那里它被称为[Messenger](http://mvvmlight.codeplex.com/SourceControl/changeset/view/a9071d84ec65#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Messaging/Messenger.cs)。看看[测试](http://mvvmlight.codeplex.com/SourceControl/changeset/view/a9071d84ec65#GalaSoft.MvvmLight/GalaSoft.MvvmLight.Test%20%28NET35%29/Messaging/MessengerBroadcastToAllTest.cs)。

就个人而言，当需要在没有共同父级或创建者的对话窗口之间发送信息时，我使用了调解器。在那种情况下，它有助于简化事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T17:49:10.717

听从加勒特的建议。由相互了解并可以采取相应行动的主演示者创建子演示者。最简单的方法是在两个窗格的子演示者中创建一个属性。

你来自 Java 世界吗？:) C# 有自己的观察者模式实现：[事件](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)。请看一下，这样您就不再需要额外的类似 java 的接口了。

**更新**：当我开始写作时，我改变了主意。在我看来，演示者之间最好的交流方式是使用共享模型。

```
class SelectedProjectChangedEventArgs : EventArgs
{
    public Project SelectedProject {get;set;}
}

class Project
{

}

interface IReadOnlyModel
{
    Project SelectedProject {get;} 
    event EventHandler<SelectedProjectChangedEventArgs> SelectedProjectChanged;
}

interface IWritableModel
{
    Project SelectedProject {get;set;} 
    IList<Project> Projects {get;}
}

class Model : IReadOnlyModel, IWritableModel
{
    public Project SelectedProject {get;set;} 
    public event EventHandler<SelectedProjectChangedEventArgs> SelectedProjectChanged;
    public IList<Project> Projects {get;set;}
}

class ProjectsListPresenter
{
    readonly IWritableModel _model;

    public ProjectsListPresenter(IWritableModel model)
    {
        _model = model;
    }

    public void ChangeSelectedProject(Project project)
    {
        _model.SelectedProject = project;
    }
}

class ProjectDetailsPresenter
{
    readonly IReadOnlyModel _model;

    public ProjectDetailsPresenter(IReadOnlyModel model)
    {
        _model = model;
        _model.SelectedProjectChanged += ModelSelectedProjectChanged;
    }

    void ModelSelectedProjectChanged(object sender, SelectedProjectChangedEventArgs e)
    {
        //update right pane
    }
}

class WholeFormPresenter
{
    public ProjectDetailsPresenter DetailsPresenter {get;private set;}
    public ProjectsListPresenter ListPresenter {get;private set;}

    public WholeFormPresenter(Model model)
    {
        DetailsPresenter = new ProjectDetailsPresenter(model);
        ListPresenter = new ProjectsListPresenter(model);
    }
}

class WholeForm
{
    ListBox _projectsListControl;
    Panel _detailsPanel;
    public WholeForm()
    {
        var presenter = new WholeFormPresenter(new Model());
        _projectsListControl.Presenter = presenter.ListPresenter;
        _detailsPanel.Presenter = presenter.DetailsPresenter;
    }
} 
```

我知道类/接口名称并不完美，但我希望这个想法很清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T08:00:47.910

我创建了一个名为 EventHub 的静态类，它可以注册“监听器”并发布新事件。我自己是 C# 的新手，所以我确信有办法让这个类变得更好：

```
public enum EventType
{
    // Your event types
}

public static class EventHub
{
    static Dictionary<EventType, List<Delegate>> _eventHandlers;

    // Use this to fire events with input
    public static void Publish( EventType eventType, object data )
    {
        // Fire event handler if found
        if( _eventHandlers.ContainsKey( eventType ) )
        {
            _invokeHandlers( _eventHandlers[ eventType ], data );
        }
    }

    static void _invokeHandlers(List<Delegate> list, object data)
    {
        if( !(list != null && list.Count > 0) )
            return;

        foreach( var handler in list )
            handler.DynamicInvoke( data );
    }

    // Use this to register new "listeners"
    public static void Register( EventType eventType, Delegate handler )
    {
        // Init dictionary
        if( _eventHandlers == null )
            _eventHandlers = new Dictionary<EventType, List<Delegate>>();

        // Add handler
        if( _eventHandlers.ContainsKey( eventType ) )
            _eventHandlers[ eventType ].Add( handler );
        else
            _eventHandlers.Add( eventType, new List<Delegate> { handler });
    }

    // Use this to remove "listeners"
    public static void Dismiss( EventType eventType, Delegate handler )
    {
        // Nothing to remove
        if( _eventHandlers == null || _eventHandlers.Count == 0 )
            return;

        // Remove handler
        if( _eventHandlers.ContainsKey( eventType ) && _eventHandlers[ eventType ].Count > 0 )
            _eventHandlers[ eventType ].Remove( handler );

        // Remove Key if no handlers left
        if( _eventHandlers[ eventType ].Count == 0 )
            _eventHandlers.Remove( eventType );
    }
} 
```

用法：

```
void MyHandler(object data) { /*...*/ }
EventHub.Register( EventType.MyType, MyHandler );
//...
EventHub.Publish( EventType.MyType, "I am data, I can be anything" ); 
```

# apache - 添加斜杠后如何重写 URL (.htaccess / mod_rewrite)？

> ID：10555798
> 
> 赞同：1
> 
> 时间：2012-05-11T17:13:45.927
> 
> 标签：apache, .htaccess, mod-rewrite

我不太习惯使用 htaccess 文件，所以我在这个文件上挣扎了一段时间：

我想知道如何将 URL (example.com/foo/bar) 重写为 (example.com/index.php?q=/foo/bar) 在向初始添加斜杠（301 重定向）之后网址：

我知道如何单独添加斜杠：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://exemple.com/$1/ [L,R=301] 
```

以及如何重写 index.php ：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L] 
```

但我就是想不通如何同时做这两个...

任何帮助都非常受欢迎！

皮埃尔·弗赖斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T22:34:21.720

在你的 .htaccess 中试试这个（我尽可能地测试了它）：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [L]

RewriteCond %{REQUEST_URI} [^/]$
RewriteRule ^(.*)$ $1/ [L,R=301]

RewriteRule ^(.*)$ index.php?q=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:04:20.403

您在这里有一个接受的答案，但我仍然喜欢回答这个问题，因为实际答案比通过多个（和慢速）重定向运行它**更简单**，就像在另一个答案中一样。

将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php?q=%{REQUEST_URI} [L] 
```

# r - 如何在 R 中按趋势而不是按距离进行聚类？

> ID：10555800
> 
> 赞同：6
> 
> 时间：2012-05-11T17:13:56.520
> 
> 标签：r, cluster-analysis

clara() 函数中的 k-medoids 使用距离来形成集群，所以我得到了这个模式：

```
a <- matrix(c(0,1,3,2,0,.32,1,.5,0,.35,1.2,.4,.5,.3,.2,.1,.5,.2,0,-.1), byrow=T, nrow=5)
cl <- clara(a,2)
matplot(t(a),type="b", pch=20, col=cl$clustering) 
```

![通过 clara() 进行聚类](../Images/881ec22b5d8cdd9c76a2948da28f1c8f.png)

但我想找到一种聚类方法，根据其趋势为每条线分配一个聚类，因此第 1、2 和 3 行属于一个聚类，第 4 和 5 行属于另一个聚类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T17:25:56.793

这个问题可能更适合 stats.stackexchange.com，但无论如何这里有一个解决方案。

您的问题实际上是“我如何选择正确的距离度量？”。您需要一个衡量趋势相似性的距离，而不是这些向量之间的欧几里得距离。

这是一个选项：

```
a1 <- t(apply(a,1,scale))
a2 <- t(apply(a1,1,diff))

cl <- clara(a2,2)
matplot(t(a),type="b", pch=20, col=cl$clustering) 
```

![在此处输入图像描述](../Images/ffb519da03de96388b7dd9fb1429aacf.png)

我没有定义新的距离度量，而是通过转换数据完成了基本相同的事情。首先缩放每一行，以便我们可以比较相对趋势，而不会因规模差异而让我们失望。接下来，我们只是将数据转换为差异。

警告：这**不一定**适用于所有“趋势”数据。特别是，观察连续的差异只能捕捉到“趋势”的一个单一的、有限的方面。您可能需要考虑更复杂的指标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T18:37:50.383

做更多的**预处理**。对于任何数据挖掘，预处理是 90% 的工作量。

例如，如果您想按趋势进行聚类，那么您可能应该将聚类应用于趋势，而不是原始值。例如，将每条曲线标准化为均值 0 和标准差 1。然后计算一个值与下一个值的差异，然后将聚类应用于此预处理数据！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-04T07:54:45.167

您可以使用`k means`聚类算法，但在去那里之前，我建议您创建一个`N* N`矩阵，其中每个元素代表一个趋势与另一个趋势的相关分数。

然后使用任何**聚类算法**（如 kmeans/层次聚类）来聚类相似的趋势。

## 代码

```
a <- matrix(c(0,1,3,2,0,.32,1,.5,0,.35,1.2,.4,.5,.3,.2,.1,.5,.2,0,-.1),byrow=T, nrow=5)

library(TSclust)

library(reshape2)

Tech1 <- diss(a,"COR")       # Correlation
Tech2 <- diss(a,"EUC")       # Euclidean Distance
Tech3 <- diss(a, "DTW")      # Dynamic Time Wrapping

clust1 <- kmeans(Tech1, 3)
clust1 <- kmeans(Tech2, 3)
clust1 <- kmeans(Tech3, 3)

clust1$cluster
>> 1 2 3 4 5 
>> 1 2 2 3 3 

clust2$cluster
>> 1 2 3 4 5 
>> 1 2 2 3 3

clust3$cluster
>> 1 2 3 4 5 
>> 3 2 2 1 1 
```

# algorithm - 如何找到图的非完美二分匹配？

> ID：10555801
> 
> 赞同：3
> 
> 时间：2012-05-11T17:14:12.177
> 
> 标签：algorithm, data-structures, graph, bipartite

也就是说，我怎样才能找到一些顶点可能不连接到任何其他顶点的图的二分匹配？

编辑：还有一个条件，假设边缘也被加权，我想要一个匹配，使得总边缘权重最小化（或最大化）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:18:00.983

使用[Hopcroft-Karp 算法](http://en.wikipedia.org/wiki/Hopcroft%E2%80%93Karp_algorithm)，它完全符合您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T16:29:38.783

首先，我将假设您的权重是非负的。

在您编辑的版本中，您正在谈论[分配问题](http://en.wikipedia.org/wiki/Assignment_problem)：*n 个*代理每个都被分配一个要执行的唯一操作，其中每个代理对每个操作都有一个任意的非负成本。虽然这个描述是为了完美的二分匹配，但您可以执行一些技巧。为了平衡两侧，您可以将权重为 0 的顶点添加到另一侧的所有内容，也就是说，与不采取任何行动/未采取行动相关的成本为 0。缺失的链接可以通过超过所有真实成本总和的成本来建模，因此只有在问题无法解决时才会选择它们。对于您的编辑版本，我会使用[匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm). 最后，这个问题也被称为“最大加权二部匹配”，算法的另一个参考可以[在二部图中最大匹配](http://en.wikipedia.org/wiki/Bipartite_matching#Maximum_bipartite_matchings)下的第二段中找到。

编辑：如果你想最大化成本而不是最小化它，你必须改变你的成本。只需找到最大成本并从最大值中减去每个成本。然后，如果您缺少链接，您将不想使用任何成本为 0 的链接。

# c# - 您可以在 c# 中将 findcontrol 与 Ajax Accordion 一起使用吗？

> ID：10555804
> 
> 赞同：1
> 
> 时间：2012-05-11T17:14:25.960
> 
> 标签：c#, ajaxcontroltoolkit

这伴随着我问的另一个问题，我的母版页上有一个下拉列表，在更改时会导致回发，并且在该索引更改方法中，我试图找到我的 ajax 手风琴来查看它的选定索引

```
protected void ddlSelectedCustomer_SelectedIndexChanged(object sender, EventArgs e)
{
    CustomerSelected();

    Response.AppendHeader("Refresh", "0;URL=storefront.aspx");

    ViewState["SelectedAccordionIndex"] = (AjaxControlToolkit.Accordion)FindControl("MyAccordion").SelectedIndex;
} 
```

我得到的错误

你调用的对象是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:56:20.727

问题是 FindControl 返回一个对象。将其投射到手风琴上，然后重试：`ViewState["SelectedAccordionIndex"] = ((Accordion)FindControl("MyAccordion")).SelectedIndex;`

如果这不是为什么您可能需要更深入地钻探，例如`((Accordion)this.FindControl(<the id of your content placeholder your accordion is in>).FindControl("MyAccordion")).SelectedIndex;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:20:21.983

您应该能够像使用任何其他 ASP 控件一样使用它。如上所述，它作为对象返回，因此您必须将其转换为您正在使用的任何控件，无论是下拉列表、列表框，还是在本例中为 ajax 手风琴

# sql-server-2008 - 更新 SSIS OLEDB 目标中的行

> ID：10555805
> 
> 赞同：31
> 
> 时间：2012-05-11T17:14:30.423
> 
> 标签：sql-server-2008, ssis

我有一个数据流过程，其中有一个 OLEDB 源和一个 OLEDB 目标，如下所示：

![数据流任务](../Images/771298a62fe378230d69c66bdc712cf9.png)

Source 合并来自两个临时表的数据并返回一个结果集（例如，50K 行）。这 50K 行也存在于目标表中，但都是旧数据。

```
SELECT * FROM staging1
UNION
SELECT * FROM staging2 
```

通常，在 OLEDB 目标中，我们将返回的数据集从源表插入到目标表，但在我的情况下，我必须用这些新的 50K 行更新旧的 50K 行。

一种批量更新。

谁能让我知道我该怎么做？我感谢您的帮助。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-11T19:33:20.190

您不能在 SSIS 中使用 OOB 组件在数据流任务中进行批量更新。

一般模式是识别您的插入、更新和删除，并将更新和删除推送到临时表，在数据流任务之后，在执行 SQL 任务中使用基于集合的更新或删除。查看 Andy Leonard 的[集成服务阶梯系列](https://www.sqlservercentral.com/steps/adding-rows-in-incremental-loads-level-3-of-the-stairway-to-integration-services)。将文章向下滚动 3/4 至“基于集合的更新”以查看模式。

舞台数据

![http://www.sqlservercentral.com/Images/11369.png](../Images/c5c58caa761938488b41d31419e44a31.png)

基于集的更新

![在此处输入图像描述](../Images/180d983aba9a58585ae9e36797410505.png)

使用这样的模式，您将获得更好的性能，而不是使用`OLE DB Command`转换来处理微不足道的数据。

如果您喜欢第三方工具，我相信 CozyRoc 和我都知道 PragmaticWorks 有一个合并目标组件。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-11T17:19:16.077

使用 Lookupstage 决定是插入还是更新。检查此链接以获取更多信息 - [http://beingoyen.blogspot.com/2010/03/ssis-how-to-update-instead-of-insert.html](http://beingoyen.blogspot.com/2010/03/ssis-how-to-update-instead-of-insert.html)

更新步骤：

1.  拖动 OLEDB 命令 [而不是 OLEDB 目的地]
2.  转到属性窗口
3.  在自定义属性下选择 SQLCOMMAND 并插入更新命令 ex：

    更新表 1 SET col1 = ?, col2 = ? 哪里 id = ？

4.  按照更新命令中从源到输出的确切顺序映射列

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T20:48:19.960

好吧，找到了解决我的问题的方法；在 SSIS 中使用 SQL 查询和 SQL 任务更新所有行，如下所示。如果他们将来面临同样的挑战，可以帮助他人。

```
update Original 
set Original.Vaal= t.vaal 
from Original join (select * from staging1  union   select * from staging2) t 
on Original.id=t.id 
```

# java - 包私有方法覆盖时发生 AbstractMethodError

> ID：10555806
> 
> 赞同：8
> 
> 时间：2012-05-11T17:14:35.470
> 
> 标签：java, scala, runtime-error, overriding

我注意到执行以下代码时发生了 AbstractMethodError 。

```
package javapkg;

public abstract class JavaClass{
  abstract String foo(int b);

  public String bar(int b){
    return foo(b);
  }
} 
```

```
package scalapkg

import javapkg._

class ScalaClass extends JavaClass{
  def foo(a:Int) = a.toString
}

object Main extends App{
  println(new ScalaClass().bar(10))
} 
```

```
[error] (run-main) java.lang.AbstractMethodError: javapkg.JavaClass.foo(I)Ljava/lang/String;
java.lang.AbstractMethodError: javapkg.JavaClass.foo(I)Ljava/lang/String;
at javapkg.JavaClass.bar(JavaClass.java:7)
at scalapkg.Main$delayedInit$body.apply(ScalaClass.scala:10)
at scala.Function0$class.apply$mcV$sp(Function0.scala:34)
at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)
at scala.App$$anonfun$main$1.apply(App.scala:60)
at scala.App$$anonfun$main$1.apply(App.scala:60)
at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
at scala.collection.immutable.List.foreach(List.scala:76)
at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:30)
at scala.App$class.main(App.scala:60)
at scalapkg.Main$.main(ScalaClass.scala:9)
at scalapkg.Main.main(ScalaClass.scala)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
java.lang.RuntimeException: Nonzero exit code: 1
at scala.sys.package$.error(package.scala:27) 
```

这是错误还是规范？

PS Scala 版本 2.9.2 、 2.10.0-M3 和 2.10.0-SNAPSHOT (2.10.0-20120507-163905-843ac9520c) 发生同样的错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T18:19:59.457

这有点复杂。这是一个错误——Scala 编译器应该发出一个错误——但它有点微妙。

问题是，由于您没有`public`使用抽象方法，因此它的可见性是包私有的。如果你用 Java 写这个：

```
package javapkgimpl;

public class JavaClassImpl extends javapkg.JavaClass {
  String foo(int b) { return (new java.lang.Integer(b)).toString(); }
  public static void main(String[] args) {
    System.out.println(new JavaClassImpl().bar(10));
  }
} 
```

那么Java编译器会抱怨：

```
JavaClassImpl.java:3: javapkgimpl.JavaClassImpl is not abstract and does not
  override abstract method foo(int) in javapkg.JavaClass
public class JavaClassImpl extends javapkg.JavaClass {
       ^
1 error 
```

它显然是*在尝试*覆盖，但实际上并没有工作，因为它不在正确的包中，因此实际上无法访问（或覆盖）原始`foo`. 如果我们将包更改为`javapkg`，那么一切正常。如果我们改用这个 Scala：

```
package javapkg

class ScalaClass extends JavaClass{
  def foo(a:Int) = a.toString
}

object ScalaClass extends App{
  println(new ScalaClass().bar(10))
} 
```

然后 Scala 也可以正常工作。

Scala 编译器的错误在于它没有注意到这个错误——它应该发出与 Java 编译器相同的错误（或者更有用的错误，它实际上告诉您访问很麻烦！），而不是发出无法发出的字节码工作。

但它很容易修复：只需更改 Scala 代码中的包（或 Java 代码中的访问修饰符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T09:45:42.283

我发现了同样的问题。当我明确设置 Scala 代码返回类型时，它起作用了。就像：

```
class ScalaClass extends JavaClass{
  def foo(a:Int):String = a.toString
} 
```

# mysql - MySQL：如何连接四个表（Active Record 语法）

> ID：10555812
> 
> 赞同：1
> 
> 时间：2012-05-11T17:14:52.497
> 
> 标签：mysql, codeigniter, join, normalization

对于我的材料表中 ID 为 20 的特定材料，我有两个表：

```
chemical_name_id | chemical_name  (table name: ml_chemical_names)
================================
1                | Polysomething

common_name_id | common_name (table name: ml_common_names)
=============================
1              | PMMA
2              | Lucite
3              | Perspex
4              | Plexiglas

material_id | material  (table name: ml_materials)
======================
20          | Acrylic 
```

我对加入这些表有点不了解，但我创建了两个查找表，如下所示：

```
material_id | common_name_id (table name: ml_materials_common_names)
============================
20           | 1
20           | 2
20           | 3
20           | 4

and

material_id | chemical_name (table name: ml_materials_chemical_names)
===========================
20          | 1 
```

这是我的 Active Record (CodeIgniter) 格式的 SQL：

```
$this->db->like('cn.common_name', $options['keyword']);
$this->db->or_like('chem.chemical_name', $options['keyword']);
$this->db->join('ml_materials_chemical_names mchem', 'mchem.material_id = m.material_id', 'inner');
$this->db->join('ml_chemical_names chem', 'chem.chemical_name_id = mchem.chemical_name_id', 'inner');
$this->db->join('ml_materials_common_names mcn', 'mcn.material_id = m.material_id', 'inner');
$this->db->join('ml_common_names cn', 'cn.common_name_id = mcn.common_name_id', 'inner');
return $this->db->get('ml_materials m')->result(); 
```

这用于 AJAX 搜索表单。问题是，当搜索“polysomething”时，我得到四个结果。我只想要一个。我不确定是我的表结构错误还是我的连接。我已经尝试过左、右和外连接，但返回的结果似乎没有任何变化。

有人可以帮忙吗？

# sql - 将 Oracle 的时间戳转换为纪元的秒数

> ID：10555814
> 
> 赞同：2
> 
> 时间：2012-05-11T17:15:00.403
> 
> 标签：sql, oracle, plsql

我在 Oracle 数据库的表中存储了一个时间戳，例如：

```
01/03/12 16:13:33,000000000 
```

我想将它转换为自 Unix 纪元以来的秒数以在查询中返回。最简单的方法是什么？

编辑：哦，我需要时间戳精度，在这里不能依赖日期类型，因为它的精度较低。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:38:19.677

也许

```
WITH I AS (SELECT (TO_TIMESTAMP_TZ('01/03/12 16:13:33,000000000' || SESSIONTIMEZONE,
                                   'DD/MM/RR HH24:MI:SS,FF9TZH:TZM') - 
                   TO_TIMESTAMP_TZ('01/01/1970 00:00:00 GMT',
                                   'DD/MM/YYYY HH24:MI:SS TZR')) AS UNIX_INTERVAL
             FROM DUAL)
SELECT (EXTRACT(DAY FROM UNIX_INTERVAL)  * 86400) +
       (EXTRACT(HOUR FROM UNIX_INTERVAL) * 3600) +
       (EXTRACT(MINUTE FROM UNIX_INTERVAL) * 60) + 
       (EXTRACT(SECOND FROM UNIX_INTERVAL))
  FROM I 
```

会让你开始。这假设 01-Jan-1970 00:00:00Z 纪元日期。

分享和享受。

# handlebars.js - Mustache.js 和 Handlebars.js 有什么区别？

> ID：10555820
> 
> 赞同：361
> 
> 时间：2012-05-11T17:15:45.490
> 
> 标签：handlebars.js, mustache, client-side-templating, templating-engine

我看到的主要区别是：

*   车把增加`#if`, `#unless`, `#with`, 和`#each`
*   Handlebars 添加助手
*   车把模板已编译（Mustache 也可以）
*   车把支持[路径](https://github.com/wycats/handlebars.js#paths)
*   允许使用`{{this}}`in 块（输出当前项目的字符串值）
*   `Handlebars.SafeString()`（也许还有其他一些方法）
*   车把[快 2 到 7 倍](https://github.com/wycats/handlebars.js/#performance)
*   小胡子支持[倒置部分](https://github.com/janl/mustache.js#inverted-sections)（即`if !x ...`）

（如果我对上述内容有误，请纠正我。）

我还缺少其他主要区别吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-08-01T19:56:56.493

您几乎已经掌握了它，但是也可以编译 Mustache 模板。

Mustache 缺少助手和更高级的块，因为它力求无逻辑。Handlebars 的自定义助手可能非常有用，但通常最终会在您的模板中引入逻辑。

Mustache 有许多不同的编译器（JavaScript、Ruby、Python、C 等）。Handlebars 始于 JavaScript，现在有[django-handlebars](https://github.com/yavorskiy/django-handlebars)、[handlebars.java](https://github.com/jknack/handlebars.java)、[handlebars-ruby](https://github.com/MSch/handlebars-ruby)、[lightncandy (PHP)](https://github.com/zordius/lightncandy)和[handlebars-objc 等项目](https://github.com/Bertrand/handlebars-objc)。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-12-28T10:21:31.313

**胡子优点：**

*   非常受欢迎的选择，拥有庞大、活跃的社区。
*   服务器端支持多种语言，包括 Java。
*   无逻辑模板在强迫您将表示与逻辑分开方面做得很好。
*   简洁的语法使模板易于构建、阅读和维护。

**胡子缺点：**

*   有点太没有逻辑了：基本任务（例如用不同的 CSS 类标记交替行）很困难。
*   视图逻辑通常被推回服务器或实现为“lambda”（可调用函数）。
*   要让 lambda 在客户端和服务器上工作，您必须用 JavaScript 编写它们。

**车把优点：**

*   无逻辑模板在强迫您将表示与逻辑分开方面做得很好。
*   简洁的语法使模板易于构建、阅读和维护。
*   编译而不是解释的模板。
*   比 mustache 更好地支持路径（即深入到上下文对象中）。
*   对全局助手的支持比 mustache 更好。

**车把缺点：**

*   需要服务器端 JavaScript 才能在服务器上呈现。

资料来源：[客户端模板丢弃：mustache、handlebars、dust.js 等](http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-11-02T16:43:12.793

一个微妙但重要的区别是这两个库处理范围的方式。如果在当前上下文中找不到变量，Mustache 将回退到父作用域；Handlebars 将返回一个空白字符串。

这在 GitHub README 中几乎没有提到，其中只有一行：

> Handlebars 与 Mustache 略有不同，默认情况下它不执行递归查找。

然而，正如那里所指出的，有一个标志可以使 Handlebars 的行为方式与 Mustache 相同——但它会影响性能。

这会影响您将`#`变量用作条件的方式。

例如，在 Mustache 中，您可以这样做：

```
{{#variable}}<span class="text">{{variable}}</span>{{/variable}} 
```

它基本上意味着“如果变量存在并且是真实的，则打印一个包含变量的跨度”。但在 Handlebars 中，您要么必须：

*   `{{this}}`改为使用
*   使用父路径，即`{{../variable}}`返回相关范围
*   `variable`在父`variable`对象中定义子值

有关此的更多详细信息，如果您想要它们，请[点击此处](http://guypursey.com/blog/201411022009-mustache-vs-handlebars-scoping)。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-01-18T17:09:28.253

**注意：** *此答案已过时。发布时确实如此，但现在不再如此。*

Mustache 有多种语言的解释器，而 Handlebars 只有 Javascript。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-08-03T11:50:19.357

它们之间的另一个区别是文件的大小：

*   Mustache.js 有 9kb，
*   Handlebars.js 有 86kb，如果使用[预编译模板](http://handlebarsjs.com/precompilation.html)，则为 18kb 。

要查看 Handlebars.js 的性能优势，我们必须使用预编译模板。

来源：[JavaScript 模板引擎概述](https://www.sitepoint.com/overview-javascript-templating-engines/)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-11-19T10:35:10.190

另一个细微的区别是对块中虚假值的处理`{{#property}}...{{/property}}`。大多数 mustache 实现在这里只会服从 JS 的虚假性，如果`property`是`''`或“0”，则不会渲染块。

Handlebars*将为*`''`和渲染块`0`，但不会渲染其他虚假值。这可能会在迁移模板时引起一些麻烦。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-17T21:59:29.613

我觉得“Handlebars”的上述缺点之一不再有效。

Handlebars.java 现在允许我们为客户端和服务器共享相同的模板语言，这对于具有 1000 多个需要服务器端渲染以进行 SEO 的组件的大型项目来说是一个巨大的胜利

看看[https://github.com/jknack/handlebars.java](https://github.com/jknack/handlebars.java)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-06-01T18:31:38.610

— 除了将“this”用于车把，将变量块中的嵌套变量用于 mustache，您还可以将块中的嵌套点用于 mustache：

```
 {{#variable}}<span class="text">{{.}}</span>{{/variable}} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-30T22:04:03.943

[![在此处输入图像描述](../Images/1329461c26366a9eb94eb42550ef7114.png)](https://i.stack.imgur.com/RJt2M.jpg)

在这里，您可以看到不同胡须与车把的一些速度测试。mustache 无需任何用户操作即可将模板缓存在内存中，这就是我运行它一次的原因。它比小胡子慢 3 倍。文件系统缓存可能会减慢开发速度，最终结果可能与单次运行相当。不要盲目相信那些陈述，尤其是速度..（PHP 速度很快，因为启用了 opcache+jit）

# linux - 无法以特定用户身份启动服务？

> ID：10555822
> 
> 赞同：1
> 
> 时间：2012-05-11T17:16:02.783
> 
> 标签：linux, sudo

过去几天一直在与 Linux 斗争。无论出于何种原因，我都无法以特定用户身份启动我的服务。如果我尝试以特定用户身份启动我的服务，它将不起作用：

```
sudo -u logAdmin /sbin/service logService start 
```

然而; 如果我以 root 用户身份运行该服务，它将启动。

```
sudo /sbin/service logService start 
```

我不确定如何解决这个问题。用户肯定存在。当我使用以下命令检查用户时：

```
grep "^logAdmin" /etc/passwd 
```

我回来了：

```
logAdmin:x:600:600:logAdmin Application Account:/app:/bin/bash 
```

我还为脚本提供了适当的权限

/etc/init.d 和 sh 文件包含：

```
chown logAdmin:logAdmin /app/logService 
```

我注册了服务：

```
/sbin/chkconfig logService on 
```

我还检查了我的用户对 init 脚本的权限并返回：

```
-rwxr-xr-x 1 logAdmin logAdmin 1228 May 11 17:39 /etc/init.d/logService 
```

我已经尝试了一切来让它工作！为什么它运行 sudo root 用户但当我尝试以另一个用户身份启动它时不会运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:44:47.523

`service` **必须**以 root 身份运行。initscript 负责以不同的用户身份启动应用程序。

# ios - Xcode 痛苦，语法高亮损坏

> ID：10555830
> 
> 赞同：9
> 
> 时间：2012-05-11T17:16:42.007
> 
> 标签：ios, xcode, macos, cocoa, documentation

我遇到了 Xcode 4 (4.3.1 - 4E1019) 的问题。

几个小时后，我的代码没有正确突出显示，似乎 Xcode 失去了 Cocoa 的所有意义，我最终得到了示例屏幕截图，我无法跳转到方法（通过单击方法按住 cmd 键） - 这应该按预期工作，它甚至不适用于 Cocoa 基类。

我发现解决这个问题的唯一方法是转到 Organizer > Project 并删除项目派生数据，然后退出并重新启动 Xcode，但不久它又会出错。

有没有其他人有这个问题 ？这真的让我慢了下来。如果有人有任何提示，那就太好了。

![在此处输入图像描述](../Images/866e2aa52e5a049b6884cc866b1d2b6e.png) ![在此处输入图像描述](../Images/2cbe4c113dac343b4ba44a2cb60fb6c4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T14:22:45.587

Justin Boo 向我指出了最好的线程，虽然有很多投票和答案，但提出这个问题的用户似乎已经放弃了堆栈溢出。

我不会尝试复制最佳答案，然后在一段中恢复：

Xcode 对我在**.pch 文件**中声明的所有常见头文件感到困惑，并且在构建设置中设置“**预编译前缀头文件**”意味着 Xcode 由于框架的递归导入而陷入了一些内部冲突。**所以将该设置更改为 NO**。

所以为了保持整洁，这里有一个链接到让我陷入困境的真实答案：[https ://stackoverflow.com/a/6033009/662605](https://stackoverflow.com/a/6033009/662605)

# c# - 限制在 LibGit2Sharp 中查询的提交数量？

> ID：10555831
> 
> 赞同：3
> 
> 时间：2012-05-11T17:16:45.233
> 
> 标签：c#, libgit2, libgit2sharp

我正在做一个循环：

```
using LibGit2Sharp;

var filter = new Filter { Since = repo.Refs };
IEnumerable<Commit> commits = repo.Commits.QueryBy(filter);

foreach (Commit commit in commits)
{
     //Do stuff...
} 
```

它工作正常，但有没有办法可以限制结果的数量？例如，我想获得最新的 100 个提交，而忘记旧的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:25:48.833

[使用 LINQ 的Take](http://msdn.microsoft.com/en-us/library/bb503062.aspx)怎么样

```
var commits = repo.Commits.QueryBy(new LibGit2Sharp.CommitFilter{ Since = repo.Refs });
foreach (LibGit2Sharp.Commit commit in commits.Take(100))
{
    //...
} 
```

[检查CommitCollection](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp/CommitCollection.cs)的代码，它似乎真的只会返回 100 次提交（所以它不会全部查找然后取 100 次）。

`Filter.SortBy`您可以使用该属性设置所需的排序顺序。

# javascript - 鼠标点击事件不适用于自动完成建议

> ID：10555833
> 
> 赞同：1
> 
> 时间：2012-05-11T17:16:51.907
> 
> 标签：javascript, json

我在搜索框上使用了自动完成功能。一切正常，除了如果您使用鼠标选择建议而不是使用向上或向下箭头，则鼠标单击事件不起作用。在极少数情况下，当页面首次加载时，它会工作一次，但再也不会工作了。不知道我做错了什么。

测试页面位于[http://www.candyundies.com/template_non_product.php](http://www.candyundies.com/template_non_product.php)

这是 autocomplete.js 的内容：

```
// global variables
var acListTotal   =  0;
var acListCurrent = -1;
var acDelay       = 100;
var acURL         = null;
var acSearchId    = null;
var acResultsId   = null;
var acSearchField = null;
var acResultsDiv  = null;
function setAutoComplete(field_id, results_id, get_url) {
// initialize vars
acSearchId  = "#" + field_id;
acResultsId = "#" + results_id;
acURL       = get_url;
// create the results div
$("#auto").append('<div id="' + results_id + '"></div>');
// register mostly used vars
acSearchField   = $(acSearchId);
acResultsDiv    = $(acResultsId);
// on blur listener
acSearchField.blur(function(){ setTimeout("clearAutoComplete()", 100) });
// on key up listener
acSearchField.keyup(function (e) {
    // get keyCode (window.event is for IE)
    var keyCode = e.keyCode || window.event.keyCode;
    var lastVal = acSearchField.val();
    // check an treat up and down arrows
    if(updownArrow(keyCode)){
        return;
    }
    // check for an ENTER or ESC
    if(keyCode == 13 || keyCode == 27){
        clearAutoComplete();
        return;
    }
    // if is text, call with delay
    setTimeout(function () {autoComplete(lastVal)}, acDelay);
});
}
// treat the auto-complete action (delayed function)
function autoComplete(lastValue) {
// get the field value
var part = acSearchField.val();
// if it's empty clear the resuts box and return
if(part == ''){
    clearAutoComplete();
    return;
}
// if it's equal the value from the time of the call, allow
if(lastValue != part){
    return;
}
// get remote data as JSON
$.getJSON(acURL + part, function(json){
    // get the total of results
    var ansLength = acListTotal = json.length;
    // if there are results populate the results div
    if(ansLength > 0){
        var newData = '';
        // create a div for each result
        for(i=0; i < ansLength; i++) {
            newData += '<div class="unselected">' + json[i] + '</div>';
        }
        // update the results div
        acResultsDiv.html(newData);
        acResultsDiv.css("display","block");
        // for all divs in results
        var divs = $(acResultsId + " > div");
        // on mouse over clean previous selected and set a new one
        divs.mouseover( function() {
            divs.each(function(){ this.className = "unselected"; });
            this.className = "selected";
        });
        // on click copy the result text to the search field and hide
        divs.click( function() {
            acSearchField.val(this.childNodes[0].nodeValue);
            clearAutoComplete();
        });
    } else {
        clearAutoComplete();
    }
});
}
// clear auto complete box
function clearAutoComplete() {
acResultsDiv.html('');
acResultsDiv.css("display","none");
}
// treat up and down key strokes defining the next selected element
function updownArrow(keyCode) {
if(keyCode == 40 || keyCode == 38){
    if(keyCode == 38){ // keyUp
        if(acListCurrent == 0 || acListCurrent == -1){
            acListCurrent = acListTotal-1;
        }else{
            acListCurrent--;
        }
    } else { // keyDown
        if(acListCurrent == acListTotal-1){
            acListCurrent = 0;
        }else {
            acListCurrent++;
        }
    }
    // loop through each result div applying the correct style
    acResultsDiv.children().each(function(i){
        if(i == acListCurrent){
            acSearchField.val(this.childNodes[0].nodeValue);
            this.className = "selected";
        } else {
            this.className = "unselected";
        }
    });
    return true;
} else {
    // reset
    acListCurrent = -1;
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:32:45.230

divs 不是数组吗？

您不能覆盖数组的 UI 事件，它不存在。除非我在这里语法上遗漏了一些东西。

尝试迭代并添加事件

```
 for( var i 0; i < divs.length;i++)
       divs[i].onclick = ... 
```

# postgresql - Postgres 用户看到不同的数据

> ID：10555834
> 
> 赞同：4
> 
> 时间：2012-05-11T17:16:54.223
> 
> 标签：postgresql

我使用 MySQL 已经有一段时间了，我决定学习 Postgres。过渡并不可怕，但我今天遇到了一个障碍：

我有管理员帐户`postgres`和专门用于此应用程序的用户`tv`。为了方便起见，我正在修改管理员帐户下的表中的一些行。该网站不会反映我对数据库所做的任何更改。

在责备我的各种缓存策略大约一个小时后，我终于`psql`以`tv`用户身份运行，并注意到其中没有任何行反映以`postgres`. 来自 MySQL 背景，这种行为对我来说完全莫名其妙。

长话短说：这是一个功能，还是我在某个地方配置错误？有没有办法让数据库不这样？

谢谢你的帮助。

* * *

**更新：**以下是命令示例：

```
[12:23:04] blake$ sudo -u postgres psql -d teevee
psql (9.1.3)
键入“帮助”以获得帮助。

teevee=# SELECT COUNT(*) FROM episode;
 数数
--------
     1
(1 行)

```

```
[12:23:25] blake$ psql -U tv -d teevee -h localhost -W
用户 tv 的密码：
psql (9.1.3)
SSL 连接（密码：DHE-RSA-AES256-SHA，位：256）
键入“帮助”以获得帮助。

teevee=> 从剧集中选择计数（*）；
 数数
--------
   176
(1 行)

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:51:51.900

您可以使用`\dn`或`\dn+`下列出架构`psql`，但我建议使用 pgAdmin 之类的工具来获得更好的视觉表示。您可以使用和查找这些潜在`tv`和`public`模式中是否有冲突的表。`\dt public.*``\dt tv.*`

使用多个[模式](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html)可能很有用，但通常不是必需的。

默认搜索路径往往是`"$user",public`，这意味着它将首先尝试使用以用户命名的模式中的表，然后回退到`public`模式（最常见的）。

我建议`public`一般使用模式，除非你有充分的理由不这样做。这通常应该是默认值。（我不确定你为什么有另一个模式。）

[您可以使用`ALTER TABLE xxxxxx SET SCHEMA yyyyyyy`](http://www.postgresql.org/docs/9.1/static/sql-altertable.html)更改表模式，但您可能需要事先删除另一个名称冲突的表模式。您当然希望先将数据复制出来。

类似的东西`INSERT INTO public.episode SELECT * FROM tv.episode`应该适用于您的情况，使用指定的列名更好。这是否有效可能取决于其他约束。

如果此时您的`public`架构中没有任何有用的东西，您不妨完全删除架构 ( [`DROP SCHEMA public`](http://www.postgresql.org/docs/9.1/static/sql-dropschema.html)) 并重命名另一个架构 ( [`ALTER SCHEMA tv RENAME to public`](http://www.postgresql.org/docs/9.1/static/sql-alterschema.html))。根据已经授予的内容，您可能还需要以下内容：

```
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO public; 
```

# htmlunit - 如何使用 HtmlPage 对象获取准确的 HTML（在执行 JS 函数之后）？

> ID：10555835
> 
> 赞同：0
> 
> 时间：2012-05-11T17:16:56.233
> 
> 标签：htmlunit, browser-automation

我正在使用 Htmlunit（浏览器自动化/测试工具）从 URL 获取网页，为某些 HTML 元素（如 textinput 等）添加值，然后我想使用以下语句自动执行“单击操作：

```
`HtmlPage page2 = button.click();`
```

然后我想在默认浏览器上显示响应。但。我请求（来自 URL）的 HTML 是带有 javascript 函数的 RAW HTML，在执行时会调用一些 Web 服务，然后才会生成确切的 HTML（在浏览器上呈现的 HTML）。
因此，我想知道如何在我的 java 程序中执行这些 JS 函数，以便我可以得到正确的 HTML 元素，我正在寻找..
这是我的代码：

```
`final WebClient webClient = new WebClient();
webClient.setJavaScriptEnabled(true);
// Get the first page
final HtmlPage page1 = (HtmlPage)webClient.getPage("http://some URL");`
```

HtmlPage 对象 page1 具有原始 JS 功能..
提前谢谢...！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:02:37.200

您可以使用 WebWindowListener：

```
 WebWindowListener listener = new WebWindowAdapter() {

        @Override
        public void webWindowOpened(WebWindowEvent event) {
            Page newPage = event.getNewPage();
        }

        @Override
        public void webWindowContentChanged(WebWindowEvent event)
        {
            Page generatedPage = event.getNewPage();
        }
    }

    webClient.addWebWindowListener(listener); 
```

# c# - axwindowsmediaplayer 显示绿色页面，而不是在 wpf 中播放视频

> ID：10555839
> 
> 赞同：0
> 
> 时间：2012-05-11T17:17:19.340
> 
> 标签：c#, .net, wpf, axwindowsmediaplayer

我正在为低性能系统开发一个 wpf 应用程序（板载 VIA/S3G UniChrome Pro IGP 图形，内存大小为 16 MB）。应用程序在信息亭中工作，以幻灯片模式显示图像或根据操作员制定的时间表播放视频。主要应用程序是 wpf(.net 3.5)，我使用 axwindowsmediaplayer activex 在弹出窗口中播放视频 (topmost=true;maximazed)。

我的问题是：有时当应用程序想要播放视频时，axwindowsmediaplayer 显示一个绿色页面并且不播放视频。（它并不总是发生）有人知道它为什么会发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:32:29.107

[这篇](http://support.microsoft.com/kb/909554)2005 年的文章似乎指出了显卡问题（尤其是过时的驱动程序）。

# git - 更新 GitHub 分叉项目不是主项目

> ID：10555841
> 
> 赞同：0
> 
> 时间：2012-05-11T17:17:39.123
> 
> 标签：git, github

这是一个菜鸟问题，但我分叉了一个项目并对其进行了一些编辑。所以现在我想做以下事情，

第1步：

用我对机器 1 的更改更新分叉项目。是否可以更新分叉项目并保持原始（主）不变？

第2步：

将更新的前叉拉到机器 2。

此外，当我分叉项目时，我使用在线门户分叉了它并手动下载了 tarball。那么我可以更新分叉项目吗？

机器 1 和机器 2 在 GitHub 中都有 SSH 密钥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:22:36.103

您的步骤是：

1.  将回购分叉到您的帐户中。然后将其克隆到您的机器上。（对你的 fork 所做的任何更改都不会转到原始项目）
2.  在您的帐户中进行更改并提交您的分叉
3.  然后我会向原始仓库发出拉取请求

对于您的第二台机器，只需将您的项目重新克隆到机器＃2 上，一切都应该在那里。

下载 tarball 与克隆不同。

查看这些说明：[http ://help.github.com/fork-a-repo/](http://help.github.com/fork-a-repo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:23:00.730

当你 fork 项目时，github 在你的帐户下创建了一个存储库的副本。您应该可以使用

```
git clone git@github.com:[your user name]/[repository name].git 
```

然后，当您进行更改时，您将提交它们并将更新推送到 github：

```
git push origin master 
```

一旦你这样做了，在你的第二台机器上重复克隆存储库，这将具有存储库的最新版本。

# python - 在 Python 中从文件动态创建类

> ID：10555844
> 
> 赞同：7
> 
> 时间：2012-05-11T17:17:42.920
> 
> 标签：python

我已经看到了这些“动态创建类”的问题，这些问题的回答是“使用 type() 函数”。我确定我必须在某个时候这样做，但我知道我一无所知。但是从我所见，您必须已经知道该类的一些信息，例如名称。

我要做的是解析一个 idl 类型的文件，并从中创建一个具有方法和属性的类。所以在我解析字符串之前，我不知道类名、函数、参数或任何东西是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T17:25:02.203

[http://docs.python.org/library/functions.html#type](http://docs.python.org/library/functions.html#type)

谷歌有点难，但你可以搜索`python type(name, bases, dict) function examples`得到：

[http://www.voidspace.org.uk/python/articles/metaclasses.shtml](http://www.voidspace.org.uk/python/articles/metaclasses.shtml)

上面的摘录，它触及了你问题的核心：

* * *

*以下基本上是等价的：*

```
def __init__(self, x):
    self.x = x

def printX(self):
    print self.x

Test = type('Test', (object,), {'__init__': __init__, 'printX': printX}) 
```

*和：*

```
class Test(object):
    def __init__(self, x):
        self.x = x

    def printX(self):
        print self.x 
```

* * *

我能想到的动态创建函数的方法有两种。通常不好的方法是编写代码并重新解析它（虽然做得正确，但这可以大大提高性能）。理智的方法是实现一个解释你的 IDL 的函数。这称为高阶函数：[http ://effbot.org/pyfaq/how-do-you-make-a-higher-order-function-in-python.htm](http://effbot.org/pyfaq/how-do-you-make-a-higher-order-function-in-python.htm)

如果您找不到 IDL 的解释器（如果它是自定义 IDL），您将编写的示例类似于上面的链接，例如：

```
def makeMethod(idlCode):
    syntax = MyIDL.parse(idlCode)

    def newMethod(*args, **kw):
        if syntax.statementType == MyIDL.IF_STATEMENT:
            if secureLookup(mySyntaxTree.IF):
               return secureLookup(args[0]) 
            else:
               return secureLookup(args[1])
        ...

    return (syntax.methodName, newMethod) 
```

如果您在 IDL 的构造与 *args 和 **kw 的语法之间建立映射，则有许多更优雅的方法可以扩展此方法，但这为您提供了最大的灵活性，并且是我能做到的最直接和基本的方法考虑到。

然后你会传入：

```
class DynamicIdlClass(object):
    ...

for idlObject in idlCode:
    methods = dict(makeMethod(clause) for clause in idlObject.clauses})
    methods['__init__'] = makeInitMethod(idlObject.initClause)
    idlObject = type('Test', (DynamicIdlClass,), methods)

    yield idlObject  # or idlObjectsList.push(idlObject), etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:28:11.613

在我们的项目中，我们创建了一个对象，该对象公开了一个能够添加可调用属性的具体方法。我们为模式解析大量 yaml 文件并动态组装这些对象。

类似的东西

```
def add_method(name, callable):
    setattr(self,name,callable) 
```

但这是一个非常幼稚的例子，但你明白了。模式存储在每个动态类中，类似于`__schema`包含 kwarg 原型和文档字符串的字典。

对于实际的可调用对象，请制作一个类似的骨架

```
def skel(self, *args, **kwargs):
    if '_schema' in kwargs:
        parse_yml, add control statements
    handle args and kwargs based on schema

some_instance.add_method('blah',skel) 
```

同样，这些都是非常幼稚的例子，并没有涵盖处理此类问题时出现的大多数问题和边缘情况。这也是寻找解决方案的几种方法之一。

例子：

[离子对象](https://github.com/lukecampbell/pyon/blob/master/pyon/core/object.py)

[对象模型生成器](https://github.com/lukecampbell/pyon/blob/master/pyon/util/object_model_generator.py)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:53:36.237

与其将其视为“我如何动态创建一个类”，不如将其视为一个使用 Python 元编程功能的机会。

我要寻找想法的第一个地方是标准库源代码`xmlrpclib`——特别是看看它是如何动态`__getattr__`处理其他不存在的方法调用的。

我知道在我完全接受这些可能性之前，我并不真正理解他们为什么称 Python 为动态语言。

# android - android中的可点击文本

> ID：10555850
> 
> 赞同：1
> 
> 时间：2012-05-11T17:18:07.097
> 
> 标签：android

我有一个包含三列 Maker、Model 和 Price 的数据库，并且我已经做到了，以便在按下按钮时将所有内容存储在字符串中并将字符串传递给 TextView。这个想法是我想以某种方式使文本可点击，并且当点击给定产品的文本时，将产品的价格存储在变量中。

这是显示数据库中所有内容的代码

```
 package com.WareHouse;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class viewall extends Activity {

SQLiteDatabase myDB = null;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.vall);

    Button vAll = (Button) findViewById(R.id.viewAll);
    final TextView view2 = (TextView) findViewById(R.id.multiAutoCompleteTextView1);

    vAll.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            try {
                String Data = "";

                String TableName = "myTable";

                myDB = getBaseContext().openOrCreateDatabase(
                        "DatabaseName", MODE_PRIVATE, null);

                Cursor c = myDB
                        .rawQuery("SELECT * FROM " + TableName, null);

                int Column1 = c.getColumnIndex("Field1");
                int Column2 = c.getColumnIndex("Field2");
                                    int Column3 = c.getColumnIndex("Field3");

                // Check if our result was valid.
                c.moveToFirst();
                if (c != null) {
                    // Loop through all Results
                    do {
                        String Name = c.getString(Column1);
                        String Model = c.getString(Column2);
                                                    String Price = c.getStrin(Column3);
                        Data = Data + "Maker: " + Name + "\n" + "Model: "
                                + Model + "\n" +"Price: " + Price+ "\n"+"\n";
                    } while (c.moveToNext());

                }
                //////////////////////////////////////////
                view2.setText(Data.toString());
            } catch (Exception e) {
                Log.e("Error", "Error", e);
            } finally {
                if (myDB != null)
                    myDB.close();
            }

        }
    });

    Button next = (Button) findViewById(R.id.buttonBack);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent intent = new Intent();
            setResult(RESULT_OK, intent);
            finish();
        }

    });

}
} 
```

有什么建议么 ？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:19:58.383

为 TextView 添加 android:clickable="true" 为：

```
<TextView  
    android:id="@+id/multiAutoCompleteTextView1"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:clickable="true" 
    android:text="@string/hello"
    /> 
```

编辑：

在 viewall 活动中：

```
final TextView view2 = (TextView) findViewById(R.id.multiAutoCompleteTextView1);
view2.setOnClickListener(listener);
 private OnClickListener listener = new OnClickListener() {
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (v.getId() == (R.id.multiAutoCompleteTextView1)) {
            view2.setText(inname.getText() + "!" + "Welcome to Android");
        } 
        else {
            Log.v(TAG, "....");
        }
    }

}; 
```

# jquery - Jquery .each() 和 Flickr Json

> ID：10555851
> 
> 赞同：0
> 
> 时间：2012-05-11T17:18:11.980
> 
> 标签：jquery, json, flickr

我正在循环从 Flickr 返回的 JSON。我期望以下内容会提醒`0,1,2,3...`索引等，但它正在提醒`id,server,farm,etc`

```
$.each(data.photo, function(index,item){
             alert(index);

 }); 
```

***编辑*** 顺便说一句我正在使用`method=flickr.photos.getInfo`

```
var Info = "http://api.flickr.com/services/rest/?method=flickr.photos.getInfo";
                Info += "&api_key=" + "myapikey";
            Info+= "&photo_id="+item.id;
            Info += "&format=json";
            Info+= "&jsoncallback=?";

$.getJSON(Info,loaded);

function loaded(){
$.each(data.photo, function(index,item){
      //Trying to get number of JSON Object (I am getting the info for 52 photos)....
      //I want to alert 0 through 52 here and do some further processing

});

} 
```

***编辑*** 正如工程师指出的那样，我不应该循环这个，而应该只是使用`data.photo.....`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:25:33.780

`data.photo`是 hashmap，这就是为什么你`(key,value)`在`'each' callback`.

根据[API](http://www.flickr.com/services/api/flickr.photos.getInfo.html) `'method=flickr.photos.getInfo'`返回单张照片的信息。这意味着，`data.photo`是一堆属性（（键，值）对），没有枚举它们的意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:27:09.300

`flickr.photos.getInfo`以对象形式 ({}) 返回单张照片。

```
{
  photo: { 
   owner: 1,
   title: 'photo title',
   // etc.
  }
} 
```

*如果 (a) 它们已分配给对象（非常不寻常）或 (b) 您使用的 API 方法返回一个对象数组*，您只会期望收到数字键。

```
photos: [{
   owner: 1,
   title: 'photo 1'
}, {
   owner: 1,
   title: 'photo 2'
}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:26:57.787

如果你想要索引而不是 id、server、firm 那么你可以试试这个

```
var count = 0;
$.each(data.photo, function(index,item){
      alert(index + ' is at ' + count);
      count++;
 }); 
```

# r - 基于因子变量中的观察数量的子集

> ID：10555858
> 
> 赞同：1
> 
> 时间：2012-05-11T17:18:54.897
> 
> 标签：r, subset, r-factor

您如何根据因子变量水平的观察次数进行子集化？我有一个包含 1,000,000 行和近 3000 个级别的数据集，我想用更少的 200 个观察值对级别进行子集化。

```
data <- read.csv("~/Dropbox/Shared/data.csv", sep=";")

summary(as.factor(data$factor)
10001 10002 10003 10004 10005 10006 10007 10009 10010 10011 10012 10013 10014 10016        10017 10018 10019 10020 
  414   741  2202   205   159   591   194   678   581   774   778   738  1133   997   381   157   522     6 
10021 10022 10023 10024 10025 10026 10027 10028 10029 10030 10031 10032 10033 10034 10035 10036 10037 10038 
  398   416  1236   797   943   386   446   542   508   309   452   482   425   272   261   291   145   598 
10039 10040 10041 10043 10044 10065 10069 10075 10080 10104 10105 10106 10110 10112 10115 10117 10119 10121 
  119   263     9     9   179   390    70   465    19     3     7     5     4     1     1     1     2     6 
10123 10128 10150 10152 10154 10155 10168 10170 10173 10174 10176 10199 10210 10220 10240 10265 10270 10271 
    2   611     8     1     1     2    10     1     6     5     5     2     5     2     1     3     5     2 
```

正如您从上面的摘要中看到的那样，有些因素只有几个 obs，我想删除小于 100 的因素。

我尝试了以下方法，但没有奏效：

```
for (n in unique((data$factor))) {
    m<-subset(data, factor==n)
    o<-length(m[,1])
    data<-ifelse( o<100, subset(data, factor!=n), data)
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T17:38:32.093

`table`，子集，并根据该子集的名称进行匹配。以后大概会想要`droplevels`。

* * *

EIDT

一些样本数据：

```
set.seed(1234)
data <- data.frame(factor = factor(sample(10000:12999, 1000000, 
  TRUE, prob=rexp(3000)))) 
```

有一些类别很少的案例

```
> min(table(data$factor))
[1] 1 
```

从具有相同值的记录中删除少于 100 个的记录`factor`。

```
tbl <- table(data$factor)
data <- droplevels(data[data$factor %in% names(tbl)[tbl >= 100],,drop=FALSE]) 
```

查看：

```
> min(table(data$factor))
[1] 100 
```

请注意，`data`and`factor`不是很好的名称，因为它们也是内置函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T01:53:25.730

我使用以下方法弄清楚了，因为没有理由做两次：

```
function (df, column, threshold) { 
    size <- nrow(df) 
    if (threshold < 1) threshold <- threshold * size 
    tab <- table(df[[column]]) 
    keep <- names(tab)[tab >  threshold] 
    drop <- names(tab)[tab <= threshold] 
    cat("Keep(",column,")",length(keep),"\n"); print(tab[keep]) 
    cat("Drop(",column,")",length(drop),"\n"); print(tab[drop]) 
    str(df) 
    df <- df[df[[column]] %in% keep, ] 
    str(df) 
    size1 <- nrow(df) 
    cat("Rows:",size,"-->",size1,"(dropped",100*(size-size1)/size,"%)\n") 
    df[[column]] <- factor(df[[column]], levels=keep) 
    df 
} 
```

# mysql - 如何添加涉及 4 个 INNER JOIN 和 2 个 LEFT JOIN 的计数和清理/简化派生查询

> ID：10555860
> 
> 赞同：0
> 
> 时间：2012-05-11T17:18:59.990
> 
> 标签：mysql, database, join, count

我是使用 MySQL 派生查询的新手，并且在两件事上遇到了麻烦。

1）如何引用 t1.dCount 以便计算每个 optionId 的 xcart_images_D.productId 数量？

2) 如何简化此查询的派生 SELECT？（目前此查询需要 45 秒才能运行）

```
 SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiW.id, xiW.image_path, t1.dCount
 FROM xcart_products xp
 INNER JOIN xcart_variants xv ON xp.productid = xv.productid
 INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
 INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
 INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
 LEFT JOIN xcart_images_W xiW ON xiW.id = xvi.variantid
 LEFT JOIN (
 SELECT COUNT(xiD.optionid) as dCount 
    FROM xcart_products xp2
    INNER JOIN xcart_classes xc2 ON xp2.productid = xc2.productid AND xc2.class = 'Color'
    INNER JOIN xcart_class_options xco2 ON xc2.classid = xco2.classid
    LEFT JOIN xcart_images_D xiD ON xiD.optionid = xco2.optionid
 ) as t1 ON xiW.id = xvi.variantid
 GROUP BY xco.optionid
 ORDER by xp.product DESC 
```

这是计数的工作版本，但没有派生选择 -

```
SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiD.image_path, xiD.path_on_server, count(xiD.optionid) as cnt
    FROM xcart_products xp
    INNER JOIN xcart_classes xc ON xp.productid = xc.productid AND xc.class = 'Color'
    INNER JOIN xcart_class_options xco ON xc.classid = xco.classid
    LEFT JOIN xcart_images_D xiD ON xiD.optionid = xco.optionid
    GROUP BY xp.product, xco.optionid
    ORDER by xp.product DESC 
```

如果这里需要的是数据库布局 -

```
+ xcart_products
    - productid*
    - product
+ xcart_variants
    - variantid*
    - productid (xcart_products.productid)
+ xcart_variant_items [bridge table]
    - optionid*
    - variantid (xcart_variants.variantid)
+ xcart_classes
    - classid*
    - productid (xcart_products.productid)
    - class
+ xcart_class_options
    - optionid*
    - option_name
    - classid (xcart_classes.classid)
+ xcart_images_W
    - imageid*
    - id (xcart_variants.variantid)
    - image_path
+ xcart_images_D
    - imageid* [not relational with xcart_images_W.imageid]
    - id (xcart_products.productid)
    - optionid (xcart_class_options.optionid)

* Primary Key
() relational data
[] notes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:22:18.250

这是您的原始查询，其中包含一些说明我认为是问题的注释：

```
 SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiW.id, xiW.image_path, t1.dCount
 FROM xcart_products xp
 INNER JOIN xcart_variants xv ON xp.productid = xv.productid
 INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
 INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
 INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
 LEFT JOIN xcart_images_W xiW ON xiW.id = xvi.variantid
 -- all of the above is pretty standard.

 -- but this part is a little wonky!
 LEFT JOIN (
 SELECT COUNT(xiD.optionid) as dCount 
    FROM xcart_products xp2
    INNER JOIN xcart_classes xc2 ON xp2.productid = xc2.productid AND xc2.class = 'Color'
    INNER JOIN xcart_class_options xco2 ON xc2.classid = xco2.classid
    LEFT JOIN xcart_images_D xiD ON xiD.optionid = xco2.optionid
 ) as t1 ON xiW.id = xvi.variantid
 -- The inner query here only returns one column, which means it's
 -- *not related* to anything.  That's why, outside, you're using an
 -- ON query that has nothing to do with the data inside the table 
 -- you're joining!  You need to group by in the inner select.

 GROUP BY xco.optionid
 ORDER by xp.product DESC 
```

尝试类似：

```
SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiW.id, xiW.image_path, t1.dCount
 FROM xcart_products xp
 INNER JOIN xcart_variants xv ON xp.productid = xv.productid
 INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
 INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
 INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
 LEFT JOIN xcart_images_W xiW ON xiW.id = xvi.variantid
 -- Keep the above

 -- but change this one to add a group by.
 LEFT JOIN (
 SELECT xco2.optionId as optionid, count(*) as dCount 
    -- this could be cleaned up if the products and class aren't
    -- really relevant- as it is, it serves only to narrow the set
    -- of xcart_class_options you'll be looking at/counting for.
    FROM xcart_products xp2
    INNER JOIN xcart_classes xc2 ON xp2.productid = xc2.productid AND xc2.class = 'Color'
    INNER JOIN xcart_class_options xco2 ON xc2.classid = xco2.classid

    -- bring in the image_ds that match the class_option we are looking
    -- at
    LEFT JOIN xcart_images_D xiD ON xiD.optionid = xco2.optionid

    -- And group by those option_ids.
    group by xid.optionid
 ) as t1 ON xco.optionid = t1.optionid
 -- we join the inner select based on the optionid we were looking at.

 GROUP BY xco.optionid
 ORDER by xp.product DESC 
```

为了使其更快，这*可能会*起作用，具体取决于您正在寻找的结果：

```
SELECT xp.productid, xp.product, xc.classid, xco.optionid, xco.option_name, xiW.id, xiW.image_path, t1.dCount
 FROM xcart_products xp
 INNER JOIN xcart_variants xv ON xp.productid = xv.productid
 INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
 INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
 INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
 LEFT JOIN xcart_images_W xiW ON xiW.id = xvi.variantid

 -- since the optionId is on the thing you're counting,
 -- don't bother with any joins in the nested query and just 
 -- count and group.
 LEFT JOIN (
 SELECT xiD.optionId as optionid, count(*) as dCount 
    FROM xcart_images_D xiD
    GROUP BY xiD.optionId
 ) as t1 ON xco.optionid = t1.optionid
 -- still join the inner select based on the optionid

 GROUP BY xco.optionid
 ORDER by xp.product DESC 
```

# c++ - 模板和多态有什么区别

> ID：10555864
> 
> 赞同：17
> 
> 时间：2012-05-11T17:19:21.087
> 
> 标签：c++, templates, polymorphism

大家好，我对模板和多态性有疑问。根据定义，多态性提供代码可重用性，并且模板在某种意义上允许用户通过提供具有不同数据类型的通用编程来使用相同的代码。那么在模板上使用多态性有什么好处。这可能是一个愚蠢的问题，但我很想知道确切的区别。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-11T18:04:43.497

您似乎误解了多态性是什么。

多态性的核心与派生类无关。多态性仅仅意味着在不知道所有类型的情况下使用类型的能力。多态性不是使用具体类型，而是依赖于某种形式的原型来定义它所采用的类型。任何适合该原型的类型都被接受。

C++ 中的运行时多态性是通过从包含虚函数的基类派生类来提供的。基类和虚函数构成多态原型。为接受调用这些虚函数的基类而编写的代码将接受从基类派生的*任何*类实例。

*编译时*多态性是在编译时发生的多态性；）这意味着编译器必须*知道*发生了什么。您可能已经针对多态原型编写了 C++ 代码，但编译器并不关心。您会在编译后获得特定的具体类型。

编译时多态性由 C++ 中的模板提供。模板函数或类可以采用符合原型的任何类型，通常称为“概念”。与基类和虚函数不同，原型是*隐式*的：原型仅由模板函数/类如何*使用类型来定义。*

如果你有这个模板功能：

```
template<typename T>
void Stuff(T &t)
{
  t.call(15);
} 
```

有一个*隐含*的要求`T`。这个要求是它有一个名为 的成员函数`call`。此成员函数必须有一个可以用整数值调用的重载。

这意味着可以使用恰好适合此原型的*任何类型。*

模板多态比继承多态更广泛，因为它可以被更广泛的类型数组使用。必须专门设计一个类型以使用继承多态性；你必须从一个类派生。类型可以非破坏性地（即：您不必更改类型本身）适应模板多态性。如果您的模板原型设计良好，则更是如此：

```
template<typename T>
void Stuff(T &t)
{
  call(t, 15);
} 
```

这个版本的所有`Stuff`要求是有一些函数接受一个`T&`和一个整数值。如果我想使用某种类型，我`Stuff`所要做的就是`call`在适当的命名空间（即定义该类型的命名空间）中定义一个函数。这将工作得很好。所有这些都无需*修改*类型本身。

当然，编译时多态性是……编译时。如果我想要一些用户输入或数据文件来选择多态类型，模板不会有很大帮助（尽管类型擦除，一种基于模板的技术，可以提供帮助）。运行时多态的主要好处是它确实是运行时的。

另一个好处是它的原型更精确。一切都明确说明了继承。基类中的虚函数接口布局清晰。编译器将阻止您尝试错误地使用该基类（调用其上不存在的方法）。事实上，一个体面的 IDE 将指导您的代码，以便您只能看到基类上的方法。

模板多态性要隐含得多。由于 C++ 无法说明特定模板函数/类放在类型上的原型，因此很容易意外地在模板类型上调用一些你不应该调用的东西。只有当您尝试使用不适合原型的类型时，编译器才会检测到这一点。即使这样，您通常也会收到大量错误（取决于您的模板代码嵌套的深度），这使得很难知道问题出在哪里。

实现隐式模板多态原型也困难得多，因为它没有被详细说明。实现派生类需要遍历基类，查看所有虚函数并实现它们。为模板原型执行此操作要困难得多，除非某处有说明它的文档。如果你没有实现某些东西，你会再次得到一个错误，通常不会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-01T00:27:53.657

简而言之，它归结为您对要解决的问题的共性和可变性分析的结果。

如果您对不同的东西执行相同的操作，那么您将使用模板`List<int>`，例如`List<float>`

如果您根据上下文以不同的方式对相同的东西执行相同的操作，这也具有一些共性，那么您将使用多态性，例如`AbstractInterface::openFile`带有导数的接口`WindowsInterface::openFile`and `LinuxInterface::openFile`，其中之一将根据上下文使用。抽象接口标识了在概念上执行相同操作这一事实的共性，派生项实现了概念实现的可变性。

# java - 如何从 Ant 启动聚合码头服务器 JAR？

> ID：10555868
> 
> 赞同：0
> 
> 时间：2012-05-11T17:19:48.260
> 
> 标签：java, windows, ant, jetty, embedded-jetty

# 背景

**免责声明：**我对Java 的经验很少*。*

我们之前在 Ant 构建期间使用 Jetty 6 的打包版本来按需静态内容（JS、CSS、图像、HTML），因此我们可以使用 PhantomJS 针对 HTTP 托管环境运行单元测试。

但是，Jetty 现在是 8.1.3 版本*，*我们不再需要这种包装（它解决了一个现在没有实际意义的不同问题），所以我想更新为直接使用 Jetty 8.1.3。

首先，我下载了整个 Jetty 发行版，它的大小约为 40 MB。这适用于 Ant，使用“start.jar”......但我真的不想到处推送那些不必要的 JAR。

因此，我从[Maven](http://repo2.maven.org/maven2/org/eclipse/jetty/aggregate/jetty-server/8.1.3.v20120416/)存储库下载了聚合的“jetty-server-8.1.3.v20120416.jar”（最新） ，*但*我似乎无法像使用“start.jar”那样使用 Ant 的那个 JAR，例如“java -jar jetty-server-8.1.3.v20120416.jar 选项=服务器”

Jetty 文档既糟糕又缺失（404）。啊!

# 实际问题

我该怎么处理这个聚合的“jetty-server”JAR？我应该指向一个特定的类而不是整个 JAR 吗？

...

**相关问题：** [Jetty 提供静态内容所需的最少文件集？](https://stackoverflow.com/questions/10557427/minimum-set-of-files-needed-from-jetty-to-serve-static-content)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:30:42.327

您将其用作 jetty 嵌入式使用的依赖项。

[http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)

它不适合与 start.jar 一起使用，这是一种将适合启动码头的类路径编织在一起的机制，而不是作为通用 jar 启动器。

# google-sheets - Google 电子表格时间驱动的事件不会触发

> ID：10555871
> 
> 赞同：2
> 
> 时间：2012-05-11T17:20:06.677
> 
> 标签：google-sheets, google-apps-script

你好，Stack Overflow 上的好人。

我编写了一个小脚本，它从电子表格中提取报价并通过电子邮件将其发送给用户。这个想法是，脚本每天运行一次，提取电子表格中的下一个报价并将其发送到电子邮件地址。

脚本如下所示：

```
function sendEmails() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 2;  // First row of data to process
  var numRows = 1000;   // Number of rows to process
  var dataRange = sheet.getRange(startRow, 2, numRows, 3);
  var data = dataRange.getValues();
  for (i in data) {
    var row = data[i];
    if(row[2]=="yes") { 
      continue;
    }
    var emailAddress = "myemail@email.com";     // email to send to 
    var message = '"'+row[0]+'"'+"\n\n"+"- "+row[1];       // Second column
    startRow = parseInt(startRow)+parseInt(i);
    var subject = "";
    MailApp.sendEmail(emailAddress, subject, message);  
    sheet.getRange(startRow,4).setValue("yes");
    SpreadsheetApp.flush();
    break;
  }
} 
```

当我手动运行该脚本时，它运行良好。

现在我添加了一个如下所示的脚本触发器：

发送电子邮件 | 时间驱动 | 日间计时器 | 晚上 7 点到 8 点

不幸的是，该函数没有被执行，报价也没有被发送。

我在理解时间驱动触发器方面也有一点问题。“晚上 7 点到 8 点”是什么意思？在这两个小时之间随机一次？

仅当我不必登录 Google Docs 时，该脚本才有意义。也许我在这里完全误解了一些东西......脚本只有在我登录到谷歌文档时才有效吗？（但即使我是，到目前为止，脚本也不会使用时间驱动触发器执行）。

我非常感谢您对此的想法。莫里茨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:45:16.203

当您从计时器/事件运行脚本时，没有“ActiveSpreadsheet”。而不是使用 .getActiveSpreadsheet() 使用 .openById()

您不需要在 Google Docs 中（甚至根本不需要经过身份验证），您的脚本触发器也能成功运行。

此外，使用即时通知脚本失败会有所帮助（尤其是在调试时）。在您设置计时器的位置，单击通知链接进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:51:05.257

除了来自 mzimmerman 的回答

> 我在理解时间驱动触发器方面也有一点问题。“晚上 7 点到 8 点”是什么意思？这意味着您的脚本将在晚上 7 点到晚上 8 点之间执行，但根据我的观察，它会在晚上 7 点之后执行。

# c++ - 断言（指针）引发分段违规

> ID：10555872
> 
> 赞同：1
> 
> 时间：2012-05-11T17:20:08.743
> 
> 标签：c++, crash, segmentation-fault

在检查指针是否为 0 时，我遇到了这个烦人的分段错误。这是有问题的代码：

```
bool egammaMVACalib::checkTree()
{
   // Not a TChain
   cout << "a" << endl;
   assert(m_tree);      // crash on line 751 (this one)
   cout << "B" << endl; 
```

`m_tree`是`egammaMVACalib`类型的数据成员，`TTree*`所以我真的不明白为什么`assert(m_tree)`会引发分段违规。这是堆栈跟踪的输出

```
a
19:07:25 30574 Wrk-0.9 | *** Break ***: segmentation violation

===========================================================
There was a crash.
This is the entire stack trace of all threads:
===========================================================
#0  0x000000361869a4d5 in waitpid () from /lib64/libc.so.6
#1  0x000000361863c481 in do_system () from /lib64/libc.so.6
#2  0x00002ac5099cb322 in TUnixSystem::StackTrace() ()
    from /usr/local/proof/root/lib/libCore.so
#3  0x00002ac5099c7fea in TUnixSystem::DispatchSignals(ESignals) ()
    from /usr/local/proof/root/lib/libCore.so
#4  <signal handler called>
#5  egammaMVACalib::checkTree (this=0x0) at ../Root/egammaMVACalib.cxx:751
#6  0x00002ac5117e5563 in egammaMVACalib::LoadVariables (this=0x1, index=0)
    at ../Root/egammaMVACalib.cxx:492 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T17:24:10.050

如果您查看第 5 帧，您的`this`指针为空。这意味着问题从那里开始。断言中的 Seg 错误仅仅是对它的反作用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:25:23.197

线索在这里：

```
#5  egammaMVACalib::checkTree (this=0x0) at ../Root/egammaMVACalib.cxx:751 
```

this=0 表示您的对象为空

# android - 为什么使用 InputStream 从 .txt 读取时得到问号而不是符号？

> ID：10555873
> 
> 赞同：1
> 
> 时间：2012-05-11T17:20:08.967
> 
> 标签：android, character, inputstream

我知道这一定很明显，但找不到答案。

我应该怎么做才能获得正确的字符，例如“，'等......？

这是我正在使用的方法，

```
public void read(Context context) {

        InputStream inputStream = context.getResources().openRawResource(
                R.raw.puzzles);
        Scanner scanner = new Scanner(inputStream);
        scanner.useDelimiter(PATTERN);
        for (int i = 0; i < 70; i++) {
            ids[i] = scanner.next();
            titles[i] = scanner.next();
            questions[i] = scanner.next();
            answers[i] = scanner.next();
        }

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:06:50.127

经过几天的研究，我终于找到了答案。

首先，我从 InputStream 创建了一个 BufferedReader 用于字符读取而不是原始字节读取。

最重要的是，我使用带有 charSetName 的构造函数实例化了 InputStream。

如果您在记事本中转到“另存为”，您可以选择您的编码。

最后我在[这里](http://docs.oracle.com/javase/1.3/docs/guide/intl/encoding.doc.html)找到了支持的编码。

NotePad 中的默认值似乎是 ANSI，似乎不受支持，因此我对其进行了更改并将我的 .txt 文件另存为 UTF8。

这是代码：

```
public void read(Context context) {

        InputStream inputStream = context.getResources().openRawResource(
                R.raw.puzzles);

        BufferedReader bufferedReader = null;
        try {
            bufferedReader = new BufferedReader(new InputStreamReader(
                    inputStream, "UTF8"));
        } catch (UnsupportedEncodingException e1) {
            e1.printStackTrace();
        }

        Puzzle p = null;

        Scanner scanner = new Scanner(bufferedReader);
        scanner.useDelimiter(TOKEN);
        // Skips the first strange char
        scanner.next();
        while (scanner.hasNext()) {

            p = new Puzzle();
            p.setId(scanner.next());
            p.setTitle(scanner.next());
            p.setQuestion(scanner.next());
            p.setAnswer(scanner.next());
            puzzles.add(p);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:29:27.070

默认情况下，Scanner 对象似乎只识别字母和数字......尝试一种不使用扫描仪的方法，例如这个问题的答案：[Android read text raw resource file](https://stackoverflow.com/q/4087674/1267661)

并使用 String.indexOf() 或 TextUtils.StringSplitter 或任何类似的东西来读取每一行并解析令牌之间的真实字符串。

您可能希望使用 while 循环来读取数据，直到文件末尾，而不是使用固定数字（在您的情况下为 70）用于可能具有更多或更少数据的未来拼图文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:37:28.260

尝试使用`Scanner`传入字符集的实例，即 `new Scanner (InputStream src, String charsetName)`

高温高压

# php - Box 2.0 API 原谅暂停响应

> ID：10555875
> 
> 赞同：1
> 
> 时间：2012-05-11T17:20:35.380
> 
> 标签：php, curl, box-api

我是 Box API 的新手，尤其是 Box API 2.0。经过几个小时的处理我的 cURL 调用和所有其余代码的扭结后，我终于把一切都理顺了。然后我发出的下一个调用返回了一个 HTML 响应，上面写着 -

Box 请原谅 Pause Your Box 帐户暂时关闭——但你不应该这样做——因为我们很快就会启动并运行。感谢您的耐心……感谢您成为 Box 中最重要的部分。

已经一个多小时了，我仍然收到这个响应，我试着等着看这是否是我的某种限制问题，但自从我开始工作以来，我只调用了 API 大约 50 次左右 3- 4小时前。有什么想法/帮助吗？

```
$url = "https://api.box.com/2.0/folders/0";
$headers[] = "Authorization: BoxAuth api_key=$key,auth_token=$token";
//curl https://api.box.com/2.0/folders/FOLDER_ID \
//-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN"

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTP_VERSION, "CURL_HTTP_VERSION_1_1");
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$data = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:28:50.477

结果是这样的。由于 Box 期望标头中的授权参数的方式，我调用了错误的 API。调用 Box API 的正确方法如下：

```
 $key = $box["API_Key"];
    $token = $box["Auth_Token"];
    $url = "https://api.box.com/2.0/folders/" . "0";
    $headers[] = "Authorization: BoxAuth api_key=$key&auth_token=$token";

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTP_VERSION, "CURL_HTTP_VERSION_1_1");
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLINFO_HEADER, true);
    curl_setopt($ch, CURLINFO_HEADER_OUT, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $data = curl_exec($ch); 
```

# iphone - 在滚动时有效地调整 UITableViewCell 的大小

> ID：10555876
> 
> 赞同：3
> 
> 时间：2012-05-11T17:20:41.533
> 
> 标签：iphone, ios, uitableview, real-time

**大概的概念**

我希望在用户滚动列表时动态调整 UITableViewCells 的大小，也就是说，当项目到达列表底部时，它们的大小会变大。

**注意事项**

这是一个需要在调用时每秒刷新多次的过程：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

因此，采用这种`UITableView::ReloadData`方法来调用以下方法是不切实际的：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

因为这将需要重新加载大量额外数据并极大地降低系统速度。

**需求**

*   我将在屏幕上显示大约 10 个项目。
*   整个列表可能有多达 100 个极端案例的项目。
*   系统需要平滑滚动。
*   项目需要随着列表滚动而实时平滑地扩展和收缩。

**常识**

*   与包含静态项目的列表相比，这肯定会对性能产生一些影响。

*   有数百个线程处理“将 cel 调整为文本长度”的简单情况，这不是我需要的，因为与每秒很多周期相比，这是一次性的事情。

**可能的方法**

*   子类`UITableView`。
*   有一个静态`UITableView`嵌套在`UIScrollView`.
*   从头开始创建一个项目列表系统，根本不使用`UIScrollView`。

**废弃的方法**

*   每个周期调用`UITableView::ReloadData`一次，以便`heightForRowAtIndexPath`: 被调用。

**至今**

我已经编写了一个模块来计算项目大小的数学。

**结论**

我正在寻找解决这个问题的最快方法，但`UITableView`如果需要，我会在万不得已时重新编写自己的代码。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:51:47.943

经过大量测试后，`UITableView`我还没有找到一种有效地做到这一点的方法。似乎`UITableView`可以以不允许动态单元格调整大小的方式进行优化。出于这个原因，制作自定义列表系统似乎是唯一的选择。我已经开始在`UIScrollView`.

大部分基本功能已经完成，但该项目目前处于搁置状态，因为我目前有一个更重要的系统要开发。如果你有兴趣参与这个项目，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:36:31.633

也许在 uitableview 委托数据表中查看 tableView:willDisplayCell:forRowAtIndexPath。

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)

我有一个类似的问题，我需要先加载表格单元格，然后在加载或重新加载表格后对每个单元格执行不同的操作，这可能是您正在寻找的。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:22:38.153

您不需要调用 -[UITableView reloadData] 来更新单元格的几何形状。您可以通过调用使 UITableView 重新计算单元格的几何形状：

```
// force geometry update
[tableView beginUpdates];
[tableView endUpdates]; 
```

这在[WWDC 2010 演讲中提到 - Mastering Tableviews](https://developer.apple.com/videos/wwdc/2010/?id=128)

# java - Java中的Hashmap具有“[”“]”这些符号

> ID：10555877
> 
> 赞同：-5
> 
> 时间：2012-05-11T17:20:42.927
> 
> 标签：java

我正在迭代hashmap，但是迭代时这些奇怪的括号[]在那里，任何人都可以指导我如何摆脱它。

谢谢

```
 Iterator it = map.entrySet().iterator();

            while (it.hasNext()) {

                Map.Entry pairs = (Map.Entry)it.next();                 
                System.out.println(pairs.getKey() + " = " + pairs.getValue());                      
                Log.v("Pairs get key", pairs.getKey().toString());
                Log.v("Pairs get value", pairs.getValue().toString());
                mysection.add(pairs.getKey().toString());
                temp.add(pairs.getValue().toString());

                it.remove(); // avoids a ConcurrentModificationException

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:43:23.880

我运行了代码。

```
 Map<String, String> map = new HashMap<String, String>();
    map.put("AAAA", "11111");
    map.put("BBBB", "22222");
    map.put("CCCC", "33333");

    Iterator<Entry<String,String>> it = map.entrySet().iterator();

    while (it.hasNext()) {
        Entry<String, String> pairs = it.next();                 
        System.out.println(pairs.getKey() + " = " + pairs.getValue());                      
        System.out.println("Pairs get key: "+pairs.getKey().toString());
        System.out.println("Pairs get value: "+pairs.getValue().toString());
        it.remove(); // avoids a ConcurrentModificationException
    } 
```

输出是

```
AAAA = 11111
Pairs get key: AAAA
Pairs get value: 11111
BBBB = 22222
Pairs get key: BBBB
Pairs get value: 22222
CCCC = 33333
Pairs get key: CCCC
Pairs get value: 33333 
```

唯一的区别是我不知道你在地图上放了什么数据。如果您放置一个 List ，它将输出 [] 符号，因为 java 将打印其 toString() 方法，这就是列表的显示方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:34:57.130

我将忽略代码不使用泛型的部分以及您实际上没有给我们“意外”输出的部分，以便我们能够找出问题所在，并列出三种情况你可以得到“这些奇怪的符号”：

1.  地图的键或值是某种类型的集合。然后集合的`toString`方法将打印其内容，例如`[1]`，或`[1,2,3]`。
2.  地图的键或值是一些东西的数组。Then`Object`的`toString`方法将打印对象类型和地址，例如`[Ljava.lang.String;@19821f`是一个字符串数组。
3.  映射的键或值是`String`带有`[]`s 的 s，或者是其`toString`方法打印`[]`s 的某种其他类型的对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T08:38:44.637

好的，我得到了答案，问题是地图显示到控制台时会显示 和 [] 符号。因此，为了避免它使用另一种实现来迭代 map 而不是这个。

# android - 摩托罗拉错误为什么这不是居中

> ID：10555879
> 
> 赞同：0
> 
> 时间：2012-05-11T17:20:51.463
> 
> 标签：android, android-layout

我要疯了......为什么这个中心我已经尝试了几乎所有的组合居中选项，但是该死的文本和密码字段不会居中！它在 MyTouch 4G 上运行良好，但在我的摩托罗拉手机上，它的行为都是这样的......

我用基本调用调用对话框

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.preference_dialog);
dialog.setTitle(getResources().getText(R.string.stringLoginTitle));
dialog.setCancelable(true);
dialog.show(); 
```

这是 Eclispe 中的对话框布局

![在此处输入图像描述](../Images/63e97da324e1deeadb7049487d23fd7a.png)

这是显示为对话框时的样子。

![在此处输入图像描述](../Images/5538b336cba2b7f888411c82e2b676be.png)

对话框布局 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
android:layout_centerHorizontal="true"
android:gravity="center" android:layout_gravity="center">

<TextView
    android:id="@+id/tv_LoginTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="@string/stringLoginPassword" 
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:gravity="center" />

<EditText
    android:id="@+id/et_AdminPassword"
    android:layout_width="120dip"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/tv_LoginTitle"
    android:inputType="textPassword" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/btn_AdminOkay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/et_AdminPassword"
    android:layout_alignLeft="@+id/et_AdminPassword"
    android:text="Login" />

<Button
    android:id="@+id/btn_AdminCancel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/et_AdminPassword"
    android:layout_alignRight="@+id/et_AdminPassword"
    android:text="Cancel" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:35:53.913

我在我所有的摩托罗拉手机 X2、Razr 上都看到了这一点……似乎绝对是摩托罗拉风格中的一个错误。

我通过创建自己的样式并从我的 \android-sdk\platforms\android-10\data\res\drawable-hdpi 复制 panel_background 并将其放置在我的 drawable 中来修复它。如果我使用@android:drawable/panel_background 引用它，Eclipse 将无法编译。

样式.xml

```
<style name="Theme.CustomDialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowBackground">@drawable/panel_background</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
</style> 
```

然后只需调用添加了 Theme 参数的对话框

```
Dialog dialog = new Dialog(this, R.style.Theme_CustomDialog); 
```

已修复摩托罗拉问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:39:40.253

如果我必须制作相同的布局，我会使用线性布局......

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:orientation="vertical"
                android:gravity="center" android:layout_gravity="center">

    <TextView
            android:id="@+id/tv_LoginTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:text="@string/stringLoginPassword" 
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:gravity="center" />

    <EditText
            android:id="@+id/et_AdminPassword"
            android:layout_width="120dip"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:inputType="textPassword" >

        <requestFocus />
    </EditText>
    <LinearLayout 
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal"
                  android:gravity="center" android:layout_gravity="center">
    <Button
            android:id="@+id/btn_AdminOkay"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Login" />

    <Button
            android:id="@+id/btn_AdminCancel"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Cancel" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T18:02:59.553

RelativeLayout 有一个 XML 属性 android;layout_alignCenter，您可以在第一个 textview 上尝试，然后将其余部分与 textview 对齐。

# javascript - 循环中的异步 SQL 插入

> ID：10555887
> 
> 赞同：2
> 
> 时间：2012-05-11T17:21:10.763
> 
> 标签：javascript, sql, sqlite, asynchronous, lawnchair

我在将行插入 SQL 数据库时遇到问题。我想将一组对象转换为 javascript 中的 SQL 表。

以下代码仅添加数组的第一个对象。我已经尝试了在 stackoverflow 和其他地方可以找到的所有内容，但无法使其正常工作。

任何帮助，将不胜感激。谢谢。

```
 for (var i = 0; i < arr.length; i++) {
            db.save({key:i+"", value:arr[i]}, function(e){

            });
        } 
```

更新 1：我已将其更改为 mathec 的示例，并稍微缩小了问题范围。

插入的行数取决于插入对象的大小。所以它与处理每个对象所需的时间有关。

我该如何解决这个问题？谢谢。

更新 2：

我在下面采纳了 Robert Young 的建议，并附上了一个独立的例子。

下面的示例仅插入前 5 个元素。如果我删除了测试键中的一些单词文本，所以它只说“单词”一次，那么就会插入 10 个元素。所以现在我确定它与处理每个对象所需的时间有关。

```
<html>
    <head>
        <script src="jquery.js"></script>
        <script src="lawnchair.js"></script>
        <script type='text/javascript'>

            var db = "";
            var arr = [];

            arr.push({name:"a1", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a2", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a3", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a4", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a5", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a6", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a7", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a8", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a9", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a10", test:"word word word word word word word word word word word word word word "});
            arr.push({name:"a11", test:"word word word word word word word word word word word word word word "});

            $(function() {
                db = new Lawnchair({table:'t50'}, function(e){
                    for ( i = 0; i < arr.length; i++) {
                        (function(i) {
                            add_row(i);
                        }(i));
                    }
                });
            });

            function add_row(i) {
                db.save({key:i+"", value:arr[i]}, function(e){

                });
            }

        </script>
    </head>
    <body>

    </body>
</html> 
```

更新 3：我使用了罗伯特建议的代码，并提出了以下与三个小元素一起使用的代码。所以我改变了第一个元素，使它比其他元素更大来测试它。第一个元素没有添加，最后两个是。处理数组有时间限制吗？

```
<html>
    <head>
        <script src="jquery.js"></script>
        <script src="lawnchair.js"></script>
        <script type='text/javascript'>

            var arr = [];
            var db = "";

            $(function() {
                db = new Lawnchair({table:'t51'}, function(e){
                    arr=[{key:"k1", value:"v1\. Because the contents of this element are larger than the others it will not be added for some reason. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "}
                    ,{key:"k2", value:"v2"}
                    ,{key:"k3", value:"v3"}]

                    db.batch(arr, function () {
                        db.all(function (recs) { for (r in recs) {console.log(recs[r].key +"| "+ recs[r].value) } });
                    });
                });

            });

        </script>
    </head>
    <body>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:28:29.190

我犯了几次棘手的错误:-)。如果在循环内调用回调函数，它将被异步调用。因此，您的循环将一直执行到最后。解决这个问题的一种方法是围绕当前 i 值形成一个闭包，这样当回调函数执行时，它就会绑定到右边的 i。像这样的东西：

```
function doSomething(i) {
  console.log(i)
}

var i, len;

for ( i = 0; i < 10; i++) {
  (function(i) {
    doSomething(i);
  }(i));
} 
```

循环内的函数将立即执行，但 i 值将保留在范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:51:04.537

首先，因为这是持久化存储，如果你一遍又一遍地运行它，你可能每次都得到不同的结果，因为你没有初始化持久化存储。最好添加一个`db.nuke()`以确保您从一张白纸开始，至少在您解决任何错误之前。

关于异步存储的主要知识是，仅仅因为函数返回并不意味着数据实际上已经存储。所以如果你跑

```
db = new Lawnchair(function(db){
    db.save({key:"value"})
    db.get("foo", function (rec) { console.log(rec.value) });
}); 
```

它可能有效，也可能无效，因为当您调用 db.get 时，可能会或可能不会存储该值。

为此，我们需要确保在调用 db.get 之前存储了该值。做到这一点的方法是使用回调——如果你将两个参数传递给 db.save，那么一旦值被存储，它将调用第二个参数。所以

```
db = new Lawnchair(function(db){
    db.save({key:"foo", value:"bar"}, function () {
        db.get("foo", function (rec) { console.log(rec.value) });
    });
}); 
```

工作正常。

当您尝试存储多个值时，这会变得很困难，因为您希望确保所有这些值都已存储。幸运的是，有一个功能`batch`：

```
db = new Lawnchair(function(db){
    arr=[{key:"k1", value:"v1"},{key:"k2", value:"v2"},{key:"k3", value:"v3"}];
    db.batch(arr, function () {
        db.all(function (recs) { for (r in recs) {console.log(recs[r].key) } });
    });
}); 
```

应该输出

```
k1
k2
k3 
```

尝试一下，看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T04:35:59.757

很难缩小问题的解决方案，因为我们不知道您如何将数据保存到数据库，可能是 AJAX 请求？但我认为问题在于异步保存数组的每一行的整个逻辑，因为代码不等待保存一行来开始另一行，所以发生了某种竞争条件，一些行保存在同一个“id”（自动增量字段）中，这解释了为什么只保存了一些行.

我的建议是将整个数组发送到服务器，然后保存每一行。

当然，您可以对每一行进行操作，首先锁定 id 然后保存数据，但这是一个坏主意，因为您需要为每一行往返于服务器和数据库，从而使对服务器的请求量翻倍。

希望能帮助到你！

PD +1 到@mathec 回答指出带有回调问题的循环变量！

# c++ - 为什么我的可执行文件的 .dynstr 包含来自静态链接库的符号？

> ID：10555888
> 
> 赞同：2
> 
> 时间：2012-05-11T17:21:16.497
> 
> 标签：c++, g++, static-linking

我正在构建一个 C++ 可执行文件。我正在静态链接我正在使用的几个 C 和 C++ 库，包括一个自定义库。（但是，我并没有静态链接我正在使用的每个库。）

即使考虑到这一点，可执行文件似乎也异常大。我使用`objdump -h`了 ，它告诉我我使用的空间`.dynstr`比我预期的要多得多。我已经编译`-Os`并运行了`strip`，但是当我运行时

```
$ readelf -p .dynstr slamshift 
```

我收到很多条目，例如

```
 [ 13588]  _ZN3yuu6windowC2Ev
  [ 1359b]  _ZTSN3yuu7gfx_ctxE
  [ 135ae]  _ZN4YAML7Scanner11ScanFlowEndEv
  [ 135ce]  __glewVertexFormatNV 
```

对于我静态链接的库中的符号（我自己的库、yaml-cpp 和 GLEW）。

为什么这些符号出现在我的可执行文件中？如果我已经静态链接了所涉及的库，那么符号名称不应该是不必要的吗？

我正在使用 Ubuntu 12.04、GCC 4.6.3 和 CMake 及其默认设置进行构建（如果相关）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T03:40:28.207

> 为什么这些符号出现在我的可执行文件中？

这些符号从可执行文件中导出并出现在动态符号表中的原因只有两个。

1.  您将可执行文件与`--export-dynamic`（aka `-E`）链接器标志链接在一起，或者
2.  参与链接的其他一些共享库引用了这些符号。

如果你在做#1，答案很简单：不要这样做。

如果您因为 #2 而导出了符号，那么您真的希望导出符号，否则代码可能会在其他地方失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:49:20.730

一个鲜为人知的事实是，ELF 可执行文件可以使用 dl_open 和朋友作为动态对象打开。为此，他们需要有符号导出。我认为这就是这里正在发生的事情。

您可以尝试使用链接器进行最终程序链接`--exclude-libs ALL`。它看起来像`-Wl,--exclude-libs ALL`在 gcc 命令行上。
*更新：这导致符号仍然存在，但标记为隐藏。*

你也可以试试`-Wl,--exclude-all-symbols`。
*更新：我错了。它仅适用于 PE 目标。*

我试过了，它奏效了：
`gcc -static -Wl,-s export-test.c`

# tfs - 在版本号中使用 TFS 变更集

> ID：10555890
> 
> 赞同：4
> 
> 时间：2012-05-11T17:21:24.303
> 
> 标签：tfs, build, versioning, changeset

我已经看到“tf changeset /latest /i”被引用为获取最新变更集版本号以在 msbuild 版本号中使用的答案，但找不到有关放置位置的任何进一步信息？我正在使用 VS2010 和 TFS2010 并尝试使用变更集而不是版本号。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T23:10:28.577

如果您使用的是 MSBuild，请查看我的[博客文章](http://www.richard-banks.org/2007/07/versioning-builds-with-tfs-and-msbuild.html)，了解如何操作（TFS2008 但适用于 2010）。

如果您使用的是工作流程，那么您需要[这篇博文](http://www.richard-banks.org/2010/07/how-to-versioning-builds-with-tfs-2010.html)。

希望有帮助:-)

# windows-phone-7 - Windows phone 鼠标事件和多点触控的区别

> ID：10555892
> 
> 赞同：0
> 
> 时间：2012-05-11T17:21:35.870
> 
> 标签：windows-phone-7, windows-phone-7.1, xna-4.0

我没有windows phone，所以我只知道windows phone 模拟器。

我一直在使用鼠标单击屏幕并且工作正常......但这仍然可以在真实设备上工作吗？

我的意思是在真实设备中使用多点触控或鼠标事件进行简单点击有区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T17:31:58.010

否。如果手势在模拟器上有效，则相同的手势将在手机上有效。话虽如此，我还是强烈建议在手机上测试该应用程序。

# ruby - Thread.exclusive 不采用“范围”参数是否有合理的原因？

> ID：10555897
> 
> 赞同：1
> 
> 时间：2012-05-11T17:21:58.290
> 
> 标签：ruby, multithreading, thread-safety

如果要锁定实例上的方法，则必须`Mutex`为每个实例和方法创建一个：

```
class Foo
  def initialize
    @blue_mutex = Mutex.new
    @red_mutex = Mutex.new
  end

  def blue
    @blue || @blue_mutex.synchronize do
      @blue ||= Blue.new
    end
  end

  def red_mutex
    @red || @red_mutex.synchronize do
      @red ||= Red.new
    end
  end
end 
```

接受参数是否存在逻辑错误`Thread.exclusive`？

```
class Foo
  def blue
    @blue || Thread.exclusive("#{object_id}/blue") do
      @blue ||= Blue.new
    end
  end

  def red
    @red || Thread.exclusive("#{object_id}/red") do
      @red ||= Red.new
    end
  end
end 
```

`Thread.exclusive`如果可以只接受一个定义排他性范围的参数，为什么要创建互斥锁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T00:00:52.027

简短的回答是 API 可以按照您描述的方式完成。事实上，这就是[Java](https://stackoverflow.com/questions/1898374/does-the-jvm-create-a-mutex-for-every-object-in-order-to-implement-the-synchron)通过让您锁定任意对象所做的事情。它必须耍花招，因为锁的跟踪会占用对象本身的一些保留空间。此外，当对象被锁定并成为竞争对象时，必须创建一个真正的互斥体，这会占用更多空间。但希望您的代码没有被锁定和解锁的对象乱扔垃圾。我的猜测是 Ruby 的创建者不想让每个对象都负担这些额外的功能，而这些功能只会不经常使用。

我在上面假设当您说“笨拙”时，您指的是代码的可读性。如果您担心性能，我怀疑会有很大差异。在幕后，任何一种方法都可以使用相同的、非常有效的技术。这只是在每个对象上存储薄锁的额外内存的问题。[我在这里](https://stackoverflow.com/questions/3652056/how-efficient-is-locking-an-unlocked-mutex-how-much-does-a-mutex-costs)发现了一些有趣的细节

# php - 我怎样才能让一些命名空间仅在开发版本中可用？

> ID：10555901
> 
> 赞同：0
> 
> 时间：2012-05-11T17:22:27.410
> 
> 标签：php, zend-framework

我正在尝试使用一些开发帮助程序代码设置我的 Zend Framework 项目。但是我希望在我们的测试环境中使用该代码来引发错误（也会在生产中引发错误，但它们都应该在测试中处理）。

我正在研究的策略是将所有开发帮助程序代码放在 Zend 中的特定名称空间中，该名称空间不包含在测试或生产构建中。

命名空间是**Dev_**

这是我在 application.ini 中尝试执行此操作的方式：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
autoloaderNamespaces[] = "Events_"

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1
autoloaderNamespaces[] = "Dev_" 
```

问题是，像这样，应用程序似乎忽略了“Events_”命名空间。我试过删除`autoloaderNamespaces[] = "Dev_"`，然后它再次识别“Events_”。

我的理解是，我应该能够以这种方式添加任意数量的自定义命名空间。我怎样才能让这个设置忽略开发版本之外的**Dev_**命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:24:56.287

尝试将两个命名空间都添加到开发块中：

```
[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1
autoloaderNamespaces[] = "Events_"
autoloaderNamespaces[] = "Dev_" 
```

目前，您正在覆盖在生产中设置的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T15:12:39.277

我认为这可能是可行的，`autoloaderNamespaces.events = "Events_`以后不会重写。`autoloaderNamespaces.dev = "Dev_"`- [] 只是方便 IMO

# javascript - 动态改变正文内容

> ID：10555902
> 
> 赞同：0
> 
> 时间：2012-05-11T17:22:30.187
> 
> 标签：javascript, html, css, document-body

单击链接时如何动态更改 html 页面的正文内容？

所以我有 3 个看起来像这样的 html 页面：

```
<li><a id="homeContainer" href="#">Home</a></li>
<li><a id="testContainer" href='#'>test</a></li>
<li><a id="pageContainer" href="#">page</a></li> 
```

我的分区：

```
<div id='container'>
  </div> 
```

的JavaScript：

```
$( document ).ready( function() {
        $( '#testContainer' ).click( function() {
            $( '#container' ).load('test.html');
        }); 
```

如果我为所有页面设置一个单独的功能，这很好用。但是我怎样才能让javascript函数在函数中获取一个页面`load()`而不是硬编码呢？

[编辑]

我在这里删除了我的整个页面，包括 html、javascript 和 css： [jsfiddle](http://jsfiddle.net/hj9ry/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:17:20.550

我建议使用 jquery 来改变你的身体。包括 jquery 代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script> 
```

然后做这样的事情。

```
<a id='linkThatChangesTheWorld' href=''>Click Me</a>

<script>
$('#linkThatChangesTheWorld').click( function() {
    $('body').html('I want my body this way.');
});
</script> 
```

如果您只想将一些 html 添加到正文中，或者如果您有一个特定的 div 想要从其类中更改地址，您可以使用类似的功能`.prepend()`：`.append()`

如果你有：

```
<div class='mychange'></div> 
```

然后使用：

```
$('.mychange').append('<h2>Check it out</h2>'); 
```

此外，如果您想从另一个页面加载，您可以使用`.get()`.

```
$.get('myhtmlpage.html', function(data) {
    //do something after getting the result
    $('body').html($(data));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T00:37:42.890

尝试 ：

HTML

```
<li><a id="homeContainer" href="home.html">Home</a></li>
<li><a id="testContainer" href='test.html'>test</a></li>
<li><a id="pageContainer" href="page.html">page</a></li> 
```

Javascript

```
$(document).ready(function()
{
    $( 'li>a[id$="Container"]' ).click(function(event) 
    {
        event.preventDefault();
        var href = $(this).attr('href');
        alert("Loading " + href)
        $('#container').load(href);
        return false;
    });
}); 
```

* * *

编辑

使用 JQuery试试这个[JSFiddle](http://jsfiddle.net/Christophe/hj9ry/1/)

# opengl - 通过OpenGL编程访问整个显存

> ID：10555905
> 
> 赞同：5
> 
> 时间：2012-05-11T17:22:42.630
> 
> 标签：opengl, fbo, video-memory

如何通过OpenGL编程访问显卡的显存，具体是获取显存的所有内容？

我尝试了以下两种方法，但都失败了。附上它们，希望您能指出我的程序或我对显存结构的理解中的错误。提前致谢！

我的基本想法是继续在显存中分配一个未初始化的区域，直到探索完显存的所有内容。

(1) 在 main 函数中，我创建了一个带有双缓冲区的窗口（参见下面的代码）。

```
int main(int argc,char ** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA); // double buffers
    glutInitWindowPosition(0,0);
    glutInitWindowSize(windowWidth, windowHeight);
    glutCreateWindow("Hope to be successful!");
    glutDisplayFunc(myDisplay); // call back function "myDisplay"
    glutKeyboardFunc(keyboard);
    glutMainLoop();

    free(PixelData);
    return 0;
} 
```

然后，在“myDisplay”函数中，首先我调用 glReadPixels() 函数从后帧缓冲区中读出一个给定大小的像素矩形，将这些像素信息保存在一个数组“PixelData”中，最后将这些像素信息显示在通过调用 glDrawPixels() 函数来显示屏幕。执行此程序后，只出现一个黑色窗口。黑色是默认颜色。所以这意味着窗口不包含任何内容。然后我尝试从后面的帧缓冲区中读取其他区域，所有这些区域都没有包含任何内容。

从上面得出的结论是，后帧缓冲区中不包含任何内容。然而，这是不合理的，因为前缓冲区应该只包含当前屏幕内容/窗口，因此在屏幕底部打开和最小化的其他窗口应该在后帧缓冲区中有它们的内容，但后帧缓冲区是空的。那么这些窗口（由我在底部打开和最小化）存储在哪里？

我猜为我的程序分配的帧缓冲区（前后）只占整个视频内存的一小部分。因此，那些最小化的窗口内容应该存储在视频内存的其他位置。

过了一段时间，看了一篇OpenGL frameBuffer object (FBO)的介绍，里面有一句话：默认情况下，OpenGL使用framebuffer作为渲染目的地，完全由窗口系统创建和管理。此默认帧缓冲区称为窗口系统提供的帧缓冲区。这似乎验证了我的上述猜测。

(2) 然后我开始做FBO，希望FBO可以帮助我探索整个显存内容。

在下面的 main 函数中，我创建了一个 FBO 和 7 个渲染缓冲区对象（RBO），然后通过颜色附加点将这 7 个 RBO 附加到这个 FBO。

```
const int RBO_COUNT = 7; //how many renderBuffer objects are created to attach to the frameBuffer object

int main(int argc, char **argv)
{
    ....
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_ALPHA); // display mode
    ...  

    // create a framebuffer object
    glGenFramebuffers(1, &fboId);
    glBindFramebuffer(GL_FRAMEBUFFER, fboId);

    //Create several 7 render buffer objects and attach all of them to the FBO.
    glGenRenderbuffers(RBO_COUNT, rbo);
    for (int i = 0; i < RBO_COUNT; i++)
    {
        glBindRenderbuffer(GL_RENDERBUFFER, rbo[i]);
        glRenderbufferStorage(GL_RENDERBUFFER, PIXEL_FORMAT, SCREEN_WIDTH, SCREEN_HEIGHT);
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, colorAttach[i], GL_RENDERBUFFER, rbo[i]);
    }

   // check FBO status
   bool status = checkFramebufferStatus();
   if(!status) fboUsed = false;

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
    ...

    glutMainLoop(); /* Start GLUT event-processing loop */
    return 0;
} 
```

下面是我的显示回调函数的主要部分。它的作用是使用空格键控制读取哪个renderBuffer对象，然后将其内容显示在屏幕上。

```
void displayCB()
{
glBindFramebuffer(GL_FRAMEBUFFER, fboId);

//read this FBO attached RBO, save its content to fboContent
//"count" is a global variable, and is incremented by 1 (mod )every time pressing the space key of the keyboard.
glReadBuffer(colorAttach[count]); 
glReadPixels(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT, PIXEL_FORMAT, GL_UNSIGNED_BYTE, fboContent);

// back to normal window-system-provided framebuffer
glBindFramebuffer(GL_FRAMEBUFFER, 0); // unbind

// render to the default framebuffer //////////////////////////
glClear(GL_COLOR_BUFFER_BIT); // clear buffer
glClearColor(1, 0, 0, 1);
glDrawBuffer(GL_BACK);
glRasterPos2i(-1, -1);  
glDrawPixels(SCREEN_WIDTH, SCREEN_HEIGHT, PIXEL_FORMAT, GL_UNSIGNED_BYTE, fboContent);
glutSwapBuffers();
} 
```

最后的结果令人失望。所有 renderBuffer 对象的内容都是空的。我不知道这是什么原因，因为我认为所有这些 RBO 都从未初始化过，应该包含一些剩余的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T19:43:41.967

> 如何通过OpenGL编程访问显卡的显存，具体是获取显存的所有内容？

你不能这样做。无法通过 OpenGL 或 DirectX 访问原始视频内存。OpenGL只有各种“缓冲区”。唯一可以访问它的是视频驱动程序，它是windows平台专有的。空闲视频内存由视频驱动程序管理，视频内存中的某些对象可能只是暂时存在 - 驱动程序可以将副本存储在系统内存中，移动它们并在必要时将它们卸载到磁盘。所以你手动管理空闲内存的想法没有实际应用。

您应该能够直接在旧硬件上访问视频内存 - EGA/CGA/VGA，也可以在支持 VESA 的卡上，但是您将没有硬件加速，并且您需要运行类似于 MS-DOS 或具有内核/驱动程序访问权限。您可能能够在 Linux 上访问内存内容，但我认为这不会有帮助。

我建议忘记这个想法。

> 你的意思是OpenGL不能做这样的任务吗？实际上，我已经在这个问题上工作了将近两个月。

当你开始一个宏大的项目而没有先做足够的研究时，通常会发生类似的事情。我建议从这个经验中学习。在开始编码之前，请务必检查您的应用程序是否尚未编写，是否有任何实际应用程序，是否可以创建，是否需要该应用程序，以及您是否拥有足够的资源来创建它。

目前管理存储在显存中的对象是驱动程序的工作。

如果您想查看其他应用程序创建的对象，使用代理 dll、dll 注入或类似技术劫持 OpenGL api 并拦截相关调用可能会更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:32:47.090

> 如何通过OpenGL编程访问显卡的显存，具体是获取显存的所有内容？

与操作系统对话，而不是 OpenGL。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T19:38:21.803

目前尚不清楚您**为什么**要这样做，以及您的最终目的是什么，但在我看来，您正在尝试访问由 3rd 方应用程序生成的图形信息。

如果您尝试完成[FRAPS 所做](http://web.archive.org/web/20100629012528/http://www.ring3circus.com/gameprogramming/case-study-fraps/)的事情，请记住，它使用的技术与您尝试做的完全不同（一种更简单的技术）：它拦截对 OpenGL 和 DirectX 等图形库的调用。

# python - 如何使用 Python 将备用空行插入到表中？

> ID：10555909
> 
> 赞同：3
> 
> 时间：2012-05-11T17:23:13.710
> 
> 标签：python, csv, python-3.x

我有一个简单（但很大）的 CSV 表，我需要在该表的每一行/行之后插入一个空闲（=空白）行/行。以另一种方式解释它，我希望表格的每一第二行都是空白的（但不删除/覆盖任何原始行）。我尝试了很多方法，但这是我能想到的最好的方法：

```
with open(sys.argv[1], 'r') as input:
   readie=csv.reader(input, delimiter=',')
   with open("output.csv", 'wt', newline='') as output:
       outwriter=csv.writer(output, delimiter=',')
       for row in readie:
           row_plus = (row, \n)
           outwriter.writerow(row_plus) 
```

它似乎不起作用，因为它将表中的所有列都塞进一列并`(row, \n)`仅解释为两列。它也只是打印“\n”并且不承认我希望它插入另一个换行符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T17:32:19.960

怎么样：

```
 for row in readie:
     outwriter.writerow(row)
     outwriter.writerow([]) 
```

似乎做你想做的事。

# impersonation - 如何模拟 Citrix 桌面登录

> ID：10555913
> 
> 赞同：1
> 
> 时间：2012-05-11T17:23:41.650
> 
> 标签：impersonation, citrix

我正在尝试构建一个负载测试应用程序来测试与 citrix 发布的应用程序的通信。为此，我需要将 citrix 应用程序的多个实例作为不同的用户启动。但是，我似乎在任何地方都找不到任何好的文档或示例。

我试过的：

*   `PNAgent.exe using /Qlaunch "Published App"`作为模拟用户运行。这可行，但会启动一个版本的 PNAMain（管理实用程序），然后将其用于所有后续调用（因此 PNAgent 作为模拟用户打开，但移交给使用第一个用户的 PNAMain）
*   正在运行`WFCRun32 "Published App" /username:UN /password:PW`，但我收到一个错误，即损坏的 ICA 文件缺少`ApplicationServer section`.

我认为 WCFRun32 听起来很有希望，但我不知道如何正确设置参数。有没有人有任何以编程方式使用这些的经验，或者可以指出我更详细的文档。

# android - 如何从 PreferenceActivity 中的 PreferenceCategory 中删除标题栏

> ID：10555914
> 
> 赞同：2
> 
> 时间：2012-05-11T17:23:43.390
> 
> 标签：android, android-layout, android-preferences, preferenceactivity

这是我的首选项 xml 文件：myPreferences.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<PreferenceCategory>
    <EditTextPreference android:key="name" android:title="Name" android:inputType="text" android:defaultValue="" />
    <EditTextPreference android:key="email" android:title="Email" android:inputType="textEmailAddress" android:defaultValue="" />
    <EditTextPreference android:key="phone" android:title="Phone Number" android:inputType="phone" android:defaultValue="" />
    <EditTextPreference android:key="zipcode" android:title="Zip Code" android:inputType="number" android:defaultValue="" />
</PreferenceCategory>
</PreferenceScreen> 
```

这是我的 AndroidManifest.xml 中的首选项活动声明：

```
<activity
        android:name=".activities.MyPreferencesActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" /> 
```

而且，这是我之前尝试过应用于我的活动的一种风格：

```
 <activity
     android:name=".activities.MyPreferencesActivity"
     android:screenOrientation="portrait"
     android:theme="@android:style/PreferenceTheme" />

 <style name="PreferenceTheme">
     <item name="android:background">@drawable/background_preferences</item>
     <item name="android:windowNoTitle">true</item>
 </style> 
```

它不起作用。

然后，我尝试通过 myPreferencesActivity 的 onCreate 中的 java 代码进行操作：

```
 @Override
 protected void onCreate(Bundle savedInstanceState) {
     requestWindowFeature(Window.FEATURE_NO_TITLE);
     super.onCreate(savedInstanceState);
 addPreferencesFromResource(R.xml.myPreferences);
 } 
```

不工作。尝试将标题设置为可绘制对象。

```
 @Override
 protected void onCreate(Bundle savedInstanceState) {
     requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
     super.onCreate(savedInstanceState);
     addPreferencesFromResource(R.xml.preferences_profile);
     getWindow().setFeatureDrawableResource(Window.FEATURE_CUSTOM_TITLE, R.drawable.profile_banner);
 } 
```

不。不工作。

我所做的一切都只删除了偏好活动的标题栏，而不是偏好类别。

有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T17:58:12.617

如果您不想在一组首选项上方有一个标题栏，请不要使用 a `PreferenceCategory`，因为它没有任何用途，只需将您的所有首选项放入`PreferenceScreen`元素中：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <EditTextPreference android:key="name" android:title="Name" android:inputType="text" android:defaultValue="" />
    <EditTextPreference android:key="email" android:title="Email" android:inputType="textEmailAddress" android:defaultValue="" />
    <EditTextPreference android:key="phone" android:title="Phone Number" android:inputType="phone" android:defaultValue="" />
    <EditTextPreference android:key="zipcode" android:title="Zip Code" android:inputType="number" android:defaultValue="" />

</PreferenceScreen> 
```

高温高压

# c# - MVC3 字典未绑定到模型

> ID：10555917
> 
> 赞同：2
> 
> 时间：2012-05-11T17:23:55.793
> 
> 标签：c#, asp.net-mvc-3, dictionary

我有一个包含字典属性的模型。（这已经从一个更大的项目中提炼到这个例子中，我已经确认它仍然有同样的问题）

```
public class TestModel
{
    public IDictionary<string, string> Values { get; set; }

    public TestModel()
    {
        Values = new Dictionary<string, string>();
    }
} 
```

控制器

```
public class TestController : Controller
{
    public ActionResult Index()
    {
        TestModel model = new TestModel();
        model.Values.Add("foo", "bar");
        model.Values.Add("fizz", "buzz");
        model.Values.Add("hello", "world");

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(TestModel model)
    {
        // model.Values is null after post back here.
        return null; // I set a break point here to inspect 'model'
    }
} 
```

和一个视图

```
@using TestMVC.Models
@model TestModel
@using (Html.BeginForm())
{
    @Html.EditorFor(m => m.Values["foo"]);
    <br />
    @Html.EditorFor(m => m.Values["fizz"]);
    <br />
    @Html.EditorFor(m => m.Values["hello"]);
    <br />
    <input type="submit" value="submit" />
} 
```

这会像这样呈现给浏览器：

```
<input class="text-box single-line" id="Values_foo_" name="Values[foo]" type="text" value="bar" /> 
```

我遇到的问题是回发后模型上的字典为空。

*   我这样做对吗，还是有更好的方法？

我需要某种键值存储，因为我的表单上的字段是可变的，所以我不能使用 POCO 模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:20:35.547

阅读 Scott hanselman 关于该主题的博客文章以获取更多详细信息，但同时，为了解决您的问题，只需将您的视图替换为以下内容：

```
<input type="hidden" name="Values[0].Key" value="foo" />
<input type="text" name="Values[0].Value" value="bar" /> 
```

对所有部分重复相同的操作，也许将其放入 for 循环中，例如：

```
@for(i=0;i<Model.Values.Count;i++)
{
    @Html.Hidden("Values[@i].Key", @Model.Values.Keys[@i])
    @Html.TextBox("Values[@i].Value", @Model.Values.Values[@i])
} 
```

请注意，只有使用[OrderedDictionary才能通过索引访问键和值](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:54:28.687

Scott hanselman 展示了如何将模型绑定到字典

[http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

从博客引用

> 如果签名看起来像这样：
> 
> ```
> public ActionResult Blah(IDictionary<string, Company> stocks) {
>   // ...
> } 
> ```
> 
> 我们在 HTML 中给出了这个：
> 
> ```
> <input type="text" name="stocks[0].Key" value="MSFT" />
> <input type="text" name="stocks[0].Value.CompanyName" value="Microsoft Corporation" />
> <input type="text" name="stocks[0].Value.Industry" value="Computer Software" />
> <input type="text" name="stocks[1].Key" value="AAPL" />
> <input type="text" name="stocks[1].Value.CompanyName" value="Apple, Inc." />
> <input type="text" name="stocks[1].Value.Industry" value="Consumer Devices" /> 
> ```

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

```
@model Dictionary<string, string>

@for (int i = 0; i < 3; i++)
{    
  Html.EditorFor(m => m[i].Value)    
{ 
```

我认为它也可以按键工作，例如

```
Html.EditorFor(m => m.Values["foo"].Value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:29:13.197

如果您需要绑定字典，以便每个值都有一个 texbox 来编辑它，下面是使其工作的一种方法。影响 HTML 中 name 属性如何生成的真正重要部分是模型表达式，它确保模型绑定在回发时发生。此示例仅适用于 Dictionary。

链接的文章解释了使绑定工作的 HTML 语法，但它让 Razor 语法完成这一点相当神秘。此外，这篇文章的不同之处在于它们允许编辑键和值，并且使用整数索引，即使字典的键是字符串，而不是整数。因此，如果您尝试绑定字典，则在决定采用哪种方法之前，您确实需要首先评估您是否只希望值可编辑，或者键和值都可编辑，因为这些情况完全不同。

如果您需要绑定到一个复杂的对象，即字典，那么您应该能够为每个属性设置一个文本框，并在该属性中添加表达式，类似于文章。

[http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

```
 public class SomeVM
    {
        public Dictionary<string, string> Fields { get; set; }
    }

    public class HomeController : Controller
    {
        [HttpGet]
        public ViewResult Edit()
        {
            SomeVM vm = new SomeVM
            {
             Fields = new Dictionary<string, string>() {
                    { "Name1", "Value1"},
                    { "Name2", "Value2"}
                }
            };

            return View(vm);

        }

        [HttpPost]
        public ViewResult Edit(SomeVM vm) //Posted values in vm.Fields
        {
            return View();
        }
    } 
```

CSHTML：

**仅限值的编辑器**（当然，您可以添加 LabelFor 以根据键生成标签）：

```
@model MvcApplication2.Controllers.SomeVM

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>SomeVM</legend>

        @foreach(var kvpair in Model.Fields)
        {
            @Html.EditorFor(m => m.Fields[kvpair.Key])  //html: <input name="Fields[Name1]" …this is how the model binder knows during the post that this textbox value gets stuffed in a dictionary named “Fields”, either a parameter named Fields or a property of a parameter(in this example vm.Fields).
        }

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

**编辑两个键/值：**

```
 @{ var fields = Model.Fields.ToList(); }        

    @for (int i = 0; i < fields.Count; ++i) 
    {
        //It is important that the variable is named fields, to match the property name in the Post method's viewmodel.
        @Html.TextBoxFor(m => fields[i].Key)
        @Html.TextBoxFor(m => fields[i].Value)

        //generates using integers, even though the dictionary doesn't use integer keys,
        //it allows model binder to correlate the textbox for the key with the value textbox:            
        //<input name="fields[0].Key" ...
        //<input name="fields[0].Value" ...

        //You could even use javascript to allow user to add additional pairs on the fly, so long as the [0] index is incremented properly
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T20:58:14.810

正如@Blast_Dan 和@gprasant 所提到的，模型绑定器期望输入元素的 name 属性为 format `Property[index].Value`，其中`index`an`int`和`Value`是`KeyValuePair`类的属性之一。

不幸的是，`@Html.EditorFor`以错误的格式生成此值。我写了一个 HtmlHelper 扩展来将 name 属性转换为正确的格式：

```
public static IHtmlString DictionaryEditorFor<TModel, TProperty, TKey, TValue>(this HtmlHelper<TModel> Html, Expression<Func<TModel, TProperty>> expression, IDictionary<TKey, TValue> dictionary, DictionaryIndexRetrievalCounter<TKey, TValue> counter, string templateName, object additionalViewData)
{
    string hiddenKey = Html.HiddenFor(expression).ToHtmlString();
    string editorValue = Html.EditorFor(expression, templateName, additionalViewData).ToHtmlString();
    string expText = ExpressionHelper.GetExpressionText(expression);
    string indexText = expText.Substring(expText.IndexOf('[')).Replace("[", string.Empty).Replace("]", string.Empty);

    KeyValuePair<TKey, TValue> item = dictionary.SingleOrDefault(p => p.Key.ToString() == indexText);
    int index = counter.GetIndex(item.Key);

    string key = hiddenKey.Replace("[" + indexText + "]", "[" + index + "].Key").Replace("value=\"" + item.Value + "\"", "value=\"" + item.Key + "\"");

    string value = editorValue.Replace("[" + indexText + "]", "[" + index + "].Value");

    return new HtmlString(key + value);
} 
```

因为整数索引必须遵循以下规则：

1.  必须以 0 开头

2.  必须不间断（例如，您不能从 3 跳到 5）

我写了一个计数器类来为我处理获取整数索引：

```
public class DictionaryIndexRetrievalCounter<TKey, TValue>
{
    private IDictionary<TKey, TValue> _dictionary;
    private IList<TKey> _retrievedKeys;

    public DictionaryIndexRetrievalCounter(IDictionary<TKey, TValue> dictionary)
    {
        this._dictionary = dictionary;
        this._retrievedKeys = new List<TKey>();
    }

    public int GetIndex(TKey key)
    {
        if (!_retrievedKeys.Contains(key))
        {
            _retrievedKeys.Add(key);
        }

        return _retrievedKeys.IndexOf(key);
    }
} 
```

# javascript - jQuery Widget 相对于常规 JS 对象的优势？

> ID：10555918
> 
> 赞同：5
> 
> 时间：2012-05-11T17:24:03.597
> 
> 标签：javascript, jquery, jquery-ui, widget

*编辑：为了清楚起见，我不是在质疑 jQuery 的厉害之处。我到处都用它。我只是不明白使用小部件相对于利用 jQuery 功能的常规 js 对象的优势。*

我最近不得不在我正在开发的应用程序中使用一些 jQuery 小部件，我发现它们非常不直观/丑陋。似乎有很多约定要学习，它们并没有真正增加任何价值，而且语法不适应智能感知或轻松重构。

不要误会我的意思，我经常使用 jQuery，我讨厌没有它的生活，只是看不到小部件约定中的价值。我确定我错过了这一点，因为它们是如此普遍，所以请提示我。为什么人们创建 jQuery 小部件而不是常规的 js 对象？

过于简单的例子：

常规 Javascript 对象：

```
//instantiate & render
var foo = new MyDomain.MyObject('#mySpecialInput', options)
foo.render();

//assign to property
foo.value = 5;
//call method
foo.multiplyBy(2);
//bind event
foo.change(function(){
    alert('it changed');
} 
```

jQuery 小部件：

```
//instantiate & render
var $foo = $('#mySpecialInput');
$foo.myWidget(options);

//assign to property
$foo.myWidget('option', 'value', 5);
//call method
$foo.myWidget('multiplyBy', 2);
//bind event
$foo.bind('myWidgetChange', function(){
    alert('it changed');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:30:33.063

为了补充 Thinking Sites 的观点，使用 jQuery 小部件还提供了其他类似 OO 的功能（无需投资构建以纯 js 支持它所需的基础设施）

- 可扩展性
- 就地继承 - 允许从自身扩展。这允许模块化和高度可维护的代码
- 公共和私有方法的概念以提高代码的可读性，最好的部分是它保持链接，因为它返回 jQuery 对象
- 有很多预定义的方法来管理小部件的生命周期：创建，初始化和销毁

可以将 jQuery 小部件框架视为模仿 OO 类功能的工具。

> 它为构建具有一致 API 的复杂、有状态的插件提供了一个灵活的基础。它不仅适用于作为 jQuery UI 一部分的插件，而且适用于希望创建面向对象组件而不重新发明通用基础架构的开发人员的一般使用。-- [http://wiki.jqueryui.com/w/page/12138135/Widget%20factory](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:35:33.227

最重要的是 jQuery 小部件有助于为您的应用程序带来结构，如果没有它们，将很难维护。当然，它们还提供了很多有用的事件，例如`.bind()`，这些事件有时非常有用。经过一番谷歌搜索，我发现[这篇](http://blog.citrusbyte.com/2010/09/16/jquery-widgets-bringing-sanity/)关于 jQuery 小部件的文章更详细地介绍了它们的优点。

就个人而言，我更喜欢手动构建我的脚本（更多），但如果您不想这样做，jQuery 小部件可以提供帮助。

* * *

详细说明 jQuery 小部件如何添加结构的相关引用：

> ...它提供了在小部件结构之外很难维护的代码组织级别。它将代码从命令式（“执行此操作，然后执行其他操作，然后绑定到单击”）更改为声明式（“像扩展操作一样”）。这使您可以自由定义“扩展事物”的含义，而不会弄乱或更改应用程序的外层。不再有数百行长的 $(document).ready() 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:05:32.227

1.  代码组织和结构
2.  命名空间
3.  遗产
4.  适当的范围界定和关闭
5.  跨开发者可读性和通用架构
6.  用于访问常用项目的预定义属性

# html - 拒绝直接访问但允许常规 html

> ID：10555921
> 
> 赞同：1
> 
> 时间：2012-05-11T17:24:18.210
> 
> 标签：html, .htaccess, permissions

我`.htaccess`在`upload`目录中有以下内容：

```
order allow,deny
deny from all 
```

我想允许`<img src="upload/image.png" />`但得到禁止错误（403）。

如何拒绝直接访问但允许 html“包含”（常规 html）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:41:10.957

你需要打开 mod_rewrite，

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC]
RewriteRule \.(gif|jpg|js|css)$ - [F] 
```

请务必将“mydomain.com”替换为您自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:48:57.250

你不能（可靠地）。

无论是直接查看还是作为`<img>`标签查看，浏览器仍然会向 发出请求`http://yoursite.example.com/upload/image.png`，这两个请求对于服务器而言基本上是相同的。

现在在大多数浏览器中，来自`<img>`标签的请求将伴随一个`Referer:`HTTP 标头，您可以在 Apache 配置中使用它来过滤这些请求，但是：

*   这不会保护您的图像，任何试图获取图像的人都可以添加它们，例如从命令行：`curl -e 'http://my_referer.example.com' 'http://yoursite.example.com/upload/image.png'`
*   在人们通过网页查看图像后，如果他们在地址栏中键入 URL，则图像很可能是从浏览器缓存中提供的，并且无论您是否有任何服务器配置，它都会出现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:54:24.977

你想达到什么目的？您可以使用类似于此处所做的技术对图像进行base64编码并将它们放置在img标签的src属性中：http: [//www.greywyvern.com/code/php/binary2base64](http://www.greywyvern.com/code/php/binary2base64)

可能有更高级的方法来隐藏图像数据，但最终你无法阻止想要破解的人。

# cordova - 如何格式化 HTML 字符串

> ID：10555922
> 
> 赞同：0
> 
> 时间：2012-05-11T17:24:23.437
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我想要做的是格式化 HTML 文本，所以它会显示在行中。

`name`和`age`（文本）应该是粗体，并在行中正确格式化。我怎样才能做到这一点 ？

```
Ext.getCmp('ex').push({
    标题：“早安”，
    html: '姓名' + 框架 + ' 年龄 : '+ lname
});

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:00:40.573

它只是... HTML。因此，您将按照通常的方式进行操作：

```
Ext.getCmp('ex').push({
    title: 'Good Morning',
    html: '<div><b>name</b>: ' + frame + '</div><div><b>age</b>: ' + lname + '</div>'
}); 
```

为了提高代码的可读性，我通常创建一个数组然后`join`它：

```
Ext.getCmp('ex').push({
    title: 'Good Morning',
    html: [
        '<div>',
            '<b>name</b>: ' + frame,
        '</div>',
        '<div>',
            '<b>age</b>: ' + lname,
        '</div>'
    ].join('')
}); 
```

# php - ActiveCollab - 未能执行您的请求（原因 DBConnectError）

> ID：10555926
> 
> 赞同：1
> 
> 时间：2012-05-11T17:24:47.930
> 
> 标签：php, activecollab, xampp

我正在尝试将 ActiveCollab PHP 应用程序（包括活动协作源）转换为在以前在 RedHat 服务器上运行的 XAMMP 上的 Windows XP 上运行。我已经设置了一个虚拟主机并将配置更改为指向本地数据库（已加载数据并正在工作）。

但是，当我运行它时，我收到以下错误消息：

致命错误：activeCollab 未能执行您的请求（原因：DBConnectError）。有关此错误的信息已记录并发送给管理员。

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:26:13.450

您可以通过访问和更新您的配置来获取有关此类错误的更多描述性信息`activecollab/config/config.php`...。

```
define('APPLICATION_MODE', 'in_debug');
define('DEBUG', 2); 
```

使用较新的版本，您可以做到`define('APPLICATION_MODE', 'in_debug_mode');`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:45:30.597

为了迁移 activeCollab，我们建议您安装新副本，然后从旧系统中移动数据。此处提供了确切的迁移说明：

[http://www.activecollab.com/docs/manuals/admin-version-3/tweak/moving-activecollab](http://www.activecollab.com/docs/manuals/admin-version-3/tweak/moving-activecollab)

如果您遇到连接错误问题，请打开 config/config.php 并确保您的数据库连接参数正确：

```
define('DB_HOST', 'localhost'); // Database host, usually localhost
define('DB_USER', ''); // Database user account
define('DB_PASS', ''); // Database user password
define('DB_NAME', ''); // Name of the database where activeCollab tables are 
```

请注意，您应该将数据库内容从 Red Hat 服务器迁移到新的 Windows 驱动服务器上的 MySQL（从一个导出 SQL 转储并导入到另一个应该可以满足您的要求）。

# performance - 无需代码访问的客户端应用程序的黑盒性能测试工具或技术

> ID：10555927
> 
> 赞同：0
> 
> 时间：2012-05-11T17:24:50.963
> 
> 标签：performance, testing, black-box

我有一个来自第三方的 Windows 应用程序，我想对其进行一些性能测试，寻找由网络、一天中的时间、用户数量等因素引起的性能差异......该应用程序使用 Oracle 数据库，所以我可以监视它，但我没有其他代码或 API 访问该应用程序。

我打算使用测试脚本和秒表进行一些测试，但想知道是否有人有任何好的工具或技术可以帮助这种黑盒式测试。

# iphone - 仅通过时间分量将 NSDate 与 NSPredicate 进行比较

> ID：10555931
> 
> 赞同：0
> 
> 时间：2012-05-11T17:25:13.093
> 
> 标签：iphone, ios, cocoa-touch, nsdate, nspredicate

我熟悉使用`NSCalendar`和`NSDateComponents`比较`NSDate`. 但是，我想知道`NSPredicate`在过滤日期数组或获取将日期作为属性之一的核心数据实体时，是否可以使用 .

例如，假设我正在存储一个`Person`带有属性的核心数据实体`birthday`。 `birthday`是一个 NSDate，它存储了人的生日的日期和时间。我可以在晚上 7 点之后使用`NSPredicate`（或其他任何东西）仅获取`Person`s 和s 吗？`birthday`

还是我必须分别存储日期和时间才能实现这一点？（比如说，存储`birthdayDate`和`birthdayTime`。）

（我尝试使用`NSDate`仅具有时间组件的过滤器，并且似乎所有`NSDate`缺少的日期组件都被认为比`NSDates`具有日期和时间组件的更早。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:38:00.083

NSPredicate`+predicateWithBlock:`允许您使用任意逻辑创建自定义谓词。但是，您不能使用这种方式创建的谓词作为从 SQLLite 存储中获取 CoreData 的谓词。在这种情况下，您将执行通用提取，然后使用`-[NSArray filteredArrayUsingPredicate:]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:28:45.243

是核心数据。你必须非规范化时间。

# python - 如何使用 BeautifulSoup 将标签替换为其内容？

> ID：10555932
> 
> 赞同：7
> 
> 时间：2012-05-11T17:25:22.510
> 
> 标签：python, beautifulsoup

我将如何使用 BeautifulSoup*仅*删除一个标签？我找到的方法会删除标签以及其中的*所有*其他标签和内容。我只想删除标签并保留其中的所有内容不变，例如

改变这个：

```
<div>
<p>dvgbkfbnfd</p>
<div>
<span>dsvdfvd</span>
</div>
<p>fvjdfnvjundf</p>
</div> 
```

对此：

```
<p>dvgbkfbnfd</p>
<span>dsvdfvd</span>
<p>fvjdfnvjundf</p> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T18:18:41.050

我已投票关闭作为副本，但如果它有用，从右边的顶部相关答案重新[应用 slacy 的答案会给你这个解决方案：](https://stackoverflow.com/a/8439761/223092)

```
from BeautifulSoup import BeautifulSoup

html = '''
<div>
<p>dvgbkfbnfd</p>
<div>
<span>dsvdfvd</span>
</div>
<p>fvjdfnvjundf</p>
</div>
'''

soup = BeautifulSoup(html)
for match in soup.findAll('div'):
    match.replaceWithChildren()

print soup 
```

...产生输出：

```
<p>dvgbkfbnfd</p>

<span>dsvdfvd</span>

<p>fvjdfnvjundf</p> 
```

# caching - 升级到 Rails 3.2 后，模型在开发中运行时保持缓存

> ID：10555934
> 
> 赞同：2
> 
> 时间：2012-05-11T17:25:29.957
> 
> 标签：caching, model, ruby-on-rails-3.2

我已经将一个项目从 Rails 3.1 升级到 Rails 3.2，现在，在开发过程中，每次更新模型时，我都需要重新启动服务器才能使更改生效。视图和控制器的更改立即生效。

我很确定它来自升级，因为我在 Rails 3.2 中的新项目都没有这个问题。我已经检查了旧项目中的 development.rb 和 application.rb 与新项目中的那些，它们是相同的。我似乎无法在网上找到答案，有人知道我该怎么做吗？

干杯，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:43:22.850

尝试查看您的 development.rb 文件。应该有一行`config.cache_classes`，这应该设置为`false`，以确保您不需要重新启动服务器以反映您对各种类所做的更改：

```
# development.rb
config.cache_classes = false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:53:41.203

我也有`warning: already initialized constant`消息一直弹出，所以我寻找解决这个问题的方法。似乎它的解决方案也解决了我的缓存问题。基本上你必须卸载 rake 并通过捆绑重新安装它......答案在这里：[https ://stackoverflow.com/a/7553276/1389981](https://stackoverflow.com/a/7553276/1389981)

# ios - 如何将 JSON 添加到 gdata 目标 c 框架？

> ID：10555937
> 
> 赞同：1
> 
> 时间：2012-05-11T17:25:40.363
> 
> 标签：ios, json, gdata

我按照此处的步骤添加了框架：[https ://hoishing.wordpress.com/2011/08/23/gdata-static-library-for-specific-api/](https://hoishing.wordpress.com/2011/08/23/gdata-static-library-for-specific-api/)

当我编译时，我不断收到此错误：

```
error: /devfolder/gdata-objectivec-client-read-only/Source/JSON/SBJsonBase.h: No such file or directory 
```

看起来它缺少框架所需的所有 SBJson 标头。虽然我找不到 SBJsonBase.h 的位置。这是 JSON 的旧版本吗？有没有办法使用最新的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T23:04:42.737

通过 subversion 检出 API 库项目还应该检出 JSON 解析器源文件和头文件。该项目使用 svn:externals 从他们自己的 github 存储库中提取 JSON 源。

将项目签出到您的机器时可能出现故障；JSON 文件应检出到 GData 库的 Source 目录中。

# android - eclipse android app项目上的红色感叹号

> ID：10555938
> 
> 赞同：2
> 
> 时间：2012-05-11T17:25:45.737
> 
> 标签：android, eclipse

我最近不得不重新安装我的操作系统 - 一个完整的全新安装。

我确实复制了我的 Eclipse 工作区文件夹，以保留所有数据。

当我重新设置所有内容时，7 个项目中有 2 个上面有红色感叹号。

为什么是这样？我检查了所有我知道的构建路径，没有发现错误，实际代码中也没有错误 - 那么问题是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T10:20:25.723

这在我的项目设置中被证明是一个无效的构建路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T06:23:44.493

通常，如果您缺少任何 jar 或项目库，它就会出现。

除此之外，eclipse中还有一个Problem View，windows->show view->problems。此视图将显示项目中的所有错误和警告。只需打开它并查看您的项目的任何错误。

# language-agnostic - 如果迭代不是从第一个元素开始，如何通过for循环传递列表中的所有项目

> ID：10555943
> 
> 赞同：1
> 
> 时间：2012-05-11T17:26:18.647
> 
> 标签：language-agnostic, iteration

如何通过 for 循环传递列表中的所有项目。如果迭代不是从第一个元素开始。

让我们立即跳到示例：

**我们有清单** `['a','b','c','d']`。

*我想使用 for 循环浏览此列表中的所有项目。但是如果迭代不是从第一个元素开始，我想回来并从第一个元素开始。像这样的东西：*

```
lst = ['a','b','c','d']

start_index = 2

for loop_num in range(len(lst)):
    item = lst[start_index+loop_num]
    print item 
```

*它会打印我：*

```
>> c,d 
```

比上升**IndexOutOfRange 错误**

*但我希望结果是这样的：*

```
>> c, d, a, b 
```

*如果我们将`start_index`变量更改为`1`result 假设是：*

```
b, c, d, a 
```

*的情况下`start_index = 0`*

*结果：* `a, b, c, d`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T17:30:20.663

```
lst = ['a','b','c','d']

start_index = 2

for loop_num in range(len(lst)):
    item = lst[(start_index+loop_num) % len(lst)]
    print item 
```

% - 这是特殊操作。3 % 5 = 3, 10 % 5 = 0，阅读[剩余部分](http://en.wikipedia.org/wiki/Remainder)和[Python 文档](http://docs.python.org/reference/expressions.html#id27)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T17:29:30.537

## Python

```
>>> l = ['a','b','c','d']
>>> def func(lst, idx=0):
...     for i in lst[idx:] + lst[:idx]: yield i
...
>>> list(func(l))
['a', 'b', 'c', 'd']
>>> list(func(l,2))
['c', 'd', 'a', 'b']
>>> 
```

使用标准 Python 列表切片语法、一个可选参数 ( `idx`) 和[一个生成器](http://docs.python.org/tutorial/classes.html#generators)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T17:33:11.787

我会用 C# 来回答。假设我们有一个大小为 x 的数组（更容易显示）。起始索引为 y，小于 x，但大于 0。

```
int i;
for(i=y;i<x;i++)
{
  //do something with MyArray[i]¸
  if(i==x)
  {
    for(i=0;i<y;i++)
    {
      //do something with MyArray[i]
    }
    i=x;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T17:32:18.600

您可以使用`%`获取正确的索引：

```
def rotated(lst, start=0):
    c = len(lst)
    for idx in xrange(c):
        yield lst[(idx + start) % c]

for x in rotated(['a','b','c','d'], 2):
    print x, 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T20:53:47.960

在 Ruby 数组中有一个名为的方法`values_at`，它接受一个索引或一个索引范围（组合，任意数量）。`for`循环很少使用——这是我写的第一个。

```
lst = ['a','b','c','d']
start_index = 2

for v in lst.values_at(start_index..-1, 0...start_index)
  puts v
end 
```

# android - 在画布上绘制透明文本

> ID：10555944
> 
> 赞同：3
> 
> 时间：2012-05-11T17:26:23.170
> 
> 标签：android, android-canvas, draw, transparent

我正在尝试在画布上写一个半透明的文本。我看到写在画布上的字符串，但透明度似乎不起作用。这是我的代码：

```
 public void onDraw(Canvas canvas, Paint paint) {
    paint.setAlpha(1);
    paint.setAntiAlias(true);
    paint.setTextSize(this.textSize);
    paint.setColor(textColor);
    canvas.drawText(text,x,y,paint); 
    Logs.add("onDraw DefaultScoreGottenText currentAlpha = " + this.currentAlpha);
    showAnimation(null);
} 
```

alpha 属性已设置，但似乎没有任何效果。我什至尝试创建一个新的 Paint 对象并将其发送到 drawText 方法。也没有用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T19:28:21.107

paint.setColor() 包含 alpha，因此当您调用 paint.setColor(textColor) 时，您将覆盖您在 paint.setAlpha(1) 中设置的 alpha。尝试同时设置 alpha 和文本颜色：

```
paint.setColor(Color.argb(alpha, red, green, blue)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-12T16:13:46.450

或者只是将 alpha 设置在颜色**下方。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-01T07:43:59.497

您正在通过设置颜色值来覆盖 alpha。所以只需在设置颜色后设置 alpha

```
paint.setColor(textColor);
paint.setAlpha(1); 
```

请注意，alpha 取值介于 0 和 255 之间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T04:14:36.837

设置颜色 #00112233

这里 00 是透明的

11是红色值

22 是绿色值

33是蓝色值

如果您将前两位数字更改为 00 到 FF 之间，您可以看到透明变化。

# validation - 保存/关闭时的 Excel 数据验证

> ID：10555946
> 
> 赞同：-1
> 
> 时间：2012-05-11T17:26:29.170
> 
> 标签：validation, vba, excel

我有一个包含 10 列的标准 Excel 表：

例如，用户最多可以填写 100 行。我想编写一个宏/验证，以便为每一行填充所有 10 列。

我需要在用户保存/关闭工作表时向用户显示警报的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:35:36.357

这是最基本的想法。您应该能够对此进行扩展，然后使用一些工作簿事件在保存和/或关闭时调用此宏。

```
Sub ValidateData()
Dim ws As Worksheet, Rw As Long

Set ws = Sheets("Sheet1")       'the sheet to analyze

For Rw = 1 To ws.UsedRange.Rows.Count
    If WorksheetFunction.CountA(Rows(Rw)) <> 0 Then
        If WorksheetFunction.CountA(Rows(Rw)) < 10 Then
            ws.Activate
            ws.Range("A" & Rw).Resize(, 10).Select
            MsgBox "This row is incomplete"
            Exit Sub
        End If
    End If
Next Rw

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:48:19.733

我希望这对那里的人有所帮助，因为 OP 早已不复存在。您可以将范围更改为`A1:J1000`或任何您需要的单元格。这假设您从工作表级别调用它。否则，您可能需要明确引用范围。

```
Option Explicit

Sub Validater()

Dim r As Range
Dim numBlanks As Integer

Set r = Range("A1:E10")

numBlanks = WorksheetFunction.CountBlank(r)

If numBlanks > 0 Then
    MsgBox "There are " & numBlanks & " empty cells."
End If

End Sub 
```

# javascript - 如何使用图标图像？

> ID：10555956
> 
> 赞同：1
> 
> 时间：2012-05-11T17:27:37.820
> 
> 标签：javascript, html, css, image

在我的旅行中，我经常检查我访问的网站的渲染 HTML、CSS 和 Javascript 源代码。有一种我见过的技巧仍然让我感到困惑。我经常发现这样的图像：

[![](../Images/ab1dd9fd00096d57f8135450e751962d.png)](https://i.stack.imgur.com/iE1c7.png)
[（来源：[cloudfront.net](http://d297h9he240fqh.cloudfront.net/cache-588bcdd93/images/compass/icon-sprite.png)）]

它充满了图标，但在网站上使用此图像将图像限制为一次只能显示大图像中的一个图标。它们本质上似乎对大量图标使用相同的图像。

如果我理解正确，那么这对于图像的加载和缓存将有很大帮助，因为它是一个单一的图像，会以某种方式被分解。这是如何运作的？这是使用Javascript完成的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:30:29.647

这个想法被称为 CSS Sprites。搜索它，但基本上你对它如何/为什么工作的直觉是正确的！

看到这个 SO：[css 图标图像或图标图像？](https://stackoverflow.com/questions/4870292/css-icon-images-or-icon-image)

jQuery UI 是一个库的示例，它也使用它来达到出色的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:55:08.657

本文涵盖了它： [http ://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

几乎，您使用了 background-position 属性。如果您尝试水平或垂直平铺背景图像，这将决定您的精灵表的方向。（如果你没有平铺任何精灵，方向根本不重要）

# css - 在输入文本跨浏览器中对齐文本

> ID：10555961
> 
> 赞同：0
> 
> 时间：2012-05-11T17:27:58.967
> 
> 标签：css, browser, input, twitter-bootstrap

我有一个简单的：

```
<input type="text" placeholder="search .." value="" id="search"/> 
```

我刚刚添加了一些cs规则，例如：

```
#search{
padding:2%;
text-indent:1%;
width:30%;
} 
```

但是当我在不同的浏览器（如 FF/Chrome）中尝试相同的输入时，我看到了一些错误，例如在 chrome 中，输入内的文本行高是不同的，当焦点在输入内时，占位符仍然保留，而在 FF 上一切正常并且当我专注于输入时占位符淡出...任何好的规则/规则来修复所有（几乎所有）浏览器的行高和文本缩进和占位符淡出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:57:57.210

Chrome 中的一项功能是占位符文本不会在焦点上消失，而只会在输入时消失。如果您希望覆盖它，您需要使用 JavaScript（这几乎违背了 的想法`placeholder`）。

您披露的任何设置都不会更改行高。由于默认值不同，它可能因浏览器而异。

该`text-indent`属性仅适用于块容器。要在左侧设置间距，这似乎是这里的想法，请使用`padding-left`，最好使用`em`单位。使间距取决于元素的宽度是不可靠的，特别是如果该宽度设置为相对于可用宽度。

# javascript - 启用 Django 和 Tastypie 对斜杠的支持？

> ID：10555962
> 
> 赞同：4
> 
> 时间：2012-05-11T17:28:00.340
> 
> 标签：javascript, django, backbone.js, tastypie

我的问题是 Backbone 正在尝试对末尾带有斜杠的 URL 执行 HTTP 请求，如下所示：

```
:8000/api/v1/update/2/ 
```

由于某种原因，Django（或tastepie）不接受末尾带有斜杠的URL，所以上面的URL 不起作用，但这个URL 确实有效：

```
:8000/api/v1/update/2 
```

当不使用其覆盖的同步时，Backbone-tastypie 回退到 oldSync，这是 Backbone 附带的原始同步。我相信当 Backbone-tastypie 使用 oldSync 时，它会在 URL 的末尾附加一个斜杠，这是我不想要的。

建议的大多数解决方案都在处理我遇到的相反问题。他们正在尝试解决尾部斜杠起作用的问题，但没有尾部斜杠不起作用。

除了非尾随斜杠之外，我还需要能够支持尾随斜杠。这可以通过两种方式解决：

1.  如何更改骨干美味代码，以便没有 AJAX 调用在末尾附加斜杠？

2.  如何使 Django/tastypie 将上述两个 URL 视为相同？

其中任何一个都可以解决我的问题，但我无法弄清楚如何实现其中任何一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T15:56:26.123

你可以告诉 Tastypie/Django 允许或禁止尾部斜杠。

看[这里](http://django-tastypie.readthedocs.org/en/latest/settings.html#tastypie-allow-missing-slash)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T17:51:52.837

解决`Backbone`方案：

您可以覆盖 的默认行为`Model.url`，甚至使用普通行为并进行小修改，如您正在寻找的行为：

```
// code simplified and not tested
var MyModel: Backbone.Model.extend({
  url: function() {
    var original_url = Backbone.Model.prototype.url.call( this );
    var parsed_url = original_url + ( original_url.charAt( original_url.length - 1 ) == '/' ? '' : '/' );

    return parsed_url;
  }
}); 
```

同样适用于`Collection`.

# sql - SQL 查询中的多个 Select 语句

> ID：10555963
> 
> 赞同：3
> 
> 时间：2012-05-11T17:28:10.917
> 
> 标签：sql, select

我承认在这里我是一个绝对的 SQL 菜鸟（我可以进行内部连接，但这与我对 SQL 的了解一样“复杂”），但我希望获得一些关于如何最好地实现某事的帮助/见解/想法。我有一张公司表，以及这些公司的个人子表。公司可以有一个邮寄地址，但个人可能有一个不同的邮寄地址来覆盖正常的公司地址。我的环境中有 SQL Server 2008。我的想法是让 SQL 查询以下列方式循环两次

```
SELECT tblIndividuals.FirstName,
       tblIndividuals.LastName,
       tblIndividuals.CompanyName,
       tblIndividuals.MailingAddress1,
       tblIndividuals.MailingAddress2,
       tblIndividuals.MailingAddress3,
       tblIndividuals.MailingAddress4,
       tblIndividuals.City,
       tblIndividuals.[State],
       tblIndividuals.Zip
FROM tblIndividuals
INNER JOIN tblCompanies ON tblIndividuals.CompanyName = tblCompanies.CompanyName
WHERE tblIndividuals.ChristmasList=1
  AND tblIndividuals.MailingAddress1 IS NOT NULL
  SELECT tblIndividuals.FirstName,
         tblIndividuals.LastName,
         tblIndividuals.CompanyName,
         tblCompanies.MailingAddress1,
         tblCompanies.MailingAddress2,
         tblCompanies.MailingAddress3,
         tblCompanies.MailingAddress4,
         tblCompanies.City,
         tblCompanies.[State],
         tblCompanies.Zip
  FROM tblIndividuals
  INNER JOIN tblCompanies ON tblIndividuals.CompanyName = tblCompanies.CompanyName WHERE tblIndividuals.ChristmasList=1
  AND tblIndividuals.MailingAddress1 IS NULL
ORDER BY tblIndividuals.CompanyName 
```

想法是这样，代码将循环一次，抓取圣诞节列表中所有具有覆盖公司地址的邮寄地址的个人，然后循环抓取圣诞节列表中使用默认公司的所有个人地址，最后按公司名称对所有结果进行排序。那些比我更精通 SQL 的人知道，这并不像我希望的那样工作，而是只运行两个查询。是否有更精通 SQL 的人愿意在这里以更好的方式提供一些见解以实现我的最终目标？任何帮助将不胜感激。提前感谢您的时间。

编辑：我知道第一个查询并不真正需要内部联接，我只是从第二个查询复制/粘贴并没有更改它。>.<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:46:44.787

```
select tblIndividuals.FirstName, tblIndividuals.LastName, tblIndividuals.CompanyName, 
COALESCE(tblIndividuals.MailingAddress1, tblCompanies.MailingAddress1) AS MailingAddress1, 
CASE WHEN tblIndividuals.MailingAddress1 IS NULL THEN tblCompanies.MailingAddress2 ELSE tblIndividuals.MailingAddress2 END AS MailingAddress2, 
CASE WHEN tblIndividuals.MailingAddress1 IS NULL THEN tblCompanies.MailingAddress3 ELSE tblIndividuals.MailingAddress3 END AS MailingAddress3, 
CASE WHEN tblIndividuals.MailingAddress1 IS NULL THEN tblCompanies.MailingAddress4 ELSE tblIndividuals.MailingAddress4 END AS MailingAddress4, 
CASE WHEN tblIndividuals.MailingAddress1 IS NULL THEN tblCompanies.City ELSE tblIndividuals.City END AS City, 
CASE WHEN tblIndividuals.MailingAddress1 IS NULL THEN tblCompanies.[State] ELSE tblIndividuals.[State] END AS [State], 
CASE WHEN tblIndividuals.MailingAddress1 IS NULL THEN tblCompanies.Zip ELSE tblIndividuals.Zip END AS Zip
from tblIndividuals INNER JOIN tblCompanies
On tblIndividuals.CompanyName = tblCompanies.CompanyName
where tblIndividuals.ChristmasList=1
order by tblIndividuals.CompanyName 
```

未来的几点。COALESCE 表示“此列表中不为空的第一个”。CASE 语句的用法应该不难弄清楚。

最后，使用 CompanyName 作为主键是个坏主意，因为 CompanyName 可能会更改。这是一个很好的数据库设计入门： http: [//database-programmer.blogspot.com/2008/01/database-skills-third-normal-form-and.html](http://database-programmer.blogspot.com/2008/01/database-skills-third-normal-form-and.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:35:49.547

使用 CASE 语句。不需要两个查询，因为所有数据都在第一个......

```
Select tblIndividuals.FirstName, tblIndividuals.LastName, tblIndividuals.CompanyName,
    Case 
        When tblIndividuals.MailingAddress1 IS NULL then tblCompanies.MailingAddress1 
        Else tblIndividuals.MailingAddress1 END as MailingAddress1,
    Case 
        When tblIndividuals.MailingAddress1 IS NULL then tblCompanies.MailingAddress2 
        Else tblIndividuals.MailingAddress2 END as MailingAddress2,
    ....
from tblIndividuals INNER JOIN tblCompanies
On tblIndividuals.CompanyName = tblCompanies.CompanyName
where tblIndividuals.ChristmasList=1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:42:34.143

您只需要一个

```
select tblIndividuals.FirstName, 
..
ISNULL(tblIndividuals.MailingAddress1, tblCompanies.MailingAddress1), 
ISNULL(tblIndividuals.MailingAddress2, tblCompanies.MailingAddress2), 
...
from tblIndividuals INNER JOIN tblCompanies
On tblIndividuals.CompanyName = tblCompanies.CompanyName
where tblIndividuals.ChristmasList=1 
```

请注意，ISNULL 将评估第一个输入，如果它为空，它将显示第二个。[MSDN 这里](http://msdn.microsoft.com/en-us/library/ms184325%28v=sql.105%29.aspx)。你也可以看看[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349%28v=sql.105%29.aspx)

# javascript - JavaScript 2D 数组未捕获类型错误

> ID：10555966
> 
> 赞同：0
> 
> 时间：2012-05-11T17:28:15.423
> 
> 标签：javascript, arrays

处理一个需要向数组添加点的项目。这是创建然后尝试将对象添加到数组的代码：

```
var points = [];
    points[0] = [];
    points[0][0] = 0; //x-coord
    points[0][1] = 0; //y-coord

points[points.length][0] = x; //Breaks on this line
points[points.length][1] = y; 
```

我得到的确切错误是**Uncaught TypeError: Cannot set property '0' of undefined**。每次按下按钮时都会运行此代码，并且已经`ints`设置了其他值。我认为 JavaScript 允许您随时在数组中设置值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:30:33.650

最后一个数组索引是`points.length - 1`。现在您正在处理数组末尾之后的元素（即`undefined`）并尝试为其“0”属性分配`x`. `undefined`不允许设置属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:31:02.303

您的数组包含：

```
var points = [
    [0,0]
] 
```

然而

```
points[points.length]
//is
points[1] 
```

这不存在。您必须先创建数组，然后才能实际向其中添加内容

[这是一个示例](http://jsfiddle.net/zqrGe/1/)

```
var length = points.length;  //cache value, since length is "live"
points[length] = [];         //using the cached length, create new array
points[length][0] = x;       //add values
points[length][1] = y; 
```

# c++ - C++中的字符串比较

> ID：10555967
> 
> 赞同：0
> 
> 时间：2012-05-11T17:28:24.977
> 
> 标签：c++, search, comparison

有人帮助我，我应该将其更改`char[]`为`string`，但我在比较用户输入的字符串时仍然遇到问题。我不确定我是否必须使用`fstream`或其他东西。`getline`并没有真正帮助我，因为它根据 getline 内部的内容显示错误。

```
void search (competitor competitors[], int broi)    
{
string country;
string name;
char choice;
bool flag;

do{ 

    cout << "\n\n Input Country: " << endl; 
    fstream country;    

    cout << " Input name: " << endl;

    fstream name;
    flag = false; 

    for(int i=0; i<count; i++) 
    {
        if( country==competitors[i].country && name==competitors[i].name)
        {
            cout << "found one" << endl;
            flag = true; 
        }
    }
    if (flag == false)  

    cout << " New search (Y/N)?: ";
    cin >> izbor;

}while(choice == 'Y' || choice == 'y'); 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:34:17.480

```
fstream country; 
```

这声明了一个名为`country`type的新变量`fstream`。可能不是你想要的。

你应该试试：

```
getline(std::cin, country); 
```

反而。你也有同样的问题`name`。

还：

```
flag = true; 
```

最好`break`直接打电话。

和：

```
cin >> izbor; 
```

应该是：`cin >> choice;`

# orchardcms - 使 Orchard CMS 完全私有化

> ID：10555973
> 
> 赞同：1
> 
> 时间：2012-05-11T17:28:52.173
> 
> 标签：orchardcms, private

我想将 Orchard CMS 网站设为私有且仅对注册用户可见。

只需编辑 web.config，此过程是否类似于任何其他 MVC 3 网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:18:56.137

目前，这还不是我们专门针对的场景。您当然可以让它像任何 MVC 3 应用程序一样工作，是的，但我们还在即将发布的 1.5 版中添加了从管理 UI 以这种方式配置它的功能。

# javascript - 文章中的 JavaScript 链接更改（脚本块页面）

> ID：10555974
> 
> 赞同：1
> 
> 时间：2012-05-11T17:28:53.610
> 
> 标签：javascript, hyperlink

在我的页面上，我想转换一些文章的所有链接，所以我制作了一个简单的脚本，但是当我将它添加到 wordpress 它的块页面时，就像它有无限循环......（对不起我的英语不好）。

脚本需要从某个区域（某个 div）获取所有链接......如果有人能找到问题，请帮助！

这是脚本：

```
if(document.getElementById("somediv")){
    dwn=document.getElementById("somediv");
    link=dwn.getElementsByTagName("a");
    count=link.length;
    i=0;
        while(i<count){
            hotornot=String(link[i]);
                if(hotornot.indexOf("auto-im.com")=="-1"){
                link[i].href="http://newpage.me/seo?dwn="+escape(link[i]);
                i++;}
                };  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:41:25.403

```
if(hotornot.indexOf("auto-im.com")=="-1"){
    link[i].href="http://newpage.me/seo?dwn="+escape(link[i]);
i++;} 
```

那是你的问题。我永远不会增加页面上的链接总数，因为您正在通过 auto-im.com 进行过滤。将 i++ 放在条件之外。

# javascript - js onClick="window.open 父加载基础 url

> ID：10555975
> 
> 赞同：1
> 
> 时间：2012-05-11T17:28:54.717
> 
> 标签：javascript, popup

我有我希望是一个简单的 js 问题。我正在做一个艺术项目。在网站上，我在页面上有一张图片。我已经用链接和一些内联 js 包装了图像标签。我有我想要的行为：on.click 打开一个带有正确链接的新窗口就好了。但是，父页面正在加载网站的基本 url，我宁愿它什么也不做。有人对如何防止这种情况有任何想法吗？在 FF 中似乎还不错，但 webkit 的表现并不好。您可以在此处查看快速演示：http: [//jacksontuckerlynch.com/webcam-24](http://jacksontuckerlynch.com/webcam-24)

```
<a href="#" onClick="window.open('http://www.something.com/some-page?m=1','mywindow','width=710,height=700,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,copyhistory=no,resizable=no')"><img class="responsecontainer" src="http://somewebsite.net/image.jpg" width="260" height="180" /><a/> 
```

非常感谢您的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:09:45.787

利用

```
href="javascript:void(0);" 
```

有很多方法可以禁用 href 属性，但这一种可能是最简单的。我认为您甚至可以删除 href 属性，但是您必须添加一些 CSS 来设置鼠标指向悬停时的样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:34:54.153

尝试`return false;`在您的 javascript 末尾使用，如下所示：

```
<a href="#" onClick="window.open('http://www.something.com/some-page?m=1','mywindow','width=710,height=700,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,copyhistory=no,resizable=no'); return false;"><img class="responsecontainer" src="http://somewebsite.net/image.jpg" width="260" height="180" /><a/> 
```

# android - 从 sdcard 获取所有文件

> ID：10555977
> 
> 赞同：0
> 
> 时间：2012-05-11T17:29:00.803
> 
> 标签：android, sd-card

我想从 sdcard 获取所有路径文件（及其大小！！）。

我更改代码：

```
List<File> dir = new ArrayList<File>();
List<File> files = new ArrayList<File>();

  File root = new File (Environment.getExternalStorageDirectory().getAbsolutePath());

        scan(root);

        for (File f : dir) {
           scan(f);
        }

public void scan (File path) {

        for (File f : path.listFiles()) {
            if (f.isFile()) {
                files.add(f);
            }
            else {
                dir.add(f);
            }
        }
    } 
```

但是一个问题。我循环“dir”并同时更改他。我有异常“java.util.ConcurrentModificationException”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:37:17.643

这`files[i + j] = files[i];`条线会引起问题。使用这种方式

```
 for (int i = 0, j = 1; i < files.length; i++) {
        if (files[i].isFile())
            Log.i("file:" + files[i].getName(), " " + files[i].getAbsolutePath());
        else { 
            /* if current file is derictory -> 
            save him in end of array with directoty paths*/
            int testsum=i+j;
            if(testsum<=files.length)
             {
               files[i + j] = files[i];
               Log.i("dir:" + files[i].getName(), " " + files[i].getAbsolutePath());
             }
            else
              {
              }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:39:07.323

这一行的问题

```
files[i + j] = files[i]; 
```

当 i = files.length - 1\. 这是奇怪的代码行。

# javascript - Javascript 明显的疯狂

> ID：10555986
> 
> 赞同：8
> 
> 时间：2012-05-11T17:29:34.727
> 
> 标签：javascript, language-design

> **可能重复：**
> [空 JavaScript 数组的布尔值冲突](https://stackoverflow.com/questions/4226101/conflicting-boolean-values-of-an-empty-javascript-array)

事实背后的理由是什么

```
[ ([] == false), ([] ? 1 : 2) ] 
```

回报`[true, 1]`？

换句话说，一个空列表在布尔上下文中逻辑上为真，但等于`false`。

我知道使用`===`可以解决问题，但是这个显然完全不合逻辑的选择背后的解释是什么？

换句话说，这是否被认为是语言中的错误，是无意中发生的并且无法修复，因为为时已晚，或者真的在语言设计中有人认为拥有这种明显的疯狂很酷对许多程序员来说肯定很困惑吗？

关于这种情况如何发生的技术解释同时令人惊讶和恐惧，但我对这个设计背后的内容更感兴趣。

## 编辑

我接受了非常详细的 Nick Retallack 解释，即使它只是关于为什么`[]==false`是真的技术原因：令人惊讶的是，它发生的原因是`[]`转换为字符串是一个空字符串，而空字符串数值被特殊设置为 0 而不是显然更合乎逻辑`NaN`。例如，对于空对象，比较`({}) == false`返回 false，因为空对象的字符串表示不是空字符串。

我的好奇心仍然存在，这一切只是出乎意料（不幸的是，现在固化在一个标准中）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T17:32:47.060

这里的混淆在于 JavaScript 中“虚假”的定义，它（与流行的看法相反）与`== false`.

Falsy 实际上是指具有 false 等效布尔值的值，而不是结果 == false 的表达式。JavaScript 中唯一的 Falsy 值是：`false`, `0`, `""`, `null`, `undefined`, 和`NaN`. 因此，这些值中的任何一个——或任何评估为这些值之一的表达式（如在`if`语句中或使用三元运算符）——都是虚假的。

这是我在 JavaScript 中汇总的虚假/真实值的表格，应该有助于解释整个问题。 [http://jsfiddle.net/philipwalton/QjSYG/](http://jsfiddle.net/philipwalton/QjSYG/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-11T17:32:55.793

让我们获得技术。我将用[ECMAScript Standard 262](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)中的引号来解释逻辑。

表达式`[] ? 1 : 2`很简单：

> **11.12 条件运算符 (? : )**
> 
> *   令 lref 为评估 LogicalORExpression 的结果。
> *   如果**ToBoolean(GetValue(lref))**为真，则
>     *   令 trueRef 为评估第一个 AssignmentExpression 的结果。
>     *   返回 GetValue(trueRef)。
> *   别的
>     *   设 falseRef 为计算第二个 AssignmentExpression 的结果。
>     *   返回 GetValue(falseRef)
> 
> **9.2 ToBoolean**
> 
> *   未定义：假
> *   空：假
> *   布尔值：结果等于输入参数（无转换）。
> *   数字：如果参数为 +0、0 或 NaN，则结果为假；否则结果为真。
> *   String：如果参数为空字符串（长度为零），则结果为假；否则结果为真。
> *   **对象：真**

所以这是真的。

* * *

现在来看看使用双等号运算符时会发生什么。也许这将有助于解释为什么你不应该这样做。

== 的行为在第 11.9.3 节：抽象相等比较算法中进行了解释。

对于 x == y 其中 x = [] 和 y = false，会发生这种情况：

> **11.9.3：抽象等式比较算法**
> 
> 如果 Type(y) 为 Boolean，则返回比较结果 x == ToNumber(y)
> 
> **9.3 ToNumber**
> 
> 如果参数为 **false** ，则结果为**+0**。

 **现在我们有 [] == 0

> **11.9.3：抽象等式比较算法**
> 
> 如果 Type(x) 是 Object 并且 Type(y) 是 String 或 Number，则返回比较结果**ToPrimitive(x) == y**。
> 
> **9.1 ToPrimitive**
> 
> 返回对象的默认值。通过调用对象的**[[DefaultValue]]** 内部方法检索对象的默认值，并传递可选提示 PreferredType。本规范为 8.12.8 中的所有原生 ECMAScript 对象定义了 [[DefaultValue]] 内部方法的行为。
> 
> **8.12.8 默认值：**
> 
> 当 O 的 [[DefaultValue]] 内部方法在没有提示的情况下被调用时，它的行为就好像提示是**Number**
> 
> *   令 valueOf 为使用参数“valueOf”调用对象 O 的 [[Get]] 内部方法的结果。
> *   如果 IsCallable(valueOf) 为真，则
>     *   令 val 为调用 valueOf 的 [[Call]] 内部方法的结果，其中 O 作为 this 值和一个空参数列表。
>     *   如果 val 是原始值，则返回 val
> *   令 toString 为使用参数“toString”调用对象 O 的 [[Get]] 内部方法的结果。
> *   如果 IsCallable(toString) 为真，则
>     *   令 str 为调用**toString**的 [[Call]] 内部方法的结果，其中 O 作为 this 值和一个空参数列表。
>     *   如果 str 是原始值，则**返回 str**。

我假设这首先尝试 valueOf 然后拒绝它，因为结果与您开始使用的数组相同。然后它在 Array 上调用 toString，这似乎被普遍实现为一个逗号分隔的值列表。对于像这样的空数组，这会导致空字符串。

现在我们有 '' == 0

> **11.9.3：抽象等式比较算法**
> 
> 如果 Type(x) 是 String 且 Type(y) 是 Number，则返回比较结果**ToNumber(x) == y**
> 
> **9.3.1 ToNumber 应用于字符串类型**
> 
> **为空或仅包含空格**的 StringNumericLiteral 将转换为**+0**。

现在我们有 0 == 0

> **11.9.3：抽象等式比较算法**
> 
> 如果 x 与 y 的数值相同，则返回 true

惊人的。这是真的。到达这里的方式相当复杂。**

# tfs - 是否可以默认为空字符串而不是默认为当前用户（并且仍然强制选择用户）？

> ID：10555987
> 
> 赞同：2
> 
> 时间：2012-05-11T17:29:34.813
> 
> 标签：tfs, workitem

根据流程模板默认设置，可以将任何有效用户分配给 System.AssignedTo 字段。

我正在改变它：

1.  如果工作项创建者来自 PPQA 组，他/她只能将工作项分配给 GP 组中的某个人。
2.  其他人都可以将工作项分配给为项目做出贡献的任何人 ([Project]\Contributors)

为了达到这个结果，我有以下字段定义：

```
<FieldDefinition reportable="dimension" refname="System.AssignedTo" name="Assigned To" syncnamechanges="true" type="String">
    <ALLOWEXISTINGVALUE />
    <VALIDUSER for="[project]\PPQA" group="[project]\GP" />
    <VALIDUSER not="[project]\PPQA" group="[project]\Contributors" />
    <HELPTEXT>The person currently working on this issue</HELPTEXT>
</FieldDefinition> 
```

这几乎完成了工作，但并不完美。

在当前的团队资源管理器实施 (VS 2010) 中，当 PPQA 组的成员创建新问题时，他/她的名字默认显示在“*分配给”*字段中，尽管他/她被迫从列表中选择一个名称来更改它（全科医生组）。

**是否可以默认为空字符串而不是默认为当前用户（并且仍然强制选择用户）？**

我尝试了以下两种构造都没有成功：

```
<DEFAULT for="[Project]\PPQA" from="value" value="" />

<COPY for="[Project]\PPQA" from="value" value="" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T21:25:44.250

您需要做的是编辑转换（而不是字段）以将设置为当前用户的默认值更改为您想要的值。

从 Process Template Editor（必须安装 TFS Power Tools）打开 WIT 定义，然后转到 Workflow 选项卡，右键单击第一个 Transition“从 [blank] 到 Active”并选择“Open Details”。 ![在此处输入图像描述](../Images/1096dade1a6db8d6a81f258e626130ac.png)

然后转到“字段”选项卡，选择“系统分配给”字段，然后右键单击并编辑。 ![在此处输入图像描述](../Images/d6eacd6d1adc8fc58305565b10d19529.png)

然后转到“规则”选项卡并将“默认”规则更改/编辑为值或您想要的任何其他内容。 ![在此处输入图像描述](../Images/57fb2563c79b228cb4990b33fc0d150a.png)

# postgresql - Npgsql、TransactionScope 和准备好的事务

> ID：10555988
> 
> 赞同：4
> 
> 时间：2012-05-11T17:29:38.043
> 
> 标签：postgresql, transactions, prepared-statement, distributed-transactions, npgsql

有人可以说我可以将 npgsql 与 TransactionScope 一起使用吗？

在此处的手册中作为示例提供的代码：http: [//npgsql.projects.postgresql.org/docs/manual/UserManual.html](http://npgsql.projects.postgresql.org/docs/manual/UserManual.html)不起作用。它只是在服务器上创建两个准备好的事务。

我和这个问题有同样的问题：[TransactionScope and Npgsql - Prepared Transaction Issue](https://stackoverflow.com/questions/7736693/transactionscope-and-npgsql-prepared-transaction-issue)

有没有将 npgsql 与 TransactionScope 一起使用的解决方案？

UPD：首先我的目标：我需要在我的软件中的单个*逻辑事务中使用两个连接。*最好的解决方案是 TransactionScope。Npgsql 声明支持系统事务中的登记。

然后麻烦了：我使用文档中的代码，此代码执行以下操作：

1.  创建事务范围
2.  打开第一个连接
3.  打开第二个连接
4.  插入第一个连接
5.  插入第二个连接
6.  关闭第二个连接
7.  关闭第一个连接
8.  调用 scope.Complete()
9.  处置范围

我等一下，经过 9 步数据将完全提交给 db。事实上，在第 6 步和第 7 步，npgsql 创建了准备好的事务，而在第 9 步什么也不做。最后我有两个准备好的事务，即块数据库。并且没有人可以提交或回滚它们。

一般来说，如果我在范围内调用完成之前关闭连接（例如由于异常），npgsql 会创建阻止表的准备好的事务。我认为这不是正确的行为。我等待范围处置数据将被完全提交或完全回滚。没有任何准备好的交易。

您可以使用文档中的代码重复此错误。作为参考，Devar 免费库工作正确。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T17:56:02.127

在讨论答案之前，需要明确三个独立的概念。

1.  有*准备好的语句*，它们与连接相关联，并提供一个“框架”语句，每次执行都可以将新值插入其中，而不必每次都解析和计划语句。好处是可以节省每次执行时解析和规划语句所涉及的 CPU 时间。不利的一面是计划是根据最佳“通用”计划完成的，这不太可能是所有可以分配的值的最佳计划。准备好的语句由该`NpgsqlCommand.prepare()`方法创建。

2.  有一些*事务*，它们与连接相关联并为一组相关的数据库活动提供上下文。一项事务的所有活动都在一台服务器的一个数据库中。事务由该`NpgsqlConnection.BeginTransaction()`方法创建。

3.  有*准备好的事务*，它们使用两阶段提交 (2PC) 来管理跨多个连接的多个事务，可能在不同的连接、不同的数据库、不同的服务器上，或者使用完全不同的服务器产品作为一个逻辑“分布式事务”。此功能的使用应始终由高质量的*事务管理器处理*产品，通常不属于参与分布式事务的任何数据库的一部分。目标是当所有相关事务都完成工作后，事务管理器会告诉每个事务“准备”提交。在用成功或失败的指示响应事务管理器之前，每个人都会尝试做所有可能导致它失败的事情。如果所有事务在“准备”阶段都成功，事务管理器将告诉他们每个人提交。当事务管理器请求它时，准备好的事务必须能够在稍后的某个时间提交，即使在“准备”阶段的成功已经传达给事务管理器之后服务器立即崩溃。`TransactionScope`构造函数。 **我强烈建议不要尝试创建自己的临时事务管理器。** 事务管理器是一个复杂而微妙的软件，很难做好，如果做得不好，可能会产生严重的负面*后果*。

我的印象是，问题的意图是使用前两个功能，而不是第三个。如果这是真的，则说明使用了错误的方法来管理事务。

在参考文档页面中有以合理方式使用事务和准备好的语句的示例。称为 System.Transactions 的功能`TransactionScope`似乎不需要您想要做的事情，并且似乎是让您陷入困境的原因。查看刚刚使用的示例`conn.BeginTransaction()`。

# iphone - iPhone的自定义地图

> ID：10555989
> 
> 赞同：0
> 
> 时间：2012-05-11T17:29:59.860
> 
> 标签：iphone, ipad, map

我想制作一个使用自定义地图（而不是谷歌地图）的应用程序，通过 WMS（网络地图服务）传输。据我了解，我不能使用 MapKit，因为没有办法摆脱谷歌地图。所以，唯一的方法似乎是实现我自己的地图系统。但是最好的方法是什么？我还希望地图具有显示用户当前位置等功能。也许我应该从滚动视图开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:12:20.253

对于您的绘图，从[CATiledLayer](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html)开始。这可以帮助您异步加载不同的图块，并在不减速的情况下进行平移和缩放。尽管网络上散布着一些例子（比如[这个](http://bill.dudney.net/roller/objc/entry/catiledlayer_example)） ，但它的文档记录很差。但它确实有效：它用于在我公司的应用程序[Timeline World War 2](http://itunes.apple.com/gb/app/timeline-world-war-2-dan-snow/id516540098?mt=8)中绘制自定义地图。

对于显示用户当前位置之类的事情，您需要一些算法将纬度/经度（您通过核心位置找到）转换为您的地图当前使用的任何投影，然后获取包含您的平铺层的滚动视图移动到正确的位置。

# c# - winform图片框图像显示为空c#

> ID：10555990
> 
> 赞同：5
> 
> 时间：2012-05-11T17:30:00.540
> 
> 标签：c#, winforms, image, picturebox

我有一个包含图片框的表单。当表单加载默认图像加载正常。然后，当我的表单中的某些内容发生更改并更改正在显示的图像时，我会更新图像。该图像的生成也可以正常工作，我可以在磁盘上看到图像并使用绘画等打开它。通常我所做的是在图像位置打开文件流，然后将图像设置到该位置。

```
 if (this.picPreview.Image != null)
 {
    this.picPreview.Image.Dispose();
    this.picPreview.Image = null;
 }
FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read);
this.picPreview.Image = System.Drawing.Image.FromStream(fs); 
```

但无论我做什么，表格上的图像都是空白的。我试过刷新表单，刷新图片框控件，将它的可见属性设置为可见，没有任何帮助。

我创建了一个单独的表单，其中仅包含一个图片框，并将图像位置传递给表单并重复打开流然后将图像设置到该位置的过程，它可以完美地工作。

没有异常被抛出AFAIK ...调试器设置为在所有异常上中断。

什么可能导致这种行为？

任何建议表示赞赏。我有另一个在后台工作线程中生成图像的应用程序，它也可以正常工作。

也许提供更多关于我正在尝试做的事情的背景将帮助我深入了解这一点。对于我的 datagridview 中的每一行，都有一到三列与它们相关联的图像。我已经提前生成了所有这些图像。滚动网格，我使用 SelectionChanged 事件获得图片框中第一个图像列的预览图像。它完美地工作。我还有一些单元格，当单击时会显示一个表单窗口，其中包含构成主表单上图像的图像的预览。这也很完美。我可以更改行并单击网格中的单元格，一切正常。基本上，我正在根据用户在绑定到数据网格的其他控件上选择的内容构建新图像。

当我尝试更改主窗体上图片框中的图像时出现问题。我可以更新数据源，并看到网格值更新，但是我现在使用第三方软件重新生成的图像，我可以验证它在磁盘上并且在更新发生后可以查看，只是消失了。一旦发生这种情况，我将不再在表单的图片框中获得图像，直到我关闭表单并重新打开，然后所有更新的数据都在那里，一切都恢复正常了。在选择更改以设置图像时调用的代码与更新新图像的代码完全相同。它是完全同步的。除了从头开始使用全新的形式之外，我已经没有其他想法了。

再次感谢所有建议。

我将从顶部开始。整体流程如下：

打开一个包含绑定到 SQL 视图的数据网格的表单。dgv 是只读的，一次只能选择一行。视图会自动填充，以及绑定到网格每一列的控件。其中包括一些文本框、组合框和其他复选框。每行都有一组与之关联的图像。当表单加载时，我可以向下滚动视图，并且对于每一行，表单上的图片框中都会出现一个新图像。所有这些图像都是预先生成的。选择一行时，该行最多可能有三个图像，在这种情况下，导致导航按钮允许用户预览每个图像。

我选择一行，更改窗体上的控件以更改所选行中的一个或多个单元格值。然后我点击了一个保存按钮，它会更新数据库和网格中的相应数据。然后我尝试更新该行的图像。此时图片框消失了，我失去了表格上的预览；在我关闭并重新打开表单之前没有图像出现，并且在我保存之前一切都很好。

在尝试解决这个问题时，我发现更新绑定的 dgv 会导致 selectchanged 事件被多次引发。有代码可以处理绑定不完整或视图中没有选择任何内容的情况。btnSave_Click 处理程序中还有代码可暂停 selectionchanged 事件处理程序，直到更新完成并重新生成图像。尽管如此，即使在视图中选择了我更新的行，实际选择的行（箭头所在的位置，以及所有控件显示的内容）第一行始终是更新后的“当前”行。我还不知道如何解决这个问题。这是更改选择和按钮保存事件处理程序的代码。

这是表单的屏幕截图：![在此处输入图像描述](../Images/007e43caa3c11d1f0c74cb5d879e4d8a.png)

selectionchanged 和 btn_save 事件处理程序的代码：

```
/// <summary>
        /// update the preview on a row selection change
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void dataGridView1_SelectionChanged(object sender, EventArgs e)
        {
            if (!BindingComplete) return;

            DataGridView dgv = (DataGridView)sender;

            if (!dgv.Focused || dgv.CurrentRow == null) return;         

            // set the pic preview to the current row image(s)
            // we need the record for the current index
            DataRowView currentDataRowView = (DataRowView)dgv.CurrentRow.DataBoundItem;

            if (currentDataRowView == null) return;

            DataRow currentRow = currentDataRowView.Row;

            LastSelectedIndex = dgv.SelectedRows[0].Index;

            Debug.WriteLine("Current row in SelectionChanged: " + currentRow.ItemArray[0].ToString());

            bool showBox = false, showProd = false, showWire = false;
            string box, prod, wire;

            string pdcProductName = currentRow.ItemArray[0].ToString();

            showWire = !string.IsNullOrEmpty(wire = currentRow.ItemArray[7].ToString());

            showBox = !string.IsNullOrEmpty(box = currentRow.ItemArray[8].ToString());

            showProd = !string.IsNullOrEmpty(prod = currentRow.ItemArray[9].ToString());

            // check for wirepath, box, and product. Enable the nav buttons if there is more than 
            // one label for this product. We need to check for LabelFileName being the same for both
            // box and product, in which case there is one file for both which defaults to box
            if ((showBox && showProd && prod == box) || showBox)
            {
                string targetFile = PreviewImagePath + pdcProductName + "_eBox.png";

                if (picPreview.Image != null)
                {
                    //picPreview.Image.Dispose();
                    //picPreview.Image = null;
                }

                // if the preview image doesn't exist yet use a default image
                if (!File.Exists(targetFile))
                {
                    // make the loading gif invisible
                    this.picLoading.Visible = true;

                    //picPreview.Image = AdminTILE.Properties.Resources.StandardPaper;
                }
                else
                {
                    this.picLoading.Visible = false;
                    Debug.WriteLine("Opening file " + targetFile);

                    FileStream fs = new FileStream(targetFile, FileMode.Open, FileAccess.Read);
                    picPreview.Image = System.Drawing.Image.FromStream(fs);
                    Image imgCopy = (Image)picPreview.Image.Clone();
                    this.picPreview.Visible = true;
                    fs.Close();

                    // preview in another frame
                    if (frm.IsDisposed)
                    {
                        frm = new PreviewImage();
                    }
                    frm.PreviewLabel(imgCopy);
                    frm.Show();                 

                    //picPreview.ImageLocation = targetFile;
                }
            }            
            else if (showProd)
            {
                string targetFile = PreviewImagePath + pdcProductName + "_eBox.png";

                if (picPreview.Image != null)
                {
                    picPreview.Image.Dispose();
                    //picPreview.Image = null;
                }

                if (!File.Exists(targetFile))
                {
                    // make the loading gif invisible
                    this.picLoading.Visible = true;
                    //picPreview.Image = AdminTILE.Properties.Resources.StandardPaper;
                }
                else
                {
                    this.picLoading.Visible = false;
                    FileStream fs = new FileStream(targetFile, FileMode.Open, FileAccess.Read);
                    picPreview.Image = System.Drawing.Image.FromStream(fs);
                    fs.Close();
                }
            }           

        }

        /// <summary>
        /// update the database with the current selections
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void btnSave_Click(object sender, EventArgs e)
        {

            if (dataGridView1.SelectedRows.Count == 0)
            {
                MessageBox.Show("No record is selected to update");
                return;
            }

            DialogResult result1 = MessageBox.Show("Saving Label Configuration. Are you sure?",
                "IMPORTANT!", MessageBoxButtons.YesNoCancel);

            // update the view
            if (result1 == DialogResult.Yes)
            {

                // we need the record for the current index
                DataRowView currentDataRowView = (DataRowView)dataGridView1.CurrentRow.DataBoundItem;
                DataRow currentRow = currentDataRowView.Row;                
                string pdcProductName = currentRow.ItemArray[0].ToString();

                Int32 currentIndex = dataGridView1.SelectedRows[0].Index;

                Debug.WriteLine("Current index in Save:" + currentIndex.ToString());

                string AgencyId="", LogoId="", WireId="";

                SqlDataAdapter LabeledProductsDataTableAdapter =
                new SqlDataAdapter("SELECT * FROM LabeledProducts",
                    printConfigTableAdapter.Connection);

                SqlDataAdapter LogosDataTableAdapter =
                new SqlDataAdapter("SELECT * FROM Logos",
                    printConfigTableAdapter.Connection);

                if (vwTILEAdminTableAdapter.Connection.State != ConnectionState.Open)
                {
                    printConfigTableAdapter.Connection.Open();
                }

                DataTable LogoDataTable = new DataTable();
                LogosDataTableAdapter.Fill(LogoDataTable);

                DataTable LabeledProductsDataTable = new DataTable();
                LabeledProductsDataTableAdapter.Fill(LabeledProductsDataTable);

                StringBuilder sql = new StringBuilder();

                // Fill a table with the results of the 
                // data adapter and query the table instead of the database.
                // An empty LogoDescription maps to an empty filename
                DataRow dataRow;

                if (cbAgency.SelectedItem != null)
                {
                    sql.Append("LogoDescription = '").Append(cbAgency.SelectedItem).Append("'");                       
                    dataRow = LogoDataTable.Select(sql.ToString())[0];
                    AgencyId = dataRow.ItemArray[0].ToString();

                    sql.Clear();
                }

                if (cbPrivateLabel.SelectedItem != null)
                {
                    sql.Append("LogoDescription = '").Append(cbPrivateLabel.SelectedItem).Append("'");
                    dataRow = LogoDataTable.Select(sql.ToString())[0];
                    LogoId = dataRow.ItemArray[0].ToString();

                    sql.Clear();
                }

                if (cbWire.SelectedItem != null)
                {

                    sql.Append("LogoDescription = '").Append(cbWire.SelectedItem).Append("'");
                    dataRow = LogoDataTable.Select(sql.ToString())[0];
                    WireId = dataRow.ItemArray[0].ToString();

                    sql.Clear();
                }

                // PdcProductName is the primary key
                sql.Append(@"UPDATE [dbo].[LabeledProducts]
                    SET [PdcProductName] = @pdcProd
                        ,[LabelProductName] = @lblProd
                        ,[LabelDescription] = @lblDesc
                        ,[Power] = @pwr
                        ,[Fabrication] = 0
                        ,[UL_File_Number] = @ul
                        ,[PrePrintedSerial] = @pps
                        ,[ShowOrderOnLabel] = 0
                        ,[PrivateLabelLogoId] = @plid
                        ,[AgencyImageId] = @aid
                        ,[WireDiagConfigId] = @wid
                        ,[ReleasedForProduction] = @rfp
                    WHERE PdcProductName = '").Append(pdcProductName).Append("'");

                using (SqlCommand command = new SqlCommand(sql.ToString(), vwTILEAdminTableAdapter.Connection))
                {
                    if (vwTILEAdminTableAdapter.Connection.State != ConnectionState.Open)
                        vwTILEAdminTableAdapter.Connection.Open();

                    LabeledProductsDataTableAdapter.UpdateCommand = command;
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@pdcProd", txtPdcProdName.Text);
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@lblProd", txtLabeledProd.Text);
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@lblDesc", txtLabelDesc.Text);
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@pwr", txtPower.Text);                       
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@ul", txtULFileNumber.Text);
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@pps", cbPrePrintedSerial.Checked);

                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@plid", LogoId);
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@aid", AgencyId);
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@wid", WireId);
                    LabeledProductsDataTableAdapter.UpdateCommand.Parameters.AddWithValue("@rfp", cbReleased.Checked);

                    //int rowsAffected = LabeledProductsDataTableAdapter.Update(LabeledProductsDataTable);  
                    int rowsAffected = command.ExecuteNonQuery();

                    // The DataViewManager returned by the DefaultViewManager
                    // property allows you to create custom settings for each
                    // DataTable in the DataSet.
                    DataViewManager dsView = this.tILEDataSet.DefaultViewManager;

                    // remove the selectionChanged event handler during updates
                    // every update causes this handler to fire three times!!!
                    this.dataGridView1.SelectionChanged -= new System.EventHandler(this.dataGridView1_SelectionChanged);

                    dataGridView1.DataSource = typeof(TILEDataSet.vwTILEAdminDataTable);
                    this.vwTILEAdminBindingSource.DataSource = typeof(TILEDataSet.vwTILEAdminDataTable);
                    this.vwTILEAdminBindingSource.DataSource = this.tILEDataSet.vwTILEAdmin;
                    this.dataGridView1.DataSource = this.vwTILEAdminBindingSource;                     
                    vwTILEAdminBindingSource.ResetBindings(false); // false for data change, true for schema change

                    this.vwTILEAdminTableAdapter.Fill(this.tILEDataSet.vwTILEAdmin);

                    // we need to reget the row after the update to pass to preview
                    currentIndex = LastSelectedIndex;
                    DataGridViewRow drv = this.dataGridView1.Rows[currentIndex];
                    currentRow = ((DataRowView)(drv.DataBoundItem)).Row;

                    // update the preview files

                    UpdatePreviewFiles(currentRow);

                    // try this
                    dataGridView1.ClearSelection();
                    // this doesn't work
                    dataGridView1.Rows[currentIndex].Selected = true;

                    // reset the selection changed handler once the update is complete
                    this.dataGridView1.SelectionChanged += new System.EventHandler(this.dataGridView1_SelectionChanged);

                }

            }
        } 
```

更新后，除了图片框消失外，表单看起来相同，并且第一行的数据显示在控件中，而不是突出显示的行。

![保存后](../Images/d512a385aa6bf06f9ad33da7f49ed6f1.png)

UpdatePreviewFiles 所做的只是用更新的图像替换图像。ShowPreview 所做的只是将图像设置为picturebox.Image。在我进行保存/更新之前，这一切都有效。

如果还有什么我可以提供的，请告诉我，这需要很长时间才能解决，我知道有一个相对简单的解释。

再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:32:31.293

尝试做：

```
this.picPreview.Image = Image.FromFile(imagePath); 
```

而不是乱搞`FileStream`.

此外，您不必在处理后设置`this.picPreview.Image`为`null`。当您调用 dispose 时，无论您是否有指向它的指针，它都会释放所有资源。

将 null 设置为某物，或者用其他更准确的说法，丢失对对象的任何引用（指针） - 将导致 GC（垃圾收集器）释放它的资源。

使用 Dispose 方法将允许 GC 释放它，即使您仍然有它的引用。（感谢 Rowland Shaw），所以只需将其重新设置为`Image.FromFile(imagePath)`就可以了。

对前一个图像的引用将会丢失，GC 会在需要时将其处理掉（不会很长，我保证）。

所以总结一下，我建议用这个答案开头的单行替换整个代码。

# php - 通过 JSON php 问题写入数据库

> ID：10555992
> 
> 赞同：0
> 
> 时间：2012-05-11T17:30:13.027
> 
> 标签：php, android, mysql, database, json

这里是写的代码是RadarsMySql.php

```
 <?php
 $con = mysql_connect("localhost","root","dacian");

 $db = mysql_select_db("radars");

 $sql = mysql_query("SELECT latitude,longitude,description FROM radars WHERE id > '0'");

 while($row=mysql_fetch_assoc($sql))
 $output[]=$row;
 print(json_encode($output));
 foreach($out["radars"] as $radars) { 
 $latitude = addslashes($radars[latitude]); 
 $longitude= addslashes($radars[longitude]); 
 $description = addslashes($radars[description]);

 mysql_query("INSERT INTO radars (latitude, longitude, description) VALUES('$name', '$ingredients', '$ingredients2')") or die (mysql_error()); 
 }

  mysql_close(); ?> 
```

它给了我这个错误：

```
Notice: Undefined variable: out in C:\xampp\htdocs\RadarsMySql.php on line 13

Warning: Invalid argument supplied for foreach() in C:\xampp\htdocs\RadarsMySql.php on line 13 
```

我需要这个，因为我想使用 JSON 从 android 应用程序写入数据。谁能告诉我出了什么问题或给我一些提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:34:06.527

```
foreach ($out["radars"] as $radars) {} 
```

如果`$out["radars"]`是一个数组，这很好。如果不是，你会得到一个错误：`Invalid argument supplied for foreach`.

在你的情况下`$out["radars"]`根本不存在。事实上`$out`根本不存在。所以你得到另一个错误：`Undefined variable out`.

您正在初始化一个变量`$output`，但随后尝试将其用作`$out`. 那是行不通的。

要从数据库中提取数据，请将其编码为 JSON，然后输出：

```
$sql = 'SELECT latitude,longitude,description FROM radars WHERE id>0'
$result = mysql_query($sql);

$rows = array();
while ($row = mysql_fetch_assoc($sql)) $rows[] = $row;
echo json_encode($rows); 
```

并接收发布到服务器的 JSON，对其进行处理，并将其添加到数据库中：

```
// It's being posted as application/json, not as application/x-www-form-urlencoded, so it won't populate the $_POST array.
if ($json = file_get_contents('php://input')) {
    // Never mind. We'll do it ourselves.
    $a = json_decode($json, true); // Now we have a nice PHP array.
    $insert = '';
    foreach ($a as $v) {
        if ($insert) $insert .= ',';
        $insert .= ' ("' . $d->escape($v['lattitude']) . '", "' . $d->escape($v['longitude']) . '", "' . $d->escape($v['description']) . '")';
    }
    $sql = 'INSERT INTO `radars` (`latitude`, `longitude`, `description`) VALUES' . $insert;
    $d->exec($sql);
}

// I'm assuming you have a database class here, $d.
// $d->exec() could be simply mysql_query() or mysqli_query().
// $d->escape() should be mysql_real_escape_string() or mysqli_real_escape_string(), but both of those functions will fail if a database connection is not currently open.
// So $d->escape() should (a) check whether a connection is currently open, (b) open one if not, (c) perform the escape and return the result. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:32:47.917

你在哪里定义 $out？;)

```
foreach($out["radars"] as $radars) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:36:46.363

利用

```
 foreach($output["radars"] as $radars) { 
```

您在打印语句上面创建的

# jquery - 滚动到达锚点时使用 JQuery 更改 CSS 元素

> ID：10555998
> 
> 赞同：21
> 
> 时间：2012-05-11T17:30:33.610
> 
> 标签：jquery

我目前有这个解决方案可以在页面到达某个点时更改 css 元素，但我想使用 #anchor-point 而不是像素值（1804）来响应较小的屏幕。我知道这一定很容易，但我找不到如何：

```
$(document).scroll(function(){
    if($(this).scrollTop() > 1804)
    {   
        $('#voice2').css({"border-bottom":"2px solid #f4f5f8"});
        $('#voice3').css({"border-bottom":"2px solid #2e375b"});
    }
}); 
```

这是当前状态：[http](http://tibio.ch/) ://tibio.ch 谢谢，

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-11T17:32:40.820

尝试这个：

```
var targetOffset = $("#anchor-point").offset().top;

var $w = $(window).scroll(function(){
    if ( $w.scrollTop() > targetOffset ) {   
        $('#voice2').css({"border-bottom":"2px solid #f4f5f8"});
        $('#voice3').css({"border-bottom":"2px solid #2e375b"});
    } else {
      // ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-03T15:06:36.063

```
$(window).bind("scroll", function() { 
   var $sec1 = $('.bg1').offset().top;
     var $sec2 = $('.bg2').offset().top;
     var $sec3 = $('.bg3').offset().top;
   var $sec4 = $('.bg4').offset().top; 
   var $sec5 = $('.carousel-indicators').offset().top;   

   if ($(this).scrollTop() < $sec2){ 
     $(".navbar1").fadeOut();  
     $(".navbar2").fadeOut();  
     $(".navbar3").fadeOut();  
   }     
   if ($(this).scrollTop() > $sec2 & $(this).scrollTop() < $sec3){ 
     $(".navbar1").fadeIn();   
     $(".navbar2").fadeOut();      
   } 
   if ($(this).scrollTop() > $sec3 & $(this).scrollTop() < $sec4){ 
     $(".navbar2").fadeIn();  
     $(".navbar3").fadeOut();  
   }    
   if ($(this).scrollTop() > $sec4 & $(this).scrollTop() < $sec5){ 
     $(".navbar3").fadeIn();  
     $(".navbar2").fadeOut();  
   }    
   if ($(this).scrollTop() > $sec5){ 
     $(".navbar1").fadeOut();  
     $(".navbar2").fadeOut();  
     $(".navbar3").fadeOut();   
   }         
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T17:50:18.080

```
function scroll_style() {
   var window_top = $(window).scrollTop();
   var div_top = $('#anchor-point').offset().top;

   if (window_top > div_top){
      $('#voice2').css({"border-bottom":"2px solid #f4f5f8"});
      $('#voice3').css({"border-bottom":"2px solid #2e375b"});
   }
}
$(function() {
  $(window).scroll(scroll_style);
  scroll_style();
 }); 
```

解决方案基于：[http ://blog.yjl.im/2010/01/stick-div-at-top-after-scrolling.html](http://blog.yjl.im/2010/01/stick-div-at-top-after-scrolling.html)