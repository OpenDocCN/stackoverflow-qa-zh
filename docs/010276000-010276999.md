# StackOverflow 问答 10276000-10276999

# c# - 具有既作为键又作为值的条目的集合？

> ID：10276002
> 
> 赞同：-1
> 
> 时间：2012-04-23T06:51:02.927
> 
> 标签：c#, collections, dictionary, tuples, lookup

我正在寻找一种可以让我存储和查找多个元组的解决方案。字典只提供了一种查找键而不是值的简单方法。我理解为什么（值的非唯一性可能性）。但是，如果每个条目（键和值）都是严格唯一的怎么办。是否有一个集合可以轻松地让我存储和查找我选择的任何键并返回该键的匹配字段？在查找值时，我必须指定关键字段和所需的查找字段。我的目标是 C# 4.0

例子：

```
Collection<string, int, myEnum> myCollection = new ...

myCollection.Add("abc", 5, myEnum.First);
myCollection.Add("def", 6, myEnum.Second); 
```

myCollection[int, myEnum, 6] = Second (of type myEnum) -> 我只是想出了如何指定键和值字段的方式。这样的收藏是否存在，还是我需要自己推出？

我知道我正在进入表格的概念，但如果可能的话，我想避免使用表格结构。

注意：元组的数量将限制为 <20（因此，如果我自己滚动，我不会过分担心必须循环，但我会寻找更优雅的东西）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:54:35.427

你可以只`hashset`用一个`tuple`。像这样：

```
var hs=new HashSet<Tuple<string,int,myEnum>>(); 
```

然后添加你这样做（`add`函数是O（1））：

```
hs.Add(new Tuple<string,int,myEnum>("abc", 5, myEnum.First));
hs.Add(new Tuple<string,int,myEnum>("def", 6, myEnum.Second)); 
```

要查找您执行此操作的元组（`contains`函数为 O(1)）：

```
var tupleTolookUp=new Tuple<string,int,myEnum>("abc", 5, myEnum.First);
if(hs.Contains(tupleTolookUp))
{
    //do what ever with the tupleTolookUp
} 
```

在中`hashset`必须`Tuples`是独一无二的。但好处是您不必重写`Equals`and `gethashcode`。因为元组在内部进行。

参考：

*   [HashSet 类](http://msdn.microsoft.com/en-us/library/bb359438.aspx)
*   [元组类](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:01:30.613

以下是 .NET 中所有集合的列表：
[http://msdn.microsoft.com/en-us/library/system.collections.generic.aspx](http://msdn.microsoft.com/en-us/library/system.collections.generic.aspx)
如您所见，找不到这样的集合。

我也很确定在描述这种范式的普通计算机科学文献中没有标准的数据结构。

Arion 的实现将提供您所需要的，但它在搜索键/值时缺乏性能，并且不提供键或值的唯一性，而仅提供对。

你能做的是用两个字典实现你的数据结构，其中一个的值引用另一个的键。

# windows-phone-7 - 按下设备后退按钮必须导航到 Wp7 中的后退或后退堆栈

> ID：10276005
> 
> 赞同：2
> 
> 时间：2012-04-23T06:51:33.077
> 
> 标签：windows-phone-7, button, back, marketplace

根据 5.2.4.1 要求，按下后退按钮的预期结果必须将应用程序返回到前一页或返回到后堆栈内的任何前一页。如果我清除后台堆栈并导航到设备返回按钮上的新页面，这对市场有效吗？

另外，如果我导航到另一个页面并且 OnNavigateTo 该页面我清除了后台堆栈，这对市场提交也有效吗？

谢谢和问候， 金谷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:53:12.643

如果您在某个时候清除了后退堆栈，然后在用户单击硬件后退按钮时导航到新页面，那么您的应用将无法通过市场验证。我确实遇到过这种情况，返回并让应用程序“按原样”导航而不干扰后台堆栈有点令人头疼。

当你像这样改变手机应用程序的正常行为时，微软会对此表示不满。他们试图触及的概念是所有应用程序的共同体验，包括操作系统。

根据我的经验（在将应用程序发布到市场之前进行用户测试），如您所描述的那样改变后退按钮的行为会让用户感到沮丧，因为它打破了他们对应用程序应该如何运行的期望。用户习惯了后退按钮做一些非常具体的事情，不管他们打开了什么应用程序。您可能需要重新考虑以您的方式构建应用程序的原因，并强烈考虑是否存在用户会发现更愉快和自然的替代方案。

但是，是的，我可以根据经验告诉你，微软会因此而让你失望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:00:17.447

> 如果我清除后台堆栈并导航到设备返回按钮上的新页面，这对市场有效吗？

很可能不会，但问题是如果我按下该页面上的后退按钮会发生什么。要求有点复杂。您应该问自己的问题是“我的应用程序会仅使用后退按钮退出吗？”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:01:13.763

检查市场测试套件中的功能。你会得到正确的答案。请参阅测试套件中后退按钮功能的使用。

# oracle11g - 在 Hibernate 中映射 Oracle 11g 虚拟列

> ID：10276007
> 
> 赞同：1
> 
> 时间：2012-04-23T06:51:35.710
> 
> 标签：oracle11g, hibernate-mapping

这方面的一些问题：-

一个。是否有特定的休眠`type`可用于 oracle 11g 虚拟列或原生休眠？

湾。如果要使用例如 , 等类型`string`（`long`并且它们在 hql 查询中使用时工作正常），那么如何使用 Criteria API 获取映射到虚拟列的属性？

C。目前，条件查询将这些属性返回为空，尽管它们中确实有值。作为替代方案，我`formula`通过调用用于派生虚拟列的函数来使用该元素，并返回具有实际值的结果集。但是，在表中拥有一个虚拟列是没有用的，因为处理开销再次转移到休眠/应用程序代码。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:17:29.897

这似乎是虚拟列的问题，Hibernate 对此无能为力，因为它只是生成 sql。

最简单的方法是使用公式属性而不是虚拟列。如果虚拟列是预先计算的，那么您可以使用普通列和触发器来模拟它们。

# python - Python / SQLalchemy - 如何触发查询？

> ID：10276011
> 
> 赞同：1
> 
> 时间：2012-04-23T06:51:45.713
> 
> 标签：python, sqlalchemy

我正在让 SQLalchemy 通过 python 为我做一些任务。

我可以通过以下示例使其正常工作，但是现在我在从`for`循环中移动查询调用时被卡住了一段时间：

```
for instance in session.query(versions_table).filter(versions_table.c.version==Version): 
```

并通过调用表结果之一获得结果：

```
 existingID = instance.id 
```

（`id`返回表的PK在哪里）

我不能做的是找到一种随意触发查询的方法，或者作为条件语句的结果，例如

```
if some conditions met:
 do query
 get / process result 
```

我只能通过调用来获取返回值`instance.fieldname`

谁能指出我哪里出错了，接受我对 SQLalchemy 函数的设置/调用方式并不是 100% 满意。

我想做的是：

```
for instance in session.query(versions_table).filter(versions_table.c.version==Version):
 if instance.id == True:  #this is not correct
  print instance.id 
 else:
  print "no match" 
```

更完整的脚本：

```
from sqlalchemy import *
from sqlalchemy.orm import sessionmaker

engine = create_engine('mysql+mysqldb://u:p@localhost/sqlalchtest',
                   echo=False)

metadata = MetaData(bind=engine)
Session = sessionmaker(bind=engine)
versions_table = Table('versions', metadata, autoload=True)

def doVersionGet(sigfile_filename):
 tree = etree.parse(sigfile_filename)
 root = tree.getroot()
 attributes = root.attrib
 if 'DateCreated' in root.attrib:
  DateCreated = (attributes["DateCreated"])
 if 'Version' in root.attrib:
  Version = (attributes["Version"])
 doVersionPush(DateCreated,Version)

def doVersionPush(DateCreated,Version):
 session = Session() 
 for instance in session.query(versions_table).filter(versions_table.c.version==Version):
  existingID = instance.id 
  #this is not really what I want to do here any way, but this will fire the query every time

if __name__ == "__main__":
 path = "location\sub_sig_files"  ##home_subset for tests
 for (path, dirs, files) in os.walk(path):
  for file in files:
   sigfile_filename = str(path)+"\\"+str(file)
   doVersionGet(sigfile_filename) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:50:23.763

您可以使用 执行查询[`Query.all`](http://docs.sqlalchemy.org/en/latest/orm/query.html?highlight=query#sqlalchemy.orm.query.Query.all)，这将执行查询并返回实例：

```
instances = session.query(versions_table).filter(versions_table.c.version==Version).all() 
```

# svn - 如何处理在多个应用程序中使用的通用代码

> ID：10276012
> 
> 赞同：1
> 
> 时间：2012-04-23T06:51:49.063
> 
> 标签：svn, code-reuse, modularity

在我们的应用程序中，我们有相当多的代码在多个应用程序中使用。该代码是使用 SVN 外部共享的（请参阅问题[Multiple apps with common code -- how to approach this?](https://stackoverflow.com/questions/757382/multiple-apps-with-common-code-how-to-approach-this)）。为了简化部署，我们创建了独立的可执行文件（没有 DLL）。

问题是我们不仅得到了具有简单功能的通用代码，而且还得到了具有依赖于其他通用代码的功能的代码。例如：

*   模块 A 包含通用功能 A
*   模块 B 包含通用功能 B
*   模块 X 包含通用功能 X，但需要 A 和 B。

在许多情况下，这不仅仅是一些需要另一个模块的模块，而且“如果你有模块 A 和模块 B，那么你需要模块 X 将它们的功能链接在一起”。

由于我们对每个通用代码模块都使用了一个 SVN 外部，因此我们最终会得到一大堆外部。对于很多模块组合，我们还有其他模块：

*   如果你有模块 A 和 B，你还需要模块 X
*   如果你有模块 B 和 C，你还需要模块 Y
*   如果你有模块 A 和 C，你还需要模块 Z
*   ...

虽然 SVN externals 说得很清楚，但是使用起来还是很麻烦的：

*   如果我们添加依赖于 2 个（或更多）其他模块的功能，我们经常需要创建新模块
*   如果添加了新模块，我们经常需要更改所有应用程序的外部
*   SVN 更新耗时越来越长

是否有任何好的模式或技术可以用来使这更容易（或更快，......）？例如：

*   如果模块 A 确实存在，则使用 #define 和 #ifdef 仅包含依赖于模块 A 的代码（我们在 15 年前曾经这样做，但我不喜欢这种方法）
*   递归外部（存在吗？）
*   DLL的东西？（尽管这可能只会使问题变得更糟）
*   ...

还有其他建议吗？

# c# - 从输入列表中查找表中不存在的 id

> ID：10276015
> 
> 赞同：-2
> 
> 时间：2012-04-23T06:52:11.637
> 
> 标签：c#, .net, sql-server

我有一个带有 id 列表的变量（例如：121,131,142,145）。从中，我想找出表中不存在的 id 列表。此查询的输出应该是不存在的 id 列表。如何我使用单个 msssql 查询实现。如果表中不存在 id 142&145，则查询应返回这两个值。是否可以使用 IN 子句

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:17:11.930

您将需要一个分隔字符串到表格转换 udf，如下所示：

```
CREATE FUNCTION [dbo].[fnc_List2Table] (
    @list      varchar(8000),
    @delimiter varchar(16) = ','
) RETURNS @result TABLE (
    ListIndex int,
    Value varchar(8000)
)
AS
BEGIN
    SET @list = LTRIM(RTRIM(ISNULL(@list, SPACE(0))))
    DECLARE @n int, @i int, @delimiterIndex int, @nextItem varchar(8000)
    SET @n = LEN('#' + @delimiter + '#') - 2
    SET @i = 0
    WHILE @list <> SPACE(0)
    BEGIN
        SET @i = @i + 1
        SET @delimiterIndex = CHARINDEX(@delimiter, @list)
        IF @delimiterIndex = 0
        BEGIN
            SET @nextItem = LTRIM(RTRIM(@list))
            SET @list = SPACE(0)
        END
        ELSE
        BEGIN
            SET @nextItem = LTRIM(RTRIM(LEFT(@list, @delimiterIndex-1)))
            SET @list = RIGHT(@list, LEN(@list)-(@delimiterIndex+(@n-1)))
        END
        INSERT INTO @result (ListIndex, Value)
        VALUES (@i, @nextItem)
    END
    RETURN
END 
```

然后您可以使用左连接轻松检查 id：

```
declare @ids varchar(50)
set @ids = '121,131,142,145'

select F.Value
from fnc_List2Table(@ids,',') F 
left join YourTable A on F.Value = A.ID
where A.ID is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:28:31.540

这是另一种实现，它是来自[http://www.sqlservercentral.com/articles/Tally+Table/72993/的修改版本](http://www.sqlservercentral.com/articles/Tally+Table/72993/)

```
 CREATE FUNCTION dbo.DelimitedSplit8K
    --===== Define I/O parameters
        (@pString VARCHAR(8000), @pDelimiter CHAR(1))
    RETURNS TABLE WITH SCHEMABINDING AS
    RETURN
    --===== "Inline" CTE Driven "Tally Table" produces values from 0 up to 10,000...
        -- enough to cover VARCHAR(8000)
    WITH E1(N) AS (
                    SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL 
                    SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL 
                    SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1 UNION ALL SELECT 1
                ),                          --10E+1 or 10 rows
        E2(N) AS (SELECT 1 FROM E1 a, E1 b), --10E+2 or 100 rows
        E4(N) AS (SELECT 1 FROM E2 a, E2 b), --10E+4 or 10,000 rows max
    cteTally(N) AS (--==== This provides the "zero base" and limits the number of rows right up front
                        -- for both a performance gain and prevention of accidental "overruns"
                    SELECT 0 UNION ALL
                    SELECT TOP (DATALENGTH(ISNULL(@pString,1))) ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) FROM E4
                ),
    cteStart(N1) AS (--==== This returns N+1 (starting position of each "element" just once for each delimiter)
                    SELECT t.N+1
                    FROM cteTally t
                    WHERE (SUBSTRING(@pString,t.N,1) = @pDelimiter OR t.N = 0) 
                )
    --===== Do the actual split. The ISNULL/NULLIF combo handles the length for the final element when no delimiter is found.
    SELECT ItemNumber = ROW_NUMBER() OVER(ORDER BY s.N1),
        Item = SUBSTRING(@pString,s.N1,ISNULL(NULLIF(CHARINDEX(@pDelimiter,@pString,s.N1),0)-s.N1,8000))
    FROM cteStart s; 
```

udf 保留原样，来自 sqlservercentral 文章

```
select a.id from
 (-- simulate the id table using union queries
  select 1 id union all
  select 2 id union all
  select 3 id union all
  select 4 id union all
  select 5 id union all
  select 6 id union all
  select 7 id union all
  select 8 id union all
  select 9 id union all
  select 10 id union all
  select 11 id 
)a 
 LEFT JOIN -- Do the magic
 (SELECT item id FROM DelimitedSplit8K(  '1,2,4,5',','))b on a.id = b.Id
  WHERE b.Id is null; 
```

我使用了左连接并过滤了空值而不是 IN 语句

# javascript - Ext JS 应用程序中的部署：更改商店中的 URL

> ID：10276016
> 
> 赞同：0
> 
> 时间：2012-04-23T06:52:14.873
> 
> 标签：javascript, deployment, extjs

我正在为我正在构建的应用程序（使用 Ext JS + 另一个应用程序的后端）制定构建过程，并尝试查看它是否存在更改本地 URL 的“最佳实践”方式（例如 data/my-data. json) 到我的开发服务器的后端，然后到我的生产服务器的后端。

在我的商店中，我目前有以下代码：

```
Ext.define('APP.store.DataRecords', {
    extend: 'Ext.data.Store',
    model: 'APP.model.DataRecord',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        api: {
            read: 'data/data-records.json',
            update: 'data/update-data-records.json'
        },
        reader: {
            type: 'json',
            root: 'records',
            successProperty: 'success'
        }
    }
}); 
```

运行 sencha build 命令后，理想情况下，我希望将 Store 转换为以下内容：

```
Ext.define('APP.store.DataRecords', {
    extend: 'Ext.data.Store',
    model: 'APP.model.DataRecord',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        api: {
            read: 'http://mydevserver/.../data-records.json',
            update: 'http://mydevserver/.../update-data-records.json'
        },
        reader: {
            type: 'json',
            root: 'records',
            successProperty: 'success'
        }
    }
}); 
```

我想如果没有任何“直接”方法，我需要构建一个额外的脚本，它首先重新映射我所有的 URL，然后调用 sencha 编译器。

**PS**我知道通常这一切都是通过使用“相对”URL 透明地发生的，但是我正在与之交互的后端有一些限制，这可以防止这种情况发生。

想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:32:55.410

我建议不要在连接到您的商店时使用完整的 URL。如果您正在使用 Ajax 调用并试图转到不同的域名，则此类调用将被视为跨站点调用，浏览器将阻止它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T10:52:47.030

在你的 app.json

```
 /**
     * override objects for setting build environment specific
     * settings.
     */
    "production": {
      "api_url": "http://example.com"
    },

    "testing": {
      "api_url": "http://localhost:3000"
    },

    "development": {
      "api_url": "http://localhost:3000"
    },
```

在您商店的代理配置中

```
 proxy: {
      type: 'rest',
      url: Ext.manifest.api_url + '/products',
      format: 'json',
      withCredentials: true,
      useDefaultXhrHeader: false,
      reader: {
        type: 'json',
        rootProperty: '',
        totalProperty: ''
      },
      writer: {
        type: 'json'
      }
    }
```

# qt - 带调试器的 QT

> ID：10276017
> 
> 赞同：3
> 
> 时间：2012-04-23T06:52:25.680
> 
> 标签：qt, qt4

我是 QT 新手

我在该位置下载了 QT windows 的在线安装程序

[http://qt.nokia.com/downloads](http://qt.nokia.com/downloads)

我只是尝试了像 printin hello world 这样的简单程序。

我可以执行程序。但我无法调试它。我收到类似的错误

> 能够调试“x86-windows-msvc2008-pe-32bit”类型的二进制文件的调试器引擎“Cdb 引擎、Gdb 引擎”均未正确配置。

我应该下载不同的版本进行调试还是我错过了包含调试工具的任何程序？请帮我用调试器安装 QT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:01:19.100

Go to `Tools -> Options -> Tool Chains`, and tell us what you see. I have only ever used Qt with mingw, not Visual Studio, so I don't know if it will help, but look at [this question](https://stackoverflow.com/q/5380663/428857) and its resolution.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:16:33.737

我对 QtCreator 有同样的问题。QtSDK 的更新为我解决了这个问题。您可以在 QtCreator 的菜单中找到更新机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T09:28:36.563

你有安装 Visual Studio 吗？您需要安装它，以便可以使用此引擎进行调试。

这是 Visual Studio 的链接：[LINK](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)

享受！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T00:49:01.703

在某些时候，QtSDK 安装程序中似乎存在错误。首先，尝试更新。其次，试试这个：

1.  打开 Qt Creator 并转到`Tools → Options... → Build & Run`，选择`Tool Chains`选项卡；
2.  应该有`Auto-detected`列表，在那里选择`Mingw as GCC for Windows targets`并单击`Clone`按钮；
3.  现在选择克隆工具链，您应该可以在底部编辑特定字段；
4.  单击`Browse...`右侧`Debugger`字段并选择`%QTDIR%\pythongdb\python_2.7based\gdb-i686-pc-mingw32.exe`；
5.  保存您的编辑，创建一个新项目（不要忘记选择克隆的工具链）并尝试调试。

它有效吗？

# security - X.509 DN 的所有部分都是可选的吗？

> ID：10276018
> 
> 赞同：7
> 
> 时间：2012-04-23T06:52:38.027
> 
> 标签：security, encryption, ssl, x509certificate, x509

X.509 中 DN 的所有部分都是可选的吗？
来自 RFC3280：

> 本规范的实现必须准备好在发布者和主题（第 4.1.2.6 节）名称中接收以下标准属性类型：
> 
> ```
>  * country,
>   * organization,
>   * organizational-unit,
>   * distinguished name qualifier,
>   * state or province name,
>   * common name (e.g., "Susan Housley"), and
>   * serial number. 
> ```

我找不到这些是否是强制性的。
我之所以问，是因为我看到了一个由受信任的 CA 签名的证书，但在颁发者的字段`CN`中缺少该证书（`C`而且我认为这并不重要）。
我期待这`CN`是强制性的。是吗？从发行人的字段
中省略 是否有任何安全隐患？`CN`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T11:53:59.450

正如@Bruno 所说，RFC3280 中没有要求颁发者 DN 具有 CN。RFC3280 指出：

> issuer 字段必须包含一个非空的专有名称（DN）。

但是，RFC3280 对应该存在哪些 RDN 没有任何要求。大多数 CA 确实在颁发者 DN 中包含 CN，但有些不包含，例如此 Equifax CA。

> OU = Equifax 安全证书颁发机构，O = Equifax，C = 美国

或者这个 Verisign CA。

> OU = VeriSign Trust Network,OU = "(c) 1998 VeriSign, Inc. - 仅供授权使用",OU = Class 3 Public Primary Certification Authority - G2,O = "VeriSign, Inc.",C = US

使用 RFC3280 的路径构建和验证不需要颁发者 DN 中的 CN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:16:25.380

RFC 说主题的名称可能出现在主题备用名称扩展中。第 4.2.1.7 节说明了以下内容（必须是您的情况）：

> 此外，**如果**证书中包含的唯一主题身份是替代名称形式（例如，电子邮件地址），**则主题专有名称必须为空**（空序列），并且主题AltName 扩展必须存在。如果主题字段包含一个空序列，主题AltName 扩展必须标记为关键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T16:23:24.380

X509 证书应该比较整个 dn。那是

```
Dn1 == Dn2 
```

> 如果两个专有名称 DN1 和 DN2 具有相同数量的 RDN，则它们匹配，对于 DN1 中的每个 RDN，DN2 中都有一个匹配的 RDN，并且匹配的 RDN 在两个 DN 中以相同的顺序出现。

每个组件都是可选的，它们可以重复。但是，匹配需要所有字段匹配。

来自[ietf rfc5280](https://www.rfc-editor.org/rfc/rfc5280)

# java - 具有透明背景的 LWJGL 窗口？

> ID：10276020
> 
> 赞同：3
> 
> 时间：2012-04-23T06:52:41.893
> 
> 标签：java, opengl, graphics, transparency, lwjgl

我想创建一个没有“黑色背景”区域的窗口，但是您可以看到任何其他打开的窗口等。

即渲染场景，只渲染场景，不留边框，不留背景区域。

我读过一种方法，该方法涉及渲染到隐藏的 OpenGL 窗口并将其缓冲在内存中、创建透明分层窗口以及从内存复制到透明窗口。

显然这是非常占用 CPU/内存的，所以我想知道在 Java 和 LWJGL 中是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:41:38.777

**这只能通过特定于平台的代码来完成。**

[该线程](https://stackoverflow.com/questions/4052940/how-to-make-an-opengl-rendering-context-with-transparent-background)提供了有关该主题的有趣讨论。[这篇文章](https://stackoverflow.com/a/4201472/176769)分享了在 Windows 上实现这种效果的**C**代码，以及在 Linux 上[的这篇文章。](https://stackoverflow.com/a/9215724/176769)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:10:15.930

这是特定于操作系统的，因为“操作系统/窗口管理器/非您部门”拥有其他窗口。

在 Windows 上，OpenGL 不能参与这种合成。其他操作系统可能允许它。

# sql - SQL Server – 使用单个（ANSI 样式）语句插入多行

> ID：10276021
> 
> 赞同：0
> 
> 时间：2012-04-23T06:52:53.003
> 
> 标签：sql, sql-server, tsql, sql-server-2008, sql-insert

我正在使用以下方法使用单个`INSERT`语句插入多行，即插入行的 ANSI 样式。它在 SQL Server 2008 和 2012 中可用。我不确定 SQL Server 2005/2000。

创建测试表：

```
create table TestInsert (ID INT, Name NVARCHAR(50)) 
```

单个`INSERT`语句插入 5 行

```
INSERT INTO TestInsert 
VALUES (1,'a'),
       (2,'b'),
       (3,'c'),
       (4,'d'),
       (5,'e') 
```

请让我知道是否有任何其他最佳方法可以实现这一目标

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:01:05.340

试试这个：

```
INSERT TestInsert
    SELECT  1, 'a'
    UNION ALL
    SELECT  2, 'b'
    UNION ALL
    SELECT  3, 'c'
    UNION ALL
    SELECT  4, 'd'
    UNION ALL
    SELECT 5, 'e' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:42:52.260

> **SQL Server - 使用单个（ ANSI 样式**）语句插入多行

**对于 SQL Server 2000+**

根据[SQL The Complete Reference，第三版（2009 年 8 月 12 日）](https://rads.stackoverflow.com/amzn/click/com/0071592555)：

1) 多行插入的语法是

```
INSERT INTO table-name (columns not mandatory) 
query 
```

（第 236 页，图 10-3）。

2) SELECT 语句必须有 FROM 子句（第 87 页，图 6-1）。

因此，在这种情况下，要仅使用一条语句插入多行，`INSERT`我们需要一个[只有一行的辅助表](http://en.wikipedia.org/wiki/DUAL_table)：

```
CREATE TABLE dual(value INT PRIMARY KEY CHECK(value = 1))
INSERT dual(value) VALUES(1) 
```

进而

```
INSERT INTO table-name (columns) -- the columns are not mandatory
SELECT values FROM dual
UNION ALL
SELECT another-values FROM dual
UNION ALL
SELECT another-values FROM dual 
```

**编辑 2：对于 SQL Server 2008+**

从 SQL Server 2008 开始，我们可以使用行构造函数：（`(values for row 1), (values for row 2), (values for row 3), etc.`第 218 页）。

所以，

```
INSERT INTO TestInsert 
VALUES (1,'a'), --The string delimiter is ' not ‘...’
       (2,'b'),
       (3,'c'),
       (4,'d'),
       (5,'e') 
```

将适用于 SQL Server 2008+。

# jquery - 将我的班级名称保留在活动的 nivoSlider 图像中

> ID：10276022
> 
> 赞同：0
> 
> 时间：2012-04-23T06:52:59.030
> 
> 标签：jquery, nivo-slider

我正在尝试在现有站点上使用 nivoSlider（jQuery 插件）...并且我使用一个类来帮助设置幻灯片中图像的样式。例如，我的图像列表将包含多个类，如下所示：

```
<img class="active rounded" src="... 
```

我的 nivoSlider 工作正常，我的第一张图片以类名“active”开头，如图所示……幻灯片中的所有图片都包含“rounded”类。看起来，随着 jQuery 推进幻灯片的图像，它（显然）将“活动”类应用于图像以使其显示出来。问题是（在我看来）当应用这个“活动”类时，我现有的“圆角”类被删除了......所以我有方角，而不是漂亮的圆角。有谁知道在 nivoSlider 中是否有某个地方我可以指定“活动”图像也应该具有/维护“圆形”类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:57:10.677

一直没有找到答案。继续并关闭它，因为我已经转到另一个画廊脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T07:54:01.707

您需要手动编辑 nivo-slider js 文件并找到

```
sliderImg.attr('src', vars.currentImage.attr('src'))... 
```

并在每一行中添加它后面的下一个片段，如上所示

```
.attr('class', vars.currentImage.attr('class')) 
```

所以结果变成了这样：

```
sliderImg.attr('src', vars.currentImage.attr('src')).attr('class', vars.currentImage.attr('class'))... 
```

然后你需要扫描文件

```
slider.append(
    $('<div class="nivo-box" name="'+ cols +'" rel="'+ rows +'"><img src="'+ vars.currentImage.attr('src') +'" style="position:absolute; width:'+ slider.width() +'px; height:auto; display:block; top:-'+ (boxHeight*rows) +'px; left:-'+ (boxWidth*cols) +'px;" /></div>').css({ 
        opacity:0,
        left:(boxWidth*cols)+'px', 
        top:(boxHeight*rows)+'px',
        width:(slider.width()-(boxWidth*cols))+'px'

    })
); 
```

或类似的。您需要确保相同的重要部分是

```
<img src="'+ vars.currentImage.attr('src') +'" 
```

在该部分后面您需要添加：

```
 class="'+ vars.currentImage.attr('class') +'" 
```

# php - 动态页面的url重写

> ID：10276024
> 
> 赞同：1
> 
> 时间：2012-04-23T06:53:02.673
> 
> 标签：php, html, url-rewriting

我已经在 mu php 网站中实现了 URL 重写

在这里我需要将我的链接显示为

```
mydomain.com/komet-india/Best-Indian-Hill-Stations-1/Delhis-Hotel 
```

这`Best-Indian-Hill-Stations,1,Delhis-Hotel`是动态值，我也会举另一个例子

```
mydomain.com/komet-india/Popular Indian Pilgrimages-2/new-Hotel 
```

这里

```
Popular Indian Pilgrimages,2,new-Hotel 
```

是动态值。

第一个参数是类别，第二个是id，第三个是酒店名称

我已经写了以下网址来执行此操作，请参阅我的代码

```
Rewrite Rule (\d+)-(\d+)/(.*)/? hotel-detail.php?title=$1&id=$2&top=$3&hotel=4 [nc] 
```

但它导致未找到页面

有人给我解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:08:30.500

我有几乎同样的问题。我得到了完成这项工作的最佳方法。.htaccess 文件

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

url解析代码

```
$url = isset($_GET['url']) ? $_GET['url'] : null;
    $url = str_replace(".html", "", $url);
    $url = str_replace("-", "_", $url);
        //you could use rtrim(); but I had some trouble when the url had the "t" as the ending character.
    //$url = rtrim($url, '.html');
    $url = explode('/', $url); 
```

通过这样做，您将获得 $url 数组中的 url。

说 mydomain.com/komet-india/Best-Indian-Hill-Stations-1/Delhis-Hotel

```
$url[0] = komet_india
$url[1] = Best_Indian_Hill_Stations_1
$url[2] = Delhis_Hotel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:08:46.823

尝试像这样重写规则...

```
RewriteRule komet-india/(.*)-(\d+)/(.*)$ hotel-detail.php?title=$1&id=$2&top=$3&hotel=4 [NC,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:11:15.927

尝试将您的重写规则更改为以下规则。他应该创造

```
Rewrite Rule (.*)-(\d+)/(.*)/? hotel-detail.php?title=$1&id=$2&top=$3&hotel=4 [nc] 
```

我也不确定你是否需要那里的 komet-india。但我不知道你的本地主机设置。

# cocoa - 如何在 Mac OS X 上跟踪文件位置？

> ID：10276026
> 
> 赞同：7
> 
> 时间：2012-04-23T06:53:28.547
> 
> 标签：cocoa, filesystems, osx-snow-leopard

[BBEdit](http://en.wikipedia.org/wiki/BBEdit)的一个很好的功能是它如何跟踪文件，无论这些文件发生了什么。我正在处理的应用程序需要跟踪用户拥有的许多文件的位置。用户可以移动或删除这些文件，我的应用程序需要知道这些文件在哪里，即使我的应用程序在位置更改发生时没有运行。

针对这个问题的推荐策略是什么，或者可能是什么？

在应用程序运行时跟踪文件不是问题。无论我的应用程序未运行时这些文件发生了什么，我都希望在我的应用程序运行时获得文件的正确路径。

手动搜索文件是最好的方法，还是有一个我忽略的 API 可以让这更容易？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T07:10:25.273

从 10.6 开始，它由以下的“书签”功能完成`NSURL`：

> 书签是一种新工具，用于生成对由 URL 标识的资源的持久引用。书签是系统从资源 URL 生成的数据对象。书签数据封装了对基础资源的持久、不透明的引用以及创建书签时捕获的资源属性的值。书签可以存储在内存或磁盘上，稍后用于访问它包含的资源属性值，或解析为覆盖底层资源的 URL。对于文件系统资源，书签能够定位自创建书签以来已移动或重命名的资源，类似于 Alias Manager 别名。请注意，在此版本中，书签仅按路径解析。
> 
> NSURL.h 中进一步记录了以下新的 NSURL 方法：
> 
> ```
> - (NSData *)bookmarkDataWithOptions:(NSURLBookmarkCreationOptions)options includingResourceValuesForKeys:(NSArray *)keys relativeToURL:( NSURL*)relativeURL error:(NSURL **)error;
> - (NSURL*)initByResolvingBookmarkData:(NSData*)bookmarkData options:(NSURLBookmarkResolutionOptions)options relativeToURL:(NSURL *)relativeURL bookmarkDataIsStale:(BOOL *)isStale error:(NSError **)error;
> + (NSURL *)URLByResolvingBookmarkData:(NSData *)bookmarkData options:(NSURLBookmarkResolutionOptions)options relativeToURL:(NSURL *)relativeURL bookmarkDataIsStale:(BOOL *)isStale error:(NSError **)error;
> + (NSDictionary *)resourceValuesForKeys:(NSArray *)keys fromBookmarkData:(NSData *)bookmarkData; 
> ```

在 10.6 之前，它是使用[*aliases*](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/Alias_Manager/Reference/reference.html)完成的。

# java - 我需要 Web/JavaEE 容器中的一个线程来完成同一个 JVM 中的 AsyncContext objs

> ID：10276028
> 
> 赞同：2
> 
> 时间：2012-04-23T06:53:31.083
> 
> 标签：java, jakarta-ee, servlets, java-ee-6, servlet-3.0

我需要 Web/JavaEE 容器中的线程来从外部源获取信息并在同一 JVM 中完成相应的 AsyncContext obj。

我希望有一个零延迟解决方案，因此排除了定期轮询或计时器。

我可以启动一个线程，但我相信它在 Web 容器中不受欢迎并且不可移植。**Q1。是否可以在 Java EE 容器中可移植地运行线程？**

**Q2。如果我想在 Web 容器中运行一个线程，那么“最不邪恶”的方式是什么？** 初始化上下文？执行服务？线程运行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:11:08.863

[AsyncContext.html#start](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html#start%28java.lang.Runnable%29)可能是你能得到的最接近的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:32:23.780

您可以使用 jsr237 中的工作管理器在 Java EE 容器中创建线程。： http: [//jcp.org/en/jsr/detail](http://jcp.org/en/jsr/detail?id=237) ?id=237 。如果你想要一个异步作业，你应该使用 JMS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T09:26:08.813

在 Java EE 6 中，您可以将`@Asynchronous`注释放在 EJB 方法上，以使该方法中的工作由特殊的线程池处理：

```
@Stateless
public class SomeBean {

    @Asynchronous
    public void doSomething() {
        // ...
    }
} 
```

然后在其他地方，注入这个 bean 并调用该`doSomething()`方法。控制将立即返回。

```
@WebServlet("/test")
public class SyncServlet extends HttpServlet {

    @EJB
    private SomeBean someBean;

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        someBean.doSomething();
    }
} 
```

请注意，您可能**不需要**像`AsyncContext asyncContext = request.startAsync()`这里这样的东西。仅当异步代码仍需要向响应发送某些内容时，您才会使用它。

如果您需要类似于周期计时器的东西，而不是响应请求，您可以在单例中使用计时器服务：

```
@Startup
@Singleton
public class SomeTimerBean {

    @Schedule(hour = "*", minute = "*/30", second = "0", persistent = false)
    public void doStuff() {
        // ...
    }
} 
```

除了定期运行，您还可以使用`@TimeOut`注释运行一次这样的事情：

```
@Startup
@Singleton
public class SomeTimerBean {

    @Resource
    private TimerService timerService;

    @Postconstruct
    public void init() {
         timerService.createSingleActionTimer(0, new TimerConfig(null, false));
    }

    @Timeout
    public void doStuff(Timer timer) {
        // ...
    }
} 
```

您可以对此进行变体，例如`SomeTimerBean`，也可以调用*其他*`@Asynchronous`bean 中的方法以基本上具有相同的效果。

# asp.net - 将 http 重定向到 https asp/iis

> ID：10276031
> 
> 赞同：0
> 
> 时间：2012-04-23T06:53:47.270
> 
> 标签：asp.net, iis-7

下面是我的 web.config 文件。我希望将 http url 自动重定向到 https。我尝试了以下操作，但它不起作用。IIS7 with SSL required 在 SSL 设置中选中。任何人都可以帮忙吗？谢谢

```
<configuration>
<configSections>
    <sectionGroup name="system.webServer">
        <sectionGroup name="rewrite">
            <section name="rewriteMaps" overrideModeDefault="Allow" />
            <section name="rules" overrideModeDefault="Allow" />
        </sectionGroup>
    </sectionGroup>
</configSections>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="Redirect to HTTPS" enabled="true" stopProcessing="true">
                <match url="^(.*)$" />
                <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    <add input="{HTTPS}" pattern="off" />
                </conditions>
                <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Found" />
            </rule>
        </rules>
    </rewrite>
    <defaultDocument>
        <files>
            <add value="index.asp" />
        </files>
    </defaultDocument>       
</system.webServer>
<system.web>
    <customErrors mode="Off" />     
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" />
</system.web> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:58:14.453

取消选中“需要 SSL”——要使重定向生效，您必须首先接受 HTTP 上的初始请求。

**编辑**

第二点。您正在选择基于 HTTPS 的输入。你需要否定这样的条件：

```
<conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{HTTPS}" pattern="off" negate="true" />
</conditions> 
```

# php - 如何让网站更安全？

> ID：10276032
> 
> 赞同：-5
> 
> 时间：2012-04-23T06:53:53.637
> 
> 标签：php, sql, security, sql-injection

> **可能重复：**
> [在 PHP 中停止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

我有一个关于网站安全的问题。实际上，我已将查询用作：

```
$name = $_POST['name'];
$sql = "INSERT INTO table (sno, name) VALUES('', '$name')";
mysql_query($sql); 
```

这种编码是否保证了sql注入或其他的安全性。如果不是，我们可以使用哪些方法来保护我们的网站？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:00:02.657

使用**带有准备好的语句和绑定参数的 PDO**

[PDO 教程](http://www.phpeveryday.com/articles/PDO-Prepared-Statement-P550.html)

这是开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:58:39.990

为了保护自己免受 sql 注入，请使用[PDO](http://php.net/manual/ru/ref.pdo-mysql.php)

在您的情况下使用`mysql_real_escape_string($string)`-但这还不够安全。)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-04-23T07:00:56.733

你也可以使用addslashes php函数：

```
<?php
    $name = addslashes($_POST['name']);
?> 
```

# jquery - 页面加载时如何使用ajax加载图像

> ID：10276037
> 
> 赞同：0
> 
> 时间：2012-04-23T06:54:33.207
> 
> 标签：jquery, jsf-2, primefaces

我有一个 JSF 页面，上面有 8 张图片。

****仅适用于 jquery 查看器：请不要与 JSf 语法混淆。在幕后，它全部转换为纯 HTML。像 h:panelGrid 转换成表格元素。p:graphicImage 转换为 img 元素。实际上我想知道使用 jQuery ajax 加载图像的逻辑。就像使用 jQuery 一样，我调用服务器，然后从数据库中获取图像，当图像完全加载到路径上时，我更改 img src 属性以使用加载的图像更改默认图像。当页面在默认路径上加载时，会有一个默认图像，如 /resources/images/no-preview.jpg。所以我希望在加载图像时将其替换为 /resources/images/Image1.jpg、/resources/images/Image2.jpg 等 **。**

```
<h:panelGrid columns="5" width="10%" style="position: relative; top: 50px; "
             columnClasses="asteriskColumns, nameColumns" >

    <h:outputText value="*" />
    <h:outputText value="Map: " />
    <p:fileUpload id="cityMap" widgetVar="uploader" description="Image"
                  update="city" allowTypes="*.jpg;*.png;*.gif;*.jpeg;"
                  auto="true" fileUploadListener="#{cityDetail.imageUpload}"
                  style="position: relative;"  >

    </p:fileUpload>

    <p:graphicImage id="city" value="#{cityDetail.imagePath}" width="80"
                    height="50" cache="false" style="position: relative;">

        <f:event type="preRenderComponent" listener="#{cityDetail.putImage}" />

    </p:graphicImage>

    <h:commandLink value="remove" title="Remove Picture"
                   style="color: #0d5b7f;text-decoration: underline;"
                   onclick="if (! confirm('Are you sure, you want to remove picture?') ) { return false;}; return true; ">

        <f:ajax event="click" render="city" listener="#{cityDetail.removeImage}"/>

    </h:commandLink>
    .....
    7 more images in same format

</h:panelGrid> 
```

在构造函数中，我正在起诉这样的事情来从数据库中获取图像

```
public class CountryPages_Detail {
    private String imagePath = "/resources/images/no-preview.jpg";
    String path = externalContext.getRealPath("/resources/images") + "/" ;
    public CountryPages_Detail() {
        ....
        String cityMapQuery = "SELECT citymap From city Where cityid='" + cityID + "'";
        String countryMapFileName = "countryMap_" + saarcCountryId;
        // 7 more queries in same format

         ArrayList countryMapQueryArray = addCredentialsToList(externalContext, countryMapQuery, countryMapFileName, response);
         //7 more

         ArrayList mainArray = new ArrayList();
         mainArray.add(countryMapQueryArray);
         ...
         ArrayList result = ConnectionUtil.showImagesFormDatabase(mainArray);
    } //end of constructor     
} //end of class CountryPages_Detail

public static ArrayList showImagesFormDatabase(ArrayList list) {
    for (int i = 0; i < list.size(); i++) {
        ArrayList fileCredentialsList = ((ArrayList) list.get(i));
        String query = fileCredentialsList.get(0).toString();
        sqlStatement = conn.createStatement();
        resultSet = sqlStatement.executeQuery(query);
        if (resultSet != null) {
            while (resultSet.next()) {
                imageBytes = resultSet.getBytes(1);
                setResponceForDatabaseImages(fileCredentialsList);
                imageName = createFile(fileCredentialsList, imageBytes);
                if (imageName != null) {
                    imageNameList.add(imageName);
                }
            } //end of while()
        } //end of if()
    } //end of for()

    return imageNameList;

} //end of showImagesFormDatabase() 
```

如您所见，我在页面加载时从数据库中获取图像。从数据库中获取图像字节，然后在该字节的路径上创建图像文件。但我有 8 张图片。如果任何图像尺寸很大，那么我必须等待，这令人沮丧。

我希望在页面加载时，而不是从数据库中加载图像，而是使用 ajax。意味着我的页面的其余部分会加载，图像会从幕后加载，当所有图像都加载后，就会显示在 p:graphicImage 中的图像。在加载图像时，加载图标应该显示在 p:grahicImage 中，当图像完全加载时，图标消失并且应该显示图像。

我该怎么做？

谢谢

**编辑： - - - - - - - - - - - - - - - - - - - - - - - - ----------------------------------**

```
 <ui:define name="content">
     <h:form id="faqAddUpdateForm" prependId="false">
         <h:panelGrid columns="5" width="10%" style="position: relative; top: 50px; "
             columnClasses="asteriskColumns, nameColumns" >
         ....
         </h:panelGrid>
     </h:form>

     <h:form id="hidden" style="display:none">
                <h:commandLink id="link">
                    <f:ajax event="click" listener="#{countryPages_Detail.loadImagesUsingAjax}" />
                </h:commandLink>
     </h:form>

     <script>
         window.onload = function() {
             document.getElementById('hidden:link').onclick();
          }
      </script>
 </ui:define> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:13:45.503

当文档准备好时，您可以加载图像。但是，`h:body`onload 不起作用（如[BalusC 在此处的回答](https://stackoverflow.com/a/5523717/620338)中所述）。

引用的答案将为您提供一种使其正常工作的方法。您需要触发一个`commandLink`附加了 ajax 侦听器的隐藏。侦听器应调用生成图像的方法，而 ajax 调用应更新包含图像的组件。

要在 ajax 调用中部分更新您的页面，请使用以下`render`属性`f:ajax`：

```
<h:commandLink id="link">
   <f:ajax event="click" 
           render=":faqAddUpdateForm"
           listener="#{countryPages_Detail.loadImagesUsingAjax}" />
</h:commandLink> 
```

`render=":faqAddUpdateForm"`将呈现整个表单。如果这太多了，请给`panelGroup`包含图像的 id （例如“imageGroup”）并在`render`属性中使用此 id：

```
render=":faqAddUpdateForm:imageGroup" 
```

# servlets - 在石英调度程序中检索 servletContext 引用

> ID：10276041
> 
> 赞同：5
> 
> 时间：2012-04-23T06:54:41.357
> 
> 标签：servlets, quartz-scheduler

我在基于 spring 3.0 的应用程序中使用 Quartz Scheduler。我成功地创建了新的调度程序，它们工作正常。

我见过这样的[参考。](http://www.mkyong.com/spring/spring-quartz-scheduler-example/comment-page-1/#comment-81592)

但是.. 我无法在我的石英作业文件中检索 servletContext。谁能帮助我如何在 executeInternal() 方法中检索 servletContext 引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T13:32:08.937

我也有类似的需求。我以与此处介绍的解决方案类似的方式对其进行了整理[。](https://stackoverflow.com/a/3216084/613495) 在我的 servlet 上下文侦听器中，我使用作业数据映射对象设置 servlet 上下文，然后为作业设置该对象：

```
 @Override
    public void contextInitialized(ServletContextEvent sce) {
        try {
            //Create & start the scheduler.
            StdSchedulerFactory factory = new StdSchedulerFactory();
            factory.initialize(sce.getServletContext().getResourceAsStream("/WEB-INF/my_quartz.properties"));
            scheduler = factory.getScheduler();
            //pass the servlet context to the job
            JobDataMap jobDataMap = new JobDataMap();
            jobDataMap.put("servletContext", sce.getServletContext());
            // define the job and tie it to our job's class
            JobDetail job = newJob(ImageCheckJob.class).withIdentity("job1", "group1").usingJobData(jobDataMap).build();
            // Trigger the job to run now, and then repeat every 3 seconds
            Trigger trigger = newTrigger().withIdentity("trigger1", "group1").startNow()
                  .withSchedule(simpleSchedule().withIntervalInMilliseconds(3000L).repeatForever()).build();
            // Tell quartz to schedule the job using our trigger
            scheduler.scheduleJob(job, trigger);
            // and start it off
            scheduler.start();
        } catch (SchedulerException ex) {
            log.error(null, ex);
        }
    } 
```

然后在我的工作中，我正在这样做：

```
 @Override
    public void execute(JobExecutionContext context) throws JobExecutionException {
        ServletContext servletContext = (ServletContext) context.getMergedJobDataMap().get("servletContext");
        //...
    } 
```

**编辑：** 另外，既然你提到你正在使用 Spring ，[我发现了这个链接](http://forum.springsource.org/showthread.php?48920-Quartz-and-ServletContext)，在上一篇文章中，有人提到实现 ServletContextAware。就个人而言，我会选择 JobDataMap，因为这是它的作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-02T20:02:24.443

从 Quartz 2.0 开始，如果您通过`QuartzInitializerServlet`web.xml 在 webapp 中启动调度程序，您可以通过将 ServletContext 设置`scheduler-context-servlet-context-key`为 init 参数来将 ServletContext 存储在 SchedulerContext 中，如下所示：

```
<!-- Quartz Scheduler Initializer Servlet -->
<servlet>
    <servlet-name>QuartzInitializer</servlet-name>
    <servlet-class>org.quartz.ee.servlet.QuartzInitializerServlet</servlet-class>
    <init-param>
        <param-name>shutdown-on-unload</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>start-scheduler-on-load</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>scheduler-context-servlet-context-key</param-name>
        <param-value>servletContext</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

请参阅代码中的以下参考：[https ://github.com/elventear/quartz-scheduler/blob/quartz-2.0.0-rc/quartz/src/main/java/org/quartz/ee/servlet/QuartzInitializerServlet.java #L122](https://github.com/elventear/quartz-scheduler/blob/quartz-2.0.0-rc/quartz/src/main/java/org/quartz/ee/servlet/QuartzInitializerServlet.java#L122)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-03T16:25:28.223

要像 Kalman 所说的那样从 QuartzJob 配置中获取您的 ServletContext，那么这里有一些代码来获取实际的“servletContext”

```
private void initContext(JobExecutionContext jobContext) {

    Scheduler scheduler = jobContext.getScheduler();
    SchedulerContext schedulerContext = null;
    try {
        schedulerContext = scheduler.getContext();
    } catch (SchedulerException e) {
        e.printStackTrace();
    }

     ServletContext servletContext = (ServletContext)schedulerContext.get("servletContext");
     System.out.println("ServletContextName : "+  servletContext.getServletContextName()); 
```

# java - JPA Hibernate调用存储过程

> ID：10276048
> 
> 赞同：0
> 
> 时间：2012-04-23T06:55:10.440
> 
> 标签：java, hibernate, postgresql, stored-procedures, jpa

我在 Postgres 中有一个存储过程。该过程有 4 个 OUT 参数。通常使用 JPA 我无法得到结果。我想要做的是在该过程中使用 SELECT 查询。

例如，如果我在 pgAdmin 中尝试查询：

SELECT * FROM get_results（arg0、arg1 等）；

我得到一个包含 4 列的结果行，其中包含 4 个 OUT 参数的结果。

但是当我尝试在 JPA 中使用它时它失败了。我正在尝试类似的东西：

```
Query q = em.createNativeQuery("SELECT * FROM get_results (arg0, arg1 etc)");
q.getSingleResult(); 
```

但它抛出一个`java.lang.IllegalStateException [com.arjuna.ats.internal.jta.transaction.arjunacore.nosuchtx] [com.arjuna.ats.internal.jta.transaction.arjunacore.nosuchtx] No such transaction!`

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-01T06:12:30.223

JPA 2.1 现在支持存储过程，请在[此处](http://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#createStoredProcedureQuery%28java.lang.String%29)阅读 Java 文档。

例子：

```
StoredProcedureQuery storedProcedure = em.createStoredProcedureQuery("sales_tax");
// set parameters
storedProcedure.registerStoredProcedureParameter("subtotal", Double.class, ParameterMode.IN);
storedProcedure.registerStoredProcedureParameter("tax", Double.class, ParameterMode.OUT);
storedProcedure.setParameter("subtotal", 1f);
// execute SP
storedProcedure.execute();
// get result
Double tax = (Double)storedProcedure.getOutputParameterValue("tax"); 
```

[请参阅此处](http://dreamand.me/java/java-jee7-jpa-stored-procedure-example/)的详细示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:39:34.627

使用下面的代码共同调用程序使用休眠。

```
Query query = session.getNamedQuery("ProcedureName")
    .setParameter(parameterName,value);
    .setParameter(parameterName,value);
    .setParameter(parameterName,value);
    .setParameter(parameterName,value); 
```

# c# - 如何使用 EmguCV 获得连续多边形？

> ID：10276052
> 
> 赞同：2
> 
> 时间：2012-04-23T06:55:35.717
> 
> 标签：c#, .net, emgucv

我正在从一个简单的控制台应用程序（.net 4.0 和 c#）中使用 EmguCV 2.3.0.1416，我对 canny、边缘检测等有疑问。给定以下代码：

```
var colours = new[]
                  {
                      new Bgr(Color.YellowGreen),
                      new Bgr(Color.Turquoise),
                      new Bgr(Color.Blue),
                      new Bgr(Color.DeepPink)
                  };

// Convert to grayscale, remove noise and get the canny
using (var image = new Image<Bgr, byte>(fileName)
    .Convert<Gray, byte>()
    .PyrDown()
    .PyrUp()
    .Canny(new Gray(180),
           new Gray(90)))
{
    // Save the canny out to a file and then get each contour within
    // the canny and get the polygon for it, colour each a different
    // colour from a selection so we can easily see if they join up
    image.Save(cannyFileName);

    var contours = image
        .FindContours(CHAIN_APPROX_METHOD.CV_CHAIN_APPROX_SIMPLE,
                      RETR_TYPE.CV_RETR_EXTERNAL);

    using (var debug = new Image<Bgr, byte>(image.Size))
    {
        int colIndex = 0;
        for (; contours != null; contours = contours.HNext)
        {
            Contour<Point> poly = contours
                .ApproxPoly(contours.Perimeter*0.05,
                            contours.Storage);

            debug.Draw(poly, colours[colIndex], 1);

            colIndex++;
            if (colIndex > 3) colIndex = 0;
        }

        debug.Save(debugFileName);
    }
} 
```

我得到了这个输出（这实际上只是图像的一部分，但它显示了我在问什么）：

![精明边缘](../Images/36fb265c125e66abc1ae9e27d9b661e8.png)

正如你所看到的，它有一条带一点粉红色的蓝线，然后是一条绿线。真实的东西在这里只有一个坚实的边缘，所以我希望这是一条线，以便我可以确定它是我所看到的边缘。

原始图像看起来像这样（我已经放大了它，但你可以看到它有一个非常独特的边缘，我希望能够很容易地找到它）。

![原版](../Images/2513ea7af7db06411a1929f3d776f1e7.png)

如果我只看精明，我可以看到那里的差距，所以我尝试调整创建精明的参数（阈值和链接阈值），但它们没有任何区别。

我还扩张然后侵蚀了精明（顺便说一下，对迭代参数使用相同的值 - 10），这似乎可以解决问题，但是这样做我会不会失去准确性（只是感觉有点不对劲）？

那么，我应该如何确保在这种情况下得到单行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:06:04.307

Did you try smoothing before canny?

I found this link, maybe useful for you

[http://www.indiana.edu/~dll/B657/B657_lec_hough.pdf](http://www.indiana.edu/~dll/B657/B657_lec_hough.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T01:47:57.170

单行到底是什么意思？也许你正试图加粗你的线：

```
debug.Draw(poly, colours[colIndex], 2); 
```

代替：

```
debug.Draw(poly, colours[colIndex], 1); 
```

或者你想要的任何粗细的线。 [这是](http://www.emgu.com/wiki/files/1.3.0.0/html/0a782cc3-56c8-3ee4-2f73-85bf82912702.htm)多边形的 emgucv 绘制方法。也许也看看[这个](http://www.emgu.com/wiki/index.php/Shape_%28Triangle,_Rectangle,_Circle,_Line%29_Detection_in_CSharp)链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T03:02:04.240

approxPoly() 函数中的第一个参数正是您要寻找的。只要摆弄它，你就会得到你想要的。

# javascript - jQuery phonegap 应用程序中的 Javascript 中的定时长按

> ID：10276053
> 
> 赞同：1
> 
> 时间：2012-04-23T06:55:38.430
> 
> 标签：javascript, jquery, cordova, mouseevent, jquery-events

这里有一个在 Javascript 中长按的好例子：[Long Press in JavaScript?](https://stackoverflow.com/questions/2625210/long-press-in-javascript)

但它没有规定知道新闻的持续时间。

如果我想根据新闻的长度做不同的事情，我不能使用那个帖子中的模式。

我试图通过将当前时间保存在变量中`on('mousedown')` 然后计算时间差来做类似的事情`on('mouseup')`。这在“普通”浏览器中的普通 Javasript 页面中运行良好。

`mouseup`然而，在我的 phonegap 应用程序中发生了一些事情，如果手指长时间保持在屏幕上（比如 5 秒 ..），看起来事件不会被调用。

这是一些本机移动浏览器行为吗？我可以以某种方式覆盖它吗？

我使用的是普通的 jQuery 而不是 jQuery mobile。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:35:39.247

**您可以检查时间来识别单击或长按 [jQuery]**

```
function AddButtonEventListener() {
try {
var mousedowntime;
var presstime;
$("button[id$='" + buttonID + "']").mousedown(function() {
    var d = new Date();
    mousedowntime = d.getTime();
});
$("button[id$='" + buttonID + "']").mouseup(function() {
    var d = new Date();
    presstime = d.getTime() - mousedowntime;
    if (presstime > 999/*You can decide the time*/) {
        //Do_Action_Long_Press_Event();
    }
    else {
        //Do_Action_Click_Event();
    }
});
}
catch (err) {
    alert(err.message);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T10:31:42.633

请注意，如果您出于某种原因不使用 jQuery Mobile，则此解决方案很有用。我使用了文章[快速触摸事件处理](http://phonegap-tips.com/articles/fast-touch-event-handling-eliminate-click-delay.html)并添加了一段代码

```
$.event.special.tap = {
distanceThreshold: 10,
timeThreshold: 350,
setup: function () {
    var self = this,
        $self = $(self);

    // Bind touch start
    $self.on('touchstart', function (startEvent) {
        // Save the target element of the start event
        var target = startEvent.target,
            touchStart = startEvent.originalEvent.touches[0],
            startX = touchStart.pageX,
            startY = touchStart.pageY,
            threshold = $.event.special.tap.distanceThreshold,
            timeout,
            expired = false;

        function timerFired() {
            expired = true;
        }

        function removeTapHandler() {
            clearTimeout(timeout);
            $self.off('touchmove', moveHandler).off('touchend', tapHandler).off('touchcancel', removeTapHandler);
        };

        function tapHandler(endEvent) {
            removeTapHandler();
            if (target == endEvent.target) {
                if (expired) {
                    $.event.simulate('longtap', self, endEvent);
                } else {
                    $.event.simulate('tap', self, endEvent);
                }
            }
        };

        // Remove tap and move handlers if the touch moves too far
        function moveHandler(moveEvent) {
            var touchMove = moveEvent.originalEvent.touches[0],
                moveX = touchMove.pageX,
                moveY = touchMove.pageY;

            if (Math.abs(moveX - startX) > threshold || Math.abs(moveY - startY) > threshold) {
                removeTapHandler();
            }
        };

        // Remove the tap and move handlers if the timeout expires
        timeout = setTimeout(timerFired, $.event.special.tap.timeThreshold);

        // When a touch starts, bind a touch end and touch move handler
        $self.on('touchmove', moveHandler).on('touchend', tapHandler).on('touchcancel', removeTapHandler);
    });
} 
```

};

所以，现在我有一个 tap 和一个 longtap 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:10:57.937

您可以查看`taphold`和`vmouseup`（`handleTouchEnd()`第 752 行）事件是如何在[jQuery 移动](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)源代码中实现的。

由于它已经过测试和实现，我建议使用 jquery mobile 而不是 jquery 并修改（因为它已经处理了与每个移动浏览器相关的所有“怪癖”），并根据需要更改代码。

# java - 在类路径资源 META-INF/cxf/cxf.xml 中创建名称为“cxf”的 bean 时出错

> ID：10276054
> 
> 赞同：4
> 
> 时间：2012-04-23T06:55:45.007
> 
> 标签：java, web-services, spring, maven, cxf

我只是尝试使用 Apache CXF 和 Spring by Maven 运行一个简单的 Web 服务应用程序，但是当我启动 Tomcat 时出现以下错误

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cxf' defined in class path resource [META-INF/cxf/cxf.xml]: Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: org.springframework.context.support.AbstractApplicationContext.addApplicationListener(Lorg/springframework/context/ApplicationListener;)V
Caused by: java.lang.NoSuchMethodError: org.springframework.context.support.AbstractApplicationContext.addApplicationListener(Lorg/springframework/context/ApplicationListener;)V
    at org.apache.cxf.bus.spring.SpringBus.setApplicationContext(SpringBus.java:78)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:86)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:296)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:843)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:419)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:241)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:152)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:199)
    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:661)
    at org.springframework.context.support.AbstractApplicationContext.registerListeners(AbstractApplicationContext.java:505)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:328)
    at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.refresh(AbstractRefreshableWebApplicationContext.java:155)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:246)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:49)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

有没有办法解决这个错误？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:25:43.727

几个选项：

1) 更新到 Spring 3.x - 看起来您使用的是 2.5.x。

2) 更新到上周发布的最新版本的CXF。CXF 应该仍然适用于 spring 2.5.x（但可能不会持续太久），但是错误的提交导致 2.5.2 不再适用于 2.5.x。这已在 2.6/2.5.3 中修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:45:15.210

您可能在类路径上有多个版本的 Spring（2.5.6 vs 3.0 或 3.1）。检查您的 Maven 依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-21T05:13:47.543

尝试将 cxf 与 Camel 一起使用时，我遇到了同样的问题。

但它发生是因为我添加了旧`cxf-rt-ws-security`模块，该模块依赖于旧 cxf，而不是我`camel-cxf`的。确保您有所有 cxf 模块的通用版本。

# android - 如何将sqlite数据库保存在资源文件夹android中？

> ID：10276058
> 
> 赞同：0
> 
> 时间：2012-04-23T06:56:05.643
> 
> 标签：android, sqlite

您好，我正在关注本教程[在 Android 应用程序中使用您自己的 SQLite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

现在我不明白如何保存首先创建的数据库。以下是如何从资源文件夹中获取 sqlite 的代码：

```
InputStream myInput = myContext.getAssets().open(DB_NAME); 
```

所以我的sqlite放在哪里，就像我在资源文件夹中复制一样，我得到编译器错误：

```
invalid resource directory name 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:09:05.617

在您的 Activity.java 中，您需要设置您的数据库

```
 private void setupDatabase() {
                Dbhelper myDbHelper = new Dbhelper(getApplicationContext());
                myDbHelper = new Dbhelper(this);

                try {

                    myDbHelper.createDataBase();

                } catch (IOException ioe) {

                    throw new Error("Unable to create database");

                }

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:59:45.797

正如我在我的一个项目中所做的那样，将您的数据库文件复制到`raw`文件夹中并获取`InputStream`如下：

```
InputStream myInput = myContext.getResources().openRawResource(DB_NAME); 
```

现在将**myInput**流内容复制到缓存目录，以便创建数据库文件的副本。

此外，您可以使用该数据库文件`SQLiteDatabase.openDatabase`来获取`SQLiteDatabase`对象并执行您的 sql 魔术

# blackberry - net.rim.device.api.database.DatabaseIOException: 文件系统错误 (12)

> ID：10276059
> 
> 赞同：0
> 
> 时间：2012-04-23T06:56:13.710
> 
> 标签：blackberry

我创建了一个标签栏，当我第一次进入数据库屏幕时会出现这个标签栏，这段代码工作正常。但是当我们进入另一个选项卡并再次进入数据库屏幕选项卡时，它会引发异常

net.rim.device.api.database.DatabaseIOException: 文件系统错误 (12)

我已经正确关闭了数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:23:18.393

当您尝试打开已打开的数据库时会发生此错误。

在第一个选项卡中，您已经打开了数据库连接，但是当您切换另一个选项卡时，您将如何关闭数据库连接。

您应该在重新打开之前关闭数据库连接。

有关更多详细信息，请参阅以下链接

[http://docs.blackberry.com/en/developers/deliverables/29299/Opening_and_closing_databases_1585333_11.jsp](http://docs.blackberry.com/en/developers/deliverables/29299/Opening_and_closing_databases_1585333_11.jsp)

如果您仍然无法解决您的问题，请粘贴您的数据库代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T04:59:05.033

打开数据库代码

```
public void openDb(){
    try{
        closeDb();
        // Open the database          
          URI uri =  URI.create("Go2Reward.sqlite");    
        Logger.debug("-----URI-----"+uri);
        _db = DatabaseFactory.open(uri);
    }catch(Exception e){
        Logger.error("--------- in open db====="+e.getMessage()+"----"+e);
    }
} 
```

// 关闭数据库

```
public void closeDb(){
    try{
        if(_db != null)
        {
            Logger.debug("----close db---");
            _db.close();
            _db = null;
        }   
    }catch(Exception e){
        Logger.error(" ---------in close db" , e);
    }
} 
```

从数据库中获取数据的代码如下

```
 public Vector getCategoryVector() {
    Vector categoryVec = new Vector();
    try{
        openDb();
        Statement statement = _db.createStatement("SELECT category FROM CategoriesTable");
        statement.prepare();
        Cursor cursor = statement.getCursor(); 

        Row row;
        while(cursor.next()) {
            row = cursor.getRow();
            categoryVec.addElement(row.getString(0));
        }

        cursor.close();
        statement.close();
    }catch (Exception e) {
        Logger.error("---error getCategoryVector---"+e.getMessage());
    }finally{
        closeDb();
    }
    return categoryVec;
} 
```

但是当我打开数据库时它工作正常但在 10 个事务内它返回异常 net.rim.device.api.database.DatabaseIOException: File system out of resources

# python - CherryPy 3.2 中的斜杠工具未添加斜杠

> ID：10276060
> 
> 赞同：1
> 
> 时间：2012-04-23T06:56:15.637
> 
> 标签：python, routing, cherrypy, trailing-slash

我无法让 trailing_slash 工具工作。我玩过 trailing_slash 工具的选项，但似乎没有任何效果。我正在使用 CherryPy 3.2.2 和 Routes 1.13。我想添加一个斜杠。调试输出中没有错误。

如果我去 127.0.0.1:8080/blog/ 它可以工作，但是如果我去 127.0.0.1:8080/blog 它不会。

我的配置是：

```
conf = {
'/': {
    'request.dispatch': setup_routes(),
    # This trailing slash stuff has no effect :(
    'tools.trailing_slash.on': True,
    'tools.trailing_slash.missing': True,
    'tools.trailing_slash.status': 301,
},
'/static': {
       'tools.staticdir.on': True,
       'tools.staticdir.root': os.path.dirname(os.path.abspath(__file__)),
       'tools.staticdir.dir': 'static'
   }
} 
```

示例路线是：

```
routes = [["blog_index", "/blog/", {'controller': BlogController(), 'action': 'index','entry_id': 'index'}],] 
```

谁能看到我做错了什么？是否存在错误或缺少必要的文档？trailing_slash 工具是否与 Routes Dispatcher 一起使用？

完整的源代码：[https ://bitbucket.org/ddevine/icdy/src](https://bitbucket.org/ddevine/icdy/src)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:22:45.660

尾部斜杠工具不适用于 Routes Dispatcher。尾部斜线工具期望无论选择什么调度程序都将设置`cherrypy.request.is_index`为 True 或 False，看起来`RoutesDispatcher`该类根本没有这样做。因此，`is_index`保留为 None，并且尾部斜杠 Tool 不执行任何操作。对 Routes 有很好了解的人可能会在 CherryPy 代码库中修复它，或者编写自己的调度程序来设置 is_index，或者尝试编写另一个工具来修复 is_index。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-24T16:53:26.637

长时间问，但这里有一种方法可以使它工作：

```
def index(index=True):
    cherrypy.request.is_index = index
cherrypy.tools.index = cherrypy.Tool('on_start_resource', index)

config = {
    ...
        'tools.trailing_slash.status': 307,
        'tools.index.on': True,
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:14:51.307

Routes 中没有“索引”的概念，因为您可以定义同一路径的 2 个连接，一个带有斜杠，一个没有，并将它们连接到 2 个完全不同的控制器和/或操作。在现实生活中你不会这样做，但在 Routes 中是可能的，所以真的没有一个很好的方法来改变 trailing_slash 工具来处理这个问题。

恕我直言，trailing_slash 工具有点欠缺，它可能应该提升到位于默认 WSGI 中间管道前面的 WSGI 中间件的级别，就像现在 CherryPy 中的 InternalRedirect 中间件一样。例如，如果您在 script_name 下安装了 RouteDispatcher，则不能将 trailing_slash 工具放在任何地方让 CP 在 script_name 后放置一个斜杠，因为 Routes 中的所有路由都必须以斜杠开头，它会抛出一个如果您尝试匹配时 path_info 为空字符串，则出现 RoutesException。

# mysql - 将视频嵌入代码存储在 mysql 数据库中

> ID：10276068
> 
> 赞同：1
> 
> 时间：2012-04-23T06:57:08.950
> 
> 标签：mysql, video, embed

我想将视频嵌入代码存储在 mysql 数据库中。将其存储在数据库中的最佳方式是，代码可以来自各种视频托管服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:13:49.420

最好的方法是将数据库中的整个地址保存在 varchar 表中。

你为什么问我？

假设您剥离了他们标签的所有输入并只保留代码，如果将来发生变化，您的数据库中只有代码，它什么都不告诉您。

尝试添加包含多个托管服务的下拉列表，以便区分链接。

示例：下拉 [youtube] --- 输入 [youtubelink]。

当您想在前面显示视频时，您知道它是什么类型，然后您知道如何处理链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:38:16.537

我建议如下：

1.  添加字段 video_embed 文本；
2.  确保在存储之前清理嵌入代码
3.  现在，棘手的问题来了——如果你允许存储 html 代码，你应该对允许用户输入的内容非常严格——如果你不检查它，用户可以插入任意代码并执行坏事。

在某种程度上更安全​​的是只存储 url，因为它更容易验证。此外，鉴于您存储 url，总是可以对嵌入代码进行逆向工程；）

所以这毕竟取决于你的技能和需求。

# c# - 仅比较来自 ASP.NET 代码的 DATETIME 字段中的 DATE

> ID：10276070
> 
> 赞同：1
> 
> 时间：2012-04-23T06:57:18.497
> 
> 标签：c#, asp.net, sql, sql-server-2008, datetime

我有一个存储在 SQL Server 数据库中的表。表的字段之一是类型`DATETIME`。我还有一个 ASP `Calendar`，其日期与`DATETIME`数据库的字段进行比较。

问题是我不想比较时间。只需要比较日期。这样做的 SQL 查询是什么。

这是我使用的：

```
 SqlCommand myCommand = new SqlCommand("
SELECT AUDIT.AUDIT_DETAILS, USERS.USER_NAME, AUDIT.DATE_TIME, IP  
FROM USERS JOIN AUDIT ON (USERS.USER_ID = AUDIT.USER_ID) 
WHERE USERS.USERS_NAME LIKE '%"+TextBox1.Text+"%' AND CONVERT(VARCHAR(10),AUDIT.DATE_TIME,110) like "+Calendar1.SelectedDate.Date+"'%'", conn); 
```

我在 SQL Server 资源管理器中得到正确的输出，但是当通过 asp.net 从浏览器运行时，查询结果为空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:00:23.930

尝试如下修改您的查询

```
 SqlCommand myCommand = new SqlCommand("SELECT AUDIT.AUDIT_DETAILS, USERS.USER_NAME, AUDIT.DATE_TIME, IP  
  FROM USERS JOIN AUDIT ON (USERS.USER_ID = AUDIT.USER_ID) 
  WHERE USERS.USERS_NAME LIKE '%"+TextBox1.Text+"%' AND
  CONVERT(VARCHAR(10),AUDIT.DATE_TIME,106) ==    CONVERT(VARCHAR(10),CAST('"+Calendar1.SelectedDate.Date+"' as DATETIME),106)", conn); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:01:37.727

您可以像这样从 SQL 中的 Datetime 获取日期

```
CONVERT(DATE,GETDATE()) 
```

之后，您可以与该值进行比较。

# math - 在透视图中计算长度

> ID：10276071
> 
> 赞同：3
> 
> 时间：2012-04-23T06:57:19.610
> 
> 标签：math, perspective

我在透视图中有一个 4 面平面。每条边的长度与它对面的边相等。给定两条边的长度和一条边的缩短长度，我们如何求解另外两条边？

*假设在这个例子中底边没有被缩短。*

![透视图](../Images/fdf336a3d5f49dd1dcd198904e2d393b.png)

*编辑了附加信息。*

![在此处输入图像描述](../Images/0c6279654156adc1915ebf9aa2fbace7.png)

# c# - WPF - 根据某些条件选择启动窗口

> ID：10276074
> 
> 赞同：36
> 
> 时间：2012-04-23T06:57:26.730
> 
> 标签：c#, .net, wpf, wpf-controls

通过单击`Run`或按运行我的程序时`Ctrl + F5`，是否可以根据某些检查条件打开不同的窗口？

即，如果满足某些条件，我希望打开一个特定的窗口，但如果不满足，我想打开另一个窗口。

应该就像在打开任何窗口之前应该首先检查情况一样

```
if(File.Exists(<path-to-file>)
    Open Window 1
else
    Open Window 2 
```

这可能吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-23T07:14:33.647

查看 App.xaml

消除`StartupUri="MainWindow.xaml"`

添加`Startup="Application_Startup"`新的事件处理程序

```
<Application x:Class="YourProject.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Startup="Application_Startup"> 
```

App.xaml.cs 后面的表单代码创建 Application_Startup 像...

```
 private void Application_Startup(object sender, StartupEventArgs e)
    {
        //add some bootstrap or startup logic 
        var identity = AuthService.Login();
        if (identity == null)
        {
            LoginWindow login = new LoginWindow();
            login.Show();
        }
        else
        {
            MainWindow mainView = new MainWindow();
            mainView.Show();
        }
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-23T07:17:41.410

您可以使用它`App.xaml`来启动您的应用程序，并且正如 Nikhil Agrawal 所说，`StartupUri`动态更改。

但是，您仍然可以从`public static void Main()`. 只需删除 中的`StartupUri="MainWindow.xaml"`属性，在你的项目中`App.xaml`添加一个`Program`包含`Main`方法的类，然后进入项目属性并将启动对象设置为`YourAssemblyName.Program`。

```
[STAThread]
public static void Main(string[] args)
{
    var app = new Application();
    var mainWindow = new MainWindow();
    app.Run(mainWindow);
} 
```

请注意，`STAThreadAttribute`是必需的。如果您需要自己`Application`的. 但是，如果您不需要它，您可以直接使用基类并从项目中删除派生类。`App``Main``Application``Application`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T07:11:28.997

在`App.xaml`我们有一个具有属性的`Application`标签。`StartupUri`我认为您应该在 App.xaml.cs 部分中编写此代码

```
public App()
{
      // Your Code
} 
```

并设置`StartUpUri`为所需的 xaml 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-11T07:22:55.257

我知道这是一个很老的问题。但是我遇到了类似的问题，最近我在**WPF .NET Core 3.1**中使用依赖注入，感觉有人会遇到类似的挑战，所以发布这个答案

这是我的启动，您可以在其中设置条件启动窗口

```
protected override async void OnStartup(StartupEventArgs e)
        {
            await host.StartAsync();
            var userService = host.Services.GetService<IUserRepository>();
            var lastActiveUser = userService.LastActive();
            if (lastActiveUser != null)
            {
                DefaultWindow = host.Services.GetRequiredService<MainWindow>();
                DefaultWindow.Show();
            }
            else
            {
                DefaultWindow = host.Services.GetRequiredService<LoginWindow>();
                DefaultWindow.Show();
            }
            base.OnStartup(e);
        } 
```

用于初始化主机的 App 构造函数

```
public App()
        {
            host = Host.CreateDefaultBuilder()  // Use default settings
                                                //new HostBuilder()          // Initialize an empty HostBuilder
                   .ConfigureAppConfiguration((context, builder) =>
                   {
                       builder.SetBasePath(Directory.GetCurrentDirectory())
                       // Add other configuration files...
                       .AddJsonFile("appsettings.json", optional: false, reloadOnChange: true);
                       Configuration = builder.Build();

                   }).ConfigureServices((context, services) =>
                   {
                       ConfigureServices(context.Configuration, services);
                   })
                   .ConfigureLogging(logging =>
                   {
                       // Add other loggers...
                       logging.ClearProviders();
                       logging.AddConsole();
                   }).Build();
        } 
```

依赖注入

```
private void ConfigureServices(IConfiguration configuration,
        IServiceCollection services)
        {
            _services = services;
            _services.Configure<AppSettings>(Configuration
                .GetSection(nameof(AppSettings)));

            _services.AddDbContext<SmartDbContext>(options =>
            {
                options.UseSqlServer(Configuration.GetConnectionString("SqlConnection"));
            });

            _services.AddScoped<IUserRepository, UserRepository>();
            _services.AddScoped<ILoginDataContext, LoginDataContext>();
            _services.AddTransient(typeof(MainWindow));
            _services.AddTransient(typeof(LoginWindow));
        } 
```

# javascript - Facebook本地开发不起作用

> ID：10276077
> 
> 赞同：2
> 
> 时间：2012-04-23T06:57:44.093
> 
> 标签：javascript, facebook, login

我无计可施，试图让它发挥作用。它曾经是，但由于某种原因，它似乎又坏了。我只是在本地开发时遇到了麻烦。目前还有其他人在 Facebook 本地开发方面遇到类似问题吗？

这些是我的步骤：

1.  创建应用
2.  在“基本信息”部分下，将“本地主机”设置为域（我也尝试将其留空）
3.  将我的网站设置为`http://localhost:8080/`
4.  确保沙盒模式关闭
5.  我的本地服务器正在运行 Javascript `http://localhost:8080/private/`，看起来基本上如下所示。
6.  我还尝试使用 localhost 的替代品（如 myapp.com），在映射到 127.0.0.1 的 etc/hosts 文件中定义它，将 App Domain 设置为“myapp.com”并使用站点“http://myapp. com:8080/' 没有运气。

FB.getLoginStatus() 调用没有返回，或者只是偶尔返回。它始终在生产服务器上工作。

```
 function myAppInit() {

        console.log("Facebook loaded; initializing sdk.");

        //Initialize FB SDK
        FB.init({ 
            appId:_FbAppId, //This is valid and matches app ID
            cookie:true, 
            status:true, 
            xfbml:true,
            oauth:true
        });

        //Query for login status.
        FB.getLoginStatus(function(response) {
            updateLoginStatus(response);  //This is hit randomly
        });

        //Set our standard callback for auth change status
        FB.Event.subscribe('auth.authResponseChange', function(response) {
           updateLoginStatus(response);   //This is hit randomly
        });    
    }

    $(document).ready(function(){

        window.fbAsyncInit = myAppInit;
        (function(d){
             var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             d.getElementsByTagName('head')[0].appendChild(js);
        }(document));
     } 
```

编辑：检查 FB.getLoginStatus(..) 的响应后，它返回：

> 应用程序配置不允许给定 URL：应用程序配置不允许一个或多个给定 URL。它必须与 Connect 或 Canvas URL 之一匹配，或者域必须与应用程序的基域之一相同或其子域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T01:02:14.430

我遇到了与您描述的完全相同的错误，这让我发疯了。您必须确保 Canvas 或页面 URL 中的 Facebook URL 与您在浏览器中键入的内容**完全匹配。**

就我而言，我在地址栏中的 URL 中添加了一个“www”（例如 wwww.domain.com/MyApp），但在 Facebook 开发人员设置下，我只是将 domain.com/MyApp 作为没有 www 前缀的页面 URL . 这种微妙的差异是导致错误的原因。在你的情况下可能会发生类似的事情。

如果您通过 localhost 进行测试，我建议您创建一个新应用程序并将其作为您的生产应用程序的测试版本。这样，您可以在相应的应用程序下拥有您的 PROD url 和 TEST url，以免事情变得混乱。

此外，我建议使用带有自定义虚拟目录的 IIS 进行调试，以便您在端口 80 上运行。（如果您使用 443 或 80 以外的任何其他端口，Facebook 有时似乎会表现得很愚蠢）希望对您有所帮助。

# javascript - 使用 JavaScript 获取变量名

> ID：10276080
> 
> 赞同：9
> 
> 时间：2012-04-23T06:57:52.470
> 
> 标签：javascript

我想创建一个日志函数，我可以在其中插入如下变量名：

```
var a = '123',
    b = 'abc';

log([a, b]); 
```

结果在 console.log 中应该是这样的

```
a: 123
b: abc 
```

获取变量的值是没有问题的，但是如何获取变量名呢？该函数应该是通用的，所以我不能总是假设范围是窗口。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T07:14:38.867

所以参数是一个变量数组？那么不，一旦以这种方式传递，就无法获得原始变量名。在接收端，它们看起来像：

```
["123","abc"]; 
```

仅此而已

* * *

您可以为函数提供变量的名称和它们所在的范围，例如：

```
function log(arr,scope){
    for(var i=0;i<arr.length;i++){
        console.log(arr[i]+':'scope[arr[i]]);
    }
} 
```

*但是，如果您也可以*给出范围，这就会遇到问题。`this`某些代码领域存在很多问题：

*   对于非严格函数，`this`是`window`
*   对于严格的函数，`this`是`undefined`
*   对于构造函数，`this`是构造的对象
*   在对象字面量中，`this`是直接封闭对象

所以你不能依赖传递`this`作为一个范围。除非你能提供范围，否则这是另一个死胡同。

* * *

如果您将它们作为对象传递，那么您可以遍历对象及其“键”而不是原始变量名。然而，在这种情况下，这弊大于利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:28:16.190

我知道你想节省一些击键。我也是。但是，我通常像这里的其他人已经建议的那样记录变量名称和值。

```
console.log({a:a, b:b}); 
```

如果您真的更喜欢已经说明的格式，那么您可以这样做：

```
function log(o) {
    var key;
    for (key in o) {
        console.log(key + ":", o[key]);
    }
}

var a = '1243';
var b = 'qwre';
log({
    a:a,
    b:b
}); 
```

无论哪种方式，如果您想查看变量名，您都需要在日志记录请求中包含它。就像 Gareth 所说，从被调用函数内部查看变量名称不是一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T07:07:31.560

像这样的东西会做你正在寻找的东西：

```
function log(logDict) {
    for (var item in logDict) {
        console.log(item + ": " + logDict[item]);
    }
}

function logSomeStuff() {
    var dict = {};
    dict.a = "123";
    dict.b = "abc";
    log(dict);
}

logSomeStuff(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T07:02:44.543

不知道这是否真的可以在 JS 中工作......但你可以使用一个对象，你可以在其中存储名称和值：

```
 function MyLogObject(name, value) {
    this.name = name;
    this.value = value;
  }

  var log = [];
  log.push(new MyLogObject('a', '123'));
  log.push(new MyLogObject('b', 'abc'));

  for each (var item in log) {
    if (item.value != undefined)
      alert(item.name + "/" + item.value);       
  } 
```

然后你可以通过这个对象循环，你可以得到名称和值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T07:04:51.890

您无法使用数组访问变量名称。您可以做的是使用对象或将变量名称作为字符串传递：

```
var x = 7;
var y = 8;

function logVars(arr){
    for(var i = 0; i < arr.length; i++){
        alert(arr[i] + " = " + window[arr[i]]);
    }
}

logVars(["x","y"]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-08T07:48:18.793

我有一个有点类似的问题，但出于不同的原因。

我能找到的最佳解决方案是：

```
MyArray = ["zero","one","two","three","four","five"]; 
MyArray.name="MyArray"; 
```

因此，如果：

```
x=MyArray.name; 
```

然后：

```
X=="MyArray" 
```

就像我说的，它适合我的需要，但不确定这对你有什么用。我觉得我什至需要它很傻，但我确实需要它。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-04-07T17:24:13.890

测试这个。

```
var variableA="valor01"; <br>
var variableB="valor02";

var NamevariableA=eval('("variableA")');<br>
var NamevariableB=eval('("variableB")');<br>

console.log(NamevariableA,NamevariableB); 
```

爱特。曼努埃尔·雷塔莫佐·阿鲁埃

# hash - 相似哈希函数（simhash）

> ID：10276082
> 
> 赞同：1
> 
> 时间：2012-04-23T06:58:08.327
> 
> 标签：hash, hash-function, simhash

我在使用哈希函数时遇到问题。我必须为文档中的每个单词分配一些数字（128 位或 64 位）。因此，“相似度”的哈希值必须与“相似度”相近。这意味着，如果相似度的值=>10022（比如说），那么相似度=>10025。这应该与相似的词接近。不同名称的哈希值也应该相似。这意味着，“john”的哈希值也应该接近“michel”或“sita”......等等。如果任何人对此有任何想法。

先谢谢了。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:08:55.733

它不是以这种方式工作的，首先您必须找到可用数据样本值的通用模型，然后将其用于流式日志消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:36:38.610

有一个叫做 OpenNLP 的库，所以通过使用这个库你可以知道它是什么类型的词。然后正如您所说，对于类似名称的相似词，可以在其中写入名称或动词的哈希函数，因此可以得到相似的哈希值。谢谢。

# php - PHP - 用笑脸替换文本

> ID：10276084
> 
> 赞同：0
> 
> 时间：2012-04-23T06:58:14.560
> 
> 标签：php, regex, replace, bbcode

我有这个功能：

```
 function bb_parse($string) {
        $string = $this->quote($string);
            $string=nl2br($string);
        $string = html_entity_decode(stripslashes(stripslashes($string)));
            $tags = 'b|i|u';
            while (preg_match_all('`\[('.$tags.')=?(.*?)\](.+?)\[/\1\]`', $string, $matches)) foreach ($matches[0] as $key => $match) {
                list($tag, $param, $innertext) = array($matches[1][$key], $matches[2][$key], $matches[3][$key]);
                switch ($tag) {
                    case 'b': $replacement = "<strong>$innertext</strong>"; break;
                    case 'i': $replacement = "<em>$innertext</em>"; break;
                    case 'u': $replacement = "<u>$innertext</u>"; break;
                          }
                $string = str_replace($match, $replacement, $string);
            } 

            return $string;
        } 
```

如您所见，我可以轻松地制作带有粗体、斜体和下划线的 BBCode。虽然，我也在尝试向这个功能添加笑脸，但没有运气。

我试图简单地将**:)**添加到 $tags，然后在案例中添加笑脸 :) img，但这不起作用。

我该怎么做，所以我也可以为此添加表情符号？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:03:54.500

只需创建一个执行简单[str_replace](http://nl.php.net/manual/en/function.str-replace.php)的函数，我会说：

```
<?php

function smilies( $text ) {
    $smilies = array(
        ';)' => '<img src="wink.png" />',
        ':)' => '<img src="smile.png" />'
    );

    return str_replace( array_keys( $smilies ), array_values( $smilies ), $text );
}

$string = '[b]hello[/b] smile: :)';

echo smilies( bb_parse( $string ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:08:23.153

[http://php.net/manual/en/function.preg-quote.php](http://php.net/manual/en/function.preg-quote.php)

你必须逃避你的笑脸标签。

```
 $tags = 'b|i|u|'.preg_quote(":)"); 
```

# sql - 检查存储在 XML 数据类型列中的集合中是否存在值

> ID：10276085
> 
> 赞同：7
> 
> 时间：2012-04-23T06:58:21.883
> 
> 标签：sql, sql-server, sql-server-2008, tsql, azure-sql-database

我有一个名为“标签”的 XML 数据类型列。

在那里，我正在存储一个集合，如下所示：

```
<ArrayOfString>
    <string>personal</string>
    <string>travel</string>
    <string>gadgets</string>
    <string>parenting</string>
</ArrayOfString> 
```

我想选择具有我正在寻找的值之一的所有行：例如，我想选择表中具有标签“travel”的所有行。

如果我知道我正在寻找的值的索引，我知道这是可行的：

```
select * from posts
where tags.value('(/ArrayOfString/string)[1]', 'nvarchar(1000)') = 'travel' 
```

但此查询仅在标签“travel”是节点中的第二项时才有效。如何检查一个值是否存在，而不管它的位置如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T07:05:13.803

```
select *
from tags
where tags.exist('/ArrayOfString/string[. = "travel"]') = 1 
```

或者如果你想检查一个变量，就像这样。

```
declare @Val varchar(10)
set @Val = 'travel'

select *
from tags
where tags.exist('/ArrayOfString/string[. = sql:variable("@Val")]') = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T07:05:26.710

你可以尝试这样的事情：

```
SELECT
    *
FROM
    dbo.Posts
WHERE
    tags.exist('/ArrayOfString/string/text()[. = "travel"]') = 1 
```

这将列出在您的 XML 中的一个字符串中具有“旅行”的所有行

# c++ - 选择一个 STL 容器来存储线程

> ID：10276086
> 
> 赞同：3
> 
> 时间：2012-04-23T06:58:26.463
> 
> 标签：c++, containers

我正在尝试选择最好的 STL 容器来保存 Thr​​ead 对象（我正在编写一个线程库）。我的问题是我对它们中的任何一个都不是很熟悉，在阅读 api 有帮助的同时，我想咨询以前使用过它的人。

无论如何 - 每个`Thread`对象都有两个重要属性：`_id`和`_priority`. 我需要能够通过 访问线程`_id`，所以我自然想到了 hash_map。我还希望对对象进行排序`_priority`（不同的 Thread 对象可以具有相同的优先级），所以我想到了一个带有指向 hash_map 的指针的优先级队列，但是如果我删除一个不在队列中的第一个线程，它会变得有点难看.

有更好的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:23:16.400

要获得两种类型的访问权限，您要么需要组合两个容器……要么重用一个为您组合容器的库。

[Boost.MultiIndex](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/index.html)正是为了这种需求而发明的。

[基础页面](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/tutorial/basics.html)显示了一个示例，该示例通过 id（唯一）访问员工并按名称（非唯一）排序，这几乎就是您想要的。

关键提取器可能并不明显。假设您的线程类似于：

```
class Thread {
public:
    std::size_t id() const;
    std::size_t priority() const;

    ...
}; 
```

你应该能够写：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/const_mem_fun.hpp>
#include <boost/multi_index/member.hpp>

// define a multiply indexed set with indices by id and name
typedef multi_index_container<
    Thread,
    indexed_by<
        ordered_unique<
            const_mem_fun<Thread, std::size_t, &Thread::id>
        >,
        ordered_non_unique<
            const_mem_fun<Thread, std::size_t, &Thread::priority>
        >
    > 
> ThreadContainer; 
```

它定义了一个由它们唯一标识`id()`并根据它们排序的线程容器`priority()`。

我鼓励您使用各种索引。此外，如果您为您的类或返回可变引用的特定 getter 提供朋友访问权限，那么使用`mem_fun`代替`const_mem_fun`您将能够就地更新您的对象（例如，更改它们的优先级）。

这是一个非常完整（如果令人生畏）的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:08:14.510

最好的解决方案可能是[`std::map`](http://www.cplusplus.com/reference/stl/map/)，为您提供一个键/值对。在您的场景中，键具有您的类型`_id`和类型的值`Thread`（假设这是您的类的名称）。通过将所有值复制到 a ，您可以按with和谓词`std::vector`进行排序。`_priority``std::sort`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:13:23.803

一个简单的解决方案是保留`std::unordered_map`提供密钥 --> 线程查找，然后使用 a`std::set`来实现您的优先级队列。

# javascript - 使用 javascript 对选择选项进行排序

> ID：10276090
> 
> 赞同：0
> 
> 时间：2012-04-23T06:58:50.353
> 
> 标签：javascript, jquery, sorting, select

我使用了这个代码，现在带零的数字 1-9 在 31 之后。例如“28、29、30、31、01、02”。我想要的是常规方式 01、02、03...09、10、11。我该怎么做？

```
var everyDay = {};
for (im;im<=31;im++){
     t = (im < 10 ? '0' : '') + im
     everyDay[t] = (im < 10 ? '0' : '') + im;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:05:33.253

对象属性似乎按字典顺序（`aa`, `ac`, `...`, `az`）。您是否尝试过使用数组？

```
var everyDay = [];
for (var im = 1; im <= 31; im++){
     everyDay.push((im < 10 ? '0' : '') + im);
} 
```

但是，由于您没有展示如何使用`everyDay`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:10:42.370

everyDay 是一个散列，它不是按键排序的。您需要将值放入数组中。尝试这个：

```
var days = []
for (im;im<=31;im++){
    t = (im < 10 ? '0' : '') + im
    days.push();
} 
```

# r - 查找数据框中是否存在列

> ID：10276092
> 
> 赞同：134
> 
> 时间：2012-04-23T06:58:57.450
> 
> 标签：r

我有一个名为“abcframe”的data.frame

```
 a  b  c
     1  1  1
     2  2  3 
```

如何查找给定数据框中是否存在列？例如，我想查找data.frame **abcframe中是否存在****列 d**。

 *** * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-04-23T07:03:57.667

假设您的数据框的名称是`dat`并且您要检查的列名称是`"d"`，您可以使用`%in%`运算符：

```
if("d" %in% colnames(dat))
{
  cat("Yep, it's in there!\n");
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-23T07:09:08.517

您有多种选择，包括使用`%in%`and `grepl`：

```
dat <- data.frame(a=1:2, b=2:3, c=4:5)
dat
  a b c
1 1 2 4
2 2 3 5 
```

要获取列的名称：

```
names(dat)
[1] "a" "b" "c" 
```

用于`%in%`检查成员资格：

```
"d" %in% names(dat)
[1] FALSE

Or use `grepl` to check for a match:

grepl("d", names(dat))
[1] FALSE FALSE FALSE 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-12-20T22:56:44.740

你可以使用`any`：

```
> names(dat)
[1] "a" "b" "c"
> any(names(dat) == 'b')
[1] TRUE
> any(names(dat) == 'B')
[1] FALSE 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-29T15:14:58.357

您还可以使用`if(!is.null(abcframe$d))`来测试是否`d`存在于`abcframe`.

```
dat <- data.frame(a = 1:2, b = 2:3, c = 4:5)

if (!is.null(dat$d)) {
  print("d exists")
} else {
  print("d does not exist")
}
if (!is.null(dat$a)) {
  print("a exists")
} else {
  print("a does not exist")
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-06-28T03:05:29.793

对于某些人来说，tidyverse 方法可能更具可读性，因此更容易记住。

您将搜索`str_detect`返回逻辑向量（如）的变量`grepl`，然后通过基本 R 函数`any`将其折叠，如果至少有一个 TRUE 值，则返回 TRUE。

```
dat %>% names %>% str_detect("d") %>% any() 
```**

# objective-c - 无法在 iOS 中开始接收远程控制事件

> ID：10276096
> 
> 赞同：9
> 
> 时间：2012-04-23T06:59:12.157
> 
> 标签：objective-c, ios, background, avaudioplayer, remote-control

在我的应用程序中，我想让用户在后台控制音频播放。我在 .plist 中设置了背景模式，并在 bg 中设置了我想要的播放模式。但是我无法通过触摸控制按钮得到任何响应。

我这样`AudioSession`设置

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance]setActive:YES error:nil]; 
```

然后，在放置我的播放器的 viewContoller 中，我`beginReceivingRemoteControlEvents`喜欢这样

```
 if ([[UIApplication sharedApplication] respondsToSelector:@selector(beginReceivingRemoteControlEvents)]){
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL];
    [self becomeFirstResponder];
    NSLog(@"Responds!");
} 
```

它打印`Responds!`

但问题是这个方法永远不会被调用

```
 - (void)remoteControlReceivedWithEvent:(UIEvent *)event
{
    NSLog(@"Where is my event?");
    if(event.type == UIEventTypeRemoteControl)
    {
        switch (event.subtype) {
            case UIEventSubtypeRemoteControlTogglePlayPause:
                NSLog(@"Pause");
                [self playWords:playButton];
                break;
            case UIEventSubtypeRemoteControlNextTrack:
                NSLog(@"Next");
                [self next];
                break;
            case UIEventSubtypeRemoteControlPreviousTrack:
                NSLog(@"Prev");
                [self prev];
                break;

        }
    } 
```

我什至试图写一个类别`UIApplication`让它成为第一响应者，但它没有帮助

```
@implementation UIApplication (RemoteEvents)
-(BOOL)canBecomeFirstResponder
{
    return YES;
}
@end 
```

为什么会发生这种情况？

**解决方案** 这就是解决我的问题的方法[在 iOS4 上进入后台播放音频](https://stackoverflow.com/questions/3161635/entering-background-on-ios4-to-play-audio/3161899#3161899)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T09:59:33.820

我在我的项目中做了同样的工作，它工作正常。请关注这个，也许它会对你有所帮助。更改事件名称等。在我的代码中，_audio 是 AVAudioPlayer 的对象。

```
- (void)viewDidLoad {
    NSError *setCategoryErr = nil;
    NSError *activationErr  = nil;
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryErr];
    [[AVAudioSession sharedInstance] setActive: YES error: &activationErr];
}

- (void)viewWillAppear {

      [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}

- (void)remoteControlReceivedWithEvent:(UIEvent *)event {
    switch (event.subtype) {
        case UIEventSubtypeRemoteControlPlay:
            [_audio play];
            break;
        case UIEventSubtypeRemoteControlPause:
            [_audio pause];
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-03T10:49:04.227

有一种用于监听远程控制事件的更新机制。例如，当按下耳机播放/暂停按钮时执行一个块：

```
 MPRemoteCommandCenter *commandCenter = [MPRemoteCommandCenter sharedCommandCenter];

    [commandCenter.togglePlayPauseCommand addTargetWithHandler:^MPRemoteCommandHandlerStatus(MPRemoteCommandEvent * _Nonnull event) {
        NSLog(@"toggle button pressed");
        return MPRemoteCommandHandlerStatusSuccess;
    }]; 
```

或者，如果您更喜欢使用方法而不是块：

```
 [commandCenter.togglePlayPauseCommand addTarget:self action:@selector(toggleButtonAction)]; 
```

停止：

```
 [commandCenter.togglePlayPauseCommand removeTarget:self]; 
```

或者：

```
 [commandCenter.togglePlayPauseCommand removeTarget:self action:@selector(toggleButtonAction)]; 
```

您需要将其添加到文件的包含区域：

```
@import MediaPlayer; 
```

要使其在后台运行，您必须将背景音频模式添加到应用程序的功能中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T23:49:54.333

查看 Apple 提供的此[示例代码](http://developer.apple.com/LIBRARY/IOS/#samplecode/MixerHost/Listings/Classes_MixerHostViewController_m.html)以获取使用示例。您的主视图控制器可能实际上并没有成为第一响应者。另一种用法是将此代码放在您的应用程序委托中（它将始终是第一个响应者）并在这些事件有机会传播并可能被其他响应者使用之前响应这些事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:50:15.507

你有

```
respondsToSelector:@selector(beginReceivingRemoteControlEvents)]){ 
```

但是在您拥有的方法签名中

```
- (void)remoteControlReceivedWithEvent:(UIEvent *)event 
```

您注册签名的地方是错误的。只需将其替换为

```
respondsToSelector:@selector(beginReceivingRemoteControlEvents:)]){ 
```

你错过了 : 这使应用程序将偶数发送到我假设的不存在的方法。我很惊讶您的应用程序没有崩溃。

# iphone - Objective C中的readonly和readwrite有什么区别？

> ID：10276102
> 
> 赞同：4
> 
> 时间：2012-04-23T06:59:41.020
> 
> 标签：iphone, objective-c, properties

谁能告诉我iPhone SDK`readonly`和属性之间的区别？`readwrite`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-23T07:02:44.523

**readwrite** 指示该属性应被视为读/写。此属性是默认值。*块*中需要getter和*setter*方法`@implementation`。如果您`@synthesize`在实现块中使用该指令，则会合成*getter*和*setter*方法。

**readonly** 表示该属性是只读的。如果指定 readonly，则块中只需要一个*getter*方法`@implementation`。如果在块中使用`@synthesize`指令，则仅合成*getter*方法。此外，如果您尝试使用点语法分配值，则会出现编译器错误。`@implementation`

 *[有关更多信息，请访问此参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

希望对你有帮助..*

# ruby-on-rails - 帖子>显示视图中未定义的方法“用户”

> ID：10276108
> 
> 赞同：1
> 
> 时间：2012-04-23T07:00:16.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

当我尝试加载表单时，在帖子>显示中出现此错误。

该表单是供用户相互发送消息的。感谢任何反馈！

谢谢。

```
NoMethodError in Posts#show

Showing /Users/fkhalid2008/loand/app/views/posts/show.html.erb where line #1 raised:

undefined method `user' for #<Post:0x12e2ae930>
Extracted source (around line #1):

1: <%= form_remote_tag (:update => 'message', :url => {:controller => 'main', :action => 'send_message', :user_id => @post.user.id}) do %>
2: <br>
3: <br />
4: <br /> 
```

* * *

**帖子>显示视图**

```
<%= form_remote_tag (:update => 'message', :url => {:controller => 'main', :action => 'send_message', :user_id => @post.user.id}) do %>
<br>
<br />
<br />
<div class="field">
Hello! My name is <%= f.text_field :subject %> and I'm contacting you in response to your ad. I'm interested in learning more so get in touch! Here's my contact details: <%= f.text_field :body %>.
</div>
<button type="submit" class="btn span6 large">Submit</button>
<% end %> 
```

**帖子控制器**

```
def new
@post = Post.new

respond_to do |format|
  format.html # new.html.erb
  format.json { render :json => @post }
end
end

def edit
@post = Post.find(params[:id])
end

def create
    @post = Post.new(params[:post])

    respond_to do |format|
        if verify_recaptcha && @post.save
            format.html { redirect_to :action=> "index"}
            format.json { render :json => @post, :status => :created, :location => @post }
        else
            format.html { render :action => "new" }
            format.json { render :json => @post.errors, :status => :unprocessable_entity }
        end
    end
end 
```

**主控制器**

```
class MainController < ApplicationController

def send_message
message = Message.new
message.subject = params[:subject]
message.body = params[:message]
message.sender = User.find session[:user]
message.recipient = User.find params[:user_id]
if message.save
  ContactMailer.deliver_message_email message.recipient.email, message.id, request.host
  return redirect_to "/posts"
else
  render :text => "Hmm. Something seems to be wrong...let me look into it"
end 
```

**联系邮件**

类 ContactMailer < ActionMailer::Base

```
def message_email (recipient, id, host)
recipients   [ recipient ]
subject      "Weddoo: You have received a new message"
from         "admin@weddoo.com"
bcc          ["admin@weddoo.com"]
content_type "text/html"
body         :message_id => id, :host => host
sent_on Time.now
end

end
end 
```

**路线.RB**

```
Mysalary::Application.routes.draw do

resources :users do
 resources :messages
   end

resources :profiles
resources :pages
resources :posts

get "pages/home"
get "pages/about"
get "pages/legal"
get "pages/feedback"

root :to => 'posts#new'

end 
```

**后模型**

```
class Post < ActiveRecord::Base
attr_accessible :title, :job, :location, :salary

validates :title, :job, :location, :salary, :presence => true 
validates :salary, :numericality => {:greater_than_or_equal_to => 1} 

default_scope :order => 'posts.created_at DESC'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:13:32.213

`user`错误是说模型上没有方法`Post`。它直接指向第一行。

```
<%= form_remote_tag (:update => 'message', :url => {:controller => 'main', :action => 'send_message', :user_id => @post.user.id}) do %> 
```

所以我会说

`@post.user.id`是您的问题陈述，该模型没有方法`user`，但是如果没有看到 Post 模型就很难确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:26:55.363

我认为您错过了添加关系。

```
class Post < ActiveRecord::Base
  belongs_to :user
end 
```

# html - s:url 获取所有参数，即使参数名称不同

> ID：10276117
> 
> 赞同：0
> 
> 时间：2012-04-23T07:01:00.360
> 
> 标签：html, jsp, struts2

嗨，我正在使用`s:url`标签制作一个 url，我需要它来将我的 jsp 分页到几个页面。
所以当我们点击下一个或上一个链接时，我需要发送下一个或上一个。但是当我点击上一个时，它会在地址栏上显示我的网址，`someAction?previuos=prev`然后我点击下一个它会`someAction?previuos=prev&Next=Next`在我只需要时显示`someAction?Next=Next`。

`<s:url name="urlPrev">`对于上一个链接和下一个链接，我为 url 赋予了不同的名称`<s:url name="urlNext">`

我不知道如何区分它们。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:30:53.153

标记应默认为当前`<s:url/>`操作，不带任何参数。你应该只能在你的页面上说：

```
<s:url>
   <s:param name="Next" value="'Next'"/>
</s:url>

<s:url>
   <s:param name="Previous" value="'Previous'"/>
</s:url> 
```

请注意，该`<s:a/>`标签的行为与该标签非常相似，只是它当然会生成一个 html 锚点，因此请将链接名称放在正文中。这应该可以解决您的标签问题...

只是要指出分页是在网站上通过传递考虑 start_index 和 number_of_records_per_page 的参数大致完成的。然后，“下一步”按钮只需将 number_of_records_per_page + 1 添加为下一个的 start_index 值。要递减减去 number_of_records_per_page。通过标准化名称，所有基于列表的操作都变得更容易编写。

请参阅[http://struts.apache.org/2.3.1.2/docs/tag-reference.html](http://struts.apache.org/2.3.1.2/docs/tag-reference.html)以了解这些标签的使用（需要注意的一点是 name 参数未列为 url 标签的属性）。

# extjs4 - 如何为 extjs4 promt 提供正文填充？在 ie7 和 firefox 中出现提示的渲染问题？

> ID：10276121
> 
> 赞同：0
> 
> 时间：2012-04-23T07:01:28.993
> 
> 标签：extjs4

我正在使用简单的 extjs 提示从用户那里获取一个值

```
Ext.Msg.prompt('Name', 'Please enter your name:', function(btn, text){
if (btn == 'ok'){
    // process text value and close...
}}); 
```

在 chrome 中它可以正确呈现，但在 ie7 和 Firefox 中，文本框完全伸展而没有任何填充。所以我看不到文本框的左右两侧。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:17:12.823

对于**IE7**，将此代码复制到您的 HTML 文件中：( `<head> Tag`)

```
<!--[if IE 7]>
<style type="text/css">
        .x-window-body-default .x-form-text {
                width: 215px !important;
        }
</style>
<![endif]--> 
```

我们在 FireFox 中没有这个问题。您使用的是哪个版本的 FireFox？如果您使用的是旧版本，您可以使用`<style>`上面仅针对 FireFox 的版本，具体取决于您的版本：
[http ://css-tricks.com/snippets/css/css-hacks-targeting-firefox/](http://css-tricks.com/snippets/css/css-hacks-targeting-firefox/)

# c# - 为什么 WCF 中不允许方法重载？

> ID：10276124
> 
> 赞同：76
> 
> 时间：2012-04-23T07:01:35.983
> 
> 标签：c#, .net, wcf, overloading

假设这是一个`ServiceContract`

```
[ServiceContract]
public interface MyService
{
    [OperationContract]
    int Sum(int x, int y);

    [OperationContract]
    int Sum(double x, double y);

} 
```

C#中允许方法重载，但是WCF不允许你重载`operation contracts` 宿主程序会抛出一个`InvalidOperationException`while宿主

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-04-23T07:05:32.543

简而言之，不能重载方法的原因与 WSDL 不支持 C# 中存在的相同重载概念有关。以下帖子详细说明了为什么这是不可能的。

[http://jeffbarnes.net/blog/post/2006/09/21/Overloading-Methods-in-WCF.aspx](http://jeffbarnes.net/blog/post/2006/09/21/Overloading-Methods-in-WCF.aspx)

要解决此问题，您可以显式指定`Name`.`OperationContract`

```
[ServiceContract]
public interface MyService
{
    [OperationContract(Name="SumUsingInt")]
    int Sum(int x, int y);

    [OperationContract(Name="SumUsingDouble")]
    int Sum(double x, double y);
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-23T07:07:44.167

因为在通过 HTTP/SOAP 调用时，**合同中具有相同的方法名称**意味着无法确定客户端将调用哪个特定方法。

请记住，通过 http 调用 web 方法时，参数是可选的，如果缺少参数，则使用默认值进行初始化。这意味着这两种方法的调用在 HTTP/SOAP 上看起来可能完全相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-02T11:36:01.113

原因是 WCF 应该被不同的客户端普遍使用，而这些客户端不必是 .NET，也可能不允许`Operator/Method overloading`在他们的框架中使用。如果是这种情况，那么这些框架将无法使用此方法，因此为了确保它普遍可用，WCF 不允许并在属性中为您提供 name`OperationContract`属性来指定不同的名称。如果客户端是 .NET，则 WCF 将自动将其显示为方法重载，否则它将生成一个具有在 name 属性中指定的名称的新方法。

# mysql - Doctrine2 updateSchema 与外键冲突

> ID：10276127
> 
> 赞同：4
> 
> 时间：2012-04-23T07:01:45.750
> 
> 标签：mysql, doctrine, foreign-keys

`updateSchema`空数据库运行良好，但第二次出现以下 MySQL 错误：

```
SQLSTATE[HY000]: General error: 1025 Error on rename of
    './mydatabase/#sql-7f5_2b' to
    './mydatabase/mytable' (errno: 150) 
```

根据快速搜索，此错误发生在违反外部约束的情况下。正确的方法是让原则在`ALTER`ing 表时禁用外键检查。

对此我能做些什么（除了修补 Dcotrine）？

此外，我还指定：

```
'engine' => 'myisam', 
```

...在 中`connectionOptions`，但它被忽略了。

* * *

**编辑：**

当我从包含对错误的引用的其他表中删除外键时，`mytable`不会发生（它会发生在下一个仍然由 FK 引用但不是 的表中`mytable`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T09:31:33.010

不幸的是，Doctrine 并没有完全正确地处理这种情况。

您应该自己禁用约束并让 Doctrine 重新创建它们。要禁用约束，请连接到 MySQL 并键入：

```
SHOW CREATE TABLE mytable; 
```

它将为您提供创建表所需的 SQL，您将在其中看到约束创建指令。假设约束被称为“mytable_fk”，那么你需要发出命令：

```
 ALTER TABLE mytable 
DROP CONSTRAINT mytable_fk; 
```

下次你运行 updateSchema 时，Doctrine 将检测丢失的限制，并在需要时重新创建它。

# android - Android，是否可以将列表设置为水平滚动？

> ID：10276129
> 
> 赞同：0
> 
> 时间：2012-04-23T07:02:00.160
> 
> 标签：android, list, horizontal-scrolling, inflate

在我的项目中，我有一个列表。此列表包括应可水平滚动的缩略图。

如果我在里面添加一个列表`HorizontalScrollView`并膨胀我的列表会输出什么？我想水平排列所有图像。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:04:12.827

您可以使用[`Gallery`](http://developer.android.com/reference/android/widget/Gallery.html)小部件。

使用`Gallery`对您来说很容易，因为它也是使用适配器模式实现的。因此，您需要做的是提供适配器实现，就像您`ListView`为单个图像缩略图所做的那样。

或者你可以看看[`HorizontalListview`](http://www.dev-smart.com/archives/34)

# javascript - 如何禁用 HTML 链接

> ID：10276133
> 
> 赞同：303
> 
> 时间：2012-04-23T07:02:19.510
> 
> 标签：javascript, jquery, html, css

我在里面有一个链接按钮`<td>`，我必须禁用它。这适用于 IE，但不适用于 Firefox 和 Chrome。结构是 - 链接在一个`<td>`. 我无法在`<td>`（如 div/span）中添加任何容器

我尝试了以下所有方法，但无法在 Firefox 上运行（使用 1.4.2 js）：

```
$(td).children().each(function () {
        $(this).attr('disabled', 'disabled');
  });

  $(td).children().attr('disabled', 'disabled');

  $(td).children().attr('disabled', true);

  $(td).children().attr('disabled', 'true'); 
```

注意 - 我无法取消注册锚标签的点击功能，因为它是动态注册的。我必须在禁用模式下显示链接。

* * *

## 回答 #1

> 赞同：562
> 
> 时间：2012-04-23T07:04:28.557

您不能禁用链接（以可移植的方式）。您可以使用其中一种技术（每一种都有自己的优点和缺点）。

# CSS方式

当大多数浏览器都支持它时，这应该是**正确的方法**（但见后文）：

```
a.disabled {
    pointer-events: none;
} 
```

例如，Bootstrap 3.x 就是这样做的。目前（2016 年）只有 Chrome、FireFox 和 Opera（19+）支持它。Internet Explorer 从版本 11 开始支持此功能，但[不适用于链接，](https://stackoverflow.com/questions/10276133/how-to-disable-html-links/10276157#comment41699112_10276157)但它可以在外部元素中使用，例如：

```
span.disable-links {
    pointer-events: none;
} 
```

和：

```
<span class="disable-links"><a href="#">...</a></span> 
```

## 解决方法

我们可能需要定义一个 CSS 类，`pointer-events: none`但是如果我们*重用*`disabled`属性而不是 CSS 类会怎样 ？严格来说`disabled`不支持`<a>`但浏览器不会抱怨*未知*属性。使用`disabled`属性 IE 将忽略`pointer-events`但它会尊重 IE 特定`disabled`属性；其他符合 CSS 的浏览器将忽略*unknown* `disabled`属性和 Honor `pointer-events`。写起来比解释容易：

```
a[disabled] {
    pointer-events: none;
} 
```

IE 11 的另一个选项是将`display`链接元素设置为`block`or `inline-block`：

```
<a style="pointer-events: none; display: inline-block;" href="#">...</a> 
```

请注意，如果您需要支持 IE（并且您可以更改 HTML） ，这可能是一个*可移植的解决方案，但是......*

所有这一切请注意，`pointer-events`仅禁用...指针事件。**链接仍然可以通过键盘导航，**然后您还需要应用此处描述的其他技术之一。

# 重点

结合上述 CSS 技术，您可以使用`tabindex`非标准方式来防止元素被聚焦：

```
<a href="#" disabled tabindex="-1">...</a> 
```

我从来没有检查过它与许多浏览器的兼容性，那么你可能想在使用它之前自己测试它。它具有无需 JavaScript 即可工作的优势。不幸的是（但显然）`tabindex`不能从 CSS 更改。

# 拦截点击

使用`href`JavaScript 函数，检查条件（或 disabled 属性本身），以防万一。

```
$("td > a").on("click", function(event){
    if ($(this).is("[disabled]")) {
        event.preventDefault();
    }
}); 
```

要禁用链接，请执行以下操作：

```
$("td > a").attr("disabled", "disabled"); 
```

要重新启用它们：

```
$("td > a").removeAttr("disabled"); 
```

如果你想而不是`.is("[disabled]")`你可以使用（jQuery 1.6+ 将在属性未设置时`.attr("disabled") != undefined`总是返回）但更清晰（感谢 Dave Stewart 的这个提示）。请注意这里我以非标准方式使用该属性，如果您关心这一点，则将属性替换为类并替换为（添加和删除与and ）。`undefined``is()``disabled``.is("[disabled]")``.hasClass("disabled")``addClass()``removeClass()`

Zoltán Tamási[在评论](https://stackoverflow.com/questions/10276133/how-to-disable-html-links/10276157?noredirect=1#comment69158950_10276157)中指出，*“在某些情况下，点击事件已经绑定到某个“真实”函数（例如使用 knockoutjs）。在这种情况下，事件处理程序排序可能会导致一些麻烦。因此，我通过绑定返回来实现禁用链接链接`touchstart`和事件`mousedown`的错误处理程序`keydown`。它有一些缺点（它会阻止在链接上开始触摸滚动）“*但处理键盘事件也有利于防止键盘导航。

请注意，如果`href`未清除，则用户可以手动访问该页面。

# 清除链接

清除`href`属性。使用此代码，您无需添加事件处理程序，而是更改链接本身。使用此代码禁用链接：

```
$("td > a").each(function() {
    this.data("href", this.attr("href"))
        .attr("href", "javascript:void(0)")
        .attr("disabled", "disabled");
}); 
```

而这个重新启用它们：

```
$("td > a").each(function() {
    this.attr("href", this.data("href")).removeAttr("disabled");
}); 
```

就我个人而言，我不太喜欢这个解决方案（如果您不必对禁用的链接做更多的事情），但由于跟踪链接的方式多种多样，它*可能*更兼容。

# 假点击处理程序

添加/删除`onclick`你的功能`return false`，链接不会被关注。要禁用链接：

```
$("td > a").attr("disabled", "disabled").on("click", function() {
    return false; 
}); 
```

要重新启用它们：

```
$("td > a").removeAttr("disabled").off("click"); 
```

我认为没有理由更喜欢这个解决方案而不是第一个。

# 造型

样式更加简单，无论您使用什么解决方案来禁用我们确实添加了一个`disabled`属性的链接，因此您可以使用以下 CSS 规则：

```
a[disabled] {
    color: gray;
} 
```

如果您使用的是类而不是属性：

```
a.disabled {
    color: gray;
} 
```

如果您使用的是 UI 框架，您可能会看到*禁用*的链接样式不正确。例如，Bootstrap 3.x 可以处理这种情况，并且按钮的样式无论是`disabled`属性还是`.disabled`类都是正确的。相反，如果您正在清除链接（或使用其他 JavaScript 技术之一），您还必须处理样式，因为`<a>`没有`href`仍然被绘制为启用。

# 可访问的富 Internet 应用程序 (ARIA)

不要忘记将属性`aria-disabled="true"`与`disabled`属性/类一起包括在内。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-23T14:17:34.647

在css中得到了修复。

```
td.disabledAnchor a{
       pointer-events: none !important;
       cursor: default;
       color:Gray;
} 
```

当应用于锚标记时，上面的 css 将禁用点击事件。

有关详细信息，请查看此[链接](http://www.ankitblog.com)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-16T20:54:26.470

感谢所有发布解决方案的人（尤其是@AdrianoRepetti），我结合了多种方法来提供一些更高级的`disabled`功能（并且它可以跨浏览器工作）。代码如下（ES2015 和咖啡脚本都基于您的偏好）。

这提供了多层次的防御，以便标记为禁用的锚实际上是这样运行的。使用这种方法，你会得到一个你不能的锚：

*   点击
*   制表符并按回车键
*   切换到它会将焦点移动到下一个可聚焦元素
*   它知道随后是否启用了锚点

* * *

## 如何

1.  包括这个 css，因为它是第一道防线。这假设您使用的选择器是`a.disabled`

    ```
    a.disabled {
      pointer-events: none;
      cursor: default;
    } 
    ```

2.  接下来，在准备就绪时实例化此类（使用可选选择器）：

    ```
     new AnchorDisabler() 
    ```

* * *

## ES2015 班

`npm install -S key.js`

```
import {Key, Keycodes} from 'key.js'

export default class AnchorDisabler {
  constructor (config = { selector: 'a.disabled' }) {
    this.config = config
    $(this.config.selector)
      .click((ev) => this.onClick(ev))
      .keyup((ev) => this.onKeyup(ev))
      .focus((ev) => this.onFocus(ev))
  }

  isStillDisabled (ev) {
    //  since disabled can be a class or an attribute, and it can be dynamically removed, always recheck on a watched event
    let target = $(ev.target)
    if (target.hasClass('disabled') || target.prop('disabled') == 'disabled') {
      return true
    }
    else {
      return false
    }
  }

  onFocus (ev) {
    //  if an attempt is made to focus on a disabled element, just move it along to the next focusable one.
    if (!this.isStillDisabled(ev)) {
      return
    }

    let focusables = $(':focusable')
    if (!focusables) {
      return
    }

    let current = focusables.index(ev.target)
    let next = null
    if (focusables.eq(current + 1).length) {
      next = focusables.eq(current + 1)
    } else {
      next = focusables.eq(0)
    }

    if (next) {
      next.focus()
    }
  }

  onClick (ev) {
    // disabled could be dynamically removed
    if (!this.isStillDisabled(ev)) {
      return
    }

    ev.preventDefault()
    return false
  }

  onKeyup (ev) {
    // We are only interested in disabling Enter so get out fast
    if (Key.isNot(ev, Keycodes.ENTER)) {
      return
    }

    // disabled could be dynamically removed
    if (!this.isStillDisabled(ev)) {
      return
    }

    ev.preventDefault()
    return false
  }
} 
```

* * *

## 咖啡类：

```
class AnchorDisabler
  constructor: (selector = 'a.disabled') ->
    $(selector).click(@onClick).keyup(@onKeyup).focus(@onFocus)

  isStillDisabled: (ev) =>
    ### since disabled can be a class or an attribute, and it can be dynamically removed, always recheck on a watched event ###
    target = $(ev.target)
    return true if target.hasClass('disabled')
    return true if target.attr('disabled') is 'disabled'
    return false

  onFocus: (ev) =>
    ### if an attempt is made to focus on a disabled element, just move it along to the next focusable one. ###
    return unless @isStillDisabled(ev)

    focusables = $(':focusable')
    return unless focusables

    current = focusables.index(ev.target)
    next = (if focusables.eq(current + 1).length then focusables.eq(current + 1) else focusables.eq(0))

    next.focus() if next

  onClick: (ev) =>
    # disabled could be dynamically removed
    return unless @isStillDisabled(ev)

    ev.preventDefault()
    return false

  onKeyup: (ev) =>

    # 13 is the js key code for Enter, we are only interested in disabling that so get out fast
    code = ev.keyCode or ev.which
    return unless code is 13

    # disabled could be dynamically removed
    return unless @isStillDisabled(ev)

    ev.preventDefault()
    return false 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-23T07:05:16.983

尝试元素：

```
$(td).find('a').attr('disabled', 'disabled'); 
```

在 Chrome 中禁用链接对我有用：http: [//jsfiddle.net/KeesCBakker/LGYpz/](http://jsfiddle.net/KeesCBakker/LGYpz/)。

Firefox 似乎不太好用。这个例子有效：

```
<a id="a1" href="http://www.google.com">Google 1</a>
<a id="a2" href="http://www.google.com">Google 2</a>

$('#a1').attr('disabled', 'disabled');

$(document).on('click', 'a', function(e) {
    if ($(this).attr('disabled') == 'disabled') {
        e.preventDefault();
    }
}); 
```

注意：为将来禁用/启用的链接添加了“实时”声明。
注2：将“live”更改为“on”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-15T00:29:46.157

Bootstrap 4.1 提供了一个名为`disabled`和`aria-disabled="true"`属性的类。

例子”

```
<a href="#" 
        class="btn btn-primary btn-lg disabled" 
        tabindex="-1" 
        role="button" aria-disabled="true"
>
    Primary link
</a> 
```

[更多内容请访问 getbootstrap.com](https://getbootstrap.com/docs/4.1/components/buttons/#disabled-state)

因此，如果您想动态地制作它，而`you don't want to care if it is button or ancor`不是在 JS 脚本中，您需要类似的东西

```
 let $btn=$('.myClass');
   $btn.attr('disabled', true);
   if ($btn[0].tagName == 'A'){
        $btn.off();
        $btn.addClass('disabled');
        $btn.attr('aria-disabled', true);
   } 
```

但要小心

该解决方案仅适用于与 classes 的链接`btn btn-link`。

有时引导程序建议使用`card-link`类，在这种情况下解决方案**将不起作用**。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-08T16:37:46.343

我最终得到了下面的解决方案，它可以与属性`<a href="..." disabled="disabled">`、或类一起使用`<a href="..." class="disabled">`：

CSS 样式：

```
a[disabled=disabled], a.disabled {
    color: gray;
    cursor: default;
}

a[disabled=disabled]:hover, a.disabled:hover {
    text-decoration: none;
} 
```

Javascript（在 jQuery 中准备好了）：

```
$("a[disabled], a.disabled").on("click", function(e){

    var $this = $(this);
    if ($this.is("[disabled=disabled]") || $this.hasClass("disabled"))
        e.preventDefault();
}) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-10T04:13:16.547

您可以禁用 HTML 链接，如下所示：

```
<style>
    .disabled-link {
        pointer-events: none;
    }
</style>
<a href="https://google.com" class="disabled-link">Google.com</a> 
```

您可以使用内联 JavaScript：

```
<a href="javascript:void(0)">Google.com</a> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-24T13:08:02.897

只需添加一个 css 属性：

```
<style>   
a {
 pointer-events: none;
}
</style> 
```

这样做可以禁用锚标记。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-23T07:21:04.647

我会做类似的事情

```
$('td').find('a').each(function(){
 $(this).addClass('disabled-link');
});

$('.disabled-link').on('click', false); 
```

像这样的东西应该工作。您为要禁用的链接添加一个类，然后当有人单击它们时返回 false。要启用它们，只需删除类。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-23T07:07:08.590

您不能禁用链接，如果您希望单击事件不应该触发，那么只需`Remove`从`action`该链接开始。

```
$(td).find('a').attr('href', ''); 
```

欲了解更多信息：- [可以禁用的元素](http://www.w3.org/TR/html4/interact/forms.html#h-17.12.1)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-04T21:16:19.647

要禁用链接以访问触摸设备上的另一个页面：

```
if (control == false)
  document.getElementById('id_link').setAttribute('href', '#');
else
  document.getElementById('id_link').setAttribute('href', 'page/link.html');
end if; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-29T14:10:00.843

在 Razor (.cshtml) 中，您可以执行以下操作：

```
@{
    var isDisabled = true;
}

<a href="@(isDisabled ? "#" : @Url.Action("Index", "Home"))" @(isDisabled ? "disabled=disabled" : "") class="btn btn-default btn-lg btn-block">Home</a> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-25T10:33:58.057

我建议将链接变成一个按钮并使用“禁用”属性。您可以查看此问题以检查如何将链接转换为按钮：[How to create an HTML button that act like a link](https://stackoverflow.com/questions/2906582/how-to-create-an-html-button-that-acts-like-a-link)

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2015-03-23T14:12:37.993

您可以使用它来禁用 asp.net 的超链接或 html 中的链接按钮。

```
$("td > a").attr("disabled", "disabled").on("click", function() {
    return false; 
}); 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2016-06-08T17:23:06.087

还有另一种可能的方法，也是我最喜欢的一种。基本上，这与灯箱禁用整个页面的方式相同，方法是放置一个 div 并摆弄 z-index。这是我的一个项目的相关片段。***这适用于所有浏览器！！！！***

Javascript（jQuery）：

```
var windowResizer = function(){
        var offset = $('#back').offset();   
        var buttontop = offset.top;
        var buttonleft = offset.left;
        $('#backdisabler').css({'top':buttontop,'left':buttonleft,'visibility':'visible'});
        offset = $('#next').offset();
        buttontop = offset.top;
        buttonleft = offset.left;
        $('#nextdisabler').css({'top':buttontop,'left':buttonleft,'visibility':'visible'});
}

$(document).ready(function() {
    $(window).resize(function() {   
        setTimeout(function() {
            windowResizer();
        }, 5); //when the maximize/restore buttons are pressed, we have to wait or it will fire to fast
    });
}); 
```

并在 html

```
<a href="" id="back" style="float: left"><img src="images/icons/back.png" style="height: 50px; width: 50px" /></a>
<a href="" id="next" style="float: right"><img src="images/icons/next.png" style="height: 50px; width: 50px" /></a>
<img id="backdisabler" src="images/icons/disabled.png" style="visibility: hidden; position: absolute; padding: 5px; height: 62px; width: 62px; z-index: 9000"/>
<img id="nextdisabler" src="images/icons/disabled.png" style="visibility: hidden; position: absolute; padding: 5px; height: 62px; width: 62px; z-index: 9000"/> 
```

所以调整器会找到锚点（图像只是箭头）的位置并将禁用器放在顶部。禁用器的图像是一个半透明的灰色正方形（更改 html 中禁用器的宽度/高度以匹配您的链接）以显示它已被禁用。浮动允许页面动态调整大小，并且禁用器将在 windowResizer() 中效仿。您可以通过 google 找到合适的图像。为简单起见，我已将相关的 css 内联。

然后根据一些条件，

```
$('#backdisabler').css({'visibility':'hidden'});
$('#nextdisabler').css({'visibility':'visible'}); 
```

* * *

## 回答 #16

> 赞同：-5
> 
> 时间：2014-11-07T20:40:11.900

我认为其中很多都是过度思考。添加任何你想要的类，比如`disabled_link`.
然后让 css 有`.disabled_link { display: none }`
Boom 现在用户看不到链接，所以你不必担心他们点击它。如果他们做了一些事情来满足可点击的链接，只需使用 jQuery: 删除该类
`$("a.disabled_link").removeClass("super_disabled")`。繁荣完成！

# javascript - jQuery 选择器可以根据元素的数据查找元素吗？

> ID：10276134
> 
> 赞同：1
> 
> 时间：2012-04-23T07:02:26.690
> 
> 标签：javascript, jquery

我有一个带有大量复选框的应用程序。他们每个人都有一个 jQuery 数据参数，指示他们属于哪个组，例如`<input type="checkbox" class="show" data-group="zones" />`

在某些情况下，我想根据它们包含的数据选择这些复选框的子集。jQuery 选择器可以拉这个吗？如果没有，除了手动过滤之外，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:04:32.550

当然，一种方法很简单

```
$("input[data-group='zones']"); 
```

**更新：**

更改数据的值也可以这样完成

```
$("input[data-group='zones']").each(function() {
   $(this).data('group', 'newzone');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:16:41.977

研究了一下，还有另一种方法，使用 filter()

```
var inputs = $('input').filter(function() { 
  return $(this).data("groups") == true 
}); 
```

接下来整体操作

```
inputs.each(function() {
    $(this).data('groups', 'new zone');
}); 
```

或者你修改单个元素

```
inputs[0].data('groups', 'new zone'); 
```

# java - 从 ArrayList 中删除对象

> ID：10276136
> 
> 赞同：4
> 
> 时间：2012-04-23T07:02:40.847
> 
> 标签：java, arraylist

我想从`ArrayList`长度等于作为整数传递的数字的元素中删除一个元素。我的代码如下。运行时，程序会在使用方法`UnsupportedOperationException`时抛出该行`remove()`。实际上，这是一个编码问题。

```
public static List<String> wordsWithoutList(String[] words, int len) {    
    List<String> list = new ArrayList<String>();

    list = Arrays.asList(words);

    for(String str : list) {
        if(str.length() == len) {
            list.remove(str);
        }
    }
    return l;       
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T07:07:58.417

返回的列表`asList`不是`ArrayList`-- 它不支持修改。

你需要做

```
public static List<String> wordsWithoutList(String[] words, int len) {

    List<String> l = new ArrayList<String>( Arrays.asList(words) );

    for( Iterator<String> iter = l.iterator(); iter.hasNext(); ){
        String str = iter.next();
        if(str.length()==len){
            iter.remove();
        }
    }
    return l;       
} 
```

所以有两件事：

*   `asList`使用`ArrayList`构造函数制作返回的数组的可修改副本。
*   使用迭代器`remove`来避免`ConcurrentModificationException`.

有人指出这可能效率低下，因此更好的选择是：

```
List<String> l = new ArrayList<String>(str.length());
                                   //  ^^ initial capacity optional
for( String str : words )
    if( str.length()!=len)
        l.add(str);

return l; 
```

# spring - MockHttpServletRequest 的 realPath

> ID：10276144
> 
> 赞同：3
> 
> 时间：2012-04-23T07:03:24.750
> 
> 标签：spring, realpath

我正在为我的 Spring 控制器编写一个基于 Spring 的测试用例，在我的控制器中我们使用的是这样的“request.getSession().getServletContext().getRealPath("/myFolderName");” 它对正常请求工作正常，但对于像 MockHttpServletRequest 这样的单元测试用例，上面的方法调用给出了 null。我如何获得 MockHttpServletRequest 的 realPath。

谢谢，普拉内思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:54:20.960

By default `MockHttpServletRequest` acts as if root webapp folder is a classpath, therefore you should be able to use `getRealPath()` for classpath resources.

Alternatively, you can supply `MockHttpServletRequest` with `MockServletContext`, and `MockServletContext` can be configured with specific root folder for `getRealPath()`, etc.

# c# - 制作类型集合并对其进行检查的最佳方法

> ID：10276146
> 
> 赞同：3
> 
> 时间：2012-04-23T07:03:35.733
> 
> 标签：c#, .net, reflection

我如何制作一个可以存储数据类型（比如字符串、日期时间、十进制等）的集合？并使用此集合执行比较，如下所示：

```
if (pi.PropertyType.IsIn ([how can check against the collection of type) //where pi is a property info]))
{

} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:27:00.453

```
List<Type> types = new List<Type> {typeof(string), typeof(int)};
if (types.Contains(pi.PropertyType))
{
  //do stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:58:16.483

希望我能正确理解你的问题。*首先需要对集合类型*进行更精确的定义。这是我将使用的：

*   集合是通用的

*   集合正在实现标准集合接口之一，如`IList<T>`,`ICollection<T>`或`IEnumerable<T>`. 在此示例中，集合类型是派生自 的类型`IEnumerable<T>`。

要发现一个类型是否是一个集合，您必须使用它来获取它实现的接口`GetInterfaces()`，只查看使用的泛型接口`IsGenericType`，然后使用以下方法获取泛型类型（即从`IList<String>`to `IList<>`）`GetGenericTypeDefinition()`：

```
var genericCollectionType = typeof(IEnumerable<>);
var isCollection = pi
  .PropertyType
  .GetInterfaces()
  .Where(type => type.IsGenericType)
  .Select(type => type.GetGenericTypeDefinition())
  .Contains(genericCollectionType);
if (isCollection) {
  ...
} 
```

# objective-c - 如何在 ipad 中识别 viewController 的子类的方向

> ID：10276152
> 
> 赞同：0
> 
> 时间：2012-04-23T07:04:07.910
> 
> 标签：objective-c, ipad, ios5, xcode4.2

我有一个 viewController 类示例 FirstView，它有一个子类 ex。第二视图。SecondView 是 FirstView 的子类。现在我想检查第二个视图中的方向？

如何识别 secondView 方向？我检查了以下方法，但它不起作用。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

当我改变方向时，不会调用任何方法。

有什么方法可以识别自定义子类的方向吗？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:42:52.790

`[[UIApplication sharedApplication] statusBarOrientation]`返回您当前的设备方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:12:12.667

我认为您可以使用 UIAccelerometer。您只需要实现 UIAccelerometerDelegate。

只是为了使用加速度计获取视图的当前方向，您可以使用以下代码：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
    // Get the current device angle
    float x = [acceleration x];
    float y = [acceleration y];
    float angle = atan2(y, x); 

 if([acceleration z]>-0.84)
 {
        if(angle >= -2.25 && angle <= -1)  // Current Orientation = Portrait
        {
             //Do the work
        } 
        else if(angle >= -0.35 && angle < 0.20) //Current Orientation = Landscape Left
        {
              //Do the work
        }
        else if(angle >= 0.90 && angle <= 2.00) //Current Orientation = Portrait Upside Down
        {
             //Do the work
        }
        else if(angle <= -2.70 || angle >= 2.5) //Current Orientation = Landscape Right
        {
              //Do the work
        }
   }
} 
```

如果您需要更多帮助，请告诉我。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:26:16.620

在你的超类中，你应该调用它的超类的orientation方法，比如：

```
Class A {
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
         [super shouldAutorotateToInterfaceOrientation:interfaceOrientation];
    }
}

class b inherits class a {
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
     NSLog(@"Your stufs");    
    }
} 
```

# unit-testing - 使用 Mockito 进行 GWTP 单元测试

> ID：10276155
> 
> 赞同：0
> 
> 时间：2012-04-23T07:04:16.473
> 
> 标签：unit-testing, gwt, mockito, gwt-platform

我正在尝试使用 Mockito 来测试我的 GWTP 应用程序。

我正在尝试模拟我的视图、代理、Placemanager 和事件总线。我尝试使用@Mock AbcView abc；

和 Abcview abc = Mockito.mock(AbcView.class);

然而，每次模拟视图都被实例化为空。我该如何解决？一旦视图被模拟，我将能够继续测试我的演示者类，因为演示者的构造函数具有以下代码：getView().setUiHandlers(this);

所以直到视图被正确实例化，才会抛出空指针异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:22:31.657

您是否使用`MockitoJUnitRunner`跑步者进行了测试？

```
@RunWith(MockitoJUnitRunner.class)
public class ExampleTest {

    @Mock
    private List list;

    @Test
    public void shouldDoSomething() {
        list.add(100);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:43:12.163

除了@Sydney 的回复，您还需要确保这`AbcView.class`不是最终的。我忘记了最终类是否会导致 null 或运行时错误，但这可能是某种意外行为的原因——无论哪种方式，模拟都不起作用。如果该类不是最终的，您需要确保在该模拟上存根的任何方法都不是最终的。

# android - 如何让应用程序识别它之前是否安装在此设备上，如果是，那么何时（日期）？

> ID：10276156
> 
> 赞同：2
> 
> 时间：2012-04-23T07:04:19.690
> 
> 标签：android, time-trial

我正在制作一个应用程序。它有免费试用版和高级版。免费版作为高级版运行 7 天，之后会提示用户购买高级版并退出。为此，我想出了一些想法，例如作为：

1）唯一识别设备并将该唯一ID和日期发送到服务器。并在启动时检查此设备的应用程序是否超过7天，如果有则阻止它。当用户卸载应用程序并在注册后再次安装时服务器应用程序将被阻止。我已经阅读了一些唯一识别设备的方法。但是正如[这个链接](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)所暗示的那样，它们都不可靠，并且不适用于每个设备和操作系统版本。

2）我可以将一个文件写入 sdcard 指示应用程序安装，并在第一次运行时检查该特定文件以检测重新安装。但用户可以轻松删除该文件并重新安装应用程序，从而获得另一个试用 7不能接受的天数。

有没有办法可以实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:21:47.307

这些事情是可以做到的，但我鼓励你再想一想。您提出的建议对您的用户不利，对用户不利通常意味着较低的应用销售量。

该应用程序每次启动时都必须检查您的服务器。因此，如果我没有数据连接或您的服务器已关闭，我将无法使用它？即使我付了钱？

无论你做什么，它都可能被打败，特别是如果使用日期绑定的东西。

我建议您考虑为免费版本中没有的高级版本增加价值，这将鼓励人们购买。或者用广告支持免费的，很多人会很乐意支付合理的金额来摆脱它。我建议不要发布以某种方式瘫痪的免费版本，而是让您的付费版本对用户有价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:23:07.353

我的建议是——

试用版 -

*   启动时向服务器发送时间戳密钥（保存当前时间和设备序列号以及试用或高级 ID 的十六进制字符串的密钥）。在服务器中，如果没有存储任何密钥，这意味着应用程序是第一次启动并保存以供将来检查。服务器将向设备发送时间戳密钥（带有服务器当前时间的密钥）。设备会将这个密钥保存在本地数据库中。*   下次再次启动应用程序时，密钥将被发送到服务器，服务器将从密钥中提取时间和序列号，并检查第一个密钥（确定为首次启动），如果超过 7 天，则确定应用程序有已过期。*   如果网络不可用，请不要启动应用程序。

    高级版 -

    *   从密钥中提取试用版或高级版 ID，高级版不会使应用程序过期，只需继续使用该应用程序即可。

    如果用户更改设备时间不会妨碍此逻辑，它将适用于所有情况。

# .net - XmlSerializationReader 类的 CheckReaderCount 方法？为什么它会通过“ref”获取int参数？

> ID：10276160
> 
> 赞同：0
> 
> 时间：2012-04-23T07:04:35.163
> 
> 标签：.net, integer, int, ref

我对值类型按引用传递的工作不多，但是很久以前我通过引用传递了一个结构，今天我在.net框架“CheckReaderCount”中遇到了一个函数，它通过“ref”获取2个int我想知道它是什么究竟会要求这样做？？？？它会在函数内部改变 int 参数的值，为什么不将 Integer 对象作为参数？？？？只是想了解在这种情况下 ref 的使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:24:01.907

简单地说 - 它正在读取和更改两个参数的值；`whileIterations`在按位测试中递增和比较，并`readerCount`与*特定*属性值（相等是错误条件）进行比较，并且（假设它没有错误）*分配*该属性值。

读取和更改两个值的唯一非`ref`方法（假设我们不将它们作为字段提升到单独的对象上）是将它们都作为参数传递并返回某种元组，然后调用者将其分解以更新本地变量（等）。一个简单的`ref`/`ref`更简单。

# jquery - 单击使用 jquery 将类添加到 aspx 链接按钮

> ID：10276162
> 
> 赞同：0
> 
> 时间：2012-04-23T07:04:48.220
> 
> 标签：jquery, asp.net, css, linkbutton

我有许多包含各种内容的链接按钮，例如选项卡，我需要使用 jquery 将一个类应用于单击的链接按钮，正在使用波纹管功能，但在发布支持页面时它不起作用

```
$(function() {
    $('a').click(function() {
        $(this).addClass('selected');
    }, function() {
        $(this).removeClass('selected');
    });
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:11:59.620

这不会像您期望的那样起作用，因为添加了类，然后刷新了页面。

你真的不需要任何Javascript，这就是我的做法。

每个页面都有自己的ID

```
<body id="aboutPage"> 
```

每个菜单项也有自己的 ID：

```
<li id="aboutMenuItem">About</li> 
```

然后在您的 CSS 中，您可以专门为您所在的页面点击 li：

```
#home #homeMenuItem,
#about #aboutMenuItem,
[...]
{
 /* Style for the selected menu item here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:12:06.440

尝试绑定点击事件或做这样的事情......

```
$(function() {
    $('a').live('click', function() {
        $(this).toggleClass('selected');
    });
}); 
```

# c# - GridView 中的单个 RadioButton 选择

> ID：10276168
> 
> 赞同：3
> 
> 时间：2012-04-23T07:05:05.873
> 
> 标签：c#, gridview, radio-button

在 gridview 中，如何在不使用 JavaScript 的情况下进行单个单选按钮选择

```
<asp:TemplateField ShowHeader="False">
   <ItemTemplate>
      <asp:RadioButton ID="RadioButton1" runat="server" GroupName="GroupName" />
   </ItemTemplate>
</asp:TemplateField 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T06:15:01.003

为每个单选按钮控件赋予不同的名称并删除 groupname 属性

例如

```
<asp:RadioButton ID="RadioButton2"  runat="server"  /> 
```

# objective-c - 在目标c中使用不推荐使用的方法是否错误

> ID：10276179
> 
> 赞同：0
> 
> 时间：2012-04-23T07:06:02.463
> 
> 标签：objective-c, cocoa, deprecated

今天我用 10.7 SDK 编译我的应用程序，我收到了关于不推荐使用的方法的警告。
我应该更改所有已弃用的方法吗？
在目标 c 中使用不推荐使用的方法是错误的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T07:12:01.757

是的，您应该更改已弃用的方法，因为它们将来可能会消失。

> 在计算机软件标准和文档中，弃用一词用于表示不鼓励使用特定软件功能，通常是因为它已被更新/更好的版本取代。已弃用的功能在当前版本的软件中仍然有效，但可能会引发错误消息或警告。

[维基：关于弃用](http://en.wikipedia.org/wiki/Deprecation)。

# php - 如何使用 mysql 结果在 php 中创建函数？

> ID：10276183
> 
> 赞同：0
> 
> 时间：2012-04-23T07:06:21.447
> 
> 标签：php, function

我在不同的页面上一次又一次地使用相同的查询来获取结果。我想为这个查询创建一个函数。

```
$result = mysql_query(" SELECT name FROM tablename where id= '$row[name_id]'"); 
$row = mysql_fetch_array($result); 
echo $row ['name']; 
```

如何制作以及如何调用该函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:41:08.547

这是一个好主意，但首先您必须创建一个函数来运行查询（因为您必须比特定查询更频繁地运行各种查询）

```
function dbget() {
  /*
  easy to use yet SAFE way of handling mysql queries.

  usage: dbget($mode, $query, $param1, $param2,...);
  $mode - "dimension" of result:
  0 - resource
  1 - scalar
  2 - row
  3 - array of rows

  every variable in the query have to be substituted with a placeholder
  while the avtual variable have to be listed in the function params
  in the same order as placeholders have in the query.

  use %d placeholder for the integer values and %s for anything else
  */
  $args = func_get_args();
  if (count($args) < 2) {
    trigger_error("dbget: too few arguments");
    return false;
  }
  $mode  = array_shift($args);
  $query = array_shift($args);
  $query = str_replace("%s","'%s'",$query); 

  foreach ($args as $key => $val) {
    $args[$key] = mysql_real_escape_string($val);
  }

  $query = vsprintf($query, $args);
  if (!$query) return false;

  $res = mysql_query($query);
  if (!$res) {
    trigger_error("dbget: ".mysql_error()." in ".$query);
    return false;
  }

  if ($mode === 0) return $res;

  if ($mode === 1) {
    if ($row = mysql_fetch_row($res)) return $row[0];
    else return NULL;
  }

  $a = array();
  if ($mode === 2) {
    if ($row = mysql_fetch_assoc($res)) return $row;
  }
  if ($mode === 3) {
    while($row = mysql_fetch_assoc($res)) $a[]=$row;
  }
  return $a;
} 
```

那么您可以创建您要求的这个特定功能

```
function get_name_by_id($id){
    return dbget("SELECT name FROM tablename where id=%d",$id); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:17:44.120

示例类存储 sample.php

```
class sample
{

    function getName(id)
    {
         $result = mysql_query("SELECT name FROM tablename where id='$id'"); 
         $row = mysql_fetch_array($result); 
         return $row ['name']; 
    }
} 
```

使用页面包含 sample.php，然后创建对象，然后调用 getName() 函数。

```
<?php
 include "db.class.php";
 include "sample.php";
 $ob=new sample();         //create object for smaple class
 $id=12;
 $name=$ob->getName($id);  //call function..
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T07:18:51.657

您可能还应该解析数据库连接

$database_connection = mysql_connect('localhost', 'mysql_user', 'mysql_password');

```
function get_row_by_id($id, $database_link){
    $result = mysql_query("SELECT name FROM tablename where id= '{$id}"); 
    return mysql_fetch_array($result);
} 
```

用法

```
$row = get_row_by_id(5, $database_connection); 
```

[编辑] 此外，将函数包装在一个类中可能会有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-23T07:40:33.053

```
function getName($id){
    $result = mysql_query("SELECT name FROM tablename where id= '$row[name_id]'"); 
    $row = mysql_fetch_array($result); 
    return $row ['name']; 
} 
```

通过调用函数

```
$id = 1; //id number
$name = getName($id);
echo $name; //display name 
```

# java - JSF 2.0 在页面加载时调用服务器端方法

> ID：10276184
> 
> 赞同：1
> 
> 时间：2012-04-23T07:06:39.457
> 
> 标签：java, jsf-2

让我给你一个关于系统如何工作的想法。

我正在使用 JAAS 登录模块进行登录和角色管理。我可以根据我的角色访问特定页面。

我在地址栏中输入我的网址，按回车键。

登录页面出现，正确登录后，它会将我重定向到正确的页面（现在我们称之为 page1.jsf）。

我想在页面加载时调用服务器端方法。

你能帮我吗？

** 编辑 **

假设我必须访问 page1.jsf 只能由 role1 访问。

在地址栏中，我输入[http://localhost:8080/myapp/page1.jsf](http://localhost:8080/myapp/page1.jsf)

JAAS 显示登录页面，正确输入凭据后，我被重定向到 page1.jsf

一旦请求 page1.jsf 或页面加载，我想从我的类中调用服务器端方法来重新加载 page1.jsf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:21:05.397

如果您使用的是 JSF 2，则可以使用上面的页面片段：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  ... >
 <f:view contentType="text/html">
    <f:event type="preRenderView" listener="#{permissionManager.checkRoles}" />
    <f:attribute name="roles" value="ROLE" />

  ...
  </f:view>
</html> 
```

您可以添加一个包含角色的属性，并在`PermissionManager.checkRoles()`执行重定向到正确的页面。

```
@Named
@ApplicationScoped
class PermissionManager { 
  ...
  public void checkRoles(ComponentSystemEvent event) {

       String acl = "" + event.getComponent().getAttributes().get("roles");
       //Check user role
       ...
       //Redirect if required
       try {

        ConfigurableNavigationHandler handler = (ConfigurableNavigationHandler) context
                .getApplication().getNavigationHandler();
        handler.performNavigation("access-denied");
    } catch (Exception e) {
        ...
    }

   }

} 
```

查看此[示例](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/) 并查看此[相关问题](https://stackoverflow.com/questions/7488211/jsf-how-to-hit-a-bean-method-and-redirect-based-on-a-get-variable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:16:00.197

是的，这行得通。除了访问 jsp 或 jsf 页面，您还可以访问 Servlet。所以创建一个新的servlet。例如：

```
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class TestServlet
 */
public class TestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public static void yourMethod() {
         // do something useful
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        yourMethod();
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

然后在 web.xml 文件中创建一个新条目，以便将 Servlet 映射到 /。

```
<servlet>
    <display-name>TestServlet</display-name>
    <servlet-name>TestServlet</servlet-name>
    <servlet-class>your.packages.TestServlet</servlet-class>
  </servlet>  
  <servlet-mapping>
    <servlet-name>TestServlet</servlet-name>
    <url-pattern>/TestServlet</url-pattern>
  </servlet-mapping> 
```

在此之后，您应该能够调用`localhost:8080/TestServlet`which 然后调用您的方法。

# pseudocode - 如何为下图编写伪代码？

> ID：10276187
> 
> 赞同：4
> 
> 时间：2012-04-23T07:06:51.140
> 
> 标签：pseudocode

我没有在下图中使用 do-while 或 while 循环：

![在此处输入图像描述](../Images/66795af6433f09fa5d50421ea8ada002.png)

这里，A、B 和 C 是函数。如何为上图编写伪代码？

编辑：这是来自我的 C++ 编程实践。如果没有“B 循环”（或“A 循环”），我可以将其编写如下：

```
Start
Input x;
while(x!=2)
{
A(); Input x;
}
C();
End 
```

但是，当“B 循环”进来时，我不知道如何包含它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:41:54.917

```
Start;

Input x;

while(x!=2){ 

    if (x!=1){
        A();
    } else{ 
        B()
    }
    Input x;
}

C();

End 
```

但请注意您使用的语言我建议您在数据采集之间添加睡眠模式（就在输入 x 之前）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:11:10.310

程序做什么？用英语解释，然后写下来。然后你就有了你的伪代码。

```
If any input
 if input is not 1 and not 2
 return a  and do more input (? dont get the diagram here ;p)
 if input is 1
 return b and more input (??)
 else if not above
 return c and end program 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-05T15:12:46.590

@BaptisteGousset 的答案很好，但在某些情况下还有另一种更好的方法。可以使用 do...while 循环而不是 while 来简化代码以删除双重输入操作，但这会使比较逻辑稍微复杂一些。

```
Start;
Do
{
    Input x;
    if (x equals 1)
    {
        B();
    }
    elseif(x not equal to 2)
    {
        A();
    }

} While (x not equal to 2);
C();
End; 
```

您也可以使用 goto 语句来实现这一点，但 goto 通常[被认为是有害](https://homepages.cwi.nl/~storm/teaching/reader/Dijkstra68.pdf)的。

一般来说，任何流程图都没有一个规范的“伪代码”答案——这取决于您愿意使用什么结构以及这些结构与您的实际任务的匹配程度。

# linux - 链接器是否在静态链接文件中包含 libc.so.6？

> ID：10276188
> 
> 赞同：2
> 
> 时间：2012-04-23T07:07:07.733
> 
> 标签：linux, gcc, linker

当我动态链接可执行 elf 文件时，它需要 libc.so.6 共享库。当我静态链接可执行 elf 文件时，它不需要 libc.so.6 共享库（这并不奇怪）。

这是否意味着用--static 组装可执行文件，链接器在其中包含libc.so.6？如果不是 - 链接器包含什么文件？我在哪里可以搜索它？据我所知，链接器在静态汇编文件中包含静态库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:35:20.663

如果您以静态方式链接，则链接器将从`.o`静态库 ( `.a`) 链接所有需要的对象 ( ) 文件。例如，以下命令列出了 libc6 库中包含的目标文件：

```
ar t /usr/lib/libc.a 
```

（libc.a 的确切路径当然因系统而异）

所以对你的问题的回答是否定的，它不会链接*整个*libc6 库，而只会链接所需的目标文件。而且，它对 没有任何作用`libc.so.6`，因为这仅用于动态链接。它适用于`libc.a`库的 - 静态版本。

根据@janneb 评论，要链接的最小单元是“部分”，因此它甚至可能不需要链接整个目标文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:29:38.830

链接器是`ld`命令。如果您使用该命令，它会按照您的要求执行。注意 GNU`ld`可以接受[脚本](http://www.math.utah.edu/docs/info/ld_3.html#SEC4)

但是，大多数人都在使用该`gcc`命令。这是来自[Gnu Compiler Collection](http://gcc.gnu.org/)套件的编译器。实际上，该`gcc`命令只是一个驱动程序，它将运行`cc1`（适当的 C 编译器）`as`、`ld`和[collect2](http://gcc.gnu.org/onlinedocs/gccint/Collect2.html)（处理初始化等，然后调用链接器）。

要了解正在运行的确切命令[s] ，请将程序标志`gcc`传递给它。`-v`

当您传递`-static`给`gcc`它时，它可能会与例如`/usr/lib/x86_64-linux-gnu/libc.a`或其他一些静态形式的 GNU Libc 库链接。

# java - Andengine睡眠线程？

> ID：10276193
> 
> 赞同：1
> 
> 时间：2012-04-23T07:07:20.150
> 
> 标签：java, andengine, thread-sleep

我想创建一个平铺精灵，当按下它时它会改变它的平铺编号，发出声音并禁用触摸按钮 10 秒。我应该为此使用java线程类还是andengine有更方便的东西可以代替？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:39:47.113

AndEngine 有一个可以与 ModifierListener 结合使用的延迟修饰符来实现这个目的......就像

```
new DelayModifier(10, new IEntityModifierListener() {
    @Override
    public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
        // TODO Auto-generated method stub
    }
}); 
```

其中“10”是以秒为单位的时间 - 然后使用 onModifierFinished 方法重新启用您的磁贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:16:24.887

您需要的是一个计时器，这是一个很棒的教程，还请阅读评论，因为还有其他关于如何执行此操作的建议：[教程](http://www.andengine.org/forums/tutorials/using-timer-s-sprite-spawn-example-t463.html)

# c++ - 使用 Makefile 在编译中排除源文件

> ID：10276202
> 
> 赞同：82
> 
> 时间：2012-04-23T07:08:17.840
> 
> 标签：c++, makefile

是否可以在 Makefile 中使用通配符函数在编译过程中排除源文件？

就像有几个源文件一样，

```
src/foo.cpp
src/bar.cpp
src/... 
```

然后在我的makefile中，

```
SRC_FILES = $(wildcard src/*.cpp) 
```

但我想排除 bar.cpp。这可能吗？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-04-23T12:52:55.357

如果您使用的是 GNU Make，您可以使用[`filter-out`](https://www.gnu.org/software/make/manual/html_node/Text-Functions.html)：

```
SRC_FILES := $(wildcard src/*.cpp)
SRC_FILES := $(filter-out src/bar.cpp, $(SRC_FILES)) 
```

或一行：

```
SRC_FILES = $(filter-out src/bar.cpp, $(wildcard src/*.cpp)) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-23T07:16:07.047

使用 find :)

```
SRC_FILES := $(shell find src/ ! -name "bar.cpp" -name "*.cpp") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-23T07:12:25.363

您可以使用 Makefile subst 功能：

```
 EXCLUDE=$(subst src/bar.cpp,,${SRC_FILES}) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-26T18:24:43.303

[Unix glob](https://en.m.wikipedia.org/wiki/Glob_(programming))模式 src/[!b]*.cpp 排除了所有以 b 开头的src 文件。

但是，只有当 bar.cpp 是唯一以 b 开头的 src 文件，或者您愿意将其重命名为以唯一字符开头时，这才有效。

# c# - WCF：在设置期间或运行时修改 baseAddress

> ID：10276203
> 
> 赞同：0
> 
> 时间：2012-04-23T07:08:19.603
> 
> 标签：c#, .net, wcf, wsdl

我有托管 WCF 服务的 win 服务。Win 服务正在计算机“MyComp1”上运行。WCF 服务 App.config 如下所示：

```
 <baseAddresses>
        <add baseAddress="http://localhost:8732/MyService" />
      </baseAddresses> 
```

当我尝试从该服务导入 WSDL（例如使用 Delphi WSDLmp.exe）时，我收到类似**“无法导入[http://localhost:8732/MyService?xsd=xsd0](http://localhost:8732/MyService?xsd=xsd0) ”**之类的错误，这是正确的行为导致该服务未在本地主机上运行。但是生成的 WSDL 中 XSD 的位置包含类似 localhost 的地址。

现在我想在设置期间或运行时修改 baseAddress，因为我不希望用户手动编辑 App.config。我听说过 FlatWSDL，但还有其他技术可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:43:45.907

您可以使用[`System.Xml.XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)以编程方式更改您的`App.config`文件。

```
XmlDocument xmlDoc = new XmlDocument();

xmlDoc.Load(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);

xmlDoc.SelectNodes("/configuration/system.serviceModel/services/service/host/baseAddresses/add")
    .Cast<XmlNode>().ToList()
    .ForEach(o => o.Attributes["baseAddress"].Value = "http://localhost:8732/MyService");

xmlDoc.Save(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile); 
```

只需确保使用正确的基地址*XPath 表达式*即可。希望这可以帮助。

# cucumber - 如何覆盖 Capybara 的 reset_sessions

> ID：10276204
> 
> 赞同：1
> 
> 时间：2012-04-23T07:08:22.197
> 
> 标签：cucumber, capybara

我看到 Capybara 使用了一种叫做 Capybara.reset_sessions 的东西！在 cucumber.rb 下的库中，像这样

```
After do
 Capybara.reset_sessions!
end

Before '@javascript' do
  Capybara.current_driver = Capybara.javascript_driver
end

Before do |scenario|
  scenario.source_tag_names.each do |tag|
   driver_name = tag.sub(/^@/, '').to_sym
   if Capybara.drivers.has_key?(driver_name)
     Capybara.current_driver = driver_name
   end
  end
end

After do
 Capybara.use_default_driver
end 
```

如何覆盖这个值 Capybara.reset_sessions!..??

我不想在每次场景完成后都重置会话。有人可以建议我一种方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:42:24.343

我有一个类似的问题，在这里找到了答案：[https ://groups.google.com/forum/#!msg/ruby-capybara/vA4CH2kTVO8/XdiXEDgY2tMJ](https://groups.google.com/forum/#!msg/ruby-capybara/vA4CH2kTVO8/XdiXEDgY2tMJ)

基本上，您不需要`require 'capybara/cucumber'`，只需要 capybara/cucumber.rb 中的单个文件。

就我而言，我使用的是 rspec 而不是 cucumber，所以我省略`require 'capybara/rspec'`并需要我需要的文件。

# php - 获取 FPDF unicode 版本的页数

> ID：10276208
> 
> 赞同：1
> 
> 时间：2012-04-23T07:08:43.783
> 
> 标签：php, unicode, fpdf

我已经实现了生成带有中文字体的 PDF 的代码。有一些 PHP 库最终由 FPDF 库扩展。

MYPdf -> PDF_Unicode -> PDF_Chinese -> PDF_MC_Table -> FPDF

现在的问题是要在页脚处显示总页数。我结帐 {nb} 使用 AliasNbPages 函数。但它不起作用并显示 {nb} 常量。在一些谷歌搜索我得到链接[http://www.phpfreaks.com/blog/ufpdf-quick-and-dirty-fix-for-page-numbering](http://www.phpfreaks.com/blog/ufpdf-quick-and-dirty-fix-for-page-numbering)。但这太行不通了（可能是因为没有使用 unicode 的 updf lib。）。

有没有人遇到过这类问题并得到任何解决方案？

第三方库的链接

[PDF_MC_Table] [http://www.fpdf.de/downloads/addons/3/](http://www.fpdf.de/downloads/addons/3/)

# android - 自定义列表视图中的 dataparsing.nullpointer 异常错误

> ID：10276210
> 
> 赞同：0
> 
> 时间：2012-04-23T07:08:51.103
> 
> 标签：android, android-listview

我正在创建自定义列表视图。将数据传递给 edittext 。当时它显示一个错误

```
 i try this code
                public View getView(int position, View convertView, ViewGroup parent) {
     final ViewHolder holder;

        if (convertView == null) {
            holder = new ViewHolder();

            convertView = inflater.inflate(R.layout.editfoodmenulistview, null);
            holder.caption = (EditText) convertView
                    .findViewById(R.id.foodmenu);

            holder.caption1=(ImageView) convertView.findViewById(R.id.foodimage);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        //Fill EditText with the value you have in data source

        holder.caption.setText(itemnames[position]);
        holder.caption.setId(position);
        holder.caption.setFocusableInTouchMode(true);

        holder.caption1.setImageBitmap(bmps[position]);    

        //we need to update adapter once we finish with editing
        holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
            public void onFocusChange(View v, boolean hasFocus) {
            if(!hasFocus)
            {
                    final int position = v.getId();      
                    final EditText Caption = (EditText) v;
                    Caption.setFocusable(true);

                    holder.caption.setFocusable(true);
                    arr.remove(holder.caption.getId());
                    arr.add(holder.caption.getId(),holder.caption.getText().toString());

            }
                }

        });  

        return convertView;
    }
     }

      view holder(this is class)

 class ViewHolder {
 EditText caption;
ImageView caption1;
}

 class ListItem {
String caption;
} 
```

上面的viewholder类我用了一些其他的类来获取edittext。现在我想将相同的edittext重用到另一个类..它显示一个错误..请告诉我如何解决这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:12:24.240

改变这个：

```
convertView = inflater.inflate(R.layout.editfoodmenulistview, null); 
```

对此：

```
convertView = inflater.inflate(R.layout.editfoodmenulistview, parent, false); 
```

# facebook - 如何构建 Facebook Music Bridge 之类的东西？

> ID：10276213
> 
> 赞同：1
> 
> 时间：2012-04-23T07:08:53.880
> 
> 标签：facebook, flash

我注意到当我从 Facebook 在 Rdio 上支付歌曲时，通信完全发生在客户端。我想知道这里是否有人知道如何实现类似的东西。

我注意到 Facebook 使用`swf`文件也是一个调用，`music_bridge_play.php`这让我想知道它真的是服务器端。

# node.js - NodeJS：通过 Knox 将纯文本上传到 s3，我得到 statusCode = 505？

> ID：10276214
> 
> 赞同：5
> 
> 时间：2012-04-23T07:08:54.537
> 
> 标签：node.js, amazon-s3, coffeescript

我有以下代码，其中消息是 JSON 字符串。我正在尝试使用消息的 md5 作为目标文件名将其上传到 s3。我收到“505”状态码。我是 NodeJS 的新手，不确定我在这里做错了什么？

```
knoxInitParams =
    'key': awsKey
    'secret': awsPrivateKey
    'bucket': bucket

client = knox.createClient knoxInitParams   

buff = new Buffer message
reqHeader = 
    'Content-Length': buff.length
    'Content-Type': 'text/plain'
    'x-amz-acl': 'private'

req = client.put '/tmp/xxx.txt', reqHeader
req.on 'response', (res) ->
    console.log res.statusCode
    console.log res.headers
    if res.statusCode is 200
        console.log res.url
req.on 'error', (err) ->
    console.error "S3 Error: ", err
req.end buff 
```

编辑：将目的地更改为硬编码，因为下面的回复指出这是导致问题的原因。但是，我现在得到一个 403 :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T22:21:55.290

你的代码看起来不错。

确保您的日期/时间正确。 `ntpdate -s pool.ntp.org`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T18:54:57.753

快速说明，我也遇到了这个问题，但我的错误是我的文件名中有一个空格。

`var req = client.put('/tmp/x xx.txt', reqHeader);`

我包装了文件名，像这样

`var req = client.put(encodeURIComponent('/tmp/x xx.txt'))`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T14:18:48.487

您的错误很可能在这里：

```
req = client.put destination.toLowerCase + '.txt', reqHeader 
```

您可能想要调用`destination.toLowerCase`：

```
req = client.put destination.toLowerCase() + '.txt', reqHeader 
```

另一方面，我认为这完全没有必要——它已经是小写的了。

附带说明一下，您可能想研究单元测试——这是捕捉这些错误的好方法！如果我是你，我会添加一个函数，比如`getFileName`：

```
getFileName = (contents) ->
  crypto.createHash('md5').update(contents).digest('hex') + '.txt' 
```

现在，您可以使用 nodeunit、mocha、jasmine 或任何其他出色的测试实用程序轻松测试此功能，并确保它始终返回您期望的结果——如果不是，请帮助您立即发现错误所在。

我也可以衷心推荐 node 的调试器，它也可以帮助你捕捉这些 bug。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T23:16:20.903

当我使用我自己的 S3 帐户尝试您的确切代码时，它工作正常：

```
$ coffee test
200
{ 'x-amz-id-2': 'f5C32nQHlE0WI8jtNFEZykRFAdrM8ZdBzgeAxc23bnJ2Ti4bYKmcY3pX/KpEzyZg',
  'x-amz-request-id': 'B41AACFF85661C2E',
  date: 'Tue, 01 May 2012 23:15:39 GMT',
  etag: '"44b25eb6d36a88713b7260d8db15b24b"',
  'content-length': '0',
  server: 'AmazonS3' } 
```

按照@skrewler 的建议检查您的 ID/密钥/存储桶和日期/时间。

# c++ - 关于 STL 容器

> ID：10276215
> 
> 赞同：0
> 
> 时间：2012-04-23T07:08:55.983
> 
> 标签：c++, linux

我在 c++ STL 容器映射中遇到问题。

```
class c1 {

map<int , vector<entity>>  mapobject   //where entity is a structure

c1{

    entity er;
    er.entityId = 1;
    er.nameId = 1; 

    std::vector<entity> record;
    record.push_back(er);

    mapobject.insert(std::pair<int,std::vector<entity>>(1,record));

}
} 
```

我从上面的代码中面临的问题是，在构造函数之外，所有结构字段都包含垃圾值。类级变量映射不会深拷贝内容吗？

请帮助我

--库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:11:55.453

您需要为以下内容实现复制构造函数`entity`：

```
class entity
{
public:
    entity(const entity& other)
    {}
}; 
```

默认情况下，C++ 不会深度复制对象。您的代码中还存在一些语法错误：

```
class c1 {

map<int , vector<entity>>  mapobject;   //missing semicolon

c1 () { //missing parameter list

    entity er;
    er.entityId = 1;
    er.nameId = 1; 

    std::vector<entity> record;
    record.push_back(er);

    mapobject.insert(std::pair<int,std::vector<entity>>(1,record));

}
}; //missing semicolon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:34:35.213

如果所有语法错误都得到纠正，您显示的代码会很好。您确定数据真的是“构造函数之外”的“垃圾”吗？如果您在调试器中检查 c1 的实例但已构建发布模式构建，则它似乎包含垃圾。那只是以这种方式进行调试的产物。

# ios - 在 iOS 上，如果 drawRect 不使用传入的矩形，那么 [self setNeedsDisplayInRect:rect] 传入的矩形是否重要？

> ID：10276216
> 
> 赞同：1
> 
> 时间：2012-04-23T07:08:57.957
> 
> 标签：ios, cocoa-touch, uikit, core-graphics, quartz-graphics

也就是说，如果

```
[self setNeedsDisplayInRect:rect]; 
```

被调用了，`rect`对需要重绘的区域进行了非常仔细的计算，但是如果我们的`drawRect`代码不关心`rect`，反正什么都画出来，iOS系统还能以某种方式提高绘制速度吗？（或者可能改进很少？）这个问题可能需要非常熟悉 UIKit/CoreGraphics 的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:35:23.410

有几种方法可以得到肯定的答案：

1.  您可以剪辑到矩形，在这种情况下，即使您在其中绘制，也不会绘制矩形之外的任何内容。在矩形外绘图不是免费的，但会更便宜。iOS 无法为您执行此操作，因为您可能会故意忽略 rect，或者使用 rect 但还会无条件地在您的边界内的其他地方绘制其他内容。（尽管其他事情可能应该是另一种观点。）
2.  即使您的*当前* `drawRect:`不使用矩形，您也可以稍后返回该代码来优化它。正如您可能知道的那样，一种非常好的方法（如果可能的话）是使用矩形来决定您绘制的内容。即使您现在不这样做，将来也可能会这样做，并且现在指定更改的矩形意味着那时要更改的内容要少得多。
3.  #3 的一个推论是，即使您现在绘制的内容*无法*如此优化，您可能会决定在未来的主要版本中将视图绘制的内容完全更改为可以绘制的内容。同样，现在指定更改的矩形意味着将来要做的事情要少得多。
4.  子视图。如果您的视图实际上并未绘制用户在其中看到的某些内容，而是将这些内容委托（不是 Cocoa/Cocoa Touch 意义上的）子视图，那么您可能会重写`setNeedsDisplayInRect:`以将消息发送到`setNeedsDisplay:`子视图——并且*只有*框架与矩形相交的子视图——在调用`super`. （并且 UIView 的实现可能已经这样做了。你应该测试它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:34:27.473

如果您的`drawRect:`实现忽略传入的矩形并绘制整个视图，则传递给的矩形的任何优化`setNeedsDisplayInRect:`都是徒劳的。

“需求显示”矩形直接通过；它唯一的用途是`drawRect:`实现用于忽略不必要的绘图。一旦你的`drawRect:`实现被输入，系统就无法判断你在传递的矩形之外的绘制是否是故意的，所以所有的绘制都真的发生了（包括性能影响）。

根据您正在绘制的内容和方式，将您的`drawRect:`实现限制为至少使用传入的矩形并不难。您要绘制的所有内容都有一个边界矩形，无论是文本块还是贝塞尔路径或图像或只是一个矩形，你正在填充一些颜色。用测试围绕每一位绘图`CGRectIntersectsRect()`- 您不会以这种方式将绘图完全限制为传入的矩形，但您至少会消除需要绘制的任何不触及该矩形的东西。

# iphone - CFStream SSL 错误 -9800

> ID：10276217
> 
> 赞同：1
> 
> 时间：2012-04-23T07:09:01.290
> 
> 标签：iphone, objective-c, ios, ssl, cfstream

我的 iOS 应用程序包含 2 个版本：服务器和客户端。服务器通过 Bonjour 发布服务并等待客户端。客户端搜索该服务并连接到服务器。之后，所有通信都通过 CFSockets 实现。
这是我为此类通信设置流的代码：

```
- (BOOL)setupSocketStreams {
if ( readStream == nil || writeStream == nil ) {
    return NO;
}
incomingDataBuffer = [[NSMutableData alloc] init];
outgoingDataBuffer = [[NSMutableData alloc] init];

// Turning SSL on
NSDictionary *sslSettings = [NSDictionary dictionaryWithObjectsAndKeys:(id)kCFBooleanFalse, (id)kCFStreamSSLValidatesCertificateChain, nil];
CFReadStreamSetProperty(readStream, kCFStreamPropertySocketSecurityLevel, kCFStreamSocketSecurityLevelNegotiatedSSL);
CFReadStreamSetProperty(readStream, kCFStreamPropertySSLSettings, sslSettings);
CFWriteStreamSetProperty(writeStream, kCFStreamPropertySocketSecurityLevel, kCFStreamSocketSecurityLevelNegotiatedSSL);
CFWriteStreamSetProperty(writeStream, kCFStreamPropertySSLSettings, sslSettings);

CFReadStreamSetProperty(
        readStream,
        kCFStreamPropertyShouldCloseNativeSocket,
        kCFBooleanTrue
);
CFWriteStreamSetProperty(
        writeStream,
        kCFStreamPropertyShouldCloseNativeSocket,
        kCFBooleanTrue
);

CFOptionFlags registeredEvents =
        kCFStreamEventOpenCompleted     |
                kCFStreamEventHasBytesAvailable |
                kCFStreamEventCanAcceptBytes    |
                kCFStreamEventEndEncountered    |
                kCFStreamEventErrorOccurred
;

CFStreamClientContext ctx = {
        0,      // version
        self,   // info
        NULL,   // retain callback
        NULL,   // release callback
        NULL    // copyDescription callback
};

CFReadStreamSetClient(
        readStream,
        registeredEvents,
        readStreamEventHandler,
        &ctx
);
CFWriteStreamSetClient(
        writeStream,
        registeredEvents,
        writeStreamEventHandler,
        &ctx
);

CFReadStreamScheduleWithRunLoop(
        readStream,
        CFRunLoopGetCurrent(),
        kCFRunLoopCommonModes
);
CFWriteStreamScheduleWithRunLoop(
        writeStream,
        CFRunLoopGetCurrent(),
        kCFRunLoopCommonModes
);

if ( ! CFReadStreamOpen(readStream) || ! CFWriteStreamOpen(writeStream)) {
    [self close];
    return NO;
}

if ([self.delegate respondsToSelector:@selector(establishedConnection:)]) {
    [self.delegate establishedConnection:self];
}

return YES;
} 
```

如果没有在此代码上打开 SSL 的部分工作正常，但否则我会收到错误消息：

```
Error:
The operation couldn’t be completed. (OSStatus error -9800.) 
```

会是什么问题？
谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T05:33:29.853

iOS 5 中的 TLS1.2 支持存在一个已知问题：[https ://developer.apple.com/library/ios/#technotes/tn2287/_index.html#//apple_ref/doc/uid/DTS40011309](https://developer.apple.com/library/ios/#technotes/tn2287/_index.html#//apple_ref/doc/uid/DTS40011309)

通过将 kCFStreamSSLLevel 设置为 @"kCFStreamSocketSecurityLevelTLSv1_0SSLv3" 我能够在我的应用程序中修复 -9800 问题。

# image - 如何使用本地文件系统预览一张大图,和画布

> ID：10276224
> 
> 赞同：4
> 
> 时间：2012-04-23T07:09:47.917
> 
> 标签：image, html, input, base64, filereader

我正在尝试在手机中制作一个上传图片的网页，但是一旦图片太大，它总是会耗尽内存并且浏览器会退出。这是我的代码：

```
<input type="file" id="testFile" />
<img src="" style="position:relative;" id="uploadingImg" />

function setImage() {
    var fileList   = this.files;
    var imageType  = /image/;
    for(var i = 0;i < fileList.length;i++) {
        document.getElementById('uploadingImg').file = fileList[i];
        var reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('uploadingImg').src = e.target.result;
        }
        reader.readAsDataURL(fileList[i]);
    }
}

document.getElementById('testFile').addEventListener('change', setImage, false); 
```

有谁知道如何使用`<img>`or`<canvas>`元素预览一张图片？请不要使用`"readAsDataURL"`，因为`document.getElementById('uploadingImg').src = e.target.result;` 它会耗尽内存。因为base64 Url占用内存太大，内存中存在很多三四份。

如何通过canvas使用`"readAsArrayBuffer"`和使用？`"drawImage"`还是其他方法？

如果我可以在本地磁盘中预览一张图片而不使用`"readAsDataUrl"`.

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:41:59.760

In most browsers you don't need to use `FileReader` (and consequently `readAsDataUrl`) for this. Instead, you can use the File API's `createObjectURL` method. Here's your `setImage()` function rewritten:

```
function setImage() {
    var file = this.files[0];
    var URL = window.URL || window.webkitURL;
    if (URL.createObjectURL && (file.type == "image/jpeg" || file.type == "image/png" || file.type == "image/gif")) {
        document.getElementById('uploadingImg').src = URL.createObjectURL(file);
    } else {
        alert('Unable to show preview');
    }
} 
```

Browser support is still a bit patchy, though, so check support tables such as caniuse.com before deciding whether to use it: [http://caniuse.com/#search=createobjectURL](http://caniuse.com/#search=createobjectURL)

# c++ - 如何在 Windows 系统托盘提示符中显示 & 符号？

> ID：10276225
> 
> 赞同：2
> 
> 时间：2012-04-23T07:09:48.123
> 
> 标签：c++, winapi, prompt, system-tray

我正在使用 C++ 和 WinAPI 进行编程。我使用 Shell_NotifyIcon(NIM_ADD, ...) API 添加了一个系统托盘图标。该图标还有一个相关的用户提示，其中包含一个 & 符号，例如“查看和复制”。但是当提示弹出时用户看到的是“查看副本”。我尝试将 & 号加倍，例如“查看 && 复制”，但这并没有帮助。

有谁知道如何在 Windows 托盘提示符中显示 & 符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T07:13:48.763

这不是转义 & 符号的问题 - Windows*设计*会[从工具提示文本中删除任何 & 符号](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760250%28v=vs.85%29.aspx)，这通常是有充分理由的：

> 许多应用程序创建包含与菜单命令相对应的工具的工具栏。对于此类工具，工具提示控件可以方便地显示与相应菜单项相同的文本。除非控件具有 TTS_NOPREFIX 样式，否则系统会自动从传递给工具提示控件的所有字符串中去除与符号 (&) 加速字符，并在第一个制表符 (\t) 处终止字符串。

如您所见，答案非常简单：您只需添加`TTS_NOPREFIX`到工具提示类中即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T11:10:34.673

显然，与号需要双重转义，就像这样`&&&`。

我不知道为什么，但它似乎工作。

我的来源：[这个链接](http://www.developmentnow.com/g/30_2004_12_0_0_27845/Special-Characters-in-ToolTip.htm)。

# c# - TimeSpan 到 DateTime 的转换

> ID：10276228
> 
> 赞同：80
> 
> 时间：2012-04-23T07:10:13.147
> 
> 标签：c#, datetime, timespan

我想将时间跨度转换为日期时间。我怎样才能做到这一点？

我在谷歌上找到了一种方法：

```
DateTime dt;
TimeSpan ts="XXX";

//We can covnert 'ts' to 'dt' like this:

dt= Convert.ToDateTime(ts.ToString()); 
```

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-04-23T07:17:32.857

将 TimeSpan 转换为 DateTime 不是很合乎逻辑。试着理解 leppie 上面所说的。TimeSpan 是一个持续时间，比如 6 天 5 小时 40 分钟。这不是一个日期。如果我说 6 天；你能从中推断出一个日期吗？除非您有参考日期，否则答案是否定的。

因此，如果要将 TimeSpan 转换为 DateTime，则需要一个参考日期。6天5小时从什么时候开始？所以你可以这样写：

```
 DateTime dt = new DateTime(2012, 01, 01);
 TimeSpan ts = new TimeSpan(1, 0, 0, 0, 0);
 dt = dt + ts; 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-06T02:05:50.800

虽然选择的答案是严格正确的，但我相信我理解 OP 试图在这里得到什么，因为我遇到了类似的问题。

我有一个 TimeSpan，我希望在网格控件中显示（就像 hh:mm），但网格似乎不理解 TimeSpan，只有 DateTime 。OP 有一个类似的场景，其中只有 TimeSpan 是相关部分，但没有考虑添加 DateTime 参考点的必要性。

因此，如上所述，我只是添加了 DateTime.MinValue（尽管任何日期都可以），当它将时间跨度呈现为结果日期的时间部分时，网格随后会忽略它。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-10-23T11:58:55.077

可以将 TimeSpan 添加到新的 DateTime 以实现此目的。

```
TimeSpan ts="XXX";
DateTime dt = new DateTime() + ts; 
```

但如前所述，没有有效的开始日期是不符合逻辑的。我遇到了一个只需要时间方面的用例。只要逻辑正确就可以正常工作。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-23T07:26:12.730

您需要一个参考日期才能有用。

[来自http://msdn.microsoft.com/en-us/library/system.datetime.add.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.add.aspx)的示例

```
// Calculate what day of the week is 36 days from this instant.  
System.DateTime today = System.DateTime.Now;  
System.TimeSpan duration = new System.TimeSpan(36, 0, 0, 0);  
System.DateTime answer = today.Add(duration);  
System.Console.WriteLine("{0:dddd}", answer); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-11-13T05:27:48.157

为我工作。

```
var StartTime = new DateTime(item.StartTime.Ticks); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-24T14:48:31.933

如果您只需要在数据网格或类似标签中显示时间值，最好的方法是直接将时间转换为日期时间数据类型。

SELECT CONVERT(datetime,myTimeField) as myTimeField FROM Table1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-24T04:57:50.887

您还可以使用 DateTime.FromFileTime(finishTime) 其中 finishTme 是一个包含时间刻度的长整数。或 FromFileTimeUtc。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-02-04T21:16:51.343

一个简单的方法，使用刻度：

```
new DateTime((DateTime.Now - DateTime.Now.AddHours(-1.55)).Ticks).ToString("HH:mm:ss:fff") 
```

这个功能会给你一个日期（没有日/月/年）

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-06-09T18:01:48.210

以上所有问题的一个问题是转换返回的天数不正确，如 TimeSpan 中指定的那样。
使用上面的，下面返回 3 而不是 2。

关于如何在 TimeSpan 参数中保留 2 天并将它们作为 DateTime 天返回的想法？

```
public void should_return_totaldays()
{
    _ts = new TimeSpan(2, 1, 30, 10);
    var format = "dd";
    var returnedVal = _ts.ToString(format);
    Assert.That(returnedVal, Is.EqualTo("2")); //returns 3 not 2
} 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2014-07-17T23:06:19.743

首先，将时间跨度转换为字符串，然后转换为 DateTime，然后再转换回字符串：

```
Convert.ToDateTime(timespan.SelectedTime.ToString()).ToShortTimeString(); 
```

# mysql - 在 mySQL 中格式化十进制？

> ID：10276231
> 
> 赞同：0
> 
> 时间：2012-04-23T07:10:26.497
> 
> 标签：mysql, decimal

我有以下格式的数字 12.25564 mysql 中字段的格式是 DECIMAL(12,5)。我想从这个表中导出文件，这个十进制数的格式是 12.26。如何在 SELECT 中使用 MySQL 格式化这个数字？提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:12:34.737

您可以使用 MySql Round 方法：

选择回合（12.25564, 2）

# android - 我想更改android设备的MAC地址？

> ID：10276232
> 
> 赞同：-2
> 
> 时间：2012-04-23T07:10:29.377
> 
> 标签：android

我正在使用 wifi 接口获取设备的 MAC 地址：

```
WifiManager wifiMan = (WifiManager) this.getSystemService(
                Context.WIFI_SERVICE);
WifiInfo wifiInf = wifiMan.getConnectionInfo();
String macAddr = wifiInf.getMacAddress(); 
```

有没有办法在没有wifi接口的情况下检索mac地址？

也确认一下我们可以更改android设备的MAC地址吗？

请确认我的android框架是否支持这些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:35:43.843

MAC 地址唯一标识网络适配器（例如 WiFi 或蓝牙），因此您必须访问该适配器以检索它的 MAC 地址。要获取蓝牙适配器的 MAC 地址，您可以使用：

```
BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();
if (btAdapter != null) {
    String mac = btAdapter.getAddress();
} 
```

请注意，此代码需要`android.permission.BLUETOOTH`权限，而您获取 WiFi 适配器 MAC 的代码需要`android.permission.ACCESS_WIFI_STATE`权限。此外，当适配器关闭时，这两个代码可能都不起作用。

有[这篇](https://stackoverflow.com/q/5287790/741249)关于 MAC 欺骗（返回虚假 MAC 地址）的帖子，但欺骗只能在有根手机上进行。如果你用谷歌搜索，你可能会找到更多关于 MAC 欺骗的信息。

# java - Derby 是否支持 INSERT IGNORE 或 ON DUPLICATE KEY 语句？

> ID：10276234
> 
> 赞同：1
> 
> 时间：2012-04-23T07:10:45.813
> 
> 标签：java, database, derby

有谁知道 Derby 是否支持 INSERT IGNORE 或 ON DUPLICATE KEY 语句？如果是，请提供描述如何使用它的链接。非常感谢。

# iphone - ios sdk 中的付款选项，无需应用内购买和 PayPal

> ID：10276235
> 
> 赞同：1
> 
> 时间：2012-04-23T07:10:48.420
> 
> 标签：iphone, objective-c, ios, xcode

我的新 iPhone 应用程序有一个要求，我必须像 paisapay (Ebay) 那样付款。我可以打开一个网页，用户可以在其中填写与付款相关的信息，然后服务器将处理付款吗？此交易将以安全方式（以标准方式）进行。是否可以？苹果会批准应用程序吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T07:57:35.117

如果您使用这种方式在付款后解锁应用程序中的功能，它将被拒绝，否则没关系。

根据应用审查指南

> 11.1 使用 App Store 以外的机制解锁或启用附加特性或功能的应用程序将被拒绝
> 
> 11.2 应用程序使用除应用内购买 API (IAP) 之外的系统来购买应用程序中的内容、功能或服务将被拒绝
> 
> 11.13 链接到外部购买或订阅机制的应用程序将被拒绝，例如“购买”按钮进入网站购买电子书

如需更多参考，请阅读[https://developer.apple.com/app-store/review/guidelines/上最新的 App Store 审核指南](https://developer.apple.com/app-store/review/guidelines/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T07:48:22.630

也许这可能会帮助你

[http://www.zooz.com/](http://www.zooz.com/)

仅供参考：根据 Apple 的 App Store 指南，ZooZ 可以不受限制地用于购买实体商品或在应用程序之外使用的商品和服务。

# iphone - 将相机模式设置为黑白

> ID：10276238
> 
> 赞同：0
> 
> 时间：2012-04-23T07:10:55.783
> 
> 标签：iphone, ios, avfoundation

如何将相机变成黑白模式。这样我就可以拍摄黑白视频。

注意：不使用 OpenGL。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:15:02.623

也许 [GPUImage](https://github.com/BradLarson/GPUImage)可以帮助：

> GPUImage 框架是一个 BSD 许可的 iOS 库，可让您将 GPU 加速的滤镜和其他效果应用于图像、实时摄像机视频和电影。与 Core Image（iOS 5.0 的一部分）相比，GPUImage 允许您编写自己的自定义过滤器，支持部署到 iOS 4.0，并具有更简单的界面。但是，它目前缺少 Core Image 的一些更高级的功能，例如面部检测。
> 
> GPUImageGrayscaleFilter：将图像转换为灰度（饱和度过滤器的实现稍快，没有改变颜色贡献的能力）

# google-maps - 谷歌地图 api 直播现场听众

> ID：10276241
> 
> 赞同：0
> 
> 时间：2012-04-23T07:11:09.137
> 
> 标签：google-maps, shoutcast

希望为现场直播听众添加一个带有红点的简单全球世界地图，有人可以帮忙吗，因为除了我有我的 api 密钥之外，我不知道从哪里开始。

我也有自己的 VPS 服务器，但不确定这是否重要，因为我在那里运行我的直播并一直在阅读[https://developers.google.com/maps/documentation/javascript/tutorial#api_key](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)但无法让它工作？

我收到此错误消息：

> Google Maps APS 服务器拒绝了您的请求，请求中指定的“sensor£ 参数必须设置为 true 或 false

编码：

```
<!DOCTYPE html><html>  <head>    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />    <style type="text/css">      html { height: 100% }      body { height: 100%; margin: 0; padding: 0 }      #map_canvas { height: 100% }    </style>    <script type="text/javascript"      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDcdTcPLIl1aQEO4SO0RQkJE-X-UacZkXY&sensor=TRUE">    </script>    <script type="text/javascript">      function initialize() {        var myOptions = {          center: new google.maps.LatLng(-34.397, 150.644),          zoom: 8,          mapTypeId: google.maps.MapTypeId.ROADMAP        };        var map = new google.maps.Map(document.getElementById("map_canvas"),            myOptions);      }    </script>  
<title>Test Google Maps</title>
</head>  
<body onload="initialize()">    <div id="map_canvas" style="width:100%; height:100%"></div>  
</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:02:59.983

将 TRUE 更改为 true 即可

# php - 使用 X-Sendfile 下载文件的文件名

> ID：10276248
> 
> 赞同：1
> 
> 时间：2012-04-23T07:11:33.140
> 
> 标签：php, apache2, x-sendfile

我使用 X-Sendfile 发送文件而不是 readfile。处理这个的脚本名为 download.php 并包含以下内容：

```
$video_file = '/path/to/file/file.mp4';
header('X-Sendfile: '.$video_file);
header('Content-Type: video/mp4');
header('Content-Disposition: attachment; file=\"file.mp4\"');
exit(); 
```

但问题是下载的文件总是命名为“download.php”（155Mb），我想下载它命名为file.mp4。我尝试了几件事，例如：

```
header('Content-Disposition: attachment; file="file.mp4"');
header('Content-Disposition: attachment; file=file.mp4'); 
```

以及所有其他可能性，但仍将文件下载为 download.php。

我的 htaccess 文件包含： XSendFile On

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:02:18.810

您发送的标头不正确。文件名属性被称为`filename`，而不是`name`：

```
header('Content-Disposition: attachment; filename="file.mp4"'); 
```

有关标头的详细说明，请参阅[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)。

# android - 关于在 ListView 上显示的高效查询

> ID：10276250
> 
> 赞同：1
> 
> 时间：2012-04-23T07:11:34.863
> 
> 标签：android, sql, sqlite, listview

我是 SQL 的初学者。我想在 Android listview 上显示 sqlite 数据。该表具有以下结构。

```
| _id | name | data | ...
---------------------
|   0 |   A  |  abc |
|   1 |   B  |  def |
|   2 |   C  |  ghi | ...
|   3 |   D  |  jkl |
|   4 |   E  |  mno | 
```

因此，当用户输入 [C, B, D] 时，我想按**用户的顺序**显示名称和数据列。例如，

列表显示

```
---------------------
     C     ghi
---------------------
     B     def
---------------------
     D     jkl
--------------------- 
```

我现在在使用 ArrayAdapter 和 CursorAdapter 之间纠结。

我应该 SELECT 3 次，将值存储在数组中，然后使用 ArrayAdapter？或者，可以用 SELECT 一次满足我的要求吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:40:37.377

这会有点复杂，但可以在单个查询中完成。

```
SELECT * FROM yourTable
ORDER BY 
  CASE name
    WHEN 'C' THEN 0
    WHEN 'B' THEN 1
    WHEN 'D' THEN 2
  END 
```

当然，您必须根据用户输入来构造查询。 [在这里看更多](https://stackoverflow.com/questions/3303851/sqlite-and-custom-order-by)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:16:21.570

您可以使用 SELECT 查询来满足您的需求。您的查询将如下所示：

```
String query = "SELECT * FROM yourTable WHERE name IN ('C', 'B', 'D');" 
```

# android - 如何在 Android 中使用翻译动画为视图设置动画

> ID：10276251
> 
> 赞同：44
> 
> 时间：2012-04-23T07:11:36.817
> 
> 标签：android, android-animation

我的应用程序中有一个 ImageView，它可以位于屏幕上的任何位置

触摸时，我想将此视图移动到屏幕的中心。我使用翻译动画及其 RELATIVE_TO_PARENT 功能尝试了此功能，如下所示

```
TranslateAnimation translateAnimation1 = new TranslateAnimation(
      TranslateAnimation.RELATIVE_TO_PARENT,0.0f,
      TranslateAnimation.RELATIVE_TO_PARENT,0.5f,
      TranslateAnimation.RELATIVE_TO_PARENT,0.0f,
      TranslateAnimation.RELATIVE_TO_PARENT,0.5f); 
```

但 ImageView 从当前位置向下移动 50%（屏幕的）。

有没有办法将此视图移动到屏幕的中心，而不管其当前位置如何？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-10T21:07:24.617

为了将视图移动到屏幕上的任何位置，我建议将其放置在全屏布局中。通过这样做，您不必担心剪裁或相对坐标。

你可以试试这个示例代码：

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:id="@+id/rootLayout">

    <Button
        android:id="@+id/btn1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="MOVE" android:layout_centerHorizontal="true"/>

    <ImageView
        android:id="@+id/img1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" android:layout_marginLeft="10dip"/>
    <ImageView
        android:id="@+id/img2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" android:layout_centerVertical="true" android:layout_alignParentRight="true"/>
    <ImageView
        android:id="@+id/img3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" android:layout_marginLeft="60dip" android:layout_alignParentBottom="true" android:layout_marginBottom="100dip"/>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" android:clipChildren="false" android:clipToPadding="false">

        <ImageView
            android:id="@+id/img4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" android:layout_marginLeft="60dip" android:layout_marginTop="150dip"/>
    </LinearLayout>

</RelativeLayout> 
```

**你的活动**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ((Button) findViewById( R.id.btn1 )).setOnClickListener( new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            ImageView img = (ImageView) findViewById( R.id.img1 );              
            moveViewToScreenCenter( img );
            img = (ImageView) findViewById( R.id.img2 );
            moveViewToScreenCenter( img );
            img = (ImageView) findViewById( R.id.img3 );                
            moveViewToScreenCenter( img );
            img = (ImageView) findViewById( R.id.img4 );
            moveViewToScreenCenter( img );
        }
    });
}

private void moveViewToScreenCenter( View view )
{
    RelativeLayout root = (RelativeLayout) findViewById( R.id.rootLayout );
    DisplayMetrics dm = new DisplayMetrics();
    this.getWindowManager().getDefaultDisplay().getMetrics( dm );
    int statusBarOffset = dm.heightPixels - root.getMeasuredHeight();

    int originalPos[] = new int[2];
    view.getLocationOnScreen( originalPos );

    int xDest = dm.widthPixels/2;
    xDest -= (view.getMeasuredWidth()/2);
    int yDest = dm.heightPixels/2 - (view.getMeasuredHeight()/2) - statusBarOffset;

    TranslateAnimation anim = new TranslateAnimation( 0, xDest - originalPos[0] , 0, yDest - originalPos[1] );
    anim.setDuration(1000);
    anim.setFillAfter( true );
    view.startAnimation(anim);
} 
```

该方法`moveViewToScreenCenter`获取 View 的绝对坐标并计算从当前位置移动到屏幕中心的距离。该`statusBarOffset`变量测量状态栏高度。

我希望你能继续这个例子。请记住，在动画之后，您的视图位置仍然是初始位置。如果你一次又一次地点击 MOVE 按钮，同样的动作会重复。如果要更改视图的位置，请在动画完成后进行。

# android - 以编程方式添加的联系人在 Android 中不可见

> ID：10276252
> 
> 赞同：0
> 
> 时间：2012-04-23T07:11:40.417
> 
> 标签：android, android-contacts

> **可能重复：**
> [如何以编程方式添加联系人？](https://stackoverflow.com/questions/3726282/how-can-i-programmatically-add-a-contact)

在 Google 搜索的帮助下，我能够在我的 Android 应用程序中添加联系人。虽然这可行，但我无法在电话联系人列表（电话簿）中看到添加的联系人。

你能帮我解决这个问题吗？我不知道在哪里看，这可能是版本控制问题吗？如果遇到此问题的任何人愿意帮助我，我将不胜感激。

我在设置我的代码时遵循[了这个例子。](http://saigeethamn.blogspot.in/2011/05/contacts-api-20-and-above-android.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:31:01.020

使用以下方法将新联系人插入电话簿：

```
public void insert(String lastName, String firstName, String phoneNumber, String photo_uri)
{
    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

    Builder builder = ContentProviderOperation.newInsert(RawContacts.CONTENT_URI);
    builder.withValue(RawContacts.ACCOUNT_TYPE, null);
    builder.withValue(RawContacts.ACCOUNT_NAME, null);
    ops.add(builder.build());

    // Name
    builder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);
    builder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);
    builder.withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE);
    builder.withValue(ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME, lastName);
    builder.withValue(ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME, firstName);
    ops.add(builder.build());

    // Number
    builder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);
    builder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);
    builder.withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
    builder.withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, phoneNumber);
    builder.withValue(ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_HOME);
    ops.add(builder.build());

    // Picture
    try
    {
        Bitmap mBitmap = Media.getBitmap(context.getContentResolver(), Uri.parse(photo_uri));

        ByteArrayOutputStream image = new ByteArrayOutputStream();
        mBitmap.compress(Bitmap.CompressFormat.JPEG , 100, image);

        builder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);
        builder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);
        builder.withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE);
        builder.withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, image.toByteArray());
        ops.add(builder.build());
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    // Add the new contact
    ContentProviderResult[] res;
    try
    {
        res = KramerApplication.getInstance().getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
        if (res != null && res[0] != null)
        {
            String uri = res[0].uri.getPath().substring(14);
            return new Integer(uri).intValue(); // Book ID
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

用法：

`int book_id = insert("Doe", "John", "111-222-333", "content://com.my.package/drawable/photo");`

`book_id`是您的条目的行 ID。

# javascript - 动态应用 Jqgrid 所需属性

> ID：10276253
> 
> 赞同：4
> 
> 时间：2012-04-23T07:11:42.433
> 
> 标签：javascript, jquery, jquery-ui, jqgrid, jqgrid-asp.net

在 Jqgrid 中，您将必需的属性应用于任何给定的字段，如下所示

```
 { name: 'Comments', index: 'Comments', editable: true, editrules: { required: true }, edittype: 'textarea' } 
```

我将如何动态地执行此操作？我想根据另一个字段（如下拉/组合框的选定值）创建一个必填字段

我知道在哪里放置代码，例如，我的下拉列表的选择事件。但不是如何以除我提供的代码示例之外的任何其他方式应用所需属性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T07:57:52.630

我建议你使用一些事件来监控 select 控件的变化，并改变[editrules](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editrules)`required`选项的值。

例如，[在演示中，我在“](http://www.ok-soft-gmbh.com/jqGrid/DynamicRequired.htm) [ship_via](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editrules) ”列的选择控件上使用了“focusout”事件来更改“note”列的编辑规则`required`选项。[我使用了“focusout”事件，因为代码使用了我在此处](https://stackoverflow.com/a/10275708/315935)建议的错误修复。您可以选择使用其他事件，但您应该在不同的浏览器中进行测试。

我在演示中使用的代码是

```
{name: 'ship_via', index: 'ship_via', width: 105, align: 'center', editable: true,
    formatter: 'select', edittype: 'select', editoptions: {
        value: 'FE:FedEx;TN:TNT;IN:Intim',
        defaultValue: 'IN',
        dataEvents: [
            {
                type: 'focusout',
                fn: function (e) {
                    $grid.jqGrid('setColProp', 'note', {
                        editrules: {required: ($(e.target).val() !== "IN")}
                    });
                }
            }
        ]
    },
    stype: 'select', searchoptions: {
        sopt: ['eq', 'ne'],
        value: ':Any;FE:FedEx;TN:TNT;IN:IN'
    } },
{ name: 'note', index: 'note', width: 60, sortable: false, editable: true,
    edittype: 'textarea' } 
```

# asp.net - 如何在另一个使用控件中读取一个用户控件标签文本？

> ID：10276256
> 
> 赞同：1
> 
> 时间：2012-04-23T07:11:54.390
> 
> 标签：asp.net, vb.net, webforms

我在我的 Web 应用程序中使用了两个用户控件。我想通过另一个用户控件从用户控件中读取标签文本。我该如何阅读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:41:15.250

您应该重构您的代码，而不是依赖另一个 UI 控件上的某些标签的内容。以与在该用户控件中相同的方式获取该值，或在另一个类中提取该功能以避免代码重复，并从两个位置调用它。

但是，如果您不想坚持使用此现有代码，您应该创建接口并捕获您不会从外部代码调用的所有 UserControls 功能（在您的情况下：返回标签文本）。然后在必须从外部调用的用户控件中实现该接口，之后就是查找控件实例，您可以通过枚举所有 Page 子控件来做到这一点。这是一个简单接口的示例代码，它定义了控件必须返回一些标签文本，以及一个在控件树中按名称查找用户控件的类：

```
 public interface IUserControl
  {
    string LabelText();
  }

  public class PageUserControls
  {
    private Page parentPage;

    public PageUserControls(Page myParentPage)
    {
      this.parentPage = myParentPage;
    }

    private IEnumerable<Control> EnumerateControlsRecursive(Control parent)
    {
      foreach (Control child in parent.Controls)
      {
        yield return child;
        foreach (Control descendant in EnumerateControlsRecursive(child))
          yield return descendant;
      }
    }

    public IUserControl GetControl(string controlName)
    {
      foreach (Control cnt in EnumerateControlsRecursive(this.parentPage))
      {
        if (cnt is IUserControl && (cnt as UserControl).AppRelativeVirtualPath.Contains(controlName))
          return cnt as IUserControl;
      }
      return null;      
    }
  } 
```

那么您必须在包含该标签的用户控件中实现该接口：

```
 public partial class WebUserControl1 : System.Web.UI.UserControl, IUserControl
  {
    public string LabelText()
    {
      return Label1.Text;
    }
  } 
```

最后从另一个用户控件中使用它：

```
 PageUserControls puc = new PageUserControls(this.Page);
  string txt1 = puc.GetControl("WebUserControl1.ascx").LabelText(); 
```

顺便提一句。方法 EnumerateControlsRecursive 是从 SO answer to [Find all controls in an ASP.NET Panel? 中采用的？](https://stackoverflow.com/questions/277646/finding-all-controls-in-an-asp-net-panel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:21:58.503

看看MSDN 上的[这篇文章](http://msdn.microsoft.com/en-us/library/59964ef8-72ef-4159-9f1a-5b230ff46fb3%28v=vs.100%29)。

简而言之，如果您知道 ID，则可以访问其他控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:27:02.577

像这样使用...

在用户控件中创建一个公共属性，并使用您想要该值的用户控件名称调用该属性....

# javascript - 蟒蛇的和谐？

> ID：10276263
> 
> 赞同：1
> 
> 时间：2012-04-23T07:12:15.223
> 
> 标签：javascript, python, dom

有没有像[Harmony](https://github.com/mynyml/harmony) for Python 这样的 Javascript 和 DOM 环境？

我想在获取/生成的 HTML 的 DOM 元素上执行 Javascript。我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:55:30.783

鉴于 Harmony 使用 Johnson（它是 Spidermonkey 的 Ruby 接口）和 envjs（纯 JavaScript 浏览器环境），您可能可以使用 pyv8 (http://code.google.com/p/pyv8/) 来实现相同的目的影响。

# editor - GXT 3.x 自定义 PropertyEditor / ValueBaseInputCell

> ID：10276265
> 
> 赞同：0
> 
> 时间：2012-04-23T07:12:23.977
> 
> 标签：editor, gxt, propertyeditor

我正在尝试编写一个**自定义字段编辑器**，它将在**Long**和**String**之间进行转换。IE：屏幕上的字符串表示，但字段类型是 Long。

我已经实现了 PropertyEditor ( [HrMinPropertyEditor](http://subversion.assembla.com/svn/freshcode_public/learn/gwt/src/main/java/biz/freshcode/learn/gwt/client/experiment/forms/HrMinPropertyEditor.java) )，但不知道如何连接它。我的[HrMinField](http://subversion.assembla.com/svn/freshcode_public/learn/gwt/src/main/java/biz/freshcode/learn/gwt/client/experiment/forms/HrMinField.java)非常笨重，因为我需要使用 TriggerFieldCell，因为 TextInputCell 等中的泛型类型阻止了我使用它们。

**我需要做一个 ValueBaseInputCell 的子类吗？**这似乎很奇怪，因为我的 PropertyEditor 具有所有 Long / String 转换。看起来也很困难。

如果是这样，是否有一个**简单的示例或我可以阅读的一些文档**？

顺便说一句，我的学习项目是基于 Maven 的，必要时应该很容易启动：

1.  svn结帐[http://subversion.assembla.com/svn/freshcode_public/learn/gwt/learn-gwt](http://subversion.assembla.com/svn/freshcode_public/learn/gwt/)
2.  cd learn-gwt
3.  mvn gwt:运行
4.  导航到**GXT | 表格 | 时间编辑**

提前致谢，

皮特

PS：我也在[煎茶论坛](http://www.sencha.com/forum/showthread.php?196775)上问过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:41:52.833

您应该使用**Field类中的方法****setPropertyEditor**来指定您的自定义属性编辑器：

 **```
HrMinField f = new HrMinField();
f.setPropertyEditor( new HrMinPropertyEditor() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T02:11:00.383

我设法使用转换器和验证器提出了一个解决方案。

更完整的[答案](http://www.sencha.com/forum/showthread.php?196775-Custom-PropertyEditor-ValueBaseInputCell#post786832)在[Sencha 线程](http://www.sencha.com/forum/showthread.php?196775)上。**

# c - C - 指向函数的指针数组，指向返回字符串的函数

> ID：10276270
> 
> 赞同：-1
> 
> 时间：2012-04-23T07:12:43.727
> 
> 标签：c, pointers

我最近在 C 中发现了函数指针，我正试图让它正常工作，但我只是在这上面扯头发！！！

我有一个指向返回字符串的函数的指针：

```
(char *) (*)() (*bar)(). 
```

但是我想要一个包含 6 个指针的数组来运行它，但我无法让它工作。

我不断收到编译器错误，可能带有括号的东西真的很乱。我已经尝试过这样的事情但不起作用：

```
(((char)(*))((*))(((*)((foo))))([(6)])); 
```

我需要帮助来做这个数组我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:19:16.377

这是您如何定义指向返回字符串的函数的指针：

```
(char *) (*myFuncPtr)() = myFunc 
```

大批 ：

```
(char *) (*myFuncPtr[6])();

myFuncPtr[0] = myFunc 
```

ETC...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:20:52.447

按照[giorashc 的回答](https://stackoverflow.com/a/10276347/1139697)或使用简单的`typedef`：

```
#include <stdio.h>

typedef const char * (*szFunction)();

const char * hello(){ return "Hello";}
const char * world(){ return "world";}
const char * test(){ return "test";}
const char * demo(){ return "demo";}
const char * newline(){ return "\n";}
const char * smiley(){ return ":)";}

int main()
{
    unsigned int i = 0;
    szFunction myFunctions[6];
    myFunctions[0] = hello;
    myFunctions[1] = world;
    myFunctions[2] = test;
    myFunctions[3] = demo;
    myFunctions[4] = newline;
    myFunctions[5] = smiley;

    for(i = 0; i < 6; ++i)
        printf("%s\n",myFunctions[i]());
    return 0;
} 
```

[**Ideone 演示**](http://ideone.com/Xbnmm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:20:40.527

看起来您的初始示例无效。要定义`f`返回指向字符数组的指针的函数指针，应使用以下语法。

```
char* (*f)() = &func1 
```

如果你想要一个函数指针数组，请使用下面的语法

```
char* (*arrf[6])() = { &func1, &func2, &func3, &func4, &func5, &func6 } 
```

这里还有一个关于函数指针的[有用的旧课程讲义的链接。](http://ieng6.ucsd.edu/~cs12x/declare.txt)

# c# - Web 应用程序的 XMLEditor 控件

> ID：10276272
> 
> 赞同：1
> 
> 时间：2012-04-23T07:12:56.003
> 
> 标签：c#, asp.net, .net, xml, asp.net-4.0

在 Web 应用程序中，我们需要操作一些 XML 标记（不是完整的 xml 文件）。目前有一个 TextBox 控件，我想要一个适当的可编辑控件，带有缩进。有没有什么好的现成控件可以提供这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:31:18.773

检查这个

[http://xmlwebpad.codeplex.com/](http://xmlwebpad.codeplex.com/)

# php - 以下要求的 PHP/MySQL 查询应该是什么？

> ID：10276275
> 
> 赞同：3
> 
> 时间：2012-04-23T07:13:14.903
> 
> 标签：php, mysql, codeigniter

它是一个购物车，用户可以在其中将产品添加到关注列表。有一个单独的用户关注列表页面，其中显示该特定用户已添加到关注列表的所有产品。`product_images`表与产品表分开，因为 1 个图像可以有多个图像。

**MySQL 表**

```
Table "product" :
    pid(pk),name,price, etc...

Table "watchlist" :
    wid(pk),pid(fk),userid(fk)

Table "p_images" :
    image_id(pk),pid(fk),image_name 
```

我想从表中获取所有信息，`product`并且只从表中获取该特定产品的第一张图片`p_images`。产品应由`watchlist`表中的 pid 获取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:18:45.490

```
select * from product p
inner join p_images i on p.pid = i.pid
where p.pid = 1
group by p.pid
order by image_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:34:22.493

我发现使用 LEFT JOIN 检查以下查询是准确的。

```
SELECT *
FROM product p
LEFT JOIN P_images i ON p.pid = i.pid
GROUP BY i.pid 
```

# facebook - 脸书通知

> ID：10276278
> 
> 赞同：0
> 
> 时间：2012-04-23T07:13:28.187
> 
> 标签：facebook, facebook-graph-api

关于 facebook 通知有很多 SO 问题，但我似乎无法从他们那里得到一个严格的答案。

我想构建一个画布应用程序，用户可以授权通知。本质上，我希望我的应用程序能够将服务器端消息推送给 facebook 应用程序的用户。

我使用了 Graph API 资源管理器，并尝试将通知请求发送到：

```
100001564481290/notifications 
```

但我得到一个错误：

```
{
    "error": {
    "message": "(#3) App must be on whitelist",
    "type": "OAuthException",
    "code": 3
    }
} 
```

我不知道如何解决这个问题，很多谷歌搜索表明你不能通过图形 API 发送通知，但我想要一个关于这个主题的明确答案。

谢谢

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:24:18.760

Try this this should fix it:

Click 'edit settings'. Go to 'Advanced'. Find a small box labelled 'Server Whitelist'. Enter the NUMERICAL IP address of your server."

ps: You have to be at your app page meaning at developers.facebook.com

# php - 致命错误：未找到“Silex”类

> ID：10276288
> 
> 赞同：1
> 
> 时间：2012-04-23T07:14:16.190
> 
> 标签：php, silex, phar

我尝试使用 silex 来构建我的应用程序。当我尝试测试我的第一个应用程序时，我收到如下错误：

> 致命错误：在第 5 行的 /opt/local/apache2/htdocs/silex/try.php 中找不到类 'Silex'

这是我的代码：

```
<?php
  #require_once __DIR__.'/silex.phar';  
  require_once 'phar://'.__DIR__.'/silex.phar/vendor/.composer/autoload.php';  
  #require_once 'phar://'.__DIR__.'/silex.phar/autoload.php';  
  $app= new Silex/Application();  
  $app->get('hello/{name}',function($name) use($app){  
     return 'Hello ' .$app->escape($name);  
  });  
  $app['debug'] == true;  
  $app->run();  
?> 
```

我在搜索引擎中搜索了我的错误，我有一些建议，比如在 php.ini 中添加此代码：

```
extension=phar.so  
phar.readonly = Off  
phar.require_hash = Off  
detect_unicode = Off 
```

但是当我在网络浏览器中测试时，我仍然会遇到同样的错误。你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:21:44.603

最初它看起来像你的行：

```
$app= new Silex/Application(); 
```

应该实际阅读（注意反斜杠）：

```
$app= new Silex\Application(); 
```

`\`是命名空间分隔符，您的代码正在运行，`new Silex`然后将其除以`Application()`，并且由于`class Silex`不存在，编译失败。

希望能解决问题！

**还：**

我认为该行`$app['debug'] == true;`应该是`$app['debug'] = true;`（单等号）-双等号是相等测试，单等号是赋值。

# android - 带有tabhost的android活动组，键盘不显示

> ID：10276291
> 
> 赞同：3
> 
> 时间：2012-04-23T07:14:27.190
> 
> 标签：android, keyboard, android-tabhost, activitygroup

我有一个选项卡主机，每个选项卡都有一个活动组。

当应用程序启动并且我按下editText时，键盘就会出来。当我开始一个子活动然后回到主要活动时，键盘不再出现。

我的启动子活动的代码

```
Intent i = new Intent(this, ShowAddFoodToSelection.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

View view = ActivityGroupMeal.group.getLocalActivityManager().startActivity(DataParser.activityIDMeal, i).getDecorView();

ActivityGroupMeal.group.setContentView(view); 
```

我的代码回到主要活动

```
ActivityGroupMeal.group.back(); 
```

以及活动组中的后台代码：

```
public void back() {
        try {
            // if we set history.size() > 0 and we press back key on home
            // activity
            // and then on another activity we wont get back!
            if (history.size() > 1) {
                history.remove(history.size() - 1);
                // call the super.setContent view! so set the real view
                super.setContentView(history.get(history.size() - 1));
            } else {

            }
        } catch (Exception e) {
            if (history.size() >= 0)
                super.setContentView(history.get(0));
        }
    } 
```

我使用以下代码设置`onClickListener`了一个：`editText`

```
private void keyboardShow() {
        InputMethodManager inputManager = (InputMethodManager) ActivityGroupMeal.group.getSystemService(Context.INPUT_METHOD_SERVICE);

        boolean test = inputManager.showSoftInput(editTextSearch, InputMethodManager.SHOW_IMPLICIT);

        Toast.makeText(this, "show keyboard " + test, Toast.LENGTH_SHORT).show();
    } 
```

它第一次返回 true，而我从 childactivity 回来的时候返回 false。

当我单击另一个选项卡然后返回第一个选项卡时，然后单击 editText 它再次返回 true。

编辑：我得到了一个临时修复，我`onClicklistener`在editTextbox上设置了一个，然后我用代码显示键盘

```
InputMethodManager inputManager = (InputMethodManager) ActivityGroupMeal.group
                .getSystemService(Context.INPUT_METHOD_SERVICE);

        // show keyboard , when it fails first switch tab and then try again
        if (!inputManager.showSoftInput(null, InputMethodManager.SHOW_FORCED)) {
            // switch from tab and back
            // the keyboard wont show if we dont do this
            ShowHomeTab parentActivity;
            parentActivity = (ShowHomeTab) this.getParent().getParent();
            parentActivity.goToTab(DataParser.activityIDTracking);
            parentActivity.goToTab(DataParser.activityIDShowFoodList);

            inputManager.showSoftInput(null, InputMethodManager.SHOW_FORCED);
        } 
```

当我从 childactivity 回来时，我首先必须用代码切换选项卡，然后键盘才会显示 =/

有人对此有解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:08:55.010

在我使用活动组的应用程序中，我使用下面的代码来解决相同的问题

```
YOUR_EDIT_TEXT.setOnEditorActionListener(new OnEditorActionListener() {

            public boolean onEditorAction(TextView v, int actionId,
                    KeyEvent event) {
                if (event != null&& (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) {
                    InputMethodManager in = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    in.hideSoftInputFromWindow(searchName
                            .getApplicationWindowToken(),
                            InputMethodManager.HIDE_NOT_ALWAYS);
                }
                return false;
            }
        }); 
```

它工作正常。所以试试这个代码片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:21:34.997

您可以尝试将`requestFocus />`元素添加到 的定义中`EditText`，即

```
<EditText android:id="@+id/edit_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="text" >
        <requestFocus />
</EditText> 
```

如果没有帮助，请`back()`通过调用在您的方法中请求焦点[`requestFocus()`](http://developer.android.com/reference/android/view/View.html#requestFocus%28%29)

# jsf - 如何在 pom.xml 中托管本地存储库

> ID：10276297
> 
> 赞同：1
> 
> 时间：2012-04-23T07:14:50.710
> 
> 标签：jsf, maven, primefaces, spring-webflow

当我尝试目标>>编译 pom.xml 时，我收到以下错误。

调用 maven 目标时遇到内部错误：请检查异常详细信息。

## org.apache.maven.artifact.resolver.MultipleArtifactsNotFoundException：缺失：

1) org.apache.httpcomponents:httpcore:jar:4.1.2

尝试从项目网站手动下载文件。

然后，使用以下命令安装它： mvn install:install-file -DgroupId=org.apache.httpcomponents -DartifactId=httpcore -Dversion=4.1.2 -Dpackaging=jar -Dfile=/path/to/file

或者，如果您托管自己的存储库，您可以在那里部署文件： mvn deploy:deploy-file -DgroupId=org.apache.httpcomponents -DartifactId=httpcore -Dversion=4.1.2 -Dpackaging=jar -Dfile=/path/to /file -Durl=[url] -DrepositoryId=[id]

依赖路径：1）org.apache.httpcomponents:httpcore:jar:4.1.2

* * *

缺少 1 个必需的工件。

根据上面的错误提示，或者，如果您托管自己的存储库，您可以在那里部署文件。如何为 pom.xml 提供本地存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:00:48.820

您确定您的 Maven 设置有效吗？您正在寻找的工件位于公共 Maven 存储库中： [http ://repo1.maven.org/maven2/org/apache/httpcomponents/httpcore/4.1.2/](http://repo1.maven.org/maven2/org/apache/httpcomponents/httpcore/4.1.2/)

它应该像任何其他公开可用的工件一样被发现。请检查您的 pom 文件中工件和组的拼写，以确保您没有拼写错误。

```
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpcore</artifactId>
    <version>4.1.2</version>
</dependency> 
```

Maven 在失败之前会打印什么？它通常会说明它在哪里检查工件 - 我在上面发布的 URL 是否显示？

您是否看到其他工件存在类似问题？

您不必自己托管此工件，因为它是公开可用的。看起来您正在从 IDE 运行 Maven - 您可以尝试从命令行运行它以查看是否出现相同的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:28:26.480

[这篇](http://wildfalcon.com/archives/2006/04/24/setting-up-a-maven2-internal-repository/)文章解释了你需要什么。引用它：

maven 存储库只是某个地方的目录，仅此而已。为了使用它，您需要执行的步骤非常少。

1.  选择目录
2.  确保每个需要它的人都可以通过某种网络协议访问它（即通过 http 或 ftp 或其他方式提供它。
3.  将您需要的库以特定格式放在目录中。
4.  设置您的 Maven 构建以从存储库中读取
5.  （可选）设置您的 Maven 构建以部署您的存储库

要将现有库放入存储库，请使用 maven deploy 命令。

要将构建设置为从存储库中读取，请将以下 xml 添加到您的 pom.xml 文件中：

服务器名称-下载说明 [https://host/path](https://host/path)

* * *

全面了解[Maven仓库的详细文章](http://www.theserverside.com/news/1364121/Setting-Up-a-Maven-Repository)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T06:59:39.567

要在 pom.xml 中托管本地存储库，我们必须正确设置 maven。我们需要修改 settings.xml 并在 maven 包中提供本地存储库路径，然后在 IDE 中使用它。因此，如果 JAR 在我的本地存储库中不可用，那么现在只有 maven 尝试在其 maven 存储库中搜索。

请按照以下博客正确配置 Maven。
[http://chiragsdiary.blogspot.in/2013/02/cxf-webservice-example-step-by-step.html](http://chiragsdiary.blogspot.in/2013/02/cxf-webservice-example-step-by-step.html)

# c - 在 numpy 向量上使用标量 C 函数

> ID：10276301
> 
> 赞同：1
> 
> 时间：2012-04-23T07:15:25.297
> 
> 标签：c, vector, numpy

我有一个用于标量的 C 函数库，例如

```
double f(double x, double y, double z) {
    result = x + 2*y - 3*z;
    return result;
} 
```

我想在 numpy 数组上使用这些函数，但想以某种方式对操作进行矢量化，并避免`f`对每个数组元素进行多次 C 调用。我发现的大多数示例都是针对已经支持数组（`f(double *x)`或`f(double x[])`）的函数。

这里的正确方法是什么？重写`f`以支持数组？（库中有*很多*函数。）编写一个 C 包装器，也许使用函数指针？还是 ctypes、cython 等提供更简单的替代方案？

这可能已被问过数百次，因此即使只是指向相应文档的指针也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:17:55.490

就我个人而言，我会说重写函数以使用数组是最好和最干净的方法。但是，另一种选择是已经提到的包装器，但使用原始函数作为[内联函数](http://gcc.gnu.org/onlinedocs/gcc/Inline.html)，例如

```
// Function
inline double f(double x, double y, double z) {
    return x + 2*y - 3*z;
}

// Wrapper
void fWrapper(double *x, double *y, double *z, double *ret, int N) {
    int i;

    for (i = 0; i < N; i++) {
        ret[i] = f(x[i], y[i], z[i]);
    }
} 
```

现在编译器应该用函数的代码替换函数调用。

# api - CouchDB 数据库模型

> ID：10276314
> 
> 赞同：1
> 
> 时间：2012-04-23T07:16:51.633
> 
> 标签：api, rest, couchdb

我有两个实体：

1.  公司 [companyId (PK)] 和
2.  员工 [employeeId (PK), companyId (PK, FK)]。

无论如何我可以在 CouchDB 中组织我的文档，以便我可以使用以下格式查询员工（*$CouchDB 是我的 CouchDB 实例的 URL*）？

```
$CouchDB/company/{companyId}/employee/{employeeId} 
```

我知道我们可以将 Company 和 Employee 文档混合在一个数据库中，并使用元字段（例如：“_type”）和 map/reduce 来查询我们想要的文档。“map/reduce”方法没有错，只是想仔细检查一下，这样我就不会错过任何东西。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:48:37.663

您*不能*以这种方式组织您的文档。我同意，这是一个非常好的布局，但简短的回答是 CouchDB 不支持。

文档 ID（和文档 URL）是*flat*。它们都共享相同的命名空间。另一种说法是`"_id"`文档中的值**必须**是它的主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:53:23.207

虽然[有一些怪癖](https://issues.apache.org/jira/browse/COUCHDB-1229)，但文档`_id`可以包含`/`. 然后`company/COMPANYID/employee/EMPLOYEEID`是一个有效的身份证。

我经常使用以下方案来构建`_id`文档（我更喜欢`_`）：

```
EntityName_ENTITYID 
```

有了这个`_id`：

*   我不需要`_type`字段；
*   我得到所有的公司`_all_docs?startkey="Company_"&endkey="Company_\fff0"`；
*   我让公司内的所有员工都有`_all_docs?startkey="Employee_COMPANYID_"&endkey="Employee_COMPANYID_\fff0"`;
*   我避免不同实体之间的身份冲突。

# android - 创建包含 8000 条记录的 Sqlite 数据库

> ID：10276317
> 
> 赞同：0
> 
> 时间：2012-04-23T07:16:55.393
> 
> 标签：android, sqlite, sqliteopenhelper

我正在开发一个使用 sqlite 进行自动完成文本视图的应用程序。该数据库有 8000 多条记录。可以通过查询来创建数据库`onCreate()`。但是我如何创建一个包含 8000 多条记录的数据库。为 8000 条记录编写插入查询对我来说听起来最糟糕。

创建包含 8000 多条记录的数据库的最佳方法是什么。有什么方法可以像我们在 mysql 中那样转储 sql 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:20:22.283

相反，您应该将您的数据库与一个表（有 8000 条记录）放在 Assets 文件夹中，并编写一个逻辑来**复制**您的 android 应用程序中的现有数据库。

检查链接：

1.  [https://stackoverflow.com/a/6541043/379693](https://stackoverflow.com/a/6541043/379693)
2.  [发布带有数据库的应用程序](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:20:53.377

您执行的任何方法都是在***SQLite 事务***中执行，因为它将维护一个*日志*（*数据库缓存*）文件，用于一次性插入所有记录。它真的会加快很多事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:22:29.130

如果您有 .sql 文件，您可以在 phpMyadmin 中导入它...。只需转到 PHPMyadmin URL...创建一个空数据库...。单击导入...浏览 sql 文件单击 Go...

就是这样

# android - 如何获取和设置 ImageButton 的大小？

> ID：10276318
> 
> 赞同：0
> 
> 时间：2012-04-23T07:16:56.437
> 
> 标签：android

如何以编程方式获取和设置 ImageButton 的大小？Android似乎使按钮尺寸大于图像尺寸。也许我错了。我想让它的大小与图像大小相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:23:58.630

try to set padding to 0dp in xml layout:

```
<ImageButton ...
android:padding="0dp" /> 
```

The image should be as big as button. If you want to make button (but not an image) transparent set button background color to @null:

```
<ImageButton ...
android:background="@null" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:27:44.640

```
int height = button.getLayoutParams().height;
int width = button.getLayoutParams().width;

button.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T13:43:19.150

以编程方式获取高度和宽度：

```
ViewGroup.LayoutParams layoutParams = mImageButton.getLayoutParams();
int height = layoutParams.height;
int width = layoutParams.width; 
```

以编程方式设置高度和宽度：

```
int myHeight = ContextCompat.getDrawable(getContext(), R.drawable.myImageAsset).getIntrinsicHeight();
/*any desired height, but for OP's sake ^^*/
int myWidth = ContextCompat.getDrawable(getContext(), R.drawable.myImageAsset).getIntrinsicWidth();
/*any desired width, but for OP's sake ^^*/
ViewGroup.LayoutParams layoutParams = mImageButton.getLayoutParams();
layoutParams.height = myHeight;
layoutParams.width = myWidth;
mImageButton.setLayoutParams(layoutParams); 
```

# url - 通过 URL 更改获取大型 Google Plus 照片 (lh3.googleusercontent.com)

> ID：10276319
> 
> 赞同：4
> 
> 时间：2012-04-23T07:17:02.957
> 
> 标签：url, random, google-plus

我正在使用 Google Plus 作为登录名，捕获用户信息等。

我保存的个人资料图片如下所示：

[https://lh4.googleusercontent.com/-ahWlp0z8KQM/AAAAAAAAAAI/AAAAAAAAAGA/nEfC5WjfVM4/photo.jpg](https://lh4.googleusercontent.com/-ahWlp0z8KQM/AAAAAAAAAAI/AAAAAAAAAGA/nEfC5WjfVM4/photo.jpg)

我正在尝试获得各种尺寸，例如小号和大号。

有什么方法可以添加一个 URL 变量，比如 URL`?size=small`或者只是 URL 的更改？有什么办法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T03:21:46.973

您还可以传递`sz`查询参数来调整图像大小。

传递`?sz=10`会将原始图像的大小调整为 10x10 图像。

```
https://lh4.googleusercontent.com/-ahWlp0z8KQM/AAAAAAAAAAI/AAAAAAAAAGA/nEfC5WjfVM4/photo.jpg?sz=10 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T07:22:58.843

您可以在 URL 中指定图像大小，但它不是查询字符串参数。

这是一张 moi 漂亮照片的链接：

[https://lh6.googleusercontent.com/-CsrOQxw0XqI/AAAAAAAAAAI/AAAAAAAAAGA/l87kTXQIMnQ/s230-ck/photo.jpg](https://lh6.googleusercontent.com/-CsrOQxw0XqI/AAAAAAAAAAI/AAAAAAAAAGA/l87kTXQIMnQ/s230-c-k/photo.jpg)

请注意照片名称之前的部分：`/s230-c-k/`

该数字`230`表示正在检索的图像的大小。更改此设置将为您返回具有该值宽度的图像。

在您的情况下，类似于：

[https://lh4.googleusercontent.com/-ahWlp0z8KQM/AAAAAAAAAAI/AAAAAAAAAGA/nEfC5WjfVM4/s210-ck/photo.jpg](https://lh4.googleusercontent.com/-ahWlp0z8KQM/AAAAAAAAAAI/AAAAAAAAAGA/nEfC5WjfVM4/s210-c-k/photo.jpg)

# perl - Perl，使用两个不同的哈希表生成新数据（新哈希）

> ID：10276320
> 
> 赞同：3
> 
> 时间：2012-04-23T07:17:07.970
> 
> 标签：perl, hashtable, information-extraction

我遇到了一个非常复杂的问题（从我作为新手的角度来看），我不知道如何解决它。我能想到工作流程，但不能想到脚本。

我的文件 A 如下所示：Teacher (tab) Student1(space)Student2(space)..

```
Fiona       Nicole Sherry 
James       Alan Nicole
Michelle    Crystal 
Racheal     Bobby Dan Nicole 
```

当有两个同名（例如，John1、John2）时，他们有时会在他们的名字旁边有数字。如果他们有两个以上的顾问，学生也可能重叠。

文件 B 是一个将教师组放在一起的文件。它看起来很相似，但值是用逗号分隔的。

```
Fiona       Racheal,Jack
Michelle    Racheal
Racheal     Fiona,Michelle
Jack        Fiona 
```

文件 B 的趋势是一个键有多个值，每个值也成为一个键，以便轻松找到谁与谁分组。

我想要的输出是哪些学生可能会根据他们的老师/小组接受类似的教育。所以我希望脚本执行以下操作：

1.  将文件 A 存储到哈希中并关闭
2.  打开文件B，查看每个老师是否有学生（有的可能没有，实际名单很大..）。所以如果我带第一个老师，Fiona，它会在存储的文件中查找一个哈希表，看看是否有一个 Fiona。如果有（在本例中为 Nicole 和 Sherry），将它们分别作为新哈希表的新键弹出。

    ```
    while (<Group>) {
        chomp;
        $data=$_;
        $data=~/^(\S+)\s+(.*)$/;
        $TeacherA=$1;
        $group=$2; 
    ```

3.  然后，看看与Fiona（Racheal，Jack）分组的教师组。一次带 1 人 (Racheal)

    ```
    if (defined??) {
        while ($list=~/(\w+)(.*)/) {
            $TeacherB=$1;
            $group=$2; 
    ```

4.  查看 Racheal 学生的文件 A。
5.  将它们填充为步骤 2 中生成的学生键的值（逗号分隔）。
6.  打印学生-学生和教师-教师组。

    ```
    Nicole  Bobby,Dan,Nicole    Fiona   Racheal
    Sherry  Bobby,Dan,Nicole    Fiona   Racheal 
    ```

    由于 Fiona 小组的下一任老师 Jack 没有学生，所以他不会出现在这个结果中。例如，如果他有大卫，结果将是：

    ```
    Nicole  Bobby,Dan,Nicole    Fiona   Racheal
    Sherry  Bobby,Dan,Nicole    Fiona   Racheal
    Nicole  David               Fiona   Jack
    Sherry  David               Fiona   Jack 
    ```

我很抱歉问了这么一个复杂而具体的问题。我希望其他正在做类似事情的人可以从答案中受益。非常感谢您的帮助和回复。你是我唯一的帮助来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:26:30.567

这是查看数据的一种相当奇怪的方式，但我想我让它按照您尝试的方式工作。看看你为什么希望数据是这样的会很有趣。也许下次提供列标题。知道你为什么以某种方式做某事通常会让你更容易想到实现它的方法。

所以这就是我所做的。不要混淆，我将文件 A 和文件 B 中的值放入标量，并更改了读取它们的部分。

```
my $file_a = qq~Fiona\tNicole Sherry
James\tAlan Nicole
Michelle\tCrystal
Racheal\tBobby Dan Nicole
~;

my $file_b = qq~Fiona\tRacheal,Jack
Michelle\tRacheal
Racheal\tFiona,Michelle
Jack\tFiona
~; 
```

之后，继续阅读“文件”。

```
# 1: Store file A in a hash
my (%file_a);
foreach my $a (split /\n/, $file_a) {
  my @temp = split /\t/, $a;
  $file_a{$temp[0]} = $temp[1];
}

# 2: Go through file B
foreach my $b (split /\n/, $file_b) {
  my @line_b = split /\t/, $b;
  # Look in stored file A if the teacher is there
  if (exists $file_a{$line_b[0]}) {
    my (%new_hash_table, @teachers);
    # Put all the students of this teacher into a new hash
    $new_hash_table{$_} = '' foreach split / /, $file_a{$line_b[0]};

    # 3: Take one of the group of teachers who are grouped with the 
    # current teacher at a time
    foreach my $teacher (split /,/, $line_b[1]) {
      if (exists $file_a{$teacher}) {
        # 4: This teacher from the group has students listen in file A
        push @teachers, $teacher; # Store the teacher's name for print later
        foreach (keys %new_hash_table) {
          # 5: Fill the students as csv for the student keys from step 2
          $new_hash_table{$_} = join(',', split(/ /, $file_a{$teacher}));
        }
      }
    }
    foreach my $student (keys %new_hash_table) {
      # 6: Print...        
      print join("\t", 
        # Student-student relation
        $student, $new_hash_table{$student}, 
        # Teacher-teacher relation
        $line_b[0], @teachers);
      print "\n";
    }
  }
} 
```

对我来说，提供以下输出：

```
Sherry  Bobby,Dan,Nicole    Fiona   Racheal
Nicole  Bobby,Dan,Nicole    Fiona   Racheal
Crystal Bobby,Dan,Nicole    Michelle    Racheal
Bobby   Crystal Racheal Fiona   Michelle
Nicole  Crystal Racheal Fiona   Michelle
Dan Crystal Racheal Fiona   Michelle 
```

这可能很奇怪，因为我没有所有的价值观。

无论如何，对此有几件事要说。

在您的示例代码中，您使用了一个正则表达式`$data=~/^(\S+)\s+(.*)$/;`来获取一个简单的两列列表的值。[使用split 运算符](http://perldoc.perl.org/functions/split.html)来做到这一点要容易得多。

当您从具有`<FILEHANDLE>`语法的文件中读取时，您可以将希望行进入的标量放入`while`循环的条件中，如下所示：

```
while (my $data = <GROUP>) {
      chomp $data 
```

此外，[通常](http://docstore.mik.ua/orelly/perl4/lperl/ch11_01.htm)以全大写形式编写文件句柄名称。

我建议你看看'Learning Perl'。里面的哈希和数组的基本概念应该足以处理这样的任务。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:29:49.210

我无法想象当您只需查看文件 A 就可以很好地了解谁正在接受类似的教育时，为什么您会想要这些冗余数据……但是这里有一种在 perl 中执行此操作的方法。

```
$data = {};
# pull in students
open(IN, "students.txt");
while(my $line = <IN>) {
  chomp($line);
  my ($teacher, @students) = split(/\s+/,$line);
  $data->{$teacher}->{students} = \@students;
}
close IN;
# pull in teachers
open(IN, "teachers.txt");
while(my $line = <IN>) {
  chomp($line);
  my ($teacher, $supporters) = split(/\s+/,$line);
  my @supporters = split(/,/,$supporters);
  $data->{$teacher}->{supporters} = \@supporters;
}
close IN;
# make the output
foreach my $teacher (keys %{$data}){
  foreach my $teacher_student (@{$data->{$teacher}->{students}}) {
    foreach my $supporter (@{$data->{$teacher}->{supporters}}){
      my $num_supporter_students = @{$data->{$supporter}->{students}} + 0;
      if($num_supporter_students) {

        print "$teacher_student\t" . 
              join(",",@{$data->{$supporter}->{students}}) .
              "\t$teacher\t$supporter\n";
      }
    }
  }
} 
```

在问题中列出的数据上运行时，它返回：

```
Crystal Bobby,Dan,Nicole    Michelle    Racheal
Nicole  Bobby,Dan,Nicole    Fiona   Racheal
Sherry  Bobby,Dan,Nicole    Fiona   Racheal
Bobby   Nicole,Sherry   Racheal Fiona
Bobby   Crystal Racheal Michelle
Dan Nicole,Sherry   Racheal Fiona
Dan Crystal Racheal Michelle
Nicole  Nicole,Sherry   Racheal Fiona
Nicole  Crystal Racheal Michelle 
```

# android - 需要从邮件撰写页面返回到特定活动

> ID：10276322
> 
> 赞同：2
> 
> 时间：2012-04-23T07:17:22.133
> 
> 标签：android

在此处输入代码我正在使用我的应用程序中的邮件撰写选项，即当我单击提交按钮时，我正在将用户导航到邮件撰写页面。现在我想在任何一种情况下返回特定活动 1- 成功完整发送。导航到活动 2 2- on Discard 导航到活动 1

我该怎么做代码如下

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[] { 

"sales@fastpkg.com"});

emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Placing an Order");

emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "This is a 

sample mail..");

emailIntent.setType("text/plain");

startActivity(Intent.createChooser(emailIntent, "Send mail client :")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:24:01.190

我想，如果你使用

```
startActivityForResult(Intent.createChooser(emailIntent, "Send mail client :"),RESULT_OK); 
```

您始终可以导航到您的活动（`onActivityResult()`当前活动的着陆点），您可以从该活动开始上述活动，无论是**成功**还是当您从已开始的活动中**按下返回键**时。

# outlook - Outlook插件直接进入非活动应用程序插件

> ID：10276323
> 
> 赞同：4
> 
> 时间：2012-04-23T07:17:32.727
> 
> 标签：outlook, windows-installer

我的 Outlook 插件 MSI 安装插件（它在添加\删除程序中列出）但将其直接发送到非活动的应用程序插件。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T01:30:33.997

检查插件的 LoadBehavior 键值。

```
HKEY_CURRENT_USER\Software\Microsoft\Office\Outlook\Addins\%your add in%\LoadBehavior 
```

如果您看到加载项的注册表配置单元 - 它很可能已正确安装。在您启动 Outlook*之前*，LoadBehavior 值应为 3 。如果不是，请将其设置为 3。如果在您启动 Outlook 时它变为 2 - 它肯定是在尝试运行它，所以在某种程度上这是个好消息。

您需要在那里进行一些诊断 - 尝试从 vbs 实例化您的加载项

```
set c = CreateObject("EnthusiasticDeveloper.OutlookAddIn") 
```

这应该不会给你任何错误。如果没有，并且对象已实例化 - 您需要将诊断信息放入加载项中。Outlook 正在调用它，您最有可能获得足够的控制权来实例化 log4net。

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-20T15:10:50.107

似乎 MS Outlook 开始评估直接影响产品整体性能的加载项并将其设置为非活动状态。我发现这篇文章指出了 DisabledItems 的 Windows 注册表项 (HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\Outlook\Resiliency\DisabledItems)。您的加载项很可能会列在此文件夹中。在删除之前备份相关条目。

查看有关此访问的详细信息： [http ://www.outlook-apps.com/inactive-outlook-add-ins/](http://www.outlook-apps.com/inactive-outlook-add-ins/)

干杯，维埃拉

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T07:29:14.120

这可能是因为未正确设置加载行为。这篇文章可以帮助你：http: [//msdn.microsoft.com/en-us/vsto/ff937654.aspx#Create](http://msdn.microsoft.com/en-us/vsto/ff937654.aspx#Create)

# c# - NHibernate 抛出异常

> ID：10276329
> 
> 赞同：1
> 
> 时间：2012-04-23T07:17:43.440
> 
> 标签：c#, wpf, wcf, nhibernate, exception-handling

我有一个使用 NHibernate 的 WCF 服务，我试图通过我的 WPF 连接这个 WCF 服务并从我的 SQL 数据库中获取所有记录。一些它是如何引发这个异常的，我对此一无所知。请帮我解决这个问题。

例外 ：

> 'Gateway.DataAccess.NHibernateDAO.NHibernateHelper' 的类型初始化程序引发了异常。

导致：

> 尝试创建“Client.Modules.Metadata.ViewModel.StoriesViewModel”类型的实例时发生异常。

这是我的 NHibernateHelper 类

```
namespace Webster.Gateway.DataAccess.NHibernateDAO
{
    public sealed class NHibernateHelper
    {
        private const string CurrentSessionKey = "nhibernate.current_session";

        // An ISessionFactory is threadsafe, many threads can access it concurrently and request ISessions
        private static readonly ISessionFactory sessionFactory;

        // An ISession is a non-threadsafe object that represents a single unit-of-work with the database
        ////private static ISession currentSession; 

        public static ISessionFactory SessionFactory
        {
            get
            {
                return sessionFactory;
            }
        }

        static NHibernateHelper()
        {
            sessionFactory = new Configuration().Configure().BuildSessionFactory();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T01:18:14.580

找到了罪魁祸首，它与我的应用程序无关，我只需将 IIS 中的应用程序池设置和身份更改为我的用户名。我在 IIS 中托管这个 WCF 服务。

现在可以正常工作了，非常感谢。

# php - Mysql错误：'字段列表'中的未知列'变量'

> ID：10276332
> 
> 赞同：1
> 
> 时间：2012-04-23T07:17:54.390
> 
> 标签：php, mysql

我有这个返回常量的函数。这是我的类和函数：

```
class Backlinks extends GoogleSearch {
const ROBOTS_NOINDEX_NOFOLLOW = 606;

    function robotsNoIndexNoFollow(){
    $crawler = new Connection();
    $curl = $crawler -> setUrl($this->url) ->getDocument();
    if ($curl){
        $html = new simple_html_dom($curl);
        $robots = $html -> find("meta[name=robots]", 0);
        $html -> clear();
        unset ($crawler);
        if ($robots){
            $content = $robots -> getAttribute("content");
            $content = strtolower($content);
            if (substr_count($content, "noindex")){
                return ROBOTS_NOINDEX_NOFOLLOW; 
            }
            if (substr_count($content, "nofollow")){
                return ROBOTS_NOINDEX_NOFOLLOW;
            }
        }
        else{
            return false;
        }
    }

} 
```

上面的问题出在 ROBOTS_NOINDEX_NOFOLLOW contatnt 中。该常数作为要在数据库中更新的错误参数进入另一个函数。

```
public function setStatus($error){
    $status = $error;
    if (!$error){
        $status = 200;
    }
    // only update the pages which weren't already scanned (for historic purposes).
    $query = "UPDATE task_pages tp 
        SET scan_status = $status 
        WHERE page_id = $this->pageID AND scan_status = 0";
    mysql_query($query) or die(mysql_error());
} 
```

我收到两个错误：

> 注意：使用未定义的常量 ROBOTS_NOINDEX_NOFOLLOW - 在 C:\Program Files (x86)\Zend\Apache2\htdocs\backlinks\cron\Backlinks.php 中假设为 'ROBOTS_NOINDEX_NOFOLLOW' 第 78 行 'field list' 中的未知列 'ROBOTS_NOINDEX_NOFOLLOW'

一个是未定义常量的问题..我不明白为什么。第二个问题是 sql.. 将常量解释为列？！？

为什么以及如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:20:42.303

您需要在字符串周围使用 qoutes，以便 MySQL 将其识别为数据而不是常量。尝试：

```
"UPDATE task_pages tp 
        SET scan_status = '$status' 
        WHERE page_id = $this->pageID AND scan_status = 0"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:22:05.293

您需要使用 'self' 来引用常量：

返回自我::ROBOTS_NOINDEX_NOFOLLOW

否则，即使在您的情况下这是一个类常量，PHP 也会尝试在全局范围内查找常量。

# ios - 我在哪里可以找到上面的 iOS 路径？

> ID：10276334
> 
> 赞同：0
> 
> 时间：2012-04-23T07:17:57.640
> 
> 标签：ios, path

我使用 ifunbox 找到我的这条路径，但它不是我认为的那样。/var/mobile/Applications/XXX/../../Library/Caches/com.apple.mobile.installation.plist。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:01:12.457

您应该使用以下代码获取此文件

```
NSString *directory = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];

NSString *yourFile = [directory stringByAppendingPathComponent:@"com.apple.mobile.installation.plist"]; 
```

但我不确定你是否做对了。

# actionscript-3 - 沿半径的圆心周围的文字

> ID：10276336
> 
> 赞同：0
> 
> 时间：2012-04-23T07:18:07.813
> 
> 标签：actionscript-3, flash, geometry

请帮助解决几何问题。我正在创建轮子的多个扇区。现在我需要在每个扇区中放置从圆心到边缘的文本。但不知何故，一切都出了问题。

![车轮](../Images/e2c453aaf9eb79f8ed2958b6cbae2af7.png)

这是一个部门的类别：

```
package comps
{

    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.filters.GlowFilter;
    import flash.geom.Matrix;
    import flash.geom.Point;
    import flash.geom.Vector3D;
    import flash.net.URLRequest;
    import flash.text.AntiAliasType;
    import flash.text.Font;
    import flash.text.TextField;
    import flash.text.TextFormat;
    import flash.text.TextFormatAlign;

    public class Sector extends Sprite
    {
        private var imageX1:Number;
        private var imageY1:Number;
        private var imageX2:Number;
        private var imageY2:Number;
        [Embed(source="font/SEGOEUIB.TTF", fontFamily="SegoeUI", mimeType="application/x-font", embedAsCFF="false", advancedAntiAliasing="true")]
        private var MoolEmbed:Class;

        public function Sector(tip:String, rot:Number, centerX:Number, centerY:Number, innerRadius:Number, outerRadius:Number, startAngle:Number, arcAngle:Number, val:Number, color:uint, alpha:Number, url:String, value:Number, steps:int=20)
        {
            Font.registerFont(MoolEmbed);

            var myArc:Sprite = new Sprite();
            myArc.graphics.lineStyle(2);
            myArc.graphics.beginFill(color, alpha);
            drawSolidArc (myArc,centerX, centerY, innerRadius, outerRadius, startAngle, arcAngle, url, steps);
            myArc.graphics.endFill();
            this.addChild(myArc);

                var myFormat:TextFormat = new TextFormat();
                myFormat.size = 20;
                myFormat.align = TextFormatAlign.CENTER;
                myFormat.font = 'SegoeUI';
                myFormat.bold = true;

                var myText:TextField = new TextField();
                myText.defaultTextFormat = myFormat;
                myText.setTextFormat(myFormat);
                myText.embedFonts = true;
                myText.antiAliasType = AntiAliasType.ADVANCED;
                myText.text = url;
                this.addChild(myText);

                myText.wordWrap = true;
                myText.width = outerRadius - innerRadius;
                myText.height = 20;
                var sectorsNum:Number = rot/360;
                textRotation(myText, rot*(sectorsNum-value) - rot*0.5, centerX, centerY);

                myText.x = imageX1 + 0 * (imageX2 - imageX1);
                myText.y = imageY1 + 0 * (imageY2 - imageY1);
                //trace (myText.x  + " " + myText.y);
                var myGlow:GlowFilter = new GlowFilter();
                myGlow.color = 0xFFFFFF; 
                myGlow.blurX = 20; 
                myGlow.blurY = 20; 
                myGlow.strength = 2;
                myText.filters = [myGlow];
            }
        }

        private function textRotation (target:TextField, angle:Number, centerX:Number, centerY:Number):void{
            var point:Point=new Point(centerX + target.width/2, centerY + target.height/2);

            var m:Matrix=target.transform.matrix;
            m.tx -= point.x;
            m.ty -= point.y;
            m.rotate (angle*(Math.PI/180));
            m.tx += point.x;
            m.ty += point.y;
            target.transform.matrix=m;
        }

        private function drawSolidArc (drawObj:Object, centerX:Number,centerY:Number,innerRadius:Number,outerRadius:Number,startAngle:Number,arcAngle:Number,url:String,steps:int=20):void {
            var twoPI:Number = 2 * Math.PI;
            var angleStep:Number = arcAngle/steps;
            var angle:Number, i:int, endAngle:Number;
            var xx:Number = centerX + Math.cos(startAngle * twoPI) * innerRadius;
            var yy:Number = centerY + Math.sin(startAngle * twoPI) * innerRadius;
            var xxInit:Number=xx;
            var yyInit:Number=yy;
            drawObj.graphics.moveTo(xx,yy);
            for(i=1; i<=steps; i++) {
                angle = (startAngle + i * angleStep) * twoPI;
                xx = centerX + Math.cos(angle) * innerRadius;
                yy = centerY + Math.sin(angle) * innerRadius;
                drawObj.graphics.lineTo(xx,yy);
                if (i==steps*0.5-1){
                    imageX1 = xx;
                    imageY1 = yy;
                }
            }
            endAngle = startAngle + arcAngle;
            for(i=0;i<=steps;i++) {
                angle = (endAngle - i * angleStep) * twoPI;
                xx = centerX + Math.cos(angle) * outerRadius;
                yy = centerY + Math.sin(angle) * outerRadius;
                drawObj.graphics.lineTo(xx,yy);
                if (i==steps*0.5){
                    imageX2 = xx;
                    imageY2 = yy;
                }
            }
            drawObj.graphics.lineTo(xxInit,yyInit);
        }
    }
} 
```

这就是创造所有轮子：

```
sectorsNum = tarotAC.length;
                for (var i:int = 0; i < sectorsNum; i++){
                    var arcAngle:Number = - 1/sectorsNum;
                    var startAngle:Number = arcAngle*i;
                    var arc:Sector = new Sector(FlexGlobals.topLevelApplication.mode, 360/sectorsNum, 0, 0, stageW*0.1, stageW*0.5, startAngle, arcAngle, Number(sectorsNum - i), tarotAC.getItemAt(i).color, 1, tarotAC.getItemAt(i).datas, tarotAC.getItemAt(i).url);

                    con.addChild(arc);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:18:58.573

通过查看它，我会说您的 TextFields 需要向上移动它们的高度。TextFields 是从顶部创建的，您给它们的坐标将更适合基线。也许您可以将 TextField 放入 Sprite 中，将 TextField 的 y 设置为 -height，然后操作容器而不是文本本身：

```
var container:Sprite = new Sprite();
container.addChild(myText);
this.addChild(container);
myText.y = -myText.height;
textRotation(container, rot*(sectorsNum-value) - rot*0.5, centerX, centerY);
//you should of course modify textRotation's first parameter type
container.x = imageX1 + 0 * (imageX2 - imageX1);
container.y = imageY1 + 0 * (imageY2 - imageY1); 
```

# ruby-on-rails-3 - 如何构建 CanCan 能力以控制基于另一个模型的创建？

> ID：10276337
> 
> 赞同：0
> 
> 时间：2012-04-23T07:18:24.097
> 
> 标签：ruby-on-rails-3, cancan

想象一下俱乐部会员的 has_many 关系：

```
end
class Club < ActiveRecord::Base
  has_many :memberships, :dependent => :destroy
  has_many :users, :through => :memberships
  validates :name, :is_enrollable, :presence => true
end
class Membership < ActiveRecord::Base
  belongs_to :club
end 
```

还假设 Club`is_enrollable`在其表中有一个布尔字段。如果为真，用户可以创建与该俱乐部关联的会员资格。如果为 false，则只有管理员可以创建会员记录。

我的问题是：你如何设置 CanCan 的能力.rb 来反映这一点？

评论：有点不寻常的是，Club 表中的一个字段控制着创建会员记录的能力。这不起作用：

```
can :create, Membership, :club => {:is_enrollable => true} 
```

...因为会员资格在创建之前不存在。 *编辑：这不是真的——CanCan**将**在授权之前处理未保存的记录。请参阅下面的答案。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:31:11.430

（我打算撤回这个问题，因为它提出的很糟糕，但我想出了答案并认为它可能有用。）

您可以在 Ability for :create 中创建一个子句，内容如下：

```
can :create, Membership, :club => {:is_enrollable => true} 
```

这是因为，在 MembershipsController 中，CanCan 将构建一个新的（未保存的）会员模型，然后对其进行授权，有效地执行以下操作：

```
@membership = Membership.new(params[:membership])
raise <some error> unless Ability.new(user).can?(:create, @membership)
# if we've gotten this far, we can now save the membership
@membership.save 
```

至少，这就是我认为正在发生的事情。

# primefaces - 从已经打开的对话窗口中打开第二个对话窗口

> ID：10276338
> 
> 赞同：0
> 
> 时间：2012-04-23T07:18:28.883
> 
> 标签：primefaces

我在我的应用程序中打开一个对话窗口。之后，我想从现有的对话框窗口中打开第二个对话框。第二个对话框在第一个对话框中打开。当第二个对话框大小大于第一个时，就会出现问题。在这种情况下，第二个对话框不会以完整大小出现，而是限于第一个窗口的大小。

我应该怎么做才能以整个尺寸显示第二个对话框窗口？

最好的问候， Javanus

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:31:10.130

这可能被称为解决方法，但是......

你总是可以做类似的事情

```
<p:commandLink value="hide first, show second" onclick="dlg1.hide();dlg2.show();" /> 
```

（隐藏第一个对话框并打开第二个）

在第二个对话框集中`onHide="dlg1.show()"`

# android - 如何在 android 中应用 StrictMode

> ID：10276339
> 
> 赞同：0
> 
> 时间：2012-04-23T07:18:30.917
> 
> 标签：android

我是 android 新手，我正在一个 android 应用程序中工作，该应用程序从 android 应用程序共享 twitter 推文，我收到一个错误，retrieveRequestToken raises “Communication with the service provider failed: null”。我从堆栈溢出（http://stackoverflow.com/questions/8534831/method-retrieverequesttoken-raises-communication-with-the-service-provider-fail）得到了解决方案。它说我们将能够通过 StrictMode 解决这个问题。我不知道如何应用这个。

这是马代码：

```
try {

            Log.i(TAG, "Retrieving request token from Google servers");
            final String url = provider.retrieveRequestToken(consumer,Constants.OAUTH_CALLBACK_URL);                                                
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url))
                    .setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
                            | Intent.FLAG_ACTIVITY_NO_HISTORY
                            | Intent.FLAG_FROM_BACKGROUND);         
            context.startActivity(intent);

        } catch (Exception e) {

            Log.e("Error",e+"");
        } 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:25:19.203

Try it -

```
private void enableStrictMode(Bundle savedInstanceState) {
    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                                             .detectDiskReads()
                                             .detectDiskWrites()
                                             .detectNetwork()
                                             .penaltyLog()
                                             .build());

    super.onCreate(savedInstanceState);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    enableStrictMode(savedInstanceState);
    setContentView(layout.main);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T12:16:15.977

Suvan Roy 提供的答案将帮助您在控制台中看到一种方法需要太多时间（在 UI 线程中），但不是为什么它不起作用。

我的建议：

*   激活 StricMode，但仅在 DEBUG 模式下激活，不适用于 Google Play 版本，并始终在控制台日志中检查“严格模式”错误

在您的应用程序类（如果有的话）和您的活动中执行此操作

```
 @Override 
    public void onCreate(Bundle savedInstanceState) {
       if (BuildConf.DEBUG){
             StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                                             .detectDiskReads()
                                             .detectDiskWrites()
                                             .detectNetwork()
                                             .penaltyLog()
                                             .build());
    }
    super.onCreate(savedInstanceState);
       // your code here
    } 
```

为了更好地利用资源，我建议还通过 Handler 或 AsynchTask 调用网络提供商。请参阅您的代码示例：

```
new Handler().post( new Runnable()
{
           @Override
           public void run()
           {
              Log.i(TAG, "Retrieving request token from Google servers");
              final String url = provider.retrieveRequestToken(consumer,Constants.OAUTH_CALLBACK_URL);                                                
              Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url))
                      .setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
                              | Intent.FLAG_ACTIVITY_NO_HISTORY
                              | Intent.FLAG_FROM_BACKGROUND);         
              context.startActivity(intent);

           }
} ); 
```

我希望您找到了问题的根源并利用了我的建议；）

# ruby-on-rails - ide sublime2 如何找到方法定义

> ID：10276340
> 
> 赞同：51
> 
> 时间：2012-04-23T07:18:40.120
> 
> 标签：ruby-on-rails, ruby, sublimetext

我正在使用**Sublime 2**进行 Ruby On Rails 编程。我需要能够单击方法名称并跳转到定​​义该方法的类。有许多具有类似功能的IDE...

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-23T21:13:20.453

`Goto symbol`is `Ctrl`- `R`(linux)，这会按定义顺序给出文件中所有符号和类定义的弹出列表，您可以跳转到您所追求的内容。`Goto Anything`您可以使用, `Ctrl`-执行相同的操作，`P`然后键入`@`方法名称。

此外，还有一个[Goto Symbol](https://github.com/gooli/Goto-Symbol)插件，通过键绑定或单击，您可以直接跳转到光标所在方法名称的定义。

但是，这两种方法都仅限于当前文件。如果您需要跳转到其他文件中的定义，最好的解决方案可能是[SublimeCodeIntel](https://github.com/SublimeCodeIntel/SublimeCodeIntel)插件。它似乎工作得很好，只需点击`Ctrl`- `f3`(linux) 就会以您想要的定义打开文件。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-30T04:37:13.997

另一种解决方案是**CTags**。

从Github 跟踪器上[未解决的问题](https://github.com/Kronuz/SublimeCodeIntel/issues)来看，SublimeCodeIntel 似乎有很多问题。它对我来说也崩溃了，可能是因为我正在处理的代码库太大......

我现在使用的是[CTags 包](https://github.com/SublimeText/CTags)。没有“智能”，但它可以让您非常轻松地跳转到定义并返回，而且速度非常快。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-25T18:48:59.377

升级到 sublime text 3，然后将光标放在函数名称上，然后单击 F12 返回 ALT+- 或从菜单中单击 Goto

# c# - 如何在asp.net中自动刷新的站点（浏览器）标题上显示其他用户的活动计数

> ID：10276342
> 
> 赞同：1
> 
> 时间：2012-04-23T07:18:50.433
> 
> 标签：c#, javascript, asp.net, html

如何在自动刷新的网站标题上显示用户的活动计数，如 Facebook、LinkedIn、StackOverflow 等。

例如，在linkedIn 中，我通常会在浏览器上看到以下标题，以表明在linkedIn 墙上更新了一项新活动。

```
(1) Imran Rizvi | Linkedin 
```

我正在寻找这个问题，但没有找到任何解决方案。

如果有人能让我知道如何做到这一点并采用最佳实践，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:22:09.930

您将不得不使用类似计时器的控件，该控件在 javascript setInterval 等固定间隔后调用 javascript 函数。在此函数中，您必须发送 ajax 调用并获取更新并使用 javascript 呈现更新

这是类似的问题[点击](https://stackoverflow.com/questions/4542863/jquery-ajax-call-with-timer)

这里有类似的功能可以实现asp.net ajax toolkit timer control [Timer ajax control](http://ajax.net-tutorials.com/controls/timer-control/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:33:33.263

这应该工作：

```
<asp:UpdatePanel runat="server" ID="UpdatePanel1">
        <ContentTemplate>
            <asp:Timer runat="server" ID="Timer1" Interval="5000" OnTick="Timer1_Tick">
            </asp:Timer>
        </ContentTemplate>
    </asp:UpdatePanel>

 protected void Timer1_Tick(object sender, EventArgs e)
 {
     //refresh page title
     Page.Title = "Title refreshed: " + DateTime.Now.ToLongTimeString();
 } 
```

# html - 无法让 2 个 CSS3 行为在 IE8 上同时工作

> ID：10276351
> 
> 赞同：1
> 
> 时间：2012-04-23T07:19:44.810
> 
> 标签：html, css, internet-explorer-8

我正在尝试使用 .htc 文件在 IE8 上获得 CSS3 行为

所以我在同一个元素上应用了两件事（圆角和渐变）

但由于某些原因，我无法让两种效果同时工作......应用了渐变，但没有应用圆角。如果我单独应用该类（即仅圆角或仅渐变），它会起作用。

[您可以在http://uiux.atwebpages.com/skeletal.html](http://uiux.atwebpages.com/skeletal.html)看到该页面 （参见课程/课程 divs）

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:43:42.553

如果不查看您的 CSS 代码就无法判断，但您的 CSS 中可能存在语法错误，导致其中一个失败。要确认这一点，请在失败的属性正下方添加一个属性，您应该会看到它没有效果。

编辑：这在 IE8 中不起作用，但它也不会导致我的 CSS 在 IE8 中中断。

```
border-radius: 10px; 
```

微软也有其专有的渐变工具：

```
filter:progid:DXImageTransform.Microsoft.gradient(...); 
```

但显示渐变的最佳方法是在 Photoshop 上绘制一个，然后将宽度剪切为 1px 并将该图像用作背景图像。

# ruby-on-rails - RailsTutorial 第 9 章：signin_path 是未定义的局部变量？电子邮件已被占用？

> ID：10276354
> 
> 赞同：1
> 
> 时间：2012-04-23T07:19:46.537
> 
> 标签：ruby-on-rails, railstutorial.org

我正在阅读 RailsTutorial，但我被困在第 9.3 章。当我尝试在 9.3 结束时运行套件测试时，Rspec 不断给我这些错误：

```
/Users/shaan/Sites/sample_app/spec/support/utilities.rb:15:in `sign_in': undefined local variable or method `signin_path' for #<Class:0x107759358> (NameError)

/Library/Ruby/Gems/1.8/gems/activerecord-3.2.3/lib/active_record/validations.rb:56:in `save!': Validation failed: Email has already been taken (ActiveRecord::RecordInvalid) 
```

首先我得到了最大的错误，然后再次运行了很多次测试，我不断地得到第二个错误。

以下是我的控制器路由和测试文件：

*   控制器： http: [//pastebin.com/vJdCxthQ](http://pastebin.com/vJdCxthQ)
*   测试： http: [//pastebin.com/SEVLd9Gg](http://pastebin.com/SEVLd9Gg)
*   路线： http: [//pastebin.com/7LjA5Any](http://pastebin.com/7LjA5Any)

实用程序.rb：

```
include ApplicationHelper

def full_title(page_title)
  base_title = "Ruby on Rails Tutorial Sample App"
  if page_title.empty?
    base_title
  else
    "#{base_title} | #{page_title}"
  end
end

def sign_in(user)
  visit signin_path
  fill_in "Email",    :with => user.email
  fill_in "Password", :with => user.password
  click_button "Sign in"
  # Sign in when not using Capybara as well.
  cookies[:remember_token] = user.remember_token
end 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:18:22.710

检查这一行

```
def sign_in(user)
visit signin_path
...
end 
```

`signin_path`似乎不正确。运行`rake routes`以获取正确的路径并将其替换为`signin_path`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T20:32:26.160

我也花了很长时间来寻找这个令人困惑的错误。就我而言，问题在于 Rails 版本之间的差异。尝试将“spec/requests”目录重命名为“features”

# php - 无法使用 php5 domdocument 加载网页内容

> ID：10276355
> 
> 赞同：-2
> 
> 时间：2012-04-23T07:19:57.353
> 
> 标签：php, parsing, dom, html-parsing, domdocument

```
<?php
    class parsedictionary {
        public function _process() {
            $webpage="http://www.oppapers.com/essays/Computerized-World/160871?read_essay";
            $doc=new DOMDocument();
            $doc->loadHTML($webpage);
            echo $doc;
        }
    }
    $obj=new parsedictionary();
    $obj->_process();
?> 
```

我无法获取该页面的内容。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
    <body>
        <p>http://www.oppapers.com/essays/Computerized-World/160871?read_essay</p>
    </body>
</html> 
```

但我需要获取该页面的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:24:21.403

The `DOMDocument` class is obviously not a string; you can iterate it, perform operations on it, but it can't just be echoed. Check the documentation to see what you can do with it: [http://www.php.net/domdocument](http://www.php.net/domdocument)

To get the page contents, you can either use `file_get_contents` or do `echo $doc->saveHTML()`

**Edit**: Didn't realize you had another problem in your code; you can just use this instead:

```
public function _process() {
    return file_get_contents('http://www.oppapers.com/essays/Computerized-World/160871?read_essay');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:57:18.173

```
<?php
    $doc->saveHTML();
?> 
```

奇迹般有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:27:11.037

好吧，在这种情况下，错误很明显。_process() 方法无法从一种数据类型转换为另一种数据类型，它需要 String 并且您为其提供 DomDocument。也许您应该首先尝试从 DomDocument 中提取所有文本作为字符串，然后将其发送到 _process() 方法。

# objective-c - 压缩巨大的png文件以在iphone游戏中使用

> ID：10276356
> 
> 赞同：3
> 
> 时间：2012-04-23T07:19:58.977
> 
> 标签：objective-c, ios, image, compression, png

我有一个背景文件，希望在当前 40mb 的 iphone 游戏中使用。这是一个 .png 文件，我想将其压缩到尽可能小的尺寸，而不会损失太多质量并且不会丢失 alpha 通道。只需将文件类型更改为 .jpg 文件，我就成功地更改了类似大文件的文件大小。但是，此图像没有任何透明度，据我所知，您无法将 .png 更改为 .jpg 而不会失去透明度。然而，也许我错了（如果我错了，请纠正我。）如果有办法压缩这个 .png 文件，请向我解释它是如何完成的。另外，请注意，这是一个相当大的文件，如果可能，最好在 5 小时或以下的时间范围内进行压缩。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:45:37.490

你是如何构建游戏的？如果您直接使用 OpenGL，并且对它提供的压缩感到满意，那么 PVR 是一种非常棒的格式，适用于更小且*非常*快速的图像。

[维基百科上的 PVRTC](http://en.wikipedia.org/wiki/PVRTC)

正如 keegan3d 所说，Xcode 使用 PNGCrush 重新压缩 PNG 图像。它更改字节顺序并预乘 alpha。这篇文章解释了会发生什么：[iPhone“优化”PNG](http://iphonedevelopment.blogspot.com.au/2008/10/iphone-optimized-pngs.html)

如果您启用 Xcode 的 PNG 压缩，那么您将看不到使用 PNG 压缩工具的任何好处：[PNG 压缩和 iOS 应用程序](http://bjango.com/articles/pngcompression/)

如果您只想禁用 Xcode 对一张图像的压缩（以便您可以使用备用压缩工具），我相信您可以将文件类型从 更改`image.png`为`file`，如下所述：[如何跳过压缩一个 PNG？](https://stackoverflow.com/questions/2051947/how-can-i-skip-compressing-one-png)

并且...请注意 RAM 的使用。JPEG 和 PNG 都将解压缩到相同的大小（假设它们没有 alpha）。40MB 相当大。你有其他绘制背景的方法吗？我曾开发过基于位图的位图 2048 x 2048 游戏区域的游戏。我们使用 PVR 和瓷砖。PVR 图像使用的 RAM 比 PNG 少，而且速度更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:50:30.537

Xcode 压缩 pngs，你应该看看图像在构建的应用程序中的实际大小。[使用ImageOptim](http://imageoptim.com/tweetbot.html)可以比 Xcode 更多地压缩图像，但它们在屏幕上显示的速度稍慢，这对于您的背景图像可能不是问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T23:05:03.343

在[我的基准测试](http://imageoptim.com/tweetbot.html)中，最小尺寸和最快加载 PNG 图像是使用[ImageAlpha](http://pngmini.com) / [pngquant](http://pngquant.org)创建的 PNG8+alpha 。

如果您的背景大多是平坦的或单色的（没有太多模糊/渐变），那么它看起来像 PNG8+alpha 一样好。

[您可以通过巧妙的方式](https://github.com/pornel/mediancut-posterizer)对 PNG24+alpha 图像进行分色来提高它们的可压缩性。

但是，40MB 的 PNG 图像仍然很大。如果它导致您的记忆问题，我不会感到惊讶。考虑将其拆分为较小的图块。

# c++ - 标准映射复合键

> ID：10276358
> 
> 赞同：3
> 
> 时间：2012-04-23T07:20:10.447
> 
> 标签：c++, stdmap

我对std::map 所需的*operator<()方法有疑问。*我使用结构作为复合键，如下所示：

```
struct MyKey {
  std::string string1;
  std::string string2;
  std::string string3;
  unsigned int uint1;

  friend bool operator<(const MyKey& mk1, const MyKey& mk2)
  {
    return mk1.string1 < mk2.string1 && mk1.string2 < mk2.string2 &&
           mk1.string3 < mk2.string3 && mk1.uint1 < mk2.uint1;
  }
} 
```

如前所述，我想使用具有 4 个值的复合键，但我不知道如何为*operator<*方法实现这一点。我观察到一次只存储 1 个值！

谁能告诉我正确的条件是什么样的？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T07:25:32.167

The Standard library's *associative containers* such as `std::map`, `std::set`, `std::multiset`, `std::multimap`, `std::bitset` require that the ordering of elements must follow [`Strict Weak Ordering`](http://en.wikipedia.org/wiki/Strict_weak_ordering), which means your implementation of `operator<` must follow [strict weak ordering](http://en.wikipedia.org/wiki/Strict_weak_ordering). So one implementation could be this:

```
friend bool operator<(const MyKey& mk1, const MyKey& mk2)
{
  if (mk1.string1 != mk2.string1 )
       return mk1.string1 < mk2.string1;

  else if ( mk1.string2 != mk2.string2)
       return mk1.string2 < mk2.string2;

  else if (mk1.string3 != mk2.string3)
       return  mk1.string3 < mk2.string3;

  else
       return mk1.uint1 < mk2.uint1;
} 
```

Or you can implement it as:

```
friend bool operator<(const MyKey& mk1, const MyKey& mk2)
{
  auto const & t1 = std::tie(mk1.string1, mk1.string2, mk1.string3, mk1.uint1);
  auto const & t2 = std::tie(mk2.string1, mk2.string2, mk2.string3, mk2.uint1);
  return t1 < t2;
} 
```

In this solution, [`std::tie`](http://en.cppreference.com/w/cpp/utility/tuple/tie) function creates two tuples `t1` and `t1` of the references of the arguments passed to it, and then compare `t1` and `t2` using overloaded `operator<` for `std::tuple` instead. The [operator<](http://en.cppreference.com/w/cpp/utility/tuple/operator_cmp) for tuple compares the elements lexicographically — strict-weak ordering is achieved..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:46:17.200

您的实施的问题是它不稳定，请考虑...

```
return mk1.string1 < mk2.string1 && mk1.string2 < mk2.string2 &&
       mk1.string3 < mk2.string3 && mk1.uint1 < mk2.uint1; 
```

...评估`{ "a", "a", "a", 1 } < { "a", "b", "a", 1 }`= `a<a && ...`= `false && ...`=`false`

...但是`{ "a", "b", "a", 1 } < { "a", "a", "a", 1 }`= `a<a && ...`= `false && ...`=`false`

因此，尽管它们在`map`.

一个可行的解决方案：每个必要的字符串比较只进行一次是简洁而高效的......

```
friend bool operator<(const MyKey& mk1, const MyKey& mk2)
{
    int x;
    return (x = mk1.string1.compare(mk2.string1)) ? x < 0 :
           (x = mk1.string2.compare(mk2.string2)) ? x < 0 :
           (x = mk1.string3.compare(mk2.string3)) ? x < 0 :
           mk1.uint1 < mk2.uint1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T07:28:58.443

我认为您的问题在于 operator< 不一定实现严格的弱排序。`A<B`where和 is false的组合太多了`B<A`， where`A`和`B`are`MyKey`对象。这被解释为`A`等于`B`。

# javascript - 获取由 css column-width 创建的列数

> ID：10276359
> 
> 赞同：8
> 
> 时间：2012-04-23T07:20:14.770
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [如何在 Javascript 中获取 css3 多列计数](https://stackoverflow.com/questions/6989306/how-to-get-css3-multi-column-count-in-javascript)

我有一个很长的动态文本，将使用 CSS 将其拆分为列

```
div
{
    -moz-column-width: 500px;
    -moz-column-gap: 20px;
} 
```

是否可以获得创建了多少列？我在客户端使用 jQuery。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T18:22:43.697

您的问题和小提琴忽略了供应商前缀；larssin 的回答是一个很好的方向，但并不完整。

我为您创建了一个小型辅助函数，它遍历当前为这些值实现的前缀，获取实际值`.css()`并返回正确的数字。跨浏览器工作，包括总是返回 1 的不支持浏览器。

我选择忽略 iframe 案例，这只会让事情变得更复杂，但据我所知，这与您的问题没有直接关系。

**更新：**现在考虑边框和填充。

[jsFiddle](http://jsfiddle.net/Ronny/BXaCs/)和这里​​的代码：

```
function getColumnsNumber(el){
    var $el = $(el),
        width = $el.innerWidth(),
        paddingLeft, paddingRight, columnWidth, columnGap, columnsNumber;

    paddingLeft = parseInt( $el.css('padding-left'), 10 );
    paddingRight = parseInt( $el.css('padding-right'), 10 );

    $.each(['-webkit-','-moz-',''], function(i, prefix){
        var _width = parseInt( $el.css(prefix+'column-width'), 10 );
        var _gap =   parseInt( $el.css(prefix+'column-gap'), 10 );
        if (!isNaN(_width)) columnWidth = _width;
        if (!isNaN(_gap))   columnGap = _gap;
    });

    columnsNumber = Math.floor( (width - paddingLeft - paddingRight) / (columnWidth + columnGap) );
    if (isNaN(columnsNumber) || columnsNumber < 1) columnsNumber = 1;
    return columnsNumber;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:57:10.503

如果列在不同的元素中，您可以使用 $(selector).length (http://api.jquery.com/length/) 获取子元素的数量。不确定我是否正确理解了您的问题，但希望对您有所帮助。

一个例子：

```
<div id="myText">
    <div class="column">some text...</div>
    <div class="column">some text...</div>
    <div class="column">some text...</div>
</div>

var columns = $('#myText').length;
    /* or */
var columns = $('.column').length; 
```

## 更新：

好的，我查看了您的 jsfiddle 示例，并认为您可以使用 $('#test').width() 获得 iframe 的结果宽度，然后计算列数：

```
var width = $('#test').width();
var columns = width/(columnWidth+columnsGap); 
```

# ios - 在 MonoTouch 中加载一堆 PNG 图像的内存压力

> ID：10276361
> 
> 赞同：2
> 
> 时间：2012-04-23T07:20:31.980
> 
> 标签：ios, memory-management, xamarin.ios, uiimage, profiling

我有一个 MonoTouch 应用程序，它每 1/12 秒加载一个帧。我正在使用 UIkit，而不是 opengl。我有一个`UIImage`进入视图，并使用背景任务加载图像。

一切正常，但一分钟后（或多或少），应用程序停止，跟踪器给我一个“低内存压力”

它在模拟器中运行良好，没有问题。我正在查看分析器，似乎内存已被处理，但是当我在 iPad 上尝试时.... :(

我使用`image.Dispose()`. 我在内存中有 2 张图像，显示其中一张，然后释放旧的。这种行为没问题，因为我在 Windows Phone 上有相同的逻辑并且它工作正常。

我试过不使用 backgroundTask，直接从主线程加载图像。它给了我更多的时间！！！如果我使用 backgroundTask，应用程序会运行 30 秒然后退出。如果我不使用 backgroundTask，它会持续 1 分钟。

我不知道该怎么办！！！！任何人都可以帮助我吗？

谢谢！！！

Texture2D.FromStream 它只是 UIImage.FromFile 的包装器

这是后台工作者：

```
 void LoadTextureInBackground()
    {
        if (currentMovie == null) return;

        DateTime timeOnstart = DateTime.Now;

        // Mantenemos 2 texturas en memoria para no cargar sobre el mismo objeto texture.
        string fileName = currentMovie.GetFileName();

        if (lastFileName == fileName) return;

        textureLoaded[currentTexture] = Texture2D.FromStream(Device.GraphicsDevice, fileName);

        texture = textureLoaded[currentTexture];

        currentTexture = 1 - currentTexture;

        lastFileName = fileName;

        GC.Collect();
        System.Threading.Thread.Sleep(50);
    } 
```

这是绘制方法：

```
 /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    public void Draw(TimeSpan totalTime,TimeSpan elapsedTime)
    {
        if(currentMovie==null) return;

       // Mantenemos 2 texturas en memoria para no cargar sobre el mismo objeto texture.

        if (texture == null) return;

        int newWidth = (int)(texture.Width*RenderSize);
        int newHeight = (int)(texture.Height*RenderSize);

        Texture2D drawTexture = texture;

        // Al cargar usando Texture2D.FromStream, la textura NO lleva elAlpha premultiplicado

        //Device.SpriteBatch.Draw(drawTexture, destination, Color.White);
        if(CultTravel.AppDelegate.ImagePng.Image!=drawTexture.Texture)
        {
            AppDelegate.ImagePng.Image=drawTexture.Texture;
            AppDelegate.ImagePng.Frame=new System.Drawing.RectangleF(0,480-newHeight,ImagePng.Image.CGImage.Width,newHeight);

        // Si la textura que tengo cargada y lista para mostrar es diferente a la que mostraba, libero la antigua
        if (lastTextureDraw!=null && lastTextureDraw != texture)
        {
            lastTextureDraw.Dispose();
        }

        lastTextureDraw = texture;

    } 
```

注意：我刚刚解决了这个问题，但是我必须禁用后台工作程序，在 Draw 方法中添加加载代码并在主线程中添加 GC.Collect：

```
 if (lastTextureDraw!=null && lastTextureDraw != texture)
        {
            lastTextureDraw.Dispose();
            // I MUST ADD THIS TO WORK AND DISABLE THE BACKGROUND TASK!!
            GC.Collect();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:18:32.757

我刚刚解决了这个问题，但是我必须禁用后台工作程序，在 Draw 方法中添加加载代码并在主线程中添加 GC.Collect：

```
 if (lastTextureDraw!=null && lastTextureDraw != texture)
    {
        lastTextureDraw.Dispose();
        // I MUST ADD THIS TO WORK AND DISABLE THE BACKGROUND TASK!!
        GC.Collect();
    } 
```

因此，在使用线程时出现了问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:05:27.127

> 它在模拟器中运行良好，没有问题。

这不是**模拟器**，而是**模拟器**。因此，它不会尝试模仿特定设备，包括它的内存限制。IOW iOS 模拟器可以访问比 iPad**更多的**内存（第一代 256MB，第二代 512MB，第三代 1GB）。

> 我在看分析器

哪一个 ？MonoDevelop 的 HeapShot 还是 Apple 的 Instruments？

> 我使用 image.Dipose() 释放内存。

这是一个好主意 - 但它*只能*在托管方面起作用。例如，某些 API 将缓存图像，该内存不会显示在 HeapShot 上，因为它不是托管内存（它是本机分配的内存）。您将有更好的机会使用 Apple 的 Instruments 进行跟踪。

它也可能是别的东西......这意味着，就像@Jonathan.Peppers 所问的那样，看看你如何加载图像可以帮助我们找出问题所在。

# c - 运行时线程创建

> ID：10276362
> 
> 赞同：-2
> 
> 时间：2012-04-23T07:20:32.897
> 
> 标签：c, multithreading

在运行时，如何创建线程？

我将从标准输入——终端——获取线程数，然后根据这个数字创建线程。但是，如何？

```
Ex: 
   input : N,                N is integer 

   in main function 

                create N thread 
```

编辑：平台Linux

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:32:01.683

是的，线程（如果我们假设我们正在使用 pthreads）是通过调用**pthread_create**创建的，您可以从循环中调用它。

这是创建 N 个线程的 C 函数的开始：

```
int start_N_threads(int N) {
    pthread_t threads[N];
    printf("Starting %d thread(s)...\n", N);
    for (int i = 0; i < N; ++i) {
        if (pthread_create(&threads[i], NULL, thread_body, (void*)&results[i]) != 0) {
            printf("Couldn't create thread %d.\n", i);
        }
    }
    printf("The %d thread(s) are running.\n", N); 
```

# ruby-on-rails - 没有哈希的骨干网？

> ID：10276371
> 
> 赞同：1
> 
> 时间：2012-04-23T07:20:54.597
> 
> 标签：ruby-on-rails, backbone.js

我想我正试图以一种意想不到的方式使用 Backbone，但我真的找不到太多关于它的东西。基本上我有一个提供视图的 Rails 应用程序。我想保持常规导航（如页面重新加载），但让主干查看路线并在该页面上设置模板的某些部分，处理模型以及所有这些好东西。所以基本上我使用 Backbone 来处理我所有复杂的 javascript，而不是使其成为“单页应用程序”。启用 PushState 会破坏我在旧浏览器中的绝对路径吗？例如：“http://localhost:3000/projects”匹配路由“projects”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:33:21.450

PushState 在 IE6 等旧浏览器中不起作用，但您可以使用不同的技术，例如您可以使用 jQuery 选择器并检查您是否在特定页面上：

```
if ($('#login-page').length > 0) {
  // we're on the login page
  // ..initialize login page related backbone collections and views
} 
```

..或者您可以使用数据属性将动作/控制器名称存储在html中的某处：`<body data-action="edit" data-controller="post">`并在javascript`va4 $body = $('body'); if ($body.data('action') == 'edit' && $body.data('controller') == 'posts') {}`等中检查它。

..或者您可以为每个动作/控制器对拥有单独的 js 文件，并根据需要包含它。

# javascript - 替代 SVG 的 flowRegion

> ID：10276372
> 
> 赞同：2
> 
> 时间：2012-04-23T07:20:59.743
> 
> 标签：javascript, html, browser, svg, wysiwyg

我想设计一个浏览器内图形（所见即所得）编辑器，可以处理多行文本框和类似列的行为。

我的第一个想法是使用 SVG，我可以与它的 DOM 树进行交互并对其进行操作，最后导出它的 SVG 代码并使用`<flowRoot>`,`<flowRegion>`等`<flowPara>`，然后我开始明白这些功能是 SVG 1.2 规范的一部分并且不受支持浏览器，但只有少数 SVG 渲染器，如 Inkscape，这让我回到了绘图板上。（我把最新版的[svg-edit修改](http://code.google.com/p/svg-edit/)为test-drive然后得出这个结论）

在后端服务器级别 - 我希望能够将其转换为 PDF，这可以使用 SVG、Postscript、PDF (duh) 和其他格式轻松完成。

HTML5 的 Canvas API 不是一个选项，因为它仅限于光栅图像，这将大大降低内容的质量。

你会推荐什么设计方法？

# stream - 使用 vlc-vlm 进行端口转发

> ID：10276373
> 
> 赞同：1
> 
> 时间：2012-04-23T07:21:04.137
> 
> 标签：stream, streaming, vlc, portforwarding

我正在尝试使用 VLC 和 VLM 管理器制作音乐流媒体服务器。我面临的问题如下：我有一个只能从端口和 IP 读取的客户端（例如[http://192.168.0.1:8080](http://192.168.0.1:8080)）

vlm 为流提供的设置采用 ip、端口和文件名的形式（例如[http://192.168.0.1:8080/track.mp3](http://192.168.0.1:8080/track.mp3)）

是否可以将流重定向到另一个端口？（没有文件名）以便我的客户可以连接到它？

将流放在端口上，阻止与 vlm 与流的交互

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:18:23.990

如果您使用例如在 VLM 中设置流。

`new channel1 broadcast enabled
setup channel1 input 'file:///D:/music/artist/album/track.mp3'
setup channel1 output #standard{access=http,mux=ogg,dst=192.168.1.100:8586}
control channel1 play`

您可以通过连接到[http://192.168.1.100:8586](http://192.168.1.100:8586)
使用播放器读取流 。​​当然，您可以将 IP 和端口更改为您自己的值。
希望有帮助

# r - 使用 R 的灰度到二值图像

> ID：10276384
> 
> 赞同：4
> 
> 时间：2012-04-23T07:22:05.890
> 
> 标签：r

是否有任何 R 函数可以将灰度图像转换为二值图像。有一个可以从 RGB 转换为灰色，但我想将灰色转换为二进制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T13:16:11.607

这称为阈值化或二值化。根据我的经验，最强大的是[自适应阈值](http://homepages.inf.ed.ac.uk/rbf/HIPR2/adpthrsh.htm)。这是`EBImage`作为`thresh`方法实现的

```
x = readImage(system.file('images', 'nuclei.tif', package='EBImage'))
如果（交互式（））显示（x）
y = thresh(x, 10, 10, 0.05)
如果（交互式（））显示（y）

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:37:20.103

你没有说你的数据是什么类或“typeof”，所以我将在一个简单的案例中提供一个答案。假设您的图像是一个整数数组。对于 9 位灰度图像，这些整数的范围从 0 到 512。您需要确定二进制图像中 0 与 1 的截止点是什么。然后

`bin_image <- round(grey_image/max(grey_image),0)`

应该这样做。如果您的数据范围从 0 到 1，请执行类似操作，但调整舍入参数。编辑：哎呀，我遗漏了截止级别的选择。替换`max(grey_image)`为在半最大值处切割的位置，`K*max(grey_image)`以切割更高和更低。`K = 1``K>1``K<1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:09:17.470

EBImage Bioconductor 包是在[R](http://www.bioconductor.org/packages/2.10/bioc/html/EBImage.html)中执行图像分析的便捷工具。从包的 Vignette 中获取的基本示例：

```
lena = readImage(system.file("images", "lena.gif", package="EBImage"))
display(lena>0.5) 
```

# blackberry - 如何从列表字段复选框中获取多个选定的列表项并添加到黑莓中的数组列表中

> ID：10276388
> 
> 赞同：1
> 
> 时间：2012-04-23T07:22:16.620
> 
> 标签：blackberry, blackberry-jde, listfield

请任何人帮助我从列表字段复选框中获取选定的列表项，并将它们添加到数组列表中。如果可能，也提供任何有用的链接。到目前为止，这是我的代码（我是黑莓应用程序开发的新手）。请帮忙。

```
package mypackage;
import java.util.Vector;
import net.rim.device.api.system.Characters;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.MenuItem;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;
import net.rim.device.api.ui.component.Menu;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.util.IntVector;

/**
 * A class extending the MainScreen class, which provides default standard
 * behavior for BlackBerry GUI applications.
 */
public final class MyScreen extends MainScreen implements ListFieldCallback
{
    private Vector _listData = new Vector();
    private Vector _checkedData = new Vector();
    private ListField listField;
    private static final String[] _elements = {"First element", "Second element","Third element"
    };
    //private static final String[] _elements1 = {"hai","welcome","where r u"
    //};
    private MenuItem _getDataMenu,selectall,Delete;
    Vector result = new Vector();
    protected void makeMenu(Menu menu, int instance)
    {
        menu.add(_getDataMenu);
        menu.add(selectall);
        menu.add(Delete);
        //Create the default menu.
        super.makeMenu(menu, instance);
    }

    private class ChecklistData
    {
        private String _stringVal;
        private boolean _checked;

        ChecklistData(String stringVal, boolean checked)
        {
            _stringVal = stringVal;
            _checked = checked;
        }

        //Get/set methods.
        private String getStringVal()
        {
            return _stringVal;
        }

        private boolean isChecked()
        {
            return _checked;
        }
        //Toggle the checked status.
        private void toggleChecked()
        {
            _checked = !_checked;
        }

    }
    public Vector getCheckedItems() {      
        return _checkedData;   
    } 

    /**
     * Creates a new MyScreen object
     */
    public MyScreen()
    {    

        // Set the displayed title of the screen       
        setTitle("MyTitle");

        VerticalFieldManager main = new VerticalFieldManager(VerticalFieldManager.USE_ALL_HEIGHT|
                VerticalFieldManager.USE_ALL_WIDTH|VerticalFieldManager.VERTICAL_SCROLL);
        this.add(main);
        HorizontalFieldManager hfm = new HorizontalFieldManager();
        main.add(hfm);
        listField = new ListField(){
            //Allow the space bar to toggle the status of the selected row.
            protected boolean keyChar(char key, int status, int time)
            {

                boolean retVal = false;

                //If the spacebar was pressed...
                if (key == Characters.SPACE)
                {
                    //Get the index of the selected row.
                    int index = getSelectedIndex();

                    //Get the ChecklistData for this row.
                    ChecklistData data = (ChecklistData)_listData.elementAt(index);

                    //Toggle its status.
                    data.toggleChecked();

                    //Update the Vector with the new ChecklistData.
                    _listData.setElementAt(data, index);

                    //Invalidate the modified row of the ListField.
                    invalidate(index);

                    //Consume this keyChar (key pressed).
                    retVal = true;
                }
                return retVal;
            }
        };

        listField.setCallback(this);

        reloadList();
        int elementLength = _elements.length;
        for(int count = 0; count < elementLength; ++count)
        {
            _listData.addElement(new ChecklistData(_elements[count], false));
            //_listData.addElement(new ChecklistData(_elements1[count], false));
            listField.insert(count);
        }

        main.add(listField);
        _getDataMenu =new MenuItem("Get Data", 200, 10) {
            public void run(){
                int index = listField.getSelectedIndex();   
                ChecklistData data = (ChecklistData)_listData.elementAt(index); 

                String message = "Selected data: " + data.getStringVal() + ", and status: " + data.isChecked();
                //Dialog.alert(message);       
                // get all the checked data indices   
                IntVector selectedIndex = new IntVector(0, 1);     
                //ChecklistData data;   
                for (int i=0;i<_listData.size();i++) {         
                    data = (ChecklistData)_listData.elementAt(i);
                    if(data.isChecked()) {    
                        selectedIndex.addElement(i);  
                        String selectedvalues = data.getStringVal();
                        System.out.println("Selected items are:"+selectedvalues);
                    }    
                }   
                data = null;   

                // now selectedIndex will contain all the checked data indices.
                //String message = "Selected data: " + data.getStringVal() + ", and status: " + data.isChecked();

            }
        };

        selectall = new MenuItem("Selectall", 200, 10){
            public void run(){

                int elementLength = _elements.length;
                for(int count = 0; count < elementLength; ++count)
                {
                    _listData.setElementAt(new ChecklistData(_elements[count], true), count);

                }
            }
        };
        Delete = new MenuItem("Delete", 200, 10){
            public void run(){
                int index = listField.getSelectedIndex();
                _listData.removeElementAt(index);

                // update the view
                listField.delete(index);
                listField.invalidate(index);
            }

        };

    }
    private void reloadList() {
        // TODO Auto-generated method stub
        _listData.setSize(_listData.size());
    }
    public void drawListRow(ListField list, Graphics graphics, int index, int y, int w) 
    {
        ChecklistData currentRow = (ChecklistData)this.get(list, index); 
        StringBuffer rowString = new StringBuffer();

        if (currentRow.isChecked())
        {
            rowString.append(Characters.BALLOT_BOX_WITH_CHECK);

        }
        else
        {
            rowString.append(Characters.BALLOT_BOX);
        }
        //Append a couple spaces and the row's text.
        rowString.append(Characters.SPACE);
        rowString.append(Characters.SPACE);
        rowString.append(currentRow.getStringVal());

        //Draw the text.
        graphics.drawText(rowString.toString(), 0, y, 0, w);
        /*if (currentRow.isChecked()) {   
            if( -1 ==_checkedData.indexOf(currentRow))     
                _checkedData.addElement(currentRow);   
            rowString.append(Characters.BALLOT_BOX_WITH_CHECK); 
        } 
        else {  
            if( -1 !=_checkedData.indexOf(currentRow))    
                _checkedData.removeElement(currentRow);  
            rowString.append(Characters.BALLOT_BOX);
        } */
    }
    //Returns the object at the specified index.
    public Object get(ListField list, int index) 
    {

        return _listData.elementAt(index);
    }
    public int indexOfList(ListField list, String p, int s) 

    {
        //return listElements.getSelectedIndex();
        return _listData.indexOf(p, s);
    }
    //Returns the screen width so the list uses the entire screen width.
    public int getPreferredWidth(ListField list) 
    {
        return Display.getWidth();
    }

    protected boolean navigationClick(int status, int time) {
        int index1 = listField.getSelectedIndex();
        /*System.out.println("Selected item index:"+index1);
        //int[] list =listField.getSelection();
        //String s = Integer.toString(list);
        System.out.println(" items are:"+_elements[index1]);
        //ChecklistData data = (ChecklistData)_listData.elementAt(index1);*/

        //Get the ChecklistData for this row.
        ChecklistData data = (ChecklistData)_listData.elementAt(index1);
        String message = "Selected data: " + data.getStringVal() + ", and status: " + data.isChecked();
        System.out.println("message is:"+message);

        //Toggle its status.
        data.toggleChecked();

        //Update the Vector with the new ChecklistData.
        _listData.setElementAt(data, index1);

        //Invalidate the modified row of the ListField.
        listField.invalidate(index1);

        return true;
    }

} 
```

# ms-access - 从 2 个表中选择

> ID：10276392
> 
> 赞同：0
> 
> 时间：2012-04-23T07:22:40.810
> 
> 标签：ms-access, select, ms-access-2007

我有 2 个表，第一个表名为 Ticket

**票**

```
ID
Subject
Owner 
```

第二张桌子是

**TicketLinkedNames**

```
ID
TicketID
ContactID
LinkedReason 
```

从上面的结构中，您了解到我可以将表格票证与其他一些名称链接，因此当我输入票证表格时，我可以在与此票证关联的所有链接名称下方的网格中看到。这里还好吗？

我的主要问题是我有一个主要表格，我想显示所有者是某个联系人的所有票证，以及该联系人在其他票证中显示为链接名称的所有票证.. 按唯一记录将它们分类并显示他们。我真的很困惑我应该使用什么样的选择查询，我尝试了几种：

```
Select * from Ticket,TicketLinkedNames where Owner=ContactID 
```

但返回错误的记录。我有使用`inner join`之间`ID=TicketID`但也返回错误的记录。

我真的很困惑，如果有人可以帮助我，我将不胜感激。

我正在使用 Microsoft Access 2007。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:19:24.580

make 2 selects

**SUB select1:** select distinct from table Ticket for the owner that not contained in TicketLinkedNames

**SUB Select2:** select distinct from table TicketLinkedNames for the owner

then make a union between the 2

then you got the solution

# javascript - XML DOM 和 javascript

> ID：10276393
> 
> 赞同：0
> 
> 时间：2012-04-23T07:22:53.617
> 
> 标签：javascript, xmlhttprequest, xmldom

执行以下代码时出现子节点未定义错误。我究竟做错了什么？另外，有没有更好的方法来实现这一点？

```
 var xmlhttp;

   if (window.XMLHttpRequest)
   {// code fop=new XMLHr IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
   }
   xmlhttp.onreadystatechange=function()
   {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         //document.getElementById("myDiv").innerHTML += xmlhttp.responseText;
         if (window.DOMParser)
         {
           parser=new DOMParser();
           xmlDoc=parser.parseFromString(xmlhttp.responseText,"text/xml");

                       var x=xmlDoc.getElementsByTagName("STATUS");
        if(x[0].childNodes[0].wholeText == "notLoggedIn")
         {
            window.location='login.html';
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:50:22.603

最后四行代码必须变成如下：

```
try {
    if(x[0].childNodes[0].wholeText == "notLoggedIn") {
        window.location='login.html';
    }
} catch(e) {
    // handle your error here
} 
```

# c - 检查是否已为特定接口卸载 TCP 分段

> ID：10276396
> 
> 赞同：2
> 
> 时间：2012-04-23T07:23:04.293
> 
> 标签：c, linux, kernel, nic

我知道我们可以通过 ethtool 检查 TCP 分段是否已卸载。但我需要从我自己的代码中获取这些信息。最简单的方法是什么？有没有我可以检查的标志？

谢谢 Supreeth

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:00:13.373

您可以使用与`ioctl()`ethtool 相同的调用。只需查看 ethtool 的源代码即可了解它是如何工作的：

```
struct ethtool_value eval;

eval.cmd = ETHTOOL_GGSO;
ifr->ifr_data = (caddr_t)&eval;
err = ioctl(fd, SIOCETHTOOL, ifr);
if (err)
        perror("Cannot get device generic segmentation offload settings");
else {
        gso = eval.data;
        allfail = 0;
} 
```

# c# - 删除查询中的重复代码

> ID：10276400
> 
> 赞同：2
> 
> 时间：2012-04-23T07:23:19.040
> 
> 标签：c#, linq, linq-to-sql, c#-4.0, datacontext

我有这个代码：

```
list = _dataContext.myTable
    .Where(row => row.Label.Contains(myText))
    .OrderBy(row => row.Label)
    .Select(row => new MyClass
    {
        Field1 = row.Field1,
        Field2 = row.Field2,
        Field3 = row.Field3
    }).ToList<IMyClass>();

list = _dataContext.myTable
    .OrderBy(row => row.Label)
    .Select(row => new MyClass
    {
        Field1 = row.Field1,
        Field2 = row.Field2,
        Field3 = row.Field3
    }).ToList<IMyClass>(); 
```

如您所见，我有重复的代码。然后我这样做：

```
private List<IMyClass> CreateObject(IOrderedQueryable<myTable> list)
{
    return list.Select(row => new MyClass
    {
        Field1 = row.Field1,
        Field2 = row.Field2,
        Field3 = row.Field3
    }).ToList<IMyClass>();            
}

result = _dataContext.myTable
    .Where(row => row.Label.Contains(myText))
    .OrderBy(row => row.Label);
var finalList = CreateObject(result); 
```

当我这样做时，“Linq 2 SQL profiler”给了我这个警告：

> 在多线程中使用单个数据上下文可能是一个错误。

我只有在使用该`CreateObject`方法时才有这个

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:40:42.433

看起来你让事情变得比他们需要的更复杂。你可能会更好地做这样的事情：

```
// If suspendFilterByMyText is true, the Where() call will always return true.
bool suspendFilterByMyText = true;
list = _dataContext.myTable
    .Where(row => (suspendFilterByMyText || row.Label.Contains(myText)))
    .OrderBy(row => row.Label)
    .Select(row => new MyClass
    {
        Field1 = row.Field1,
        Field2 = row.Field2,
        Field3 = row.Field3
    }).ToList<IMyClass>(); 
```

这种方法在这两种情况下都适用；你只需要`suspendFilterByMyText`适当地设置。将其包装在一个方法中，您只需编写一次此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:46:37.337

```
using a single data context in multiple thread is likely a bug. 
```

这只是警告而不是错误，这是正确的。因为 linq 查询仅在您使用结果或在 linq 查询上调用 ToList 或 ToArray 等方法时运行。

`CreateObject`因此，在您的情况下，当您调用DataContext 时，将在您的方法中访问它`.ToList()`。

您可以简单地忽略警告，否则您必须保持代码重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:15:19.410

请参考以下链接， http: [//l2sprof.com/Learn/Alerts/CrossThreadSessionUsage](http://l2sprof.com/Learn/Alerts/CrossThreadSessionUsage)

它说“Linq to Sql Profiler 检测到一个数据上下文在与打开它的线程不同的线程中使用。” 但是您解释的代码没有线程上下文，您是否遗漏了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T07:33:53.963

嗯，有这个：

[http://l2sprof.com/Learn/Alerts/CrossThreadSessionUsage](http://l2sprof.com/Learn/Alerts/CrossThreadSessionUsage)

简单地说; 如果您在其中声明和访问这些方法的类正确同步，则可以忽略此消息。_dataContext 对您的程序集是全局的还是在您的类中定义的？你确定你的方法是按照你期望的顺序调用的吗？

# asp.net - 与网络相关或特定于实例的错误 仅在 ASP.NET 中

> ID：10276401
> 
> 赞同：2
> 
> 时间：2012-04-23T07:23:21.480
> 
> 标签：asp.net, sql

我收到“与 SQL Server 建立连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）”连接仅抛出 ASP.NET 时出错。**如果我尝试连接 Windows 应用程序，我可以连接和检索值。** 我找不到任何解决方案谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:22:43.953

有时最简单的事情可能是最难发现的。我会检查以确保在提供给 ASP.NET 应用程序的 SQL Server 名称中不存在任何简单的错字。确保该值确实与提供给 Windows 应用程序的值匹配。

如果名称被验证正确，那么我将确保来自 ASP.NET 应用程序的出站连接不会无意中尝试通过代理服务器。

# wcf - dot.net3.5 中带有附件的肥皂

> ID：10276405
> 
> 赞同：3
> 
> 时间：2012-04-23T07:23:36.910
> 
> 标签：wcf, soap, httpwebrequest

如何在 C# .net3.5 中发布肥皂机智附件？我是 .net 的新手，我在某处读到该框架不处理 SWA，它全部通过 WCF 服务完成。有没有人有如何发布带有附件的 SOAP 的示例代码？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:24:40.937

WCF 中有一个[用于 SWA 支持的 codeplex 项目](http://wcfswaencoder.codeplex.com/)。

顺便提一句。如果您只搜索 WCF SWA，它就是 Google 中的第一个链接！！！

# android - Onclick Listeners in Android

> ID：10276410
> 
> 赞同：0
> 
> 时间：2012-04-23T07:24:17.103
> 
> 标签：android

assume that i have three buttons all of whose listeners point to (this) . So if I press any of the button is it going to start from the beginning of the activity, irrespective of the button pressed?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:26:12.843

No, it will go on override method `onClick()` of your Activity.

```
listeners point to (this) 
```

you must have to implements onClickListener to your activity which will override `onClick()`

To verify which view had been clicked, you have to do something like

```
@Override
public void onClick(View v)
{
    if(v== controlName)
       // controlName is clicked
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:40:14.723

您可以做的是使用开关盒并了解单击的按钮是什么。

尝试这个：

```
class stuff extends Activity implements onClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Button button1 = (Button) findViewById(R.id.button1);
        Button button2 = (Button) findViewById(R.id.button2);
        Button button3 = (Button) findViewById(R.id.button3);

        button1.setOnClickListener(this);
        button2.setOnClickListener(this); 
        button3.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button1:
             // do something
             break;
        case R.id.button2:
             // do something else
             break;
        case R.id.button3:
             // do yet another thing
             break;
        default:
            // do nothing
            break;
        }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T07:36:02.927

令人困惑的问题...

无论如何，这里有一个监听器示例。

```
public class MyClass extends Activity {
   private Button firstBtn;
   private Button secondBtn;
   private Button thirdBtn;

   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    firstBtn  = (Button) findViewById(R.id.firstBtn);
    secondBtn = (Button) findViewById(R.id.secondBtn);
    thirdBtn  = (Button) findViewById(R.id.thirdBtn); 

    firstBtn.setOnClickListener(new OnClickListener()
    {           
        public void onClick(View v)
        {
            Log.d("MyClass", "first button clicked!");
        }
    });

    secondBtn.setOnClickListener(new OnClickListener()
    {           
        public void onClick(View v)
        {
            Log.d("MyClass", "second button clicked!");
        }
    });

    thirdBtn.setOnClickListener(new OnClickListener()
    {           
        public void onClick(View v)
        {
            Log.d("MyClass", "third button clicked!");
        }
    });
   } 
```

}

希望能帮助到你。干杯

# java - 执行 web 服务的问题

> ID：10276414
> 
> 赞同：0
> 
> 时间：2012-04-23T07:24:34.237
> 
> 标签：java, web-services, jax-ws

我正在使用 java 中的 web 服务，当我使用客户端调用我的服务时，我得到了 java.lang.outOfMemoryError。我的 Web 服务客户端将是 flex 代码，详细错误消息如下所示

```
12:14:00,879 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].
[/SQLAppWeb].[SQLMobileAppWebServices]] Servlet.service() for servlet SQLMobileAppWebServices threw exception: 
java.lang.OutOfMemoryError: Java heap space at com.sun.xml.bind.v2.runtime.output.Encoded.ensureSize(Encoded.java:61) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:33:47.017

网络上有大量关于处理`OutOfMemoryError`s 的信息。例如，请参阅[“Java 性能调优”](http://www.javaperformancetuning.com/news/qotm036.shtml)或[mindprod.com 上的 Java 词汇表](http://mindprod.com/jgloss/runerrormessages.html#OUTOFMEMORYERROR)。我怀疑在您输入自己的问题时也建议了几个[相关的 SO 问题。](https://stackoverflow.com/search?q=java%20outofmemoryerror)如果您有特定问题，请在您的问题中更具体。否则，这将是任何人都能够给予的尽可能多的帮助。

# c# - 将字符串返回到自定义对象类型

> ID：10276415
> 
> 赞同：2
> 
> 时间：2012-04-23T07:24:45.933
> 
> 标签：c#, .net, json, web-services, rest

我正在尝试编写一个 C# RESTful Web 服务，它在将帐号作为参数传递时返回客户名称。

*我有一个客户类：*

```
public class Customer_T
{
    public string CustName { get; set; }
} 
```

*一个接口类：*

```
[ServiceContract(Namespace = "", Name = "CustomerInfoService")]
public interface CustomerInfo_I
{
    [OperationContract]
    Customer_T CustName(string accountno);
} 
```

*另一个名为 CustomerInfo 的类实现了 CustomerInfo_I 接口：*

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class CustomerInfo : CustomerInfo_I
{
    [WebInvoke(Method = "GET", UriTemplate = "customer/{accountno}", ResponseFormat = WebMessageFormat.Json)]
    public Customer_T CustName(string accountno)
    {
        string custName = "";
        CustNameByAccountNo custdb = new CustNameByAccountNo();
        custName = custdb.getCustName(accountno).ToString();
        if (custName.Equals("") == false)
        {
            return new Customer_T { CustName = custName };
        }
        else
        {
            return null; //This is where I want to change
        }
    }
} 
```

我不想返回 null，而是**想返回一个字符串 "InvalidAccNo"**。
我确实尝试过，但它给了我一个错误。

```
Cannot implicitly convert type 'string' to 'CustomerInfo.Service.Customer_T' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:33:07.570

您将无法返回字符串，因为您的返回类型定义为`Customer_T`. 您可能要考虑的一个选项是查看 WCF 内部的故障处理，以将故障返回给用户，而不是重新利用单个对象。抛出故障可用于指示指定的帐号无效。

```
[ServiceContract(Namespace = "", Name = "CustomerInfoService")]
public interface CustomerInfo_I
{
    [OperationContract]
    [FaultContract(typeof(string))]
    Customer_T CustName(string accountno);
} 
```

[http://msdn.microsoft.com/en-us/library/ms733721.aspx](http://msdn.microsoft.com/en-us/library/ms733721.aspx)

`DataContract`此外，您的 Customer 类，您应该使用属性和数据成员标记该类，`DataMember`以便返回复杂类型。

```
[DataContract]
public class Customer_T
{
    [DataMember]
    public string CustName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:33:16.167

这是你想要的吗？

```
 if (custName.Equals("") == false)
    {
        return new Customer_T { CustName = custName };
    }
    else
    {
        return new Customer_T { CustName = "Invalid Customer Name!" };
    } 
```

虽然听起来您可能想要 IsValid 的 Customer_T 中的一个属性，或者类似的东西。在第二种情况下将其设置为 false，并覆盖 Customer_T 的 ToString：

```
public override string ToString()
{
    return this.IsValid ? this.CusName : "Invalid Customer Name!";
} 
```

然后你可以这样做：

```
 if (custName.Equals("") == false)
    {
        return new Customer_T { CustName = custName };
    }
    else
    {
        return new Customer_T { IsValid = false };
    } 
```

只需确保在 Customer_T 构造函数中将 IsValid 设置为 true，因此默认情况下它是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:35:15.500

该方法被声明为返回 a `Customer_T`，您的字符串不是它的实例。我建议不要这样做，但如果你真的想创建一个产生对象实例或字符串的方法，你可以让它 return `object`。两者`Customer_T`都是`string`。

改变

```
public Customer_T CustName(string accountno) 
```

进入：

```
public object CustName(string accountno) 
```

这样做的问题是，现在方法的调用者不确定它会导致什么结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T07:37:25.130

编译器是对的。在您的界面中，您已声明 CustName 返回一个 Customer_T，但现在您改变了主意，需要一个字符串作为返回值。
从 Web 服务合同的角度来看，这并不好。

因此，如果您需要 Customer_T 作为返回值，请不要更改任何内容，如果未找到 custname，则引发异常。替代品是

*   添加具有适当签名的新方法
*   以 CustName 返回字符串的方式更改（重大更改）您的合同。

# android - Android: Camera preview is tilted

> ID：10276420
> 
> 赞同：2
> 
> 时间：2012-04-23T07:25:13.967
> 
> 标签：android, android-camera

I have made a program implementing Camera on surface view.

In landscape mode, the preview is correct, but in portrait mode the preview is tilted 180 degrees, it is not coming upright.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:54:31.060

如果您对您的应用程序始终处于横向模式感到满意，那么您应该将此行添加到您的清单中，它将消除您的问题：

```
<activity android:name=".YourActivity"
              android:label="@string/app_name"
              android:screenOrientation="landscape"> 
```

但是，如果您确实想要一个纵向模式应用程序，则可以将其添加到您的清单中：

```
<activity android:name=".YourActivity"
              android:label="@string/app_name"
              android:screenOrientation="portrait"> 
```

只要您将该`mCamera.setDisplayOrientation(90);`行添加到您的活动中（前提是您检查了大于或等于 Froyo 的 android 版本。

# c# - Working with VC# GUI Forms

> ID：10276424
> 
> 赞同：-1
> 
> 时间：2012-04-23T07:25:19.520
> 
> 标签：c#

Hi I am a new programmer and i just wannna know that why can't we close an hide our VC# form with the help of following code -

```
private void button1_Click(object sender, EventArgs e)
{
Form1 frmobj = new Form1();
frmobj.Close();
frmobj.Hide();
} 
```

We can do the same thing with the help of following code-

```
private void button1_Click(object sender, EventArgs e)
{
this.Close();
this.Hide();
} 
```

Please tell me why can't we close and Hide the current form with the help of new instance of Form1.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:27:53.097

您的代码正在尝试关闭并隐藏*新*表单，而不是当前表单。

```
this.Close(); 
```

表示关闭当前表单。

您甚至无法在显示之前关闭新表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:29:34.910

调用 Close 方法，关闭并释放表单，这意味着在该方法调用之后，表单的实例不再存在，因此，您不能在该实例上调用任何其他成员方法，因为该实例不存在不再（被处置）。

# facebook - Any possible way to prolong Facebook token server-side when offline_access permission will be deprecated

> ID：10276432
> 
> 赞同：1
> 
> 时间：2012-04-23T07:25:49.117
> 
> 标签：facebook, facebook-graph-api, facebook-authentication

I read Facebook article about offline_access deprecation and I read that “Apps will not be able to setup a background/cron job that tries to automatically extend the expiration time”, but this is not acceptable for our application and I need to find the way how to prolong access token server-side automatically. The single solution I’m seeing now is to keep real login / password for Facebook accounts and do automatic Facebook authentication for each account to prolong the access token. I don’t like this idea, but I can’t find anything better. Does anyone have any suggestions?

# ruby-on-rails - RoR 用户通过 JSON 添加

> ID：10276435
> 
> 赞同：2
> 
> 时间：2012-04-23T07:26:08.923
> 
> 标签：ruby-on-rails, database, json, post

我们通过 POST 接收格式为 {email,password,hash,currentDate,companyName} 的 json-object

需要使用 RoR 方法在我们的数据库（postrege）中创建用户。

请帮助实现该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:04:16.147

我建议您阅读“动作控制器概述”rails 指南的[JSON/XML 参数](http://guides.rubyonrails.org/action_controller_overview.html#json-xml-parameters)部分。也许你不能修改你得到的 JSON，你必须看看这个`config.wrap_parameters`选项。

如果您收到一个 JSON 对象，例如

```
{"user" : {"email": "user@example.com",
           "password": "secret",
           "hash": "sd98ds789fsd",
           "currentDate": "the-current-date",
           "companyName": "Umbrella corp."}} 
```

你会像往常一样在 params 哈希中找到它：

```
# This will be "user@example.com"
params[:user][:email]
# This will contain "secret"
params[:user][:password] 
```

# group-by - How to use Group By in Marklogic?

> ID：10276436
> 
> 赞同：5
> 
> 时间：2012-04-23T07:26:10.647
> 
> 标签：group-by, xquery, marklogic

I want to use Group By in xquery. Can someone tell me please how to use Group By in Marklogic ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:05:13.707

`xdmp:xslt-invoke`或者，您可以使用或调用 XSLT `xdmp:xslt-eval`。MarkLogic 的 XSLT 处理器支持 XSLT 2.0，其中包括对`<xsl:for-each-group>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T14:43:48.660

简短的回答是使用`map:map`. 有关文档，请参阅[http://docs.marklogic.com/map:map](http://docs.marklogic.com/map:map) ，有关更长时间的讨论，请参阅[http://blakeley.com/blogofile/archives/560/ 。](http://blakeley.com/blogofile/archives/560/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-09T21:58:21.520

```
xquery version "1.0-ml";
let $xml:= <Students>
    <Student Country="England" Name="Dan" Age="20" Class="C"/>
    <Student Country="England" Name="Maria" Age="20" Class="B" />
    <Student Country="Australia" Name="Mark" Age="22" Class="A" />
  </Students>

let $xsl:= <xsl:stylesheet version="2.0"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:fn="http://www.w3.org/2005/xpath-functions">
<xsl:template match="Students">
  <result>
    <xsl:for-each-group select="Student" group-by="@Country">
    <country>
      <xsl:attribute name="name"><xsl:value-of select="fn:current-grouping-key()"/></xsl:attribute>
      <xsl:for-each select="fn:current-group()/@Name">
        <name><xsl:value-of select="."/></name>     
      </xsl:for-each>
    </country>
    </xsl:for-each-group>
  </result>
</xsl:template>
</xsl:stylesheet>

return xdmp:xslt-eval($xsl,$xml) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:21:21.127

MarkLogic 涵盖了 XQuery 3.0 的部分内容（及其 1.0-ml 方言），但遗憾的是缺乏 FLWOR group by 支持。

但是，您仍然可以通过类似的语法以编程方式创建组，这将获得相同的结果。这是一个 XQuery 示例：

```
for $d in distinct-values(doc("order.xml")//item/@dept)
let $items := doc("order.xml")//item[@dept = $d]
order by $d
return <department code="{$d}">{
         for $i in $items
         order by $i/@num
         return $i
       }</department> 
```

高温高压

# android - Android: TextView is not scrolling Automatically

> ID：10276439
> 
> 赞同：1
> 
> 时间：2012-04-23T07:26:19.227
> 
> 标签：android, textview

I have a TextView with following attributes :

```
<TextView
        android:id="@+id/appheader" 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_centerVertical="true"
        android:textColor="#ffffff"
        android:layout_marginLeft="3dp"
        android:textSize="21sp"
        android:singleLine="true"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:focusable="true"
        android:focusableInTouchMode="true"/> 
```

Actually the TextView scrolls ONLY when I click the TextView. But I want to scroll it automatically when I launch the Activity. How can I do this ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:47:19.267

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="very long text to srollll dkfjadkfjkldjfkjdkghjhtudhfjhdjfkdfkadjsajekdfjak" 
    android:singleLine="true" 
    android:marqueeRepeatLimit="marquee_forever" 
    android:ellipsize="marquee"
    android:focusable="true" 
    android:focusableInTouchMode="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:36:44.137

默认情况下`TextView`，选取框效果在获得焦点时起作用。要制作自动选取框效果，您需要扩展`TextView`类。请参阅此[链接](https://stackoverflow.com/questions/1827751/is-there-a-way-to-make-ellipsize-marquee-always-scroll)以供参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-07T10:26:33.927

`set android:scrollHorizontally="true"`对于那个文本视图。

还要设置以下两个属性：

```
text.setMovementMethod(new ScrollingMovementMethod());

text.setSelected(true); 
```

# c# - cSharp中的菜单条工具

> ID：10276442
> 
> 赞同：2
> 
> 时间：2012-04-23T07:26:35.117
> 
> 标签：c#

我正在尝试使用菜单条，并且我有 helpToolStripMenuItem_Click 可能有人可以帮助我有关如何放置文档的代码，即如果我单击帮助，则会出现一个新窗口显示，其中包含我从 vlc 帮助按钮捕获的这张图片的文档 ![在此处输入图像描述](../Images/53aee1b5b59a98df7e5ac61b1d23e201.png)

任何想法这是我的空代码

```
private void helpToolStripMenuItem_Click(object sender, EventArgs e)
        {

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:38:33.890

使用 RichTextBox 和按钮制作表单（例如名称为 frm_Help） 在 Richtextbox 中添加所有文本（阅读此[Richtextbox](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)）在按钮事件中单击添加

```
{
   Close();
} 
```

在您想显示此表单的地方添加

```
{
   frm_Help frm=new frm_Help;
   frm.ShowDialog();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:40:22.410

要获得与您发布的图像相同的结果，您需要创建一个新表单，将[WebBrowser](http://msdn.microsoft.com/en-us/library/2te2y1x6.aspx)控件放入其中，并在表单的初始化代码中将带有文档的 HTML 页面加载到该控件中：

```
public HelpForm()
{
  InitializeComponent();

  string text = System.IO.File.ReadAllText(@"Docs\readme.html");
  webBrowser1.DocumentText = text;
} 
```

此处，代码从位于EXE 文件所在文件夹的**Docs子文件夹中的****readme.html**文件中读取 HTML 。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:29:32.030

您应该创建新表单，其中包含您想要的所有文本，并且在 helpToolStripMenuItem_Click 中您应该创建该表单的新实例并显示它（可能作为对话框）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T07:37:34.097

创建一个新窗体或添加 AboutBox 并添加 RichTextbox 控件。**

# javascript - 我应该在 .ASPX 页面中的什么位置放置 Google Analytics（分析）代码？

> ID：10276443
> 
> 赞同：2
> 
> 时间：2012-04-23T07:26:35.547
> 
> 标签：javascript, asp.net, html, google-analytics

我刚刚注册了谷歌分析，我试图找到在我的页面上添加跟踪代码的位置。我知道如何在基本的 html 页面中插入，我只是继承了一个 .aspx 的网站

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:15:49.797

获取[异步跟踪](https://developers.google.com/analytics/devguides/collection/gajs/)代码（可在您的 Google 分析页面中获得）并将其放在`<head></head>`代码元素中：

```
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="/css/screen.css" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-XXXXX-X']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</head> 
```

如果你按照上面的链接，你会看到你可以拆分脚本块，这样一些代码就不会影响页面的呈现。但是，如果用户在加载跟踪代码之前与页面交互，您将面临丢失一些点击的风险。因此，只有在您有特定需要时才这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T07:30:38.033

您可以将它插入到任何地方，只要它不在 ASP.NET 控件中，它就可以工作。如果您有一个母版页文件，那么将它放在您的母版页文件中是一个好地方（这样您只需为整个站点添加一次代码）。

许多前端开发人员建议将您的脚本放在页面底部，这样如果它中断，您的页面仍然可以工作。不过，我认为 Google Analytics 代码应该非常可靠，因此您可以将其放在 HTML**头部**部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-30T05:06:25.363

Google Analytics 代码的 GA 代码是任何媒体资源的全局站点代码 (gtag.js) 跟踪代码。将 GA 代码作为第一项复制并粘贴到您要跟踪的每个网页的 中。如果您的页面上已经有一个全局站点标签，只需将下面代码段中的配置行添加到您现有的全局站点标签中。

全球网站标签在 Google 的网站衡量、转化跟踪和再营销产品中提供了简化的标签，让您可以更好地控制，同时更容易实施。通过使用 gtag.js，您将能够从可用的最新动态功能和集成中受益。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-23T07:42:20.500

跟踪代码是特定于个人资料的，这就是为什么您只能通过特定个人资料的[“个人资料设置”页面访问它的原因。](http://online-metrics.com/beginners-guide-to-google-analytics-profile-settings/)请阅读[我在哪里可以找到我的跟踪代码？](https://support.google.com/analytics/answer/1032385?hl=en)获取完整说明。

# python - Python - Reportlab：为什么在第二页超过两行的 SPAN 会返回错误？

> ID：10276455
> 
> 赞同：1
> 
> 时间：2012-04-23T07:27:05.007
> 
> 标签：python, reportlab

我正在生成一个足够长的表格，可以进入第二页。我想要实现的是在第二页上跨越 4 行。我使用 TableStyle 中的以下代码来执行此操作。

```
('SPAN', (0,38), (0,41)) 
```

两行的跨度虽然有效。（'跨度'，（0,38），（0,39））

这是一个代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from reportlab.platypus import SimpleDocTemplate, Table, LongTable, TableStyle, BaseDocTemplate, Frame, Paragraph, NextPageTemplate, PageTemplate
from reportlab.lib.pagesizes import letter, inch
from reportlab.lib import colors

def testPdf():
    doc = BaseDocTemplate("testpdf.pdf",pagesize=letter,
                        rightMargin=72,leftMargin=72,
                        topMargin=72,bottomMargin=18, showBoundary=True)
    width, height = letter
    print width 
    print height

    elements = []
    datas = []
    for x in range(1,50):
        datas.append(
            [x,x+1]
        )
    t=LongTable(datas)

    tTableStyle=[
        ('SPAN', (0,38), (0,41)),
        ('INNERGRID', (0,0), (-1,-1), 0.25, colors.black),
        ('BOX', (0,0), (-1,-1), 0.25, colors.black),
    ]
    t.setStyle(TableStyle(tTableStyle))
    elements.append(t)

    frameT = Frame(doc.leftMargin, doc.bottomMargin, doc.width, doc.height, id='normal')

    doc.addPageTemplates([PageTemplate(id='OneCol',frames=frameT)])

    doc.build(elements)

if __name__ == '__main__':
    testPdf() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T01:01:29.987

我运行了您的示例代码并看到了同样的问题。对于任何可能感兴趣的人，导致的错误是：

```
Traceback (most recent call last):
  File "./test.py", line 39, in <module>
    testPdf()
  File "./test.py", line 36, in testPdf
    doc.build(elements)
  File "/usr/local/greenplum-db/ext/python/lib/python2.6/site-packages/reportlab/platypus/doctemplate.py", line 880, in build
    self.handle_flowable(flowables)
  File "/usr/local/greenplum-db/ext/python/lib/python2.6/site-packages/reportlab/platypus/doctemplate.py", line 763, in handle_flowable
    if frame.add(f, canv, trySplit=self.allowSplitting):
  File "/usr/local/greenplum-db/ext/python/lib/python2.6/site-packages/reportlab/platypus/frames.py", line 159, in _add
    w, h = flowable.wrap(aW, h)
  File "/usr/local/greenplum-db/ext/python/lib/python2.6/site-packages/reportlab/platypus/tables.py", line 1113, in wrap
    self._calc(availWidth, availHeight)
  File "/usr/local/greenplum-db/ext/python/lib/python2.6/site-packages/reportlab/platypus/tables.py", line 587, in _calc
    self._calc_height(availHeight,availWidth,W=W)
  File "/usr/local/greenplum-db/ext/python/lib/python2.6/site-packages/reportlab/platypus/tables.py", line 553, in _calc_height
    spanFixDim(H0,H,spanCons,lim=hmax)
  File "/usr/local/greenplum-db/ext/python/lib/python2.6/site-packages/reportlab/platypus/tables.py", line 205, in spanFixDim
    t = sum([V[x]+M.get(x,0) for x in xrange(x0,x1)])
TypeError: unsupported operand type(s) for +: 'NoneType' and 'int' 
```

排序答案：这是 ReportLab 中的一个错误，您需要将其报告给开发人员。

长答案：我以前见过分裂的问题。当拆分显然是可能的时，存在（并且显然仍然存在）混淆算法的情况，但算法最终抛出错误，因为它无法确定将其放在哪个页面上。它可能发生在您意想不到的奇怪时间，而且我知道除了自己手动拆分事物（或将内容包装在`KeepTogether`可流动的内容中，但这在您的情况下不起作用）之外没有特别好的解决方法。

# visual-studio-2010 - VS 2010，从 rdlc 报告中获取嵌入式图像

> ID：10276460
> 
> 赞同：2
> 
> 时间：2012-04-23T07:27:39.430
> 
> 标签：visual-studio-2010, image, rdlc

我设计了一个 rdlc 报告。在那里我嵌入了一张图片，比如徽标。但我不小心删除了原始位置的原始图像。现在我正在尝试从 rdlc 报告中重新保存徽标。

这个 rdlc 的嵌入图像存储在哪个位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:59:10.220

图像不存储在物理位置，而是存储在 rdl 文件本身中。如果你打开 rdl 文件，你会发现 tag 。[这里](http://msdn.microsoft.com/en-us/library/ms251715%28v=vs.80%29.aspx)已经提到过。

有几种保存图像的方法。[这个](https://stackoverflow.com/questions/10004653/possible-to-extract-embedded-image-to-a-file)问题已经回答过了。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:52:52.567

我不确定我是否理解你的问题。嵌入的图像在 rdlc 中存储为 Base64 字符串。当您尝试在报告中插入新图像时，您会在“使用此图像”下方有一个这些图像的下拉列表，或者您可以从代码中插入它

# ios5 - Cordova 1.6.1 setInfo 错误

> ID：10276464
> 
> 赞同：1
> 
> 时间：2012-04-23T07:27:53.553
> 
> 标签：ios5, cordova, phonegap-plugins

我最近升级到了cordova 1.6.1，但我无法将它部署在模拟器或设备本身上。调试器显示`Error: executing module 'setInfo' are you sure you have loaded iOS version of cordova-1.6.1.js?`虽然我确定我已经这样做了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:00:42.543

使用此[链接解决了它](https://issues.apache.org/jira/browse/CB-499?page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#issue-tabs)

事实证明，如果您将 requireJS 与 Phonegap 或 Cordova 一起使用，如果您将 Cordova 包装在 require 调用上，则无法正确加载。所以解决方案是将其添加到您的 index.html

```
<script type="text/javascript" charset="utf8" src="[location of cordova.ios(for ios)]"></script> 
```

还请按照最底部的链接解决方案进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:38:10.557

您是否按照升级的所有步骤进行操作？确保您拥有更新的 Cordova.plist，因为插件名称已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T20:51:51.203

是的，即使我有同样的问题，我使用的是cordova 1.9.0，我只是在处理www文件夹，并没有替换cordova.js的必要（ios）版本，确保你一定很好。

[指南](http://wiki.phonegap.com/w/page/39991939/Getting%20Started%20with%20PhoneGap%20iOS%20using%20Xcode%204)

希望这对你有用。

# iphone - iOS：拖动对象的问题

> ID：10276466
> 
> 赞同：0
> 
> 时间：2012-04-23T07:28:06.050
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我需要在屏幕上拖动一个对象，问题是当我拖动这个对象时，它可能会被拖出 iPhone/iPad 的屏幕，我怎样才能避免这种情况，这是我的代码：

```
 float startingX;
    float startingY;

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];
    startingX = [touch locationInView:self.view].x;
    startingY = [touch locationInView:self.view].y;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    CGPoint currentPoint = objectView.frame.origin;
    float xForView, yForView;
    UITouch *touch = [touches anyObject];
    float newX = [touch locationInView:self.view].x;
    float deltaX;
    if(startingX > newX){
        deltaX = startingX - newX;
        xForView = currentPoint.x - deltaX;
    } else if(newX > startingX){
        deltaX = newX - startingX;
        xForView = currentPoint.x + deltaX;
    } else xForView = currentPoint.x;

    float newY = [touch locationInView:self.view].y;
    float deltaY;
    if(startingY > newY){
        deltaY = startingY - newY;
        yForView = currentPoint.y - deltaY;
    } else if(newY > startingY){
        deltaY = newY - startingY;
        yForView = currentPoint.y + deltaY;
    } else yForView = currentPoint.y;

    CGRect newFrame = CGRectMake(xForView, yForView, objectView.frame.size.width, objectView.frame.size.height);
    objectView.frame = newFrame;

    startingX = newX;
    startingY = newY;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:44:14.683

视图属性的原点`frame`位于其父视图的坐标系中。`center`如果您只想移动它，您也可以设置视图的属性（它也在它的超级视图的坐标系中）。这是执行此操作的算法：在`touchesBegan:`方法中，您获取坐标并根据视图的中心计算偏移量，然后在 touchesMoved 中，您只需设置视图的中心，同时考虑偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:21:48.600

您可以在 touchmove 函数中添加一个处理程序，例如：

```
 if(currentPoint.x < 0) //which means it already moved out of your window 
{   
[yourObject setFrame:CGRectMake(0, currentPoint.y, yourObject.frame.size.width, yourObject.frame.size.height)];
} 
if(currentPoint.y < 0) //preventing your object goes upward beyond window 
{   
[yourObject setFrame:CGRectMake(currentPoint.x, 0, yourObject.frame.size.width, yourObject.frame.size.height)];
} 
```

并且使用 if(currentPoint.y > self.view.frame.size.width) 和高度也这样做，这样对象就不会在下侧和右侧超出您的窗口

祝你好运

# javascript - 彗星背景架构

> ID：10276467
> 
> 赞同：2
> 
> 时间：2012-04-23T07:28:12.993
> 
> 标签：javascript, asp.net, web, push, comet

我有一些关于 Comet 的信息，但我想知道它如何保持连接打开（从客户端到服务器）。它是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:51:51.447

Comet 或长轮询 ajax 从长远来看不会保持连接打开。

HTTP 是无状态的，它发送请求并获取响应。就是这样。

那么，看起来连接保持打开状态如何？因为它在**滥用**HTTP 请求。

当您发送请求时，客户端会等待响应，直到它到来，或者直到服务器决定此连接已达到其超时。

在 Comet 中，服务器*故意*不立即响应。它仅在他想发送响应时才响应。这就是客户端发送 HTTP 请求并等待响应或超时的原因。

*这样，当它只是滥用*HTTP 请求的超时属性时，它看起来像是从服务器到客户端的某种推送。

例如，这是一些彗星代码（为了保持简短而使用 jQuery）：

```
setTimeout( function comet () {
    $.get( '/some/url', {}, function ( data ) {
        // Process the request's response

        // And recall setTimeout
        setTimeout( comet, 1 )
    } )
}, 1 ) 
```

# android - 如何在一小时内启动 AlarmManager？

> ID：10276472
> 
> 赞同：1
> 
> 时间：2012-04-23T07:28:44.603
> 
> 标签：android, alarmmanager

如何在最近的时间上启动 AlarmManager？例如，当用户单击按钮并且时间是 12:32 时，我想在 13:00 开始服务，然后每小时重复一次，我尝试了此代码，但它不起作用，它仅在一个小时后启动 AlarmManager，因此，如果时间是 12:32，它将在 13:32 开始服务。

```
Calendar cal = Calendar.getInstance();
        cal.set(Calendar.HOUR_OF_DAY, cal.get(Calendar.HOUR_OF_DAY)+1);

        AlarmManager alarm = (AlarmManager)myService.this.getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(myService.this, AlarmReceiver.class);
        PendingIntent pIntent = PendingIntent.getBroadcast(BatteryService.this, 0, i, 0);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 1000*60*60, pIntent); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:30:07.210

当您创建日历实例时，它的时间就是当前时间。在你的例子中是 12:32。然后你在一天中增加一小时。现在是 13:32。您需要将分钟（和秒）设置为 0：

```
cal.set(Calendar.MINUTE, 0);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MILLISECOND, 0);  // well ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:31:58.020

尝试根据分钟四舍五入...当然这需要获取**当前**时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-22T13:09:36.947

你可以 `int hour = calendar.get(Calendar.HOUR_OF_DAY);` 用来启动你的警报然后使用

```
AlarmManager.INTERVAL_HOUR 
```

重复你的警报，但请注意，警报现在将开始，然后每小时重复一次

# java - java中的url编码？

> ID：10276473
> 
> 赞同：0
> 
> 时间：2012-04-23T07:28:49.460
> 
> 标签：java, jsp, url, servlets, urlencode

我想知道什么是*url encoding*。我有 2 个 jsp 页面和一个 servlet。当我运行应用程序时，显示的 url 是：

`http://localhost:8080/myproject/index.jsp`

在哪里

**索引.jsp：**

```
<form action="Myservlet" method="post">
    <input type="text" name="mytext" id="mytext"/>
    <input type="submit" value="submit"/>
</form> 
```

单击提交按钮后，显示的 URL 为：

`http://localhost:8080/myproject/Myservlet`

**URL编码的含义是什么？如何编码网址？**

从`index.jsp`去 到`Myservlet`然后 到`result.jsp`

**Myservet#doPost** // 我需要在这里做 URL 编码吗？如果是怎么办？

```
 fetching data from db.......
  ....................
  String nextJSP = "/result.jsp";
  RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(nextJSP);
  dispatcher.forward(request,response); 
```

**结果.jsp**

`displays data here`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T08:16:24.633

有两种类型的编码：[HTML 表单编码](http://www.w3schools.com/tags/ref_urlencode.asp)和[URL 重写](http://docs.oracle.com/javaee/6/tutorial/doc/bnagm.html#bnagr)。

在表单编码中，URL 字符串被转换为 Internet 就绪的有效 ASCII 格式。从[URLEncoder.encode(String, String)](http://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29)文档：

> 使用特定的编码方案将字符串转换为 application/x-www-form-urlencoded 格式。此方法使用提供的编码方案来获取不安全字符的字节。

第二种是 URL 重写。URL 字符串使用会话 ID 进行编码，以防客户端浏览器不支持（或禁用）cookie 或会话跟踪。从[HttpServletResponse.encodeURL(String)](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#encodeURL%28java.lang.String%29)文档：

> 通过在其中包含会话 ID 对指定的 URL 进行编码，或者，如果不需要编码，则返回未更改的 URL。此方法的实现包括确定是否需要在 URL 中编码会话 ID 的逻辑。例如，如果浏览器支持 cookie，或者会话跟踪被关闭，则 URL 编码是不必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:54:57.583

我想你在这里有误解。既不是`HTML Form Encoding`也不`URL Re-writing`是你想要达到的目标。

如果要实现就好了。

例如：用户不会输入[http://localhost:8080/search.jsp?xxx](http://localhost:8080/search.jsp?xxx)而是看到 [http://localhost:8080/search?xxx](http://http:/localhost:8080/search?xxx)

您可以像这样创建一个 servlet 映射：

```
<servlet-mapping>
   <servlet-name>MappingServlet</servlet-name>
   <url-pattern>path/*</url-pattern>
 </servlet-mapping> 
```

必须编辑 url 模式以满足您的需要。您当然需要创建 servlet 以便将 url 映射到实际的 jsp。大多数 MVC 框架都使用这种技术。

阅读更多关于 [如何使用 MVC 模式开发 JSP/Servlets Web App？](https://stackoverflow.com/questions/2575471/how-to-develop-jsp-servlets-web-app-using-mvc-pattern)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T22:42:02.087

使用`java.net.URLEncoder.encode(s, "UTF-8")`where`s`是要编码的字符串。

每当我们将文本作为路径段、查询字符串参数等发送时，这都是必需的……

示例：[查看文档](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html)

# javascript - 在做一些 ajax 事情时，这个匿名回调函数什么时候运行？

> ID：10276481
> 
> 赞同：1
> 
> 时间：2012-04-23T07:29:36.457
> 
> 标签：javascript, ajax, function

我刚开始学习 ajax，只是无法理解示例中使用的匿名回调函数的概念。

```
function getData(dataSource, divID) 
  { 
    if(XMLHttpRequestObject) {
      var obj = document.getElementById(divID); 
      XMLHttpRequestObject.open("GET", dataSource); 

      XMLHttpRequestObject.onreadystatechange = function() 
      { 
        if (XMLHttpRequestObject.readyState == 4 && 
          XMLHttpRequestObject.status == 200) { 
            obj.innerHTML = XMLHttpRequestObject.responseText; 
        } 
      } 

      XMLHttpRequestObject.send(null); 
    }
  } 
```

匿名函数什么时候在这里触发？javascript 会逐行读取这一行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:33:30.573

在您的代码中，您是：

1.  构建请求对象
2.  您为该对象分配回调
3.  你发送请求

您分配给的函数是匿名函数的一个示例，一旦更改`XMLHttpRequestObject.onreadystatechange`就会执行。`readyState`做一个粗略的比较，就像`onchange`在 a 中添加一个`<select>`- 当值*发生变化*时，执行分配*的匿名函数*

匿名函数非常重要，其中一个使用它来定义一组“要做的事情”，基本上将“待办事项”列表交给另一个操作。然后该操作将在需要时执行它，在这种情况下`onreadystatechange`。

您的代码也是“异步操作”的一个示例。代码从上到下运行。回调只是“分配”的，因此没有执行。一旦您发送请求，此时***它不会等待***响应。它就像一个后台操作，而其余的代码在它被执行之后。

一旦值发生`readyState`变化，您刚刚分配给的函数`XMLHttpRequestObject.onreadystatechange`就会被执行。条件

```
XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200 
```

在该函数中确定请求是否完成 (4) 并且页面是否正常 (200)。如果是这样，响应就可以使用了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T07:34:07.170

Javascript 中的函数是第一类对象，这意味着它们可以像任何其他变量一样被传递。

线

```
XMLHttpRequestObject.onreadystatechange = function() { } 
```

正在将对象的`onreadystatechange`属性设置`XMLHttpRequestObject`为该函数。如果您查看[文档](https://developer.mozilla.org/en/XMLHttpRequest#Properties)，您会看到此函数“在`readyState`属性更改时调用”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T07:35:20.663

当您设置时，`XMLHttpRequestObject.onreadystatechange`您实际上是在更改类的方法，因此在设置时不会执行该函数，但稍后会在更改就绪状态时执行...

每次更改 readyState 时都会调用该函数，因此如果您在此处设置计数器

```
var counter = 0;

XMLHttpRequestObject.onreadystatechange = function() { console.log(counter++) }; 
```

并检查console.log，你会发现它被调用的次数与onreadystatechange一样多（这是一个触发anonymouse函数的事件）

虽然我读到您只是在学习 javascript 和 AJAX，但我建议您查看一些支持跨浏览器的东西，例如 jQuery、Zepto 和其他...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T07:35:36.270

[从这里](http://en.wikipedia.org/wiki/XMLHttpRequest#The_onreadystatechange_event_listener)引用：

> 如果在异步请求的第三个参数**设置为 true 的情况**下调用 XMLHttpRequest 对象的 open 方法，则将为以下每个更改 XMLHttpRequest 对象的 readyState 属性的操作自动调用 onreadystatechange 事件侦听器。

这意味着只要 readystate 属性发生变化，就会调用回调。由于调用是异步的，你不知道什么时候会发生（因为它基本上取决于服务器的响应时间）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T07:59:31.177

好的，我将带您逐步解释AJAX：

```
var request = new XMLHttpRequest;     // create a new HTTP Request
request.open("GET", "/resource.txt"); // set the method as GET and specify the URL to request for
request.onreadystatechange = handle;  // attach a handler which is called when the ready state of the request changes
request.send();                       // dispatch the HTTP Request

/*
    function to call when the ready state of the request changes
*/ 

function handle() {
    if (request.readyState === 4 && request.status === 200) {
        alert(request.responseText);  // if the ready state is 4 (complete) and the server sends a status of 200 (OK) then alert the contents of resource.txt which is stored in request.responseText
    }
} 
```

现在明白了：

1.  AJAX 用于与服务器通信。
2.  为了与服务器通信，我们需要向它发送一条消息（an `XMLHttpRequest`）。
3.  在消息中，我们指定了消息使用的方法（`GET`、等）。您可以[在此处](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol "Hypertext Transfer Protocol")`POST`阅读有关它的更多信息。
4.  我们需要指定消息的目标地址（URL）。在这种情况下，它是`/resource.txt`.
5.  既然我们已经写好了这封信，我们就真的把它寄出去了。就像把它放进邮箱一样。
6.  现在是邮局（在这种情况下是浏览器）传递邮件的问题。
7.  但是，如果我们想知道邮件的状态 (the `readyState`)，我们需要告诉浏览器在它发生变化时通知我们。
8.  为了得到通知，我们只需添加一个函数到`onreadystatechange`. 现在，每当`readyState`消息更改时，浏览器都会自动调用该函数。

这些是消息的就绪状态：

1.  0（未初始化）- 请求未初始化
2.  1（加载）- 建立服务器连接
3.  2（已加载）- 收到请求
4.  3（交互式）- 处理请求
5.  4（完成）- 请求已完成且响应已准备好

好的，现在要了解发生了什么：

1.  当我们写了一条消息但不发送它`readyState`是`0`因为请求没有初始化（即它没有被发送或放入邮箱）。
2.  在我们将消息放入邮箱后，浏览器会尝试将消息发送到服务器。此时`readyState`就变成了`1`。
3.  当整个消息被传递时，`readyState`就会变成`2`.
4.  然后服务器将回复写入消息，并在消息正文中放置您请求的内容。当服务器正在编写回复时，将`readyState`变为`3`.
5.  最后，当回复到达我们时，`readyState`更改为`4`.

每次`readyState`更改时，浏览器都会触发`onreadystatechange`您提供的函数以通知您发生了事件。简单吧？

总之，如果您想了解更多关于状态码的信息，请访问此[页面](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes "HTTP 状态码列表")。

# function - 如何传输 $data 以使用 gridview

> ID：10276482
> 
> 赞同：1
> 
> 时间：2012-04-23T07:29:37.643
> 
> 标签：function, gridview, yii

我有模型`DangTuyen`和功能

```
public function statusImageAccept($status) {
        $str = "";

        if($status == 0)
            $str = Yii::app()->request->baseUrl .  '/images/layout/dangTuyen/tick_icon_OK_black.png'.$status;
        else
            $str = Yii::app()->request->baseUrl . '/images/layout/dangTuyen/tick_icon_green.png'.$status;

        $arr = array(
            'label' => 'Accept',
            'imageUrl' => $str,
            'htmlOption' => array('class' => 'imageIcon'),
            'click' => 'function(){}',
        );

        return $arr;
    } 
```

我使用网格视图：

```
Controller::widget('zii.widgets.grid.CGridView', array(

    'id' => 'dang-tuyen-grid',
    'dataProvider' => $model->search(),
    'filter' => $model,
    'columns' => array(
                 'accept' => $model->statusImageAccept('$data->status'),
)); 
```

当在函数中使用`$model->statusImageAccept('$data->status')`then 时`statusImageAccept($status)`，var $status 是字符串`$data->status`

如何使用`$data`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T21:03:10.340

试试这个方法：

```
Controller::widget('zii.widgets.grid.CGridView', array(
    'id' => 'dang-tuyen-grid',
    'dataProvider' => $model->search(),
    'filter' => $model,
    'columns' => array(
        array(
            'header' => '',
            'type' => 'raw',
            'value' => function($data) {
                $imageUrl = Yii::app()->request->baseUrl .  '/images/layout/dangTuyen/';
                if (0 == $data->status) {
                    $imageUrl .= 'tick_icon_OK_black.png' . $data->status;
                } else {
                    $imageUrl .= 'tick_icon_green.png' . $data->status;
                }
                return CHtml::link(CHtml::image($imageUrl,'Accept'),$url, array(
                    'click' => 'function(){}',
                    'class' => 'imageIcon',
                ));
            }
        )
    )
); 
```

# iphone - 如何将 nsdata 转换为 MPMediaitem 歌曲 iOS Sdk

> ID：10276484
> 
> 赞同：1
> 
> 时间：2012-04-23T07:29:47.363
> 
> 标签：iphone, objective-c, xcode, mpmediaitem

我将 MPMediaItem 转换为 NSData 并将其存储在数据库中，现在我必须将该 NSData 转换为 MPMediaItem 才能在媒体播放器中播放该歌曲。使用下面的代码将 MPMediaItem 转换为 NSData：

```
NSURL *url = [song valueForProperty: MPMediaItemPropertyAssetURL];

AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL: url options:nil];

AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset: songAsset
                                                                  presetName: AVAssetExportPresetPassthrough];

exporter.outputFileType = @"public.mpeg-4";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *exportFile = [documentsDirectory stringByAppendingPathComponent:           
                        @"exported.mp4"];

NSURL *exportURL = [[NSURL fileURLWithPath:exportFile] retain];
exporter.outputURL = exportURL; 

// do the export
// (completion handler block omitted) 
[exporter exportAsynchronouslyWithCompletionHandler:
 ^{
     NSData *data = [NSData dataWithContentsOfFile: [documentsDirectory 
                                                     stringByAppendingPathComponent: @"exported.mp4"]];

 }]; 
```

谁能告诉我如何将 NSData 转换为 MPMediaItem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:37:21.257

你不能。An`MPMediaItem`代表 iPod 库中的一个项目，但第三方应用程序无法向该库添加任何内容。

但是，您可以将`NSData`对象写入文件，然后将其 URL 与`AVPlayerItem`/`AVPlayer`或一起使用`MPMoviePlayerController`（不要被名称所迷惑，它也可以播放纯音频文件）。

# opengl - glMaterialfv 在特定区域内

> ID：10276488
> 
> 赞同：0
> 
> 时间：2012-04-23T07:30:16.240
> 
> 标签：opengl, area, light

我使用 opengl 来产生火焰（带有粒子）。有了这个火，我想创造一种“光效”。

我用了这个功能 `glMaterialfv(GL_FRONT_AND_BACK, GL_EMISSION, emission);` 听起来不错，但问题是这个功能照亮了所有场景。

我想要一个特定区域的发射。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:21:16.637

设置材质会将其用于场景中的所有对象。如果您只想将其用于特定区域，请使用您用来设置材料的命令：

```
glMaterialfv(GL_FRONT_AND_BACK, GL_EMISSION, emission); 
```

然后绘制您的对象以使用此材质。绘制对象后，将发射更改回默认值（如果您阅读手册页，或者考虑一下，这是 (0.0, 0.0, 0.0, 1.0)：

```
GLfloat r_emission[4] = {0.0, 0.0, 0.0, 1.0};
glMaterialfv(GL_FRONT_AND_BACK, GL_EMISSION, r_emission); 
```

# java - 如果块以假值执行，使用 substring 和 equals 方法

> ID：10276492
> 
> 赞同：0
> 
> 时间：2012-04-23T07:30:46.990
> 
> 标签：java, jsp, if-statement, substring

我需要设置一个变量false，如果字符串以'1'开头，但下面的代码返回一个真值？我试过“苹果”这个词。我的代码有问题吗？

```
String msgName=request.getParameter("msgName");
boolean insideIf=false; 

if(msgName.substring(0,1).equals("1"));
    {
        insideIf=true;
                System.out.println("if status :"+msgName.substring(0,1).equals("1"));

    } System.out.println("insideIf :"+insideIf); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T07:35:14.370

它是:-) 你的 if 后面有一个分号

```
String msgName=request.getParameter("msgName");
boolean insideIf=false; 

if(msgName.substring(0,1).equals("1"))
    {
        insideIf=true;
                System.out.println("if status :"+msgName.substring(0,1).equals("1"));

    } System.out.println("insideIf :"+insideIf); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T07:37:25.983

```
if(msgName.substring(0,1).equals("1")); 
```

如果条件为真，则实际上正在**执行一个空语句- 稍后，它总是调用该块：**

```
{
    insideIf=true;
            System.out.println("if status :"+msgName.substring(0,1).equals("1"));

} 
```

解决方案：

1.  [不太优雅] - 删除`;`
2.  您总是可以设置`insideIf = msgName.substring(0,1).equals("1");`- **if-statement 没有真正的理由**，您只需要表达式的布尔值！
    *   您还可以使用[`String.startsWith()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)来进一步提高可读性！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T07:34:56.623

您在 if-statement 的末尾添加了一个分号，因此您的 if-else 条件根本没有执行。这是我认为可行的方法

```
String msgName=request.getParameter("msgName");
 boolean insideIf=false; 

if(msgName.substring(0,1).equals("1"))
{
    insideIf=true;
            System.out.println("if status :"+msgName.substring(0,1).equals("1"));

} System.out.println("insideIf :"+insideIf); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T07:36:04.987

也许选择：

myString.startsWith('1');

我认为这不需要解释。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T07:37:51.193

这是错误行

```
if(msgName.substring(0,1).equals("1")); 
```

不应该有“；” 在 if 语句之后。因为你已经放置了“;”所以这个 if 循环在这里结束并且它正在按顺序执行下一行。我希望它是自我解释的。关于 Anil

# javascript - facebook使用javascript、html连接

> ID：10276493
> 
> 赞同：0
> 
> 时间：2012-04-23T07:30:52.200
> 
> 标签：javascript, html, facebook

我正在使用 javascript 进行 facebook 连接，一切正常，但我没有收到电子邮件 ID。这是我尝试过的代码

```
 http://www.facebook.com/dialog/oauth/?client_id=283313515083671&redirect_uri=http://mobile.i-xltech.com/kfbookipad/score.html?score=12&response_type=token 
```

此链接提供访问令牌编号并使用该令牌编号，我通过以下链接传递了该令牌编号：

[https://graph.facebook.com/me?access_token='mytoken](https://graph.facebook.com/me?access_token=) no'

点击这个网址后，我得到了来自 facebook api 的回复。作为回应，我将获取除该电子邮件 ID 之外的所有用户详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:51:19.430

您尝试的 URL 有几个问题：

1.  `redirect_url`应该正确编码（`encodeURIComponent`）所以它可能是`http%3A%2F%2Fmobile.i-xltech.com%2Fkfbookipad%2Fscore.html%3Fscore%3D12`
2.  您缺少`scope`Authentication Endpoint 的参数（因此省略了权限请求），`scope=email`这样您就可以获取用户的电子邮件地址。

[`FB.login`](http://developers.facebook.com/docs/reference/javascript/FB.login/)实际上，使用 Facebook JavaScript SDK ( ) 为您完成大部分工作要容易得多：

```
FB.login(function(response) {
  if (response.authResponse) {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Good to see you, ' + response.name + '.');
      console.log('User email: ' + response.email + '.');
    });
  } else {
    console.log('User cancelled login or did not fully authorize.');
  }
}, {scope: 'email'}); 
```

# ruby-on-rails - 为什么rails中的url助手放一个“。” 而不是路径中的“/”？

> ID：10276496
> 
> 赞同：3
> 
> 时间：2012-04-23T07:31:05.137
> 
> 标签：ruby-on-rails, urlhelper

在我的应用程序中，我正在努力允许用户发送邀请。邀请有令牌。在电子邮件中，我使用路径中的令牌链接到注册页面。在邮件程序的控制器中，我正在使用：

```
new_user_registration_url(@invitation.token) 
```

正如我在这个[railscast](http://railscasts.com/episodes/124-beta-invitations)中看到 Ryan Bates 所做的那样。但它似乎正在输出这种格式：

```
http://localhost:3000/signup.4a4aebcde29738a39c7f447f58817e49cf9b4cf4 
```

为什么有一个“。” 代替 ”/”？

更新：

我正在使用设计，这里是相关的路线。我对这些没有信心；我曾为此苦苦挣扎，但这些似乎有效：

```
 devise_scope :user do
    get '/signup/:invitation_token' => "registrations#new", :as => :new_user_registration
  end
  devise_for :users, :controllers => { :registrations => "registrations"}, :skip => [:registrations]
  as :user do
    get '/users/cancel' => 'devise/registrations#cancel', :as => :cancel_user_registration
    post '/users' => 'devise/registrations#create', :as => :user_registration
    get '/signup' => 'registrations#new', :as => :new_user_registration
    get '/users/edit' => 'devise/registrations#edit', :as => :edit_user_registration
    put '/users' => 'devise/registrations#update'
    delete '/users' => 'devise/registrations#destroy'
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:50:45.607

很难`routes.rb`说，但似乎作者有类似的东西：

```
#in routes.rb
get 'signup' => 'controller#action', as: :new_user_registration 
```

但必须有：

```
get 'signup/:token' => 'controller#action', as: :new_user_registration 
```

检查：

```
# in console
app.new_user_registration_path('ToKeN') # => "/signup/ToKeN" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:43:02.360

如果您只是将字符串或符号作为参数传递给路径助手，我认为它会被解释为`format`. 尝试以下操作：

```
new_user_registration_url(:token => @invitation.token) 
```

或者

```
new_user_registration_url + "/" + @invitation.token 
```

# iphone - 在 iPhone 中隐藏导航控制器视图？

> ID：10276498
> 
> 赞同：0
> 
> 时间：2012-04-23T07:31:26.387
> 
> 标签：iphone, objective-c, uinavigationcontroller

> **可能重复：**
> [导航栏显示/隐藏](https://stackoverflow.com/questions/2926914/navigation-bar-show-hide)

我手头有个问题。

我在 IPAD 应用程序上以编程方式显示导航控制器，特别是一种 MODAL。单击设置按钮会显示模态。现在我想在用户成功注册或成功登录时隐藏控制器视图。有人可以告诉我如何以编程方式实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:45:02.823

如果您以模态方式呈现 NavigationController，您现在可以使用以下方法将其关闭：

```
[self.navigationController dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:40:43.147

使用此代码隐藏您的导航控制器。

```
 [self.navigationController setNavigationBarHidden:YES animated:YES] 
```

# kml - GE API 图标颜色

> ID：10276501
> 
> 赞同：0
> 
> 时间：2012-04-23T07:31:36.490
> 
> 标签：kml, google-earth-plugin

将颜色设置为蓝色时，GE API 出现问题。这里似乎是同样的问题： [http](http://code.google.com/p/earth-issues/issues/detail?id=313)
://code.google.com/p/earth-issues/issues/detail?id=313 图标的尖端变成蓝色但不是身体。

我有以下基本代码：

```
var propIcon = 'http://maps.google.com/mapfiles/ms/micons/tree.png';
var icon = ge.createIcon('');
icon.setHref(propIcon);
var style = ge.createStyle('');
style.getIconStyle().setIcon(icon);
var colorMode = style.getIconStyle().getColor();
colorMode.set("fffdf802"); 
```

该图标只是保持绿色。它适用于其他一些颜色。

我怀疑tree.png（绿色）与我的蓝色的混合不能正常工作。

如何修复？我需要使用这个图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T00:43:14.567

解决方案是使用白色图标。

[http://www.earthpoint.us/ExcelToKml.aspx#GoogleEarthWhiteIcons](http://www.earthpoint.us/ExcelToKml.aspx#GoogleEarthWhiteIcons)

# macos - 如何检查音频设备是否为聚合设备

> ID：10276505
> 
> 赞同：4
> 
> 时间：2012-04-23T07:31:50.563
> 
> 标签：macos, audio, core-audio

只是我遇到的一个简短问题：有没有办法检查我拥有的 AudioDeviceID 是否是聚合设备？我不确定如何检查这个，因为我没有找到可以与 AudioObjectGetPropertyDataSize 一起使用的相应选择器。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:16:43.140

所以我自己想出了一个解决方案：通过获取属性来获取子设备列表`kAudioAggregateDevicePropertyActiveSubDeviceList`

如果没有子设备，它将设置`OSStatus`为`noErr`. 如果是这种情况，您可以假设您手上有一个聚合设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-30T23:18:49.777

这是我在搜索 Coreaudio-api 邮件列表档案时遇到的另一个选项（那里有一些非常有用的东西，尽管可能需要一些搜索）。

聚合设备具有不同的类 ID `kAudioAggregateDeviceClassID`，因此检查会更直接一些。

这个片段似乎可以解决问题：

```
 AudioObjectPropertyAddress classAddress = {
                    kAudioObjectPropertyClass,
                    kAudioObjectPropertyScopeGlobal,
                    kAudioObjectPropertyElementMaster
                };

                AudioClassID classId;
                size = sizeof(AudioClassID);
                err = AudioObjectGetPropertyData(ioDeviceId, &classAddress, 0, NULL, &size, &classId); 
```

对于聚合设备，`classId`将是`kAudioAggregateDeviceClassID`( `'aagg'`)，而不是`kAudioDeviceClassID`其他类 ID 之一。

原文来源： [https ://lists.apple.com/archives/Coreaudio-api//2009/Oct/msg00182.html](https://lists.apple.com/archives/Coreaudio-api//2009/Oct/msg00182.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-31T22:54:03.400

@Hobotrons 答案为您提供绑定到聚合设备的设备，**而不是**聚合设备本身，这会导致额外的工作来查找没有此类设备的 SubDeviceLists。

**您获得的聚合设备的 deviceID 与您已经为所有其他普通设备所做的相同**，只是聚合设备具有子设备，因此需要一个特殊的 AudioDeviceTransportType 可用于区分它们。所以试着留意`kAudioDeviceTransportTypeAggregate`

```
static bool isAggregateDevice(AudioDeviceID deviceID)
{
    AudioDevicePropertyID deviceType = getDeviceTransportType(deviceID);
    return deviceType == kAudioDeviceTransportTypeAggregate;
}

static AudioDevicePropertyID getDeviceTransportType(AudioDeviceID deviceID)
{
    AudioDevicePropertyID deviceTransportType = 0;
    UInt32 propSize = sizeof(AudioDevicePropertyID);
    AudioObjectPropertyAddress propAddress = addressForPropertySelector(kAudioDevicePropertyTransportType);
    AudioObjectGetPropertyData(deviceID, &propAddress, 0, nil, &propSize, &deviceTransportType);
    return deviceTransportType;
}

AudioObjectPropertyAddress addressForPropertySelector(AudioObjectPropertySelector selector)
{
    AudioObjectPropertyAddress address;
    address.mScope = kAudioObjectPropertyScopeGlobal;
    address.mElement = kAudioObjectPropertyElementMaster;
    address.mSelector = selector;
    return address;
} 
```

从这里开始，大多数与普通设备相同。

`isAggregateDevice()` 允许您构建允许您在询问任何设备输入或输出之前进入子例程的逻辑。尝试请求聚合设备的输入或输出可能会使您的应用程序崩溃，因为它们也可以有零输入和零输出。可以这么说，聚合设备也不喜欢以正常方式被要求输入或输出，当您假设每个设备也必须有一个输入或输出时，情况并非如此，并且属性获取的结果在以下情况下具有误导性返回 0。（用户或其他代码可以随时更改聚合设备）。

因此，请确保您知道您的 deviceID 是否表示聚合设备的 ID，并在此步骤之后询问每个绑定设备的 In & Out **OR** SubDeviceList 及其 In & Out。

```
if (isAggregateDevice(deviceID)==true) 
{ 
    /* here ask for SubDeviceList */ 
    /* and maybe after that, climb into each */
    /* aggregated devices for its in's & outs */
} else {
    /* here ask for in's & outs of your normal device */ 
} 
```

# asp.net-mvc-3 - 模型状态验证

> ID：10276507
> 
> 赞同：1
> 
> 时间：2012-04-23T07:32:00.933
> 
> 标签：asp.net-mvc-3, model-view-controller, validation

我有这个模型：

```
 public Flight[] Flights { get; set; }
        public Passenger Passenger { get; set; }
        public ReservationData ReservationData { get; set; } 
```

我想像这样添加 ModelState 错误：

```
 Operation.ModelState.AddModelError("Flights", ""); 
```

但我想将错误分别添加到航班数组的项目中。那我用什么键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:02:34.877

对我来说似乎更像是一种解决方法，但您仍然可以`ModelState`直接在控制器和视图中使用，并制作某种特定于航班的键，例如通过某些航班的标识符。

这是使用数组中航班索引作为标识符的示例。控制器：

```
...
for (int i=0; i < model.Flights.Length; i++)
{

    //here comes the validation for flight model.Flights[i]
    //if the validation fails, adding error to the model

    Operation.ModelState.AddModelError("Flight" + i, "");
}
... 
```

看法：

```
<% for (int i=0; i < Model.Flights.Length; i++) { %>

    <%-- flight rendering goes here, including rendering of errors --%>

    <% if (ViewData.ContainsKey("Flight" + i) { %>
        <%: ViewData.ModelState["Flight" + i].Errors[0] %>
    <% } %>
<% } %> 
```

# django - 检查表单时返回错误后如何在模板中显示上传文件

> ID：10276510
> 
> 赞同：0
> 
> 时间：2012-04-23T07:32:15.550
> 
> 标签：django, forms, file-upload, show

我有一个带有文件上传字段的表单，该字段将显示在模板中

提交表单后，如果发现错误并返回页面，上传文件将消失，谁能帮我了解如何在发现错误后在表单页面中显示上传文件

以下是表格：

```
class Project_f(forms.Form):
    info=forms.CharField(required=True)
    file=forms.FileField(required=False) 
```

和模板：

```
<form action="" method="post" id="form1" enctype="multipart/form-data" ....>
{% csrf_token %}

            <td ><label for="id_info">product info:</label></td>
            <td colspan=3 >{{form.info}}</td>   
            <td >&nbsp;</td>
        </tr>
        <tr class="tr_blank"></tr>
        <tr>
            <td >&nbsp;</td>
            <td><label for="id_attachement_id">add attachment:</label></td>
            {% if attachments %}
                {% for attachment in attachments %}
                <td colspan="2">
                current attachment：&lt;div class='attachmentdd'id={{attachment.id}}><a href={{attachment.file}}>{{attachment.file}}</a>
                <br>modify：&lt;input id="txt" class="input_text" type="file" name="attachement_id" style="width:100%;height:23px;">
                </div>
                {% endfor %}
            {% else %}
            <td >{{form.attachement_id}}</td>   
            {% endif %}
            <td >&nbsp;</td>
        </tr></form> 
```

以下是views.py

```
Pr_form=Project_f(request.POST,request.FILES)
if Pr_form.is_valid():
      ......
else:
       c={'form': Pr_form,'user':login_name,'ourteam':ourteam}
       c.update(csrf(request))
       return  render_to_response('project_form.html',c,context_instance=RequestContext(request)) 
```

提交表单后，如果服务器发现错误，显示错误信息时不会显示上传文件路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:09:59.277

您可以通过视图中的 request.FILES 字典访问上传的文件来获取信息，然后将这些变量传递给您的模板。

[更新]

好的，所以根据您视图中的更新代码，这里有一个示例，说明如何从 request.FILES 集合中获取信息，以及如何稍微清理代码：

```
#views.py
from django.shortcuts import render #assumes Django 1.3+

from your_app.forms import Project_f

def my_view(request):
    #always lower-case variable names, as classes are always capitalized
    pr_form = Project_f(request.POST or None, request.FILES or None)

    if request.method == 'POST':
        if pr_form.is_valid():
           my_file = request.FILES.get('my_file')
           file_name = my_file.name
           # do something with file_name, etc.

           pr_form.save()
    return render(request, 'project_form.html', {'form' : pr_form,
        'user' : login_name, 'ourteam' : ourteam}) 
```

# c# - 以另一个用户身份运行带有 process.start 的 vbs，避免 UAC

> ID：10276519
> 
> 赞同：2
> 
> 时间：2012-04-23T07:33:06.783
> 
> 标签：c#, vbscript, passwords, process.start

我正在尝试使用 process.start() 作为另一个具有管理员权限的用户运行 vb 脚本，但我总是得到带有用户名和密码的 UAC 弹出窗口来填写。我在做什么错？

```
var scriptProc = new Process
                    {
                        StartInfo =
                            {
                                FileName = @"cscript,
                                WorkingDirectory = @"\\AShare\AFolder",
                                Arguments = "\"" + "Install.vbs" + "\"",
                                UseShellExecute = false,
                                WindowStyle = ProcessWindowStyle.Hidden,
                                Domain = domain,
                                UserName = username, //Admin username
                                Password = MakeSecureString(secureString),
                            }
                    };
scriptProc.Start(); 
```

我希望 UAC 弹出是和否选项，而不是使用用户名和密码来填写选项。

尝试查看：[如何在 C# 应用程序中调用 VBScript 文件？](https://stackoverflow.com/questions/200422/how-to-call-a-vbscript-file-in-a-c-sharp-application)但这没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:44:31.890

您没有做错任何事，在 Windows 7 中，甚至管理员帐户都以标准用户权限运行。看看[Mark Russinovich 的这篇 TechNet 文章](http://technet.microsoft.com/en-us/magazine/2009.07.uac.aspx)

从上面的文章。

> 启用 UAC 后，所有用户帐户（包括管理帐户）都以标准用户权限运行。这意味着应用程序开发人员必须考虑他们的软件默认不具有管理权限这一事实。这应该提醒他们设计他们的应用程序以使用标准用户权限。如果应用程序或其部分功能需要管理权限，它可以利用提升机制使用户能够解锁该功能。

* * *

编辑：您所说的是用户模拟：

你可以看看其中一些文章

1.  [WindowsIndentity 类](http://msdn.microsoft.com/en-us/library/e599ywa6.aspx)
2.  [http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)
3.  [http://www.codeproject.com/Articles/4051/Windows-Impersonation-using-C](http://www.codeproject.com/Articles/4051/Windows-Impersonation-using-C)
4.  [来自 C# 的 Windows 模拟](https://stackoverflow.com/questions/559719/windows-impersonation-from-c-sharp)
5.  [http://support.microsoft.com/default.aspx?scid=kb;en-us;Q306158](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q306158)
6.  [http://www.devnewsgroups.net/group/microsoft.public.dotnet.framework.windowsforms/topic62740.aspx](http://www.devnewsgroups.net/group/microsoft.public.dotnet.framework.windowsforms/topic62740.aspx)

# javascript - 如何更改 jquery ui datapicker 的样式（CSS）

> ID：10276525
> 
> 赞同：0
> 
> 时间：2012-04-23T07:33:20.107
> 
> 标签：javascript

我是 php 和 javascript 的新手。我在我的网页中使用 jquery UI 数据选择器。我用了这个日历

```
http://jqueryui.com/download 
```

它的CSS代码是

```
 <style type="text/css">
        /*demo page css*/
        body{ font: 62.5% "Trebuchet MS", sans-serif; margin: 50px;}
        .demoHeaders { margin-top: 2em; }
        #dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}
        #dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}
        ul#icons {margin: 0; padding: 0;}
        ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}
        ul#icons span.ui-icon {float: left; margin: 0 4px;}
    </style> 
```

和html代码是：

```
 <td>Required Date:</td>
  <td>
   <script>
    $(function() {
        $( "#datepicker" ).datepicker();
             });
   </script>

<div class="demo">

<p><input type="text" id="datepicker"></p>

</div><!-- End demo -->

<div class="demo-description" style="display: none; ">
--some description
</div><!-- End demo-description -->
</td> 
```

现在的问题是这个日历的正文样式在整个页面上实现，而我的页面还有另一个 css 文件.. 如果我删除这个日历的正文样式，那么我的日历显得太大了。`. i want the size of my calendar is same as mentioned in body style. what should i do.. please need help`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:37:43.353

这里 -> [http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)点击主题，你会发现一些基本的类，你可以自定义它们。只是玩这些类，直到您的日期选择器看起来像您需要的那样。如果您已经尝试过，但无法使其正常工作，请报告进度，我们会看看有什么问题。

# android - 在 Memory Clean 中幸存下来的 Android 应用

> ID：10276528
> 
> 赞同：4
> 
> 时间：2012-04-23T07:33:27.863
> 
> 标签：android, android-intent

我正在尝试编写一个必须始终运行后台线程的应用程序。（是的，我知道不推荐，但是这个应用程序不是为普通市场设计的，后台线程绝对是唯一的方法！）

所以我创建了一个服务（作为一个新进程）以前台模式启动它。在服务中，我将启动一个线程来监控系统的 Logcat 输出。

所以一切正常，直到有人进入任务管理器并点击“清除内存”按钮。

不幸的是，我找不到任何可能在这段记忆中幸存下来。我已经尝试了各种方法来让服务在这个过程中存活下来，我什至尝试为 AlarmManager 设置一个重复的警报，但即使这样也被取消了。

我很确定我错过了一些东西，有没有人知道如何让进程/线程在这个“内存清理”按钮中存活下来？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:19:54.783

> 所以我创建了一个服务（作为一个新进程）

请摆脱额外的过程。它不会为您增加任何价值，而且会浪费 CPU、RAM 和电池。

> 所以一切正常，直到有人进入任务管理器并点击“清除内存”按钮。

Android中没有“任务管理器”，Android中也没有“清除内存”按钮。您可能正在考虑由特定设备制造商添加的内容。

> 我很确定我错过了一些东西，有没有人知道如何让进程/线程在这个“内存清理”按钮中存活下来？

如果“内存清理”与“设置”中正在运行的应用程序列表中的“强制停止”相同，则无法“让进程/线程存活”。欢迎用户终止她希望终止的任何应用程序。事实上，在 Android 3.1+ 上，“强制停止”意味着您的应用程序将永远不会再次运行，除非用户稍后手动启动您的一项活动。

欢迎您使用自己的本机代码守护进程创建自己的固件，并且不能“强制停止”。但是，作为标准 SDK 应用程序安装的任何内容都可以强制停止。

# php - jQuery 文件上传和获取 $_Files

> ID：10276530
> 
> 赞同：3
> 
> 时间：2012-04-23T07:33:29.397
> 
> 标签：php, jquery, file-upload

我正在使用 jQuery 插件[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)来上传文件。我只想使用上传按钮显示选定的文件，并且仅在提交表单时上传文件。以下是我的代码：

```
 <form id="myform" method="post" enctype="multipart/form-data">
                <span class="btn btn-success btn-mini fileinput-button">
                    <i class="icon-plus icon-white"></i>
                    <span>Add files</span>
                    <input  id="fileupload" type="file" name="files[]" multiple>
                    <button type="submit" id="start_uploads">Start uploads</button>
                </span>
    </form> 
```

我可以使用以下代码创建列表：

```
$('#fileupload').fileupload({
        dataType: 'json',
        add: function (e, data) {
                           $.each(data.files, function (index, file) {
                              //alert('Added file: ' + file.name);
                                 $('<li/>').text(file.name).appendTo('#fileList');
                                            });

                                    },

                                }); 
```

但是当我提交表单时，我在 $_FILES 或 var_dump(files); 中没有得到任何东西。任何人都可以帮我解决我所缺少的以及我如何做到这一点吗？值得一提的是，如果我不使用 js 代码作为清单，那么请务必获得具有所有选定文件的 $_FILES 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T14:42:51.777

```
<?php if(!empty($_FILES)):?>
    <?php echo json_encode($_FILES);?>
<?php else:?>
    <!DOCTYPE HTML>
    <html>
        <head>
            <meta charset="utf-8">
            <title>jQuery File Upload Example</title>
            <link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap.min.css">
            <!-- Generic page styles -->

            <!-- Bootstrap styles for responsive website layout, supporting different screen sizes -->
            <link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-responsive.min.css">
            <!-- Bootstrap CSS fixes for IE6 -->
            <!--[if lt IE 7]><link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-ie6.min.css"><![endif]-->
            <!-- Bootstrap Image Gallery styles -->
            <link rel="stylesheet" href="http://blueimp.github.com/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css">
            <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
            <link rel="stylesheet" href="css/jquery.fileupload-ui.css">
        </head>
        <body>
            <input  id="fileupload" type="file" name="files[]" multiple>
            <button id="sendFiles">Send</button>
            <ul id="fileList"></ul>   
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
            <script src="js/vendor/jquery.ui.widget.js"></script>
            <script src="js/jquery.iframe-transport.js"></script>
            <script src="js/jquery.fileupload.js"></script>
            <script src="js/jquery.fileupload-ui.js"></script>
            <script>
                $(function () {
                    var filesData;
                    $('#fileupload').fileupload({
                        dataType: 'json',
                        add: function (e, data) {
                            filesData = data;
                            $.each(data.files, function (index, file) {
                                $('<li/>').text(file.name).appendTo('#fileList');
                            });

                        },
                        done: function (e, data) {
                            console.log(data);
                        }

                    });

                    $('#sendFiles').on('click', function () {
                        if (filesData) {
                            filesData.submit();
                        }
                    });
                });
            </script>
        </body> 
    </html>
<?php endif;?> 
```

基本上，您必须`submit`在函数中调用数据对象的方法`add`。然后您将获得`data`包含`$_FILES`为 json 字符串的对象。而且您不必使用实际表单通过此插件发送文件，但是您可以使用表单标签（就像在您的代码中一样）包装输入，以允许没有 JavaScript 的用户（他们存在吗？:)）也发送文件。如果您不想通过 JavaScript 发送文件，那么为了显示文件列表，您不必使用插件。[您可以使用 FileList https://developer.mozilla.org/en-US/docs/Web/API/FileList](https://developer.mozilla.org/en-US/docs/Web/API/File)获取有关文件的信息

# json - 在 Rails 上访问 JSON 时出现 406 不可接受的错误

> ID：10276538
> 
> 赞同：1
> 
> 时间：2012-04-23T07:34:09.033
> 
> 标签：json, ruby-on-rails-3.1, authlogic

我想在我的 Rails 3.1.3 应用程序中通过 HTML 或 JSON 显示用户列表（UsersController#index）。

如果未登录，HTML 请求应重定向到登录页面，JSON 请求应返回 401 未授权标头。HTML 请求完美运行。未登录时，mysite.com/users 重定向到登录页面，登录时，mysite.com/users.json 完美呈现为 JSON。

未登录时，尝试访问 users.json 时出现 406 错误，无论是通过浏览器还是通过 CURL 检查（将内容类型设置为“应用程序/json”）。

为了检查用户是否登录，我使用 before_filter 和 authlogic 进行身份验证。问题是，如果我删除 before_filter，JSON 请求就会完美运行。这让我觉得问题出在我的 before_filter 链中：

用户控制器：

```
before_filter :login_required, :only => [:index] 
```

AuthenticatedSystem（帮助模块）：

```
def login_required
  logged_in? ? true : access_denied
end

def logged_in?
  current_user ? true : false #current_user does some authlogic authentication stuff
end

def access_denied
  respond_to do |accepts|
    accepts.html do
      store_location
      redirect_to login_path and return false
    end
    accepts.json do 
      render :json => {}, :status => :unauthorized
    end
  end
  false
end 
```

作为参考，这里是应该呈现 JSON 的 index 方法：

```
def index
    @users = @users.active.recent.includes(:tags).page(params[:page]).per(20)

    respond_to do |format|
      format.html { get_additional_homepage_data }
      format.json { render :json => @users }
    end
end 
```

我已经尝试了我在 before_filter 链中能想到的一切来调试它，但我无法弄清楚。有任何想法吗？

使用：Rails 3.1.3 authlogic 3.1.0

# java - 将外部jar添加到android项目

> ID：10276545
> 
> 赞同：3
> 
> 时间：2012-04-23T07:34:34.393
> 
> 标签：java, android, jar, classpath

我有以下问题：

我有两个项目：jre1.7 和 android 2.1。我想首先构建一个 jar 文件并将其用作第二个项目中的框架。我正在使用 eclipse，并且我已经完成了添加外部 jar 时通常会做的事情。（右键单击项目-构建路径-添加外部罐子），似乎一切都很好，出现了引用的库文件夹，它包含罐子。

但是当我试图编译 Android 项目时，它给出了 NoClassDefFound 错误。难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T08:32:51.053

如果您使用 Android SDK & ADT r17 或更高版本，现在 Google 推荐的添加依赖项的方法是：

1.  在项目根文件夹下创建 libs/ 文件夹。
2.  将所有依赖项 jar 放入 libs/ 文件夹。

Android SDK 现在会自动为您提取和解析依赖项，您不再需要其他手动设置（将 jar 添加到项目构建路径）。查看[r17 更新日志](http://developer.android.com/sdk/eclipse-adt.html#notes)：

> 添加了自动设置 JAR 依赖项的功能。/libs 文件夹中的任何 .jar 文件都将添加到构建配置中（类似于 Ant 构建系统的工作方式）。此外，库项目所需的 .jar 文件也会自动添加到依赖于这些库项目的项目中。（[更多信息](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)）

另外，官方开发指南中没有明确说明Android现在完全支持java 7，最好还是继续使用JDK 6。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T07:53:00.370

如果您想将此外部 jar 包含到您的 Android 项目中，那么您只需在 Eclipse 环境中执行以下步骤。

1.  在项目面板中右键单击您的项目。
2.  选择“属性”选项。
3.  在“属性”窗口中，单击“Java 构建路径”。
4.  在该窗口的右侧，选择“库”选项卡。
5.  单击“添加外部 JAR”按钮，然后将此库添加到您之前保存的位置。
6.  现在点击“Order and Export”选项卡并检查“JarName.jar”</li>
7.  点击“确定”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:39:25.710

我会假设您使用 ADT 17，Android 存在类路径问题，您可以在[此处](http://nu-art-software-development-tips.blogspot.com/2012/03/adt-17-update-build-issues.html)阅读有关它的信息，您只需转到“导出”选项卡并检查 jar。

# web-services - 休息 API 响应 XML

> ID：10276547
> 
> 赞同：0
> 
> 时间：2012-04-23T07:34:47.100
> 
> 标签：web-services, rest

我正在开发一个用于编译给定代码并发送输出的 rest api。我应该如何构造 xml 文件？我的意思是输出可以生成很多行。

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-23T07:39:05.233

首先，你应该确保有一些小于标志，比如这个：<随意拿走，我自己不需要，我可以做更多。

然后你需要一个词，我不知道，代码。在那个词之后你需要放一个大于号，当然，我这里有一个供你使用：>，所以，如果你需要，复制并粘贴它。

之后，您应该输出您的代码。

最后，您应该将其中一个放在末尾： ，然后就是这样。您已经制作了一个结构化的 xml 文件。:D

# ios - 当我尝试使用 xcode 创建分发配置文件时没有分发证书

> ID：10276548
> 
> 赞同：0
> 
> 时间：2012-04-23T07:34:49.947
> 
> 标签：ios, ios5, app-store

我正在开发一个仅限 Ipad 的应用程序，但我的代码签名验证有问题，我尝试了所有方法，但没有任何效果，所以我试图思考问题出在哪里，当我尝试使用 Xcode 创建分发配置文件时，没有显示分发证书那里？

我很困惑，因为只有开发证书但没有分发，但我也已经创建了分发证书并且它在我的配置门户中？你能告诉我有什么问题吗？据我所知，开发和分发证书的过程是相同的。

[http://www.flickr.com/photos/79040977@N07/6959244884/](http://www.flickr.com/photos/79040977@N07/6959244884/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:42:49.280

您可能需要将您的分发证书从门户下载到您的钥匙串，并将分发配置文件从门户下载到 Xcode。

# visual-studio - 如何通过远程桌面将 VS 文件传输到服务器？

> ID：10276553
> 
> 赞同：-1
> 
> 时间：2012-04-23T07:35:10.067
> 
> 标签：visual-studio, visual-studio-2010, remote-desktop

> **可能重复：**
> [如何管理您的远程桌面](https://stackoverflow.com/questions/10265688/how-to-manage-your-remote-desktop)

现在我正在通过 VS 2010 构建一个站点 .... 我正在通过远程桌面访问它，如何上传文件？例如，如果我想更改 default.aspx，我该怎么做？

谢谢！可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:02:07.210

这些说明适用于 LAN 远程桌面连接，未在 WAN 上尝试

*   启动远程桌面客户端，但不要连接到另一台计算机，而是单击`Options`
*   单击`Local Resources`选项卡，然后单击`More`
*   展开`Drives`类别。选中远程计算机上所需的本地硬盘旁边的框，然后单击确定

现在连接到远程计算机，在远程“我的电脑”窗口中，您会发现您的本地驱动器已共享。

# php - 创建大型xml文件

> ID：10276555
> 
> 赞同：-1
> 
> 时间：2012-04-23T07:35:15.283
> 
> 标签：php, mysql

我使用 Flex 和 PHP。

我对mysql数据库进行查询并使用php函数创建xml。

记录集可能包含大约 90000 行。所以生成xml文件很慢，大概50s左右。

我不想进行转储，而只想创建一个文件发送到 Flashbuilder 以创建数据提供者。

我尝试使用几个过程：

*   DOM文档
*   XmlWriter
*   简单XML元素

但是使用这些方法，创建文件的时间会变慢。

您是否有另一个想法来加速进程（mysql 端或 php 端）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:38:09.040

我找到了一个很好的解决方案：使用 mysql 命令创建 xml 文件。例如：

```
 $link = mysql_connect(DB_HOST,DB_USER, DB_PWD);
mysql_select_db(DB_DATABASE, $link);

$query = "SELECT GROUP_CONCAT(
    CONCAT('\n<rec>\n', 
                CONCAT('\n<id>',acIndex,'</id>\n'),
                CONCAT('<prInitiales>',prInitiales,'</prInitiales>\n'),
                CONCAT('<acSolde>',acSolde,'</acSolde>\n'),

    '</rec>') SEPARATOR ' ' ) AS xml
    FROM Cutomer";

$recordset = mysql_query($query, $link);

$xml = mysql_fetch_array($recordset);
echo '<list>'.$xml['xml'].'</list>'; 
```

谢谢

# jquery - 如何在 asp.net 中使用 jQuery UI 自动完成功能

> ID：10276558
> 
> 赞同：1
> 
> 时间：2012-04-23T07:35:17.530
> 
> 标签：jquery, json, jquery-ui, jquery-ui-autocomplete

我是 jQuery UI 的初学者，我想使用自动完成 jQuery UI，我写了这段代码：

```
 <script type="text/javascript">

        $(function () {

            $("#Text1").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "Handler.ashx",
                        dataType: "json",
                        data: { term: request.term },
                        contentType: "application/json; charset=utf-8",
                        dataFilter: function (data) { return data; },
                        success: function (data) {

                            response($.map(data.d, function (item) {
                                return {
                                    label: item.Label,
                                    value: item.Value

                                }
                            }))
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            alert(textStatus);
                        }
                    });
                },
                minLength: 1
            });
        }); 

</script> 
```

和 HTML 代码：

```
 <input id="Text1" type="text" /> 
```

和自动完成处理程序：

```
public void ProcessRequest(HttpContext context)
{

    List<Customer> cuslist = new List<Customer>();
    Customer cus = new Customer(1, "Mohsen");
    cuslist.Add(cus);
    cus = new Customer(2, "aa");
    cuslist.Add(cus);

    cus = new Customer(3, "bcb");
    cuslist.Add(cus);

    cus = new Customer(4, "cac");
    cuslist.Add(cus);

    cus = new Customer(5, "daad");
    cuslist.Add(cus);

    cus = new Customer(6, "ffaa");
    cuslist.Add(cus);

    cus = new Customer(7, "vvaav");
    cuslist.Add(cus);

    string name = context.Request.QueryString["term"];
    var items = cuslist.Where(c => c.Name.Contains(name));
    var list = new List<AutoComplete>();
    foreach (var item in items)
    {
        var i = new AutoComplete {Id = item.Id, Label = item.Name, Value = item.Name};
        list.Add(i);
    }
    string ss = JsonConvert.SerializeObject(list);
    context.Response.Write(ss);
} 
```

和自动完成类：

```
public class AutoComplete
{
    public int Id { get; set; }
    public string Label { get; set; }
    public string Value { get; set; }

} 
```

和客户类别

```
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Customer(int id,string name)
    {
        Id = id;
        Name = name;
    }
} 
```

但是当在文本框中写入不起作用但从客户端发送的数据是真实的

![在此处输入图像描述](../Images/956a663be0b4c6b00cbd1f2d924cbebd.png)

但数据不显示。请帮助我。谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:16:22.323

我相信您需要在自动完成代码旁边使用 jQuery ajax，就像本文描述的那样： http: [//www.dotnetcurry.com/ShowArticle.aspx](http://www.dotnetcurry.com/ShowArticle.aspx?ID=515) ?ID=515 。

此外，您需要将自动完成处理程序指向一个方法。我没有使用 ashx，而是倾向于使用 Web 服务 (.asmx) 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T12:22:18.257

如果我没看错：

```
success: function (data) {
    response($.map(data.Id, function (item) {
        return {
                  value: item.Value
               }
    }))
}, 
```

应该：

```
success: function (data) {
    response($.map(data, function (item) {
        return {
                 label: item.Label
                 value: item.Value
               }
    }))
}, 
```

在这种情况下，您对您`dataFilter:...`没有任何帮助。

编辑：如果您使用的是 asp.net，请使用此转换器：

```
converters: {
    "json jsond": function(msg) {
        return msg.hasOwnProperty('d') ? msg.d : msg;
    }
}, 
```

处理`data.d`

EDIT2：基于最近的帖子：更改为使用它（exaclty as here）：注意 jsonp、转换器和成功处理程序更改以及 dataFilter 删除。

```
$("#Text1").autocomplete({
    source: function(request, response) {
        $.ajax({
            url: "Handler.ashx",
            dataType: "jsonp",
            data: {
                term: request.term
            },
            contentType: "application/json",
            converters: {
                "json jsond": function(msg) {
                    return msg.hasOwnProperty('d') ? msg.d : msg;
                }
            },
            success: function(data) {
                response($.map(data, function(item) {
                    return {
                        label: item.Label,
                        value: item.Value
                    }
                }))
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    },
    minLength: 1
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T13:55:50.100

我查看了您发布的屏幕截图，然后注意到了这一行：

```
response($.map(data.d, function (item) { 
```

然后回到截图才发现JSON结果不包含`.d`proptery。也许这就是问题所在。

[PS：您也必须在错误事件中调用响应函数（参见本页](http://jqueryui.com/demos/autocomplete/#overview)倒数第二段）。

# silverlight-4.0 - 如何在表达式混合 4 中的标注控件内插入项目

> ID：10276566
> 
> 赞同：1
> 
> 时间：2012-04-23T07:35:49.643
> 
> 标签：silverlight-4.0, expression-blend-4, callout

我需要在 Microsoft Expression Blend 4 中使用的标注控件中插入图像和超链接按钮的想法。

请帮助我解决这个问题。

谢谢，霓虹灯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:22:24.327

没有汗水，像这样。

```
<ed:Callout AnchorPoint="0,1.5" CalloutStyle="Cloud" Fill="#FFF4F4F5" Stroke="Black" Width="150">
    <ed:Callout.Content>
        <StackPanel Margin="0,20,0,20">
            <TextBlock Text="blah"/>
            <TextBlock Text="blah"/>
            <TextBlock Text="blah"/>
            <TextBlock Text="blah"/>
                        <Button Content="blah"/>
        </StackPanel>
    </ed:Callout.Content>
</ed:Callout> 
```

干杯:)

# c# - C# - TextBox TextChanged 事件未触发

> ID：10276570
> 
> 赞同：4
> 
> 时间：2012-04-23T07:36:00.453
> 
> 标签：c#, asp.net, ajax

我目前正在从事一个工作项目，由于某种原因，我的文本框的 textchanged 事件没有触发。我试图在我的代码中放置一个断点，但他没有到达那里，所以他的事件没有触发 imo。

```
<FooterTemplate>
                <asp:TextBox ID="TextBoxSiteAlias" runat="server" AutoPostBack="true" OnTextChanged="TextBoxSiteAlias_TextChanged"></asp:TextBox>
                <ajaxToolkit:AutoCompleteExtender
                                    runat="server" 
                                    id="AutoCompleteExtenderSiteAlias" 
                                    targetcontrolid="TextBoxSiteAlias"
                                    servicemethod="GetSiteAliasList"
                                    minimumprefixlength="2" 
                                    completioninterval="1000"
                                    enablecaching="true"
                                    completionsetcount="12" />
            </FooterTemplate> 
```

这是我的 Gridview 中的 FooterTemplate。

```
protected void TextBoxSiteAlias_TextChanged(object sender, EventArgs e)
    {
        string query = @"select distinct (isnull([site_address1], '')
                            +isnull([site_address2], '')
                            +isnull([site_address3], '')
                            +isnull([site_address4], '')
                            +isnull([site_address5], '') ) as 'Site_adresse' ,
                          city,
                          country,
                          [site_id] as 'siteID'
                          FROM [Henkel].[dbo].[tbl_Henkel_site_info_upload]
                          WHERE site_id = '" + ((TextBox)GridView1.FooterRow.FindControl("TextBoxSiteAlias")).Text + "'";
        conn.Open();
        SqlCommand cmd = new SqlCommand(query, conn);
        SqlDataReader myReader = cmd.ExecuteReader();
        DataTable myTable = new DataTable();
        myTable.Load(myReader);
        conn.Close();
        if (myTable.Rows.Count > 0)
        {
            ((TextBox)GridView1.FooterRow.FindControl("TextBoxSiteAddress")).Text = Convert.ToString(myTable.Rows[0]["Site_adresse"]);
            ((TextBox)GridView1.FooterRow.FindControl("TextBoxSiteCity")).Text = Convert.ToString(myTable.Rows[0]["city"]);
            ((TextBox)GridView1.FooterRow.FindControl("TextBoxSiteCountry")).Text = Convert.ToString(myTable.Rows[0]["country"]);
            ((TextBox)GridView1.FooterRow.FindControl("TextBoxIBSSiteID")).Text = Convert.ToString(myTable.Rows[0]["siteID"]);
        }
        else
        {
            ((TextBox)GridView1.FooterRow.FindControl("TextBoxSiteAddress")).Text = "";
            ((TextBox)GridView1.FooterRow.FindControl("TextBoxSiteCity")).Text = "";
            ((TextBox)GridView1.FooterRow.FindControl("TextBoxSiteCountry")).Text = "";
            ((TextBox)GridView1.FooterRow.FindControl("TextBoxIBSSiteID")).Text = "";
        }
    } 
```

这是在专用文本框失去焦点时应立即调用的函数。

我一直在许多论坛上寻找原因，但所有这些回复都表明文本框需要 AutoPostBack 属性（我的有）。

小通知：我有相同的项目（我们公司的另一笔交易具有所有相同的功能，并且在该项目中运行良好。我已将该项目代码复制到新项目并更改了所有查询+连接字符串）

希望有人可以帮助我吗？:)

非常感谢

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:08:42.260

确保将`CausesValidation`其设置为 false。

# java - 与在 Amazon EMR 上运行 Hive/Sqoop 相关的查询？

> ID：10276573
> 
> 赞同：1
> 
> 时间：2012-04-23T07:36:05.370
> 
> 标签：java, amazon-s3, hive, amazon-emr, sqoop

## 我的用例：

我想通过 SQOOP 从 EC2 将大数据导入 Hive。Hive 中导入的数据将通过应用一些算法在 Hive 中进行处理，并生成一些结果（以表格形式，仅在 Hive 中）。并且生成的结果将仅通过 SQOOP 再次导出回 Ec2。

我是 Amazon Web Services 的新手，想在 AWS EMR 的帮助下实施这个用例。我已经在本地机器上实现了它。

我已经阅读了一些与 AWS EMR 相关的链接，用于启动实例以及 EMR 是什么、它是如何工作的等等......

## 我对 EMR 有一些疑问，例如：

1) EMR 使用 S3 Buckets，它保存输入和输出数据 Hadoop 处理（以对象的形式）。---> 我没有得到如何在 S3 上以对象的形式存储数据（我的数据将是文件）

2）如前所述，我已经在 J​​ava 中为我的用例实现了一项任务。因此，如果我创建程序的 JAR 并使用自定义 JAR 创建作业流。是否有可能像这样实现，还是需要为此做一些额外的事情？

3) 正如我在用例中所说，我想在 SQOOP 的帮助下将结果导出回 Ec2。EMR 是否支持 SQOOP？

--edited part 4) 此外，我将每天/每周从 SQL Server 导入我的数据，因为我在 SQL Server 中的数据每天/每周都会更新。如果我想在 S3 上导入该数据并将其提供给 Hive，那么我该怎么做？（因为 Hive 将其数据存储在 /user/hive/warehouse 目录下的 HDFS 上）。如何链接到 HDFS 中的 S3 和 /user/hive/warehouse 目录。

请尽快回复我您的答案。我想尽早做到这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T02:35:29.677

可以在 AWS EMR 上安装 Sqoop。您不需要使用 S3 来存储文件，而是可以使用本地（临时）HDFS。安装 Sqoop 后，您可以将数据与它一起导入 HDFS，在 HDFS 中运行计算，然后再次使用 Sqoop 导出数据。

这是我写的一篇关于如何在 AWS EMR 上安装 Sqoop 的文章： [http ://blog.kylemulka.com/2012/04/how-to-install-sqoop-on-amazon-elastic-map-reduce-emr/](http://blog.kylemulka.com/2012/04/how-to-install-sqoop-on-amazon-elastic-map-reduce-emr/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T00:21:48.980

与我在 Hive 邮件列表中的回复相同：

要回答您的问题：

1) S3 术语使用“对象”一词，我相信他们有充分的理由说明原因，但对我们 Hive'ers 来说，S3 对象与存储在 S3 上的文件相同。文件的完整路径将是 Amazon 所称的 S3“密钥”，相应的值将是文件的内容，例如 s3://my_bucket/tables/log.txt 将是密钥和文件的实际内容将是 S3 对象。您可以使用 AWS Web 控制台创建存储桶并使用 S3cmd (http://s3tools.org/s3cmd) 等工具将数据放入 S3。

但是，您不一定需要使用 S3。S3 通常仅在您想要持久存储数据时使用。大多数人会将他们的输入日志/文件存储在 S3 上以进行 Hive 处理，并将最终聚合和结果存储在 S3 上以供将来检索。如果您只是暂时将一些数据加载到 Hive 中，对其进行处理并将其导出，则不必担心 S3。构成集群的节点具有构成 HDFS 的临时存储。你可以用那个。唯一的副作用是一旦终止集群，您将丢失 HDFS 中的所有数据。如果没问题，请不要担心 S3。

EMR 实例基本上是 EC2 实例，并对其进行了一些额外的设置。我认为在 EC2 和 EMR 实例之间传输数据应该很简单。如果您的数据存在于 EBS 卷中，您可以考虑添加一个 EMR 引导操作，将相同的 EBS 卷挂载到您的 EMR 实例上。如果您可以在没有所有花哨的安装业务的情况下做到这一点，那可能会更容易。

此外，请记住，跨 Amazon 数据中心的数据传输可能会产生成本，如果可能的话，您可能希望将 S3 存储桶、EMR 集群和 EC2 实例保持在同一区域。在同一区域内，不应该有任何额外的转移费用。

2) 是的，EMR 支持自定义 jar。您可以在创建集群时指定它们。这应该需要对您的 jar 本身进行最小的移植更改，因为它在 Hadoop 和 Hive 上运行，这与您安装本地集群的内容与 EMR 上安装的内容相同（好吧，足够接近）。

3) 带有 EMR 的 Sqoop 应该没问题。

参考资料： http: [//mail-archives.apache.org/mod_mbox/hive-user/201204.mbox/%3CCAGif4YQv1RVSoLt+Yqn8C1jDN3ukLHZ_J+GMFDoPCbcXO7W2tw@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/hive-user/201204.mbox/%3CCAGif4YQv1RVSoLt+Yqn8C1jDN3ukLHZ_J+GMFDoPCbcXO7W2tw@mail.gmail.com%3E)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-25T05:22:27.033

@mark-grover 提到您可以将 s3:// 与 hdfs:// 互换使用，这并不完全准确。在某些情况下，您可能会使用 apache sqoop 中内置的 AWS EMR 和它抱怨的 import 命令；

`ERROR tool.ImportTool: Imported Failed: Wrong FS: s3://<my bucket path>, expected: hdfs://ip-<private ip>.ap-southeast-2.compute.internal:8020`

（我这里显然没有足够的代表发表评论，但可以回复 go figure）

# jquery - 此功能是否会减慢页面加载时间？如何优化？

> ID：10276574
> 
> 赞同：0
> 
> 时间：2012-04-23T07:36:08.070
> 
> 标签：jquery, opencart

早上好，

我目前正在完成一个项目：[http ://schaedlingsbekaempfer24.eu/](http://schaedlingsbekaempfer24.eu/)

在为一个简单的自调用fadeOut/fadeIn 效果嵌入一点javascript 之后，页面加载时间增加了4 到5 秒。

这是我的js：

```
$(document).ready(function() {

    pic = $(this).find('.picture a:nth-child(2n) img');
    text = $(this).find('#testimonal p:first-child').next();

    $.fn.fader = function() {

        $(pic).delay(5000).fadeOut(300);
        $(text).delay(5000).fadeOut(300);

        $(pic).delay(5000).fadeIn(300);
        $(text).delay(5000).fadeIn(300);

        $(this).fader();
    };

    setTimeout(function() {    
      $('#preview').fader();
    }, 2000);

}); 
```

似乎该功能是从网站开始加载的第一刻开始执行的。如何调整我的代码以获得更好的加载性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:58:27.090

最好的解决方法是将设置的超时时间移到函数内部，这样可以避免递归锤击，并且每 5 秒只产生一次淡入淡出调用。

现在你正在杀死你的浏览器，迫使它进行无休止的递归调用。

如果在你的推子函数里放一个 console.log('call') 你会惊讶的！

你也可以做一些小的改进，但与你的第一个问题相比，它们真的很小：

1- 在 jquery 加载之后和文档就绪回调函数之前移动 $.fn.fader 定义

2-缓存您的选择器，例如。

```
var $this = $(this);
$this.delay(1000).fadeIn(300);
$this.delay(1000).fadeOut(300); 
```

同样，与您的大优化问题相比，这是非常小的性能调整，并且本身不会提供不错的性能。

# css - Css子菜单在IE中无法点击

> ID：10276578
> 
> 赞同：0
> 
> 时间：2012-04-23T07:36:21.787
> 
> 标签：css, submenu

我制作了一个菜单，在鼠标悬停后显示子菜单。在 Firefox 和 Chrome 上它可以工作，但是当我在 IE 中测试时，它不起作用。问题是鼠标悬停显示主菜单和子菜单，但是当我尝试单击子菜单时它消失了。你能检查一下菜单代码吗？

```
#main_menu ul li ul {
 position: absolute;
 display: none;
 top: 20px;
 padding: 0;
 z-index: 599;
}
#main_menu ul li ul li { margin-right: 0px; }
#main_menu ul li:hover ul { 
 background-color:#fff;
 display:block; 
 height:30px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:40:06.323

IE 只为锚点注册悬停事件。我认为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:44:00.873

`{`删除:之前的最后一个 UL

```
#main_menu ul li:hover { 
```

代替

```
#main_menu ul li:hover 
 ul{ 
```

# hadoop - Hive Table 分区，中间有列

> ID：10276584
> 
> 赞同：3
> 
> 时间：2012-04-23T07:37:15.610
> 
> 标签：hadoop, hive

我想用 Hadoop 上现有文件的分区创建一个表。我需要分区的日期值在文件中可用，但日期值列位置不是最后一个。它在中间。我怎样才能创建相同的表？

这是示例：

```
1  John    2012-01-10 Miller  
2  Austin  2012-02-22 Powers 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T00:16:17.937

举个例子：你想要一个分区的配置单元表，其中包含三个列`(id INT, fname STRING, dt STRING, lname STRING)`，其中`id`, `fname`,`lname`是分别存储整数 id、字符串名字和字符串姓氏的列，dt 是字符串类型的分区列，其中包含 yyyy 中的日期-MM-dd 格式。要创建这样的表，您将发出如下命令：

```
CREATE EXTERNAL TABLE my_table (id INT, fname STRING, lname STRING)
PARTITIONED BY (dt STRING)
LOCATION '/usr/hive/warehouse/my_table'; 
```

当您将数据插入此表（例如通过 INSERT OVERWRITE 命令）并检查 HDFS 位置（/usr/hive/warehouse/my_table）时，您会发现数据存储在目录中；每个分区一个目录。目录的名称类似于*dt=2012-01-01*或*dt=2012-02-22*。在这些目录中将是您选择存储的任何格式的实际数据。分区列**不**与此数据一起存储；它是从您的数据所在的分区目录中破译的**虚拟**列。

现在让我们来回答你的问题。由于分区列是虚拟列，因此您不能将分区的 Hive 表按原样放在数据之上（无论您的待分区列是在文件中间还是在文件末尾）。您需要在 HDFS 中存在适当的目录结构才能进行分区。您可能希望创建一个未分区的临时表。

```
CREATE EXTERNAL TABLE my_table_staging (id INT, fname STRING, dt STRING, lname STRING)
LOCATION '/usr/hive/warehouse/my_table_staging'; 
```

然后使用此临时表作为源，使用动态分区填充分区表。为此，您可以使用如下命令：

```
INSERT OVERWRITE TABLE my_table PARTITION (dt)
SELECT id, fname, lname, dt FROM my_table_staging; 
```

此命令将从您的暂存表中读取数据并将其插入到分区表中，从而在 HDFS 上为您创建适当的目录结构。

参考： - [https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL) - [https://cwiki.apache.org/Hive/dynamicpartitions.html](https://cwiki.apache.org/Hive/dynamicpartitions.html)

# mybatis - 关于mybatis的原始数据类型的parameterType？

> ID：10276587
> 
> 赞同：2
> 
> 时间：2012-04-23T07:37:26.443
> 
> 标签：mybatis

我用 java 的 mybatis3.0.6

哪一个对性能更好？

1.  `[select id="getData" parameterType="Integer" resultType="Integer"]`
2.  `[select id="getData" parameterType="int" resultType="int"]`

我认为“int”需要强制转换，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:21:01.123

据我所知，使用两者都没有区别。例如-

```
 <select id="getById" parameterType="int" resultType="int">
    SELECT age FROM Person WHERE id= #{id}
 </select>

public Integer selectById(int id) {

    SqlSession session = sqlSessionFactory.openSession();

    try {
        Integer age =  (Integer) session.selectOne("Contact.getById", id);
        return age;
    } finally {
        session.close();
    }
} 
```

在这种情况下，必须将 selectOne 的返回值强制转换为 Integer，因为它返回一个 Object 类型，无论 resultType 是 int 还是 Integer。

# java - 如何使用我的 Android 应用加载朋友的 Facebook 信息

> ID：10276588
> 
> 赞同：0
> 
> 时间：2012-04-23T07:37:27.123
> 
> 标签：java, android, facebook

我正在开发一个链接到 facebook 的 android 应用程序（使用以下教程 - [https://developers.facebook.com/docs/mobile/android/build/](https://developers.facebook.com/docs/mobile/android/build/)）。但是，我想下载并保存**朋友的**信息页面，以便我的程序可以读取 Facebook API 不提供的更多信息，例如电子邮件或电话号码。如果我按照下面列出的例程进行，Facebook 将不会看到我已登录。我应该采取什么方法来做到这一点？

```
public static void main(String[] args) {
    try {
      URL u = new URL("https://www.facebook.com/profile.php?id=********");//where id is your friend's profile ID
      OutputStream out = new FileOutputStream("bob.html");
      InputStream in = u.openStream();
      DTD html = DTD.getDTD("html");
      System.out.println(html.getName());
      in.close();
      out.flush();
      out.close();
    } catch (Exception e) {
      System.err.println("Usage: java PageSaver url local_file");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:52:40.580

没有办法使用 Facebook API 来获取您朋友的电话号码或电子邮件地址 - 相信我，我已经尝试过了，这真的很烦人！但是，我可以看到它以这种方式配置以帮助保护用户的隐私。

如果您想直接从 URL 获取此信息，您可能需要模拟 Facebook 的登录过程 - 即向[http://www.facebook.com](http://www.facebook.com)发送 POST 消息并解析您的用户名和密码用户。这将使您登录，并创建一个会话对象。然后，您应该能够调用配置文件 URL，传入会话对象，它将返回您需要的信息。

但是，我应该指出，这种访问是 Facebook 严格禁止的，他们在服务条款中非常明确地表示，他们将禁止任何试图使用这种程序访问个人资料的开发人员和应用程序页。有关开发人员 Facebook 政策，请参阅[https://developers.facebook.com/policy/](https://developers.facebook.com/policy/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:48:04.673

您以 facebook 用户身份登录，使用 facebook 实例：facebook.request("me"); 您将您的详细信息作为 JSON 对象获取。您可以从中详细说明

```
String name = json.getString("name");
        String email = json.getString("email");
        String gender = json.getString("gender");
        String id = json.getString("id"); 
```

朋友：facebook.request("me/friends"); 您可以将您的好友详细信息作为 JSON 数组获取，您可以从中获取好友详细信息作为 JSON 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:26:26.907

使用 Facebook Graph API 并请求所需的权限。

您需要扩展权限

```
email 
```

阅读用户的电子邮件。

朋友的电子邮件没有等效权限。您只能获取登录用户的电子邮件。

您通过拨打以下电话收到电子邮件：

```
https://graph.facebook.com/me 
```

用户登录后，即您需要访问令牌。

据我所知，无法通过 API 访问电话号码。

您可以通过以下方式访问您朋友的基本信息：

```
https://graph.facebook.com/USER_ID 
```

通过添加这些权限，您可以从“/USER_ID”调用中获得更详细的信息：

```
friends_about_me
friends_interests
friends_relationships
friends_birthday
friends_hometown
friends_location 
```

但是，“/USER_ID”调用不会返回您可以在网络信息页面上看到的所有用户数据。您可以通过以下调用访问更多信息：

```
/USER_ID/interests 
```

返回用户个人资料中列出的兴趣并需要 user_interests 权限

```
/USER_ID/music 
```

返回用户个人资料中列出的音乐

```
/USER_ID/books 
```

返回用户个人资料中列出的书籍

```
/USER_ID/movies 
```

返回用户个人资料中列出的电影

```
/USER_ID/television 
```

返回用户个人资料中列出的电视

```
/USER_ID/likes 
```

返回此用户喜欢的所有页面，需要 user_likes 权限

# logic - 如何使用 PHP 购物车申请折扣券

> ID：10276596
> 
> 赞同：-1
> 
> 时间：2012-04-23T07:38:18.973
> 
> 标签：logic, cart

我被我的一个购物车卡住了，这是我的问题

A、B、C 是已经添加到我购物车中的产品，每个产品价值分别为 10 美元、15 美元、5 美元。付款在 for 循环中执行，每个产品首先是 A，然后是 B，依此类推。付款不是一步完成的。如果购物车有 5 个产品，则付款将进行 5 次。这些都是完美的工作:)。

但是，现在我想用我的购物车总额申请折扣券，那么我该如何处理我的付款流程:(。

非常抱歉我的英语不好。

请提供任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:31:38.740

我相信这里的最佳做法是执行以下操作：

*   计算购物车的总成本（但不处理付款）

    ```
    totalCost = (all A) + (all B) + (all C) 
    ```

    *   计算应用优惠券时购物车的总折扣

    ```
    couponDiscount = 15% (as an example)
    discountedPrice = totalCost * (100% - 15%) 
    ```

    *   将每个产品的折扣价分开：

    ```
    discounted price for all of A = discountedPrice * ((all A) / totalCost))
    process payment for product "A"

    discounted price for all of B = discountedPrice * ((all B) / totalCost)
    process payment for product "B"

    discounted price for all of C = discountedPrice * ((all C) / totalCost)
    process payment for product "C" 
    ```

    那应该这样做！

    基本上，表示由产品“A”组成*的*折扣价和非折扣价`((all A) / totalCost)`的百分比。将该百分比乘以折扣价将为您得到产品“A”的“调整后”折扣价。然后，只需为您的每个产品重复该过程即可。

     *希望有帮助！随意问的问题。*

# iphone - 发送带有数据的短信

> ID：10276598
> 
> 赞同：2
> 
> 时间：2012-04-23T07:38:29.727
> 
> 标签：iphone, sms

我是 iPhone 开发的新手。我想传递一些带有额外短信细节的字符串。我正在使用下面的代码向特定号码发送短信，但是如果我想用短信字符串发送一些数据，那我该怎么办？谁能告诉我那个格式？

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"sms://9016098909891"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:45:46.593

**`SMS`URL 方案不提供任何填充 SMS 正文的方法。因此，您预先填写短信的唯一选择是使用`MFMessageComposeViewController`**

* * *

您可以使用 Messaging 框架设置文本消息正文，您需要将其添加到框架中。添加`#import <MessageUI/MessageUI.h>`到导入列表。

确保视图控制器实现`MFMessageComposeViewControllerDelegate`，这是关闭`MFMessageComposeViewController`.

用于`MFMessageComposeViewControllerDelegate`：

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result {
    [controller dismissModalViewControllerAnimated:YES];
} 
```

然后在将显示消息编写器的方法中放置以下代码：

```
MFMessageComposeViewController *messageController = [[MFMessageComposeViewController alloc] init];
messageController.messageComposeDelegate = self;
messageController.body = @"Your message here.";
messageController.recipients = [NSArray arrayWithObject:@"9016098909891"];
[self presentModalViewController:messageController animated:YES];

[messageController release], messageController = nil; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:45:59.560

您可以在应用内使用短信功能，您可以在其中设置短信正文。

第一步：将MessageUI框架导入你的项目并导入头文件`#import <MessageUI/MessageUI.h>`

第二步：发送短信如下

```
 MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = @"Hello from Mugunth";
        controller.recipients = [NSArray arrayWithObjects:@"12345678", @"87654321", nil];
        controller.messageComposeDelegate = self;
            controller.delegate = self;
        [self presentModalViewController:controller animated:YES];
    } 
```

第 3 步：将代表处理为

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    switch (result) {
        case MessageComposeResultCancelled:
            NSLog(@"Cancelled");
            break;
        case MessageComposeResultFailed:
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"MyApp" message:@"Unknown Error"
                                                           delegate:self cancelButtonTitle:@”OK” otherButtonTitles: nil];
            [alert show];
            [alert release];
            break;
        case MessageComposeResultSent:

            break;
        default:
            break;
    }

    [self dismissModalViewControllerAnimated:YES];
} 
```

在这里查看文章[http://blog.mugunthkumar.com/coding/iphone-tutorial-how-to-send-in-app-sms/](http://blog.mugunthkumar.com/coding/iphone-tutorial-how-to-send-in-app-sms/)

# javascript - JS 中的即时验证

> ID：10276600
> 
> 赞同：0
> 
> 时间：2012-04-23T07:38:30.527
> 
> 标签：javascript, validation, design-patterns, instant

好的，所以我想做的是创建一个 JavaScript 代码来检查用户的输入，看看它是否符合规则，并在文本字段旁边立即显示一条错误消息，上面写着“xxx 不是有效的条目”

例如，如果规则是第一个字符必须是大写字母，后跟一个数字，并且不能有任何特殊字符。

用户输入类似：“13da2343*”，结果应该是“无效条目，第一个字符应该是大写字母，特殊字符是无效条目”。应该显示在文本字段旁边。

我什至不知道如何为自己开始这个。请帮忙，我是 JavaScript 新手

**编辑**

这是迄今为止我的网站的全部代码。我不知道如何让它说输入的特定字符无效并且它本身就在文本字段旁边。

```
 <!DOCTYPE html>
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title> THING </title>
<meta name="Author" content="Dhruvin Desai" />
<link rel="stylesheet" type="text/css" href="style.css" />

<script type='text/javascript'>//<![CDATA[ 
window.onload=function(){
document.forms[0].addEventListener('submit', function(event) {
    event.preventDefault();
    var input = document.getElementsByName('a')[0];

    if (~input.value.search(input.getAttribute('pattern'))) {
        alert('Is valid!');
    } else {
        alert('It's invalid...');
    }
});
}//]]>  

</script>

</head>

<body>
<div id="wrapper">
    <div id="response">
    <form id="form" action="#" >
    <fieldset>
    <LEGEND><br>THING</br></LEGEND>

    <!-- Input Fields -->

    <label for="name"> Username </label>
    <input type="text" name="a" value="" id="name" autofocus="autofocus" autocomplete="off" required="required" placeholder="Username" pattern="^[A-Z][A-Za-z]{0,11}$" onkeyup="check(this)" />
    <span id="confirmMessage" class="confirmMessage"></span>

    <input type="submit" value="Submit" class="submit" />

    </fieldset>
    </form>
</div>

</body> 
```

**编辑 2**

我添加了一个新脚本，该脚本有效但只接受大写字母，我只想要第一个字母。

```
<!DOCTYPE html>
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title> IT 202 - Assignment 3 </title>
<meta name="Author" content="Dhruvin Desai" />
<link rel="stylesheet" type="text/css" href="style.css" />

</head>
<body>

<div id="wrapper">
    <div id="response">
    <form id="form" action="insert_form.php">
    <fieldset>
    <LEGEND><br>Assignment 3</br></LEGEND>

    <!-- Input Fields -->

    <label for="name"> Username </label>
    <input name="name" id="name" autofocus="autofocus" autocomplete="off" required="required" placeholder="Username" onkeyup="check(this.value)" />

    <input type="submit" value="Submit" class="submit" />

    </fieldset>
    </form>
</div>
<script type="text/javascript">

function check(string) 
{
    loop: for (i = 0; i < string.length; i++) 
    {
        var res = string.substring(i, i + 1).match(/[A-Z][A-Za-z]{0,11}/);

        if (!res)
        {
            alert("Error on position " + (i + 1) + ":\n This character is no Letter: "+string.substring(i, i + 1));
            break loop;
        }

    }

}
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:13:35.173

一种方法是向您的表单添加一个“侦听器”，定期检查表单字段。我已经在[这个 jsfiddle](http://jsfiddle.net/KooiInc/9ssKZ/)中做到了，它可能对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:07:49.800

这种类型的“实时”验证通常使用在每次按键时触发（并重置）的计时器来完成。如果自用户最后一次按键后计时器到期，则验证开始。

250 毫秒的延迟效果很好。如果你是 JavaScript 新手，你应该学习[`window.setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)和[`window.clearTimeout`](https://developer.mozilla.org/en/DOM/window.clearTimeout).

伪代码（否则，我会为你做所有的工作）：

```
按键时：
    如果存在超时：
        取消现有的超时

    触发新的超时

当超时过期时：
    做验证

    如果验证失败：
        设置错误信息
        显示错误信息
    别的：
        隐藏错误信息

```

对于实际的验证本身，您可以简单地添加一些代码来自己进行验证，或者如果验证是正则表达式值得的，您可以使用正则表达式。您应该为此研究[RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)对象。

要在字段旁边显示错误消息，一种方法是在标记中嵌入错误容器并最初隐藏它。出错时，您填充其内容并显示容器。你应该希望知道足够多的 CSS 来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:44:02.237

您可以使用`pattern`属性并传递正则表达式。对于较旧的浏览器，您可以使用诸如[h5f](https://github.com/ryanseddon/H5F)或[webshim 之类的 polyfiller](https://github.com/aFarkas/webshim)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-11T11:54:53.747

这个在 JSP 页面中使用 javascript 进行即时验证的示例。

```
<html>
    <head>

    <script type="text/javascript">
        function myFunction() {  

            if((document.getElementById("User").value).length == 0)
            {
                document.getElementById("user").innerHTML = "Username is required";
            }

            if((document.getElementById("Password").value).length == 0)
            {
                document.getElementById("pass").innerHTML = "Password is required";
            }

            var uploadfile = document.getElementById('File');

            if (!(uploadfile .value.match(/pdf$/) || uploadfile .value.match(/PDF$/)))
            {
                document.getElementById("file").innerHTML = "Incorrect file type. Only file type .pdf id allowed";
            }

            if(uploadfile .value == 0)
                {
                document.getElementById("file").innerHTML = "Empty file was uploaded. Please upload a PDF file.";
                }

    }

    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>test file</title>
    </head>
    <body>
        <h1>Instant Validation</h1>
        <form action=""  method="post" 
        style="border: 1px solid green; width: 700px; height: 157px;">

        <table style="width: 800px; ">
            <col width="120"> 

            <tr>
                <th align="left">New File</th>
                <td style="width: 100px;"><b>:</b><INPUT ENCTYPE="multipart/form-data" METHOD=POST NAME="File" TYPE="file" id="File" >
                </td>
                <td style="text-align: left; color: red;" id="file"></td>
            </tr>
            </table>
            <table style="width: 800px; height: 80px;">
            <col width="120">
            <tr>
                <th align="left">Username</th>
                <td  style="width: 100px;"><b>:</b><input type="text" name="User"
                    id="User" /></td>
                <td style="text-align: left; color: red;" id="user"></td>
            </tr>
            <tr>
                <th align="left">Password</th>
                <td  style="width: 100px;"><b>:</b><input type="password" name="Password"
                    id="Password" />
                </td>
                <td style="text-align: left; color: red;" id="pass"></td>
            </tr>

        </table>

        <table>
            <tr>
                <button  style = "color: green;" type="reset" value="Reset" onClick="window.location.reload()">Clear</button><a> </a>
                <button  style = "color: green;" type="button" onclick="myFunction()" value="submit">Submit</button>
            </tr>
        </table>
    </form>

    </body>
    </html>
```

# java - JSF p:calendar in p:dataTable: 如何获取 p:ajax dateSelect 事件的行

> ID：10276602
> 
> 赞同：0
> 
> 时间：2012-04-23T07:38:38.853
> 
> 标签：java, ajax, jsf-2, primefaces

在我的设置中，我有一个`@Named`Bean，该类`ObWithDate`是一个`@Entity`带有 date 字段*validFrom*的类。此类的对象在`List<ObWithDate>`bean 中。`ObWithDate`如果用户更改日期，我想立即更新。因此`p:dataTable`显示了几个`p:calendar`组件：

![在此处输入图像描述](../Images/feb4ffb8679ec6d0a8c0df290f6a27c4.png)

```
<h:form id="fUser">
<p:dataTable id="dt" var="i" value="#{myBean.list}">
  <p:column>
    <p:calendar id="cValidFrom" value="#{i.validFrom}">  
      <p:ajax event="dateSelect" listener="#{myBean.up}" update=":fUser:dt"/>  
    </p:calendar>                
  </p:column>
</p:dataTable>
</h:form> 
```

豆的代码：

```
public void up(DateSelectEvent event)
{
  logger.info("DateSelectEvent "+event.getDate());
  // How to get the corresponding ObWithDate?
} 
```

这是[Primefaces p:calendar 的后续问题，其中 p:ajax 值未更新（一步延迟）](https://stackoverflow.com/questions/10175371)，但现在针对具体问题：*如何在 beans 方法内的 ajax 调用中获取相应的列表项？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:58:57.663

您可以通过编程方式解析`#{i}`（顺便说一下可怕的变量名）。

```
FacesContext context = FacesContext.getCurrentInstance();
ObWithDate obWithDate = (ObWithDate) context.getApplication().evaluateExpressionGet(context, "#{i}", ObWithDate.class);
// ... 
```

另一种方法是使用`DataModel`as 的值，`<p:dataTable>`以便您可以使用`DataModel#getRowData()`.

```
private transient DataModel<ObWithDate> model;

private DataModel<ObWithDate> getModel() {
    if (model == null) {
        model = new ListDataModel<ObWithDate>(list);
    }
    return model;
} 
```

这样就可以在监听器方法中获取如下

```
ObWithDate obWithDate = model.getRowData();
// ... 
```

### 也可以看看：

*   [如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable/4994833#4994833)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:39:58.767

> @Daniel 请将此添加为答案，至少这是一种解决方法

添加:)

可能是这样的方向（可能不是:)）

```
UIComponent ui = (UIComponent) event.getSource(); 
ui.getParent().findComponent( .... 
```

放置一个断点并在日食的“手表”中尝试一些......

# ember.js - Emberjs v0.9.7.1 的断言失败错误 - 如果您还指定了模板名称，则无法提供模板块

> ID：10276603
> 
> 赞同：2
> 
> 时间：2012-04-23T07:38:45.930
> 
> 标签：ember.js, handlebars.js

包含最新的 emberjs 0.9.7.1 js 后，我收到以下错误。

请对以下错误的含义有任何帮助吗？

**错误：**

```
Uncaught Error: assertion failed: You cannot provide a template block if you also specified a templateName 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T07:44:56.870

错误似乎很明显。您不能同时设置模板块和模板名称。我想你已经定义了类似的东西：

```
App.MyEmberView = Ember.View.create({

template : Ember.Handlebars.compile('...template string..'),
templateName: 'MyTemplateName'

}); 
```

# git - 在存储库中存储测试数据的位置？

> ID：10276604
> 
> 赞同：16
> 
> 时间：2012-04-23T07:38:53.230
> 
> 标签：git, unit-testing, svn, version-control

我有一个分析图像的项目。该项目的测试数据 - 大约 15 GB 的图像。问题：鉴于需要存储多个版本并且大多数开发人员都需要这些数据，在哪里存储这些测试数据？

在与代码相同的存储库中？在具有外部参考的单独存储库中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T11:41:43.167

I would agree with the other answers that it's a bad idea to keep this much test data in your repository. There are a couple of systems, however, that let you conveniently refer to (and download) large data from outside your git repository:

*   [git annex](http://git-annex.branchable.com/) by Joey Hess
*   [git media](https://github.com/schacon/git-media) by Scott Chacon

I'm afraid that I haven't used either for any serious purpose myself, but they sound like plausible solutions to what you want.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:31:39.797

如果这些图像只是开发人员或想要运行测试的人需要，我可能会将它们放在一个子模块中，因为它们看起来相当大......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T09:07:55.890

您需要将它们存储在单独的引用中，更适合这些类型的文件。

使用[此处建议的](https://stackoverflow.com/questions/3432013/version-control-solution-for-a-build-system-that-produces-a-4gb-iso/3432551#3432551)[Nexus 之](http://www.sonatype.org/nexus/)类的工件存储库。 在您的 DVCS 存储库中添加从 Nexus 获取正确版本所需的脚本。

这样，您可以快速轻松地克隆*源代码*，并在需要时从第二个引用下载二进制文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T09:22:54.167

有很多选择，但是您应该注意将任何解决方案正确地集成到您的 git 存储库中。

Git 是版本控制系统，更准确地说，它存储项目的快照列表。每个快照都代表您在某个时间点的项目。

无论您选择哪种解决方案，您的项目都应该可以提取项目历史中任何快照中存在的测试数据。

例如，如果每个图像都永久存在于一个固定的 URL 中，那么您的 git 项目可以简单地存储一个包含所有 URL 的文本文件。在运行时，让脚本获取每个图像。随着项目的发展以及在测试集中添加或删除图像，不要更改现有的 URL 方案。更新指针文件并提交。

另一个好主意可能是在每个 URL 记录图像的*md5*或*sha1哈希值。*您的下载脚本应该在运行时进行比较以检查，因此您可以收到任何不一致的警告。

# android - 我们如何制作守护程序应用程序？

> ID：10276605
> 
> 赞同：0
> 
> 时间：2012-04-23T07:38:53.843
> 
> 标签：android, daemon

让原生安卓应用程序像守护进程一样运行。在我正在开发的应用程序中。当我们打开另一个东西时，我们如何制作一个在后台工作的应用程序？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-01-08T16:00:01.403

我对此有一些想法。它可以使您的过程不死。它从 api 8 到 23 运行良好。无论是“设置”中的“强制关闭”还是具有 root 权限的第三方应用程序中的“后台清理”。

见[https://github.com/Marswin/MarsDaemon](https://github.com/Marswin/MarsDaemon)

# wcf - WCF\SOA 数据消费最佳实践

> ID：10276609
> 
> 赞同：0
> 
> 时间：2012-04-23T07:39:11.713
> 
> 标签：wcf, soa

我在 WCF 中试试运气，但我不确定应该如何将数据从服务传输到客户端。

假设我的数据库中有一个 Worker 实体，每个工人都有一些任务。服务应该只传输 Worker 实体，而不是通过额外的请求传输任务，还是该实体已经包含任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:46:27.513

两种方法都是正确的。这取决于工人是否可以在没有任务的情况下存在=>是否存在客户端只会获取工人的情况？如果是，那么您可以有单独的方法来获取工作人员和任务。但是，如果每次客户端发送 2 个请求，因为他们总是需要与工作人员关联的任务，那么您最好使用聚合根。就性能而言，最好发送一个大请求而不是多个较小的请求。

# css - 是否可以在 CSS 中创建双边框？

> ID：10276611
> 
> 赞同：0
> 
> 时间：2012-04-23T07:39:19.847
> 
> 标签：css

我正在尝试依靠 CSS 为导航菜单栏创建双边框，其中顶部有双边框，底部有双边框。我还希望两条线有 1px 的阴影来创建嵌入式外观。

![在此处输入图像描述](../Images/5971f1c5701fe776c2bcc734628c00c6.png)

我如何使用 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:46:37.263

您可以`:after`为此使用属性。像这样写：

**CSS**

```
div{
    height:30px;
    position:relative;
    border-top:1px solid green;
    border-bottom:1px solid green;
    margin:10px;
}
div:after{
    content:'';
    position:absolute;
    top:-3px;
    bottom:-3px;
    left:0;
    right:0;
    border-top:1px solid green;
    border-bottom:1px solid green;
} 
```

**HTML**

```
<div></div> 
```

检查这个[http://jsfiddle.net/ECFBR/8/](http://jsfiddle.net/ECFBR/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:42:45.853

有什么问题？

```
border-top: 3px #000 double;
border-bottom: 3px #000 double; 
```

# c# - 如何在表单视图的数据绑定事件中访问服务器端变量

> ID：10276614
> 
> 赞同：0
> 
> 时间：2012-04-23T07:39:34.333
> 
> 标签：c#, asp.net

```
 protected void dvUserMaster_DataBound(object sender,EventArgs e)
{

   string CustCreatedBy = DataBinder.Eval(e.ToString(),"strcustomer_name").ToString();
   string EmpCreatedBy = DataBinder.Eval(e.ToString(), "stremployee_name").ToString();} 
```

strcustomer_name 是我要评估为特定条件的字符串。如何在formview的数据绑定事件中从cs文件中访问字符串的值

谢谢，

# eclipse - 项目资源管理器为空

> ID：10276618
> 
> 赞同：1
> 
> 时间：2012-04-23T07:39:50.620
> 
> 标签：eclipse, eclipse-rcp

我已将项目资源管理器视图添加到我自己的 rcp 应用程序中。它在窗口中可见，我可以使用新项目向导创建一个新项目。

但是有几个问题：

*   首先创建项目时，项目资源管理器不显示项目名称，有一个空行（就像树节点有空标签时一样）；
*   第二个当我重新启动应用程序时，项目资源管理器中根本没有显示任何项目（应用程序运行之间没有清除工作区）；

我搜索了我的问题，我找到的所有解决方案都是指提供默认页面输入。我通过以下方式覆盖默认输入：

```
@Override
    public IAdaptable getDefaultPageInput() {
        return ResourcesPlugin.getWorkspace().getRoot();
    } 
```

但是它没有帮助，问题仍然完好无损。

我的插件引用了以下插件：

```
org.eclipse.ui,
org.eclipse.core.runtime,
org.eclipse.ui.ide;bundle-version="3.7.0",
org.eclipse.ui.navigator.resources;bundle-version="3.4.300",
org.eclipse.core.resources;bundle-version="3.7.100",
org.eclipse.ui.navigator;bundle-version="3.5.100" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:29:34.200

我找到了问题的根本原因。我的应用程序中缺少适配器映射。所以解决方案是调用`IDE.registerAdapters()`注册所有必要的适配器。在那次通话之后，我设法用一些内容填充视图。胜利！！！！

# cuda - CUDART 版本的 CUDA 版本不足。在没有NVIDIA卡的emu模式下运行

> ID：10276619
> 
> 赞同：1
> 
> 时间：2012-04-23T07:39:54.870
> 
> 标签：cuda, nvidia

我得到错误 -

```
cutilCheckMsg() CUTIL CUDA error : Kernel execution failed
: CUDA version is insufficient for CUDART version. 
```

当我运行示例代码时。但是代码构建成功

我正在运行程序的环境详细信息 -

没有 NVIDIA 驱动程序的 Windows XP

Visual Studio 2008 速成版

Cuda 工具包，sdk 3.0

仿真模式

这是之前在 SO 上提出的类似问题，但在这种情况下，该人拥有 NVIDIA 卡。我的机器上没有 NVIDIA 卡。- [CUDA 驱动程序版本对于 CUDA 运行时版本不足](https://stackoverflow.com/questions/3253257/cuda-driver-version-is-insufficient-for-cuda-runtime-version)

请提出解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:24:56.287

目前，在没有 GPU 的情况下运行 CUDA 代码的唯一方法是使用[PGI 的 CUDA x86](http://www.pgroup.com/resources/cuda-x86.htm)。模拟模式在几个版本之前从 CUDA 中删除（当前版本是 CUDA 4.2）。

# iphone - Illustrator 和 iPhone 中的颜色不匹配

> ID：10276620
> 
> 赞同：0
> 
> 时间：2012-04-23T07:39:58.510
> 
> 标签：iphone, objective-c, uicolor, adobe-illustrator

我在 illustrator 中制作了一个 RGB 颜色 186 186 186 的图标，并且我已将背景颜色设置为相同。但是，当我测试应用程序时，它们似乎是不同的色调！

我与颜色配置文件有什么关系吗？

我试过这个链接： [如何使 Adob​​e Illustrator 中的颜色与 iPhone 4 上的颜色更接近？](https://stackoverflow.com/questions/5624572/how-can-i-make-colors-in-adobe-illustrator-line-up-more-closely-with-colors-on-t)

但这无济于事。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:21:45.217

我遇到过类似的问题，我至少在 Photoshop 中使用的是开发人员颜色选择器（免费： http: [//www.panic.com/~wade/picker/](http://www.panic.com/~wade/picker/)）或颜色（免费：[http:// mattpatenaude.com/](http://mattpatenaude.com/)）但这里有一些其他可能的问题：

*   在 illustrator 中检查您在此处使用的颜色模式：文件 > 文档颜色模式
*   如果您要将图像更改为 jpg、png 等，请检查您的默认颜色配置文件我知道在 Illustrator 中保存网页时有一个选项可以检查 ICC 配置文件。

如果您在 Adob​​e Creative Suite 2 中的整个 Adob​​e 套件中遇到此类问题，您可以使用 Bridge 在所有 Adob​​e 应用程序中同步您的颜色设置。

希望这可以帮助。

# android - Android OpenGL：为什么我缺少 2 个三角形？

> ID：10276621
> 
> 赞同：0
> 
> 时间：2012-04-23T07:40:00.070
> 
> 标签：android, opengl-es

我正在学习 OpenGL（在 Android 上），在我的代码中我指定了 4 个形成四面体的三角形，但由于某种原因，其中 2 个边似乎丢失了，我不明白为什么。我几乎以我能想到的任何方式对其进行了调整，但仍然没有运气。

这是我的代码，如果我做错了什么，请告诉我。

```
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.IntBuffer;

import javax.microedition.khronos.opengles.GL10;

public class Tetrahedron {

    private IntBuffer ver;
    private IntBuffer nor;
    private ByteBuffer ind;
    private float[] mat_ambient;
    private float[] mat_diffuse;
    private float[] mat_specular;
    private float[] mat_emission;

    public Tetrahedron() {

        int one = toInt(1.0f);
        int vertices[] = {
                //face 1
                -one, -one,  one,  //point 1
                  0 ,  one,   0 ,  //point 2
                 one, -one,  one,  //point 3

                //face 2
                  0 ,  one,   0 ,  //point 2
                 one, -one,  one,  //point 3
                  0 ,   0 , -one,  //point 4

                //face 3
                 one, -one,  one,  //point 3
                  0 ,   0 , -one,  //point 4
                -one, -one,  one,  //point 1

                //face 4
                  0 ,   0 , -one,  //point 4
                -one, -one,  one,  //point 1
                  0 ,  one,   0    //point 2

        };
        int normals[] = {
                -one, -one,  one,
                  0 ,  one,  one,
                 one, -one,  one,

                 one,  one, -one,
                 one,   0 ,   0 ,
                 one,  one, -one,

                 one, -one,  one,
                  0 , -one, -one,
                -one, -one,  one,

                -one,  one, -one,
                -one,   0 ,   0 ,
                -one,  one, -one 
        };

        byte indices[] = {
                0, 1, 2,
                3, 4, 5,
                6, 7, 8,
                9,10,11

        };

        ver=getIntBuffer(vertices);
        nor=getIntBuffer(normals);
        ind=getByteBuffer(indices);

        mat_ambient = new float[4];
        mat_ambient[0] = 0.3f;
        mat_ambient[1] = 0.3f;
        mat_ambient[2] = 0.3f;
        mat_ambient[3] = 1.0f;

        mat_diffuse = new float[4];
        mat_diffuse[0] = 0.9f;
        mat_diffuse[1] = 0.9f;
        mat_diffuse[2] = 0.9f;
        mat_diffuse[3] = 1.0f;

        mat_specular = new float[4];
        mat_specular[0] = 0.1f;
        mat_specular[1] = 0.1f;
        mat_specular[2] = 0.1f;
        mat_specular[3] = 1.0f;

        mat_emission = new float[4];
        mat_emission[0] = 0.0f;
        mat_emission[1] = 1.0f;
        mat_emission[2] = 0.0f;
        mat_emission[3] = 1.0f; 

    }
    private IntBuffer getIntBuffer(int[] data){
        ByteBuffer byteBuf = ByteBuffer.allocateDirect(data.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        IntBuffer buf = byteBuf.asIntBuffer();
        buf.put(data);
        buf.position(0);
        return buf;
    }
    private ByteBuffer getByteBuffer(byte[] data){
        ByteBuffer buf = ByteBuffer.allocateDirect(data.length);
        buf.put(data);
        buf.position(0);
        return buf;
    }
    private int toInt(float num){
        return (int)(num*65536);
    }

    public void draw(GL10 gl){
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_NORMAL_ARRAY);

        gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_AMBIENT, mat_ambient, 0);
        gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_DIFFUSE, mat_diffuse, 0);
        gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_SPECULAR, mat_specular, 0);
        gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_EMISSION, mat_emission, 0);
        gl.glMaterialf(GL10.GL_FRONT, GL10.GL_SHININESS, 56);

        gl.glFrontFace(GL10.GL_CW);
        gl.glVertexPointer(3, GL10.GL_FIXED, 0, ver);
        gl.glNormalPointer(GL10.GL_FIXED, 0, nor);
        gl.glDrawElements(GL10.GL_TRIANGLES, ind.capacity(), GL10.GL_UNSIGNED_BYTE, ind);

        gl.glDisableClientState(GL10.GL_NORMAL_ARRAY);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T07:48:15.147

您可以尝试禁用面部剔除，以确保您没有这些面部向后：

```
gl.glDisable(GL10.GL_CULL_FACE);
//You should also comment out this: gl.glFrontFace(GL10.GL_CW); 
```

如果这解决了问题，请反转有问题的三角形的绕组（切换点 1 和 3），然后恢复面剔除。

# javascript - 如何在 Firefox Add-on SDK 中将面板位置更改为鼠标位置

> ID：10276622
> 
> 赞同：2
> 
> 时间：2012-04-23T07:40:04.110
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我希望在鼠标在屏幕上的位置显示一个面板。

Firefox SDK 文档不是很详细，我在理解如何更改面板位置时遇到了一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:43:28.300

可悲的是，你不能。如果我查看源代码，插件 SDK 总是在浏览器窗口的中间显示面板。只有一个未记录的选项可以将面板锚定在某些网页的节点上，但这显然是未记录的原因（SDK 扩展通常无法获取此类节点）。即使该选项可用，也无法解决您的问题。我猜“最简单”的解决方案是`packages/addon-kit/lib/panel.js`在您的扩展中采用并使用修改后的版本，该方法`show()`可以采用屏幕坐标（该方法底部的参数`x`和调用`y`中的参数是屏幕坐标）。`openPopup()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T04:25:28.670

我试图在导航栏中创建一个按钮，然后通过它显示一个面板，而不是使用一个小部件来显示一个按钮，因为它与插件工具栏相关联。

为了在导航栏中放置一个按钮，我在这里使用了代码：

[http://kendsnyder.com/posts/firefox-extensions-add-button-to-nav-bar](http://kendsnyder.com/posts/firefox-extensions-add-button-to-nav-bar)

在他的代码中，您会注意到有一点看起来像这样：

```
 btn.addEventListener('click', function() {
    // do stuff, for example with tabs or pageMod
}, false) 
```

正如弗拉基米尔提到的，您必须将面板锚定到一个元素，因此在点击事件中我添加了以下内容：

```
panel.show(utils.getMostRecentBrowserWindow().document.getElementById("myButton")); 
```

我这样声明了 utils：

```
var utils = require("sdk/window/utils"); 
```

您实际上可以将[Panel](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/panel.html)锚定到浏览器中的任何元素。例如，您可以将其锚定到导航栏：

```
 panel.show(utils.getMostRecentBrowserWindow().document.getElementById("nav-bar")); 
```

或锚定到状态栏，如下所示：

```
panel.show(utils.getMostRecentBrowserWindow().document.getElementById("statusbar-display")); 
```

希望这可以帮助某人。干杯!

# java - f:event 在 ah:panelGroup 内触发，且 render=false

> ID：10276623
> 
> 赞同：2
> 
> 时间：2012-04-23T07:40:05.867
> 
> 标签：java, jsf, facelets

我有`f:event`一个`h:panelGroup`带有`rendered="false"`属性的组件。我希望 f:event 侦听器仅在块被渲染时才被触发，否则。我的代码如下：

```
 <h:panelGroup rendered="false">
      <f:event type="preRenderView" listener="#{listRetriever.retrieveFollowers()}"/>
      <ui:repeat value="#{listRetriever.list}" var="person">
             #{person}<br/>
      </ui:repeat>
 </h:panelGroup> 
```

我该如何正确实施呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:30:17.727

还有另一个事件来管理组件渲染`preRenderComponent`：

```
<h:panelGroup rendered="false">
    <f:event type="preRenderComponent" listener="#{listRetriever.retrieveFollowers()}"/>
    <ui:repeat value="#{listRetriever.list}" var="person">
           #{person}<br/>
    </ui:repeat>
</h:panelGroup> 
```

`preRenderViewEvent`在渲染整个视图之前处理。

`preRenderComponentEvent`在视图渲染期间处理，就在渲染包含的组件之前`<f:event>`。

# iphone - 以编程方式填充的 TableView 错误

> ID：10276628
> 
> 赞同：0
> 
> 时间：2012-04-23T07:40:21.800
> 
> 标签：iphone, objective-c, ios, nsmutablearray

向下滚动表格视图时出现此错误：

```
2012-04-23 09:32:36.763 RedFox[30540:207] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 12 beyond bounds [0 .. 11]'
*** First throw call stack:
(0x13c3052 0x1554d0a 0x13af674 0x5794 0xb3e0f 0xb4589 0x9fdfd 0xae851 0x59322 0x13c4e72 0x1d6d92d 0x1d77827 0x1cfdfa7 0x1cffea6 0x1cff580 0x13979ce 0x132e670 0x12fa4f6 0x12f9db4 0x12f9ccb 0x12ac879 0x12ac93e 0x1aa9b 0x2158 0x20b5)
terminate called throwing an exceptionsharedlibrary apply-load-rules all
Current language:  auto; currently objective-c 
```

在我的 .h 文件中，我有：

```
@interface MyTableView : UIViewController  <UITableViewDataSource> {
    int currentRow;
}

@property (strong,nonatomic) UITableView *tableView;
@property (strong,nonatomic) ViewBuilder *screenDefBuild; 
```

在我的 .m 文件中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [screenDefBuild.elementsToTableView count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];
    }

    ScreenListElements *currentScreenElement = [screenDefBuild.elementsToTableView objectAtIndex:currentRow]; //exception points here!
    cell.textLabel.text = currentScreenElement.objectName;

    currentRow++;    
    return cell;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    tableView = [[UITableView alloc] initWithFrame:self.view.bounds];
    [tableView setDataSource:self];
    [self.view addSubview:tableView];
} 
```

那有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:50:31.813

该`currentRow`变量是不必要的并且会导致问题！

修理：

换行

```
 ScreenListElements *currentScreenElement = [screenDefBuild.elementsToTableView objectAtIndex:currentRow]; //exception points here! 
```

到

```
 ScreenListElements *currentScreenElement = [screenDefBuild.elementsToTableView objectAtIndex:indexPath.row]; //exception points here! 
```

原因：

`currentRow`每次`cellForARowAtIndexPath:`调用时都会递增，这是错误的，因为此方法不仅在显示以下单元格时（向下滚动时）调用，而且在向上滚动时调用（因此`currentRow`应该递减）。这就是 Apple 放置参数的原因，`indexPath`以便您可以轻松确定 tableView 正在请求哪个单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:50:33.630

currentRow 对我来说真的没有意义。要返回包含一行源数组 (elementsToTableView) 的单元格，您需要询问当前索引路径中的行。

您的引起错误的行应如下所示：

```
ScreenListElements *currentScreenElement = [screenDefBuild.elementsToTableView objectAtIndex: indexPath.row]; 
```

而且您根本不需要 currentRow 。你为什么以这种方式实施它？

# android - 检测 TextView 的文本是否已更改的最佳方法？

> ID：10276632
> 
> 赞同：10
> 
> 时间：2012-04-23T07:40:37.677
> 
> 标签：android

检测 TextView 的文本是否已更改的最佳方法？类似于脏检查的东西——所以我只能保存已更改的文本字段。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T07:49:15.610

将 textChangeListener 添加到文本视图，如下所示。用方法写你的东西 `onTextChanged()`。

```
 TextView txtview = new TextView(this);
            txtview.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub

                }
            }); 
```

# ms-access - access 2007如何防止重复行

> ID：10276633
> 
> 赞同：0
> 
> 时间：2012-04-23T07:40:39.877
> 
> 标签：ms-access, duplicates

现在我正在使用三个表 A、B 和 C：

表结构：ID、姓名、年龄

B表结构：ID、A.ID->外键、医院名称

C表结构：ID、A.ID->外键、药名

所以A和B之间的关系是一对多的，A和C也一样

当我进行任何查询以查找我的数据库中有多少人时，我发现重复的行实际上并没有重复，但它有例如 2 行与子表，例如：一个人在表 B 中有 2 条记录，所以结果不反映匹配记录的实际数量，因为它与子表相关联。

**问题是：**在这种情况下如何防止重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:51:04.450

您可以使用 Distinct 或子查询。

```
SELECT DISTINCT a.ID, a.Name
FROM a
INNER JOIN b
ON a.ID = b.aID
WHERE b.Hospital = 123 
```

或者

```
WHERE b.Hospital IN ( 123, 456 ) 
```

还

```
SELECT a.ID, a.Name
FROM a
INNER JOIN (SELECT aID, Hospital FROM b) x
ON a.ID = x.aID
WHERE x.Hospital - 123 
```

和

```
SELECT a.ID, a.Name
FROM a
WHERE a.ID 
IN ((SELECT aID FROM b WHERE Hospital = 123)) 
```

# c - 在 C 中将浮点值缩放到 (0-100) 的函数

> ID：10276636
> 
> 赞同：0
> 
> 时间：2012-04-23T07:40:46.063
> 
> 标签：c, floating-point, integer, scale

我正在尝试将浮点变量转换为 0 到 100 之间的整数值。浮点数始终为正。对应的整数值应该反映浮点值的大小与 32 位浮点数的最大值相比，例如 0.0 转换为 0 和 3.402823466 E + 38 转换为 100，以及介于两者之间的任何其他值。

这是我到目前为止所拥有的，但我一直将 -1 作为任何非零输入的输出。

```
int convFloat(float x){
    int y;
    y = (int) (x/3.4e38) * 100;
    return y;
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:44:38.867

这个：

```
y = (int) (x/3.4e38) * 100;
//  ^--------------^
//  cast (x/3.4e38)to int 
```

应该：

```
y = (int) ((x/3.4e38) * 100);
//  ^----------------------^
//  cast ((x/3.4e38) * 100)to int 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:20:53.413

```
((union { float f; uint32_t u; }){ val }.u>>23&255)*100/255 
```

# events - facebook graph api - 如何取消邀请多个朋友参加活动？

> ID：10276640
> 
> 赞同：0
> 
> 时间：2012-04-23T07:41:01.073
> 
> 标签：events, facebook-graph-api

[文档](https://developers.facebook.com/docs/reference/api/event/)中的事件一次只能邀请一位好友。

我想取消邀请多个朋友 - 怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:44:35.317

您可以向Graph API中的对象连接发出`DELETE`请求（或 GET with ）：[`invited`](http://developers.facebook.com/docs/reference/api/event/#invited)[`event`](http://developers.facebook.com/docs/reference/api/event/)`method=delete`

```
https://graph.facebook.com/EVENT_ID/invited?users=uid1,uid2,uid3&method=delete 
```

# sql - 需要修改这个查询

> ID：10276643
> 
> 赞同：1
> 
> 时间：2012-04-23T07:41:26.547
> 
> 标签：sql, sql-server-ce

我有一个查询，直到不久前我认为它正在按预期工作。

以下查询遍历我的“玩家”表，并将**该学校**中具有最高技能的每个玩家的“起始者”值更新为真。

例如，如果有 500 名体重为 X 的玩家，它将选择所有属于同一学校的玩家，并且对于那些技能最高的玩家，它会将“starter”值更新为 true。

```
UPDATE player 
    SET starter = 'TRUE' 
    WHERE NOT EXISTS
    (
      SELECT school, weight, skill 
      FROM player b " 
      WHERE b.school = player.school 
      AND b.weight = player.weight 
      AND b.skill > player.skill
    )
    AND player.game_id = 1 
```

我现在遇到的问题是，如果有 2 名来自同一学校、体重相同、技能相同的球员，那么他们的“starter”值都设置为 true。

所以我的问题是，我需要在这个查询中添加什么才能只允许一个特定学校的重量级初学者？

我还有一个名为“年龄”的列，如果可以的话，我想选择出现相同技能的两者中较低的年龄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:48:32.110

您将不得不更改您的查询，以便只更新那些行，这些行没有其他行用于此`school`/`weight`具有更大`skill` **或**更低的`age`。

`id`如果您有相同`skill`和相同的行，我还会添加一个唯一列`age`。

代替

```
AND b.skill > player.skill 
```

经过

```
AND (    ( b.skill > player.skill )
      OR ( b.skill = player.skill AND b.age < player.age )
      OR ( b.skill = player.skill AND b.age = player.age AND b.id > player.id )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:57:19.430

我不知道如何为此计算技能已经写了一个替换选择你可以加入它并相应地更新行。还创建了一些 9 行的示例数据；最后两个 H 和我有相同的技能和学校，但不同的年龄（一天）。假设你有出生日期，最大值/最小值将起作用。您仍然可以拥有相同年龄的球员，因此需要有一个机制来处理这个问题。不确定标准，所以这里不适合。

```
declare @players table (school varchar(100), weight float, skill int, dob datetime, name varchar(100))

insert into @players
select 'a', 100, 10, GETDATE(), 'a'
union all select 'a', 101, 11, GETDATE(), 'b'
union all select 'a', 102, 12, GETDATE(), 'c'
union all select 'a', 103, 13, GETDATE(), 'd'
union all select 'a', 104, 14, GETDATE(), 'e'
union all select 'a', 105, 15, GETDATE(), 'f'
union all select 'a', 106, 16, GETDATE(), 'g'
union all select 'a', 107, 17, GETDATE(), 'h'
union all select 'a', 107, 17, dateadd(dd,-1,GETDATE()), 'i'

select * from @players
SELECT 
        school, 
        weight, 
        max(skill) as Skill,
        MIN(dot) as DOB
FROM @players b 
group by school, weight 
```

这返回；8 排并选择 107 名体重类​​别的球员中较年轻的。

```
school  weight  (No column name)    (No column name)
a   100 10  2012-04-23 08:53:19.877
a   101 11  2012-04-23 08:53:19.877
a   102 12  2012-04-23 08:53:19.877
a   103 13  2012-04-23 08:53:19.877
a   104 14  2012-04-23 08:53:19.877
a   105 15  2012-04-23 08:53:19.877
a   106 16  2012-04-23 08:53:19.877
a   107 17  2012-04-22 08:53:19.877 
```

# haskell - 检查haskell中的公式是否正确

> ID：10276644
> 
> 赞同：0
> 
> 时间：2012-04-23T07:41:28.330
> 
> 标签：haskell, gadt

---- 更新 2 ----

最后，他告诉我那是`Exists`……</p>

谢谢你们。

- - 更新 - -

好的，我们称之为`Forsome`

`ex3: forsome x0::[False,True]. forsome x1::[0,1,2]. (x0 || (0 < x1))`

（谁告诉我“什么是 forall”）：

```
the constructor says "forall x in blah" but it really means "for some x in blah". 

the formula is satisfied for some assignment of variables so it is satisfiable. 
```

我该怎么做？谢谢

- - 原来的 - -

假设我们有一个公式 ex3

`ex3: forall x0::[False,True]. forall x1::[0,1,2]. (x0 || (0 < x1))`.

起初我认为 ex3 是`False`，因为当`x0 = False`和`x1 = 0`公式是`(False || (0 < 0))` 所以 ex3 是绝对错误的。但有人告诉我 ex3`True`是

`"satisfiable ex3 is true because there is at least one combination from sets x0 and x1 which returns true. So as long as there is 1 valid solution in Forall, it is true."`

假设这是正确的……</p>

我认为它需要检查具有相同级别的组合组，但我不知道该怎么做。确定“他们是同一组”似乎很困难。

这是我的代码：

文件：Formula.hs

```
{-# LANGUAGE GADTs #-}

module Formula where

-- Datatype of formulas
-- --------------------

data Formula ts where
  Body   :: Term Bool                     -> Formula ()
  Forall :: Show a 
         => [a] -> (Term a -> Formula as) -> Formula (a, as)

data Term t where
  Con     :: t         -> Term t
  And     :: Term Bool -> Term Bool -> Term Bool
  Or      :: Term Bool -> Term Bool -> Term Bool
  Smaller :: Term Int  -> Term Int  -> Term Bool
  Plus    :: Term Int  -> Term Int  -> Term Int
  Name    :: String    -> Term t    -- to facilitate pretty printing

-- Pretty printing formulas
-- ------------------------

instance Show t => Show (Term t) where
  show (Con v)       = show v
  show (And p q)     = "(" ++ show p ++ " && " ++ show q ++ ")"
  show (Or p q)      = "(" ++ show p ++ " || " ++ show q ++ ")"
  show (Smaller n m) = "(" ++ show n ++ " < "  ++ show m ++ ")"
  show (Plus n m)    = "(" ++ show n ++ " + "  ++ show m ++ ")"
  show (Name name)   = name

instance Show (Formula ts) where
  show = show' ['x' : show i | i <- [0..]]
    where
      show' :: [String] -> Formula ts' -> String
      show' ns     (Body body)   = show body
      show' (n:ns) (Forall vs p) = "forall " ++ n ++ "::" ++ show vs ++ ". " ++ show' ns (p (Name n))

-- Example formulas
-- ----------------

ex1 :: Formula ()
ex1 = Body (Con True)

ex2 :: Formula (Int, ())
ex2 = Forall [1..10] $ \n ->
        Body $ n `Smaller` (n `Plus` Con 1)

ex3 :: Formula (Bool, (Int, ()))
ex3 = Forall [False, True] $ \p -> 
      Forall [0..2] $ \n -> 
        Body $ p `Or` (Con 0 `Smaller` n)

wrongFormula :: Formula (Int, ())
wrongFormula = Forall [0..4] $ \n ->
                 Body $ n `Smaller` (Con 0) 
```

文件：Solver.hs

```
{-# LANGUAGE GADTs #-}

module Solver where

import Formula

-- Evaluating terms
-- ----------------

eval :: Term t -> t
eval (Con     v)   = v
eval (And     p q) = eval p && eval q
eval (Or      p q) = eval p || eval q
eval (Smaller n m) = eval n <  eval m
eval (Plus    n m) = eval n +  eval m
eval (Name    _)   = error "eval: Name"

-- Checking formulas
-- -----------------

satisfiable :: Formula ts -> Bool
satisfiable (Body body)    = eval body
-- FIXME wrong implement
--satisfiable (Forall xs f) = helper f xs
--  where helper :: (Term a -> Formula t) -> [a] -> Bool
--        helper fn (a:as) = (satisfiable $ (fn . Con) a) && (helper fn as)
--        helper _ []     = True 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:50:41.180

我同意 Daniel 的观点，这描述了`Exists`, not `Forall`，但如果你想这样解释它，你只需要改变`&&`to`||`和`True`to `False`。

或者，更好的是，使用 Prelude 函数

```
all :: (a -> Bool) -> [a] -> Bool  -- is predicate true for all elements?
any :: (a -> Bool) -> [a] -> Bool  -- is predicate true for any element? 
```

您可以将现有的实现编写为

```
satisfiable (Forall xs f) = all (satisfiable . f . Con) xs 
```

所以要改变它，你只需改变`all`to `any`。

# matlab - 与 SOM 工具箱相关

> ID：10276646
> 
> 赞同：0
> 
> 时间：2012-04-23T07:41:28.813
> 
> 标签：matlab, som

我需要与 som 工具箱相关的帮助。这是问题。“我们有 100 条输入记录（属于两个类）我们如何从 SOMToolbox 输出中知道特定输入说数字 35 是聚类为 1 类还是 2 类，我们可以从 u-matrix 最终确定它还是有任何其他文件，我们想从 SOM 输出中确定准确度"

如果您知道答案并等待您的建议，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:09:05.793

您可以指定要训练的数据数量，也可以在限制后停止训练。当数据在 matlab 的 som-toolbox 中处理时，可以实时看到网格上的变化。

# android - 将最大 50MB 的视频上传到服务器

> ID：10276647
> 
> 赞同：2
> 
> 时间：2012-04-23T07:41:39.020
> 
> 标签：android

我想将视频从我的 android 应用程序上传到服务器。当我尝试上传视频时，我的应用程序显示
`04-23 13:07:41.602: ERROR/dalvikvm-heap(519): Out of memory on a 15607356-byte allocation.`我不知道为什么会发生错误。我的问题是我们可以使用下面的代码上传大小高达 50MB 的视频吗？如果有人知道请帮我...

```
private void doFileUpload(){
            HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****";
            int bytesRead, bytesAvailable, bufferSize;
            byte[] buffer;
            int maxBufferSize = 8*1024*1024;
            Cursor c = (MainscreenActivity.JEEMAHWDroidDB).query((MainscreenActivity.TABLE_Name), new String[] {
                     (MainscreenActivity.COL_HwdXml)}, null, null, null, null,
                              null);
             if(c.getCount()!=0){
             c.moveToLast();
             for(int i=c.getCount()-1; i>=0; i--) {
                  value=c.getString(0);           
             }
             }
            String urlString = value+"/upload_file.php";
            try
            {
             //------------------ CLIENT REQUEST
                UUID uniqueKey = UUID.randomUUID();
                fname = uniqueKey.toString();
                Log.e("UNIQUE NAME",fname);

            FileInputStream fileInputStream = new FileInputStream(new File(selectedPath) );
            URL url = new URL(urlString);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
            dos = new DataOutputStream( conn.getOutputStream() );
             dos.writeBytes(twoHyphens + boundary + lineEnd);
             dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + fname + "."+extension+"" + lineEnd);
             dos.writeBytes(lineEnd);
             bytesAvailable = fileInputStream.available();
             System.out.println("BYTES:--------->"+bytesAvailable);
             bufferSize = Math.min(bytesAvailable, maxBufferSize);
             System.out.println("BUFFER SIZE:--------->"+bufferSize);
             buffer = new byte[bufferSize];
             System.out.println("BUFFER:--------->"+buffer);
             bytesRead = fileInputStream.read(buffer,0,bufferSize);
             System.out.println("BYTES READ:--------->"+bytesRead);
             while (bytesRead > 0)
             {
              dos.write(buffer, 0, bufferSize);
              bytesAvailable = fileInputStream.available();
              bufferSize = Math.min(bytesAvailable, maxBufferSize);
              bytesRead = fileInputStream.read(buffer, 0, bufferSize);
              System.out.println("RETURNED");
             }
             dos.writeBytes(lineEnd);
             dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

             Log.e("Debug","File is written");
             fileInputStream.close();
             dos.flush();
             dos.close();

            }
            catch (MalformedURLException ex)
            {
                 Log.e("Debug", "error: " + ex.getMessage(), ex);
            }
            catch (IOException ioe)
            {
                 Log.e("Debug", "error: " + ioe.getMessage(), ioe);
            }
            //------------------ read the SERVER RESPONSE
            try {
                  inStream = new DataInputStream ( conn.getInputStream() );
                  String str;

                  while (( str = inStream.readLine()) != null)
                  {
                       Log.e("Debug","Server Response "+str);
                  }
                  inStream.close();

            }
            catch (IOException ioex){
             Log.e("Debug", "error: " + ioex.getMessage(), ioex);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:05:58.927

尝试更换

```
 bytesAvailable = fileInputStream.available();
 System.out.println("BYTES:--------->"+bytesAvailable);
 bufferSize = Math.min(bytesAvailable, maxBufferSize);
 System.out.println("BUFFER SIZE:--------->"+bufferSize);
 buffer = new byte[bufferSize];
 System.out.println("BUFFER:--------->"+buffer);
 bytesRead = fileInputStream.read(buffer,0,bufferSize);
 System.out.println("BYTES READ:--------->"+bytesRead);
 while (bytesRead > 0)
 {
  dos.write(buffer, 0, bufferSize);
  bytesAvailable = fileInputStream.available();
  bufferSize = Math.min(bytesAvailable, maxBufferSize);
  bytesRead = fileInputStream.read(buffer, 0, bufferSize);
  System.out.println("RETURNED");
 } 
```

和

```
buffer = new byte[8192];
bytesRead = 0;
while ((bytesRead = fileInputStream.read(buffer)) != -1) {
    dos.write(buf, 0, bytesRead);
} 
```

解释：[`read()`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5b%5d%29)将返回它读取的字节数，或者`-1`是否到达流的末尾并且无法读取更多数据。它还`buffer`用它读取的数据填充前 N 个字节。语法首先将`(a = b) != c`b 分配给 a，然后将值与 c 进行比较（这里：执行`read`，将结果分配给`bytesRead`，比较到`-1`）。因此循环一直运行，直到从流的开始到结束读取每个字节。

在每次写入`read`数据之后，`buffer`通过[`write`](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#write%28byte%5b%5d,%20int,%20int%29). 因为我们知道有`bytesRead`多少字节`buffer`实际上是新读取的字节，所以我们告诉`write`只写入来自`0`to的字节`bytesRead`。无需检查`InputStream.available()`（如果流的长度未知，甚至可能返回无意义的结果）或任何其他方法。

注意：将其更改为`while (bytesRead > 0)`引入了细微的差异。如果您读取 0 个字节但未到达流的末尾，它将停止读取。这种情况是合法的，尽管假设它不会发生是很安全的。如果你使用，你会更安全`bytesRead >= 0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:53:42.537

这意味着，您的内存不足。尝试通过减小缓冲区大小来减少我的内存使用量：

```
int maxBufferSize = 2*1024*1024; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:31:58.240

即使在使用此代码后，您也会遇到相同的错误“内存不足”，在这种情况下，您应该使用 httppost 和多部分实体来发布您的数据......

# android - VB2008和Android之间的加密/解密

> ID：10276649
> 
> 赞同：-1
> 
> 时间：2012-04-23T07:41:42.073
> 
> 标签：android, vb.net, encryption

我使用这些代码加密 vb2008 中的任何纯文本。
我想在我的 android 应用程序中解密并使用生成的文件。我知道将文件放在资产文件夹中并使用它。
此代码使用 Cryptography 进行加密。我如何在我的 android 应用程序中解密生成的文件。以及我如何在我的 android 应用程序中使用它们。任何想法？

```
Imports System.Security.Cryptography

Public NotInheritable Class Simple3Des

    Private TripleDes As New TripleDESCryptoServiceProvider

    Private Function TruncateHash(ByVal key As String, ByVal length As Integer) As Byte()

        Dim sha1 As New SHA1CryptoServiceProvider

        ' Hash the key.
        Dim keyBytes() As Byte = System.Text.Encoding.Unicode.GetBytes(key)
        Dim hash() As Byte = sha1.ComputeHash(keyBytes)

        ' Truncate or pad the hash.
        ReDim Preserve hash(length - 1)
        Return hash
    End Function

    Sub New(ByVal key As String)
        ' Initialize the crypto provider.
        TripleDes.Key = TruncateHash(key, TripleDes.KeySize \ 8)
        TripleDes.IV = TruncateHash("", TripleDes.BlockSize \ 8)
    End Sub

    Public Function EncryptData(ByVal plaintext As String) As String

        ' Convert the plaintext string to a byte array.
        Dim plaintextBytes() As Byte = System.Text.Encoding.Unicode.GetBytes(plaintext)

        ' Create the stream.
        Dim ms As New System.IO.MemoryStream
        ' Create the encoder to write to the stream.
        Dim encStream As New CryptoStream(ms, TripleDes.CreateEncryptor(), System.Security.Cryptography.CryptoStreamMode.Write)

        ' Use the crypto stream to write the byte array to the stream.
         encStream.Write(plaintextBytes, 0, plaintextBytes.Length)
         encStream.FlushFinalBlock()

        ' Convert the encrypted stream to a printable string.
        Return Convert.ToBase64String(ms.ToArray)
    End Function

    Public Function DecryptData(ByVal encryptedtext As String) As String

        ' Convert the encrypted text string to a byte array.
        Dim encryptedBytes() As Byte = Convert.FromBase64String(encryptedtext)

         ' Create the stream.
         Dim ms As New System.IO.MemoryStream
        ' Create the decoder to write to the stream.
        Dim decStream As New CryptoStream(ms, TripleDes.CreateDecryptor(), System.Security.Cryptography.CryptoStreamMode.Write)

        ' Use the crypto stream to write the byte array to the stream.
        decStream.Write(encryptedBytes, 0, encryptedBytes.Length)
        decStream.FlushFinalBlock()

        ' Convert the plaintext stream to a string.
        Return System.Text.Encoding.Unicode.GetString(ms.ToArray)
    End Function

    End Class 
```

在我的表单课中

```
 Sub TestEncoding()
        Dim plainText As String = InputBox("Enter the plain text:")
        Dim password As String = InputBox("Enter the password:")

        Dim wrapper As New Simple3Des(password)
        Dim cipherText As String = wrapper.EncryptData(plainText)

        MsgBox("The cipher text is: " & cipherText)
        My.Computer.FileSystem.WriteAllText(My.Computer.FileSystem.SpecialDirectories.Desktop & "\cipherText.txt", cipherText, False)
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:56:59.713

This not specific to Android, you need to translate your code using Java JCE APIs. Basically you would

1.  Use `MessageDigest.getInstance("SHA1")` to get a SHA1 implementation
2.  Hash you password to get the key bytes and the IV
3.  Use something like `Cipher.getInstance("3DES/CBC/PKCS5Padding")` to get a 3DES implementation
4.  Initialize the cipher for encryption using your key and IV using `Cipher.init()`
5.  Encrypt your data using `Cipher.doFinal()`

You need to make sure you get the same key and IV as in VB first, then proceed with encryption. You seem to be hashing an empty string to get the IV in .NET, not sure what that gives you. Also check .NET documentation to check what the default padding for the `TripleDESCryptoServiceProvider` is.

# encryption - 如何在 Visual C++ 中加密/解密 MS Word 文档

> ID：10276655
> 
> 赞同：0
> 
> 时间：2012-04-23T07:41:56.360
> 
> 标签：encryption, ms-word

我需要一个简单、小而高效的程序来做以下事情。

1.  从我的电脑中选择文件的小界面。
2.  按加密/解密按钮选择您需要的任何一个。
3.  如果按下加密，则生成一个随机密钥并使用基于该密钥的某种算法进行加密。
4.  如果按下解密，则使用某种算法解密文件。

我打算用 Visual C++ 来做。谁能推荐一个VC++中的小程序来做到这一点？或者请告诉我库名称，我可以在其中获得执行上述操作的所有功能。

如果您认为有更好的语言或框架可以代替 VC++，请提出建议。谢谢。我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:52:55.870

[Visually C++ 可以在使用这些选项](http://msdn.microsoft.com/en-us/library/k8d11d4s%28v=vs.80%29.aspx)编译时调用 clr 代码。完成此操作后，您可以使用此[api或 Microsoft](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx)[在此处](http://clrsecurity.codeplex.com/wikipage?title=Security.Cryptography.AuthenticatedAesCng)发布的更安全的版本。我会使用第二个，因为这样您就可以免费获得经过身份验证的加密。否则，您需要对数据进行 hmac 并在另一端进行检查，这很痛苦。在任何一种情况下，请确保每次都使用随机 IV（默认情况下，当您在 .net 中实例化 aes 时，它会创建一个随机 IV，因此只需使用它即可）。将其添加到消息中并在解密时检索它

# php - 解析 XML（RSS 提要）的 PHP 错误

> ID：10276656
> 
> 赞同：4
> 
> 时间：2012-04-23T07:42:17.917
> 
> 标签：php, xml, parsing, rss

我正在使用基于[此答案中找到](https://stackoverflow.com/questions/250679/best-way-to-parse-rss-atom-feeds-with-php)的 PHP 类来解析五个 RSS 提要。五个工作中的四个没有任何麻烦，但[其中一个](http://ahima.org/RSS/News-Alerts-RSS.aspx)给我一些错误。是格式错误的 XML 还是其他问题？我无法控制 RSS 提要的来源，但如果问题是他们的，希望通知所有者。

提前致谢。

**PHP 错误：**

```
Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 35: parser error : xmlParseEntityRef: no name in _rss.php on line 59

Warning: simplexml_load_string() [function.simplexml-load-string]: ne is June 30\. The award will be presented at the 84th AHIMA Annual Convention & in _rss.php on line 59

Warning: simplexml_load_string() [function.simplexml-load-string]: ^ in _rss.php on line 59

Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 64: parser error : EntityRef: expecting ';' in _rss.php on line 59

Warning: simplexml_load_string() [function.simplexml-load-string]: e code modifications presented at the ICD-9-CM Coordination and Maintenance (C&M in _rss.php on line 59

Warning: simplexml_load_string() [function.simplexml-load-string]: ^ in _rss.php on line 59 
```

**XML / RSS Feed**（在线[http://ahima.org/RSS/News-Alerts-RSS.aspx](http://ahima.org/RSS/News-Alerts-RSS.aspx)）：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <generator>RSS Builder by AHIMA</generator>
        <title>News And Alerts</title>
        <link>http://www.ahima.org/</link>
        <description>News and Alerts from AHIMA.ORG</description>
        <language>en-us</language>
        <managingEditor>webmaster@ahima.org</managingEditor>
        <webMaster>webmaster@ahima.org</webMaster>
        <copyright>2010 AHIMA</copyright>
        <item>
            <title>Exclusive Coverage of AHIMA ICD-10 Summit</title>
            <pubDate>4/13/2012 2:39:54 PM</pubDate>
            <link>http://journal.ahima.org/icdsummit/</link>
            <author>webmaster@ahima.org</author>
            <category>News - Alerts</category>
            <description>The summit takes place April 16–17 in Baltimore, MD, and explores the challenges and opportunities involved in the transition to the ICD-10-CM/PCS coding systems. The Journal’s coverage begins April 11 with session previews and comments from the presenters. Keep up to date on the summit by checking this site daily, subscribing to the RRS feed, and following @JournalofAHIMA on Twitter. Follow the Twitter hash tag #ICD10Summit for updates from summit attendees.</description>
        </item><item>
            <title>AHIMA: Remain Focused on Expediting ICD-10 Implementation</title>
            <pubDate>4/10/2012 2:18:22 PM</pubDate>
            <link>http://www.ahima.org/downloads/pdfs/pr/press-releases/HHS%20Announces%20IDC-10%20Delay.pdf</link>
            <author>webmaster@ahima.org</author>
            <category>News - Alerts</category>
            <description>CHICAGO – April 10, 2012 – In light of the U.S. Department of Health and Human Services (HHS) proposed one-year delay in implementing ICD-10-CM or ICD-10-PCS for HIPAA covered entities, AHIMA encouraged organizations to remain focused on their implementation efforts.
</description>
        </item><item>
            <title>Call for Nominations: New AHIMA Grace Award</title>
            <pubDate>3/30/2012 11:45:09 AM</pubDate>
            <link>/about/grace.aspx</link>
            <author>webmaster@ahima.org</author>
            <category>News - Alerts</category>
            <description>Grace Award: In Recognition of Excellence in Health Information Management will honor healthcare delivery organizations that demonstrate effective and innovative approaches in using health information to deliver quality healthcare.

Nomination applications are now available, and the submission deadline is June 30\. The award will be presented at the 84th AHIMA Annual Convention & Exhibit in Chicago, September 29-October 4.</description>
        </item><item>
            <title>Practice Brief: Mobile Device Security</title>
            <pubDate>4/13/2012 2:44:19 PM</pubDate>
            <link>http://library.ahima.org/xpedio/groups/public/documents/ahima/bok1_049463.hcsp?dDocName=bok1_049463</link>
            <author>webmaster@ahima.org</author>
            <category>News - Alerts</category>
            <description>Mobile devices have pervaded the everyday work environment in healthcare. An organization may use mobile devices to improve clinician workflow, bedside information gathering and reporting, or a host of other care delivery applications. In some cases, individuals may use their own mobile devices to meet their personal workflow requirements. 

Whatever purpose the device serves, healthcare organizations must be prepared to understand all the issues related to mobile device use. 

This practice brief reviews the legal and regulatory requirements that affect mobile device use in healthcare. It also provides best practices for ensuring appropriate safeguards are in place to protect all electronic protected health information (ePHI) used and processed within mobile devices.</description>
        </item><item>
            <title>Workflow and EHRs in Small Medical Practices </title>
            <pubDate>4/13/2012 2:45:16 PM</pubDate>
            <link>http://perspectives.ahima.org/index.php?option=com_content&amp;view=article&amp;id=247:workflow-and-electronic-health-records-in-small-medical-practices&amp;catid=42:electronic-records&amp;Itemid=88</link>
            <author>webmaster@ahima.org</author>
            <category>News - Alerts</category>
            <description>This paper analyzes the workflow and implementation of electronic health record (EHR) systems across different functions in small physician offices. We characterize the differences in the offices based on the levels of computerization in terms of workflow, sources of time delay, and barriers to using EHR systems to support the entire workflow.

The study was based on a combination of questionnaires, interviews, in situ observations, and data collection efforts. This study was not intended to be a full-scale time-and-motion study with precise measurements but was intended to provide an overview of the potential sources of delays while performing office tasks. The study follows an interpretive model of case studies rather than a large-sample statistical survey of practices. To identify time-consuming tasks, workflow maps were created based on the aggregated data from the offices. The results from the study show that specialty physicians are more favorable toward adopting EHR systems than primary care physicians are. The barriers to adoption of EHR systems by primary care physicians can be attributed to the complex workflows that exist in primary care physician offices, leading to nonstandardized workflow structures and practices. Also, primary care physicians would benefit more from EHR systems if the systems could interact with external entities. 

</description>
        </item><item>
            <title>AHIMA Comments on Proposed Modification to ICD-9 Procedure Codes</title>
            <pubDate>4/13/2012 2:46:58 PM</pubDate>
            <link>http://www.ahima.org/downloads/pdfs/advocacy/AHIMA%20comments_CM_procedure_0312.pdf</link>
            <author>webmaster@ahima.org</author>
            <category>News - Alerts</category>
            <description>The American Health Information Management Association (AHIMA) respectfully submits the following comments on the proposed procedure code modifications presented at the ICD-9-CM Coordination and Maintenance (C&M) Committee meeting held on March 5.</description>
        </item><item>
            <title>AHIMA Foundation Establishes Research Innovation and Leadership Institute</title>
            <pubDate>4/13/2012 2:47:47 PM</pubDate>
            <link>http://ahimafoundation.org/PolicyResearch/RILI.aspx</link>
            <author>webmaster@ahima.org</author>
            <category>News - Alerts</category>
            <description>For the HIM profession to remain relevant and influential we must have a dynamic and expanding knowledge base and defined set of desired skills and expertise. 
To remain relevant we need to expand our knowledge base and stakeout our content area of expertise through mission and discipline critical research. This research must meet standards of scientific rigor and set the foundation for knowledge creation, innovative concept development, and thought leadership. 

To increase influence we need to disseminate knowledge through scholarly processes and publications that inform best practices and influence policy makers. Scholarship must demonstrate our unique expertise and content knowledge base within the healthcare industry. Furthermore, knowledge transfer or dissemination will increase AHIMA brand recognition and enhance brand prestige and prominence. 

To sustain a systematic research initiative AHIMA has established a centralized, high performing Research Innovation and Leadership Institute (RILI) as an enduring mission critical component of the AHIMA Foundation.
</description>
        </item>
    </channel>
</rss> 
```

**PHP代码：**

```
<?php

if ( !function_exists( 'strip_html_tags' ) ){   function strip_html_tags( $text )
{
    $text = preg_replace(
        array(
          // Remove invisible content
            '@<head[^>]*?>.*?</head>@siu',
            '@<style[^>]*?>.*?</style>@siu',
            '@<script[^>]*?.*?</script>@siu',
            '@<object[^>]*?.*?</object>@siu',
            '@<embed[^>]*?.*?</embed>@siu',
            '@<applet[^>]*?.*?</applet>@siu',
            '@<noframes[^>]*?.*?</noframes>@siu',
            '@<noscript[^>]*?.*?</noscript>@siu',
            '@<noembed[^>]*?.*?</noembed>@siu',
          // Add line breaks before and after blocks
            '@</?((address)|(blockquote)|(center)|(del))@iu',
            '@</?((div)|(h[1-9])|(ins)|(isindex)|(p)|(pre))@iu',
            '@</?((dir)|(dl)|(dt)|(dd)|(li)|(menu)|(ol)|(ul))@iu',
            '@</?((table)|(th)|(td)|(caption))@iu',
            '@</?((form)|(button)|(fieldset)|(legend)|(input))@iu',
            '@</?((label)|(select)|(optgroup)|(option)|(textarea))@iu',
            '@</?((frameset)|(frame)|(iframe))@iu',
        ),

        array(
            ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',
            "\$0", "\$0", "\$0", "\$0", "\$0", "\$0",
            "\$0", "\$0",
        ),
        $text );
    return strip_tags( $text );
} }

class BlogPost {
    var $date;
    var $ts;
    var $link;

    var $title;
    var $text;
    var $author;
    var $summary;
    var $full;
}

class BlogFeed {
    var $posts = array();

    function BlogFeed($file_or_url){
        if(!eregi('^http:', $file_or_url)) {
            $feed_uri = $_SERVER['DOCUMENT_ROOT'] .'/shared/xml/'. $file_or_url;
        } else {
            $feed_uri = $file_or_url;
        }

        $xml_source = file_get_contents($feed_uri);
        $x = simplexml_load_string($xml_source);

        if (count($x) == 0) return;

        foreach($x->channel->item as $item) {
            $post = new BlogPost();
            $post->date = (string) $item->pubDate;
            $post->ts = strtotime($item->pubDate);
            $post->link = (string) $item->link;
            $post->title = (string) $item->title;
            $post->text = (string) strip_html_tags( $item->description );
            $post->full = (string) $item->description;
            $post->author = (string) $item->author;

            $summary = strip_html_tags( $post->text );

            $max_len = 300;
            if(strlen($summary) > $max_len) {
                $summary = substr($summary, 0, $max_len) . '...';
            }

            $post->summary = $summary;

            $this->posts[] = $post;
        }
    }
}

$blogs = array(
'http://www.hhs.gov/rss/news/hhsnews.xml',
'http://ahima.org/RSS/News-Alerts-RSS.aspx',
'http://www.healthcareitnews.com/rss/news',
'http://www.healthcareitnews.com/resource/feed',
'http://www.modernhealthcare.com/section/rss05&mime=xml'
);

foreach( $blogs as $k=>$v ){
    $blog = new BlogFeed($v);
    foreach ( $blog->posts as $one_item ){
        /* ... */
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T08:00:10.563

好吧，与修复提要相比，它可能并不漂亮，但这是一个解决方案：

```
 $xml_source = str_replace(array("&amp;", "&"), array("&", "&amp;"), file_get_contents($feed_uri));
    $x = simplexml_load_string($xml_source); 
```

首先，我将 ALL 替换`&amp;`为普通`&`，以确保将 ALL重新转换`&`回`&amp;`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T07:58:21.693

问题在于 XML - 特别是短语“第 84 届 AHIMA 年度会议和展览”中的“&”字符 - 这应该被转义。[您可以通过任何在线 XML 验证器（例如http://www.xmlvalidation.com/](http://www.xmlvalidation.com/) ）来确定您正在处理的任何 XML 是否存在问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:39:46.903

正如其他答案和评论中提到的，您的源 XML 已损坏，并且 XML 解析器应该拒绝无效输入。libxml 有一个“恢复”模式，可以让您加载这个损坏的 XML，但您会丢失“&sid”部分，所以它无济于事。

如果你很幸运并且喜欢冒险，你可以尝试通过某种方式修复输入来使其工作。您可以使用一些字符串替换来转义看起来像是在 URL 的查询部分中的 & 符号。

```
 $xml = file_get_contents('broken.xml');
    // replace & followed by a bunch of letters, numbers
    // and underscores and an equal sign with &amp;
    $xml = preg_replace('#&(?=[a-z_0-9]+=)#', '&amp;', $xml);
    $sxe = simplexml_load_string($xml); 
```

当然，这不过是一种 hack，解决您的情况的唯一好方法是要求您的 XML 提供程序修复他们的生成器。因为如果它生成损坏的 XML，谁知道还有哪些其他错误会被忽略？

# html - 输入按钮不会使用正确的 CSS 类

> ID：10276659
> 
> 赞同：-1
> 
> 时间：2012-04-23T07:42:45.387
> 
> 标签：html, css, jquery-mobile

我正在使用 jquery mobile 制作应用程序。在我的登录屏幕中，我有一个提交按钮。在这个按钮上，我想应用这个 CSS 类。

```
input.submit {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
    padding: 8px 20px;
    background: -moz-linear-gradient(
        top,
        #007ca5 0%,
        #8080f5);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#007ca5),
        to(#8080f5));
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border: 1px solid #ffffff;
    -moz-box-shadow:
        0px 1px 6px rgba(0,0,0,0.9),
        inset 0px 0px 5px rgba(161,142,016,0.6);
    -webkit-box-shadow:
        0px 1px 6px rgba(0,0,0,0.9),
        inset 0px 0px 5px rgba(161,142,016,0.6);
    text-shadow:
        0px -1px 3px rgba(255,255,255,0),
        0px 1px 0px rgba(255,255,255,0);
} 
```

并在我的 HTML 中像这样使用这个类

```
<INPUT name=submit value=Inloggen type=submit class="submit"> 
```

现在我认为问题在于我的 CSS 不够具体。因为当我要使用 Firebug 查看我的代码时，我得到了这个 div

```
<div class="ui-btn ui-btn-corner-all ui-shadow ui-btn-up-g" data-theme="g" aria-disabled="false">
<span class="ui-btn-inner ui-btn-corner-all">
<span class="ui-btn-text">Inloggen</span>
</span>
<input class="submit ui-btn-hidden" type="submit" value="Inloggen" name="submit" aria-disabled="false">
</div> 
```

所以任何人都可以帮助我，我不擅长让我的 CSS 更具体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:50:14.397

检查您是否在 jquery mobiel css 文件 ex 之后嵌入了自定义样式表：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link href="Style/jquery.mobile-1.0.1.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
    <script src="Script/jquery.mobile-1.0.1.js" type="text/javascript"></script>
    <style type="text/css">
        input.submit
        {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 14px;
            color: #ffffff;
            padding: 8px 20px;
            background: -moz-linear-gradient(
        top,
        #007ca5 0%,
        #8080f5);
            background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#007ca5),
        to(#8080f5));
            border-radius: 10px;
            -moz-border-radius: 10px;
            -webkit-border-radius: 10px;
            border: 1px solid #ffffff;
            -moz-box-shadow: 0px 1px 6px rgba(0,0,0,0.9), inset 0px 0px 5px rgba(161,142,016,0.6);
            -webkit-box-shadow: 0px 1px 6px rgba(0,0,0,0.9), inset 0px 0px 5px rgba(161,142,016,0.6);
            text-shadow: 0px -1px 3px rgba(255,255,255,0), 0px 1px 0px rgba(255,255,255,0);
        }
    </style>
    <script type="text/javascript">

    </script>
</head>
<body>
    <form>
    <div data-role="page">
        <div data-role="content">
            <input name="submit" value="Inloggen" type="submit" class="submit">
        </div>
    </div>
    </form>
</body>
</html> 
```

# java - Lombok 注释与 Cobertura 或类似工具中的代码覆盖率

> ID：10276666
> 
> 赞同：13
> 
> 时间：2012-04-23T07:43:19.037
> 
> 标签：java, unit-testing, cobertura, lombok

[配置 cobertura 以忽略某些代码块](https://stackoverflow.com/questions/3527734/configure-cobertura-to-ignore-certain-blocks-of-code)

从我从上面的问题中读到的内容来看，Cobertura 没有办法将给定的代码部分排除在测试之外，而不是在测试中覆盖。

真的吗？/ 是否有可能在任何类似的工具中？

我正在使用**Lombok** annotations`@Getter`等等`@Setter`，它们很棒，但是**即使我正在测试 getter 和 setter 方法，它们也会导致覆盖率报告中的“红色”。**- 我想做点什么……有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:37:07.663

是不是可以先在被测代码上运行[delombok](http://projectlombok.org/features/delombok.html)，编译它，然后由[Cobertura](http://cobertura.sourceforge.net/)检测它？

披露：我是龙目岛项目的开发人员之一

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-29T10:52:41.460

Lombok 添加了`@javax.annotation.Generated`注释 (1)。但是这个注释有`source`保留，即你的覆盖工具再也看不到它了:-(

Lombok 1.16.14 刚刚修复了[issue-1014](https://github.com/rzwitserloot/lombok/issues/1014)，添加了一个选项来生成`@lombok.Generated`注释；只需配置`lombok.addLombokGeneratedAnnotation`（2）。

Cobertura 可以配置为跳过带有一些注释的方法，因此大多数生成的代码不会计入您的覆盖范围。

JaCoCo 不提供跳过某些注释的配置机制。[问题 15](https://github.com/jacoco/jacoco/issues/15)试图在不需要任何配置的情况下解决这个问题（以及更多）。

(1) 如果未禁用，`lombok.addGeneratedAnnotation`现在已弃用，应替换为`lombok.addJavaxGeneratedAnnotation`
(2) 请参阅[lombok 配置](https://projectlombok.org/features/configuration.html)
(3) 请参阅[此评论](https://github.com/rzwitserloot/lombok/issues/1014#issuecomment-270854270)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-03T17:02:19.810

Lombok 为某些方法创建具有分支的附加代码。例如，如果您添加@Data 并且您的对象没有覆盖equals，那么您将在equals 方法中获得一堆分支来判断每个成员变量是否为空。因此，如果您想使用 Lombok，您只需要接受较低的分支计数或找出一些一致的方法让 cobertura 不计算自动生成的代码。

您可以使用 Delombok 更好地了解覆盖率较低的原因，但如果不测试自动生成的那些分支，您将无法提高它。

Lombok 的早期版本 (0.12) 与 cobertura 交互的方式是，lombok 生成的代码不计入覆盖范围。

您可以添加的另一件事是 Cobertura 中的“ignoreTrivial”标志。这应该处理自动生成的 getter 和 setter，但不包括 equals() 或 hashCode() 之类的东西。

要获得 equals() 和 hashCode() 的覆盖范围，您可以使用[EqualsVerifier](https://jqno.nl/equalsverifier/)。

# git - git 不小心跟踪了配置文件

> ID：10276667
> 
> 赞同：7
> 
> 时间：2012-04-23T07:43:22.570
> 
> 标签：git, version-control

以以下场景为例：

*   你不小心跟踪并提交了一个配置文件
*   每个开发环境都应该有自己特定的配置文件，所以你应该`.gitignore`有`git add`
*   你很久没有意识到

## 提交

```
A - B - C - D - E
    |   |   |   |
    |    \  |  /
    | commits that accidentally track application config
    |
    commit to untrack & .gitignore config
    [finally you did the right thing... but too late?] 
```

如果您曾经重置或挑选回 C、D 或 E，它将覆盖配置文件。

无论如何通过对它们应用 B 提交来重写 C - E 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:28:12.453

如果配置文件应该被取消跟踪，最好通过 E 取消跟踪配置文件，将其添加到 gitignore 等进行提交。如果配置包含敏感信息，在这种情况下，必须从任何 repo 提交中删除它，你没有其他去，但修改历史（来自 GitHub 的这个帮助页面讨论了如何做到这一点 - [http://help.github.com/remove-sensitive-data/](http://help.github.com/remove-sensitive-data/)）

由于 Git 的本质和要求，您不能对提交进行更改并使其看起来是相同的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T22:03:36.260

如果作者都是你，并且你不需要保留受影响提交的日期（所有这些，AE），那几乎是微不足道的，另一种方式将需要更多

根据您的图片，我将在错误之前添加修订 F 作为提交。假设你在分支'master'上，

```
git log --oneline master~6..master 
```

应该向您展示这些修订。

```
git branch corrected master~5   # this is F, master~0 is A i.e. the branch tip

git config advice.detachedhead false  # just to get it to stop blabbing at you

# make corrected commit E
git checkout master~4
git rm --cached yourconfigfile
echo ref: refs/heads/corrected >.git/HEAD
git cat-file -p master~4 | sed 1,/^$/d | git commit -m-

# make corrected commit D
git checkout master~3
git rm --cached yourconfigfile
echo ref: refs/heads/corrected >.git/HEAD
git cat-file -p master~3 | sed 1,/^$/d | git commit -m-

# ... repeat for C, B, and A 
```

在末尾，

```
echo ref: refs/heads/master > .git/config 
```

你就完成了。保留作者/日期信息是从标题中设置 GIT_{AUTHOR,COMMITTER}_{NAME,EMAIL,DATE} 向`git cat-file -p`您显示的问题，如果您需要它，我会为您准备一个 sed。

# spring-mvc - spring 3 中的控制器链接

> ID：10276672
> 
> 赞同：0
> 
> 时间：2012-04-23T07:44:12.770
> 
> 标签：spring-mvc

我必须在第一个控制器的基础上调用一个控制器我必须调用另一个控制器......但这在 spring 3 mvc 中不起作用............

```
@Controller
public class ajaxContoller {
      @RequestMapping(value="/mmiFacade",method=RequestMethod.POST)
    public  @ResponseBody String mmiFacade(@RequestParam String sType){
                       String forwardName = "";          
        if (sType.equalsIgnoreCase("Pincode")) {

            forwardName = "forward:/pincodeAction";
        } else if (sType.equalsIgnoreCase("Locality")) {

            forwardName = "forward:/localityAction";
        } else if (sType.equalsIgnoreCase("Patient")) {

            forwardName = "forward:/patientAction";
        } else if (sType.equalsIgnoreCase("Dlhdata")) {

            forwardName = "forward:/Dlhdata";
        } 
           return forward;  

    }

    @RequestMapping(value="/pincodeAction",method=RequestMethod.POST)
    public @ResponseBody String ajax(){
            return "hiii";

    }
 @RequestMapping(value="/localityAction",method=RequestMethod.POST)
    public @ResponseBody String ajax1(){
            return "hiii1";

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:51:33.080

您应该返回模型和视图对象。以“forward：/”开头的视图名称将完成这项工作，否则 Spring 甚至不会尝试解释响应。实现开关和调用其他映射作为对另一个 java 函数的简单调用的另一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T01:39:09.477

返回包含视图名称的字符串与返回视图名称设置为字符串的 ModelAndView 对象完全相同。如果只返回一个字符串，Spring 会在内部创建一个 ModelAndView 并将视图名称设置为字符串的值。

在您的示例中，您不应使用 @ResponseBody 注释 mmiFacade 方法。使用@ResponseBody 绕过了视图解析过程，即检测和处理视图名称中的“forward:”和“redirect:”前缀。

# ios - 在 Appcelerator 模块中，ENSURE_UI_THREAD 在设备上崩溃

> ID：10276676
> 
> 赞同：0
> 
> 时间：2012-04-23T07:44:26.250
> 
> 标签：ios, appcelerator-mobile, titanium-modules

我的代码无法在设备上运行，有人可以帮忙吗？

```
- (id) TweetPost : (id) args {
    NSArray *arr = args;
    _post = [args objectAtIndex: 0];
    NSLog(_post, nil);
    [_post retain];
    ENSURE_UI_THREAD(Tweet, args);
}

- (id) Tweet : (id) args {
        NSLog(@"Routine Twitter Module", nil)
        if (![_engine isAuthorized]) {
            UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];
            if (controller) {
                [[TiApp app] showModalController:controller animated: YES];
            }
        } else {
            [_engine sendUpdate: _post];
        }
} 
```

在模拟器上执行此代码时，它工作正常，但在设备上，应用程序`NSLog(_post, nil);`在`TweetPost`方法后立即崩溃。我认为这是由于`ENSURE_UI_THREAD(Tweet, args);`. 谁能帮我吗..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:00:37.847

I have replaced the above both functions with:

```
 - (void) TweetPost : (id) args {
    NSArray *arr = args;
    _post = [arr objectAtIndex: 0];
    [_post retain];
    NSLog(_post, nil);

    [self Tweet: args];
}

- (void) Tweet : (id) args {
    NSLog(@"Routine Twitter Module", nil);
    ENSURE_UI_THREAD(Tweet, args);
    if (![_engine isAuthorized]) {
        UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];
        if (controller) {
            [[TiApp app] showModalController:controller animated: YES];
        }
    } else {
        [_engine sendUpdate: _post];
    }
} 
```

And this is working fine. I don't know what was the error.

# asp.net - 如何判断我的服务器上是否安装了 asp.net 4.0？

> ID：10276683
> 
> 赞同：3
> 
> 时间：2012-04-23T07:45:03.557
> 
> 标签：asp.net, .net, iis, .net-4.0, asp.net-4.0

我从 1and1 租用了一台服务器，但我无法进入注册表。如何判断是否安装了 asp.net，或者我是否需要安装它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T07:54:33.223

If you have internet access and IE, browse to [http://www.hanselman.com/smallestdotnet/](http://www.hanselman.com/smallestdotnet/) in IE. It will tell you which .net you have installed.

See my screenshot below:
![enter image description here](../Images/ff3fac58d8b19fbda08c0c3fbb5ff872.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:49:24.963

[如何判断是否安装了 .NET 3.5 SP1？](https://stackoverflow.com/questions/198931/how-do-i-tell-if-net-3-5-sp1-is-installed)

如果您可以进入控制面板上的添加/删除程序，它应该列在下面：

```
Microsoft ASP.Net xxx 
```

我在控制面板中有版本号 1.0.20105.0，它至少是 4.0。

您也可以转到“IIS”->“应用程序池”->单击“DefaultAppPool”并选择“基本设置”；然后在“.NET Framework 版本：”下查看是否有“.Net Framework v.4x”

# android - 如何将图像添加到位图

> ID：10276685
> 
> 赞同：1
> 
> 时间：2012-04-23T07:45:38.283
> 
> 标签：android, bitmap, imageview

嗨，每个人都是这个 android 开发的新手。

目前正在开发绘图应用程序，为绘制的图像添加图章/标签。所以我已经完成了绘图部分，所以现在我必须实现为该绘制的图像添加图章/标签。

所以请帮我解决这个..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:17:53.363

```
Bitmap Rbitmap = Bitmap.createBitmap(bitmap).copy(Config.ARGB_4444, true);
Canvas canvas = new Canvas(Rbitmap);            
canvas.drawBitmap(label, -9, Rbitmap.getHeight()-label.getHeight()-10, null);
canvas.save();
return Rbitmap; 
```

Making your question little more specific will help you more.If I understood is correct this piece of code will help you out to draw a bitmap to a drawn canvas.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:46:35.690

你可以更具体一点，即发布一些代码来显示你必须得到更具体的答案。无论如何，您可以使用以下方法在另一个位图上绘制位图：

```
//You will have a Bitmap bottomBmp, a Bitmap topBmp and a Canvas canvas.
//If you are inside an onDraw() method the canvas will be provided to you, otherwise you will have to create it yourself, use a mutable bitmap of the same size as the bottomBmp.

canvas.drawBitmap(bottomBmp, 0, 0, null); //Draw the bottom bitmap in the upper left corner of the canvas without any special paint effects.
canvas.drawBitmap(topBmp, 0, 0, null); //Draw the top bitmap over the bottom bitmap, change the zeroes to offset this bitmap. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-03T06:56:39.030

私人油漆绿色=新油漆（）；

```
private int greenx , greeny; 
```

green.setColor(Color.GREEN);

```
 green.setAntiAlias(false);

    canvas.drawCircle(greenx,greeny,20,green); 
```

如何在此代码中添加图像将 drawcircle 替换为图像如何？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-02T16:34:47.287

试试这个代码：

```
private Bitmap background;

public birdClass(Context context) {
    super(context);
    background = BitmapFactory.decodeResource(getResources(),R.drawable.splash );
} 
```

# database - 我们是否可以跨多个 oracle 用户查询多个表并将 Django 管理 UI 中的行表格化

> ID：10276693
> 
> 赞同：1
> 
> 时间：2012-04-23T07:46:06.897
> 
> 标签：database, django, django-models, django-admin, python-2.7

基本上，我在使用遗留数据库时遇到问题，其中我使用的表没有适当的参照完整性（比如没有外键；只是表，但“我”知道它们与某些列相关）。因此，在跨不同的 oracle 用户查询`n`表时，Django 的框架不会有好处。`m`

像这样的东西： `select t1.col1, t2.col3, t3.col2 from user1.table1 t1, user2.table2 t2, user3.table3 t3 where t1.col1 = t2.col2 AND t2.col2 = t3.col3;`

现在在 Django 的管理 UI 中，我想显示这个：

```
---------------------------
| col1  |  col3  |  col2  |
---------------------------
| abcd  |  defg  |  hijk  |
---------------------------
| 1234  |  5678  |  9009  |
--------------------------- 
```

我最近才开始使用 Django，因为它的快速开发。因此，非常感谢任何支持或文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T07:32:41.350

要利用 Django Admin，您需要先创建一个模型，无论它从哪里获取数据。现在，由于我们将模型映射到 DB，您可以基于 DB 视图或三个表（user1.table1、user2.table2 和 user3.table3）中的任何一个创建模型：

**基于数据库视图：**

首先，创建一个数据库视图来获取`col1`，`col2`并`col3`从表中获取。
另外，为模型选择一个主键：它可以是数据库视图中的任何（包括额外的）列，只要模型字段`primary_key=True`与该列匹配，这里我只需选择`col1`.

```
# use Sqlite to create view, Oracle could be similar
CREATE VIEW view_for_legacy_tables AS SELECT t1.col1, t2.col3, t3.col2 from user1.table1 t1, user2.table2 t2, user3.table3 t3 where t1.col1 = t2.col2 AND t2.col2 = t3.col3; 
```

```
# in model
class Foo(models.Model):
    col1 = models.TextField(primary_key=True)
    col2 = models.TextField()
    col3 = models.TextField()

    class Meta:
        db_table = 'view_for_legacy_tables' 
```

从现在开始，`syncdb`不然南方`migrate`可能会抱怨存在，这里干脆不理他们。
您可以通过在 South 中伪造迁移来绕过它，或者将模型从 models.py 移动到未由 models.py 加载的其他文件或函数。

为模型定义相应的 ModelAdmin 后`Foo`，`Foo`可以在 Django Admin 的更改列表中显示。

如果你想使用 addview 或 changeview 对表格进行一些修改，你可以覆盖模型`save`的方法`Foo`或自定义 ModelForm，或者自定义 ModelAdmin的`add_view`/ `change_view`。代码因您的实际使用而异，因此我在这里不提供。

**基于表 user1.table1**

这与基于 DB 视图的方法类似。为了能够使用 addview 和 changeview，您还需要自定义 ModelForm。

定义模型

```
class Foo(models.Model):
    col1 = models.TextField(primary_key=True)

    class Meta:
        db_table = 'user1.table1' 
```

然后在 admin.py

```
class FooAdmin(admin.ModelAdmin):
    list_display = ('col1', 'col2', 'col3')

    def queryset(self, request): # you could customize the default manager of model Foo
        qs = super(FooAdmin, self).queryset(request)
        return qs.extra(select={'col2':'user2.table2.col2', 'col3':'user3.table3.col3'},
                        tables=['user2.table2', 'user3.table3'],
                        where=['col1 = user2.table2.col2', 'user2.table2.col2'='user3.table3.col3']) # or use `raw()`, depends on your columns

    def col2(self, obj):
        return obj.col2

    def col3(self, obj):
        return obj.col3 
```

*更新*

这种用法非常少见，因此我很少看到有关它的文档。大多数相关的东西都可能在`options.py`里面`django/contrib/admin`和里面的模型的实现`django/db/models/base.py`。

如果你想实现`SELECT * from t1, t2, t3 where ... like '%?%'", [var1])`，最简单的方法可能是使用 Admin UI 编写自己的视图，就像[https://github.com/dmpayton/django-mongoadmin](https://github.com/dmpayton/django-mongoadmin)

如果`var1`of`SELECT * from t1, t2, t3 where ... like '%?%'", [var1])`被确定，您可以为 的每个值制作多个模型`var1`；如果不是，你必须对模型和管理做一些动态的方式，只是参考[Django 动态模型字段](https://stackoverflow.com/questions/7933596/django-dynamic-model-fields/7934577#7934577)，这可能更难 IMO。

# c# - 使 .net WebForm 动态而不自动回发

> ID：10276695
> 
> 赞同：0
> 
> 时间：2012-04-23T07:46:09.947
> 
> 标签：c#, .net, webforms, autopostback

这是我的问题，我正在使用 Visual Studios 2010，我正在尝试创建一个表格来填写然后发送它。此表单需要文件上传和一些信息。问题是，当我想显示/隐藏某些面板或文本框时，我无法动态执行此操作，我必须使用 autopost back 取消选择在 fileupload 控件中选择的文件：

```
 protected void CB_image_CheckedChanged(object sender, EventArgs e)
    {
        if (CB_image.Checked)
        {
            PanelImage.Visible = true;
        }
        else
        {
            PanelImage.Visible = false;
        }
    } 
```

这是我想在不使用我的 CB_image (CB = 复选框) 上的 autopostback 属性的情况下提取的代码示例。任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:49:05.287

你不能那样做。必须触发回发，以便服务器端的代码可以检查复选框是否被选中，并根据它采取行动。

您可以使用启动回发的 javascript 计时器并以这种方式工作，但我不会这样做。

顺便提一句，

```
 protected void CB_image_CheckedChanged(object sender, EventArgs e)
    {
        PanelImage.Visible = CB_image.Checked;
    } 
```

看起来干净多了！

# c++ - c ++可视化变量的内存

> ID：10276696
> 
> 赞同：0
> 
> 时间：2012-04-23T07:46:10.710
> 
> 标签：c++, eclipse, variables, memory

我想看看分配给两个不同变量的内存结构。
这背后的注意是要了解内存是如何按存储不同数据类型的顺序来构造的。

它是如何在 C++ 中完成的？

```
//how to show, whats in memory in &var1 &var2 ?
short var1 = 2;
string var2 = "bla"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:46:57.670

如果您使用的是 MSVS，您可以打开`Memory`选项卡并写下您要检查的地址。

您必须处于调试状态 - `Debug`-> `Windows`-> `Memory`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:56:43.113

如果您使用的是 Eclipse，则可以在调试透视图中使用[Memory View 。](http://www.linuxtopia.org/online_books/eclipse_documentation/eclipse_c_c++_guide/topic/org.eclipse.cdt.doc.user/reference/eclipse_c_c++_guide_cdt_u_memoryview.htm)

要么，要么简单地创建一个指向变量的指针并检查这些变量的内容：

```
short var1 = 2;
string var2 = "bla";

char* pVar1 = (char*)&var1; //point to memory storing var1
char* pVar2 = (char*)&var2; //point to memory storing var2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:54:03.483

我通常使用以下内容：

```
template< typename T >
class Dump
{
public:
    explicit            Dump( T const& obj ) ;
    void                print( std::ostream& dest ) const ;

    friend std::ostream& operator<<( std::ostream& dest, Dump const& source )
    {
        source.print( dest );
        return source;
    }

private:
    unsigned char const*myObj ;
} ;

template< typename T >
inline Dump< T >
dump(
    T const&            obj )
{
    return Dump< T >( obj ) ;
}

template< typename T >
Dump< T >::Dump(
    T const&            obj )
    :   myObj( reinterpret_cast< unsigned char const* >( &obj ) )
{
}

template< typename T >
void
Dump< T >::print(
    std::ostream&       dest ) const
{
    IOSave              saver( dest ) ;
    dest.fill( '0' ) ;
    dest.setf( std::ios::hex, std::ios::basefield ) ;
    char const*         baseStr = "" ;
    if ( (dest.flags() & std::ios::showbase) != 0 ) {
        baseStr = "0x" ;
        dest.unsetf( std::ios::showbase ) ;
    }
    unsigned char const* const
                        end = myObj + sizeof( T ) ;
    for ( unsigned char const* p = myObj ; p != end ; ++ p ) {
        if ( p != myObj ) {
            dest << ' ' ;
        }
        dest << baseStr << std::setw( 2 ) << (unsigned int)( *p ) ;
    }
} 
```

`IOSave`是一个简单的类，它在构造函数中保存格式化状态（和） `flags`， 并在析构函数中恢复它们。`fill``precision`

# java - 如何在不同时间启动多个移动的 Sprite 对象？

> ID：10276697
> 
> 赞同：1
> 
> 时间：2012-04-23T07:46:11.703
> 
> 标签：java, android, opengl-es, andengine

我使用 AndEngine 库创建了一个动态壁纸服务。在屏幕上，有许多从左到右反复飞行的鸟 Sprite 对象以随机 y 坐标开始（我为此使用 LoopEntityModifier 和 PathModifier，如果你好奇，请参阅[我之前的问题）。](https://stackoverflow.com/questions/10244310/how-to-set-pathmodifiers-coordinates-randomly-in-start-of-loopentitymodifier)鸟儿不应该同时开始飞行，但是在另一只鸟儿从屏幕最左侧出现之前大约有 3 秒的间隔/间隔。

问题是我必须使用什么技术来实现这一目标？

我创建了一组 Sprites 来保存鸟类精灵。代码是这样的...

```
public class MyLiveWallpaperService extends BaseLiveWallpaperService {

    private BirdSprite[] birdSprites;    // BirdSprite is actually an extension class from AnimatedSprite
    ...

    @Override
    public Scene onLoadScene() {
        ...
        birdSprites= new BirdSprite[4];
        for (int i=0; i<4; ++i) {
            birdSprites[i] = new BirdSprite(0, 0, birdTextureRegion);

            scene.getChild(LAYER_FRONT).attachChild(birdSprites[i]);
        }
    }
} 
```

上面的代码生成了四只鸟，它们同时出现在左侧屏幕上。我尝试在调用 attachChild 之前添加 Thread.sleep(3000)，但它会影响整个应用程序。动态壁纸应用程序在启动时会挂起几秒钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:31:31.670

这是我使用 TimerHandler 找到的解决方案：

```
 scene.registerUpdateHandler(new TimerHandler(3, true, new ITimerCallback() {

        @Override
        public void onTimePassed(TimerHandler pTimerHandler) {
            // your code here will be executed every 3 seconds (see 1st argument of TimerHandler)
            ...
            scene.getChild(LAYER_FRONT).attachChild(birdSprites[i]);
        }
    })); 
```

如果您有更好的解决方案，请告诉我。

# c++ - 这个枚举在析构函数中有什么用？

> ID：10276701
> 
> 赞同：14
> 
> 时间：2012-04-23T07:46:29.923
> 
> 标签：c++

```
// Destructor.  If there is a C object, delete it.
// We don't need to test ptr_ == NULL because C++ does that for us  

    ~scoped_ptr() {
       enum { type_must_be_complete = sizeof(C) };
       delete ptr_;
    } 
```

注意：C是模板参数

我知道我们不能删除空指针，会引发异常。所以在这种情况下，枚举定义必须做一些事情来防止这种情况发生。在生产中，有时我们不想简单地结束程序，因为我们有一个空指针，我们可能想看看替代方案，当指针为空时。而且这段代码几乎在任何地方都在生产中使用？

多谢你们。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T07:48:36.940

它实际上是删除的静态断言。实现想知道它是否正在处理在删除变量之前其声明可见的类型，而不是前向声明。

当您询问不完整类型的大小时，您的编译器会发出错误：

```
struct S;
enum { Size = sizeof(S) }; 
```

**更新**

正如您的编译器和 Matthieu M. 会告诉您的那样`delete`，不完整的类型是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T06:35:10.610

boost checked_deleter 似乎更好：

```
template<class T> struct checked_deleter
{
    typedef void result_type;
    typedef T * argument_type;
    void operator()(T * p) const;
}; 
```

因为某些编译器可能会在 T 未定义时返回 0，在这种情况下

```
enum { type_must_be_complete = sizeof(T) }; 
```

是一个有效的静态断言，但 checked_deleter 会失败。

[http://www.boost.org/doc/libs/1_59_0/libs/core/doc/html/core/checked_delete.html#core.checked_delete.checked_deleter](http://www.boost.org/doc/libs/1_59_0/libs/core/doc/html/core/checked_delete.html#core.checked_delete.checked_deleter)

# ios - 如何为单元格设置双边框

> ID：10276703
> 
> 赞同：4
> 
> 时间：2012-04-23T07:46:35.270
> 
> 标签：ios, uiview, uitableview

我想显示如下图所示的双边框...

![双边框 - 设计](../Images/36f9acba1448efe2b141b02e8416217e.png)

边框有深色（洋红色）和浅色（白色）（不是实际颜色）。

`UITableViewCell`我为我的表格视图单元创建了一个自定义 .xib 文件和一个自定义类。

```
self.tableView.separatorColor = [UIColor whiteColor]; 
```

然后在自定义表格视图类中，我这样做了......

```
- (void)awakeFromNib
{
    [super awakeFromNib];
    UIView *cellBottom = [[UIView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height, self.bounds.size.width, 1.0f)];
    cellBottom.backgroundColor = [UIColor magentaColor]; //
    [self addSubview:cellBottomView];

    // ... other code
} 
```

`backgroundColor`我得到了以下结果......和之间似乎有一些差距`separatorColor`。

![双边框 - 实施](../Images/62321d069818c75c040d5beca5cb0625.png)

为什么会这样？的高度`UIView`已设置为`1`并位于底部`UIView`。

如果对此有更好的解决方案，有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:15:40.627

Michal Zygar 部分正确。

确保您`-(NSInteger)tableView:(UITableView*) heightForRowAtIndexPath:(NSIndexPath*)`正确设置为视图的高度。它不会自动为您执行此操作。

我自己建议的另一个提示是不要使用分隔符。将分隔符设置为无，然后在 XIB 文件中单元格的顶部和底部添加两个 1px 高度的视图。
确保将底部两个的自动调整大小设置为仅粘在底部边缘，以防万一您想更改单元格的高度！

# image - 如何使用 Coldfusion cfdirectory 和 randRange 函数输出随机文件？

> ID：10276707
> 
> 赞同：1
> 
> 时间：2012-04-23T07:46:50.543
> 
> 标签：image, random, coldfusion

我还在努力掌握Coldfusion...

我需要创建一个文件目录（比如有 10 个文件）并输出 5 个随机文件。获取和输出文件是可以的，但我不确定该放在 randrange 中的哪个位置。这是我的代码：

```
 <cfdirectory action="list" directory="#expandpath("img/")#" filter="some*.*" name="dir">
     <!--- imgID --->
     <CFSET imgID= #RandRange(1, #dir.allRecords#)#>
     <!--- this only grabs the first 5 files --->
     <cfoutput query="dir" maxrows="5">
        <cfif FileExists("#expandpath("img/#name#")#")>
        <cfimage source="#expandpath("img/#name#")#" name="myImage">                                                   <cfif IsImage(myImage) is true>
          <cfset ImageSetAntialiasing(myImage,"on")>
              <cfset ImageScaleToFit(myImage,"highestQuality")>
              <!--- append to a list --->
          <li><cfimage source="#myImage#" action="writeToBrowser"></li>
           </cfif>               
        </cfif>
      </cfoutput> 
```

这可以正常显示前 5 张图像。但是，我想要 5 个*随机*图像。

感谢您的一些见解！

**编辑：**
这就是我最终这样做的方式 - 一个未解决的问题 -

```
<!-- get the directy, listinfo="name" because I only need filenames --->
<cfdirectory action="list" LISTINFO="name" directory="#expandpath(" logos/")#" filter="marke*.*" name="dir">

 <cfset images=[ ]>
 <!-- since dir is not indexable, like dir[pos], I need another array!-->
 <cfset dirArr=[ ]>
 <cfset blocker="false">
 <cfset maxLogos=5>
 <!-- fill new dirArr(ay) -->               
 <cfoutput query="dir">
    <cfset #ArrayAppend(dirArr, #expandpath( "logos/#name#")#)#>
 </cfoutput>
 <!-- loop -->
 <cfloop condition="blocker eq false">
    <-- random position -->
    <cfset pos=R andRange(1, #dir.recordcount#)>
    <cfif #dir.recordcount# eq 0 OR #ArrayLen(images)# gte #maxLogos#>
        <-- STOP loop -->
        <cfset blocker="true">
    </cfif>
    <cfset ArrayAppend(images, #dirArr[pos]#)>
    <!-- BROKEN unknown ARRAYDELETE --> 
    <!--- <cfset ArrayDelete(dirArr, #dirArr[pos]#)> --->
    <!-- IMG -->
    <cfimage source="#dirArr[pos]#" name="myImage">
    <cfif IsImage(myImage) is true>
        <cfoutput>
        <li data-icon="false">
           <cfimage source="#myImage#" action="writeToBrowser">
        </li>
        </cfoutput>
    </cfif>
 </cfloop> 
```

问题是 ArrayDelete 不起作用*变量 ARRAYDELETE 未定义*，Coldfusion(8) 告诉我。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:24:51.013

一个简单的替代方法是对数组进行一次洗牌，然后取前五个项目：

```
<cfset MaxLogos = 5 />
<cfset Images   = [] />
<cfset Files    = DirectoryList( expandPath("logos") , false, "name" , "marke*.jpg" ) />

<cfset createObject( "java", "java.util.Collections" ).shuffle( Files ) />

<cfloop index="i" from="1" to=#Min(MaxLogos,ArrayLen(Files))# >
    <cfset ArrayAppend( Images , Files[i] ) />
</cfloop>

<cfdump var=#Images# /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:59:58.080

我不确定您的代码是否真的可以工作，因为其中似乎有几个语法错误。另外，您正在*img*上创建目录列表，然后从*徽标*中提取图像，并且您还没有明确说明这些目录之间的关系

除了这些问题，这就是我将如何处理这个问题。

```
<cfscript>
// this code is untested, but should get you going
// get list of image file names as an array
dir = directoryList(expandPath("imgs"), false, "name", "*.jpg");
images = [];
while(true) {
  // if out directory list is now empty or we have 5 results, we're done
  if(!arrayLen(dir) or arrayLen(images) gte 5) break;
  // get an image from a random point in the list
  pos = randrange(1, arrayLen(dir));
  // append it to our images array
  arrayAppend(images, dir[pos]);
  // delete form the source array, this avoids duplicates in further iterations
  arrayDeleteAt(dir, pos);
}
</cfscript> 
```

这为您提供了一个包含 0 到 5 个元素的图像数组，然后您可以将其作为列表输出。

附带说明一下，不建议重复使用 <cfimage> 和相关功能。如果您需要调整图像大小或操作图像，则应将其缓存回磁盘，而不是在每次请求时重复操作。

# asp.net - Microsoft Office 互操作 Excel

> ID：10276712
> 
> 赞同：0
> 
> 时间：2012-04-23T07:47:17.470
> 
> 标签：asp.net, interop

我正在使用 VS 2008 在 asp.net/C#/.net 3.5 中开发 Microsoft.Office.Interopt.Excel 应用程序。

我正在尝试刷新数据透视表，但以下语句无法编译。

```
wkSheet.PivotTables("PivotTable1").PivotCache.Refresh; 
```

我不断收到以下2个错误。有人可以帮忙吗！

```
1.Only assignment, call, increment, decrement, and new object expressions can be used as a statement    

2.'object' does not contain a definition for 'PivotCache' and no extension method 'PivotCache' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:49:04.427

这两条消息都很清楚，请尝试以下操作：

```
PivotTable pvtTable = (PivotTable)wkSheet.PivotTables("PivotTable1");
pvtTable.RefreshTable(); 
```

# asp.net - GridView 和 DropDownlist

> ID：10276715
> 
> 赞同：0
> 
> 时间：2012-04-23T07:47:39.790
> 
> 标签：asp.net, .net

我有一个gridview，当进入编辑模式时，其中一列更改为下拉列表：

```
 <EditItemTemplate>
          <asp:DropDownList ID="DropDownList2" runat="server" 
          DataSourceID="SqlDataSource1" DataTextField="name" DataValueField="name">
          </asp:DropDownList>
     </EditItemTemplate> 
```

现在我有一个`SqlDataSource`在这个 aspx 文件中定义的 with update 方法：

```
<UpdateParameters>
       <asp:Parameter Name="name" Type="String" />
       <asp:ControlParameter ControlID="DropDownList2" Type="string" 
                PropertyName="SelectedValue" Name="genre" />
</UpdateParameters> 
```

现在我想获取选定的值并将其插入，但是当我按下 gridview 行中的更新按钮时，我收到此错误：

```
Could not find control 'DropDownList2' in ControlParameter 'genre' 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-10T06:52:36.260

是的。`ControlParameters`仅当 DOM 可以找到您所指的控件位于`GridView`. 问题是 Gridviews 是一种处理 DOM 控件的糟糕方式，因为一旦您进入 GridView 的“模式”，如 EDIT 模式，整个 DOM 结构就会发生变化。顺便说一下，DOM 是**Document Object Model**。因为它已更改，因此 ASP 找不到您所指的控件。

我通过做两件事之一克服了这个问题。

首先通过简单地将控件名称与`'$'`字符尾随来查看它是否有效。

```
<UpdateParameters>
       <asp:Parameter Name="name" Type="String" />
       <asp:ControlParameter ControlID="MyGridView$DropDownList2" Type="string" 
                PropertyName="SelectedValue" Name="genre" />
</UpdateParameters> 
```

如果幸运的话，这**有时会起作用。**

如果没有，那么您需要找到控件，获取它的值并将其以编程方式在后面的代码中传递给 SQL 参数。

尝试这样的事情（我使用 C#）...

```
protected void MyGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
   ...
   GridViewRow gvRow = (GridViewRow)sender;
   DropDownList myDDL = (DropDownList)gvRow.FindControl("DropDownList2");
   if (myDDL != null)
   {
      //assuming your datasource is outside the gridview, you have to find it!
      SqlDataSource sds1 = (SqlDataSource)page.FindControl("myDataSource");
      if (sds1 != null)
      {
         sds1.UpdateParameter["genre"].DefaultValue = myDDL.SelectedValue;
         ... and do your databinding etc
         sds1.Update();
      }
   }
} 
```

我总是依靠客户端代码 (ASPX) 为我完成大部分工作，例如`Bind()`,`Eval()`等，但随着时间的推移，您会意识到要真正控制您的程序，您必须依赖 JavaScript 或代码后面做更精细的位。ASP 在做你期望它做的事情时并不总是“聪明”的。

# asp.net - Tab Rich Control：下划线功能不起作用

> ID：10276717
> 
> 赞同：1
> 
> 时间：2012-04-23T07:47:45.020
> 
> 标签：asp.net, telerik, telerik-reporting

当用户选择并单击“U”按钮时，Tab Rich 控制页面显示下划线。但它没有为下划线保存 HTML 标记，因此当它从数据库返回时它没有显示下划线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:39:53.337

We need to apply some HTMLExportSettings of HTML Format Provider, so it can generate HTML tag for underline. In order to achieve best compatibility of the generated HTML with Telerik Reporting, you should apply the following settings:

```
DocumentExportLevel - Fragment;
StylesExportMode - Inline;
StyleRepositoryExportMode - DontExportStyles;
ExportFontStylesAsTags - true. 
```

You can also read complete options of HTML export settings of HTML format provider for generating right HTML..follow the following link :: [http://www.telerik.com/help/silverlight/radrichtextbox-features-import-export-settings.html](http://www.telerik.com/help/silverlight/radrichtextbox-features-import-export-settings.html)

# sharepoint - 将 Com Interop 部署到 sharepoint 服务器

> ID：10276726
> 
> 赞同：0
> 
> 时间：2012-04-23T07:48:16.223
> 
> 标签：sharepoint

我有一个必须注册和使用的 com interop dll (zkemkeeper.dll)，我想知道如何使用 SharePoint 包将它部署到 SharePoint 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:25:00.213

如果您使用的是 Sharepoint 2010，请参阅[如何：添加和删除其他程序集](http://msdn.microsoft.com/en-us/library/ee231595.aspx)。

也可以看看：

*   [在 SharePoint 2010 中部署自定义 dll](https://stackoverflow.com/questions/5092544/deploying-custom-dlls-in-sharepoint-2010)
*   [Visual Studio - SharePoint 2010 - 包括程序集 > 快速问题](https://stackoverflow.com/questions/3353881/visual-studio-sharepoint-2010-include-assembly-quick-question)
*   [在打包 wsp 时在 Sharepoint 项目中包含第 3 方 dll](https://stackoverflow.com/questions/7521697/include-3rd-party-dll-in-the-sharepoint-project-while-packaging-the-wsp)
*   [Visual Studio 不会将程序集复制到 gac](https://stackoverflow.com/questions/8422724/visual-studio-does-not-copy-assembly-into-gac)
*   [如何安装具有依赖程序集的 WSP？](https://stackoverflow.com/questions/5477646/how-to-install-a-wsp-that-has-dependant-assemblies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:42:49.230

您无法通过 SP 解决方案将 COM 或 COM 互操作 DLL 部署到 SP 场。您需要通过其他方式在场中的每台 SP 服务器上安装该组件。

1.  创建要在每台计算机上执行的 MSI 安装程序。MSI 也可以自动推出。
2.  提供要在每台机器上执行的 PowerShell 脚本。PowerShell 也可以远程运行。
3.  使用您的解决方案部署一个计时器作业，该作业将在安装后自动或手动执行，并将必要的 COM 内容写入注册表。

前两个选项是我最喜欢的，因为它们不应该给客户带来技术问题。第三个似乎承诺在不访问每台机器的情况下进行安装，但 Timer Service 用户身份需要写入本地注册表的权限，这可能并不总是被授予；无论如何，您都必须求助于 1\. 或 2.。

从长远来看，您应该考虑切换到 ASP.NET 或 .NET 组件。纯 .NET 中有许多可用的组件可以由 SP 解决方案部署。您还可以考虑纯 HTML/JavaScript 控件。我可能会选择选项 1。并将节省的时间投入到没有 COM 互操作的其他架构上。

--- 费尔达

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T15:34:41.580

`Interop.zkemkeeper.dll regsvr32 error`或者`InitializeComponent`

然后你需要完成以下步骤：

1.  访问网站：[http ://www.zktechnology.com](http://www.zktechnology.com)
2.  下载->软件下载->C3面板的ZK Access
3.  提取文件
4.  安装
5.  打开visual studio -> 解决方案项目->references-> 添加Interop.zkemkeeper.dll

祝你好运

# jquery - 来自jquery的Listview Image数据绑定更改属性

> ID：10276729
> 
> 赞同：0
> 
> 时间：2012-04-23T07:48:33.353
> 
> 标签：jquery

任何人都可以帮助我解决我的困难，例如如何使用 jQuery 从 listview 数据绑定中更改图像 src 属性。我想要它，当用户从 listview 数据绑定中单击 img 时，更改`<img id="imgviewer" src="" />` 尝试了这个：

```
$('img').click(function() {            
            $("#imgviewer").attr('src', 'uploadsimg/' + $('this').attr('title'));
        }); 
```

但它不起作用。谢谢你的帮助。

这是我的asp代码

```
<asp:ListView ID="lvSubAlbumDB" ItemPlaceholderID="subitemContainer" runat="server">
    <LayoutTemplate>
        <ul class="photolist">
            <asp:PlaceHolder ID="subitemContainer" runat="server" />
        </ul>
    </LayoutTemplate>
    <ItemTemplate>
        <li>
            <a href="" title="<%# Eval("Filename")%>">
                <img border="0" src="uploadsimg/thumbnail/<%# Eval("Filename")%>" title="<%# Eval("Filename")%>" alt="" height="35" width="50" />
            </a>
        </li>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:50:47.760

删除周围的引号`this`。

```
$('img').click(function() {            
    $("#imgviewer").attr('src', 'uploadsimg/' + $(this).attr('title'));
}); 
```

# symfony - 如何在 Symfony2 中创建和注册新角色

> ID：10276730
> 
> 赞同：8
> 
> 时间：2012-04-23T07:48:35.677
> 
> 标签：symfony, user-roles

我从[有关安全的官方 Symfony2 文档中](http://symfony.com/doc/current/book/security.html#users)看到，除了“经典”角色（即 ROLE_USER、ROLE_ADMIN 等）之外，还可以定义新角色。

如何定义*新角色*并将它们注册到我的 Symfony2 应用程序，以便在*security.yml*中创建角色层次结构？

很抱歉打扰了大家！我认为答案很简单。**实际上，通过名称以ROLE_**开头来开始使用新角色似乎就足够了。例如，可以说**ROLE_NEWS_AUTHOR**只允许具有该角色的人能够在网站中插入新闻。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T10:27:58.353

当然，您可以简单地添加以 ROLE_SOMEROLE 开头的任何角色。在 security.yml 文件中有两个主要部分 1.限制访问 2.谁是成员可以访问

一种。access_control：限制模式并指定可以访问的角色。湾。role_hierarchy：这里是角色的层次结构，对于以下示例，管理员用户（ROLE_ADMIN）具有角色 ROLE_USER、ROLE_NEWS_AUTHOR。因此，他可以访问 USER 和 NEWS_AUTHOR 的所有页面。无论您可以提供什么层次结构。

```
access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }/login any one can access this pattern
        - { path: ^/admin/, roles: ROLE_ADMIN }//block all pattern /admin/anything*
        - { path: ^/news/, roles: ROLE_NEWS_AUTHOR } //block all pattern /news/anything*
role_hierarchy:
        ROLE_ADMIN: [ROLE_USER,ROLE_NEWS_AUTHOR] 
```

在您的控制器中，您可以检查角色，

```
if(TRUE ===$this->get('security.context')->isGranted('ROLE_ADMIN') )
{
     // do something related to ADMIN
}
else if(TRUE ===$this->get('security.context')->isGranted('ROLE_NEWS_AUTHOR') )
{
    // do something related to News Editor
} 
```

希望这可以帮助你。快乐的编码。

# html - 任何字体都可以在不需要包含“sup”标签的情况下进行上标？

> ID：10276732
> 
> 赞同：0
> 
> 时间：2012-04-23T07:48:38.733
> 
> 标签：html, superscript, sup

我有一个动态名称列表，其中包括一些上标关键字，例如“®”。我不想使用标签来上标“TM”或“Registered”等。有没有可用的字体可以在不为默认关键字添加标签的情况下完成这项任务？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:34:01.460

默认情况下，您可以通过使用 HTML 实体获得的商标符号 (TM)`&trade;`在 chrome 和 firefox 中显示为上标。

对于`&reg;`("Registered" 符号 - 带圆圈的 R) 我想，最好添加`<sup>`标签。可能是，您可以在客户端或服务器端运行脚本，以将标签添加到此类字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:43:20.850

许多字体包含字符“®”，尤其是“™”，具有类似上标的外观。应该以这种方式呈现它们或多或少是这些字符的固有特征。因此，如果将它们放在上标中，结果往往会很糟糕，特别是因为上标通常会减小字体大小，而且对于一个在圆圈内调整的可怜的小“R”来说，大小已经相当小了。

您可能需要更改文本的字体，或者不太彻底地更改这些字符的字体。如果复制文本字体是无衬线字体，请考虑对这些字符使用 Lucida Sans Unicode。如果是衬线字体，试试 Times New Roman。

# asp.net-mvc-3 - 在 MVC 3 中查看“更改密码”

> ID：10276738
> 
> 赞同：1
> 
> 时间：2012-04-23T07:49:05.723
> 
> 标签：asp.net-mvc-3, c#-4.0, passwords

你能帮我在 MVC3 中构建我的“ChangePassword”视图吗？

*这是我试图做的：*

**ProfileTeacherController.cs**

```
public ViewResult ChangePassword(int id)
    {
        var user = User.Identity.Name;
        int inter = int.Parse(user);

        var teachers = from t in db.Teachers
                       where t.AffiliationNumber == inter
                       select t;

        Teacher teacher = new Teacher();
        foreach (var teach in teachers)
        {
            teacher = teach;
        }

        return View(teacher);
    }

    [HttpPost]
    public ActionResult ChangePassword(Teacher teacher)
    {
        if (ModelState.IsValid)
        {
            // How can I compare the two fields password in my view ?
            db.Entry(teacher).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Edit", "ProfileTeacher", new { id = teacher.TennisClubID });
        }
        return View(teacher);
    } 
```

**这里是 ChangePassword (查看)**

```
@model TennisOnline.Models.Teacher
@{
ViewBag.Title = "ChangePassword";
}

<h2>Changement du mot de passe</h2>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend></legend>

    <div class="editor-label">
        @Html.Label("Enter the new password")
    </div>
    <div class="editor-field">
        @Html.PasswordFor(model => model.Pin, new { value = Model.Pin })
    </div>

    <div class="editor-label">
        @Html.Label("Confirm your password")
    </div>
    <div class="editor-field">
        @Html.Password("ConfirmPassword")
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
} 
```

那么，如果两个密码相同，我如何在我的控制器中验证？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T20:16:08.080

另外，您可以在比较属性中添加两个密码不同时显示的消息。

```
[Compare("NewPassword", ErrorMessage = "The new password and confirm password do not match.")] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T08:00:51.063

我建议使用视图模型：

```
public class TeacherViewModel
{
    ...

    [Compare("ConfirmPassword")]
    public string Password { get; set; }

    public string ConfirmPassword { get; set; }
} 
```

现在让您的视图采用视图模型以及您的 Post 操作。

除了在您的 GET 操作中，您似乎还编写了一些`foreach`循环，但我没有看到它的用法。你可以简化：

```
[Authorize]
public ViewResult ChangePassword(int id)
{
    var user = User.Identity.Name;
    int inter = int.Parse(user);
    var teacher = db.Teachers.SingleOrDefault(t => t.AffiliationNumber == inter);
    return View(teacher);
} 
```

# excel - SSIS Excel日期在第一行而不是最后一行为空=>日期始终为空

> ID：10276739
> 
> 赞同：1
> 
> 时间：2012-04-23T07:49:08.463
> 
> 标签：excel, datetime, ssis, package

我做了一个 ssis 包，我读取了一个 Excel 文件。我有一个日期列。如果第一行日期为空，则所有行都被认为是空的，如果我放一个带日期的行就可以了。该文件是自动生成的，而不是由我生成的，所以我可以更改行的顺序。我怎么能强迫约会？？

我知道在输入中日期就像一个字符串（DT_WSTR），因为它可能是空的。所以在我知道如何转换它之后。所以不要解释我如何转换它。我只想知道如何知道上线的日期。

对不起我的英语不好

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:55:43.130

Try adding "IMEX=1;" at the end of your connection string. This will force the Excel file to be read in import mode, reading everything as a string (even when empty).

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\ExcelFile.xls;Extended Properties="EXCEL 8.0;HDR=YES;IMEX=1"; 
```

# java - 将 Java WebView 添加到纯 Android NDK 应用程序

> ID：10276741
> 
> 赞同：1
> 
> 时间：2012-04-23T07:49:16.987
> 
> 标签：java, android, c++, android-ndk

我有一个纯 NDK 应用程序，完全是`C++`.

我现在需要添加对 a 的访问权限`WebView`；Google 搜索和堆栈溢出通知我必须在`Java`.

如何将`Java`类（派生自`WebView`）包含到我的纯 Android NDK 应用程序中，以及如何调用它？

**注意：**我没有使用 Eclipse 或任何其他 IDE，只是`.mk`文件等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:42:32.383

您必须使用 JNI 并从您的 C++ 代码调用 Java。从本机代码中调用 Java 语言方法涉及以下三个步骤：

1.  检索类引用
2.  检索方法标识符
3.  调用方法

这里有一个关于如何做到这一点的很好的解释：[Sun JNI Reference](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniref.html#call)

您需要一个可以接收此方法调用的 Java 类，并且可以启动一个包含 webview 的 Activity。因此，您可以在 C++ 中包含和调用 Java，但自然仍然需要在 Java 中实现 Java 类，这是无法避免的。

# javascript - 允许在 HTML5 应用程序中访问 Intranet/本地文件的解决方案？

> ID：10276744
> 
> 赞同：2
> 
> 时间：2012-04-23T07:49:34.350
> 
> 标签：javascript, html

我非常清楚即使使用新的 FileAPI 也无法访问使用文件输入字段或拖放添加的文件的本地路径。无论这是好，坏或丑陋不是这里的问题。根据 FileAPI 规范，本地文件访问不会被实现，所以我没有屏住呼吸。

但是让我们*假设*我处于以下固定参数的情况：

*   开发仅供公司内部使用的 HTML5 应用程序
*   .NET 用于后端（需要与 API 互操作）
*   可以准确指定/控制应用程序应使用的浏览器和版本
*   需要访问通常位于网络共享上的文件，但也可能在用户工作站本地访问

并且通过访问我并不是指访问文件数据，而是能够通过向第三方提供文件的本地路径来将文件拖放/选择事件传递给其他 API，以便第三方可以获取文件并对其进行某种处理。这可以比作使用 input[type=file] 字段，就像您在 .NET 中使用 OpenFileDialog 一样 - 即重点是为应用程序提供文件路径，而不是*实际文件*。

我意识到开箱即用这可能是不可能的。但我也认为这个问题必须有某种解决方案。

我一直在玩弄的一些想法是：

*   使用浏览器特定的方法来允许“安全功能”
    *   不确定是否可能 - 厌倦了使用其中一些功能无济于事
    *   将应用程序限制为特定版本的浏览器，因为将来可能会删除该功能
    *   像 Chrome 扩展这样的东西可能会成功
*   使用本地安装在客户端计算机上的某种配套应用程序，该应用程序负责所有磁盘文件处理，可能使用 websockets 等与 HTML5 客户端通信。
    *   一个可能相当混乱的解决方案
    *   一开始可能会让用户有点困惑
*   将选定的文件数据提交到服务器，将其存储在特定路径中，并将此新路径发送给第三方。
    *   将构成通过公司网络发送的大量文件，大小约为 100+ MB
    *   无法对用户选择的文件进行任何就地更改

......就是这样。

有什么时髦的建议吗？明智的话？有用的网址？尖酸的评论？

谢谢。

**编辑：**对于任何对此感到好奇的人，按照下面 jgauffin 的建议，使用 Silverlight 非常简单。

从 Silverlight 代码隐藏（使用提升的权限）：

```
private void fileBtn_Click(object sender, RoutedEventArgs e)
{
    //prompt file select dialog in Silverlight:
    var dlg = new OpenFileDialog();
    dlg.ShowDialog();
    //call JavaScript method and feed it the file path:
    HtmlPage.Window.Invoke("onFileSelected", dlg.File.FullName);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:56:38.020

托管该站点的服务器是否可以访问 PC 网络？

你可以这样列出所有文件..构建一个小的ajax脚本，比如一个文件对话框，它将有php或任何发回结构的东西

无需插件，适用于所有浏览器... :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T07:57:02.963

You'll probably have to use something that runs in the browser like flash or silverlight.

Since it's an internal app I would use silverlight as everything else is in .NET. It should be enought to only make the file access part in the plugin.

Here is an article about local file access: [https://www.wintellect.com/silverlight-4-s-new-local-file-system-support/](https://www.wintellect.com/silverlight-4-s-new-local-file-system-support/)

# c - 捕获 execve 系统调用的参数

> ID：10276747
> 
> 赞同：2
> 
> 时间：2012-04-23T07:49:59.457
> 
> 标签：c, system-calls, strace, ptrace

我正在尝试使用 ptrace 并捕获传递给 execve 系统调用的参数。但是当我使用`PTRACE_GETREGS`并尝试获取参数`SYS_execve`时，所有寄存器值都为 0。你能告诉我 strace 如何让我获得所有通过的参数吗？我尝试阅读它的源代码，但他们显然使用了一些我没有完全使用它的结构。有没有更简单的方法？？

# android - 如何控制时间激活显示更新

> ID：10276748
> 
> 赞同：0
> 
> 时间：2012-04-23T07:50:01.697
> 
> 标签：android, user-interface

我正在寻找以恒定速率更新屏幕的方法，比如每 50 毫秒。在嵌入式世界中，我会配置一个定时器以每 50 毫秒触发一次中断，而 ISR 将处理更新。我对 Android 的想法是拥有一个 FrameLayout，其中注册了许多视图项，以对来自计时器函数的某种回调做出反应。

希望有人能理解我的问题并为我指明正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:07:25.207

您可以在一段时间后使用`handler.postDelayed`in a来调用它。`Runnable`

例如：

```
 handler.post(new Runnable() {

        @Override
        public void run() {
            handler.postDelayed(this, 50);
            //do your task
        }
    }); 
```

确保您的处理程序附加到一个单独的（非 UI）线程，并且在更新 UI 元素时，您总是在 UI 线程上进行。

# windows - Win32 事件对象是递归互斥锁吗？

> ID：10276750
> 
> 赞同：2
> 
> 时间：2012-04-23T07:50:17.293
> 
> 标签：windows, multithreading, locking, mutex, deadlock

我搜索了 MSDN，Mutex 可以被锁定两次，但是没有关于递归在同一个线程中两次获取同一个事件对象的任何词。

我们可以在同一个线程中两次锁定 win32 事件吗？

**编辑**：锁定事件的含义是什么？在这里我假设事件是自动重置的。

1.  锁定：从 WaitForXXX 唤醒线程（例如，WaitForSingleObject）
2.  Un-Lock：一个线程正在调用 SetEvent 或 PluseEvent。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:06:36.083

互斥体与事件根本不同。互斥锁用于提供互斥，因此一次只有一个线程可以访问资源，而事件只是一种通知机制。自动重置事件提供单唤醒通知，而手动重置事件提供多唤醒通知。

如果您发出自动重置事件的信号，则只有一个线程会收到该信号，并且该线程仅接收一次；任何其他线程 --- 或从同一线程对该事件的等待函数的任何其他调用 --- 将等待，直到有第二次调用`SetEvent`.

如果您发出手动重置事件的信号，则它会一直保持信号状态，直到您将其重置，因此可以唤醒多个线程，并且从同一线程对该事件的等待函数的多次调用将成功，直到某些线程调用为止`ResetEvent`。

无论哪种方式，事件都没有“所有者”：仅仅因为线程 A 上次被另一个设置事件的线程从其对等待函数的调用中唤醒，没有任何东西可以阻止它再次等待，也没有任何东西可以指定线程是否如果 A 或 B 都等待相同的自动复位事件，则将唤醒 A 或 B。也没有什么需要任何特定线程调用`SetEvent`：系统中的任何线程都可以这样做，无论该线程是否曾经为该事件调用等待函数。实际上，一个常见的用例有一个线程调用`SetEvent`，而一个或多个其他线程在等待。

所以：是的，您可以等待来自刚刚等待该事件的线程的事件，但这不是锁，其他线程也可能等待该事件，并且如果事件发出信号也可能唤醒。

**已编辑问题的更新：**

您可以**使用**事件来提供锁定，但这不是固有语义的一部分。您可以使用相同的自动重置事件句柄连续调用`WaitForSingleObject`两次。就 Windows 而言，这不是一个错误：您只需要确保某个其他线程或多个线程调用`SetEvent`两次，这样等待线程就会从第一次调用唤醒到`WaitForSingleObject`第二次调用`SetEvent`发生之前，以便避免“丢失”唤醒：`SetEvent`不计算调用，它只是设置标志。

另外：不要使用`PulseEvent`. 它不能保证一个线程会唤醒，即使当前有一个线程在等待。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:22:48.580

我同意安东尼·威廉姆斯的观点。

我想补充的一点是，很多人（不仅仅是你）不太了解互斥锁和自动重置事件之间的区别。它们实际上的行为相似，并且*可以*（从技术角度）用于资源锁定。

它们之间的主要区别在于互斥锁“知道”哪个线程拥有它。也就是说，当`WaitForSingleObject`（或类似的）获得互斥体时 - 它会自动“分配”给调用线程。这有两个后果：

1.  同一个线程可以递归地获取互斥锁。当然，这不适用于自动重置事件。
2.  如果拥有互斥锁的线程退出 - 互斥锁会自动“释放”。相应的`WaitXXXX`函数将返回`WAIT_ABANDONED`.

事件 OTOH 可以被视为信号量的特殊情况。自动重置事件相当于（最多）1 个充电的信号量，而手动重置事件 - 相当于一个无限充电的信号量。

# javascript - 用于在单选按钮中保留选中值的 Jquery

> ID：10276751
> 
> 赞同：0
> 
> 时间：2012-04-23T07:50:17.640
> 
> 标签：javascript, jquery, html

我有两个单选按钮，

```
<div class="class1">
<span><input name="chk1" type="radio" checked="checked" id="check1"/>Option 1</span>
<span><input name="chk2" type="radio" id="check2"/>Option 2</span>
</div> 
```

现在，当单击 ID 为 check1 的单选按钮时，我使用 Jquery 显示隐藏的 div，并在单击 ID 为 check2 的单选按钮时隐藏相同的 div，这是代码，

```
$(document).ready(function(){
    $("#check1").click(function(){
                                            $("#detail").slideDown("slow");
    });

    $("#check2").click(function(){ 
                                            $("#detail").slideUp("slow");
    })
}); 
```

我的问题是，当单击 ID check1（现在显示 Div）并将值发布到服务器并返回同一页面时，即使单击选项 check1，也不会显示 div。有没有其他方法可以使用 attr :checked 或其他方式保留 div？感谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:56:36.780

Check online working demo [http://jsfiddle.net/kbsYS/](http://jsfiddle.net/kbsYS/) .. i guess this is what you actually want

Your jquery code is right .. problem is in your `HTML` you should use same name in radio box

**HTML**

```
<div class="class1">
<span><input name="chk1" type="radio" checked="checked" id="check1"/>Option 1</span>
<span><input name="chk1" type="radio" id="check2"/>Option 2</span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:53:24.017

```
$(document).ready(function(){
    if ($("#check1:checked").length) {
        $("#detail").slideDown("slow");
    }

    $("#check1").click(function(){
        $("#detail").slideDown("slow");
    });

    $("#check2").click(function(){ 
        $("#detail").slideUp("slow");
    })
}); 
```

# sql-server - SQL Server 中的 MS Access 锁定表？

> ID：10276752
> 
> 赞同：0
> 
> 时间：2012-04-23T07:50:18.687
> 
> 标签：sql-server, ms-access, table-locking, table-lock

我已经使用 SQL Server 2 年多了，但我是 MS Access 的新手。我刚刚开始将 MS Access 视为访问 SQL Server 的潜在前端/门户，我正在与一位同事交谈，他说如果我的表单不是，我应该警惕 MS Access 锁定 SQL 表的可能性t 编码正确。我以前经历过桌子锁，并且可以理解它们是多么令人沮丧。我的同事提到使用一种称为“传递”的方法来解决问题。谁能帮助我解释正在发生的事情以及“通过”如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T05:07:11.003

关于 MS Access 中的 SQL 直通查询，请参阅以下链接 - 它解释了如何创建这样的查询...虽然这与 Access 数据库而不是 MS-SQL 有关... [如何在 MS 中创建 SQL 直通查询使用权](http://support.microsoft.com/kb/303968/)

显然，您可以通过在设计模式下打开表单的属性表来控制访问锁定机制（至少在 2013 版中），移动到数据部分，将有一个名为“记录锁”的条目，其中 3 个选项为“无锁”， “所有记录”和“已编辑记录”（这听起来像是行级锁定）。我从未尝试过它们，但该选项可能专用于管理链接表上的访问锁。

# python - 获取 Django 视图中的复选框列表

> ID：10276753
> 
> 赞同：21
> 
> 时间：2012-04-23T07:50:22.283
> 
> 标签：python, django, django-templates

我的模板中有这段代码：

```
{% for email in emails %}
  {%if email%}
     <input type="checkbox" name="email" value="{{email}}" /> {{email}}<br />
  {% endif %}
{% endfor %} 
```

所以模板中的输出是：

```
email1@sample.com
email2@sample.com
email3@sample.com
... 
```

在我看来，我打印了我的 request.POST 。

```
print request.POST
print request.POST['email']
for email in request.POST['email']:
 print email 
```

我得到了这个输出：

```
<QueryDict: {u'email': [u'email1@sample.com', u'email2@sample.com', u'email3@sample.com'], ..., u'csrfmiddlewaretoken': [u'05e5bdb542c3be7515b87e8160c347a0', u'05e5bdb542c3be7515b87e8160c347a0']}>
email3@sample.com
e
m
a
i
l
3
@
s
a
m
p
l
e
.
c
o
m 
```

我的问题是，如何在我的视图中获取电子邮件列表？我希望输出是这样的..

```
email1@sample.com
email2@sample.com
email3@sample.com
... 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-23T07:55:36.573

使用[request.POST.getlist](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict.getlist)：

> 返回具有请求键的数据，作为 Python 列表。如果键不存在并且没有提供默认值，则返回一个空列表。除非提供的默认值不是列表，否则保证返回某种列表。

# r - R ggplot：pdf输出中的geom_tile行

> ID：10276762
> 
> 赞同：10
> 
> 时间：2012-04-23T07:50:56.810
> 
> 标签：r, pdf, ggplot2

我正在构建一个使用 geom_tile 的绘图，然后将其输出到 .pdf（使用 pdf("filename",...)）。但是，当我这样做时，.pdf 结果有细小的线条（有人说的条纹）贯穿其中。我附上了一张显示问题的图片。 ![最小的例子](../Images/fd79ae3e9fbcb7d0ccfa4f8dafb6c34b.png)

谷歌搜索让[这个线程](http://groups.google.com/group/ggplot2/browse_thread/thread/ee3ce394df1bba95)，但那里唯一真正的建议是尝试将 size=0 传递给 geom_tile，我这样做没有任何效果。关于如何解决这些问题的任何建议？我想用它作为论文中的一个数字，但它不会像这样工作。

最小代码：

```
require(ggplot2)
require(scales)
require(reshape)

volcano3d <- melt(volcano) 
names(volcano3d) <- c("x", "y", "z") 
 v <- ggplot(volcano3d, aes(x, y, z = z)) 

pdf("mew.pdf")
print(v + geom_tile(aes(fill=z)) + stat_contour(size=2) + scale_fill_gradient("z")) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T08:01:23.377

发生这种情况是因为默认`colour`的瓷砖`geom_tile`看起来是白色的。

要解决此问题，您需要以`colour`与`fill`.

```
print(v + 
  geom_tile(aes(fill=z, colour=z), size=1) + 
  stat_contour(size=2) + 
  scale_fill_gradient("z")
) 
```

![在此处输入图像描述](../Images/3b14150a65cde3bdcb33b140d2a6cb4e.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T08:00:58.273

尝试使用`geom_raster`：

```
pdf("mew.pdf")
print(v + geom_raster(aes(fill=z)) + stat_contour(size=2) + scale_fill_gradient("z"))
dev.off() 
```

在我的环境中质量很好。

![在此处输入图像描述](../Images/e1511788b15af7365e508f91c3cc7bc4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:13:43.187

我无法在我的计算机（Windows 7）上重现该问题，但我记得这是列表中针对某些配置讨论过的问题。Brian Ripley（如果我记得的话）推荐

```
CairoPDF("mew.pdf") # Package Cairo 
```

解决这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-01T14:17:39.760

为了给这只猫剥皮，并进入太多细节，这段代码将 R 图像分解为四边形网格（由 使用`rgl`），然后显示光栅图和“平铺”或“矩形”之间的区别“ 阴谋。

```
library(raster)
im <- raster::raster(volcano)
## this is the image in rgl corner-vertex form
msh <- quadmesh::quadmesh(im)

## manual labour for colour scaling
dif <- diff(range(values(im)))
mn <- min(values(im))
scl <- function(x) (x - mn)/dif 
```

这是传统的 R 'image'，它为每个像素绘制一个小块或 'rect()'。

```
list_image <- list(x = xFromCol(im), y = rev(yFromRow(im)), z = t(as.matrix(im)[nrow(im):1, ]))
image(list_image) 
```

它很慢，虽然它在底层调用了“rect()”的来源，但我们也不能设置边框颜色。使用 'useRaster = TRUE' 来使用 'rasterImage' 以获得更有效的绘图时间，控制插值，并最终控制文件大小。

现在让我们再次绘制图像，但要为每个像素显式调用 rect。（'quadmesh' 可能不是最简单的演示方式，它在我的脑海中很新鲜）。

```
## worker function to plot rect from vertex index
rectfun <- function(x, vb, ...) rect(vb[1, x[1]], vb[2,x[1]], vb[1,x[3]], vb[2,x[3]], ...)

## draw just the borders on the original, traditional image
apply(msh$ib, 2, rectfun, msh$vb, border = "white") 
```

现在用“rect”再试一次。

```
## redraw the entire image, with rect calls 
##(not efficient, but essentially the same as what image does with useRaster = FALSE)
cols <- heat.colors(12)
## just to clear the plot, and maintain the plot space
image(im, col = "black")  
for (i in seq(ncol(msh$ib))) {
  rectfun(msh$ib[,i], msh$vb, col = cols[scl(im[i]) * (length(cols)-1) + 1], border = "dodgerblue")
} 
```

# java - 安装存在于数据目录中的 apk

> ID：10276763
> 
> 赞同：1
> 
> 时间：2012-04-23T07:51:08.983
> 
> 标签：java, android, uri

我正在尝试安装一个存在于内部/外部存储中的 apk 文件。这是我的代码：

```
final String fileuri = "file://" + absolutePath;
Log.v("FILE_BROWSER", "File to be installed: " + Uri.parse(fileuri).getPath());
final Intent promptInstall = new Intent(Intent.ACTION_VIEW);
promptInstall.setDataAndType(Uri.parse(fileuri), "application/vnd.android.package-archive");
promptInstall.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(promptInstall); 
```

如果文件存在于外部存储中，则该 apk 文件已成功安装。例如。`/mnt/sdcard/MyApp.apk`

但如果 apk 文件存在于内部存储中（例如 /data/data/com.myapp/files/MyApp.apk），则安装失败。错误信息是：`Parse Error: There is a problem parsing the package`

一种解决方案是将文件复制到 SDCARD，然后安装它。但是，在 SDCARD 不可用的情况下，此技巧将不起作用。

对这些人有帮助吗？如果 SDCARD 不可用，如何在内部存储目录中安装 apk？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:02:34.370

为此，您的 .apk 文件必须获得`Context.MODE_WORLD_READABLE`许可。

我这样做是为了在我的应用程序的内部存储中写入 .apk 文件

```
String outFileName = path+"/<Application_Name>.apk";
OutputStream myOutput = openFileOutput("<Application_Name>.apk", Context.MODE_WORLD_READABLE); 
```

然后安装它，

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(path+"/<Application_Name>.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
```

这里的路径是 `path = getFilesDir().getAbsolutePath();`

这在我的情况下很好用..

# uitableview - MonoTouch 如何为带有静态单元格的 UITableViewController 实现 RowSelected

> ID：10276764
> 
> 赞同：6
> 
> 时间：2012-04-23T07:51:21.430
> 
> 标签：uitableview, static, xamarin.ios, cells

我正在将本机 Objective-C 应用程序移植到 Monotouch 解决方案。

我的故事板中有一个表格视图，其中包含一些静态表格单元格。

使用以下objective-c代码a从表中收到一个选择

```
- (void) tableView:(UITableView *) aTableView didSelectRowAtIndexPath:(NSIndexPath *) indexPath
{        // remove the row highlight
    [aTableView deselectRowAtIndexPath:indexPath animated:YES];

    switch(indexPath.row) {
        case 0: [self callWebsite]; break;
        case 1: [self sendEmail]; break;
        case 2: [self makePhoneCall]; break;
    }

    return;
} 
```

现在我想在 MonoTouch 中做同样的事情，但无法找出我在网上找到的所有示例以及如何使用 DataSource 和 UITableViewDelegate。

但是当使用这种方法时，我的“静态”单元格被删除、替换。

这就是我正在尝试的

```
public partial class ContactViewController : UITableViewController
{
    public ContactViewController (IntPtr handle) : base (handle)
    {
        this.TableView.Delegate = new CustomTableViewDelegate();
    }
}

public class CustomTableViewDelegate : UITableViewDelegate
{
    public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
    {
        // Remove the row highlight
        RowDeselected(tableView, indexPath);

        /*
             // Is this section our "button" section?
            switch(indexPath.row) {
                case 0: [self callWebsite]; break;
                case 1: [self sendEmail]; break;
                case 2: [self makePhoneCall]; break;
            }
        */

        Console.WriteLine("Do something meaningfull.");
    }
} 
```

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T12:04:21.810

我认为你应该尝试使用`WeakDelegate`来完成这项工作。

在您的控制器中连接方法如下：

```
[Export("tableView:didSelectRowAtIndexPath:")]
public void RowSelected (UITableView tableView, NSIndexPath indexPath)
{
     //Your code here
} 
```

然后设置`TableView.WeakDelegate = this;`

玩弄它，我的参数可能不完全正确，等等。

# java - 对列表进行完整迭代后只需要一个警告。每次迭代没有一个警告器

> ID：10276765
> 
> 赞同：0
> 
> 时间：2012-04-23T07:51:28.457
> 
> 标签：java, iteration

我的全部程序如下。

我遇到的问题是我的标准输出被这行特定代码产生的错误消息淹没了。

```
 for(int x = 0; x < 3; x++)
  {
    for(int xx = 0; xx < 6; xx++)
    {
      if(toppings[x].equalsIgnoreCase(validToppings[xx]))
      {price += 0.75;} else {System.out.println("Error in Pizza class: Attempt to set invalid pizza topping " + toppings[x]);};
    }
  } 
```

我宁愿不重新编写我花了很多时间完善的代码，但如果我必须使用 switch 语句或类似的东西来获得简洁的错误消息，我会的。虽然我认为我目前的方法是最好的。

以下是该课程的测试，

```
public class TestPizza
{
  public static void main(String args[])
  {
    int x;
    String t1[] = {"Mushrooms", "Onions", ""};
    String t2[] = {"Pepperoni", "Mushrooms", ""};
    String t3[] = {"Pepperoni", "Mushrooms", "Onions"};
    String t4[] = {"Sausage", "", ""};
    Pizza one = new Pizza();
    Pizza two = new Pizza();
    Pizza three = new Pizza();
    Pizza four = new Pizza();

one.setSize(12);
one.addTopping(t1);
one.showValues();

two.setSize(8);
two.addTopping(t2);
two.showValues();

three.setSize(16);
three.addTopping(t3);
three.showValues();

four.setSize(20);
four.addTopping(t4);
four.showValues();

  }
} 
```

这是课堂。

```
// This custom class is used to create Pie objects
// It stores the data about the Pie in four variables:
// size, price, type and baked
// It lets the program that creates the Pie object set these values using four methods:
// setSize, setPrice, setType and bake

public class Pizza
{

  // Declare four variables that can store the values for each pie
  // Each Pie object will have their own, separate copy of these variables 12.
    private int size;
    private double price;
    private boolean baked;
    private int x;
    private int xx;
    private String validToppings[] = {"mushrooms", "pepperonis", "onions", "mushroom", "pepperoni", "onion"};
    private String toppings[] = new String[3];

    // The "constructor" method is called when a new pie
    // object is first created. We use it to set "default" values.
    // Our typical pie is 10 inches, costs $8 and is not baked yet
    // We don't yet know what the pie filling will be
    Pizza()
    {
      size = 999;
      price = 999;
      baked = false;
    }

    // showValues() is a void method that displays the values of the
    // current Pie
    public void showValues()
    {
      System.out.println("Pie Size: " + size);
      for(int x = 0; x < 3; x++) {if(toppings[x] != ("")) {System.out.println("With " + toppings[x]);}};
      System.out.println("Price of Pie: $" + price + "\n\n");
    }

    // getSize() returns the size of the pie
    public int getSize()
    {
      return size;
    }
    // getPrice() returns the price of the pie
    public double getPrice()
    {
      return price;
    }
    // baked() returns whether or not the pie is baked
    public boolean getBaked()
    {
      return baked;
    }
    // setSize() assigns a size to the pie
    public void setSize(int thisSize)
    {
      size = thisSize;
      switch(size)
      {
        case 8: price = 10.00; break;
        case 12: price = 14.00; break;
        case 16: price = 18.00; break;
        default: System.out.println("Error in Pizza class: Attempt to set invalid Pizza size."); break;
      }
    }

    // setPrice() assigns a price to the pie
    public void addTopping(String programToppings[])
    {
      for(int x = 0; x < 3; x++)
      {
        toppings[x] = programToppings[x];
      }
      for(int x = 0; x < 3; x++)
      {
        toppings[x] = toppings[x].toLowerCase();
      }
      for(int x = 0; x < 3; x++)
      {
        for(int xx = 0; xx < 6; xx++)
        {
          if(toppings[x].equalsIgnoreCase(validToppings[xx]))
          {price += 0.75;} else {System.out.println("Error in Pizza class: Attempt to set invalid pizza topping " + toppings[x]);};
        }
      }
    }

  public void bake()
  {
    baked = true;
  };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:55:33.313

您应该使用最初设置为的`boolean`变量。找到匹配项后，将其设置为。在所有迭代完成后，如果仍然是，则打印错误消息。`isValid``false``true``isValid``false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:57:11.850

```
 boolean error = false;
  for(int x = 0; x < 3; x++)
  {
    for(int xx = 0; xx < 6; xx++)
    {
      if(toppings[x].equalsIgnoreCase(validToppings[xx]))
      {price += 0.75;} else {error = true;};
    }
  }
  if(error){
    System.out.println("Error in Pizza class: Attempt to set invalid pizza topping");
  } 
```

如果您还想保留顶部信息，则需要将每个顶部存储在一个列表中（只需在每次错误设置为 true 时添加），然后在 if(error) 语句中迭代该列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:04:20.047

如果出现错误，您可能不想继续循环。我也会使用 Set 作为有效的浇头。

```
// set globally.
Set<String> validTopppingSet = new HashSet<String>();
for(String t: validToppings) validToppingSet.add(t.toLowerCase());

// when checking the toppings.
for(String topping: topping) {
    if (validToppings.contains(topping.toLowerCase())) {
        price += 0.75;
    } else {
        price = Double.NaN;
        System.out.println("Error in Pizza class: Attempt to set invalid pizza topping: " + topping); // it useful to know what was invalid.
        break;
    }
} 
```

# delphi - Delphi IDE自定义菜单项，如何添加？

> ID：10276768
> 
> 赞同：6
> 
> 时间：2012-04-23T07:51:34.583
> 
> 标签：delphi, delphi-7, menuitem, delphi-2006

我正在使用`Delphi 7`and开发一个项目`Delphi 2006`，我正在开发一个可以获取某些系统信息的组件。现在的要求是组件安装到系统后，IDE上应该有一个菜单项，像这样

![在此处输入图像描述](../Images/730d2afd7bd1ce3022a8190ced3b81e8.png)

`delphi 7`像 这样![在此处输入图像描述](../Images/635f43a2867341cc132851e155f90b10.png)

我在网上搜索了有关添加菜单项的信息，但我没有任何东西可以添加一个`IDE`项目`EurekaLog`。任何人都可以告诉我如何添加类似`EurekaLog`或的项目`mysql`吗？它在注册表中的某个地方吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T08:04:23.057

要将菜单添加到 Delphi IDE，您必须使用[Delphi Open Tools API](http://docwiki.embarcadero.com/RADStudio/XE8/en/Extending_the_IDE_Using_the_Tools_API)。从这里您可以使用这样的代码访问 delphi IDE 的主菜单。

```
LMainMenu:=(BorlandIDEServices as INTAServices).MainMenu; 
```

或者

```
LMainMenu:=(BorlandIDEServices as INTAServices).GetMainMenu; 
```

然后添加您想要的菜单项。

检查这些链接以获取其他示例

*   [Open Tools API 第 15 章：IDE 主菜单](http://www.davidghoyle.co.uk/WordPress/?p=777)
*   [Delphi Open Tools API 简介](http://www.sdn.nl/SDN/Artikelen/tabid/58/view/View/ArticleID/3157/Introduction-to-the-Delphi-Open-Tools-API.aspx)
*   [如何将菜单项添加到 IDE 的主菜单？](http://www.gexperts.org/open-tools-api-faq/#menuitem)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T23:00:16.493

如果您想专门向 HELP 菜单添加一个菜单项，并在您的包卸载时将其删除，并处理项目的启用/禁用，那么此向导代码可能会有所帮助。我将 GExperts 文档中显示的示例向导代码作为一个启动项目，并将其作为一个稍微好一点的启动项目发布在这里。如果您获取此代码并扩展它，您可以很快开始：

[https://bitbucket.org/wpostma/helloworldwizard/](https://bitbucket.org/wpostma/helloworldwizard/)

他们所说的“向导”是指“简单的 IDE 专家”，即在 IDE 中添加了一个菜单，实现了 IOTAWizard 和 IOTAMenuWizard。这种方法有很多好处，并且是 GExperts 向导的编写方式。

代码的核心是这个启动向导，需要将它放入一个包（DPK）并安装，并在IDE中注册：

```
// "Hello World!" for the OpenTools API (IDE versions 4 or greater)
// By Erik Berry: http://www.gexperts.org/, eberry@gexperts.org

unit HelloWizardUnit;

interface

uses ToolsAPI;

type
  // TNotifierObject has stub implementations for the necessary but
  // unused IOTANotifer methods
  THelloWizard = class(TNotifierObject, IOTAMenuWizard, IOTAWizard)
  public
        // IOTAWizard interface methods(required for all wizards/experts)
        function GetIDString: string;
        function GetName: string;
        function GetState: TWizardState;
        procedure Execute;
        // IOTAMenuWizard (creates a simple menu item on the help menu)
        function GetMenuText: string;
  end;

implementation

uses Dialogs;

procedure THelloWizard.Execute;
begin
  ShowMessage('Hello World!');
end;

function THelloWizard.GetIDString: string;
begin
  Result := 'EB.HelloWizard';
end;

function THelloWizard.GetMenuText: string;
begin
  Result := '&Hello Wizard';
end;

function THelloWizard.GetName: string;
begin
  Result := 'Hello Wizard';
end;

function THelloWizard.GetState: TWizardState;
begin
  Result := [wsEnabled];
end;

end. 
```

上面没有显示注册码，但如果您从上面的链接下载它，它会包含在它自己的“Reg”（注册）单元中。 [教程链接在 EDN 上。](http://edn.embarcadero.com/article/39007)

# wpf - 打开另一个带有 STA 线程错误的 xaml 窗口

> ID：10276774
> 
> 赞同：0
> 
> 时间：2012-04-23T07:52:12.533
> 
> 标签：wpf, dispatcher

我正在使用 WPF。我使用 Dispatcher 在主 xaml 窗口中运行线程进程。

然后我在打开另一个 WPF 以显示显示 3D 图像的结果时收到此错误：

> {"调用线程必须是 STA，因为很多 UI 组件都需要这个。"}

这就是我开始一个新窗口的方式：

```
void DisplayFormThread()
{
    IResult result = _mainWindow.GetResult();
    ResultView resultView = new ResultView (result);
    resultView.Show();
} 
```

我试图通过在stackoverflow上的一些帖子中添加这个来解决这个问题，但它没有帮助：

```
ThreadStart start = delegate()
{
   DispatcherOperation op = Dispatcher.CurrentDispatcher.BeginInvoke(
        new delegateNewWindow(DisplayFormThread), DispatcherPriority.Background);

        DispatcherOperationStatus status = op.Status;
                   while (status != DispatcherOperationStatus.Completed)
                   {
                            status = op.Wait(TimeSpan.FromMilliseconds(1000));
                            if (status == DispatcherOperationStatus.Aborted)
                            {
                                 // Alert Someone
                            }
                    }

       };

// Create the thread and kick it started!
Thread thread = new Thread(start);
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:15:52.153

原因是我们新创建的线程没有启用支持 WPF 窗口基础结构。特别是，它不支持 Windows 消息泵，您必须为新创建的窗口运行单独的调度程序。[这是此示例](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:13:43.103

WPF 要求 thred 是 STA 类型，因此如果您希望 DisplayFormThread 由 STA thead 调用，您必须执行以下操作：

```
Thread newThread = new Thread(new ThreadStart(DisplayFormThread));
newThread.SetApartmentState(ApartmentState.STA);
newThread.Start(); 
```

STAThread 指的是“单线程公寓”，指的是当前（主）线程使用的线程模型。基本上，通过 [STAThread] 声明，其他应用程序将在向您发送数据时知道您的线程策略是什么。STA 模型是 Windows 线程/应用程序最常见的线程模型。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms680112%28VS.85%29.aspx)阅读有关公寓状态的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-20T14:08:58.703

UI 对象必须在单线程单元（sta）中声明，并且对于每个 STA 线程，您必须创建一个新的调度程序。

您必须`Dispatcher.Run()`在线程启动的动作参数中调用

```
ThreadStart start = delegate() {
    DispatcherOperation op = Dispatcher.CurrentDispatcher.BeginInvoke(
    new delegateNewWindow(DisplayFormThread), DispatcherPriority.Background);

    DispatcherOperationStatus status = op.Status;
    while (status != DispatcherOperationStatus.Completed) {
        status = op.Wait(TimeSpan.FromMilliseconds(1000));
        if (status == DispatcherOperationStatus.Aborted) {
            // Alert Someone
        }
    }
    Dispatcher.Run();
};

// Create the thread and kick it started!
Thread thread = new Thread(start);
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

WPF UI 线程需要一个调度程序，因为调度程序管理多个 UI 线程之间的数据共享。

# html - 如何在右上角而不是左侧显示关闭按钮

> ID：10276777
> 
> 赞同：0
> 
> 时间：2012-04-23T07:53:01.883
> 
> 标签：html, css

![在此处输入图像描述](../Images/19dd3a35b4e5d3123206894b96b9da2b.png)我正在使用灯箱来显示图像，但左上角的近距离阵列显示，但我希望它在右边我是 CSS 新手。

我的 HTML 代码是为链接按钮一上的灯箱提供的

```
 <div class="linkbutton"> 

           <a href="image/popup_page_1.png" rel="lightbox"><img src="image/smallicon_2.png"  alt="" /></a>
            </div>

        </div> 
```

```
 <div id="page_two" class="panel">
            <div class="main_heading_two">Strategy</div>
            <div class="menu">
                <ul>
                    <li class="stix"></li>
                    <li><a href="#page_one"><img src="image/overview.gif" /></a></li>
                    <li class="stix"></li>
                    <li><a href="#page_two"><img src="image/strategy_active.png"/></a></li>
                    <li class="stix"></li>
                    <li><a href="#"><img src="image/draxxin.gif"/></a></li> 
                    <li class="stix"></li>
                    <li><a href="#"><img src="image/excede.gif"/></a></li>
                    <li class="stix"></li>
                    <li><a href="#"><img src="image/results.gif"/></a></li>
                    <li class="stix"></li>
                    <li><a href="#"><img src="image/reference.gif"/></a></li> 
                    <li class="stix"></li>
                </ul>
            </div>
            <div class="rightclass_one"><img src="image/whiteslide.png"/></div>  
            <div class="pagetwo_text"><p>Get up to 21 days of BRD therapy strategy using longer-duration antimicrobials DRAXXIN ® (tulathromycin) Injectable Solution and EXCEDE ® (ceftiofur crystalline free acid) Sterile Suspension.
                </p></div>
            <div class="pagetwo_list_text">Advantages for Producers:
                <ul><li>Fewer treatments</li>
                    <li>Less stress on cattle</li>
                    <li>Fewer mortalities</li>
                    <li>Cattle can recover in their own pen
                    </li>
                    <li>Lower treatment costs and higher profits
                    </li></ul></div>
            <div class="pagetwo_list_text2">Extended duration strategy
            </div>
            <div>
                <ul>
                    <li class="midmenu_1"><a href="#page_one"><img src="image/backward.png"/></a></li>
                    <li class="midmenu_2"><a href="#page_two"><img src="image/forward.png"/></a></li>
                </ul>
            </div>
            <div class="right_text"><p>Either way you use them, it takes both DRAXXIN and EXCEDE for control and treatment of BRD in high-risk cattle to give you the longest duration of BRD therapy
                </p></div>
            <div class="image_21"><img src="image/pagetwo_graph_two_4.png"/></div>
            <div class="ratemeter"><img src="image/pagetwo_graph_one.png"/></div>
            <div id="one"   class="image_one" ><img src="image/optiononetwo.png"/></div>
            <div id="two"  class="image_two"><img src="image/optiononeone.png"/></div>
            <div id="three" class="image_one_one" ><img src="image/pagetwo_graph_two_11.png" /></div>
            <div id="four" class="image_two_two" ><img src="image/pagetwo_graph_two_22.png"
                /></div>

            <div class="option_image"><img src="image/option_1.png"  onclick="showHideDiv()"/></div>

            <div class="option_image_label">Option 1</div>
            <div class="option_image_one"><img src="image/option_1.png" onclick="showHideView()"/></div>
            <div class="option_image_label_one">Option 2</div>
            <div class="fourteen_day"><img src="image/button_14days.PNG"/></div>
            <div class="heading_one">Post Metaphylaxis Interval (PMI)</div>

            <div class="linkbutton_one">

            <a href="image/popup_1_page_2.png" rel="lightbox"><img src="image/smallicon_1.png"  alt="" /></a>
            </div>

            <div class="seven_day"><img src="image/button_7days.PNG"/></div>
            <div class="heading_two">Post Treatment Interval (PTI)</div>
            <div class="linkbutton_two">
            <a href="image/popup_2_page_2.png" rel="lightbox"><img src="image/smallicon_1.png"  alt="" /></a>
           </div>

        </div><!-- End of page two--> 
```

Belos 是我用于灯箱的 css

```
.lb-data .lb-close {
    width:35px;
    position: absolute;
    float: right;
    padding-bottom: 0.7em;
    outline: none;
    top:-35px;
} 
```

![在此处输入图像描述](../Images/d2a4b8dd40c39bad899bcb4ff31fa7a4.png) 图像在右侧显示十字符号但远离图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:55:51.023

apply:

```
 right:0px; 
```

float won't work in conjunction with absolute positioning.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:55:53.857

Write like this:

```
 .lb-data .lb-close {
 width:35px;
 position: absolute;
 padding-bottom: 0.7em;
 outline: none;
 top:-35px;
right:0; 
```

}

& there is no need to define **float** when you use **position:absolute** because **float** is not work with **position:absolute**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:14:17.610

一件重要的事情**float**不适用于**绝对位置**，所以你不需要在这里定义 float 你只需要添加**right:0;** 我希望这会顺利进行....

```
 .lb-data .lb-close {
        width:35px;
        position: absolute;
        padding-bottom: 0.7em;
        outline: none;
        top:-35px;
        right:0;
    } 
```

**更新的答案** 在这里看到演示工作正常：- [http://jsbin.com/ilixux/5/edit](http://jsbin.com/ilixux/5/edit)

我是通过**position:relative;** 对其父级和**位置：绝对；**给它的孩子，现在你可以看到它的工作正常......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T07:57:18.367

It's not easy to answer without seeing some other html code, anyway float and `position: absolute` don't work together. I suggest you to remove the floating and add `right: 0;` to your css definition. You should also be sure that the parent of `.lb-close` has set `position: relative`;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T07:58:09.273

```
.lb-data .lb-close 
{
 width:35px;
 position: absolute;
 /*float: right;*/ <-- delete this
 padding-bottom: 0.7em;
 outline: none;
 top:-35px;
 right: 0; <-- new line to add
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-23T07:55:26.787

add **left:** to your css code and place it where you exactly desire it.

eg:

```
left: 100px; 
```

# iphone - CoreData：如何在 iphone 中填充数组（通过解析 XML 组件获取）并使用 CoreData 保存它们

> ID：10276779
> 
> 赞同：0
> 
> 时间：2012-04-23T07:53:12.190
> 
> 标签：iphone, objective-c, core-data, xml-parsing, nsmanagedobjectcontext

**我试图做的一个项目是开发一个 XML 解析器来解析 XML 组件并使用 CoreData 保存它们，以及通过 TableView 显示它们。**

*我已经从 xml 文件中解析了数据。并将解析后的数据保存到 3 个数组中。*

现在我需要将这些数据存储到核心数据中。

```
how s'd i populate these 3 arrays in to core-data? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:02:03.793

在开始使用 Core Data 时，Apple 的文档非常值得一读。您可以在此处找到入门指南：[核心数据指南](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)

# javascript - 页面更改时重置浏览器缩放级别

> ID：10276781
> 
> 赞同：3
> 
> 时间：2012-04-23T07:53:20.073
> 
> 标签：javascript, mobile

我有一个使用 ajax 加载页面的移动网站。我想添加的功能之一是在页面更改时重置缩放级别。

有没有一种很好的方法来检测用户在查看页面时是否缩放了视图？

到目前为止，我已经设法检查捏缩放。但有时也有双击缩放..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T14:19:57.767

您可以通过比较 innerWidth 和文档宽度来获取用户缩放级别。文档宽度是以像素为单位的设备宽度，内部宽度是缩放时屏幕上的像素（相对于文档最初的宽度）。我已经在 android（ICS 和 Jellybean）和 iOS（5 和 6）上对此进行了测试，它似乎可以工作。请注意，我没有将视口设置为设备宽度或高度

```
 ratio = document.width / window.innerWidth

  if ratio > 1 then zommed else notZoomed 
```

然后，您可以在用户双击或捏合时执行此检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T23:31:00.037

您可以使用 javascript 设置 [meta name="viewport"] 标记的内容来设置缩放级别，不幸的是我还没有找到检测当前缩放级别的方法

# javascript - jQuery 限制同时 AJAX 请求的数量

> ID：10276784
> 
> 赞同：15
> 
> 时间：2012-04-23T07:53:30.260
> 
> 标签：javascript, jquery, ajax

所以我有一系列我想触发的 AJAX 事件，但我想将同时请求的数量限制为 5，并将其余的排队。例如，我有以下内容：

```
 $("div.server").each(function() {
     $.ajax(....);
 }); 
```

所以类可能有 100 个 div `server`，但我只想在任何给定时间运行 5 个请求。一旦请求完成，它应该继续下一个。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T07:56:52.980

最好的方法是让浏览器处理它。通常浏览器已经有每个主机的连接限制，所以如果连接太多，它们会自动排队。

但是，我会考虑更改 API，以便它从多个元素中获取日期并返回多个元素的数据——即减少必要的 HTTP 请求的总数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T07:57:54.767

将所有请求参数推送到一个名为`queueRequest`和 call的函数的队列中`checkQueue`。`checkQueue`检查队列中是否有项目以及活动请求的数量是否小于 5。如果满足这些条件，它会从队列中弹出一个请求并将其转换为真正的 AJAX 请求。然后它将一个`done`处理程序附加到减少活动请求计数并调用的请求上`checkQueue`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T08:14:51.900

如果仍然不确定浏览器在请求队列中的能力，你可以尝试这样的事情：

```
var count = 0;          // Number of functions being called
var funcArray = [];     // Array of functions waiting
var MAX_REQUESTS = 5;   // Max requests
var CALL_WAIT = 100;        // 100ms

function call()
{
    // Check if count doesn't exceeds or if there aren't any functions to call
    if(count >= MAX_REQUESTS || funcArray.length == 0)
        // Call call() after 100ms
        setTimeout(function() { call() }, CALL_WAIT);
    count++;            // Add request to the counter
    var func = funcArray.pop();
    $.ajax(..., function(data)
    {
        func(data);
        // .......
        count--;        // Substract request to the counter
    });
}

$(function()
{
    call();     // First call to start polling. It will call itself each 100ms
});

$(function()
{
    $("div.server").each(function() {
         funcArray.push(function(data)
         {
            alert(data);
         });
     });
}); 
```

您可能需要根据需要对其进行调整。

# db2 - AS400 jdbc字符转换

> ID：10276787
> 
> 赞同：0
> 
> 时间：2012-04-23T07:53:46.163
> 
> 标签：db2, ibm-midrange

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:45:56.490

您可以尝试使用不同的代码页在您的 ccsid424 物理文件上创建一个逻辑文件。在 as/400 上，通过添加关键字 . 可以为各个列创建具有不同代码页的逻辑文件`CCSID(<num>)`。您甚至可以将其设置为 unicode 字符集，例如`CCSID(1200)`UTF-16。当然，您的物理文件仍然只能存储 424 代码页中的字符，并且这些字符将被一些无效字符 char 替换，但这样翻译可能会更好。

没有办法直接将不在代码页 424 中的字符存储在具有该代码页的列中（我能想到的唯一方法是以某种方式使用多个字符对它们进行编码，但这很可能*不是*您想要做的，因为它会带来比它“解决”更多的问题）。

如果您可以控制该系统，并且可以进行一些更大的更改，则可以反过来：使用不同名称创建该物理文件的新 unicode 版本（我建议 CCSID(1200)，这与您在 as/400 afaik 上接近 UTF-16 一样接近，根据我的经验，系统的所有部分都不支持 UTF-8。IBM 确实推荐 1200 用于 unicode）。比将所有数据从旧文件转移到新文件，删除旧文件（在此之前，**备份它！**)，然后使用旧物理文件的名称在新物理上创建一个逻辑文件。在该逻辑文件中，将所有带有 ccsid 的列从 1200 更改为 424。这样，现有程序仍然可以处理数据。当然，一旦您插入不在 ccsid 424 子集中的数据，逻辑文件中就会出现无效字符；因此，您很可能必须查看所有使用新逻辑文件的程序。

# c# - EntityFramework CodeFirst Assoziation of collections

> ID：10276792
> 
> 赞同：1
> 
> 时间：2012-04-23T07:54:25.733
> 
> 标签：c#, asp.net, code-first

i have a problem with EF CodeFirst. I have some Model inherited from my BaseModel, and i want to include Images in some Models. For example i have EFModel User

```
public class User : BaseModel<User>
{
    /// <summary>
    /// Initializes a new instance of the <see cref="User"/> class.
    /// </summary>
    public User()
    {
       Photos = new HashSet<Photo>();
    }

    /// <summary>
    /// Images
    /// </summary>
    public ICollection<Photo> Photos { get; set; }
} 
```

And another EF Model named Spot

```
/// <summary>
/// Eventlocation
/// </summary>
[DebuggerDisplay("Spot: {Name} Coordinate: {Coordinate}")]
public class Spot : BaseModel<Spot>, ISpot
{
    /// <summary>
    /// Initializes a new instance of the <see cref="Spot"/> class.
    /// </summary>
    public Spot()
    {
        Photos = new HashSet<Photo>();
    }

    /// <summary>
    /// Name
    /// </summary>
    [Display(Name = "Spotname", GroupName = "Names", ResourceType = typeof(Texts))]
    [Required]
    public string Name { get; set; }

    /// <summary>
    /// Description
    /// </summary>
    [Display(Name = "Description", Description = "SpotDescription", GroupName = "Names", ResourceType = typeof(Texts))]
    public string Description { get; set; }

    /// <summary>
    /// Geo Position
    /// </summary>
    public GeoCoordinate Coordinate { get; set; }

    /// <summary>
    /// Images
    /// </summary>
    public ICollection<Photo> Photos { get; set; }

} 
```

In both EF Models i want to have a list of photos. Currently the Photo Entity only have Name and description (byte[] i will made later)

```
public class Photo 
{
    /// <summary>
    /// Identifier
    /// </summary>
    [Key]
    public int Id { get; set; }

    /// <summary>
    /// Imagename
    /// </summary>
    public string Name { get; set; }

    /// <summary>
    /// Imagedescription
    /// </summary>
    public string Description { get; set; }

} 
```

So everything is working, but my problem is the generated table. Because Entity generates the table "dbo.Photos" with following columns | ID (PK) | Name | Description | User_ID (FK) | Spot_ID (FK)

But i want to have simple table that i can easy use for all BaseModels without to need to have it in BaseModel class. But i want to have for example following columns

| ID (PK) | Name | Description | RelationModel_ID (FK)

I really dont know how i can make this. And i hope somebody can help me.

Thank you very much

///EDIT:

BaseModel

```
public abstract class BaseModel : IBaseModel, IEquatable<BaseModel>
{
    [Key]
[HiddenInput(DisplayValue = false)]
    public Guid Id { get; set; }
}

public abstract class BaseModel<T>:BaseModel
    where T:BaseModel<T>,new()
{
    public static T Create()
    {
        var result = new T(){Id = Guid.NewGuid()};
        result.UpdateOwner();
        return result;
    }
} 
```

# hibernate - How can i put annotations that identify my entity with many fields but that is not the ID field (Hibernate)

> ID：10276794
> 
> 赞同：0
> 
> 时间：2012-04-23T07:54:30.960
> 
> 标签：hibernate, ejb-3.0

I am using Hibernate with EJB 3 (no xml). I need to implement a logic for prevent duplicate data. I have got class like this:

```
public class CvnCity  implements java.io.Serializable {

   private Integer idCity;
   private String city;

   public CvnCity() {
   }  

   public CvnCity(String city) {
      this.city = city;
   }

   @Id @GeneratedValue(strategy=IDENTITY)

   @Column(name="ID_CITY", unique=true, nullable=false)
   public Integer getIdCity() {
      return this.idCity;
   }
... 
```

}

Another like this:

public class Person implements java.io.Serializable {

```
 private Integer idPerson;
   private String name;
   private City city;

   ... 
```

}

I want to prevent insert Person with the same name and with the same city, also, i need to expand this issue to many class so i though to implement a general logic that only has as input, the "uniques" fields.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:28:57.267

查看[NaturalId](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-naturalid)和[Hibernate Annotations](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/) Reference `Section 2.2.3.2\. Composite identifier`。

# android - 在我的 onReceive 中使用 main.xml 中的 EditText

> ID：10276797
> 
> 赞同：1
> 
> 时间：2012-04-23T07:55:07.480
> 
> 标签：android, android-layout, broadcastreceiver, alarm

我有一个带有 main.xml 布局的 AlarmActivity。还有一个扩展 BroadcastReceive 的报警类和一个 onReceive 方法。我想从 main.xml 中的 EditText 获取值到警报类中的 onReceive 方法中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:58:01.710

我认为您不了解 BroadcastReceiever 的工作原理。它的异步，意味着一个 Activity 可能在那个时候还没有启动，但是你可以在给定 BroadcastReciever 的 Context 的情况下启动一些东西。改变你的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:00:44.107

为什么不在 SharedPreference 中保留该值并在 Receiver 中获取它...一种可靠的方法...当前方法失败了，因为您永远不知道持有 EditText 的 Activity 是否存在。

# c++ - gdb 没有捕捉到向量抛出的 std::out_of_range

> ID：10276798
> 
> 赞同：10
> 
> 时间：2012-04-23T07:55:13.017
> 
> 标签：c++, gdb, mingw

使用 MinGW 4.6.2（使用 g++ -g -std=c++0x）编译以下内容，gdb 似乎不想抓住`std::out_of_range`if I try `catch throw`。如果我`throw`手动它会很好，我做错了什么吗？

```
#include <stdexcept>
#include <vector>

int main()
{
    std::vector<char> vec(10);
    try {       
        vec.at(10); // this won't be caught by gdb

        // throw std::out_of_range(""); // this will
    }
    catch (std::out_of_range const& e) {        
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-19T13:01:43.393

`std::vector`在引发异常的地方添加断点。此时，尚未发生堆栈展开，因此您应该能够完全回溯到原始语句。

我能够做到这一点，但只能以非常实现定义的方式：

**1) 在以下位置找到向量的范围检查功能`stl_vector.h`：**

```
_M_range_check(size_type __n) const
{
    if (__n >= this->size())
          __throw_out_of_range(__N("vector::_M_range_check"));
} 
```

**2) 在调用 __throw_out_of_range() 的行中添加断点。** 注意：我尝试通过 'break __throw_out_of_range' 添加断点，但这不起作用。相反，我需要使用文件和行号 ( `break stl_vector.h:794`) 对断点进行硬编码。您可以将其添加到您的`.gdbinit`文件中，以使 gdb 在所有失败的范围检查时中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T08:26:02.440

如您所见，异常 from `std::vector::at()`is throw by `__throw_out_of_range`which is a function inside `libstdc++.so`，所以我怀疑 Mingw 存在一些问题，阻止 GDB 在共享库中设置捕获点。或者，也许你`libstdc++`不是用`-g`.

如果您的 GCC 已配置，`--enable-libstdcxx-debug`您将拥有第二组构建的库`-O0 -g`，在调试时可能会更好地工作，但该选项不经常使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T08:10:43.020

您实际上并没有在 gdb 中捕获异常。尝试`catch catch`捕捉[异常](http://sourceware.org/gdb/onlinedocs/gdb/Set-Catchpoints.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-17T07:49:47.147

我在 msys2/mingw64 上遇到了这个问题，设置这个断点使 gdb 在发生抛出的地方停止：

```
(gdb) b std::__throw_out_of_range_fmt 
```

它也适用于其他异常，例如捕获 std::bad_function_call 异常，使用这个：

```
(gdb) b std::__throw_bad_function_call 
```

# javascript - multiple statements on if statement without curly braces

> ID：10276805
> 
> 赞同：1
> 
> 时间：2012-04-23T07:55:42.677
> 
> 标签：javascript, html, if-statement

I am using an onclick function in my html (so not a method, but the javascript code itself in the html button onclick event).

How do I add 2 statements in the 1 line after an IF statement, that is not surrounded by curly braces.

I want to do something like this

```
onclick="javascript: if ( days.value == '' ) alert('Please select at least 1 day to schedule this report') && return false;" 
```

I can't use the curly braces to enclose the two statements because I can't find any information on outputting a curly brace into a string in PHP (If i do, the output stops after the first curly brace)

My PHP looks like this:

```
$content["PREPEND"].= " onclick=\"javascript: if ( days.value == '' ) alert('Please select at least 1 day to schedule this report') && return false; \""; 
```

I tried using the &&, but that doesnt work. Any advise appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:59:41.157

Javascript 代码与 PHP 代码无关。你可以使用任何你想要的牙套。

如果任何花括号出现问题 - 你只是把它们放在错误的方式。**然后你必须纠正你的牙套**，而不是寻找一些丑陋的方法来避免它们。

你知道，纠正错误在编程中是一项非常微不足道的任务。

如果确实是 PHP 代码确实干扰了您的 JS（我无法确定，因为您的问题中甚至没有发布一个 PHP 运算符），只需关闭 PHP 模式并按原样编写您的 JS，就好像它只是一个纯粹的HTML页面：

```
//some php
// then close it
?>
<a href="#" onclick='javascript: if ( days.value == "" ) { alert("Please select at least 1 day to schedule this report"); return false; }'>
<?php
// open PHP back 
```

如果您在 JS 中需要一些 PHP 值 - 再次打开 PHP：

```
//some php
$var = "test";
// then close it
?>
<a href="#" onclick='javascript: if ( days.value == "<?=$var?>" ) { alert("Please select at least 1 day to schedule this report"); return false; }'>
<?php
// open PHP back 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:01:01.807

未经测试，您是否尝试过反转引号（将双打变成单打，将单打变成双打）？PHP 对待使用双引号创建的字符串与使用单引号创建的字符串不同...

```
onclick='javascript: if ( days.value == "" ) { alert("Please select at least 1 day to schedule this report"); return false; }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T07:58:59.910

首先，这是一种不好的做法。但是如果返回 false，您可以添加重复项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T08:00:47.057

将这两个语句放入一个 javascript 函数中，然后在 if 语句中调用该函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T12:48:22.830

“我不能使用大括号括起来这两个语句，因为我找不到任何关于将大括号输出到 PHP 中的字符串的信息（如果我这样做了，输出会在第一个大括号之后停止）” - 可以你只是打印'{...}'打印一个花括号吗？

# .net - 使用关键字“ref”传递类对象有什么用？默认情况下，它们是通过引用传递的

> ID：10276808
> 
> 赞同：1
> 
> 时间：2012-04-23T07:55:50.583
> 
> 标签：.net, string, class, parameters, ref

我刚刚注意到.net 允许我们这样做。

```
 public void Func1(ref String abc)
  {
  } 
```

我想知道“ref”关键字是否有意义？？？？因为字符串是一个类（引用类型）

有什么不同吗。

```
 public void Func1(String abc)
 {
 } 
```

我只是问，因为我很困惑。要么缺少一些概念，要么它们是同一个东西，“ref”关键字在这种情况下没有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:58:31.443

参数默认按**值**传递。如果将参数传递给方法，则不会修改原始变量。但是，如果您将参数作为`ref`参数传递，则传入的原始变量可能会被修改。

试试这个：

```
public void Func1(String abc) {
    abc = "Changed from Func1";
}

public void Func2(ref String abc) {
    abc = "Changed from Func2";
}

public void main() {
    string foo = "not changed";
    Func1(foo);
    Console.WriteLine(foo);
    Func2(ref foo);
    Console.WriteLine(foo);
} 
```

您将得到的输出是：

```
not changed
Changed from Func2 
```

在`Func1`一个副本中`foo`被创建，它指的是同一个字符串。但是，一旦您为其分配另一个值，该参数就会`abc`引用另一个字符串。`foo`没有被修改，仍然指向同一个字符串。
在`Func2`您传递对 的引用时`foo`，因此当您分配`abc`一个新值（即对另一个字符串的引用）时，您实际上是在分配`foo`一个新值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:58:31.380

默认情况下，如果没有**ref**关键字，则会生成字符串指针的副本（按值传递）。使用 ref 将通过引用传递，这也允许您修改原始调用者中的指针。

# java - 用java删除XML标签内的空格

> ID：10276812
> 
> 赞同：1
> 
> 时间：2012-04-23T07:56:01.647
> 
> 标签：java, xml

我正在获取带有以下标签的 XML。我所做的是，使用 Sax 解析器用 Java 读取 XML 文件并将它们保存到数据库中。但似乎在 p 标签之后有空格，如下所示。

```
 <Inclusions><![CDATA[<p>                                               </p><ul> <li>Small group walking tour</li> <li>Entrance fees</li> <li>Professional guide </li> <li>Guaranteed to skip the long lines</li> <li>Headsets to hear the guide clearly</li> </ul>
                <p></p>]]></Inclusions> 
```

但是当我们将读取的字符串插入数据库（PostgreSQL 8）时，它会为这些空格打印如下所示的错误字符。

> \011\011\011\011\011\011\011\011\011\011\011\011
> 
> *   小团体徒步旅行
> *   入场费
> *   专业指导
> *   保证跳过排长队
> *   耳机可以清楚地听到指南
> 
> \012\011\011\011\011\011

1.  我想知道为什么会这样打印坏字符（011\011）？

2.  用java删除XML标签内空格的最佳方法是什么？（或者如何防止那些坏字符。）

我已经检查了样本，其中大部分都带有 python 样本。

这就是在我的程序中使用 SAX 读取 XML 的方式，

方法一

```
 // ResultHandler is the class that used to read the XML. 
  ResultHandler handler         = new ResultHandler();
   // Use the default parser
  SAXParserFactory factory = SAXParserFactory.newInstance();
    // Retrieve the XML file
    FileInputStream in = new FileInputStream(new File(inputFile)); // input file is XML.
    // Parse the XML input
    SAXParser saxParser = factory.newSAXParser();
    saxParser.parse( in , handler); 
```

这就是 ResultHandler 类使用 Method-1 将 XML 作为 Sax 解析器读取的方式

```
import org.apache.log4j.Logger;
import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

// other imports

    class ResultHandler extends DefaultHandler {

        public void startDocument ()
        {
            logger.debug("Start document");         
        }

        public void endDocument ()
        {
            logger.debug("End document");
        }

        public void startElement(String namespaceURI, String localName, String qName, Attributes attribs)
        throws SAXException {           
            strValue = "";      
            // add logic with start of tag. 
        }

        public void characters(char[] ch, int start, int length)
        throws SAXException {
            //logger.debug("characters");
            strValue += new String(ch, start, length);
            //logger.debug("strValue-->"+strValue);
        }

        public void endElement(String namespaceURI, String localName, String qName)
        throws SAXException {           
            // add logic to end of tag. 
        }
    } 
```

所以需要知道，如何使用 sax 解析器设置 setIgnoringElementContentWhitespace(true) 或类似的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T08:43:29.733

你可以尝试为你的`DocumentBuilderFactory`

[`setIgnoringElementContentWhitespace(true)`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setIgnoringElementContentWhitespace%28boolean%29)

因为这：

> 由于依赖于内容模型，此设置要求解析器处于验证模式

你还需要设置

[`setValidating(true)`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setValidating%28boolean%29)

或者`str= str.replaceAll("\\s+", "");`也可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:30:37.730

1.  我也在寻找一个确切的答案。但认为这对你有帮助。
    C/Modula-3 八进制表示法；vs[此链接](http://www.ic.unicamp.br/~stolfi/EXPORT/www/ISO-8859-1-Encoding.html)
    中的含义 它说

    *   \011 用于水平制表符（ASCII HT）
    *   \012 用于换行（ASCII NL，换行符）
2.  您可以将多个空格替换为一个空格，如下所示

    str = str.replaceAll("\s([\s])+", "");

# c# - C# webbrowser 控件（执行与表单相关的所有 javascripts）

> ID：10276813
> 
> 赞同：6
> 
> 时间：2012-04-23T07:56:10.140
> 
> 标签：c#, forms, webbrowser-control

我正在尝试使用 webbrowser 控件自动提交表单。我正在使用以下代码提交“

```
currentElement.InvokeMember("submit"); 
```

现在这种方法工作正常。但有时表单可能有一些在提交时单击按钮时调用的 javascript 函数。因此，假设一个表单有一些名为“提交”的按钮图像，当用户按下它时，会调用一个 javascript 函数 somefunction() 然后提交表单。

问题是当我使用上述方法 InvokeMember 时，它只提交表单而不执行相关脚本（在本例中为 somefunction()），我必须手动编写代码

```
webBrowser1.Document.InvokeScript("somefunction"); 
```

但这需要我事先知道是否有某些功能。有什么方法可以让我提交表单，它会自动运行所有相关的 javascript 吗？

而且我不知道用户单击以提交表单的按钮名称或ID。因为在某些情况下，它甚至可能没有 ID 或名称，例如

```
<span class="btn" onclick="somefunction()">
<img style="cursor:pointer" title="Submit" alt="Submit" src="http://stackoverflow.com/imagesbutton.png?2012">
<div id="s" style=""></div>
</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:28:33.737

自从我弄乱了 WebBrowser 控件以来已经有一段时间了，但我曾经让它为我跳过箍。我过去遇到过这个问题。

[http://www.codeproject.com/Tips/60924/Using-WebBrowser-Document-InvokeScript-to-mess-aro](http://www.codeproject.com/Tips/60924/Using-WebBrowser-Document-InvokeScript-to-mess-aro)

当你得到一个对象时，在提交表单之前将`Form`字符串取出并运行它来执行它：`OnSubmit`

```
object[] codeString = {"myObject.setVariable(0);"};
webBrowser1.Document.InvokeScript("eval",codeString); 
```

奇迹般有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T10:07:32.383

如果您知道可以使用的图像标签的名称或 ID

```
webBrowser1.Document.GetElementById("button").InvokeMember("click"); 
```

或者

```
webBrowser1.Document.GetElementByName("button").InvokeMember("click"); 
```

在javascript中调用关联函数

# sql-server-2008 - 无法从备份还原 SQL Server 2008

> ID：10276814
> 
> 赞同：0
> 
> 时间：2012-04-23T07:56:25.047
> 
> 标签：sql-server-2008, tsql, backup, restore

我目前正在尝试恢复我的数据库。

我遵循的步骤是执行查询

```
Restore Database vaio 
from disk = 'C:\Users\DB101209123928_Diff_20120312.bak'
with replace; 
```

但我收到以下错误。

> 消息 3154，级别 16，状态 4，第 1 行
> 备份集保存现有“vaio”数据库以外的数据库的备份。
> 消息 3013，级别 16，状态 1，第 1 行
> RESTORE DATABASE 异常终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:01:23.703

您可以先尝试此查询以查看`.bak`文件中包含的内容：

```
DECLARE @FileName NVARCHAR(255)
SET @FileName = N'C:\Users\DB101209123928_Diff_20120312.bak' 

RESTORE FILELISTONLY
FROM DISK = @FileName 
```

一旦您知道备份文件中的内容，您就可以从中恢复适当的数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:58:45.330

`vaio`该错误表明您的还原文件中没有命名数据库。

这里没有太多帮助。确保您拥有正确的还原文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T16:23:27.440

首先通过以下查询检查标题，

`restore headeronly from disk ='D:\anuj\userpro.bak'`

它将为您提供以下信息：数据库名称、备份名称、位置、用户名......

现在执行以下命令来恢复数据库：

```
restore database school from disk='D:\anuj\school.bak' with file =1 
```

这里，replace`file =1`是上述查询给出的位置。

# python - Ducktyping with exception objects

> ID：10276816
> 
> 赞同：0
> 
> 时间：2012-04-23T07:56:38.433
> 
> 标签：python

I want to create a function that can check if the passed arg is an Exception or one of its subclasses. As an example, I would like the the second is_exception function call to return True as well.

```
def is_exception(obj):
    return type(obj) == Exception

print is_exception(Exception('asdf'))   => True
print is_exception(EOFError('asdf'))    => False 
```

thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:32:48.130

您可以使用 issubclass：

```
>>> issubclass(EOFError,Exception)
True
>>> issubclass(EOFError,EOFerror)
True 
```

签名是“issubclass(A,B)”，如果 A 是 B 的子类，则返回 True，或者“issubclass(A,(B1,B2...))”，如果 A 是任何的子类，则返回 True B1、B2 等

# mysql - Random records, but maximal one from each category

> ID：10276822
> 
> 赞同：0
> 
> 时间：2012-04-23T07:56:59.780
> 
> 标签：mysql

I would like get 3 random stamps, but each from different country. This query return random stamps, but could be from the same country. When I add GROUP BY country_id I will get 3 stamps of different countries, but only first stamps of each country.

```
SELECT `stamps`.`stamp_id`, `countries`.`country_name_cs` FROM `stamps`
LEFT JOIN `countries` ON countries.country_id = stamps.country_id
WHERE (stamps.stamp_enabled = 1) ORDER BY rand() ASC LIMIT 3 
```

Any idea?

Query profile (#Ezequiel Muns solution)

```
starting              0.000232
Opening tables        0.000047
System lock           0.000013
Table lock            0.000635
optimizing            0.000036
statistics            0.000022
preparing             0.000023
Creating tmp table    0.000293
executing             0.000004
Copying to tmp table  0.060066
Sorting result        0.013835
Sending data          0.089164
removing tmp table    0.000632
Sending data          0.000026
init                  0.000048
optimizing            0.000014
statistics            0.000061
preparing             0.000028
Creating tmp table    0.000326
executing             0.000004
Copying to tmp table  0.353176
Sorting result        0.000158
Sending data          0.000038
end                   0.000005
removing tmp table    0.000018
end                   0.000006
query end             0.000004
freeing items         0.000575
removing tmp table    0.002363
closing tables        0.000023
logging slow query    0.000004
cleaning up           0.000009

id      select_type       table      type       possible_keys       key         key_len     ref           rows      Extra
1       PRIMARY       <derived2>     ALL        NULL                NULL        NULL        NULL          12679     Using temporary; Using filesort
1       PRIMARY       c              eq_ref     PRIMARY             PRIMARY     4           s.country_id  1      
2       DERIVED       stamps         ALL        NULL                NULL        NULL        NULL          12679     Using where; Using temporary; Using filesort 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:48:12.887

```
SELECT
    c.country_id,
    c.country_name_cs,
    s.stamp_id
FROM country c
    JOIN (
        SELECT * 
        FROM stamps
        WHERE stamp_enabled = 1
        ORDER BY RAND()
    ) AS s ON c.country_id = s.country_id
GROUP BY c.country_id, c.country_name_cs
ORDER BY RAND()
LIMIT 3; 
```

您首先将所有国家加入到它们各自的邮票中，但顺序是随机的，然后通过修剪该列表到每个国家的第一个（随机选择的）邮票进行分组。外部查询的 ORDER BY 将您选择的国家/地区随机化，然后 LIMIT 仅返回 3。

就像大卫 Z 说的那样，效率低下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:18:07.487

您可以尝试以下查询，首先选择 3 个随机国家，使用混合戳表执行连接，然后按国家分组。效率不高，但适用于较小的数据集。

```
 SELECT
    mixed_stamp.stamp_id,
    random.country_name_cs
 FROM
    (SELECT * FROM stamps ORDER BY RAND()) AS mixed_stamp
 LEFT JOIN (SELECT country_id FROM countries ORDER BY RAND() LIMIT 3) random ON (random.country_id = mixed_stamp.country_id)
 GROUP BY random.country_id 
```

# android - 在 Android 中的 onPause 上保持屏幕上的对话框

> ID：10276828
> 
> 赞同：0
> 
> 时间：2012-04-23T07:57:17.340
> 
> 标签：android

我有一个使用 SIM 工具包的 Android 应用程序。该应用程序有一个屏幕，显示一个对话框，当 SIM 工具包成为焦点时，它应该在背景中可见。

现在，当 SIM 工具包获得焦点时，对话框消失，就像 Android 方式一样，并在`onResume()`. 如何保持背景中的对话框可见？

如果我正确理解了这个过程，一旦应用程序接收到`onPause`命令，它就会被渲染为图像，如果它使用透明背景，它会用作其他应用程序的背景。也许有一种方法可以告诉进程也捕获对话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:10:29.827

好的，这对我来说应该是显而易见的，但不知何故仍然没有引起我的注意。

对话框，只要您使用`showDialog()`,创建它们，`dismissDialog()`并由`removeDialog()`操作系统处理。

我很困惑，并认为我必须自己照顾它们，因此在我的应用程序中引入了这个错误。现在修好了！

# java - 当我开发 Eclipse 插件以在另一个项目中创建项目时如何获取当前项目位置。

> ID：10276832
> 
> 赞同：0
> 
> 时间：2012-04-23T07:57:32.517
> 
> 标签：java, eclipse-plugin, m2e

我想在像 M2E 这样的项目中创建一个子项目，当关注 maven 项目并右键单击以创建 maven 模块时，可以在 maven 项目中创建一个 maven 模块。

但我不知道如何获取我点击的当前项目位置。我用

```
 WizardNewProjectCreationPage newProject = new WizardNewProjectCreationPage();
 URI location = newProject.getLocationURI(); 
```

通过这个我可以自己设置一个位置。但我想像 m2e 一样获得当前的项目位置。希望有人可以帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:57:07.840

尽管 Maven 支持项目中的项目（也称为模块），但 Eclipse 不支持。在 Eclipse 中，所有项目都*必须*是工作区中的顶级条目。

# python - 如何在 Python 程序中使用 Mathematica 函数？

> ID：10276834
> 
> 赞同：10
> 
> 时间：2012-04-23T07:57:35.060
> 
> 标签：python, unix, wolfram-mathematica, mathematica-8, mathlink

我想知道如何从 Python 调用 Mathematica 函数。

我很欣赏一个例子，例如，使用 Mathematica 函数**[Prime](http://reference.wolfram.com/mathematica/ref/Prime.html)**。

我搜索过[MathLink](http://reference.wolfram.com/mathematica/tutorial/MathLinkAndExternalProgramCommunicationOverview.html)，但如何在 Python 中使用它对我来说有点晦涩难懂。

我尝试使用一个名为*[pyml](http://library.wolfram.com/infocenter/MathSource/585/)*的 Mathematica-Python 库，但我没有成功，可能是因为这个库看起来很旧（在教程中说 Mathematica 2 或 3）。

尝试编译源代码，`Wolfram/Mathematica/8.0/SystemFiles/Links/Python`但在使用 python 2.6 时出现了几个错误（文档说应该只适用于 python 2.3）。

Pythonika 很有趣，但是，看起来只是在 Mathematica 笔记本中使用，我想编写`.py`调用 Mathematica 函数的文件。

那么，有人知道编写使用 Mathematica 函数的 python 程序的好方法，可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:38:40.270

您可以使用 Python MathLink 模块（您在 .../SystemFiles/Links/Python 中找到的源代码）在 Python 中调用 Mathematica 函数，但您需要编辑几个设置文件才能启动并运行它（support@ wolfram.com 应该能够为您提供帮助）。

要在 Python 中使用 Prime，您将运行以下命令：

> > > kernel.ready()
> > 
> > 0
> > 
> > > kernel.putfunction("Prime",1)
> > > 
> > > kernel.putinteger(10)
> > > 
> > > kernel.flush()
> > > 
> > > kernel.ready()
> > 
> > 1
> > 
> > > kernel.nextpacket()
> > 
> > 3
> > 
> > > 数据包描述字典[3]
> > 
> > '返回包'
> > 
> > > kernel.getinteger()
> > 
> > 29

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T19:53:45.573

我找到了[解决办法](http://sapiensgarou.blogspot.com.br/2012/06/how-to-run-mathematica-functions-on.html)。

**脚步：**

1-使用以下内容创建一个名为**runMath**的脚本：

```
#!/usr/local/bin/MathematicaScript -script

value=ToExpression[$ScriptCommandLine[[2]]];

(*The next lime prints the script name.*)
(*Print[$ScriptCommandLine[[1]]];*)

Print[value]; 
```

2-我授予文件执行权限。

```
sudo chmod +x runMath 
```

3-将文件移动到执行路径

```
sudo mv runMath /usr/bin/ 
```

4-创建了一个名为**run**的新脚本，其内容为：

```
#!/usr/bin/python
from subprocess import *
from sys import *

command='/usr/bin/runMath'
parameter=argv[1]

call([command,parameter]) 
```

5-移动到执行路径

```
sudo mv run /usr/bin 
```

6-最后，测试它：

```
$run Prime[100]
541

$run 'Sum[2x-1,{x,1,k}]'
k^2

$run Integrate[Log[x],x]
-x + x*Log[x]

$run 'Zeta[2]'
Pi^2/6 
```

您可以使用或不使用`'`. 带空格的`'`命令需要 。

```
$run 'f[n_] := f[n] = f[n - 1] + f[n - 2]; f[1] = f[2] = 1; Table[f[n],{n,5}]'
{1, 1, 2, 3, 5} 
```

快乐的！

# php - 如何提取或剪切里面的html内容 ........... ? html 源的格式不正确

> ID：10276835
> 
> 赞同：0
> 
> 时间：2012-04-23T07:57:42.483
> 
> 标签：php, regex, parsing, html-parsing

```
<html>
    <head><title>bla bla</title></head>
    <body>
    <div id="mainContent" xmlns:h="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
        bla bla .....
    </div>
    </body>
</html> 
```

我需要提取那个部门。如何使用 PHP 5 做到这一点？

html 源的格式不正确。有一些未定义的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:41:54.753

如果您的 HTML 格式不正确，您仍然可以使用类似的内容`DOMDocument`，例如：

```
$d = new DOMDocument;
$d->loadHTML($htmlstring);

$x = new DomXPath($d);

foreach ($x->query('//div[@id="mainContent"]') as $node) {
    echo $node->nodeValue;
} 
```

或者，只需在 HTML 前加上前缀，`<!DOCTYPE html>`以便您可以`getElementById`正常使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:44:45.420

`/<div id=\"mainContent\".*?</div>/gs`

[http://regexr.com?30o0l](http://regexr.com?30o0l)如果要捕获从 div 开始标记到结束标记的所有内容。

# actionscript-3 - 移动 Spark 列表不显示最后的寄存器

> ID：10276841
> 
> 赞同：0
> 
> 时间：2012-04-23T07:58:09.773
> 
> 标签：actionscript-3, apache-flex, flex4.5

我有一个包含 41 个寄存器的列表（我在移动屏幕上一次只能看到 10 个），当我用手指向下滚动时，我只能到达寄存器 38。如果我慢慢移动手指，我可以看到另一个寄存器，但是当我松开手指时，滚动再次设置它的位置并且其他寄存器没有呈现（因为它们在屏幕“外部”）

似乎列表“认为”卷轴的最后一个寄存器是第 38 个寄存器！！！

这很奇怪……

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:09:11.507

解决了！我使用了一个巨大的高度值！

# javascript - 如何从java datepicker显示asp.net文本框中输入文本类型的数据

> ID：10276843
> 
> 赞同：0
> 
> 时间：2012-04-23T07:58:15.023
> 
> 标签：javascript, asp.net, html

我正在使用 java datepicker，现在当我单击输入控件时，它会显示一个日历，当我选择一个日期时，它会在输入类型文本控件中显示它。现在我希望它显示在文本框中（作为旁注，我正在考虑将类型文本更改为类型按钮）这是 javascript 代码

```
 window.onload = function(){
    new JsDatePick({
    useMode: 2,
    target: "inputField",
    dateFormat:"%d-%M-%Y" 
```

和控件

```
 <input type="text" size="12" id="inputField" name="inputField" />
    <asp:TextBox ID="txtDateTime" name="txtDateTime" runat="server"></asp:TextBox> 
```

我已经尝试将目标更改为 txtDateTime，但它给出了一个对象所需的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:58:17.850

TimSchmelter 的评论是正确的，所以我所做的只是改变我的目标值

```
 new JsDatePick({
    useMode: 2,
    target: "ctl00_mainContent_txtDate",
    dateFormat: "%d-%M-%Y"
    }); 
```

到实际的 ASP.NET 生成的 ID（通过右键单击网页并选择查看源来检查）。所以 TimSchmelter 感谢您的回答... =)

# php - PHP - 表单数据传输和检索结果 - 没有 HTML 表单

> ID：10276845
> 
> 赞同：-1
> 
> 时间：2012-04-23T07:58:20.710
> 
> 标签：php, forms, post

这是表格

```
<form method="POST" action="https://secure.ebs.in/api/1_0"
name="frmTransaction">
<input name="Action" type="hidden" value="statusByRef">
<input name="AccountID" type="hidden" value="XXXX">
<input name="SecretKey" type="hidden" value="XXXXXX">
<input name="RefNo" type="hidden" value="XXXXX">
<input name="submitted" value="Submit" type="submit">
</form > 
```

输出将采用以下格式

```
<?xml version='1.0' encoding='UTF-8'?>
<output transactionId="2144154" paymentId="1112034" amount="1" dateTime="2010-07-
31 16:59:28" mode="TEST" referenceNo="223" transactionType="Authorized"
status="Processed" isFlagged="NO"/> 
```

**现在我只需要使用 php 来输出。**

如何在不使用 html 的情况下以 POST 方法传输表单数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:43:46.293

PHP CURL 可能正是您所需要的。

在这里查看： [http ://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/book.curl.php)

这是一个帮助您入门的教程：http: [//davidwalsh.name/execute-http-post-php-curl](http://davidwalsh.name/execute-http-post-php-curl)

# mysql - Django-celery 表自发掉线

> ID：10276850
> 
> 赞同：1
> 
> 时间：2012-04-23T07:58:28.733
> 
> 标签：mysql, django, celery, django-celery

我在周五晚上部署并启动了一个基于 Django celery 的项目。周日下午 6:10，显然所有 djcelery 表都从我的数据库中消失了，导致 Celery 立即关闭。（我在日志文件中有这个，但同事删除了它。）我认为周日系统中没有人。

除了根据日志显示任务运行大约需要 5 分钟并且每 1 分钟触发一次之外，我想不出太多解释。（我对 Celery 的了解不够，不知道这是否会导致问题。）

有没有人见过这样的事情？我应该提交错误报告吗？有没有 Django 或 Celery 会丢弃表的情况？所有其他桌子都没有动过。运行南迁移恢复了丢失的表，但谁知道问题是否会再次出现。

该应用程序使用一个 MySQL 数据库，它与通过 Apache 运行的 Django 应用程序共享（以及 settings.py 和其他一些东西）。它在 RHEL 虚拟机上运行。应用程序是这样启动的：

```
sudo -u apache bash -c "nohup `pwd`/bin/django celeryd --beat --purge --loglevel=INFO >> $LOG &" 
```

顺便说一句，应用程序当前正在运行，但所有这些表都是空的 - 不知道从中读取什么。

# python - ValueError：“str”类型的对象的未知格式代码“g”

> ID：10276857
> 
> 赞同：1
> 
> 时间：2012-04-23T07:58:44.293
> 
> 标签：python, numpy

我是 Python 新手，我正在尝试编写一个简单的打印函数，但我遇到了一个奇怪的错误。这是我的代码：

```
#! /usr/bin/env python3.2
import numpy as np

a=np.arange(1,10,1)
print(a)
for i in a:
    print(i)
    print(type(i))
    print("{0:<12g}".format(i)) 
```

输出是：

```
[1 2 3 4 5 6 7 8 9]
1
<class 'numpy.int64'>
Traceback (most recent call last):
  File "./test.py", line 9, in <module>
    print("{0:<12g}".format(i))
ValueError: Unknown format code 'g' for object of type 'str' 
```

为什么 print 将“numpy.int64”作为字符串？我必须补充一点，它非常适合普通列表：（例如 [1,2,3,4]）我将非常感谢有关此问题的任何想法，谢谢 ;-)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:28:12.703

这是一个[已知的错误](http://projects.scipy.org/numpy/ticket/1675)，应该在 2.0 版中修复。在此期间，您可以使用有效的旧语法`%f`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:13:32.393

有人可以给你一个更深入的答案，但我认为这里发生的是你使用的`"{0:<12g}".format(i)`是特殊格式。如果你尝试`"\{{0}:<12g\}".format(i)`，你可能会得到更好的结果。使用那里的斜杠会转义`{}`'s，这就是给你错误的原因。

# javascript - ExtJs 4 - 如何拖放文本（或文本区域）字段的内容？

> ID：10276865
> 
> 赞同：1
> 
> 时间：2012-04-23T07:59:08.277
> 
> 标签：javascript, drag-and-drop, extjs4

我有一个包含多个文本和文本区域字段的表单面板，并且想通过拖动将文本从一个字段复制（或移动）到另一个字段。（字段本身应该留在原地）。

ExtJs 提供了示例，它几乎可以满足我的需要：[field-to-grid-dd](http://docs.sencha.com/ext-js/4-0/#!/example/dd/field-to-grid-dd.html)。

问题是现在无法将文本输入到可拖动的文本字段中。我认为这是因为 Ext.dd.DragZone 对象拦截了“mousedown”事件，如果在可拖动元素内单击鼠标，则该对象的 getDragData() 方法将启动拖动。

如果用户只是点击它而不拖动，有没有办法将光标放在文本字段中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:16:56.693

我告诉您如何更改 ExtJS 示例文件 ( [**field-to-grid-dd.js**](http://docs.sencha.com/ext-js/4-0/extjs-build/examples/dd/field-to-grid-dd.js) )，然后您可以更改自己的应用程序代码。

转到第**148**行并注释或**删除**以下代码：

```
// i.unselectable(); 
```

然后转到第**164**行，在之前（或之后，没关系）**添加**`e.stopEvent();`下面的代码：

```
t.focus(); // Add This
e.stopEvent(); 
```

当然，你不能通过拖动鼠标来选择文本字段的值，但它会做你想要的。

# python - 使用 Django 模拟 Stack Overflow 的焦点/跳转到一个部分并从黄色高亮效果中淡出

> ID：10276868
> 
> 赞同：0
> 
> 时间：2012-04-23T07:59:19.797
> 
> 标签：python, django, get, django-views

我喜欢 SO 的效果，当您单击左上角显示“堆栈交换”的通知时，SO 将打开一个新页面，跳转到特定部分，然后以黄色突出显示该部分并淡出。

目前，我在一个长网站的底部有一个评论表。当评论发布验证失败时，我让 jQuery 滚动到表单并执行与 SO 相同的黄色突出显示效果。

这是我的（完美工作）代码：

```
$(document).ready(function() {
    {% if focus %}
        // Focus
        $('html, body').animate({scrollTop: $('#{{ focus }}').offset().top }, 'slow')
        $('#{{ focus }}').effect("highlight", {}, 3000)
    {% endif %}
}) 
```

我的代码中有这个代码，`base.html`所以每个模板都会检查一个名为`focus`. `focus`只是一个包含 的字符串`id`来做`<div>`黄色高亮效果。

正如你所看到的，我觉得这有点*被黑*了。我需要`focus`使用`render()`Django 的`views.py`.

我*真正*想做的是将它作为`GET`变量传递。类似的东西`http://www.example.com/orders/2/?focus=comment_form`。然后我可以使用 Javascript[获取该`GET`变量](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)并执行高亮效果。但我不知道如何`GET`使用`render()`.

目前我的`render()`样子是这样的：

```
dictionary = get_orders_detail_dictionary(order=order, user=request.user, comment_form=form)
dictionary['focus'] = 'comment_form'
return render(request, 'doors/orders/detail.html', dictionary) 
```

我想使用 a 的原因`GET`是类似“永久链接”选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:05:37.613

由于它是一个 GET 变量，因此可以从`request.GET`. 由于您使用的是`render`快捷方式，因此您可以启用[`request`上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django-core-context-processors-request)以使该`request`对象在您的模板中可用，此时您只需执行`{{ request.GET.focus }}`.

但是，对我来说，更好的选择是使用您自己的自定义上下文处理器，它将焦点参数提取到上下文变量中：

```
def get_focus(request):
    return {'focus': request.GET.get('focus', '')} 
```

然后你可以`{{ focus }}`像现在一样使用。

# javascript - 如何使用 javascript / jQuery 从数组中删除元素？

> ID：10276872
> 
> 赞同：0
> 
> 时间：2012-04-23T07:59:41.880
> 
> 标签：javascript, jquery

我在这样的数组中设置一个元素：

```
dialogs[id] = $.modal({
    title: "Admin",
    closeButton: true,
    content: content,
    width: false,
    resizeOnLoad: true,
    buttons: {
        'Close': function (win) {
            win.closeModal();
        }
    }
}).find('form') // Attach logic on forms
.submit(formSubmitHandler)
.end(); 
```

后来我检查是否存在这样的：

```
if (!dialogs[id]) {
    loadAndShowDialog(id, link, url);
} 
```

如何`id`从对话框数组中删除记录？有类似的东西`dialogs[id].Remove()`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:01:00.837

命令是：（将其设置为未定义）

```
delete dialogs[id]; 
```

如果你想完全删除：使用`splice`.

## 编辑

我错误地认为它是您要删除的对象属性（删除在这里会很好-唯一的解决方案）

然而 - 你有一个数组，正确的答案是使用`splice`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:10:56.337

我建议你看看这个[教程](http://javascript.info/tutorial/array)。它很好地解释了如何在 javascript 中使用数组。

该`delete`方法不会*删除*元素，它只是将其替换为`undefined`. 要从数组中删除元素，您需要[`splice`](http://javascript.info/tutorial/array#method-splice).

根据[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)，这里是如何使用它：

```
array.splice(index , howMany[, element1[, ...[, elementN]]]) 
```

因此，您需要`index`开始删除的位置，以及`howMany`要删除的元素数量。

对于您的情况，它将是：

```
dialogs.splice( dialogs.indexOf( id ), 1 ) 
```

注意使用`indexOf`来找出`id`值的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:03:25.810

您可以使用

```
delete dialogd[id]; //will not remove element, will set it to undefined 
```

或者

```
dialogs.splice(id,1); //will not work in case of non-numeric indices 
```

选择一个合适的。我更喜欢第二种。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T08:09:36.967

从数组中删除项目时，使用[`splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)

```
dialogs.splice(id,1); //remove "1" item starting from index "id" 
```

请注意，这会删除该项目，并更改数组长度。所以在一个 3 的数组中，如果我这样拼接，数组现在的长度为 2。

using`delete`不会影响数组，但会保留该位置`undefined`。这就像在那个位置“改变”或“留下一个洞”。

```
delete dialogs[id];  //value at index "id" is now undefined 
```

# android - 使布局消失

> ID：10276876
> 
> 赞同：0
> 
> 时间：2012-04-23T08:00:32.673
> 
> 标签：android, visibility

当我使用滑动抽屉时，我希望布局消失，这样滑动抽屉就不会被阻塞。

但是，我尝试了很多方法，例如

```
view = (View)findViewById(R.id.layout_latestcontent);
    view.setVisibility(View.GONE);

linear = (LinearLayout)findViewById(R.id.layout_latestcontent);
    linear.setVisibility(2); 
```

两者也不能。

```
public void onDrawerClosed() {
    //view = (View)findViewById(R.id.layout_latestcontent);
    //view.setVisibility(View.VISIBLE);
}

public void onDrawerOpened() {
    //view = (View)findViewById(R.id.layout_latestcontent);
    //view.setVisibility(View.GONE);
} 
```

即使实现这两个功能也不能

如何使整个布局消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:16:31.207

您只能在视图的属性中应用值 2 （或任何[this ）。](http://developer.android.com/reference/android/view/View.html#attr_android%3avisibility)`android:visibility`如果您想从代码更改视图可见性，您应该使用常量 View.VISIBLE、View.INVISIBLE 或 View.GONE（常量值 0、4、8）。`linear.setVisibility(View.GONE)`而不是`linear.setVisibility(2)`.

# java - netbeans中的Tomcat堆大小增加以及如何找到当前堆大小

> ID：10276877
> 
> 赞同：0
> 
> 时间：2012-04-23T08:00:33.153
> 
> 标签：java, jakarta-ee, tomcat, heap-memory

我在具有 3GB RAM 的 Windows 7 SP1 上使用 tomcat 7。我正在使用一些自定义标记处理程序在 JSP 页面上显示数据，这不断给我堆大小（内存不足）错误。

我使用 Netbeans 7.1 作为开发 IDE，我尝试将 -Xms256m -Xmx256m 放在项目属性运行选项下的 VM 选项中。我不确定它是否增加了堆大小，**有没有办法找出tomcat的当前堆大小？**

或者我需要做其他事情来增加堆大小？由于不知道它是否在增加堆大小，我无法调试问题出在哪里，堆大小低或我的代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:08:39.450

```
public static String heapMemUsage() 
{
    long used = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed();
    long max = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getMax();
    return ""+used+" of "+max+" ("+ used/(double)max*100.0 + "%)";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:10:34.817

您可以使用[VisualVM 之](http://visualvm.java.net/)类的工具来获取有关运行 VM 的一些信息。

# java - java列出父类的所有子类

> ID：10276880
> 
> 赞同：5
> 
> 时间：2012-04-23T08:00:44.310
> 
> 标签：java, inheritance, reflection

> **可能重复：**
> [在运行时，查找 Java 应用程序中扩展基类的所有类](https://stackoverflow.com/questions/205573/at-runtime-find-all-classes-in-a-java-application-that-extend-a-base-class)

我需要获取扩展特定类（父）的所有类（子）的列表，然后为它们创建一个实例。

我应该如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:05:39.983

我会使用[http://code.google.com/p/reflections/](http://code.google.com/p/reflections/)

> 使用反射，您可以查询元数据，例如：
> 
> *   获取某种类型的所有子类型
> *   获取所有带有一些注释的类型/方法/字段，没有注释参数匹配
> *   获取匹配正则表达式的所有资源

这可以用于索引或缓存模式。正如@Jagger 所建议的那样，对每个类的蛮力搜索相对较慢。您还可以按包限制搜索，例如`com.mycom.*`

# c++ - cocos2d(cocos2d-x)中如何制作水效果

> ID：10276881
> 
> 赞同：0
> 
> 时间：2012-04-23T08:00:44.240
> 
> 标签：c++, c, cocos2d-iphone, cocos2d-x

  我想编写一个简单的程序来显示天空中的水滴。我用的是cocos2d的一方box2d。我构建了一个**b2FixtureDef**并将形状设置为盒子，密度为2.0f，摩擦力为0.05f，恢复原状是0.03f。程序运行时，有200个盒子像沙子一样掉在地上。

  是否有一些教程或演示可以帮助我

  对不起我的英语（这不是我的第一语言）。哈哈

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T11:00:32.180

使用 box2d 球 b2FixtureDef 可能不是模拟水滴的好方法。

当水滴数量超过400个时，消耗很大，你必须实现并知道水滴对产生的流体力的影响，并在box2d中使用。

所以我认为你应该在 box2d 中使用 sph 流体。这样会更有效。这是网址：[https](https://github.com/Vavius/cocos_sph) ://github.com/Vavius/cocos_sph ，但它只是实现了 box2d 的 sph 算法以及与 Polygon 和球形状的碰撞。

您需要自己调整参数和渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T11:54:41.673

您可以从本教程中获得主要思想

[http://www.emanueleferonato.com/2012/05/16/simulating-mudslime-with-box2d-bitmaps-and-filters/](http://www.emanueleferonato.com/2012/05/16/simulating-mudslime-with-box2d-bitmaps-and-filters/) [http://www.emanueleferonato.com/2013/07/24/wheres-my- water-flash-box2d-demo/](http://www.emanueleferonato.com/2013/07/24/wheres-my-water-flash-box2d-demo/)

并使它们适应`cocos2d-x box2d`.

# javascript - android 2.2：将参数传递给js文件中的javascript函数并返回值

> ID：10276887
> 
> 赞同：1
> 
> 时间：2012-04-23T08:00:52.737
> 
> 标签：javascript, android, webview, android-webview

我在 android 2.2 中使用 webView
我想将参数传递给 js 文件中的 javascript 函数，
并且我想将值返回给我的 android

我的代码有什么问题？

我的代码：

```
WebView webView1;
MyJavaScriptInterface myJavaScriptInterface1;

public void onCreate(Bundle savedInstanceState) {  
    webView1 = (WebView) findViewById(R.id.webView1);
    myJavaScriptInterface1 = new MyJavaScriptInterface(this);

    webView1.addJavascriptInterface(myJavaScriptInterface1,"AndroidFunction");
    EnableJavaScriptAndMultitouch(webView1);        
    webView1.loadUrl("file:///android_asset/P_001.html");       
}

public void EnableJavaScriptAndMultitouch(WebView mWebView) {
    mWebView.getSettings().setJavaScriptEnabled(true);          
    mWebView.getSettings().setSupportZoom(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
}       

public void onLongPress(MotionEvent e) {
    webView1.loadUrl("javascript:SelectAyaInPosition("
            + String.valueOf(e.getX()) + "," + String.valueOf(e.getY())
            + ", 'black', 'red'");   
}
////////////////////////////////
public class MyJavaScriptInterface {
    Context mContext;

    MyJavaScriptInterface(Context c) {
        mContext = c;
    }

    public void getElementID(String ID) {
        Toast.makeText(mContext, ID, Toast.LENGTH_SHORT).show();
    }
} 
```

我的资产文件夹中的 js 文件和我的 html 文件

```
function ClearAll(defaultColor) 
{
    var allLinks = document.all.tags('a');
    for(var i = 0; i < allLinks.length; i++)
        allLinks[i].style.color = defaultColor;
}

function ColorAya(aya, sura, defaultColor, highlightColor) 
{
    ClearAll(defaultColor);
    var elementSelected = document.getElementById('a' + sura + '_' + aya);
    elementSelected.style.color= highlightColor;
}

function GetItemInPosition(x, y) 
{
    var elementSelected = document.elementFromPoint(x, y);
    return elementSelected.id;
}

function SelectAyaInPosition(x, y, defaultColor, highlightColor) 
{
    ClearAll(defaultColor);
    var elementSelected = document.elementFromPoint(x, y);
    elementSelected.style.color= highlightColor;
    showAndroidToast(elementSelected.id);
}

function showAndroidToast(toast) {
       AndroidFunction.getElementID(toast);
} 
```

我的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <meta name="generator" content="HTML Tidy, see www.w3.org">
        <meta name='viewport' content=
        'width=device-width; initial-scale=1.0; maximum-scale=20.0; user-scalable=1; minimum-scale=1.0; '>
        <link rel='stylesheet' charset='utf-8' type='text/css'
        href='Main.css'>
        <style type="text/css">
        @font-face
        {
            font-family: AQF_P001_HA;
            src: url('file:///android_asset/fonts/AQF_P001_HA.ttf');
        }
        .sc_F0
        {
            font-family: AQF_P001_HA;
        }       @font-face
        {
            font-family: AQF_BSML;
            src: url('file:///android_asset/fonts/AQF_BSML.ttf');
        }
        .sc_F0
        {
            font-family: AQF_BSML;
        }
</style>
    <script  type='text/javascript' language='javascript' src='JSColorAya.js'>
    </script>

        <title></title>
    </head>

    <body id="body">
        <img alt="" src="MainPagesFram@2x.png" class="imgFrame"> 
<div style="position:absolute;top:18px;right:127px;font-family: AQF_BSML; mso-font-charset: 0;font-size:15pt">&#64397;</div>
        <table onclick="" style=
        "position: absolute; width: 100%; height: 100px%; z-index: 0; left: 0px; top: 110px; direction: rtl; overflow: visible; line-height: 30px;"
         id="Table00" name="Table00">
            <tbody>
                <tr align="justify" dir="rtl">
                    <td align="middle">
                        <table border="0" cellspacing="0"
                        cellpadding="0" align="center">
                            <tr>
                                <td align="center"><span class=
                                "ayaColor" style="font-size:17pt"><a name="1_1"></a> <a
                                id="a1_1" style=
                                "cursor: pointer; direction: rtl; line-height: 165%; font-family: AQF_P001_HA; mso-font-charset: 0"
                                 target=
                                "_top">&#64337;&#64338;&#64339;&#64340;&#64341;</a><a
                                 name="1_2"></a><a id="a1_2" style=
                                "cursor: pointer; direction: rtl; line-height: 165%; font-family: AQF_P001_HA; mso-font-charset: 0"
                                 target="_top"><br>
                                 &#64342;&#64343;&#64344;&#64345;&#64346;</a><a
                                 name="1_3"></a><a id="a1_3" style=
                                "cursor: pointer; direction: rtl; line-height: 165%; font-family: AQF_P001_HA; mso-font-charset: 0"
                                 target="_top"><br>
                                 &#64347;&#64348;&#64349;</a><a
                                name="1_4"></a><a id="a1_4" style=
                                "cursor: pointer; direction: rtl; line-height: 165%; font-family: AQF_P001_HA; mso-font-charset: 0"
                                 target=
                                "_top">&#64350;&#64351;&#64352;&#64353;</a><a
                                 name="1_5"></a><a id="a1_5" style=
                                "cursor: pointer; direction: rtl; line-height: 165%; font-family: AQF_P001_HA; mso-font-charset: 0"
                                 target="_top"><br>
                                 &#64354;&#64355;&#64356;&#64357;&#64358;</a><a
                                 name="1_6"></a><a id="a1_6" style=
                                "cursor: pointer; direction: rtl; line-height: 165%; font-family: AQF_P001_HA; mso-font-charset: 0"
                                 target="_top">&#64359;<br>
                                 &#64360;&#64361;&#64362;</a><a
                                name="1_7"></a><a id="a1_7" style=
                                "cursor: pointer; direction: rtl; line-height: 165%; font-family: AQF_P001_HA; mso-font-charset: 0"
                                 target=
                                "_top">&#64363;&#64364;&#64365;<br>
                                 &#64366;&#64367;&#64368;&#64369;<br>

                                 &#64370;&#64371;&#64372;</a></span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html> 
```

# logic - xor 和 not 门在逻辑上是否完整

> ID：10276892
> 
> 赞同：5
> 
> 时间：2012-04-23T08:01:02.370
> 
> 标签：logic, hardware, xor

异或门和非门在逻辑上是否完整。换句话说，我们可以使用它们来实现逻辑电路吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T19:28:07.293

NOR 和 NAND 是唯一功能完整的单例门集。因此，XOR 本身在功能上并不完整（或与 NOT 一起，因为如上所述 NOT 可以使用 XOR 创建）。

XOR 可以补充到两个元素功能完整的门集。应该添加（左或右）含义。

您可以在 Wernick, William (1942) “Complete Sets of Logical Functions”中找到有关此类集合的更多信息，*美国数学学会汇刊 51：117-32。*

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-13T23:22:26.820

所有基本逻辑门都可以用非门创建。如果输入之一永久为零，则异或门充当非门。

AND：NOT(NOT(A) OR NOT(B))
OR：（可以简单地将电线连接在一起，也可以使用一些二极管）
NAND：NOT(A) OR NOT(B)
XOR：NOT(NOT(A ) OR NOT(NOT(A) OR NOT(B))) OR NOT(NOT(NOT(A) OR NOT(B)) OR NOT(B)) 等。

# iphone - 异步请求的实现导致许多泄漏

> ID：10276894
> 
> 赞同：0
> 
> 时间：2012-04-23T08:01:11.320
> 
> 标签：iphone, objective-c, ios, memory-leaks, asihttprequest

我继承了一个使用 ASIHttpRequest 进行所有网络通信的项目。我不清楚我们使用的是哪个特定版本。我只能说，从 .h 文件中，特定文件的最早创建日期是 1010 年 8 月 17 日（ASIDataDecompressor）。

我们正在使用完成和失败块。出于某种原因，通常会触发故障块，这只有在服务器无法响应时才会真正发生。我们的日志看起来很正常，并且我们没有收到任何通知（Airbrake）在错误发生时服务器出现问题，所以现在我假设我们的服务器很好并且它是应用程序罪魁祸首。

我决定通过 Instruments (Leaks) 运行该应用程序，并惊讶地发现当我强制请求失败时，会立即创建约 27 个泄漏。我不知道如何很好地绕过 Instruments，所以现在我不确定如何处理这些信息。

我想我会发布我的代码，看看是否有任何明显的地方。

在viewDidLoad中，执行了这段代码

```
[[MyAPI sharedAPI] getAllHighlights:pageNumber:perPage onSuccess:^(NSString *receivedString,NSString *responseCode) {
        [self getResults:receivedString];
        if(![responseCode isEqualToString:@"Success"]) {
            [self hideProgressView];
            appDelegate.isDiscover_RefreshTime=YES;                
            [[MyAPI sharedAPI] showAlert:responseCode]; 
        } else {
            NSString *strLogEvent=@"Discover_Highlights_Loaded Page_";
            strLogEvent=[strLogEvent stringByAppendingFormat:@"%i",intPageNumber];
            [FlurryAnalytics logEvent:strLogEvent timed:YES];
        }
    } onFail:^(ASIFormDataRequest *request) {
        NSDictionary *parameters = [[MyAPI sharedAPI] prepareFailedRequestData:request file:@"Discover" method:_cmd];
        [FlurryAnalytics logEvent:@"Unable_to_Connect_to_Server" withParameters:parameters  timed:true];
        [self hideProgressView];
        appDelegate.isDiscover_RefreshTime=YES;

        [[AfarAPI sharedAPI] showAlert:@"Unable to Connect to Server."];
        [tblHighlightsGrid reloadData];
        [tblListHighlights reloadData];

}]; 
```

这些 typedef 已在 API Singleton 的顶部定义：

```
typedef void (^ASIBasicBlockWrapper)(NSString *responseString,NSString *responseCode);
typedef void (^ASIBasicBlockWrapperFail)(ASIFormDataRequest *request); 
```

MyAPISingleton#getAllHighlights...

```
- (void)getAllHighlights:(NSString *)pageNumber:(NSString *)perPage onSuccess:(ASIBasicBlockWrapper)cb1 onFail:(ASIBasicBlockWrapperFail)cb2{
    NSString *access_token= [[NSUserDefaults standardUserDefaults] objectForKey:@"access_token"];

    NSString *url = [baseURL stringByAppendingFormat:AFAR_GET_ALL_HIGHLIGHTS_ENDPOINT, pageNumber,perPage];
    if (access_token) { url = [url stringByAppendingFormat:ACCESS_TOKEN, access_token]; }

    __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:url]];
    [request setRequestMethod:@"GET"];
    [request setDelegate:self];  
    [self executeAsynchronousRequest:request onSuccess:cb1 onFail:cb2];
} 
```

最后，MyAPI#executeAsynchronousRequest：

```
- (void) executeAsynchronousRequest:(ASIFormDataRequest *)request onSuccess:(ASIBasicBlockWrapper)cb1 onFail:(ASIBasicBlockWrapperFail)cb2
{
    [request setCompletionBlock:^{
        int statusCode = [request responseStatusCode];
        NSString *statusMessage = [self statusErrorMessage:statusCode];
        cb1([request responseString],statusMessage);
    }];
    [request setFailedBlock:^{
        cb2(request);
    }];

    [request startAsynchronous];    
} 
```

关于为什么会产生 27 个泄漏，有什么突出的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T01:32:18.600

我想通了。

[ASIHttpRequest 文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use#using_blocks)非常清楚您需要使用 __block 存储机制指定您的请求对象：

> 请注意在声明请求时使用 __block 限定符，这很重要！它告诉块不要保留请求，这对于防止保留循环很重要，因为请求将始终保留块。

在 getAllHighlights() 中，我正在这样做，但随后我将我的请求对象作为参数发送给另一个方法 (executeAsyncRequest)。__block 存储类型只能在局部变量上声明，因此在方法签名中，`request`它只是键入了一个普通的 ASIFormDataRequest，因此它看起来好像失去了它的 __block 状态。

诀窍是在块中使用它之前先转换（我不确定这在技术上是否准确）论点。

这是我对 executeAsyncRequest 的无泄漏实现：

```
- (void) executeAsyncRequest:(ASIFormDataRequest *)request onSuccess:(ASIBasicBlockWrapper)cb1 onFail:(ASIBasicBlockWrapperFail)cb2
{
    // this is the important part. now we just need to make sure
    // to use blockSafeRequest _inside_ our blocks
    __block ASIFormDataRequest *blockSafeRequest = request;

    [request setCompletionBlock: ^{
        int statusCode = [blockSafeRequest responseStatusCode];
        NSString *statusMessage = [self statusErrorMessage:statusCode];
        cb1([blockSafeRequest responseString],statusMessage);
    }];

    [request setFailedBlock: ^{
        cb2(blockSafeRequest);
    }];

    [request startAsynchronous];    
} 
```

# java - 使用 Java 调用 sccmap

> ID：10276901
> 
> 赞同：0
> 
> 时间：2012-04-23T08:01:33.997
> 
> 标签：java, graphviz, dot

我正在尝试使用 Java 从 GraphViz 调用 sccmap 命令。

```
 String command = "/usr/bin/sccmap -S /home/paperclip/Desktop/graph.dot > /home/paperclip/Desktop/scc.dot";
        try {
            Runtime rt = Runtime.getRuntime();
            Process p = rt.exec(command);
            System.out.println("Process exited with code = " + p.waitFor());
            java.io.InputStream is = p.getInputStream();
            java.io.BufferedReader reader = new java.io.BufferedReader(new InputStreamReader(is));
            String s = null;
            while ((s = reader.readLine()) != null) {
                System.out.println(s);
            }
            is.close();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

这段代码的输出是：

> 进程退出，代码 = 0

sccmap 函数应该在我指定的位置输出一个点文件。但是，它不像我预期的那样工作。即使 exitValue 为 0，也没有创建点文件。

我尝试在终端中手动使用该命令，它运行良好。我还尝试使用其他命令，例如“ls”，它也可以。为什么此代码不适用于“sccmap”？

我还搜索了一些用于 GraphViz 的 Java API，例如 jGraphViz (http://jgraphviz.sourceforge.net/) 和 graphviz-java-api 在 (http://www.loria.fr/~szathmar/off/projects/ java/GraphVizAPI/index.php），但它们似乎对我不起作用。

仅供参考，我在 Ubuntu 11.10 上，并且已经安装了 GraphViz。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:13:02.260

`>`由 shell 解释（它是一个流重定向），它不是应用程序的参数。在这种情况下没有外壳。

试试`/usr/bin/sccmap -S -o /home/paperclip/Desktop/scc.dot /home/paperclip/Desktop/graph.dot`吧。

# apache-flex - flex 4 - depth 属性没有按预期工作

> ID：10276902
> 
> 赞同：0
> 
> 时间：2012-04-23T08:01:37.197
> 
> 标签：apache-flex, actionscript, flex4

我正在开发一个等距游戏。

我有一个父**UIComponent** ( **WorldMap** )。玩家可以选择**MapElement**（游戏项目）并将它们放在可玩区域**WorldMap**中。这个 MapElement 也是一个 UIComponent，它包含子控件，例如 Sprite、Image、Label 和自定义 Flex 组件以保存各种信息。

现在，我已经编写了一个逻辑来确定哪个应该出现在后面，哪个应该出现在我称之为**idx** (index) 的 Isometric 区域的前面，并且我看到这个值是 MapElement 的 depth**属性**。

我按照下图所示的顺序添加了三个组件，并将它们的**深度**属性分别设置为 11077、11168 和 10630。如果深度属性正常工作，则第三项应该落后于第一项，但似乎它们按添加的顺序出现（默认行为）

如果我没记错的话，深度值可以是任何东西

有人能帮我吗？

我知道另一个使用**swapChildren**、**swapChildrenAt**和**addChildAt**方法的解决方案（我不想因为我的项目特定原因使用它）但我需要找出深度有什么问题

![在此处输入图像描述](../Images/5c9ac25365ed81a1d0d110b5846aadc8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:23:30.660

正如我认为的那样，问题在于您的 WorldMap 组件，正如您所说，它是 UIComponent。深入了解属性显示`depth`setter 启动方法，该方法在 UIComponent 中为空，并且仅使用作为每个 Flex 4 组件的主容器的`invalidateLayering`逻辑覆盖。`Group`这里的例子： [http ://www.tink.ws/blog/flex-4-uicomponent-depth/](http://www.tink.ws/blog/flex-4-uicomponent-depth/)

因此，看起来，您至少需要使用WorldMap`Group`或`SkinnableContainer`作为 WorldMap 才能实现 depth 属性才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:12:58.327

使用 UIComponent.addChildAt(child:DisplayObject, index:int)。addChildAt 将子 DisplayObject 实例添加到此 DisplayObjectContainer 实例。子元素被添加到指定的索引位置。索引 0 表示此 DisplayObjectContainer 对象的显示列表的后面（底部）。

# android - HTML 中的可滚动内容不会在 android 模拟器或手机中滚动

> ID：10276904
> 
> 赞同：4
> 
> 时间：2012-04-23T08:01:46.367
> 
> 标签：android, html, css, android-layout, webview

我有一个显示一些 HTML 内容的 WebView。在我的 HTML 中，我放置了 overflow-y: scroll 以获取特定的 div。现在，当项目数超过 div 的区域时，div 不会滚动。任何有想法的人，请提出建议。

overflow-y: auto 也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:39:41.567

Android 3.0 及更高版本支持`overflow:`, 在 < 3.0 上是另一回事。[使用 iScroll 之类的 polyfill](http://lab.cubiq.org/iscroll/examples/simple/)可能会取得一些成功方面取得一些成功，但这确实是有代价的。在布局复杂的网站上很难实现，每次网站内容发生变化时都需要调用一个方法。内存使用也是一个问题：在已经功率不足的设备上，由于这些类型的 polyfill，性能可能会滞后。

[下面是](http://www.seabreezecomputers.com/tips/scroll-div.htm)手机上Scrollable DIV的对比

我认为这将帮助您找到最佳解决方案。我建议使用 iScroll 或[touchScroll](http://www.seabreezecomputers.com/tips/scroll-div.htm#touchscroll)来解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:17:02.620

这是安卓的问题。也许 WebView 无法支持可滚动的 div 元素。

在以下链接中找到了可能的解决方案： [http ://www.seabreezecomputers.com/tips/scroll-div.htm](http://www.seabreezecomputers.com/tips/scroll-div.htm)

为我工作。希望它对你们有用。干杯

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-23T09:07:42.947

您是否尝试过在 xml 中使用 ScrollView？

# list - 列出方案中数字的分区

> ID：10276910
> 
> 赞同：1
> 
> 时间：2012-04-23T08:02:18.770
> 
> 标签：list, scheme, data-partitioning

我需要在列表中表示一个数字的分区。该过程还接受用于确定最大分区数和初始分区最大值的参数。

```
(list-partitions 5 2 4)
>((4 1) (3 2)) 
```

这里初始总数为 5，最大分区数为 2，最大初始分区数为 4。

从概念上讲，我认为我应该将分区数字输入一个辅助函数，该函数将为我构建分区。但是我将如何实现呢？

***解决了***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:23:53.080

这是 Racket 中一个可能的解决方案。首先，该`partition`过程（基于[此](http://www.csse.monash.edu.au/~lloyd/tildeAlgDS/Recn/Partition/)算法）为整数生成完整的分区列表`n`。然后`list-partitions`程序按要求过滤结果：

```
#lang racket

(define (partition n)
  (let loop ((n n)
             (acc '()))
    (if (zero? n)
        (list acc)
        (append-map (lambda (i)
                      (loop (- n i) (cons i acc)))
                    (reverse (build-list n add1))))))

(define (list-partitions n max-number max-init)
  (take (filter (lambda (lst)
                  (<= (apply max lst) max-init))
                (partition n))
        max-number))

(list-partitions 5 2 4)
> '((1 4) (2 3)) 
```

# google-app-engine - 如何在 Google App Engine 上部署图像？

> ID：10276912
> 
> 赞同：0
> 
> 时间：2012-04-23T08:02:18.903
> 
> 标签：google-app-engine

如何将图像部署到 Google App Engine？

我的图像在目录 /css/images/error1.png
但在 appspot.com 上：“在此服务器上找不到请求的 URL /css/images/error1.png。”

怎么了？
上传日志： http: [//pastebin.com/VAK5hYPC](http://pastebin.com/VAK5hYPC)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:17:26.277

[您是否将该目录映射为 app.yaml 文件中的静态目录？](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Handlers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:15:39.557

试试这个并在浏览器中输入 url 路径以查看是否找到图像（甚至可能是拼写错误）

```
- url: /css
  static_dir: static/css/images 
```

# c++ - OpenCV C 与 C++

> ID：10276913
> 
> 赞同：3
> 
> 时间：2012-04-23T08:02:21.113
> 
> 标签：c++, c, opencv, feature-detection, surf

我正在尝试使用 SURF，但我在 C 中找不到这样做的方法。文档似乎只有 C++ 的内容。

我已经能够检测到 SURF 功能：

```
 IplImage *img = cvLoadImage("img5.jpg");

    CvMat* image = cvCreateMat(img->height, img->width, CV_8UC1);
    cvCvtColor(img, image, CV_BGR2GRAY);

    // detecting keypoints
    CvSeq *imageKeypoints = 0, *imageDescriptors = 0;
    int i;

    //Extract SURF points by initializing parameters
    CvSURFParams params = cvSURFParams(1, 1);
    cvExtractSURF( image, 0, &imageKeypoints, &imageDescriptors, storage, params );
    printf("Image Descriptors: %d\n", imageDescriptors->total);

    //draw the keypoints on the captured frame
    for( i = 0; i < imageKeypoints->total; i++ )
    {
        CvSURFPoint* r = (CvSURFPoint*)cvGetSeqElem( imageKeypoints, i );
        CvPoint center;
        int radius;
        center.x = cvRound(r->pt.x);
        center.y = cvRound(r->pt.y);
        radius = cvRound(r->size*1.2/9.*2);
        cvCircle( image, center, radius, CV_RGB(0,255,0), 1, 8, 0 );
    } 
```

但我找不到需要比较 2 个图像的描述符的方法。我在 C++ 中找到了这段代码，但翻译时遇到了麻烦：

```
 // matching descriptors
    BruteForceMatcher<L2<float> > matcher;
    vector<DMatch> matches;
    matcher.match(descriptors1, descriptors2, matches);

    // drawing the results
    namedWindow("matches", 1);
    Mat img_matches;
    drawMatches(img1, keypoints1, img2, keypoints2, matches, img_matches);
    imshow("matches", img_matches);
    waitKey(0); 
```

如果有人可以引导我使用描述符匹配器甚至更好，我将不胜感激，让我知道在哪里可以找到仅 C 语言的 OpenCV 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:18:05.497

查看来自[thioldhack](http://thisoldhack.blogspot.com/2010/11/opencv-surf-and-qt.html)的博客文章。包含示例代码。它适用于 QT，但您可以轻松地为 VC++ 或任何其他产品做到这一点。您将需要使用 K 近邻算法匹配关键点。它拥有一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:51:20.837

这个链接可能会给你一个提示。[https://projects.developer.nokia.com/opencv/browser/opencv/opencv-2.3.1/samples/c/find_obj.cpp](https://projects.developer.nokia.com/opencv/browser/opencv/opencv-2.3.1/samples/c/find_obj.cpp)。在函数中查看`naiveNearestNeighbor`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T09:36:13.460

稍长但最可靠的方法是在您的计算机上使用调试信息编译 OpenCV，然后使用调试器进入 C++ 实现。你也可以把它复制到你的项目中，然后像剥洋葱一样剥它，直到你得到纯 C。

# c# - C# - 如何将字符串从 WebBrowser 传递回表单

> ID：10276914
> 
> 赞同：0
> 
> 时间：2012-04-23T08:02:24.167
> 
> 标签：c#, .net

如何使用 C# 将 WebBrowser 表单中的字符串读入另一个表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:06:12.370

您可以使用 DOM。例如，如果您的 WebBrowser 显示带有以下标记的页面：

```
<div id="t">
    ....
</div> 
```

你可以像在 JavaScript 中那样接收它的文本：

```
webBrowser.Document.GetElementById("t").InnerText 
```

# android - 需要运行shell命令android

> ID：10276915
> 
> 赞同：1
> 
> 时间：2012-04-23T08:02:25.013
> 
> 标签：android, shell, command, exec

我试图通过java运行这些shell命令但没有成功。代码执行完美但.so文件不执行。当我在 adb 中使用这些命令时，一切正常。

```

    private void submit() {
       System.out.println("doooooooooo");
          try {
               String[] commands = {"cd /data/data/com.dailydeals.usethisnow/lib", 
                                    "./libdeals.so" };
               Process p = Runtime.getRuntime().exec("/system/bin/sh -");
               DataOutputStream os = new DataOutputStream(p.getOutputStream());            
                  for (String tmpCmd : commands) {
                          os.writeBytes(tmpCmd+"\n");
                  }
              } catch (IOException e) {
              e.printStackTrace();    
              }
              System.out.println("doneooooooooo");
        } 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:05:22.803

[在 Android 应用程序中执行 shell 命令（Android 编程）](http://shreyagarwal.blog.com/2011/04/20/executing-shell-commands-in-android-applications/)

# jquery - Jquery 错误 - 不是函数（Rails 3）

> ID：10276916
> 
> 赞同：0
> 
> 时间：2012-04-23T08:02:26.200
> 
> 标签：jquery, ruby-on-rails-3

首先，我的 Jquery 知识非常有限，但我正在阅读和练习以解决这个问题，所以如果这是一个非常基本的问题，请多多包涵。正如标题所述，我在我的 Rails 应用程序中收到一条错误消息

```
 $(".share a").button is not a function 
```

我的 application.js 文件包含这个

```
 $(function() {

  $(".share a")
  .button()
  .click(function() {

    var a = this;

    // first set the title of the dialog box to display the folder name
    $("#invitation_form").attr("title", "Share '" + $(a).attr("folder_name") + "' with others");

    // a hack to display the different folder names correctly
    $("#ui-dialog-title-invitation_form").text("Share '" + $(a).attr("folder_name") + "' with others");

    // then put the folder_id of the share link into the hidden field "folder_id" of the invite form
    $("#folder_id").val($(a).attr("folder_id"));

    // the dialog box customization
    $("#invitation_form").dialog({
      height: 300,
      width: 600,
      modal: true,
      buttons: {
        // first button
        "Share": function() {
          // get the url to post the data to
          var post_url = $("#invitation_form form").attr("action");

          // serialize the form data and post it the url with ajax
          $.post(post_url, $("#invitation_form form").serialize(), null, "script");

          return false;
        },
        // second button
        Cancel: function() {
          $( this ).dialog( "close" );
        }
      },
      close: function() {
      }
    });

    return false;
  }); 
```

});

我的视图页面包含这个来调用jquery（我认为）

```
 <div class="share">
        <%= link_to "Share", "#", :folder_id => folder.id, :folder_name =>       folder.nameunless @is_this_folder_being_shared %>
      </div> 
```

谁能告诉我为什么我会收到这个错误，因为我可以看到它应该工作，当我点击一个标记为共享的按钮时，我应该会在我的邀请表单中出现一个弹出窗口。

任何帮助表示赞赏，因为我现在被困在这一点上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:05:49.997

您很可能忘记包含 jQuery UI。

除此之外，HTML 没有称为`folder_name`（或`folder_id`）的属性。请不要发明自定义属性 - 如果您想存储自定义数据，请使用数据属性：`data-folder-name="whatever"`然后使用`.data('folderName')`通过 jQuery 访问它。

# windows-phone-7 - wp7启动时如何定义地图控件的显示区域？

> ID：10276920
> 
> 赞同：1
> 
> 时间：2012-04-23T08:02:39.190
> 
> 标签：windows-phone-7

这可能有点新手，但是，我如何在 wp7 中设置地图控件的初始显示区域？我的意思是，当我从属性更改缩放级别时，它会显示更接近地图的外观。但我不知道如何让它在启动时显示欧洲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:06:25.667

您可以使用 Map 控件的 SetView 方法，将您想要居中的位置和特定的缩放级别传递给它：-

[http://msdn.microsoft.com/en-us/library/gg588591(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/gg588591(v=vs.92).aspx)

[http://msdn.microsoft.com/en-us/library/gg588382(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/gg588382(v=vs.92).aspx)

# c# - IIS 6 提供了 MVC 2 应用程序中不可用的目录列表

> ID：10276923
> 
> 赞同：0
> 
> 时间：2012-04-23T08:02:55.737
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, iis-6

我继承了一个 MVC 2 应用程序，我们不断收到 404 错误和目录列表不可用错误。我已尝试添加论坛建议的其他路由来解决 IIS 6 中的问题，但我们仍然收到错误消息。另一个令人费解的事情是错误不会持续发生。我们尝试在调试时复制它，但没有成功，我们还在应用程序上运行了负载测试，它在负载下运行良好。我已经浏览了代码，它没有明显的问题，它确实广泛使用会话和视图数据变量，但是存储的值很小，不应该成为问题。就像我说的那样，我无法解释为什么会发生这种情况。欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:05:06.803

IIS 6.0 不支持开箱即用的无扩展 URL。查看[以下博客文章](http://haacked.com/archive/2010/12/22/asp-net-mvc-3-extensionless-urls-on-iis-6.aspx)进行配置。

# unity-container - 统一的 BuildUp 方法不考虑 MappingName

> ID：10276927
> 
> 赞同：1
> 
> 时间：2012-04-23T08:03:10.497
> 
> 标签：unity-container

unity BuildUp 方法有一个奇怪的问题。我有一个映射到三个类的接口。我为每个映射命名。

现在我需要在现有对象中注入依赖项（它是一个属性，所以我无法控制生命周期）。我调用 BuildUp 方法来注入依赖项，但它总是抛出一个异常，表示接口未映射。

如果我只将接口映射到一种类型并删除映射名称，则 BuildUp 方法有效。如果我只将接口映射到一种类型并指定映射名称，则 BuildUp 方法将失败。我尝试在配置和代码中注册类型，但没有任何变化。

我怀疑这是一个错误，但我想知道其他人是否有其他想法。

这就是我调用 buildup 方法的方式：

```
var newAttr = _container.BuildUp(myAttribute.GetType(), myAttribute, "Mapping1"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:15:26.657

我尝试按照您的情况进行操作，并且此示例有效

```
var container = new UnityContainer();
container.RegisterType<IFoo, One>("1", new InjectionProperty("Bar", "1"));
container.RegisterType<IFoo, Two>("2", new InjectionProperty("Bar", "2"));
container.RegisterType<IFoo, Three>("3", new InjectionProperty("Bar", "3"));
One one = new One();
container.BuildUp(one.GetType(), one, "1");
Assert.AreEqual("1", one.Bar);

public interface IFoo
{
    string Bar { get; set; }
}
public class One : IFoo
{
    public string Bar { get; set; }
}
public class Two : IFoo
{
    public string Bar { get; set; }
}
public class Three : IFoo
{
    public string Bar { get; set; }
} 
```

* * *

**更新**

```
var container = new UnityContainer();
container.RegisterType<Person>(new InjectionProperty("Foo"));
container.RegisterType<IFoo, One>("1");
container.RegisterType<IFoo, Two>("2");
container.RegisterType<IFoo, Three>("3");
Person person = container.Resolve<Person>("1");
Assert.IsNotNull(person.Foo);
Assert.IsInstanceOfType(person.Foo, typeof(One));

public class Person
{
  public IFoo Foo { get; set; }
} 
```

我想这就是你的意思？简短的回答：这不是 Unity 的工作方式。

长答案：您将必须指定一个`ResolverOverride`为您执行此操作的。但即使这样还不够，因为您希望容器为您创造您想要注入的价值。因此，您需要将 a 指定`ResolvedParameter`为`ResolverOverride`. 使用 Unity 的开箱即用部件，`Resolve`看起来像这样

```
Person person = container.Resolve<Person>(new PropertyOverride("Foo", new ResolvedParameter(typeof(IFoo), "1"))); 
```

或者您可以改用此自定义覆盖

```
public class NamedPropertyOverride : ResolverOverride
{
  private readonly string propertyName;
  private readonly string registrationName;
  public NamedPropertyOverride(string propertyName, string registrationName)
  {
    this.propertyName = propertyName;
    this.registrationName = registrationName;
  }
  public override IDependencyResolverPolicy GetResolver(IBuilderContext context, Type dependencyType)
  {
    var currentOperation = context.CurrentOperation as ResolvingPropertyValueOperation;
    if (currentOperation != null && 
        currentOperation.PropertyName == this.propertyName)
    {
      Type propertyType = currentOperation
        .TypeBeingConstructed
        .GetProperty(currentOperation.PropertyName, BindingFlags.Instance | BindingFlags.Public)
        .PropertyType;
      return new NamedTypeDependencyResolverPolicy(propertyType, this.registrationName);
    }
    return null;
  }
} 
```

`Resolve`将上面示例中包含调用的行更改为这一行

```
Person person = container.Resolve<Person>(new NamedPropertyOverride("Foo", "1")); 
```

这应该够了吧。

# c# - 使用 JSON.NET 生成带有额外属性的 JSON 模式

> ID：10276928
> 
> 赞同：20
> 
> 时间：2012-04-23T08:03:19.080
> 
> 标签：c#, json.net, jsonschema

我正在使用 JSON.NET 从 c# 对象类生成 JSON Schema。但我无法添加任何其他 json 模式属性，例如 maxLength、模式（验证电子邮件的正则表达式）等

下面是我的工作代码，我只能生成带有必需属性的 json 模式。如果有人可以发布一些关于如何为 json 模式添加这些额外属性的代码示例，那就太好了。

谢谢，

我的代码示例

```
public class Customer
{
    [JsonProperty(Required = Required.Always)]
    public int CustomerID { get; set; }

    [JsonProperty(Required = Required.Always)]
    public string FirstName { get; set; }

    [JsonProperty(Required = Required.Always)]
    public string LastName { get; set; }

    [JsonProperty(Required = Required.Always)]
    public string Email { get; set; }

    [JsonProperty(Required = Required.AllowNull)]
    public string Phone { get; set; }
} 
```

至

```
{
    "title" : "Customer",
    "type" : "object",
    "properties" : {
        "CustomerID" : {
            "required" : true,
            "type" : "integer"
        },
        "FirstName" : {
            "required" : true,
            "type" : "string"
        },
        "LastName" : {
            "required" : true,
            "type" : "string"
        },
        "Email" : {
            "required" : true,
            "type" : "string"
        },
        "Phone" : {
            "required" : true,
            "type" : [
                "string",
                "null"
            ]
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-06-16T17:58:43.177

James Newton-King[的回答](https://stackoverflow.com/a/28184225/889779)是正确的，我将使用代码示例对其进行扩展，这样偶然发现此页面的人就不需要研究整个[文档](http://www.newtonsoft.com/jsonschema/help/html/GeneratingSchemas.htm)。

因此，您可以使用 .NET 提供的属性来指定这些附加选项，例如字符串的最大长度或允许的正则表达式模式。这里有些例子：

```
public class MyDataModel
{
    public enum SampleEnum { EnumPosition1, EnumPosition2, EnumPosition3 }

    [JsonProperty(Required = Required.Always)]
    [RegularExpression(@"^[0-9]+$")]
    public string PatternTest { get; set; }

    [JsonProperty(Required = Required.Always)]
    [MaxLength(3)]
    public string MaxLength3 { get; set; }

    [JsonProperty(Required = Required.AllowNull)]
    [EnumDataType(typeof(SampleEnum))]
    public string EnumProperty { get; set; }
} 
```

上面的注解来自`System.ComponentModel.DataAnnotations`命名空间。

要使这些附加属性影响生成的 json 架构，您需要使用随*Json.NET Schema*包`JSchemaGenerator`分发的类。如果您使用 old ，则需要进行一些升级，因为它现在已被弃用并且不包含上述新功能。*`JsonSchemaGenerator`*

 *这是为上述类生成 Json Schema 的示例函数：

```
 /// <summary>
    /// Generates JSON schema for a given C# class using Newtonsoft.Json.Schema library.
    /// </summary>
    /// <param name="myType">class type</param>
    /// <returns>a string containing JSON schema for a given class type</returns>
    internal static string GenerateSchemaForClass(Type myType)
    {
        JSchemaGenerator jsonSchemaGenerator = new JSchemaGenerator();
        JSchema schema = jsonSchemaGenerator.Generate(myType);
        schema.Title = myType.Name;

        return schema.ToString();
    } 
```

你可以像这样使用它：

```
 string schema = GenerateSchemaForClass(typeof(MyDataModel)); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-28T03:38:42.647

**[Json.NET Schema](http://www.newtonsoft.com/jsonschema)**现在有很大改进的模式生成支持。

您可以使用 .NET 的 Data Annotation 属性对属性进行注释，以指定架构上的最小值、最大值、minLength、maxLength 等信息。

还有 JSchemaGenerationProvider 可让您在为类型生成模式时完全控制。

更多细节在这里： http: [//www.newtonsoft.com/jsonschema/help/html/GeneratingSchemas.htm](http://www.newtonsoft.com/jsonschema/help/html/GeneratingSchemas.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T21:53:43.513

您可以像这样创建自定义 JsonConverter 。我使用反射来填写属性。

```
 public class UserConverter : JsonConverter
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var user = (User)value;
        var result = new StringBuilder("{");

        result.Append("title : " + user.GetType().Name + ", ");
        result.Append("properties : {");

        foreach (var prop in user.GetType().GetProperties())
        {
            result.Append(prop.Name + ": {");
            result.Append("value : " + Convert.ToString(prop.GetValue(user, null)) + ", ");

            var attribute = (JsonPropertyAttribute)Attribute.GetCustomAttributes(prop)[0];
            if (attribute.Required == Required.Always)
                result.Append("required : true, ");

            result.Append("type : " + prop.PropertyType.Name.ToLower());
            result.Append(" }");
        }
        writer.WriteValue(result.ToString());
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var user = new User { UserName = (string)reader.Value };

        return user;
    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(User);
    }

} 
```

* * *

```
[JsonConverter(typeof(UserConverter))]
public class User
{
    [JsonProperty(Required = Required.Always)]
    public string UserName { get; set; }
}

//Run  
string json = JsonConvert.SerializeObject(manager, Formatting.Indented);

Console.WriteLine(json); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-30T09:21:07.073

您可以使用 JavaScriptSerializer 类。例如：

```
namespace ExtensionMethods
{
    public static class JSONHelper
    {
        public static string ToJSON(this object obj)
        {
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            return serializer.Serialize(obj);
        }

        public static string ToJSON(this object obj, int recursionDepth)
        {
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            serializer.RecursionLimit = recursionDepth;
            return serializer.Serialize(obj);
        }
    }
} 
```

像这样使用它：

```
using ExtensionMethods;

...

List<Person> people = new List<Person>{
                   new Person{ID = 1, FirstName = "Scott", LastName = "Gurthie"},
                   new Person{ID = 2, FirstName = "Bill", LastName = "Gates"}
                   };

string jsonString = people.ToJSON(); 
```

另请阅读这篇文章：

1.  [http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)
2.  [http://weblogs.asp.net/scottgu/archive/2007/10/01/tip-trick-building-a-tojson-extension-method-using-net-3-5.aspx](http://weblogs.asp.net/scottgu/archive/2007/10/01/tip-trick-building-a-tojson-extension-method-using-net-3-5.aspx)
3.  [http://www.asp.net/AJAX/Documentation/Live/mref/T_System_Web_Script_Serialization_JavaScriptSerializer.aspx](http://www.asp.net/AJAX/Documentation/Live/mref/T_System_Web_Script_Serialization_JavaScriptSerializer.aspx)

你也可以试试 ServiceStack [JsonSerializer](http://www.servicestack.net/mythz_blog/?p=344)

一个使用它的例子：

```
 var customer = new Customer { Name="Joe Bloggs", Age=31 };
    var json = JsonSerializer.SerializeToString(customer);
    var fromJson = JsonSerializer.DeserializeFromString<Customer>(json); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-08-08T13:27:50.503

*   首先将您的json文件转换为xml
*   现在添加要添加的 xml 节点并将 xml 转换为 json。

这种转换可以通过“newtonsoft.json.jsonconvert”类轻松完成。要使用此类，只需在您的项目中导入 newtonsoft.json dll。*

# c# - 用 C# 中的动态数据填充像 Crystal Reports 这样的控件

> ID：10276934
> 
> 赞同：0
> 
> 时间：2012-04-23T08:03:57.927
> 
> 标签：c#, mysql, crystal-reports

我目前有一个系统设置，用户可以使用 GUI“构建”他们自己的 SQL 查询。

我需要在水晶报表、报表查看器或 Telerik 报表等报表中显示结果。

因为我不知道查询会返回哪些列（因为用户可以完全控制要选择的列），所以我需要知道是否可以在报告中显示这些数据。

所以我的问题是：是否可以在不知道实际返回/显示哪些列的情况下在报告控件中显示查询结果？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:32:12.380

Web 应用程序还是桌面？

我不认为这正是您正在寻找的，但在网络应用程序中，我之前使用过类似以下内容：

```
SqlDataReader reader = cmd.ExecuteReader();
List<string> cols = new List<string>();
for (int i = 0; i < reader.FieldCount; i++)
{
    cols.Add(reader.GetName(i));
}

StringBuilder sb = new StringBuilder();
sb.Append("<table><tr>");
foreach (string s in cols)
{
    sb.Append("<th>"+s+"</th>");
}
sb.Append("</tr>");

while (reader.Read())
{
    sb.Append("<tr>");
    foreach (string s in cols)
    {
        sb.Append("<td>"+reader[s]+"</td>");
    }
sb.Append("</tr>");

}
sb.Append("</table>"); 
```

不知道这是否是最好的方法。它很方便，因为如果你给它一个 excel 扩展名，它会打开一个 html 表格 - 格式和一切 - 所以你可以轻松地提供一个在 excel 中打开的选项。

对于桌面，您可以将列添加到数据网格，然后添加行或在浏览器窗口中打开 hmtl。

对于经典 ASP，实际上还有另一个 SO 答案正是您所需要的：

[https://stackoverflow.com/a/1662143/359135](https://stackoverflow.com/a/1662143/359135)

# jquery - 如何使用 jquery blockUI

> ID：10276940
> 
> 赞同：5
> 
> 时间：2012-04-23T08:04:40.580
> 
> 标签：jquery, jquery-blockui

我想使用 jQuery blockUI，但在他们的[网站上](http://jquery.malsup.com/block/)，他们没有给出要包含的 js，要使用的 css。有人可以给我一个包含完整 js 和 css 的示例，以展示如何使用 jQuery blockUI。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T08:11:29.697

您需要做的就是在包含 jQuery 之后加载[BlockUI](http://malsup.github.com/jquery.blockUI.js)脚本。它不需要任何 CSS 即可工作。

请参阅此小提琴以获得最简单的演示：http: [//jsfiddle.net/ThiefMaster/4FhHK/](http://jsfiddle.net/ThiefMaster/4FhHK/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T08:05:57.093

在 jQuery 参考之后添加[这个文件](http://malsup.github.com/jquery.blockUI.js)

然后使用命令。

# r - R：环境查找

> ID：10276941
> 
> 赞同：6
> 
> 时间：2012-04-23T08:04:58.730
> 
> 标签：r

我对 R 的查找机制有点困惑。当我有以下代码时

```
# create chain of empty environments
e1 <- new.env()
e2 <- new.env(parent=e1)
e3 <- new.env(parent=e2)

# set key/value pairs
e1[["x"]] <- 1
e2[["x"]] <- 2 
```

那么如果我在环境 e3 中寻找“x”，我希望得到“2”。如果我这样做，这有效

```
> get(x="x", envir=e3)
[1] 2 
```

但如果我使用

```
> e3[["x"]]
NULL 
```

有人可以解释其中的区别吗？看起来

```
e3[["x"]] 
```

不仅仅是语法糖

```
get(x="x", envir=e3) 
```

在此先感谢，
斯文

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T08:11:59.580

这些功能是不同的。

`get`搜索环境中的对象以及封闭框架（默认情况下）：

来自`?get`：

*此函数查看名称 x 是否在指定环境中绑定了一个值。如果inherits 为TRUE，并且在指定环境中未找到x 的值，则搜索环境的封闭框架，直到遇到名称x。有关环境结构及其外壳的详细信息，请参阅环境和“R 语言定义”手册。*

相反，`[`默认情况下，运算符不搜索封闭环境。

来自`?'['`：

*$ 和 [[ 都可以应用于环境。只允许字符索引并且不进行部分匹配。这些操作的语义是那些`get(i, env=x, inherits=FALSE)`。*

# winforms - 在 Windows.Forms 中使用 MVP - 演示者

> ID：10276944
> 
> 赞同：0
> 
> 时间：2012-04-23T08:05:06.880
> 
> 标签：winforms, mvp

我有一个关于在 Windows.Forms 应用程序中实现 MVP 模式的问题。我有一个用户控件，它用于 2 种不同的形式。

基本上，应该在哪里声明演示者（每个表单我应该有 2 个不同的演示者，而不是一个用于用户控件的演示者，它能够区分自己采取什么样的行为，具体取决于使用它的表单） -在用户控件或使用它的表单后面的代码中？行为（保存和填充用户控件字段的逻辑）完全不同。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:15:06.127

一个演示文稿可以有多个视图。例如树视图或列表视图或其他任何内容中的目录和文件列表。

所以一个Presenter可以满足多个View的需求。

View 可以有关于如何呈现（转换为相关 UI）Presenter 提供的信息的额外逻辑。

每个 View 都可以私下实例化 Presenter。此外，由于两个视图是同一演示文稿的不同 UI 表示，它们应该被提取到一个通用接口（IXXXView）中，然后可以传递给演示者。

imo，被动视图非常严格地将数据转换为可以连接到 UI 的原始数据类型，使用监督视图将提供更大的灵活性。

# drupal-7 - 视图分类 选择 Brothers 术语

> ID：10276946
> 
> 赞同：0
> 
> 时间：2012-04-23T08:05:13.120
> 
> 标签：drupal-7, drupal-views

我正在使用 Drupal 7。

我有一个页面显示视图，该视图将 url 中的分类术语作为参数。

mywebsite.com/my-view-page/xxx 其中 xxx 是分类术语。

现在我想在这个页面中放一个块，其中列出了与 xxx 具有相同父级的分类术语。

例如，如果这是我的分类：

aaa - yyy - xxx - zzz bbb

在 xxx 页面中，我想要一个包含；yyy xxx zzz

有没有办法做到这一点？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:16:27.123

将“块”显示添加到您的视图中，并为其创建一个上下文过滤器。在视图的“上下文过滤器”部分下，选择您要提供“分类术语：父术语”。

然后，当您设置它时，指定如果过滤器不存在，您希望“提供默认值”并选择“来自 URL 的分类术语 ID”选项，或者，选择“原始值来自URL' 并将其设置为获取第二个路径组件（因此选择'2'），因为这似乎是您要指定术语的地方（我希望它是术语 id，因为这就是它要寻找的. 如果没有，请采纳我的第一个建议！！！！）。

那样有用吗？

# facebook - fb:like 出现在 Safari 的 td 之外

> ID：10276947
> 
> 赞同：0
> 
> 时间：2012-04-23T08:05:14.510
> 
> 标签：facebook, html-table, safari, facebook-like, facebook-social-plugins

我在表格单元格内的页面上使用 Facebook Like 按钮

```
<table style="position:relative;">
  <tr style="position:relative;">
    <td>
      <table  cellpadding='0' style='border:solid 1px black;width:100%;'>
        <tr align='left'>
          <td align='left'>
            <fb:like send="false" layout="standard" width="350"
                     style="height:22px;" show_faces="false"
                     action="like" colorscheme="light"
            ></fb:like>
          </td>
        </tr>
      </table>
    </td>    
  </tr>

  <tr>
    <td align="left" valign="top">SOME TEXT</td>
  </tr>
</table> 
```

在 IE 9 和 Google Chrome 中，它正确显示在设置为表格的黑色边框内。

![截图正确](../Images/e19fd351a25ecc91f7a2a8af8dbada76.png)

但在 Safari 中，它出现在`td`.

![截图错误](../Images/e431467d25e56570c78c91199900d76a.png)

为什么会这样？我试图将 Like Button 样式设置`position`为`relative`相同的东西。Safari 的 CSS 有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:30:41.023

这是因为您在页面上有其他样式。您需要修复示例代码中未提供的样式。

您的代码在 Safari（在 Mac 上）中按预期工作，因此隔离问题应该不难。查看实时示例：[格式化之前](http://jsfiddle.net/Wpju7/)，格式化[之后](http://jsfiddle.net/Wpju7/1/)

# android - Android ImageView 热点映射

> ID：10276955
> 
> 赞同：0
> 
> 时间：2012-04-23T08:06:17.243
> 
> 标签：android, image

我有一个大小为 1024x768 的图像，其中热点映射到在 10" 平板电脑上工作，但是当我在 kindle fire 上运行我的应用程序时，图像大小减小并且热点不起作用。是否有任何公式可以将坐标映射到较小的图像上用更大的图像映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:18:58.677

您没有提供足够的细节来提供准确的答案。

1.  你用什么来显示图像？图像视图？
2.  图像是否缩放/裁剪以保持纵横比？
3.  您是否在触摸侦听器中获取 X 和 Y？
4.  你的热点是用某种命中测试器实现的，比较触摸的 X、Y 和热点定义吗？

假设 ImageView 和一个触摸监听器获取 X 和 Y，那么您需要将热点缩放到您的图像显示的任何分辨率。我最近通过扩展 ImageView 类并覆盖 onMeasure() 回调来做到这一点。在 onMeasure 中，确定图像是横向还是纵向，然后计算图像原始尺寸（指定热点的尺寸）和显示尺寸之间的比例因子。

像这样的东西：

```
 if (this.getWidth() > this.getHeight()) {
     scaleFactor = ((float)this.getWidth() / (float)this.originalBitmapWidth);
 } else {
     scaleFactor = ((float)this.getHeight() / (float)this.originalBitmapHeight);
 }

 for (Hotspot hotspot : hotspots){
     hotspot.setScale(scaleFactor);
 } 
```

# iphone - 在以编程方式填充的 TableView 中不刷新屏幕

> ID：10276959
> 
> 赞同：0
> 
> 时间：2012-04-23T08:06:34.237
> 
> 标签：iphone, objective-c, ios, tableview

当我再次向下和向上滚动时，tableView 中的文本将消失。

![在此处输入图像描述](../Images/ab4dc7cab887aae6c28632b3c4763e51.png) ![在此处输入图像描述](../Images/af4f5b44c5c783502e15176829c55bd4.png)

我的代码是：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [screenDefBuild.elementsToTableView count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];
    }

    ScreenListElements *currentScreenElement = [screenDefBuild.elementsToTableView objectAtIndex:indexPath.row];
    cell.textLabel.text = currentScreenElement.objectName;

    currentRow++;    
    return cell;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableView = [[UITableView alloc] initWithFrame:self.view.bounds];
    [tableView setDataSource:self];
    [self.view addSubview:tableView];
} 
```

我还想将我的表格视图填充到整个屏幕。（顶部的灰色表带）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:24:44.757

我不知道你在用这个变量做什么

```
currentRow++; 
```

但无论你用它做什么，我敢打赌它会破坏你的代码。

每当一个单元格即将出现在屏幕上时，无论它之前是否出现在屏幕上，`UITableView`都会调用。`cellForRowAtIndexPath`当您向下滚动然后向上滚动时，此变量将增加超出数据的范围，因此您会得到空单元格。

您需要设计此方法，使其可以随时在表格视图中创建任何单元格。您不能依赖制作单元格的顺序，并且通过滚动，您将不得不一遍又一遍地制作相同的单元格。仅用于`indexPath`确定您当前应该制作的单元格。

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:36:21.807

回答问题的第二部分 - 灰色表带。您正在将表格视图添加到当前视图，因此您应该使用原点的 size 属性，`self.view.frame`而不是原点。您希望将其设置为 0,0。

改变

```
tableView = [[UITableView alloc] initWithFrame:self.view.bounds]; 
```

到

```
CGRect viewFrame=self.view.frame;
viewFrame.origin=CGPointZero;
tableView = [[UITableView alloc] initWithFrame:viewFrame]; 
```

至于你问题的第一部分 - 这很奇怪，因为你似乎做的一切都正确。我可能建议的一件事是`[tableView reloadData];`在`viewDidLoad`.

# c# - 有没有办法将数据库记录视为对象

> ID：10276967
> 
> 赞同：2
> 
> 时间：2012-04-23T08:07:44.167
> 
> 标签：c#, sql

我来自 Objective-C 编程背景，因此习惯于使用 Core Data 来存储我的数据。核心数据允许您为数据库中的每个项目定义字段（属性），然后您可以将其作为代码中的对象进行引用。

我想知道 C# 是否有类似的处理方式。

**多一点背景**

我的winform上有一个树视图。树视图允许人们添加和删除新节点。我创建了 TreeNode 的子类，因此我可以针对每个节点存储更多信息，但我希望将所有用于添加/删除的数据库事务作为该子类的一部分完成。例如，当我从具有子节点的树中删除一个节点时，我可以通过调用 Remove 轻松地将其从树中删除（知道它也会删除所有子节点），但我还需要数据库来保留这些更改。

那么，如上所述 - 有没有办法将数据库记录视为对象？

希望这足够清楚！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T08:13:32.090

实体框架、[LLBLGEN](http://www.llblgen.com/defaultgeneric.aspx)、[NHibernate](http://nhforge.org/Default.aspx)等等 ORM

我建议查看[ADO.NET 实体框架初学者指南](http://msdn.microsoft.com/en-us/data/ee712907)

[EntityFramework（Nuget 包）](http://nuget.org/packages/EntityFramework) （Nuget 是安装 EF 等包的首选方式）

另外，看看 Sam Saffron 的我是[如何学会停止担心并编写自己的 ORM](http://samsaffron.com/archive/2011/03/30/How+I+learned+to+stop+worrying+and+write+my+own+ORM)和[Small is Beautiful - .NET Micro ORMs](http://www.diplo.co.uk/blog/2011/8/15/small-is-beautiful-net-micro-orms.aspx)

# list - 无法添加指向整个 div 部分的链接

> ID：10276970
> 
> 赞同：4
> 
> 时间：2012-04-23T08:08:10.790
> 
> 标签：list, html, hyperlink, tinymce, anchor

我在 Joomla 2.5.4 中遇到了 TinyMCE 的问题。我已经尝试了几天来添加指向 div 部分的链接（例如 <a href="#"> <div> something< </div> </a>）但失败了，锚从 HTML 中被剥离部分，因为 TinyMCE 认为这在 HTML4 中是错误的。经过 3 天的研究后，我放弃了，我使用了无序列表而不是 div。

现在，当我尝试添加指向列表项的链接时（例如 <a href="#"> <li> <p> something </p> </li> </a>）TinyMCE 重新排列所有内容并将锚点移动到里面列表项（如 <li> <a href="#"> <p> something </p> &=lt;/a> </li>）。

我已经尝试了从 valid_elements : " *[* ]" 到 text filter: No Filtering 的几乎所有东西，但我的想法很少。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:41:42.053

尝试使用 TinyMCE 的 html5 选项：[http ://www.tinymce.com/tryit/html5_formats.php](http://www.tinymce.com/tryit/html5_formats.php)

点击“查看源代码”，看看他们是如何做到的。主要是tinyMCE.init中的这个选项：

```
schema: "html5", 
```

# wpf - WPF 中的休眠 - 一个会话和错误

> ID：10276972
> 
> 赞同：0
> 
> 时间：2012-04-23T08:08:26.717
> 
> 标签：wpf, nhibernate, session

我们的应用程序包含包含客户列表和客户票证的导航栏。

[主窗口的图像](http://s15.postimage.org/6yj1noqrf/mainwindow.png)

When customer in left list selected - in right list loading tickets. NHibernate Session 在 MainWindow 启动时打开。在 ViewModel 中的 BackgroundWorker 上为每个客户加载票证。现在列表中约有 5000 名客户。当我快速选择一个客户，然后选择下一个客户时 - 如果第一个客户的票证列表尚未加载 - 我从 nhibernate 收到错误。错误不同：集合被刷新处理了两次，发现对集合的共享引用以及未在网格中加载的票证列表。我们不想在主 UI 线程中加载工单，因为这个冻结 UI 和工单可能会很重要。在我们的应用程序中如何正确使用 NHibernate 会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:57:11.353

我会按照[这里的描述做](http://msdn.microsoft.com/en-us/magazine/ee819139.aspx)

在后台线程中打开一个无状态会话以加载主网格的数据并为每个子窗口打开一个新会话并使用 changetracking 加载所选项目

# php - 使用 php 中的表格输入数字并打印结果

> ID：10276974
> 
> 赞同：1
> 
> 时间：2012-04-23T08:08:31.627
> 
> 标签：php

我正在准备期末考试，我遇到了这个问题：

```
write a PHP script which reads a positive integer
and displays the sum, the number, sum N*N and N!
for example n=6 will display sum= 1,3,6,10,15,21
and N*N = 1,4,9,16,25,36
N!=1,2,6,24,120,720. 
```

我已经设法做到了，我已经研究过了，你可以使用内置的阶乘和求和方法，我已经尝试过，但是当我输出它时我得到了空白页。

到目前为止，这是我的代码：

```
<html>
   <body>
      <form action="values.php" method="post" >
         num:<input type="text" name="num" size ="5"/>
         <input type = "submit" value = "Submit number" />

      <table border = "2">
        <th> Number </th>
        <th> Sum </th>
        <th> N*N </th>
        <th> N! </th>

        </tr>
     <?php
        $num=$_POST["num"];
        if ($num==0)
            $num="";
        else
        {
           $sum=0;
           for($i=0; $i<=$num; $i++){
           $sum=$sum+$i;
        }
     }

          for ($number = 1; $number <=6; $number++)
          {
            $total=0;
            $num=(int)$_POST['num'];
            $total=$total+$num;

               $root = sqrt($number);
               $sum =($number*$total);
               $ntn =($number*($total*$total));
               $fact =($number-1);

               print("
               <tr align = 'center'>
               <td> $number </td>
               <td> $sum </td>
               <td>$ntn </td>
               <td>$fact</td>
               </tr>\n");
          }
    ?>
</table>

</body> 
```

任何帮助，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:20:31.197

工作代码：

你似乎没有理解这个问题。“总和”列是“直到 i 的所有数字的总和”，其中 i 的范围从 0 到 $num。

N*N 表示“i 的平方”，最后一个表示“i 的阶乘”。

```
<html>
   <body>
      <form action="values.php" method="post" >
         num:<input type="text" name="num" size ="5"/>
         <input type = "submit" value = "Submit number" />

      <table border = "2">
        <th> Number </th>
        <th> Sum </th>
        <th> N*N </th>
        <th> N! </th>

        </tr>
     <?php
        $num=$_POST["num"];
        if ($num==0){
            $num="";
     }

$sum=0;
$fact=1;
          for ($number = 1; $number <=$num; $number++)
          {

           $sum=$sum+$number;
               $ntn =$number*$number;
               $fact =$number*$fact;

               print("
               <tr align = 'center'>
               <td> $number </td>
               <td> $sum </td>
               <td>$ntn </td>
               <td>$fact</td>
               </tr>\n");
          }
    ?>
</table>

</body> 
```

# vb.net - 无法删除 DataGridView 中的记录

> ID：10276976
> 
> 赞同：0
> 
> 时间：2012-04-23T08:08:48.297
> 
> 标签：vb.net

当我在 DataGridView 中修改和删除数据时，出现错误：

```
The record cannot be deleted or changed because table 'Table Name' includes related records. 
```

但我可以添加新数据，但不能修改和删除数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:12:43.107

您需要先删除“子”记录。如果您不这样做，这些记录将被“孤立”，这正是警告您的错误消息。最简单的方法是在数据库中的表之间的关系上设置[级联删除属性。](http://msdn.microsoft.com/en-us/library/aa933119%28v=sql.80%29.aspx)

# java - 使用 Jboss 4.2.3 的多个数据库

> ID：10276979
> 
> 赞同：1
> 
> 时间：2012-04-23T08:09:06.460
> 
> 标签：java, hibernate, jboss-4.2.x

我们将 Jboss 4.2.3 与 EJB 和休眠一起使用。目前我们在`persistence.xml`文件中定义了 3 个数据库连接（一个用于读取（tx-local），一个用于写入（no-tx），一个用于统计（no-tx）），当我们添加第四个数据库连接时，它也是（ no-tx) 并将几个实体映射到它，机器开始显示异常负载。如果我们移除这个连接（仍然没有人使用它），负载就会恢复正常。

我想这是 JBoss 的某种配置问题，但我不确定。

任何帮助将不胜感激。

谢谢。

这是`ds.xml`文件内容：

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- $Id: feedback-ds.xml 71535 2008-04-01 07:05:03Z adrian@jboss.org $ -->
<!--  Datasource config for MySQL using 3.0.9 available from:
http://www.mysql.com/downloads/api-jdbc-stable.html
-->

<datasources>
  <no-tx-datasource>
    <jndi-name>FeedbackDS</jndi-name>
    <connection-url>jdbc:mysql://m6sdb:3306/m6sFeedbacks?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true</connection-url>
    <driver-class>com.mysql.jdbc.Driver</driver-class>
    <user-name>root</user-name>
    <password>password</password>
    <min-pool-size>10</min-pool-size>
    <!-- The maximum connections in a pool/sub-pool -->
    <max-pool-size>1000</max-pool-size>
    <property name="hibernate.show.sql" value="true"></property> 
    <idle-timeout-minutes>10</idle-timeout-minutes>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter</exception-sorter-class-name>
    <!-- should only be used on drivers after 3.22.1 with "ping" support    -->
    <valid-connection-checker-class-name>org.jboss.resource.adapter.jdbc.vendor.MySQLValidConnectionChecker</valid-connection-checker-class-name>
    <metadata>
       <type-mapping>mySQL</type-mapping>
    </metadata>
  </no-tx-datasource>
</datasources> 
```

# string - 如何从数字列表中获取字符串？

> ID：10276982
> 
> 赞同：2
> 
> 时间：2012-04-23T08:09:41.843
> 
> 标签：string, list, erlang

我有一个 Erlang 符号列表：`[104, 105, 106, 107 ...]`. 如何从此列表中获取字符串：`"hijk..."`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:12:31.740

Erlang 中不存在字符串作为数据类型。Stings 只是字符列表。

`[104, 105, 106, 107]`并且`"hijk"`完全等价。

事实上，如果你在 shell 中输入原始列表，你会得到“字符串”：

```
1> [104, 105, 106, 107].   
"hijk" 
```

# asp.net - 如何使用 radgrid 中的两个命令按钮重定向到 radgrid 中的两个不同页面？

> ID：10276985
> 
> 赞同：0
> 
> 时间：2012-04-23T08:10:02.350
> 
> 标签：asp.net, vb.net, visual-studio-2008, telerik, radgrid

我有一个 radgrid1 和内部 radgrid 项目模板我有两个 asp.net imagebutton 即 imagebutton1 和 imagebutton2 ....

我想要当我点击 id 为 id 的 Selected radgrid 项目然后点击 Image Button1 后我重定向到 ~/book.aspx?id=1

如果我点击 imagebutton2 然后我重定向到 ~/details.aspx?id=1

注意：项目的 id 将根据所选的 radgrid 行动态更改。

我已经使用简单的 Gridview 完成了它，但我无法使用 radgrid 执行此操作。

请帮帮我……！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:26:22.317

请检查下面的代码片段。

.aspx

```
<MasterTableView DataKeyNames="Id"
            >
            <Columns>

                <telerik:GridTemplateColumn>
                    <ItemTemplate>
                        <asp:ImageButton  ID="ImageButton1" runat="server"  CommandName="BookPage"/>
                        <asp:ImageButton  ID="ImageButton2" runat="server"  CommandName="DetailPage"/>
                    </ItemTemplate>
                </telerik:GridTemplateColumn>

            </Columns>
        </MasterTableView> 
```

.asp.cs

```
 protected void RadGrid1_ItemCommand(object sender, GridCommandEventArgs e)
{
    GridDataItem item = e.Item as GridDataItem;

    string strId = item.GetDataKeyValue("Id").ToString();

    if (e.CommandName == "BookPage")
    {
        Response.Redirect("~/book.aspx?id=" + strId);
    }
    else if (e.CommandName == "DetailPage")
    {
        Response.Redirect("~/details.aspx?id=" + strId);
    } 
```

}

# monitoring - 如何使用 nagios 监控 elasticsearch

> ID：10276989
> 
> 赞同：10
> 
> 时间：2012-04-23T08:10:34.237
> 
> 标签：monitoring, elasticsearch, nagios

我想使用 nagios 监控弹性搜索。基本上，我想知道弹性搜索是否启动。

我想我可以使用 elasticsearch Cluster Health API（[见这里](http://www.elasticsearch.org/guide/reference/api/admin-cluster-health.html)）

并使用我返回的“状态”（绿色、黄色或红色），但我仍然不知道如何使用 nagios（nagios 在一台服务器上，而 elasticsearc 在另一台服务器上）。

还有另一种方法吗？

**编辑：** 我刚刚发现[-check_http_json](http://www.dark.ca/2011/03/04/nagios-plugin-to-parse-json-from-an-http-response/)。我想我会试试的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T12:28:28.503

过了一会儿 - 我已经设法使用 nrpe 监控弹性搜索。我想使用 elasticsearch Cluster Health API - 但由于安全问题，我无法在另一台机器上使用它......所以，在监控服务器中，我创建了一个新服务 - check_command 是`check_command check_nrpe!check_elastic`。现在在弹性搜索所在的远程服务器中，我使用以下内容编辑了 nrpe.cfg 文件：

```
command[check_elastic]=/usr/local/nagios/libexec/check_http -H localhost -u /_cluster/health -p 9200 -w 2 -c 3 -s green 
```

这是允许的，因为这个命令是从远程服务器运行的 - 所以这里没有安全问题......

有用！！！我仍然会尝试我在我的 qeustion 中发布的这个 check_http_json 命令 - 但就目前而言，我的解决方案已经足够好了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T23:46:50.557

在尝试了这篇文章中的建议之后，我编写了一个简单的[check_elasticsearch](https://github.com/orthecreedence/check_elasticsearch)脚本。它返回的状态为`OK`、`WARNING`和 ，`CRITICAL`对应于集群健康响应中的“status”参数（分别为“green”、“yellow”和“red”）。

它还从健康页面中获取所有其他参数，并以标准 Nagios 格式将它们转储出来。

享受！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-03T23:09:06.367

无耻插件：[https ://github.com/jersten/check-es](https://github.com/jersten/check-es)

您可以将它与 ZenOSS/Nagios 一起使用来监控集群运行状况、数据索引和单个节点堆使用情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-14T09:17:57.900

您可以使用这个很酷的 Python 脚本来监控您的 Elasticsearch 集群。此脚本检查您的 IP:port 以了解 Elasticsearch 状态。可以在[此处](https://github.com/stack72/nagios-elasticsearch)找到用于监控 Elasticsearch 的一个和多个 Python 脚本。

```
#!/usr/bin/python
from nagioscheck import NagiosCheck, UsageError
from nagioscheck import PerformanceMetric, Status
import urllib2
import optparse

try:
    import json
except ImportError:
    import simplejson as json

class ESClusterHealthCheck(NagiosCheck):

    def __init__(self):

        NagiosCheck.__init__(self)

        self.add_option('H', 'host', 'host', 'The cluster to check')
        self.add_option('P', 'port', 'port', 'The ES port - defaults to 9200')

    def check(self, opts, args):
        host = opts.host
        port = int(opts.port or '9200')

        try:
            response = urllib2.urlopen(r'http://%s:%d/_cluster/health'
                                       % (host, port))
        except urllib2.HTTPError, e:
            raise Status('unknown', ("API failure", None,
                         "API failure:\n\n%s" % str(e)))
        except urllib2.URLError, e:
            raise Status('critical', (e.reason))

        response_body = response.read()

        try:
            es_cluster_health = json.loads(response_body)
        except ValueError:
            raise Status('unknown', ("API returned nonsense",))

        cluster_status = es_cluster_health['status'].lower()

        if cluster_status == 'red':
            raise Status("CRITICAL", "Cluster status is currently reporting as "
                         "Red")
        elif cluster_status == 'yellow':
            raise Status("WARNING", "Cluster status is currently reporting as "
                         "Yellow")
        else:
            raise Status("OK",
                         "Cluster status is currently reporting as Green")

if __name__ == "__main__":
    ESClusterHealthCheck().run() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-05T11:03:17.797

我在一百万年前写了这个，它可能仍然有用：[https ://github.com/radu-gheorghe/check-es](https://github.com/radu-gheorghe/check-es)

但这实际上取决于您要监视的内容。上述措施：

*   如果 Elasticsearch 响应 HTTP
*   如果摄取率下降到定义的水平以下
*   如果文档总数下降定义的级别

但当然还有更多有趣的东西。从查询时间到 JVM 堆使用情况。我们在这里写了一篇关于最重要的博客文章：[https ://sematext.com/blog/top-10-elasticsearch-metrics-to-watch/](https://sematext.com/blog/top-10-elasticsearch-metrics-to-watch/)

Elasticsearch 为所有这些提供了 API，因此您可以使用通用的[check_http_json](https://github.com/phrawzty/check_http_json)来获取所需的指标。或者，您可能想要使用诸如[Sematext Monitoring for Elasticsearch 之](https://sematext.com/blog/monitoring-elasticsearch-with-sematext/)类的东西，它可以开箱即用地获取这些指标，然后[将阈值/异常警报转发到 Nagios](https://sematext.com/docs/integration/alerts-nagios-integration/)。（披露：我为 Sematext 工作）

# c# - 动态属性生成与智能感知一起使用

> ID：10276998
> 
> 赞同：1
> 
> 时间：2012-04-23T08:11:11.387
> 
> 标签：c#, dynamic, .net-4.0, intellisense, customization

我想创建一个“动态”类。此类应从数据库加载其属性。当然，对于我亲爱的同事来说，一切都需要智能感知。

我已经尝试过将动态类和 customtypediscriptor 混合使用。但没有什么效果很好。

我开始怀疑：是否可以生成一个包含我的类的库，并且在每次构建时，我的类属性都会从数据库中更新？