# StackOverflow 问答 12260000-12260999

# c++ - 打开我的应用程序时如何使背景模糊？

> ID：12260001
> 
> 赞同：0
> 
> 时间：2012-09-04T08:57:27.657
> 
> 标签：c++, visual-c++

当我打开我的应用程序时，我必须使（桌面）背景模糊。我该怎么做，请帮助我提供提示或链接..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:04:36.047

1.  截图。
2.  对截图位图应用一些模糊（例如高斯）。
3.  显示以处理后的屏幕截图为内容的全屏窗口。
4.  在全屏窗口的顶部显示您的窗口。

详细信息取决于您使用的操作系统和技术。

如果*调暗*而不是*模糊*是可以的，您可以只显示一个黑色的全屏矩形，其 alpha 小于 1（如 Seçkin 的回答中所建议的）。

虽然我必须作为用户添加它，但我会反感对我这样做的应用程序。除非它是核导弹发射控制应用程序（或用户错误导致类似严重后果的应用程序），否则我将卸载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:44:33.990

如果我是你，我会创建一个横跨整个屏幕的半透明矩形来实现这种效果。在模糊的眼镜后面看也是类似的：世界并不模糊，只是眼镜让它感觉模糊。

# c++ - connect() 返回带有 ipv6 地址的“无效参数”

> ID：12260003
> 
> 赞同：9
> 
> 时间：2012-09-04T08:57:34.787
> 
> 标签：c++, c, arguments, connect

我有这个简单的客户端-服务器应用程序对。代码非常简单，我只使用新的、建议的方法，如 getaddinfo 等，一切都适用于 ipv4。即使对于 ipv6 环回 (::1) 它也有效。当涉及到其他一些 ipv6 地址时，问题就开始了......我在网络中有两台机器，当我传递它们的 ipv4 地址时一切正常，但是当我给我的客户端 ipv6 地址时，我在连接函数上得到一个错误：无效参数. 嘿，我不是已经知道了吗？我愿意！当我尝试**ping6**这个 ipv6 地址时，我得到了同样的错误：

> 连接：无效的参数

但是有一种方法可以克服这个障碍——人们应该选择一个带有 -I 开关的接口，从那时起它就可以顺利运行了。但是我怎样才能在我的客户端应用程序中实现同样的效果呢？我该怎么办？我的客户端代码如下所示：

```
struct addrinfo hints;
struct addrinfo *server;

memset(&hints, 0, sizeof(hints));
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_STREAM;

int status;
if((status = getaddrinfo(argv[1], argv[2], &hints, &server) != 0))
{
    perror("getaddrinfo error");
    return 1;
}

int sock_fd;
struct addrinfo *ptr;
for(ptr=server;ptr!=NULL;ptr=ptr->ai_next)
{
    if( (sock_fd = socket(ptr->ai_family,ptr->ai_socktype,ptr->ai_protocol)) == -1)
    {
        perror("socket error");
        continue;
    }
    if( connect(sock_fd, ptr->ai_addr,ptr->ai_addrlen) == -1 )
    {
        perror("connect error");
        continue;       
    }
    break;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T10:01:25.567

以 开头的地址`ff...`是多播地址。将流连接到多播地址不起作用。

以 开头的地址`fe80...`是链路本地地址，它们有一个与之关联的接口标识符。尝试查看`sockaddr`返回的 from `getaddrinfo`，该`scope`字段是否填写？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-30T21:37:41.543

您需要指定 IPv6 ping 的接口（即 -I eth0）：

```
ping6 -I eth0 fe80::208:54ff:fe34:22ae 
```

使用本地链路地址进行 IPv6 ping，需要定义它必须发送/接收数据包的设备 - 每个设备都有一个本地链路地址。

尝试不这样做，将导致错误消息，如：

```
--> # ping6 fe80::208:54ff:fe34:22ae 
connect: Invalid argument 
```

在这种情况下，您必须另外指定接口，如下所示：

```
--> # ping6 -I eth0 fe80::208:54ff:fe34:22ae
PING fe80::208:54ff:fe34:22ae(fe80::208:54ff:fe34:22ae) from fe80::208:54ff:fe34:22ae eth0: 56 data bytes
64 bytes from fe80::208:54ff:fe34:22ae: icmp_seq=0 ttl=64 time=0.027 ms
64 bytes from fe80::208:54ff:fe34:22ae: icmp_seq=1 ttl=64 time=0.030 ms
64 bytes from fe80::208:54ff:fe34:22ae: icmp_seq=2 ttl=64 time=0.036 ms 
```

您必须在客户端应用程序中遵循一种类似的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:08:41.500

我的建议是你在接口/网络连接中打开IP6协议，如果仍然有错误，另外扔掉ip4协议。

在我的 Linux Box 上，当我的 ip4 接口处于活动状态并且我的应用程序尝试将 ip4 接口与 ip6 设置一起使用时，也会发生这种情况。这同样适用于 Windows。

如果有不清楚的地方问。

# iphone - 如何将 NSDate 的本地化日期作为字符串？

> ID：12260005
> 
> 赞同：2
> 
> 时间：2012-09-04T08:57:52.267
> 
> 标签：iphone, ios, ipad, nsdate, nsdateformatter

我有一个 NSDate 对象，并且必须创建一个标签，以短的 3 字符样式指示一周中的哪一天，例如“Mon”、“Tue”、“Wed”……并本地化为任何语言的短表示。

日期格式化程序 EEE 有 3 个字符，但它如何翻译成像中文这样可能只有一个字符的语言？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T09:08:40.690

```
NSDate *date = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EEE"];
NSString *strDate = [formatter stringFromDate:date];
[formatter release];
//Commented out the following line as weekday can be of one letter (requirement changed)
//strDate = [strDate substringToIndex:3];   //This way Monday = Mon, Tuesday = Tue 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T21:59:06.057

要使用正确的语言环境，您需要在使用该方法`dateFormat`的实例上设置 。`NSDateFormatter`[`+ dateFormatFromTemplate:options:locale:`](http://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDateFormatter/dateFormatFromTemplate%3aoptions%3alocale%3a)

```
NSDate *date = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = [NSDateFormatter dateFormatFromTemplate:@"EEE" options:0 locale:[NSLocale currentLocale]];
NSLog(@"Weekday using %@: %@", [[NSLocale currentLocale] localeIdentifier], [dateFormatter stringFromDate:date]);

// Test what Chinese will look like without changing device locale in settings
dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"zh_CN"];
NSLog(@"Weekday using zh_CN: %@", [dateFormatter stringFromDate:date]); 
```

这打印：

> 平日使用 en_US：周四
> 平日使用 zh_CN ：周四

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:03:08.353

这将打印您需要的内容：

```
NSDate *date = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EEEE"];
NSString *day = [formatter stringFromDate:date];
[formatter release];
if ([day length] > 3) day = [day substringToIndex:3];
NSLog(@"%@", day); 
```

# forms - Joomla 表单域用户前端

> ID：12260007
> 
> 赞同：1
> 
> 时间：2012-09-04T08:57:53.630
> 
> 标签：forms, joomla

我正在尝试使用 JFormFieldUser::getInput 作为我的 Joomla 表单的输入。

在后端（使用超级用户登录），当我调用此方法时，它会在单击时生成一个漂亮的“选择用户”框，显示所有用户的列表以供选择。

我一直在尝试在前端表单上使用用户表单字段（以超级用户身份登录）。结果有些令人困惑和不受欢迎。生成了一个“选择用户”链接，但是当单击它时，结果是加载了超级用户“用户配置文件”：不是所有用户的列表。

为什么会这样，以及如何让“选择用户”像在后端一样显示完整的用户列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-16T20:54:49.590

Joomla 3（来自您的字段定义）：

```
 <field name="field_name" type="sql" label="COM_FIELD_LABEL"
        sql_select="id,name"
        sql_from="#__users"
        value_field="name"
        key_field="id"
        description="" 
        header="DROP_DOWN_HEADER"
        required="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:09:43.500

我没有太多运气。相反，我创建了自己的组件并添加了来自 com_users 的内容。工作了一个款待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T13:20:36.903

[显然](http://www.seblod.com/v2/forum/Fields--Plugins/43268-Field-Author-Content-x-Field-User-joomla-library---JForm.html)做不到

> JForm (Joomla) User 字段是您可以在 Joomla 文章表单中看到的 Joomla 核心字段，用于选择用户（带有用户列表的灯箱）。注意这个字段不能在前端使用，因为Joomla核心不在前端管理它......我们经常用一个选择动态字段替换前端的这个字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-09T16:47:46.357

可以相当简单地完成，但有一些重大限制 - 取决于您的用例。

*   用户必须登录到后端（即使您正在尝试访问信息前端）。如果他们没有登录，它将提示登录并退出模式:(
*   用户必须具有用户管理器的权限

然后将 复制`\libraries\cms\form\field\user.php`到您选择的字段位置（在模式子目录中）并将其重命名为`user2.php`. 使类名`JFormFieldModal_Users2`和 $type='Modal_Users2'。

如果需要，不要忘记将新路径添加到表单 .xml。类型将是“modal_users2”。

最后一步。在 user2.php 中，更改：

```
 $link     = 'index.php?option=com_users&amp;view=users&amp;layout=modal&amp;tmpl=component&amp;field=' . $this->id
            . (isset($groups) ? ('&amp;groups=' . base64_encode(json_encode($groups))) : '')
            . (isset($excluded) ? ('&amp;excluded=' . base64_encode(json_encode($excluded))) : ''); 
```

到

```
 $link     = 'administrator/index.php?option=com_users&amp;view=users&amp;layout=modal&amp;tmpl=component&amp;field=' . $this->id
            . (isset($groups) ? ('&amp;groups=' . base64_encode(json_encode($groups))) : '')
            . (isset($excluded) ? ('&amp;excluded=' . base64_encode(json_encode($excluded))) : ''); 
```

有点hacky，但符合我的目的。

这里不那么 hacky，但不那么迷人的解决方案：[SQL 表单域类型](https://joomla.stackexchange.com/a/2407/5699)

# kendo-ui - Kendo UI - 具有自定义自动完成功能的网格

> ID：12260012
> 
> 赞同：1
> 
> 时间：2012-09-04T08:58:33.460
> 
> 标签：kendo-ui

我正在考虑使用 Kendo UI 的 Grid。

但是，我有点不确定它的灵活性和定制性。我真正需要的是在线编辑，但同时我想完全控制它。例如，我们开发了一个自定义的自动完成功能（使用 jquery 和 javascript）。并且想在 Kendo UI 的 Grid 中使用这个自定义自动完成功能。我不知道是否有人已经使用过这种方法，因为我在 Kendo UI 中找不到这种级别的自定义。

谢谢你。

约瑟夫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:04:53.727

在使用内联编辑实现剑道网格时，可以为每个单独的字段指定自定义编辑器。例如，可以使用这种配置来完成：

```
 columns: [
                    { field:"ProductName",title:"Product Name" },
                    { field: "Category", width: "150px", editor: categoryDropDownEditor },
                    { field: "UnitPrice", title:"Unit Price", format: "{0:c}", width: "150px" },
                    { command: "destroy", title: " ", width: "110px" }],
                editable: true 
```

categoryDropDownEditor 的代码如下所示：

```
function categoryDropDownEditor(container, options) {
                    $('<input data-text-field="CategoryName" data-value-field="CategoryName" data-bind="value:' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            autoBind: false,
                            dataSource: {
                                type: "odata",
                                transport: {
                                    read: "http://demos.kendoui.com/service/Northwind.svc/Categories"
                                }
                            }
                        });
                } 
```

这里发生的是 categoryDropDownEditor 函数为该特定字段创建编辑器的实际标记。在您的情况下，唯一要做的就是实现 AutoComplete 小部件而不是下拉列表。此示例取自 kendo UI 的[演示页面](http://demos.kendoui.com/web/grid/editing-custom.html)

我希望回答你的问题！

# java - 执行内存中的 jar

> ID：12260016
> 
> 赞同：5
> 
> 时间：2012-09-04T08:58:47.613
> 
> 标签：java, process, jar, inter-process-communicat

假设我有一个 java 进程，它以字节 [] 的形式从受信任进程接收可运行的 jar 文件，有没有办法调用它而不必将 jar 文件写入磁盘然后调用它（启动一个新的运行 jar 的进程）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T09:21:40.593

这是您可以完成它的一种方法：

1.  `ByteArrayInputStream`从`byte []`收到的创建一个。
2.  现在用于[`JarInputStream`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/jar/JarInputStream.html)创建 jar 文件的内存表示。

    `ByteArrayInputStream bis = new ByteArrayInputStream(byteArray); JarInputStream jis = new JarInputStream(bis);`

3.  这样你就可以将 jar 加载到内存中。

4.  现在您可以使用**自定义类加载器**来进一步处理它。这是您可以参考的[一个示例。](http://diablohorn.wordpress.com/2010/11/05/java-in-memory-class-loading/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:06:30.130

最简单的方法是将其写入 ramdisk 并完全避免内存中的想法。

# javascript - c# webapplication调用webservice在服务器上写文件

> ID：12260017
> 
> 赞同：0
> 
> 时间：2012-09-04T08:58:49.390
> 
> 标签：javascript, c#, web-applications, file-io

前两个函数运行良好，但第三个函数有一些错误不清楚。这是所有代码，您能帮我完成最后一个功能吗？

WebService1.asmx 中的代码

```
using System.ComponentModel;
    using System.Web.Services;
    using System.Text;
    using System.IO;

namespace WebApplication1
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [ToolboxItem(false)]
    [System.Web.Script.Services.ScriptService]
    public class WebService1 : System.Web.Services.WebService
    {

        [WebMethod]
        public string HelloWorldFun1()
        {
            return "Hello World";
        }
        [WebMethod]
        public string HelloWorldFun2(string str)
        {
            return "Hello World,"+str;
        }
        [WebMethod]
        public string Write_to_File(string str)
        {
            StreamWriter _testData = new StreamWriter(Server.MapPath("~/output.txt"), true);
            _testData.WriteLine(str); // Write the file.
            _testData.Flush();
            _testData.Close(); // Close the instance of StreamWriter.
            _testData.Dispose(); // Dispose from memory. 
            return str;
        }

    }
} 
```

Default.aspx 中的代码

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>WebService</title>
    <script type="text/javascript" language="javascript">
        function func1()
        {        
        WebApplication1.WebService1.HelloWorldFun1(onSuccess,onFail,'Span1');
        }
        function func2()
        {
        var txt=document.getElementById('Text1').value;
        WebApplication1.WebService1.HelloWorldFun2(txt,onSuccess,onFail,'Span2');
        }
        function write()
        {
        var txt = document.getElementById("Span1").innerHTML;
        WebApplication1.WebService1.Write_to_File("kkkkkkkkkk",onSuccess,onFail,'Span3');
        }
        function onSuccess(value,context)
        {
        document.getElementById(context).innerHTML=value;
        }
        function onFail(value)
        {
        alert(value);
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true">
    <Services>
        <asp:ServiceReference Path="~/WebService1.asmx"  />
    </Services>
    </asp:ScriptManager>
    <input id="Button1" type="button" value="button"  onclick="func1()" />&nbsp;&nbsp;&nbsp;&nbsp;<span id="Span1"></span>
    <hr />
    <input id="Text1" type="text" /><input id="Button2" type="button" value="button"  onclick="func2()" /><span id="Span2"></span>
    </form> 
    <input id = "WTF" type = "button" value = "write" onclick ="write()"/><span id="Span3"></span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:06:56.423

1) 错误是什么？（运行时异常\堆栈跟踪或其编译错误？）

2) _testData.Close(); // 关闭 StreamWriter 的实例。_testData.Dispose(); // 从内存中释放。

调用 Close() 就足够了（这类似于 Dispose，因此您要处理两次......不是错误，但仍然很高兴知道。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:07:21.100

Web 服务似乎没问题，并且可以正常工作（否则您会遇到异常）。Default.aspx 似乎有问题。

我建议使用 JQuery 来调用 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T01:23:37.700

我已经知道原因了。应该有一些名为“write()”的定义函数。我只是将名称“write（）”更改为“write_to（）”，然后效果很好。感谢您的回答，维塔利卡斯普勒。

# iphone - 清除 uibutton 标题并再次重置

> ID：12260021
> 
> 赞同：0
> 
> 时间：2012-09-04T08:58:57.737
> 
> 标签：iphone, uibutton

我关注评论并尝试解决我的问题，但仍然无法正常工作。

当我在模拟器上运行测试演示时，我得到了这个：

[运行演示项目视图](http://1.busbus.sinaapp.com/1.png)

我点击了test2，我想在清除按钮标题之前更改按钮标题，但我

得到这个 ：

[在我点击 test2 按钮后](http://1.busbus.sinaapp.com/2.png)

单击另一个按钮时，我无法清除按钮标题。

任何人都可以帮忙？？

这是我的代码

```
-(void)addbutton
{
    for (int i=0; i<3; i++)
    {
        UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake((i*100), 0, 100, 100)];
        button.titleLabel.text = @"";
        [button setTag:i];
        [button setTitle:[self.demoDataArray objectAtIndex:i] forState:UIControlStateNormal];
        [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        button.backgroundColor = [UIColor clearColor];
        [button addTarget:self action:@selector(setButtonTitle:) forControlEvents:UIControlEventTouchUpInside];
        [self.demoView addSubview:button];
    }
}

-(IBAction)setButtonTitle:(id)sender
{
    if ([sender tag] == 0)
    {
        self.demoDataArray = [[NSArray alloc] initWithObjects:@"test5", @"test6", @"test7", @"test8", nil];
        [self addbutton];
    }
    else if([sender tag] == 1)
    {
        self.demoDataArray = [[NSArray alloc] initWithObjects:@"test9", @"test10", @"test11", @"test12", nil];
        [self addbutton];
    }
    else if([sender tag] == 3)
    {
        self.demoDataArray = [[NSArray alloc]initWithObjects:@"test13", @"test14", @"test15", @"test16", nil];
        [self addbutton];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:26:50.807

试试这个

```
- (IBAction)firstbtn:(UIButton *)sender {

  [secondbtn setTitle:@"" forState:UIControlStateNormal];

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:16:14.467

每次按下任何按钮时，您都会实例化新按钮并将它们添加到其他按钮之上。您可能只想更新现有按钮。试试这个`-addButton`代替你的方法：

```
-(void)addbutton
{
    for (int i=0;i<3;i++)
    {
        NSInteger tag = i+1;
        UIButton *button = (UIButton *)[self.view viewWithTag:tag];
        if (!button)
        {
            button = [[UIButton alloc] initWithFrame:CGRectMake((i*100), 0, 100, 100)];
            [button addTarget:self action:@selector(setButtonTitle:) forControlEvents:UIControlEventTouchUpInside];
            [button setTag:tag];
            [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
            button.backgroundColor = [UIColor clearColor];
            [self.demoView addSubview:button];
        }

        button.titleLabel.text = @""; // Not actually sure you need this...
        NSString *titleText = nil;
        if (i < self.demoDataArray.count)
            titleText = [self.demoDataArray objectAtIndex:i];
        [button setTitle:titleText forState:UIControlStateNormal];

    }
} 
```

现在按钮被实例化，给定一个目标和动作，标记，并仅当它不存在时才添加到按钮层次结构中。之后每次点击按钮时，只会更新标题。

**另外，非常重要:** : 为了`-viewWithTag:`工作，你必须为你的按钮使用一个不等于 0 的标签，默认标签 - 否则按钮的超级视图将被返回。这意味着您需要在按钮处理程序中进行以下更改，该处理程序已经存在检查标签的错误（检查 3 而不是 2）。增加标签以从 1 开始并以 3 结束，如下所示：

```
-(IBAction)setButtonTitle:(id)sender
{
    if ([sender tag] == 1)
    {
        self.demoDataArray = [[NSArray alloc] initWithObjects:@"test5",@"test6",@"test7",@"test8", nil];
        [self addbutton];
    }
    else if([sender tag] == 2)
    {
        self.demoDataArray = [[NSArray alloc] initWithObjects:@"test9",@"test10",@"test11",@"test12", nil];
        [self addbutton];
    }
    else if([sender tag] == 3)
    {
        self.demoDataArray = [[NSArray alloc]initWithObjects:@"test13",@"test14",@"test15",@"test16", nil];
        [self addbutton];
    }
} 
```

该方法也可以使用一些清理来消除重复的代码，并且无论如何在这里使用`switch`语句可能更合适。但这既不是这里也不是那里。

好的，这可能会让您启动并运行。我没有测试或编译这个，所以如果你对编译器有一些你自己无法解决的问题，请告诉我，我会看看我是否能发现问题。

# c# - 从 TableLayoutPanel 中访问组合框的 SelectedIndex

> ID：12260027
> 
> 赞同：2
> 
> 时间：2012-09-04T08:59:36.177
> 
> 标签：c#, .net, unit-testing, moq, tablelayoutpanel

我有以下设置：

```
ComboBox cb1 = new ComboBox();
ComboBox cb2 = new ComboBox();
ComboBox cb3 = new ComboBox();
ComboBox cb4 = new ComboBox();
ComboBox cb5 = new ComboBox();

TableLayoutPanel tlpComboBox = new TableLayoutPanel();
tlpComboBox.ColumnCount = 5;
tlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));
tlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));
tlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));
tlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));
tlpComboBox.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 20F));

tlpComboBox.Controls.Add(cb1, 4, 0);
tlpComboBox.Controls.Add(cb2, 3, 0);
tlpComboBox.Controls.Add(cb3, 2, 0);
tlpComboBox.Controls.Add(cb4, 1, 0);
tlpComboBox.Controls.Add(cb5, 0, 0); 
```

然后我试图检查 tlpComboBox 中组合框的顺序。要使用文本框执行此操作，我执行了以下操作：

```
for (i = 0; i < 5; i++)
{
    Assert.AreNotEqual(tlpText.Controls[i].Text.ToString(), i.ToString());
} 
```

不幸的是，在 Controls[i] 之后无法访问 SelectedIndex。在使用组合框时，我对为什么有点困惑。

```
for (i = 0; i < 5; i++)
{
    Assert.AreNotEqual(tlpComboBox.Controls[i]. "SelectedIndex isnt accessible", i.ToString());
} 
```

有任何想法吗？

编辑：

[http://i.imgur.com/7lhzE.jpg](http://i.imgur.com/7lhzE.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:02:38.743

你需要投射`Controls[i]`到`ComboBox`

```
//sample meta code written in notepad
for (i = 0; i < 5; i++)
{
    Assert.AreNotEqual(
        ((ComboBox )(tlpComboBox.Controls[i])).SelectedIndex , 
        i.ToString());
} 
```

发生这种情况`Controls[i]`是因为类型（我猜）`Control`没有该`SelectedIndex`属性。

# c - 访问内存区域时出现分段错误

> ID：12260030
> 
> 赞同：1
> 
> 时间：2012-09-04T08:59:44.440
> 
> 标签：c, memory, memory-management, malloc

> **可能重复：**
> [无效的读/写有时会产生分段错误，有时不会](https://stackoverflow.com/questions/8641478/invalid-read-write-sometimes-creates-segmentation-fault-and-sometimes-does-not)

我正在用 malloc 做一些实验，并在 linux m/c 上编写了这个非常小的程序：

```
int main(){
    int *p=NULL;
    p = (int *)malloc(10);
    *(p + 33*1000) = 5;
    free(p);
    return 0;
   } 
```

该程序没有给出分段错误，但如果我将第 5 行更改为此 *(p + 34*1000) = 5; 然后它给出了分段错误。在我的系统上，页面大小为 4K。

我无法解释为什么它在 p 之后在大约 128Kb（34*1000 大约是 128K）处给出分段错误。

如果有人可以从 linux 内存管理的角度来解释这一点，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:03:27.433

您正在访问超出您为`p`两者分配的内存`*(p+33*1000)`，`*(p+34*1000)`这是**未定义的行为**。您无法推理，因为它可能“工作”或崩溃或任何事情都可能发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:04:28.577

您正在修改您自己尚未分配的内存 - 您正在写入的地址超出了数组的限制。每当您写入超出数组范围时，您都会面临段错误的风险 - 这取决于内存位置。取决于地址，它可能不会出现段错误，但这绝不是一件好事，结果将是不可预测的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T09:05:11.107

这个程序表现出未定义的行为（根据 C 标准），严格来说，没有什么可以解释的。

语言标准没有以任何方式描述内存管理是或应该如何在任何特定平台上的低级别实现。尽管您没有明确分配某些内存区域，但它们仍然可以访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:41:23.883

可能是系统中的可用内存。在这种情况下，所有 <= 33 * 1000 将通过，所有 >= 34 *1000 将失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T09:07:42.340

为 10 个整数分配空间后，您只能通过`*(p+0)`, `*(p+1)`, ... , `*p(p+8)`,取消引用这 10 个整数`*p(p+9)`。没有更多的你超出了你分配的范围。

在其他地方取消引用可能意味着您正在尝试使用无效指针，因此会出现分段错误。

# javascript - 如何实现定位背景滚动/显示效果？jQuery插件可用吗？

> ID：12260031
> 
> 赞同：10
> 
> 时间：2012-09-04T08:59:47.530
> 
> 标签：javascript, jquery, html, css, effect

我想知道是否有人知道是否有 jquery 插件，或者如何实现这种在时尚标签[krystalrae.com的“收藏”部分可见的效果](http://krystalrae.com/)

[截屏视频](https://dl.dropbox.com/u/396112/Videos/krystal-rae-scroll-effect.mov)

任何朝着正确方向的提示或轻推将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-04T09:11:27.357

你可以用 CSS 做到这一点。您所需要的只是一些与窗口高度相同的 div，具有不同的背景图像和属性`background-attachment: fixed;`。

```
#one
{
    background: url(http://images.buzzillions.com/images_products/07/02/iron-horse-maverick-elite-mountain-bike-performance-exclusive_13526_100.jpg);
    background-repeat: no-repeat;
    background-position: center center;
    background-attachment:fixed;
}

#two
{
    background: url(http://img01.static-nextag.com/image/GMC-Denali-Road-Bike/1/000/006/107/006/610700673.jpg);
    background-repeat: no-repeat;
    background-position: center center;
    background-attachment:fixed;
} 
```

[http://jsfiddle.net/Kyle_/mbhLN/](http://jsfiddle.net/Kyle_/mbhLN/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:02:50.200

[**在这里**](http://smashinghub.com/7-jquery-parallax-and-scrolling-effect-plugins.htm)你会找到你的插件！

这是视差效应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:09:00.403

探索这些东西的一个好方法是使用 firefox 中的[firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)插件或 chrome 中的开发者控制台打开页面，然后查看页面源代码。

如果您尝试某些事情，然后发布您遇到的问题，它也会有所帮助。

您还可以使用 jQuery 插件来实现该效果：

1.  [http://gsgd.co.uk/sandbox/jquery/easing](http://gsgd.co.uk/sandbox/jquery/easing)
2.  [http://www.smoothdivscroll.com](http://www.smoothdivscroll.com)

# ms-access - 错误 3219 - 无效操作

> ID：12260032
> 
> 赞同：4
> 
> 时间：2012-09-04T08:59:51.073
> 
> 标签：ms-access, vba

我尝试在我的 Access 项目中编写一个查询，但是这个运行时错误发生在 SQL 查询所在的行中。这是我的代码：

```
Private Sub Befehl80_Click()

  Dim rst As DAO.Recordset
  Set rst = CurrentDb.OpenRecordset("SELECT DISTINCT tb_KonzeptDaten.DFCC,  tb_KonzeptDaten.OBD_Code AS Konzept_Obd,tb_KonzeptDaten.DFC INTO Test_Table FROM tb_KonzeptDaten", dbOpenDynaset)

  Me.txtDs = rst.RecordCount

End Sub 
```

请告诉我如何解决这个问题以及为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:01:48.517

sql 是一个动作查询，它​​创建一个表。您无法从操作查询中打开记录集。如果要运行操作查询，可以说：

```
Set db=CurrentDB
ssql="SELECT DISTINCT tb_KonzeptDaten.DFCC,  " _
    & "tb_KonzeptDaten.OBD_Code AS Konzept_Obd,tb_KonzeptDaten.DFC " _
    & "INTO Test_Table FROM tb_KonzeptDaten"
db.Execute ssql, dbFailOnerror

RecordsUpdated=db.RecordsAffected 
```

# telerik - 为什么我们需要在使用 Telerik 控件时更改 web.config 中的处理程序

> ID：12260033
> 
> 赞同：0
> 
> 时间：2012-09-04T08:59:51.013
> 
> 标签：telerik

我有一个问题，为什么我们需要在使用 Telerik 控件时将处理程序添加到 web.config 文件

以下代码的意义是什么？

```
<system.web>
<httpHandlers>
<add verb="GET,HEAD" path="asset.axd" validate="false" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
</httpHandlers>
</system.web> 
```

另一个问题是，为什么我们要先删除资产处理程序，然后立即再次添加它？

```
<handlers>
<remove name="asset" />
<add name="asset" preCondition="integratedMode" verb="GET,HEAD" path="asset.axd" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
</handlers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:20:02.810

.axd 文件是 HTTP 处理程序文件，Telerik 可能使用它们来管理他们的脚本和资产，例如他们的皮肤的图像和样式表。此处理程序必须在 web.config 中注册，以便在浏览器请求此文件时执行，并确保将其定向到适当的 HTTP 处理程序。然后，幕后的 Telerik 控件可以安全地假定资产可用。

如果您查看应用程序的生成 html 源代码，您可能会看到对asset.axd?blah==3dfijefi 的引用，如果您查看此文件的内容，您会确切地看到正在发生的事情（尽管可能会缩小）。

至于他们为什么建议删除并再次添加，我怀疑是为了停止可能引用旧版本等的父 web.config 文件......？真的只是一个安全网。

# actionscript-3 - flex 4 DropDownListSkin 将 itemDestructionPolicy 绑定到变量值

> ID：12260035
> 
> 赞同：1
> 
> 时间：2012-09-04T08:59:59.707
> 
> 标签：actionscript-3, flex4

`itemDestructionPolicy`有两个可能的值：`never`和`auto`

我试图将值绑定到参数而不是写入值，但出现此错误：

> `itemDestructionPolicy`属性值无效。

代码示例：

```
package com.hp.esb.skin.light.dropdownlist 
{
    public class ItemDestructionPolicy 
    {
        public static const NEVER:String = "never";
        public static const AUTO:String = "auto";
    }
} 
```

下拉列表皮肤：

```
<s:PopUpAnchor id="popUp" displayPopUp.normal="false" displayPopUp.open="true" includeIn="open"
               itemDestructionPolicy="{hostComponent.destructionPolicy}"
               popUpPosition="below" popUpWidthMatchesAnchorWidth="true"> 
```

下拉列表：

```
[Bindable]
public var destructionPolicy:String = ItemDestructionPolicy.NEVER; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:56:03.960

itemDestructionPolicy 它是编译时属性，因此您无法绑定它。

# java - 如何在java中创建自定义注释？

> ID：12260037
> 
> 赞同：16
> 
> 时间：2012-09-04T09:00:09.720
> 
> 标签：java, annotations

我想在 java 中为`DirtyChecking`. 就像我想使用这个注释比较两个字符串值，比较后它会返回一个`boolean`值。

例如：我将放置`@DirtyCheck("newValue","oldValue")`属性。

假设我做了一个界面：

```
 public @interface DirtyCheck {
    String newValue();
    String oldValue();
 } 
```

**我的问题是**：

1.  我在哪里创建一个类来创建一个比较两个字符串值的方法？我的意思是，这个注释如何通知我必须调用这个方法？
2.  如何检索此方法的返回值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-04T09:11:12.650

首先，您需要标记注解是针对类、字段还是方法。假设它是用于方法：所以你在注释定义中写了这个：

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface DirtyCheck {
    String newValue();
    String oldValue();
} 
```

接下来你必须编写假设`DirtyChecker`类，它将使用反射来检查方法是否有注释并做一些工作，例如说如果`oldValue`和`newValue`相等：

```
final class DirtyChecker {

    public boolean process(Object instance) {
        Class<?> clazz = instance.getClass();
        for (Method m : clazz.getDeclaredMethods()) {
            if (m.isAnnotationPresent(DirtyCheck.class)) {
                DirtyCheck annotation = m.getAnnotation(DirtyCheck.class);
                String newVal = annotation.newValue();
                String oldVal = annotation.oldValue();
                return newVal.equals(oldVal);
            }
        }
        return false;
    }
} 
```

干杯，迈克尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:12:09.063

回答您的第二个问题：您的注释不能返回值。处理您的注释的类可以对您的对象做一些事情。例如，这通常用于记录。我不确定使用注释检查对象是否脏是否有意义，除非您想在这种情况下抛出异常或通知某种`DirtyHandler`.

对于您的第一个问题：您确实可以自己花一些精力来找到它。这里有足够的关于 stackoverflow 和 web 的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-28T17:56:03.367

**CustomAnnotation.java**

```
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface CustomAnnotation {
     int studentAge() default 21;
     String studentName();
     String stuAddress();
     String stuStream() default "CS";
} 
```

如何使用 Java 中的 Annotation 字段？

**TestCustomAnnotation.java**

```
package annotations;
import java.lang.reflect.Method;
public class TestCustomAnnotation {
     public static void main(String[] args) {
           new TestCustomAnnotation().testAnnotation();
     }
     @CustomAnnotation(
                studentName="Rajesh",
                stuAddress="Mathura, India"
     )
     public void testAnnotation() {
           try {
                Class<? extends TestCustomAnnotation> cls = this.getClass();
                Method method = cls.getMethod("testAnnotation");

                CustomAnnotation myAnno = method.getAnnotation(CustomAnnotation.class);

                System.out.println("Name: "+myAnno.studentName());
                System.out.println("Address: "+myAnno.stuAddress());
                System.out.println("Age: "+myAnno.studentAge());
                System.out.println("Stream: "+myAnno.stuStream());

           } catch (NoSuchMethodException e) {
           }
     }
}
Output:
Name: Rajesh
Address: Mathura, India
Age: 21
Stream: CS 
```

[参考](http://javaexplorer03.blogspot.in/2016/07/create-annotation-in-java.html)

# php - Symfony2：ClassACE 和 ObjectACE

> ID：12260048
> 
> 赞同：2
> 
> 时间：2012-09-04T09:01:10.480
> 
> 标签：php, symfony, acl

ACL 类对该类的所有对象都有权限吗？还是只对自己有权限而不对对象有权限？让我解释一下 Symfony2：

我有一个实体订单和 5 个创建的订单。如果我向 Order 类授予所有者权限，我有权编辑所有对象吗？

```
$objectIdentity = new ObjectIdentity('class', 'Acme\DemoBundle\Entity\Order');
$securityIdentity = new RoleSecurityIdentity($role->getRole());
$acl = $aclProvider->createAcl($objectIdentity);
$acl->insertClassAce($securityIdentity, MaskBuilder::MASK_OWNER);
$aclProvider->updateAcl($acl); 
```

**编辑** 实际上我有两个问题：

***第一个问题：*** 我遇到的问题是当我使用 RoleSecurityIdentity 时。它对我不起作用。如果我使用 UserSecurityIdentity 对每个对象都非常有效。这个例子工作正常：

```
 foreach($orders as $order) {
        $objectIdentity = ObjectIdentity::fromDomainObject($salesOrder);
        $acl = $aclProvider->createAcl($objectIdentity);
        $securityIdentity = new UserSecurityIdentity(
          'admin', 
          'Acme\CoreBundle\Entity\User');
        $acl->insertObjectAce($securityIdentity, MaskBuilder::MASK_OWNER);
        $aclProvider->updateAcl($acl);
    } 
```

用户管理员拥有 OWNER 授权！

这个例子不起作用：

```
 foreach($orders as $order) {
        $objectIdentity = ObjectIdentity::fromDomainObject($salesOrder);
        $acl = $aclProvider->createAcl($objectIdentity);
        $securityIdentity = new RoleSecurityIdentity('ROLE_ADMIN');
        $acl->insertObjectAce($securityIdentity, MaskBuilder::MASK_OWNER);
        $aclProvider->updateAcl($acl);
    } 
```

具有 ROLE_ADMIN 的用户没有对对象的授权！

***第二个问题：*** 如果我将 OWNER 授予类 Order 我没有授予访问实体的权限：让我解释一下：

```
 $objectIdentity = new ObjectIdentity('class', 'Neventum\PaymentBundle\Entity\SalesOrder');
    $acl = $aclProvider->createAcl($objectIdentity);
    $securityIdentity = UserSecurityIdentity::fromAccount($admin);
    $acl->insertClassAce($securityIdentity, MaskBuilder::MASK_OWNER);
    $aclProvider->updateAcl($acl); 
```

我需要管理员用户始终可以访问 Order 实体的所有对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:59:45.673

我已经修好了！

问题出在用户实体的 getRoles 方法上。

之前是这样的：

```
function getRoles() {
    return $this->roles->toArray();
} 
```

我已更改为：

```
function getRoles()
{
    $roles = array();
    foreach($this->userRoles as $userRole) {
        $roles[] = $userRole->getRole();
    }
    return $roles;
} 
```

如果有人知道我为什么会感激

# ios - SQLite 是否能够更新或插入

> ID：12260053
> 
> 赞同：-1
> 
> 时间：2012-09-04T09:01:17.020
> 
> 标签：ios, xcode, sqlite

我在 Xcode 中遇到了一个问题：我尝试了很多周将数据添加到 sqlite 数据库中，并且我在 Google 上搜索了很多结果，但没有一个可以提供完整而清晰的教程，我怀疑他们中的大多数都使用 .db 但不是 sqlite该sqlite无法插入或更新，只能读取数据，还是有其他方法可以做到这一点？

如果你们有的话，请在答案中附上带有教程的链接。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:06:21.973

> 我怀疑sqlite无法插入或更新，只能读取数据

当然你可以在 SQLite 中插入数据。这是一个和其他数据库一样的数据库，只是更轻一些，并且嵌入在与您的应用程序相同的进程中，而不是通常情况下的不同进程（这都意味着 SQLite 不能回答多个客户端，并且您除了您的应用程序之外，不必在计算机上安装任何东西）。

这是插入文档：[http ://www.sqlite.org/lang_insert.html](http://www.sqlite.org/lang_insert.html)

这是许多其他教程中的一个：[http ://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application](http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application)

（事实上​​我只是在谷歌上搜索“sqlite xcode insert”，我以前不知道这个教程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T16:53:58.207

Sunny 已经两天了，我一直在努力找出如何在 iOS 上将数据插入到 sqlite。您应该做的第一件事是告诉 SQLite 将数据保存在哪里。默认情况下，如果您在手机上运行您的应用程序，它会将 sqlite 文件放在只读根目录中。要解决它，您应该这样做：

```
-(NSString *)GetDocumentDirectory{
    fileMgr = [NSFileManager defaultManager];
    homeDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    return homeDir;
} 
```

当你想插入数据时，哪个 fileMgr 是`NSFileManager`，接下来是 homeDir `NSString`，首先你应该给它你的 SQLite 根，这是第一行，它检查是否`sqlite3_open`并且将开始插入你的数据：

```
-(void)InsertRecords:(NSMutableString *)myData{
NSString *dbPath = [self.GetDocumentDirectory stringByAppendingPathComponent:@"YOUR SQLITE FILE NAME.sqlite"];
    const char *dbpath = [dbPath UTF8String];
    sqlite3 *contactDB;
    sqlite3_stmt *statement;

    if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
    {
        NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO tableName (tableColumn) VALUES (\"%@\")", myData];
const char *insert_stmt = [insertSQL UTF8String];

        sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
            sqlite3_bind_text(statement, 1, [myData UTF8String], -1, SQLITE_TRANSIENT);
} 
else {
            NSLog(@"error");
}
        sqlite3_finalize(statement);
        sqlite3_close(contactDB);
    }
} 
```

希望能帮助到你 ：）

# macos - cocoa：从 Mail.app 读取邮件

> ID：12260054
> 
> 赞同：0
> 
> 时间：2012-09-04T09:01:23.107
> 
> 标签：macos, cocoa

我想制作一个从 Mail.app 读取电子邮件并显示它们的 Mac 应用程序，但我找不到有关如何从 Mail.app 读取邮件的任何信息。我的问题是：

1.  如何从 Mail.app 阅读电子邮件？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:47:34.780

Applescript 可能是最简单的方法，例如：

```
tell application "Mail"
    set theMessage to message 1 of inbox
    set theBody to content of theMessage as rich text
end tell 
```

运行脚本`NSAppleScript`，快速脏示例（无错误处理等）：

```
NSString *theSource = @"tell application \"Mail\"\n"
"set theMessage to message 4 of inbox\n"
"set theBody to content of theMessage as rich text\n"
"end tell\n"
"return theBody";
NSAppleScript* theScript = [[NSAppleScript alloc] initWithSource:theSource];
NSAppleEventDescriptor* theDescriptor = [theScript executeAndReturnError:NULL];
NSLog(@"%@", theDescriptor); 
```

替代使用`osascript`through`NSTask`来运行脚本。

**编辑**（回复评论）

遍历所有消息并将其正文添加到`theMessages`列表中。

```
set theMessages to {}
tell application "Mail"
    set theCount to get the count of messages of inbox
    repeat with theIncrementValue from 1 to theCount by 1
        set TheMessage to message 1 of inbox
        set theBody to content of TheMessage as rich text
        set end of theMessages to theBody
    end repeat
end tell
return theMessages 
```

# sql - 如何在不在数据库上运行脚本的情况下查看脚本中的语法错误列表？

> ID：12260062
> 
> 赞同：0
> 
> 时间：2012-09-04T09:02:10.313
> 
> 标签：sql, sql-server, tsql, ssms, sql-server-2008

简单的问题：

在 SSMS 中运行 Debug 是否实际上在服务器上执行脚本？

如何在不在数据库上运行脚本的情况下查看脚本中的语法错误列表？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:19:35.400

使用`Query -> Parse`（也是蓝色复选标记图标）。

来自 MSDN -[数据库引擎查询编辑器（SQL Server Management Studio）](http://msdn.microsoft.com/en-us/library/ms177264.aspx)：

> Parse - 检查所选代码的语法。如果未选择任何代码，则检查“查询编辑器”窗口中所有代码的语法。

# weblogic - 在 Jdeveloper 中查看集成 WebLogic 服务器的流量

> ID：12260066
> 
> 赞同：2
> 
> 时间：2012-09-04T09:02:32.477
> 
> 标签：weblogic, jdeveloper, oracle-adf

有什么方法可以监控 Jdeveloper 中集成 WebLogic 服务器的流量。我知道这至少可以通过网络嗅探器实现，尽管我没有以这种方式成功。但是没有办法通过IDE吗？

非常感谢您，安吉洛·汉内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:53:28.820

转到工具-> Http 分析器。然后在您的浏览器上，您需要将代理服务器设置为 Http Analyzer 的代理服务器。要查看端口，请转到 Tools->Preferences->Http Analyser。

如果您只想查看 HTTP 请求和响应，使用 Firebug 或 Chrome 的开发者工具可能更容易。

可以在此处找到更详细和说明性的说明：http: [//nickaiva.blogspot.com/2010/10/jdeveloper-11g-making-use-of-http.html](http://nickaiva.blogspot.com/2010/10/jdeveloper-11g-making-use-of-http.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T19:17:21.440

这是一个演示，向您展示如何在 JDeveloper 中设置 HTTP Analyzer 以监控客户端和 WebLogic 之间的 HTTP 流量： [https ://blogs.oracle.com/shay/entry/monitoring_adf_pages_round_trips](https://blogs.oracle.com/shay/entry/monitoring_adf_pages_round_trips)

# version-control - 如何在 Jenkins 中限制对 Cobertura 覆盖报告的访问

> ID：12260072
> 
> 赞同：2
> 
> 时间：2012-09-04T09:02:48.720
> 
> 标签：version-control, jenkins, code-coverage, cobertura, source-code-protection

我在多用户 Linux 环境中使用 Jenkins 进行 CI，并使用 Cobertura 跟踪代码覆盖率。CVS 用于版本控制。每次“cvs commit”都会触发一次构建。构建包括运行单元测试和生成代码覆盖率。

问题如下。创建代码覆盖率报告时，也会创建所有单元测试源文件的逐行覆盖率。这在编写和运行单元测试时很好并且非常有用，但它也允许每个可以访问网络的人查看项目源文件。

我的问题是如何限制此逐行覆盖率报告仅对一组 Jenkins 用户或类似用户可见，而对其他人不可见。

我看到 Jenkins 允许配置不同的“安全领域”。目前我使用“詹金斯自己的用户数据库”。我看到还有“Unix 用户/组数据库”，这听起来可能会解决我的问题，但我只是想在尝试该选项之前询问其他人的经验和意见。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:22:51.077

最好将报告工件导出到支持访问控制的其他位置。它可以是 wiki 或 Apache 实例等。更好地保护 Jenkins 实例而不是花费宝贵的时间来保护它的某些部分。

没有这样的功能意味着不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:48:21.447

Jenksing 不提供细粒度的授权。此外，Cobertura 报告只是一组静态 html，因此您可以研究 Web 容器配置以找到定义过滤器等的方法。

我想说最安全的解决方案是使用另一个 jenkins 实例来处理敏感信息。你可以把它放在配置了 HTTPS 的 Apache 之后，然后好好睡一觉。顺便说一句，有 JobImport 插件[https://wiki.jenkins-ci.org/display/JENKINS/Job+Import+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Job+Import+Plugin)以避免重复。

# javascript - Javascript 被注入到我的 Joomla 网站？

> ID：12260073
> 
> 赞同：3
> 
> 时间：2012-09-04T09:02:56.373
> 
> 标签：javascript, joomla, sql-injection

今天我在我的主页上发现了一个外来的 JavaScript 以及一个我不认识的网站的反向链接（虽然在查看我的主页时反向链接不可见，但他们以某种方式将其定位，使其隐藏，但搜索引擎仍能找到它）。

我想知道我的 Joomla 网站是如何被入侵的？有没有你能想到的可能？将来如何保护我的网站免受这种攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:10:19.610

首先，您使用的是哪个版本的 joomla。？

有一些可能性可以破解 1.5.23 的 Joomla 版本或被破解的一些类似版本，并且在所有 js 文件中附加了一些错误的脚本，或者可能是 .htaccess 文件中的一些重写 url 条件。防止问题的最佳选择是更新您的 Joomla 版本并更改您的管理员和 FTP 密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:35:18.813

我不知道如何，但如果你想消除它可能是在 index.php 文件中，检查那里。

网站根目录/模板/yourtemplate/index.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:09:56.630

可能有很多原因，需要检查一些事项：

*   你在共享服务器上吗？它安全吗？
*   有人泄露了您的密码吗？
*   您的 Joomla 版本是最新的吗？
*   您是否在您的 Web 服务器上运行任何其他 PHP 应用程序？它们安全吗？

仅仅因为 Joomla 似乎受到了影响并不意味着它一定是妥协的切入点 - 检查一切。确保您的软件是最新的。禁用运行您的网站不需要的任何东西。使用 .htaccess 保护文件和文件夹。确保您自己的计算机尽可能安全且已打补丁并保持最新。确保您使用的是最新版本的 PHP。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:13:44.693

已安装的 joomla 扩展*（插件、模块、组件和模板）*还可能包含非常不安全的文件，并且可能执行危险的文件活动，例如在您的站点上更新、重命名、删除和创建文件。

所以我的建议是阅读 joomla 论坛并据此管理文件的权限。

# mysql - 加入 select 时的 where 子句

> ID：12260078
> 
> 赞同：0
> 
> 时间：2012-09-04T09:03:12.083
> 
> 标签：mysql, join

我需要获得所有期间和当月的付款金额。有两个表：类别和交易。

交易：

```
id  int(11)                         
category    varchar(32)                          
dttm_added  datetime                    
minus   float               
minus_currency  varchar(32) 
```

类别：

```
id  int(11)                 
key varchar(32)                          
name    varchar(50)                          
type    varchar(1) 
```

这是我的查询：

```
select  `key`, `id`, `name`, minus_month,month_cur
                                from `categories` as ct

                                left join (
                                select  `category` as tr_ct_m, date_format(`dttm_trans`, '%Y%m') as dat, sum(`minus`) as minus_month, `minus_currency` as month_cur from `transactions`  where dat = date_format(now(), '%Y%m')
                                ) as tr_m on tr_m.tr_ct_m = ct.key 
                                where `type` = '-' 
```

我需要在加入之前检查 select 中的子句，因为在减月的总和之后，所有日期都变为 Null。帮助请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:29:16.313

不确定我是否理解正确，请尝试以下操作：

```
select  `ct`.`key`, `ct`.`id`, `ct`.`name`, tr_m.minus_month,tr_m.month_cur from 
 ( select *   from `categories` where `type` = '-') as ct
left join 
 ( select  `category` as tr_ct_m, date_format(`dttm_trans`, '%Y%m') as dat, 
     sum(`minus`) as minus_month, `minus_currency` as month_cur from `transactions`  
     where dat = date_format(now(), '%Y%m')
 ) as tr_m on tr_m.tr_ct_m = ct.key 
```

# objective-c - 登录视图控制器最佳实践

> ID：12260091
> 
> 赞同：2
> 
> 时间：2012-09-04T09:03:47.313
> 
> 标签：objective-c, ios, login, segue, uistoryboardsegue

这不是一个具体的编码问题，我只是在寻找最佳实践，因为我觉得我目前正在做的事情似乎可以优化。

我正在编写一个需要用户登录的 iOS 应用程序。

我编写了一个用户身份验证 PHP Web 服务，它根据 HTTP POST 请求的电子邮件和密码参数返回 JSON。我有在客户端处理成功和失败的方法。

目前，当应用程序启动时，用户会看到一个登录视图控制器。成功登录后，对“home”视图控制器执行基本的推送 segue，此时显示类似于“hey welcome xxx”的内容。

如果用户已经在设备上进行了一次身份验证，我想保留他们的详细信息，并在启动时自动加载“主”视图控制器。

你认为我应该将登录视图控制器呈现为顶部的模式吗？或者我目前的设置还可以吗？或者有更好的方法吗？我在这里的知识差距很大。

另外，如何在启动时加载不同的根视图控制器而不是故事板中设置的内容？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:50:08.427

我将从应用程序委托的应用程序中展示一个模态视图控制器：didFinishLaunchingWithOptions: 方法

就像是

[self.window.rootViewController presentModalViewController:signInViewController Animation:NO]; 之后做这个

[self.window makeKeyAndVisible]; 然后当您完成登录视图控制器时，您可以像处理任何模态视图控制器一样将其关闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:29:43.127

> 另外，如何在启动时加载不同的根视图控制器而不是故事板中设置的内容？

好吧，如果你选择在你的 segue 之上显示一个模式登录视图控制器，这根本不是问题；也许你应该试试这个，因为它是处理登录视图的一种非常标准的方法，而且非常简单。

否则，如果您想使用您当前的设计，我会首先检查存储的凭据是否仍然正常，然后（如果可以）我会简单地从登录视图控制器向主控制器执行推送...

# wicket - Wicket - FileUploadField、Ajax 和预览

> ID：12260092
> 
> 赞同：1
> 
> 时间：2012-09-04T09:03:47.360
> 
> 标签：wicket, asyncfileupload

我使用 Wicket 1.5，我需要使用 FileUploadField 构建一个组件来加载图像。

我需要一个 Ajax 行为来在选择图像后预览图像（不提交整个表单）。

在谷歌上搜索，我发现当我选择文件时这个事件匹配：

```
AjaxEventBehavior choose = new AjaxEventBehavior("onChange"){
      private static final long serialVersionUID = 1L;
      @Override
      protected void onEvent(AjaxRequestTarget target) {
        Request request = RequestCycle.get().getRequest();
      }
}; 
```

我需要的是放入需要的小面板中的图像流：

```
byte[] imgBytes 
```

显然我需要相同的流来填充用于数据库存储的 PropertyModel。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:00:18.767

您需要使用`AjaxFormSubmitBehavior`（将在给定事件上提交整个表单）或`AjaxFormComponentUpdatingBehavior`（将仅提交一个表单组件。我不确定后者是否适用于文件上传，试一试。您可以随时使用以前的。

在您的 FileUploadField 模型中，您会找到一个（列表）FileUpload - 查看您获得的方法，有输入流和其他可用的东西，因此您可以对数据执行几乎任何操作。

# php - Symfony2：@Template 注解和 PHP 模板

> ID：12260093
> 
> 赞同：1
> 
> 时间：2012-09-04T09:03:59.967
> 
> 标签：php, symfony, twig

当我使用 Symfony 时，我用相应动作的名称来命名我的视图，这样我就可以使用`@Template`不带任何参数的注解来渲染视图。

```
/**
 * @Route("/{id}/show", name="entity_show")
 * @Template()
 */
public function showAction($id) {
} 
```

这仅适用于 Twig 吗？`@Template`当我使用 PHP 视图时，有没有办法不必指定视图的名称作为参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:18:13.080

除了 Patt 所写的内容之外，您还必须为注解的每次使用指定引擎：

```
@Template(engine="php") 
```

# ios - 返回 UIModalTransitionStyle

> ID：12260095
> 
> 赞同：0
> 
> 时间：2012-09-04T09:04:18.650
> 
> 标签：ios, uinavigationcontroller, transition, back, uimodaltransitionstyle

这就是我想要做的：我有一个基于 navigationController 的应用程序和许多不同的视图。假设在第三个视图上，我想使用 UIModalTransitionStyleCoverVertical 查看视图 4。我已经使用以下代码完成了它：

```
-(void)changeView4{
    View4 *screen = [[View4 alloc]initWithNibName:nil bundle:nil];
    screen.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:screen animated:YES];    
} 
```

在视图 4 上，我有一个返回视图 3 的按钮，但问题是当我按下它时，View3 不显示导航控制器，所以我无法返回视图 2。有人可以帮忙吗我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:13:55.970

当您“返回”到您的第三个视图时，您实际上并没有返回到您之前显示的第三个视图。相反，您创建一个*新*的第三个视图，并将其呈现*在*您的第四个视图之上。此时，您的视图堆栈如下所示：

```
View 3 // don't want this!
View 4
View 3 // want to get back to here!
View 2
View 1 
```

而不是创建一个新`View3`实例，您应该使用以下内容*关闭现有的第四个视图：*

```
// Inside View4
- (IBAction)dismissView4:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

这应该让您回到之前的第三个视图，其中应该显示导航栏和相应的后退按钮。

# python - 克隆 Mac OS X sparsebundle，使用 shell 脚本打印带/秒速率

> ID：12260097
> 
> 赞同：0
> 
> 时间：2012-09-04T09:04:26.020
> 
> 标签：python, bash, sed, awk

我正在使用 Carbon Copy Cloner 克隆我的硬盘驱动器，以准备全新安装 Mountain Lion。该过程似乎停留在从 robottinosino.sparsebundle 图像中复制带上。

为了检查“某物”是否在移动，我使用了这个非常粗糙的 CLI 脚本：

```
rsync -n -avv --delete /Users/robottinosino/robottinosino.sparsebundle/ /Volumes/AppleSSD_Clone_2012-09-03/Users/robottinosino/robottinosino.sparsebundle/ | grep -v ' is uptodate$' | grep bands | wc -l 
```

我模拟`rsync`但不运行它（-n 选项），我过滤掉确认波段相同的行，仅选择描述仍需要复制的波段的行并计算仍待处理的波段数。

现在我想知道这个过程进展的速度有多快，说“每秒多少个波段”，因为它已经有几天了......如果它可以在它之前完成，我不想停止它周末。如果不能在周末之前完成，我最好现在停止它，因为无论如何我都必须中止。

假设我将上面的 hack 定义为 function x() { ... } 并使用这种可憎的方法来计算“bands/second”：

```
start_seconds=$(date +%s); bands_at_start=$(x); sleep 6; bands_at_end=$(x); end_seconds=$(date +%s); total_seconds=$((end_seconds-start_seconds)); total_bands=$((bands_at_start-bands_at_end)); bands_per_second=$((total_bands/total_seconds)); echo $bands_per_second 
```

这给出了垃圾结果。

问题是我在做整数除法吗？我可以在 Bash 中进行浮点/双除吗？有没有更正常的方式使用 shell 脚本来做到这一点？

我是初学者，不要贬低我。在此先感谢您的帮助。

编辑：我正在尝试这个来规避整数除法：

```
bands_per_second=$(echo "scale=10; $total_bands/$total_seconds" | bc); 
```

但是必须有更好的方法在 Bash/shell 脚本或其他一些脚本工具中执行此计时？你知道，剩下这么多（数千，如果上面的计数是正确的）乐队，我真的无法估计是否值得继续......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:34:41.750

该 sparsebundle 是您的 FileVault 加密主目录。如果您在尝试此操作时碰巧以该用户身份登录，则可能会出错。如果这是您正在做的事情，您可以尝试以下方式：

1) 创建一个具有管理员权限但没有加密的新用户。注销，以新用户身份登录，然后重试。

2) 撤消文件库加密。可能不是一个好主意，因为您将备份文件的未加密版本。

3) 在运行备份之前从 OS X 安装盘/USB 驱动器而不是硬盘启动，这样硬盘就根本不在使用中。

请注意，Mountain Lion 支持全盘加密，这需要先关闭您的主目录加密。安装完成后可能需要打开它。

# javascript - 如何在 Javascript 代码中访问 rails 变量？

> ID：12260104
> 
> 赞同：5
> 
> 时间：2012-09-04T09:04:38.000
> 
> 标签：javascript, jquery, ruby-on-rails

我正在使用 Rails 3.0.5

我有一个使用[jQuery 下拉清单](http://dropdown-check-list.googlecode.com/svn/trunk/doc/dropdownchecklist.html)的 javascript 代码，当在我的物品控制器的“编辑”操作中使用我的表单时，我希望复选框显示哪些项目已被选中，哪些未选中。

基本上，它可以在 Javascript 中像这样工作：

```
$('element').val([1,3,4]);
$('element').dropdownchecklist(); 
```

假设在我的控制器中，编辑操作，我有一个名为 @selected_items 的实例变量，其中包含被选中的项目（这里：@selected_items = [1,3,4]），我想使用这个的值实例变量到我的 Javascript 代码中，我该如何继续？如何在 .js 文件中访问此实例变量的值？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T09:07:23.247

只需在您的视图中编写 javascript，并在适当的位置，将`@selected_items`数组打印为 json：

`app/views/*/*.html.erb`

```
<script>
  $('element').val(<%= @selected_items.to_json %>);
  $('element').dropdownchecklist();
</script> 
```

如果无法序列​​化更复杂的对象，您也可以使用[Gon](https://github.com/gazay/gon) gem 。`to_json`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:43:08.543

处理此类要求的更好和干净/整洁的方法是

**1** .不要在视图中创建 javascript，而不是按照 rails 最佳实践

**2.**这样处理

**在你`app/views/*/*.html.erb`** 有像 (@selected_items) 这样的实例变量的地方，将它分配给助手中的选项，比如`:sel => @selected_items`

**在你的 javascript**

```
<script>
  $('element').attr('sel');
  $('element').dropdownchecklist();
</script> 
```

我希望它有帮助！

# javascript - 通过 PHP 将单词添加到游戏中

> ID：12260109
> 
> 赞同：0
> 
> 时间：2012-09-04T09:04:54.000
> 
> 标签：javascript, jquery

在我的拼写游戏中，新单词会一直添加，所以总是有新的单词可供选择。

添加到游戏中的每个单词都有一个图像的“src”和一个声音，会提示用户在游戏过程中正确拼写。

当我完成游戏的制作后，添加新词的工作就交给了我的一位同事。这意味着他必须为图片和音频以及单词添加链接。

由于他们对这类事情知之甚少，我想让他在添加单词时尽可能轻松地添加图像和声音，我想创建一个默认路径到一个共享位置，他将在其中存储所有这些东西。

这样他就可以只为单词输入“bug”，为图片输入“.bug-pic”，为声音输入“.bug-audio”，这样他就可以很容易地添加到 HTML 中。

这是最好的方法吗？

他们输入这些东西的最简单方法是什么？

这是我目前存储单词，声音和图像的方式...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:08:38.773

因此，带有“点亮”的字母表示要拼写的单词的表是我们正在尝试修复的位，对吗？

你想让单词“换行”到那张桌子的宽度吗？

我看到您正在从每个`<td>`s 'data-word=' 属性中获取数据 - 您可以轻松地将其归因于 html5 中的 div。它必须是一张桌子有什么特别的原因吗？否则，您可以使用具有固定宽度的包装 div 并将`<td>`s 替换为子 div 设置 float:left - 这些将自动“换行”，而不管最后一行与任何给定单词的字母的位置无关 - 即，它会打破新行。

```
<style>
    .letters_wrap{
        width:500px;
        height:auto;
        ...
     }

     .letter{
        width:50px;
        height:50px;
        float:left;
        ...
    }

</style>

<div class="letters_wrap">
    <div class="letter" id="letter_1" data-word="shin">s</div>
    <div class="letter" id="letter_1" data-word="shin">h</div>
    <div class="letter" id="letter_1" data-word="shin">i</div>
    <div class="letter" id="letter_1" data-word="shin">n</div>
</div> 
```

让我知道我是否至少对问题的正确性以及您要实现的目标有所了解。

小号

**更新**

@m0onio - 在演示页面中，我绑定了将 php 文件（以及单词列表）加载到按钮的函数。

`$(document).ready(){}`一旦 DOM 可用，您将在函数中执行该函数，使包含单词列表的 javascript 数组可用。

您需要编写一个 javascript 函数（包含在结束`</body>`标记之前）来处理网格中子 div 的构造，并从加载 php 文件（wordlist）的 .load() 的回调函数中调用它。

要附加声音和图像，我还会将该信息包含在 txt 文件中，以便文件的内容可以运行：word | 图片文件名 | 声音文件名，然后当您遍历数组时，您知道每个第一个元素是单词，第二个相关图像是第三个声音文件等。然后使用 jquery 将结果元素（子 div）附加到它的父容器。有道理？

# java - 在更多 Eclipse 插件中使用 apache.commons.lang

> ID：12260111
> 
> 赞同：1
> 
> 时间：2012-09-04T09:05:04.537
> 
> 标签：java, eclipse-plugin

我面临以下问题：

我想使用来自 apache.commons.lang 的 SerializationUtils。由于它是eclipse平台的一部分，看起来很简单。但是，反序列化时，它在我的插件中找不到类。

而且我不想破解apache.commons.lang的manifest.mf（添加`Eclipse-BuddyPolicy: dependent`），因为我必须为第三方组件创建一个jar，它在tomcat6下运行，而tomcat6抱怨manifest.mf错误，如果我破解 manifest.mf。

所以基本上我想在 2-3 个独立插件中使用 apache 的 SerializationUtils 而不破解 apache 的 jar。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:10:36.713

您很可能需要提供适当的 ClassLoader 来查找给定应用程序的类。一个类可以在不同的应用程序中多次加载，ClassLoader 会确定要使用的正确副本。

我看不出更改清单会有什么帮助。

# java - DynaBeans 与 CodeGenerated JavaBeans 性能影响

> ID：12260113
> 
> 赞同：0
> 
> 时间：2012-09-04T09:05:09.163
> 
> 标签：java, code-generation, javabeans, apache-commons-beanutils

我必须在我的应用程序中使用 JavaBeans。

*   该应用程序是一个配置驱动的应用程序。根据配置，将需要不同的 JavaBeans 类。
*   一种选择是根据配置，我使用代码生成器来生成 JavaBean 类。
*   另一个听起来很吸引人的选项是使用来自 Apache Beanutils的[Dynamic Beans 。](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/package-summary.html#dynamic "动态 Bean")它使我免于代码生成的一个额外步骤。

您能否帮助我了解使用 Dynabeans 与 Generated JavaBeans 对性能和内存的影响。有没有比 DynaBeans 更好的替代品？

在这两种情况下，我稍后都会使用 Apache BeanUtils 来调用 getter/setter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:05:14.263

关于与 Code Generated JavaBean 的比较，我一直在研究`BeanUtils`实现`BasicDynaBean` 并得出以下结论。

## 记忆

*   `BasicDynaBean`使用 a `HashMap`来存储键/值。如果有 1000 个 sme DynaBean 实例，那么就会浪费大量内存，因为每个实例中都会再次存储密钥。因此，代码生成 JavaBean 会消耗更多内存，如果您要在内存中存储大量 Dynabean 实例，则不建议这样做。

## 速度

*   要访问不同的字段，它会`get/put`调用`HashMap`. 因此它比 Code Generated Java Beans 更快，因为我必须`getter/setter`使用`reflection`

# java - 检测当前应用版本

> ID：12260115
> 
> 赞同：-1
> 
> 时间：2012-09-04T09:05:12.020
> 
> 标签：java, version, versioning

当我使用 XCode 和 iOS 时，有一种简单的方法可以通过阅读 plist 来检查应用程序的当前版本。

在Java中有类似的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:18:32.980

XCode 将该版本值存储在与您的应用程序一起分发的资源文件中。在 Java 中，等价物是您的清单文件，它被打包在您的 JAR/WAR/EAR 档案中。

清单文件只是一个名为的元数据文本文件`MANIFEST.MF`，它存储一些标准的键/值对，这些键/值对可以被许多工具识别，并且打包`META-INF`在你的 java 存档中一个名为的特殊文件夹中。

要为您自己的 JAR 获取清单文件，[这个问题](https://stackoverflow.com/questions/1272648/reading-my-own-jars-manifest)会给您一些线索。拥有自己的`Manifest`实例后，请使用以下任一选项来获取*该*版本值。

通过这种方式获取规范版本：

```
Manifest mf = .... // get the manifest file
String specVersion = mf.getAttribute("Specification-Version"); 
```

通过这种方式获取实现版本：

```
Manifest mf = .... // get the manifest file
String specVersion = mf.getAttribute("Implementation-Version"); 
```

可以在[此处](http://docs.oracle.com/javase/1.5.0/docs/guide/jar/jar.html#JAR%20Manifest)找到有关 JAR 清单的更多信息。

**编辑：**

如果您正在获取`null`任何这些属性的值，这意味着它们尚未在您的`MANIGEST.MF`文件中进行配置。这很容易检查：解压缩您的 JAR 文件（JAR 文件只是具有不同扩展名的 ZIP 文件）并转到`META-INF`文件夹中找到该`MANIFEST.MF`文件，因为它是一个文本文件，您可以将其内容打印到控制台，如果有`Specification-Version`或`Implementation-Version`属性在那里定义并且您仍在获取`null`值，那么您可能正在从不同的 JAR 加载清单文件。

**作为记录：**

要在 Manifest 文件中获取该属性，您需要配置构建工具来执行此操作。Maven 会自动完成（您可以[自定义它](http://maven.apache.org/plugins/maven-jar-plugin/examples/manifest-customization.html)），使用 Ant 您需要使用特定的[Ant Task](http://ant.apache.org/manual/Tasks/manifest.html)，使用 Eclipse 您需要查看[其文档](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-35.htm)（与任何其他 IDE 相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:23:29.420

正如 Alonso 所说，在 Java 中，编译器不会自动为您的代码分配构建版本。Java 将其留给运行编译器的构建工具，例如 ant 或 maven。如果您的应用程序没有使用清单文件（通常是这种情况），而是使用版本号后缀，例如 my_app_1.2.3.jar，那么您可以这样做来获取 jar 名称：

```
Class.getProtectionDomain().getCodeSource().getLocation() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:44:55.197

如果它有一个 GUI 并且主要目的¹是“更新”，请使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)来部署它。

为了向用户显示版本，我会将版本号存储在应用程序的每个 Jar 的清单中，并在运行时`Implementation-Version`在 a 中显示 s 。`JTable`

1.  顺便说一句，为了得到更好的答案，把你试图“做”的事情放在一边，而是命名你试图实现的“功能”。后者可以表示为您希望为用户提供的应用程序功能。可能是“可以通过插件扩展”、“24 个月免费自动升级”、“更白、更亮、更多泡沫”等。

# html - 基于关键帧的动画

> ID：12260119
> 
> 赞同：0
> 
> 时间：2012-09-04T09:05:20.467
> 
> 标签：html, css, css-animations

welp .. 我曾经有在我的谷歌浏览器上运行的 css3 动画，但由于某种原因它停止了工作。我试图根据该代码创建一个示例。

我不知道为什么它不再起作用了..任何信息将不胜感激。

```
<html>
<head>
<style type="text/css">
div
{
 width:100px;
 height:100px;
 background:red;
 -webkit-transition: all .5s ease;
 -webkit-animation-name: bounceup;
 -webkit-animation-duration: 1.5s;
}

@-webkit-keyframes bounceup {
    from {
    opacity:0.5;
    -webkit-transform: translateY(100px) rotate(180deg);
    -webkit-box-shadow: 20px 20px 80px #000;
    }
    to {
    opacity:1;
    -webkit-transform: translateY(0px) rotate(0deg);
    }
}

</style>
</head>
<body>

<div></div>

</body>
</html> 
```

正如你所看到的，它是一个使用“from”和to“方法的基于关键帧的动画。

这里的结果是我只看到一个没有动画的红色框。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:01:39.867

由于某种原因，动画不喜欢 的顺序`translateY(0px)`，所以如果你移动它，它会正常工作：http: [//jsfiddle.net/joshnh/zJ5A9/](http://jsfiddle.net/joshnh/zJ5A9/)

# iphone - iphone中的xcode 4.4.1模拟器没有声音

> ID：12260120
> 
> 赞同：0
> 
> 时间：2012-09-04T09:05:22.977
> 
> 标签：iphone, objective-c

我创建了一个 AVaudioplayer 应用程序并成功构建。但在 xcode4.4.1 的 iphone 5.1 模拟器中没有声音

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:10:13.760

这可能会有所帮助。

Mac's System Preferences > Sound > Sound Effects 取消选中（关闭）然后选中（打开）“播放用户界面音效”，如果默认未选中则选中（打开），如果已选中则重置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T03:48:20.900

如果检查系统偏好设置中的“播放用户界面音效”不起作用，

尝试使您的 AVAudioPlayer 实例成为全局变量。当我在使用模拟器时遇到同样的问题时，这对我有用。

你也可以尝试打电话

```
[audioPlayer prepareToPlay]; 
```

前

```
[audioPlayer play]; 
```

# android - 如何将 AsyncTask 与 Activity 分开？

> ID：12260122
> 
> 赞同：1
> 
> 时间：2012-09-04T09:05:33.250
> 
> 标签：android

我想将 ClassAsyncTask 用于一个单独的类，我正在尝试但没有成功。我需要有关如何执行此操作的明确信息或如何执行此操作的想法。提前致谢。

```
public class XMLParser extends Activity {

    String targetURL = "http://www.androidpeople.com/wp-content/uploads/2010/06/example.xml";
    TextView name[], website[], category[];
    LinearLayout linearLayout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /* layout to display the view */
        linearLayout = new LinearLayout(this);
        linearLayout.setOrientation(1);

        /* Set the ContentView to layout for display */
        this.setContentView(linearLayout);

        ClassAsyncTask asyncTask = new GBAsyncTask();
        asyncTask.execute(targetURL);

    }

    //
    public class ClassAsyncTask extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... urls) {

            try {

                /* Handling XML */
                SAXParserFactory spf = SAXParserFactory.newInstance();
                SAXParser sp = spf.newSAXParser();
                XMLReader xr = sp.getXMLReader();

                /* Send URL to parse XML Tags */
                URL sourceUrl = new URL(targetURL);

                /* Create handler to handle XML Tags ( extends DefaultHandler ) */
                MyXMLHandler myXMLHandler = new MyXMLHandler();
                xr.setContentHandler(myXMLHandler);
                xr.parse(new InputSource(sourceUrl.openStream()));

            } catch (Exception e) {
                System.out.println("XML Pasing Excpetion = " + e);
            }
            return null;
        }

        /* Return-value from doInBackground */
        protected void onPostExecute(String result) {

            /* Get result from MyXMLHandler SitlesList Object */
            SiteList sitesList = MyXMLHandler.sitesList;

            /* Assign TextView array length by arrayList size */
            name = new TextView[sitesList.getName().size()];
            website = new TextView[sitesList.getName().size()];
            category = new TextView[sitesList.getName().size()];

            int h = sitesList.getName().size();
            /* Set the result text in TextView and add it to layout */
            for (int i = 0; i < h; i++) {
                name[i] = new TextView(getApplicationContext());
                name[i].setText("Name = " + sitesList.getName().get(i));
                website[i] = new TextView(getApplicationContext());
                website[i]
                        .setText("Website = " + sitesList.getWebsite().get(i));
                category[i] = new TextView(getApplicationContext());
                category[i].setText("Website Category = "
                        + sitesList.getCategory().get(i));
                linearLayout.addView(name[i]);
                linearLayout.addView(website[i]);
                linearLayout.addView(category[i]);
            }
        }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:23:33.553

您可以`ClassAsyncTask`使用 . 从另一个类访问`XMLParser.ClassAsyncTask`。

如果要使子类独立于父类（以扩大其使用范围），则应确保删除对父类的类变量的任何引用。在你的情况下，这是`targetURL`. 您可以通过创建一个存储目标 URL 的类构造函数来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:42:32.797

You can separate it and hand over the current context and an interface implementation for the callback method in the constructor, e.g.:

```
public class JSONLoader extends AsyncTask<String, Void, String> {
    private AsyncTaskCompleteListener<String> callback;
    private Context context;
    ..

    public JSONLoader(Context context, AsyncTaskCompleteListener<String> cb) {
        this.context = context;
        this.callback = cb;
    }

    ..
    // callback method implemented by calling activity:
    protected void onPostExecute(String result) {
        // call callback method
        callback.onTaskComplete(result);
    }
} 
```

The task is started from an activity this way (note that it doesn't need to extend `FragmentActivity`. It can extend `Activity` or any of its subclasses as well):

```
public class MainActivity extends FragmentActivity 
    implements AsyncTaskCompleteListener<String> {

    public void onCreate(Bundle savedInstanceState) {
        ..
        JSONLoader jsonLoader = new JSONLoader(this, this);
        jsonLoader.execute(getString(R.string.datasource_url_list));
    }

    // from AsyncTaskCompleteListener interface
    public void onTaskComplete(String result) {
        // your callback method implementation
    }
    ..
} 
```

And this is the interface that can be used by your activities to define different callback methods:

```
public interface AsyncTaskCompleteListener<T> {
    public void onTaskComplete(T result);

} 
```

# matplotlib - 如何随着时间的推移在函数后面绘制一个矩形

> ID：12260124
> 
> 赞同：6
> 
> 时间：2012-09-04T09:05:41.417
> 
> 标签：matplotlib, pandas

我正在使用 matplotlib 在 pandas 中绘制一个时间序列，并且我正在尝试为这样的绘图着色。

![所需结果的说明](../Images/526c1f6b4e329aa3d0c9ffe7d7fa9130.png)

我有自动对焦点的时间。我试图让他们在情节中的位置使用

```
gcf().canvas.mpl_connect('button_press_event', debug_print_onclick_event) 
```

最终 x 位置在 22'395'850 左右（甚至不接近 unixtime :S）

我的代码基本上是这样的：

```
plot = data.plot(legend=False) #where data is the timeseries (pandas.DataFrame).
plot.add_patch(
    plt.Rectangle(
        (0,22395760), 
        60, 
        45,
        facecolor='green',
        edgecolor='green'
    )
)
plt.draw()
plt.show() 
```

但是补丁的任何内容都没有出现。还测试直接使用时间，它实际上运行但没有渲染补丁。

```
plt.Rectangle(
    (0,datetime_D), 
    60, 
    4*pandas.datetools.Minutes(15),
    facecolor='green',
    edgecolor='green'
) 
```

什么是底层类型？我应该如何`things`在matplotlib中及时定位？任何丑陋的工作都会受到赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T11:39:03.520

您似乎已将 x 和 y 交换为`Rectangle((x,y), ...)`.
`Rectangle((22395760, 0), ...)`

而不是使用补丁，`plot.axvspan()`似乎更适合您想要做的事情。

```
plt.gca().axvspan(date,date+2*pandas.datetools.Minute(15),facecolor='green',edge‌ color='green',alpha=0.3) 
```

# ios - 如何防止 Xcode 4 使最后关闭的窗口成为主项目窗口？

> ID：12260134
> 
> 赞同：1
> 
> 时间：2012-09-04T09:06:20.387
> 
> 标签：ios, xcode, xcode4, project

前段时间，我使用 Brian Webster 在他的[博客](http://brian-webster.tumblr.com/post/22060296528/how-to-make-xcode-4s-ui-work-for-you-maybe)上描述的“tab-approach”调整了我的 Xcode 工作流程。设置它需要一些时间，但我真的很喜欢这样工作。

但是，有时我通过在项目管理器中双击文件来打开文件，将其打开到新窗口中。我认为这不是一个真正的问题，但似乎您在项目中关闭的最后一个窗口将成为主项目窗口，当我重新打开项目时忘记了基于选项卡的工作流程。我经常不小心先关闭主窗口，然后看到我仍然在另一个屏幕上打开了一个窗口。

我已经厌倦了一直重新配置它，再次创建所有这些选项卡。

有谁知道如何解决这个问题-例如，有没有一种方法可以保存选项卡的当前配置及其打开的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:02:36.973

我能够解决这个问题的唯一方法是转到 Xcode>Preferences>General 并将双击导航下拉菜单更改为使用单独的选项卡。我知道这不是理想的解决方案，但它对我有用。

# c# - .NET DateTime & TimezoneInfo.ConvertTime 派对

> ID：12260143
> 
> 赞同：2
> 
> 时间：2012-09-04T09:06:46.800
> 
> 标签：c#, .net, asp.net-mvc, datetime, timezone

我想做的事情很简单：

```
 private static TimeZoneInfo Tzi = // ... custom timeZone I've set;
    public static DateTime ToTimeZone(DateTime dateTime, TimeZoneInfo target)
    {
        return TimeZoneInfo.ConvertTime(dateTime, Tzi, target);
    } 
```

想法是——所有到达服务器的日期都会自动转换为特定的时区，并像这样保存到数据库（UTC、美国中部、美国太平洋等）。

只要服务器上设置的时区与 Tzi 相同，这就会很好地工作。但是，如果不是这样，则转换失败 - 创建 DateTime 实例时，.NET 将其设置为机器的 TimeZone，然后 TimeZoneInfo.ConvertTime(dateTime, Tzi, target) 以一种时髦的方式处理我的请求。例如，假设服务器时区是太平洋 (UTC -8)，我将 Tzi 设置为中央 (UTC -6)，并且我的目标是新加坡 (UTC +8)。

现在，当我调用 TimeZoneInfo.ConvertTime(dateTime, Tzi, target) 首先将 dateTime 从 UTC -8“转换”为 UTC -6（Tzi 时区），增加 2 小时......然后才从 Tzi 到目标。

有没有办法向 TimeZoneInfo.ConvertTime 发出信号，表明我发送的 dateTime 在 TimeZone 中，我作为 from 参数传入，而不是在服务器的 TimeZone 中？

**编辑：** 好的，两个答案都是很好的建议，但似乎我有不同的麻烦。TimeZoneInfo.ConvertTime(dateTime, Tzi, target) 似乎工作正常，而真正的罪魁祸首实际上是：

```
return Json(new {data}, JsonRequestBehavior.AllowGet); 
```

输出日期，如：“Created”：“/Date(1346810072950)/”。我已经确认发送日期因服务器上的 TimeZone 而不同（更改服务器的 TimeZone 后需要重新启动 AppPool）。任何人都有这方面的经验并建议如何影响 ASP.NET MVC 以 JSON 格式输出日期并发送回客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:28:12.427

[`ConvertTime`](http://msdn.microsoft.com/en-us/library/bb382770.aspx)应该做的工作。也许你的问题是[`DateTime.Kind`](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx).

请参见以下示例：

```
// Gets current local date
// Returns 04/09/12 11:30 in my case
var date = DateTime.Now;

// Sets DateTime as Unspecified kind (not local nor UTC)
// Returns same date as before, but the date is not tagged as "local"
date = DateTime.SpecifyKind(date, DateTimeKind.Unspecified);

// Converts the current date, specified as UTC+12, into a date specified as UTC-11
// Returns 03/09/12 12:30 in my case, which is the expected result
// (23 hours between previous date and result)
var zz = TimeZoneInfo.ConvertTime(
    date,
    TimeZoneInfo.FindSystemTimeZoneById("UTC+12"),
    TimeZoneInfo.FindSystemTimeZoneById("UTC-11")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:11:12.177

您可以使用[`DateTimeOffset`](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx)代替`DateTime`- 此结构*包含*时区偏移属性，因此在创建它的实例时，您应该指定要使用的偏移量。

# c# - 在 C# 中，字符串是一种引用类型，但为什么它在用另一种方法操作后没有改变

> ID：12260144
> 
> 赞同：3
> 
> 时间：2012-09-04T09:06:55.553
> 
> 标签：c#, string, reference-type

> **可能重复：**
> [C# 字符串引用类型？](https://stackoverflow.com/questions/1096449/c-sharp-string-reference-type)

说，我有一个字符串叫做

```
string sample = "Initial value"; 
```

传递给方法 test() 后

```
public static void Test(string testString)
{
    testString = "Modified Value";
} 
```

如果我在通过测试（样本）后打印“样本”，除了它应该打印“修改值”。

但它的打印“初始值”。如果字符串是引用类型，为什么会出现这种情况？

但同样的（预期的逻辑），适用于对象。有人可以请我清除吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T09:09:43.957

`string`这与作为引用类型无关。这是因为参数是按值传递的，而不是按引用传递的。

如果您像这样修改您的方法，以便通过引用传递参数：

```
public static void Test(ref string testString)
{
    testString = "Modified Value";
} 
```

然后`sample`会进行修改。

有关参数传递的更多详细信息，请参阅[本文](http://www.yoda.arachsys.com/csharp/parameters.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:12:18.313

That's because of [way how CLR passes the params to method](http://www.yoda.arachsys.com/csharp/parameters.html).

Put simply:

```
string sample = "Initial value"; 
```

Here `sample` variable refers to `"Initial value"` string instance stored in heap.

```
public static void Test(string testString) 
{ 
    testString = "Modified Value"; 
} 
```

In the method you modify `testString` variable(copy of `sample` variable) making it references to "Modified Value" string in a heap, leaving original `sample` variable no affected.

# django - 访问 form.cleaned_data 中的缺失值

> ID：12260147
> 
> 赞同：1
> 
> 时间：2012-09-04T09:07:07.330
> 
> 标签：django, django-forms

我试图动态生成字段，如[http://jacobian.org/writing/dynamic-form-generation/](http://jacobian.org/writing/dynamic-form-generation/)所示。我的情况略有不同，因为我希望使用动态创建的多项选择字段。这就是我想出的...

视图.py

```
def browseget(request):
    success = False
    if request.method == 'POST':
        list_form = ListForm(request.POST)
        if list_form.is_valid():
            success = True
            path = list_form.cleaned_data['path']
            minimum_size = list_form.cleaned_data['minimum_size']
            follow_link = list_form.cleaned_data['follow_link']
            checkboxes = list_form.cleaned_data['checkboxes']
            ....do something
    else:
        list_form = ListForm(name_list)
    ctx = {'success': success, 'list_form': list_form, 'path': path, 'minimum_size': minimum_size}
    return render_to_response('photoget/browseget.html', ctx, context_instance=RequestContext(request)) 
```

表格.py

```
class ListForm(forms.Form):
    path = forms.CharField(required=False)
    minimum_size = forms.ChoiceField(choices=size_choices)
    follow_link = forms.BooleanField(required=False, initial=True)

    def __init__(self, *args, **kwargs):
        name_list = kwargs.pop('name_list', None)
        super(ListForm, self).__init__(*args, **kwargs)
        print 'Received data:', self.data
        if name_list:
            name_choices = [(u, u) for u in name_list]
            self.fields['checkboxes'] = forms.MultipleChoiceField(required=False, label='Select Name(s):', widget=forms.CheckboxSelectMultiple(), choices=name_choices)

    def clean_path(self):
        cd = self.cleaned_data
        path = cd.get('path')
        if path == '': path = None
        return path

    def clean_minimum_size(self):
        cd = self.cleaned_data
        minimum_size = cd.get('minimum_size')
        if minimum_size is None: minimum_size = 0
        return int(minimum_size) 
```

表单生成并完美显示......直到我发布一些数据。'checkboxes' 字段没有显示在 list_form.cleaned_data.items() 中，而它显示在 self.data 中。因为它是表单因 KeyError 异常而中断。所以我问，我如何访问复选框数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:12:52.460

`name_list`当您在 POST 上重新实例化表单时，您没有传入参数，因此不会创建该字段，因为`if name_list`它是 False。

# android - listview onitemclick 不触发

> ID：12260148
> 
> 赞同：0
> 
> 时间：2012-09-04T09:07:11.807
> 
> 标签：android, listview, android-listview, onitemclicklistener

这是我用于列表的自定义布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:background="@drawable/rounded_corner_5"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:paddingBottom="5dip"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    android:paddingTop="5dip" >

    <ImageView
        android:id="@+id/pic"
        android:layout_width="48dip"
        android:layout_height="48dip"
        android:layout_marginRight="5dip"
        android:src="@drawable/icon" />

    <LinearLayout
        android:id="@+id/vert"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/name"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:ellipsize="middle"
                android:singleLine="true"
                android:text="Amit"
                android:textColor="#000000" />

            <TextView
                android:id="@+id/time"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:singleLine="true"
                android:text="5 days"
                android:textColor="#333333" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

                <TextView
                    android:id="@+id/currency"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Large Text"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textColor="#333333"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/amount"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Large Text"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textColor="#333333" />

                <ImageView
                    android:id="@+id/direction"
                    android:layout_width="8dip"
                    android:layout_height="8dip"
                    android:layout_marginLeft="5dip"
                    android:src="@drawable/incoming" />

        </LinearLayout>

        <TextView
            android:id="@+id/service"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textColor="#333333" />
    </LinearLayout>

</LinearLayout> 
```

这是我用来处理触发器的活动代码的一部分

```
list.setItemsCanFocus(false);

        list.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick(AdapterView<?> v, View view, int position, long itemId){
                Toast.makeText(Home.this, "You selected: " + String.valueOf(position), Toast.LENGTH_SHORT).show();
                SparseBooleanArray sp = list.getCheckedItemPositions();
                if(sp.get(position) == true)
                    view.setSelected(false);
                else
                    view.setSelected(true);
            }
        }); 
```

但尽管如此，我还是无法让 Toast 显示出来。我哪里错了？

列表视图的代码是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.markupartist.android.widget.PullToRefreshListView
        android:id="@+id/list"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:divider="@android:color/transparent"
        android:dividerHeight="20.0dip" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:29:56.180

I found the issue, I was setting up a onClicklistener on each item, which made it impossible for the list onclick to receive the events.

# android - 用于安卓的 libjpeg-turbo

> ID：12260149
> 
> 赞同：18
> 
> 时间：2012-09-04T09:07:13.220
> 
> 标签：android, android-ndk, jpeg, libjpeg-turbo

我需要用于 android ndk[的 libjpeg-turbo 。](http://www.libjpeg-turbo.org/)有没有人设法将它编译为.a（静态）库？我已经尝试了几次，但它只给了我很多错误。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-06T08:51:37.173

[安装安卓 NDK](http://developer.android.com/tools/sdk/ndk/index.html#Installing)。以下说明已使用**r8b**验证，旧版本可能有问题，我不知道。

从 Benjamin Gaignard 处获取[libjpeg-turbo的 Android 源代码：](https://wiki.linaro.org/BenjaminGaignard/libjpeg-turboAndSkia)

```
git clone git://git.linaro.org/people/tomgall/libjpeg-turbo/libjpeg-turbo.git -b linaro-android 
```

在**git创建的****libjpeg-turbo**目录中，编辑文件**Android.mk** : 在第 70 行之后，添加以下内容：****`LOCAL_MODULE := libjpeg`****

 ****```
ifeq ($(notdir $(MAKECMDGOALS)),libjpeg.a)
  LOCAL_SRC_FILES +=  $(libsimd_SOURCES_DIST)
  include $(BUILD_STATIC_LIBRARY)
  include $(CLEAR_VARS)
  LOCAL_MODULE := dummy
endif 
```

运行**ndk-build**：

```
ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk obj/local/armeabi/libjpeg.a 
```

*利润！*

**PS：**您可能需要**armeabi-v7a**版本：

```
ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk APP_ABI=armeabi-v7a obj/local/armeabi-v7a/libjpeg.a 
```

**或为ARM**编译，以提高性能，添加到命令行：

```
LOCAL_ARM_MODE=arm 
```

如果您的目标支持**NEON**，请添加到命令行：

```
LOCAL_ARM_NEON=true ARCH_ARM_HAVE_NEON=true 
```

* * *

**更新**：要使其与 Android NDK r15 及更高版本一起使用，请删除对`libcutils`Android.mk**的**所有引用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-20T06:40:55.927

这个答案扩展了 Alex Cohn 的答案。完全归功于他让我开始。这个答案将允许您使用 ARM（带或不带 NEON）以及 x86 的程序集构建 libjpeg-turbo。还为 MIPS 提供了兼容性，这样您就可以成为一个好公民，并为 Android NDK 的 r8e 版本支持的所有平台构建您的应用程序。

对于实际回答问题，我仍然是一个相对新手，所以没有包含附件的权限。所以我将不得不内联一堆代码。我也确信有更好的方法来做下面的点点滴滴，所以我愿意接受改进的建议。

让这一切工作通过六个主要步骤完成（第二步有许多子步骤——每个子步骤都可以在主要的六个步骤之后找到）：

1.  通过 git 下载 libjpeg-turbo 库，其中包含一组适用于 Android 的代码和 .mk 文件。我用 git 从这里下载了它：

    ```
    git clone git://git.linaro.org/people/tomgall/libjpeg-turbo/libjpeg-turbo.git -b linaro-android 
    ```

    必须对 Tom Gall 进行初始工作给予充分的信任和感谢。

2.  下载 YASM（x86 的汇编程序）并配置 Android 构建环境以支持它。请参阅关于为 Android NDK 配置 YASM 的说明集，我在步骤 6 中我的 Android.mk 更改末尾的水平规则下方包含了这些说明。支持 x86 要求您不要羞于调整 NDK 安装。

    我也许可以使用 NASM 编译器，但在调查 NASM 之前，我已经完成了 YASM 路径。

3.  创建 simd/jsmidcfg.inc 文件。libjpeg-turbo 库提供 simd/jsmidcfg.inc.h。它旨在让预处理器获取 .h 并将其转换为 .inc。我确信有比我所做的更好的方法来实现它。但由于时间紧迫，未能整理好。相反，我使用以下命令手动运行 Android 附带的 gcc 来创建文件：

    ```
    C:\development\android\ide\android-ndk-r8e-windows-x86_64\toolchains\x86-4.4.3\prebuilt\windows-x86_64\bin\i686-linux-android-gcc.exe -E C:\development\thirdparty\libjpeg-turbo\libjpeg-turbo-android-1.2.0\simd\jsimdcfg.inc.h -o C:\development\thirdparty\libjpeg-turbo\libjpeg-turbo-android1.2.0\simd\jsimdcfg.inc 
    ```

    预处理器完成后，我不得不手动编辑文件以使其进入可用状态。我必须选择“; -- jpeglib.h”上面的所有行并删除它们。

    接下来，我必须找到以 _cpp_protection_ 开头的每个 %defines，并在没有 _cpp_protection_ 的情况下复制每个 %defines。例如，`%define _cpp_protection_RGB_RED 0`成为`%define RGB_RED 0`

4.  对于 ARM，我希望我的代码能够在拥有它的硬件上动态支持 NEON 指令，并在没有它的硬件上回退到更简单的东西，我修改了 simd/jsimd_arm.c 以动态查询信息。我不想在构建 libjpeg-turbo 时做出这样的选择。

    我添加了以下代码行：

    ```
    #ifdef ANDROID
    #include <cpufeatures/cpu-features.h>
    #endif 
    ```

    和

    ```
    #ifdef ANDROID
      uint64_t cpuFeatures = android_getCpuFeatures();
      if (cpuFeatures & ANDROID_CPU_ARM_FEATURE_NEON) {
         simd_support |= JSIMD_ARM_NEON;
      }
    #endif 
    ```

    在 init_simd() 方法中。

5.  启用 MIPS。

    作为一个好公民，我想在 MIPS 上启用编译。虽然 MIPS 没有任何汇编代码，但代码至少应该编译和运行。为此，我将 simd/jsimd_arm.c 复制到 simd/jsimd_mips.c。我编辑了该文件，以便`init_simd()`设置`simd_support = 0;` 我还将所有`jsimd_can_*()`方法更改为返回 0。最后，我从所有其他方法中删除了实现。

6.  因为我不仅仅对 ARM 的构建感兴趣，所以我更改了 Application.mk 文件以包含以下行：

    ```
    APP_ABI := all
    APP_OPTIM := release 
    ```

    APP_OPTIM 来自[How to optimize a native code with android-ndk (Speed Optimization)](https://stackoverflow.com/questions/18426710/how-to-optimize-a-native-code-with-android-ndk-speed-optimization)

    在 Android.mk 中，我注释掉了“cjpeg”注释块及下方的所有内容。要进行块注释，我遵循了[如何在 makefiles 中添加多行注释的建议](https://stackoverflow.com/questions/4493291/how-to-add-multi-line-comments-in-makefiles)

    接下来我自定义了 Android.mk 文件本身，以便我可以为所有当前支持的 CPU（ARM、x86、MIPS）构建。这是我最终得到的结果（一些代码被注释掉，因为我想要一个静态库——也将原始代码留在原处，这样我就可以看到发生了什么变化）。您很可能必须更改（或删除） addprefix 方法调用，因为下面的文件是为我的构建环境定制的。但除此之外，它应该对你有用。

.

```
##################################################
###                simd                        ###
##################################################
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

#ifeq ($(ARCH_ARM_HAVE_NEON),true)
#LOCAL_CFLAGS += -D__ARM_HAVE_NEON
#endif

# From autoconf-generated Makefile
EXTRA_DIST = simd/nasm_lt.sh simd/jcclrmmx.asm simd/jcclrss2.asm simd/jdclrmmx.asm simd/jdclrss2.asm \
simd/jdmrgmmx.asm simd/jdmrgss2.asm simd/jcclrss2-64.asm simd/jdclrss2-64.asm \
simd/jdmrgss2-64.asm simd/CMakeLists.txt

#libsimd_SOURCES_DIST = simd/jsimd_arm_neon.S \
                       simd/jsimd_arm.c

libsimd_SOURCES_DIST :=

ifeq ($(TARGET_ARCH),arm)
libsimd_SOURCES_DIST := simd/jsimd_arm_neon.S \
                       simd/jsimd_arm.c
endif

ifeq ($(TARGET_ARCH),x86)
#libsimd_SOURCES_DIST := simd/jsimd_mips.c

# List of assembly files needed is derived from content within simd/CMakelists.txt
# The Intel Atom supports x86 32-bit assembly.  So take those files and leave the
# 64-bit behind.

libsimd_SOURCES_DIST := simd/jsimd_i386.c \
simd/jsimdcpu.asm simd/jccolmmx.asm simd/jcgrammx.asm simd/jdcolmmx.asm simd/jcsammmx.asm simd/jdsammmx.asm \
    simd/jdmermmx.asm simd/jcqntmmx.asm simd/jfmmxfst.asm simd/jfmmxint.asm simd/jimmxred.asm simd/jimmxint.asm simd/jimmxfst.asm simd/jcqnt3dn.asm \
    simd/jf3dnflt.asm simd/ji3dnflt.asm simd/jcqntsse.asm simd/jfsseflt.asm simd/jisseflt.asm simd/jccolss2.asm simd/jcgrass2.asm simd/jdcolss2.asm \
    simd/jcsamss2.asm simd/jdsamss2.asm simd/jdmerss2.asm simd/jcqnts2i.asm simd/jfss2fst.asm simd/jfss2int.asm simd/jiss2red.asm simd/jiss2int.asm \
    simd/jiss2fst.asm simd/jcqnts2f.asm simd/jiss2flt.asm
endif

ifeq ($(TARGET_ARCH),mips)
libsimd_SOURCES_DIST := simd/jsimd_mips.c
endif

#LOCAL_SRC_FILES := $(libsimd_SOURCES_DIST)
#LOCAL_SRC_FILES := $(addprefix ../../libjpeg-turbo-android-1.2.0/,$(LOCAL_SRC_FILES))

LOCAL_C_INCLUDES := $(LOCAL_PATH)/simd \
                    $(LOCAL_PATH)/android

LOCAL_C_INCLUDES := simd android
#LOCAL_C_INCLUDES := $(addprefix ../../libjpeg-turbo-android-1.2.0/,$(LOCAL_C_INCLUDES))

#AM_CFLAGS := -march=armv7-a -mfpu=neon
#AM_CCASFLAGS := -march=armv7-a -mfpu=neon

#LOCAL_MODULE_TAGS := debug

#LOCAL_MODULE := libsimd

#include $(BUILD_STATIC_LIBRARY)

######################################################
###           libjpeg.so                       ##
######################################################

#include $(CLEAR_VARS)

# From autoconf-generated Makefile
libjpeg_SOURCES_DIST =  jcapimin.c jcapistd.c jccoefct.c jccolor.c \
        jcdctmgr.c jchuff.c jcinit.c jcmainct.c jcmarker.c jcmaster.c \
        jcomapi.c jcparam.c jcphuff.c jcprepct.c jcsample.c jctrans.c \
        jdapimin.c jdapistd.c jdatadst.c jdatasrc.c jdcoefct.c jdcolor.c \
        jddctmgr.c jdhuff.c jdinput.c jdmainct.c jdmarker.c jdmaster.c \
        jdmerge.c jdphuff.c jdpostct.c jdsample.c jdtrans.c jerror.c \
        jfdctflt.c jfdctfst.c jfdctint.c jidctflt.c jidctfst.c jidctint.c \
        jidctred.c jquant1.c jquant2.c jutils.c jmemmgr.c jmemnobs.c \
jaricom.c jcarith.c jdarith.c \
turbojpeg.c transupp.c jdatadst-tj.c jdatasrc-tj.c #\
turbojpeg-mapfile

LOCAL_SRC_FILES:= $(libjpeg_SOURCES_DIST) $(libsimd_SOURCES_DIST)
#LOCAL_SRC_FILES:= $(libjpeg_SOURCES_DIST)
LOCAL_SRC_FILES := $(addprefix ../../../libjpeg-turbo-android-1.2.0/,$(LOCAL_SRC_FILES))

#LOCAL_SHARED_LIBRARIES := libcutils
#LOCAL_STATIC_LIBRARIES := libsimd

#LOCAL_C_INCLUDES := $(LOCAL_PATH) 

# Include C:/development/android/ide/android-ndk-r8e-windows-x86_64/sources/android
# instead of the lower-level cpufeatures because of how I had to include
# cpu-features.h.  It appears as if there is a naming conflict, so I had to
# change how the file was included to avoid naming conflicts.

LOCAL_C_INCLUDES := $(addprefix ../../../libjpeg-turbo-android-1.2.0/,$(LOCAL_C_INCLUDES)) \
C:/development/thirdparty/libjpeg-turbo/libjpeg-turbo-android-1.2.0 \
C:/development/android/ide/android-ndk-r8e-windows-x86_64/sources/android
#LOCAL_C_INCLUDES := $(LOCAL_C_INCLUDES)) ./
#LOCAL_C_INCLUDES := $(addprefix $(LOCAL_PATH),$(LOCAL_C_INCLUDES)) $(LOCAL_PATH)../../../libjpeg-turbo-android-1.2.0/

LOCAL_CFLAGS := -DAVOID_TABLES  -O3 -fstrict-aliasing -fprefetch-loop-arrays  -DANDROID \
        -DANDROID_TILE_BASED_DECODE -DENABLE_ANDROID_NULL_CONVERT
LOCAL_CFLAGS += -DJPEG_LIB_VERSION=80  # I need version 8 because of some of the methods I depend on
LOCAL_YASMFLAGS := -P../../libjpeg-turbo-android-1.2.0/simd/jsimdcfg.inc

#LOCAL_MODULE_PATH := $(TARGET_OUT_OPTIONAL_STATIC_LIBRARY)

#LOCAL_MODULE_TAGS := debug

#LOCAL_MODULE := libjpeg
LOCAL_MODULE := jpeg-turbo

#include $(BUILD_SHARED_LIBRARY)
#LOCAL_STATIC_LIBRARIES := cpufeatures

include $(BUILD_STATIC_LIBRARY)

# We reference android/cpufeatures in the Android.mk file of our main app, so
# we don't need to do anything here.
#$(call import-module,android/cpufeatures) 
```

* * *

libjpeg-turbo 附带的一些源代码采用 .asm 格式。也就是说，它需要使用 NASM 汇编器进行编译。在发布时，Android NDK 不支持它。

为了让 .asm 支持与 NDK 一起工作，我遵循了此处提供的粗略大纲：http: [//software.intel.com/en-us/articles/using-yasm-compiler-on-android-ndkbuild](http://software.intel.com/en-us/articles/using-yasm-compiler-on-android-ndkbuild)

这是一组更详细的说明。在 android-ndk-r8\build\core 中，需要发生以下事情：

1.  构建二进制.mk：

    `all_source_extensions := .c .s .S $(LOCAL_CPP_EXTENSION)` =>`all_source_extensions := .c .s .asm .S $(LOCAL_CPP_EXTENSION)`

    对我来说，上面是第 228 行。

    在以“# Build the sources to object files”开头的行之后，您将看到几个 foreach 循环。像这样添加一个（我在第 272 行添加了它）：

    ```
    $(foreach src,$(filter %.asm,$(LOCAL_SRC_FILES)), $(call compile-asm-source,$(src),$(call get-object-name,$(src)))) 
    ```

2.  定义.mk：

    创建一个新的 compile-asm-source 以匹配我们在上面的新 for 循环中添加的新条目。我们还必须在 make 文件中添加一个新的定义。我添加了以下内容。它是用于构建 .c 文件的各种规则的组合和简化。当使用需要这些更改的 yasm 时，我们需要一组不同的选项。

    ```
    define  ev-compile-asm-source
    _SRC:=$$(LOCAL_PATH)/$(1)
    _OBJ:=$$(LOCAL_OBJS_DIR)/$(2)

    _FLAGS := -f elf -DELF -DPIC $$(LOCAL_YASMFLAGS)

    _TEXT := "Compile $$(call get-src-file-text,$1)"
    _CC   := $$(NDK_CCACHE) $$(TARGET_ASM)

    $$(_OBJ): PRIVATE_SRC      := $$(_SRC)
    $$(_OBJ): PRIVATE_OBJ      := $$(_OBJ)
    $$(_OBJ): PRIVATE_DEPS     := $$(call host-path,$$(_OBJ).d)
    $$(_OBJ): PRIVATE_MODULE   := $$(LOCAL_MODULE)
    $$(_OBJ): PRIVATE_TEXT     := "$$(_TEXT)"
    $$(_OBJ): PRIVATE_CC       := $$(_CC)
    $$(_OBJ): PRIVATE_CFLAGS   := $$(_FLAGS)

    ifeq ($$(LOCAL_SHORT_COMMANDS),true)
    _OPTIONS_LISTFILE := $$(_OBJ).cflags
    $$(_OBJ): $$(call generate-list-file,$$(_FLAGS),$$(_OPTIONS_LISTFILE))
    $$(_OBJ): PRIVATE_CFLAGS := @$$(call host-path,$$(_OPTIONS_LISTFILE))
    $$(_OBJ): $$(_OPTIONS_LISTFILE)
    endif

    $$(call generate-file-dir,$$(_OBJ))

    $$(_OBJ): $$(_SRC) $$(LOCAL_MAKEFILE) $$(NDK_APP_APPLICATION_MK) $$(NDK_DEPENDENCIES_CONVERTER)
    @$$(HOST_ECHO) "$$(PRIVATE_TEXT)  : $$(PRIVATE_MODULE) <= $$(notdir $$(PRIVATE_SRC))"
    $$(hide) $$(PRIVATE_CC) $$(PRIVATE_CFLAGS) $$(call host-path,$$(PRIVATE_SRC)) -o $$(call host-path,$$(PRIVATE_OBJ)) \
    $$(call cmd-convert-deps,$$(PRIVATE_DEPS))
    endef

    compile-asm-source = $(eval $(call ev-compile-asm-source,$1,$2)) 
    ```

    搜索以“compile-s-source”开头的行。我在第 1491 行找到了它。新的 compile-asm-source 可以在它的正下方。

    接下来，搜索以“get-object-name”开头的行。我在第 1270 行找到它。将“.asm”添加到内部 for 循环中。将其与 .c、.s 和 .S 放在一起

3.  进口-locals.mk：

    在 LOCAL_CFLAGS 和 LOCAL_CPPFLAGS行*下方*添加以下行

    ```
    LOCAL_YASMFLAGS  := $(LOCAL_CFLAGS) $(strip $(LOCAL_YASMFLAGS)) 
    ```

4.  默认构建命令.mk：

    在文件中的任意位置添加以下行。我把我的放在 TARGET_CXX 部分下面和 TARGET_LD 部分上面。

    ```
    TARGET_ASM       = $(TOOLCHAIN_PREFIX)yasm 
    ```

5.  下载 yasm.exe 并将其复制到构建文件夹：

    从这里下载 YASM 的副本：http: [//yasm.tortall.net/](http://yasm.tortall.net/)

    我有Win64版的NDK，所以下载了Win64版的YASM。如果您有 NDS 的 Win32 版本，请下载 YASM 的 Win32 版本。

    你应该只得到.exe。将其作为 yasm.exe 复制到以下目录。如果您有任何其他工具链版本，请将其复制到这些目录：

    ```
    C:\development\android\ide\android-ndk-r8e-windows-x86_64\toolchains\x86-4.4.3\prebuilt\windows-x86_64\i686-linux-android\bin

    C:\development\android\ide\android-ndk-r8e-windows-x86_64\toolchains\x86-4.6\prebuilt\windows-x86_64\i686-linux-android\bin

    C:\development\android\ide\android-ndk-r8e-windows-x86_64\toolchains\x86-4.7\prebuilt\windows-x86_64\i686-linux-android\bin 
    ```

    然后，将该文件作为 i686-linux-android-yasm.exe 再次复制到以下目录。如上所述，如果您有任何其他工具链版本，请将其复制到这些目录：

    ```
    C:\development\android\ide\android-ndk-r8e-windows-x86_64\toolchains\x86-4.4.3\prebuilt\windows-x86_64\bin

    C:\development\android\ide\android-ndk-r8e-windows-x86_64\toolchains\x86-4.6\prebuilt\windows-x86_64\bin

    C:\development\android\ide\android-ndk-r8e-windows-x86_64\toolchains\x86-4.7\prebuilt\windows-x86_64\bin 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-01T08:22:17.790

感谢 Alex Cohn 并回答了 Dec 的分享；

这个答案扩展了亚历克斯科恩的答案并回答了十二月的答案；

我正在使用 jpeg turbo 1.3.9，ndk-r9d，关于 yasm.exe，包含 ndk-r9d，在回答了 Dec 的第 3 步后，我在 simd/jsimdext.inc 行中有一个错误：182 "%define EXTN(name) _ %+ name ; foo() -> _foo"; 将其更改为“%define EXTN(name) name”；然后好的，这个问题已经解决了；

这是我的 Android.mk

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_CFLAGS += -D__ARM_HAVE_NEON

#ifeq ($(ARCH_ARM_HAVE_NEON),true)
#LOCAL_CFLAGS += -D__ARM_HAVE_NEON
#endif

# From autoconf-generated Makefile
EXTRA_DIST = nasm_lt.sh CMakeLists.txt \
    jccolext-mmx.asm   jcgryext-mmx.asm   jdcolext-mmx.asm   jdmrgext-mmx.asm \
    jccolext-sse2.asm  jcgryext-sse2.asm  jdcolext-sse2.asm  jdmrgext-sse2.asm \
    jccolext-sse2-64.asm  jcgryext-sse2-64.asm  jdcolext-sse2-64.asm \
    jdmrgext-sse2-64.asm

ifeq ($(TARGET_ARCH),arm)
libsimd_SOURCES_DIST := simd/jsimd_arm_neon.S \
                       simd/jsimd_arm.c

AM_CFLAGS := -march=armv7-a -mfpu=neon
AM_CCASFLAGS := -march=armv7-a -mfpu=neon

endif

ifeq ($(TARGET_ARCH),x86)
# List of assembly files needed is derived from content within simd/CMakelists.txt
# The Intel Atom supports x86 32-bit assembly.  So take those files and leave the
# 64-bit behind.

#libsimd_SOURCES_DIST := simd/jsimd_i386.c \
    simd/jsimdcpu.asm \
    simd/jfdctflt-3dn.asm \
    simd/jidctflt-3dn.asm \
    simd/jquant-3dn.asm \
    simd/jccolor-mmx.asm \
    simd/jcgray-mmx.asm \
    simd/jcsample-mmx.asm \
    simd/jdcolor-mmx.asm \
    simd/jdmerge-mmx.asm \
    simd/jdsample-mmx.asm \
    simd/jfdctfst-mmx.asm \
    simd/jfdctint-mmx.asm \
    simd/jidctfst-mmx.asm \
    simd/jidctint-mmx.asm \
    simd/jidctred-mmx.asm \
    simd/jquant-mmx.asm \
    simd/jfdctflt-sse.asm \
    simd/jidctflt-sse.asm \
    simd/jquant-sse.asm \
    simd/jccolor-sse2.asm \
    simd/jcgray-sse2.asm \
    simd/jcsample-sse2.asm \
    simd/jdcolor-sse2.asm \
    simd/jdmerge-sse2.asm \
    simd/jdsample-sse2.asm \
    simd/jfdctfst-sse2.asm \
    simd/jfdctint-sse2.asm \
    simd/jidctflt-sse2.asm \
    simd/jidctfst-sse2.asm \
    simd/jidctint-sse2.asm \
    simd/jidctred-sse2.asm \
    simd/jquantf-sse2.asm \
    simd/jquanti-sse2.asm

libsimd_SOURCES_DIST := simd/jsimd_i386.c simd/jsimd.h simd/jsimdcfg.inc.h simd/jsimdext.inc \
    simd/jcolsamp.inc simd/jdct.inc simd/jsimdcpu.asm \
    simd/jfdctflt-3dn.asm   simd/jidctflt-3dn.asm   simd/jquant-3dn.asm \
    simd/jccolor-mmx.asm    simd/jcgray-mmx.asm     simd/jcsample-mmx.asm \
    simd/jdcolor-mmx.asm    simd/jdmerge-mmx.asm    simd/jdsample-mmx.asm \
    simd/jfdctfst-mmx.asm   simd/jfdctint-mmx.asm   simd/jidctfst-mmx.asm \
    simd/jidctint-mmx.asm   simd/jidctred-mmx.asm   simd/jquant-mmx.asm \
    simd/jfdctflt-sse.asm   simd/jidctflt-sse.asm   simd/jquant-sse.asm \
    simd/jccolor-sse2.asm   simd/jcgray-sse2.asm    simd/jcsample-sse2.asm \
    simd/jdcolor-sse2.asm   simd/jdmerge-sse2.asm   simd/jdsample-sse2.asm \
    simd/jfdctfst-sse2.asm  simd/jfdctint-sse2.asm  simd/jidctflt-sse2.asm \
    simd/jidctfst-sse2.asm  simd/jidctint-sse2.asm  simd/jidctred-sse2.asm  \
    simd/jquantf-sse2.asm   simd/jquanti-sse2.asm
endif

ifeq ($(TARGET_ARCH),mips)
libsimd_SOURCES_DIST := simd/jsimd_mips.c
endif

LOCAL_C_INCLUDES := $(LOCAL_PATH)/simd \
                    $(LOCAL_PATH)/android

LOCAL_SRC_FILES:= $(libsimd_SOURCES_DIST)

LOCAL_CFLAGS := -DAVOID_TABLES  -O3 -fstrict-aliasing -fprefetch-loop-arrays  -DANDROID \
        -DANDROID_TILE_BASED_DECODE -DENABLE_ANDROID_NULL_CONVERT
LOCAL_CFLAGS += -DJPEG_LIB_VERSION=80  # I need version 8 because of some of the methods I depend on

$(warning "libsimd")
LOCAL_MODULE := libsimd
LOCAL_MODULE_FILENAME := libsimd
include $(BUILD_STATIC_LIBRARY)

######################################################
###           libjpeg.so                       ##
######################################################

#include $(CLEAR_VARS)

# From autoconf-generated Makefile
libjpeg_SOURCES_DIST =  jcapimin.c jcapistd.c jccoefct.c jccolor.c \
        jcdctmgr.c jchuff.c jcinit.c jcmainct.c jcmarker.c jcmaster.c \
        jcomapi.c jcparam.c jcphuff.c jcprepct.c jcsample.c jctrans.c \
        jdapimin.c jdapistd.c jdatadst.c jdatasrc.c jdcoefct.c jdcolor.c \
        jddctmgr.c jdhuff.c jdinput.c jdmainct.c jdmarker.c jdmaster.c \
        jdmerge.c jdphuff.c jdpostct.c jdsample.c jdtrans.c jerror.c \
        jfdctflt.c jfdctfst.c jfdctint.c jidctflt.c jidctfst.c jidctint.c \
        jidctred.c jquant1.c jquant2.c jutils.c jmemmgr.c jmemnobs.c \
    jaricom.c jcarith.c jdarith.c \
    turbojpeg.c transupp.c jdatadst-tj.c jdatasrc-tj.c \
    turbojpeg-mapfile

LOCAL_SRC_FILES:= $(libjpeg_SOURCES_DIST)

LOCAL_SHARED_LIBRARIES += libcutils
LOCAL_STATIC_LIBRARIES += libsimd

LOCAL_C_INCLUDES := $(LOCAL_PATH) 

$(warning "libjpeg")

LOCAL_CFLAGS := -DAVOID_TABLES  -O3 -fstrict-aliasing -fprefetch-loop-arrays  -DANDROID \
        -DANDROID_TILE_BASED_DECODE -DENABLE_ANDROID_NULL_CONVERT
LOCAL_CFLAGS += -DJPEG_LIB_VERSION=80  # I need version 8 because of some of the methods I depend on

#D:\android-ndk-r9d\toolchains\x86-4.8\prebuilt\windows-x86_64\bin\i686-linux-android-gcc.exe -E D:\WORKSPACE\MINE\libjpeg_turbo_1.3.9_multi_platform\jni\simd\jsimdcfg.inc.h -o D:\WORKSPACE\MINE\libjpeg_turbo_1.3.9_multi_platform\jni\simd\jsimdcfg.inc

LOCAL_MODULE := libjpeg
LOCAL_MODULE_FILENAME:=libjpeg

LOCAL_STATIC_LIBRARIES += cpufeatures

include $(BUILD_STATIC_LIBRARY) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-21T06:01:41.573

对于任何尝试构建官方 repo 版本的人，我使用此处附带的补丁成功：[libjpeg-turbo cross-compile to Android failed](https://github.com/libjpeg-turbo/libjpeg-turbo/issues/58)。

然后，根据您是为 32 位还是 64 位编译：

```
export CFLAGS="-DSIZEOF_SIZE_T=4" 
```

或者

```
export CFLAGS="-DSIZEOF_SIZE_T=4" 
```

并使用 -DWITH_SIMD=FALSE -DCMAKE_TOOLCHAIN_FILE= *your_toolchain_file*运行 cmake 。

当然，我知道禁用 SIMD 并不理想，但至少我设法获得了可以开始使用的构建。希望构建系统的 NEON SIMD 支持在未来得到修复。使用 ./configure 也无法为 ARM 构建正确的 SIMD。

顺便说一句，我希望人们能为主要的 repo 提供修复，而不是简单地分叉它。自 alex-cohn 的回答中引用的回购协议的最后一次更改已经过去了 2 年。****

# architecture - AppFabric 缓存 - Read-Through/Write-Behind 策略

> ID：12260150
> 
> 赞同：1
> 
> 时间：2012-09-04T09:07:21.063
> 
> 标签：architecture, appfabric, appfabric-cache

在我们的新项目中，我们希望 AppFabric 缓存成为一个关键组件。作为一般准则，我们将有一个写入模型/域和一个读取模型/域：后端服务由提供者/其他服务通知，并将按照业务规则放入缓存中的一些数据。前端服务/网站将根据需要使用数据。

Read-Through/Write-Behind 似乎是一个好方法。但是如何为真正的业务解决方案实施它？我看到的每个示例都使用 ADO.NET 的简单查询来加载数据。在我们的例子中，加载数据是业务相关的，并且会涉及到许多程序集和交互。将我们所有的业务部署到每个缓存主机上似乎不是一个好的解决方案。

另一种方法是每个域都有一个独特的服务，负责从缓存中获取/读取和写入/放入缓存。不理想并且会降低性能，因为它将成为 AppFabric 缓存的包装器。

如果您还有其他问题，请不要犹豫。

感谢帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T18:49:28.953

对于这种情况，一种可能的解决方案是您可以创建一个包含所有业务逻辑和规则的服务（可能驻留在数据库服务器中）以访问数据。而每个通读/后写提供程序将联系该服务以加载数据。这样，您就不需要在每台缓存服务器机器上部署业务逻辑和相关程序集，并且能够同时使用 read-through/write-behind 功能。

对于缓存解决方案，您还可以查看[NCache](http://www.alachisoft.com/ncache/)，它提供了[通读、后写（异步）和直写（同步）](http://www.alachisoft.com/resources/articles/readthru-writethru-writebehind.html)功能，具有更多可配置选项，例如批量后写操作和重试等，以防后写失败。

# ldap - 子组织和唯一 ID

> ID：12260152
> 
> 赞同：1
> 
> 时间：2012-09-04T09:07:38.827
> 
> 标签：ldap, spring-ldap, apacheds

我可以使用 ApacheDS 成功验证我的应用程序

但现在我只使用一个域。

我想在根域下添加子域或子组织。

例如，根组织为

```
dc=example,dc=com 
```

和子组织`dc=x`

另一个子组织`dc=y`

现在我可以使用 uid 属性对用户进行身份验证

像：

```
user-search-filter="(uid={0})" 
```

我使用像 user1 这样的登录名，没有 @ 扩展名

但我想有子组织，我想使用 user1@x.example.com

有可能吗？怎么做？

我的应用程序是一个弹簧应用程序，但我认为主题独立于我的应用程序方面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:00:03.620

在 LDAP 标准跟踪中为电子邮件地址定义的属性是`mail`、`rfc822mailbox`或[RFC4524](https://www.rfc-editor.org/rfc/rfc4524#section-2.16)`0.9.2342.19200300.100.1.3`中定义的属性。也许您的过滤器应该是使用其中一种类型的属性断言，例如.`user-search-filter="mail={0}"`

我不确定“手动”是什么意思。LDAP 没有组织的概念，只有可能属于`organization`. `mail`如果条目属于`objectClass`允许或需要该属性的条目，则这些条目可能具有`mail`属性。换句话说，如果您的过滤器是`mail={0}`（可能变为`mail=user1@x.example.com`），那么使用该过滤器的搜索（给定适当的基础对象和范围）将返回所有具有`mail`属性值的条目，`user1@x.example.com`而不管该用户位于何处，也与属性的值`uid`。

如果组织中的用户可以通过其他方式（可能通过组织或其他属性）识别，则过滤器可以是：

```
(&(uid={0})(o=x)) 
```

或者

```
(&(uid={0})(o=y)) 
```

一种或另一种方式，用户的条目必须可以通过条目的内容来识别。LDAP 数据库中的主键是*专有名称*( `uid=abc,dc=x,dc=example,dc=com`)，但条目中的属性可用于收紧过滤器。一些替代方案是：

*   使用唯一标识符（所有`uid`或`mail`值在数据库中都是唯一的，因此，只有一个会返回到搜索请求）
*   使用属性来识别组织中的用户（如`o`上面的示例过滤器）
*   使用动态组生成组织中的用户列表。
*   考虑使用可扩展的匹配过滤器使可分辨名称中的值成为过滤过程的一部分

### 也可以看看

*   [使用 ldapsearch](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/) - 这篇文章是关于`ldapsearch`命令行工具的，但是这些概念在构建搜索请求时很有用
*   [掌握搜索过滤器](http://ff1959.wordpress.com/2011/09/21/mastering-ldap-search-filters/)

# asp.net - ASP.Net 中的 Membership.GetAllUsers

> ID：12260159
> 
> 赞同：0
> 
> 时间：2012-09-04T09:07:57.533
> 
> 标签：asp.net, asp.net-membership

我正在构建一个用户管理页面，并尝试使用以下代码检索注册用户的数量和当前在线的数量。（仅供参考...我使用 mySQL 作为会员提供程序）asp_net_users 中目前有 4 个用户表，因此至少 4 应该出现在 GetAllUsers 请求中。

```
lblOnlineUsers.Text = Membership.GetNumberOfUsersOnline().ToString()
lblTotalUsers.Text = Membership.GetAllUsers.Count.ToString() 
```

标签始终为空白。即使我在页面加载中放了一个 MsgBox(Membership.GetAllUsers.Count.ToString())，那个 msgbox 也永远不会出现。关于我在这里做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:13:23.533

You valid your user credential with `ValidateUser` or `UpdateUser` method , and you re-test

# php - 循环输入项以获得最小值最大值

> ID：12260160
> 
> 赞同：1
> 
> 时间：2012-09-04T09:07:59.250
> 
> 标签：php, jquery

我有一个关于 JQuery Min Max Validation 循环通过动态创建的输入项的问题。在我的 php 页面中，我有一个动态表，它遍历数据库中的数据。有时我有一个包含 3 个输入项（单元格）的表格，有时包含 6 个或 12 个输入项。我发现使用 jquery 可以验证数据的最小值 - 最大值，但它仅适用于第一个输入项。如何循环遍历所有输入项以获得相同的最小最大验证？

这里的JQuery代码：

```
 $(document).ready(function(){
        $("input").click(function(){

                var enteredValue = $("input:#value_one").val();
                var min=1;
                var max = 3;
                var num = parseInt(enteredValue);

                if (min > num || max < num) {
                    alert('Number ' + num + ' is not a number between ' + min + ' and ' + max);
                    return false;
                }
        });
    }); 
```

这里除了 PHP HTML 代码：

```
 foreach($datas as $idactivite=>$dat){
        $totalactiv=0;
        $nbdiviseur=0;
        foreach($dat as $dd){
            $totalactiv+=$dd["note"];
            $nbdiviseur++;
        }
        $mamoyactiv=$totalactiv/$nbdiviseur;
        $position=3;
        $mamoyactiv = substr($mamoyactiv, 0, $position);
        $moyenneverticale[$idactivite]=$mamoyactiv;

// Here the input Item who loops through the DB Query to get them values:       

        $htmldroit.="<td id='myguaNote' bgcolor='$bgcolor' align='center'>

        <input name='".$idactivite."_".$idagent."' id='value_one' maxlength='1' class='grand' value='".$dat[$idagent]["note"]."' ></td>";

        $totalfamille+=$dat[$idagent]["note"];
        $TabRes[$ind] += $dat[$idagent]["note"];
        $TabObj[$ind] = "&nbsp;";
        $TabResColor[$ind]=0;

        $ind++;
    } 
```

有人有什么想法吗？

提前 THX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:12:44.217

我认为您并没有真正选择实际单击的输入字段。

替换`var enteredValue = $("input:#value_one").val()`为

```
 var enteredValue = $(this).val(); 
```

回调函数 from保存对关键字`click`中单击的 DOM 元素的引用。`this`将其包装`$()`成一个 jQuery 对象，最后调用`val()`它。

[**小提琴**](http://jsfiddle.net/Bpa5d/)

*编辑：* 要验证按钮单击时的多个输入字段，我使用了帮助程序类`validate`。假设您要验证的所有输入字段都具有此类，您可以绑定一些代码以在单击时提交按钮：

```
$("#submitButton").click(function(){
    $(".validate").each(validateField);
}); 
```

`validate`首先将选择所有具有该类的元素，在这个集合中，我们调用 jQuery 的[each()](http://api.jquery.com/jQuery.each/)，它接受一个函数句柄作为参数。这个函数（`validateField`在这种情况下）应该接受输入参数（索引和元素，有关更多详细信息，请参阅文档 - 如果您认为“for in”循环有一个奇怪的 for ，那么您并不遥远。）。
我在此函数中移动了您的验证代码，并简单地替换`$(this)`为`$(element)`

[**小提琴**](http://jsfiddle.net/mg4xq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:13:27.360

一些提示

如果您正在处理动态数据，则不要使用简单的“点击”功能，而是尝试[.on](http://api.jquery.com/on/)（使用 jQuery **1.7+**）

```
 $('document').on('click', 'input', function(){

   var enteredValue = $(this).val();
   //your rest of code
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:14:52.277

|| if (min > num || max < num) {

改成

```
// For a number not between min and max
if (num < min || num > max) {

// For a number between min and max
if (num >= min && num <= max) { 
```

供测试用：

```
 <script>

        function test(){

            $html = document.getElementById("msg");

            num = 100;
            min = 10;
            max = 100;

            if (num < min || num > max) {
            $html.innerHTML = "Num is not between min and max";
            return;
            }

            if (num >= min && num <= max) {
            $html.innerHTML = "Num is between min and max";
            return;
            }

        }

        </script>
        <body onload="test()">
        <div id="msg" style="border:1px solid #000000; height:100px">Answer has not been found!</div>
        </body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T09:15:11.307

听起来您可能正在寻找[.on()](http://api.jquery.com/on/)，它会随着页面的变化保持最新状态，而您的点击只是页面创建时的状态。尝试：

```
$("input").on("click",function(){ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T09:20:38.000

试试这个

//========== 找出数组中最小值的原型========================

```
 Array.prototype.min = function() 
        {
            return Math.min.apply(null, this)
        } 
```

//============= Jquery脚本================================= ===================

```
 $selector=$("input");  //Your selector which is cursoring your inputs
            $aryVal=new Array;     //Define an Array
            $selector.each(function() //Iterate to all the input
            {
                $aryVal.push(this.value); //push the value to array
            });

            var min = Math.min.apply(null, $aryVal);  //Getting min value from array
            alert(min); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T09:21:29.440

创建用于在某处注入变量的动态元素数量时的良好做法是：

1.  提供唯一 ID 用于识别。
2.  使用 CSS 类。类样式是要重复的，ID 不是。

因此，如果我要生成多个输入 1 到 100

```
for ($i = 1; $i <= 100; $i++)
{
    $IdAndName = "input" . $i;
    echo("<input type='text' id='" . $IdAndName . "' name='" . $IdAndName . "' class='myStyle'/><br>\n");
} 
```

现在您将拥有 ID 为 input1 到 input100 的 HTML 元素

然后，您可以使用 JQuery click 事件，然后使用 $(this).val() 来检索它的点击值。

# android - 为 Android ActionBar 设置渐变

> ID：12260164
> 
> 赞同：2
> 
> 时间：2012-09-04T09:08:20.807
> 
> 标签：android, android-actionbar, actionbarsherlock, xml-drawable

我在我的应用程序中使用了 ActionBarSherlock 库。我还需要自定义 ActionBar，所以我添加了一个带有`background`参数集的自定义主题，如下所示：

```
<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">

<item name="background">@drawable/action_bar_bg</item>

<item name="android:background">@drawable/action_bar_bg</item>

</style> 
```

`action_bar_bg`drawable 只是平铺正方形的位图：

```
<?xml version="1.0" encoding="utf-8"?>

<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true"
    android:src="@drawable/bg_img_actionbar"
    android:tileMode="repeat" /> 
```

我接下来要做的是为整个ActionBar设置一个线性渐变，这样它就会覆盖这个背景。我不知道这是否可能以及如何做到这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:56:35.317

有一种资源类型，Shape Drawable：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

# c# - 如何使用 BlockingCollection 分批

> ID：12260166
> 
> 赞同：15
> 
> 时间：2012-09-04T09:08:28.427
> 
> 标签：c#, .net, concurrency

我想出了一些代码来消耗队列中的所有 wating 项目。与其逐个处理项目，不如将所有等待项目作为一个集合进行处理。

我已经这样声明了我的队列。

```
private BlockingCollection<Item> items = 
    new BlockingCollection<Item>(new ConcurrentQueue<Item>); 
```

然后，在消费者线程上，我计划像这样分批读取项目，

```
Item nextItem;
while (this.items.TryTake(out nextItem, -1))
{
    var workToDo = new List<Item>();
    workToDo.Add(nextItem);

    while(this.items.TryTake(out nextItem))
    {
        workToDo.Add(nextItem);
    }

    // process workToDo, then go back to the queue.
} 
```

这种方法缺乏实用性，[`GetConsumingEnumerable`](http://msdn.microsoft.com/en-us/library/dd287186.aspx)我不禁想知道我是否错过了更好的方法，或者我的方法是否有缺陷。

有没有更好的`BlockingCollection<T>`批量消费a的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-11-26T01:43:40.160

一种解决方案是使用[`BufferBlock<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.bufferblock-1)来自 [System.Threading.Tasks.Dataflow](https://www.nuget.org/packages/System.Threading.Tasks.Dataflow/4.11.0-preview3.19551.4)（包含在 .net core 3+ 中）。它不使用[`GetConsumingEnumerable()`](http://msdn.microsoft.com/en-us/library/dd287186.aspx)，但它仍然允许您使用相同的实用程序，主要是：

*   允许使用多个（对称和/或不对称）消费者和生产者进行并行处理
*   线程安全（允许上述情况） - 无需担心竞争条件
*   可以通过取消令牌和/或收集完成来取消
*   消费者阻塞直到数据可用，避免在轮询时浪费 CPU 周期

还有一个[`BatchBlock<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.batchblock-1), 但这将您限制为固定大小的批次。

```
var buffer = new BufferBlock<Item>();
while (await buffer.OutputAvailableAsync())
{
    if (buffer.TryReceiveAll(out var items))
        //process items
} 
```

这是一个工作示例，它演示了以下内容：

*   并行处理可变长度批次的多个对称消费者
*   多个对称生产者（在此示例中并非真正并行运行）
*   生产者完成后完成收集的能力
*   为了使示例简短，我没有演示如何使用`CancellationToken`
*   能够等到生产者和/或消费者完成
*   从不允许异步的区域调用的能力，例如构造函数
*   `Thread.Sleep()`调用不是必需的，但有助于模拟在更繁重的场景中会发生的一些处理时间
*   the`Task.WaitAll()`和 the`Thread.Sleep()`都可以选择转换为它们的异步等效项
*   无需使用任何外部库

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using System.Threading.Tasks.Dataflow;

static class Program
{
    static void Main()
    {
        var buffer = new BufferBlock<string>();

        // Kick off consumer task(s)
        List<Task> consumers = new List<Task>();
        for (int i = 0; i < 3; i++)
        {
            consumers.Add(Task.Factory.StartNew(async () =>
            {
                // need to copy this due to lambda variable capture
                var num = i; 
                while (await buffer.OutputAvailableAsync())
                {
                    if (buffer.TryReceiveAll(out var items))
                        Console.WriteLine($"Consumer {num}:    " + 
                            items.Aggregate((a, b) => a + ", " + b));

                        // real life processing would take some time
                        await Task.Delay(500); 
                }

                Console.WriteLine($"Consumer {num} complete");
            }));

            // give consumer tasks time to activate for a better demo
            Thread.Sleep(100); 
        }

        // Kick off producer task(s)
        List<Task> producers = new List<Task>();
        for (int i = 0; i < 3; i++)
        {
            producers.Add(Task.Factory.StartNew(() =>
            {
                for (int j = 0 + (1000 * i); j < 500 + (1000 * i); j++)
                    buffer.Post(j.ToString());
            }));

            // space out the producers for a better demo
            Thread.Sleep(10); 
        }

        // may also use the async equivalent
        Task.WaitAll(producers.ToArray());
        Console.WriteLine("Finished waiting on producers");

        // demo being able to complete the collection
        buffer.Complete(); 

        // may also use the async equivalent
        Task.WaitAll(consumers.ToArray()); 
        Console.WriteLine("Finished waiting on consumers");

        Console.ReadLine();
    }
} 
```

这是代码的现代化和简化版本。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using System.Threading.Tasks.Dataflow;

class Program
{
    private static async Task Main()
    {
        var buffer = new BufferBlock<string>();

        // Kick off consumer task(s)
        var consumers = new List<Task>();
        for (var i = 0; i < 3; i++)
        {
            var id = i;
            consumers.Add(Task.Run(() => StartConsumer(id, buffer)));

            // give consumer tasks time to activate for a better demo
            await Task.Delay(100);
        }

        // Kick off producer task(s)
        var producers = new List<Task>();
        for (var i = 0; i < 3; i++)
        {
            var pid = i;
            producers.Add(Task.Run(() => StartProducer(pid, buffer)));

            // space out the producers for a better demo
            await Task.Delay(10);
        }

        // may also use the async equivalent
        await Task.WhenAll(producers);
        Console.WriteLine("Finished waiting on producers");

        // demo being able to complete the collection
        buffer.Complete();

        // may also use the async equivalent
        await Task.WhenAll(consumers);
        Console.WriteLine("Finished waiting on consumers");

        Console.ReadLine();
    }

    private static async Task StartConsumer(
            int id,
            IReceivableSourceBlock<string> buffer)
    {
        while (await buffer.OutputAvailableAsync())
        {
            if (buffer.TryReceiveAll(out var items))
            {
                Console.WriteLine($"Consumer {id}: " + 
                    items.Aggregate((a, b) => a + ", " + b));
            }

            // real life processing would take some time
            await Task.Delay(500);
        }

        Console.WriteLine($"Consumer {id} complete");
    }

    private static Task StartProducer(int pid, ITargetBlock<string> buffer)
    {
        for (var j = 0 + (1000 * pid); j < 500 + (1000 * pid); j++)
        {
            buffer.Post(j.ToString());
        }

        return Task.CompletedTask;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:38:18.893

虽然在某些方面不如`ConcurrentQueue<T>`，但我自己的方法`LLQueue<T>`允许使用[AtomicDequeueAll](http://hackcraft.github.com/Ariadne/documentation/html/M_Ariadne_Collections_LLQueue_1_AtomicDequeueAll.htm)方法进行批量出队，其中当前队列中的所有项目都在单个（原子和线程安全）操作中从队列中取出，然后在非供单个线程使用的线程安全集合。此方法专为您要批量读取操作的场景而设计。

这不是阻塞，虽然它可以用来很容易地创建一个阻塞集合：

```
public BlockingBatchedQueue<T>
{
  private readonly AutoResetEvent _are = new AutoResetEvent(false);
  private readonly LLQueue<T> _store;
  public void Add(T item)
  {
    _store.Enqueue(item);
    _are.Set();
  }
  public IEnumerable<T> Take()
  {
    _are.WaitOne();
    return _store.AtomicDequeueAll();
  }
  public bool TryTake(out IEnumerable<T> items, int millisecTimeout)
  {
    if(_are.WaitOne(millisecTimeout))
    {
      items = _store.AtomicDequeueAll();
      return true;
    }
    items = null;
    return false;
  }
} 
```

这是一个不执行以下操作的起点：

1.  在处置时处理等待中的读者。
2.  担心一个潜在的竞争，多个读者都被一个正在阅读时发生的写入触发（它只是认为偶尔的空结果可以枚举是可以的）。
3.  将任何上限放在写作上。

所有这些都可以添加，但我想尽量减少一些实际用途，希望在上面定义的限制范围内不会出现问题。

# c++ - 类模板特化中的成员函数语法

> ID：12260172
> 
> 赞同：5
> 
> 时间：2012-09-04T09:08:42.937
> 
> 标签：c++, templates, syntax, template-specialization

我有一个类模板，我们称之为它`A`，它有一个成员函数`abc()`：

```
template <typename T>
class A{
public:
    T value;
    void abc();
}; 
```

`abc()`我可以使用以下语法在类声明之外实现成员函数：

```
template <typename T>
void A<T>::abc()
{
    value++;
} 
```

我想做的是为这个类创建一个模板专业化，比如说`int`.

```
template <>
class A<int>{
public:
    int value;
    void abc();
}; 
```

**问题是：**`abc()`为专业类实现的正确语法是什么？

我尝试使用以下语法：

```
template <>
void A<int>::abc()
{
   value += 2;
} 
```

但是，这不会编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:12:07.753

删除`template<>`：

```
void A<int>::abc()
{
   value += 2;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T09:12:13.573

```
void A<int>::abc()
{
   value += 2;
} 
```

因为`A<int>`是. `explicit specialisation`_`A<T>`

[http://liveworkspace.org/code/982c66b2cbfdb56305180914266831d1](http://liveworkspace.org/code/982c66b2cbfdb56305180914266831d1)

n3337 14.7.3/5

> **显式特化类模板的成员以与普通类成员相同的方式定义，而不是使用 template<> 语法**。
> 
> [ 例子：
> 
> ```
> template<class T> struct A {
> struct B { };
> template<class U> struct C { };
> };
> template<> struct A<int> {
> void f(int);
> };
> void h() {
> A<int> a;
> a.f(16);
> }
> // A<int>::f must be defined somewhere
> // template<> not used for a member of an
> // explicitly specialized class template
> void A<int>::f(int) { /∗ ... ∗/ } 
> ```

# javascript - 如何获取显示在谷歌搜索右侧的图片链接

> ID：12260174
> 
> 赞同：4
> 
> 时间：2012-09-04T09:08:43.147
> 
> 标签：javascript, html, ruby-on-rails, ruby, api

当你在谷歌上搜索比尔盖茨时，

[https://www.google.com/#hl=en&sugexp=les%3B&gs_nf=1&tok=tZLQEkbVdJM-Nt6k14b-hA&cp=6&gs_id=3p&xhr=t&q=bill+gates&pf=p&output=search&sclient=psy-ab&oq=bill+g&gs_l=&pbx =1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=c2c622f5707131aa&biw=1868&bih=732](https://www.google.com/#hl=en&sugexp=les;&gs_nf=1&tok=tZLQEkbVdJM-Nt6k14b-hA&cp=6&gs_id=3p&xhr=t&q=bill+gates&pf=p&output=search&sclient=psy-ab&oq=bill+g&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=c2c622f5707131aa&biw=1868&bih=732)

你会得到这些图像。我想知道他们从哪里来的任何 api 来提取这些图像链接？

我尝试了谷歌的自定义搜索 API。我似乎没有得到这些，因为它按我指定的域（如谷歌、维基百科等）进行搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:22:07.863

Google 使用 Freebase，维基百科的语义网络表示，作为它的知识图谱。您可以从 Google API 控制台获取 api 密钥，并对 freebase 进行查询以查找此类图像。更多信息：[http ://wiki.freebase.com/wiki/ApiImage](http://wiki.freebase.com/wiki/ApiImage)

其他选项是，您可以使用 dbpedia（也是维基百科的语义网络表示）来查找此类结果。

# c# - 如何将自定义 IDesigner 移动到同一解决方案中的单独程序集？

> ID：12260199
> 
> 赞同：2
> 
> 时间：2012-09-04T09:09:58.583
> 
> 标签：c#, winforms, windows-forms-designer

我创建了一个具有设计时支持的自定义用户控件，如下所示：

**项目/程序集“MyUserControl”**

*   我的用户控件.cs
*   MyUserControlDesigner.cs

代码是这样的：

```
namespace MyUserControl
{
  [Designer("MyUserControl.Design.MyUserControlDesigner, MyUserControl", typeof(IDesigner))]
  public class MyUserControl : Control
  {
    // Some stuff here
  }
}

namespace MyUserControl.Design
{
  public class MyUserControlDesigner : ControlDesigner
  {
    // Some other stuff here
  }
} 
```

只要这两个类在同一个程序集中，一切正常。VS2012 显示了我所有的设计器选项。但出于明显的原因（对 System.Design 和其他的引用），我不想在 MyUserControl 程序集中，而是在 MyUserControl.Design 中使用设计器代码。所以我在同一个解决方案中创建了第二个项目：

**项目/程序集“MyUserControl”**

*   我的用户控件.cs

**项目/程序集“MyUserControl.Design”**

*   MyUserControlDesigner.cs

代码是这样的：

```
namespace MyUserControl
{
  [Designer("MyUserControl.Design.MyUserControlDesigner, MyUserControl.Design", typeof(IDesigner))]
  public class MyUserControl : Control
  {
    // Some stuff here
  }
} 
```

使用这个的时候，根本找不到设计师。VS2012 不显示可在线选择的组件，而是显示没有附加设计器的组件。

我是否必须将我的设计器程序集添加到 GAC 才能让 VS2012 找到它，或者这里有什么问题？

**编辑：**向 WindowsFormsApplication1 添加对 MyUserControl.Design 的引用时一切正常，但这正是您不想要的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:49:14.980

您将需要创建`MyUserControlDesigner`一个公共课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T06:14:21.440

我遇到了完全相同的问题。只有当我通过以下方式指定设计器类时，它才开始为我工作。

```
namespace MyUserControl
{
  [Designer("MyUserControl.Design.MyUserControlDesigner, MyUserControl.Design,  Version=1.0.0.0, Culture=neutral, PublicKeyToken=8bc98ae14acadc09", typeof(IDesigner))]
  public class MyUserControl : Control
  {
    // Some stuff here
  }
} 
```

# seo - SEO - 临时未发布的页面 - 返回哪个 http 状态代码？

> ID：12260201
> 
> 赞同：1
> 
> 时间：2012-09-04T09:10:10.433
> 
> 标签：seo, http-status-code-404, http-status-code-301, http-status-codes, http-status-code-307

在我的 CMS 中，有一些页面暂时未发布，后来又重新发布。从 SEO 的角度来看，这是处理它们的最佳方式。告诉搜索引擎删除它们，或者它们是临时移动的？

并非所有页面总是被重新发布，在某些情况下返回的状态代码不是最佳选择，但我想以正确的方式处理将要重新发布的页面比那些永远不会重新发布的页面更有意义是。

当用户或搜索引擎尝试浏览此页面时返回哪个状态？302？307？404？或者哪种是处理这种情况的最佳方法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:14:28.117

Some suggest using a `503` for reasons explained here:

[http://news.softpedia.com/news/Take-Down-Your-Website-Temporarily-Without-Affecting-Google-Ranking-246829.shtml](http://news.softpedia.com/news/Take-Down-Your-Website-Temporarily-Without-Affecting-Google-Ranking-246829.shtml)

# rss - 使用 RealStudio (REALbasic) 发布博客条目

> ID：12260213
> 
> 赞同：1
> 
> 时间：2012-09-04T09:11:01.673
> 
> 标签：rss, blogs, realbasic

我想在 RealStudio 中编写一个实用程序，将博客条目发布到博客服务器......如果这有意义的话。

有没有人这样做过，并愿意举例说明他们做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:07:26.980

您需要知道用于发布到服务器的 API。查看[HTTPSocket](http://docs.realsoftware.com/index.php/HTTPSocket)和 Post 方法，了解与 Web 服务器通信的一种方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:00:58.757

正如最古老的答案所说，您需要知道服务器使用的 API（用于博客）。然后，您将需要使用 HTTPSocket 读取/写入 API。

您是否有理由编写新应用程序以发布到博客？那里有很多工具。

# java - 为什么即使设置了边界，我的面板也没有正确定位？

> ID：12260218
> 
> 赞同：0
> 
> 时间：2012-09-04T09:11:31.933
> 
> 标签：java, jframe, jpanel

我正在尝试使用单选按钮制作一个简单的 GUI，并将它们分组到一个面板中。我希望它位于最左侧，所以我使用了 setBounds 方法。无论我在参数上输入什么数字，面板都不会移动。面板不受 setBounds 方法的影响吗？或者有另一种方法来定位我的面板。这是我的代码片段：

```
 JPanel radioPanel = new JPanel();
    radioPanel.setLayout(new GridLayout(3,1));
    JRadioButton Rbutton1 = new JRadioButton("Credit Card");
    JRadioButton Rbutton2 = new JRadioButton("E-Funds");
    JRadioButton Rbutton3 = new JRadioButton("Check");
    Rbutton3.setSelected(true);
    ButtonGroup Bgroup = new ButtonGroup();
    Bgroup.add(Rbutton1);
    Bgroup.add(Rbutton2);
    Bgroup.add(Rbutton3);
    radioPanel.add(Rbutton1);
    radioPanel.add(Rbutton2);
    radioPanel.add(Rbutton3);
    radioPanel.setBounds(10,50,50,40); //this is where I'm trying to position the panel with the radio buttons
    paymentPanel.add(radioPanel);
    contentPane.add(paymentPanel); //contentPane is the frame
    contentPane.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:37:39.200

设置框架的布局。例如：

```
 contentPane.setLayout(new BorderLayout());
    contentPane.add(paymentPanel, BorderLayout.LINE_START); 
```

有关布局管理器的更多信息，您可以在此处找到：布局管理器[的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:35:58.947

您应该阅读将为您执行此操作的[布局管理器。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)我会建议使用[GUI Builder Tool](https://developers.google.com/java-dev-tools/wbpro/)，但你的家庭作业可能不允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:45:50.353

您可以将布局设置为 contentPane 的空布局。

```
contentPane.setLayout(null); 
```

然后，您`setBounds()`将完全按照您的设计工作。

**笔记：**

如果调整包含容器的窗口大小，创建具有绝对定位容器的容器可能会导致问题。

# null - PHP 回显 `null` 值

> ID：12260219
> 
> 赞同：2
> 
> 时间：2012-09-04T09:11:33.943
> 
> 标签：null, xampp, wampserver

我最近从 XAMPP 移植到最新的 WAMP 版本。以前服务器中的所有代码都可以正常工作，特别是显示 Null 值。

```
In XAMPP:

echo $a;

If $a is not yet declared, the system just prints nothing. 
```

然而，

```
in WAMP

echo $a;

If $a is not yet declared, the system gives an error `Undefined Variable`. 
```

我检查了我的 php.ini 配置文件和 httpd.conf 但仍然无法让新版本显示空值。

问题：

**无论如何，配置中是否有让 php 显示空值而不声明它或任何东西？**

PS：我们使用的 XAMPP 是 1.7.3 我现在使用的 WAMP 是 2.2e

请帮忙。谢谢你。:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:18:22.583

它可能是 PHP 错误级别的 PHP 设置。

PHP 仅在启用 PHP Notices 时显示未定义的变量。

默认情况下，XAMPP 可能不会启用 PHP 通知，而 WAMP 很可能会启用。

要使 WAMP 不输出未定义的变量，请打开 php.ini 并将“error_reporting”更改为：

```
error_reporting = E_ALL & ~E_NOTICE 
```

这应该告诉 PHP 输出除通知之外的所有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T10:38:34.717

您的 WAMP 设置将配置为显示错误和通知，请参阅[http://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

这是开发的好习惯，您还应该先声明变量，或者在操作它们之前检查它们是否已启动

例如 ：

```
echo isset($a) ? $a : NULL; 
```

PHP 抛出错误是有原因的，这些不应该被简单地忽略。如果你这样做了，你最终会遇到问题，更不用说巨大的错误日志文件了。

# dojo - 在 Dojo Toolkit 中通过 id 查找特定小部件

> ID：12260220
> 
> 赞同：1
> 
> 时间：2012-09-04T09:11:44.990
> 
> 标签：dojo

我正在使用 Dojo Toolkit 开发一个移动应用程序。我有以下小部件：

```
define("js/custom/CustomHeading", [ "dojo/_base/declare", "dojo/dom-construct",
    "dojo/dom-class", "dojox/mobile/Heading", "dojox/mobile/ToolBarButton",
    "dojo/ready" ], function(declare, domConstruct, domClass, Heading,
    ToolBarButton, ready) {

return declare("js.custom.CustomHeading", [ Heading ], {

    buildRendering : function() {
        this.inherited(arguments);

        navigationButton = new dojox.mobile.ToolBarButton({
            icon : "js/custom/images/navigation.png"
        });

        navigationButton.placeAt(this.domNode);

        ready(function() {
            console.log("I entered the block.");
        });

    }
}); 
```

});

如果我尝试使用 找到我的 html 中的小部件`dijit.byId()`，我不会得到成功的结果。Dojo 找不到小部件，但它在那里。我要查找的小部件如下所示：

```
<div id="navigationOverlay" data-dojo-type="dojox.mobile.Overlay">
    <ul data-dojo-type="dojox.mobile.RoundRectList">
        <li data-dojo-type="dojox.mobile.ListItem"
            data-dojo-props="moveTo:'dataServerRuntime',transition:'slide',label:'Health Summary'"
            onclick="hideNavigation();"></li>
    </ul>
</div> 
```

我究竟做错了什么？如何找到小部件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:19:00.397

使用[`dojo/ready`](http://livedocs.dojotoolkit.org/dojo/ready)：

```
ready(function() {
    var navigationWidget = reqistry.byId("navigationOverlay"); 
}) 
```

jsFiddle 的一个例子：http: [//jsfiddle.net/phusick/tgU2x/](http://jsfiddle.net/phusick/tgU2x/)

# android - 处理点击搜索建议 (ContentProvider)

> ID：12260223
> 
> 赞同：1
> 
> 时间：2012-09-04T09:11:57.877
> 
> 标签：android, search, android-contentprovider

我正在使用内容提供商来提供搜索建议，但我在处理建议点击时遇到了问题。我解释说搜索效果很好，但是当我单击建议时，我会转到搜索活动，但什么也没有。我的搜索代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_list_item_2);
    DataBaseUtil.startDataBase(getApplicationContext());

    // Get the intent, verify the action and get the query
    Intent intent = getIntent();
    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);

        Cursor cursorAdapter = GetListResult(query);

        if (cursorAdapter != null) {
            cursorAdapter.moveToFirst();
        }
        startManagingCursor(cursorAdapter);
        String[] from = new String[] { SearchManager.SUGGEST_COLUMN_ICON_1,
                BaseColumns._ID, SearchManager.SUGGEST_COLUMN_TEXT_1,
                "project_id" };
        int[] displayViews = new int[] { R.id.row_image, R.id.name_entry,
                R.id.name_id, R.id.name_descrption };

        final SimpleCursorAdapter listAdapter = new SimpleCursorAdapter(
                this, R.layout.layout_row, cursorAdapter, from,
                displayViews);

        final ListView list = (ListView) findViewById(android.R.id.list);
        list.setAdapter(listAdapter);

        list.setOnItemClickListener(new ListView.OnItemClickListener() {
            public void onItemClick(AdapterView<?> l, View v, int position,
                    long id) {
                Cursor cursor = (Cursor) listAdapter.getItem(position);
                String i = String.valueOf(cursor.getInt(cursor
                        .getColumnIndex("project_id")));

                Intent intent = new Intent(ItemIntent.this,
                        AcceuilProjet.class);
                intent.putExtra("folderId", "0");

                intent.putExtra("projectName", " ");
                intent.putExtra("projectId", Long.valueOf(i));

                startActivity(intent);
            }
        });
    }

} 
```

这是我的提供者

```
@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {

    String[] columns = new String[] {
              BaseColumns._ID,
          ProjectPersistence.KEY_WORD,
          ProjectPersistence.KEY_DEFINITION,
           /* SearchManager.SUGGEST_COLUMN_SHORTCUT_ID,
                            (only if you want to refresh shortcuts) */
              SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID};

    Cursor rtnCursor = null;
    Cursor rtnCursorProject = null;

//  Cursor rtnCursorMessage = null;
    String word = uri.getLastPathSegment();

    Log.d(TAG, " Search Provider query, word: " + word);

    if (!word.equals(SEARCH_QUERY)) {
        try {
            rtnCursorProject = ProjectPersistence.fetchProjectCursor(word);

        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        }

        rtnCursor = getMatrixCursor(rtnCursorProject);

    } else if (word.equals(SEARCH_QUERY_VIEW)) {
        // Handle a suggestions click (because the suggestions all use
        // ACTION_VIEW)
        try {
            rtnCursorProject = ProjectPersistence.fetchProjectCursor(word);
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Toast.makeText(getContext(), "anything", Toast.LENGTH_SHORT).show();
        Log.d("Provider", "this is a item click");
    }

    return rtnCursor;
} 
```

如果可以，请你帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T18:46:42.453

尝试这个：

```
 if (Intent.ACTION_VIEW.equals(intent.getAction())) {
                // handles a click on a search suggestion; launches activity to show word
                Intent intentShowLocal = new Intent(this, DetailsLocalActivity.class);
                intentShowLocal.setData(intent.getData());
                startActivity(intentShowLocal);
            } 
```

# javascript - 在服务器中编码并使用转义在 javascript 中解码

> ID：12260224
> 
> 赞同：0
> 
> 时间：2012-09-04T09:12:01.007
> 
> 标签：javascript, asp.net, encoding

我必须在 c# 中编码字符串并使用 javascript unescape 函数对其进行解码。

javascript unescape 是唯一的选择，因为我将带有 get 请求的字符串发送到一些使用 unescape 对其进行解码的 api。

我几乎尝试了一切

```
server.urlencode
WebUtility.HtmlEncode 
```

还有很多其他编码！我什至尝试`Uri.EscapeDataString`使用 jscript

没有什么不像“转义”功能那样编码的

知道如何使它工作吗？

编辑：

这是我的代码

```
string apiGetRequest = String.Format("http://212.00.00.00/Klita?name={0}&city={1}&CREATEBY=test ", Uri.EscapeDataString(name), Uri.EscapeDataString(city));
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(apiGetRequest);
req.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:26:30.907

你能举一个你想要编码的字符串和编码结果的例子吗？

URLencoding 是您需要的正确编码类型。确保不要在代码中的某处对字符串进行双重编码。

您可能需要使用`decodeURIComponent`而不是`unescape`，因为`unescape`它*不*支持 UTF-8，因此可能会在解码后导致字符串损坏。

有关详细信息，请参阅[http://xkr.us/articles/javascript/encode-compare/](http://xkr.us/articles/javascript/encode-compare/)。

**编辑：**

我对 asp 了解不多，但看起来你不是用浏览器而是用你的 ASP 服务器端应用程序访问 url。好吧，您的服务器不运行任何 JS 代码。您将只检索 HTML 标记，也许还有一些 JS 代码作为一个大字符串。此代码将在浏览器中解析和执行，而不是在 ASP 中。

# javascript - 悬停时的Jquery不起作用

> ID：12260235
> 
> 赞同：38
> 
> 时间：2012-09-04T09:12:26.420
> 
> 标签：javascript, html, jquery, hover, jquery-events

我正在更改我的代码以与 jQuery 1.8 兼容，但我坚持这个`hover`不起作用。当我使用相同的东西时，`click`它起作用了。这是我的代码，谁能告诉我哪里出错了？

```
$(document).on('hover', '.top-level', function (event) {
  $(this).find('.actionfcnt').show();
  $(this).find('.dropfcnt').show();
}, function () {
  $(this).find('.dropfcnt').hide('blind', function () {
    $('.actionfcnt').hide();
  });
}); 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-04T09:16:58.597

***自 jQuery 1.8 起已弃用****：名称“hover”用作字符串“mouseenter mouseleave”的简写。它为这两个事件附加了一个事件处理程序，处理程序必须检查 event.type 以确定事件是 mouseenter 还是 mouseleave。**不要将**“悬停”伪事件名称与接受一两个函数的 .hover() 方法混淆。*

来源：[http ://api.jquery.com/on/#additional-notes](http://api.jquery.com/on/#additional-notes)

这几乎说明了一切，您不能为此使用“悬停”：

```
$(document).on('mouseenter','.top-level', function (event) {
    $( this ).find('.actionfcnt').show();
    $( this ).find('.dropfcnt').show();
}).on('mouseleave','.top-level',  function(){
    $( this ).find('.dropfcnt').hide('blind', function(){
        $('.actionfcnt').hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-04T09:16:20.437

没有“悬停”事件。有 .hover() 函数需要 2 个回调（如您的示例中所示）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-04T09:15:49.337

`.on`函数只有 3 个参数：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

如果您不需要将处理程序也绑定到动态添加的元素，那么您可以使用`hover`带有 2 个事件处理程序的旧函数。

```
$('.top-level').hover(function (event) { 
  $(this).find('.actionfcnt').show();
  $(this).find('.dropfcnt').show();
}, function (event) {   
  $(this).find('.dropfcnt').hide('blind', function(){
    $('.actionfcnt').hide();
  });
});​ 
```

顺便说一句，`$(selector).hover(handlerIn, handlerOut)`是 的简写`$(selector).mouseenter(handlerIn).mouseleave(handlerOut);`。

如果需要，请使用`on`for`mouseenter`和`mouseleave`事件：

```
$(document).on('mouseenter', '.top-level', function (event) { 
  $(this).find('.actionfcnt').show();
  $(this).find('.dropfcnt').show();
}).on('mouseleave', '.top-level', function (event) {   
  $(this).find('.dropfcnt').hide('blind', function(){
    $('.actionfcnt').hide();
  });
});​ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-04T09:22:57.593

尝试：

```
$(".top-level").on({
    mouseenter: function (event) {
        $( this ).find('.actionfcnt').show();
        $( this ).find('.dropfcnt').show();
    },
    mouseleave: function (event) {
        $( this ).find('.dropfcnt').hide('blind', function(){
            $('.actionfcnt').hide();
        });
    }
}); 
```

或者

```
$(".top_level").on("hover", function(event) {
  if(event.type == "mouseenter") {
    $( this ).find('.actionfcnt').show();
    $( this ).find('.dropfcnt').show();
  }
  else if (event.type == "mouseleave") {
    $( this ).find('.dropfcnt').hide('blind', function(){
        $('.actionfcnt').hide();
    });
  }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T09:16:55.853

尝试

```
$('.top-level').hover(function (event) {
        $( this ).find('.actionfcnt').show();
        $( this ).find('.dropfcnt').show();
}, function(){
        $( this ).find('.dropfcnt').hide('blind', function(){
            $('.actionfcnt').hide();
        });
}); 
```

# c++ - 如果我在头文件中实现一个类会发生什么？

> ID：12260236
> 
> 赞同：7
> 
> 时间：2012-09-04T09:12:26.587
> 
> 标签：c++, header

> **可能重复：**
> [C++ 中的内联函数](https://stackoverflow.com/questions/2501776/inline-functions-in-c)

如果我在头文件中完全实现一个类，编译器会做什么？一个典型的例子如下：

```
class MyException
{    
public:
    explicit MyException(const char* file, int line) file(file), line(line) {};
    const char* getFile() const { return file };
    int getLine() const { return line };
private:
    const char* const file;
    const int line;
}; 
```

我的意图是使用这样的类：`throw MyException(__FILE__, __LINE__)`.

我将此头文件包含在每个 .cpp 文件中。我想编译器会按定义的次数编译该类，并将（相同的）机器代码包含到它生成的每个目标文件中。现在，链接器会做什么？我尝试了一个更简单的例子（没有那些讨厌`const`的），它编译得很好。

如果我在头文件中实现了一个三屏长的 C 函数，而不是一个简单的类，会发生什么？最后一个问题，我应该将我的示例拆分为 .h 和 .cpp 文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T09:19:02.513

所有方法都将是内联方法。您可能会在整体编译上浪费一些最少的时间，但没关系。据我所知，唯一可能发生的问题是如果你有一个静态的非成本成员变量。然后你必须为其分配一个存储位置（如果需要，可以放置一个定义和初始值），`.cpp`否则你会得到关于多个定义的链接器错误。

我见过只有头文件的项目，它只有`main()`CPP 中的功能，但它是大量模板化的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T09:18:21.277

类定义本身不会产生任何代码。它只是向该类的用户展示它是如何布局的，因此他们可以生成适当的代码来操作它。

生成代码的是类的成员函数。当您在类定义中定义一个成员函数时，它会为该函数提供一个隐式`inline`声明。

可以通过以下两种方式之一编译和链接函数调用：

(1) 可以在镜像中放置一个末尾带有 RETURN 汇编指令的功能代码的单个副本，并且可以在调用处放置一条 CALL 汇编指令（连同参数传递和返回值传递）以转移控制权到这个代码。

或者

(2) 函数实现的完整副本可以替换调用处的整个函数调用。

声明的函数`inline`是对编译器的建议，以第二种方式进行。此外，`inline`声明允许在多个翻译单元中定义函数（因此可以将其放置在共享头文件中）。为了让编译器可以选择实现第二种方法，它需要在编译时获得函数实现的副本。如果函数实现在外部翻译单元中，则此选项不可用。

还应该注意的是，现代编译器使用内联声明的函数做复杂的事情。看：

[http://gcc.gnu.org/onlinedocs/gcc/Inline.html](http://gcc.gnu.org/onlinedocs/gcc/Inline.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-04T09:57:16.393

当您在头文件中实现成员函数时，所有这些函数都会隐式变为`inline`.

> **这是什么意思，它有什么影响？**

根据 **C++03 标准§7.1.3/4：**

*   它提示编译器在调用点替换函数体优于通常的函数调用机制。
*   即使省略了内联替换，也会遵循内联的其他规则（尤其是一个定义规则）。

所以是的，每个翻译单元都会有`inline`函数的定义。这*可能会*导致二进制文件的大小增加。

通常，如果需要，任何好的主流编译器都会在调用点替换函数体，因此`inline`仅将函数标记为 #1 并不是一个好主意，但如果你想让你的类的用户清楚你的***意图***，那么你可以这样做在标头中定义函数或将函数显式标记为`inline`.

> **我应该把我的例子分成`.h`和`.cpp`文件吗？**

是的，这是大多数项目使用的通常编译模型，其中您将接口（.h）与实现（.cpp）分开。接口作为头文件与代码的用户共享，同时提供实现以二进制的形式。在*某种程度上*，这为您的知识产权提供了保障。
这被称为***分离模型***。

使用模板的 C++ 项目通常会使用***包含模型***，而不是通常 C++ 项目的分离模型。

# java - Is it possible to link objects on a unique column?

> ID：12260239
> 
> 赞同：0
> 
> 时间：2012-09-04T09:12:40.170
> 
> 标签：java, hibernate, orm

I'm using Hibernate 3.2.7.ga and I'm wondering if the following is possible.

Let's say there are 3 objects: Person, Town and Mayor.

When registering a Person in the application, you're asked to enter his or her town of residence. This field is saved as a String.

In another part of the application, you can register a Town (with it's name, number of inhabitants, etc.). After the Town is registered, you can add a Mayor to this town.

However, it is not desired to create a Town object for every town that is entered with a Client. An object is only desired when a Mayor needs to be registered.

I'm wondering if, just bij using the String field in Person, you can get the Mayor of the Town the Person lives in.

I'm thinking along these lines of code:

 `````
public class Client.java
{
  @Id
  public Long id;

  @Column(nullable = true, ??? )
  public String townOfResidence;

  public Mayor getMayor()
  {
    ...
  }
}

public class Town.java
{
  @Id
  public Long id;

  @Column(nullable = false, unique = true)
  public String name;

  @OneToOne
  public Mayor mayor;
} 
````  `I just tried thinking along the following lines:

 `````
@Transient
private Town townObject;

@ManyToOne(fetch = FetchType.LAZY, cascade = javax.persistence.CascadeType.ALL, targetEntity = Town.class, optional = true)
@JoinColumn(referencedColumnName = "town")
public Town getTown()
{
    return townObject;
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:22:56.703

使用这种设计，您需要使用查询来获取此人所在城镇的市长：

```
select mayor from Town town
inner join town.mayor mayor
where town.name = :theTownOfResidenceOfTheClient 
```

此查询必须作为 DAO/Repository 类的方法的一部分执行。市长不能在`getMayor()`Client 对象的方法中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:23:59.733

这更像是一个 ERD 问题而不是 ORM 问题。

要么你有和之间的关系`Person`，`Town`要么你没有。如果有，则只能选择引用表中键中的引用属性中的值，或者为 null（如果有效）。如果你没有关系，你就没有任何限制。

当然，您无需建立关系即可尝试在查询/JPQL 中混合它们。如果没有关系，您的程序可能会提供城镇的`Town`可能值列表`Person`，而不是强迫他们选择一个。或者你可以做类似的事情

```
 SELECT t FROM Town t WHERE t.name = ? 
```

并通过那里的人镇。当然，也没有安全性，它不会为空。

另一种方法可能是有两列，一列作为对 Town 的引用（允许为空），另一列作为自由文本。如果城镇在表中，则使用引用，如果不是，则使用字符串。当然，这会使您的程序逻辑相当复杂。````

# ruby-on-rails-3 - Override model attribute

> ID：12260241
> 
> 赞同：1
> 
> 时间：2012-09-04T09:12:48.093
> 
> 标签：ruby-on-rails-3, attributes

Here is the thing. I have a Country model with two columns "languages" and "default_language". So for instance, for switzerland these columns are set respectively to "de,fr,it" and "de".

Now, if I do Country.languages I get the "de,fr,it" string. How can I override this so when I get Country.languages I get an array ["de","fr","it"] ?

Sure I could create a function def available_languages, but still, I don't want languages to be public.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T09:20:57.620

对于这种情况下的简单数组，最好编写自己的解决方案。

这可以通过覆盖 getter/setter 方法来完成：

在您的模型中：

```
class Country < ActiveRecord::Base
  def languages
    read_attribute(:languages).split(',')
  end
  def languages=(array)
    write_attribute(:languages,array.join(','))
  end
end 
```

对于哈希，您可以使用`ActiveRecord::Store`，请参阅[http://api.rubyonrails.org/classes/ActiveRecord/Store.html](http://api.rubyonrails.org/classes/ActiveRecord/Store.html)

对于更一般的对象（不仅仅是数组，您可以使用`serialize`），请参阅[http://duanesbrain.blogspot.co.nz/2007/04/ruby-on-rails-persist-array-to-database.html](http://duanesbrain.blogspot.co.nz/2007/04/ruby-on-rails-persist-array-to-database.html)

# r - DJUS sector data

> ID：12260246
> 
> 赞同：1
> 
> 时间：2012-09-04T09:12:54.040
> 
> 标签：r, quantmod

How can I get data on Dow Jones Industry sectors? I have no trouble getting individual stock symbols. However, market sector data such as DJUSTC ( ie $DJUSTC or ^DJUSTC) don't seam to work in Yahoo or Google.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:34:03.407

[这个雅虎！帮助文章](http://help.yahoo.com/kb/index?page=content&y=PROD_FIN&locale=en_US&id=SLN2332&impressions=false)说

> ... 雅虎！不再获得为道琼斯指数提供数据下载的许可。
> 
> 目前，道琼斯工业平均指数 [^DJI] 数据只能在屏幕上查看。它不能再下载了。

我相信这会扩展到工业平均指数以外的其他道琼斯指数，因为在[http://finance.yahoo.com/q/hp?s=%5EDJUSTC+Historical+Prices上没有下载 csv 的链接](http://finance.yahoo.com/q/hp?s=%5EDJUSTC+Historical+Prices)

据推测，谷歌与道琼斯有类似的协议。

# c# - How to use chart control

> ID：12260250
> 
> 赞同：-1
> 
> 时间：2012-09-04T09:13:16.960
> 
> 标签：c#, asp.net-mvc-3, charts

How can we use chart control in MVC, I need sample code with little coding, just to understand the approach of creating chart controls in MVC, like how to bind data etc.

Tried few samples but not able to understand the approach.

I just tried to use `@Html.Chart()` in my view but I'm unable to use it.

NOTE: I don't want to use any 3rd party controls.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:18:13.537

这是我的剃刀视图代码，非常适合我。

```
@{
        var key = new Chart(width: 300, height: 300)
          .AddTitle("Employee Chart")
          .AddSeries(
              chartType: "Bubble",
              name: "Employee",
              xValue: new[] { "Peter", "Andrew", "Julie", "Dave" },
              yValues: new[] { "2", "7", "5", "3" });     
    }
    <!DOCTYPE html>
    <html>
    <head>
        <title>Test</title>
    </head>
    <body>
        <div> 
            <div>
                @key.Write()
            </div>
        </div>
    </body>
    </html> 
```

注意：此渲染以图像格式响应。

# c# - Get Facebook Contacts and other type contact Information From WP7 Contacts Data

> ID：12260255
> 
> 赞同：0
> 
> 时间：2012-09-04T09:13:46.040
> 
> 标签：c#, windows-phone-7

I have some plain contacts in my phone and I have also configured facebook,google and hotmail in my phone. In my native people hub I can see my phone contacts as well my facebook contacts and others too. I want to get information of all contacts that have phone number. How I can get that from WP7 contacts api.

```
 var Contacts = new Microsoft.Phone.UserData.Contacts();

        // hook up an event handler to retrieve the contacts after we've searched for them on the WP7
        Contacts.SearchCompleted += ContactsSearchCompleted;

        //Start the search asynchronously.
        Contacts.SearchAsync(String.Empty, FilterKind.None, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:30:36.483

以这种方式搜索并不是特别适合搜索具有值的联系人，而是搜索具有特定值的联系人。

您可以对单个字符进行多次搜索（使用该`FilterKind.PhoneNumber`选项），然后将它们组合起来。

获得所有结果（就像您在代码中一样）然后直接查询它们可能会容易得多。

就像是：

```
foreach (var contact in e.Results)
{
    if (contact.PhoneNumbers.Count() > 0)
    {
        // This contact has at least 1 phone number. 
        // Do something approrpiate with it
    }
} 
```

# algorithm - 如何调查算法是否可以使用 opencl

> ID：12260256
> 
> 赞同：1
> 
> 时间：2012-09-04T09:13:52.773
> 
> 标签：algorithm, opencl

我在 C# 中有一个重型算法，它需要两个`Bitmap`大约 10000x5000 的大 s 并在 3D 模型上执行照片和光线碰撞操作，以将照片映射到 3D 模型上。

我想知道是否可以将这样的算法转换为 OpenCL 以优化算法期间的并行操作。但在请您详细介绍算法之前，我想知道如何调查我的算法是否可转换为 OpenCL。

我在 OpenCL 方面没有经验，我想知道是否值得进入并了解它是如何工作的。有没有我必须寻找的东西在显卡上肯定不起作用？（for循环，递归）

更新：

我的算法类似于：

```
foreach photo
    split the photo in 64x64 blocks
    foreach block
        cast a ray from the camera to the 3D model
        foreach triangle in 3D model
            perform raycheck 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:48:17.317

是的，opencl 非常适合这种类型的工作。光线投射是gpu硬件可以大放异彩的地方。

一种划分方法：

```
foreach photo - work done by host application. (openmp?)
foreach block - use one opencl work group per block
foreach triangle in 3D model - single work item 
```

当你实现这个算法时，还有一些其他的事情需要考虑。

1) 每块是否总是有 64^2 条光线要投射？

2) 什么比例的光线会“击中”图像和/或几何图形？条件分支会损害 gpu 硬件的性能。

3）您是否考虑过从几何角度而不是图像进行投射？即foreach三角形，foreach顶点，从相机投射光线并检测屏幕上的位置。您也许可以对三角形上的剩余点进行插值，并对结果进行 z 缓冲，以防止重绘像素。

4) 如果您只是处理图形，opengl/directx 是否已经具备您需要的功能？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:26:00.277

对于您的具体问题： for 循环很好（尽管不是最佳的）；递归在 GPU 上是不可能的。

一般来说，在 GPU 上运行良好的算法需要有大量独立的数据并行操作。很多位图操作都属于这一类，另一方面，光线追踪可能具有挑战性。

如果您可以修改您的算法，以便在最高级别有很多（数千个）独立块，那么块内较低级别的依赖关系应该没问题。

对于这样一个笼统的话题，我想这就是我所能说的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T14:07:37.620

在 OpenCL 中执行此操作之前，我将采取中间步骤将其转换为多线程 C 程序。您已经从这一步观察到速度大幅提高，而且要容易得多。此外，要在 OpenCL 中编写内核，您需要使用与普通 C 非常相似的 OpenCL C - 因此从这个中间步骤开始的翻译步骤将比直接从 C# 更容易

最后，要做 OpenCL 版本，您要做的就是与 GPU 共享来自主机的照片内存（实际上对于图像，它具有特殊的内存 API，仅用于知道像素编码的图像以某种方式与 OpenGL 兼容) 然后创建一个 raycheck 内核，然后从主机为每个块/三角形排队 raycheck 内核。

ATI 在 OpenCL 上有一个很好的介绍性演讲

[http://www.youtube.com/watch?v=ecYIsu83c0I](http://www.youtube.com/watch?v=ecYIsu83c0I)

# android - adb 今天无法连接到 VirtualBox 中的 Android-x86

> ID：12260257
> 
> 赞同：17
> 
> 时间：2012-09-04T09:14:03.647
> 
> 标签：android, adb, virtualbox, android-x86

我在VirtualBox中成功安装了Android-x86-v3.2-eeepc一段时间。它是帮助我在 Android 上调试 USB 主机应用程序的好方法。这种配置的安装是：

*   安装 VirtualBox
*   将 Android-x86-v3.2-eeepc 镜像安装到 VBOX 中的虚拟硬盘中
*   将网络设置为“仅限主机”
*   进入控制台，输入“dhcpcd eth0”获取IP地址，如“192.168.56.101”
*   进入主机控制台，输入“adb connect 192.168.56.101”

通常，连接到运行在 Android-in-VBox 中的 adb 守护程序应该是可以的。

今天突然提示我如下：

```
C:\>adb connect 192.168.56.101
unable to parse 192.168.56.101 as <host>:<port> 
```

我试图ping它的IP。它具有快速响应。我试图强制执行 IP 和端口。

```
C:\>adb connect 192.168.56.101:5554
unable to connect to 192.168.56.101:5554 
```

我不知道它的根本原因。我检查了防火墙，VirtualBox 在例外列表中。它仍然不起作用。

电脑配置：Windows XP VirtualBox V4.1

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-19T20:56:37.847

要使用 adb 连接 Android 虚拟机，请按照以下步骤操作

1.  在 Android 主屏幕上，按`ALT`+ `F1`（左 alt）。这将打开一个具有 root 访问权限的终端。

2.  在终端内，键入`dhcpcd eth0`。如果出现错误或没有结果，请执行该命令两次。这将为您提供 IP 地址。现在按`ALT`+`F7`关闭终端。

3.  使用命令验证您的 IP 地址`ping <your IP Address>`

4.  在 android 终端中，键入`adb tcpip 5555`. 这将以 tcpip 模式重新启动 adb。

5.  从您的主 OS 终端，键入`adb connect <your IP address>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:32:32.003

我为第二个适配器使用桥接网络并使用该 IP 地址；即`adb connect 192.168.1.20`。就可以获取IP了`Settings->About Phone->Status`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T21:31:55.183

ALT+F1 技巧看起来不错，但对我不起作用。

1.  我确实运行了 androvmConfiguration 应用程序，单击了保存，然后确认了重新启动操作。
2.  重新启动后，我关闭并关闭了 VirtualBox，然后启动了 AndroVMPlayer。
3.  现在`adb connect <your IP address>`为我工作！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-18T10:28:22.513

它适用于我而不是我的本地机器 IP 我插入了 android 终端 IP 即 192.168.56.101

# java - jaxb：将属性绑定到元素

> ID：12260259
> 
> 赞同：2
> 
> 时间：2012-09-04T09:14:28.080
> 
> 标签：java, jaxb, xml-binding

如何使用 JAXB 实现这个 XML？目前，grantA,C,B 元素中的 expires 属性没有限制 - 但它应该。我不知道如何将元素与属性相关联。我必须为每个grantA、C、B 创建类吗？
XML:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <customers>
        <customer>
            <name>C1</name>
            <grantA expires="">false</grantA>
            <grantB expires="">true</grantB>
            <grantC expires="">true</grantC>
        </customer>
        <customer>
            <name>C2</name>
            <grantA expires="">false</grantA>
            <grantB expires="">true</grantB>
            <grantC expires="">true</grantC>
        </customer>
        <customer>
            <name>C3</name>
            <grantA expires="">false</grantA>
            <grantB expires="">true</grantB>
            <grantC expires="">false</grantC>
        </customer>
    </customers> 
```

XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="name" type="xs:string" />

    <xs:element name="grantA" type="xs:boolean" />
    <xs:element name="grantB" type="xs:boolean" />
    <xs:element name="grantC" type="xs:boolean" />

    <xs:element name="customers" type="customers" />
    <xs:element name="customer">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="name" />
                <xs:element name="grantA">
                    <xs:complexType>
                        <xs:simpleContent>
                            <xs:extension base="xs:string">
                                <xs:attribute name="expires" type="xs:string" />
                            </xs:extension>
                        </xs:simpleContent>
                    </xs:complexType>
                </xs:element>
                <xs:element name="grantB">
                    <xs:complexType>
                        <xs:simpleContent>
                            <xs:extension base="xs:string">
                                <xs:attribute name="expires" type="xs:string" />
                            </xs:extension>
                        </xs:simpleContent>
                    </xs:complexType>
                </xs:element>
                <xs:element name="grantC">
                    <xs:complexType>
                        <xs:simpleContent>
                            <xs:extension base="xs:string">
                                <xs:attribute name="expires" type="xs:string" />
                            </xs:extension>
                        </xs:simpleContent>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:complexType name="customers">
        <xs:sequence>
            <xs:element ref="customer" minOccurs="0" maxOccurs="unbounded" />
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

我现在的状态是：

客户.java：

```
@XmlRootElement(name = "customers")
public class Customers
{
    private List<Customer>  customerList;

    @XmlElement(name = "customer")
    public List<Customer> getCustomerList()
    {
        if (null == customerList)
        {
            customerList = new ArrayList<Customer>();
        }
        return customerList;
    }

    public void setCustomerList(List<Customer> customers)
    {
        this.customerList = customers;
    }

} 
```

客户.java

```
@XmlRootElement(name = "customer")
@XmlType(propOrder = { "name", "grantA", "grantB", "grantC" })
public class Customer
{
    private String  name = "";
    private boolean grantA;
    private boolean grantB;
    private boolean grantC;

    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)   
    @XmlElement(name = "name", required=true)
    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    @XmlElement(name = "grantA", required=true)
    public boolean isGrantA()
    {
        return grantA;
    }

    public void setGrantA(boolean grantA)
    {
        this.grantA = grantA;
    }

    @XmlElement(name = "grantB", required=true)
    public boolean isGrantB()
    {
        return grantB;
    }

    public void setGrantB(boolean grantB)
    {
        this.grantB = grantB;
    }

    @XmlElement(name = "grantC", required=true)
    public boolean isGrantC()
    {
        return grantC;
    }

    public void setGrantC(boolean grantC)
    {
        this.grantC = grantC;
    }

    @Override
    public String toString()
    {
        return "" + name + "[ " + grantA + ", " + grantB + " " + grantC + " ]";
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:21:05.273

您可以创建一个类，`Grant`，如下所示：

```
@XmlType
public class Grant {
    @XmlAttribute
    private String expires;

    @XmlValue
    private boolean value;

    //getters and setters
} 
```

并在`Customer`类中使用不同的名称映射它，如下所示：

```
public class Customer
{
    private String  name = "";
    @XmlElement(name="grantA");
    private Grant grantA;

    @XmlElement(name="grantB");
    private Grant grantB;

    @XmlElement(name="grantC");
    private Grant grantC;

    //rest of the code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:22:58.330

您可以使用类来表示具有 expires 属性的布尔值。注释用于将[`XmlValue`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlValue.html)其属性之一表示为元素的内容，而另一个属性可以注释为[`XmlAttribute`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlAttribute.html).

```
@XmlType
class BooleanWithExpires {
    @XmlValue public boolean value;
    @XmlAttribute public String expires;
} 
```

然后您可以使用该类型而不是`boolean`用于不同的授权成员。是否要使用此类将数据存储在`Customer`对象中，或者是否以其他方式存储信息并且仅在内部存储和`BooleanWithExpires`XML 子元素的 getter 和 setter 之间进行转换，这取决于您。

如果这更符合您的编码风格，请随意将代码从公共成员更改为 getter 和 setter。还要确保使用最适合的任何类型`expires`，例如[`XMLGregorianCalendar`](http://docs.oracle.com/javase/7/docs/api/javax/xml/datatype/XMLGregorianCalendar.html). `expires`如果这适合您，您可能还希望根据需要指定属性。

# android - How to get zoom value of arbitrary matrix?

> ID：12260260
> 
> 赞同：5
> 
> 时间：2012-09-04T09:14:27.960
> 
> 标签：android, matrix, rotation, zooming, scale

An image is scaled by a matrix:

```
Matrix matrix = new Matrix();
matrix.postScale(...);
matrix.postTranslate(...);
matrix.postRotate(...);
... 
```

I hope the zoomed image won't be less than the half of original, so the total zoom should not less that 0.5.

But how to do that? I tried to get the first value of matrix to check:

```
float pendingZoom = 0.6f;

float[] values = new float[9];
Matrix.getValues(values);
float scalex = values[Matrix.MSCALE_X]; 
```

Then:

```
if(scalex<0.5) {
    pendingZoom = pendingZoom * (0.5f / scalex);
} 
```

unfortunately, it doesn't work sometimes. If the image has been rotated, the `scalex` may be negative, the `pendingZoom` will be negative too.

How to do this correctly?

* * *

**UPDATE**

I just found the `values[Matrix.MSCALE_X]` is not a realiable zoom value. I use it to calculate the new width of a rect, it's not correct.

Instead, I tried to map two points by the matrix, and calculate the two distances:

```
PointF newP1 = mapPoint(matrix, new PointF(0, 0));
PointF newP2 = mapPoint(matrix, new PointF(width, 0));
float scale = calcDistance(newP1, newP2) / width; 
```

I can get correct `scale` value now. But I'm not sure if it's best solution.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T09:28:27.353

```
 float scalex = values[Matrix.MSCALE_X];
    float skewy = values[Matrix.MSKEW_Y];
    float scale = (float) Math.sqrt(scalex * scalex + skewy * skewy); 
```

这个解决方案看起来更简单，但我认为你的解决方案更清晰，几乎和这个解决方案一样快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T11:35:47.063

you can just take the absolute value

```
Math.abs(mMatrixValues[Matrix.MSCALE_X]); 
```

# ios - shouldAutorotateToInterfaceOrientation not being called in iOS 6

> ID：12260261
> 
> 赞同：65
> 
> 时间：2012-09-04T09:14:28.833
> 
> 标签：ios, ios6, orientation

I'm using MGSplitViewController and I'm using`shouldAutorotateToInterfaceOrientation` to control the size of the master view controller on rotation.

It's all working fine on iOS 5 but on iOS 6 (both simulator and iPad) `shouldAutorotateToInterfaceOrientation` is never called.

Is this a bug that I should expect to be fixed with the final release of iOS 6 or something that I'm not aware of has changed?

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-02-18T14:20:04.193

请仔细阅读此内容，否则您可能会因为发疯、打架、摇晃、转动您的测试设备而失去 1-2 天的生命，就像动物园里的黑猩猩抓住游客的手机一样！迟早......承诺:)

在 iOS 6 中

```
shouldAutorotateToInterfaceOrientation: 
```

已弃用并替换为

```
shouldAutorotate 
```

这意味着 iOS 6 永远不会调用`shouldAutorotateToInterfaceOrientation`：

因此，如果您在应用程序中使用了以下内容

**iOS6 之前**（iOS5、iOS4 等）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if (interfaceOrientation == UIInterfaceOrientationPortrait) {
// your code for portrait mode

}

return YES;
} 
```

你应该使用

**iOS 6+**之后****

 **```
- (BOOL)shouldAutorotate {

UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];

if (orientation == UIInterfaceOrientationPortrait) {
// your code for portrait mode

}

return YES;
} 
```

**意识到**

**`UIInterfaceOrientation`**是一个属性，`UIApplication`并且仅包含 4 种与状态栏方向相对应的可能性：

```
UIInterfaceOrientationPortrait = UIDeviceOrientationPortrait,

UIInterfaceOrientationPortraitUpsideDown = UIDeviceOrientationPortraitUpsideDown,

UIInterfaceOrientationLandscapeLeft = UIDeviceOrientationLandscapeRight,

UIInterfaceOrientationLandscapeRight = UIDeviceOrientationLandscapeLeft 
```

不要将其与

**`UIDeviceOrientation`**这是`UIDevice`类的一个属性，包含 7 个可能的值：

```
UIDeviceOrientationUnknown - Can not be determined

UIDeviceOrientationPortrait - Home button facing down

UIDeviceOrientationPortraitUpsideDown - Home button facing up

UIDeviceOrientationLandscapeLeft - Home button facing right

UIDeviceOrientationLandscapeRight - Home button facing left

UIDeviceOrientationFaceUp - Device is flat, with screen facing up

UIDeviceOrientationFaceDown - Device is flat, with screen facing down 
```

即使你理论上可以使用**`UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];`**which 返回`UIDeviceOrientation`- 设备实际方向 - 但你必须知道这*`UIDeviceOrientation`*并不总是相等的*`UIInterfaceOrientation`*！例如，当您的设备放在普通桌子上时，您可能会收到意想不到的价值。

您也可以使用**`UIInterfaceOrientation orientation = self.interfaceOrientation;`**which 返回`UIInterfaceOrientation`界面的当前方向，但它是 的属性`UIViewController`，因此您只能在`UIViewController`类中访问它。

如果您想同时支持之前的 iOS6 (iOS3/4/5) 和 iOS6 设备 - 这可能很明显 - 只需在您的代码中同时使用`shouldAutorotateToInterfaceOrientation:`和。`shouldAutorotate`

**从 iOS 6**开始，设备在应用启动期间会检查 3 个级别和 3 个步骤，如果您愿意，您必须对其进行控制。

```
1\. Info.plist - Supported Interface Orientations 
```

您可以在“摘要”选项卡中以图形方式设置。允许的方向顺序很重要，您可以通过编辑 手动更改它`info.plist`，并且设备将在应用程序启动时选择第一个！这一点至关重要，因为当有可能`[UIDevice currentDevice].orientation`未知时，应用程序的启动总是会出现问题，尤其是当我们在平坦的表面上测试我们的应用程序时。

![XCode 中的 plist 设置（信息）](../Images/45b5fdeda3bccb9d6b78fdf7f4d48f24.png)

**请注意** (iPad) 或 (iPhone) 扩展程序还有其他两种设置可能性，如果您使用其中任何一种，它将使用当前设备或模拟器的设置，而忽略没有扩展程序的常规设置。因此，如果您运行仅 iPhone 的应用程序并且不小心在 plist 中的某处留下了“支持的界面方向 (iPad)”行，即使没有任何数据，它也会忽略您之前在常规设置中建立的规则（在我的 iPhone 示例中） ) 并且即使您的应用不打算在 iPhone 上使用给定的方向，但 iPad将使用它，这可能会导致无法预料的错误，

```
2\. AppDelegate - application:supportedInterfaceOrientationsForWindow 
```

返回您希望允许的每个方向的位掩码列表，它会覆盖 info.plist 设置。每次设备旋转时至少调用一次。

```
3\. Top-level view controller or RootViewController - supportedInterfaceOrientations 
```

它与应用程序和应用程序委托的集合产生交集，该集合必须具有非零结果以避免崩溃。每次设备旋转时至少调用一次，除非我们的控制器中安装了另一种方法：

```
shouldAutorotate 
```

这会干扰应用程序允许的方向，并给出`BOOL`默认值`YES`。

```
BE CAREFUL when you use `NavigationController` 
```

作为您的最顶层控制器`AppDelegate`，如下所示：

```
DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:detailViewController];
self.window.rootViewController =nil;
self.window.rootViewController = navigationController;
[self.window makeKeyAndVisible];
return YES; 
```

在这种情况下，您必须将以下代码`AppDelegate`作为类的类别附件放置在您的`NavigationController`类中，因为这是最顶层的控制器，如果您没有对其子类别，则没有可以设置其方向的位置/代码设置，因此`rootViewController`在这种情况下，您需要强制它检查您的真实情况`detailViewController`：

```
@implementation UINavigationController (OrientationSettings_IOS6)

-(BOOL)shouldAutorotate {
return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations {
return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

在此之后，您可以使用 iOS 6 中可用的任何方法在“最顶部” `ViewController`（在我的示例中为）中设置首选方向，如下所示：`detailViewController``ViewControllers`

```
1\. (BOOL)shouldAutorotate

2\. (NSUInteger)supportedInterfaceOrientations

3\. (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-09-17T08:20:15.663

好的，我让它在 iOS6 iPad 模拟器中工作。耶。这是我所做的：

我只是给你看之前和之后，它应该是不言自明的：

**前**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

if (interfaceOrientation==UIInterfaceOrientationPortrait) {
 // do some sh!t

}

return YES;
} 
```

**后**

```
- (BOOL)shouldAutorotate {

UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];

if (orientation==UIInterfaceOrientationPortrait) {
 // do some sh!t

}

return YES;
} 
```

至于支持的方向，您可以在 info.plist 中指定如下： ![支持的方向图片](../Images/fc75f3af740a84dc04d2863a01e877e4.png)

或使用代码：

```
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait; // etc
} 
```

* * *

编辑：再想一想，如果您计划支持较低版本（iOS4.3/5/5.1）以及 6.0，那么只需包含具有相同代码内容的两种方法。为我工作（无论如何在 sim 中）

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-09-21T09:35:14.950

设置应用程序窗口路由控制器，而不是仅将其视图添加为对我有用的子视图（就像 Rocotilos 所做的那样）

```
//    [self.window addSubview:self.topLevelNavigationController.view];
self.window.rootViewController = self.topLevelNavigationController; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-10-16T20:05:00.790

这是 iOS 5 和更早版本代码的解决方案，不涉及复制您的逻辑。只需将此代码添加到您的视图控制器，它就会从您现有的 shouldAutorotateToInterfaceOrientation 方法生成supportedInterfaceOrientations。

```
-(BOOL)shouldAutorotate{
    return YES;
}

-(NSInteger)supportedInterfaceOrientations{
NSInteger mask = 0;
if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight])
    mask |= UIInterfaceOrientationMaskLandscapeRight;
if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeLeft])
    mask |= UIInterfaceOrientationMaskLandscapeLeft;
if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortrait])
    mask |= UIInterfaceOrientationMaskPortrait;
if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortraitUpsideDown])
    mask |= UIInterfaceOrientationMaskPortraitUpsideDown;
return mask;
} 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-09-25T09:39:00.030

对我来说一个快速的解决方法是在我的根视图控制器上添加这个代码

```
- (BOOL)shouldAutorotate {
    return [self shouldAutorotateToInterfaceOrientation:self.interfaceOrientation];
} 
```

这样，我仍然使用与 iOS 6 之前的版本相同的逻辑。当然，我最初在我的应用程序委托中正确设置了 rootViewController，而不是仅仅添加到 Windows 子视图中。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-10-11T02:04:02.153

虽然许多响应都指出了解决方案——即为 iOS 6 构建实现 shouldAutorotate 和 supportedInterfaceOrientations——但您还应该意识到，如果您的视图控制器托管在导航控制器中，那么这一切都无关紧要，因为运行时将在 UINavigationController 实例上调用这些，否则忽略您的代码。

显然，“解决方案”是将 UINavigationController 子类化并在此子类上实现这些新方法，如下所述： [iOS 6 UITabBarController support orientation with current UINavigation controller](https://stackoverflow.com/questions/12504464/ios-6-uitabbarcontroller-supported-orientation-with-current-uinavigation-control)

然后你有幸改变你使用 UINavigationController 的所有代码来使用这个新的子类。

这一定是我见过的 iOS 版本中最无意义和最烦人的重大更改之一。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-10-10T06:55:21.007

IOS 5

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
if (UIInterfaceOrientationLandscapeLeft) {
        return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
    }
    if (UIInterfaceOrientationLandscapeRight) {
        return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
    }
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

IOS 6

```
-(BOOL)shouldAutorotate{
    return YES;
}

-(NSInteger)supportedInterfaceOrientations:(UIWindow *)window{

    //    UIInterfaceOrientationMaskLandscape;
    //    24
    //
    //    UIInterfaceOrientationMaskLandscapeLeft;
    //    16
    //
    //    UIInterfaceOrientationMaskLandscapeRight;
    //    8
    //
    //    UIInterfaceOrientationMaskPortrait;
    //    2

    //    return UIInterfaceOrientationMaskLandscape;
    return 24;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-14T03:33:26.927

这适用于 iOS6 和 Xcode 4.5 GM：

在 AppDelegate.m 上

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    .....

    //   self.window.rootViewController = self.navigationController;

    [window setRootViewController:navigationController];

    .....

    return YES;
} 
```

在视图控制器上：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration

{
    if (UIInterfaceOrientationIsLandscape(interfaceOrientation))

    {
      // landscape
    }
    else
    {
      //portrait
    }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-11-15T14:04:08.507

这是来自 Apple 的 iOS SDK XCode4.5+ 的引用（请参阅 UIViewController 类参考，处理视图旋转）：

> 在 iOS 6 中，您的应用支持在应用的 Info.plist 文件中定义的界面方向。视图控制器可以覆盖**supportedInterfaceOrientations**方法来限制支持的方向列表。一般情况下，系统***只会在窗口的根视图控制器****或呈现为填满整个屏幕的视图控制器上**调用此方法***；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。**

 **同样在 iOS6 中， UIViewController 类的 shouldAutorotateToInterfaceOrientation **:**方法已被弃用。

因此，在您的根视图控制器中，您执行 ff：

```
- (BOOL)shouldAutorotate {
  return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
  return UIInterfaceOrientationMaskPortrait;
} 
```

顺便说一句，“根视图控制器”是您设置为**appDelegate****窗口**对象的 rootViewController的任何 UIViewController 子类。您通常在 appDelegate 的**application:didFinishLaunchingWithOptions:**方法中执行此操作。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
  // Override point for customization after application launch.
  self.window.rootViewController = [FFDashboardController create];
  [self.window makeKeyAndVisible];
  return YES;
} 
```

至于使用 UINavigationController 作为根 VC，请查看[Vladimir's answer](https://stackoverflow.com/a/13137994/425694)。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-11-26T02:00:38.627

In response to @Rocotilos, I've got an addendum that occurred in my code that I've not seen elsewhere in the forums. I ran into a situation where at the very beginning of the app's life cycle, where the orientation was not known in the shouldAutorotate method. This was causing the app to not display the view properly in landscape. After a few rotations in the simulator it was working fine.

My scenario is that there are certain views that get popped on where we would want landscape layout. As such, we would not want shouldAutorotate to return YES. I realize this might be a rare case for some, but I've spent plenty of time diagnosing this and wanted to pass along. Hope this is helpful.

```
- (BOOL) shouldAutorotate {

    BOOL shouldRotate = NO;
    UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];

    if ([self IsCaseWhereWeDontWantLandscapeAutorotation]) {
        shouldRotate = NO;
    } else if (orientation == UIDeviceOrientationUnknown) {
        //Handle the case where the device's orientation is not yet known
        shouldRotate = YES;
    } else {
        //Handle the normal case
        shouldRotate = (orientation == UIInterfaceOrientationMaskLandscape);
    }

    return shouldRotate;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-10-23T15:01:56.297

事实证明，只有根视图处理这些调用。在我的例子中，这是一个普通的 UINavigationController。我必须将其更改为添加方法的子类文件。

就我而言，我只想要根视图肖像，其余的肖像+风景。

Appdelegate.h

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    S2MBookAppRootViewController *masterViewController = [[[S2MBookAppRootViewController alloc] initWithNibName:pref.rootNibName bundle:nil] autorelease];
    self.navigationController = [[[S2MBookAppNavController alloc] initWithRootViewController:masterViewController] autorelease];

    self.window.rootViewController = self.navigationController;

    [self.window makeKeyAndVisible];
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:YES];

    return YES;
} 
```

和 S2MBookAppNavController（UINavigationController 的子类）

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    if([self.viewControllers count] == 1) return UIInterfaceOrientationMaskPortrait;
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscape;
} 
```

更新：当你想强制方向时（在导航控制器上推送新视图时）试试这个。

使您的 UINavigationController 也成为它自己的委托：

```
@interface S2MBookAppNavController : UINavigationController <UINavigationControllerDelegate>

@end 
```

在 .m 文件中

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.delegate = self;
    // Do any additional setup after loading the view.
}

- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
        if ([UIViewController respondsToSelector:@selector(attemptRotationToDeviceOrientation)]) {
            //present/dismiss viewcontroller in order to activate rotating.
            UIViewController *mVC = [[[UIViewController alloc] init] autorelease];
            [self presentModalViewController:mVC animated:NO];
            [self dismissModalViewControllerAnimated:NO];
        }
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-10-30T11:25:55.443

是的，问题只是调用了 window.rootViewController 方法来返回方向掩码。所以**supportedInterfaceOrientations**方法必须在viewController中实现，设置为window.rootViewController。但在大多数情况下，该对象不是自定义类，例如 UINavigationController。一种可能的解决方案是继承 UINavigationController。但苹果说：“这个类不适合子类化”，所以我宁愿使用另一个 UIViewController 来处理方向并将 UINavigationController 添加为子类。

```
MyRootViewController * myRoot = [MyRootViewController new];
self.window.rootViewController = myRoot;
[myRoot addChildViewController:navigationController];
[myRoot.view addSubview:navigationController.view]; 
```

并在 MyRootViewController 中实现方法：

```
- (BOOL)shouldAutorotate {
 return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    // return your mask here e.g.:
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-01-23T12:45:44.867

我在 UINavigationController 中有一系列视图控制器，其中一个只能是横向的。我通过继承 UINavigationController 并添加以下代码来修复它：

```
- (NSUInteger)supportedInterfaceOrientations{
   return [[self.viewControllers lastObject] supportedInterfaceOrientations];
} 
```

这确保了最顶层的视图控制器指示方向。

但是有一个问题：如果您从仅限于横向的 vc 转移到支持任何方向的 vc，则无论手机的方向如何，新视图都将以横向显示。为了解决这个问题，我将以下代码放入无限制的 viewControllers 中：

```
- (NSUInteger)supportedInterfaceOrientations{
   if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]))       
      return UIInterfaceOrientationMaskPortrait;
   else
      return UIInterfaceOrientationMaskLandscape;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-10-03T05:37:09.287

此处标题 UIKit 下的注释：http: [//developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html%23//apple_ref/doc/uid/TP40012166-CH1- SW19](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html%23//apple_ref/doc/uid/TP40012166-CH1-SW19)为答案提供了一些线索，但并不是全部。我还没有全貌，但这是我迄今为止发现的 iOS 6.0 RTM 的内容。

如果您并没有真正限制支持的方向，而是因为用户旋转了设备而想要做一些事情，那么您可以将逻辑移入

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

至

```
- (void)viewWillLayoutSubviews 
```

反而。

这可能是直接替换，但我还没有在低级 iOS 版本中进行测试。

如果你想限制支持的方向，你应该在`UIApplicationDelegate`水平上做到这一点

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

该文档指出“系统通过将应用程序`supportedInterfaceOrientationsForWindow:`方法返回的值与最顶部全屏控制器的supportedInterfaceOrientations 方法返回的值相交来确定是否支持方向。” 但在实验中我发现系统忽略了我支持的视图控制器

```
-(NSUInteger)supportedInterfaceOrientations 
```

返回值，即使方法被调用。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-05-10T05:49:59.587

```
-(BOOL)shouldAutorotate
{
    UIDeviceOrientation orientation = [UIDevice currentDevice].orientation;

    if (orientation == UIDeviceOrientationUnknown) {
        return YES;
    }

    return [self shouldAutorotateToInterfaceOrientation:self.interfaceOrientation];
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-11-13T13:30:15.540

Apple 已弃用 ios6 中的 shouldautorate 方法，改为使用这些方法。查看您的 xcode 文档

```
- (BOOL)shouldAutorotate NS_AVAILABLE_IOS(6_0);
- (NSUInteger)supportedInterfaceOrientations NS_AVAILABLE_IOS(6_0);
// Returns interface orientation masks.
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation NS_AVAILABLE_IOS(6_0); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-03-08T10:35:01.677

它为我工作：

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    NSUInteger orientations = UIInterfaceOrientationMaskPortrait;
    if ([self isKindOfClass:[YourViewController class]]) { // Your view class
        orientations |= UIInterfaceOrientationMaskPortraitUpsideDown;
    }
    return orientations;
} 
```

方向：

```
orientations |= UIInterfaceOrientationMaskLandscapeLeft;
orientations |= UIInterfaceOrientationMaskLandscapeRight; 
```****

# liferay - Using FileEntryForm after upgrading from Liferay 5.2.3 to 6.0

> ID：12260262
> 
> 赞同：0
> 
> 时间：2012-09-04T09:14:30.843
> 
> 标签：liferay, upgrade, liferay-6

During an upgrade from Liferay portal 5.2.3 to 6.0.6, I discovered that the class `com.liferay.portlet.documentlibrary.form.FileEntryForm` has been removed.

On the web there is no help and my use of this class was:

```
public ActionForward execute(ActionMapping mapping, ActionForm form,HttpServletRequest request, HttpServletResponse response) throws Exception {
    FileEntryForm fileEntryForm = (FileEntryForm)form;
    FormFile formFile = (FormFile) fileEntryForm.getMultipartRequestHandler().getFileElements().get("file");
} 
```

How can I fix this?

Thanks to all

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:14:39.490

现在，您似乎想从 获取文件`request`，所以这是在 6.0 中完成的方式：

```
UploadPortletRequest uploadRequest = PortalUtil.getUploadPortletRequest(actionRequest);
File file = uploadRequest.getFile("file"); 
```

如果您可以探索 Liferay 6.0.6 的源代码，这将有所帮助，我给出的代码来自`com.liferay.portlet.documentlibrary.action.EditFileEntryAction#updateFileEntry()`方法。

* * *

自 Liferay 5.x 以来，Liferay 6.0.6 发生了很多变化，整个开发方法发生了变化。现在一切都是插件，包括**扩展插件**（ext-plugin）。从 6.0 开始没有扩展环境**。**所以你必须做很多代码更改才能升级到 6.0。

在 OOTB portlet 中，文档库发生了巨大的变化，Liferay 6.1.x 中的文档库也有很多变化。

我希望这能回答您的问题，如果我遗漏了任何内容或者您想了解更多信息，我将很乐意编辑我的答案。

# php - 在多个阵列上寻找多个模式

> ID：12260263
> 
> 赞同：0
> 
> 时间：2012-09-04T09:14:30.457
> 
> 标签：php, regex, arrays

```
Array
(
    [0] => Oramen
    [1] => 20
    [2] => OT-301-FNS
    [3] => 40X40
)
Array
(
    [0] => LR-153-TKW
    [1] => Klaten
    [2] => Rectangular
    [3] => 
    [4] => 12x135x97
)
Array
(
    [0] => GN-187-TKW
    [1] => GARDEN
    [2] => LAMP
    [3] => POST
    [4] => A
    [5] => 30x30x130.JPG
)
Array
(
    [0] => BANDUNG
    [1] => ENTERTAINMENT
    [2] => TABLE
    [3] => LR-315-TKW
    [4] => 
    [5] => -
    [6] => 180x50x46.5
)`enter code here` 
```

我想删除与家具尺寸匹配的所有物品。是否可以使用一个正则表达式来做到这一点？真的很感激帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:21:55.523

你可能需要这样的东西：

```
foreach ($array_of_arrays as &$some_array) {
  $some_array = array_filter($some_array, function($el) { 
    return ! preg_match('#^\d+x\d+#i', $el);
  });
}
unset($some_array); 
```

换句话说，您使用尝试将其元素与模式一一匹配的函数过滤这些数组中的每一个......

```
`/^\d+x\d+/i` 
```

...这意味着'匹配字符串的开头，然后是任意数量的数字，然后是`x`字符，然后是任意数量的数字'。从我在您的示例中看到的情况来看，这是一种要遵循的模式，因为`^\d+x\d+x\d+`它与 '40X40' 值不匹配。

# backbone.js - How to create a base view in backbone.js?

> ID：12260264
> 
> 赞同：9
> 
> 时间：2012-09-04T09:14:36.537
> 
> 标签：backbone.js, extends, backbone-views

I need to create a base view which all my views would extends. I'm not really sure where and when to declare this view.

Basically, I need to inject `global variables` to all my templates and I don't do to that in each and every `render()` methods.

this is my tree structure for now:

```
|-main.js
|-app.js
|-require.js
|-App
|  |-View
|  |   |-Dashboard.js
|  |   |-Header.js
|  |   |-Content.js
|  |-Model
|  |-Collection
|  |-Template
|
|-Libs
   |-... 
```

this is my app.js

```
var App = {
    ApiURL: "http://domain.local",
    View: {},
    Model: {},
    Collection: {},
    Registry: {},
    Router: null
};

define(['backbone', 'View/Dashboard'], function(Backbone){
    var AppRouter = Backbone.Router.extend({
        routes : {
            "dashboard": "index",
        },

        index: function() {
            console.log('routing index route...');
            var x = new App.View.Dashboard({el:$('#main-content'), type:'other'});
        }
    });

    var initialize = function() {
        App.Router = new AppRouter;
        Backbone.history.start({pushState: true});
        console.log('Backbone is running...');
    };

    return {
        initialize : initialize
    };
}); 
```

And for now all my view inherit from `Backbone.View` like this:

```
App.View.Dashboard = Backbone.View.extend({ 
```

I want to create my own `Base View` which all the views from the application would extends. This is what I've done so far, but I don't know where to place this piece of code because in app.js I'm loading the Dashboard view so I need to do it before but I need to require this base view object in all views... so I'm lost :(

```
define(['backbone', 'underscore', 'twig'], function(Backbone, _){

    App.View.Base = Backbone.View.extend({});
    _.extends(App.View.Base.prototype, {
        initialize: function(params)
        {
            this.el = params.el;
            this.init(params);
        },

        init: function(params)
        {
        },

        renderTemplate:function(template_path, data)
        {
            var tpl = twig({href:template_path, async:false});

            // Inject variables
            data.user = App.Registry.User;
            data.account = App.Registry.Account;

            return tpl.render(data);
        }
    });

}); 
```

Any idea or remarks are welcome. An answer would be the best :D

Thanks, Maxime.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T10:43:39.867

```
App.View.Base = Backbone.View.extend({
  baseMethod: function( params ) {};
});

App.ExtendedView.Base = App.View.Base.extend({
  // new stuff here

  // overriding App.View.Base.baseMethod
  baseMethod: function( params ) {
    // overriding stuff here 
    App.View.Base.prototype.baseMethod.call(this, params); // calling super.baseMethod()
  }
}); 
```

# jquery - iosSlider linking to slides

> ID：12260265
> 
> 赞同：0
> 
> 时间：2012-09-04T09:14:43.930
> 
> 标签：jquery, hash, hyperlink, slider

I'm trying to use [iosSlider](http://www.iosscripts.com/iosslider/), but I'm unable to link to the slides.

I'm using the following function [here](http://lbtrn.com/iosSlider/_demos/_site-demo/#0) to add the current slide's number to the URL, which is working fine, but [linking](http://lbtrn.com/iosSlider/_demos/_site-demo/#3) to these always loads the first slide instead of #3, #4...

```
function slideContentChange(args) {

    window.location.href =  '#' + args.currentSlideNumber

    /* indicator (original code) */
    $('.iosSliderButtons .button').removeClass('selected');
    $('.iosSliderButtons .button:eq(' + args.currentSlideNumber + ')').addClass('selected');

} 
```

What am I missing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:18:06.827

我在准备好的文档中使用它：

```
var hash = window.location.hash || '1';
var startSlide = hash.replace("#", "");             
//alert(startSlide);

$('.iosSlider').iosSlider({
    // other init variables..
    startAtSlide: startSlide
}); 
```

这有帮助吗？

# java - 在我的应用程序中显示表查询

> ID：12260270
> 
> 赞同：2
> 
> 时间：2012-09-04T09:15:16.883
> 
> 标签：java, sql-server

大家好，我正在制作一个访问 MySQL 和 MsSQL 数据库的应用程序，这些数据库会摆弄它们，并根据它访问的数据库打印出表，而执行此操作的代码部分是这样的：

```
Connection con = DriverManager.getConnection(dbUrl, userName,password);
Statement stmt = con.createStatement();
ResultSet rs;

if (driverCN.startsWith("com.mysql")) {       // For MySQL.
rs = stmt.executeQuery("Show Tables");
    } else {                                  // For MsSQL
rs = stmt.executeQuery("??????");
        }
// Displays the remaining Database tables.
       System.out.println("\nThese are the remaining Database Tables:\n");
        while (rs.next()) {
            String db = rs.getString(1);
            System.out.println(db);
        } 
```

现在我想知道的是，我如何使这项工作也适用于 MsSQL，我执行什么样的查询，结果是否会传递到我的结果集中？（这非常适用于 MySQL 数据库，我只是还没有 MsSQL 数据库来测试它。提前谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:16:57.250

SQL Server 2005 或 2008：

```
SELECT * FROM information_schema.tables 
```

SQL Server 2000：

```
SELECT * FROM sysobjects WHERE xtype='U' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:18:14.517

尝试 ：

```
select name from sys.tables where type='u' 
```

# apache - 如何将 80 重定向到 80？

> ID：12260275
> 
> 赞同：0
> 
> 时间：2012-09-04T09:15:33.663
> 
> 标签：apache, ubuntu

我有一个重定向规则：

```
 <VirtualHost *:80>
        ServerAdmin webmaster@localhost

        RewriteEngine On
        RewriteCond %{HTTPS} off
        RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L]

</VirtualHost>

<VirtualHost *:7080>
        ServerAdmin webmaster@localhost

        RewriteEngine On
        RewriteCond %{HTTPS} off
        RewriteRule ^/?(.*) https://merchant.juspay.in/$1 [R,L]

        RewriteCond %{SERVER_NAME} demo.juspay.in
        RewriteRule ^/?(.*) https://merchant.juspay.in/$1 [R,L]

</VirtualHost>

<VirtualHost *:8080>
        RewriteEngine On
        RewriteCond %{HTTPS} off
        RewriteRule (.*) https://api.juspay.in
</VirtualHost> 
```

在阿帕奇。我需要一种方法来编写规则，使`80`我的 ip( `localhost`) 的端口不应该被重定向到`8443`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:27:56.010

Apache 配置说“监听 80 端口”，这是您的 VirtualHost 的翻译： `<VirtualHost *:80>`

[因此，如果您的请求是http://www.yourdomain.com:8443](http://www.yourdomain.com:8443)，我认为您不会最终进入这个虚拟主机

您需要另一个虚拟主机在此特定端口（8443）上侦听，或者我认为您可以这样做：

```
<VirtualHost *:80 *:8443> 
```

确保您有 2 个不同的侦听器设置：

```
Listen 80
Listen 8443 
```

我刚刚再次阅读您的问题，据我了解，它本身会重定向到端口 8443。这意味着：

> *   您的路由器中有一个端口转发设置，它将端口 80 转发到 8443，
> *   有一个 htaccess 规则将请求重定向到此端口
> *   或者也许是 PHP 应用程序本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:28:52.570

如果您想捕获来自 HTTPS（端口 443）的流量，您将需要另一个在此端口上侦听的虚拟主机。只需使用相同的目录和设置（以及 SSL 证书）就可以了。

您不需要执行 RewriteRule。Apache 将根据请求的协议知道使用什么虚拟主机来提供您的文件。

# php - Windows 上的 PHP exec Java 不产生输出

> ID：12260277
> 
> 赞同：2
> 
> 时间：2012-09-04T09:15:48.087
> 
> 标签：php, exec

我已经阅读了很多关于我的问题的类似 SO 问题，但似乎都没有我的问题。如果相关，我在 Apache 2.2 上运行 PHP 5.3.8 并且 PHP exec() 运行为`nt authority\system`

```
$cmd = "java -version";
$res = exec($cmd, $output, $return);

var_dump($res, $output, $return); 
```

产生：

```
string '' (length=0)

array
    empty

int 0 
```

`$return`为 0 暗示这是成功的。有趣的是，如果我运行：

```
$cmd = "java -version 2> response"; 
```

使用预期输出创建一个文件：

```
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02, mixed mode) 
```

所以我的问题是：为什么`$output`没有人满？

**评论更新**

的结果`$res = exec("dir c:", $output, $return);`

```
string '               2 Dir(s)  335,636,791,296 bytes free' (length=51)

array
    0 => string ' Volume in drive C is Local Disk' (length=32)
    1 => string ' Volume Serial Number is D87C-E25C' (length=34)
    2 => string '' (length=0)
    ...
    12 => string '               5 File(s)          1,158 bytes' (length=45)
    13 => string '               2 Dir(s)  335,636,791,296 bytes free' (length=51)

int 0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T09:19:44.497

尝试这个

```
$output = `java -version 2>&1` 
```

注意命令周围的反引号，它与 shell 命令完全一样

2>&1 应该将错误重定向到标准输出，因为 java 默认使用 stderror ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:23:22.183

您似乎将苹果与橙子进行比较，因为在第二个示例中您重定向了 stderr 流，而在第一种情况下您不这样做。我建议在使用调用时始终将 stderr 重定向到 stdout，`exec`否则您将丢失此输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:02:47.260

虽然不是“答案”——我最终做的是将所有输出重定向到 STDOUT 并检查`$return`0。

这可能与[此错误](https://bugs.php.net/bug.php?id=41874)有关，即使我运行的是 5.3，它似乎也符合我的情况

# android - scrollTop 在 Android 手机中不起作用

> ID：12260279
> 
> 赞同：10
> 
> 时间：2012-09-04T09:15:54.823
> 
> 标签：android, jquery, jquery-ui, cordova, jquery-mobile

我正在为 Andriod 移动应用程序开发聊天功能，为此我使用 jQuery 和 jQuery 移动主题前端。

我的问题是试图使用 scrollTop() 函数在底部附加新消息。scrollTop() 函数在所有浏览器中都可以正常工作，但在 Andriod 中却无法正常工作。任何人都对此有任何想法。这是HTML代码：

```
<div data-role="page" id="chatPage">
    <div data-role="content">
        <div id="incomingMessages" style="height: 180px;overflow: auto;">
        </div>
        <label for="messageText"><strong>Message:</strong></label>
        <table width="100%">
            <tr>
                <td width="75%">
                    <textarea name="messageText" id="messageText"></textarea>
                </td>
                <td width="25%">
                    <div id="sendButtonId" style="display:block">
                        <a data-role="button" id="chatSendButton" name="chatSendButton" value="Send" make_button_disabled="enable">
                            Send
                        </a>
                    </div>
                </td>
            </tr>
        </table>
        <table>
            <tr>
                <td>
                    <div id="endChatButton">
                        <a data-role="button" id="chatCloseButton" name="chatCloseButton" value="EndChat" make_button_disabled="enable">
                            End Chat
                        </a>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div> 
```

这是滚动按钮的 jQuery 代码：

```
$("#chatSendButton").click(function() {
    var mes = $("#messageText").val();
    $("#incomingMessages").append("<div class='message'><span class='username'>" +'Admin'+ ":" +"</span> "+ mes + "</div>");
    $("#incomingMessages").scrollTop($("#incomingMessages")[0].scrollHeight);
}); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-20T06:49:37.433

似乎这个问题只发生在溢出属性设置为“滚动”时（这是我们唯一关心它的时候）。对我有用的解决方法是首先将溢出设置为“隐藏”，设置滚动顶部，然后将溢出设置回“滚动”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-02T21:15:21.123

使用 scrollTop() 时，我将以下内容用于 Android 支持。根据我的经验，它作为一种通用的修复方法效果很好。

CSS：

```
.androidFix {
    overflow:hidden !important;
    overflow-y:hidden !important;
    overflow-x:hidden !important;
} 
```

JS：

```
$(yourSelector).addClass("androidFix").scrollTop(0).removeClass("androidFix"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T10:32:45.513

**编辑：**我发现如果您将“顶部”样式设置为 -120，它应该将 div 向下“滚动”120px。

这是一个 HTML 示例（对不起所有的内联样式）：

```
<div id="container" style="position:relative; display:block; overflow:scroll; height:100px; border:1px solid;">
    <div style="position: relative; background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(rgb(255, 255, 255)), to(rgb(0, 0, 0))); height: 300px; width: 100%; background-position: initial initial; background-repeat: initial initial;" id="frm">
      <p>Message 1</p>
      <p>Message 2</p>
      <p>Message 3</p>
      <p>Message 4</p>
      <p style="color:#fff">Message you want to see right now</p>
      <p>Message 5</p>
      <p>Message 6</p>
      <p>Message 7</p>
      <p>Message 8</p>
</div> 
```

和 Javascript 部分：

```
<script type="text/javascript">
function init()
{
    document.getElementById("setScroll").addEventListener('click',function()
    {
        document.getElementById("frm").style.top = -120;//Scroll by 120px
    });
}
</script> 
```

我已经在 3.0 和 4.0 版本的 Android 上对此进行了测试（我必须说这是在模拟器上的想法）。

希望这可以帮助！

**原始信息：**

Scroll top 似乎在[此处](http://code.google.com/p/android/issues/detail?id=19625)报告的某些版本的 Android 中不起作用，并且 Google 对此没有明确的答案（看起来主要是 3.0 和 4.0 有这个问题，2.3 和 bellow 或 4.1 似乎没有受到影响）。

抱歉，但目前似乎没有解决此错误的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-24T08:35:55.953

我的一个解决方法是：

```
window.location.hash = '#element' + currentItem; 
```

您可以跳转到具有特定 id 的元素。

我知道这不是每个人的解决方案，购买也许我可以帮助别人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T21:05:38.637

Sorry, I do not have an answer and do not have the reputation level necessary yet to leave a comment so I have to post this as an "answer". I have spent a long time working on this trying to find a workaround have not found one. I have created a test page that gives some insight onto what is going on.

[http://jsfiddle.net/RyLek/embedded/result/](http://jsfiddle.net/RyLek/embedded/result/) <-- DIV set to overflow auto [http://jsfiddle.net/RyLek/2/embedded/result/](http://jsfiddle.net/RyLek/2/embedded/result/) <-- DIV set to overflow scroll

The problem is the .scrollTop property is not updating to the current position in a DIV when you scroll down. Also when you set the scrollTop property it does not actually update the DIV scroll position.

In response to the comment "Aitor Calderon" made on the above answer. I tried setting the overflow property to scroll (see above sample) and that does not have any affect.

I have also tried a few third party browsers in the market such as Maxthon and Dolphin which also have this issue. If you are running an android 4.0 ICS device you can download the Google Chrome browser from the Google Play Store which the scrollTop property DOES work in. That is not an option for me as our company mostly has honeycomb devices which do not support this browser.

Here is a question I posted about this last week on this issue: [jQuery scrollTop() does not work in scrolling DIV on mobile browsers, alternatives?](https://stackoverflow.com/questions/12225456) The response was to try and implement this in CSS which I have not been successful in accomplishing.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-15T15:54:27.860

我需要从页面顶部滚动到特定元素，而 .offset 是适用于 Android 和 iOS 的解决方案。.scrolltop 仅适用于 iOS。

```
$('html, body').animate({scrollTop: $('#element').offset().top + 20}, 10); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-18T17:29:26.817

我注意到在 android **.scrolltop()** **中返回的值是**decimals ，这会导致计算出现问题。我已经通过 alert($(this).scrollTop()); 进行了检查。

我建议使用**Math.round()**以使其与桌面和 IOS 相同。这就是我实现这一目标的方式：

```
var rounded = Math.round($(this).scrollTop());
if (rounded == $(this)[0].scrollHeight - $(this).height()) {

} 
```

这对我有用！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-22T11:50:37.477

这将适用于许多浏览器和设备，并且非常简单。

```
var scrollToTopBtn = document.getElementById("backtotop")
var rootElement = document.documentElement

function scrollToTop() {
  // Scroll to top logic
  rootElement.scrollTo({
    top: 0,
    behavior: "smooth"
  })
}
scrollToTopBtn.addEventListener("click", scrollToTop)
```

```
div {
  height:1000px;
  width:100vw;
}

.topdiv {
  background:blue;
}

.otherdiv {
  background:yellow;
}

button {
  width:150px;
  height:150px;
  font-size:25px
}
```

```
<html>
  <body>
    <div class="topdiv"></div>
    <div class="otherdiv"></div>
    <footer>
      <button id="backtotop">BACK TO TOP</button>
    </footer>
  </body>
</html> 
```

# mysql - 用于添加日期的 SQL 函数

> ID：12260285
> 
> 赞同：0
> 
> 时间：2012-09-04T09:16:22.867
> 
> 标签：mysql, sql

如何通过将 7 天添加到当前日期并通过函数返回来在 SQL 中创建一个函数我想检查日期是否为有效日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:17:35.027

您可以使用它`Date_Add()`来执行此操作。

请参阅[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:17:53.897

很长一段时间以来，MySQL 中的日期运算可以使用简单的. 来执行`+`，如下所示：

```
SELECT date_col + INTERVAL 1 WEEK FROM … 
```

如果你更喜欢几天而不是几周，你也可以写`+ INTERVAL 7 DAY`，即使用单数单位名称。

我无法想象您所说的*“检查日期是否为有效日期”是什么意思，*对于每个有效日期，一周后的日期也是有效的。

另请参阅[this fiddle](http://sqlfiddle.com/#!2/6b7c7/10)以获取工作示例。打印包含时间和时区的简单日期这一事实似乎是 HTML 渲染的产物，实际值仅是日期，如转换为字符串所示。

# css - 比浏览器 CSS 更宽的中心布局

> ID：12260286
> 
> 赞同：0
> 
> 时间：2012-09-04T09:16:23.730
> 
> 标签：css

我从 Photoshop 导出了一个布局，宽度为 2400 像素。我的屏幕分辨率宽度为 1200 像素，布局显示为左对齐。

我需要将一些元素绝对定位在一个将自身居中的 div 内。首先，这可能吗？

我已将我的 div 包含在一个具有边距的包装器中：0 auto; 但它似乎不起作用。我看不到的明显的东西是什么？

[http://jsfiddle.net/pxWSt/](http://jsfiddle.net/pxWSt/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:04:37.310

我想知道这是否是您想要的：http: [//jsfiddle.net/pxWSt/5/](http://jsfiddle.net/pxWSt/5/)

重要组成部分：

```
.container
{
    margin-left:50%;
    left:2500px;/*half of its own width*/
} 
```

注释掉的`calc()`部分可以用来替换它。可惜 Opera 不支持`calc()`。

# linux-kernel - 按名称搜索 proc_dir_entry

> ID：12260288
> 
> 赞同：1
> 
> 时间：2012-09-04T09:16:29.350
> 
> 标签：linux-kernel

我需要通过它的名称（路径）获取指向 proc_dir_entry 的指针。

我在[Linux 源代码](http://lxr.linux.no/linux+v2.6.18/include/linux/proc_fs.h#L50)中看到 proc 条目在双链表中

```
struct proc_dir_entry {
    .....
    struct proc_dir_entry *next, *parent, *subdir; 
```

所以，我可能会遍历列表。

有没有现成的解决方案，还是我应该自己做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:33:13.730

此代码存在但绝对不会导出。见于。`xlate_proc_name`_`fs/proc/generic.c`

# joomla - 侧边栏模块位置内每个模块的不同框

> ID：12260289
> 
> 赞同：0
> 
> 时间：2012-09-04T09:16:35.820
> 
> 标签：joomla, joomla2.5

我制作了一个 Joomla 2.5 模板。你可以看看这个网站：www.ranfar.com。

查看侧边栏的代码。到目前为止，我有类似的东西：

```
<div id="sidebar">
    <!-- Here starts the first widget -->
    <h3>Widget title</h3>
    <ul>......... <!-- Module content --> ..........</ul>
    <!-- Here starts the second module -->
    <p>.... <!-- Second module content --> .........</p>
</div> 
```

如您所见，我没有为每个小部件设置单独的框。我想要以下内容：

```
<div id="sidebar">
    <!-- Here starts the first module -->
    <div class="sidebar-module-box">
         <h3>Module title</h3>
         <ul>......... <!-- Module content --> ..........</ul>
    </div>
    <!-- Here starts the second module -->
    <div class="sidebar-module-box">
         <p>.... <!-- Second module content --> .........</p>
    </div>
</div> 
```

通过这种方式，我可以为模块框设置类的样式。我如何实现这样的模板？我必须在哪里添加它？这是我在 index.php 中生成侧边栏的代码：

```
<?php if($this->countModules('ranfar-rightsidebar')) : ?>
    <div id="right-sidebar" class="float-right">
        <jdoc:include type="modules" name="ranfar-rightsidebar" style="sidebar" />
    </div> 
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:29:11.490

我找到了解决方案。

我必须打开文件`/templates/THEME/html/modules.php`，`THEME`我的主题名称在哪里。有如下功能：

```
function modChrome_sidebar($module, &$params, &$attribs)
{
    if (!empty ($module->content)) : ?>
        <?php if ($module->showtitle) : ?>
            <h3><?php echo $module->title; ?></h3>
        <?php endif; ?>
        <?php echo $module->content; ?>
    <?php endif;
} 
```

我不得不改变它如下：

```
function modChrome_sidebar($module, &$params, &$attribs)
{
    if (!empty ($module->content)) : ?>
        <div class="module-box">
        <?php if ($module->showtitle) : ?>
            <h3><?php echo $module->title; ?></h3>
        <?php endif; ?>
        <?php echo $module->content; ?>
        </div>
    <?php endif;
} 
```

现在每个模块都包含在一个带有“模块盒”类的 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:23:58.577

在 Joomla 中，它们被称为模块（而不是小部件）。在您的 XML 文件中，您需要添加模块位置，如下所示：

```
<positions>
    <position>login</position>
    <position>search</position>
    <position>sidebar1</position>       
    <position>sidebar2</position>
    <position>etc...</position>
</positions> 
```

在您的模板中，然后使用上面的代码添加每个模块位置：

```
<jdoc:include type="modules" name="sidebar1" style="xhtml" /> 
```

无论你在哪里，Joomla 都会在它的位置显示模块（下一段）。关于“样式”的快速说明 - 您可以[根据您的标记需求制作自定义样式或使用 Joomla 已有的样式之一](http://docs.joomla.org/Module_chrome)。

然后，在模块管理器中，创建一个新模块并选择您希望它出现的位置。

# php - 如何在zend框架中设置公用文件夹的正确路径

> ID：12260291
> 
> 赞同：1
> 
> 时间：2012-09-04T09:16:42.003
> 
> 标签：php, zend-framework

Zend Framework 对我来说是全新的，我对它有疑问。可能很容易修复，但我在 Google 中找不到任何解决方案。

我不知道如何设置公用文件夹的正确路径。我使用 xampp 作为虚拟主机，我当前的完整路径如下所示：

```
localhost/zf_project/public/controller/action 
```

现在，当我使用表单和链接时，它会将我移动到`localhost/controller/action`，所以目前我正在到处添加：

```
$front = Zend_Controller_Front::getInstance();  
$form->setAction($front->getBaseUrl().'/controller/action'); 
```

可能有最简单的方法来设置公用文件夹的默认路径。我尝试在我的 .ini 应用程序文件中添加：

```
resources.frontController.baseurl = "/zf_project/public" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:47:29.620

ZF 可以确定您的基本 URL，而无需在配置文件或引导程序中设置它。

从视图中，您可以使用[`baseUrl`](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.baseurl)帮助程序构建带有基本 URL 的链接。

```
// resolves to localhost/zf_project/public/controller/action
$this->form->setAction($this->baseUrl('controller/action'));

// or

// resolves to localhost/zf_project/public/images/icons/online.png
<img src="<?php echo $this->baseUrl('images/icons/online.png') ?>" /> 
```

您可以使用帮助程序构建 URL [`url`](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial)。这会根据配置的路由构造您的 URL。

```
// localhost/zf_project/public/controller/action/id/1234
echo $this->url(array('controller' => 'controller',
                      'action'     => 'action',
                      'module'     => 'default', 
                      'id'         => 1234)); 
```

您也可以从控制器中使用这些帮助器中的任何一个，只需在要调用它们时指定视图对象：

```
$this->view->baseUrl();
$this->view->url($params); 
```

几乎在我引用图像、javascript、css 文件或静态内容的任何地方，我都会使用`baseUrl`帮助程序。每当我想链接到我的应用程序中的其他控制器或操作时，我都会使用`url`帮助程序，因为它使用您的路由构造有效的 URL。这样，如果您更改 URL 结构，`url`帮助程序将反映更改，您不必修改现有代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:34:50.870

您需要修改您的虚拟主机文件。

在基本根上安装 Zend 应用程序是**标准做法。**

在您的 XAMP 中（我不是 Windows，但会尝试一下），您应该有一个文件夹：`/xampp/apache2/conf`在那里您会找到 apache2.conf 或 httpd.conf，它们中的任何一个。打开它们，你应该找到`DocumentRoot`某个地方，用你的`/public`文件夹导航。

或者，完全创建一个新的[虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/examples.html)。

另外，我找到[了这个很好的教程](http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch/)，一步一步来（或跳到第 3 步）

希望能帮助到你 ：）

问题？

# charts - 混合堆叠和非堆叠条

> ID：12260297
> 
> 赞同：0
> 
> 时间：2012-09-04T09:17:16.333
> 
> 标签：charts, birt, bar-chart

我刚刚使用 birt 图表 API 迈出了第一步。我创建了一些堆叠和非堆叠（分组）条形图，但我还需要它们的混合：一些条形系列应该堆叠，一些应该分组。如何做到这一点？

（将一些但不是所有系列设置为 bs1.setStacked(true); 会产生异常......包含堆叠和未堆叠系列的混合。）

但它应该工作？！：

[http://wiki.eclipse.org/BIRT/FAQ/Charts2.2#Can_I_combine_stacked.2C_logarithmic_and.2For_percent_properties_on_a_single_scale.3F](http://wiki.eclipse.org/BIRT/FAQ/Charts2.2#Can_I_combine_stacked.2C_logarithmic_and.2For_percent_properties_on_a_single_scale.3F)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:17:06.177

[在Eclipse 论坛](http://www.eclipse.org/forums/index.php/t/372732/)中得到了 Jason Weathersby 的回答。关键是为堆叠的 BarSeries (setStacked(true);) 和未堆叠的 BarSeries 定义 2 个 SeriesDefinition：

```
 ...
BarSeries bs1 = (BarSeries) BarSeriesImpl.create();
bs1.setDataSet(orthoValues1);
bs1.setStacked(true);

BarSeries bs2 = (BarSeries) BarSeriesImpl.create();
bs2.setDataSet(orthoValues2);
bs2.setStacked(true);

BarSeries bs3 = (BarSeries) BarSeriesImpl.create();
bs3.setDataSet(orthoValues3);
bs3.setStacked(false);

SeriesDefinition sdY = SeriesDefinitionImpl.create();
sdY.getSeriesPalette().shift(0);
yAxisPrimary.getSeriesDefinitions().add(sdY);

SeriesDefinition sdY2 = SeriesDefinitionImpl.create();
sdY2.getSeriesPalette().shift(0);
yAxisPrimary.getSeriesDefinitions().add(sdY2);  

sdY.getSeries().add(bs1);
sdY.getSeries().add(bs2);
sdY2.getSeries().add(bs3);
... 
```

# javascript - 具有关联数组数据集的 D3.js 表

> ID：12260298
> 
> 赞同：2
> 
> 时间：2012-09-04T09:17:27.517
> 
> 标签：javascript, dom, embed, d3.js

我正在尝试生成一个嵌入到 SVG 中的表，其结构如下：

```
<table>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
</table> 
```

从这样的数据集中：

```
var a = ["a", 1, "b", 2, "c", 3] 
```

因此标签的数量是动态的，取决于键值对的数量，所以在这种情况下为 2。其中将是两个 td 的静态数量，每个 td 分别具有键和值。

到目前为止，我已经尝试过这样的事情：

```
var tr = ele.append("svg:foreignObject")
                    .attr("x", 5)
                    .attr("y", 30)
                    .attr("width", 60)
                    .attr("height", 120)
                    .append("xhtml:body")
                    .attr("xmlns", "http://www.w3.org/1999/xhtml")
                    .selectAll("tr")
                      .data(d3.keys(a))
                    .enter().append("tr");
tr.selectAll("td").data(a).enter()
 .append("td")
   .text(function (d) { return d; } ); 
```

结果是这样的：

```
<tr>
  <td></td>
  <td></td>
  <td></td>
</tr>  
<tr>
  <td></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td></td>
  <td></td>
  <td></td>
</tr> 
```

因此，行数正确，但 td 数不正确。

编辑：执行

```
tr.append("td").text("test");
tr.append("td").text("test2"); 
```

导致正确的结构，尽管当我尝试使用带有两个单独附加的 .data() 函数遍历数据集时，它当然会添加两个重复的 td。

**编辑 2：** 我最终通过为 d3.js 链之外的表生成 HTML 并将其附加为 .html() 来解决我的问题。有没有更简洁的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:19:29.960

您可以像这样构造数据：`[["a",1],["b",2],["c",3]]`.

然后你可以这样做：

```
var tr = table.selectAll("tr").data(data);
tr.enter().append("tr");
tr.each(function(d) {
   var td = d3.select(this).selectAll("td").data(d);
   td.enter().append("td");
}) 
```

类似的东西。

还没有编译，但它应该给你一个想法。

# c# - 在返回空 200 响应的 WebAPI 操作方法中抛出 HttpResponseException

> ID：12260300
> 
> 赞同：6
> 
> 时间：2012-09-04T09:17:35.020
> 
> 标签：c#, .net, asp.net-web-api

我正在尝试从我的应用程序返回适当的 Http 代码和响应，但我很挣扎。似乎有两种方法可以返回特定的 http 响应。

我想处理它的方式是抛出一个`HttpResponseException`：

```
public Information Get(int apiKey)
{
    if (!_users.Authenticate(apiKey))
    {
        var response = new HttpResponseMessage();
        response.StatusCode = (HttpStatusCode)401;
        response.ReasonPhrase = "ApiKey invalid";

        throw new HttpResponseException(response);
    }

    return _info.Get();
} 
```

但是，当我这样做时，我看到的响应只是一个空的 200 响应！

似乎您还可以更改操作方法的签名以返回`HttpResponseMessage`如下所示：

```
public HttpResponseMessage Get()
{
    if (!_users.Authenticate(apiKey))
    {
        return Request.CreateResponse((HttpStatusCode) 401, "ApiKey invalid");
    }

    return Request.CreateResponse((HttpStatusCode) 200, _info.Get());
} 
```

如果我能提供帮助，我真的不想这样做，我宁愿将我的返回类型作为我要检索的对象，而不是每次都将其包装在`HttpResponseMessage`.

第一种方法返回一个空的 200 而不是 401 与我想要的消息是否有原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:47:30.353

两种可能的解决方案；

**首先**。[确保您的 IIS 配置为允许错误通过](http://www.iis.net/ConfigReference/system.webServer/httpErrors)

```
<configuration>
  <system.webServer>
    <httpErrors existingResponse="PassThrough" />
  </system.webServer>
</configuration> 
```

**第二**。我不完全确定，但 ASP.NET Web API[可能需要您开发自定义 ActionFilter 以正确地将 Exceptions 转换为 result types](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)。这是我个人在 Web API 中进行错误处理的方式：

1.  允许在 Web API 中抛出任何类型的异常，就像在任何其他 .NET 应用程序中一样
2.  编写一个自定义 ActionFilter 来捕获异常并将它们转换为适当的格式。例如，我以自定义 JSON 格式序列化所有异常。在客户端，我有一些自定义的 AJAX 技巧，可以处理基于这种格式的错误（例如验证异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:03:35.910

检查 HttpConfiguration 上的 IncludeErrorDetailPolicy 设置。默认情况下，该策略是在本地访问 Web API 时显示错误详细信息。

# regex - 正则表达式查询字符串 SSI

> ID：12260303
> 
> 赞同：0
> 
> 时间：2012-09-04T09:17:53.747
> 
> 标签：regex, apache, ssi

我有这个网址：

```
http://www.xxxxxxxx.it/stagione.shtml#giornata_107 
```

我试图用这样的正则表达式获取 giornata 的数量：

```
<!--#set var="giornata" value="$QUERY_STRING = /\#giornata\_([0-9])/"--> 
```

但我不知道正确的语法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:19:10.657

您需要匹配***一个或多个***数字，`[0-9]+`而不是只`[0-9]`匹配一个***数字***：

```
<!--#set var="giornata" value="$QUERY_STRING = /\#giornata\_([0-9]+)/"--> 
```

# c# - 如何获得没有 SubString 的字符串？

> ID：12260304
> 
> 赞同：-3
> 
> 时间：2012-09-04T09:17:54.483
> 
> 标签：c#, string

我得到的文字是：

```
string s="abbcdefbbgh"
string a = s.Substring(1, 2); 
```

结果是 a="bb";

如何获得反值：`a="acdefbbgh"`，即没有该子字符串的值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T09:20:58.970

我想你正在寻找[`String.Remove`](http://msdn.microsoft.com/en-us/library/d8d7z2kk.aspx).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T09:22:04.960

有几种方法。例如，您可以使用以下`Remove`方法：

```
string a = s.Remove(1, 2); 
```

您可以使用两个`Substring`调用并连接结果：

```
string a = s.Substring(0, 1) + s.Substring(1 + 2); 
```

您可以使用一个`StringBuilder`对象：

```
StringBuilder b = new StringBuilder(s);
b.Remove(1, 2);
string a = b.ToString(); 
```

您可以使用 Linq 扩展：

```
string a = new String(s.Where((c, i) => i < 1 || i > 2).ToArray()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T09:22:53.977

我认为您正在寻找：

```
string a = s.Remove(1,2); 
```

并在以下帮助下`SubString()`：

```
string a = s.Substring(0, 1) + s.Substring(3, s.Length); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T10:21:36.620

```
 string s = "abbcdefbbgh";
 string a = s.Remove(1, 2); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-04T09:21:21.287

这是一种方法，

```
string.Format("{0}{1}", s.Substring(0, 1), s.Substring(3)); 
```

* * *

[`string.Remove`](https://stackoverflow.com/a/12260372/659190)更好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-04T09:22:18.407

这是你要找的吗？

```
int start = 1;
int end = 2;

string a = s.Substring(0,start) + s.Substring(end+1); 
```

# java - Java：数学线设计

> ID：12260305
> 
> 赞同：2
> 
> 时间：2012-09-04T09:17:56.570
> 
> 标签：java, math

有没有人见过这个数学线设计，也许有一些关于如何生成它的指示？最好使用Java。

![在此处输入图像描述](../Images/5d40c22959c01f1bd4ce500622d234ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:03:29.637

您从外部正方形（矩形、四边形）开始。

```
1) Draw it.
2) Move each vertex 10 percent of the way towards its neighbor.
3) repeat starting at #1. 
```

稍微棘手的部分在第 2 步中。如果将顶点 1 移向顶点 2，然后将 2 移向 3，将 3 移向 4，最后一件事是将顶点 4 移向顶点 1 所在的位置，而不是移动到的位置。最简单的方法是首先制作顶点 1 的副本——称之为顶点 5——然后将每个顶点移向列表中的下一个顶点。

10% 是一个可调参数。现在，要移动一些百分比，您可以使用加权平均值：

```
x1 = x1 + (x2-x1)*p
y1 = y1 + (y2-y1)*p 
```

其中，对于 10%，p 为 0.1。

这确保了新顶点在每种情况下都位于两个旧顶点之间绘制的线上。它适用于所有四边形，而不仅仅是正方形。这也是了解样条曲线的开始。

# sql - 如何检查sql中select语句中的每个值

> ID：12260306
> 
> 赞同：0
> 
> 时间：2012-09-04T09:17:55.977
> 
> 标签：sql

我有一个场景，我需要选择一行并将值连接到单个变量中。问题是如果某些列为空，则必须省略该部分。但在我的场景中，它给出了一个连字符，我在空白处使用它可以帮助我解决这个问题。

我试过这个......

```
SELECT  @Location_Details = CONVERT(VARCHAR, ISNULL(O.CSS_No, ''))
                + '-' + CONVERT(VARCHAR, ISNULL(STREET.STREET_START_X, ''))
                + '-' + CONVERT(VARCHAR, ISNULL(STREET.STREET_START_Y, ''))
                + '-' + CONVERT(VARCHAR, ISNULL(STREETDES.STREET_DESCRIPTOR,
                                                '')) + '-'
                + CONVERT(VARCHAR, ISNULL(STREETDES.LOCALITY_NAME, '')) + '-'
                + CONVERT(VARCHAR, ISNULL(STREETDES.TOWN_NAME, '')) + '-'
                + CONVERT(VARCHAR, ISNULL(HW.Description, '')) + '-'
                + CONVERT(VARCHAR, ISNULL(Add_stree.Additional_Street_Location_Text,
                                          ''))
        FROM    dbo.[order] O WITH ( NOLOCK )
                LEFT JOIN dbo.Order_USRN_Header USRN WITH ( NOLOCK ) ON USRN.Order_No = O.Order_No
                LEFT JOIN DatabaseName.dbo.STREET STREET WITH ( NOLOCK ) ON STREET.USRN_NO = USRN.USRN_No
                LEFT JOIN DatabaseName.dbo.STREET_DESCRIPTOR STREETDES WITH ( NOLOCK ) ON STREETDES.USRN_NO = USRN.USRN_No
                LEFT JOIN dbo.High_Way_Authority HW WITH ( NOLOCK ) ON HW.HW_Authority_ID = STREET.SWA_ORG_REF
                LEFT JOIN [DatabaseName].dbo.additional_STREET Add_stree WITH ( NOLOCK ) ON USRN.USRN_No = Add_stree.USRN
        WHERE   O.Order_No ='123456' 
```

这给出了这样的结果......

-565654-48798-MAIN STREET-Chennai-Tamilnadu-India-

有人可以帮忙吗...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:18:55.493

使用`ISNULL(O.CSS_No+'-', '')`代替`ISNULL(O.CSS_No, '') + '-'`等

此外，可能不需要每次都将已经是字符串的字段转换为 varchar。

# c# - StyleCopTask 无法在 Hudson 服务器上加载

> ID：12260307
> 
> 赞同：6
> 
> 时间：2012-09-04T09:17:58.093
> 
> 标签：c#, hudson, stylecop

我正在尝试为我们的新项目的 CI 设置我们的 Hundson 服务器。一切运行良好，构建项目、单元测试和 FxCop 检查运行。但是当我尝试使用 StyleCop 检查代码时，会发生错误。首先：我们在 C# 中使用 MS VS 2010 进行开发，在 Hudson Server 上安装了 .Net 4.0 和 Windows SDK 7.1。

现在我已将 StyleCop.Targets 添加到我的 SVN 并将 .cproj 文件链接到该文件。如果我在 VS2010 中构建一切都很好，除了 StyleCop 警告，但如果 Hundson 服务器尝试构建项目，则会发生此错误：

```
error MSB4062: The "StyleCopTask" task could not be loaded from the assembly 
C:\Program Files (x86)\MSBuild\..\StyleCop 4.7\StyleCop.dll. Could not load file or
assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, 
PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot 
find the file specified. Confirm that the <UsingTask> declaration is correct, 
that the assembly and all its dependencies are available, and that the task 
contains a public class that implements Microsoft.Build.Framework.ITask. 
```

StyleCop.dll 在 Hundson 服务器的路径中，有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-07T23:05:21.443

1.  转到控制面板\程序\程序和功能
2.  选择打开或关闭 Windows 功能
3.  单击 .NET Framework 3.5（包括 .NET 2.0 和 3.0）
4.  单击确定并等待
5.  重新启动 Visual Studio

那应该解决它

# python - 修复 Python 脚本的进程 ID

> ID：12260314
> 
> 赞同：0
> 
> 时间：2012-09-04T09:18:14.080
> 
> 标签：python, linux, python-2.7

我想将我的 python 脚本设置为始终使用固定的进程 ID。这样每次我想杀死它时，我都不必为它做一个 ps aux 。请帮忙。

我正在使用 Ubuntu 和 CentOS。

Ubuntu 是我的测试系统 CentOS 是我的服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:26:19.100

这不是你可以用 python 或任何其他进程做的事情。

进程 id 由 Linux 内核分配，并保证 id 的唯一性。

此外，如果您的进程被另一个子进程使用，那么它的进程 ID 将继续存在于内核进程表中，直到父进程确认它已读取退出状态。这意味着您不能在以后简单地重新使用进程 ID，它可能仍保留在进程表中。

我相信你可以设计一个创造性的 kill 命令，每次都能捕捉到你的进程：

```
kill `ps -fC python2.7 | grep yourscriptname.py` 
```

或类似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:26:09.513

这是不可能的，Posix 进程 id 保证是随机的（例如`OpenSSL`，使用进程 id 来播种它的随机数生成器）。您唯一能做的就是将进程 ID 写入文件并根据写入的进程 ID 终止进程。

```
kill `cat x.pid` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:26:24.270

为什么不写一个小脚本来删除你的进程：

```
#!/bin/sh
#Kill my python process called myPython
kill `ps -A | grep myPython | nawk '{ print $1}'`
# Or
kill `ps -U myname | grep myPython | nawk '{ print $1}'` 
```

然后你可以运行脚本来终止进程......

# visual-studio-2010 - Visual Studio 2010 Rebuild All 然后运行单元测试再次构建

> ID：12260316
> 
> 赞同：0
> 
> 时间：2012-09-04T09:18:14.723
> 
> 标签：visual-studio-2010, unit-testing, building

在 Visual Studio 2010 中，我执行以下操作：

*   构建 > 重建解决方案。

    没有错误，没有警告。

*   解决方案 > 运行 StyleCop（重新扫描全部）

    没有错误，没有警告。

*   测试 > 运行 > 解决方案中的所有测试。

    构建再次开始 - 这是为什么呢？有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:27:21.787

好吧，没有人回答我会提供我的解决方法。

进行更改，然后在不先构建的情况下运行测试。这显然会进行构建，但只有 1 个。

# java - 将数组初始化为空但空比较失败

> ID：12260324
> 
> 赞同：0
> 
> 时间：2012-09-04T09:18:35.803
> 
> 标签：java, arrays

在下面的代码中，我的期望是如果 list `readerList.size = 0`，`headerLine`应该`null`在 method 内`commonValidation()`。但事实并非如此，谁能告诉我为什么？

```
String[] headerLine = null;

if (readerList != null && readerList.size() != 0){
    headerLine = readerList.get(0);         
}

commonValidation(headerLine, logDTO, hrGroupName, feedFileName); 
```

//方法定义

```
public void commonValidation(String[] headerLine, TransactionLogDTO logDTO, String hrGroupName, String filename) throws PersistenceException, ServiceException, Exception {
    if ((headerLine == null) || (headerLine.length == 0)){
        logDTO.setGyr("R");

            String subject = MessageWrapper.getMessage("hr.mail.emptyfile.subject");
        String body = MessageWrapper.getMessage("hr.mail.emptyfile.body", filename);

            if (logDTO.getMessage() == null){
                logDTO.setMessage(body);
            }
            else{
                logDTO.setMessage(logDTO.getMessage() + ";" + body);
            }

        logDTO.setIsLogErrorMailSent(Boolean.TRUE);

        sendTransactionLogErrorReport(hrGroupName, subject, body);                  

        throw new Exception(body);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:25:35.567

`String[] headerLine = null;`这是一个成员变量吗？如果是，则使其成为方法局部变量。

还

您可以在 ArrayList 中添加空元素并增加大小。

```
 ArrayList<String[]> arrayList = new ArrayList<String[]>();
    arrayList.add(null);
    System.out.println(arrayList.size()); 
```

`1`不会打印`0`。

所以检查`readerList.get(0)`是`null`与否

这是`ArrayList` `add`方法的源代码

```
 410       public boolean add(E e) {
 411           ensureCapacityInternal(size + 1);  // Increments modCount!!
 412           elementData[size++] = e;
 413           return true;
 414       } 
```

如果你看到没有检查`null`所以你必须自己做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:40:34.000

> 但这种情况并非如此， （...）

我不相信。如果`readerList.size() == 0` *headerLine*不更改值并保持`null`.

# if-statement - KnockoutJS DRY if 语句

> ID：12260325
> 
> 赞同：1
> 
> 时间：2012-09-04T09:18:37.397
> 
> 标签：if-statement, knockout.js, dry

使用 knockout.js 我已经遇到过几次这个问题了。似乎我对仅更改一行中的单个属性的简单 if 语句做了很多重复。

```
<!-- ko foreach: $data.content -->
    <!-- ko if: $index() === 0 -->
        <div class='tab-pane active'>
    <!-- /ko -->
    <!-- ko if: $index() !== 0 -->
        <div class='tab-pane'>
    <!-- /ko -->
<!-- /ko --> 
```

此示例是一个简单的演示，但问题出现在更复杂的行中，这显然使其非常容易出现错误。

淘汰赛是否提供任何类型的内联*if*语句，是否有任何其他方法可以解决此代码重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:25:54.723

您可以使用[`css`](http://knockoutjs.com/documentation/css-binding.html)绑定来添加 css 类：

```
<!-- ko foreach: $data.content -->
   <div class='tab-pane' data-bind="css: {active: $index() === 0 } "></div>
<!-- /ko --> 
```

# php - PHP if/else 在变量中？

> ID：12260327
> 
> 赞同：0
> 
> 时间：2012-09-04T09:18:44.323
> 
> 标签：php, variables

嗨，变量中有一些代码，在 Ben Rowe 的帮助下，我设法意识到我需要连接我的字符串，现在我似乎无法解决以下问题......在变量中包含 if 和 else。我有以下 IF/ELSE 不起作用的代码，如果有人能提供帮助，我将不胜感激。

```
 <?php if (!$logged) { ?>
<div id="payment-address">
  <div class="checkout-heading"><span>'.$text_checkout_account.'</span></div>
  <div class="checkout-content"></div>
</div>
<?php } else { ?>
<div id="payment-address">
  <div class="checkout-heading"><span>'.$text_checkout_payment_address.'</span></div>
  <div class="checkout-content"></div>
</div>
<?php } ?>
<?php if ($shipping_required) { ?>
<div id="shipping-address">
  <div class="checkout-heading">'.$text_checkout_shipping_address.'</div>
  <div class="checkout-content"></div>
</div>
<div id="shipping-method">
  <div class="checkout-heading">'.$text_checkout_shipping_method.'</div>
  <div class="checkout-content"></div>
</div>
<?php } ?>
<div id="payment-method">
  <div class="checkout-heading">'.$text_checkout_payment_method.'</div>
  <div class="checkout-content"></div>
</div>

<div id="confirm">
  <div class="checkout-heading">'.$text_checkout_confirm.'</div>
  <div class="checkout-content"></div>
</div> 
```

我尝试剥离PHP标签无效，我还尝试在以下代码之前关闭php然后再次打开它但仍然没有结果:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:22:33.780

您不能在标签之外使用 php 变量。如果你需要一个变量，你必须使用 php 标签，并回显该值。像这样做：

```
<?php if (!$logged) { ?>
    <div id="payment-address">
    <div class="checkout-heading"><span><?php echo $text_checkout_account ?></span></div>
    <div class="checkout-content"></div>
    </div>
<?php } else { ?>
    <div id="payment-address">
    <div class="checkout-heading"><span><?php echo $text_checkout_payment_address ?></span></div>
    <div class="checkout-content"></div>
    </div>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:20:42.823

像这样使用它 -

```
<div class="checkout-heading"><span><?php echo $text_checkout_account ?></span></div> 
```

或 html + php

```
<?php

echo  '<div class="checkout-heading"><span>'.$text_checkout_account.'</span></div>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:26:22.780

您可以尝试三元运算符，如下所示：

```
<div id="payment-address">
   <div class="checkout-heading"><span><? echo ($logged?$text_checkout_payment_address:$text_checkout_account); ?></span></div>
   <div class="checkout-content"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T09:24:31.213

在 HTML 中这样做

```
<div id="payment-address">
  <div class="checkout-heading">
    <span>
      <?php echo $logged ? $text_checkout_payment_address : $text_checkout_account?>
    </span>
  </div>
  <div class="checkout-content"></div>
</div> 
```

如果您对`echo`阅读有关[三元运算符的内容感到困惑](http://php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T09:20:50.157

如果你想将 PHP 变量的内容放在 HTML 中，你必须这样做：

```
<div class="checkout-heading"><span><?php echo $text_checkout_account; ?></span></div> 
```

您也可以通过以下方式快速完成：

```
<div class="checkout-heading"><span><?=$text_checkout_account; ?></span></div> 
```

重要提示：第​​二个示例需要激活短标签。因为`PHP 5.4.0`它默认可用。

参考：[`http://www.php.net/manual/en/ini.core.php#ini.short-open-tag`](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)

# python - 在python2.7的目录中循环文件时读取文件时出错

> ID：12260335
> 
> 赞同：1
> 
> 时间：2012-09-04T09:19:02.153
> 
> 标签：python, file, file-io, python-2.7, tuples

从昨天开始我一直在谷歌搜索这个问题，但无济于事；

当我遍历一个目录中的多个文件，并在该循环中处理每个文件的行时，我总是关闭，但似乎 python 正在打开同一内存空间中的所有文件，所以当我遍历一个我从以前打开的文件中检索所有记录，就好像它们在指针数组中一样。. . .wtf？

```
 import os
    import sys
    import glob
    import string
    import cPickle
    path2 = './'
    columnShuffleTable = loadColumnTable('myTable') #func previously defined
    codeScrambleTable = loadScrambleTable('theirTable') #func previously defined
    pathToFiles2 = glob.glob(os.path.join(path2, '*.DAT'))

    for curFile in pathToFiles2:    
        _list = ['',] 
        #this is the variable with which I'm having a problem
        unscrambledCodes = file(curFile[-10:], 'r') 
        #this always yields the actual first line of the file at which I am currently at
        line = unscrambledCodes.readline() 
        _list[0] = '|' + line.strip() #stripping trailing spaces
        #the list length at this point always equates to '1', so up to here everything is great
        print "list length:", len(_list) 
        # this always reads the 2nd line of the very first file I loaded. . .wtf?
        line = unscrambledCodes.readline().strip() 

        while(line):
            #for unscrambledCodes [my input file] 
            print "len list: ", len(_list), "infile", unscrambledCodes 
            nextLine = unscrambledCodes.readline().strip()

            if not nextLine:
                _list.append('|' + line)
                break
            else:
                _list.append( '|' + line[:-14] + scrambleCode(line[-12:], columnShuffleTable, codeScrambleTable))
            #end if

            line = nextLine
        unscrambledCodes.close()
        outfile = open(curFile[-10:-4] + '.Scrambled', 'w')
        output = '\n'.join(_list)
        outfile.write(output)
        outfile.close() 
```

根据要求，这是我的 i/o 示例：

输入文件1：
AB00007737106517 COSTCLASSU275
C000000010031932155750539976333693187714
C000000010031932155750539976105307608239

文件2 ：
AB00007736638744 COSTCLASSU275
C000000010030284907699012480608351468369
C000000020030284907699012480751885101503

file3:
AB00007737148207 COSTCLASSU275
C000000010032271716759259098738354718484
C000000020032271716759259098394986919513

desired output file1:
AB00007737148207 COSTCLASSU275
|C000000010031932155750539976079292077121
|C000000010031932155750539976126217711213

file2:
AB00007736638744 COSTCLASSU275
|C000000010030284907699012480968864628712
|C000000020030284907699012480294550195814

file3:
AB00007737106517 COSTCLASSU275
|C000000010032271716759259098216262704445
|C000000020032271716759259098085462231948

current output file1:
AB00007737148207 COSTCLASSU275
|C000000010031932155750539976079292077121
|C000000010031932155750539976126217711213

file2:
AB00007736638744 COSTCLASSU275
|C000000010031932155750539976079292077121
|C000000010031932155750539976126217711213
.
.
.
|C000000010030284907699012480968864628712
|C000000020030284907699012480294550195814
file3:
AB00007737106517 COSTCLASSU275
|C000000010031932155750539976079292077121
|C000000010031932155750539976126217711213
.
.
.
|C000000010030284907699012480968864628712
|C000000020030284907699012480294550195814
。
.
.
|C000000010032271716759259098216262704445
|C000000020032271716759259098085462231948

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:54:01.990

普遍的共识是使用 open 而不是 file。我会从那开始。

其次，尝试对打开的文件进行生成器理解，因为它更容易（下一个方法将返回换行符） as `new_file=[x.strip() for x in unscrambledCodes)]`，然后执行您必须执行的任何其他操作，例如`new_file=["|"+line for line in new_file[:-1]]`和`new_file[-1]=......`

同样正如上面其他人指出的那样，您可能想尝试 with 关键字（即使它会带来另一个级别的缩进），例如

`with open("....","r") as in_file, open("...","w") as out_file:`

```
`'''.... do your stuff'''` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:35:09.887

是的， unscrambledCodes.readline() 将一次读取文件的一行，递增到下一行，直到读入整个文件。

你可以使用类似的东西：

```
content = unscrambledCodes.readlines() 
```

它将每一行读入一个数组。然后您可以遍历内容，并根据需要更新行。

另外，我通常使用而不是 file()

```
myFile = open('filename.txt','r')
content = myFile.readlines()
myFile.close() 
```

# jquery-ui - 在 ASP.NET 中通过 Jquery UI 创建弹出式注册表单

> ID：12260340
> 
> 赞同：0
> 
> 时间：2012-09-04T09:19:21.153
> 
> 标签：jquery-ui

我是 jquery 的新手。只需要您的宝贵建议。

我**需要通过 Jquery UI 弹出注册表单**。我有***一个按钮，当按下它时应该显示一个用于用户注册的弹出表单***。

我已经下载了 Jquery UI，但不知道如何将它用于弹出表单？？

在 dwn vting 之前想一想。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:26:43.457

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
 <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>    

$(".btnClassName").live('click',function(){
    if($('div.ui-dialog').length){
        $('div.ui-dialog').remove();
    }

    var $dialog = $('<div>', {
        title: 'Registration Form'
    }).dialog({
        autoOpen: false,
        modal: true,
        width: 600,
        height: 500,
       closeOnEscape: false,

         buttons: {
        "Cancel": function() {
            $(this).dialog( "close" );
            $(this).dialog('destroy');
        }

        "Submit" : function(){
         //Here you will call another function that will take your form values
         //and post it to your php file to Insert
         getAndValidateForm();
         }
    }
    });

   var tab = '<div>Put your HTML here for the form!</div>';

    $('<div>').html(tab).appendTo($dialog);
    $dialog.dialog('open');
    return false;

});

 getAndValidateForm(){
 get your form values like this
 var name =  $("#id_of_name").val();
  //same for another elements
  //validate it like this
   if(!name){
    //name is not given.do what u want to do
     return false; 
    }

   //now make Ajax Request to your PHP file and post all your data

         $.post(your Url, {
                data : your data
            }, function(data){ 
                data = $.trim(data); 
                if(data){ 
                    //do what you want to do  
                } 
            });
    } 
```

我希望你现在很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:33:16.510

它已经在[jqueryui.com的文档中](http://jqueryui.com/demos/dialog/)

先导入jquery库

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

导入jquery库旁边的jqueryui库

```
<script src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js" type="text/javascript"></script> 
```

.

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#Register').click(function(){
            $('#RegistrationForm').dialog();
        });
    });
</script>
<div id="RegistrationForm">
  Your Registration Form contents here
</div>
<input type="button" id="Register"/> 
```

# asp.net-mvc-4 - 如何在 WebAPI 中显示来自数据库的图像？

> ID：12260343
> 
> 赞同：0
> 
> 时间：2012-09-04T09:19:29.020
> 
> 标签：asp.net-mvc-4, asp.net-web-api

大家好，

我的数据库中有一个名为 Merchants 的表。我必须使用 WebAPI 显示图像。我看过教程，但没有教程介绍如何在 WebAPI 中从数据库中检索数据以及如何显示它们。这是我第一次使用 WebAPI。

任何人都可以帮助我在 WebAPI 中遵循的程序吗？

```
 ID   Image                                              StoreID   Status
   1    C:\Users\Administrator\Desktop\Images\k3673723.jpg  1         new
   2    C:\Users\Administrator\Desktop\Images\k7649737.jpg  2         new
  11    C:\Users\Administrator\Desktop\Images\Wallmart.jpg  4         new 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:35:34.440

我不知道你为什么特别需要使用 WebApi Controller 来实现这一点？一个常规的 MVC 控制器就足够了：

```
public class ImageController : Controller
{
    public FileResult Get(int id)
    {
        var file = "C:\\myimage.png";

        var bytes = System.IO.File.ReadAllBytes(file);

        return new FileContentResult(bytes, "image/png");
    }
} 
```

显然，您将使用对数据库的查找来替换硬编码文件路径，以获取提供的 Id 的图像文件路径。

然后，您可以通过点击到达图像`http://localhost/image/get/123`

# ruby-on-rails-3 - Rails 3.1 表格助手

> ID：12260346
> 
> 赞同：0
> 
> 时间：2012-09-04T09:19:39.200
> 
> 标签：ruby-on-rails-3, helper

我正在尝试创建一个辅助方法来大量干燥我的视图，这实际上会为我呈现一个表格。到目前为止，我希望使用的语法是：

```
 = table_for @notes do

  = column "Date" do
    = time_ago(note.created_at)

  = column "Content" do
    = note.content 
```

这是我到目前为止的助手：

```
module TableHelper

    def table_for(items)
        @resource = items.singularize # Singularizes the resource
        @columns = []

        yield
        # Create a table
        content_tag :table, class: 'table table-striped' do
            thead + tbody(items)
        end
    end

    def thead # Loop through columns and print column label
        content_tag :thead do
            content_tag :tr do 
                 @columns.each do |c|
                 concat(content_tag(:th, c[:label]))
                 end
            end
        end
    end

    def tbody(items) # This bit fails :(
  content_tag :tbody do
    items.each { |e|
     concat(content_tag(:tr){
        @columns.each { |c|
          e[c[:label]] = c[:block].call(e[c[:label]]) if c[:block]
          concat(content_tag(:td, e[c[:block]]))
        }
      })
    }
  end
end

    def column (label, &block) # Takes a label and block, appending it to the columns instance
        @columns << { label: label, block: block}
        nil # Stops it printing the @columns variable
    end
end 
```

这不足之处在于 tbody 方法。我不知道如何将奇异资源传递给块。

例如，在这种情况下，我将 @notes 作为集合传递。然后在列块中调用 note.created_at。但是，没有定义“注释”。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:01:12.587

可能你需要更换

```
= table_for @notes do` 
```

经过

```
= table_for @notes do |note| 
```

`table_for`当你让步时，你应该从函数中执行`yield item`. 这`item`是`items`数组的一个实例。所以也需要准备。

**编辑：**此链接有不同的方法：[https ://stackoverflow.com/a/11483295/1160106](https://stackoverflow.com/a/11483295/1160106)

# java - 当没有调用 @Remove 注释方法时，有状态会话 bean 会导致泄漏吗？

> ID：12260347
> 
> 赞同：6
> 
> 时间：2012-09-04T09:19:43.340
> 
> 标签：java, ejb, ejb-3.0

我有一个 JSF 应用程序，它在托管 bean 中从远程有状态会话 bean (EJB 3.0) 调用业务逻辑。

现在有一个 HttpSessionListener 调用该有状态会话 bean 上的 @Remove 注释方法，因此一旦 HttpSession 被销毁，容器就可以删除有状态会话 bean。

现在我想知道如果我不调用 @Remove 注释方法并且 HttpSession 被破坏会发生什么。有状态会话 bean 的客户端此时不存在记录器。容器是否会移除有状态会话 bean？还是它会永远存在导致某种泄漏（内存/磁盘）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T09:30:57.720

是的，容器将在超时时删除未使用的有状态会话 bean。无论如何，当不再需要 bean 的状态时调用 @Remove 注释方法是要遵循的模式。

可以在应用程序服务器的设置中设置有状态会话 bean 的删除超时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T09:35:36.343

如果`@Remove`未指定注释，则有状态 bean 将保留在上下文中，直到指定的超时时间。它不会直接调用泄漏，但如果您没有正确管理依赖项并且还存在一些引用，那么您可能会有潜在的内存泄漏。所以建议使用`@Remove`注解。

# bash - 如何将引用的参数从一个函数传递给另一个函数？

> ID：12260349
> 
> 赞同：0
> 
> 时间：2012-09-04T09:19:43.090
> 
> 标签：bash

我正在编写的脚本有一点问题......假设我有 2 个功能：

```
function foo1 {
    while [ $# -gt 0 ]; do
        echo $1
        shift
    done
}

function foo2 {
    foo1 $@
} 
```

我的问题如下。如果我做`foo1 -o "file with space.txt"`输出是

```
-o
file with space.txt 
```

但是用`foo2 -o "file with space.txt"`or `foo2 -o file\ with\ space.txt`，我得到

```
-o
file
with
space.txt 
```

有什么方法可以让 foo1 从 foo2 接收“带有 space.txt 的文件”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T09:23:38.273

在函数 foo2 中，使用双引号：

```
foo1 "$@" 
```

详情见`man bash`：

> 当扩展出现在双引号内时，每个参数都扩展为一个单独的单词。即“$@”等价于“$1”“$2”

# android - 我想使用android从水平滚动的图像中设置壁纸

> ID：12260357
> 
> 赞同：0
> 
> 时间：2012-09-04T09:20:13.897
> 
> 标签：android

请检查我的 main.xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/IVdisplay"
            android:layout_width="200dp"
            android:layout_height="200dp"
            android:layout_gravity="center"
            android:src="@drawable/img" />
        <Button
            android:id="@+id/BsetWallpaper"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Set Wallpaper" />
 <HorizontalScrollView android:layout_width="200dp"
                       android:layout_height="wrap_content"
                       android:layout_gravity="center" >
    <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
           android:orientation="horizontal">
        <ImageView
            android:id="@+id/IVimage1"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/a" />
         <ImageView
            android:id="@+id/IVimage2"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/b" />
          <ImageView
            android:id="@+id/IVimage3"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/c" />
           <ImageView
            android:id="@+id/IVimage4"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/d" />
            <ImageView
            android:id="@+id/IVimage5"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/e" />
             <ImageView
            android:id="@+id/IVimage6"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/f" />
             <ImageView
            android:id="@+id/IVimage7"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/g" />
             <ImageView
            android:id="@+id/IVimage8"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/h" />
               <ImageView
            android:id="@+id/IVimage9"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/i" />
                 <ImageView
            android:id="@+id/IVimage10"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/j" />
                   <ImageView
            android:id="@+id/IVimage11"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/k" />
                     <ImageView
            android:id="@+id/IVimage12"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/l" />
                       <ImageView
            android:id="@+id/IVimage13"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/m" />
                         <ImageView
            android:id="@+id/IVimage14"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/n" />
             </LinearLayout>
</HorizontalScrollView>             
    </LinearLayout> 
```

我已经静态添加了一些图像并将它们添加到 Horizo​​ntalScrollView。现在有一个设置墙纸的按钮我想从中选择图像并想设置墙纸。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:30:30.393

你可能需要`setOnClickListener()`在你的所有东西上`ImageView`，我建议你以*编程方式添加你的***图像** ，这将使你的事件处理更容易。*`onClick`*

 *至于设置壁纸，您需要`android.permission.SET_WALLPAPER`在清单文件中声明权限。以下代码将设置`Bitmap bmp`为墙纸

```
getApplicationContext().setWallpaper(bmp); 
```*

# sql-server - SSIS 导入 Excel 字符串类型以浮动 SQL Server 数据类型

> ID：12260366
> 
> 赞同：0
> 
> 时间：2012-09-04T09:20:42.997
> 
> 标签：sql-server, excel, ssis, trim, ssis-data-types

我有一个 excel 文件，其中三列都是空的（从上到下），需要作为浮点数或货币导入到 sql server 表中。这些列的其他 excel 文件包含带两位小数的值。由于我无法将空白单元格导入数字列，因此我`LEN(TRIM(F11)) > 1 ? (DT_R8)F11 : 0`在派生列组件中使用了在 db 列中写入 0。

但是现在当我导入其他带有值的 Excel 文件时，我得到的值类似于`8,4971E+20`而不是`849,71`.

我可以改变表达来解决这个问题还是涉及其他事情？

此外，我不想将 NULL 插入到 db float/money 列中，而不是写入“0”。

希望你能帮我解决这个问题。

**更新：**让我尝试另一种方式：

我在那些空的 excel 列中有一个 if 表达式，如果另一张表的值不是数字，它只会在单元格内放置任何内容。

如果我可以使用“else”语句向每个单元格插入一个数值，或者可能为 NULL，我可以直接作为浮点数导入。我尝试在 else 语句中加入 ' **0** ' 或 ' **NULL** ' 但我想由于它们周围的引号，它们将被解释为字符串。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:22:21.273

听起来您就是[在 MSDN 上发布类似问题](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/0d99d309-256d-4b64-bfc1-d06674c266a2)的 TonyC 。

# svg - 在 SVG 中绘制文本但删除背景

> ID：12260370
> 
> 赞同：6
> 
> 时间：2012-09-04T09:20:51.780
> 
> 标签：svg

我正在使用一个看起来像[这样的 SVG 元素：（抱歉，我必须将其作为链接而不是图片发布，但作为新用户，我没有发布图像的权限）](http://royeven.dyndns.org/est.jpg)

页面中间带有圆角的边框，但在要插入页眉/页脚的位置移除了边框。用户指定的文本将被插入页眉、页脚和框架本身。该矩形被绘制在另一个背景（图片、另一个带有颜色的矩形等）之上。我需要找到一种方法来*保留*原始背景，只绘制部分边框并将文本放在原始背景之上。

我想出了这个解决方案：

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 620 1100" preserveAspectRatio="xMidYMid meet">
    <defs>
        <!--Define some texts-->
        <text id="text1" x="90" y="100" style="text-anchor:start;font-size:30px;">THIS IS MY HEADER</text>
        <text id="text2" x="525" y="1010" style="text-anchor:end;font-size:30px;">MY TEXT HERE</text>

        <mask id="Mask1">
            <!--draw the entire screen-->
            <rect x="0" y="0" width="620" height="1100" style="fill:white;" />
            <!--Mask out the two rectangles where text is to be placed-->
            <rect x="300" y="980" width="350" height="50" style="fill:black;" />
            <rect x="90" y="90" width="350" height="40" style="fill:black;" />
        </mask>
    </defs>

    <!--The original background (here a rect with a fill color, but could also be an image)-->      
    <rect x="0" y="0" width="620" height="1100" style="fill:#f0ffb6"/>
    <!--Draw the rectangle but applying the mask-->
    <rect x="100" y="100" rx="20" ry="20" width="420" height="900" mask="url(#Mask1)" style="fill:none;stroke:green;stroke-width:5"/>

    <!--Draw the text-->                
    <use xlink:href="#text1" fill="black" stroke="black" stroke-width="1" />
    <use xlink:href="#text2" fill="black" stroke="black" stroke-width="1" />

    <text x="200" y="200">This text goes into the border</text>
</svg> 
```

我现在的问题是掩码中的最后两个矩形（*不*绘制边框的矩形）必须具有静态宽度。如果用户改变了文本宽度，用户还需要计算一个新的文本宽度并更新这两个矩形。

*有没有办法屏蔽与文本*本身宽度完全相同的块并跳过蒙版中的矩形。或者这是制造这种面具的唯一方法？如果“外面”的任何人有更好、更直观的方式来实现这种布局，我会非常有兴趣收到你的来信。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-04T12:57:18.910

可以使用 svg 过滤器在不编写脚本的情况下“删除背景”的 svg 文本。

例如：

```
<filter x="0" y="0" width="1" height="1" id="removebackground">
   <feFlood flood-color="blue"/>
   <feComposite in="SourceGraphic"/>
</filter> 
```

可以被这样的文本使用：

```
<use xlink:href="#text1" fill="black" filter="url(#removebackground)"/> 
```

这将自动适应字符串宽度。如果您需要一些填充，您可以调整过滤器元素上的 x,y,width,height 属性。

嗯，再想想，这可能不是你想要的。但可以调整上述内容。这是您使用此解决方案的文件：

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 620 1100" preserveAspectRatio="xMidYMid meet">
    <defs>
        <!--Define some texts-->
        <text id="text1" x="90" y="100" style="text-anchor:start;font-size:30px;">THIS IS MY HEADER</text>
        <text id="text2" x="525" y="1010" style="text-anchor:end;font-size:30px;">MY TEXT HERE</text>
        <filter x="0" y="0" width="1" height="1" id="removebackground">
            <feFlood flood-color="black"/>
        </filter>

        <mask id="Mask1">
            <!--draw the entire screen-->
            <rect x="0" y="0" width="620" height="1100" style="fill:white;" />
            <!--Mask out the two rectangles where text is to be placed-->
            <use xlink:href="#text1" filter="url(#removebackground)"/>
            <use xlink:href="#text2" filter="url(#removebackground)"/>
        </mask>
    </defs>

    <!--The original background (here a rect with a fill color, but could also be an image)-->      
    <rect x="0" y="0" width="620" height="1100" style="fill:#f0ffb6"/>
    <!--Draw the rectangle but applying the mask-->
    <rect x="100" y="100" rx="20" ry="20" width="420" height="900" mask="url(#Mask1)" style="fill:none;stroke:green;stroke-width:5"/>

    <!--Draw the text-->                
    <use xlink:href="#text1" fill="black" stroke="black" stroke-width="1" />
    <use xlink:href="#text2" fill="black" stroke="black" stroke-width="1" />

    <text x="200" y="200">This text goes into the border</text>
</svg> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T19:31:55.670

我相信影响这一点的一种简单方法是将用户的文本用作具有大笔划宽度集和黑色笔划的亮度蒙版。接下来，将文本正常放置在蒙版边框上。

# objective-c - 没有返回类型的 Objective-c 方法

> ID：12260374
> 
> 赞同：9
> 
> 时间：2012-09-04T09:21:13.283
> 
> 标签：objective-c, macos, cocoa

这样写objective-c方法是否正确

```
-methodA: (NSString *)str // without return type 
{
    return @"test";
} 
```

以上方法对我来说效果很好。 一样
吗？ 我正在使用sdk。`-methodA: (NSString *)str``-(id)methodA: (NSString *)str`
`Mac 10.5 os x`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T09:49:16.280

要回答您的问题，来自“Objective-C 2.0 编程语言”：

> 如果没有显式声明返回或参数类型，则假定它是方法和消息的默认类型——一个`id`.

所以`- methodA:(NSString *)str`是有效的，与 相同`- (id)methodA:(NSString *)str`。

不过话虽如此，这肯定是不寻常的编码习惯，不值得鼓励 - 输入额外的四个字符！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T09:23:52.110

```
- (void) methodA (NSString *)str //always start a methodod name lower case
{
  return;  //If you do not return anything then there is nothing to return. 
} 
```

`(id)`不同于`(void)`. 你将不得不在这里返回一些东西。`id`表示任何类型的对象。只代表`void`“无”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T09:41:18.087

我在我的应用程序中更改了 -init ：

```
-init
{
    ...
    return self;
} 
```

并且编译器没有显示任何警告，如果我像这样更改 -init ：

```
-(int)init
{
    ...
    return 0;
} 
```

编译器显示有关预期类型的​​警告，所以我可以说 -init 和 -(id)init 是相同的方法，因为我什至不知道编译器会通过这种语法，并且因为这样检查语言的特性是不好的做法:)。我将阅读 Apple 的有关 Objective-C 的文档，并尝试找出相关内容。谢谢你的好问题:)

编辑：

哇，你可以[在这里](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-SW1)阅读文档，类接口一章。(void)、(NSObject*) 等只是强制转换。引用：“方法返回类型是使用标准 C 语法声明的，用于将一种类型转换为另一种类型”。另一个引用：“如果没有显式声明返回或参数类型，则假定它是方法和消息的默认类型 - 一个 id”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-04T09:49:18.823

正如语言规范所述，这是允许的

> If a return or parameter type isn’t explicitly declared, it’s assumed to be the default type for methods and messages—an `id`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T09:28:19.287

好吧，如果它编译并按照您的预期运行，那么它就可以工作。但我不会说这是一个好习惯。

如果我不得不猜测，我会假设您的方法不会返回任何内容。因此，尽管“正确”它具有误导性。

如果你真的想返回任何类型的对象，那额外的四个字符会伤害吗？如果它真的什么都不返回，则设置返回类型为`void`. 取悦编译器很容易，但不是全部。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T09:29:58.653

即使它编译它也不正确。它使其他开发人员的生活变得更加艰难，包括你未来的自己。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T09:25:50.137

做这个：

```
- (void)methodA:(NSString *)str 
{
  //non returning method;
} 
```

* * *

```
- (NSString *)methodA:(NSString *)str 
{
  return str;  //returning method;
} 
```

# javascript - Javascript：覆盖函数的原型 - 不好的做法？

> ID：12260375
> 
> 赞同：28
> 
> 时间：2012-09-04T09:21:20.017
> 
> 标签：javascript, constructor, prototype

因为当我们声明一个函数时，我们将其原型的构造函数属性指向函数本身，所以像这样覆盖函数的原型是一种不好的做法：

```
function LolCat() {
}

// at this point LolCat.prototype.constructor === LolCat

LolCat.prototype = {
    hello: function () {
        alert('meow!');
    }
    // other method declarations go here as well
};

// But now LolCat.prototype.constructor no longer points to LolCat function itself

var cat = new LolCat();

cat.hello(); // alerts 'meow!', as expected

cat instanceof LolCat // returns true, as expected 
```

我不是这样做的，我还是更喜欢下面的方法

```
LolCat.prototype.hello = function () { ... } 
```

但我经常看到其他人这样做。

那么，为了方便起见，如第一个示例中那样，为了方便起见，通过覆盖函数的原型对象从原型中删除构造函数引用是否有任何影响或缺点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-04T09:42:02.407

就这一点而言，我看不到任何人提到最佳实践，所以我认为这归结为您是否可以看到该`constructor`属性有用。

值得注意的一件事是`constructor`，如果您不销毁它，该属性也将在创建的对象上可用。在我看来，这可能很有用：

```
var ClassOne = function() {alert("created one");}
var ClassTwo = function() {alert("created two");}

ClassOne.prototype.aProperty = "hello world"; // preserve constructor
ClassTwo.prototype = {aProperty: "hello world"}; // destroy constructor

var objectOne = new ClassOne(); // alerts "created one"
var objectTwo = new ClassTwo(); // alerts "created two"

objectOne.constructor(); // alerts "created one" again
objectTwo.constructor(); // creates and returns an empty object instance 
```

所以在我看来，这是一个架构决定。您是否要允许创建的对象在实例化后重新调用其构造函数？如果是这样保存它。如果没有，就销毁它。

请注意，objectTwo 的构造函数现在完全等于标准的 Object 构造函数 - 没用。

```
objectTwo.constructor === Object; // true 
```

所以调用`new objectTwo.constructor()`等价于`new Object()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T09:34:19.077

这不是坏习惯，但你必须知道你在做什么以及为什么。它对于原型继承非常有用。您覆盖原型的对象将获得您分配给它的原型的对象的所有属性：

你使一个对象继承使用

```
ChildClassName.prototype = new ParentClass();. 
```

现在 ChildClassName 具有 ParentClass 的所有功能，但失去了之前分配给它的原型的任何功能。您需要记住使用重置对象的构造函数属性

```
ChildClassName.prototype.constructor=ChildClassName. 
```

否则，该对象将被报告为（在测试对象的类型时）ParentClass 类型而不是 ChildClassName 类型。

现在您可以按照您自己描述的方式向 ChildClassName 对象添加更多方法。

```
ChildClassName.prototype.myMethod = function(){
    //do stuff
} 
```

结果是一个父对象/“类”（当然，javascript 中没有真正的类）和一个从它继承并扩展其功能的子对象/“类”。

您只需要知道，如果您覆盖原型，分配给它的任何属性都将消失。在构造继承对象时，这可能正是您想要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T09:26:52.663

这种形式：

```
LolCat.prototype = {
  hello: function () {
      alert('meow!');
  }
}; 
```

销毁任何现有方法和公共属性。在示例中，*正如给定*的那样，这并不重要，因为新创建的 LolCat 没有任何属性或方法。但是，在更复杂的代码中应该注意这一点。

这种形式：

```
LolCat.prototype.hello = function () { ... } 
```

将新方法添加到现有对象并保持现有对象不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T09:28:13.833

`constructor`使用原型继承时覆盖它不是一个坏习惯。事实上，很多人都是这样做的：

```
LolCat.prototype = {
    constructor: LolCat,
    hello: function () {
        alert('meow!');
    }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-19T13:40:01.620

经过多年的 javascript，我偶然发现了一个奇怪的错误，其中一个对象的新实例，然后传入一个 mixin，`__proto__`当它的`prototype`类声明为：

```
MyClass.prototype = {
   constructor: MyClass,
   myMethod(){ ...}
}; 
```

使用时不再有问题：

```
Object.assign( MyClass.prototype, {
   myMethod(){ ...}
}); 
```

奖励：您不必再重新签名构造。

我想这是因为当我们完全覆盖原型属性时，我们也会擦除它的特殊属性并将其转换为普通属性......也许这个默认情况下不应该是可写的......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T09:39:18.950

这不是一个坏习惯。但是有一种简单而标准的方法可以覆盖下面的函数。每当我们在全局范围内定义“函数 LolCat()”时，它都会在窗口下创建，因此您始终可以像下面这样编写代码。

```
window.LolCat = function() {...};
LolCat.prototype.hello = function () { ... } 
```

# python - 如何从字符串的开头删除重复字符

> ID：12260377
> 
> 赞同：2
> 
> 时间：2012-09-04T09:21:21.277
> 
> 标签：python, regex

我有一个人工输入的数字数组，其中包含在实际数字开始之前随机数量的零。猜测示例会说更多：

```
entry_1="0000005452508"
entry_2="02965054"
entry_3="5487864" 
```

我需要在这些重复的零结束后获取字符串，即第一个条目应导致 5452508。如果不固定，则为位数。列表非常庞大，所以我需要一些好的和快速的东西才能在这里工作。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T09:22:31.823

[`lstrip`](http://docs.python.org/library/stdtypes.html#str.lstrip)做你想做的事：

```
entry_1 = "0000005452508".lstrip("0")
entry_2 = "02965054".lstrip("0")
entry_3 = "5487864".lstrip("0") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T09:27:12.427

`lstrip`，正如[@dav1d](https://stackoverflow.com/a/12260400/140816)所建议的那样，*绝对*是要走的路。

使用正则表达式，您*可以*使用以下方法来完成相同的操作：

```
> import re
> re.sub("^0+", "", "0000005452508")
"5452508" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:29:07.170

我会`.lstrip`按照已经建议的那样去，但如果你真的想要一个正则表达式。

没有任何内容的子前导零：

```
re.sub(r'^0*', '', entry_1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T09:41:08.943

已经提供了很好的答案，但**都在创建一个新的序列**。为了提供替代方案，由于您已指定您的列表很大，因此复制可能是一个问题，您应该考虑使用[`itertools.dropwhile`](http://docs.python.org/library/itertools.html#itertools.dropwhile)：

> 制作一个迭代器，只要谓词为真，它就会从可迭代对象中删除元素；之后，返回每个元素。

例如：

```
import itertools
itertools.dropwhile(lambda x: x == '0', entry_1) 
```

# javascript - 使用 javascript onclick 设置 CSS 颜色

> ID：12260379
> 
> 赞同：0
> 
> 时间：2012-09-04T09:21:28.160
> 
> 标签：javascript, html, css

嗨，当我在该页面上并且它不起作用时，我正试图让我的菜单链接变红。

html:

```
<li><a id="home" onclick="changeClass('home')" href="index.php">Home</a></li> 
```

CSS：

```
#topMenu li{
    display:inline;
    margin-right:60px;
    font-size:12px;
    font-weight:bold;
    color:#000;
    text-decoration:none;
    }

#topMenu li a{
    color:#000;
    text-decoration:none;
    }

#topMenu li a:hover{
    color:#666;
    text-decoration:underline;
    }

.topMenuon{
    color:#F00
    } 
```

Javascript：

```
 function changeClass(id)
    {
       var element = document.getElementById(id);
       element.className = element.className + ”topMenuon”;

    } 
```

关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:29:01.330

您可能想要做那个服务器端，但如果由于某种原因您不能并且您不能使用`jQuery`：

```
function changeClass (id) {
  var el = document.getElementById(id);
  if (el.href == location.pathname) el.className += 'topMenuon';
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:24:12.593

包含 Jquery 更简单，并执行以下操作：

```
$('#home').on('click',function(){

   $(this).addClass('topmenuon');

}); 
```

但是，如果您要转到另一个页面，它就不会那样工作。您必须在 javascript/jquery 中以某种方式检测您所在的页面（使用 url 中的某些内容，或使用页面上的标识符，例如部分标题），然后在该页面上添加您的类（或者，做它服务器如果服务器直接渲染，则根本不调用它）。无论如何，如果您要离开页面，就不能像那样使用 onclick，新页面无法知道您是否正在执行完整的回发而不是 ajax！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:31:16.423

申请为

```
var element = document.getElementById('home');  
        element.setAttribute("className", newClass); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T09:25:00.510

使用 jquery - 这在`<head>`...

```
 <script src="yourPath/jquery_1.8.0_min.js" type="text/javascript"></script> 
```

然后...

```
 $(document).ready(function(){

   $("#home").addClass('topMenuon');

 } 
```

这样就可以了...

小号

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T09:30:00.070

纯js

```
window.onload = function(){
   document.getElementById("home").onclick = function(){
      this.className +=" topMenuon" ;
   }
} 
```

**编辑**

单击链接，您可能会进入一个新页面。因此，上面的代码不会更改链接的类，因为您现在在一个新页面上。

您可能需要使用 php 将类添加到链接中（我假设您正在使用它）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T09:34:13.910

```
function changeClass()
        {
            var element = document.getElementById('home');
            element.className += 'topMenuon';
        } 

<li><a id="home" onclick="changeClass();" href="#">Home</a></li> 
```

# eclipse-cdt - qmake pro 文件中的绝对路径

> ID：12260381
> 
> 赞同：0
> 
> 时间：2012-09-04T09:21:34.023
> 
> 标签：eclipse-cdt, qmake

我们在源代码管理中保留了一个 qmake 项目文件。由于每个用户都可以将项目签出到不同的路径，这会导致版本控制出现一些问题。

例如每次更新项目时，我们必须手动进入项目文件并修复文件中的路径。

处理它的最佳解决方案是什么？我正在考虑使用环境变量并将环境变量分配给项目文件中的变量，但我也想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:59:26.773

最安全的解决方案是仅在 qmake 文件中使用*相对*路径。这样，用户在哪里结账都没有关系。

根据我的经验，根据用户设置环境变量会导致很多脆弱性，应该不惜一切代价避免，例如

*   用户移动到不同的构建空间，但忘记更新变量，因此他们最终构建了错误的东西
*   用户认为环境变量是个好主意，所以添加另一个环境变量来改变构建行为的其他方面（例如编译器标志），并且您的构建最终无法重现。

# c# - 使 GetRawInputDeviceInfo 和 RIDI_DEVICEINFO 与 C# 一起工作

> ID：12260384
> 
> 赞同：2
> 
> 时间：2012-09-04T09:21:51.183
> 
> 标签：c#, windows, winapi

我有一个问题，我似乎无法将 GetRawInputDeviceInfo 与 RIDI_DEVICEINFO 结合使用（以尝试检索 RID_DEVICE_INFO）根本不起作用。

我从函数返回错误-1，这应该意味着没有足够的空间来存储 RID_DEVICE_INFO，我已经尝试将其增加到所需的更多但效果相同。

我使用了以下 DLLImports ：

```
[DllImport("User32.dll")]
extern static uint GetRawInputDeviceInfo(IntPtr hDevice, uint uiCommand, IntPtr pData, ref uint pcbSize);

[DllImport("User32.dll")]
unsafe extern static uint GetRawInputDeviceInfo(IntPtr hDevice, uint uiCommand, IntPtr pData, IntPtr pcbSize); 
```

两者都没有结果，但是当我使用 RIDI_DEVICENAME 尝试这些时，它们都可以正常工作。在这种情况下，我这样调用函数：

首先获取尺寸：`GetRawInputDeviceInfo(rid.hDevice, RIDI_DEVICENAME, IntPtr.Zero, pSize);`

接着 ：`GetRawInputDeviceInfo(rid.hDevice, RIDI_DEVICENAME, pData, pSize);`

得到名字。两者都工作正常，但是当我这样调用函数时：

```
int intReturn = (int)GetRawInputDeviceInfo(rid.hDevice, RIDI_DEVICEINFO, IntPtr.Zero, pInfoSize);
intReturn = (int)GetRawInputDeviceInfo(rid.hDevice, RIDI_DEVICEINFO, pInfoData, pInfoSize); 
```

然后首先我将 0 放入 intReturn 并且也可以获得正确的大小，但随后我将 -1 放入 return，当我执行 PtrToStructure 时，它​​只会返回错误且看似随机的值。

另外，当我在那之后执行 GetLastWin32Error() 时，它有时会返回 1008 或 87 ，这对我来说似乎也没有任何逻辑，因为我看不出我可能在哪里设置了错误的参数。

我将 RIDI_DEVICENAME 和 RIDI_DEVICEINFO 定义为：

```
internal const uint RIDI_DEVICENAME = 0x20000007;
internal const uint RIDI_DEVICEINFO = 0x2000000b; 
```

任何人都可以帮助解决这个问题或向我展示 GetRawInputDeviceInfo 的工作 C# 示例吗？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T21:01:24.000

我让它在 Windows 8.1 x64 中工作（如果我在某处错过了枚举或结构，请告诉我）：

```
/// <summary>
/// Retrieves information about the raw input device.
/// </summary>
/// <param name="hDevice">A handle to the raw input device. This comes from the lParam of the WM_INPUT message, from the hDevice member of RAWINPUTHEADER, or from GetRawInputDeviceList. It can also be NULL if an application inserts input data, for example, by using SendInput.</param>
/// <param name="uiCommand">Specifies what data will be returned in pData.</param>
/// <param name="pData">A pointer to a buffer that contains the information specified by uiCommand. If uiCommand is RIDI_DEVICEINFO, set the cbSize member of RID_DEVICE_INFO to sizeof(RID_DEVICE_INFO) before calling GetRawInputDeviceInfo. </param>
/// <param name="pcbSize">The size, in bytes, of the data in pData. </param>
/// <returns>If successful, this function returns a non-negative number indicating the number of bytes copied to pData. If pData is not large enough for the data, the function returns -1\. If pData is NULL, the function returns a value of zero. In both of these cases, pcbSize is set to the minimum size required for the pData buffer. Call GetLastError to identify any other errors.</returns>
/// <remarks>http://msdn.microsoft.com/en-us/library/windows/desktop/ms645597%28v=vs.85%29.aspx</remarks>
[DllImport("User32.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern uint GetRawInputDeviceInfo(
    [In] IntPtr hDevice,
    [In] RawInputDeviceInformationCommand uiCommand,
    [In, Out] IntPtr pData,
    [In, Out] ref uint pcbSize);

public enum RawInputDeviceInformationCommand : int
{
    /// <summary>
    /// pData points to a string that contains the device name. For this uiCommand only, the value in pcbSize is the character count (not the byte count).
    /// </summary>
    RIDI_DEVICENAME = 0x20000007,
    /// <summary>
    /// pData points to an RID_DEVICE_INFO structure.
    /// </summary>
    RIDI_DEVICEINFO = 0x2000000b,
    /// <summary>
    /// pData points to the previously parsed data.
    /// </summary>
    RIDI_PREPARSEDDATA = 0x20000005
}

[StructLayout(LayoutKind.Explicit)]
public struct RID_DEVICE_INFO
{
    /// <summary>
    /// The size, in bytes, of the RID_DEVICE_INFO structure. 
    /// </summary>
    [FieldOffset(0)]
    public int cbSize;
    /// <summary>
    /// The type of raw input data.
    /// </summary>
    [FieldOffset(4)]
    public RawInputDeviceType dwType;
    /// <summary>
    /// If dwType is RIM_TYPEMOUSE, this is the RID_DEVICE_INFO_MOUSE structure that defines the mouse. 
    /// </summary>
    [FieldOffset(8)]
    public RID_DEVICE_INFO_MOUSE mouse;
    /// <summary>
    /// If dwType is RIM_TYPEKEYBOARD, this is the RID_DEVICE_INFO_KEYBOARD structure that defines the keyboard. 
    /// </summary>
    [FieldOffset(8)]
    public RID_DEVICE_INFO_KEYBOARD keyboard;
    /// <summary>
    /// If dwType is RIM_TYPEHID, this is the RID_DEVICE_INFO_HID structure that defines the HID device. 
    /// </summary>
    [FieldOffset(8)]
    public RID_DEVICE_INFO_HID hid;
}
/// <summary>
/// Defines the raw input data coming from the specified mouse.
/// </summary>
/// <remarks>http://msdn.microsoft.com/en-us/library/windows/desktop/ms645589%28v=vs.85%29.aspx</remarks>
[StructLayout(LayoutKind.Sequential)]
public struct RID_DEVICE_INFO_MOUSE
{
    /// <summary>
    /// The identifier of the mouse device.
    /// </summary>
    public int dwId;
    /// <summary>
    /// The number of buttons for the mouse.
    /// </summary>
    public int dwNumberOfButtons;
    /// <summary>
    /// The number of data points per second. This information may not be applicable for every mouse device.
    /// </summary>
    public int dwSampleRate;
    /// <summary>
    /// TRUE if the mouse has a wheel for horizontal scrolling; otherwise, FALSE.
    /// Windows XP:  This member is only supported starting with Windows Vista.
    /// </summary>
    public bool fHasHorizontalWheel;
}
/// <summary>
/// Defines the raw input data coming from the specified keyboard. 
/// </summary>
/// <remarks>http://msdn.microsoft.com/en-us/library/windows/desktop/ms645587%28v=vs.85%29.aspx</remarks>
[StructLayout(LayoutKind.Sequential)]
public struct RID_DEVICE_INFO_KEYBOARD
{
    /// <summary>
    /// The type of the keyboard. 
    /// </summary>
    public int dwType;
    /// <summary>
    /// The subtype of the keyboard. 
    /// </summary>
    public int dwSubType;
    /// <summary>
    /// The scan code mode. 
    /// </summary>
    public int dwKeyboardMode;
    /// <summary>
    /// The number of function keys on the keyboard.
    /// </summary>
    public int dwNumberOfFunctionKeys;
    /// <summary>
    /// The number of LED indicators on the keyboard.
    /// </summary>
    public int dwNumberOfIndicators;
    /// <summary>
    /// The total number of keys on the keyboard. 
    /// </summary>
    public int dwNumberOfKeysTotal;
}
/// <summary>
/// Defines the raw input data coming from the specified Human Interface Device (HID). 
/// </summary>
/// <remarks>http://msdn.microsoft.com/en-us/library/windows/desktop/ms645584%28v=vs.85%29.aspx</remarks>
[StructLayout(LayoutKind.Sequential)]
public struct RID_DEVICE_INFO_HID
{
    /// <summary>
    /// The vendor identifier for the HID. 
    /// </summary>
    public int dwVendorId;
    /// <summary>
    /// The product identifier for the HID. 
    /// </summary>
    public int dwProductId;
    /// <summary>
    /// The version number for the HID. 
    /// </summary>
    public int dwVersionNumber;
    /// <summary>
    /// The top-level collection Usage Page for the device. 
    /// </summary>
    public ushort usUsagePage;
    /// <summary>
    /// The top-level collection Usage for the device. 
    /// </summary>
    public ushort usUsage;
}
/// <summary>
/// The type of raw input data.
/// </summary>
public enum RawInputDeviceType : int
{
    /// <summary>
    /// Data comes from a mouse.
    /// </summary>
    RIM_TYPEMOUSE = 0,
    /// <summary>
    /// Data comes from a keyboard.
    /// </summary>
    RIM_TYPEKEYBOARD = 1,
    /// <summary>
    /// Data comes from an HID that is not a keyboard or a mouse.
    /// </summary>
    RIM_TYPEHID = 2,
}
//somewhere in your code:
IntPtr pData = IntPtr.Zero;
uint strsize = 0;
IntPtr deviceHandle = <your device handle here>;
result = GetRawInputDeviceInfo(deviceHandle, RawInputDeviceInformationCommand.RIDI_DEVICENAME, pData, ref strsize);
pData = Marshal.AllocHGlobal(((int)strsize)*2);
result = GetRawInputDeviceInfo(deviceHandle, RawInputDeviceInformationCommand.RIDI_DEVICENAME, pData, ref strsize);
Console.WriteLine("Result = " + result + " ErrorCode = " + Marshal.GetLastWin32Error());
string name = Marshal.PtrToStringAuto(pData);
Console.WriteLine("Name = " + name);
uint structsize = (uint)Marshal.SizeOf(typeof(RID_DEVICE_INFO));
RID_DEVICE_INFO di = new RID_DEVICE_INFO();
di.cbSize = (int)structsize;
pData = Marshal.AllocHGlobal((int)structsize);
result = GetRawInputDeviceInfo(deviceHandle, RawInputDeviceInformationCommand.RIDI_DEVICEINFO, pData, ref structsize);
di = (RID_DEVICE_INFO)Marshal.PtrToStructure(pData, typeof(RID_DEVICE_INFO));
Console.WriteLine("di.dwType = " + Enum.GetName(typeof(RawInputDeviceType), di.dwType));
switch (di.dwType)
{
    case RawInputDeviceType.RIM_TYPEHID:
        Console.WriteLine("di.hid.dwVendorId = " + di.hid.dwVendorId);
        Console.WriteLine("di.hid.dwProductId = " + di.hid.dwProductId);
        Console.WriteLine("di.hid.dwVersionNumber = " + di.hid.dwVersionNumber);
        Console.WriteLine("di.hid.usUsagePage = " + di.hid.usUsagePage);
        Console.WriteLine("di.hid.usUsage = " + di.hid.usUsage);
        break;
    case RawInputDeviceType.RIM_TYPEKEYBOARD:
        Console.WriteLine("di.keyboard.dwType = " + di.keyboard.dwType);
        Console.WriteLine("di.keyboard.dwSubType = " + di.keyboard.dwSubType);
        Console.WriteLine("di.keyboard.dwNumberOfFunctionKeys = " + di.keyboard.dwNumberOfFunctionKeys);
        Console.WriteLine("di.keyboard.dwNumberOfIndicators = " + di.keyboard.dwNumberOfIndicators);
        Console.WriteLine("di.keyboard.dwNumberOfKeysTotal = " + di.keyboard.dwNumberOfKeysTotal);
        break;
    case RawInputDeviceType.RIM_TYPEMOUSE:
        Console.WriteLine("di.mouse.dwId = " + di.mouse.dwId);
        Console.WriteLine("di.mouse.dwNumberOfButtons = " + di.mouse.dwNumberOfButtons);
        Console.WriteLine("di.mouse.dwSampleRate = " + di.mouse.dwSampleRate);
        Console.WriteLine("di.mouse.fHasHorizontalWheel = " + di.mouse.fHasHorizontalWheel);
        break;
    default:
        break;
} 
```

# mysql - 更改 MySQL 中的变量

> ID：12260386
> 
> 赞同：0
> 
> 时间：2012-09-04T09:21:52.527
> 
> 标签：mysql, character-encoding

在 MySQL 中，如何更改 character_set_client 等变量？

```
mysql> 显示像 'character_set%' 这样的变量；
-------------------------+--------
character_set_client | 拉丁语1

```

获得

```
character_set_client | utf8

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:33:54.940

启动 MySQL 客户端时，您必须指定`--default-character-set=charset_name`

从[手册](http://www.manpagez.com/man/1/mysql/)：

```
 Use charset_name as the default character set for the client and
       connection.

       A common issue that can occur when the operating system uses utf8
       or another multi-byte character set is that output from the mysql
       client is formatted incorrectly, due to the fact that the MySQL
       client uses the latin1 character set by default. You can usually
       fix such issues by using this option to force the client to use the
       system character set instead. 
```

例如：

```
$>mysql -uUser -pPassword --default-character-set=utf8 
```

有关如何通过连接字符串设置它的示例，请参见[此处](http://www.connectionstrings.com/mysql)。

# c# - 如何保持 sharepoint:popoutmenu 打开

> ID：12260388
> 
> 赞同：0
> 
> 时间：2012-09-04T09:21:58.377
> 
> 标签：c#, sharepoint, sharepoint-2010, controls, popupmenu

我正在 SharePoint 弹出菜单中实施清单。我想让用户在 中选择多个选项`checkboxlist`，因此我希望清单在用户选择选项时保持打开状态，并在他单击特定按钮时关闭。

我尝试过使用`StayOpen`属性，但它不起作用。

下面是我的 popoutmenu 控件的部分 UI 代码：

```
<Sharepoint:PopoutMenu runat="server" ID="CustomiseTabs" isCheckable="true" 
    StayOpen="true" AnchorCss="commentsAnchor" Visible="false" 
    IconUrl="~/_layouts/1033/IMAGES/CSI/Drop-down.png" >
  <asp:UpdatePanel  ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
      <div align="left" >
        <asp:CheckBoxList  ID="cbHideTabs" runat="server"  isCheckable="true">
        </asp:CheckBoxList>
      </div> 
```

我找不到任何使菜单保持打开状态的事件、属性或属性。

任何指针都会有所帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:45:55.653

我找不到解决popoutmenu的方法，所以我使用了Ajax Control toolkits popupextender，它按照我想要的方式工作

# actionscript-3 - AS3 用 A.swf 加载器加载 B.swf

> ID：12260389
> 
> 赞同：0
> 
> 时间：2012-09-04T09:22:02.767
> 
> 标签：actionscript-3

问题是，B.swf 是主要应用程序，因为它很大，我使用单独的 A.swf 来加载 B.swf，然后只是添加到舞台。但是在那种情况下，B.swf 不能正常工作（有些工作，但有些功能不起作用），在这种情况下，主要阶段是什么。当我直接加载 B.swf 时，它工作得很好，所以有什么想法如何用 A.swf 加载 B.swf，而不是“更改”主时间线/阶段以指向 B.swf，以便 B 可以发挥全部功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:31:24.987

您是否尝试将 B.swf 加载到 currentDomain 中，如下所示：

```
var context:LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain);
yourLoader.load(new URLRequest("B.swf"), context); 
```

当然记得添加所有事件:) 比如完整和 ioerror，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:32:05.303

我不知道这是否对您有帮助，但它是我使用 FlashDevelop 的预加载器完成的实时更新系统：

```
public function Preloader() 
{
        var mLoader:Loader = new Loader();  
        var mRequest:URLRequest = new URLRequest("ABSOLUTE URL");
        mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
        mLoader.load(mRequest);

        function onCompleteHandler(loadEvent:Event):void 
        {
            addChild(loadEvent.currentTarget.content);
        }

        if (stage) {
            stage.scaleMode = StageScaleMode.NO_SCALE;
        }

        addEventListener(Event.ENTER_FRAME, checkFrame);
        loaderInfo.addEventListener(ProgressEvent.PROGRESS, progress);
        loaderInfo.addEventListener(IOErrorEvent.IO_ERROR, ioError);

        // TODO show loader
} 
```

# objective-c - NSCoder 编码一个 NSDIctionary

> ID：12260392
> 
> 赞同：0
> 
> 时间：2012-09-04T09:22:13.303
> 
> 标签：objective-c, serialization

这个问题似乎是一个副本，但事实并非如此。我的 Contact 类确认 NSCoding 协议，实现方法：

```
#pragma mark Encoding/Decoding
-(void)encodeWithCoder:(NSCoder *)aCoder
{
    NSLog(@"Encoding");
    [aCoder encodeObject:self.firstName forKey:@"firstName"];
    NSLog(@"First name encoded");
    [aCoder encodeObject:self.lastName forKey:@"lastName"];
    NSLog(@"Last name encoded");
    [aCoder encodeInt:self.age forKey:@"age"];
    NSLog(@"Age encoded");

    [aCoder encodeObject:self.phoneNumbers forKey:@"phoneNumbers"];

    NSLog(@"Encoding finished");

}

- (id) initWithCoder: (NSCoder *)coder
{
    if (self = [super init])
    {
        [self setFirstName:[coder decodeObjectForKey:@"firstName"]];
        [self setLastName:[coder decodeObjectForKey:@"lastName"]];
        [self setPhoneNumbers:[coder decodeObjectForKey:@"phoneNumbers"]];
        [self setAge:[coder decodeIntForKey:@"age"]];
    }
    return self;
} 
```

PhoneNumbers 是一个字典，当编码达到对其进行编码时，应用程序崩溃。这就是我序列化联系人数组的方式：

```
#pragma mark Import/Export

//Export Contacts to file
-(void)exportContactsToFile
{
    BOOL done=[NSKeyedArchiver archiveRootObject:self.contacts toFile:[PathUtility getFilePath:@"phonebook"]];

}

//Import Contacts from file

-(void)importContactsFromFile
{
    self.contacts = [NSKeyedUnarchiver unarchiveObjectWithFile:[PathUtility getFilePath:@"phonebook"]];

} 
```

我应该如何将 NSDictionary 序列化为属性？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:35:05.047

NSPropertyListSerialization 类提供了将属性列表对象与 XML 或优化的二进制格式相互转换的序列化方法。NSPropertyListSerialization 类对象提供了序列化过程的接口；您不创建 NSPropertyListSerialization 的实例。

```
NSDictionary *propertyList= @{ @"FirstNameKey" : @"Edmund",
                           @"LastNameKey" : @"Blackadder" };
NSString *errorStr;
NSData *dataRep = [NSPropertyListSerialization dataFromPropertyList:propertyList
            format:NSPropertyListXMLFormat_v1_0
            errorDescription:&errorStr];
if (!dataRep) {
// Handle error
} 
```

# java - 将 Array 更改为 Arraylist，以便我可以操作 Array

> ID：12260393
> 
> 赞同：3
> 
> 时间：2012-09-04T09:22:12.673
> 
> 标签：java, android

这里有一些问题，希望你能帮助我。

让我先澄清一下情况：

我有一个静态整数数组，其中内部是 R.drawable.images。代码如下

```
private   Integer[] imageIDs = {
            //R.drawable.medal_my_first_perxtamp,
            R.drawable.medal..._gray,
            R.drawable.medal_y...te_me_gray,
            R.drawable.medal_t...ring_gray,
            R.drawable.medal_gi...ray,
            R.drawable.medal_a..._gray,
            R.drawable.medal_se..gray,
            R.drawable.medal_p...._gray,
            R.drawable.medal_m..._gray,
            R.drawable.medal_lo.._gray,
            R.drawable.m..._gray,
            R.drawable.med..,
            R.drawable.med..on_gray
          }; 
```

现在我要做的是根据条件更改 imageIDs 的值，所以现在我在 getview 上添加了这段代码

```
 sqlAdapter = new SQLiteAdapter(mContext);
        sqlAdapter.openToRead();
        List<Integer> imageIDList = Arrays.asList(imageIDs);
        String query2="Select achievementID  from achievementdata_tb where memberID = 101";
        Cursor cursor2 =sqlAdapter.read(query2);
        if (cursor2 != null && cursor2.moveToFirst()) {
            while(cursor2.moveToNext()){

                val =cursor2.getString(0);
                int val2 = Integer.parseInt(val);
                String returnDrawable = getDrawables(val);
                int intReturnDrawable = Integer.parseInt(returnDrawable);
                imageIDList.set(val2, intReturnDrawable);
            }
        } 
```

请注意，我从数据库（成就 ID）中获取值，值为 (6,2,3)

所以我所做的是一个一个地获取光标的项目并在公共 void **getDrawables**上检查它包括

```
 public String getDrawables(String str){
        if (str.equals("3")){
            str= "R.drawable.med...g";
        }
        else if (str.equals("2")){
            str= "R.drawable.med..._me";
        }
        else if (str.equals("6")){
            str= "R.drawable.me...._up";
        }
        return str; 
    } 
```

看到我想将数组 imageIDs（这是一个可绘制的）的值更改为另一个可绘制的图像。

我没有任何错误，所以我使用调试器并发现我在这部分遇到错误**int intReturnDrawable = Integer.parseInt(returnDrawable);**

我是安卓新手，但我知道一些基本功能。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:26:22.927

`"R.drawable.med...g"`不是一个`int`。你无法解析它。你只能解析像`"0"`, `"-3"`...

in `getDrawables`，返回一个`int`, like `R.drawable.med...g`（不带引号）并按原样使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:25:18.997

语句会抛出错误

```
int intReturnDrawable = Integer.parseInt(returnDrawable); 
```

when`returnDrawable`是一个不能被解析成整数的字符串；这是你的情况。

因为当您调用`getDrawables()`它时，它返回`"R.drawable.med..._me"`的不是整数。

您可以修改`getDrawables`如下：

```
public Integer getDrawables(String str){
    if (str.equals("3")){
        return R.drawable.med...g;            
    }
    else if (str.equals("2")){
        return R.drawable.med..._me;
    }
    else if (str.equals("6")){
        return R.drawable.me...._up;
    }
    return 0; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:25:24.287

你不能因为，**返回**`getDrawable()`类型是**String**。并且 String 之类的`"R.drawable.med...g"`无法解析为`Integer`.

所以改变`getDrawable()`返回正确`int`值的实现..

而是做类似的事情，

```
public int getDrawables(String str){
        int value = 0;
        if (str.equals("3")){
            value = R.drawable.med...g;
        }
        else if (str.equals("2")){
            value = R.drawable.med..._me;
        }
        else if (str.equals("6")){
           value = R.drawable.me...._up;
        }
        return value; 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T09:25:43.770

R.id.drawable1 是一个整数，“R.id.drawable1”是一个不能解析为整数的字符串。为什么你从整数中获取字符串，而不是从字符串中获取整数，而不是你可以直接从方法 getDrawable(); 中获取整数；

```
 public String getDrawables(String str){
        int result;
        if (str.equals("3")){
            result= R.drawable.med...g;
        }
        else if (str.equals("2")){
            result= R.drawable.med..._me;
        }
        else if (str.equals("6")){
            result= R.drawable.me...._up;
        }
        return result; 
    } 
```

并将此图像的访问更改为以下内容：

```
sqlAdapter = new SQLiteAdapter(mContext);
        sqlAdapter.openToRead();
        List<Integer> imageIDList = Arrays.asList(imageIDs);
        String query2="Select achievementID  from achievementdata_tb where memberID = 101";
        Cursor cursor2 =sqlAdapter.read(query2);
        if (cursor2 != null && cursor2.moveToFirst()) {
            while(cursor2.moveToNext()){

                val =cursor2.getString(0);
                int val2 = Integer.parseInt(val);
                int intReturnDrawable = getDrawables(val);
                imageIDList.set(val2, intReturnDrawable);
            }
        } 
```

# android - 手机重启后处理 Widget onEnabled

> ID：12260402
> 
> 赞同：1
> 
> 时间：2012-09-04T09:22:33.900
> 
> 标签：android, widget, reboot

大家好，我正在创建一个具有小部件的应用程序，该应用程序和小部件运行良好，但是如果我重新启动手机，应用程序将崩溃我认为这是因为我的小部件使用了主要活动中的某些功能

我已经阅读了有关小部件在重新启动后调用 onEnabled 的信息，所以我试图在重新启动后创建一个临时视图这是我的 onEnabled 代码

```
@Override
    public void onEnabled(Context context) {

    Log.i("INDEX", "WIDGET Enabled");

    AppWidgetManager mgr = AppWidgetManager.getInstance(context); 

    // Get the layout for the App Widget 
    RemoteViews views = new RemoteViews(context.getPackageName(),R.layout.widget_restart); 

    ComponentName comp = new ComponentName(context.getPackageName(),Widget.class.getName()); 

  mgr.updateAppWidget(comp, views); 
    } 
```

我可以使用 logcat 来跟踪错误吗？因为即使我在上面的代码中添加了日志，logcat 也不显示任何日志

谁能解释一下重启后小部件是如何工作的？还是给我另一种选择？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:17:41.083

好的，我找到了解决方案这是因为我使用了 onReceive() 函数，如果我删除/评论 onReceive 函数，onEnable 和 onUpdate 将完美运行，谢谢

# php - xcache - 致命错误：调用未定义的函数 xcache_isset()？

> ID：12260405
> 
> 赞同：0
> 
> 时间：2012-09-04T09:22:39.233
> 
> 标签：php, function, undefined, xcache

我已经成功安装了 xcache。并在 php.ini 中添加 xcache 配置。并重新启动 apache 服务器。

我的系统是 mac os x 10.7.3。

php -v（或显示 phpinfo）：

```
PHP 5.3.8 with Suhosin-Patch (cli) (built: Nov 15 2011 15:33:15) 
Copyright (c) 1997-2011 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
    with Zend Debugger v5.2, Copyright (c) 1999-2009, by Zend Technologies
    with XCache v2.0.0, Copyright (c) 2005-2012, by mOo 
```

xcache 配置：

```
[xcache-common]
zend_extension = "/usr/lib/php/extensions/no-debug-non-zts-20090626/xcache.so"

[xcache.admin]
xcache.admin.auth = On
xcache.admin.user = "mOo"
; xcache.admin.pass = md5($your_password)
xcache.admin.pass = ""

[xcache]
xcache.shm_scheme =        "mmap"
xcache.size  =               60M
xcache.count =                 1
xcache.slots =                8K
xcache.ttl   =                 0
xcache.gc_interval =           0
xcache.var_size  =            4M
xcache.var_count =             1
xcache.var_slots =            8K
xcache.var_ttl   =             0
xcache.var_maxttl   =          0
xcache.var_gc_interval =     300
xcache.readonly_protection = Off
xcache.mmap_path =    "/tmp/xcache"
xcache.coredump_directory =   ""
xcache.cacher =               On
xcache.stat   =               On
xcache.optimizer =           Off
xcache.test =                Off
xcache.experimental =        Off

[xcache.coverager]
xcache.coverager =          Off
xcache.coveragedump_directory = "" 
```

**一切看起来都不错。但是当我运行以下代码时，出现错误：致命错误：调用未定义的函数 xcache_isset()。**

PHP代码：

```
<?php
if(!xcache_isset("test")) {
    xcache_set("test", strftime('%Y-%m-%d %A %H:%M:%S', time()), 30);
}
echo xcache_get("test"); 
```

问题是由什么引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T03:56:36.883

你可以放一个 if(function_exists()..
你也可以在它前面放一个 @ 符号。

尝试删除该行代码并查看其他 xcache 函数是否可用。如果也没有，那么我会质疑扩展是否正确加载..如果它们工作正常，那么 xcache_isset 函数是什么时候引入的（xcache 版本），是否值得升级 xcache 版本？

# android - 使用远程服务通信时出现问题（在android框架级别使用IMediaPlaybackService）

> ID：12260408
> 
> 赞同：0
> 
> 时间：2012-09-04T09:22:49.550
> 
> 标签：android, ipc, aidl

我想在框架级别使用 MediaPlayback 服务（在音乐应用程序中实现），步骤是：

将这些代码添加到基于 /frameworks/base/core/java/com/android 的 java 文件中（也在同一目录中添加 IMediaPlaybackService.aidl）：

```
private IMediaPlaybackService mMediaPlaybackService = null;
private boolean isServiceConn = false;
private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        mMediaPlaybackService = IMediaPlaybackService.Stub.asInterface(service);
        isServiceConn = true;
    }

    public void onServiceDisconnected(ComponentName className) {
    }
};

public void funcXXX() {
    ...

    if(isServiceConn == false) {
        mContext.bindService(new intent("com.android.music.MediaPlaybackService"), mConnection, Context.BIND_AUTO_CREATE);
    }

    ...
}

public void onClick(View v) {
    try {
        mMediaPlaybackService.prev();// play previous track
    } catch(RemoteException ex) {
    } 
} 
```

服务绑定成功并且mMediaPlaybackService的值被更正了，但是当我点击一个按钮并执行语句“mMediaPlaybackService.prev()”时，程序会崩溃，logcat转储是：

```
E/AndroidRuntime(  259): java.lang.SecurityException: Binder invocation to an incorrect interface
E/AndroidRuntime(  259):    at android.os.Parcel.readException(Parcel.java:1327)
E/AndroidRuntime(  259):    at android.os.Parcel.readException(Parcel.java:1281)
E/AndroidRuntime(  259):    at com.android.internal.widget.IMediaPlaybackService$Stub$Proxy.prev(IMediaPlaybackService.java:457. 
```

请提出这里可能出现的问题，我们将不胜感激任何帮助。如果您简要说明如何使用 bindService 或 IPC，也会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T03:23:00.653

我自己解决了这个问题。关键是复制aidl到正确的地方。我想在包com.android.internal.widget(frameworks/base/core/java/com/android/internal/widget)上添加客户端代码，而aidl的包是com.android.music，所以我们需要复制IMediaPlaybackService。辅助到frameworks/base/core/java/com/android/music/IMediaPlaybackService.aidl（确保它会生成相同的java文件），然后在frameworks/base/Android.mk中添加辅助路径到LOCAL_SRC_FILE（确保这个文件将被编译）。

# validation - JSF 2 单击时禁用命令按钮但如果验证失败则重新启用？

> ID：12260411
> 
> 赞同：3
> 
> 时间：2012-09-04T09:22:56.407
> 
> 标签：validation, jsf-2, form-submit

单击命令按钮时禁用命令按钮很容易。但是说表单验证失败（使用 ajax 和不使用）。如果验证无法让用户修复错误并重试，我该如何重新启用命令按钮？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T18:05:38.643

我将@Daniel 的答案扩展到使用 P:commandButton 对我有用的答案

```
onclick="this.disabled=true"
oncomplete="this.disabled=
                #{!facesContext.validationFailed}"
                update="@this" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T09:45:27.980

像这样的东西？

```
<h:commandButton disabled="#{myBean.someCondition and not facesContext.validationFailed}"/> 
```

# xlrd - 如何使用python从excel中获取特定单元格的命名范围

> ID：12260417
> 
> 赞同：0
> 
> 时间：2012-09-04T09:23:20.823
> 
> 标签：xlrd, named-ranges

我需要为特定单元格输入“命名范围”值。

我在excel中为（A4，B4）单元格输入了“命名范围”值，要读取单元格值，我们使用 sh.cell(row,col) 但如何获取该单元格的名称范围值。

我不知道该怎么做...

帮帮我..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:56:48.447

不幸的是，我没有足够的代表发表评论，所以我会尽我所能从你的问题中理解。

所以如果我做对了，你在工作表上有一个命名范围，其中范围的名称，由 sh.Range("A4:B4") 引用，是'name_a_range'（我包括下划线，因为你不能有名称中的空格）。

您可以从 Sheets.Cells(row, col).Value 获取值，但您希望通过命名范围来执行此操作。

好的，要做到这一点：

```
 Dim valA as Variant, valB as Variant
    Dim valArray() as Variant
    '' To get the value in Cell "A4"
    valA = sh.Range("name_a_range").Cells(1,1).Value

    '' To get the value in Cell "B4"
    valB = sh.Range("name_a_range").Cells(1,2).Value

    '' Or if you have a Variant() array already Dim'ed (like above)
    valArray = sh.Range("name_a_range").Value 
```

Worksheet 的 Range 对象可以采用：

```
 '' Expression for a range: "A4" to "B4" , using Cells
    sh.Range(sh.Cells(4,1),  sh.Cells(4,2)) 

    '' Expression for a range: "A4" to "B4" , using xlA1 format
    ''  *Which is the most familiar
    sh.Range("A4:B4")

    '' Expression for a range: "A4" to "B4" , using name
    sh.Range("PreviouslyNamedRange") 
```

对于任何范围，您都可以将其视为它自己的数组（从位置 1 开始）。如果范围的大小（维度）未知，您可以使用内置的 Range 函数：

```
 sh.Range("name_a_range").Rows.Count '' returns 1
    sh.Range("name_a_range").Column.Count '' returns 2 
```

至于标题中的 Python 方面，您将使用相同的语法：

虽然，我不使用 xlrd，而是使用 win32com.client 通过 python 驱动 Excel

```
 from win32com.client import Dispatch
    app_xl = Dispatch("Excel.Application")
    wb = app_xl.Workbooks.Open("Path\\To\\Your\\Workbook.xlsx")
    range = wb.Sheets(1).Range("name_a_range").Value 
```

例如，我在我的一张表格上运行了这个：

```
 >>> from win32com.client import Dispatch
    >>> app_xl = Dispatch("Excel.Application")
    >>> wb = app_xl.Workbooks.Open("C:\***\***\excel_vba_tests\getinfo.xlsx")
    >>> rangeValues = wb.Sheets("Summary").Range("avgVolume").Value
    >>> rangeValues
    ((u'Avg/Wk',), (Decimal('791517.25'),), (Decimal('796369'),), (Decimal('769922.8846'),), (Decimal('743311.549'),)) 
```

在这里，我打开了我的工作簿“getinfo.xlsx”，并从名为“Summary”的工作表中获取了命名范围“avgVolume”中的所有值

这有帮助/您正在寻找什么？因为我不太确定你的问题到底是什么，所以我想我会尽可能多地得分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-30T05:45:36.040

```
from xlsxwriter.utility import xl_rowcol_to_cell

cell = xl_rowcol_to_cell(1, 2)  # C2

print(cell) 
```

# java - 下载远程文件的统计信息

> ID：12260426
> 
> 赞同：1
> 
> 时间：2012-09-04T09:23:56.767
> 
> 标签：java, javascript, eclipse

我现在正在努力解决的问题如下。我在远程服务器上有一个 zip 存档。我开发的 eclipse 插件使用这个论坛的建议下载了这个存档：

```
//Connect readable channel to the URL
ReadableByteChannel rbc = Channels.newChannel(libraryUrl.openStream());
//Create local file
FileOutputStream fos = new FileOutputStream(libraryZipPath);
//Download the remote archive to the local file
fos.getChannel().transferFrom(rbc, 0, libraryUrl.openConnection().getContentLength()); 
//Close channel
fos.close(); 
```

我在服务器上有一个 html 文件，用于计算网页的访问统计信息。计数的javascript如下：

```
var data = '&r=' + escape(document.referrer) + '&n=' + escape(navigator.userAgent)
+ '&p=' + escape(navigator.userAgent) + '&g=' + escape(document.location.href);
if (navigator.userAgent.substring(0,1)>'3')
data = data + '&sd=' + screen.colorDepth + '&sw=' + escape(screen.width+'x'+screen.height);

document.write('<a href="http://www.1freecounter.com/stats.php?i=89959" target=\"_blank\">');
document.write('<img alt="Free Counter" border=0 hspace=0 '+'vspace=0 src="http://www.1freecounter.com/counter.php?i=89959' + data + '">');
document.write('</a>'); 
```

问题是：是否有可能使用这个 javascript 或 html 文件来计算存档文件的下载统计信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:43:49.817

您正在使用作为图形嵌入您网站的第三方网络计数器。当用户浏览器加载此图形时，第三方服务器会注意到访问并增加计数器。

这不适用于二进制下载，因为下载二进制文件时，不会请求 webcounter 图形。

您可以尝试让您的 Java 程序在下载二进制文件时也下载计数器图形。确保将 zip 存档的 URL 作为 Referrer HTTP 标头传递给图像下载，以便服务器上的脚本将其计为对它的访问。您必须使用 URLConnection 类来设置自定义 HTTP 标头，例如 Referrer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T16:23:51.403

谢谢你的回复，菲利普！

我已经想出了如何让它以一种非常简单的方式工作。让我们考虑上面示例中的计数器（“http://www.1freecounter.com/stats.php?i=89959”）。该地址的计数器总共需要 6 个参数：

r - 文档引用者，

n 和 p 是用户代理，由浏览器名称、操作系统名称、操作系统版本、浏览器版本等组成，

g是位置，

sd 和 sw 是颜色深度和屏幕大小（对于二进制文件，我们可以跳过这两个）。

然后，我们为计数请求形成一个字符串。例如，

```
String cntURL = "http://www.1freecounter.com/counter.php?i=89959&r="+
URLEncoder.encode("some string for a referrer","UTF-8") + "&n="+
URLEncoder.encode("browser name (OS name OS version) browser version", "UTF-8")+"&p="+
URLEncoder.encode("the same as above", "UTF-8")+"&g=<location string>"; 
```

请注意，参数被编码为 utf-8 字符集。否则，计数器将无法正确计数访问。

然后，简单地使用 URL 类，我们创建一个 URL 对象并打开一个 steam：

```
URL statsUrl = new URL(cntURL);
statsUrl.openStream(); 
```

这就对了！无需研究 http 标头中的参数。这只是形成一个适当的字符串来打开连接的问题。

我编写了一个简单的方法来检索请求所需的所有信息，并在我从服务器下载文件的方法中插入了对它的调用。

# php - 我们如何使用 php 将 .htaccess 用于 Windows 服务器？

> ID：12260429
> 
> 赞同：0
> 
> 时间：2012-09-04T09:24:03.523
> 
> 标签：php, windows, .htaccess

我想为 URL 重写实现 .htaccess。我正在使用 Windows 服务器。

我知道有两种解决方案：

1.  使用网络配置

2.  使用 Helicon

我不知道如何在 webconfig 文件中编写 .htaccess 代码，我不想使用 Helicon，因为这是付费的。

我想在 webconfig 文件中实现的代码是：

```
 AddType application/x-httpd-php .html
    RewriteEngine on

    <IfModule mod_rewrite.c>

    RewriteCond %{Request_Filename} !-d
    RewriteCond %{Request_Filenam}e !-f

    RewriteRule ^privacy  privacy.html [NC]
    RewriteRule ^dating-articles dating-articles.html [NC]
    RewriteRule ^articles/([0-9A-Za-z_\-~',]+)    article_detail.html?article_link=$1 [NC]
    RewriteRule ^([a-zA-Z0-9_-]+)$ page.php?page_slug=$1  [NC]

    </IfModule> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-29T03:41:35.093

Windows 2012 和 2008 都有 url 重写。只需在信息管理器和中心平面中打开您的网站，点击 url rewrite 即可打开它。只需在入站窗口中添加它。

```
RewriteCond %{Request_Filename} !-d
RewriteCond %{Request_Filenam}e !-f
RewriteRule ^privacy  privacy.html [NC]
RewriteRule ^dating-articles dating-articles.html [NC]
RewriteRule ^articles/([0-9A-Za-z_\-~',]+)    article_detail.html?     article_link=$1 [NC]
RewriteRule ^([a-zA-Z0-9_-]+)$ page.php?page_slug=$1  [NC] 
```

# xml - 独立值不会出现在 moxy 生成的 xml 中 - jaxb

> ID：12260436
> 
> 赞同：2
> 
> 时间：2012-09-04T09:24:50.497
> 
> 标签：xml, jaxb, eclipselink, moxy

我有一个使用 jaxb 的 moxy 实现生成的 xml 文件。但是，独立值不会出现在 xml 文档中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:11:39.583

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

该`standalone`属性很少使用，仅当您使用 DTD 时才相关。由于 JAXB (JSR-222) 主要与 XML Schema 一起使用，因此它不适用。我们选择不在 JAXB (JSR-222) 的 MOXy 实现中输出该属性。

其他 XML 技术也选择不支持独立属性。例如，我不知道使用 StAX 解析器输出独立值的方法。

**了解更多信息**

*   [http://www.xmlplease.com/xml/xmlquotations/standalone](http://www.xmlplease.com/xml/xmlquotations/standalone)

# iphone - 解析xml并将每个元素存储在iphone的数组中

> ID：12260438
> 
> 赞同：0
> 
> 时间：2012-09-04T09:24:56.517
> 
> 标签：iphone, xml, arrays

我想将每个元素存储在数组中。喜欢这个链接

在此链接中有多个标签，例如 Slider、Latest Headlines、Slider1 等

有滑块和最新的标题，所以在这个相同的键缩略图和 contentId 中我想存储在单独的数组中。

任何人都让我知道如何解析它

[http://bizfy.com/demo/biscoot/response1.php](http://bizfy.com/demo/biscoot/response1.php)

```
 <contentResponse>
  <slider>
   <item>
   <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
   <contentId>img001</contentId>
 </item>
<item>
<thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
<contentId>img002</contentId>
 </item>
 <item>
 <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
     <contentId>img003</contentId>
    </item>
   <item>
    <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
       <contentId>img004</contentId>
       </item>
       <item>
   <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
     <contentId>img005</contentId>
       </item>
        </slider>
       <latestHeadlines>
        <item>
       <thumbNail>http://www.bizfy.com/demo/biscoot/a2.png</thumbNail>
       <heading>SRKs Kashmir NOstalgia</heading>
          <shortDescription>
      Being in Kashmir has made Shah Rukh Khan nostalgic as the superstar's father always              wanted him to visit the valley. "My father's one unfulfilled wish was to bring me to Kashmir          because his mom was from here.
          </shortDescription>
          <views>369</views>
           <rating>3</rating>
          <contentId>news001</contentId>
              </item>
              <item>
             <thumbNail>http://www.bizfy.com/demo/biscoot/a2.png</thumbNail>
           <heading>SRKs Kashmir NOstalgia</heading>
             <shortDescription>
               Being in Kashmir has made Shah Rukh Khan nostalgic as the superstar's      father always wanted him to visit the valley. "My father's one unfulfilled wish was to bring me to Kashmir because his mom was from here.
             </shortDescription>
              <views>369</views>
                 <rating>3</rating>
              <contentId>news001</contentId>
            </item>
              <item>
           <thumbNail>http://www.bizfy.com/demo/biscoot/a2.png</thumbNail>
            <heading>SRKs Kashmir NOstalgia</heading>
          <shortDescription>
                 Being in Kashmir has made Shah Rukh Khan nostalgic as the superstar's father always wanted him to visit the valley. "My father's one unfulfilled wish was to bring me to Kashmir because his mom was from here.
           </shortDescription>
               <views>369</views>
               <rating>3</rating>
               <contentId>news001</contentId>
                     </item>
                </latestHeadlines>
               </contentResponse> 
```

我想解析这种类型的xml。

请给我建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:29:38.507

//使用 NSXMLParser

```
 NSXMLParser *parser = [[NSXMLParser alloc]initWithContentsOfURL:[NSURL URLWithString:@"YOUR_URL"]];
  [parser setDelegate:self];
  [parser parse]; 
```

// 下面是将为您获取数据的委托

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

  // This delegate is called whenever parser hits the open tag in the xml here i am checking that if current tag is what we are looking for or not if yes then set a bool to gets it value in next delegate
  if([elementName isEqualToString:@"slider"]){
       getslider = YES; // getslider is a bool which is NO initialy
   }

  if([elementName isEqualToString:@"latestHeadline"]){
       getlatest = YES; // getlatest is a bool which is NO initialy
   }

}

  -(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

      //This delegate gives the data for the tag encountered.
        if(getslider)
      {
        [sliderArray addObject:string];//sliderArray a mutablearray which will contains the value of every single tag nested inside slider tag
      }

        if(getlatest)
      {
        [latestArray addObject:string]; //same here this will have every thing inside latestHeadline tag.
      }

 }

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

    // This delegate is called whenever parser hit the end tag.

    if([elementName isEqualToString:@"slider"]){
       getslider = NO;// we encountered the slider end tag.
   }

    if([elementName isEqualToString:@"latestHeadlines"]){
       getlatest = NO; // we encountered the latestHeadlines end tag.
   }

} 
```

这将为您提供一个字典，其中 contentid 作为键，缩略图作为值。希望这会给您一个公平的想法，从 xml 中获取您想要的任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:30:01.503

使用 TBXML 解析 XML 内容..
[http://tbxml.co.uk/](http://tbxml.co.uk/)

或查看本教程[教程以获取 NSXML](http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/)

# java - 什么是 Java GUI

> ID：12260451
> 
> 赞同：2
> 
> 时间：2012-09-04T09:25:54.107
> 
> 标签：java, wpf, swing, user-interface

我离Java技术太远了。

*   只是为了好奇，让我们用 Java 开发桌面应用程序（如 Windows 窗体）的技术/API/类的名称是什么？
*   我听说过一个名为 Swing 的工具包。那是官方的 GUI 工具包吗？还有 Swing 的替代品吗？
*   Java中是否有与C#的WPF对应的技术？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T09:31:04.533

`Java Swing`是 Java 最常用的 GUI 工具包。有替代品（JavaFX、AWT、SWT），但如果您开始使用 Java 开发桌面应用程序，Swing 是一个很好的起点。我唯一会考虑的是寻找替代的 LayoutManagers，比如 MigLayout。但是您可以轻松地从标准的开始。从 Java Swing 和各种 LayoutManagers 开始，有一个很棒的[可视化指南。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T09:31:08.403

有 AWT、Swing、SWT、JavaFX、Android GUI。

最常见的是 Swing，虽然它不是最漂亮的，但除非您有特定要求，否则我会从它开始。

Java FX 2.x 演示[http://www.oracle.com/technetwork/java/javafx/samples/index.html](http://www.oracle.com/technetwork/java/javafx/samples/index.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T09:31:40.517

是的，Swing 是 Java 运行时环境的官方 GUI 工具包。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-04T09:32:07.797

在 Java 中，您可以使用许多不同的 GUI 技术。

Swing 是您可以使用的技术之一。它是轻量级的，是 Java 的官方工具包。此外，您可以查看 SWT、AWT 或 JMonkey 的 3D 内容。

与 WPF 类似是什么意思？MVVM 模式？

与 Silverlight 类似但更好的是 GWT Toolkit。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-04T09:36:16.170

Java 具有以下用于 GUI 开发的选项：

```
(1) AWT
This is the old GUI development library

(2) Swing
This is the new GUI development library

(3) JavaFX
This is the latest GUI technology of Java,
it comes with FXML for fast UI development. 
```

FXML 与 .NET 的 XAML 不兼容，但可以认为是等效的。

# php - 配置用于上传文件的php ini文件

> ID：12260453
> 
> 赞同：3
> 
> 时间：2012-09-04T09:25:57.237
> 
> 标签：php, file-upload, php-ini

我有一个上传文件的页面，在`.htaccess`文件中我有这个：

```
php_value upload_max_filesize 40M
php_value post_max_size 40M 
```

我有一个大小为 1.6 MB 的 img。当我尝试上传此图像时，我收到以下错误。

> 致命错误：允许的内存大小为 54525952 字节用尽（试图分配 3600 字节）在....

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:36:14.910

如果您无法访问服务器上的**php.ini**`.htaccess` ，请在您的文件中写入以下内容

```
php_value upload_max_filesize 10M
php_value post_max_size 20M
php_value memory_limit 32M 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T09:51:45.347

```
You need to set following values to increase file upload size

    file_uploadsile_uploads
    upload_max_filesize
    max_input_time
    memory_limit
    max_execution_time
    post_max_size

Cheers 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:37:11.993

据我所知，您可能正在耗尽 PHP 的 memory_limit，也就是说，PHP 正在尝试分配比 memory_limit 参数值更大的内存量。

也许您正在即时解压缩图像或复制一些需要分配太多内存的数据，请尝试增加该限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T09:36:37.763

您的 PHP 配置中有 memory_limit；54525952 字节，即 52MB。

您应该在 php.ini 或 .htaccess 中配置 memory_limit 或修复内存泄漏。

# javascript - 如何自动按顺序打开页面列表？

> ID：12260455
> 
> 赞同：2
> 
> 时间：2012-09-04T09:26:00.277
> 
> 标签：javascript, web, greasemonkey, sequential

我希望使用 Greasemonkey 按顺序加载网页列表。

```
var list = array ('http://www.google.com', 'site2', 'site3', 'site4');
window.location.href = list[0]; 
```

该脚本应按如下方式工作：打开站点 1，等待 5 秒，打开站点 2，等待 5 秒，等等。

我不知道如何使脚本按顺序打开站点，也许将实际 URL 与列表进行比较，然后继续下一个（？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:09:54.277

[对于 Chrome](https://stackoverflow.com/a/11365844/331508)，这种方法也适用于 Greasemonkey。

像这样将您的站点放在一个数组中，但您还必须设置您的[`@include`、`@exclude`和`@match`指令](http://wiki.greasespot.net/Metadata_Block#.40exclude)以在适当的站点上触发。

把它们放在一起，这是一个**完整的脚本**：

```
// ==UserScript==
// @name        Multipage, MultiSite slideshow of sorts
// @include     http://google.com/*
// @include     http://site2/*
// @include     http://site3/*
// @include     http://site4/*
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a major design
    change introduced in GM 1.0.
    It restores the sandbox.
*/

var urlsToLoad  = [
    'http://google.com/'
    , 'http://site2/somepage/'
    , 'http://site3/somepage/'
    , 'http://site4/somepage/'
];

/*--- Since many of these sites load large pictures, Chrome's and 
    Firefox's injection may fire a good deal before the image(s) 
    finish loading.
    So, insure script fires after load:
*/
window.addEventListener ("load", FireTimer, false);
if (document.readyState == "complete") {
    FireTimer ();
}
//--- Catch new pages loaded by WELL BEHAVED ajax.
window.addEventListener ("hashchange", FireTimer,  false);

function FireTimer () {
    setTimeout (GotoNextURL, 5000); // 5000 == 5 seconds
}

function GotoNextURL () {
    var numUrls     = urlsToLoad.length;
    var urlIdx      = urlsToLoad.indexOf (location.href);
    urlIdx++;
    if (urlIdx >= numUrls)
        urlIdx = 0;

    location.href   = urlsToLoad[urlIdx];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:44:03.187

Two ways I can think of for doing this are:

Using [`gm_getvalue`](http://greasemonkey.win-start.de/advanced/gm_getvalue.html), `gm_setvalue` to retrieve, store the index of current site in `list` to Greasemonkey's persistent memory.

Or, using something like:

```
setTimeout(function(){
    window.location.href = (list.length > list.indexOf(window.location.href)) ? list[list.indexOf(window.location.href)+1] : list[0];
},5000) 
```

# wordpress - 页脚的Wordpress问题

> ID：12260456
> 
> 赞同：-1
> 
> 时间：2012-09-04T09:26:00.950
> 
> 标签：wordpress, footer

我一直在尝试将我的简单 html/css 网站变成一个 wordpress 网站。我似乎没有人能够解决的大问题出现在我的页脚中。页脚几乎忽略了所有内容，只停留在网站顶部（就像它是我页眉的一部分）。我所有的文件都分成3个文件。header.php、footer.php 和 page.php（每个站点一个）。

标头！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml" <?php language_attributes(); ?>>

    <head profile="http://gmpg.org/xfn/11">

        <meta http-equiv="Content-Type" content="<?php bloginfo('html_type'); ?>; charset=<?php bloginfo('charset'); ?>" />

        <?php if (is_search()) { ?>
           <meta name="robots" content="noindex, nofollow" /> 
        <?php } ?>

        <title>
               <?php
                  if (function_exists('is_tag') && is_tag()) {
                     single_tag_title("Tag Archive for &quot;"); echo '&quot; - '; }
                  elseif (is_archive()) {
                     wp_title(''); echo ' Archive - '; }
                  elseif (is_search()) {
                     echo 'Search for &quot;'.wp_specialchars($s).'&quot; - '; }
                  elseif (!(is_404()) && (is_single()) || (is_page())) {
                     wp_title(''); echo ' - '; }
                  elseif (is_404()) {
                     echo 'Not Found - '; }
                  if (is_home()) {
                     bloginfo('name'); echo ' - '; bloginfo('description'); }
                  else {
                      bloginfo('name'); }
                  if ($paged>1) {
                     echo ' - page '. $paged; }
               ?>
        </title>

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

        <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" type="text/css" />

        <link rel="pingback" href="<?php bloginfo('pingback_url'); ?>" />

        <?php if ( is_singular() ) wp_enqueue_script( 'comment-reply' ); ?>

        <?php wp_head(); ?>

    </head>

    <body <?php body_class(); ?>>

                        <div id="Menu" ></div>
                                            <div id="Mainbody">
                                                    <div id="Portfolio"><a href="<?php echo get_option('home'); ?>"><?php bloginfo('name'); ?></a> </div>
                                                    <div id="Slogan"><a href="index.html"><?php bloginfo('description'); ?></a></div>
                                                                            <div id="nav-menu">
                                                                                        <?php $defaults = array(
        'theme_location'  => '',
        'menu'            => '', 
        'container'       => 'div', 
        'container_class' => 'menu-{menu slug}-container', 
        'container_id'    => '',
        'menu_class'      => 'menu', 
        'menu_id'         => '',
        'echo'            => true,
        'fallback_cb'     => 'wp_page_menu',
        'before'          => '',
        'after'           => '',
        'link_before'     => '',
        'link_after'      => '',
        'items_wrap'      => '<ul id="%1$s" class="%2$s">%3$s</ul>',
        'depth'           => 0,
        'walker'          => ''
        ); ?>

    <?php wp_nav_menu( $defaults ); ?>
                                                                                </div>
                                                   <div class="Box"> 
                                                            <div id="Mainindhold"> 
```

页！

```
 <?php get_header(); ?>

    <div id="Arbejde">  

                        <h2>Uddrag af mine webdesigns</h2>
                        <br />
                        <br />

                        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
                       <?php $key='link'; $custom = get_post_meta($post->ID, $key, true); ?>
                       <?php $key2='brugt'; $custom2 = get_post_meta($post->ID, $key2, true); ?>
                       <?php $key3='linkexternal'; $custom3 = get_post_meta($post->ID, $key3, true); ?>
                       <?php $billede = get_the_post_thumbnail($post->ID, 'full'); ?>

     <div class="Raekke">
        <div class="Arbejds_Billede">
                            <a href="<?php echo $custom; ?>"  rel="lightbox">
                            <?php print $billede; ?></a>
        </div>  
                        <div class="Arbejdsbeskrivelse">
                        <h3><?php the_title(); ?></h3>
                        <?php the_content(); ?>
                                    <div id="program">
                                    <img src="<?php echo $custom2; ?>" />
                                    </div>
                                        <div class="Knap"><a href="<?php echo $custom3; ?>"><p>Besøg siden</p></a>
                                        </div>
                                    </div>

     </div>
     <div class="clear"></div>
                <?php endwhile;
                else:
                ?>
                <?php _e('No posts were fond. Sorry!'); ?>
                <?php endif; ?>

    </div>

    <?php get_footer();?> 
```

页脚！

```
</div>
        </div>
        </div>

        <div id="footer">
                &copy;<?php echo date("Y"); echo " "; bloginfo('name'); ?> 4000 Roskilde
            </div>

           <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-31920214-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

    <?php wp_footer(); ?>
    </body>

    </html> 
```

为了能够看到问题，您可以进入 Tinajohnson.dk，当然也可以查看顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:46:24.043

这是一个 CSS 问题；将以下规则添加到您`#footer`的 CSS 中：

```
position: absolute;
bottom: 0;
width: 100%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:12:01.503

如果您希望始终坚持浏览器的底部。使用 Position Fixed 不是绝对 css 将用于您的 ID 页脚 Div

```
#footer { position:fixed; bottom:0; width:100%} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:36:05.543

您在页面中调用了页脚函数两次：首先是：

```
<?php get_footer();?> 
```

又在这里，

```
<div id="footer">
                &copy;<?php echo date("Y"); echo " "; bloginfo('name'); ?> 4000 Roskilde
            </div> 
```

摆脱第二块，它应该工作。

# android - 适用于 Android 和 iOS 应用程序的 WebSockets

> ID：12260460
> 
> 赞同：4
> 
> 时间：2012-09-04T09:26:16.687
> 
> 标签：android, ios, websocket

是否有一个项目为 Android 和 iOS 提供通过 WebSocket 进行通信的库？我知道 jWebSocket，但它几乎已经死了，并且没有为 iOS 提供库。我知道 Autobahn，但它也只支持 Android。我也知道 SocketRocket，但这仅适用于 iOS。有什么东西同时支持，或者有两种与 WebSocket 100% 兼容的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T10:22:15.507

iOS 使用 ObjectiveC 和 Android Java，因此不可能有一个库可以为这两个平台的本地语言构建相同的未修改用户源代码。您可以（原则上）使用 C。当然还有 JavaScript。

除了关于有线协议 AutobahnAndroid 和 SocketRocket 应该是绝对兼容的，因为它们都使用 AutobahnTestsuite 来测试协议的合规性。

以上是纯WebSocket。如果您想使用更高级别的功能，例如[WAMP](http://wamp.ws)提供的发布和订阅以及 RPC 消息传递模式等 Autobahn，我们计划在SocketRocket*之上*添加这些 .. 的 iOS 版本的 Autobahn 。无需在 iOS 上重新发明成熟、强大的 WebSocket 实现。

免责声明：我是 Autobahn/WAMP 的创建者。

# c# - 使用restsharp序列化对象并将其传递给WebApi而不是序列化列表

> ID：12260465
> 
> 赞同：12
> 
> 时间：2012-09-04T09:26:28.780
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, json.net, restsharp

我有一个看起来像的视图模型。

```
public class StoreItemViewModel
{
    public Guid ItemId { get; set; }
    public List<Guid> StoreIds { get; set; }
    [Required]
    public string Description { get; set; }
    //[Required]
    //[DataMember(IsRequired = true)]
    public int ItemTypeId { get; set; }

} 
```

我有一个小帮手正在使用 RestSharp。

```
public static IRestResponse Create<T>(object objectToUpdate, string apiEndPoint) where T : new()
    {
        var client = new RestClient(CreateBaseUrl(null))
        {
            Authenticator = new HttpBasicAuthenticator("user", "Password1")
        };

        var request = new RestRequest(apiEndPoint, Method.POST);
        //request.JsonSerializer = new JsonSerializer();
       // {RequestFormat = DataFormat.Json};
        request.AddObject(objectToUpdate);
       // clientJsonSerializer = new YourCustomSerializer();
        var response = client.Execute<T>(request);
        return response;
    } 
```

在我的 api 中调试控制器时

```
 [HttpPost]
    public HttpResponseMessage Create([FromBody]StoreItemViewModel myProduct)
    {
        //check fields are valid
     .........
     } 
```

除了公共 List StoreIds 之外，myProducts 产品都被填充，它总是返回一个带有空 Guid 的奖励。即使我添加了 2 个或更多 StoreId

我认为这是因为我在我的应用程序中使用我的 Create 助手做错了。

任何人都可以帮助解决这个问题，这会引起严重的头痛。

发送到 webapi 的原始数据看起来像

```
ItemId=f6dbd244-e840-47e1-9d09-53cc64cd87e6&ItemTypeId=6&Description=blabla&StoreIds=d0f36ef4-28be-4d16-a2e8-37030004174a&StoreIds=f6dbd244-e840-47e1-9d09-53cc64cd87e6&StoreId=d0f36ef4-28be-4d16-a2e8-37030004174a 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-02-20T16:08:14.833

RestSharp 现在有一种更简化的方式来使用 Json 序列化将对象添加到 RestRequest 主体：

```
public static IRestResponse Create<T>(object objectToUpdate, string apiEndPoint) where T : new()
{
    var client = new RestClient(CreateBaseUrl(null))
    {
        Authenticator = new HttpBasicAuthenticator("user", "Password1")
    };
    var request = new RestRequest(apiEndPoint, Method.POST);
    request.AddJsonBody(objectToUpdate); // HERE
    var response = client.Execute<T>(request);
    return response;
} 
```

这是在 RestSharp 105.0.1.0 中找到的

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-05T19:33:42.400

我设法让这个工作。我认为它不是正确的方法，但它有效。

```
 public static IRestResponse Create<T>(object objectToUpdate, string apiEndPoint) where T : new()
    {
        var client = new RestClient(CreateBaseUrl(null))
        {
            Authenticator = new HttpBasicAuthenticator("user", "Password1")
        };
        var json = JsonConvert.SerializeObject(objectToUpdate);
        var request = new RestRequest(apiEndPoint, Method.POST);
        request.AddParameter("text/json", json, ParameterType.RequestBody);
        var response = client.Execute<T>(request);
        return response;
    } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-08-11T20:03:38.960

我在同样的问题上苦苦挣扎，并提出了一个可行的解决方案。

1.  请务必将请求格式设置为 JSON：

    request.RequestFormat = DataFormat.Json;

2.  使用 AddBody，而不是 AddObject：

    request.AddBody(zNewSessionUsage);

所以你的代码会是这样的：

```
public static IRestResponse Create<T>(object objectToUpdate, string apiEndPoint) where T : new()
{
    var client = new RestClient(CreateBaseUrl(null))
    {
        Authenticator = new HttpBasicAuthenticator("user", "Password1")
    };

    var request = new RestRequest(apiEndPoint, Method.POST);
    request.RequestFormat = DataFormat.Json;
    request.AddBody(objectToUpdate);
    var response = client.Execute<T>(request);
    return response;
} 
```

# jsf-2 - 为什么JSF tomahawk dataTable 不显示？

> ID：12260470
> 
> 赞同：1
> 
> 时间：2012-09-04T09:26:52.437
> 
> 标签：jsf-2, facelets, tomahawk

我正在尝试使用 JSF tomahawk 创建世界上最简单的数据表，如下所示：

```
<html 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:t="http://myfaces.apache.org/tomahawk">
<h:head>
  <title></title>
</h:head>
  <h:body>
    <h:form id="theForm">
      <h:outputText value="#{theBean.theList eq null}"/>
        <t:dataTable id="dt1" value="#{theBean.theList}" var="item">
          <t:column>
            <f:facet name="header">
              <t:outputText value="Header A"/>
            </f:facet>
            <t:outputText value="#{item.itemA}"/>
          </t:column>
        </t:dataTable>
    </h:form>
  </h:body>
</html> 
```

上面的代码被保存为 XHTML 文件。bean 类如下所示：

```
@ManagedBean(name="theBean")
@SessionScoped
public class MyBean {
  private MyData[] theList = new MyData[] {
        new MyData("1111", "", "", "")};

  public MyData[] getTheList() {
    return theList;
  }

  public void setTheList(MyData[] theList) {
    this.theList = theList;
  }
}

public class MyData {

   private String itemA;

   ...
   ...
} 
```

在屏幕的输出中我没有看到数据表，我看到一个黑色的`false`字和白色的空白屏幕，这是由于这段代码`<h:outputText value="#{theBean.theList eq null}"/>`告诉我列表不为空。

我从 Web 浏览器源的输出中看到了这一点：

```
<t:dataTable id="dt1" value="[Lcom.foo.MyData;@1798a6c" var="item">
  <t:column>
    <t:outputText value=""></t:outputText>
  </t:column>
</t:dataTable> 
```

我只是想知道为什么数据表没有显示？如何让它显示在屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:13:44.033

对不起我的不好。我的类路径中也没有包含 tomahawk jar 和其他依赖项。一旦我将它们放在我的类路径中，它们`dataTable`就会呈现在网页上。我注意到，位于页面顶部的战斧线上的警告已经消失。

```
<html 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:t="http://myfaces.apache.org/tomahawk"> 
```

# php - 当字符满足条件时，如何删除字符串末尾的一些字符？

> ID：12260475
> 
> 赞同：0
> 
> 时间：2012-09-04T09:27:06.197
> 
> 标签：php, string

我有一些字符串，一些以带有斜杠（）的语言代码结尾`"xx/",can be "fr/", or "en/", or other`，一些以带有斜杠（`"int/", can be "2.0/" or "3.0/"`）的数字结尾。

如果字符串以“xx/”结尾，我想删除语言代码“xx/”，如果以“int/”结尾，则什么也不做。

通过`substr($sring, -3)`，我可以确定什么是最终的。但是如果final是“xx/”怎么去掉呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:30:43.017

```
$string = 'adfadsfasdfafasd asdf asdfasdf asdfr/';
$string = preg_replace('#[a-z]{2}/$#', '', $string); // case sensitive
$string = preg_replace('#[a-z]{2}/$#i', '', $string); // case insensitive 
```

未测试

# java - 如何在 16khz 16bit 单声道 little-endian 中转换或录制 .wav 文件？

> ID：12260476
> 
> 赞同：4
> 
> 时间：2012-09-04T09:27:06.500
> 
> 标签：java, android, audio-recording, wav, sample-rate

我只是在 java 中实现 sphinx4 语音识别。我需要的是如何录制声音或将任何声音 .wave 文件转换为 16khz 16bit 单声道 little-endian 文件。

对此进行了很多搜索..但我没有得到具体的指导..希望堆栈溢出家庭的任何人都可以帮助我或在这方面给我适当的指导。1）。我只需要用 16khz 16 位单声道 little-endian 文件格式在 android 中录制波形文件或 2) 中的音频。我需要用java中的16khz 16bit mono little-endian格式转换任何采样率的预录文件。

我需要实现上述功能之一..所以任何人都可以帮我解决这个问题...提前谢谢

使用第一个选项，我使用上述配置创建了 wav 文件，并在 android 中使用以下代码。

```
package com.varma.samples.audiorecorder;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.Button;

public class RecorderActivity extends Activity {
    private static final int RECORDER_BPP =16;
    private static final String AUDIO_RECORDER_FILE_EXT_WAV = ".wav";
    private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
    private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
    private static final int RECORDER_SAMPLERATE = 16000;
    private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_CONFIGURATION_MONO;
    private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

    private AudioRecord recorder = null;
    private int bufferSize = 0;
    private Thread recordingThread = null;
    private boolean isRecording = false;

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setButtonHandlers();
        enableButtons(false);

        bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING);
    }

    private void setButtonHandlers() {
        ((Button)findViewById(R.id.btnStart)).setOnClickListener(btnClick);
        ((Button)findViewById(R.id.btnStop)).setOnClickListener(btnClick);
    }

    private void enableButton(int id,boolean isEnable){
        ((Button)findViewById(id)).setEnabled(isEnable);
    }

    private void enableButtons(boolean isRecording) {
        enableButton(R.id.btnStart,!isRecording);
        enableButton(R.id.btnStop,isRecording);
    }

    private String getFilename(){
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath,AUDIO_RECORDER_FOLDER);

        if(!file.exists()){
            file.mkdirs();
        }

        return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + AUDIO_RECORDER_FILE_EXT_WAV);
    }

    private String getTempFilename(){
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath,AUDIO_RECORDER_FOLDER);

        if(!file.exists()){
            file.mkdirs();
        }

        File tempFile = new File(filepath,AUDIO_RECORDER_TEMP_FILE);

        if(tempFile.exists())
            tempFile.delete();

        return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_TEMP_FILE);
    }

    @SuppressLint({ "NewApi", "NewApi" })
    private void startRecording(){
        recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
                        RECORDER_SAMPLERATE, RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING, bufferSize);

        recorder.startRecording();

        isRecording = true;

        recordingThread = new Thread(new Runnable() {

            @Override
            public void run() {
                writeAudioDataToFile();
            }
        },"AudioRecorder Thread");

        recordingThread.start();
    }

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    private void writeAudioDataToFile(){
        byte data[] = new byte[bufferSize];
        String filename = getTempFilename();
        FileOutputStream os = null;

        try {
            os = new FileOutputStream(filename);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        int read = 0;

        if(null != os){
            while(isRecording){
                read = recorder.read(data, 0, bufferSize);

                if(AudioRecord.ERROR_INVALID_OPERATION != read){
                    try {
                        os.write(data);
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }

            try {
                os.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    @SuppressLint({ "NewApi", "NewApi" })
    private void stopRecording(){
        if(null != recorder){
            isRecording = false;

            recorder.stop();
            recorder.release();

            recorder = null;
            recordingThread = null;
        }

        copyWaveFile(getTempFilename(),getFilename());
        deleteTempFile();
    }

    private void deleteTempFile() {
        File file = new File(getTempFilename());

        file.delete();
    }

    private void copyWaveFile(String inFilename,String outFilename){
        FileInputStream in = null;
        FileOutputStream out = null;
        long totalAudioLen = 0;
        long totalDataLen = totalAudioLen + 36;
        long longSampleRate = 16000;
        int channels = 1;
        //long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels/8;
        long byteRate = 256;

        byte[] data = new byte[bufferSize];

        try {
            in = new FileInputStream(inFilename);
            out = new FileOutputStream(outFilename);
            totalAudioLen = in.getChannel().size();
            totalDataLen = totalAudioLen + 36;

            AppLog.logString("File size: " + totalDataLen);

            WriteWaveFileHeader(out, totalAudioLen, totalDataLen,
                    longSampleRate, channels, byteRate);

            while(in.read(data) != -1){
                out.write(data);
            }

            in.close();
            out.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void WriteWaveFileHeader(
            FileOutputStream out, long totalAudioLen,
            long totalDataLen, long longSampleRate, int channels,
            long byteRate) throws IOException {

        byte[] header = new byte[44];

        header[0] = 'R';  // RIFF/WAVE header
        header[1] = 'I';
        header[2] = 'F';
        header[3] = 'F';
        header[4] = (byte) (totalDataLen & 0xff);
        header[5] = (byte) ((totalDataLen >> 8) & 0xff);
        header[6] = (byte) ((totalDataLen >> 16) & 0xff);
        header[7] = (byte) ((totalDataLen >> 24) & 0xff);
        header[8] = 'W';
        header[9] = 'A';
        header[10] = 'V';
        header[11] = 'E';
        header[12] = 'f';  // 'fmt ' chunk
        header[13] = 'm';
        header[14] = 't';
        header[15] = ' ';
        header[16] = 16;  // 4 bytes: size of 'fmt ' chunk
        header[17] = 0;
        header[18] = 0;
        header[19] = 0;
        header[20] = 1;  // format = 1
        header[21] = 0;
        header[22] = (byte) channels;
        header[23] = 0;
        header[24] = (byte) (longSampleRate & 0xff);
        header[25] = (byte) ((longSampleRate >> 8) & 0xff);
        header[26] = (byte) ((longSampleRate >> 16) & 0xff);
        header[27] = (byte) ((longSampleRate >> 24) & 0xff);
        header[28] = (byte) (byteRate & 0xff);
        header[29] = (byte) ((byteRate >> 8) & 0xff);
        header[30] = (byte) ((byteRate >> 16) & 0xff);
        header[31] = (byte) ((byteRate >> 24) & 0xff);
        header[32] = (byte) (2 * 16 / 8);  // block align
        header[33] = 0;
        header[34] = RECORDER_BPP;  // bits per sample
        header[35] = 0;
        header[36] = 'd';
        header[37] = 'a';
        header[38] = 't';
        header[39] = 'a';
        header[40] = (byte) (totalAudioLen & 0xff);
        header[41] = (byte) ((totalAudioLen >> 8) & 0xff);
        header[42] = (byte) ((totalAudioLen >> 16) & 0xff);
        header[43] = (byte) ((totalAudioLen >> 24) & 0xff);

        out.write(header, 0, 44);
    }

    private View.OnClickListener btnClick = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            switch(v.getId()){
                case R.id.btnStart:{
                    AppLog.logString("Start Recording");

                    enableButtons(true);
                    startRecording();

                    break;
                }
                case R.id.btnStop:{
                    AppLog.logString("Start Recording");

                    enableButtons(false);
                    stopRecording();

                    break;
                }
            }
        }
    }; 
} 
```

# c# - MongoDb 直接客户端连接

> ID：12260481
> 
> 赞同：0
> 
> 时间：2012-09-04T09:27:14.417
> 
> 标签：c#, mongodb, appserver

我有 ac# 客户端应用程序，它使用 10gen c# 驱动程序直接连接到 Mongodb 服务器。就可以保持的纯连接数而言，让客户端直接连接到数据库是否明智？太多的客户端会淹没数据库并使其崩溃吗？总是使用应用服务器来处理数据库读写请求是否更明智？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:44:52.127

正如[维基](http://www.mongodb.org/display/DOCS/CSharp+Driver+Quickstart#CSharpDriverQuickstart-YoudoNOTneedtocallConnectorDisconnect)所说：

> C# 驱动程序有一个连接池，可以有效地使用与服务器的连接。无需调用 Connect 或 Disconnect；只需让驱动程序处理连接（调用 Connect 是无害的，但调用 Disconnect 是不好的，因为它会关闭连接池中的所有连接）。

# python - 如何以编程方式实例化 python 类并使用 pydev 运行方法？

> ID：12260483
> 
> 赞同：1
> 
> 时间：2012-09-04T09:27:23.987
> 
> 标签：python, class, methods, pydev

我不是 pydev 方面的专家，但我知道是否可以（从 eclipse rcp 应用程序）实例化一个 python 类并调用它的方法。例如，我有以下简单的 python 代码：

```
import math
import sys

class Test:

    def __init__(self, first):
        self.first=first

    def increment(self):
        self.first += 1
        return self.first

    def decrement(self):
        self.first -= 1
        return self.first

    def add(self,value1,value2):
        return value1+value2 
```

我想实例化 Test 类并调用增量方法或减量方法。注意：我同意 add 方法不需要有一个类，但是我们需要一个简单的例子来说明如何使用 PyDev 的 API，然后使用更复杂的例子来使用 API。

另一个问题是：如何使用 Pydev 解析文件 (*.py) 中的 python 代码以查找带有参数的类和方法？

注意：我知道使用 jython 可以完成所有这些工作，但是使用 Pydev（使用其他 Python 解释器，而不仅仅是使用 Jython）可以做到这一点吗？（因为我需要python的3.x语法）。

提前致谢，

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:58:02.523

如果您不使用 Jython，则必须启动一个外部 Python 进程来运行您的类并通过 sockets/files/xml-rpc 或任何更适合您想要实现的东西进行通信。

至于在 PyDev 中解析，不相关，请另开题。

# iphone - MPMoviePlayerController 缩放模式在 iPad 横向模式下不起作用

> ID：12260484
> 
> 赞同：1
> 
> 时间：2012-09-04T09:27:25.533
> 
> 标签：iphone, ios, cocoa-touch, mpmovieplayercontroller, mpmovieplayer

我正在使用 MPMoviePlayerController 播放直播视频，我使用的代码是

```
[_moviePlayerController.view setFrame:self.view.bounds];
[_moviePlayerController prepareToPlay];
_moviePlayerController.fullscreen=YES;
_moviePlayerController.controlStyle = MPMovieControlStyleNone;
[_moviePlayerController setFullscreen:YES animated:YES];
[self.view addSubview:_moviePlayerController.view]; 
```

视频正在各个方向播放。但我在电影播放器​​顶部添加了一个按钮，可让您缩放视频。

我知道在媒体播放器框架中，我们有**MPMovieScalingModeNone、MPMovieScalingModeAspectFit、MPMovieScalingModeAspectFill 和 MPMovieScalingModeFill**类型的缩放模式选项。按下按钮时，我将缩放模式设置为 MPMovieScalingModeAspectFill ，第二次按下 MPMovieScalingModeAspectFit 时。这在 iPhone 中也很有效。但是当我使用**iPad LANDSCAPE Mode**时无法进行任何缩放操作时。当 iPad 处于横向模式时，我也无法使用适合或填充缩放模式。

为什么 ？可能是什么原因 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:49:17.623

你可以像这样提供随机缩放：

```
[UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{

  moviePlayer.view.transform = CGAffineTransformMakeScale(0.7f, 0.7f);

} completion:^(BOOL finished){
    // if you want to do something once the animation finishes, put it here
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:19:26.340

如果视频纵横比已经完全适合显示（视图）纵横比，则任何适合/填充操作都没有任何效果。这是设计使然，不是问题。

一旦出现如此完美的配合，您应该隐藏或禁用该按钮。要将视频纵横比与视图的纵横比进行比较，请使用播放器的 naturalSize 属性。

```
naturalSize 
```

影片帧的宽度和高度。（只读）

```
@property (nonatomic, readonly) CGSize naturalSize 
```

讨论

> 此属性以方形像素报告视频的干净孔径。因此，报告的尺寸考虑了变形内容和光圈模式。
> 
> 影片的自然大小可能会在播放过程中发生变化。这通常发生在流媒体内容的比特率发生变化或播放在纯音频和音频和视频组合之间切换时。

# java - 当与 IHandler 一起使用时，选择服务提供从原始窗口而不是新窗口的选择。日食RCP

> ID：12260486
> 
> 赞同：1
> 
> 时间：2012-09-04T09:27:38.737
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我有一个 Eclipse rcp 应用程序，其中我定义了一个键绑定 ( `CTRL`+ `M`)，它处理树视图中的当前选择。

这按预期工作，但每当我使用 打开新窗口`ActionFactory.OPEN_NEW_WINDOW.create(window)`时，键绑定仍然有效，但它从原始窗口而不是新打开的窗口中获取选择。

有谁知道如何解决这个问题？

**IHandler 实现：**

```
public class MyHandler extends AbstractHandler{
    @Override
    public Object execute(ExecutionEvent event) throws ExecutionException {
        ISelection selection = HandlerUtil.getCurrentSelection(event);
        processCurrentSelection(selection);     
        return null;
    }
} 
```

# javascript - 使用 java 脚本单击图像/按钮后显示加载图像

> ID：12260488
> 
> 赞同：0
> 
> 时间：2012-09-04T09:27:44.503
> 
> 标签：javascript, jquery, html, cordova, jquery-mobile

我使用 PhoneGap 和 JqueryMobile 开发了一个应用程序。我有很多 HTML 页面，点击图像时从一页导航到另一页需要很多时间。最终用户不知道后端发生了什么。我想在页面加载之前显示加载图像。

我想知道如何使用 Jquery 在屏幕上显示一个简单的“正在加载...”，直到页面加载。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:31:21.257

使用 jquerymobile，您可以使用`$.mobile.showPageLoadingMsg()`resp 来做到这一点。`$.mobile.hidePageLoadingMsg()`如[文档](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)中所述。

# c# - 递归查找矩形

> ID：12260491
> 
> 赞同：0
> 
> 时间：2012-09-04T09:27:52.487
> 
> 标签：c#, recursion

我有一个重叠矩形的列表。我需要找到一个列表列表，其中返回所有重叠的矩形。例如，在一个包含 7 个矩形的列表中，如果 4 个矩形重叠并且其余部分是分开的，那么列表的列表应该如下所示：

```
[0]: r1, r2, r3, r4
[1]: r5
[2]: r6
[3]: r7 
```

我知道我必须执行命中测试。我正在寻找创建链的算法或示例。

谢谢

我已经尝试过这段代码：有时它可以工作，有时它会抛出 index out of bound 有点异常。

```
while (rects.Count != 0)
            {
                listOfRects.Add(joinRectangles(rects, new List<Rectangle>(), rects[rects.Count - 1]));
            }

        private List<Rectangle> joinRectangles(List<Rectangle> rects, List<Rectangle> tempRects, Rectangle curRect)
        {
            for (int j = rects.Count; j-- > 0; )
            {
                if (hitTest(curRect, rects[j]) == true)
                {
                    if (tempRects.Contains(rects[j]) == false)
                    {
                        tempRects.Add(rects[j]);
                        curRect = rects[j];
                        rects.Remove(rects[j]);

                        j--;

                        joinRectangles(rects, tempRects, curRect);
                    }
                }

            }

            return tempRects;
        } 
```

如果我提供这些坐标，那么我应该得到一个包含 4 个列表的列表，如下所示：

```
 [0]: 1 rectangle
    [1]: 3 rectangles
    [2]: 1 rectangle
    [3]: 1 rectangle

<?xml version="1.0" encoding="utf-16"?>
<rectangles>
  <rectangle>
    <X1>50.833333344375</X1>
    <Y1>100</Y1>
    <X2>53.833333344375</X2>
    <Y2>127.00000004975</Y2>
  </rectangle>
  <rectangle>
    <X1>136.500000033125</X1>
    <Y1>100</Y1>
    <X2>139.516666655625</X2>
    <Y2>127.00000004975</Y2>
  </rectangle>
  <rectangle>
    <X1>50.833333344375</X1>
    <Y1>130.647222172472</Y1>
    <X2>53.833333344375</X2>
    <Y2>157.647222222222</Y2>
  </rectangle>
  <rectangle>
    <X1>136.500000033125</X1>
    <Y1>130.647222172472</Y1>
    <X2>139.516666655625</X2>
    <Y2>157.647222222222</Y2>
  </rectangle>
  <rectangle>
    <X1>136.500000033125</X1>
    <Y1>100</Y1>
    <X2>139.516666655625</X2>
    <Y2>157.3333333830833</Y2>
  </rectangle>
  <rectangle>
    <X1>179.3333333775</X1>
    <Y1>100</Y1>
    <X2>182.3333333775</X2>
    <Y2>157.3333333830833</Y2>
  </rectangle>
</rectangles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:42:08.140

Written quicly from scratch before you posted your own code. You have a rectangleList, and want to group them by overlap groups.

You use this groupRectangles function

```
public List<List<Rectangle>> groupRectangles(List<Rectangle> rectangleList) {

List<List<Rectangle>> groupOverlappedRectangles = new List<List<Rectangle>>();

foreach (Rectangle r : rectangleList) {
    bool overLap = false;
    foreach (List<Rectangle> liste : groupOverlappedRectangles) {
        if (overlapsRectangleList(r,liste))
        {
                liste.add(r);
            overLap = true;
            break;
        }
    }
    if (!overLap) {
        List<Rectangle> newOverlapList = new List<Rectangle>();
        newOverlapList.add(r);
        groupOverlappedRectangles.add(newOverlapList);
    }
}
return groupOverlappedRectangles;
}

public bool overlapsRectangleList(Rectangle r, List<Rectangle> listeOver)
{
    foreach (Rectangle rOver : listeOver) {
        if (r.IntersectsWith(rOver)) {
            return true;
    }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:51:51.600

[`Rectangle.IntersectsWith`](http://msdn.microsoft.com/en-us/library/system.drawing.rectangle.intersectswith)这是使用和 Linq 的延迟执行的另一种方法：

```
var intersectingRectangles = new List<List<Rectangle>>();
var alreadyChecked = new HashSet<Rectangle>();
var toCheck = rectangles.Except(alreadyChecked);
while (alreadyChecked.Count != rectangles.Count)
{
    var intersections = toCheck.Where(r => r.IntersectsWith(toCheck.ElementAt(0)))
                               .ToList();
    intersectingRectangles.Add(intersections);
    foreach (var r in intersections)
        alreadyChecked.Add(r);
}
intersectingRectangles.Sort((rl1, rl2) => (-1) * rl1.Count.CompareTo(rl2.Count)); 
```

也许不是最易读的方式，而是最短的方式之一:)

**编辑**：这是一个演示（没有 System.Drawing 和 Rectangles 的单声道很难）：

[http://ideone.com/eOCMN](http://ideone.com/eOCMN)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:44:10.227

对于每个矩形，必须检查所有较早的矩形组。例如，如果 A 和 C 重叠，B 和 C 重叠，但 A 和 B 不重叠。如果算法接收到 A、B、C，它将首先将 A 放入一个列表中，然后将 B 放入另一个列表中。但是当 C 出现时，它必须将带有 A 的列表和带有 B 的列表合并到包含 C 的新列表中。（这就是其他答案似乎遗漏的内容。）

```
public static List<List<Rectangle>> SortOverlap(Rectangle[] rectangles)
{
    var result = new List<List<Rectangle>>();
    for (int i = 0; i < rectangles.Length; i++) 
    {
        var newList = new List<Rectangle>();
        newList.Add(rectangles[i]);
        for (int j = 0; j < result.Count; j++) 
        {
            if(result[j].Any(r => r.Overlap(newList[0])))
            {
                newList.AddRange(result[j]);
                result[j] = null;
            }
        }
        result.Add(newList);
        result.RemoveAll(list => list == null);
    }
    return result;
} 
```

**编辑**：重叠检查实现起来相当简单，所以不需要使用 System.Drawing 或类似的检查...

```
public class Rectangle {
    ....
    public bool Overlap(Rectangle other)
    {
        return !(this.MinX >= other.MaxX || this.MaxX <= other.MinX ||
                 this.MinY >= other.MaxY || this.MaxY <= other.MinY);
    }
} 
```

# sql-server - 如何使用 Inno Setup 连接到 MS SQL Server？

> ID：12260493
> 
> 赞同：6
> 
> 时间：2012-09-04T09:28:00.190
> 
> 标签：sql-server, inno-setup

我想在安装过程中连接到 MS SQL Server 2008。有一个[类似的问题](https://stackoverflow.com/q/2171199/960757)，它提供了一个使用`isql.exe`工具的解决方案，该工具与 SQL Server 2008 不兼容。

您能否建议如何连接到 MS SQL Server 2008 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T08:37:16.710

下面是一个使用 ADO 连接到 Microsoft SQL Server 的简单示例：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
DefaultGroupName=My Program
UninstallDisplayIcon={app}\MyProg.exe
Compression=lzma2
SolidCompression=yes 
```

```
[Code]
const
  adCmdUnspecified = $FFFFFFFF;
  adCmdUnknown = $00000008;
  adCmdText = $00000001;
  adCmdTable = $00000002;
  adCmdStoredProc = $00000004;
  adCmdFile = $00000100;
  adCmdTableDirect = $00000200;
  adOptionUnspecified = $FFFFFFFF;
  adAsyncExecute = $00000010;
  adAsyncFetch = $00000020;
  adAsyncFetchNonBlocking = $00000040;
  adExecuteNoRecords = $00000080;
  adExecuteStream = $00000400;
  adExecuteRecord = $00000800;
var
  CustomerLabel: TLabel;
  ConnectButton: TButton;

procedure ConnectButtonClick(Sender: TObject);
var
  Name, Surname: string;
  SQLQuery: AnsiString;  
  ADOCommand: Variant;
  ADORecordset: Variant;
  ADOConnection: Variant;  
begin
  try
    // create the ADO connection object
    ADOConnection := CreateOleObject('ADODB.Connection');
    // build a connection string; for more information, search for ADO
    // connection string on the Internet 
    ADOConnection.ConnectionString := 
      'Provider=SQLOLEDB;' +               // provider
      'Data Source=Default\SQLSERVER;' +   // server name
      'Initial Catalog=Northwind;' +       // default database
      'User Id=UserName;' +                // user name
      'Password=12345;';                   // password
    // open the connection by the assigned ConnectionString
    ADOConnection.Open;
    try
      // create the ADO command object
      ADOCommand := CreateOleObject('ADODB.Command');
      // assign the currently opened connection to ADO command object
      ADOCommand.ActiveConnection := ADOConnection;
      // load a script from file into the SQLQuery variable
      if LoadStringFromFile('d:\Script.sql', SQLQuery) then
      begin
        // assign text of a command to be issued against a provider
        ADOCommand.CommandText := SQLQuery;
        // this will execute the script; the adCmdText flag here means
        // you're going to execute the CommandText text command, while
        // the adExecuteNoRecords flag ensures no data row will be get
        // from a provider, what should improve performance
        ADOCommand.Execute(NULL, NULL, adCmdText or adExecuteNoRecords);
      end;
      // assign text of a command to be issued against a provider
      ADOCommand.CommandText := 'SELECT Name, Surname FROM Customer';
      // this property setting means, that you're going to execute the 
      // CommandText text command; it does the same, like if you would
      // use only adCmdText flag in the Execute statement
      ADOCommand.CommandType := adCmdText;
      // this will execute the command and return dataset
      ADORecordset := ADOCommand.Execute;
      // get values from a dataset using 0 based indexed field access;
      // notice, that you can't directly concatenate constant strings 
      // with Variant data values
      Name := ADORecordset.Fields(0);
      Surname := ADORecordset.Fields(1);
      CustomerLabel.Caption := Name + ' ' + Surname;
    finally
      ADOConnection.Close;
    end;
  except
    MsgBox(GetExceptionMessage, mbError, MB_OK);
  end;
end;

procedure InitializeWizard;
begin
  ConnectButton := TButton.Create(WizardForm);
  ConnectButton.Parent := WizardForm;
  ConnectButton.Left := 8;
  ConnectButton.Top := WizardForm.ClientHeight - 
    ConnectButton.ClientHeight - 8;
  ConnectButton.Caption := 'Connect';
  ConnectButton.OnClick := @ConnectButtonClick;
  CustomerLabel := TLabel.Create(WizardForm);
  CustomerLabel.Parent := WizardForm;
  CustomerLabel.Left := ConnectButton.Left + ConnectButton.Width + 8;
  CustomerLabel.Top := ConnectButton.Top + 6;
  CustomerLabel.Font.Style := [fsBold];
  CustomerLabel.Font.Color := clMaroon;
end; 
```

这是我在我的案例中存储的测试 SQL 脚本文件`Script.sql`：

```
BEGIN TRANSACTION;
BEGIN TRY
    CREATE TABLE [dbo].[Customer](
        [ID] [int] IDENTITY(1,1) NOT NULL,
        [Name] [nvarchar](50) NOT NULL,
        [Surname] [nvarchar](50) NOT NULL,
        [CreatedBy] [nvarchar](255) NOT NULL,
        [CreatedAt] [datetime] NOT NULL,
    CONSTRAINT [PK_Customer] PRIMARY KEY CLUSTERED 
      ([ID] ASC)
    WITH 
      (
        PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, 
        ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON
      ) ON [PRIMARY]
    ) ON [PRIMARY]

    ALTER TABLE [dbo].[Customer] 
      ADD CONSTRAINT [DF_Customer_CreatedBy] DEFAULT (suser_sname()) FOR [CreatedBy]

    ALTER TABLE [dbo].[Customer] 
      ADD CONSTRAINT [DF_Customer_CreatedAt]  DEFAULT (getdate()) FOR [CreatedAt]

    INSERT INTO [dbo].[Customer]
      (Name, Surname)
    VALUES
      ('Dave', 'Lister')
END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;
END CATCH;

IF @@TRANCOUNT > 0
    COMMIT TRANSACTION; 
```

# asp.net - 从 GridView 更新数据

> ID：12260494
> 
> 赞同：0
> 
> 时间：2012-09-04T09:28:05.737
> 
> 标签：asp.net

我有一个 Gridview，我在其中加入两个表，引入要显示的数据

表 1 sid, schedule, stime, splace, stourid

表 2 tourid, tourname

基本上，他们加入了 stourid to tourid。这样我就可以在网格中显示比赛名称。

现在我想编辑这个 GridView，我需要做什么，例如，如果用户编辑了 tourname，它会被保存到数据库中吗？我假设需要更新语句，但它如何链接到 GridView？

什么是最好和最整洁的方法？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:44:54.823

创建`Store Procedure`以更新两个表并在您的更新代码中调用它...

```
Create Proc UpdateData
@sid int,
@schedule,
@stime,
@splace,
@tourname
as
Begin
declare @tourid int,

select distinct @tourid=tourid from table1 where sid=@sid

begin try
// update tabel1
update tabel2 set tourname=@tourname where tourid =@tourid     
end Try
begin Catch
end Catch
End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:44:54.083

使用 LinqToSQL，您可以执行类似的操作（如果表之间存在 FK 关系）

```
DatabaseDataContext data = new DatabaseDataContext();

Table1 row = data.Table1s.Where(t =>t.ID == selectedID);
row.Table2.tourname = newName;

data.SubmitChanges(); 
```

然后，您需要重新绑定网格以显示新数据。

# svn - 如何使用内部版本号和存储库的命名将工件存档文件从 jenkins 发布到 centos 上的本地目录

> ID：12260497
> 
> 赞同：2
> 
> 时间：2012-09-04T09:28:14.773
> 
> 标签：svn, jenkins, centos

我已设法安装 Jenkins 并将其设置为构建工件存档文件，但这些文件的名称称为 archive.zip

我想发布到我的 centos 服务器上的本地目录，该目录将具有标签名称/编号的子目录，并且在存档文件上，它们将使用日期/时间字符串和构建/修订号命名。

谁能指出我如何实现这一目标的正确方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:47:30.467

考虑使用

[https://wiki.jenkins-ci.org/display/JENKINS/ArtifactDeployer+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/ArtifactDeployer+Plugin)

或者

[https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+) ...

如果不明确支持对工件的重命名，请考虑使用作业名、版本等命名父目录。

# map - 多个参数的八度映射

> ID：12260499
> 
> 赞同：1
> 
> 时间：2012-09-04T09:28:19.177
> 
> 标签：map, octave

我想映射一个函数，该函数在两个长度相同的向量上接受两个参数，从每个向量中获取一个参数。我可以用一个论点来做到这一点：

```
map(@sqrt, 1:10)
ans = .... 
```

`help map`给出以下示例：

```
map(@min, A, B)
ans = ... 
```

其中`A`和`B`是 2 × 2 矩阵，结果矩阵是元素最小值。但是当我尝试这个例子时，我得到以下错误：

```
A = rand(2,2);
B = rand(2,2);
map(@min, A, B)
error: invalid assignment to cs-list outside multiple assignment.
error: assignment to cell array failed
error: assignment failed, or no method for `<unknown type> = scalar'
error: called from:
error:   C:\Octave\3.2.4_gcc-4.4.0\share\octave\packages\miscellaneous-1.0.9\map.m at line 108, column 21 
```

我究竟做错了什么？我的系统是Win7，64位，如你所见，我的八度版本是3.2.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:33:08.733

多亏了[这个](https://stackoverflow.com/questions/11707464/how-do-i-use-map-with-custom-function-in-octave)问题，我才发现它`map`已被弃用，并且正确使用的功能是`arrayfun`，它开箱即用，都适用于 octave 版本 3.2.4，这是我在下载普通 Windows 安装程序时得到的，以及使用 cygwin 获得的 octave 版本 3.6.2。在 3.6.2 版本中，它甚至似乎`map`需要`miscellaneous`包，但`arrayfun`实际上不需要。

所以我永远不会知道我做错了什么，或者是否有错误（不太可能，因为该功能非常标准），但我的问题通过替换解决了`arrayfun`：

```
A = rand(2,2);
B = rand(2,2);
arrayfun(@min, A, B)
ans = .... % correct answer 
```

# android - Jackson/JSON：调用 new ObjectMapper() 时出现 ExceptionInInitializerError

> ID：12260504
> 
> 赞同：1
> 
> 时间：2012-09-04T09:28:32.587
> 
> 标签：android, broadcastreceiver, jackson

我在我的 Android 应用程序中使用 Jackson。我有一个`BroadcastReceiver`用于保存整个呼叫信息的传入呼叫，然后我将它保存到 JSON 数组中的 JSON 对象。

然后，我得到下面的异常，它指向我调用的行`ObjectMapper mapper = new ObjectMapper()`。我不知道该怎么做，因为我没有编写这些课程。帮助？

```
09-04 09:08:58.220: E/AndroidRuntime(4445): FATAL EXCEPTION: main
09-04 09:08:58.220: E/AndroidRuntime(4445): java.lang.ExceptionInInitializerError
09-04 09:08:58.220: E/AndroidRuntime(4445):     at com.ourcompany.appname.IncomingCallDetector.saveLog(IncomingCallDetector.java:80)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at com.ourcompany.appname.IncomingCallDetector.onReceive(IncomingCallDetector.java:70)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2816)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at android.app.ActivityThread.access$3200(ActivityThread.java:126)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2088)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at android.os.Looper.loop(Looper.java:123)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at android.app.ActivityThread.main(ActivityThread.java:4633)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at java.lang.reflect.Method.invokeNative(Native Method)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at java.lang.reflect.Method.invoke(Method.java:521)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-04 09:08:58.220: E/AndroidRuntime(4445):     at dalvik.system.NativeStart.main(Native Method)
09-04 09:08:58.220: E/AndroidRuntime(4445): Caused by: java.lang.ExceptionInInitializerError
09-04 09:08:58.220: E/AndroidRuntime(4445):     at com.fasterxml.jackson.databind.ObjectMapper.<clinit>(ObjectMapper.java:197)
09-04 09:08:58.220: E/AndroidRuntime(4445):     ... 13 more
09-04 09:08:58.220: E/AndroidRuntime(4445): Caused by: java.lang.NoClassDefFoundError: com.fasterxml.jackson.annotation.JsonAutoDetect
09-04 09:08:58.220: E/AndroidRuntime(4445):     at com.fasterxml.jackson.databind.introspect.VisibilityChecker$Std.<clinit>(VisibilityChecker.java:169)
09-04 09:08:58.220: E/AndroidRuntime(4445):     ... 14 more 
```

我的广播接收器在这里： http: [//pastie.org/4661134](http://pastie.org/4661134)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T09:30:21.753

似乎发生的事情是 JsonAutoDetect 未添加到您的项目中。确保它包含在 apk 中（如果您使用的是 eclipse，请参阅 eclipse 中的类路径部分）

# maven - 使用 jetty-maven-pluggin 进行集成测试不读取 .properties 文件

> ID：12260509
> 
> 赞同：2
> 
> 时间：2012-09-04T09:29:10.957
> 
> 标签：maven, properties, jetty, integration-testing

我正在寻找如何在通过 maven 启动码头时加载我的 jndi.properties 文件，这些文件位于 test/resources 文件夹中。我试过用 extraClasspath 和 scannTargetPatterns 来做，但没有任何效果。在下面，您会找到启动和停止码头的我的 pom 片段。这些文件位于 src/test/resources/jndi_folder/local_jndi.properties 和 src/test/resources/jndi_folder/remote_jndi.properties

自从我在控制台中获得此输出后，scanTargetPatterns 就会选择它们：

```
[INFO] Adding extra scan target from pattern: services/src/test/resources/jndi_folder   /local_jndi.properties
[INFO] Adding extra scan target from pattern: services/src/test/resources/jndi_folder/remote_jndi.properties 
```

但是当我运行集成测试时，我得到一个空指针，说我的代码找不到 .properties 文件。

```
<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.26</version>
            <configuration>
                <scanIntervalSeconds>0</scanIntervalSeconds>
                <connectors>
                    <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                        <port>8080</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>
                <webApp>
                    ${basedir}/target/messages
                </webApp>
                <contextPath>
                    messages
                </contextPath>
                <stopKey>stop</stopKey>
                <stopPort>8005</stopPort>
                <daemon>true</daemon>
                <scanTargetPatterns>
                    <scanTargetPattern>
                        <directory>
                            ${basedir}/src/test/resources
                        </directory>
                        <includes>
                            <include>**/*.properties</include>
                        </includes>
                    </scanTargetPattern>
                </scanTargetPatterns>
            </configuration>
            <executions>
                <execution>
                    <id>start-jetty</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
                <execution>
                    <id>stop-jetty</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions> 
```

如果有人可以帮助我，那就太好了。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:02:08.423

尝试将以下内容添加到您的配置标签中：

```
<useTestClasspath>true</useTestClasspath> 
```

# ios - 未调用 popoverControllerDidDismissPopover 方法

> ID：12260510
> 
> 赞同：2
> 
> 时间：2012-09-04T09:29:13.007
> 
> 标签：ios, uipopovercontroller

在我的应用程序中，我有一个`presentViewController`，在其中我有一个打开弹出框的按钮。在这个弹出窗口中，我有一个 barButtonItem 来保存这个弹出窗口的数据。我希望当用户在弹出框之外点击时，也可以保存数据。我尝试在视图中使用该`popoverControllerDidDismissPopover`方法。`presentViewController`我有委托，但是当我在弹出框之外点击时，不会调用此方法。

我能做些什么？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T09:35:44.893

在添加 popOver 的同时添加这行代码：

```
 popover.delegate = self; 
```

还要在 .h 文件中注册 popOverDelegate，您可以在其中展示您的 popOver 控制器

```
@interface yourViewController : UIViewController<UIPopoverControllerDelegate> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-13T15:22:44.830

**请注意文档！**

“当用户采取行动解除弹出框时调用委托。 ***当以编程方式解除弹出框时，不会调用此方法。*** ”

这是我的情况，因为我的弹出窗口正在使用这种方法关闭按钮点击：

```
dismiss(animated: true, completion: nil) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T13:18:48.303

您可能已经解决了它，但我刚刚遇到了同样的问题。我`UIPopoverController`在我的 Viewcontroller 中持有一个实例，并以这种方式拥有它：

```
self.popover.delegate = self;
self.popover = [[UIPopoverController alloc] initWithContentViewController:wgtvc]; 
```

当然这不起作用，因为我正在初始化`UIPopoverController`AFTER 设置委托，它会覆盖委托设置。所以正确的方法是首先初始化 UIPopovercontroller 然后设置委托

```
self.popover = [[UIPopoverController alloc] initWithContentViewController:wgtvc];
self.popover.delegate = self; 
```

也许您正在重新初始化您的`UIPopoverController`某个地方 - 只需在重新初始化后再次设置委托。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-12T10:36:22.133

我有同样的问题，我通过对 iOS8 进行不同的处理来解决它。

**演示代码**

```
 UIViewController *searchViewController = [[UIViewController alloc] init];

    [[searchViewController view] addSubview:_searchOptions];
    [searchViewController setModalPresentationStyle:UIModalPresentationPopover];
    [searchViewController setPreferredContentSize:CGSizeMake(500, 400)];

    [_searchOptions setHidden:NO];
    [_searchOptions setFrame:[[searchViewController view] bounds]];
    [_searchOptions setAutoresizingMask:UIViewAutoresizingFlexibleWidthAndHeight];

    if (CRIdiomToolsIsIOS8OrHigher())
    {
        UIPopoverPresentationController *popOverPresentationController = [searchViewController popoverPresentationController];

        [popOverPresentationController setDelegate:self];
        [popOverPresentationController setSourceView:[_searchOptionsButton disclosureView]];
        [popOverPresentationController setSourceRect:[[_searchOptionsButton disclosureView] bounds]];

        [self presentViewController:searchViewController animated:YES completion:nil];
    }
    else
    {
        UIPopoverController *popOverControler = [[UIPopoverController alloc] initWithContentViewController:searchViewController];

        [popOverControler setDelegate:self];
        [popOverControler setPopoverContentSize:CGSizeMake(500, 400)];

        [popOverControler presentPopoverFromRect:[[_searchOptionsButton disclosureView] bounds] inView:[_searchOptionsButton disclosureView] permittedArrowDirections:UIPopoverArrowDirectionUp|UIPopoverArrowDirectionLeft animated:YES];
    } 
```

**代表电话**

```
#pragma mark Delegate Methods: UIPopoverControllerDelegate

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    [self showSearchOptions:NO animated:YES];
}

#pragma mark Delegate Methods: UIPopoverPresentationControllerDelegate

- (void)popoverPresentationControllerDidDismissPopover:(UIPopoverPresentationController *)popoverPresentationController
{
    [self showSearchOptions:NO animated:YES];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-03T13:42:38.530

我遇到过同样的问题。您将需要保留 popover 对象，这样才能调用委托方法。它很奇怪，但它有效。

```
@property (nonatomic, retain) UIPopoverController *popupObject;

UIPopoverController *popup = [[UIPopoverController alloc] initWithContentViewController:viewController];
popup.delegate = self;
[popup presentPopoverFromRect:presentationRect inView:self permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
self.popupObject = popup; //Retained

-(void) popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
  //Do whatever operation you need to perform
  self.popupObject = nil; 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-28T15:03:03.530

我知道这个问题很老，但希望它可以帮助那里的人......

问题在于您的弹出框控制器的初始化。如果您在情节提要中建立了弹出框 segue，则需要引用此弹出框，以便在解除代理时调用代理。

在您准备 segue 方法中：

代替：

```
 self.popoverController = [[UIPopoverController alloc]initWithContentViewController:segue.destinationViewController];
    self.popoverController.delegate = self; 
```

你需要：

```
 self.popoverController = [(UIStoryboardPopoverSegue *)segue popoverController];
    self.popoverController.delegate = self; 
```

然后确保正确处理弹出框何时出现

*   (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender

# android - 什么是谷歌API和框架API

> ID：12260514
> 
> 赞同：3
> 
> 时间：2012-09-04T09:29:20.493
> 
> 标签：android

我对 google API 和 android 平台 SDK API 感到困惑。他们一样吗？如果没有，每个是做什么用的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T09:34:25.407

Android 由 Google 开发，但也可以在没有任何 Google 服务的情况下使用。所以[Android平台SDK](https://developer.android.com/sdk/index.html)可以用来开发*Android应用程序*。但是，如果您想在您的 Android 应用程序中使用任何*Google 服务*，您应该使用[Google API Java 客户端库](https://code.google.com/p/google-api-java-client/wiki/APIs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:34:38.447

Google api 用于使用 google 特定服务，例如 google map 或 google admob 或 google fusion。这些通常与谷歌服务器联系以获取数据。但是，android 平台 sdk api 不是谷歌特定的。它为应用程序开发提供接口。这些可能需要也可能不需要互联网（取决于您使用它的目的）

# xml - 如何通过 XPath 访问具有多个命名空间的 XML 中的元素？

> ID：12260520
> 
> 赞同：1
> 
> 时间：2012-09-04T09:29:45.953
> 
> 标签：xml, xslt, xpath, namespaces

我有一个看起来像这样的 XML 文件：

```
<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="http://url/stylesheet.xsl"?>

<first xmlns="http://www.loc.gov/zing/srw/">
 <element1>And</element1>
 <e2>I said</e2>
 <e3>
  <e4>
   <mods version="3.0" 
   xmlns:bla="http://www.w3.org/1999/xlink" 
   xmlns:bla2="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns="http://www.loc.gov/mods/v3" 
   xsi:schemaLocation="http://www.loc.gov/mods/v3">                                                        
    <f1>What about</f1>
    <f2>Breakfast at Tiffany's</f2>
   </mods>
  </e4>
 </e3>
</first> 
```

另一方面，我有一个 XSL 文件来通过 XPath 获取元素：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:n="http://www.loc.gov/zing/srw/"
xmlns:o="http://www.loc.gov/mods/v3">

   <xsl:template match="/">
    <html><head></head><body>
     <xsl:value-of select="n:first/n:e2"/>
    </body></html>
   </xsl:template>
</xsl:stylesheet> 
```

有了这个，我可以获取元素 e2 说 *我说*但是我无法访问元素 f4 说*早餐在 Tiffany's* 。XPath 是否假定元素 f4 有两个命名空间（默认命名空间 xmlns="http://www.loc.gov/zing/srw/" 首先在根元素中声明，**元素**mods 的命名空间 xmlns="http: //www.loc.gov/mods/v3") 还是 mods 命名空间 xmlns="http://www.loc.gov/mods/v3" 是 mods 元素的所有子元素的唯一命名空间？如果没有在我的 xsl 文件中声明前缀，我真的可以更轻松地访问元素 e2 吗？我刚开始使用 XML/XSL，所以我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:42:46.680

以下 XPath 表达式应该可以工作：

```
n:first//o:f2 
```

该`mods`元素在`o`命名空间中，为其他命名空间定义前缀不会改变它。它的孩子继承命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:09:11.327

只是为了扩展 choroba 的答案 - 因为`mod`重置默认值`xmlns`，您需要相应地调整您的命名空间别名，即完整的步行是：

```
 <xsl:value-of select="/n:first/n:e3/n:e4/o:mods/o:f2/text()"/> 
```

如果您在 xslt 中省略了命名空间，则可以使用它`local-name()`来检查节点，而不管它们的命名空间如何（在这种情况下不建议这样做，因为如您所见，这会变得非常冗长）

```
 <xsl:value-of select="/*[local-name()='first']/*[local-name()='e3']
                       /*[local-name()='e4']/*[local-name()='mods']
                       /*[local-name()='f2']/text()"/> 
```

`exclude-result-prefixes="n o"`您可以通过添加到您的输出文档 (html) 中删除别名`xsl:stylesheet`

我建议不要养成使用“//”的习惯，因为这会导致解析器对大型文档进行不必要的处理。

# c# - FileSystemWatcher - 文件复制期间的 3 个事件

> ID：12260522
> 
> 赞同：1
> 
> 时间：2012-09-04T09:29:54.377
> 
> 标签：c#, filesystemwatcher, .net

就是这样，每次将文件复制到 FileWatcher 文件夹时，FileSystemWatcher 都会生成**3 个事件**

示例：当使用**File.Copy** (source, watcherFolder **,**真的）。

复制不同大小的文件（1kb、67kb、100MB、500MB、1 GB 文件）时收到 3 个事件。我已经在 FileSystemWatcher 中注册了 Created and Changed 事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:26:16.930

如果您的问题是关于您收到的多个事件，这是正常行为。文件复制可以引发多个事件。

您可以检查[**FileSystemEventArgs.ChangeType**](http://msdn.microsoft.com/en-us/library/system.io.filesystemeventargs.changetype.aspx)中的更改并忽略某些事件。这是[WatcherChangeTypes 枚举](http://msdn.microsoft.com/en-us/library/t6xf43e0.aspx)。

看看[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.80%29.aspx)备注。

关于[**Created**](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.created.aspx)事件，它将在目标文件夹中引发。

> 例如，您创建两个 FileSystemWatcher 实例。FileSystemWatcher1 设置为监视“C:\My Documents”，FileSystemWatcher2 设置为监视“C:\Your Documents”。如果将文件从“我的文档”复制到“您的文档”，FileSystemWatcher2 将引发 Created 事件，但不会为 FileSystemWatcher1 引发任何事件。与复制不同，移动文件或目录会引发两个事件。在前面的示例中，如果您将文件从“我的文档”移动到“您的文档”，FileSystemWatcher2 将引发 Created 事件，FileSystemWatcher1 将引发 Deleted 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T20:36:25.100

如评论中所述，您应该查找正在创建的文件，然后尝试文件锁定以确定它是否已完全复制。

```
 while ($true)
    {
        try{ 
            [IO.file]::openwrite("<insert file path>").close()
            break
        }
        catch { start-sleep -Seconds 60 }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T20:49:29.977

如果您可以控制文件复制操作，那么简单的做法是使用临时名称创建文件，并在复制后重命名。让我们`FileSystemWatcher`关注`Rename`事件。此事件仅触发一次。

# c# - 在 XML 属性值中应该如何处理 '\t' 字符？

> ID：12260524
> 
> 赞同：6
> 
> 时间：2012-09-04T09:29:56.433
> 
> 标签：c#, .net, xml

我似乎发现 .Net 3.5 中的各种 XML 实现之间存在一些不一致之处，我正在努力找出名义上正确的方法。

这个问题实际上很容易重现：

1.  使用包含 '\t' 字符的文本元素创建一个简单的 xml 文档，并为其赋予包含 '\t' 字符的属性：

    ```
    var xmlDoc = new XmlDocument { PreserveWhitespace = false, };
    xmlDoc.LoadXml("<test><text attrib=\"Tab'\t'space' '\">Tab'\t'space' '</text></test>");
    xmlDoc.Save(@"d:\TabTest.xml"); 
    ```

    注意：这意味着 XmlDocument 本身对属性值中的 '\t' 字符非常满意。

2.  使用新的 XmlTextReader 加载文档：

    ```
    var rawFile = XmlReader.Create(@"D:\TabTest.xml");
    var rawDoc = new XmlDocument();
    rawDoc.Load(rawFile); 
    ```

3.  使用 XmlReader.Create 加载文档：

    ```
    var rawFile2 = new XmlTextReader(@"D:\TabTest.xml");
    var rawDoc2 = new XmlDocument();
    rawDoc2.Load(rawFile2); 
    ```

4.  比较调试器中的文档：

    ```
    (rawDoc).InnerXml   "<test><text attrib=\"Tab' 'space' '\">Tab'\t'space' '</text></test>"   string
    (rawDoc2).InnerXml  "<test><text attrib=\"Tab'\t'space' '\">Tab'\t'space' '</text></test>"  string 
    ```

使用 new XmlTextReader 读取的文档是我所期望的，文本值和属性值中的 '\t' 都按预期存在。但是，如果您查看 XmlReader.Create 读取的文档，您会发现属性值中的 '\t' 字符将已转换为`' '`字符。

什么……！！:-)

经过一番谷歌搜索后，我发现我可以将 '\t' 编码为 ' ' - 如果我在示例 XML 中使用它而不是 '\t' ，则两个阅读器都按预期工作。

现在 Altova XmlSpy 和其他各种 XML 阅读器似乎对属性值中的 '\t' 字符非常满意，我的问题是处理这个问题的正确方法是什么？

我是否应该使用以 XmlReader.Create 等属性值编码的 '\t' 字符编写 XML 文件，或者其他 XML 工具是否正确且 '\t' 字符有效且 XmlReader.Create 已损坏？

我应该以哪种方式修复/解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:18:53.790

可能与属性值规范化有关。对于 CDATA 属性，需要 XML 解析器将属性值中的换行符和制表符替换为空格，除非它们以转义形式编写为字符引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:33:58.680

@all：感谢您的所有回答和评论。

Justin 和 Michael Kay 似乎是正确的，应该根据 W3C XML 规范对空格进行编码，而问题是大量的 MS 实现不满足这一要求。

就我而言，除了 XML 规范之外，我真正想要的只是正确保存属性值——即保存的值应该正是读取的值。

答案是在保存 XML 文件时强制使用通过使用 XmlWriter.Create 方法创建的 XmlWriter。

虽然 Dataset 和 XmlDocument 都提供了保存/写入机制，但在以默认形式使用时，它们都不能正确编码属性中的空格。但是，如果我强制他们使用手动创建的 XmlWriter，则会应用正确的编码并将其写入文件。

于是原来的文件保存代码就变成了：

```
var xmlDoc = new XmlDocument { PreserveWhitespace = false, };
xmlDoc.LoadXml("<test><text attrib=\"Tab'\t'space' '\">Tab'\t'space' '</text></test>");

using (var xmlWriter = XmlWriter.Create(@"d:\TabTest.Encoded.xml"))
{
    xmlDoc.Save(xmlWriter);
} 
```

然后，此编写器以对称方式正确编码空白空间，以供 XmlReader.Create 读取器读取，而无需更改属性值。

这里要注意的另一件事是，该解决方案完全封装了我的代码中的编码，因为读写器在读写时透明地执行编码和解码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:12:49.127

乍一看似乎`XmlTextReader`不**符合**W3C 建议。参见[推荐](http://www.w3.org/TR/2004/REC-xml-20040204/#AVNormalize)中关于属性值归一化的部分，特别是

> 对于空格字符（#x20、#xD、#xA、#x9），将空格字符（#x20）附加到标准化值。

因此，您没有预料到的行为（看到空格而不是选项卡）实际上是正确的推荐行为。

我不知道为什么`XmlTextReader`会这样（文档中没有任何内容），但是您似乎已经确定了正确的解决方法 - 将属性编码为`&#x9;`。在这种情况下，规范化的字符串将包含制表符本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:18:45.050

查看[XmlReaderSettings.ComformanceLevel](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.conformancelevel.aspx)。特别是，这个描述：

> 请注意，默认情况下，由 Create 方法创建的 XmlReader 对象比 XmlTextReader 类更符合要求。以下是未在 XmlTextReader 上启用的一致性改进，但默认情况下可用于由 Create 方法创建的阅读器

# javascript - javascript数组映射方法中的break语句

> ID：12260529
> 
> 赞同：167
> 
> 时间：2012-09-04T09:30:01.040
> 
> 标签：javascript

> **可能重复：**
> [如何像调用break一样短路Array.forEach？](https://stackoverflow.com/questions/2641347/how-to-short-circuit-array-foreach-like-calling-break)

有没有办法在满足我的条件后打破数组映射方法？我尝试了以下抛出的`"Illegal Break Statement" Error.`方法 这是我想出的一些随机示例。

```
var myArray = [22,34,5,67,99,0];

var hasValueLessThanTen = false;

myArray.map(function (value){
    if(value<10){
      hasValueLessThanTen = true;
      break;
    }
  }
); 
```

我们可以使用`for`循环，但我想知道我们是否可以使用`map`方法完成相同的操作？

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2012-09-04T09:32:50.847

使用内置的[`Array.prototype.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map). `for`但是，如果您不打算使用[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)任何值，则可以使用简单的循环：

```
var hasValueLessThanTen = false;
for (var i = 0; i < myArray.length; i++) {
  if (myArray[i] < 10) {
    hasValueLessThanTen = true;
    break;
  }
} 
```

或者，如建议的那样`@RobW`，用于[`Array.prototype.some`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)测试是否存在至少一个小于 10 的元素。当找到与您的函数匹配的某个元素时，它将停止循环：

```
var hasValueLessThanTen = myArray.some(function (val) { 
  return val < 10;
}); 
```

# javascript - jQuery平滑滚动问题，页面“闪烁”一秒钟

> ID：12260530
> 
> 赞同：1
> 
> 时间：2012-09-04T09:30:02.617
> 
> 标签：javascript, jquery, css

我有一个平滑的滚动效果：

```
jQuery('html,body').animate({scrollTop:scrollTarget}, 1000, "swing"); 
```

它工作正常，但是当多个项目被按下时，有时它会闪烁页面内容一秒钟......你可以尝试这个链接：[http](http://teothemes.com/wp/vptest/) ://teothemes.com/wp/vptest/ ，点击服务，然后在联系人上单击 10 次...当您锁定在联系人部分时，尝试单击服务，您会看到服务区域显示一秒钟，这不好，我想摆脱它。

理想情况下，我希望效果以某种方式延迟执行..我现在有一个条件

```
if(parseInt(scrollTarget) !== parseInt(jQuery(window).scrollTop())) { 
```

以防止滚动到同一区域，但是如果您在服务中单击“联系人”5 次，理想情况下，它应该第一次转到“联系人”，第二次应该在第一次执行后获取正确的滚动顶部和滚动目标而不是点击它时的那个。

任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:04:12.630

jQuery`preventDefault()`方法可以解决问题！

# django - Django：使用 SessionWizardView 设置表单

> ID：12260532
> 
> 赞同：0
> 
> 时间：2012-09-04T09:30:06.123
> 
> 标签：django, forms, get, wizard, formset

我对 Django 中的表单集有疑问。我在网上找不到答案。

[https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/)

我正在尝试使用此文档制作示例，但我不知道如何更改默认模板。

我知道我应该`get_template_names()`在`ContactWizard`课堂上使用，但我不知道这个方法应该是什么样子。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:58:55.563

这`get_template_names()`应该根据您的逻辑（例如步骤、表单等）返回模板名称。

例如，根据步骤或步骤编号等的形式返回不同模板的示例模板。

```
 def get_template_names(self):
    if issubclass(self.get_form(str(self.steps.current)).__class__, BaseModelFormSet):
        return 'wz_formset_template.html' #depending upon form type
    else if self.steps.current == 2 :  #depending upon step
        return 'wz_step_2_template.html' 
    return 'wz_form_template.html'   #default template 
```

# jasperserver - 编写自定义身份验证过滤器 Jasperserver 4.7

> ID：12260533
> 
> 赞同：0
> 
> 时间：2012-09-04T09:30:06.810
> 
> 标签：jasperserver

我正在研究 jasperserver 安全性。我们的场景是，我们的报告托管在 jasper 服务器中。我们在 JSF 中开发了我们的 Web 应用程序。现在，我们要从我们的 jsf 应用程序调用驻留在 jasper 服务器中的报告。

问题是我们的用户集与 jasperserver 不同。我正在研究 jasper 服务器安全性并得出结论，它使用 ACEGI 安全性，我们还可以编写自定义身份验证过滤器。任何人都知道编写它的确切过程是什么？任何指针都会有所帮助。

最好的问候，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:32:06.967

我正在解决类似的问题，我发现了这个：

[http://community.jaspersoft.com/wiki/adding-authentication-filters-and-using-profile-attributes](http://community.jaspersoft.com/wiki/adding-authentication-filters-and-using-profile-attributes)

# ruby - 在 RSpec-2.11 中使用隐含的 `subject` 和 `expect`

> ID：12260534
> 
> 赞同：42
> 
> 时间：2012-09-04T09:30:08.323
> 
> 标签：ruby, syntax, rspec, rspec2

使用 rspec-2.11 中的新`expect`语法，如何使用隐式`subject`？有没有比明确引用更好的方法`subject`，如下所示？

```
describe User do
  it 'is valid' do
    expect(subject).to be_valid    # <<< can `subject` be implicit?
  end
end 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-04T14:55:32.843

如果您将 RSpec 配置为禁用`should`语法，您仍然可以使用旧的单行语法，因为这不涉及`should`添加到每个对象：

```
describe User do
  it { should be_valid }
end 
```

我们[简要讨论](https://github.com/rspec/rspec-expectations/pull/119#issuecomment-4311115)了另一种单行语法，但因为不需要它而决定反对它，而且我们觉得它可能会增加混乱。但是，如果您更喜欢它的读取方式，您可以自己轻松地添加它：

```
RSpec.configure do |c|
  c.alias_example_to :expect_it
end

RSpec::Core::MemoizedHelpers.module_eval do
  alias to should
  alias to_not should_not
end 
```

有了这个，你可以这样写：

```
describe User do
  expect_it { to be_valid }
end 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-20T19:53:32.317

使用 Rspec 3.0，您可以`is_expected`按照[此处](https://www.relishapp.com/rspec/rspec-core/v/3-0/docs/subject/one-liner-syntax)所述使用。

```
describe Array do
  describe "when first created" do
    # Rather than:
    # it "should be empty" do
    #   subject.should be_empty
    # end

    it { should be_empty }
    # or
    it { is_expected.to be_empty }
  end
end 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-04T09:30:08.323

可以使用新的命名主题语法，尽管它不是隐含的。

```
describe User do
  subject(:author) { User.new }

  it 'is valid' do
    expect(author).to be_valid
  end
end 
```

# jasper-reports - 使用 Table 组件：如何避免显示相同数据的多个副本

> ID：12260537
> 
> 赞同：0
> 
> 时间：2012-09-04T09:30:27.853
> 
> 标签：jasper-reports, ireport

*iReport*正在为我提交的查询生成多个（相同的）表。

我正在尝试将**漫画**数据库表中的所有数据提取到*表*组件中。我成功地这样做了，但是正在使用相同的数据创建多个表。

```
 <?xml version="1.0" encoding="UTF-8"?><jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="mangaReport" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="43bb2d5b-ad44-48ca-bcc9-bec319a36466">
<property name="ireport.zoom" value="1.0"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="0"/>
<style name="table">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 1">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<subDataset name="New Dataset 1" uuid="820ac89b-615e-453d-9593-9deeb8c44a87">
    <queryString language="SQL">
        <![CDATA[select * from manga]]>
    </queryString>
    <field name="name" class="java.lang.String"/>
    <field name="author" class="java.lang.String"/>
</subDataset>
<queryString language="SQL">
    <![CDATA[select * from manga]]>
</queryString>
<field name="name" class="java.lang.String"/>
<field name="author" class="java.lang.String"/>
<background>
    <band splitType="Stretch"/>
</background>
<title>
    <band height="39" splitType="Stretch"/>
</title>
<pageHeader>
    <band height="18" splitType="Stretch"/>
</pageHeader>
<columnHeader>
    <band height="31" splitType="Stretch"/>
</columnHeader>
<detail>
    <band height="125" splitType="Stretch">
        <componentElement>
            <reportElement uuid="4f76c19e-e304-45b3-a521-b30aa4ecb03e" key="table 1" style="table 1" x="185" y="34" width="360" height="50"/>
            <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                <datasetRun subDataset="New Dataset 1" uuid="9f479053-64b3-49a7-a986-2415ac20385f">
                    <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                </datasetRun>
                <jr:column uuid="5b10c367-6de0-4799-8408-ad8c7dadd888" width="90">
                    <jr:columnHeader style="table 1_CH" height="30">
                        <staticText>
                            <reportElement uuid="7470c697-d500-46e0-88c1-d42883576ef1" x="0" y="0" width="90" height="30"/>
                            <textElement/>
                            <text><![CDATA[name]]></text>
                        </staticText>
                    </jr:columnHeader>
                    <jr:detailCell style="table 1_TD" height="20">
                        <textField>
                            <reportElement uuid="32a30162-dca0-4bda-8ef2-ae8f41d4340a" x="0" y="0" width="90" height="20"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column uuid="3f6fac9d-5a87-4fee-ac81-51170b6d7481" width="90">
                    <jr:columnHeader style="table 1_CH" height="30">
                        <staticText>
                            <reportElement uuid="21335524-5b94-464b-83fc-36d7734596e4" x="0" y="0" width="90" height="30"/>
                            <textElement/>
                            <text><![CDATA[author]]></text>
                        </staticText>
                    </jr:columnHeader>
                    <jr:detailCell style="table 1_TD" height="20">
                        <textField>
                            <reportElement uuid="9765da67-b578-4bc3-b0f4-5878c64b9e66" x="0" y="0" width="90" height="20"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{author}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
            </jr:table>
        </componentElement>
    </band>
</detail>
<columnFooter>
    <band height="45" splitType="Stretch"/>
</columnFooter>
<pageFooter>
    <band height="54" splitType="Stretch"/>
</pageFooter>
<summary>
    <band height="42" splitType="Stretch"/>
</summary> 
```

我试图搜索论坛，但找不到解决方案。

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:18:31.297

这个问题的原因是*JR*引擎对表进行了两次迭代 - 第一次使用主数据源（报表的数据源）和***Detail***带，第二次使用*Table*组件的数据源。

*   例如，您可以删除主数据源并将*Table*组件放到***Summary***带区。

在这种情况下，您的模板将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport .. whenNoDataType="AllSectionsNoDetail" ..>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <subDataset name="New Dataset 1" uuid="820ac89b-615e-453d-9593-9deeb8c44a87">
        <queryString language="SQL">
            <![CDATA[select name, author from address]]>
        </queryString>
        <field name="name" class="java.lang.String"/>
        <field name="author" class="java.lang.String"/>
    </subDataset>
    <title>
        <band height="39" splitType="Stretch"/>
    </title>
    <detail>
        <band height="125" splitType="Stretch"/>
    </detail>
    <summary>
        <band height="63" splitType="Stretch">
            <componentElement>
                <reportElement uuid="4f76c19e-e304-45b3-a521-b30aa4ecb03e" key="table 1" style="table 1" x="131" y="0" width="360" height="50"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="New Dataset 1" uuid="9f479053-64b3-49a7-a986-2415ac20385f">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:column uuid="5b10c367-6de0-4799-8408-ad8c7dadd888" width="90">
                        <jr:columnHeader style="table 1_CH" height="30">
                            <staticText>
                                <reportElement uuid="7470c697-d500-46e0-88c1-d42883576ef1" x="0" y="0" width="90" height="30"/>
                                <textElement/>
                                <text><![CDATA[name]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="20">
                            <textField>
                                <reportElement uuid="32a30162-dca0-4bda-8ef2-ae8f41d4340a" x="0" y="0" width="90" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="3f6fac9d-5a87-4fee-ac81-51170b6d7481" width="90">
                        <jr:columnHeader style="table 1_CH" height="30">
                            <staticText>
                                <reportElement uuid="21335524-5b94-464b-83fc-36d7734596e4" x="0" y="0" width="90" height="30"/>
                                <textElement/>
                                <text><![CDATA[author]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="20">
                            <textField>
                                <reportElement uuid="9765da67-b578-4bc3-b0f4-5878c64b9e66" x="0" y="0" width="90" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{author}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </summary>
</jasperReport> 
```

在这种情况下，不要忘记将***whenNoDataType***报告的属性设置为**AllSectionsNoDetail** - 以避免隐藏***摘要***带。

* * *

*   另一种方式 - 您可以删除*表格*组件并使用***详细信息***带。

在这种情况下，模板将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <queryString language="SQL">
        <![CDATA[select name, author from address]]>
    </queryString>
    <field name="name" class="java.lang.String"/>
    <field name="author" class="java.lang.String"/>
    <title>
        <band height="39" splitType="Stretch"/>
    </title>
    <columnHeader>
        <band height="30">
            <staticText>
                <reportElement uuid="21335524-5b94-464b-83fc-36d7734596e4" style="table 1_CH" x="90" y="0" width="90" height="30"/>
                <textElement/>
                <text><![CDATA[author]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="7470c697-d500-46e0-88c1-d42883576ef1" style="table 1_CH" x="0" y="0" width="90" height="30"/>
                <textElement/>
                <text><![CDATA[name]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement uuid="9765da67-b578-4bc3-b0f4-5878c64b9e66" style="table 1_TD" x="90" y="0" width="90" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="32a30162-dca0-4bda-8ef2-ae8f41d4340a" style="table 1_TD" x="0" y="0" width="90" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{author}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

# drupal - 在 Mongo 数据库上使用 CMS

> ID：12260539
> 
> 赞同：1
> 
> 时间：2012-09-04T09:30:33.690
> 
> 标签：drupal, mongodb, joomla

我打算使用 MongoDB 来构建 CMS 应用程序。CMS 平台的两个选择是 Joomla 和 Drupal。而 Drupal 似乎有[http://drupal.org/project/mongodb](http://drupal.org/project/mongodb)支持。我无法为 Joomla 找到良好的支持。任何人都可以分享您在 MongoDB 上使用 Joomla 的经验/想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:09:32.700

对于 Joomla 看看：

*   [Joomla 和 Mongodb](http://de.slideshare.net/spacemonkeylabs/joomla-and-mongodb)（有点老）
*   [sml4joomla 库](https://github.com/spacemonkey/sml4joomla)

# java - 如何将 HttpServletRequest 转换为字符串？

> ID：12260540
> 
> 赞同：11
> 
> 时间：2012-09-04T09:30:37.663
> 
> 标签：java, servlets

如何转换`HttpServletRequest`为`String`？我需要解组，`HttpServletRequest`但是当我尝试解组时，我的程序会引发异常。

```
 javax.xml.bind.UnmarshalException
 - with linked exception:
[java.io.IOException: Stream closed]
        at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:197)
        at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:168)
        at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
        at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:184)
        at com.orange.oapi.parser.XmlParsing.parse(XmlParsing.java:33) 
```

我尝试了以下代码来解组`HttpServletRequest`​​ .

```
InputStreamReader is =
                new InputStreamReader(request.getInputStream());
InputStream isr = request.getInputStream();
ServletInputStream req = request.getInputStream(); 
```

我的解析器方法：

```
public root parse(InputStreamReader is) throws Exception {
        root mc = null;
        try {
            JAXBContext context = JAXBContext.newInstance(root.class);
            Unmarshaller um = context.createUnmarshaller();
            mc = (root) um.unmarshal(is);
        } catch (JAXBException je) {
            je.printStackTrace();
        }
        return mc;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T09:39:15.310

我的印象是，在您处理了请求并响应您的客户之后，您正试图从输入流中读取数据。你把你的代码放在哪里了？

如果要先处理请求，然后再进行解组，则需要先将输入流读入字符串。如果您处理的是小请求，这很好用。

我建议使用像 apache commons IOUtils 这样的东西来为你做这件事。

```
String marshalledXml = org.apache.commons.io.IOUtils.toString(request.getInputStream()); 
```

另请记住，您必须在 和 之间进行`request.getParameter(name)`选择`request.getInputStream`。你不能同时使用两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-29T13:40:41.270

```
String httpServletRequestToString(HttpServletRequest request) throws Exception {

    ServletInputStream mServletInputStream = request.getInputStream();
    byte[] httpInData = new byte[request.getContentLength()];
    int retVal = -1;
    StringBuilder stringBuilder = new StringBuilder();

    while ((retVal = mServletInputStream.read(httpInData)) != -1) {
        for (int i = 0; i < retVal; i++) {
            stringBuilder.append(Character.toString((char) httpInData[i]));
        }
    }

    return stringBuilder.toString();
} 
```

# asp.net-mvc-3 - Jquery 和 Ajax 调用无法正常工作

> ID：12260545
> 
> 赞同：0
> 
> 时间：2012-09-04T09:30:48.523
> 
> 标签：asp.net-mvc-3

嗨，我正在尝试显示选项卡并尝试获取选项卡的数据，使用下面的代码我设法显示选项卡，但我的控制器中没有调用 GetManufacturerProductsForCountry 操作。如果我的代码已磨损，请纠正我。

" %>

```
<%@ Import Namespace="EmsAdmin.Models" %> 
```

```
 <% foreach (var country in ((Country[])ViewData["countries"]))
       { %>
    <li><a href="#">
        <%: country.Name %></a> </li>
    <% } %>
</ul>
<div class="panes">

    <% foreach (var country in ((Country[])ViewData["countries"]))
       { %>
    <div class="pane">
        <div style="clear: both;">
            &nbsp;</div>
    </div>
    <div id="ProductCountry<%:country.Id %>">
        <script type="text/javascript">
            var taskInput = "";
            $.ajax({
                url: "/Manufacturers/GetManufacturerProductsForCountry/"+<%:Model.Id %>+<%:country.Id %>,
                type: 'get',
              success: function (data) {
                    taskInput = data;
                    $("#ProductCountry").html(data);

                }
            });
        </script>
    </div>
    <% } %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:57:58.777

我建议在页面加载时调用 ajax 一次，它们为每个插入 html。太多的ajax调用可能不起作用，我相信那里有一个限制。

如果这确实有效，您在 "> 中的 id 与 $("#ProductCountry").html(data); 不匹配

此外，为了安全起见，您不能在 MVC 中默认执行 ajax GET，而是使用 [HttpPost] 装饰您的控制器方法并在 ajax 调用中指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:30:52.673

看起来 jQuery 对象中的 id 是错误的。

尝试

```
 $("[id*=" + "ProductCountry" + "]").html(data); 
```

代替

```
 $("#ProductCountry").html(data); 
```

# asp.net-mvc - 如何在 MVC asp.net c# 的现有数据库中添加新表？

> ID：12260546
> 
> 赞同：0
> 
> 时间：2012-09-04T09:30:49.450
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我创建了一个数据库，我希望模型类将创建的表应该附加到现有数据库而不再次创建整个数据库。

在不删除并再次创建整个数据库的情况下这是否可能？

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T08:10:38.713

我知道这有点晚了，但这可能会有所帮助：

[http://www.asp.net/mvc/tutorials/mvc-5/introduction/adding-a-new-field](http://www.asp.net/mvc/tutorials/mvc-5/introduction/adding-a-new-field)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:33:57.977

是的。生成用于删除/重新创建整个数据库的 SQL 查询（但显然不要执行它）。

然后搜索查询以查找提及您的新表的任何内容。

通常你会得到：

*   创建表语句
*   为您的表创建主键
*   任意数量的外键创建（取决于您使用的数量）

将所有这些片段（按顺序！）粘贴到新查询中，然后只执行该查询。

# drupal - 在 drupal 7.15 中无法从管理员端访问配置链接

> ID：12260558
> 
> 赞同：0
> 
> 时间：2012-09-04T09:31:11.120
> 
> 标签：drupal, drupal-7

我是drupal的新手，我正在尝试从管理员的配置链接配置画廊模块，但我无法访问该链接我得到了一个空白页面，其中没有显示drupal 7中的任何缓存问题（如果有的话）请告诉我。请告诉我如何它发生了提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:35:25.483

第一反应：`cache clear`

也看看 apache 日志

# jquery - 如何在 jQuery 中缩放 100% 高度的宽度？

> ID：12260561
> 
> 赞同：0
> 
> 时间：2012-09-04T09:31:17.217
> 
> 标签：jquery, height, scale

我正在创建一个 jQuery 在线翻页，并希望我的翻页可以缩放以适应浏览器窗口。我想在我的 CSS 中做 100% 的高度，但想在宽度上保持正确的比例，所以不能做 100% 的宽度。

有没有办法在保持我翻页的正确宽度的同时做到 100% 高度，如果有帮助的话，它将是 2 个 A4 页面，这是我使用 atm 设置宽度的代码。

```
 $(function() {
     $('#mybook').booklet({
         width:  1000,
         height: 650
     });
 }); 
```

我正在使用小册子 jquery 插件。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:38:08.003

尝试将 height 与 width() * 0.65 相乘以保持纵横比。

```
var width = 1000,
    height = width * 0.65; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:04:05.297

在你的代码中试试这个：

```
$('#mybook').css('width', $(window).width())
            .css('height',($(window).width()*0.65)); 
```

或者

```
$('#mybook').css('width', $(window).width())
            .css('height', $(window).height()); 
```

# php - 如何在 cakephp 中创建具有自定义名称的表单元素？

> ID：12260562
> 
> 赞同：0
> 
> 时间：2012-09-04T09:31:18.467
> 
> 标签：php, html, forms, cakephp

我正在处理现有项目。有很多这样的形式：

```
<?php echo $form->create('MyForm', array('id' => 'MyFormId')); ?>

  <?php echo $form->input('User.0.username', array( 'label' => false, )); ?>
  <?php echo $form->input('User.0.location', array( 'label' => false, )); ?>

<?php echo $form->end(); ?> 
```

它正在生成这样的表单元素：

```
<input type="text" id="User0Username" name="data[User][0][username]">
<input type="text" id="User0Location" name="data[User][0][location]"> 
```

但我希望它们看起来像这样：

```
<input type="text" id="User0Username" name="User_0_username">
<input type="text" id="User0Location" name="User_0_location"> 
```

是否有任何`$form->create();`功能选项来获取此 html 而不是更改我的表单元素？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:40:10.803

```
The Form helper is pretty smart. Whenever you specify a field name with the form helper methods, it'll automatically use the current model name to build an input with a format like the following:

    <input type="text" id="ModelnameFieldname" name="data[Modelname][fieldname]"> 
```

您可以通过传入 Modelname.fieldname 作为第一个参数来手动指定模型名称。

```
echo $this->Form->input('Modelname.fieldname'); 
```

如果您需要使用相同的字段名称指定多个字段，从而创建一个可以使用 saveAll() 一次性保存的数组，请使用以下约定：

```
<?php
echo $this->Form->input('Modelname.0.fieldname');
echo $this->Form->input('Modelname.1.fieldname');
?>

<input type="text" id="Modelname0Fieldname" name="data[Modelname][0][fieldname]">
<input type="text" id="Modelname1Fieldname" name="data[Modelname][1][fieldname]"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:57:05.447

我总是使用括号版本 - 即使是 jquery ajax 提交。顺便说一句，它是这样工作的：

```
var ids = new Array();
var myCheckboxes = new Array();
$("#ProductCalculation input:checked").each(function() {
    ids.push($(this).val());
});
...
$.ajax({
    dataType: 'json',
    type: "post",
    data: {
        'data[Product][product_calculation_id]': ids, 
        'data[Product][brand_id]': brands, 
        'data[Category][Category]': categories, 
        'data[Form][connect]': c
    },
    url: targeturl,
    beforeSend: function(xhr) {
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    },
    success: function(html) {
        ...
    }
}); 
```

您可以手动抓取表单元素。不理想，但它不会破坏蛋糕式编码

我也确信可以编写一个 jquery 插件以某种方式自动实现这一点。这实际上是一件非常有趣的事情。

# oracle-coherence - 一致性 POF 注释实现的问题

> ID：12260563
> 
> 赞同：2
> 
> 时间：2012-09-04T09:31:20.070
> 
> 标签：oracle-coherence

我有一个 coherence 3.7 集群。我正在尝试使用简单的 java 应用程序客户端连接到它。如果我尝试使用 java 序列化实现并禁用 POF，它对我来说很好。但是当我启用 POF 时，我开始出现异常。下面是堆栈跟踪。我在客户端和集群端都有我的 pof-config。关于可能导致此问题的任何提示将非常有帮助。

```
2012-09-04 13:40:04.811/1.531 Oracle Coherence GE 3.7.1.4 <Error> (thread=ExtendTcpCacheService:TcpInitiator, member=n/a): An exception occurred while encoding a OpenConnectionRequest for Service=ExtendTcpCacheService:TcpInitiator: java.lang.IllegalArgumentException: unknown user type: com.tangosol.util.UUID
at com.tangosol.io.pof.ConfigurablePofContext.getUserTypeIdentifier(ConfigurablePofContext.java:430)
at com.tangosol.io.pof.ConfigurablePofContext.getUserTypeIdentifier(ConfigurablePofContext.java:419)
at com.tangosol.coherence.component.net.extend.Channel.getUserTypeIdentifier(Channel.CDB:7)
at com.tangosol.io.pof.PofBufferWriter.writeUserType(PofBufferWriter.java:1671)
at com.tangosol.io.pof.PofBufferWriter.writeObject(PofBufferWriter.java:1623) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:09:44.673

根据您收到的消息，tcp 发起程序失败，因为它无法序列化 Coherence 类型（*com.tangosol.util.UUID*）。您是否在 pof 配置文件中包含了默认 pof 配置？

# vb.net - 我可以在九十度渲染我的 Infragistics UltraWinGrid 列标题吗？

> ID：12260573
> 
> 赞同：0
> 
> 时间：2012-09-04T09:31:41.190
> 
> 标签：vb.net, formatting, ultrawingrid

我在使用 Infragistics UltraWinGrid 渲染的表中有很多细列。

我可以以九十度显示列标题，以便它们可以很长吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:59:36.070

诺金斯，

是的，您可以以这种方式显示您的标题。您可以在下面找到旋转标题的三种可能性，您应该选择最适合您需求的一种。我正在处理 UltraGrid 控件的 InitializeLayout 事件，如下所示：

```
`    Private Sub UltraGrid1_InitializeLayout(sender As System.Object, e As Infragistics.Win.UltraWinGrid.InitializeLayoutEventArgs) Handles UltraGrid1.InitializeLayout
    'Create your own Vertical Orientation (1)
    e.Layout.Override.ColumnHeaderTextOrientation = New Infragistics.Win.TextOrientationInfo(0, Infragistics.Win.TextFlowDirection.Vertical)
    'Create your own Horizontal Orientation, rotating the headers (2)
    e.Layout.Override.ColumnHeaderTextOrientation = New Infragistics.Win.TextOrientationInfo(90, Infragistics.Win.TextFlowDirection.Horizontal)
    'Create your own Horizontal Orientation, rotating the headers into the opposite direction (3)
    e.Layout.Override.ColumnHeaderTextOrientation = New Infragistics.Win.TextOrientationInfo(-90, Infragistics.Win.TextFlowDirection.Horizontal)
End Sub` 
```

# firefox - 具有生存时间价值的 Firefox 附加简单存储？

> ID：12260575
> 
> 赞同：0
> 
> 时间：2012-09-04T09:31:44.860
> 
> 标签：firefox, firefox-addon, local-storage, firefox-addon-sdk

有没有一种简单的方法可以在 Firefox SDK 插件中本地存储带有 TTL 的 JSON 值？

据我所知，Firefox 强迫你使用他们的`'simple-storage'`库。我不能使用第三方库，例如[jStorage](http://goo.gl/yEUYg)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:02:49.517

不，`simple-storage`DOM Storage 是完全不同的东西，这意味着你不能使用像 jStorage 这样的库，它是用于 DOM Storage 的。

再说一次，存储 JSON 和实现 TTL 很简单，可以自己实现。对于 JSON，您使用[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)和[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。对于 TTL，您只需将 TTL 值存储在某处并在必要时查找它们。像这样的东西：

```
var AdvancedStorage = {
  _storage: require("simple-storage").storage,

  // Keep TTL data in a special storage field
  _ttlData: null,
  _readTTLData() {
    if (this._storage._ttl)
      this._ttlData = JSON.parse(this._storage._ttl);
    else
      this._ttlData = {};
  },
  _saveTTLData() {
    this._storage._ttl = JSON.stringify(this._ttlData);
  },

  // Special data manipulation functions
  set: function(key, value, options) {
    this._storage[key] = JSON.stringify(value);
    this.setTTL(key, options && "TTL" in options ? options.TTL : 0);
  },

  get: function(key, default) {
    if (!this._storage.hasOwnProperty(key))
      return default;

    // Check whether setting has expired
    if (!this._ttlData)
      this._readTTLData();
    if (this._ttlData.hasOwnProperty(key) && this._ttlData[key] <= Date.now())
      return default;

    return JSON.parse(this._storage[key]);
  },

  deleteKey: function(key) {
    delete this._storage[key];
  },

  // Setting the TTL value
  setTTL(key, ttl) {
    if (!this._ttlData)
      this._readTTLData();
    if (ttl > 0)
      this._ttlData[key] = Date.now() + ttl;
    else
      delete this._ttlData[key];
    this._saveTTLData();
  }
}; 
```

我没有测试此代码，但这应该是实现此类功能所需的几乎所有代码。

# elisp - “kill-ring-save”的建议

> ID：12260577
> 
> 赞同：2
> 
> 时间：2012-09-04T09:31:50.880
> 
> 标签：elisp

我想在允许用户复制文本之前评估某些条件。据我所知，我需要一个建议`"kill-ring-save"`。如果条件不满足，我需要忽略用户复制该文本的请求，如果满足则允许它。我怎样才能做到这一点？

（更新）——关于约束的更多信息：仅在 Emacs 的特定模式（例如 NXML 模式）中，应应用此建议并且仅在满足一个/多个特定条件时应用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:56:50.607

快速概念验证；你不知道你的约束是什么，所以这必然是模糊/无用的。

```
(defvar moo nil)

(defadvice kill-ring-save (around kill-ring-check-constraints activate compile)
  "If in `nxml-mode', don't save to kill ring if `moo' is `nil'."
  (if (and (eq major-mode 'nxml-mode) (null moo))
    (message "Not copied.")
   ad-do-it) ) 
```

为了回应下面的评论，添加了额外的主要模式约束。如果您希望在每种模式下都这样做，只需取出模式检查即可。

# jquery - Twitter小部件与jquery ui手风琴冲突

> ID：12260578
> 
> 赞同：0
> 
> 时间：2012-09-04T09:31:57.883
> 
> 标签：jquery, jquery-ui, twitter, widget

我有以下代码：

```
<script src="http://widgets.twimg.com/j/2/widget.js"></script>

<script>

new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 30000,
  width: 250,
  height: 350,
  theme: {
    shell: {
      background: '#5785BC',
      color: '#eff4fa',
    },
    tweets: {
      background: '#ffffff',
      color: '#424242',
      links: '#2480bd'
    }
  },
  features: {
    scrollbar: false,
    loop: false,
    live: false,
    behavior: 'all'
  }
}).render().setUser('Sometwitterpage').start();

</script>
</div>
<style type="text/css">
#twtr-widget-1 {float:right; border:solid 10px #e6edf5; }

</style> 
```

它与 jquery UI 手风琴在同一页面上，由于某种原因它会阻止手风琴工作。我花了好几个小时看看是什么弄坏了手风琴。仅当包含[http://widgets.twimg.com/j/2/widget.js](http://widgets.twimg.com/j/2/widget.js)时，手风琴才会中断。该文件被压缩，所以我不知道从哪里开始。有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:28:55.813

```
<script type="text/javascript">

  $.noConflict();
  jQuery(document).ready(function($) {
    // Code for accordion here.
  });
  // Code for twitter here.

</script> 
```

它是这样工作的，但有什么办法可以让我看到源代码 - 你有可以分享的网址吗？然后我们可以更好地解决相关代码的放置位置......

******更新******

我在这里更新，因为这篇文章有点混乱，聊天不起作用等等。所以，为了“包含”信息..

您发布到 jsfiddle的内容中没有`$(document).ready(function(){})`，`<head>`因此您可以尝试从...调用 twitter 小部件

```
<body onload="new TWTR.Widget({}).render().setUser('Sometwitterpage').start();"> 
```

*   最好编写一个可以从 onload 调用的函数，并且该函数包含对新 twitter 小部件的调用。

*   onload 只会在所有内容、所有图像等都加载完毕后触发，因此您的手风琴应该已经在工作，然后您可以调用 twitter 小部件。然而，大概用户随后会看到 twitter 小部件“出现”为页面的添加元素。

info re以及与此处 `onload="myFunc()"`相比的差异... [onload() 和 $.ready 之间的差异？](https://stackoverflow.com/questions/4395780/difference-bw-onload-and-document-readyfunction)`$(document).ready()`

看看情况如何——如果没有，我们会想别的办法。

小号

******更新2******

好的，所以如果您无权访问该`<body>`标签，请尝试以下操作：

在手风琴块中：

```
<div id="accordion">
    <h3><a href="#">First header</a></h3>
    <div>First content</div>
    <h3><a href="#">Second header</a></h3>
    <div>Second content</div>
</div>

<script type="text/javascript">

  $.noConflict();
  jQuery(document).ready(function($) {
    // Code for accordion here eg...
       $('.accordion .head').click(function() {
    $(this).next().toggle('slow');
    return false;
   }).next().hide();
  });

</script> 
```

然后在带有 twitter 小部件的块中：

```
<script type="text/javascript">

  //your original twitter widget code
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 30000,
  width: 250,
  height: 350,
  theme: {
    shell: {
      background: '#5785BC',
      color: '#eff4fa',
    },
    tweets: {
      background: '#ffffff',
      color: '#424242',
      links: '#2480bd'
    }
  },
  features: {
    scrollbar: false,
    loop: false,
    live: false,
    behavior: 'all'
  }
}).render().setUser('Sometwitterpage').start();

</script> 
```

看看情况如何...

****更新3****

在`<head>`您在 jsfiddle 上发布的内容中，包括以下内容：

```
<script type="text/javascript" src="http://www.somewebsite.com/scripts/jquery/jquery-ui-1.8.19.custom.min.js?m=20120904100316"></script>

<script type="text/javascript" src="http://www.somewebsite.com/scripts/jquery/jquery.prosteps.js?m=20120904100316"></script>
<script type="text/javascript" src="http://www.somewebsite.com/scripts/jquery/jquery.boxy.js?m=20120904100316"></script>
<script type="text/javascript" src="http://www.somewebsite.com/scripts/jquery/jquery.scroll-To.js?m=20120904100316"></script>
<script type="text/javascript" src="http://www.somewebsite.com/scripts/jquery/jquery.hoverIntent.js?m=20120904100316"></script>
<script type="text/javascript" src="http://www.somewebsite.com/scripts/jquery/jquery.jqzoom1.0.1.js?m=20120904100316"></script>
<script type="text/javascript" src="http://www.somewebsite.com/scripts/jquery/jquery.tools.scrollable.min.js?m=20120904100316"> 
```

您是否可以选择打开/关闭这些功能 - 例如，如果您不打算使用可滚动的 jquery 工具，请将其关闭 - 即，不要包含源 .js 文件。我的猜测是问题很可能来自冲突的变量，因此您可以尝试通过关闭/打开各种脚本来隔离它。摆脱过剩是一个明确的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:38:12.397

可能有点简单 - 甚至可能不是最佳实践 - 但您是否尝试过更改“包含”顺序 - 大概您有一个

```
<script src="yourSource/jquery-ui.js"></script> 
```

我过去曾经 - 更改顺序以首先包括另一个，它开始工作。不太令人满意，因为这实际上并不能确定问题，但它可能会让你再次滚动......

小号

# c# - 空白转换为矩形

> ID：12260581
> 
> 赞同：0
> 
> 时间：2012-09-04T09:32:12.647
> 
> 标签：c#

当我将此页面的第一段从浏览器复制到 (محمد بصل) 下的记事本时，我看到记事本中的空格替换为矩形： [http ://www.shorouknews.com/news/view.aspx?cdate =03092012&id=73df0e96-a9d8-44a1-83a8-77b0daf314a7](http://www.shorouknews.com/news/view.aspx?cdate=03092012&id=73df0e96-a9d8-44a1-83a8-77b0daf314a7) 如何在 C# 代码中将其转换为正确插入 SQL Server 表中的空格？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:37:30.167

问题可能是源网页中使用的字符不受记事本使用的字体支持。只要字符代码由所有东西（您的 IDE、DB 库等）维护，就可以了。当然，这是一个假设。我自己还没有尝试过 Visual Studio 的扩展字符支持。

# c# - Visual Studio 2010 中的 Sharepoint 列表适配器

> ID：12260583
> 
> 赞同：0
> 
> 时间：2012-09-04T09:32:18.310
> 
> 标签：c#, visual-studio-2010, sharepoint-2010, ssis

首先，我想说我对`SharePoint`and非常陌生`SSIS`。

我正在尝试创建一个`SSIS`包，`VS2010`该包从远程 SQL 服务器获取行并将其推送到（也是远程）Sharepoint 库。

到目前为止，我设法在我的 VS2010 上安装并使用商业智能设计 SSIS 包（感谢 SQL server 2012 Standard 180 试用版）。我还发现了 SharePoint 列表适配器，但根据我的阅读，它们仅在 VS2008 中可用。

所以，我想知道是否：

```
1\. Is it possible to achieve this (SQL -> SSIS Package -> Upload/Push to Sharepoint)
2\. Can I use SSIS SharePoint Tools in VS2010?
3\. (Edit! Important) Is uploading Shared Documents in SharePoint Library achieved in the same way as publishing lists ? 
```

我找到了对我的 #1 问题的（不太令人满意的）答案，它是从 2011 年开始的，所以我希望从那时起可能会出现一些解决方案：[Visual Studio 2010 中的 Sharepoint Development](https://stackoverflow.com/questions/5557861/sharepoint-development-in-visual-studio-2010)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:49:30.080

免责声明：我对 SSIS 了解不多。

但是，如果 SSIS 允许您“为每个返回的 SQL 行运行一段自定义代码”，那么您可以使用 SharePoint 2010[客户端对象模型](http://msdn.microsoft.com/en-us/library/ee539976.aspx)在远程服务器上为每个 SQL 行创建一个 SharePoint 列表项。

这*不需要*在运行 SSIS 代码的计算机上完全安装 SharePoint。它只需要几个 DLL，`Microsoft.SharePoint.Client.dll`并且`Microsoft.SharePoint.Client.Runtime.dll`. 您可以从 SharePoint 服务器（位于 C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI）复制这些内容，或者我相信您可以安装[SharePoint Foundation 2010 Client Object Model Redistributable](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=b4579045-b183-4ed4-bf61-dc2f0deabe47)。

# mahout - mahout 分类 文本 输入 矢量化

> ID：12260585
> 
> 赞同：1
> 
> 时间：2012-09-04T09:32:29.480
> 
> 标签：mahout

我正在尝试用 mahout 构建分类器。模型建立后。我必须将目标文档“提供”给模型并获得分类结果。

我检查了 mahout 源代码中的测试用例，它使用具有固定数量字段的 DenseVector。但是，我使用 mahout 对文本文档进行分类，输入是一些字符串（或包含字符串的数组）。如何将其转换为有效的“矢量”实例。

我尝试了 StaticWordEncoder 和 RandomAccessSparseVector，但结果不正确。无法弄清楚为什么。有点绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:35:45.327

您必须将文档解析为单词并从中填充向量。

我建议在尝试之前阅读诸如[Mahout In Action之类的内容以获得更多背景知识。](https://rads.stackoverflow.com/amzn/click/com/1935182684)

# c# - 以编程方式传递参数并在水晶报表中显示

> ID：12260586
> 
> 赞同：3
> 
> 时间：2012-09-04T09:32:34.847
> 
> 标签：c#, crystal-reports

我有一个水晶报告，我在其中以编程方式设置数据源和参数。当我只在报告中显示常规数据时，这很有效。但是，当我尝试在报告标题中显示参数值（它是一个日期）时，系统会提示我输入参数。关于造成这种情况的任何想法？我是水晶报告的新手，所以这可能是一个非常简单的问题。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Collections;
using System.Data.SqlClient;
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;

namespace CrystalReportsTestApp
{
    public partial class ReportForm : Form
    {
        ReportDocument report = new ReportDocument();

        public ReportForm()
        {
            InitializeComponent();           
        }

        private void ConfigureCrystalReports()
        {
            string reportPath = "mypath\\CrystalReport1.rpt";
            report.Load(reportPath);
        }

        private void RunReportButton_Click(object sender, EventArgs e)
        {
            DateTime date = dateTimePicker1.Value;

            DataSet reportData = new DataSet();

            SqlConnection conn = null;
            SqlDataAdapter da = null;

            try
            {
                conn = new SqlConnection(connectionString);
                conn.Open();
                da = new SqlDataAdapter();

                SqlCommand cmd = new SqlCommand("cms.GetActiveEntityAccounts", conn);
                cmd.CommandType = CommandType.StoredProcedure;

                cmd.Parameters.Add("@EndDate", SqlDbType.DateTime).Value = date;

                da.SelectCommand = cmd;
                da.Fill(reportData, "DataTable1");

            }
            finally
            {
                if (conn != null)
                {
                    conn.Close();
                }
            }

            report.SetDataSource(reportData);
            report.SetParameterValue("@EndDate", date);

            crystalReportViewer1.ReportSource = report;
            crystalReportViewer1.RefreshReport();         
        }

        private void ReportForm_Load(object sender, EventArgs e)
        {
            ConfigureCrystalReports();
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T08:29:20.327

问题是最后一行：

```
crystalReportViewer1.RefreshReport(); 
```

这会导致报表参数刷新，而不仅仅是报表数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T12:02:17.900

您需要将参数传递给 CrystalReportViewer 控件。之后使用下面的代码`report.SetDataSource(reportData);`。

```
CrystalDecisions.Shared.ParameterField parameterField = new CrystalDecisions.Shared.ParameterField();
parameterField.Name = "@EndDate";
//Create a new Discrete Value
CrystalDecisions.Shared.ParameterDiscreteValue parameterDiscreteValue = new CrystalDecisions.Shared.ParameterDiscreteValue();
parameterDiscreteValue.Value = date;

//Add the value
parameterField.CurrentValues.Add( parameterDiscreteValue );

//Add the parameter field
crystalReportViewer1.ParameterFields.Add( parameterField );
crystalReportViewer1.ReportSource = report;
crystalReportViewer1.RefreshReport(); 
```

# authentication - 通过 IP 地址访问站点时 Kerberos 失败

> ID：12260587
> 
> 赞同：8
> 
> 时间：2012-09-04T09:32:35.923
> 
> 标签：authentication, ubuntu-10.04, kerberos

通过 IP 地址访问受 Kerberos 保护的站点时出现问题。例如：

`http:/10.10.1.x:3001/`失败。

`http:/my-host:3001/`sso 成功完成。

Apache错误日志说：

> src/mod_auth_kerb.c(1261)：[client 10.10.1.x] 获取 HTTP@10.10.1.x [client 10.10.1.x] gss_acquire_cred() 的凭据失败：未指定的 GSS 失败。次要代码可能会提供更多信息（未找到键表条目）
> 
> src/mod_auth_kerb.c(1261): [client 10.10.1.x Acquiring creds for HTTP@my-host [debug] src/mod_auth_kerb.c(1407): [client 10.10.1.x] 使用 KRB5 GSS 验证客户端数据-API [debug] src/mod_auth_kerb.c(1423): [client 10.10.1.x] 验证返回码 0

如您所见，Kerberos 尝试查找`HTTP@10.10.1.x`或`HTTP@my-host`委托人。为这两个主体在 ActiveDirectory 中创建了虚拟帐户。在 keytab 文件中还包括它们：

```
KVNO Timestamp         Principal
---- ----------------- -----------------------------------------------------
   5 01/01/70 03:00:00 HTTP/10.10.1.x@MY_DOMAIN.LAN (ArcFour with HMAC/md5)

  11 09/04/12 12:03:01 HTTP/my-host@MY_DOMAIN.LAN (ArcFour with HMAC/md5) 
```

Kinit 对他们俩都有效。

服务器上的 Kerberos 配置：

```
 Krb5Keytab /etc/krb5.keytab
   AuthType Kerberos
   KrbMethodNegotiate On
   AuthName "Kerberos Login"
   KrbAuthRealms MY_DOMAIN.LAN
   KrbVerifyKDC Off
   KrbMethodK5Passwd On
   Require valid-user 
```

有人能猜到问题出在哪里吗？是否可以在 Kerberos SSO 中使用 IP 地址？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T10:00:10.043

Kerberos 不适用于 IP 地址，它仅依赖于域名和正确的 DNS 条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-08T21:59:05.203

在 Microsoft KB 文章中，它说这是设计使然：

[https://support.microsoft.com/en-ca/kb/322979](https://support.microsoft.com/en-ca/kb/322979)

以上知识库的标题为：使用IP地址连接SMB共享时不使用Kerberos

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-27T11:56:09.387

我意识到这是一个*非常*古老的线程，但它是任何相关搜索的首选。我认为值得注意的是，[微软最近添加了使用 IPv4 和 IPv6 的 Kerberos 客户端支持。](https://docs.microsoft.com/en-us/windows-server/security/kerberos/configuring-kerberos-over-ip)

> 从 Windows 10 版本 1507 和 Windows Server 2016 开始，可以将 Kerberos 客户端配置为支持 SPN 中的 IPv4 和 IPv6 主机名。
> 
> 为了减少禁用 NTLM 的影响，引入了一项新功能，允许管理员使用 IP 地址作为服务主体名称中的主机名。此功能通过注册表项值在客户端上启用。

由于这是客户端修复，因此您的 Kerberos 客户端必须运行适当版本的 Windows 并接收 TryIPSPN 注册表项。您的服务还必须在 Active Directory 中注册一个基于 IP 的 SPN。

# android - Android JsonArray Return and View with Table Layout

> ID：12260593
> 
> 赞同：0
> 
> 时间：2012-09-04T09:33:02.383
> 
> 标签：android, json, tablelayout

我想查看 JsonArray 响应并在 android 中使用表格布局查看。

Json Response 是这样的！

```
[{"id":1,"name":"hot drink"},{"id":2,"name":"cold drink"},{"id":3,"name":"myanmar food"},{"id":4,"name":"thai food"}] 
```

对于我的结果 XML 文件，我想看到这样的`TableLayout`

```
ID          Name
1           Hot Drink
2           Cold Drink
3           Food 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:00:47.653

```
String[] id,name;

JSONArray jsonarrayobj = new JSONArray(yourjsonvalue);

id = new String[jsonarrayobj.length()];
name = new String[jsonarrayobj.length()];

for(int i=0;i<jsonarrayobj.length();i++){

JSONObject jobj = jsonarrayobj.getJSONObject(i);

id[i] = jobj.getString("id");
name[i] = jobj.getString("name");
} 
```

> 现在您将拥有 id 和 name 数组中的值。
> 
> 现在，借助[此](http://wowjava.wordpress.com/2011/04/01/dynamic-tablelayout-in-android/)功能，您可以获得您所说的视图。

# django - Django enctype="multipart/form-data" 未设置 POST 数据

> ID：12260595
> 
> 赞同：3
> 
> 时间：2012-09-04T09:33:18.093
> 
> 标签：django, file-upload

我需要从输入文本中发送文件和一些数据。

这是我正在处理的表格：

```
 <form method="post" action="{% url catalog_create_ajax_upload %}" enctype="multipart/form-data" id="create-form">
        <input type="text" id="new-catalog-name" name="catalog_name" class="large-input" placeholder="catalog title" />
        <div id="new-catalog">
            <input type="file" name="file">
        </div>
    </form> 
```

发送时，我希望`request.POST['catalog_name']`有一个值，但整个 POST 属性都在一个空字典中。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:28:19.807

您似乎没有该表单中的提交按钮。大概你在页面的其他地方有一个，但它只会以自己的形式提交字段 - 将它移到`<form>...</form>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-19T17:36:16.867

> 确保您的视图功能应该像这样发布图像文件

```
def index(request):
    image = 'file' in request.FILES and request.FILES['file'] 
```

> 使用 request.FILES 而不是 request.POST

# javascript - 为什么这个按钮在 IE 中有效，而在 Firefox 中无效？

> ID：12260598
> 
> 赞同：0
> 
> 时间：2012-09-04T09:33:29.787
> 
> 标签：javascript, asp.net-mvc-3, internet-explorer, firefox, button

我有一个奇怪的问题，我不知道如何解决。此按钮在 IE 中完美运行，但在 Firefox 中无法正常运行。这是 HTML 代码：

```
<div class="divbutonSave" onclick="Save()" style="float: right;">
<span>Save</span>
</div> 
```

这是Javascript代码：

```
 function Save() {
var poz = '1';
var rowCount = dataTable.rows.length;
var ala0 = "";
for (var i = 1; i < rowCount; i++) {
var c = document.getElementById("chk " + i);
if (c.checked == 1)
ala0 += dataTable.rows[i].cells[1].innerText + "^";
var ala = ala0.substring(0, ala0.length - 1);
}
$.ajax({
url: '/ProjectAdministrator/ProjectAdministratorProject/Partners',
data: { pozActivity: poz, listapart: ala },
dataType: "Json",
type: "POST",
error: function () {
alert("Error");
},
success: function (data) {
window.close();
}
});
} 
```

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:35:51.767

我建议如果你想要一个按钮，你应该`button`在你的标记中使用 a，而不是`div`. 这样，您的标记将代表它的含义，并且它也可能具有正常工作的副作用。

# google-apps-script - 每次为 UI 编辑应用程序脚本代码时是否需要保存新版本？

> ID：12260601
> 
> 赞同：1
> 
> 时间：2012-09-04T09:33:42.543
> 
> 标签：google-apps-script, publish

按照谷歌应用脚​​本教程 - 构建用户界面 HTMLservice 部分

最初的简单 hello world 演示一切都很好 - 一个 java 脚本文件和一个 HTML 文件。

如果我将 HTML 正文编辑为 foo bar 并使用菜单项发布 - 然后更新 - 结果网页没有改变。

如果我在次要编辑后保存了新版本并发布了新版本，那么可以肯定的是，新的 HTML 会显示出来。

但我肯定不必在每次编辑后保存新版本......

是否有任何线索说明为什么“更新”（没有版本更改）可能不起作用 - 缓存？

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:56:16.107

好的，所以回答我自己的问题。

部署为 Web 应用程序对话框包含一个带有最新 URL 的文本字段，但下方有一小段文本显示

> 为您的最新代码测试 Web 应用程序

最新代码是一个链接，按下时会输出最新的 SAVE。文本字段中的 URL 是最新版本。

也许这可能是部署教程的一部分

[https://developers.google.com/apps-script/execution_web_apps](https://developers.google.com/apps-script/execution_web_apps)

问题解决了！

# java - processbuilder创建jar时失败

> ID：12260606
> 
> 赞同：1
> 
> 时间：2012-09-04T09:34:00.303
> 
> 标签：java, processbuilder

我正在通过 cmd 中的命令从类文件创建 jar 文件。工作正常。

```
C:\>cd \GenClass
C:\>path c:\Program Files\Java\jdk1.5.0_09\bin;%path%
C:\>echo Main-Class: myjar >manifest.txt
C:\>jar cvfm myjar.jar manifest.txt proxy/*.class 
```

但同样的事情我在 processbuilder 中失败了。

```
 ProcessBuilder pb1= new ProcessBuilder("cmd.exe", "/C", "jar cvfm contactproxy.jar manifest.txt proxy/*.class");
    pb1.directory(new File("D:\\GenClass"));
    pb1.environment().put("CLASSPATH", "D:\\java\\jdk1.5.0_14\\bin");

    java.lang.Process p1 = pb1.start();
    String line1;
    BufferedReader r1 = new BufferedReader(new InputStreamReader(p1.getInputStream()));
    while ((line1 = r1.readLine()) != null) {
    System.out.println(line1);
    }
    r1.close(); 
```

无法创建 jar。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:30:04.137

而不是“jar.exe”，写从 c:\java 开始的完整路径。

# authentication - Symfony2.1 - HWIOAuthBundle 和 google oauth 身份验证

> ID：12260613
> 
> 赞同：3
> 
> 时间：2012-09-04T09:34:23.643
> 
> 标签：authentication, symfony, oauth-2.0, symfony-2.1, hwioauthbundle

我正在尝试使用[HWIOAuthBundle](https://github.com/hwi/HWIOAuthBundle)设置 Symfony2.1来处理 google oauth 身份验证。

我已按照捆绑描述中的手动说明进行操作，但仍然缺少某些内容。当我访问需要经过身份验证的用户（或仅输入 url /connect/google）的操作时，我被重定向到 google 身份验证页面 - 这部分正在工作。但是在重定向回来之后（在登录到谷歌并同意共享我的数据之后）新用户没有在数据库中创建，我被重定向到连接/失败操作。Google 身份验证应该只是验证用户身份的一种方式。知道有什么问题吗？

这是我的路由：

```
hwi_oauth_redirect:
    resource: "@HWIOAuthBundle/Resources/config/routing/redirect.xml"
    prefix:   /connect

google_login:
    pattern: /login/check-google 
```

安全.yml

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    secured_area:
        pattern:    ^/
        form_login:
            provider: fos_userbundle
            login_path: /connect/google
            check_path: /login/login_check
        logout: true
        anonymous: true
        oauth:
            resource_owners:
                google: "/login/check-google"
            login_path:        /connect/google
            failure_path:      /connect-fail
            # FOSUB integration
            oauth_user_provider:
                service: hwi_oauth.user.provider.fosub_bridge 
```

和配置

```
hwi_oauth:
    firewall_name: secured_area
    resource_owners:
            google:
                type:                google
                client_id:           ....
                client_secret:       ......
                scope:               "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile"
    fosub:
        username_iterations: 5
        properties:
            google: googleId 
```

谷歌重定向网址

```
http://xxxx/login/check-google 
```

我的用户实体：

```
class User extends BaseUser
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @var integer $id
     *
     * @ORM\Column(name="google_id", type="integer")
     */ 
    protected $googleId; 
```

//编辑-更新

我刚刚在 Symfony 日志中发现我有一个来自 google 重定向的请求：GET [http://xxxxx.dk/login/check-google?code=4%2F8tiDAhI45D2g7BvrdtwoF7wJ.Eu7i2fmkYOl05ti8ZT3YDrXXXXXfakeXXXE4hcwI](http://xxxxx.dk/login/check-google?code=4%2F8tiDAhI45D2g7BvrdtwoF7wJ.Eu7i2fmkYOl05ti8ZT3YDrXXXXXfakeXXXE4hcwI)就在重定向到 /connect-file 之前
不幸的是，它看起来是那个请求仅尝试根据 google_id SELECT * FROM app_user t0 WHERE t0.googleId = 从我的数据库中检索用户？限制 1：['123456789'] 但该用户不存在。

我应该在尝试对他/她进行身份验证之前创建用户吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T12:32:15.870

正如[beliveyourdream](https://stackoverflow.com/users/1682619/beliveyourdream)所说... HWIOAuth 不为您提供自动用户注册。您需要创建自己的用户提供程序并使用它。我建议您使用[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)，因为它完成了大部分工作，并且很好地集成到了 HWIOAuth 中。关于如何设置（因为连接它们需要做一些工作），请使用这个[Gist](https://gist.github.com/4476697)。它使用来自提供者（gacebook、google、github 等）的数据和帐户连接（已经注册的用户可以将他/她的帐户与来自提供者的帐户连接）来设置您的应用程序。此外，在创建/连接后，用户将能够使用提供者的凭据连接到您的站点（呃……毕竟是 OAuth）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T09:25:52.407

遗憾的是，默认情况下 HWIOAuthBundle 不处理自动注册。如果您想现在登录，则必须手动创建用户。

# python - py2exe 数据文件

> ID：12260618
> 
> 赞同：0
> 
> 时间：2012-09-04T09:34:38.980
> 
> 标签：python, py2exe

我正在尝试为我的 python 程序构建一个可执行文件，如下所示：

```
from distutils.core import setup
import py2exe, sys, os 
import matplotlib
import numpy
from glob import glob

sys.argv.append('py2exe')

datafiles = [('files', glob(r'C:\Program Files\Microsoft Visual Studio 9.0\VC\redist\x86\Microsoft.VC90.CRT\*.*'))]

setup(windows=['main.py'], data_files= datafiles, options={"py2exe": {"includes": ["matplotlib"]}}) 
```

这可行，但是，我还需要包含通过此命令获得的这些 matplotlib 文件，以使程序正常工作：

```
matplotlib.get_py2exe_datafiles() 
```

但不知何故，我无法将它们包含到 data_files ...

```
mpl = [('files', [matplotlib.get_py2exe_datafiles()])]
datafiles.append(mpl) 
```

此外，在没有 matplotlibfiles 的情况下编译工作版本后，我收到警告说我的项目依赖于其他几个 dll - 有没有办法将它们一次全部强制到程序中？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:14:35.983

可能是 matplotlib.get_py2exe_datafiles() 没有以您想要的方式返回文件吗？这个输出是什么？

也许您需要使用 list() 代替，并在您的 mpl 周围删除额外的 []：

```
mpl = ('files', list(matplotlib.get_py2exe_datafiles()))
datafiles.append(mpl) 
```

在[docs](http://docs.python.org/distutils/setupscript.html#installing-additional-files)中，完成后数据文件应该是这样的：

```
# data_files specifies a sequence of (directory, files) pairs in the following way:

setup(...,
      data_files=[('bitmaps', ['bm/b1.gif', 'bm/b2.gif']),
                  ('config', ['cfg/data.cfg']),
                  ('/etc/init.d', ['init-script'])]
     ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:18:18.843

我有点想知道您想将该列表**附加**`mpl`到现有列表中`datafiles`。

查看以下 py2exe-wiki-help [http://www.py2exe.org/index.cgi/MatPlotLib](http://www.py2exe.org/index.cgi/MatPlotLib)表明您必须直接使用`matpotlib.get_py2exe_datafiles()`

```
import matplotlib
...
setup(
   ...
data_files=matplotlib.get_py2exe_datafiles(), # <-- here
) 
```

但是您将（列表）附加`mpl`到仍然存在的`datafiles`列表中，这将导致不是一个连续的列表，而是一个矩阵：

```
>>> datafiles = ['<datafile_one>', '<datafile_two>']
>>> mpl = [('files', ['<mpl_file_one>', '<mpl_file_two>', ...])]
>>> print(datafiles.append(mpl)]
['<datafile_one>', '<datafile_two>', [('files', ['<mpl_file_one>',  '<mpl_file_two>', ...])] 
```

...这似乎是不正确的。

我猜你想在你的数据文件列表中**扩展（**`mpl`**）**你的 Visual Studio dll 文件列表（第二个索引槽），是吗？

```
[('files', ['<datafile_one>', '<datafile_two>', '<mpl_file_one>',  '<mpl_file_two>', ...])] 
```

所以最后我认为你应该尝试*以下*方式：

```
datafiles = glob(r'C:\Program Files\Microsoft Visual Studio 9.0\VC\redist\x86\Microsoft.VC90.CRT\*.*'))]
datafiles.extend(matplotlib.get_py2exe_datafiles())
...
setup(windows=['main.py'], 
    data_files= [('files', datafiles)], #<-- important: tuple will be build here finally
    ...
) 
```

-科林-

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:20:24.517

我设法完成了以下工作：

```
datafiles = [("Microsoft.VC90.CRT", glob(r'C:\Program Files\Microsoft Visual Studio 9.0\VC\redist\x86\Microsoft.VC90.CRT\*.*'))]
datafiles.extend(matplotlib.get_py2exe_datafiles()) 

setup(windows=['main.py'], data_files= datafiles, options={"py2exe": {"includes": ["matplotlib"]}}) 
```

感谢您的回复，这为我指明了正确的方向！

# python - 使用来自 MySQL 查询的 PyQt 进行慢速 PDF 渲染

> ID：12260623
> 
> 赞同：0
> 
> 时间：2012-09-04T09:34:54.070
> 
> 标签：python, mysql, sql, pyqt

直到昨天，我还在为我的应用程序使用 SQLite。今天我找到了一个足够强大的理由（应用程序的多个实例）来使用`pymysql`.

有一次，我的应用程序在数据库中查询 300 行：

```
cur.execute('select ime,brPredmeta,statusStr,sudskiBr ,sudija ,datumRasprave,statusPredmeta, zaduzen,datumZaduzenja from predmeti')
sviaktivni = cur.fetchall()
sviaktivni = list(sviaktivni) #make a list of tuples
sviaktivni.sort(key=operator.itemgetter(0)) #sort the list 
```

之后，我提取变量，然后使用这些变量制作 HTML 文档，然后将其发送到打印机（PDF 或普通打印机）。生成 HTML 的代码非常简单；“标题”的几行表（为清楚起见此处省略），然后是“正文”的另一个表，代码如下：

```
#extract the variables
for tuple in sviaktivni:
    ime,brPredmeta,statusStr,sudskiBr ,sudija ,datumRasprave,statusPredmeta, zaduzen,datumZaduzenja = tuple
#done extracting

  body = ('<html><head><title></title>'
    '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>'
    '<style></style>'
    '</head>'
    '<body>'
    '<table align ="center" border="0" width="100%" style="table-layout:fixed">'
    '<tr height="10%">'
    '<td align="left" width="20">'+str(brojac)+'.</td>'
    '<td align="left" width="180">'+ime+'</td>'
    '<td align="left" width="100">'+str(brPredmeta)+'</td>'
    '<td align="left" width="80">'+statusStr+'</td>'
    '<td align="left" width="80">'+str(sudskiBr)+'</td>'
    '<td align="left" width="140">'+sudija+'</td>'
    '<td align="left" width="150">'+zaduzen+'</td>'
    '<td align="left">'+datumZaduzenja+'</td>'
    '<td align="right"> '+statusPredmeta+' </td>'
    '</tr>'
    '</table>'
    '</body>'
    '</html>')

  self.ui.printHTML.append(body) 
```

我的问题是查询立即执行，但之后 CPU 卡在 100%，整个程序就冻结了。打印预览对话框有时会显示数据，有时它只是一个空窗口。无论哪种方式，整个应用程序都被冻结。

使用 SQLite 的相同代码没有问题。我应该怎么办？回到 sqlite 并冒着数据库损坏的风险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:29:35.940

不要只是将整个 SQL 结果加载到内存中，并期望这适用于所有情况。而且，使用数据库为您进行排序，这是它擅长的。

只需循环游标并逐一处理结果，这样您就不必用中间结果填满内存：

```
cur.execute('''
    select 
        ime, brPredmeta, statusStr, sudskiBr, sudija,
        datumRasprave,statusPredmeta, zaduzen,datumZaduzenja
    from predmeti
    order by ime
    ''')
for row in cur:
    ime, brPredmeta, statusStr, sudskiBr, sudija, datumRasprave, statusPredmeta, zaduzen, datumZaduzenja = row
    # Process row data. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:47:15.540

取自 SQLite 文档...

> 多个应用程序或同一应用程序的多个实例可以同时访问单个数据库文件吗？
> 
> 多个进程可以同时打开同一个数据库。多个进程可以同时执行 SELECT。但是，任何时候只有一个进程可以对数据库进行更改。
> 
> SQLite 使用读/写锁来控制对数据库的访问。（在不支持读/写锁的 Win95/98/ME 下，改为使用概率模拟。）但请注意：如果数据库文件保存在 NFS 文件系统上，此锁定机制可能无法正常工作。这是因为 fcntl() 文件锁定在许多 NFS 实现中被破坏。如果多个进程可能尝试同时访问该文件，则应避免将 SQLite 数据库文件放在 NFS 上。在 Windows 上，Microsoft 的文档说如果您没有运行 Share.exe 守护程序，锁定可能无法在 FAT 文件系统下工作。对 Windows 有很多经验的人告诉我，网络文件的文件锁定非常有问题，而且不可靠。如果他们说的是真的，
> 
> 我们知道没有其他嵌入式 SQL 数据库引擎支持与 SQLite 一样多的并发性。SQLite 允许多个进程一次打开数据库文件，并允许多个进程一次读取数据库。当任何进程想要写入时，它必须在其更新期间锁定整个数据库文件。但这通常只需要几毫秒。其他流程只是等待作者完成，然后继续他们的业务。其他嵌入式 SQL 数据库引擎通常只允许单个进程一次连接到数据库。
> 
> 但是，客户端/服务器数据库引擎（例如 PostgreSQL、MySQL 或 Oracle）通常支持更高级别的并发性，并允许多个进程同时写入同一个数据库。这在客户端/服务器数据库中是可能的，因为始终有一个受良好控制的服务器进程可用于协调访问。如果您的应用程序需要大量并发，那么您应该考虑使用客户端/服务器数据库。但经验表明，大多数应用程序需要的并发性远低于其设计者的想象。
> 
> 当 SQLite 尝试访问被另一个进程锁定的文件时，默认行为是返回 SQLITE_BUSY。您可以使用 sqlite3_busy_handler() 或 sqlite3_busy_timeout() API 函数从 C 代码调整此行为。

# c++ - CodeBlocks 未定义对 WinMain@16 的引用

> ID：12260624
> 
> 赞同：3
> 
> 时间：2012-09-04T09:35:04.043
> 
> 标签：c++, codeblocks

我刚开始学习`C++`使用`CodeBlocks`.

当我开始学习如何在 .h 上上课时`.h file`，首先它总是返回我缺少 .h 文件，我已将其链接到搜索目录。

然后当我再次编译时，错误变为“ `undefined reference to WinMain@16`”。我已经添加`-lmingw32`到链接器选项，但仍然返回相同的错误。

所以我希望有人愿意告诉我如何解决这个问题。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T12:22:49.447

尝试添加库

> libcomdlg32.a

项目 > 构建选项 > 链接器设置

随着

> gdi32，用户32，内核32，comctl32

# objective-c - UIWebView，输入类型，如何添加百分比值

> ID：12260626
> 
> 赞同：0
> 
> 时间：2012-09-04T09:35:05.187
> 
> 标签：objective-c, nsstring

我有一个 UIWebView，它有一个表格，我希望它是 UIWebView 大小的 80%，但在 de NSString 中我用作 html：

```
"<table width = \"80%\", align = \"center\">" 
```

我有一个警告：

```
Invalid conversion specifier '"'** 
```

因为它正在等待广告或@或其他任何东西。

我尝试使用 NSLog 查看 html，但缺少 %

```
<table width = "80", align = "center"> 
```

我如何告诉 NSString % 值？先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:09:06.293

使用 '%%' 而不是 '%'

```
NSLog(@"<table width = \"80%%\", align = \"center\">"); 
```

我假设您正在使用 stringWithFormat 定义 NSString，因此您应该使用 '%%'。% 的转义序列是 %%。

# c++ - 文本文件解析 C++ | 由空格分隔。

> ID：12260629
> 
> 赞同：0
> 
> 时间：2012-09-04T09:35:12.630
> 
> 标签：c++, parsing, text

我有一个像这样的文本文件

```
Path 
827 196
847 195
868 194
889 193
909 191
929 191
951 189
971 186
991 185
1012 185
Path
918 221
927 241
931 261
931 281
930 301
931 321
927 341
923 361
921 382 
```

我正在使用 getline 函数读取文本文件中的每一行，我想将单行中的 2 个数字解析为两个不同的整数变量。到目前为止我的代码是。

```
int main()
{

  vector<string> text_file;

  int no_of_paths=0;

  ifstream ifs( "ges_t.txt" );
  string temp;

  while( getline( ifs, temp ) )
  {
          if (temp2.compare("path") != 0)
          {
//Strip temp string and separate the values into integers here.
          }

  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:40:13.643

```
int a, b;
stringstream ss(temp);
ss >> a >> b; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:58:32.930

给定一个包含两个整数的字符串：

```
std::istringstream src( temp );
src >> int1 >> int2 >> std::ws;
if ( ! src || src.get() != EOF ) {
    //  Format error...
} 
```

请注意，您可能还想在比较 for 之前修剪空白 `"path"`。（尾随空格可能特别有害，因为它在普通编辑器中看不到。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:39:36.810

像这样的东西：

```
#include <string>
#include <sstream>
#include <fstream>

std::ifstream ifs("ges_t.txt");

for (std::string line; std::getline(ifs, line); )
{
    if (line == "Path") { continue; }

    std::istringstream iss(line);
    int a, b;

    if (!(iss >> a >> b) || iss.get() != EOF) { /* error! die? */ }

    std::cout << "You said, " << a << ", " << b << ".\n";
} 
```

# php - 此查询向我显示此活动记录

> ID：12260630
> 
> 赞同：0
> 
> 时间：2012-09-04T09:35:15.907
> 
> 标签：php, codeigniter

我无法获取两个表并将它们传递给控制器​​：

在模型中：

```
function get_all_entries() {
$query = $this->db->get('entry');
return $query->result();
$this->db->select('entry_id , count(comment_id) as total_comment');    
$this->db->group_by('entry_id');
$comment = $this->db->get('comment');
return $comment->result(); 
} 
```

在控制器中：

```
$data['query'] = $this->blog_model->get_all_entries(); 
$this->load->view('blog/index',$data); 
```

如何将`$query`变量返回`$comment`给控制器？我想我做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:34:57.713

使用这个是因为你不允许在同一个方法中返回两次

```
function get_all_entries() 
{
    $query  = $this->db->get('entry');
    $data[] = $query->result();

    $this->db->select('entry_id , count(comment_id) as total_comment');    
    $this->db->group_by('entry_id');
    $comment = $this->db->get('comment');
    $data[] =   $comment->result(); 
    return $data;
} 
```

编辑：

在控制器中

```
function index(){
    $this->load->model('mymodel');
    $result = $this->mymodel->get_all_entries();
    $entries = $result[0] ;
    $comments = $result[1] ;

    $data['entries'] =  $entries;
    $data['comments '] =  $comments;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:40:00.303

您的问题是您`$query->result()`首先返回，`return`函数暂停当前函数，因此未处理后续步骤。

最好的方法是为`$query`get 和`$comment`get 创建两种方法。

您的问题的替代方案是

```
function get_all_entries() {
    $query = $this->db->get('entry');
    $this->db->select('entry_id , count(comment_id) as total_comment');    
    $this->db->group_by('entry_id');
    $comment = $this->db->get('comment');
    return array($query->result(),$comment->result()); 
} 
```

然后在你的控制器中

```
list($data['query'],$data['comment']) = $this->blog_model->get_all_entries();
$this->load->view('blog/index',$data); 
```

# c# - 将 IF 语句转换为简单语句 - 哪一个是有效的？

> ID：12260631
> 
> 赞同：-3
> 
> 时间：2012-09-04T09:35:17.017
> 
> 标签：c#

我希望每个人都会喜欢阅读这篇文章。

我在下面有两个 IF 语句

```
public int GetTax(Item item)
{
   int tax=0;
   if(item.Name.Equals("Book"))
   {
      tax = 10;
   }
   if(item.Imported)
   {
      tax += 5;
   }
   return tax;
} 
```

我已经将上面的 if 条件转换为这个。

```
public int GetTax(Item item)
{
     return 5 * ((int)item.Name.Equals("Book") * 2 + ((int)item.Imported));
} 
```

你觉得哪一个效率高？并证明为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:41:32.673

如果按字面意思编译，第二种方法效率更高，因为没有分支。

只要有分支，就会有一些分支预测，可能会丢失，从而导致 CPU 重新执行机器指令。

话虽如此，根据编译器的不同，您编写的内容可能足够简单，可以优化为等效代码。这确实取决于您调用的返回类型。如果返回类型是布尔值，它们是等价的。

但是，如果例如，`item.Imported`实际上是整数类型，那么您给出的两个示例不等价，编译器可能无法将两者编译为同一事物。

因为优化非常依赖于编译器。如果最小化运行时间很重要，那么您只能确定是否对代码进行**基准测试。**

# java - 在 java 中截取 Windows (.exe) 上的特定应用程序的屏幕截图

> ID：12260633
> 
> 赞同：3
> 
> 时间：2012-09-04T09:35:24.957
> 
> 标签：java, screenshot

*是否可以对在 Windows上用 Java*启动的特定应用程序/exe 进行屏幕截图？

我尝试了这段代码，但它没有捕获应用程序本身并返回一张黑色图片：

```
try {
    ...
    Robot robot = new Robot();
Rectangle captureSize = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());
    BufferedImage bufferedImage = robot.createScreenCapture(captureSize);
    ImageIO.write(bufferedImage,"png",myFile);  
    ...
}    catch(AWTException e) {
    System.err.println("call a doc!");
} 
```

这就是为什么我认为强制与启动的进程链接的屏幕截图可能会解决问题。

或者也许它们是捕获显示屏幕的其他方式？（如果是的话，你能告诉我一些工作代码吗？）

# windows - Shell 命名空间扩展添加路障

> ID：12260634
> 
> 赞同：3
> 
> 时间：2012-09-04T09:35:35.207
> 
> 标签：windows, winapi, explorer, windows-shell, shell-extensions

**我在Windows XP**中使用默认 shell 视图实现了命名空间扩展。一切正常，但我想添加路障（[受保护文件夹的描述](http://support.microsoft.com/kb/272963)- 也适用于 Windows XP）。是否可以使用记录/未记录的功能（SFVM 消息），或者此功能是硬编码的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:34:25.603

如果您自己为扩展视图填充所有数据，那么您可以自己读取隐藏（或任何其他）文件夹的内容并立即显示它们，或者在需要时隐藏它们。

您的扩展使用自己的命名空间，它不受内置外壳保护选项的控制。

**PS**从 Windows 7+ 开始，这应该不是问题。

# .net - 如何在 HTML 字符串中找到所有图像链接

> ID：12260637
> 
> 赞同：1
> 
> 时间：2012-09-04T09:35:37.287
> 
> 标签：.net, regex, image, html-parsing, embedding

我正在尝试构建一个正则表达式来解析 HTML 文件并获取所有图像文件。我需要这样做以便在将图像作为电子邮件发送之前嵌入图像。

是否有可以引用图像的“地点列表”？例如，我知道我需要查看 inside `<img src="here" />`，或 CSS 样式`url('here')`，或`background='here'`，但这是否涵盖所有情况？

正则表达式是否已经存在于某个地方？我发现编写正则表达式很痛苦，我不想错过任何一个案例，或者忘记处理一些损坏的 HTML 标记。

对于`<img>`标签，我发现了这样的内容：

```
(?<=img\s+src\=[\x27\x22])(?<Url>[^\x27\x22]*)(?=[\x27\x22]) 
```

但我不知道如何包括其他地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:41:06.830

不要使用正则表达式来解析 html，而是使用像[HtmlAgilityPack这样的 Html 解析器](http://htmlagilitypack.codeplex.com/)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var a = doc.DocumentNode.Descendants("img")
            .Select(x => x.Attributes["src"].Value)
            .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:39:23.463

正则表达式往往是[解析 HTML 的糟糕选择](https://stackoverflow.com/a/1732454/1583)，尤其是来自不同来源的 HTML。

我建议使用[HTML Agility Pack——](http://htmlagilitypack.codeplex.com/)为此专门构建的 HTML 解析器。

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

另一种方法是[ScarpySharp](http://nuget.org/packages/ScrapySharp)，这是一个 HtmlAgilityPack 扩展，用于使用 css 选择器（如 JQuery）选择元素。

# perl - Perl：贪婪的本性拒绝工作

> ID：12260641
> 
> 赞同：0
> 
> 时间：2012-09-04T09:35:53.053
> 
> 标签：perl

我正在尝试用另一个字符串替换一个字符串，但贪婪的本性似乎对我不起作用。下面是我的代码，其中“PERFORM GET-APLCY”被正确识别和替换，但字符串“PERFORM GET-APLCY-SOI-CVG-WVR”和许多其他此类字符串被替换为“PERFORM GET-APLCY”的替换字符串”。

```
s/PERFORM $func[$i]\.*/#  PERFORM $func[$i]\.\n $hash{$func[$i]}/g; 
```

在字符串匹配和替换期间，句号是可选的。我也尝试将模式匹配为 $func[$i]\b 请帮助我了解问题可能是什么。

在此先感谢， 法埃兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:45:09.613

如果点是可选的，为什么`GET-APLCY-`不应该匹配？`GET-APLCY.`

简单的解决方案：按长度降序对数组进行排序。

```
@func = sort { length $b <=> length $a } @func 
```

测试脚本：

```
#!/usr/bin/perl
use warnings;
use strict;
use feature 'say';

my %hash = ('GET-APLCY'              => 'REP1',
            'GET-APLCY-SOI-CVG-WVR'  => 'REP2',
            'GET-APLCY-SOI-MNG-CVRW' => 'REP3',
           );

my @func = sort { length $b <=> length $a } keys %hash;

while (<DATA>) {
    chomp;
    print;
    print "\t -> \t";
    for my $i (0 .. $#func) {
        s/$func[$i]/$hash{$func[$i]}/;
    }
    say;
}

__DATA__
GET-APLCY param
GET-APLCY- param
GET-APLCY. param
GET-APLCY-SOI. param
GET-APLCY-SOI-CVG-WVR param
GET-APLCY-SOI-MNG-CVRW param 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:33:24.410

您似乎正在遍历函数名称，并`s///`为每个函数名称调用。另一种方法是使用该`e`选项，并一次完成所有操作（没有循环）：

```
my %hash = (
  'GET-APLCY'             => 'replacement 1',
  'GET-APLCY-SOI-CVG-WVR' => 'replacement 2',
);

s{ 
  PERFORM \s+   # 'PERFORM' keyword 
  ([A-Z-]+)     # the original function name
  \.?           # an optional period
}{
  "#  PERFORM $1.\n" . $hash{$1};
}xmsge; 
```

导致替换部分被`e`评估为表达式。基本上，第一部分查找所有`PERFORM`调用（我假设函数名称都是大写的，它们之间带有“-” - 否则进行调整）。第二部分用您要显示的文本替换该行。

我还使用了`x`、`m`和`s`选项，它允许在正则表达式中添加注释等。您可以在 下找到有关这些的更多信息`perldoc perlop`。

-line的普通版本`s`应该是：

```
s/PERFORM ([A-Z-]+)\.?/"#  PERFORM $1.\n" . $hash{$1}/eg; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:20:09.320

我很确定你试图为 $i 做某种循环。在这种情况下，很可能 GET-APLCY 位于 GET-APLCY-SOI-CVG-WVR 之前的 @func 数组中。所以我建议在进入循环之前对 @func 进行反向排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T09:50:55.180

我猜这 $func[$i] 包含“GET-APLCY”。如果是这样，这是因为星号仅适用于点，一个实际的点，而不是“任何字符”。尝试

```
s/PERFORM $func[$i].*/#  PERFORM $func[$i]\.\n $hash{$func[$i]}/g; 
```

# cordova - 在电话间隙中的某个字母后添加省略号

> ID：12260644
> 
> 赞同：0
> 
> 时间：2012-09-04T09:36:10.547
> 
> 标签：cordova

我想在表格视图中的某个字母之后添加 eclipseies，我正在运行时创建表格。你能建议我吗。在一列中我想要不超过 10 个字符，所以我需要 eclipseies，我分享我的代码。

不工作............

在身体上加载此功能..

```
 function GetDepartureStationDashboard()
        {      

            document.getElementById('loadingImg').style.visibility = "visible"; 
             var pl = new SOAPClientParameters();
             var params = getParams();
             var parameter1 = unescape(params["getStationCode"]);
             stationCode=parameter1;
             var parameter2 = unescape(params["getStationDesc"]).replace(/[+]/g," ");
             document.getElementById("headingcontent").innerHTML = parameter2;
             pl.add("parameter1", parameter1);
             SOAPClient.invoke(WSDLURL, "GetDepartureStationDashboard", pl, true, GetDepartureStationDashboard_callBack);
        }

function GetDepartureStationDashboard_callBack(r)
{
    document.getElementById('loadingImg').style.visibility = "hidden";
    var tbl = document.getElementById('mainBodyDivContent');
    //tbl.innerHTML = "";
    for (var i = 0; i <r.length-1; i++) {
        var tr = document.createElement('tr');
        tr.setAttribute('id', i);
        (function(id) {
            tr.onclick = function() {
                if(myScroll.isScrolling) {return;}
//window.clearTimeout(myTimedCall);
//window.clearInterval(myTimedCall);
         window.location.href="route.html?RID="+r[id].RID+"&StationCode="+stationCode;
            };
        }(i));

        var td1 = document.createElement('td');
        td1.setAttribute('width', '10%');
        td1.setAttribute("align","center");
        td1.innerHTML = r[i].platformNo;;

        var td2 = document.createElement('td');
        td2.setAttribute('width', '10%');
        td2.setAttribute("align","center");
        td2.innerHTML = r[i].schDepart;

        var td3 = document.createElement('td');
        td3.setAttribute('width', '5%');
        td3.setAttribute("align","center");
        td3.innerHTML ="-";

        var td4 = document.createElement('td');
        td4.setAttribute('width', '10%');
        td4.setAttribute("align","center");
        td4.innerHTML =r[i].destSchArrival;
        **************No dot come if word is bigger******
        var td5 = document.createElement('td');
        td5.setAttribute('width', '10%');
        td5.setAttribute("align","center");
        td5.setAttribute('style', 'text-overflow: ellipsis;');
        td5.setAttribute('style', 'overflow: hidden;');
        td5.setAttribute('style', 'white-space: nowrap;');
        td5.innerHTML = r[i].stationName;

        var td6 = document.createElement('td');
        td6.setAttribute('width', '15%');
        td6.setAttribute("align","center");
        td6.setAttribute('style', 'text-overflow: ellipsis;');
        td6.innerHTML =" (" + r[i].crsCode + ")" ;;

        var td7 = document.createElement('td');
        td7.setAttribute('width', '20%');
        td7.setAttribute("align","center");

        var td8 = document.createElement('td');
        td8.setAttribute('width', '20%');
        td8.setAttribute("align","center");
        td8.setAttribute('style', 'text-overflow: ellipsis;');
            if(r[i].schDepart == r[i].expDepart)
    {
        td7.innerHTML = "<img src=\"images/correct-icon.png\" width=\"20\" height=\"20\" />";
        td8.innerHTML="";
    }
    else 
    {
        td7.innerHTML = "<img src=\"images/error.png\" width=\"20\" height=\"20\" />";
        td8.innerHTML=r[i].expDepart;
    }

        tr.appendChild(td1);
        tr.appendChild(td2);
        tr.appendChild(td3);
        tr.appendChild(td4);
        tr.appendChild(td5);
        tr.appendChild(td6);
        tr.appendChild(td7);
        tr.appendChild(td8);

        tbl.appendChild(tr);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:11:24.603

你需要使用`text-overflow:ellipsis`你想要做的事情。看看这里[http://www.quirksmode.org/css/textoverflow.html](http://www.quirksmode.org/css/textoverflow.html)或者只是搜索“溢出省略号”以获得更多示例

# c# - 在asp.net c#中将差异角色应用于不同的用户

> ID：12260645
> 
> 赞同：0
> 
> 时间：2012-09-04T09:36:13.053
> 
> 标签：c#, asp.net, security-roles

如何使用 asp.net c# 将差异角色应用于不同的用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:43:19.900

Follow these steps:

1.  Go to the website tab and then in it ASP.NET configuration (now open your browser window which just popped up)
2.  Then choose security option
3.  Then setup wizard
4.  After 3 steps you will be asked for giving role to particular user
5.  Select role u want to apply
6.  You are done

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:39:21.397

首先，您没有提供任何代码示例或任何详细信息。无论如何，如果您引用 ASP.NET 应用程序，您可以使用 ASP.NET 默认网站管理工具来达到您提出的目标。

[http://msdn.microsoft.com/en-us/library/yy40ytx0%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/yy40ytx0%28v=vs.100%29.aspx)

# java - Java：在两个字符串之间匹配标记并返回匹配标记的数量

> ID：12260653
> 
> 赞同：0
> 
> 时间：2012-09-04T09:36:37.070
> 
> 标签：java, string, token

需要一些帮助来查找两个字符串之间的匹配标记数。我有一个存储在 ArrayList 中的字符串列表（下面给出的示例）：

```
Line 0 : WRB VBD NN VB IN CC RB VBP NNP  
Line 1 : WDT NNS VBD DT NN NNP NNP  
Line 2 : WRB MD PRP VB DT NN IN NNS POS JJ NNS  
Line 3 : WDT NN VBZ DT NN IN DT JJ NN IN DT NNP  
Line 4 : WP VBZ DT JJ NN IN  NN 
```

在这里，您可以看到每个字符串由一堆用空格分隔的标记组成。所以，我需要处理三件事..

1.  将第 0 行中的第一个标记 (WRB) 与第 1 行中的标记进行比较，以查看它们是否匹配。移动到第 0 行中的下一个标记，直到找到匹配项。如果匹配，则在第 1 行中标记匹配的标记，使其不会再次匹配。
2.  返回第 0 行和第 1 行之间匹配的标记数。
3.  返回匹配标记的距离。示例：在第 0 行的第 3 位和第 1 行的第 5 位找到令牌 NN。距离 = |3-5| = 2

我尝试使用拆分字符串并将其存储到 String[] 但 String[] 是固定的，不允许缩小或添加新元素。尝试过模式匹配器，但结果很糟糕。尝试了其他一些方法，但我的嵌套 for 循环存在一些问题..（如果有帮助，将发布我的部分编码）。

任何有关如何解决此问题的建议或指示将不胜感激。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:38:41.287

以不同的方式思考任务。您想要扫描标记（因此：扫描仪），并且您想要匹配标记（因此：列表，因为您需要顺序。）然后您将遍历每个标记的不同集合，注意匹配和距离.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:20:31.197

您是否尝试过使用[扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)？

如果没有，完全这样做。它看起来像这样：

```
String line1 = ... // your line 1
String line2 = ... // your line 2
Scanner s1 = new Scanner(line1); 

int i1 = 0;
while (s1.hasNext()) {
    String token1 = s1.next();
    Scanner s2 = new Scanner(line2);

    int i2 = 0;
    while (s2.hasNext()) {
        String token2 = s2.next();

        // now you have token1, token2 and their positions (i1, i2)
        // do whatever you want with them

        i2++;
    } // end reading line2
    i1++;
} // end reading line1 
```

编辑：关于在 Arraylist 中选择不同行的循环，您需要*将每个数组元素与每个其他数组元素*进行比较（如果缺少这种解释，这可能是谷歌的最佳选择）。

在 Java 中看起来像这样：

```
for (int i = 0; i < thearraylist.size()-1; i++) {
    for (int j = i+1; j < thearraylist.size(); j++) {

        // now the elements and indices i and j are compared
        // if we were running into my code above:

        String line1 = thearraylist.get(i);
        String line2 = thearraylist.get(j);

        // ... and then compare them

     }
} 
```

第二个循环从 i+1 开始的原因是为了消除这些不必要的比较：

1.  每个元素都会在 j=i 的每个点上与自身进行比较，这是无用的。在上面的循环中，j 从 i+1 开始并增加，所以它永远不会等于 i。
2.  每对元素将被比较两次。例如，当 i=0, j=1 时，您正在比较前两个元素。当 i=1, j=0 时，您*也在比较前两个元素*。这使得第二个比较变得多余。为了摆脱第二个“向后”比较，我们坚持 j 总是高于 i。

如果您觉得这令人困惑，我强烈建议您在循环中通过列出 i 和 j 的值在纸上解决它。

# mysql - 键值存储上的关系型操作

> ID：12260654
> 
> 赞同：0
> 
> 时间：2012-09-04T09:36:40.833
> 
> 标签：mysql, redis, key-value, relational

在我的对象表中

```
id | type | parent | order | created 
```

然后在我的数据表中

```
object_id | key | value 
```

我想以最优化的方式获得'x'类型的对象，其中键'y' ==='z'。

IE。获取 slug === 'jonny' 的用户

我目前正在使用连接进行操作，因为我在 mysql 中这样做是为了快速测试。但我将转向 redis 或类似的键/值存储系统，所以显然这行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:07:00.140

您无法将关系模型调整或转换为键值存储：您需要在术语或结构以及访问路径方面重新考虑您的数据模型。

在您的示例中，使用 redis，我将使用：

*   每个对象一个哈希，包含静态（类型、父级、顺序、创建）和动态（存储在数据表中的）属性

*   每种类型的对象一组来索引对象类型

*   您需要搜索的每个属性值一组

使用无模式键值存储，无需像使用 MySQL 那样分离静态和动态属性。

可以通过相交集合来完成搜索。这些集合必须手动维护（即每次添加/删除对象时，都需要更新相应的集合）。

获得搜索结果后，可以通过管道化几个 hgetall 命令或使用 sort 命令来检索相应的对象属性。

**例子：**

```
# Add 3 objects and their properties
hmset obj:1 type user parent nil order 1 created 20120901 key_slug jonny key_tag dummy key_author Bob
hmset obj:2 type user parent nil order 2 created 20120901 key_slug jonny key_tag not_dummy key_author Dan
hmset obj:3 type admin parent nil order 3 created 20120901

# Add type index
sadd type:user 1 2
sadd type:admin 3

# Add dynamic properties indexes
sadd key_slug:jonny 1 2
sadd key_tag:dummy 1
sadd key_tag:not_dummy 2
sadd key_author:Bob 1
sadd key_author:Dan 2

# Find objects whose type is user, author is Bob and slug is jonny
sinter type:user key_author:Bob key_slug:jonny

# Find properties of object 1
hgetall obj:1 
```

# c++ - 哪种转换在 C++ 中是正确的？

> ID：12260656
> 
> 赞同：6
> 
> 时间：2012-09-04T09:36:45.687
> 
> 标签：c++, type-conversion

我想将 void* 转换为 char* reinterpret_cast 和 static_cast，哪个适合？`static_cast<char*> or reinterpret_cast<char*>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T09:49:09.397

这主要是风格问题。 `static_cast`可以进行任何与隐式转换相反的转换（并且不会删除`const`or `volatile`）。由于`char*`to`void*`是隐含的， `static_cast`因此似乎已指示；通常的规则是 尽可能`static_cast`优先使用。`reinterpret_cast`

鉴于这种使用特别危险，一些编码指南可能更喜欢`reinterpret_cast`，以表明这一事实。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T09:39:35.757

`static_cast`（与 一起`dynamic_cast`）用于在同一类层次结构中的对象之间进行转换，而`reinterpret_cast`在不同类型之间进行完全转换。因此，在您的情况下，您应该选择`reinterpret_cast`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T09:53:45.253

`reinterpret_cast`指针类型之间是根据`static_cast`through定义的`void *`：

> ### 5.2.10 重新解释演员表 [expr.reinterpret.cast]
> 
> 7 - [...] 当 `v`“pointer to `T1`”类型的纯右值转换为“pointer to *cv* `T2` ”类型时，结果是`static_cast<cv T2*>(static_cast<cv void*>(v))`如果`T1`和`T2`都是*标准布局*类型，并且 的对齐要求`T2`不比 的更严格`T1`，或者如果任一类型是`void`.

因此，如果您在标准布局对象指针类型（例如`char *`）之间转换 via `void *`，则`static_cast`适合于转换为/从`void *`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T09:42:43.373

`reinterpret_cast`在这种情况下对你有用，但不要经常使用它，因为它是最危险的演员。基本上，您可以使用`reinterpret_cast`完全不相关的指针，因此您有义务处理结果（即检查结果是否有效以供进一步使用）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-04T09:47:41.757

我想这取决于上下文： static_cast<> 应该在有隐式转换的情况下使用。reinterpret_cast<> 应该在两个指针都属于不同类型时使用

虽然不推荐 reinterpret_cast。

您不应该使用 static_cast 来向下转换继承层次结构，而应该使用 dynamic_cast。

来自 [http://msdn.microsoft.com/en-us/library/e0w9f63b(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/e0w9f63b(v=vs.80).aspx)

**reinterpret_cast 运算符可用于 char* 到 int* 或 One_class* 到 Unrelated_class* 等转换，这些转换本质上是不安全的。**

# php - 将不同的上传文件显示为缩略图或任何其他方式

> ID：12260657
> 
> 赞同：2
> 
> 时间：2012-09-04T09:36:45.473
> 
> 标签：php, javascript, html

我已经编写了代码来使用 php 上传不同类型的文件，并且我将它们的位置信息和日期保存在数据库表中。我进行了查询以显示我已上传的文件列表...并在 html 页面上生成如下输出

```
1.uploads/clouds.png
date and time

2.uploads/resume.pdf
dare and time

.......so on 
```

是否有任何不同的方式来按文件类型显示它们，就像操作系统一样......或任何更好的方式......我很想知道......感谢您的帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:40:26.250

如果要按文件类型分类，请使用[`finfo::file`](http://www.php.net/manual/en/function.finfo-file.php)

这是示例如何获取 mime 类型的文件

```
<?php
$finfo = finfo_open(FILEINFO_MIME_TYPE); // return mime type ala mimetype extension
foreach (glob("*") as $filename) {
    echo finfo_file($finfo, $filename) . "\n";
}
finfo_close($finfo);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:43:25.017

1.  为您的类型创建数组

2.  从您所做的 db 查询中创建一个包含所有文件名的数组

3.  循环遍历您的文件名数组（第 2 点），匹配某个文件类型，例如 png，并将找到的结果放在 pngs 数组中（.png 上的字符串匹配检查）。

4.  循环遍历您的文件名数组（第 2 点），匹配某个文件类型，例如 jpg 并将找到的结果放入 jpgs 数组（.jpg && .jpeg 上的字符串匹配检查）。

5.  ETC

6.  循环遍历您的数组 foreach，将它们放入一个新的最终数组中，例如 outputList 数组

7.  循环遍历你的最终数组（按文件类型排序）html。对于 $outputList echo 等中的每个 $item

php中有一些方法可以匹配数组，但不确定您是否可以决定处理输出，所以简单是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:59:28.517

这是生成文件列表的一个很好的脚本： [http ://www.evoluted.net/thinktank/web-development/php-directory-listing-script](http://www.evoluted.net/thinktank/web-development/php-directory-listing-script)

我还建议你学习[php`glob`函数](http://www.php.net/manual/en/function.glob.php)。可以这样使用：

```
foreach(glob("directory/*.pdf") as $pdfdocument)   
    {  
    echo "<a href=\"$pdfdocument\">Link to $pdfdocument</a>"; 
    } 
```

这将生成指向目录中所有 PDF 文件的链接。

# php - 用户手动从浏览器中删除时删除 Cookie

> ID：12260661
> 
> 赞同：-1
> 
> 时间：2012-09-04T09:36:56.610
> 
> 标签：php, cookies

有什么方法可以删除 cookie，直到用户在 PHP 中手动从浏览器中删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:47:30.773

由于 cookie 存储在客户端并且浏览器在请求标头中发送 cookie，
因此如果用户从浏览器中删除 cookie，那么您的脚本将不会收到该 cookie
，因此在这种特定情况下您不需要从服务器端删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:04:24.740

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

删除你会做的cookie：

```
<a href="#" onclick="eraseCookie('GuessName');">delete</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:38:16.687

您可以取消设置：

```
<?php
    unset($_COOKIE['myCookie']);
?> 
```

或者您可以为其设置过去的时间：

```
<?php
    setcookie("myCookie", "", time() - 3600);
?> 
```

换句话说，`cookie`只有在您的域设置了它时，您才能删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T09:39:08.430

是的，它就是

```
 unset($_COOKIE['myCookie']); 
```

# javascript - 提高 $(...) 的响应速度。点击触摸界面

> ID：12260663
> 
> 赞同：0
> 
> 时间：2012-09-04T09:37:02.913
> 
> 标签：javascript, jquery, keyboard

我需要访问将在触摸界面上使用的基于 Web 的屏幕键盘。 [这个](http://d2o0t5hpnwv4c1.cloudfront.net/378_jqueryKeyboard/demo/index.html)例子看起来不错而且很实用，但是当我在 iPad 上尝试它时，恕我直言，它的响应速度非常低。使用起来不舒服，有时由于响应缓慢，整个单词都拼错了。

有没有办法改善这种屏幕键盘的体验？此实现使用 $('#id').click(...); 处理事件的函数。有没有更好的方法来达到在屏幕上打字的目的？有没有更好的插件？

注意：最终的应用程序将在不同类型的设备上运行。由于多种原因，无法选择原生屏幕键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:36:53.680

移动浏览器（特别是 iOS，但也有其他浏览器）在触发“点击”事件之前会有一点延迟，因此它可以区分单击和双击。

对于那种风格的键盘，您可能可以通过将“click”更改为“mouseup”/“touchend”侦听器来消除延迟。

但是，请注意，如果您需要确保仅在用户在同一元素上按下和释放时才处理触摸/单击事件（而不是在一个元素上开始触摸并滑动在发布之前到另一个）。

# .net - 使用 Mono 构建的应用程序可以在 .NET 上运行吗？

> ID：12260665
> 
> 赞同：3
> 
> 时间：2012-09-04T09:37:18.997
> 
> 标签：.net, mono

我一直在想这个问题，但我还没有找到具体的答案，只是反过来（.net 应用程序是否在单声道上运行）。

我注意到大多数 Mono 应用程序在下载时都很大，是因为它们也提供 Mono 运行时吗？或者这只是一个比抱歉更安全的预防措施？

为 Windows 构建的应用程序是否在 .NET Framework 上运行，没有安装 Mono，也没有包含在可执行文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:42:49.210

Mono 编译器生成与 .NET 编译器相同格式的可执行文件，所以是的，Mono 编译的程序也应该在 .NET 上运行。

# html - 为什么我的联系表格在 Firefox 中显示不同？

> ID：12260668
> 
> 赞同：1
> 
> 时间：2012-09-04T09:37:26.090
> 
> 标签：html, css

我创建了一个表单，它在 chrome 中看起来很好

但是我检查到 Firefox 比现在正确显示我尝试了很多次但没有找到解决方案

任何人更正我的表格

铬结果![在此处输入图像描述](../Images/f26abe6160f5831807929c5c2bc3747a.png)

和 Firefox 结果显示是

![在此处输入图像描述](../Images/8c92cf9bcf79ffd3b8099f5e3effc97a.png)

***[演示链接是](http://tinkerbin.com/52Mco43C)***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T09:43:46.727

**input** is the [Replacing](http://reference.sitepoint.com/css/replacedelements) element then you have to define **height** & **width** to it for the cross browser capability.

Check this [http://tinkerbin.com/hwxXoCkj](http://tinkerbin.com/hwxXoCkj)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:46:38.013

您还没有固定输入的宽度/高度。在此处查看更新的[演示](http://jsfiddle.net/Sxvdh/1/)

[http://jsfiddle.net/Sxvdh/1/](http://jsfiddle.net/Sxvdh/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:07:36.390

我个人会将表单设计得更像这样（不是说你应该，只是提供一个替代方案）。

[http://jsfiddle.net/qZfdp/2/](http://jsfiddle.net/qZfdp/2/)

```
<form action="" method="post">
    <div class="field text">
        <label>Name *</label>
        <input type="text" name="name" />
    </div>
    ...
    <div class="field textarea">
        <label>Message</label>
        <textarea name="message"></textarea>
    </div>
    <button>Submit</button>
</form> 
```

CSS：

```
form {
    margin: 25px;
    width: 592px;
    border: solid 3px #c7d9e0;
    padding: 60px;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-shadow:0 0 10px 0 rgba(0,0,0,0.6);
    -moz-box-shadow:0 0 10px 0 rgba(0,0,0,0.6);
    -webkit-box-shadow:0 0 10px 0 rgba(0,0,0,0.6);
    border-radius:5px;
}

label {
    width: 100px;
    display: inline-block;
    float: left;
}

input,
textarea {
    border: 0 none;
    background-color: transparent;
    width: 335px;
}

.field {
    margin: 0 0 10px 0;
    padding: 10px;
    box-shadow:0 0 0 1px rgba(255,255,255,0.75) inset;
    border-radius:3px;
    -moz-border-radius:3px;
    -webkit-border-radius:3px;
    border:solid 1px #d8d5d5;
    background: -moz-linear-gradient(top,  rgba(247,245,245,1) 28%, rgba(216,213,213,1) 100%); /* FF3.6+ */
    background: -webkit-linear-gradient(top,  rgba(247,245,245,1) 28%,rgba(216,213,213,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(247,245,245,1) 28%,rgba(216,213,213,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(247,245,245,1) 28%,rgba(216,213,213,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(247,245,245,1) 28%,rgba(216,213,213,1) 100%); /* W3C */
}
​
​ 
```

# rest - 泽西岛：如何将自定义 DTO 发送/传递到泽西岛的服务类

> ID：12260674
> 
> 赞同：0
> 
> 时间：2012-09-04T09:37:38.883
> 
> 标签：rest, jersey

我正在使用 Jersey 框架来开发我的 Web 服务。我有一个名为 UserInfo 的 DTO 对象，其中包含 setter 和 getter。我最初是在用户登录时设置此 DTO 值。如何将此用户特定的 DTO 传递给 Jersey 服务类？

我曾尝试将它们设置在 MultivaluedMap 和 Form 中，但我运气不好让它工作。

这是我的代码：

```
MultivaluedMap<String, String> queryParams = new MultivaluedMapImpl();
queryParams.add("queryTerm", "userdto");

Form f = new Form();
f.add("name", "1001D"); 
```

这就是我试图检索数据的方式。

```
public class HaiService {
    @GET
    @Produces("application/json")
    @Consumes("application/json")
    public String sayPlainTextHello(@Context UriInfo ui) {

      MultivaluedMap queryParams=ui.getQueryParameters();
      Iterator it=queryParams.keySet().iterator();
      String theKey=null;
      String returnString="";   

      while(it.hasNext()) {
        theKey=(String)it.next();
        System.out.println(queryParams.getFirst(theKey));
      }

      System.out.println("I am called");
      return "Hi";
    } 
```

但我运气不好。通常我的要求是在登录时存储用户特定的数据，然后在服务类中检索它。

我避免在会话中存储数据，因为用户可能会在一个浏览器下使用多个 ID 登录，这会产生相同的会话 ID，并且第一个登录用户的数据有可能被覆盖。

# upload - 如何在wordpress网站（http://wordpress.org）上传插件

> ID：12260675
> 
> 赞同：-4
> 
> 时间：2012-09-04T09:37:39.767
> 
> 标签：upload, wordpress

我在 word press 中创建了一个插件。我想将它上传到 word press 官方网站，以便开发人员和其他人下载该插件。官方网站是 word press 是[http://wordpress.org/](http://wordpress.org/)

简而言之，我想将我的插件上传到以下网址

[http://wordpress.org/extend/plugins/](http://wordpress.org/extend/plugins/)

这样它就可以列为其他插件，访问者可以下载它。那么我该怎么做呢？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:01:52.260

这是您可以找到 [http://wordpress.org/extend/plugins/add/的地方](http://wordpress.org/extend/plugins/add/)

将您的插件提交到[http://wordpress.org/extend/plugins/](http://wordpress.org/extend/plugins/)存储库。

问候，[wordpress 设计师][2]

# rspec2 - Guard 可以从 ~/.rspec 文件中读取 rspec CLI 选项吗？

> ID：12260676
> 
> 赞同：0
> 
> 时间：2012-09-04T09:37:50.407
> 
> 标签：rspec2, guard

我想*避免*为每个保护文件的 rspec 部分设置 CLI 选项，如下所示：

```
guard 'rspec', :cli => "--color --drb --format documentation", :version => 2 do 
```

我完全取出了这些`:cli`选项并重新启动了 Guard，但它没有从`~/.rspec`. 我的项目目录中也没有 .rspec 点文件。

关于如何将 Guard 与该点文件链接的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:26:42.517

```
rspec_dotfile = File.expand_path("~/.rspec")
cli_options = File.exists?(rspec_dotfile) ? File.read(rspec_dotfile).chomp : "--some --default-options"
guard 'rspec', :cli => cli_options, :version => 2 do
  # ...
end 
```

# html - 更改文件浏览按钮的样式

> ID：12260680
> 
> 赞同：0
> 
> 时间：2012-09-04T09:37:56.733
> 
> 标签：html, css

> **可能重复：**
> [在 html 中替换文件浏览按钮的最佳方法是什么？](https://stackoverflow.com/questions/108149/what-is-the-best-way-to-replace-the-file-browse-button-in-html)
> [如何使用 CSS3 / Javascript 设置“输入文件”的样式？](https://stackoverflow.com/questions/3226167/how-to-style-input-file-with-css3-javascript)

可以改变风格 `<input type='file' />`吗？

如果是，如何改变？chrome 显示我在文件浏览输入中选择的文件名。

如何在文件浏览输入中隐藏文件名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:45:51.217

之前问过：

*   [如何在 Firefox 中设置文件输入字段的样式？](https://stackoverflow.com/questions/352467/styling-issues-with-a-file-input-field-in-firefox)
*   [为 input type="file" 按钮设置样式](https://stackoverflow.com/questions/572768/styling-an-input-type-file-button)
*   [如何使用 CSS3 / Javascript 设置“输入文件”的样式？](https://stackoverflow.com/questions/3226167/how-to-style-input-file-with-css3-javascript)
*   [样式 <input type="file">](https://stackoverflow.com/questions/4532733/styleize-input-type-file)
*   [更改输入类型=“文件”上的光标类型](https://stackoverflow.com/questions/1537223/change-cursor-type-on-input-type-file)
*   [https://stackoverflow.com/questions/3984815/jquery-best-way-to-style-a-input-file-tag](https://stackoverflow.com/questions/3984815/jquery-best-way-to-style-a-input-file-tag)
*   [如何设置输入文件文本框的样式？](https://stackoverflow.com/questions/4840504/how-can-i-style-input-file-textbox)

如果您搜索它，那么它会为您提供 StackOverflow 本身的最佳答案。希望它会奏效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:41:42.220

不，它不能改变。

然而，有一个技巧在网络上广为流传。这个想法是给出`<input type="file"/>`一个不透明度值`0.1`并将其放置在图像的顶部。出于所有实际目的，它将是不可见的，只有图片可见，但它会收到鼠标点击。使用一些 Javascript，您可以在页面的其他位置显示选定的文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:55:50.423

您可以使用几行 javascript。这是示例演示[http://jsfiddle.net/eyjsF/](http://jsfiddle.net/eyjsF/)

# ios - 如何触摸 UISlider 拇指防止 UIScrollView 滚动

> ID：12260681
> 
> 赞同：2
> 
> 时间：2012-09-04T09:38:05.017
> 
> 标签：ios, uiscrollview, uislider

我见过很多类似的问题，但没有一个能完全帮助我。我有许多垂直 UISlider 填充宽 UIScrollView。如果我在滑块上拖动拇指，我希望水平 UIScrollView 被锁定并且只允许垂直滑动。如果我将 UISlider 拖到拇指上，我希望水平 UIScrollView 滚动。如果我在拖动之前触摸拇指，它目前可以工作。

我已经在滚动视图中覆盖了 touchesShouldCancelInContentView，但从未在该方法中遇到断点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:16:00.167

我必须覆盖 touchesShouldBegin:withEvent:inContentView 并将 delaysContentTouches 设置为 NO 以拦截触摸消息。

# iphone - 在服务器上它正在上传但 pdf 没有打开它说附件有一些错误

> ID：12260684
> 
> 赞同：5
> 
> 时间：2012-09-04T09:38:12.927
> 
> 标签：iphone, objective-c, ios, asihttprequest

我在我的 iphone 应用程序中生成了 pdf，现在我想将该 pdf 发送到服务器。为此，我正在转换为 NSData 并发送。

我在谷歌搜索并使用“POST”找到解决方案，但它适用于图像。

在服务器上它正在上传但 pdf 没有打开它说附件有一些错误

在下面的代码中，我这样做了：

```
NSData *pdfdata = [[NSData alloc] initWithData:[self.pdfFilePath dataUsingEncoding:NSASCIIStringEncoding]];
ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",MainUrl,@"updatefile.php"]]];
[request setDelegate:self];
        [request setPostValue:appDelegate.userId forKey:@"userid"];
         [request addData:pdfdata forKey:@"file"];
[request startSynchronous]; 
```

//self.pdfFilePath = /var/folders/a0/a01nF1oGGkebQxw7H0YsBU+++TI/-Tmp-/MyAccount.pdf;

请指导我，

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:54:40.167

而不是这个

`[request addData:pdfdata forKey:@"file"];`

使用下面的代码

```
[request setFile:self.pdfFilePath forKey:@"file"]; 
```

# python - 如何设置 TAL 条件以检查文件类型并相应地在 Plone 4.1 中渲染模板

> ID：12260688
> 
> 赞同：1
> 
> 时间：2012-09-04T09:38:30.897
> 
> 标签：python, plone, zope, template-tal, zpt

如何使用 tal 条件检查文件类型并在 Plone 4.1 中渲染模板

我的文件预览模板渲染取决于文件扩展名。如果文件扩展名是“pdf”，我希望使用这样的东西：（刚开始使用 TAL、TALES、METAL）

```
<tal:define="file_nm global string:${here/absolute_url}"
<tal:condition="file_nm.slice[-3:] = 'pdf'">

    <embed width="100%" height="100%" name="plug-in" tal:attributes="src string:${here/absolute_url}#" 
         draggable="false" onselectstart="false"  /> 
```

否则使用:(对于'pdf'以外的文件)

```
<IFRAME src="http://www.xyz.com" 
            tal:attributes="src string:${here/absolute_url}/rfpreview"
            ondragstart="false" onselectstart="false"
            width="100%" height="400" scrolling="auto" frameborder="0"></IFRAME> 
```

有人可以指导我自定义视图的完整自定义代码片段：atreal.richfile.preview.interfaces.ipreview-atreal.richfile.preview.viewlet

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:01:37.127

TAL 语句是现有标签的*属性*。您*可以*`tal:`使用命名空间前缀引入虚拟元素，但语句`define`仍然`condition`需要表示为属性。

此外，默认的 TALES 表达式类型是路径表达式，但您想使用 python 表达式。这很好，但您需要使用`python:`前缀指定它们。

最后但并非最不重要的一点是，除非绝对必须，否则不要使用`global`，这很少见。定义的名称存在于定义它们的 XML 元素的范围内，不需要存在于这些元素之外。

这是我表达逻辑的方式：

```
<tal:block define="ispdf python:here.absolute_url().endswith('.pdf')">

    <embed width="100%" height="100%" name="plug-in" 
         tal:condition="ispdf"
         tal:attributes="src string:${here/absolute_url}#" 
         draggable="false" onselectstart="false"  />

    <iframe src="http://www.xyz.com" 
         tal:condition="not:ispdf"
         tal:attributes="src string:${here/absolute_url}/rfpreview"
         ondragstart="false" onselectstart="false"
         width="100%" height="400" scrolling="auto" frameborder="0"></iframe>

</tal:block> 
```

这引入了一个新`<tal:block>`元素来定义`ispdf`由 python 表达式确定的布尔变量。`tal:condition`然后，这两个变体由每个元素上的属性根据该值为`True`或来打开或关闭`False`。

# ruby-on-rails-3 - 如何使用 OAuth 从 Rails 中的 yahoo 获取联系人列表

> ID：12260690
> 
> 赞同：1
> 
> 时间：2012-09-04T09:38:35.300
> 
> 标签：ruby-on-rails-3, oauth, yahoo, hotmail

我可以使用 Rails 中的 OAuth gem 成功地从谷歌获取联系人。我的gmail配置是：

```
:google=>{
    :key=>"***",
    :secret=>"***",
    :expose => true, 
    :scope=>"https://www.google.com/m8/feeds/" 
  } 
```

现在我想从雅虎和热邮件获得联系。如何获得该联系人我在我的 oauth_consumer.rb 文件中给出了以下配置

```
:yahoo=>{
   :client=>:oauth_gem, 
   :expose => true, 
   :allow_login => true, 
   :key=>"**",
   :secret=>"**",
   :scope=>"https://me.yahoo.com"
 }

:hotmail=>{
   :client=>:oauth_gem, 
   :expose => true, 
   :allow_login => true, 
   :key=>"**",
   :secret=>"**"  
 } 
```

当我尝试像在谷歌中所做的那样做同样的事情时，它会`like undefined method`为 nil:NilClass 提供错误小写'

我也尝试过[联系人](http://rubygems.org/gems/contacts)gem，但无法加载联系人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T07:26:31.320

请尝试使用 OmniContacts [https://github.com/Diego81/omnicontacts](https://github.com/Diego81/omnicontacts)这将对您有很大帮助。

1.  在你的 gemfile

    ```
    gem "omnicontacts" 
    ```

2.  创建 config/initializers/omnicontacts.rb

    ```
    require "omnicontacts"

    Rails.application.middleware.use OmniContacts::Builder do
      importer :gmail, "client_id", "client_secret", {:redirect_path => "/oauth2callback", :ssl_ca_file => "/etc/ssl/certs/curl-ca-bundle.crt"}
      importer :yahoo, "consumer_id", "consumer_secret", {:callback_path => '/callback'}
      importer :hotmail, "client_id", "client_secret"
      importer :facebook, "client_id", "client_secret"
    end 
    ```

3.  创建一个应用到雅虎[https://developer.apps.yahoo.com/projects](https://developer.apps.yahoo.com/projects)

    这将要求验证您的域。因此，只需将您的域更改`localhost:3000`为`local.appname.com:3000`或更喜欢您的实时服务器...（在本地更改主机 --- sudo gedit /etc/hosts）

4.  在你的控制器中

    ```
     @contacts = request.env['omnicontacts.contacts']
      @user = request.env['omnicontacts.user']
      puts "List of contacts of #{user[:name]} obtained from #{params[:importer]}:"
      @contacts.each do |contact|
        puts "Contact found: name => #{contact[:name]}, email => #{contact[:email]}"
      end 
    ```

# javascript - 在Objective-C中使用javascript按类获取元素返回空字符串

> ID：12260691
> 
> 赞同：0
> 
> 时间：2012-09-04T09:38:38.323
> 
> 标签：javascript, iphone, html, objective-c, string

我正在尝试使用 Javascript 按类获取元素，但我总是得到一个空字符串。这是代码：

```
 NSString * mystring = [webView stringByEvaluatingJavaScriptFromString:
                       @"function parse(el) { 
                                      var _parsed = el[0]; 
                                     return {parsed: _parsed } ; 
                        } 
                        parse(document.getElementsByClassName('out3')).parsed;"]; 
```

这是 HTML 代码：

```
<p class="out3">Date:<span class="out4">16/01/1998</span></p> 
```

我想得到“16/01/1998”。先感谢您。

# jquery - asp:panel show hide 不适用于 Jquery

> ID：12260695
> 
> 赞同：1
> 
> 时间：2012-09-04T09:38:47.840
> 
> 标签：jquery, asp.net

我在 ASPX 页面上有两个面板和一个文本框。两个面板都包含静态文本以及单选按钮以及必填字段验证器。要求如下。

1.  每当页面第一次加载时，如果文本框的值大于 1000，则不应显示第一个面板，而应显示第二个面板。
2.  如果值小于 1000，则应显示第一个面板，而不应显示第二个面板。

现在，问题是：

文本框的值可以由用户更改，因此取决于输入的值，使用 jQuery 我需要显示适当的面板。我不想为每个静态文本设置标签，然后为所有标签和单选按钮一一设置相同的属性；这就是我使用`<asp:Panel>`.

1.  我无法从后面的代码中将可见属性设置为 false，因为这样该面板将不会在 ASPX 页面上呈现并显示，隐藏将不起作用。
2.  我尝试`panelNA.Style.Add(HtmlTextWriterStyle.Display, "none")`从后面的代码进行设置，但这也不起作用。因为静态文本和控件在 UI 上仍然可见。
3.  由于我在面板内的单选按钮上需要字段验证器，因此我希望在面板分别隐藏或显示时禁用和启用这些验证器。
4.  在保存东西时，我无法检查面板的状态是否可见，因为它是由 jQuery 设置的。所以它在服务器端不可用，它总是说`visible = true`.

代码：

```
function disablePanelNA() {
  var value = 0;
  value = parseInt($('#<%=txt1.ClientID %>').val(), 10);
  if (value < 1000) {
   $('#<%= panel.ClientID %>').hide();
   $('#<%= panelNA.ClientID %>').show();
  }
  else
  {
    $('#<%= panel.ClientID %>').show();
    $('#<%= panelNA.ClientID %>').hide();
  }
}
<asp:TextBox ID="txt1" runat="server" onChange="disablePanelNA()" />
<asp:Panel ID="panel" runat="server">
<tr>
  <td class="numberColumnNoBold">a.</td>
  <td>Do you want to continue?</td>
  <td align="right">
    <asp:RadioButtonList ID="rbl1" runat="server" RepeatDirection="Horizontal">
      <asp:ListItem Value="Yes" Text="Yes" />
      <asp:ListItem Value="No" Text="No" />
    </asp:RadioButtonList>
    <AjaxRequiredFieldValidator ID="id1" runat="server" ControlToValidate="rbl1" 
                                ErrorMessage="Error occured" />
  </td>
</tr>
<tr>
  <td class="numberColumnNoBold">b.</td>
  <td>Do you want to exit?</td>
  <td align="right">
    <asp:RadioButtonList ID="rbl2" runat="server" RepeatDirection="Horizontal">
      <asp:ListItem Value="Yes" Text="Yes" />
      <asp:ListItem Value="No" Text="No" />
    </asp:RadioButtonList>
    <AjaxRequiredFieldValidator ID="id2" runat="server" ControlToValidate="rbl2"
                                ErrorMessage="Error occured again" />
  </td>
</tr>
</asp:panel>

<asp:Panel ID="panelNA" runat="server">
<tr>
  <td class="numberColumnNoBold">a.</td>
  <td>Do you want to continue?</td>
  <td align="right">
    <td align="right">
      <div style="text-align:right;font-weight:bold;padding-right:20px;">N/A</div>
    </td>
  </td>
</tr>
<tr>
  <td class="numberColumnNoBold">b.</td>
  <td>Do you want to exit?</td>
  <td align="right">
    <div style="text-align:right;font-weight:bold;padding-right:20px;">N/A</div>
  </td>
</tr>
</asp:panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:48:55.333

在后面的代码中使用这个

```
pnl.Style.Add("display", "none"); 
```

要从 javascript 中禁用验证器，请使用此

```
ValidatorEnable(document.getElementById('<%= reqfile.ClientID %>'), false);
ValidatorEnable(document.getElementById('<%= reqfile.ClientID %>'), true); 
```

要显示隐藏 div，您不需要知道 div 的可见状态，因为根据您提到的逻辑，div 将根据文本框的值隐藏或显示。

另外请在粘贴之前格式化您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T01:32:19.057

如果在 .aspx 标记/后面的代码中设置 Visible="false"，ASP.Net 控件将不会在页面中呈现。

最好去掉面板中设置的 Visible="false" 并添加样式 display:none。

如果您想在后面的代码中制作它，请遵循此代码

```
pnlUpdateDisplay.Style.Add(HtmlTextWriterStyle.Display,"none"); 
```

然后使用

```
$('#<%=pnlUpdateDisplay.ClientID %>').toggle() 
```

# java - ORM 继承和装饰器支持（Hibernate？）

> ID：12260699
> 
> 赞同：0
> 
> 时间：2012-09-04T09:39:05.007
> 
> 标签：java, hibernate, orm

在工作中，我一直在使用我们的内部 ORM（2000 年之前），我们正在考虑为我们的 java 迁移到另一个 ORM 解决方案，但是有一些特定的要求。有谁知道支持这些请求的任何形式或 ORM？

1.  支持继承：在我们的java中，我们有一个相当深的继承结构，目前如果我在“顶部”向一个类添加一个属性，那么我必须手动编辑ORM过程（在SQL中）为每个类添加新类子类

2.  支持装饰器表：我们的一些类需要能够存储针对特定对象的任何（用户提供的）属性，目前这只是一个将 Item Id 匹配到包含 FieldName 和 FieldValue 的行的表，我们提取所有这些作为属性。请参阅下文以获得更好的解释。

3.  内置对象持久性，因此对象仅在请求时才加载和写入数据库，否则留在内存中。如果您完成后可以自动保存任何更改，而不必打电话`.save()`（尽管有潜在危险？）

4.  像往常一样，易于使用（最好 - 这不是我们都想要的吗？）和良好的性能

感谢您抽出宝贵时间，很高兴用我们选择的内容、原因以及我们在实施过程中发现的一些提示来更新问题！

* * *

**#2的进一步解释：**

*（请不要问为什么一定要这样，改变它是这个项目的“超出范围”）*

物品表：

```
ItemId | Type  | Price
-------|-------|-------
1      | Mouse | 9.99
2      | Dog   | 12.99 
```

装饰表：

```
ItemId | FieldName | Value
-------|-----------|-------
1      | Age       | 12
2      | Breed     | Blue Long Hair
2      | Name      | Fluffy 
```

物品对象：

```
Item1
  ItemId -> 1
  Type -> Mouse
  Price -> 9.99
  Age -> 12

Item2
  ItemId -> 2
  Type -> Dog
  Price -> 12.99
  Breed -> Blue Long Hair
  Name -> Fluffy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:54:43.957

1.  JPA（以及 Hibernate）支持继承。
2.  我不太明白你的意思
3.  默认情况下，JPA/Hibernate 在事务期间将对象留在内存中。每个事务都有自己的对象副本，并且在每个事务开始时重新创建此一级缓存，因为任何其他并发事务（甚至另一个应用程序）都可能修改了对象。Java中没有析构函数，所以我不明白你的意思。但是在事务结束时，默认情况下，对实体的每次更改都会自动保存到数据库中。
4.  如果您阅读文档并花时间了解它的工作原理，那么 JPA/Hibernate 相对容易使用。但它有它的学习曲线。在 95% 的典型用例中性能是可以的，只要你了解 ORM 在幕后做了什么。

# validation - 如何验证依赖于 Symfony 2 中另一个属性的属性

> ID：12260705
> 
> 赞同：35
> 
> 时间：2012-09-04T09:39:12.800
> 
> 标签：validation, symfony

是否可以验证模型类的属性依赖于同一类的另一个属性？

例如，我有这个类：

```
class Conference
{
    /** $startDate datetime */
    protected $startDate;

    /** $endDate datetime */
    protected $endDate;
} 
```

我希望 Symfony 2.0 验证，`$startDate`必须在`$endDate`.

这可以通过注释实现还是我必须手动执行？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-10-24T19:02:37.207

从*Symfony 2.4*开始，您还可以使用[表达式](http://symfony.com/doc/current/reference/constraints/Expression.html)验证约束来实现您所需要的。我相信，这是最简单的方法。它肯定比回调约束更方便。

下面是如何使用验证约束注释更新模型类的示例：

```
use Symfony\Component\Validator\Constraints as Assert;

class Conference
{
    /**
     * @var \DateTime
     *
     * @Assert\Expression(
     *     "this.startDate <= this.endDate",
     *     message="Start date should be less or equal to end date!"
     * )
     */
    protected $startDate;

    /**
     * @var \DateTime
     *
     * @Assert\Expression(
     *     "this.endDate >= this.startDate",
     *     message="End date should be greater or equal to start date!"
     * )
     */
    protected $endDate;
} 
```

不要忘记在项目配置中[启用注释。](http://symfony.com/doc/current/book/validation.html#configuration)

[您始终可以使用表达式语法](http://symfony.com/doc/current/components/expression_language/syntax.html)进行更复杂的验证。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-04T09:45:36.127

是的，回调验证器：[http ://symfony.com/doc/current/reference/constraints/Callback.html](http://symfony.com/doc/current/reference/constraints/Callback.html)

在 symfony 2.0 上：

```
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\Validator\ExecutionContext;

/**
 * @Assert\Callback(methods={"isDateValid"})
 */
class Conference
{

    // Properties, getter, setter ...

    public function isDateValid(ExecutionContext $context)
    {
        if ($this->startDate->getTimestamp() > $this->endDate->getTimestamp()) {
                $propertyPath = $context->getPropertyPath() . '.startDate';
                $context->setPropertyPath($propertyPath);
                $context->addViolation('The starting date must be anterior than the ending date !', array(), null);
        }
    }
} 
```

在 symfony 主版本上：

```
 public function isDateValid(ExecutionContext $context)
    {
        if ($this->startDate->getTimestamp() > $this->endDate->getTimestamp()) {
            $context->addViolationAtSubPath('startDate', 'The starting date must be anterior than the ending date !', array(), null);
        }
    } 
```

在这里，我选择在 startDate 字段上显示错误消息。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-12T14:11:16.773

另一种方法（至少从**Symfony 2.3**开始）是使用 simple `@Assert\IsTrue`：

```
class Conference
{
    //...

    /**
     * @Assert\IsTrue(message = "Startime should be lesser than EndTime")
     */
    public function isStartBeforeEnd()
    {
        return $this->getStartDate() <= $this->getEndDate;
    }

    //...
} 
```

作为参考，[文档](http://symfony.com/doc/current/book/validation.html#getters).

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-09-02T21:25:35.147

[从2.4 版本](http://symfony.com/doc/2.4/reference/constraints/Callback.html)开始就更简单了。您所要做的就是将此方法添加到您的类中：

```
use Symfony\Component\Validator\Context\ExecutionContextInterface;

/**
 * @Assert\Callback
 */
public function isStartBeforeEnd(ExecutionContextInterface $context)
{
    if ($this->getStartDate() <= $this->getEndDate()) {
        $context->buildViolation('The start date must be prior to the end date.')
                ->atPath('startDate')
                ->addViolation();
    }
} 
```

该[`buildViolation`方法](http://api.symfony.com/master/Symfony/Component/Validator/Context/ExecutionContextInterface.html#method_buildViolation)返回一个构建器，该构建器具有几个其他方法来帮助您配置约束（如参数和翻译）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-27T07:00:54.963

一个更好更干净的解决方案[https://symfony.com/doc/3.4/validation/custom_constraint.html](https://symfony.com/doc/3.4/validation/custom_constraint.html) 是写

*   自定义约束（基本上是错误消息）
*   和它的验证器（它就像一个控制器函数来控制

要检查实体是否正常，请添加到自定义约束（不是验证器）

```
public function getTargets()
{
    return self::CLASS_CONSTRAINT;
} 
```

这允许您使用该实体的实例而不仅仅是属性值。这使得在验证器中写入成为可能：

```
public function validate($object, Constraint $constraint)
{
    #Your logic, for example:
    if($value1 = $object->getValue1())
    {
        if($value2 = $object->getValue2())
        {
            if($value1 === $value2)
            {
                # validation passed
                return True;
            }
            else
            {
                # validation failed
                $this->context->buildViolation($constraint->message)
                    ->setParameter('{{ string }}', $value1.' !== '.$value2)
                    ->addViolation();
            } 
```

最好的部分是您需要在实体类中编写的内容：

```
use YourBundle\Validator\Constraints as YourAssert;

/**
 * Yourentity
 *
 * @ORM\Table(name="yourentity")
 * @ORM\Entity(repositoryClass="YourBundle\Repository\YourentityRepository")
 *
 * @YourAssert\YourConstraintClassName # <-- as simple as this 
```

希望有帮助

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-31T06:45:07.337

对于日期验证，我们可以简单地使用 GreaterThan 和 GreaterThanOrEqual 比较约束。

```
class Conference
{
     /**
     * @var \DateTime
     * @Assert\GreaterThanOrEqual("today")
     */
    protected $startDate;

     /**
     * @var \DateTime
     * @Assert\GreaterThan(propertyPath="startDate")
     */
    protected $endDate;
} 
```

有关详细信息，请参阅[验证约束](http://symfony.com/doc/3.4/reference/constraints.html)

# sql - 从日期间隔获取行，即使它在一个表中不存在

> ID：12260710
> 
> 赞同：1
> 
> 时间：2012-09-04T09:39:24.993
> 
> 标签：sql

我有这个查询

```
SELECT Date,  IFNULL(Price, '------') AS Price
       FROM productHistory
WHERE Date between '2012-08-15' and '2012-08-19' AND Company='AAA' AND Product='PPP'
GROUP BY Date 
```

结果是：

```
Date.......Price
-------------------
2012-08-15...100,00 
2012-08-19...110,00 
```

它应该是这样的：

```
Date.........Price
-------------------------------------
2012-08-15......100,00   
2012-08-16......--------
2012-08-17......--------
2012-08-18......--------
2012-08-19......110,00 
```

我只使用一张桌子，我在这个论坛上检查了类似的问题，但我找不到解决方案。

当我得到这个时，我想做的是在查询中添加更多公司作为列以获得这样的结果。好吧，为此我必须更改查询..

```
Date.........PriceCompany1.....PriceCompany2.....PriceCompany3 
----------------------------------------------------------  
2012-08-15......100,00................................100,00..................................100,0
2012-08-16......---------...............................100,00...................................---------
2012-08-17......---------..............................----------.................................110,00
2012-08-19......110,00..............................100,00..................................---------- 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:01:39.107

`StoredProcedure`为此创造

```
CREATE PROCEDURE [dbo].[GetMasterData]
   @startDate DATETIME,
   @endDate DATETIME
AS    
BEGIN
SET NOCOUNT ON;

WITH dates(Date) AS 
(
    SELECT @startdate as Date
    UNION ALL
    SELECT DATEADD(d,1,[Date])
    FROM dates 
    WHERE DATE < @enddate
)
SELECT Date as Date1  into #tmp1  FROM dates
OPTION (MAXRECURSION 0) 

Select Date1,IsNULL(Price, '------') AS Price  from #tmp1 left outer join
productHistory on  #tmp1.Date1 = productHistory.Date
and Company='AAA' AND Product='PPP'

Drop table #tmp1

END 
```

并使用下面的行执行 sp

执行 GetMasterData '08/15/2012','08/19/2012'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:48:51.947

不需要过程，只需简单的 SQL 即可：

```
-- generate "pseudo calendar table" from the data:
WITH dt AS (
        SELECT DISTINCT zdate FROM producthistory
        WHERE zdate between '2012-08-10' and '2012-08-20'
        )
-- a poor man's PIVOT:
SELECT dt.zdate
        , pa.price AS price_a
        , pb.price AS price_b
        , pc.price AS price_c
FROM dt
LEFT JOIN producthistory pa ON pa.zdate = dt.zdate AND pa.company='AAA' AND pa.product='ppp'
LEFT JOIN producthistory pb ON pb.zdate = dt.zdate AND pb.company='BBB' AND pb.product='ppp'
LEFT JOIN producthistory pc ON pc.zdate = dt.zdate AND pc.company='CCC' AND pc.product='ppp'

ORDER BY zdate
; 
```

由于 OP 没有显示任何表定义或数据，我将不得不发明自己的：

```
CREATE TABLE producthistory
        ( company varchar
        , product varchar
        , zdate Date NOT NULL
        , price INTEGER
        );

INSERT INTO producthistory ( company, product, zdate, price ) VALUES
  ( 'AAA', 'ppp', '2012-08-15', 100)
, ( 'AAA', 'ppp', '2012-08-15', 110)
, ( 'AAA', 'ppp', '2012-08-15', 120)
, ( 'BBB', 'ppp', '2012-08-16', 200)
, ( 'BBB', 'qqq', '2012-08-16', 210)
, ( 'BBB', 'ppp', '2012-08-16', 220)
, ( 'CCC', 'ppp', '2012-08-15', 300)
; 
```

结果：

```
CREATE TABLE
INSERT 0 7
   zdate    | price_a | price_b | price_c 
------------+---------+---------+---------
 2012-08-15 |     100 |         |     300
 2012-08-15 |     110 |         |     300
 2012-08-15 |     120 |         |     300
 2012-08-16 |         |     200 |        
 2012-08-16 |         |     220 |        
(5 rows) 
```

*添加 IFNULL/COALESCE 函数（或其他格式化琐事）留给读者作为练习*

# php - PHP 加密和解密 - 高级

> ID：12260712
> 
> 赞同：0
> 
> 时间：2012-09-04T09:39:34.267
> 
> 标签：php, encryption, aes

我需要为客户创建一个良好的强加密系统。它将用于存储敏感的用户信息。我只是想从在这方面有更多经验的人那里得到一些建议。听起来 256 位 AES 将是我最好的选择。

我在想的是[http://www.movable-type.co.uk/scripts/aes-php.html](http://www.movable-type.co.uk/scripts/aes-php.html)

对于密钥，也许使用每个用户独有的哈希值？

这听起来像一个足够的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:53:00.260

SHA 只能单向工作（在任何人建议之前与示例 MD5 相同）。我认为他还想要一种在需要时轻松解密和读取存储数据的方法。

AES 确实是一个非常好的选择。我会用同样的。

您会在共享托管环境中部署您的解决方案吗？请务必使用您的加密/解密密钥对文件进行 chmod，以便其他用户无法访问它。锁上房子并将钥匙留在门前是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:43:41.723

AES 是最好的加密方式。:)

我已经使用 AES 加密类一年多了，这是在 php.ini 中使用 FIPS Compliant AES 加密的绝佳方式。该脚本有免费版本（仅限 ECB 模式）和付费版本，仅需 10 美元。

这是一个完全独立的类，不需要 mcrypt 库，并且支持 php4 和 php5。加密有 128、192 和 256 位，具体取决于密码长度。

使用它很简单：

```
include("AES.class.php");

$my_256_key = 'MpDsw*8cQM&fez*7eBoZB^W*kP652NoW';
$initialization_vector = 'WmR&z28zWn8r*9$R';

$aes = new AES($my_256_key, "CBC", $initialization_vector);

$string_to_encrypt = 'SOME STRING OF TEXT, OR EVEN AN ENTIRE FILE';

$encrypted_string = $aes->encrypt($string_to_encrypt);

$original_string = $aes->decrypt($encrypted_string); 
```

支持的密码模式包括：电子密码本 (ECB)、密码块链接 (CBC)、密码反馈 (CFB) 和输出反馈 (OFB)。– 分组密码模式 »

如果您需要将真正的加密集成到脚本中，我强烈推荐这门课。它足以存储信用卡等敏感数据（密钥管理是另一个主题），并且具有非常简单的界面。

请记住，加密仅与使用的密钥和密钥管理一样安全。与使用散列函数（Md5、SHA1）不同，加密可以反转，并且会大大减慢 PHP 脚本的速度，尤其是在加密大量数据时。

# iphone - JSON 数据 UITableView 到 UITableView

> ID：12260717
> 
> 赞同：1
> 
> 时间：2012-09-04T09:39:55.263
> 
> 标签：iphone, objective-c, xcode

我不太擅长编码，我的代码有一个严重的问题，我想将我的 json 数据从一个表显示到另一个表，例如：在第一个表视图中我想显示学生的名字，名字之后是点击后，它将跳转到下一个 tableview 并显示该学生已选择的课程（一个学生可能有多个课程），那么我该怎么做呢？这是第一个 tableview 中的 mycode

```
- (void)viewDidLoad
{
[super viewDidLoad];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this     view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
self.navigationItem.Title = @"選擇類別";
//    classify = [[NSArray alloc] initWithObjects: @"時尚類",@"飲食類",@"娛樂類",@"文創類",   nil];
//    NSString *path = [[NSBundle mainBundle] pathForResource:@"DataList" ofType:@"plist"];
//    classify_ = [[NSMutableArray alloc] initWithContentsOfFile : path];
NSURL *url = [NSURL URLWithString:@"http://localhost/store.php"];
NSData *jsonData=[NSData dataWithContentsOfURL:url];
NSError *error = nil;

classify_ = [NSJSONSerialization JSONObjectWithData:jsonData options:
        NSJSONReadingMutableContainers error:&error];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
 return 1;
 }

//table cell count
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [self.classify count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

 cell.textLabel.text = [[self.classify objectAtIndex:indexPath.row]   objectForKey:@"classify"];

return cell;

}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
// Make sure your segue name in storyboard is the same as this line
if ([[segue identifier] isEqualToString:@"Second"])
{
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    //NSManagedObject *object = [[self fetchedResultsController]   objectAtIndexPath:indexPath];
    [[segue destinationViewController] setSecondClassify:[self.classify objectAtIndex:indexPath.row]];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:46:01.750

表视图1.m：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];    
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {

        NSIndexPath *indexPath = [myTable indexPathForSelectedRow];
        NSDictionary *item = [displayItems objectAtIndex:[indexPath row]];

        [[segue destinationViewController] setDetailItem:item];
    } 
} 
```

表视图2.h：

```
@property (strong, nonatomic) id detailItem; 
```

表视图2.m：

```
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    if (self.detailItem) {
       itemID = self.detailItem;
       [self getCourse];
    }
}

- (void)getCourse{

      NSString *code = [NSString stringWithFormat:@"user=%@", itemID];
      NSData *postData = [code dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
      NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
      NSURL *url = [NSURL URLWithString:@"http://localhost/getUser.php"];

      NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
      [request setHTTPMethod:@"POST"];
      [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
      [request setHTTPBody:postData];

      NSURLResponse *response;
      NSError *error;
      NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

      allCourseArray = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

      NSDictionary *item = [allCourseArray objectAtIndex:0];

      NSString *courseName = [item objectForKey:@"courseName"];
      NSString *courseCode = [item objectForKey:@"courseCode"];
} 
```

# iphone - Obj-C“@interface”的类文件？

> ID：12260729
> 
> 赞同：1
> 
> 时间：2012-09-04T09:40:29.063
> 
> 标签：iphone, objective-c, ios, ios5

> **可能重复：**
> [.h 和 .m 文件中的@interface 定义之间的差异](https://stackoverflow.com/questions/3967187/difference-between-interface-definition-in-h-and-m-file)

Obj C 类文件有两个文件 .h 和 .m ，其中 .h 保存接口定义（@interface），.m 保存其实现（@implementation）

但是我在某些课程中看到 .h 和 .m 中都有一个@interface？

两个文件中的@interface 需要什么？有什么具体的理由这样做吗？如果这样做有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:54:39.153

**.m**文件中的 @interface 宏通常用于私有 iVar 和属性，以限制可见性。当然，这完全是可选的，但无疑是一种很好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:16:11.163

.h 文件中的`@interface`通常是公共接口，这是您要声明继承的接口，例如

```
 @interface theMainInterface : NSObject 
```

注意冒号`:`，然后`@interface`是继承自的超级对象`NSObject`，我相信这只能在 .h 文件中完成。您还可以`@interface`使用类别声明，例如

```
 @interface theMainInterface(MyNewCatergory) 
```

所以这意味着您可以`@interface`在一个 .h 文件中包含多个 s，例如

```
 @interface theMainInterface : NSObject

        // What ever you want to declare can go in here. 

   @end

   @interface theMainInterface(MyNewCategory)

        // Lets declare some more in here.

   @end 
```

在 .h 文件中声明这些类型的`@interface`s 通常会使它们中声明的所有内容都公开。

但是您可以在 .m 文件中声明 private `@interface`，这将执行以下三件事之一，它将私下扩展所选内容`@interface`或将新类别添加到所选内容`@interface`或声明新的私有`@interface`

您可以通过在 .m 文件中添加类似的内容来做到这一点。

```
 @interface theMainInterface()
      // This is used to extend theMainInterface that we set in the .h file.
      // This will use the same @implemenation
  @end

  @implemenation theMainInterface()
      // The main implementation.
  @end

  @interface theMainInterface(SomeOtherNewCategory)
      // This adds a new category to theMainInterface we will need another @implementation for this.
  @end 

  @implementation theMainInterface(SomeOtherNewCategory)
      // This is a private category added the .m file
  @end

  @interface theSecondInterface()
      // This is a whole new @interface that we have created, this is private
  @end

  @implementation theSecondInterface()
     // The private implementation to theSecondInterface
  @end 
```

这些都以相同的方式工作，唯一的区别是有些是`private`，有些是`public`，有些是`categories`

我不确定您是否可以`@interface`在 .m 文件中继承。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:54:53.400

.m 文件中出现的@interface 通常用于内部类别定义。将有一个类别名称后跟@interface 语句，格式如下

```
@interface ClassName (CategoryName)

@end 
```

当类别名称为空时，如下格式，其中的属性和方法被认为是私有的。

```
@interface ClassName ()

@end 
```

另请注意，您可能在私有类别中声明为 readwrite 并在标题中声明为 readonly 的属性。如果两个声明都是可读写的，编译器会报错。

```
// .h file
@interface ClassName
@property (nonatomic, strong, readonly) id aProperty;
@end

// .m file
@interface ClassName()
@property (nonatomic, strong) id aProperty;
@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T10:07:04.070

如果我们想声明一些私有方法，那么我们在 .m 文件中使用 @interface 声明。

# javascript - 将键码转换为字符

> ID：12260731
> 
> 赞同：2
> 
> 时间：2012-09-04T09:40:44.470
> 
> 标签：javascript

为什么有些键码会转换为其他字符？

[http://jsfiddle.net/h9268/](http://jsfiddle.net/h9268/)

我认为 219 应该是 [ 字符。

```
onKeyPress I get 91
onKeyDown I get 219 
```

火狐，测试页面：[http ://www.asquare.net/javascript/tests/KeyCode.html](http://www.asquare.net/javascript/tests/KeyCode.html)

更新：混淆是由 onKeyPress 和 onKeyDown 事件的键码产生的。onKeyPress 返回字符码（91），onKeyDown 返回键码（219）。

此表同时显示 ascii 代码和密钥代码（按浏览器）。[http://unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:44:22.693

That's for Unicode. It's taking the Unicode values and converting it to Unicode characters.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:44:43.293

它转换为 Unicode，这里是[转换](http://www.goascii.com/)表，请改用 91

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:44:29.537

W3Schools says:

```
Definition and Usage

The fromCharCode() method converts Unicode values into characters.

Note: This is a static method of the String object, and the syntax is always String.fromCharCode(). 
```

Instead of `219` must be `91` for `[` character

`219` means for keyCode not charCode

# python - 在应用程序引擎上接收邮件 - 某些发件人的电子邮件会退回

> ID：12260733
> 
> 赞同：0
> 
> 时间：2012-09-04T09:40:45.903
> 
> 标签：python, google-app-engine, email, email-bounces

我的应用引擎无法接收某些发件人的电子邮件，并返回以下消息：

```
*********************************************************************************
Delivery to the following recipient failed permanently:

     sometext@my-app-id.appspotmail.com

----- Original message -----

Received: by <recipient's ip> with SMTP id o5mr5102778igd.2.1346674874496;
        Mon, 03 Sep 2012 05:21:14 -0700 (PDT)
Return-Path: <sender-email@senderdomain.com>
Received: from mail-ie0-f177.senderdomain.com (mail-ie0-f177.senderdomain.com [<sender-ip>])
        by gmr-mx.senderdomain.com with ESMTPS id wo9si719480igc.1.2012.09.03.05.21.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 03 Sep 2012 05:21:14 -0700 (PDT)
Received-SPF: pass (senderdomain.com: domain of sender-email@senderdomain.com designates <sender-ip> as permitted sender) client-ip=<sender-ip>;
Authentication-Results: gmr-mx.senderdomain.com; spf=pass (senderdomain.com: domain of sender-email@senderdomain.com designates <sender-ip> as permitted sender) smtp.mail=sender-email@senderdomain.com; dkim=pass header.i=@senderdomain.com
Received: by ieje10 with SMTP id e10so4602552iej.22
        for <sometext@my-app-id.appspotmail.com>; Mon, 03 Sep 2012 05:21:14 -0700 (PDT)

DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=senderdomain.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-system-of-record;
        bh=XiHGSzr6o8p0wD7eNTHFG0qcWyXJz75LsjP/5TXbwYc=;
        b=mL9J2xP7mLM5VVKGgc9dhBCV7RClZOtIqyhE22JQlNro8jiCB/nBZBmzmv2G3wsoMw
         I3lRTKUmJFXKI07IFEHKAISQn/QuIQloR6Cn5H8eAMQBlXUbmmvC2Uq6g7mjiD3KV4Hf
         4RgHfe2B2cNrGNPLNMQF/Ftcn5cmb/NfikgefjvcVoxrf5/Y15JgR609/k5fyLVYSjxb
         uYFW9fNiPl9Cf0r/Blm5aEWkrNACyF86tbSTpH48XrxXIRU/riUgjbKIfrX4EArbUmuk
         sqEAxDYwHPrzLhyV/r8q1dPuJzISGQ2xJ9tYtZnrN4ExtKkvgqGg4Yh9QS1nFpcWVfrP
         Uniw==

X-<sender-domain>-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=senderdomain.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-system-of-record:x-gm-message-state;
        bh=XiHGSzr6o8p0wD7eNTHFG0qcWyXJz75LsjP/5TXbwYc=;
        b=oMfU8AGDLjA77FgK3imDh6sQdT+Fl37x/3P7ZOh8Ac7oTB4HEkfWClpAU3Ui7y3d9T
         BnsKRTCx7H/xUSYdguCU5eRyUmuo4wwTIgAi/OT7Do1nTecJx5DB8u416bflfkonBeSD
         RTyjjfan1NIG/fC8yF26DCMSFKJnKQNbCHlxB+LlYWMBrl5HO1Fxc+nYHf9qtha8qedT
         5B3TUFrLm1QS5FfIPJGq8jtTONANWa1vBijMAJReU6qauuKoPsVgTgWZ9B+grgE0Nfn3
         w6rUCxzq90d4R+QWcMzWDfzYksIhBgv/6NECjbSFiX0fVw/3vM1z9mCNbUNkB9rbyE0I
         DVkg==
Received: by 10.50.181.136 with SMTP id dw8mr10648907igc.31.1346674874247;
        Mon, 03 Sep 2012 05:21:14 -0700 (PDT)
Received: by 10.50.181.136 with SMTP id dw8mr10648883igc.31.1346674873921;
 Mon, 03 Sep 2012 05:21:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.50.214.39 with HTTP; Mon, 3 Sep 2012 05:20:53 -0700 (PDT)
In-Reply-To: <20120829165751.F24167488531@new_msg2.rancardsolutions.com>
References: <20120829165751.F24167488531@new_msg2.rancardsolutions.com>
From: <Sender-name> <sender-email@senderdomain.com>
Date: Mon, 3 Sep 2012 13:20:53 +0100
Message-ID: <CAOS-8ONnuWfPRhDuKseTOhjG94pBMVKq8PDQJw_gPuWdmEySUA@mail.gmail.com>

Subject: Fwd: GMAIL-SMS Summary(Active Networks)
To: sometext@my-app-id.appspotmail.com
Content-Type: multipart/mixed; boundary=14dae93408a37cf2e404c8cb2d38
X-System-Of-Record: true
X-Gm-Message-State: ALoCoQmNK+HxrLzS52zrj9RKLG9C/MeBJ5NiXcp9/+zVSFRGJtWvI0xGeO2x/e1bOR/sFUDQNYJjNj3KJfmI5L58JnRqz5WCe8/qCEjIDWNInsL1v9qew06Z7OEesEKEBgJazox1pAuQE8+J9syvYJdNXmGMaFHNvZcyEd8WkAdY1Pdbk8pNu1WyVK3ogioHs1kmpR5OQfvYHfBUArF95Z+fmVQldDSfgA==

---------- Forwarded message ----------
********************************************************************************* 
```

从上面的文字中，我无法找到错误原因。

注意：它适用于许多发件人。我没有为邮件服务启用登录：管理员。

这是我的代码片段：

应用程序.yaml

```
--------

application: my-app
version: 2
runtime: python
api_version: 1

handlers:
- url: /remote_api
  script: $PYTHON_LIB/google/appengine/ext/remote_api/handler.py
  login: admin

- url: /_ah/mail/sometext@my-app.appspotmail.com
  script: process_email.py

- url: .*
  script: main.py

inbound_services:
- mail 
```

* * *

## process_email.py 中的处理程序

```
 def receive(self, mail_message):
    if not hasattr(mail_message, 'attachments'):
      err = 'No attachment found.'
      self.status = 'ERROR'
      self.status_message.append(err)
      self.SendStatusMail(mail_message.sender)
      return
    for name, content in mail_message.attachments:
      report_time_period = self.GetReportTimePeriod(name)
      report_date = self.GetReportDate(name)
      if report_time_period and report_date and name.endswith('.csv'):
        records, product_prefix = self.ProcessCsv(content)
        if records and product_prefix:
          self.UpdateRecordsToDb(report_time_period, report_date, records,
                                 product_prefix)
      else:
        err = ('Invalid file name %s.' % (name))
        self.status = 'ERROR'
        self.status_message.append(err)

  self.SendStatusMail(mail_message.sender) 
```

* * *

有什么建议可以找到反弹的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:12:17.650

将代码放入 try-catch 并在处理附件时出错： **“在未引用的字段中看到换行符 - 你需要以通用换行模式打开文件吗？”** 使用 content.decode().splitlines() 解决了它。

虽然它不应该因为邮件仍然到达目的地而导致邮件传递失败。谢谢乔苏。

# api - 获取 iTunes 高清电影详细信息（通过抓取、iTunes API 或其他方式）

> ID：12260741
> 
> 赞同：1
> 
> 时间：2012-09-04T09:41:13.330
> 
> 标签：api, web-scraping, itunes, movie

有没有办法在 iTunes 商店获取高清电影信息（价格等）？如果电影同时以高清和非高清形式出售，这将变得特别棘手。

例如：*声望*（iTunes id = *209960866*）

如果您查看 iTunes 中的说明，您可以获得所有 4 种定价选项（即购买高清、购买普通、租用高清、租普通）。但是，据我所知，无法以编程方式抓取（或检索）此信息（如果我错了，请告诉我）。

如果您查看网络：http: [//itunes.apple.com/us/movie/the-prestige/id209960866](http://itunes.apple.com/us/movie/the-prestige/id209960866)

你只能得到正常的买入价（我也查看了源代码，看看抓取是否有效，它没有）。

如果您使用 iTunes 查找 API： http: [//itunes.apple.com/lookup ?id=209960866](http://itunes.apple.com/lookup?id=209960866)

同样，您只能获得正常的购买价格。

如何访问其他价格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T13:48:40.650

我写了一个 Scrapy 项目来抓取 iTunes 元数据并遇到了同样的问题。

将您的爬虫的 User-Agent 更改为以下内容。

iTunes/9.0.3（Macintosh；U；Intel Mac OS X 10_6_2；en-ca）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:42:15.763

我有同样的问题。我刚发现这个：

[http://www.apple.com/itunes/affiliates/resources/documentation/enterprise-partner-feed-flat.html](http://www.apple.com/itunes/affiliates/resources/documentation/enterprise-partner-feed-flat.html)

“企业合作伙伴源是来自 iTunes 和 App Store 的完整元数据集的数据源。它可供附属合作伙伴将 iTunes 和 App Store 目录的各个方面完全合并到网站或应用程序中。EPF 可用有两种不同的格式——要么作为构建关系数据库所必需的文件，要么作为依赖于国家和媒体的独立平面文件。”

然后在页面底部您可以在电视部分看到（希望这也适用于电影），您可以看到以下列表：

sd_price - 以标准质量格式购买电视剧集的价格。hq_price - 以高质量格式购买电视剧集的价格。lc_rental_price - 以低质量格式租用电视剧集的价格。sd_rental_price - 以标准质量格式租用电视剧集的价格。hd_rental_price - 以高质量格式租用电视剧集的价格。

希望有帮助。我还没来得及惹它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T23:48:23.500

hq_price 的描述为“高质量、无 DRM (iTunes Plus) 视频的零售价...”。我不相信这是高清价格。

我看不出有办法访问这些信息。你有没有发现其他的？

# facebook - Facebook Like Button 未在 IE 中显示，即使 html 标记中的 xmlns

> ID：12260743
> 
> 赞同：1
> 
> 时间：2012-09-04T09:41:31.293
> 
> 标签：facebook, internet-explorer, cross-browser, facebook-like, xml-namespaces

我的 Facebook Like 按钮适用于除 IE 之外的所有浏览器。我检查了 stackoverflow，提出的解决方案是将一些 xmlns 放在 html 标记中，如下所示：

```
<html xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/"> 
```

我已经这样做了，但是点赞按钮仍然没有出现。

除此之外，我使用 facebook script 标签，就在 body 标签下：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=99999999";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

和类似按钮：

```
<div class="fb-like" data-href="http://www.example.com" data-send="false" data-layout="button_count" data-width="72" data-show-faces="false" data-font="tahoma"></div> 
```

我在这里想念什么？

# iphone - 如何查看给定 iOS ipa 文件中定义的 NSString

> ID：12260744
> 
> 赞同：9
> 
> 时间：2012-09-04T09:41:31.223
> 
> 标签：iphone, objective-c, ios, security

我记得我以前做过这个，但是忘记了命令。

例如

我在源代码中定义了一个 NSString，例如

```
NSString * s = @"secret"; 
```

我记得我可以使用`strings`命令查看内容，但是我忘记了查看它的确切命令，

例如

```
strings my.ipa | grep "secret" 
```

不起作用。有人知道吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T10:23:19.353

我不确定是否可以直接使用`strings`on an `ipa`，但您可以执行以下操作：

1.  重命名您的`.ipa`文件以具有`.zip`扩展名。`ipa`'s 只是重命名的 zip。
2.  提取（它应该创建一个名为 的目录`Payload`）
3.  `cd`进入`Payload/<app-name>.app`
4.  您应该有一个`<app-name>`在当前目录中命名的文件。
5.  打电话`strings <app-name> | grep secret`。

# iphone - 在 iPhone 上的地图视图中搜索位置

> ID：12260749
> 
> 赞同：1
> 
> 时间：2012-09-04T09:41:51.987
> 
> 标签：iphone, cocoa-touch, mkmapview, uisearchbar

我有一个 MapView 和一个 SearchBar。我在搜索栏中输入了一些地名。我需要 MapView 来搜索我输入的地点并用注释标记该地点。谁能建议最好的步骤来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:47:21.913

像这样搜索地址：

```
- (CLLocationCoordinate2D)addressLocation:(NSString*)name 
{
    NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                           [name stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSUTF8StringEncoding error:nil];

    NSArray *listItems = [locationString componentsSeparatedByString:@","];

    double latitude = 0.0;
    double longitude = 0.0;

    if([listItems count] >= 4 && [[listItems objectAtIndex:0] isEqualToString:@"200"]) {
        latitude = [[listItems objectAtIndex:2] doubleValue];
        longitude = [[listItems objectAtIndex:3] doubleValue];
    }
    else {
        // error
    }
    CLLocationCoordinate2D location;
    location.latitude = latitude;
    location.longitude = longitude;

    return location;
} 
```

而不是使用返回的位置对象创建注释 ( `NSObject <MKAnnotation>`) 并将其添加到您的地图视图中：

```
[self.mapView addAnnotation:annotation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:52:25.983

您可以使用 Google api 和 NSXMLParser 来获取搜索地点的坐标，然后在该特定坐标处添加注释

对于 NSXMLParser，请查看我在 [https://stackoverflow.com/questions/10845732/xml-parser-objective-c/10845892#10845892中的回答](https://stackoverflow.com/questions/10845732/xml-parser-objective-c/10845892#10845892)

您可以使用以下 google api 获取 latlng

```
NSMutableString *url    =   [NSMutableString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/xml?address="];

// replace searchAddressString with your address from search bar.

[url appendString:[searchAddressString stringByReplacingOccurrencesOfString:@" " withString:@","]];
[url appendString:@"&sensor=true"]; 
```

现在要添加注释，您可以在此处按照我的回答 [如何从任何城市或地名设置地图位置](https://stackoverflow.com/questions/11682102/how-to-set-map-location-from-any-city-or-place-name/11682659#11682659)

希望对你有帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:04:08.323

试试这个，

```
-(void)searchBar:(UISearchBar *)searchbar textDidChange:(NSString *)searchText {

    NSString *searchURL=[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/xml?location=13.0604220,80.2495830&radius=500&types=restaurant&name=%@&sensor=false&key=%@",searchBar.text,kGooglePlaceAPIkey];
    NSURL *url=[[NSURL alloc]initWithString:searchURL];
    NSURLRequest *URLReq=[[NSURLRequest alloc]initWithURL:url];
    [NSURLConnection connectionWithRequest:URLReq delegate:self];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [activityIndicator startAnimating];
    [NSURLConnection  sendAsynchronousRequest:URLReq   queue:queue     completionHandler:^(NSURLResponse *response,NSData *data,NSError *error) 
     {

         xmlParser=[[XMLParser alloc]loadXMLByURL:searchURL];
         [self.tableView reloadData];
         [mapView removeAnnotations:mapView.annotations];
         DisplayMap *selected = [[DisplayMap alloc] init];
         for(int i=0;i<[xmlParser.places count];i++) {

             currentPlace=[[xmlParser places]objectAtIndex:i];
             MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
             region.center.latitude = [currentPlace.latitude doubleValue];
             region.center.longitude = [currentPlace.longitude doubleValue];
             region.span.longitudeDelta = 0.03f;
             region.span.latitudeDelta = 0.03f;
             [mapView setRegion:region animated:YES]; 
             [mapView setDelegate:self];
             mapView.zoomEnabled = YES;
             mapView.scrollEnabled = YES;
             DisplayMap *ann = [[DisplayMap alloc] init]; 
             ann.item=i;
             ann.title = currentPlace.name;
             ann.subtitle = currentPlace.address; 
             ann.coordinate = region.center; 
             [mapView addAnnotation:ann];
             if (currentSelectPlace == i)
                 selected = ann;
         }

         if(value == 1) {

             if(currentSelectPlace+1) {

                 [mapView setCenterCoordinate:selected.coordinate animated:YES];
                 [mapView selectAnnotation:selected animated:NO];
             }

         }
         [activityIndicator stopAnimating];

     }];
    [self.mapView reloadInputViews];

}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchbar {
    [searchBar resignFirstResponder];
} 
```

# iphone - 设置参数时，Restkit sendObject 不发布对象

> ID：12260752
> 
> 赞同：0
> 
> 时间：2012-09-04T09:42:04.373
> 
> 标签：iphone, objective-c, ios, restkit

我正在尝试使用 Restkit 发布一个对象，但是当我设置一些额外的参数时，它不再发布该对象。

```
NSDictionary *params = [NSDictionary dictionaryWithObject:@"mic" forKey:@"type"];

    [[RKObjectManager sharedManager] sendObject:rating toResourcePath:@"/mic" usingBlock:^(RKObjectLoader *loader) {
        loader.delegate = self;
        loader.method = RKRequestMethodPOST;
        loader.params = params; // without this line, the 'rating' object is posted, 
    }]; 
```

我需要发送未包含在对象中的额外 POST 参数，使用上面的代码，我通过 POST 接收到额外的“类型”参数，但未接收到对象。

[我阅读了文档https://github.com/RestKit/RestKit/wiki/Object-mapping](https://github.com/RestKit/RestKit/wiki/Object-mapping)的参数部分- 由于方法已更改，文档必须有点旧，但概念是相同的。我没有看到我做错了什么......非常感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:32:19.763

搜索 RestKit 的“prepareURLRequest”源

第一行写着：

```
 if ((self.sourceObject && self.params == nil) && (self.method == RKRequestMethodPOST || self.method == RKRequestMethodPUT)) 
```

所以，你的 sourceObject 是有效的，但你的参数不是零，所以你的对象永远不会被序列化。

此外，当您的对象成功序列化时，它会被放入“params”值中。所以，如果你说“loader.params = params”，你就是在覆盖你的初始对象。

这里最好的解决方案是更改“sourceObject”，使其具有额外的参数，并相应地为其创建映射。

除此之外，您可能必须使用更通用的方法（查看 loadObject）并在您的块中，将方法更改为“POST”并手动更改构建您的 post-data 块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T14:20:50.880

我找到了解决方案，它有点冗长，因为在使用时`sendObject`不幸`loadObject`的是，该方法假定您将返回与您发送的对象相同的对象作为回报。这对我来说不是这种情况，因为它要么返回同一个对象……要么返回一个错误对象。所以我就是这样做的

```
RKObjectManager *manager = [RKObjectManager sharedManager];
    [manager loadObjectsAtResourcePath:@"/mic" usingBlock:^(RKObjectLoader *loader) {
        loader.delegate = self;
        loader.method = RKRequestMethodPOST;
        NSError* error;
        RKObjectMapping* serializationMapping = [manager.mappingProvider serializationMappingForClass:[Rating class]];
        RKObjectSerializer* serializer = [RKObjectSerializer serializerWithObject:rating mapping:serializationMapping];
        id params = [serializer serializationForMIMEType:manager.serializationMIMEType error:&error];

        if (error) {
            NSLog(@"Error serializing object");
        }

        NSLog(@"Params class: %@", [params class]);

        if ([params respondsToSelector:@selector(setValue:forKey:)])
            [params performSelector:@selector(setValue:forKey:) withObject:@"mic" withObject:@"type"];

        loader.params = params;
    }]; 
```

我序列化了块中的对象，然后在结果字典中添加了一个参数。这样，我不必给对象一个额外的“类型”属性......这意味着我必须将它添加到我计划发布的每个对象中。

# c# - Can we apply connection pooling to SQL native client

> ID：12260757
> 
> 赞同：1
> 
> 时间：2012-09-04T09:42:20.177
> 
> 标签：c#, .net, sql, sql-server, connection-pooling

I have a connection string in VBA (part of Excel sheet) which is connecting to SQL Server.

```
Provider=SQLNCLI10.1;Integrated Security=SSPI;Auto Translate=False; 
```

It uses SQL Native client.

Can we apply connection pooling using `pooling='true'` in the connection string? If not how can we apply connection pooling?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:48:05.110

`SQL Native Client`不包括基本 MDAC **（Microsoft 数据访问组件）**组件中已存在的用户可访问功能，例如连接池、ADO 支持、内存管理或客户端游标支持。它使用 MDAC 来提供该功能。

有关更多信息，请参阅：[SQL Native Client](http://www.yaldex.com/sql_server/progsqlsvr-CHP-6-SECT-1.html)

**编辑：**

有**[多个活动结果集 (MARS)](http://msdn.microsoft.com/en-us/library/ms131686.aspx)**选项。

# python - 如何在不以特定关键字开头的括号内提取字符串（断言后面有否定的外观？）

> ID：12260758
> 
> 赞同：0
> 
> 时间：2012-09-04T09:42:22.330
> 
> 标签：python, regex, negative-lookbehind

我想从下面的字符串（既不以或开头的字符串）中找到（测试）字符串的字符串位置：

```
 •  <test>* (for test) (or test) (test) 
```

是否可以在断言后面使用否定查找来找到特定的字符串？我正在使用这个正则表达式，但我遗漏了一些东西：

```
m_comments = re.search('(?<!\(for)|(?<!\(or)', line) 
```

我们也可以在断言后面结合一个 or 语句吗？

注意： test 可以是任何可能的字符串：

```
<an other eg> (for another test) (or with this) (anything) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:04:04.190

试试这个

```
\((?!for|or).*?\) 
```

[在 Regexr 上](http://regexr.com?321j2)看到它

使用`\(.*?\)`I 匹配从左括号到第一个右括号的所有内容。

然后我使用负前瞻`(?!for|or)`来确保在左括号之后没有“for”和“or”。

在 Python 的后向断言中，不可能使用交替。它们必须是固定长度的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:55:25.710

我认为您想使用`find`字符串方法，而不是正则表达式：

```
string_to_look_up.find('(test)') 
```

# android - Android 中的 Activity 过渡动画

> ID：12260761
> 
> 赞同：4
> 
> 时间：2012-09-04T09:42:35.407
> 
> 标签：android, android-animation, android-lifecycle

我想应用 HTC 手机那样的 Activity 过渡：当你开始一个新的 Activity 时有一个从右到左的滑动，但是当你按下后退按钮返回上一个 Activity 时，有一个向左滑动-向右动画。

我`overridePendingTransition`在`onResume`我的活动中使用来模拟从右到左的滑动动画，但是当我按下后退按钮时，执行了相同的动画，这是错误的（从结果的角度来看）。

因此，我想问一下如何为一个活动管理不同的动画，一个用于创建它的动画，一个用于用户按下返回键的动画。

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T14:35:05.500

要在用户按下后退按钮时定义动画，您必须在其中覆盖并`onBackPressed()`在其中使用：`Activity``overridePendingTransition()`

```
public void onBackPressed() {
    super.onBackPressed();
    overridePendingTransition(R.anim.in_from_left, R.anim.out_to_right);
} 
```

所以这个动画只会在按下后退按钮时显示。

要在新 Activity 打开时设置动画，您只需在调用`startActivity()`或类似方法后定义动画：

```
startActivity(some_intent);
overridePendingTransition(R.anim.in_from_right, R.anim.out_to_left); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-24T07:33:13.443

您在 android 活动 overridePendingTransition 中使用了默认动画

```
startActivity(new Intent(getApplicationContext(),Login.class));
overridePendingTransition(android.R.anim.fade_in,android.R.anim.fade_out); 
```

# javascript - Page_ClientValidate 未定义

> ID：12260763
> 
> 赞同：1
> 
> 时间：2012-09-04T09:42:38.637
> 
> 标签：javascript, asp.net

我在 MaterPage 中写了一个 js 函数

```
 function CheckClientValidate(Validations) {
        Page_ClientValidate(Validations);
        if (Page_IsValid) {
            return true;
        }
        else {
            return false;
        }
    } 
```

我在我的webProject中使用了MaterPage，项目中的大多数页面都可以使用func，但是有一个错误，比如`Page_ClientValidate is not defined` 我可以使用FireBug来查找func `Page_ClientValidate`，但为什么只显示错误页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:50:02.393

可能是您没有在该特定页面上使用母版页。

# android - ASP.Net Listbox Empty on Android and iPhone

> ID：12260766
> 
> 赞同：1
> 
> 时间：2012-09-04T09:42:46.377
> 
> 标签：android, iphone, asp.net

I created a small web site, with a ASP.Net Listbox(.Net 4.0).

When I acces the site from My computer using either Chrome og IE10, it Works fine. When i open it on Ipad, Iphone or My samsung Galaxy s3 (Android 4.0.3) the listbox appears empty, however when i click i can see the possible options to select. Is there anyway to make the visible at all times like on my computer ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:44:50.210

Hartok 这是字体颜色问题。您只是尝试更改字体颜色可能会解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T01:13:25.027

我遇到了同样的问题。我通过用 Listview 替换 Listbox 来修复它。

# vb.net - vb.net Dictionary

> ID：12260771
> 
> 赞同：0
> 
> 时间：2012-09-04T09:43:09.043
> 
> 标签：vb.net

I have added a reference (component) into a project. I need to create a control array using dictionary and I want to add the item as that reference component. How to add the item as that component and call the constuctor of dictionary .I have code like

```
Private Sub InitializeComponent()
        Me.Add(0, New WImage)
End Sub

Public Sub Add(ByVal new_key As Integer, ByVal new_AxWImageArray As WImage) 
    Dictionary.Add(new_key, new_AxWImageArray)
End Sub

Default Public Property Item(ByVal key As Integer) As WImage
    Get

        Return DirectCast(Dictionary.Item(key), WImage)

        ' Return CType(_mydictionary.IndexOf(key, Values), WImage)

    End Get
    Set(ByVal Value As WImage)
        Dictionary.Item(key) = Value
    End Set

End Property 
```

I get Object reference error at `Me.Add(0, New WImage)` of `InitializeComponent()`.

# c - ternary operator without else in C

> ID：12260777
> 
> 赞同：44
> 
> 时间：2012-09-04T09:43:24.700
> 
> 标签：c, operator-keyword, if-statement, ternary

I want to use ternary operator without else in C. How do I do it.

```
(a)? b: nothing; 
```

something like this. What do I use in nothing part?

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-04T09:48:38.233

如果您正在使用这样的三元运算符，大概可以将其替换为：

```
if (a) { b; } 
```

这*要好得多*。（意图更清晰，所以代码更容易阅读，不会有性能损失。）

但是，如果您使用三元运算符作为表达式，即

```
printf("%d cat%s", number_of_cats, number_of_cats != 1 ? "s" : <nothing>);

a = b*c + (d == 0 ? 1 : <nothing>); 
```

那么这个`<nothing>`值取决于它被使用的上下文。在我的第一个例子中，`<nothing>`应该是`""`，在第二个例子中应该是`0`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-09-14T10:33:42.223

省略的假表达式无效。尝试扭转这种情况。

```
(!a) ?: b; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-04T12:38:16.957

`if-else`是一个控制流构造，而`?:`它是一个运算符，并且`x ? y : z`是一个表达式 - 一个表达式不能有“无值”，而控制流可以有一个“什么都不做的路径”。if-else 和 ?: 之间没有真正的等价关系 - 它们并非在所有情况下都可以互换。

*在某些*情况下你可以达到你想要的效果，但它的效率可能不如不`if`使用`else`. 比如效果：

```
if( x )
{
    y = z ;
} 
```

可以通过以下方式实现：

```
y = x ? z : y ; 
```

但是`else y = y`当 x 为 false 时，有一个有效但冗余的分配，您的编译器可能会或可能不会优化。所以你可以达到效果，但前提是你知道“当前值”作为`?:`表达式结果返回。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-04T09:44:23.577

You can't omit the `else` part. Just use a none expression.

But, in that case, it is often better to use an `if`...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-07T16:37:22.773

我尝试将任何整数放在那里，效果很好。例如，如果你想返回“a”，如果它被评估为真，那么你可以这样写：

```
true ? a : 1; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-14T01:47:25.247

似乎这个问题已经存在了一段时间，但 FWIW 一个用 GCC 4.6.3 编译的简短 C 程序揭示了以下内容：

1.  以下不编译：`a = a ? b:;`. “错误：';'之前的预期表达式 令牌”。
2.  以下是等效的：`a = a ?: b;`和`a = a ? a : b;`

也许有人可以添加更多编译器方面的细节，但对我来说，省略执行路径似乎`true`只是很花哨。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-01T15:41:33.943

三元表达式基于从布尔条件派生的语句。如果按照您的预期标记了一个语句，`void()`那么什么也不会发生。

C++ 代码：

```
condition ? add(value) : void(); 
```

C代码：

```
condition ? add(value) : 0; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-06T16:27:23.923

我做了这个

`isLeapYear(i) ? cout<< i<<endl: cout<<"" ;`

但不确定，如果这对性能有任何影响。

* * *

## 回答 #9

> 赞同：-9
> 
> 时间：2012-09-04T11:12:05.137

尝试这个

```
BOOL bIsOK = (a == 5)?TRUE:FALSE; 
```

# .htaccess - rewriterule -> http://www.domain.com 到一个页面

> ID：12260779
> 
> 赞同：0
> 
> 时间：2012-09-04T09:43:33.177
> 
> 标签：.htaccess, url-rewriting

[当用户使用http://www.domain.com](http://www.domain.com)访问该站点时，我如何编写一个规则将用户带到 /data/test.php （之后没有其他内容（可能是斜线））。我的根文件夹中没有其他页面，甚至没有 index.html。所有其他规则都需要域之后的内容，但如果我只输入域，我会得到目录列表。知道它是如何完成的。我做了下面的那个，但是它将所有内容（任何请求路径）重定向到指定的文件。

```
RewriteRule ^/? /data/test.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:03:49.967

然后尝试 RewriteRule ^/?$ /data/test.php

# macos - Screenshot in cocoa mac

> ID：12260780
> 
> 赞同：0
> 
> 时间：2012-09-04T09:43:37.133
> 
> 标签：macos, nsview, nswindow

I want to achieve a screenshot functionality in cocoa app. The requirement is, After some specified time interval, a view/window (screen capture window) will appear take the screenshot of the complete screen and moves away.

I want this screen capture window to appear from the right bottom corner of the screen (Not from the main window) ?

If main window is minimized i still want this screen capture window to come, take the screenshot and go away back with animation.

Please guide me how to achieve this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:03:35.723

你可以使用`screencapture`命令。

> screencapture -- 从屏幕上捕获图像并将它们保存到文件或剪贴板

```
screencapture -mx -T0 /path/screenShot.png 
```

# android - 如何使用 ORMLite 查询生成器获取表中的总记录

> ID：12260781
> 
> 赞同：22
> 
> 时间：2012-09-04T09:43:39.150
> 
> 标签：android, ormlite, query-builder

如同

```
select count(*) from tablename; 
```

在 ORMLITE 中应该查询什么

我试过类似的东西

```
int total = dao.queryBuilder().("select count(*)"); 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-04T19:46:33.437

> 如何使用 ORMLite 查询生成器获取表中的总记录

[ORMLite](http://ormlite.com/)有一个[`Dao.countOf()`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#countOf%28%29)方法可以返回表中的总行数：

```
long numRows = dao.countOf(); 
```

您还可以通过调用or对象上的方法来计算[自定义查询中的行数。](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/Where.html#countOf())`countOf()``Where``QueryBuilder`

```
// count the number of lines in this custom query
long numRows = dao.queryBuilder().where().eq("name", "Joe Smith").countOf(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:48:19.260

对于包 5：您可以使用`countOf()`

从文档：

> 返回从 SELECT COUNT(*) 查询返回的值，该值是表中的行数。根据数据库和表的大小，这可能会很昂贵。

# c# - 索引不适用于 Raven DB，如何调试它？

> ID：12260789
> 
> 赞同：2
> 
> 时间：2012-09-04T09:44:04.823
> 
> 标签：c#, ravendb

我有一个索引：

```
public class FreeSearchIndex : 
    AbstractIndexCreationTask<Post, FreeSearchIndex.Result>
{
    public FreeSearchIndex()
    {
        Map = posts => from post in posts
                       select new
                          {
                              Query = post.Tags.Concat(new[]
                                       {
                                           post.Title,
                                           post.Body
                                       }),
                              DatePosted = post.Date
                          };

        Index(x => x.Query, FieldIndexing.Analyzed);            
    }

    public class Result
    {
        public object[] Query { get; set; }
        public DateTime DatePosted { get; set; }
    }
} 
```

并有方法：

```
public List<Post> Filter(string freeSearch)
{
    IQueryable<Post> posts;
    var posts = documentSession
            .Query<FreeSearchIndex.Result, FreeSearchIndex>()
            .Where(x => x.Query == (object)freeSearch)
            .OrderByDescending(x => x.DatePosted)
            .As<Post>();                                 

    return posts.ToList();
} 
```

并进行单元测试：

```
[SetUp]
public void Setup()
{
    store = new EmbeddableDocumentStore
                {
                    RunInMemory = true
                };

    store.Initialize();

    session = store.OpenSession();

    IndexCreation.CreateIndexes(typeof(FreeSearchIndex).Assembly, store);
}

[Test]
public void GivenFreeSearchPhrase_Filter_ShouldOutputFilteredPostsByGivenPhrase()
{            
    session.Store(new Post { Body = "universal answer to everything is 42" });
    session.SaveChanges();

    var posts = Filter("everything");

    Assert.AreEqual(1, posts.Count);            
} 
```

它失败了，因为查询返回 0 个帖子。我该如何解决这个问题？我应该检查生成的查询，是否可以检查它如何索引存储中的字段（在内存中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:18:22.810

我怀疑索引器只是没有时间处理新数据。您可能会不时通过此测试，具体取决于机器负载、CPU 和内存性能。`WaitForStale`据我所知，您需要在单元测试中使用某种解决方案。

我从github 上的[RavenOverflow应用程序得到这个](https://github.com/PureKrome/RavenOverflow/blob/master/Code/RavenOverflow.Tests/RavenDbFactBase.cs)

```
public abstract class RavenDbFactBase : IDisposable
{        
    public class NoStaleQueriesListener : IDocumentQueryListener
    {
        public void BeforeQueryExecuted(IDocumentQueryCustomization c)
        {
            c.WaitForNonStaleResults();
        }        
    }        
} 
```

但是，在生产中，您不使用它，而只是快速带来陈旧的数据。

# javascript - AJAX toolkit Tabcontainer First tab visible always

> ID：12260790
> 
> 赞同：1
> 
> 时间：2012-09-04T09:44:08.117
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit, tabcontainer

I am using AJAX toolkit TabContainer control to display 4 tabs in asp.net page. I have problem with this control that First tab is visible always when i click on any other tab. Anybody have solution for this problem? Code is :

```
<ajaxToolkit:TabContainer runat="server" ID="TabContainData" ActiveTabIndex="0">
                            <ajaxToolkit:TabPanel runat="server" ID="tabCreateData">
                                <HeaderTemplate>
                                    Create Data
                                </HeaderTemplate>
                                <ContentTemplate>
                                    <table>
                                        Table Content here                                       
                                    </table>
                                </ContentTemplate>
                            </ajaxToolkit:TabPanel>
                            <ajaxToolkit:TabPanel runat="server" ID="tabDataAssign">
                                <HeaderTemplate>
                                    Assignment of data
                                </HeaderTemplate>
                                <ContentTemplate>
                                    <table>
                                        Table Content here
                                    </table>
                                </ContentTemplate>
                            </ajaxToolkit:TabPanel>
                            <ajaxToolkit:TabPanel runat="server" ID="tabDataTask">
                                <HeaderTemplate>
                                    Data Task
                                </HeaderTemplate>
                                <ContentTemplate>
                                    <table>
                                        Table Content here
                                    </table>
                                </ContentTemplate>
                            </ajaxToolkit:TabPanel>
                            <ajaxToolkit:TabPanel runat="server" ID="tabReviewData">
                                <HeaderTemplate>
                                    Review Data
                                </HeaderTemplate>
                                <ContentTemplate>
                                    <table>
                                        Table Content here
                                    </table>
                                </ContentTemplate>
                            </ajaxToolkit:TabPanel>
                        </ajaxToolkit:TabContainer> 
```

# actionscript-3 - Passing SQL Results in labels

> ID：12260795
> 
> 赞同：0
> 
> 时间：2012-09-04T09:44:26.027
> 
> 标签：actionscript-3, sqlite, air

I have a select statement that queries the top 5 players who got high scores

```
selectStmt = new SQLStatement();
selectStmt.sqlConnection = conn;            
selectStmt.text="SELECT name, level, score FROM highscores WHERE ROWID <=5 ORDER BY score DESC";        
selectStmt.execute(); 
```

I want the name, level, and score displayed in labels. How can I pass the results in labels?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:58:38.340

你必须：

1.  听`SQLEvent.RESULT`
2.  执行您的查询
3.  处理结果

```
selectStmt = new SQLStatement();
selectStmt.sqlConnection = conn;
selectStmt.text="SELECT name, level, score FROM highscores WHERE ROWID <=5 ORDER BY score DESC";

// Create a listener in order to process the results
var resultHandler:Function = function(event:SQLEvent):void {
    selectStmt.removeEventListener(SQLEvent.RESULT, resultHandler);

    // Get the result
    var result:SQLResult = dbStatement.getResult();
    if (result != null) {
        // Iterate through each entries
        for each (var entry:Object in result.data) {
            // Trace entry
            trace(entry.name, entry.level, entry.score);
        }
    }
};

// Add a listener in order to read the results when the request will be done
selectStmt.addEventListener(SQLEvent.RESULT, resultHandler);
selectStmt.execute(); 
```

# maven - 使用 Maven 的 Play 框架项目的“不可解析的父 POM”

> ID：12260798
> 
> 赞同：1
> 
> 时间：2012-09-04T09:44:37.357
> 
> 标签：maven, playframework, playframework-1.x

我正在尝试编译一个 Maven 项目，该项目可以在一台 Ubuntu 机器上运行，但不能在另一台机器上运行，我不知道为什么。它使用 Play 框架。项目的 pom.xml 文件的开头包含：

```
<parent>
<groupId>org.play</groupId>
<artifactId>play-parent</artifactId>
<version>1.1</version>
</parent> 
```

当我运行 mvn install 时，我收到此错误：

```
[INFO] Scanning for projects...
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]   
[ERROR]   The project ... pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Failure to find org.play:play-parent:pom:1.1 in 
http://repo.maven.apache.org/maven2 was cached in the local repository, resolution
 will not be reattempted until the update interval of central has elapsed or 
updates are forced and 'parent.relativePath' points at wrong local POM @ 
line 5, column 11 -> [Help 2] 
```

我从另一台机器复制过来的 Maven settings.xml 文件包含：

```
 <settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                          http://maven.apache.org/xsd/settings-1.0.0.xsd">

<localRepository/>
<interactiveMode/>
<usePluginRegistry/>
<offline/>
<pluginGroups/>
<servers>
     artifactory ids, logins and passwords
    </servers>
<mirrors/>
<proxies/>
<profiles/>
<activeProfiles/>
</settings> 
```

我安装了 play 框架并按照指示运行“play install maven”以安装 play maven 模块：[http](http://www.playframework.org/modules/maven-1.0/home) ://www.playframework.org/modules/maven-1.0/home我假设我需要以某种方式告诉 Maven 在哪里这个模块是。我不想修改 pom.xml 文件，因为它在另一台机器上工作，我宁愿以更好的方式解决这个问题。

有谁知道出了什么问题或对我能做什么有任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:58:31.267

您在本地 Maven 存储库中缺少 play-parent。您链接的页面指示您这样`play mvn:init`做，所以这样做。

显然，该命令将模块安装到本地 repo*并*创建一个新的 pom.xml 文件。如果您不希望后者发生，我认为您可以存储当前的 pom 并`play mvn:init`在本地存储库中完成 play-parent 安装后恢复到该状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T08:05:47.580

我遇到了类似的问题，并且能够通过将我的 settings.xml 复制到位于我的根文件夹中的 .m2 目录并从终端对项目执行“mvn clean install”来解决它。让我知道它是否有帮助。

# c++ - 我在哪里可以找到 libboost_random？

> ID：12260800
> 
> 赞同：2
> 
> 时间：2012-09-04T09:44:53.363
> 
> 标签：c++, ubuntu, boost, random, linker

我正在尝试编译默认编译为静态的 websocket++。我认为共享选项是最好的，所以我做了：

```
make SHARED-1 
```

我得到带有以下错误的各种输出（忽略我认为是由以下错误引起的输出）：

```
/usr/bin/ld: cannot find -lboost_random 
```

我已经搜索和搜索，找不到其他有同样问题的人，不是使用 websocket ++，而是使用随机提升库。

我最终发现了如何通过以下方式检查我的版本：

```
apt-cache showpkg libboost-all-dev 
```

这表明我有：

```
1.48.0.2 (/var/lib/apt/lists/mirror.aarnet.edu.au_pub_ubuntu_archive_dists_precise_universe_binary-amd64_Packages) 
```

顺便说一句，我在 Ubuntu 12.04 上。

我检查了版本，因为我看到了有关 1.46 的帖子的评论（我认为这是 11.10 支持的）。

如果我这样做：

```
ls /usr/lib/libboost_*.so 
```

我得到：

```
/usr/lib/libboost_date_time-mt.so        /usr/lib/libboost_serialization-mt.so  
/usr/lib/libboost_thread-mt.so           /usr/lib/libboost_date_time.so
/usr/lib/libboost_serialization.so       /usr/lib/libboost_thread.so
/usr/lib/libboost_program_options-mt.so  /usr/lib/libboost_signals-mt.so
/usr/lib/libboost_wserialization-mt.so   /usr/lib/libboost_program_options.so
/usr/lib/libboost_signals.so             /usr/lib/libboost_wserialization.so
/usr/lib/libboost_regex-mt.so            /usr/lib/libboost_system-mt.so
/usr/lib/libboost_regex.so               /usr/lib/libboost_system.so 
```

所以很明显这些库已经安装了，我只是看不到 boost_random。

我怀疑可能 random 已从 boost 中删除到标准 c++ 库中？我不确定，但我看到一些评论说这已经发生在其他领域。问题是如果是这种情况，我会认为我会在网络上的某个地方看到一些帖子。

我应该注意到 libwebsocket++ 的作者声明 1.47 boost 在 osx 上测试，1.46 在 linux 上测试。所以我怀疑这是库的版本问题。只是希望有人可以就我需要解决的问题提供一些指导。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:30:58.947

奇怪的。我正在运行 12.04，我目前也在使用 boost::random。

我安装了很多你做的提升库。回顾我的 dpkg 日志，我可以看到我安装了`libboost-dev`. 这在我的机器上安装了 1.48.0.2。试试这个并报告。

```
$ ls /usr/lib/libboost_*.so
/usr/lib/libboost_chrono-mt.so          /usr/lib/libboost_iostreams.so     /usr/lib/libboost_math_tr1l-mt.so        /usr/lib/libboost_prg_exec_monitor-mt.so  /usr/lib/libboost_regex-mt.so          /usr/lib/libboost_timer.so
/usr/lib/libboost_chrono.so             /usr/lib/libboost_locale-mt.so     /usr/lib/libboost_math_tr1l.so           /usr/lib/libboost_prg_exec_monitor.so     /usr/lib/libboost_regex.so             /usr/lib/libboost_unit_test_framework-mt.so
/usr/lib/libboost_date_time-mt.so       /usr/lib/libboost_locale.so        /usr/lib/libboost_math_tr1-mt.so         /usr/lib/libboost_program_options-mt.so   /usr/lib/libboost_serialization-mt.so  /usr/lib/libboost_unit_test_framework.so
/usr/lib/libboost_date_time.so          /usr/lib/libboost_math_c99f-mt.so  /usr/lib/libboost_math_tr1.so            /usr/lib/libboost_program_options.so      /usr/lib/libboost_serialization.so     /usr/lib/libboost_wave-mt.so
/usr/lib/libboost_filesystem-mt.so      /usr/lib/libboost_math_c99f.so     /usr/lib/libboost_mpi-mt.so              /usr/lib/libboost_python-mt-py27.so       /usr/lib/libboost_signals-mt.so        /usr/lib/libboost_wave.so
/usr/lib/libboost_filesystem.so         /usr/lib/libboost_math_c99l-mt.so  /usr/lib/libboost_mpi_python-mt-py27.so  /usr/lib/libboost_python-mt-py32.so       /usr/lib/libboost_signals.so           /usr/lib/libboost_wserialization-mt.so
/usr/lib/libboost_graph-mt.so           /usr/lib/libboost_math_c99l.so     /usr/lib/libboost_mpi_python-mt-py32.so  /usr/lib/libboost_python-py27.so          /usr/lib/libboost_system-mt.so         /usr/lib/libboost_wserialization.so
/usr/lib/libboost_graph_parallel-mt.so  /usr/lib/libboost_math_c99-mt.so   /usr/lib/libboost_mpi_python-py27.so     /usr/lib/libboost_python-py32.so          /usr/lib/libboost_system.so
/usr/lib/libboost_graph_parallel.so     /usr/lib/libboost_math_c99.so      /usr/lib/libboost_mpi_python-py32.so     /usr/lib/libboost_python.so               /usr/lib/libboost_thread-mt.so
/usr/lib/libboost_graph.so              /usr/lib/libboost_math_tr1f-mt.so  /usr/lib/libboost_mpi_python.so          /usr/lib/libboost_random-mt.so            /usr/lib/libboost_thread.so
/usr/lib/libboost_iostreams-mt.so       /usr/lib/libboost_math_tr1f.so     /usr/lib/libboost_mpi.so                 /usr/lib/libboost_random.so               /usr/lib/libboost_timer-mt.so 
```

也可以直接安装。例如

```
$ apt-cache search boost random
libboost-random-dev - Boost Random Number Library (default version)
libboost-random1.46-dev - Boost Random Number Library
libboost-random1.46.1 - Boost Random Number Library
libboost-random1.48-dev - Boost Random Number Library
libboost-random1.48.0 - Boost Random Number Library

$sudo apt-get install libboost-random1.46-dev 
```

或任何你想要的版本。

# sharepoint-2010 - 如何将 Outlook 连接到外部列表，该列表使用 DLL 中的外部连接器

> ID：12260801
> 
> 赞同：0
> 
> 时间：2012-09-04T09:44:53.083
> 
> 标签：sharepoint-2010, outlook-2010, sharepoint2010-bcs

**任务：**将 Outlook 与在 Visual Studio 中创建并使用 SAP 连接器 (sapnco.dll) 的外部列表连接。

**我做了什么：**

1.  创建了这个外部列表。我可以在 SP 中看到所有信息。
2.  选择其办公项目类型作为约会。
3.  按下连接到 Outlook 按钮，它会安装自动生成的 VSTO 并出现在 Outlook 中。但我在那里看不到任何物品。
4.  当我按下同步状态时，我可以在加载程序集时看到错误“sapnco，Version=3.0.0.42，Culture=neutral，PublicKeyToken=50436dca5c7f7d23”

**我的问题：**

1.  是否可以将dll添加到vsto？或者也许我可以以某种方式解决它？
2.  在哪里可以找到有关我的问题的其他信息（以及 Outlook 使用 SP 外部列表时幕后发生的情况）？

每一个建议都非常感谢。

PS：我尝试使用[BCS Solution Packaging Tool](http://blogs.msdn.com/b/bcs/archive/2010/04/25/bcs-solution-packaging-tool.aspx)和[BCS Artifact Generator](http://blogs.msdn.com/b/bcs/archive/2010/06/04/bcs-artifact-generator.aspx)但没有结果。我收到错误： BCS 解决方案打包工具中的*“OIR.CONFIG 文件未找到”*

*“导入 BDC 模型时出错。详细信息：“.”，十六进制值 0x00 是无效字符。第 2 行。位置 1。”* 在 BCS 工件生成器中。

PPS：我知道一种解决方法。我可以创建用于从 SAP 获取数据的 web 服务，并使用它（我想我可以在没有额外 dll 的情况下使用它）。但也许有人可以提出更合适的方法？

UPDATE1：[链接到 Sharepoint stackexchange 上这个问题的副本](https://sharepoint.stackexchange.com/questions/44899/how-to-connect-outlook-to-an-external-list-which-uses-external-connector-in-dll)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:05:22.137

不幸的是，我还没有找到直接的方法。SP2013 中没有任何变化。我犯了同样的错误。

**因此，我决定为我的数据添加附加层并创建 OData WebService**，它使用 SAP 连接器 (sapnco.dll) 从 SAP 获取数据，并创建了使用此 WebService 的外部内容类型和外部列表。在这种情况下，不需要额外的 dll，我能够将此列表连接到 Outlook（在将其字段映射到 Office 项目类型之后）。

PS：将 OData 数据源映射到 Office 项目类型时，我偶然发现了一个问题。如果您有同样的问题，您可以在[此处](https://stackoverflow.com/questions/13605756/is-it-possible-to-map-external-content-type-to-office-item-type-without-using-sh)找到解决方法。

# iphone - 如何显示选定的联系人（从通讯录中选择： ABPicketView ）名称以及文本字段中的号码

> ID：12260807
> 
> 赞同：1
> 
> 时间：2012-09-04T09:45:12.037
> 
> 标签：iphone, objective-c, ipad, abaddressbook, abpeoplepickerview

我已经实现了一个**iPhone 应用程序..**

因为我有两个选择**1\. 发送短信 2.**在页面中发送电子邮件。

我实现了这两个功能和

**实现了在点击联系人文本字段或披露者按钮时获取地址簿的代码。**

![在此处输入图像描述](../Images/89527ec48ed6a699e672c5a2ab38bc65.png)

从地址簿用户可以选择联系人，它将显示在文本字段中。

现在**`i need to display the selected contact person name as well along with the number in the text filed.`**

如下为名称**DAVID**

![在此处输入图像描述](../Images/6261fdce2bc11b091757bc0fd8f006e1.png)

如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:47:16.493

如果你有 ABRecordRef => 如果没有，请告诉我你的代码来帮助你 =>

那么你可以这样做：

`NSString* compositeName = (NSString *)ABRecordCopyCompositeName((ABRecordRef)record);`

获取复合名称。它是一个人类友好的复合名称。

# java - 如何在 JAX-RS 中手动映射枚举字段

> ID：12260809
> 
> 赞同：15
> 
> 时间：2012-09-04T09:45:19.410
> 
> 标签：java, json, mapping, jax-rs

如何将简单的 JSON 对象`{"status" : "successful"}`映射到 JAX-RS 中的 Java 枚举？

```
public enum Status {
    SUCESSFUL ("successful"), 
    ERROR ("error");

    private String status;

    private Status(String status) {
        this.status = status;
    }
} 
```

如果您需要更多详细信息，请随时询问:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T02:55:27.810

以下`JAXB`注释应该做到这一点。（我测试过使用`Jettison`但我没有尝试过其他提供商）：

```
@XmlType(name = "status")
@XmlEnum
public enum Status {
    @XmlEnumValue(value = "successful")
    SUCESSFUL, 
    @XmlEnumValue(value = "error")
    ERROR;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-04T12:56:58.450

这可能会帮助你

```
@Entity
public class Process {

  private State state;

  public enum State {
    RUNNING("running"), STOPPED("stopped"), PAUSED("paused");

    private String value;

    private State(String value) {
      this.value = value;
    }

    @JsonValue
    public String getValue() {
      return this.value;
    }

    @JsonCreator
    public static State create(String val) {
      State[] states = State.values();
      for (State state : states) {
        if (state.getValue().equalsIgnoreCase(val)) {
          return state;
        }
      }
      return STOPPED;
    }
  }
} 
```

# .htaccess - htaccess 仅对某些页面重定向到 ssl，对其他页面重定向到 www 不安全

> ID：12260816
> 
> 赞同：2
> 
> 时间：2012-09-04T09:45:40.627
> 
> 标签：.htaccess, mod-rewrite, redirect, ssl

我需要将所有对站点的请求重定向到 www，只有某些页面重定向到 https 而没有 www，因为出于某种原因，我们的客户购买的 ssl 证书不包括 www。环顾四周后，我设法完成了大部分工作。但是，一旦我们访问了一个安全的 url 页面，其他页面将停留在 https 上。这是我到目前为止在.htaccess中的内容：

```
#Redirect to www
RewriteCond %{HTTPS} =off
RewriteCond %{HTTP_HOST} ^[^./]+\.[^./]+$ [NC,OR]
RewriteCond %{HTTP_HOST} ^([^./]+)\.[^./]+\.[^./]+$ [NC]
RewriteCond %1 !=www [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Force SSL on checkout login account and admin pages
RewriteCond %{HTTPS} =off
RewriteCond %{REQUEST_URI} checkout|login|my-account|administrator|webshop
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L 
```

如果 https 已打开且不属于列出的 url，我会错过将重定向到 www 不安全的部分。但我对正则表达式和重写规则一点也不熟悉。一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:50:43.300

尝试使用此代码：

```
# Force SSL on checkout login account and admin pages
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} checkout|login|my-account|administrator|webshop
RewriteCond %{HTTP_HOST} ^(www\.)?(.*)$ [NC]
RewriteRule ^(.*)$ https://%2/$1 [R=301,L,QSA]

# Remove SSL on other pages
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !checkout|login|my-account|administrator|webshop
RewriteCond %{HTTP_HOST} ^(www\.)?(.*)$ [NC]
RewriteRule ^(.*)$ http://www.%2/$1 [R=301,L,QSA]

# Force www for non https
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L,QSA] 
```

# javascript - 从 iframe 中检索列表并使用列表更新父框架

> ID：12260820
> 
> 赞同：2
> 
> 时间：2012-09-04T09:45:50.883
> 
> 标签：javascript, iframe

我是一个菜鸟，并试图从 Iframe 中检索 HTML 列表，并通过按下父框架内的按钮来更新父框架内的列表。请帮忙，我一直在检索错误“未定义更新列表”，我知道我一定做错了什么，目前感觉想把头撞在墙上并请求帮助

```
<html> 
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style>

<script type="text/Javascript">
function UpdateList(){
var OldList = document.getElementById('Framed');
var Newlist = OldList.contentWindow;
document.getElementById('FileList').innerHTML= Newlist;}

</script>

</style>
</head>
<body style="color:white">
<div id="FileList">
<select>
<option>Push Refresh</option>
</select>
</div>
<iframe NAME="Framed" id="Framed" src="DirectoryPreview.php" width="250" height="100">
</iframe>
<br>
<button onclick="UpdateList()">Push to refresh</button>
</body> 
```

```
 **Correction for the above, hope it helps others struggling**

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style>
</style>
<script type="text/Javascript">
function UpdateList(){
var OldList = document.getElementById('Framed');
var NewList = OldList.contentDocument || iframe.contentWindow.document;
var Contents = NewList.getElementById('List').value;
document.getElementById('FileList').innerHTML= Contents;}
</script>

</head>
<body style="color:Black">
<div id="FileList">
<select>
<option>Push Refresh</option>
</select>
</div>
<iframe NAME="Framed" id="Framed" src="DirectoryPreview.php" width="250" height="100">
</iframe>
<br>
<button onclick="UpdateList()">Push to refresh</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:01:42.957

您的 javascript 嵌入`style tag`其中！！！！您怎么能期望它执行？？？

更改：-

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style>
</style> 

<script type="text/Javascript">
function UpdateList(){
var OldList = document.getElementById("Framed");
var Newlist = OldList.contentWindow;
document.getElementById("FileList").innerHTML= Newlist;
}
</script> 
```

# grails - 一对多（或一个）级联创建视图

> ID：12260822
> 
> 赞同：1
> 
> 时间：2012-09-04T09:45:56.267
> 
> 标签：grails, one-to-many, scaffolding, one-to-one, create-view

我有两个域：

```
class A {
 String name
 B b
}

class B {
 String code
} 
```

我使用默认的脚手架。当我转到 A 列表视图时，我无法创建 A 实例，因为我错过了 B 实例；这里是gsp

```
<g:if test="${B?.list()}">
</g:if>
<g:else>
    <g:link class="create" action="create" controller="b">
        <g:message code="default.new.label" args="['b']" />
    </g:link>
</g:else> 
```

如果我单击创建 B 链接，我可以创建一个 B 实例，但我失去了与我正在创建的 A 对象的“连接”。在这种情况下有什么好方法来支持用户吗？一个想法可以是在模态框中打开创建 B 链接，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:03:22.837

只需将 A 的 ID 添加到参数中：

```
<g:link class="create" action="create" controller="b" params="[ 'a.id': aInstance.id ]"> 
```

键只是适应域类 B 中的关系属性。

# jquery - Rails 2.3 上的 Ajax 或 Jquery 搜索结果

> ID：12260823
> 
> 赞同：1
> 
> 时间：2012-09-04T09:46:00.640
> 
> 标签：jquery, ruby-on-rails, ajax

我想通过使用 jquery 或 ajax 使我的搜索用户友好。我正在使用 searchlogic 进行查询和基本搜索提交。

我的搜索表单与结果在同一页。因此，如果我提交搜索，页面将重新加载并在表单下显示结果。

搜索表格：

```
<% form_tag search_path do %>
 <% text_field_tag :name %>
<% end %>

<%= result %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:49:42.700

试试这个方法。

```
<% form_remote_tag :url => { :action => "search"}, :update => "result" do %>
<% text_field_tag :name %>
<% end %>
<div id="result"></div> 
```

# vim - 作为 vimer，如何在搜索时禁用 cscope 跳转到 quickfix 列表中的第一个错误？

> ID：12260826
> 
> 赞同：3
> 
> 时间：2012-09-04T09:46:04.267
> 
> 标签：vim

作为 vimer，如何在搜索时禁用 cscope 跳转到 quickfix 列表中的第一个错误？因为这不是我想要的情况。我想自己选择。

我到处搜索，但直到现在还没有一个满意的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:01:05.327

[http://vim.1045645.n5.nabble.com/Re-Cscope-quickfix-not-jump-to-first-error-td1193959.html](http://vim.1045645.n5.nabble.com/Re-Cscope-quickfix-not-jump-to-first-error-td1193959.html)

最后我合并了 if_cscope_bang.patch ，现在可以了。

当编译 vim

[Vim 不支持 unicode？](https://stackoverflow.com/questions/3766204/vim-doesnt-support-unicode)

也帮我解决我的多字节支持问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:14:14.400

您是使用 cscope 特定的`:cs find foo`还是将 cscope 与 ctags 合并并使用`:cstag foo`？

无论如何，默认行为是根本不使用 quickfix：这两个命令都会打开一个带有匹配列表的特殊窗口，即使只有一个匹配，也不执行跳转。

检查`cscopequickfix`并阅读相关文档的值`:help cscopequickfix`。

# android - 如何配置 Eclipse/Android 插件以忽略 desktop.ini 文件？

> ID：12260827
> 
> 赞同：4
> 
> 时间：2012-09-04T09:46:06.787
> 
> 标签：android, eclipse

每当项目目录之一（例如 res/values/desktop.ini）中有 desktop.ini 文件时，Eclipse 和 Android Tools 插件组合总是无法构建。

我希望 Eclipse 和/或 Android 工具插件忽略 desktop.ini 文件。这可能吗？如果是，如何？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T01:35:17.390

刚刚想通了......也有谷歌驱动器问题。要解决这个问题：

1.  转到“项目->属性->资源过滤器”（在 Eclipse 中）
2.  选择“添加”
3.  将“过滤器类型”设置为“全部排除”，将“应用于”设置为“文件”，选中标有“所有子项（递归）”的框，并设置规则，以便名称匹配“*.ini”或“desktop.ini” '。

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:48:54.177

不要放到`desktop.ini`资源文件夹中。如果您将任何不支持的内容放在那里，ADT 将始终失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T21:37:23.653

在 Android Studio 中，目前无法从构建中排除文件（请参阅[https://stackoverflow.com/a/25184988/3499115](https://stackoverflow.com/a/25184988/3499115)）。因此，您只需搜索 Application/src/main/res 和 Application/build 文件夹中的所有 desktop.ini 文件并删除它们。

# jquery-ui - 如何使用 knockout.js 添加和删除 jqueryui 选项卡

> ID：12260829
> 
> 赞同：2
> 
> 时间：2012-09-04T09:46:11.687
> 
> 标签：jquery-ui, knockout.js

我从[这个示例代码中得到了提示](http://jsfiddle.net/rniemeyer/NLGm8/)

附上代码here

```
<button id='add'>add</button>

<div data-bind="template: 'tabsTmpl'"></div>
<script id="tabsTmpl" type="text/html">
    <div data-bind="jqTabs: { fx: { } }">
        <ul>
            {{each tabs}}
            <li>
                <a href="#tab-${id}">${id}</a>
            </li>
            {{/each}}
        </ul>
        {{each tabs}}
        <div id="tab-${id}" >${id}</div>
        {{/each}}
    </div>
</script>
<script>
        ko.bindingHandlers.jqTabs = {
            init: function (element, valueAccessor) {
                var options = valueAccessor() || {};
                $(element).tabs(options);
            }
        };

        function TabItem(id) {
            this.id = ko.observable(id);
        }

        var viewModel = {
            tabs: ko.observableArray([new TabItem(1), new TabItem(2), new TabItem(3)])
        };

        $(function () {
            ko.applyBindings(viewModel);

            $('#add').click(function () {
                viewModel.tabs.push(new TabItem(viewModel.tabs().length + 1));
            });
        });
    </script> 
```

以上代码作者使用jquery模板引擎，但我想使用knockout.js的原生模板引擎，所以我将html代码更改如下：

```
<div>
    <div data-bind="jqTabs: { fx: { } }">
        <ul data-bind="foreach: tabs">
            <li>
                <a data-bind="attr:{href:'#tab-' + id()}, text:id"></a>
            </li>
        </ul>
        <!-- ko foreach: tabs -->
        <div data-bind="attr:{id:'tab-'+id()}, text:id"></div>
        <!-- /ko -->
    </div>
</div> 
```

但是，它不起作用。我对原生模板引擎做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:37:33.570

这是一个功能版本：http: [//jsfiddle.net/NLGm8/32/](http://jsfiddle.net/NLGm8/32/)

关于 Knockout 与 jQuery 集成的最棘手的事情之一是插件期望 DOM 元素存在的时间以及 Knockout 将呈现它们的时间。

我经常发现围绕插件初始化的 setTimeout 可以解决问题，它在这里做到了。

# javascript - 添加/删除子元素

> ID：12260831
> 
> 赞同：1
> 
> 时间：2012-09-04T09:46:32.037
> 
> 标签：javascript, jquery, html

我正在使用 javascript 和 jQuery 在现有的`<div>`.

添加新元素工作正常，但是当我单击“删除”删除元素时，我得到主容器对象，并且按钮中的子元素对象存在并被单击。

现在问题来了，当我尝试删除元素时，我得到了对象，直到包含控件的 html 表格控件，但没有得到包含表格的 div。

**注意：包含表的 div 是子 div/元素。**

Javascript

```
var ab = '<table rules="none" width="100%">'+
'<tr>'+
'<td class="optHdBg">'+
'<a><img src="themes/theme_blog/images/icons/delete.png" name="delete"  önclick="javascript:remove_block(this);"/></a>'+
'</td></tr></table>';

function add()
{
  var lstChild = $("#contControls").children().last();
  var containerElement = document.getElementById("contControls");   
  var newElement = document.createElement("div");
  $(newElement).addClass("optionPane");   
  newElement.innerHTML = ab;
  document.getElementById("contControls").appendChild(newElement);
}

function remove_block(obj)
{
  var mainContainer = $(obj).parents("div #contControls");
  var mySelf = obj.parentNode.parentNode.parentNode.parentNode.parentNode;
  mainContainer.removeChild(mySelf);
} 
```

`mySelf`由于删除操作不起作用，因此未访问包含表的 div 控件的控件会出现问题。

html代码

```
<div id="contControls">
  <div class="optionPane">
    <table rules="none" width="100%">
      <tr>
        <td class="optHdBg">
          <a>
            <img src="themes/theme_blog/images/icons/delete.png" name="delete"  önclick="javascript:remove_block(this);"/>
          </a>
        </td>
      </tr>
    </table>
  </div>
</div> 
```

我无法获得`<div>`具有类的元素`optionPane`；每当我尝试针对 id 的父级时，`<table>`我都会得到`<div>`id `contControls`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:59:23.087

[**工作演示**](http://jsfiddle.net/hcG6b/)

如果您遇到导入 jQuery 的麻烦，您不妨使用它。它简化了您尝试完成的所有 DOM 操作，并且您的代码可以简单地归结为这一点（*请注意，javascript 字符串不能像您在不使用`+`for 连接*的情况下那样跨越多行）：

```
var ab = '<table rules="none" width="100%">'
 + '<tr><td class="optHdBg"><a>'
 + '<img src="themes/theme_blog/images/icons/delete.png" name="delete" />'
 + '</a></td></tr></table>';

$(document).ready(function() {
    $(document).on('click', 'img[name="delete"]', function() {
        remove_block(this);
    });        
});

function add() {
    $("<div class='optionPane'></div>").html( ab ).appendTo("#contControls");
}

function remove_block(obj) {
    // remove the entire optionPane <div>
    $(obj).closest('div.optionPane').remove();
}​ 
```

* * *

此外，您应该注意，在该行中，`$(document).on('click'`您可以（*并且应该*）用`document`您添加动态元素的任何静态父元素替换（可能`#contControls`，但我看不到您的 HTML）；这提供了更好的性能，因为事件不必在 DOM 中冒泡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:07:37.527

试试这个 jquery 代码

如果您有超过 1 个父节点，则在 obj 之后添加

```
$(obj).parent().remove(); 
```

# certificate - 如何将 HCRYPTKEY 或 PRIVATEKEYBLOB 导出到 PFX 文件

> ID：12260833
> 
> 赞同：4
> 
> 时间：2012-09-04T09:46:37.250
> 
> 标签：certificate, cryptoapi

我有一个以前生成的 RSA 私有签名密钥，它存储为[PRIVATEKEYBLOB](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379931%28v=vs.85%29.aspx)。我正在尝试将其移至新证书中，以便更好地管理密钥。如何获取此 blob 并将其转换为 .pfx 证书？

我有一个 HCRYPTPROV（使用 MS_ENHANCED_PROV 和 PROV_RSA_FULL）。我可以从 CryptImportKey 获得 HCRYPTKEY。

PFXExportCertStoreEx 似乎是将其导出到 PFX blob 的功能（我假设我会随后将其写入文件），但我不明白如何将密钥放入其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:49:12.887

如果我正确理解您的问题，则您将证书和相应的私钥作为数据 blob，并且两者都是**分开**的。如果您使用 CryptoAPI，请务必了解该 API 主要面向使用存储在*证书存储中的证书*和存储在*密钥容器*中的私钥。[PFXExportCertStoreEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387313%28v=vs.85%29.aspx)之类的功能遵循该方法，允许您将所有证书从一个证书存储导出到数据 blob，该数据 blob 可以保存为扩展名为 .PFX 的文件。

因此，您可以执行以下操作：

1.  通过使用带有参数的[CertOpenStore](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376559%28v=vs.85%29.aspx)创建临时证书存储。`CERT_STORE_PROV_MEMORY`
2.  [使用CertAddEncodedCertificateToStore](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376015%28v=vs.85%29.aspx)函数将证书 blob 放置到存储区。
3.  使用带有选项的[CryptAcquireContext](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379886%28v=vs.85%29.aspx)创建新的密钥容器。`CRYPT_NEWKEYSET`您应该给容器一些唯一的名称（参见`pszContainer`函数的参数）。
4.  [关于CryptImportKey](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380207%28v=vs.85%29.aspx)函数`PRIVATEKEYBLOB`，将您当前拥有的 中的信息导入到密钥容器中。
5.  将证书存储中的证书绑定到密钥容器。为此，您应该使用[CertSetCertificateContextProperty](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376573%28v=vs.85%29.aspx)来设置证书的`CERT_KEY_PROV_INFO_PROP_ID`命名*扩展属性*。重要的是要理解扩展属性不是 X.509 规范的一部分。扩展属性允许您将*与证书关联的一些附加信息*存储在证书存储中（而不是证书本身）。如果`CERT_KEY_PROV_INFO_PROP_ID`您可以存储描述密钥容器的完整信息（ [CRYPT_KEY_PROV_INFO ）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381420%28v=vs.85%29.aspx)
6.  现在可以使用[PFXExportCertStoreEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387313%28v=vs.85%29.aspx)将临时证书存储（仅保存一个证书并具有到密钥容器的链接）导出到内存 blob，然后将内存 blob 保存在 .PFX 文件中。
7.  您应该删除在步骤 3 中创建的密钥容器。为此，您需要使用带有选项的[CryptAcquireContext打开密钥容器。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379886%28v=vs.85%29.aspx)`CRYPT_DELETEKEYSET`

# objective-c - 在不调用任何内置实用程序的情况下将字符串转换为双精度

> ID：12260834
> 
> 赞同：0
> 
> 时间：2012-09-04T09:46:44.207
> 
> 标签：objective-c

需要编写一个函数，将字符串转换为双精度而不调用任何内置实用程序，例如, , , ,`atof()`或`Double.parseDouble()`任何`Double.valueOf()`类似`[NSString doubleValue]`方法。`[NSScanner scanDouble]``std::stringstream`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:59:23.913

```
const char *s = "-123.456";
int sign = 1;
int hasdp = 0;
int dplaces = 0;
float f = 0.0;
while(*s) {
    switch (*s) {
    case '-': sign = -1; break;
    case '.': hasdp = 1; break;
    default:
        f *= 10;
        f += *s - '0';
        break;
    }
    s++;
    if (hasdp) dplaces++;
}

f *= sign;
int i;
for (i = 1; i < dplaces; i++) f /= 10;
// we need to start from 1 in order to get
// the correct result, this is a property
// of this algorithm 
```

现在`f`将包含解析值，前提是其格式正确（可选 - 前缀、可选小数点后跟 1 个或多个小数位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T09:54:38.250

尝试以下操作：

```
- (void)myMethod:(NSString *)numberString{
    int i = 0;
    float number = 0.0; 
    while ([numberString length] > i) {
        NSString *myChar = [numberString substringWithRange:NSMakeRange(i, 1)];
        NSLog(@"%@", [numberString substringWithRange:NSMakeRange(i, 1)]);
        i++;
        if ([myChar isEqualToString:@"1"]){
            number = number * 10 + 1;
        } else if ([myChar isEqualToString:@"2"]){
            number = number * 10 + 2;
        } else if ([myChar isEqualToString:@"3"]){
            number = number * 10 + 3;
        } else if ([myChar isEqualToString:@"4"]){
            number = number * 10 + 4;
        } else if ([myChar isEqualToString:@"5"]){
            number = number * 10 + 5;
        } else if ([myChar isEqualToString:@"6"]){
            number = number * 10 + 6;
        } else if ([myChar isEqualToString:@"7"]){
            number = number * 10 + 7;
        } else if ([myChar isEqualToString:@"8"]){
            number = number * 10 + 8;
        } else if ([myChar isEqualToString:@"9"]){
            number = number * 10 + 9;
        } else if ([myChar isEqualToString:@"0"]){
            number = number * 10 + 0;
        }
    }
} 
```

# php - PHP 中的 SFTP 连接（不是通过 ssh）

> ID：12260835
> 
> 赞同：3
> 
> 时间：2012-09-04T09:46:48.050
> 
> 标签：php, ssh, sftp

**在使用ssh2_sftp**方法创建一个小型库以通过 SFTP 发送和接收文件后，我发现我必须连接的服务器**禁用**了 ssh 连接，我只能通过 SFTP 连接。

服务器连接在命令行下使用 sftp 命令运行良好，但 ssh 向我发送*“此服务仅允许 sftp 连接”。*

因此，由于 ssh2_sftp 需要以前的 ssh 连接才能工作，我不知道哪个库或如何做才能连接到具有 SFTP 身份验证的 SFTP 服务器。

phpseclib 是否使用与 ssh2_ftp 不同的身份验证方法？

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:49:47.463

99% 的键盘交互式身份验证只提示输入密码。 [phpseclib 是一个纯 PHP SFTP 实现](http://phpseclib.sourceforge.net/)，如果密码验证失败，它会尝试通过键盘交互提交密码。如何使用它的示例：

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('www.domain.tld');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

// outputs the contents of filename.remote to the screen
echo $sftp->get('filename.remote');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:33:09.673

是的，你完全正确@arkascha ......经过一番研究，我找到了原因。

当我在我自己的服务器上测试我的代码时，它可以工作，而在另一台服务器上它失败了，所以我认为这是因为 ssh shell 连接被禁用。

在向两台服务器询问允许的身份验证方法（使用 ssh2_auth_none）后，我得到了错误：

我的服务器：

**[0] => 公钥**

**[1] => 密码**

另一台服务器（发生故障的服务器）：

**[0] => 公钥**

**[1] => gssapi-keyex**

**[2] => gssapi-with-mic**

**[3] => 键盘交互**

因为它不允许密码，所以它失败了。就是这样...

我很抱歉让你浪费你的时间......非常感谢

# java - HTTP 在知道其大小之前发送请求内容 (org.apache.http)

> ID：12260837
> 
> 赞同：0
> 
> 时间：2012-09-04T09:47:02.597
> 
> 标签：java, http

我想在创建整个数据之前开始向 HTTP 服务器发送数据。

当您使用 java.net.HttpURLConnection 时，这很容易：

```
urlConnection = (HttpURLConnection) url.openConnection();
urlConnection.setDoInput(true);
urlConnection.setDoOutput(true);
urlConnection.setChunkedStreamingMode(0);

dos = new DataOutputStream(urlConnection.getOutputStream());
...
dos.writeShort(s);
... 
```

但由于某些原因，我想使用 org.apache.http 包（我必须开发一个基于包 org.apache.http 的库）。我已经阅读了它的文档，但是我没有找到与上面的代码类似的任何东西。在知道最终数据大小之前，是否可以使用 org.apache.http 包以块的形式将数据发送到 HTTP 服务器？

提前感谢所有建议；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:48:36.627

在不知道其最终大小的情况下发送数据块也很容易使用 Apache 库。这是一个简单的例子：

```
DataInputStream dis;
...
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://localhost:8080");

BasicHttpEntity entity = new BasicHttpEntity();
entity.setChunked(true);
entity.setContentLength(-1);
entity.setContent(dis);

httppost.setEntity(entity);
HttpResponse response = null;
try {
     response = httpclient.execute(httppost);
} catch (ClientProtocolException e) {
    // TODO
} catch (IOException e) {
    // TODO
}
...
// processing http response.... 
```

`dis`是一个应该包含实体主体的流。您可以`dis`使用管道流将输入流与输出流连接起来。因此，一个线程可能正在创建数据（例如，从麦克风录制声音），而另一个线程可能会将其发送到服务器。

```
// creating piped streams
private PipedInputStream pis;
private PipedOutputStream pos;
private DataOutputStream dos;
private DataInputStream dis;

...

pos = new PipedOutputStream();
pis = new PipedInputStream(pos);
dos = new DataOutputStream(pos);
dis = new DataInputStream(pis);

// in thread creating data dynamically
try {
    // writing data to dos stream
    ...
    dos.write(b);
    ...
} catch (IOException e) {
    // TODO
}

// Before finishing thread, we have to flush and close dos stream
// then dis stream will know that all data have been written and will finish
// streaming data to server.
try {
    dos.flush();
    dos.close();
} catch (Exception e) {
    // TODO
} 
```

`dos`应该传递给动态创建数据的线程，传递给`dis`向服务器发送数据的线程。

另见：[http ://www.androidadb.com/class/ba/BasicHttpEntity.html](http://www.androidadb.com/class/ba/BasicHttpEntity.html)

# html - 画廊在 HTML5 中应该是什么元素？

> ID：12260838
> 
> 赞同：8
> 
> 时间：2012-09-04T09:47:09.137
> 
> 标签：html, gallery, semantic-markup

当我在 HTML5 中制作图片库时，它应该有任何语义标签，比如`section`or `article`，还是只是一个`div`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-26T13:12:41.640

这取决于图片库的上下文。

如果画廊与主要内容相关，则将其作为主要内容中的内容是有意义的`section`。

`article`当其中的内容本身有意义时，应使用该标签，例如个别博客文章。`article`当需要联合内容（例如 RSS 提要）时，使用标签标记的内容也很有意义。为了解释最后一点，[W3C 解释说](http://www.w3.org/TR/html5/sections.html#the-article-element)：

> 当专门与要在联合中重新分发的内容一起使用时，article 元素的用途类似于 Atom 中的 entry 元素。

该`div`标签用于元素的通用分组。如果任何其他标签不适合此目的，则应使用它，并且出于样式或脚本目的需要分组。根据[W3C 的建议](http://www.w3.org/TR/html5/grouping-content.html#the-div-element)：

> 强烈建议作者将 div 元素视为不得已的元素，因为当没有其他元素适合时。使用更合适的元素而不是 div 元素可以提高读者的可访问性和作者的可维护性。

回到您的问题，如果图片库与您的内容相关（例如博客文章中的图片库），我会`article`为整个博客文章提供一个`section`图片库。有些人可能会争辩说，如果画廊没有标题，它不应该是 a `section`，因此应该标记为`div`。然而，W3C 提供了一种非常好的方式来思考其网站上的部分（抱歉，不能发布超过 2 个链接少于 10 个代表点！）：

> 一般规则是，只有当元素的内容明确地列在文档大纲中时，section 元素才是合适的。

如果您考虑一下，在文章的大纲（例如，博客文章）中列出画廊是很有意义的。如果文章有特定的介绍性文字，甚至可以在文章的大纲中列出。在概念上将大纲视为文章的一种目录，列出其各个部分。

就像我之前说的，这真的取决于上下文。

**编辑：**

关于画廊本身的图像`figure`，按照 Romin 的建议，将它们放在里面是有意义的。回答你的评论：

> thanx 但我不认为这里是正确的，因为他们说它“可以从文档的主要流程中移开，而不会影响文档的含义。” 所以它适用于文本中的图像，如果我从图库中删除图像会影响它的含义

W3C 真正推荐的是：

> 元素`figure`（主要内容，例如页边、专用页或附录。

换句话说，要问的问题是是否可以将图片库从主要内容（即博客文章内容或文本）中移出，而不影响文档的*流动*。图片库本身实际上可以从文档的主要内容中移开，例如侧边栏，并且其位置/顺序的更改不会影响内容的解释方式。如果它的位置确实有影响，那么`figure`在这种特定情况下是不合适的。

总而言之，如果内容（图片库）对文档很重要，但它在内容流中的位置不重要（即它可以在没有太大影响的情况下移动），请使用`figure`. 如果它的位置很重要，请使用其他标签。如果它不重要，请`aside`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:52:23.583

你可以使用 a`section`如果它有意义，或者`aside`如果它有意义。否则使用`div`.

Gallery 没有语义标签，例如`audio`or `video`，因此您可能需要使用`div`.

直到[`Web Components`](http://www.youtube.com/results?search_query=web+components&page=&utm_source=opensearch)被释放:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T10:13:22.113

如果您使用的是 HTML5，则建议使用语义标签，并且应该是前进的方向，而不是使用`div`.

事实上，画廊甚至可以很好地映射到语义标签。例如，一个部分可以包含文章列表，即单独的图像。An`aside`可以提供有关特定图像的更多信息等。

一篇很好的文章展示了如何使用`figure`and`figcaption`在这里：[http ://html5doctor.com/the-figure-figcaption-elements/](http://html5doctor.com/the-figure-figcaption-elements/)

# java - 从格式化字符串 Java、Groovy 中读取值

> ID：12260849
> 
> 赞同：3
> 
> 时间：2012-09-04T09:47:42.547
> 
> 标签：java, string, groovy

我想知道是否有任何好方法可以从 Groovy 甚至 Java 中的格式化字符串中读取单个属性。

我有一个字符串，其中包含一些用空格分隔的属性。例如“2.1 20 真事”。顺序是固定的，并且“属性类型”是已知的（例如第一个是 Float，第二个是 Integer，等等）。我需要类似于 String.format() 但其他方式的东西。

我知道我可以手动拆分字符串并读取值，但这会使代码过于复杂，如下所示：

```
String[] parsedText = "2.1 20 Something true".split(delimiter)

try {
   firstVal = new Float(parsedText[0])
}
catch (NumberFormatException e) {
   throw new RuntimeException("Bad data [0th position in data string], cannot read[{$parsedData[0]}], cannot convert to float")
}
... 
```

有没有更好的办法？我很确定至少在 Groovy 中是:-)

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T09:56:19.283

Java [Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)类有一大堆方法用于抓取和解析字符串的下一部分，例如`next()`, `nextInt()`,`nextDouble()`等。

代码如下所示：

```
String input = "2.1 20 Something true";
Scanner s = new Scanner(input);
float f = s.nextFloat();
int i = s.nextInt();
String str = s.next(); // next() doesn't parse, you automatically get a string
boolean b = s.nextBoolean(); 
```

唯一需要注意的是：`next()`两者`nextLine()`都会让你得到字符串，但`next()`只会让你把字符串带到下一个空格。如果您希望字符串组件中有空格，则需要考虑这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:50:57.000

java.util 中的 Scanner 类应该为您完成这项工作。在从输入中读取时，您需要考虑更多情况。

在您的情况下，您可以连续调用扫描仪方法或使用正则表达式明确定义“格式字符串”并将其保持在一个地方。通过这种方式，您将受益于立即进行验证。

```
//calling methods in row
{
    Scanner sc = new Scanner("2.1 20 Something true");
    float f = sc.nextFloat();
    int i = sc.nextInt();
    String s = sc.nextLine();

    System.out.print(String.format("%s\t%.2f\t%x\n", s, f, i));

    sc.close();
}
//using regexp
{
    Scanner sc = new Scanner("2.1 20 Something true");
    sc.findInLine("(\\d+[\\.,]?\\d*)\\s(\\d+)(\\s.*)$");
    MatchResult result = sc.match();
    float f = Float.parseFloat(result.group(1));
    int i = Integer.parseInt(result.group(2));
    String s = result.group(3);

    System.out.print(String.format("%s\t%.2f\t%x\n", s, f, i));

    sc.close();
} 
```

Scanner 类有不同的构造函数来使用具有以下类型的对象的类：File、InputStream、Readable、ReadableByteChannel 和 String 的示例。

请注意，此类是区域设置感知的，因此它的行为可能会有所不同，具体取决于系统设置（某些国家/地区使用 coma 而不是浮点数等...）。您可以覆盖区域设置。

这是综合参考：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

# windows-8 - Bing 在 Windows 8 中映射 beta 错误

> ID：12260852
> 
> 赞同：-7
> 
> 时间：2012-09-04T09:48:07.910
> 
> 标签：windows-8, bing-maps

类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:57:38.130

尝试安装[最近才可用的最终版本](http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca)

# sql-server-2008 - 如何阅读 SQL Server Management Studio 执行计划中的提示

> ID：12260853
> 
> 赞同：1
> 
> 时间：2012-09-04T09:48:15.347
> 
> 标签：sql-server-2008, indexing, ssms, sql-execution-plan

我很难理解您可以通过 SQL Server Management Studio 获得的执行计划中的提示。这是一个示例（简化，但包括所有内容）

![在此处输入图像描述](../Images/333729c9b102c727021176c4fc691905.png)

> **索引搜索（非集群）**
> 
> **谓词**
> 
> PROBE([Bitmap1047], ScheduleId)
> 
> **目的**
> 
> IX_Date
> 
> **输出列表**
> 
> ScheduleId 日期
> 
> **寻找谓词**
> 
> 日期 >= '2012-01-02' 日期 < ('2012-05-14')

*   ScheduleId 是一个基于 guid 的外键。
*   IX_Date 是一个包含 Date、ScheduleId 和 INCLUDE Hours 的索引

对我来说，上面看起来很不错。Index Seek 应该不错。它达到了相关指数。但是，此项目占用了很大一部分执行时间（否则我不会费心去理解它）。这让我感到困惑，我怀疑这是因为在阅读本文时有一些我不明白的基本内容。

任何人都可以为我照亮它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:07:43.093

从您提供的数据中，我没有看到任何看起来太奇怪的东西。在这个计划中，非聚集索引查找的成本只有 12%，所以除非有很多其他操作需要很短的时间，而且这个操作相对较大，否则我觉得还可以。

我认为执行成本可能看起来很高，因为它正在对 50 万行进行非聚集索引搜索。

# ios - 编辑 iOS 媒体播放器的控制按钮

> ID：12260856
> 
> 赞同：2
> 
> 时间：2012-09-04T09:48:26.680
> 
> 标签：ios, custom-controls, controls, media-player

在 iPhone（或 iPad）中播放视频时，会出现标准按钮（播放、暂停、前进等）。我想添加按钮以及这些默认按钮。我怎样才能做到这一点？

等待回复。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:57:39.997

你根本做不到。

[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

# javascript - 如何在更新面板中调用/触发 javascript 函数 标签

> ID：12260858
> 
> 赞同：1
> 
> 时间：2012-09-04T09:48:31.420
> 
> 标签：javascript, asp.net, dom-events, updatepanel

我有一个下拉列表框。我正在将值从服务器加载到该列表框，并且值正在正确加载。

我正在使用一个`<trigger>`事件来触发 C# 函数来显示元素。

现在我想在javascript中做到这一点。我该怎么做。

我的控件位于`updatepanel`. 我的代码是：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
       <asp:DropDownList ID="list1" runat="server" Height="20px" Width="250px"
           OnSelectedIndexChanged="list1_SelectedIndexChanged" >
             <asp:ListItem>--Select--</asp:ListItem>
        </asp:DropDownList>
    </ContentTemplate>
    <Triggers>
       <asp:AsyncPostBackTrigger ControlID="list1" Name="SelectedIndexChanged"/>
    <Triggers>
</asp:UpdatePanel> 
```

现在我想在那个触发事件中调用 Javascript 函数。我该怎么做，甚至有可能做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:56:39.630

如果要在下拉列表的更改事件上调用函数，则可以使用 jquery 的 change() 事件。此外，在调用 javascript 函数时，无需使用更新面板。

# android - 如何在没有滚动条的情况下使 gridview 元素适合屏幕？

> ID：12260859
> 
> 赞同：2
> 
> 时间：2012-09-04T09:48:32.957
> 
> 标签：android, gridview, height, android-edittext

我在一个屏幕上有两个部分（两个片段：第一个片段覆盖 60% 的屏幕，第二个占据剩余部分。）。在第一个片段中我放置了gridview，在第二个片段中我创建了tableLayout。在 gridView 中，我放置了 36 个 ediText。在向下的表格布局中，我设计了自定义键盘。由于我需要将十个编辑文本显示为完全适合第一个片段，因此我禁用了 gridview 的垂直滚动条。即使在纵向模式下它在模拟器上有点工作，它在横向模式下也不起作用。所以，我决定先获取fragment的高度，那么有没有办法获取fragment的高度和宽度。即使在获得措施之后，当模式发生变化时，如何使我的编辑文本适合当前片段？虽然我搜索了资源，但找不到明确的解决方案。下面是我的代码。任何建议将不胜感激。提前致谢。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <FrameLayout
                android:id="@+id/fLayout1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="@drawable/background3">
        <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
                android:id="@+id/gridview"
                android:layout_width="fill_parent" 
                android:layout_height="fill_parent"
                android:columnWidth="18dp"
                android:numColumns="9"
                android:verticalSpacing="0dp"
                android:horizontalSpacing="5dp"
                android:stretchMode="columnWidth"
                android:gravity="center"
                android:listSelector="@null"/>
        </FrameLayout>

        <FrameLayout
                android:id="@+id/fLayout2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="4"
                android:background="@drawable/background2">

        <TableLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/keypad"
                android:orientation="vertical"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:stretchColumns="*">

        <TableRow>
        <Button android:id="@+id/keypad_1"
        android:text="1"
        android:background="@drawable/custombutton">
        </Button>
        <Button android:id="@+id/keypad_2"
        android:text="2"
        android:background="@drawable/custombutton">
        </Button>
        <Button android:id="@+id/keypad_3"
        android:text="3"
        android:background="@drawable/custombutton">
        </Button>

        <Button android:id="@+id/keypad_4"   
        android:text="4"
        android:background="@drawable/custombutton">
        </Button>

        <Button android:id="@+id/keypad_5"
        android:text="5"
        android:background="@drawable/custombutton">
        </Button>

        </TableRow>
        <TableRow>

        <Button android:id="@+id/keypad_6"
        android:text="6"
        android:background="@drawable/custombutton">
        </Button>

        <Button android:id="@+id/keypad_7"
        android:text="7"
        android:background="@drawable/custombutton">
        </Button>
        <Button android:id="@+id/keypad_8"
        android:text="8"
        android:background="@drawable/custombutton">
        </Button>
        <Button android:id="@+id/keypad_9"
        android:text="9"
        android:background="@drawable/custombutton"> 
        </Button>

        <Button android:id="@+id/keypad_10"
        android:text="C"
        android:background="@drawable/custombutton">
        </Button>

        </TableRow>
        <TableRow>
        <Button android:id="@+id/submit"
        android:text="validate"
        android:layout_span="5"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/custombutton">

        </Button>
        </TableRow>
        </TableLayout>

        </FrameLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:00:20.480

gridView 总是可以滚动的。您可以创建一个具有固定大小的自定义（在某处有示例）

如果您知道您将有 10 个元素，请使用静态布局（例如使用 tablelayout）

# iphone - 在 iPhone 上使用 openCV 进行图像拼接

> ID：12260860
> 
> 赞同：1
> 
> 时间：2012-09-04T09:48:35.000
> 
> 标签：iphone, objective-c, opencv

我需要拼接图像以从我的 iphone 应用程序创建全景视图。

有人知道这是否可以使用opencv？或有任何例子吗？

帮助是非常可观的。

谢谢，

# android - 当我取消发布包含应用内结算的应用时会发生什么？

> ID：12260867
> 
> 赞同：0
> 
> 时间：2012-09-04T09:49:01.710
> 
> 标签：android, in-app-purchase, google-play

所以我在 Google Play 中上传并发布了一个应用程序。它是“免费的”，但它有应用内计费。现在我需要它从 Google Play 中删除。所以我决定取消发布它。

购买了应用内购买商品的人会怎样？他们仍然可以使用购买的游戏玩游戏，还是立即撤销这些购买？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:08:55.513

用户可以继续使用您的应用程序和应用内计费期货。新用户将无法安装应用程序。您应该在 Google Play 中取消注册产品以进行应用内结算以禁用它们。

# java - StringEscapeUtils 找出字符串是否被转义

> ID：12260872
> 
> 赞同：2
> 
> 时间：2012-09-04T09:49:28.543
> 
> 标签：java, string, escaping, apache-commons

我一直在使用 StringEscapeUtils.escapeHTML 来转义 URL。是否有类似的东西可以找出字符串是否已经转义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T09:54:34.487

这在原则上是不可能的，因为每个转义字符串同时是一个未转义的字符串，例如`"a&gt;b"`可以是转义版本`"a>b"` 或只是转义之前的文字字符串`"a&gt;b"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T09:53:35.407

不是我知道的，但自己做一个很容易：

```
public boolean isEscaped(String url) {
    return !url.equals(StringEscapeUtils.unEscapeHTML(url));
} 
```

请注意，正如@themel 所指出的那样，决定是否对随机字符串进行转义是不可能的，如果您尝试使用随机字符串进行此操作，您可能会得到很多误报。但是我假设你至少可以控制你的字符串在这里的样子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-31T16:25:34.280

如果您只是想转义任何字符串，直到获得纯 HTML 标记，请尝试以下递归方法：

```
 public static String unescapeHtml(String string) {
    if (org.apache.commons.lang3.StringUtils.isBlank(string)) {
        return "";
    }
    String unescapedString = StringEscapeUtils.unescapeHtml(string);
    return string.equals(StringEscapeUtils.unescapeHtml(string)) ? unescapedString : unescapeHtml(unescapedString);
} 
```

# sql - 从数据库中的多个表中查找特定列（字段）名称

> ID：12260874
> 
> 赞同：4
> 
> 时间：2012-09-04T09:49:30.567
> 
> 标签：sql, sql-server, sql-server-2008

我的数据库中有大量表。我正在搜索名为 的列`Country`，但不知道哪个表包含该列。是否有特定的查询可以帮助我找到包含该列的表的名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T09:52:31.123

是的，您可以使用 INFORMATION_SCHEMA.COLUMNS

```
SELECT DISTINCT 
   TABLE_NAME 
FROM 
   INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME = 'Country' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T09:52:59.040

```
SELECT t.name AS table_name,
SCHEMA_NAME(schema_id) AS schema_name,
c.name AS column_name
FROM sys.tables AS t
INNER JOIN sys.columns c ON t.OBJECT_ID = c.OBJECT_ID
WHERE c.name LIKE '%ColumnName%'
ORDER BY schema_name, table_name; 
```

替换`ColumnName`为您的实际列名

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T09:57:00.307

```
select distinct table_schema, table_name from information_schema.columns where table_name = 'Country'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T09:52:53.083

您可以在[`INFORMATION_SCHEMA.COLUMNS`](http://msdn.microsoft.com/en-us/library/ms188348.aspx)

```
USE YourDBName;
SELECT DISTINCT Table_Name
FROM INFORMATION_SCHEMA.COLUMNS
WHERE Column_Name = 'Country'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-28T12:01:09.900

如果我们想在多个表（例如：3 个表）中使用 like 运算符查找列名，请执行以下查询：

```
select COLUMN_NAME, TABLE_NAME 
from ALL_TAB_COLUMNS 
where TABLE_NAME in ('SIL_RLS_UPLOAD_TMP','SIL_CUSTOMER_MST','SIL_PERSONAL_CUSTOMER_MST')
      and upper(column_name) like upper('%loan%'); 
```

如果我们想在所有表中查找带有 like 运算符的列名，请执行以下查询：

```
select * 
from all_tab_columns 
where upper(column_name) like upper('%card%'); 
```

# gwt - 解析 GWT RPC POST 请求/响应

> ID：12260876
> 
> 赞同：2
> 
> 时间：2012-09-04T09:49:41.537
> 
> 标签：gwt, servlet-filters, gwt-rpc

我正在使用 GWT-RPC 来获取客户端数据，我的要求是解析有效负载以检索内部数据。我需要记录或保留这些数据以用于度量/监控目的。

我正在使用 Servlet 过滤器来拦截 HTTP 请求。我可以看到请求看起来像这样 -

```
5|0|7|http://localhost:8080/testproject|   
29F4EA1240F157649C12466F01F46F60|com.test.client.GreetingService|
greetServer|java.lang.String|myInput1|myInput2|1|2|3|4|2|5|5|6|7| 
```

是否有任何标准机制来解析这些数据？我担心编写自己的代码来解析这不是一个好的解决方案，因为当我们将自定义对象传递给/从 RPC 和 GWT-RPC 内部解析机制将来可能会改变时，这个请求负载会很复杂，这可能会破坏我的代码。我遇到了[这个](http://code.google.com/p/gwt-payload-deserializer/)，但不确定它是否健壮/维护。

有没有其他选择？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:11:40.173

使用[`RPC`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/server/rpc/RPC.html)GWT 中的类。
您必须提供*序列化策略*，其*强名称*在请求标头中传递。

解码响应更难。您可以`com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.ResponseReader`与 a 一起使用，`com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader`但您需要在类路径中有`JsParser`from `gwt-dev.jar`；并且您不能`gwt-dev.jar`在 Web 应用程序中拥有，因为它包含 servlet API（以及其他）；所以您必须从中提取相关类`gwt-dev.jar`才能在您的网络应用程序中使用它们。

请注意，在这两种情况下，您都将重构相同的对象，这些对象将被反序列化以“真正地”处理请求，或者作为请求处理的结果被序列化。
总而言之，在你的方法上使用 AOP，你可能会有更好的运气和更好的性能`RemoteServiceServlet`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:42:47.653

我不确定，如果那是您要查找的内容，但是记录*解析*参数的标准方法是覆盖 AbstractRemoteServiceServlet 的`onAfterRequestDeserialized(RPCRequest rpcRequest)`：RPCRequest 包含服务方法及其所有参数值、解析的 RpcToken 等好的 Java 对象的形式。

# javascript - 外部JS文件无法执行

> ID：12260879
> 
> 赞同：0
> 
> 时间：2012-09-04T09:49:52.173
> 
> 标签：javascript, dom

我有一个 js 函数，它应该从某个服务器获取一些广告 js 代码并将其放置在指定的 DOM 元素中。它看起来像这样：

```
function LoadAd(scriptContainer)
{           
    var js = document.createElement("script");
    js.async = true;
    js.src ='someAdUrl';
    var sHolder = document.getElementById(scriptContainer);
    if (sHolder != null) {
        sHolder.appendChild(js);
    }
} 
```

参数 'scriptContainer' 是 DOM 元素的 ID，应该包含创建的 js 元素。

这个外部 js 文件包含很多应该提供广告的代码。但是这段代码永远不会到达，也永远不会执行。

当我把这个 js src 直接放在 html 中时：

```
<script src='someAdUrl'></script> 
```

它工作正常。我已经检查过了，正在加载 js 文件。

有任何想法吗？

**编辑：**这是 js 文件内容的示例：

```
document.write('<!-- Some Message -->\n\n<a href="SomeUrl" target=\"_blank\">\n<img width=\"336\" height=\"110\" border=\"0\" src="someImageSource">\n</a>\n'); 
```

它总是包含`document.write`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:59:30.263

我在我的情况下使用此代码。它可以帮助你

```
var js=document.createElement('script');
js.setAttribute('src','http://domain.com/js/jscpt.js');
document.body.appendChild(js); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:52:25.470

如果正在加载外部JS文件，您是否检查过该函数是否实际被调用并运行？

如果函数不是自动执行的并且您没有显式调用它，则代码将不会运行。

# c# - 多个后台线程

> ID：12260880
> 
> 赞同：1
> 
> 时间：2012-09-04T09:50:01.003
> 
> 标签：c#, winforms, multithreading, backgroundworker

我有一个使用 BackGroundWorker 执行一组任务的 c# 应用程序：

```
 private void buttonStartCheckOut_Click(object sender, EventArgs e)
        {
                BackgroundWorker checkOuter = new BackgroundWorker();
                checkOuter.DoWork += new DoWorkEventHandler(checkOuter_DoWork);
                checkOuter.RunWorkerAsync();
                checkOuter.RunWorkerCompleted += new RunWorkerCompletedEventHandler(checkOuter_RunWorkerCompleted);
            }

        void checkOuter_DoWork(object sender, DoWorkEventArgs e)
        {
            if (textBoxCICheckOut.Text != "")
                CheckOutCI();

            if (textBoxCACheckOut.Text != "")
                CheckOutCA();

            if (textBoxCAuthCheckOut.Text != "")
                CheckOutCAuth();

            if (textBoxCLCheckOut.Text != "")
                CheckOutCL();

            if (textBoxCCCheckOut.Text != "")
                CheckOutCC();
        } 
```

如您所见，我只有 2 个线程；一个用于 GUI，一个用于辅助任务。
我很容易跟踪所有功能何时完成。
现在我想通过为 CheckOutCI()、CheckOutCA() 和其他线程创建一个单独的线程来使其更快。创建 5 个后台工作人员看起来有点脏。

我想问：
我将如何跟踪所有功能何时完成执行。

如果任何一个函数返回异常，我想将其显示给用户并要求用户更正用户并重试。我希望我能够正确解释我的问题。
**请根据我对他帖子的评论由 wdavo 编辑代码。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:57:13.353

I'd look at using the Task library (Assuming you are running .NET 4.5 or later). I find it much better to use than background workers in most cases.

(Note you can still use the Task library in .NET 4, however Task.WhenAll is only available in 4.5)

[http://msdn.microsoft.com/en-us/library/dd235618](http://msdn.microsoft.com/en-us/library/dd235618)

Without rewriting your whole program, here's an example of how you would use it:

Move your simple conditional logic to the button

```
private void button1_Click(object sender, EventArgs e)
{
  var tasks = new List<Task>();

  if (Text == "A")
  {
    tasks.Add(funcA());
  }

  if (Text == "B")
  {
    tasks.Add(funcB());
  }

  //And so on....

  Task.WhenAll(tasks.ToArray()).ContinueWith(t =>
  {
    if (t.Exception != null)
    {
      //One of the tasks threw an exception
      MessageBox.Show("There was an exception!");
    }
    else
    {
      //None of the tasks threw an exception
      MessageBox.Show("No Exceptions!");
    }
  });

} 
```

We add the tasks to a collection so we can know when they all finish via Task.WhenAll. When all the tasks in the collection have finished, a message box will be displayed. If any of the tasks in the collection have thrown an exception, the Exception property of 't' will be populated. The specific exceptions exist as inner exceptions of this exception.

Move your threading code to individual task/functions. You'd create your checkout functions to look similar to this:

```
private Task funcA()
{
  return Task.Factory.StartNew(() =>
  {
    try
    {
      //Code running here will be executed on another thread
      //This is where you would put your time consuming work
      //
      //
    }
    catch(Exception ex)
    {
      //Handle any exception locally if needed
      //If you do handle it locally, make sure you throw it again so we can see it in Task.WhenAll
      throw ex;
    }

    //Do any required UI updates after the work
    //We aren't on the UI thread, so you will need to use BeginInvoke
    //'this' would be a reference to your form
    this.BeginInvoke(new Action(() =>
    {
      //...
    }));

  });
} 
```

What this does is the following

*   Creates a and runs a task which does some work on a thread from the thread pool
*   If there is an exception, we handle it locally .We re-throw the exception so that we can know that a task has failed when 'Task.WhenAll' is executed
*   Updates the UI after the work is done. You need to call BeginInvoke to run the code on the UI thread to avoid cross threading issues.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:05:34.993

启动比 CPU 或内核更多的线程实际上会使您的应用程序变慢。当 CPU 绑定线程多于 CPU 时，操作系统需要更频繁地在线程之间进行上下文切换——这非常昂贵，并且可能导致操作系统花费更多时间在线程之间进行上下文切换，而不是让它们有时间工作。

您可以使用并行任务库的并行方面来自动跨 CPU 分配负载。例如：

```
Action[] actions = new Action[] {CheckOutCI, CheckOutCA, CheckOutCAuth, CheckOutCL, CheckOutCC};
Parallel.ForEach(actions, e=>e()); 
```

...这不是您想要的；但应该给你一个大致的想法。`actions`例如，根据当前条件填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:16:46.403

您需要在后台工作人员中使用 ReportProgress 方法

```
void checkOuter_DoWork(object sender, DoWorkEventArgs e)
    {
        if (textBoxCICheckOut.Text != "")
            CheckOutCI();
            checkOuter.ReportProgress(completionPercentage,"Error message"); 
```

ReportProgress 中发送的数据可以在 checkOuter_ProgressChanged 事件中捕获

```
 checkOuter_ProgressChanged(object sender,ProgressChangedEventArgs e)
 {
     int percentage = e.ProgressPercentage;
     string message = e.UserState;
 } 
```

# wpf - 在调整 ItemsControl 的大小时重新评估 DataTemplate

> ID：12260884
> 
> 赞同：0
> 
> 时间：2012-09-04T09:50:14.053
> 
> 标签：wpf, datatemplate, itemscontrol

我在我的 WPF 程序中发现了一些意外行为。我有一个 DataTemplate 可以在 ItemsControl 中可视化我的数据。

```
 <ItemsControl ItemsSource="{Binding All}"  >
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Result:ResultItem/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>

         <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WPFLibrary:MyPanel Rows="2" MinRows="4" MaxColumns="2"  IsItemsHost="true" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
 </ItemsControl> 
```

奇怪的是，每次调用 MyPanels MeasureOverride 时都会新创建 ResultItem 视图，因此会调用其子项的 Measure。

有没有办法“强制” WPf 重用视图？

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:56:57.373

我的错。问题是每次创建新的 ObservableCollection 时，即使内容根本没有更改，整个视图也会更新。

# jquery - scrollTo 创建一个带索引的循环

> ID：12260886
> 
> 赞同：1
> 
> 时间：2012-09-04T09:50:21.967
> 
> 标签：jquery, scrollto

我有一个包含 n 个元素的包装器。我想避免为每个元素添加 Click 函数，而是使用循环。如何做到这一点？

```
$("#wrapper .nav a.nav-1").click(function() {
    $('#wrapper').scrollTo('#item1', 1000 );
    return false;
});

$("#wrapper .nav a.nav-2").click(function() {
    $('#wrapper').scrollTo( '#item2', 1000 );
    return false;
});
$("#wrapper .nav a.nav-3").click(function() {
    $('#wrapper').scrollTo( '#item3', 1000 );
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:55:31.360

这个怎么样？

```
$("#wrapper .nav a").each(function(i, el){
    $(el).click(function() {
        $('#wrapper').scrollTo('#item' + (i+1), 1000 );
        return false;
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:55:42.053

```
function warp(num) {
  $("#wrapper .nav a.nav-" + num).click(function() {
    $('#wrapper').scrollTo('#item' + num, 1000 );
    return false;
  });
} 
```

假设我理解你。你需要多练习英语。

# excel - Excel美元符号文本未转换为数字

> ID：12260887
> 
> 赞同：9
> 
> 时间：2012-09-04T09:50:30.220
> 
> 标签：excel, formatting

当我在 Excel 表中输入欧元或英镑值时，它们会自动识别为数字/货币并右对齐，我还可以提取它们的值。

例如 £10 会自动右对齐。使用该公式`=VALUE(A1)`应返回 10。这在使用 € 符号时也有效。但是，如果我使用 $ 符号，则该值被识别为文本并使用上面的公式导致`#VALUE!`. 也许这与我适用于英国而非美国的 Windows 区域/语言设置有关。

编辑：我有两个会计格式的条目：£英语（英国）$英语（美国）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-19T05:04:16.907

对于@Matt 的回答，如果您的货币符号不是第一个字符或在文本中具有随机位置，您可以使用`=SUBSTITUTE(A1,"$","")`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T10:28:04.413

我为任何有类似问题的人想出了一个解决方法。我用来`=VALUE(REPLACE(A1,1,1,""))`删除美元符号并只获取数字的值，然后可以使用“$ English (US)”会计格式对数字进行格式化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T10:09:19.707

`$`用于固定单元格引用 - 例如`$A$10`. 这在复制公式或从中填充整个列时非常有用。您应该将单元格格式化为货币并将格式设置为显示美元符号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-05T19:53:49.073

对我有用的是使用替换命令。突出显示单元格，单击编辑，然后替换，输入 $ 并替换为 +

# android - GCMRegistrar.onDestroy(this);

> ID：12260888
> 
> 赞同：0
> 
> 时间：2012-09-04T09:50:39.200
> 
> 标签：android, google-cloud-messaging

我正在我的应用程序中实现谷歌云消息传递，并被激怒添加这个 : `GCMRegistrar.onDestroy(this);`，否则给出异常。但我的困惑是，如果我`GCMRegistrar.onDestroy(this);`在`onDestroy()`活动中使用，`GCMRegistrar`如果由于某种原因发生错误，是否会重试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:11:19.947

答案在这里：

[GCMRegistrar.onDestroy(context) 崩溃，接收器未注册](https://stackoverflow.com/questions/11935680/gcmregistrar-ondestroycontext-crashing-receiver-not-registered)

使用 getApplicationContext() 而不是这个（即活动的上下文）。为我工作。:D

# c# - list.removeall 参数空异常未抛出

> ID：12260889
> 
> 赞同：1
> 
> 时间：2012-09-04T09:50:39.677
> 
> 标签：c#

我有类型结构的列表，我在其中临时添加数据并在将数据写入数据库或文件时删除它们，我正在使用`list.RemoveAll`方法从列表中删除项目。

如果我在计数为零的列表上调用它，则`list.RemoveAll`应该抛出`ArgumentNullException`，但即使计数为零，它也不会抛出任何异常。

```
 _dataNotWrittenToDb.RemoveAll(item => item.ScopeId == _a2Data.ScopeId);
    _dataWrittenToDB.RemoveAll(item => item.ScopeId == _a2Data.ScopeId); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:55:12.830

来自[MSDN](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)

**例外**

```
Exception   Condition
ArgumentNullException   

match is null. 
```

RemoveAll 仅在传递的参数为 null 时抛出 ArgumentNullException，在您的情况下它不为 null

RemoveAll 的工作是删除与给定条件匹配的所有元素，在您的情况下，没有匹配的元素，没有删除并且没有理由返回异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:09:47.320

如果你想要例外，你可以这样做：

```
Predicate<YourItemStruct> p = item => item.ScopeId == _a2Data.ScopeId;

if (!_dataNotWrittenToDb.Exists(p))
  throw new Exception("No items exist to delete");
_dataNotWrittenToDb.RemoveAll(p); 
if (!_dataWrittenToDb.Exists(p))
  throw new Exception("No items exist to delete");
_dataWrittenToDb.RemoveAll(p); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:55:17.563

从列表反编译的来源：

```
 public int RemoveAll(Predicate<T> match)
    {
      if (match == null)
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.match);
      int index1 = 0;
      while (index1 < this._size && !match(this._items[index1]))
        ++index1;
      if (index1 >= this._size)
        return 0;
      int index2 = index1 + 1;
      while (index2 < this._size)
      {
        while (index2 < this._size && match(this._items[index2]))
          ++index2;
        if (index2 < this._size)
          this._items[index1++] = this._items[index2++];
      }
      Array.Clear((Array) this._items, index1, this._size - index1);
      int num = this._size - index1;
      this._size = index1;
      ++this._version;
      return num;
    } 
```

正如您所看到的，此方法抛出的唯一时间`ArgumentNullException`是参数实际上是 equals 的时候`null`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T09:55:05.990

如果`count`为 0，则表示列表为空。但是这个列表是存在的。`Null`表示该列表不存在。

`NullReferenceException`只会被扔到`null`物体上，而不是空的。

与根本没有盒子相比，它就像现实生活中的一个空盒子。

# c# - DateEdit 显示时间选择器

> ID：12260890
> 
> 赞同：4
> 
> 时间：2012-09-04T09:50:43.407
> 
> 标签：c#, winforms, devexpress

我怎样才能在里面显示时间选择器`DevExpress.XtraEditors.DateEdit`？我想动态选择时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T10:00:27.517

假设 dateEdit 是您的控件的名称：

```
 dateEdit.Properties.VistaDisplayMode = DefaultBoolean.True;
  dateEdit.Properties.VistaEditTime = DefaultBoolean.True; 
```

![DateEdit VistaDisplayMode 和 VistaEditTime](../Images/4fa23f3ae8ddc30485f7e147be1b91e0.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T10:18:17.267

要显示 TimePicker，您应该设置`VistaDisplayMode`和`VistaEditTime`属性，`true` 并且不要忘记更改`EditFormat`，`DisplayFormat`以及`EditMask`任何 DateTime 格式，例如：`"dd.M.y hh:mm"`

# android - android update luanching 从应用商店

> ID：12260900
> 
> 赞同：-3
> 
> 时间：2012-09-04T09:51:38.847
> 
> 标签：android, updates

我在 GingerBread 版本的 Google Play 商店中有一些 Android 应用程序。许多用户从商店安装应用程序。问题是现在我的应用程序中有一些更新，我无法上传新的并再次要求用户卸载旧的一个并安装新的。我想在运行应用程序时显示一些通知，用户是否应该要求更新新版本。请帮我找出这个解决方案，这怎么可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:53:58.993

你不需要为此做任何事情。只需在清单中使用相同的键和包名称上传具有更高 versionCode 的新应用程序。Google Play 会自动完成您的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:05:20.897

更新包名，发布证书要一致，版本要一致

# jasmine - 如何在 jasmine 测试中为 Angular 项目注入依赖项

> ID：12260906
> 
> 赞同：29
> 
> 时间：2012-09-04T09:51:49.783
> 
> 标签：jasmine, angularjs

这是测试规范文件：

```
describe('Test main controller', function(){
        it('Should initialize value to Loading', function(){
            $scope = {}
            ctrl =  new mainNavController($scope)
            expect($scope.wksp_name).toBe('Loading')
        })
    }) 
```

这是控制器文件

```
function mainNavController($scope) {
    $scope.wksp_name = 'Loading...'
    $scope.$on('broadCastWkspNameEvent', function (e, args) {
        $scope.wksp_name = args
    })
}

mainNavController.$inject=['$scope'] 
```

但是我的测试失败了`Object #<Object> has no method '$on'`

我正在使用茉莉花的基本设置。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Jasmine Spec Runner</title>

  <link rel="shortcut icon" type="image/png" href="testlib/jasmine-1.2.0/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="testlib/jasmine-1.2.0/jasmine.css">
  <script type="text/javascript" src="testlib/jasmine-1.2.0/jasmine.js"></script>
  <script type="text/javascript" src="testlib/jasmine-1.2.0/jasmine-html.js"></script>

  <!-- include source files here... -->
  <script type="text/javascript" src="/static_files/js/test-specs/main-nav-spec.js"></script>

  <!-- include spec files here... -->
  <script type="text/javascript" src="/static_files/js/common/jquery/latest.js"></script>
  <script type="text/javascript" src="/static_files/js/common/angular/angular-1.0.1.min.js"></script>
  <script type="text/javascript" src="/static_files/js/common/angular/angular-resource-1.0.1.min.js"></script>
  <script type="text/javascript" src="/static_files/js/section/main-nav-controller.js"></script>

  <script type="text/javascript">
    (function() {
      var jasmineEnv = jasmine.getEnv();
      jasmineEnv.updateInterval = 1000;

      var htmlReporter = new jasmine.HtmlReporter();

      jasmineEnv.addReporter(htmlReporter);

      jasmineEnv.specFilter = function(spec) {
        return htmlReporter.specFilter(spec);
      };

      var currentWindowOnload = window.onload;

      window.onload = function() {
        if (currentWindowOnload) {
          currentWindowOnload();
        }
        execJasmine();
      };

      function execJasmine() {
        jasmineEnv.execute();
      }

    })();
  </script>

</head>

<body>
</body>
</html> 
```

我做错了什么？我无法理解这件事应该如何工作:)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-04T17:20:26.197

您的测试代码的主要问题是它尝试使用 new 运算符“手动”创建控制器的实例。这样做时，AngularJS 没有机会注入依赖项。您应该做的是允许 AngularJS 注入依赖项：

```
var $scope, ctrl;

//you need to inject dependencies first
beforeEach(inject(function($rootScope) {
    $scope = $rootScope.$new();        
}));

it('Should initialize value to Loading', inject(function($controller) {
    ctrl = $controller('MainNavController', {
        $scope: $scope
    });
    expect($scope.wksp_name).toBe('Loading...');
})); 
```

这是完整 jsFiddle 的链接：http: [//jsfiddle.net/pkozlowski_opensource/7a7KR/3/](http://jsfiddle.net/pkozlowski_opensource/7a7KR/3/)

上面的例子有两点值得注意：

1.  您可以使用 ngMock 模块中的 inject() 方法来注入依赖项：[https ://docs.angularjs.org/api/ngMock/function/angular.mock.inject](https://docs.angularjs.org/api/ngMock/function/angular.mock.inject)
2.  要创建一个控制器实例（支持依赖注入），您可以使用 $controller 服务：[http ://docs.angularjs.org/api/ng.$controller](http://docs.angularjs.org/api/ng.$controller)

最后一点：我建议以大写字母开头命名控制器 - 这样我们就不会将它们与变量名混淆。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-01T08:06:08.790

@pkozlowski.opensource 的好答案。`$scope.$on`更详细地说......有时断言真正由您的控制器调用也可能很方便。在这种情况下，您可以`$scope.$on`如下所述进行监视：

```
beforeEach(inject(function($rootScope) {
    $scope = $rootScope.$new();        
    spyOn($scope, '$on').andCallThrough();
})); 
```

然后你可以断言它`$on`是用你的事件名称和一些函数作为参数调用的：

```
it('Should bind to "broadCastWkspNameEvent"', inject(function($controller) {
    ctrl = $controller('MainNavController', {
        $scope: $scope
    });
    expect($scope.$on).toHaveBeenCalledWith('broadCastWkspNameEvent', jasmine.any(Function));
})); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-29T13:07:51.733

我同意 pkozowski 的回答，但要更直接地回答您的问题，您需要删除 '$on'

如果您的 $scope 如下所示，您的示例将通过：

```
$scope = {
  $on: function() {}
} 
```

# c - 为什么在原始驱动程序中未更新由另一个驱动程序修改的导出常量值

> ID：12260909
> 
> 赞同：0
> 
> 时间：2012-09-04T09:52:09.917
> 
> 标签：c, linux-kernel, constants, kernel-module

我在一个驱动程序中声明了一个静态 const int 变量并导出了该变量符号。在另一个驱动程序中，我正在修改该变量。另一个驱动程序打印修改后的值，但原始驱动程序保留原始值。当两个驱动程序看到的变量的虚拟地址和物理地址都相同时，这怎么可能呢？它是内核错误吗？

```
[root@localhost bug]# uname -a
Linux localhost.localdomain 3.5.3 #3 SMP Mon Sep 3 21:52:12 IST 2012
i686 i686 i386 GNU/Linux 
```

[root@localhost bug]# cat driver.c

```
#include <linux/module.h>

static const int value = 123;

int init_module()
{
        printk("Base driver (init): value                     = %d\n", value);
        printk("Base driver (init): virtual address of value  = %p\n", (void *)&value);
        printk("Base driver (init): physical address of value = %p\n", (void
*)__pa(&value));
        return 0;
}

void cleanup_module()
{
        printk("Base driver (exit): value                     = %d\n", value);
        printk("Base driver (exit): virtual address of value  = %p\n", (void *)&value);
        printk("Base driver (exit): physical address of value = %p\n", (void
*)__pa(&value));
}
EXPORT_SYMBOL(value); 
```

[root@localhost bug]# cat hacker.c

```
#include <linux/module.h>

extern int value;

int init_module()
{
        value = 987;
        printk("Hacker driver (init): value                     = %d\n", value);
        printk("Hacker Base driver (init): virtual address of value  = %p\n",
(void *)&value);
        printk("Hacker Base driver (init): physical address of value = %p\n",
(void *)__pa(&value));
        return 0;
}

void cleanup_module()
{
        printk("Hacker driver (exit): value                     = %d\n", value);
        printk("Hacker driver (exit): virtual address of value  = %p\n",
(void *)&value);
        printk("Hacker driver (exit): physical address of value = %p\n",
(void *)__pa(&value));
        return;
}

[root@localhost bug]# insmod driver.ko 
```

基本驱动程序 (init)：值 = 123 基本驱动程序 (init)：值的虚拟地址 = f89d61c8 基本驱动程序 (init)：值的物理地址 = 389d61c8

```
[root@localhost bug]# insmod hacker.ko 
```

Hacker 驱动程序 (init): value = 987 Hacker Base driver (init): value 的虚拟地址 = f89d61c8 Hacker Base driver (init): value 的物理地址 = 389d61c8

```
[root@localhost bug]# rmmod hacker.ko 
```

黑客驱动（退出）：值 = 987 黑客驱动（退出）：值的虚拟地址 = f89d61c8 黑客驱动（退出）：值的物理地址 = 389d61c8

```
[root@localhost bug]# rmmod driver.ko 
```

基本驱动程序（退出）：值 = 123 基本驱动程序（退出）：值的虚拟地址 = f89d61c8 基本驱动程序（退出）：值的物理地址 = 389d61c8

```
[root@localhost bug]# cat /proc/kallsyms | grep value 
```

f89f91c8 R 值 [驱动程序] f89f9088 r __ksymtab_value [驱动程序] f89f91cc r __kstrtab_value [驱动程序]

有趣的是，当我在 driver.c 中将变量声明更改为“volatile”为“static const volatile int”时，driver.ko 在 rmmod 期间打印修改后的值“987”，原始值“123”丢失。这个和之前的声明有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:29:32.473

这与内核无关。这是基本的 C 行为。一旦你声明了一个变量 const，编译器就可以自由地将你分配给它的值内联在同一个编译单元中访问它的任何地方。获取一个指向 const 变量的指针会强制编译器在数据部分中添加该变量的副本，假设它是只读的。

如果您运行`objdump -d`一个结果内核模块并查看 init_module，您会看到在传递给的参数中`printk`，它并不是真正访问变量，而是使用值的内联副本。

# tcl - 列表在 Tcl 中不包含它自己的成员

> ID：12260917
> 
> 赞同：2
> 
> 时间：2012-09-04T09:52:49.587
> 
> 标签：tcl

我有一个包含一个成员的列表，该成员是 string `<cmd_stichstudy1>XXDDR0_MA[12]`。当我在列表中搜索该字符串时（使用`lsearch`），我发现列表中不包含它。我什至在搜索列表成员时得到它：

```
tcl> set nets_names

{<cmd_stichstudy1>XXDDR0_MA[12]}

tcl> lsearch $nets_names [lindex $nets_names 0]

-1 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:14:09.860

如果您使用[-exact](http://www.tcl.tk/man/tcl8.5/TclCmd/lsearch.htm#M6)它将按照您想要的方式工作。

```
% set nets_names {<cmd_stichstudy1>XXDDR0_MA[12]}
<cmd_stichstudy1>XXDDR0_MA[12]
% lsearch -exact $nets_names [lindex $nets_names 0]
0
% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:18:59.553

`lsearch`不幸的是，默认情况下使用[glob 样式匹配](http://www.tcl.tk/man/tcl8.5/TclCmd/string.htm#M40)。

引用手册：

> 如果省略所有匹配样式选项，则默认匹配样式为 -glob。

所以总是传递`-exact`给`lsearch`除非你真的想要`-glob`。

# iphone - 在 iPhone 中将图像从左向右移动为圆形和无限动画（如广告）

> ID：12260919
> 
> 赞同：0
> 
> 时间：2012-09-04T09:52:53.893
> 
> 标签：iphone, animation, uiimageview

我很难将图像从左向右移动。现在我有一种情况，当我有一个无限动画但它只是将当前图像替换为另一个。

这是我的代码：

```
-(void)startAnimationTest
{
   image.animationImages = [NSArray arrayWithObjects:
                         [UIImage imageNamed:@"pic_1.png"],
                         [UIImage imageNamed:@"pic_2.png"],
                         [UIImage imageNamed:@"pic_3.png"], nil];
   [image setAnimationDuration:1];
   image.animationDuration = 4;
   [image startAnimating];

} 
```

谢谢你，

伊丽莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:25:13.843

尝试将图像添加到滚动视图，然后根据其内容偏移量为滚动视图设置动画。请参阅随附的示例代码。确保添加一个 nstimer 以重复调用该函数。

```
- (void) animateScrollView: (id) sender
{
     [UIView beginAnimations:nil context:NULL];
     CGPoint contentOffset = scrollView.contentOffset;
     contentOffset.x +=3;
     [scrollView setContentOffset:contentOffset animated:NO];
     [UIView commitAnimations];
     if (scrollView.contentOffset.x == (scrollView.bounds.size.width * 5)) {
         scrollView.contentOffset = CGPointMake(0, scrollView.bounds.origin.y);
     }
} 
```

设置定时器如下：

```
 [NSTimer scheduledTimerWithTimeInterval: .03
                                 target: self
                               selector: @selector(animateScrollView:)
                               userInfo: nil
                                repeats: YES]; 
```

就是这样。希望能帮助到你。

# iphone - Xcode 中的库项目参考

> ID：12260920
> 
> 赞同：0
> 
> 时间：2012-09-04T09:52:56.623
> 
> 标签：iphone, xcode, ios5

我知道这样的事情已经在 SO 上被问过很多次了，但是我已经尝试了一切（现在已经在这三个小时了），但我仍然没有找到解决方案。我对 xCode 很陌生，我开始从事一个最初由其他人创建的项目。

所以，我的 xcode (XS2Library) 中有一个库项目，现在我想在我的另一个项目 (WaarBenJij) 中引用该库。构建库成功，我通过将 LibXS2Library.a 添加到项目目标的“Link Binary With Libraries”来引用它。

Xcode 没有给我任何错误，所以看起来库项目被适当地引用了。但是，当我尝试构建我的项目时，我收到一个错误，即找不到驻留在我的库项目中的类（“找不到'XS2URLLoader.h'文件”）。

也许有人可以引导我朝着正确的方向前进吗？

![将二进制文件与库链接](../Images/8bf0c06022f88e2266d2ed2b82058bf0.png)

![项目](../Images/85e6387174d414784601a2d075f471d5.png)

![错误](../Images/0c793d321fa3080b0910e0aad5b35200.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:58:50.430

.a 文件（链接所需并包含库源代码）与 .h 文件（编译（和预处理）所需并包含函数和类声明）之间存在明显差异。

在这里，您包含了 .a 文件，这是后续步骤所必需的，但要使用该库，您还需要将所需的 .h 文件导入到您的项目中。

更简单的方法是将它们简单地放入您的项目中。

或者您可以将整个库添加为子项目*和*依赖项。

# c# - 登录页面逻辑错误

> ID：12260924
> 
> 赞同：0
> 
> 时间：2012-09-04T09:53:11.843
> 
> 标签：c#, asp.net, sql

我正在使用 ASP.NET 4.0、C# 和 SQL Server 2008 开发网站。在我的登录页面中，同一用户在注册时应该多次登录。在他的“Step-I”注册后，用户将等待管理员批准。在“仅限管理员批准”后，用户可以重定向到“第二步”注册页面。所以我编写如下代码。但是根据我的代码，在没有管理员批准的情况下，当用户第二次登录时，页面会重定向到“第二步”注册。如何预防？需要帮忙。

```
 protected void BtnHomeUserSubmit_Click(object sender, EventArgs e)
   {
    SqlConnection SqlCon = new SqlConnection(GetConnectionString());
    try
    {          
     var da1 = new SqlDataAdapter
           ("select * from User_Info2 where Vendor_ID ='" +   txtHomeUsername.Text.Trim() + "'
   AND User_Password='" + txtHomePassword.Text.Trim() + "'", SqlCon);
   var dt1 = new DataTable();
   da1.Fill(dt1);
   if (dt1.Rows.Count == 0)
   {
           ScriptManager.RegisterStartupScript(this, this.GetType(), "Alert",
   "alert('Enter valid Vendor ID and Password');", true);
  }
  else
  {
  var da2 = new SqlDataAdapter
  ("select * from Company_Info where Vendor_ID='"+ txtHomeUsername.Text+"' 
      AND Approval_Status='NO' OR Approval_Status='PEN'", SqlCon);
  var dt2 = new DataTable();
  da2.Fill(dt2);
  if (dt2.Rows.Count > 0)
  {
   string url = "../ApprovalStatus2.aspx?Parameter=" + Server.UrlEncode(txtHomeUsername.Text);
   ClientScript.RegisterStartupScript(this.GetType(),
   "callfunction","alert('Vendor ID is waiting for Approval');
    window.location.href = '" + url + "';", true);
  }
  var da3 = new SqlDataAdapter
("select Vendor_ID from RegPage1 where Vendor_ID='" + txtHomeUsername.Text.Trim() + "'",SqlCon);
  var dt3 = new DataTable();
  da3.Fill(dt3);
  if (dt3.Rows.Count > 0)
  {
   string url = "../UserLogin.aspx";
   ClientScript.RegisterStartupScript(this.GetType(),"callfunction","alert
   ('Vendor ID already completed the registration');window.location.href ='" + url + "';", true);
  }
  else
  {
    Response.Redirect("~/RegPage1.aspx?Parameter=" + Server.UrlEncode(txtHomeUsername.Text));
  }
  }
  }
  finally
  {
  SqlCon.Close();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:04:48.433

像这样更改您的编码：

```
var da2 = new SqlDataAdapter
  ("select * from Company_Info where Vendor_ID='"+ txtHomeUsername.Text+"' 
      AND (Approval_Status='NO' OR Approval_Status='PEN')", SqlCon); 
```

如果有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:57:18.610

代码更改：请检查并告诉我

```
protected void BtnHomeUserSubmit_Click(object sender, EventArgs e)
   {
    SqlConnection SqlCon = new SqlConnection(GetConnectionString());
    try
    {          
        var da1 = new SqlDataAdapter
           ("select * from User_Info2 where Vendor_ID ='" +   txtHomeUsername.Text.Trim() + "'
   AND User_Password='" + txtHomePassword.Text.Trim() + "'", SqlCon);
   var dt1 = new DataTable();
   da1.Fill(dt1);
   if (dt1.Rows.Count == 0)
   {
           ScriptManager.RegisterStartupScript(this, this.GetType(), "Alert",
        "alert('Enter valid Vendor ID and Password');", true);
   }
  else
  {
     var da2 = new SqlDataAdapter
      ("select * from Company_Info where Vendor_ID='"+ txtHomeUsername.Text+"' 
      AND (Approval_Status='NO' OR Approval_Status='PEN')", SqlCon);
      var dt2 = new DataTable();
      da2.Fill(dt2);
      if (dt2.Rows.Count > 0)
     {
           string url = "../ApprovalStatus2.aspx?Parameter=" +
                 Server.UrlEncode(txtHomeUsername.Text);
                 ClientScript.RegisterStartupScript(this.GetType(),
                "callfunction","alert('Vendor ID is waiting for Approval');
              window.location.href = '" + url + "';", true);
      }
      else
     {
             var da3 = new SqlDataAdapter
            ("select Vendor_ID from RegPage1 where Vendor_ID='" + 
              txtHomeUsername.Text.Trim() + "'",SqlCon);
            var dt3 = new DataTable();
            da3.Fill(dt3);
            if (dt3.Rows.Count > 0)
            {
                 string url = "../UserLogin.aspx";
                 ClientScript.RegisterStartupScript(this.GetType(),"callfunction",
                 "alert('Vendor ID already completed the 
                  registration');window.location.href ='" + url + "';", true);
             }
             else
             {
                  Response.Redirect("~/RegPage1.aspx?Parameter=" + 
                  Server.UrlEncode(txtHomeUsername.Text));
             }
       }
  }
  }
  finally
  {
  SqlCon.Close();
  } 
```

# c# - SharpSVN：检查结帐 URI 是否有效

> ID：12260925
> 
> 赞同：1
> 
> 时间：2012-09-04T09:53:14.793
> 
> 标签：c#, sharpsvn, svn-checkout

我正在使用sharpSVN 以编程方式执行诸如签出和提交之类的任务。用户输入 URI 进行结帐并按下 Checkout 按钮。

很多时候，用户输入了无效的 URI，当程序尝试结帐时，它会抛出异常。我可以处理异常，但我想在尝试结帐之前检查 URI 是否有效。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:39:04.107

验证服务器状态的最便宜的 SvnClient 命令是调用`SvnClient.Info()`Uri。如果目标是一个目录（检查`.Kind`），您可以安全地使用`.CheckOut()`.

# java - 删除openjpa为sybase生成的sql中的引号

> ID：12260929
> 
> 赞同：0
> 
> 时间：2012-09-04T09:53:38.980
> 
> 标签：java, jakarta-ee, jpa, sybase, openjpa

我需要能够引用不同模式上的表，使用 OpenJPA 访问 Sybase 数据库。

因此，例如，我需要选择如下：

```
SELECT name FROM SHARE.dbo.PROVINCE; 
```

但是，生成的 SQL 是：

```
SELECT name FROM "SHARE.dbo".PROVINCE; 
```

Sybase 拒绝。没有引号它工作正常。

我在课堂上使用以下注释：

```
@Entity
@Table(name="PROVINCE", schema="SHARE.dbo") 
```

using`schema="SHARE"`不起作用，尽管它生成的 sql 没有任何引号。（Sybase 需要 schema.owner.table，`SCHEMA.PROVINCES`未知对象也是如此）

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:11:57.977

尝试将模式连接到表名：`@Table(name="SHARE.dbo.PROVINCE")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T14:46:15.613

这有点摸不着头脑，但是您可以尝试禁用分隔标识符支持吗？

```
openjpa.DBDictionary=sybase(SupportsDelimitedIdentifiers=false) 
```

# python - 来自字符串的龙卷风模板加载器 - Heroku

> ID：12260939
> 
> 赞同：0
> 
> 时间：2012-09-04T09:54:04.330
> 
> 标签：python, heroku, tornado

我正在 Heroku 上部署一个龙卷风服务器。我目前以标准方式从文件中加载模板。我想从数据库字段而不是文件中加载它们。

我该如何以干净的方式做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:36:05.497

尝试使用[Template](https://github.com/facebook/tornado/blob/master/tornado/template.py#L200)而不是[Loader](https://github.com/facebook/tornado/blob/master/tornado/template.py#L338)。

这将很简单：

```
from tornado.template import Template
t = Template(my_template_string_from_database)
r = t.generate(key=value) #as we do in loader 
```

示例未检查，但这样想。不要害怕龙卷风代码 - 它很容易阅读。

# java - 创建基于 solr 的重复数据删除系统的最佳实践是什么？

> ID：12260944
> 
> 赞同：1
> 
> 时间：2012-09-04T09:54:25.777
> 
> 标签：java, search, solr, lucene, deduplication

我正在建立一个基于 solr 搜索的重复数据删除系统，该系统将返回匹配搜索条件的搜索结果。我使用数据导入处理程序从数据库中提取数据并在 Solr 服务器上创建索引文档。

我的 solr 架构如下：

```
<field name="customer_id" type="int" indexed="true" stored="true" required="true" />
<field name="fname" type="phonetic" indexed="true" stored="true" />
<field name="lname" type="phonetic" indexed="true" stored="true"/>
<field name="address" type="text_en" indexed="true" stored="true" />
<field name="city" type="string" indexed="true" stored="true"  />
<field name="state" type="string" indexed="true" stored="true"  />
<field name="zipcode" type="string" indexed="true" stored="true"  />
<field name="telephone" type="string" indexed="true" stored="true"  /> 
```

如上所示，我已将名字 (fname) 和姓氏 (lname) 字段的类型指定为使用 DoubleMetaphoneFilterFactory 进行拼音搜索的拼音。音域类型说明如下：

```
<fieldtype name="phonetic" stored="false" indexed="true" class="solr.TextField" >
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory" />
    <filter class="solr.NGramFilterFactory" minGramSize="1" maxGramSize="15" side="front"/>
    <filter class="solr.DoubleMetaphoneFilterFactory" inject="true"/>
  </analyzer>
</fieldtype> 
```

我希望我的搜索返回与所有指定查询字段匹配的文档，而不仅仅是任何一个搜索字段。

我的问题是，如果我单独搜索 fname、lname 或地址，则结果非常相关，但是当我将过滤查询与主要搜索查询一起使用时，结果包含来自两个搜索条件的结果的联合。

请有人指出我做错了什么。**此外，是否有任何最佳实践需要牢记，以便为可以识别重复客户记录的银行的这种重复数据删除系统设计 solr 架构。**

提前致谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T09:25:55.057

如果您想要的是基于 Lucene 的客户重复数据删除系统，您可能只想使用[Duke](http://code.google.com/p/duke/)。它是一个通用的重复数据删除引擎，它使用 Lucene 来索引记录，然后使用更复杂的比较器（如 Levenshtein、Weighted Levenshtein、Jaro-Winkler 等）进行详细比较。它有 JDBC 数据库等的标准连接器，但你也可以自己编写，甚至直接为引擎提供数据。比较基于将概率与贝叶斯定理相结合。

根据我编写 Duke 的经验，我会说您将很难让 Lucene 为您完成所有工作。正如您所说，搜索结果非常好，但精度不会像您从专门为此设计的算法中获得的那样好。

所以我给你的建议是获得一个为重复数据删除而构建的工具。我提到了 Duke，因为它基于 Lucene，并且非常接近您正在尝试构建的内容，但您确实可以使用任何[记录链接](http://en.wikipedia.org/wiki/Record_linkage)引擎。Duke 使用 Lucene 来提高性能（所以我们不必比较所有记录对），但是其他引擎有其他方法可以在不使用搜索的情况下实现类似的性能，我猜对你来说，Lucene 是否在里面并不重要. 因此，上面链接的记录链接页面上列出的任何工具都可以为您工作。

请注意，几十年来，这一直是一个巨大的研究领域，人们在解决这个问题上取得了很好的进展。所以现成的工具确实不错。还有很多商业工具可以做到这一点，但自从你开始构建自己的工具后，我认为这些工具并不相关。

**全面披露**：我是杜克的作者。我想我们不应该在这里推销自己，但是，真的，对我来说，使用现成的包比构建自己的包听起来要好得多。YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:48:22.610

您正在构建的查询似乎类似于

```
customer_id OR fname OR someOther 
```

如果您需要涉及其他字段，则需要更改查询（union od customer_id and fname with should operator）

```
(customer_id AND fname) OR someOther 
```

您可以搜索以下网站以获取更多信息

*   [http://www.solrtutorial.com/solr-query-syntax.html](http://www.solrtutorial.com/solr-query-syntax.html)
*   [http://www.solrtutorial.com/lucene-query-builder.html](http://www.solrtutorial.com/lucene-query-builder.html)

# android - Android内部存储错误

> ID：12260945
> 
> 赞同：1
> 
> 时间：2012-09-04T09:54:25.927
> 
> 标签：android, storage, internal

我试图写一些内部存储的东西。打开一个目录..和文件输出流。我设法写了一个文件，但是当我尝试使用这个文件并得到一个错误时（Logcat没有错误。当“Startactivity”部分运行时打开一个对话框。在android设备的对话框上写“有一个数据包解析错误”）。实际上该文件存在但我不使用该文件。我的目标是 startactivity：打开一个将 apk 文件加载到 android 设备的意图。

我的内部存储之路

```
mydir = getDir("mydir", MODE_WORLD_READABLE);
filewithmydir = new File(mydir,fileName+".apk");
fileOutPutStream = new FileOutputStream(filewithmydir); 
```

从输入流中用进度条写一些东西到文件（这部分是成功的）

```
 byte[] data = new byte[1024];
    long total = 0;
    int count;
    while ((count = inputStream.read(data)) != -1) {

        total += count;
        publishProgress((int) total * 100 / fileLength);

        fileOutPutStream.write(data, 0, count);
    } 
```

使用文件的部分

```
 intent.setDataAndType(Uri.fromFile(new File(mydir.getAbsolutePath()+"/incomingplus.apk")), "application/vnd.android.package-archive");
            startActivity(intent);// Error is here! 
```

我的权限

`<uses-permission android:name="android.permission.INSTALL_PACKAGES"/>`

`<uses-permission android:name="android.permission.INTERNET"/>`

`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>`

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>`

`<uses-permission android:name="android.permission.READ_PHONE_STATE"/>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:01:00.087

如果您通过外部应用程序打开文件，它无法访问您的文件。你也使用不同的变量： `intent`和`intentGuncelle``intent.setDataAndType(Uri.fromFile(new File(mydir.getAbsolutePath()+"/incomingplus.apk")), "application/vnd.android.package-archive"); startActivity(intentGuncelle);// Error is here!`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:01:25.377

您是否在清单中包含了权限？

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# c++ - C ++从多个线程访问向量

> ID：12260946
> 
> 赞同：9
> 
> 时间：2012-09-04T09:54:26.860
> 
> 标签：c++, multithreading, synchronization, segmentation-fault, flags

在我的程序中，我有一些线程正在运行。每个线程都有一个指向某个对象的指针（在我的程序中 - 向量）。每个线程都会修改向量。

有时我的程序会因段错误而失败。我认为它的发生是因为线程 A 开始对向量做一些事情，而线程 B 还没有完成对它的操作？这是真的吗？

我该如何解决？线程同步？或者也许制作一个标志`VectorIsInUse`并在使用它时将此标志设置为true？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T10:02:01.520

`vector`与所有 STL 容器一样，不是线程安全的。您必须自己明确管理同步。A [`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex)or[`boost::mutex`](http://www.boost.org/doc/libs/1_42_0/doc/html/thread/synchronization.html)可用于同步对`vector`.

不要使用标志，因为这不是线程安全的：

*   线程 A 检查`isInUse`标志的值，它是`false`
*   线程 A 被挂起
*   线程 B 检查`isInUse`标志的值，它是`false`
*   线程 B 设置`isInUse`为`true`
*   线程 B 被挂起
*   线程 A 恢复
*   线程 A 仍然认为`isInUse`是`false`并设置它`true`
*   线程 A 和线程 B 现在都可以访问`vector`

请注意，每个线程都必须在`vector`需要使用它的整个时间内锁定它。这包括修改`vector`和使用 的`vector`迭代器，因为如果迭代器引用的元素是`erase()`或`vector`经历内部重新分配，迭代器可能会失效。例如**不要**：

```
mtx.lock();
std::vector<std::string>::iterator i = the_vector.begin();
mtx.unlock();

// 'i' can become invalid if the `vector` is modified. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T10:09:44.190

如果您想要一个可以在多个线程中安全使用的容器，您需要使用专门为此目的设计的容器。标准容器的接口不是为并发变异或任何类型的并发而设计的，你不能只是在问题上加锁。

您需要其中包含 TBB 或 PPL 之类`concurrent_vector`的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:58:26.763

这就是为什么几乎每个提供线程的类库都具有同步原语，例如互斥锁/锁。您需要设置其中一个，并获取/释放对共享项的每个操作的锁定（读取和写入操作，因为您也需要防止在写入期间发生读取，而不仅仅是防止同时发生多个写入）。

# c# - 记录进程读取/写入的所有注册表值

> ID：12260949
> 
> 赞同：1
> 
> 时间：2012-09-04T09:54:36.943
> 
> 标签：c#, .net, vb.net

有没有办法记录进程读取/写入的所有注册表值，类似于 Process Monitor 所做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:30:19.803

来自[codeproject.com](http://www.codeproject.com/Articles/30624/Asynchronous-Registry-Notification-Using-Strongly)：

> 在 .NET 中处理 WMI 事件 --- 为了在 .NET 中处理 WMI 事件，我们可以使用 System.Management 命名空间中的类。例如，这是由 WMI Code Creator 生成的一段代码：
> 
> ```
> using System;
> using System.Management;
> using System.Windows.Forms;
> 
> namespace WMISample
> {
>   public class WMIReceiveEvent
>   {
>     public static void Main()
>     {
>       try
>       {
>         //Construct the query. Keypath specifies the key in the registry to watch.
>         //Note the KeyPath should be must have backslashes escaped. Otherwise 
>         //you will get ManagementException.
>         WqlEventQuery query = new WqlEventQuery(
>                   "SELECT * FROM RegistryKeyChangeEvent WHERE " +
>                   "Hive = 'HKEY_LOCAL_MACHINE'" +
>                  @"AND KeyPath = 'SOFTWARE\\Microsoft\\.NETFramework'");
> 
>          ManagementEventWatcher watcher = new ManagementEventWatcher(query);
>          Console.WriteLine("Waiting for an event...");
> 
>          ManagementBaseObject eventObj = watcher.WaitForNextEvent();
> 
>          Console.WriteLine("{0} event occurred.", eventObj["__CLASS"]);
> 
>          // Cancel the event subscription
>          watcher.Stop();
>          return;
>       }
>       catch(ManagementException err)
>       {
>           MessageBox.Show("An error occurred while trying to receive an event: " + 
>         err.Message);
>       }
>     }
>   }
> } 
> ```

# scheduler - 如何在 MVC3 中使用 DHTMLX 调度程序？

> ID：12260950
> 
> 赞同：0
> 
> 时间：2012-09-04T09:54:37.080
> 
> 标签：scheduler, dhtmlx

我需要在 MVC3 项目中使用 DHTMLX Scheduler。有什么方法可以在我的 MVC3 项目中使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:17:50.263

检查下一个链接

调度器 MVC 教程

*   [http://scheduler-net.com/docs/simple_.net_application_with_scheduler.html](http://scheduler-net.com/docs/simple_.net_application_with_scheduler.html)

调度器 MVC 视频教程

*   [http://blog.scheduler-net.com/post/2012/03/16/asp-net-event-calendar-video-tutorial.aspx](http://blog.scheduler-net.com/post/2012/03/16/asp-net-event-calendar-video-tutorial.aspx)

# view - 在 XCode 4.5 中正确使用新的“容器视图”？

> ID：12260955
> 
> 赞同：6
> 
> 时间：2012-09-04T09:54:44.213
> 
> 标签：view, containers, preview, xcode4.5

我最近在 XCode 4.5 Developer Preview 中发现了新的“容器视图”，并想知道这是否是使用它的正确方法： ![两个视图控制器，通过按钮简单连接](../Images/fc10a39529751cc018024452314ffc32.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:42:58.267

看看 iTunes U 上的 2013 年斯坦福 IOS 6 编程课程。 Paul Gregory，一位出色的演讲者，就容器控件的使用做了一个非常好的讲座。

# java - 如何设置 Java 默认按钮以对 ENTER 键 _released_ 做出反应？

> ID：12260962
> 
> 赞同：19
> 
> 时间：2012-09-04T09:55:16.077
> 
> 标签：java, swing, event-handling, defaultbutton

在我的应用程序中，我使用默认按钮。我希望它在`ENTER`Key 被*释放*时做出反应。不是当`ENTER`Key 被*按下*时。

我删除了按钮的`KeyStroke`from `InputMap`。但这对我不起作用。我该怎么做？

* * *

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;

public class ButtonTest {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                buildFrame();
            }
        });
    }

    private static void buildFrame() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        JButton button = new JButton(new AbstractAction("Button") {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("ButtonTest::actionPerformed: CALLED");
            }
        });

        JButton button2 = new JButton("Button 2");
        InputMap im = button.getInputMap();
        im.put(KeyStroke.getKeyStroke("ENTER"), "none");
        im.put(KeyStroke.getKeyStroke("released ENTER"), "released");

        f.setLayout(new GridBagLayout());
        f.add(button);
        f.add(button2);
        f.getRootPane().setDefaultButton(button);

        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

这是示例代码。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-12-10T12:38:59.613

```
JRootPane rootPane = SwingUtilities.getRootPane(/* Your JButton  */); 
rootPane.setDefaultButton(/* Your JButton  */); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T15:48:48.403

默认按钮（即进入时触发的按钮，无论哪个组件是 focusOwner）的键都绑定在 rootPane 的 componentInputMap 中，即其类型为 WHEN_IN_FOCUSED_WINDOW 的 inputMap。所以从技术上讲，这是调整的地方：

```
JComponent content = new JPanel();
content.add(new JTextField("some focusable"));
content.add(new JTextField("something else"));

JXFrame frame = wrapInFrame(content, "default button on released");
Action action = new AbstractAction("do something") {

    @Override
    public void actionPerformed(ActionEvent e) {
        LOG.info("clicked");
    }
};
JButton button = new JButton(action);
content.add(button);
frame.getRootPane().setDefaultButton(button);
// remove the binding for pressed
frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)
    .put(KeyStroke.getKeyStroke("ENTER"), "none");
// retarget the binding for released
frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)
    .put(KeyStroke.getKeyStroke("released ENTER"), "press"); 
```

注意：这与非默认按钮的按下/释放行为仍然不同，因为 rootPane 操作只是调用 button.doClick 而不通过武装/按下 buttonModel 的动作来间接触发该操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T12:33:12.273

```
 InputMap im = button.getInputMap();
    im.put(KeyStroke.getKeyStroke("ENTER"), "pressed");
    im.put(KeyStroke.getKeyStroke("released ENTER"), "released"); 
```

这样做的效果是按钮只执行一次它的 actionPerformed，当 ENTER 被释放时（如果我理解正确，这就是你想要的）。

编辑：下面运行的代码演示了 actionPerformed 仅在 ENTER 释放时执行（尽管在视觉上按钮似乎在 ENTER 按下时已经按下）

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;

public class ButtonTest {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                buildFrame();
            }
        });
    }

    private static void buildFrame() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        JButton button = new JButton(new AbstractAction("Button") {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("ButtonTest::actionPerformed: CALLED");
            }
        });

        InputMap im = button.getInputMap();
        im.put(KeyStroke.getKeyStroke("ENTER"), "pressed");
        im.put(KeyStroke.getKeyStroke("released ENTER"), "released");

        f.add(button);
        f.getRootPane().setDefaultButton(button);

        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T13:15:53.590

您可以使用[`getKeyStroke()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html#getKeyStroke%28int,%20int,%20boolean%29)允许您设置`onKeyRelease`为的版本`true`，就像在这个[答案中一样](https://stackoverflow.com/a/12223212/261156)

编辑：您可以停止重复，就像在这个[答案](https://stackoverflow.com/a/12226025/261156)中一样。

# javascript - Hide/Show Div below select取决于是否选择了一个选项

> ID：12260964
> 
> 赞同：0
> 
> 时间：2012-09-04T09:55:23.427
> 
> 标签：javascript, asp.net, html, css, visual-studio-2010

基本上我有一个选择：

```
<select id="SelectExample">
    <option value="no_selection">&nbsp;</option>
    <option value="accessoires">Accessoires pour poubelles</option>
    <option value="chaises">Chaises</option>
    <option value="collecte">Collecte de déchets</option>
    <option value="poubelles">Poubelles</option>
</select> 
```

正下方是一个 div，如果值为`no_selection`

```
<div id="OtherDiv">
    <p><label for="poids">Poids (kg)</label><input type="text" id="poids" class="medium" disabled="disabled"/></p>
    <p><label for="prix">Prix (€)</label><input type="text" id="prix" class="medium" disabled="disabled"/></p>
    <p><label for="volume">Volume (l)</label><input type="text" id="volume" class="medium" disabled="disabled"/></p>
    <p><a href="#" class="no_label" id="sdd">Modifier les attributs…&lt;/a></p>
</div> 
```

我已经尝试了我发现的以前的 JQuery 和 CSS 示例，但似乎没有一个对我有用，谁能给我一个很好的例子，因为我有点卡住了，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:02:53.037

干得好。

您需要将[更改事件](http://api.jquery.com/change/)[绑定](http://api.jquery.com/bind/)到您的选择框，并在更改时使用[:selected](http://api.jquery.com/selected-selector/)检索所选选项的值，并根据该值显示或隐藏。jQuery[切换](http://api.jquery.com/toggle/)方法非常适合。

```
<!DOCTYPE html>

<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    </head>
    <body>
        <select id="SelectExample">
            <option value="no_selection">&nbsp;</option>
            <option value="accessoires">Accessoires pour poubelles</option>
            <option value="chaises">Chaises</option>
            <option value="collecte">Collecte de déchets</option>
            <option value="poubelles">Poubelles</option>
        </select>

         <div id="OtherDiv">
            <p><label for="poids">Poids (kg)</label><input type="text" id="poids" class="medium" disabled="disabled"/></p>
            <p><label for="prix">Prix (€)</label><input type="text" id="prix" class="medium" disabled="disabled"/></p>
            <p><label for="volume">Volume (l)</label><input type="text" id="volume" class="medium" disabled="disabled"/></p>
            <p><a href="#" class="no_label" id="sdd">Modifier les attributs…&lt;/a></p>
        </div>

        <script>
            var showHideDiv = function (evt) {
                var selectedValue = jQuery(evt.target).val();
                var isSelected = selectedValue !== 'no_selection';
                jQuery("#OtherDiv").toggle(isSelected);
            }

            jQuery('#SelectExample').change(showHideDiv).trigger("change");
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:58:30.803

```
<select id="SelectExample" onChange="$('#OtherDiv').toggle($(this).val() != 'no_selection');"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:58:59.577

听起来以下内容对您有用吗？

```
$("#SelectExample").change(
 function()
 {
  var that = $(this);

  if(that.val() == "no_selection"){
   $("#OtherDiv").show();
  }else{
   $("#OtherDiv").hide();
  }
 }
); 
```

只是一个简单的 OnChange 事件，然后检查该字段的值——也就是说，你甚至不需要 JQ 来做这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:02:03.227

改变显示：

```
<select id="SelectExample" onchange="showOther(this.value)">
    <option value="no_selection">&nbsp;</option>
    <option value="accessoires">Accessoires pour poubelles</option>
    <option value="chaises">Chaises</option>
    <option value="collecte">Collecte de déchets</option>
    <option value="poubelles">Poubelles</option>
</select>

<div id="OtherDiv" style="display:none">
    <p><label for="poids">Poids (kg)</label><input type="text" id="poids" class="medium" disabled="disabled"/></p>
    <p><label for="prix">Prix (€)</label><input type="text" id="prix" class="medium" disabled="disabled"/></p>
    <p><label for="volume">Volume (l)</label><input type="text" id="volume" class="medium" disabled="disabled"/></p>
    <p><a href="#" class="no_label" id="sdd">Modifier les attributs…&lt;/a></p>
</div> 
```

并创建一个处理您的 javascript 函数`onchange`：

```
<script type="text/javascript">
window.onload = function(){
    showOther = function(val){
        if(val && val !='no_selection'){
            document.getElementById('OtherDiv').style.display = '';
        } else {
            document.getElementById('OtherDiv').style.display = 'none';
        }
    }
}​
</script> 
```

[JSFiddle 示例](http://jsfiddle.net/ZfFKw/)

# ios - 在 IOS/iPad 中创建弹出窗口

> ID：12260968
> 
> 赞同：0
> 
> 时间：2012-09-04T09:55:37.443
> 
> 标签：ios, ipad, popup

我创建了一个弹出窗口，其中有一个内容列表显示在表格视图中。现在，当我单击 tableview 的任何行时，它应该调用一个方法，该方法在父视图中可用，而不是在弹出视图中。如果我在该弹出窗口中使用任何按钮，那么在选择一行后，如果我单击该按钮，则它可以工作。以这种方式在父视图中提及按钮操作。

```
[controller.gotoButton addTarget:self action:@selector(clickMe:) forControlEvents:UIControlEventTouchUpInside]; 
```

那么点击表格行时如何调用方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:33:32.923

[在这里](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)你可以找到对代表的很好的描述。

您想做的事情可以通过协议/委托来解决。您应该在 Popup 视图的头文件中创建协议，并在 *.m 类中创建实现。你的父视图应该实现协议，不要忘记连接线，`myPopupObject.delegate = self;`+协议方法的实现。

我建议使用

```
if ([delegate respondsToSelector:@selector(myMethod:)]) {
  //call the selector
} 
```

在 Popup 视图类中验证，因为如果协议的方法是可选的，并且您没有在父类中实现它，您的应用程序将崩溃（您不会从编译器收到任何错误/警告消息，因为它是可选方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:33:07.400

在 rowDidSelect 中，

为父视图创建一个对象，例如：

```
 parentClass *pc=[parentClass alloc]init];
  [pc method:]; 
```

# .net - 可移植类库中的 SafeHandleZeroOrMinusOneIsInvalid

> ID：12260969
> 
> 赞同：0
> 
> 时间：2012-09-04T09:55:40.560
> 
> 标签：.net, unsafe, portable-class-library

SafeHandleZeroOrMinusOneIsInvalid 或类似类不能用于面向 .NET 4.0 和 Windows 应用商店应用的可移植类库。

有人知道为什么或如何使用它或使用不同的类吗？

是的，我想在可移植类库中加入一些不安全的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:55:24.397

便携式仅限于您所针对的平台。在这种情况下，Windows 应用商店应用不会公开此类型。它的实现非常简单，这是我刚刚编写的一个：

```
public abstract class SafeHandleZeroOrMinusOneIsInvalid : SafeHandle
{
    protected SafeHandleZeroOrMinusOneIsInvalid(bool ownsHandle)
        : base(IntPtr.Zero, ownsHandle)
    {
    }

    public override bool IsInvalid
    {
        get { return base.handle == IntPtr.Zero || base.handle == (IntPtr)(-1); }
    }
} 
```

# actionscript-3 - 将多个图像添加到多个实体

> ID：12260980
> 
> 赞同：3
> 
> 时间：2012-09-04T09:56:09.713
> 
> 标签：actionscript-3, box2d

我有以下代码，它将图像放入 1 个随机主体。

```
for (var b:b2Body=world.GetBodyList(); b; b=b.GetNext()) {
    for (var i:int=0; i<3; i++) {
        var distX:Number = b.GetPosition().x * worldScale - (220 + i * 100);
        var distY:Number = b.GetPosition().y * worldScale - 180;

        if (b.GetType()==b2Body.b2_dynamicBody) {
            myBlock.x = distX + (220 + i * 100);
            myBlock.y = distY + 180;
            myBlock.rotation = b.GetAngle() * 180 / Math.PI;
            //world.DestroyBody(b);
            //createBox(220 + i * 100,180,b2Body.b2_staticBody);
        }       
    }
} 
```

我希望能够将多个图像添加到多个主体。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:08:12.083

我不确定，但我可以给你一个很棒的网站。我正在用它学习box2d，它非常有用

[这里是](http://www.emanueleferonato.com/category/box2d/)

# c# - 中继器：通过 c# 的 javascript 到 itemlist 中的按钮

> ID：12260981
> 
> 赞同：0
> 
> 时间：2012-09-04T09:56:11.440
> 
> 标签：c#, asp.net, databound

我有一个带有项目列表的中继器，它通过 C#/sql 和数据绑定获取数据。然后，我想将 onclick javascript 添加到项目列表中的“deleteNewsButton”中。我猜我必须使用 OnItemDataBound？

这是我的中继器：

```
<asp:Repeater ID="newsListRepeater" runat="server" OnItemDataBound="deleteConfirm_Databound">
        <ItemTemplate>
            <tr>
                <td><%# Eval("id") %></td>
                <td><%# Eval("title") %></td>
                <td><%# Eval("tags") %></td>
                <td><%# Eval("author") %></td>
                <td style="width:100px;"><%# DataBinder.Eval(Container.DataItem, "time", "{0:dd/MM/yyyy}") %></td>
                <td style="width:110px;">
                    <asp:Button ID="editNewsButton" runat="server" OnCommand="editNewsButton_Click" CommandArgument='<%# Eval("id") %>' Text="Rediger" />
                    <asp:Button ID="deleteNewsButton" runat="server" CommandArgument='<%# Eval("id") %>' Text="Slet" />
                </td>
            </tr>
        </ItemTemplate>
</asp:Repeater> 
```

编辑：我如何将代码后面的参数绑定到我的“deleteNewsButton”控制器。它需要从后面的代码中完成......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:25:19.173

我相信对于中继器项目数据绑定事件，您需要使用 RepeaterItemEventArgs 而不是 RepeaterItem

```
protected void deleteConfirm_Databound(object sender, RepeaterItem e) 
```

变成

```
protected void deleteConfirm_Databound(object sender, RepeaterItemEventArgs e) 
```

您可能还需要对该控件进行空检查：

```
LinkButton button = (LinkButton)e.FindControl("deleteNewsButton");  
if(button != null) {
    button.Attributes.Add("onclick", "javascript:return " +  
        "confirm('Er du sikker på du vil slette: " +  DataBinder.Eval(e.DataItem, "id") + "')"); 
} 
```

您也可以考虑为确认框制作一个通用的 javascript 函数，然后从您的按钮调用它。

aspx

```
<script type="text/javascript">
function confirmFunction(id)
{
   return confirm('Er du sikker på du vil slette: ' +  id); 
}
</script> 
```

代码隐藏

```
LinkButton button = (LinkButton)e.FindControl("deleteNewsButton");  
if(button != null) {
    button.Attributes.Add("onclick", "javascript:return confirmFunction(" + DataBinder.Eval(e.DataItem, "id") + ");"); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:00:30.480

添加一个 onclientclick 事件，例如。

```
<asp:Button ID="deleteNewsButton"  
OnClientClick="return confirm('Do you really want to Delete this record ?')" 
runat="server" CommandArgument='<%# Eval("id") %>' Text="Slet" /> 
```

# python - 鼻子测试和导入

> ID：12260983
> 
> 赞同：0
> 
> 时间：2012-09-04T09:56:22.253
> 
> 标签：python, pycharm, nose

我对 Python 很陌生。目前我正在尝试 PyCharm 并且遇到了一些我在运行测试时无法解释的奇怪行为。

我目前正在处理的项目位于一个名为 PythonPlayground 的文件夹中。此文件夹包含一些子目录。每个文件夹都包含一个**init** .py 文件。一些文件夹包含nosetest 测试。

当我从项目目录中的命令行使用nosetest runner 运行测试时，我必须将“PythonPlayground”放在所有本地导入的前面。例如，在“ui”文件夹中导入名为“model”的模块时，我必须像这样导入它：

> 从 PythonPlayground.ui.model 导入 *

但是当我从 Pycharm 内部运行测试时，我必须再次删除前导的“PythonPlayground”，否则测试不起作用。像这样：

> 从 ui.model 导入 *

我也在尝试模拟框架，由于某种原因，这个框架总是需要模块的完整名称（包括“PythonPlayground”）。我是从命令行还是从 PyCharm 内部运行测试都没有关系：

> 用 patch('PythonPlayground.ui.models.User') 作为模拟：

有人可以向我解释行为上的差异吗？什么是正确的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:12:19.213

我认为这是因为 PyCharm 有自己的解释器“副本”，它有自己的 sys 路径版本，您将项目的根设置为比 PythonPlayground 目录低一级。你可以在你的项目中找到 PyCharm 中解释器的偏好并设置适当的顶层。附言。我有同样的问题，但在 Eclipse + pydev

# asp.net - aspx 网页的事件日历

> ID：12260987
> 
> 赞同：0
> 
> 时间：2012-09-04T09:56:39.337
> 
> 标签：asp.net, vb.net, web

我正在尝试建立一个 aspx 网站，并且想要其中一个页面的活动日历。站点访问者应该只有只读访问权限，但我希望管理员能够在事件出现时对其进行编辑。

谁能推荐一个可能有用的日历插件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:17:51.940

还可以查看更新的[DHTMLX Scheduler .NET](http://scheduler-net.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:39:45.607

我决定使用 Google 日历 API，它很有效。只需登录我的谷歌帐户即可修改。我还可以委托访问日历，以便其他人可以在必要时更新日历。

这是我从 codeproject [CodeProject 遵循的教程 - 在 ASP NET 网站中使用 Google 日历](http://www.codeproject.com/Articles/201907/Using-Google-Calendar-in-an-ASP-NET-Website)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:35:06.583

您可以使用第 3 部分扩展：
[http](http://demos.telerik.com/aspnet-ajax/scheduler/examples/dbschedulerprovider/defaultcs.aspx) ://demos.telerik.com/aspnet-ajax/scheduler/examples/dbschedulerprovider/defaultcs.aspx 或使用 DevExpress ASP.NET 工具或其他

# php - 手动输入地址时确定用户来自哪里

> ID：12260992
> 
> 赞同：2
> 
> 时间：2012-09-04T09:57:03.820
> 
> 标签：php, http, referer

我知道当有人通过单击链接进入您的页面时，您可以获得 HTTP 引荐来源网址。但是，当用户自己键入地址时，是否也可以确定用户在哪个页面上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:01:06.857

根据标准，当用户输入地址时，浏览器不得发送当前页面的地址。从[HTTP/1.1 标头字段文档](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.36)：

> 如果 Request-URI 是从没有自己的 URI 的源获得的，则不得发送 Referer 字段，例如来自用户键盘的输入。

* * *

以下是我之前的答案，与问题不完全匹配，但出于历史目的，我将其留在这里。

> 如果直接在浏览器中输入地址，则引用者将是空的（或不存在），但这并不是您真正可以依赖的东西（即，引用者可能由于其他原因为空）。
> 
> 引荐来源网址为空的一个显着原因是浏览器从安全模式切换到非安全模式时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:02:43.537

当用户键入您的 URL（或单击书签）时，可能有一些不起眼的浏览器将用户所在的任何 URL 作为 HTTP REFERER 发送，但通常不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:17:33.227

无法直接从键盘获取推荐人

如果它相同`domain`，`system`您可以将`Permanent Cookies`其用作简单的解决方法

例子

```
 setcookie("lastLink"  ,$value, mktime (0, 0, 0, 12, 31, 2020)); 
```

每当用户回来时，您都可以检索最后一个链接 `$_COOKIE['lastLink']`

# cakephp - Cakephp - 使用 JSON API 进行分页

> ID：12260994
> 
> 赞同：2
> 
> 时间：2012-09-04T09:57:09.657
> 
> 标签：cakephp, backbone.js

我正在（与合作伙伴）开发一个将使用 Backbone.js 的 CakePHP 应用程序。

所以，基本上，我的蛋糕应用程序在很大程度上表现得像一个 JSON API。在控制器动作加载某个视图（尚未呈现数据）后，Backbone 对另一个控制器动作进行 AJAX 调用以获取数据。控制器返回 JSON。

（routes.php 文件有 mapResources 和 parseExtensions 行）

控制器代码

```
public function index(){            
    $company_id = $this->Session->read('Company.id');
    $channel_ids = $this->Order->Channel->find('all', array('conditions' => array('Channel.company_id' => $company_id), 'fields' => array('Channel.id')));
    $channel_ids = Set::extract('/Channel/id', $channel_ids);        

    $data = $this->paginate('Order', array('Order.fulfillment_status_id' => 1, 'Order.channel_id' => $channel_ids));
    $this->set('orders', $data);
    //In case of a JSON request
    if($this->RequestHandler->ext == 'json') {           
        $this->autoRender = false;
        echo json_encode($data);
    }
} 
```

这工作得很好，但是当我们试图用它实现分页时我们碰壁了。

1.  我们如何生成分页链接？（如果我们通过 Backbone 进行，它不知道数据库中的总记录，因此不知道要生成多少个链接）
2.  “页码”应该如何烧录到AJAX调用中？它应该如何在控制器中破译？

真的卡在这里，我们将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:48:51.920

在你的控制器中

```
$this->layout = false;
$this->RequestHandler->respondAs('json'); 
$recipes = $this->paginate('Recipe');
$this->set(compact('recipes')); 
```

在你看来

```
echo json_encode($recipes);
echo json_encode($this->Paginator->params()); 
```

# ruby-on-rails - whois 在 irb 中不起作用

> ID：12260996
> 
> 赞同：1
> 
> 时间：2012-09-04T09:57:18.440
> 
> 标签：ruby-on-rails, ruby, irb, whois, whois-ruby

我`whois`使用`$ gem install whois`并遵循[Ruby Whois](http://www.ruby-whois.org/)
进行安装， 但是当我在 irb 中对其进行测试时，它给出了错误：

```
1.9.3p194 :001 > c = Whois::Client.new
NameError: uninitialized constant Whois
from (irb):1
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main> 
```

**编辑**

当我`require 'whois'`给出另一个错误时：

```
1.9.3p194 :003 > require 'whois'
LoadError: cannot load such file -- whois
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
from (irb):3
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
from /home/darshana/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:05:03.660

尝试安装并加载对我有用的 whois 库。

```
> gem install whois
> irb
* require 'whois'  
* c = Whois::Client.new
>>  #<Whois::Client:0x8f0fa34 @timeout=10, @settings={}> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:06:22.590

有时默认情况下不需要gem，因为这个时候我们需要这个gem。

例如（在您的情况下），您在 Gemfile 中添加了 whois gem，然后打开控制台给出以下行

```
require "whois" 
```

然后应该可以使用 Whois 常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:32:36.590

如果这是在您的 gemfile 中，则加载 irb`bundle exec rails c`

# sql - 为什么我的查询忽略了 WHERE 子句之一？

> ID：12260997
> 
> 赞同：2
> 
> 时间：2012-09-04T09:57:24.293
> 
> 标签：sql, sql-server-2008

早晨，

我无法弄清楚为什么我的查询（如下）忽略`WHERE`了 amzLive 的子句。并且仍在返回重复项。

```
SELECT  asin
FROM    dbo.aboProducts
WHERE  (asin NOT IN
             (SELECT DISTINCT productAsin
              FROM   dbo.LowestPrices
              WHERE (priceDate > GETDATE() - 1))) AND (amzLive = 'true') 
```

它返回一个项目列表，但仍带回 amzLive 设置为 true 或 false 的项目。

有人可以看到我哪里出错了吗？

**根据要求更新** 数据库结构... aboProducts 表

```
id          int            Unchecked
asin        nvarchar(50)   Checked
codeType    int            Checked
sku         nvarchar(50)   Unchecked
amzPrice    decimal(18, 2) Checked
amzLive     bit            Checked
lastUpdated datetime       Checked 
```

最低价格表

```
id           int            Unchecked
productAsin  nvarchar(50)   Unchecked
price        decimal(18, 2) Unchecked
postage      decimal(18, 2) Checked
priceDate    datetime       Unchecked
twAmzPrice   decimal(18, 2) Checked 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:02:25.880

这将起作用

```
Select *
From 
(SELECT  asin,amzLive
FROM    dbo.aboProducts
WHERE  (asin NOT IN
             (SELECT DISTINCT productAsin
              FROM   dbo.LowestPrices
              WHERE (priceDate > GETDATE() - 1)
              )
         ) 
       )X
where X.amzLive = 'true' 
```

也试试这个

```
SELECT ap.asin
FROM dbo.aboProducts ap
Left Join   (SELECT DISTINCT productAsin FROM dbo.LowestPrices  WHERE (priceDate > GETDATE() - 1))x
ON ap.asin  = x.productAsin
WHERE ap.amzLive = 'true' 
AND LEN(ap.asin) > 0 -- ap.asin IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:09:38.963

```
SELECT  asin
FROM    dbo.aboProducts
WHERE  (asin NOT IN
             (SELECT DISTINCT productAsin
              FROM   dbo.LowestPrices
              WHERE (priceDate > dateadd(day,-1,GETDATE()) ))) AND (amzLive = 'true') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:12:03.683

1.  不要将 'true' 和 'false' 与位一起使用，使用 1 或 0
2.  A`left join`将使您的查询更清晰、更可预测
3.  仅供参考，SQL Server 有金钱数据类型

例如

```
select ASIN
from aboProducts
    left join lowestprices
        on aboProducts.asin = lowestprices.productAsin
        and lowestprices.pricedate > (GETDATE()-1)
where lowestprices.productAsin is null
and aboProducts.amzlive=1 
```