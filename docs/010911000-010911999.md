# StackOverflow 问答 10911000-10911999

# c# - 如何知道更换成功还是失败？

> ID：10911002
> 
> 赞同：0
> 
> 时间：2012-06-06T08:50:18.053
> 
> 标签：c#, excel-interop

```
bool rep = xlWorkSheet.Cells.Replace(textBox1.Text, 
                                     textBox2.Text, 
                                     Excel.XlLookAt.xlWhole, 
                                     Excel.XlSearchOrder.xlByRows, 
                                     false, 
                                     Type.Missing, 
                                     Type.Missing, 
                                     Type.Missing); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:20:17.190

你不能这样做。如果参数正确，Range 的 Replace 方法总是返回 true。我知道你唯一能做的就是首先查找你的文本的出现，然后替换它。绝对没有优化，但我想不出别的东西。

```
bool rep = xlWorkSheet.Cells.Find(textBox1.Text, 
                                  Type.Missing,
                                  Type.Missing, 
                                  Excel.XlLookAt.xlWhole, 
                                  Excel.XlSearchOrder.xlByRows,
                                  Type.Missing, 
                                  false, 
                                  Type.Missing, 
                                  Type.Missing) != null;
if (rep)
           xlWorkSheet.Cells.Replace(textBox1.Text, 
                                     textBox2.Text, 
                                     Excel.XlLookAt.xlWhole, 
                                     Excel.XlSearchOrder.xlByRows, 
                                     false, 
                                     Type.Missing, 
                                     Type.Missing, 
                                     Type.Missing); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:43:27.953

下面的代码工作正常：

```
 Excel.Range Range = xlWorkSheet.UsedRange;

  currentFind =  Range .Find(textBox1.Text,                      Type.Missing,Excel.XlFindLookIn.xlValues,               Excel.XlLookAt.xlPart,                             Excel.XlSearchOrder.xlByRows,Excel.XlSearchDirection.xlNext,false,
    Type.Missing, Type.Missing);

   if (currentFind!=null)
   {

        SheetsArray.Add(xlWorkSheet.Name);
   } 
```

# c++ - 前向声明和析构函数

> ID：10911006
> 
> 赞同：1
> 
> 时间：2012-06-06T08:50:33.750
> 
> 标签：c++, oop, destructor, forward-declaration

想象一下它的构造函数的简单类线段是来自类点的几个对象：

```
class Point ;

class LineSegment {
    public:

      LineSegment(Point* P1, Point* P2);
      ~LineSegment();
} ; 
```

问题是，在析构函数中，我应该先删除点还是自动完成？换言之，在 cpp 文件中，应写入以下哪一项：

```
LineSegment::~LineSegment() 
```

或者

```
LineSegment::~LineSegment(){
     delete P1;
     delete P2;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T08:52:54.753

首先，请注意

```
LineSegment::~LineSegment(){
     ~P1();
     ~P2();
} 
```

是无效的。要删除，您需要`delete P1`和`delete P2`。

此外，找出谁拥有`P1`和`P2`。如果它们归类所有，请在析构函数中删除它们，但请注意，在对象被销毁后，您将无法在外部访问它们。

因此，例如：

```
Point* p1 = new Point;
Point* p2 = new Point;

{
   LineSegment l(p1,p2);
}

delete p1;
delete p2; 
```

如果你`delete`在析构函数中使用指针，那将是非法的。

无论您选择哪个版本，请务必**记录**您的决定——即**明确该类是否承担指针的所有权**。

如果你使用**智能指针**，你就不会遇到这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T08:53:13.627

要删除它们，您必须使用 delete 运算符，这样：

```
LineSegment::~LineSegment(){
     delete P1;
     delete P2;
} 
```

这样做会调用 P1 和 P2 的析构函数

自动删除点的唯一方法是将它们按值作为类的成员：

```
class LineSegment {
protected:
    Point P1;
    Point P2;
public:
    /* constructors and destructors */
}; 
```

通过这样做，当 LineSegment 被删除时，P1 和 P2 将被自动销毁。

# java - Hibernate：示例查询和多对一关系

> ID：10911008
> 
> 赞同：0
> 
> 时间：2012-06-06T08:50:39.417
> 
> 标签：java, hibernate, jpa, many-to-one, query-by-example

假设这些是我的实体：

*表1.java*

```
@Entity
public class Table1 {

    // Many to one
    private Table2 table2;

    // Raw attributes
    // ...

} 
```

*表2.java*

```
@Entity
public class Table2 {

    // Many to one
    private Table3 table3;

    // Raw attributes
    // ...

} 
```

*表3.java*

```
@Entity
public class Table3 {

    // Raw attributes
    private String lang; // "fr", "en", "de"...

} 
```

我想列出所有`Table1`具有`table2.table3.lang`等于的行`en`。我尝试通过示例使用查询：

```
Table3 table3Example = new Table3();
table3Example.setLang("en");

Table2 table2Example = new Table2();
table2Example.setTable3(table3Example);

Table1 table1Example = new Table1();
table1Example.setTable2(table2Example);

table1Repository.findByExample(table1Example); 
```

问题是`.findByExample(table1Example)`返回数据库的所有行，不管`lang`，这意味着根本不考虑过滤器`:(`

任何帮助，将不胜感激`:)`

PS：不抛出异常，`.findByExample(table1Example)`只返回所有`Table1`行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T08:57:16.950

尝试这样的事情：

```
 Query q = entityManager.createQuery("Select o from Table1 o where o.table2.table3.lang = :lang");
    q.setParameter("lang", "en");
    List<Table1> r = (List<Table1>)q.getResultList(); 
```

要查看为什么会获得 Table1 中的所有行，请确保您有

```
<property name="hibernate.show_sql" value="true"/> 
```

在您的`persistence.xml`然后观看日志以查看休眠执行的实际选择。

# c++ - OpenGL中动画的时间函数（或不）

> ID：10911009
> 
> 赞同：0
> 
> 时间：2012-06-06T08:50:44.550
> 
> 标签：c++, opengl, time, timer

我尝试使用这些函数`timeGetTime()`，`clock()`但是我在使用 OpenGL 绘制的精灵动画中出现了抽搐。

我应该使用什么功能？

PS 使用 Windows 7 x64、C++ 和 OpenGL。

# android - 无法从 Android 模拟器访问 192.168.xx 机器

> ID：10911012
> 
> 赞同：1
> 
> 时间：2012-06-06T08:50:59.350
> 
> 标签：android, http, emulation, subnet

我有两台机器连接到无线路由器。一个得到 192.168.1.2 的 ip，另一个得到 192.168.1.3 我有一个在 3 台机器上运行的 Web 服务器。我需要从 2 台机器访问该机器上的 php 文件。但无法得到。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:17:33.743

我想Android模拟器只能通过10.0.2.2访问localhost，因此除非您使用真实设备，否则无法访问其他IP地址。

# sql - SQL 2008 全文索引填充延迟

> ID：10911013
> 
> 赞同：4
> 
> 时间：2012-06-06T08:51:03.383
> 
> 标签：sql, sql-server, sql-server-2008, full-text-search

我的经理说，在基础表数据更改后，可能需要一段时间才能更新全文搜索索引。

例如，如果我有一个`Products`包含列的表`Description`并且我更新了该描述，那么我可能需要一些时间才能搜索该新描述。真的吗？这需要多长时间？这在 SQL 2008 中有所改进吗？

如果用户修改了描述，我们要求后续搜索应该搜索修改后的数据，而不是更改之前的陈旧数据。

实现此目的的正确/推荐代码模式是什么？我们是否应该等待索引表明它已经完成？如果是这样，关于何时完成索引更新做出什么保证，例如，它是否可以在繁忙的系统中延迟几分钟（推回某个队列，而不是优先于到达数据库的其他命令进行处理）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:58:09.353

每次插入任何值时，在任何表上创建的全文索引都会更新，如果表未更新而不是全文索引不会重建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T17:33:14.967

如果您进行大量插入或更新，它们可能会触发 FTI 更新的长时间延迟。这是一些延迟代码直到 FTI 目录状态空闲的代码：

```
DECLARE @CatalogName VARCHAR(MAX)
SET  @CatalogName = 'Your FTI catalog name'
DECLARE @status int
SET @status = 1 --non-idle FTI see below
WHILE @status > 0 --HERE WE LOOP UNTIL FTI STATUS IS IDLE
begin
    SELECT
    @status = FULLTEXTCATALOGPROPERTY(@CatalogName,'PopulateStatus')
    FROM sys.fulltext_catalogs AS cat
    BEGIN
        waitfor  delay '00:00:05';
        PRINT @status
   END 
```

结尾

作为参考，另请参阅此线程：[我如何知道 SQL 全文索引填充何时完成？](https://stackoverflow.com/questions/2727911/how-can-i-know-when-sql-full-text-index-population-is-finished)

# java - 如何在 JBoss7 上添加外部资源文件夹？

> ID：10911016
> 
> 赞同：5
> 
> 时间：2012-06-06T08:51:38.810
> 
> 标签：java, jboss, jboss5.x, jboss7.x, jboss6.x

以下是 JBossAS 7.1 Developer Guider：

> 更改 ResourceBundle 位置 在以前的 AS 版本中，JBOSS_HOME/server//conf/ 在类路径中可用。因此，该位置的属性文件在应用程序的类路径中可用。
> 
> 在 AS7 中，要在类路径中获取这些属性，请将它们打包到您的应用程序中。例如，如果您正在部署 .war，则将这些属性打包到 WAR WEB-INF/classes/ 文件夹中。如果您希望 .ear 中的所有组件都可以访问这些属性，则将它们打包到某个 .jar 的根目录中，并将该 jar 放在 EAR lib/ 文件夹中。

但是如果资源文件太多，这种方法就不太好了，我们无法将所有资源文件打包到jar或ear中。

对于新的类加载方法——模块。我尝试以下方法：

> 创建 module.xml 文件 .. 您将为 instnace custom.myconfig 选择模块名称...
> 
> ```
> <resources>
>     <resource-root path="."/>
>     <!-- Insert resources here -->
> </resources>
> 
> <dependencies>     
> </dependencies> </module>   In your jboss-deployment-structure.xml include this module to your app
> <jboss-deployment-structure>
> <ear-subdeployments-isolated>false</ear-subdeployments-isolated>
> <deployment>
>     <dependencies>
>         <module name="custom.myconfig/>
>     </dependencies>
>     <resources>
>     </resources>
> </deployment>
> 
> <sub-deployment name="My_WAR.war">
>     <dependencies>
>         <module name="custom.myconfig" />
>     </dependencies>
> </sub-deployment> 
> ```

[https://community.jboss.org/message/723631](https://community.jboss.org/message/723631)

但是我发现你不能设置绝对路径，比如：[resource-root path=""C:\resourcefolder"]。

这意味着您还需要包含 JBossAS 7 上的所有资源文件。

在 JBossAS 5.x-6.x 上非常简单，只需要在类路径中添加像“C:\resourcefolder”这样的文件夹路径就可以了。但这在 JBossAS7 上是一项不可能完成的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:48:43.727

最后，我将资源文件夹软链接到 JBossAS 7 .....

Linux：

```
In -s 
```

视窗：

```
MKLINK /D 
```

或者

```
Junction.exe 
```

# php - PHP array_flip() 函数出现“期望数组”错误

> ID：10911017
> 
> 赞同：-4
> 
> 时间：2012-06-06T08:51:51.910
> 
> 标签：php, array-flip

我最近更新了我工作的服务器。我有一个错误：

> “警告：array_flip() 期望参数 1 为数组，在...中给出空值”

有人知道如何解决吗？

这是PHP代码的一部分：

```
function redirectWrongDep($url) { 
    $deps = @getDepsByIdUrl($url); 
    $depsFlip = array_flip($deps); 
    if ($_GET['dep'] && !in_array($_GET['dep'], $depsFlip)) { header('Location:'.URL); 
        exit(); 
    } 
} 
function getDepsByIdUrl($url) { 
    $sql = "SELECT ws_flash_departement.nom,ws_flash_departement.id_departement FROM ws_flash_departement WHERE ws_flash_departement.no_resultats != 0 AND ws_flash_departement.id_departement IN (SELECT url_departement.id_departement FROM url_departement WHERE url_departement.id_url=" . $url . ") ORDER BY nom ASC"; 
    $result = mysql_query($sql); 
    while ($row = mysql_fetch_assoc($result)) { 
        $deps[$row["id_departement"]]=utf8_encode($row["nom"]); 
    } 
    mysql_free_result($result); 
    return $deps; 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T00:57:42.057

很可能您已更新到设置了魔术引号的服务器

这个 id 是因为某些东西正在返回值`false`或不返回`true`或`1`调试代码。你也没有提供任何东西，`array_flip()`你必须提供`array`

例子：

```
$arr = array("a" => 3, "b" => 1, "c" => 2);
$arr = array_flip($arr);
print_r($arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:58:17.503

检查本手册：

`http://php.net/manual/en/function.array-flip.php`

例如。

```
$trans = array("a" => 1, "b" => 1, "c" => 2);
$trans = array_flip($trans);
print_r($trans); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T08:56:02.173

array_flip 将数组作为第一个参数，而你什么也不给...

PS：也许用几行代码，我可以给你一个更准确的答案

# symfony - 如何获得学说2表别名？

> ID：10911023
> 
> 赞同：7
> 
> 时间：2012-06-06T08:52:14.810
> 
> 标签：symfony, doctrine-orm

我想在我的 Doctrine2 存储库类中创建一个方法，该方法采用 QueryBuilder 并添加一些额外的子句，其中一个是内部连接。

如何找出用于实例化查询构建器的表别名？这是可以发现的还是应该是整个代码库的约定（因此是潜在的错误来源）？

我的客户代码是：

```
public function getPasswordAction($id)
{
    $user = $this->get('security.context')->getToken()->getUser();

    $repository = $this->getDoctrine()
        ->getRepository('TenKPwLockerBundle:Password');

    $query = $repository->createQueryBuilder('p')
        ->where('id = :id')
        ->setParameter('id', $id);

    $query = $repository->userCanReadRestriction($query, $user);
    ... 
```

我的存储库类包含：

```
public function userCanReadRestriction(\Doctrine\ORM\QueryBuilder $builder, \TenK\UserBundle\Entity\User $user)
{
                             // where can I get 'p' from?
    return $builder->innerJoin('p.shares', 's')
        ->where('createdBy = :creator')
        ->orWhere('s.toUser = :toId')
        ->setParameters(array('creator' => $user, 'toUser' => $user));
} 
```

事实上，在上面的代码中，我如何才能确认 QueryBuilder 是否与密码实体一起工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-26T21:37:21.380

QueryBuilder 对象有两个相关的方法： - getRootAliases() - getRootEntities()

在具有子句集的 QueryBuilder 上调用 getRootAliases`from`将返回所有别名的数组；同样，调用 getRootEntities 将返回所选实体的缩短类名的数组。

```
$qb = $em->createQueryBuilder();
$qb->from('BundleName:EntityName', 'entityName');

var_dump($qb->getRootAliases()); // returns ['entityName'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T14:55:58.097

我设法得到别名

```
 $alias = current($builder->getDQLPart('from'))->getAlias(); 
```

（其中 $builder 是 Doctrine\ORM\QueryBuilder 的一个实例）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T10:18:35.687

您可以通过调用该方法来检索`select`QueryBuilder 的一部分。`getDqlPart('select')`

更多信息[在这里](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/QueryBuilder.php#L1028)。

然后，看一下这里的学说是如何解析选择部分[的](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/QueryBuilder.php#L1072)。

您可能也可以这样做以了解与您的存储库关联的表是否被调用以及它的别名是什么。

# text - 显示 html 格式的文本，分成页面大小的块——方法？

> ID：10911028
> 
> 赞同：1
> 
> 时间：2012-06-06T08:52:42.647
> 
> 标签：text, string-formatting

我正在构建一个 Web 应用程序，以便更好地为作者提供建设性的批评。其中一部分涉及获取部分 html 格式的文本，以便在 HTML5 的画布上涂鸦。就好像你在用红笔标记一页。

我无法找出一次显示页面价值（500 x 600px）文本的最佳方式。Wordcount 可以工作，但它也会在尴尬的地方切断东西。字符数，去除标签，加上段落分隔符的空间可能效果更好，但仅限于单一字体。

那么根据大小自动剪切文本的最佳方法是什么？还是我需要完全寻找另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:43:26.377

这是我最终找到的解决方案：

Pomax 的 'bookstyle' 做到了这一点，使用 javascript 和一些 PHP 来清理文本。

文本被加载到一个动态生成的页面大小的 div 中，直到它溢出指定的 clientHeight。当它遇到溢出时，它会重新填充页面减去最后一段，然后尝试逐字添加所述段落，直到页面底部被填满。最后，使用 hide() 和 show() 命令“浏览”页面。

每次都会在最后一段出现瓶颈，我在浏览器自动尝试关闭标签时遇到问题，分别添加每个单词，但总的来说它可以满足我的需要。

[http://pomax.nihongoresources.com/downloads/bookstyle/](http://pomax.nihongoresources.com/downloads/bookstyle/)

当然，所有功劳都归功于 Pomax。

# actionscript-3 - 简单as3动画的模式

> ID：10911030
> 
> 赞同：1
> 
> 时间：2012-06-06T08:52:52.797
> 
> 标签：actionscript-3, flash, apache-flex, animation, air

我想为我的照片库添加功能 - 照片拇指的不同类型动画。现在我确实喜欢下面的代码。一切正常，但我希望拇指从舞台边缘弹起。

最重要的是，我需要不同模式的动画——3D 旋转木马的运动、绕圈旋转、太阳光线和背部的运动等。

如果您有这些和类似动画的现成代码，我将不胜感激。

```
[Bindable] private var stageW:int = Capabilities.screenResolutionX;
[Bindable] private var stageH:int = Capabilities.screenResolutionY;

private var itemsVector:Vector.<Image>=new Vector.<Image>();
private var xSpeedVector:Vector.<Number>=new Vector.<Number>();
private var ySpeedVector:Vector.<Number>=new Vector.<Number>();

stage.addEventListener(Event.ENTER_FRAME, update);

private function moveSetup():void {
for(var i:int = 0; i < FlexGlobals.topLevelApplication.objects.length; i++){
    if (FlexGlobals.topLevelApplication.objects[i] is Image){
        var item:Image=FlexGlobals.topLevelApplication.objects[i] as Image;
        item.x=Math.random()*stageW;
        item.y=Math.random()*stageH;
        var randomDirection:Number=Math.random()*2*Math.PI;
        this.addElement(item);
        itemsVector.push(item);
        xSpeedVector.push(2*Math.cos(randomDirection));
        ySpeedVector.push(2*Math.sin(randomDirection));
    }
}   
}

protected function update(event:Event):void {
    for(var i:uint=0;i<itemsVector.length;i++){
        itemsVector[i].x+=xSpeedVector[i];
        itemsVector[i].y+=ySpeedVector[i];
        if(itemsVector[i].x>stageW){
            itemsVector[i].x-=stageW;
        }
        if(itemsVector[i].x<0){
            itemsVector[i].x+=stageW;
        }
        if(itemsVector[i].y>stageH){
            itemsVector[i].y-=stageH;
        }
        if(itemsVector[i].y<0){
            itemsVector[i].y+=stageH;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:26:49.237

看看[Greensock 的 TweenLite 库](http://www.greensock.com/tweenlite/)，它几乎是 Flash 中动画的标准（而且，作为额外的奖励，最近已[移植到 JavaScript](http://www.greensock.com/tag/javascript/)）。

它支持包括反弹功能在内的各种设置缓动功能。该库的付费版本甚至包括创建自定义缓动函数的能力。在我链接到的第一页中间有一个交互式演示，您可以在其中实时使用库并测试各种缓动功能。

谷歌搜索将出现各种教程，解释如何构建（伪）3D 轨道旋转木马，以及执行相同操作的第三方组件。事实上，这些在相当简单的三角函数上实现铰链相对简单。[此示例](http://www.imajine.in/tutorials/flash/carousel.aspx)似乎可以为您提供一个合理的起点，以适应您的特定要求。

3D 效果当然可以在 Flex 中实现。我建议你看看[Away3D](http://away3d.com/)，它是一个为 Flash 平台编写的开源 3D 库。[这里](http://www.darklump.co.uk/blog/?p=246)有一个在 Away3D 中实现的水平螺旋效果示例（连同完整的源代码）。

# sql - 加入两个 Oracle 表，日期不重叠日期范围

> ID：10911032
> 
> 赞同：1
> 
> 时间：2012-06-06T08:52:55.440
> 
> 标签：sql, oracle, oracle10g, sql-optimization

我有两张桌子：

*   行程：id_trip、id_object、trip_date、delta（8980026 行）
*   范围：id_range、id_object、date_since、date_until（18490 行）

我需要优化下面的select语句

```
 select r.id_range, sum(t.delta) sum_deltas
    from trips t,
         ranges r
   where t.id_object = r.id_object
     and t.trip_date between r.date_since and r.date_until
group by r.id_range 
```

根据条件，“范围”中的行程总是有一个匹配的行

*   trips 表不断增长，但没有更新或删除
*   表范围可能会不时以任何方式更改（删除、更新、插入），因此基于函数的索引不是这种方式:(
*   id_object（在两个表中）和 date_since（在行程中）都有索引

有谁知道如何加快速度，甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T08:59:14.603

您可能想查看您的数据分段（即按特定日期对数据进行分区，导致查询仅命中适当的分区）和索引，这些可能会加快查询过程。

此外，您可以考虑一个数据仓库......您说 Trips 永远不会被更新或删除，因此它是非规范化为更适合报告生成和临时查询的数据结构的理想候选者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:27:03.963

总是可以加快速度；它可能不值得花费时间/精力/金钱/磁盘空间/额外的开销等。

首先请使用显式连接语法。几十年来，它一直是 SQL 标准，它有助于避免许多潜在的错误。您的查询将变为：

```
select r.id_range, sum(t.delta) sum_deltas
  from trips t
  join ranges r
    on t.id_object = r.id_object
   and t.trip_date between r.date_since and r.date_until
 group by r.id_range 
```

这个查询意味着你需要两个索引——如果可能的话是唯一的。在`ranges`你应该有一个关于`id_object, date_since, date_until`. 上的索引`trips`将是`id_object, trip_date`。如果`trips`更小，我可能会考虑添加`delta`到该索引的末尾，这样您就永远不会进入表，而只会进行索引扫描。就目前而言，您将不得不通过索引 rowid 进行表访问。

写完所有内容后，您的问题可能会略有不同。您将使用此查询对两个表进行全扫描。您的问题可能是*索引*。如果优化器正在使用索引，那么您可能正在对每个`id_object`in`trips`或`ranges`然后进行索引唯一/范围扫描，因为使用了不在索引中的列，您将通过索引 rowid 进行表访问。这可能非常昂贵。

尝试添加[提示](http://docs.oracle.com/cd/B10500_01/server.920/a96533/hintsref.htm)以强制对两个表进行全扫描：

```
select /*+ full(t) full(r) */ r.id_range, sum(t.delta) sum_deltas
  from trips t
  join ranges r
    on t.id_object = r.id_object
   and t.trip_date between r.date_since and r.date_until
 group by r.id_range 
```

# c++ - ALLEGRO_BITMAP 类型对象的数组

> ID：10911033
> 
> 赞同：2
> 
> 时间：2012-06-06T08:52:59.210
> 
> 标签：c++, arrays, memory-management, allegro

所以我正在使用 Allegro 制作游戏，我试图创建一个代表棋盘的 ALLEGRO_BITMAP 类型对象数组，这样我就可以在游戏开始时一次性加载所有图像文件，而不必加载它们每次我想重绘它们。我试图这样做：

```
ALLEGRO_BITMAP files[10]; 
```

得到以下编译错误：“字段的类型不完整 ALLEGRO_BITMAP”

我也试过：

```
ALLEGRO_BITMAP* files = new ALLEGRO_BITMAP[10]; 
```

得到编译错误：'分配不完整类型 ALLEGRO_BITMAP'

我觉得这与编译器不知道 ALLEGRO_BITMAP 类型的大小有关，因此不知道如何为这种类型的数组分配内存（但如果我错了，有人可以纠正我）。我想知道是否有人知道解决这个问题的方法？或者另一种方法来实现我预先存储 ALLEGRO_BITMAP 对象的目标，而不是在我想重绘图块时加载图像文件？我显然可以创建 10 个不同的变量并将文件存储在其中，但这很糟糕。我也尝试过使用向量，但这些也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:50:32.247

大多数 Allegro 5 数据类型都是不透明的。

您需要创建一个指针数组：

```
ALLEGRO_BITMAP *files[10];
files[0] = al_create_bitmap(640, 480); 
```

# ruby - 在 vps 上独立运行的 Ruby 脚本

> ID：10911038
> 
> 赞同：1
> 
> 时间：2012-06-06T08:53:23.490
> 
> 标签：ruby, debian, vps

我有一个 ruby​​ 脚本，我想在我的 vps（Debian Squeeze）上 24/7 运行。

现在要运行该脚本，我必须使用 putty 打开一个新的 ssh 会话并通过控制台启动脚本。当我关闭控制台时，脚本进程也会关闭。

如何让我的脚本独立运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:35:32.420

也许你可以看一下 nohup 命令：

[http://uw714doc.sco.com/en/SDK_tools/_Using_the_nohup_Command.html](http://uw714doc.sco.com/en/SDK_tools/_Using_the_nohup_Command.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:39:19.623

您可以使用 tmux 或 screen 之类的东西，然后在其中运行您的脚本。您只需要连接一次，创建一个会话，然后您可以在不停止脚本的情况下关闭连接。要控制您的脚本，您需要重新连接并重新附加到您之前的会话。有关更多信息，请参阅 tmuy 或 screen 主页。

# javascript - RequireJS如何实现延迟加载？

> ID：10911044
> 
> 赞同：61
> 
> 时间：2012-06-06T08:53:51.523
> 
> 标签：javascript, backbone.js, requirejs, js-amd

我们正在使用 Backbone、RequireJS 和 Handlebars 构建一个非平凡的 Web 应用程序，好吧，我只是好奇。目前，我们的每个模型都看起来像这样：

```
define(['Backbone', 'js/thing/a', 'js/thing/b', 'js/lib/bob'], function(a, b, bob) {
  return Backbone.Router.extend({
    // stuff here
  });
}); 
```

其中thing/a、thing/b 都有自己的依赖项，例如在Handlebars 模板等上。现在发生的是在我的main.js 中，所有“顶级”路由器都已加载和初始化；每个顶级路由器都有一组依赖项（模型、视图等），每个依赖项都有自己的依赖项（模板、帮助程序、实用程序等）。基本上，一个大树结构。

这种情况下的问题是整个树在页面加载时被解析和加载。我不介意这本身，因为我们最终将通过优化器运行它并最终得到一个大的单个文件（将 RequireJS 减少到基本上是一个模块化框架）。但是，我很好奇您是否可以“按需”加载视图和模板等内容。

[这里](http://requirejs.org/docs/whyamd.html#sugar)解释了“简化的 CommonJS 包装” ，所以我尝试了：

```
define(function(require) {
  Backbone = require('Backbone');
  return Backbone.Router.extend({
    doStuff: function() {
      var MyView = require('js/myView');
      new MyView().render();
    }
  });
}); 
```

然而，看看 Chrome 的网络检查器，似乎 RequireJS - 不知何故，即使没有触发触发 doStuff 处理程序的路由 - 仍然加载`myView`依赖项。问题：

*   这真的可能吗？RequireJS 中是否有黑魔法可以在`require()`不实际触发`doStuff`路由的情况下查找调用？
*   这是理论上正确的“按需”、延迟加载 RequireJS 模块和资源的方法吗？
*   如果您使用这种表示法，r.js 优化器是否仍然像宣传的那样工作？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-06T12:34:30.857

***这真的可能吗？RequireJS 中是否有黑魔法可以在不实际触发 doStuff 路由的情况下查找对 require() 的调用？***

当您使用[它使用的“糖”语法`Function.prototype.toString`和正则表达式](https://github.com/jrburke/requirejs/blob/42dba3d9814bf3e901917dd31e464fa5145394fd/require.js#L1926-1947)来提取您的引用`require`，然后在运行函数之前将它们列为依赖项。基本上它变成了以 deps 数组作为第一个参数的正常定义样式。

因此，它不关心您的 require 调用在哪里，这就是为什么忽略条件语句的原因（它还解释了为什么这些`require`调用必须使用字符串文字，而不是变量）。

***这是理论上正确的“按需”、延迟加载 RequireJS 模块和资源的方法吗？***

如您所见，使用糖语法将不允许条件加载。我能想到的唯一方法是使用`require`带有 deps 数组和回调的调用：

```
define(function(require) {
    var module1 = require('module1');

    // This will only load if the condition is true
    if (true) {
        require(['module2'], function(module2) {

        });
    }

    return {};
}); 
```

唯一的缺点是另一个嵌套函数，但如果你追求性能，那么这是一条有效的路线。

***如果您使用这种表示法，r.js 优化器是否仍然像宣传的那样工作？***

如果您使用的是 'sugar' 语法，那么是的，优化器可以正常工作。一个例子：

**模块/test.js**

```
define(function(require) {
    var $ = require('jquery');
    var _ = require('underscore');

    return {
        bla: true
    }
}); 
```

由 r.js 编译后，它看起来像：

```
define('modules/test', ['require', 'jquery', 'underscore'], function(require) {
    var $ = require('jquery');
    var _ = require('underscore');

    return {
        bla: true
    }
}); 
```

总之，您可以有条件地加载内容，但正如您所提到的，如果您打算使用 r.js 优化项目，那么仅使用糖语法就不会产生巨大的开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-14T09:36:37.397

您可能还想查看[require-lazy](https://github.com/nikospara/require-lazy)。

它有一个运行时组件和一个构建时组件。运行时组件允许你懒惰地需要一个模块（注意`lazy!`插件）：

```
define(["lazy!mymodule"], function(mymodule) {
    ...
}); 
```

在前面的上下文中，`mymodule`是一个[promise](http://promises-aplus.github.io/promises-spec/)，真正的模块将被加载`get()`并在`then()`回调中可用：

```
mymodule.get().then(function(m) {
    // here m is the real mymodule
}); 
```

Require-lazy 与 r.js 集成以自动创建 Javascript 文件的“包”。它还自动处理捆绑包的缓存清除。有几个例子可以得到一个想法。还有[Grunt](https://github.com/nikospara/require-lazy-grunt)和[Bower](https://github.com/nikospara/require-lazy-bower)集成。

# ruby-on-rails - 如何根据用户特定数据显示图表/图形

> ID：10911046
> 
> 赞同：0
> 
> 时间：2012-06-06T08:53:55.017
> 
> 标签：ruby-on-rails, highcharts

在我的 ROR 项目中，我使用 sqlite 数据库来存储我的注册用户数据。我正在使用 highcharts，并且能够根据数据库中的数据生成图表。现在我需要根据他们在数据库中的特定数据为每个用户生成图表。

我的数据库列

sqlite3 数据库中的id、name、category 1、category2、category 3
，我需要当用户登录时，他应该能够使用他的 category1、category2 和 category 3 列中的数据查看饼图。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:11:57.457

有几种方法可以做到这一点，但这里有一个

控制器/charts_controller.rb

```
class ChartsController < ApplicationController
  def pie_chart_for_users
     @this_user = User.find(1)
  end
end 
```

意见/图表/pie_chart_for_users.html.erb

```
<script type="text/javascript">

var $j = jQuery.noConflict();

$j(document).ready(function() {
  new Highcharts.Chart({
    chart: {
      renderTo: 'users_chart',
      plotBackgroundColor: null,
      plotBorderWidth: null,
      plotShadow: false
    },
    title: {
      text: 'Unknown user data'
    },
    plotOptions: {
      pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        dataLabels: {
          enabled: false
        }
      }
     },
     series: [{
    type: 'pie',
    name: 'User data',
      data: [
          ['Category One', <%= @this_user.category_one %>],
          ['Category Two', <%= @this_user.category_two %>],
          ['Category Three', <%= @this_user.category_three %>]
          ]
     }]

  });
});
</script>

<div id="users_chart"></div> 
```

配置/路由.rb

```
map.pie_chart_for_users 'charts/pie_chart_for_users', :controller => 'charts', :action => 'pie_chart_for_users' 
```

基于 Highcharts 饼图演示，使用命名路由来演示要调用的控制器和操作名称 - 您应该能够只使用资源。认为这应该给你一个想法，虽然我还没有运行它来测试它。

# javascript - keydown 事件新值

> ID：10911047
> 
> 赞同：14
> 
> 时间：2012-06-06T08:54:08.413
> 
> 标签：javascript, dom-events, keydown

浏览器：谷歌浏览器 V19.0.1084.52

我有一个文本框，它需要是一个小于或等于 255 的数字，在 keydown 上我想检查这个值是否大于或等于 255，否则会阻止该事件。

在控制台中，当我 console.log**事件**时，它将显示**event.srcElement.value**，因为该值将从 12 => 123 开始，当我 console.log 只是**event.srcElement.value**时，它​​将显示为输入，而不是将会。

Console.log 一个接一个地发生，中间没有任何东西，没有停顿。

如何在 keydown 上找到文本框的新值以及为什么 console.log 返回不同的结果？

这是我的代码：

```
function inputNumeric(event,max) {

    console.log (event);
    console.log ('event.originalEvent.srcElement.value: '+event.originalEvent.srcElement.value);
    console.log ('event.srcElement.value: '+event.srcElement.value);

}

$("#rs485addr").keydown(function(event) {
    inputNumeric(event);
}); 
```

控制台日志：

```
event.originalEvent.srcElement.value: 12
event.srcElement.value: 12 
```

事件.src元素：

```
accept: ""
accessKey: ""
align: ""
alt: ""
attributes: NamedNodeMap
autocomplete: ""
autofocus: false
baseURI: "http://10.50.50.60/controller/?bid=10"
checked: false
childElementCount: 0
childNodes: NodeList[0]
children: HTMLCollection[0]
classList: DOMTokenList
className: "width-60"
clientHeight: 18
clientLeft: 2
clientTop: 2
clientWidth: 62
contentEditable: "inherit"
dataset: DOMStringMap
defaultChecked: false
defaultValue: "1"
dir: ""
dirName: ""
disabled: false
draggable: false
files: null
firstChild: null
firstElementChild: null
form: null
formAction: ""
formEnctype: "application/x-www-form-urlencoded"
formMethod: "get"
formNoValidate: false
formTarget: ""
hidden: false
id: "rs485addr"
incremental: false
indeterminate: false
innerHTML: ""
innerText: ""
isContentEditable: false
jQuery17102950612970162183: 22
labels: NodeList[1]
lang: ""
lastChild: null
lastElementChild: null
localName: "input"
max: ""
maxLength: 3
min: ""
multiple: false
name: ""
namespaceURI: "http://www.w3.org/1999/xhtml"
nextElementSibling: null
nextSibling: Text
nodeName: "INPUT"
nodeType: 1
nodeValue: null
offsetHeight: 22
offsetLeft: 183
offsetParent: HTMLBodyElement
offsetTop: 365
offsetWidth: 66
onabort: null
onbeforecopy: null
onbeforecut: null
onbeforepaste: null
onblur: null
onchange: null
onclick: null
oncontextmenu: null
oncopy: null
oncut: null
ondblclick: null
ondrag: null
ondragend: null
ondragenter: null
ondragleave: null
ondragover: null
ondragstart: null
ondrop: null
onerror: null
onfocus: null
oninput: null
oninvalid: null
onkeydown: null
onkeypress: null
onkeyup: null
onload: null
onmousedown: null
onmousemove: null
onmouseout: null
onmouseover: null
onmouseup: null
onmousewheel: null
onpaste: null
onreset: null
onscroll: null
onsearch: null
onselect: null
onselectstart: null
onsubmit: null
onwebkitfullscreenchange: null
onwebkitfullscreenerror: null
onwebkitspeechchange: null
outerHTML: "<input class="width-60" id="rs485addr" maxlength="3" type="textbox" value="1">"
outerText: ""
ownerDocument: HTMLDocument
parentElement: HTMLSpanElement
parentNode: HTMLSpanElement
pattern: ""
placeholder: ""
prefix: null
previousElementSibling: HTMLLabelElement
previousSibling: Text
readOnly: false
required: false
scrollHeight: 16
scrollLeft: 0
scrollTop: 0
scrollWidth: 60
selectionDirection: "forward"
selectionEnd: 3
selectionStart: 3
size: 20
spellcheck: true
src: ""
step: ""
style: CSSStyleDeclaration
tabIndex: 0
tagName: "INPUT"
textContent: ""
title: ""
translate: true
type: "text"
useMap: ""
validationMessage: ""
validity: ValidityState
value: "123"
valueAsDate: null
valueAsNumber: NaN
webkitGrammar: false
webkitRegionOverflow: "undefined"
webkitSpeech: false
webkitdirectory: false
webkitdropzone: ""
willValidate: true 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-06T08:58:01.460

我不确定它是否有任何帮助，但是当我不得不在事件侦听器中处理类似情况时，我使用了`setTimeout()`1ms 超时，我将主要功能用于检查值等。

这是因为当`keydown`触发事件时，输入字段尚未填充新数据。

简单的 jQuery 示例：

```
$('#input').on('keydown', function(e) {
  var field = $(this);
  var prevValue = field.val();
  setTimeout(function() {
    // check if new value is more or equal to 255
    if (field.val() >= 255) {
      // fill with previous value
      field.val(prevValue);
    }

  }, 1);
}); 
```

**更新**

在现代浏览器中使用“输入”事件。

```
var prevValue = 0;
$('#input').on('input', function(e) {
  var field = $(this);
  // check if new value is more or equal to 255
  if (field.val() >= 255) {
    // fill with previous value
    field.val(prevValue);
  } else {
    // If value is lower than 255 set it in prev value.
    prevValue = field.val();
  }
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-06T09:24:44.943

你不应该使用`keydown`but `keypress`。然后您将收到要键入的字符的实际字符代码。

请参阅[事件后输入框的 keypress、keydown、keyup 值](https://stackoverflow.com/q/7313570/1048572)，[http:](http://www.quirksmode.org/dom/events/keys.html) //www.quirksmode.org/dom/events/keys.html，尤其是[http://www.quirksmode.org/js/keys.html](http://www.quirksmode.org/js/keys.html)。

```
inputElement.addEventListener("keypress", function(e) {
     var curval = e.srcElement.value;
     var newchar = String.fromCharCode(e.charCode || e.keyCode);
     if (/* condition */)
         e.preventDefault();
}, false); 
```

如果您只是想在输入某些内容后获取输入值，则需要使用`keyup`事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:12:58.887

我唯一能想到的是，即使在 keydown 事件之后，控制台中输出的 srcElement 对象仍然链接到事件对象，因此即使控制台中的对象已经从 12 更新到 123安慰。

event.srcElement.value 的直接输出不会发生这种情况，因为这是一个文字值，并且在日志记录时被复制，而不是被引用......

如果你真的很快，你可以检查你是否可以在控制台中看到它从 12 变为 123 ;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-17T19:02:24.877

在此处添加@Bergi 的评论，以便**包括文本选择和插入符号位置**，您可以按如下方式进行：

```
inputElement.addEventListener("keypress", (event) => {
    let curval = event.srcElement.value;
    let newchar = String.fromCharCode(event.charCode || event.keyCode);
    let curval_arr = curval.split("");
    curval_arr.splice(event.target.selectionStart, (event.target.selectionEnd - event.target.selectionStart), newchar);
    let newval = curval_arr.join("");

    //TODO: your logic here with "newval" containing the value to be.
    //console.log(curval, newchar, newval);
    //event.preventDefault();
}, false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-09T15:55:05.873

因为这是在搜索“如何在输入键下获得新值”时出现的第一个结果，所以我在这里发布了一个有效的答案。

对于很多情况，这应该足够了，但我建议检查“keyup”或“input”或任何其他事件是否更适合您的个人问题。

```
function getNewInputValue(e) {
      let newValue = e.target.value;
      let valueArray = newValue.split('');
      const selectionLength = (e.target.selectionEnd - e.target.selectionStart);
      if (e.key === 'Backspace') {
        if (selectionLength === 0 && e.target.selectionStart > 0) {
          valueArray.splice(e.target.selectionStart - 1, selectionLength + 1);
        } else {
          valueArray.splice(e.target.selectionStart, selectionLength);
        }
      } else if (e.key === 'Delete') {
        if (selectionLength === 0) {
          valueArray.splice(e.target.selectionStart, selectionLength + 1);
        } else {
          valueArray.splice(e.target.selectionStart, selectionLength);
        }
      } else {
        valueArray.splice(e.target.selectionStart, selectionLength, e.key);
      }
      newValue = valueArray.join('');
      return newValue;
}
```

如果您使用此剪辑来阻止输入，如果新值不符合您的标准，您还应该考虑不检查某些“生活质量”功能何时被按下的键触发。

我正在谈论使用箭头键在输入内部导航，或者通过按 Tab 等导航到下一个控件。

这些是我忽略的键：

```
const ignoredKeys = [
    'ArrowLeft',
    'ArrowRight',
    'Tab',
    'End',
    'Home',
    'ArrowUp',
    'ArrowDown',
  ];
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-23T19:40:34.113

简单的解决方案：只使用`keyup`事件（而不是`keydown`事件）。这将在用户键入最新字符*后为您提供最新值。*这解决了这个问题。

# python - 为什么会出现错误？

> ID：10911050
> 
> 赞同：-5
> 
> 时间：2012-06-06T08:54:16.967
> 
> 标签：python

简单来源

```
class page:
    pages = "/.././ewcwe/../qds/./qwd/qwf/qwd/../../../sad/qwd/../sad/qwd/sad/.././../../../../bbs/./board.php?bo_table=humor&wr_id=195?los=09&qwe=2&"

    def __init__(self):
        self.normalize()

    def normalize(self):
        for j in range(1, len(self.pages)):
            if self.pages[j-1] != "." and self.pages[j] == "." and self.pages[j+1] == "/":
                self.pages = self.pages[:j] + self.pages[j+2:]
                print self.pages

        print self.pages

index = page() 
```

没有问题，但发生错误。为什么会出现错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T08:57:24.220

```
import os
os.path.normpath(pages) 
```

标准化您的路径并返回：

```
'/bbs/board.php?bo_table=humor&wr_id=195?los=09&qwe=2&' 
```

您不必重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:01:40.587

您将收到一个错误，因为您的索引最终会超出范围。

您从索引 1 迭代到字符串的末尾：

```
for j in range(1, len(self.pages)): 
```

但然后继续索引除此之外：

```
self.pages[j+1] 
```

和

```
self.pages[j+2] 
```

# magento - 重新安装magento扩展后出错

> ID：10911052
> 
> 赞同：2
> 
> 时间：2012-06-06T08:54:22.877
> 
> 标签：magento, installation

当我尝试重新安装我的 Magento 扩展时，我收到了这个错误：

> 连接错误：包社区/Special_Settings 失败：“Special_Settings”没有发布，正在跳过。

然后 Magento 开启了维护模式（文件 maintenance.flag 到站点的根目录）。谷歌没有回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:43:51.880

只需删除文件maintenance.flag

# mysql - 在mysql中合并2个表

> ID：10911055
> 
> 赞同：0
> 
> 时间：2012-06-06T08:54:37.413
> 
> 标签：mysql, sql

这是我想要做的，但我怀疑它是否可能！

我有两张桌子，一张叫`users`，另一张叫`answers`。我需要将结果组合成一个语句，并按`time`. 棘手的部分是我`time`在两个表上都有，我需要考虑这两个`time`字段来排序结果。

这是我提出查询的不成功尝试：

```
SELECT * FROM ( SELECT id, username, first_name, last_name, time FROM users
UNION ALL
  SELECT id, answer, pid, uid, time FROM answers ) as AB
ORDER BY `AB.time` 
```

**更新**

我想出了以下 SQL 查询：

```
 SELECT username AS user, '' as page , '' as content , time FROM users 
UNION ALL
  SELECT (SELECT username FROM users WHERE `id`=`uid`) AS user, pid AS page, answer AS content, time FROM answers 
ORDER BY `time` DESC 
```

它是我正在寻找的，但由于某种原因，`user`第二个 SELECT 查询中的字段显示为`null`！知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T08:56:36.920

```
 SELECT id, username, first_name, last_name, time FROM users
UNION ALL
  SELECT id, answer, pid, uid, time FROM answers 
ORDER BY 'time` 
```

为每个表设置不同的列名的解决方案

```
SELECT id         AS t1_id, 
       username   AS t1_username, 
       first_name AS t1_first_name, 
       last_name  AS t1_last_name, 
       NULL       ast2_id, 
       NULL       AS t2_answer, 
       NULL       AS t2_pid, 
       NULL       AS t2_uid, 
       time 
FROM   users 
UNION ALL 
SELECT NULL   AS t1_id, 
       NULL   AS t1_username, 
       NULL   AS t1_first_name, 
       NULL   AS t1_last_name, 
       id     ast2_id, 
       answer AS t2_answer, 
       pid    AS t2_pid, 
       uid    AS t2_uid, 
       time 
FROM   answers 
ORDER  BY time 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T08:57:52.783

如果 users.id 和 answers.uid 应该是相同的，那么这应该工作：

```
SELECT u.*, a.* FROM users AS u
    JOIN answers AS a ON a.uid = u.id
    ORDER BY a.time 
```

# eclipse - 使用片段项目扩展 Eclipse 插件时类加载不起作用

> ID：10911056
> 
> 赞同：1
> 
> 时间：2012-06-06T08:54:40.837
> 
> 标签：eclipse, eclipse-plugin, eclipse-fragment

我正在尝试通过使用片段项目来扩展第三方 Eclipse 插件。主要原因是第三方插件包含具有默认（包）修饰符的类，我需要扩展它们。

因此，我的扩展类必须位于完全相同的包中。我创建了一个包含相同包的片段项目并将我的类放入其中。当我使用运行时工作区时，一切正常。

但是，如果我尝试部署我的片段（例如，将其部署到我的 Eclipse 发行版的 dropins 文件夹中），我将无法执行代码。扩展和类似的东西可以正常工作（例如，我将扩展用于新的运行配置。但是，如果我尝试实例化此运行配置，我会收到一条错误消息，指出第三方根插件无法将类加载到显示我的配置选项卡组。

有遇到此类问题的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:14:33.590

对不起，但这不起作用。除非主机包是专门为它制作的，否则您不能从片段覆盖主机中的类。原因是资源 - 包括类 - 在任何片段之前从主机中检索。

见`org.eclipse.osgi.baseadaptor.loader.ClasspathManager`执行..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:25:30.863

实际上，我现在为自己找到了问题。问题是一个错误配置的构建属性文件，它从我的片段 JAR 中排除了 Java 字节码。非常痒，因为这些类在 JAR 中但在错误的子目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:29:42.593

实际上，这是我正在使用的扩展代码：

```
<extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
  <launchConfigurationTabGroup
    class="com.android.ide.eclipse.adt.internal.launch.jouleunit.AndroidJouleUnitTabGroup"
    id="com.android.ide.eclipse.adt.jouleunit.AndroidJouleUnitLaunchConfigTabGroup"
    type="com.android.ide.eclipse.adt.jouleunit.launchConfigurationType">
  </launchConfigurationTabGroup> 
```

当然，还有定义启动配置类型等的进一步扩展，但这是导致 Eclipse 无法找到的类的扩展。

# r - 将简单的 lm 趋势线添加到 ggplot 箱线图

> ID：10911057
> 
> 赞同：17
> 
> 时间：2012-06-06T08:54:46.103
> 
> 标签：r, ggplot2, boxplot, trendline

使用标准 R 图形将线性模型趋势线添加到箱线图时，我使用：

```
boxplot(iris[,2]~iris[,1],col="LightBlue",main="Quartile1 (Rare)")
modelQ1<-lm(iris[,2]~iris[,1])
abline(modelQ1,lwd=2) 
```

但是，在 ggplot2 中使用它时：

```
a <- ggplot(iris,aes(factor(iris[,1]),iris[,2]))
a + geom_boxplot() +
geom_smooth(method = "lm", se=FALSE, color="black", formula=iris[,2]~iris[,1]) 
```

我收到以下错误：

```
geom_smooth: Only one unique x value each group.Maybe you want aes(group = 1)? 
```

而且这条线没有出现在我的情节上。

这两种情况下使用的模型是相同的。如果有人能指出我哪里出错了，那就太好了。

编辑：以 iris 数据集为例。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T09:49:14.547

错误消息几乎是不言自明的：添加`aes(group=1)`到`geom_smooth`：

```
ggplot(iris, aes(factor(Sepal.Length), Sepal.Width)) +
  geom_boxplot() +
  geom_smooth(method = "lm", se=FALSE, color="black", aes(group=1)) 
```

![在此处输入图像描述](../Images/c4bea5c5c43447c21cdec22efc3de7c6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T21:24:20.157

`qplot`仅供参考，使用简单的界面也可以遇到（并修复）此错误`ggplot2`

至少对于少数人来说，错误消息的解释性不够:-)。在这种情况下，关键是只包括建议美学的内容

```
library(ggplot2)
qplot(factor(Sepal.Length), Sepal.Width, geom = c("smooth"), data= iris)
# error, needs aes(group=1)
qplot(factor(Sepal.Length), Sepal.Width, geom = c("smooth"), group = 1, data= iris) 
```

# java - 如何使用 jarsigner 签署十几个 JAR 文件？

> ID：10911058
> 
> 赞同：1
> 
> 时间：2012-06-06T08:54:48.153
> 
> 标签：java, jar, applet, build-automation, jar-signing

我想使用 jarsigner 对两打 jar 文件进行签名，只提供一次密码。

根据手册页，无法将多个文件提供给 jarsigner，并且在命令行上使用 for-loop 仍然会强制我为每个文件输入密码。

我更喜欢命令行的解决方案，但可以使用 ant/maven 解决方案。
系统是Linux。

如何签署十几个 jar 文件，只提供一次密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:23:40.667

这是 PSCode 的 Ant 构建文件的一个片段——它签署了一系列的 Jars。诀窍在于`foreach`元素。

```
<target name="createjars"
  depends="compile"
  description="Jars the compiled classes">
    <mkdir dir="${build}/jar/" />

    <foreach target="jar.package" param="package" inheritall="true">
        <path>
            <dirset dir="${src}/java/org/pscode" includes="**/*" />
        </path>
    </foreach>
</target> 
```

..和..

```
<target name='jar.package'>
    <script language='javascript'>
        <![CDATA[
            prop = pscode.getProperty('package');
            index1 = prop.lastIndexOf('pscode') + 7;
            index2 = prop.length();
            prop1 = prop;
            path = prop1.substring( index1, index2 );
            path2 = path.replaceAll('\\\\','/');
            pscode.setProperty('path', path2 );

            name = path2.replaceAll('/','.');
            pscode.setProperty('jar.name', name + '.jar' );
        ]]>
    </script>

    <xmlproperty file="${src}/java/org/pscode/${path}/manifest.xml" />
    <!-- echo message='jar.name: ${jar.name} *** ${application.title}' / -->
    <if>
        <not>
            <uptodate targetfile='${build}/dist/lib/${jar.name}' >
                <srcfiles dir= '${build}/share/org/pscode/${path}' includes='*.class'/>
            </uptodate>
        </not>
        <then>
            <jar
                destfile='${build}/dist/lib/${jar.name}'
                index='true'
                update='true'>
                <manifest>
                        <attribute name="Implementation-Title" value="${application.title}" />
                        <attribute name="Implementation-Vendor" value="${vendor}" />
                        <attribute name="Implementation-Vendor-Id" value="org.pscode" />
                        <attribute name='Implementation-Version' value='${now}' />
                </manifest>
                <fileset dir='${build}/share'>
                    <include name='org/pscode/${path}/*.class' />
                </fileset>
                <fileset dir='${src}/java'>
                    <include name='org/pscode/${path}/*.png' />
                    <include name='org/pscode/${path}/*.jpg' />
                    <include name='org/pscode/${path}/*.gif' />
                    <include name='org/pscode/${path}/*.xml' />
                    <include name='org/pscode/${path}/*.html' />
                    <include name='org/pscode/${path}/*.ser' />
                </fileset>
            </jar>
        </then>
    </if>

    <!-- If the Jar is updated, any previous signatures will be invalid, it
    needs to be signed again. We cannot use the issigned condition since
    that merely checks if a Jar is signed, not if the digital signatures are
    valid. -->
    <exec
        executable='${jar.signer}'
        resultproperty='jar.signer.result.property'
        outputproperty='jar.signer.output.property'>
        <arg value='-verify' />
        <arg value='${build}/dist/lib/${jar.name}' />
    </exec>

    <if>
        <or>
            <not>
                <equals arg1='${jar.signer.result.property}' arg2='0' />
            </not>
            <or>
                <contains
                    string='${jar.signer.output.property}'
                    substring='unsigned'
                    casesensitive='false' />
                <or>
                    <contains
                        string='${jar.signer.output.property}'
                        substring='SecurityException'
                        casesensitive='false' />
                </or>
            </or>
        </or>
        <then>
            <signjar
                jar='${build}/dist/lib/${jar.name}'
                alias='pscode'
                storepass='${sign.password}'
                force='true'
                verbose='${verbose}'
                keystore='${user.home}/${sign.pathfilename}' />
        </then>
    </if>

</target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T10:52:52.863

仅作记录：能够使用/命令行选项和or修饰符`jarsigner`从文件或环境变量中读取密钥库和密钥密码。`-keypass``-storepass``:file``:env`

因此，可以将每个密码放在一个文件中（在我的示例中：`~/.storepass`and `~/.keypass`）并使用这样的 for 循环使用 key 对当前目录中的所有 jar 进行签名`key_alias`：

```
for i in ./*.jar; do jarsigner -storepass:file ~/.storepass -keypass:file ~/.keypass "$i" key_alias;done 
```

要让 jarsigner 从环境变量中读取密码，您必须首先创建这些变量：

```
export storepass="mystorepassword"
export keypass="mykeypassword" 
```

现在，循环看起来像：

```
for i in ./*.jar; do jarsigner -storepass:env storepass -keypass:env keypass jarfile.jar key_alias;done 
```

# c++ - TinyXML2 C++ 导入

> ID：10911059
> 
> 赞同：1
> 
> 时间：2012-06-06T08:54:50.207
> 
> 标签：c++, import, wxwidgets, tinyxml2

我有一个 XML 文件，如下所示：

```
<?xml version="1.0" encoding="UTF-16"?>
<Table>
   <Dataset>
      <Year>Year1</Year>
      <Month>Month1</Month>
      <Day>Day1</Day>
   </Dataset>
   <Dataset>
      <Year>Year2</Year>
      <Month>Month2</Month>
      <Day>Day1</Day>
   </Dataset>
</Table> 
```

我想用 C++ 读取这个文件。我的代码如下所示：

```
XMLElement* xeTable = xeExport->FirstChildElement("Table");
     XMLElement* xeDataset = xeTable->FirstChildElement("Dataset");
         XMLElement* xeYear = xeDataset->FirstChildElement("Year");
         XMLElement* xeMonth = xeDataset->FirstChildElement("Month");
         XMLElement* xeDay = xeDataset->FirstChildElement("Day");

             XMLText* xnYear  = xeYear->FirstChild()->ToText();
             const char* cYear = xnYear->Value();

             XMLText* xnMonth  = xeMonth->FirstChild()->ToText();
             const char* cMonth = xnMonth->Value();

             XMLText* xnDay  = xeDay->FirstChild()->ToText();
             const char* cDay = xnDay->Value(); 
```

它读取第一个数据集的年、月和日期。要知道什么，读取下一个数据集的数据？我在读取后删除了第一个数据集，因此我可以使用 FirstChildElement(); 再次读取第二个数据集。但我没明白。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:21:29.233

```
xeDataset = xeDataset->NextSiblingElement("Dataset") 
```

to elaborate:

```
XMLElement* xeTable = xeExport->FirstChildElement("Table");

for(XMLElement* xeDataset = xeTable->FirstChildElement("Dataset"); xeDataset; xeDataset = xeDataset->NextSiblingElement("Dataset"))
{
         XMLElement* xeYear = xeDataset->FirstChildElement("Year");
         XMLElement* xeMonth = xeDataset->FirstChildElement("Month");
         XMLElement* xeDay = xeDataset->FirstChildElement("Day");

         XMLText* xnYear  = xeYear->FirstChild()->ToText();
         const char* cYear = xnYear->Value();

         XMLText* xnMonth  = xeMonth->FirstChild()->ToText();
         const char* cMonth = xnMonth->Value();

         XMLText* xnDay  = xeDay->FirstChild()->ToText();
         const char* cDay = xnDay->Value(); 
} 
```

# android - 我想获取 android 手机的 IP 地址，如何从 Web 服务器联系该 android 手机 使用该 IP 地址获取一些信息？

> ID：10911063
> 
> 赞同：1
> 
> 时间：2012-06-06T08:55:03.910
> 
> 标签：android

我想获取Android手机的IP地址，为此我尝试了InetAddress，但我在模拟器上获得了IP地址127.0.0.1。我怎样才能得到实际的 IP 地址。其次，我想使用来自网络服务器的 IP 地址联系该 android 手机，以询问其位置等信息。例如：假设Phone1 想要Phone2 的信息，然后Phone1 联系webserver，webserver 使用其保存的IP 地址联系phone2，然后phone2 将其位置响应给webserver，webserver 响应phone1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:07:04.187

与其让服务器询问电话的位置，不如换一种方式思考。

创建一个将在手机上运行并定期将其位置发送到您的服务器的应用程序。那么当Phone 2想知道Phone 1的位置时，它会从服务器获取最新的已知位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:20:47.547

在这里找到：[http ://www.droidnova.com/get-the-ip-address-of-your-device,304.html](http://www.droidnova.com/get-the-ip-address-of-your-device,304.html)

```
public String getLocalIpAddress() {
try {
    for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
        NetworkInterface intf = en.nextElement();
        for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
            InetAddress inetAddress = enumIpAddr.nextElement();
            if (!inetAddress.isLoopbackAddress()) {
                return inetAddress.getHostAddress().toString();
            }
        }
    }
} catch (SocketException ex) {
    Log.e(LOG_TAG, ex.toString());
}
return null;
} 
```

> 因此，如果此方法返回 null，则表示没有可用的连接。如果该方法返回一个字符串，该字符串包含设备当前使用的ip地址，与3G或WiFi无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T12:44:45.860

获取 IPV4 的代码：

```
private String getLocalIpAddress() {
       try {
           for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
               NetworkInterface intf = en.nextElement();
               for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                   InetAddress in`enter code here`etAddress = enumIpAddr.nextElement();
                   if (!inetAddress.isLoopbackAddress()) {
                       if (inetAddress instanceof Inet4Address) {
                           return ((Inet4Address)inetAddress).getHostAddress().toString();
                       }
                   }
               }
           }
       } catch (SocketException ex) {
           Log.e("ServerActivity", ex.toString());
       }
       return null;
    } 
```

# css - 让@font-face 在 IE9 中更高效

> ID：10911064
> 
> 赞同：0
> 
> 时间：2012-06-06T08:55:13.780
> 
> 标签：css, internet-explorer-9, font-face

我在网站上使用@font-face。该代码有效，并且在 Firefox、Chrome 和 Opera 中，@font-face 字体可以完美加载。使用的代码与 Font Squirrel 生成的代码相同。这是@font-face 代码：

```
@font-face {
    font-family: 'OpenSansRegular';
    src: url('fonts/OpenSans-Regular-webfont.eot');
    src: url('fonts/OpenSans-Regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/OpenSans-Regular-webfont.woff') format('woff'),
         url('fonts/OpenSans-Regular-webfont.ttf') format('truetype'),
         url('fonts/OpenSans-Regular-webfont.svg#OpenSansRegular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

然后使用以下代码调用字体：

```
font-family: "OpenSansRegular",Arial,sans-serif; 
```

但是，在 IE9 中它仍然可以工作，但是非常笨重。最初加载页面时，首先加载`Arial`字体，大约 1 或 2 秒`OpenSansRegular`后加载字体。这显然会破坏网站的体验，因为页面加载了一种字体，然后在一段时间后将另一种字体引导到页面上。

有没有办法在仍然使用@font-face 的同时防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:00:12.877

在 IE 9 中，完全支持使用 data: 属性。在这种情况下，您可以通过以下方式修改 CSS：

```
@font-face {
    font-family: 'OpenSansRegular';
    src: url('data:font/eot;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAggg=='); /* IE 9 */
    font-weight: normal;
    font-style: normal;
} 
```

这将确保仅当 CSS 完全加载时，它也会加载字体。希望能帮助到你。

# asp.net - 对象引用未设置为对象数据表的实例

> ID：10911066
> 
> 赞同：0
> 
> 时间：2012-06-06T08:55:27.793
> 
> 标签：asp.net, c#-4.0

即使我的列表不为空，我也没有将对象引用设置为对象的实例

```
 protected void gridview_bind()
{
    try
    {
        CompanyMasterClass co = new CompanyMasterClass();
        co.strcompany_code = Request.Cookies["userinfo"]["companycode"].ToString();
        ResultClass objress = co.fn_GetNameNumberStyle();
        if (objress.bStatus)
        {
            eslist<CompanyMasterClass> OBJLISTS = objress.objData as eslist<CompanyMasterClass>;

            if (OBJLISTS.Count > 0)
            {
                if (OBJLISTS[0].strdatestyle.ToString() == "DM")
                {
                    mskextCreatedOn.Mask = "99/99/9999";
                    mskextCreatedOn.CultureName = "en-GB";
                    //mskextCreatedOn.UserDateFormat="DayMonthYear";
                    mskextUpdatedOn.Mask = "99/99/9999";
                    mskextUpdatedOn.CultureName = "en-GB";
                }
                if (OBJLISTS[0].strdatestyle.ToString() == "MD")
                {
                    mskextCreatedOn.Mask = "99/99/9999";
                    mskextCreatedOn.CultureName = "en-US";
                    //mskextCreatedOn.UserDateFormat="DayMonthYear";
                    mskextUpdatedOn.Mask = "99/99/9999";
                    mskextUpdatedOn.CultureName = "en-US";
                }
            }
        }
        //mm.getlookup(ddlUserType, "user_type", "s");
        CustomerMasterClass cs = new CustomerMasterClass();

        ResultClass objres = cs.fn_GetCustomerMasterGrid();
        if (objres.bStatus)
        {
            eslist<CustomerMasterClass> OBJLIST = objres.objData as eslist<CustomerMasterClass>;
            if (OBJLIST.Count > 0)
            {
                if ((bool)ViewState["filter"] == true)
                {
                    DataTable dts = (DataTable)ViewState["searchtable"];
                    pds.DataSource = dts.DefaultView;
                    pds.AllowPaging = true;
                    pds.PageSize = Convert.ToInt16(ddlPerPage.SelectedValue);
                    //pds.PageSize = 5;
                    DataView dvs = dts.DefaultView;

                    if (this.ViewState["SortExp"] != null)
                    {
                        dvs.Sort = this.ViewState["SortExp"].ToString()
                                 + " " + this.ViewState["SortOrder"].ToString();
                    }
                    pds.CurrentPageIndex = CurrentPage;
                    lnkbtnNext.Enabled = !pds.IsLastPage;
                    lnkbtnPrevious.Enabled = !pds.IsFirstPage;
                    if (pds.IsLastPage)
                    {
                        //lnkbtnNext.Style.Add("color", "#CCCCCC");
                        lnkbtnNext.Style.Add("background-color", "#CCCCCC");
                        lnkbtnNext.Style.Add("border-width", "0px");
                    }
                    else
                    {
                        //lnkbtnNext.Style.Remove("color");
                        lnkbtnNext.Style.Remove("background-color");
                        lnkbtnNext.Style.Remove("border-width");
                    }
                    if (pds.IsFirstPage)
                    {
                        //lnkbtnPrevious.Style.Add("color", "#CCCCCC");
                        lnkbtnPrevious.Style.Add("background-color", "#CCCCCC");
                        lnkbtnPrevious.Style.Add("border-width", "0px");
                    }
                    else
                    {
                        //lnkbtnPrevious.Style.Remove("color");
                        lnkbtnPrevious.Style.Remove("background-color");
                        lnkbtnPrevious.Style.Remove("border-width");
                    }
                    gvCustomerMaster.DataSource = pds;
                    gvCustomerMaster.DataBind();
                    doPaging();
                    // gvGroupMaster.DataSource = OBJLIST;
                    //gvGroupMaster.DataBind();
                    gridmain.Visible = true;
                    //frmvwGroup.Visible = false;
                    lblTotalRecords.Text = dts.Rows.Count.ToString();

                }
                else
                {
                        DataTable dt = (DataTable)OBJLIST;
                        //dt = OBJLIST.ToString();
                        ViewState["nosearch"] = dt;
                        pds.DataSource = dt.DefaultView;
                        pds.AllowPaging = true;
                        pds.PageSize = Convert.ToInt16(ddlPerPage.SelectedValue);
                        //pds.PageSize = 5;
                        DataView dv = dt.DefaultView;

                        if (this.ViewState["SortExp"] != null)
                        {
                            dv.Sort = this.ViewState["SortExp"].ToString()
                                     + " " + this.ViewState["SortOrder"].ToString();
                        }
                        pds.CurrentPageIndex = CurrentPage;
                        lnkbtnNext.Enabled = !pds.IsLastPage;
                        lnkbtnPrevious.Enabled = !pds.IsFirstPage;
                        if (pds.IsLastPage)
                        {
                            //lnkbtnNext.Style.Add("color", "#CCCCCC");
                            lnkbtnNext.Style.Add("background-color", "#CCCCCC");
                            lnkbtnNext.Style.Add("border-width", "0px");
                        }
                        else
                        {
                            //lnkbtnNext.Style.Remove("color");
                            lnkbtnNext.Style.Remove("background-color");
                            lnkbtnNext.Style.Remove("border-width");
                        }
                        if (pds.IsFirstPage)
                        {
                            //lnkbtnPrevious.Style.Add("color", "#CCCCCC");
                            lnkbtnPrevious.Style.Add("background-color", "#CCCCCC");
                            lnkbtnPrevious.Style.Add("border-width", "0px");
                        }
                        else
                        {
                            //lnkbtnPrevious.Style.Remove("color");
                            lnkbtnPrevious.Style.Remove("background-color");
                            lnkbtnPrevious.Style.Remove("border-width");
                        }
                        gvCustomerMaster.DataSource = pds;
                        gvCustomerMaster.DataBind();
                        doPaging();
                        // gvGroupMaster.DataSource = OBJLIST;
                        //gvGroupMaster.DataBind();
                        gridmain.Visible = true;
                        //frmvwGroup.Visible = false;
                        lblTotalRecords.Text = OBJLIST.Count.ToString();
                        //this.GetUsersPageWise(1);

                }
            }
        }
    }
    catch (Exception ex)
    {
        ErrorLogClass ObjError = new ErrorLogClass("customer_master.aspx", "customer_master()", ex);
    }
} 
```

我在 DataTable dt = (DataTable)OBJLIST; 在 else 子句中。

请问有什么想法或建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:21:21.243

数据有问题。一些值为空的值。通过为数据变量分配默认值来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:57:47.103

您不能像这样将列表转换为数据表。要么使用

```
static DataTable ConvertListToDataTable(eslist<CompanyMasterClass> list)
{
    // New table.
    DataTable table = new DataTable();

    // Get max columns.
    int columns = 0;
    foreach (var array in list)
    {
    if (array.Length > columns)
    {
        columns = array.Length;
    }
    }

    // Add columns.
    for (int i = 0; i < columns; i++)
    {
    table.Columns.Add();
    }

    // Add rows.
    foreach (var array in list)
    {
    table.Rows.Add(array);
    }

    return table;
} 
```

或参考以下链接 [http://www.codeproject.com/Articles/83271/Convert-a-Generic-List-to-a-Datatable](http://www.codeproject.com/Articles/83271/Convert-a-Generic-List-to-a-Datatable)

# c# - 从另一个 .cs 程序编译位于磁盘不同文件夹中的 .cs 文件

> ID：10911067
> 
> 赞同：0
> 
> 时间：2012-06-06T08:55:33.280
> 
> 标签：c#

我想编译一个存在于磁盘上其他文件夹中的 .cs 程序，并使用另一个 .cs 程序或控制台应用程序或窗口应用程序生成它的 .dll。我尝试使用以下

```
using (StreamReader textReader = new StreamReader(@"path\Filename.cs"))
{
     textFile = textReader.ReadToEnd();
    Console.WriteLine(textFile);
}
CodeDomProvider codeProvider = new CSharpCodeProvider(); 
ICodeCompiler compiler = codeProvider.CreateCompiler(); 
// add compiler parameters 
CompilerParameters compilerParams = new CompilerParameters();
compilerParams.CompilerOptions = "/target:library /optimize"; 
compilerParams.GenerateExecutable = false; 
compilerParams.GenerateInMemory = true;             
compilerParams.IncludeDebugInformation = false; 
compilerParams.ReferencedAssemblies.Add("mscorlib.dll");
compilerParams.ReferencedAssemblies.Add("System.dll");  
// compile the code 
CompilerResults results = compiler.CompileAssemblyFromSource(compilerParams,        textFile); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:02:37.627

我有这样的想法，直到你找不到具体的东西试试这个

```
Process processCS= new Process();
processCS.StartInfo.WorkingDirectory = @"C:\<your code directory>";
processCS.StartInfo.FileName = @"C:\Windows\Microsoft .NET\Framework\version\csc.exe   /out:yourdllname.dll yourcodefilename.cs";
processCS.StartInfo.CreateNoWindow = true;
processCS.Start();
processCS.WaitForExit(); 
```

您可以从 cs 文件中调用它来编译其他 cs 文件。检查它是否有效.... \

默认情况下，进程将搜索 system32 目录中的文件，因此请使用以下代码来执行此操作...

```
ProcessStartInfo info = new ProcessStartInfo(@"C:\Windows\Microsoft.NET\Framework\v3.5\csc.exe");
info.Arguments = @" /out:C:\ss\Class1.dll C:\ss\Class1.cs";
info.UseShellExecute = false;
Process.Start(info); 
```

在参数中，我将 cs 文件的路径指定为 C:\ss\Class1.cs 您根据您的路径给出，但请记住给出小路径。

# java - CONSTANT.equals(VARIABLE) 比 VARIABLE.equals(CONSTANT) 快吗？

> ID：10911068
> 
> 赞同：16
> 
> 时间：2012-06-06T08:55:36.140
> 
> 标签：java

我和我的一位队友进行了一次有趣的对话。

`CONSTANT.equals(VARIABLE)`比`VARIABLE.equals(CONSTANT)`Java快吗？

我怀疑这是一个虚假的陈述。但我试图弄清楚这背后应该是什么定性推理？

我知道在这两种情况下，性能不会因任何重要状态而有所不同。但这是最佳实践下的建议，这让我感到不舒服。这就是为什么我正在寻找一个我想用这个案例来展示的一个很好的推理。

请帮忙

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-06T09:32:10.320

有趣的问题。这是我写的测试：

```
public class EqualsTest {
    public static String CONST = "const";
    public void constEqVar(String var) {
        CONST.equals(var);
    }
    public void varEqConst(String var) {
        var.equals(CONST);
    }
} 
```

然后我使用 javac: 编译它并使用 :反`javac EqualsTest.java`汇编它。`javap``javap -c EqualsTest`

以下是 javap 输出的相关片段：

```
public void constEqVar(java.lang.String);
  Code:
   0:   getstatic       #2; //Field CONST:Ljava/lang/String;
   3:   aload_1
   4:   invokevirtual   #3; //Method java/lang/String.equals:(Ljava/lang/Object;)Z
   7:   pop
   8:   return

public void varEqConst(java.lang.String);
  Code:
   0:   aload_1
   1:   getstatic       #2; //Field CONST:Ljava/lang/String;
   4:   invokevirtual   #3; //Method java/lang/String.equals:(Ljava/lang/Object;)Z
   7:   pop
   8:   return 
```

正如您所看到的，这两种方法之间的唯一区别是操作顺序：在第一种情况下是 getstatic，然后是 aload_1，在第二种情况下是 aload_1 + getstatic。

很明显，执行时间不应该取决于这个顺序。

选择`const.equals(var)`而不是`var.equals(const)`避免的唯一原因`NullPointerException`。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-06T09:22:42.290

对我来说，这不是速度问题，而是可靠性问题。

例如

```
"Hello".equals(a); // will never throw a NPE
a.equals("Hello"); // can throw an NPE. 
```

你可能更喜欢它在 a 的时候爆炸，`null`但我通常不会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T08:58:39.267

这仅取决于 equals 方法的实现。它可能更快，可能更慢，而且可能是一样的……通常是一样的。此外，它不取决于一个是变量而另一个是常量这一事实，而是取决于两个对象的内容。

Constant.equals(variable) 的一个优点是您不能在 .equals 上有 NullPointerException

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-08T06:17:44.383

如果我们将**CONSTANT 键（equals 方法的左侧）**与任何**Object（equals 方法的右侧）**进行比较，那么编译器可以进行检查比较并给出预期的结果，但如果我们反之亦然**Object（（equals 方法的左侧））**与**Constant key((Right side of equals method))**进行比较，那么您的程序可能会通过**NULL POINTER EXCEPTION**。

```
public static void main(String[] args) {
    String CONSTANT_KEY = "JAVA";
    String string = null;

    // CASE 1
    if (CONSTANT_KEY.equals(string)) {
        System.out.println("I am in if block");
    }

    // CASE 2   
    if (string.equals(string)) {
        System.out.println("I am in if block");
    }
} 
```

**在上面的代码中，案例 1 总是可以安全地比较对象以避免 NULL POINTER EXCEPTION 而不是案例 2。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T09:22:58.767

用字符串做了一个简单的测试：

```
final String constHello = "Hello";
final int times = 1000000000;

long constTimeStart = System.nanoTime();

for (int i = 0; i < times; ++i) {
    constHello.equals("Hello");
}

long constTimeStop = System.nanoTime();

System.out.println("constHello.equals(\"Hello\"); " + times + " times: " + (constTimeStop - constTimeStart) + " ns");

constTimeStart = System.nanoTime();

for (int i = 0; i < times; ++i) {
    "Hello".equals(constHello);
}

constTimeStop = System.nanoTime();

System.out.println("\"Hello\".equals(constHello); " + times + " times: " + (constTimeStop - constTimeStart) + " ns"); 
```

**编辑：** 正如下面评论中提到的，这不是进行微观测量的好方法。切换将首先执行的代码部分证明了预热时间在这里发挥了重要作用。第一个测试总是运行得较慢。在相同的代码中多次重复测试以快速修复这会使结果或多或少相同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-05T05:49:42.090

一个很好的比较可以是：

```
private static String EXAMPLE = "Example";
private String obj = null; 
```

情况1：

```
if(obj.equals(EXAMPLE) {
} 
```

这是抛出空指针异常..

案例2：

```
if(EXAMPLE.equals(obj)) {
} 
```

这不会抛出空指针异常..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-06T08:59:27.323

我想代码`java.lang.String`支持我的回答：

```
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String)anObject;
        int n = count;
        if (n == anotherString.count) {
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = offset;
            int j = anotherString.offset;
            while (n-- != 0) {
                if (v1[i++] != v2[j++])
                    return false;
            }
            return true;
        }
    }
    return false;
} 
```

# c# - Process.StartInfo.UseShellExecute 相关错误

> ID：10911069
> 
> 赞同：0
> 
> 时间：2012-06-06T08:55:41.273
> 
> 标签：c#, .net

我有 1 个 c# 控制台 appln，它使用 Process.Start() 方法执行任何脚本文件。我提供脚本文件路径。`Process1.StartInfo.FileName`我的脚本文件可以是任何类型（.vbs，ps1 等）。我还使用指令将字符串传递给脚本`p.StartInfo.Arguments`。当脚本文件执行时，它应该将字符串返回给 c# 应用程序。这个返回的字符串可以通过设置读取`Process1.StartInfo.RedirectStandardOutput = true`，但是使用这个指令我需要设置`Process1.StartInfo.UseShellExecute = false`。当我运行这个我得到错误为“指定的可执行文件不是有效的 Win32 应用程序”。我认为这可能是因为，当我设置时`Process1.StartInfo.UseShellExecute = false`，我的 appln 不知道要使用哪个 .exe 来执行脚本文件。

另一方面，如果我提供 exe 路径`StartInfo.FileName`和脚本文件路径，`StartInfo.Argument`那么我不会出错。例如：我想执行 powershell 脚本并将以下属性设置为`P1.StartInfo.FileName = "location of powershell.exe"`and `p1.startInfo.Argument =".ps1 script file path"`，在这种情况下我没有收到错误。

问题是我事先不知道，我要执行哪种类型的脚本。也无法找到 .exe 文件的位置，以便在不同的不同 m/c 上执行脚本文件。那么是否可以从相同的常见 c# appln 执行不同类型的脚本文件并读取脚本返回的输出？

这是我的代码

```
 using System;
 using System.Collections.Generic;
 using System.Text;
 using System.Diagnostics;
 using System.Collections;
 namespace process_csharp
 {
    class Program
    {
       static void Main(string[] args)
       {
        String path = null;
        //this will read script file path 
        path = Console.ReadLine();

        //this string is passed as argument to script
        string s = "xyz";

        Process p = new Process();          
        p.StartInfo.FileName= path;         
        p.StartInfo.Arguments = s;                     
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;      

        p.Start();
        p.BeginOutputReadLine();
        Console.WriteLine(p.StandardOutput.ReadToEnd());
      }

    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:09:01.273

您可以检查脚本类型并从他们自己的引擎中读取输出；

```
 static void Main(string[] args)
    {
        string path = Console.ReadLine();
        string parameter = Console.ReadLine();
        string enginePath;
        switch (Path.GetExtension(path).ToLowerInvariant())
        {
            case ".ps1":
                enginePath = "powershell.exe";
                break;
            case ".vbs":
                enginePath = "cscript.exe";
                break;
            default:
                throw new ApplicationException("Unknown script type");
        }

        string scriptPath = path;
        Process process = new Process();
        process.StartInfo.FileName = enginePath;
        process.StartInfo.Arguments = string.Format("{0} {1}", scriptPath, parameter);
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.RedirectStandardOutput = true;
        process.Start();
        Console.WriteLine(process.StandardOutput.ReadToEnd());
        Console.ReadKey();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:05:57.870

试试这个代码：

```
string path = @"C:\mypsscript.bat";
Process p = new Process();
p.StartInfo.FileName = path;
p.StartInfo.Arguments = "xyz";
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.Start();
Console.WriteLine(p.StandardOutput.ReadToEnd());
Console.ReadKey(); 
```

为了调试，我用代码创建了一个批处理文件：

```
echo %1 
```

当我运行上面的代码时，我得到：

```
xyz 
```

所以这似乎工作正常。尝试使用这样的批处理文件，看看它是否有效，如果有效，则可能与无法正常工作的 powershell 脚本相关联，我们可以稍后修复。

# android - Android如何将婴儿车传递给搜索意图？

> ID：10911075
> 
> 赞同：-2
> 
> 时间：2012-06-06T08:56:22.560
> 
> 标签：android, android-intent

> **可能重复：**
> [Android：在类之间传递参数](https://stackoverflow.com/questions/2582690/android-passing-paramters-between-classes)

我有一个活动，其搜索意图必须具有不同的逻辑，具体取决于传递给它的参数。问题是如何将这些参数传递给搜索意图？

然后在开始活动后，我调用 Intent.ACTION_SEARCH.equals(getIntent().getAction()) 并根据传递的参数，我必须执行某些操作。

如果我理解正确，Android 系统会启动搜索。并且每个意图的消息都只能由系统传递，是否正确理解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:47:33.830

是的，我可以通过覆盖方法 onSearchRequested()

```
@Override
public boolean onSearchRequested() {
    Bundle appData = new Bundle();
    if (getIntent().getBooleanExtra("isFavorites", false) == false){
        appData.putBoolean("isSearchFavorites", false);
    } else {
        appData.putBoolean("isSearchFavorites", true);
    }
    startSearch(null, false, appData, false);
    return true;
} 
```

该方法又调用方法 startSearch，该方法可以将参数传递给 Search Intent。

# powershell-3.0 - Get-Command 参数 -commandCapability 有什么作用？

> ID：10911076
> 
> 赞同：1
> 
> 时间：2012-06-06T08:56:31.000
> 
> 标签：powershell-3.0

当我看到参数末尾列出的 –CommandCapability 时，我正在研究 PowerShell 3 中的 Get-Command。

我的问题是如何让这个 –CommandCapability 参数起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:34:08.780

获取命令 | 选择能力应该会给你一些线索。还有Get-Command | 组能力查看可能的选项。

基本上，它可以区分“普通”cmdlet、脚本、CIM cmdlet 和工作流。我会说它是对当前现有的 CommandType(s) 分类的扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:54:04.240

@Guy - 我在最新发布的 PowerShell V3 中没有看到 -CommandCapability：

```
Parameter Set: CmdletSet
Get-Command [[-ArgumentList] <Object[]> ] [-All] [-ListImported] [-Module <String[]> ] [-Noun <String[]> ] [-ParameterName <String[]> ] [-ParameterType <PSTypeName[]> ] [-Syntax] [-TotalCount <Int32> ] [-Verb <String[]> ] [ <CommonParameters>]

Parameter Set: AllCommandSet
Get-Command [[-Name] <String[]> ] [[-ArgumentList] <Object[]> ] [-All] [-CommandType <CommandTypes> ] [-ListImported] [-Module <String[]> ] [-ParameterName <String[]> ] [-ParameterType <PSTypeName[]> ] [-Syntax] [-TotalCount <Int32> ] [ <CommonParameters>] 
```

你是说CommandType吗？

# php - PHP设置动态数组索引

> ID：10911084
> 
> 赞同：3
> 
> 时间：2012-06-06T08:57:14.483
> 
> 标签：php, arrays

`key/value`我的`$_POST`变量中有以下内容：

```
Array
(
     'translations_0_comment' => 'Greetings from UK'
) 
```

我想要的是将此值设置为以下数组

```
$data[translations][0][comment] = 'Greetings from UK'; 
```

所以我的想法是我可以在我的`KEY`值中包含任何东西，然后我将填充一个数组。

有没有不使用的安全方法来做到这一点`eval()`？

感谢所有帮助。

*更新：*

这将是一个想法`eval()`

```
foreach ($_POST as $key => $dataValue) {            
    $a = explode("_", $key);
    $builder = '$object';
    foreach ($a as $value) {
        $builder.='['.$value.']';
    }
    $builder.=' = '.$dataValue.';';
    eval($builder);         
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T09:15:12.463

我想你正在寻找这个

```
function set_value($object, $paths, $value, $index){

    $key = $paths[$index];

    $sub_object = $object[$key];
    if (!is_array($sub_object)){
        $object[$key] = $value;
    }else{
        $index = $index+1;
        $object[$key] = set_value($sub_object, $paths, $value, $index);
    }
    return $object;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:01:36.270

我想[这](http://www.php.net/manual/en/faq.html.php#faq.html.arrays)就是你要找的

例子

在生成 $_POST 数据的表单中，将输入属性重命名如下

```
<input name="data[translations][0][comment]" /> 
```

现在你`$_POST['data']`将成为一个数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T09:01:43.673

`explode()`是你需要的：

```
$data = array();
foreach ($postData as $key => $val) {
    $explodedKey = explode('_', $key);
    $data[$explodedKey[0]][$explodedKey[1]][explodedKey[2]] = $val;
} 
```

无需使用`eval()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T09:10:32.220

```
$data = array();
foreach ($_POST as $keys => $val) {
    $keys_list = explode('_', $keys);
    $link = &$data;
    foreach ($keys_list as $key) {
        $link[$key] = $val;
        $link = &$link[$key];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T13:10:29.600

试试这个先生。

```
$array = array
(
     'TRY_THIS_ONE_SIR_PLEASE_THANKS' => 'Greetings from UK'
);

$array1 = array_keys($array);
$arrValue = array_values($array);
$array1 = explode("_", $array1[0]);

$ctr = count($array1);
for($i=0; $i<$ctr; $i++)
{
    $start .= "array(\"".$array1[$i]."\" => ";
    $end .=")";
} 
$start = $start ."\"".$arrValue[0]."\"".$end;

eval("\$arr = $start;");

print_r($arr); 
```

# android - 如何自定义surfaceview相机并将捕获的图像传递给android中的另一个活动？

> ID：10911087
> 
> 赞同：-2
> 
> 时间：2012-06-06T08:57:31.240
> 
> 标签：android, android-layout, android-ndk

我已经使用 Surfaceview 创建了自定义相机并且相机正在工作，但捕获的图像没有传递给另一个活动。我怎样才能做到这一点？任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:02:50.387

您必须将该捕获的文件保存在相机活动中的某个位置。将该文件的完全限定图像路径作为`Intent`另一个活动传递。现在使用此路径在另一个活动中打开图像。这样，您没有将图像直接传递给另一个活动，而是通过传递图像路径，您可以在另一个文件中获取捕获的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:35:56.917

试试这个它会工作：

```
Intent i = new Intent(CameraCapture.this, SelectService.class);
i.putExtra("filepath", "/mnt/sdcard/projectname_temp/myPicName.jpg");
startActivity(i); 
```

# ios - NSArray 错误：NSCFArray objectAtIndex 索引 (5) 超出范围 (5)

> ID：10911088
> 
> 赞同：1
> 
> 时间：2012-06-06T08:57:37.340
> 
> 标签：ios, objective-c, crash, runtime-error

我有一个 MutableArray 填充了数据库中的值：

```
NSMutableArray *objectsArray = [[NSMutableArray alloc] init];
for (int n=0; n<[self.array count]; n++) {
    [objectsArray addObject:[[self.array objectAtIndex:n] objectForKey:@"Name"]];
    [objectsArray addObject:[[self.array objectAtIndex:n] objectForKey:@"Name_En"]];
} 
```

我在标签上显示值，如下所示：

```
cell.textLabel.text = [[[dic objectForKey:@"d"] objectAtIndex:indexPath.row] objectForKey:@"Name"];
cell.detailTextLabel.text = [[[dic objectForKey:@"d"] objectAtIndex:indexPath.row] objectForKey:@"Name_En"]; 
```

到目前为止，该应用程序运行良好。它开始时不会引发异常，并且值在标签中。但是，如果我开始滚动应用程序崩溃，我会收到以下错误：

```
Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (5) beyond bounds (5)' 
```

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:04:34.443

您可能在说表格有 6 行，但实际上有 5 行。此异常的原因是表格视图请求`indexPath.row`值为 5 的单元格，这意味着它认为有 6 [0:5]行，但您在字典中的数组有 5 个项目 [0:5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T09:53:33.187

我遇到了你前面提到的同样的问题。然后我这样做了：-

```
cell.TitleLabel.text=[[AllUserDataArray objectAtIndex:indexPath.row]objectAtIndex:0];
cell.DateAndTimeLabel.text=[[AllUserDataArray objectAtIndex:indexPath.row]objectAtIndex:1];
cell.InfoLabel.text=[[AllUserDataArray objectAtIndex:indexPath.row]objectAtIndex:2];
if([[AllUserDataArray objectAtIndex:indexPath.row] count] >3) {

 NSData *imageData=[[AllUserDataArray objectAtIndex:indexPath.row]objectAtIndex:3];
 UIImage *travelImage=[UIImage imageWithData:imageData];
 cell.ImgView.image=travelImage; 
```

它工作正常且逻辑正确（我认为是这样）:)

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-29T05:37:48.610

我面临同样的问题，我得到了解决方案：

NSMutableArray *objectsArray = [[NSMutableArray alloc] init];

```
objectsArray=nil;

for (int n=0; n<[self.array count]; n++) {
    [objectsArray addObject:[[self.array objectAtIndex:n] objectForKey:@"Name"]];
    [objectsArray addObject:[[self.array objectAtIndex:n] objectForKey:@"Name_En"]];
} 
```

# python - 解压缩时出现错误 -3：存储的块长度无效

> ID：10911089
> 
> 赞同：1
> 
> 时间：2012-06-06T08:57:38.237
> 
> 标签：python, url, scrapy

我正在抓取一个网站，它包含许多 O 需要从中获取数据的 URL。我使用 XPath 并获取所有`href`s (URL) 并保存到一个列表中。我循环了这个列表并产生了一个请求。下面是我的蜘蛛代码，

```
class ExampledotcomSpider(BaseSpider):
   name = "exampledotcom"
   allowed_domains = ["www.example.com"]
   start_urls = ["http://www.example.com/movies/city.html"]

   def parse(self, response):
       hxs = HtmlXPathSelector(response)
       cinema_links = hxs.select('//div[@class="contentArea"]/div[@class="leftNav"]/div[@class="cinema"]/div[@class="rc"]/div[@class="il"]/span[@class="bt"]/a/@href').extract()
       for cinema_hall in cinema_links:
            yield Request(cinema_hall, callback=self.parse_cinema)

   def parse_cinema(self, response):
       hxs = HtmlXPathSelector(response)
       cinemahall_name = hxs.select('//div[@class="companyDetails"]/div[@itemscope=""]/span[@class="srchrslt"]/h1/span/text()').extract()
       ........ 
```

在这里，例如，我在列表中有 60 个 URL，并且大约 37 个 URL 没有下载：对于这些，出现错误消息：

```
2012-06-06 14:00:12+0530 [exampledotcom] ERROR: Error downloading <GET http://www.example.com/city/Cinema-Hall-70mm-%3Cnear%3E-place/040PXX40-XX40-000147377847-A6M3>: Error -3 while decompressing: invalid stored block lengths
2012-06-06 14:00:12+0530 [exampledotcom] ERROR: Error downloading <GET http://www.example.com/city/Cinema-Hall-35mm-%3Cnear%3E-place/040PXX40-XX40-000164969686-H9C5>: Error -3 while decompressing: invalid stored block lengths 
```

仅对于 Scrapy 正在下载的某些 URL，对于其余部分，我不明白发生了什么以及我的代码有什么问题。

谁能建议我如何消除这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:02:39.687

我认为您的代码没有任何问题。

*   解压缩时出现错误 -3：存储的块长度无效
*   CRC 校验失败 0x471e6e9a != 0x7c07b839L
*   解压时出现错误 -3：块类型无效

所有这些错误似乎都与 gzip 解压有关。我认为您尝试访问的网站有响应标头`Accept-Encoding: gzip, deflate`

> gzip 由文件压缩程序“gzip”（GNU zip）产生的一种编码格式，如 RFC 1952 [25] 中所述。此格式是具有 32 位 CRC 的 Lempel-Ziv 编码 (LZ77)。

另见[http://en.wikipedia.org/wiki/HTTP_compression](http://en.wikipedia.org/wiki/HTTP_compression)

所以我认为这只是一个损坏的网络服务器，它托管了scrapy试图下载的页面。

更新：

尝试禁用[HttpCompressionMiddleware](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#module-scrapy.contrib.downloadermiddleware.httpcompression)

# java - 如何对 JSP 标签进行单元测试？

> ID：10911090
> 
> 赞同：5
> 
> 时间：2012-06-06T08:57:42.420
> 
> 标签：java, unit-testing, jsp, junit

我有一个自定义 JSP 标记

```
public class HappyTag extends TagSupport { ... } 
```

现在我需要测试它。

所以我创建了一个简单的 JUnit 测试：

```
@Test
public void testTag() {
    HappyTag tag = new HappyTag();
} 
```

我收到以下错误：

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/servlet/jsp/tagext/TagSupport
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
(.....)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我正在使用 maven 构建和测试我的应用程序，包括标签。我当前对 tags 子模块的依赖是：

```
 <dependencies>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0-SNAPSHOT</version>
        <scope>provided</scope>
    </dependency>

</dependencies> 
```

加上来自父模块的一些依赖项：

```
 <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>javax.portlet</groupId>
        <artifactId>portlet-api</artifactId>
        <version>2.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.portletfaces</groupId>
        <artifactId>portletfaces-bridge-impl</artifactId>
        <version>2.0.0</version>
    </dependency>

    <dependency>
        <groupId>javax.el</groupId>
        <artifactId>el-api</artifactId>
        <version>2.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>el-impl</artifactId>
        <version>2.2</version>
        <scope>provided</scope>
    </dependency> 
```

这些依赖项足以编译和使用我的 JSP 中的标记。它们不足以测试标签:-(

那么，我做错了什么？

最诚挚的问候，
Q。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T21:35:04.187

Java EE maven 依赖项仅提供存根来帮助编译需要这些接口的代码。IT 不提供实施。因此，您无法运行它们。您需要解决这个问题来模拟行为（这可能最终会大量重构您的代码），或者您需要使用提供 API 完整实现的依赖项在功能上运行测试。也许[这个答案](https://stackoverflow.com/questions/3424207/testing-against-java-ee-6-api?rq=1)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T21:52:00.980

尼尔是对的。如果您不想使用完整的 javaee.jar，则需要模拟 ServletContext。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T20:37:59.937

您可以使用 mockito 和/或 power mock 来模拟 servlet 上下文和 jsp 页面上下文。模拟您的标签调用以正确运行的每个方法（doTag）。您需要添加模拟框架和 javax.el 作为测试依赖项。

# c++ - 使用 VC++ 创建跨机 DLL

> ID：10911093
> 
> 赞同：0
> 
> 时间：2012-06-06T08:57:53.170
> 
> 标签：c++, visual-studio-2008, visual-c++, dll, win32com

我使用 VC++ 2008 创建了一个 DLL 文件，设置如下：

*   配置类型：动态库 (.dll)
*   MFC 的使用：使用标准 Windows 库
*   使用 ATL：不使用 ATL
*   公共语言运行时支持：公共语言运行时支持 (/clr)

创建的 DLL 在我的机器（创建它的机器）上运行良好，但不能在另一台机器上使用（我用 3 台机器测试）。有关更多详细信息，我通过 JNI（Java 本机接口）加载此 DLL 文件。在我的机器上它可以工作，但在其他机器上却显示错误“java.lang.UnsatisfiedLinkError:: The application failed to start because its side-by-side configuration is wrong....”

我的问题是： 1\. 在创建不能在多个环境下工作的 DLL 时，我是否遗漏了任何配置？2\. 我们可以创建一个可以在不同机器上工作的 DLL 文件吗？

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:49:56.157

您需要确保 VC++ 2008 Redistributables 已安装在其他机器上。仔细检查这是在另一台机器上运行 Dependency Walker 的问题，它会告诉你它在寻找什么：http: [//www.dependencywalker.com/](http://www.dependencywalker.com/)

您可以在 microsoft 网站上找到 VC 2008 redist EXE：http: [//www.microsoft.com/en-us/download/details.aspx?id= 29](http://www.microsoft.com/en-us/download/details.aspx?id=29)

或者实际的 DLL 在 VC 2008 安装文件夹的 redist 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:57:15.387

除了@snowdude 所说的正确之外，还有另一个可能的问题：如果这些其他 PC 没有安装 VS2008，并且您链接到调试 MSVCR* 库，那么您就不走运了。只有 Release 模式的二进制文件可以部署到用户系统，而无需跳跃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:24:08.700

实际上你可以用谷歌搜索“并排配置不正确”，你会发现很多提示可能是什么原因。但是...首先尝试一下：在 VS 中，项目设置，C/C++，代码生成：将“运行时库”设置为“多线程”（或“多线程调试”。（顺便说一句：你需要通用语言运行时支持？）

# c# - 为什么不是所有语言的星期几都采用长日期格式？

> ID：10911100
> 
> 赞同：0
> 
> 时间：2012-06-06T08:58:11.100
> 
> 标签：c#, .net, date-format

我们已经用于`date.ToString ("D")`格式化日期。但是当我们将应用程序全球化到其他语言时，我们会遇到问题。当我们使用长日期格式时，我们预计星期几会出现，但对于所有语言来说，它并不是这样。根据[http://www.basicdatepicker.com/samples/cultureinfo.aspx](http://www.basicdatepicker.com/samples/cultureinfo.aspx)，对于长日期格式，它远非所有每周打印一天的语言。我们应该如何格式化日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:03:14.443

如果您需要明确的格式，请像这样指定它；

```
DateTime date = DateTime.Now;
string s = date.ToString("dddd, dd MMMM yyyy"); 
```

根据 MSDN doco，“D”格式说明符受日历的影响，日历是特定于文化的。

在国际化时，您不应该对字符串格式或日期显示做出假设。

# c++ - 对象在方法激活时有两个不同的实例

> ID：10911102
> 
> 赞同：1
> 
> 时间：2012-06-06T08:58:14.587
> 
> 标签：c++, visual-studio-2010, debugging

标题不是很清楚，如果有人有更好的建议，请告诉我。现在开始工作：我正在激活一个类的方法。

```
m_someObject.Clear(); 
```

问题是，当我查看`m_someObject`调用之前的地址时，我得到它位于某个地址中，而当我`Clear`使用调试器输入方法时，我得到该`this`变量位于另一个地址中。结果是从`Clear`方法返回后，它似乎没有影响
`m_someObject`调用它的实例。有谁知道什么会导致这种行为？使用 Microsoft Visual Studio 2010 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:56:27.433

好吧，显然调试器在撒谎。我不知道这一点，但显然有些代码是在发布模式下编译的。结论 - 调试器不，printf - 是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:28:13.787

最常见的原因是多重继承。与 C# 和 Java 不同，在 C++ 中，一个类可以有多个基类。显然，并非所有都可以位于偏移量 0。这意味着`this`如果您使用位于非零偏移量的基类中的方法，则必须进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:48:04.953

你能检查一下你是否有两个同名的不同变量吗？一个定义在直接范围内，另一个定义在全局范围内？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T09:10:05.517

可能您将`m_someObject`值作为值传递给其他函数（从而获得副本）并`Clear()`仅在副本上执行。这样您就不会注意到原始对象的变化。

# javascript - 用jquery计算隐藏字段

> ID：10911103
> 
> 赞同：0
> 
> 时间：2012-06-06T08:58:16.590
> 
> 标签：javascript, jquery

`GrandTotal`我有一个表格，我试图根据 2 个下拉菜单计算一些货币价值，然后在一个名为只读的文本框中仅显示总额。

页面加载并从数据库获取定价数据到隐藏字段。

> InitialPrice = 660（强制）
> 
> EQup1Price = 550
> 
> EQup2Price = 440

2 下拉菜单 (EQup1, EQup2) 值 1-5。

购买大于 1 并免费获得 EQup1 和 EQup2。

计算是我在做什么。

```
 <p>InitialPrice -: <strong>$660.00</strong></p>
 <form name="Edit" method="post" action="mypageprocess">
<p><label for="EQup1">How many Branches?</label><br /><select name="EQup1" onblur="calc(this.form)" id="EQup1"/>    
        <option value="0">Please select</option> 
        <option value="1" >One</option>
        <option value="2" >Two</option>
        <option value="3" >Three</option>
        <option value="4" >Four</option>
        <option value="5" >Five</option>
        </select> &nbsp;&nbsp; x <strong>$550.00</strong>
</p> 

<p><label for="EQup2">How many Satellits?</label><br /><select name="EQup2" onblur="calc(this.form)" id="EQup2"/>    
        <option value="0">Please select</option> 
        <option value="1" >One</option>
        <option value="2" >Two</option>
        <option value="3" >Three</option>
        <option value="4" >Four</option>
        <option value="5" >Five</option>
        </select> &nbsp;&nbsp; x <strong>$440.00 </strong>
</p> 

<input type="text" onfocus="this.blur();" name="GrandTotal" size="10" readonly="readonly"/>

        <input type="hidden" name="InitialPrice" value="660" />
        <input type="hidden" name="EQup1Price" value="550" />
        <input type="hidden" name="EQup2Price" value="440" />
     </form>

        <script>
          function calc(theForm) {
          // console.log("calc(theForm)");

        var myEquip1 = document.Edit.EQup1.value;
        var myEquip2 = document.Edit.EQup2.value;
        Var myFixedPrice = document.Edit.InitialPrice.value;

Var myEquip1Price = document.Edit.EQup1Price.value;
Var myEquip2Price = document.Edit.EQup2Price.value;

    if  (myEquip1 > 1)
{
    var myEquip1Total = (myEquip1*myEquip1Price) - (myEquip1Price)

}
else
 {
    var myEquip1Total = (myEquip1*myEquip1Price) - (myEquip1Price)

}

    if  (myEquip2 > 1)
{
    var myEquip2Total = (myEquip2*myEquip2Price) - (myEquip2Price)

}
else
 {
    var myEquip2Total = (myEquip2*myEquip2Price) - (myEquip2Price)

}

    theForm.GrandTotal.value = (myEquip2Total + myEquip1Total + myFixedPrice)
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:00:50.477

计算 jquery 中的隐藏字段

`$(":hidden").length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:08:05.497

```
$("#GrandTotal").val(Number($("#EQup1").val()) + Number($("#EQup1").val())); 
```

# sql-server - 递归 CTE 和性能问题 - 递归太慢

> ID：10911104
> 
> 赞同：0
> 
> 时间：2012-06-06T08:58:17.343
> 
> 标签：sql-server, sql-server-2005

我有一个具有父子关系的树结构表。有 1 根行，总共 13853 行。

在一种形式中，我选择了层次结构中的一个节点，并且它下面的所有节点都被认为是选中的。一些用户选择顶部根节点，因此所有 13852 行都被认为是选中的。

现在，当我运行递归查询来获取所有选定的节点时，它只是在杀死数据库。我想知道，是否可以将分页/限制功能应用于递归 CTE？

# c++ - 编译器是否假定私有 const 成员*从不*改变？

> ID：10911107
> 
> 赞同：1
> 
> 时间：2012-06-06T08:58:22.003
> 
> 标签：c++, optimization, constants, volatile

```
class A{
    const size_t number;
public:
    A(size_t number): number(number) {}
    void f(){
        //read number, possibly save in CPU register
        //call a function that the compiler can't inspect
        //    so it should assume that anything in the program state changed
        //read number again
    } 
```

在那里，它`number`再次读取，编译器（如果优化已开启）是否仍会假设它不能更改，因为它是`const`，因此从 CPU 寄存器中读取标志，如果它之前放置在其中之一中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:10:24.083

答案是它取决于特定编译器的实现细节。
const 正确性的主要目的是防止自己犯诚实的错误并编写更直观且易于维护的代码。
编译器优化应该（*几乎*）永远不会成为制作东西的标准`const`。

一个好的编译器可能会应用其优化并内联`const`变量，而其他编译器可能不会。
某些因素，例如`const`变量的地址是否被取到某处，也可能会影响编译器处理它的方式。

最后也是最重要的，无论编译器如何处理它，一旦你声明了一个变量`const`，你的代码应该***总是***假设它是 const，它永远不应该被修改，用任何黑客修改它都会导致未定义的行为。

# objective-c - Objective-C：除第一个字符外，小写 NSString？

> ID：10911114
> 
> 赞同：0
> 
> 时间：2012-06-06T08:58:55.873
> 
> 标签：objective-c, nsstring, uppercase, lowercase

是否有一个 Obj-C 函数可以将第一个字符大写而其他字符小写？

感谢您的建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:01:01.107

确实是的：

```
[myString capitalizedString]; 
```

（请注意，这会将句子中的每个单词大写（即“hello there”->“Hello There”）又名“Title Case”）

# r - 在不知道它们距离的情况下对 r 中的网络节点进行聚类

> ID：10911115
> 
> 赞同：0
> 
> 时间：2012-06-06T08:58:57.193
> 
> 标签：r, networking

我有一个网络。其中节点连接如下：

```
A-B
B-C
A-C
B-D
E-F
F-G
H-G
H-E 
```

我希望它们像 ABCD 和 EFGH 一样聚集在一起。有没有办法在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:00:38.503

这被称为图形的“连接组件”，并且存在于`igraph`包中。

这是文档：

[http://igraph.sourceforge.net/doc/R/clusters.html](http://igraph.sourceforge.net/doc/R/clusters.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:27:57.467

以为我会拼凑一个直接的解决方案来提供有用的比较（并练习我的编码 - 欢迎所有指针......）

```
## initial link data frame (with start and end points)
link=data.frame(st=c("A","B","A","B","E","F","H","H"),
                end=c("B","C","C","D","F","G","G","E"),
                stringsAsFactors=FALSE)

## form blank list where clusters will build up (works up 
## to n=26!)
n=nrow(link)
L=c(); for (j in seq_len(n)) {L=c(L,list(NULL))}
names(L)=LETTERS[seq_len(n)]

## for each link in turn, pull together a collection of
## everything in the same cluster as either end, and update
## all relevant entries in L
for (j in seq_len(n)) {
    clus=sort(unique(c(link$st[j],link$end[j],
                       L[[link$st[j]]],L[[link$end[j]]])))
    for (k in clus) {L[[k]]=clus}
}
print(L) 
```

正如预期的那样，输出是：

```
$A
[1] "A" "B" "C" "D"

$B
[1] "A" "B" "C" "D"

$C
[1] "A" "B" "C" "D"

$D
[1] "A" "B" "C" "D"

$E
[1] "E" "F" "G" "H"

$F
[1] "E" "F" "G" "H"

$G
[1] "E" "F" "G" "H"

$H
[1] "E" "F" "G" "H" 
```

# java - GWT 中的请求间信令

> ID：10911116
> 
> 赞同：0
> 
> 时间：2012-06-06T08:58:57.980
> 
> 标签：java, google-app-engine, gwt, dropbox, gwt-rpc

我目前正在开发一个使用 Java Dropbox API 的 GWT/AppEngine 应用程序。为了与我的用户的 Dropbox 帐户配对，我基本上恢复了 Dropbox 网站的 URL，我需要将我的用户转发到以授权我的应用程序；然后 Dropbox 网站将我的用户重定向到我选择的回调 URL。

所以我有我的 GWT 应用程序在新窗口/iframe 中打开这个网站。但是我希望能够检查用户何时授权我的应用程序。所以我正在考虑启动一个 GWT 请求，该请求只会在访问回调 URL 时终止（可以由特定的 servlet 处理）。

那有意义吗？这样做的“好方法”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:14:29.603

App Engine 前端请求的截止日期为 60 秒，因此这不是首选解决方案。

如果您真的想在新窗口/框架中执行授权流程，您可以考虑在处理回调 URL 的 servlet 和使用 JavaScript 的主应用程序之间进行通信。

或者，您可以将用户重定向到 Dropbox 授权 url，并将回调 url 设置为您的主应用程序窗口。

# objective-c - 当调试器设置为 LLDB 时，Xcode 4 挂起附加到（应用程序名称）

> ID：10911117
> 
> 赞同：6
> 
> 时间：2012-06-06T08:59:09.890
> 
> 标签：objective-c, ios, xcode, lldb

当我在模拟器中运行应用程序时，Xcode 会挂在 Attaching to (App name) 上，但这仅在调试器设置为 LLDB 时才会发生。当调试器设置为 GDB（产品-> 编辑方案 -> 运行 -> 调试器）时，应用程序运行良好我如何解决这个问题以使用 LLDB 进行调试，而 Xcode 不会挂在附加到（应用程序名称）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:10:18.207

我有同样的问题，并按照这些说明解决了[为什么 LLDB 调试器总是无法附加？](https://stackoverflow.com/questions/15174282/why-does-the-lldb-debugger-constantly-fail-to-attach)我刚刚在 /etc/hosts 中添加了一个条目，将 localhost 翻译为 127.0.0.1 并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T04:19:55.730

我发现当调试器设置为 LLDB 时，Xcode 需要访问 localhost。因此，当您的主机文件未正确配置时，您将始终收到“无法附加到进程 ID xxxx”错误。这是诀窍：

*   试试`$sudo file /etc/hosts`。如果输出为`/etc/hosts: ASCII English text, with CRLF line terminators`，则需要将其文件格式更改为 UNIX 格式。有很多方法可以实现这一目标。我的偏好是：

    *   通过打开主机文件`$sudo vim /etc/hosts`。
    *   `:set ff=unix`输入 vim 命令行模式并通过键入并返回来更改文件格式。
    *   确保您的主机文件包含这样的行：`127.0.0.1 localhost`
    *   `:wq`输入并返回保存并退出。

    现在再试`$sudo file /etc/hosts`一次，你会得到`/etc/hosts: ASCII English text`.

*   更改 hosts 文件的权限。`$sudo chmod 644 /etc/hosts`
*   完成上述所有操作后，尝试这样做，您会得到类似而不是错误的`$ping localhost`响应。`64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.037 ms``ping: cannot resolve localhost: Unknown host`
*   重新启动您的 Xcode 和模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T19:27:17.487

这是一个非常简单的步骤......对我来说这是一个大问题，因为我每次都被困在“附加到 myApp”中，而且 Xcode 也会变得无响应。

在菜单栏中的产品下，转到方案并单击“编辑方案”。将打开一个框，并在信息选项卡下将每个项目的“调试器”从 LLDB 更改为**GDB**。每次都为我工作！希望这个答案可以结束每个人对这个问题的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-08T11:01:32.220

打开终端并输入以下命令。

```
 sudo nano /private/etc/hosts 
```

按回车。然后它会询问你的mac密码。输入密码后。

GNU nano 2.0.6 文件：/private/etc/hosts

## # Host Database # # localhost 用于在系统启动时配置环回接口#。不要更改此条目。##

127.0.0.1 本地主机

255.255.255.255 广播主机

::1 本地主机

fe80::1%lo0 本地主机

完成更改后，按 Control-X 退出编辑器，按 Y 保存，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T10:37:38.550

我发现这种情况时有发生，但通常重新启动模拟器或设备，重新启动 XCode 并清理您的派生数据目录就可以了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-21T23:35:20.977

Xcode 4.5.x 为我破坏了 lldb（所以改用 gdb）和 git（改用 SourceTree），当升级到 XCode 4.6.2 时它们神奇地解决了

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-19T09:21:41.200

Updating to latest OS available resolves the issue. In my case I was using Yosemite 10.10.5 and I updated it to El Capitan 10.11.1. Then I launched Xcode 7.0.1, additional components got installed for xcode and the issue got resolved.

I believe the additional components for xcode were missing. Or may be force update of OS was required for Xcode and Simulator to work properly

# ruby-on-rails-3 - 在顶部显示 simple_form 错误消息

> ID：10911121
> 
> 赞同：17
> 
> 时间：2012-06-06T08:59:18.403
> 
> 标签：ruby-on-rails-3, simple-form, formbuilder

我有以下两种_forms：

**用户表单**

```
<%= simple_form_for(@user, :url => @target) do |f| %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.input :email, :label => "User Email" %>
  <%= f.input :password, :label => "User Password" %>
  <%= f.input :first_name %>
  <%= f.input :last_name %>
  <%= f.button :submit %>
<% end %> 
```

**租户表格**

```
<%= simple_form_for(@tenant, :url => @target) do |f| %>
  <% if @tenant.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@tenant.errors.count, "error") %> prohibited this tenant from being saved:</h2>

      <ul>
      <% @tenant.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.input :name, :label => 'Name', :required => true %>
  <%= f.input :billing_email, :label => 'Email', :required => true %>
  <%= f.input :country, :label => 'Country', :required => true %>
  <%= f.button :submit %>
<% end %> 
```

我从[Rails 3.0 中的 stackoverflow f.error_messages 中看到以下帖子](https://stackoverflow.com/questions/3873190/f-error-messages-in-rails-3-0)

这里有一种方法，可以使用 f.error_messages 从简单的表单中返回错误消息，但我无法使其正常工作，因为我不确定该方法应该保存在哪里。有人有任何提示吗？方法如下：

```
class StandardBuilder < ActionView::Helpers::FormBuilder
  def error_messages
    return unless object.respond_to?(:errors) && object.errors.any?

    errors_list = ""
    errors_list << @template.content_tag(:span, "There are errors!", :class => "title-error")
    errors_list << object.errors.full_messages.map { |message| @template.content_tag(:li, message) }.join("\n")

    @template.content_tag(:ul, errors_list.html_safe, :class => "error-recap round-border")
  end
end 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-01T20:40:20.173

只需将 error: false 添加到您的输入中，这不会清除 CSS，但会清除内联错误

```
f.input error: false or :error => false 
```

编辑：

来自[http://ruby.railstutorial.org/book/ruby-on-rails-tutorial](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial)

/app/views/shared/_error_messages.html.erb

```
 <% if object.errors.any? %>
  <div id="error_explanation">
   <div class="alert alert-error">
     The form contains <%= pluralize(object.errors.count, "error") %>.
   </div>
  <ul>
   <% object.errors.full_messages.each do |msg| %>
    <li>* <%= msg %></li>
   <% end %>
 </ul>
</div>
<% end %> 
```

在视图中

```
<%= form_for(@user) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>

  <%= f.label :name %>
  <%= f.text_field :name %>

  <%= f.label :email %>
  <%= f.text_field :email %>

  <%= f.label :password %>
  <%= f.password_field :password %>

  <%= f.label :password_confirmation, "Confirmation" %>
  <%= f.password_field :password_confirmation %>

  <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
<% end %> 
```

# javascript - 数据表：禁用第一个下一个前一个最后一个并在处理时显示/搜索记录

> ID：10911122
> 
> 赞同：3
> 
> 时间：2012-06-06T08:59:18.603
> 
> 标签：javascript, datatables

我正在使用 Datatables 1.9 版本

```
var oTable = $('#example').dataTable( {
        "oLanguage": {"sSearch": "Search all columns:",
                      "sLengthMenu": "Display <select><option value='100'>100</option><option value='200'>200</option></select> records per page"
                     },
        "sPaginationType": "full_numbers",
        "bAutoWidth": false,
        "iDisplayStart": 0,
        "iDisplayLength": 2000,
        "bFilter": true,
        "bInfo": true,
        "bSort": true,
        "sScrollX": "100%",
        "sScrollY": "500px",
        "bScrollCollapse": true,
        "bPaginate": true,
        "bSortClasses": true,
        "bLengthChange": true,
        "bProcessing": true,
        "bDestroy": true,
        "bServerSide": true,
        "bDeferRender": true,
        "fnServerParams": function ( aoData ) {
                aoData.push( { "name": "form_data", "value": data } );
        },
        "sAjaxSource": "search.py",
        "fnServerData": function ( sSource, aoData, fnCallback ) {
                $.ajax( {
                                "dataType": 'json',
                                "type": "POST",
                                "url": sSource,
                                "data": aoData,
                                "success": function (json)
                                {
                                        fnCallback(json);
                                        $('html, body').animate({scrollTop:$(document).height()}, 'slow');
                                        document.getElementById("bottom").focus();
                                },
                                "error": function (xhr, error, thrown) {
                                        alert("An Error Occurred.!");
                                }
                }); 
```

问题是，当我运行搜索并且数据表呈现“正在处理...”文本时，“显示..搜索”和第一个下一个上一个和最后一个按钮也会显示。当数据表已处理或收到来自后端的响应时，有没有一种方法可以延迟显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-21T10:21:05.877

您应该包含`"bPaginate": false,`在您传递给构造函数参数的配置对象中。

[如此处](http://datatables.net/release-datatables/examples/basic_init/filter_only.html)所见。因为它是数据表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:48:27.030

我没有完全理解你的问题。如果你想隐藏这些控件，你可以试试这个..

Datatables 带有用于过滤和分页的控件。这些可以通过几种方式显示和隐藏（coffeescript 中的所有示例）：方式 1

```
$("#myTable").dataTable
"bPaginate": false, #hide pagination control
"bFilter": false #hide filter control 
```

方式 2：使用“sDom”道具

```
$("#myTable").dataTable
"aaData": data
"sDom": 'ft' 
```

这里的“f”表示过滤器，“t”表示表格，所以只显示那些。顺序很重要：'ft' 将过滤器置于顶部，而 'tf' 将其置于底部。

对于更复杂和其他小部件，请参阅参考参考：[http ://datatables.net/usage/options#sDom](http://datatables.net/usage/options#sDom)

我从这个链接得到了答案：[https ://gist.github.com/1568446](https://gist.github.com/1568446)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-06T07:50:10.830

```
//Hide DataTables Length
<style>.dataTables_length {
  display: none;
}

</style> //Hide Pagination
<style>.pagination {
  display: none;
}

</style> //Hide DataTables Info
<style>.dataTables_info {
  display: none;
}

</style>
```

这会起作用，但我不推荐这个

# c# - XML 文档创建

> ID：10911124
> 
> 赞同：1
> 
> 时间：2012-06-06T08:59:23.440
> 
> 标签：c#, .net, xml

我想创建一个具有以下格式的 xml 文件，

```
<myFiles>
  <name>myname</name>
  <place>myplace</place>
  <mydata>
     <today>1-1-2011</today>
     <time>1 PM</time>
     <driving>
       <car>audi</car>
       <bus>volvo</bus>
     </driving>
  </mydata>
</myFiles> 
```

我有 2 个选择

1.  使用模型类构建 xml
2.  使用字典存储详细信息，然后从该字典构建 json

哪个是最好的选择，或任何其他可用的方法？这是一个很大的文档，可能有超过 100 个用户的数据。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:02:25.833

从代码可维护性的角度来看，使用模型类的选项一似乎更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:02:58.907

最灵活和性能优化的方式是使用[`XmlWriter`](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx).

# svn - 合并两个分支中的差异

> ID：10911127
> 
> 赞同：0
> 
> 时间：2012-06-06T08:59:37.560
> 
> 标签：svn

我有两个来自主干的分支，它们分别维护了一年多，比如分支 A 和 B。现在我必须将一个合并到另一个中。我想要的是比较两者的变化，然后比较新的变化，进入合并的分支。

我过去使用过 SVN 合并，但我理解它的方式是它将一个分支中的“差异”应用到另一个分支。我不想要所有的差异——只有更新的。

是否可以在 SVN 中执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:25:24.487

Merge 进行 3 路合并。这是一个标准算法，其工作原理如下：

*   找到最近的共同祖先，或简称为基础，修订。这是创建分支之前的修订版，或者是从一个版本合并到另一个版本的最后一个修订版。
*   对于在“我的”（您已签出的内容）中与“基本”相同但在“他们的”（合并的参数）中不同的每一行，该行从“他们的”中使用。
*   对于 'theirs' 中与 'base' 相同的每一行，使用本地版本（包括它没有从 base 更改的情况）。
*   对于“我的”和“他们的”中相同的每一行，无论“基础”是什么，都使用该版本。
*   对于“base”、“mine”和“theirs”三者中不同的每一行，都存在冲突，您必须手动解决它。

因此，这将应用来自两个分支的所有更改。如果双方都进行了相同的更改，则应用它。如果相同的代码以不同的方式更改，那就是冲突，您必须解决它。而且您不会看到它来自哪个特定的修订版，它们都汇总在一起。

现在，如果这不是您想要的，另一种选择是手动列出要合并的修订。这只会应用在那些特定修订中所做的更改，一次每个连续范围（算法实际上是相同的，但基础是所选范围开始之前的修订）。这意味着您必须亲自挑选您想要的更改。这种方法有两个问题：工作量很大，而且您必须小心选择所有需要的更改才能使以后的更改生效。

现在你想要所有“更新”的变化。您必须以计算机可以理解的方式定义哪些含义。你必须小心上面的第二个问题——这些变化可能相互依赖，你也必须选择依赖的变化。

# actionscript-3 - 滚动条未显示 Flex 4 与 VGroup

> ID：10911128
> 
> 赞同：0
> 
> 时间：2012-06-06T08:59:41.887
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5, scroller

我正在创建一个应用程序。在那有一个弹出窗口，因为我在一个 Scroller 中使用了一个 VGroup。

我在 VGroup 中动态添加我的自定义组件，并在弹出窗口关闭时删除所有组件，并将这些组件保存在内存池中。

在第一步中，我通过出现滚动条打开一个包含组件数量的弹出窗口。然后我关闭弹出窗口。

在第二步中，我打开了一个包含更少组件的相同弹出实例，因此不会出现滚动条并关闭弹出窗口。

现在，当我再次打开带有更多组件的弹出窗口时，不会出现滚动条。因此，每当弹出窗口打开时组件较少时，滚动条就会消失。

请帮助我...

这是完整的代码：

```
<s:Scroller id="myScroller"
        width="100%"
        height="210"
        horizontalScrollPolicy="off">
    <s:VGroup id="myContainer"
         width="100%"
         height="210" />
</s:Scroller> 
```

添加组件的代码：

```
for each(var object:MyObject in _arr)
{
    var newView:MyCustomView = MyCustomViewPool.acquire();
    myContainer.addElementAt(newView, 0);
    newView.myData = object;
} 
```

这是删除组件的代码：

```
for(var i:int = 0; i < myContainer.numElements; i++)
{
    var newViewElement:IVisualElement = myContainer.getElementAt(i);
    var myViewComponent:MyCustomView = newViewElement as MyCustomView;
    MyCustomViewPool.release(myViewComponent);

}
myContainer.removeAllElements(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:02:58.897

我认为您不必在 VGroup 上设置高度。只需删除分配。

# html - 使用 Pythonic 对空格的尊重编译为 HTML

> ID：10911131
> 
> 赞同：0
> 
> 时间：2012-06-06T08:59:57.300
> 
> 标签：html

几天前，我遇到的一个人向我展示了这种编译为 HTML 的语言，其编译方式与 Coffeescript 编译 Javascript 的方式相同，但这种语言对空格的尊重程度与 Python 相同，尽管它是针对 HTML 的。

我看到的代码示例如下所示：

```
- html
    - head
        - title
            This is the title.
    - body
        - h1 
```

等等

有谁知道它可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:56:33.637

可能是[玉](http://jade-lang.com/)？

他们网站上的例子是：

```
doctype 5
html(lang="en")
  head
    title= pageTitle
    script(type='text/javascript')
      if (foo) {
         bar()
      }
  body
    h1 Jade - node template engine
    #container
      if youAreUsingJade
        p You are amazing
      else
        p Get on it! 
```

变成：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Jade</title>
    <script type="text/javascript">
      if (foo) {
        bar()
      }
    </script>
  </head>
  <body>
    <h1>Jade - node template engine</h1>
    <div id="container">
      <p>You are amazing</p>
    </div>
  </body>
</html> 
```

# xpath - Selenium WebDriver 和 xpath：更复杂的选择

> ID：10911136
> 
> 赞同：0
> 
> 时间：2012-06-06T09:00:21.287
> 
> 标签：xpath, selenium, webdriver

所以假设我的结构在某些时候看起来像这样：

```
..........
<td>
  [...]
  <input value="abcabc">
  [...]
</td>
[...]
<td></td>
[...]
<td>
  <input id="booboobooboo01">
  <div></div> <=======I want to click this!
</td>
......... 
```

我需要单击该 div，但我需要确保它与包含输入的 td 位于同一行`value="abcabc"`。我也知道我需要单击的 div（它没有 id 或我可以使用的任何其他相关属性）位于与第一个 td 相同级别的 td 中，紧随 id CONTAINING "boo" 的输入之后（动态生成的，我只知道id的根部分）。td 不包含我可以使用的任何相关内容。就 xpath 而言，这是我尝试过的：

```
//input[@value='abcabc']/../td/input[contains(@id,'boo')]/following-sibling::div

//input[@value='abcabc']/..//td/input[contains(@id,'boo')]/following-sibling::div 
```

当然，它们都不起作用（找不到元素）。我想知道是否有选择该 div 的方法以及如何选择。

**编辑：`//input[@value='abcabc']/../../td/input[contains(@id,'boo')]/following-sibling::div`是正确的方法。这是由接受了答案的人提出的。另请注意，他提供了一种略有不同的方法。有关详细信息，请参阅他的答案。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:20:21.743

尝试

```
//input[@value='abcabc']/ancestor::tr[1]/td/input[contains(@id,'boo')]/following-sibling::div[1] 
```

请注意，`//input[@value='abcabc']/..`仅适用于 parent `<td>`，这就是您的不起作用的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:23:27.563

另一个可能有效的 XPath 更简单一些：

```
//input[@id='booboobooboo01']/../div[1] 
```

# hadoop - Hbase 0.92.1 二级索引示例

> ID：10911140
> 
> 赞同：2
> 
> 时间：2012-06-06T09:00:40.717
> 
> 标签：hadoop, hbase, hdfs

我正在处理 hbase 0.92.1 中的百万行和列。现在，我想知道如何使用协处理器创建二级索引。为此给出一些示例程序。
请提供支持 hbase 0.92.1 的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:07:59.013

使用 HBase 进行二级索引没有单一的好方法。您解决问题的方式将取决于您的数据和用例。关于二级索引的一些很好的讨论位于[此处](http://hbase.apache.org/book/secondary.indexes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:31:14.270

据我所知，在 0.20 之前，在 Hbase API 中，您将拥有仍然可写的 HTableDescriptor，因此您可以调用 HtabelDescriptor.addIndex() 来针对列创建索引。示例可以在[这里](http://blog.rajeevsharma.in/2009/06/secondary-indexes-in-hbase.html)找到。

然后索引开始移动到 IHbase，请参阅[此处](https://issues.apache.org/jira/browse/HBASE-2037)的 Jira 故事。

要回答您的问题，在 0.92.1 中，我认为还没有任何现成的东西**，**您必须自己编写协处理器，但是[协处理器二级索引](https://issues.apache.org/jira/browse/HBASE-3340)有一个 jira 故事，您可能想观看进度： )

同时您可以[在这里](https://github.com/ykulbak/ihbase/wiki/Getting-Started)尝试 idxColumnDescriptor ，同时查看测试[TestIdxColumnDescriptor.java](https://github.com/ykulbak/ihbase/blob/master/src/test/java/org/apache/hadoop/hbase/client/idx/TestIdxColumnDescriptor.java)可能会有所帮助。

# android - 如何在android中摇晃的设备上完成一项活动

> ID：10911141
> 
> 赞同：0
> 
> 时间：2012-06-06T09:00:42.433
> 
> 标签：android, android-activity, accelerometer, shake, activity-finish

我只想在我摇动设备 2 秒时完成当前活动。我该怎么做？谁能指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:04:51.243

```
public class YourActivity extends Activity implements SensorEventListener
{
   onCreate()...

   public void onSensorChanged(SensorEvent event)
   {
     if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
     {
        // your code here
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:03:38.827

您需要使用[SensorEventListener](http://developer.android.com/reference/android/hardware/SensorEventListener.html)。这里有一些[示例代码](https://stackoverflow.com/questions/2317428/android-i-want-to-shake-it)可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:51:24.853

在`while`循环中，接收您的传感器数据并确定您是否处于摇动序列的中间。如果是这样，您可以保留一个时间戳变量并拉取事件时间戳，以便执行此操作，直到 2 秒过去。

@gtumca-MAC 向您展示了如何使用传感器事件，只需查看 Google API 文档以获取更多详细信息，它的解释非常好。

# mysql - 连接两个表（其中一个是另一个的一部分）

> ID：10911142
> 
> 赞同：0
> 
> 时间：2012-06-06T09:00:45.163
> 
> 标签：mysql, join

我有两个表 Table_A 和 Table_B ，我想加入这些表来选择 Table_c 作为结果：

表_A：

```
+-----------+-----------+---------+
| tableA_id | tableB_id | v_id    |
+-----------+-----------+---------+
| 1         | 2         | 27      |
| 2         | 3         | 27      |
| 3         | 3         | 28      |
| 4         | 1         | 26      |
| 5         | 2         | 26      |
| 6         | 3         | 26      |
| 7         | 1         | 24      |
| 8         | 1         | 25      |
+-----------+-----------+---------+ 
```

表_B：

```
+-----------+-----------+
| tableB_id | s_name    | 
+-----------+-----------+
| 1         | s1        |
| 2         | s2        | 
| 3         | s3        | 
+-----------+-----------+ 
```

表_c：

```
+-----------+-----------+-----------++--------+
| tableB_id | s_name    | tableA_id | v_id    |
+-----------+-----------+-----------+---------+
| 1         | s1        | null      | null    |
| 2         | s2        | 1         | 27      | 
| 3         | s3        | 2         | 27      |
+-----------+-----------+-----------+---------+ 
```

我尝试了不同的查询，但无法达到所需的输出。这是 MYSQL 查询：*编辑：反转表顺序。

```
SELECT s.tableB_id, s.s_name, v.tableA_id, v.v_id
FROM Table_B  as s 
left OUTER JOIN Table_A  as v
ON v.v_id=27 
```

**编辑：** 结果应该是左侧的所有 Table_B 数据，并分配给它 table_A 数据（如果有）或使其为空。我怎么能做这个？

**最后编辑：** 这是我想出的解决方案：

```
SELECT s.tableB_id , s.s_name, v.tableA_id, v.v_id
FROM Table_B s , Table_A v
WHERE v.v_id=27 AND v.tableB_id = s.tableB_id 

UNION

SeLECT s.tableB_id , s.s_name, null as tableA_id, null as v_id
FROM Table_B s
WHERE s.tableB_id NOT IN (SELECT s.tableB_id 
FROM Table_B s , Table_A v
WHERE v.v_id=27 AND v.tableB_id = s.tableB_id ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:06:31.977

你可以试试：

```
SELECT tb.tableB_id, tb.s_name, ta.tableA_id, ta.v_id
FROM Table_B tb LEFT JOIN Table_A ta
  ON tb.tableB_id = ta.tableB_id 
```

要仅选择一个，您可以使用：

```
SELECT tb.tableB_id, tb.s_name, ta.tableA_id, ta.v_id
FROM Table_B tb LEFT JOIN 
(SELECT * FROM Table_A 
 WHERE v_id = 27) ta
  ON tb.tableB_id = ta.tableB_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:07:19.650

```
SELECT distinct s.tableB_id, s.s_name, v.tableA_id, v.v_id
 FROM Table_A as v 
 left OUTER JOIN Table_B as s
 ON v.tableB_id =s.tableB_id and v.v_id = 27; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:08:57.623

完全使用这个查询希望你能得到结果

```
SELECT s.tableB_id, s.s_name, v.tableA_id, v.v_id
FROM Table_A as v 
left OUTER JOIN Table_B as s ON s.tableB_id=v.tableB_id
WHERE v.v_id=27 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T09:17:09.150

颠倒顺序，将其`b LEFT JOIN a`添加到公共列 ( `tableB_id`) 中：

```
SELECT s.tableB_id, s.s_name, v.tableA_id, v.v_id
FROM Table_B as s
  LEFT OUTER JOIN Table_A as v 
    ON  v.tableB_id = s.tableB_id
    AND v.v_id=27 ; 
```

# mysql - 限制表格行

> ID：10911145
> 
> 赞同：0
> 
> 时间：2012-06-06T09:00:54.103
> 
> 标签：mysql

如何在 MySQL 表中仅存储 10 行？添加新行时应删除旧行，但只有在表有 10 行时才删除。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:04:38.573

[您可以使用插入后](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)触发器来实现此目的，删除最小日期所在的行。例如 DELETE FROM myTable WHERE myTimestamp = (SELECT MIN(myTimestamp) FROM myTable) 但理论上可以删除多行，具体取决于更新的粒度。

你可以有一个递增的序列，并且总是删除那个序列的最小值。

问题是您为什么要这样做？这是一个有点不寻常的要求。

一个基本示例（未验证/执行，我在这台特定机器上没有 mySQL）看起来像。

```
CREATE TRIGGER CycleOldPasswords AFTER INSERT ON UserPasswords FOR EACH ROW

    set @mycount = SELECT COUNT(*) FROM UserPasswords up where up.UserId = NEW.UserId;

    if myCount >= 10 THEN
        DELETE FROM UserPasswords up where up.Timestamp = (SELECT min(upa Timestamp) FROM UserPasswords upa WHERE NEW.UserId = upa.UserId) AND NEW.UserId = up.UserId;
    END
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:05:29.010

您可以在插入第一行时检索最后插入的 id，并将其存储在变量中。当插入 10 行时，删除第一个插入记录的 id < id 的行。请尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:08:07.103

首先使用您的插入查询插入所有值，然后运行此查询

```
delete from table_name where (cond) order by id desc limit 10 
```

必须在一列中指定一个 ID 或时间

# c# - 如何使用 ROW_NUMBER 对 gridview 和 SQL 自定义查询进行分页

> ID：10911148
> 
> 赞同：1
> 
> 时间：2012-06-06T09:01:14.063
> 
> 标签：c#, asp.net, sql

我有一个执行自定义查询的页面，该查询保存在数据库的某个位置。我需要能够在 gridview 上启用分页。

例如，保存在数据库中的查询如下所示：

```
select * from requestbases 
```

这将返回 10,000 行。

使用下面的方法，我让它返回 10 行。

```
public DataTable GetGenericResults(string strsql, int pageIndex)
{
   StringBuilder sb = new StringBuilder();
   sb.Append("WITH MyPagedData as ( ");
   int indexFrom = strsql.IndexOf("from");
   sb.Append(strsql.Substring(0, indexFrom));
   sb.Append(", ");
   sb.Append("ROW_NUMBER() OVER(ORDER BY RequestBaseId DESC) as RowNum ");
   sb.Append(strsql.Substring(indexFrom));
   sb.Append(") ");
   sb.Append("SELECT * from MyPagedData where RowNum between @StartIndex and @StartIndex + 10");

   using(var connection = (SqlConnection)_context.Database.Connection)
   {
      var adapter = new SqlDataAdapter(sb.ToString(), connection);
      adapter.SelectCommand.Parameters.Add("@StartIndex", SqlDbType.Int).Value = pageIndex;
      var results = new DataSet();
      adapter.Fill(results, "Results");
      return results.Tables["Results"];
   }
} 
```

这是绑定网格的代码

```
var datatable = RequestBaseBL.GetGenericResults(query.QuerySql, 0);

if (datatable.Rows.Count > 0)
{
    LblCount.Text = datatable.Rows.Count + " records";
    PanelResults.Visible = true;
    GrvCustomResults.Visible = true;
    GrvCustomResults.DataSource = datatable;
    GrvCustomResults.DataBind();
} 
```

问题是查询本身返回 10 行，因此 gridview 永远不会显示寻呼机。

```
<asp:GridView ID="GrvCustomResults" runat="server" Visible="false" AutoGenerateColumns="true">
   <PagerSettings  
             Visible="true"  
             Position="TopAndBottom"  
             PreviousPageText="Previous"  
             NextPageText="Next"  
             Mode="NumericFirstLast" />  
   <HeaderStyle CssClass="gridheader" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:20:57.417

此代码在 aspx 页面中

```
<asp:Panel runat="server" id="pnlPager" CssClass="pager">
   </asp:Panel> 
```

这里将在.cs页面中使用的方法这是用于跟踪pagenum和pagesize的记录

```
 protected int PageNum
        {
            get { return Convert.ToInt16(ViewState["PageNum"]); }
            set { ViewState["PageNum"] = value; }
        }

        protected int PageSize
        {
            get { return Convert.ToInt16(ViewState["PageSize"]); }
            set { ViewState["PageSize"] = value; }
        }

protected int TotalRecord
    {
        get { return Convert.ToInt16(ViewState["TotalRecords"]); }
        set { ViewState["TotalRecords"] = value; }
    } 
```

这是用于调用将发送 pagenum 、页面大小的存储过程的方法

```
public DataSet GetCollegeSerachData(int PageNum,int PageSize,out int TotalRecords)
        {
            DS = new DataSet();
            ObjDataWrapper = new DataWrapper(ClsCommon.CnnString, CommandType.StoredProcedure);
            TotalRecords=0;
            ErrorCount = 0;
            Searchpattern = "";
            try
            {

                ObjDataWrapper.AddParameter("@PageNum", PageNum);
                ObjDataWrapper.AddParameter("@PageSize", PageSize);

                SqlParameter ObjTotalRecords=(SqlParameter)(ObjDataWrapper.AddParameter("@TotalRowsNum","",SqlDbType.Int,ParameterDirection.Output));

                DS=ObjDataWrapper.ExecuteDataSet("ADMJGetCollegeSearch");
               if(ObjTotalRecords.Value!= DBNull.Value || ObjTotalRecords!=null)
               {
                   TotalRecords=Convert.ToInt32(ObjTotalRecords.Value);
               }

            }
            catch (Exception Ex)
            {
                string err = Ex.Message;
                if (Ex.InnerException != null)
                {
                    err = err + " :: Inner Exception :- " + Ex.InnerException.Message;
                }
                string addInfo = "Error While Executing GetCollegeSerachData in ClsColleges:: -> ";
                ClsExceptionPublisher objPub = new ClsExceptionPublisher();
                objPub.Publish(err, addInfo);
            }
            return DS;
        } 
```

这将返回用于绑定存储过程的数据集

here the store procedure that will used for pagination

```
GO
/****** Object:  StoredProcedure [dbo].[ADMJGetCollegeSearch]    Script Date: 06/06/2012 15:43:29 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[ADMJGetCollegeListByState]
@PageNum int,
@PageSize int,
@TotalRowsNum int  output

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    WITH College_CollegeId As
    (
        SELECT 'RowNumber' = ROW_NUMBER() OVER(ORDER BY collegeid asc),College.*
        FROM College

    )

    -- Query result
    SELECT * 
    FROM College_CollegeId
    WHERE RowNumber BETWEEN (@PageNum - 1) * @PageSize + 1 AND @PageNum * @PageSize             
    ORDER BY collegename asc

    -- Returns total records number
    SELECT @TotalRowsNum = count(*) 
    FROM College

END 
```

at last you will bind the the gridview grdCourse.DataSource = DS.Tables[0]; grdCourse.DataBind(); grdCourse.Visible = true;

at the PageIndexChanging(object sender, GridViewPageEventArgs e) of the grid view you will pass the

```
protected void grdCourse_PageIndexChanging(object sender, GridViewPageEventArgs e)
        {
           Pagenum = e.NewPageIndex;

          --call this method public DataSet GetCollegeSerachData(int PageNum,int PageSize,out int TotalRecords)

        } 
```

# html - ipad中的html文本框

> ID：10911149
> 
> 赞同：0
> 
> 时间：2012-06-06T09:01:15.127
> 
> 标签：html, ipad

我的登录页面中有 html 文本框，该文本框在 ipad 中有顶部阴影。我怎样才能删除它？

这是我的代码：

```
<div style="width:205px; height:30px; float:left; background-color:transparent;">
<input name="UserNameBox" type="text"  id="tbEmail" style="margin-top:2px; outline-     style:none; -webkit-border: 0px none transparent; border:0px none transparent; font-size:1em; height:1.5em; background-color:transparent;" tabindex="1" runat="server" onkeydown="if (event.keyCode == 13) validateExample()"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:15:40.023

尝试这个

```
<div style="width:205px; height:30px; float:left; background-color:transparent;">
<input name="UserNameBox" type="text"  id="tbEmail" style="margin-top:2px; outline-     style:none; -webkit-border: 0px none transparent; border:0px none transparent; font-size:1em; height:1.5em; background-color:transparent;box-shadow: none !important;" tabindex="1" runat="server" onkeydown="if (event.keyCode == 13) validateExample()"/> 
```

# linux - 从原始套接字接收失败

> ID：10911154
> 
> 赞同：0
> 
> 时间：2012-06-06T09:01:35.220
> 
> 标签：linux, sockets

`enter code here`我正在尝试使用 inet6 系列从网络接口 usb0 读取路由器请求数据包我已经创建了原始套接字并将原始套接字绑定到 USB0 接口我正在尝试使用循环从接口读取数据

```
while(1)
{
int len = recvmsg(sockid,&msghdr,0)
if(len < 0)
{perror("received failed");
exit(1);
}
processmessage

} 
```

问题是我收到错误：收到失败的资源暂时无法使用

我想知道套接字仍然存在，接口存在并且绑定成功。错误的可能原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:24:23.173

如果 errno 是 EAGAIN 你可以重试 recvmsg 一段时间然后退出：

```
int retryCount = 0;
while(1) {
    int len = recvmsg(sockid,&msghdr,0)
    if (len < 0) {
        if ((errno == EAGAIN) && (++retryCount < 128))
            continue;

        perror("received failed");
        exit(1);
    }
    retryCount = 0;
    processmessage
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T08:25:30.253

首先你应该检查这个文件：

猫 /proc/sys/net/ipv6/conf/usb0/forwarding

确保或设置值 1：

echo "1" > /proc/sys/net/ipv6/conf/usb0/forwarding

确保 /proc/sys/net/ipv6/conf/default/forwarding 的值为 0，而内核不超过 2.6。

祝你好运！

# php - PHP 中 if ($variable) { ... } 的确切定义

> ID：10911170
> 
> 赞同：1
> 
> 时间：2012-06-06T09:02:42.690
> 
> 标签：php, if-statement, null, isset

这个结构在 PHP 中的确切定义是什么？

```
if ($variable) {
   ...
} 
```

这里检查什么：变量集？变量不为空？变量不为空？变量真/不假？官方文档很难找到这方面的信息，而且这些文档中有很多误导性的评论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T09:04:54.187

见这里： [http ://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

其他一切都将被认为是真实的，从而触发该语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T09:06:18.137

`if`条件总是归结为布尔比较。无论您提供什么表达式作为条件，它都必须归结为`true`or `false`。`if ($variable)`评估变量（松散地）是否等于`true`或`false`。查看[类型比较表](http://php.net/manual/en/types.comparisons.php)，了解哪些值算作什么。

# c - 一个 Socket 对象，用于在 c 中发送和接收

> ID：10911172
> 
> 赞同：0
> 
> 时间：2012-06-06T09:02:44.960
> 
> 标签：c

先生，

我想知道如何使用一个套接字对象来发送和接收数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:15:21.460

标准 C 没有套接字接口。

找到适用于您的操作系统（Posix、Windows、其他各种）的套接字接口。阅读文档。一旦你打开了套接字，就会有发送和接收数据的函数。

TCP 套接字表示双向通信通道，因此您可以在同一个套接字上同时使用这两个通道，而无需做任何特别的事情。如何实现这一点取决于中间网络，例如[物理层](http://en.wikipedia.org/wiki/Physical_layer)是全双工还是半双工。

请注意当其中一个阻塞时会发生什么——如果套接字的两端都在尝试写入，并且缓冲区在两个方向上都已满，那么您最终可能会陷入死锁，因为任何一方都无法再写入，直到另一方side 读取一些内容以在缓冲区中腾出空间。如果双方都被阻止读取并且没有人在写入，则会发生同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:15:40.687

当你想发送数据时，你调用 send(); 当你想接收数据时，你调用recv()。它真的没有比这更复杂。

如果您要询问通过网络传输数据的机制，我建议您阅读 Stevens 的网络书籍（并跳过 Beej 的指南，因为这是神圣的）。

# c# - 组织请求参数教程

> ID：10911176
> 
> 赞同：0
> 
> 时间：2012-06-06T09:02:53.463
> 
> 标签：c#, .net, dynamics-crm

关于如何使用 C# CRM SDK OrganizationRequest 参数集合的参数的好的教程/指南在哪里？

到目前为止，这是我的代码：

```
CrmConnection connection = CrmConnection.Parse("hidden");
OrganizationService service = new OrganizationService(connection);

OrganizationRequest request = new OrganizationRequest("requestname");
/* ... ? */ 
```

`request`当我执行它并`service`获得联系人数量时，我将如何修改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:26:37.787

根据[OrganizationRequest](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.organizationrequest_members)类的描述，它不是为直接使用这个类而设计的，但如果你愿意，你可以。

> 您可以使用此类，指定参数集合。但是，当您使用派生类时，会为您创建参数集合。

实际上，您不仅应该指定参数集合，还应该指定请求名称。[此处](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.organizationrequest.requestname)提供了可用请求名称的完整列表。根据您需要的请求名称，您应该指定适当的参数集合。实际上没有完整的参数收集参考。

另一个问题是如何检索联系人计数。在这里，您有两个选择。第一个与 OrganizationRequest 无关，但您必须使用组织上下文和 linq 查询。[此处](http://www.resultondemand.nl/support/sdk/43b26b09-636e-4781-8477-65454c4c5232.htm)描述了示例。另一种选择是使用[ExecuteFetch](http://msdn.microsoft.com/en-us/library/bb959412.aspx)消息请求名称。

# database-design - 针对特定用例的 MongoDB 模式设计

> ID：10911177
> 
> 赞同：2
> 
> 时间：2012-06-06T09:02:58.237
> 
> 标签：database-design, mongodb, web-applications

我现在正在为我的数据模式建模，我不确定我的思维过程是否有意义。所以我想我可以在这里问一些更有经验的 MongoDB 人：

* * *

让我们假设我的应用程序每天**最多生成 10.000 个事件文档**。我想**基于时间访问它们**。比如：“给我这三天的所有事件！”。

我在大学收集的 RDBMS 知识首先告诉我：“做一个事件集合，并为每个文档提供事件的属性‘日期’。完成。”

但后来我想到了**每天做一个收藏**的想法！然后我可以非常快速地访问这些事件，只需调用其对应的集合即可获取一天的所有事件。

这有意义吗？我可以在不牺牲速度/性能的情况下拥有成百上千的收藏吗？

* * *

谢谢你的建议:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:29:51.220

每天 10.000 份文件并不是很多。在一年的时间里，有 365 万份文档。这当然不是一个很小的集合，但我认为分解它们没有多大意义。

在这种特定情况下的缺点是

*   以后很难更改您的查询模式。如果你突然需要小时精度，你就有麻烦了。如果要查找去年的所有事件，其中某个字段 x 设置为 y，则必须查询 365 或 366 集合。
*   您的查询模式会更复杂，因为您必须处理不同的集合名称。此外，您需要多次往返数据库。
*   国际化非常复杂，因为“日”在全球范围内并不是一个明确定义的时间点。另一方面，如果需要，使用 UTC DateTime 字段可以让您在不同的时区进行查询。
*   管理大量集合可能很乏味，使用 shell 会很烦人。
*   分片通常基于每个集合执行。如果您有许多较小的集合，则无法进行自动分片。

然而，使用大量集合是可能的，尽管[您应该了解一些限制。](http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections)正如文档解释的那样，您可以拥有 12,000 个集合，每个集合具有一个索引，每个集合具有默认设置。有关详细信息，请参见那里。

Server Density 在博客上介绍了他们的方法，他们也使用[了很多集合](http://blog.serverdensity.com/2010/02/28/notes-from-a-production-mongodb-deployment/)，但是他们咀嚼了 650m 的文档，并且他们声称这在性能方面并没有太大的区别。

# mysql - MySQL 日期返回 NULL

> ID：10911184
> 
> 赞同：3
> 
> 时间：2012-06-06T09:03:25.857
> 
> 标签：mysql, date

我有以下表结构：

```
uid     | ... | created | ...
int(10) | ... | int(10) | ... 
```

`created`字段填充时间戳；这是查询的结果`SELECT created FROM mytable WHERE 1 LIMIT 5`：

```
created
----------
1308122243
1308122243
1308552690
1309247417
1309254571 
```

但是当我执行时`SELECT DATE(created) FROM mytable WHERE 1 LIMIT 5`，我得到了奇怪的 NULL：

```
DATE(created)
-------------
2013-08-12
2013-08-12
NULL
NULL
NULL 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T09:09:33.850

您可能正在寻找

```
SELECT DATE(FROM_UNIXTIME(created)) FROM mytable WHERE 1 LIMIT 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T09:20:30.910

发生这种情况是因为您从根本上误解了 MySQL 的日期和时间处理。你为什么将日期存储为`int(10)`而不是`DATE`或`TIMESTAMP`？那是错误的。

阅读文档。[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)

总而言之，将`int`转换为字符串，并将字符串解释为日期表示。1308122243 被解释为 13-08-12 加上一些额外的字符，因此转换为 2013 年 8 月 12 日。但是 1308552690 是 2013 年 8 月 55 日，因此无效，因此`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:09:54.253

我想你想要

```
SELECT FROM_UNIXTIME(created) FROM mytable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T09:10:08.957

我发现了自己的错误，解决方案很简单。

如果你想让一个`int(10)`字段被正确解释为时间戳，你应该这样做`DATE(FROM_UNIXTIME(created))`而不是仅仅`DATE(created)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T09:11:08.480

你试过 FROM_UNIXTIME 吗？

```
SELECT DATE( FROM_UNIXTIME(`created`)) FROM mytable WHERE 1 LIMIT 5 
```

# iphone - 如何释放为 appDelegate 共享实例分配的内存

> ID：10911186
> 
> 赞同：0
> 
> 时间：2012-06-06T09:03:30.107
> 
> 标签：iphone, ios, memory-management, memory-leaks

在我的应用程序中，我创建了一个 appdelegate 共享实例，并且我正在将内存分配给某个数组，例如

```
appDelegate = (AppDelegate_Shared *)[[UIApplication sharedApplication] delegate];
appDelegate.allServiceAppList_array = [[NSMutableArray alloc]init];
appDelegate.blockXMLData_array = [[NSMutableArray alloc]init];
appDelegate.notesXMLData_array = [[NSMutableArray alloc]init]; 
```

现在我不知道如何释放我分配的所有数组。它显示了我分配和初始化内存的潜在泄漏。

释放这些对象的正确方法是什么。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:21:43.477

如果 AppDelegate 属性定义为（保留），只需执行

```
appDelegate.something = [[[Something alloc]init]autorelease]; 
```

这是 ObjC 中最常见的模式。

保留属性将保留新对象，自动释放本质上是在将来释放该对象，因此最终结果是保留计数为 1 的对象，该对象将在 dealloc 方法中释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:06:31.550

不要那样做

用这种方式

```
NSMutableArray* arr = [[NSMutableArray alloc]init];
appDelegate.allServiceAppList_array = arr;
[arr release];
arr =nil;

arr = [[NSMutableArray alloc]init];
appDelegate.blockXMLData_array = arr;
[arr release];
arr =nil;

arr = [[NSMutableArray alloc]init];
appDelegate.notesXMLData_array = arr;
[arr release];
arr =nil; 
```

# security - SonataAdminBundle 安全角色

> ID：10911188
> 
> 赞同：1
> 
> 时间：2012-06-06T09:03:54.350
> 
> 标签：security, symfony, symfony-sonata

我正在尝试保护 SonataAdminBundle 中的一些管理员

我添加了带有 fosUserBundle 的 SonataUserBundle 用于登录。所以我可以添加用户、组和角色

在安全.yml

```
role_hierarchy:
    ROLE_ADMIN: ROLE_ADMIN
    ROLE_IT: ROLE_IT
    ROLE_SUPER_ADMIN: [ROLE_ADMIN, ROLE_IT]

access_control:
    - { path: ^/sonata/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/sonata/logout$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/sonata/login-check$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/sonata, role: [ROLE_ADMIN] }
    - { path: ^/sonata/api/monolog, role: [ROLE_IT] } 
```

我必须连接才能访问奏鸣曲

但是每个用户都可以访问路由 /sonata/api/monolog 即使他们没有 ROLE_IT

我怎样才能保护管理员以及如果用户可以访问它，我怎样才能只显示链接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T18:30:27.950

管理员用户必须具有活动安全令牌中的所有角色。

如果您没有当前状态下的所有角色，那么您应该激活内存安全提供程序并为您的帐户指定所有角色和 reauth。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:13:06.060

使用 acl 作为安全处理程序。

资源：[SonataAdminBundle 安全性](http://www.sonata-project.org/bundles/admin/master/doc/reference/security.html)

# android - Android AudioRecord 过滤频率范围

> ID：10911189
> 
> 赞同：2
> 
> 时间：2012-06-06T09:03:59.857
> 
> 标签：android, audio, filter, android-audiorecord

我正在使用android平台，从以下参考问题中我了解到，使用返回原始数据的AudioRecord类我可以过滤音频范围取决于我的需要，但为此我需要算法，有人可以帮我找到过滤范围 b/w 14,400 bph 和 16,200 bph 的算法。

我尝试了“JTransform”，但我不知道是否可以使用 JTransform 来实现这一点？目前我正在使用“jfftpack”来显示效果非常好但我无法使用它实现音频过滤器的视觉效果。

[参考这里](https://stackoverflow.com/questions/3802923/audio-filtering-android)

帮助感谢提前感谢。以下是我上面提到的代码，我正在使用“jfftpack”库来显示您可能会在代码中找到这个库引用，请不要混淆

```
private class RecordAudio extends AsyncTask<Void, double[], Void> {
        @Override
        protected Void doInBackground(Void... params) {
try {
    final AudioRecord audioRecord = findAudioRecord();
                    if(audioRecord == null){
                        return null;
                    }

                    final short[] buffer = new short[blockSize];
                    final double[] toTransform = new double[blockSize];

                    audioRecord.startRecording();

    while (started) {
                        final int bufferReadResult = audioRecord.read(buffer, 0, blockSize);

                        for (int i = 0; i < blockSize && i < bufferReadResult; i++) {
                            toTransform[i] = (double) buffer[i] / 32768.0; // signed 16 bit
                        }

                        transformer.ft(toTransform);
                        publishProgress(toTransform);

                    }
audioRecord.stop();
                audioRecord.release();
} catch (Throwable t) {
                Log.e("AudioRecord", "Recording Failed");
            }
            return null;

/**
         * @param toTransform
         */
        protected void onProgressUpdate(double[]... toTransform) {
            canvas.drawColor(Color.BLACK);
            for (int i = 0; i < toTransform[0].length; i++) {
                int x = i;
                int downy = (int) (100 - (toTransform[0][i] * 10));
                int upy = 100;
                canvas.drawLine(x, downy, x, upy, paint);
            }
            imageView.invalidate();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:59:05.960

在这个过程中有很多微小的细节可能会让你陷入困境。此代码未经测试，我不经常进行音频过滤，因此您在这里应该*非常*怀疑。这是过滤音频的基本过程：

1.  获取音频缓冲区
2.  可能的音频缓冲区转换（字节到浮点数）
3.  （可选）应用窗口功能，即汉宁
4.  采取 FFT
5.  过滤频率
6.  采取逆FFT

我假设您对 Android 和录音有一些基本知识，因此将在此处介绍步骤 4-6。

```
//it is assumed that a float array audioBuffer exists with even length = to 
//the capture size of your audio buffer

//The size of the FFT will be the size of your audioBuffer / 2
int FFT_SIZE = bufferSize / 2;
FloatFFT_1D mFFT = new FloatFFT_1D(FFT_SIZE); //this is a jTransforms type

//Take the FFT
mFFT.realForward(audioBuffer);

//The first 1/2 of audioBuffer now contains bins that represent the frequency
//of your wave, in a way.  To get the actual frequency from the bin:
//frequency_of_bin = bin_index * sample_rate / FFT_SIZE

//assuming the length of audioBuffer is even, the real and imaginary parts will be
//stored as follows
//audioBuffer[2*k] = Re[k], 0<=k<n/2
//audioBuffer[2*k+1] = Im[k], 0<k<n/2

//Define the frequencies of interest
float freqMin = 14400;
float freqMax = 16200;

//Loop through the fft bins and filter frequencies
for(int fftBin = 0; fftBin < FFT_SIZE; fftBin++){        
    //Calculate the frequency of this bin assuming a sampling rate of 44,100 Hz
    float frequency = (float)fftBin * 44100F / (float)FFT_SIZE;

    //Now filter the audio, I'm assuming you wanted to keep the
    //frequencies of interest rather than discard them.
    if(frequency  < freqMin || frequency > freqMax){
        //Calculate the index where the real and imaginary parts are stored
        int real = 2 * fftBin;
        int imaginary = 2 * fftBin + 1;

        //zero out this frequency
        audioBuffer[real] = 0;
        audioBuffer[imaginary] = 0;
    }
}

//Take the inverse FFT to convert signal from frequency to time domain
mFFT.realInverse(audioBuffer, false); 
```

# iphone - 我不知道如何在我的 css 文件中正确使用媒体选择器来决定为 iPhone 或 iPad 加载哪个图像

> ID：10911194
> 
> 赞同：0
> 
> 时间：2012-06-06T09:04:45.333
> 
> 标签：iphone, html, css, ipad

有几个 html 文件可以引导用户浏览我们的应用程序并向他介绍新功能。它是适用于 iPhone 和 iPad 的通用应用程序。如果用户选择 iPhone 版本的帮助部分，我想向他展示为 iPhone 设备缩放的图像。

但现在有我的问题。在 CSS 文件中，所有图像只有一个类 boximage。它是如何决定加载哪个图像的？我应该把每张图片都放在自己的班级里吗？

在此先感谢您的四个想法！

问候， 布克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:33:41.980

你可以试试这个。

```
 <style type="text/css">
   @media all and (max-width: 800px) {
    .boximage{ background:url(image_name1.jpg)}
    }
    @media all and (min-width: 800px){ 
    .boximage{ background:url(image_name2.jpg)}
    }</style> 
```

或使用 javascript 查找用户代理并从脚本设置图像。

# javascript - 如何通过 https 禁用谷歌浏览器阻止脚本？

> ID：10911195
> 
> 赞同：3
> 
> 时间：2012-06-06T09:04:46.870
> 
> 标签：javascript, html, google-chrome

我有一个网站，我需要在 head 部分上传脚本，例如：

```
<script src="http://api-maps.yandex.ru/2.0/?load=package.full&mode=debug&lang=ru-RU" type="text/javascript"></script> 
```

谷歌Chrome浏览器弹出消息“网站上有内容可能令人反感bla bla bla”，我尝试通过https协议设置此脚本，但同样的事情发生了。如何避免 Chrome 中的此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:16:41.063

从您自己的站点本地镜像脚本并以这种方式引用它。它可能会根据脚本的 URL 获得“攻击性”警告。

如果您需要多个版本的脚本，您可以编写一个 shell 脚本来定期同步您需要的所有版本。

您的新脚本参考应如下所示：

`<script src="js/yandex.api.package.full.debug.ru-RU.js" type="text/javascript"/>`

# ruby-on-rails - 为访问 Web 服务的方法编写规范

> ID：10911196
> 
> 赞同：0
> 
> 时间：2012-06-06T09:04:51.103
> 
> 标签：ruby-on-rails, ruby, rspec, tdd

我正在编写一个规范来验证我的`Video`模型是否会在创建 vimeo 视频时为其创建正确的缩略图。它看起来像这样：

```
 it "creates thumbnail url" do
      vimeo_url = "http://player.vimeo.com/video/12345"
      vid = Factory.build(:video, video_url:vimeo_url)
      # thumbnail created when saved
      vid.save!

      expect do
        URI.parse(vid.thumbnail_url)
      end.to_not raise_error
    end 
```

问题是我的测试非常慢，因为它必须访问 vimeo.com。所以我试图存根调用服务器的方法。所以两个问题：

1）这是存根的正确方法/时间吗

2）如果是，我该如何存根？在我的`Video`模型中，我有一个名为`get_vimeo_thumbnail()`vimeo.com 的方法。我想存根该方法。但是，如果在我的规范中我这样做`vid.stub(:get_vimeo_thumbnail).and_return("http://someurl.com")`是行不通的。当我运行测试时，它仍然会访问 vimeo.com。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:30:23.193

[VCR gem](https://github.com/myronmarston/vcr)可能值得考虑。它会在您第一次运行它时访问真正的 Web 服务并记录响应，以便下次运行测试时可以重放它（使后续测试更快）。

`stub`如果你之前打电话，我看不出你打的存根电话有什么问题`save!`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T05:15:58.907

我还支持使用“vcr”gem。

还有一个关于 VCR 的 Railscast（专业）剧集： [http ://railscasts.com/episodes/291-testing-with-vcr](http://railscasts.com/episodes/291-testing-with-vcr)

VCR 可用于将所有传出的 Web 服务调用记录到“磁带”（固定装置）中，当再次运行测试时将重放这些调用。所以你得到了最初的“真实世界”响应集，但不会再访问远程 api。

当本地没有可用的记录响应时，它还具有执行“按需”请求的选项，以及发出明确的“实时”请求。

您可以并且应该不时对实时端点运行测试以进行验证。

# html - 将 div 设置为 100% 的内容

> ID：10911209
> 
> 赞同：2
> 
> 时间：2012-06-06T09:06:00.230
> 
> 标签：html, css, layout, grid

我正在使用 1140px 流体网格 (cssgrid.net) 布局。

我有一些问题..

我的布局如下所示：

```
Side Menu - Content
          - Content
          - Content
          - Content
          - etc. etc. 
```

我的问题是，我的布局是这样的：

```
Side Menu - Content
Content
Content
Content
Content
etc. etc. 
```

我想要，所以我的“侧边菜单”是全高的，所以它会将内容推到“右侧”。

我的布局（存在 12 个列）：

```
<div class="container">

  <div class="row">
    <div class="twocol">
    -- Side Menu Content Here --
    </div><!-- END 2col --> 

    <div class="tencol last">
    content content content
    </div> 
    <div class="tencol last">
    content content content
    </div> 
    <div class="tencol last">
    content content content
    </div> 
    <div class="tencol last">
    content content content
    </div> 
  </div><!-- END .row -->  
</div><!-- END .container --> 
```

CSS是：

```
.container {
padding-left: 20px;
padding-right: 20px;
}

.row {
width: 100%;
/*max-width: 1140px; */
min-width: 755px;
margin: 0 auto;
overflow: hidden;
}

.onecol, .twocol, .threecol, .fourcol, .fivecol, .sixcol, .sevencol, .eightcol, .ninecol, .tencol, .elevencol {
margin-right: 3.8%;
float: left;
min-height: 1px;
}

.row .onecol {
width: 4.85%;
}

.row .twocol {
width: 13.45%;
}

.row .threecol {
width: 22.05%;
}

.row .fourcol {
width: 30.75%;
}

.row .fivecol {
width: 39.45%;
}

.row .sixcol {
width: 48%;
}

.row .sevencol {
width: 56.75%;
}

.row .eightcol {
width: 65.4%;
}

.row .ninecol {
width: 74.05%;
}

.row .tencol {
width: 82.7%;
}

.row .elevencol {
width: 91.35%;
}

.row .twelvecol {
width: 100%;
float: left;
}

.last {
margin-right: 0px;
} 
```

我希望你能帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:19:16.237

您的布局看起来是这样的：

```
body
+------------------------------------------------------------+
| two col content   ten col content                          |
| +--------------+ +---------------------------------------+ |
| |              | |                                       | |
| |              | |                                       | |
| +--------------+ +---------------------------------------+ |
| +---------------------------------------+                  |
| |   ten col content                     |                  |
| |                                       |                  |
| +---------------------------------------+                  |
| +---------------------------------------+                  |
| |   ten col content                     |                  |
| |                                       |                  |
| +---------------------------------------+                  |
| +---------------------------------------+                  |
| |   ten col content                     |                  |
| |                                       |                  |
| +---------------------------------------+                  |
| +---------------------------------------+                  |
| |   ten col content                     |                  |
| |                                       |                  |
| +---------------------------------------+                  |
| +---------------------------------------+                  |
| |   ten col content                     |                  |
| |                                       |                  |
| +---------------------------------------+                  |
+------------------------------------------------------------+ 
```

不要重复那十列内容。将其保留为包装器并使用较小的 div。像这样：

```
body
+------------------------------------------------------------+
| two col content   ten col content                          |
| +--------------+ +---------------------------------------+ |
| |              | | +-----------------------------------+ | |
| |              | | |                                   | | |
| +--------------+ | |                                   | | |
|                  | +-----------------------------------+ | |
|                  | +-----------------------------------+ | |
|                  | |                                   | | |
|                  | |                                   | | |
|                  | +-----------------------------------+ | |
|                  | +-----------------------------------+ | |
|                  | |                                   | | |
|                  | |                                   | | |
|                  | +-----------------------------------+ | |
|                  | +-----------------------------------+ | |
|                  | |                                   | | |
|                  | |                                   | | |
|                  | +-----------------------------------+ | |
|                  | +-----------------------------------+ | |
|                  | |                                   | | |
|                  | |                                   | | |
|                  | +-----------------------------------+ | |
|                  +---------------------------------------+ |
+------------------------------------------------------------+ 
```

如果你想要 HTML 代码，

```
<div class="container">

    <div class="row">
        <div class="twocol">
        -- Side Menu Content Here --
        </div><!-- END 2col --> 

        <div class="tencol last">
            <div>
                content content content
            </div>
            <div>
                content content content
            </div>
            <div>
                content content content
            </div>
            <div>
                content content content
            </div>
        </div> 
    </div><!-- END .row -->  
</div><!-- END .container --> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:19:24.210

您可以添加`height: 100%`到 menu-div (twocol)。那应该这样做。

无论如何：也许稍微改变一下div的结构会更好一些：

```
<div class="menu">
-- Side Menu Content Here --
</div>

<div class="content">
    <div class="tencol last">
    content content content
    </div> 
    <div class="tencol last">
    content content content
    </div> 
    <div class="tencol last">
    content content content
    </div> 
    <div class="tencol last">
    content content content
    </div> 
</div> 
```

我的经验是，当您拥有包含菜单、内容、页眉和页脚的单独 div 时，它使布局更容易。

当您使用浮动时，我经常在开发过程中为我的 div 设置背景颜色，这样我可以看到它们占用了多少空间（尤其是高度）。因为一旦 div 结束，所有左侧浮动的 div 将尽可能向左移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:31:56.703

我刚刚在 jsfiddle ( [http://jsfiddle.net/cXXGj/](http://jsfiddle.net/cXXGj/) ) 上做到了。我认为你需要这种方式。我只是用 class content_container 将内容包装在另一个 div 中。看看小提琴：http: [//jsfiddle.net/cXXGj/](http://jsfiddle.net/cXXGj/)

# android - jar 绑定 zubhium sdk 的 Monodroid 问题

> ID：10911214
> 
> 赞同：2
> 
> 时间：2012-06-06T09:06:24.987
> 
> 标签：android, binding, jar, xamarin.android

我正在尝试将 jar（zubhium sdk jar）文件绑定到我的单声道机器人项目。我按照他们在 xamarins 网站上的指南创建了一个新的绑定项目，我引用了我的 mono droid 项目。我在包名称方面遇到了一些问题。我收到以下错误：

```
Error   3    package com.zubhium.interfaces does not exist
        com.zubhium.interfaces.ZubhiumListener
    C:\Users\jbp\Desktop\ny\CmsApp.Droid\obj\Debug\android\src\mono\com\zubhium\interfaces\ZubhiumListenerImplementor.java  8   25  CmsApp.Droid

 from the genrated source:
package mono.com.zubhium.interfaces;        
public class ZubhiumListenerImplementor
            extends java.lang.Object
            implements
                mono.android.IGCUserPeer,
                com.zubhium.interfaces.ZubhiumListener 
```

那是因为当项目被打包时，它会自动将 mono(.com.zubhium....) 添加到包名中。我找不到如何删除这个单声道，或者我是否可以设置一个规则来添加这个部分。

我试图放入 `<attr path="/api/package[@name='com.zubhium.interfaces']" name="managedName">mono.com.zubhium.interfaces</attr>` xmldata.xml 文件，但没有奏效。

大家有什么建议吗？

问候

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T12:27:16.447

```
package com.zubhium.interfaces does not exist 
```

当您[绑定一个`.jar`库](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_(.jar))并[从另一个项目引用该绑定项目时](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_(.jar)#Using_the_Bound_Library)，您还需要*添加* [到`.jar`您的应用程序项目](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_(.jar)#Add_the_Jar_to_the_Project)并将其**构建操作**设置为`AndroidJavaLibrary`.

不这样做意味着`.jar`不会被添加到 中`javac` `$CLASSPATH`，导致`javac`编译[Android Callable Wrapper](http://docs.xamarin.com/android/advanced_topics/architecture/android_callable_wrappers)时出现编译错误（如您所见），并且`.jar`不会包含在您的最终`.apk`. 这两个都是Bad™。

> 那是因为当项目被打包时，它会自动将 mono(.com.zubhium....) 添加到包名中。

那是针对“实施者”类型的；你可以忽略它。它被用作事件实现的一部分。如果查看生成的 C# 代码，应该有：

```
[global::Android.Runtime.Register ("mono/com/zubhium/interfaces/ZubhiumListenerImplementor")]
internal sealed class ZubhiumListenerImplementor : Java.Lang.Object, IZubhiumListener {
    // ...
} 
```

`mono.com.zubhium.interfaces.ZubhiumListenerImplementor`是内部`ZubhiumListenerImplementor`类型的ACW。

您不能重命名此类型；它是一个不受元数据控制的内部结构。

# jsp - Flex - ExternalInterface.available

> ID：10911218
> 
> 赞同：0
> 
> 时间：2012-06-06T09:06:41.430
> 
> 标签：jsp, apache-flex, flex4.5

ExternalInterface.available 的定义如下：

“ExternalInterface.available 属性指示当前 Flash Player 是否位于提供外部接口的容器中。”

上述定义的确切含义是什么？另外，当 ExternalInterface.available 的值变为 false 时？

在我的应用程序中，我将生成的 swf 文件嵌入到 JSP 中，并且我将在其中包含相关的 javascript 函数。我将使用 ExternalInterface.call 方法从 mxml 调用函数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:11:18.333

Flash Player 的容器通常是浏览器。如果浏览器提供 JavaScript 虚拟机，那么您可以让播放器与网站通信，反之亦然。

但是，如果您在独立播放器中运行 SWF，则没有可用的外部接口，并且您的 JavaScript 调用将不起作用。

# java - 获取字符串路径的公共根目录和该路径的文件夹列表

> ID：10911219
> 
> 赞同：3
> 
> 时间：2012-06-06T09:06:41.877
> 
> 标签：java, android, sql, sqlite

我有 SQLite3 数据库表，其中存储了如下路径列表：

```
/mnt/sdcard/folder1/a/b/file1
/mnt/sdcard/folder1/a/b/file2
/mnt/sdcard/folder1/a/b/file3
/mnt/sdcard/folder1/a/b/file4
/mnt/sdcard/folder1/a/b/file5
/mnt/sdcard/folder1/e/c/file6
/mnt/sdcard/folder2/d/file7
/mnt/sdcard/folder2/d/file8
/mnt/sdcard/file9 
```

我想要做的是找到这些路径的公共根并获取该公共根的第一级文件夹（唯一）的列表。

例如

第一次运行：parent root = null（这是第一次运行） common root -> /mnt/sdcard/ 文件夹列表 - folder1 - folder2

第二次运行（现在父根将是 /mnt/sdcard/folder1/）公共根 -> /mnt/sdcard/folder1/（与父根相同）文件夹列表 - a - e

第二次运行（现在父根将是 /mnt/sdcard/folder1/a/）公共根 -> /mnt/sdcard/folder1/a/b（与父根相同）文件夹列表 -> 空（我会得到文件)

有没有办法通过 db 来做这些过滤器，或者我必须通过代码来做这些过滤器？

之所以提出这个问题，是因为我需要提供一个 Android 音乐库的文件夹视图来存储歌曲数据库记录中的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-24T23:10:17.213

看看[http://rosettacode.org/wiki/Find_common_directory_path](http://rosettacode.org/wiki/Find_common_directory_path)

它在一些编程语言中实现。

这是我测试并用于我的目的的 Java 示例。

```
public class CommonPath {
    public static String commonPath(String... paths){
        String commonPath = "";
        String[][] folders = new String[paths.length][];
        for(int i = 0; i < paths.length; i++){
            folders[i] = paths[i].split("/"); //split on file separator
        }
        for(int j = 0; j < folders[0].length; j++){
            String thisFolder = folders[0][j]; //grab the next folder name in the first path
            boolean allMatched = true; //assume all have matched in case there are no more paths
            for(int i = 1; i < folders.length && allMatched; i++){ //look at the other paths
                if(folders[i].length < j){ //if there is no folder here
                    allMatched = false; //no match
                    break; //stop looking because we've gone as far as we can
                }
                //otherwise
                allMatched &= folders[i][j].equals(thisFolder); //check if it matched
            }
            if(allMatched){ //if they all matched this folder name
                commonPath += thisFolder + "/"; //add it to the answer
            }else{//otherwise
                break;//stop looking
            }
        }
        return commonPath;
    }

    public static void main(String[] args){
        String[] paths = { "/home/user1/tmp/coverage/test",
                 "/home/user1/tmp/covert/operator",
                 "/home/user1/tmp/coven/members"};
        System.out.println(commonPath(paths));

        String[] paths2 = { "/hame/user1/tmp/coverage/test",
                 "/home/user1/tmp/covert/operator",
                 "/home/user1/tmp/coven/members"};
        System.out.println(commonPath(paths2));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:19:04.090

我只需要做同样的事情，但是在 C# 中。这是我找到公共根目录的解决方案。你应该能够适应它。

```
 public static string GetCommonRoot( params string[] paths )
    {
        int minDepth = 999;
        List<string[]> parsedPaths = new List<string[]>();
        foreach( string p in paths )
        {
            string[] parts = p.Split( '\\' );
            parsedPaths.Add( parts );
            minDepth = parts.Length < minDepth ? parts.Length : minDepth;
        }

        StringBuilder sb = new StringBuilder();
        for( int i = 0; i < minDepth; i++ )
        {
            List<string> tmp = new List<string>();
            foreach( string[] dir in parsedPaths )
            {
                tmp.Add( dir[ i ].ToLower() );
            }

            if( !AllEqual( tmp.ToArray() ) )
                break;

            sb.AppendFormat( "{0}\\", tmp[ 0 ] );
        }

        return sb.ToString();

    }

    private static bool AllEqual( params string[] strings )
    {
        bool rv = true;
        for( int i = 1; i < strings.Length; i++ )
            rv &= strings[ 0 ] == strings[ i ];

        return rv;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T09:21:46.240

你应该通过代码来做。
我们这里需要树形数据结构。让我们创建类文件夹

```
Folder{
 List<String> fileList;
 List<Folder> folderList;

} 
```

现在算法：
1.获取List pathList中的路径列表

2\. 用分隔符“/”分割列表中的第一个字符串。您将获得字符串数组，例如 array1 该数组中的第一个元素将是根文件夹的名称。创建根文件夹。数组中的下一个元素将是子文件夹。最后一个元素将是文件名

3.对于pathList中的剩余路径。分割每条路径。你会得到数组，比如array2。现在并行迭代array1和array2，直到你找到array1 [i]！=array2 [i]。

如果发现不等式，并且您是 array2 的最后一个元素，则表示其文件在现有文件夹中。将其添加到列表中。如果您不是最后一个元素，则需要创建文件夹。这将创建文件夹树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-03T19:48:00.403

开源 Java 库[path-pattern-finder](https://path-pattern-finder.github.io/)提供了查找路径公共目录根的功能。

```
import com.owenfeehan.pathpatternfinder.commonpath.FindCommonPathElements;
Optional<Path> commonPath = FindCommonPathElements.findForFilePaths(paths); 
```

它还可以更广泛地用于在路径中查找某些命名模式（数字序列、常量子字符串等）。

完全披露：我是图书馆的作者。

# c# - 服务句柄为 0

> ID：10911223
> 
> 赞同：-2
> 
> 时间：2012-06-06T09:06:58.897
> 
> 标签：c#, wcf, windows-services

我正在尝试在 Windows 服务中编写简单的 wcf 服务自托管但 Windows 服务的 ServiceHandle 始终为 0

我需要使用 RegisterDeviceNotification 检测硬件更改它的参数之一是 Handle，在我的例子中是 ServiceHandle

```
public partial class MyService : ServiceBase, IMyService
{
    private ServiceHost host;

public static void Main()
{
    ServiceBase.Run(new MyService());
}

public MyService()
{
    InitializeComponent();
}

protected override void OnStart(string[] args)
{
    try
    {
        host = new ServiceHost(typeof(MyService), new Uri(@"net.pipe://localhost/MyService"));
        host.Open();
    }
    catch (Exception e)
    {
        EventLog.WriteEntry("MyService:", e.Message);
    }
}

protected override void OnStop()
{
    host.Close();
}

#region IMyService Members

public void Register()
{
    //Here the ServiceHost is 0        
}
#endregion 
```

}

什么会导致问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:11:28.553

`ServiceHandle`无论值是什么，都不需要将 WCF 服务作为 Windows 服务托管。只需实例化`ServiceHost`in`OnStart`并将其关闭，就`OnStop`可以了。

这就是为什么`ServiceHandle`在您的情况下始终为 0 的原因：

您的 Windows 服务类实现您的 WCF 服务合同。这不是一件好事，也是`ServiceHandle`属性为 0 的原因。每次调用 WCF 服务时都会实例化一个新的`MyService`类实例（如果您没有更改默认值）。此实例是不*知道它是 Windows 服务的类的**普通实例*，因此所有与 Windows 服务相关的属性都有其默认值。只有由 Windows 服务管理器创建的实例具有所有适当的属性集。

 *您可以自己尝试：在`OnStart`中，插入以下行并检查`myServiceVar.ServiceHandle`. 你会看到它是`0`：

```
MyService myServiceVar = new MyService(); 
```

您*真正* 想要做的是：让不同的类实现服务合同，例如：

```
public class MyWCFService : IMyService
{
    public static IntPtr ServiceHandle;

    public void Register()
    {
        // Use MyWCFService.ServiceHandle here
    }  
} 
```

在`OnStart`方法中，设置`ServiceHandle`变量`MyWCFService`：

```
protected override void OnStart(string[] args)
{
    try
    {
        MyWCFService.ServiceHandle = this.ServiceHandle;

        host = new ServiceHost(typeof(MyWCFService), new Uri(@"net.pipe://localhost/MyService"));
        host.Open();
    }
    catch (Exception e)
    {
        EventLog.WriteEntry("MyWCFService:", e.Message);
    }
} 
```*

# php - codeigniter 中的 session_destroy 不适用于 IE

> ID：10911225
> 
> 赞同：0
> 
> 时间：2012-06-06T09:07:05.613
> 
> 标签：php, codeigniter, session

codeigniter 中的 session_destroy 不适用于 IE

当我注销时我破坏了会话，但是当我进入我必须登录的页面时，它的输入就像它已被记录一样，这只发生在 IE 中，如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:40:45.690

一定是你的IE很有趣。清除所有 IE 缓存并重新启动浏览器。尝试打开隐私浏览访问页面

# c# - 使用 SQL Server 管理对象 (SMO) 开发人员机器 32 位 - SQL Server 64 位

> ID：10911226
> 
> 赞同：1
> 
> 时间：2012-06-06T09:07:07.993
> 
> 标签：c#, sql-server, clickonce, smo

我在 32 位 Win7 机器上开发了一个 Windows Forms 应用程序，并在同一台机器上安装了一个 SQL Server 2008 进行测试。发布环境的数据库服务器有64位。当我在与 64 位 SQL Server 连接的发布环境中的客户端（32 位）上安装应用程序时，当我的代码尝试使用 SQL Server 管理对象（SMO）时出现以下故障：

导致失败的代码：

```
 private static bool createDatabase(string dbName, string sqlPath, string connStr)
    {
        FileInfo file = new FileInfo(sqlPath + dbName + ".sql");
        string strscript = file.OpenText().ReadToEnd();
        bool result;
        string test = "CREATE DATABASE [" + dbName + "]";

        try
        {
            SqlConnection connection = new SqlConnection(connStr);
            using (connection)
            {
                using (SqlCommand sqlCmd = new SqlCommand(test, connection))
                {
                    connection.Open();
                    sqlCmd.ExecuteNonQuery();
                    connection.Close();
                    result = true;
                }
            }

            if (result == true)
            {
                connStr = connStr + ";Initial Catalog=" + dbName;
                SqlConnection sqlConnection = new SqlConnection(connStr);
                ServerConnection svrConnection = new ServerConnection(sqlConnection);
                Server server = new Server(svrConnection);

                server.ConnectionContext.ExecuteNonQuery(strscript); // Here the app crashes
            }
        }
        catch (SqlException ae)
        {
            result = false;
            System.Windows.Forms.MessageBox.Show(ae.Message.ToString());
        }
        return result;
    } 
```

失败信息：

应用程序：XingaAdmin.exe 框架版本：v4.0.30319 应用程序：Der Prozess wurde aufgrund einer unbehandelten Ausnahme bedet。Ausnahmeinformationen: System.IO.FileNotFoundException Stapel: bei System.Reflection.RuntimeAssembly._nLoad(System.Reflection.AssemblyName, System.String, System.Security.Policy.Evidence, System.Reflection.RuntimeAssembly, System.Threading.StackCrawlMark ByRef, Boolean , Boolean, Boolean) bei System.Reflection.RuntimeAssembly.nLoad(System.Reflection.AssemblyName, System.String, System.Security.Policy.Evidence, System.Reflection.RuntimeAssembly, System.Threading.StackCrawlMark ByRef, Boolean, Boolean, Boolean ) bei System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(System.Reflection.AssemblyName, System.Security.Policy.Evidence, System.Threading.StackCrawlMark ByRef, Boolean, Boolean) bei System.**Microsoft.SqlServer.Management.Common.ServerConnection.ExecuteNonQuery** (System.String, Microsoft.SqlServer.Management.Common.ExecutionTypes) bei XingaCommonClasses.Utilities.Database.DatabaseHelper.createDatabase(System.String, System.String, System.String) bei XingaCommonClasses.Utilities.Database.DatabaseHelper.checkDatabase(System.Collections.Generic.List`1, System.String) bei XingaAdmin.Program.Main()

数据库创建良好，但没有执行创建表的 sql 脚本。

我是否可能必须使用 64 位版本的 SQL Server 管理对象 (SMO)？但是，如果，我怎样才能得到这个版本。我无法在 32 位机器上安装 64 位版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:27:02.340

[此问题](https://stackoverflow.com/questions/2080263/microsoft-sqlserver-management-smo-failedoperationexception-backup-failed-for-s)包含相同的堆栈跟踪，但堆栈转储还包含有关未能加载哪个 SMO 程序集的信息。使用 try-catch 块将堆栈跟踪转储到异常中。

SQL Server 机器需要安装 64 位 SMO 库。

# ios - iOS - 如何获取有关 nil 返回值的更多调试信息

> ID：10911230
> 
> 赞同：2
> 
> 时间：2012-06-06T09:07:21.283
> 
> 标签：ios, debugging, nsdictionary, null

在我的 iOS 5.1 应用程序中，我试图将 JSON 文本文件加载到 NSDictionary 中。

```
NSString *filepath = [[NSBundle mainBundle] pathForResource:@"stuff" ofType:@"json"];
NSDictionary *stuff = [NSDictionary dictionaryWithContentsOfFile:filepath]; 
```

文件路径有效，文件存在，但东西是`nil`，这意味着解码文件时出现问题（根据[文档](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDictionary/dictionaryWithContentsOfFile%3a)）。

（如何）我能否获得更多关于为什么`[NSDictionary dictionaryWithContentsOfFile:]`- 或任何类型的 API 调用 - 返回的调试信息`nil`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T09:12:49.857

阅读内容`NSData`，然后使用`+[NSPropertyListSerialization propertyListWithData:options:format:error:]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:13:21.610

正如您所说：您的文件包含一个 JSON 字符串。首先，您必须加载字符串，然后必须使用一些 JSON 库对其进行解析。

例如：

```
NSError *error;
NSString *content = [NSString stringWithContentsOfFile:filepath encoding:NSUTF8StringEncoding error:&error];  //error checking omitted
SBJsonParser *parser = [[SBJsonParser alloc] init];
NSDictionary *json = [parser objectWithString: content]; 
```

# java - 如何使用 OpenJDK 7 编译 mavenized OSGi 4.3 bundle？

> ID：10911231
> 
> 赞同：8
> 
> 时间：2012-06-06T09:07:21.707
> 
> 标签：java, osgi, java-7, openjdk

我正在尝试使用 OpenJDK7 针对 OSGi 规范 4.3 编译我的 OSGi 包，但出现错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5:compile (default-compile) on project example: Compilation failure
[ERROR] /tmp/baka/example/src/main/java/org/example/Activator.java:[14,24] error: type ServiceReference does not take parameters 
```

这是我的 Activator.java：

```
package org.example;

import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;
import org.osgi.framework.ServiceReference;

public class Activator implements BundleActivator {
    @Override
    public void start(BundleContext bundleContext) throws Exception {
        ServiceReference<Runnable> ref = bundleContext.getServiceReference(Runnable.class);
    }

    @Override
    public void stop(BundleContext bundleContext) throws Exception {
    }
} 
```

和我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.example</groupId>
    <artifactId>example</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>bundle</packaging>

    <name>example</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.core</artifactId>
            <version>4.3.0</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.7</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Private-Package>org.example</Private-Package>
                        <Bundle-Activator>org.example.Activator</Bundle-Activator>
                    </instructions>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

当我使用 OpenJDK 6 时不会出现此错误。任何提示如何让它与 OpenJDK 7 一起使用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T15:11:43.780

您需要使用 Java 7 中的 javac 重新编译 OSGi 源代码。OSGi 使用 -target jsr14 使用 Java 6 javac 编译代码。Java 7 javac 删除了对针对此类文件进行编译的支持：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7078419](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7078419)

从 R5 开始，OSGi 将不再提供 -target jsr14 类文件。

[2012 年 10 月 31 日更新]

OSGi 现在为 Java 7 提供了重新编译的 4.3 jar 文件。请参阅[http://blog.osgi.org/2012/10/43-companion-code-for-java-7.html](http://blog.osgi.org/2012/10/43-companion-code-for-java-7.html)

# jquery - 数据表插件中每个页面索引更改的单独 ajax 调用

> ID：10911234
> 
> 赞同：1
> 
> 时间：2012-06-06T09:07:30.377
> 
> 标签：jquery, ajax, callback, datatables, webmethod

我正在寻找这个问题的解决方案一个多星期，但我找不到。这是我的问题

我们都知道通过 Jquery 中的 datatables 插件访问 ajax 数据分页的基本方法。在此示例中，检索所有需要的数据并在浏览器内存中完成分页。我不需要这样。由于数据量巨大，我面临着性能问题，因此我们需要一种更复杂的方法。这是每个页面索引更改的单独 ajax 调用。

我已阅读[此链接](http://datatables.net/examples/data_sources/server_side.html)，该链接适用于 php，因此对我没有用。

我读[了这个基于 MVC 的链接](http://growingtech.blogspot.in/2012/06/ajax-data-paging-with-datatablesnet.html)，所以对我来说再次没有工作。

这是我的代码，所以我该如何修改我的代码

在 A.aspx 页面上

```
function showData(P1,P2) {
$.ajax({
    type: 'POST',
    url: 'A.aspx/GetDataList',
    data: "{'P1':'" + P1+ "','P2':'" + P2+ "'}",
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function (msg) {
   //make string of data here
   $('#example').html(table).dataTable();
   } 
```

现在在 A.aspx.cs

```
[System.Web.Services.WebMethod()]
[System.Web.Script.Services.ScriptMethod()]
public static List<myclass> GetDataList(string P1, string P2)
{
    //make object of city class
    myclass cl = new myclass();
    cl.what = P1;
    cl.where = P2;
    return cl.GetDataList1(); 
```

}

这是我的课堂功能

```
public List<mycls> GetDataList1()
{

    try
    {

        Database db = DatabaseFactory.CreateDatabase();
        DbCommand oCmd = db.GetStoredProcCommand("sp");
         db.AddInParameter(oCmd, "@a", DbType.String, this.what);
         db.AddInParameter(oCmd, "@b", DbType.String, this.where);
        DataSet dsResult = db.ExecuteDataSet(oCmd);

            var query = from o in dsResult.Tables[0].AsEnumerable()

                        select new mycls
                        {
                            ID = o.Field<int>("ID"),
                            Name= o.Field<string>("Name")

                        };
            List<mycls> lstDisplay = new List<mycls>();
            lstDisplay.AddRange(query);
            return lstDisplay;

    }
    catch (Exception ex)
    {

    }
 } 
```

# c# - IE9 ASP.net 会话 ID 在重新加载所有选项卡时更改单击几次

> ID：10911241
> 
> 赞同：2
> 
> 时间：2012-06-06T09:08:28.270
> 
> 标签：c#, javascript, asp.net, internet-explorer

我陷入了一个奇怪的问题，环境：我正在使用 Asp.net 状态服务器来存储会话，我的会话超时是 20 分钟我的情况是，我在每次页面重新加载时都从 Java 脚本更新 ASP.NET_SessionId cookie像这样

```
 var n = 'ASP.NET_SessionId'         // cookie name
        var v = app.cookies.get(n)          // cookie value
        var d = '.abc.com'      // base domain to create domain level cookie
        var e = 0.1666666666668             // 4 hrs
        app.cookies.set(n, v, e, d)  // my method to update cookies 
```

现在的问题是，当我在 IE 中的多个选项卡（如 8 个或更多选项卡）中打开该页面时，当我单击刷新所有选项卡时结束（右键单击任何选项卡将显示此选项）然后连续执行此操作将在 Session Expired Message 中结束.

在会话跟踪中，我发现我的会话 ID 已更改。当我删除了更新会话 ID 的这种逻辑时，它工作正常。它只发生在 IE 中，而不是 Crome 或 firefox。

我的问题是为什么会更改会话 ID？JS 在更新其时间时是否锁定该 cookie，并且在相同情况下其他选项卡请求更新导致崩溃并且 IE 将新会话 ID 发送到服务器。？

# testing - 硒测试，你会怎么做？

> ID：10911243
> 
> 赞同：1
> 
> 时间：2012-06-06T09:08:32.157
> 
> 标签：testing, selenium, junit

我正在考虑用硒进行以下测试的最佳方法，我想问你会怎么做。
我必须检查系统中有 2 个不同的客户，第一个提供要出售的东西，第二个必须提供报价。该提议可以被接受或拒绝。

### 例子。

*   **第一个人**：我想卖一辆车，所以我把我的车连同它的所有细节都放到了系统上。
*   **人 2**：我想买车，所以我搜索汽车，我看到了人 1 的车，所以我提出了报价。在我的仪表板上显示我做了一个报价。
*   **第 1 个人**：我访问我的仪表板，我注意到有一个报价，我看到了报价，我拒绝了，因为我不喜欢它。
*   **第 2 个人**：我访问了我的仪表板，我注意到报价已被拒绝，我提出另一个报价。
*   **第 1 个人**：我访问我的仪表板并注意到新的提议，我喜欢它，我接受。

你将如何用硒组织测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:37:46.583

我会将您的示例视为 5 个单独的用户故事。您可以为每个故事创建单独的自动化测试。为此，您必须定义测试的先决条件和期望的结果。

例如，对于第一个故事，除了一些琐碎的条件外，没有任何先决条件，例如存在具有某某用户名的用户并有权出售汽车。您必须使用 Selenium 编写将汽车详细信息放入系统的脚本。期望的结果是汽车在系统中（可以搜索或显示在待售汽车的完整列表中）并且其属性与输入的内容相匹配。

对于第二个故事，前提是有一辆车要出售。您必须通过为第一个故事开发的流程提交待售汽车或绕过 UI 输入汽车以确保这一点，例如通过业务服务层或直接插入数据库。期望的结果是用户 2 的仪表板显示了报价。

等等。

# php - 如何打印 Magento 的所有产品列表？

> ID：10911244
> 
> 赞同：4
> 
> 时间：2012-06-06T09:08:32.487
> 
> 标签：php, magento

有没有办法在 Magento 中打印出所有产品及其类别，或者可以轻松地在自定义脚本中从数据库中调用所有这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:31:32.660

获取所有产品：

```
$products = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('sku')
        ->addAttributeToSelect('name');
foreach($products as $product){
    echo 'Name:'.$product->name.' sky:'.$product->sku.'<br>';    
} 
```

您可以根据需要添加任意数量的属性`addAttributeToSelect('attribute_name')`

# php - 删除不在 .csv 文件中的数据库记录 - 效率？

> ID：10911246
> 
> 赞同：-1
> 
> 时间：2012-06-06T09:08:38.993
> 
> 标签：php, mysql, oop, csv

我目前正在处理 .csv 导入，它导入议程项目（例如事件）并将它们放在 MySQL 数据库中。我已经掌握了它的要点，但是有一段很麻烦的代码，我似乎无法解决如何修复它或使它更高效/更好。

对我来说很麻烦的代码部分是每次举办一个活动 - 让我们说`tuesday`-`sunday`从`2012-06-01`'直到`2013-04-01`并且您想检查其中一些值是否已在数据库中准备好（因为用户可能会使用一些调整后的值再次导入 .csv 文件）。我当前的代码最终在数据库中实现了正确的值，但它的完成方式有点麻烦。如果文件再次被导入，所有来自星期天的值都会再次被删除，因为我的检查首先在星期二通过 foreach，它将检查数据库值是否与星期二生成的值匹配。检查完成并将值插入数据库后，我的 foreach 会检查星期天的所有值（星期二不会被删除，因为我保留了一个包含所有先前插入值的数组），然后再次插入它们。所以基本上当我导入一个 .csv 文件时，它会删除然后插入相同的值，我的问题是如何防止这种情况发生？

此外，如果您发现有任何改进此代码的方法（因为我真的觉得一开始就效率不高）请说出来，非常感谢。

这是检查事件重复的代码，如果您需要任何说明或其他代码，请告诉我：

```
//REPEAT DAYS OF THE WEEK
if(!empty($repeatDayOfTheWeek) && $repeatDayOfTheWeek != '')
{
    $daysOfTheWeek = explode(',', $repeatDayOfTheWeek);

    foreach($daysOfTheWeek as $key => $dayOfTheWeek)
    {
        if(!is_numeric($dayOfTheWeek))
        {
            continue;
        }

        unset($agendaI->agendaItemValues['stopDate']);

        $beginDate = strtotime($tempStartDate);
        $endDate = strtotime($tempStopDate);

        $dayDates = array();
        $arrayDatesInDb = array();

        if(!isset($previousInserts))
        {
            $previousInserts = array();
        }

        if($beginDate != '' && $endDate != '')
        {
            while($beginDate <= $endDate)
            {
                if(date('N', $beginDate) == $dayOfTheWeek)
                {
                    $dayDates[] = date('Y-m-d', $beginDate);
                }

                $beginDate = strtotime("+1 day", $beginDate);
            }

        $datesInDb = $agendaI->getAgendaItemsByExternId($externId);

        if(empty($datesInDb))
        {
            foreach($dayDates as $dayDate)
            {
                dump("Empty DB - INSERT: ".$dayDate);
                $agendaI->setAgendaItemValue('startDate', $dayDate);
                $agendaI->saveAgendaItem();
                $previousInserts[] = $dayDate;
            }
        }
        else
        {
            dump('DB with records');
            foreach($datesInDb as $dateInDb)
            {
                if(!in_array($dateInDb->startDate, $dayDates) && !in_array($dateInDb->startDate, $previousInserts))
                {
                    dump("Not in Item-array, but in DB - DELETE: ".$dateInDb->startDate);
                    $agendaI->deleteAgendaItem($dateInDb->id);
                }
            }

        foreach($dayDates as $dayDate)
        {
            foreach($datesInDb as $dateInDb)
            {
                if($dayDate == $dateInDb->startDate)
                {
                    $arrayDatesInDb[] = $dateInDb->startDate;
                    dump("In array & in DB - UPDATE: ".$dateInDb->startDate);
                    $agendaI->setAgendaItemValue('id', $dateInDb->id);
                    $agendaI->saveAgendaItem();
                    $previousInserts[] = $dayDate;
                }
            }
        }

    unset($agendaI->agendaItemValues['id']);

    foreach($dayDates as $dayDate)
    {
        if(!in_array($dayDate, $arrayDatesInDb))
        {
            dump("Not in DB-array but in Item-array - INSERT: ".$dayDate);
            $agendaI->setAgendaItemValue('startDate', $dayDate);
            $agendaI->saveAgendaItem();
            $previousInserts[] = $dayDate;
        }
    }
} 
```

以下字段位于 .csv 中：

```
"Datum" "Tijdstip" "Evenement" "Locatie" "Website" "Toelichting" "Duits" "engels" "startdatum" "stopdatum" "herhalen dag van de week" "externid" "categorie" "via" 
```

**换句话说**
，我需要检查数据库中的记录是否与 .csv 中的记录相同。如果 csv 没有数据库的记录，我需要从数据库中删除它（我当前的代码确实如此，只是效率不高）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:38:47.330

您可以在,和列之间定义`UNIQUE`索引，而不是在 PHP 中实现检查；然后使用您的命令将与这些字段匹配的任何现有记录替换为新记录：`startdatum``stopdatum``herhalen dag van de week``REPLACE``LOAD DATA`

```
ALTER TABLE events ADD UNIQUE INDEX (startdatum, stopdatum, dag);

LOAD DATA INFILE '/path/to/foo.csv'
  REPLACE
  INTO TABLE events; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:17:45.447

I eventually solved it in the following way without using a foreach for each $daysoftheweek and using array_diff:

```
 //REPEAT DAYS OF THE WEEK
            if(!empty($repeatDayOfTheWeek) && $repeatDayOfTheWeek != '')
            {
                $daysOfTheWeek = explode(',', $repeatDayOfTheWeek);

                $agendaI->setAgendaItemValue('stopDate', '');

                $beginDate = strtotime($startDate);
                $endDate = strtotime($stopDate);
                $dayDates = array();
                $dbValues = array();
                $dbValues['datum'] = array();
                $latestDbValues = array();
                $toBeDeletedKeys = array();

                while($beginDate <= $endDate)
                {
                    if(in_array(date('N', $beginDate), $daysOfTheWeek))
                    {
                        $dayDates[] = date('Y-m-d', $beginDate);
                    }

                    $beginDate = strtotime("+1 day", $beginDate);
                }

                $evenementenInDb = $agendaI->getAgendaItemsByExternId($externId);

                if(!empty($evenementenInDb))
                {
                    foreach($evenementenInDb as $evenementInDb)
                    {
                        $dbValues['agendaid'][] = $evenementInDb->id;
                        $dbValues['datum'][] = $evenementInDb->startDate;
                    }
                }

                foreach($dayDates as $dayDate)
                {
                    $key = array_search($dayDate, $dbValues['datum']); 
                    if($key !== false && is_numeric($key))
                    {
                        //UPDATE
                        $agendaI->setAgendaItemValue('id', $dbValues['agendaid'][$key]);
                        $agendaI->setAgendaItemValue('startDate', $dayDate);
                        $agendaI->saveAgendaItem();
                        $latestDbValues[] = $dayDate;
                        dump('UPDATE');
                    }
                    else
                    {
                        //INSERT
                        unset($agendaI->agendaItemValues['id']);
                        $agendaI->setAgendaItemValue('startDate', $dayDate);
                        $agendaI->saveAgendaItem();
                        $latestDbValues[] = $dayDate;
                        dump('INSERT');
                    }
                }

                $toBeDeleted = array_diff($dbValues['datum'], $latestDbValues);
                foreach($toBeDeleted as $value)
                {
                    $toBeDeletedKeys[] = array_search($value, $dbValues['datum']);
                }

                foreach($toBeDeletedKeys as $toBeDeletedKey)
                {
                    //DELETE
                    $agendaI->deleteAgendaItem($dbValues['agendaid'][$toBeDeletedKey]);
                    dump('DELETE');
                }
            }
            else 
            { 
                //Normal, non repeating event
                //INSERT
                if(!empty($agendaItem) && is_numeric($agendaItem->id))
                {
                    $agendaI->setAgendaItemValue('id',$agendaItem->id);
                }

                $agendaId = $agendaI->saveAgendaItem();
            } 
```

# vim - 如何用 Vim 中的函数结果替换字符串？

> ID：10911247
> 
> 赞同：3
> 
> 时间：2012-06-06T09:08:39.993
> 
> 标签：vim

我想将文件名和行号插入文件中的某些位置。例如这一行：

```
_debug('init'); 
```

我想换

```
:s/debug('/debug('(%current_filename_here%:%current_line_number_here%)\ /g 
```

得到这个

```
_debug('(filename.ext:88) init'); 
```

我尝试使用 expand( `'%:t'`) 来获取文件名和 line( `"."`) 来获取行号，但我不知道如何在替换表达式中使用它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T09:10:33.410

您可以使用[`\=`](http://vimdoc.sourceforge.net/htmldoc/change.html#%3as%5C=). 例如：

```
:s@_debug('\zs@\=printf('(%s:%d) ', expand('%:t'), line('.'))@ 
```

* * *

> 当 {replacement} 以它开头时，`"\="`它被评估为表达式，

# jquery - jQuery甘特图添加qtip作为提示？

> ID：10911248
> 
> 赞同：0
> 
> 时间：2012-06-06T09:08:44.467
> 
> 标签：jquery, jquery-ui

我正在使用[http://mbielanczuk.com/jquery-gantt/](http://mbielanczuk.com/jquery-gantt/)插件

有谁知道如何将鼠标悬停提示更改为[qTip2](http://craigsworks.com/projects/qtip2/)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:44:04.067

终于我明白了！！:)

以下是如何通过 qtip2 更改 fn-gantt-hint。打开js文件并搜索；

```
if (desc)
 {
   bar
...
 }
return bar; 
```

然后删除或仅对此发表评论；

```
.mouseover(function(e){
    var hint = $("<div class='fn-gantt-hint' />").html(desc);
    $("body").append(hint);
    hint.css('left', e.pageX);
    hint.css('top', e.pageY);
    hint.show();
  })
  .mouseout(function(){
    $(".fn-gantt-hint").remove();
  })
  .mousemove(function(e){
     $('.fn-gantt-hint').css('left', e.pageX);
     $('.fn-gantt-hint').css('top', e.pageY+15);
 }); 
```

有了这个;

```
bar.qtip({
    content: desc,
    position: {
        my: 'top left',
        target: 'mouse',
        viewport: $(window), // Keep it on-screen at all times if possible
        adjust: {
            x: 10,  y: 10
        }
    },
    hide: {
        fixed: true // Helps to prevent the tooltip from hiding ocassionally when tracking!
    },
    style: 'ui-tooltip-shadow'
}); 
```

然后你就完成了！:) 干杯！带有 qtip2 的甘特图！通过共享插件和 qtip2 归功于 mbielanczuk！我爱你们！:))

# sql - 从存储过程返回多个值

> ID：10911249
> 
> 赞同：16
> 
> 时间：2012-06-06T09:08:44.910
> 
> 标签：sql, sql-server, stored-procedures

我正在使用 SQL Server。我正在从另一个存储过程调用一个存储过程。

我想从第一个存储过程返回多个值。

例如：我`Sub_SP`从`Master_SP`. `Sub_SP`将返回多个值到`Master_SP`.

任何人都可以举一个输出参数的例子吗？

谢谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-06T11:25:32.980

```
ALTER procedure ashwin @empid int,@empname varchar(20) output,@age int output
as
select @empname=ename,@age=age
from emp where empid=@empid;

declare @ename varchar(20),@age int
execute ashwin 101,@ename out,@age out
select @ename,@age; 
```

//------------

```
namespace sqlserver
{
    class Program
    {
        static void Main(string[] args)
        {

            createconnection();
        }
        public static void createconnection()
        {
            SqlConnection con=new SqlConnection("Data Source=ASHWIN\\SQLEXPRESS;Initial Catalog=employee;Integrated Security=True;Pooling=False");
            con.Open();

            SqlCommand cmd=new SqlCommand("ashwin",con);
            cmd.CommandType=CommandType.StoredProcedure;
            cmd.Parameters.Add(new SqlParameter("@empid",SqlDbType.Int,10,"empid"));
            cmd.Parameters.Add(new SqlParameter("@empname", SqlDbType.VarChar, 20,ParameterDirection.Output,false,0,20,"ename",DataRowVersion.Default,null));
            cmd.Parameters.Add(new SqlParameter("@age", SqlDbType.Int, 20, ParameterDirection.Output, false, 0, 10, "age", DataRowVersion.Default, null));
            cmd.Parameters[0].Value = 101;
            cmd.UpdatedRowSource = UpdateRowSource.OutputParameters;
            cmd.ExecuteNonQuery();
            string name = (string)cmd.Parameters["@empname"].Value;
            int age = Convert.ToInt32(cmd.Parameters["@age"].Value);
            Console.WriteLine("the name is {0}--and age is {1}", name,age);

            Console.ReadLine();
        }
    } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-06T09:16:44.773

这个怎么样：

```
CREATE PROCEDURE dbo.SubSP 
    @Value1 INT OUTPUT, @Value2 INT OUTPUT
AS
    -- just return two values into the OUTPUT parameters somehow....
    SELECT @Value1 = 42, @Value2 = 4711 
```

测试`dbo.SubSP`：

```
DECLARE @Out1 INT, @Out2 INT

EXEC dbo.SubSP  @Out1 OUTPUT, @Out2 OUTPUT -- int

SELECT @Out1, @Out2 
```

给出输出：

```
 @Out1    @Out2
  42       4711 
```

然后创建“主”存储过程：

```
CREATE PROCEDURE dbo.MasterSP
    @SomeValue1 INT OUTPUT, @SomeValue2 INT OUTPUT, @SomeValue3 INT OUTPUT
AS BEGIN
    DECLARE @Out1 INT, @Out2 INT

    -- call the "sub" stored procedure and capture OUTPUT values
    EXEC dbo.SubSP @Out1 OUTPUT, @Out2 OUTPUT

    -- return those values - plus some others - from master stored procedure
    SELECT @SomeVAlue1 = @Out1, @SomeVAlue2 = @Out2, @SomeValue3 = 9901
END 
```

测试主存储过程：

```
DECLARE @Some1 INT, @Some2 INT, @Some3 INT

EXECUTE dbo.MasterSP @Some1 OUTPUT, @Some2 OUTPUT, @Some3 OUTPUT

SELECT @Some1, @Some2, @Some3 
```

给出输出：

```
(No column name)  (No column name)   (No column name)
       42               4711            9901 
```

这行得通吗？这能解决你的问题吗？如果没有：你在哪里卡住了，**到底**是什么问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-21T07:52:12.323

我有同样的问题，我正在使用 VB。我已经尝试过@Scorpian275 的答案。这与 @Scorpian275 提供的解决方案相同，但它适用于 VB。sql部分是一样的。

```
Public Shared Sub createConnection()
        Dim con As SqlConnection = New SqlConnection("Data Source=ASHWIN\\SQLEXPRESS;Initial Catalog=employee;Integrated Security=True;Pooling=False")
        con.Open
        Dim cmd As SqlCommand = New SqlCommand("ashwin", con)
        cmd.CommandType = CommandType.StoredProcedure
        cmd.Parameters.Add(New SqlParameter("@empid", SqlDbType.Int, 10, "empid"))
        cmd.Parameters.Add(New SqlParameter("@empname", SqlDbType.VarChar, 20, ParameterDirection.Output, false, 0, 20, "ename", DataRowVersion.Default, Nothing))
        cmd.Parameters.Add(New SqlParameter("@age", SqlDbType.Int, 20, ParameterDirection.Output, false, 0, 10, "age", DataRowVersion.Default, Nothing))
        cmd.Parameters(0).Value = 101
        cmd.UpdatedRowSource = UpdateRowSource.OutputParameters
        cmd.ExecuteNonQuery
        Dim name As String = CType(cmd.Parameters("@empname").Value,String)
        Dim age As Integer = Convert.ToInt32(cmd.Parameters("@age").Value)
        Console.WriteLine("the name is {0}--and age is {1}", name, age)
        Console.ReadLine
    End Sub 
```

cmd.Parameters.Add(New SqlParameter("@age", SqlDbType.Int, 20, ParameterDirection.Output, false, 0, 10, "age", DataRowVersion.Default, Nothing)) 中的最后一个参数是初始值我们提供这些变量（这里什么都没有）。

# iis - IIS 中的 .asp 扩展配置

> ID：10911250
> 
> 赞同：1
> 
> 时间：2012-06-06T09:08:53.630
> 
> 标签：iis, asp-classic, windows-vista

我已经安装了 IIS，然后浏览到一个 URL，该 URL 代表一个包含以下内容的文件：

```
<!DOCTYPE html>
<html>
<body>
<%
response.write("hello world ");
%>
</body>
</html> 
```

但收到此错误：

```
错误摘要
HTTP 错误 404.3 - 未找到
由于扩展配置，无法提供您请求的页面。如果页面是脚本，则添加处理程序。如果应该下载文件，请添加 MIME 映射。

```

我错过了什么样的扩展配置？还有一个简短的总结：

> 可能缺少处理程序映射。默认情况下，静态文件处理程序处理所有内容。您尝试使用的功能可能未安装。没有为网站或应用程序启用适当的 MIME 映射。（警告：不要为用户不应下载的内容创建 MIME 映射，例如 .ASPX 页面或 .config 文件。）如果未安装 ASP.NET。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T11:18:24.883

您需要在 IIS 中安装 ASP 支持。

在 Windows 7 下（据我所知，Vista）：控制面板 | 程序和功能 | 打开或关闭 Windows 功能 | 选择 ASP（在 IIS 下，万维网服务 | 应用程序开发功能）。

# iphone - 如何在导航栏上移动文本

> ID：10911252
> 
> 赞同：1
> 
> 时间：2012-06-06T09:09:01.670
> 
> 标签：iphone, ipad, uinavigationbar

嗨，我必须移动导航栏上的文本。我对滚动文本一无所知。有人对此有任何想法，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:00:37.123

我认为您想像在 iphone 音乐播放器应用程序中一样移动标签文本。如果是，请执行以下操作。

```
1`. Download Marquee Label files from this link 'https://github.com/cbpowell/MarqueeLabel'.`

2\.   - (void)addMovingLabelText { 
            MarqueeLabel *_lectureName = [[MarqueeLabel alloc] initWithFrame:CGRectMake(0,20,200, 20) duration:5.0 andFadeLength:10.0f];
            [_lectureName setTextAlignment:NSTextAlignmentCenter];
            [_lectureName setBackgroundColor:[UIColor clearColor]];
            [_lectureName setText:@"I am a moving Label in iphone Application"];
            _lectureName.adjustsFontSizeToFitWidth=NO;
            [_lectureName setAnimationCurve:UIViewAnimationOptionCurveEaseIn];
            [self.navigationItem setTitleView:_lectureName];
}

3\. call addMovingLabelText from viewDidLoad 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T10:25:37.583

将此文件添加到您的项目中并将其导入您的类中，然后在您的视图中添加以下命令并加载。我希望您正在为您的应用程序使用基于导航的模板。

[http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html](http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html)

然后在 viewdidload

```
AutoScrollLabel *autoScrollLabel=[[AutoScrollLabel alloc] initWithFrame:CGRectMake(10, 15, 320, 16)];
autoScrollLabel.text = @"Hi Mom!  How are you?  I really ought to write more often.";
autoScrollLabel.textColor = [UIColor whiteColor];
//self.title = @"Resources";
//self.title = @"%@"autoScrollLabel;
[self.navigationController.navigationBar addSubview:autoScrollLabel]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T09:13:47.060

好吧，导航栏可以用你自己的 titleView 自定义，所以你需要做的就是创建一个里面有滚动文本的视图。因为 SDK 中没有实现这个效果的组件，所以你必须在开源库中寻找或创建自己的。我从来没有用过，但是看看这个[UIScrollingLabel](http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-29T01:15:50.680

Swift 5 方法`MarqueeLabel`：

```
 let title = MarqueeLabel(frame: CGRect.zero, duration: 20, fadeLength: 10)
    title.textAlignment = .center
    title.textColor = .white
    title.text = header

    navigationController?.navigationBar.topItem?.titleView = title 
```

# git - 在构建中使用一组“最近的更改”

> ID：10911255
> 
> 赞同：1
> 
> 时间：2012-06-06T09:09:23.183
> 
> 标签：git, jenkins, jenkins-plugins

我有一个连续的构建，它从 git 中检查代码。我想进一步使用构建中的更改列表。

我知道[Email-ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)通过环境变量（如`CHANGES_SINCE_LAST_SUCCESS`或`CHANGES_SINCE_LAST_UNSTABLE`.

当我安装插件时，这些环境变量是否也可以在我的其他构建步骤中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:06:09.747

不，它们将不可用。这些不是环境变量，而是仅在 EmailExt 插件中有意义的标记。

[您可以使用通过Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)运行并利用[Jenkins Java API](http://javadoc.jenkins-ci.org/)的 Groovy 脚本以编程方式自己获取该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:04:45.983

我得到了类似的东西为 darcs 工作，就像这样。这里的一个关键部分是 darcs 设置了一些有用的环境变量，“post hook”函数可以用于这样的通知。如果你能找到一种方法来为 git 初始化一个等效的环境变量，那么你就设置好了！

```
curl -X HEAD http://ci.example.com/job/my_job/build && sleep 5 && echo description="<pre>$DARCS_PATCHES</pre>" | curl -X POST --data-binary @- http://ci.example.com/job/my_job/lastBuild/submitDescription 
```

理想情况下，有一种方法可以使用 Jenkins 的 REST API 更优雅地做到这一点，但我找不到它。所以首先，触发构建。然后我们休眠几秒钟，因为构建请求是异步的。最后，使用 darcs 提供的最新更改列表更新构建描述。

# java - 如果父级正在调整大小或 JComponent 的内容正在更改，如何使 JComponent 始终填充父级事件？

> ID：10911257
> 
> 赞同：2
> 
> 时间：2012-06-06T09:09:30.400
> 
> 标签：java, swing, jcombobox

我有一个 JCombobox，我在运行时添加了一些项目。其中一些很长，我的 Jcombobox 也长得很长。它位于带有 BoxLayout (PAGE_AXIS) 的 JPanel 容器中。我不知道如何防止增长...
我想知道应该有一个属性`overflow`，如果它是“123456789”，那么在组合框中项目将显示为“123 ...”。

**编辑：**

我看了你的回答，非常感谢。但问题是我的 JPanel 可以调整大小，我需要让它的孩子**总是**填满父母。所以我不能设置首选大小，因为我的 JPanel 的大小可以在运行时改变。
由于同样的原因，我也无法设置最大尺寸或使用 setPrototypeDisplayValue() 。

我尝试使用其他布局（GroupLayout、BorderLayout）但结果是一样的。

如果您愿意，我可以发布代码，但我认为没有必要。让我知道您是否仍然需要它。
刚刚尝试使用单行而不是 JCombobox 的 JTextArea。结果是一样的。我打字的时候它在增长。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T09:29:49.840

*   我通过覆盖[JComboBox.setPrototypeDisplayValue()解决了类似的问题](https://stackoverflow.com/questions/8679421/why-jcombobox-ignore-prototypedisplayvalue)

*   并且有两种方法（如@Stas所述）调整JComboBox或其派生的Popup或两者一起

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T09:12:42.140

你可以试试这个：

```
myCombo.setPreferredSize(new Dimension(myCombo.getHeight(), myCombo.getWidth())) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T09:14:49.033

该问题有多种解决方案。您可以更改布局以限制增长。

或以某种方式修复组合框的最大大小

或者添加一个自定义渲染器（扩展默认渲染器）并在那里设置首选大小。

# symfony1 - 同一张桌子上的多对多关系

> ID：10911261
> 
> 赞同：0
> 
> 时间：2012-06-06T09:09:44.333
> 
> 标签：symfony1, many-to-many, symfony-1.4, propel

我在使用 Symfony 1.4 和 Propel ORM 的同一张表上遇到了多对多关系的小问题。我的 schema.yml 看起来像这样：

```
propel:
  item:
    _attributes: { phpName: Item }
    id: { phpName: Id, type: INTEGER, size: '10', primaryKey: true, autoIncrement: true, required: true }
    type_id: { phpName: TypeId, type: INTEGER, size: '11', required: true, foreignTable: type, foreignReference: id, onDelete: RESTRICT, onUpdate: RESTRICT }
    owner_id: { phpName: OwnerId, type: INTEGER, size: '11', required: true, foreignTable: owner, foreignReference: id, onDelete: RESTRICT, onUpdate: RESTRICT }
    place_id: { phpName: PlaceId, type: INTEGER, size: '11', required: true, foreignTable: place, foreignReference: id, onDelete: RESTRICT, onUpdate: RESTRICT }
    picture_id: { phpName: PictureId, type: INTEGER, size: '11', required: false, foreignTable: picture, foreignReference: id, onDelete: RESTRICT, onUpdate: RESTRICT }
    supplier_id: { phpName: SupplierId, type: INTEGER, size: '11', required: false, foreignTable: supplier, foreignReference: id, onDelete: RESTRICT, onUpdate: RESTRICT }
    name: { phpName: Name, type: VARCHAR, size: '255', required: true }
    amount: { phpName: Amount, type: INTEGER, size: '11', required: true }
    wished_amount: { phpName: WishedAmount, type: INTEGER, size: '11', required: true }
    costs: { phpName: Costs, type: DECIMAL, size: '7', scale: '2', required: true }
    description: { phpName: Description, type: LONGVARCHAR, required: false }
    use_until: { phpName: UseUntil, type: DATE, required: false }
    last_used: { phpName: LastUsed, type: TIMESTAMP, required: false }
    last_updated: { phpName: LastUpdated, type: TIMESTAMP, required: false }
    _indexes: { item_FI_1: [type_id], item_FI_2: [owner_id], item_FI_3: [place_id], item_FI_4: [picture_id], item_FI_5: [supplier_id] }

 item_has_item:
    item_id: { type: INTEGER, required: true, foreignTable: item, foreignAlias: item, foreignReference: id, primaryKey: true}
    parent_item_id: { type: INTEGER, required: true, foreignTable: item, foreignAlias: parent_item, foreignReference: id, primaryKey: true}
    _indexes: { item_has_item_FKIndex1: [item_id], item_has_item_FKIndex2: [parent_item_id] } 
```

但是，`admin_double_list`管理生成器中的需要不会自动出现。确实如此，当第二个`foreignTable`被调整到另一个表时，例如`sf_guard_user`。我读过这可以在 Propel 1.3 中修复，但我不知道 Symfony 1.4 包含哪个 Propel 版本。

我希望我提供了足够的信息，以便你们解决我的问题。否则我将不得不制作另一个表来保存具有子项的项目，如下所示：

> 项目 <---- Item_has_item <---- Combined_item

**来自 j0k 的反应后编辑**

在 j0k 的反应之后，我确实更新了 sfPropelORMPlugin，它确实识别了这种关系。但是，保存时仍然出现错误（仅在建立关系时）：

```
Unable to execute INSERT statement [INSERT INTO `item_has_item` (`ITEM_ID`) VALUES (:p0)]
[wrapped: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a 
child row: a foreign key constraint fails (`SI/item_has_item`, CONSTRAINT 
`item_has_item_FK_1` FOREIGN KEY (`parent_item_id`) REFERENCES `item` (`id`))] 
```

经过长时间的广泛搜索，我发现表单生成器无法正确理解同一张表上的多对多关系。在函数 saveItemHasItemList($con = null) 中：

```
$c = new Criteria();
$c->add(ItemHasItemPeer::ITEM_ID, $this->object->getPrimaryKey());
ItemHasItemPeer::doDelete($c, $con);

$values = $this->getValue('item_has_item_list');
if (is_array($values))
    {
      foreach ($values as $value)
      {
        $obj = new ItemHasItem();
        $obj->setItemId($this->object->getPrimaryKey());
        $obj->setItemId($value);
        $obj->save();
      }
    } 
```

如您所见，ItemId 设置了两次，而 ParentItemId 未设置，因此是约束值。它应该生成为：

```
$c->add(ItemHasItemPeer::ITEM_ID, $this->object->getPrimaryKey());
$c->add(ItemHasItemPeer::PARENT_ITEM_ID, $this->object->getPrimaryKey()); 
```

&&

```
$obj->setParentItemId($this->object->getPrimaryKey());
$obj->setItemId($value); 
```

这解决了保存问题，但是，它仍然没有显示已经选择的关系。要解决这个问题，您还应该更改 updateDefaultsFromObject()：

```
foreach ($this->object->getItemHasItemsRelatedByItemId() as $obj) 
```

应该：

```
foreach ($this->object->getItemHasItemsRelatedByParentItemId() as $obj) 
```

请记住，这些函数位于 form/base/BaseItemForm.class.php 中，但应该在 /form/ItemForm.class.php 中覆盖这些函数。

我相信这是一个 Propel 错误，所以我明天会在 Propel TRAC 上发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:24:56.233

如果您使用的是最后一个 symfony 1.4，它使用[Propel 1.4.2](http://trac.symfony-project.org/browser/branches/1.4/lib/plugins/sfPropelPlugin/lib/vendor)。

您应该尝试使用[新版本](https://github.com/propelorm/sfPropelORMPlugin)的 Propel 插件。它使用 Propel 1.6。

# visual-studio-2010 - 手动配置 Microsoft Entity Framework 和 SQLite 提供程序

> ID：10911266
> 
> 赞同：0
> 
> 时间：2012-06-06T09:10:02.087
> 
> 标签：visual-studio-2010, sqlite, entity-framework-4

如何在不使用安装程序设置的情况下手动添加 SQLite Entity Framework 4.0 提供程序，以便 Visual Studio New EDMX 向导能够使用它来创建新的数据模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:06:08.597

我不确定您使用的是哪个提供程序，但我假设您使用的是[http://system.data.sqlite.org/提供的 System.Data.SQLite 提供程序](http://system.data.sqlite.org/)

为了在 Visual Studio 中使用设计时支持，您必须下载安装程序并安装所有内容。这将设置设计时支持并将`System.Data.SQLite`和`System.Data.SQLite.Linq`程序集安装到您的开发机器的全局程序集缓存中。

1.  为了让您的应用程序能够访问 SQLite 数据库，您需要将这两个程序集的引用添加到您的项目中。

2.  为此，请右键单击项目并选择“添加引用”。如果您运行安装程序，这两个程序集将在列表中。如果找不到它们，请从网站下载程序集文件，将它们放在驱动器上的任何位置，然后通过选择文件来引用它们。

3.  要分发您的应用程序，您只需发送程序集文件。最简单的方法是将这两个`dll`文件放在安装文件夹中。

4.  您可以通过右键单击 Visual Studio 解决方案资源管理器中的引用并选择属性来执行此操作。在这里，设置`Copy Local`为`True`。现在，当您的应用程序编译时，SQlite 程序集的副本将放在您的目标目录中。

5.  如果您手动部署文件，只需复制程序集文件并将它们保存在与可执行文件相同的文件夹中。如果您使用一键部署或任何其他类型的部署，请确保程序集与您的应用程序一起部署。

请注意，据我所知，设计时支持使用的程序集版本必须与您的应用程序部署的版本相同。因此，如果您更新一个，请确保您也更新另一个。

# salesforce - 什么是仪表板？

> ID：10911269
> 
> 赞同：0
> 
> 时间：2012-06-06T09:10:19.963
> 
> 标签：salesforce, apex-code, dashboard

任何人都可以向我解释一下，salesforce 中的仪表板是什么？以及如何在 Salesforce 中使用它，请提供我做仪表板的步骤。如果可能，还请提供任何可用的链接。

谢谢阿努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:23:55.663

不需要 sass，这家伙是 stackoverflow 的新手，可能是 salesforce 的新手。

去 youtube，那里有很多关于技术的长视频。此外，还有一本名为 force.com 基础知识的免费书籍，其中有一章关于该主题。如需帮助，请在 Twitter 上使用 IRC #salesforce 或 @salesforce。

祝你好运

# javascript - 创建数组时更改键的名称

> ID：10911272
> 
> 赞同：0
> 
> 时间：2012-06-06T09:10:31.477
> 
> 标签：javascript, jquery, arrays, solr

在 solr 查询中执行 groupby 后，我得到以下格式的响应。我正在使用 solr 3.5 版

```
"grouped":{
    "channel_id":{
      "matches":48,
      "ngroups":26,
      "groups":[{
          "groupValue":"204",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "channel_name":"ZeeTv",
                "channel_num":4,
                "title":"The Name",
                "channel_id":"204"
          }},
        {
          "groupValue":"166",
          "doclist":{"numFound":2,"start":0,"docs":[
              {
                "channel_name":"Sony",
                "channel_num":2,
                "title":"The Name",
                "channel_id":"166",
              {
                "channel_name":"Sony",
                "channel_num":2,
                "title":"The Puzzle",
                "channel_id":"166"
          }}]}} 
```

我通过以下方式在数组中获取响应：

```
for(var chl in data.grouped.channel_id.groups) {
    config['playlist'].push(data.grouped.channel_id.groups[chl]['doclist']['docs']); 
} 
```

这样就形成了每一个的单独阵列`groupValue`。数组的结构是：

```
"0"=>{"0"=>"value"},"1"=>{"0"=>"result1","1"=>"result2"} 
```

但是我想`groupValue`在创建数组时将键名（即“0”、“1”）更改为响应中的键名，以便我可以从数组`config['playlist']['166']`中检查所有节目`channel_id`。可以做到这一点，如果可以的话怎么做。我期待以下内容：

```
"204"=>{"0"=>"value"},"166"=>{"0"=>"result1","1"=>"result2"} 
```

此外，如果可能的话，可以进行 solr 查询，使得`channel_num`响应中的响应按升序排列，即 channel_num 2 的第一个结果，然后是 4。我已经完成了`groupby:channel_id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:25:17.523

那个怎么样？

```
for(var chl in data.grouped.channel_id.groups) {
    config['playlist'][data.grouped.channel_id.groups[chl].groupValue] = data.grouped.channel_id.groups[chl]['doclist']['docs'];
} 
```

Push 用于在数组末尾添加一个元素。但是任何 Javascript 对象都只是一个哈希表，所以你可以这样使用它。

顺便说一句，您可以使用以下代码使代码更简单`for each`：

```
for each(var chl in data.grouped.channel_id.groups) {
    config['playlist'][ch1.groupValue] = ch1['doclist']['docs'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T10:04:15.707

Pikrass 已正确回答...就订购`channel_num`而言，请尝试在您的查询中添加以下内容：

```
&sort=channel_num asc 
```

# mysql - GRANT 权限检查对 MySQL 性能有多大影响？

> ID：10911276
> 
> 赞同：3
> 
> 时间：2012-06-06T09:10:46.977
> 
> 标签：mysql

我正在阅读这篇文章： [http ://www.ajaxline.com/32-tips-to-speed-up-your-mysql-queries](http://www.ajaxline.com/32-tips-to-speed-up-your-mysql-queries)

在第 4 点，它指出：

> 在发出 GRANT 语句时使用更简单的权限可以使 MySQL 在客户端执行语句时减少权限检查开销。

问题：

1.  这对性能有何影响？
2.  “更简单的权限”是什么意思？例如。如果我有一个拥有所有权限的 root 用户，例如。在数据库上创建或更改表，以及我的 Web 应用程序的“appDbUser”，我应如何向 appDbUser 授予 SELECT、UPDATE、DELETE、INSERT 权限以符合上述文本中的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:08:48.030

最简单的方法是对其进行分析并亲自查看....

```
-- enable profile gathering
SET PROFILING = 1;

SELECT <query involving complex set of column and table permissions>;

SHOW PROFILE

--or SHOW PROFILES, and then SHOW PROFILE FOR QUERY 2 etc

-- turn profiling back off again
SET PROFILING = 0; 
```

这将显示一个表格，显示正在执行的查询的每个阶段以及持续时间。您可能会看到，即使具有相当复杂的权限，与查询的执行、排序和分组相比，时间并不重要

# php - 如何在uploadify中传递自定义值

> ID：10911279
> 
> 赞同：7
> 
> 时间：2012-06-06T09:10:56.983
> 
> 标签：php, html, uploadify

在 uploadify How to pass user input values to uploadify.php 这是我的代码：

```
 $(function() {

    $('#file_upload').uploadify({
    'buttonText' : 'BROWSE...',
    'method'   : 'post', 
    'height'   : 50, 
    'buttonCursor' : 'hand',
    'fileSizeLimit' : '100KB', 
    'formData' : {
    'title' :$('input:text[name:title]').val(),
    'about' :$('input:text[name:about]').val() },
    'auto'     : false,
    'swf'      : 'uploadify.swf',
    'checkExisting' : 'check-exists.php',
    'uploader' : 'uploadify.php',
    'onUploadSuccess' : function(file, data, response) {
    $("#message").css("display","block");
    $("#message").text("upload process completed successfully");
    setTimeout(function() {
    $('#message').fadeOut('fast');
}, 5000);
    }, 

    'onUploadError' : function(file, errorCode, errorMsg, errorString) {
       alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
    }  
});

    });
    </script>
    </head>
<?php include("includes/connection.php");?>
    <body>
        <div id="page">
            <div id="header">
                <h1>Photogallery</h1>
     <?php  include("includes/navigation.php"); ?>
            </div><!--header-->

            <div id="content">

                <div id="left">

<div id="message">
</div>
<?php

 ?>     

 <table>
    <tr>
        <td>
            <P>Title:</P>
        </td>
        <td>
            <input type="text" value="" name="title" id="idtitle" />
        </td>
    </tr>
    <tr>
        <td>
            <p>About:</p>
        </td>
        <td>
            <p><input type="text" value="" name="about"  />  </p>
        </td>
    </tr>
    <tr>
        <td>
            Select Photos you want to Upload
        </td>
        <td>
            <input type="file" name="file_upload" id="file_upload" />
        </td>
    </tr>
 </table>           

<a href="javascript:$('#file_upload').uploadify('cancel')">Cancel First File</a> | <a href="javascript:$('#file_upload').uploadify('cancel', '*')">Clear the Queue</a> | <a href="javascript:$('#file_upload').uploadify('upload', '*')">Upload the Files</a>

                </div><!--left--> 
```

这是我的 uplodify.php 文件

```
 <?php
require_once("includes/connection.php");

$targetFolder = '/workbench/sudeepc/photogallery/uploads' ; 
     $title=$_POST['title'];
     // $title="testtitle";
     $about=$_POST['about'];    
if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);

$query="INSERT INTO `photo` ( `id` , `path` , `uname` , `title` , `about` , `date` )
VALUES ('','${targetFile}','uname','${title}','${about}',now())";       

 /*
 $query="INSERT INTO `photo` ( `id` , `path` , `uname` )
 VALUES ( '','${targetFile}', '${title}');";
 */
 mysql_query($query,$connection);

    } else {
        echo 'Invalid file type.';
    }
}
?> 
```

我想为每次上传传递标题和关于，当用户选择多张图片时，用户可以为每张图片输入标题和关于。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:07:23.790

1.  如何在uploadify中传递自定义值：

`'formData': { 'userid': $("#uid").val(), 'taskid': $("#tid").val(), 'guid': $("#guid").val() },`

1.  有没有办法获取上传队列中的图像数量？- onDialogClose 你可以像这样访问队列：

`'onDialogClose': function(queueData) { alert(queueData.filesQueued + ' files were queued of ' + queueData.filesSelected + ' selected files. There are ' + queueData.queueLength + ' total files in the queue.'); },`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T09:23:22.580

要传递自定义值，请使用[formData](http://www.uploadify.com/documentation/uploadifive/formdata-2/)

然后你可以在 PHP 上访问它`$_POST['someKey']`

```
 ...
 'formData'         : {
     'title' : $('input:text[name:title]').val(),
     'about' : $('input:text[name:about]').val(),
      ...
  },
 .. 
```

要检查正在上传的文件数量，请添加此回调：

```
 ...
  onDialogClose : function() {
      console.log(this.queueData.filesQueued);
  },
  ... 
```

# jquery - 在 Spring 应用程序中解析 JSPX 后出现 jQuery 错误

> ID：10911280
> 
> 赞同：2
> 
> 时间：2012-06-06T09:11:04.073
> 
> 标签：jquery, spring, jsp

我有一个非常奇怪的问题：我在我的应用程序中使用 Spring Framework 3.0.5。为了呈现视图，我使用 Tiles Framework。

这是布局jspx文件的来源：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:tiles="http://tiles.apache.org/tags-tiles" xmlns:spring="http://www.springframework.org/tags" xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" >  
<jsp:output doctype-root-element="html" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>          
<jsp:output omit-xml-declaration="yes"/>

<head>

</head>

<body>
    <script type="text/javascript" src="${pageContext.request.contextPath}/resources/js/jquery.js"></script>
    <img id="testimg" src="${pageContext.request.contextPath}/resources/images/logo.png" onclick="$(this).fadeOut()" />
</body> 
```

现在的问题是：每次加载页面时，我都会从 jQuery 调用中得到一个 JavaScript 错误，并且没有执行进一步的 js 代码：

```
 Error: c.removeAttribute is not a function 
```

但是如果我复制页面的源代码并将其粘贴到本地文件中并使用浏览器打开它，一切都很好（不同的是，tomcat 不交付页面）。

呈现的页面如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head />
<body>
    <script src="/myContext/resources/js/jquery.js"
    type="text/javascript">

    </script>
    <img onclick="$(this).fadeOut()"
    src="/myContext/resources/images/logo.png" id="testimg" />
</body>
</html> 
```

图像显示正确，并且 query.js 也已加载。我真的没有想法了。我希望有一个人可以帮助我！！

提前致谢！

更新：此效果仅适用于 Safari 和 FF。在谷歌浏览器上它工作！而且我忘了提，我正在使用Mac ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:45:57.700

您提到您正在使用 JSPX。我建议您尝试在`<script>`and之间添加注释`</script>`，即

```
<script ...> <!-- please keep me --> </script> 
```

否则，JSPX 编译器会将`<script>`标签变成`<script .../>`，浏览器渲染时会出错。（这是我的猜测，我认为应该是对的。）

我不知道具体原因，但我也遇到了同样的问题，我用那个方法解决了它。如果你能找出详细的原因，请告诉我。

谢谢！

# android - Android：在 onCreate() 中完成时自动启动应用程序并退出

> ID：10911284
> 
> 赞同：0
> 
> 时间：2012-06-06T09:11:23.303
> 
> 标签：android, oncreate

我想制作一个测试应用程序，在调用时执行几行代码，然后自动退出。我希望所有这些都在 onCreate() 中完成。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    System.out.println("onCreate()");
    try {
        initSocket();        //connect to server
    } catch (IOException e) {
        e.printStackTrace();
    }
    new Thread(new AudioRecordThread()).start();
} 
```

问题是，如何在 onCreate() 中退出应用程序？我试过“this.finish()”但没有用。

# 任何人都可以帮忙吗？

**编辑** 我同意问题可能是由线程引起的。解决后会发布我的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:20:19.950

I think the Problem is your `AudioRecordThread` which shares the same Process with your App. You could definetly call this.finish() inside onCreate (done this often, never had problems), but that doesn't mean neccesarily that your `AudioRecordThread` gets killed the same time as your Activity. So without further Information about your Thread, and if it should stay alive on finish of your Activity I cannot give you any advise. If You want that Thread to be alive, after your Activity finishes, a Service is the way to go.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:30:37.580

您可以在活动中使用 AsynTask，只需将此类放在活动的同一文件中

=> 在 onPostExecute() 方法中，您将测试您的处理是否完成以关闭您的活动。

```
class MyAsynTask extends AsyncTask<Void, Integer, Boolean> {

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        // Init your variables, in my case it's my Progress Bar
        myprogress = new ProgressDialog(mcontext);
        myprogress.setTitle("Update");
        myprogress.setMessage("Update running ....");

        myprogress.show();
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        // TODO Auto-generated method stub
        boolean test = false;
        int j = 0;
        for (int i = 0; i < 50; i++) {
            j = i + 10;
            publishProgress(i);
            // Your implemention code to connect to the server
            if (i == 49)
                test = true;
        }

        return test;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
        myprogress.setProgress(values[0]);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        if (myprogress.isShowing())
            myprogress.dismiss();
        if (result){
            Toast.makeText(mcontext, "I Finished",Toast.LENGTH_SHORT).show();
            yourActivity.this.finish();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:14:54.367

试试这个

完成正在 onCreate() 和 onResume() 中工作。您的代码中还有另一个问题

```
 @Override
    protected void onResume()
    {
     super.onResume();
     finish();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T09:15:12.823

尝试

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    System.out.println("onCreate()");
    try {
        initSocket();        //connect to server
    } catch (IOException e) {
        e.printStackTrace();
    }
    new Thread(new AudioRecordThread()).start();
    finish();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T09:15:45.490

也许您正在尝试做的是一项服务？
看看这里：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# java - Maven 错误：未授权，ReasonPhrase：未授权

> ID：10911287
> 
> 赞同：49
> 
> 时间：2012-06-06T09:11:48.850
> 
> 标签：java, maven, repository, maven-3, nexus

我从 Nexus 存储库中检查了我的代码。我更改了我的帐户密码并在我的`settings.xml`文件中正确设置了它。在执行时，当它尝试从该存储库下载文件时，`mvn install clean`我收到错误消息。`Not authorized, ReasonPhrase:Unauthorized`

知道如何解决这个错误吗？我正在使用带有 Maven 3.04 的 Windows 7

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-06T14:19:49.803

从远程存储库获取依赖项时可能会发生此问题。就我而言，存储库不需要任何身份验证，并且已通过删除 settings.xml 文件中的服务器部分来解决它：

```
<servers>
    <server>
      <id>SomeRepo</id>
      <username>SomeUN</username>
      <password>SomePW</password>
    </server>
</servers> 
```

ps：我猜你的目标是*mvn clean install*而不是*maven install clean*

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2019-02-26T08:11:51.570

我最近遇到了这个问题。以下是解决的步骤

1.  检查 settings.xml 文件中的服务器部分。用户名和密码是否正确？

```
<servers>
  <server>
    <id>serverId</id>
    <username>username</username>
    <password>password</password>
  </server>
</servers>
```

2.  检查 pom.xml 文件中的存储库部分。**服务器标签的 id 应该与存储库标签的 id 相同。**

```
<repositories>
	<repository>
	  <id>serverId</id>  
	  <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
	</repository>
</repositories>
```

3.  如果 pom.xml 文件中未配置存储库标记，请查看 settings.xml 文件。

```
<profiles>
	<profile>
	  <repositories>
	    <repository>
		    <id>serverId</id>
		    <name>aliyun</name>
		    <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
	    </repository>
	  </repositories>
	</profile>
</profiles>
```

请注意，您应该确保**服务器标签的 id 应该与存储库标签的 id 相同。**

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-26T04:53:01.967

这里的问题是使用的密码中的拼写错误，由于密码中使用的字符/字母而不容易识别。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-11T14:25:49.577

您在`settings.xml`. 它正在尝试连接到存储库，但无法连接，因为密码未更新。更新并重新运行命令后，您应该会很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-22T17:25:49.477

就我而言，问题是我正在使用“sudo”执行 mvn 命令。

mvn test 在此处查找凭据：/home/aurelio/.m2/settings.xml -> 配置了 repo 凭据

sudo mvn test 在此处查找凭据：/home/root/.m2/settings.xml -> 未配置 repo 凭据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-13T16:52:25.267

我也遇到了类似的问题，但对我来说，我的密码已经`!`在里面了，为了解决这个问题，我更新了我的 nexus 密码`!`（我基本上更改了我的密码，你也可以通过转义来实现这一点`!`，当我尝试手动执行时发现了这个问题此操作来自我的 jenkins 节点，它不喜欢`!`我的密码），这已经解决了我的问题，我假设`!`当 Jenkins 尝试从我的 jenkins 节点终端连接到 SonaType Nexus 时，我的密码字符串导致了这个问题。我的问题可能与您的问题完全无关，但我也想在这里记录我的经验和解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-10T01:38:56.153

我从 pom.xml 中注释掉/删除了这部分代码。它奏效了。所以依赖项是从 maven 中央仓库下载的。

```
<repositories>
    ...
</repositories> 
```

# python - 如何在python中使用json提取数据

> ID：10911292
> 
> 赞同：0
> 
> 时间：2012-06-06T09:12:20.260
> 
> 标签：python

我编写的代码有问题。当我运行代码时出现错误：

```
Traceback (most recent call last):
File "test23_json_users.py", line 23, in <module>
for user_dict in abc['user_account']['sip_id']:
TypeError: list indices must be integers, not str 
```

编码：

```
result = '[{"user_account":[{"address":null,"name":null,"country":null,"password":"****","extension":"1112","sip_id":"23001@50.50.50.201","sip_name":"23001","user_id":7973712,"locked":false,"created":null,"h323_name":"1101","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1113","sip_id":"23002@50.50.50.201","sip_name":"23002","user_id":8847075,"locked":false,"created":null,"h323_name":"1102","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1114","sip_id":"23003@50.50.50.201","sip_name":"23003","user_id":3680630,"locked":false,"created":null,"h323_name":"1103","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1115","sip_id":"23004@50.50.50.201","sip_name":"23004","user_id":136391,"locked":false,"created":null,"h323_name":"1104","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1116","sip_id":"23005@50.50.50.201","sip_name":"23005","user_id":5692227,"locked":false,"created":null,"h323_name":"1105","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1117","sip_id":"23006@50.50.50.201","sip_name":"23006","user_id":7559026,"locked":false,"created":null,"h323_name":"1106","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1118","sip_id":"23007@50.50.50.201","sip_name":"23007","user_id":3226075,"locked":false,"created":null,"h323_name":"1107","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1119","sip_id":"23008@50.50.50.201","sip_name":"23008","user_id":6184875,"locked":false,"created":null,"h323_name":"1108","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1120","sip_id":"23009@50.50.50.201","sip_name":"23009","user_id":1711112,"locked":false,"created":null,"h323_name":"1109","city":null,"email":null,"phone":null,"zip":null},{"address":null,"name":null,"country":null,"password":"****","extension":"1121","sip_id":"23010@50.50.50.201","sip_name":"23010","user_id":5383101,"locked":false,"created":null,"h323_name":"1110","city":null,"email":null,"phone":null,"zip":null}]}'

params = result[result.find('{"'):]
#print params
abc = json.loads(params)

# Here I'm trying to extract just sip_id from the string result using json.
# I am not able to figure out what went wrong .
for user_dict in abc['user_account']['sip_id']:
    print  'usersname : %s' % (user_dict['sip_id']) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:18:27.497

改变

```
for user_dict in abc['user_account']['sip_id']: 
```

到

```
for user_dict in abc['user_account']: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:18:42.207

`abc['user_account']`应该是一个列表。

一个列表`a=['hello',1,2,'people']`有 4 个元素通过索引`a[0]`访问`a[3]`。

字典`d={'a':1,'b':2}`有键和值。在这种情况下`d['a']`，值为 1，值为`d[b']`2。

如果要访问 中的某些内容`abc['user_account']`，请键入`abc['user_account'][42]`。如果你想迭代它

```
for a in abc['user_account']:
  print a 
```

# windows - Windows 中潜在的异步（重叠）I/O 实现

> ID：10911294
> 
> 赞同：1
> 
> 时间：2012-06-06T09:12:28.363
> 
> 标签：windows, winapi, asynchronous, io, overlapped-io

我想讨论 Windows 中潜在的异步（重叠）I/O 实现，因为有很多方法可以实现它。Windows 中的重叠 I/O 提供了异步处理数据的能力，即操作的执行是非阻塞的。

**编辑：**这个问题的目的一方面是讨论改进我自己的实现，另一方面是**讨论替代实现**。什么异步 I/O 实现在并行重 I/O 上最有意义，什么在小型单线程应用程序中最有意义。

我将引用[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686358%28v=vs.85%29.aspx)：

> 当一个函数被同步执行时，它在操作完成之前不会返回。这意味着调用线程的执行可以无限期地阻塞，同时等待耗时的操作完成。调用重叠操作的函数可以立即返回，即使操作尚未完成。这使得一个耗时的 I/O 操作可以在后台执行，而调用线程可以自由地执行其他任务。例如，单个线程可以在不同的句柄上同时执行 I/O 操作，甚至可以在同一个句柄上同时执行读写操作。

我假设读者熟悉重叠 I/O 的基本概念。

异步 I/O 的另一种解决方案是完成端口，但这不是本次讨论的主题。有关其他 I/O 概念的更多信息，请参见 MSDN“[关于文件管理 > 输入和输出 (I/O) > I/O 概念](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365199%28v=vs.85%29.aspx)”

我想在这里展示我的（C/C++）实现并分享它以供讨论。

这是我的扩展 OVERLAPPED 结构，称为`IoOperation`：

```
struct IoOperation : OVERLAPPED {
    HANDLE Handle;
    unsigned int Operation;
    char* Buffer;
    unsigned int BufferSize;
} 
```

每次调用`ReadFile`或`WriteFile`调用异步操作时都会创建此结构。该`Handle`字段应使用相应的设备/文件句柄进行初始化。`Operation`是一个用户定义的字段，它告诉我们调用了什么操作。该字段`Buffer`是指向先前分配的具有给定大小的内存块的指针`BufferSize`。当然，这个结构体可以随意扩展。它可以包含操作结果，实际传输的大小等。

我们需要的第一件事是每次完成重叠 I/O 时都会发出一个（自动重置）事件句柄。

```
HANDLE hEvent = CreateEvent(0, FALSE, FALSE, 0); 
```

首先，我决定对所有异步操作只使用一个事件。然后我决定用[RegisterWaitForSingleObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685061%28v=vs.85%29.aspx)的线程池线程注册这个事件。

```
HANDLE hWait = 0;
....
RegisterWaitForSingleObject(
    &hWait,
    hEvent,
    WaitOrTimerCallback,
    this,
    INFINITE,
    WT_EXECUTEINPERSISTENTTHREAD | WT_EXECUTELONGFUNCTION
); 
```

因此，每次发出此事件信号时，`WaitOrTimerCallback`都会调用我的回调。

异步操作的初始化如下：

```
IoOperation* Io = new IoOperation(hFile, hEvent, IoOperation::Write, Data, DataSize);
if (IoQueue->Enqueue(Io)) {
    WriteFile(hFile, Io->Buffer, Io->BufferSize, 0, Io);
} 
```

`GetOverlappedResult`每个操作都排队并在我的`WaitOrTimerCallback`回调中成功调用后被删除。代替`new`一直在这里调用，我们可以使用内存池来避免内存碎片并加快分配速度。

```
VOID CALLBACK WaitOrTimerCallback(PVOID Parameter, BOOLEAN TimerOrWaitFired) {
    list<IoOperation*>::iterator it = IoQueue.begin();
    while (it != IoQueue.end()) {
        bool IsComplete = true;
        DWORD Transfered = 0;

        IoOperation* Io = *it;
        if (GetOverlappedResult(Io->Handle, Io, &Transfered, FALSE)) {
            if (Io->Operation == IoOperation::Read) {
                // Handle Read, virtual OnRead(), SetEvent, etc.
            } else if (Io->Operation == IoOperation::Write) {
                // Handle Read, virtual OnWrite(), SetEvent, etc.
            } else {
                // ...
            }
        } else {
            if (GetLastError() == ERROR_IO_INCOMPLETE) {
                IsComplete = false;
            } else {
                // Handle Error
            }
        }
        if (IsComplete) {
            delete Io;
            it = IoQueue.erase(it);
        } else {
            it++;
        }
    }
} 
```

当然，为了多线程安全，我们在访问 I/O 队列时需要一个锁保护（临界区）。

这种实现方式有优点也有缺点。

**优点**：

*   在持久化线程池线程中执行，无需手动创建线程
*   只需要一个事件
*   每个操作都在一个 I/O 队列中排队（可以稍后调用 CancelIoEx）

**缺点**：

*   I/O 队列需要额外的内存/cpu 时间
*   对所有排队的 I/O 甚至未完成的 I/O 调用 GetOverlappedResult

# codeigniter - 致命错误：PHP 版本升级后未找到“类别”类

> ID：10911296
> 
> 赞同：0
> 
> 时间：2012-06-06T09:12:36.487
> 
> 标签：codeigniter, phpactiverecord

我使用 CodeIgniter 2.1，我的生产服务器更新到 PHP 5.4.3-1，使用 phpactiverecord 的页面什么也不显示，也不显示任何错误。

在我的 5.3.6 测试服务器中工作正常。

我使用 2012 年 5 月的夜间构建版本。我尝试使用旧版本和稳定版本。

php-activerecord 在 php 5.4.3 中不能正常工作？

* * *

**编辑**：我发现我的新服务器没有`displays_errors = ON`。激活后，我看到错误：

```
Fatal error: Class 'Category' not found in /srv/www/framework/application/controllers/categories.php on line 26 
```

在第 26 行：

```
$data["categories"] = Category::findby($parent_id); 
```

categories.php 存在，`/srv/www/framework/application/controllers/`这在 PHP 5.3.6 上运行良好。

我需要多打电话还是以不同的方式打电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:59:22.370

我找到了解决方案。

此解决方案适用于通过最新 SPARKS 版本的 php-activerecord。

调试 autoload_function，我看到模型文件加载的第一个字母大写，仅在 PHP 5.4.3 中，而不是在 5.3.x 中，并且文件清洗没有加载。

在以下位置找到 ActiveRecord.php

```
yourfolder/sparks/php-activerecord/0.0.0.2/vendor/php-activerecord 
```

搜索功能：

```
activerecord_autoload($class_name) 
```

第 49 行更改：

```
 $file = $root.DS.$file_name; 
```

为了

```
 $file = $root.DS.strtolower($file_name); 
```

现在它起作用了！

pd 在解决这个问题之前，我发现了另一个使用 PHP 5.4.3 的奇怪案例。如果您的数据库密码在字符串中包含“/”，则函数 parse_url() 将返回 false。因此，php-activerecord 无法连接到文件 yourfolder/sparks/php-activerecord/0.0.0.2/vendor/php-activerecord/lib/connection.php 中的数据库：文件 parse_connection_url()。

在 PHP 5.3 上返回正确的数组。

# javascript - Highcharts Pie 不显示标签（对于某些数据系列）

> ID：10911301
> 
> 赞同：2
> 
> 时间：2012-06-06T09:13:08.017
> 
> 标签：javascript, highcharts

我正在使用 Highcharts 显示一个简单的 PIE 图表：

当我使用系列数据时，饼图正确显示（带有标签）：`[ ['cars', 8], ['bikes',15] ]` 作为实例：

```
series: [{
            type: 'pie',
            name: 'Vehicles',
            data: [ ['cars', 8], ['bikes',15] ]
          }] 
```

但是，如果我用作数据，它根本不会显示标签： [ ['cars', 6], ['bikes',15] ]

（汽车是 6 而不是 8）。

简而言之，对于某些数据系列标签显示，对于其他一些根本不显示！

我正在使用最后一个 HC 版本：Highcharts JS v2.2.4。

你对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:39:03.127

尝试如下数据部分部分

```
 data: [
        {name: 'cars', y: 8},
        {name: 'bikes', y: 15}
       ] 
```

谢谢，阿伦克里希南

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:06:01.813

我无法复制您遇到的问题。不过，我确实为您创建了下面的饼图。

*   [**汽车 8 - 自行车 15**](http://jsfiddle.net/Zg2jz/4/)
*   [**汽车 6 - 自行车 15**](http://jsfiddle.net/Zg2jz/5/)

也许看看这两个例子会帮助你弄清楚你做错了什么。

# javascript - 在 Prototype.js 中获取元素的外部宽度

> ID：10911310
> 
> 赞同：1
> 
> 时间：2012-06-06T09:13:46.600
> 
> 标签：javascript, prototypejs

Prototype.js 有返回元素外部宽度的简单方法吗？

即：宽度+左/右填充+左/右边框。

像 jQuery 的 .outerWidth()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:17:42.723

[Element.Layout](http://api.prototypejs.org/dom/Element/Layout/)可以在这方面为您提供帮助，这是一个完整的[小提琴演示选项](http://jsfiddle.net/epoch/eDqzg/1/)

**来自小提琴的代码**

```
var layout = $('d1').getLayout();
console.log('My Width : ' + layout.get('width') + 'px');
console.log('My Full Width : ' + layout.get('border-box-width') + 'px'); 
```

​</p>

# drupal - 每页 Drupal 7 个不同大小的侧边栏

> ID：10911316
> 
> 赞同：0
> 
> 时间：2012-06-06T09:14:16.020
> 
> 标签：drupal, drupal-7, themes

在 drupal 7 中，我有一个侧边栏宽度为 200 像素的页面，我需要另一个具有相同侧边栏的页面，但它必须是 300 像素宽度。如何在不创建全新主题的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:26:36.897

您将创建两个不同的节点并根据需要编写它们不同的模板文件。您可以编写页面模板或节点模板。

编辑：
page--node--x.tpl.php 也编辑节点 x

# git - 如何删除 git 中的第一个提交？

> ID：10911317
> 
> 赞同：246
> 
> 时间：2012-06-06T09:14:37.090
> 
> 标签：git, repository, commit, git-commit

我很好奇如何删除 git 中的第一个提交。

提交任何事情之前的修订是什么？此修订版是否有名称或标签？

* * *

## 回答 #1

> 赞同：455
> 
> 时间：2015-09-24T15:55:31.933

对我来说，最安全的方法是使用`update-ref`命令：

```
git update-ref -d HEAD 
```

它将删除命名的引用`HEAD`，因此它将**重置（轻轻地，您不会丢失您的工作）**您当前分支的所有提交。

如果您想要将第一个提交与第二个提交合并，您可以使用以下`rebase`命令：

```
git rebase -i --root 
```

最后一种方法可能是创建一个孤立分支，一个具有相同内容但没有任何提交历史记录的分支，并在其上提交您的新内容：

```
git checkout --orphan <new-branch-name> 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-06-06T09:27:31.373

在第一次提交之前没有任何内容，因为每个提交都指的是父提交。这使得第一次提交变得特殊（孤儿提交），因此无法引用先前的“状态”。

因此，如果您想修复提交，您可以简单地`git commit --amend`：这将修改提交而不创建另一个提交。

如果您只想重新开始，请删除`.git`存储库，然后使用`git init`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-07-28T10:47:37.553

```
# Check out to a temporary branch:
git checkout --orphan TEMP_BRANCH

# Add all the files:
git add -A

# Commit the changes:
git commit -am "Initial commit"

# Delete the old branch:
git branch -D master

# Rename the temporary branch to master:
git branch -m master

# Finally, force update to our repository:
git push -f origin master 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-10-22T05:20:22.040

我一直在寻找一种方法来撤消 repo 中的所有 git 提交，就像它们从未发生过一样。

变基将在一定程度上起作用。然而，第一个（按时间顺序最旧的 git 提交）总是会有问题，因为它没有父级，所以会出错。

这些答案都没有为我解决这个问题。但是经过大量的搜索和反复试验，我发现这行得通！

```
git update-ref -d HEAD
git push origin master -f 
```

希望这对您有所帮助。祝你有美好的一天。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-05-02T20:27:48.527

你可能只想编辑你的第一次提交（因为在 git repo 中总是有第一次提交）。考虑使用`git commit --amend --reset-author`而不是通常的`git commit --amend`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-08T16:57:08.907

您可以做的另一种方法是：

1.  结帐到您要保留的分支（例如 dev）`git checkout dev`
2.  现在，删除要重置的分支`git branch -D master`
3.  现在，创建一个同名的空分支`git checkout --orphan master`

当然，所有这些都取决于您的用例，但是如果您有多个分支，则删除`.git`目录没有意义。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-06T09:31:12.107

如果您想保留其他分支，但是例如让`master`分支重新开始，而没有其他分支的共同历史记录，实现此目的的一种安全方法是创建一个新存储库，并将其内容推送到旧存储库中：

```
cd ..
git init newrepo
cd newrepo
# make some initial commits
git push ../oldrepo master:newmaster 
```

这会`newmaster`在旧存储库中创建分支，其历史记录与任何其他分支都不相同。当然，你也可以`master`用`git push -f`.

如果要销毁所有分支和所有现有内容，则只需运行

```
rm -rf .git/ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-27T11:19:42.437

如果您刚刚提交但没有推送它，那么只需删除**.git**目录并`git init`再次...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-27T17:45:04.997

问题的答案取决于是否：

*   您想删除分支上的第一个且仅提交（同时保留其他分支），或者是否

*   您想删除某个分支上的第一个提交，同时“保留”后续提交（和其他分支）。

其中第二个相对简单。您基本上必须重新定位到 root - 这里的大多数答案都是关于如何做到这一点的。

做第二个（从一个分支中删除第一个也是唯一一个提交，同时不理会其他分支）更难。或者，至少，如果您希望它发生并且让更改反映在 GitHub 或 Bitbucket 中，则尤其困难。（据我所知）在 Git 中根本没有办法推送或强制推送没有提交的分支。而且（再次，据我所见）根本没有办法在 GitHub 或 Bitbucket 中创建一个没有提交的新的空分支。因此，您基本上必须创建一个新存储库才能创建一个完全空的分支，然后添加回您想要的分支（包括您想要的提交） - 根据@user1338062 的回答。

因此，我希望这个答案能够澄清可能不明显的问题 - 对于两种不同（或多或少合理）的场景，您可能希望能够按照顺序执行*两种*不同的方法完全掌握 OP 的要求。

# objective-c - 我们是否在快速枚举中发布参数

> ID：10911321
> 
> 赞同：1
> 
> 时间：2012-06-06T09:14:50.390
> 
> 标签：objective-c, loops, fast-enumeration

我们是否在快速枚举中发布参数？因此，此代码是否准确：

```
 for (MKCircle *circle in localOverlays) {

    [mapView addOverlay: circle];

    [circle release]; // Is it perfectly alright to call this?
} 
```

我只是想知道，我第一次使用快速枚举！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:52:34.563

答案在[Apple 内存管理规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)中。

> *   您拥有您创建的任何对象
>     
>     
>     
>     您使用名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法创建对象</p>

你创造了`circle`吗？不。

> 您可以使用保留来获取对象的所有权

你留住了`circle`吗？不。

因此，您不拥有该对象。

> 您不得放弃您不拥有的对象的所有权

既然您已确定自己不拥有`circle`. 您问题中示例代码中的版本不应该存在。事实上，最有可能的是，它会在某个地方导致崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:25:55.103

*快速枚举通常*不会创建新对象，它会遍历现有对象。这就是为什么它几乎从来都不是正确的做法：常规容器（`NSArray`, `NSSet`, `NSDictionary`）的快速枚举在使它们可用于循环之前不会保留对象，因此释放它们将是一个错误。即使在一个`dealloc`方法中你也不应该这样做：释放容器也会释放它的项目，所以你不应该单独释放它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T09:31:29.977

不，我不认为这是正确的做法。它既不对实例做 a`retain`也不做 a`release`

```
for (MKCircle *circle in localOverlays) {

    [mapView addOverlay: circle]; //retain here
} 
```

addOverley：应该做一个retain to ，当mapView不需要它时`circle`，它是mapView的责任`release`

简单的指南，你`retain`它，`release`当你完成使用它时

# c# - 创建注册表

> ID：10911322
> 
> 赞同：0
> 
> 时间：2012-06-06T09:14:51.977
> 
> 标签：c#, registry

我正在尝试创建一个注册表，但它给了我以下消息。

拒绝访问注册表项“HKEY_LOCAL_MACHINE\Software\aspire”

以下是我的代码。

```
protected void CreateRegistry()
    {
        dtStartDate = DateTime.Now;

        string strUser = Environment.UserDomainName + "\\" + Environment.UserName;

        RegistrySecurity rs = new RegistrySecurity();
        //rs.AddAccessRule(new RegistryAccessRule("Administrator", RegistryRights.FullControl, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit, PropagationFlags.InheritOnly, AccessControlType.Allow));
        rs.AddAccessRule(new RegistryAccessRule(strUser, RegistryRights.FullControl, InheritanceFlags.None, PropagationFlags.None, AccessControlType.Allow));

        RegistryKey regDate = null;

        try
        {
            regDate = Registry.LocalMachine.CreateSubKey("Software\\aspire", RegistryKeyPermissionCheck.Default, rs);

            if (regDate != null)
            {
                regDate.SetValue("Date", dtStartDate.ToString(strDateFormat));
                regDate.Close();
                MessageBox.Show("created");
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message.ToString());
        }

    } 
```

当我在不同的系统中执行相同的代码时，代码运行正确。
b'coz 没有在该系统上创建任何用户。但现在在这个系统中，我从控制面板创建了 2 个用户，这发生在我身上。两个系统都在 Windows 7 上运行。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:19:05.350

如果您使用的是 Windows 7，请开始以管理员模式运行该应用程序。如果您从 Visual Studio 调试，请以管理员模式启动 Visual Studio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:19:15.590

a) 以提升的权限运行应用程序或 b) 使用 HKEY_CURRENT_USER 代替，这是更好的做法，除非您确实必须为所有用户安装该软件。

如果您希望您的应用程序默认请求管理员权限，则需要添加清单并添加。

执行时会弹出提示。

# logic - 线性时序逻辑约束

> ID：10911330
> 
> 赞同：2
> 
> 时间：2012-06-06T09:15:28.333
> 
> 标签：logic

我想用线性时间逻辑表达以下约束。

**如果 A 发生，那么 B 必须直接发生在它之前。**

我尝试了“BR！A”（！A 在 B 变为真之前一直为真；B 可能永远不会变为真），但它是不正确的，因为 A 可能会在 B 发生后发生，也可能不会发生。

任何逻辑专家可以帮助我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:01:25.767

好吧，如果 X 被读取为下一个，即 Xp 表示在下一个时间步，p 就是这种情况，那么 Xp → q 就是你要找的。

或者在你的信中：XA → B

（X 有时被替换为 N 或圆圈，但始终存在于 LTL 中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T02:28:08.823

您可以为此使用 PT-LTL。它过去的时间零担。公式是 A -> XB，这里 X 表示之前的意思。

您可以使用 JavaMOP 来实现 PTLTL 监视器。

# python - Python / Django中模型/对象实例的字符串字典表示？

> ID：10911337
> 
> 赞同：1
> 
> 时间：2012-06-06T09:15:46.097
> 
> 标签：python, django, dictionary, model, representation

我觉得这是一个很简单的问题，但是我是Python新手，同时我也在学习Django。

我的目标是创建一个字符串字典表示形式，即它的字典格式是一个字符串，是 Django 中模型实例的一个字符串。我怎么能那样做？是否有可以直接从对象实例调用的内置函数，还是必须定义一个？

**更新：**

我想在模型定义本身中调用这个功能，即我正在实现一个需要这个功能的类方法或函数。我正在考虑一种功能，它的行为类似于 python 的内置函数`locals()`，但应该只返回模型的属性。

我还想补充一点，我将在尚未保存到数据库的模型实例上调用此功能。因此，从本质上讲，我将处理一个模型实例，该实例表示尚未在数据库中的记录。因此，我猜任何使用 a 的功能`Manager or QuerySet`都不是我要寻找的原因。

例子：

```
class Person(models.Model):
     name = ...
     age =  ...

     def func_doing_something(self):
          #get the string dictionary representation of this model's instance
          #do something to it
          #return something 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:17:29.773

使用 p = Person(name='john', age=10).values()

见这里：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values)

要将其转换为字符串，请使用：

```
s = str(p[0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:30:12.433

您可以将对象序列化为 json 格式，例如使用 django 内置[序列化](https://docs.djangoproject.com/en/dev/topics/serialization/#id2)程序 这使您可以很容易地反序列化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T18:42:10.603

我从这个[SO 帖子](https://stackoverflow.com/a/1019885/191064)中找到了我正在寻找的解决方案......

一些 Django 对象`obj`

```
[(field.name, getattr(obj,field.name)) for field in obj._meta.fields] 
```

只需调用`dict()`结果即可。

# .net - WCF 路由器：一种方式和请求-回复操作

> ID：10911344
> 
> 赞同：1
> 
> 时间：2012-06-06T09:16:47.833
> 
> 标签：.net, wcf, router

为了准备我的 70-513 考试，我发现了以下问题：

Windows Communication Foundation (WCF) 服务使用单向和请求-答复操作实现合同。该服务通过 TCP 传输公开。客户端使用路由器与服务通信。路由器实现如下。（包含的行号仅供参考。）

```
01 ServiceHost host = new ServiceHost(typeof(RoutingService));
02 host.AddServiceEndpoint (
03     typeof(ISimplexDatagramRouter),
04     new NetTcpBinding(), "net.tcp://localhost/Router"
05    );
06 List<ServiceEndpoint> lep = new List<ServiceEndpoint>();
07 lep.Add (
08     new ServiceEndpoint (
09         ContractDescription.GetContract(
10             typeof(ISimplexDatagramRouter)
11    ),
12     new NetTcpBinding(),
13     new EndpointAddress("net.tcp://localhost:8080/Logger")
14    )
15 );
16 RoutingConfiguration rc = new RoutingConfiguration();
17 rc.FilterTable.Add(new MatchAllMessageFilter(), lep);
18 host.Description.Behaviors.Add(new RoutingBehavior(rc)); 
```

请求-回复操作失败。您需要确保路由器可以处理单向和请求-回复操作。你该怎么办？

*   **一个**。将第 03 行更改如下

    > typeof((IRequestReplyRouter)

*   **乙**。将第 03 行更改如下

    > typeof((IDuplexSessionRouter)

*   **C.** _ 将第 10 行更改如下

    > typeof((IRequestReplyRouter)

*   **D.** _ 将第 10 行更改如下

    > typeof((IDuplexSessionRouter)

他们说正确的答案是**B**，但我无法理解（我需要理解 :)）。我会回答响应**A**，因为没有回调方法，我们不需要 DuplexSessionRouter，不是吗？然后一个 IRequestReply 就足够了？

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T00:44:43.657

路由服务使用定义用于接收和发送消息的通道形状的合同，因此输入通道的形状必须与输出通道的形状相匹配。

因此，如果您执行到使用请求-回复通道形状的端点的路由，则必须在入站端点上使用兼容的合同，例如 IRequestReplyRouter。

这意味着，如果您的目标端点使用具有多种通信模式的合约（例如混合单向和双向操作），则您无法创建一个可以接收消息并将消息路由到所有端点的服务端点。一种解决方法是在路由服务中使用双工合同，例如 IDuplexSessionRouter。

参考：

[http://msdn.microsoft.com/en-us/magazine/cc546553.aspx](http://msdn.microsoft.com/en-us/magazine/cc546553.aspx)

[http://msdn.microsoft.com/en-us/library/ee517422.aspx](http://msdn.microsoft.com/en-us/library/ee517422.aspx)

# templates - 带有全局命名空间中的内联模板函数的“`<' 标记之前的预期初始化程序”

> ID：10911345
> 
> 赞同：5
> 
> 时间：2012-06-06T09:16:48.737
> 
> 标签：templates, g++

我正在尝试编译一些代码，在我的一个头文件中，我在全局命名空间中有以下函数：

```
template <class T>
inline
T
to_type<T> (const std::string& string)
{
    std::stringstream ss(string);
    T value;
    ss >> value;
    return value;
} 
```

然而不知何故，这会引发 g++ 错误`expected initializer before '<' token`（我更改了其中一个引号以解决与 SO 格式的冲突）

我不明白这个错误。为什么`to_type`不是有效的初始化程序？这是第一次使用这个符号。如何修复此代码段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T09:21:49.230

正确的语法是

```
template <class T>
inline
T
to_type(const std::string& string)
{
    std::stringstream ss(string);
    T value;
    ss >> value;
    return value;
} 
```

（注意`<T>`后面没有`to_type`）。

`<>`只放在声明特化时声明的函数（或类）的名称之后，而不是在声明基本模板时。

# delphi - Delphi XE2 .Z Unix 压缩文件库

> ID：10911347
> 
> 赞同：3
> 
> 时间：2012-06-06T09:17:06.913
> 
> 标签：delphi, zip

我需要管理 .Z（Unix 压缩）文件，主要是解压缩功能。最好的图书馆是什么？最好避免使用 Dll（如 7z.dll）。编辑：今天我有一个与 7z.dll 接口的 JCL 压缩库的解决方案。我只是想寻找一个更轻更简单的解决方案，因为我只需要“.Z”解压功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:47:06.223

要解压缩 .Z 文件，我只需使用 Delphi XE2 内置的 ZLib 库：

```
uses ...,ZLib;

procedure UnpackFiles;
var
  LList: TStringDynArray;
  I: Integer;
  FileName: String;
  DestFileName: String;
  LUnZip: TZDecompressionStream;
  LInput, LOutput: TFileStream;
begin
  LList:= TDirectory.GetFiles(ImportDir, '*.gz');
  for i:= 0 to Length(LList)-1 do
  begin
    FileName:= LowerCase(LList[i]);
    DestFileName:= ChangeFileExt(FileName, '.csv');
    { Create the Input, Output, and Decompressed streams. }
    LInput := TFileStream.Create(FileName, fmOpenRead);
    LOutput := TFileStream.Create(DestFileName, fmCreate);
    LUnZip := TZDecompressionStream.Create(LInput, 15+16); // 16 = read as gzip header !

    Log(Format('create uncompressed file %s', [DestFileName]));
    { Decompress data. }
    LOutput.CopyFrom(LUnZip, 0);

    { Free the streams. }
    LUnZip.Free;
    LInput.Free;
    LOutput.Free;
    Log(Format('Delete compressed file %s', [FileName]));
    DeleteFile(FileName);
  end;
end; 
```

重要的部分是设置读取 gzip 标头的选项：

```
LUnZip := TZDecompressionStream.Create(LInput, 15+16); // 16 = read as gzip header ! 
```

# objective-c - 我可以使用系统错误代码作为用户定义的错误代码吗

> ID：10911349
> 
> 赞同：1
> 
> 时间：2012-06-06T09:17:10.280
> 
> 标签：objective-c, xcode, cocoa, error-handling

我怎么知道苹果允许哪些常量将它们用作用户定义的错误代码。如果系统错误代码中存在常量，我仍然可以将它用于我自己的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:17:03.943

阅读 NSError。它是明确设计的，因此您可以定义自己的错误域和代码

# javascript - 在javascript中覆盖原型时对象存在两种状态

> ID：10911351
> 
> 赞同：1
> 
> 时间：2012-06-06T09:17:23.153
> 
> 标签：javascript

我试图了解 Javascript 中的面向对象编程并遇到以下问题：（这是 Stoyan Stefanov 书中可以找到的简化示例）

我创建了一个构造函数来创建 Dog 对象：

```
function Dog(){
this.tail = true;
} 
```

然后我使用 Dog 构造函数实例化一个对象：

```
var benji = new Dog(); 
```

然后我为 Dog 的原型对象分配一个新属性：

```
Dog.prototype.shout = 'Woof!'; 
```

现在，正如预期的那样，benji 既可以使用尾巴，也可以使用喊叫。一切都很好，直到我覆盖了 Dog 的原型：

```
Dog.prototype = {paw : 4}; 
```

现在，benji.paw 变得未定义。我的问题是，benji 不应该也可以访问新的原型对象吗？更莫名其妙的是，当我在原型对象被重新定义后创建了一个新的 Dog 实例时：

```
var lucy = new Dog(); 
```

lucy.paw 的计算结果为 4。 lucy 的构造函数对象定义似乎与 benji 的不同。我很困惑这里发生了什么，有人可以解释一下javascript的对象内存模型是如何工作的吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:32:50.320

`prototype`只是一个对象。

如果你这样做

`var oldProto = Dog.prototype`

在你覆盖它之前

`Dog.prototype = { paws: 4 }`

那么你可以使用旧的原型对象来操作它的子对象：

`oldProto.teeth = true`—> `benji.teeth == true`。

# iphone - ios - iphone：如何在像原生 ios 闹钟应用程序一样编辑时创建动画 UItableviewcell

> ID：10911352
> 
> 赞同：0
> 
> 时间：2012-06-06T09:17:27.590
> 
> 标签：iphone, c, object, ipod-touch

我已经在 iphone/ipod 上制作了一个类似于默认闹钟的闹钟。但我不知道如何在像本机 ios 时钟应用程序一样编辑时创建动画 UItableviewcell。请帮助我。谢谢

像这样的动画。

![在此处输入图像描述](../Images/b744067f81902390fe777f40cc4408bf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:39:49.570

我看到发生的是控件被隐藏了。

UITableView 和 UITableViewCell 类都有一个名为：

```
editing 
```

以及一个名为：

```
- (void) setEditing : (BOOL) editing animated : (BOOL) animated; 
```

这两者都可用于将 UITableView/UITableViewCell 置于“编辑”模式。该属性可用于创建 UITableView/UITableViewCell 并在添加到视图层次结构之前将其设置为“编辑”模式。

然而，该方法虽然也可用于以编程方式实现相同的目的，但也可用于覆盖/增强 UITableView 的/UITableViewCell 的“编辑”行为。在这种情况下，UITableViewCell 可能会使用它来通知 UITableViewCell 所属的 UITableView 已将 UITableView 设置为“编辑”模式这一事实：

```
- (void) setEditing : (BOOL) editing animated : (BOOL) animated
{ // setEditing:animated: ()
    mySwitchView = [[self contentView] viewWithTag : 100];
    CGFloat alphaValue = editing ? 0.0f : 1.0f;

    [UIView animateWithDuration : 3.0f
                     animations : ^(void)
                                 {
                                     [mySlideView setAlpha : alphaValue];
                                 }
} // setEditing:animated: () 
```

因此，如果这是 Apple 提供的 UTableViewCell 类型之一。为了让我们的任何控件成为 UITableViewCell 的一部分，需要在 UITableViewDataSource 提供的 UITableView 方法中将其添加到 UITableViewCell 的内容视图中：

```
- (UITableViewCell*) tableView : (UITableView*) cellForRowAtIndexPath : (NSIndexPath*) indexPath
{ // tableView:cellForRowAtIndexPath: ()
    static cellIdentifier = @"cell-identifier";

    UISwitchView*    switchView = nil;
    UITableViewCell* cell       = [tableView dequeueReusableCellWithIdentifier : cellIdentifier];

    if (cell == nil)
    { // if ()
        switchView = [[UISwitchView     alloc] initWithFrame : CGRectZero];
        cell       = [[[UITableViewCell alloc] initWithStyle : UITableViewCellStyleDefault
                                             reuseIdentifier : cellIdentifier] autorelease];
        [switchView setTag : 100];
        [[cell contentView] addSubview : switchView];

        [switchView release];

        switchView = nil;
    } // if ()

    return (cell);
} // tableView:cellForRowAtIndexPath: () 
```

我希望这能回答你的问题。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:46:00.867

```
[tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade]; 
```

[http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadSections:withRowAnimation](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadSections:withRowAnimation)：

其中 UITableViewRowAnimation 可以是以下之一：

```
typedef enum {
UITableViewRowAnimationFade,
UITableViewRowAnimationRight,
UITableViewRowAnimationLeft,
UITableViewRowAnimationTop,
UITableViewRowAnimationBottom,
UITableViewRowAnimationNone,
UITableViewRowAnimationMiddle,
UITableViewRowAnimationAutomatic = 100
} UITableViewRowAnimation; 
```

[http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UITableViewRowAnimation](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UITableViewRowAnimation)

# android - 如何使用复选框和自定义适配器从 Listview 中获取选定的列表项？

> ID：10911361
> 
> 赞同：14
> 
> 时间：2012-06-06T09:17:59.220
> 
> 标签：android, listview, checkbox, adapter

我有一个`ListView`与`CheckBox`它。我`Custom Adapter`用来填充`ListView`.

在我的`xml`文件中`Button`，底部有一个。我想要的是让用户选择行数`ListView`以及当他/她单击`Button`获取所选项目的位置时，以便我可以获得特定行的对象以进行进一步计算。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T09:23:24.800

下面的代码片段完全符合您的要求。

```
package com.windrealm.android;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class PlanetsActivity extends Activity
{

    private ListView mainListView;
    private Planet[] planets;
    private ArrayAdapter<Planet> listAdapter;
    private Button check;
    private Context context;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        context = PlanetsActivity.this;
        check = (Button) findViewById(R.id.check);
        // Find the ListView resource.
        mainListView = (ListView) findViewById(R.id.mainListView);

        // When item is tapped, toggle checked properties of CheckBox and
        // Planet.
        mainListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener()
                {
                    @Override
                    public void onItemClick(AdapterView<?> parent, View item,
                            int position, long id)
                    {
                        Planet planet = listAdapter.getItem(position);
                        planet.toggleChecked();
                        PlanetViewHolder viewHolder = (PlanetViewHolder) item
                                .getTag();
                        viewHolder.getCheckBox().setChecked(planet.isChecked());
                    }
                });

        // Create and populate planets.
        planets = (Planet[]) getLastNonConfigurationInstance();
        if (planets == null)
        {
            planets = new Planet[]
            { new Planet("Mercury"), new Planet("Venus"), new Planet("Earth"),
                    new Planet("Mars"), new Planet("Jupiter"),
                    new Planet("Saturn"), new Planet("Uranus"),
                    new Planet("Neptune"), new Planet("Ceres"),
                    new Planet("Pluto"), new Planet("Haumea"),
                    new Planet("Makemake"), new Planet("Eris") };
        }
        ArrayList<Planet> planetList = new ArrayList<Planet>();
        planetList.addAll(Arrays.asList(planets));

        // Set our custom array adapter as the ListView's adapter.
        listAdapter = new PlanetArrayAdapter(this, planetList);
        mainListView.setAdapter(listAdapter);

        check.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View view)
            {
                for (int i = 0; i < listAdapter.getCount(); i++)
                {
                    Planet planet = listAdapter.getItem(i);
                    if (planet.isChecked())
                    {
                        Toast.makeText(context,
                                planet.getName() + " is Checked!!",
                                Toast.LENGTH_SHORT).show();
                    }
                }

            }
        });
    }

    /** Holds planet data. */
    private static class Planet
    {
        private String name = "";
        private boolean checked = false;

        public Planet()
        {
        }

        public Planet(String name)
        {
            this.name = name;
        }

        public Planet(String name, boolean checked)
        {
            this.name = name;
            this.checked = checked;
        }

        public String getName()
        {
            return name;
        }

        public void setName(String name)
        {
            this.name = name;
        }

        public boolean isChecked()
        {
            return checked;
        }

        public void setChecked(boolean checked)
        {
            this.checked = checked;
        }

        public String toString()
        {
            return name;
        }

        public void toggleChecked()
        {
            checked = !checked;
        }
    }

    /** Holds child views for one row. */
    private static class PlanetViewHolder
    {
        private CheckBox checkBox;
        private TextView textView;

        public PlanetViewHolder()
        {
        }

        public PlanetViewHolder(TextView textView, CheckBox checkBox)
        {
            this.checkBox = checkBox;
            this.textView = textView;
        }

        public CheckBox getCheckBox()
        {
            return checkBox;
        }

        public void setCheckBox(CheckBox checkBox)
        {
            this.checkBox = checkBox;
        }

        public TextView getTextView()
        {
            return textView;
        }

        public void setTextView(TextView textView)
        {
            this.textView = textView;
        }
    }

    /** Custom adapter for displaying an array of Planet objects. */
    private static class PlanetArrayAdapter extends ArrayAdapter<Planet>
    {

        private LayoutInflater inflater;

        public PlanetArrayAdapter(Context context, List<Planet> planetList)
        {
            super(context, R.layout.simplerow, R.id.rowTextView, planetList);
            // Cache the LayoutInflate to avoid asking for a new one each time.
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            // Planet to display
            Planet planet = (Planet) this.getItem(position);

            // The child views in each row.
            CheckBox checkBox;
            TextView textView;

            // Create a new row view
            if (convertView == null)
            {
                convertView = inflater.inflate(R.layout.simplerow, null);

                // Find the child views.
                textView = (TextView) convertView
                        .findViewById(R.id.rowTextView);
                checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);

                // Optimization: Tag the row with it's child views, so we don't
                // have to
                // call findViewById() later when we reuse the row.
                convertView.setTag(new PlanetViewHolder(textView, checkBox));

                // If CheckBox is toggled, update the planet it is tagged with.
                checkBox.setOnClickListener(new View.OnClickListener()
                {
                    public void onClick(View v)
                    {
                        CheckBox cb = (CheckBox) v;
                        Planet planet = (Planet) cb.getTag();
                        planet.setChecked(cb.isChecked());
                    }
                });
            }
            // Reuse existing row view
            else
            {
                // Because we use a ViewHolder, we avoid having to call
                // findViewById().
                PlanetViewHolder viewHolder = (PlanetViewHolder) convertView
                        .getTag();
                checkBox = viewHolder.getCheckBox();
                textView = viewHolder.getTextView();
            }

            // Tag the CheckBox with the Planet it is displaying, so that we can
            // access the planet in onClick() when the CheckBox is toggled.
            checkBox.setTag(planet);

            // Display planet data
            checkBox.setChecked(planet.isChecked());
            textView.setText(planet.getName());

            return convertView;
        }

    }

    public Object onRetainNonConfigurationInstance()
    {
        return planets;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:56:36.777

在 customadapter 的 getview 方法中，执行

```
//use the actual id of your checkbox of course
Checkbox checkbox = (CheckBox)findViewById(R.id.checkbox); 
checkbox.setFocusable(false);
checkbox.setFocusableInTouchMode(false); 
```

现在复选框和列表项一样可以点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:10:08.130

要解决此问题，您必须创建一个自定义 Item 类，该类将代表您在列表中的各个复选框。然后适配器类将使用这些项目的数组来显示您的复选框。

这个 Item 类将有一个布尔变量 isSelected ，它将确定复选框是否被选中。您必须在自定义适配器类的 OnClick 方法中设置此变量的值

例如

```
 class CheckBoxItem{

    boolean isSelected;

    public void setSelected(boolean val) {
            this.isSelected = val;
        }

        boolean isSelected(){
            return isSelected;

        }   

    } 
```

对于您的 CustomAdapter 类，如下所示：

```
 public class ItemsAdapter extends ArrayAdapter implements OnClickListener { 

// you will have to initialize below in the constructor 
    CheckBoxItem items[];

    // You will have to create your check boxes here and set the position of your check box
    /// with help of setTag method of View as defined in below method, you will use this later // in your onClick method 

    @Override 
        public View getView(int position, View convertView, ViewGroup parent) { 
            View v = convertView; 

            CheckBox cBox = null;

            if (v == null) { 
                LayoutInflater vi = (LayoutInflater) apUI.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
                v = vi.inflate(R.layout.attachphoto, null);     

            } 

            CheckBoxItemItem it = items[position];      

            cBox =(CheckBox) v.findViewById(R.id.apCheckBox);
            cBox.setOnClickListener(this);
            cBox.setTag(""+position);       

            Log.d(TAG, "  CHECK BOX IS: "+cBox+ "   Check Box selected Value: "+cBox.isChecked()+"  Selection: "+it.isSelected());
            if(cBox != null){
                cBox.setText("");
                cBox.setChecked(it.isSelected());
            }       

            return v; 
        } 

        public void onClick(View v) {
            CheckBox cBox =(CheckBox) v.findViewById(R.id.apCheckBox);
            int position = Integer.parseInt((String) v.getTag());

            Log.d(TAG, "CLicked ..."+cBox.isChecked());

            items[position].setSelected(cBox.isChecked());              
        } 

    } 
```

稍后您将声明您的 CheckBoxItem 类的数组，该类将包含在您的 Adapter 类中，在这种情况下，它将是 ItemsAdapter 类。

然后，当用户按下按钮时，您可以遍历数组中的所有项目，并使用 CheckBoxItem 类的 isSelected() 方法检查选择了哪一个。

在您的活动中，您将拥有：

```
ArrayList getSelectedItems(){

ArrayList selectedItems = new ArrayList();

int size = items.length;

        for(int i = 0; i<size; i++){
            CheckBoxItem cItem = items[i];
            if(cItem.isSelected()){                 
                selectedItems.add(cItem);                   
            }           
        }

return selectedItems;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T04:04:22.557

我有同样的问题。我是这样解决的

```
public class myActivity extends Activity  {
//ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this);
public ListView listview;
private ArrayList<Object> itemlist=new ArrayList<Object>();
Button button;
private myAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    listview=(ListView)findViewById(R.id.listview1);
    button=(Button)findViewById(R.id.button1);
    /*add some data to ur list*/ itemlist.add(something);
    adapter=new Adapter(myActivity.this, 0, itemlist);
    listview.setAdapter(adapter);
    **listview.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    listview.setItemsCanFocus(false);**
    button.setOnClickListner(new OnClickListner()
    {
     @Override
     public void OnClick(View v)
     {
      /* this returns the checked item positions in the listview*/
      **ArrayList<Integer> itempositions=adapter.getcheckeditemcount();**

    for(int i:itempositions)
    {
             /* This is the main part...u can retrieve the object in the listview which is checked and do further calculations with it*/
        **Object info=adapter.getItem(i);**
                          Log.d(TAG,"checked object info= ",info.something);
                 }
     }
    });
}

private class myAdapter extends ArrayAdapter<Object>  {

    private Context context;
    private ArrayList<Object> list;
    **private ArrayList<Integer> checkedpositions;**

    public myAdapter(Context localContext,int textViewResourceId, ArrayList<Object> objects) {
        super(localContext,textViewResourceId,objects);
        context = localContext;
        this.list=objects;
        this.checkedpositions=new  ArrayList<Integer>();
        //Log.d("adapter","list size= "+objects.size());
    }

@Override       
    public View getView(int position, View convertView, ViewGroup parent) {

        ImageView picturesView;
        View v = convertView;
        TextView Mainitem;
        final CheckBox check;

       if (v == null) 
       {
           LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
           v = vi.inflate(R.layout.albumview, null);

           Object item=list.get(position);
           if(item!=null)
           {

               check = (CheckBox)v.findViewById(R.id.checkBox1);
                   /* set a tag for chekbox with the current view position */
               **check.setTag(position);**
                   /*set a onchecked change listner for listning to state of checkbox toggle */
               check.setOnCheckedChangeListener(new OnCheckedChangeListener() 
               { 
                   @Override
                   public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
                   {             
                                       /*get the tag of the checkbox...in this case this will give the (position of view)*/
                       Object tag=check.getTag();
                       if ( isChecked ) 
                       { 
                           // perform logic 
                           count++;
                           Log.d("Checkbox","added "+tag);
                           checkedpositions.add((Integer) tag);
                       } 
                       else
                       {
                           count--;
                           checkedpositions.remove(tag);
                           Log.d("Checkbox","removed "+(Integer)tag);
                       }

               /* if u dont have a textview in ur listview then ignore this part */        
               Mainitem = (TextView) v.findViewById(R.id.textView1);
               Mainitem.setText(item.Album_name);

               } catch (IOException e) {
                     // TODO Auto-generated catch block
                     Log.d("error", "wall");
                 }

           }

       }

    return v;

    }
   /* Finally create a method which return the checkeditem postions in the listview */
**public ArrayList<Integer> getcheckeditemcount()
{
    return this.checkedpositions;
}**

}

} 
```

我希望这有帮助。

# java - java - 缓冲读取的 readline() 将 null 作为文件结尾，但无法使用该 null

> ID：10911362
> 
> 赞同：-2
> 
> 时间：2012-06-06T09:18:01.973
> 
> 标签：java, stream, eof

有没有办法检查文件是否正确写入，我的意思是最后是否有 EOF？我问这个是因为我有一个程序需要一些文件，将它们合并到一个非常大的文件中，然后使用它从中获取统计信息。关键是第二部分永远不会结束，因为它不识别文件的结尾。

代码的相关部分如下：（请不要要求整个代码，因为我因重要原因无法发布）

```
 FileWriter file=null;
    PrintWriter pw = null;
    String pathToRead=null;
    InputStreamReader isr = null;
    BufferedReader br = null ;
    FileInputStream fis = null ;
    TestJFileChooser d=new TestJFileChooser();
    int c=1;
            String line=null;

    ....

    //here i select the files

    selectedFile=new File(pathToRead);

    //here I get one buffer reader for each file got with listFiles()

    for(File file_sel:app){
        if (file_sel.getName().startsWith("gtou")){
            System.out.println(file_sel.getName());
            fis = null;
            try {
                fis = new FileInputStream(file_sel);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
            isr=new InputStreamReader(fis);
            br=new BufferedReader(isr);
            map.put(i, br);
            num_file++;
            i++; 
        }
    }

    //then I select the output file and open a print writer for it

    fileToWrite=new File(pathToRead);
        try {
            file = new FileWriter(fileToWrite);
            pw= new PrintWriter(file);
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        //merging part
        ....
        line=br.readLine();
        while(line!=null){
        System.out.println("line is:"+line);
        ....
        line=br.readLine();
        }   

       //end of merging ....

        pw.flush();
        pw.close();

        try {
            if (file!=null) file.close();
            fis.close();
            isr.close();
            br.close();
            for(int fi=0;fi<num_file;fi++){
                br2=map.get(fi);
                br2.close();
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        so.kill();
        Runtime r=Runtime.getRuntime();
        r.gc();

    //this is a popup that comes out 
    GlitchSquad gli=new GlitchSquad("Completed"); 
```

问题是作为输出我得到：

```
line is: null ; 
line is: null ; 
line is: null ; 
```

等等并且永远不会到达“完成”弹出窗口=（

我无法理解那个 null 到底是什么，因为控制线！= null 不起作用。我也尝试将该空值用作字符串..但什么都没有..我认为这是我如何关闭流的问题，但现在代码对我来说似乎是正确的..但仍然无法阻止它..

建议？提前致谢！

ps它是一个总结版本，以便专注于流..正确声明变量，导入等也是如此

编辑：代码更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:11:23.250

您问题的核心是这段代码：

```
 BufferedReader br = ...
    String line = br.readLine();
    while (line != null) {
        System.out.println("line is:" + line);
        ...
        line = br.readLine();
    } 
```

你说这反复输出：

```
line is: null ;
line is: null ; 
```

（注意最后的“;”！！！）

可能发生的*唯一方法*是，如果您正在阅读的文件至少包含如下所示的一行：

```
null ; 
```

实际上，除非“...”代码包含`continue`语句，否则输入文件中肯定有很多这样的行。

* * *

> 有没有办法检查文件是否正确写入？

是的。使用文本编辑器查看它和/或检查它的文件大小。

> 我的意思是最后是否有EOF？

在现代文件系统中，EOF 是一个位置而不是一个标记。具体来说，它是文件最后一个字节之后的位置。所以一个文件没有EOF在逻辑上是不可能的。（你必须有一个*无限*长的文件才能没有 EOF。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:33:46.303

我不知道它是否会解决您的问题，但我会改用以下代码：

```
try {
    fis = new FileInputStream(file_sel);
    isr=new InputStreamReader(fis);
    br=new BufferedReader(isr);
    map.put(num_file++, br);
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

否则，您的“地图”中可能会有未捕获的“NullPointer”异常或奇怪的 BufferedReaders。（我现在不知道`new InputStreamReader(null)`会如何表现。）

看起来 i 和 num_file 的值总是相等的，所以只需删除 i。或者使用 LinkedList 并删除两者。

如果您不需要进行特殊的合并，我会这样做：

```
OutputStream os;
try {
    os = new FileOuputStream(outfile);
} catch (FileNotFoundException e) {
    os = null;
    e.printStackTrace();
}
if (os != null) {
    for(File file_sel:app) {
        if (file_sel.getName().startsWith("gtou")) {
            System.out.println(file_sel.getName());
            InputStream is = null;
            try {
                is = new FileInputStream(file_sel);
                byte[] buffer = new byte[1024];
                int readBytes = 0;
                while ((readBytes = is.read(buffer)) > 0) {
                    os.write(buffer, 0, readBytes);
                }
                fos.flush();
                is.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

如果您读取具有不同编码的文件，您当然至少必须修改读取。

如果它不起作用，我建议您构建一个“汇总”且可运行的示例程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:47:37.810

EOF 是 EOF。没有更多的数据了。除非您在文件中有预期的 EOF 标记，或者有一个自描述协议告诉您 EOF 标记应该在哪里，否则无法确定文件是否已完全写入。

# c# - 获取 Windows Server 的硬件信息

> ID：10911363
> 
> 赞同：0
> 
> 时间：2012-06-06T09:18:05.763
> 
> 标签：c#, .net, windows, wmi, hardware

目前我正在使用以下方法获取硬件信息（网络适配器、处理器、硬盘）

```
ManagementClass mc = new ManagementClass("Win32_NetworkAdapterConfiguration");
ManagementObjectSearcher mbs = new ManagementObjectSearcher("Select * From Win32_processor");
ManagementObject dsk = new ManagementObject(@"win32_logicaldisk.deviceid=""c:"""); 
```

我的应用程序是桌面，客户端-服务器（应用程序和数据库安装在服务器上）。此方法获取客户端的信息。有没有办法获取局域网上某个节点的硬件信息 - 我想获取服务器的硬件信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:37:53.923

> 我想获取服务器的硬件信息？

WMI 可以指向另一台服务器，只要：

*   eserver 暴露 WMI
*   防火墙不会阻止它。
*   您的用户帐户拥有其他服务器的权限。

就这么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:20:34.710

这是我用来查询远程主机的子程序（这里我假设我已经在远程计算机上配置了 WMI）：

```
 public string getWMI(string[] parameters)
    {
        string ip = parameters[0];
        string username = parameters[1];
        string password = parameters[2];
        string query = parameters[3];
        string result = "";
        ConnectionOptions options = new ConnectionOptions();
        ManagementScope scope;
        options.Username = username;
        options.Password = password;
        try
        {
            scope = new ManagementScope("\\\\" + ip + "\\root\\cimv2", options);
            scope.Connect();
            if (scope.IsConnected)
            {
                ObjectQuery q = new ObjectQuery(query);
                ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, q);
                ManagementObjectCollection objCol = searcher.Get();
                foreach (ManagementObject mgtObject in objCol)
                {
                    result = result + mgtObject.GetText(TextFormat.CimDtd20);
                }
            }
            else
            {
            }
        }
        catch (Exception e)
        {
            writeLogFile("WMI Error: " + e.Message);
            writeLog("WMI Error: " + e.Message);
        }
        return result;
    } 
```

In that subroutine I use a direct query such as "select * from Win32_ComputerSystem" but you can use **ManagementClass** as well.

# spring-webflow - Spring web flow，使用输入字段创建子流

> ID：10911367
> 
> 赞同：2
> 
> 时间：2012-06-06T09:18:23.900
> 
> 标签：spring-webflow

我从 Spring Web Flow 开始，阅读并遵循文档。我创建了一个新流程：

**测试流.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <var name="testName" class="com.project.TestView" />

    <view-state id="test">
        <on-entry>
            <set name="flowScope.name" value="testName.name" />
        </on-entry>
        <transition on="test" to="saveName"/>
    </view-state>

    <subflow-state id="subTest" subflow="testSub-flow">
        <input name="nameVar" value="name" />
        <transition to="error" />
    </subflow-state>

    <view-state id="error" />
    <end-state id="finish" />   
</flow> 
```

我正在尝试创建一个**testSub-flow.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="
        http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <input type="String" name="nameVar" />

    <on-start>
        <evaluate expression="com.project.TestView.printSomething(nameVar)" result="flowScope.testPrint" />
    </on-start>

    <view-state id="printTest" >
        <transition on="restart" to="endSub" />
    </view-state>

    <end-state id="endSub" />

</flow> 
```

调用的方法是：

```
@Transactional(readOnly = true)
    public String printSomething(String text){
        System.out.print(text + " this is a test");
        return text + " this is a test";
    } 
```

当浏览器加载主要流程时，我在浏览器中遇到了一些异常，`test-flow.xml`

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.webflow.execution.ActionExecutionException: Exception thrown executing [AnnotatedAction@6ca837 targetAction = [EvaluateAction@7aed3a expression = com.project.TestView.printSomething(nameVar), resultExpression = flowScope.testPrint], attributes = map[[empty]]] in state 'null' of flow 'test' -- action execution attributes were 'map[[empty]]' 
```

可能是什么问题呢？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:02:59.727

乍一看，它似乎找不到任何启动状态。尝试在流标签中添加 start-state 属性：

```
 <flow xmlns="http://www.springframework.org/schema/webflow"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
            http://www.springframework.org/schema/webflow
            http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd" 
            start-state="test"> 
```

如果这不能解决问题，则可能是流程构建器找不到名为“saveName”的状态。问题可能出在这一行：

```
<transition on="test" to="saveName"/> 
```

如果要在“test”事件发生时调用子流，请编写“subTest”而不是“saveName”以调用子流。

所以，那条线应该是：

```
<transition on="test" to="subTest"/> 
```

另外，请注意，您没有为这些视图状态指定任何视图。

希望这可以帮助。

# c# - 异常不抛出？

> ID：10911369
> 
> 赞同：1
> 
> 时间：2012-06-06T09:18:27.410
> 
> 标签：c#, .net, exception

我有类似于以下的代码：

```
try{
    func1();
}
catch(Exception e){
    /Do something
}

static func1(){
    func2();
}

static func2(){
    //Exception thrown here
    System.IO.StreamReader file = new System.IO.StreamReader(filePath);
} 
```

当 func2() 中的代码行抛出异常时，我在 catch 子句中没有收到任何通知。我没有明确地抛出任何东西，我只是有常规的静态函数声明——没有“抛出”出现在任何地方。

为什么异常不会向上传播到 catch 语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:27:01.317

不，代码很好。您的真实代码中有些东西您没有向我们展示。该异常传播良好：

```
using System;

static class Program {
    static void Main() {
        try{
            func1();
        } catch(Exception e) {
            // works fine: FileNotFoundException
            Console.WriteLine(e);
        }
    }
    static void func1(){
        func2();
    }    
    static void func2() {
        string filePath = "doesnot.exist";
        System.IO.StreamReader file = new System.IO.StreamReader(filePath);
    }
} 
```

候选人：

*   任何涉及 a的东西`try`都是可疑的 - 高音检查它
*   任何涉及线程的东西都可能在其他地方出现异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:30:04.217

异常会“冒泡”，直到它被捕获或使您的应用程序崩溃。

最好的选择是使用调试器。确保将其设置为在 HANDLED 异常上停止（调试/异常/检查公共语言运行时异常上的“抛出”框）。

现在运行您的代码。如果 func2 抛出异常 - 您的代码将中断；不管处理与否。您可以单步执行代码并查看处理它的内容。

# ruby-on-rails - 如何获取触发查询的代码行？

> ID：10911371
> 
> 赞同：25
> 
> 时间：2012-06-06T09:18:35.217
> 
> 标签：ruby-on-rails, ruby, activerecord, logging

rails 3.2中有没有办法（gem，插件或其他东西）知道哪一行代码触发了数据库查询？例如在我的日志中，我有：

```
User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1 
```

我如何知道触发查询的代码行？谢谢...

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-06T13:22:58.267

我找到了这个解决方案：

```
module QueryTrace
  def self.enable!
    ::ActiveRecord::LogSubscriber.send(:include, self)
  end

  def self.append_features(klass)
    super
    klass.class_eval do
      unless method_defined?(:log_info_without_trace)
        alias_method :log_info_without_trace, :sql
        alias_method :sql, :log_info_with_trace
      end
    end
  end

  def log_info_with_trace(event)
    log_info_without_trace(event)
    trace_log = Rails.backtrace_cleaner.clean(caller).first
    if trace_log && event.payload[:name] != 'SCHEMA'
      logger.debug("   \\_ \e[33mCalled from:\e[0m " + trace_log)
    end
  end
end 
```

在一些初始化程序中添加`QueryTrace.enable!`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-12-30T17:19:29.753

使用[`active-record-query-trace`](https://github.com/ruckus/active-record-query-trace)宝石：

在`Gemfile`：

```
gem 'active_record_query_trace' 
```

然后`bundle`，然后在`config/environments/development.rb`：

```
ActiveRecordQueryTrace.enabled = true 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-10-22T16:01:05.730

### 导轨 5.2+

将此添加到您`config/environments/test.rb`或任何您想要放置线路的环境中。我正在 Rails 5 上进行测试。

```
 ActiveRecord::Base.verbose_query_logs = true 
```

你会得到文件和行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-06T11:32:21.310

你可以修改 BufferedLogger 来做你想做的事。将此文件放在您的`config/initializers`路径中：

```
require 'active_support/buffered_logger'

class ActiveSupport::BufferedLogger

  def add(severity, message = nil, progname = nil, &block)
    add_debugging_details(severity)
    @log.add(severity, message, progname, &block)
  end

  private

  EXCLUDE_CALLERS = Gem.paths.path.clone << 'script/rails' << RbConfig::CONFIG['rubylibdir'] << __FILE__

  def add_debugging_details(severity)
    caller_in_app = caller.select do |line|
      EXCLUDE_CALLERS.detect { |gem_path| line.starts_with?(gem_path) }.nil?
    end

    return if caller_in_app.empty?

    @log.add(severity, "Your code in \e[1;33m#{caller_in_app.first}\e[0;0m triggered:")
  end

end if Rails.env.development? 
```

# jquery - 使用 ajax 动画加载数据

> ID：10911373
> 
> 赞同：0
> 
> 时间：2012-06-06T09:18:46.823
> 
> 标签：jquery, jquery-plugins, jquery-tools

我想为从另一个页面加载的数据制作动画效果。

我设法用我在网上找到的一个例子做到了这一点。

我的问题是，我想让这个效果只有在我的 ajax 加载时才起作用。

所以我尝试了将我的 ajax 代码放入`.when`其中并将股票代码效果放入`.done`

但它并没有像这样工作。

我还能尝试什么？

```
$(document).ready(function() { 
        $(function CheckinMap() {
            $.when($.ajax({
                type: "GET",
                url: "default.cs.asp?Process=ViewCheckins",
                success: function(data) {
                $(".newsfeed").append(data);
                },
                error: function(data) {
                $(".newsfeed").append(data);
                }
            })).done();
        });
}); 

        var delay = 2000; // you can change it
        var count = 5; // How much items to animate
        var showing = 3; //How much items to show at a time
        var i = 0;
            function move(i) {
                return function() {
                    $('#feed'+i).remove().css('display', 'none').prependTo('.newsfeed');
                    }
            }
            function shift() {
                var toShow = (i + showing) % count;
                $('#feed'+toShow).slideDown(1000, move(i));
                $('#feed'+i).slideUp(1000, move(i));
                i = (i + 1) % count;
                setTimeout('shift()', delay);
            }    
        $(document).ready(function() {
            setTimeout('shift()', delay);
        }); 
```

外部数据

```
 <div class="metadata" id="feed0">
                            <div class="userinfo">
                                <span><strong>&nbsp;</strong> @ Amphi I @ NY</span>
                                <span></span>
                                <span>-5276 seconds ago</span>
                            </div>
                            <div class="commonfriends">                               
                            </div>                                
                            <div class="tools">                               
                            </div>  
                        </div>

                        <div class="metadata" id="feed1">
                            <div class="userinfo">
                                <span><strong>&nbsp;</strong> @ Flaming Buddha House</span>
                                <span></span>
                                <span>18 hours ago</span>
                            </div>
                            <div class="commonfriends">                               
                            </div>                                
                            <div class="tools">                               
                            </div>  
                        </div>

                        <div class="metadata" id="feed2">
                            <div class="userinfo">
                                <span><strong>&nbsp;</strong> @ Bar @ NY</span>
                                <span></span>
                                <span>19 hours ago</span>
                            </div>
                            <div class="commonfriends">                               
                            </div>                                
                            <div class="tools">                               
                            </div>  
                        </div>

                        <div class="metadata" id="feed3">
                            <div class="userinfo">
                                <span><strong>&nbsp;</strong> @ Gym @ NY</span>
                                <span></span>
                                <span>8 hours ago</span>
                            </div>
                            <div class="commonfriends">                               
                            </div>                                
                            <div class="tools">                               
                            </div>  
                        </div>

                        <div class="metadata" id="feed4">
                            <div class="userinfo">
                                <span><strong>&nbsp;</strong> @ Bar @ NY</span>
                                <span></span>
                                <span>yesterday</span>
                            </div>
                            <div class="commonfriends">                               
                            </div>                                
                            <div class="tools">                               
                            </div>  
                        </div>

                        <div class="metadata" id="feed5">
                            <div class="userinfo">
                                <span><strong>&nbsp;</strong> @ NY</span>
                                <span></span>
                                <span>yesterday</span>
                            </div>
                            <div class="commonfriends">                               
                            </div>                                
                            <div class="tools">                               
                            </div>  
                        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:26:28.490

我想您需要将“动画”代码放入 ajax 的成功回调函数中。

```
success : function (data) { [animationcodehere] } 
```

# asp.net - 为什么 SQL Server 存储过程在实时数据库中运行而不在本地 PC 中运行？

> ID：10911374
> 
> 赞同：0
> 
> 时间：2012-06-06T09:18:49.673
> 
> 标签：asp.net, sql, sql-server-2000

我创建了一个存储过程：

```
CREATE PROCEDURE usp_PettyCash_GetSingleUserInfo 
(
    @MaerskID varchar(50)  
)
AS
BEGIN  
    SELECT ISNULL(MaerskID,'') AS UniqueID, ISNULL(FirstName,'') AS FirstName, ISNULL(MiddleName,'') AS MiddleName, ISNULL(LastName,'') AS LastName, ISNULL(EmployeeType,'') AS EmployeeType
    FROM Users a 
    LEFT OUTER JOIN t_PettyCash_EmployeeInfo b ON a.MaerskID = b.UniqueID
    WHERE a.MaerskID = @MaerskID 
END 
GO 
```

它在我的实时数据库服务器中运行良好。为了进行一些修改，我备份了我的数据库并将其恢复到我的本地电脑中。问题是，当我从本地电脑运行我的网络应用程序时，它给出了异常，

> 找不到存储过程“usp_PettyCash_GetSingleUserInfo”

我给了我电脑的数据库用户管理员权限，但它仍然给出了错误。我不确定实际上是什么问题。我不认为问题出在我的代码中，因为当我连接到我的实时数据库时，一切都很好。请帮忙。当然，我首先在本地 pc 中测试了存储过程，然后再使用 live DB。那个时候一切正常，但现在不行。

我正在使用 SQL Server 2000 企业版和 VS2005 ASP.Net & C# 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:27:01.700

来解决这个问题。

1.) 删除现有的 SP。

2.)创建新的SP。

现在你会得到结果。我也遇到过这个问题，但这个技巧对我有用。还有一个请检查两端的 SQL 服务器。

希望能帮助到你

# iphone - 如何在已发布的 iphone 应用程序上避免旧的 xib 缓存？

> ID：10911376
> 
> 赞同：1
> 
> 时间：2012-06-06T09:18:59.173
> 
> 标签：iphone, ios, caching, xib

我正在开发我的第一个 iPhone 应用程序。

有一天，我重命名了一些文件，包括 xib 文件及其视图控制器。
之后，我的应用开始使用旧的 xib 文件。

我删除了 xib 文件，但仍然使用旧的 xib。
初始化视图控制器的代码是：

```
MyViewController *vc = [[MyViewController alloc] init]; 
```

我将代码修改为：

```
MyViewController *vc = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil]; 
```

然后我的应用程序使用了新的 xib 而不是旧的 xib。

问题是，由于某些原因，旧的 xib 文件是否可能不仅显示在开发应用程序上，而且还显示在已发布的应用程序上？

如果我使用`initWithNibName:`而不是，我可以避免在已发布的应用程序上使用旧的 nix 缓存`init`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:22:47.467

在 Product->Clean 中，然后在 Execute 之后，这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:53:51.010

我认为您需要删除 DerivedData 中的文件。我经历过这样的事情。如果您使用的是模拟器，我还会重置模拟器或删除其文件。

路径：

/Users/yourname/Library/Developer/Xcode/DerivedData

/Users/yourname/Library/Application Support/iPhone 模拟器

你可能会大惊小怪，但当我遇到问题时，我通常会删除 DerivedData 目录。Xcode 将在更短的时间内重建它们，而不用担心这个问题。在 iPhoneSimulator 中，您可以相当容易地找到您的应用程序，如果您愿意，可以删除该目录。

# unix - 自定义 PS1 不显示当前工作目录

> ID：10911378
> 
> 赞同：0
> 
> 时间：2012-06-06T09:19:08.127
> 
> 标签：unix, profile, ps1

我已经为 bash shell 自定义了主提示符，但不幸的是它没有显示当前工作目录，如下所示。

```
[cifsamidala]w# pwd
/home/Vinod/SearchIdIssue
[cifsamidala]w# 
```

这是我定制的 PS1：

```
HOST=`tput bold``hostname``tput sgr0`
PS1="[${HOST}]\w # " 
```

这是供您参考的壳牌信息。

```
[cifsamidala]w# echo $SHELL
/sbin/sh
[cifsamidala]w# echo $0
-sh 
```

我也尝试过使用下面的“pwd”，但没有用。

```
PS1="[${HOST}]`pwd` # " 
```

如果我在这里遗漏了什么，请告诉我。

预先感谢。

问候，

维诺德·亚达夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:09:02.940

您的 shell 不是 bash shell，这可能是它无法工作的原因。请您的系统管理员给您一个不受限制的外壳。

# php - Symfony 1.4 中的嵌入式表单和验证器比较

> ID：10911381
> 
> 赞同：0
> 
> 时间：2012-06-06T09:19:21.667
> 
> 标签：php, symfony1, symfony-1.4

我使用本教程创建了嵌入式表单：http: [//prendreuncafe.com/blog/post/2009/11/29/Embedding-Relations-in-Forms-with-Symfony-1.3-and-Doctrine](http://prendreuncafe.com/blog/post/2009/11/29/Embedding-Relations-in-Forms-with-Symfony-1.3-and-Doctrine)

但我有一个问题。在此示例中如何比较两个或多个值？我想比较表**Bookmark中的****名称**，例如只有一个**名称**可以带有数字。我可以做到这一点，但我不知道我必须在哪里设置验证器。在 BookmarkForm.class.php 中我只有一个值，我无法获取 Form 中的所有值。在这个例子中，我在哪里拥有所有值，我可以使用自己的验证器表单 Symfony？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:27:08.423

如果这是您所要求的，我不太确定，但是[postValidator](http://www.symfony-project.org/forms/1_4/en/02-Form-Validation#chapter_02_global_validators)将允许您进行需要访问多个字段的验证。

这是一个如何创建[自定义 postValidator](http://www.symfony-project.org/more-with-symfony/1_4/en/06-Advanced-Forms#chapter_06_sub_creating_a_custom_validator)的示例。****

# javascript - Regular Expression for javascript to validate name and version

> ID：10911384
> 
> 赞同：1
> 
> 时间：2012-06-06T09:19:46.643
> 
> 标签：javascript, regex

I am trying to write a regular expression in JavaScript. I need to validate name and version, with the following conditions:

Name:

*   Only alphabets, No numbers and special characters
*   No trailing spaces at start or end, and no multiple spaces between words.
*   Minimum of 3 and Maximum of 50 characters.

Version:

*   Format should be `[number].[number].[number]`
*   Only a single dot between numbers (`1.3..4` is invalid, `1.3.4` is ok)
*   Each number can be of 1 or 2 digits, like `1.11.26`(valid), but not `2.343.23` (Invalid)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T10:23:25.700

**姓名**

正则表达式

```
^(?! )((?!  )(?! $)[a-zA-Z ]){3,50}$ 
```

*   只有字母，没有数字和特殊字符 => 我们为此使用字符类

    ```
    [a-zA-Z] 
    ```

*   开头或结尾没有尾随空格，单词之间没有多个空格。=>通过“锚定”正则表达式，我们说它应该是唯一的东西，它不能部分匹配。对于负前瞻，我们说不允许超过 2 个空格

    ```
    ^...$
    (?!  ) 
    ```

*   开头和结尾没有空格=>我们可以再次使用一些环视

    ```
    ^(?! )...(?<! )$ 
    ```

    但是由于javascript不支持lookbehind我们必须使用lookahead

    ```
    (?! $)[a-zA-Z ] 
    ```

*   最少 3 个字符，最多 50 个字符。

    ```
    {3,50} 
    ```

**版本**

正则表达式

```
^\d{1,2}\.\d{1,2}\.\d{1,2}$ 
```

*   格式应为 [number].[number].[number]

    ```
    \d+\.\d+\.\d+ 
    ```

*   数字之间只有一个点（1.3..4 无效，1.3.4 可以）=> 通过指定 \d 我们说只允许数字后跟一个点（应该转义，否则它将意味着任何字符）

*   每个数字可以是 1 位或 2 位数字，例如 1.11.26（有效），但不能是 2.343.23（无效）

    ```
    \d{1,2} 
    ```

最后一个正则表达式在javascript中变为以下

```
if (/^\d{1,2}\.\d{1,2}\.\d{1,2}$/.test(subject)) {
    // Successful match
} else {
    // Match attempt failed
} 
```

# javascript - Jquery unable to return to active state on animated menu list

> ID：10911385
> 
> 赞同：3
> 
> 时间：2012-06-06T09:19:48.110
> 
> 标签：javascript, jquery

I have a menu list that animates the background position on mouseover and this is working. When backgroundPosition: 0 the menu item is active. But I want the first item in the list to return to being active when the user is not hovering over the other list items.

This is what I have so far, The movesover animated effect is working but Im not sure how to get the first item to return to being active state.

**jQuery**

```
$(function() {
    //Edited...
    //services menu background effect 
    var timer;
    function invocation() {
        timer = setTimeout(function() {
            $('#services li:first a').stop().animate({
                backgroundPosition: 0
            }, 500);
        }, 300);
    }
    $('li.menu a').each(function() {
        $(this).css({
            backgroundPosition: -416
        });
        $(this).mouseover(function() {
            $(this).stop().animate({
                backgroundPosition: 0
            }, 500)
            if ($(this).attr('id') != 's_active') {
                $('#services li:first a').stop().animate({
                    backgroundPosition: -416
                }, 500);
            }
            clearTimeout(timer);
        }).mouseout(function() {
            hover = false;
            $(this).stop().animate({
                backgroundPosition: -416
            }, 500)
            invocation();
        });
    });
    $('#services li:first a').css({
        backgroundPosition: 0
    }, 500);
    //invocation();
});​ 
```

**HTML**

```
<div id="services">
    <h1>Services</h1>
    <ul>
        <li id="s_active" class="menu"><a href="#">Semi / Intensive courses</a> </li>
        <li class="menu"><a href="#">Pass plus / Motorway tuition</a></li>
        <li class="menu"><a href="#">Block bookings</a></li>
        <li class="menu"><a href="#">Mock theory and Mock practical tests</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:45:30.873

这是我将如何做的[jsFiddle](http://jsfiddle.net/killerbytes/H8cdY/)

只需更换

```
 doBackgroundEffect() 
```

用你的 backgroundPosition 动画

# ruby-on-rails-3 - Ruby on rails File Upload

> ID：10911387
> 
> 赞同：3
> 
> 时间：2012-06-06T09:20:01.293
> 
> 标签：ruby-on-rails-3, file-upload, ruby-on-rails-3.1

Today i have a little problem containing a File Upload.

First some Infos:

Rubyversion: 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] Railsversion: Rails 3.1.1

Needed Code: My Form

```
 <%= form_for @label, :html => { :multipart => true } do |f| %>
            <% if @label.errors.any? %>
                    <div id="error_explanation">
                            <h2><%= pluralize(@label.errors.count, "error") %> prohibited this label from being saved:</h2>

                            <ul>
                            <% @label.errors.full_messages.each do |msg| %>
                                    <li><%= msg %></li>
                            <% end %>
                            </ul>
                    </div>
            <% end %>
            <div class="field">
                    <%= f.label :file %><br />
                    <%= f.file_field :file %>
            </div>
            <div class="actions">
                    <%= f.submit %>
            </div>
    <% end %> 
```

My Model:

```
class Label < ActiveRecord::Base
    attr_accessor :file
    attr_reader :file

    def file=(file)
            log = Logger.new(Rails.root.join("log/label.log").to_s)
            log.info "file-Action called"
            path=file.tempfile.to_path.to_s
            filename="labellist.csv"
            dest=Rails.root.join("app/assets/csv/").join(filename).to_s
            FileUtils.cp(path, dest)
            csv=CsvLabelParser.new
            log.info "New Parser initialized!"
            csv.parse_csv(dest)
            log.info "Variables: path: #{path.inspect} <-----> dest: #{dest.inspect}"
    end
end 
```

My Parser

```
class CsvLabelParser
    require 'csv'

    def initialize
            @logger=Logger.new(Rails.root.join("log/parser.log").to_s)
    end

    def logger
            @logger
    end

    def parse_csv(path)
            counter = 0
            read_handle = File.open(path, "rb")
            content = read_handle.read
            self.logger.info "CONTENT: #{content.inspect}"
            read_handle.close

            content.each_line do |line|
                    if counter != 0
                            csv_array=line.split(";")
                            self.logger.info "CSV-Array No. #{counter}: #{csv_array.inspect}"
                            label=Label.new

                            label.labnr=csv_array[10]
                            label.name=csv_array[0]
                            label.firm1=csv_array[3]
                            label.firm2=csv_array[4]
                            label.postal=csv_array[7]
                            label.city=csv_array[8]
                            label.country=csv_array[9]
                            label.street=csv_array[5]
                            label.pob=csv_array[6]
                            label.save
                    end
                    counter += 1
            end
    end

end 
```

Controller-Log

```
# Logfile created on 2012-06-06 09:49:23 +0200 by logger.rb/31641
Controller-create-method called! => variables: Params: {"utf8"=>"✓", "authenticity_token"=>"L+fpIMqFA9qe9U/LxU+atFONT8e3L5xEUum1321mRng=", "label"=>{"file"=>#<ActionDispatch::Http::UploadedFile:0x00000003df2318 @original_filename="ADRBW076-Q.csv", @content_type="text/csv", @headers="Content-Disposition: form-data; name=\"label[file]\"; filename=\"ADRBW076-Q.csv\"\r\nContent-Type: text/csv\r\n", @tempfile=#<File:/tmp/RackMultipart20120606-2741-1izzofa>>}, "commit"=>"Create Label", "action"=>"create", "controller"=>"labels"}<-----> Label: #<Label id: nil, labnr: nil, name: nil, firm1: nil, firm2: nil, postal: nil, city: nil, country: nil, street: nil, pob: nil, created_at: nil, updated_at: nil> 
```

So! As you can see i want to upload a CSV-file to parse it into my database. A copy of the File should be stored in a folder called CSV for later use. I've done that about 5 times before and it worked well, but this time it seems, that the file-method in the model isn't called. For now i only want it to work nothing more there will be some changes to catch errors and stuff like that in the future ;). I've logged the Controller action, which is called every time. May the Logfile can Help you! For me it looks okay, comparing it to other logfiles. I've searched for a solution, but everything looks okay to me (maybe i've just forgotten a : or a ,), so i can't really say what's wrong!

Thanks for your help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:10:31.467

我有解决方案！

我将 Rails 3.1.1 与 Ruby 1.9.3 一起使用，它是 gemset。问题是新功能“attr_accessible”。通常不在 Rails 3.1.1 中使用，由于较新的 gemset，因此有必要使 :file-Field 可访问。所以解决方案很简单，我只需要添加：

```
attr_accessible :file, ect 
```

在我的模型顶部，一切正常！

# c++ - Does it really inverse a transform matrix?

> ID：10911399
> 
> 赞同：-3
> 
> 时间：2012-06-06T09:20:43.507
> 
> 标签：c++, math, matrix, transform

```
void inverse44(
double *inverse,
double *matrix
)
{
double trans[3], trans_xf[3];
MTX3_t matrix3;

inverse[0] = matrix[0];
inverse[1] = matrix[4];
inverse[2] = matrix[8];
inverse[4] = matrix[1];
inverse[5] = matrix[5];
inverse[6] = matrix[9];
inverse[8] = matrix[2];
inverse[9] = matrix[6];
inverse[10] = matrix[10];
inverse[15] = 1.0;
inverse[12] = inverse[13] = inverse[14] = 0.0;

trans[0] = matrix[3];
trans[1] = matrix[7];
trans[2] = matrix[11];

MTX4_mtx3(MTX4_cast_pc(matrix),&matrix3);
MTX3_vec_multiply_t(VEC3_cast_pc(trans),&matrix3,VEC3_cast(trans_xf));
inverse[3] = -trans_xf[0];
inverse[7] = -trans_xf[1];
inverse[11] = -trans_xf[2];
} 
```

What does this function do?

MTX3_t is a definition of 3*3 matrix. MTX4_mtx3 gets a sub matrix. MTX3_vec_multiply_t multiply a vector and a matrix.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:40:24.630

是的。请参阅[此链接](http://www.cg.info.hiroshima-cu.ac.jp/~miyazaki/knowledge/teche53.html)以计算变换矩阵的逆矩阵。基本思想是变换矩阵（第一个 3x3 子矩阵）的缩放/旋转组合是一个正交矩阵，正交矩阵的逆矩阵等于转置。所以，第一部分是转置计算。第二部分（从 trans[0] = matrix[3] 行开始）是平移部分（矩阵的最后一列）的逆计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:42:12.403

*只有*当它是旋转和平移的组合时，这才会反转变换矩阵。如果变换矩阵还包括缩放或透视投影，它将无法正常工作。

# java - Java:Download Restart

> ID：10911401
> 
> 赞同：1
> 
> 时间：2012-06-06T09:20:50.873
> 
> 标签：java

i have a java program to download a file through https connection.The program is as follows,

```
public class Download extends Observable implements Runnable {
    private static final int MAX_BUFFER_SIZE = 1024;
    public static final int DOWNLOADING = 0;
    public static final int PAUSED = 1; 
    public static final int COMPLETE = 2;
    public static final int CANCELLED = 3;
    public static final int ERROR = 4;

    private URL url; // download URL    
    private static float size; // size of download in bytes 
    private int downloaded; // number of bytes downloaded   
    private int status; // current status of download
    private String location;    

    public Download(URL url,String location){
        this.url = url;
        size=-1;
        downloaded=0;
        status=DOWNLOADING;
        this.location=location;
        download();
    }

    public String getURL(){
        return url.toString();
    }

    public static float getSize(){
        return size;
    }

    public float getProgress(){
        return  ((float) downloaded / size) * 100;
    }

    public void pause(){
        status = PAUSED;
        stateChanged();
    }

    public void resume(){
        status = DOWNLOADING;
        stateChanged();
        download();
    }

    public void cancel(){
        status = CANCELLED;
        stateChanged();
    }

    public void error(){
        status = ERROR;
        stateChanged();
    }

    private String getFileName(URL url){
        String filepath = url.getFile(); 
        int slashIndex = filepath.lastIndexOf("/");
        String fileName = filepath.substring(slashIndex+1,filepath.length());
        String downloadPath = location+"/"+fileName;
        return downloadPath;
     }

    private void download(){
        Thread thread = new Thread(this);
        thread.start();
    }

    @Override
    public void run() {     
        RandomAccessFile randomAccessFile = null;
        InputStream inputStream = null;
        int responseCode = 0;
        try{
            HttpsURLConnection connection = getSSLCertificate(getURL());
            connection.setRequestMethod("GET");
            connection.setRequestProperty("Range","bytes=" + downloaded + "-");
            connection.connect();
            responseCode=connection.getResponseCode();
            if(responseCode/100 != 2){
                error();
            }
            int contentLength = connection.getContentLength();
            if(contentLength <1){
                error();
            }
            if(size == -1){
                size = contentLength;
                stateChanged();
            }
            randomAccessFile = new RandomAccessFile(getFileName(url),"rw");
            randomAccessFile.seek(downloaded);
            inputStream = connection.getInputStream();
            while(status == DOWNLOADING){
                //byte buffer[]=new byte[3000000];
                byte buffer[];
                float finalSize=size - downloaded;
                if ( finalSize > MAX_BUFFER_SIZE) {
                    buffer = new byte[(int) finalSize];
                } else {
                    buffer = new byte[MAX_BUFFER_SIZE];
                }
                int read = inputStream.read(buffer);
                if(read == -1)
                    break;

                randomAccessFile.write(buffer, 0, read);
                downloaded += read;
                stateChanged();
            }
        }catch (Exception e) {
            e.printStackTrace();
        }finally{
            try {
                randomAccessFile.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                inputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }

        }

    }

    private void stateChanged(){
        setChanged();
        notifyObservers();
    }

    private HttpsURLConnection getSSLCertificate(String urlPath) throws NoSuchAlgorithmException, KeyManagementException, IOException{
        SSLContext ctx = SSLContext.getInstance("TLS");
        ctx.init(new KeyManager[0],new TrustManager[]{new DefaultTrustManager()},new SecureRandom());
        SSLContext.setDefault(ctx);

        URL url = new URL(urlPath);
        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setHostnameVerifier(new HostnameVerifier() {

            @Override
            public boolean verify(String arg0, SSLSession arg1) {
                return true;
            }
        });

        return conn;
    }

    public static void main(String[] args) throws MalformedURLException {
        System.out.println("Enter the URL and Press ENTER:");
        Scanner scanner = new Scanner(System.in);
        String link = scanner.nextLine();
        System.out.println("Enter the destination location and Press ENTER:");
        String destination=scanner.nextLine();
        if(link.length() >0 && destination.length()>0){
            Download d = new Download(new URL(link),destination);
            System.out.println("Downloading... ");
            d.run();
            System.out.println("Downloaded Successfully" +" " +"Size:"+(getSize()/1048576) + " MB");
         }else{
             System.out.println("Error! Please provide url and destination location");
             System.exit(1);
         }
    } 
```

I need to implement a resume download,ie **if there is internet breakdown while downloading and again internet comes,the download needs to starts from the point where it stops.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:38:32.360

```
randomAccessFile = new RandomAccessFile(getFileName(url),"rw"); 
```

我发现了一个问题。我认为每次创建新文件时。如果文件已经存在，那么你不需要写这一行。所以先改变它。

另一个问题是关于“已下载”变量。在构造函数中，每次它被初始化为 0。您需要从它停止的地方获取最后一个值。你可以通过下面的线得到它。

```
downloaded = (int) randomAccessFile.length(); 
```

此外，您可以查看这篇文章的答案。

[如何恢复中断的下载 - 第 2 部分](https://stackoverflow.com/questions/3428102/how-to-resume-an-interrupted-download-part-2)

# java - Is teneo / hibernate allow me to delete subtree out of the box?

> ID：10911402
> 
> 赞同：0
> 
> 时间：2012-06-06T09:20:57.067
> 
> 标签：java, hibernate, eclipse-emf

I have a rather complex domain model, implemented in EMF and persisted with teneo/hibernate/MySQL. I have a subtree of my model (subtree in the sense of 'containment') where no element of the subtree is referenced from outside the subtree (only references from elements that are 'contained' in the subtree to other elements 'contained' in the subtree).

I want to delete the subtree and remove the root element from the collection it is conatained in. I expect this to work without problems as all references are inside the subtree. Anyway I get exceptions from MySQL that foreign key violations are encountered. Hence the deletion fails. Is the deletion process expected to work? Or is teneo/hibernate not that clever to remove the elements in the correct order?

The exception message:

```
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`ide`.`equip_equipment`, CONSTRAINT `equip_equipment_usagedomain` FOREIGN KEY (`component_ud_id`) REFERENCES `ud_component` (`id`)) 
```

**Update:** My cascade policies are as follows:

```
hibernateProperties.setProperty(PersistenceOptions.CASCADE_POLICY_ON_CONTAINMENT, "ALL");
hibernateProperties.setProperty(PersistenceOptions.CASCADE_POLICY_ON_NON_CONTAINMENT, "REFRESH,PERSIST,MERGE");
hibernateProperties.setProperty(PersistenceOptions.INHERITANCE_MAPPING, InheritanceType.SINGLE_TABLE.getName());
hibernateProperties.setProperty(PersistenceOptions.ADD_INDEX_FOR_FOREIGN_KEY, Boolean.TRUE.toString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:30:30.640

仅当您已将关联配置为级联删除（删除）操作时，它才会起作用：

```
@OneToMany(cascade = CascadeType.REMOVE)
private Set<Child> children; 
```

如果您没有此级联，则删除父实体只会删除此特定实体，当然，由于所有子实体都具有父实体的外键，因此您将获得约束违反异常。

# c++ - Can I safely memmove around a boost variant?

> ID：10911409
> 
> 赞同：4
> 
> 时间：2012-06-06T09:21:26.347
> 
> 标签：c++, qt, boost

I have a class wrapping a boost variant that only contains memmovable types (QList, QString, int etc).

May I declare that wrapper class memmovable to Qt containers?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:15:07.393

A`boost::variant`只包含一个整数索引和一个`aligned_storage`，标准保证它是一个 POD。它没有虚拟成员，但有用户定义的构造函数和析构函数。因此，`boost::variant`它不是 POD 并试图记住它是 UB（嗯，我认为它是 UB，我在标准中找不到明确的参考）。

但是，对于 , 等也可以这样说`QList`。`QString`显然[，](http://doc.qt.nokia.com/qq/qq19-containers.html) Qt 假定某些非 POD 类型可以安全地被存储，并在 POD（所谓的“原始类型”）和“可移动类型”之间进行了区分。

因此，如果您认为 memmove a 是安全的`QList`，您可以认为 memmove a`boost::variant`包含 memmovable 类型是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:46:41.730

您可能知道 memmoving 非 POD 类型在技术上是未定义的行为。除此之外，variant 不包含任何在 memmoved 时会出现问题的内容。由于您提到 QList 和 QString 是可记忆的，并且我很难相信它们是 POD（尽管我没有看到它们），所以 boost::variant 也不会更糟。

# blackberry - Where is the database file stored in Blackberry OS 7 Simulators?

> ID：10911414
> 
> 赞同：0
> 
> 时间：2012-06-06T09:21:41.263
> 
> 标签：blackberry, cordova, sqlite, blackberry-simulator, blackberry-webworks

I am using phonegap to develop an Application on BB OS 7 simulator. I am using sqlite and i am mounting a folder as sdcard. But i am not able to find the database which got created in the application. Although it is storing it some where but i dont know where.

Where does it get stored?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:04:44.873

您的数据库保存在 SDCard 文件夹本身中。如果您想检查存储的数据或不使用此路径“SDCard\databases\”，您可以在此找到文件，右键单击文件并选择 openwith select with sqlite，数据库表将打开您可以检查插入的字段。

# charts - Scaling factor or prefix multiplier for axis for charts (jqPlot)

> ID：10911415
> 
> 赞同：1
> 
> 时间：2012-06-06T09:21:43.900
> 
> 标签：charts, jqplot, scaling

When the y axis values are too large for example, 500,000 i would like to automatically use kilo as a **prefix multiplier and display the value on the axis as 500K.** Is there some algorithm that will help me choose the scaling factor based on the values plotted on the chart?

Most charting libraries are using some logic to determine what is the suitable multiplier and display accordingly as kilo, mega, etc. Is it by looking at the frequency of values (for example, 8 out of 10 values plotted are in thousands) or by just looking at the maximum and minimum?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:47:43.990

你试过 $.jqplot.LogAxisRenderer 吗？

[http://www.jqplot.com/docs/files/plugins/jqplot-logAxisRenderer-js.html](http://www.jqplot.com/docs/files/plugins/jqplot-logAxisRenderer-js.html)

[http://www.jqplot.com/docs/files/usage-txt.html](http://www.jqplot.com/docs/files/usage-txt.html)

抱歉，我不能直接说出如何用测量值来缩写值，但我相当确定可以使用这个插件来完成。

# python - Django 复制/粘贴查询集

> ID：10911416
> 
> 赞同：1
> 
> 时间：2012-06-06T09:21:44.303
> 
> 标签：python, django, django-orm

除了迭代记录和克隆/保存之外，Django 复制和粘贴 Queryset 的方法是什么？例如，需要选择表 A 中的一组记录，更新某些字段并将记录插入回原始表？一个示例用例是将订阅者从邮件列表 A 添加到邮件列表 B。它应该只是一个循环迭代 QuerySet 并逐个记录克隆/保存记录，还是有某种方法进行组操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:44:13.063

Django 1.4 有[bulk_create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)方法，可以在 1 个 sql 查询中完成他的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:45:55.827

听起来您不想克隆或复制这些记录-无论如何，在规范化数据库中都应该避免这种情况。

如果您只想更新单个字段，则可以使用`update`queryset 方法：

```
MyModel.objects.filter(mailing_list=list_a).update(mailing_list=list_b) 
```

如果您正在谈论将它们添加到不同的 M2M 关系中，那么您可以简单地做到这一点：

```
mailing_list_b.users.add(*MyModel.objects.filter(mailing_list=list_a)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:46:26.773

在 Django 1.3 中，解决方案是迭代 QuerySet 并创建如下副本：

```
from copy import deepcopy
old_obj = deepcopy(obj)
old_obj.id = None
old_obj.save() 
```

# c++ - 使用 poco 在 linux 上卸载库失败

> ID：10911418
> 
> 赞同：0
> 
> 时间：2012-06-06T09:21:48.190
> 
> 标签：c++, linux, poco-libraries

我正在使用 poco 加载和卸载库。在windws上一切正常，但在Linux上，`poco::ClassLoader::unloadLibrary(libraryName)`函数调用失败。它只是进入这个函数，它永远不会出来，也不会抛出异常。我还有一个`.so`图书馆，它工作得很好。

我知道你不能告诉我它失败的确切原因，但如果我知道这可能是什么原因，它可以帮助我，也许有一些工具可以帮助我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:22:45.790

它可能正在等待一些资源被释放和释放。poco 有没有机会追踪创建的对象？！这可能是因为卸载方法正在等待解锁的锁定或状态。您可以使用内存分析器来检查那些未释放的对象。

# c# - 当用户控件在页面上使用两次时，一个用户控件上的事件和委托问题

> ID：10911421
> 
> 赞同：0
> 
> 时间：2012-06-06T09:21:58.273
> 
> 标签：c#, events, user-controls, delegates

我有地址用户控制。

我在我的页面上使用了两个地址，一个用于公司地址，另一个用于邮寄地址。所以我在一个页面上使用了我的地址用户控件两次。

在这个地址用户控件中，当用户填写邮政编码时，我将从数据库中提取街道地址和建筑物地址并为用户填写文本框。

但我的问题是，每当用户填写一个邮政编码时，两个地址用户控件都会填充相同的数据。

这是我的地址用户控件示例代码

```
public delegate void AddressForServiceHandler(string callType, string refreshType, Dictionary<string, string> keyvalues);
public delegate void MailAddressForServiceHandler(string callType, string  refreshType, Dictionary<string, string> keyvalues);
public event AddressForServiceHandler AddressForService_APICall;
public event MailAddressForServiceHandler MailAddressForService_APICall;

protected void txtPostalCode_TextChanged(object sender, EventArgs e)
    {
            #region delegate func
            Dictionary<string, string> Params = new Dictionary<string, string>();
            Params.Add("PostalCode", txtPostalCode.Text.Trim());

            if (AddressForService_APICall != null)
            {
                AddressForService_APICall(txtPostalCode.Text, "PostalCode", Params);
            }
            if (MailAddressForService_APICall != null)
            {
                MailAddressForService_APICall(txtPostalCode.Text, "PostalCode", Params);
            }
            #endregion

    } 
```

txtPostalCode_TextChanged事件同时触发***** **AddressForService_APICall***和**MailAddressForService_APICall**，因此两个地址用户控件都填充了相同的数据。

我应该如何处理这种情况？我只想填充一个相应的地址用户控件。提前致谢。

凯文

**更新**

这是我将填充数据的代码。**这是在aspx**页面上的编码。

```
protected void InitializeEvents()
    {
        Address1.AddressForService_APICall += new AddressForServiceHandler(AddressForService);
        Address2.MailAddressForService_APICall += new MailAddressForServiceHandler(MailAddressForService);
    }

protected void AddressForService(string callType, string refreshType, Dictionary<string, string> keyvalues)
    {
        try
        {
            using (ServiceAddress cmProxy = new ServiceAddress())
            {
                Dictionary<string, string> dsPostalCode = new Dictionary<string, string>;
                dsPostalCode = cmProxy.GetAddress(callType, refreshType, keyvalues);// it will return the dictionary filled with the data
                Address1.RefreshAddressForRegistration(dsPostalCode); // here I call address control method to fill the data
            }
        }
        catch (Exception ex)
        {
            ...
        }
    }

    protected void MailAddressForService(string callType, string refreshType, Dictionary<string, string> keyvalues)
    {
        try
        {
            using (ServiceAddress cmProxy = new ServiceAddress())
            {
                Dictionary<string, string> dsPostalCode = new Dictionary<string, string>;
                dsPostalCode = cmProxy.GetAddress(callType, refreshType, keyvalues);
                Address2.RefreshAddressForRegistration(dsPostalCode);
            }
        }
        catch (Exception ex)
        {
            ...
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:15:47.330

从您的问题和您的评论中，我了解到 txtPostalCode 是您的 UserControl 的一部分，并且 txtPostalCode_TextChanged 也在您的 UserControl 中定义，而 AddressForService 和 MailAddressForService 以包含 2 个 UserControl（地址 1 和地址 2，我想）的形式定义。

如果是这种情况，您的错误是您的 txtPostalCode_TextChanged 实现被认为好像它已经知道表单上有两个控件。您可能应该简单地用一个事件替换您的事件，如下所示：

```
public delegate void AddressForServiceHandler(string callType, string refreshType, Dictionary<string, string> keyvalues);

public event AddressForServiceHandler PostalCodeChanged;

protected void txtPostalCode_TextChanged(object sender, EventArgs e)
    {
            Dictionary<string, string> Params = new Dictionary<string, string>();
            Params.Add("PostalCode", txtPostalCode.Text.Trim());

            if (PostalCodeChanged != null)
            {
                PostalCodeChanged(txtPostalCode.Text, "PostalCode", Params);
            }
    } 
```

然后在您使用 UserControls 的表单中，代码应为：

```
protected void InitializeEvents()
    {
        Address1.PostalCodeChanged += new AddressForServiceHandler(AddressForService);
        Address2.PostalCodeChanged += new AddressForServiceHandler(MailAddressForService);
    } 
```

通过这种方式，您有 2 个代表地址的 UserControl，Address1 和 Address2，并且在这些控件中的每一个中，您都有一个文本字段 (txtPostalCode)，该字段在更改时会执行 txtPostalCode_Changed，它会为您的控件触发 PostalCodeChanged。

在 InitializeEvents 中，您使用两种不同的方法订阅用户控件的 PostalCodeChanged 事件。这意味着当 Address1 的 txtPostalCode 发生变化时，PostalCodeChanged 只会为 Address1 控件触发，并且只会执行订阅该事件的方法，而不是附加到 Address2 中相同事件的方法。

如果这两种方法（AddressForService 和 MailAddressForService）仍然执行，那么您的代码中的其他地方一定有问题。我会尝试调试它，在不应执行的方法（MailAddressForService）中使用断点更改 Address1 中的 txtPostalCode。然后我会查看调用堆栈以了解您是如何到达那里的，并检查 Address1 的 PostalCodeChanged 事件以查看订阅了该事件的内容。

# php - Lighttpd FastCGI PHP https - 使用不同证书完成握手？

> ID：10911422
> 
> 赞同：1
> 
> 时间：2012-06-06T09:22:02.883
> 
> 标签：php, fastcgi, lighttpd

好吧，我敢肯定有人会告诉我这是一个非常愚蠢的想法，但请幽默。

我有一个使用 Lighttpd 托管的 php 站点。我有多个域可以解析到我的网站（例如...mysite.com 和 mysite2.com）。这些网站需要使用 https。

当请求 mysite.com 或 mysite2.com 时，我希望我的 php 页面以正确的证书进行响应。因此，澄清一下，当浏览器从我的 php 页面获得响应时，它不会抱怨证书，因为它将使用正确的证书。

这可能吗？如何？

谢谢！

电动汽车

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:14:42.167

到 PHP 运行时，您的 Web 服务器已经完成了 SSL 握手，因此它无法对证书做任何事情。

如果您使用基于名称的虚拟主机，但仍想使用不同的 SSL 证书，您可以利用[`SNI`](http://en.wikipedia.org/wiki/Server_Name_Indication)大多数浏览器和 Web 服务器支持的（SSL 和 TLS 的扩展）（需要 OpenSSL >= 0.9.8） ，包括 Lighttpd。

# java - Hadoop 插件 Karmasphere - 文件的阻止列表已更改异常

> ID：10911424
> 
> 赞同：2
> 
> 时间：2012-06-06T09:22:05.840
> 
> 标签：java, hadoop, cloudera, hadoop-plugins

我目前已经开始使用 karmasphere eclipse 插件来做 mapreduce 工作。我按照[文档](http://karmasphere.com/ksc/karmasphere-studio.html)中的说明操作，可以在主机上运行本地开发、部署作业。后来我下载了Cloudera CDH3并作为VM运行（通过VMWare），我可以在VM（来宾机器）本地运行mapreduce作业，我可以从eclipse Hadoop的角度监控VM中发生的mapreduce作业（主机），当我尝试使用 karmasphere 远程部署时，我只能看到 HDFS 中的可用文件，但我无法访问这些文件，也无法运行 map reduce 程序，也无法从我的 eclipse IDE 在 HDFS 中创建新文件。我得到以下异常：

```
java.io.IOException: Blocklist for /user/cloudera/wordcount/input/wordcount/file01 has changed!
java.io.IOException: Blocklist for /user/cloudera/wordcount/input/wordcount/file01 has changed!
    at com.karmasphere.studio.hadoop.client.hdfs.vfsio.DFSInputStream.openInfo(DFSInputStream.java:81)
    at com.karmasphere.studio.hadoop.client.hdfs.vfsio.DFSInputStream.chooseDataNode(DFSInputStream.java:357)
    at com.karmasphere.studio.hadoop.client.hdfs.vfsio.DFSInputStream.blockSeekTo(DFSInputStream.java:206)
    at com.karmasphere.studio.hadoop.client.hdfs.vfsio.DFSInputStream.read(DFSInputStream.java:311)
    at java.io.BufferedInputStream.fill(Unknown Source)
    at java.io.BufferedInputStream.read1(Unknown Source)
    at java.io.BufferedInputStream.read(Unknown Source)
    at org.apache.commons.vfs.util.MonitorInputStream.read(MonitorInputStream.java:74)
    at java.io.FilterInputStream.read(Unknown Source)
    at com.karmasphere.studio.hadoop.mapreduce.model.hadoop.HadoopBootstrapModel.createCacheFile(HadoopBootstrapModel.java:198)
    at com.karmasphere.studio.hadoop.mapreduce.model.hadoop.HadoopBootstrapModel.update(HadoopBootstrapModel.java:169)
    at com.karmasphere.studio.hadoop.mapreduce.model.core.AbstractOperatorModel.run(AbstractOperatorModel.java:369)
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:577)
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:1030) 
```

有人可以帮我解决这个问题吗？我是 karmasphere 和 Hadoop 的新手。

# jquery - 上/下滑动下拉菜单

> ID：10911427
> 
> 赞同：0
> 
> 时间：2012-06-06T09:22:24.263
> 
> 标签：jquery, css

我希望主导航的子菜单在鼠标悬停时向下滑动，在鼠标悬停时向上滑动。

以下是我正在处理的页面：http: [//jaspreetkaur.com/marg-moll/](http://jaspreetkaur.com/marg-moll/)

以下是我尝试创建效果的 jQuery 代码，但结果有点奇怪。我不确定我在代码中做错了什么。

```
$('nav > ul > li').hover(
    function(e) {
        e.stopPropagation();
        $(this).find('ul').stop(true, true).slideDown(200);
    },
    function(e) {
        e.stopPropagation();
        $(this).find('ul').stop(true, true).slideUp(200);
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:33:45.867

我看了你的网站，你用的颜色很漂亮。无论如何，您可以使用 .slideToggle("slow"); 而不是 .slideDown(200); API[在这里](http://api.jquery.com/slideToggle/) ，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:36:28.693

我觉得很**奇怪**，你在你的问题中提到的是关于你的滑动的动画效果。

正如我之前评论过的，你可以在你`slideDown()`和中使用更多的持续时间。`slideUp()`

例如。

```
$(this).find('ul').stop(true, true).slideDown(1000);

$(this).find('ul').stop(true, true).slideUp(1000); 
```

等等你喜欢什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:44:00.343

这是一个快速模型：

html:

```
<li><a href="http://www.w3schools.com">Home</a></li>
<li><a href="http://www.w3schools.com">Biographie</a>
<ul>                                   
     <li><a href="http://www.w3schools.com">Einleitung</a></li>
     <li><a href="http://www.w3schools.com">Matisse</a></li>  
     <li><a href="http://www.w3schools.com">Mein Portraitt</a></li>                                   
</ul> 
</li>
<li><a href="http://www.w3schools.com">Werke</a></li> 
```

JavaScript：

```
$(function() {
    $("body li").each(function() {
        if ($(this).find("ul").length > 0) {    

            $(this).mouseenter(function() {
                $(this).find("ul").stop(true, true).slideDown();
            });

            $(this).mouseleave(function() {
                $(this).find("ul").stop(true, true).slideUp();
            });

            $(this).find("ul").mousemove(function() {
                $(this).stop(true, true).show();
            });
        }
    });
});​ 
```

CSS

```
body ul{
    display: none;
    position:absolute;
    width: 40%;        
    background: #7ac0da;
    border-top: 5px solid #7ac0da;
    filter:alpha(opacity=80);
    -moz-opacity:0.8;
    -khtml-opacity: 0.8;
    opacity: 0.8;
}
body ul li a{
    line-height: 3.1em;
    color: white !important;
}

body ul li a:hover{    
    color: #D14836 !important;
}

body li{
float:left;
margin: 5px;
} 
```

你可以在这里看到它：http: [//jsfiddle.net/kHnpu/](http://jsfiddle.net/kHnpu/)

问候

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:00:38.973

我发现这个问题与我的 CSS 代码有关，我在错误的地方使用了 position:absolute。现在工作正常。

谢谢大家的快速帮助:)

# php - PHP 超时是否会阻止人们在同一网络加载页面？

> ID：10911429
> 
> 赞同：3
> 
> 时间：2012-06-06T09:22:27.230
> 
> 标签：php, http, networking, timeout

如果我有一个 PHP 页面正在执行一项需要很长时间的任务，并且我尝试同时从同一个站点加载另一个页面，则该页面将在第一页超时之前不会加载。例如，如果我的超时设置为 60 秒，那么直到需要很长时间才能加载/超时的页面后 60 秒，我才能加载任何其他页面。据我所知，这是预期的行为。

我想弄清楚的是，造成上述情况的错误/长时间加载 PHP 脚本是否也会影响同一网络上的其他人。我个人认为这是一个浏览器问题（即，如果我在 chrome 中加载[http://somesite.com/myscript.php](http://somesite.com/myscript.php)并且它开始在后台运行它很神奇，我就无法加载[http://somesite.com/ myscript2.php](http://somesite.com/myscript2.php)直到超时，但我*可以*在 Firefox 中加载该页面）。但是，我听到了相互矛盾的说法，说超时会发生在同一网络上的每个人身上（IP 地址？）。

我的脚本适用于从 sage 导入的一些数据，并且需要很长时间才能运行 - 有时它可能会在完成之前超时（即，如果 sage 导入在一周内崩溃），所以我再次运行它，它会从中断的地方继续. 我担心办公室的其他工作人员在运行时将无法访问该站点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:38:00.520

您在这里遇到的问题实际上与（我猜）您正在使用[session](http://php.net/manual/en/book.session.php)的事实有关。这可能有点牵强，但它会完全解释你所描述的。

这实际上不是“预期行为”，除非您的 Web 服务器设置为使用单个线程运行单个进程，我对此表示高度怀疑。这会造成网络服务器在任何时候只能处理一个请求的情况，这会影响网络上的每个人。这正是为什么您的 Web 服务器可能不会这样设置的原因——事实上，我怀疑您会发现这样配置您的服务器是不可能的，因为它会使服务器有些无用。在一些聪明的 alec 插话“Node.js 怎么样？”之前 - 这是一个特例，我相信你已经很清楚了。

当 PHP 脚本打开会话时，它会对存储会话数据的文件具有排他锁。这意味着任何后续请求都将在调用时阻塞，`session_start()`而 PHP 尝试获取会话数据文件上的排他锁 - 它不能，因为您之前的请求仍然有一个。一旦您的上一个请求完成，它就会释放对文件的锁定，并且下一个请求能够完成。由于会话是每台机器的（实际上是每浏览*会话*，顾名思义，这就是它在不同浏览器中工作的原因），这不会影响您网络的其他用户，但会保留您的站点设置，以便这是一个即使对您而言，问题也是不好的做法，很容易避免。

解决方案是在[`session_write_close()`](http://www.php.net/manual/en/function.session-write-close.php)您完成给定脚本中的会话数据后立即调用。这会导致脚本关闭会话文件并释放它的锁定。您应该尝试在开始长时间运行的过程之前完成会话数据，或者在完成之前不要调用`session_start()`。

从理论上讲，您可以稍后在脚本中调用`session_write_close()`然后`session_start()`再次调用，但我发现 PHP 有时在这方面表现出错误行为（我认为这与 cookie 有关，但不要引用我的话）。显然，请注意设置 cookie 会修改标头，因此您必须`session_start()`在输出任何数据或启用输出缓冲之前调用。

例如，考虑这个脚本：

```
<?php

  session_start();

  if (!isset($_SESSION['someval'])) {
    $_SESSION['someval'] = 1;
  } else {
    $_SESSION['someval']++;
  }

  echo "someval is {$_SESSION['someval']}";

  sleep(10); 
```

使用上述脚本，您必须等待 10 秒才能发出第二个请求。`session_write_close()`但是，如果您在该行之后添加一个调用`echo`，您将能够在前一个请求完成之前发出另一个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:28:11.717

嗯...我没有检查，但我认为对网络服务器的每个请求都是在它自己的线程中处理的。因此，不应阻止不同的请求。试试看 :-) 使用不同的浏览器并在运行大脚本时访问您的页面！

Err.. 我只是看到这对你有用:-) 它也应该适用于其他人。

# c++ - 如何在 std::function 上创建一个钩子？

> ID：10911431
> 
> 赞同：2
> 
> 时间：2012-06-06T09:22:40.427
> 
> 标签：c++

我想弄清楚如何`std::function`用“之前”和“之后”的钩子来装饰。

我在找出正确的语法时遇到了一些麻烦。这是我到目前为止所拥有的：

```
// create a "before" hook
template<typename Functor, typename Hook>
Functor hook_before(const Functor & original, Hook hook)
{
    // not legal, but illustrates what I want to achieve
    template<typename Args ...args> 
    return [=](Args ...args)
    {
        hook();
        original(args...);
    };
} 
```

我的示例应用程序在[Ideone](http://ideone.com/ZQCYi)上。

谁能帮我弄清楚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:38:41.447

这里去（未经测试）：

```
template <typename HOOK, typename RET, typename... ARGS>
struct BeforeHook {
    std::function<RET(ARGS...)> functor;
    HOOK hook;
    BeforeHook(blah) : blah {};

    RET operator()(ARGS&&... args) const {
        hook();
        return functor(args...);
    }
};

template <typename HOOK, typename RET, typename... ARGS>
BeforeHook<HOOK, RET, ARGS...> hook_before(const std::function<RET(ARGS...)> &original, HOOK hook) {
    return BeforeHook<HOOK, RET, ARGS...>(original, hook);
} 
```

用法：

```
auto hooked = hook_before(original_functor, hook_functor);
hooked(args_for_original_functor); // calls hook_functor, then original_functor 
```

或类似的规定。original_functor 需要转换为`std::function`，但几乎所有可调用的都是。两个仿函数都需要成本可调用，但如果您愿意，可以将其`const`删除`operator()`。

如果您想尝试返回 lambda 而不是 的实例，请对模板参数和`BeforeHook`使用相同的技巧，并确定是否可以在 lambda 中使用模板参数包：`RET``...ARGS`

```
template <typename HOOK, typename RET, typename... ARGS>
std::function<RET(ARGS...)> hook_before(const std::function<RET(ARGS...)> &original, HOOK hook) {
    return [=](ARGS&&... args) -> RET {
        hook();
        return original(args...);
    };
} 
```

无论哪种方式，我认为关键技巧是`std::function`在模板参数推导中使用将返回类型与参数分开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T09:53:49.950

你可以这样做：

```
#include <functional>
#include <iostream>

template <class Hook, class ReturnType, class... ArgType>
std::function<ReturnType(ArgType...)> hook_before(
    const std::function<ReturnType(ArgType...)>& original, 
    Hook hook)
{
    return [=](ArgType... args){
        hook();
        return original(std::move(args)...);
    };
}

int main()
{
    std::function<int(int, int)> sum = [](int a, int b) { return a + b; };

    std::cout << sum(3, 4) << std::endl;

    auto myhook = []() { std::cout << "Calculating sum" << std::endl; };
    auto hooked_sum = hook_before(sum, myhook);
    std::cout << hooked_sum(3, 4) << std::endl;
} 
```

该`hook_before`函数接受两个函子，并返回另一个接受与第一个（ArgType 参数包）相同的参数但`hook`首先调用的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T10:15:02.840

试试下面的。

```
template<typename Functor, typename Hook>
struct BeforeHooked
{
    Functor f;
    Hook hook;

    template<class... Args>
    typename std::result_of<F(Args&&...)>::type
    operator()(Args&&... args)
    {
        hook();
        return f(std::forward<Args&&>(args)...);
    }
};

template<typename Functor, typename Hook>
Functor hook_before(Functor f, Hook hook)
{
    return BeforeHooked{f, hook};
} 
```

代码未经测试，但假设你有一个可以编译它的编译器，我认为它应该做你想做的事。与其他答案不同，它可以接受任何函子，而不仅仅是`std::function`，如果你给它一个多态函子，它仍然是多态的。

# svn - 如何获取 svn 存储库中提交次数最多的文件列表？

> ID：10911434
> 
> 赞同：2
> 
> 时间：2012-06-06T09:22:50.077
> 
> 标签：svn

我有很多文件的 Subversion 存储库。我想知道在特定时间哪些文件修改了很多。有什么建议怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:54:49.343

首先，您可以获得修改后的文件列表，如下所示：

```
svn log -r {2010-11-20}:{2011-11-21} -v 
```

`sed`然后您可以使用或其他解析工具计算修改文件的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:18:51.740

如果您想在您的 svn 存储库中获得“漂亮”的统计信息表示，请检查[Statsvn](http://www.statsvn.org/)。

> StatSVN 从 Subversion 存储库中检索信息并生成描述项目开发的各种表格和图表，例如
> 
> ...
> 
> *   文件数 平均文件大小 最大文件 修订次数最多的文件
> 
> ...

如此[处所示](http://www.statsvn.org/statsvn/file_sizes.html)（向下滚动到最后），您可以在存储库中拥有最高修改的文件。

# android - 在android中几次后隐藏搜索栏

> ID：10911437
> 
> 赞同：1
> 
> 时间：2012-06-06T09:23:02.517
> 
> 标签：android, search, android-edittext

我正在创建一个搜索栏，它将搜索 listview 的内容。我已经完成了一些代码，现在它工作正常，但我想添加的还有一件事是，当用户有一段时间没有触摸屏幕时，这个 searchBar 应该自动隐藏。如果可能的话，在 Android 中是否可能，请给我一些建议。 **谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:27:31.063

实现一个 onTouchListener

```
 // Catch touch events here
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        System.out.println("Touch Down X:" + event.getX() + " Y:" + event.getY());//hide search bar
    } 
    if (event.getAction() == MotionEvent.ACTION_UP) {
        System.out.println("Touch Up X:" + event.getX() + " Y:" + event.getY());//shows the search bar
    }
    return super.onTouchEvent(event);
} 
```

然后在这个你会想要引用按钮并设置它的可见性：

```
 searchbar.setVisibility(View.VISIBLE); or View.INVISIBLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:28:24.893

您可以使用 android Activity 的 onUserInteraction api。

[http://developer.android.com/reference/android/app/Activity.html#onUserInteraction](http://developer.android.com/reference/android/app/Activity.html#onUserInteraction)

您可能需要打开/关闭标志 onUserInteraction。然后，一个线程可能会每隔 30 秒左右轮询一次以读取此标志。如果空闲时间大于您想要的时间，您可以隐藏搜索栏。

# cloud - 云铸造安装错误

> ID：10911438
> 
> 赞同：1
> 
> 时间：2012-06-06T09:23:15.283
> 
> 标签：cloud, cloud-foundry

在**“cloud foundry”**`error: null`上安装我的应用程序时，我 在执行这些命令时得到一个：

1.  grails prod cf 信息
2.  grails prod cf-push

但回报`error: NULL`

我该怎么做***才能将应用程序安装到 Cloud Foundry***？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:28:34.957

关于 Glenn 的评论，“您是否尝试过开发一个已知的优秀应用程序并推送到 Cloud Foundry？例如，您可以按照本教程并推送 Grails Petclinic 应用程序吗？”：昨天我尝试了 Petclinic 应用程序与 grails 2.0.4 的结合用 Cloud Foundry 插件 1.2.2，并且成功了。

# javascript - Javascript：如何检查数据是否已加载

> ID：10911446
> 
> 赞同：2
> 
> 时间：2012-06-06T09:23:42.213
> 
> 标签：javascript, google-chrome-extension

我正在开发一个 Chrome 插件。它为每个标签注入一个类名。

我对诸如 facebook 之类的网页有一些问题，当您向下滚动时会在其中加载内容。

我想知道是否有办法检查是否加载了新内容。

到目前为止，我能找到的唯一解决方案是

```
 setInterval(function() { 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:36:19.297

Chrome 支持一个`DOMSubtreeModified`事件（[源） - 有关详细信息，请参阅](http://en.wikipedia.org/wiki/DOM_events)[此答案](https://stackoverflow.com/questions/6210159/call-a-function-when-the-content-inside-a-div-is-changed)。您的代码应如下所示：

```
document.addEventListener('DOMSubtreeModified', function() {
  $("*:not(.my_class)").addClass('my_class');
}, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:26:22.757

如前所述`Konrad Dzwinel`，您可以使用一些[`Mutation Event`](https://developer.mozilla.org/en/DOM/DOM_event_reference)侦听器

```
document.addEventListener("DOMSubtreeModified", methodToRun); 
```

但请注意，[`Mutation Events`](https://developer.mozilla.org/en/DOM/Mutation_events)这些性能猪实际上并不能很好地驯服（它们过于频繁地触发并大大降低了页面速度）。因此，它们已在一年多前被弃用，仅在真正需要时才应使用。然而，他们工作。

如果你想要这个 Chrome 扩展，你可以使用[`Mutation Observers`](https://developer.mozilla.org/en/DOM/DOM_Mutation_Observers)DOM Level 4 中的新的和闪亮的（点击那里的链接，他们解释了很多！）。在`DOMSubtreeModified`触发一千次的情况下，`MutationObserver`只触发一次，所有修改都包含在内且可访问。

适用于（截至 2012/06 年）：

*   Chrome 18+（前缀，`window.WebKitMutationObserver`）
*   Firefox 14+（无前缀）
*   WebKit 夜班

# c++ - 遍历所有布尔组合

> ID：10911447
> 
> 赞同：2
> 
> 时间：2012-06-06T09:23:47.967
> 
> 标签：c++, testing

在我想测试的函数中，我有大约 10 个布尔值，它通过一系列 if-else 等来改变我的函数的结果。我想自动运行所有可能的组合。我想做一个 std::vector，每个元素都指向我的 10 个布尔值之一。现在是否有一种通用算法来遍历我的向量中的所有布尔值组合？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:26:47.013

不是真的用户友好，发布这个只是为了好玩：

```
bool b[10];
for ( int i = 0 ; i < 1024 ; i++ )
{
   for ( int j = 0 ; j < 10 ; j++ )
   {
      b[j] = i & (1 << j);
   }
   testFunction (b[0],....,b[9]);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T09:37:27.087

假设您的函数具有类似的签名

```
void f( bool b0, bool b1, bool b2 ... bool b9 ); 
```

你可以利用二进制算术：

```
void f( bool b0, bool b1, bool b2, bool b3, bool b4,
        bool b5, bool b6, bool b7, bool b8, bool b9 );

int main()
{
    for ( int i = 0; i < (1 << 10); ++i ) {
        f( i & 0x001, i & 0x002, i & 0x004, i & 0x008, i & 0x010,
           i & 0x020, i & 0x040, i & 0x080, i & 0x100, i & 0x200 );
    }
} 
```

这将调用`f`1024 次，每次都使用不同的布尔值组合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T09:37:33.680

您可以[`bitset<10>`](http://www.cplusplus.com/reference/stl/bitset/)从 2^10 组合中的每一个构建：

```
for (int mask = 0 ; mask != (1<<10) ; mask++) {
    bitset<10> bits(mask);
    // At this point, bits[i] contains true of false
    // for the combination of bits in mask.
} 
```

# android - Android ListView 内存泄漏？

> ID：10911449
> 
> 赞同：1
> 
> 时间：2012-06-06T09:24:06.800
> 
> 标签：android, listview, memory-management, android-listview, drawable

我已经实现了一个分段列表视图，因此每个部分都有一个使用[本指南](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)的适配器，并且可能会导致视图在滚动时一遍又一遍地分配，而不是因为有不同的适配器而重用（但是当回滚时，它会重用但对于同一个适配器），它的 getView 方法是这样的（简化）：

```
 Map< String, ? > object = null;
        String id = null, title = null, rating = null, pic_url = null;
        object = sectionContent.get(position).getMap();
        id = (String) object.get(EventRowValues.ROW_ID);
        title = (String) object.get(EventRowValues.ROW_TITLE);
        pic_url = (String) object.get(EventRowValues.ROW_PIC_URL);

        View hView = convertView;
        if ( hView == null ) {
            hView = mInflater.inflate(R.layout.popularity_row, null);
            ViewHolder holder = new ViewHolder();
            holder.pic = (ImageView) hView.findViewById(R.id.icon);
            holder.title = (TextView) hView.findViewById(R.id.label);
            hView.setTag(holder);
        }

        final ViewHolder holder = (ViewHolder) hView.getTag();

        holder.id = id;

        mImageWorker.loadImage(pic_url, holder.pic);

        holder.title.setText(title);

        return hView; 
```

loadImage 方法来自[这个谷歌示例](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)。

问题是当我滚动时它会占用越来越多的内存，例如 2 MB 用于 5-10 行。当我向后滚动时，它不会占用更多内存，但据我所知，它不应该分配如此多的内存，因为它会重用视图，因为我希望它在加载时以及滚动以使用时占用内存来自缓存的相同视图和位图（因为大部分可绘制对象是从缓存返回的相同对象）。

可能是什么问题？还有其他更智能的可重用分段列表视图选项吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:36:42.393

想通了，我使用的是我之前提到的指南中的分段表格视图，它不会正确重用单元格。我已经实现了一个带有一些补丁的 ExpandableListView 以使其工作，现在它很棒。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T09:36:33.960

试试这个：**更新：**

```
 ViewHolder holder = new ViewHolder();

        if ( convertView == null ) {
            holder = new ViewHolder();
            hView = mInflater.inflate(R.layout.popularity_row, null);
            holder.pic = (ImageView) hView.findViewById(R.id.icon);
            holder.title = (TextView) hView.findViewById(R.id.label);
            hView.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        } 
```

PS：您已经创建了两次持有人对象。真的需要吗？

您使用的是哪个android版本，因为我也遇到了同样的问题，我使用的是11版，在更高版本上，如果您希望能够快速滚动列表，您需要在清单文件中提供`android:hardwareAccelerated="true"`属性。`activity tag`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T09:28:58.243

注释掉 mImageWorker.loadImage(pic_url, holder.pic); 并显示内存消耗的差异

# php - 随机图像显示

> ID：10911452
> 
> 赞同：-1
> 
> 时间：2012-06-06T09:24:27.513
> 
> 标签：php, javascript, jquery, html, css

在输出多个图像时，最简单的代码或方法是什么？

另外我想在我的css文件中设置它的样式。

我想在我的 index.php 上显示它们

我已经尝试过了： [随机图像显示](https://stackoverflow.com/questions/1080787/random-image-display)

如何使用 php 或 javascript 或 html 使这些图像一次随机显示一张：

```
<img src="image_1"/>
<img src="image_2"/>
<img src="image_3"/>
<img src="image_4"/>
<img src="image_5"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T09:47:12.583

你应该制作一个像这样的图像数组：

```
<?php
    $images = array('img1.jpg', 'img2.jpg', 'img3.jpg');
?> 
```

然后，您只需从数组中获取一个随机元素

```
<?php
    $random_image = array_rand($images);
?> 
```

然后您可以立即显示图像：

```
<img src="<?php echo $images[$random_image]; ?>" /> 
```

希望这可以帮助。

# iphone - 无法将 sqlite 文件复制到捆绑/应用程序、iPhone 资源

> ID：10911456
> 
> 赞同：0
> 
> 时间：2012-06-06T09:24:51.077
> 
> 标签：iphone, sqlite, resources, copy, bundle

我一直在为 iPhone 编写这个应用程序，我需要使用 sqlite。我已经用一堆数据预加载了我的 sqlite，我将该 sqlite 文件复制到我的项目文件夹中。当我启动应用程序时，似乎 sqlite 数据文件没有复制到模拟器的应用程序文件（文档位置）。这是我的代码：

```
 NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"moviedbl.data"];
    BOOL success = [fileManager fileExistsAtPath:dbPath];

    if(!success){
        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent: @"moviedbl.data"];
        //NSString *defaultDBPath = [[NSBundle mainBundle] pathForResource:@"moviedbl" ofType: @"data"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

        if(!success){
            NSAssert1(0, @"Failed to create writable database file with message '%'.", [error localizedDescription]);
        }
    } 
```

貌似defaultDBPath是指模拟器中的app文件夹，原本不包含任何sqlite文件，实际上是在等待一个sqlite文件被复制到里面。据我了解，要复制文件，我们应该从我们的包中获取文件（不确定包是指我们的项目文件夹还是什么，但我认为它是我们的项目文件夹）并将其复制到我们的模拟器。我已经坚持了好几天了，请赐教... 非常感谢您提前！！！

更新：所以我真的让它工作了。起初我以为是因为我没有从 mainBundle 或其他东西中复制文件，但事实证明，当我打开路径中 .app 的实际文件夹时，我做到了。我看到它实际上包含的数据库。奇怪的是它没有文件类型，但在 xCode 中它将文件类型显示为“数据”，所以我一直使用 ofType：@“数据”。所以最后我把它改成了 ofType:@"" 并且成功了！无论如何！愚蠢的我，但感谢所有试图帮助的人！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:51:45.873

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];

NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"moviedbl.data"];

if([fileManager fileExistsAtPath:dbPath]==NO){

    NSString *defaultDBPath = [[NSBundle mainBundle] pathForResource:@"moviedbl" ofType: @"data"];
   BOOL success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

    if(!success){
        NSAssert1(0, @"Failed to create writable database file with message '%'.", [error localizedDescription]);
    }
} 
```

# android - 如何在onSensorChange方法+加速度计中设置文本

> ID：10911459
> 
> 赞同：-1
> 
> 时间：2012-06-06T09:24:56.123
> 
> 标签：android, textview, sensors

提前致谢。

我正在使用加速度计从事游戏应用程序。但是我遇到了一个问题，当我在 accelerometer.application 的“onSensorChange”方法中更新 textview 时表现不佳。

我的代码是这样的。

```
int nCounter = 0;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mTV_CountTextView = (Textview)findViewById(R.id.TextView);
} 
```

…………

```
public void onSensorChanged(SensorEvent sensorEvent) {
    {
        if (sensorEvent.sensor.getType() == Sensor.TYPE_ORIENTATION) {
            // Set sensor values as acceleration
            yAcceleration = sensorEvent.values[1];
            xAcceleration = sensorEvent.values[2];

                            nCounter++; 
                             mTV_CountTextView.settext(""+nCounter);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:29:53.347

试试这个。。

```
mTV_CountTextView.settext(""+String.valueOf(nCounter)); 
```

可能是您将 Integer 用于 settext，因此您遇到错误..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:19:44.723

1.  setText() 而不是 settext ？

2.  您正在轮询方向传感器的值以查看设备加速度 o_O 吗？

# java - GWT RPC 安全、http 标头、身份验证和 requestbuilder

> ID：10911462
> 
> 赞同：3
> 
> 时间：2012-06-06T09:25:07.143
> 
> 标签：java, gwt, authentication, rest, gwt-rpc

我假设 GWT RPC 实际上使用 RequestBuilder。

有没有办法提取我的 RPC 服务异步请求者使用的 RequestBuilder 实例？

实际上，我的问题是，如何提取 RequestBuilder 实例以将身份验证令牌作为 http 标头插入？有没有办法将 http 标头插入 RPC 服务请求？

即使我可以在请求中插入一个 http 标头，那么如何告诉远程 servlet 期望该身份验证令牌？因此，事实上，GWT RPC 是否提供了一个安全认证框架？

我认为答案是否定的，或者至少不是以一种方便的方式。我对吗？

我将 RestEasy 与通过 SSL 的 RestyGWT 结合使用，我们可以随时插入标题。顺便说一句，RestyGWT 构造它的请求以使用 RequestBuilder。

我的实际动机是比较 GWT RPC 和 GWT JAX-RS (RestyGWT + RestEasy) 之间的安全有效性。因此，如果您作为回答者有一个替代的详细论述，比较 RPC 与直接使用 RequestBuilder 或 REST 的安全有效性（而不是直接回答这个问题），请随时详细说明。

我是否可以假设 GWT RPC 不安全/不有效，我应该避免使用 GWT RPC 来进行安全的身份验证请求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:44:26.743

您可以让您的*异步方法*返回 a`Request`或 a`RequestBuilder`而不是`void`. `Request`允许您`abort()`处理待处理的请求，而`RequestBuilder`允许您在请求发送之前对其进行修改（如果您将返回类型声明为`RequestBuilder`，则您负责调用`send()`以实际发出请求）。

或者，您可以使用为使用特定异步服务代理进行的每个调用[`RpcRequestBuilder`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/rpc/RpcRequestBuilder.html)自定义。`RequestBuilder`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T10:04:01.590

据我所知，gwt rpc 没有内置的安全解决方案。但如果我需要这样的身份验证，我会采取以下步骤：

1）为了能够设置http标头，您可以像我自己一样制作自定义请求构建器：

```
MyServiceAsync myService = GWT.create(MyService.class);
MyRequestBuilder myRequestBuilder = new MyRequestBuilder();
myRequestBuilder.addHeader("header", "value");
((ServiceDefTarget) serviceInstance).setRpcRequestBuilder(myRequestBuilder); 
```

MyRequestBuilder 扩展了 RpcRequestBuilder。在 MyRequestBuilder 中，我覆盖了放置标题的方法 doFinish(RequestBuilder rb) 。

也许这不是一个超级解决方案，但我还没有找到更好的解决方案。

2）对于服务器端，我将实现 AuthenticationFilter 以检查标头并在调用 Servlet 之前执行服务器端身份验证功能。

# asp.net - 连接 MSChart 中的堆积列

> ID：10911465
> 
> 赞同：0
> 
> 时间：2012-06-06T09:25:14.550
> 
> 标签：asp.net, .net, mschart

是否可以将 100% Stacked MSChart 图表中的列与每个彩色块（系列）的线条连接起来？

在手动添加新系列并尝试将它们与堆叠条“对齐”之前，我想知道是否有一些我错过的自定义属性或选项......

# sql-server - 在 SQL Server 中将 STCrosses() 与空间索引一起使用

> ID：10911473
> 
> 赞同：1
> 
> 时间：2012-06-06T09:25:48.990
> 
> 标签：sql-server, sql-server-2012, spatial-index, spatial-query

地理数据的 Microsoft StCrosses() 函数是否支持空间索引？

当我尝试使用空间索引执行此功能时，我收到以下错误消息：

“查询处理器无法为带有空间索引提示的查询生成查询计划。原因：空间索引不支持谓词中提供的方法名称。尝试删除索引提示或删除 SET FORCEPLAN”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:16:44.927

不。

索引空间数据很重要，您正在讨论的类可以包含任意复杂的图形，而不仅仅是简单的几何形状。在一般情况下，实现形状和索引的特定方式会使查找重叠变得困难或不可能。它也不基于复杂几何的空间数据的索引。这可能就是您不能要求 SQL 仅使用索引的原因——那里没有足够的数据。在退化的情况下可能有，但它不会知道，所以它被关闭了。

想象一下有一个星形，其中嵌入了复杂的东西。索引可能只存储外部 shpe 的边界，或形状的中心，或边界矩形。这些都不足以计算 2 个形状的交集，或者这些形状实际上是否重叠。

请参阅[http://msdn.microsoft.com/en-us/library/bb895265.aspx#geometry](http://msdn.microsoft.com/en-us/library/bb895265.aspx#geometry)以确认它不受支持。

# c# - 根据半径和中心坐标指定三角形的顶点

> ID：10911475
> 
> 赞同：-1
> 
> 时间：2012-06-06T09:25:55.470
> 
> 标签：c#, xna, geometry

有这个代码公式吗？我正在使用 C# 和 XNA，在我的课程中，我有一个由三个向量组成的数组（代表三角形的顶点），以及一个单独的向量坐标。

我计划在循环中更新这些位置，因为它会进一步升级到屏幕顶部。

我会问 maths.stackexchange.com，但看看这如何适用于编程（我个人更擅长阅读代码而不是数学本身 - 我仍在学校学习代数），我认为这更有意义让我在这里问。

**编辑** 是的，我正在寻找一个等边三角形。或者任何三角形，就此而言。它是什么并不重要。我要找的只是一个公式；要求这么难吗？

**问题**

基本上，我要解决的问题是从我的播放器中射出一个三角形（想想*Space Invaders*；即，三角形充当来自射线枪的射线）。我需要的是一个代码公式，它将允许根据三角形的中心位置和半径来渲染三角形，因为三角形将在其`Y`坐标上向上移动。我有绘图调用，它们可以工作，但问题是当放入 for 循环绘图迭代时三角形（其中中心向量位置 - 在`Y`坐标上 - 增加`N`） 只是在绘制时*位于*玩家的位置旁边.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:29:24.663

我想这就是你要找的......角度是三角形的方向......这建立了一个三角形......

```
void BuildTriangle(Vector2 Center, float Radius, float Angle, Vector2[] tri)
{
   for (int i=0; i<3; i++)
   {
      t[i].X = Center.X + Radius * (float) Math.Cos(Angle + i * 2 * MathHelper.PI/3);
      t[i].Y = Center.Y + Radius * (float) Math.Sin(Angle + i * 2 * MathHelper.PI/3);
   }
} 
```

如果你想移动它，在中心添加一个速度矢量并重建它......

# php - 使用 PHP 将所有复选框值提交给 MySQL

> ID：10911478
> 
> 赞同：0
> 
> 时间：2012-06-06T09:26:13.523
> 
> 标签：php, mysql

我有一个非常简单的表单，其中包含一些文本字段和 2 个复选框。该表单有效，除非选中两个复选框，只有第一个复选框会添加到数据库中。

到目前为止我有这个：

```
<?php require_once('connectionsettings.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
. . .

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}
    # ------------ edit begins here ------------ #
    if(count($articletags) > 0)
    {
        $articletags_string = implode(",", $articletags);
    }
    # ------------ edit ends here ------------ #

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
    $insertSQL = sprintf("INSERT INTO articles (articletitle, articledescription, articletags) VALUES (%s, %s, %s)",
                   GetSQLValueString($_POST['articletitle'], "text"),
                   GetSQLValueString($_POST['articledescription'], "text"),
                   GetSQLValueString($_POST['articletags[]'], "text")); # --Edited here also

 mysql_select_db($database_MySQL_CSFTDB, $MySQL_CSFTDB);
 $Result1 = mysql_query($insertSQL, $MySQL_CSFTDB) or die(mysql_error());
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
. . .
  <form action="<?php echo $editFormAction; ?>" id="form1" name="form1" method="POST">
  . . .
       <tr>
        <td align="right">&nbsp;</td>
       <td align="left"><p>
          <label> # -- added []s to article name --
          <input type="checkbox" name="articletags[]" value="checkbox" id="articletags_0" />
          Checkbox</label>
        <br />
        <label>
          <input type="checkbox" name="articletags[]" value="checkbox 2" id="articletags_1" />
          Checkbox</label>
         <br />
         <br />
        </p></td>
     </tr>
      . . .
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:33:44.097

这是因为您为两个复选框使用了相同的名称。

您可以提供不同的名称或使用数组名称

```
<input type="checkbox" name="articletags[]" value="checkbox" id="articletags_0" />
<input type="checkbox" name="articletags[]" value="checkbox 2" id="articletags_1" /> 
```

它将作为数组发送到服务器。

```
$articletags=$_POST['articletags']
print_r($articletags) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T09:55:17.907

```
 Use checkbox as array so it can store multiple value.

<input type="checkbox" name="articletags[]" value="checkbox" id="articletags_0" />
<input type="checkbox" name="articletags[]" value="checkbox 2" id="articletags_1" />

 $articletags = $_POST['articletags']; 
```

在将值插入 db 之前将数组转换为字符串。

```
if(count($articletags) > 0)
{
 $articletags_string = implode(",", $articletags);
} 
```

在数据库中插入新值...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T09:29:52.397

当输入共享一个名称时，PHP 将丢弃除其中一个之外的所有输入，除非该名称以字符结尾`[]`。

更改为`name="articletags[]"`（或绕过`$_POST`并访问原始表单数据）。

您还需要更改构建 SQL 的逻辑，以便循环遍历数组中的值，而不是仅仅检查 articletags 是否已定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T09:30:28.833

您在两个复选框中具有相同的名称，尝试更改它并将名称与 id 相同，以便它们可以在 php.ini 中区分。

像这样的东西：

```
<label>
           <input type="checkbox" name="articletags_0" value="checkbox" id="articletags_0" />
           Checkbox</label>
          <br />
         <label>
             <input type="checkbox" name="articletags_1" value="checkbox 2" id="articletags_1" />
             Checkbox</label> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T09:36:00.210

在复选框和单选按钮中，如果我们需要单个值，我们使用相同的名称。对于您的问题，您需要这两个值，这意味着您应该使用不同的名称或数组。

# c - 客户端 - 使用 servbyport() 函数搜索所有服务

> ID：10911481
> 
> 赞同：-1
> 
> 时间：2012-06-06T09:26:24.893
> 
> 标签：c, client-server

我需要做简单的客户端程序，当我添加端口号时，客户端将搜索该端口的所有服务。现在是 if 语句中的分段错误问题。如何退回所有服务？我想在我的程序中它只会返回一个。

我的代码：

```
 int main (int argc, char *argv[])
{
    int sockfd, n,pol, s;
    int numer;
    char recvline[MAXLINE +1];
    char  p;
    struct sockaddr_in servaddr;
    struct servent *sp;

    if (argc != 3)
        err_sys("Aby uruchomić podaj: klient <Adres IP> <port>");

    s = atoi(argv[2]);
    if((sp = getservbyport(s,NULL)) == NULL)
        {
            printf("port (s): %d \n", s);
            printf("port (sp): %d \n", sp->s_port); //segmentation fault
            err_sys("problem with port");   
        }

    if((sockfd = socket(AF_INET, SOCK_STREAM, 0))<0)
        err_sys("Blad utworzenia polaczenia");
    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = sp->s_port;
    if(inet_pton(AF_INET, argv[1], &servaddr.sin_addr)<=0)
        err_sys_kom("Blad konwersji do adresu IP dla %s", argv[1]);

    printf("%s", sp->s_name);
    pol = connect(sockfd, (SA*) &servaddr, sizeof(servaddr));
    if (pol < 0)
       {
          err_sys_kom("Blad polaczenie z serwerem");
          close(sockfd);
          exit(-1);
       }
    else
        str_cli(stdin, sockfd , 1);

exit(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:36:50.700

编辑（针对*新的新问题*- 请参阅下面的评论）：

您可能需要获取[协议](http://linux.die.net/man/5/protocols)列表并循环使用这些协议。循环的内容大致应该是：

1.  称呼[`getprotoent`](http://linux.die.net/man/3/getprotoent)
2.  如果结果为 NULL，则退出循环。
3.  否则，从返回的结构中挖掘出协议名称。
4.  使用该名称作为第二个参数`getservbyport`
5.  用结果做你想做的事

编辑（针对*新问题*）：

```
if((sp = getservbyport(s,NULL)) == NULL) 
```

所以你的逻辑是只读`sp`IF `sp`is `NULL`。显然它会出现段错误。

它应该是：

```
if((sp = getservbyport(s,NULL)) != NULL) 
```

但是你会指出*另一个新问题*：

为什么是`sp`NULL？

这可能是因为（根据我的答案的早期版本），您做了一个*不是*整数的`atoi`东西。这可能是因为任何其他原因。我们不能说，因为我们不知道你给出了什么意见。

 ** * *

答案的以下部分是针对OP 在*同一个问题中提出的一个**老*问题，并从那时起选择对其进行编辑：

 *首先：既然你正在使用`getservbyport`，你真的应该阅读[services](http://linux.die.net/man/5/services)，如果你还没有的话。

现在到错误：

[`getservbyport`](http://linux.die.net/man/3/getservbyport)是类型：

```
struct servent *getservbyport(int port, const char *proto); 
```

您正在传递`argv[2]`which 是 type`char *`而不是`int`for `port`。

我相信用户在你的程序中输入这个作为参数？

如果您*知道*a`char *`指向一组*看起来像*整数的字符，例如“1024”，那么您可以使用 将其转换为整数[`atoi`](http://pubs.opengroup.org/onlinepubs/007904875/functions/atoi.html)。

而是在出现错误的情况下，在调用时执行此操作`getservbyport`，同时确保您已包含`stdlib.h`：

```
getservbyport(atoi(argv[2]),NULL) 
```

如果`argv[2]`不能表示为整数，您将获得未定义的行为，因此您可能需要先检查一下。**

# android - 互联网在 Android 4 中不起作用

> ID：10911483
> 
> 赞同：-1
> 
> 时间：2012-06-06T09:26:30.557
> 
> 标签：android

我在 Android 2.3.5 和 Android 4 中运行相同的代码。但在第 4 版中，互联网似乎无法正常工作。但是当我检查手机中的浏览器时，它可以工作。

```
HttpGet httpget = new HttpGet("http://www.blah.com/?"+paramString);
            try {
                HttpResponse response = httpclient.execute(httpget);
                HttpEntity entity = response.getEntity();
                //------- scrape data
                if (entity != null) { 
```

以下是错误日志

```
06-06 12:25:48.685: E/AndroidRuntime(7972): FATAL EXCEPTION: main
06-06 12:25:48.685: E/AndroidRuntime(7972): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.superhub.matkahupi/com.superhub.matkahupi.AutodetectedTripsActivity}: android.os.NetworkOnMainThreadException
06-06 12:25:48.685: E/AndroidRuntime(7972):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at android.os.Looper.loop(Looper.java:137)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at android.app.ActivityThread.main(ActivityThread.java:4340)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at java.lang.reflect.Method.invokeNative(Native Method)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at java.lang.reflect.Method.invoke(Method.java:511)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at dalvik.system.NativeStart.main(Native Method)
06-06 12:25:48.685: E/AndroidRuntime(7972): Caused by: android.os.NetworkOnMainThreadException
06-06 12:25:48.685: E/AndroidRuntime(7972):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
06-06 12:25:48.685: E/AndroidRuntime(7972):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:35:39.360

你的主线程无法处理它所以把它放在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中。所以你必须在其他线程中调用 http 请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:54:29.090

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.superhub.matkahupi/com.superhub.matkahupi.AutodetectedTripsActivity}: android.os.NetworkOnMainThreadException 
```

Android 4.0 严格禁止在主线程上进行网络操作。正如 Samir 所说，在非 UI 上执行网络或任何操作需要超过 5 秒才能执行。

# c# - c#泛型。尝试为网格控件一般设置列

> ID：10911484
> 
> 赞同：1
> 
> 时间：2012-06-06T09:26:31.100
> 
> 标签：c#, model-view-controller, generics

我需要一些关于如何设置网格控件的列列表的帮助。我有一个第 3 方库，我想使用以下方法签名：

```
 public GridControl SetColumns<T>(Action<GridColumnModelList<T>> initCols) 
```

在操作方法的控制器中，我得到一个通用模型，其中包含我要显示的列列表：

```
 var gridprofile = new GridProfile<SiteVisitSearchGridViewModel>(gridProfileid); 
```

我现在想创建网格控件并将列应用到它，但不知道如何执行此操作：

```
GridControl gc = new GridControl();
gc.SetColumns<SiteVisitSearchGridViewModel>(gridprofile.Columns); 
```

请帮忙

谢谢安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:06:35.560

你可以试试这样的东西（它可能无法编译 - 我没有安装那个库）：

```
gc.SetColumns<SiteVisitSearchGridViewModel>(columns => 
{
    foreach(col in gridprofile.Columns)
        columns.Add(x => new GridColumnModel(col.Name));
}); 
```

# android - Google Api 10 级项目无法在 android 2.3.4 上运行

> ID：10911486
> 
> 赞同：0
> 
> 时间：2012-06-06T09:26:40.810
> 
> 标签：android, eclipse, api, usb

我创建了一个项目来实现 USB 配件。Google API 级别 10 支持附件模式，适用于 Android 2.3.4。现在我的项目在目标设备为 Google API 级别 10 的 AVD 上工作，但如果我将目标更改为 2.3.3（因为**2.3.4 目标在 eclipse 上不存在），则无法**工作。

简而言之**，我想在 Android 手机上运行一个使用 Google API 级别 10 的项目。这个怎么做？**

我尝试复制 .apk 文件，但这没有用。我也尝试复制完整的项目，但这也不适合我。

请协助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:34:49.147

我想显而易见的答案（虽然我怀疑不是你要找的那个）是你需要一台运行 2.3.4 或更高版本的设备（我目前的 RAZR MAXX 是 2.3.6）。不能要求运行低于 2.3.4 版本的设备运行为 2.3.4 及更高版本编译的应用程序。

这可能（或可能不会）有助于清除问题： [Can't find android sdk 2.3.4 in SDK manager](https://stackoverflow.com/questions/6399068/cant-find-android-sdk-2-3-4-in-sdk-manager)

欢迎来到堆栈！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:32:25.330

没错，USB 附件不适用于 2.3.3，仅适用于 2.3.4 及更高版本。（当然，它只适用于选定的手机。）

# sql - 如何在一次查询中从多个数据库中获取数据？

> ID：10911491
> 
> 赞同：1
> 
> 时间：2012-06-06T09:26:52.047
> 
> 标签：sql, sqlite

我正在使用 SQLite 3 的 Java 驱动程序，并想了解是否有任何方法可以在一个查询中从多个数据库（db1.db、db2.db）获取数据？

目前有 SQLite3 的驱动程序支持这个吗？

假设 db1 有 100 行，db2 有 100 行，我的要求是通过单个查询来查询这些行来获得 200 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:51:24.053

您可能需要查看`ATTACH DATABASE`命令：

[http://www.sqlite.org/lang_attach.html](http://www.sqlite.org/lang_attach.html)

> ATTACH DATABASE 语句将另一个数据库文件添加到当前数据库连接。

这是一个关于如何使用它的教程：

[http://longweekendmobile.com/2010/05/29/how-to-attach-multiple-sqlite-databases-together/](http://longweekendmobile.com/2010/05/29/how-to-attach-multiple-sqlite-databases-together/)

# playframework - 玩！Framework 2.0 连接多个数据库

> ID：10911492
> 
> 赞同：5
> 
> 时间：2012-06-06T09:26:52.310
> 
> 标签：playframework, playframework-2.0

我正在尝试连接到 Play 2.0 中的多个数据库。这是我的 application.conf 的样子：

```
db.default.driver= com.mysql.jdbc.Driver
db.default.url="jdbc:mysql://localhost:3306/scg2?createDatabaseIfNotExist=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;autoreconnect=true"
db.default.user=root
db.default.jndiName=DefaultDS

db.scg2_shard1.driver= com.mysql.jdbc.Driver
db.scg2_shard1.url="jdbc:mysql://localhost:3306/scg2_shard1?createDatabaseIfNotExist=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;autoreconnect=true"
db.scg2_shard1.user=root
db.scg2_shard1.jndiName=ShardDS_1 
```

下面是 persistence.xml 的样子

```
<persistence-unit name="defaultPersistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <non-jta-data-source>DefaultDS</non-jta-data-source>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.show_sql" value="true"/>        
    </properties>
</persistence-unit>

<persistence-unit name="shardPersistenceUnit_1" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <non-jta-data-source>ShardDS_1</non-jta-data-source>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.show_sql" value="true"/>        
    </properties>
</persistence-unit> 
```

连接正在正确初始化，我可以正确执行 SELECT 查询。但是，任何插入或更新似乎都不适用于“scg2_shard1”连接（一切都适用于“默认”连接）。关于我做错了什么以及我应该从哪里开始寻找纠正这个问题的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-02T07:42:35.513

将此行添加到您的 application.conf

```
jpa.scg2_shard1=shardPersistenceUnit_1 
```

# iphone - 如果我将 MPMovieControlStyleNone 设置为 MPMoviePlayerController 的属性 controlStyle，为什么引用计数会上升 2？

> ID：10911496
> 
> 赞同：0
> 
> 时间：2012-06-06T09:27:00.313
> 
> 标签：iphone

如果我将 MPMovieControlStyleNone 设置为 MPMoviePlayerController 的属性 controlStyle，为什么引用计数会上升 2？另外，我怎样才能释放 _player 对象？

我创建了一个继承自 UIViewController 的类。

实例变量

```
NSString* _movieFilename;
MPMoviePlayerController* _player; 
```

执行

```
- (MPMoviePlayerController*)makeMoviePlayer:(NSString*)res {
    NSURL* url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:res ofType:@""]];
    MPMoviePlayerController* player = [[MPMoviePlayerController alloc] initWithContentURL:url];
    if (url == nil) return nil;
    player.controlStyle = MPMovieControlStyleNone;
    return player;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view setBackgroundColor:[UIColor blackColor]];
    _player=[self makeMoviePlayer:_movieFilename];

    if(_player == nil) return;

    NSLog(@"[_player retainCount]=%d", [_player retainCount]);

} 
```

实施1 如上所述的实施。实施 2 删除实施的第五行。player.controlStyle = MPMovieControlStyleNone;

结果 1

```
[_player retainCount]=3 
```

结果 2

```
[_player retainCount]=1 
```

在实现 2 _payer 对象可以在 [_player release] 中释放。在实现 1 中，retainCount 为 3。 [_player release] 执行后，retainCount 为 2。_player 对象不会被释放。为什么 retainCount 增加 2 ？如何释放 _player 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:32:37.780

保留计数是无用的。不要叫它。

要回答您的具体问题，您可以通过遵循[内存管理规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)来解决问题。

首先，您的`makeMoviePlayer:`方法应该返回一个自动释放的对象，并且您的 viewDidLoad 应该保留它。当你不再需要它时，它应该被释放。

更好的是，打开 ARC。

# java - 用 taskkill 轻柔地结束 javaw.exe 进程

> ID：10911512
> 
> 赞同：3
> 
> 时间：2012-06-06T09:28:09.610
> 
> 标签：java, shutdown, taskkill, javaw

我在关闭 javaw.exe 进程时遇到问题。我喜欢以柔和的方式来做，所以 taskkill /F 无济于事。

尝试通过 taskkill /PID 关闭 javaw 最终会出现“SUCESS”消息，但该进程仍会继续运行。

我正在使用 Windows XP SP 3 并获得了这台机器的管理员权限。

有任何想法吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:56:54.003

所以，最后我找到了我的问题的解决方案，但没有使用 taskkill 解决。有一个程序可以将 CTRL-BREAK 发送到任何名为“SendSignal”的进程。我以前试过这个，但是我所有的响应过程都是一条错误消息，它一直在运行。我更改了发送 CTRL+C 的程序。在此之后，我能够轻轻地关闭我的 Javaw 进程。感谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:32:15.323

你可以试试：

```
taskkill /im javaw.exe 
```

# django - 从 Django 1.2 升级到 1.4 - 更严格的表单验证？

> ID：10911514
> 
> 赞同：1
> 
> 时间：2012-06-06T09:28:11.647
> 
> 标签：django, forms, validation, upgrade

我们目前正在尝试从 Django 1.2 升级到 1.4，但是我们遇到了大量抱怨表单中缺少字段的“Caught FieldError”消息，就好像 Django 已经决定在升级时对表单验证变得更加严格。

在 1.3 中添加了一个新的字段验证代码块，它似乎导致了错误，如果取出该块，一切正常。删除此额外验证是否有任何严重后果？

我们删除的代码是：

```
opts.exclude, opts.widgets, formfield_callback)
    # make sure opts.fields doesn't specify an invalid field
    none_model_fields = [k for k, v in fields.iteritems() if not v]
    missing_fields = set(none_model_fields) - \
                         set(declared_fields.keys())
    if missing_fields:
        message = 'Unknown field(s) (%s) specified for %s'
        message = message % (', '.join(missing_fields),
                             opts.model.__name__)
        raise FieldError(message) 
```

这是来自 django/forms/models.py 大约第 207 行

显然错误是未知字段，未捕获 FieldError，我很抱歉。

# javascript - 从自身中找出实例变量名

> ID：10911519
> 
> 赞同：0
> 
> 时间：2012-06-06T09:28:28.520
> 
> 标签：javascript, oop, function

我创建了一个 JavaScript 类，如下所示：

```
function MyClass() {
    this.myProp = '';
}
MyClass.prototype.myTestFunction = function() {
    alert('test');
} 
```

现在，我实例化这个类。

```
var myTestInstance = new MyClass();
myTestInstance.myTestFunction(); 
```

这会输出带有“测试”的警报。

现在我想将变量名“myTestInstance”放入函数“myTestFunction()”中，而不必将其作为参数传递。

是否有可能从被调用函数内部找出实例的变量名？

感谢您的帮助！

编辑：只是为了添加我需要这个的信息：我在真实项目中创建的每个实例都是一个特殊的 HTML 表。在标题字段中是每一列的排序按钮。因此，我动态添加了一个带有`href='javascript:myTableInstance.sort()'`. 要在实例中动态打印它，我需要变量名。

会有另一个更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T09:33:56.617

不，它没有任何意义。首先，实例不绑定到单个变量（它可能被许多变量引用，它可能被无引用 - 也许作为某个数组的成员） - 所以问题“存储的变量的名称是什么实例”是无法回答的。其次，myTestFunction 和 myTestInstance 的范围可能非常不同。在通常情况下， myTestFunction 不会“看到”定义了 myTestInstance 的范围 - 因此知道变量的名称将无济于事。

您应该只在 myTestFunction 中使用“this”。

# objective-c - Objective-C：如何用数组初始化 NSMutableDictionary？

> ID：10911521
> 
> 赞同：1
> 
> 时间：2012-06-06T09:28:40.613
> 
> 标签：objective-c, nsarray, nsdictionary

我有一个数组，它由`object,key,object,key,object,key`.

如何用这个数组初始化 NSMutableDictionary？

我找到了分离键数组（ArrayOfKeys）和对象（ArrayOfObjects）的方法，但不是这个混合数组。

也`ObjectsAndKeys`可能有帮助，但我不知道如何。

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T09:39:56.993

```
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];
for(int i=0; i < [array length] - 1; i += 2)
{
    [dictionary setObject:[array objectAtIndex:i+1] forKey:[array objectAtIndex: i]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T09:34:22.263

只需创建两个数组：keysArray（奇数索引）和 valuesArray（偶数索引）并使用`[NSMutableDictionary dictionaryWithObjects:valuesArray forKeys:keysArray]`

你可以用一个for循环来做到这一点......

# css - 网页大于身体高度？

> ID：10911523
> 
> 赞同：0
> 
> 时间：2012-06-06T09:29:04.707
> 
> 标签：css, height, webpage

这个处于测试阶段的网页[http://porkystuff.com](http://porkystuff.com)有一个很大的问题。网页大于 BODY 和 HTML 标签。我已经使用 Chrome 和 Firefox 中的开发人员工具检查了这一点。我已经尝试添加`html, body{ height:100%; }`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:53:41.543

知道了！！在您的 CSS 中，类名 sidecontent 高度为 150%。

```
.sidecontent {
  position: absolute;
  width: 180px;
  height: 150%;
left: 820px;
top: 50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T14:39:37.067

在我的情况下，我只需要通过这些 CSS 技巧将`body`and标记拉伸到整页大小：`html`

```
html {
  min-height: 100% !important;
}

body {
  min-height: 100vh !important;
} 
```

参考链接：[https ://makandracards.com/makandra/39473-stretching-an-html-page-to-full-height](https://makandracards.com/makandra/39473-stretching-an-html-page-to-full-height)

# javascript - 如何使用 JavaScript 更改 HTML 选定选项？

> ID：10911526
> 
> 赞同：231
> 
> 时间：2012-06-06T09:29:09.247
> 
> 标签：javascript, html-select

我有这样的选项菜单：

```
<form name="AddAndEdit">
   <select name="list" id="personlist">
      <option value="11">Person1</option>
      <option value="27">Person2</option>
      <option value="17">Person3</option>
      <option value="10">Person4</option>
      <option value="7">Person5</option>
      <option value="32">Person6</option>
      <option value="18">Person7</option>
      <option value="29">Person8</option>
      <option value="28">Person9</option>
      <option value="34">Person10</option>
      <option value="12">Person11</option>
      <option value="19">Person12</option>
   </select>
</form> 
```

现在我想通过使用 href 来更改选定的选项。例如：

```
<a href="javascript:void(0);"
  onclick="document.getElementById('personlist').getElementsByTagName('option')[11].selected = 'selected';">change</a> 
```

但我想选择选项`value=11 (Person1)`，而不是`Person12`。

如何更改此代码？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2012-06-06T09:38:28.820

改变

```
document.getElementById('personlist').getElementsByTagName('option')[11].selected = 'selected' 
```

到

```
document.getElementById('personlist').value=Person_ID; 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-12-18T15:33:08.527

用于处理 Selectbox 的纯 JavaScript 代码工具：

***图形理解：***

> ***图像 - A***

[![在此处输入图像描述](../Images/dcd5ace8984a991e8aced2aa8a4279b2.png)](https://i.stack.imgur.com/6jky4.png)

* * *

> ***图像-B***

[![在此处输入图像描述](../Images/80863591978ea00b1d4a804e95444c49.png)](https://i.stack.imgur.com/ZpfMK.png)

* * *

> ***图像-C***

[![在此处输入图像描述](../Images/8c89d870f57de26ba99b828974ede158.png)](https://i.stack.imgur.com/CFap7.png)

**更新 - 2019 年 6 月 25 日 | [提琴手演示](https://jsfiddle.net/neerajsinghsonu/EpMcd/)**

**JavaScript 代码：**

```
/**
 * Empty Select Box
 * @param eid Element ID
 * @param value text
 * @param text text
 * @author Neeraj.Singh
 */
function emptySelectBoxById(eid, value, text) {
    document.getElementById(eid).innerHTML = "<option value='" + value + "'>" + text + "</option>";
}

/**
 * Reset Select Box
 * @param eid Element ID
 */

function resetSelectBoxById(eid) {
    document.getElementById(eid).options[0].selected = 'selected';
}

/**
 * Set Select Box Selection By Index
 * @param eid Element ID
 * @param eindx Element Index
 */

function setSelectBoxByIndex(eid, eindx) {
    document.getElementById(eid).getElementsByTagName('option')[eindx].selected = 'selected';
    //or
    document.getElementById(eid).options[eindx].selected = 'selected';
}

/**
 * Set Select Box Selection By Value
 * @param eid Element ID
 * @param eval Element Index
 */
function setSelectBoxByValue(eid, eval) {
    document.getElementById(eid).value = eval;
}

/**
 * Set Select Box Selection By Text
 * @param eid Element ID
 * @param eval Element Index
 */
function setSelectBoxByText(eid, etxt) {
    var eid = document.getElementById(eid);
    for (var i = 0; i < eid.options.length; ++i) {
        if (eid.options[i].text === etxt)
            eid.options[i].selected = true;
    }
}

/**
 * Get Select Box Text By ID
 * @param eid Element ID
 * @return string
 */

function getSelectBoxText(eid) {
    return document.getElementById(eid).options[document.getElementById(eid).selectedIndex].text;
}

/**
 * Get Select Box Value By ID
 * @param eid Element ID
 * @return string
 */

function getSelectBoxValue(id) {
    return document.getElementById(id).options[document.getElementById(id).selectedIndex].value;
} 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-02-01T00:12:01.900

```
mySelect.value = myValue; 
```

`mySelect`您的选择框在哪里，并且`myValue`是您要将其更改为的值。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-06-06T09:41:59.210

我相信博文*[JavaScript Beginners – Select a dropdown option by value](http://www.imranulhoque.com/javascript/javascript-beginners-select-a-dropdown-option-by-value/)*可能会对您有所帮助。

```
<a href="javascript:void(0);" onclick="selectItemByValue(document.getElementById('personlist'),11)">change</a>

function selectItemByValue(elmnt, value){

  for(var i=0; i < elmnt.options.length; i++)
  {
    if(elmnt.options[i].value === value) {
      elmnt.selectedIndex = i;
      break;
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2016-08-19T08:43:38.957

您还可以像这样更改 select.options.selectedIndex DOM 属性：

```
function selectOption(index){ 
  document.getElementById("select_id").options.selectedIndex = index;
}
```

```
<p>
<select id="select_id">
  <option selected>first option</option>
  <option>second option</option>
  <option>third option</option>
</select>
</p>
<p>
  <button onclick="selectOption(0);">Select first option</button>
  <button onclick="selectOption(1);">Select second option</button>
  <button onclick="selectOption(2);">Select third option</button>
</p>
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-07-25T18:48:54.770

从技术上讲，您自己的答案并不正确，但是您弄错了索引，因为索引从 0 开始，而不是 1。这就是您选择错误的原因。

```
document.getElementById('personlist').getElementsByTagName('option')[**10**].selected = 'selected'; 
```

此外，对于标签不完全是英文或数字的情况，您的答案实际上是一个很好的答案。

例如，如果他们使用亚洲字符，则告诉您使用 .value() 的其他解决方案可能并不总是有效，并且不会做任何事情。按标签选择是忽略实际文本并按元素本身选择的好方法。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-10-21T16:24:00.430

您也可以使用 JQuery

```
$(document).ready(function () {
  $('#personlist').val("10");
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-21T19:28:29.323

如果您使用 javascript 添加选项

```
function AddNewOption(userRoutes, text, id) 
{
    var option = document.createElement("option");
    option.text = text;
    option.value = id;
    option.selected = "selected";
    userdRoutes.add(option);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-06T09:38:37.273

数组索引将从 0 开始。如果您想要 value=11 (Person1)，您将使用 position 获得它`getElementsByTagName('option')[10].selected`。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-14T23:45:07.650

这是一篇旧帖子，但如果有人仍在寻找此类问题的解决方案，我想出以下方法：

```
<script>
  document.addEventListener("DOMContentLoaded", function(e) {
    document.forms['AddAndEdit'].elements['list'].value = 11;
  });
</script> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-09T10:58:38.497

注意：选项索引计数从 0 开始。这意味着第一个选项将索引为 0。

```
document.querySelector(".add__btn").addEventListener("click", function(){
  var index = 1; /*change option value here*/  document.querySelector(".add__type").options.selectedIndex = index;
  document.querySelector(".add__description").value = "Option Index";
  document.querySelector(".add__value").value = index;
});
```

```
<html>
    <div class="add__container">
         <select class="add__type">
            <option value="inc" selected>+</option>
            <option value="exp">-</option>
         </select>
         <input type="text" class="add__description" placeholder="Add description">
         <input type="number" class="add__value" placeholder="Value">
         <button class="add__btn"> Submit </button>
</div>

<h4> Default Option Value will be selected after pressing Submit </h4>
```

# javascript - jQuery - 更改选定的文本

> ID：10911529
> 
> 赞同：0
> 
> 时间：2012-06-06T09:29:29.523
> 
> 标签：javascript, jquery, clipboard

我找到了一些代码来复制选定的文本（例如：[this](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)），但是无法更改该文本以在`clipboard`.

如何更改该文本`clipboard`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:33:25.170

由于[安全策略](http://kb.mozillazine.org/Granting_JavaScript_access_to_the_clipboard)，JavaScript 无法访问剪贴板。

可能 Flash 可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:35:47.180

检查[ZeroClipBoard 库](http://code.google.com/p/zeroclipboard/)以便在 IE 以外的其他浏览器中管理剪贴板。

希望有帮助。

# android - 如何以编程方式了解我的设备中是否安装了任何 TTS 引擎？

> ID：10911530
> 
> 赞同：8
> 
> 时间：2012-06-06T09:29:29.667
> 
> 标签：android

我想知道如何以编程方式获取设备的 TTS 引擎信息，例如是否安装了任何 TTS 引擎，如果安装了，那么这些是什么以及每个 TTS 引擎支持的不同语言是什么？我必须使用 Android 版本 2.1（api 级别 7）来实现这一点。

请帮我实现这个功能。

问候，

皮克斯

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T10:04:55.070

您可以通过首先发送结果意图来检查它

```
Intent intent = new Intent();
intent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(intent, 0); 
```

然后您可以在 onActivityResult 方法中检查是否安装了 TTS 引擎：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
if(requestCode == 0){
    if(resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS){
    Toast.makeText(getApplicationContext(),"Already Installed", Toast.LENGTH_LONG).show();
} else {
    Intent installIntent = new Intent();
    installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
    startActivity(installIntent);
    Toast.makeText(getApplicationContext(),"Installed Now", Toast.LENGTH_LONG).show();
} 
```

希望它有效:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-15T21:57:51.243

这为您提供了安装在您的 Android 上的 TTS 引擎的列表。

```
tts = new TextToSpeech(this, this);
for (TextToSpeech.EngineInfo engines : tts.getEngines()) {
Log.d("Engine Info " , engines.toString());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T10:01:57.450

要保存您的点击次数：

启动它以检查是否安装了 TTS：

```
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

然后得到这个结果：

```
private TextToSpeech mTts;
protected void onActivityResult(
    int requestCode, int resultCode, Intent data) {
if (requestCode == MY_DATA_CHECK_CODE) {
    if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
        // success, create the TTS instance
        mTts = new TextToSpeech(this, this);
    } else {
        // missing data, install it
        Intent installIntent = new Intent();
        installIntent.setAction(
            TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
        startActivity(installIntent);
    }
}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T09:46:04.260

这篇官方的[Android 博客文章](http://android-developers.blogspot.fr/2009/09/introduction-to-text-to-speech-in.html)为您提供了检测 TTS 引擎是否已安装并准备好使用的最佳实践，以及有关 TTS 的其他实践。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-02T12:20:20.827

要检查已安装的 TTS 引擎，您需要首先初始化 TTS 引擎。然后使用返回的 TTS 引擎对象调用该函数`getEngines()`以了解是否有任何 TTS 引擎被初始化。

很酷，足够的谈话，这是有效的代码： -

```
 fun initializeEngine(context: Context) {
        tts = TextToSpeech(context){ initStatus ->
            if (initStatus == TextToSpeech.SUCCESS) {
             // TTS engine initialized successfully
            }
        }
    }

   fun supportedEnginesList(): List<TextToSpeech.EngineInfo>?{
      return tts?.engines?
   } 
```

# delphi - Delphi XE2中的CalcXPosValue函数

> ID：10911532
> 
> 赞同：1
> 
> 时间：2012-06-06T09:29:37.497
> 
> 标签：delphi, delphi-xe2, teechart

我正在将 Delphi 7 代码移植到 Delphi XE2。在 TChart 中，我需要调用轴 CalXPosValue 函数。调用它是没有问题的，但是返回值不正确（和Delphi 7 中的函数返回的完全不同）。对于 Windows 32 位和 64 位版本都是如此。有人看到这个问题吗？找到解决方案了吗？

# iphone - 如何在 MapView 上绘制 MKPolyline？

> ID：10911534
> 
> 赞同：28
> 
> 时间：2012-06-06T09:29:42.363
> 
> 标签：iphone, ios, mkmapview

我有一个要在地图上绘制的点数组，它已经解码：

```
- (void) drawRoute:(NSArray *) path {
    NSInteger numberOfSteps = path.count;

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++) {
         CLLocation *location = [path objectAtIndex:index];
         CLLocationCoordinate2D coordinate = location.coordinate;

         coordinates[index] = coordinate;
    }

    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [map addOverlay:polyLine];
} 
```

其中“map”是 MKMapView 的一个实例，而 path 是表示已解码的点集的数组。

我以为用这条线`[map addOverlay:polyLine];`会画出来。我在某些页面中看到过这种方法：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.strokeColor = [UIColor redColor];
    polylineView.lineWidth = 1.0;

    return polylineView;
} 
```

polylineView 是地图上实际绘制的内容吗？我还尝试将 MKPolyline（来自上述方法）传递给最后一种方法的“<MKOverlay> 覆盖”参数，但会引发异常。

我想我已经接近了，但我不知道现在该怎么办。

请帮忙！非常感谢您提前。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T09:39:30.410

Done.

Was a very stupid thing, i didn't set the delegate for the MapView. Simply adding [map setDelegate:self]; did the trick.

Thank you anyway!.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T09:34:48.613

只需使用坐标创建 MKPolyline 并将该折线添加到地图视图。

```
MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [map addOverlay:polyLine]; 
```

You will find an tutorial [here](http://navarra.ca/?p=786) on how to draw polyline over some coordinates. **Edit:** The url does not seems valid anymore. You can find the archived version of this url [here](http://web.archive.org/web/20120906022305/http://navarra.ca/?p=786).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:37:49.817

```
MKPolyline *polyline = [MKPolyline polylineWithCoordinates:coordinates count:self.allPins.count];
[self.mapView addOverlay:polyline]; 
```

Check this [http://pinkstone.co.uk/how-to-draw-an-mkpolyline-on-a-map-view/](http://pinkstone.co.uk/how-to-draw-an-mkpolyline-on-a-map-view/) and for swift [http://rshankar.com/how-to-add-mapview-annotation-and-draw-polyline-in-swift/](http://rshankar.com/how-to-add-mapview-annotation-and-draw-polyline-in-swift/)

# c - 求解带状矩阵方程组

> ID：10911535
> 
> 赞同：2
> 
> 时间：2012-06-06T09:29:45.307
> 
> 标签：c, system, lapack, equations, poisson

我需要求解一个二维泊松方程，即 for AX=B 中的方程组，其中 A 是 n×n 矩阵，B 是 n×1 向量。作为 2D Poisson 问题的离散化矩阵，我知道只有 5 个对角线不会为空。Lapack 不提供解决此特定问题的函数，但它具有求解带状矩阵方程组的函数，即 DGBTRF（用于 LU 因式分解）和 DGBTRS。现在，5条对角线是：主对角线，主对角线上方和下方的第一条对角线以及主对角线上方和下方的两条对角线，m对角线wrt。在阅读了有关带存储的 lapack 文档后，我了解到我必须创建一个 (3*m+1)-by-n 矩阵来以带存储格式存储 A，我们将这个矩阵称为 AB。现在的问题：

1) dgbtrs 和 dgbtrs_ 有什么区别？英特尔 MKL 两者都提供，但我不明白为什么

2) dgbtrf 要求带存储矩阵是一个数组。我应该按行还是按列线性化 AB？

3）这是调用这两个函数的正确方法吗？

```
int n, m;
double *AB;
/*... fill n, m, AB, with appropriate numbers */

int *pivots;
int nrows = 3 * m + 1, info, rhs = 1;
dgbtrf_(&n, &n, &m, &m, AB, &nrows, pivots, &info);
char trans = 'N';
dgbtrs_(&trans, &n, &m, &m, &rhs, AB, &nrows, pivots, B, &n, &info); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:45:52.930

1.  它还提供`DGBTRS`和`DGBTRS_`. 这些是您不应该关心的fortran administrativa。只需调用`dgbtrs`（原因是在某些架构上，fortran 例程名称附加了下划线，而在其他情况下则没有，并且名称可能是大写或小写 - 英特尔 MKL`#define`是正确的`dgbtrs`）。

2.  LAPACK 例程需要列主矩阵（即 Fortran 样式）：一个接一个地存储列。您必须使用的带状存储并不难： http: [//www.netlib.org/lapack/lug/node124.html](http://www.netlib.org/lapack/lug/node124.html)。

3.  这对我来说似乎很好，但请事先在小问题上尝试一下（顺便说一句，这总是一个好主意）。还要确保您处理非零`info`（这是报告错误的方式）。

更好的风格是使用`MKL_INT`而不是 plain `int`，这是正确类型的 typedef（在某些架构上可能不同）。

还要确保`pivots`在调用之前分配内存`dgbtrf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T19:56:21.200

这可能是题外话。但是对于泊松方程，基于 FFT 的解决方案要快得多。只需对势场进行 2D FFT，除以 -(k^2+lambda^2) 然后进行 IFFT。lambda 是一个很小的数字，以避免 k=0 的分歧。5 对角方程是泊松方程的带限逼近，它通过有限差分逼近微分算子。

[http://en.wikipedia.org/wiki/Screened_Poisson_equation](http://en.wikipedia.org/wiki/Screened_Poisson_equation)

# javascript - 如何从使用 jquery 添加的项目中删除属性

> ID：10911540
> 
> 赞同：5
> 
> 时间：2012-06-06T09:29:53.907
> 
> 标签：javascript, jquery, html, jsp

我在我的 jsp 页面中使用的以下 jquery 用于向具有 id mytextfield 的文本字段添加自动完成选项。

```
jQuery(function(){
                            $("#mytextfield").autocomplete("popuppages/listall.jsp");
}); 
```

在同一页面中，在某些情况下，我必须从该文本字段中删除此自动完成功能。（根据用户对先前字段和选项的输入，相同的字段必须充当没有自动完成功能的文本字段）

有什么方法可以让我从特定项目中删除这个新添加的“自动完成”属性，即来自 $("#mytextfield").

实际上我想知道的是是否有任何选项可以删除添加的属性

万一有人想引用该自动完成代码，我已将其附在下面..

```
;(function($) {

$.fn.extend({
    autocomplete: function(urlOrData, options) {
        var isUrl = typeof urlOrData == "string";
        options = $.extend({}, $.Autocompleter.defaults, {
            url: isUrl ? urlOrData : null,
            data: isUrl ? null : urlOrData,
            delay: isUrl ? $.Autocompleter.defaults.delay : 10,
            max: options && !options.scroll ? 10 : 150
        }, options);

        // if highlight is set to false, replace it with a do-nothing function
        options.highlight = options.highlight || function(value) { return value; };

        // if the formatMatch option is not specified, then use formatItem for backwards compatibility
        options.formatMatch = options.formatMatch || options.formatItem;

        return this.each(function() {
            new $.Autocompleter(this, options);
        });
    },
    result: function(handler) {
        return this.bind("result", handler);
    },
    search: function(handler) {
        return this.trigger("search", [handler]);
    },
    flushCache: function() {
        return this.trigger("flushCache");
    },
    setOptions: function(options){
        return this.trigger("setOptions", [options]);
    },
    unautocomplete: function() {
        return this.trigger("unautocomplete");
    }
});

$.Autocompleter = function(input, options) {

    var KEY = {
        UP: 38,
        DOWN: 40,
        DEL: 46,
        TAB: 9,
        RETURN: 13,
        ESC: 27,
        COMMA: 188,
        PAGEUP: 33,
        PAGEDOWN: 34,
        BACKSPACE: 8
    };

    // Create $ object for input element
    var $input = $(input).attr("autocomplete", "off").addClass(options.inputClass);

    var timeout;
    var previousValue = "";
    var cache = $.Autocompleter.Cache(options);
    var hasFocus = 0;
    var lastKeyPressCode;
    var config = {
        mouseDownOnSelect: false
    };
    var select = $.Autocompleter.Select(options, input, selectCurrent, config);

    var blockSubmit;

    // prevent form submit in opera when selecting with return key
    $.browser.opera && $(input.form).bind("submit.autocomplete", function() {
        if (blockSubmit) {
            blockSubmit = false;
            return false;
        }
    });

    // only opera doesn't trigger keydown multiple times while pressed, others don't work with keypress at all
    $input.bind(($.browser.opera ? "keypress" : "keydown") + ".autocomplete", function(event) {
        // a keypress means the input has focus
        // avoids issue where input had focus before the autocomplete was applied
        hasFocus = 1;
        // track last key pressed
        lastKeyPressCode = event.keyCode;
        switch(event.keyCode) {

            case KEY.UP:
                event.preventDefault();
                if ( select.visible() ) {
                    select.prev();
                } else {
                    onChange(0, true);
                }
                break;

            case KEY.DOWN:
                event.preventDefault();
                if ( select.visible() ) {
                    select.next();
                } else {
                    onChange(0, true);
                }
                break;

            case KEY.PAGEUP:
                event.preventDefault();
                if ( select.visible() ) {
                    select.pageUp();
                } else {
                    onChange(0, true);
                }
                break;

            case KEY.PAGEDOWN:
                event.preventDefault();
                if ( select.visible() ) {
                    select.pageDown();
                } else {
                    onChange(0, true);
                }
                break;

            // matches also semicolon
            case options.multiple && $.trim(options.multipleSeparator) == "," && KEY.COMMA:
            case KEY.TAB:
            case KEY.RETURN:
                if( selectCurrent() ) {
                    // stop default to prevent a form submit, Opera needs special handling
                    event.preventDefault();
                    blockSubmit = true;
                    return false;
                }
                break;

            case KEY.ESC:
                select.hide();
                break;

            default:
                clearTimeout(timeout);
                timeout = setTimeout(onChange, options.delay);
                break;
        }
    }).focus(function(){
        // track whether the field has focus, we shouldn't process any
        // results if the field no longer has focus
        hasFocus++;
    }).blur(function() {
        hasFocus = 0;
        if (!config.mouseDownOnSelect) {
            hideResults();
        }
    }).click(function() {
        // show select when clicking in a focused field
        if ( hasFocus++ > 1 && !select.visible() ) {
            onChange(0, true);
        }
    }).bind("search", function() {
        // TODO why not just specifying both arguments?
        var fn = (arguments.length > 1) ? arguments[1] : null;
        function findValueCallback(q, data) {
            var result;
            if( data && data.length ) {
                for (var i=0; i < data.length; i++) {
                    if( data[i].result.toLowerCase() == q.toLowerCase() ) {
                        result = data[i];
                        break;
                    }
                }
            }
            if( typeof fn == "function" ) fn(result);
            else $input.trigger("result", result && [result.data, result.value]);
        }
        $.each(trimWords($input.val()), function(i, value) {
            request(value, findValueCallback, findValueCallback);
        });
    }).bind("flushCache", function() {
        cache.flush();
    }).bind("setOptions", function() {
        $.extend(options, arguments[1]);
        // if we've updated the data, repopulate
        if ( "data" in arguments[1] )
            cache.populate();
    }).bind("unautocomplete", function() {
        select.unbind();
        $input.unbind();
        $(input.form).unbind(".autocomplete");
    });

    function selectCurrent() {
        var selected = select.selected();
        if( !selected )
            return false;

        var v = selected.result;
        previousValue = v;

        if ( options.multiple ) {
            var words = trimWords($input.val());
            if ( words.length > 1 ) {
                var seperator = options.multipleSeparator.length;
                var cursorAt = $(input).selection().start;
                var wordAt, progress = 0;
                $.each(words, function(i, word) {
                    progress += word.length;
                    if (cursorAt <= progress) {
                        wordAt = i;
                        return false;
                    }
                    progress += seperator;
                });
                words[wordAt] = v;
                // TODO this should set the cursor to the right position, but it gets overriden somewhere
                //$.Autocompleter.Selection(input, progress + seperator, progress + seperator);
                v = words.join( options.multipleSeparator );
            }
            v += options.multipleSeparator;
        }

        $input.val(v);
        hideResultsNow();
        $input.trigger("result", [selected.data, selected.value]);
        return true;
    }

    function onChange(crap, skipPrevCheck) {
        if( lastKeyPressCode == KEY.DEL ) {
            select.hide();
            return;
        }

        var currentValue = $input.val();

        if ( !skipPrevCheck && currentValue == previousValue )
            return;

        previousValue = currentValue;

        currentValue = lastWord(currentValue);
        if ( currentValue.length >= options.minChars) {
            $input.addClass(options.loadingClass);
            if (!options.matchCase)
                currentValue = currentValue.toLowerCase();
            request(currentValue, receiveData, hideResultsNow);
        } else {
            stopLoading();
            select.hide();
        }
    };

    function trimWords(value) {
        if (!value)
            return [""];
        if (!options.multiple)
            return [$.trim(value)];
        return $.map(value.split(options.multipleSeparator), function(word) {
            return $.trim(value).length ? $.trim(word) : null;
        });
    }

    function lastWord(value) {
        if ( !options.multiple )
            return value;
        var words = trimWords(value);
        if (words.length == 1) 
            return words[0];
        var cursorAt = $(input).selection().start;
        if (cursorAt == value.length) {
            words = trimWords(value)
        } else {
            words = trimWords(value.replace(value.substring(cursorAt), ""));
        }
        return words[words.length - 1];
    }

    // fills in the input box w/the first match (assumed to be the best match)
    // q: the term entered
    // sValue: the first matching result
    function autoFill(q, sValue){
        // autofill in the complete box w/the first match as long as the user hasn't entered in more data
        // if the last user key pressed was backspace, don't autofill
        if( options.autoFill && (lastWord($input.val()).toLowerCase() == q.toLowerCase()) && lastKeyPressCode != KEY.BACKSPACE ) {
            // fill in the value (keep the case the user has typed)
            $input.val($input.val() + sValue.substring(lastWord(previousValue).length));
            // select the portion of the value not typed by the user (so the next character will erase)
            $(input).selection(previousValue.length, previousValue.length + sValue.length);
        }
    };

    function hideResults() {
        clearTimeout(timeout);
        timeout = setTimeout(hideResultsNow, 200);
    };

    function hideResultsNow() {
        var wasVisible = select.visible();
        select.hide();
        clearTimeout(timeout);
        stopLoading();
        if (options.mustMatch) {
            // call search and run callback
            $input.search(
                function (result){
                    // if no value found, clear the input box
                    if( !result ) {
                        if (options.multiple) {
                            var words = trimWords($input.val()).slice(0, -1);
                            $input.val( words.join(options.multipleSeparator) + (words.length ? options.multipleSeparator : "") );
                        }
                        else {
                            $input.val( "" );
                            $input.trigger("result", null);
                        }
                    }
                }
            );
        }
    };

    function receiveData(q, data) {
        if ( data && data.length && hasFocus ) {
            stopLoading();
            select.display(data, q);
            autoFill(q, data[0].value);
            select.show();
        } else {
            hideResultsNow();
        }
    };

    function request(term, success, failure) {
        if (!options.matchCase)
            term = term.toLowerCase();
        var data = cache.load(term);
        // recieve the cached data
        if (data && data.length) {
            success(term, data);
        // if an AJAX url has been supplied, try loading the data now
        } else if( (typeof options.url == "string") && (options.url.length > 0) ){

            var extraParams = {
                timestamp: +new Date()
            };
            $.each(options.extraParams, function(key, param) {
                extraParams[key] = typeof param == "function" ? param() : param;
            });

            $.ajax({
                // try to leverage ajaxQueue plugin to abort previous requests
                mode: "abort",
                // limit abortion to this input
                port: "autocomplete" + input.name,
                dataType: options.dataType,
                url: options.url,
                data: $.extend({
                    q: lastWord(term),
                    limit: options.max
                }, extraParams),
                success: function(data) {
                    var parsed = options.parse && options.parse(data) || parse(data);
                    cache.add(term, parsed);
                    success(term, parsed);
                }
            });
        } else {
            // if we have a failure, we need to empty the list -- this prevents the the [TAB] key from selecting the last successful match
            select.emptyList();
            failure(term);
        }
    };

    function parse(data) {
        var parsed = [];
        var rows = data.split("\n");
        for (var i=0; i < rows.length; i++) {
            var row = $.trim(rows[i]);
            if (row) {
                row = row.split("|");
                parsed[parsed.length] = {
                    data: row,
                    value: row[0],
                    result: options.formatResult && options.formatResult(row, row[0]) || row[0]
                };
            }
        }
        return parsed;
    };

    function stopLoading() {
        $input.removeClass(options.loadingClass);
    };

};

$.Autocompleter.defaults = {
    inputClass: "ac_input",
    resultsClass: "ac_results",
    loadingClass: "ac_loading",
    minChars: 1,
    delay: 400,
    matchCase: false,
    matchSubset: true,
    matchContains: false,
    cacheLength: 10,
    max: 100,
    mustMatch: false,
    extraParams: {},
    selectFirst: true,
    formatItem: function(row) { return row[0]; },
    formatMatch: null,
    autoFill: false,
    width: 0,
    multiple: false,
    multipleSeparator: ", ",
    highlight: function(value, term) {
        return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi, "\\$1") + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");
    },
    scroll: true,
    scrollHeight: 180
};

$.Autocompleter.Cache = function(options) {

    var data = {};
    var length = 0;

    function matchSubset(s, sub) {
        if (!options.matchCase) 
            s = s.toLowerCase();
        var i = s.indexOf(sub);
        if (options.matchContains == "word"){
            i = s.toLowerCase().search("\\b" + sub.toLowerCase());
        }
        if (i == -1) return false;
        return i == 0 || options.matchContains;
    };

    function add(q, value) {
        if (length > options.cacheLength){
            flush();
        }
        if (!data[q]){ 
            length++;
        }
        data[q] = value;
    }

    function populate(){
        if( !options.data ) return false;
        // track the matches
        var stMatchSets = {},
            nullData = 0;

        // no url was specified, we need to adjust the cache length to make sure it fits the local data store
        if( !options.url ) options.cacheLength = 1;

        // track all options for minChars = 0
        stMatchSets[""] = [];

        // loop through the array and create a lookup structure
        for ( var i = 0, ol = options.data.length; i < ol; i++ ) {
            var rawValue = options.data[i];
            // if rawValue is a string, make an array otherwise just reference the array
            rawValue = (typeof rawValue == "string") ? [rawValue] : rawValue;

            var value = options.formatMatch(rawValue, i+1, options.data.length);
            if ( value === false )
                continue;

            var firstChar = value.charAt(0).toLowerCase();
            // if no lookup array for this character exists, look it up now
            if( !stMatchSets[firstChar] ) 
                stMatchSets[firstChar] = [];

            // if the match is a string
            var row = {
                value: value,
                data: rawValue,
                result: options.formatResult && options.formatResult(rawValue) || value
            };

            // push the current match into the set list
            stMatchSets[firstChar].push(row);

            // keep track of minChars zero items
            if ( nullData++ < options.max ) {
                stMatchSets[""].push(row);
            }
        };

        // add the data items to the cache
        $.each(stMatchSets, function(i, value) {
            // increase the cache size
            options.cacheLength++;
            // add to the cache
            add(i, value);
        });
    }

    // populate any existing data
    setTimeout(populate, 25);

    function flush(){
        data = {};
        length = 0;
    }

    return {
        flush: flush,
        add: add,
        populate: populate,
        load: function(q) {
            if (!options.cacheLength || !length)
                return null;
            /* 
             * if dealing w/local data and matchContains than we must make sure
             * to loop through all the data collections looking for matches
             */
            if( !options.url && options.matchContains ){
                // track all matches
                var csub = [];
                // loop through all the data grids for matches
                for( var k in data ){
                    // don't search through the stMatchSets[""] (minChars: 0) cache
                    // this prevents duplicates
                    if( k.length > 0 ){
                        var c = data[k];
                        $.each(c, function(i, x) {
                            // if we've got a match, add it to the array
                            if (matchSubset(x.value, q)) {
                                csub.push(x);
                            }
                        });
                    }
                }               
                return csub;
            } else 
            // if the exact item exists, use it
            if (data[q]){
                return data[q];
            } else
            if (options.matchSubset) {
                for (var i = q.length - 1; i >= options.minChars; i--) {
                    var c = data[q.substr(0, i)];
                    if (c) {
                        var csub = [];
                        $.each(c, function(i, x) {
                            if (matchSubset(x.value, q)) {
                                csub[csub.length] = x;
                            }
                        });
                        return csub;
                    }
                }
            }
            return null;
        }
    };
};

$.Autocompleter.Select = function (options, input, select, config) {
    var CLASSES = {
        ACTIVE: "ac_over"
    };

    var listItems,
        active = -1,
        data,
        term = "",
        needsInit = true,
        element,
        list;

    // Create results
    function init() {
        if (!needsInit)
            return;
        element = $("<div/>")
        .hide()
        .addClass(options.resultsClass)
        .css("position", "absolute")
        .appendTo(document.body);

        list = $("<ul/>").appendTo(element).mouseover( function(event) {
            if(target(event).nodeName && target(event).nodeName.toUpperCase() == 'LI') {
                active = $("li", list).removeClass(CLASSES.ACTIVE).index(target(event));
                $(target(event)).addClass(CLASSES.ACTIVE);            
            }
        }).click(function(event) {
            $(target(event)).addClass(CLASSES.ACTIVE);
            select();
            // TODO provide option to avoid setting focus again after selection? useful for cleanup-on-focus
            input.focus();
            return false;
        }).mousedown(function() {
            config.mouseDownOnSelect = true;
        }).mouseup(function() {
            config.mouseDownOnSelect = false;
        });

        if( options.width > 0 )
            element.css("width", options.width);

        needsInit = false;
    } 

    function target(event) {
        var element = event.target;
        while(element && element.tagName != "LI")
            element = element.parentNode;
        // more fun with IE, sometimes event.target is empty, just ignore it then
        if(!element)
            return [];
        return element;
    }

    function moveSelect(step) {
        listItems.slice(active, active + 1).removeClass(CLASSES.ACTIVE);
        movePosition(step);
        var activeItem = listItems.slice(active, active + 1).addClass(CLASSES.ACTIVE);
        if(options.scroll) {
            var offset = 0;
            listItems.slice(0, active).each(function() {
                offset += this.offsetHeight;
            });
            if((offset + activeItem[0].offsetHeight - list.scrollTop()) > list[0].clientHeight) {
                list.scrollTop(offset + activeItem[0].offsetHeight - list.innerHeight());
            } else if(offset < list.scrollTop()) {
                list.scrollTop(offset);
            }
        }
    };

    function movePosition(step) {
        active += step;
        if (active < 0) {
            active = listItems.size() - 1;
        } else if (active >= listItems.size()) {
            active = 0;
        }
    }

    function limitNumberOfItems(available) {
        return options.max && options.max < available
            ? options.max
            : available;
    }

    function fillList() {
        list.empty();
        var max = limitNumberOfItems(data.length);
        for (var i=0; i < max; i++) {
            if (!data[i])
                continue;
            var formatted = options.formatItem(data[i].data, i+1, max, data[i].value, term);
            if ( formatted === false )
                continue;
            var li = $("<li/>").html( options.highlight(formatted, term) ).addClass(i%2 == 0 ? "ac_even" : "ac_odd").appendTo(list)[0];
            $.data(li, "ac_data", data[i]);
        }
        listItems = list.find("li");
        if ( options.selectFirst ) {
            listItems.slice(0, 1).addClass(CLASSES.ACTIVE);
            active = 0;
        }
        // apply bgiframe if available
        if ( $.fn.bgiframe )
            list.bgiframe();
    }

    return {
        display: function(d, q) {
            init();
            data = d;
            term = q;
            fillList();
        },
        next: function() {
            moveSelect(1);
        },
        prev: function() {
            moveSelect(-1);
        },
        pageUp: function() {
            if (active != 0 && active - 8 < 0) {
                moveSelect( -active );
            } else {
                moveSelect(-8);
            }
        },
        pageDown: function() {
            if (active != listItems.size() - 1 && active + 8 > listItems.size()) {
                moveSelect( listItems.size() - 1 - active );
            } else {
                moveSelect(8);
            }
        },
        hide: function() {
            element && element.hide();
            listItems && listItems.removeClass(CLASSES.ACTIVE);
            active = -1;
        },
        visible : function() {
            return element && element.is(":visible");
        },
        current: function() {
            return this.visible() && (listItems.filter("." + CLASSES.ACTIVE)[0] || options.selectFirst && listItems[0]);
        },
        show: function() {
            var offset = $(input).offset();
            element.css({
                width: typeof options.width == "string" || options.width > 0 ? options.width : $(input).width(),
                top: offset.top + input.offsetHeight,
                left: offset.left
            }).show();
            if(options.scroll) {
                list.scrollTop(0);
                list.css({
                    maxHeight: options.scrollHeight,
                    overflow: 'auto'
                });

                if($.browser.msie && typeof document.body.style.maxHeight === "undefined") {
                    var listHeight = 0;
                    listItems.each(function() {
                        listHeight += this.offsetHeight;
                    });
                    var scrollbarsVisible = listHeight > options.scrollHeight;
                    list.css('height', scrollbarsVisible ? options.scrollHeight : listHeight );
                    if (!scrollbarsVisible) {
                        // IE doesn't recalculate width when scrollbar disappears
                        listItems.width( list.width() - parseInt(listItems.css("padding-left")) - parseInt(listItems.css("padding-right")) );
                    }
                }

            }
        },
        selected: function() {
            var selected = listItems && listItems.filter("." + CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);
            return selected && selected.length && $.data(selected[0], "ac_data");
        },
        emptyList: function (){
            list && list.empty();
        },
        unbind: function() {
            element && element.remove();
        }
    };
};

$.fn.selection = function(start, end) {
    if (start !== undefined) {
        return this.each(function() {
            if( this.createTextRange ){
                var selRange = this.createTextRange();
                if (end === undefined || start == end) {
                    selRange.move("character", start);
                    selRange.select();
                } else {
                    selRange.collapse(true);
                    selRange.moveStart("character", start);
                    selRange.moveEnd("character", end);
                    selRange.select();
                }
            } else if( this.setSelectionRange ){
                this.setSelectionRange(start, end);
            } else if( this.selectionStart ){
                this.selectionStart = start;
                this.selectionEnd = end;
            }
        });
    }
    var field = this[0];
    if ( field.createTextRange ) {
        var range = document.selection.createRange(),
            orig = field.value,
            teststring = "<->",
            textLength = range.text.length;
        range.text = teststring;
        var caretAt = field.value.indexOf(teststring);
        field.value = orig;
        this.selection(caretAt, caretAt + textLength);
        return {
            start: caretAt,
            end: caretAt + textLength
        }
    } else if( field.selectionStart !== undefined ){
        return {
            start: field.selectionStart,
            end: field.selectionEnd
        }
    }
};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:34:44.120

看起来您正在寻找`destroy`或`disable`自动完成的方法..

检查文档...

[破坏](http://jqueryui.com/demos/autocomplete/#method-destroy)

[禁用](http://jqueryui.com/demos/autocomplete/#method-disable)

```
$("#mytextfield").autocomplete( "destroy" )
$("#mytextfield").autocomplete( "disable" ) 
```

不同之处在于销毁后您无法重新启用它...但是通过使用禁用后`enable`您可以重新启用它..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T09:31:49.727

您可以使用`.removeAttr()`

```
$(target).removeAttr('propertyName'); 
```

这将完全删除该属性。

但是，如果您想更改任何属性，请使用[`.prop()`](http://api.jquery.com/prop)或[`.attr()`](http://api.jquery.com/attr)

# ruby-on-rails - （对象不支持#inspect）卡在控制台

> ID：10911547
> 
> 赞同：1
> 
> 时间：2012-06-06T09:30:12.143
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, associations, model-associations

我有三个模型，分别是 Page、AdminUser 和 Section：

```
class Page < ActiveRecord::Base
  attr_accessible :name, :position, :permalink
  belongs_to :subject
  has_many :sections
  has_and_belongs_to_many :editors, :class_name => "AdminUser"
end

class AdminUser < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :username
  has_and_belongs_to_many :pages
  scope :named, lamda {|first,last| where(:first_name => first, :last_name => last)}
end

class Section < ActiveRecord::Base
  belongs_to :page
end 
```

对于页面、用户和部分的这些迁移：

```
class CreatePages < ActiveRecord::Migration
  def change
    create_table :pages do |t|
      t.references :subject
      t.string "name"
      t.string "permalink"
      t.integer "position"
      t.boolean "visible", :default => false
      t.timestamps

   end

          puts "*** About to add an index ***"
      add_index("pages", "subject_id")
      add_index("pages", "permalink")
  end
end

class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string "first_name", :limit => 25
      t.string "last_name", :limit => 50
      t.string "email", :default => "" , :null => false
      t.string "password", :limit => 40
      t.timestamps
    end
  end
end

class CreateSections < ActiveRecord::Migration
  def change
    create_table :sections do |t|
      t.string "name"
      t.integer "position"
      t.boolean "visible", :default => false
      t.string "content_type"
      t.text "content"
      t.timestamps

    end
     puts "*** About to add an index ***"
      add_index("sections", "name")
  end
end 
```

在尝试使用 rails 控制台为 AdminUser 创建新用户的过程中，我得到这个 Object does not support #inspect 错误：

```
1.9.3p125 :001 > page = Page.find(1)
  Page Load (0.7ms)  SELECT `pages`.* FROM `pages` WHERE `pages`.`id` = 1 LIMIT 1
 => #<Page id: 1, subject_id: 1, name: "First Page", permalink: "first", position: 1, visible: false, created_at: "2012-06-01 15:14:50", updated_at: "2012-06-01 15:14:50"> 
1.9.3p125 :002 > page.editors
(Object doesn't support #inspect)
 => 
```

**编辑**在控制台中执行 page.editors 会引发此错误：

```
1.9.3p125 :003 > page.editors
ArgumentError: Unknown key: inverse_of
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/core_ext/hash/keys.rb:44:in `block in assert_valid_keys'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/core_ext/hash/keys.rb:43:in `each_key'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/core_ext/hash/keys.rb:43:in `assert_valid_keys'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/builder/association.rb:33:in `validate_options'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/builder/association.rb:24:in `build'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/builder/collection_association.rb:23:in `build'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/autosave_association.rb:139:in `build'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/builder/has_and_belongs_to_many.rb:8:in `build'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/builder/collection_association.rb:13:in `build'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations.rb:1600:in `has_and_belongs_to_many'
from /Users/aditya/simple_cms/app/models/admin_user.rb:4:in `<class:AdminUser>'
from /Users/aditya/simple_cms/app/models/admin_user.rb:1:in `<top (required)>'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:469:in `load'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
... 12 levels...
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:554:in `get'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:588:in `constantize'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/inheritance.rb:111:in `block in compute_type'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/inheritance.rb:109:in `each'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/inheritance.rb:109:in `compute_type'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/reflection.rb:172:in `klass'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/association.rb:117:in `klass'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/association.rb:165:in `find_target?'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/collection_association.rb:332:in `load_target'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/collection_proxy.rb:44:in `load_target'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/activerecord-3.2.3/lib/active_record/associations/collection_proxy.rb:87:in `method_missing'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
from /Users/aditya/.rvm/gems/ruby-1.9.3-p125@global/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require' 
```

我被困在这里。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:46:11.440

在您的 AdminUser 模型中尝试此`has_and_belongs_to_many :pages, :inverse_of => :editors`操作，我认为这应该是问题所在。

# java - 在推土机中映射到设置映射解决方法

> ID：10911550
> 
> 赞同：1
> 
> 时间：2012-06-06T09:30:16.420
> 
> 标签：java, dozer

我正在尝试将地图转换为推土机中的集合，并且我想避免不惜一切代价编写自定义转换器。无论如何我可以使用配置文件中的 get-method 属性从集合中获取值的集合（丢失键值不是问题）并让 Dozer 从中转换？

这是我到目前为止所得到的，这是行不通的

```
<field>
<a is-accessible="true" get-method="values">sourceMap</a>
<b>targetSet</b>
<a-hint>Destination</a-hint>
<b-hint>OtherDestination</b-hint>
</field> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:52:08.957

不，您必须使用自定义转换器。

[这](http://dozer.sourceforge.net/documentation/collectionandarraymapping.html)显示了如何映射集合。您可以将映射中的特定条目映射到非集合变量，如此[处所述](http://dozer.sourceforge.net/documentation/mapbackedproperty.html)

# ruby-on-rails-3 - 从 rails 非 ascii 字符显示执行 ebook-convert ?? 在元

> ID：10911552
> 
> 赞同：1
> 
> 时间：2012-06-06T09:30:18.207
> 
> 标签：ruby-on-rails-3, utf-8, system

我想使用 ebook-convert 将 html 文件转换为 epub。我通过参数提供书籍元数据，但显示非 ASCII 字符？？在书中元。我使用系统：

res = 系统 cmd_line

其中 cmd_line 是要执行的字符串

当我从命令行执行相同的命令时，它可以完美运行。

我使用 Ruby 1.8.7 和 Rails 3.0.13

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T16:19:54.540

我在这里聚会迟到了，但昨天来寻找一个密切相关的问题的解决方案，所以刚刚提出了这个问题。

一个可能的解释可以在 not-obviously-applicable 中找到：
[Executing ebook-convert from rails non-ascii characters display ?? 在 meta](https://stackoverflow.com/questions/10911552/executing-ebook-convert-from-rails-non-ascii-characters-display-in-meta)
中，我添加了自己对潜在解决方法的看法。

# java - 如何将智能感知添加到 java swing 中的搜索行

> ID：10911554
> 
> 赞同：1
> 
> 时间：2012-06-06T09:30:27.120
> 
> 标签：java, xml, swing, awt, intellisense

这是我第一次使用**智能感知**，所以请放轻松:)

我正在使用 Java swing 构建用于查看`XML`文件的搜索引擎。

目前 XML 文件已成功上传和搜索，但我仍然

想将`intellisense`元素添加到项目中。

由于代码很大，很难具体，那我会尽力做到

尽可能具体。

这是 XML 搜索引擎的可视化图片： ![在此处输入图像描述](../Images/619cc8f6f751231fff71c03cfd633f93.png)

现在，用户上传文件后（使用**左侧**`XML`的打开按钮）

 **他在 **current path:* 框中输入查询。查询的每个部分都通过 分隔`/`，因此我想要在用户点击时向用户提供我的选项`/`，它们是：

```
String[] axesTypes = {"child::", "attribute::", "descendant::",
                                        "descendant-or-self::", "slef::", "parent::",
                                        "following-sibling::", "preceding-sibling::",
                                        "ancestor-or-self::", "ancestor::", "following::",
                                        "preceding::" ,"preceding::", "namespace::", "node()"}; 
```

如果有人能解释如何将该元素添加到我的项目中，我将不胜感激。

如果您需要我发布代码 - 请说出来，我会的。

问候**

# html - 在表格的行之间插入 html 标签

> ID：10911558
> 
> 赞同：2
> 
> 时间：2012-06-06T09:30:45.810
> 
> 标签：html

我可以在表格行之间插入任何 html 标记，以便插入的标记用作该标记之后行的父节点。喜欢

```
<table>
  <tr><td>group 1</td></tr>
  //insert tag here
     <tr><td>patent 1 in group 1</td></tr>
     <tr><td>patent 2 in group 1</td></tr>
  //end tag here
</table> 
```

我希望插入的标签成为其余行的父节点。或者是否可以将第一行作为其余行的父节点

编辑：我真正想要实现的目标

我想创建一个包含多行的表，其中一行将是组名，它将作为父行，该行将包含子行，我应该能够将行从一个组拖放到另一个组目前能够使用 TableDnd 插件，但我需要子行被拖动到的父行的 id。

如果我做这样的事情

```
<table id="sort">
    <tbody id = 'group_1'>
    <tr id="1"><td>1</td><td>One</td><td><input type="text" name="one" value="one"/></td></tr>
    <tr id="2"><td>2</td><td>Two</td><td><input type="text" name="two" value="two"/></td></tr>
    <tr id="3"><td>3</td><td>Three</td><td><input type="text" name="three" value="three"/></td></tr>
    </tbody>
    <tbody id = 'group_2'>
    <tr id="4"><td>4</td><td>Four</td><td><input type="text" name="four" value="four"/></td></tr>
    <tr id="5"><td>5</td><td>Five</td><td><input type="text" name="five" value="five"/></td></tr>
    <tr id="6"><td>6</td><td>Six</td><td><input type="text" name="six" value="six"/></td></tr>
    </tbody>
</table> 
```

我可以在一个 tbody 中拖动行，但不能从一个`tbody`到另一个。我怎样才能得到任何其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:36:44.147

对表格行进行分组的唯一有效方法是`thead`、`tbody`和`tfoot`元素。对数据行进行分组的常规方法是`tbody`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:41:44.083

使用 css 类对行进行分组：

```
<table>
     <tr class="group-1"><td>patent 1 in group 1</td></tr>
     <tr class="group-1"><td>patent 2 in group 1</td></tr>
     <tr class="group-2"><td>patent 1 in group 2</td></tr>
     <tr class="group-2"><td>patent 2 in group 2</td></tr>
     <!-- etc -->
</table> 
```

或多个`TBODY`部分：

```
<table>
    <tbody class="group-1">
       <tr><td>patent 1 in group 1</td></tr>
       <tr><td>patent 2 in group 1</td></tr>
    </tbody>
    <tbody class="group-2">
       <tr><td>patent 1 in group 2</td></tr>
       <tr><td>patent 2 in group 2</td></tr>
    </tbody>
    <!-- etc -->
</table> 
```

# forms - Kentico CMS：表单验证 - 至少回答了一个输入

> ID：10911562
> 
> 赞同：2
> 
> 时间：2012-06-06T09:31:05.513
> 
> 标签：forms, validation, content-management-system, kentico

我在 Kentico CMS 网站上有一个简单的反馈表。

有两个输入和一个提交按钮。其中一个输入是是/否单选按钮选择，另一个是文本区域输入。（请看截图）。

我希望用户只有在满足以下三个条件之一时才能提交表单：

1.  '此页面有用吗？' 被回答了。
2.  文本区域值不是空白，并且该值不等于默认文本值“我们如何改进此页面？提供反馈有助于我们改进这些信息'
3.  或者，满足 1 和 2 中的两个条件。

**基本上，我希望他们至少**回答一个输入。

**是否可以使用 Kentico 表单/在线表单 Web 部件进行此类验证？**

**表格截图（可能有用）：** ![在此处输入图像描述](../Images/25f773f501547bd320225fd485cf5941.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:09:46.693

我就这个功能联系了 Kentico，他们的回复如下：

> 遗憾的是，没有提供这种类型的验证。Kentico CMS 分别对每个内置控件执行验证。
> 
> 一般来说，您有两种选择。第一个是实现 **OnBeforeValidate**或**OnAfterValidate**事件，这使您能够在必要时执行自定义验证。您可以按如下方式访问每个字段：
> 
> `string answerText = ValidationHelper.GetString(viewBiz.BasicForm.Data.GetValue("answerText"), "");`
> 
> 如果验证失败，则需要将**BizForm**控件的 **StopProcessing**设置为 true：
> 
> `viewBiz.StopProcessing = true;`
> 
> 有关与 BizForm 相关的定制可能性的更多信息，请参见此处： [http ://devnet.kentico.com/docs/devguide/index.html?api_bizforms_customization_possibilities.htm](http://devnet.kentico.com/docs/devguide/index.html?api_bizforms_customization_possibilities.htm)
> 
> 另一种方法是创建自定义表单控件，正如文档中所述：http: [//devnet.kentico.com/docs/devguide/developing_form_controls.htm](http://devnet.kentico.com/docs/devguide/developing_form_controls.htm)
> 
> 表单控件将允许用户指定两个字段，因此您可以根据您的要求执行自定义验证（ **IsValid方法）。**
> 
> 要设置使用for控件的字段以外的字段，需要实现**GetOtherValues**方法。
> 
> 然后，只需禁用另一个字段，使其不会在表单上显示两次。

# android - Android：动态自定义复选框的样式

> ID：10911563
> 
> 赞同：0
> 
> 时间：2012-06-06T09:31:10.313
> 
> 标签：android, checkbox, runtime, customization

我有几个复选框，我想使用我自己的选中/未选中图标 (png)。

这些复选框是在运行时动态创建的。如何在 java 源代码中添加我的图标？

谢谢你的帮助 ：）

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:37:36.587

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#555555" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/options"
        android:textSize="10pt"
        android:typeface="serif"
        android:textStyle="bold"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        />

    <CheckBox
        android:id="@+id/blue_switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:typeface="serif"
        android:textStyle="bold"

        android:text="@string/bluetooth"   
        />

    <CheckBox
        android:id="@+id/wifi_switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:typeface="serif"
        android:textStyle="bold"

        android:text="@string/wifi"       
        />

    <CheckBox
        android:id="@+id/silent_switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/silent"
        android:typeface="serif"
        android:textStyle="bold"       
        android:button="@drawable/box"/>   

    <CheckBox
        android:id="@+id/general_switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/general"
        android:typeface="serif"
        android:textStyle="bold"       
        android:button="@drawable/box"/>

     <CheckBox
        android:id="@+id/mobile_data_switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/mobile_data"
        android:typeface="serif"
        android:textStyle="bold"       
        android:paddingLeft="80dp"       
        android:button="@drawable/switchbox"/>

    <CheckBox
        android:id="@+id/power_switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/power_saver_mode"
        android:typeface="serif"
        android:textStyle="bold"       
        android:paddingLeft="80dp"
        android:button="@drawable/switchbox"/>

</LinearLayout> 
```

活动类：

```
package com.vimal.android.CustomCheckBox;

import android.app.Activity;
import android.os.Bundle;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.Toast;
import android.widget.CompoundButton.OnCheckedChangeListener;

public class CustomCheckBoxActivity extends Activity {
    private CheckBox blueSwitch;
    private CheckBox wifiSwitch;
    private CheckBox silentSwitch;
    private CheckBox generalSwitch;
    private CheckBox mobileDataSwitch;
    private CheckBox powerSwitch;
    String msg="";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        blueSwitch=(CheckBox) findViewById(R.id.blue_switch);
        wifiSwitch=(CheckBox) findViewById(R.id.wifi_switch);
        silentSwitch=(CheckBox) findViewById(R.id.silent_switch);
        generalSwitch=(CheckBox) findViewById(R.id.general_switch);
        mobileDataSwitch=(CheckBox) findViewById(R.id.mobile_data_switch);
        powerSwitch=(CheckBox) findViewById(R.id.power_switch);

        setListener();
    }

    private void setListener() {

            blueSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        msg="BlueTooth is Switched OFF";
                        if(isChecked){
                            msg="BlueTooth is Switched ON";
                        }

                        Toast.makeText(CustomCheckBoxActivity.this, msg ,Toast.LENGTH_SHORT).show();                        
                }
            });

            wifiSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        msg="Wifi is Switched OFF";
                        if(isChecked){
                            msg="Wifi is Switched ON";
                        }

                        Toast.makeText(CustomCheckBoxActivity.this, msg ,Toast.LENGTH_SHORT).show();                        
                }
            });

            silentSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        msg="Silent Mode is Switched OFF";
                        if(isChecked){
                            msg="Silent Mode is Switched ON";
                        }

                        Toast.makeText(CustomCheckBoxActivity.this, msg ,Toast.LENGTH_SHORT).show();                        
                }
            });

            generalSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        msg="General Mode is Switched OFF";
                        if(isChecked){
                            msg="General Mode is Switched ON";
                        }

                        Toast.makeText(CustomCheckBoxActivity.this, msg ,Toast.LENGTH_SHORT).show();                        
                }
            });

            mobileDataSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        msg="Mobile Data is Switched OFF";
                        if(isChecked){
                            msg="Mobile Data is Switched ON";
                        }

                        Toast.makeText(CustomCheckBoxActivity.this, msg ,Toast.LENGTH_SHORT).show();                    
                }
            });

            powerSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        msg="PowerSaver Mode is Switched OFF";
                        if(isChecked){
                            msg="PowerSaver Mode is Switched ON";
                        }

                        Toast.makeText(CustomCheckBoxActivity.this, msg ,Toast.LENGTH_SHORT).show();

                }
            });      

    }
} 
```

# javascript - 如何在不使用javascript中的activex的情况下从客户端获取文件大小？

> ID：10911566
> 
> 赞同：6
> 
> 时间：2012-06-06T09:31:17.403
> 
> 标签：javascript, internet-explorer, file-upload

有没有其他方法可以在不使用`ActiveX`in的情况下在客户端获取文件大小`IE`？

我从客户端获取文件大小，但是 IE 会打开 ActiveX 控件的安全通知弹出窗口。有没有其他方法可以获取文件大小或隐藏 ActiveX 弹出窗口？

这是在客户端获取文件大小的代码。

```
<html>
<body>
<form id="file">
<input type="file" id="loadfile" />
<input type="button" value="Image Size" onclick="testSize()" />
</form>
<script type="text/javascript">

function testSize(){
    var browserInfo = navigator.userAgent.toLowerCase();

    if(browserInfo.indexOf("msie") > -1){
        /* IE */
        var filepath = document.getElementById('loadfile').value;
        alert(filepath + " Test ");
        var myFSO = new ActiveXObject("Scripting.FileSystemObject");
        var thefile = myFSO.getFile(filepath);
        var imgbytes = thefile.size;
        alert( "name " +  thefile.name + "Size " +  thefile.size );
    }else{
        /* Other */
        var file = document.getElementById('loadfile').files[0];
        alert( "name " +  file.name + "Size " +  file.size );
    }
}
</script>
</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:46:16.293

我得到了解决方案。

代码没有真正的问题，问题在于 Internet Explorer 浏览器安全设置。通常，当您要在远程服务器上打开文本文件或某些 excel 文件时，您会遇到此类错误

转到 internetoptions < security < customlevel < 初始化和脚本活动 x 控件未标记为安全的脚本并将它们标记为启用，我认为您的问题将被删除

谢谢。

# ios - 使用AVFoundation播放视频，视频播放但没有声音

> ID：10911575
> 
> 赞同：2
> 
> 时间：2012-06-06T09:32:04.087
> 
> 标签：ios, objective-c, video, avfoundation, playback

我正在尝试构建一个应用程序，该应用程序将使用 AVFoundation 类更改视频的组成，但希望能够先播放视频。我已经编写了一些代码来做到这一点，但是当我播放视频时声音不起作用。
我尝试使用 Apple 示例代码来执行此操作。
下面是我的代码：

```
 -(void)loadAssets
 {
NSArray *requestedKeys = [NSArray arrayWithObjects:kTracksKey, kPlayableKey, nil];
/* Tells the asset to load the values of any of the specified keys that are not already loaded. */
[asset loadValuesAsynchronouslyForKeys:requestedKeys completionHandler:
 ^{      
     dispatch_async( dispatch_get_main_queue(), 
                    ^{
                        /* IMPORTANT: Must dispatch to main queue in order to operate on the AVPlayer and AVPlayerItem. */
                        [self prepareToPlayAsset:asset withKeys:requestedKeys];
                    });
 }];
}

- (void)prepareToPlayAsset:(AVURLAsset *)assetURL withKeys:(NSArray *)requestedKeys
{
/* Make sure that the value of each key has loaded successfully. */
for (NSString *thisKey in requestedKeys)
{
    NSError *error = nil;
    AVKeyValueStatus keyStatus = [assetURL statusOfValueForKey:thisKey error:&error];
    if (keyStatus == AVKeyValueStatusFailed)
    {
        [self assetFailedToPrepareForPlayback:error];
        return;
    }
}

/* Use the AVAsset playable property to detect whether the asset can be played. */
if (!assetURL.playable) 
{
    /* Generate an error describing the failure. */
    NSString *localizedDescription = NSLocalizedString(@"Item cannot be played", @"Item cannot be played description");
    NSString *localizedFailureReason = NSLocalizedString(@"The assets tracks were loaded, but could not be made playable.", @"Item cannot be played failure reason");
    NSDictionary *errorDict = [NSDictionary dictionaryWithObjectsAndKeys:
                               localizedDescription, NSLocalizedDescriptionKey, 
                               localizedFailureReason, NSLocalizedFailureReasonErrorKey, 
                               nil];
    NSError *assetCannotBePlayedError = [NSError errorWithDomain:@"StitchedStreamPlayer" code:0 userInfo:errorDict];

    /* Display the error to the user. */
    [self assetFailedToPrepareForPlayback:assetCannotBePlayedError];

    return;
}

/* At this point we're ready to set up for playback of the asset. */

/* Stop observing our prior AVPlayerItem, if we have one. */
if (self.playerItem)
{
    /* Remove existing player item key value observers and notifications. */

    [self.playerItem removeObserver:self forKeyPath:kStatusKey];            

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:AVPlayerItemDidPlayToEndTimeNotification
                                                  object:self.playerItem];
}

/* Create a new instance of AVPlayerItem from the now successfully loaded AVAsset. */
self.playerItem = [AVPlayerItem playerItemWithAsset:asset];

/* Observe the player item "status" key to determine when it is ready to play. */
[self.playerItem addObserver:self 
                   forKeyPath:kStatusKey 
                      options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew
                      context:VideoPlaybackViewControllerStatusObservationContext];

/* When the player item has played to its end time we'll toggle
 the movie controller Pause button to be the Play button */
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(playerItemDidReachEnd:)
                                             name:AVPlayerItemDidPlayToEndTimeNotification
                                           object:self.playerItem];

seekToZeroBeforePlay = NO;

/* Create new player, if we don't already have one. */
if (![self player])
{
    /* Get a new AVPlayer initialized to play the specified player item. */
    self.player=[AVPlayer playerWithPlayerItem:self.playerItem];    
    [self.playerView setPlayer:self.player];

    // Observe the AVPlayer "currentItem" property to find out when any 
     //AVPlayer replaceCurrentItemWithPlayerItem: replacement will/did 
     //occur.
    [self.player addObserver:self 
                  forKeyPath:kCurrentItemKey 
                     options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew
                     context:VideoPlaybackViewControllerCurrentItemObservationContext];

}

// Make our new AVPlayerItem the AVPlayer's current item. 
if (self.player.currentItem != self.playerItem)
{
    // Replace the player item with a new player item. The item replacement occurs 
     //asynchronously; observe the currentItem property to find out when the 
     //replacement will/did occur
    [[self player] replaceCurrentItemWithPlayerItem:self.playerItem];

    [self syncUI];
}

 }

 - (void)observeValueForKeyPath:(NSString*) path 
                  ofObject:(id)object 
                    change:(NSDictionary*)change 
                   context:(void*)context
  {
/* AVPlayerItem "status" property value observer. */
if (context == VideoPlaybackViewControllerStatusObservationContext)
{
    [self syncUI];

    AVPlayerStatus status = [[change objectForKey:NSKeyValueChangeNewKey] integerValue];
    switch (status)
    {
            /* Indicates that the status of the player is not yet known because 
             it has not tried to load new media resources for playback */
        case AVPlayerStatusUnknown:
        {
           [self disablePlayerButtons];

        }
            break;

        case AVPlayerStatusReadyToPlay:
        {
            /* Once the AVPlayerItem becomes ready to play, i.e. 
             [playerItem status] == AVPlayerItemStatusReadyToPlay,
             its duration can be fetched from the item. */

            //[self initScrubberTimer];

            //[self enableScrubber];
            [self enablePlayerButtons];

        }
            break;

        case AVPlayerStatusFailed:
        {
            AVPlayerItem *playerItem = (AVPlayerItem *)object;
            [self assetFailedToPrepareForPlayback:playerItem.error];
        }
            break;
    }
}
/* AVPlayer "currentItem" property observer. 
 Called when the AVPlayer replaceCurrentItemWithPlayerItem: 
 replacement will/did occur. */
else if (context == VideoPlaybackViewControllerCurrentItemObservationContext)
{
    AVPlayerItem *newPlayerItem = [change objectForKey:NSKeyValueChangeNewKey];

    /* Is the new player item null? */
    if (newPlayerItem == (id)[NSNull null])
    {
        [self disablePlayerButtons];
        //[self disableScrubber];
    }
    else /* Replacement of player currentItem has occurred */
    {
        /* Set the AVPlayer for which the player layer displays visual output. */
        [self.playerView setPlayer:self.player];

        //[self setViewDisplayName];

        /* Specifies that the player should preserve the video’s aspect ratio and 
         fit the video within the layer’s bounds. */
        //[mPlaybackView setVideoFillMode:AVLayerVideoGravityResizeAspect];

        [self syncUI];
    }
}
else
{
    [super observeValueForKeyPath:path ofObject:object change:change context:context];
}

   } 
```

有什么帮助吗？

# iphone - 如何在 2 部分中激活 tableView didSelectRowAtIndexPath？

> ID：10911578
> 
> 赞同：1
> 
> 时间：2012-06-06T09:32:18.660
> 
> 标签：iphone, ios, xcode

我有一个 UItableView 分为 2 个部分。

如何管理方法 tableView didSelectRowAtIndexPath？

对于第 1 节，该方法正在运行，但我不知道如何实施到第 2 节。

谢谢

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T09:35:26.700

简单地：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 if(indexPath.section == 0) {
   //Your code for Section 1 with the index 0
 } else {
   //Your code for Section 2 with the index 1
 } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:40:32.653

只需使用 UITableView 的委托方法：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

您可以使用以下代码在部分内区分：

```
if (indexPath.section == 0) 
if (indexPath.section == 1)

..upto n depends on number of sections in your TableView. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:42:49.113

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
 if(indexPath.section == 0){
  if(indexpath.row == 0){
  //Your code here
  }
 }
 else if(indexPath.section == 0){
  if(indexpath.row == 0){
  //Your code here
  }
 }
} 
```

# c# - 带有继承的用户控件中的评估

> ID：10911581
> 
> 赞同：2
> 
> 时间：2012-06-06T09:32:33.987
> 
> 标签：c#, asp.net, user-controls, eval

我感到羞愧，我做错了什么，我不知道它是什么。有人来帮忙吗？如果是这样，请提前致谢！

我正在尝试从 ASP 用户控件的 GAC 中的继承代码中读取属性。UserControl 中的 CodeBehind 是：

```
namespace My.Name.Space
{
    public class MyControl : UserControl
    {
        public String SomeString { get; set; }
        public Boolean MyProperty
        {
            get
            {
                if (String.Equals(SomeString,"SomeValue"))
                    return true;
                return false;
            }
        }

        // other code
    }
} 
```

ascx 看起来像这样：

```
<%@ Control ClassName="MyControl" Language="C#" Inherits="My.Name.Space.MyControl, MyDLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=xxxxx" %>
<asp:DropDownList runat="server" id="myId" Visible='<%# Eval("MyProperty") %>' /> 
```

控件硬连接到一个 Aspx 页面，但 SomeString 属性不是在 aspx 中设置的！SomeString 属性在 Aspx 页面的 OnLoad 中设置。

知道我的代码有什么问题吗？再次感谢！

**编辑：**我也试过`<asp:Label Text='<% Eval("MyProperty") %>' />`，同样的错误（发生了意外错误。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:45:41.560

要在标准标记（外部绑定控件）中使用 <%# %> 语法 - 您必须在用户控件或页面本身上调用 DataBind()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:57:56.727

Eval 代码块与数据绑定控件一起使用，但也会在调用 this.DataBind() 时进行评估。

但是，您不需要使用 Eval（实际上您不能使用用户控件），因为此构造由 ASP .Net 转换为`DataBinder.Eval(someObject, "SomePropertyOfAnObject")`采用 someObject 并通过反射获取*SomePropertyOfAnObject*属性的值。DataBinding 控件有一个 DataSource 属性，该属性是要评估的对象的集合。使用用户控件并非如此。

您仍然可以使用`<%# %>`, 但通过以下方式：

```
<asp:DropDownList runat="server" id="myId" Visible='<%# MyProperty %>' /> 
```

ASP .Net 将生成如下内容：

```
dataBindingExpressionBuilderTarget.Visible = ((bool)( MyProperty )); 
```

这意味着如果您将来改变主意，MyProperty 至少应该受到保护。

# asp.net-mvc - ASP.NET MVC：参数绑定到单个嵌套属性

> ID：10911584
> 
> 赞同：1
> 
> 时间：2012-06-06T09:33:14.750
> 
> 标签：asp.net-mvc

我有一个通用的“索引”页面，其中列出了给定表格的所有条目，并且有一个侧边栏允许过滤网格中的数据。我的模型如下：

```
public class GenericFormIndexModel
    {
        public IEnumerable<IGenericForm> Entries { get; set; }

        public FormSearchQueryModel Query { get; set; }
    } 
```

在剃刀文件中，我有一个这样的 html：

```
@using (Html.BeginForm("Search", controllerName, FormMethod.Post, new { id = "fSearch" }))
        {
            @Html.HiddenFor(m => m.Query.PageIndex)
            @Html.HiddenFor(m => m.Query.PageSize)
            @Html.HiddenFor(m => m.Query.SortBy)
            ...etc
            @Html.TextBoxFor(m => m.Query.SerialNumber, null, new { @class = "inputbox right-search-field" })
        ...etc 
```

我已经定义了一个动作如下：

```
[HttpPost]
        public virtual ActionResult Search(FormSearchQueryModel queryModel)
        {
            //Implementation ommited
        } 
```

现在，问题是表单中的值确实已提交，但未绑定到操作中的“queryModel”参数。我可以在 Request.Form["Query.Something"] 中看到它们。

我不想提交整个模型，因为没有必要发布所有条目以及其他任何内容。是否可以让 MVC 绑定到嵌套属性，或者我是否坚持使用 Reqest.Form[""] ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:38:50.730

您是否尝试`Prefix`如下设置属性，

```
[HttpPost]
public virtual ActionResult Search([Bind(Prefix="Query")]FormSearchQueryModel queryModel)
{
   //Implementation ommited
} 
```

该`Bind`属性具有其他属性，例如`Include`，`Exclude`您可以通过这些属性控制需要绑定的发布值。

# oauth - 使用 google-api-java-client + OAuth 2.0 (Installed Application) 改善登录体验

> ID：10911586
> 
> 赞同：2
> 
> 时间：2012-06-06T09:33:32.503
> 
> 标签：oauth, oauth-2.0, gdata, gdata-api, google-data

以前，我安装的应用程序（桌面应用程序）使用带有机制**的 gdata-java-client**`ClientLogin`，供用户访问 Google 服务。

为了提供无缝体验，桌面应用程序将以加密格式存储用户之前输入的用户名和密码。每当他们想访问谷歌服务时，桌面应用程序会自动帮助用户填写用户名+密码信息。（即使在应用程序重新启动后）用户只需单击按钮即可访问 Google 服务。

![在此处输入图像描述](../Images/ac5dfc1c6372d336913e8f175b669b07.png)

登录代码如下：http: [//jstock.hg.sourceforge.net/hgweb/jstock/jstock/file/808b03e824bf/src/org/yccheok/jstock/gui/Utils.java#l1520](http://jstock.hg.sourceforge.net/hgweb/jstock/jstock/file/808b03e824bf/src/org/yccheok/jstock/gui/Utils.java#l1520)

我计划将代码迁移到**google-api-java-client**，并使用**OAuth 2.0**。由于我的桌面应用程序无法控制用户输入的用户名和密码，因此用户每次希望使用 Google 服务时都会收到以下 Windows 提示。

![在此处输入图像描述](../Images/3c9fa093b53d9c9349a81488e2a9565e.png)

用户流程似乎不再是无缝的，因为用户每次重新启动应用程序后都需要处理浏览器窗口。**我的桌面应用程序有什么办法可以记住他们的登录信息，这样他们就不需要在每次应用程序重新启动时响应浏览器窗口？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:25:44.817

好问题。是的，我们正在努力解决这个问题。功能请求在[这里](https://code.google.com/p/google-oauth-java-client/issues/detail?id=27)，正在审查的变更集在[这里](http://codereview.appspot.com/6242068/)。我们的计划是在 7 月的某个时候在下一个版本 1.11.0-beta 中提供它。现在，请随意将 FileCredentialStore 从变更集中修补到您的应用程序中并尝试一下。可以在[此处](http://code.google.com/p/google-api-java-client/wiki/OAuth2#Authorization_Code_Flow)找到有关 Java 客户端库中 OAuth 2.0 支持的更多文档（将针对 1.11.0-beta 进行更新，其中包含有关 FileCredentialStore 的信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:19:32.730

看看[https://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)。这是您的应用程序类型的一般指南 - 安装在客户端计算机上。

告诉你`These applications, in general, cannot keep secrets.`但是如果你已经存储了用户的凭据 - 它真的会改变你吗？

# linq - Linq 加入一对多 AND 标准

> ID：10911597
> 
> 赞同：0
> 
> 时间：2012-06-06T09:34:11.440
> 
> 标签：linq, join, one-to-many

```
Product
+------------+-------------+------------+
| PID        | Name        | Model      |
+------------+-------------+------------+
|          1 | Mercedes    | xyz        |
|          2 | Audi        | yxz        |
|          3 | BMW         | zyx        |
+------------+-------------+------------+

ProductColor
+------------+-------------+------------+
| ID         | ProductID   | Color      |
+------------+-------------+------------+
|          1 | 1           | Red        |
|          2 | 1           | Blue       |
|          3 | 3           | Blue       |
+------------+-------------+------------+ 
```

我需要从 ProductColor 中选择 ProductID，其中**蓝色和红色？**如何编写正确的 Linq 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:47:06.053

假设您在数据库表上有关系，这样的事情应该可以工作：

C＃：

```
var ProductIDs = ctx.Products.Where(p => p.Color.Contains("Red") && 
    p.Color.Contains("Blue")).Select(p => p.PID) 
```

VB：

```
Dim ProductIDs = ctx.Products.Where(function(p) p.Color.Contains("Red") And
    p.Color.Contains("Blue")).Select(function(p) p.PID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:12:52.193

```
List<Product> Pr= data.Products.Where(x=> x.ProductColors.Where(y=>   
y.Color=="blue").Select(z=> z.ProductID).Contains(x.ID) && 
x.ProductColors.Where(y=> y.Color== "red").Select(z=> 
z.ProductID).Contains(x.ID)).ToList() 
```

绿色
黄色
n

如何进行多条件 linq 查询？

# vb.net - 使用word interop 2007读取word文档特定标题下的内容

> ID：10911598
> 
> 赞同：0
> 
> 时间：2012-06-06T09:34:13.060
> 
> 标签：vb.net, ms-word, office-interop

我一直在试图弄清楚如何阅读存在标题的段落内容。标题本身是目录的一部分。标题将具有特定的样式（例如标题 1）。

例如：“Introduction”是目录中的一个条目，样式为 Heading 1。我想阅读标题“Introduction”下的内容，但不想阅读更多内容（即不是 Introduction 子标题下的内容）

我一直在尝试使用样式/样式、内容表、段落/段落、范围来做到这一点。仍然无法想出有效的解决方案。

我在 VS 2010 的 VB.NET 中工作。我正在使用 @ [http://msdn.microsoft.com/en-us/library/bb244515(v=office.12](http://msdn.microsoft.com/en-us/library/bb244515(v=office.12) ) 描述的 2007 对象模型（office 2007 互操作）这个词)

任何指针将不胜感激

问候萨米尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:28:53.027

最后我得到了解决方案。

下面的代码片段检测具有“标题 1”样式的段落

```
 For Each paragraph As Paragraph In doc.Paragraphs
        Dim style As NetOffice.WordApi.Style = paragraph.Style
        If style.NameLocal = "Heading 1" Then
            paragraph.Next()
            Console.WriteLine(paragraph.Range.Text)
            Console.WriteLine("*********")
        End If
    Next 
```

谢谢

萨米尔

# ldap - WAS 7.0 + LDAP：修订包 21 之后的属性描述无效

> ID：10911599
> 
> 赞同：2
> 
> 时间：2012-06-06T09:34:19.237
> 
> 标签：ldap, websphere, websphere-7

昨天我们在 websphere 应用服务器 7.0 上安装了 fixpack 21。我们的 java web 应用程序之一是使用 LDAP 来验证用户以让他们访问网站。由于我们安装了修订包，我们无法访问我们的网站。在日志文件中，我收到以下错误消息：

javax.naming.directory.InvalidSearchFilterException：无效的属性描述；com.sun.jndi.ldap.Filter.encodeSimpleFilter(Filter.java:417) 的剩余名称 'o=testsite.com,c=be' 在 com.sun.jndi.ldap.Filter.encodeFilter(Filter.java:152 ) 在 com.sun.jndi.ldap.LdapClient.search(LdapClient.java:520) 在 com.sun.jndi.ldap.LdapCtx 的 com.sun.jndi.ldap.Filter.encodeFilterString(Filter.java:56)。 doSearch(LdapCtx.java:1962) 在 com.sun.jndi.ldap.LdapCtx.searchAux(LdapCtx.java:1824) 在 com.sun.jndi.ldap.LdapCtx.c_search(LdapCtx.java:1749) 在 com.sun .jndi.toolkit.ctx.ComponentDirContext.p_search(ComponentDirContext.java:368) at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.search(PartialCompositeDirContext.java:338) at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext .

在安装修复包之前，我们没有这个问题。我在 Internet 上搜索了这个特定错误，但没有找到任何与 WAS 的修订包安装相关的内容。有没有人遇到同样的问题或有任何建议让它再次工作？

提前致谢。

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:10:09.370

您的回复中给出的过滤器是无效的搜索过滤器。`' '` *之后* `uniqueMember`（之前）的空格`=`在搜索过滤器中是非法的。`' '` *之后* 是合法的`=`，但是，这可能不是我们想要的。

### 也可以看看

*   [LDAP：掌握搜索过滤器](http://ff1959.wordpress.com/2011/09/21/mastering-ldap-search-filters/)- 请参阅“常用的非法搜索过滤器”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:03:03.523

我们将 Websphere 7.0 Fixpack 11 升级到 Fixpack 19，当然包括 Java SDK。这给了我们在使用 ldap 搜索的应用程序上的一系列错误。似乎新的 Java SDK 对 ldap 搜索过滤器的解析比旧的更严格。例如，我们有带有不平衡括号的搜索过滤器和带有非法字符（如 p_number）的属性名称，这些在升级之前运行良好。

# python - 在字典中加起来

> ID：10911601
> 
> 赞同：0
> 
> 时间：2012-06-06T09:34:29.783
> 
> 标签：python

```
series[1][2] = 3
val = 7 
```

我怎样才能加到`val`10 ？ `series[1][2]``series[1][2]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:35:20.500

```
series[1][2] += val 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T09:35:26.900

有什么问题：

```
series[1][2]+=val 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:27:14.587

如果您想将值存储在不同的变量中，那么您可以这样做：

```
x = (series[1][2] + val) 
```

否则
`series[1][2] += val`
，如果您想在求和后追加，那么您的工作会很好。

# javascript - Javascript：如何检查样式是否已经注入

> ID：10911609
> 
> 赞同：0
> 
> 时间：2012-06-06T09:34:55.793
> 
> 标签：javascript, google-chrome-extension

在 Chrome 插件中，通过后台脚本，我以这种方式注入样式：

```
if(!styleLeft){
    var styleLeft = document.createElement("style");
    document.head.appendChild(styleLeft);
    styleLeft.innerHTML = "a, .left-hand { cursor: wait; }";
} 
```

但是当样式标签已经在页面中时 if 不起作用。如何寻找我的特定风格？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:37:39.940

确保您`styleLeft`在全局范围或任何外部范围内声明此检查。否则，您只需在范围结束时将其丢弃，并将在每次迭代时创建一个新的空变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:46:38.510

检查身份证。例子：

```
if ( !!document.getElementById( 'a-long-id-that-will-never-collide' ) ) {
    var styleLeft = document.createElement("style");

    // Set the ID so that you can check for it later
    styleLeft.id = 'a-long-id-that-will-never-collide';

    document.head.appendChild(styleLeft);
    styleLeft.innerHTML = "a, .left-hand { cursor: wait; }";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:49:08.200

您可以解析`document.styleSheets`（它们应该可以在 Chrome 插件中访问，但我不是 100% 确定）。如果您为注入的每个样式都赋予一个唯一的标题，您将更容易找到已注入的样式：

```
var styleLeft = document.createElement("style");
styleLeft.setAttribute("title", "<a unique id>");
document.head.appendChild(styleLeft);
styleLeft.innerHTML = "a, .left-hand { cursor: wait; }";
document.head.appendChild(styleLeft); 
```

现在最后一个条目`document.styleSheets`有一个 .title 属性。你可以用它来看看它是否是你的。

# sql-server - SSRS 网页错误状态码 500

> ID：10911610
> 
> 赞同：9
> 
> 时间：2012-06-06T09:34:56.473
> 
> 标签：sql-server, sql-server-2008, reporting-services

已经部署了许多引用相同视图的报告部分，但是其中一个未能在服务器上运行，我认为这可能是由于参数到位，其中包含各种字符。这是我收到的错误消息：

有没有人对如何解决这个问题有任何建议。

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; .NET4.0E)
Timestamp: Wed, 6 Jun 2012 08:34:05 UTC

Message: Sys.WebForms.PageRequestManagerServerErrorException: An unknown error occurred while processing the request on the server. The status code returned from the server was: 500
Line: 5
Char: 62099
Code: 0
URI: http://mysqlserver/Reports/ScriptResource.axd?d=XwwW1tMwtFzdBQ9-6KriOz3q0Wkgg-xPb7EWT8HUhJXnf8sz46FbnRIo5guVNx1JC-QFapCZ-oQvTRpjjwXFYypY46ebyJBSDV8_0QBsVijeeYDDkZolFtJT35QxeGTEsgsKCpzrB-ZJiu83PMYBwOjrroQ1&t=ffffffffb868b5f4 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T10:53:47.417

此问题是由于请求长度超过一定数量而导致 SQL Server 停止正在运行的报告引起的。

**解决方法如下：**

找到 ReportManager 和 ReportServer 的 web.config 文件。

这些应该在这样的地方找到：

```
C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config

C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\Web.config 
```

找到后，您需要编辑两者的 web.config 文件并添加以下代码：

```
<appSettings>
<add key="aspnet:IgnoreFormActionAttribute" value="true" />
<add key="aspnet:MaxHttpCollectionKeys" value="100000" />
</appSettings> 
```

这些应用程序设置应该添加在 /system.web 和运行时节点之间，因此它应该如下所示：

```
</system.web>
<appSettings>
<add key="aspnet:IgnoreFormActionAttribute" value="true" />
<add key="aspnet:MaxHttpCollectionKeys" value="100000" />
</appSettings>
<runtime> 
```

**注意：** ReportManager 可能已经有一个应用程序设置节点，因此您只需粘贴两个添加键行。

ReportServer 很可能需要所有 4 行（包括打开和关闭 appsettings 节点。

# java - 如何从java中的数据集计算拟合优度（GOF）？

> ID：10911612
> 
> 赞同：0
> 
> 时间：2012-06-06T09:35:16.200
> 
> 标签：java, statistics, apache-commons

从 java 中的数据集计算拟合优度 (GOF) 的选项有哪些，我正在查看 apache math 3.0 库，但我无法理解使用它计算 GOF 的方法。对其他库或数学 3.0 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:41:37.010

对于线性最小二乘，它通常是 r 系数。r = 1.0 表示完美拟合；r = -1.0 表示方程与数据正交，r = 0.0 表示不拟合（感谢 Peter Lawrey 的修正）。典型值介于两者之间。

对于高阶函数，您应该查看为每个系数计算的置信水平。

弄清楚它的最佳方法是视觉：查看数据和拟合。

如果“无法理解”是“我一开始就不知道它背后的数学”的代码，那么库的变化将无济于事。花时间阅读和理解数学将。

# windows-8 - XAML：Windows 8 ReleasePreview 上 GridView 的 Groupfooter

> ID：10911614
> 
> 赞同：2
> 
> 时间：2012-06-06T09:35:23.467
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

我正在尝试在 GridView 中显示组页脚。我发现了诸如[如何在 WPF ListView ( GridView ) 中创建组页脚](https://stackoverflow.com/questions/678690/how-can-i-create-a-group-footer-in-a-wpf-listview-gridview)之类的问题，但它们似乎不再适合。

我尝试使用以下 ContainerStyle：

```
<GroupStyle.ContainerStyle>
    <Style TargetType="GroupItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="GroupItem">
                    <StackPanel>
                        <ContentPresenter />
                        <ItemsPresenter />
                    </StackPanel>
                </ControlTemplate>
             </Setter.Value>
         </Setter>
     </Style>
</GroupStyle.ContainerStyle> 
```

这显示了组标题，但项目完全消失了。我很确定这是一个简单的错过，但我不明白。

# asp.net-mvc - 在单页上组合有界上下文

> ID：10911616
> 
> 赞同：2
> 
> 时间：2012-06-06T09:35:23.917
> 
> 标签：asp.net-mvc, razor, domain-driven-design

我正在启动大型项目，我想使用 DDD。主要问题是如何在不复制 NH 的数据和映射的情况下显示来自多个 Bounded Context 的数据。我观看了 Udi 关于复合应用程序的播客。他提到了使用 Razor 部分来显示来自多个有界上下文的数据，但他没有提供任何细节。有人知道如何使用它或有人知道其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:04:13.250

Good thing about Razor is that it allows you to have completely independent controllers that are responsible for rendering parts of the single page (portal style). For example in your main Razor view:

```
<some_markup> New products </some_markup>

@{ Html.RenderAction("Get", "NewProducts"); }

<some_markup> Product ratings </some_markup>

@{ Html.RenderAction("Get", "ProductRatings"); } 
```

Where `NewProductsController` and `ProductRatingsController` belong to different Bounded Contexts and look like this:

```
public class NewProductsController {

    private readonly IProducts repository;

    public NewProductsController(IProducts repository) {
        ...
    }

    [ChildActionOnly]
    public ViewResult Get() {
        // load products from repository and
        // return corresponding ViewModel 
    }
}

public class ProductRatingsController {

    private readonly IProductRatings repository;

    public ProductRatingsController(IProductRatings repository) {
        ...
    }

    [ChildActionOnly]
    public ViewResult Get() {
        // load product ratings from repository and
        // return corresponding ViewModel 
    }
} 
```

Note that controllers don't know about each other although they will display data on the same page. The repositories can be injected using DI container in the [Composition Root](https://stackoverflow.com/q/6277771/625332) of your application.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:59:39.540

关于 NH 映射，每个有界上下文 (BC) 都应该有自己的一组映射，因此也应该有自己的会话工厂。配置 DI 容器以使其为每个相应的 BC 解析适当的会话工厂可能很棘手，因为必须“标记”会话工厂接口以与特定 BC 相关联，然后该 BC 中的所有依赖项也将必须与该标签相关联。另一种选择是创建一个开放的主机服务（例如 REST）来封装每个 BC，然后从您的 Web 应用程序中引用该服务。这样您就不必担心在 Web 应用程序中管理 NH 映射。

# ios5 - MFMessageController 的 EXC_BAD_ACCESS

> ID：10911625
> 
> 赞同：0
> 
> 时间：2012-06-06T09:35:53.180
> 
> 标签：ios5, exc-bad-access, nszombie, mfmessagecomposeview

当我按下消息编写器表中的发送按钮时出现此错误，我的代码是这样的：

```
-(void)ComposerSheet 
{
    picker = [[MFMessageComposeViewController alloc] init];
    picker.messageComposeDelegate = self;
    [self presentModalViewController:picker animated:YES];
    [picker release];

} 
```

我已经在 .h 文件中初始化了选择器。我怎么离开这里？我尝试使用 NSZombies，但由于问题出现在消息传递部分，我不能在那里使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:51:33.737

问题在于对象的发布，我已经注释掉了我的项目中的所有发布对象。然后它运行良好。然后检查我在哪里做错了。有效。

# c# - 如何检查 ID 是否与另一个 ID 匹配，然后通过 foreach 显示它们

> ID：10911626
> 
> 赞同：0
> 
> 时间：2012-06-06T09:35:54.773
> 
> 标签：c#, database, xna, foreach

不知道如何表达这个问题，但无论如何我都会尝试。

我目前正在做一个项目，我想通过该项目提取用户的高分。我的数据库中的高分 id 看起来像这样：

```
The user database:
|ID | Username |
| 1 | Test1    |
| 2 | Test2    |
| 3 | Test3    |

The highscore database:
|ID |Highscore |HighscoreID|
| 1 | 200      | 1         |
| 1 | 230      | 2         |
| 1 | 240      | 3         | 
```

首先，我想检查用户的ID是否与highscore数据库中的ID（HighscoreID）匹配，这样在显示所有highscore时，在highscore前面会显示Test1（谁的ID为1）ID对应的ID HighscoreID 中的 id。有一些像;

```
If(Username.ID == 1 && Highscore.HighscoreID == 1)
{
 //Display The username + the score associated with that username
} 
```

我不确定如何解释这一点，但是当我们想通过网站上的 ID 显示某些内容时，我们会在地址链接中拥有 ID，然后从地址链接中提取带有 ID 的所有内容。

我希望这已经解释得足够好，很快就会在游戏中达到最后期限，所以我希望我不必重写这个问题。

在此先感谢，你们摇滚。

*编辑*

所以基本上是这样的：

```
 MathAndYouDBEntities db = new MathAndYouDBEntities();
            User users = new User();
            HighScore highscor = new HighScore();
            int idCounter = 0;
            for (int i = 1; i < 5; i++)
            {
                i = idCounter;
                if (users.ID == i && highscor.HighscoreID == i)
                { 

                }
            } 
```

如果我想遍历所有这些以便稍后显示它们？

D

```
oing this basicly crashes the program:
   MathAndYouDBEntities db = new MathAndYouDBEntities();
            User users = new User();
            HighScore highscor = new HighScore();
            int idCounter = 0;
            for (int i = 1; i < 5; i++)
            {
                i = idCounter;
                if (users.ID == idCounter && highscor.HighscoreID == idCounter)
                {
                    allUsers += users.Bruger.ToString();
                    highscores += highscor.UserHighscore.ToString() + '\n';
                }
            }

            message = allUsers + " " + highscores; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:41:06.790

```
 If(Username.ID == 1 && Highscore.HighscoreID == 1)
     {
       System.out.println("Username is: " Username.name + "And the high score is :" + Highscore.Highscore);
       //Display The username + the score associated with that username
     } 
```

因为如果您使用正确的高分检查正确的用户名 ID，您可以使用相同的高分来获得高分。

我希望我是有道理的！

编辑：对不起，我没有读到你想要它在 for 循环中

```
 for(Highscore h : HighscoreList)   //ifyourusinganarraylistnamedHighscoreList
   If(Username.ID == 1 && Highscore.HighscoreID == 1)
   {
            System.out.println("Username is: " Username.name + "And the high score is    :" + Highscore.Highscore);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:43:57.560

如果您使用某种 ORM，您可以这样做。

```
var highScore = Highscores.Where(c => c.HighscoreID == 1)
                          .Max(c => c.Highscore); 
```

或者在您的查询字符串中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:44:20.800

经过大量测试找到了答案。

```
MathAndYouDBEntities db = new MathAndYouDBEntities();

            var queryResults =
                (
                from u in db.Users
                join h in db.HighScores
                on u.ID equals h.HighscoreID
                select new { u.Bruger, h.UserHighscore }
                );

            foreach (var h in queryResults)
            {
                allUsers += h.Bruger.ToString();
                highscores += h.UserHighscore.ToString();
            } 
```

感谢大家的帮助。

# entity-framework - ConnectionString 属性尚未初始化

> ID：10911635
> 
> 赞同：9
> 
> 时间：2012-06-06T09:36:27.087
> 
> 标签：entity-framework

我正在使用实体框架进行 2 个查询，一个接一个，第一个总是工作正常，但第二个总是返回我：ConnectionString 属性尚未初始化。

如果我改变方法的顺序，同样的事情会发生，第一个工作正常，第二个抛出这个异常。

我在页面中使用的代码如下：

```
>  var count = RequestBaseBL.GetGenericResultsCount(query.QuerySql);    
> 
>                     var datatable = RequestBaseBL.GetGenericResults(query.QuerySql, 0); 
```

在我的 DAL 中

```
public int  GetGenericResultsCount(string strsql)
            {
                using (var connection = (SqlConnection)_context.Database.Connection)
                {
                    var adapter = new SqlDataAdapter(strsql, connection);
                    var results = new DataSet();
                    adapter.Fill(results, "Results");
                    return results.Tables["Results"].Rows.Count;
                }
            }

        public DataTable GetGenericResults(string strsql, int pageIndex)
            {
                StringBuilder sb = new StringBuilder();
                sb.Append("WITH MyPagedData as ( ");
                int indexFrom = strsql.IndexOf("from");
                sb.Append(strsql.Substring(0, indexFrom));
                sb.Append(", ");
                sb.Append("ROW_NUMBER() OVER(ORDER BY RequestBaseId DESC) as RowNum ");
                sb.Append(strsql.Substring(indexFrom));
                sb.Append(") ");
                sb.Append("SELECT * from MyPagedData where RowNum between @StartIndex and @StartIndex + 10");

                using(var connection = (SqlConnection)_context.Database.Connection)
                {
                    var adapter = new SqlDataAdapter(sb.ToString(), connection);
                    adapter.SelectCommand.Parameters.Add("@StartIndex", SqlDbType.Int).Value = pageIndex;
                    var results = new DataSet();
                    adapter.Fill(results, "Results");
                    return results.Tables["Results"];
                }
            } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-06T09:49:38.743

通常，当您使用运算符或通过工厂方法`using`创建分配给变量的对象时，应使用该构造。in`new`的`Connection`属性仅在连接不存在时才创建连接；在所有其他情况下，该属性只返回一个现有的。`Database``DbContext`

在您的代码中，第一次调用获得一个“实时”连接，对其进行操作，然后通过`Dispose`隐式执行的调用关闭它`using`。此时，`Database`of`DbContext`具有对已释放对象的引用。第二次调用拾取该释放的对象，并尝试使用它，从而触发错误。

要解决此问题，只需替换`using`为分配：

```
var connection = (SqlConnection)_context.Database.Connection; 
```

# ios - Objective C 传递数据

> ID：10911637
> 
> 赞同：1
> 
> 时间：2012-06-06T09:36:28.100
> 
> 标签：ios, xcode, tableview

![http://www.freeimagehosting.net/g2kbc](../Images/4942131ed9b90e881d97b83322547ea3.png)

```
displaycontoller *show = [[displaycontroller alloc] initWithNibName:@"displaycontroller" bundle:[NSBundle mainBundle]];

Contacts *contacts = [arr objectAtIndex:indexPath.row];

show.context = context;
show.contacts = contacts; 
```

* * *

在显示视图控制器中一切正常，我再次将相同的数据传递给编辑视图控制器

```
editcontoller *edit = [[editcontroller alloc] initWithNibName:@"editcontroller" bundle:[NSBundle mainBundle]];

edit.context = context;
edit.contacts = contacts; 
```

* * *

在编辑视图控制器中，我得到空单元格如果我打印我得到的数据（空）

如果我跳过详细视图控制器，从表到编辑视图控制器，一切都很好......但是当我从表视图到显示到编辑视图时，我得到零（零）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:31:45.027

In the display, insert these two logs before the two assignments and observe the log.

```
NSLog(@"context: %@", context);   // see any valid data
NSLog(@"contacts: %@", contacts);  // see any valid data

edit.context = context;
edit.contacts = contacts; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:32:27.810

而不是`edit.context = context`尝试

```
editcontoller *edit = [[editcontroller alloc] initWithNibName:@"editcontroller" bundle:[NSBundle mainBundle]];

edit.context = self.context;
edit.contacts = self.contacts; 
```

控制器中的实例变量可能存在一些问题。

并在那里记录变量，看看发生了什么。

# c# - Mahapps.Metro：在 MetroWindow 类型中找不到可附加属性 WindowCommands

> ID：10911643
> 
> 赞同：0
> 
> 时间：2012-06-06T09:36:58.407
> 
> 标签：c#, wpf, wpf-controls

[我想我会使用Mahapps.Metro](http://mahapps.com/MahApps.Metro/)尝试一些 WPF Metro并遇到错误：

> 在 MetroWindow 类型中找不到可附加属性 WindowCommands

我已经包含了来自 nuget 的包并具有以下 xaml：

```
<Controls:MetroWindow x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Controls:MetroWindow.WindowCommands>
        <Controls:WindowCommands>
            <Button Content="settings" />
        </Controls:WindowCommands>
    </Controls:MetroWindow.WindowCommands>

    <Controls:MetroContentControl>
        <Button Content="Blah" Height="20" Width="150" />
    </Controls:MetroContentControl>
</Controls:MetroWindow> 
```

以及背后的代码：

```
using MahApps.Metro.Controls;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : MetroWindow 
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

我正在尝试获得类似于[此处](http://mahapps.com/MahApps.Metro/)文档中的标题栏。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-12T10:06:58.957

该代码运行良好，您只是拼写错误。改变那个：
`<ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />`
通过那个：
`<ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:05:47.137

构建您的项目。

您的代码似乎没问题。添加引用后，您似乎还没有构建您的项目。这个错误是否仍然存在？

# objective-c - 从旧 UIImage 绘制新 UIImage

> ID：10911645
> 
> 赞同：0
> 
> 时间：2012-06-06T09:37:05.760
> 
> 标签：objective-c, ios5, uiimage

我有一个像下面这样的 UIImage
![在此处输入图像描述](../Images/dbf29a82710f33efddc352b38e32e973.png)

我想从 bove 图像中绘制一个新图像，例如视频图标和视频持续时间
![在此处输入图像描述](../Images/f6ab3c0de3b18071a8a2f5b47a3aa5e8.png)

**任何人都可以帮助绘制上面的代码或参考任何博客thx ..提前**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:42:03.857

但是，如果您想在 iphone 中显示图像（如预览屏幕或其他内容），只需创建一个自定义 uiview，其中包含 2 个 uiimageview 用于图像和带有底部边框的相机，以及一个可用于持续时间的文本。然后您可以根据任何图像/视频持续时间的持续时间来更新此标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:54:56.847

如果你有一个 UIImageView *myImage，你可以这样做：

```
UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(x,y,w,h)];
myLabel.text = yourString;
myLabel.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.2];

[myImage addSubView:myLabel];

[myLabel release]; 
```

希望我理解你的问题。

# java - 如何在 pom.xml 中为“mvn install”添加一些内容？

> ID：10911656
> 
> 赞同：1
> 
> 时间：2012-06-06T09:38:03.647
> 
> 标签：java, maven, pom.xml

我有多个 java 项目。我有一份使用 Maven 构建源代码的文档。我正在关注它并尝试构建该项目。

1) 最初在文档中，您必须在项目的根目录中执行“mvn install”或“mvn -Dmaven.test.skip=true install”。

2）然后假设如果上述步骤产生错误，那么您已经在 pom.xml 文件中添加了一些行。行是：添加以下条目作为列表中的最后一个条目（您会找到一个 ID 为 openxds 的条目，因此这个新条目应该跟在那个条目之后）：

```
 <repository>
    <id>sysnetint</id>
    <url>http://sysnetintrepo.com/repository</url>
 </repository> 
```

您还需要将此存储库添加到插件存储库部分：

```
 <pluginRepositories>
    <repository>
       <id>sysnetint</id>
       <url>http://sysnetintrepo.com/repository</url>
    </repository>
 </pluginRepositories> 
```

此时构建应该是成功的，并且您应该准备好部署所有目标。

我在相应的节点中添加了第一行，但我没有找到在 pom.xml 中添加第二行的位置

因为在我的 pom.xml 中已经有节点，如果我输入在其中再次添加它，那么 maven 会给出与标签相关的错误。

我想问一下如何在pom.xml中添加以上几行？

很抱歉问这个愚蠢的问题，因为我不知道 maven 和 pom.xml 文件。

谢谢

更新：在 pluginRepositories 节点下，子节点如下：

```
<pluginRepositories>
              <pluginRepository>
                      .....
              </pluginRepository>
</pluginRepositories> 
```

如果我在 pluginRepositories 下输入存储库节点，我会收到仅与该标签相关的某些错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:19:23.877

`<pluginRepository>`是 的子标签[`<pluginRepositories>`](http://maven.apache.org/settings.html#Plugin_Repositories)并且`<repository>`是 的子标签[`<repositories>`](http://maven.apache.org/settings.html#Repositories)。所以不要`<repository>`在下添加`<pluginRepository>`。

而是将`<repository>`标签的内容（没有标签本身）放入`<pluginRepository>`

看看[这个页面](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)有例子。

编辑：应该是这样的：

```
 <repositories>
              <repository>
                 <id>sysnetint</id>
                 <url>http://sysnetintrepo.com/repository</url>
              </repository>
        </repositories>
        <pluginRepositories>
              <pluginRepository>
                 <id>sysnetint</id>
                 <url>http://sysnetintrepo.com/repository</url>
              </pluginRepository>
        </pluginRepositories> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:17:37.163

老实说，您必须从 Maven 基础开始。访问[http://maven.apache.org/guides/](http://maven.apache.org/guides/)并开始阅读。您现在要做的就是跳到 Maven 的复杂事物的中间，显然是通过使用一些自定义教程。

关于您提出的具体问题： **“pluginRepositories”标签直接位于根节点（“项目”）下。**[您可以在http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Super_POM](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Super_POM) 查看整个 POM 结构

# javascript - Javascript 语法：For 循环内的函数

> ID：10911657
> 
> 赞同：0
> 
> 时间：2012-06-06T09:38:04.630
> 
> 标签：javascript, html, for-loop

这里的语法问题，因为代码工作正常。我有一个 for 循环和一个必须在其中运行的内联函数（aQuery 回调）。

```
 for (i=1;i <= 5;i++)  
            {
            twitter[i] = $(this).find('twitter' + i).text();
            //$('<div class="twitter[i]"></div>').html(twitter[i]).appendTo('#link_'+i);
            $('.twitter[i]').html(twitter[i]).appendTo('#link_'+i);

            // grab from twitter
            $.getJSON('http://api.twitter.com/1/users/show.json?screen_name='+twitter[i]+'&callback=?', 

            function (data)     
                    {
                          for (j=1;j <= 5; j++)     {
                          twit_count[j] = data['followers_count'].toString();
                          twit_count[j] = add_commas(twit_count[j]);
                          $('#twitter_count'+j).html(twit_count[j]);
                          }
                    }); 
             } 
```

如果 i=3 我希望 j 在函数中是相同的值。

问题是每个 i 循环 j 循环运行五次。

将 i 作为参数传递

```
 function (data, i) 
```

不起作用，一些方向将不胜感激。

**谢谢，**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:46:57.230

大家好，只是为了回答我自己的问题。

我想要每页的 Facebook/Twitter 关注者列表。

```
var f_page = ["TheHouseofMarley, Another FB ID, Another FB ID, Another FB ID"];

    for(var i=0; i < 1; i++) 
                    {
                        retrieveData(f_page[i]);
                    }

    function retrieveData(teamName) {

    var baseURL = 'http://graph.facebook.com/';
    $.getJSON(baseURL+teamName+"&callback=?", function(data) {
    $('#FBlikes').append(teamname ":" data.likes)
        });
    }; 
```

然后在 <body>

```
<span id='FBlikes'></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:53:48.890

不是 100% 确定你想要什么，但如果你想让回调函数只做一组计数器，它不应该有一个循环。

要让回调中的 j 的值与 i 相同，您必须编写一个函数来返回回调函数，并将所需的值作为参数传递给外部函数。

```
$.getJSON(url, ( function(j) { 
      return function(data) { 
          twit_count[j] = data['followers_count'].toString();
          twit_count[j] = add_commas(twit_count[j]);
        $('#twitter_count'+j).html(twit_count[j]);
      }
   } )(i) ) 
```

[在这里](https://stackoverflow.com/questions/10844048/why-does-dynamically-adding-onclick-to-an-img-element-when-in-a-loop-require/10844085#10844085)查看我的答案以获得更多解释。

# c# - DataContractSerializer 和枚举问题

> ID：10911659
> 
> 赞同：1
> 
> 时间：2012-06-06T09:38:17.517
> 
> 标签：c#, datacontractserializer

我正在使用 DataContractSerializer。我在旧版本中有枚举，如下所示

```
[DataContract]
public Enum Foo
{
    [EnumMemberAttribute]
    X,

    [EnumMemberAttribute]
    Y,

    [EnumMemberAttribute]
    Z
} 
```

我很少有使用“Z”的文件。现在在最新版本中，我从枚举中删除了“Z”。但是当我尝试在当前代码上使用这些旧文件时，我得到了“Z”的异常。

对于 XmlSerializer，我们可以通过使用 XmlAttributeOverrides 来避免这个问题。但是对于 DataContractSerializer 不知道如何处理这种情况。

请帮我整理一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:49:52.327

线索在短语“数据合同”中。你不能随意违约。如果你这样做，**它就行不通**。现在，有一些灵活性......你通常可以对合同进行补充，只要你不关心只知道旧合同的人（所以即使这也是可疑的）。但是，也许更好的选择是：

```
[EnumMemberAttribute, Obsolete("Use Y instead", true)]
Z 
```

这**仍然可以**使用`DataContractSerializer`（尽管 IIRC`XmlSerializer`不喜欢它），但编译器会阻止您在常规代码中使用它。

如果您完全摆脱`Z`，您将无法再处理任何已保存的提及`Z`.

# gwt - GWT：重新加载选项卡面板中的单个选项卡

> ID：10911665
> 
> 赞同：0
> 
> 时间：2012-06-06T09:38:46.260
> 
> 标签：gwt, tabs, reload, selected, tabpanel

我有一个 GWT 选项卡面板，并且希望在另一个选项卡中发生某个事件（例如按钮单击）时重新加载单个选项卡。有没有办法做到这一点？另一种可能性是在选择该选项卡时执行一些代码（例如，将新元素添加到选项卡）。任何帮助将不胜感激，我已经坚持了一段时间。

为了使问题更具体，我在下面提供了一些代码。

我将代码组织在屏幕中，有一个启动选项卡面板的主屏幕。每个选项卡的启动都有单独的屏幕。

主屏幕的简化代码：

```
 public class HomeScreen extends Composite{

  public HomeScreen()    {

    TabPanel tabPanel = new TabPanel();
    FlowPanel flowpanel;

    flowpanel = new FlowPanel();
    ProfileTabScreen profileTabScreen = new ProfileTabScreen();
    flowpanel.add(profileTabScreen);
    tabPanel.add(flowpanel, "Profile");

    flowpanel = new FlowPanel();
    GroupsTabScreen groupsTabScreen = new GroupsTabScreen();
    flowpanel.add(groupsTabScreen);
    tabPanel.add(flowpanel, "Groups");

    initWidget(tabPanel);
  }
    } 
```

我要从中启动重新加载的选项卡屏幕的代码：

```
 private VerticalPanel groupPanel = new VerticalPanel();
private Button newGroupButton = new Button("New group");

    public GroupsTabScreen()    {       

    newGroupButton.addClickHandler(new ClickHandler(){
        public void onClick(ClickEvent event) { 
            createNewGroup();
        }
    });

            groupPanel.add(newGroupButton);

    initWidget(groupPanel);
} 
```

必须重新加载的选项卡屏幕的代码：

```
 private VerticalPanel profilePanel = new VerticalPanel();
private Label label = new Label("No groups yet.");

    public ProfileTabScreen()    {      

            profilePanel.add(label);
    initWidget(profilePanel);
} 
```

所以让我们想象一下，当在 groupTab 中单击 newGroupButton 时，我只想更改 profileTab 中标签的文本（而实际上它将是 ListBox 和其他元素）。

正如我所说，每次选择重新加载整个 profileTab 也是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:29:51.633

Dirty answer would be to build the Label you want to update on the Home screen and pass it to both of your tabs, like this :

```
public class HomeScreen extends Composite {
    public HomeScreen()    {
        TabPanel tabPanel = new TabPanel();
        FlowPanel flowpanel;
        Label labelToUpdate = new Label("No Groups yet");

        flowpanel = new FlowPanel();
        ProfileTabScreen profileTabScreen = new ProfileTabScreen(labelToUpdate);
        flowpanel.add(profileTabScreen);
        tabPanel.add(flowpanel, "Profile");

        flowpanel = new FlowPanel();
        GroupsTabScreen groupsTabScreen = new GroupsTabScreen(labelToUpdate);
        flowpanel.add(groupsTabScreen);
        tabPanel.add(flowpanel, "Groups");

        initWidget(tabPanel);
    }
}

public class GroupsTabScreen {
    private VerticalPanel groupPanel = new VerticalPanel();
    private Button newGroupButton = new Button("New group");
    private final Label labelToUpdate;

    public GroupsTabScreen(Label label)    {
         this.labelToUpdate = label;       

         newGroupButton.addClickHandler(new ClickHandler(){
              public void onClick(ClickEvent event) { 
                  createNewGroup();
                  labelToUpdate.setText("A group has been created");
              }
         });

        groupPanel.add(newGroupButton);

        initWidget(groupPanel);
     }
}

 public class ProfileTabScreen {
     private VerticalPanel profilePanel = new VerticalPanel();
     private final Label labelToUpdate;

     public ProfileTabScreen(Label label)    {      
        this.labelToUpdate = label;
        profilePanel.add(labelToUpdate);
        initWidget(profilePanel);
     }
 } 
```

Prettier solution would be to use an event bus between your classes, to fire and detect event changes. See [How to use the GWT EventBus](https://stackoverflow.com/q/6030202/405492)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:45:35.103

对于按钮单击，您可以使用鼠标或按键侦听器。将这样的监听器添加到选项卡面板并让它调用一个函数，我们称之为“重建”。

重建功能应该能够访问您想要更新和重新计算值的选项卡中的元素。

感谢您的代码示例。如果主屏幕有它自己的类，你应该在初始化它之前定义它使用的元素。只是一个简单的例子：

```
public class HomeScreen extends Composite{

    private TabPanel tabPanel;
    private FlowPanel profileTabScreenPanel;
    private FlowPanel groupsTabScreenPanel;

    public HomeScreen()    {         

        tabPanel = new TabPanel();

        profileTabScreenPanel = new FlowPanel();
        ProfileTabScreen profileTabScreen = new ProfileTabScreen();
        profileTabScreenPanel.add(profileTabScreen);
        tabPanel.add(flowpanel, "Profile");

        groupsTabScreenPanel = new FlowPanel();
        GroupsTabScreen groupsTabScreen = new GroupsTabScreen();
        groupsTabScreenPanel.add(groupsTabScreen);
        tabPanel.add(flowpanel, "Groups");

        initWidget(tabPanel);
    }
} 
```

优点是您实现的每个 Handler 都能够直接访问特定元素，这意味着您可以访问元素或重置它们。

此外，您应该在 TabsScreen-Elements 中添加 Getter 和 setter，以便您可以访问例如标签。

例如，您可以在 createNewGroup() 函数中执行此操作：

```
profileTabScreenPanel.getLabel().setText("New Text"); 
```

# javascript - 在javascript中比较字符串与日期时间的问题

> ID：10911668
> 
> 赞同：0
> 
> 时间：2012-06-06T09:38:49.793
> 
> 标签：javascript, asp.net

脚本是---

```
 function TimeSpentForFutureDate() {
      var toDate = new Date();
      toDate.setMinutes(0);
      toDate.setSeconds(0);
      toDate.setHours(0);
      toDate.setMilliseconds(0);
  //Here after selecting future date also, this condition is failing.The textbox
      // containing a future date

      if (document.getElementById('<%= txtDate.ClientID%>').value > toDate) {
          var timespent = jPrompt('Enter Time Spent:', '', 'Enter Time Spent', 
          function (r) {
              if (r) {
                 document.getElementById('<%= 
                    hiddenFieldFutureDateSelectTimeSpent.ClientID%>').value = r;
                 jAlert('You entered ' + r);
              }
              else {
                 var todaysDate = new Date();
                 jAlert('You had not entered the Time Spent', 'Message');
              }
              });
            }
            else {
                document.getElementById('<%=
                    hiddenFieldFutureDateSelectTimeSpent.ClientID%>').value = 
                    timespent;
                document.getElementById('<%= txtDate.ClientID%>').value = toDate;
            }
        } 
```

在上面的代码中，我正在检查文本框“txtDate”是否包含未来日期。

[即日期大于今天的日期，它将提示输入花费的时间，然后将花费的时间存储到隐藏字段中。]

我无法将字符串转换为日期时间对象进行比较。请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:41:24.810

`Date.parse`会成功的

```
var dateToCovert=document.getElementById('<%= txtDate.ClientID%>').value;
var sDate = new Date(Date.parse(dateToCovert,"MM/dd/yyyy")); 
```

格式（“MM/dd/yyyy”）当然可以根据您的需要进行更改

*笔记：*

确保`dateToCovert`不为空并且它是有效的格式

`Date.parse`在 IE7/8 中不起作用。

# javascript - 是有一个包含少量 JS 的大网页更好，还是有一个带有一些 JS 生成内容的小网页更好？

> ID：10911671
> 
> 赞同：1
> 
> 时间：2012-06-06T09:38:53.437
> 
> 标签：javascript, html

我有一个带有很多对话框的网页，它们的标题和内容的一小部分彼此不同。

在渲染速度方面（我不关心兼容性问题），我应该把所有的对话框都放在 HTML 代码中（实际上是 Twig 模板）吗？
或者我应该只放置一个对话框并使用 JavaScript 动态编辑他的标题和他的内容，这取决于用户点击了哪个按钮？

换句话说，拥有一个大网页（大小）还是一个较小的网页但使用 JS 生成部分内容更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:52:10.343

就加载时的文档准备情况而言，通常最好将所有对话框都放在 HTML 中；你可以很好地压缩 HTML，`gzip`所以不要太担心它。您可以利用`Last-Modified`和`ETag`管理内容缓存以进一步减少网络流量。

当搜索引擎抓取您的网站时，在 HTML 中包含对话框可能会带来一些 SEO 好处。

另一方面是一个纯 HTML 页面（小），其中所有对话框内容都是使用 JavaScript 动态加载的。我觉得使用 JavaScript 动态构建表单并不是特别方便，所以我通常会实现一个组件加载器系统，一次加载 HTML、CSS 和 JS；这样我就可以使用我最喜欢的编辑器来维护 HTML。如果您管理好外观，用户将不会注意到太多负载。

也许你可以选择中间的东西；常用的对话框位于 HTML 中，而较少使用的对话框则按需加载。最后，一切都与用户体验有关，即他们如何看待您网站的速度。

# android - 在 Android 应用程序中使用 .NET Web 服务

> ID：10911672
> 
> 赞同：1
> 
> 时间：2012-06-06T09:38:54.343
> 
> 标签：android, .net, web-services

我的公司建立了一个网络服务来使用 .NET 获取和设置用户数据。

我需要在我的 Android 应用程序中使用此服务。我对网络服务的概念以及设备和服务器之间的通信完全陌生。

我下载了 ksoap 库 jar 文件并在我的 android 项目中引用了它。我下一步该怎么做？如何设置连接？如何交换数据？

我看过一些教程，但它们的编码要么不完整，要么超出我的理解。任何人都可以为我提供一个简单的教程或工作代码，以便在我的应用程序中实现该服务吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:51:14.150

你可以看看@http [://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)

它几乎解释了 android 部分，有趣的是它正在与一个 .NET Web 服务对话（尽管理想情况下你不应该为该服务而烦恼）。

希望能帮助到你。

# jquery - jquery - 当用户单击链接时如何制作对话框？

> ID：10911683
> 
> 赞同：0
> 
> 时间：2012-06-06T09:39:50.497
> 
> 标签：jquery

我是 JQuery 的新手。我想知道如何制作一个对话框，当用户单击链接时弹出一个对话框，例如如果我单击发送，然后弹出一个对话框告诉您您的信息已发送！

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:47:00.997

看看 Twitter Bootstrap 模态... [http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:56:37.330

[演示弹出](http://jsfiddle.net/nfNEZ/1/)窗口。请检查一下，如果它对您有帮助，请告诉我。

# android - 应用程序在运行时强制关闭。

> ID：10911689
> 
> 赞同：-4
> 
> 时间：2012-06-06T09:40:18.060
> 
> 标签：android, onclicklistener

当我尝试运行它说的代码时，应用程序不幸停止了。请帮助我编写代码。下面是我想要解决方案的代码。

```
package gaurav.android;

import java.util.*;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class EventActivity extends Activity {
    /** Called when the activity is first created. */
    View colorregion;
    int[] colorchoices = {Color.BLACK , Color.BLUE, Color.CYAN};
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        colorregion = findViewById(R.id.color_region);
        Button clbutton = (Button)findViewById(R.id.color_button);
        clbutton.setOnClickListener((OnClickListener) new ColorRandomizer());
    }
    private void regioncolor(int color)
    {
        colorregion.setBackgroundColor(color);
    }
    private class ColorRandomizer implements onClickListener
    {
        public void onClick(View v)
        {
            Random r= new Random();
            int index= r.nextInt(colorchoices.length);
            regioncolor(colorchoices[index]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:49:59.117

**更改您的代码**

```
private class ColorRandomizer implements onClickListener
    {
        public void onClick(View v)
        {
            Random r= new Random();
            int index= r.nextInt(colorchoices.length);
            regioncolor(colorchoices[index]);
        }
    } 
```

**对此**

```
private class ColorRandomizer implements OnClickListener {
        public void onClick(View v) {
            Random r = new Random();
            int index = r.nextInt(colorchoices.length);
            regioncolor(colorchoices[index]);
        }
    } 
```

它不是`onClickListener` 它的**OnClickListener**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:50:25.920

```
 package com.test;

    import java.util.Random;

    import android.app.Activity;
    import android.graphics.Color;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;

    public class EventActivity extends Activity 
    {
     /** Called when the activity is first created. */
    View colorregion;
    int[] colorchoices = {Color.BLACK , Color.BLUE, Color.CYAN};
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        colorregion = findViewById(R.id.color_region);
        Button clbutton = (Button)findViewById(R.id.color_button);
        clbutton.setOnClickListener(new ColorRandomizer());
    }
    private void regioncolor(int color)
    {
        colorregion.setBackgroundColor(color);
    }
    private class ColorRandomizer implements OnClickListener
    {
        public void onClick(View v)
        {
            Random r= new Random();
            int index= r.nextInt(colorchoices.length);
            regioncolor(colorchoices[index]);
        }
    }

} 
```

# iphone - 比较iphone中UITextField的值后如何显示警报

> ID：10911693
> 
> 赞同：1
> 
> 时间：2012-06-06T09:40:30.550
> 
> 标签：iphone, ios, xcode, uitextfield

我有五个 uitextfiedl 我希望四个文本字段的总和不应大于第一个 textfiedl 值

像下面

```
 textField1.text=@"20";
    textField2.text=@"10";
    textField3.text=@"4";
    textField4.text=@"4";
    textField5.text=@"2"; 
```

在上面的 textfiled1=20 和所有其他的总和是 22 我希望当用户输入的数据超过这个值时，它会显示警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:47:34.330

```
int sumOfOthers = [[textField2 text] intValue] + [[textField3 text] intValue] + [[textField4 text] intValue]  + [[textField5 text] intValue];
int firstValue = [[textField1 text] intValue]
if (sumOfOthers  > firstValue)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"The message you want."  delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:50:29.227

试试这个：

```
if(( [textField1.text intValue]>=[[textField2 text] intValue] + [[textField3 text] intValue] + [[textField4 text] intValue]  + [[textField5 text] intValue])) {
    //Your alertView Code 
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:52:26.717

请记住，所有建议的答案都必须在一个方法中实现`UITextFieldDelegate`，很可能是在一个`textFieldDidEndEditing`方法中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-06T09:46:23.137

你可以这样做：

```
 NSInteger field1 = textField1.text.intValue;
  NSInteger field2 = textField2.text.intValue;
  NSInteger field3 = textField3.text.intValue;
  NSInteger field4 = textField4.text.intValue;
  NSInteger field5 = textField5.text.intValue;

  if(field1 >= (field2 + field3 + field4 + field5)) {
    //Your alertView Code 
  } 
```

# ios - 视图的 hidden = yes 和 alpha = 0.0f 有什么区别

> ID：10911696
> 
> 赞同：22
> 
> 时间：2012-06-06T09:40:42.703
> 
> 标签：ios, uiview, hidden, alpha

我有一个问题`UIView`，隐藏视图、alpha 视图和不透明视图有什么区别？

设置 view: hidden = yes 和 view.alpha = 0.0f 的效果是一样的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-06T09:56:28.777

差异是微妙的。根据[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html)：

*   `opaque`告诉系统视图没有透明度，因此渲染速度更快，因为可以跳过混合计算
*   `hidden`是布尔属性，仅更改当前视图的可见性并将其隐藏在 ui 事件中。
*   `alpha`是一个动画属性

设置`alpha = 0.0f`或`hidden = YES`具有相同的视觉效果。但是`hidden`，当您有大量嵌套视图时，不仅在图形意义上而且还从 ui 事件中实际隐藏视图可能会导致更有效的响应者链。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-06T09:45:11.660

`setting view.hidden = yes`将隐藏视图并`view.alpha = 0.0f`设置视图 alpha 0.0 的颜色，这将使视图不可见，因此两者都不相同.... :)

# java - 安装播放框架 mongodb morphia 模块

> ID：10911698
> 
> 赞同：2
> 
> 时间：2012-06-06T09:40:49.083
> 
> 标签：java, mongodb, module, playframework

我正在使用以mongodb作为后端的play框架进行应用程序开发，我已经在我的ubuntu和windows上成功安装了mongodb和playframework，但是如果我想使用mongodb，我需要play框架的morphia模块，我已经下载了morphia模块并尝试安装，但它给了我这样的错误，

```
root@ubuntu:~/apps/tmp1# play install morphia
[info] Loading project definition from /root/apps/tmp1/project
[info] Set current project to tmp1 (in build file:/root/apps/tmp1/)
[error] Not a valid command: install (similar: initialize, inspect, shell)
[error] Not a valid project ID: install
[error] Not a valid configuration: install (similar: optional)
[error] Not a valid key: install (similar: initialize, dist, stage)
[error] install
[error]        ^
root@ubuntu:~/apps/tmp1# 
```

我什至尝试更改 dependencies.yml 文件，但是我仍然无法使用它...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:15:58.187

看起来您正在使用 play 2。查看 morphia 的[文档](http://www.playframework.org/modules/morphia)，它明确指出：

> 此模块仅适用于 Play 1.x 系列。

不使用morphia，可以直接使用[java](http://www.mongodb.org/display/DOCS/Java+Language+Center)驱动。

**编辑：**[这里](https://github.com/leodagdag/play2-morphia-plugin) 有一个用于播放 2 的 morphia 插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T04:03:49.673

我开始使用带有 play framework 2.x 的 Marphia。我按照这个例子安装了marphia插件：[https ://github.com/czihong/playMongoDemo](https://github.com/czihong/playMongoDemo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T17:17:48.087

顺便说一句，我分叉了 playMongoDemo 并将其更新为与 Play 2.1.4 一起使用。我发送了一个拉取请求，但与此同时，它可以在这里找到：[https ://github.com/subdigit/playMongoDemo](https://github.com/subdigit/playMongoDemo)

一旦/如果拉取请求被接受，我可能会删除本地分支，以便您可以使用主：[https ://github.com/czihong/playMongoDemo](https://github.com/czihong/playMongoDemo)

# c++ - C++ 需要使用 .good 而不是 .eof

> ID：10911699
> 
> 赞同：0
> 
> 时间：2012-06-06T09:40:50.417
> 
> 标签：c++

> **可能重复：**
> [为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)

我是一个完全的初学者，我有这个功能，我使用 .eof 但是我被告知这不是一个好主意，因为这不适用于 linux，我应该使用 .good 所以你能告诉我我会做什么以及我应该如何修改它

```
std::string ex_file_licensing::getUsedLicense(const std::string &FlexLMfileName){

        std::ofstream openFile;
        std::string line;
        std::string tempString;
        std::string testResult;
        size_t start_pos;
        size_t stop_pos;
        std::string retour ="";
        filebuf fb;
        fb.open (FlexLMfileName.c_str(),ios::in);
        istream toOpen(&fb);

        if(toOpen.eof()){
            while(!toOpen.eof()){
                getline(toOpen,line);
                if(line.find("Checkout") != std::string::npos ){   
                    start_pos = line.find(":"); 
                    tempString = line.substr(start_pos+1);
                    stop_pos = tempString.find("/");
                    testResult = tempString.substr(start_pos, stop_pos);
                }
                else if (line.find("FLEXnet") != std::string::npos ){   
                    start_pos = line.find("FLEXnet"); 
                    tempString = line.substr(start_pos+1); 
                    stop_pos = tempString.find("Feature");
                    testResult = tempString.substr(start_pos, stop_pos);
                }
                cout << testResult << endl;
                retour.append(testResult);
            }

            fb.close();
        }

        return retour;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:44:15.153

使用这样的循环：

```
while (getline(toOpen, line)) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:45:00.250

两者都不使用：流有一个内置的布尔转换运算符，因此您可以简单地使用`if (toOpen)`or测试它`while(toOpen)`，它就*可以工作*。

顺便说一句，您的`if`条件看起来是错误的，因为它仅在文件流到达 EOF 字符时才执行其中的代码。

# wordpress - 手风琴菜单 wordpress

> ID：10911703
> 
> 赞同：1
> 
> 时间：2012-06-06T09:40:58.117
> 
> 标签：wordpress, css

我希望在 wordpress 中创建一个手风琴菜单。目前，我创建了我的菜单并显示了我的子页面，但是当我悬停时似乎无法显示它们。这是我的 CSS 代码：

```
 /***Menu***/
#header #access{position:relative;
z-index:2;
width:1225px;
min-width:1225px;
float:center;
margin-left:auto !important;
margin-right:auto !important;
top:274px;
text-align:center;}

#header .menu ul { width:1185px; 
height:40px;color:black;
text-align:center;
margin-right:auto !important;
list-style:none;}

#header .menu li { display:block;
float:left; 
width:206px; 
height:40px; 
font-size:17.5px; 
text-decoration:none;
background-color:#c4d8ff; 
color:black; 
margin-right:31px;}

#header .menu li a { display:block; 
width:206px; 
height:40px; 
text-decoration:none;
color:black; 
font:17px segoe; 
vertical-align:center; 
line-height:40px;}

#header .menu li a:hover { background-color:#e27c23;
color:white; 
margin-right:31px;}

#header .menu li.current_page_item a { background-color:#3670b5; 
color:white; 
width:206px; 
height:40px; 
margin-right:31px;}

/***Sous-menu***/
ul.sub-menu{background-color:red;
margin-left:-20px;
list-style:none;}

ul.sub-menu li {background-color:blue !important;
margin-left:-40px; 
clear:left;
list-style:none;}

ul.sub-menu li a { }

ul.sub-menu li a:hover {background-color:black !important;}

ul.sub-menu li.current_page_item a {background-color:green !important; } 
```

有人可以告诉我我必须使用哪个 css 属性来做到这一点吗？在哪里？非常感谢 ！

# java - 延迟断点：何时加载类

> ID：10911704
> 
> 赞同：3
> 
> 时间：2012-06-06T09:40:58.980
> 
> 标签：java, debugging, maven-3, jdb

我正在尝试使用 : 调试 Maven `jdb -attach 8000`，在使用`mvnDebug`.
我尝试放置断点，但得到：

```
main[1] stop in DeployMojo.DeployMojo
Deferring breakpoint DeployMojo.DeployMojo.
It will be set after the class is loaded.
main[1] stop at Dependency:66
Deferring breakpoint Dependency:66.
It will be set after the class is loaded. 
```

当我运行时，不会调用断点。我有源代码（使用 maven 命令生成），但我怎样才能让它们对调试器可用？
有没有可以放置断点的类加载器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T09:54:05.643

这可能是因为您的类名错误或因为您省略了包。如果 class`Dependency`在 package 中`com.my.package`，则 break in class`com.my.package.Dependency`而不是 in `Dependency`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-11T20:59:34.840

我正在使用`jdb -attach -sourcepath ~/path/to/project/main/java`. 原来 jdb 不喜欢`~`and 需要`jdb -attach -sourcepath $HOME/path/to/project/main/java`或绝对路径。

# jboss - 如何在 JBoss 中为 JMX 服务对象的方法和参数添加描述？

> ID：10911706
> 
> 赞同：1
> 
> 时间：2012-06-06T09:41:12.640
> 
> 标签：jboss, jmx, jboss-4.2.x

是否可以在 JMX 控制台中显示我的 MBean 的方法和参数的描述。

现在这就是我在 JBoss JMX 控制台中看到我的 MBean 的方式： ![在此处输入图像描述](../Images/e0e14f10d44f4969bca30c8bc464d9b7.png)

是否有一些注释可以为我完成这项工作？

类似于下面的代码片段（我只是做了注释，不确定它们是否存在）：

```
@Management
public interface InterestRateManager {
  @Description("Sets the interest rate")
  public void setInterestRate(@Description("The interest rate") double g);

  public double getInterestRate();
} 
```

最终结果将是使 p1 具有有意义的名称并具有描述。

不确定这是否相关，但我使用的是 JBoss 4.2.2 GA。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:00:27.623

是的，这是可能的。您有 2 个主要选择：

1.  将您的 MBean 实现为[DynamicMBean](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/DynamicMBean.html)。[通过扩展ServiceDynamicMBeanSupport 可以获得](http://docs.jboss.org/jbossas/javadoc/4.0.2/org/jboss/system/ServiceDynamicMBeanSupport.html)额外的 JBoss 支持。
2.  JBoss 实现了一个称为[XMBean](http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/JBoss_JMX_Implementation_Architecture-JBoss_XMBeans.html)的模型，如果您只针对 JBoss，它可能更可取。基本上，您可以通过简单地以 XML 形式提供额外的元数据来将现有代码转换为 XMBean，这些元数据可以嵌入到部署描述符中或作为外部资源引用。有关如何[将标准 mbean 转换为 XMBean 的](https://community.jboss.org/wiki/HowDoIXMBeanIzeAnExistingStandardMBean)信息，请参阅此页面。

# ajax - 动态表中的 jQuery 快速搜索

> ID：10911707
> 
> 赞同：0
> 
> 时间：2012-06-06T09:41:17.030
> 
> 标签：ajax, jquery

在进行 ajax 调用后，我正在创建一个带有 id 的表。我正在从 db 中检索数据行并创建一个带有 id 的动态表并显示它。我也想要搜索功能。我使用了快速搜索，但我猜它不会在动态表中搜索。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:44:40.947

看看[JQGrid](http://www.trirand.com/blog/)。是我在 Jquery 中见过的最好的网格插件。

# java - 从 jar 中使用 ResourceBundle 加载

> ID：10911708
> 
> 赞同：9
> 
> 时间：2012-06-06T09:41:17.367
> 
> 标签：java, jar, resourcebundle

**我已经看到了一些关于如何通过getResourceAsStream**在 jar 中加载特定文件的答案，我可以管理它。但是我面临着一些非常具体的事情，我在论坛上找不到关于这个的答案。

这是配置：

我有一个 jar 文件，其**conf**目录包含 2 个属性文件**messages_en_US.properties**和**messages_fr_FR.properties**。加载此类资源的经典方法是使用

```
ResourceBundle.getBundle("messages", java.util.Locale.getDefault()); 
```

如果文件在磁盘上，在程序类路径引用的目录中，则可以正常工作。但我不知道如何管理结合使用**ResourceBundle.getBundle**和使用 jar 中的资源。事实上，因为我看不到任何通过**getResourceAsStream**的桥梁（或者这意味着我自己管理语言环境以指定整个资源文件名，这不是很聪明）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T09:44:17.087

如果它在 jar 内的 conf 目录中，那么您尝试加载的包的包是`conf`，您应该使用

```
ResourceBundle.getBundle("conf.messages", java.util.Locale.getDefault()); 
```

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html#getBundle%28java.lang.String,%20java.util.Locale%29)说：

```
baseName - the base name of the resource bundle, a fully qualified class name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:43:25.937

你试过这个吗？

```
ResourceBundle.getBundle("conf/messages", java.util.Locale.getDefault()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T08:38:51.973

ResourceBundle 总是搜索一个属性文件，所以，如果你运行：

```
ResourceBundle.getBundle("messages", java.util.Locale.getDefault()); 
```

ResourceBundle 将在您的类路径中搜索“messages.properties”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-01T03:13:52.570

假设文件 messages.properties 是某些 xyz.jar 的一部分，它已经在您要使用它的项目的类路径中。该文件在 jar 中的打包如下：

```
src
   |main
       |resources
            |com
                |xyz
                   ....|message.properties 
```

要读取此文件：

```
import java.util.ResourceBundle; 
```

……

```
ResourceBundle.getBundle("com.xyz.resources.messages", Locale.getDefault()); 
```

谢谢

# asp.net - Asp.net 全局循环方法

> ID：10911711
> 
> 赞同：0
> 
> 时间：2012-06-06T09:41:26.923
> 
> 标签：asp.net

我有一个数据库表，其中包含与我的图片库相关的数据，我想将此信息存储在我的服务器上。

基本上，每次用户进入我的画廊时，我都想从我的服务器读取数据，而不是每次都查询数据库。

我发现 ApplicaionState 非常适合我的使用，但我想做的是创建一个全局方法，每 2 小时从数据库中重新获取数据，这样我就可以确定我拥有最新版本。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:46:47.247

使用 .NET 的 Cache 对象代替 applicationstate，您可以在其中提供到期时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:47:31.997

您最好使用 ASP.Net 缓存。当您[在缓存中添加某些](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.add)内容时，您可以定义对象可以在缓存中保留多长时间。

加载页面时，检查对象是否在缓存中。如果为真，则使用它，如果为假，则通过读取数据库来重建它。

您还可以通过捕获缓存项的到期来预先加载数据库数据，以强制重新加载数据。

# java - Java EE - Seam 2 与 Seam 3 - 我现在应该选择哪个？

> ID：10911712
> 
> 赞同：2
> 
> 时间：2012-06-06T09:41:28.180
> 
> 标签：java, jakarta-ee, seam, seam2, seam3

我正在开始新的企业应用程序。我选择了以下技术：jee6 (jsf + primefaces, ejb) 和 hibernate。我将部署在 Glassfish 3 上。

问题是我应该选择哪个 Seam 版本？我知道 Seam 3 是最新的，但 Seam 2 似乎也在开发中。我快速浏览了 Seam 2 和 3 文档，Seam 2 对我来说看起来更容易（尤其是安全模块）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:35:04.603

如果在接缝 2 和接缝 3 之间进行选择。

我建议使用 Seam 2，它仍在开发中，一旦我了解它将发布支持 JSF2、JBoss AS 7.1 等的 Seam 2.3...

Seam 2 效率更高，正如您所说，目前更易于使用。DeltaSpike 启动并运行后的情况可能是另一回事。

我还读到他们正在考虑将 Seam 2.3 重命名为 Seam 4。

正在向 DeltaSpike 移动的是 Seam 3。

/特林德

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T09:46:21.113

Seam 2 是一条死路，该项目现在被捐赠给了 Apache 基金会，它被称为 DeltaSpike。

恕我直言，最好的方法是使用标准，J2EE 6 几乎拥有您需要的一切。安全性有多种替代方案，您可以尝试 picketlink [http://www.jboss.org/picketlink](http://www.jboss.org/picketlink)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T20:31:37.177

Seam 3 仍然缺乏许多简单的基础知识，虽然整体模式可能比 Seam 2 更好，但我对尝试做 Seam 2 开箱即用的东西感到非常沮丧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:30:31.110

Seam 3 或 seam 2 不是一个有效的问题。您应该问自己是想要 cdi 还是 seam 2。答案是您想要 cdi。有了它，您将获得许多好处。他们部分遵循在 java ee 中使用标准。特别是当规范由 Gavin King 领导并从 seam 2、spring 和其他框架中汲取精华时。您实际上应该阅读整个 jsr-299 规范，它确实提供了丰富的信息。其他巨大的好处是管道中的所有伟大的扩展和伟大的东西，比如 deltaspike。

我认为很明显 cdi 有多少承诺。接缝 3 只不过是一些额外的调味料，虽然它可以产生差异，但它不是你应该比较接缝 2 的东西。接缝 2 中的接缝 3 之类的扩展没有等价物。接缝 2 的构建并不是那么容易扩展。

# jquery - 表单提交在 IE 和 Chrome 中不起作用

> ID：10911723
> 
> 赞同：0
> 
> 时间：2012-06-06T09:42:35.613
> 
> 标签：jquery, forms, dialog, submit

我制作了一个脚本来提交表单，然后打开一个显示“已添加到购物车”的对话框。它适用于FF。Chrome 将我重定向到购物车页面，而 IE 什么也不做，甚至不提交任何内容。

```
<script type="text/javascript">
var productId  = {{ product.vid }};
var addUrl = "http://shop.com/cart/add/" +productId+ "/?quantity=";

jQuery(document).ready(function(){
bakVormAsset("#formProduct");
});

function bakVormAsset(product){
jQuery(product + " #formProductQuantity").val("1");
jQuery(product + " #formProductQuantity").keyup(function () {
var val = jQuery(product + " #formProductQuantity").first().val();
});

jQuery(product + " .opener").click(function(event) {
event.preventDefault();
 $.get($(this).attr('href'), function(data, status) {
   var val = jQuery(product + " #formProductQuantity").first().val();

      // Go to page
      window.location.href = addUrl + val;
         $( "#dialog" ).dialog( "open" );
      return false;
 });
 }
 </script> 
```

我的表格如下所示：

```
 <form class="formProduct" id="formProduct" action="#" method="post">
 <input type="text" name="quantity" id="formProductQuantity" value="{{ product.stock.minimum }}" />
 <a class="button blue opener" href="" title="{{ 'Add to cart' | t }}"><span>{{ 'Add to cart' | t }}</span></a>
 </form> 
```

请帮我

**编辑** 我忘了提到的是，当表单提交时，用户必须留在同一页面上，而不是被重定向到“购物车”页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:18:57.187

[http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)

如果您想通过 ajax 或其他方式提交表单，则必须使用此插件。

在 Complete Method 上，您可以做任何您想做的事情。

```
jQuery(product + " .opener").click(function(event) {
     event.preventDefault();
       var options = { 
           success:       function(){
                                $( "#dialog" ).dialog( "open" );
                          }  // post-submit callback 
     };

    $('#myForm2').ajaxSubmit(options); 

 }); 
```

您必须指定表单的操作。此表单必须提交的操作。

# hibernate - getResultList() 的问题

> ID：10911724
> 
> 赞同：0
> 
> 时间：2012-06-06T09:42:36.890
> 
> 标签：hibernate

我目前正在做一个基于 Hibernate 的性能调优项目。但是，我在代码片段的以下部分面临一个问题，这大大降低了性能。以下是部分代码片段：

```
private EntityManager em;
Query query = em.createQuery(sQuery.toString());
List<Object> entities = query. getResultList(); 
```

我确实在两行代码上都放置了计时器，并且我看到查询需要大约 0.02 秒来获取假设 x 行数（与通过 DB 客户端运行时运行所需的时间相同）。然而，大部分时间被第二行占用，即获取列表（getResultList()）。我开始考虑这是否正常，并且使用 getResultList 实际上会降低应用程序的性能。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:46:57.197

> 获取 0.02 秒让我们说 x 行数（与通过数据库客户端运行时运行所需的时间相同）

它没有休眠它的数据库调用，而且它并不慢。0.02秒将数据发送到数据库执行查询然后发送数据很快，非常快。

**编辑它的四秒** 显示 sql 查询的代码，优化它。然后在这样做之后，让它更快的唯一方法是在java端缓存结果。

我使用[ehcache](http://ehcache.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:51:08.907

我同意@NimChimpsky 0.02 并没有那么糟糕。

无论如何，您也可以尝试使用 NamedQuery，它会在应用程序启动时由 hibernate 进行预处理，并且在执行它时可能会为您节省一些时间。

# cocoa - 将 Growl 嵌入 Cocoa 应用程序 iconData

> ID：10911728
> 
> 赞同：0
> 
> 时间：2012-06-06T09:42:46.953
> 
> 标签：cocoa, growl

我在我的应用程序中成功实现了 Growl。我还有一个小问题。

可以在通知中设置图标的大小（代码中的iconData）吗？太小了..

我的代码是：

```
NSBundle *myBundle = [NSBundle bundleForClass:[AppController class]]; 
    NSString *growlPath = [[myBundle privateFrameworksPath] stringByAppendingPathComponent:@"Growl.framework"];
    NSBundle *growlBundle = [NSBundle bundleWithPath:growlPath];
    if (growlBundle && [growlBundle load]) {
        [GrowlApplicationBridge setGrowlDelegate:self];
        [GrowlApplicationBridge notifyWithTitle:@"ALERT!!!" description:@"\n\nNonloso" notificationName:@"Hack" iconData:[[[NSImage alloc] initWithContentsOfFile:@"/Users/blabla/image.JPG"] TIFFRepresentation] priority:2 isSticky:NO clickContext:[NSDate date]];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:08:51.543

如果图像本身不是太小（我不这么认为），则由活动的 Growl 主题决定图像在通知中的大小。无法从您的代码中更改它：由用户决定他想要使用哪个 Growl 主题。

# sql - Rails 3，不同的计数多重有条件

> ID：10911729
> 
> 赞同：0
> 
> 时间：2012-06-06T09:42:47.047
> 
> 标签：sql, ruby-on-rails, group-by, fullcalendar

一些背景。我将 Rails 3 用于拼车应用程序。我使用 fullcalendar 作为 jquery 日历库。当某一天有很多事件时，它就不会很好地工作*。*所以，我想做的是拥有两个“事件源”。一方面，我想返回计数小于某个值的所有事件，按日期和类别分组。对于其他，我想返回所有计数超过值的*记录*。

抱歉，如果不清楚，一些示例数据可能会使其更明显

基本记录结构：

```
|    id    |  date    |  category_id |
|    1     | 1-Aug    |       1      |
|    2     | 1-Aug    |       1      |
|    3     | 1-Aug    |       1      |
|    4     | 1-Aug    |       2      |
|    5     | 1-Aug    |       2      |
|    6     | 1-Aug    |       3      | 
```

假设 3 是魔术计数（应分组为 3 或更高）我想要一个选择返回

```
|    id    |  date    |  category_id |   count  |
|    1     | 1-Aug    |       1      |     3    | 
```

（我实际上并不关心 ID 可以使用 group_concat 组合（与 MYSQL）），在我的用例中它并不重要 - 我想知道的是，8 月 1 日类别 1 有 3 个条目

第二个选择应该返回其他所有内容

```
|    id    |  date    |  category_id |   count  |
|    4     | 1-Aug    |       2      |     2    |
|    5     | 1-Aug    |       2      |     2    |
|    6     | 1-Aug    |       3      |     1    | 
```

我真的不需要返回的计数，但关键是每个结果都有单独的行，它们的计数不 >= 3。

目前我的 SQL 如下所示：

```
SELECT `pools`.*
FROM       `pools`
INNER JOIN `fields`    ON `fields`.`id`    = `pools`.`field_id` 
INNER JOIN `regions`   ON `regions`.`id`   = `fields`.`region_id` 
INNER JOIN `countries` ON `countries`.`id` = `regions`.`country_id`
WHERE `regions`.`country_id` = 1
  AND `pools`.`confirmed`    = 1
  AND (leaving_date >= '2012-04-30 00:00:00')
  AND (leaving_date <= '2012-06-04 00:00:00')
GROUP BY field_id, leaving_date
HAVING   count(*) >= 3
ORDER BY leaving_date 
```

我可以遍历返回的数组——但如果可能的话，我宁愿在 SQL 端进行。还想以最少的数据库旅行次数来做到这一点.. 一个通用的指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:32:43.313

也许这对于开始很有用：

```
CREATE TEMPORARY TABLE grouped_rows AS
  SELECT `pools`.*
  FROM       `pools`
  INNER JOIN `fields`     ON `fields`.`id`    = `pools`.`field_id` 
  INNER JOIN `regions`    ON `regions`.`id`   = `fields`.`region_id` 
  INNER JOIN `countries`  ON `countries`.`id` = `regions`.`country_id`
  WHERE `regions`.`country_id` = 1
    AND `pools`.`confirmed`    = 1
    AND (leaving_date >= '2012-04-30 00:00:00')
    AND (leaving_date <= '2012-06-04 00:00:00')
  GROUP BY field_id, leaving_date;
  HAVING   count(*) >= 3;

SELECT `pools`.*
FROM       `pools`
INNER JOIN `fields`     ON `fields`.`id`    = `pools`.`field_id` 
INNER JOIN `regions`    ON `regions`.`id`   = `fields`.`region_id` 
INNER JOIN `countries`  ON `countries`.`id` = `regions`.`country_id`
LEFT  JOIN grouped_rows ON grouped_rows.field_id     = pools.field_id
                       AND grouped_rows.leaving_date = pools.leaving_date
WHERE `regions`.`country_id` = 1
  AND `pools`.`confirmed`    = 1
  AND (leaving_date >= '2012-04-30 00:00:00')
  AND (leaving_date <= '2012-06-04 00:00:00')
  AND grouped_rows.some_not_null_field IS NULL

UNION ALL

SELECT * FROM grouped_rows

ORDER BY leaving_date;

DROP TEMPORARY TABLE grouped_rows; 
```

我不知道您是否可以发出所有三个语句并获得`UNION`一次往返的结果。也许您可以将 temptable 的 select 嵌入到`UNION`.

**更新：**

我找到了一个可以使用的单查询解决方案。这只是基本的骨架结构，但我认为您可以根据它转换您的查询：

[http://sqlfiddle.com/#!2/f67e3/18](http://sqlfiddle.com/#!2/f67e3/18)

```
SELECT
  IF( grouped.gcat, NULL, item.id ) AS out_id
 ,item.cat AS out_cat
 ,COALESCE( grouped.gcount, 1 ) out_count

FROM item

LEFT JOIN
(
  SELECT   count(*) AS gcount, cat AS gcat
  FROM     item
  GROUP BY gcat
  HAVING   count(*) >= 3
) AS grouped
  ON item.cat = grouped.gcat

GROUP BY out_id 
```

# jquery - JQuery UI resizable() 在调整高度时改变宽度

> ID：10911733
> 
> 赞同：6
> 
> 时间：2012-06-06T09:42:57.770
> 
> 标签：jquery, css, jquery-ui, resizable, jquery-resizable

我在调整大小时遇到​​问题。我在`.resizable()`具有以下 css 的 div 上使用 JQuery：

```
div#resizable {
   float: left;
   border: solid 1px white;
   box-shadow: 0px 0px 0px 1px #F2F2F2;
   box-sizing: border-box;
   padding: 15px;
} 
```

它还包含许多其他 div 和其他东西。我这样附上`resizable`：

```
$( "#resizable" ).resizable({ minWidth: 200, 
                              maxWidth: 597, 
                              minHeight: 240,
                              resize: widgetResizeListener 
                            }); 
```

现在`widgetResizeListener()`只是在控制台中记录一些东西。

现在，当我尝试通过拖动它的`ui-resizable-s`侧面来更改 div 的高度时，它会自动将 div 的宽度更改为 about `30px`。每次我**开始拖动**时都会发生这种情况。因此，每次都会丢失所需的宽度。改变宽度时，高度也会发生同样的事情。

现在我想知道这是否是因为我的 div 有填充？因为在之前，没有 padding 的时候，这种“跳跃”的事情是不会发生的。现在我无法删除填充，因为它确实需要。那么如何解决这个问题呢？我的意思是有没有办法在**JQuery resizable()中****包含填充**？

 **任何帮助将不胜感激，谢谢...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-06T09:50:37.700

我认为这是`box-sizing: border-box;`和填充的组合。可调整大小的功能因此 css 属性而失败。

尝试将 box-sizing 更改为默认值 ( `box-sizing: content-box`)，或者为 padding 制作一个内部容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T05:45:47.643

如果像我的情况一样删除 box-sizing 属性是不可能的，我找到了一个可能有帮助的不同解决方案。这不是最漂亮的，但它有效。没有测试确切的代码，但想法是您必须在调整大小时添加填充宽度，然后在停止时将其更改回来。重要提示：如果元素可能没有填充，则必须添加一个 if 语句来判断是否设置了填充值

```
var padLeft, padRight, padTotal; // define vars 

$('#resize').resizable({

start: function(event,ui){
   padLeft = this.css('padding-left').replace('px','');
   padRight = this.css('padding-right').replace('px','');
   padTotal = parseFloat(padLeft + padRight);
   ui.size.width = ui.size.width + padTotal;
},
resize: function(event,ui){
   ui.size.width = ui.size.width + padTotal;
},
stop: function(event,ui){
   this.css('width',ui.size.width - padTotal); 
}

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-15T17:38:31.240

我知道这是一个老问题，但我遇到了同样的问题，因为我使用的是 Foundation 库，它将 box-sizing 边框框应用于所有元素。您可以通过在 jQuery UI 可调整大小的小部件代码中编辑一行来修复它。修复在

```
_mouseCapture 
```

我应用了以下代码

```
var padLeft = el.css('padding-left').replace('px','');
var padRight = el.css('padding-right').replace('px','');
var padTotal = parseFloat(Number(padLeft) + Number(padRight));

this.originalSize = this._helper ? { width: el.outerWidth() + padTotal, height: el.outerHeight() + padTotal } : { width: el.width() + padTotal, height: el.height() + padTotal}; 
```

您可能需要也可能不需要像我所做的那样编辑高度值。根据我应用可调整大小的 div，即每个网格元素的基础容器，或嵌套在其中的 div，我必须删除或包含高度调整。

您可以在这里查看如何编辑 jQuery 小部件而无需更改核心库，但我还没有完全让它工作

[如何扩展 jquery ui 小部件？(1.7)](https://stackoverflow.com/questions/2525247/how-to-extend-a-jquery-ui-widget-1-7)

我在可调整大小的对象函数中进一步遇到错误。如果有人对此有任何建议，我会很高兴听到他们的声音。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-26T00:53:35.100

我们在 box-sizing:border-box 是必须的情况下使用的一种替代方法如下。

在 resizeable 回调实现中： 1\. 在 start 我们设置 box-sizing:content-box 2\. 在 stop 我们将其设置回 box-sizing:border-box

也就是说我们在resize的时候临时把它设置为默认的content-box，以避免在使用border-box时resizeable引起的跳跃行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-20T08:21:08.183

您可以使用“handles”参数来处理这个问题。像这样：

```
$( "#resizable" ).resizable({handles: 'e,w'}); 
```**

# android - 无法使用 ontouchlistener 拖动自定义图像视图

> ID：10911734
> 
> 赞同：1
> 
> 时间：2012-06-06T09:43:06.563
> 
> 标签：android, drag-and-drop, android-imageview, ontouchlistener

我是android编程新手...我正在尝试使用手势（特别是ontouchlistener）移动一个新创建的imageview，它添加到布局中......它设法添加了imageview，但ontouchlistener只捕获到ACTION_DOWN..这是我的代码：

```
package com.calengine;

import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.FrameLayout;
import android.widget.FrameLayout.LayoutParams;
import android.widget.ImageView;
import android.widget.TextView;

public class coba extends CALEngineActivity implements OnClickListener, OnTouchListener{

    private ImageView movableimage;
    private FrameLayout layout;
    private LayoutParams params;
    int status;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainform2);

        layout = (AbsoluteLayout) findViewById(R.id.absLayoutAction);
        status = 0;
            movableimage = new ImageView(this);
            movableimage.setImageResource(R.drawable.icon_launcher);
            layout.addView(movableimage);
            movableimage.setOnTouchListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        TextView txt = (TextView) findViewById(R.id.textView1);
        LayoutParams layoutParams = (LayoutParams) movableimage.getLayoutParams();
        switch(event.getAction())
        {
        case MotionEvent.ACTION_DOWN:   
            txt.setText("Created");
            break;
        case MotionEvent.ACTION_MOVE:
            txt.setText("Moving");
            int x_cord = (int)event.getRawX();
            int y_cord = (int)event.getRawY();

            layoutParams.leftMargins = x_cord - 25;
            layoutParams.topMargins = y_cord - 75;

            movableimage.setLayoutParams(layoutParams);
            break;
        case MotionEvent.ACTION_UP:
            txt.setText("Up");
            break;
        default:
            break;
        }
        return false;
    }
} 
```

我假设对于这些事件，textview 将显示相应的文本。但它只显示“已创建”，没有“移动”或“向上”……图像也不会移动……如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:50:35.327

您需要在 onTouch 方法中返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:53:25.910

我相信当您从侦听器中返回 false 时，它​​会停止为您提供更多信息（与即将发生的后续事件有关）。尝试返回 true ，看看是否能解决您的问题。顺便说一下，我没有看到任何其他根本错误的东西（尽管为了*正确的方法来做你在这里做的事情，这不涉及 AbsoluteLayout，而是你可以在其上绘制的 SurfaceView（和操纵）任何你想要的......但这有点高级。

这是一个相当简单的开始。请记住，您可以在任何视图上捕获触摸事件，在此示例中，您只需添加该功能即可将您想要的任何内容绘制到相关坐标。您可以轻松找到有关如何拖动东西的教程。 [http://android-coding.blogspot.com/2011/05/drawing-on-surfaceview.html](http://android-coding.blogspot.com/2011/05/drawing-on-surfaceview.html)

# solr - solr 日期格式

> ID：10911740
> 
> 赞同：0
> 
> 时间：2012-06-06T09:43:38.040
> 
> 标签：solr

我对 solr 期望的日期格式有点困惑，我知道它必须是以下格式：

2012-05-10T20:11:01.057Z

我正在查看的索引在其末尾添加了一个尾随 z ，其形式为：

2012-05-10T20:09:50.567ZZ

这实际上并没有在我的 solr 版本 3.5 上引发错误（但在旧版本上确实如此）。3.5 是否更能容忍格式不正确的日期格式？我知道 apache 定义的 DateField 类最后需要一个“Z”来表示 UTC 时间。我想我正在寻找一个迹象，说明为什么这会在 3.5 之前的版本中引起问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:23:15.837

我用旧版本的 SOLR 运行了相同的索引，看起来 3.5 版纠正了最后的附加“Z”，而旧版本没有。

# asp.net - 问题：当我隐藏某些项目时，使用 Datalist 的项目之间的差距

> ID：10911741
> 
> 赞同：0
> 
> 时间：2012-06-06T09:43:40.957
> 
> 标签：asp.net, datalist

我需要将项目显示为在线购物网站。我正在使用 DataList 控件，并且项目在表内。一个包含所有项目的网页很好，如下所示。(repeatcloumns=4)

项目1 项目2 项目3 项目4 项目4 项目5 项目6 项目8

但是，根据某些情况，我必须从显示中隐藏/删除一些项目。当我尝试使用时：

```
protected void DataListReward_ItemDataBound(object sender, DataListItemEventArgs e)
 {
   if(condition)
   {

     do this
   }
   else
   {
      e.Item.Controls.Remove(e.Item.FindControl("tableShopping"));
      //e.Item.FindControl("tableShopping").Visible = false;
    }

 } 
```

我在使用 Gaps 时变得像这样：

项目（间隙） 项目（间隙） 项目（间隙） 项目（间隙）

# c# - 在运行时使程序集内部对另一个程序集可见

> ID：10911744
> 
> 赞同：1
> 
> 时间：2012-06-06T09:43:52.627
> 
> 标签：c#, runtime-compilation

所以我一直在寻找一种方法来做到这一点，每次我发现一些东西，都会导致不同的问题。

基本上，我有一个游戏机。控制台运行 C# 代码片段。编译的程序集需要是当前程序集的朋友，以便控制台知道当前程序集中的所有类型并可以操作它们。

问题一：每次运行控制台命令时，都会生成一个新程序集（如果有人知道怎么做，我很乐意避免这种情况），并且要成为朋友程序集，它需要与上一个程序集具有相同的名称。不幸的是，您无法卸载以前的程序集，因此新程序集无法覆盖它。这迫使我使用 AppDomains。

问题二：如果我让每个程序集使用单独的 AppDomain，然后卸载最后一个程序集，它可以工作，但我无法从当前 AppDomain 操作对象，因为它们不是从 MarshalByRef 派生的，所以当我将它们作为参数传递给它尝试序列化它们的脚本。我不喜欢 AppDomains。

所以我认为最简单的方法是在同一个 AppDomain 中生成具有不同名称的程序集，并在运行时以某种方式将它们设置为友元程序集。

我确实意识到这可能是不可能的，因此欢迎任何其他选择。

编辑：为了更清楚。脚本需要访问主/父程序集内部。不是反过来。我无法在主程序集中公开所有内容，因为我希望代码可重用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:49:57.563

如果您正在生成这些程序集，为什么不将您想要的项目公开`public`而不是公开`internal`？

或者，将可公开类型标记为`protected internal`并在生成的程序集中创建派生类（假设生成的程序集引用主程序集）。然后，这将允许您生成的程序集使用其派生类，并且该派生类将可以通过受保护的成员访问主程序集。这些都不会使您的成员通常“公开”。

~~您可以使用[`InternalsVisibleToAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)，但这是在编译时。但是，听起来您正在从代码片段动态编译程序集，因此您应该也可以编译任何您想要的属性。~~

我没有意识到您希望主程序集对生成的程序集可见。正如以下问题的答案所解释的，您可以影响给定实例的属性，但不能静态地针对类型。

[可以在 C# 中动态添加属性吗？](https://stackoverflow.com/questions/129285/can-attributes-be-added-dynamically-in-c)

当然，您生成的代码总是可以使用反射来获取类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:49:22.903

您可以将[InternalsVisibleToAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute%28v=vs.80%29.aspx)添加到新程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:53:21.853

这似乎不可能。您可以将每个程序集的成员生成为`public`- 因为程序集是动态生成的，所以这应该不是问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:05:25.420

我正在考虑一个类似于您的问题，并且正在考虑某种代理程序集，它将公共方法暴露给主程序集的内部。

组件：

*   Main：内部组件和内部组件对代理程序集可见；
*   Proxy：用公共方法间接访问main的内部；
*   消费者：可以访问代理修改主。

就我而言，我的 Main 程序集是一个可重复使用的组件，我有两种消费者。第一种只是在我的 Main 中使用可重用的组件，因此只能访问 Main 程序集的公共成员。第二个消费者是测试第一个提到的消费者组件的测试组件。该程序集通常希望模拟 Main 程序集中的一些内部，因此使用代理来访问这些内部。

这可能是一种开销，尤其是在生成程序集时，但它可以很好地分离关注点。

# codeigniter - 将 OAuth 2.0 与 CodeIgniter 集成

> ID：10911745
> 
> 赞同：11
> 
> 时间：2012-06-06T09:43:54.823
> 
> 标签：codeigniter, oauth-2.0

[https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server](https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server)

我在 GitHub 上找到了这个，但是实现的步骤对于将 OAuth 代码安装到 CodeIgniter 并没有真正的帮助，也没有找到任何关于如何做到这一点的真正好的文章

有没有人已经这样做了，可以帮助我进行设置？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-06T12:04:34.867

何黄，

oAuth 库并不是真正的自我解释。这就是我的工作方式：

**基本**

1.  阅读[oAuth 2.0 草案 23](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-23)足以了解 oAuth、角色和流程的基本概念。
2.  然后按照说明在 CodeIgniter 安装中从 alexbilbie 安装控制器和库
3.  安装表格并添加应用程序和一些角色（想想 Facebook 应用程序和您可以请求权限的角色）
4.  确保您在 oAuth_server.php 文件的底部某处创建了 validate_user 函数

**做一个请求**

现在您要作为客户端执行授权请求。[本节](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-23#section-4)记录了这几个简单的步骤。

编辑：Philsturgeon 的 oAuth 2.0 授权库可用于自动执行此操作。这里描述的是手动方式。

对于图书馆，这意味着要去：

/index.php/oauth?client_id=IN_YOUR_APPLICATION&redirect_uri=IN_YOUR_APPLICATION&response_type=code&scope=YOUR_ROLE

用您放入数据库中的数据填写变量。

调试它可能给出的一些错误..

如果一切顺利，您可以执行以下操作：

登录 -> 授权应用程序 -> 使用 ?code=XXXXXXX 看到 redirect_uri 页面

你会想要那个 XXXXXXX 代码

然后在 redirect_uri 上发布到 /index.php/oauth/access_token

有了这些变量（你现在都知道了）

*   client_id（在应用程序表中）
*   client_secret（在应用程序表中）
*   redirect_uri（在应用程序表中：要保存access_token的地方）
*   代码（XXXXXX）
*   grant_type (must be 'authorization_code') 你读过那部分就知道了！

该帖子返回一个包含 access_token（或错误）的 JSON 字符串。是的！

**下一步是什么**

将 access_token 保存在您的实际应用程序中并在请求中使用它。在您的资源服务器（可能是一个 API 和与我刚刚解释的授权服务器相同的 CodeIgniter 项目）上，您需要在返回结果之前验证 access_token。

这像这样工作：

```
$this->load->library('oauth_resource_server');
if (!$this->oauth_resource_server->has_scope(array('account.basic')))
{
    // Error logic here - "access token does not have correct permission"
    show_error('An access token is required to request this resource.');
}
else
{
    //GO RETURN RESULTS
} 
```

希望这能让你启动并运行！

PS：您需要建立一些管理区域来自己管理应用程序、会话和角色。

埃里克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T04:21:19.673

我使用了另一个非常适合与 codeigniter 一起使用的 spark 库。这是有关如何使用 spark 安装和使用它的好教程。 [codeigniter 的 Oauth 教程](http://classpattern.com/oauth-login.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:46:46.513

你可以试试这个火花 [http://getsparks.org/packages/oauth2/versions/HEAD/show](http://getsparks.org/packages/oauth2/versions/HEAD/show)

说明很清楚，实施起来应该不会太难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-19T10:38:30.517

在我的研究中，我遵循以下指南

1.  官方 Google OAuth[指南 #1](https://developers.google.com/api-client-library/php/start/get_started)，然后是[指南 #2](https://developers.google.com/api-client-library/php/auth/web-app)
2.  用于在[此处](http://www.formget.com/codeigniter-google-oauth-php/)登录网站的完整示例-已弃用
3.  遵循[Google OAuth 2.0 的 ThePHPLeague 指南](https://github.com/thephpleague/oauth2-google)

[准备好后，通过CodeIgniter 支持的这个库](https://github.com/google/google-api-php-client)下载并开始编码

# sql - SQL XQuery - 将整数 sql 变量值插入 xml 变量

> ID：10911754
> 
> 赞同：1
> 
> 时间：2012-06-06T09:44:28.713
> 
> 标签：sql, sql-server-2008, xquery-sql

我得到了这个查询：

```
DECLARE @UserId INT
DECLARE @StateChangeInformation XML

SET @UserId = 1
SET @StateChangeInformation = '<stateChangeInformation EnableOverrideMarking="1"></stateChangeInformation>'
SET @command = 'DECLARE @UserIdXml XML; SET @UserIdXml = ''<userID>{ sql:variable("@UserId") }</userID>''; SET @StateChangeInformation.modify(''insert sql:variable("@UserIdXml") into (/stateChangeInformation)[1]'')'

EXEC sp_executesql @stmt = @command,
                   @params = N'@StateChangeInformation xml out',
                   @StateChangeInformation= @StateChangeInformation OUTPUT

SELECT @StateChangeInformation 
```

我想要做的是将 XML 输出为：

```
<stateChangeInformation>
  <userID>1</userID>
</stateChangeInformation> 
```

目前，我得到以下输出：

```
<stateChangeInformation EnableOverrideMarking="1">
  <userID>"{ sql:variable("@UserId") }"</userID>
</stateChangeInformation> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:14:38.617

您需要将`@UserId`参数作为参数发送到动态 SQL 并使用连接来获取 XML 中的值。

```
DECLARE @command nvarchar(max)
DECLARE @UserId INT
DECLARE @StateChangeInformation XML

SET @UserId = 1
SET @StateChangeInformation = '<stateChangeInformation EnableOverrideMarking="1"></stateChangeInformation>'
SET @command = 'DECLARE @UserIdXml XML; 
                SET @UserIdXml = ''<userID>''+cast(@UserId as varchar(10))+''</userID>''; 
                SET @StateChangeInformation.modify(''insert sql:variable("@UserIdXml") into (/stateChangeInformation)[1]'')'

EXEC sp_executesql @stmt = @command,
                   @params = N'@StateChangeInformation xml out, @UserId int',
                   @StateChangeInformation= @StateChangeInformation OUTPUT, @UserId = @UserId

SELECT @StateChangeInformation 
```

# c# - 如何获取只能包含值的 XML 元素？

> ID：10911755
> 
> 赞同：1
> 
> 时间：2012-06-06T09:44:30.290
> 
> 标签：c#, winforms, .net-2.0

我正在制作一个小程序，据说可以获取所有只能包含一个值的 XML 元素。例如*（请参考下图），* `<Products>`虽然它是一个元素，但它不应该显示，因为它只是包含了所有其他可以包含值的元素，对于`<Description>` *（突出显示的那个，对不起我的英语，但希望你找我伙计们..）*

从下图中，我的程序应该只选择以下元素：

```
<Material_Number> 
```

`<Description>` *（2个元素，但不包括突出显示的一个）*

```
<Language>  
<Material_Type>  
<Base_Unit> 
```

我实际上得到的什么都没有...

![在此处输入图像描述](../Images/33f1ba2d431c715dab762ce0d8b9a9c5.png)

请检查我的代码并建议：

```
public MainForm()
        {
            InitializeComponent();

            XmlDataDocument xmldoc = new XmlDataDocument();
            XmlNode xmlnode;

            FileStream fs = new FileStream(@"C:\text.xml", FileMode.Open, FileAccess.Read);
            xmldoc.Load(fs);

            xmlnode = xmldoc.ChildNodes[1];
            GetElements(xmlnode);                       
        }

        void GetElements(XmlNode inXmlNode)
        {
            XmlNode xNode;
            XmlNodeList nodeList;

            int i = 0;

            if (inXmlNode.HasChildNodes)
            {
                nodeList = inXmlNode.ChildNodes;

                for (i = 0; i <= nodeList.Count - 1; i++)
                {
                    xNode = inXmlNode.ChildNodes[i];
                    string ss = xNode.Name;
                    GetElements(xNode);
                }
            }
            else
            {
                listBox1.Items.Add(inXmlNode.Name); 
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:59:39.230

1.  您的问题不太清楚，因为您正在谈论**只能**包含值的节点。由于在不知道底层架构的情况下不可能知道给定节点可以或不能包含什么，我将假设您实际上是指**仅**包含一个值的节点。
2.  (wlog)`<Language>`元素中的文本值是一个文本节点。因此，也对这些节点`inXmlNode.HasChildNodes`进行评估。`true`您必须检查是否有任何子节点的[`NodeType`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.nodetype.aspx)属性设置为`XmlNodeType.Element`，如果是，则跳过该元素。

请注意，所选响应仅在特定情况下有效。只要您的 Xml 文档包含类似的内容`<Language><x/></Language>`，该`<Language>`元素就会出现在列表框中，即使它没有文本内容。如果 Xml 文档包含`<Language><x/><y/><z/></Language>`,`<Language>`甚至会在结果集中出现 3 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:16:49.643

你可以稍微缩短你的代码，但你应该开始调用从第一个元素开始。

```
 GetElements(xmldoc.ChildNodes[0]); 
```

```
 void GetElements(XmlNode inXmlNode)
    {
        if(inXmlNode.HasChildNodes)
        {
            foreach (XmlNode childNode in inXmlNode.ChildNodes)
            {
                GetElements(childNode);
            }
        }
        else
        {
            listBox1.Items.Add(inXmlNode.ParentNode.Name);
        }
    } 
```

# php - 如何使用 PDO 在 PHP 中获取结果数组？

> ID：10911757
> 
> 赞同：44
> 
> 时间：2012-06-06T09:44:38.677
> 
> 标签：php, mysql, pdo

[在阅读了SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)攻击之后，我只是在编辑我的搜索脚本。我正在尝试使用[PDO](https://en.wikipedia.org/wiki/PHP#Development_and_community)而不是常规的 MySQL 连接从我的脚本中获得相同的功能。所以我一直在阅读其他关于 PDO 的帖子，但我不确定。这两个脚本会提供相同的功能吗？

使用 PDO：

```
$pdo = new PDO('mysql:host=$host; dbname=$database;', $user, $pass);
$stmt = $pdo->prepare('SELECT * FROM auction WHERE name = :name');
$stmt->bindParam(':name', $_GET['searchdivebay']);
$stmt->execute(array(':name' => $name); 
```

使用常规 MySQL：

```
$dbhost = @mysql_connect($host, $user, $pass) or die('Unable to connect to server');

@mysql_select_db('divebay') or die('Unable to select database');
$search = $_GET['searchdivebay'];
$query = trim($search);

$sql = "SELECT * FROM auction WHERE name LIKE '%" . $query . "%'";

if(!isset($query)){
    echo 'Your search was invalid';
    exit;
} //line 18

$result = mysql_query($trim);
$numrows = mysql_num_rows($result);
mysql_close($dbhost); 
```

我继续使用常规示例

```
while($i < $numrows){
    $row = mysql_fetch_array($result); 
```

从数据库中创建匹配结果的数组。如何使用 PDO 执行此操作？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-06T09:49:58.993

看看[`PDOStatement.fetchAll`](http://www.php.net/manual/en/pdostatement.fetchall.php)方法。您也可以[`fetch`](http://www.php.net/manual/en/pdostatement.fetch.php)在迭代器模式中使用。

的代码示例`fetchAll`，来自 PHP 文档：

```
<?php
$sth = $dbh->prepare("SELECT name, colour FROM fruit");
$sth->execute();

/* Fetch all of the remaining rows in the result set */
print("Fetch all of the remaining rows in the result set:\n");
$result = $sth->fetchAll(\PDO::FETCH_ASSOC);
print_r($result); 
```

结果：

```
Array
(
    [0] => Array
        (
            [NAME] => pear
            [COLOUR] => green
        )

    [1] => Array
        (
            [NAME] => watermelon
            [COLOUR] => pink
        )
) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-03-04T15:39:42.677

有三种方法可以获取 PDO 语句返回的多行。

最简单的一种就是迭代 PDO 语句本身：

```
$stmt = $pdo->prepare("SELECT * FROM auction WHERE name LIKE ?")
$stmt->execute(array("%$query%"));
// iterating over a statement
foreach($stmt as $row) {
    echo $row['name'];
} 
```

另一种是在熟悉的*while*语句中使用[fetch()方法获取行：](https://www.php.net/manual/en/pdostatement.fetch.php)

 *```
$stmt = $pdo->prepare("SELECT * FROM auction WHERE name LIKE ?")
$stmt->execute(array("%$query%"));
// using while
while($row = $stmt->fetch()) {
    echo $row['name'];
} 
```

但是对于现代 Web 应用程序，我们应该将数据库交互与输出分开，因此最方便的方法是使用[fetchAll()](https://www.php.net/manual/en/pdostatement.fetchall.php)方法一次获取所有行：

```
$stmt = $pdo->prepare("SELECT * FROM auction WHERE name LIKE ?")
$stmt->execute(array("%$query%"));
// fetching rows into array
$data = $stmt->fetchAll(); 
```

或者，如果您需要先预处理一些数据，请使用*while*循环并手动将数据收集到数组中：

```
$result = [];
$stmt = $pdo->prepare("SELECT * FROM auction WHERE name LIKE ?")
$stmt->execute(array("%$query%"));
// using while
while($row = $stmt->fetch()) {
    $result[] = [
        'newname' => $row['oldname'],
        // etc
    ];
} 
```

然后在模板中输出它们：

```
<ul>
<?php foreach($data as $row): ?>
    <li><?=$row['name']?></li>
<?php endforeach ?>
</ul> 
```

请注意，PDO 支持[许多复杂的获取模式，允许 fetchAll() 返回许多不同格式的数据](https://phpdelusions.net/pdo/fetch_modes)。*

# asp.net - 如何隐藏用户控件并删除它的空间

> ID：10911770
> 
> 赞同：6
> 
> 时间：2012-06-06T09:45:21.237
> 
> 标签：asp.net, css, vb.net, user-controls

我想隐藏asp.net中的用户控件，并删除它的空间..如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:47:40.407

```
yourUserControl.Visible=false; 
```

这不会呈现您的用户控件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T10:03:04.213

如果您需要稍后从 javascript 中使该控件可见，而不是在服务器端代码中，您可以使用以下方法隐藏它：

```
YourControl.Style.Add("display", "none"); 
```

但是，如果您不需要使其在 javascript 中可见，则只需将其 Visible 属性设置为 false。

如果您使用第一个选项，则会呈现控件但不显示并且不占用任何空间，但是如果您使用第二个选项，则不会呈现控件，因此无法使用 javascript 显示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T09:53:37.770

如果没有更多细节，我会说有两种选择：

1) 添加样式属性 style="display:none"

```
<asp:TextBox runat="server" id="MyTextBox" style="display:none" /> 
```

此选项允许文本框存在于页面上而不可见或占用空间。

2）设置可见=“假”

```
<asp:TextBox runat="server" id="MyTextBox" visible="false" /> 
```

此选项可防止将其呈现到页面。根据控件的不同，这可能会产生许多其他副作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T09:48:20.347

设置包含用户控件的元素的 style="display:none"。

# symfony1 - 将 symfony 从一台服务器迁移到另一台服务器

> ID：10911772
> 
> 赞同：0
> 
> 时间：2012-06-06T09:45:34.197
> 
> 标签：symfony1, migrate

我想将 symfony 1.4.18 从服务器 A 移动到服务器 B

*   服务器根目录是`httpdocs`
*   服务器 B 根目录是`public_html`

两台服务器都是共享主机。

1.  我下载了服务器 A httpdocs 目录中的所有文件
2.  从服务器 A phpmyadmin 导出数据库
3.  将所有源文件上传到服务器B根目录，即public_html下
4.  在服务器 B 中创建一个数据库和一个新的数据库用户，将数据库导入这个新数据库
5.  更改`config\databases.yml`为新的数据库信息

我也尝试过改变`config\vhost.conf`

```
php_admin_value open_basedir "/var/www/vhosts/www.oldsite.com/httpdocs:/tmp:/usr/local/php:/usr/share/pear" 
```

进入

```
php_admin_value open_basedir "/var/www/vhosts/www.newsite.com/public_html:/tmp:/usr/local/php:/usr/share/pear" 
```

毕竟，我检查了新服务器 B：它只显示目录中的所有文件，但不显示网站。

还有什么我需要改变的吗？

# c# - 如果数据库没有链接表，如何在 Entity Framework 中创建多对多关系？

> ID：10911774
> 
> 赞同：1
> 
> 时间：2012-06-06T09:45:35.853
> 
> 标签：c#, entity-framework, data-binding, many-to-many

我正在使用 VS 2010 实体框架设计器来修改一些从数据库自动生成的实体。

数据库结构由我正在为其构建 UI 的产品定义，因此我无法对其进行修改。

该数据库具有多对多关系的表，这些表完全基于两个表上非键列中的公共值。

*   表 1**用户**有一个 id 列***userId***和另一个名为***userProfile***的列。
*   表 2 **SecurityProfile**有一个 id 列***securityProfileId***并且还有一个列***userProfile***。

换句话说，用户配置文件只是用户到 SecurityProfiles 的映射的名称。

该向导为 Users 和 SecurityProfile 表创建了实体。我创建了一个名为 UserProfile 的新实体，它有一个关键字段：**userProfile**。

我创建了从 UserProfile 到 User 以及从 UserProfile 到 SecurityProfile 的一对多关联。这一切都很好，只是 UserProfile 实体没有表映射，所以它不会编译。

如何在实体框架中创建此关联？

**更新：**

如果无法使用 EF（如第一个答案所建议的那样），是否可以手动创建一个非绑定实体，我可以使用它来链接这两个实体，以便我公开一个至少更容易一点的对象模型导航？

即，我将使**User**和**SecurityProfile**实体抽象并手动定义这些扩展，并使用指向我手动创建的 UserProfile 实体的适当属性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:05:45.130

你不会。EF 无法处理数据库中不存在的多对多关联。EF 要求与数据库相同的引用完整性——在这种情况下，它要求连接表存在并映射到图中使用的关联。

# jquery-mobile - 带有 jQ uery mobile 的非 ajax 标签栏

> ID：10911777
> 
> 赞同：0
> 
> 时间：2012-06-06T09:45:48.777
> 
> 标签：jquery-mobile, tabs

我正在尝试创建一个带有两个选项卡的页面。我在页脚区域放置了一个导航栏，通过单击导航栏上的按钮，我可以在页面之间导航，但这对于我们的场景来说远非最佳。如果用户多次在选项卡之间切换，浏览器会保存这些导航活动的所有历史记录，并且用户必须多次点击返回按钮才能返回主屏幕。是的，我知道我可以将后退按钮放在标题中，然后单击一下即可将用户返回到主屏幕，但现在处理后退按钮问题更为重要。

有没有办法创建一个不会异步切换页面的标签栏？我只需要一个导航栏，当单击其中一个按钮时隐藏或显示内容。或者我应该手动隐藏或显示内部内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:28:45.257

如果您不使用多页模板，则应该使用该`data-ajax='false'`属性。这将阻止 JQM 将其放入您正在经历的历史记录中。

另外，请查看这篇类似的帖子，了解如何阻止将页面添加到历史记录中：[如何使用 jQuery Mobile 防止链接添加到历史记录堆栈](https://stackoverflow.com/questions/6819027/how-do-i-prevent-a-link-from-adding-to-the-history-stack-with-jquery-mobile)- 那里有有用的答案（虽然 OP 不接受）。

干杯!

# ruby - 循环遍历整数中的位，红宝石

> ID：10911780
> 
> 赞同：12
> 
> 时间：2012-06-06T09:45:55.977
> 
> 标签：ruby, loops, integer, bit

我正在制作一个程序，其中一个问题是我需要对某些整数中的位模式进行一些分析。

因此，我希望能够做这样的事情：

```
#Does **NOT** work:
num.each_bit do |i|
   #do something with i
end 
```

通过执行以下操作，我能够制作出有用的东西：

```
num.to_s(2).each_char do |c|
   #do something with c as a char
end 
```

然而，这没有我想要的**性能。**

我发现你可以这样做：

```
0.upto(num/2) do |i|
   #do something with n[i]
end 
```

这比`each_char`方法的性能更差

这个循环将被执行数百万次或更多，所以我希望它尽可能快。

供参考，这里是完整的功能

```
@@aHashMap = Hash.new(-1)

#The method finds the length of the longes continuous chain of ones, minus one 
#(101110 = 2, 11 = 1, 101010101 = 0, 10111110 = 4)

def afunc(n) 
if @@aHashMap[n] != -1
    return @@aHashMap[n]
end

num = 0
tempnum = 0
prev = false

(n.to_s(2)).each_char do |i|
    if i
        if prev
            tempnum += 1
            if tempnum > num
                num = tempnum
            end
        else
            prev = true
        end
    else
        prev = false
        tempnum = 0
    end
end

@@aHashMap[n] = num
return num
end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T21:23:36.060

要确定连续 1 的最长序列的长度，这更有​​效：

```
def longest_one_chain(n)
  c = 0
  while n != 0
    n &= n >> 1
    c += 1
  end
  c
end 
```

该方法只是计算您可以“按位与”将数字与自身向右移动 1 位直到它为零的次数。

例子：

```
 ______ <-- longest chain
    01011011100001111110011110101010 c=0
AND  0101101110000111111001111010101
        1001100000111110001110000000 c=1, 1’s deleted
AND      100110000011111000111000000
            100000011110000110000000 c=2, 11’s deleted
AND          10000001111000011000000
                    1110000010000000 c=3, 111’s deleted
AND                  111000001000000
                     110000000000000 c=4, 1111’s deleted
AND                   11000000000000
                      10000000000000 c=5, 11111’s deleted
AND                    1000000000000
                                   0 c=6, 111111’s deleted 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T10:42:04.080

Ruby 可能不是您项目的好选择。ruby 的优势不在于它的性能，而在于它可以让您执行以下操作：

```
n.to_s(2).scan(/1+/).sort.last.length - 1 
```

而不是编写堆积如山的代码。如果您不介意编写复杂的代码（您似乎不介意），那么几乎任何其他语言都可能表现得更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T10:19:28.480

请注意，o 和“0”在 ruby​​ 中都有一个布尔值 true，因此“ `if i`”不会给出您想要的结果。

将每个数字转换为字符串当然是应该避免的。

`Fixnum`有一种`[]`访问数字位的方法，因此有机会更快。

如果你试过这个

```
0.upto(num/2) do |i|
   #do something with n[i]
end 
```

then`num/2`可能太大了，所以你循环太频繁了。

对于 32 位整数，您应该使用

```
0.upto(31) do |i|
   if n[i] == 1
     ...
   end
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-06T14:59:42.597

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T16:14:30.213

有时使用字符串是最明显的方法，性能尚可：

```
def oneseq(n)
  n.to_s(2).split(/0+/).sort_by(&:length).last.to_s.length
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-06T14:48:18.897

如果您正在寻找性能，那么构建查找表可能是最高效的方式。特别是如果您在一个紧密的循环中执行这些操作：

```
class BitCounter
    def initialize
        @lookup_table = (0..65535).map { |d| count_bits(d) }
    end

    def count(val)
        a,b,c = @lookup_table[val & 65535]
        d,e,f = @lookup_table[val >> 16]
        [a,b,c+d,e,f].max
    end

private

    def count_bits(val)
        lsb = lsb_bits(val)
        msb = msb_bits(val)
        [lsb, inner_bits(val, lsb, msb), msb]
    end

    def lsb_bits(val)
        len = 0
        while (val & 1 == 1) do
            val >>= 1
            len += 1
        end
        len
    end

    def msb_bits(val)
        len = 0
        while (val & (1<<15) == (1<<15)) do
            val <<= 1
            len += 1
        end
        len
    end

    def inner_bits(val, lsb, msb)
        lens = []
        ndx = lsb

        len = 0
        (lsb+1..(15-msb)).each do |x|
            if ((val & (1<<x)) == 0)
                if(len > 0)
                    lens << len
                    len = 0
                end
            else
                len += 1
            end
        end
        lens.max || 0
    end
end 
```

然后是一个例子：

```
counter = BitCounter.new
p counter.count 0b01011011100001111110011110101010  // 6 
```

这基本上为所有 16 位值创建了一个循环表，然后从这些缓存值中计算出最大的结果。

您甚至可以`n.to_s(2).scan(/1+/).sort.last.length - 1`在表初始化中结合更具表现力的形式而不是按位逻辑，因为它不再是瓶颈点——尽管我会坚持按位数学只是为了表达清晰而不是字符串解析。每次查找只需 2 次表格查找，一次加法和一次`max`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-08T06:08:31.153

**算法**

人们可能会考虑使用二分搜索。我已经实现了以下算法来确定给定非负整数中最长 1 位字符串的长度`n`。计算复杂度为 O(· `n`)，但对于许多值，`n`它将接近 O(log [2] ( · `n`))。

该算法的步骤如下，但许多读者发现它们更容易通过首先阅读以下部分（“插图”）来理解。

1.  设置`longest`为`0`。
2.  设置等于( )`len`中的位数。`n``len = n.bit_length`
3.  如果`len <= 2`，则返回答案（`0`，`1`或`2`）。
4.  确定(或)`mid`中间位的索引。`n``mid = len/2``mid = len >> 1`
5.  设置`ri = mid+1`和`li = mid-1`。
6.  如果中间位 ( `n[mid]`) 的值为零，则转到步骤 10。
7.  （`n[mid] = 1`达到这一步。）确定最大索引`li >= mid`和最小索引`ri <= mid`，使得`n[i] = 1`所有`ri <= i <= li`.
8.  设置和。`longest = [longest, ri-li+1].max`_`li += 1``ri -= 1`
9.  如果`li == len`转到步骤 10；否则设置`ln`等于​​由索引`li`（最低有效）到`len-1`（最高有效）处的位组成的数量。递归设置为`n`并`ln`转到步骤 2。这将返回数字`ln`( `cand`) 中最长的 1 位字符串。设置`longest = [longest, cand].max`。
10.  如果`ri < 0`进行步骤11；否则设置`rn`等于​​由索引`0`（最低有效）到`ri`（最高有效）处的位组成的数量。递归设置为`n`并`rn`转到第 2 步。这将返回第一个数字中最长的 1 位字符串`rn (`candlonglong `). Set`= [longest, cand].max`。
11.  `longest`在递归中返回。

**插图**

认为

```
n = 0b1010011011101011110
  #=> 341854 
```

然后

```
len = n.bit_length
  #=> 19
mid = len >> 1
  #=> 9
n[mid]
  #=> 1
longest = 0 
```

我们可以`n`如下图

```
101001101 1 101011110 
```

中间位`1`突出的地方。因为它是 a `1`，所以我们向左和向右寻找 1 的序列。我们得到以下。

```
10100110 111 01011110 
```

当我们找到三个 1 时，我们更新`longest`.

```
longest = [longest, 3].max
  #=> [0, 3].max => 3 
```

我们现在必须检查`0b10100110`和`0b1011110`（第二个数字中的前导零丢失）。

对于左边的数字，我们计算如下。

```
n = 0b10100110
len = n.bit_length
  #=> 8
mid = len >> 1
  #=> 4
n[mid]
  #=> 0 
```

所以我们有

```
101 0 0110 
```

（注意`n[0]`是最不重要的位）。我们可以排除`0b101`和`0b110`，因为两者都有`3`位，不超过 的当前值`longest`，即`3`。

现在我们考虑右半部分，

```
n = 0b1011110
len = n.bit_length
  #=> 7
mid = len >> 1
  #=> 3
n[mid]
  #=>1 
```

所以我们有

```
101 1 110 
```

作为`n[mid] #=> 1`，我们左右查找 1 的字符串并获得

```
10 1111 0 
```

由于我们发现了一个`4`1 的刺，我们设置

```
longest = [longest, 4].max
  #=> [3, 4].max = 4 
```

`2`最后我们看到左边 ( ) 和右边 ( )的位数`1`都小于`3`，所以我们完成了，返回`longest #=> 4`。（OP 实际上想要`longest - 1 #=> 3`，我们认为这是一个侧面计算。）

**代码**

```
def longest_run(n, longest=0)
  len = n.bit_length
  return [longest, (n & 1) + (n >> 1)].max if len <= 2
  mid = len >> 1
  ri = mid-1
  li = mid+1
  if n[mid] == 1
    until n[ri] == 0
      ri -= 1
    end
    until n[li] == 0
      li += 1
    end
    cand = li-ri-1
    longest = cand if cand > longest
  end
  if ri >= 0
    shift = ri+1
    m = n ^ ((n >> shift) << shift)
    if m.bit_length > longest 
      cand = longest_run(m, longest) 
      longest = cand if cand > longest
    end
  end
  if li <= len - 1
    m = n >> li
    if m.bit_length > longest 
      cand = longest_run(m, longest) 
      longest = cand if cand > longest
    end
  end
  longest
end 
```

**例子**

```
longest_run 341854
  #=> 4
longest_run 0b1011110011111000000111100011101111011110
  #=> 5
longest_run 0b101111001111100000011110001110111111011111
  #=> 6
longest_run 2**500_000-1
  #=> 500000
longest_run ("10"*100_000).to_i(2)
  #=> 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-08T20:32:59.023

这里有几个更直接的方法（尽管我希望@Steven 的回答和我的其他回答会更有效）。

**#1**

```
def max_string_of_ones(n)
  max_length = 0
  cand = 0
  (0..n.bit_length).reduce(0) do |max_length, i|
    if n[i] == 1
      cand += 1
    else
      max_length = cand if cand > max_length
      cand = 0
    end
    max_length
  end
end 
```

注意`n[n.bit_length] #=> 0`。

**#2**

第二种方法使用 Ruby 的[触发器操作符](https://blog.newrelic.com/engineering/weird-ruby-part-3-fun-flip-flop-phenom/)。另外，我想，“如果`Integer`有一个`each_bit`返回枚举数的方法不是很方便吗？”，所以我添加了一个。

```
class Integer
  def each_bit
    Enumerator.new do |yielder|
      if block_given?      
        bit_length.times { |i| yielder << yield(self[i]) }
      else
        bit_length.times { |i| yielder << self[i] }
      end
    end
  end
end

def max_string_of_ones(n)
  n.each_bit.slice_before { |b| true if b==0 .. b==1 }.max_by(&:size).size
end

max_string_of_ones(0b1100011101111011100)
  #=> 4 
```

请注意以下中间计算。

```
def max_string_of_ones(n)
  n.each_bit.slice_before { |b| true if b==0 .. b==1 }
end

enum = max_string_of_ones(0b1100011101111011100)
  #=> #<Enumerator: #<Enumerator::Generator:0x00000000019a2f80>:each>
enum.to_a
  #=> [[0], [0], [1, 1, 1], [0], [1, 1, 1, 1], [0],
  #    [1, 1, 1], [0], [0], [0], [1, 1]] 
```

# arrays - rJava 数组转换

> ID：10911783
> 
> 赞同：2
> 
> 时间：2012-06-06T09:46:07.807
> 
> 标签：arrays, rjava

我在转换和获取类型时遇到了麻烦。我尝试按照[http://www.rforge.net/rJava/index.html](http://www.rforge.net/rJava/index.html)中给出的示例进行操作，但无法达到预期的效果。

我想要做的是在给定一个返回整数数组的双精度数组的情况下调用一个 java 方法。例如

```
public class SimpleDemo {

public int[] getResult(double[][] inputmatrix) {
    int[] result = new int[inputmatrix.length];
    for (int i = 0; i < result.length; i++) {
        result[i] = i;
    }
    return(result);
}

} 
```

然后在 RI 调用中

```
.jinit(classpath=<directory of the file>,force.init=T)
simple <- .jnew("SimpleDemo")
.jcall(simple,"[I","getResult",.jarray(someMatrix)) 
```

我得到的是

```
Error in .jcall(simple, "[I", "getResult", .jarray(someMatrix)) : 
method getResult with signature ([D)[I not found 
```

我的第一个问题是，我怎样才能让它发挥作用？

非常感谢！

# cross-browser - 遇到地理定位问题

> ID：10911784
> 
> 赞同：1
> 
> 时间：2012-06-06T09:46:11.123
> 
> 标签：cross-browser, geolocation

我遵循代码来跟踪用户的地理位置

```
if (navigator.geolocation){

   navigator.geolocation.getCurrentPosition(
       function(loc) {
            alert(loc.coords.latitude + ',' + loc.coords.longitude);   
          }, 
      function(error) {
            switch(error.code) 
        {
            case error.TIMEOUT:
                alert('timeout');
                break;
            case error.POSITION_UNAVAILABLE:
                alert('postion unabliable');   
                break;
            case error.PERMISSION_DENIED:
                alert('permission denied');
                break;
            case error.UNKNOWN_ERROR:
                alert('caught unknown error');  
                break;
            default:
               alert('default block');
        }
             },{timeout:10000});
     } else {
          alert('browser not support to track location');
            } 
```

它工作正常，但我有一些问题取决于浏览器

Chrome：当用户关闭弹出窗口时，需要向用户显示一些消息，为此我该怎么办？火狐：1）火狐需要同样的东西。2）如果用户允许共享位置，则位置坐标按代码显示，如果用户刷新浏览器弹出窗口正在显示，再次用户允许共享位置则位置坐标不显示，实际上位置坐标必须按我的代码。3）如果用户选择“从不共享位置”选项将面临同样的问题 4）如果用户选择“不现在”选项，我需要显示警报消息，为此我该怎么办？

主要是，当用户关闭弹出窗口时，即使找到了位置，我也需要执行一些任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:55:38.537

一定要处理这种情况，无论何时`script`加载，您都需要执行默认功能，即使用户关闭弹出窗口，默认功能仍然有效，如果用户允许跟踪位置，则基于用户位置该功能将起作用。如果您遵循这种方法，它在所有情况下都可以使用。我希望它可能会有所帮助。

# java - python中是否有类似于osgi试图在java中解决的要求？

> ID：10911789
> 
> 赞同：4
> 
> 时间：2012-06-06T09:46:25.820
> 
> 标签：java, python, osgi

在试图了解 OSGI 在 java 生态系统中解决了什么问题时，我发现自己想知道 python 中是否也存在这样的问题？如果是，它是如何解决的，如果不是，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T08:59:18.010

OSGi 的目的是编写（可重用）活动模块，这些模块可以在运行时相互发现，以便这些模块可以决定协作。主要机制是充当对象的简单代理的服务注册表。

JavaScript 中也存在类似的机制，其导出全局变量。然而，与 JavaScript 模块系统不同的是，OSGi 服务注册表是动态的。

我不知道 Python 中有这样的事情。我认为对 OSGi 之类的东西的需求出现在由更大或更多样化的团队制作的大型程序中。Java 的静态类型更适合的领域。尤其是因为 Java 非常注重基于接口的设计；在 Java/OSGi 的生态系统中，您会发现许多规范和实际上的多种实现。在这个世界上，将实现与规范相匹配的代理很重要。

我认为 Python 和 Ruby 以及其他语言将从 OSGi 这样的服务代理中受益匪浅。

# asp.net - RadGrid 就地编辑 - 触发更新命令时没有值

> ID：10911794
> 
> 赞同：1
> 
> 时间：2012-06-06T09:46:42.317
> 
> 标签：asp.net, telerik, telerik-grid

我需要在行编辑中使用 Telerik RadGrid 创建类似 Excel 的控件 - 列和行的动态大小。我的问题是，当我尝试在已编辑的行上调用更新命令作为回报时，它只有旧值。

我的 RadGrid 控件：

```
<telerik:RadGrid runat="server" ID="rgDataSheet" AutoGenerateColumns="true" AllowSorting="false" AllowAutomaticDeletes="false" AllowAutomaticInserts="false" AllowAutomaticUpdates="false"
    AllowMultiRowEdit="true" AllowPaging="false" EnableViewState="false" OnNeedDataSource="HandlerGridOnNeedDataSource"
    OnItemUpdated="GridItemUpdated" OnInsertCommand="GridInsertCommand" OnUpdateCommand="GridUpdateCommand"
    OnCancelCommand="GridCancelCommand">
    <MasterTableView runat="server" EditMode="InPlace" NoMasterRecordsText="brak rekordów"
        ShowHeadersWhenNoRecords="true" AllowCustomSorting="false" EnableColumnsViewState="false"
        AllowSorting="false" AllowFilteringByColumn="false" TableLayout="Fixed">
        <Columns>
            <telerik:GridEditCommandColumn UpdateText="Update" EditText="Edit" CancelText="Cancel" />
        </Columns>
    </MasterTableView>
    <ClientSettings>
        <ClientEvents OnRowClick="RowClick" />
    </ClientSettings>
</telerik:RadGrid> 
```

我的活动：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            List<string> datakeynames = new List<string>();

            dataSet = new DataSet();
            dataSet.Tables.Add(new DataTable());
            dataSet.Tables[0].Columns.Add("col0"); 
            dataSet.Tables[0].Columns.Add("col1"); 
            dataSet.Tables[0].Columns.Add("col2"); 
            dataSet.Tables[0].Columns.Add("col3"); 
            dataSet.Tables[0].Columns.Add("col4"); 
            dataSet.Tables[0].Columns.Add("col5"); 

            dataSet.Tables[0].Rows.Add(new object[] { "1", "11", "a", "q", "z", "n" });
            dataSet.Tables[0].Rows.Add(new object[] { "2", "12", "s", "w", "x", "m" });
            dataSet.Tables[0].Rows.Add(new object[] { "3", "13", "d", "e", "c", "," });
            dataSet.Tables[0].Rows.Add(new object[] { "4", "14", "f", "r", "v", "h" });
            dataSet.Tables[0].Rows.Add(new object[] { "5", "15", "g", "t", "b", "y" });
            ViewState["dataSet"] = dataSet;
            rgDataSheet.MasterTableView.DataKeyNames = new string[] { "col0", "col1", "col2", "col3", "col4", "col5" };
        }
        else
        {
            rgDataSheet.Rebind();
        }
    }

protected void HandlerGridOnNeedDataSource(object sender, GridNeedDataSourceEventArgs e)
    {
        dataSet = (DataSet)ViewState["dataSet"];
        ((RadGrid)sender).DataSource = dataSet;
    }

protected void GridUpdateCommand(object source, GridCommandEventArgs e)
    {
        //here I try access changed values, in example -
        //GridEditableItem editedItem = e.Item as GridEditableItem;
        //editedItem.OwnerTableView.DataKeyValues -> it contains always old values
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:50:01.110

请从您的 page_load 事件中删除以下代码。不需要 Radgrid 自动管理这个东西。了解更多信息。请检查以下链接。[http://www.telerik.com/help/aspnet-ajax/grid-advanced-data-binding.html](http://www.telerik.com/help/aspnet-ajax/grid-advanced-data-binding.html)

```
else
    {
        rgDataSheet.Rebind();
    } 
```

# javascript - 如何限制文本字段只输入数字

> ID：10911797
> 
> 赞同：0
> 
> 时间：2012-06-06T09:46:50.383
> 
> 标签：javascript, jquery, keyup

我正在尝试创建一个文本字段来输入仅接受数字的日期。如果任何人输入任何其他字符，则无需在文本字段中显示，并且光标需要保持在同一位置（无需移动到下一个字符位置）。如果输入的值是数字，则需要在文本字段中显示并需要将光标移动到下一级。所以最后文本字段只包含数字。

我正在使用以下代码，

```
$("#date").keyup(function(event){

        //var c=(event).keyCode;
        var c= String.fromCharCode(event.keyCode);
        var cval = $(this).val();

        alert("Characters="+c);
        if(isNumber(c))
            $(this).val(cval+c);

        } 
```

高级谢谢，

威软

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:47:36.817

在 HTML5 中，您可以将输入`type`用作`number`.

你可以这样做：

```
$('#date').keyup(function () { 
    this.value = this.value.replace(/[^0-9\.]/g,'');
}); 
```

我认为你需要**[jQuery Input Mask Plugin](http://digitalbush.com/projects/masked-input-plugin/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:55:33.530

只有当焦点位于请求的文本字段上时，您才应该运行您的函数

# c# - 折叠文本文件中的控制字符（伪控制台）

> ID：10911801
> 
> 赞同：0
> 
> 时间：2012-06-06T09:47:04.393
> 
> 标签：c#, .net, python, bash

我有一个文本文件，它包含各种控制字符，包括退格`\b`和回车`\r`。例如

```
100\r101\r102\r103
£\b$\b% 
```

我想“折叠”这些控制字符，让我看到可以在理解这些控制字符的控制台中看到的文本：

> 103
> %

我不知道这叫什么。如果它有名字，请分享它，以便我搜索它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-06T09:51:24.687

我想你可以简单地在它上面做一个循环，然后用控制台可以理解的字符替换字符（退格 \b 和回车 \r）

# jquery - 图像调整大小以适合屏幕 jquery mobile

> ID：10911805
> 
> 赞同：3
> 
> 时间：2012-06-06T09:47:21.957
> 
> 标签：jquery, css, jquery-mobile

是否可以从屏幕任何位置的图像（正在调整大小）单击图像以使用 jquery mobile 放大移动设备的整个屏幕？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:30:12.263

我对 JQuery-mobile 不太熟悉，但是您可以使用 onClick jquery 事件将图像的宽度更改为 100%，将高度更改为自动（反之亦然），将位置更改为绝对，并将 z-index 更改为 500 ，那应该给你你想要的。

# tomcat - Tomcat 使用项目目录作为相对路径

> ID：10911807
> 
> 赞同：0
> 
> 时间：2012-06-06T09:47:25.483
> 
> 标签：tomcat, path, jvm

我有一个 GWT Web 应用程序，它在磁盘上的相对目录“缓存”下创建一个缓存。在我在 Eclipse 中的 JUnit 测试中它可以工作，但是当我在 Tomcat 中部署它时，程序*仍然*尝试在`/home/username/projects/myproject/cache`（重命名的真实路径）中创建文件，而不是`/var/lib/tomcat7/webapps/myproject/cache`因为它在那里没有文件写访问权限，所以它崩溃了。创建缓存的代码是一个外部库，因此它甚至不能被硬编码。

它可能是一个符号链接吗？或者Tomcat和Eclipse可以共享一个JVM吗？这个错误让我发疯。

**错误信息**

```
org.h2.jdbc.JdbcSQLException: Fehler beim Erzeugen der Datei "/home/username/projects/myproject/cache"
Error while creating file "/home/username/projects/myproject/cache" [90062-143]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:327)
    at org.h2.message.DbException.get(DbException.java:167)
    at org.h2.message.DbException.get(DbException.java:144)
    at org.h2.store.fs.FileSystemDisk.createDirs(FileSystemDisk.java:368)
    at org.h2.store.FileLock.lockFile(FileLock.java:328)
    at org.h2.store.FileLock.lock(FileLock.java:134)
    at org.h2.engine.Database.open(Database.java:525)
    at org.h2.engine.Database.openDatabase(Database.java:208)
    at org.h2.engine.Database.<init>(Database.java:203)
    at org.h2.engine.Engine.openSession(Engine.java:53)
    at org.h2.engine.Engine.openSession(Engine.java:147)
    at org.h2.engine.Engine.createSessionAndValidate(Engine.java:126)
    at org.h2.engine.Engine.createSession(Engine.java:109)
    at org.h2.engine.Engine.createSession(Engine.java:27)
    at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:289)
    at org.h2.engine.SessionRemote.createSession(SessionRemote.java:265)
    at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:110)
    at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:94)
    at org.h2.Driver.connect(Driver.java:73)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221) 
```

[...]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:22:16.333

请试试

```
String path = new File(servletContext.getRealPath("/cache")).getAbsolutePath() 
```

# html - 如何使用文本元素从下到上显示 SVG1.1 中的文本？

> ID：10911818
> 
> 赞同：4
> 
> 时间：2012-06-06T09:47:41.020
> 
> 标签：html, svg

我正在尝试从下到上以垂直方式显示文本。我正在使用文本元素在 SVG1.1 中呈现文本。

一种方法是使用转换和旋转文本是否有更好的方法可以做到这一点，因为我什至尝试过写模式：tb 或 bt 但在 tb 的情况下它从上到下正确渲染但在 bt 的情况下它是不做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:27:48.147

[在SVG 1.1](http://www.w3.org/TR/SVG11/text.html#SettingInlineProgressionDirection)或[CSS3 Writing Modes](http://www.w3.org/TR/css3-writing-modes/)中没有自下而上的文本渲染，这是 CSS3 Writing Modes 的[摘要中](http://www.w3.org/TR/css3-writing-modes/#abstract)引用的原因。

正如您已经建议的那样，现在执行此操作的方法是使用转换。您也可以使用[glyph-orientation-* 属性](http://www.w3.org/TR/SVG11/text.html#GlyphOrientation)或[`rotate`属性](http://www.w3.org/TR/SVG11/text.html#TextElementRotateAttribute)。

请注意，我不确定现阶段浏览器对字形方向属性的支持情况如何，并且它们在 CSS3 书写模式中基本上已被弃用（由新的关键字/属性替换）。

# windows - 访问时自动唤醒 NAS

> ID：10911825
> 
> 赞同：5
> 
> 时间：2012-06-06T09:48:18.960
> 
> 标签：windows, nas, ubuntu-server, dd-wrt

当用户访问 NAS 时，我试图让我的 NAS 服务器从 S3 睡眠状态唤醒。我想这样做以增加服务器的寿命，并限制其电源使用。我见过有人寻求类似的建议，但我发现没有一个提供可靠的解决方案，大多数线程都没有得到答复。

因此，快速详细说明我的问题：在我的家里，我有一个定制的，来自一台旧 PC，NAS 服务器，运行 Ubuntu 服务器，主要存储媒体和文档。此服务器当前设置为在预定义的非活动期后休眠。目前可以通过 WOL 魔术包将 NAS 带出 S3 状态。我想要实现的是，当用户从他们的 PC 访问其中一个共享时，这个魔术包会自动发送到服务器。用户主要运行 Windows 7。我不确定这是否完全流行，但我有一个运行 DD-WRT 的 Linksys WRT54G 作为我的家庭路由器/DHCP/DNS。

在我的研究过程中，我遇到了许多文章，它们只是在定时循环中自动唤醒服务器，没有真正的智能。下面给出的文章似乎做了我想要的：

[http://wdtvhd.com/index.php?showtopic=7908](http://wdtvhd.com/index.php?showtopic=7908)

给出了一个脚本，该脚本试图通过在进行查询时使用 DD-WRT 路由器发送唤醒局域网数据包来解决此问题。这似乎是解决此问题的好方法，但是我无法使链接中给出的脚本正确运行。

我认为这涵盖了我问题的大部分方面。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:34:50.637

只是想我会发布我对上述问题的最终解决方案。为了解决这个问题，我编写了一个自定义脚本，该脚本在我的 dd-wrt ​​路由器上以定时 cron 作业运行。当这个脚本运行它访问文件

```
\proc\net\arp 
```

在该文件中存储了所有当前租用的 IP 地址和相应的 MAC 地址的记录。因此，我的脚本将该文件中存储的 mac 地址与我家庭网络上 PC 的预定义 mac 地址列表进行了比较。该列表仅包含我希望能够访问 NAS 服务器的 PC。如果发现其中一台 PC 具有活动租约，则路由器会发送 LAN 唤醒魔术包。然后唤醒服务器。那时我认为我已经实现了我的目标，因为服务器与网络上的任何 PC 都打开了，等待的时间不会太长。但是，在完成此操作后，我发现我的服务器定时睡眠将每 30 分钟左右启动一次，并且使服务器睡眠仅在几秒钟后再次被唤醒。

所以为了解决这个问题，我只是在我的条件语句中添加了另一个条件，如果所需的 PC 都没有活动租约，它将使服务器休眠。为此，我使用了 SSH 和 DD-WRT 的内置 dropbear ssh 功能来休眠服务器。下面是脚本

```
#!/bin/ash

NAS="MA:CA:DD:RE:SS:00"

PC="MA:CA:DD:RE:SS:00"

varP='grep -o $PC /proc/net/arp'

while true
do
    echo 'Entered Loop'
    if ping -c 1 IPADDRESSOFNAS > /dev/null; then
            echo 'NAS is Already ON'

    if [[ "$varP" != "MA:CA:DD:RE:SS:00" ]]; then
                    echo 'All Hosts Offline'
                    echo IPADDRESSOFNAS  ssh-rsa NASPUPLICKEY
                    #HOME=/temp/root/
                    DROPBEAR_PASSWORD='NASPASSWORD' ssh root@IPADDRESSOFNAS pm-suspend &
            fi
            exit
    fi

    if [[ "$varP" == "MA:CA:DD:RE:SS:00" ]]; then
            echo 'waking from lan'
            /usr/sbin/wol -i BROADCASTADDRESSOFNETORK -p 9 MA:CA:DD:RE:SS:00
            /usr/sbin/wol -i BROADCASTADDRESSOFNETORK  -p 9 MA:CA:DD:RE:SS:00
            exit
    fi
    exit
done 
```

免责声明：代码按原样提供。我知道这并不漂亮，也不是最好的解决方案。但这对我有用，这就是我真正需要的。

希望有人觉得这很有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:54:36.810

我从 WD 检查了我的 NAS，我可以告诉你，他们将内存驱动器用于 /tmp、/var 目录。

写入内存的每个日志也是如此，并且硬盘驱动器不必在线。希望对您有所帮助。

如果有人想访问硬盘，系统会自动启动您的硬盘。所以你会得到你想要的，除了系统总是在线的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T13:06:08.047

我通过@Rabid 对脚本进行了一些更改，以添加对多台PC 的支持。

它还检查在 ARP 中找到的条目是否将其标志设置为 0x2 ( =~ active )，因为对我来说，在 PC 离线后，ARP 条目将保持列出太长时间。

```
#!/bin/bash
# This script is made to be run on an DD- / Open-WRT device to automatically wake a NAS 
# server if client PCs are online

# Settings

# Addresses of NAS that gets woken / put to sleep
MACofNAS="MA:CA:DD:RE:SS:00"
IPofNAS="192.168.2.1"
BroadcastAddress="192.168.2.255"
WOLPort=9

# Location of SSH Private Key on WRT (if used for login)
SSHPrivateKeyFile=~/.ssh/id_rsa

# MAC addresses of PCs of which the online status will be checked
PCs=(
    "MA:CA:DD:RE:SS:00" # PC1
    "MA:CA:DD:RE:SS:00" # PC2
    "MA:CA:DD:RE:SS:00" # PC3
    "MA:CA:DD:RE:SS:00" # PC4
)

# Determine if any PCs are on
SomePCisON=false
for index in ${!PCs[@]}; do
    # Try to detect PC's MAC address in ARP

    ## Look for all entries in ARP ...
    # PCFound=$(grep -o "${PCs[index]}" /proc/net/arp)

    # ... OR look only for entries with flag set to 0x2 ( ~ active )
    PCFound=$(grep "0x2" /proc/net/arp | grep -o "${PCs[index]}") 

    # If MAC address is found, the PC must be ON
    if [[ ${PCFound} ]]; then
        echo "PC ${PCs[index]} is ON"
        SomePCisON=true
    else
        echo "PC ${PCs[index]} is OFF"
    fi
done

if [[ "$SomePCisON" == true ]]; then
    echo "Some PCs are turned ON"
else
    echo "All PCs are turned OFF"
fi

# Check if NAS is ON
if ping -c 1 $IPofNAS > /dev/null; then
    echo 'NAS is ON'
    NASisON=true
else
    echo 'NAS is OFF'
    NASisON=false
fi

# If NAS is ON, but all PCs are OFF, put NAS to Sleep
if [[ "$NASisON" == true ]]; then

    # If no PCs are ON, put NAS to sleep
    if [[ "$SomePCisON" == false ]]; then
            echo 'All Hosts Offline'
            echo 'Suspending NAS'

            # Log in with password (as in @Rabid's script, didn't work for me) ...
            DROPBEAR_PASSWORD='NASPASSWORD' ssh root@IPADDRESSOFNAS pm-suspend &

            ## ... OR log in with authentication key
            # ssh -i $SSHPrivateKeyFile root@$IPADDRESSOFNAS pm-suspend &
    fi

# If NAS is OFF and any PCs are ON, wake NAS
elif [[ "$SomePCisON" == true ]]; then

    # Use wol package on DD-WRT ...
    echo 'Waking NAS from LAN, Broadcasting to '$BroadcastAddress\
        'on port '$WOLPort' for '$MACofNAS
    /usr/sbin/wol -i $BroadcastAddress -p $WOLPort $MACofNAS
    /usr/sbin/wol -i $BroadcastAddress -p $WOLPort $MACofNAS;

    ## ... OR use etherwake package on Open-WRT 
    ## ( Install with: opkg update && opkg install etherwake )
    # echo 'Waking NAS from LAN, '$MACofNAS
    # /usr/bin/etherwake $MACofNAS
    # /usr/bin/etherwake $MACofNAS
fi 
```

要使用身份验证密钥登录，请制作密钥对并将公钥放在 NAS:~/.ssh/authorized_keys 中：

在 WRT 上（使用 Dropbear）：

```
mkdir -p ~/.ssh

# Generate a private key and store it in ~/.ssh/id_rsa
dropbearkey -t rsa -f ~/.ssh/id_rsa

# Store the public key in ~/.ssh/id_rsa.pub
dropbearkey -t rsa -f ~/.ssh/id_rsa -y | grep ssh > ~/.ssh/id_rsa.pub

# Copy id_rsa.pub from WRT:~/.ssh/ to NAS:~/.ssh/
scp ~/.ssh/id_rsa.pub root@nas:~/.ssh/OpenWRT.pub 
```

在 NAS（使用 OpenSSH）上：

```
# Back up the authorized_keys
cp ~/.ssh/authorized_keys ~/.ssh/authorized_keys_Backup

# Add the new public key to authorized_keys
cat ~/.ssh/OpenWRT.pub >> ~/.ssh/authorized_keys 
```

# asp.net - 日期比较asp.net中的验证器问题

> ID：10911829
> 
> 赞同：0
> 
> 时间：2012-06-06T09:48:48.447
> 
> 标签：asp.net, telerik, comparevalidator

我有一个比较验证器，它在两个`<telerik:RadDatePicker>`开始日期和结束日期进行验证。验证规则很简单，检查开始日期是否大于结束日期并向用户显示错误消息以进行更正

它按预期工作，但是当开始日期和结束日期相同时，它显示的消息不是预期的。下面的代码：

```
<asp:CompareValidator ID="dateCompareValidator" runat="server" ControlToValidate="endDate" ControlToCompare="startDate" Operator="GreaterThan" Type="Date" ErrorMessage="Start Date is greater than the End Date - please correct dates."Display="Dynamic"></asp:CompareValidator> 
```

开始日期和结束日期的日期选择器如下：

```
<telerik:RadDatePicker CssClass="rcCalPopup" ID="endDate" runat="server" 
                                Skin="Vista">
                                <DateInput ID="DateInput2" runat="server" LabelCssClass="radLabelCss_Vista" Skin="Vista">
                                </DateInput>
                                <Calendar ShowRowHeaders="false" ID="Calendar2" runat="server" UseRowHeadersAsSelectors="False" UseColumnHeadersAsSelectors="False"
                                    ViewSelectorText="x" Skin="Vista">
                                </Calendar>
                                <DatePopupButton CssClass="rcCalPopup"></DatePopupButton>
                            </telerik:RadDatePicker> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:55:05.173

您使用验证器定义的规则是：

*   Enddate 必须大于 Startdate（注意缺少的等号）

验证器`Operator`属性确定**有效**输入的规则，而不是无效输入。

因此，如果您想允许相同的日期，您必须使用`GreaterThanEqual`

```
<asp:CompareValidator ID="dateCompareValidator" runat="server" 
    ControlToValidate="endDate" ControlToCompare="startDate" 
    Operator="GreaterThanEqual" Type="Date" 
    ErrorMessage="End date must be equal or greater than start date - please correct dates."Display="Dynamic">
</asp:CompareValidator> 
```

请注意，我也`ErrorMessage`相应地更改了。如果输入控件为空，则不调用验证函数并且验证成功。使用`RequiredFieldValidator`控件要求用户在输入控件中输入数据。

# heroku - 具有智能 HTTP 支持的 heroku

> ID：10911831
> 
> 赞同：0
> 
> 时间：2012-06-06T09:48:57.387
> 
> 标签：heroku, github

heroku 是否支持像[github](https://github.com/blog/642-smart-http-support)这样的智能 HTTP 支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:03:41.693

你的意思是通过部署`git push`？然后**不**——因为 HTTP 不是你推送到 Heroku 时使用的协议。

# asp.net-mvc - 如何获取使用剃刀动态生成的文本框值？

> ID：10911833
> 
> 赞同：1
> 
> 时间：2012-06-06T09:48:58.963
> 
> 标签：asp.net-mvc, asp.net-mvc-3

```
 <tr>
        @foreach (string s in "1,2,3,4,5,6,7,8,9,10,11,12,13,14,15".Split(','))
        {  

            <td>@Html.TextBox("Time","")
            </td>
            <p>
            </p>

        }
    </tr> 
```

我如何使用 javascript 或 jquery 从上面创建的文本框中获取值。请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:57:28.343

这里是：

```
$('input[name=Time]').each(function(index, element){
    var txtValue = element.value;
}); 
```

# c# - 在应用程序部署或对应用程序的第一次请求期间动态创建目录。

> ID：10911835
> 
> 赞同：0
> 
> 时间：2012-06-06T09:49:10.430
> 
> 标签：c#, asp.net, asp.net-mvc, iis-7.5

我所有，我已经被这个问题困扰了一个星期。我希望当我的应用程序在 IIS 中运行时，在我的项目的根目录中创建目录。但是由于 IIS 用户帐户无法在根目录中获得完全权限目录，我在尝试创建目录时遇到拒绝访问错误。我试图通过将图像保存在 App_Data 文件夹中来找到解决方法，但根据帖子[在此处输入链接描述，这](http://connect.microsoft.com/VisualStudio/feedback/details/118826/asp-net-development-server-cannot-access-images-from-app-data-directory)看起来不是一个好方法

当请求第一次到达应用程序时，我需要即时创建文件夹而不会出现拒绝访问错误。如果我能够在部署期间创建具有权限的目录也可以。解决上述问题的最佳方法是什么，谢谢 S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:53:17.743

您误解了链接中的信息。确实，`browser`不应访问 App_Data 文件夹，但在您的情况下`server`，执行此操作的是您的 ASP.NET 代码。

如果此方案是为了让用户上传和下载文件，并且您在 app_data 文件夹中有敏感文件，请为您的目的创建一个专用文件夹，而不是说 /Uploads。
直接在您的项目中创建此文件夹并将其部署到您的目标 Web 服务器。授予应用程序池帐户读/写权限，应该这样做。尽量减少应用程序池帐户具有写入权限的文件夹数量。

如果您创建一个文件夹`/wwwroot/Uploads`并为应用程序池帐户授予仅上传的完全权限，则无需在根级别具有完全权限。该应用程序可以在文件夹中动态创建文件`/Uploads`夹。

# javascript - 调用命令是什么意思 (param1, param2, ...)

> ID：10911836
> 
> 赞同：0
> 
> 时间：2012-06-06T09:49:11.137
> 
> 标签：javascript

我读了一本电子书并找到了这个命令，但我不知道它的用途以及何时使用它。例子：

```
var x = (12, 34, 56) 
```

在这种情况下，x 是一个数字，它的值为 56。谢谢。

这是我从电子书 'Javascript for absolute Beginners' 中读到的完整脚本：

```
var fridge = {
buttermilk: [1/3, "cup"],
kefir: [1 + 1/2, "cup"],
yogurt: [4, "cup"],
};
var dough = {
hardWhiteWholeWheatFlour: [2, "cup"],
sugar: [1/3, "cup"],
madagascarVanilla: [1, "tsp"],
orangeZest: [1, "tbs"],
soda: [1, "tsp"],
tartar: [1, "tsp"],
orangeJuice: [1/2, "cup"],
culturedMilk: [1/2, "cup"],
egg: [1],
cranberries: [2/3, "cup"]
};
dough.culturedMilk[0] = fridge.buttermilk[0] >= 1/2 ? (fridge.buttermilk[0] -= 1/2, 1/2) :
fridge.kefir[0] >= 9/16 ? (fridge.kefir[0] -= 9/16, 9/16) :
fridge.yogurt[0] >= 10/16 ? (fridge.yogurt[0] -= 10/16, 10/16) :
alert("No cranberry bread for you!");
dough.culturedMilk;
// [0.5625, "cup"]
fridge.kefir;
// [0.9375, "cup"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:55:04.053

如果条件冰箱.酪乳[0] >= 1/2

满足了，那么就发生了两件事。freezer.buttermilk[0] 减少 1/2，dough.culturedMilk[0] 等于 1/2

尝试这个...

```
 a = 10
     b = a < 20 ? (a -= 3, 2) : (a += 3, 5) 
```

并查看 a 和 b 的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:55:50.427

看来您已经知道这意味着什么……评估每个操作数并返回最后一个操作数的结果。

在 的情况下`(fridge.buttermilk[0] -= 1/2, 1/2)`，表达式本身是条件运算符的一部分：

```
fridge.buttermilk[0] >= 1/2 ? (fridge.buttermilk[0] -= 1/2, 1/2) : ... 
```

在这种情况下，逗号运算符用于引入副作用。如果`fridge.buttermilk[0] >= 1/2`为真，`1/2`则应分配给`dough.culturedMilk[0]`。但同时，`fridge.buttermilk[0]`也应该更新。

通常你会使用两个表达式语句，比如

```
if(fridge.buttermilk[0] >= 1/2) {
    fridge.buttermilk[0] -= 1/2;
    dough.culturedMilk[0] = 1/2;
} 
```

但是由于作者要使用条件运算符，因此可以使用逗号运算符在一个表达式中执行两个表达式。它更新`fridge.buttermilk[0]`并返回的值`1/2`。

我不建议这样做，尤其是在这种情况下，使用嵌套的条件运算符，传统的`if-else`语句会更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:58:46.320

例如这一行：

```
(fridge.kefir[0] -= 9/16, 9/16) 
```

正如您在评论中看到的那样，克菲尔-s 的值将减少 9/16、3/2 - 9/16 = 0,9375，并返回 9/16 作为culturedMilk 的值。

(param1, param2 ...) 计算表达式并返回最后一个。（就像你的例子一样）

# jquery - 在 Ajax/jQuery 选项卡系统中定位

> ID：10911839
> 
> 赞同：0
> 
> 时间：2012-06-06T09:49:17.627
> 
> 标签：jquery

我正在计划一个基于[本网站代码的使用 jQuery 的 Ajax 选项卡系统（请参阅](http://www.ajaxblender.com/howto-create-custom-jquery-tabs.html)[此处](http://www.ajaxblender.com/article-sources/jquery/ajax-tabs-example/)的演示）。

这是一个很好的基础，尽管我的知识相当有限，但我仍然能够使用它。但是，我想知道是否有人对如何稍微扩展功能有想法，以允许从内容容器中定位选项卡。

例如：选项卡 1 有与之关联的文本，我希望能够在该文本中包含一个超链接，将您切换到选项卡 3（就像您实际单击“选项卡 3”本身一样）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:16:23.030

只需将链接分配给您要定位的选项卡即可。将此链接分配给要在其上设置链接的元素。

Jquery-ui 选项卡很容易做到这一点，以及其他强大的功能......

我建议您应该使用 jquery-ui 选项卡。

如果我清楚，请告诉我。

# iphone - 删除索引处的项目

> ID：10911843
> 
> 赞同：-1
> 
> 时间：2012-06-06T09:49:26.590
> 
> 标签：iphone, ios, xcode

在我的 iCarousel 中，我使用它来删除索引处的项目：

```
NSInteger index2 = carousel2.currentItemIndex;
[carousel2 removeItemAtIndex:index2 animated:YES];
[items2 removeObjectAtIndex:index2]; 
```

所以特定索引视图中的图像被删除。

但我不知道如何将数组中的计数减少到 1 或减少索引计数。怎么做？抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:00:06.530

当您从 NSMutableArray 中删除任何对象时，数组的长度会自动减 1。您可以使用以下方法检查数组的长度

```
[carousel2 count]; 
```

和

```
[items2 count]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T10:01:05.643

我没有从你的问题中得到太多的想法。但我认为您必须在删除项目后重新加载 iCarousel。

# ssas - SSAS 多维数据集部署

> ID：10911847
> 
> 赞同：1
> 
> 时间：2012-06-06T09:49:57.107
> 
> 标签：ssas, ssas-2008

我正在尝试使用 AdventureWorksOlap 数据库构建多维数据集。我成功地构建了我想要做的事情。现在我担心的是我想将多维数据集部署到服务器上，以便团队的其他成员可以在生成他们的 SSRS 报告时使用这个多维数据集作为数据源（可能是其他一些工具）。

我听说 SSAS 不允许 Sql 身份验证。那么，

1）成员将如何访问多维数据集？
2) 我需要合并哪些身份验证更改？
3) 其他开发人员如何使用他的计算机的 SSMS 访问多维数据集并对其进行更改（就像我们可以在 OLTP 数据库中那样）？
4) 我需要使用这个多维数据集准备一个仪表板。关于这个的任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:21:12.470

我建议从 Excel 数据透视表开始，以了解您要创建的仪表板类型。通过与最终用户合作，您可以了解他们想要/需要查看的信息。

关于安全性，如前所述，设计多维数据集仅使用 Windows 身份验证。这是一个讨论规避标准安全性的[博客。](http://www.sqlservercentral.com/Forums/Topic546634-17-1.aspx)

此外，我还发布了[一系列](http://www.youtube.com/playlist?list=PL1C57B4EE4D873A1D&feature=plcp)关于如何使用 BIDS 在 SQL Server 2008 中创建 OLAP 多维数据集 SSAS 的视频。你可能会发现这个系列很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:11:37.483

1) Windows 身份验证

2) 没有。

3）一旦部署了多维数据集，您就无法更改它。实际上你可以改变一些东西，比如分区和角色，但你不能添加一个维度。您需要更改 BIDS 上的项目并重新部署它

# jquery - 限制 div 上的可放置元素

> ID：10911849
> 
> 赞同：0
> 
> 时间：2012-06-06T09:49:57.740
> 
> 标签：jquery

我正在创建并附加一个可放置的 div 元素，如下所示：

```
 var drop = {
                  drop: function(event, ui) {
                      var add = $("#"+this.id);
                      $('<div id='+counter+' "><div class="myCss">here</div></div>').droppable( drop ).appendTo( "#myDivs");
                      //debugger;
                      counter++;
                  }
                }; 
```

我可以更新这个 div 以只允许删除某个 id 或 css 的 div 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:09:05.263

是的

```
.droppable( 
    drop: function(event, ui) {
         var targetId = $(this).attr("id");
         //your conditions to check id/class of div . 
         if (targetId == '<your div id to restrict>'){
            return;
         }
    }
) 
```

# visual-studio-2010 - 有没有在 Visual Studio 2010 中创建和使用“模板”的好方法

> ID：10911852
> 
> 赞同：0
> 
> 时间：2012-06-06T09:49:59.123
> 
> 标签：visual-studio-2010, templates

我们公司的项目都是建立在我们称之为“项目脚手架”的基础上的。它包含所有站点、基本文件夹结构和所有其他类似的所有基本必需代码。

目前，我们有一个用于“Project Scaffold”的存储库，每次我们想创建一个新项目时，我们将该项目复制到一个新文件夹中，并重命名项目中所有出现的“ProjectScaffold”名称。如您所知，这非常耗时，如果我们错过了一次“ProjectScaffold”，有时可能会导致错误。

该项目将需要具有所有默认依赖项，这就是为什么我们现在复制一个完整的项目对我们有用。

我已经研究过创建视觉工作室模板的可能性，但我似乎找不到完成它的好方法。

我们一直在考虑是否有可能通过 NuGet 包来实现它，但我觉得这要么非常困难，要么不可能。

如果可能，它也可以在 Visual Studio 2011 中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:52:25.927

简单`File-->Export Template`:)

然后，您可以自定义生成的 zip 文件以满足您的需要。

有关此内容的更多信息，请参阅[在 msdn 上创建项目和项目模板](http://msdn.microsoft.com/en-us/library/s365byhx.aspx)

# php - wordpress 自定义 - 将类添加到第一个博客

> ID：10911853
> 
> 赞同：0
> 
> 时间：2012-06-06T09:50:09.633
> 
> 标签：php, wordpress

这是我的博客页面模板：

```
<?php
/**
 * Template Name: Blog
 *
 * Standard blog template, create a static page for your blog and select this as the template.
 *
 * The "Template Name:" bit above allows this to be selectable
 * from a dropdown menu on the edit page screen.    
 */

get_header(); ?>

<div id="main_container">

<!-- IE7 float fix --><!--[if lt IE 7]><span class="iefix">.</span><![endif]-->

<div class="main">

        <div class="entries_full">

            <div class="entry_full">

            <div class="box_twothirds mt30 pr60">

<!-- BLOG POSTS BEGIN -->
<?php
$exclude_cat = get_option('bb_exclude_cat');
$exclude_temp = str_replace(",", ",-", $exclude_cat);
$exclude_cats = "-" . $exclude_temp;
$blog_posts = get_option('bb_blog_posts');
if($blog_posts == NULL) {$blog_posts = '5';}
$temp = $wp_query;
$wp_query= null;
$wp_query = new WP_Query('cat=' . $exclude_cats . '&paged=' . $paged . '&showposts=' . $blog_posts);
$count = 0;
while ($wp_query->have_posts()) : $wp_query->the_post();
?>

<div class="blog">

<!-- displays the blog posts -->
<?php $count++; if($count > 3) { $count = 1; } ?>

            <h3 class="<?php if($count > 1) echo "mt25 "; ?>mb12"><a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></h3>

            <?php if(get_post_meta($post->ID, large_image_value, $single = true) != NULL || get_post_meta($post->ID, fullsize_value, $single = true) != NULL)
            { ?>
            <div class="mag_blog"><!-- magnifying glass div -->
    <a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>"><img src="<?php bloginfo('template_directory'); ?>/scripts/timthumb.php?src=<?php if (get_post_meta($post->ID, large_image_value, true) != NULL) {echo get_post_meta($post->ID, large_image_value, $single = true);} else if (get_post_meta($post->ID, fullsize_value, true) != NULL) {echo get_post_meta($post->ID, fullsize_value, $single = true);} else {echo get_post_meta($post->ID, accordion_image_value, true);} ?>&amp;h=213&amp;w=600&amp;zc=1" alt="<?php the_title(); ?>" /></a>
        </div><!-- end magnifying glass div -->
        <?php } ?>
            <p class="meta"><span class="postdate"><?php the_time('F jS, Y') ?></span><span class="tags"><?php the_category(', '); ?></span><span class="comments"><a href="<?php the_permalink(); ?>#comments" title="comments"><?php comments_number('0 comments','1 comment','% comments'); ?></a></span></p>
            <?php global $more; $more = false; ?><?php the_content('<span>Continue Reading</span>'); ?><?php $more = true; ?>

            <div class="bar mt25 mb30"></div>

            <?php comments_template( '', true ); ?>
</div>

<?php endwhile;
if(function_exists('wp_pagenavi')) { wp_pagenavi(); }
else { ?>
<?php /* Display navigation to next/previous pages when applicable */ ?>
<?php if (  $wp_query->max_num_pages > 1 ) : ?>
            <?php next_posts_link( __( '&larr; Older posts', 'twentyten' ) ); ?>&nbsp;
            <?php previous_posts_link( __( 'Newer posts &rarr;', 'twentyten' ) ); ?>
<?php endif; ?>

<?php }
$wp_query = null; $wp_query = $temp; ?>
<!-- BLOG POSTS END -->

            </div>

<!-- Begin Sidebar -->
<?php include('sidebar.php'); ?>
<!-- end sidebar -->

            <div class="clear"></div>

            </div><!-- end div.entry -->

        </div><!-- end div.entries -->

<div class="clear"></div>

</div><!-- end div#main -->

<div class="clear"></div>

</div><!-- end div#main_container-->

<?php get_footer(); ?>
</code> 
```

只是想知道是否有办法为第一个博客项目添加一个类，或者让第一个块项目的样式与其他项目不同......或者我需要在其他 php 文件上进行编辑？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:11:07.910

您可以在 while() 循环的第一行中完全做到这一点：

代替：

```
<div class="blog"> 
```

和：

```
<div class="blog<?php if ($count === 0) echo " first_post"; ?>"> 
```

这应该将自定义类添加到页面上名为“first_post”的第一个博客项目。

# c++ - 为 cmake 生成文件

> ID：10911855
> 
> 赞同：0
> 
> 时间：2012-06-06T09:50:18.580
> 
> 标签：c++, cmake, bison, flex-lexer

我有一个带有 automake 构建系统的项目，那里有 flex/bison 文件。现在我不明白如何将它们包含到 cmake 构建系统中。我正在尝试手动执行此操作。这是项目树：

```
+ROOT
|---CMakeLists.txt
|---Sources/
|   |---Flex
|   |---Main
|   |---CMakeLists.txt
|---Includes/ 
```

文件夹中`Flex`有 2 个文件：`player_command_parser.ypp; player_command_tok.lpp`. 这些文件来自[RoboCup 足球服务器](http://sserver.svn.sourceforge.net/viewvc/sserver/rcss/trunk/rcssserver/)。

我真的不知道如何在新的构建系统中使用它们，所以我决定手动生成所有文件：

```
flex --c++ player_command_tok.lpp 
```

此命令生成`lex.RCSSPCom.cc`以以下代码开头：

```
#line 3 "lex.RCSSPCom.cc"

#define  YY_INT_ALIGNED short int

/* A lexical scanner generated by flex */

#define FLEX_SCANNER
#define YY_FLEX_MAJOR_VERSION 2
#define YY_FLEX_MINOR_VERSION 5
#define YY_FLEX_SUBMINOR_VERSION 35
#if YY_FLEX_SUBMINOR_VERSION > 0
#define FLEX_BETA
#endif

    /* The c++ scanner is a mess. The FlexLexer.h header file relies on the
     * following macro. This is required in order to pass the c++-multiple-scanners
     * test in the regression suite. We get reports that it breaks inheritance.
     * We will address this in a future release of flex, or omit the C++ scanner
     * altogether.
     */
    #define yyFlexLexer RCSSPComFlexLexer 
```

下一步是：`bison -d player_command_parser.ypp`。

我有：`player_command_parser.tab.cpp; player_command_parser.tab.hpp`

现在我正在尝试将所有生成的文件复制到相关文件夹：*.tab.hpp -> 包含，并将 cc&cpp 文件添加到`Sources/CMakeLists.txt`：

```
set (FlexSources
    Server/Flex/lex.RCSSPCom.cc
    Server/Flex/player_command_parser.tab.cpp
) 
```

和编译输出：

```
[  1%] Building CXX object Sources/Flex/lex.RCSSPCom.cc.o
In file included from /Includes/player_command_tok.h:31:0,
                 from player_command_tok.lpp:28:
/usr/include/FlexLexer.h:112:7: error: redefinition of ‘class RCSSPComFlexLexer’
/usr/include/FlexLexer.h:112:7: error: previous definition of ‘class RCSSPComFlexLexer’ 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:01:47.463

您的编译错误似乎是由于某些标头被包含两次。您可能需要制作一个仅是包含保护的额外文件：

player_command_tok_guarded.hpp：

```
#ifndef PLAYER_COMMAND_TOK_GUARDED
#define PLAYER_COMMAND_TOK_GUARDED
#include "player_command_tok.hpp"
#endif 
```

并将您的`#include`文件改为这个新文件。至于将 flex 和 bison 集成到您的 CMake 系统中，请尝试以下操作：

```
# Find flex and bison.
find_program(FLEX flex DOC "Path to the flex lexical analyser generator.")
if(NOT ${FLEX})
  message(SEND_ERROR "Flex not found.")
endif
find_program(BISON bison DOC "Path to the bison parser generator.")
if(NOT ${BISON})
  message(SEND_ERROR "Bison not found.")
endif

# Custom commands to invoke flex and bison.
add_custom_command(OUTPUT lex.RCSSPCom.cc
                   COMMAND ${FLEX} --c++ player_command_tok.lpp 
                   MAIN_DEPENDENCY player_command_tok.lpp
                   COMMENT "Generating lexer"
                   VERBATIM)
add_custom_command(OUTPUT player_command_parser.tab.cpp player_command_parser.tab.hpp
                   COMMAND ${BISON} -d player_command_parser.ypp
                   MAIN_DEPENDENCY player_command_parser.ypp
                   COMMENT "Generating parser"
                   VERBATIM) 
```

并像往常一样将文件添加到您的文件列表中。

# javascript - PhoneGap 应用程序的简单登录系统

> ID：10911856
> 
> 赞同：1
> 
> 时间：2012-06-06T09:50:23.260
> 
> 标签：javascript, jquery, cordova, login

我正在尝试为我的 PhoneGap 应用程序构建一个简单的登录系统。我有一个用户提供用户名的表单，如果 MYSQL 中有匹配的用户名，则用户将被重定向到另一个页面。否则会显示警报。该代码在 Firefox 和 chrome 上运行良好，但当我尝试在 Safari 或 PhoneGap 应用程序上使用它时，它似乎不起作用。可能是什么原因？

HTML

```
 <form id="login-form" rel="external" data-ajax="false" >

    <label for="number">Number:</label> 
    <br>
    <input type='tel' name="number" id="number" data-corners="false" data-theme="d"/>
    <br>

    <label for="username">Username:</label>
    <br>

    <input name="username" id="username" data-corners="false" data-theme="d"/>
    <br>

<input type="submit" value="OK" data-theme="b" data-corners="false" />
</form> 
```

JS

```
 $(function() {    
     $('#login-form').submit(function(event) {
         event.preventDefault();

         $.post(serviceURL +'login.php', { 
             kayttaja: $('[name="username"]').val(), 
         }).success(function(data) { 
             if (data.status == 'ok') {
                 var input = document.getElementById("number");
                 var user = document.getElementById("username");
                localStorage.setItem("number", input.value);
                localStorage.setItem("username", user.value);
                 window.location.pathname = data.redirect;
             } else {
                 alert(data.message);
             }
         })
     })
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-06T12:09:19.057

您可以按照以下步骤使用 phonegap / apache cordova 创建简单的登录系统

*   为身份验证创建**基于 JSON 的 Web 服务**
*   使用 JQuery / Angular JS 使用 Ajax 方法与 Web 服务连接
*   如果身份验证成功，则使用 javascript 重定向页面`window.location.href="home.html"`
*   使用**localStorage**存储身份验证值

我从[https://codesundar.com/phonegap-login-system-using-php-mysql/获得了这些信息](https://codesundar.com/phonegap-login-system-using-php-mysql/)

# ajax - 检查请求是否由 Ajax 发送

> ID：10911862
> 
> 赞同：13
> 
> 时间：2012-06-06T09:50:37.957
> 
> 标签：ajax, magento

我正在覆盖一个 magento 控制器，在处理之前，有没有办法知道请求是否由 Ajax 发送？

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-06T10:00:21.897

Magento 使用该类`Zend_Controller_Request_Http`来处理它的请求。

您可以使用

```
if ($this->getRequest()->isXmlHttpRequest()) {
    // is Ajax request
} 
```

以这种方式检测 Ajax 请求。

至少

*   原型
*   天经地义的
*   jQuery
*   小唯
*   MochiKit

`HTTP_X_REQUESTED_WITH`根据[ZF docs](http://framework.zend.com/manual/en/zend.controller.request.html#zend.controller.request.http.ajax)发送标头。

但请注意，“Ajax 请求”是指使用**XmlHttpRequest**（而*不是*使用隐藏`<iframe>`s 或 Flash 上传程序等技术）发送给我的请求。

由于这是主观的，您的看法可能会有所不同：Magento 本身似乎以比我更广泛的方式定义了“Ajax”。看看`Mage_Core_Controller_Request_Http::isAjax()`：

```
public function isAjax()
{
    if ($this->isXmlHttpRequest()) {
        return true;
    }
    if ($this->getParam('ajax') || $this->getParam('isAjax')) {
        return true;
    }
    return false;
} 
```

根据您对“Ajax”的个人看法，这可能（也可能不会）更适合您的需求。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-06T09:55:21.730

如果我没记错的话，magento 是使用 Zend Framework 编写的，因此可以使用 Request 对象

```
if($this->getRequest()->isXmlHttpRequest()){
    // ajax
} else {
    // not ajax
} 
```

[http://framework.zend.com/manual/en/zend.controller.request.html#zend.controller.request.http.ajax](http://framework.zend.com/manual/en/zend.controller.request.html#zend.controller.request.http.ajax)

祝你好运！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-30T01:40:51.817

Magento 在内部使用了两者的混合。

Zend Framework 的 isXmlHttpRequest() 检查标头。

```
public function isXmlHttpRequest(){
  return ($this->getHeader('X_REQUESTED_WITH') == 'XMLHttpRequest');
} 
```

在某些情况下，magento 使用 isXmlHttpRequest() 就像在 Mage_ImportExport_Adminhtml_ExportController::getFilterAction()

```
if ($this->getRequest()->isXmlHttpRequest() && $data) {
  //code
} 
```

在其他情况下，它检查 get 参数，如 Mage_Catalog_Product_CompareController::removeAction()

```
if (!$this->getRequest()->getParam('isAjax', false)) {
  $this->_redirectReferer();
} 
```

Request Mage_Core_Controller_Request_Http::isAjax() 检查两者

```
public function isAjax()

{
    if ($this->isXmlHttpRequest()) {
        return true;
    }
    if ($this->getParam('ajax') || $this->getParam('isAjax')) {
        return true;
    }
    return false;
} 
```

我建议使用 Request 对象 isAjax 来检查两者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-29T16:26:45.020

最好的方法是：

```
if (!$this->getRequest()->isAjax()) {
   return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T09:53:25.393

只需使用纯 PHP，从不关心：

```
 public function isAjax()
   {
      return (boolean)((isset($_SERVER['HTTP_X_REQUESTED_WITH'])) && ($_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest'));
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T09:54:05.117

你可以使用这个：

```
if ($this->getRequest()->getParam('ajax')){
    //Ajax related code
} else {
    //Non ajax
} 
```

# haskell - 让数据构造函数

> ID：10911871
> 
> 赞同：0
> 
> 时间：2012-06-06T09:51:26.573
> 
> 标签：haskell

我有这些陈述：

```
data SL a = SR (Integer -> (a, Integer))
    deriving(Show)

instance Monad SL where
    return k = SR (\st -> (k, st))

xx::SL Integer
xx = return 4 
```

然后我做：

```
let SR f = xx 
```

我现在有：

```
xx :: SL Integer
f :: Integer -> (Integer, Integer) 
```

但我不明白为什么。也许我错过了`let DATACONSTRUCTOR ..`.

你能帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T09:59:47.833

`let SR f = xx`意味着`SR f`应该等于`xx`。所以，

```
SR f = xx                   -- let
     = return 4             -- def. xx
     = SR (\st -> (4, st))  -- def. return 
```

因此

```
f = \st -> (4, st)  -- remove SR on both sides 
```

在这种情况下，它是类型，`Integer -> (Integer, Integer)`因为`SR :: a -> Integer -> (a, Integer)`和`xx :: SL Integer`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T19:10:57.423

`let`并且`where`也是模式匹配，例如`case`，但只有一种选择。例如一个`let`表达式：

```
let SR f = xx in ... 
```

就像下面的`case`表达式：

```
case xx of
  SR f -> ... 
```

大多数人只是简单地使用`let`和`where`做简单的变量绑定，所以他们没有意识到它们是模式匹配。但是，变量绑定只是模式匹配的一种特殊情况（模式匹配中的标识符匹配所有内容并将值绑定到变量）。

此外，大多数模式匹配需要不止一种替代方案，因此`let`不适用。即使您只想匹配特定的构造函数，进行不完整的模式匹配也不是一个好主意。但是，在某些情况下，一种替代方案是完全匹配的，例如，元组 match `(x, y)`，或者在您的情况下，只有一个构造函数的数据类型。

# iphone - 在 iOS 中使用 HTML5 的启动画面

> ID：10911872
> 
> 赞同：0
> 
> 时间：2012-06-06T09:51:33.970
> 
> 标签：iphone, ios, ipad, splash-screen

我正在尝试使用嵌入在 iO 中的 html5 代码创建启动画面。我一直在寻找一些例子，但我没有找到任何东西。有人知道吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:53:49.403

最后，我制作了一个中间 UIView，应用程序首先在窗口中加载。然后应用程序加载其余数据并更改窗口的根视图。

有用！:)

# c# - 需要一种方法来逐个选择下拉列表的选项来解析数据

> ID：10911873
> 
> 赞同：0
> 
> 时间：2012-06-06T09:51:38.717
> 
> 标签：c#

我有一个系统，基本上可以将其他数据库中的数据复制到我自己的 SQL Server 中，这样我就可以格式化数据以满足我的需要。该数据用于填充下拉列表以最终得到一个变量，该变量可以返回我想向用户显示的行。

到目前为止，我遇到的所有数据库都有一种存储下拉菜单数据的逻辑方式。但现在我有一个不同的，不合逻辑的。

我想要做的是使用现有的网站，它本身提供了一个有点逻辑的下拉菜单来获取我需要的数据。该下拉列表在选择后填充多选下拉列表。

我想在第一个下拉列表中选择每个选项，然后读取它放入第二个多选下拉列表中的数据。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:55:29.977

您本质上想要做的是网络抓取。在一个类似的项目中，这就是我所做的：

1.  使用 .NET 中可以发送 http 请求和接收 http 响应的可用对象。就我而言，我使用了 WebClient：

    ```
     byte[] response;
        using (var client = new WebClient())
        {
            try
            {
                response = client.UploadValues(URL, "POST", postData);
            }
            catch (Exception ex)
            {
                // Log error here                  
            }
        } 
    ```

2.  看到 postData 了吗？这是一个`NameValueCollection`包含在您执行 POST 时由页面发送的数据。使用[Fiddler](http://www.fiddler2.com/fiddler2/)或类似工具找出需要包含哪些数据。如果页面使用 .NET Web 表单，您可能需要为 __VIEWSTATE 做一些特殊的事情，比如做一个示例请求并从那里获取 __VIEWSTATE 值。这是 postData 的示例：

    ```
     var postData = new NameValueCollection();
        postData.Add("__EVENTTARGET",  "");
        postData.Add("__EVENTARGUMENT", "");
        postData.Add("__VIEWSTATE", ""); 
    ```

3.  使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)轻松“解析”您在发布时获得的响应。使用 Xpath，您将能够在第二个下拉列表中获取新项目。

    ```
     var doc = new HtmlDocument();
        doc.Load(new MemoryStream(requestBytes));
        return doc; 
    ```

# android - Android：android如何支持java？

> ID：10911875
> 
> 赞同：-5
> 
> 时间：2012-06-06T09:51:47.533
> 
> 标签：android

问题在于android架构。这些应用程序是用java编写的，那么android如何支持java？android 应用程序使用的一组 C/C++ 库是如何用 Java 编写的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:57:01.523

[https://stackoverflow.com/a/352920/1351347](https://stackoverflow.com/a/352920/1351347)

这解释了如何在 Android 中翻译/使用 C/C++ 库。

低级 API 是用 C/C++ 编写的，但你不应该关心这一点。此外，整个 Android API 都是用 java 编写的并且是开源的，所以你可以看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:57:42.227

![在此处输入图像描述](../Images/91ff037279020ec92551b6476abc4daf.png)

在发布此类问题之前，您应该先查看一下 android 的架构。我不确定`how`你在找什么样的人。但问题是`How are the set of C/C++ libraries used by the android apps, if they are written in java?`——那么你应该知道它是android应用程序框架的魔力。

您可能想彻底阅读[此](http://developer.android.com/guide/basics/what-is-android.html)内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:00:14.183

欢迎来到stackoverflow。请在提交问题之前研究您的主题。如果您想了解 Android 如何处理 Java 等，您需要阅读 Android 的内部结构。我建议只搜索 Android Internals。

也试试这个视频：[Marakana Android Internals](http://marakana.com/s/andevcon_android_internals,271/index.html) Marko 为初学者很好地解释了 Android 的内部结构。Marakana 上还有很多其他资源，例如开始 Android 开发和构建自定义 rom。如果您是 Android 新手，我强烈建议您浏览所有 Marakana 视频。祝你好运。

# ios - 根据 iOS 5 中的文本长度拉伸图像以适合按钮

> ID：10911877
> 
> 赞同：1
> 
> 时间：2012-06-06T09:51:53.807
> 
> 标签：ios, image, uibutton, width

我有一张图片要作为背景图片添加到 uibutton。我想拉伸图像以适合按钮宽度。用户将在运行时输入按钮的标题。因此，根据用户输入的文本宽度，它将拉伸图像。超出按钮的某个宽度，按钮将不会进一步拉伸，而是会截断文本。这是我的代码

```
CGSize suggestedSize = [self.strButtonTitle sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE]];

NSLog(@"Widht:- %f",suggestedSize.width);

UIButton *customButton = [UIButton buttonWithType:UIButtonTypeCustom];
customButton.frame = CGRectMake(50, 200, 75, 40);

CGRect frame = customButton.frame;
frame.size.width = suggestedSize.width;

if (frame.size.width > 75) {
    frame.size.width = 75;
    customButton.frame = frame;
}
else {
    frame.size.width +=5;
    customButton.frame = frame;
}

NSLog(@"Custom button width:- %f",customButton.frame.size.width);

UIImage *buttonImageNormal = [UIImage imageNamed:BUTTON_IMAGE];
UIImage *stretchableButtonImageNormal = [buttonImageNormal stretchableImageWithLeftCapWidth:12 topCapHeight:0];

[customButton setBackgroundImage:stretchableButtonImageNormal forState:UIControlStateNormal];
[customButton setTitle:self.strButtonTitle forState:UIControlStateNormal];
[customButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[self.view addSubview:customButton];

UIBarButtonItem *barButton = [[UIBarButtonItem alloc]initWithCustomView:customButton];
self.navigationItem.leftBarButtonItem = barButton;
[barButton release]; 
```

我的问题是，按钮宽度不会根据用户输入的文本增加。如果用户输入 ppppp，宽度不会增加到 75，而是显示“pp...p”

非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:14:06.737

问题在于测量字符串的宽度。您正在通过以下方式测量字符串的宽度。

```
CGSize suggestedSize = [self.strButtonTitle sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE]]; 
```

在这里，您使用大小为 FONT_SIZE 的 systemFont。

但是，您没有为您的 customButton 文本标签设置相同的字体。可以通过以下方式完成。

```
[customButton.titleLabel setFont:[UIFont systemFontOfSize:FONT_SIZE]]; 
```

希望它会有所帮助。

# python - 在没有代码重复的情况下将 Flask 页面嵌入另一个页面？

> ID：10911878
> 
> 赞同：5
> 
> 时间：2012-06-06T09:52:06.617
> 
> 标签：python, twitter-bootstrap, flask

我有一个页面（位于 /games/compare/），它是一个迷你图像比较游戏。用户会看到两张图片，并被要求在它们之间进行选择以回答问题。该页面可以从数据库中获取图像，在内部使用 javascript 和 css 渲染模板，并使用 AJAX 与数据库进行通信。

现在，如果我想在不复制任何代码的情况下将此投票游戏嵌入到主页上怎么办？理想情况下，我会更新游戏，所有“特色”游戏的页面也将反映这些变化。

我对如何以连贯和有组织的方式管理整个站点的资产感到困惑。有些页面有 css、javascript，我也在使用 bootstrap 和 GIS 框架等框架。

我会将游戏设置为蓝图吗？我将如何组织资产（Javascript 和 CSS）以免重复？

目前，我有一个页面呈现一个模板（main.html），它扩展了另一个（base.html）。Base.html 包括 header.html、nav.html 和 footer.html 以及为 body 和其他设置的块。

我目前的方法是在最低级别剥离所有内容并在最高通用级别重新组装它，这使得编码非常慢。例如，我有那个投票游戏，现在它位于一个名为voting_game.html 的页面中，其中包含玩游戏所需的一切（包括整页html、样式和javascript）。现在，如果我想在另一个页面上包含该游戏，例如根索引，我知道的唯一解决方案是从voting_game.html 中删除样式、js 和整页 html，只留下游戏运行所需的 html . 当我现在创建索引时，我将从voting_game.html 导入html，但我必须分别导入样式和javascript。这意味着我必须构建每个页面两次，这是我需要做的工作的两倍。

必须有一种方法来做到这一点并保持井井有条，但我需要你的帮助来了解做到这一点的最佳方式。

谢谢，

菲尔

编辑：嵌入页面还应该能够与其父页面（它被嵌入的页面）通信，或者与同一父级中的其他嵌入页面（父级的子级应该能够交谈。所以当有人播放嵌入式游戏，他们获得积分，这些积分应该显示在其他页面的另一部分，该页面会更新以反映用户当前的积分。

这个“记分板”也可以是一个单独的小部件/页面/蓝图，可以嵌入并查找某些数据以发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:30:59.997

要重用一段 HTML，您可以使用 Jinja 的`{% include %}`标签。如果这太局限了，Jinja 宏也很适合。您可以在单独的文件中定义宏并使用`{% import "path/to/macros.html" as my_macros %}`.

Flask-Assets 可以帮助您组织资产。

至于使用蓝图，是的，您应该使用它们。但它们主要适用于 Python 代码，而 HTML 模板组织在不同的领域，因此它们的使用可能与这里无关。

但是，您不能总是删除所有重复项。如果您的游戏需要影响服务器生成的 HTML 的三个遥远位置，则需要在包含您的游戏的每个模板中复制一些模板代码。

# iphone - 通过推送通知减少徽章数量

> ID：10911879
> 
> 赞同：0
> 
> 时间：2012-06-06T09:52:07.347
> 
> 标签：iphone, ios, notifications, push

嗨，在我的应用程序中，当我从服务器收到推送通知时，我的应用程序徽章会增加一。当我打开应用程序并关闭它时，它没有减少。所以我的问题是当用户看到通知时如何减少应用程序图标上的徽章图标

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T09:54:50.483

您可以将其设置为您喜欢的任何值。将其设置为 0 会删除徽章。

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T20:12:36.820

我遇到了同样的问题，所以我想，“为什么不直接获取徽章编号呢？” 然后，您可以随心所欲地使用它。

如果您在 AppDelegate.m 文件中，则可以在您的`application: didFinishLaunchingWithOptions:`方法中使用它：

```
int badgeNumber = [application applicationIconBadgeNumber] -1;
[application setApplicationIconBadgeNumber:badgeNumber]; 
```

这会将图标徽章编号减一。但是，请注意，您的用户可能会收到来自您的应用程序的多个尚未查看的通知。因此，您可能应该将其设置在将处理推送的特定方法中。或者，根据您的应用程序的设置方式，只需将徽章图标编号设置为 0。

希望这可以帮助。

# jsp - 在 Spring MVC 中使用 jsp:include 或 c:import 中的 URL 模板

> ID：10911881
> 
> 赞同：0
> 
> 时间：2012-06-06T09:52:25.117
> 
> 标签：jsp, rest, spring-mvc

我想`<spring:url>`在`<jsp:include>`标签中使用用 spring 生成的 URL，但它会两次附加上下文路径。我正在使用 Spring MVC 3.1。

```
<spring:url var="publicationUrl" value="/publications/{id}">
   <spring:param name="id" value="${publication.id}" />
</spring:url>

<!-- publicationUrl = "/myApp/publications/1234" -->

<!-- Both methods fail because they are appending the -->
<!-- context again: "/myApp/myApp/publications/1234"  -->
<jsp:include page="${publicationUrl}" />    
<c:import url="${publicationUrl}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:04:09.267

我找到了一种防止`spring:url`预先设置上下文路径的方法。我必须添加一个空上下文：

```
<spring:url var="publicationUrl" value="/publications/{id}" context="">
   <spring:param name="id" value="${publication.id}" />
</spring:url> 
```

这个解决方案并不完美，因为我必须创建两个不同的 URL：一个用于链接，另一个用于包含。

# android - 如何使 Button 像 Spinner 一样工作

> ID：10911884
> 
> 赞同：0
> 
> 时间：2012-06-06T09:52:33.483
> 
> 标签：android, android-spinner, android-button

我想要一个按钮拉出一个像 Spinner 这样的菜单，但它不需要像 Spinner 中的提示那样存储数据。

Spinner 看起来像这样：

```
Spinner spinner = (Spinner) findViewById(R.id.spinner1);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.social_list, android.R.layout.simple_gallery_item);//select_dialog_multichoice);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter);

spinner.setOnItemSelectedListener(new MyOnItemSelectedListener()); 
```

我需要像按钮一样工作......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:56:41.080

我认为您应该`spinner.performClick();`使用按钮单击方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:00:43.893

您可以使用[ContextMenu](http://developer.android.com/reference/android/view/ContextMenu.html)。这是有关上下文菜单演示的链接。

[http://mobile.dzone.com/news/context-menu-android-tutorial](http://mobile.dzone.com/news/context-menu-android-tutorial)

但几乎不需要修改。在按钮单击事件中，您必须打开 ContextMenu。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:54:52.010

只需单击按钮打开带有列表的对话框，看起来与微调器相同.....

如在

[http://saga-androidapplication.blogspot.in/2011/05/dialog-list-item.html](http://saga-androidapplication.blogspot.in/2011/05/dialog-list-item.html)

[http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList](http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)

使用资源 res = getResources();

```
final String[] items = res.getStringArray(R.array.social_list);
//final CharSequence[] items = {"Red", "Green", "Blue"};

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Pick a color");
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
        }
    });
    AlertDialog alert = builder.create(); 
```

[Android 自定义列表对话框](https://stackoverflow.com/questions/5194694/android-custom-list-dialog)

# css - 如何让内联块与子子菜单 HTML 列表一起使用

> ID：10911887
> 
> 赞同：0
> 
> 时间：2012-06-06T09:52:46.987
> 
> 标签：css, xhtml, html-lists

我有一个烦人的问题，我的 li 不想并排显示，它们之间有 10px 的填充。

当我添加带有子菜单的子菜单时，li 不想内联块。这是一个例子：http: [//jsfiddle.net/3EQPU/3/](http://jsfiddle.net/3EQPU/3/)

悬停在潜水和 2 个子菜单项不是 inline-block..

为什么是这样？你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:03:42.710

消除

```
clear:both; 
```

在

```
#new-menu-lower ul li ul li 
```

# jquery - JqueryMobile (JQM)、Json 并将数据传递到新页面

> ID：10911890
> 
> 赞同：1
> 
> 时间：2012-06-06T09:53:02.907
> 
> 标签：jquery, json, jquery-mobile

希望你们都很好，并且可以使用您的代码编辑器。

我的问题是如何将 url rel 传递给新页面以供将来使用？

让我举一个比 1000 字更好的例子。

在页面“A”上，我有指向页面“B”的 url，加载页面“B”html 我将该 url 直接指向页面“B” `<a href="page-B.html" rel="{{id}}">{{deptName}}</a>`（不要看`{{}}`它是 Mustache.js 标签）。

因此，当我单击该链接时，它会正常工作，将我指向页面“B”并加载我的新 html 布局（与页面“A”不同）。

现在因为我从 JSON 中获取数据，所以我需要传递`rel="{{id}}"`给 page-B 来告诉我想要从 JSON 中获取什么数据。

任何好的想法或实用的代码你是怎么做到的？

谢谢！

附言

在 $.delegate 的“B”页上，我需要该 id 来执行以下操作：

```
$.ajax({
        beforeSend: function() { $.mobile.showPageLoadingMsg() }, //Show spinner
        complete: function() { $.mobile.hidePageLoadingMsg() }, //Hide spinner
        url: 'http://website.com/categoryJSON.ashx?&catId=THE_ID&callback=?',
        dataType: 'json',
        success: function(data) {
            var template = $('#pageCategoryTpl').html();
            var html = Mustache.to_html(template, data);
            $('[data-role=content]:first').html(html);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:52:20.897

尝试以下方式跨页面传输多个数据。

HTML

```
<a href="#detail?id=1234&another_id=5678" id="carrier-btn" data-role="button">link button with extra data</a> 
```

JS

```
$(document).bind('pageshow', function(evt, data) {
    var id = queryParam("id"); //def of queryParam() in below fiddle
    var anotherId = queryParam("another_id");
    //console.log(id);
    //console.log("page show", evt, data);
    $(evt.target).find("#queryData").text(id);
    $(evt.target).find("#queryData1").text(anotherId);
}); 
```

完整源[http://jsfiddle.net/dhavaln/MPmJH/](http://jsfiddle.net/dhavaln/MPmJH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:24:46.667

我找到了一个简单的解决方案，它是**window.sessionStorage**。

在我的特定情况下，我单击 URL/链接，获取 href（这是我的 id 所在的位置），将其保存为**window.sessionStorage**，将**window.location**更改为新页面并执行我的 JSON 魔术。

编码：

在“A”页上：

```
$('a').live('click', function(){

        var currentID = $(this).attr('href');

        window.sessionStorage.setItem('parentId', currentID);

        window.location = 'page-B.html';

        return false;

        }); 
```

在“B”页上：

```
var parentId = sessionStorage.getItem('parentId');

$.ajax({
 url: 'http://www.url.com/file.json?id=' + parentId + '',
 dataType: 'json',
 success: function(data) {
    alert('Success!');
 }
}); 
```

瓦拉！希望这会帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:04:56.910

您可以使用全局变量来解决您的问题，而不是传递查询字符串（网址数据）。

前任：

```
// Your global variable 
var global_varible = ''; 
```

在页面 A 中，

全局变量=你的数据；

在页面 B 中，您可以访问 global_variable

# php - 我如何使用 PHP 读取 URL（这是浏览器中返回的 url）

> ID：10911892
> 
> 赞同：0
> 
> 时间：2012-06-06T09:53:11.660
> 
> 标签：php

[http://www.local.com/?code=xxxxxxxxxxxxxxxxxxxxxxxx](http://www.local.com/?code=xxxxxxxxxxxxxxxxxxxxxxxx)

我想在 PHP 中检索和保存代码参数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T09:56:23.317

你可以试试这个

```
$code = $_GET['code']; 
```

现在`$code`将具有 url 中的代码值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:00:43.253

也许这会起作用：

```
<?php $code = $_GET['code']; ?> 
```

`$code`现在应该`code`在 URL 中有 。

有关详细信息`$_GET`，请参阅[此页面](http://www.php.net/manual/en/reserved.variables.get.php)。

# search - dijit.Tree 搜索和刷新

> ID：10911895
> 
> 赞同：2
> 
> 时间：2012-06-06T09:53:17.833
> 
> 标签：search, dojo, dijit.tree

我似乎不知道如何使用 ItemFileWriteStore 和 TreeStoreModel 在 dijit.Tree 中进行搜索。一切都是声明性的，我使用的是 Dojo 1.7.1，这是我目前所拥有的：

```
<input type="text" dojoType="dijit.form.TextBox" name="search_fruit" id="search_fruit" onclick="search_fruit();">
<!-- store -->
<div data-dojo-id="fruitsStore" data-dojo-type="dojo.data.ItemFileWriteStore" clearOnClose="true" urlPreventCache="true" data-dojo-props='url:"fruits_store.php"'></div>
<!-- model -->
<div data-dojo-id="fruitsModel" data-dojo-type="dijit.tree.TreeStoreModel" data-dojo-props="store:fruitsStore, query:{}"></div>
<!-- tree -->
<div id="fruitsTree" data-dojo-type="dijit.Tree"
     data-dojo-props='"class":"container",
     model:fruitsModel,
     dndController:"dijit.tree.dndSource",
     betweenThreshold:5,
     persist:true'>
</div> 
```

fruits_store.php 返回的 json 是这样的：

```
{"identifier":"id",
 "label":"name",
 "items":[{"id":"OYAHQIBVbeORMfBNZXFGOHPdaRMNUdWEDRPASHSVDBSKALKIcBZQ","name":"Fruits","children":[{"id":"bSKSVDdRMRfEFNccfTZbWHSACWbLJZMTNHDVVcYGcTBDcIdKIfYQ","name":"Banana"},{"id":"JYDeLNIGPDBRMcfSTMeERZZEUUIOMNEYYcNCaCQbCMIWOMQdMEZA","name":"Citrus","children":[{"id":"KdDUfEDaKOQMFNJaYbSbAcAPFBBdLALFMIPTFaYSeCaDOFaEPbJQ","name":"Orange"},{"id":"SDWbXWbTWKNJDIfdAdJbbbRWcLZFJHdEWASYDCeFOZYdcZUXJEUQ","name":"Lemon"}]},{"id":"fUdQTEZaIeBIWCHMeBZbPdEWWIQBFbVDbNFfJXNILYeBLbWUFYeQ","name":"Common ","children":[{"id":"MBeIUKReBHbFWPDFACFGWPePcNANPVdQLBBXYaTPRXXcTYRTJLDQ","name":"Apple"}]}]}]} 
```

使用网格而不是树，我的 search_fruit() 函数看起来像这样：

```
function search_fruit() {
  var grid = dijit.byId('grid_fruits');
  grid.query.search_txt = dijit.byId('search_fruit').get('value');
  grid.selection.clear();
  grid.store.close();
  grid._refresh();
} 
```

如何使用树实现相同的目标？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:19:32.427

a 的刷新`dijit.Tree`变得有点复杂，因为涉及到一个模型（在网格 afaik 中是内置的，网格组件实现了查询功能）

### 通过商店执行搜索

但是如何搜索，使用`ItemFileReadStore`. 语法是这样的：

```
myTree.model.store.fetch({
   query: {
      name: 'Oranges'
   },
   onComplete: function(items) { 
     dojo.forEach(items, function(item) { 
        console.log(myTree.model.store.getValue(item, "ID"));
     });
   }
}); 
```

### 仅显示搜索结果

如上所示，存储将获取，完整的有效负载放入其 _allItemsArray 并且存储查询引擎然后过滤掉它通过查询参数告诉 fetch 方法的内容。在任何时候，我们都可以在 store 上调用 fetch，即使没有为 json 内容发送 XHR - 带有查询参数的 fetch 可以被认为是一个简单的过滤器。

让知道这个查询变得稍微有趣一些`Model`。如果你这样做，它只会`treeNode`根据返回的结果创建 s 来填充树`store.fetch({query:model.query});`

因此，不是通过回调发送 store.fetch，而是让 _try 设置模型查询并更新树。

```
// seing as we are working with a multi-parent tree model (ForestTree), the query Must match a toplevel item or else nothing is shown
myTree.model.query = { name:'Fruits' };
// below method must be implemented to do so runtime
// and note, that the DnD might become invalid
myTree.update(); 
```

### 使用来自商店的新 xhr 请求刷新树

您需要完全按照您对商店的做法进行操作。关闭它，然后重建模型。模型包含所有`TreeNode`s（在它的根节点下），并且它`Tree`本身映射了一个需要清除的 itemarray 以避免内存泄漏。

因此，执行以下步骤将重建树 - 但是此示例没有考虑到，如果您激活了 DnD，dndSource/dndContainer 仍将引用旧 DOM，从而“保持活动”以前的 DOMNode 层次结构（隐藏的 ofc） .

通过告诉模型它的 rootNode 是`UNCHECKED`，它的子节点将被检查更改。一旦树完成它，这反过来将产生子层次结构`_load()`

关闭商店（以便商店执行新的 fetch()）。

```
 this.model.store.clearOnClose = true;
  this.model.store.close(); 
```

从 dijit.Tree 中完全删除每个节点

```
 delete this._itemNodesMap;
  this._itemNodesMap = {};
  this.rootNode.state = "UNCHECKED";
  delete this.model.root.children;
  this.model.root.children = null; 
```

销毁小部件

```
 this.rootNode.destroyRecursive(); 
```

重新创建模型，（再次使用模型）

```
 this.model.constructor(this.model) 
```

重建树

```
 this.postMixInProperties();
  this._load(); 
```

[信用](http://mail.dojotoolkit.org/pipermail/dojo-interest/2010-April/045180.html)；这样一来，范围就在 dijit.Tree 上：

```
new dijit.Tree({

    // arguments
    ...
    // And additional functionality
    update : function() {
      this.model.store.clearOnClose = true;
      this.model.store.close();
      delete this._itemNodesMap;
      this._itemNodesMap = {};
      this.rootNode.state = "UNCHECKED";
      delete this.model.root.children;
      this.model.root.children = null;
      this.rootNode.destroyRecursive();
      this.model.constructor(this.model)
      this.postMixInProperties();
      this._load();
    }
}); 
```

# authentication - Tomcat 7.0.14 LDAP 认证

> ID：10911897
> 
> 赞同：6
> 
> 时间：2012-06-06T09:53:22.830
> 
> 标签：authentication, tomcat, ldap

我有一个在 Tomcat 7.0.14 上运行的 Web 应用程序，并且我正在使用 LDAP 进行用户身份验证。问题是，当用户在非活动期后登录时，会出现以下警告。非活动期不必很长，因为只需几分钟就足够了。但是，尽管出现警告，用户仍可以登录。从用户的角度来看，应用程序运行正常，但 Tomcat 日志显示以下警告。

```
Jun 6, 2012 9:41:19 AM org.apache.catalina.realm.JNDIRealm authenticate  
WARNING: Exception performing authentication  
javax.naming.CommunicationException [Root exception is java.io.IOException: connection closed]; remaining name ''  
        at com.sun.jndi.ldap.LdapClient.authenticate(LdapClient.java:157)  
        at com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2685)  
        at com.sun.jndi.ldap.LdapCtx.ensureOpen(LdapCtx.java:2593)  
        at com.sun.jndi.ldap.LdapCtx.ensureOpen(LdapCtx.java:2567)  
        at com.sun.jndi.ldap.LdapCtx.doSearch(LdapCtx.java:1932)  
        at com.sun.jndi.ldap.LdapCtx.doSearchOnce(LdapCtx.java:1924)  
        at com.sun.jndi.ldap.LdapCtx.c_getAttributes(LdapCtx.java:1317)  
        at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_getAttributes(ComponentDirContext.java:231)  
        at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:139)  
        at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:127)  
        at javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:140)  
        at org.apache.catalina.realm.JNDIRealm.bindAsUser(JNDIRealm.java:1621)  
        at org.apache.catalina.realm.JNDIRealm.checkCredentials(JNDIRealm.java:1480)  
        at org.apache.catalina.realm.JNDIRealm.authenticate(JNDIRealm.java:1131)  
        at org.apache.catalina.realm.JNDIRealm.authenticate(JNDIRealm.java:1016)  
        at org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:282)  
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:440)  
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)  
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)  
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)  
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)  
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)  
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)  
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)  
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)  
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)  
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)  
        at java.lang.Thread.run(Thread.java:636)  
Caused by: java.io.IOException: connection closed  
        at com.sun.jndi.ldap.LdapClient.ensureOpen(LdapClient.java:1576)  
        at com.sun.jndi.ldap.LdapClient.authenticate(LdapClient.java:155)  
        ... 27 more 
```

LDAP 配置位于应用程序的 context.xml 文件中：

```
<Realm className="org.apache.catalina.realm.JNDIRealm"  
    connectionURL="ldaps://ldap-company.com"  
    userPattern="uid={0},dc=company,dc=com"  
    roleBase="ou=groups,o=company"  
    roleName="uid"  
    roleSearch="uniqueMember={0}"  
    roleSubtree="true" /> 
```

我从几个论坛上找到了有关此问题的帖子，但似乎没有人找到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T07:32:57.863

我能够找出警告的原因以及摆脱它的方法。

警告的原因是 LDAP 服务器正在关闭所有空闲超过 5 分钟的连接。LDAP 服务器管理员告诉我，建议在每次登录请求后立即关闭连接，因为可用句柄的数量是有限的。然而，Tomcat 的 JNDIRealm 并没有提供配置它的方法，所以我通过扩展 JNDIRealm 类并覆盖 authenticate(..) 方法解决了这个问题。需要做的就是在每个身份验证请求之后关闭与 LDAP 服务器的连接，并且警告消失了。

请注意，包需要与 JNDIRealm 类相同，否则无法访问上下文变量。

```
package org.apache.catalina.realm;

import java.security.Principal;

public class CustomJNDIRealm extends JNDIRealm {
  @Override
  public Principal authenticate(String username, String credentials) {
  Principal principal = super.authenticate(username, credentials);

    if (context != null) {
      close(context);
    }
    return principal;
  }
} 
```

生成的jar需要放在Tomcat的lib文件夹下，并将应用程序context.xml中的className改为org.apache.catalina.realm.CustomJNDIRealm。然后只需重新启动 Tomcat 就可以了。

```
<Realm className="org.apache.catalina.realm.CustomJNDIRealm"  
  connectionURL="ldaps://ldap-company.com"  
  userPattern="uid={0},dc=company,dc=com"  
  roleBase="ou=groups,o=company"  
  roleName="uid"  
  roleSearch="uniqueMember={0}"  
  roleSubtree="true" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-13T10:08:02.813

我正在回答，因为这对我来说是当前的研究主题，因为我们目前扩展了 JNDIRealm 以满足我们的需求。

该领域将在警告后重试，因此建议的补丁只是美化日志文件。更高版本的tomcat（7.0.45 iirc）将美化日志消息以明确表示已完成重试尝试。

如果你想让领域每次都使用新连接进行身份验证，使用这个类就足够了（我还没有测试过这个实现，但是如果我们的领域已经完成了）：

```
package org.apache.catalina.realm;

import java.security.Principal;

public class CustomJNDIRealm extends JNDIRealm {
  @Override
  public Principal authenticate(String username, String credentials) {
    Principal principal = null;
    DirContext context = null;
    try {
       context = open();
       principal = super.authenticate(context, username, credentials);
    }
    catch(Throwable t) {
       // handle errors
       principal = null;
    }
    finally {
       close(context); // JNDIRealm close() takes care of null context
    }

    return principal;
  }

  @Override
  protected DirContext open() throws NamingException {

      // do no longer use the instance variable for context caching
      DirContext context = null;

      try {

          // Ensure that we have a directory context available
          context = new InitialDirContext(getDirectoryContextEnvironment());

      } catch (Exception e) {

          connectionAttempt = 1;

          // log the first exception.
          containerLog.warn(sm.getString("jndiRealm.exception"), e);

          // Try connecting to the alternate url.
          context = new InitialDirContext(getDirectoryContextEnvironment());

      } finally {

          // reset it in case the connection times out.
          // the primary may come back.
          connectionAttempt = 0;

      }

      return (context);

  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:27:44.853

LDAP 服务器在一定时间后断开已经空闲的空闲连接，即没有请求传输。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-18T22:14:55.153

基本上添加一个`keepaliveTimeout`覆盖连接超时（大约 5 分钟）解决了我的场景中的问题，即文件`keepaliveTimeout ="-1"`中连接器元素的属性`server.xml`

```
keepAliveTimeout="-1" 
```

# jquery - Fancy Box IE 错误“控制台”未定义

> ID：10911904
> 
> 赞同：2
> 
> 时间：2012-06-06T09:53:51.113
> 
> 标签：jquery, fancybox

我在 facebook 的粉丝专页中添加了精美的盒子。当我第一次单击图像时，它运行良好。在我再次进入页面后的第二次，我只看到黑屏没有弹出的图像和内容。谁能告诉我这有什么问题。

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
    Timestamp: Wed, 6 Jun 2012 09:21:33 UTC

Message: 'console' is undefined
Line: 688
Char: 13
Code: 0
URI: https://url.com/fanpages/health-stream/fancybox/jquery.fancybox-1.3.4.js?v=6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:58:37.980

`console`只要开发者控制台未打开，Internet Explorer 就没有该属性。

您可以通过使用（并删除生产版本）包装控制台调用来解决此问题：

```
if(window.console){
        console....
} 
```

如果您返回该页面，则控制台将关闭，因此缺少的`console`属性会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:03:59.257

IE 在命名空间中没有控制台变量。寻找：

```
console.log( something ) 
```

并用：

```
if(console != undefined) {
    console.log( something );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:43:57.707

我在窗口中添加了适合弹出框的代码。错误是针对这一行的，`console.log(window.canvasInfo);` 只是在这一行上添加条件并解决了我的问题。

```
 if(window.console){
                        console.log(window.canvasInfo);
                      } 
```

谢谢大家。

# c# - Silverlight DataGrid 列验证

> ID：10911908
> 
> 赞同：1
> 
> 时间：2012-06-06T09:53:54.267
> 
> 标签：c#, silverlight, binding, mvvm, datagrid

我的应用程序中有一个数据网格，我需要某个数据网格列的值总和等于 100。

如：

一个 20

b 20

c 60

这个是对的

一个 20

b 20

c 62

这个不对

有什么想法可以用 MVVM 广告 INotifyDataErrorInfo 来实现吗？

我现在的问题是，如果我只是将属性绑定到单元格然后抛出 ErrorChanged，datagrid 会将我锁定在我已更改数据的行上，因此除非我恢复原始值以便总和，否则我将无法移动到任何地方该列将再次变为 100。

**请**不要在 CellEdit 上发布各种带有手动验证的代码隐藏解决方案或类似的东西——我可以自己编写这样的脏代码。我正在尝试找到适合绑定和 MVVM 的干净解决方案

**据我所见，尽管**Silverlight 数据网格完全损坏，未完成且没人关心。也许有人知道那里有适当的数据网格。（或者他们实际上在 Silverlight 5 中修复了它？）

**现在使用以下：**

在我的 ViewModel 构造函数中

```
 validator = new Validator(this);
        validator.AddValidationFor(() => PayElements).When(() => _payElements.Where(p1 => (!String.IsNullOrEmpty(p1.Distribution) && FormatChecker.IsDecimal(p1.Distribution, 3, 2))).Sum(p2 => Decimal.Parse(p2.Distribution)) != 100).Show("ERROR!"); 
```

PayElements 是我的集合（顺便说一句，我的错，它实际上是从 _payElements 创建的 ICollectionView，即 ObservableCollection）。然后对任何对象进行 OnChanges

```
 validator.ValidateAll(); 
```

这会导致在构造函数中创建的验证规则被评估。在此之后，我的 viewmodel 的整个对象集合的 errorCOllection 中有错误，但它没有显示任何红色边框。在列表中我可以看到有错误并禁用保存按钮:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:12:30.423

我已经在数据网格上实现了令人讨厌的验证，除非您必须执行异步验证，否则它可以从绑定对象中很好地完成。我不确定您绑定到列表的对象，但我会使用以下内容：

```
public string Col1Wrapper
{
    get
    {
        return this.Col1;
    }
    set
    {
        ValidateRequired("Col1Wrapper", value, "Required");
        ValidateRegularExpression("Col1Wrapper", value, @"^[\d]+$", "Must be digit");
        ValidateTotal(value,Col2,Col3,total);//in your case
        this.Col1 = value;
        this.RaisePropertyChanged("Col1Wrapper");
    }
}

public string Col2Wrapper
{
    get
    {
        return this.Col2;
    }
    set
    {
        ValidateRequired("Col2Wrapper", value, "Required");
        ValidateRegularExpression("Col2Wrapper", value, @"^[\d]+$", "Must be digit");
        ValidateTotal(Col1,value,Col3,total);//in your case
        this.Col2 = value;
        this.RaisePropertyChanged("Col2Wrapper");
    }
}

public string Col3Wrapper
{
    get
    {
        return this.Col3;
    }
    set
    {
        ValidateRequired("Col3Wrapper", value, "Required");
        ValidateRegularExpression("Col3Wrapper", value, @"^[\d]+$", "Must be digit");
        ValidateTotal(Col1,Col2,value,total);//in your case
        this.Col3 = value;
        this.RaisePropertyChanged("Col3Wrapper");
    }
} 
```

然后使用[http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo%28VS.95%29.aspx)

默认实现在示例部分。

```
public bool ValidateRequired(string property, string value, string errorMessage)
{
    bool isValid = true;

    if (value == null || value == string.Empty)
    {
        AddError(property, errorMessage, false);
        isValid = false;
    }
    else RemoveError(property, errorMessage);
    RaiseErrorsChanged(property);
    return isValid;
}

public bool ValidateRegularExpression(string property, string value, string expression, string errorMessage)
{
    ...
}

public bool ValidateTotal(string property,int 1, int 2, int 3, int total, string errorMessage)
{
    if((1+2+3) != total)
        AddError(property, errorMessage, false);
    else RemoveError(property, errorMessage);
} 
```

添加错误方法将触发验证摘要显示在数据网格上。希望这就是你要找的。

# selenium - Selenium2 - 在 CI 上运行测试会导致多个驱动程序实例

> ID：10911909
> 
> 赞同：0
> 
> 时间：2012-06-06T09:53:58.777
> 
> 标签：selenium, continuous-integration, selenium-webdriver, specflow, selenium-chromedriver

对于我们的 BDD 测试，我们使用与 selenium 2 webdriver（本例中的 Chrome 驱动程序）对话的 Specflow。

在本地主机上运行时（是的，“它在我的机器上工作”已经在对话中出现了几次）测试工作正常。他们设置数据和新的 webdriver，进行测试，然后拆除 webdriver 和数据。即使由于我使用了正确的属性而导致测试出现严重错误，拆解总是会被击中，因此`driver.Quit()`会破坏浏览器和驱动程序。

当我使用我们的持续集成 [TeamCity] 在我们的服务器 [Windows Server 2008 r2] 上运行它时，就会出现问题。由于某种原因，它将开始运行多个驱动程序实例，从而导致测试失败。

有没有人遇到过这个问题并找到了解决方法？我们需要一个使用**非** `HtmlUnitDriver`.

额外的信息：

*   语言 = C#
*   服务器 = Windows Server 2008 R2
*   CI = 团队城市

编辑：通过确保尚未创建 Webdriver 来设置 Webdriver，然后创建`ChromeDriver`. 下面的伪/真实代码示例显示了它的设置方式，抱歉，我无法显示完整的代码，因为它有很多绒毛，我们用于我们坚持使用的其他选项（例如 zap 或 fiddler 集成/语言更改等）。

设置

```
[SetUp]
[BeforeScenario()]
public static void BeforeWebScenario()
{
   if driver == null
     driver = new ChromeDriver();
   // Code to start page
} 
```

拆除

```
[TearDown]
[AfterScenario()]
public static void AfterWebScenario()
{
   try
   {
       driver.Quit();
   } catch (Exception)
   {
       throw Exception
   }
   driver = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:59:30.390

我也有这个问题。我通过在我的 testSetup() 方法中杀死任何正在运行的 chromedriver.exe 实例来修复它。我使用了一个 VBScript 和一些 Groovy 代码来运行这些脚本。对不起，这个答案有点长。

我的设置中有这个）：

```
if (wshsc.isRunningByCommandLineContents("chromedriver.exe"))
    wshsc.killProcessByCommandLineContents("chromedriver.exe") 
```

isRunningByCommandLine 内容：

```
If WScript.Arguments.Count = 1 Then

strCmdLine = WScript.Arguments.Item(0)
On Error Resume Next
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set objShell = CreateObject("WScript.Shell")
Set colProcessList = objWMIService.ExecQuery _
    ("Select * from Win32_Process")
If colProcessList.Count > 0 Then
    For Each objItem in colProcessList
        If (InStr(objItem.CommandLine, strCmdLine)) Then
            If (InStr(objItem.CommandLine, "cscript")) Then
            Else
                WScript.StdOut.Write "A process is running with " + strCmdLine + " in its command line = " + objItem.Name
            End If  
        End If
    Next
End If
End If 
```

killProcessByCommandLine 内容：

```
If WScript.Arguments.Count = 1 Then
strProcess = WScript.Arguments.Item(0)
On Error Resume Next
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set objShell = CreateObject("WScript.Shell")
Set colProcessList = objWMIService.ExecQuery _
    ("Select * from Win32_Process")

If colProcessList.Count > 0 Then
    For Each objItem in colProcessList
        If InStr(objItem.CommandLine, strProcess) Then
            If (InStr(objItem.CommandLine, "cscript")) Then
            Else
                WScript.StdOut.Write objItem.Name + " "
                objItem.Terminate()
            End If
        End If
    Next
Else
    WScript.StdOut.Write "No instances found running"
End If
Else
WScript.StdOut.Write "Bad Arguments"
End If 
```

而“运行脚本部分”：

```
public void killProcessByCommandLineContents(String contents) {
    List<String> arg = new ArrayList<String>()
    arg.add(contents)
    String [] args = arg.toArray()
    runScript("killByCmdLineContents.vbs", args, true)
}
public boolean isRunningByCommandLineContents(String contents) {
    List<String> arg = new ArrayList<String>()
    arg.add(contents)
    String [] args = arg.toArray()
    String returnData = runScript("IsRunningByCmdLineContents.vbs", args, true)
    if (returnData.contains(contents)) {
        return true
    } else {
        return false 
    }
}
public String runScript(String name, String [] args, boolean returnOutput) {
    String s = null;
    List<String> cmdLine = new ArrayList<String>()
    cmdLine.add("C://Windows//System32//cscript.exe")
    cmdLine.add(dir + "dir//src//com//misc//wshScripts//" + name)
    int index = 0
    args.each() {
        cmdLine.add(args[index])
        index++
    }

    try {
        String [] cmdLineArray = cmdLine.toArray()
        Process p = Runtime.getRuntime().exec(cmdLineArray, null);
        if (returnOutput) {
            BufferedReader stdInput = new BufferedReader(new InputStreamReader(p.getInputStream()));
            BufferedReader stdError = new BufferedReader(new InputStreamReader(p.getErrorStream()));
            String dataToReturn
            Log.logger.info("Standard output: ");
            while ((s = stdInput.readLine()) != null) {
                Log.logger.info(s)
                dataToReturn = s // should get last line
            }

            Log.logger.info("Standard error: ");
            while ((s = stdError.readLine()) != null) {Log.logger.info(s);}
            return dataToReturn
        } else {
            return ""
        }
    }
    catch (IOException e) {
        Log.logger.info(e.message, e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T16:21:54.257

如果您使用 DriverService 接口，请保持服务直到您完成驱动程序，然后调用 DriverService.stop()。对我来说， driver.quit() 还不够，因为我也在使用 DriverService。

```
driver.close();
driver.quit();
driverService.stop(); 
```

# python - 为什么这两个折叠返回不同的结果只是因为一个缺少初始值？

> ID：10911910
> 
> 赞同：0
> 
> 时间：2012-06-06T09:53:59.157
> 
> 标签：python, functional-programming

我正在尝试查找列表的长度。

```
In [77]: reduce(lambda acc, x: acc + 1, [x for x in range(8)])
Out[77]: 7

In [78]: reduce(lambda acc, x: acc + 1, [x for x in range(8)], 0)
Out[78]: 8 
```

但似乎我需要传递初始值才能使其工作。为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:56:52.240

第一个从第一个元素 (0) 开始，并为其他七个元素加 1。第二个从 0 开始，并为八个元素中的每一个添加 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:56:24.087

如果您不传递起始值，则列表的第一个值将用作起始值，并且永远不会作为`x`参数传递给您的 lambda 函数，因此您实际上会得到`my_list[0] + len(my_list) - 1`结果。

# excel - eBay费用预测

> ID：10911914
> 
> 赞同：0
> 
> 时间：2012-06-06T09:54:16.450
> 
> 标签：excel, math, excel-formula

我正在寻找一个 Excel 公式，它可以帮助我预测列出商品所需的价格，以便从所有产品中获得 20% 的净利润。

**我拥有的数据是**：

1.  易趣和贝宝费用。

（例如：ebay 费用是销售价格的 7% + 0.3 美元

贝宝费用是销售价格的 2.9% + 0.2 美元）

1.  产品成本。

2.  运输费。

***所以***：如果产品售价 50 美元，并且假设运费是免费的，那么我需要以 66.78 美元的价格列出该产品，以便获得 20% = 10 美元的净利润。（易趣费用：4.54 美元 | 贝宝费用：2.24 美元）

如何使用公式预测“$66.78”单元格？

**一些有用的链接**：

1.  [eBay 商店的 eBay.com 费用](http://pages.ebay.com/help/sell/storefees.html)

2.  [易趣费用计算器。](http://www.rolbe.com/ebay.htm)

最好的问候， Tomer S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:08:22.780

根据您提供的信息，您有：

```
Revenue = Selling Price x (1 - % Fees) - Flat Fees - Shipping
Profit = Revenue - Cost 
```

你还想要：

```
Prodit = 20% x Cost 
```

所以你需要：

```
Selling Price = (1.2 x Cost + Flat Fees + Shipping) / (1 - % Fees) 
```

因此，在 Excel 中，您可以使用以下内容（第 12 行及以下内容只是一个检查）：

![易趣和贝宝费用计算](../Images/87fa17365d3be4ca53aef54d7fa9454d.png)

顺便说一句，您的示例的答案是 67.15 美元，而不是 66.78 美元。

# php - 如何在 WordPress - woo-commerce 中集成“giropay”和“sofort-banking”支付？

> ID：10911915
> 
> 赞同：1
> 
> 时间：2012-06-06T09:54:23.100
> 
> 标签：php, wordpress, payment-gateway

我在为德国电子商务网站工作，我需要在 WordPress-woo-commerce 插件中集成 2 种著名的支付方式“giro-pay”和“sofortbanking”。

我已经要求这个来支持 woo commerce 团队，但没有得到任何答复。所以我最后的希望是这样。我知道如果我获得 API，那么我可能可以集成。

如果有人知道这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:22:58.597

**Woothemes**在 wordpress 之上的自己的层中运行，所有电子商务主题都在该层之上运行。

跟进一个教程并在 wordpress 中实现它并不难，但**你真的应该从 WooThemes 得到答案**。

那些家伙**很棒**，我没有任何问题，就是传球有任何问题。直接向他们发送[电子邮件](http://www.woothemes.com/contact-us/)（使用紧急按钮），或向他们[发送推文](https://twitter.com/woothemes)，他们都会看到。

而且，作为付费客户，您也会得到更好的支持。

或者，如果您真的不想要这种方式，您可以随时**搜索**具有您的提供商的现有 wordpress 插件，例如，[MultiSafepay](http://www.multisafepay.com/en/shopplugins-zakelijk/wordpress.html)有一个用于 Giro Pay。

# objective-c - 拨打电话后返回我的应用程序

> ID：10911916
> 
> 赞同：0
> 
> 时间：2012-06-06T09:54:26.987
> 
> 标签：objective-c, ios

在我的应用程序拨打电话后，我想返回我的应用程序。现在，当用户在通话屏幕中点击“结束”时，他总是会看到手机应用程序。如何强制应用返回我原来的应用？

我使用以下方式拨打电话：

```
NSString *phoneURLString = [NSString stringWithFormat:@"tel:%@", phoneNumber];
NSURL *phoneURL = [NSURL URLWithString:phoneURLString];
[[UIApplication sharedApplication] openURL:phoneURL]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:00:57.420

尝试这个.......

```
 UIWebView *callWebview = [[UIWebView alloc] init];   
    NSURL *telURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel://%@", phoneNumber]
   [callWebview loadRequest:[NSURLRequest requestWithURL:telURL]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T07:11:47.337

从您的应用拨打电话后，您可以使用以下代码返回您的应用

```
NSURL *url = [NSURL URLWithString:@"telprompt://phone number"];
[[UIApplication  sharedApplication] openURL:url]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T09:58:18.063

没有越狱就没有办法做到这一点。

# objective-c - 调用 stopUpdatingLocation 时 locationManager:didEnterRegion 是否有效

> ID：10911917
> 
> 赞同：1
> 
> 时间：2012-06-06T09:54:27.233
> 
> 标签：objective-c, ios, core-location

我想知道`CLLocationManager`代表是否喜欢`didEnterRegion`并`didExitRegion`在`stopUpdatingLocation`被调用时工作，或者`startUpdatingLocation`必须一直调用该方法才能使它们被调用？

另一件事是开始区域监控的最佳位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:57:07.753

如果您的应用程序进入后台，您应该调用`stopUpdatingLocation`以保存能量。如果您使用`startMonitoringForRegion:desiredAccuracy:`您的委托方法`didEnterRegion`并将`didExitRegion`被相应地调用，即使您的应用程序处于后台/暂停状态。另一种选择是使用`startMonitoringSignificantLocationChanges`. 然后您的应用将从暂停或终止状态中唤醒。

# haskell - 用hxt提取多个html表

> ID：10911918
> 
> 赞同：2
> 
> 时间：2012-06-06T09:54:27.570
> 
> 标签：haskell, hxt

我的问题是我必须从 html 文档中提取所有表格并将它们放入表格列表中。

因此我明白结束函数类型应该是

```
getTable :: a [XmlTree] [[String]] 
```

例如使用以下 xml：

```
<table class="t1">
<tr>
    <td>x</td>
    <td>y</td>
</tr>
<tr>
    <td>a</td>
    <td>b</td>
</tr>
</table>
<table class="t2">
<tr>
    <td>3</td>
    <td>5</td>
</tr>
<tr>
    <td>toto</td>
    <td>titi</td>
</tr>
</table> 
```

我知道如何从一个xmlTree（example1）或所有为我提供类型[XmlTree]的标签“tables”中检索所有行，但我不知道如何在test2的结果中映射箭头example1。

我确定它很明显，但我找不到它。

```
test2 ::  IO [[XmlTree]]
test2 = runX $ parseXML "table.xml" >>> is "table">>> listA getChildren

example1 ::  ArrowXml a => a XmlTree [String]
example1  = is "table" /> listA (getChildren >>> is "td"  /> getText) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:19:56.423

使用与您相同的一般想法`example1`，我们可以`getTable`这样写

```
getTable :: ArrowXml a => a XmlTree [[String]]
getTable =  hasName "table" >>> listA (rows >>> listA cols) where
    rows = getChildren >>> hasName "tr"
    cols = getChildren >>> hasName "td" /> getText 
```

在示例文档上运行箭头会产生

```
[[["x","y"],["a","b"]],[["3","5"],["toto","titi"]]] 
```

# wpf - WPF ComboBox 水平滚动条

> ID：10911921
> 
> 赞同：1
> 
> 时间：2012-06-06T09:54:33.377
> 
> 标签：wpf, combobox, scrollbar

我有`ComboBox`一些大项目，我想要一个水平滚动条。这可能吗？

# git - 获取托管在 github 上的 repo 的 git 分支列表

> ID：10911923
> 
> 赞同：9
> 
> 时间：2012-06-06T09:54:39.370
> 
> 标签：git, github, github-api

是否有命令行方式来获取托管在 GITHUB 中的存储库中可用的分支列表（无需从克隆中创建和运行命令）？

我尝试在显示分支列表并获取内容的 url 上使用 curl。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T09:56:44.517

```
git ls-remote --heads <repo-url> 
```

[的手册页`git ls-remote`](http://git-scm.com/docs/git-ls-remote)。

例如，要 git 的分支 git repo 使用

```
$git ls-remote --heads git://github.com/git/git.git      
121f71f0da1bc9a4e1e96be2c3e683191a82a354    refs/heads/maint
f623ca1cae600e97cb0b38131fdd33e4fb669cf8    refs/heads/master
8e148144574e6c6511b591286e44a677a260d760    refs/heads/next
fcdb578342aeaf355c296026af08093b20aab9b4    refs/heads/pu
5321cb29c8f709669c5e4a04f502cd984623592c    refs/heads/todo 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-24T19:46:46.900

使用 GitHub API：向用户名reponame
发送一个 GET HTTP 请求 回复应该是一个对象数组，其属性是分支名称。
`https://api.github.com/repos/``/``/branches`
`name`

来源：
[https ://developer.github.com/v3/repos/#list-branches](https://developer.github.com/v3/repos/#list-branches)

# syntax - 有没有 2+3*5 不是 17 的语言？

> ID：10911926
> 
> 赞同：3
> 
> 时间：2012-06-06T09:54:55.653
> 
> 标签：syntax, programming-languages, compilation, operators, expression-trees

那么问题来了，有`2+3*5`没有不是 17 的编程语言？我发现这个问题是对我的教师的一项旧测试，并引起了我的注意。没什么大不了的，但我很怀疑。加号是为什么不呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T10:10:02.633

根据[这个页面](http://en.wikipedia.org/wiki/Order_of_operations#Programming_languages)，Smalltalk 会产生不同的结果：

> 在 APL 评估中严格从右到左，在 Smalltalk 中严格从左到右

APL 会巧合地得到正确的结果——它会在 . 上得到一个意想不到的值`3*5+2`。

# tomcat - 需要在同一台服务器机器上使用 Tomcat 6.0 和 Glassfish v3

> ID：10911935
> 
> 赞同：0
> 
> 时间：2012-06-06T09:55:12.787
> 
> 标签：tomcat, glassfish

目前我们有一台服务器，其中一个应用程序部署在 Tomcat 6.0 上，现在我们还有一个 KM 应用程序在 Glassfish v3 上。

Tomcat 和 Glassfish 是共存的服务吗？

我们可以将 Tomcat 和 Glassfish 放在同一台机器上吗？

两个应用程序都工作正常还是这两个服务器有任何问题？

请提供指导方针。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:45:03.140

Tomcat 和 Glassfish 都将在各自的 JVM 中运行。

只要两者都有足够的资源，并且端口被配置为不冲突（例如，默认情况下两者都在端口 8080 上侦听 HTTP 请求） - 应该没有固有的冲突。

# java - 从 html 表格单元格中获取内容值并使用 javascript 使其显示在文本框中

> ID：10911936
> 
> 赞同：0
> 
> 时间：2012-06-06T09:55:14.187
> 
> 标签：java, javascript, html, jsp

我在从可滚动的 HTML 表格的单元格中检索值时遇到问题。我已经修改了一些 javascript 代码，但它们似乎不起作用。请帮助我，我对javascript很陌生。这是我的以下代码：

## Javascript

```
var rowIndex = 0;
var cellIndex = 0;
var nTable = "";
var nRows = 0;
var nCells = 0;

function showCoords(r,c)
{
    rowIndex = r;
    cellIndex = c;
    if(r!=0 && nTable.rows[r].cells[c].tagName != "th")
    {
var selectedValue = nTable.rows[r].cells[0].innerHTML;
        document.getElementById('celldata1').value=selectedValue;
var selectedValue = nTable.rows[r].cells[1].innerHTML;
        document.getElementById('celldata2').value=selectedValue;
var selectedValue = nTable.rows[r].cells[2].innerHTML;
        document.getElementById('celldata3').value=selectedValue;
    }
}

function getCoords(currCell)
{
    for (i=0; i<nRows; i++)
    {
        for (n=0; n<nCells; n++)
        {
            if (nTable.rows[i].cells[n] == currCell)
            {
                showCoords(i,n);
            }
        }
    }
}

function mapTable()
{
    nTable = document.getElementsByTagName("table")[1]

    nRows = nTable.rows.length;
    nCells = nTable.rows[0].cells.length;
    for (i=0; i<nRows; i++)
    {
        for (n=0; n<nCells; n++)
        {
            nTable.rows[i].cells[n].onclick = function()
            {
                getCoords(this);                    
            }
            nTable.rows[i].cells[n].onmouseover = function()
            {
                this.style.cursor = 'pointer';              
            }
        }
    }

}

onload=mapTable; 
```

我不确定上述 javascript 代码的语法或逻辑是否出错，但如果有人帮助我指出它们，我会很高兴。

## HTML 代码：-

### 头

```
 <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <title>My Content</title>
        <link rel="stylesheet" text="css/text" href="mycss.css" title=""></link> 
        <script type ="text/javascript" src="test.js"></script>     
    </head> 
```

### 身体部分 1

这是我希望从 tableone 的每个单元格相应地显示在每个文本框中的值的部分。

```
 <body>

           <table border="0">
                <tbody>

                    <tr>
                        <td>Content 1:</td>
                        <td><input id="celldata1" type="text" name="content1" value="" /></td>
                    </tr>

                    <tr>
                        <td>Content 2:</td>
                        <td><input id="celldata2" type="text" name="content2" value="" /></td>
                    </tr>

                    <tr>
                        <td>Content 3:</td>
                        <td><input id="celldata3" type="text" name="content3" value="" /></td>
                    </tr>

                </tbody>
            </table> 
```

### 身体部分 2

这是桌面。

```
 <table border="1" id="tableone">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Content 1</th>
                        <th>Content 2</th>
                        <th>Content 3</th>

                    </tr>
                </thead>

                <tbody> 
                    <%! int i;%>

                    <%for(int i=0; i<50; i++){%>

                        <tr>
                        <td><%=i+1%></td>
                        <td></td>
                        <td></td>
                        <td></td
                        </tr>

                    <%}%>
            </tbody>
            </table>
        </div> 
```

顺便说一句，如果我的英语不好，请见谅 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:26:21.030

我为此使用 jQuery：

```
// Iterate throught rows of table:
jQuery("table").find("tr").each( function() {

    var currentRow = jQuery(this);

    // Iterate throught cell in current row: 
    currentRow.find("td").each(function() {

        var currentCell = jQuery(this);
        // Do what you want with cell
    });
}); 
```

# java - 使用 POI API 创建 XLSX

> ID：10911938
> 
> 赞同：0
> 
> 时间：2012-06-06T09:55:18.273
> 
> 标签：java, apache-poi, xlsx

我正在尝试使用 POI API 创建 XLSX 文件，但发生了错误..

**java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.setSaveAggressiveNamespaces()Lorg/apache/xmlbeans/XmlOptions; 在 org.apache.poi.POIXMLDocumentPart.(POIXMLDocumentPart.java:56)**

我无法弄清楚这个错误的原因，请帮帮我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:10:52.327

[这](https://stackoverflow.com/questions/3031437/unable-to-use-xssf-with-excel-2007)是一个类似的问题。问题似乎是在您的类路径中同时包含 xbean.jar 和 xmlbeans.jar，或者类路径中缺少 dom4j.jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:23:04.873

看起来您的类路径中有旧版本的 XmlBeans。Apache POI 需要 XMLBeans 2.3 或更高版本（新的很好，旧的不行！）。有关依赖项的详细信息，请参阅[组件页面](http://poi.apache.org/overview.html#components)，您也可以在二进制下载中获得这些依赖项。只需删除旧版本，确保存在足够新的 xmlbeans 版本，就可以了！

# windows - 如何我的应用程序可以写入文件而无需在管理员下运行

> ID：10911944
> 
> 赞同：1
> 
> 时间：2012-06-06T09:55:33.747
> 
> 标签：windows, windows-7

我的应用程序是在 Win 7 上开发的。我以标准用户身份登录并在管理员下运行我的应用程序（右键单击并选择“以管理员身份运行”），程序可以在“程序文件”中写入文件。但是如果我通过双击运行应用程序，应用程序运行失败。

我不想在清单文件上设置 UAC，因为它总是显示 UAC 提示。

如何为我的应用设置可写权限或管理员权限？

请帮我，

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:03:01.523

只有管​​理员下的应用程序才能写入“程序文件”。您应该将 %AppData% 用于常见任务。

# string - 使用 sed 删除类似文件中存在的行

> ID：10911947
> 
> 赞同：1
> 
> 时间：2012-06-06T09:56:12.447
> 
> 标签：string, bash, replace, sed

我有一个来自原始驱动器和复制驱动器的文件列表，分别由 985257 行和 984997 行组成。

由于行数不匹配，我确信某些文件没有重复。

为了确定哪些文件不存在，我希望使用 sed 通过从源列表中删除重复列表中存在的任何行来过滤原始文件列表。

我曾考虑在 excel 中使用匹配公式，但由于程序崩溃的行数。我认为在 sed 中使用这种方法将是一个可行的选择。

然而，到目前为止，我的方法没有成功。

```
 echo "Start"
 # Cat the passed argument which is the duplicate file listing
 for line in $(cat $1)
 do 
   #sed the $line variable over the larger file and remove
   #sed  "${line}/d"  LiveList.csv
   #sed -i "${line}/d"  LiveList.csv
   #sed -i '${line}' 'd'  LiveList.csv
   sed -i "s/'${line}'//" /home/listings/LiveList.csv
 done 
```

有一个临时文件被创建并填充到列表文件的 103.4mb，但是列表文件本身根本没有改变。

我的另一个担忧是，由于列表是在 Windows 中创建的，因此“\”字符可能会转义字符串，导致不匹配，因此不会进行更改。

```
Example path:
Path,Length,Extension
Jimmy\tail\images\Jimmy\0001\0014\Text\A0\20\A056TH01-01.html,71982,.html 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:16:00.767

这可能对您有用：

```
sort orginal_list.txt duplicate_list.txt | uniq -u 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:04:22.713

我想到的第一件事就是`rsync`尽可能快地复制丢失的文件。它真的很神奇。

如果没有，您可以先对这两个文件进行排序，以确定它们的不同之处。您可以使用一些`paste`技巧来并排差异，甚至使用`diff`并排输出。订购文件时，我认为`diff`很容易识别添加了哪些行。

# sql - Oracle 1:n 高效查询

> ID：10911953
> 
> 赞同：0
> 
> 时间：2012-06-06T09:56:30.200
> 
> 标签：sql, database, oracle

我有两个表 A 和 B，其中 A 中的一条记录映射到 B 中的几条记录。有一个查询显示表 A 的记录，以及表 B 中的所有映射记录在一行中，例如：

```
TABLE A
--------
ID  Name  Tag ......
1    X    213
2    Y    222

TABLE B
--------
ID    ACCESS_AREA
1     101
1     104
1     105
2     101
2     103 
```

查询类似于：

```
SELECT ID,
       Name,
       Tag ,.....,
       (SELECT WM_CONCAT(ACCESS_AREA)
          FROM B
          WHERE ID = A.ID ) Access_areas
  FROM A 
```

虽然上述方法有效，但查询的性能非常低，因为两个表中的记录数都非常大。对结果进行任何过滤或排序都会`access_areas`导致性能进一步下降。

我们考虑过使用物化视图预先计算值，以便它成为简单的连接，但 mv 不允许使用聚合函数在提交时快速刷新此类查询。

另一种选择是向表 A 添加一列，其中包含来自 B 的计算值，并在表 B 上使用触发器来更新新列（如果进行了任何更改）。但这也不可行，因为您无法查询触发器所在的同一个表。

作为最后的手段，我们决定实现第二个选项并通过应用程序代码更新列，这非常繁琐。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:14:19.140

您没有显示查询的 EXPLAIN 计划，也没有显示表的索引。但更重要的是，您还没有告诉我们您正在使用这些数据做什么——为什么您需要一次访问大量数据？为什么你需要对结果进行去污？

您可以创建一个包含物化视图和自拍摄快照以来更新的原始数据的视图（并可能删除不再有效的更新条目），但不了解数据的使用方式/是否更新过而不仅仅是添加到它实际上不可能就具体细节提供建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:57:50.487

**1\. 替换`WM_CONCAT`为`LISTAGG`或`COLLECT`。**

由于 SQL 和 PL/SQL 之间频繁的上下文切换，大型字符串聚合可能非常昂贵。 `WM_CONCAT`, 和`STRAGG`, 非常流行，但它们都非常低效。如果您使用的是 11gR2，请始终使用`LISTAGG`. 如果您还没有使用 11gR2，请使用该`COLLECT`方法。 [此页面](http://www.oracle-developer.net/display.php?id=515)解释了不同的方法并进行了一些性能比较。

**2.物化视图。**

我知道你说你已经尝试过了，而且我对物化视图没有太多经验，但我认为它们应该在这种情况下工作。rowid 物化视图不起作用，但[主键物化视图](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_6002.htm#SQLRF54164)应该。

（除非有其他特定原因阻止它，在这种情况下，我们可能需要所有细节来解决问题：表的完整查询和 DDL、物化视图和物化视图日志。）

**3\. 解释计划。**

正如 symcbean 所提到的，这可能是一个计划问题。如果您只使用少量行，是否正在使用索引？但除了解释计划之外，我们还需要了解您对此查询的期望。如果查询需要一秒钟，但返回 200KB 的数据，那么您的网络或浏览器可能是真正的瓶颈。

* * *

我不确定#2 或#3 是否会有所帮助，但您应该始终实施#1。我认为`WM_CONCAT`并`STRAGG`成为错误 - 当有更好的选择时，没有充分的理由使用它们。

# windows-phone-7 - 当我在执行页面导航后尝试使用上下文菜单从列表框项中检索对象时出现 NullReferenceException

> ID：10911959
> 
> 赞同：2
> 
> 时间：2012-06-06T09:56:48.617
> 
> 标签：windows-phone-7, xaml, listbox, contextmenu

我有一个里面有 ContextMenu 的 ListBox。

XAML

```
<ListBox ItemsSource="{Binding}"
                         Name="recipesListBox"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch"
                         Grid.Row="1"
                         Margin="12,0,12,0"
                         Loaded="recipesListBox_Loaded"
                         SelectionChanged="recipesListBox_SelectionChanged" >
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="HorizontalAlignment" Value="Stretch" />
                            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        </Style>
                    </ListBox.ItemContainerStyle>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Name="listBoxItemBoarder" BorderBrush="White" BorderThickness="1" Margin="0,0,0,10" 
                                    Background="Black" Height="118" HorizontalAlignment="Stretch" >
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <Canvas>
                                        <Image Source="{Binding Image}" Height="116" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                                    </Canvas>
                                    <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch" Margin="100,0,0,0">
                                        <TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="22" />
                                        <TextBlock Text="{Binding Category}" />
                                        <TextBlock Text="{Binding IngredientsStringWithoutAmounts}" Width="329" TextWrapping="Wrap" Height="56" TextTrimming="WordEllipsis" FontStyle="Italic" />
                                    </StackPanel>
                                    <toolkit:ContextMenuService.ContextMenu>
                                        <toolkit:ContextMenu Name="allCocktailsContextMenu">
                                            <toolkit:MenuItem Header="{Binding Path=AppResources.MainPage_PivotItem_AllCocktails_allCocktailsContextMenu_Header_AddFav, Source={StaticResource LocalizedStrings}}" Click="MenuItem_Click" />
                                            <toolkit:MenuItem Header="{Binding Path=AppResources.MainPage_PivotItem_AllCocktails_allCocktailsContextMenu_Header_MarkTried, Source={StaticResource LocalizedStrings}}" Click="MenuItem_Click" />
                                        </toolkit:ContextMenu>
                                    </toolkit:ContextMenuService.ContextMenu>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

C＃

```
private void MenuItem_Click(object sender, RoutedEventArgs e)
        {
            MenuItem menuItem = (MenuItem)sender;
            ListBoxItem selectedListBoxItem = this.recipesListBox.ItemContainerGenerator.ContainerFromItem((sender as MenuItem).DataContext) as ListBoxItem;
            string message = "You pressed " + menuItem.Header.ToString() + ".\n";
            try
            {
                Recipe selectedRecipe = selectedListBoxItem.DataContext as Recipe;
                message += "Selected recipe: " + selectedRecipe.Name + ", " + selectedRecipe.ID;
            }
            catch (NullReferenceException exc)
            {
                Debug.WriteLine(exc.ToString());
                message += "NullReferenceException :(";
            }
            MessageBox.Show(message, "Info", MessageBoxButton.OK);
        } 
```

ListBox 在我的应用程序的 MainPage 中，当我尝试检索与 ContextMenu 绑定的对象时，一切正常，但是，当我执行页面导航并返回我的 MainPage 后，如果我再次尝试检索对象，我得到NullReferenceException。我在 WP 编码方面真的很年轻，而且我没有使用 MVVM 模式，这是我的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:15:09.280

您要在哪个对象上获得 Null？它可能是你的 DataContext 但没有错误的对象很难说

# c# - for循环中的新对象

> ID：10911962
> 
> 赞同：1
> 
> 时间：2012-06-06T09:56:55.403
> 
> 标签：c#, loops, for-loop

我对这段代码很生气：

```
for (int h = 0; h < invocations; h++)
{
    Filter newFilter = new Filter();
    newFilter = customFilter;
    newFilter.DateFrom = customFilter.DateFrom.AddDays(h*8);
    newFilter.DateTo = newFilter.DateTo.AddDays(8).AddSeconds(-1); 
```

**customFilter 是一个过滤器类型的对象** customFilter 是一个对象，其中包含大约 10 个正确填充的属性。我需要创建一个新对象，但我只需要更改这 10 个对象中的两个：DateFrom 和 DateTo。问题是在分配了 newFilter.DateFrom 和 newFilter.DateTo 之后，customFilter.DateFrom 和 customFilter.DateTo 也发生了变化。有人可以帮助我吗？

再见M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:59:25.737

删除该行`newFilter = customFilter;`并手动复制每个属性。

上面的行将引用复制`customFilter`到`newFilter`变量中，替换您刚刚创建的新过滤器。`newFilter`并`customFilter`在此操作后指向完全相同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:00:18.293

`newFilter`只是一个变量。我假设`Filter`是一个类；在这种情况下，当你这样做时：

```
Filter newFilter = new Filter();
newFilter = customFilter; 
```

你可以**忘记**`new Filter()`- 你刚刚把它放在地板上的某个地方，无法从任何地方访问：你已经通过现有的引用设置为`newFilter`对**现有**对象的引用`customFilter`。

`newFilter`并且`customFilter`现在**是对同一个对象的**引用。

我怀疑您只需要删除该行：

```
newFilter = customFilter; 
```

离开：

```
Filter newFilter = new Filter();
// set all properties on newFilter 
```

或使其可克隆：

```
Filter newFilter = customFilter.Clone();
// set just the properties that need changing on newFilter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:00:05.603

通过分配：

```
newFilter = customFilter; 
```

这两个引用指向同一个对象`newFilter`！ `customFilter`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:00:19.840

您不是在复制 customFilter 的属性，而是为 newFilter 分配对与 customFilter 相同的对象的引用（假设您已声明`Filter`为`class`）。

您可以创建一个复制构造函数并由此创建您的对象：

```
public Filter(Filter template) {
    this.Prop1 = template.Prop1;
    this.Prop2 = template.Prop2;
    // etc.
} 
```

然后像这样使用它：

```
Filter newFilter = new Filter(customFilter); 
```

或者您可以`Clone()`在`Filter`类中提供一个返回克隆的方法：

```
public Filter Clone() {
    Filter result = new Filter();
    result.Prop1 = this.Prop1;
    result.Prop2 = this.Prop2;
    // etc.
    return result;
} 
```

它可以这样使用：

```
Filter newFilter = customFilter.Clone(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T10:00:35.220

问题是您在第 4 行使用 newFilter 引用了 customFilter

# ant - Ant jUnit WebDriver - NoClassDefFoundError

> ID：10911963
> 
> 赞同：0
> 
> 时间：2012-06-06T09:56:57.647
> 
> 标签：ant, junit, webdriver, selenium-chromedriver

这些天我在 Ant 上苦苦挣扎，试图让它驱动我的 WebDriver 测试。到目前为止，我得到了以下 build.xml （公然从某处复制）

```
<property name="src" value="./src" />
<property name="lib" value="d:/apache-ant-1.8.4/lib/" />
<property name="bin" value="./bin/" />
<property name="report" value="./report" />
<path id="test.classpath">
    <pathelement location="${bin}" />
    <fileset dir="${lib}">
        <include name="**/*.jar" />
    </fileset>
</path>

<target name="init">
    <delete dir="${bin}" />
    <mkdir dir="${bin}" />
</target>

<target name="compile" depends="init">
    <javac source="1.6" srcdir="${src}" fork="true" destdir="${bin}" >
        <classpath>
            <pathelement path="${bin}">
            </pathelement>
            <fileset dir="${lib}">
                <include name="**/*.jar" />
            </fileset>
        </classpath>
    </javac>
</target>

<target name="exec" depends="compile">
    <delete dir="${report}" />
    <mkdir dir="${report}" />
        <mkdir dir="${report}/xml" />
    <junit printsummary="yes" haltonfailure="no">
        <classpath>
            <pathelement location="${bin}" />
            <fileset dir="${lib}">
                <include name="**/*.jar" />
            </fileset>
        </classpath>

        <test name="com.yourcompany.selenium.ccloop.tb6NoInterested" haltonfailure="no" todir="${report}/xml" outfile="TEST-result">
            <formatter type="xml" />
        </test>
    </junit>
    <junitreport todir="${report}">
        <fileset dir="${report}/xml">
            <include name="TEST*.xml" />
        </fileset>
        <report format="frames" todir="${report}/html" />
    </junitreport>
</target> 
```

现在，当我运行 ant 时，一切都构建得很好，但是测试没有运行，我得到了 NoClassDefFoundError。

> org/apache/http/HttpHost
> 
> java.lang.NoClassDefFoundError: org/apache/http/HttpHost at org.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:144) at org.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:86) at com.yourcompany.selenium.ccloop.tb6NoInterested.setUp(Unknown Source) 引起：java.lang.ClassNotFoundException: org.apache.http.HttpHost at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java。 security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at java.lang.ClassLoader.loadClass(ClassLoader. java:247) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:247) 不适用
> 
> com.yourcompany.selenium.ccloop.tb6NoInterested.tearDown 的 java.lang.NullPointerException（未知来源）

包名是 com.yourcompany.selenium.ccloop 测试名是 tb6NoInterested

我在 ant lib 文件夹中有所有 jars（hamcrest、junit、selenium 的）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:02:02.037

似乎[来自 apache 的 httpcore](https://hc.apache.org/downloads.cgi)不在类路径中。

`org/apache/http/HttpHost`是该库中的一个类。

当我得到一个令人惊讶的 NoClassDefFoundError 时，我通常使用[findjar](http://findjar.com)来查找哪些 jar 包含类。

# java - 如何在另一个线程组中执行线程组？

> ID：10911964
> 
> 赞同：1
> 
> 时间：2012-06-06T09:57:00.153
> 
> 标签：java, multithreading, parallel-processing, jmx

我有一个场景，我必须注册多个用户，然后与线程并行运行作为注册用户的数量，并由所有用户并行执行相同的一组操作。为此，我有一个 jmx，它的操作很少，应该只发生一次（在一个线程数的设置线程中）和另一个线程组，它运行 5 个线程，这是先前注册用户的数量，我执行一些操作使用这些用户。现在我想使用 5 个线程并行执行整个场景。

我怎么会这样做？

我使用了包含控制器，但线程组未按预期执行，对于包含的 jmx 中的 5 个线程组中发生的操作，我没有获得 25 次迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:05:35.153

我不确定您在做什么，而且我对 jmx 知之甚少，但这里有一些想法。一个（或两个）可能是相关的。

第一个是您的线程可能正在共享一个实例字段。例如，如果他们有一个共同的计数器，你会做 5 次而不是 25 次。确保您的公共变量（实例和类字段）正确同步。尽可能使用局部变量。当它们的值适用于*每个*线程而不是所有线程时，您*必须使用它们。*

 *第二个是您可能在所有线程完成工作之前显示结果——或事件停止程序。这在单核机器上是最糟糕的，但是线程可以并且确实以任何可以想象的顺序运行，并且以一些不是的顺序运行。他们可以一次运行一个，最后一个开始运行。一个可以在中间停下来，让另一个运行完成，然后重新启动。一堆可以同时运行（在不同的内核上或快速交换），而其他人什么也不做。

我建议放入一堆日志/输出语句（System.out.println 已经足够好了），然后自己看看发生了什么。你需要一些时间来理解你的输出，但是一旦你这样做了，你就可以开始控制事情了。*

# c# - 从 var 类型转换为不同的类

> ID：10911966
> 
> 赞同：0
> 
> 时间：2012-06-06T09:57:04.520
> 
> 标签：c#, .net, azure

将 var 类型的对象转换为类的数组。

在我的示例中，我可以从表中查询所有元素。但问题是当我投射它时，它只是不投射所有实例。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:01:02.873

没有“var 类型”这样的类型。声明 using `var`just 使编译器*推断*变量的类型。它仍然是静态类型的，并且就像您明确声明它一样工作 - 尽管它允许您声明使用*匿名类型*的变量。

在您的情况下，我们不知道所涉及的任何方法的作用，这意味着我们无法真正知道发生了什么。听起来`Query`可能是 type `IEnumerable<AccessPointItem>`。您需要在代码中表达如何从 a 转换`AccessPointItem`为`AccessPoint`.

需要注意的几点：

*   您的查询表达式有些毫无意义-您可能*只想*打电话`tsvc.CreateQuery<AccessPointItem>()`
*   按照惯例，C# 中的局部变量使用驼峰式大小写（以小写字母开头）而不是 Pascal 大小写
*   您无缘无故地创建了一个数组 - 为什么？
*   `Select()`永远不会返回 null，所以你不需要检查它
*   呼叫`Cast`将尝试将每个都投射`AccessPointItem`到`AccessPoint`... 这真的是您的意图吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:13:01.377

所涉及的类型有问题。

首先你读到`AccessPointItem`：

```
var Query = from APs in tsvc.CreateQuery<AccessPointItem>(...) 
```

然后您尝试将其转换为`AccessPoint`：

```
return Query.Cast<AccessPoint>() 
```

您将需要实现某种转换方法才能使其正常工作（不幸的是，我自己从未做过，但从 Google 的快速运行中，我看到了有关该主题的大量信息可用）。我会从头顶上试一试：

```
//inside AccessPointItem.cs
public static AccessPoint ToAccessPoint(this AccessPointItem item) // extension method looks good for the job
{
    AccessPoint retObj = new AccessPoint();
    // assign properties from 'item' to 'retObj'
    return retObj;
}

//Usage example in your case
return Query.Select(singleAccessPointItem => singleAccessPointItem.ToAccessPoint()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:09:24.423

看起来好像您正在混合您的课程`AccessPoint`和`AccessPointItem`. 尝试这个：

```
public static AccessPoint[] getAllAps()
{
    return tsvc.CreateQuery<AccessPoint>("AccessPointTable").ToArray();
} 
```

或这个：

```
public static AccessPointItem[] getAllAps()
{ 
    return tsvc.CreateQuery<AccessPointItem>("AccessPointTable").ToArray();
} 
```

# php - 如何从traceroute输出循环显示谷歌地图v3中的标记

> ID：10911969
> 
> 赞同：0
> 
> 时间：2012-06-06T09:57:18.240
> 
> 标签：php, javascript, loops, google-maps-api-3, markers

我是 php mysql 和 google maps v3 的新手。我在谷歌地图 v3 中遇到问题。我制作了基于网络的 traceroute 并将 traceroute 的结果映射到谷歌地图 v3 中，用于我的大学教育的最终项目。我尝试了很多教程，但没有奏效。我也尝试过这个论坛的教程，但没有任何效果。所以我的问题是我无法显示从数据库中获取位置数据的多个标记。也许是因为我是新手，不知道该怎么做。我也混淆了循环显示标记。所以这里是php代码：

```
<?php
error_reporting(E_ALL ^ (E_NOTICE));
ini_set('max_execution_time', 360);
$enable_log_user = FALSE;

global $ip, $host_name,  $host_ip, $output, $integer;

$host  = @$_POST['host']; 
$trace = @$_POST['trace'];
$self  = $_SERVER['PHP_SELF'];

include("phpsqlajax_dbinfo.php");
$connection = mysql_connect ('127.0.0.1', $username, $password);
if (!$connection) {  die('Not connected : ' . mysql_error());} 

$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
} 

function get_ip()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}

$ip = get_ip(); 

?>
<!DOCTYPE html >
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP/MySQL & Google Maps Example</title>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    //<![CDATA[

    </script>
  </head>
<body onload="initialize()">
<form name="tools" action="<?php $self ?>" method="post">
    <p><font size="2">Your IP is <?php $ip ?> </font></p>
    <input type="text" name="host" value=""></input>
    <input type="submit" name="trace" value="Traceroute!"></input>
    </form>
    <?php
    if ($_POST['submit']) 
{
    if (($host == 'Enter Host or IP') || ($host == "")) {
        echo '<br><br>You must enter a valid Host or IP address.';
        exit; } 

    if(eregi("^[a-z]",  $host))
    {
        $host_name = $host;
        $host_ip = gethostbyname($host);
    }
    else
    {
        $host_name = gethostbyaddr($host);
        $host_ip = $host;
    } 
}

    $host= preg_replace ("[-a-z0-9!#$%&\'*+/=?^_`{|}~]","",$host);
    $command = "tracert $host";
    $fp = shell_exec("$command 2>&1");
    $output .= (htmlentities(trim($fp)));
    echo "<pre>$output</pre>";
    echo '<br/>';

    $array = array($output);
    $space_separated = implode(" ", $array);

    function explodeRows($data) {
      $rowsArr = explode("\n", $data);
      return $rowsArr;
    }
    function explodeTabs($singleLine) {
      $parsed = preg_split('/ +/', $singleLine);
      return $parsed;
    }
    $data     = $space_separated;
    $rowsArr  = explodeRows($data);

    for($a=3;$a<count($rowsArr)-2;$a++) 
    {
        $lineDetails[$a] = explodeTabs($rowsArr[$a]);

        if (empty($lineDetails[$a][9]))
        {
            $ipList[] = $lineDetails[$a][8];
        }
        else
        {
            $ipList[] = substr($lineDetails[$a][9], 1, -1);
        }
    }

    for ($b=0; $b<count($ipList); $b++)
    {
        if ($ipList[$b] != "")
        {
            $arrLine[]=$ipList[$b];
        }
    }

function ip_address_to_number($IPaddress)
{
    if ($IPaddress == "") {
        return 0;
    } else {
        $ips = explode (".", "$IPaddress");
        return ($ips[3] + $ips[2] * 256 + $ips[1] * 256 * 256 + $ips[0] * 256 * 256 * 256);
    }
}
for($c=0; $c<count($arrLine); $c++) {
$integer[] = ip_address_to_number($arrLine[$c]);
}

    ?>
    <script type="text/javascript">
        var pinImage = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_xpin_letter_withshadow&chld=pin_star|%E2%80%A2|CC3300|000000|FF9900",
        new google.maps.Size (70, 83),
        new google.maps.Point (0,0),
        new google.maps.Point (10,34));
    var pinShadow = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
        new google.maps.Size (89, 85),
        new google.maps.Point (0, 0),
        new google.maps.point (12, 35));
        var map;
    function initialize() {
    var myLatlng = new google.maps.LatLng(41.258531,-96.012599);
    var myOptions = {
    zoom: 2,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    <?php
    $posisi = array();
    foreach ($integer as $lokasi) {
    $query = "SELECT cl.locId, cl.country as country, cl.region as region, cl.city as city, cl.postalCode as postalCode, cl.latitude as latitude, cl.longitude as longitude, cl.metroCode as metroCode, cl.areaCode as areaCode
    FROM (SELECT locId as idcihuy FROM cityblocks WHERE $lokasi BETWEEN startIpNum AND endIpNum) cb, citylocation cl WHERE cb.idcihuy = cl.locId";
    $result = mysql_query($query);
    while ($location = @mysql_fetch_assoc($result)){
    $posisi[]= 'new google.maps.LatLng(' . $location['latitude'] . ', ' . $location['longitude'] . ')';
    }
    }
    ?>
    <!-- var infoWindow = new google.maps.InfoWindow; -->
     var point = [<?php echo implode(',', $posisi) ?>];
     var icon = pinImage;
     var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: pinImage,
        shadow: pinShadow
        });
             marker.setMap(map);
        }
    </script>
<div id="map_canvas" style="width: 900px; height: 500px"></div>
</body>
</html> 
```

这是html代码：

```
<!DOCTYPE html >

  <head>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <title>PHP/MySQL & Google Maps Example</title>

    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">

    //<![CDATA[

    </script>

  </head>

<body onload="initialize()">

<form name="tools" action="" method="post">

    <p><font size="2">Your IP is  </font></p>

    <input type="text" name="host" value=""></input>

    <input type="submit" name="trace" value="Traceroute!"></input>

    </form>

    <pre>Tracing route to youtube-ui.l.google.com [173.194.38.129]
over a maximum of 30 hops:

  1   204 ms   238 ms   233 ms  192.168.1.1 
  2   992 ms   241 ms   200 ms  192.168.1.11 
  3   852 ms   239 ms   502 ms  192.168.4.36 
  4  1079 ms   257 ms   281 ms  192.168.4.36 
  5   856 ms   321 ms   306 ms  192.168.1.11 
  6     *        *        *     Request timed out.
  7  1073 ms   239 ms   198 ms  205.128.240.180.telin.sg [180.240.128.205] 
  8   216 ms   292 ms   281 ms  109.190.240.180.telin.sg [180.240.190.109] 
  9   239 ms   239 ms   299 ms  72.14.215.170 
 10  1838 ms   539 ms   508 ms  209.85.243.158 
 11   467 ms   998 ms  1098 ms  72.14.233.79 
 12  1601 ms   239 ms     *     sin04s01-in-f1.1e100.net [173.194.38.129] 
 13   790 ms   356 ms   179 ms  sin04s01-in-f1.1e100.net [173.194.38.129] 

Trace complete.</pre><br/>  <script type="text/javascript">

        var pinImage = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_xpin_letter_withshadow&chld=pin_star|%E2%80%A2|CC3300|000000|FF9900",

        new google.maps.Size (70, 83),

        new google.maps.Point (0,0),

        new google.maps.Point (10,34));

    var pinShadow = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",

        new google.maps.Size (89, 85),

        new google.maps.Point (0, 0),

        new google.maps.point (12, 35));

        var map;

    function initialize() {

    var myLatlng = new google.maps.LatLng(41.258531,-96.012599);

    var myOptions = {

    zoom: 2,

    center: myLatlng,

    mapTypeId: google.maps.MapTypeId.ROADMAP

    }

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        <!-- var infoWindow = new google.maps.InfoWindow; -->

     var point = [new google.maps.LatLng(1.3667, 103.8000),new google.maps.LatLng(1.3667, 103.8000),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574)];

     var icon = pinImage;

     var marker = new google.maps.Marker({

        map: map,

        position: point,

        icon: pinImage,

        shadow: pinShadow

        });

        marker.setMap(map);

        }

    </script>

<div id="map_canvas" style="width: 900px; height: 500px"></div>

</body>

</html> 
```

好吧，如果你们阅读我的代码，我真的很抱歉。看起来很乱。因为我不知道如何很好地显示代码。我想得到帮助的最重要的事情是在地图上。关于如何显示所有标记。尤其是循环。谷歌地图不显示标记。它只显示地图。因此，对于所有阅读此问题的大师。我只是需要你尽快的帮助。如果我的英语不好并且我对你们的错误，我真的很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:09:10.137

问题是你没有给你的标记任何位置：

```
 var point = [];
 var icon = pinImage;

 var marker = new google.maps.Marker({
    map: map,
    position: point,
    icon: pinImage,
    shadow: pinShadow
    }); 
```

所以你所做的就是将位置创建为一个空数组。您需要为该位置创建一个 LatLng() 。

* * *

所以现在你有一个点数组：

```
 var point = [new google.maps.LatLng(1.3667, 103.8000),new google.maps.LatLng(1.3667, 103.8000),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574)];

 var icon = pinImage;

 var marker = new google.maps.Marker({
    map: map,
    position: point,
    icon: pinImage,
    shadow: pinShadow
    });

    marker.setMap(map); 
```

您需要做的是遍历数组，为每个数组创建一个标记：

```
var point = [new google.maps.LatLng(1.3667, 103.8000),new google.maps.LatLng(1.3667, 103.8000),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574),new google.maps.LatLng(37.4192, -122.0574)];

var icon = pinImage;

for (var i = 0; i < point.length; i++) {
     var marker = new google.maps.Marker({
        map: map,
        position: point[i],
        icon: pinImage,
        shadow: pinShadow
        });
} 
```

setMap 行也是多余的，因为当您说 map:map 时，这就是您需要做的所有事情。

# c++ - Rcpp：将数据帧与 Rcpp（内联）一起使用时推荐的代码结构

> ID：10911971
> 
> 赞同：3
> 
> 时间：2012-06-06T09:57:30.430
> 
> 标签：c++, r, data-structures, dataframe, rcpp

[我在别处草拟了这个作为评论，但决定提出一个适当的问题......]

在 Rcpp 中使用数据帧时，就代码结构而言，目前认为什么是“最佳实践”？人们可以轻松地将输入数据帧从 R 传送到 C++ 代码，但如果数据帧有 n 列，**则当前认为应该将这些数据拆分为 n 个单独的 (C++) 向量在被使用之前？**

对我之前关于在数据框中使用字符串（字符向量）列的问题的回答向我表明，是的，这是正确的做法。特别是，**似乎不支持诸如 df.name[i] 之类的符号**直接引用数据帧信息（就像在 C 结构中可能具有的那样），除非我弄错了。

然而，这导致我们陷入一种情况，即对数据进行子集化要麻烦得多——不能在一行中对数据框进行子集化，而是必须单独处理每个变量。那么，**是否认为 Rcpp 中的子集化最好通过布尔向量隐式完成？**

总而言之，我想简而言之，我想检查一下我目前的理解，尽管数据框可以传送到 C++ 代码，但无法直接引用“df.name [ i]" 时尚，并且没有简单的方法通过选择满足简单标准的行来生成输入 df 的子数据帧（例如 df.date 在给定范围内）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T11:21:46.233

因为数据帧实际上在内部表示为向量列表，所以通过向量访问确实是您能做的最好的事情。根本没有办法在 C 或 C++ 级别逐行进行子集化。

几周前，在 r-devel 上，在 data.frame 转置的背景下对此进行了很好的讨论（出于同样的原因，您不能“便宜”地做到这一点）。

# jsp - 无法在eclipse中显示tomcat 6的主页

> ID：10911976
> 
> 赞同：0
> 
> 时间：2012-06-06T09:57:52.510
> 
> 标签：jsp, tomcat

我正在用 JSP 做一个项目。我正在使用 IDE 和 tomcat 6.0.35。

当我单击我的第一个 .jsp 并说在服务器上运行时，它运行良好。但是如果我只在服务器上输入 URL `localhost:8080`，它就无法显示 tomcat 的主页。

此外，当我使用命令行启动 tomcat 时，它会显示 tomcat 主页，但无法显示我的第一个 .jsp。它给出了一个错误，如：`The requested resource (/project/first.jsp) is not available`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:13:12.947

通常，用于启动您的应用程序的 Tomcat 没有*默认*上下文`ROOT`，而是将*您的*应用程序用作根上下文（除非您明确指定上下文）。

当您从命令行启动它时，很可能您的应用程序尚未部署到*该*Tomcat，已被 IDE 删除，或者您没有在正确的应用程序上下文中访问 JSP 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:01:57.037

检查给定目录的权限。尝试使用完全权限。

顺便说一句，当 Apache 上的默认 Web 目录与 IDE 上的工作区目录不同时，我遇到了同样的问题。

# linq - 无法隐式转换'System.Collections.Generic.List ' 到 'System.Collections.Generic.List '

> ID：10911984
> 
> 赞同：0
> 
> 时间：2012-06-06T09:58:24.887
> 
> 标签：linq

```
List<int> execFavoriteUsers = 
        (from exec in context.ExecutiveFavorites 
         where exec.ExecutiveUserID == model.UserID 
         select exec.ProfileUserID) 
        .ToList();
query = (from cast in query
        where execFavoriteUsers.Contains(cast.UserID) == false
        select cast); 
```

但它在另一个系统中运行良好。如何修复此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:11:51.417

尝试`List<int?>`代替`List<int>`.

或者如果您需要不可为空的整数：

```
List<int> execFavoriteUsers = 
        (from exec in context.ExecutiveFavorites 
         where exec.ExecutiveUserID == model.UserID 
         where exec.ProfileUserID.HasValue
         select exec.ProfileUserID.Value) 
        .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:09:19.520

您确定 ProfileUserID 的类型是`int`? 它可能是 a`Nullable<int>`或 a`long`或 a`uint`吗？

您总是可以删除显式声明并将其更改为`var`（在这种情况下不会发生冲突，因为它隐式推断类型）。

# c# - 我的网站无法使用 ajaxcontroltoolkit 3.5 IIS 7.5

> ID：10911987
> 
> 赞同：-1
> 
> 时间：2012-06-06T09:58:30.570
> 
> 标签：c#, asp.net, windows-server-2008, iis-7.5, ajaxcontroltoolkit

在本地托管时，我有一个带有 asp.net C# 的网站可以正常工作。与 IIS 7.5 和 Windows Server 2008 一起使用时，ajax 控制工具包无法正常工作。谁能帮助我。

FireBug 中显示的错误：

```
 NetworkError: 404 Not Found - http://www.acmeinfovision.com/Settings/ClientSalaryHeadSetting.aspx?_TSM_HiddenField_=ctl00_ToolkitScriptManager1_HiddenField&_TSM_CombinedScripts_=%3b%3bAjaxControlToolkit%2c+Version%3d3.5.60501.0%2c+Culture%3dneutral%2c+PublicKeyToken%3d28f01b0e84b6d53e%3aen-US%3a61715ba4-0922-4e75-a2be-d80670612837%3af2c8e708%3ade1feab2%3a720a52bf%3af9cec9bc%3a589eaa30%3aa67c2700%3aab09e3fe%3a87104b7c%3a8613aea7%3a3202a5a2%3abe6fb298%3aaf404b5%3a698129cf%3abb25728f%3a289e72ab"
Client...89e72ab
Sys.Extended is undefined
[Break On This Error]   ...tl00_DropPanel"),"dynamicServicePath":"/Settings/ClientSalaryHeadSetting.aspx","... 
```

* * *

母版页代码如下所示

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="AcmePayRoll.Site" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Page-Enter" content="blendTrans(Duration=0)" />
    <meta http-equiv="Page-Exit" content="blendTrans(Duration=0)" />
    <title></title>
    <link href='<%# this.ResolveCSS("~/css/Stylesheet_mini.css")%>' rel='stylesheet'
        type='text/css' />
    <link href='<%# this.ResolveCSS("~/css/ui-Redmond/jquery-ui_mini.css")%>' rel='stylesheet'
        type='text/css' />
    <link href='<%# this.ResolveCSS("~/css/demo_table_jui_mini.css") %>' rel='stylesheet'
        type='text/css' />
    <link href='<%# this.ResolveCSS("~/css/ColVis_mini.css")%>' rel='stylesheet' type='text/css' />
    <link href='<%# this.ResolveCSS("~/css/TableTools_mini.css") %>' rel='stylesheet'
        type='text/css' />
    <link href='<%# this.ResolveCSS("~/css/TableTools_JUI_mini.css")%>' rel='stylesheet'
        type='text/css' />
    <link href='<%# this.ResolveCSS("~/css/ColReorder_mini.css")%>' rel='stylesheet'
        type='text/css' />

    <script src='<%# this.ResolveJS("~/js/jquery-1.7.1.min.js") %>' type='text/javascript'></script>

    <script src='<%# this.ResolveJS("~/js/jquery-ui-1.8.17.custom.min.js") %>' type='text/javascript'></script>

    <script src='<%# this.ResolveJS("~/js/Themeswither/TmemeSwither_mini.js") %>' type='text/javascript'></script>

    <script src='<%# this.ResolveJS("~/js/ScrollableGrid_mini.js") %>' type='text/javascript'></script>

    <script src='<%# this.ResolveJS("~/js/PayrollCommon_mini.js") %>' type='text/javascript'></script>

    <script src='<%# this.ResolveJS("~/js/jquery.table_navigation_mini.js")%>' type='text/javascript'></script>

    <link rel='SHORTCUT ICON' href='<%# this.ResolveUrl("~/Images/Acme-Logo.ICO")%>' />

    <script type="text/javascript">

     document.write("<div id='loading'><img id='pic1' src='<%#  this.ResolveUrl("~/Images/15.gif") %>' /><br>Please Wait...</div>");

        $(document).ready(function() { 
        var url='<%#  this.ResolveUrl("~/") %>';

            AddThemeSwither("ThemeSwither",url);
            ApplyCommonStyles();
            scrlsts();
            $("#contentdiv").height($(window).height());
            $("#contentdiv").width($(window).width());
        });

        function check()
        {
            var grid = $("<%# grid_clients.ClientID %>");
            $(grid).Scrollable({ ScrollHeight: 70 });
        }
         function help_click(e) { 
              var helpurl= $(e.parentNode).find("input[type='hidden']");  
              var val=helpurl.val();
              if(val!="")
              { 
                  window.open(val,'win');
              } 
        }
    </script>

    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
    <style type="text/css">
        #ThemeSwither
        {
            width: 200px;
            position: absolute;
            margin-left: auto;
            overflow: inherit;
            top: 5px;
            left: 15px;
        }
    </style>
</head>
<body style="margin: 0; background-color: #FDF8FF;" >
    <div style="vertical-align: top; width: 100%; height: 144px; top: 0; margin: 0;">
        <form id="form1" runat="server">
        <div id="contentdiv" style="width: 100%; border-bottom-color: Black">
            <ajaxtoolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" ScriptMode ="Release"  EnablePageMethods ="true" CompositeScript-ScriptMode ="Release"  LoadScriptsBeforeUI="false">
            </ajaxtoolkit:ToolkitScriptManager>
            <%--<asp:ScriptManager ID ="ScriptManager1" runat ="server" >
            </asp:ScriptManager>--%>
            <table width="100%" style="height: 100%" border="0" cellpadding="0" cellspacing="0">
                <tr class="ui-state-hover" style="vertical-align: top; height: 8%">
                    <td style="width: 20%">
                        <div id="ThemeSwither">
                        </div>
                        <asp:ImageButton ID="btnDashboard" runat="server" BorderStyle="None" Style="position: absolute;
                            margin-left: auto; overflow: inherit; top: 65px; left: 15px;" ImageUrl="~/Images/Dashboard48.png"
                            ToolTip="Dashboard" AlternateText="Dashboard" DescriptionUrl="~/Dashboard/Dashboard.aspx"
                            OnClick="btnDashboard_Click" />
                    </td>
                    <td colspan="2" style="text-align: right">
                        <table width="100%">
                            <tr style="vertical-align: top">
                                <td colspan="2" align="right">
                                    <asp:Label ID="lbluserid" runat="server" CssClass="ui-state-hover" Text="User Id"
                                        Style="border: 0px; position: static; font-family: Cambria; font-size: medium"></asp:Label>
                                </td>
                                <td style="width: 10%; vertical-align: top" align="right">
                                    <a href="" runat="server" id="cmdSignOut" style="font-family: Cambria; font-size: 15px;
                                        vertical-align: top">SignOut</a>
                                    <input type="hidden" id="hidden_help_url" runat="server" />
                                    <asp:ImageButton ID="helpbutton" runat="server" ImageUrl="~/Images/help-icon.png"
                                        Height="20px" Width="20px" ToolTip="Help" OnClientClick="help_click(this); return false;" />
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                                        <ContentTemplate>
                                            <asp:Image ID="clientlogo" runat="server" Height="35px" Width="31px" ImageAlign="Bottom" />
                                            <asp:Label ID="lblclientid" runat="server" CssClass="ui-state-hover" Text="Client Id"
                                                Style="border: 0px; font-family: Cambria; font-size: larger"></asp:Label>
                                        </ContentTemplate>
                                    </asp:UpdatePanel>
                                </td>
                                <td>
                                    &nbsp;
                                </td>
                                <td align="right">
                                    <table>
                                        <tr>
                                            <td>
                                                <asp:UpdatePanel ID="UpdatePanel3" runat="server">
                                                    <ContentTemplate>
                                                        <ajaxtoolkit:ModalPopupExtender ID="DropDownExtender2" runat="server" TargetControlID="lblclient"
                                                            PopupControlID="Panel1" BackgroundCssClass="modalBackground" DropShadow="true"
                                                            CancelControlID="CancelSubmitCompanies" />
                                                        <asp:ImageButton ID="lblclient" runat="server" ToolTip="Client List" Height="40px"
                                                            OnClientClick="check()" Width="40px" ImageUrl="~/Images/apartment-icon.png" Visible="false"
                                                            AccessKey="c" />
                                                    </ContentTemplate>
                                                </asp:UpdatePanel>
                                            </td>
                                            <td>
                                                <asp:Panel ID="DropPanel" Style="display: none" runat="server" Width="200px" BackColor="#f4f4f4"
                                                    BorderStyle="Solid">
                                                </asp:Panel>
                                                <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                                                    <ContentTemplate>
                                                        <ajaxtoolkit:DropDownExtender ID="DropDownExtender1" runat="server" TargetControlID="lblSelect"
                                                            DropDownControlID="DropPanel">
                                                        </ajaxtoolkit:DropDownExtender>
                                                        <asp:ImageButton ID="lblSelect" runat="server" ToolTip="Financial Year List" Height="35px"
                                                            Width="35px" ImageUrl="~/Images/Calendar-icon.png" OnClick="lblSelect_Click"
                                                            AccessKey="y" />
                                                    </ContentTemplate>
                                                </asp:UpdatePanel>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <div>
                            <asp:ContentPlaceHolder ID="MainContent" runat="server">
                            </asp:ContentPlaceHolder>
                        </div>
                    </td>
                </tr>
                <tr style="height: 83%; vertical-align: top">
                    <td colspan="3">
                        <div class="ui-widget-header" id="nav-menu">
                            <asp:Menu ID="MnuSiteMenus" runat="server" Orientation="Horizontal" DynamicHoverStyle-CssClass="dmenuHover"
                                Font-Bold="false" AccessKey="n" Font-Names="Cambria" DynamicMenuStyle-CssClass="ui-state-hover"
                                DynamicBottomSeparatorImageUrl="~/Images/LineSeparator.png" StaticItemFormatString="&amp;nbsp &amp;nbsp {0}">
                            </asp:Menu>
                        </div>
                        <div style="text-align: center" class="ui-state-hover">
                            <asp:Label ID="mainlabel" runat="server" Text="" Font-Size="X-Large" Font-Names="cambria"></asp:Label>
                        </div>
                        <div style="border-left-width: 30px; border-left-style: solid; border-left-color: #FDF8FF;
                            border-right-width: 30px; border-right-style: solid; border-right-color: #FDF8FF">
                            <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
                            </asp:ContentPlaceHolder>
                        </div>
                    </td>
                </tr>
                <tr class="ui-state-hover" style="vertical-align: top; background-color: #FFEFDB;
                    height: 4%">
                    <td colspan="3" style="text-align: right">
                        <div>
                            <p style="text-align: right; font-size: small; font-family: Cambria;">
                                <marquee behavior="alternate" scrollamount="2" width="100%">Copyright &copy; 2012 Acme Infovision Systems Pvt. Ltd. All Rights Reserved.</marquee>
                            </p>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <asp:Panel ID="Panel1" runat="server" BackColor="#f4f4f4" Style="display: none; overflow: hidden;"
            Visible="false" BorderStyle="Solid">
            <asp:UpdatePanel ID="UpdatePanelrptClientList" runat="server">
                <ContentTemplate>
                    <div style="text-align: center; font-size: large">
                        <asp:Label ID="grid_label" runat="server" Text="List of Clients" CssClass="all_inputs_labels"></asp:Label>
                    </div>
                    <div style="height: 220px; overflow: scroll">
                        <grid:MyGridView ID="grid_clients" ScrollWidthInpx="400" Width="600px" runat="server"
                            AllowSorting="true" AutoGenerateColumns="false" SelectedIndex="0" Font-Size="17px"
                            MouseHoverRowHighlightEnabled="true" CssClass="all_labels_inputs" ColumnNoToTrace="0">
                            <Columns>
                                <asp:BoundField DataField="ClientName" HeaderStyle-HorizontalAlign="Left" HeaderText="ClientName">
                                    <HeaderStyle HorizontalAlign="Left" />
                                </asp:BoundField>
                                <asp:TemplateField HeaderText="Client Name">
                                    <ItemTemplate>
                                        <asp:LinkButton ID="lb" Text='<%# Eval("ClientName")%>' runat="server" OnClick="lbtn1_Click" />
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:BoundField DataField="Contact" HeaderStyle-HorizontalAlign="Left" HeaderText="Contact">
                                    <HeaderStyle HorizontalAlign="Left" />
                                </asp:BoundField>
                                <asp:BoundField DataField="ClientId" HeaderStyle-HorizontalAlign="Left" HeaderText="ClientId">
                                    <HeaderStyle HorizontalAlign="Left" />
                                </asp:BoundField>
                            </Columns>
                            <FooterStyle BackColor="#3B4990" Font-Bold="True" ForeColor="White" />
                            <PagerStyle CssClass="ui-state-hover" ForeColor="White" HorizontalAlign="Center" />
                            <HeaderStyle CssClass="all_labels_inputs ui-state-hover" Font-Bold="True" />
                        </grid:MyGridView>
                    </div>
                    <div style="text-align: center">
                        <asp:Button ID="CancelSubmitCompanies" runat="server" Text="Cancel" />
                    </div>
                </ContentTemplate>
            </asp:UpdatePanel>
        </asp:Panel>
        </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:51:05.297

```
Sys.Extended is undefined
but it is working on local IIS 6, IIS 7 IIS 7.5 
```

从您所有与此相同的问题中，我得出结论，您忘记将 bin 目录包含`AjaxControlToolkit.dll`在您的 bin 目录中。

如果您确实包含了，那么您没有在不同服务器上的 web.config 上正确注册。

# netty - 客户端连接打开时关闭 Netty 服务器

> ID：10911988
> 
> 赞同：5
> 
> 时间：2012-06-06T09:58:33.053
> 
> 标签：netty

我正在尝试关闭与它建立连接的 Netty 服务器，但它只是挂起。这就是我所做的。

*   在一台机器上启动服务器，在另一台机器上启动客户端。
*   从客户端向服务器发送一条消息，我得到响应。
*   使用 Ctrl-C 关闭服务器

我已经在服务器上注册了一个关闭钩子，它关闭 ChannelGroup 并在 ServerBootstrap 上调用 releaseExternalResources（或者实际上我正在使用 protobuf-pro-duplex 库的 DuplexTcpServerBootstrap 来执行此操作）。无论如何，关闭钩子在关闭时被正确调用，但它永远不会返回。当我对正在发生的事情进行线程转储时，我可以看到两个有趣的堆栈：

```
 java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000006b0890950> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)
    at java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1433)
    at org.jboss.netty.util.internal.ExecutorUtil.terminate(ExecutorUtil.java:103)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorkerPool.releaseExternalResources(AbstractNioWorkerPool.java:80)
    at org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory.releaseExternalResources(NioServerSocketChannelFactory.java:162)
    at org.jboss.netty.bootstrap.Bootstrap.releaseExternalResources(Bootstrap.java:319)
    at com.googlecode.protobuf.pro.duplex.server.DuplexTcpServerBootstrap.releaseExternalResources(DuplexTcpServerBootstrap.java:132)
    at com.xxx.yyy.node.NodeServer$2.run(NodeServer.java:104)
    at java.lang.Thread.run(Thread.java:722) 
```

所以这是永远不会返回的关闭钩子线程。下面是另一个似乎正在等待通道的线程：

```
 java.lang.Thread.State: RUNNABLE
    at sun.nio.ch.EPollArrayWrapper.interrupt(Native Method)
    at sun.nio.ch.EPollArrayWrapper.interrupt(EPollArrayWrapper.java:274)
    at sun.nio.ch.EPollSelectorImpl.wakeup(EPollSelectorImpl.java:193)
    - locked <0x00000006b0896660> (a java.lang.Object)
    at java.nio.channels.spi.AbstractSelector$1.interrupt(AbstractSelector.java:210)
    at java.nio.channels.spi.AbstractSelector.begin(AbstractSelector.java:216)
    at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:80)
    at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
    - locked <0x00000006b08964a8> (a sun.nio.ch.Util$2)
    - locked <0x00000006b0896498> (a java.util.Collections$UnmodifiableSet)
    - locked <0x00000006b0890d20> (a sun.nio.ch.EPollSelectorImpl)
    at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
    at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:52)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:208)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我在 Linux 上使用 Netty 3.4.6.Final 和 Java 7.04。谢谢！

兄弟，弗兰克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T10:47:33.740

裸 Netty 客户端/服务器也有同样的“问题”。

问题是，关闭服务器通道不会关闭为接受的客户端连接创建的打开通道。必须明确跟踪服务器中的客户端通道。这可以通过通道组和将客户端通道添加到该组的处理程序来完成。在关闭服务器时，应该以批处理方式关闭组中的所有通道，而不是仅关闭一个服务器通道（也可以放入通道组）。

用户指南（9\. 关闭您的应用程序）中有出色的文档： [http](http://static.netty.io/3.5/guide/) : //static.netty.io/3.5/guide/ 和 ChannelGroup API 文档（使用 ChannelGroup 简化关闭过程）：[http://static。 netty.io/3.5/api/org/jboss/netty/channel/group/ChannelGroup.html](http://static.netty.io/3.5/api/org/jboss/netty/channel/group/ChannelGroup.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-13T08:55:05.723

我有同样的问题并解决了。您必须`EventLoopGroup`同步关闭所有端口，然后关闭端口。

完全关机可能需要 4-5 秒。

这是一个示例代码（我认为您应该使用`start`和`stop`按钮制作一个简单的 GUI 来测试它）：

```
public class ReusePortServer {
    private final int port;
    ChannelFuture f;
    EventLoopGroup group;
    EpollEventLoopGroup bossGroup;
    EpollEventLoopGroup workerGroup;

    public ReusePortServer(int port) {
        this.port = port;
    }

    public void start() throws Exception {

        group = new EpollEventLoopGroup();

        bossGroup = new EpollEventLoopGroup();
        workerGroup = new EpollEventLoopGroup();

        ServerBootstrap b = new ServerBootstrap();
        b.group(bossGroup, workerGroup)
                .channel(EpollServerSocketChannel.class)
                .option(EpollChannelOption.SO_REUSEPORT, true)
                .childHandler(new ChannelInitializer<SocketChannel>() {
                    @Override
                    public void initChannel(SocketChannel ch) throws Exception {
                        ch.pipeline().addLast(new ReusePortHandler());
                    }
                });

        f = b.bind(port).sync();
        log(String.format("%s started and listen on %s", ReusePortServer.class.getName(), f.channel().localAddress()));
    }

    private final static SimpleDateFormat datefmt = new SimpleDateFormat("HH:mm:ss ");

    public static void log(final String msg) {
        System.out.print(datefmt.format(new Date()));
        System.out.println(msg);
        System.out.flush();
    }

    public void stop() {
        System.out.println("ReusePortServer.stop");
        try {
            // shutdown EventLoopGroup
            bossGroup.shutdownGracefully().sync();
            workerGroup.shutdownGracefully().sync();
            f.channel().closeFuture().sync();   // close port

        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public static void main(final String[] args) throws Exception {
        int port = 12345;
        new ReusePortServer(port).start();
    }
} 
```

**注意：**您可以更改`EpollEventLoopGroup`为任何`EventLoopGroup`您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:49:48.520

Netty 服务器关闭

1.  关闭服务器通道
2.  关闭老板和工人执行者
3.  释放服务器引导资源

示例代码

```
ChannelFuture cf = serverChannel.close();
cf.awaitUninterruptibly();
bossExecutor.shutdown();
workerExecutor.shutdown();
thriftServer.releaseExternalResources(); 
```

# xaml - 如何使用 Visual Studio 2012 在 Windows 8 Metro 应用程序中获取 appbar？

> ID：10911992
> 
> 赞同：0
> 
> 时间：2012-06-06T09:58:47.047
> 
> 标签：xaml, windows-8, microsoft-metro, visual-studio-2012

我正在使用 Visual Studio 2012 开发 Metro 应用程序。我正在尝试在 Metro 应用程序中获取 AppBar。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:47:45.363

MSDN 开发中心有很多示例，[http://code.msdn.microsoft.com/en-us/windowsapps](http://code.msdn.microsoft.com/en-us/windowsapps)。其中一个特别是[AppBar 示例](http://code.msdn.microsoft.com/windowsapps/XAML-AppBar-control-sample-2aa1cbb4)，描述如下：

> 此示例演示如何使用 AppBar 控件向用户呈现导航、命令和工具。
> 
> 应用栏默认是隐藏的，当用户从屏幕的顶部或底部边缘滑动手指时会出现。它涵盖了应用程序的内容，用户可以通过边缘滑动或与应用程序交互将其关闭。本示例展示了如何添加应用栏、自定义应用栏以及控制应用栏。此外，它还展示了如何使用粘性应用栏和全局应用栏。

我想这会让你开始。

# .htaccess - 我想在 .htaccess 中允许一个 IP 范围

> ID：10911996
> 
> 赞同：11
> 
> 时间：2012-06-06T09:59:11.330
> 
> 标签：.htaccess

我想允许所有 IP 地址介于`145.050.039.008`两者`145.050.039.017`之间

例如（但这不起作用）：

```
allow from 145.050.039.008 145.050.039.017 
```

或者：

```
allow from 145.050.039.008,145.050.039.017 
```

或者：

```
allow from 145.050.039.008/017 
```

?

谢谢， 杰尔玛

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T10:01:58.100

```
A̶l̶l̶o̶w̶ ̶f̶r̶o̶m̶ ̶1̶4̶5̶.̶0̶5̶0̶.̶0̶3̶9̶.̶0̶0̶8̶ ̶1̶4̶5̶.̶0̶5̶0̶.̶0̶3̶9̶.̶0̶1̶7̶ 
```

C̶h̶e̶c̶k̶̶h̶e̶r̶e̶̶f̶o̶r̶̶d̶e̶t̶a̶i̶l̶s̶.̶ [_](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#allow) _

* * *

**（晚）编辑：**

我的不好，我以前的答案从来没有奏效，这时候我在没有真正理解问题的情况下回答。

## 选项 #1：定义所有 IP

这是唯一的方法：

```
Allow from 145.50.39.8
Allow from 145.50.39.9
Allow from 145.50.39.10
Allow from 145.50.39.11
Allow from 145.50.39.12
Allow from 145.50.39.13
Allow from 145.50.39.14
Allow from 145.50.39.15
Allow from 145.50.39.16
Allow from 145.50.39.17 
```

## 选项 #2：使用部分 IP

如果你想要更通用的东西，你可以使用部分 IP：

```
Allow from 145.50.39 
```

但这将允许 IP 从`145.50.39.0`到`145.50.39.255`。

## 选项 #3：使用网络掩码或 CIDR

为了更接近，您可以使用网络掩码或 CIDR：

```
Allow from 145.50.39.0/255.255.255.224 
```

或者

```
Allow from 145.50.39.0/27 
```

这将允许 IP 从`145.50.39.0`到`145.50.39.31`。