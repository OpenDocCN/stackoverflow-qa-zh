# StackOverflow 问答 10216000-10216999

# node.js - 如何为 80 端口上的网站制作 Node.js 多租户？

> ID：10216003
> 
> 赞同：13
> 
> 时间：2012-04-18T18:52:38.190
> 
> 标签：node.js

我的最终目标是让每个服务器实例的 node.js 更具成本效益。

我不是在运行游戏或聊天室，而是为客户提供简单的网站。我想在单个服务器上容纳多个客户端，但有多个网站使用主机标头映射从端口 80 运行。我仍然想像现在一样使用 express，但如果可能的话，让它更像是从端口 80 到其他节点应用程序的路由。如果以这种方式完成节点可能会更便宜，但目前对于我的目的来说它更昂贵，因为如果在端口 80 上运行每个客户都需要自己的盒子。此外，我的动机是专注于节点开发，但必须有理由这样做所以在成本方面。

我在 Windows 中为 ASP.NET 做了很多这样的事情，因为 IIS 开箱即用地支持这一点，我知道这对于 Apache 来说也是正常的。

如果这不是正确的问题或提出建设性的批评而不是随机的否决，请随意将其移至堆栈交换中的另一个论坛。谢谢。

**更新**

我采用的方法是使用静态托管（通过 gatspy 和 s3），然后使用 API，而不是通过来自客户端的发布消息和来自服务器的 API 密钥注册域，并在站点更改时定期生成静态站点，但感谢所有建议！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-13T23:49:45.750

理论上，您可以构建一个模拟 Apache/Lighttpd/Nginx 功能的纯节点 Web 服务器，但我不推荐它。事实上，对于严肃的生产服务，我建议始终使用 Nginx 或等效的服务（参见[this](https://stackoverflow.com/questions/1884724/what-is-node-js/6782438#6782438)和[this](https://stackoverflow.com/questions/2387724/node-js-on-multi-core-machines/8685968#8685968)）。

下面是一个简单的[Nginx](http://wiki.nginx.org/Modules)配置如何为暴露在端口 80 上的两个子服务工作。

```
worker_processes  4;

events {
  worker_connections 1024;
}

http {
  include       mime.types;
  default_type  text/html;

  server {
    listen 80;
    server_name service1.mydomain.com
    location / {
      proxy_pass         http://127.0.0.1:3000/;
    }
  }
  server {
    listen 80;
    server_name service2.mydomain.com
    location / {
      proxy_pass         http://127.0.0.1:3001/;
    }
  }
} 
```

我已经看到生产盒内核恐慌，因为 Node 默认情况下不会限制负载，并且优先接受新连接而不是处理现有请求——当然，它“不应该”让内核崩溃，但它确实崩溃了。此外，通过在端口 3000 上运行，您可以以非常少的权限以非 root 用户身份运行您的 Node 服务（并且仍然代理它，使其看起来在端口 80 上）。您还可以在多个工作人员之间分散负载、提供静态数据、记录请求、重写 url 等等。Nginx 非常快（比 Apache 轻得多）。同框代理转发的开销是最小的，并且为您购买了如此多的功能和健壮性，以至于在我的书中它是一个灌篮。即使是次要的东西，比如 - 当我的节点服务崩溃或过载时，用户是否会遇到黑洞，或者“请原谅我们的灰尘，

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T20:04:19.193

使用适当的反向代理（如[HAProxy](http://haproxy.1wt.eu/)）如何让代理在端口 80 上侦听，并根据 headers.host 委托给非公共端口（例如 10000、10001 等）上的多个节点实例？

# java - 使用 Eclipse 和 Rserve 从 Java 调用 R 的简单程序

> ID：10216014
> 
> 赞同：23
> 
> 时间：2012-04-18T18:53:39.423
> 
> 标签：java, eclipse, r, rserve

我的应用程序必须执行 R 操作，例如：

```
m = matrix(sample(0:1,100, rep=T),ncol=10) 
```

结果应该可用于 Java 应用程序。

[Rserve 包](http://www.rforge.net/Rserve/)将R 连接到其他语言，因为它充当 TCP/IP 服务器。我已经阅读了该网站，但不知道如何制作可以使用 Rserve 的最简单的应用程序。

制作一个使用 Rserve 从 Java 执行 R 命令的简单 Eclipse 应用程序需要哪些步骤？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T05:08:07.747

下载部分有 Rserve 的二进制版本（www.rforge.net/Rserve/files/ 我有版本 R 2.13 和 Windows xp，所以我需要下载 Windows 二进制：Rserve_0.6-8.zip（541.3kb，更新: 2012 年 4 月 18 日星期三 07:00:45))。将该文件复制到包含 R.DLL 的目录。从 CRAN 安装 Rserve 后

```
install.packages("Rserve") 
```

在 R 中（我有 RStudio - 方便的事情：[下载 RStudio IDE](http://rstudio.org/download/)）。开始 Rserve 来自 R 内部，只需键入

```
library(Rserve)
Rserve() 
```

在任务管理器中检查 - 应该运行 Rserve.exe。在 Eclipse 中创建一个 Java 项目后，在该项目下创建一个名为 lib 的目录。在此处粘贴 2 jar RserveEngine.jar 和 REngine.jar (www.rforge.net/Rserve/files/)。不要忘记在你的 java 项目的 Properties 中添加这个 jars。在新的类代码中：

```
import org.rosuda.REngine.*;
import org.rosuda.REngine.Rserve.*;

public class rserveuseClass {
    public static void main(String[] args) throws RserveException {
        try {
            RConnection c = new RConnection();// make a new local connection on default port (6311)
            double d[] = c.eval("rnorm(10)").asDoubles();
            org.rosuda.REngine.REXP x0 = c.eval("R.version.string");
            System.out.println(x0.asString());
} catch (REngineException e) {
            //manipulation
        }       

    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-03T13:40:48.873

以下是从头开始创建 RServe 项目的一些更详细的说明：

## 首先安装并让 Rserve 在 R 中运行。

1.  安装 R
2.  从 CRAN 添加包 RServe。
3.  在 R 类型中： install.packages("Rserve")

对于远程访问：

*   创建文件：/etc/Rserv.conf

将以下内容添加到 Rserv.conf

```
workdir /tmp/Rserv
remote enable
auth required
plaintext disable
port 6311
maxsendbuf 0 (size in kB, 0 means unlimited use) 
```

在 R 中：运行以下命令

```
library(Rserve) 
```

对于 Windows：

```
Rserve() 
```

对于 Mac：

```
Rserve(args="--no-save") 
```

Rserve 的一个实例现在在 localhost 端口 6311 上运行。

## Next 创建一个 Rserve 项目（我使用的是 eclipse）

为此，我将使用 eclipse：

1.  [从这里](https://rforge.net/Rserve/files/)下载 RserveEngine.jar 和 REngine.jar 。
2.  在eclipse中创建一个java项目。
3.  在项目目录下创建一个 lib 文件夹。（与您的 src 文件夹相同级别）
4.  将 RserveEngine.jar 和 REngine.jar 复制到 lib 文件夹中。
5.  将 jars 添加到构建路径：[说明](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)
6.  添加一个包，然后添加一个主类：将其称为 HelloWorldApp。

将此代码添加到类

```
package com.sti.ai;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import org.rosuda.REngine.REXP;
import org.rosuda.REngine.REXPMismatchException;
import org.rosuda.REngine.Rserve.RConnection;
import org.rosuda.REngine.Rserve.RserveException;

public class HelloWorldApp {

    public static void main(String[] args) throws RserveException, REXPMismatchException, FileNotFoundException, IOException {
        RConnection c = new RConnection("<host/ip>", 6311);
        if(c.isConnected()) {
            System.out.println("Connected to RServe.");
            if(c.needLogin()) {
                System.out.println("Providing Login");
                c.login("username", "password");
            }

            REXP x;
            System.out.println("Reading script...");
            File file = new File("<file location>");
            try(BufferedReader br = new BufferedReader(new FileReader(file))) {
                for(String line; (line = br.readLine()) != null; ) {
                    System.out.println(line);
                    x = c.eval(line);         // evaluates line in R
                    System.out.println(x);    // prints result
                }
            }

        } else {
            System.out.println("Rserve could not connect");
        }

        c.close();
        System.out.println("Session Closed");
    }

} 
```

最后，运行 HelloWorldApp.java

*对于那些正在使用 Maven 的人*

[引擎](http://mvnrepository.com/artifact/org.rosuda.REngine/Rserve/1.8.1)

```
<dependency>
    <groupId>org.nuiton.thirdparty</groupId>
    <artifactId>REngine</artifactId>
    <version>1.7-3</version>
</dependency> 
```

[服务](http://mvnrepository.com/artifact/org.rosuda.REngine/Rserve/1.8.1)

```
<dependency>
    <groupId>org.rosuda.REngine</groupId>
    <artifactId>Rserve</artifactId>
    <version>1.8.1</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T19:27:45.940

快速的，试图分离任务：

1.  Rserve 可以自行安装。从那里开始。

2.  Rserve 有示例客户端。尝试使用 Java 示例来工作。

3.  从那里，编写你的新程序。

4.  Eclipse 完全是可选的。您不必使用它。如果这是要学习的更多步骤，请考虑跳过它。一旦 1 到 3 没问题，学习如何在 Eclipse 中表达构建依赖关系。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-29T18:12:16.577

从 Java 调用 R 有两种方法 - JRI 和 RServe。[这](http://www.studytrails.com/RJava-Eclipse-Plugin/)是一个插件，可以帮助您在 Windows 上设置 RJava。如果您正在寻找更多生产级别的解决方案，那么 Rserve 可以提供更好的用途。[此](http://www.studytrails.com/R/RServe/RServe-Java-First-Program.jsp)示例说明如何运行示例 RServe 程序。如果您使用的是 RServe，则在 eval 函数中运行您的命令

```
REXP m = c.eval("matrix(sample(0:1,100, rep=T),ncol=10)") 
```

您可以使用一些默认数据结构来转换 m (REXP)。

# events - Magento - 使用转换模块 将事件用于销售 > 订单网格

> ID：10216018
> 
> 赞同：0
> 
> 时间：2012-04-18T18:53:47.637
> 
> 标签：events, magento, magento-1.5

我制作了一个简单的模块，向**Sales > Order Grid**添加额外的字段。它工作得很好，但问题是我们正在使用`<rewrites>`订单网格的另一个模块将他们的字段添加到网格中。我想尝试将其更改为使用***事件***（此外，这是一种更好的方法）...

问题是我一直在尝试和尝试，但我无法实现它。（也许我还不能掌握事件/观察者的概念......）

这是我当前的模块结构：

```
app/code/local/Artizara/OrderGridAdditions/
app/code/local/Artizara/OrderGridAdditions/Block/Sales/Order/Grid.php
app/code/local/Artizara/OrderGridAdditions/etc/config.xml
app/code/local/Artizara/OrderGridAdditions/controllers [empty]
app/code/local/Artizara/OrderGridAdditions/Helper [empty]
app/code/local/Artizara/OrderGridAdditions/Model [empty] 
```

在我的**Grid.php**文件中，我已将主 Grid.php 文件内容复制到我的 Grid.php 文件中并编辑了`_getCollectionClass()`,`_prepareCollection()`和`_prepareColumns()`函数。

我已将其更改`_getCollectionClass()`为：

```
//return 'sales/order_grid_collection';
return 'sales/order_collection'; 
```

我已将其更改`_prepareCollection()`为：

```
$collection = Mage::getResourceModel($this->_getCollectionClass());

$collection->getSelect()->joinLeft(array('sfog' => 'sales_flat_order_grid'),'main_table.entity_id = sfog.entity_id',array('sfog.shipping_name','sfog.billing_name'));
$collection->getSelect()->joinLeft(array('sfo'=>'sales_flat_order'),'sfo.entity_id=main_table.entity_id',array('sfo.customer_email','sfo.weight','sfo.discount_description','sfo.increment_id','sfo.store_id','sfo.created_at','sfo.status','sfo.base_grand_total','sfo.grand_total','shipping_description','sfo.total_item_count'));
$collection->getSelect()->joinLeft(array('sfoa'=>'sales_flat_order_address'),'main_table.entity_id = sfoa.parent_id AND sfoa.address_type="shipping"',array('sfoa.street','sfoa.city','sfoa.region','sfoa.postcode','sfoa.telephone'));
//$collection->getSelect()->joinLeft(array('sfop' => 'sales_flat_order_payment'),'main_table.entity_id = sfop.entity_id',array('sfop.method'));

$this->setCollection($collection);

return parent::_prepareCollection(); 
```

我已经添加了`_prepareColumns()`这样的列（这里只添加了一个作为示例）：

```
$this->addColumn('total_item_count', array(
            'header' => Mage::helper('sales')->__('Total Items'),
            'index' => 'total_item_count',
            'filter_index' => 'sfo.total_item_count',
            'width' => '50px',
    )); 
```

在我的`config.xml`文件中，我有一个简单的`<rewrite>`：

```
<modules>
    <Artizara_OrderGridAdditions>
        <version>0.1.0</version>
    </Artizara_OrderGridAdditions>
</modules>

<global>
    <blocks>
        <adminhtml>
            <rewrite>
                <sales_order_grid>Artizara_OrderGridAdditions_Block_Sales_Order_Grid</sales_order_grid>
            </rewrite>
        </adminhtml>
        <ordergridadditions>
            <class>Artizara_OrderGridAdditions_Block</class>
        </ordergridadditions>
    </blocks>

</global> 
```

***将其更改为事件/观察者***

我一直在尝试将其更改为使用**事件**但遇到困难的模块。我一直在尝试关注这里的其他一些答案（那些不是重写的，但他们使用不同的方法将自定义表从数据库添加到网格中）。我正在寻找使用**我已经拥有的相同设置**。

我添加`/Helper/Data.php`了包含以下内容的容器：

```
class Artizara_OrderGridAdditions_Helper_Data extends Mage_Core_Helper_Abstract{ } 
```

在`/etc/config.xml`我尝试了很多东西。这是我最近的尝试：

```
<modules>
    <Artizara_OrderGridAdditions>
        <version>0.1.0</version>
    </Artizara_OrderGridAdditions>
</modules>

<adminhtml>
    <events>
        <adminhtml_block_html_before>
            <observers>
                <Artizara_OrderGridAdditions_Observer>
                    <class>Artizara_OrderGridAdditions_Model_Observer</class>
                    <method>addAdditionsToGrid</method>
                </Artizara_OrderGridAdditions_Observer>
            </observers>
        </adminhtml_block_html_before>
    </events>
</adminhtml>

<global>

    <models>
        <Artizara_OrderGridAdditions>
            <class>Artizara_OrderGridAdditions_Model</class>
        </Artizara_OrderGridAdditions>
    </models>

    <blocks>
        <Artizara_OrderGridAdditions>
            <class>Artizara_OrderGridAdditions_Block</class>
        </Artizara_OrderGridAdditions>
    </blocks>

    <helper>
        <Artizara_OrderGridAdditions>
            <class>Artizara_OrderGridAdditions_Helper</class>
        </Artizara_OrderGridAdditions>
    </helper>

</global> 
```

然后在`/Model/Observer.php`我有：

```
class Artizara_OrderGridAdditions_Model_Observer {

    public function addAdditionsToGrid(Varien_Event_Observer $observer) {
            // code here
        }
} 
```

在里面`addAdditionsToGrid()`，我尝试***了很多***不同的方法，包括复制整个`Grid.php`文件，但似乎没有任何效果（错误）:(

请帮助指导我使用**事件**重新制作这个简单的模块！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:36:10.970

没有（好的）方法可以使用观察者将列添加到销售订单网格，因为没有事件调用。看看你自己的`Mage::dispatchEvent`内部`Mage_Adminhtml_Block_Sales_Order_Grid`和所有超类。

我认为最好的做法是像这样扩展网格类：

```
class Artizara_OrderGridAdditions_Block_Sales_Grid extends Mage_Adminhtml_Block_Sales_Order_Grid {
    protected function _prepareColumns() {
        $this->addColumn(/* your definition here */);
    }
} 
```

如果你真的需要观察者这样做，你可以观察`adminhtml_block_html_before`事件并挖掘出路，但是很多块也会调用这个事件。

# django - 更新到 1.4 后的 Django syncdb 异常

> ID：10216019
> 
> 赞同：3
> 
> 时间：2012-04-18T18:53:48.010
> 
> 标签：django, updating, django-syncdb

所以我在 Django 中开发一个应用程序，需要 1.4 版本的功能，所以我决定更新。
但是当我想要这样做时出现了一个奇怪的错误，`syncdb`
我使用的是新的`manage.py`，正如你所看到的，它创建了一些表，但随后失败：

```
./manage.py syncdb
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site
Traceback (most recent call last):
  File "./manage.py", line 9, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/commands/syncdb.py", line 91, in handle_noargs
    sql, references = connection.creation.sql_create_model(model, self.style,     seen_models)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/backends/creation.py", line 44, in sql_create_model
    col_type = f.db_type(connection=self.connection)
TypeError: db_type() got an unexpected keyword argument 'connection' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:48:19.450

我有同样的问题，我的自定义字段的定义缺少连接参数。

```
from django.db import models

class BigIntegerField(models.IntegerField):
    def db_type(self, connection):
        return "bigint" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T14:10:22.613

[虽然已经很老了，已回答并接受了问题，但我补充了我的理解，我添加了它，因为我没有使用自定义类型，它是 Django Evolution 错误（但不是 syncdb）`evolve --hint --execute`。我认为这可能对将来的某人有所帮助。.]

我的 Python 水平一般，对 Django 很陌生。当我向现有项目添加一些新功能时，我也遇到了同样的问题。要添加新功能，我必须添加一些新的`models.CharField()`类型字段，如下所示。

```
included_domains = models.CharField(
     "set of comma(,) seprated list of domains in target emails", 
     default="",           
     max_length=it_len.EMAIL_LEN*5) 
excluded_domains = models.CharField(
    "set of comma(,) seprated list of domains NOT in target emails", 
    default="",               
    max_length=it_len.EMAIL_LEN*5) 
```

我使用的 Django 版本是 1.3.1：

```
$ python -c "import django; print django.get_version()"
1.3.1  <--------# version  

$python manage.py syncdb
Project signature has changed - an evolution is required 
```

[Django Evolution：](https://code.google.com/p/django-evolution/#Django_Evolution) Django Evolution 是 Django 的扩展，它允许您跟踪模型随时间的变化，并更新数据库以反映这些变化。

```
$ python manage.py evolve --hint 
#----- Evolution for messagingframework
from django_evolution.mutations import AddField
from django.db import models

MUTATIONS = [
    AddField('MessageConfiguration', 'excluded_domains', models.CharField, initial=u'', max_length=300),
    AddField('MessageConfiguration', 'included_domains', models.CharField, initial=u'', max_length=300)
]
#----------------------
Trial evolution successful.
Run './manage.py evolve --hint --execute' to apply evolution. 
```

试验很混乱，当我尝试在 DB 中应用更改时

```
$ python manage.py evolve --hint --execute
Traceback (most recent call last):
  File "manage.py", line 25, in <module>
    execute_manager(settings)
  File "/var/www/sites/www.taxspanner.com/django/core/management/__init__.py", line 362, in execute_manager
    utility.execute()
  File "/var/www/sites/www.taxspanner.com/django/core/management/__init__.py", line 303, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/var/www/sites/www.taxspanner.com/django/core/management/base.py", line 195, in run_from_argv  
    self.execute(*args, **options.__dict__)
  File "/var/www/sites/www.taxspanner.com/django/core/management/base.py", line 222, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/django_evolution-0.6.9.dev_r225-py2.7.egg/django_evolution/management/commands/evolve.py", line 60, in handle
    self.evolve(*app_labels, **options)
  File "/usr/local/lib/python2.7/dist-packages/django_evolution-0.6.9.dev_r225-py2.7.egg/django_evolution/management/commands/evolve.py", line 140, in evolve
    database))
  File "/usr/local/lib/python2.7/dist-packages/django_evolution-0.6.9.dev_r225-py2.7.egg/django_evolution/mutations.py", line 426, in mutate
    return self.add_column(app_label, proj_sig, database)
  File "/usr/local/lib/python2.7/dist-packages/django_evolution-0.6.9.dev_r225-py2.7.egg/django_evolution/mutations.py", line 438, in add_column
    sql_statements = evolver.add_column(model, field, self.initial)
  File "/usr/local/lib/python2.7/dist-packages/django_evolution-0.6.9.dev_r225-py2.7.egg/django_evolution/db/common.py", line 142, in add_column
    f.db_type(connection=self.connection),  # <===  here f is field class object
TypeError: db_type() got an unexpected keyword argument 'connection' 
```

为了理解这个异常，我检查了这个异常是否类似于：

```
>>> def f(a):
...  print a
... 
>>> f('b', b='a')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: f() got an unexpected keyword argument 'b'
>>> 
```

所以函数签名已经改变。

因为我没有添加任何*新的自定义或枚举*字段，但大多数数据库（我正在使用 PostgreSQL）只支持模型和字符类型字段中已经存在的两个类似字段，即使我收到了这个错误！

然后我从@阅读：[Russell Keith-Magee-4 回复](http://python.6.x6.nabble.com/Django-1-4-TypeError-get-db-prep-value-got-an-unexpected-keyword-argument-connection-td4695088.html)。

> 您在这里遇到的是不支持多个数据库的代码的弃用周期的结束。
> 
> 在 Django 1.2 中，我们引入了多数据库支持；为了支持这一点，对原型进行了`get_db_preb_lookup()`更改 `get_db_prep_value()`。
> 
> 为了向后兼容，我们添加了一个 shim，如果开发人员尚未修复这些方法，它将透明地“修复”这些方法。
> 
> 在 Django 1.2 中，这些 shim 的使用引发了 PendingDeprecationWarning。在 Django 1.3 中，他们提出了 DeprecationWarning。
> 
> 在 Django 1.4 下，shim 代码已被删除——因此任何未更新的代码现在都会引发与您描述的错误类似的错误。

但是由于 Django Evolution 的较新版本，我没有收到任何 DeprecationWarning 警告。

但是从上面的引用中我可以理解，为了支持多个数据库，添加了函数签名，并且需要一个额外的参数`connection`。我还检查了`db_type()`我安装的 Django 中的签名，如下所示：

```
/django$ grep --exclude-dir=".svn" -n 'def db_type(' * -R 
contrib/localflavor/us/models.py:8:    def db_type(self):
contrib/localflavor/us/models.py:24:    def db_type(self):
   :
   : 
```

我也参考了 Django 文档

> ### [Field.db_type（自我，连接）：](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.db_type)
> 
> 返回*Field 的数据库列数据类型*，同时考虑到连接对象以及与之关联的设置。

然后我可以理解，要解决这个问题，我必须继承`models.filed`类并覆盖`def db_type()`函数。而且因为我使用[PostgreSQL 在其中创建 300 个字符类型的字段](http://www.postgresql.org/docs/9.1/static/datatype-character.html)，所以我需要返回`'char(300)'`. 在我的 models.py 中，我添加了：

```
class CharMaxlengthN(models.Field):
    def db_type(self, connection):
        return 'char(%d)' % self.max_length  # because I am using postgresql 
```

^(如果您遇到类似的问题，请查看您的下划线数据库手册，了解您需要创建哪种类型的列并返回一个字符串。)

并更改了新字段的定义（我需要添加）阅读评论：

```
included_domains = CharMaxlengthN( # <--Notice change 
      "set of comma(,) seprated list of domains in target emails", 
      default="",           
      max_length=it_len.EMAIL_LEN*5) 
excluded_domains = CharMaxlengthN( # <-- Notice change
     "set of comma(,) seprated list of domains NOT in target emails", 
     default="",               
     max_length=it_len.EMAIL_LEN*5) 
```

然后我执行了之前失败的相同命令：

```
t$ python manage.py evolve --hint --execute

You have requested a database evolution. This will alter tables
and data currently in the None database, and may result in
IRREVERSABLE DATA LOSS. Evolutions should be *thoroughly* reviewed
prior to execution.

Are you sure you want to execute the evolutions?

Type 'yes' to continue, or 'no' to cancel: yes
Evolution successful. 
```

我还检查了我的数据库并测试了我的新增功能它现在运行良好，没有数据库问题。

如果要创建 ENUM 字段，请阅读[`Specifying a mySQL ENUM in a Django model`](https://stackoverflow.com/a/19040441/1673391).

**编辑：**我意识到`models.Field`我应该继承更具体的子类而不是子类，即`models.CharField`.

同样，我需要创建十进制数据库字段，所以我在模型中添加了以下类：

```
class DecimalField(models.DecimalField):
    def db_type(self, connection):
        d = {
            'max_digits': self.max_digits,
            'decimal_places': self.decimal_places,
        } 
        return 'numeric(%(max_digits)s, %(decimal_places)s)' % d 
```

# apache - htaccess RewriteCond 让对 website.com/m/... 的请求保持不变

> ID：10216020
> 
> 赞同：2
> 
> 时间：2012-04-18T18:54:03.790
> 
> 标签：apache, .htaccess, mod-rewrite, apache2

从电话中，如果用户尝试访问`website.com`，他们将被重定向到`mobile.website.com`。但是，`mobile.website.com`向 发出 AJAX 请求`website.com`，所以我让所有请求都通过`website.com/m/...`. 这不起作用：

```
# redirect phones/tablets to mobile site
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{HTTP_HOST} !mobile\.website\.com [NC]
RewriteCond %{REQUEST_URI} !^/m/ [NC]
RewriteRule ^(.*)$ http://www.mobile.website.com/$1 [L,R=302] 
```

特别是这一行：

```
RewriteCond %{REQUEST_URI} !^/m/ [NC] 
```

如果 url 匹配，它应该取消重写规则`website.com/m/...`。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:44:20.470

用这个改变你的代码：

```
# redirect phones/tablets to mobile site
RewriteCond %{HTTP_USER_AGENT} (android|blackberry|ipad|iphone|ipod|iemobile|opera [NC]mobile|palmos|webos|googlebot-mobile) [NC]
RewriteCond %{HTTP_HOST} !mobile\.website\.com$ [NC]
RewriteRule ^(?!m/).*$ http://www.mobile.website.com%{REQUEST_URI} [L,R,NC] 
```

此外，如果这仍然不起作用，请从您的 Apache`access.log`和`error.log`.

# php - 基于sql查询在while循环中动态创建变量

> ID：10216026
> 
> 赞同：-1
> 
> 时间：2012-04-18T18:54:25.543
> 
> 标签：php, mysql, variables

```
SELECT a.uid, a.name_f, a.name_l, b.position FROM users a, room_members b WHERE a.uid = b.userid AND b.room_id=$room_id 
```

我有上面的查询，它根据 room_id 选择某个用户的名称、uid、个人资料图片和位置，并且我想返回一个 while 循环，它将以下变量分配给我的查询中返回的任何位置，动态。

```
$position1_name_f
$position1_name_l
$position1_uid
$position1_pic

$position2_name_f
$position2_name_l
$position2_uid
$position2_pic 
```

例如，如果位置 4 和位置 8 是返回的数据中唯一的位置，它将返回以下变量，我将能够在我的脚本中自由使用这些变量。

```
$position4_name_f
$position4_name_l
$position4_uid
$position4_pic

$position8_name_f
$position8_name_l
$position8_uid
$position8_pic 
```

最多有10个位置。我迫切需要这些变量，因为我在网站布局中大量使用它们，而且我无法进行简单的 while 循环回显；否则，一切都会容易得多。

我尝试使用可变变量，也尝试部署一个计数器，但都无法工作。

我开始了以下查询，非常感谢一些帮助。谢谢

```
$room_members=mysql_query("SELECT a.uid, a.name_f, a.name_l, b.position FROM users a, room_members b WHERE a.uid = b.userid AND b.room_id=$room_id");
while($members_sql=mysql_fetch_array($room_members))
{
//Need some dynamic variables here...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:57:28.927

你这样做是错的！

这就是`array`s 的用途：

```
$result = array();

$result[1] = array('name_f' => 'data',
                   'name_l' => 'data',
                   etc,
                   ); 
```

从您的评论中：

> 但是我将如何检查一个位置是否已设置或返回为空？我基本上需要 if (isset(position_1)) {show position_1_name_f}

```
if (isset($result[1])) {
    echo $result[1]['name_f'];
} 
```

因此，您可以执行以下操作：

```
$members = array();

$room_members = mysql_query("SELECT a.uid, a.name_f, a.name_l, b.position FROM users a, room_members b WHERE a.uid = b.userid AND b.room_id=$room_id");
while($members_sql=mysql_fetch_assoc($room_members)) {
    $members[] = $members_sql;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:56:59.173

为什么不为此使用数组或具有已实现迭代器的对象？

应该更容易:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:59:30.510

您可以将变量名称构建为字符串，如下所示：

```
$i = 1;
while($members_sql=mysql_fetch_array($room_members))
{
  $variablebase = 'position'.$i++.'_';
  $variablename = $variablebase.'name_f';
  $$variablename = $members_sql['name_f'];
} 
```

在此 $positionX_name_f 声明之后。

但是数组不是更好的解决方案吗？

# .net - 解析日期格式难以转换

> ID：10216031
> 
> 赞同：3
> 
> 时间：2012-04-18T18:54:39.337
> 
> 标签：.net, regex, vb.net, datetime-parsing

我解析了一个字符串格式的日期，并希望将其转换为日期时间格式，但无法弄清楚如何执行此操作。日期显示为这样；

```
Wed April 18 08:00:04 +08:00 2012 
```

并希望以简单的形式

```
2012-04-18 08:00:00 
```

代码：

```
Dim postDate As DateTime
Dim provider As CultureInfo = CultureInfo.InvariantCulture

contentDate = Regex.Replace(contentDate, "\+", "")
Dim format As String = "ddd MMMM dd HH:mm:ss zzz yyyy"
postDate = DateTime.ParseExact(contentDate, format, provider)
contentDate = postDate.ToString("yyyy-MM-dd hh:mm:ss tt") 
```

任何想法表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T19:08:38.523

```
var format = "ddd MMMM dd H:mm:ss zzz yyyy";
var culture = System.Globalization.CultureInfo.InvariantCulture;
DateTime date = DateTime.ParseExact(dateString.Trim(), format, culture); 
```

将解析您提供的日期格式。请注意，上述格式字符串假定您正在解析的日期格式使用两位数表示小于 10 的天数，即。`April 01`.

```
date.ToString("yyyy-MM-dd hh:mm:ss tt"); 
```

将产生所需的输出日期格式。

作为参考，您应该查看[DateTime.ParseExact()](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)和[Custom Date and Time Format Strings](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)的 MSDN 文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:07:32.780

```
 string dateString, format;  
  DateTime result;
  CultureInfo provider = CultureInfo.InvariantCulture;

  dateString = "Wed April 18 08:00:04 +08:00 2012";
  format = "ddd MMMM dd HH:mm:ss zzz yyyy";
  try {
     result = DateTime.ParseExact(dateString, format, provider);
     Console.WriteLine("{0} converts to your format {1}.", dateString, 
        result.ToString("yyyy-MM-dd HH:mm:ss"));
  }
  catch (FormatException) {
     Console.WriteLine("{0} is not in the correct format.", dateString);
  } 
```

# xslt - 如何使用 xslt 检查重复的元素值

> ID：10216035
> 
> 赞同：2
> 
> 时间：2012-04-18T18:54:52.457
> 
> 标签：xslt

```
 <BookList>
    <Book>
    <History>
    <Type>history</Type>
    <Prize>123</Prize>
    <Publication>``
    <Name>YEAP1</Name>
    </Publication>
    <RNumber Type="VolumeNumber">11111</RNumber>
    <RNumber Type="SupplementNumber">123456</RNumber>
    </History>
    <chemistry>
    <Type>chemistry</Type>
    <Prize>333</Prize>
    <Publication>
    <Name>YEAP</Name>
    </Publication>
    <RNumber Type="VolumeNumber">11111</RNumber>
    <RNumber Type="SupplementNumber">45454</RNumber>
    </chemistry>
                      ......

    </Book>
    </BookList> 
```

有重复的 VolumnNumber 11111。如何使用 xslt 检查 BoolList xml 中重复的 VolumnNumber。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T22:34:32.200

**I. 这可以使用单个 XPath 表达式找到**：

```
 false()
   or
    /*/*/*/RNumber
           [@Type='VolumeNumber'
          and
            . = ../preceding-sibling::*
                   /RNumber[@Type='VolumeNumber']
            ] 
```

**这是一个完整的 XSLT 转换，它评估这个 XPath 表达式并输出这个评估的结果**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  Duplicate volume numbers exist: <xsl:text/>

  <xsl:value-of select=
   "false()
   or
    /*/*/*/RNumber
           [@Type='VolumeNumber'
          and
            . = ../preceding-sibling::*
                   /RNumber[@Type='VolumeNumber']
            ]
   "/>

 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<BookList>
    <Book>
        <History>
            <Type>history</Type>
            <Prize>123</Prize>
            <Publication>``     
                <Name>YEAP1</Name>
            </Publication>
            <RNumber Type="VolumeNumber">11111</RNumber>
            <RNumber Type="SupplementNumber">123456</RNumber>
        </History>
        <chemistry>
            <Type>chemistry</Type>
            <Prize>333</Prize>
            <Publication>
                <Name>YEAP</Name>
            </Publication>
            <RNumber Type="VolumeNumber">11111</RNumber>
            <RNumber Type="SupplementNumber">45454</RNumber>
        </chemistry>
        ......      
    </Book>
</BookList> 
```

**产生了想要的正确结果：**

```
 Duplicate volume numbers exist: true 
```

* * *

**二、使用键的解决方案（通常更有效）：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="kVolNum" match="RNumber[@Type='VolumeNumber']"
          use="."/>

 <xsl:template match="/">
  Duplicate volume numbers exist: <xsl:text/>

  <xsl:value-of select=
   "false()
   or
    /*/*/*/RNumber
            [@Type='VolumeNumber'
           and
             key('kVolNum',.)[2]
            ]"/>

 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
 Duplicate volume numbers exist: true 
```

# c++ - c++ 在遍历所有迭代器时擦除 std::vector.end()

> ID：10216039
> 
> 赞同：2
> 
> 时间：2012-04-18T18:55:03.233
> 
> 标签：c++, standard-library

我想从向量中删除一些迭代器，所以这就是我现在所拥有的。

```
void function(std::vector <class*> & vector)
{
    std::vector <class*>::iterator it;
    for(it = vector.begin(); iter != vector.end(); ++iter)
        {
            if(it->value == 1)
                vector.erase(it);
        }
    Display(vector);
    return;
} 
```

显然，当迭代器被删除是向量中的最后一个时，这段代码给了我一个错误，否则它似乎工作正常。我知道在这样的循环中修改向量可能不是可取的行为，但如果我必须这样做，最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:00:52.383

```
for (it = vector.begin(); it != vector.end(); )
{
    if (it->value == 1)
        it = vector.erase(it);
    else
        ++it;
} 
```

但是对于这种情况，您实际上应该只使用`std::remove_if`适当的谓词。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T19:01:06.333

另一种方法：

```
vector.erase( std::remove_if( vector.begin(), vector.end(), boost::bind( &class::value, _1 ) == 1 ), vector.end() ); 
```

`boost::bind`如果可用，可能会被替换`std::bind`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T19:14:02.873

在迭代它时从向量中擦除是个坏主意。简单过滤一下。

```
void function(std::vector <class*> & vector)
{
    std::vector <class*>::iterator from= vector.begin();
    std::vector <class*>::iterator to= from;
    for(; from != vector.end(); ++from)
        {
            if((*from)->value == 1) continue; 
            // it should be (*from) or use boost::ptr_vector
            *(to++)=*from;
        }
    vector.erase( to, vector.end() );
    Display(vector);
    return;
} 
```

这与 Ylisar 的代码完全相同。恕我直言，这对于矢量来说是最好的，如果你总是要删除一些东西，但是如果删除非常罕见（对于整个一个矢量），请使用 Benjamin Lindley 版本。

无论优化是什么，您都可以仅在有要删除的内容时进行过滤：

```
void function(std::vector <class*> & vector)
{
   std::vector <class*>::iterator to= vector.begin(); 
   for(; to != vector.end(); ++to)
   {
      if((*to)->value == 1) 
      {
         std::vector <class*>::iterator from=to;
         for(++from; from != vector.end(); ++from)
         {
            if((*from)->value == 1) continue;
            *(to++)=*from;
         }
         vector.erase( to, vector.end() );
         break;
      }
    }
    Display(vector);
    return;
} 
```

如果您不需要保留顺序，则可以从背面复制到最小复制过热：

```
void function(std::vector <class*> & vector)
{
   std::vector <class*>::iterator to= vector.begin(); 
   std::vector <class*>::iterator from=vector.end();
   if(to == from) return;
   for(;;)
   {
      if((*to)->value == 1) // need skip value from begin
      {
         for( --from; from != to; --from)
         {
            if((*from)->value == 1) continue; // need skip value from end
            *to=*from;
            ++to; // copied, move to next
         }
      } 
      else 
      {
         ++to; //preserved, move to next
      }
      if(to == from) 
      {
         vector.erase( to, vector.end() ); 
         break;
      }
    }
    Display(vector);
    return;
} 
```

# visual-studio-2010 - Windows 7 Phone 导航到 URL（找不到类型或命名空间“WebBrowserTask”

> ID：10216040
> 
> 赞同：0
> 
> 时间：2012-04-18T18:55:08.180
> 
> 标签：visual-studio-2010, windows-phone-7

Win7.1 手机应用，通过 VS10

我认为我需要包含一个命名空间，但无法在线找到资源来告诉我这可能是什么。如果它有所作为，这将是一个 ApplicationBarMenuItem。还想知道我是否可能需要知道其他任何事情以确保我没有遇到任何运行时或其他问题。

```
void Google_Click(object sender, EventArgs e)
{
    WebBrowserTask task = new WebBrowserTask();
    task.URL = "http://www.google.com";
    task.Show();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:01:20.967

检查您是否有所需的参考资料（Microsoft.Phone、Microsoft.Phone.Interop）并添加：

```
using Microsoft.Phone.Tasks; 
```

可能需要添加另一个“任务”参考。

# c# - 从 Silverlight/C# 程序查询数据库

> ID：10216041
> 
> 赞同：0
> 
> 时间：2012-04-18T18:55:10.123
> 
> 标签：c#, sql-server, silverlight, ado.net

首先，我在这个项目的深层次上被抛弃了。我以前从未使用过 Silverlight。我的任务是创建理论上应该是一个非常简单的项目，但我有点难过。

这个项目非常简单地从 SQL Server 2008 数据库中提取。在这个数据库中有 3 个表和 1 个视图。这些表基本上包含了很多关于我公司现有项目的数据。（时间表信息、预计完成日期、项目分配的小时数/美元等）。

我在 VS 2010 中使用 Silverlight 业务应用程序模板。我已通过服务器资源管理器成功添加到数据库的连接，还添加了 ADO.NET 数据实体框架和域服务类。这使得加载的初始页面变得非常容易。我能够将所需的视图拖到页面上，并在数据网格中显示所有数据。在这个数据网格中，我添加了一个按钮列，使用户能够查看有关特定项目的更多详细信息。

```
 <sdk:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button Content="View Details" Click="Button_Click"></Button>
        </DataTemplate>
    </sdk:DataGridTemplateColumn.CellTemplate> 
```

然后在 Button_Click 方法中，我有：

```
 string temp1 = summary1DataGrid.SelectedItem.ToString();
    string[] temp2 = new string[10];
    temp2 = temp1.Split(',');
    temp1 = temp2[3].Remove(temp2[3].IndexOf('}'));
    NavigationService.Navigate(new Uri(String.Format("Details/{0}", temp1), uriKind.Relative)); 
```

这将从现有数据网格中提取我需要的 ID 号并将其传递到下一页，我可以在其中提取 ID 号：

```
 string wbsid = NavigationContext.QueryString["id"]; 
```

这就是我的问题真正开始的地方。基本上我需要做的是查询我添加到这个项目中的数据库。我想显示一个仅包含具有该特定 ID 的数据的数据网格。我知道如何执行 SQL 查询，但不确定如何将所有这些合并到 Silverlight/C# 项目中。使用最后一个代码段，我可以获得我需要的 id。现在我有了它，如何用它查询数据库？

我一直在网上进行研究，很难找到至少可以为我指明正确方向的东西。如果有人能给我一点帮助，我将不胜感激。对于冗长的解释，我很抱歉，我只是想向你们提供所有可能有帮助的细节。提前致谢。祝你有美好的一天。

哦，如果您需要任何其他信息，我会经常检查并尽快回复您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:04:11.450

我认为使用[WCF Data Services](http://msdn.microsoft.com/en-us/data/bb931106)或[WCF RIA Services](http://www.silverlight.net/learn/advanced-techniques/wcf-ria-services/get-started-with-wcf-ria-services)会使您的任务变得更容易。这两种技术都可以与 Silverlight 一起使用，并允许您与数据库进行交互。

请记住（您可能已经知道）您将从 Silverlight 进行的所有交互都是异步的，并且 Silverlight 应用程序远离为您提供服务的 Web 服务器，因此获取数据将涉及网络流量/请求。

希望这能给你一个开始。

# sql - SQL SUM 基于一列一表的前两个字符

> ID：10216042
> 
> 赞同：1
> 
> 时间：2012-04-18T18:55:12.780
> 
> 标签：sql, sql-server, tsql, sum, subtotal

我对 SQL 相当陌生，并且有以下两难境地。我有以下部分表：

```
账户描述 ShortDescription 余额
------------------------------------------------
100001 废话，废话，废话 28350.68
100020 " " 2537.35
111000 " " 86898.12
111001 " " 63943.63
121000 " " 55325.68
121012 " " 65264.35
122000 " " 94898.85
```

我需要从前两位数字开始对所有帐户的余额求和。所以前两个余额相加，接下来的两个相加，接下来的三个相加，等等。然后我需要把这些和创建一个总计。

最终表将包括所有列、SubTotal 和 GrandTotal。我想不出一个好的方法来做到这一点；我尝试了 OVER - PARTITION BY 没有成功（SELECT SUM(Balance) OVER (PARTITION BY Account) AS SubTotal）。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:11:51.537

这是输出包含总计和小计的表格的一种方式：

```
 -- select individual Rows
    select Account, Description, ShortDescription, Balance from Accounts
union
    -- subtotals
    select 
        substring(Account, 1, 2) as Account, 
        substring(Account, 1, 2) + ' Subtotal' as Description,
        '' as ShortDescription,
        sum(Balance) as Balance
    from Accounts
    group by substring(Account, 1, 2)
union
    -- grand total
    select 
        '' as Account,
        'Grand Total' as Description,
        '' as ShortDescription,
        sum(Balance) as Balance
    from Accounts
-- order all records to give the illusion of interlaced subtotals/grand total
order by Account desc 
```

但是，我认为最佳解决方案是从表中进行简单选择并使用报告工具（例如 SQL Server Reporting Services）处理总计/小计。

请不要在上面的声明中假设该`Account`列的类型是`char`/ `varchar`。如果它被声明为`int`或其他数字类型，则应添加适当的转换/转换转换。（a中的所有数据集`union`必须具有相同的列数和相同的数据类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:38:09.167

我认为最初的问题是正确编写分区有点困难，因为语法有点痛苦。如果我不明白您正在寻找什么（各个行中的所有值和总计）作为 w0lf 提供的简单替代方案，那么这可能是一个更快的解决方案：

```
 Select *, SUM(Balance) OVER (PARTITION BY substring(Account, 1, 2)) as Subtotal, 
  Sum(Balance) over(Partition by 1) as Total
    from dbo.Accounts 
```

这给出了每个原始列 (*)，除了小计列和总计列，使用分区上的总和。

我使用了以下结构和您的数据，如果您遇到任何错误，这可能会有所帮助：

```
 CREATE TABLE dbo.Accounts (Account varchar(10), [Description] varchar(10),
ShortDescription varchar(10), Balance money)  GO

    INSERT INTO Accounts (Account, Description, ShortDescription, Balance) VALUES  
    (100001, 'Blah', 'Blah2', 28350.68),(100020, 'Blah', 'Blah2', 2537.35),
    (111000, 'Blah', 'Blah2', 86898.12),(111001, 'Blah', 'Blah2', 63943.63),
    (121000, 'Blah', 'Blah2', 55325.68),(121012, 'Blah', 'Blah2', 65264.35),
    (122000, 'Blah', 'Blah2', 94898.85) 
```

作为附录，如果帐户存储为数字，您可以使用 substring(cast(Account as varchar(max)), 1, 2)) 代替 substring(Account, 1, 2)。

# java - 以编程方式显示命令提示符/终端输出

> ID：10216047
> 
> 赞同：1
> 
> 时间：2012-04-18T18:55:39.927
> 
> 标签：java, terminal, command-prompt

我不知道如何搜索这个。我有一个摇摆应用程序。我想让用户在`System.out.println("MY_OUTPUT");`浏览应用程序时打开命令提示符并查看输出 ()。但是，在大多数情况下，这不是必需的，因此他们可以在启动应用程序后启用它。有没有办法做到这一点？基本上，我正在寻找某种方法来随时打开命令提示符或与我的程序关联的终端。谢谢您的帮助。

**注意1：**这与接收用户的输入无关，都是关于输出给用户的。

**注意2：**我意识到我可以（并且也许应该）在带有文本区域的单独摆动窗口中执行此操作，但是我所拥有的一切都将如此`System.out.println();`，并且我想在未来的项目中使用这种相同的东西，所以我真的很希望能够使用命令提示符来执行此操作。此外，这首先是我的问题。感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:00:49.877

老实说，我发现在 GUI 环境中通过命令行而不是某些对话框（我的意思是您显示 GUI）接受用户输入很奇怪，但您可以只使用 a`Runtime`来执行命令提示符。看这里[cmd 使用 java](https://stackoverflow.com/questions/4688123/how-to-open-the-command-prompt-and-insert-commands-using-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:32:50.737

我想这个要求来自您在您的应用程序中使用简单的日志记录策略，只需使用`System.println()`语句即可。您应该将`System.println()`方法调用包装在某种记录器模式类中。您可以使用 Log 方法创建 Logger 接口。ConsoleLogger impl 只会写入控制台，对您进行测试/调试很有用。

然后对于您的真实用户，您有几个选择。如果他们想查看您的应用程序的输出，您可以使用 FileLogger 并让他们读取日志文件。或者您可以制作某种记录到某个 GUI 窗口的 CustomTextWindowLogger，或者仍然是一个 GUI 窗口可以显示数据的文件。

无论哪种方式，我从未见过应用程序将`System.println()`语句重定向到图形组件，因为它只是将数据发送到标准输出流。沿着这些思路，我想您也可以尝试将`System.out`输出流更改为您的 GUI 窗口可以显示的不同流。这将更容易快速实施，但更难改变。使用 Logger 界面，您可以轻松地改变对如何将输出提供给用户的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:59:34.260

为什么不直接弹出一个文本字段/区域（或 Swing 中的任何内容），然后在那里写消息？

# firefox - Firefox 中只显示了几个linkedin 跟进按钮中的第一个

> ID：10216048
> 
> 赞同：1
> 
> 时间：2012-04-18T18:55:49.077
> 
> 标签：firefox, linkedin

我已经在我的网页中实现了几个 LinkedIn 关注按钮。在所有浏览器中，所有按钮都会显示。但是，在Firefox中，只有第一个出现在宽度为66px的div中（这个div的id是body），其他的出现在2px宽度的div中，所以你只能看到一个蓝色的垂直条纹。

如果有帮助，这是第一个 body div

```
 <div id="body" style="width: 66px;"> 
```

其余的：

```
 <div id="body" style="width: 2px;"> 
```

这是由[LinkedIn](https://developer.linkedin.com/plugins/follow-company)提供的代码生成的代码。

# c# - 使用 OpenXML 2.0 合并文档

> ID：10216052
> 
> 赞同：1
> 
> 时间：2012-04-18T18:56:00.170
> 
> 标签：c#, .net, ms-word, openxml

我正在尝试将数据库中的一些信息和一些图片插入到 Word 文档中。

我创建了一个 Word 文档作为模板，我想在其中查找关键字并将其替换为实际数据和图片。

如何打开此模板，替换关键字，并将其放入新文档中。然后我需要重新打开该模板并再次执行此操作，直到列表中的每个人都在新的 Word 文档中。

```
//The template file exists, so open it and use it to set up the main Word document
using (WordprocessingDocument templatePackage = WordprocessingDocument.Open(templateDocPath, false))
{
    //Read the template file
    string docText = null;
    using (StreamReader sr = new StreamReader(templatePackage.MainDocumentPart.GetStream()))
    {
        docText = sr.ReadToEnd();
    }

    string tempString = docText;
    Regex regexText = new Regex("&lt;name&gt;");
    docText = regexText.Replace(docText, tnlCampers[0].FirstName + " " + tnlCampers[0].LastName);

    regexText = new Regex("&lt;address&gt;");
    docText = regexText.Replace(docText, tnlCampers[0].Address1 + " " + tnlCampers[0].Address2 + " " + tnlCampers[0].City + ", " + tnlCampers[0].State + " " + tnlCampers[0].ZipCode);

    regexText = new Regex("&lt;phone&gt;");
    docText = regexText.Replace(docText, tnlCampers[0].CellPhone);

    regexText = new Regex("&lt;email&gt;");
    docText = regexText.Replace(docText, tnlCampers[0].Email);

    //Write to the newly created Word Document
    using (StreamWriter sw = new StreamWriter(package.MainDocumentPart.GetStream(FileMode.Create)))
    {
        sw.Write(docText);
    }
} 
```

但是当我在我的 tnlCampers 列表上执行 foreach 循环时，它会引发错误，因为它试图复制完整的文档结构而不仅仅是正文部分。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:42:17.227

您可以尝试[Word Doc Generator](http://worddocgenerator.codeplex.com/)，这是一个使用 Visual Studio 2010 和 Open XML 2.0 SDK 从模板生成 Word 文档的实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:15:23.357

你也可以试试我们的[GemBox.Document](http://www.gemboxsoftware.com/document/overview)组件。

它对邮件合并具有非常用户友好和高效的支持。请参阅[C# Word 邮件合并](http://www.gemboxsoftware.com/document/articles/c-sharp-vb-net-mail-merge)文章和[自定义邮件合并](http://www.gemboxsoftware.com/SampleExplorer/Document/MailMerge/CustomizeMerge)示例。

# c# - google avd 和 3g 打开

> ID：10216054
> 
> 赞同：1
> 
> 时间：2012-04-18T18:56:07.773
> 
> 标签：c#, java, android, c++, android-emulator

我不知道如何在我的 google avd 模拟器中打开 3g。

我选择 Settigngs->Wireless network->mobile network-> 然后只有 2g 和其他与 3g 无关的。

谁能帮我在模拟器中打开3g？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:20:42.840

检查移动网络>数据启用这就是3g：数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:08:54.953

在移动设置中启用 3G（顺便说一句，2.3.3 android 模拟器）应该是这样的：

*   数据启用 [x]
*   数据漫游 []
*   接入点名称
*   仅使用 2G 网络 []
*   网络运营商

# mysql - 在数据库中搜索具有多个 {tokens} 的字符串

> ID：10216057
> 
> 赞同：1
> 
> 时间：2012-04-18T18:56:19.747
> 
> 标签：mysql, sql

考虑下表和消息。其中一些有一个或多个形式`{bar|***}`的标签，可以`***`是任何东西（字母、数字、标点符号）。

```
id  message
---------------------------------------------------
1   foo {bar|112} baz {bar|foo} {bar|215.54}
2   lorem ipsum {bar|foo} dolor {bar|samet} digitas
3   last {bar|t} label example
4   string with no label
5   another {zoo} string with {foo|ads} label 
```

如果我想查找具有至少一个 {bar| 形式的标签的所有消息 *** } 我查询：

```
SELECT * FROM messages WHERE message LIKE '%{bar|%'; 
```

但是现在，我需要一个查询，我只能选择那些**最多**有两个这样的标签的消息：

```
id  message
---------------------------------------------------
2   lorem ipsum {bar|foo} dolor {bar|samet} digitas
3   last {bar|t} label example 
```

换句话说：有没有办法（在 MySQL 中）计算消息中标签的数量并只返回其中包含一个或两个标签的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:23:34.207

```
SELECT * FROM messages WHERE (LENGTH(message) - LENGTH(REPLACE(message,'{bar|','')))/5 BETWEEN 1 AND 2; 
```

这应该有效。

# android - 按下通知状态栏以从已关闭程序的最后一个活动继续

> ID：10216058
> 
> 赞同：1
> 
> 时间：2012-04-18T18:56:22.757
> 
> 标签：android, notifications, android-activity

```
public void notification_status(Activity activity, String title, String details)
{
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) activity.getSystemService(ns);
        int icon = R.drawable.bulogo;
        CharSequence tickerText = "My App";
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, tickerText, when);
        Context context = activity.getApplicationContext();
        CharSequence contentTitle = title;
        CharSequence contentText = details;

      ----->  Intent notificationIntent = new Intent(activity, ???????);
        PendingIntent contentIntent = PendingIntent.getActivity(activity, 0, notificationIntent, 0);

        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        notification.sound = Uri.parse("android.resource://com.champloo.mugen/" + R.raw.beep);

        mNotificationManager.notify(1, notification);
} 
```

大家好，我做了这个方法，以便我在我的应用程序中的任何位置调用它以在状态栏上发布通知，如果用户暂时关闭程序，我不确定如何告诉程序返回到其最后一个活动......并且按下状态栏下的通知。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:17:41.913

只需使用与 android 在启动应用程序时使用的相同的意图过滤器：

```
 final Intent notificationIntent = new Intent(context, YourActivity.class);
    notificationIntent.setAction(Intent.ACTION_MAIN);
    notificationIntent.addCategory(Intent.CATEGORY_LAUNCHER); 
```

由于您创建的从通知栏打开 Activity 的意图与 android 用于启动您的应用程序的意图相同，因此将显示先前打开的 Activity 而不是创建新的。

# ember.js - 带有具有不同模板的视图的 Ember CollectionView

> ID：10216059
> 
> 赞同：2
> 
> 时间：2012-04-18T18:56:24.807
> 
> 标签：ember.js

鉴于我有这个代码：

```
Ember.App.View = Ember.View.extend({
    templateName: "templateA"
});
Ember.App.View = Ember.View.extend({
    templateName: "templateB"
});
Ember.App.ViewC = Ember.CollectionView.extend({
    itemViewClass: "Ember.View",
    contentBinding: "SomeController"
}); 
```

有没有办法将具有不同模板的视图添加到 CollectionView？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T09:50:12.860

您可以创建`templateName`计算`itemViewClass`属性，请参阅[http://jsfiddle.net/pangratz666/vGHcD/](http://jsfiddle.net/pangratz666/vGHcD/)：

```
App.MyView = Ember.View.extend({
    templateName: function() {
        var templateName = Ember.getPath(this, 'content.label');
        // return default template if there is no such template 
        return (!Ember.TEMPLATES[templateName]) ? 'default' : templateName;
    }.property('content.label').cacheable(),

    // rerender the view if the template name changes
    _templateNameChanged: function() {
        this.rerender();
    }.observes('templateName')
});

App.CollectionView = Ember.CollectionView.extend({
    itemViewClass: 'App.MyView'
}); 
```

另请查看相关问题：[Select view template by model type/object value using Ember.js](https://stackoverflow.com/q/9999064/65542)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:17:23.163

另一种解决方案是使用[ghempton/ember-layout](https://github.com/ghempton/ember-layout)，请参阅[http://jsfiddle.net/pangratz666/XhfYy/](http://jsfiddle.net/pangratz666/XhfYy/)：

```
App.ViewA = Ember.View.extend({
    templateName: "templateA"
});
App.ViewB = Ember.View.extend({
    templateName: "templateB"
});

App.ItemView = Ember.View.extend({
    template: Ember.Handlebars.compile('{{dynamicView content}}')
});

App.CollectionView = Ember.CollectionView.extend({
    itemViewClass: 'App.ItemView'
});

App.controller = Ember.ArrayProxy.create({
    content: [App.ViewA.create(), App.ViewB.create()]
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T13:35:21.153

如果您还需要可变视图类，您可以使用以下工具：

**列表视图.hbs**

```
 {{each item in list itemViewClass=view.Item}} 
```

**列表视图.js**

```
import Ember from 'ember';
import { mutableView } from 'utils/mutable-view';

export default Ember.View.extend({

  Item: mutableView('content.type', function (type, container) {
    if (type === 'type_a') {
      return container.lookupFactory('view:item-a-view');
    }
    if (type === 'type_b') {
      return container.lookupFactory('view:item-b-view');
    }
  }),
}); 
```

最后是**mutable-view.js的实用方法****mutableView**

 **```
import Ember from 'ember';

var mutableViewTemplate = Ember.Handlebars.compile('{{view view.DynamicView content=view.content}}');

export var mutableView = function(observes, viewSelector) {
  return Ember.View.extend({

    template: mutableViewTemplate,

    __dynamicViewCache: {},

    DynamicView: Ember.computed(observes, function () {
      var view;
      var cache = this.get('__dynamicViewCache');
      var modificator = this.get(observes);

      view = cache[modificator];
      if (view) {
        return view;
      }

      view = viewSelector(modificator, this.get('container'));
      if (view) {
        cache[modificator] = view;
        return view;
      }

      throw new Error(`Cannot determine view class for '${modificator}' of '${observes} '`);
    })
  });
}; 
```**

# asp.net - Asp.net 展开按钮

> ID：10216060
> 
> 赞同：1
> 
> 时间：2012-04-18T18:56:31.657
> 
> 标签：asp.net, expand

我的 asp.net 网站项目使用 c# 代码，我有一个表，我在其中以编程方式生成行。其中一些行具有展开按钮以显示更多信息。现在，我捕获了由按钮引起的回发，解析导致回发的按钮的名称并重新生成我的所有行，为适当的行添加一个标签，其中包含需要扩展的信息。

我想知道是否有更好的方法来实现不需要我重新生成所有行的展开/折叠机制。我尝试在表格中搜索要添加信息的行，但由于这些行是以编程方式生成的，因此在按钮导致的每次回发时表格都是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:04:51.997

您可以有一个列表变量来保存您为表生成的行实例。在回发时，您不是生成，而是迭代您的列表并将它们添加到表中。同时，您可以检查每一行是否是您需要添加信息的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:32:47.593

最好在客户端上进行扩展，在按钮上单击获取服务器以获取内容，或者您​​可以呈现扩展所需的所有 html 但具有隐藏样式，然后在单击按钮时使用 javascript 更改样式。

方法 1 - Ajax 调用和替换内容 - [http://weblogs.asp.net/karan/archive/2010/09/12/calling-server-side-method-using-jquery-ajax.aspx](http://weblogs.asp.net/karan/archive/2010/09/12/calling-server-side-method-using-jquery-ajax.aspx)

方法 2 - 使用 jQuery 轻松完成：

```
<asp:Panel ID="showHidePanel" runat="server" style="display:none;">
  Additional content
</asp:Panel>
<input type="button" onclick="$('#<%=showHidePanel.ClientID %>').show(); return false;" value="Show" /> 
```

# css - Bootstrap 中如何使用@altfontfamily 变量？

> ID：10216061
> 
> 赞同：2
> 
> 时间：2012-04-18T18:56:35.660
> 
> 标签：css, variables, twitter-bootstrap

在 variables.less 中，排版部分有一个名为`@altfontfamily`.

我想使用 Alt Font Family，但我不知道如何使用。有没有我打电话来使用它的课程？或者它是否可以用作我制作自己的课程的工具，如下所示：

```
.serif-link {
        font-family: @altFontFamily;
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T19:54:50.547

Less 是一个扩展 CSS 的系统。在这种情况下，它允许为变量赋值，然后在 css 文件的许多地方使用它们。

正如文件 variables.less 顶部的标题所说：

```
// Variables.less
// Variables to customize the look and feel of Bootstrap 
```

后来有一段说类似：

```
// Typography
// -------------------------
@baseFontSize:          13px;
@baseFontFamily:        "Helvetica Neue", Helvetica, Arial, sans-serif;
@baseLineHeight:        18px;
@altFontFamily:         Georgia, "Times New Roman", Times, serif; 
```

baseFontFamily 在几个地方用于设置样式，但我在任何地方都没有找到 altFontFamily。所以，我想如果你愿意的话，你可以使用它是合理的，就像你建议的那样..

# objective-c - addObjectsFromArray 返回错误

> ID：10216069
> 
> 赞同：0
> 
> 时间：2012-04-18T18:56:58.100
> 
> 标签：objective-c, arrays

我正在尝试使用 addObjectsFromArray 将两个数组“连接”在一起（可以这么说）。这是代码的概述：

```
NSArray *fixed = [NSArray arrayWithArray:timeline2];
NSLog(@"Made the temp successfully.Contents: %@", fixed);

[arrayOfNewsItems addObjectsFromArray:fixed]; 
```

Log语句可以确认“fixed”和“timeline2”数组中存在有效数据，并且在程序前面，我确认了“arrayOfNewsItems”数组中存在数据。

我在尝试 addObjects.. 后收到的异常是这样的：

```
'NSInternalInconsistencyException', reason: '-[__NSCFArray insertObject:atIndex:]: mutating method sent to immutable object' 
```

arrayOfNewsItems 是一个 NSMutableArray。这是一个财产。实际上，它是这样声明的：

```
@property (nonatomic) NSMutableArray * arrayOfNewsItems; 
```

也许这是“非原子”声明？我也不完全理解这些。

我唯一能想到的是每个数组中的数组元素具有不同的对象类型——或者更确切地说，虽然它们都是字典对象的数组，但对象本身由不同的键/值对列表组成。例如：

数组元素 1 可能包含：

```
(key)                 (value)
name                   Joe
title                  Mr. 
```

并且数组元素 2 可能包含：

```
(key)                 (value)
phone                 555-1263
shoeSize              2 
```

现在，用任何其他语言，我永远不会尝试这个，但我很确定我在之前的帖子中被告知这样做是可以的。我知道objective-c将它们存储为（id），我们可以像这样将所有东西混合在一起。所以，问题是：

*   这是真的？
*   如果是这样，我错过了什么？

在我开始编写一个函数以使最终数组的所有字段名称相同之前，我会得到一个可靠的答案。

我当然会很感激我能得到的任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:00:31.063

嗯，很清楚：`mutating method sent to immutable object`
这意味着你有一个**不可变**的`NSArray`.

尽管它被定义为`NSMutableArray`，但这并不意味着它真的是一个。它仅在尝试调用变异方法（如`-addObjectsFromArray:`.

您必须确保在创建数组时，将 alloc/init 发送到**可变**版本：

```
self.arrayOfNewsItems = [[[NSMutableArray alloc] init] autorelease]; 
```

# javascript - 排队表单提交请求，直到服务器返回

> ID：10216073
> 
> 赞同：2
> 
> 时间：2012-04-18T18:57:04.730
> 
> 标签：javascript, jquery, backbone.js, coffeescript

我有一个基于主干的视图，用户可以在其中在文本字段中输入一个单词并提交表单。有两个与视图相关的事件 -`submit`和`keyup`.

```
class NewConceptView extends Backbone.View
  el: '#new-concept-cont'
  template: JST['concepts/new']

  events:
    'submit form': 'handleSubmit'
    'keyup #concept_title' : 'getPossibilities' 
```

当用户输入时，我需要访问我的服务器并请求一些关于用户输入内容的数据（称为`possibilities`）（就像一个自动完成插件）。

```
getPossibilities: (e) ->
  currentText = @titleInput.val() 
  if currentText.length > 0
    params = { text: currentText }
    $.getJSON(url, params, @buildConceptAttrs) 
```

然后当用户提交表单时，我需要从服务器获取最后的可能性并将它们添加到集合中。

```
handleSubmit: (e) ->
  e.preventDefault()
  @titleInput.val('')
  @collection.create(@conceptAttrs) 
```

当我在文本框中快速输入然后点击提交时，就会出现问题。基本上，表单在所有对服务器的可能性请求都返回之前被提交。

有没有办法让我排队提交事件，以便在所有可能性请求都返回之前它们不会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:16:38.380

```
Is there a way that I should be queuing submit events 
```

好吧，我不知道*should*，但我使用的基本方法是：

1.  初始化视图时，设置 this.outstanding_callbacks = 0;
2.  就在您进行 $.getJSON 调用之前，增加该 var (this.outstanding_callbacks++)
3.  在@buildConceptAttrs 中减少 var (this.outstanding_callbacks--)
4.  当你去提交的时候，检查outstanding_callbacks；如果 > 0，则不提交。相反，请执行 window.setTimeout(5000, retryFunction)，其中 5000 是您想要等待的毫秒数，而 retryFunction 基本上是相同的函数（它可能实际上是相同的函数）

现在，您可能需要进行一些绑定或其他操作，以便您可以访问步骤 #3 和 #4 中的视图，但希望这能给您一个粗略的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:43:59.930

我捕获了[jQuery.ajaxStart](http://api.jquery.com/ajaxStart)和[jQuery.ajaxStop](http://api.jquery.com/ajaxStop)事件。

我显示一条*加载*消息：

```
$(function(){
  $('#loading').ajaxStart( function() {
    $(this).animate({ top: "0" }, 200);
  });

  $('#loading').ajaxStop( function() {
    $(this).animate({ top: "-70" }, 100);
  });
}); 
```

但是考虑到您可以使用相同的技术来禁用`form.submit()`，或者至少等待`.ajasStop()`执行提交。

它并没有真正等待所有正在进行的事件.. 只是为了*AJAX*事件.. 但也许它足够解决你的问题。

# facebook - Facebook 插件正在向右转移到其边界之外

> ID：10216074
> 
> 赞同：2
> 
> 时间：2012-04-18T18:57:09.637
> 
> 标签：facebook

我已经稳定地在我的网站上工作了几个月，今天早些时候我注意到我的 facebook like 框和侧边栏上的 facebook 按钮都移到了右侧。它们似乎都在包含所有东西的包装之外，这很奇怪。以下是我正在谈论的一些屏幕截图：

*   喜欢盒子：http: [//i.imgur.com/qffws.jpg](http://i.imgur.com/qffws.jpg)
*   侧边栏：http: [//i.imgur.com/yZy8K.png](http://i.imgur.com/yZy8K.png)

我没有在我的网站上进行任何更改，我还在四个主要浏览器上进行了检查：

*   IE：侧边栏和点赞框都右移了，还有其他错误——但毕竟是IE。
*   Firefox：侧边栏和点赞框都向右移动。
*   Safari：它们都很好，并且在正确的位置。
*   Chrome：点赞框向右移动，但侧边栏很好。

我花了几个小时试图查看是否有其他人遇到此问题，并查看我的 css 是否有问题但没有运气。如果有人能对这个问题有所了解，我将不胜感激！这是我的网站，您需要自己检查问题：www。dogfactsdaily.com/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:24:16.667

好的，在对此感到恼火一段时间后，我决定做明智的事情并检查 FB 社交插件页面。

更新了我的代码以使用此处生成的新 HTML5 代码：

[https://developers.facebook.com/docs/reference/plugins/recommendations/](https://developers.facebook.com/docs/reference/plugins/recommendations/)

它现在再次正常运行！

# matlab - 向量化下标到矩阵的转换

> ID：10216077
> 
> 赞同：4
> 
> 时间：2012-04-18T18:57:18.830
> 
> 标签：matlab

给定两个向量 r 和 c ，它们将行和列下标保存到矩阵 A 中（也给定了它的大小），我想计算 A。点可以出现多次，并且每次出现都应该增加 A 中的相应元素。一个例子：

```
r = [1 2 4 3 2];
c = [2 2 1 1 2];
A = zeros(4, 3);

ind = sub2ind(size(A), r, c);
for i = 1 : length(ind)
    A(ind(i)) = A(ind(i)) + 1; % could as well use r and c instead of ind ...
end 
```

这产生了矩阵

```
A =
     0     1     0
     0     2     0
     1     0     0
     1     0     0 
```

如果可能的话，我想避免循环。这个问题有矢量化的解决方案吗？最好是一种不会产生巨大临时矩阵的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:08:48.507

这是一份工作`accumarray`：

```
r = [1 2 4 3 2];
c = [2 2 1 1 2];

%# for every r,c pair, sum up the occurences
%# the [4 3] is the array size you want
%# the zero is the value you want where there is no data
accumarray([r',c'],ones(length(r),1),[4 3],@sum,0)

ans =

     0     1     0
     0     2     0
     1     0     0
     1     0     0 
```

请注意，如果您的结果数组有这么多零（即非常稀疏），`sparse`则可能是更好的选择，正如@woodchips 所建议的那样

```
sparse(r,c,ones(size(r)),4,3)

ans =

   (3,1)        1
   (4,1)        1
   (1,2)        1
   (2,2)        2 
```

# version-control - 如何在颠覆中保持免费/付费版本的应用程序分开

> ID：10216078
> 
> 赞同：5
> 
> 时间：2012-04-18T13:51:21.933
> 
> 标签：version-control, android, svn

我在 android 市场上有一个付费应用程序，但是，我想发布一个免费的广告支持版本。

我认为最简单的方法是在我的 subversion 存储库上设置一个分支，其中包含添加广告的附加代码。但是，当我将其提交到 android 市场时，他们需要唯一的包名称。这个解决方案不再适用于我，因为我必须更改每个类文件的包，这会使合并主干和分支非常痛苦。

我可以将这两个项目放在一起，共享补丁，但使用不同的包的最佳方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T14:15:50.827

您是否考虑过**编译器指令**？

例子：

```
#define FREE
// ...
#if FREE
Console.WriteLine("Free version");
#else
Console.WriteLine("Paid version");
#endif 
```

您可以保持完全相同的代码库，并使用两个单独的构建脚本或一个可参数化的脚本来定位两个构建。

```
msbuild /p:DefineConstants=FREE 
```

要使用 Java，请阅读[this](https://stackoverflow.com/questions/1813853/ifdef-ifndef-in-java)和[this](https://stackoverflow.com/questions/1153501/java-solution-for-c-style-compiler-directive)。也许[这个](https://softwareengineering.stackexchange.com/a/145018/2567)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T14:54:27.190

只有您的应用程序包必须是唯一的。见[这里](http://blog.javia.org/android-package-name/)。那就是在清单文件中声明的包。您可以将大部分代码`com.mydomain.myapp`放在`com.mydomain.myapp.free`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T14:15:49.280

如果你真的想分开，最好的方法是将它设置为同一个存储库的两个部分。这样，您至少可以跨不同分支合并更改。如果你想让事情完全分开，那么你将做很多修补补丁文件。

我已经这样做了，坦率地说，这在实践中并不是一个很好的策略。更好的是，特别是在编译环境中，免费和付费有一个单独的构建过程，所以有一个代码库而不是两个。如果有两个代码库，事情*就会*不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:42:47.750

版本控制是管理此类事情的一种糟糕方式。您最终会遇到维护噩梦 - 两个独立的应用程序需要*几乎*相同。

您是否考虑过多项目解决方案？（警告：我实际上并没有这样做，但它似乎可行，而且我认为 Android 会允许它。我稍后会尝试并确定。）将所有应用程序代码编译到主项目*jar*中。然后创建两个单独的 Android 应用程序，一个用于您的付费版本，一个用于免费版本。这将解决您的包命名问题。除了您的广告版本将包含支持广告的代码外，这些应用程序只会将几乎所有内容委托给主 jar。

您可能还会发现[关于类似主题的讨论](https://softwareengineering.stackexchange.com/q/134357/6415)很有趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T15:39:53.497

使用 a 构建您的应用程序`feature toggle`可以让您实现目标，但您可能需要重新编写大量代码。

通过在 .ini 文件中定义 2（我建议 3）功能容器环境，例如：

```
[paid]
features.ads = false
features.featureOne = true
features.featureTwo = true
features.premiumFeature = true
features.underDevFeature = false
features.debug = false;

[free:paid]
features.ads = true
features.premiumFeature = false

; And the optionnal third
[development:paid]
features.debug = true
features.underDevFeature = true 
```

这样，您就有了一个统一的版本，并且在您的版本控制源中只需要一个分支

然后，在您的特定脚本中，您必须检查该功能是否被授权，如果没有，则不显示它

# php - php mysql查询前5个平均列

> ID：10216091
> 
> 赞同：0
> 
> 时间：2012-04-18T18:57:59.067
> 
> 标签：php, mysql

我有一张照片排名表。我想根据 3 列（rating1、2、3）的平均值输出每个类别的前 5 张照片的 id。

假设我有下表列 (photoID,rating1,rating2,rating3)

```
 $sth = mysql_query("SELECT * FROM votes ORDER BY AVG(rating1) ASC LIMIT 5") or   die(mysql_error()); 

 $rows = array();
 while($r = mysql_fetch_assoc($sth)) {
 $rows[] = $r;
 }
 echo json_encode($rows); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:24:43.120

```
SELECT rating1+rating2+rating3 AS total FROM `test` ORDER BY total  DESC 
```

这个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:25:28.590

默认情况下，MySql 中的记录已按升序返回，但您可能希望使用`DESC`关键字，而不是`ASC`. `ratings1`如果您要选择前 5 个，为什么要对列进行平均？

重新阅读问题，重新提交新答案。

```
$sth = "SELECT * FROM pics ORDER BY (rating1 + rating2 + rating3) desc LIMIT 5"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:30:59.740

您解释问题的方式不清楚，这可能是您想要的：

```
SELECT photoID, AVG((rating1+rating2+rating3)/3) as rating
FROM votes GROUP BY photoID ORDER BY rating DESC LIMIT 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T20:39:33.317

```
 SELECT 1            AS category
         , photoID
         , AVG(rating1) AS avg_rating
    FROM votes 
    GROUP BY photoID
    ORDER BY avg_rating DESC 
    LIMIT 5

  UNION ALL

    SELECT 2            AS category
         , photoID
         , AVG(rating2) AS avg_rating
    FROM votes 
    GROUP BY photoID
    ORDER BY avg_rating DESC 
    LIMIT 5

  UNION ALL

    SELECT 3            AS category
         , photoID
         , AVG(rating3) AS avg_rating
    FROM votes 
    GROUP BY photoID
    ORDER BY avg_rating DESC 
    LIMIT 5 
```

# ravendb - RavenDB 如何实现一致性、可用性和分区容错？

> ID：10216096
> 
> 赞同：6
> 
> 时间：2012-04-18T18:58:31.953
> 
> 标签：ravendb, cap

根据[CAP 定理](http://lpd.epfl.ch/sgilbert/pubs/BrewersConjecture-SigAct.pdf)，分布式计算机系统不可能同时提供[一致性](http://en.wikipedia.org/wiki/Consistency_%28database_systems%29)、[可用性](http://en.wikipedia.org/wiki/Availability)和分区容错性。

阅读有关[RavenDB 的信息](http://ravendb.net/)，看起来这个数据库同时支持 ACID 事务和分片。RavenDB 如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:13:41.703

**预先澄清事情：**
默认情况下，调用之间的 RavenDB 会话中的所有写入`.SaveChanges()`都是全有或全无。如果一个操作由于某种原因失败，则当前会话中/自上次保存以来的所有更改都将被丢弃。这个特性，结合开启的乐观并发，*非常*强大。如果您需要更长的事务，则还支持 System.Transaction，并且可以按预期工作。

**关于分片：分片**
设置 中没有对分布式事务的*真正支持。*但是，由于参考文档在良好的分片策略中的局部性，您可以在每个存储上进行事务写入。它们的工作方式就像根本没有任何碎片一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T15:52:35.717

CouchDB 在同一条船上：它们是“ACID”（从单个节点查看时），但不是一致的（从 CAP 查看时）。数据库术语可能会令人困惑。

PS您链接到的“可用性”不是CAP中的A。CAP 中的 A 代表“所有能够接受查询的节点”。例如，在分区期间，PAXOS 只会回答多数分区中的查询，而少数分区将拒绝回答查询。

但是从可用性的角度来看，它的可用性比系统宕机要好。如果系统需要一致性，那么这是您可以实现的最高可用性。

# c - 优化多个模运算的逻辑运算？

> ID：10216098
> 
> 赞同：8
> 
> 时间：2012-04-18T18:58:34.037
> 
> 标签：c, optimization, gcc

很容易看出：

```
(i % 3 == 0) && (i % 5 == 0) 
```

可以简化为：

```
(i % 15 == 0) 
```

然而，查看 GCC 的输出，似乎即使在高优化级别上也没有这样做。

是否有任何编译器进行此类优化，或者是否有充分的理由说明这两个测试在语义上不等效？

编辑：针对那些说这是一个边缘案例的人，以下是一个类似的案例：

```
(i < 3) && (i < 5) 
```

任何小于 3 的数字，必须始终小于 5。第二次测试是多余的。

我还想添加以下内容以响应编译器无法知道环境是否受到影响的答案...看这段代码：

```
void foo(void)
{
    int i;
    for (i = 0; i <= 10; i++)
    {
        if (i > 20)
        {
            puts("Hi");
        }
    }
} 
```

GCC 将整个函数简化为“repz ret” `-O2`。这比我所说的要复杂得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:43:45.297

忽略所有声称这对于编译器来说非常困难/不可能的愚蠢答案。我看不出它为什么会很困难，但大概没有人想过这样做，或者认为优化它足够重要。如果您想要比这更好的答案，您需要在 GCC 错误跟踪器上报告它作为增强请求，并查看开发人员的意见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:15:31.593

您的示例相当简单，并且确实很容易浓缩为单个操作。然而，像这样的陈述的一般情况并不那么简单。以以下为例：

```
((++i) % 3 == 0) && ((++i) % 5 == 0) 
```

这种变化不能简单地简化为单个模数运算（我知道这个语句还有各种其他问题，但关键是当您使用除简单变量之外的任何东西时，问题并不那么简单参考）。编译器通常不会看到您的案例仅涉及简单的变量，并且与一般案例不同地对其进行优化；他们尽可能保持优化的一致性和可预测性。

**更新：** 您添加到问题中的额外案例属于与原始代码片段完全不同的优化类别。它们都被优化掉了，因为它们是*不可访问的代码*，并且可以在编译时被证明。您最初的问题涉及将两个操作重写为一个与原始操作不同的等效操作。您添加的两个片段不会重写现有代码，它们只会删除永远无法执行的代码。编译器通常非常擅长识别和删除死代码。

您正在寻求的优化是*数学强度降低的一种形式*. 大多数编译器都提供一定程度的 MSR 优化，尽管它们得到的详细程度会因编译器和目标平台的功能而异。例如，针对没有模数指令的 CPU 架构的编译器（意味着必须使用可能很长的库函数）可能会更积极地优化此类语句。如果目标 CPU 具有硬件模数支持，编译器编写者可能会认为两个或三个保存的指令的好处太小，不值得花时间和精力来实现和测试优化改进。我在过去看到过这种情况，某些操作可以在 x86 CPU 上的一条指令中完成（例如），但在 RISC CPU 上需要数十条指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:17:55.463

老实说，这是一个非常具体的案例。如果方程的任何部分发生变化，优化将不再适用。我认为这是一个成本与收益的问题，实施这种优化的成本（增加编译时间，增加维护难度）超过了收益（在极少数情况下一些不太快的操作）。

一般来说，由于精度限制和溢出的可能性，无法应用数学重构。虽然我认为这不是问题。

# android - PagedView 中的重叠字段

> ID：10216104
> 
> 赞同：0
> 
> 时间：2012-04-18T18:59:12.513
> 
> 标签：android, android-layout

我在我的应用程序中使用 Greendroid 并使用该库中的 PagedView。

我的填充布局：

```
<merge
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:greendroid="http://schemas.android.com/apk/res/com.cyrilmottier.android.gdcatalog">

    <greendroid.widget.PagedView
        android:id="@+id/paged_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

        <LinearLayout android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:orientation="vertical" android:layout_alignParentBottom="true" android:gravity="bottom"
            >

                      <Button
        android:id="@+id/mal_up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_margin="4dp"
        android:background="@drawable/custom_button"
        android:gravity="center"
        android:padding="8dp"
        android:text="Flirt"
        android:textColor="#ffffff"
        android:textSize="12pt"
        android:typeface="serif" />

        <greendroid.widget.PageIndicator
            android:id="@+id/page_indicator"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="15dp" />  
        </LinearLayout>

</merge> 
```

我的实体布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"    >

    <ImageView
        android:id="@+id/mal_iv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/icon" 
        android:layout_gravity="center_horizontal"
        android:paddingTop="10dp"/>

      <TextView
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_horizontal"
          android:layout_marginTop="10dp"
          android:text="@string/username" />

    <TextView
            android:id="@+id/mal_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:textColor="#FF3100" 
            android:textAppearance="?android:attr/textAppearanceLarge"/>

   <TextView
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_gravity="center_horizontal"
       android:text="@string/age" />

    <TextView
            android:id="@+id/mal_age"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:textColor="#FF3100"
              android:textAppearance="?android:attr/textAppearanceLarge"  />
      <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:text="@string/gender" />    
    <TextView
            android:id="@+id/mal_gender"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:textColor="#FF3100"
            android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

它看起来像这样：

![在此处输入图像描述](../Images/3d598c26eded04396b31c969f472731d.png)

问题：

PaddedLayout 和我的实体布局重叠，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:16:59.853

您可以将 TextFields 和 Button 放入

```
<LinearLayout ... android:orientation="vertical">

<LinearLayout> 
```

这变成了一个Horizo​​ntalScrollView。

如果你这样做。用户可以向下滚动到较小设备上的按钮。

据我所知，不同解决方案的屏幕空间更少。

所以代码可能看起来像这样。（调情按钮位于滚动视图内的线性布局内）

您的实体布局：

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"    >

    <ImageView
        android:id="@+id/mal_iv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/icon" 
        android:layout_gravity="center_horizontal"
        android:paddingTop="10dp"/>

      <TextView
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_horizontal"
          android:layout_marginTop="10dp"
          android:text="@string/username" />

    <TextView
            android:id="@+id/mal_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:textColor="#FF3100" 
            android:textAppearance="?android:attr/textAppearanceLarge"/>

   <TextView
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_gravity="center_horizontal"
       android:text="@string/age" />

    <TextView
            android:id="@+id/mal_age"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:textColor="#FF3100"
              android:textAppearance="?android:attr/textAppearanceLarge"  />
      <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:text="@string/gender" />    
    <TextView
            android:id="@+id/mal_gender"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:textColor="#FF3100"
            android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
        android:id="@+id/mal_up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_margin="4dp"
        android:background="@drawable/custom_button"
        android:gravity="center"
        android:padding="8dp"
        android:text="Flirt"
        android:textColor="#ffffff"
        android:textSize="12pt"
        android:typeface="serif" />

</LinearLayout>
</HorizontalScrollView> 
```

# xml - 使用带有 jquery 的 XML 来填充带有文本的滑块

> ID：10216109
> 
> 赞同：0
> 
> 时间：2012-04-18T18:59:33.980
> 
> 标签：xml, jquery

在一个小项目上工作，我想实现一个 jquery 滑块来在网站的支持页面上保存推荐。为了让生活更轻松，我希望将推荐书包含在 XML 文档中。滑块在页面上工作正常，但是当我尝试使用函数从 XML 文档中获取推荐文本时，它的工作原理与朝鲜火箭一样好。

中的脚本：

```
<head>
<title>Crutchfield Customer Support - Online Support Center</title>
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="support.css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" type="text/javascript"></script>

<script src="slider/jquery.bxSlider.min.js" type="text/javascript"></script>

<script type="text/javascript">
  $(document).ready(function(){
    $('#slider1').bxSlider({
    auto: true,
    autoControls: false,
    nextText: '',
    prevText: ''
    });
  });
</script>

<script type="text/javascript">
$(document).ready(function(){
    $.ajax({
        type: "GET",
        url: "testimonials.xml",
        dataType: "xml",
        success: function(xml) {
            var select = $('#slider1');
            $(xml).find('testimonials').each(function(){
                var text = $(this).find('text').text();
                select.append("<li class='test'>"+text+"</li>");
            });
        }
    });
});
</script>

</head> 
```

滑块的 HTML：

```
 <div id="testimonials">
        <div class="testimonialGroupOne">
            <ul id="slider1">
                <li>loading</li>
            </ul>
        </div>
    </div> 
```

我可以添加另一个滑块，但可能不会，问题可能出在 divitis 上吗？

所以基本上没有填充有序列表，这是到目前为止的 xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<testimonials>
    <text>"I have been doing business with Crutchfield for over fifteen years and have yet to have a negative experience. Their customer service is second to none."</text>
    <text>"I've been a Crutchfield customer for over 20 years. I've found their customer service and technical support to surpass every other vendor in this business. Without exception, every contact I've had with Crutchfield employees, I have found them to be professional, competent, respectful and patient."</text>
</testimonials> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:12:59.767

尝试这个

```
var mySlider;
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "data/yourxml.xml",
            dataType: "xml",
            success: function (xml) {

            $(xml).find('testimonials').each(function(){

                xml_name = $(this).find('name').text();

                $('#slide').append('<li>' + xml_name + '</li>')
            });

            $(function () {
                mySlider = $('#slide').bxSlider({
                    auto: true,
                    controls: false
                });

                mySlider.reloadShow();
            })
        }
    });    
}); 
```

# ios - 以编程方式添加的按钮不起作用

> ID：10216113
> 
> 赞同：1
> 
> 时间：2012-04-18T18:59:46.267
> 
> 标签：ios, uibutton, programmatically-created

所以这就是我所拥有的。我创建了一个按钮并将其设置为一个动作，但每次我单击该按钮时都会使程序崩溃。为什么我的按钮不起作用？提前致谢。

```
UIButton *currentGamesButton = [UIButton buttonWithType:UIButtonTypeCustom];
currentGamesButton.frame = CGRectMake(124,18,72,65);
[currentGamesButton addTarget:self
                       action:@selector(goToCurrentGamesViewController:)
             forControlEvents:UIControlEventTouchDown];
UIImage *currentGamesPNG = [UIImage imageNamed:@"CurrentGamesHighlightedState.png"];
[currentGamesButton setBackgroundImage:currentGamesPNG forState:UIControlStateNormal];
[self.view addSubview:currentGamesButton]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:09:04.233

如果 for 的方法`goToCurrentGamesViewController`不带参数，请更改此行：

```
[currentGamesButton addTarget:self
                   action:@selector(goToCurrentGamesViewController:) 
```

到：

```
[currentGamesButton addTarget:self
                   action:@selector(goToCurrentGamesViewController) 
```

`:`（从选择器中的方法中删除冒号）

# mysql - 如何使用linux bash将变量中的长文本（例如：Html）插入MySQL？

> ID：10216114
> 
> 赞同：2
> 
> 时间：2012-04-18T18:59:49.667
> 
> 标签：mysql, bash, mysql-real-escape-string

我想将 html 插入到 mysql longtext 列中，但我一直遇到错误：

> `/usr/bin/mysql: Argument list too long`

当字符串大小很大时（至少我是这么认为的）

这是代码：

```
link="7red.no"    
result=$( { stdout=$(wget -T10 -t1 "$link" -v -O -) ; } 2>&1; echo "--SePaRaToR--"; echo "$stdout"); 
dowload_stat=${result%$'\n'--SePaRaToR--*}; 
html=${result#*--SePaRaToR--$'\n'}; 
printf -v dowload_stat "%q" "$dowload_stat"
printf -v html "%q" "$html"
sqlHtml='INSERT INTO `'"${tableHtml}"'` (`extracted_link_ID`, `response_header`, `html`, `download_start`, `download_finish`) VALUES ('"'${link_id}'"', '"${dowload_stat:1}"', '"${html:1}"', '"'${start}'"', '"'${finish}'"');'
mysql -u$dbUser -p$dbPass -h$dbHost -P$dbPort -D$dbName --default_character_set utf8 -A -e "$sqlHtml" 
```

我使用*hacks*编写了代码，因为在 bash 中默认情况下不提供*mySQL 转义*和*在不同变量中输出 stderr 和 stdout*之类的东西。
我计划在工作脚本中使用代码进行网络索引/缓存，所以速度很重要。这让我想到了第二个问题：**在 bash 中是否有更快的方法来做到这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:06:30.677

你应该能够做类似的事情

```
mysql -u$dbUser -p$dbPass -h$dbHost -P$dbPort -D$dbName --default_character_set utf8 -A <<EOS 
    INSERT INTO \"${tableHtml}\" ('extracted_link_ID', 'response_header', 'html', 
       'download_start', 'download_finish') 
    VALUES (\"${link_id}\", \"${dowload_stat:1}\", \"${html:1}\", \"${start}\", \"${finish}\");
 EOS 
```

阅读“这里的文件”，你应该没问题。（这里的文档是 <

如果这不起作用，并且您仍然得到`arg list too long`，那么您没有正确引用所有内容。我没有可用的 mysql，但是鉴于我能够进行的测试，这应该可以工作，并且此处的文档可能非常长（尽管我认为即使它们在非常大的值上也有限制）。

EOS 可以是任何字符串，但它是 EndOfScript 的自记录简写。

我假设 mySQL 允许用 bck-quote 字符引用列。虽然您可以这样做，因为您以单引号开始您的示例，而不是一个好的 shell-fu。

我希望这有帮助。

# php - JSON上的循环逻辑

> ID：10216121
> 
> 赞同：0
> 
> 时间：2012-04-18T19:00:02.420
> 
> 标签：php, json, loops

我在如何实现我正在做的事情上遇到了一个合乎逻辑的障碍。我正在使用 Instagram API（对这个问题并不重要），在他们的 JSON 响应中，他们为您提供了 20 个结果和指向下一个 20 个结果的链接。我正在尝试构建一个 OOP 库，该库可以从初始 API 调用中获取响应，搜索它是否具有“next_url”值，如果有，则获取接下来的 20 个响应，等等，直到不再有下一个 URL . 我无法完全收集有关如何执行此操作的逻辑...

目前这里是获取前 20 个的代码...

```
function __apiCall($url, $post_parameters = FALSE) {

        $curl_session = curl_init();

        curl_setopt($curl_session, CURLOPT_URL, $url);

        if($post_parameters !== FALSE) {
            curl_setopt ($curl_session, CURLOPT_POSTFIELDS, $post_parameters);
        }

        // Return the curl results to a variable
        curl_setopt($curl_session, CURLOPT_RETURNTRANSFER, 1);

        curl_setopt($curl_session, CURLOPT_SSL_VERIFYPEER, $this->codeigniter_instance->config->item('instagram_ssl_verify'));

        $contents = curl_exec ($curl_session);

        curl_close ($curl_session);

        $return = json_decode($contents);
        return $return;

    } 
```

这是 JSON 响应的一个片段......

```
 stdClass Object
(
    [pagination] => stdClass Object
        (
            [next_url] => https://api.instagram.com/v1/locations/3937885/media/recent?min_timestamp=&min_id=&max_timestamp=&access_token=xxxxxxxxxxxx49414762bea69258210d8872&max_id=133226850290424667_21341717
            [next_max_id] => 133226850290424667_21341717
        )

    [meta] => stdClass Object
        (
            [code] => 200
        )

    [data] => Array
        (
            [0] => stdClass Object
                (
                    [tags] => Array
                        (
                        )

                    [type] => image
                    [location] => stdClass Object
                        (
                            [latitude] => 39.95022
                            [name] => Neiman Group
                            [longitude] => -75.168322
                            [id] => 3937885
                        )

                    [comments] => stdClass Object
                        (
                            [count] => 0
                            [data] => Array
                                (
                                )

                        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:28:06.030

```
function getResults($url)
{
    $gotAllResults = false;
    $results = array();

    while(!$gotAllResults) {
        $result = $this->__apiCall($url);
        $results[] = $result;

        if (!property_exist($result->pagination, 'next_url') {
            $gotAllResults = true;
        } else {
            $url = $result->pagination->next_url;
        }
    }

    return $results;
}

function __apiCall($url)
{
        // settings for cURL

        $contents = curl_exec($curl_session);

        curl_close ($curl_session);

        $result = json_decode($contents);
        return $return;
} 
```

顺便提一句。为什么在`__apiCall`函数名称中使用两个下划线。这让我觉得[神奇](http://php.net/manual/en/language.oop5.magic.php)的事情正在发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:03:05.080

```
function __apiCall($url, $post_parameters = FALSE) {

        // Initialize the cURL session
        $curl_session = curl_init();

        // Set the URL of api call
        curl_setopt($curl_session, CURLOPT_URL, $url);

        // If there are post fields add them to the call
        if($post_parameters !== FALSE) {
            curl_setopt ($curl_session, CURLOPT_POSTFIELDS, $post_parameters);
        }

        // Return the curl results to a variable
        curl_setopt($curl_session, CURLOPT_RETURNTRANSFER, 1);

        // There was issues with some servers not being able to retrieve the data through https
        // The config variable is set to TRUE by default. If you have this problem set the config variable to FALSE
        // See https://github.com/ianckc/CodeIgniter-Instagram-Library/issues/5 for a discussion on this
        curl_setopt($curl_session, CURLOPT_SSL_VERIFYPEER, $this->codeigniter_instance->config->item('instagram_ssl_verify'));

        // Execute the cURL session
        $contents = curl_exec ($curl_session);

        // Close cURL session
        curl_close ($curl_session);

        // Return the response
        return  json_decode($contents);

    }

    function getResults($url){

        $gotAllResults = false;
        $results = array();

        while(!$gotAllResults) {
        $result = $this->__apiCall($url);
        $results[] = $result;

        if (!property_exists($result->pagination, 'next_url')) {
            $gotAllResults = true;
        } else {
            $url = $result->pagination->next_url;
        }
    }

    return $results;

    } 
```

# javascript - Facebook 今天是否改变了 javascript sdk 身份验证中的某些内容？

> ID：10216123
> 
> 赞同：1
> 
> 时间：2012-04-18T19:00:05.067
> 
> 标签：javascript, facebook, facebook-javascript-sdk

Facebook 今天在 javascript sdk authetication 中有什么改变吗？[在今天之前，我使用了 Mahmud Ahsan 编写的](http://thinkdiff.net/facebook/new-javascript-sdk-oauth-2-0-based-fbconnect-tutorial/)FB Javascript SDK Authetication ，一切都很好。现在它与 FB.logout() 有问题。尝试登录**[他的演示](http://thinkdiff.net/demo/newfbconnect1/jssdkouth2.html)**，然后单击注销按钮。并尝试再次按下此按钮登录。它不会响应。Firebug 说：**FB.logout() 在没有访问令牌的情况下调用。**也许有人知道如何将访问令牌添加到 FB.logout 方法或.. 有关于此更改的文档的链接？

我的认证：

```
window.fbAsyncInit = function() {
FB.init({ appId: '*************',
    status: true, 
    cookie: true,
    channelUrl: '//localhost/website/channel.html', // Channel File
    xfbml: true,
    oauth: true});

// run once with current status and whenever the status changes
FB.getLoginStatus(updateButton);
FB.Event.subscribe('auth.statusChange', updateButton);
};

var button,userInfo;

function updateButton(response) {
    button       =  document.getElementById('fb-auth');
    userInfo     =   document.getElementById('userInfo');

    if (response.authResponse){

    FB.api('/me', function(info) {
    login(response, info);  //function will just change text on the button..
    });

    button.onclick = function() {
        FB.logout(function(response) {    //here we are, FB.logout method =\
            logout(response);   //function will just change text on the button..
        });
    };
} else {

    button.innerHTML = 'Login';
    button.onclick = function() {
        showLoader(true);
        FB.login(function(response) {
            if (response.authResponse) {
                FB.api('/me', function(info) {
                    login(response, info);
                  });    
            } else {
                //user cancelled login or did not grant authorization

               alert('you are not logged in to facebook or have not granted this app basic permissins. please log in and grand basic permissins to user this application');
            }
        }, {scope:'email,user_birthday,user_about_me'});   
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:46:59.113

解决了！问题出在 FB.event.subscribe 上。我只是将**auth.statusChange**更改为另一个侦听器 - **auth.authResponseChange**

# javascript - 获取容器中锚点的 href 并将其应用于图像

> ID：10216126
> 
> 赞同：0
> 
> 时间：2012-04-18T19:00:23.350
> 
> 标签：javascript, jquery

我有一个 DIV 列表，它们都包含一段文本、一个图像和一个锚点。

使用 Javascript/jQuery，是否可以获取锚点的 href，并使用该链接将图像包装在锚点标签中？

我知道这是一个奇怪的要求，我做了一个小提琴......

[http://jsfiddle.net/fFgwb/](http://jsfiddle.net/fFgwb/)

* * *

会有多个 div，所以我不能有相同的 id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:09:35.480

这是一种方法

```
var src = $("#imgid").attr("src"); //take out the src
$("#imgid").wrap($('<a href="'+src+'" />'); //wrap around it with the anchor 
```

你的用法，可能是这样的

```
$("img", $("#divid")).each(function() {
    var src = $(this).attr("src"); //take out the src
    $(this).wrap($('<a href="'+src+'" />')); //wrap around it with the anchor

}); 
```

这是一个在你的小提琴上实现的[演示。](http://jsfiddle.net/Starx/fFgwb/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:13:01.160

尝试：

```
$('img').each(function(){
    $(this).wrap('<a href="'+$(this).attr('src')+'"/>');
}); 
```

只是缩小那个`img`选择器，也许有一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:13:21.770

如果我正确地得到了你想要的东西，你可以这样做：

```
$('a').attr('href', function() {
    return $(this).find('img').attr('src');
});​ 
```

正如你[在这里](http://jsfiddle.net/darkajax/fFgwb/12/)看到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:27:39.423

您应该将 .divs 之类的类添加到 div 和其他类以锚链接：

```
$(document).ready(function(){

$(".divs").each(function(){

    $(this).find("a").hasClass("anchor").attr("href", $(this).find("a").hasClass("continue").attr('href'))

});

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T19:15:21.427

使用 jQuery：

```
$('.card-prod').each(function () {
    var that = $(this),
        imgA = that.find('a img').parent(),
        newHref = that.find('a').not(imgA).attr('href');
    imgA.attr('href', newHref);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T19:30:40.947

好吧，让我们总结一下：

*   你会有几张卡
*   每张卡片包含两个锚点
*   第一个锚点应该获得与第二个锚点相同的 href 值

翻译成 jQuery：

```
$(".card-prod").each(function(){
    var anchors = $(this).find("a");
    anchors.eq(0).prop("href", anchors.eq(1).prop("href"));
}); 
```

# xml - 元素 不允许在此位置

> ID：10216127
> 
> 赞同：0
> 
> 时间：2012-04-18T19:00:23.670
> 
> 标签：xml, xsd

我想将 XSD 定义为 XML 文件，但我不知道为什么它对我不起作用。我有 2 个文件，一个是 XML，一个是 XSD。

> 这是我的 XML 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<article href="http://www.ensa-agadir.ac.ma/arti234" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\Users\Mehdi\Desktop\XMLDS~1\DS1-EX1.xsd">
<titre>application de web sémantique</titre>
<nombrePages>12</nombrePages>
<auteur rond="principale">
    <nom>Hassani</nom>
    <prénom>Jamal</prénom>
    <établissement>Ensa-Agadir</établissement>
</auteur>
<auteur rond="secondaire">
    <nom>Karoum</nom>
    <prénom>Ahmed</prénom>
    <établissement>Ensa-Agadir</établissement>
</auteur>
<auteur rond="secondaire">
    <nom>Roumi</nom>
    <prénom>Jack</prénom>
    <établissement>Ensa-Rouen</établissement>
</auteur>
<résume>Il s'agit d'expliquer comment utiliser et appliquer le web sémantique dans le domaine informatique</résume> 
```

> 和我的架构代码：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<xs:element name="article" type="articleT" />

<xs:complexType name="articleT">
    <xs:sequence maxOccurs="1">
            <xs:element name="titre" type="xs:string" />
            <xs:element name="nombrePages" type="nbpagesT" />
    </xs:sequence>

    <xs:choice maxOccurs="unbounded">
            <xs:element name="auteur" type="auteurT" />
    </xs:choice>

</xs:complexType>

<xs:simpleType name="nbpagesT">
    <xs:restriction base="xs:string">
        <xs:pattern value="[1-9]+" />
    </xs:restriction>
</xs:simpleType> 
```

但我不知道为什么会出现这个错误： ![在此处输入图像描述](../Images/c887e4d4977df08447d2e2c1ef59b0cf.png)

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:22:12.047

element 只能有一个内容 - 您需要在序列、选择、全部等之间进行选择。但是，这些内容可以组合 - 您的序列可以包含选择等。另外，我不确定您对“选择”的使用 - 当您想为 XML 提供一些内容选项时使用它。所以只有一个元素“auteurT”没有多大意义。例如，XSD：

```
<xs:complexType name="phoneT">
  <xs:choice>
    <xs:element name="hardwire" type="xs:string"/>
    <xs:element name="mobile" type="xs:string"/>
  </xs:choice>
</xs:complexType> 
```

如果将“phoneT”类型分配给一个元素，它可以包含元素“hardwire”或“mobile”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:04:07.847

内部只有一个元素的选择是没有意义的（它甚至不会使该元素成为可选的）。就像福特说我们提供多种颜色，你可以选择黑色。

如果有多个选择，您可以这样写：

```
<xs:complexType name="articleT">
    <xs:sequence>
       <xs:element name="titre" type="xs:string" />
       <xs:element name="nombrePages" type="nbpagesT" />
       <xs:choice maxOccurs="unbounded">
          <xs:element name="auteur" type="auteurT" />
          <xs:element name="rédacteur" type="rédacteurT" />
       </xs:choice>
    </xs:sequence>
</xs:complexType> 
```

但我认为您真正想要的内容模型是：

```
<xs:complexType name="articleT">
    <xs:sequence>
       <xs:element name="titre" type="xs:string" />
       <xs:element name="nombrePages" type="nbpagesT" />
       <xs:element name="auteur" type="auteurT" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
</xs:complexType> 
```

# c++ - .h 文件中的客户端结构与实现结构

> ID：10216130
> 
> 赞同：1
> 
> 时间：2012-04-18T19:00:34.737
> 
> 标签：c++, class, struct

好的，这是基本的 C++。我有一个类是线性链接列表。我想声明两个结构。其中一个是供客户端使用的（即他们将传递给类的信息），另一个结构仅供我，实施者管理链表（这是“节点”）。IE：

```
//this is the one for client use
struct form {
    char *name;
    int age;
    char *address;
    //etc.
};

struct node {
    char *name; //same as in above but I am sorting the LL by this so I need it out
    form *client_form;
    node *next;
}; 
```

我感到困惑的是究竟在哪里放置这些。我认为最好将客户端将使用的结构放在类定义之上，但是放置“节点”结构的最佳位置是哪里。这应该私下吗？多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:11:13.953

节点结构可以简单地放入您的 .cpp 文件中。如果您的标头中有一些引用节点的内容，例如“struct node *firstNode”，那么您必须在标头顶部附近转发声明它，只需说“struct node;”即可。

所以，.h：

```
struct node;
struct form {
   // form fields
};

class MyStuff {
   private:
      struct node *firstNode;
   // more Stuff
}; 
```

.cpp：

```
struct node {
   // node fields
};

MyStuff::MyStuff(struct form const& details) {
    // code
} 
```

# ios - 需要 fb 的工作示例：就像 UIWebView 中的 edge.create/remove 事件触发

> ID：10216131
> 
> 赞同：3
> 
> 时间：2012-04-18T19:00:35.067
> 
> 标签：ios, facebook, facebook-like, facebook-javascript-sdk

**简而言之：** edge.create 停止在 UIWebView 内的嵌入式 HTML 中触发（并且我有一段时间没有更改代码中的任何内容） - 有什么想法可以找回它吗？

* * *

我有 iOS 应用程序，它有 UIWebView 和 Facebook Like 按钮。 ![在此处输入图像描述](../Images/c9b4e3175981048bb2bf33701277360b.png)

用户在此对话框出现之前登录 Facebook，因此没有发生登录逻辑。

我可以点击喜欢/不喜欢 - 它工作正常 - 但它曾经关闭对话框，几天前它坏了。通过订阅 edge.create / edge.remove 事件来关闭对话框。

这是我的 HTML 页面：

```
<html>
    <head>
        <style type='text/css'>
            * { -webkit-touch-callout: none; -webkit-user-select: none; }
            body { margin:0px; }
            .fb_edge_comment_widget { display: none !important; }
        </style>
    </head>
    <body>                   
        <div id='fb-root'></div>
        <script src='http://connect.facebook.net/en_US/all.js#xfbml=1'></script>
        <script>
            function forwardEvent(name) {
                var iframe = document.createElement('iframe');
                iframe.setAttribute('src', 'event:' + name);
                document.documentElement.appendChild(iframe);
                iframe.parentNode.removeChild(iframe);  
            };
            function beginForwardingEvent(name) {
                FB.Event.subscribe(name, function(r) { forwardEvent(name); });
            };
            function beginForwardingEvents(names) {
                for (var i = 0; i < names.length; i++) {
                    beginForwardingEvent(names[i]);
                }
            };
            beginForwardingEvents(['edge.create', 'edge.remove', 'xfbml.render']);
        </script>    
        <fb:like    href='%@' 
                    send='false' 
                    layout='%@' 
                    width='%.0f' 
                    show_faces='%@' 
                    action='%@' 
                    colorscheme='%@' 
                    font='%@'
                    ></fb:like>
    </body>
</html> 
```

以下是我在 Objective-C 代码中捕获事件的方法：

```
- (void)didObserveFacebookEvent:(NSString *)fbEvent {
    if ([fbEvent isEqualToString:@"edge.create"] && [_delegate respondsToSelector:@selector(facebookLikeViewDidLike:)])
        [_delegate facebookLikeViewDidLike:self];
    else if ([fbEvent isEqualToString:@"edge.remove"] && [_delegate respondsToSelector:@selector(facebookLikeViewDidUnlike:)])
        [_delegate facebookLikeViewDidUnlike:self];
    else if ([fbEvent isEqualToString:@"xfbml.render"] && [_delegate respondsToSelector:@selector(facebookLikeViewDidRender:)])
        [_delegate facebookLikeViewDidRender:self];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    // Allow loading Like button XFBML from file
    if ([request.URL.scheme isEqualToString:@"file"])
        return YES;

    // Allow loading about:blank, etc.
    if ([request.URL.scheme isEqualToString:@"about"])
        return YES;

    // Block loading of 'event:*', our scheme for forwarding Facebook JS SDK events to native code
    else if ([request.URL.scheme isEqualToString:@"event"]) {
        [self didObserveFacebookEvent:request.URL.resourceSpecifier];
        return NO;
    }
  ....
} 
```

所以再一次 - edge.create 停止触发（我有一段时间没有更改代码中的任何内容） - 有什么想法可以找回它吗？

谢谢你。

**更新：** 虽然[报告了一个 FB 错误](https://developers.facebook.com/bugs/332010483521261?browse=search_4f8837266b7b09514484175)，但我仍然想了解为什么它在[FBRELL](http://www.fbrell.com/saved/54214b4bf5fa886951ebe68d938e2865)网站上有效，但在 iOS UIWebView 内无效。iOS对话框可能需要调整吗？有解决方法吗？开始赏金希望得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:36:10.327

似乎 edge.create 事件不会在本地 HTML 文件中触发。无论这是偶然还是设计，我不确定，但我做了一些事情并让它发挥作用：

1.  在我自己的服务器上托管“FacebookLikeView.html”文件，用格式说明符替换我想要的实际值，例如`action='%@'`现在是明确`action='like'`的。

2.  从 FacebookLikeView.m 中的方法中删除所有内容`load`并将其替换为以下行：

    ```
    [_webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.yourhost.com/FacebookLikeView.html"]]]; 
    ```

3.  更改了`webView:shouldStartLoadWithRequest:navigationType`方法中的行：

    ```
    if ([request.URL.scheme isEqualToString:@"file"])
        return YES; 
    ```

    至

    ```
    if ([request.URL.host hasSuffix:@"yourhost.com"]) 
        return YES; 
    ```

这不是您希望的答案，但我希望这可以为您提供一些线索，并且至少有助于使其同时发挥作用。

# mysql - 是否可以在 MySQL 中按类似的字符串排序？

> ID：10216139
> 
> 赞同：0
> 
> 时间：2012-04-18T19:01:20.360
> 
> 标签：mysql

我有一列包含来自世界各地不同用户的文本输入，我想对它们进行分组，以便彼此相似的字符串更接近。该列包含非英语语言的字符串，此外还可能包含拼写错误的单词。

我一直在研究 N-gram 和 Levenshtein 距离，但这些似乎需要我记住一个字符串来匹配行。

例如，我想

```
 |Comcast               | 
   |how to play basketball|
   |Walmart               |
   |www.Comcast.net       |
   |Wamlart               |
   |basketball            | 
```

最终看起来像：

```
 |Comcast               | 
   |www.Comcast.net       |
   |how to play basketball|
   |basketball            |
   |Walmart               |
   |Wamlart               | 
```

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:05:09.707

[`SOUNDEX`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_soundex)您可以尝试通过代码订购。

例如，

```
ORDER BY SOUNDEX(MyColumn) 
```

但是，这将在较长的字符串上分解。使用 Double Metaphone 算法你可能会有更好的运气：

[http://www.atomodo.com/code/double-metaphone/metaphone.sql/view](http://www.atomodo.com/code/double-metaphone/metaphone.sql/view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:13:28.600

使用`ORDER BY`代替`GROUP BY`

```
SELECT * FROM table ORDER BY column ASC
SELECT * FROM table ORDER BY column DESC 
```

该列将按字母顺序升序或降序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:23:53.277

如果在显示数据之前所有字符串都需要删除诸如“.net”之类的内容，则可以执行以下操作：

```
SELECT column,ordercolumn FROM 
(
    SELECT column,REPLACE(column,'www.comcast.net','ComCast') ordercolumn
    FROM mytable
) A
ORDER BY ordercolumn,column; 
```

# php - 解决 PHP 中不安全的随机数生成问题

> ID：10216141
> 
> 赞同：3
> 
> 时间：2012-04-18T19:01:22.137
> 
> 标签：php, security, drupal

我们在各种 Drupal 模块上运行 Fortify 扫描，常见的严重/高结果是“不安全随机性”。它指出 rand() 函数无法承受加密攻击。

我的问题 - 这是一个严重的问题吗？如何在 PHP 中修复它？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:27:23.523

这个问题的答案完全取决于您使用 rand() 调用的结果。

如果您将它们用于加密密钥之类的东西，其中工具的安全性取决于您的随机数的随机性，那么，是的，这是一个严重的问题。在这种情况下，您不应该调用 rand() 或 mt_rand()，因为两者都不会产生足够随机的“随机”数字来进行加密使用。你真的想利用你正在运行的平台的底层伪随机数生成器 (PRNG) - Unix/Linux 系统上的 /dev/urandom 或 Windows 系统上的 crypto-api - 因为这些已经被广泛研究并产生适用于密码系统的真正随机数。PHP 并没有使访问这些随机源变得那么容易，但是确实存在如何做到这一点的示例（例如 -> [http://www.php.net/manual/en/function.mt-rand。](http://www.php.net/manual/en/function.mt-rand.php#83655)

如果您将随机数用于其他用途，例如随机化哪个选项首先呈现给用户，或者类似的东西，其中产生的数字没有以任何加密方式使用，那么您**可能**能够逃脱使用rand() 或 mt_rand()。但是，如果您的应用程序/模块依赖于良好的随机数来保证其安全性，那么您确实需要利用操作系统源，如上所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:06:45.187

[mt_rand?](http://php.net/manual/en/function.mt-rand.php)

# extjs - 如何使纯 html 表单匹配 ExtJS 的外观和感觉

> ID：10216144
> 
> 赞同：0
> 
> 时间：2012-04-18T19:01:26.500
> 
> 标签：extjs, forms, extjs2

假设我有大量现有的 html 表单，我现在没有能力重写，但我确实想在 ExtJS 中进行*新*的开发，然后在有时间的时候重写旧的。假设我想让旧表单*看起来*像是用 ExtJS 创建的，这样用户在新旧表单之间切换时不会感到完全震惊。为了保持它的挑战性，我们还要补充一点，它应该符合 ExtJS 2.2 [原文如此]。

我希望我可以摆脱一些简单的事情，比如将 html 放入面板并完成，如下所示。没有这样的。

```
var pnlForm = new Ext.Panel({
    width:400,
    title:'Panel with a form',
    renderTo: Ext.getBody(),
    html: '<form>Test<br><input type="text"><br><input type="text"><br><input type="button" value="spam"></form>'
}); 
```

![ExtJS Panelige 失败的截图](../Images/cccabef9686e32973a0436471f6b526a.png)

很明显，这只是一个 ExtJS 面板，中间有默认外观（即“无”外观）html。

虽然我根本不想走这条路，但我也尝试了[这篇文章](https://stackoverflow.com/questions/5112462/extjs-convert-html-form-to-extjs)中的“将 html 表单转换为 ExtJS”功能。它没有用，但即便如此，我宁愿只是整合外观和感觉而不是改造任何东西。

有什么简单的方法可以清洗现有的 html 表单代码以匹配新 ExtJS 内容*的外观？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:57:07.193

真的只有3个选项：

1.  重写你的代码以使用正确的 Ext JS 创建语法，然后它应该可以正常工作（听起来你反对这样做）
2.  做一些你发布的事情，除了你必须镜像 Ext JS 输出的标记并使用相同的 CSS 类名，这样你就可以利用现有的 CSS
3.  如上所述，但编写您自己的自定义 CSS 以匹配您自己的标记的 Ext JS 外观，而不必重新创建 Ext JS 标记 1:1

无论你选择哪种方式，都会有一些努力。#2 和 #3 的缺点是，即使您可能可以实现视觉奇偶校验，但在字段行为、验证等方面会有很大的功能差异，这可能会成为最终用户的错误。这假设您不需要任何专门的输入，例如日期选择器。

这没有灵丹妙药。如果是我，我会努力并以正确的方式做一次并完成它（＃1）。任何其他选择，无论如何你最终都会重做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T00:44:50.193

我认为将这些形式转换为 ExtJs 样式会更容易、更有效率。您可以使用 perl 或类似的东西编写某种解析器。

# javascript - android 设备中的 iScroll4 和 flowplayer 工作问题

> ID：10216145
> 
> 赞同：0
> 
> 时间：2012-04-18T19:01:31.170
> 
> 标签：javascript, jquery, android, flowplayer, iscroll4

我正在使用 iScroll 4 和 flowplayer 来开发一个项目。在`iPad`并且`iPhone`它可以正常工作，但不能在平板电脑和手机的 android 设备中工作。似乎 flowplayer 正在加载，甚至视频正在播放，但只能听到声音才能观看。似乎有东西覆盖了播放器，视频播放在一段时间后停止。滚动也可以使用 iScroll 进行，但在滚动过程中会出现一些闪烁效果，并且内容似乎被某些东西重叠了。请帮忙解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:14:35.743

尝试动态编程。好像 xml 中的某些东西阻止了它。如果您愿意，请发布代码，然后看看它。

# java - 使用存储在 KML 文件中的点的接近警报

> ID：10216146
> 
> 赞同：0
> 
> 时间：2012-04-18T19:01:33.707
> 
> 标签：java, android, kml, proximity

我目前正在开发一个android应用程序。

我正在尝试根据一组坐标设置接近警报，这些坐标存储在 kml 文件中，经过解析并显示在谷歌地图上。我希望能够跟踪用户的位置，然后当他们到达这些点之一的一定距离内时会弹出警报。我已经成功地完成了一个使用硬编码点的示例，但现在想对其进行调整以使用 KML 中的点。

我已经广泛寻找这方面的例子，但一无所获。

如果有人能告诉我这是否可能，或者我可以在哪里找到如何做到这一点的例子，我将不胜感激！我是编程新手，我发现很难知道从哪里开始。

提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:18:24.243

绝对有可能，但您需要手动从 KML 中提取点。查看[http://code.google.com/p/javaapiforkml/](http://code.google.com/p/javaapiforkml/)，或者只是阅读 KML 规范并使用任何方便的 XML 解析器对其进行解析。如果你想使用第一个库，你可以浏览测试的源代码，看看它是如何使用的。

# emacs - Elisp：将缓冲区复制到剪贴板

> ID：10216148
> 
> 赞同：10
> 
> 时间：2012-04-18T19:01:48.870
> 
> 标签：emacs, lisp, elisp

与 Elisp 一起努力，但没有奏效 - 说参数数量不正确。如果您了解 Elips，那么这可能会以零努力优雅地完成。但我包括了我的笨手笨脚的东西，所以你会立即明白我想要做什么。

```
(defun copy-all ()
    "Copy entire buffer to clipboard"
    (interactive)
    (let ((pos (point)))
        (progn
            (mark-whole-buffer)
            (clipboard-kill-ring-save)
            (keyboard-quit)
            (goto-char pos)
            (message "Copy done.")))) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T19:13:29.060

不要保存该点并稍后恢复它，而是使用`save-excursion`. 它更健壮，并且还将恢复缓冲区。也不需要明确`progn`的。

也就是说，在这种情况下，只需将范围传递给`clipboard-kill-ring-save`而不是试图弄乱该区域。例如：

```
(defun copy-all ()
    "Copy entire buffer to clipboard"
    (interactive)
    (clipboard-kill-ring-save (point-min) (point-max))) 
```

请记住，如果您不确定函数需要哪些参数，则在 emacs 中始终可以使用`describe-function`( ) 获得 elisp 帮助。`C-h f`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T19:15:06.827

你让它变得比你必须做的更难。

```
(defun copy-whole-buffer ()
  "Copy entire buffer to clipboard"
  (interactive)
  (clipboard-kill-ring-save (point-min) (point-max))) 
```

# android - 从广播短信接收器更新谷歌地图标记

> ID：10216151
> 
> 赞同：3
> 
> 时间：2012-04-18T19:01:55.853
> 
> 标签：android, android-layout, android-intent, google-maps-api-3, mapactivity

我是android和java的新手。我正在尝试制作一个应用程序来执行以下任务。

*   接收传入的短信（其中将包含纬度和经度信息）
*   用标记在地图上显示它们所以每次收到短信时，地图都应该有一个新的标记。

目前我有一张可以显示一个点的地图，并且我已经实现了一个广播接收器来从 SMS 中获取纬度和经度。

但我不确定如何在接收到新短信时从广播接收器更新地图。

任何帮助或提示都会很有用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:28:21.217

您需要解决 3 个问题：

A. 通过 a 接收短信`BroadcastReceiver`

B.`MapView`使用 an注释 a`ItemizedOverlay`

`BroadcastReceiver`C.向显示地图的活动传达更新

## A项：接收短信

1.  实现你的`BroadcastReceiver`类：

    ```
    public class SMSBroadcastReceiver extends BroadcastReceiver
    {
        private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

        @Override 
        public void onReceive(Context context, Intent intent) 
        {
            if (intent.getAction().equals (SMS_RECEIVED)) 
            {
                Bundle bundle = intent.getExtras();
                if (bundle != null) 
                {
                    Object[] pdusData = (Object[])bundle.get("pdus");
                    for (int i = 0; i < pdus.length; i++) 
                    {
                        SmsMessage message = SmsMessage.createFromPdu((byte[])pdus[i]);

                        /* ... extract lat/long from SMS here */
                    }
                }
            }
        }
    } 
    ```

2.  在应用清单中指定您的广播接收器：

    ```
    <manifest ... > 
            <application ... >
                    <receiver 
                            android:name=".SMSBroadcastReceiver"
                            android:enabled="true"
                            android:exported="true">
                            <intent-filter>
                                    <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
                            </intent-filter>
                    </receiver>
            </application>
    </manifest> 
    ```

（归功于此线程中的海报：[Android - SMS 广播接收器](https://stackoverflow.com/questions/4117701/android-sms-broadcast-receiver)）

## B 项：注释地图

1.  创建一个派生自 的类`ItemizedOverlay`，用于通知 a`MapView`需要显示的任何标记：

    ```
    class LocationOverlay extends ItemizedOverlay<OverlayItem>
    {
            public LocationOverlay(Drawable marker) 
            {         
                    /* Initialize this class with a suitable `Drawable` to use as a marker image */

                    super( boundCenterBottom(marker));
            }

            @Override     
            protected OverlayItem createItem(int itemNumber) 
            {         
                    /* This method is called to query each overlay item. Change this method if
                       you have more than one marker */

                    GeoPoint point = /* ... the long/lat from the sms */
                    return new OverlayItem(point, null, null);     
            }

       @Override 
       public int size() 
       {
                    /* Return the number of markers here */
                    return 1; // You only have one point to display
       } 
    } 
    ```

2.  现在，将叠加层合并到显示实际地图的活动中：

    ```
    public class CustomMapActivity extends MapActivity 
    {     
        MapView map;
        @Override

            public void onCreate(Bundle savedInstanceState) 
            {     
                super.onCreate(savedInstanceState);         
                setContentView(R.layout.main);      

                /* We're assuming you've set up your map as a resource */
                map = (MapView)findViewById(R.id.map);

                /* We'll create the custom ItemizedOverlay and add it to the map */
                LocationOverlay overlay = new LocationOverlay(getResources().getDrawable(R.drawable.icon));
                map.getOverlays().add(overlay);
            }
    } 
    ```

## C 项：沟通更新

这是最棘手的部分（另请参阅[从 BroadcastReceiver 更新活动](https://stackoverflow.com/questions/10217800/updating-an-activity-from-a-broadcastreceiver)）。如果应用程序`MapActivity`当前可见，则需要通知它新收到的标记。如果`MapActivity`未激活，则需要将任何接收到的点存储在某处，直到用户选择查看地图。

1.  定义私有意图（in `CustomMapActivity`）：

    ```
    private final String UPDATE_MAP = "com.myco.myapp.UPDATE_MAP" 
    ```

2.  创建私有`BroadcastReceiver`（in `CustomMapActivity`）：

    ```
    private  BroadcastReceiver updateReceiver =  new BroadcastReceiver()
    {
        @Override
        public void onReceive(Context context, Intent intent) 
        {
            // custom fields where the marker location is stored
            int longitude = intent.getIntExtra("long");
            int latitude = intent.getIntExtra("lat");

            // ... add the point to the `LocationOverlay` ...
            // (You will need to modify `LocationOverlay` if you wish to track more
            // than one location)

            // Refresh the map

            map.invalidate();
        }
    } 
    ```

3.  `BroadcastReceiver`在活动开始时注册您的私人信息（将此添加到`CustomMapActivity.onCreate`）：

    ```
    IntentFilter filter = new IntentFilter();
    filter.addAction(UPDATE_MAP);
    registerReceiver(updateReceiver /* from step 2 */, filter); 
    ```

4.  从公众那里调用您的私人意图`BroadcastReceiver`（将其添加到`SMSBroadcastReceiver.onReceive`）：

    ```
    Intent updateIntent = new Intent();
    updateIntent.setAction(UPDATE_MAP);
    updateIntent.putExtra("long", longitude);
    updateIntent.putExtra("lat", latitude);
    context.sendBroadcast(updateIntent); 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T19:15:24.730

听起来您正在寻找有关如何在 Activity 和 BroadcastReceiver 之间进行通信的详细信息？一种方法（有许多不同的方法）是让您的地图活动注册一个临时广播接收器，该广播接收器设置为仅收听来自您的应用程序的私人广播，然后让您的 SMS 广播接收器生成一个新的广播，其纬度/经度来自短信。在您的地图活动中，您的接收器每次收到新的私人广播时都会向地图添加一个新点。

# c# - 使用 ASP.Net 生成动态页面

> ID：10216155
> 
> 赞同：0
> 
> 时间：2012-04-18T19:02:09.160
> 
> 标签：c#, asp.net

我目前正在编写经典的 asp 并拥有自己的 CMS，这是一个很好的，但我想同时将其移至 c#.net。（客户不再喜欢这种旧语言）在我当前的 CMS 上，我使用 ASP FSO（文件系统对象）物理生成页面。所以我的问题是我也应该在 asp.net 上使用这种方法吗？我查看了一些 .NET cms 并意识到它们不会物理地构建页面。

例如，在使用 CMS 后注意到，当我在地址栏中键入[http://localhost/PageName.aspx](http://localhost/PageName.aspx)时，它实际上仍在 default.aspx 中，但它重新生成的页面内容属于数据库中 PageName.aspx 的 PageID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:26:41.663

使用 ASP.NET，不再需要物理创建文件。将内容保存在数据库中，使用 asp.net 控件显示此内容并使用 asp.net 缓存技术加载内容而无需往返数据库 - 就像任何其他 cms 一样。

[http://msdn.microsoft.com/en-us/library/xsbfdd8c(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/xsbfdd8c(v=vs.100).aspx)

# java - 未能将字符串解析为文档

> ID：10216158
> 
> 赞同：0
> 
> 时间：2012-04-18T19:02:20.780
> 
> 标签：java, xml-parsing

谁能告诉我这段代码如何生成一个空文档，但不抛出异常？

```
document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(new StringReader("<?xml version=\"1.0\"?><company>test</company>"))); 
```

起初：

```
private Document load(String message) throws MessagingException, IOException {
    Document document = null;

    try {
        document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(new StringReader(message.substring(message.indexOf(XML_BEGIN),
                                                                                                                                        message.indexOf(XML_END)))));
    }
    catch (Exception e) {
        e.printStackTrace();
    }
...
    Element element = document.getElementById(TIME_STAMP); 
```

结果是：

```
java.lang.NullPointerException
at ...view.MailReceiver.parse(MailReceiver.java:156)
at ...view.MailReceiver.notify(MailReceiver.java:99)
at ...view.MailReceiver.main(MailReceiver.java:72) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:12:55.903

我没有看到文件是`null`.

```
// Parse XML into Document.
String xml = "<?xml version=\"1.0\"?><company>test</company>";
Document document = DocumentBuilderFactory
    .newInstance()
    .newDocumentBuilder()
    .parse(new InputSource(new StringReader(xml)));

// Format Document to XML again. 
StringWriter writer = new StringWriter();
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.transform(new DOMSource(document), new StreamResult(writer));

System.err.println(writer); 
```

打印出来

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><company>test</company> 
```

所以`document`不是空的。

打印出来`document`给你`[#document: null]`，这可能有点令人困惑，因为它提到了`null`。但是，这并不会`document`自行`null`生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:31:46.620

在您的原始代码中，我怀疑由于子字符串略微“关闭”，XML 格式不正确。
当您正在寻找“XML_END”字符串时，假设它实际上是您希望解析的 XML 的一部分（例如“”作为随机示例），您还必须添加该字符串的长度，或者您'将丢失部分 XML。
子字符串在 endIndex 上也是独占的，所以你可能也需要一个 +1。

要开始检查所有这些，我会将 XML 字符串（在子字符串化之后）分配给一个变量并使用 log4j（或 System.out.println）记录它以查看。

在您的原始代码中，如果发生解析异常，那么您将直接使用空文档 - 不好！可能是您的 NullPointerException 的原因。通常你会在 catch 块中抛出一个异常。

# c# - 如何将 IQueryable 转换为 EntityCollection

> ID：10216161
> 
> 赞同：2
> 
> 时间：2012-04-18T19:02:28.137
> 
> 标签：c#, linq, iqueryable, entitycollection

我真的找不到关于如何转换`IQueryable`为的答案`EntityCollection`？

```
var userGroups = this.ObjectContext.UserGroups;

 foreach (var userGroup in userGroups )
 {
     var ussers = this.ObjectContext.Users.Where(f => f.UserGroupID == item.ID && f.IsActive == true);

     userGroup.Users = users; // Here I' am getting an issue.
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:06:03.473

我不是 100% 确定，因为你没有指定，但我猜你的`userGroup.Users`属性是 EDMX 模型生成的导航属性，所以实体集合已经为你创建好了，你需要做的就是添加你的用户收藏。

```
var userGroups = this.ObjectContext.UserGroups;

 foreach (var userGroup in userGroups )
 {
     var ussers = this.ObjectContext.Users.Where(f => f.UserGroupID == item.ID && f.IsActive == true);

     foreach(var user in ussers)
        userGroup.Users.Add(user);
 } 
```

# java - 我可以注入一个动态创建的对象吗

> ID：10216166
> 
> 赞同：3
> 
> 时间：2012-04-18T19:03:21.460
> 
> 标签：java, spring, dependency-injection, guice

我有一个关于依赖注入的问题。

我有一堂课，说：

```
class MyClass {
    MyServiceAPI serviceAPI;
    public setSession(Session session) {
         serviceAPI = new MyServiceAPI(session);     
    }
    ....
} 
```

会话由另一个类创建，该类在运行时从数据库中加载它。

```
class MyAnotherClass {
    Myclass myClass;

    @Inject
    MyAnotherClass(MyClass myClass) {
        this.myClass = myClass;
    }

    public someFunction() {
        String key = <read from database>;
        Session session = new Session(key);
        myClass.setSession();
        ......
    }
} 
```

如前所述，MyClass 实例被注入到 MyAnotherClass 中，而 MyClass 中的 serviceAPI 实例是使用 new 创建的。如果我想将 ServiceAPI 注入 MyClass，我可以在创建会话的类中创建它，并使用 setter 将其设置为 MyClass。

但问题是我真的不想让 MyAnotherClass 创建 MyServiceAPI 并将其注入 MyClass。我希望 MyAnotherClass 不知道 MyServiceAPI 的存在。

有没有办法可以使用像 Guice 或 Spring 这样的依赖注入器来做到这一点？或者只是Java？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:43:30.573

使用guice和简单工厂的可能解决方案。MyServiceAPI 可以是一个接口。

```
public class MyClass {

    @Inject
    private MyServiceFactory factory;
    private MyServiceAPI myServiceAPI;

    public void setSession(Session session) {
        myServiceAPI = factory.createMyServiceAPI(session);
    }
}

public class MyServiceFactory {

    MyServiceAPI createMyServiceAPI(Session session) {
        // create with new, inject via Injector, do what you want... :)
        return <yourobject>;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:18:56.630

如果您希望在纯 Java 中进行依赖注入，那么从 Java 6 开始，可以通过内置的 Java 服务提供者接口提供一些支持。虽然它需要一些与 jar 文件等相关的管道。[在这里查看 Java SPI](http://java.sun.com/developer/technicalArticles/javase/extensible/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:52:25.290

你只需要为此使用一个好的老式工厂。

```
class MyAnotherClass {
    MyClassFactory myClassFactory;

    @Inject
    MyAnotherClass( MyClassFactory myClassFactory ) {
        this.myClassFactory = myClassFactory;
    }

    public void someFunction() {
        String key = "1"; // read from DB
        myClass = myClassFactory.getMyClass( key );
    }
}

class MyClassFactory {
    public MyClass getMyClass( String key ) {
        Session session = new Session( key );
        MyClass myClass = new MyClass();
        myClass.setSession( session );
        return myClass;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:53:10.070

我确实认为您可能必须重新排序您的依赖项。同样，在不知道您的完整代码的情况下，这有点困难，但是看看您的示例，以下内容似乎是正确的：

*   `MyClass`实际上取决于`MyServiceAPI`而不是`Session`。因此，您应该`MyServiceAPI`直接在其构造函数中注入 a 。

*   `Session`应该将其`sessionId`（或其他）注入其构造函数中。你可以在 Guice 中绑定它的值，所以你会得到类似的东西：`@Inject @SessionId public Session(String sessionId)`。或者你可以同时注入`sessionId`和 some ，这样它就可以从服务中检索自己的数据。`SessionService``Session`

*   `MyServiceAPI`应该`Session`注入其中。

# java - 无法解析类型 junit.framework.TestCase。它是从所需的 .class 文件中间接引用的

> ID：10216172
> 
> 赞同：2
> 
> 时间：2012-04-18T19:03:47.487
> 
> 标签：java, jmock, junit3

我在这里遵循示例：[jMock - 入门](http://www.jmock.org/getting-started.html)

我收到此错误：无法解析类型 junit.framework.TestCase。它是从所需的 .class 文件中间接引用的

我已经导入了这 4 个罐子：

*   jmock-2.5.1.jar
*   hamcrest-core-1.1.jar
*   hamcrest-library-1.1.jar
*   jmock-junit3-2.5.1.jar

蚂蚁的想法这个错误是什么意思？

```
package com.test;

import org.jmock.integration.junit3.MockObjectTestCase;
import org.jmock.Expectations;

class PublisherTest extends MockObjectTestCase {
public void testOneSubscriberReceivesAMessage() {
    // set up
    final Subscriber subscriber = mock(Subscriber.class);

    Publisher publisher = new Publisher();
    publisher.add(subscriber);

    final String message = "message";

    // expectations
    checking(new Expectations() {
        {
            oneOf(subscriber).receive(message);
        }
    });

    // execute
    publisher.publish(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T23:18:04.353

将 JUnit 3 添加到您的类路径中。

# java - 您的网络浏览器必须启用 JavaScript 才能正确显示此应用程序

> ID：10216174
> 
> 赞同：0
> 
> 时间：2012-04-18T19:03:58.627
> 
> 标签：java, swing

我在 JEditorPane 上显示了网页，但收到的消息是“**您的 Web 浏览器必须启用 JavaScript 才能正确显示此应用程序。** ”

![在此处输入图像描述](../Images/6505a6f3a5f9287068b38ec7248a9764.png)

下面是代码

```
import java.io.IOException;

import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JScrollPane;

public class EricPage {

    public EricPage() {
    }

    public static void main(String[] args) {

         JEditorPane jep = new JEditorPane();
         jep.setEditable(false);   

         try {
           jep.setPage("http://corp.netsapiens.com");
         }
         catch (IOException e) {
           jep.setContentType("text/html");
           jep.setText("<html>Could not load Web Site");
         } 

         JScrollPane scrollPane = new JScrollPane(jep);     
         JFrame f = new JFrame("Display WebPage");
         // Next line requires Java 1.3
         f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         f.getContentPane().add(scrollPane);
         f.setSize(512, 342);
         f.show();
}
} 
```

请让我知道如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:10:07.667

JEdi​​torPane 仅呈现基本的 HTML 和 CSS (HTML 3.2)。它不支持 JavaScript。有关详细信息，请参阅[HTMLEditorKit](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/html/HTMLEditorKit.html)。

# ruby-on-rails - Rails：在 Rails 中添加了一个新方法，但无法在浏览器窗口中获取输出 - 为什么？

> ID：10216176
> 
> 赞同：0
> 
> 时间：2012-04-18T19:04:08.617
> 
> 标签：ruby-on-rails, ruby

嗨，我有一个类“listings_controller”。我在其中添加了一个方法“列表”，如下所示：

```
def index     
    @listings = Listing.order(:name)  
end  

def list  
    render :text=>(@listings).to_json  
end 
```

这是我的 routes.rb 文件

根到：'listings#index'，作为：'listings'
资源：listings 做
集合做得到
：around
end
end

```
match ':controller(/:action(/:id))(.:format)' 
```

当我在浏览器中输入以下内容时：

[http://localhost:3000/listings/list](http://localhost:3000/listings/list)

我希望在浏览器中看到 JSON 对象及其内容。然而，这并没有发生。我想知道是否有人可以帮助我诊断我做错了什么。

webrick 服务器显示以下内容：

```
Started GET "/listings/list" for 127.0.0.1 at 2012-04-18 11:56:25 -0700  
Processing by ListingsController#show as HTML  
Parameters: {"id"=>"list"}  
Listing Load (0.3ms)  SELECT "listings".* FROM "listings" WHERE "listings"."id" = ? LIMIT 1  [["id", "list"]]  
Completed 500 Internal Server Error in 2ms 
```

ActiveRecord::RecordNotFound（找不到 id=list 的列表）：
app/controllers/listings_controller.rb:104:in `show'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:10:19.717

在您的 routes.rb 中添加以下内容：

`match 'listings/list' => 'listings#list'`

或简写：

`get 'listings/list'`

目前它正在被路由到 show 方法。

# c# - 十进制赋值中的“M”代表什么？

> ID：10216182
> 
> 赞同：23
> 
> 时间：2012-04-18T19:04:23.820
> 
> 标签：c#

MSDN 说：

“没有后缀 m，数字被视为双精度数，从而产生编译器错误。”

“M”在什么意思：

```
decimal current = 10.99M; 
```

代表？

与以下有什么不同：

```
decimal current = (decimal)10.99 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-18T19:09:03.227

M 使数字在代码中成为十进制表示。

要回答您问题的第二部分，是的，它们是不同的。

```
decimal current = (decimal)10.99 
```

是相同的

```
double tmp = 10.99;
decimal current = (decimal)tmp; 
```

现在对于大于 sigma 的数字，这应该不是问题，但是如果您指的是十进制，则应该指定十进制。

* * *

**更新**：

哇，我错了。我去检查 IL 以证明我的观点，编译器对其进行了优化。

* * *

**更新 2**：

毕竟我是对的！，你仍然需要小心。比较这两个函数的输出。

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(Test1());
        Console.WriteLine(Test2());
        Console.ReadLine();
    }

    static decimal Test1()
    {
        return 10.999999999999999999999M;
    }
    static decimal Test2()
    {
        return (decimal)10.999999999999999999999;
    }
} 
```

第一个返回`10.999999999999999999999`，但第二个返回`11`

* * *

顺便说一句， double 将为您[提供 15 位小数的精度](http://msdn.microsoft.com/en-us/library/system.double.aspx#remarksToggle)，但 decimal 将为您[提供 96 位的精度，比例因子为 0 到 28](http://msdn.microsoft.com/en-us/library/system.decimal.aspx#remarksToggle)。所以你可以表示范围内的任何数字 ((-2 ^(96) to 2 ^(96) ) / 10 ^((0 to 28)) )

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-18T19:05:21.397

### 描述

```
decimal current = 10.99M; 
```

告诉编译器你想要一个十进制数。

```
decimal current = (decimal)10.99 
```

告诉编译器您要将双精度`10.99`转换为小数。

有人说它代表**金钱**。M，因为您必须在金融应用程序中使用小数。您必须使用小数，因为它们比浮点数（双精度）更准确。

> 小数后缀是 M/m，因为 D/d 已经被 double 取了。尽管有人建议 M 代表金钱，但 Peter Golde 回忆说，M 只是被选为十进制中的下一个最佳字母。
> 
> 小数比双精度有更多的有效数字，因此它可以更精确——它也占用更多的内存。除了某些数学或物理相关的算法之外，双精度或浮点数应该没问题。

**例如**

*   如果您执行 ANYNUMBER / 0.5d，您将不会得到 ANYNUMBER 的一半。

*   如果你做 ANYNUMBER / 0.5m，你每次都会得到 ANYNUMBER 的一半。

*   `decimal`为钱而用

*   用于`double`汇率

### 更多信息

*   [小数与双 - 差异？](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/921a8ffc-9829-4145-bdc9-a96c1ec174a5/)
*   [每个程序员都应该知道的关于浮点运算的知识](http://floating-point-gui.de/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:06:12.407

嗯......我认为“D”会与 混淆`double`，所以......他们选择了“M”？也许是为了“钱”？似乎有点傻......但我找不到任何确定的东西。

# fonts - @Font-Face 在 Opera 中不起作用

> ID：10216183
> 
> 赞同：0
> 
> 时间：2012-04-18T19:04:26.233
> 
> 标签：fonts, opera, font-face

我希望你能花一些时间帮助我解决这个问题。我正在尝试[将此字体](http://www.losttype.com/font/?name=blanch)集成到 wordpress 主题中。它工作得很好 FF、Chrome 和 IE。但我对 Opera 有疑问。最奇怪的是它加载但看起来文件格式已损坏。我知道它会加载，因为页面加载时字体会从衬线转换为无衬线。

我使用 fontsquirrel 和其他几个转换器来创建一个工具包，但似乎它们都不能正常工作。

```
@font-face {
    font-family: 'Blanch-Caps';
    src: url('<?php bloginfo('stylesheet_directory'); ?>/font/blanchcaps/blanch_caps.eot');
    src: url('<?php bloginfo('stylesheet_directory'); ?>/font/blanchcaps/blanch_caps.eot?#iefix') format('embedded-opentype'),
         url('<?php bloginfo('stylesheet_directory'); ?>/font/blanchcaps/blanch_caps.woff') format('woff'),
         url('<?php bloginfo('stylesheet_directory'); ?>/font/blanchcaps/blanch_caps.ttf') format('truetype'),
         url('<?php bloginfo('stylesheet_directory'); ?>/font/blanchcaps/blanch_caps.svg#blanch_caps') format('svg');
    font-weight: normal;
    font-style: normal;
}

.title h3 {
    font-family: 'Blanch-Caps';
    text-transform: lowercase;
} 
```

再一次，它在除 Opera 之外的所有其他浏览器中都能正常工作。我正在使用小写转换，因为布兰奇不支持大写字母。

我将不胜感激任何形式的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T21:24:27.220

这是一个已知的 Opera 错误...您只需要添加双引号：

```
@font-face {
    font-family: "Blanch-Caps";
    ... 
```

更多关于这里的问题：[为什么 Opera (11.00) 不显示自定义 (@font-face) 字体？](https://stackoverflow.com/questions/4736471/why-wont-opera-11-00-display-custom-font-face-fonts)

# java - 当我在使用 stop 变量后调用线程时，它不会运行。有人可以指出代码中的错误吗？

> ID：10216184
> 
> 赞同：1
> 
> 时间：2012-04-18T19:04:30.477
> 
> 标签：java, thread-safety

# 这是类投资组合：

```
public class Portfolio extends Thread {
    private volatile Thread stopMe= Thread.currentThread();

    public Portfolio(String name) {
        super(name);
        // TODO Auto-generated constructor stub
    }
    public void stopMe(){
        stopMe= null;
    }

    @Override
    public void run() {
        while(stopMe== Thread.currentThread()){
        try {
            for(int i=0; i<10; i++){
            //sleep(700);   
            System.out.println("You have " +(500+i)+ " shares of IBM");
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            System.out.println(Thread.currentThread().getName()+e.toString());
        }}
    }

} 
```

# 这是我调用线程的地方

```
public class TestThreads {

    /**
     * @param args
     */

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        MarketNews mn= new MarketNews("Market News");
        mn.start();
        //mn.setPriority(Thread.NORM_PRIORITY+1);
        //mn.interrupt();
        mn.isAlive();       
        Portfolio p= new Portfolio("Portfolio data");
        p.start();
    //  System.out.println(Thread.currentThread().interrupted());
        System.out.println("TestThreads is finished");

    }

} 
```

# 我调用了 p.start()，但它似乎不起作用。当我删除 stopMe 变量时，代码工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:09:53.877

当你运行时：

```
Portfolio p= new Portfolio("Portfolio data"); 
```

stopMe 是“主”线程（当前线程）

然后

```
p.start() 
```

你开始一个新的，所以 stopMe 与那个线程不同，投资组合中的“运行”功能将直接停止

# trac - Trac 0.12.3 textarea 字段可以跨列吗？

> ID：10216185
> 
> 赞同：1
> 
> 时间：2012-04-18T19:04:41.493
> 
> 标签：trac

我们的旧 Trac 安装运行的是 0.11.5 版。我们刚刚升级到 0.12.3 (rc1)。在旧安装中，我们有一个自定义 textarea 字段，用于输入与描述分开的附加信息。我在 0.12.3 中重新创建了该字段。

在 0.11.5 中，它曾经跨越工单的两列。在 0.12.3 中它只占用一列。一些搜索发现了一些关于布局的票和讨论，但比我所说的更复杂。

如何像在 0.11.5 中一样使 textarea 跨越两列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:06:47.127

你必须使用`field.rows = 2`. 这是一个在 trac.ini 中使用的示例：

```
[ticket-custom]
release_note = textarea
release_note.cols = 60
release_note.label = Release Note
release_note.order = 0
release_note.rows = 2 
```

# sql-server-2008 - WSO2 ESB 数据库通知

> ID：10216188
> 
> 赞同：2
> 
> 时间：2012-04-18T19:04:43.763
> 
> 标签：sql-server-2008, events, wso2, wso2esb, wso2dss

我需要了解 WSO2 ESB 是否可以监视 SQL Server 2008 数据库的表更新。如果检测到更新，则 ESB 将从 SQL Server 实例中提取更改，转换它们并将它们作为消息传递到 JMS 队列。

我一直在查看 WSO2 数据服务，但没有描述这种赛事风格

欢迎任何建议！

# google-analytics - _trackEvent 是否计为页面浏览量？

> ID：10216189
> 
> 赞同：2
> 
> 时间：2012-04-18T19:04:48.760
> 
> 标签：google-analytics

在 Google Analytics 中，如果我使用 _trackEvent，它会增加页面浏览量吗？

我知道有一个参数可以将事件标记为非交互，以免影响计算的弹跳率。但是当这个参数没有设置（默认）时，事件是否也算作页面浏览量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:07:54.770

不应该，不。根据[Google Analytics 事件跟踪文档](http://code.google.com/apis/analytics/docs/tracking/eventTrackerGuide.html)：

> 此外，浏览量计算不受使用事件跟踪方法跟踪的用户活动的影响。

# c# - 无法上传到特定文件夹，出现 503 错误

> ID：10216190
> 
> 赞同：3
> 
> 时间：2012-04-18T19:04:49.263
> 
> 标签：c#, google-docs, google-docs-api

我正在尝试将一个简单的文本文件上传到谷歌文档中的特定文件夹，但没有运气。

```
FileStream fileStream = new FileStream(@"c:\test.txt", System.IO.FileMode.Open);
DocumentEntry lastUploadEntry = 
    globalData.service.UploadDocument("c:\\test.txt", null);                                                                               

string feed =
    "https://docs.google.com/feeds/upload/create-session/default/private/full/folder%folder:0B2dzFB6YvN-kYTRlNmNhYjEtMTVmNC00ZThkLThiMjQtMzFhZmMzOGE2ZWU1/contents/";

var result = 
    globalData.service.Insert(new Uri(feed), fileStream, "application/pdf", "test"); 
```

我收到一条错误消息

> “远程服务器返回错误：(503) 服务器不可用。”

我怀疑目标文件夹 uri 是错误的，但我无法找出正确的文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:28:42.260

在[https://developers.google.com/google-apps/documents-list/#uploading_a_new_document_or_file_with_both_metadata_and_content](https://developers.google.com/google-apps/documents-list/#uploading_a_new_document_or_file_with_both_metadata_and_content)有一个使用可恢复上传组件的完整示例：

```
using System;
using Google.GData.Client;
using Google.GData.Client.ResumableUpload;
using Google.GData.Documents;

namespace MyDocumentsListIntegration
{
  class Program
  {
    static void Main(string[] args)
    {
      DocumentsService service = new DocumentsService("MyDocumentsListIntegration-v1");

      // TODO: Instantiate an Authenticator object according to your authentication
      // mechanism (e.g. OAuth2Authenticator).
      // Authenticator authenticator =  ...

      // Instantiate a DocumentEntry object to be inserted.
      DocumentEntry entry = new DocumentEntry();

      // Set the document title
      entry.Title.Text = "Legal Contract";

      // Set the media source
      entry.MediaSource = new MediaFileSource("c:\\contract.txt", "text/plain");

      // Define the resumable upload link
      Uri createUploadUrl = new Uri("https://docs.google.com/feeds/upload/create-session/default/private/full");
      AtomLink link = new AtomLink(createUploadUrl.AbsoluteUri);
      link.Rel = ResumableUploader.CreateMediaRelation;
      entry.Links.Add(link);

      // Set the service to be used to parse the returned entry
      entry.Service = service;

      // Instantiate the ResumableUploader component.
      ResumableUploader uploader = new ResumableUploader();

      // Set the handlers for the completion and progress events
      uploader.AsyncOperationCompleted += new AsyncOperationCompletedEventHandler(OnDone);
      uploader.AsyncOperationProgress += new AsyncOperationProgressEventHandler(OnProgress);

      // Start the upload process
      uploader.InsertAsync(authenticator, entry, new object());
    }

    static void OnDone(object sender, AsyncOperationCompletedEventArgs e) {
        DocumentEntry entry = e.Entry as DocumentEntry;
    }

    static void OnProgress(object sender, AsyncOperationProgressEventArgs e) {
        int percentage = e.ProgressPercentage;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:21:50.540

只需按照文章[Google Apps Platform Uploading documents](https://developers.google.com/google-apps/documents-list/#creating_or_uploading_text_documents)
另请查看[Google Documents List API 3.0 版](https://developers.google.com/google-apps/documents-list/#getting_a_resource_entry_again)
Uri 应该类似于以下内容：

```
string feed = @"https://developers.google.com/google-apps/documents-list/#getting_a_resource_entry_again"; 
//it may not be exact, just check and read from the links 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T06:00:50.827

试试这个 uri：

```
"https://docs.google.com/feeds/default/private/full/folder%3A" + fRid + "/contents" 
```

//fRid 是文件夹的资源 ID。在您的情况下：0B2dzFB6YvN-kYTRlNmNhYjEtMTVmNC00ZThkLThiMjQtMzFhZmMzOGE2ZWU1

另外我猜你的 URI 给出了这个错误，因为你使用文件夹资源 ID 作为 - folder:resourceID

尝试删除**文件夹：**并仅使用 RID

剪切“文件夹：”的代码 -

```
int ridIndex = dRid.IndexOf(":");
Rid = Rid.Substring(ridIndex + 1); 
```

# kml - 为什么使用谷歌托管的图像时谷歌地球显示不正确的图像

> ID：10216193
> 
> 赞同：1
> 
> 时间：2012-04-18T19:04:55.203
> 
> 标签：kml, google-earth, google-earth-plugin

Earth 似乎经常加载随机图像，而不是 kml 中指定的图像。例如，从 IconStyle (https://developers.google.com/kml/documentation/kmlreference#iconstyle) 的 kml 文档中加载 kml 示例它在[http://maps.google.com/mapfiles/kml/指定图像pal3/icon21.png](http://maps.google.com/mapfiles/kml/pal3/icon21.png)在浏览器中查看时是绿色田野上的建筑物，但在地球上显示为山脉。

似乎只要找到谷歌托管的图像并且调色板不同步，地球就被硬编码为使用内部调色板。

（地球版本为 6.2.1.6014（测试版））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:08:56.983

我认为这是一个不幸的遗留问题。

谷歌地图在某一时刻改变了他们的图标——重复使用相同的文件名！

另一方面，Google 地球知道许多用户在他们的地点和 KML 文件中使用特定图标。因此，与其让每个人的图标突然随机变化，他们选择仍然显示旧图标。

如果不是真的会很有趣！

* * *

如果您真的想使用 Google 托管的图标，您可以使用替代 URL - 希望 Google 地球不会尝试“修复”的 URL，例如[http://googleapis.com/mapfiles/kml/pal3/icon21.png](http://googleapis.com/mapfiles/kml/pal3/icon21.png)

但真的不推荐依赖谷歌托管的图标。他们可以随时改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:31:32.367

如果您真的不希望有任何问题，请下载您想要使用的图标并创建一个 KMZ 图层而不是 KML。像这样，您将能够拥有一个包含图像的文件夹，并且您不会依赖托管的图像。

# python - “'NoneType' 类型的对象没有 len()”在 Django 中使用 pusher 时

> ID：10216202
> 
> 赞同：2
> 
> 时间：2012-04-18T19:05:55.547
> 
> 标签：python, ajax, django, debugging, pusher

我已经在我的 django 应用程序中实现了一个非常基本且按教程提供的 Pusher 触发器。起初它工作得很好，但经过几次提交后，我遇到了以下异常：

```
"object of type 'NoneType' has no len()" 
```

在以下第二行中：

```
p = pusher.Pusher()
p[page_key].trigger('page_update', {'msgid' : message.id}) 
```

不同的或空的 dict 产生相同的结果，与将 page_key 更改为 string 而不是 unicode 相同 - 没有。还要注意 p 和 p.trigger 的 type() 给出了逻辑结果，它们绝对不是 None。

这条线在某些情况下有效（我不知道它们有什么特别之处）并且正如我所提到的那样在过去一直有效，但我不知道我做错了什么。

似乎最后的提交都与 Pusher 无关，所以我很无奈。在网上搜索这个异常并没有什么成果，而且通常没有足够的关于 django + Pusher 的文档。

这可能是我做错的其他事情，但我不知道从哪里开始寻找。

任何帮助将不胜感激。

```
Traceback:

  79\.         p[page_key].trigger('page_update', {'msgid' : message.id})
File "/usr/local/lib/python2.7/dist-packages/pusher/__init__.py" in trigger
  41\.         status = self.send_request(self.signed_query(event, json_data, socket_id), json_data)
File "/usr/local/lib/python2.7/dist-packages/pusher/__init__.py" in signed_query
  54\.         signature = hmac.new(self.pusher.secret, string_to_sign, hashlib.sha256).hexdigest()
File "/usr/lib/python2.7/hmac.py" in new
  133\.     return HMAC(key, msg, digestmod)
File "/usr/lib/python2.7/hmac.py" in __init__
  68\.         if len(key) > blocksize:

Exception Type: TypeError at /sphere/comment
Exception Value: object of type 'NoneType' has no len() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T22:40:32.803

self.pusher.secret 是 None 而不是字符串。您的推送器设置没有被拾取吗？

# javascript - Backbone.js：.render() 和 .remove() 应该能够相互反转吗？

> ID：10216203
> 
> 赞同：3
> 
> 时间：2012-04-18T19:05:57.827
> 
> 标签：javascript, model-view-controller, architecture, backbone.js

因为 Backbone.js 非常灵活，我想知道某些事情的最佳方法。在这里，我想知道我是否应该构建我的应用程序的视图，以便 '.render()' 和 '.remove()' 正确地相互反转。

起初，看起来最干净的方式是向视图传递一个 ID 或 jQuery 元素以附加到。如果事情以这种方式完成，调用 '.render()' 将不会正确替换 DOM 中的视图，因为主元素永远不会放回 DOM 中：

```
App.ChromeView = Backbone.View.extend({
  render: function() {
    // Instantiate some "sub" views to handle the responsibilities of
    // their respective elements.
    this.sidebar = new App.SidebarView({ el: this.$(".sidebar") });
    this.menu = new App.NavigationView({ el: this.$("nav") });
  }
});

$(function() {
  App.chrome = new App.ChromeView({ el: $("#chrome") });
}); 
```

对我来说，最好将其设置为 .remove() 和 .render() 完全相反：

```
App.ChromeView = Backbone.View.extend({
  render: function() {
    this.$el.appendTo('body');
    this.sidebar = new App.SidebarView({ el: this.$(".sidebar") });
    this.menu = new App.NavigationView({ el: this.$("nav") });
  }
});

$(function() {
  App.chrome = new App.ChromeView();
}); 
```

Backbone.js 社区怎么说？.remove() 和 .render() 应该是同一枚硬币的两面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:15:36.040

我更喜欢`render`不将视图元素附加到dom。我认为这促进了松耦合、高内聚、视图重用，并促进了单元测试。我将渲染元素附加到一个容器，直到路由器或主“布局”类型的容器视图。

好处`remove`是它可以在视图不知道父元素的情况下工作，因此仍然是松散耦合和可重用的。我绝对不喜欢将我的布局 HTML（`#main`或其他）中的随机 DOM 选择器放入我的视图中。那里的耦合肯定不好。

我会注意到，在某些烦人的情况下，某些东西，比如[选择的 jQuery 插件](http://harvesthq.github.com/chosen/)，需要在元素附加到 DOM 之后运行一些代码。对于这些情况，我通常会在视图中实现`postAttach()`回调，并尽量保持那里的代码量尽可能少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:21:46.773

是的，内部`View.remove()`非常*激进*。

对于使用外部重新创建视图的建议，`el`我习惯于像这样重写它：

```
remove: function(){
  this.$el.empty();
  return this;
} 
```

但我不认为框架应该实现*魔术*行为来避免这种*外部 DOM 元素删除*。

这个框架的行为是激进的，好的，但是正如我们上面看到的，在需要的时候定制它是非常便宜的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:52:43.640

那这个呢？如果我们只有 .initialize 和 .render 采用 parentSelector 属性，我们可以这样做并最终得到如下用法：

*   松耦合
*   可逆的 .remove()/.render()
*   调用方法的单一方法实例化和渲染

例如：

```
// Bootstrap file
curl(['views/app']).then(
    function(App){
        app = new App('body');
    });

// view/app.js
   define([
        'text!views/app.tmpl.html'
    ,   'link!views/app.css'
    ]
,   function (template) {

    var App

    // Set up the Application View
    App = Backbone.View.extend({
        // Standard Backbone Methods
        initialize: function (parentSel) {
            console.log('App view initialized')
            if (parentSel) { this.render(parentSel) }
        }
    ,   render: function (parentSel) {
            if (parentSel) { this._sel = parentSel } // change the selector if render is called with one
            if (!this._sel) { return this } // exit if no selector is set

            this.$el.appendTo(this._sel)

            this.$el.html(
                this.compiledTemplate({ 'content':'test content' })
            );
            return this
        }
        // Custom Properties
    ,   compiledTemplate: _.template(template)
    })

    return App
});

// External usage
// I can call .remove and .render all day long now:
app.remove()
app.render()
app.remove() 
```

# java - 使用 EclipseLink 时生成脚本

> ID：10216205
> 
> 赞同：1
> 
> 时间：2012-04-18T19:06:11.870
> 
> 标签：java, jakarta-ee, jpa, eclipselink

我使用 EclipseLink 作为 JPA 实现，我在*persistence.xml*添加这些属性，但我看不到任何脚本生成？他们应该在哪里被拯救或者我误解了这个属性。

```
<property name="eclipselink.ddl-generation" value="create-tables" />
<property name="eclipselink.ddl-generation.output-mode" value="both" /> 
```

是否也可以定义一个在创建表后运行的脚本？和 Rails 中的种子脚本一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:48:48.957

EclipseLink 应该使用“createDDL.jdbc”并将其默认放置在当前工作目录中。您可以通过指定文件名的“eclipselink.create-ddl-jdbc-file-name”属性和“eclipselink.application-location”来更改位置来更改此设置。

# java - 是否有创建 BPMN 的 Java API？

> ID：10216207
> 
> 赞同：3
> 
> 时间：2012-04-18T19:06:23.560
> 
> 标签：java, api, business-process-management, bpmn

有没有办法通过 Java API以编程方式创建[BPMN 2.0 ？](http://en.wikipedia.org/wiki/Business_Process_Model_and_Notation)

我知道我可以使用图形[建模工具](http://en.wikipedia.org/wiki/Comparison_of_Business_Process_Modeling_Notation_tools)或手动创建[BPMN XML](http://www.omg.org/spec/BPMN/2.0/)，但我正在寻找一种在运行时动态创建它的方法。

在我的例子中，BPMN 将通过 jBPM 执行。[jBPM 文档](http://docs.jboss.org/jbpm/v5.2/userguide/ch05.html#d0e783)说您可以使用他们的API 来定义流程，但他们不建议使用它来“保护自己免受内部 API 的影响”。如果有一个不与特定供应商绑定的 API，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:18:46.990

[EasyBPMN](http://research.petalslink.org/display/easybpmn/EasyBPMN+Overview)是一种选择。没有“供应商中立”的方式，因为 Java 没有用于该概念的标准 API（与通用 XML 操作不同），但这将是一种在工作流引擎和建模工具之间更具可移植性的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:59:09.580

BPMN2 规范的整体理念是保持供应商中立，在 jBPM5 中，您拥有流畅的 API，在某种程度上允许您创建可以导出的 BPMN2 模型。我不确定它是否与 XML 中支持的最新功能保持同步，但我很确定您可以使用它创建自己的流程。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T12:12:48.807

BPMN2 模型基于 EMF 模型（org.eclipse.bpmn2 项目，模型文件夹，BPMN20.ecore 文件）。您可以使用 EMF Java Api 创建、读取或修改 BPMN2 模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T12:35:32.083

您可以使用来自[activiti](http://www.activiti.org)的库。这里有一个 activiti 背后的人的[博客文章。](http://stacktrace.be/blog/2013/03/dynamic-process-creation-and-deployment-in-100-lines/)我做了一个基于此[修改进程的编译器，它可以工作。](https://github.com/esseti/BPMN4Crowd-Compiler)

# php - 变量变量+字段中的对象

> ID：10216210
> 
> 赞同：0
> 
> 时间：2012-04-18T19:06:34.580
> 
> 标签：php, oop, variable-variables

我正在尝试对可变变量做一些事情，但我遇到了一个对象问题。想象一下这个类设置：

```
class A
{
  public $field = 10;
}

class B
{
  public $a;

  public function __construct()
  {
    $this->a = new A();
  }
} 
```

现在每个人都知道这段代码有效：

```
$a = new A();
$var = 'field';
echo $a->$var; // this will echo 10 
```

有没有可能我可以做这样的事情？：

```
$b = new B();
$var = 'a->field';
echo $b->$var; // this fails 
```

注意：任何不使用 eval 功能的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:15:10.130

使用闭包怎么样？

```
$getAField = function($b) {
    return $b->a->field;
};

$b = new B();
echo $getAField($b); 
```

不过，它只能在较新版本的 PHP 中实现。

或者，作为更通用的版本，如下所示：

```
function getInnerField($b, $path) { // $path is an array representing chain of member names
    foreach($path as $v)
        $b = $b->$v;
    return $b;
}

$b = new B();
echo getInnerField($b, array("a", "field")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:25:22.653

你可以在你的类上编写一个自定义的 __get 方法来访问 childrens 属性。这有效：

```
class A
{
  public $field = 10;
}

class B
{
  public $a;

  public function __construct()
  {
    $this->a = new A();
  }

  public function __get($property) {
    $scope = $this;

    foreach (explode('->', $property) as $child) {
      if (isset($scope->$child)) {
    $scope = $scope->$child;
      } else {
    throw new Exception('Property ' . $property . ' is not a property of this object');
      }
    }

    return $scope;
  }
}

$b = new B();
$var = 'a->field';
echo $b->$var; 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:13:45.933

我不推荐它，但你可以使用 eval：

```
$b = new B();
$var = 'a->field';
eval( 'echo $b->$'.$var ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:23:07.300

我猜这也应该有效：

```
$b = new B();
$var1 = 'a'; 
$var2 = 'field'

echo ($b->$var1)->$var2; 
```

# java - 建立 TCP 连接但未收到 OK 时如何使 Javamail POP3 超时

> ID：10216214
> 
> 赞同：0
> 
> 时间：2012-04-18T19:06:46.530
> 
> 标签：java, jakarta-mail

```
Session l_session = Session.getDefaultInstance(l_props);
final Store l_store = l_session.getStore(l_protocol);
l_store.connect(a_req.getServer(), a_req.getPort(), a_req.getUsername(), a_req.getPassword()); 
```

与 POP3 服务器的 TCP 连接已建立，但从未收到来自服务器的第一个“OK”。我想要某种超时异常，但程序只是永远等待。调试输出看起来像

```
DEBUG: setDebug: JavaMail version 1.4.1
DEBUG: getProvider() returning javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsy stems, Inc]
DEBUG POP3: connecting to host "localhost", port 9898, isSSL false 
```

我已将 mail.pop3.timeout 和 mail.pop3.connectiontimeout 设置为合理的值，但从未抛出超时。在这种情况下如何使其超时？

我有一个非常粗略的解决方法，它使用连接到 Store 的 ConnectionListener 并在建立连接时设置一个标志（这似乎是在初始 OK 和凭据之后）和一个单独的观察者线程。Store 上的 close() 方法似乎是 synchronized() 所以当我检测到它已经太长时，我调用了 System.exit(1)。

我使用 linux 命令“nc -l 9898”来模拟从不以“OK”回答的 POP3 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:33:50.760

尝试将 Session.getDefaultInstance 更改为 Session.getInstance；阅读 javadocs 以了解差异 - 您的属性设置可能会被忽略。

您使用的是相对较旧的 JavaMail 版本，因此您可以尝试升级以查看是否有帮助。mail.pop3.timeout 属性应该这样做。

# php - 将未来选择的日期插入数据库 PHP

> ID：10216219
> 
> 赞同：0
> 
> 时间：2012-04-18T19:07:16.107
> 
> 标签：php, database, date, post, insert

对于学校，我必须制作这个简单的待办事项网站。我基本上已经完成了所有工作，但我似乎无法让“约会”工作。

我的意思是我希望用户能够选择到期日期。例如，现在是 2012 年 4 月 18 日，用户正在制定一项任务，并希望在 2012 年 4 月 22 日之前完成。这应该是到期日期，用户应该能够选择该日期。我什至不需要在时间结束时删除任务，而只是在任务页面上显示这是到期日期。

我完全不知道如何做到这一点。我正在考虑 dmY 的输入字段并通过发布类似这样的内容来简化它

`$date = $_POST['date'];`

如果有人知道我在哪里可以找到为此的预制脚本，我肯定会非常感激，因为它已经困扰我好几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:26:18.137

如果你只是想要一些简单的东西：

标记：

```
<input type="date" name="date" /> 
```

PHP：

```
try {
    $dt = new DateTime($_POST['date']);
    $dateString = $dt->format('Y-m-d H:i:s');
} catch (\Exception $e) {
    // If we get here, the user provided an invalid date
}

// Do something with $dateString here (like put it in the database) 
```

请注意，`date`输入类型将优雅地降级为`text`不支持它的设备/浏览器的输入。如果您愿意，您可以选择在此之上实现某种 JS 日期选择器，但这不是必需的。

# sencha-touch-2 - 将html动态添加到面板

> ID：10216225
> 
> 赞同：1
> 
> 时间：2012-04-18T19:07:38.387
> 
> 标签：sencha-touch-2

我正在 sencha touch2 中设计一个应用程序。我的 JS 文件中有一个面板对象。我需要为此组件动态设置 text/html。该组件的存储是在应用程序级别定义的。以下是我解决的问题：

```
Ext.define('class_name',{

....

config : {

  pnlObj : null,

  ...
}

initialize : function() {

    this.config.pnlObj = Ext.create('Ext.Panel');
    var store = Ext.data.Storemanager.lookup('some_store');
    store.on('load',this.loadStore,this);
    this.setItems([{
     //some items here
     {
     flex : 2,
//   id : 'somepnl',

     config : this.config.pnlObj
}

}]);

},

loadStore : function(store, rec) {

     var text = rec.get('text');
     var panel = this.config.pnlObj;
//   var panel = Ext.getCmp('somepanl');
     panel.setHtml(text);

}

}); 
```

当我使用 Firebug 控制台检查检查元素时，我可以找到那里添加的面板。但我无法动态设置 html。那里没有设置 html 文本。我尝试使用不工作的 panel.add() 和 panel.setItems() 方法添加它。如果我给那个面板（这里的 somepanel）一个 id 并尝试使用 Ext.getCmp('smpanel') 访问它，那么在这种情况下它工作正常。我发现使用 Ext.getCmp() 不是一个好习惯，我想避免它，因为它可能会在将来某个地方破坏我的代码。

我想我实例化面板对象的方式会产生一些问题。有人可以建议最好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T21:10:26.393

在 Sencha Touch 2 中操作组件的推荐方法是使用**controller**、 through`refs`和`control`configs 。例如，您的面板有这样的配置：`xtype:'myPanel'`，然后在您的控制器中：

```
refs: {
   myPanel: 'myPanel'
}

control:{
   myPanel: {
     on_an_event: 'set_html_for_my_panel'
   }
} 
```

最后，定义你的函数：

```
set_html_for_my_panel: function()
{
   this.getMyPanel().setHtml('my_updated_html');
} 
```

P/S：在幕后，Sencha Touch 2`Ext.ComponentQuery`用于`refs`控制器

# c# - C# 将大于 Int64 的数字转换为 HexaDecimal

> ID：10216227
> 
> 赞同：4
> 
> 时间：2012-04-18T19:07:52.847
> 
> 标签：c#, .net, hex, int64

我正在尝试在 C# 中将一个大数字（例如：9407524828459565063）转换为十六进制（例如：828E3DFD00000000）。

问题是该数字大于 Int64 的最大值。

我到处查找，找不到有效的解决方案。

这里有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T19:10:57.027

我会使用 System.Numerics.BigInteger 类来做到这一点。确切的解决方案取决于您拥有此数字的格式：字符串、双精度、其他。

如果是字符串 ( `s`)：

```
var bigInt = BigInteger.Parse(s);
var hexString = bigInt.ToString("x"); 
```

如果是双 ( `d`)：

```
var bigInt = new BigInteger(d);
var hexString = bigInt.ToString("x"); 
```

……等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:12:17.447

也许：

```
BigInteger b = 9407524828459565063;
var hex = b.ToString("X2"); 
```

或者

```
ulong l = 9407524828459565063;
var hex = l.ToString("X2"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:11:37.680

如果您使用的是 .NET 4.0，您可能会查看 BigInteger 类：

[http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)

```
 BigInteger bi = new BigInteger();
  bi = 9407524828459565063;
  string bix = bi.ToString("X"); 
```

# c# - taglib# 无法保存标签

> ID：10216230
> 
> 赞同：1
> 
> 时间：2012-04-18T19:08:01.210
> 
> 标签：c#, taglib-sharp

我尝试制作将加载和编辑 id3 标签的应用程序。我决定为此使用 taglib。一切正常，但是当我尝试保存已编辑的标签时，它会出现 IOException“进程无法访问文件......”。继承人代码：

```
 TagLib.File f = TagLib.File.Create(cesta);
        f.Tag.Year = 1999;//uint.Parse(textBox1.Text);
        f.Save(); 
```

以前我只有加载程序：

```
 TagLib.File f = TagLib.File.Create(path);
        string rok = f.Tag.Year.ToString();
        textBox1.Text = rok;
        string album = f.Tag.Album;
        textBox2.Text = album;
        string[] artist = f.Tag.Performers;
        string autor = "";
        for (int i = 0; i < artist.Length; i++)
        {
            autor = autor + artist[i];
        }
        textBox3.Text = autor; 
```

有谁知道，我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:34:50.027

如果您尝试通过重新打开现有文件来对其进行编辑，请确保您之前已将其关闭。另外，看看你是否可以用 using 块来封装你所有的文件访问代码。例如：

```
using(TagLib.File f = TagLib.File.Create(path))
{
    // do work
} 
```

# c++ - 范围 g++ 迂腐编译

> ID：10216232
> 
> 赞同：2
> 
> 时间：2012-04-18T19:08:04.063
> 
> 标签：c++, gcc, include, gcc-pedantic

是否可以限制某些文件的 -pedantic 开关？例如，我使用 alsa-lib 编译东西，我参考标准

```
#include <alsa/asoundlib.h> 
```

但是 -pedantic 对此文件感到恐慌。我愿意并有兴趣纠正我自己代码中的警告和奇怪之处，但不是 alsa 和其他不相关的第三方。

有没有办法确定 -pedantic 的使用范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T21:14:10.707

通常，GCC 会抑制系统标头中的警告，除非您明确指定`-Wsystem-headers`. 通常，包含在`<>`from中的文件`/usr/include`被视为系统头文件。您的问题表明您特别添加了一些使 GCC*不*将其视为系统标头的内容。您尚未指定您正在使用哪些编译器选项，但您是否添加了任何`-I*`可能导致`/usr/include`被视为非系统头目录的无意义选项？

如果所有其他方法都失败了，您可以使用`-isystem`将目录实际添加为系统头目录，但您在这里不需要它。

**编辑**：重新阅读问题后，如果您在非标准路径中安装了 alsa-lib，那么我认为您不需要该`-isystem`选项的说法可能是错误的：它可能正是您所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:17:57.083

您可以将*任何*编译键限定为一个*编译单元*。

显然，如果您有多个编译单元，您可以使用不同的键来编译它们：

```
g++ -pedantic file_that_does_not_use_ugly_alsa.cpp
g++ file_that_uses_ugly_alsa.cpp 
```

但是你不能*在*编译单元内限定键：代码在编译之前被预处理，所有的头文件都是内联的，实际上在宏替换之后你可能会发现*你的*代码使用了一些东西，这使得编译器恐慌。

# objective-c - 如何使用主委托类指针 .storyboard 对象？

> ID：10216233
> 
> 赞同：0
> 
> 时间：2012-04-18T19:08:08.070
> 
> 标签：objective-c, ios, cocoa-touch, storyboard

我有这个方案：

> 我创建了一个故事板并将 UIViewController 子类化为`MyViewController`并将其链接到正确的类。现在我可以完全访问这个控制器了。但...

我想向这个对象发送一条消息，`application:didFinishLaunchingWithOptions:`但我不知道该怎么做。因为我没有在代码中创建接口，所以无法链接。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:14:54.153

您可以使用下面的代码获取对 UIViewController 的引用，假设它是唯一的 UIViewController。[[navigationController viewControllers] 返回视图控制器数组，因此您可以获取所需的视图控制器。

```
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController; 
    MyViewController *myViewController = (MyViewController *)[[navigationController viewControllers] objectAtIndex:0]; 
```

我很好奇您是否可以使用界面构建器（故事板）并控制从视图控制器到委托 .h 文件的拖动来创建 IBOutlet ......我现在没有权限尝试，但我回家后会尝试....我无法使用拖动方法...

# android - 通过 NFC 检查同一个应用程序是否在不同的 Android 设备上运行

> ID：10216236
> 
> 赞同：-1
> 
> 时间：2012-04-18T19:08:18.507
> 
> 标签：android, nfc

我必须为启用了 NFC 的 Android 设备开发一个 Android 应用程序，如果两部手机都靠近，则监听表明手机由于 NFC 而靠近的意图。请就此提出任何解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:02:33.243

由于您没有提供足够的信息来回答您的问题，我只能猜测您要达到的目标。

您可以在将发送 NDEF 消息的每台设备上创建一个应用程序。如果两部手机都安装了此应用程序，您的 NDEF 消息处理`Activity`将`Intent`在另一台运行您的应用程序的启用 NFC 的手机关闭时启动。

你真的应该**彻底阅读**[这里](http://developer.android.com/guide/topics/nfc/nfc.html)提供的关于 NFC 的 android 开发者指南中提供给你的基本文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:02:10.937

对于 ICS (Android 4) 上的 Android 应用程序，您可以在通过 Android Beam 共享的 NDEF 消息中使用[Android 应用程序记录（最好作为消息中的最后一条记录）。](http://developer.android.com/reference/android/nfc/NdefRecord.html#createApplicationRecord%28java.lang.String%29)这将保证只有您的应用程序会在其他设备上收到消息（或者用户将被引导到 Google Play 商店应用程序进行安装）。

# apache - Apache 与 tomcat 的负载平衡：失去会话

> ID：10216243
> 
> 赞同：0
> 
> 时间：2012-04-18T19:09:03.067
> 
> 标签：apache, load-balancing, tomcat7

我正在使用代理通行证来平衡我的工作人员。不知何故，我的 tomcat 会话丢失并重新创建。我尝试了独立的tomcat，它工作正常，但不适用于负载均衡器。请帮忙。

> ```
>  <Proxy *>
>       Order deny,allow
>       Allow from all
>     </Proxy>
>     ProxyPass /balancer-manager !
>     ProxyPass /images !
>     ProxyPass / balancer://mycluster/ 
> 
>     ProxyPassReverse / balancer://mycluster/
> 
>     <Proxy balancer://mycluster>
>       BalancerMember ajp://192.168.70.6:9061 route=qa1
>       ProxySet lbmethod=byrequests
>     </Proxy>
>     <Location /balancer-manager>
>       SetHandler balancer-manager
>     </Location>
>     <Directory "/Library/WebServer/Documents">
>       AllowOverride all   
>     </Directory> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:02:06.200

我终于弄清楚了问题的原因。我有另一台服务器，它被来自站点的绝对 URL 调用，导致工作人员 JSESSIONID 被覆盖。

# javascript - 你能同时使用 jQuery(this) 和 :after 吗？

> ID：10216245
> 
> 赞同：1
> 
> 时间：2012-04-18T19:09:08.727
> 
> 标签：javascript, jquery

这不起作用，但它向您展示了我想要做的事情：

```
$(this+":after").css('content', 'something'); 
```

基本上，我希望我的函数能够动态地将一个`:after`元素添加到各种匹配的元素中。

有没有正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:12:16.120

您不能在 JavaScript 中使用伪元素（jQuery`:after`也是`:before`JavaScript！）。

但是，您可以简单地执行以下操作`.append()`：

```
$(this).append('something'); 
```

如果这不是你想要的，你可以把它放在你的 CSS 中：

```
something:after { content: attr(data-after); } 
```

然后你可以使用`.attr('data-after', 'whatever')`来修改`:after`“元素”中使用的文本。请注意，您不能使用`.data('after', 'whatever')`它，因为它只*读取*属性但从不设置它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:19:01.840

$(this).after('content'); 是你要找的

[http://api.jquery.com/after/](http://api.jquery.com/after/)

# asp.net - 使用按钮单击事件加载用户控件

> ID：10216248
> 
> 赞同：0
> 
> 时间：2012-04-18T19:09:20.367
> 
> 标签：asp.net

现在我正在尝试将父页面上的按钮用于用户控件。

usercontrol上有一个checkboxlist，它的datasource是从数据库中读取的

复选框列表未正确加载。它像是：

> OnlineRenewa_draft1.tbl_LanguageChoices OnlineRenewa_draft1.tbl_LanguageChoices OnlineRenewa_draft1.tbl_LanguageChoices OnlineRenewa_draft1.tbl_LanguageChoices OnlineRenewa_draft1.tbl_LanguageChoices OnlineRenewa_draft1.tbl_LanguageChoices

是关于回发问题吗？任何想法？谢谢

```
 protected void Page_Load(object sender, EventArgs e)
    {
        //if (!IsPostBack) { 
            List<tbl_LanguageChoices> LanguageList = ((List<tbl_LanguageChoices>)Cache["LanguageChoise"]);

            otherlanguage.DataSource = LanguageList;
            otherlanguage.DataBind();
            otherlanguage.DataTextField = "Languages";
            otherlanguage.DataValueField = "GUID";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:14:21.907

您是否设置了[DisplayMember](http://msdn.microsoft.com/en-us/library/yx9dzztb%28v=vs.90%29.aspx)的属性`CheckBoxList`？您需要将其设置为已设置为数据源的对象的列/属性。或者正如 MSDN 所说：

> 获取或设置一个字符串，该字符串指定要显示其内容的列表框中包含的对象的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:19:59.627

您首先将复选框列表的数据绑定到`DataSource`然后设置`DateValueField`和`DataValueField`。`DataBind`应该是最后一步。

```
otherlanguage.DataSource = LanguageList;
otherlanguage.DataTextField = "Languages";
otherlanguage.DataValueField = "GUID";
otherlanguage.DataBind(); 
```

# c++ - 对头文件和实现文件之间的关系感到困惑

> ID：10216252
> 
> 赞同：0
> 
> 时间：2012-04-18T19:09:41.630
> 
> 标签：c++, compilation, compiler-errors, g++, mingw

我正在使用 Code::Blocks。当我创建一个头文件`foo.h`并在其中提出声明**和实现**时，编译工作正常。创建一个`foo.cpp`文件并在其中放入任何内容仍然有效。但是，当我在实现文件中包含头文件，但将实现保留在头文件中时，我收到一个关于`multiple declarations`.

**我当前项目的示例**

```
// header-file `GKit/math/blendprocs.cpp`
#include "GKit/utils/Color.h"

#ifndef _GKIT_MATH_BLENDPROCS_H_
#define _GKIT_MATH_BLENDPROCS_H_

    namespace GKit {
        namespace math {

            void blendAoverB(GKIT_COLORBLENDPROC_ARGSX) {
                D.a = A.a + (1 - A.a) * B.a;
                D.r = (A.a * A.r + (1 - A.a) * B.a * B.r) / D.a;
                D.g = (A.a * A.g + (1 - A.a) * B.a * B.g) / D.a;
                D.b = (A.a * A.b + (1 - A.a) * B.a * B.b) / D.a;
                GKIT_UTILS_COLOR_NORMALIZE(D);
            }

        }
    }

#endif // _GKIT_MATH_BLENDPROCS_H_ 
```

```
// implementation-file `GKit/math/blendprocs.cpp`
#include "GKit/math/blendprocs.h" 
```

```
// Compilation output
-------------- Build: Debug in GKit ---------------

Compiling: GKit\math\blendprocs.cpp
Linking console executable: bin_debug\GKit.exe
build_debug\GKit\math\blendprocs.o:C:\Users\niklas\Desktop\GKit/./GKit/math/blendprocs.h:10: multiple definition of `GKit::math::blendAoverB(GKit::utils::Color const&, GKit::utils::Color const&, GKit::utils::Color&)'
build_debug\main.o:C:\Users\niklas\Desktop\GKit/./GKit/math/blendprocs.h:10: first defined here
collect2: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 0 seconds)
2 errors, 0 warnings 
```

你能帮我理解这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:15:57.000

在您的头文件中，您通常只会输入：

```
// header-file `GKit/math/blendprocs.cpp`
#ifndef _GKIT_MATH_BLENDPROCS_H_
#define _GKIT_MATH_BLENDPROCS_H_

#include "GKit/utils/Color.h"

namespace GKit {
    namespace math {

        void blendAoverB(GKIT_COLORBLENDPROC_ARGSX);

    }
}

#endif // _GKIT_MATH_BLENDPROCS_H_ 
```

然后在您的 CPP 文件中放置实际的实现：

```
// implementation-file `GKit/math/blendprocs.cpp`
#include "GKit/math/blendprocs.h"

namespace GKit {
    namespace math {

        void blendAoverB(GKIT_COLORBLENDPROC_ARGSX) {
            D.a = A.a + (1 - A.a) * B.a;
            D.r = (A.a * A.r + (1 - A.a) * B.a * B.r) / D.a;
            D.g = (A.a * A.g + (1 - A.a) * B.a * B.g) / D.a;
            D.b = (A.a * A.b + (1 - A.a) * B.a * B.b) / D.a;
            GKIT_UTILS_COLOR_NORMALIZE(D);
        }

    }
} 
```

否则，您的函数的实现将在所有包含头文件的 CPP 文件中结束，这会在链接器尝试解析地址时混淆，`blendAoverB`因为它可以在相应 CPP 文件包含头文件的所有目标文件中找到它-文件与实现。

附带说明一下，最好将包含保护（`#ifndef _GKIT_MATH_BLENDPROCS_H_`放在头文件中的其他任何内容之前（可能用于注释除外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:16:27.273

您在标题中有一个定义。该定义将在包含该标头的任何源文件中重复；因为在程序中有多个定义通常是错误的，所以构建失败。这被称为单一定义规则，有时也被称为 ODR。

两个最佳选择是：

*   将定义移动到源文件中，只在标题中留下一个声明，或者
*   添加`inline`到定义中；这放宽了规则并允许程序中有多个定义，只要它们都是相同的。

此外，您不应该为包含防护使用保留名称；您应该`_`从`_GKIT_MATH_BLENDPROCS_H_`;中删除首字母 最好将这些守卫放在标题的开头，在任何`#include`指令之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:16:29.477

您应该内联您的实现或将实现放在 cpp 文件中，而不是两者兼而有之。

```
// header "GKit/math/blendprocs.h"
#pragma once

#include "GKit/utils/Color.h"

namespace GKit {
        namespace math {
            void blendAoverB(GKIT_COLORBLENDPROC_ARGSX);
        }
    }

// implementation "GKit/math/blendprocs.cpp"
#include "GKit/math/blendprocs.h"

namespace GKit {
        namespace math {

            void blendAoverB(GKIT_COLORBLENDPROC_ARGSX) {
                D.a = A.a + (1 - A.a) * B.a;
                D.r = (A.a * A.r + (1 - A.a) * B.a * B.r) / D.a;
                D.g = (A.a * A.g + (1 - A.a) * B.a * B.g) / D.a;
                D.b = (A.a * A.b + (1 - A.a) * B.a * B.b) / D.a;
                GKIT_UTILS_COLOR_NORMALIZE(D);
            }

        }
    } 
```

或者使用`inline`关键字将其正确内联在标题中。

```
// header "GKit/math/blendprocs.h"
#pragma once

#include "GKit/utils/Color.h"

    namespace GKit {
        namespace math {
            inline void blendAoverB(GKIT_COLORBLENDPROC_ARGSX) {
                D.a = A.a + (1 - A.a) * B.a;
                D.r = (A.a * A.r + (1 - A.a) * B.a * B.r) / D.a;
                D.g = (A.a * A.g + (1 - A.a) * B.a * B.g) / D.a;
                D.b = (A.a * A.b + (1 - A.a) * B.a * B.b) / D.a;
                GKIT_UTILS_COLOR_NORMALIZE(D);
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:16:33.967

这正是消息所说的。您应该熟悉内联和 ODR。你不能有多个定义，它是针对 ODR 的。我猜你的 blendprocs.cpp 不止一次包含在不同的编译单元中。它与[为什么我的编译防护不能防止多个定义包含有关？](https://stackoverflow.com/questions/249701/why-arent-my-compile-guards-preventing-multiple-definition-inclusions)

网上争议解决：

[http://en.wikipedia.org/wiki/One_Definition_Rule](http://en.wikipedia.org/wiki/One_Definition_Rule)

# perl - 使用单个模块并获得 Moose 以及多个 MooseX 扩展

> ID：10216256
> 
> 赞同：5
> 
> 时间：2012-04-18T19:10:00.160
> 
> 标签：perl, moose

假设我有一个包含一堆基于[Moose](http://search.cpan.org/dist/Moose/)的类的代码库，我希望它们都使用一组通用的[MooseX::*](http://search.cpan.org/search?query=MooseX&mode=dist)扩展模块。但我不希望每个基于 Moose 的课程都必须像这样开始：

```
package My::Class;

use Moose;
use MooseX::Aliases;
use MooseX::HasDefaults::RO;
use MooseX::StrictConstructor;
... 
```

相反，我希望每节课都像这样开始：

```
package MyClass;

use My::Moose; 
```

并让它与上述完全等价。

我第一次尝试实现这一点是基于[Mason::Moose](http://search.cpan.org/dist/Mason/lib/Mason/Moose.pm) ( [source](http://cpansearch.perl.org/src/JSWARTZ/Mason-2.17/lib/Mason/Moose.pm) ) 使用的方法：

```
package My::Moose;

use Moose;
use Moose::Exporter;
use MooseX::Aliases();
use MooseX::StrictConstructor();
use MooseX::HasDefaults::RO();
use Moose::Util::MetaRole;

Moose::Exporter->setup_import_methods(also => [ 'Moose' ]);

sub init_meta {
    my $class = shift;
    my %params = @_;

    my $for_class = $params{for_class};

    Moose->init_meta(@_);
    MooseX::Aliases->init_meta(@_);
    MooseX::StrictConstructor->init_meta(@_);
    MooseX::HasDefaults::RO->init_meta(@_);

    return $for_class->meta();
} 
```

但是这种方法不被 irc.perl.org 上 #moose IRC 频道中的人们推荐，而且它并不总是有效，具体取决于`MooseX::*`模块的组合。例如，尝试使用`My::Moose`上面的类来制作`My::Class`这样的：

```
package My::Class;

use My::Moose;

has foo => (isa => 'Str'); 
```

加载类时导致以下错误：

```
Attribute (foo) of class My::Class has no associated methods (did you mean to provide an "is" argument?)
 at /usr/local/lib/perl5/site_perl/5.12.1/darwin-2level/Moose/Meta/Attribute.pm line 1020.
    Moose::Meta::Attribute::_check_associated_methods('Moose::Meta::Class::__ANON__::SERIAL::2=HASH(0x100bd6f00)') called at /usr/local/lib/perl5/site_perl/5.12.1/darwin-2level/Moose/Meta/Class.pm line 573
    Moose::Meta::Class::add_attribute('Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x100be2f10)', 'foo', 'isa', 'Str', 'definition_context', 'HASH(0x100bd2eb8)') called at /usr/local/lib/perl5/site_perl/5.12.1/darwin-2level/Moose.pm line 79
    Moose::has('Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x100be2f10)', 'foo', 'isa', 'Str') called at /usr/local/lib/perl5/site_perl/5.12.1/darwin-2level/Moose/Exporter.pm line 370
    Moose::has('foo', 'isa', 'Str') called at lib/My/Class.pm line 5
    require My/Class.pm called at t.pl line 1
    main::BEGIN() called at lib/My/Class.pm line 0
    eval {...} called at lib/My/Class.pm line 0 
```

MooseX [::HasDefaults::RO](http://search.cpan.org/dist/MooseX-HasDefaults/lib/MooseX/HasDefaults.pm)应该防止这个错误，但它显然没有被要求完成它的工作。注释掉`MooseX::Aliases->init_meta(@_);`“修复”问题的行，但是a）这是我想要使用的模块之一，并且b）只是进一步强调了这个解决方案的错误。（特别是，`init_meta()`应该只调用一次。）

所以，我对建议持开放态度，完全忽略了我未能实现这一点的尝试。只要给出在这个问题开始时描述的结果，任何策略都是受欢迎的。

* * *

根据@Ether 的回答，我现在有以下内容（这也不起作用）：

```
package My::Moose;

use Moose();
use Moose::Exporter;
use MooseX::Aliases();
use MooseX::StrictConstructor();
use MooseX::HasDefaults::RO();

my %class_metaroles = (
    class => [
        'MooseX::StrictConstructor::Trait::Class',
    ],

    attribute => [
        'MooseX::Aliases::Meta::Trait::Attribute', 
        'MooseX::HasDefaults::Meta::IsRO',
     ],
);

my %role_metaroles = (
    role =>
        [ 'MooseX::Aliases::Meta::Trait::Role' ],
    application_to_class =>
        [ 'MooseX::Aliases::Meta::Trait::Role::ApplicationToClass' ],
    application_to_role =>
        [ 'MooseX::Aliases::Meta::Trait::Role::ApplicationToRole' ],
);

if (Moose->VERSION >= 1.9900) {
    push(@{$class_metaroles{class}},
        'MooseX::Aliases::Meta::Trait::Class');

    push(@{$role_metaroles{applied_attribute}}, 
        'MooseX::Aliases::Meta::Trait::Attribute',
        'MooseX::HasDefaults::Meta::IsRO');
}
else {
    push(@{$class_metaroles{constructor}},
        'MooseX::StrictConstructor::Trait::Method::Constructor',
        'MooseX::Aliases::Meta::Trait::Constructor');
}

*alias = \&MooseX::Aliases::alias;

Moose::Exporter->setup_import_methods(
    also => [ 'Moose' ],
    with_meta => ['alias'],
    class_metaroles => \%class_metaroles,
    role_metaroles => \%role_metaroles,
); 
```

使用这样的示例类：

```
package My::Class;

use My::Moose;

has foo => (isa => 'Str'); 
```

我收到此错误：

```
Attribute (foo) of class My::Class has no associated methods (did you mean to provide an "is" argument?) at ... 
```

使用这样的示例类：

```
package My::Class;

use My::Moose;

has foo => (isa => 'Str', alias => 'bar'); 
```

我收到此错误：

```
Found unknown argument(s) passed to 'foo' attribute constructor in 'Moose::Meta::Attribute': alias at ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T18:39:57.830

我可能会因此而大发雷霆，但如有疑问，请撒谎:)

```
package MyMoose;                                                                                                                                                               

use strict;
use warnings;
use Carp 'confess';

sub import {
    my $caller = caller;
    eval <<"END" or confess("Loading MyMoose failed: $@");
    package $caller;
    use Moose;
    use MooseX::StrictConstructor;
    use MooseX::FollowPBP;
    1;
END
}

1; 
```

通过这样做，您正在将 use 语句评估到调用包中。换句话说，您在向他们撒谎，告诉他们他们使用的是什么类。

在这里你声明你的人：

```
package MyPerson;                                                                                                                                                              
use MyMoose;

has first_name => ( is => 'ro', required => 1 );
has last_name  => ( is => 'rw', required => 1 );

1; 
```

和测试！

```
use lib 'lib';                                                                                                                                                                 
use MyPerson;
use Test::Most;

throws_ok { MyPerson->new( first_name => 'Bob' ) }
qr/\QAttribute (last_name) is required/,
  'Required attributes should be required';

throws_ok {
    MyPerson->new(
        first_name => 'Billy',
        last_name  => 'Bob',
        what       => '?',
    );
}
qr/\Qunknown attribute(s) init_arg passed to the constructor: what/,
  '... and unknown keys should throw an error';

my $person;
lives_ok { $person = MyPerson->new( first_name => 'Billy', last_name => 'Bob' ) }
'Calling the constructor with valid arguments should succeed';

isa_ok $person, 'MyPerson';
can_ok $person, qw/get_first_name get_last_name set_last_name/;
ok !$person->can("set_first_name"),
  '... but we should not be able to set the first name';
done_testing; 
```

以及测试结果：

```
ok 1 - Required attributes should be required
ok 2 - ... and unknown keys should throw an error
ok 3 - Calling the constructor with valid arguments should succeed
ok 4 - The object isa MyPerson
ok 5 - MyPerson->can(...)
ok 6 - ... but we should not be able to set the first name
1..6 
```

让我们保守这个小秘密，好吗？:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:54:21.127

如前所述，您不应该直接调用其他扩展的`init_meta`方法。相反，您应该基本上*内联*这些扩展的`init_meta`方法：将所有这些方法的功能组合到您自己的`init_meta`. 这是脆弱的，因为现在您将模块与其他模块的内部联系在一起，这些内部随时可能发生变化。

例如结合[MooseX::HasDefaults::IsRO](https://metacpan.org/module/MooseX%3a%3aHasDefaults)，[MooseX::StrictConstructor](http://metacpan.org/module/MooseX%3a%3aStrictConstructor)和[MooseX::](http://metacpan.org/module/MooseX%3a%3aAliases) Aliases ，你会做这样的事情~~（警告：未经测试）~~（现已测试！）：

```
package Mooseish;

use Moose ();
use Moose::Exporter;
use MooseX::StrictConstructor ();
use MooseX::Aliases ();

my %class_metaroles = (
    class => ['MooseX::StrictConstructor::Trait::Class'],
    attribute => [
        'MooseX::Aliases::Meta::Trait::Attribute',
        'MooseX::HasDefaults::Meta::IsRO',
    ],
);
my %role_metaroles = (
    role =>
        ['MooseX::Aliases::Meta::Trait::Role'],
    application_to_class =>
        ['MooseX::Aliases::Meta::Trait::Role::ApplicationToClass'],
    application_to_role =>
        ['MooseX::Aliases::Meta::Trait::Role::ApplicationToRole'],
);

if (Moose->VERSION >= 1.9900) {
    push @{$class_metaroles{class}}, 'MooseX::Aliases::Meta::Trait::Class';
    push @{$role_metaroles{applied_attribute}}, 'MooseX::Aliases::Meta::Trait::Attribute';
}
else {
    push @{$class_metaroles{constructor}},
        'MooseX::StrictConstructor::Trait::Method::Constructor',
        'MooseX::Aliases::Meta::Trait::Constructor';
}

*alias = \&MooseX::Aliases::alias;

Moose::Exporter->setup_import_methods(
    also => ['Moose'],
    with_meta => ['alias'],
    class_metaroles => \%class_metaroles,
    role_metaroles => \%role_metaroles,
);

1; 
```

这可以用这个类和测试来测试：

```
package MyObject;
use Mooseish;

sub foo { 1 }

has this => (
    isa => 'Str',
    alias => 'that',
);

1; 
```

* * *

```
use strict;
use warnings;
use MyObject;
use Test::More;
use Test::Fatal;

like(
    exception { MyObject->new(does_not_exist => 1) },
    qr/unknown attribute.*does_not_exist/,
    'strict constructor behaviour is present',
);

can_ok('MyObject', qw(alias this that has with foo));

my $obj = MyObject->new(this => 'thing');
is($obj->that, 'thing', 'can access attribute by its aliased name');

like(
    exception { $obj->this('new value') },
    qr/Cannot assign a value to a read-only accessor/,
    'attribute defaults to read-only',
);

done_testing; 
```

哪个打印：

```
ok 1 - strict constructor behaviour is present
ok 2 - MyObject->can(...)
ok 3 - can access attribute by its aliased name
ok 4 - attribute defaults to read-only
1..4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T00:31:15.270

只要您要使用的 MooseX 都表现良好并使用[Moose::Exporter](https://metacpan.org/module/Moose%3a%3aExporter)，您就可以使用 Moose::Exporter 为您创建一个行为类似于 Moose 的包：

```
package MyMoose;

use strict;
use warnings;

use Moose::Exporter;
use MooseX::One ();
use MooseX::Two ();

Moose::Exporter->setup_import_methods(
    also => [ qw{ Moose MooseX::One MooseX::Two } ],
);

1; 
```

请注意，我们还使用 Moose 扩展使用 Moose::Exporter 的包的名称（通常是扩展的主包），而不是使用任何特征应用程序位。Moose::Exporter 在幕后处理所有这些。

这里的优势？一切都按预期工作，所有来自 Moose 和扩展的糖都已安装，并且可以通过“no MyMoose;”删除。

我应该在这里指出，一些扩展与其他扩展不能很好地配合，通常是因为它们没有预料到它们将被要求与其他扩展和谐共存。幸运的是，这些变得越来越少见。

对于更大规模的示例，请查看CPAN 上的[Reindeer](https://metacpan.org/release/Reindeer)，它收集了几个扩展并以连贯一致的方式将它们集成在一起。

# php - 表格内表格替代

> ID：10216257
> 
> 赞同：0
> 
> 时间：2012-04-18T19:10:01.433
> 
> 标签：php, forms, html

我有一个相当奇怪的问题。我知道表单中的表单不是有效的 HTML。但我需要一个允许我做类似事情的解决方案。

*   我使用'tabifier' javascript 库来创建标签。通过为每个选项卡使用具有特殊 id 的 div 创建不同的选项卡。
*   我有一个围绕所有选项卡的主要表单，如下所示：

    ```
    <form id=......>
       <div id=...>
       </div>
       <div id=...>
       </div>
    </form> 
    ```

*   在其中一个选项卡中，我需要创建一个使用表单的文件上传系统。如果我将此表单放在“主表单”之外，它不会显示在选项卡布局中，而是单独显示。

    ```
    <form id=......>
       <div id=...>
       </div>
       <div id=...>
       </div>
       <div id='fileuploads'>
            <form id=......>
            </form>
       </div>
    </form> 
    ```

有什么办法可以使这项工作？

*   我尝试将文件上传作为最后一个子选项卡移动，然后在最后一个子选项卡之前结束主表单，但是这样表单在选项卡 div 内结束。这也不是有效的html。
*   我猜想 document.getelementbyid(div).innerhtml 并插入这样的表单也行不通。

更新：

感谢您提供的答案，尽管我不太了解如何完全实施它们。我想出了另一个主意。

如果我只是创建文件上传输入字段，但没有用表单包围，然后添加一个调用 js 函数的按钮。此函数将文件上传的值放在 div 和 sumbits 之外的“不可见形式”中。

那会是一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:34:02.820

你可以在这里使用一个技巧。首先让原始包装形式保持不动。

然后，如果您在 fileupload 表单中放置一个提交按钮，请设置一个 onsubmit 事件，然后在发送表单之前在 fileuploads 选项卡周围创建一个新表单，然后删除外部表单。如果您在此之后使用新表单 ID 发送表单（原型中的 $(form_id).submit 或普通 JavaScript 中的 document.getElementById(form_id).submit），则新表单将在没有外部表单元素的情况下发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:16:05.653

将您的文件上传控件放在外部形式中：

```
<form id=...>
    <!-- other tabs go here -->
    <div id="fileuploads">
        <!-- your file upload controls and markup go here -->
    </div>
    <!-- other tabs go here -->
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:57:47.617

您可以使用[HTML 5`<input>` **表单**属性](http://www.impressivewebs.com/html5-form-attribute/)

```
<form id="fileuploads" action="http://yo.ur/target/" method="POST"></form>
<form id="mainform">
   <div id="first_tab">
   </div>
   <div id="second_tab">
   </div>
   <div id="fileuploads">
        <input type="text" name="desc" form="fileuploads">
        <input type="file" name="file" form="fileuploads">
        <input type="submit" value="Submit" form="fileuploads">
   </div>
</form> 
```

唯一的问题是您必须为 Internet Explorer 提供 JS 回退（如 Opi 建议的），因为它根本不支持此属性。

# ruby-on-rails - 向数组添加翻译的方法是什么？

> ID：10216259
> 
> 赞同：1
> 
> 时间：2012-04-18T19:10:11.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, internationalization, activesupport

对不起，如果这真的很容易。但是我尝试了很多方法来添加 I18n 并且似乎不起作用。

这是视图

```
 =  @event.categories.map(&:name).to_sentence 
```

这是在语言环境中

```
 #Categories
   categories:
   gastronomy: Gastronomy
   family: Family
   sports: Sports
   scene: Scene
   traditional: Tradition
   music: Music
   party: Party 
```

我设法让翻译工作在表格中，但不是在这里。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:23:05.443

**选项1**

假设有以下yaml文件结构

```
categories:
  gastronomy: Gastronomy
  family: Family
  sports: Sports
  scene: Scene
  traditional: Tradition
  music: Music
  party: Party 
```

现在您可以执行以下操作：

```
@event.categories.map{|n| I18n.t("categories.#{n}"}.to_sentence 
```

**选项 2**

更好的是，您可以更改`Category`模型以返回本地化名称：

```
class Category < ActiveRecord::Base

  def name
    key = read_attribute(:name)
    return key if key.blank? # return immediately if nil
    # use the key as value if the localization value is missing
    I18.n("categories.#{key}", :default => key.humanize)
  end
end 
```

现在，该`name`方法返回一个本地化值：

```
cat.name # localized name 
```

您的原始陈述也将起作用

```
@event.categories.map(&:name).to_sentence 
```

**选项 3**

使用[Globalize3](https://github.com/svenfuchs/globalize3) gem。观看此[截屏视频](http://railscasts.com/episodes/338-globalize3)了解更多详情。

# java - 如何迭代struts2中的对象集合？

> ID：10216260
> 
> 赞同：2
> 
> 时间：2012-04-18T19:10:13.177
> 
> 标签：java, struts2, iterator

我无法迭代存储在 struts2 中的用户对象中的集合。

我的 struts 操作、表单和用户 bean 是：

```
public class Project {
    private String name;
    private int id;

    // getter and setter for name & id
}

public class User {
    private String name;
    private List<Project> projects;
    :
    :
    public List<Project> getProjects() {
      // fetch projects from database and add to projects

      return projects;
    }
}

pulbic class login extends ActionSupport {
    private User user;
    public String execute() {
       user = new User();
       return SUCCESS;
    }

    public User getUser () {
      return user;
    }
} 
```

现在，在 jsp 页面上，我需要显示一个用户的所有项目

JSP 代码：

```
 <s:iterator value="user.projects" var="proj" status="key">           
        <td> <s:property value="${proj.name}" /> </td>  
        <td> <s:property value="${proj.id}" /> </td>  
    </s:iterator> 
```

但是这个迭代器不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T23:43:28.627

var 属性可能是不需要的，因为迭代器将该项目推到堆栈的顶部......

```
<s:iterator value="user.projects">           
    <td> <s:property value="name" /> </td> 
    <td> <s:property value="id" /> </td>  
</s:iterator> 
```

请注意，如果您想用 {} 包装表达式，它们应该以 %{} 为前缀以表示 OGNL，其中 ${} 表示 EL。如果默认情况下不评估表达式，您只需要使用 %{} 将表达式包装在 struts2 标记中，因为在某些情况下评估通常是有意义的，而在其他情况下，您不需要经常这样做，因为标签属性评估/或不像大多数人所期望的那样。

# reporting-services - 如何使 SSRS 2008 R2 范围条形图始终显示数据标签？

> ID：10216267
> 
> 赞同：0
> 
> 时间：2012-04-18T19:10:54.580
> 
> 标签：reporting-services, ssrs-2008

我正在研究 SSRS 2008 R2 中的范围条形图，该条形图配置为看起来像甘特图。数据集如下所示：

公制 | 日期图 1 | ... | 日期图-n

我的问题来自 Date-plot1 中的空值。如果我的报表数据集返回数据值，我会在图表底部看到日期标签。如果该特定字段为空，我要么没有数据标签，要么得到“MM/dd/yyyy”（这是我应用于日期的格式字符串）。

不幸的是，由于这是一份数据质量报告，因此在任何/所有列中都可以/将会有 NULL 值。即使第一个日期图为空，我如何才能显示轴标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:29:48.807

如果 X 为空，您希望 y 轴上的值落入什么范围内？

不过，我会处理数据源上的空值。让它成为你回答我的第一个问题的任何价值:)

如果不可能，请尝试选择图表的比例并查看与区间相关的属性，例如 intervalOffset。

# c# - 设置为 ModalPopupExtender TargetControlID 时，链接 OnClick 后面的代码不执行

> ID：10216268
> 
> 赞同：4
> 
> 时间：2012-04-18T19:10:54.660
> 
> 标签：c#, asp.net, ajax, asp.net-ajax, ajaxcontroltoolkit

我做了很多搜索，无法弄清楚这一点。

我有一个 ModalPopupExtender 弹出窗口，我想在用户单击链接 DoSomething 时显示它。弹出窗口有一个下拉控件，然后我想在用户要求打开对话框时动态填充它。这需要通过后面的代码在服务器端发生。目前，我正在尝试通过链接上的 OnClick 事件来执行此操作，但是一旦链接与 ModalPopupExtender 相关联，则不会执行链接 OnClick 代码。

**代码片段：**

```
<asp:LinkButton ID="lnkDoSomething" runat="server" onClick="lnkDoSomething_Click">Do Something</asp:LinkButton>
<asp:ModalPopupExtender ID="mpelnklnkDoSomething" runat="server" BackgroundCssClass="modalBackground"
    DropShadow="true" PopupControlID="lnkDoSomething"
    PopupDragHandleControlID="pnlDragHandlerForlnkDoSomething"   
    TargetControlID="lnklnkDoSomething"></asp:ModalPopupExtender> 
```

问题是，一旦我将 ModalPopupExtender 设置为 OnClick 代码不执行的链接。这显然是设计使然，但对我来说没有意义（天真），就好像用户单击应该执行 OnClick 代码的链接一样。

任何想法为什么不支持它以及正确的解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T19:28:33.253

将 附加`ModalPopupExtender`到一个虚拟按钮并在`LinkButton`'s上显示模式，`OnClick`甚至从代码隐藏：

**标记：**

```
<asp:LinkButton ID="lnkDoSomething" runat="server" onClick="lnkDoSomething_Click">Do Something</asp:LinkButton>
<asp:Button id="dummyButton" runat="server" style="display:none;" />

<asp:ModalPopupExtender ID="mpelnklnkDoSomething" runat="server" 
  BackgroundCssClass="modalBackground" DropShadow="true" PopupControlID="controlToPopUpId"
  PopupDragHandleControlID="pnlDragHandlerForlnkDoSomething" 
  TargetControlID="dummyButton"></asp:ModalPopupExtender> 
```

**代码隐藏：**

```
 protected void lnkDoSomething_Click(Object sender, EventArgs e) 
  {
     //do work
     mpelnklnkDoSomething.Show();
  } 
```

# sql - Oracle/Toad 期望什么日期格式？

> ID：10216269
> 
> 赞同：5
> 
> 时间：2012-04-18T19:10:55.607
> 
> 标签：sql, oracle, date, toad

在 Toad 编辑器中，我有这个 SQL：

```
SELECT INTERLOPERABCID,AVAILABLEDATE,
AVAILABLEQHR,CARPHONEID,
TRUNC((AVAILABLEQHR-1)/12) "COL",
MOD(AVAILABLEQHR-1,12) "ROW"
FROM ABC.INTERLOPERAVAILABILITY
WHERE INTERLOPERABCID>42
AND AVAILABLEDATE='09/Apr/2012' 
```

...但它不返回任何行，即使我在表中看到许多 AVAILABLEDATE 值 = '4/9/2012' 的记录

日期格式（'09/Apr/2012'；我也试过'04/Sep/2012'）看起来很奇怪，但至少我没有得到任何编译/执行错误。当我尝试“2012 年 4 月 9 日”和“2012 年 4 月 9 日”时，它说“ORA-01853：无效月份”

我必须如何输入日期才能告诉它我想查看 2012 年 4 月 9 日的日期？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T19:14:59.503

使用 TO_DATE 最安全：

```
AND AVAILABLEDATE = TO_DATE('09/Apr/2012', 'DD/Mon/YYYY') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T19:14:17.827

我喜欢使用[日期文字](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm#BABGIGCJ)：

```
SELECT INTERLOPERABCID,AVAILABLEDATE,
AVAILABLEQHR,CARPHONEID,
TRUNC((AVAILABLEQHR-1)/12) "COL",
MOD(AVAILABLEQHR-1,12) "ROW"
FROM ABC.INTERLOPERAVAILABILITY
WHERE INTERLOPERABCID>42
AND AVAILABLEDATE = DATE '2012-04-09' 
```

您确定您的日期中没有时间部分吗？

# wpf - ValidationRule 全局应用 ValidatesOnTargetUpdated 为 true

> ID：10216272
> 
> 赞同：0
> 
> 时间：2012-04-18T19:10:58.540
> 
> 标签：wpf, validation

有没有一种方法可以将所有 ValidationRules 的 ValidatesOnTargetUpdated 设置为 true？我目前有可能为每个文本框包含 2 条规则。这意味着我必须为每个添加 ValidatesOnTargetUpdated="False"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:22:24.413

如果您有从 ValidationRule 派生的自定义规则，则可以在构造函数中设置值。这意味着您不必为每次使用设置值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:16:57.257

否，因为 ValidationRules 是绑定的属性，样式应用于 FrameworkElements。两种完全不同的东西。

# css - 如何使用 Selenium IDE 从 XPath 位于的控件中获取 CSS 属性

> ID：10216273
> 
> 赞同：0
> 
> 时间：2012-04-18T19:10:59.490
> 
> 标签：css, xpath, selenium-ide

在我的 Selenium IDE 脚本中，我需要检查错误状态。通过选择控件的背景变为浅红色，可以在页面上直观地指示此错误状态。

选择控件的 xpath 是：

```
.//*[@id='tab-PersonnelDetailPeriod1-div']/div[3]/table/tbody/tr[2]/td[2]/div/select 
```

该选择控件的 HTML 是：

```
select style="background-color:#FFD5D5" tabindex="0" name="newBudgetLineItems[0].costElement" 
```

我想将背景颜色存储在一个变量中，然后如果保存颜色的变量是 FFD5D5，则使用 Flow Control 插件中的 gotoIf 命令执行其他步骤。

这在 Selenium IDE 中是否可行？

提前感谢任何提供帮助的人。

编辑：另一种方法可能是定位任何具有背景颜色样式的选择元素，因为页面上的所有其他选择都没有指定任何背景颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T21:21:30.173

Besides the xpath locator `//select[@style='background-color:#FFD5D5']`,

you can try [`verifyAttribute`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)

or maybe [JavaScript](https://developer.mozilla.org/en/DOM/window.getComputedStyle) `window.getComputedStyle(*element*,null).getPropertyValue('backgroundColor');`.

# java - 如何制作如图所示的图表？

> ID：10216274
> 
> 赞同：3
> 
> 时间：2012-04-18T19:11:02.377
> 
> 标签：java, swing, graph, jfreechart

![在此处输入图像描述](../Images/f03350533685e594a2bb564dae202d2e.png) 目前，当我运行此代码时，它向我显示了一个如上所示的图表，我想绘制一个我已经显示的图表。目前它绘制一个关于 (0,0) 对称的图形，我认为从 (0,-3) 或 (0, < -2) 绘制它应该可以完成工作。有没有其他方法可以做到这一点？

当前代码：

```
public class Profile  {

    double last=0;
    ChartFrame frame1;
    JToolBar jt=new JToolBar();
    public void generateProfile(int[] pointValue,double[] distance){
        ArrayList pv=new ArrayList();
        ArrayList dist=new ArrayList();

        pv.add(pointValue);
        dist.add(distance);
        int min=pointValue[0];
        for(int i=0;i<pv.size();i++){
            //System.out.print(pointValue[i]);
            if(pointValue[i]<min){
                min=pointValue[i];
            }
        }
        for(int i=0;i<dist.size();i++){
            System.out.print(distance[i]);
        }

        XYSeries series = new XYSeries("Average Weight");
        for(int i=0;i<pointValue.length;i++){
            //if(pointValue[i]!=0){
              series.add(last,pointValue[i]);
              last=distance[i];
            //}
         }

      XYDataset xyDataset = new XYSeriesCollection(series);
      JFreeChart chart= ChartFactory.createXYAreaChart("Profile View Of Contour", "Distance", "Contour Value", xyDataset, PlotOrientation.VERTICAL, true, true, false);
      ValueAxis rangeAxis = chart.getXYPlot().getRangeAxis();
      rangeAxis.setLowerBound(-3);
      frame1=new ChartFrame("XYLine Chart",chart);

      JButton saveimg=new JButton(new AbstractAction("Save as Image"){
            public void actionPerformed(ActionEvent e) {
                //some other lines of code...
            }
      });
      jt.add(saveimg);
      frame1.add(jt, BorderLayout.NORTH);
      frame1.setVisible(true);
      frame1.setSize(300,300);
    }

    public static void main(String ar[]){
        Profile pro=new Profile();
        int[] pv={2,3,0,5,-2,10};
        double[] dist={1,4,8,12,14,20};
        pro.generateProfile(pv, dist);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T14:18:51.253

目前在`XYAreaRenderer`. 但是，实现这一点应该不会太难。看一下`XYAreaRenderer.drawItem()`方法的代码。在此方法中，有一个`transZero`使用实际零值 (0.0) 计算的局部变量。如果您只是将 0.0 替换为其他值，这可能会满足您的需要。

实现这一点的最简单方法是创建自己的渲染器，该渲染器派生自 XYAreaRenderer 并覆盖`drawItem()`。在此方法中，复制原始代码并按上述方式对其进行修改。

然后你只需要通过编写来使用这个新的渲染器

```
XYAreaRenderer yourNewRenderer = ...; /* initialize here */
chart.getXYPlot().setRender(yourNewRenderer); 
```

# linux - 内核不保证编译文件的向后兼容性吗？

> ID：10216276
> 
> 赞同：1
> 
> 时间：2012-04-18T19:11:13.640
> 
> 标签：linux, gcc

简而言之：Linux 内核 2.6.32 编译的可执行文件与 Linux 内核 2.6.24 内核不兼容吗？

我有一个在带有 linux 2.6.32 内核的系统中编译的可执行文件。当我将编译后的文件传输到linux 2.6.24系统时，执行时出现以下错误：

```
bremm@bezier:/tmp/deployed$ ./qt-workstation
bash: ./qt-workstation: Arquivo ou diretório não encontrado 
```

文本表示“找不到文件或目录”，但文件存在。strace 的输出：

```
execve("./qt-workstation", ["./qt-workstation"], [/* 46 vars */]) = -1 ENOENT (No such file or directory)
dup(2)                                  = 3
fcntl(3, F_GETFL)                       = 0x8002 (flags O_RDWR|O_LARGEFILE)
fstat(3, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 2), ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f78e84f5000
lseek(3, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)
write(3, "strace: exec: No such file or di"..., 40strace: exec: No such file or directory
) = 40
close(3)                                = 0
munmap(0x7f78e84f5000, 4096)            = 0
exit_group(1)                           = ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:15:43.183

您的错误消息抱怨缺少文件，因此您需要找到该文件是什么。因此使用[strace](http://linux.die.net/man/1/strace)：

```
strace -o trace -f ./qt-workstation 
grep ENOENT trace 
```

并从最后一个结果开始向后看。结果之一应该是您丢失的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T01:27:19.483

我猜这与动态链接有关。我相信我已经从无法找到 ld.so 或 ld-linux.so 或类似的编译可执行文件中看到了类似的错误。

对于 #!'d 脚本，当找不到 #!'d 解释器时，可能会发生这种情况 - 包括当脚本从 windows 传输并在路径名末尾有 control-M 时。

# 更新

运行`strings ./qt-workstation | head`我发现我的 ld-linux.so 被硬编码为`/lib/ld-linux-x86-64.so.2`（命令的第一个输出），在 Ubuntu 上，这个文件位于其他地方。

创建一个符号来`/lib/ld-linux-x86-64.so.2`解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:24:22.213

`Bash`是那句话`/tmp/deployed/qt-workstation`没有找到，你确定文件在那里吗？

# scala - Scala函数转换

> ID：10216278
> 
> 赞同：6
> 
> 时间：2012-04-18T19:11:15.003
> 
> 标签：scala, functional-programming, closures

假设我有一个函数接受一个参数

```
def fun(x: Int) = x 
```

基于此，我想生成一个具有相同调用约定的新函数，但这会在委托给原始函数之前对其参数进行一些转换。为此，我可以

```
def wrap_fun(f: (Int) => Int) = (x: Int) => f(x * 2)
wrap_fun(fun)(2) // 4 
```

一个人怎么可能做同样的事情，除了任何只有部分参数来共同应用转换的函数？

```
def fun1(x: Int, y: Int) = x
def fun2(x: Int, foo: Map[Int,Str], bar: Seq[Seq[Int]]) = x

wrap_fun(fun1)(2, 4) // 4
wrap_fun(fun2)(2, Map(), Seq()) // 4 
```

`wrap_fun`使上述调用起作用的定义如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T13:30:11.910

这可以相当直接地使用[shapeless 的](https://github.com/milessabin/shapeless)工具来抽象函数的数量，

```
import shapeless._
import HList._
import Functions._

def wrap_fun[F, T <: HList, R](f : F)
  (implicit
    hl :   FnHListerAux[F, (Int :: T) => R],
    unhl : FnUnHListerAux[(Int :: T) => R, F]) =
      ((x : Int :: T) => f.hlisted(x.head*2 :: x.tail)).unhlisted

val f1 = wrap_fun(fun _)
val f2 = wrap_fun(fun1 _)
val f3 = wrap_fun(fun2 _) 
```

示例 REPL 会话，

```
scala> f1(2)
res0: Int = 4

scala> f2(2, 4)
res1: Int = 4

scala> f3(2, Map(), Seq())
res2: Int = 4 
```

请注意，您不能立即应用包装函数（如问题所示），而不是通过分配的 val （正如我在上面所做的那样），因为包装函数的显式参数列表将与`wrap_fun`. 我们可以得到的最接近问题形式的方法是明确命名`apply`方法，如下所示，

```
scala> wrap_fun(fun _).apply(2)
res3: Int = 4

scala> wrap_fun(fun1 _).apply(2, 4)
res4: Int = 4

scala> wrap_fun(fun2 _).apply(2, Map(), Seq())
res5: Int = 4 
```

在这里，明确提及的`apply`语法将第一个应用程序（`wrap_fun`及其隐式参数列表）与第二个应用程序（转换后的函数及其显式参数列表）分开。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T09:01:44.710

与 Scala 中的往常一样，还有另一种方法可以实现您想要做的事情。

这是基于第一个参数与`compose`of的柯里化的结果`Function1`：

```
def fun1(x : Int)(y : Int) = x
def fun2(x : Int)(foo : Map[Int, String], bar : Seq[Seq[Int]]) = x

def modify(x : Int) = 2*x 
```

REPL 显示的结果类型将是：

```
fun1: (x: Int)(y: Int)Int
fun2: (x: Int)(foo: Map[Int,String], bar: Seq[Seq[Int]])Int
modify: (x: Int)Int 
```

而不是包装函数`fun1`and `fun2`，`compose`从技术上讲，它们现在都是`Function1`对象。这使您可以进行如下调用：

```
(fun1 _ compose modify)(2)(5)
(fun2 _ compose modify)(2)(Map(), Seq()) 
```

两者都将返回 4。当然，语法不是很好，因为您必须添加`_`以区分`fun1`的应用程序和函数对象本身（在这种情况下您要在其上调用`compose`方法）。

因此，Luigi 关于一般情况下不可能的论点仍然有效，但如果你可以自由地对你的函数进行柯里化，你可以用这种很好的方式来做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:39:22.660

由于采用不同数量参数的函数是不同的、不相关的类型，因此一般不能这样做。`trait Function1 [-T1, +R] extends AnyRef`没有别的了。您将需要为每个 arity 使用单独的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T20:16:17.970

虽然我投票支持并同意 Luigi 的回答——因为，你知道......他是*对*的；Scala*没有*直接的、内置的支持这样的东西——值得注意的是，你想要做的事情并非*不可能*；只是实现起来有点痛苦，而且通常情况下，您最好只根据所需的数量实现一个单独的方法。

也就是说，虽然......我们实际上可以做到这一点`HList`。如果您有兴趣尝试一下，自然需要获得一个`HList`实现。我建议使用 Miles Sabin 出色的[无形](https://github.com/milessabin/shapeless)项目及其对`HList`s. 无论如何，这是一个使用它的示例，它可以完成类似于您似乎正在寻找的东西：

```
import shapeless._

trait WrapperFunner[T] {
  type Inputs <: HList
  def wrapFun(inputs: Inputs) :  T
}

class WrapsOne extends WrapperFunner[Int] {
  type Inputs = Int :: HNil
  def wrapFun(inputs: Inputs) : Int = {
    inputs match {
      case num :: HNil => num * 2
    }
  }
}

class WrapsThree extends WrapperFunner[String] {
  type Inputs = Int :: Int :: String :: HNil
  def wrapFun(inputs: Inputs) : String = {
    inputs match {
      case firstNum :: secondNum :: str :: HNil => str + (firstNum - secondNum)
    }
  }
}

object MyApp extends App {

  val wo = new WrapsOne
  println(wo.wrapFun(1 :: HNil))
  println(wo.wrapFun(17 :: HNil))
  //println(wo.wrapFun(18 :: 13 :: HNil))  // Would give type error

  val wt = new WrapsThree
  println(wt.wrapFun(5 :: 1 :: "your result is: " :: HNil))
  val (first, second) = (60, 50)
  println(wt.wrapFun(first :: second :: "%s minus %s is: ".format(first, second) :: HNil))
  //println(wt.wrapFun(1 :: HNil))  // Would give type error

} 
```

运行`MyApp`结果：

```
2
34
your result is: 4
60 minus 50 is: 10 
```

或者，更接近您的特定情况：

```
import shapeless._

trait WrapperFunner[T] {
  type Inputs <: HList
  def wrapFun(inputs: Inputs) :  T
}

trait WrapperFunnerBase extends WrapperFunner[Int] {
  // Does not override `Inputs`
  def wrapFun(inputs: Inputs) : Int = {
    inputs match {
      case (num: Int) :: remainder => num
    }
  }
}

class IgnoresNothing extends WrapperFunnerBase {
  type Inputs = Int :: HNil
}

class IgnoresLastTwo extends WrapperFunnerBase {
  type Inputs = Int :: Int :: String :: HNil
}

object MyApp extends App {

  val in = new IgnoresNothing
  println(in.wrapFun(1 :: HNil))
  println(in.wrapFun(2 :: HNil))
  //println(in.wrapFun(3 :: 4 :: HNil))  // Would give type error

  val ilt = new IgnoresLastTwo
  println(ilt.wrapFun(60 :: 13 :: "stupid string" :: HNil))
  println(ilt.wrapFun(43 :: 7  :: "man, that string was stupid..." :: HNil))
  //println(ilt.wrapFun(1 :: HNil))  // Would give type error

} 
```

结果是：

```
1
2
60
43 
```

# foursquare - 为实时api创建foursquare场地

> ID：10216284
> 
> 赞同：0
> 
> 时间：2012-04-18T19:11:52.253
> 
> 标签：foursquare

我创建了一个消费者并设法测试运行实时 api（用户推送）。我如何创建一个场所并将其绑定到我的消费者，以便当用户在我的场所签到时，它会推送到我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:36:34.397

您可以[声明](http://support.foursquare.com/entries/191119-how-do-i-claim-my-venue)您正在管理的场所，也可以使用经过身份验证的用户创建一个家庭场所。然后，您应该在每次签到时自动收到推送通知。

[https://developer.foursquare.com/overview/realtime](https://developer.foursquare.com/overview/realtime)（见点“场地推送 API”）说：

> 每次用户签入由您的任何 OAuth 消费者的授权用户管理的场所或由您的消费者的一个授权用户创建的家庭场所时，场所推送 API 都会推送到您的应用程序。此 API 专为用户是场馆管理员的应用程序而设计，允许您的应用程序实时查看进入其场馆的流量，或为支持用户家中的 Foursquare 自动化的应用程序而设计。

# asp.net-mvc-3 - JqG rid 排序和分组日期

> ID：10216285
> 
> 赞同：0
> 
> 时间：2012-04-18T19:11:53.640
> 
> 标签：asp.net-mvc-3, sorting, jqgrid, grouping

我有以下问题：我有一个大网格，主要按加载后的日期排序。此特定表还具有分组功能，如下图所示：

（很抱歉发布这样的图像，但由于垃圾邮件过滤器，我不能直接在此处插入）

![在此处输入图像描述](../Images/f8696d78838c314ff7f2d490640b9e32.png)

问题是当我按日期分组时（请注意，在日期以外的其他列中未观察到此行为）会发生这种情况：

![在此处输入图像描述](../Images/a04769382c2532a09b4b0c8cf40b8a11.png)

但是，如果我以另一种方式订购日期，则不再观察到这种行为

我还应该注意，这个实现是在 ASP.MVC 3 下的。我试图以不同的方式格式化日期，但没有用。

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T23:28:36.837

如果问题只是排序顺序（请参阅问题的评论），我认为可以通过使用`sorttype`函数来解决问题。有关详细信息，请参阅[旧答案](https://stackoverflow.com/a/3329852/315935)和[这个](https://stackoverflow.com/a/5296935/315935)答案。

# mysql - 如何在我的数据库中实现“搜索”？

> ID：10216288
> 
> 赞同：0
> 
> 时间：2012-04-18T19:12:04.263
> 
> 标签：mysql, database

所以我有大约 6 个表，每个表有 6 个列，例如地址、名称等。我必须实现一个搜索功能，用户输入一个“单词”，我必须搜索我的整个数据库（所有 6 个表）才能找到这个词，并且当找到该单词时，应从该表中返回该特定行。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:26:21.763

假设所有六个表都具有相同的列名，您可以使用此查询。

```
SELECT * FROM TABLE1 WHERE 
    col1 LIKE '%searchValue%' OR col2 LIKE '%searchValue%' OR 
    col3 LIKE '%searchValue%' OR col4 LIKE '%searchValue%' OR 
    col4 LIKE '%searchValue%' OR col6 LIKE '%searchValue%'
UNION ALL
SELECT * FROM TABLE2 WHERE 
    col1 LIKE '%searchValue%' OR col2 LIKE '%searchValue%' OR 
    col3 LIKE '%searchValue%' OR col4 LIKE '%searchValue%' OR 
    col4 LIKE '%searchValue%' OR col6 LIKE '%searchValue%'
UNION ALL
SELECT * FROM TABLE3 WHERE 
    col1 LIKE '%searchValue%' OR col2 LIKE '%searchValue%' OR 
    col3 LIKE '%searchValue%' OR col4 LIKE '%searchValue%' OR 
    col4 LIKE '%searchValue%' OR col6 LIKE '%searchValue%'
 and so on... 
```

如果六个表具有不同的列名，您仍然可以使用，`union all`但在您必须重命名列之前，以便每个选择返回相同的列名

```
SELECT col_a as COL1, col_b as COL2, col_c AS COL3, col_d AS COL4, col_e AS COL5, col_f as COL6 FROM TABLE1 WHERE ....
UNION ALL
SELECT col_q as COL1, col_w as COL2, col_e AS COL3, col_r AS COL4, col_t AS COL5, col_y as COL6 FROM TABLE2 WHERE ....
etc.. 
```

如果上述两个查询都不适合您的目的，您仍然可以使用单个查询，执行六个不同的选择语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:21:57.857

[谷歌 - MySQL 全文搜索](http://www.google.com/search?q=MySQL+Full+Text+Search)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:19:37.903

使用 LIKE 子句和通配符。（以 php 为例）

```
'Select * FROM Table_Nam WHERE column_Nam1 LIKE %' . $searchValue . '%'.
    'OR column_Nam2 LIKE %' . $searchValue . '%'.
    'OR column_Nam3 LIKE %' . $searchValue . '%'.
    'OR column_Nam4 LIKE %' . $searchValue . '%'.
    'OR column_Nam5 LIKE %' . $searchValue . '%'.
    'OR column_Nam6 LIKE %' . $searchValue . '%'.; 
```

# windows - 随机文件生成器（再次！）

> ID：10216290
> 
> 赞同：6
> 
> 时间：2012-04-18T19:12:08.693
> 
> 标签：windows, delphi, random, test-data

我非常需要一个随机文件生成器来生成**真正随机的、不可压缩的**虚拟文件。

我最终得到了这个德尔福代码。它*有效*，但它的**痛苦sloooow**

```
 var
    Buf     : Integer;
    TheFile : TFileStream;
 begin
      TheFile := TFileStream.Create(FileName, fmCreate OR fmOpenReadWrite);
      with TheFile do
      begin
           for i := 0 to FileSize do    // Iterate
           begin
                Buf := Random(999999) * i;
                WriteBuffer(Buf, SizeOf(Buf));
           end;    // for
      end;    // with
 end, 
```

**我的问题是：有没有我可以使用的*快速*随机文件生成器？**只要满足以下条件，Delphi 代码和/或命令行工具都是可以接受的：

1.  我可以在 Windows 上运行它*而无需*手动干预（我的测试需要这个，不允许干预）
2.  它**很快**
3.  生成的文件是**不可压缩**的（即压缩生成的文件不会节省空间）

* * *

**编辑**对于那些感兴趣的人，我应用了我在这里收到的建议并[制作了这个功能](http://pastebin.com/SHwPBFZB)，它足够快并且 7zip 很难压缩生成的数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T20:02:44.297

使用 4096 字节的页面大小或多个页面大小的缓冲区。一次写入一个整数会很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:20:11.990

您可以使用我用来在我的项目中生成测试数据的[generate_random_file.py脚本 (Python 3)。](https://bitbucket.org/rsnitsch/filehasher/src/205f2bf55b27d53aa3970592a8ffb12c11a6fc30/testdata/generate_random_file.py)

*   它适用于 Linux 和 Windows。
*   它非常快，因为它用于[`os.urandom()`](http://docs.python.org/3/library/os.html#os.urandom)生成 256 KiB 的随机数据块，而不是单独生成和写入每个字节。

# backbone.js - 你能用“订单”吗？require.js 路径对象中的字符串以避免在每个依赖项数组中重复它？

> ID：10216291
> 
> 赞同：0
> 
> 时间：2012-04-18T19:12:10.917
> 
> 标签：backbone.js, require, requirejs

用require.js，能不能指定顺序！要在“路径”配置对象中使用的插件？我试图避免输入“订单！” 对于我总是希望以特定顺序包含的几个基本模块。

我的配置：

```
require.config({
    paths: {
        jquery: 'libs/jquery/jquery-1.7.2.min',
        underscore: 'libs/underscore/underscore-min',
        backbone: 'libs/backbone/backbone-min',
        order: 'libs/require/plugins/order'
    }
}); 
```

我试过这种方式，但它包括“订单！” 它正在查找的实际路径中的字符串。

```
require.config({
    paths: {
        jquery: 'order!libs/jquery/jquery-1.7.2.min',
        underscore: 'order!libs/underscore/underscore-min',
        backbone: 'order!libs/backbone/backbone-min',
        order: 'libs/require/plugins/order'
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:15:28.790

查看由创建 RequireJS 的 James Burke 维护的[Backbone](https://github.com/amdjs/backbone)和[Underscore的 AMD 分支。](https://github.com/amdjs/underscore)如果您使用这些版本，那么您将不必使用订单插件！

[有关这些叉子的更多信息](http://tagneto.blogspot.com/2012/01/amd-support-for-underscore-and-backbone.html)...

# html - 如何将 z-index 与 DIV 和 PNG 图像一起使用？

> ID：10216292
> 
> 赞同：2
> 
> 时间：2012-04-18T19:12:11.863
> 
> 标签：html, css

我有这个CSS：

```
<style type="text/css">

    .chart {
        position: relative;
        width:300px;
        height:85px;
        padding:0;
        margin:0;       
        background:url("prova2.png") center bottom no-repeat;
        z-index:1;
    }

    .chart div{     
        float:left;
        font-size:13px;
        text-align:center;
    }

    .chart .green{
        position:absolute;
        left: 50px;
        top:50px;
        height:35px;
        width:50px;
        background: green;
    }

</style> 
```

这个html代码：

```
<div class="chart">

    <div style="margin-left:15px;">
        <b>-2</b><br />
        0.1234
    </div>  
    <div style="margin-left:27px;">
        <b>-1</b><br />
        0.1234
    </div>  
    <div style="margin-left:27px;">
        <b>MEDIA</b><br />
        0.1234
    </div>  
    <div style="margin-left:18px;">
        <b>+1</b><br />
        0.1234
    </div>  
    <div style="margin-left:27px;">
        <b>+2</b><br />
        0.1234
    </div>  

    <div class="green"></div>   

</div> 
```

如您所见，我使用具有透明胶片的 prova2.png。

这是图像：

![在此处输入图像描述](../Images/7c8a16a5b6407192d7cbbc65bcb19884.png)

代码的结果是：

![在此处输入图像描述](../Images/3482b15b6b09466e8198b764fb4b6a20.png)

你能看到绿色矩形在图像上方吗，但我真的不明白原因，因为我使用了 z-index 和 div（以图像为背景）有**z-index:1**，所以......

为什么绿色 div 在上面？

我需要将颜色设置为背景，但我必须看到垂直线（.png 图像的....图像的其余部分是透明的），所以绿色 div 上方的线条和绿色中的线条透明部分。

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:17:41.843

通过使用，您不仅可以确定*current*`z-index`的堆栈级别，还可以确定其子元素的堆栈级别。[见](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)[规格：](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)*[`z-index`](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)*

 *> 在每个堆叠上下文中，以下图层按从后到前的顺序绘制：
> 
> 1.  **构成堆叠上下文的元素的背景和边框。**
> 2.  具有负堆栈级别（最负优先）的子堆栈上下文。
> 3.  流入的、非内联级别的、非定位的后代。
> 4.  未定位的浮动。
> 5.  流入的、内联级的、非定位的后代，包括内联表和内联块。
> 6.  **堆栈级别 0 的子堆栈上下文和堆栈级别 0 的定位后代。**
> 7.  具有正堆栈级别的子堆栈上下文（最不积极的优先）。

**编辑：**解决此问题的一种非常简单的方法是创建一个新`<div>`图像并将您的图像放在那里：

```
<div class="chart">
    <!-- other divs -->
    <div class="green"></div>
    <div class="chartmap"></div>
</div> 
```

```
.chart {
    position: relative;
    width:300px;
    height:85px;
    padding:0;
    margin:0;
    z-index:1;
}

.chart div{
    /* same as above */
}

.chart .green{
    /* same as above */
}

.chart .chartmap{
    position: absolute; float:none;
    top: 0; left: 0; right: 0; bottom: 0;
    margin: 0; padding: 0; border: 0 none;

    background:url("prova2.png") center bottom no-repeat;
    z-index:1;
} 
```

这次`z-index`将起作用，因为所有元素共享相同的堆叠上下文。另一种可能的解决方案是`<img>`在`z-index`您的`<divs>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:21:56.653

jsFiddle：http: [//jsfiddle.net/Mn7rJ/](http://jsfiddle.net/Mn7rJ/)

将父 div 添加到您的子 div 并给它`position:absolute;`

```
<style type="text/css">
    .chart
    {
        position: relative;
        width:300px;
        height:85px;
        padding:0;
        margin:0;       
        background:url("prova2.png") center bottom no-repeat;
    }
    .chart div
    {     
        float:left;
        font-size:13px;
        text-align:center;
    }
    .chart .green
    {
        position:absolute;
        left: 50px;
        top:50px;
        height:35px;
        width:50px;
        background: green;
    }
</style>

<div class="chart">
    <div class="green"/>
    <div style="position:absolute;"> <!-- add this div -->
        <div style="margin-left:15px;">
            <b>-2</b><br />
            0.1234
        </div>  
        <div style="margin-left:27px;">
            <b>-1</b><br />
            0.1234
        </div>  
        <div style="margin-left:27px;">
            <b>MEDIA</b><br />
            0.1234
        </div>  
        <div style="margin-left:18px;">
            <b>+1</b><br />
            0.1234
        </div>  
        <div style="margin-left:27px;">
            <b>+2</b><br />
            0.1234
        </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:19:45.587

Z-index 仅适用于具有指定定位的元素。所以任何绝对/相对元素的 z-index 都将高于非定位对象的 z-index。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T20:33:11.463

从`.chart`z-index 被删除，您不想为父级设置 z-index。

## CSS：

```
<style type="text/css">

    .chart {
        position: relative;
        width:300px;
        height:85px;
        padding:0;
        margin:0;       
    }

    .chart_bg_image {
        position: absolute;
        width:300px;
        height:85px;
        padding:0;
        margin:0;       
        background:url("prova2.png") center bottom no-repeat;
        z-index: 2;  /* This is above others but equals with .chart div (other than .green) */
    }

    .chart div{     
        position: relative; /* For z-index */
        float:left;
        font-size:13px;
        text-align:center;
        z-index: 2;  /* These are above others but equal with background image */
    }

    .chart .green{
        position:absolute;
        left: 50px;
        top:50px;
        height:35px;
        width:50px;
        background: green;
        z-index: 1;  /* This is below background image and everything else */
}

</style> 
```

## 和 HTML 部分：

```
<div class="chart">

    <div class="chart_bg_image"></div>  <!-- HERE IS NEW PLACEHOLDER FOR IMAGE -->

    <div style="position: absolute"> <!-- Keep childs where they belong -->
    <div style="margin-left:15px;">
        <b>-2</b><br />
        0.1234
    </div>  
    <div style="margin-left:27px;">
        <b>-1</b><br />
        0.1234
    </div>  
    <div style="margin-left:27px;">
        <b>MEDIA</b><br />
        0.1234
    </div>  
    <div style="margin-left:18px;">
        <b>+1</b><br />
        0.1234
    </div>  
    <div style="margin-left:27px;">
        <b>+2</b><br />
        0.1234
    </div>  
    </div>
    <div class="green"></div>   

</div> 
```*

# javascript - 在插件中调用函数。WordPress 风格

> ID：10216297
> 
> 赞同：0
> 
> 时间：2012-04-18T19:12:23.957
> 
> 标签：javascript, wordpress, function, plugins, rotator

我目前正在尝试组合两个 wordpress 插件，而不必重写一个以适应另一个。

我最基本的问题是：如何调用存在于另一个插件之外的函数。例如。我有两个文件：

1) js/N_Rotator.js

2) js/layerSlider.js

他们两个都正常工作。第一个是在背景中旋转的图像。第二个是旋转内容（即标题、图像链接等）。

我需要做的是同步它们。当滑块 2 旋转时，我希望滑块 1 也旋转。

经过一番挖掘，我发现我可以像这样从 Slider 2 启动 Slider 1：

```
a('#carousel').infiniteCarousel({ anim('next'); }); 
```

但我得到一个错误，那个 anim() 没有退出。所以在滑块 1 js 中，我将它放在了一个变量中。

```
 if(o.play) {
   anim('next');
 } 
```

然后从滑块 2 中这样调用它：

```
a('#carousel').infiniteCarousel({ play:1 }); 
```

但所做的只是让它每次启动时都从头开始。它会滑动一次并迅速回到起点

那么，有没有办法我可以自己调用该函数？这就是 anim() 的结构。（从以前制作的名为infiniteCarousel 的插件中获取）。

```
function anim(direction,dist)
            {
                // Fade left/right arrows out when transitioning
                $('#btn_rt'+randID).fadeOut(500);
                $('#btn_lt'+randID).fadeOut(500);

                // animate textholder out of frame
                $('#textholder'+randID).animate({marginBottom:(-imgHeight*o.textholderHeight)-(correctTHHeight * 2)+'px'},500);                 

                //?? Fade out play/pause?
                $('#pause_btn'+randID).fadeOut(250);
                $('#play_btn'+randID).fadeOut(250);

                if(direction == "next")
                {
                    if(curr==numImages) curr=0;
                    if(dist>1)
                    {
                        borderpatrol($('#thumb'+randID+'_'+(curr+dist)));
                        $('li:lt(2)', obj).clone().insertAfter($('li:last', obj));
                        $('ul', obj).animate({left:-imgWidth*(dist+1)},o.transitionSpeed,function(){
                            $('li:lt(2)', obj).remove();
                            for(j=1;j<=dist-2;j++)
                            {
                                $('li:first', obj).clone().insertAfter($('li:last', obj));
                                $('li:first', obj).remove();
                            }

                            $(this).css({'left':-imgWidth});
                            curr = curr+dist;
                            $('#thumbs'+randID+' div').bind('click', thumbclick).css({'cursor':'pointer'});
                        });
                    }
                    else
                    {
                        borderpatrol($('#thumb'+randID+'_'+(curr+1)));
                        $('#thumbs'+randID+' div').css({'cursor':'default'}).unbind('click'); // Unbind the thumbnail click event until the transition has ended
                        // Copy leftmost (first) li and insert it after the last li
                        $('li:first', obj).clone().insertAfter($('li:last', obj));  
                        // Update width and left position of ul and animate ul to the left
                        $('ul', obj)
                            .animate({left:-imgWidth-960},o.transitionSpeed,function(){
                                $('li:first', obj).remove();
                                $('ul', obj).css('left',-imgWidth+'px');
                                $('#btn_rt'+randID).fadeIn(500);
                                $('#btn_lt'+randID).fadeIn(500);
                                if(autopilot) $('#pause_btn'+randID).fadeIn(250);
                                if(autopilot)
                                {
                                    $('#progress'+randID).width(imgWidth).height(pbarHeight).fadeIn(500);
                                    $('#progress'+randID).fadeIn(500).animate({'width':0},o.displayTime,function(){
                                        $('#pause_btn'+randID).fadeOut(50);
                                        setTimeout(function(){$('#pause_btn'+randID).fadeIn(250)},o.transitionSpeed)
                                    });
                                }
                                curr=curr+1;
                                $('#thumbs'+randID+' div').bind('click', thumbclick).css({'cursor':'pointer'});
                            });
                    }
                }
                if(direction == "prev")
                {
                    if(dist>1)
                    {
                        borderpatrol($('#thumb'+randID+'_'+(curr-dist)));
                        $('li:gt('+(numImages-(dist+1))+')', obj).clone().insertBefore($('li:first', obj));
                        $('ul', obj).css({'left':(-imgWidth*(dist+1))}).animate({left:-imgWidth},o.transitionSpeed,function(){
                            $('li:gt('+(numImages-1)+')', obj).remove();
                            curr = curr - dist;
                            $('#thumbs'+randID+' div').bind('click', thumbclick).css({'cursor':'pointer'});
                        });
                    }
                    else
                    {
                        borderpatrol($('#thumb'+randID+'_'+(curr-1)));
                        $('#thumbs'+randID+' div').css({'cursor':'default'}).unbind('click'); // Unbind the thumbnail click event until the transition has ended
                        // Copy rightmost (last) li and insert it after the first li
                        $('li:last', obj).clone().insertBefore($('li:first', obj));
                        // Update width and left position of ul and animate ul to the right
                        $('ul', obj)
                            .css('left',-imgWidth*2+'px')
                            .animate({left:-imgWidth},o.transitionSpeed,function(){
                                $('li:last', obj).remove();
                                $('#btn_rt'+randID).fadeIn(500);
                                $('#btn_lt'+randID).fadeIn(500);
                                if(autopilot) $('#pause_btn'+randID).fadeIn(250);
                                curr=curr-1;
                                if(curr==0) curr=numImages;
                                $('#thumbs'+randID+' div').bind('click', thumbclick).css({'cursor':'pointer'});
                            });
                    }
                }
            } 
```

该插件的结构如下：

```
(function($) {

$.fn.extend({ 
    infiniteCarousel: function(options) {
        var defaults = {
            defaults...
        };
    var options = $.extend(defaults, options);

        return this.each(function() { ...anim is inside here... } }); })(jQuery); 
```

关于如何在无需重新启动插件的情况下调用函数的任何想法？

注意：我无法分享该网站的链接，它仍在开发中，客户需要保持匿名。给你看一个活生生的例子会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:58:14.557

我不确定 JavaScript 代码中发生了什么，但如果您希望一个脚本依赖于另一个脚本，请将其添加为 wp_register_script() 函数中的依赖项

# c# - Silverlight 5 树视图拖放

> ID：10216298
> 
> 赞同：2
> 
> 时间：2012-04-18T19:12:36.493
> 
> 标签：c#, silverlight, entity-framework

我在 SilverLight 中使用 TreeView 进行拖放时遇到问题。我希望能够重新排序 TreeView 中的项目。例如，重新设置一个项目。我正在使用具有层次关系（ID、ParentID）的 EntityFramework。这是我的 xaml。

```
<toolkit:TreeViewDragDropTarget AllowDrop="True" HorizontalAlignment="Left">
   <sdk:TreeView Name="treeView1" Height="176" 
        HorizontalAlignment="Left" Width="Auto">
      <sdk:TreeView.ItemTemplate>
         <sdk:HierarchicalDataTemplate 
              ItemsSource="{Binding Path=Children}">
            <TextBlock Text="{Binding Path=LocationName}"/>
         </sdk:HierarchicalDataTemplate>
      </sdk:TreeView.ItemTemplate>
   </sdk:TreeView>
</toolkit:TreeViewDragDropTarget> 
```

我创建了一些事件处理程序来查看拖放事件是否正常工作。Silverlight 还提供拖动正在发生的视觉反馈。

我想知道的一件事是绑定到 TreeView 的 Collection 不是 ObservableCollection。Entity 的 Children 属性是一个 EntityCollection。我不确定我可以在 EntityObject 中搞砸什么。

有人有想法么？？

更新：如果我将一个子节点拖到它的上层或下层树中的任何节点上，什么都不会发生。如果我在根节点上方或下方拖动子节点，树视图中会出现一条线。如果我把它放在那里，我会得到一个空引用异常。我无法确定它。我知道这个问题有很多问题，但我认为我们已经接近了。任何帮助或见解表示赞赏。

更新 2：我将添加一些屏幕截图来显示正在发生的事情。

![这是一个示例树视图。](../Images/8753b66b6c09c1b5929f7da686fb6173.png) 示例树视图

![TreeViewItem 拖动](../Images/b0890eb341b9e8ddc7f3be6443a1bd37.png) 这是我拖动项目时的样子。我正在尝试将银河系拖到没有父节点的根节点。注意顶部的线。我认为这是放置位置。如果我把它放在那里，我会得到例外。假设我将太阳系拖为宇宙的直接子代。什么都没发生。也没有出现线。

# spring - 在spring mvc3中同时使用@RequestBody和@RequestParam

> ID：10216311
> 
> 赞同：7
> 
> 时间：2012-04-18T19:13:34.683
> 
> 标签：spring, spring-mvc

我正在使用 spring-mvc **3.1.0.RELEASE**，由于某种原因，使用查询参数和请求正文映射 POST 不起作用。

这是我的控制器方法的外观：

```
 @RequestMapping(method = POST, value = "/post-to-me/") 
  public void handlePost(
    @RequestBody Content content,
    @RequestParam("param1") String param1,
    @RequestParam("param2") String param2
  ){
       //do stuff       
  } 
```

但是，如果我将所有请求参数转换为路径参数，则映射工作。有没有人遇到过类似的事情？

谢谢！

编辑：“不起作用”== 404，当我尝试这样做时，`POST /post-to-me?param1=x&param2=y`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:30:09.043

首先，您的 POST url 与控制器方法 url 不匹配，您的 POST url 必须是 "/post-to-me/?param1=x¶m2=y" 而不是 "/post-to-me?param1=x¶m2=y"

其次，Content 类是从哪里来的？？我使用了一个字符串，对我来说很好用

```
@RequestMapping(method = RequestMethod.POST, value = "/post-to-me/")
public void handlePost(@RequestBody String content,
        @RequestParam("param1") String param1,
        @RequestParam("param2") String param2, HttpServletResponse response) {
    System.out.println(content);
    System.out.println(param1);
    System.out.println(param2);
    response.setStatus(HttpServletResponse.SC_OK);
} 
```

请注意，我使用 HttpServletResponse 返回 HTTP 200 代码，但我认为返回 Http 代码有更好的解决方案，请查看：[Multiple response http status in Spring MVC](https://stackoverflow.com/questions/7474957/multiple-response-http-status-in-spring-mvc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T13:20:05.820

请求映射值末尾的斜杠可能是问题所在。尝试：

```
@RequestMapping(method = RequestMethod.POST, value = "/post-to-me") 
```

或将您的 POST 请求发送至`POST /post-to-me/?param1=x&param2=y`

# java - JAVA中的两个字符串异或

> ID：10216314
> 
> 赞同：3
> 
> 时间：2012-04-18T19:13:44.437
> 
> 标签：java, string, encryption, xor

我正在尝试加密一个字符串，其中一部分是用 IV 字符串对文本进行异或。在遇到一些困难之后，我最终进入了 stackoverflow，其中一个人给出了以下代码：

```
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;
import java.io.IOException;

public class StringXORer {

public String encode(String s, String key) {
    return base64Encode(xorWithKey(s.getBytes(), key.getBytes()));
}

public String decode(String s, String key) {
    return new String(xorWithKey(base64Decode(s), key.getBytes()));
}

private byte[] xorWithKey(byte[] a, byte[] key) {
    byte[] out = new byte[a.length];
    for (int i = 0; i < a.length; i++) {
        out[i] = (byte) (a[i] ^ key[i%key.length]);
    }
    return out;
}

private byte[] base64Decode(String s) {
    try {
        BASE64Decoder d = new BASE64Decoder();
        return d.decodeBuffer(s);
    } catch (IOException e) {throw new RuntimeException(e);}
}

private String base64Encode(byte[] bytes) {
    BASE64Encoder enc = new BASE64Encoder();
    return enc.encode(bytes).replaceAll("\\s", "");

}
} 
```

除了 2 个问题外，它似乎有效：结果字符串变得更长。当试图在“abcdefgh”和“abcdefgh”之间进行异或时，我得到：“aaaaaaaaaaaa”。其次，两个相同字符串的结果变为“aaaa....” - 字符串“a”s....

所以这两个问题是：

1.  为什么结果字符串变长了？
2.  为什么相同字符串之间的异或结果由“a”列表组成......？

这是作业，感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:27:20.900

字符串变长了，因为除了与密钥进行异或之外，它还经过[Base64](http://en.wikipedia.org/wiki/Base64)编码。

替换对`base64Encode(...)`with`new String(...)`和`base64Decode(s)`with的调用`s.getBytes()`以获得原始的 XORed 字符串。但请注意，编码后的字符串在打印时看起来不太好。与自身进行异或的字符串将由`\0`字符组成，这些字符被打印为空格。

即使在该更改之后，[`getBytes()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28%29)返回的字节数组也可能比字符串长度更长，具体取决于平台默认字符集。例如，UTF-8 会将 >= 128 的字符编码为两个或三个字节。使用 ISO-8859-1 作为字符集，字符 <= 255 和字节一一对应。同样，[`new String(...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D%29)可能无法生成预期的字符，因为给定的字节对于平台默认编码无效。

# html - 显示定义列表的标题？

> ID：10216316
> 
> 赞同：0
> 
> 时间：2012-04-18T19:13:47.307
> 
> 标签：html

我有一些定义列表，哪些图片具有这些图片的定义。我可以在 中使用什么元素`dl`来显示列表的标题？例如，用下面的列表显示“Calicos”或“Tabbys”：

```
<dl id="calicos">
  <dt>Abby</dt>
  <dd><img src="http://placekitten.com/200/200?image=8" /></dd>
  <dt>Beverly</dt>
  <dd><img src="http://placekitten.com/200/200?image=7" /></dd>
</dl>

<dl id="tabbys">
  <dt>Carlos</dt>
  <dd><img src="http://placekitten.com/200/200?image=16" /></dd>
  <dt>Davy</dt>
  <dd><img src="http://placekitten.com/200/200?image=13" /></dd>
</dl> 
```

理想情况下，我想在没有 JavaScript 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:29:10.143

没有任何。`<dt>`除了 a或`<dd>`a之外，你不能放任何东西`<dl>`。

考虑这样的事情：

```
<section id="calicos">
  <h2>Calicos</h2>

  <dl>
    <dt>Abby</dt>
    <dd><img src="http://placekitten.com/200/200?image=8" /></dd>
    <dt>Beverly</dt>
    <dd><img src="http://placekitten.com/200/200?image=7" /></dd>
  </dl>
</section>

<section id="tabbys">
  <h2>Tabbys</h2>

  <dl>
    <dt>Carlos</dt>
    <dd><img src="http://placekitten.com/200/200?image=16" /></dd>
    <dt>Davy</dt>
    <dd><img src="http://placekitten.com/200/200?image=13" /></dd>
  </dl>
</section> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:32:44.370

适当的标记是`h2`元素之前的一个或其他标题`dl`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:25:23.977

这样的事情怎么样？

```
<details>
  <summary>Calicos</summary>
  <dl id="calicos">
      <dt>Abby</dt>
      <dd><img src="http://placekitten.com/200/200?image=8" /></dd>
      <dt>Beverly</dt>
      <dd><img src="http://placekitten.com/200/200?image=7" /></dd>
  </dl>
</details>
<details>
  <summary>Tabbys</summary>
  <dl id="tabbys">
    <dt>Carlos</dt>
    <dd><img src="http://placekitten.com/200/200?image=16" /></dd>
    <dt>Davy</dt>
    <dd><img src="http://placekitten.com/200/200?image=13" /></dd>
  </dl>
</details> 
```

[http://jsfiddle.net/DCnYC/1/](http://jsfiddle.net/DCnYC/1/) ​</p>

# c# - Visual Studio .NET 对象资源管理器语言

> ID：10216317
> 
> 赞同：1
> 
> 时间：2012-04-18T19:13:47.683
> 
> 标签：c#, visual-studio, visual-studio-2010

我正在使用 VS 2010，我注意到在使用对象资源管理器时，一切都以 VB.Net 的形式出现，如果它是 C# 对我来说真的会舒服得多。它会让我做噩梦。

注意我在 ASP.NET 网站项目中工作（连接到 IIS localhost）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:39:34.443

您的默认演示语言已更改。

> 转到工具->导入和导出设置->选择重置所有选项->然后会弹出一个窗口询问语言->在那里选择C#。

另请查看链接[更改默认演示语言](http://blogs.microsoft.co.il/blogs/shair/archive/2010/05/16/how-to-change-default-language-in-visual-studio.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:52:06.350

作为替代方案，如果您不想重置**所有**设置：

*   通过取消选择“导入和导出设置”对话框中的所有选项，然后检查“常规设置”-->“对象浏览器选项”，仅导出您的对象浏览器设置。
*   `.settings`在记事本（或您喜欢的文本编辑器）中打开您导出的文件
*   `<PropertyValue name="DefaultPresentationLanguage">`将设置更改为`VC#`（注意前面的 V）。
*   重新导入您的设置，您应该一切顺利。

# php - PHP 到 ASP.NET / C#

> ID：10216319
> 
> 赞同：-2
> 
> 时间：2012-04-18T19:13:58.837
> 
> 标签：php, asp.net

我正在尝试将以下内容转换为 ASP.NET C#

```
 <?php

/* Configuration Start */

$thumb_directory = 'img/thumbs';
$orig_directory = 'img/original';

$stage_width=600;   // How big is the area the images are scattered on
$stage_height=400;

/* Configuration end */

$allowed_types=array('jpg','jpeg','gif','png');
$file_parts=array();
$ext='';
$title='';
$i=0;

/* Opening the thumbnail directory and looping through all the thumbs: */

$dir_handle = @opendir($thumb_directory) or die("There is an error with your image directory!");

$i=1;
while ($file = readdir($dir_handle)) 
{
    /* Skipping the system files: */
    if($file=='.' || $file == '..') continue;

    $file_parts = explode('.',$file);
    $ext = strtolower(array_pop($file_parts));

    /* Using the file name (withouth the extension) as a image title: */
    $title = implode('.',$file_parts);
    $title = htmlspecialchars($title);

    /* If the file extension is allowed: */ 
    if(in_array($ext,$allowed_types))
    {
        /* Generating random values for the position and rotation: */
        $left=rand(0,$stage_width);
        $top=rand(0,400);
        $rot = rand(-40,40);

        if($top>$stage_height-130 && $left > $stage_width-230)
        {
            /* Prevent the images from hiding the drop box */
            $top-=120+130;
            $left-=230;
        }

        /* Outputting each image: */

        echo '
        <div id="pic-'.($i++).'" class="pic" style="top:'.$top.'px;left:'.$left.'px;background:url('.$thumb_directory.'/'.$file.') no-repeat 50% 50%; -moz-transform:rotate('.$rot.'deg); -webkit-transform:rotate('.$rot.'deg);">
        <a class="fancybox" rel="fncbx" href="'.$orig_directory.'/'.$file.'" target="_blank">'.$title.'</a>
        </div>';
    }
}

/* Closing the directory */
closedir($dir_handle);

?> 
```

在 ASP.NET 中，我如何循环浏览目录中的一系列图像？PHP中的“爆炸”是什么意思？这是一个do while循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:26:48.293

这可能会对您有所帮助。它有完整的代码示例：

**如何：枚举目录和文件** [http://msdn.microsoft.com/en-us/library/dd997370.aspx](http://msdn.microsoft.com/en-us/library/dd997370.aspx)

# javascript - 防止在 dom 树中收集相同元素的最佳方法？

> ID：10216321
> 
> 赞同：0
> 
> 时间：2012-04-18T19:14:04.293
> 
> 标签：javascript, dom

需要将 span 元素附加到 DOM。

```
if (check smth...) {

    a = createElement('span');
    a.id = '_span';
    b = document.getElementById('container');
    b.appendChild(a);

} 
```

在“if”中防止从 dom 树复制相同元素的最佳方法是什么？有点 - “打开窗户，在它关闭之前不要再这样做了”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:22:29.283

```
if ( document.getElementById( '_span' ) ) {
    // Your code where you're creating your element with id "_span"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:22:35.647

放置一个 ID 并在添加新元素之前检查是否存在具有给定 ID 的元素。

```
if($('#element_id').length) {
  //do nothing, element is already in the dom
} else {
  //add element
} 
```

# objective-c - 如何在 iOS 设备上使用 KML 制作追踪地图？

> ID：10216322
> 
> 赞同：1
> 
> 时间：2012-04-18T19:14:05.683
> 
> 标签：objective-c, google-maps, kml, tracking

我正在尝试制作一个基本的应用程序，在行走时在地图上显示我的轨迹。有没有教程或者源代码。

提前致谢。

编辑：一位朋友通过此代码示例代码帮助了我，但运行不佳[http://dl.dropbox.com/u/31913717/MapTracking.zip](http://dl.dropbox.com/u/31913717/MapTracking.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:41:03.763

我根本不是 iOS 开发者，只是从没学过。但是，我知道 iOS 有一个可能有用的[KMLViewer 。](http://developer.apple.com/library/ios/#samplecode/KMLViewer/Introduction/Intro.html)否则，您可能必须将 KML 解析为 XML，然后弄清楚如何处理它。

# asp.net-mvc - Xhrpost 没有击中控制器（网址）

> ID：10216325
> 
> 赞同：0
> 
> 时间：2012-04-18T19:14:18.410
> 
> 标签：asp.net-mvc, dojo

我正在尝试将数据发布到 mvc 控制器，但这样做没有成功..希望我能得到任何帮助...这里是 xhrpost 调用

```
var reqObj =
                {
                    Id: dojo.byId("Id").value,
                    Password: dojo.byId("Password").value
                };
                console.log(reqObj );
                var xhrArgs = {
                    url: '~/FormController/ValidateRequest',
                    postData: reqObj ,
                    handleAs: "json",
                    headers: { "Content-Type": "application/json", "Accept": "application/json"},
                    load: function (data) {
                        alert(data);
                    }
                }
            var deffered = dXhr.post(xhrArgs);
            console.log(deffered);
           } 
```

我什至看不到萤火虫的帖子……可能是什么问题……有什么线索吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:17:49.270

我看到了几个问题：首先，您`reqObj`使用要发布的值填充，但是，您将“ `request`”放入您的 xhrArgs。

其次，您需要转换`reqObj`为 json ( `dojo.toJson`)，因为您将帖子作为 json 处理。

另外，我没有看到对 dojo.xhrPost 方法的引用？您是否使用某种类型的框架来封装它？

# c# - 使用 log4net 的 Microsoft 企业库异常处理块

> ID：10216326
> 
> 赞同：0
> 
> 时间：2012-04-18T19:14:19.760
> 
> 标签：c#, asp.net, logging, log4net, enterprise-library

由于管理决策，我一定会使用 log4net。

我是否可以将 log4net 仅用于在企业库异常处理块中进行日志记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:19:51.060

是的，只需编写一个自定义处理程序。[我们在可扩展性实验室](http://www.microsoft.com/download/en/details.aspx?id=13738)（实验室 1 和 2）中展示了如何做到这一点。

# javascript - 标签上的打开文件对话框

> ID：10216331
> 
> 赞同：19
> 
> 时间：2012-04-18T19:14:43.700
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-18T19:21:01.240

您只能使用 input type=file 标签打开“打开文件”对话框。但是，您正在寻找的效果可以这样完成：

```
<input type="file" id="upload" name="upload" style="visibility: hidden; width: 1px; height: 1px" multiple />
<a href="" onclick="document.getElementById('upload').click(); return false">Upload</a> 
```

# android - 即使在 Android 3.2 上构建 LayerType 属性后，第三方库也存在问题

> ID：10216333
> 
> 赞同：1
> 
> 时间：2012-04-18T19:14:48.523
> 
> 标签：android, android-library

因此，我在 Android 4.0.3 中编写了整个应用程序。我使用[了 AmbilWarna](http://code.google.com/p/android-color-picker/)颜色选择器。然后我得到了这个要求，以减少 Android 2.3 的 SDK 要求。这就是一切都运行良好且一流的关键点

我已经降低了最低 SDK 要求。一切运行良好，除非我将 Ambil Warna 作为库包含在我的项目中，在使用 R 的任何地方我都开始收到错误，说 R 无法解析为变量。

在控制台上的战利品中，这似乎是问题的真正原因：

```
AmbilWarna\res\layout\ambilwarna_dialog.xml:18: error: No resource identifier found for attribute 'layerType' in package 'android' 
```

我已将 AmbilWarna 库项目的 Android SDK 设置为 3.2，在我的项目中设置为 2.3

有人有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:14:19.777

这是关于这个： http: [//developer.android.com/reference/android/view/View.html#attr_android :layerType](http://developer.android.com/reference/android/view/View.html#attr_android:layerType)

您只是在尝试使用`android`布局解析器的该 api 上不可用的属性。

我刚刚检查了您尝试使用的颜色选择器代码，它的 project.properties 说它是为目标 API-17（android 4.2）编写的，我正在尝试为 API-10（android 2.3.3）编译它

只需删除这些部分。

我的差异

```
--- a/AmbilWarna/res/layout/ambilwarna_dialog.xml
+++ b/AmbilWarna/res/layout/ambilwarna_dialog.xml
@@ -19,7 +19,7 @@
             android:id="@+id/ambilwarna_viewSatBri"
             android:layout_width="@dimen/ambilwarna_hsvWidth"
             android:layout_height="@dimen/ambilwarna_hsvHeight"
-            android:layerType="software" />
+        /> 
```

并希望它没有在代码中提及:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T23:16:19.813

我遇到了同样的问题，我想我可以构建并包含第三方 jar 文件并将其带到我的项目中 - 这导致了与您相同的问题 - AmbilWarna\res\layout\ambilwarna_dialog.xml 错误：没有资源标识符找到属性“layerType”。

为了修复它，我将源文件和所有资源复制到我的项目中（图像/布局等），嘿，它工作了。

感谢[http://code.google.com/p/android-color-picker/](http://code.google.com/p/android-color-picker/)提供了一个干净易用的颜色选择器！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T22:17:41.010

我的外部库也遇到了很多麻烦。通常有帮助的是**这些**相关的这些步骤中的一个或多个步骤：

1.  删除类中的**所有**R.java 导入（不能有任何导入）
2.  在 Eclipse 中：源 =>“清理”
3.  在 Eclipse 中：Project => "Clean..."（这将从头开始重建您的项目，从而重新生成您的 R.java）
4.  手动删除所有 R.java 并保存（位于 /gen/ 中）
5.  删除您的外部库项目并阅读它。

第 3 步通常为我完成了这项工作。另请注意，您的 minSdkVersion 和 targetSdkVersion 适合您的库项目（以及包含的指南）

# c++ - 在嵌套 C++ 循环中优化乘法器

> ID：10216335
> 
> 赞同：0
> 
> 时间：2012-04-18T19:14:54.207
> 
> 标签：c++, optimization, loops, nested

您好，我有以下代码段

```
 for(int k = 0; k< 1000; ++k)
    {

        double acc = 1.0;

        if(...)
        {
            short amSeq = 100;

            for (short c = 0; c <= 21; ++c)
            {
                for (short kk = (Range.uSequences[k][c]), s = SeqComp[c]; kk != 0; --kk, --s, --amSeq)
                {
                    acc *= static_cast<double>(s) / amSeq;
                }
            }
        }
        else
            acc = 0;

    } 
```

我想知道是否有任何方法可以优化`acc *= static_cast<double>(s) / amSeq;`删除 static_cast 的行将速度提高 200 倍，但显然会产生不正确的结果。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:28:24.963

您可以通过移动代码和使用正确的类型轻松避免转换：

```
if(...)
{
    double amSeq = 100;

    for (short c = 0; c <= 21; ++c)
    {
        double s = SeqComp[c];

        for (short kk = (Range.uSequences[k][c]); kk != 0; --kk, --s, --amSeq)
        {
                acc *= s / amSeq;
        }
    }
} 
```

# database - 使许多远程 DB 与主 DB 保持同步所需的 DBA 功能/工具是什么

> ID：10216337
> 
> 赞同：1
> 
> 时间：2012-04-18T19:15:03.140
> 
> 标签：database, postgresql, database-administration

我是一名前端开发人员，被要求完成一些 DBA 任务。未知水域。

我的客户有 10 个远程（离线）数据收集终端，托管一个 PostgreSQL 应用程序。我的任务是获取这些终端生成的 .backup 或 .sql 文件并将它们添加到主数据库中。所有这些数据库的架构都将匹配。但是合并操作会导致很多重复。我正在寻找一种可以将备份文件添加到现有数据库、过滤掉重复项并提供合并报告的工具。

DBA 领域有这种操作的术语吗？

这个功能是否通常内置在基本的数据库管理套件（例如 pgAdmin III）中，是否需要企业级工具，或者这是否可以在命令行上轻松完成？

**更新**

[此处](http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling)有关数据库复制的 PostgreSQL 文章和[词汇表](http://www.postgres-r.org/documentation/terms)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:34:43.710

您不能“合并一堆表”，但可以使用 Slony 将子表（即每个位置一个分区）复制回主数据库。

这不是开箱即用的解决方案，但可以使用 Bucardo 或 Slony 之类的解决方案，尽管需要做大量工作并增加维护。

# regex - (s)printf FORMAT 字符串的权威正则表达式

> ID：10216340
> 
> 赞同：7
> 
> 时间：2012-04-18T19:15:12.967
> 
> 标签：regex, perl, printf

我想回答[这个](https://stackoverflow.com/questions/7950530/python-equivalent-string-formatting-with-dictionary-in-perl-with-hashes)问题

要获得 Perl 的所有花哨格式**和**对哈希数据的键控访问，您需要一个（更好的版本）函数：

```
# sprintfx(FORMAT, HASHREF) - like sprintf(FORMAT, LIST) but accepts
# "%<key>$<tail>" instead of "%<index>$<tail>" in FORMAT to access the
# values of HASHREF according to <key>. Fancy formatting is done by
# passing '%<tail>', <corresponding value> to sprintf.
sub sprintfx {
  my ($f, $rh) = @_;
  $f =~ s/
     (%%)               # $1: '%%' for '%'
     |                  # OR
     %                  # start format
     (\w+)              # $2: a key to access the HASHREF
     \$                 # end key/index
     (                  # $3: a valid FORMAT tail
                        #   'everything' upto the type letter
        [^BDEFGOUXbcdefginosux]*
                        #   the type letter ('p' removed; no 'next' pos for storage)
         [BDEFGOUXbcdefginosux]
     )
    /$1 ? '%'                           # got '%%', replace with '%'
        : sprintf( '%' . $3, $rh->{$2}) # else, apply sprintf
    /xge;
  return $f;
} 
```

但我对捕获格式字符串“尾部”的冒险/蛮力方法感到羞耻。

那么：您可以信任 FORMAT 字符串的正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:03:03.810

可接受的格式在[`perldoc -f sprintf`](http://search.cpan.org/perldoc?perlfunc#sprintf). 在`'%'`和 格式字母之间，您可以拥有：

```
 (\d+\$)?         # format parameter index (though this is probably
                      # incompatible with the dictionary feature)

     [ +0#-]*         # flags

     (\*?v)?          # vector flag

     \d*              # minimum width

     (\.\d+|\.\*)?    # precision or maximum width

     (ll|[lhqL])?     # size 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:08:01.350

如果你问如何像 Perl 一样做，那么请咨询 Perl 是做什么的。

[Perl_sv_vcatpvfn](http://perl5.git.perl.org/perl.git/blob/dc281e6088d189558b79a5121119b7196c8b3db0:/sv.c#l9985)是`sprintf`格式解析器和评估器。（链接到 5.14.2 的实现。）

# asp.net - 从父页面单击按钮导致用户控件的gridview更改为不同的pageindex

> ID：10216343
> 
> 赞同：0
> 
> 时间：2012-04-18T19:15:27.337
> 
> 标签：asp.net, events, user-controls

我有一个按钮，一个用户控件，它在页面中包含一个网格视图。

如何单击页面中的按钮并使其用户控件的网格视图更改为某个页面索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:37:55.827

在您的 UserControl (fe `GotoPage(int index)`) 中提供一个公共方法。然后您可以从您的页面更改它`MyControl.GotoPage(111);`。

`GotoPage`可以实现为：

```
public void GotoPage(int index)
{
    //side-note: you can call BindGrid(e.NewPageIndex) also from GridView's PageIndexChanging
    BindGrid(index);
} 
```

并且`BindGrid`可以实现为：

```
private void BindGrid(int newPageIndex)
{
    // set it's DataSource
    var pageIndex = newPageIndex < 0 || newPageIndex >= GridView1.PageCount ? 0 : newPageIndex;
    GridView1.PageIndex = pageIndex;
    // DataBind it
} 
```

# tfs - TFS 2010 清除 SystemAssignedTo 过渡

> ID：10216345
> 
> 赞同：2
> 
> 时间：2012-04-18T19:15:33.407
> 
> 标签：tfs, workitem

我们为“进行中”和“完成”之间的任务引入了“代码审查”状态。当从“进行中”移动到“代码审查”时，我们想清除/取消分配 System.AssignedTo 但我不知道如何。有谁知道将逻辑放在 WIT xml 中的哪个位置以及它应该是什么样子？

谢谢，曼索斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T20:14:45.387

在 XML 编辑器中打开您的模式。下到`<TRANSITIONS>`零件并添加

```
<TRANSITION from="In Progress" to="Code Review">
   <FIELDS>
      <FIELD name="Assigned To">
         <EMPTY />
      </FIELD>
   <FIELDS>
</TRANSITION> 
```

确保在定义中的任何地方都没有`<REQUIRED>`该字段的任何内容（您可以通过多种方式获得该规则）。

有关参考，请参阅[http://msdn.microsoft.com/en-us/library/aa337653%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa337653%28v=vs.80%29.aspx)

# jquery - 只需要在脚本中合并一次动画功能

> ID：10216347
> 
> 赞同：1
> 
> 时间：2012-04-18T19:15:38.433
> 
> 标签：jquery, jquery-animate, scrolltop

而不是粘贴**$('html, body').animate({ scrollTop: 0}, 2500);** 对于每个输入，我可以只写一次以适用于所有输入吗？

发生的事情是我的屏幕滚动到脚本中每个事件的前几个，我不能再向下滚动了。

谢谢。

```
$(function () {
$('#rbSubmit').formValidator({
    scope: '#form_register',
    onError: function () {
        if ($('#input_2     input').hasClass('error-input')) {
            $('#r2 div, #r2 input').css('background-color', '#C1272D').css('color', '#FFF');
            $("#error-div").show();
            $('html, body').animate({
                scrollTop: 0
            }, 2500);
        } else {
            $('#r2 div').css('background-color', '#2F2F2F');
            $("#error-div").hide();
        }
        if ($('#input_3     input').hasClass('error-input')) {
            $('#r3 div, #r3 input').css('background-color', '#C1272D').css('color', '#FFF');
            $("#error-div").show();
            $('html, body').animate({
                scrollTop: 0
            }, 2500);
        } else {
            $('#r3 div').css('background-color', '#2F2F2F');
            $("#error-div").hide();
        }
        if ($('#input_7     input').hasClass('error-input')) {
            $('#r7  div,#r7 input').css('background-color', '#C1272D').css('color', '#FFF');
            $("#error-div").show();
            $('html, body').animate({
                scrollTop: 0
            }, 2500);
        } else {
            $('#r7 div').css('background-color', '#2F2F2F');
            $("#error-div").hide();
        }
        if ($('#input_10 textarea').hasClass('error-input')) {
            $('#r10 div').css('background-color', '#C1272D').css('color', '#FFF');
            $("#error-div").show();
            $('html, body').animate({
                scrollTop: 0
            }, 2500);
        } else {
            $('#r10 div').css('background-color', '#2F2F2F');
            $("#error-div").hide();
        }
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:27:14.753

创建一个名为

```
 doScroll = false; 
```

在每种情况下，您都需要它设置一个类似于 doScroll = true 的变量

然后进行最后一次验证

```
if (doScroll)

$('html, body').animate({ scrollTop: 0 }, 2500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:30:43.990

您应该能够利用 jQuery 选择器和遍历而不是多个函数调用：

```
onError: function(){
    $('.error-input').parents().find('html, body').animate({
        scrollTop: 0
    }, 2500);
    $('.error-input').parents().find('#error-div').show();
} 
```

通过基于 jQuery 调用`$('.error-input')`并返回到 DOM 根（HTML 标记），调用将以`.error-input`存在为条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:28:54.513

我没有办法对此进行测试，因为我没有您的标记或任何东西.. 但我认为您可以通过执行以下操作来真正减少您使用的代码。

```
$(function () {
    $('#rbSubmit').formValidator({
        scope: '#form_register',
        onError: function () {
            var isError = false;
            $('#form_register input').each(function(){
                var inputNum = $(this).id.split('_')[1];

                if($(this).hasClass('error-input')){
                     isError = true;

                     $('#r' + inputNum +' div, #r' + inputNum +' input').css('background-color', '#C1272D').css('color', '#FFF');
                     $("#error-div").show();
                }else{
                     $('#r'+ inputNum + ' div').css('background-color', '#2F2F2F');
                }
            });

            if(isError){
                $('html, body').animate({
                    scrollTop: 0
                }, 2500);
            } else {
               $("#error-div").hide();
            }
        }
    });
}); 
```

​基本上，它会检查所有输入并检查它们是否有错误类，如果有，则获取数字（因为顺便说一下，您在 id 中引用数字并不是一个好习惯）。然后它选择相关元素并执行它需要做的事情，尽管我认为这可以通过根据与文档中错误输入相关的位置来选择它们来改进。毕竟，如果其中任何一个出现错误，它会设置一个标志，并执行动画。

# android - 在android中强制关闭地图视图上方的编辑文本

> ID：10216351
> 
> 赞同：2
> 
> 时间：2012-04-18T19:15:52.673
> 
> 标签：android, google-maps, android-relativelayout, android-edittext

我想在 android 的 mapview 上方添加编辑文本，所以我创建了这个布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:id="@+id/base">

<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:id="@+id/zoomtext"
    >
</EditText>

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="myAPIkey"
    android:layout_below="@+id/zoomtext"/>
</RelativeLayout> 
```

这是我的java代码

```
package zoom.map;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

import android.os.Bundle;
import android.widget.EditText;

public class ZoomapActivity extends MapActivity {
EditText zoombtn;
int angkazoom;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    zoombtn = (EditText) findViewById(R.id.zoomtext);
    angkazoom = mapView.getZoomLevel();
    zoombtn.setText(angkazoom);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

这是我的错误日志猫

```
04-18 13:08:37.230: E/AndroidRuntime(309): FATAL EXCEPTION: main
04-18 13:08:37.230: E/AndroidRuntime(309): java.lang.RuntimeException: Unable to start activity ComponentInfo{zoom.map/zoom.map.ZoomapActivity}:    android.content.res.Resources$NotFoundException: String resource ID #0x3
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.os.Looper.loop(Looper.java:123)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-18 13:08:37.230: E/AndroidRuntime(309):  at java.lang.reflect.Method.invokeNative(Native Method)
04-18 13:08:37.230: E/AndroidRuntime(309):  at java.lang.reflect.Method.invoke(Method.java:521)
04-18 13:08:37.230: E/AndroidRuntime(309):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-18 13:08:37.230: E/AndroidRuntime(309):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-18 13:08:37.230: E/AndroidRuntime(309):  at dalvik.system.NativeStart.main(Native Method)
04-18 13:08:37.230: E/AndroidRuntime(309): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x3
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.content.res.Resources.getText(Resources.java:201)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.widget.TextView.setText(TextView.java:2817)
04-18 13:08:37.230: E/AndroidRuntime(309):  at zoom.map.ZoomapActivity.onCreate(ZoomapActivity.java:21)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 13:08:37.230: E/AndroidRuntime(309):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-18 13:08:37.230: E/AndroidRuntime(309):  ... 11 more 
```

我不知道出了什么问题..布局没有问题，我在通过stackoverflow搜索的java中没有错误，但还没有找到答案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:20:51.443

这条线

```
angkazoom = mapView.getZoomLevel(); 
```

正在检索整数值。

打电话时

```
zoombtn.setText(angkazoom); 
```

android假设您正在尝试将您的文本设置为字符串资源ID（一个int）。这个ID“应该”映射到一个字符串值。当它搜索该ID时它会失败，因为它不存在并导致你的崩溃.

如果您要显示的只是缩放级别，请使用

```
zoombtn.setText(angkazoom + ""); 
```

允许您的文本以字符串表示形式显示缩放级别

# event-handling - 安装扩展 B 时，chrome.management.onInstalled.addListener 可以提醒扩展 A 吗？

> ID：10216354
> 
> 赞同：0
> 
> 时间：2012-04-18T19:16:01.503
> 
> 标签：event-handling, google-chrome-extension

这是我的代码：

```
...
if($("input:checked").length > 0) {
    chrome.tabs.create(
        {url:"http://www.multiculturalyp.com/multiculturalypnewtab.crx"},
        function(tab) {
            chrome.management.onInstalled.addListener(function(info){alert("Installed A");});
            chrome.management.onEnabled.addListener(function(info){alert("Enabled A");});
        }
    );
    chrome.tabs.create(
        {url:"instructions.html"},
        function(tab) {
            chrome.management.onInstalled.addListener(function(info){alert("Installed B");});
            chrome.management.onEnabled.addListener(function(info){alert("Enabled B");});
        }
    );
}
... 
```

那么发生了什么：我编写了一个扩展程序，如果用户使用该扩展程序的选项进行选择，则会安装第二个扩展程序，所以我以 html 的形式启动指令，告诉用户如果他们真的想要安装它，应该点击什么. 我想自动隐藏第二个扩展安装的说明（关闭说明选项卡）。问题是似乎既没有触发 onInstalled 也没有触发 onEnabled 事件。我上面的示例是一个简化版本的逻辑，它只是在触发事件时发出警报，但到目前为止，我无法在扩展 A 中触发扩展 B 的 onInstalled 事件。当它们没有时，我分别注册了两次事件第一次工作。警报以 A 或 B 结尾，只是为了告诉我是第一个注册的侦听器、第二个还是两者都被触发，

那么这可以做到吗？如果是这样，我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T00:54:46.893

我的建议 - 在执行带有扩展名的 url 之前尝试绑定事件。绑定一次事件并检查其类型以执行操作（在后台页面中！）：

```
 chrome.management.onInstalled.addListener(function(info){
        if(info.id == MY_EXTENSION_ID){
            alert("Installed");
        }            
    });

    chrome.management.onEnabled.addListener(function(info){
        if(info.id == MY_EXTENSION_ID){
            alert("Enabled");
        }
    });

    chrome.tabs.create({url:"http://www.multiculturalyp.com/multiculturalypnewtab.crx"},
        function(tab) {alert('tab was opened')}); 
```

# internet-explorer - Internet Explorer 和缓存

> ID：10216355
> 
> 赞同：1
> 
> 时间：2012-04-18T19:16:03.577
> 
> 标签：internet-explorer, browser-cache

想象一下：两台相同的计算机在同一代理服务器后面的同一网络上运行相同的操作系统 (Windows XP) 和相同版本的 IE (v8.0)。

每台计算机的用户都可以访问我们的 Web 应用程序（托管在网络之外）。一个用户（“Alan”）在部署过程中这样做并缓存了一堆废话。另一个用户（“Bob”）等到部署之后（然后是一些修复补丁）并且运行顺利。

因此，在部署正确完成后，Alan 会再次尝试访问该应用程序。遇到各种问题。技术支持的典型响应是“清除缓存并重试”。这样做 - 没有修复。这很奇怪，因为大多数网站出现，只选择图像和一些相当简单的 HTML。

问题：我们如何完全消除 Alan 的缓存，以便他可以像 Bob 在隔壁隔间一样享受应用程序？

我们尝试了 Ctrl+F5 我们尝试了工具->Internet 选项->（浏览历史）删除。
我们再次尝试然后重新启动。我们尝试了工具-> Internet 选项->（浏览历史记录）设置/查看文件并手动删除我们在那里看到的所有内容。

每次尝试之后，鲍勃都对艾伦的不幸不断地冷笑。

如果它很重要，Web 应用程序是托管在 LAMP 堆栈上的 PHP/Javascript 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:27:49.560

尝试检查工具-> Internet 选项->（浏览历史记录）设置中的“每次访问网页”选项，看看是否有帮助。

# android - 动画列表根本无法启动

> ID：10216369
> 
> 赞同：1
> 
> 时间：2012-04-18T19:16:48.893
> 
> 标签：android, animation

我正在开发一个应该有进度对话框的项目。但是由于我没有找到一种简单的方法来设置进度对话框的样式，我在想，最简单的方法是创建一个具有自己样式的自定义对话框类，并在其上逐帧动画，然后显示它。这是我的代码：

对话框的 xml 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/dialog_background"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="10dp" >

    <ImageView
        android:id="@+id/loaddialog_animation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/loadanimation"
        android:layout_marginRight="10dp" />

    <TextView
        android:id="@+id/loaddialog_text"
        style="@style/SmallText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这是我的对话类：

```
public class LoadDialog extends Dialog
{
    private TextView message;
    ImageView image;
    AnimationDrawable animation;

    public LoadDialog(Context context)
    {
        super(context, R.style.Dialog);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.load_dialog);

        message = (TextView) findViewById(R.id.loaddialog_text);

        image = (ImageView) findViewById(R.id.loaddialog_animation);
        image.setBackgroundResource(R.drawable.loadanimation);
        animation = (AnimationDrawable) image.getBackground();
    }

    public void setText(String msg)
    {
        message.setText(msg);
    }

    @Override
    public void show()
    {
        super.show();
        animation.start();
    }

    @Override
    public void dismiss()
    {
        animation.stop();
        super.dismiss();
    }   
} 
```

和动画资源：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="true" >
    <item android:drawable="@drawable/loadbar_01" android:duration="50" />
    <item android:drawable="@drawable/loadbar_02" android:duration="50" />
    <item android:drawable="@drawable/loadbar_03" android:duration="50"/>
</animation-list> 
```

问题是动画没有开始，当我尝试显示它时。我知道，有很多关于这个问题的话题，但这里是我尝试过的事情：

1.  将对话框 show() 放在我活动的不同部分：onResume() 和 onCreate()。onWindowFocusChanged() 不是一个选项，因为我想显示一个对话框。显示对话框->焦点更改，关闭对话框->焦点更改->显示无限数量的对话框。
2.  我试过animation.setCallback（image），animation.setVisible（true，true），animation.invalidateSelf（）它们都不起作用。
3.  我已经尝试了 image.post() 并在其中放置了一个 runnable 作为参数，并且在启动动画的 run 方法中，没有运气。

在这一点上，我开始没有选择了。我只是想显示 3 个图像在对话框被关闭之前发生变化。如果你知道，我做错了什么，或者任何替代方案，请告诉我！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:24:22.117

将 android:oneshot="true" 更改为 android:oneshot="false" 以便重复。它目前应该只做一个周期，因为你的表演时间是 50，那真的很快。我也会把它改成200左右..

```
<?xml version="1.0" encoding="utf-8"?> 
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false" >
<item android:drawable="@drawable/loadbar_01" android:duration="200" />
 <item android:drawable="@drawable/loadbar_02" android:duration="200" />
 <item android:drawable="@drawable/loadbar_03" android:duration="200"/>
 </animation-list> 
```

此外，您正在 xml 布局中设置图像，但为背景设置了动画，因此您需要将 xml 布局更改为：

```
<ImageView         android:id="@+id/loaddialog_animation"         android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/loadanimation"
android:layout_marginRight="10dp" /> 
```

或更改您的代码以获取 src 文件而不是背景，如下所示：

```
image = (ImageView) findViewById(R.id.loaddialog_animation);
image.set(R.drawable.loadanimation);
animation = (AnimationDrawable) image.getDrawable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T09:49:27.843

今天面临同样的问题。将`animation.start()`onShow() 方法放入 OnShowListener 对我来说是诀窍。

```
public class CustomProgressDialog extends Dialog 
{
ImageView progressImage;
AnimationDrawable frameAnimation;

public CustomProgressDialog(Context context)
{
    super(context);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.custom_progress);
    getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));

    progressImage = (ImageView) findViewById(R.id.custom_progress_image);
    progressImage.setBackgroundResource(R.anim.progress_anim);

    frameAnimation = (AnimationDrawable) progressImage.getBackground();

    OnShowListener osl = new OnShowListener() 
    {
        @Override
        public void onShow(DialogInterface dialog)
        {
            frameAnimation.start();
        }
    }; 
    setOnShowListener(osl);

    OnDismissListener odl = new OnDismissListener() 
    {

        @Override
        public void onDismiss(DialogInterface dialog) 
        {
            frameAnimation.stop();
        }
    };
    setOnDismissListener(odl);
}

} 
```

# asp.net - 在 netframework.aspx 中出现错误“服务器块格式不正确”

> ID：10216374
> 
> 赞同：1
> 
> 时间：2012-04-18T19:17:02.083
> 
> 标签：asp.net

我在 Visual Studio 2010 中打开了一个大型的 asp.net 项目；该项目已经有几个月没有动过，上次我打开它时，它构建得很好。但是今天它在构建过程中出现错误——编辑——实际上，构建和重建都可以工作；直到我尝试开始调试才会发生错误。

```
 DESCRIPTION.............................FILE...............LINE
 "The server block is not well formed"    netframework.aspx  275150 
```

和以下不可读的垃圾：

> 像 '<%$ AëÜË ¾ø2µ¬GP‰¦M†M²·tÕEôâ3)úè¦¢Š7*ÃGzü‰v;§h¿ñÒÿÕùhXY&~ŠÐ÷Îç&þÊoaãÙ,–ûm…iû^|J[jÜÏ±R[~ ó-ü×?¦S8I FÙ `œ`h¶©)CO-qz†ô—„<em>„mó+‚ìW¼„ý–åC6Emo«„>v¥>¨C,íc«2•dŸwì9+®Vù@üãwš^ (œèÎ¾ñF4×ME½Ú"ÝÚd$eO›N ‹~Î8±°K×E<·NØKäµ)›,Ù¥¬ ý—Ÿ##”e¸fšæPÐ{³ãQèëZ/G½Ci„å...€bØÇ½á_$ÄøÛ±ÝÆÅÇÀáèÅš¼ ”kôX¨ÇHŽEŸñÎ∼LJÑ”NÀ$_ü€ô>$Y,I ¥u»dFÒ~WH*”D:ì1<:êª©[k¥õ²éÍ”ìâ®hàŽ)Ûp7”d—rTÚÇICýp†5Å«¡ @ØJª‡è›Þ"RËŠÚ‰Åi‰ï/ªîë 7±¶cYJ¯¬—àÖ'öGUéÒ ;î'mõnÛ¿Xè‹Oñ&BÉ¸Ä}ŽåíXÑ¬¯ë3Ê*';ëÔÙÆv½‡ sk)¾ÀÈBk±mvõò3c] ¾UsLq/¶Ùî~')ÛraÀÖ,ó››Kì¦é…¾QtÃ$šÁl¸"èGæ¨˜´aÔ}qÛžòn!=ÎéCáê©H¢J7C5ˆQ»™bXO“ø³ê¶®^'d0ï0”ÃæBD›“© /©;“îqe_Åk/k“, ÎµhnŸëœÍ<07Ó@ñ""'ÐÒ—g UQ5ósžýªí”vÓZ"\yzÈ„+ø_V»;wlmùÎ ñI+è¬“ª, ãpñ+ÜŸt”zSÈPíÒÑðw9#DUpÞJ«vú C: \inetpub\wwwroot\MYAPP\netframework.aspx 177272

如何开始在大型项目中解决这些错误？正如我所说，上次打开它时构建良好--- 编辑：运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-16T17:07:58.897

对于现在重要的是，对于我机器上的这个问题，我发现我是 @Import(ing) 正在调用的局部视图中的命名空间，但没有使用引用。我删除了命名空间 @Import 并且错误消失了。

# model-view-controller - CFWheels - 如何有一个表格自我发布？

> ID：10216377
> 
> 赞同：2
> 
> 时间：2012-04-18T19:17:25.203
> 
> 标签：model-view-controller, coldfusion, railo, cfwheels

我是车轮新手，仍在学习。在我看来，表单的每个帖子都需要调用映射到特定模型中的方法的操作。但是，表单是否可以发布到自身？

我要避免的是人们直接导航到动作视图——这似乎会引发错误。我还想做很多自我发布，因为这可能意味着我不必在我的视图文件夹中放置很多空文件。

我正在考虑的另一个优点是，如果表单是自发布的，我将受益于在全球范围内使用它。例如，我可能在我的标题中有一个表单，我希望我的用户在网站的任何地方填写。或者有没有办法检测用户来自哪里并进行动态重定向？

非常感谢，迈克尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:21:46.367

Michael，您可能需要考虑制作一个像 Ajaxy 这样的表格。换句话说，您可以让它使用 jQuery 或类似方法将表单数据提交到远程 CFC 方法（即，访问属性设置为“remote”的方法）。该 CFC 可以像往常一样发挥它的魔力，并返回您在视图中采取的适当响应。

这是 Wheels 文档“ [Wheels, Ajax and You](http://cfwheels.org/docs/1-1/chapter/wheels-ajax-and-you) ”的链接。该部分中有一些不错的东西，它可能就是您在这里寻找的东西！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:56:24.117

为避免由于用户浏览`post`操作而导致的错误，请查看验证： [http ://cfwheels.org/docs/chapter/verification](http://cfwheels.org/docs/chapter/verification)

因此，您的`create`和`update`操作将在控制器中这样配置`init`：

```
<cffunction name="init">
    <cfset verifies(only="create,update", post=true, params="comment", paramsTypes="struct")>
</cffunction> 
```

在表单发布后将用户重定向回上一页并不是不合理的。看看`redirectTo(back=true)`你的成功行动。 [http://cfwheels.org/docs/1-1/function/redirectto](http://cfwheels.org/docs/1-1/function/redirectto)

```
<cffunction name="init">
    <cfscript>
        verifies(only="create,update", params="comment", paramsTypes="struct");
        provides("html,json");
    </cfscript>
</cffunction>

<cffunction name="create">
    <cfscript>
        comment = model("comment").new(params.comment);
        comment.save();

        if (isAjax())
        {
            renderWith(comment);
        }
        else
        {
            if (comment.hasErrors())
                redirectTo(back=true, error="There was an error saving the comment.");
            else
                redirectTo(back=true, success="The comment was posted successfully.");
        }
    </cfscript>
</cffunction> 
```

是的，我喜欢 Craig 的回答，即 AJAX 是一个很好的解决方案，但是您还需要考虑如果 AJAX 失败并且表单最终通过非 AJAX 请求发布到 URL 会发生什么。最好提供完全可访问的体验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:45:53.703

我对 Wheels 知之甚少的是，它是一个受 Ruby on Rails 启发的固执己见的 MVC 框架。您正在通过将表单发布到自身并绕过控制器来请求避免模型-视图-控制器模式的帮助。在这样的框架中，这不应该是可能的，或者至少是不鼓励的。

一个好的 MVC 框架应该允许您在全局范围内重用您的模型、视图，在某些情况下甚至是控制器。

# hibernate - Web 项目中的 DAO、Hibernate 和会话

> ID：10216383
> 
> 赞同：2
> 
> 时间：2012-04-18T19:17:42.077
> 
> 标签：hibernate, session

我已经阅读了很多关于 DAO 和会话的问题，但不理解问题。现在我使用这样的东西：[核心 DAO](http://techtracer.com/wp-content/uploads/2008/12/daojava.txt)（我在核心 DAO 中添加了一些额外的检查）和基于 wicket 框架的 Web 项目的[DAO 实现。](http://techtracer.com/wp-content/uploads/2008/12/admindaohibernateimpljava.txt)一般来说，这种模式可以描述为：

1) 每 1 个线程使用 1 个会话；

2) 从不关闭会话；

3）始终在操作后提交事务。

我使用 DDoS 实用程序对其进行了测试，并且此实现工作（每秒 100 个连接）。但是当我增加连接数时，我会有很多关于关闭会话而不是开始事务的异常。我如何理解我应该使用 getCurrentSession() 而不是 openSession() 但是当我使用 getCurrentSession() 在核心 DAO 中修改方法 getSession() 时，我没有修复错误:(。然后我尝试使用 c3p0 和 bonecp。但是那些强大的工具对我没有帮助。也许你可以解释我的错误 :( 除了 DNA 中的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T07:31:29.197

您从任何地方复制的 DAO 将休眠会话存储在 ThreadLocal 对象中，即，正如您所提到的，一个休眠会话绑定到一个线程。

但是你正在做一个网络项目。在那里，您应该将一个 Hibernate 会话绑定到一个用户（或浏览器），即绑定到一个 Http 会话。但是您不知道来自一个 http 会话的请求是在哪个线程中处理的。因此，在您的解决方案中，相同的 Http 会话可能会获得不同的 Hibernate 会话，或者不同的 Http 会话可能会获得相同的 Hibernate 会话。这取决于您的 Http 服务器。

解决方法：把Hibernate session放到Http session中（不要*使用*ThreadLocal对象）。你得到 Http session 对象`HttpServletRequest.getSession()`和 with ，`HttpSession.getAttribute()`你`HttpSession.setAttribute()`可以设置 Hibernate session 和其他 Http session 相关数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T14:28:21.420

这个问题已经有了答案，但是给未来来这里的人（如我）更多的想法如何处理它。

目前我正在实现一个无状态的 Restful API，所以我不想使用会话或在用户和服务器之间有任何类型的链接。我对这个问题的解决方案是在每次请求后使用过滤器（用于提交或回滚事务的同一过滤器）清理 EntityManager。它基本上从应用程序中删除了缓存，但我只需要在同一个事务中进行缓存，所以它完全没问题且可取。

# objective-c - 显示一个周期的计数

> ID：10216392
> 
> 赞同：0
> 
> 时间：2012-04-18T19:18:19.773
> 
> 标签：objective-c, for-loop, cycle

我有三个变量，一个叫做 A = 2012，第二个叫做 B = 2020，第三个是 C = B - A。C 是年份的差异。现在我想在屏幕上看到两个日期之间的年份：2012 2013 2014 2015 2016 2017 2018 2019 2020。我尝试了不同的解决方案，但我做不到，我认为正确的方法是循环。这样对吗？你能告诉我怎么做吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:36:29.487

我假设你的意思是循环循环？你可以试试这个：

```
int a = 2012;             // Holds the first year
int b = 2020;             // Holds the last year
int c = b - a;            // Holds the difference of the a and b
while(a<=b) {             // Execute this as long as a is equal or less then b
    NSLog("Year: %d", a); // Print the year to the console
    a++;                  // Increment the value of a with 1
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-18T19:22:27.590

```
for(int i=0;i<=c;i++)
{
 NSLog(@"The Year is %i \n",a+i);
} 
```

# php - 提交按钮不起作用 - if else 语句

> ID：10216394
> 
> 赞同：0
> 
> 时间：2012-04-18T19:18:24.687
> 
> 标签：php, mysql

我希望我的提交按钮在单击时运行 if else 语句。在我的用户表中的“完成”字段中，如果值为 6 或更高，则应发送电子邮件（我有此代码），否则应显示错误或重定向到错误页面（我可以创建）。这是我的尝试，但即使值为 6 也会显示错误消息

```
$usr_email = 'usr_email';
$user_name = 'user_name';
{
$sqltest = "SELECT complete From users where user_id =
".intval($_SESSION['user_id']);
}
if (isset($_POST['doSend'])) {

function getOne($query){
    $res = mysql_query($query);
    if (!$res) {
        trigger_error("db: ".mysql_error()." in ".$query);
        return FALSE;
    }
}
    if ($row = mysql_fetch_row($res)) {
        return $row[0];
    }

$isSending = getOne($sqltest);
$isSending === false;
if($isSending >= 6){
require_once "Mail.php";

$from = "<xxx>";
$to = "$usr_email";
$subject = "Hi";
$body = hello ";

$host = "ssl://smtp.gmail.com";
$port = "465";
$username = "xxx";
$password = "xxx";

$headers = array ('From' => $from,
    'To' => $to,
    'Subject' => $subject);
$smtp = Mail::factory('smtp',
    array ('host' => $host,
        'port' => $port,
        'auth' => true,
        'username' => $username,
        'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
    echo("<p>" . $mail->getMessage() . "</p>");
} else {
    header ("Location: error.php");
}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:24:05.097

看起来你周围没有表格？这个怎么样：

```
<p align="center">
<form action="<?=$_SERVER['PHP_SELF']?>" method="POST">
    <input name="doSend" type="submit" id="doSend" value="Submit Application">
</form>
</p> 
```

@你的评论：即使它高于 6？像这样？

```
$isSending = getOne(9); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:25:11.087

改变

```
<p align="center">
    <input name="doSend" type="submit" id="doSend" value="Submit Application">
</p> 
```

到

```
<form name="input" action="myaccount.php" method="post">
    <input name="doSend" type="submit" id="doSend" value="Submit Application">
</form> 
```

您需要`else`在外部`if`语句中添加一个。

```
$isSending = getOne($sqltest);
$isSending === false;
if($isSending >= 6){
    require_once "Mail.php";

    $from = "<xxx>";
    $to = "$usr_email";
    $subject = "Hi";
    $body = hello ";

    $host = "ssl://smtp.gmail.com";
    $port = "465";
    $username = "xxx";
    $password = "xxx";

    $headers = array ('From' => $from,
        'To' => $to,
        'Subject' => $subject);
    $smtp = Mail::factory('smtp',
        array ('host' => $host,
            'port' => $port,
            'auth' => true,
            'username' => $username,
            'password' => $password));

    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
        echo("<p>" . $mail->getMessage() . "</p>");
    } else {
        echo("<p>Message successfully sent!</p>");
    }
}
else
    header ("Location: error.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:21:00.243

在大多数（如果不是所有）浏览器中，如果不在 <form/> 中，提交按钮什么也不做，您的 html 是否在您的 <input/></form> 周围有 <form>标签？如果没有，请将您的输入标签包装在一个表单中，它将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T20:51:24.227

您的函数定义在第二`if`条语句之前终止：

```
function getOne($query){
    $res = mysql_query($query);
    if (!$res) {
        trigger_error("db: ".mysql_error()." in ".$query);
        return FALSE;
    }
}
if ($row = mysql_fetch_row($res)) {
    return $row[0];
} 
```

应该：

```
function getOne($query){
    $res = mysql_query($query);
    if (!$res) {
        trigger_error("db: ".mysql_error()." in ".$query);
        return FALSE;
    }
    if ($row = mysql_fetch_row($res)) {
        return $row[0];
    }
} 
```

就像现在一样，从 sql 查询中获得的值永远不会返回。

# node.js - 错误：无法在 Express 中查找视图

> ID：10216395
> 
> 赞同：72
> 
> 时间：2012-04-18T19:18:27.027
> 
> 标签：node.js, express, pug

**注意**：我在帖子末尾的自动回答

我正在尝试更好地体验 nodeJS，但我真的不喜欢将所有脚本放在一个文件中。

所以，按照这里的帖子，我使用这个结构

```
./
 config/
   enviroment.js
   routes.js
 public/
   css/
     styles.css
   images
 views
   index
     index.jade
   section
     index.jade
   layout.jade
 app.js 
```

我的文件现在是：

**应用程序.js**

```
var express = require('express');
var app = module.exports = express.createServer();

require('./config/enviroment.js')(app, express);
require('./config/routes.js')(app);

app.listen(3000); 
```

**环境.js**

```
module.exports = function(app, express) {
    app.configure(function() {
        app.use(express.logger());
        app.use(express.static(__dirname + '/public'));
        app.set('views', __dirname + '/views');
        app.set('view engine', 'jade'); //extension of views

    });

    //development configuration
    app.configure('development', function() {
        app.use(express.errorHandler({
            dumpExceptions: true,
            showStack: true
        }));
    });

    //production configuration
    app.configure('production', function() {
        app.use(express.errorHandler());
    });

}; 
```

**路由.js**

```
module.exports = function(app) {

    app.get(['/','/index', '/inicio'], function(req, res) {
        res.render('index/index');
    });

    app.get('/test', function(req, res) {
        //res.render('index/index');
    });

}; 
```

**布局.jade**

```
!!! 5
html
    head
        link(rel='stylesheet', href='/css/style.css')
        title Express + Jade
    body
        #main
            h1 Content goes here
            #container!= body 
```

**索引/索引.jade**

```
h1 algoa 
```

我得到的错误是：

> 错误：在渲染 (c:\xampp\htdocs \nodejs\buses\node_modules\express\lib\response.js:614:9) 在 ServerResponse.render (c:\xampp\htdocs\nodejs\buses\node_modules\express\lib\response.js:638:5) 在c:\xampp\htdocs\nodejs\buses\config\routes.js:4:7 在回调 (c:\xampp\htdocs\nodejs\buses\node_modules\express\lib\router\index.js:177:11)在参数 (c:\xampp\htdocs\nodejs\buses\node_modules\express\lib\router\index.js:151:11) 在传递 (c:\xampp\htdocs\nodejs\buses\node_modules\express\lib\ router\index.js:158:5) 在 Router._dispatch (c:\xampp\htdocs\nodejs\buses\node_modules\express\lib\router\index.js:185:4) 在 Object.router [作为句柄] （C：\xampp\htdocs\nodejs\buses\node_modules\express\lib\router\index.js:45:10）在下一个（c:\xampp\htdocs\nodejs\buses\node_modules\express\node_modules\connect\lib\proto .js:191:15)

但我真的不知道是什么问题......

我开始想是因为模块导出......

**答：** 我发现的唯一解决方案是更改我定义 app.set('views') 和视图引擎的位置

我将其移至 app.js，现在运行良好。

```
var express = require('express');
var app = module.exports = express.createServer();

require('./config/enviroment.js')(app, express);

app.set('views', __dirname + '/views');
app.set('view engine', 'jade');

require('./config/routes.js')(app);

app.listen(3000); 
```

我真的不明白这背后的逻辑，但我想它有一个。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-28T21:10:16.740

添加到@mihai的答案：

如果您在 Windows 中，那么仅连接`__dirname' + '../public'`将导致错误的目录名称（例如：）`c:\dev\app\module../public`。

而是使用`path`，这将与操作系统无关：

```
var path = require ('path');
app.use(express.static(path.join(__dirname + '../public'))); 
```

[path.join](http://nodejs.org/api/path.html#path_path_join_path1_path2)将规范化路径分隔符并返回正确的路径值。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-18T19:45:38.133

`npm install express@2.5.9`如果有帮助，安装以前的版本。

我知道在 3.x 中删除了视图布局机制，但这可能不是您的问题。也替换`express.createServer()`为`express()`

### 更新：

这是你来自 environment.js 的 __dirname
它应该是：

```
app.use(express.static(__dirname + '../public')); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-06-28T13:26:06.753

通过在 app.js 文件中添加以下代码来解决

```
app.engine('html', require('ejs').renderFile);
app.set('view engine', 'html');
app.set('views', __dirname);

app.get('/', function(req, res){
    res.render("index");
}); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-11-06T14:17:18.170

起初我有同样的错误，我真的很生气。你只需要`./`在模板路径之前

```
res.render('./index/index'); 
```

希望它有效，对我有用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-06-07T14:07:33.340

您可以将路径设置为像这样的常量并使用 express 进行设置。

```
const viewsPath = path.join(__dirname, '../views') 
app.set('view engine','hbs')

 app.set('views', viewsPath)

 app.get('/', function(req, res){

 res.render("index");

}); 
```

这对我有用

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-07T04:40:23.677

检查您是否使用了正确的视图引擎。就我而言，我更新了 npm 并最终将引擎更改为“hjs”（我试图卸载jade以使用哈巴狗）。所以将它从 app.js 文件中的 hjs 更改为玉对我有用。

```
 app.set('view engine','jade'); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-19T17:41:41.353

就我而言，我用以下方法解决了它：

```
app.set('views', `${__dirname}/views`);
app.use(express.static(`${__dirname}/public`)); 
```

我需要`node app.min.js`从`/dist`文件夹开始。

我的文件夹结构是：

[![从 /dist 启动应用程序](../Images/67b6ca5b3fab900e59c128e77bd38c12.png)](https://i.stack.imgur.com/mbYPR.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-11T18:44:51.977

由于区分大小写的文件名，基本上可以看到此问题。例如，如果您将文件保存为 index.jadge，而不是路径上的鬃毛，则在 Windows 中它应该是“索引”而不是“索引”，这没关系，但在像服务器这样的 linux 中，这会产生问题。

**1)**如果文件名是**index.jadge**

```
app.get('/', function(req, res){
      res.render("index");
}); 
```

**2)**如果文件名是**Index.jadge**

```
app.get('/', function(req, res){
      res.render("Index");
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-01T12:58:39.187

使用此代码解决问题

```
app.get('/', function(req, res){
    res.render("index");
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-26T16:34:34.923

只是注意到我用前导空格命名了我的`' index.html'`文件`'index.html'`。这就是它找不到它的原因。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-05-25T18:40:38.090

这个错误实际上只与文件路径有关，这就是你需要检查的所有内容，对我来说，我的父文件夹是“布局”，但我的实际文件是`layout.html`，我的路径在两个路径上都有布局，一旦我纠正了那个错误就消失了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-08T18:23:38.497

我将视图文件夹名称更改为 views_render 并且也面临与上述相同的问题，因此重新启动 server.js 并且它对我有用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-11T20:24:18.720

我遇到了同样的问题，可以使用 dougwilson 的解决方案来解决它：从 2017 年 4 月 5 日起，[Github](https://github.com/expressjs/express/issues/3267)。

1.  我将文件名从更改`index.js`为`index.pug`
2.  然后在`'/'`路由中使用：`res.render('index.pug')`- 而不是`res.render('index')`
3.  设置环境变量：`DEBUG=express:view` 现在它就像一个魅力。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-08-17T20:39:57.570

我在 Linux 上也遇到过这个问题

```
I had the following

  res.render('./views/index')

I changed it too
  res.render('../views/index') 
```

现在一切正常。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-03-29T16:38:14.480

我遇到过同样的问题。然后只需检查资源管理器中的文件目录。有时视图文件夹不存在。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-09-16T11:33:02.017

就我而言，我在 Windows Server 上部署了我的 Web 应用程序，并且我设置了一个服务来运行一个只有一行作为内容的 .bat 文件：

```
node D:\webapp\app.js 
```

但这还不够。在此之前我还必须更改目录，所以我在 .bat 文件的开头添加了以下行：

```
cd D:\webapp 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-11-17T23:32:32.903

我遇到了同样的问题，但是，我将文件名从 index.html 更改为 index.ejs 并且可以工作！！！！

```
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
    res.render('index');
});

router.get('/contact', (req, res) => {
  res.render('contact', { title: 'Contact Page' });
});

module.exports = router; 
```

和 index.js

```
const express = require('express');
const morgan = require('morgan');
const path = require('path');
const app = express();

//settings
app.set('port', 4000);
app.set('views', path.join(__dirname,'views'));
app.set('view engine', 'ejs');

//middlewares

//routes
app.use(require('./routes'));

//static files

//listening
app.listen(app.get('port'), () => {
  console.log('Server is running at http://localhost:'+app.get('port')+'/');
}); 
```

更新：将其添加到索引中：

`app.engine('html', require('ejs').renderFile);`

# dynamics-crm - Dynamics CRM 保存实体更改 - 出现错误

> ID：10216396
> 
> 赞同：4
> 
> 时间：2012-04-18T19:18:30.267
> 
> 标签：dynamics-crm, dynamics-crm-2011

我真的为此挠头。我正在尝试使用 Dynamics CRM SDK 来更新客户记录。无论我尝试什么，它都失败了。开始。

```
Account sampleAccount = CrmAccount.GetAccountsBySubmissionCode(crmService, "ERZZUP").Single<Account>();
sampleAccount.Name = "AMC Edited";
crmService.Update(sampleAccount); 
```

给出错误：*EntityState 必须设置为 null、Created（对于 Create 消息）或 Changed（对于 Update 消息）*

```
XrmServiceContext ctx = new XrmServiceContext(crmService);
Account sampleAccount = CrmAccount.GetAccountsBySubmissionCode(crmService, "ERZZUP").Single<Account>();
sampleAccount.Name = "AMC Edited";
ctx.UpdateObject(sampleAccount);
ctx.SaveChanges(); 
```

给出错误：*上下文当前未跟踪“帐户”实体。*

```
XrmServiceContext ctx = new XrmServiceContext(crmService);
Account sampleAccount = CrmAccount.GetAccountsBySubmissionCode(crmService, "ERZZUP").Single<Account>();
sampleAccount.Name = "AMC Edited";
ctx.Attach(sampleAccount);
ctx.UpdateObject(sampleAccount);
ctx.SaveChanges(); 
```

给出错误：*“帐户”实体已附加到上下文。*

作为参考， 1\. Account 对象由 SDK 早期绑定代码生成工具创建 2\. crmService 是 IOrganizationService 连接对象 3\. GetAccounts ... 执行 LINQ 查询并返回 IEnumerable

请帮忙。谢谢，克里斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:30:29.513

请参阅[http://msdn.microsoft.com/en-us/library/gg695783.aspx](http://msdn.microsoft.com/en-us/library/gg695783.aspx)，尤其是“多数据上下文”部分。您似乎正在使用多个上下文来跟踪实体。该`CrmAccount.GetAccountsBySubmissionCode`方法只是对您隐藏了这一点。

确保在`CrmAccount.GetAccountsBySubmissionCode`返回之前在方法中处理上下文/服务`IEnumerable<Account>`，或者确保使用相同的上下文/服务到`Update`.

# c++ - C++ dynamic_cast 与将对象类型存储在静态枚举中？

> ID：10216398
> 
> 赞同：2
> 
> 时间：2012-04-18T19:18:36.357
> 
> 标签：c++, object, types, casting, dynamic-cast

我正在为一个框架开发一个很大的类层次结构，当它完成时需要大量的类型转换。

我的问题是，放入一个使用枚举来存储层次结构中所有对象类型的静态成员是多么愚蠢的想法。为每个类设置成员 static 不会增加实例化对象的大小，并且会提供一种（可能）比 dynamic_cast 在运行时更快地确定对象类型的方法。

至少这是基本的想法。这种方法有多合适，是否有任何潜在的缺陷？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:35:49.263

我不知道您将如何从对象之间共享的静态变量中确定每个对象的类型。除非您为每个类都覆盖了一些虚函数，但是您根本不需要静态变量，只需执行以下操作：

```
struct Base
{
   virtual int type() = 0;
};

struct Derived1 : public Base
{
   virtual int type() { return 1; }
};

struct Derived2 : public Base
{
   virtual int type() { return 2; }
}; 
```

不是最快的解决方案，但比`dynamic_cast`或快几个数量级`typeid`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T22:10:25.257

这是一个稍微好一点和不同的答案。我不想更改 Timo 的答案，所以提交了一个新答案。这背后的基本原理是避免幻数。当目标不是修改原始类时，有时需要对对象进行类型转换和摆弄以添加新功能。但这不应该允许某人使用幻数。

```
enum mytypeid {
    DERIVED1,
    DERIVED2,
};

struct Base
{
   virtual mytypeid type() = 0;
};

struct Derived1 : public Base
{
   static const mytypeid mytype = DERIVED1;

   virtual mytypeid type() { return mytype ; }
};

struct Derived2 : public Base
{
   static const mytypeid mytype = DERIVED2;

   virtual mytypeid type() { return mytype ; }
};

//...

void fn(Base &a) {
     if(a.type() == Derived1::mytype) {
        std::cout<<"1"<<std::endl;
     }
} 
```

# python - 如何在 Python 中获取手动锁定机制的进程 PID？

> ID：10216402
> 
> 赞同：1
> 
> 时间：2012-04-18T19:18:59.783
> 
> 标签：python, linux, locking

我想在 Python 中创建一个简单的锁定机制，而不必依赖现有的库进行锁定（即`fcntl`可能还有其他）

我已经有一个小存根，但是经过一番搜索后，我找不到关于如何手动创建锁定文件并将进程 PID 放入其中的好答案。这是我的存根：

```
dir_name = "/var/lock/mycompany"
file_name = "myapp.pid"
lock = os.path.join(dir_name, file_name)

if os.path.exists(lock):
    print >> sys.stderr, "already running under %s, exiting..." % lock
    # display process PID contained in the file, not relevant to my question
    sys.exit(ERROR_LOCK)
else:
    # create the file 'lock' and put the process PID inside 
```

如何获取当前进程 PID 并将其放入`lock`文件中？我考虑过查看`/proc`文件系统，但对于这样一个简单的任务来说，这似乎有点太多了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:23:15.547

[http://docs.python.org/library/os.html#os.getpid](http://docs.python.org/library/os.html#os.getpid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:26:35.797

`open(lock, 'w').write(os.getpid())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T01:20:15.897

不要忽略使用 str(os.getpid()) 将 os.getpid() 的结果转换为字符串。write 需要一个字符串参数。

# android - Android杂项小部件面板问题

> ID：10216407
> 
> 赞同：0
> 
> 时间：2012-04-18T19:19:13.153
> 
> 标签：android

我的情况如下：顶部面板和底部面板包装了一个滚动查看器，在屏幕激活后填充了数据。顶部面板工作正常，但是当我尝试打开底部面板时，我得到一个除以零异常原因 mContentHeight 为 0（面板内代码）有什么建议吗？

```
<LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <org.miscwidgets.widget.Panel
                    android:id="@+id/topPanel"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    panel:animationDuration="1000"
                    panel:content="@+id/top_content"
                    panel:handle="@+id/panelHandle"
                    panel:linearFlying="true"
                    android:paddingBottom="4dip"
                    panel:position="top" >

                    <Button
                        android:id="@+id/panelHandle"
                        android:layout_width="fill_parent"
                        android:layout_height="0.1dip" />

                    <LinearLayout
                        android:id="@+id/top_content"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal" >

                        <ImageView
                            android:id="@+id/imageView2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:src="@drawable/logo" />
                    </LinearLayout>
                </org.miscwidgets.widget.Panel>

                <ScrollView
                    android:id="@+id/deal_box_streaps_scroller"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent" >

                    <LinearLayout
                        android:id="@+id/deal_box_streaps_container"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical" >
                    </LinearLayout>
                </ScrollView>

                <org.miscwidgets.widget.Panel
                    android:id="@+id/buttomPanel"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    panel:animationDuration="1200"
                    panel:content="@+id/buttom_content"
                    panel:handle="@+id/panelHandle2"
                    android:paddingTop="4dip"
                    panel:position="bottom" >

                    <Button
                        android:id="@+id/panelHandle2"
                        android:layout_width="fill_parent"
                        android:layout_height="120dip" />

                    <LinearLayout
                        android:id="@+id/buttom_content"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal" >

                        <ImageView
                            android:id="@+id/imageView21"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:src="@drawable/logo" />
                    </LinearLayout>
                </org.miscwidgets.widget.Panel>
            </LinearLayout> 
```

# .net - SetWindowLong Hanging

> ID：10216414
> 
> 赞同：5
> 
> 时间：2012-04-18T19:20:04.010
> 
> 标签：.net, winapi, vb6, interop, pinvoke

为什么会`SetWindowLong(myForm.hWnd, GWL_HWNDPARENT, parentHwnd)`挂？

我可以通过这三个步骤不断地重现这个问题。

1.  创建 .NET 表单
2.  初始化 WaitWindow COM 对象，在 COM 对象上调用 ShowWindow，同时传递 .NET Forms Handle
3.  在 VB6 中调用 SetWindowLong 方法

**C# Windows 应用程序（挂起）**

```
private static void Main(string[] args)
{
      Form form = new Form();
      form.Show();

      Interop.WaitWindow waitWindow = new Interop.WaitWindow();
      waitWindow.ShowWindow(form.Handle.ToInt32(), Language.RISEnglish);
} 
```

**C# 控制台应用程序（不挂起）**

```
private static void Main(string[] args)
{
      IntPtr handle = Process.GetCurrentProcess().MainWindowHandle;     

      Interop.WaitWindow waitWindow = new Interop.WaitWindow();
      waitWindow.ShowWindow(handle.ToInt32(), Language.RISEnglish);
} 
```

**VB6 代码片段**

```
Public Sub ShowWindow(ByVal parentHwnd As Long, ByVal language As Language)

    SetWindowLong(myForm.hWnd, GWL_HWNDPARENT, parentHwnd)  'Hangs Here
    CenterWindow (parentHwnd)

    myForm.ShowRetrieving (language)
    myForm.Show (vbModal)
End Sub 
```

真的很感谢你的帮助:)

**编辑**

我明白不应该调用 SetWIndowLong 来更改父级，但我试图理解为什么它只在使用 .NET 表单句柄时挂起。

**编辑2**

我现在认为这个问题与 SetWindowLong 无关，而是与实际句柄本身有关。我仍在调查，但似乎当我从 .NET 调用 VB6 代码时，它会创建一个 RPC 线程。我还不确定，但我感觉它与跨线程问题有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:55:27.870

MSDN 文档清楚地说

> 您不能使用 GWL_HWNDPARENT 索引调用 SetWindowLong 来更改子窗口的父级。而是使用 SetParent 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T19:39:26.767

我设法弄清楚到底发生了什么以及如何解决问题。我没有使用 [STAThread] 属性指定我的主入口点，因此它默认为 MTA。这意味着当我调用 VB6 代码时，它创建了一个 RPC 回调线程，并且没有将调用编组到执行 UI 的主线程。

Peter Mortensen 对此写了一个[很好的解释](https://stackoverflow.com/questions/127188/could-you-explain-sta-and-mta)：

> STA 模型用于非线程安全的 COM 对象。这意味着他们不处理自己的同步。它的一个常见用途是 UI 组件。因此，如果另一个线程需要与对象交互（例如按下表单中的按钮），则消息将被编组到 STA 线程上。Windows 窗体消息泵系统就是一个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:58:16.877

你是在 64 位系统上运行的吗？您的 VB6 应用程序是 32 位应用程序吗？如果您陷入这种情况，它将解释为什么创建 RPC 调用，并解释为什么您的*非法*hack 无法正常工作。如果是这种情况，坏消息是现在有办法让它发挥作用。

您还应该知道 .net 控件的底层窗口句柄[可能会在控件的生命周期内发生变化](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.recreatehandle.aspx)。[有关此问题](https://stackoverflow.com/questions/6772634/can-a-window-handle-in-net-change-its-value)的讨论，另请参见SO 中的这个问题。

# c++ - MFC RIbbon - 同一面板上的多个 CMFCRibbonComboBox，响应在任何 onComboBox 上执行的 selectitem 操作

> ID：10216416
> 
> 赞同：0
> 
> 时间：2012-04-18T19:20:24.843
> 
> 标签：c++, mfc, ribbon, mfc-feature-pack

我在功能区的同一个面板上有 2 个 CMFCRibbonComboBox - 例如：

```
CMFCRibbonComboBox *individualComputers = 
   new CMFCRibbonComboBox(-1,FALSE, 100, "Individual Computers", -1);

individualComputers->AddItem("Computer 1");
individualComputers->AddItem("Computer 2");
individualComputers->AddItem("Computer 3");
individualComputers->SelectItem(0); 

CMFCRibbonComboBox * groupNames = 
   new CMFCRibbonComboBox (-1, FALSE, 100, "Computer Group Names", -1);

groupNames->AddItem("GROUP 1");
groupNames->AddItem("GROUP 2");
groupNames->AddItem("GROUP 3");
groupNames->SelectItem(0);

CMFCRibbonPanel* pComputerGroups =  cComputerGroups->AddPanel("All Groups"); 
//cComputerGroups is a Category

pComputerGroups->Add(individualComputers);
pComputerGroups->Add(groupNames); 
```

问题是，当我从 UI(USer Interface) 的 groupNames 组合框中选择“Group 1”时，甚至从组 individualComputers 中选择了“Computer 1”。如何使每个组合框组相互独立？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:36:59.593

我怀疑你不想将你的组合框添加到自己`individualComputers->Add(individualComputers);`应该是`pComputerGroups->Add(individualComputers);`

否则，您的错误可能在您的命令或 updateUI 处理代码的其他地方未显示。这很可能是因为**您使用相同的 ID -1 来标识两个组合框。**

此外，没有重载的构造函数`CMFCRibbonComboBox`需要额外的两个参数，如您所示`groupNames`。

将来请显示遵循[SSCCE的实际代码](http://sscce.org/)

**编辑：**将以前未解决的评论加粗，因为它可能是您剩下的问题。考虑使用`const UINT CB_COMP_ID = 1;`，然后您可以使用或在消息映射等`const UINT CB_GROUP_ID = 2;`中单独引用每个组合框。`CB_COMP_ID``CB_GROUP_ID`

# ruby-on-rails - 访问 Ruby 模块中的其他方法

> ID：10216418
> 
> 赞同：1
> 
> 时间：2012-04-18T19:20:33.120
> 
> 标签：ruby-on-rails, ruby

我正在编写我的第一个 Rails gem，它向 ActiveRecord 添加了一个方法。我似乎无法找到一种简单的方法来从我添加到 ActiveRecord 的方法中调用其他方法。我应该使用这个模式吗？

```
module MyModule

  def self.included(base)
    base.extend(ClassMethods)
  end

  module ClassMethods

    def my_class_method
      # This doesn't work
      some_utility_method
    end

  end

  def some_utility_method
    # Do something useful
  end

end

ActiveRecord::Base.send(:include, MyModule) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:30:19.077

一旦你已经包含了`MyModule`，`ActiveRecord::Base`就会有`my_class_method`一个*类*方法（相当于一个`Class`对象的实例方法`ActiveRecord::Base`）和`some_utility_method`一个*实例*方法。

`my_class_method`因此，inside`self`是*Class* `ActiveRecord::Base`，而不是该类的实例；它没有`some_utility_method`作为可用的方法

**编辑：** 如果你想要一个模块私有的实用程序方法，你可以这样做：

```
module MyModule

  def self.included(base)
    base.extend(ClassMethods)
  end

  module ClassMethods

    def my_class_method
      # This doesn't work
      MyModule::some_utility_method
    end

  end

  def self.some_utility_method
    # Do something useful
  end

end

ActiveRecord::Base.send(:include, MyModule) 
```

# perl - 从大到小对 Perl 哈希进行排序

> ID：10216419
> 
> 赞同：4
> 
> 时间：2012-04-18T19:20:33.660
> 
> 标签：perl, hash, perl-hash

我正在查看此处的示例：http: [//perlmeme.org/tutorials/sort_function.html](http://perlmeme.org/tutorials/sort_function.html)

它给出了这个代码来根据每个键的值对哈希进行排序：

```
# Using <=> instead of cmp because of the numbers
    foreach my $fruit (sort {$data{$a} <=> $data{$b}} keys %data) {
        print $fruit . ": " . $data{$fruit} . "\n";
    } 
```

这段代码我不完全理解，但是当我尝试它时，它从最低到最高排序。如何翻转它以从最高到最低排序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T19:24:29.493

只需使用`reverse sort`而不是`sort`.

`foreach my $fruit (reverse sort keys %data) { ...`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-18T19:21:50.187

交换`$a`和`$b`：

```
foreach my $fruit (sort {$data{$b} <=> $data{$a}} keys %data) { 
```

# sql - 我无法在休眠 hql 查询中的两个表之间进行内部连接

> ID：10216426
> 
> 赞同：2
> 
> 时间：2012-04-18T19:21:01.990
> 
> 标签：sql, hibernate, hql

我对此很陌生。请帮我。

我的内部连接如下所示： `select p.idprodus, p.denumire, p.cantitate from Produs p inner join Furnizor f on p.idfurn = f.idfurn`

我想在列 idfurn 上进行内部连接，但出现以下错误：

org.hibernate.QueryException：外连接或全连接必须后跟路径表达式`select p.idprodus, p.denumire, p.cantitate from sakila.entity.Produs p inner join Furnizor f on p.idfurn = f.idfurn`

```
at org.hibernate.hql.classic.FromParser.token(FromParser.java:170)
at org.hibernate.hql.classic.ClauseParser.token(ClauseParser.java:86)
at org.hibernate.hql.classic.PreprocessingParser.token(PreprocessingParser.java:108)
at org.hibernate.hql.classic.ParserHelper.parse(ParserHelper.java:28)
at org.hibernate.hql.classic.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:216)
at org.hibernate.hql.classic.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:185)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T21:19:15.210

在 HQL 中，您使用实体，而不是表。实体通过关联（OneToOne、OneToMany 等）链接在一起。关联实体之间只能进行连接。

例如，如果 Product 和 Provider 之间有 ManyToOne 关联，则 HQL 查询为：

```
select p from Product p inner join p.provider provider where ... 
```

on 子句是不必要的，因为 Hibernate 从 ManyToOne 关联的映射中知道使用 product.id_provider 外键到 provider.id_provider 主键的 Product 与其提供者相关联。

[在Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/)中，所有这些都通过大量示例得到了很好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T18:24:38.740

如果不存在关联（例如 OneToMany 映射）并且您需要内部联接，则使用旧的[交叉联接表示法](https://stackoverflow.com/a/974131/1666035)。

# c - 为什么 mmap 文件会导致使用比文件大小更多的内存？

> ID：10216433
> 
> 赞同：3
> 
> 时间：2012-04-18T19:21:46.977
> 
> 标签：c, linux, linux-kernel, mmap

我正在试验`mmap`并附带以下示例代码：

```
 int main() {

    int fd;
    char *filename = "/home/manu/file";
    struct stat statbuf;
    int i = 0;
    char c = *(filename);

    // Get file descriptor and file length
    fd = open(filename, O_RDONLY);
    if (fd == -1) {
        perror("fopen error");
    }
    if (fstat(fd, &statbuf) < 0) {
        perror("fstat error");
    }
    printf("File size is %ld\n", statbuf.st_size);

    // Map the file
    char* mmapA = (char*) mmap(NULL, statbuf.st_size, PROT_READ, MAP_PRIVATE,
            fd, 0);
    if (mmapA == MAP_FAILED) {
        perror("mmap error");
        return 1;
    }

    // Touch all the mapped pages
    while (i < statbuf.st_size) {
        c = mmapA[i];
        i++;
    }
    c++;

    // Close file descriptor
    if (close(fd) == -1) {
        perror("close");
        return 1;
    }

    //Unmap file
    munmap(mmapA, statbuf.st_size);

    return EXIT_SUCCESS;
} 
```

文件大小为 137948 字节 = 134.7 KB。为了检查程序的内存，我使用顶部，主要是 RES 和 VIRT 列。我在三个不同的地方寻找这些值：

1.  就在`mmap`通话之前
2.  就在`mmap`通话后
3.  在读取所有映射内存以将文件有效加载到主内存后（页面错误后）

top 报告的值是

1.  维特 = 1828 资源 = 244
2.  VIRT = 1964 RES = 248
3.  VIRT = 1964 RES = 508

1964 - 1828 = 136，我猜是千字节，因此完全匹配文件的大小。

但我无法理解 508 - 248 = 260 的 RES 差异。为什么它与虚拟内存大小和文件大小不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T22:16:35.723

有一件事是肯定的：结果取决于系统的状态，而不仅仅取决于正在运行的应用程序。在我的机器上，前两次运行程序时 RES 增加了 136 kB，但随后的运行根本没有增加 - 可能操作系统已经将整个文件放在缓存中。有趣的是，值本身在运行之间存在显着差异。在第一次运行中，RES 的跳跃是从 344 到 480 kB，但后面运行的 RES 值一直为 348 kB。SHR 也有类似的变化：第一次跳跃 136 kB，后来没有变化。

`dd`我可以通过在运行应用程序之前覆盖后来用零映射的文件来随意强制原始案例（136 kB 跳转） 。

我查看了`pmaps`输出，但在两种情况下都完全相同，并且在调用`mmap()`.

我无法在这里重现超大的 RES 跳跃，但这是你可以做的。假设您的二进制文件编译为`a.out`. 在 之后 插入 10 秒的睡眠，`mmap()`然后再插入 10 秒的睡眠`munmap()`。这提供了一个时间窗口来转储有趣的信息。我们将从`/proc`哪些文件中读取驻留在内存中的确切文件。为此，请在一次运行中打开终端中的两个选项卡

```
./a.out 
```

然后立即在另一个选项卡中：

```
for ((i=0;i<4;i++)); do cat /proc/$(ps -fe | egrep '[a]\.out' | awk '{print $2}')/smaps > smaps.$i; sleep 5; done 
```

这将在四个单独的文件中创建程序地图状态的 4 个快照。连续编号的快照之一之间的差异应显示 RES 大小激增期间的变化。在示例运行期间，在我的机器上，快照 1 和 2 之间存在差异，并且更改为 [注意我更改了映射文件的名称，但在这里并不重要]：

```
user@machine:~$ diff -u smaps.{1,2}
--- smaps.1     2012-04-19 00:01:46.000000000 +0200
+++ smaps.2     2012-04-19 00:01:51.000000000 +0200
@@ -84,13 +84,13 @@
 MMUPageSize:           4 kB
 b782f000-b7851000 r--p 00000000 08:05 429102     /tmp/tempfile
 Size:                136 kB
-Rss:                   0 kB
-Pss:                   0 kB
+Rss:                 136 kB
+Pss:                 136 kB
 Shared_Clean:          0 kB
 Shared_Dirty:          0 kB
-Private_Clean:         0 kB
+Private_Clean:       136 kB
 Private_Dirty:         0 kB
-Referenced:            0 kB
+Referenced:          136 kB
 Swap:                  0 kB
 KernelPageSize:        4 kB
 MMUPageSize:           4 kB 
```

发生的事情正是应该发生的事情：映射文件最初根本不驻留，后来有 136 kB 驻留。

在您的系统上，差异应该引导您找到 RES 中额外更改的来源 - 您应该能够找出`Rss`值更改的其他文件的名称。有些条目不是文件，而是其他内存区域，例如，您可能会找到诸如`[heap]`和之类的标记`[stack]`。这也应该证明或反驳 nos 关于加载系统库和堆栈使用增长的建议。

# pinterest - 固定时自动显示免费物品的美元金额

> ID：10216434
> 
> 赞同：0
> 
> 时间：2012-04-18T19:21:49.317
> 
> 标签：pinterest

我正在我的网站上实施 Pinterest，但我们遇到了问题。如果 Pinterest 在描述中看到货币价值，它会自动在商品的图片上放置图形。

我们有一个免费活动，我们希望人们能够固定（通过“固定”按钮），称为“100 美元游戏”。Pinterest 会自动将 100 美元的图形放在图钉上，这使得我们的游戏看起来像实际上免费时需要 100 美元一样。

有什么办法吗？没有改变游戏的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:23:12.103

Pinterest 仍然是新的，我认为没有办法将 $ 符号转义为文本而不是价格。如果我是你，我会在他们的论坛上发布，以便他们知道这个问题，但除此之外，我想你必须想出别的办法。

# styles - notepad++ 主题 - 转换的云午夜 textmate 主题，不一样

> ID：10216437
> 
> 赞同：1
> 
> 时间：2012-04-18T19:21:50.720
> 
> 标签：styles, themes, notepad++, textmate

我已经将 Clouds Midnight 主题转换为在 notepad++ 中使用它，但它似乎仍然不一样。我已经下载了 monaco 字体，但是即使这个字体也和你在这里看到的不一样。

[http://fredhq.com/projects/clouds](http://fredhq.com/projects/clouds)

我已经把转换后的主题放到了 C:\Program Files\Notepad++\themes 目录下，

想法？我想念的东西一定很简单！干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:45:57.717

使用的字体是 Inconsolata-dz，可在此处下载（免费）：http: [//nodnod.net/2009/feb/12/adding-straight-single-and-double-quotes-inconsola/](http://nodnod.net/2009/feb/12/adding-straight-single-and-double-quotes-inconsola/)

# ruby-on-rails-3 - 使用范围条件进行 Rails 3 验证

> ID：10216441
> 
> 赞同：5
> 
> 时间：2012-04-18T19:22:16.347
> 
> 标签：ruby-on-rails-3

我有一个带有approver_note、po_number 和state_id 的发票模型。

我需要验证来检查：

```
validates :approver_note, :presence => true, {:scope => state_id == 3}
validates :po_number, :presence => true, {:scope => state_id ==2} 
```

所以，如果用户选择 state_id = 3，他必须输入一个注释。如果他选择 state_id = 2，他必须输入一个 po_number。

任何帮助都会很棒...谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T20:00:10.230

您正在寻找`:if`选项而不是`:scope`.

```
validates :approver_note, :presence => true,
  :if => lambda { |invoice| invoice.state_id == 3 } 
```

但由于 lambda 有点难看，我可能会添加一个方法来更好地封装你正在做的事情：

```
validates :approver_note, :presence => true, :if => :requires_note?
validates :po_number, :presence => true, :if => requires_po_number?

def requires_note?
  state_id == 3
end

def requires_po_number?
  state_id == 2
end 
```

如果您实际上有一堆在`state_id`3 时需要的不同属性，而不仅仅是一个注释，那么您可能想要这样的东西：

```
validates :approver_note, :presence => true, :if => :green_state?
validates :po_number, :presence => true, :if => orange_state?

def green_state?
  state_id == 3
end

def orange_state?
  state_id == 2
end 
```

（将“绿色”替换为——我不知道——“high_documentation”或任何在你的世界中有意义的东西。）

或者，也许您想让国家决定它是什么：

```
def green_state?
  state.green?
end 
```

与“3”和“2”相反，它确实有助于使您的代码中的术语更贴近您的实际语言。

# java - 使用插入、更新和删除语句是 JPA 标准，还是只是 Hiberate 特定的？

> ID：10216448
> 
> 赞同：1
> 
> 时间：2012-04-18T19:22:38.370
> 
> 标签：java, hibernate, jpa, eclipselink

Hibernate 按以下顺序对调用刷新时执行的语句进行排序：所有插入，所有更新，所有删除（请参阅下面的确切定义）。

我想知道的是，这种行为是 JPA 要求的标准行为并且 Eclipselink 是否相同，或者这只是 Hibernate 功能？

* * *

[休眠参考，第 11.10 章。刷新会话](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#objectstate-flushing)

SQL 语句按以下顺序发出：

1.  所有实体插入以相同的顺序使用 Session.save() 保存相应的对象
2.  所有实体更新
3.  所有集合删除
4.  所有集合元素的删除、更新和插入
5.  所有集合插入
6.  所有实体删除以相同的顺序使用 Session.delete() 删除相应的对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:27:50.560

任何 JPA 实现都可以在刷新排序方面做它需要的事情；规范没有定义这些东西，只是所有数据都进入数据存储区。并非所有实现都会像 Hibernate 那样对它们进行排序。一些（例如[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_1)）基于纯粹的参照完整性要求，首先需要存在什么

# php - PHP循环遍历提交表 单中的HTML表格元素

> ID：10216450
> 
> 赞同：1
> 
> 时间：2012-04-18T19:22:51.513
> 
> 标签：php

我有一个 jQuery 函数来动态添加包含输入字段的行，这存在于表单上，该函数将文本框（不同的名称）添加到表中的每个单元格

生成的 HTML 的一个示例是：

```
<table width="400" border="0" cellspacing="0" cellpadding="2px" margin="0" >
    <tbody>
    <tr>
        <td><input type="text" name="name_1"></td>
        <td><input type="text" name="surname_1"></td>
        <td><input type="text" name="age_1"></td>
    </tr>
    <tr>
        <td><input type="text" name="name_2"></td>
        <td><input type="text" name="surname_2"></td>
        <td><input type="text" name="age_2"></td>
    </tr>
    <tr>
        <td><input type="text" name="name_3"></td>
        <td><input type="text" name="surname_3"></td>
        <td><input type="text" name="age_3"></td>
    </tr>
    </tbody> 
```

我正在使用以下代码读取“$_POST['varName'] 数据：

```
<?php
    $cnt = 1 ;
    $fName = ( $name ."_" .$cnt) ;
    do {
        echo("$_POST[$fName]  <br>");
        $cnt = $cnt +1 ; 
        $fName = ( $fldName ."_" .$cnt) ;

        } while (isset($_POST[$fName]));
    ?> 
```

但是，我想简单地遍历表中的每一行并在循环中顺序读取数据（使用 PHP），我的想法是将表对象传递给 php 函数，这可能吗？

基本上我正在寻找一种读取表数据的解决方案，其中每一行包含输入框“name_X”、“surname_x”和“age_x”，我不知道在设计时存在多少行......（我永远不会有超过 9 行）

希望这很清楚！... 有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:25:15.143

我很确定您必须在 name="" 值中使用数组

```
<td><input type="text" name="name[]"></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:35:40.330

您可以使用隐藏字段并使用 javascript 将行数设置为值。在 php 脚本中，您可以使用一个简单的 for 循环。

像这样的东西：

```
$rowCount = $_POST['hiddenName'];
for($i=1; i<=$rowCount; $i++)
{

  $_POST['name_'.$i]
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:14:38.067

我同时使用了名称数组和简单的 for 循环来找到合适的答案。谢谢大家！

HTML：我有一个 js 函数，可以动态地将以下内容添加到表中（表单上的按钮）

```
<tr>
        <td><input type="text" name="name[]" ></td>
        <td><input type="text" name="surname[]" ></td>
        <td><input type="text" name="age[]"> </td>
    </tr> 
```

PHP：这就是我在表单中处理表格的方式

```
<?php  
$rowCount =  count($_POST['name']); 
    echo "<table>";
    for($i=1; $i<=$rowCount; $i++)
        {
        echo "<tr>";
        echo "<td>".$_POST['name'][$i -1]."</td>";
        echo "<td>".$_POST['surname'][$i -1]."</td>";
        echo "<td>".$_POST['age'][$i -1]."</td>";
        echo "</tr>";
        }
    echo "</table>";?> 
```

# java - 在这种情况下人们如何编写单元测试

> ID：10216456
> 
> 赞同：1
> 
> 时间：2012-04-18T19:23:19.033
> 
> 标签：java, unit-testing, mocking

我有一个关于单元测试的问题。

我将测试一个作为 Web 服务适配器的模块。测试的目的不是测试 Web 服务，而是测试适配器。

服务提供的一个函数调用如下：

```
class MyAdapterClass {

  WebService webservice;

  MyAdapterClass(WebService webservice) {
    this.webservice = webservice;
  }

  void myBusinessLogic() {
    List<VeryComplicatedClass> result = webservice.getResult();
    // <business logic here>
  }
} 
```

如果我想对 myBusinessLogic 函数进行单元测试，通常的方法是注入一个模拟版本的 web服务，并`getResult()`为一些预定义的返回值设置函数。

但在这里我的问题是，真正的 web 服务将返回一个非常完整的类的列表，每个类都有数十个属性，并且该列表可能包含数百甚至数千个元素。

如果我要使用 Mockito 或类似的工具手动设置结果，这是一项巨大的工作。

在这种情况下，人们通常会做什么？我所做的只是连接到真正的 Web 服务并再次测试真正的服务。有什么好做的吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:33:56.243

您可以编写代码来调用真正的 Web 服务，然后将其序列化为`List<VeryComplicatedClass>`磁盘上的文件，然后在设置中为您的模拟反序列化它并`mockwebservice.getResult()`返回该对象。这将节省您手动构建对象层次结构的时间。

更新：这基本上也是[吉尔伯特](https://stackoverflow.com/users/300257/gilbert-le-blanc)在他的评论中建议的方法。

* * *

But really.. you don't want to set up *a list of very completed classes each with tens of properties and the list could contain hundreds or even thousands of element*, you want to setup a mock or a stub that captures the minimum necessary to write assertions around your business logic. That way the test better communicates the details that it actually cares about. More specifically, if the business logic calls 2 or 3 methods on `VeryComplicatedClass` then you want the test to be explicit that those are the conditions that are required for the things that the test asserts.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T21:20:07.810

One thought I had reading the comments would be to introduce a new interface which can wrap `List<VeryComplicatedClass>` and make myBusinessLogic use that instead.

Then it is easy (/easier) to stub or mock an implementation of your new interface rather than deal with a very complicated class that you have little control over.

# javascript - 复选框更新

> ID：10216457
> 
> 赞同：0
> 
> 时间：2012-04-18T19:23:21.520
> 
> 标签：javascript, forms

我正在尝试更新一些文本以说明是否选中了复选框。唯一的问题是，当它被选中时，文本框消失了，文本替换了它。

```
<form name="form" id="form">
    <input type="checkbox" name="cb" id="cb" onClick="check();" />
</form>

<script type="text/javascript">
    function check() {
        document.write("checked: " + document.form.cb.checked);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:33:18.867

您看到的是使用 document.write 的副作用。它正在用您正在编写的文本替换文档的整个正文。尝试做这样的事情。

```
<form name="form" id="form">
    <input type="checkbox" name="cb" id="cb" onClick="check();" />
</form>

<div id="cb-status">checked: false</div>

<script type="text/javascript">
    function check() {
        document.getElementById('cb-status').innerHTML = "checked: " + document.form.cb.checked;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:35:18.030

您可以使用 jQuery 让事情变得更容易：

考虑到您有一个复选框：

```
<input type="checkbox" > 
```

还有一个 id=message 的 span 元素：

```
<span id="message"></span> 
```

然后，当您单击复选框时，无论是否选中，它将在跨度中“写入”。

```
$("document").ready(function(){
    $(":checkbox").click(function(){
       $("span#message").html("Checkbox is checked: " + $(this).is(":checked"));
    });
}); 
```

在 jsFiddle 中查看：http: [//jsfiddle.net/WNDUH/3/](http://jsfiddle.net/WNDUH/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:48:02.967

is(":checked") 和字符串连接的 html 右括号后缺少括号：

```
$(":checkbox").click(function(){
     $("span#message").html("Checkbox is checked: " + $(this).is(":checked"));
}); 
```

# vb.net - vb.net 所有 numericUpDown GotFocus

> ID：10216462
> 
> 赞同：0
> 
> 时间：2012-04-18T19:23:46.737
> 
> 标签：vb.net, numericupdown

在 vb.net 中，我想将所有 numericUpDown (NUD) 控件设置为在接收焦点时选择它们的值，就像文本框一样。

我需要为每个 NUD 编写 GotFocus 处理程序吗？

塔

EDI：我知道我可以`widthBox.Select(0, widthBox.ToString().Length)`用来做选择我只需要能够将它应用到所有 NUD GotFocus 事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:25:09.673

您可以从具有所需行为的 NumericUpDown 继承您自己的控件，并改用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:37:55.310

项目> 添加新项目> CustomControl（名称为 customUpDown）。

在解决方案资源管理器中选择查看所有文件并找到并打开 customUpDown.Designer.vb 将行更改`Inherits System.Windows.Forms.Control1`为`Inherits System.Windows.Forms.NumericUpDown`并保存。

查看文件customUpDown.vb文件上的代码并添加

```
Private Sub 
customUpDown_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles_
Me.GotFocus 
Me.Select(0, Me.ToString().Length) 
End Sub 
```

# java - 使用匹配匹配字符串开头的点？

> ID：10216466
> 
> 赞同：2
> 
> 时间：2012-04-18T19:24:09.260
> 
> 标签：java, regex, matching

我正在尝试匹配一个字符串，使用java的matches方法从一个点开始。为什么这不起作用：

```
".why?".matches("\\.*"); 
```

当我使用单斜杠时，我收到无效转义序列的错误。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:25:24.567

`"\\.*"`匹配由零个或多个`'.'`s 组成的字符串。它匹配以下（引用的）字符串：

```
""
"."
".."
"..." 
```

*（等等）*

你想要：`"\\..*"`相反。请注意，`.`默认情况下不匹配换行符，因此它不会匹配以下字符串：

```
".Why? \n Not!" 
```

要匹配这样的字符串，您需要启用 DOT-ALL：`"(?s)\\..*"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:58:18.343

自己试了一下。这对我有用

```
System.out.println(".why?".matches("^\\..*")); 
```

你哪里少了一个“。” 匹配“为什么？” 部分。

# c# - 将对象 HTMLImageElement 转换为文本字符串？

> ID：10216469
> 
> 赞同：0
> 
> 时间：2012-04-18T19:24:28.607
> 
> 标签：c#, javascript, jquery, .net

我有一件奇怪的事情正在发生，我正试图找到解决办法（不是自愿的，但我必须这样做）。我有一个显示或隐藏表格行的 javascript 函数。别人写的。它的工作原理是，当您单击表格行中的图像时，它会在其下方显示一行。再次单击图像会折叠该行。它的图像代码很简单：

```
<img blah blah blah onClick="ShowHide(this);"> 
```

我要做的是捕获该 img 元素和属性并将其作为查询字符串发送，以便当页面进行回发时，我可以在后面的代码中调用 javascript 函数 ShowHide(this) 并将图像属性传递给它。这样该行将在页面加载时显示。那有意义吗？所以我现在拥有的是：

```
function postbackwithModal(){
    //image properties is what I need to figure out
    window.location = "/Products/ProductDetail.aspx?element=" + imageProperties;
} 
```

然后在后面的代码中：

```
string element = Request.QueryString["element"];
        if (!element.IsNullOrEmpty())
        {
            ClientScript.RegisterStartupScript(GetType(), "hwa", "ShowHide(" + element     + ");", true);
        } 
```

ShowHide() 函数如下所示：

```
function ShowHide(Element) {
    var rowIndex = $(Element).parent().parent()[0].sectionRowIndex;
    var item = $(Element).parent().parent().parent().children()[rowIndex + 1];
    if ($(item).is(":visible") == true) {
        $(item).hide(0, function () { $(Element).attr('src', '../Images/plus.png'); });
    }
    else {
        $(item).show(0, function () { $(Element).attr('src', '../Images/minus.png'); });
        // Loop though the images and set the src value to be the custom handler endpoint.
        var ImageContainer = $(item).children().children().children()[3];
        var Images = $(ImageContainer).find('img');

    }

    globalPlus = Element;
} 
```

# html - 显示表格数据，表格标题在左侧而不是顶部

> ID：10216474
> 
> 赞同：1
> 
> 时间：2012-04-18T19:24:53.200
> 
> 标签：html, css

我的 CSS 有问题。我试图在 2 列中显示信息，由 .left 和 .right 类表示。

[你可以在我的 jsFiddle 看到问题](http://jsfiddle.net/jdv590/WSEH4/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:39:09.233

编辑：根据评论改变答案。

您正在显示表格数据 - 所以使用表格。您可以通过使用[tbody](http://www.w3schools.com/tags/tag_tbody.asp)标记来避免嵌套表，如[以下类似问题所示](https://stackoverflow.com/questions/3076708/can-we-have-multiple-tbody-in-same-table)：

对于此解决方案，您要做的是创建一个表。每个 TBODY 将代表一个“组”数据。在每个组中，**第一列将用于元数据（如 thead）**，第二列将是实际数据：

```
<table>
  <tbody> <!-- First Set of Data -->
    <tr>
      <td> Sessions </td>
      <td> 1 </td>
    </tr>
    <tr>
      <td> Date </td>
      <td> 1/1/2003 </td>
    </tr>
    ...
  </tbody>
  <tbody>  <!-- Second set of Data -->
    <tr>
      <td> Sessions </td>
      <td> 5 </td>
    </tr>
    ...
  </tbody>
</table> 
```

然后，您可以使用外部样式表更轻松地设置样式，可能使用[:nth-child](http://css-tricks.com/how-nth-child-works/)选择器和/或[colgroup](http://www.w3schools.com/tags/tag_colgroup.asp)标记或 Javascript。

如果您将问题重命名为`"How to display tabular data with left hand column as key"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:41:00.343

这是一种在不使用绝对定位（容易断裂）的情况下做你想做的事情的方法。

[http://jsfiddle.net/WSEH4/33/](http://jsfiddle.net/WSEH4/33/)

基本上，使用 inline-blocks 可以保证如果 CSS 不正确，元素不会重叠。但是，解决您的问题的最佳方法就是使用表格。对于这种情况，存在带有标签/值系统的表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:43:07.993

或者，您可以通过浮动来完成。通过演示显示的示例。

[http://jsfiddle.net/WSEH4/36/](http://jsfiddle.net/WSEH4/36/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T19:43:10.387

我更喜欢在跨度上使用 div：（jsFiddle：http: [//jsfiddle.net/WSEH4/44/](http://jsfiddle.net/WSEH4/44/)）

HTML：

```
<!DOCTYPE html> 
```

```
<head>
    <title>My Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>
    <div style="display: block;">
        <div class="child">Where</div>
        <div class="child">China</div>
        <div class="clear"/>

        <div class="child">Voltage</div>
        <div class="child">220 V</div>
        <div class="clear"/>

        <div class="child">Frequency</div>
        <div class="child">50 HZ</div>
        <div class="clear"/>

        <div class="child">Plug Type</div>
        <div class="child">USA</div>
        <div class="clear"/>
    </div>
</body> 
```

​</p>

CSS：

```
.child
{
    float: left;
    top: 6px;
    left: 6px;
    width: 25%;
    padding-right: 10px;
    white-space: nowrap;
    border-bottom: 1px solid #eee;
}

.clear
{
    clear: both;
    display: block;    
} 
```

​</p>

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T08:49:12.263

嘿，你可以这样做

**CSS**

```
div{
margin-top:10px;
}
.right{
float:left;
    width:50%;
border-right:solid 1px red;    
}
.left{
    float:right;  
} 
```

**HTML**

```
<div style="display: block;width:200px;overflow: hidden;">

    <div class="right">China</div>
    <div class="left">Plug Type</div>

    <div class="right">220 V</div>
    <div class="left">Frequency</div>

    <div class="right">50 HZ</div>
    <div class="left">Voltage</div>

    <div class="right">USA</div>
    <div class="left">Where</div>

</div> 
```

现场演示[http://jsfiddle.net/rohitazad/WSEH4/52/](http://jsfiddle.net/rohitazad/WSEH4/52/)

# html - 按文本选择单选按钮

> ID：10216476
> 
> 赞同：0
> 
> 时间：2012-04-18T19:24:55.410
> 
> 标签：html, xpath

我有一个单选按钮：

```
<input type="radio">test</input> 
```

我想通过 XPath 使用它的类型和里面的文本来检索元素。我尝试了以下方法：

```
//input[@type='radio' and text() = 'test'] 
```

但它没有成功。我相信问题出在 text() 部分，因为`//input[@type='radio']`确实选择了元素。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:34:15.987

在 HTML/XHTML 中，`input`是一个空元素；它不能包含文本。在这种情况下，文本实际上作为*直接跟*在元素节点之后`test`的兄弟文本节点存在，而不是作为元素节点*内*的文本节点存在。因此，您在那里的结束标签没有任何意义。*`input`*`input``</input>`**

 **试试这个：

```
//input[@type='radio' and following-sibling::text() = 'test'] 
```

或这个：

```
//input[@type='radio' and contains(following-sibling::text(), 'test')] 
```**

# android - AlertDialog vs Spinner vs ListView

> ID：10216477
> 
> 赞同：1
> 
> 时间：2012-04-18T19:24:59.170
> 
> 标签：android, android-layout, android-widget

我遇到了我认为是一个简单的 android UI 设计问题，但我已经转了几天。我有一个 REST 服务，我从中下载 XML 并在 android 应用程序中以表单形式显示 XML。我建立了一个网页，并且正在使用 android 模仿这个，相同的选项，相同的 URL 被发送到 REST 服务，无论是从 android 还是网页。使用 HTML，我可以轻松地为各种 id/display 项创建复选框组和单选按钮/下拉菜单，例如，我可以将行星选项显示为：

```
<select name="planet"><option value="0">Mercury</option></select> 
```

我想在 android 中做类似的事情，我有一对值，一个是 id，另一个是要显示的用户友好文本。所以我决定使用 android.util.Pair 创建一个适配器：

```
 public class PairView extends Pair<String, String> {
    public PairView(String first, String second) {
      super(first, second);
    }

    public String toString() {
      return second;
    }
  }

  public class PairAdapter extends ArrayAdapter<PairView> {
  } 
```

所以现在我可以将我的 id 放在 pair.first 中，并在 pair.second 中向用户显示什么。

我的问题在于，其中一些选项将是单选，而有些将是多选。在 html 中，这不是问题，只需对多选使用复选框组，对单选使用单选按钮/下拉菜单。然而，在 android 中，它似乎并不是那么简单。我尝试将 Spinners 用于适配器，但 Spinner 似乎只允许单选。AlertDialog.Builder 允许单选和多选，但奇怪的是，我没有看到使用适配器进行多选的选项，仅用于单选。

我想我真正想要的是所有选项的外观一致，通过适配器显示单选按钮和多选复选框，这样我就可以从 Pair 中获取所选项目的 ID。

我应该使用什么方法？为多选添加了代码的自定义微调器？AlertDialog.Builder 并以某种方式使其使用适配器进行多选？只需创建一个普通的 Alert 并在其中包装一个 ListView 吗？另一个（希望）更简单的选择？

我觉得我在这里遗漏了一些非常基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:49:50.580

我在制作的一个应用程序中遇到了类似的情况，所以会分享我选择的内容。我有不同类型的问题，取决于我在我的活动中删除和添加的东西。对于我在其中使用元素的单选按钮。对于多项选择题，我想要一个基于复选框的视图，所以我在布局中添加了一个空白，并在代码中添加了 CheckBox(s)。

至于标题和值，对于单选按钮和复选框，您可以通过 setText 设置显示文本并将任何对象/值添加为标签。所以我以前做的是这样的：

```
CheckBox option = new CheckBox(MyActivity.this);
option.setText("Option 1");
option.setTag(10); 
```

稍后当您获得选定的选项时，您可以简单地获取它的标签并使用它的值。

这只是我觉得很简单的一种方法。希望这可以帮助

# c - 错误：不知道如何制作

> ID：10216480
> 
> 赞同：0
> 
> 时间：2012-04-18T19:25:13.613
> 
> 标签：c, makefile

我得到了一个makefile，我将其修改为：

```
############################################
# Makefile using OCI (Oracle Call Interface)
# D. LaRue  -  May, 2001
############################################

ORACLE_HOME=/opt/oratcp11/product/11.2.0/client11R2_32bits
CC=/opt/SUNWspro/SUNWspro12/sparc/SUNWspro/bin/cc
COMMON_SRC=../common
BNS_INCLUDE=../include
LIBHOME=$(ORACLE_HOME)/lib/
RDBMSLIB=$(ORACLE_HOME)/rdbms/lib/
WSSCOMMON_LIB=/vobs/wssCommon/lib_32
TARGET_DIR=.

LLIBCRYPTO  =-lbnscrypto
LSOLCRYPTO  =-lcryptoutil -lpkcs11
WSSLIBS     =-lwssmbx -ldes
LIBRDBMS_CLT    =-lclient11 -lvsn11 -lcommon11 -lgeneric11 -lmm
LLIBCLNTSH      =-lclntsh -ldl 
CORELIBS        =-lcore11 -lnls11 
LDLIBS          =-lnsl -lsocket -lgen -lm
EXSYSLIBS       =-R $(ORACLE_HOME)/lib

STATICTTLIBS    =$(LLIBRDBMS_CLT) $(CORELIBS) $(WSSLIBS) $(LLIBCRYPTO)
OCISHAREDLIBS   =$(LLIBCLNTSH) $(LDLIBS) -Bstatic $(STATICTTLIBS) -Bdynamic $(LSOLCRYPTO)

LDFLAGS     =-L$(ORACLE_HOME)/lib -L$(ORACLE_HOME)/rdbms/lib -L$(WSSCOMMON_LIB) -L../lib_32

INCLUDE     =-I$(ORACLE_HOME)/rdbms/demo -I$(ORACLE_HOME)/rdbms/public -I$(ORACLE_HOME)/plsql/public -I$(ORACLE_HOME)/network/public -I$(COMMON_SRC) -I$(BNS_INCLUDE) -I. 

CFLAGS      =$(INCLUDE) $(LDFLAGS) -g -Xt

BESSOBJS=bessToWss.o

COMMONLIST=$(COMMON_SRC)/oracle.c \
           $(COMMON_SRC)/logger.c 

INTFOBJS=$(BESSOBJS) $(COMMONLIST)

ALL:    $(TARGET_DIR)/bessToWss

$(TARGET_DIR)/bessToWss: $(INTFOBJS)
    $(CC) $(CFLAGS) $(INTFOBJS) $(OCISHAREDLIBS) -o $@

clean:
    $(RM) *.o 
```

当我运行文件时出现错误

```
". Stop.e: Error:  Don't know how to make "bessToWss 
```

知道有什么问题吗？我通过脚本在一些 Unix 机器上运行它。在设置一些路径或一些其他设置之后，脚本调用 make。如您所见，我不确定它是如何调用的。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:31:20.440

错误消息看起来很奇怪——makefile 中有 CRLF 行结尾吗？

`". Stop.e: Error: Don't know how to make "bessToWss`

那可能是：

`/bin/make: Error: Don't know how to make "bessToWss``CR``". Stop.`

其中`CR`是回车将打印位置移回行首。

您是否在 Windows 机器上创建或编辑了 makefile？您是否在不使用文本模式传输的情况下 FTP 或复制它，所以保留了 CRLF 行尾？

如果是这样，请摆脱回车。在 Unix 上编辑文件`vim`并`:set fileformat=unix`再次保存。

在这个假设下，`make`正在尝试构建一个名称中包含 CR（回车）的程序，而您没有给它一个这样做的规则。

# c# - 哈希函数获得有限长度的结果

> ID：10216488
> 
> 赞同：1
> 
> 时间：2012-04-18T19:25:29.653
> 
> 标签：c#, asp.net, .net, vb.net

我需要散列一个数字（大约 22 位数字），结果长度必须小于 12 个字符。它可以是数字或字符的混合，并且必须是唯一的。（输入的数字也将是唯一的）。

例如，如果输入的数字是 000000000000000000001，则结果应该类似于 2s5As5A62s。

我查看了典型值，如 MD5、SHA-1 等，但它们给出的结果很长。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T20:11:59.307

您的问题的问题是输入大于输出并且是唯一的。如果你也期待一个独特的输出，它就不会发生。这背后的原因是，如果您有一个 22 位数字的输入空间（10^22 种可能性）和一个长度为 11 位（16^11 种可能性）的十六进制数字的输出空间，那么您最终得到的输入可能性比输出可能性。

下图显示，您需要一个 19 位十六进制数字的输出空间和一个完美的一对一函数，否则您将经常发生冲突（超过 50% 的时间）。我认为这是您不想要的，但您没有指定。

![在此处输入图像描述](../Images/bcd2c9693259a68a3ec77a3874705a05.png)

由于无法完成您想要的操作，因此我建议您重新考虑您的设计或使用校验和，例如[循环冗余校验](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)(CRC)。CRC-64 将产生一个 64 位的输出，当使用任何[base64](http://en.wikipedia.org/wiki/Base64)算法编码时，会给你一些你想要的东西。这不提供像 SHA-1 那样的加密强度，因此它永远不应该用于与信息安全相关的任何事情。

但是，如果您能够更改您的标准以允许长哈希输出，那么我强烈建议您查看[SHA-512](http://en.wikipedia.org/wiki/SHA-2)，因为它将提供高质量的输出，并且重复的可能性极低。我的意思是，在算法的历史中，还没有两个输入等于相同的哈希值。

如果这两个建议仍然不适合您，那么您的最后一个选择可能只是在输入数据上仅使用 base64。它将基本上以最佳方式利用标准英文字母表来表示您的数据，从而尽可能减少字符数，同时保留输入数据的完整表示。这不是哈希函数，而只是一种编码二进制数据的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:30:36.237

为什么不采用 MD5 或 SHA-N 然后重构为 BASE64（或 base-whatever）并只采用 12 个字符？注意：在所有情况下，哈希永远不会是唯一的（但可以提供低冲突概率）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:32:39.533

如果必须是唯一的，则不能使用哈希。

您需要大约 74 位来存储这样的数字。如果将其转换为 base-64，它将大约为 12 个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T20:03:27.967

您能否详细说明您对哈希的要求是什么？你需要确保结果是多样化的吗？（即不是 1 = a，2 = b）

只是大声思考，稍微横向思考一下，但你能不能对你的号码应用游程编码的原则，把它当作你想要压缩的数据。然后，您可以使用压缩版本的 base64 版本。

# sql - System i SQL WITH SELECT DISTINCT

> ID：10216489
> 
> 赞同：1
> 
> 时间：2012-04-18T19:25:33.633
> 
> 标签：sql

我有下面的 SQL，它有一个不可接受的响应时间。

这与 RPG 程序中的 DECLARE、PREPARE、OPEN 和 FETCH 一起使用，其中选定的字段放置在主变量中，填充到数组中，然后按 [降序] 排序以显示子文件。

正在使用的 2 个表根本没有键控 (PF)，它们在下面连接，如 WHERE 子句所示。

```
Select DISTINCT B.Fld1, B.Fld2, B.Fld3, B.Fld4,
A.Fld1, A.Fld2, A.Fld3, A.Fld4, A.Fld5, A.Fld6, A.Fld7, A.Fld8, A.Fld9
From TableA A, TableB B
Where A.Fld2 = B.Fld5
And A.Fld1 = B.Fld6 || B.Fld7
And ((A.Fld7 BETWEEN <from-date> and <to-date>)
Or (A.Fld5 BETWEEN <from-date> and <to-date>)) 
```

我已将其重写为“真正的”左连接，没有任何改进。

我还使用了 2 个可用的 LF，其中 A.Fld2 和 A.Fld1 作为键，略有改进。

我觉得递归 SQL 可以解决问题，但我缺乏将其淘汰的经验。我从每个表中选择了自己创建和运行的选项。我只是不知道如何将它们组合成一只美丽的野兽以获得我想要的结果。

这个结果集大约有 10,000 行一周的时间段，我需要看到 2 周。

TableA 中有近 6,000,000 条记录，TableB 中有大约 160,000 条记录。

现在的逻辑是

1.  在上述 SQL 之前运行一个简单的 SQL。
2.  游标通过记录并填充数组
3.  运行上面的 SQL。
4.  游标通过记录并附加到同一个数组
5.  对数组进行排序并使用它来填充子文件。

在调试中，我验证了上面的 SQL 是问题的核心。

事实是我有 3 个文件，我相信可以将它们加入 1 个结果表以构建子文件。如果我可以通过上面的查询，那么“我认为我可以”处理加入另一个文件。

我的猜测是那里有人可以“鞭打这个”！我曾经和他一起工作过！

这不是 RPG，我质疑系统。我以前在 RPG 中写过一些这样的 SQL。问题是其他人编写了 SQL。: (

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:01:06.760

您在连接中遇到了 OR（或 ||）语句的性能问题，并且可能来自 BETWEEN（在 DATETIME 对我来说从来没有很好的工作）。删除“或”和“||” 语句，而是有四个单独的查询，它们之间有一个“UNION ALL”。这将大大提高你的表现，即使它看起来违反直觉。我还将该日期设置为 [date]>fromDate 和 [date]

* * *

更新 - 这是没有 OR 子句的完整查询。>/< 符号可能难以阅读，因此请先喝杯咖啡：

```
Select DISTINCT B.Fld1, B.Fld2, B.Fld3, B.Fld4,
A.Fld1, A.Fld2, A.Fld3, A.Fld4, A.Fld5, A.Fld6, A.Fld7, A.Fld8, A.Fld9
From TableA A, TableB B
Where A.Fld2 = B.Fld5
And A.Fld1 = B.Fld6
And A.Fld7 > <from-date> 
AND A.Fld7 < <to-date>
AND A.Fld5 < <from-date> -- Excluding these to avoid duplicates
and A.Fld5 > <to-date> -- Excluding these to avoid duplicates
UNION ALL
Select DISTINCT B.Fld1, B.Fld2, B.Fld3, B.Fld4,
A.Fld1, A.Fld2, A.Fld3, A.Fld4, A.Fld5, A.Fld6, A.Fld7, A.Fld8, A.Fld9
From TableA A, TableB B
Where A.Fld2 = B.Fld5
And A.Fld1 = B.Fld6
AND A.Fld5 > <from-date> 
and A.Fld5 < <to-date>
UNION ALL
Select DISTINCT B.Fld1, B.Fld2, B.Fld3, B.Fld4,
A.Fld1, A.Fld2, A.Fld3, A.Fld4, A.Fld5, A.Fld6, A.Fld7, A.Fld8, A.Fld9
From TableA A, TableB B
Where A.Fld2 = B.Fld5
And A.Fld1 = B.Fld7
And A.Fld7 > <from-date> 
AND A.Fld7 < <to-date>
AND A.Fld5 < <from-date> -- Excluding these to avoid duplicates
and A.Fld5 > <to-date> -- Excluding these to avoid duplicates
UNION ALL
Select DISTINCT B.Fld1, B.Fld2, B.Fld3, B.Fld4,
A.Fld1, A.Fld2, A.Fld3, A.Fld4, A.Fld5, A.Fld6, A.Fld7, A.Fld8, A.Fld9
From TableA A, TableB B
Where A.Fld2 = B.Fld5
And A.Fld1 = B.Fld7
AND A.Fld5 > <from-date> 
and A.Fld5 < <to-date> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:06:03.160

根据给定的 SELECT 语句，您希望从 TableA 开始查询，因为您希望根据 Fld7 和 Fld5 中的日期/时间戳值获取条目。首先，您希望对这两列进行索引。两者都需要有自己的索引。

您应该首先检查从 TableA 获取数据的性能。您可以通过执行 SELECT 语句来做到这一点：

```
SELECT COUNT(*)
  FROM TableA
 WHERE 
   (A.Fld7 BETWEEN <from-date> and <to-date>) OR
   (A.Fld5 BETWEEN <from-date> and <to-date>) 
```

如果这已经没有足够的性能，那么问题出在 TableA 索引上。您还可以考虑将其他具有 INCLUDE 定义的列添加到这些索引中。可能至少有用于加入 TableB 的字段 Fld1 和 Fld2。

一旦您对 TableA 有足够的性能，您需要使其有效地加入到 TableB。`A.Fld1 = B.Fld6 || B.Fld7`看起来很有问题。 我希望这`B.Fld5`在 TableB 中是相对独特的，在这种情况下，您在 TableB 中有 Fld5 的索引就足够了。A.Fld1 检查将在 join 中只是为了消除您通过 join 获得的少量行`A.Fld2 = B.Fld5`。

如果 B.Fld5 不是相对唯一的，那么您遇到了问题:) 在这种情况下，您可以尝试在连接中使用类似的东西：

```
SELECT ... 
FROM TableA A, TableB B
WHERE
   A.Fld2 = B.Fld5 AND
   SUBSTR(A.Fld1, 1, N) = B.Fld6 AND
   A.Fld1 = B.Fld6 || B.Fld7
... 
```

想法是，您不要从 TableB 行中查找在连接时与 A.Fld1 匹配的行，而是从 A.Fld1 中获取一个子字符串，以便它与 B.Fld6 匹配。之后，您需要确保 B.Fld6 具有正确的索引，并且在 TableB 中也是真正唯一的。您显然可以将其扩展为对 B.Fld7 应用相同的模式，即：

```
SELECT ... 
FROM TableA A, TableB B
WHERE
   A.Fld2 = B.Fld5 AND
   SUBSTR(A.Fld1, 1, N) = B.Fld6 AND
   SUBSTR(A.Fld1, N, LENGTH(A.Fld1)) = B.Fld7
... 
```

在上面的 JOIN 中，为 TableB 设置以 B.Fld5、B.Fld6 和 B.Fld7 中最具选择性的值开头的索引可能就足够了。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:19:55.860

尝试这个

```
Select DISTINCT B.Fld1, B.Fld2, B.Fld3, B.Fld4,
A.Fld1, A.Fld2, A.Fld3, A.Fld4, A.Fld5, A.Fld6, A.Fld7, A.Fld8, A.Fld9
From 
(
select * from TableA where ((Fld7 BETWEEN <from-date> and <to-date>)
Or (Fld5 BETWEEN <from-date> and <to-date>))
) A, 
TableB B
Where A.Fld2 = B.Fld5
And A.Fld1 = B.Fld6 || B.Fld7 
```

和这个

```
Select DISTINCT c.Fld1, c.Fld2, c.Fld3, c.Fld4,
c.Fld1, c.Fld2, c.Fld3, c.Fld4, c.Fld5, c.Fld6, c.Fld7, c.Fld8, c.Fld9
From 
(
select * from TableA A, TableB B
Where A.Fld2 = B.Fld5
And A.Fld1 = B.Fld6 || B.Fld7
)c
where ((c.Fld7 BETWEEN <from-date> and <to-date>)
Or (c.Fld5 BETWEEN <from-date> and <to-date>)) 
```

希望至少其中一个会更快。

**编辑**

在这里，连接是瓶颈或由于日期比较而导致的表扫描是问题所在。所以想法是首先提取所需的行，然后通过连接或日期比较进一步处理它们。这将限制没有。需要处理的总行数，而不是处理整个行表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T20:41:03.613

您可能会尝试的一件事是在 where 子句中的每个子句周围加上括号。代替：

```
Where A.Fld2 = B.Fld5 And A.Fld1 = B.Fld6 || B.Fld7 And ((A.Fld7 BETWEEN <from-date> and <to-date>) Or (A.Fld5 BETWEEN <from-date> and <to-date>)) 

Where (A.Fld2 = B.Fld5) And ((A.Fld1 = B.Fld6) || B.Fld7) And ((A.Fld7 BETWEEN <from-date> and <to-date>) Or (A.Fld5 BETWEEN <from-date> and <to-date>)) 
```

问题是 || 的优先级 操作员。如果它与 AND 相同，那么您实际上是在执行以下操作：

```
WHERE (A.Fld2 = B.fld5) or B.fld7 
```

“或”的优先级在 AND 之后，这会导致交叉连接。. . 那会有非常糟糕的表现。

# android - 为什么我的 Android 2.3 小部件在启动后没有响应点击？

> ID：10216494
> 
> 赞同：1
> 
> 时间：2012-04-18T19:25:57.937
> 
> 标签：android, android-widget, click, boot

我有一个带有小部件的应用程序。我想用小部件启动应用程序，但启动后我的小部件没有响应点击。只有在正常启动应用程序（并再次关闭它）后，小部件才会开始响应对小部件本身的点击。

这就是我使用 AppWidgetProvider 设置小部件的方式：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
{   final int ids = appWidgetIds.length;

    for(int i=0;i<ids;i++)
    {   int appWidgetId = appWidgetIds[i];

        Intent intent = new Intent(context, TestReceiver.class);            
        intent.setAction(ACTION_WIDGET_RECEIVER);
        intent.setClassName(TestReceiver.class.getPackage().getName(), TestReceiver.class.getName());

        PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

        views.setOnClickPendingIntent(R.id.widget_root, pi);
        views.setTextViewText(R.id.widgetclock, "Loading...");

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
} 
```

我必须更改什么，以便我的应用程序在启动后注册对小部件的点击，而不必先启动它至少一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:55:43.053

尝试创建一个 BroadcastReceiver 来响应 BOOT 广播并重置小部件的 PendingIntent：我不相信小部件 PendingIntents 在设备重启后仍然存在。

# ruby-on-rails - 使用回形针链接到生产中的图像

> ID：10216497
> 
> 赞同：0
> 
> 时间：2012-04-18T19:26:09.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个使用回形针上传图像的 RoR 应用程序，以及用于查看更大版本图像的彩盒 gem。问题是它在开发中运行良好，但是当我尝试将应用程序投入生产时，它正在错误的位置寻找图像。

当它应该在 URL/s12/gallery/ 中查找图像时，它会尝试在根目录中查找图像并给出文件不存在于 URL/system/pictures/2/large/img.png 的错误bsd/system/pictures/2/large/img.png

我不知道如何告诉应用程序在 URL/s12/gallery/bsd/ 中查找文件任何帮助将不胜感激，如果需要更多信息，请告诉我。

这是我在视图中链接到文件的方式：

```
<%= link_to(image_tag(@project.picture.url(:thumb)), @project.picture.url(:large), :data=> { :colorbox => true }) %> 
```

这使缩略图显示得很好，但是当单击它时，它说根目录中没有文件......因为没有。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:07:26.493

```
has_attached_file :photo, :styles => { :small => "150x150>" },
                  :url  => "/assets/products/:id/:style/:basename.:extension",
                  :path => ":rails_root/public/assets/products/:id/:style/:basename.:extension" 
```

您可以设置 url 以更改默认值。path 也是系统路径，其中 url 是公共的 url

# mysql - 列出已登录的 MySQL 用户

> ID：10216502
> 
> 赞同：3
> 
> 时间：2012-04-18T19:26:25.907
> 
> 标签：mysql, sql

我想要一个脚本来显示通过 MySQL 登录到我的服务器的用户。现在我用

```
show processlist; 
```

并手动打开每个 BLOB 以查看哪些条目对应于服务器本身，哪些对应于机器人，哪些对应于非活动用户，等等。但是必须有更好的方法！

我在想象一个 Perl 脚本，但也许有更好的方法。当然，想知道谁登录并不少见——有一些标准工具吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T19:31:14.007

从 MySQL 5.1.7 开始，您可以只使用[INFORMATION_SCHEMA PROCESSLIST](http://dev.mysql.com/doc/refman/5.1/en/processlist-table.html)表：

```
SELECT * FROM INFORMATION_SCHEMA.PROCESSLIST 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:33:57.543

这样的事情有帮助吗？

```
#!/usr/bin/perl

use strict;
use warnings;
use DBI;

my $user = "root";
my $pass = "password";
my $db = "information_schema";

my $dbh = DBI->connect("DBI:mysql:$db", $user, $pass)
        or die "Connection error: $DBI::errstr\n";
my $sql = "show processlist";

my $sth = $dbh->prepare($sql);
$sth->execute() or die "SQL error: $DBI::errstr\n";

my %user;

while (my @row = $sth->fetchrow_array()) {
        $user{$row[1]}++;
}

print "MySQL - Logged in users\n";
print "=" x 15, "\n";

for my $x (keys %user) {
        print "$x - $user{$x} connections\n";
} 
```

结果：

```
MySQL - Logged in users
===============
ndoutils - 6 connections
root - 1 connections
nagiosql - 5 connections 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T05:02:52.577

Innotop 是一个很好的工具，它甚至可以显示用户正在做什么，具有可配置的刷新率和更多功能。它在 perl 中，但已经为你编写了 :)

# javascript - 通过灯箱效果登录表单

> ID：10216504
> 
> 赞同：0
> 
> 时间：2012-04-18T19:26:31.010
> 
> 标签：javascript

我使用了一个最简单的 CSS 来显示一个 litebox 视图。我使用的代码是，我从这里删除了不必要的 CSS 属性：

```
<style>
        .black_overlay{
            display: block;

        }
        .white_content {
            display: block;

        }
    </style> 
```

表单的 HTML

```
 <div id="light" class="white_content">      
        <input id="name" name="name" type="text" />

        <input id="password" name="password" type="password" />
        <input type="submit" name="submit" value="Sign In" onclick="check(this.form)"/>

        </div>

        <div id="fade" class="black_overlay"></div> 
```

还有一个 JavaScript 函数，用于检查字段是否正确

```
function check(form)/*function to check userid & password*/
{

var name= $( "#name" );
var pass=$("#password");
 if(name== "admin" && pass == "admin")
  {
  document.getElementById('light').style.display='none';
  document.getElementById('fade').style.display='none';
  }
 else
 { 
   alert("Error Password or Username");/*displays error message*/
  }
} 
```

我想要的功能是，当用户输入正确的名称并通过时，即“管理员”，lite box 效果消失了……但事实并非如此，lite box 仍然存在。我怎样才能关闭它。我还希望这个 litebox 效果应该在页面加载时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:42:43.203

是提交事件没有被捕获和阻止的问题吗？在标记中没有形式。如果你像这样添加它

```
<form id="submit-me"> your form inputs </div> 
```

你可以通过JS观察它

```
$("#submit-me").submit(function(event) {
  // your js code
  event.preventDefault();
}); 
```

对于您的实际示例，您可以尝试添加“return false;” 在 onclick 处理程序中？但我不知道这是否有效......

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:31:02.547

代替

```
var name= $( "#name" );
var pass=$("#password"); 
```

和

```
var name= $( "#name" ).val();
var pass=$("#password").val(); 
```

# html - 灵活的网站结构

> ID：10216507
> 
> 赞同：0
> 
> 时间：2012-04-18T19:26:37.070
> 
> 标签：html, node.js, structure

我曾经通过以下方式开发网站：

```
footer.php
header.php
navigation.php
index.php
contact.php 
```

这样做使我只能在一个地方进行更改。例如，如果我想更改页脚信息。我要改变的是footer.php

我不想再使用 php 来做这件事了。有哪些替代解决方案可以创建灵活的网站结构。`node.js`能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:36:59.230

当然，node.js 有很棒的 Web 框架和模板语言。最大的区别在于，您将编写一个可以将 URL 路由到函数的服务器本身，而不是维护*从Web 服务器提供的一组文档（页眉、页脚、索引、联系人）。*这是一种范式转变，但它为您提供了很多功能和灵活性。

我最喜欢的 node.js Web 框架是[ExpressJS](http://expressjs.com/guide.html)。欢迎来到节点社区！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:32:13.333

[编辑：澄清一下，我理解你的意思是“我不想以这种方式使用 PHP”，而不是“我根本不想使用 PHP”。如果您确实是指后者，请忽略此答案... :)]

node.js 不是 Web 服务器，对于您想要做的事情来说，它是完全错误的工具。看来您已经对此类站点进行了足够的开发，以了解所涉及的限制。这很好，所以我认为你的下一个合乎逻辑的步骤是学习一个 MVC 框架，如[`Fuel`](http://fuelphp.com/)、[`Symfony`](http://www.symfony-project.org/)、[`CodeIgniter`](http://codeigniter.com/)或[`Zend`](http://framework.zend.com/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:36:43.910

Ruby on Rails 赢得胜利！我个人觉得这些天 php 是有毒的，但我做了很多年......这取决于你适应新语言的能力和你作为程序员的水平。

如果你真的很喜欢你的 php 技能，你可以坚持使用 Zend..

您真正想要关注的是用于您的设计的 MVC（模型视图控制器）架构，它完美地分解了所有内容，让所有内容都被定义一次，并在其位置上。

# c# - 创建后自动打印创建的pdf

> ID：10216517
> 
> 赞同：1
> 
> 时间：2012-04-18T19:27:15.257
> 
> 标签：c#, pdf, abcpdf

我有一个使用 Websupergoo 的 ABCPDF 创建 pdf 的网络应用程序。现在，在用户单击 CreatePDF 按钮后，浏览器只会下载创建的 PDF。相反，我希望打开打印对话框，以便用户可以选择打印机然后打印 PDF。

如何实现？

如果您需要在评论区查看我的任何代码，请告诉我，我将尽职尽责。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:49:55.293

您可以返回 html 页面并使用 javascript 打印功能显示打印对话框或要求用户下载 pdf。

在您的情况下，一个不错的选择是 2 个按钮：“下载 pdf”和“打印”。当用户点击打印时，他可以选择可能是 PDF 打印机的打印机。

请参阅相关：[可以使用 Javascript 打开 PDF 文件的打印对话框吗？](https://stackoverflow.com/questions/687675/can-a-pdf-files-print-dialog-be-opened-with-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:14:17.637

我认为您基本上要求做的是要求打开 PDF 的应用程序进行打印，除非某些应用程序使用专有挂钩，否则这是不可能的（在 Adob​​e 之外，可能不会很交叉-平台友好）。

Javascript 的`print`功能是告诉浏览器打印的“标准化”方法，因此通常可以安全执行，但 PDF 应用程序和它们提供给浏览器的插件似乎都没有有钩子这样做。

打开 PDF 后，该控制方案就超出了您的控制范围。正如@jorgebg 所提到的，要么打印一个 HTML 页面，要么让他们下载 PDF，这样他们就可以随心所欲地做任何事情。不幸的是，两者都没有明确的方法。

# delphi - 德尔福 XE2 和 TurboPower Orpheus

> ID：10216522
> 
> 赞同：3
> 
> 时间：2012-04-18T19:27:26.437
> 
> 标签：delphi, turbopower

我在 Delphi XE2 上安装 TurboPower Orpheus。我从 sourceforge.net 获得了 Orpheus。用于 Delphi XE2 的 Orpheus 版本有四个 Borland 软件包库 (BPL)：O408_r160.bpl、O408_d160.bpl、O408br160.bpl 和 O408bd160.bpl。

SourceForge 没有任何文档解释这些库之间的差异。

有人可以为我解码文件名，以便我可以确定将这四个库中的哪一个安装到 Delphi XE2 中。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T20:57:49.030

从 TP Orpheus 初始开源版本附带的 Readme.txt 中：

```
2\. Package names

TurboPower Orpheus package names have the following form:

  ONNN_KVV.*
   |   ||
   |   |+------ VV  VCL version (30=Delphi 3, 35=C++Builder 3, 70=Delphi 7)
   |   +------- K   Kind of package (R=runtime, D=designtime)
   |
   +----------- NNN Product version number (e.g., 406=version 4.06)

For example, the Orpheus runtime package files for Delphi 7 have
the filename O406_D70.*.

The runtime package contains the core functionality of the product and
is not installed into the IDE. The designtime package references the
runtime package, registers the components, and contains property
editors used in the IDE. 
```

**注意**：@WarrenP 指出上面的文字包含一个错误（可能只是 TurboPower 的作者的一个错字）；“例如”的情况相反 - 它应该说“Delphi 7 的 Orpheus**设计**时包文件”。

XE2 是 Delphi 版本 16，因此它将是一对以`r160`and结尾的`d160`，`d160`作为设计时包。我认为（但还没有机会确认）XE2 需要用于 Delphi 和 C++ Builder 的包略有不同，并且`br160`and`bd160`指的是`"B"uilder`. 我会尝试验证；我在这台机器上没有 Orpheus，但我的办公机器上有它（旧的东西），所以我会尽可能更新。同时，我会先编译`O408_r160.dproj`，然后编译并安装`O408_d160.dproj`; 我很确定那些是你需要的。

# c# - DataTemplateColumn 需要 2 个选项卡才能访问内容

> ID：10216524
> 
> 赞同：5
> 
> 时间：2012-04-18T19:27:29.790
> 
> 标签：c#, wpf, xaml, datagrid, focus

我找到了很多关于这个问题的文章，但似乎没有一个有效。我有 3 个 DataTemplateColumns，两个带有文本框，一个带有切换按钮。跳转首先进入单元格，然后进入内容。我尝试了许多其他网站的建议和我自己的发明，但没有任何运气。我可以让它在第一行工作，当我添加另一个，但一次添加 2 时，它会停止工作。我恨。数据模板。列。这是我当前使用的类，利用依赖属性。

```
public class FocusAttacher
{
    public static readonly DependencyProperty FocusProperty = 
        DependencyProperty.RegisterAttached("Focus", 
        typeof(bool), 
        typeof(FocusAttacher), 
        new PropertyMetadata(false, FocusChanged));

    public static bool GetFocus(DependencyObject d)
    {
        return (bool)d.GetValue(FocusProperty);
    }

    public static void SetFocus(DependencyObject d, bool value)
    {
        d.SetValue(FocusProperty, value);
    }

    public static void FocusChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        if ((bool)e.NewValue)
        {
            ((UIElement)sender).Focus();
        }
    } 
```

## }

```
<DataGridTemplateColumn Header="Some Value"
                                    MinWidth="30"
                                    Width=".02*">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding SomeBinding, 
                                                ValidatesOnDataErrors=True, 
                                                UpdateSourceTrigger=PropertyChanged}"
                                 IsReadOnly="{Binding RelativeSource={RelativeSource FindAncestor, 
                                               AncestorType={x:Type DataGrid}}, 
                                               Path=DataContext.IsReadOnly}"
                                 Style="{StaticResource SomeStyle}"
                                 customControls:FocusAttacher.Focus="True"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

奇怪的是，这仅适用于文本框，不适用于我第三列中的切换按钮。啊！！！！

编辑：这是按钮的 DataTemplate。它被设置为严格用于样式和触发目的的自定义控件。它是一个带有包含边框和 contentpresenter 的 controltemplate 的 Button。

```
<DataTemplate>
    <customControls:MetroButton cal:Message.Attach="[Event Click] = [Action RemoveGroup($dataContext)]"
           Width="15"
           Height="15"
           IsTabStop="False"
           Focusable="False"
           MouseOverBackground="LightGray">
           <Button.Visibility>
           <MultiBinding Converter="{StaticResource BoolsToVisibilityAndConverter}">
                                    <Binding Path="IsReadOnly"
                                                 Converter="{StaticResource BooleanInverterConverter}" 
                                                 RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}"/>
                                    <Binding Path="IsDeletable"/>
                                </MultiBinding>
                            </Button.Visibility>
                            <TextBlock Text="-"
                                       Focusable="False"
                                       Margin="0 -6 0 0" />

                        </customControls:MetroButton>
                        </DataTemplate> 
```

编辑：添加按钮自定义控件。

```
<Button x:Class="Beacon.FlexCare.UI.CustomControls.MetroButton"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:customControls="clr-namespace:Beacon.FlexCare.UI.CustomControls"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="300"
    MouseEnter="MetroButtonDefinition_MouseEnter"
    MouseLeave="MetroButtonDefinition_MouseLeave"
    customControls:FocusAttacher.Focus="True"
    x:Name="MetroButtonDefinition">
<Button.Style>
    <Style TargetType="{x:Type Button}">
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="Focusable"
                Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Border x:Name="rectangle"

                            BorderThickness="1.3"
                            Background="{TemplateBinding Background}"
                            BorderBrush="White"
                            Padding="{TemplateBinding Padding}">
                        <Border.Style>
                            <Style TargetType="{x:Type Border}">
                                <Setter Property="Focusable"
                                        Value="False" />
                            </Style>
                        </Border.Style>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          RecognizesAccessKey="True"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          OpacityMask="White">
                        </ContentPresenter>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsPressed"
                                 Value="True">
                            <Setter Property="Background"
                                    Value="#005285" />
                        </Trigger>
                        <Trigger Property="IsEnabled"
                                 Value="False">
                            <Setter Property="Foreground"
                                    Value="Gray" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Foreground"
                Value="White" />
        <Setter Property="Background"
                Value="Transparent" />
    </Style>
</Button.Style> 
```

在我开枪之前请帮助我。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T19:41:35.397

对我来说，这有效：

```
<DataGrid.CellStyle>
    <Style TargetType="{x:Type DataGridCell}">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Focusable" Value="False" />
    </Style>
</DataGrid.CellStyle> 
```

# c++ - 如何在 C++ 中将负数写为无符号文字

> ID：10216528
> 
> 赞同：3
> 
> 时间：2012-04-18T19:27:45.117
> 
> 标签：c++, literals, unsigned

在我的程序中，我经常使用 -1（又名 UINT_MAX）作为无符号变量的值来表示一些特殊的东西。我也比较了这个值。打开更高级别的警告消息表明编译器（VS 和 GCC）不喜欢这种语法。

```
// warning C4245: 'initializing' : conversion from 'int' to 'unsigned int', signed/unsigned mismatch
unsigned a = -1;

// warning C4146: unary minus operator applied to unsigned type, result still unsigned
unsigned b = -1U;

// fine but messy
unsigned c = unsigned(-1);

// no warning on VS, signed/unsigned comparison warning with GCC
if (a == -1)
{
  std::cout << "check\n";
} 
```

问题 1：上面给出的语法（每种情况）是合法的 C++ 代码吗？

问题 2：我真的必须在使用此值分配/比较无符号 int 的任何地方都写 unsigned(-1) 还是有更简洁的方法不会触发编译器警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T19:48:46.727

**就其本质而言，您不能将负数写为 C++ 或任何其他语言中的无符号文字。**

你不是说`-1`，你是说[**`std::numeric_limits<unsigned int>::max()`**](http://en.cppreference.com/w/cpp/types/numeric_limits/max)。

```
#include <iostream>
#include <limits>

int main()
{
    unsigned a = std::numeric_limits<unsigned int>::max();

    if (a == std::numeric_limits<unsigned int>::max())
    {
        std::cout << "check " << a << "\n";
    }
} 
```

C++11 标准制作了这个函数[**`constexpr`**](http://en.cppreference.com/w/cpp/language/constexpr)，保证函数是编译时常量。（[进一步阅读](http://www2.research.att.com/~bs/sac10-constexpr.pdf)）。

如果您想避免使用较旧的编译器为循环的每次迭代计算此值，请在循环`const`外部创建并进行比较：

```
const unsigned int magic_number = std::numeric_limits<unsigned int>::max();

    // [...]
    if (a == magic_number) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T02:53:45.643

答案1：

是的，它们都是正确的，尽管可以说是令人不快的 C++ 结构。

*   `-1`被解释为 int 字面量。这是正确的 C++ 语法，因为该标准允许将隐式 int 转换为 unsigned int，但是当在更高的警告级别使用此隐式转换时，编译器会发出警告。
*   `-1U`被解释为`-(1U)`。取 unsigned int 的负数是正确的 C++ 语法，因为编译器执行此操作 modulo `(UINT_MAX + 1)`，但是编译器会发出警告让您知道。
*   `(unsigned(-1) == -1)`也是正确的语法，因为编译器隐式转换`-1`为`unsigned(-1)`进行比较。它确实会警告您有关更高警告级别的隐式转换，以让您知道它已经这样做了。

答案 2：

有几个选项可以写成`unsigned(-1)`文字或效果：

*   写`unsigned(-1)`。
*   Write `~0U`，在二进制补码机器上，取`0`然后否定每个位，这给出了最大的可表示无符号数。
*   写出`UINT_MAX`有效的`#define`d 为`unsigned(-1)`。
*   如果分配或与无符号值进行比较，请编写`-1`并让编译器进行隐式转换并处理警告消息。但是，应该注意的是，-1 是一个 int 字面量，只能根据其在代码中的功能转换为无符号数。
*   写`std::numeric_limits<unsigned>::max()`which 是一个返回的函数`unsigned(-1)`。请注意，在 C++11 中，此函数将是一个 constexpr，一个好的编译器应始终将其简化为文字。VC++ 目前将其简化`unsigned(-1)`为非调试版本。但是，它是从函数调用返回的值，而不是文字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:38:05.443

为避免不得不处理 int 的长度，您可以使用

```
~0 
```

这给了你所有的，在二进制补码机器上（现在还有其他机器吗？）与 -1 相同。但这是一个合法的无符号长。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T03:31:42.563

查看本文末尾的讨论主题。

[http://embeddedgurus.com/barr-code/2011/06/is-uint16_t-1-portable-c-code/](http://embeddedgurus.com/barr-code/2011/06/is-uint16_t-1-portable-c-code/)

结果是 (unsigned)(-1) 是完全合法的，并且保证具有该类型的最大值，而不管实际宽度或内部表示如何。

这是否是一个好主意是另一个问题。就个人而言，我更喜欢 Johnsyweb 提供的解决方案。

至于您是否总是需要演员表，这将取决于编译器。既然您已经尝试过 VS 和 GCC，似乎是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T19:32:03.193

只使用 ULONG_MAX 怎么样？您需要包含limits.h。

或者，您也可以使用 0xFFFFFFFF - 当然，在宏或静态常量中正确定义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T19:32:54.880

我认为您不应该将未签名和已签名的东西弄乱。-1 已签名并且应该保持这种方式，也许这是您希望经常使用 -1 的设计问题。有类似 boost::optional 的解决方案。

[http://www.boost.org/doc/libs/1_49_0/libs/optional/doc/html/index.html](http://www.boost.org/doc/libs/1_49_0/libs/optional/doc/html/index.html)

例子：

```
#include <boost/optional.hpp>
#include <iostream>

boost::optional<int> find (const std::string& s, char t)
{
   for (int i = 0 ; i < s.length () ; ++ i)
   if (s [i] == t)
   return i ;
   return boost::optional<int>() ;
}

int main (int argc, char* argv[]) 
{
    std::string s = argv[1] ;
    char t = *argv[2] ;
    boost::optional<int> idx = find (s, t) ;
    if (idx)
        std::cout << "found at " << *idx << std::endl ;
    else
        std::cout << "not found" << std::endl ;

   return 0 ;
} 
```

# maven - 使用 Ant localRepository 构建 Maven

> ID：10216530
> 
> 赞同：2
> 
> 时间：2012-04-18T19:27:47.050
> 
> 标签：maven, ant, repository

我正在尝试在 Windows 上使用 Ant 构建 Maven。

在签出 maven 的文件夹中运行 ant 时，我得到： `build.xml:105: localRepository doesn't support the "path" attribute`

带有 localRepository 的第 106 行是：`<localRepository path="${maven.repo.local}" />`

Ant 输出：构建文件：H:\maven-3.0-SNAPSHOT\build.xml

```
clean-bootstrap:

initTaskDefs:
 [echo] Building Apache Maven ...

isMavenHomeSet:

init:
 [echo] maven.home = C:\maven-3.0-SNAPSHOT
 [echo] maven.repo.local = C:\Users\XXX/.m2/repository
 [echo] distributionId = apache-maven
 [echo] distributionName = Apache Maven
 [echo] distributionDirectory = apache-maven

prompt-maven-home-exists:

pull:

BUILD FAILED
H:\maven-3.0-SNAPSHOT\build.xml:105: localRepository doesn't support the "path"
attribute 
```

将斜杠更改为反斜杠`maven.repo.local`也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T10:18:32.537

从 maven Central下载[maven-ant-tasks jar](http://%20download%20maven-ant-tasks%20jar%20from%20maven%20central%20%20http://search.maven.org/#artifactdetails%7Corg.apache.maven%7Cmaven-ant-tasks%7C2.1.3%7Cjar)并复制到`$ANT_HOME/lib`目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-13T22:05:22.233

以下似乎对我们有用，尽管它可能在很大程度上取决于您的`build.xml`. 我正在使用 ant 版本 1.9.4 作为记录。

首先，我的以下条目`$HOME/.m2/settings.xml`似乎确实适用于蚂蚁。

```
<localRepository>/some/path/.m2/repository</localRepository> 
```

然而，这不是一个很好的解决方案，因为我们不想更改所有开发人员的配置文件。对于该`build.xml`文件，您需要以与定义`artifact:remoteRepository`行相同的方式定义本地存储库：

```
<artifact:remoteRepository id="central" url="..."/>
<!-- add the following line after the remoteRepository definitions -->
<artifact:localRepository id="local" path="/some/path/.m2/repository"/> 
```

为了使存储库适用于我们所有的构建分支，我们使用环境变量，例如：

```
<artifact:localRepository id="local" path="${env.BUILD_HOME}/.m2/repository/"/> 
```

然后，您将使用与`local`执行远程存储库相同的方式来使用存储库：

```
 <remoteRepository refid="central"/>
 <!-- add the following line after the remoteRepository usages -->
 <localRepository refid="local"/> 
```

我们必须将它添加到`<artifact:pom`和`<artifact:dependencies`部分才能使其工作。YMMV。

# java - 在需要重新播种之前，我可以使用多少次 randomGenerator.nextDouble()？

> ID：10216533
> 
> 赞同：7
> 
> 时间：2012-04-18T19:27:51.710
> 
> 标签：java, random

我使用`Random`Java 中的类作为伪随机数生成器。我多次使用函数 nextDouble (~10^5)。在我必须重新播种之前多少次才能防止获得相同的数字？需要补种吗？

```
 Random generator = new Random();
    double[] numbers = new double[n];
    for (int i = 0; i < n; i++) numbers[i] = generator.nextDouble(); 
```

这是一个实验，数字将用作空间上点的坐标，所以我希望分布尽可能均匀。

另外我该如何补种？我从哪里得到 int 种子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T20:22:11.553

随机数生成器将从两个随机 int 值生成随机双精度值。内部种子有 48 位，因此随机序列在最多 2^48 个 int 值或 2^47 个 double 值之后重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:17:46.790

如果您使用 Set （保证唯一值），则无需担心重新播种等：

```
Random generator = new Random();
Set<Double> numbers = new HashSet<Double>();
while (numbers.size() < n)
    numbers.add(generator.nextDouble()); 
```

不管你怎么想，这执行得非常快：在我的（典型）PC 上，100000 个数字需要 60 毫秒。

如果你真的想要一个数组，你可以从集合中提取它。
如果您想维护它们的生成顺序，请使用 a `LinkedHashSet`（它具有相似的性能）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:09:44.500

很抱歉我不能直接回答你的问题。我不记得 Java 的随机数生成器的循环时间。尽管我确实认为您正在将其与您生成的数字数量相近。

但是，我在计算机工程统计课上学到的东西可能会对你有所帮助。

我了解到生成最多随机数的最佳方法是使用 Mersenne Twister 随机数生成器。该生成器将为您提供足够的随机数，无需重新设置种子，它的周期为 (2^19937) - 1

这是 MerseenTwister 的源代码

[https://java2s.com/Open-Source/Java/Natural-Language-Processing/MorphAdorner/edu/northwestern/at/utils/math/randomnumbers/MersenneTwister.java.htm](https://java2s.com/Open-Source/Java/Natural-Language-Processing/MorphAdorner/edu/northwestern/at/utils/math/randomnumbers/MersenneTwister.java.htm)

这是一个生成随机数的类。

```
class RandomVariable {

/** Initialize Mersenne Twister generator. */
private static MersenneTwister rnd = new MersenneTwister();

public static double rand() {
    return rnd.nextDouble();
}

/** Generate a random number from a uniform random variable.
 *
 *  @param  min Mininum value for the random variable.
 *  @param  max Maximum value for the random variable.
 *
 *  @return     A random double between min and max.
 */
public static double uniform(double min, double max) {
    return min + (max - min) * rand();
}
} 
```

这是一个生成随机数的示例。请注意，我从源中删除了评论。这可能会破坏代码的开源性质，但我无法将其全部复制并格式化为代码。

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

public class sample{
public static void main(String args[]){
    RandomVariable gen = new RandomVariable();
    double num = gen.uniform(-1,1);

    int n = 10000;
    Set<Double> nums = new HashSet<Double>();
    while (numbers.size() < n)
        nums.add(gen.uniform(-1,1));

}
}
class RandomVariable {

/** Initialize Mersenne Twister generator. */
private static MersenneTwister rnd = new MersenneTwister();

public static double rand() {
    return rnd.nextDouble();
}

/** Generate a random number from a uniform random variable.
 *
 *  @param  min Mininum value for the random variable.
 *  @param  max Maximum value for the random variable.
 *
 *  @return     A random double between min and max.
 */
public static double uniform(double min, double max) {
    return min + (max - min) * rand();
}
}

class MersenneTwister extends java.util.Random implements Serializable {
// Period parameters

private static final int N = 624;
private static final int M = 397;
private static final int MATRIX_A = 0x9908b0df;   // private static final 
//* constant vector a
private static final int UPPER_MASK = 0x80000000; // most significant 
//   w-r bits
private static final int LOWER_MASK = 0x7fffffff; // least significant 
//  r bits
// Tempering parameters
private static final int TEMPERING_MASK_B = 0x9d2c5680;
private static final int TEMPERING_MASK_C = 0xefc60000;
private int mt[]; // the array for the state vector
private int mti; // mti==N+1 means mt[N] is not initialized
private int mag01[];
// a good initial seed (of int size, though stored in a long)
// private static final long GOOD_SEED = 4357;

/* implemented here because there's a bug in Random's implementation
of the Gaussian code (divide by zero, and log(0), ugh!), yet its
gaussian variables are private so we can't access them here.  :-( */
private double __nextNextGaussian;
private boolean __haveNextNextGaussian;

/**
 * Constructor using the default seed.
 */
public MersenneTwister() {
    this(System.currentTimeMillis());
}

/**
 * Constructor using a given seed.  Though you pass this seed in
 * as a long, it's best to make sure it's actually an integer.
 */
public MersenneTwister(final long seed) {
    super(seed);    /* just in case */
    setSeed(seed);
}

/**
 * Constructor using an array.
 */
public MersenneTwister(final int[] array) {
    super(System.currentTimeMillis());
    /* pick something at random just in case */
    setSeed(array);
}

/**
 * Initalize the pseudo random number generator.  Don't
 * pass in a long that's bigger than an int (Mersenne Twister
 * only uses the first 32 bits for its seed).
 */
synchronized public void setSeed(final long seed) {
    // it's always good style to call super
    super.setSeed(seed);

    // Due to a bug in java.util.Random clear up to 1.2, we're
    // doing our own Gaussian variable.
    __haveNextNextGaussian = false;

    mt = new int[N];

    mag01 = new int[2];
    mag01[0] = 0x0;
    mag01[1] = MATRIX_A;

    mt[0] = (int) (seed & 0xfffffff);
    for (mti = 1; mti < N; mti++) {
        mt[mti] =
                (1812433253 * (mt[mti - 1] ^ (mt[mti - 1] >>> 30)) + mti);

        /* See Knuth TAOCP Vol2\. 3rd Ed. P.106 for multiplier. */

        /* In the previous versions, MSBs of the seed affect   */

        /* only MSBs of the array mt[].                        */

        /* 2002/01/09 modified by Makoto Matsumoto             */
        mt[mti] &= 0xffffffff;

        /* for >32 bit machines */
    }
}

/**
 * An alternative, more complete, method of seeding the
 * pseudo random number generator.  array must be an
 * array of 624 ints, and they can be any value as long as
 * they're not *all* zero.
 */
synchronized public void setSeed(final int[] array) {
    int i, j, k;

    setSeed(19650218);
    i = 1;
    j = 0;
    k = (N > array.length ? N : array.length);
    for (; k != 0; k--) {
        mt[i] = (mt[i] ^ ((mt[i - 1] ^ (mt[i - 1] >>> 30)) * 1664525))
                + array[j] + j; /* non linear */
        mt[i] &= 0xffffffff; /* for WORDSIZE > 32 machines */
        i++;
        j++;
        if (i >= N) {
            mt[0] = mt[N - 1];
            i = 1;
        }
        if (j >= array.length) {
            j = 0;
        }
    }
    for (k = N - 1; k != 0; k--) {
        mt[i] = (mt[i] ^ ((mt[i - 1] ^ (mt[i - 1] >>> 30)) * 1566083941))
                - i; /* non linear */
        mt[i] &= 0xffffffff; /* for WORDSIZE > 32 machines */
        i++;
        if (i >= N) {
            mt[0] = mt[N - 1];
            i = 1;
        }
    }
    mt[0] = 0x80000000; /* MSB is 1; assuring non-zero initial array */
}

/**
 * Returns an integer with <em>bits</em> bits filled with a random number.
 */
synchronized protected int next(final int bits) {
    int y;

    if (mti >= N) // generate N words at one time
    {
        int kk;
        final int[] mt = this.mt; // locals are slightly faster
        final int[] mag01 = this.mag01; // locals are slightly faster

        for (kk = 0; kk < N - M; kk++) {
            y = (mt[kk] & UPPER_MASK) | (mt[kk + 1] & LOWER_MASK);
            mt[kk] = mt[kk + M] ^ (y >>> 1) ^ mag01[y & 0x1];
        }
        for (; kk < N - 1; kk++) {
            y = (mt[kk] & UPPER_MASK) | (mt[kk + 1] & LOWER_MASK);
            mt[kk] = mt[kk + (M - N)] ^ (y >>> 1) ^ mag01[y & 0x1];
        }
        y = (mt[N - 1] & UPPER_MASK) | (mt[0] & LOWER_MASK);
        mt[N - 1] = mt[M - 1] ^ (y >>> 1) ^ mag01[y & 0x1];

        mti = 0;
    }

    y = mt[mti++];
    y ^= y >>> 11;                          // TEMPERING_SHIFT_U(y)
    y ^= (y << 7) & TEMPERING_MASK_B;       // TEMPERING_SHIFT_S(y)
    y ^= (y << 15) & TEMPERING_MASK_C;      // TEMPERING_SHIFT_T(y)
    y ^= (y >>> 18);                        // TEMPERING_SHIFT_L(y)

    return y >>> (32 - bits);    // hope that's right!
}

/* If you've got a truly old version of Java, you can omit these
two next methods. */
private synchronized void writeObject(final ObjectOutputStream out)
        throws IOException {
    // just so we're synchronized.
    out.defaultWriteObject();
}

private synchronized void readObject(final ObjectInputStream in)
        throws IOException, ClassNotFoundException {
    // just so we're synchronized.
    in.defaultReadObject();
}

/** This method is missing from jdk 1.0.x and below.  JDK 1.1
includes this for us, but what the heck.*/
public boolean nextBoolean() {
    return next(1) != 0;
}

/** This generates a coin flip with a probability <tt>probability</tt>
of returning true, else returning false. <tt>probability</tt> must
be between 0.0 and 1.0, inclusive.  Not as precise a random real
event as nextBoolean(double), but twice as fast. To explicitly
use this, remember you may need to cast to float first. */
public boolean nextBoolean(final float probability) {
    if (probability < 0.0f || probability > 1.0f) {
        throw new IllegalArgumentException("probability must be between 0.0"
                + " and 1.0 inclusive.");
    }
    if (probability == 0.0f) {
        return false;            // fix half-open issues
    } else if (probability == 1.0f) {
        return true;        // fix half-open issues
    }
    return nextFloat() < probability;
}

/** This generates a coin flip with a probability <tt>probability</tt>
of returning true, else returning false. <tt>probability</tt> must
be between 0.0 and 1.0, inclusive. */
public boolean nextBoolean(final double probability) {
    if (probability < 0.0 || probability > 1.0) {
        throw new IllegalArgumentException("probability must be between 0.0"
                + " and 1.0 inclusive.");
    }
    if (probability == 0.0) {
        return false;             // fix half-open issues
    } else if (probability == 1.0) {
        return true; // fix half-open issues
    }
    return nextDouble() < probability;
}

/** This method is missing from JDK 1.1 and below.  JDK 1.2
includes this for us, but what the heck. */
public int nextInt(final int n) {
    if (n <= 0) {
        throw new IllegalArgumentException("n must be >= 0");
    }

    if ((n & -n) == n) {
        return (int) ((n * (long) next(31)) >> 31);
    }

    int bits, val;

    do {
        bits = next(31);
        val = bits % n;
    } while (bits - val + (n - 1) < 0);
    return val;
}

/** This method is for completness' sake.
Returns a long drawn uniformly from 0 to n-1\.  Suffice it to say,
n must be > 0, or an IllegalArgumentException is raised. */
public long nextLong(final long n) {
    if (n <= 0) {
        throw new IllegalArgumentException("n must be >= 0");
    }

    long bits, val;

    do {
        bits = (nextLong() >>> 1);
        val = bits % n;
    } while (bits - val + (n - 1) < 0);
    return val;
}

/** A bug fix for versions of JDK 1.1 and below.  JDK 1.2 fixes
this for us, but what the heck. */
public double nextDouble() {
    return (((long) next(26) << 27) + next(27))
            / (double) (1L << 53);
}

/** A bug fix for versions of JDK 1.1 and below.  JDK 1.2 fixes
this for us, but what the heck. */
public float nextFloat() {
    return next(24) / ((float) (1 << 24));
}

/** A bug fix for all versions of the JDK.  The JDK appears to
use all four bytes in an integer as independent byte values!
Totally wrong. I've submitted a bug report. */
public void nextBytes(final byte[] bytes) {
    for (int x = 0; x < bytes.length; x++) {
        bytes[x] = (byte) next(8);
    }
}

/** For completeness' sake, though it's not in java.util.Random.  */
public char nextChar() {
    // chars are 16-bit UniCode values
    return (char) (next(16));
}

/** For completeness' sake, though it's not in java.util.Random. */
public short nextShort() {
    return (short) (next(16));
}

/** For completeness' sake, though it's not in java.util.Random.  */
public byte nextByte() {
    return (byte) (next(8));
}

/** A bug fix for all JDK code including 1.2\.  nextGaussian can theoretical
 * ly
ask for the log of 0 and divide it by 0! See Java bug
<a href="http://developer.java.sun.com/developer/bugParade/bugs/4254501.h
 * tml">
http://developer.java.sun.com/developer/bugParade/bugs/4254501.html</a>
 */
synchronized public double nextGaussian() {
    if (__haveNextNextGaussian) {
        __haveNextNextGaussian = false;
        return __nextNextGaussian;
    } else {
        double v1, v2, s;

        do {
            v1 = 2 * nextDouble() - 1; // between -1.0 and 1.0
            v2 = 2 * nextDouble() - 1; // between -1.0 and 1.0
            s = v1 * v1 + v2 * v2;
        } while (s >= 1 || s == 0);
        double multiplier = /* Strict*/ Math.sqrt(-2
                * /* Strict*/ Math.log(s) / s);

        __nextNextGaussian = v2 * multiplier;
        __haveNextNextGaussian = true;
        return v1 * multiplier;
    }
}
} 
```

# c# - 如何使用从方法返回的匿名类型

> ID：10216535
> 
> 赞同：2
> 
> 时间：2012-04-18T19:27:59.000
> 
> 标签：c#, linq, entity-framework

我有一个我使用的简单数据库，以及一个可以使用的 EF 数据模型。

我的表如下所示：

**客户表**

*   客户ID
*   顾客姓名

**订单表**

*   订单编号
*   客户 ID FK
*   订购日期

我正在使用辅助类来查询我的模型，在这个类中我有以下查询：

```
public static List<object> GetCustomerOrdersCount()
{
    using (OrdersDbEntities context = new OrdersDbEntities())
    {
        return context.Customers.Select(
            c => new
            {
                CustId = c.CustomerId,
                CustName = c.CustomerName,
                OrdersCount = c.Orders.Count
            }).ToList<object>();
    }
} 
```

我可以与此方法一起使用的唯一返回类型是`List<object>`

最后我的问题是：我如何使用从这个查询中收到的数据？

我可以读取值的唯一方法是通过反射：

```
List<object> custs = Dal.GetCustomerOrdersCount();

foreach (var customer in custs)
{
   var properties = customer.GetType().GetProperties();

   foreach (var data in properties)
   {
      var value = data.GetValue(custs[0], null);
   }
} 
```

我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:08:15.290

```
public class MiniCustomerDto
{
  public int CustomerId{get;set;}
  public String CustomerName{get;set;}
  public int OrdersCount{get;set;}
}

public static List<MiniCustomerDto> GetCustomerOrdersCount()
{
        using (OrdersDbEntities context = new OrdersDbEntities())
        {
            return context.Customers.Select(c => new MiniCustomerDto
            {
                CustId = c.CustomerId,
                CustName = c.CustomerName,
                OrdersCount = c.Orders.Count
            }).ToList();
        }
} 
```

你必须使用类你不能创建一个返回匿名类型的方法
abd 这是最佳实践检查，
[有没有办法从方法返回匿名类型？](https://stackoverflow.com/questions/1329672/is-there-a-way-to-return-anonymous-type-from-method)
[返回匿名类型结果？](https://stackoverflow.com/questions/534690/linq-to-sql-return-anonymous-type)
顺便说一下 Dto 代表数据传输对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:38:31.337

我看到的问题是您正在选择匿名类型，您不能这样做：

```
public static List<object> GetCustomerOrdersCount()
{
        using (OrdersDbEntities context = new OrdersDbEntities())
        {
            return context.Customers.Select().ToList<Customer>();
        }
} 
```

这将返回您的完整`Customer`实体，而不是仅包含特定成员的匿名类型。

**编辑**

如果关于我们关于延迟加载的对话的根本问题是，您想要计算给定客户的订单数量，而不实际加载订单，那么我会做这样的事情：

```
public class CustomerWithOrderCount
{
    public CustomerWithOrderCount(Customer c, int OrderCount) 
    { 
        Customer = c; 
        this.OrderCount = OrderCount;
    }
    public Customer { get; set; }
    public int OrderCount { get; set; }
}

public static List<object> GetCustomerOrdersCount()
{
        using (OrdersDbEntities context = new OrdersDbEntities())
        {
            return context.Customers.Select(
                c => new CustomerWithOrderCount(c, c.Orders.Count())
                             .ToList();
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:26:18.363

```
 List<tbl_GameConfig> gameConfig = new List<tbl_GameConfig>();
 using (Entities con = new Entities())
  {
       gameConfig = con.tbl_GameConfig.Where(p => p.fk_GameTypeId == gameTypeId).ToList<tbl_GameConfig>();
  } 
```

# c# - C# 在子类中将受保护的变量设为私有（或以其他方式解决问题）

> ID：10216537
> 
> 赞同：3
> 
> 时间：2012-04-18T19:28:05.920
> 
> 标签：c#, inheritance

我不认为这是可能的，但我很好奇。是否可以在其子类中将超类中的受保护变量设为私有。

例如，我有三个班级`SuperClass`，`SubClass : SuperClass`和`SubCLass2 : SubClass`。

我希望能够访问`protected string[] commands`其中的变量，但阻止`SuperClass`从.`SubClass``SubClass2`

如果这是不可能的，有没有办法达到同样的效果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:29:52.663

> 我不认为这是可能的，但我很好奇。是否可以在其子类中将超类中的受保护变量设为私有。

不。就个人而言，我首先会避免使用变量 non-private - 我会提供 protected *property*。您*可以*创建一个新属性来“隐藏”基本属性......但这对我来说有点糟糕的设计。

我*想不出*任何办法从孙子的角度绕过隐藏，而不改变其他课程之一，但对我来说感觉很随意：

```
public class Base
{
    private int foo = 5;
    protected int Foo { get { return foo; } }
}

public class Child : Base
{
    protected new int Foo { get { return 0; } }
}

public class GrandChild : Child
{
    // Aargh, can't get at the original Foo...
} 
```

你为什么要实现这个目标？也许您应该密封您的直接子类，并强制其他类使用组合...

编辑：正如评论中所解释的，听起来这是一种将属性（我仍然会使其成为返回私有字段的属性）*内部*的情况是合适的。这使该属性可以访问同一程序集中的所有其他代码，但不能访问其他程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:57:54.653

我可以为您提供的下一件最好的事情（按照 Skeet 已经解释过的内容）是让您更难看到房产。这不是很好——也不是我将如何使用显式接口，但这是需要了解的。

```
 interface I
 {
   int Prop { get; set; }
 }

 class A : I
 {
   int I.Prop { get; set; }
 }

 class B : A
 {
   public void Bar()
   {
     (this as I).Prop = 2;
   }
 }

 class C : B
 {
   public void Foo()
   {
     //Prop = 1;
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:00:44.583

我认为可以为变量创建一个容器，并在 SubClass 和 SuperClass 之间共享它，如下所示：

```
class Prop {
    public string Str = "a string";
}
class A {
    Prop prop;
    protected A(Prop p) { prop = p; }
    public A() : this(new Prop()) { }
}
class B : A {
    Prop prop;
    private B(Prop p) : base(p) { prop = p; }
    public B() : this(new Prop()) { }
}
class C : B {
    public void Meth() {
        // has no access to prop.Str
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-05T03:52:23.023

从 C# 的第一天开始，通过从基础中隐藏一个成员就可以实现这一点。特别是，您可以隐藏具有任何类型成员的成员。我觉得最自然的方式是在这个场景中隐藏字段是用方法隐藏它。

```
public class Base
{
  protected int Foo;
}

public class Derived : Base
{
  // Current class can access base.Foo.
  public Derived() { base.Foo = 1; }
  // Hide base.Foo for further derived classes.
  [EditorBrowsable(EditorBrowsableState.Never)]
  [Obsolete("This is used to turn a protected field into private.", true)]
  protected new void Foo() { throw new FieldAccessException(); }
}

public class FurtherDerived : Derived
{
  // In this scope, base.Foo resolves to the method Derived.Foo.
  // If you try calling it, the compiler complains.
  // It is also impossible to say base.base.Foo.
} 
```

# android - 使用 OnItemClickListener 从列表项中检索空值

> ID：10216539
> 
> 赞同：0
> 
> 时间：2012-04-18T19:28:07.300
> 
> 标签：android, list, onitemclicklistener

好的，所以我一直在尝试让 OnItemClickListener 从列表项中检索值。目前点击正在注册，但值没有通过。这是我的代码的相关部分：

```
public class DiarySchedule extends ListActivity implements OnClickListener
{
    private DiaryDataSource datasource;
    private static final String TAG = "MAD Diary Schedule";
    private String delTitle;
    private String delDate;
    private String delTime;
    private String editTitle;
    private String editDate;
    private String editTime;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.diary_schedule);

    datasource = new DiaryDataSource(this);
    datasource.open();

    List<DiaryEntry> values = datasource.getAllDiaryEntries();

    DiaryScheduleAdapter adapter = new DiaryScheduleAdapter(this,values);
    setListAdapter(adapter);

    registerForContextMenu(getListView());

}

public class DiaryScheduleAdapter extends ArrayAdapter<DiaryEntry>
{
    private LayoutInflater li;

    public DiaryScheduleAdapter(Context context, List<DiaryEntry> values) 
    {
        super(context, 0, values);
        li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        DiaryEntry diaryEntry = getItem(position);

        View v = convertView;
        if ( v == null ) 
        {
            v = li.inflate(R.layout.diary_schedule, null);
        }

        TextView date = (TextView)v.findViewById(R.id.scheduleListDate);
        String initialDate = diaryEntry.getDate();
        String formattedDate = ConvertToDate(initialDate);
        date.setText(formattedDate);

        TextView link = (TextView)v.findViewById(R.id.scheduleListLink);
        link.setText(" at ");

        TextView time = (TextView)v.findViewById(R.id.scheduleListTime);
        time.setText(diaryEntry.getTime());

        TextView title = (TextView)v.findViewById(R.id.scheduleListTitle);
        title.setText(diaryEntry.getTitle());

        v.setOnClickListener(new OnItemClickListener(position));

        return v;
    }

}

@Override
public boolean onCreateOptionsMenu (Menu menu)
{
    new MenuInflater(getApplication()).inflate(R.menu.diary_menu, menu);
    return (super.onCreateOptionsMenu(menu));
}

@Override
public boolean onOptionsItemSelected (MenuItem item)
{
    switch (item.getItemId())
    {
        case R.id.add:
            Intent intent = new Intent(DiarySchedule.this, DiaryAddEntry.class);
            startActivity(intent);
            break;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) 
{
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.diary_context_menu, menu);
}

@Override
public boolean onContextItemSelected(MenuItem item) 
{
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    switch (item.getItemId())
    {
        case R.id.edit:
            Intent editIntent = new Intent(DiarySchedule.this, DiaryEditEntry.class);

            editTitle = (String) ((TextView) info.targetView.findViewById(R.id.scheduleListTitle)).getText();
            editDate = (String) ((TextView) info.targetView.findViewById(R.id.scheduleListDate)).getText();
            editDate = GetInfoConvertToDate(editDate);
            editTime = (String) ((TextView) info.targetView.findViewById(R.id.scheduleListTime)).getText();

            editIntent.putExtra("title", editTitle);
            editIntent.putExtra("date", editDate);
            editIntent.putExtra("time", editTime);

            startActivity(editIntent);
            break;

        case R.id.delete:
            delTitle = (String) ((TextView) info.targetView.findViewById(R.id.scheduleListTitle)).getText();
            delDate = (String) ((TextView) info.targetView.findViewById(R.id.scheduleListDate)).getText();
            delDate = GetInfoConvertToDate(delDate);
            delTime = (String) ((TextView) info.targetView.findViewById(R.id.scheduleListTime)).getText();

            Log.v(TAG, "Hopefully title is: " + delTitle + " with date of " + delDate + " and time of " + delTime);

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener)
                .setNegativeButton("No", dialogClickListener).show();

            break;
    }
    return super.onContextItemSelected(item);
}

DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() 
{
    @Override
    public void onClick(DialogInterface dialog, int which) 
    {
        switch (which)
        {
            case DialogInterface.BUTTON_POSITIVE:
            datasource.deleteDiaryEntry(delTitle, delDate, delTime);

            // IN CASE NEED TO DELETE ALL DB ENTRIES UNCOMMENT THIS 
            // (AND COMMENT THE ABOVE METHOD)
            //datasource.deleteAll();

            Intent intent = new Intent(DiarySchedule.this, DiarySchedule.class);
            startActivity(intent);
            break;

            case DialogInterface.BUTTON_NEGATIVE:
            // No action taken
            break;
        }
    }
};

@Override
public void onClick(View v) 
{
    // TODO Auto-generated method stub

}

private class OnItemClickListener implements OnClickListener
{           
    private int mPosition;

    OnItemClickListener(int position)
    {
            mPosition = position;
    }

    @Override
    public void onClick(View v) 
    {
        Log.v(TAG, "onItemClick at position" + mPosition); 
        final String title = (String) ((TextView) findViewById(R.id.scheduleListTitle)).getText();
        System.out.println("Title is: " + title);
        String date = (String) ((TextView) findViewById(R.id.scheduleListDate)).getText();
        date = GetInfoConvertToDate(date);
        System.out.println("Date is: " + date);
        final String time = (String) ((TextView) findViewById(R.id.scheduleListTime)).getText();
        System.out.println("Time is: " + time);

        Intent descIntent = new Intent(DiarySchedule.this, DiaryDetailed.class);

        descIntent.putExtra("title", title);
        descIntent.putExtra("date", date);
        descIntent.putExtra("time", time);

        startActivity(descIntent);
    }               
}

} 
```

当调试它到达 OnItemClickListener OnClick 方法时，正确地通过它，但只是没有拾取值，这些值是空的。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:33:54.490

你把事情复杂化了

在您的主要 DiarySchedule 活动中，您应该实现 OnItemClickListener。覆盖侦听器的 onItemClick 方法并在其中执行您的操作。通过调用 getListView().setOnItemClickListener(this); 设置你的监听器 在你的 onCreate 方法中..

前任。

```
public class DiarySchedule extends ListActivity implements OnItemClickListener
{

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.diary_schedule);

    datasource = new DiaryDataSource(this);
    datasource.open();

    List<DiaryEntry> values = datasource.getAllDiaryEntries();

    DiaryScheduleAdapter adapter = new DiaryScheduleAdapter(this,values);
    setListAdapter(adapter);

    registerForContextMenu(getListView());

    getListView().setOnItemClickListener(this); //this sets the listener

   }
   @Override
   public void onItemClick(AdapterView<?> arg0, View v, int position, long arg3)
   {

      String title = ((TextView)v.findViewById(R.id.scheduleListTitle)).getText().toString();
      String date = ((TextView)v.findViewById(R.id.scheduleListDate)).getText().toString();
      date = GetInfoConvertToDate(date);
      String time = ((TextView)v.findViewById(R.id.scheduleListTime)).getText().toString();

      Intent descIntent = new Intent(DiarySchedule.this, DiaryDetailed.class);
      descIntent.putExtra("title", title);
      descIntent.putExtra("date", date);
      descIntent.putExtra("time", time);

      startActivity(descIntent);

   }

} 
```

然后，您可以删除对 v.setOnClickListener(new OnItemClickListener(position)); 的调用 在您的适配器和您为处理点击而创建的类中。

在 onItemClick 方法中并且您尝试使用“findViewById”时，您应该使用“v.findViewById(id);” 因为您在视图“v”中搜索。

这很可能是您的问题。（您可以这样修复它）但我建议按照我上面描述的“正确”方式进行操作，而不是为列表视图中的每个项目设置单独的处理程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:37:32.243

您有多个具有相同 id 的视图（每行一个）。获取值时尝试替换

```
final String title = (String) ((TextView) findViewById(R.id.scheduleListTitle)).getText(); 
```

和

```
final String title = (String) ((TextView) v.findViewById(R.id.scheduleListTitle)).getText(); 
```

您尝试检索的其他值也是如此。

# objective-c - 在目标 c 中实现自定义 Ctrl+a

> ID：10216540
> 
> 赞同：0
> 
> 时间：2012-04-18T19:28:07.763
> 
> 标签：objective-c, cocoa, events, keydown, ctrl

`Ctrl`当用户单击+ `A`（全选）时，如何实现修改后的行为。我尝试修改`keyDown:`事件，但似乎没有捕捉到事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T20:58:50.700

`⌘</kbd>+`A` is generally mapped to `selectAll:` on the first responder. You should be able to simply implement the `selectAll:` method on any responder in the chain and it'll "just work".`

# c# - ASP.NET 在嵌套的 GridView 控件中编辑值

> ID：10216549
> 
> 赞同：1
> 
> 时间：2012-04-18T19:28:35.777
> 
> 标签：c#, asp.net, data-binding, gridview

我试图在另一个 GridView 内的 GridView 中编辑值。我可以编辑第一个 GridView 上的值，但是当我在子 GridView 上点击“编辑”时，除了回发之外什么都没有发生。

我的 GridView 结构如下：

```
<asp:GridView ID="gwProperties" runat="server" Width="100%"
                        onrowediting="gwProperties_RowEditing" AutoGenerateColumns="False" 
                        DataKeyNames="Name,IsActive" 
                        onrowcancelingedit="gwProperties_RowCancelingEdit" 
                        onrowdeleting="gwProperties_RowDeleting"
                        ShowFooter="True" onrowupdating="gwProperties_RowUpdating">
                        <FooterStyle BackColor="#20334F" Font-Bold="True" ForeColor="White" />   
                        <HeaderStyle BackColor="green" Font-Bold="True" ForeColor="White" />
                        <Columns>                                  
                            <asp:CommandField ShowEditButton="true" EditText="Ret" UpdateText="Gem" CancelText="Annuller" />
                            <asp:BoundField DataField="Name" HeaderText="Navn" SortExpression="Name" />                                  
                            <asp:TemplateField HeaderText="Aktiv" SortExpression="IsActive" Visible="true">                                       
                                <ItemTemplate> 
                                    <asp:Label runat="server" ID="Label2" Text='<%# (Boolean.Parse(Eval("IsActive").ToString())) ? "Aktiv" : "Inaktiv" %>'></asp:Label>                                                                        
                                 </ItemTemplate>      
                                 <EditItemTemplate>
                                    <asp:CheckBox runat="server" ID="cbIsPropertyActive" Checked='<%# Bind("IsActive") %>' />
                                 </EditItemTemplate>                              
                            </asp:TemplateField>                                
                            <asp:TemplateField>
                                <ItemTemplate>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="100%">
                                            <asp:GridView DataKeyNames="StreetName,Zip,City,Country" runat="server" ID="gwAddresses" Width="100%" AutoGenerateColumns="false" DataSource='<%#Eval("Addresses") %>' OnRowEditing="gwAddresses_RowEditing">
                                                <Columns>                                                        
                                                    <asp:TemplateField HeaderText="Vejnavn">
                                                        <ItemTemplate>
                                                            <asp:Label runat="server" ID="lblStreetName" Text='<%# Bind("StreetName") %>'></asp:Label>
                                                        </ItemTemplate>
                                                        <EditItemTemplate>
                                                            <asp:TextBox runat="server" ID="txtStreetName" Text='<%# Bind("StreetName") %>'></asp:TextBox>
                                                        </EditItemTemplate>
                                                    </asp:TemplateField>
                                                    <asp:CommandField ShowEditButton="true" EditText="Ret" UpdateText="Gem" CancelText="Annuller" />                                                        
                                                    <asp:BoundField DataField="Zip" HeaderText="Postnummer" SortExpression="Zip" />
                                                    <asp:BoundField DataField="City" HeaderText="By" SortExpression="City" />
                                                    <asp:BoundField DataField="Country" HeaderText="Land" SortExpression="Country" />                                                

                                                    <asp:TemplateField>
                                                        <ItemTemplate>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="100%">                                                                        
                                                                    <asp:GridView runat="server" ID="gwStreetNumbers" Width="100%" AutoGenerateColumns="false" DataSource='<%#Eval("StreetNumbers") %>' OnRowEditing="gwAddresses_RowEditing">
                                                                        <Columns>                                                                
                                                                            <asp:BoundField DataField="Number" HeaderText="Nummer" SortExpression="Number" />
                                                                            <asp:BoundField DataField="Letter" HeaderText="Bogstav" SortExpression="Letter" />

                                                                            <asp:TemplateField>
                                                                                <ItemTemplate>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td colspan="100%">
                                                                                            <asp:GridView runat="server" ID="gwPrivateLeases" Width="100%" AutoGenerateColumns="false" DataSource='<%#Eval("LeaseTypes.PrivateLeases") %>' OnRowEditing="gwAddresses_RowEditing">
                                                                                                <Columns>
                                                                                                    <asp:TemplateField HeaderText="Aktiv">
                                                                                                        <ItemTemplate>
                                                                                                            <asp:Label runat="server" ID="lblIsLeaseActive" Text='<%# (Boolean.Parse(Eval("IsActive").ToString())) ? "Aktiv" : "Inaktiv" %>'></asp:Label>
                                                                                                        </ItemTemplate>
                                                                                                    </asp:TemplateField>
                                                                                                    <asp:BoundField DataField="TakeoverDate" HeaderText="Overtagelsesdato" SortExpression="TakeoverDate" />
                                                                                                    <asp:BoundField DataField="Floor" HeaderText="Sal" SortExpression="Floor" />
                                                                                                    <asp:BoundField DataField="Side" HeaderText="Side" SortExpression="Side" />
                                                                                                    <asp:BoundField DataField="Regulating" HeaderText="Regulering" />
                                                                                                    <asp:HyperLinkField DataNavigateUrlFields="Prospect" HeaderText="Prospekt" />
                                                                                                    <asp:HyperLinkField DataNavigateUrlFields="FloorPlanDrawing" HeaderText="Plantegning" />
                                                                                                    <asp:BoundField DataField="LeasingPeriod" HeaderText="Lejeperiode" />
                                                                                                    <asp:BoundField DataField="SquareMetre" HeaderText="Kvadratmeter" />
                                                                                                    <asp:BoundField DataField="Rent" HeaderText="Husleje" />
                                                                                                    <asp:BoundField DataField="NumberOfRooms" HeaderText="Antal værelser" />
                                                                                                    <asp:BoundField DataField="ACConsumption" HeaderText="A/C forbrug" />
                                                                                                    <asp:BoundField DataField="PaymentInAdvance" HeaderText="Forudbetalt leje" />
                                                                                                    <asp:BoundField DataField="Termination" HeaderText="Opsigelse (antal måneder)" />
                                                                                                    <asp:TemplateField HeaderText="Møbleret">
                                                                                                        <ItemTemplate>
                                                                                                            <asp:Label runat="server" ID="lblIsFurnished" Text='<%# (Boolean.Parse(Eval("IsFurnished").ToString())) ? "Ja" : "Nej" %>'></asp:Label>
                                                                                                        </ItemTemplate>
                                                                                                    </asp:TemplateField>
                                                                                                    <asp:TemplateField HeaderText="Husdyr">
                                                                                                        <ItemTemplate>
                                                                                                            <asp:Label runat="server" ID="lblIsFurnished" Text='<%# (Boolean.Parse(Eval("IsAnimalsAllowed").ToString())) ? "Ja" : "Nej" %>'></asp:Label>
                                                                                                        </ItemTemplate>
                                                                                                    </asp:TemplateField>
                                                                                                    <asp:TemplateField HeaderText="Altan">
                                                                                                        <ItemTemplate>
                                                                                                            <asp:Label runat="server" ID="lblIsFurnished" Text='<%# (Boolean.Parse(Eval("HasBalcony").ToString())) ? "Ja" : "Nej" %>'></asp:Label>
                                                                                                        </ItemTemplate>
                                                                                                    </asp:TemplateField>
                                                                                                    <asp:TemplateField HeaderText="Delevenlig">
                                                                                                        <ItemTemplate>
                                                                                                            <asp:Label runat="server" ID="lblIsFurnished" Text='<%# (Boolean.Parse(Eval("CanBeShared").ToString())) ? "Ja" : "Nej" %>'></asp:Label>
                                                                                                        </ItemTemplate>
                                                                                                    </asp:TemplateField>
                                                                                                    <asp:BoundField DataField="TypeOfRental" HeaderText="Lejemålstype" />
                                                                                                </Columns>
                                                                                            </asp:GridView>
                                                                                        </td>
                                                                                    </tr>
                                                                                </ItemTemplate>
                                                                            </asp:TemplateField>

                                                                            <asp:TemplateField>
                                                                                <ItemTemplate>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td colspan="100%">
                                                                                            <asp:GridView runat="server" ID="gwBusinessLeases" Width="100%" AutoGenerateColumns="false" DataSource='<%#Eval("LeaseTypes.BusinessLeases") %>' OnRowEditing="gwAddresses_RowEditing">
                                                                                                <Columns>
                                                                                                    <asp:TemplateField HeaderText="Aktiv">
                                                                                                        <ItemTemplate>
                                                                                                            <asp:Label runat="server" ID="lblIsLeaseActive" Text='<%# (Boolean.Parse(Eval("IsActive").ToString())) ? "Aktiv" : "Inaktiv" %>'></asp:Label>
                                                                                                        </ItemTemplate>
                                                                                                    </asp:TemplateField>
                                                                                                    <asp:BoundField DataField="TakeoverDate" HeaderText="Overtagelsesdato" SortExpression="TakeoverDate" />
                                                                                                    <asp:BoundField DataField="Floor" HeaderText="Sal" SortExpression="Floor" />
                                                                                                    <asp:BoundField DataField="Side" HeaderText="Side" SortExpression="Side" />
                                                                                                    <asp:BoundField DataField="Regulating" HeaderText="Regulering" />
                                                                                                    <asp:HyperLinkField DataNavigateUrlFields="Prospect" HeaderText="Prospekt" />
                                                                                                    <asp:HyperLinkField DataNavigateUrlFields="FloorPlanDrawing" HeaderText="Plantegning" />
                                                                                                    <asp:BoundField DataField="MinimumSquareMetre" HeaderText="Kvadratmeter min." />
                                                                                                    <asp:BoundField DataField="MaximumSquareMetre" HeaderText="Kvadratmeter max." />
                                                                                                    <asp:BoundField DataField="YearlyRentPerSquareMetre" HeaderText="Årlig leje pr. m2" />
                                                                                                    <asp:BoundField DataField="ACYearlyOperationalCostPerSquareMetre" HeaderText="Årlig drift pr. m2" />
                                                                                                    <asp:BoundField DataField="Deposit" HeaderText="Depositum" />
                                                                                                    <asp:BoundField DataField="MonthsOfPaymentInAdvance" HeaderText="Forudbetalt leje (antal måneder)" />
                                                                                                    <asp:BoundField DataField="VATAgreements" HeaderText="Moms" />
                                                                                                   <asp:BoundField DataField="MonthsOfTermOfNotice" HeaderText="Opsigelsesvarsel" />
                                                                                                    <asp:BoundField DataField="TypeOfRental" HeaderText="Lejemålstype" />
                                                                                                </Columns>
                                                                                            </asp:GridView>
                                                                                        </td>
                                                                                    </tr>
                                                                                </ItemTemplate>
                                                                            </asp:TemplateField>
                                                                        </Columns>
                                                                    </asp:GridView>
                                                                </td>
                                                            </tr>
                                                        </ItemTemplate>
                                                    </asp:TemplateField>
                                                 </Columns>
                                            </asp:GridView>
                                        </td>
                                    </tr>
                                </ItemTemplate>
                            </asp:TemplateField>                                           
                        </Columns>
                    </asp:GridView> 
```

对不起，文字墙 - 它非常大 ;-) 实际上它是四个嵌套的网格视图，但我想当我能够编辑第一个嵌套时，我可以对其他子网格视图执行完全相同的操作。

我在 .cs 文件中尝试过这样的事情：

```
protected void gwAddresses_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView gwAddresses = (GridView)sender;
    gwAddresses.EditIndex = e.NewEditIndex;
    FillGridView();
} 
```

但它什么也没做。这可能吗？我找到了一些关于这个的优秀文章，但我根本无法让它工作：-/

我有一种奇怪的感觉，我为此使用了错误的控件。

我的对象结构如下：

```
- Property
    - List<Address>
          - Address object: List<StreetNumber>
                - StreetNumber object: List<LeaseTypes>
                       - LeseTypes object: List<PrivateLease> and List<BusinessLease> 
```

所以基本上这是一个五步深度结构，我需要在我的 ASP.NET 解决方案的前端绑定并使其可编辑。

这让我很头疼，所以如果有人对如何实现这一点有一点提示，我会非常感激！

提前致谢！

*   博

# java - 在 JFrame 中引用 JPanel 的坐标

> ID：10216554
> 
> 赞同：2
> 
> 时间：2012-04-18T19:28:48.710
> 
> 标签：java, swing, jframe, jpanel, contentpane

嗨，我无法在我的 JFrame 中引用 JPanel 的来源。我的 JPanel 是在构造函数中设置的，我想在 JPanel 的左边缘添加一条线。

```
table = new JPanel();                    
table.setBackground(Color.green);                   
table.setBounds(10,10, 600, 600);
table.setSize(width.getValue(), height.getValue());
add(table); 
```

然后画法...

```
public void paint(Graphics g){
    super.paint(g);
    Graphics2D g2d = (Graphics2D)g;
    g2d.drawLine(table.getX(), table.getY(), table.getX(), (table.getY() + table.getHeight()));
    g2d.drawLine(100, 100, (int)Math.round(cueBall.getPositionX()), (int)Math.round(cueBall.getPositionY()));   
} 
```

paint 方法中的最后一个命令与我的问题无关...代码似乎将原点设为 (10, 10)，但将其应用于整个 JFrame 而不是 contentPane。我不完全理解 contentPane 但我认为 add() 添加到内容窗格中，从那时起您只引用 contentPane 中的坐标...我只是不明白为什么 setBounds() 在我的位置添加了 JPanel想要它是 (10,10) 仅与 contentPane 相关，但是当我paint() 时，它似乎获得了与 contentPane 相关的坐标，但参考 JFrame 绘制了这些坐标。我意识到我可以添加一个值来将这条线向下移动，但我怀疑这是一个糟糕的解决方案。

我是否需要使用自己的 paint() 方法或类似的方法添加 contentPane？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:32:19.927

您应该覆盖并在`JPanel.paintComponent()`. [AWT 和 Swing 中的](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)结帐绘画。

不确定使用的原因是什么`setbounds()`，您是否尝试使用组件的[绝对定位](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)？我建议熟悉 java 布局，这是一个好的开始 -[布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

# unit-testing - 执行包含在函数中的 specs2 示例

> ID：10216555
> 
> 赞同：4
> 
> 时间：2012-04-18T19:28:49.040
> 
> 标签：unit-testing, scala, specs2

如何在包装函数中执行 spec2 规范的所有测试？

前任：

```
class HelloWorldSpec extends Specification {

    wrapAll(example) = {
        // wrap it in a session, for example.
        with(someSession){
            example()
        }
    }

    "The 'Hello world' string" should {
      "contain 11 characters" in {
        "Hello world" must have size(11)
      }
      "start with 'Hello'" in {
        "Hello world" must startWith("Hello")
      }
      "end with 'world'" in {
        "Hello world" must endWith("world")
      }
    }
  } 
```

因此，这 3 个测试中的每一个都应该在

> 与（一些会话）{...

使用 ScalaTest 时，我可以用*Fixture覆盖*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T20:50:51.190

你可以使用类似的东西[`AroundExample`](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#BeforeExample)：

```
class HelloWorldSpec extends Specification with AroundExample {
  def around[T <% Result](t: =>T) = inWhateverSession(t)
  ...
} 
```

或[隐式上下文对象](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Implicit+context)：

```
class HelloWorldSpec extends Specification {
  implicit object sessionContext = new Around {
    def around[T <% Result](t: =>T) = inWhateverSession(t)
  }
  ...
} 
```

根据您需要做什么，某些 、 或 上下文（及其对应项）的组合`Before`可能`BeforeAfter`更`Outside`合适`Example`。

# c++ - MFC 反编译为任何代码而不是汇编

> ID：10216559
> 
> 赞同：0
> 
> 时间：2012-04-18T19:28:59.820
> 
> 标签：c++, assembly, mfc, decompiling, decompiler

> **可能重复：**
> [是否有 C++ 反编译器？](https://stackoverflow.com/questions/205059/is-there-a-c-decompiler)
> [是否有适用于 Visual Studio 6 C++ 的反编译器](https://stackoverflow.com/questions/3928318/is-there-a-decompiler-that-will-work-on-visual-studio-6-c)

我需要任何方法来反编译用 MFC 编写的 exe 文件，我尝试了 IDA Pro，但是它将文件转换为程序集并没有那么好，因为它有很多问号字符。如果直接将文件转换为代码是不可能的，有没有办法将程序集转换为 C++？:(

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:33:06.463

不会。编译过程会破坏所有元数据，包括变量名，而优化过程使得即使是原始源的伪代码副本也难以恢复。

这是一个高度简化的示例。假设您编写“foo++”，其中 foo 是一个 int。根据编译器的不同，这可以编译为以下任何一种：

*   `inc dword ptr [esp+12h]`- foo 在堆栈中作为本地保存
*   `inc dword ptr [00000f00h]`- foo 是一个堆变量
*   `add dword ptr [00000f00h], 1`- 另一种增加方式
*   `mov eax, dword ptr [esp+12h]; inc eax`- 从堆栈移入 eax，然后递增
*   ETC...

可能性几乎是无穷无尽的。

最好的办法是研究 Hex-Rays Decompiler 之类的东西，尽管它并不便宜。它与 IDA 一起生成伪 C 代码，您可以使用它来发现特定函数和例程的工作方式。

# http - 在浏览器地址栏中输入的任何内容都是 GET 请求？

> ID：10216560
> 
> 赞同：9
> 
> 时间：2012-04-18T19:28:59.513
> 
> 标签：http

当我在浏览器的地址栏中输入一个 url 时，它*总是*一个 GET 请求（意思是，它绝对不是一个 POST 请求）对吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T19:31:34.507

是的。

* * *

# ruby-on-rails - heroku 正在寻找 staging.log 文件？

> ID：10216562
> 
> 赞同：1
> 
> 时间：2012-04-18T19:29:01.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging, heroku

由于找不到 staging.log ，我们的 heroku staging 应用程序在启动时崩溃。这似乎很奇怪，因为它应该只是将所有内容输出到 development.log，所以我不确定发生了什么。

任何帮助将不胜感激！谢谢！

这是堆栈跟踪：

```
2012-04-18T19:20:36+00:00 heroku[web.1]: State changed from crashed to created
2012-04-18T19:20:36+00:00 heroku[web.1]: State changed from created to starting
2012-04-18T19:20:37+00:00 heroku[slugc]: Slug compilation finished
2012-04-18T19:20:40+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 49887`
2012-04-18T19:20:46+00:00 app[web.1]: => Booting WEBrick
2012-04-18T19:20:46+00:00 app[web.1]: => Rails 3.0.3 application starting in staging on http://0.0.0.0:49887
2012-04-18T19:20:46+00:00 app[web.1]: => Call with -d to detach
2012-04-18T19:20:46+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-04-18T19:20:46+00:00 app[web.1]: Exiting
2012-04-18T19:20:46+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.3/lib/rails/rack/log_tailer.rb:8:in `size': No such file or directory - log/staging.log (Errno::ENOENT)
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.3/lib/rails/rack/log_tailer.rb:8:in `initialize'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.5/lib/rack/server.rb:247:in `new'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.5/lib/rack/server.rb:247:in `block in build_app'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.5/lib/rack/server.rb:243:in `reverse_each'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.5/lib/rack/server.rb:243:in `build_app'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.5/lib/rack/server.rb:253:in `wrapped_app'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.2.5/lib/rack/server.rb:204:in `start'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.3/lib/rails/commands/server.rb:65:in `start'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.3/lib/rails/commands.rb:30:in `block in <top (required)>'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.3/lib/rails/commands.rb:27:in `tap'
2012-04-18T19:20:46+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.3/lib/rails/commands.rb:27:in `<top (required)>'
2012-04-18T19:20:46+00:00 app[web.1]:   from script/rails:6:in `require'
2012-04-18T19:20:46+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-04-18T19:20:47+00:00 heroku[web.1]: Process exited with status 1
2012-04-18T19:20:47+00:00 heroku[web.1]: State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:24:49.983

您的应用程序应该将其日志输出到 STDOUT，而不是服务器上的文件。有关详细信息，请参阅开发中心上的日志记录文章：[https ://devcenter.heroku.com/articles/logging](https://devcenter.heroku.com/articles/logging)

Heroku 在部署时自动将[rails_log_stdout](https://github.com/ddollar/rails_log_stdout)注入到您的应用程序中，这修复了 Rails 默认日志记录，所以我不确定为什么这里没有发生这种情况。当您部署到 Heroku 时，您是否看到以下行输出？

```
-----> Rails plugin injection
   Injecting rails_log_stdout
   Injecting rails3_serve_static_assets 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:21:06.943

如果您有 config/environments/staging.rb 文件，请确保您已将 RACK_ENV 和 RAILS_ENV 都设置为“staging”。

```
heroku config:add RACK_ENV=staging --app myapp-staging
heroku config:add RAILS_ENV=staging --app myapp-staging 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:10:52.353

您是否有一个[Procfile](https://devcenter.heroku.com/articles/rails3#webserver)来指定您要运行的环境？我不相信 Heroku 要求这样做，但它允许您指定环境等。

# spring - Spring Security-Error 创建 bean 'org.springframework.security.filterChains'

> ID：10216563
> 
> 赞同：5
> 
> 时间：2012-04-18T19:29:01.803
> 
> 标签：spring, security

我正在尝试基本的弹簧安全设置。我正在使用 3.1.0.RELEASE 我在 spring security xml 中，如下所示：

```
<security:http auto-config='true'>
<security:intercept-url pattern="/**" access="ROLE_USER" />
</security:http>

<security:authentication-manager>
<security:authentication-provider>
<security:user-service>
<security:user name="jimi" password="jimispassword" authorities="ROLE_USER,      ROLE_ADMIN" />
<security:user name="bob" password="bobspassword" authorities="ROLE_USER" />
</security:user-service>
</security:authentication-provider>
</security:authentication-manager> 
```

当我访问起始页时，出现以下异常：org.springframework.beans.factory.BeanCreationExce ption: Error created bean with name 'org.springframework.security.filterChains': Initialization of bean failed; 嵌套异常是 java.lang.NoSuchFieldError: NULL。

谁能帮我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T18:59:29.677

问题的实际原因似乎是 spring-security 3.1.0 引入了旧版本的 spring，从而产生了无声的冲突。在我的例子中，spring-security-3.1.0.RELEASE 引入了 spring-aop、spring-jdbc、spring-tx 和 spring-expression 3.0.6，但我使用的是 spring 3.1.0.RELEASE。在明确添加这些依赖项后，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:14:12.263

你`web.xml`看起来好像错过了`org.springframework.web.context.ContextLoaderListener`

你`web.xml`应该有这些元素：

```
<!-- or in your case /WEB-INF/applicationContext-security.xml -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
</context-param>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<servlet>
    <servlet-name>My-Web-SpringProject</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/webmvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<filter-mapping>
    <!-- do not change this name! -->
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<!-- it is configured by the parameter contextConfigLocation in the begining -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet-mapping>
    <servlet-name>My-Web-SpringProject</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

*说实话，这是Spring 3.0的配置，但我觉得3.1也是一样的*

# python - 生成任何一条腿 <= 一些限制的毕达哥拉斯三元组

> ID：10216570
> 
> 赞同：3
> 
> 时间：2012-04-18T19:29:45.813
> 
> 标签：python, math

现在我以这种方式计算（原始）毕达哥拉斯三元组

```
def generateTriples(limit):
    for n in xrange(1, limit):
        if (n**2 + (n+1)**2 > limit): 
            break
        for m in xrange(n+1, limit, 2):
            if (n**2 + m**2 > limit): 
                break
            if (gcd(n, m) > 1): 
                continue
            yield (m**2 - n**2, 2*m*n, m**2 + n**2) 
```

但这所做的是输出所有腿都小于或等于限制的所有三元组。例如：

```
for triple in generateTriples(25):
    print triple
'''
(3, 4, 5)
(15, 8, 17)
(5, 12, 13)
(7, 24, 25)
''' 
```

但我想做的是改变它，这样我就只限制了腿。斜边可以任意大——我只希望 min(leg1, leg2) 小于或等于限制。

我还打算生成非原始对象，这意味着在所有项上按 k 缩放（也使得 min(leg1, leg2) <= 限制，但我担心我会以这种方式得到重复项。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T20:10:32.737

此函数确定可以与完美三元组中的一条腿配对的最大可能斜边，然后使用您的函数实际搜索三元组：

```
from fractions import gcd

def generateTriples(limit):
    for n in xrange(1, limit):
        if (n**2 + (n+1)**2 > limit):
            break
        for m in xrange(n+1, limit, 2):
            if (n**2 + m**2 > limit):
                break
            if (gcd(n, m) > 1):
                continue
            yield (m**2 - n**2, 2*m*n, m**2 + n**2)

def generate_triples_limit_leg(leg):
    limit = leg**2 / 2 + 1

    for triple in generateTriples(limit):
        if min(triple) <= leg:
            yield triple

print list(generate_triples_limit_leg(i)) 
```

这个版本没有找到所有的三元组，而是直接在最小腿上工作：

```
def generate_triples(limit):
    # for each number up to the limit
    # Python ranges don't include the max number
    # start from 4 because 1 and 2 are invalid
    # and 3 and 4 give the same triplet
    for i in range(4, limit + 1):
        # if i is odd
        if i % 2:
            # the two larger legs are the integers
            # above and below half of the square of the smallest leg
            # // is floor division
            big = i**2 // 2
            yield i, big, big + 1
        else:
            # the two other legs are the integers
            # above and below half of the smallest leg squared
            big = (i // 2)**2
            yield i, big - 1, big + 1

print list(generate_triples(10))
# [(3, 4, 5), (5, 12, 13), (6, 8, 10),  (7, 24, 25), 
#             (8, 15, 17), (9, 40, 41), (10, 24, 26)] 
```

# iis - 无法在 IIS 中启用 Windows 身份验证

> ID：10216571
> 
> 赞同：1
> 
> 时间：2012-04-18T19:29:46.797
> 
> 标签：iis, iis-7, windows-authentication

我已禁用匿名身份验证，并已在 IIS 7 中的网站上启用 Windows 身份验证。现在，当我浏览网站 (http://webserver) 时，Internet Explorer 不断提示我输入用户名/密码。由于我在 Intranet 上，IE 应该自动传递我的凭据...

更重要的是，如果我输入我的凭据，它们甚至都不会被识别。

我没有想法，如果有人可以帮助......

# sql - SQL 特殊连接

> ID：10216572
> 
> 赞同：0
> 
> 时间：2012-04-18T19:29:48.077
> 
> 标签：sql, sql-server-2008, join, outer-join

我正在尝试在另一个领域加入一个不同的领域。

示例：在 column.Teacher 下分类的 tbl.Class 中有多行具有相同的值。我只想将 column.Teacher 中的一个 DISTINCT 值加入另一个表（tbl.Course）中的 column.Teacher_Course。

这就是我的想法，但不是只从 tbl.Class 中检索一个值，而是得到多个连接。

```
SELECT distinct(Teacher.JohnJoe)
FROM  tbl.Class

RIGHT OUTER JOIN tbl.Course ON Course.Teacher_Course = Class.Teacher 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:44:52.137

您也可以尝试使用 GROUP BY 子句：

```
SELECT Teacher.JohnJoe
FROM  tbl.Class
RIGHT OUTER JOIN tbl.Course ON Course.Teacher_Course = Class.Teacher  
GROUP BY Teacher.JohnJoe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:01:31.743

恢复：

*   tbl.Class 中的多名教师
*   tbl.Course 中的单身教师
*   结果应该为 tbl.Course 中的每条记录提供一个来自 tbl.Class 的教师

我的 SQL 解释：

```
DECLARE @class TABLE ([id] int, [teacher] nvarchar(20))
DECLARE @course TABLE ([id] int, [course] nvarchar(20), [teacher_course] nvarchar(20))

INSERT INTO @class ([id], [teacher]) VALUES (1, 'Teacher 1')
INSERT INTO @class ([id], [teacher]) VALUES (2, 'Teacher 2')
INSERT INTO @class ([id], [teacher]) VALUES (3, 'Teacher 3')
INSERT INTO @class ([id], [teacher]) VALUES (4, 'Teacher 4')
INSERT INTO @class ([id], [teacher]) VALUES (5, 'Teacher 1')

INSERT INTO @course ([id], [course], [teacher_course]) VALUES (1, 'Course 1', 'Teacher 1')
INSERT INTO @course ([id], [course], [teacher_course]) VALUES (2, 'Course 2', 'Teacher 4')

SELECT 
    [co].[id],
    [co].[course],
    [cl].[teacher]
FROM  @course [co]
INNER JOIN @class [cl] ON [co].[teacher_course] = [cl].[teacher]
GROUP BY
    [co].[id],
    [co].[course],
    [cl].[teacher] 
```

结果是：

```
[id]  [course]  [teacher]
1     Course 1  Teacher 1
2     Course 2  Teacher 4 
```

# php - 在 PHP 中组合几个循环 MySQL 查询

> ID：10216576
> 
> 赞同：0
> 
> 时间：2012-04-18T19:29:56.160
> 
> 标签：php, mysql, loops

我有两张表与琐事问答游戏的这一部分有关：`scores`和`quiz`. 我已经嵌套了许多 PHP 和 MySQL 循环，我希望有一种更优雅的方式（并且希望更少的数据库查询）来实现相同的结果。

任何建议都非常感谢。

下面是我的 MySQL 结构、PHP 代码和一些示例数据。

表`quiz`包含系统中每个测验的信息，每个测验一条记录：

```
 `uid` int(11) NOT NULL AUTO_INCREMENT,
  `category_uid` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `sample` binary(2) NOT NULL,
  `difficulty` varchar(65) NOT NULL,
  `date_created` datetime NOT NULL,
  `date_updated` datetime NOT NULL,
  PRIMARY KEY (`uid`) 
```

一个唯一的 ID、一个`categories`表的映射（此处不相关）、一个名称、是否是示例测验、难度等级、首次创建的日期以及上次更新的日期。

表格`scores`包含用户参加测验时的结果，测验中每个问题有一条记录（因此，10 道问题的测验有 10 行）：

```
 `uid` int(11) NOT NULL AUTO_INCREMENT,
  `unique_uid` varchar(255) NOT NULL,
  `question_uid` int(11) NOT NULL,
  `quiz_uid` int(11) NOT NULL,
  `user_uid` int(11) NOT NULL,
  `answer` varchar(255) NOT NULL,
  `correct` binary(2) NOT NULL,
  `points` int(25) NOT NULL,
  `time` float(20,1) NOT NULL,
  `date_created` datetime NOT NULL,
  PRIMARY KEY (`uid`) 
```

记录的唯一 ID，正在进行的测验实例的唯一 ID，映射到`questions`表（此处不相关），映射到`quiz`表，映射到`users`表（此处不相关），给出的答案，是否正确与否、得分、响应时间（以秒为单位）以及记录的时间戳。

由于玩家可以重新玩测验，因此每个都`scores.unique_uid`指向一次玩测验。这意味着玩家可能会玩`quiz.uid`=1 五次不同的游戏，这意味着在表格中`score.unique_uid`记录的总共（5 次 X 10 个问题 =）50 行中有五次不同的游戏。`scores`

我要做的是检索所有不同的`scores.unique_uid`记录（玩家得分的每个测验的列表），然后查看每组 10 条记录（一个测验，10 个问题）的一些表格结果。

我现在的做法是：

1.  `quiz.uid`循环查询返回玩家得分的每个唯一值
2.  循环通过另一个查询，该查询返回`scores.unique_uid`为该特定测验评分的玩家的每个唯一实例`quiz.uid`
3.  使用第三个查询来检索具有唯一性的每组记录的 SUM() 数据`scores.unique_uid`（我无法成功地与 DISTINCT 查询结合使用）

这是我的PHP代码：

```
// Query retrieves each unique quiz the player has taken
$ss = sqlQuery("SELECT DISTINCT scores.quiz_uid, quiz.difficulty, quiz.name FROM scores, quiz WHERE scores.user_uid = {$_SESSION['uid']} AND quiz.uid = scores.quiz_uid ORDER BY scores.date_created DESC");
if ( mysql_num_rows( $ss ) > 0 ) {
    while ( $row = mysql_fetch_assoc( $ss ) ){  
        /* Step through each quiz and output name and difficulty */
?>
<h2><?php echo ( $row['name'] ); ?> <span><small>Difficulty: <?php echo( $row['difficulty'] ); ?></small></span></h2>
<?php
        // Query retrieves each unique unique_uid scored (each instance of every quiz)
        $eqs = sqlQuery("SELECT DISTINCT unique_uid FROM scores WHERE quiz_uid = {$row['quiz_uid']} AND user_uid = {$_SESSION['uid']}");

        while ( $eqsrow = mysql_fetch_assoc( $eqs ) ){
            /* Step through each quiz played instance, and output score and other details */

            // Query retrieves SUM()s for total time, total points, total correct responses
            $euqs = sqlQuery('SELECT date_created, ' . 
                'SUM(time) AS times, SUM(points) AS points, SUM(correct) AS ttlcorrect ' .
                "FROM scores WHERE unique_uid = {$eqsrow['unique_uid']} AND user_uid = {$_SESSION['uid']} ");

            // Output the score
            while ( $euqsrow = @mysql_fetch_assoc( $euqs ) ){
?>
<div class="row">
<span class="score"><?php echo( number_format( $euqsrow['points'], 0) ); ?> points</span>
<span class="time"><?php echo( number_format( $euqsrow['times'], 0) ); ?> seconds</span>
<span class="correct"><?php echo( number_format( $euqsrow['ttlcorrect'], 0) ); ?> / 10 correct</span>
<span class="date">Played <?php echo( date( 'F j, Y', strtotime($euqsrow['date_created']) ) ); ?></span>
</div>
<?php
            } // Close euqs while()
        } // close $eqs while()
    } // close $ss while()
} // close if() 
```

以下是每个表的一些示例记录。

测验表：

```
(uid, category_uid, name, sample, difficulty, date_created, date_updated)
(1, 1, 'Business and Industry', '\0\0', 'Newcomer', '2012-03-15 13:42:30', '2012-03-15 13:42:30'),
(2, 2, 'History', '\0\0', 'Newcomer', '2012-03-15 13:42:30', '2012-03-15 13:42:30'),
(3, 3, 'Sports', '\0\0', 'Newcomer', '2012-03-15 13:42:50', '2012-03-15 13:42:50'),
(4, 4, 'Arts/Entertainment', '\0\0', 'Newcomer', '2012-03-15 13:42:50', '2012-03-15 13:42:50'),
(5, 5, 'Music', '\0\0', 'Newcomer', '2012-03-15 13:43:11', '2012-03-15 13:43:11'),
(6, 6, 'Geography', '\0\0', 'Newcomer', '2012-03-15 13:43:11', '2012-03-15 13:43:11'); 
```

成绩表：

```
(uid, unique_uid, question_uid, quiz_uid, user_uid, answer, correct, points, time, date_created)
(81, '1111334693628', 4, 1, 11, 'Paul''s Valley', '0\0', 0, 2.8, '2012-04-17 13:15:40'),
(82, '1111334693628', 6, 1, 11, 'Bartlesville', '1\0', 9, 2.4, '2012-04-17 13:15:44'),
(83, '1111334693628', 3, 1, 11, 'Shawnee', '1\0', 8, 5.9, '2012-04-17 13:15:51'),
(84, '1111334693628', 40, 1, 11, 'Cimarron Turnpike', '0\0', 0, 4.4, '2012-04-17 13:15:57'),
(85, '1111334693628', 1, 1, 11, 'tow package for trucks', '1\0', 9, 3.9, '2012-04-17 13:16:03'),
(86, '1111334693628', 36, 1, 11, 'aviation', '1\0', 6, 9.0, '2012-04-17 13:16:13'),
(87, '1111334693628', 37, 1, 11, 'Altus', '0\0', 0, 3.0, '2012-04-17 13:16:18'),
(88, '1111334693628', 2, 1, 11, 'Bama Pies', '1\0', 7, 6.1, '2012-04-17 13:16:25'),
(89, '1111334693628', 5, 1, 11, 'Gordon Cooper', '0\0', 0, 2.2, '2012-04-17 13:16:29'),
(90, '1111334693628', 38, 1, 11, 'Bartlesville', '1\0', 9, 2.7, '2012-04-17 13:16:33'),
(91, '1131334773558', 13, 3, 11, 'Jim Thorpe', '1\0', 10, 1.5, '2012-04-18 11:26:09'),
(92, '1131334773558', 49, 3, 11, 'Henry Iba', '1\0', 10, 1.8, '2012-04-18 11:26:12'),
(93, '1131334773558', 17, 3, 11, 'Kelli Litsch', '1\0', 10, 1.9, '2012-04-18 11:26:15'),
(94, '1131334773558', 14, 3, 11, 'Bud Wilkinson', '0\0', 0, 4.4, '2012-04-18 11:26:21'),
(95, '1131334773558', 48, 3, 11, 'Charlie Coe', '1\0', 10, 1.7, '2012-04-18 11:26:25'),
(96, '1131334773558', 50, 3, 11, 'Jim Tatum', '1\0', 8, 4.3, '2012-04-18 11:26:31'),
(97, '1131334773558', 47, 3, 11, 'Bobby Murcer', '0\0', 0, 2.4, '2012-04-18 11:26:34'),
(98, '1131334773558', 15, 3, 11, 'Myron Roderick', '1\0', 9, 3.1, '2012-04-18 11:26:39'),
(99, '1131334773558', 46, 3, 11, 'Tommy McDonald', '1\0', 9, 3.6, '2012-04-18 11:26:44'),
(100, '1131334773558', 16, 3, 11, 'five', '0\0', 0, 2.0, '2012-04-18 11:26:48'),
(101, '1131334773620', 15, 3, 11, 'Myron Roderick', '1\0', 9, 2.4, '2012-04-18 11:27:16'),
(102, '1131334773620', 13, 3, 11, 'Jim Thorpe', '1\0', 10, 1.1, '2012-04-18 11:27:18'),
(103, '1131334773620', 49, 3, 11, 'Henry Iba', '1\0', 10, 1.3, '2012-04-18 11:27:21'),
(104, '1131334773620', 16, 3, 11, 'seven', '1\0', 10, 1.8, '2012-04-18 11:27:25'),
(105, '1131334773620', 46, 3, 11, 'Tommy McDonald', '1\0', 10, 1.4, '2012-04-18 11:27:28'),
(106, '1131334773620', 47, 3, 11, 'Darrell Porter', '1\0', 10, 1.8, '2012-04-18 11:27:31'),
(107, '1131334773620', 50, 3, 11, 'Jim Tatum', '1\0', 9, 2.2, '2012-04-18 11:27:35'),
(108, '1131334773620', 14, 3, 11, 'Benny Owen', '1\0', 9, 2.7, '2012-04-18 11:27:39'),
(109, '1131334773620', 17, 3, 11, 'Kelli Litsch', '1\0', 10, 1.8, '2012-04-18 11:27:42'),
(110, '1131334773620', 48, 3, 11, 'Charlie Coe', '1\0', 10, 1.9, '2012-04-18 11:27:46'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:38:47.853

使用一个 MySQL 查询怎么样？

```
SELECT * FROM quiz LEFT JOIN scores ON quiz.uid = scores.quiz_uid 
```

然后只是循环通过它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:57:53.883

我能够通过使用 GROUP 提出解决方案。对于任何可能感兴趣的人，这就是我所做的：

```
// Query retrieves each unique play of each quiz the player has scored
$ss = sqlQuery("SELECT quiz.name, quiz.difficulty, scores.unique_uid, scores.quiz_uid, scores.date_created, SUM(scores.time) AS times, SUM(scores.points) AS points, SUM(scores.correct) AS ttlcorrect FROM scores, quiz WHERE scores.user_uid = {$_SESSION['uid']} AND quiz.uid = scores.quiz_uid GROUP BY scores.unique_uid ORDER BY quiz_uid, scores.date_created DESC");

$last_quiz = 0;
if ( mysql_num_rows( $ss ) > 0 ) {
    while ( $row = mysql_fetch_assoc( $ss ) ){  
        /* Step through each play of each quiz */

        if ( $row['quiz_uid'] != $last_quiz ) {
            // Output Details
            $last_quiz = $row['quiz_uid'];
?>
<h2><?php echo ( $row['name'] ); ?> <span><small>Difficulty: <?php echo( $row['difficulty'] ); ?></small></span></h2>
<?php
        }
        // Output Scores
?>
<div class="row">
<span class="score"><?php echo( number_format( $row['points'], 0) ); ?> points</span>
<span class="time"><?php echo( number_format( $row['times'], 0) ); ?> seconds</span>
<span class="correct"><?php echo( number_format( $row['ttlcorrect'], 0) ); ?> / 10 correct</span>
<span class="date">Played <?php echo( date( 'F j, Y', strtotime($row['date_created']) ) ); ?></span>
</div>
<?php
    } // $ss while()
} // close if
?> 
```

# asp.net - 为什么我在 .aspx 文件中有 javascript 代码，在 .cs 文件中有 c# 代码？

> ID：10216577
> 
> 赞同：0
> 
> 时间：2012-04-18T19:29:57.063
> 
> 标签：asp.net

我目前正在开发一个 ASP.Net Web 应用程序。当我注意到我同时拥有 javascript 代码和 C# 代码时，我只是好奇。是否可以将我所有的 javascript 代码转换为 c# 代码以使其看起来更一致？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:31:24.870

不，JavaScript 代码在客户端执行。C# 在服务器端执行。它们执行两种不同的功能，不能互换处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:32:00.793

C# 是支持网页的服务器端后端逻辑。JavaScript 是在浏览器中运行的客户端代码，通常用于改善用户体验并执行一些逻辑或 UI 操作，而无需访问服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:32:11.790

Javascript 是一种在客户端的浏览器上执行的语言；C# 代码在 Web 服务器上执行。

# email - 将包含我的域内容的电子邮件发送到收件箱 Gmail

> ID：10216580
> 
> 赞同：0
> 
> 时间：2012-04-18T19:30:24.623
> 
> 标签：email, gmail, spam

当我发送包含我的域内容的电子邮件时，它会放入垃圾邮件 gmail。我的域是[`neginph.com`](http://www.neginph.com)和 ip 它是`50.115.44.157`。
如何将此电子邮件（内容我的域）放入收件箱 gmail。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:48:31.873

如果您的电子邮件被放入垃圾邮件中，您将无能为力。邮箱服务器使用自己的算法控制垃圾邮件。

尝试将您的电子邮件@域添加到受信任的发件人列表并编写内容较少的电子邮件。

阅读更多关于防止垃圾邮件的最佳实践：http: [//msg.wikidoc.info/index.php/Spam_best_practices](http://msg.wikidoc.info/index.php/Spam_best_practices)

# c# - WPF DataGrid - 分级色标上的颜色单元格

> ID：10216582
> 
> 赞同：3
> 
> 时间：2012-04-18T19:30:31.430
> 
> 标签：c#, wpf, colors, converter

我试图弄清楚是否有办法在色标上为单个单元格着色。特别是，我希望在以下内容中获得类似于 Bonus 列的内容：

![色标示例](../Images/d4f603403d68524da71356ce5dc94929.png)

目前，我已经将我的数据网格的列背景属性设置为绑定到以下转换器：

```
 public class NameToBrushConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            double? input = value as double?;
            if(input<-5)
            {
                return Brushes.MediumVioletRed;
            }
            if(-5<=input && input<-0.5)
            { 
                return Brushes.IndianRed;
            }
            if (.5 <= input && input < 5)
            { 
                return Brushes.LightGreen; 
            }
            if (5 <= input)
            { 
                return Brushes.LawnGreen; 
            } 

             return DependencyProperty.UnsetValue;            
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotSupportedException();
        }
    }
} 
```

有没有办法在不对值进行硬编码的情况下获得色标？

谢谢 - kcross

编辑：我也在尝试创建一个更好的红绿色色标（即负数到正数），就眼睛来说不太难......如果有人对此有任何建议的话好吧，这也值得赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T10:21:22.767

我创建了一个 ValueToBrushConverter。你像这样使用它：

```
Background="{Binding Path=YourDoubleValue,
                     Converter={StaticResource ValueToBrushConverter},
                     ConverterParameter='YourMinDouble|YourMaxDouble'}" 
```

这将创建一个从绿色 ( `YourMinDouble`) 到红色 ( `YourMaxDouble`) 的渐变色标，并为`YourDoubleValue`. `YourMinDouble`可以是负数，但必须更小`YourMaxDouble`。如果`YourDoubleValue`不在范围内，则返回`Brushes.Transparent`。
根据您的需求定制它！

**转换器类**

```
[ValueConversion(typeof(double), typeof(Brush))]
class ValueToBrushConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        double number = (double)value;
        double min = 0;
        double max = 100;

        // Get the value limits from parameter
        try
        {
            string[] limits = (parameter as string).Split(new char[] { '|' });
            min = double.Parse(limits[0], CultureInfo.InvariantCulture);
            max = double.Parse(limits[1], CultureInfo.InvariantCulture);
        }
        catch (Exception)
        {
            throw new ArgumentException("Parameter not valid. Enter in format: 'MinDouble|MaxDouble'");
        }

        if (max <= min)
        {
            throw new ArgumentException("Parameter not valid. MaxDouble has to be greater then MinDouble.");
        }

        if (number >= min && number <= max)
        {
            // Calculate color channels
            double range = (max - min) / 2;
            number -= max - range;
            double factor = 255 / range;
            double red = number < 0 ? number * factor : 255;
            double green = number > 0 ? (range - number) * factor : 255;

            // Create and return brush
            Color color = Color.FromRgb((byte)red, (byte)green, 0);
            SolidColorBrush brush = new SolidColorBrush(color);
            return brush;
        }

        // Fallback brush
        return Brushes.Transparent;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# java - 删除除引号 java 中的所有内容

> ID：10216585
> 
> 赞同：0
> 
> 时间：2012-04-18T19:30:34.440
> 
> 标签：java, string

我有：

```
String ex = "INSERT INTO `countries` VALUES (1, 'Afghanistan')"; 
```

java - 我怎样才能删除除“”中的内容之外的所有内容？引号内的内容是可变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:50:45.167

用正则表达式..

```
Matcher match = Pattern.compile("'.*'").matcher("INSERT INTO `countries` VALUES (1, 'Afghanistan')");
if (match.find()) {
    System.out.println(match.group());
} 
```

如果有多个引用的单词，您可以使用 for...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:36:32.317

看看正则表达式[http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression) 类似这样的...

```
pattern = "(?i)'(.+?)'";
String updated = EXAMPLE_TEST.replaceAll(pattern, "$2"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:36:41.350

`String`您可以使用`substring`、`indexOf`和`lastIndexOf`方法从 中取出碎片和部分。如果在文本中找到超过 1 对引号，您可能只需要循环几次。但是，如果它只是一个，你可以使用这个：

```
ex.substring(ex.indexOf("'"), ex.lastIndexOf("'")); 
```

这些将包括引号。如果你不想要引号，你会这样做：

```
ex.substring(ex.indexOf("'") + 1, ex.lastIndexOf("'") - 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:38:49.803

你可以通过 " using String.split(") 将它拆分成一个数组，那么数组的偶数索引就是你想要的字符串

# java - 从 DataInputStream 中读取几个 byte[]

> ID：10216590
> 
> 赞同：1
> 
> 时间：2012-04-18T19:30:48.753
> 
> 标签：java, stream

我需要做的是使用 DataStreams 发送多个文件。我通过发送文件的名称，然后是文件的字节来做到这一点。不过，我需要发送数量不定的文件。这是`DataOutputStream`代码。

```
 out.writeUTF(path);
            out.write(Files.readAllBytes(file.toPath())); 
```

它为每个需要发送的文件执行此操作。但我不知道如何正确阅读它`DataInputStream`。这就是我到目前为止所拥有的。

```
 while (in.available() != 0) {
        String path = in.readUTF();
        byte bytes = in.readByte();
    } 
```

显然它不起作用，因为它只读取一个字节。但我不知道如何让它读取所有字节。由于有几个文件被发送`available()`，我认为在读取所有文件的末尾时只会等于 0。任何帮助是极大的赞赏。

我完全忘记提及的事情，我希望能够发送一个大文件而不会耗尽内存，我认为这不会奏效。我想我需要使用缓冲区，但我不知道哪个类支持文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:56:53.090

每当您发送可变长度的消息时，您都需要某种方式来标记每个方法的开始和结束。

```
 List<File> files = someListOfFilesYouWantToSend;
 out.writeInt(files.size());
 for(File file : files){
   out.writeUTF(path);
   out.writeLong(file.getTotalSpace());
   out.write(Files.readAllBytes(file.toPath()));
 } 
```

然后阅读它你会做这样的事情

```
int filesToRead = in.readInt();    
for(int i = 0; i < filesToRead; i++){
  String path = in.readUTF();
  long bytesToRead = in.readLong();      
  FileOutputSteam fos = new FileOutputStream(path);

  byte[] buffer = new byte[1024];
  while(bytesToRead > 0){
    bytesRead = in.read(buffer,0,bytesToRead > buffer.length ? buffer.length : bytesToRead);
    bytesToRead -= bytesRead;
    fos.write(buffer);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:35:48.920

那不是这样做的方法...为什么不简单地将要发送的所有文件存档在存档中（例如 JAR 或 ZIP）？在接收方，您可以提取存档。Java 有一个可以使用的内置 JAR 实现（在 java.util.jar 包中）。

# c++ - XCode4 不能在 <> 中包含头文件

> ID：10216595
> 
> 赞同：0
> 
> 时间：2012-04-18T19:31:06.597
> 
> 标签：c++, ios, xcode4

我正在构建[https://github.com/dev2dev/OpenSceneGraph-port-to-IOS](https://github.com/dev2dev/OpenSceneGraph-port-to-IOS)，它取决于 freetype ，所以我们需要在某些文件中使用“#include”。我总是得到构建错误：***'ft2build.h' not found***。

已经尝试过[https://stackoverflow.com/a/2109083](https://stackoverflow.com/a/2109083)，但对我没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:50:35.680

你安装`freetype`包了吗？如果没有，并且您有[MacPorts](http://www.macports.org/)，则可以使用`sudo port install freetype`. `ft2build.h`然后将位于`/opt/local/include/ft2build.h`。

您需要按照您提到的有关如何添加`/opt/local/include`到 Xcode 中的用户标头搜索路径的 StackOverflow 问题的说明进行操作。

# java - AppEngine：只加载必要的罐子

> ID：10216596
> 
> 赞同：0
> 
> 时间：2012-04-18T19:31:08.907
> 
> 标签：java, google-app-engine, jar

我想包含一个用于生成用户电子邮件的模板库。但是，只有一小部分请求需要这个 jar。我想启动一项任务，该任务将加载 jar，然后在后台发送我的电子邮件，尽快返回给用户。

如何推迟加载 jar 直到需要它？

我突然想到要上传多个版本的应用程序，一个带有 jar 和其他电子邮件实用程序，一个没有。不过，我会很遗憾失去我目前使用版本的方式，即指定增量改进。还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:13:08.797

恐怕我认为这是不可能的，尽管您可以按照您建议的方式使用应用程序的多个版本，但也可以使用版本进行增量改进。由于您可以使用任何字符串作为您的应用程序的版本“编号”，因此您可以将“mail-1”和“1”作为版本 1 的两个副本。您最终获得了可用版本数量的一半，但您可以仍然将它们用于这两个目的。

# ios - iOS：Tableview 多选 - AccessoryCheckmark 检查可重复使用的单元格

> ID：10216597
> 
> 赞同：2
> 
> 时间：2012-04-18T19:31:09.377
> 
> 标签：ios, uitableview

I'm using a tableview with sections and multiple selection, but I have an issue with multiple rows being checked when one row is chosen... I've seen a few other threads about this, but didn't really get a solution. ..

这是我的代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *) indexPath
{    
    [employeeTable deselectRowAtIndexPath:[employeeTable indexPathForSelectedRow] animated:NO];

    UITableViewCell *cell = [employeeTable cellForRowAtIndexPath:indexPath];    

    // get the letter in each section
    NSString *alphabet = [charIndex objectAtIndex:indexPath.section];

    // get the names beginning with the letter
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alphabet];    

    NSArray *names = [listOfNames filteredArrayUsingPredicate:predicate];    

    NSString *name = [names objectAtIndex:indexPath.row];

    for(int i = 0; i < [employeeConnection.employees count]; i++)
    {
        Employee *aEmployee = [employeeConnection.employees objectAtIndex:i];

        NSString *firstName = aEmployee.firstName;
        NSString *lastName = aEmployee.lastName;
        NSString *fullName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

        if([fullName isEqualToString:name])
        { 
            NSLog(@"Name: %@", name);

            if (cell.accessoryType == UITableViewCellAccessoryNone) {

                cell.accessoryType = UITableViewCellAccessoryCheckmark;

                // Reflect selection in data model
                [chosenEmployees addObject:aEmployee.employeeID];
                [chosenEmployeesNames addObject:name];

            } else if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {

                cell.accessoryType = UITableViewCellAccessoryNone;

                // Reflect deselection in data model
                [chosenEmployees removeObject:aEmployee.employeeID];
                [chosenEmployeesNames removeObject:name];
            }
        }
    }
} 
```

更新：添加了 cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        cell.textLabel.textColor = [UIColor whiteColor];
    }

    // Get the letter in the current section
    NSString *alphabet = [charIndex objectAtIndex:[indexPath section]];

    // Get the names beginning with the letter
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alphabet];
    NSArray *names = [listOfNames filteredArrayUsingPredicate:predicate];

    if([names count] > 0)
    {
        // Extract the name
        cell.textLabel.text = [names objectAtIndex:indexPath.row];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T20:18:53.333

我建议存储一个`NSMutableSet`已检查的 ManagedObject（使用 CoreData 时）或仅存储已检查的 IndexPaths。在 -cellForRowAtIndexPath: 中，您可以检查是否应该检查单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *const identifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:identifier];
        cell.textLabel.textColor = UIColor.whiteColor;
    }

    if ([self.checkedIndexPaths containsObject:indexPath]) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *const cell = [tableView cellForRowAtIndexPath:indexPath];
    [table deselectRowAtIndexPath:indexPath animated:NO];

    if ([self.checkedIndexPaths containsObject:indexPath]) {
        [self.checkedIndexPaths removeObject:indexPath];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    else {
        [self.checkedIndexPaths addObject:indexPath];
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:21:40.003

由于正在重复使用单元格，因此您需要在 cellForRowAtInexPath 表数据源方法中为表中的每个单元格设置附件标记为开或关。

因此，应该在 cellForRowAtInexPath 中指定 cell.accessoryType 单元格属性，而不是在 didSelectRow 委托方法中。

在 didSelectRow 中，只需跟踪数组中选定的行，并根据数组值在 cellForRowAtInexPath 中将单元格辅助标记设置为 none 或复选标记。

# javascript - WebView goBack：中断自定义 JavaScript 对象

> ID：10216600
> 
> 赞同：2
> 
> 时间：2012-04-18T19:31:23.390
> 
> 标签：javascript, cocoa, webkit, webview

我有一个嵌入的 Cocoa 应用程序`WebView`。我已经设置我的委托来响应一些可以从 JavaScript 调用的自定义 Objective-C 函数。例如，在 JavaScript 中，我将能够调用类似`console.log()`

我将委托设置如下：

```
- (void)webView:(WebView *)sender didClearWindowObject:(WebScriptObject *)windowObject forFrame:(WebFrame *)frame {    
    [self.webView.windowScriptObject setValue:self forKey:@"console"];
} 
```

现在，当我导航到另一个页面然后使用后退按钮（通过`WebView goBack:`）时，不会调用上述方法并且我无法设置`console`对象。

但是，JavaScript 对象仍然存在（`typeof(console)`returns `object`），但在其上调用任何函数都没有任何效果。

首先，有人知道为什么`didClearWindowObject:`我调用时不调用`goBack:`吗？有什么建议可以调试 JavaScript 对象吗？

# arrays - 如何将索引转换为可变数组到 Haskell 中的状态引用？

> ID：10216605
> 
> 赞同：1
> 
> 时间：2012-04-18T19:31:37.717
> 
> 标签：arrays, haskell, functional-programming, state, mutable

我正在重新编写我问过一个问题的游戏，“[我怎样才能像二维数组一样迭代四联链接的二维数据网格？](https://stackoverflow.com/questions/10097583/how-can-i-iterate-over-a-quadruple-linked-2-dimensional-grid-of-data-as-if-it-we) ”，在 Haskell 中。

为了首先创建数据网格，我使用了一种非常命令式的算法，如下所示。它依赖的关键特性是我可以将索引放入数组并从中创建引用。例如，“&array[x][y]”。

我需要能够将索引放入可变数组并在 Haskell 中对其进行状态引用。因此类型签名可能是

```
convertToSTRef :: i -> STArray s i a -> ST s (STRef s a) 
```

我查看了文档，尝试了 hoogle 和 hayoo，但没有找到实现此目的的方法。

PS 或者，如果有人有我可以使用的不同算法，那就太好了。

PSS 简单的命令式算法。

```
const size_t rows = 20;
const size_t columns = 59;

block tiles[columns][rows];
block * const start = &tiles[columns/2][rows/2];

for (size_t x = 0; x < columns; ++x)
 for (size_t y = 0; y < rows; ++y)
 {
  tiles[x][y].floor = '^';
  tiles[x][y].inhabitant = WALL;
  tiles[x][y].side_block[EAST] = (x + 1 < columns) ? &tiles[x + 1][y] : NULL;
  tiles[x][y].side_block[SOUTH] = (y + 1 < rows) ? &tiles[x][y + 1] : NULL;
  tiles[x][y].side_block[WEST] = (x > 0) ? &tiles[x - 1][y] : NULL;
  tiles[x][y].side_block[NORTH] = (y > 0) ? &tiles[x][y - 1] : NULL;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T20:55:33.203

您可以通过游标来表示“指针”，即包含数组引用和偏移量的数据结构。

```
data Cursor t i a = Cursor (t i a) i

makeCursor :: STArray s i a -> i -> Cursor (STArray s) i a
makeCursor = Cursor

readCursor :: Ix i => Cursor (STArray s) i a -> ST s a
readCursor (Cursor arr i) = readArray arr i

writeCursor :: Ix i => a -> Cursor (STArray s) i a -> ST s ()
writeCursor x (Cursor arr i) = writeArray arr i x 
```

在 GHC 中无法指向垃圾收集对象的内部。垃圾收集器无法理解这样的指针。如果一个数组被垃圾收集器移动，垃圾收集器不能适当地更新这些指针。如果给垃圾收集器一个指向数组中间的指针，它就不能扫描整个数组，因为它找不到数组的开头。

# ruby-on-rails - 如何在 Ruby 控制器中同时记录字符串和对象？

> ID：10216613
> 
> 赞同：1
> 
> 时间：2012-04-18T19:32:00.027
> 
> 标签：ruby-on-rails, ruby

我可以用类似的东西记录东西

```
logger.debug "This is a logged string" 
```

但是当我尝试做类似的事情时

```
logger.debug "This is the object: " + object_name 
```

它不喜欢那样并给出错误。如何将对象连接成字符串并将其与我想要标记该调试行的任何内容一起输出？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:33:44.590

您可能可以执行以下操作：

```
logger.debug "This is the object: #{object_name.inspect}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:37:07.877

您可以使用 Ruby 的字符串插值。

```
logger.debug "This is the object: #{object_name}" 
```

# c++ - 这段代码有什么问题？

> ID：10216621
> 
> 赞同：-1
> 
> 时间：2012-04-18T19:01:06.930
> 
> 标签：c++

当我写作时，`cout<< Read("filepath")`我得到一组奇怪的相同字符。代码如下：

```
char* Read(std::string FilePath)
{
    char* Buffer;

    ifstream F_S(FilePath);
    while (! F_S.eof())

    {

        F_S.getline(Buffer,100);
        return Buffer; 

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:33:47.960

这里有多个问题：

首先，你的`return`语句在你的`while`循环中，这意味着循环只会执行一次，然后你就会从函数中返回。该`return`语句需要放在循环之外*。*`while`

其次，您不会为`Buffer`. 您所做的只是声明一个`char*`甚至没有初始化的指针。您需要显式分配存储空间，以便`ifstream::getline`在某个地方存储输入。你可以用它`new`来分配存储，但是由于你的`Read`函数返回一个`char*`指针，调用函数需要手动管理内存，这通常只是一个令人头疼的问题。

一个更好的解决方案是使用 free 函数`std::getline`，因为它需要一个`std::string`，所以你不必担心存储分配。您还需要更改 的函数签名`Read`以返回`std::string`.

```
std::string Read(std::string FilePath)
{
    std::ifstream F_S(FilePath.c_str());
    /* You should also check for `F_S.good()` here */

    std::string result, Buffer; 
    while(std::getline(F_S, Buffer)) 
    {
        result += Buffer;
    }

    return result;
} 
```

请注意，如果要在文件中保留回车，则需要`result`在每次迭代中手动添加它们，因为`std::getline`会丢弃分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:21:30.903

你可以像这样定义你的阅读。

```
#include <string>
#include <fstream>
#include <iostream>
using namespace std;

string& Read(string file_path)
{
    ifstream infile(file_path.c_str(), ios::in);
    string result = "";
    string line = ""; 
    while (getline(infile, line)) 
    {
        result.append(line); //also you can use result+=line, but append is faster than +=
    }

    return result;

} 
```

# python - 如何用python风格编写这个例子？

> ID：10216625
> 
> 赞同：0
> 
> 时间：2012-04-18T19:32:25.840
> 
> 标签：python

我只是在 PHP 之后学习 python，它的 python 风格对我来说很奇怪。我正在寻求建议，您如何在 python 上编写此代码：

```
data = []
for line in file:
  name, surname, phone, address, email, etc = line.split(";", 6)
  data.append( {'nick': nick, 'surname': surname, 'phone': phone, 'address': address, 'email':  email, 'etc': etc} ) 
```

我的代码看起来像 PHP -_-

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:37:25.490

没关系。当然，您可以执行以下操作：

```
data.append(dict(zip(('name', 'surname', 'phone', 'address', 'email', 'etc'),
                     line.split(";", 6)))) 
```

但您的变体更具可读性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T19:44:56.573

您的代码看起来像 php，因为您正在重新发明轮子。不！

```
import csv

fieldnames = ['name', 'surname', 'phone', 'address', 'email']

with open('something', 'r') as f:
    data = list(csv.DictReader(f, fieldnames, delimiter=';')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:37:10.400

我会使用一个函数来进行解析，然后`map()`在每一行上调用它：

```
def _parse_user_line(line):
    name, surname, phone, address, email, etc = line.split(';', 6)
    return {'nick': nick, 'surname': surname, 'phone': phone, 
            'address': address, 'email':  email, 'etc': etc}

data = map(_parse_user_line, file) 
```

将返回的列表分配给单个变量然后只使用等可能也是一个好主意`fields[0]`-`fields[1]`它们无论如何都会在 dict 键旁边，所以每个人都知道它们是什么：

```
def _parse_user_line(line):
    u = line.split(';', 6)
    return {'nick': u[0], 'surname': u[1], 'phone': u[2], 
            'address': u[3], 'email': u[4], 'etc': u[5]}

data = map(_parse_user_line, file) 
```

现在我们可以通过结合[Roman 的回答](https://stackoverflow.com/a/10216708/298479)中的想法来使它变得更好：

```
labels = 'nick surname phone address email etc'.split()
def _parse_user_line(line):
    values = line.split(';', 6)
    return dict(zip(labels, values))
data = map(_parse_user_line, file) 
```

* * *

永远不要忘记（来自 Python 之禅的一行）[：](http://www.python.org/dev/peps/pep-0020/)`import this`可读性**很重要。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:35:48.323

您可以在此处使用列表推导：

```
[{'nick': nick, 'surname': surname, 'phone': phone, 'address': address, 'email':  email, 'etc': etc} for name, surname, phone, address, email, etc in (line.split(";", 6) for line in file)] 
```

但是，由于它的长度，这很难阅读。

要构建您的数据，您可以使用[`collections.namedtuple`](http://docs.python.org/library/collections.html#collections.namedtuple)或 一个产生 dict 的函数（如[ThiefMaster 的回答](https://stackoverflow.com/a/10216703/722121)）。

这里的另一种解决方案是创建一个类来保存您的数据：

```
def Person:
   def __init__(self, nick, surname, phone, address, email, etc):
       self.nick = nick
       self.surname = surname
       ... 
```

然后使用 splat 运算符构造您的列表以解压缩您的值：

```
data = [Person(*line.split(";", 6)) for line in file] 
```

这适用于您打算对数据进行更多工作的情况 - 这里的经验法则是，如果您不使用任何方法来处理数据，那么类的功能将超出您的需要。如果你这样做，它可能是值得的。

# facebook - 通过 API 允许页面慢性/时间轴上的（状态）消息

> ID：10216626
> 
> 赞同：1
> 
> 时间：2012-04-18T19:32:25.580
> 
> 标签：facebook, facebook-graph-api, android-activity, facebook-fql, messages

在[https://www.facebook.com/SITENAME/allactivity](https://www.facebook.com/SITENAME/allactivity)我可以看到所有的帖子，其他用户已经在页面上发布了慢性。如果启用了在我的页面上管理帖子的选项，我可以手动发布/删除在我的页面上发布的每个帖子（https://www.facebook.com/help/?faq=356113237741414 -->第一段）。

我希望你明白我的意思是什么功能...... :-)

现在我的问题是：是否可以使用（Graph）API 发布/删除实际上隐藏在我的页面墙上的帖子？

# asp.net - Ajaxify RadGrid 并从后面的代码中添加标签

> ID：10216642
> 
> 赞同：0
> 
> 时间：2012-04-18T19:33:30.650
> 
> 标签：asp.net, ajax, telerik

我正在尝试在后面的代码中对 RadGrid 控件和标签进行 Ajaxify。这是我的代码。但是当 RadGrid 更改时，标签值不会刷新。你能告诉我这里有什么问题吗？

感谢您的任何帮助。

```
 <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server"> 
                        <AjaxSettings> 
                            <telerik:AjaxSetting AjaxControlID="RadAjaxManager1"> 
                                <UpdatedControls> 
                                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" /> 
                                </UpdatedControls> 
                            </telerik:AjaxSetting> 
                        </AjaxSettings> 
                    </telerik:RadAjaxManager> 

                    <telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server" LoadingPanelID="RadAjaxLoadingPanel1"> 
                        <telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="false"> 
                            <MasterTableView> 
                                <Columns> 
                                </Columns> 
                            </MasterTableView> 
                        </telerik:RadGrid> 
                    </telerik:RadAjaxPanel> 
        <div id="div1" runat="server"> 
            <table id="table1" runat="server" > 
                <tr> 
                    <td align="center"> 
                        <asp:Label ID="lblName" runat="server" Font-Bold="true"> </asp:Label> 
                    </td> 
                </tr> 
            </table> 
        </div> 
```

后面的代码。

```
 protected void Page_Load(object sender, EventArgs e) 
    { 
        try 
        { 
            if (!Page.IsPostBack) 
            { 
               RadAjaxManager1.AjaxSettings.AddAjaxSetting(RadGrid1, lblName, null); 
            } 
        } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:09:34.593

尝试不使用加载面板的重载：

```
RadAjaxManager1.AjaxSettings.AddAjaxSetting(RadGrid1, lblName); 
```

如果这仍然不起作用，请尝试以下操作：

```
ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(RadGrid1);
ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(lblName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:28:27.707

请检查下面的代码片段或演示。这在我这边工作正常。让我知道是否有任何问题。

.aspx

```
 <telerik:RadScriptManager ID="RadScriptManager1" runat="server">
</telerik:RadScriptManager>
<telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
</telerik:RadAjaxManager>
<telerik:RadGrid ID="RadGrid1" runat="server" OnNeedDataSource="RadGrid1_NeedDataSource"
    AllowPaging="True" OnPreRender="RadGrid1_PreRender" AutoGenerateColumns="false">
    <PagerStyle AlwaysVisible="true" />
    <MasterTableView>
        <Columns>
            <telerik:GridBoundColumn DataField="Name" HeaderText="Name" UniqueName="Name">
            </telerik:GridBoundColumn>
        </Columns>
    </MasterTableView>
</telerik:RadGrid>
<br />
<asp:Label ID="Label1" runat="server"></asp:Label> 
```

.aspx.cs

```
protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    DateTime dt = new DateTime();

    dynamic data = new[] {
            new { ID = 1, Name ="Name1", customdate=dt,NO = 11.00},
            new { ID = 2, Name = "Name2", customdate=dt,NO = 11.00},
            new { ID = 3, Name = "Name3", customdate=dt,NO = 11.00},
            new { ID = 4, Name = "Name4", customdate=dt.AddYears(2011),NO = 11.44},
            new { ID = 5, Name = "Name5", customdate=dt,NO = 10.4}
        };

    RadGrid1.DataSource = data;
}

protected void Page_Load(object sender, EventArgs e)
{
    RadAjaxManager1.AjaxSettings.AddAjaxSetting(RadGrid1, Label1, null);
}
protected void RadGrid1_PreRender(object sender, EventArgs e)
{

    Label1.Text = DateTime.Now.ToString();
} 
```

通过上面的示例，如果您更改 radgrid 的页面大小，那么它也会更新标签文本。

# php - SQL 检查下一行是否不存在

> ID：10216645
> 
> 赞同：1
> 
> 时间：2012-04-18T19:33:41.710
> 
> 标签：php, sql-server-2008

我有一个 MsSQL 服务器，我正在做的是从表中选择行。目前我有两行，所以我想知道如何在不进行另一个查询的情况下检查第二行之后是否没有其他行？

例如

表用户

```
id    name    pass

1     joe     123

2     bob     abc 
```

我将如何仅通过查询检查 2 之后是否没有行？我愿意将它与我当前的查询结合起来，它只是选择数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:45:18.040

您可以将查询中的行数作为另一列返回：

```
SELECT id, name, pass, count(*) over () as rows
FROM users 
```

请记住，这是告诉您查询返回的行数，而不是表中的行数。但是，如果您在选择中指定“TOP n”，则 rows 列将为您提供如果您没有“Top n”时将返回的行数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:46:16.213

如果您尝试分页，诀窍是查询比当前页面实际需要的多一条记录。通过计算结果 ( `mysql_num_rows`) 并将其与您的页面大小进行比较，您可以确定是否有“下一页”。

如果您使用的是 mysql，您也可以`SQL_CALC_FOUND_ROWS()`在查询中使用，它会计算没有 LIMIT 子句将返回的行数。也许在 MsSQL 中有一个等价物？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T20:34:03.727

我假设您手动插入表的前 2 行。

据此，我的想法是在 id 大于 2 的地方进行选择，如下所示：

```
SELECT * FROM users WHERE id > 2; 
```

我还假设您正在使用 PHP，因此如果没有找到数据，它将`mysql_num_rows`返回`0`您，否则它将返回您查询中的行数，现在您知道您需要执行一个`while`或一些循环来检索 id 编号后的数据2.

# python - 读取 3 个字节作为整数

> ID：10216650
> 
> 赞同：14
> 
> 时间：2012-04-18T19:33:49.670
> 
> 标签：python

如何读取 3 个字节作为整数？

struct 模块是否提供类似的东西？

我可以读取 3 个字节并添加一个额外的 \x00，然后将其解释为 4 字节整数，但这似乎没有必要。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T19:42:15.827

struct 模块没有 3 字节整数的选项，所以我认为附加 '\x00' 的想法是最简单的方法。

```
In [30]: import struct
In [38]: struct.pack('>3b',0,0,1)
Out[38]: '\x00\x00\x01'

In [39]: struct.unpack('>i','\x00'+'\x00\x00\x01')
Out[39]: (1,) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-28T22:49:55.553

我认为从 3.2 开始，`int`开发了一种新方法`.from_bytes`，因此您可以使用以下方法代替`struct.unpack`：

```
int.from_bytes(b'\x00\x00\x01', 'big')  
# 1 
```

如需参考，请参阅：[http ://docs.python.org/dev/library/stdtypes.html#int.from_bytes](http://docs.python.org/dev/library/stdtypes.html#int.from_bytes)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-05T15:54:51.880

python 2 且没有模块的替代方案`struct`是：

```
>>> s = '\x61\x62\xff'
>>> a = sum([ord(b) * 2**(8*n) for (b, n) in zip(s, range(len(s))[::-1])])
>>> print a
6382335 
```

其中字节顺序为大端。[这给出了与unutbu](https://stackoverflow.com/users/190597/unutbu)答案相同的结果 ：

```
>>> print struct.unpack('>I', '\x00' + s)[0]
6382335 
```

对于 little-endian 字节排序，转换将是：

```
>>> a = sum([ord(b) * 2**(8*n) for (b, n) in zip(s, range(len(s)))])
>>> print a
16736865
>>> print struct.unpack('<I', s + '\x00')[0]
16736865 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-02T20:51:27.427

另一种选择是自己进行位移。

大端：

```
ba = # 3 byte bytearray
v = ba[0] << 16 | ba[1] << 8 | ba[2] 
```

小端

```
ba = # 3 byte bytearray
v = ba[2] << 16 | ba[1] << 8 | ba[0] 
```

# c# - ReturnUrl 来自 ASP.NET MVC3 中的表单

> ID：10216651
> 
> 赞同：1
> 
> 时间：2012-04-18T19:33:50.300
> 
> 标签：c#, asp.net-mvc-3, redirect

我做了一些研究，发现我可以使用：

```
string retUrl = "";
    if (ViewContext.HttpContext.Request.UrlReferrer != null)
    {
        retUrl =
          ViewContext.HttpContext.Request.UrlReferrer.PathAndQuery;
    } 
```

作为一种设置 returnUrl 的方法，然后通过操作链接将其传递给控制器​​。

但是，有什么方法可以将参数从表单传递到控制器？

这是我的代码现在的样子：

```
@using (Html.BeginForm(new { returnUrl = retUrl})) {
    @Html.EditorForModel()
    <input type="submit" value="Save"/>
} 
```

这很有效，因为它会在您提交表单时将您返回到正确的 URL。但是，表单实际上并没有得到保存。如果我删除了 returnUrl 参数，它会保存表单，但不会正确重定向。

我这样做的原因是因为可以从多个页面访问此表单，我不想在他们提交表单后将它们全部发送到一个页面，而是发送到前一页。

**编辑**

我也试过 BeginRouteForm 并指定一个控制器和动作，这两种方法都不起作用。

**编辑**

动作来源：

```
[Authorize]
        [HttpPost]
        public ActionResult EditReview(Review review, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                            && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                reviewRepository.SaveReview(review);
                return RedirectToAction("Index");
            }
            return View(review);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:54:16.710

要在重定向之前保存表单，您需要在操作方法中切换一些行。代替：

```
if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
     && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
{
  return Redirect(returnUrl);
}
reviewRepository.SaveReview(review);
return RedirectToAction("Index"); 
```

至

```
reviewRepository.SaveReview(review);
if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
     && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
{
  return Redirect(returnUrl);
}
return RedirectToAction("Index"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:44:50.607

像这样？

```
@using(Html.BeginForm("act","contr",FormMethod.Post) {
            @Html.Hidden("returnUrl",ViewContext.HttpContext.Request.Url.PathAndQuery)
            <input type="submit" />
        } 
```

在 BeginForm 方法中传递相同的内容应该没有任何问题——要么绑定到`ActionMethod(string returnUrl)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:46:47.570

如果我对您的理解正确，您实际上是在更改`ACTION`表单上的方法，所以我并不感到惊讶它没有保存。我会摆脱它，并按照您最初的意图发布到控制器/动作。然后添加`retUrl`作为隐藏输入与表单数据的其余部分一起发布。

```
@using (Html.BeginForm()) {
    @Html.EditorForModel()
    <input type="hidden" name="returnUrl" value="@retUrl" /> 
    <input type="submit" value="Save"/>
    } 
```

**编辑：**

您还可以使用 Html 帮助程序。

```
@Html.Hidden("returnUrl", retUrl) 
```

# javascript - 折线图上的渐变填充（Highcharts）

> ID：10216654
> 
> 赞同：14
> 
> 时间：2012-04-18T19:33:54.163
> 
> 标签：javascript, css, highcharts

我一直无法找到可以让我结合这两个图表外观的文档：

[不规则时间图表](http://www.highcharts.com/demo/spline-irregular-time/gray)
[线/带有渐变填充的时间图表](http://www.highcharts.com/demo/line-time-series/gray)

我正在尝试在不规则时间图中的 3 行中的每一行下放置渐变填充。

据我所知：http: [//jsfiddle.net/WNDUH/](http://jsfiddle.net/WNDUH/)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T20:22:06.000

尝试将 area 对象移动到 plotOptions 中，然后定义每个系列的类型和 fillColor。

**编辑**

[http://jsfiddle.net/WNDUH/10/](http://jsfiddle.net/WNDUH/10/)

**JS：**

```
$(function () {
  var chart;
  $(document).ready(function () {
    chart = new Highcharts.Chart({
        chart : {
          renderTo : 'container',
          type : 'spline',
          backgroundColor : {
            linearGradient : [0, 0, 0, 400],
            stops : [
              [0, 'rgb(96, 96, 96)'],
              [1, 'rgb(16, 16, 16)']
            ]
          }
        },
        title : {
          text : 'Snow depth in the Vikjafjellet mountain, Norway'
        },
        subtitle : {
          text : 'An example of irregular time data in Highcharts JS'
        },
        xAxis : {
          type : 'datetime',
          dateTimeLabelFormats : { // don't display the dummy year
            month : '%e. %b',
            year : '%b'
          }
        },
        yAxis : {
          title : {
            text : 'Snow depth (m)'
          },
          min : 0
        },
        tooltip : {
          formatter : function () {
            return '<b>' + this.series.name + '</b><br/>' +
            Highcharts.dateFormat('%e. %b', this.x) + ': ' + this.y + ' m';
          }
        },
        plotOptions : {
          area : {
            lineWidth : 1,
            marker : {
              enabled : false,
              states : {
                hover : {
                  enabled : true,
                  radius : 5
                }
              }
            },
            shadow : false,
            states : {
              hover : {
                lineWidth : 1
              }
            }
          }
        },
        series : [{
            name : 'Winter 2007-2008',
            type : "area",
            fillColor : {
              linearGradient : [0, 0, 0, 300],
              stops : [
                [0, Highcharts.getOptions().colors[0]],
                [1, 'rgba(2,0,0,0)']
              ]
            },
            // Define the data points. All series have a dummy year
            // of 1970/71 in order to be compared on the same x axis. Note
            // that in JavaScript, months start at 0 for January, 1 for February etc.
            data : [
              [Date.UTC(1970, 9, 27), 0],
              [Date.UTC(1970, 10, 10), 0.6],
              [Date.UTC(1970, 10, 18), 0.7],
              [Date.UTC(1970, 11, 2), 0.8],
              [Date.UTC(1970, 11, 9), 0.6],
              [Date.UTC(1970, 11, 16), 0.6],
              [Date.UTC(1970, 11, 28), 0.67],
              [Date.UTC(1971, 0, 1), 0.81],
              [Date.UTC(1971, 0, 8), 0.78],
              [Date.UTC(1971, 0, 12), 0.98],
              [Date.UTC(1971, 0, 27), 1.84],
              [Date.UTC(1971, 1, 10), 1.80],
              [Date.UTC(1971, 1, 18), 1.80],
              [Date.UTC(1971, 1, 24), 1.92],
              [Date.UTC(1971, 2, 4), 2.49],
              [Date.UTC(1971, 2, 11), 2.79],
              [Date.UTC(1971, 2, 15), 2.73],
              [Date.UTC(1971, 2, 25), 2.61],
              [Date.UTC(1971, 3, 2), 2.76],
              [Date.UTC(1971, 3, 6), 2.82],
              [Date.UTC(1971, 3, 13), 2.8],
              [Date.UTC(1971, 4, 3), 2.1],
              [Date.UTC(1971, 4, 26), 1.1],
              [Date.UTC(1971, 5, 9), 0.25],
              [Date.UTC(1971, 5, 12), 0]
            ]
          }, {
            name : 'Winter 2008-2009',
            type : "area",
            fillColor : {
              linearGradient : [0, 0, 0, 300],
              stops : [
                [0, Highcharts.getOptions().colors[1]],
                [1, 'rgba(2,0,0,0)']
              ]
            },
            data : [
              [Date.UTC(1970, 9, 18), 0],
              [Date.UTC(1970, 9, 26), 0.2],
              [Date.UTC(1970, 11, 1), 0.47],
              [Date.UTC(1970, 11, 11), 0.55],
              [Date.UTC(1970, 11, 25), 1.38],
              [Date.UTC(1971, 0, 8), 1.38],
              [Date.UTC(1971, 0, 15), 1.38],
              [Date.UTC(1971, 1, 1), 1.38],
              [Date.UTC(1971, 1, 8), 1.48],
              [Date.UTC(1971, 1, 21), 1.5],
              [Date.UTC(1971, 2, 12), 1.89],
              [Date.UTC(1971, 2, 25), 2.0],
              [Date.UTC(1971, 3, 4), 1.94],
              [Date.UTC(1971, 3, 9), 1.91],
              [Date.UTC(1971, 3, 13), 1.75],
              [Date.UTC(1971, 3, 19), 1.6],
              [Date.UTC(1971, 4, 25), 0.6],
              [Date.UTC(1971, 4, 31), 0.35],
              [Date.UTC(1971, 5, 7), 0]
            ]
          }, {
            name : 'Winter 2009-2010',
            type : "area",
            fillColor : {
              linearGradient : [0, 0, 0, 300],
              stops : [
                [0, Highcharts.getOptions().colors[2]],
                [1, 'rgba(2,0,0,0)']
              ]
            },
            data : [
              [Date.UTC(1970, 9, 9), 0],
              [Date.UTC(1970, 9, 14), 0.15],
              [Date.UTC(1970, 10, 28), 0.35],
              [Date.UTC(1970, 11, 12), 0.46],
              [Date.UTC(1971, 0, 1), 0.59],
              [Date.UTC(1971, 0, 24), 0.58],
              [Date.UTC(1971, 1, 1), 0.62],
              [Date.UTC(1971, 1, 7), 0.65],
              [Date.UTC(1971, 1, 23), 0.77],
              [Date.UTC(1971, 2, 8), 0.77],
              [Date.UTC(1971, 2, 14), 0.79],
              [Date.UTC(1971, 2, 24), 0.86],
              [Date.UTC(1971, 3, 4), 0.8],
              [Date.UTC(1971, 3, 18), 0.94],
              [Date.UTC(1971, 3, 24), 0.9],
              [Date.UTC(1971, 4, 16), 0.39],
              [Date.UTC(1971, 4, 21), 0]
            ]
          }
        ]
      });
  });
}); 
```

**HTML：**

```
<script src="http://code.highcharts.com/highcharts.js"></script>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div> 
```

# vb.net - 通过 ForEach 创建 DataGrid 视图

> ID：10216659
> 
> 赞同：0
> 
> 时间：2012-04-18T19:34:05.003
> 
> 标签：vb.net, datagridview, dataset

我在从名为“ds”的数据集内名为“dt”的表中的“MobileID”列中的每一行中提取值时遇到问题。

以下是数据集和数据表的创建方式。

```
 Public Function GetClientSpecificDevices(ByVal argHost As FOO.BAR.SHOO, ByVal currentClientIDSelection As Integer) As DataSet        
        Return argHost.GetDataSet("SELECT MobileID FROM mobiledevices WHERE ClientID = " & currentClientIDSelection & ";")

        'create dataset to handle tabular data
        Dim ds As New DataSet
        'Ensure every call refreshes dataset rather than appending
        'ds.Tables.Clear()
        Dim dt As New DataTable

        'add table and populate table with data
        ds.Tables.Add(dt)
        dt.Columns.Add("MobileID")
        'return dataset
        Return ds 
```

对于 DataGrid

```
Function GenerateDataRows() As Object
    Dim row As New DataGridViewRow()
    Dim ds As DataSet = GetClientSpecificDevices(_objHost, CInt(comboBox_clients.ValueMember))
    If Not ds Is Nothing AndAlso ds.Tables(0).Rows.Count > 0 Then
        For Each A As DataRow In ds.Tables(0).Rows
            'populate rows
            Dim deviceID As New DataGridViewTextBoxCell
            Dim deviceName As New DataGridViewTextBoxCell
            Dim deviceModel As New DataGridViewTextBoxCell
            Dim devicePhoneNum As New DataGridViewTextBoxCell
        Next
    End If

    Return row
End Function 
```

我正在寻找这样的东西

```
Dim deviceID As New DataGridViewTextBoxCell
deviceID.Value  = A.MobileID 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T01:51:51.607

似乎您正在创建一个单独的 DataGridViewTextBoxCell 与您的 DataGridViewRow 不合作，您可以尝试以下代码

```
Function GenerateDataRows() As Object
    Dim row As New DataGridViewRow()
    Dim ds As DataSet = GetClientSpecificDevices(_objHost, CInt(comboBox_clients.ValueMember))
    If Not ds Is Nothing AndAlso ds.Tables(0).Rows.Count > 0 Then
        For Each A As DataRow In ds.Tables(0).Rows
            'populate rows
           row.cell(0).value = A.MobileID
        Next
    End If

    Return row
End Function 
```

# c# - LINQ - 从具有特定标签的 XML 元素中选择 *

> ID：10216660
> 
> 赞同：2
> 
> 时间：2012-04-18T19:34:10.027
> 
> 标签：c#, .net, xml, linq

我一直在查看以下链接中的 LINQ 示例；我已经在链接下面发布了代码。

是否可以修改此示例，以便返回的项目`var`包含在与 doc.Descendants("person") 过滤器匹配的项目中找到的所有子元素？我基本上希望这个 XML 查询能够像 SQL 选择 * 这样我就不必像他们对饮料、moneySpent 和邮政编码所做的那样明确指定字段名称。

[http://broadcast.oreilly.com/2010/10/understanding-c-simple-linq-to.html#example_1](http://broadcast.oreilly.com/2010/10/understanding-c-simple-linq-to.html#example_1)

```
static void QueryTheData(XDocument doc)
{
     // Do a simple query and print the results to the console
     var data = from item in doc.Descendants("person")
                 select new
                 {
                      drink = item.Element("favoriteDrink").Value,
                      moneySpent = item.Element("moneySpent").Value,
                      zipCode = item.Element("personalInfo").Element("zip").Value
                  };
     foreach (var p in data)
         Console.WriteLine(p.ToString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:03:48.583

OP说他喜欢发布的答案，所以我将重新提交它以供科学使用:)

```
var data = from item in doc.Descendants("person")
           select item; 
```

唯一的问题是 data 是`IEnumerable<XElement>`，您必须按字符串名称查询字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T19:39:13.863

```
// Do a simple query and print the results to the console 
var data = from item in doc.Descendants("person") 
             select item; 
```

# python - 未发现 djutils 队列命令

> ID：10216662
> 
> 赞同：1
> 
> 时间：2012-04-18T19:34:25.213
> 
> 标签：python, django, multithreading, task-queue

我正在尝试使用[django-utils](http://charlesleifer.com/docs/djutils/index.html)在并行线程中异步启动许多命令（这些命令处理 99.99% 的 I/O）。但是，我不断收到以下错误：

```
QueueException: MyProject.maintenanceInterface.commands.queuecmd_refreshDataAsync not found in CommandRegistry 
```

函数 refreshDataAsync 位于维护接口内的 commands.py 中 - 维护接口位于已安装应用程序列表中。

我像这样运行队列消费者：

```
python .\manage.py queue_consumer 
```

当我查看队列消费者日志时，它会告诉我它找到了函数（在初始化时）：

```
djutils.commands.queuecmd_delayed_resize
djutils.queue.queue.QueueCommand
djutils.queue.queue.PeriodicQueueCommand
maintenanceInterface.commands.queuecmd_refreshDataAsync
2012-04-18 16:57:10,598:djutils.queue.logger:INFO:Starting periodic command execution thread 
```

并且仍然抛出异常。

我在某处错过了一步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:44:15.737

不是一个直截了当的答案，但确实是一个不错的建议，只需使用 celery 和 django celery 来执行此异步处理。

您可以使用 django-utils 完成所有操作（至少在异步方面）以及更多（许多后端，您可以命名的任何类型的设置/参数），也很少有相关项目使用 celery 来做异步的事情（例如，您想使用 celery 发送电子邮件，您编写 0 行代码，有一个应用程序。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:54:51.097

问题是消费者正在导入与 django 代码库相同的库 - 但路径略有不同。

消费者正在进口

```
maintenanceInterface.commands.queuecmd_refreshDataAsync 
```

并且代码显式调用了它上面的包：

```
WepPlatform.maintenanceInterface.commands.refreshDataAsync 
```

所以消费者无法匹配并且不会运行该命令。

# android - 在android ndk中使用opencv haarcascades

> ID：10216664
> 
> 赞同：1
> 
> 时间：2012-04-18T19:34:49.200
> 
> 标签：android, opencv, android-ndk, java-native-interface

我想在 opencv cpp 中使用 facedetection 在 android 应用程序中使用它。我已经成功编译了jni。但我想知道我将如何使用 haarcascades。我可以存储在 sdcard 中并从那里读取它。有没有其他方法可以直接从项目中使用 xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:03:04.257

opencv 超级包附带了一个名为 facedetect 的 c++ 示例。我自己正在运行 OpenCV-2.3.1，它位于以下文件夹中：**../ opencv-2.3.1/samples/c/**

该示例使用 haarcascades，这可能是您进行人脸检测的最佳选择。如果您可以将 Android NDK 与来自 .cpp 文件的正确 JNI 调用一起使用，那么使用此示例应该没有任何问题。

我自己也在做类似的事情，但我自己还没有尝试过。应该在下周的某个地方实施，但不能保证。让我知道这是否适合你

# mysql - 数据库文件未显示在 SHOW VARIABLES 告诉我它们所在的位置

> ID：10216666
> 
> 赞同：1
> 
> 时间：2012-04-18T19:34:53.287
> 
> 标签：mysql

在 MySQL 中键入 SHOW VARIABLES 将显示 datadir is = "C:\Program Files\MySQL\MySQL Server 5.5\data"

...但是，查看数据文件夹时仅显示“mysql”和“performance_schema”文件夹，而事实上，我已经创建了八个数据库（包括前面提到的两个）。

来自其他数据库的信息（例如“sakila”）存储在哪里？

# c# - 数据模板和列表框

> ID：10216667
> 
> 赞同：0
> 
> 时间：2012-04-18T19:35:00.447
> 
> 标签：c#, wpf, datatemplate

在我的应用程序中，我在他的 ItemTemplate 上有一个带有数据模板的列表框，带有一些文本块和复选框。我使用这个应用程序来加载一个 Excel 表，读取它的内容并将一些项目添加到列表框中（目的是创建一个用于描述的文本块和一个用于事件的复选框）。

我的第一个想法是使用 DataGrid，但是，当我阅读工作表时，我必须为复选框创建事件（每个 CB 一个事件），但我无法使用 DataGrid。然后，我使用 ItemTemplate 中的数据模板转到列表框选项。但是我在使用 ContentPresenter 时被困在“空”问题对象上（从我读到的，这是因为列表框中的项目没有“准备好”，WPF 上的一些错误）。

那么，还有另一种“自动化”的方法吗？或者我必须创建每个文本块和复选框？

谢谢 ！（抱歉英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:48:01.723

实现这一点的正统方法是构造一个视图模型对象来表示您要显示的每个项目。此视图模型可能包含一个 bool 属性和一个字符串属性来保存您的数据。在解析 Excel 表时，为每个条目构建一个视图模型实例，将数据放入其中，然后将其添加到列表中

阅读完所有的 Excel 数据后，您就可以着手实现数据的呈现了。首先，为您的视图模型对象声明一个 DataTemplate。在这个 DataTemplate 中，将一个复选框绑定到您的布尔值，并将一个文本块/标签绑定到您的字符串。接下来，声明 a`ListBox`并将您的视图模型列表实例绑定到`ListBox.ItemsSource`. 如果您做的一切正确，您应该会看到一个列表框，其中每一行都包含一个复选框和一个描述。

注意：如果您希望用户能够修改视图模型中的数据，请确保在您的视图模型对象上实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)并在 DataTemplate 中使用 TwoWay 绑定。

# jquery - 如何编写“如果不是类”jQuery 选择器？

> ID：10216669
> 
> 赞同：38
> 
> 时间：2012-04-18T19:35:11.407
> 
> 标签：jquery, jquery-selectors

我想用 var p 做点什么：

```
var p = $("li:last"); 
```

但是如果附加了某个类，我不想做任何事情。我试过：不是这样的：

```
var p = $("li:last:not(.Class)"); 
```

这行不通。如何在我的 var 中排除 .Class？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-18T19:36:27.863

```
var p = $("li:last").not(".Class"); 
```

[http://api.jquery.com/not/](http://api.jquery.com/not/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-18T19:40:19.920

实际上`:not`确实可以作为选择器。

如果你想选择最后一个没有类的元素，使用这个

```
var p = $("li:not(.Class):last"); 
```

这首先选择`li`没有该类的 s，*然后*是最后一个。[看到它在这里工作](http://jsfiddle.net/cambraca/5rhta/1/)。

为了清楚起见，这些是等效的：

```
var p = $("li:not(.Class):last");
var p = $("li").not(".Class").last(); 
```

而且，这些也是等价的：

```
var p = $("li:last:not(.Class)");
var p = $("li").last().not(".Class"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:54:58.863

```
var p = $("li:last");
if (!p.hasClass('Class')){
//some stuff
} 
```

[http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

# c# - 在 C# 中，“SELECT TOP 0 * FROM (/* ... */) s”与 ADO.NET 结合使用是确定 SELECT 语句中的列信息的好方法吗？

> ID：10216670
> 
> 赞同：1
> 
> 时间：2012-04-18T19:35:13.730
> 
> 标签：c#, sql, ado.net

我有一个 SQL SELECT 语句，直到运行时才知道，它可能包含 JOIN 和内部选择。我需要从 C# 中确定语句返回结果的每一列的名称和数据类型。我倾向于做类似的事情：

```
string orginalSelectStatement = "SELECT * FROM MyTable";

string selectStatement = string.Format("SELECT TOP 0 * FROM ({0}) s", orginalSelectStatement);
SqlConnection connection = new SqlConnection(@"MyConnectionString");
SqlDataAdapter adapter = new SqlDataAdapter(selectStatement, connection);

DataTable table = new DataTable();
adapter.Fill(table);

foreach (DataColumn column in table.Columns)
{
    Console.WriteLine("Name: {0}; Type: {1}", column.ColumnName, column.DataType);
} 
```

有没有更好的方法来做我想做的事情？“更好”是指完成相同任务的资源较少的方式或完成相同任务的更确定的方式（即，据我所知，我刚刚给出的代码片段在某些情况下会失败）。

**解决方案**：首先，我的`TOP 0`技巧很糟糕，即对于这样的事情：

`SELECT TOP 0 * FROM (SELECT 0 AS A, 1 AS A) S`

换句话说，在子选择中，如果两个事物被别名为相同的名称，则会引发错误。所以它不在图片中。但是，为了完整起见，我继续测试了它，以及两个建议的解决方案： `SET FMTONLY ON`和`GetSchemaTable`.

以下是结果（每 1,000 个查询以毫秒为单位）：

> 模式时间：3130
> 
> TOP 0 时间：2808
> 
> FMTONLY 上线时间：2937

**我的建议是`GetSchemaTable`**，因为它更有可能通过删除`SET FMTONLY ON`as valid SQL 来适应未来，并且它解决了别名问题，即使它稍微慢一些。 **但是，如果您“知道”重复的列名永远不会成为问题，那么`TOP 0`它`GetSchemaTable`**比`SET FMTONLY ON`.

这是我的实验代码：

```
int schemaTime = 0;
int topTime = 0;
int fmtOnTime = 0;

SqlConnection connection = new SqlConnection(@"MyConnectionString");
connection.Open();

SqlCommand schemaCommand = new SqlCommand("SELECT * FROM MyTable", connection);
SqlCommand topCommand = new SqlCommand("SELECT TOP 0 * FROM (SELECT * FROM MyTable) S", connection);
SqlCommand fmtOnCommand = new SqlCommand("SET FMTONLY ON; SELECT * FROM MyTable", connection);

for (int i = 0; i < 1000; i++)
{
    {
        DateTime start = DateTime.Now;
        using (SqlDataReader reader = schemaCommand.ExecuteReader(CommandBehavior.SchemaOnly))
        {
            DataTable table = reader.GetSchemaTable();
        }
        DateTime stop = DateTime.Now;
        TimeSpan span = stop - start;
        schemaTime += span.Milliseconds;
    }

    {
        DateTime start = DateTime.Now;

        DataTable table = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter(topCommand);
        adapter.Fill(table);

        DateTime stop = DateTime.Now;
        TimeSpan span = stop - start;
        topTime += span.Milliseconds;
    }

    {
        DateTime start = DateTime.Now;

        DataTable table = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter(fmtOnCommand);
        adapter.Fill(table);

        DateTime stop = DateTime.Now;
        TimeSpan span = stop - start;
        fmtOnTime += span.Milliseconds;
    }
}

Console.WriteLine("Schema Time: " + schemaTime);
Console.WriteLine("TOP 0 Time: " + topTime);
Console.WriteLine("FMTONLY ON Time: " + fmtOnTime);

connection.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:38:29.093

您可以使用[GetSchemaTable](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getschematable.aspx)做您想做的事。

[这里](http://support.microsoft.com/kb/310107)有一个如何使用它的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:41:07.727

如果使用 SQL Server，我会尝试使用[SET FMTONLY ON](http://msdn.microsoft.com/en-us/library/ms173839%28v=sql.110%29.aspx)

> 仅将元数据返回给客户端。可用于在不**实际运行查询的情况下测试响应的格式。**

显然在 SQL Server 2012 上，有更好的方法。全部在链接的 MSDN 文章中指定。

顺便说一句，这种技术是 LINQ To SQL 在内部用来确定存储过程等返回的结果集的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:53:32.463

动态 SQL 总是有点雷区，但您可以在查询上设置 FMTONLY ON - 这意味着查询将只返回元数据，就像没有返回任何结果一样。所以：

```
string selectStatement = string.Format("SET FMTONLY ON; {0}", orginalSelectStatement); 
```

或者，如果您没有绑定到 ADO，您是否可以不走[Linq-to-SQL](http://msdn.microsoft.com/en-us/library/bb399398.aspx)路线并生成一个数据上下文，它将您的所有数据库模式映射到代码及其相关类型？您还可以查看一些微型 ORM，例如[Dapper.Net](http://code.google.com/p/dapper-dot-net/)

还有很多其他的 ORM。

# c++ - 我的 C++ Floyd 的全对最短路径程序有什么问题？

> ID：10216673
> 
> 赞同：0
> 
> 时间：2012-04-18T19:35:24.630
> 
> 标签：c++, algorithm, shortest-path, floyd-warshall

我正在尝试查找 5x5 矩阵的所有对最短路径矩阵，但输出未显示正确答案。

这是初始矩阵和我的输出：

![在此处输入图像描述](../Images/850ff4c8db1a637e8abb495cbe5fc48a.png)

这是实际的解决方案：

```
[0, 2, 3, 1, 4, 

6, 0, 3, 2, 5

10, 12, 0, 4, 7,

6, 8, 2, 0, 3,

3, 5, 6, 4, 0] 
```

如您所见，它正确读取了初始矩阵，但在代码中的某处，数学没有被正确应用，或者有些东西搞砸了。

[下面是我的代码](http://pastebin.com/44wFwxfm)，你能找到我的错误吗？

```
int matrixFloyd(int *C, int n, int *A, string* s)
{

  int i,j,k;

  for (i=0; i<n; i++)
  {
    for (j=0; j<n; j++)
    {
      if ( *(C+i*n+j) == -1)
      {
        *(A+i*n+j) = 999999999;
      }
      else
      {
        *(A+i*n+j) = 1;
        char sz[3]="";
        sprintf(sz,"%d",j+1);
        s[i*n+j]=sz;
      }
    }
  }

  for (i=0; i<n; i++)
  {
    *(A+i*n+i) = 0;
  }

  for (k=0; k<n; k++)
  {
    for (i=0; i<n; i++)
    {
      for (j=0; j<n; j++)
      {
        if ( *(A+i*n+k) + *(A+k*n+j) < *(A+i*n+j) )

          // A[i][j] = A[i][k] + A[k][j];
          *(A+i*n+j) = *(A+i*n+k)+ *(A+k*n+j);
      }
    }
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:46:11.947

您忽略了原始 C 值：

```
*(A+i*n+j) = 1; 
```

应该

```
*(A+i*n+j) = *(C+i*n+j); 
```

# objective-c - iPad 加载视图和界面方向

> ID：10216674
> 
> 赞同：0
> 
> 时间：2012-04-18T19:35:39.450
> 
> 标签：objective-c, ios, uiimageview, splash-screen, landscape-portrait

我的应用程序有问题。我有一个 UIImageView “Default-Landscape.png” 的飞溅代码是：

```
- (void)showLoadingWithTitle:(NSString*)loadingTitle {
    if(![self.view viewWithTag:123456]) {
        UIImageView *overlayView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        //overlayView.backgroundColor = [UIColor lightGrayColor];
        overlayView.tag = 123456;
        overlayView.autoresizingMask = UIViewAutoresizingFlexibleWidth+UIViewAutoresizingFlexibleHeight;
        overlayView.image = [UIImage imageNamed:@"Default-Landscape.png"];
    }
} 
```

到目前为止，一切都很好。当我将 iPad 旋转到纵向时出现问题，我认为 Portait 正在加载横向图像，因为它看起来不像应该的那样，我不知道该怎么办...¿任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:16:57.993

**编辑**：实际上更简单......

```
 - (void)showLoadingWithTitle:(NSString*)loadingTitle {
    if(![self.view viewWithTag:123456]) {
        UIImageView *overlayView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        //overlayView.backgroundColor = [UIColor lightGrayColor];
        overlayView.tag = 123456;
        overlayView.autoresizingMask = UIViewAutoresizingFlexibleWidth+UIViewAutoresizingFlexibleHeight;
if (([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft) || 
            ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight)) 
         {
        overlayView.image = [UIImage imageNamed:@"Default-Landscape.png"];
         } else
{
        overlayView.image = [UIImage imageNamed:@"Default-Portrait.png"];

}
    }
} 
```

# java - Formatter 格式方法输出限制？

> ID：10216676
> 
> 赞同：0
> 
> 时间：2012-04-18T19:35:40.527
> 
> 标签：java

我在 Windows 7 上，我的 Formatter 对象只想将大约 2500 个值写入文件。之后，文件在数字中间突然被切断，之后就空了。我知道 while 循环正在执行完整的 4200 次，并且 iter.next() 正在为所有这些迭代返回正确的值，因为我在它发生时将它们打印出来。然而，实际写入文件部分在大约第 2500 次写出后结束。有任何想法吗？谢谢！-瑞安

```
try{...

output = new Formatter("C:\\users\\ryans\\desktop\\IntelMA.tsv");
...
}

...

Iterator<Double> iter = MA.getMovingAverage().iterator();

while (iter.hasNext()){
    output.format("%f\t", iter.next());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:40:08.000

我的猜测是你从来没有关闭或刷新过`Formatter`，所以任何缓冲的输出都会丢失。

你应该在一个`finally`块中关闭它。

# node.js - 使用 Socket.IO 设置和获取会话数据时，传递的函数是做什么用的？

> ID：10216682
> 
> 赞同：1
> 
> 时间：2012-04-18T19:36:05.703
> 
> 标签：node.js, socket.io

在以下来自 Socket.IO 网站的代码片段中，

```
socket.set('nickname', name, function () {
    socket.emit('ready');
}); 
```

设置客户端数据时，传递的函数是做什么用的？设置数据后是否仅用于触发功能？如果是这样，有什么区别：

```
socket.set('nickname', name);
socket.emit('ready'); 
```

还有`err`以下用途：

```
socket.get('nickname', function (err, name) {
    console.log('Chat message by ', name);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:58:24.620

> 设置客户端数据时，传递的函数用于什么

这是一个异步回调，这意味着它是一个将在`set`操作完成后调用的函数

> 如果是这样，有什么区别...

这是一个很大的区别。`socket.set`是非阻塞的，这意味着将调用该方法，但该过程将继续执行以下代码，而无需等待它完成。这意味着`socket.emit`将在`set`完成之前调用。

> 还有什么是“错误”用于以下：

err 可能是连接错误或`get`方法过程中出现的任何问题

# html - 堆叠扩展 DIV

> ID：10216683
> 
> 赞同：0
> 
> 时间：2012-04-18T19:36:09.807
> 
> 标签：html, css, positioning

我正在尝试创建一个包含三列的页面。外列很简单。但是，中间列的顶部有一个列宽的 div，需要垂直扩展以适应内容，然后是其他两个需要并排放置的 div。我的问题是让两个较低的 div 随着顶部 div 的扩展而向下移动。

中心栏的核心代码是：

```
// the top column-wide div
echo '<div id="centre">';
// echo some variable length text
echo '</div>';

// the bottom left div
echo '<div id="centreleft">';
// echo some variable length text
echo '</div>';

// the bottom right div
echo '<div id="centreright">';
// echo some variable length text
echo '</div>'; 
```

使用固定高度的顶部 div，以下 css 有效：

```
#centre {
    position: absolute;
    left: 230px;
    top: 30px;
    width: 690px;
    overflow: visible;
}
#centreleft {
    position: absolute;
    left: 230px;
    top: 355px;
    width: 335px;
    overflow: visible;
}
#centreright {
    position: absolute;
    left: 595px;
    top: 355px;
    width: 320px;
    overflow: visible;
} 
```

我需要更改什么才能使顶部 div 具有可变高度？我尝试将下部 div 的位置更改为相对位置，但随后所有内容都写入屏幕的左上角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:39:18.603

不要使用绝对定位。浮动较低的 div 或 use`display:inline-block;`等。绝对位置意味着“将它们保持在原处”，它将它们从文档流中删除并且它们被锚定在适当的位置。

更多信息： [https ://developer.mozilla.org/en/CSS/position#Absolute_positioning](https://developer.mozilla.org/en/CSS/position#Absolute_positioning)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:44:13.940

为什么还要使用 position:absolute 呢？

见：http: [//jsfiddle.net/vFEux/](http://jsfiddle.net/vFEux/)

并使用边距将容器彼此移动得更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:14:11.273

我同意。浮动这些婴儿而不是绝对定位并清除第二个 div 以确保它低于第一个。

# c# - 需要使用会话变量将项目从一个列表框复制到另一个列表框

> ID：10216685
> 
> 赞同：0
> 
> 时间：2012-04-18T19:36:17.843
> 
> 标签：c#, asp.net, list, session, session-variables

第 1 页：（将列表框项发送到列表中并将列表保存为会话变量）

```
List<string> list = new List<string>();
foreach(ListItem item in ListBox1.Items)
{
    list.Add(item.ToString());
}
Session["temp"] = list; 
```

第2页：（将会话变量复制到列表中并将列表分配给此页面中的列表框）

```
List<string> list = new List<string>();
list = (List<string>)Session["JobRole"];
foreach (ListItem item in list)
{
    ListBox2.Items.Add(item.ToString());
} 
```

这样做时，这是我得到的错误：无法将类型“字符串”转换为“System.Web.UI.WebControls.ListItem”

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:38:46.520

你不是说

```
 foreach (string item in list)
    {
        ListBox2.Items.Add(item);
    } 
```

... list`string`毕竟是 s 的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:40:44.547

那是因为您已将列表定义为列表。如果您只是想将字符串值添加到列表框中，您可以执行以下操作：

```
List<string> list = new List<string>();
        list = (List<string>)Session["JobRole"];
        foreach (string item in list)
        {
            ListBox2.Items.Add(item);
        } 
```

您还应该检查 Session["JobRole"] 不为空。

# asp.net-mvc-3 - MVC3 - 传入字典的模型项的类型为 ERROR

> ID：10216691
> 
> 赞同：2
> 
> 时间：2012-04-18T19:36:33.317
> 
> 标签：asp.net-mvc-3, controller, viewmodel

**编辑解决方案：**

*答案可以在这里找到：*

[http://forums.asp.net/p/1794394/4941748.aspx/1?p=True&t=634704481730535356](http://forums.asp.net/p/1794394/4941748.aspx/1?p=True&t=634704481730535356)

*但也请参阅**里卡多**的以下内容。*

我有一个名为**LedgerUser**的控制器/视图。我有一个名为**LedgerViewModel**的 ViewModel ，它包含一个用于 UserType 实例的 LedgerUser 和 SelectList 实例，以及一个用于图像的名为 UniqueId 的属性。

现在，当我从创建视图中将表单发布回来时，我收到以下错误：

*传入字典的模型项的类型为“Accounts.Models.LedgerUser”，但该字典需要“Accounts.ViewModels.LedgerUserViewModel”类型的模型项。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。*

*异常详细信息：System.InvalidOperationException：传递到字典的模型项的类型为“Accounts.Models.LedgerUser”，但此字典需要“Accounts.ViewModels.LedgerUserViewModel”类型的模型项。*

现在我的理解是您将**模型**传递回操作方法而不是视图模型？我使用以下技术：

1.  ASP.NET MVC3
2.  Entity Framework 4*数据库优先*

我的代码是：

*分类帐用户视图模型*：

```
/// <summary>
/// ViewModel to represent the LedgerUser & its required fields.
/// </summary>
public class LedgerUserViewModel
{
    public SelectList UserTypes { get; set; }
    public string UserType { get; set; }
    public LedgerUser LedgerUser { get; set; }
    public string UniqueKey { get; set; }               //--Used for the Images.
    public bool Thumbnail { get; set; }

} 
```

我扩展了*LedgerUser*模型以使用数据注释进行装饰：

```
[MetadataType(typeof(LedgerUserMetaData))]
public partial class LedgerUser
{
    public class LedgerUserMetaData
    {

        [Required(ErrorMessage = "Date Of Birth Required")]
        [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = " {0:dd/MM/yyyy}")]
        [DataType(DataType.Date)]
        public object DateOfBirth { get; set; }
    }
} 
```

*我的LedgerUser*的 GET 操作方法：

 *```
 // GET: /LedgerUser/Create
    /// <summary>
    /// Action Method to create the LedgerUser. Usually this will be once a user has registered
    /// and will be directed from the AccountController.
    /// </summary>
    /// <param name="id">id</param>
    /// <returns></returns>
    public ActionResult Create(string id)
    {
        var uniqueKey = new Guid(id);
        var userTypes = new SelectList(db.UserTypes, "id", "Description");

        var ledgerUser = new LedgerUser()
        {
            id = uniqueKey,
            RecordStatus = " ",
            CreatedDate = DateTime.Now,
            DateOfBirth = DateTime.Today
        };

        var viewModel = new LedgerUserViewModel()
        {
            UserTypes = userTypes,
            LedgerUser = ledgerUser
        };

        return View(viewModel);
    } 
```

*我的LedgerUser*的 POST 操作方法：

```
[HttpPost]
public ActionResult Create(bool Thumbnail,LedgerUser ledgeruser, HttpPostedFileBase imageLoad2)
{
      ///---code to do stuff..
} 
```

我的*创建视图*：

```
@model Accounts.ViewModels.LedgerUserViewModel
@using Accounts.Models
    @using (Html.BeginForm("Create", "LedgerUser", new { Thumbnail = true}, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)
<fieldset>
    <legend>Ledger User</legend>

    <div class="editor-field">
        @Html.HiddenFor(model => model.LedgerUser.id)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LedgerUser.AccountNumber,"Account Number")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LedgerUser.AccountNumber)
        @Html.ValidationMessageFor(model => model.LedgerUser.AccountNumber)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LedgerUser.FirstName,"First Name")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LedgerUser.FirstName)
        @Html.ValidationMessageFor(model => model.LedgerUser.FirstName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LedgerUser.LastName,"Last Name")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LedgerUser.LastName)
        @Html.ValidationMessageFor(model => model.LedgerUser.LastName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LedgerUser.DateOfBirth,"D.O.B.")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LedgerUser.DateOfBirth)
        @Html.ValidationMessageFor(model => model.LedgerUser.DateOfBirth)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LedgerUser.UserType, "User Type")
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.LedgerUser.UserType,Model.UserTypes)
    </div>

    <div class="editor-label">
        @Html.Label("Avatar")
    </div>
    <div class="editor-field">
        @Html.UploadImageFor(model => model.UniqueKey,thumbnail:true)
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

现在我已经使用 Fiddler 询问了 POST，我发现该**名称**被正确设置为“LedgerUser”。

> 内容处置：表单数据；name="LedgerUser.id"
> 
> d1cd8e85-700d-4462-aa95-7428dbf58deb -----------------------------7dc963b2304b4 内容处置：表单数据；name="LedgerUser.AccountNumber"
> 
> 1 -----------------------------7dc963b2304b4 内容处置：表单数据；name="LedgerUser.FirstName"
> 
> Gareth -----------------7dc963b2304b4 内容处置：表单数据；name="LedgerUser.LastName"
> 
> 布拉德利 -----------------7dc963b2304b4 内容处置：表单数据；name="LedgerUser.DateOfBirth"
> 
> 2012 年 4 月 12 日 ----------------- 7dc963b2304b4 内容处置：表单数据；name="LedgerUser.UserType"
> 
> b8502da9-3baa-4727-9143-49e33edc910c -----------------------------7dc963b2304b4 内容处置：表单数据；名称=“图像加载2”；文件名="001.jpg" 内容类型：image/jpeg

我不知所措。多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T01:07:38.693

在 LedgerUser 的 post 操作方法中，您返回到具有不正确模型的同一视图，您的代码可能如下所示：

```
return View(); 
```

如果您在创建新记录后返回同一页面，则需要确保执行与 get 方法中相同的操作：

```
var ledgerUser = new LedgerUser()
    {
        id = uniqueKey,
        RecordStatus = " ",
        CreatedDate = DateTime.Now,
        DateOfBirth = DateTime.Today
    };

    var viewModel = new LedgerUserViewModel()
    {
        UserTypes = userTypes,
        LedgerUser = ledgerUser
    };

    return View(viewModel); 
```

如果您不想这样做，那么只需在 post 操作方法之后重定向到另一个视图，例如（假设您有一个 Index 操作）：

```
return View("Index") 
```

更好的是，如果您确实需要发布到同一个视图，那么只需使用 AJAX/jQuery 发布来调用您的创建操作而不是表单发布。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:58:52.400

如果您将错误类型的视图模型传递给您的视图页面，您收到的错误听起来就像您收到的错误。你的post方法看起来像这样吗？

```
[HttpPost]
public ActionResult Create(bool Thumbnail,LedgerUser ledgeruser, HttpPostedFileBase imageLoad2)
{
  ///---code to do stuff..
   return View(ledgeruser);
} 
```

如果是这样，您的问题是您正在使用错误的模型类型重新创建视图。也就是说，是的，您应该将**LedgerViewModel**作为您的发布参数。使用 MVC，通常您使用 get 传递到视图中的任何模型都将成为您在 Post 上的参数。

建议的帖子结构。使用 Post Redirect Get (PRG) 模式。

```
[HttpPost]
public ActionResult Create(LedgerViewModel model)
{
  ///---code to do stuff..
   return RedirectToAction("Create", new {id = model.LedgerUser.id.ToString()});
} 
```*

# android - 在首选项更改时重新启动应用程序

> ID：10216696
> 
> 赞同：1
> 
> 时间：2012-04-18T19:36:46.547
> 
> 标签：android

我需要从`PreferenceActivity`更改首选项重新启动应用程序。我试过：

```
@Override
public void onSharedPreferenceChanged(SharedPreferences pref, String key) {
    System.exit(2);
} 
```

但重启后设置不保存。保存了有关如何使用首选项重新启动应用程序的任何想法？
提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:46:01.227

而不是 System.exit(2); 我会尝试一个

```
 this.finish(); 
```

finish() 是停止活动的调用。

要开始一项活动，您需要一个意图对象

```
 Intent screenToBeShown = new Intent(myactivity.this, whateveractivityyouwant.class); 
 startActivity(screenToBeShown); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:44:23.433

如果它仍然对您有用：使用 AlarmManager 重新启动应用程序：

```
AlarmManager alm = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
    alm.set(AlarmManager.RTC, System.currentTimeMillis() + 1000, PendingIntent.getActivity(this, 0, new Intent(this, myActivity.class), 0));
    Process.killProcess(Process.myPid()); 
```

# azure - 抽象 Azure TableServiceEntity

> ID：10216698
> 
> 赞同：0
> 
> 时间：2012-04-18T19:36:55.453
> 
> 标签：azure, azure-storage, azure-table-storage

我想抽象我的 Azure TableServiceEntities 的实现，以便我有一个实体，它将采用任何类型的对象，使用该对象的属性作为 TableServiceEntity 中的属性。

所以我的基础对象就像

```
public class SomeObject
{
    [EntityAttribute(PartitionKey=true)]
    public string OneProperty {get; set:}
    [EntityAttribute(RowKey=true)]
    public string TwoProperty {get; set;}

    public string SomeOtherProperty {get;set;}
}

public class SomeEntity<T> : TableServiceEntity
{
    public SomeEntity(T obj)
    {           
        foreach (var propertyInfo in properties)
        {
            object[] attributes = propertyInfo.GetCustomAttributes(typeof (DataObjectAttributes), false);
            foreach (var attribute in attributes)
            {
                DataObjectAttributes doa = (DataObjectAttributes) attribute;
                if (doa.PartitionKey)
                    PartitionKey = propertyInfo.Name;
            }
        }
    }
} 
```

然后我可以像这样访问上下文中的实体

```
 var objects =
            (from entity in context.CreateQuery<SomeEntity>("SomeEntities") select entity);
        var entityList = objects.ToList();
        foreach (var obj in entityList)
        {
            var someObject = new SomeObject();
            SomeObject.OneProperty = obj.OneProperty;
            SomeObject.TwoProperty = obj.TwoProperty;
        } 
```

这似乎不应该那么困难，但我有一种感觉，我一直在寻找太多可能的解决方案，只是设法让自己感到困惑。

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:17:55.720

我写了一篇关于表存储上下文的博客文章，通过指定实体类型来描述实体。也许它可以帮助你[http://wblo.gs/a2G](http://wblo.gs/a2G)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:09:13.807

[看看 Lokad Cloud O/C 映射器](http://lokadcloud.codeplex.com/)，我认为源代码模仿了您正在尝试的内容，但它对 Azure 表存储的不同方法具有深刻的基本原理。

[http://lokadcloud.codeplex.com/](http://lokadcloud.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:59:38.213

看来您仍然想使用具体类型。因此， SomeEntity 有点多余。实际上，TableServiceEntity 已经是一个抽象类。您可以从 TableServiceEntity 派生 SomeObject。根据我的经验，这不会给您的方案带来任何问题。

此外，即使使用您的自定义 SomeEntity，也无法消除对最后一段代码中具体 SomeObject 类的依赖。

此致，

明旭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T21:45:15.633

我用 F# 编写了一个备用 Azure 表存储客户端 Lucifure Stash，它支持许多抽象，包括持久化字典对象。Lucifure Stash 还支持大于 64K 的大型数据列、数组和列表、枚举、开箱即用的序列化、用户定义的变形、公共和私有属性和字段等等。它可在[http://www.lucifure.com](http://www.lucifure.com) 或通过 NuGet.com 免费供个人使用。

您试图实现的目标是任何实体的单个泛型类，可以通过在字典类型上使用 [StashPool] 属性在 Lucifure Stash 中实现。

# c++ - 是否有一个 c++ 矩阵库，我可以像在 R 中那样索引具有非连续向量的矩阵？

> ID：10216704
> 
> 赞同：0
> 
> 时间：2012-04-18T19:37:16.960
> 
> 标签：c++, r, matrix

我相信 boost 对矩阵的连续或至少逐步一致的切片有限制。在 R 中，我可以有一个随机向量 c(5,2,8) 并使用它来索引矩阵 M[c(5,2,8),] 例如...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T00:44:48.347

[犰狳](http://arma.sf.net)从 3.0 版开始支持这一点，该版本甚至在两周前发布。

这是一个通过[RcppArmadillo](http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)工作的示例：

```
R> library(inline)
R> 
R> code <- '
+   arma::mat  M = Rcpp::as<arma::mat>(m);   // normal matrix
+   arma::uvec V = Rcpp::as<arma::uvec>(v);  // unsigned int vec
+   arma::mat  N = M.cols(V);                // index matrix by vec
+   return Rcpp::wrap(N);
+ '
R> 
R> fun <- cxxfunction(signature(m="numeric", v="integer"),
+                    code,
+                    plugin="RcppArmadillo")
R> M <- matrix(1:25,5,5)
R> V <- c(1L, 3L, 5L) - 1     # offset by one for zero indexing
R> fun(M, V)
     [,1] [,2] [,3]
[1,]    1   11   21
[2,]    2   12   22
[3,]    3   13   23
[4,]    4   14   24
[5,]    5   15   25
R> 
```

有一个匹配功能可以选择行而不是列。

# c - 如何在 Linux 中获取文件中某个位置的物理地址

> ID：10216705
> 
> 赞同：0
> 
> 时间：2012-04-18T19:37:17.657
> 
> 标签：c, linux, memory, virtual, street-address

我正在尝试获取与文件中特定字节关联的（物理）位置。我该怎么做呢？

我不能在 C 中执行此操作，因为我必须将文件读入缓冲区，如果我尝试在 RAM 中获取物理（非虚拟）地址，我将获得缓冲区的地址而不是特定字节中的文件。

帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:04:11.523

通过 将共享内存映射到您的进程中`mmap`，访问包含错误数据的页面，然后读取[`/proc/self/pagemap`](http://www.mjmwired.net/kernel/Documentation/vm/pagemap.txt)以查找有关虚拟内存页面如何映射到物理内存的信息。

```
 * /proc/pid/pagemap.  This file lets a userspace process find out which
   physical frame each virtual page is mapped to.  It contains one 64-bit
   value for each virtual page, containing the following data (from
   fs/proc/task_mmu.c, above pagemap_read):

    * Bits 0-54  page frame number (PFN) if present
    * Bits 0-4   swap type if swapped
    * Bits 5-54  swap offset if swapped
    * Bits 55-60 page shift (page size = 1<<page shift)
    * Bit  61    reserved for future use
    * Bit  62    page swapped
    * Bit  63    page present

   If the page is not present but in swap, then the PFN contains an
   encoding of the swap file number and the page's offset into the
   swap. Unmapped pages return a null PFN. This allows determining
   precisely which pages are mapped (or in swap) and comparing mapped
   pages between processes.

   Efficient users of this interface will use /proc/pid/maps to
   determine which areas of memory are actually mapped and llseek to
   skip over unmapped regions. 
```

注意：这似乎只在较新的内核上。此外，这里是[如何将 PFN 转换为物理地址](http://tldp.org/LDP/tlk/mm/memory.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:49:24.293

为此，您应该直接通过设备检查文件系统。这意味着您应该能够找到位图表、索引节点表、目录条目和类似的东西。对于现代和即将推出的文件系统（例如 Btrfs）来说，这一点都不是微不足道的。

除此之外，您应该处理块和扇区偏移或地址（可能是 LBA 或可能基于柱面）。

因此，在我看来，答案是**否定**的，或者至少，它的解决方案将非常复杂。

# delphi - 从组合框中更新 TEdit 文本

> ID：10216724
> 
> 赞同：1
> 
> 时间：2012-04-18T19:38:21.257
> 
> 标签：delphi, delphi-7, replace

我有一个由两个`TComboBox`和一个`TEdit`控件组成的表单，我希望能够`TEdit`使用组合框中的值更新控件中的单词，但不太确定如何使其工作。

例子：

组合框 #1 具有以下项目：`sue, bill, andy, chris`

组合框 #2 具有以下项目：`1, 2, 3`

`TEdit`控件开始看起来像这样：`andy has 3 cars`

现在，我想要做的是能够`andy`用组合框#1`3`中当前选定的项目和组合框#2 中当前选定项目的数字来更改单词，但我似乎无法理解如何完成这并认为我会向专家寻求一点建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:41:11.567

将相同的事件处理程序分配给两个组合框的`OnChange`事件：

```
procedure TForm1.ComboBox1Change(Sender: TObject);
begin
  Edit1.Text := ComboBox1.Text + ' has ' + ComboBox2.Text + ' car(s)';
end; 
```

如果 '... has ... car(s)' 不是固定字符串，则您没有明确定义的问题。产生明确定义的问题和解决方案的最简单方法是添加第二个`TEdit`控件。现在，让两个组合框和第一个编辑控件共享同一个`OnChange`事件：

```
procedure TForm1.ComboBox1Change(Sender: TObject);
begin
  Edit2.Text := Format(Edit1.Text, [ComboBox1.Text, ComboBox2.Text]);
end; 
```

例如，现在用户可以`%s has %s car(s).`在第一个编辑框中输入。

但是，如果您*知道*用户在编辑框中输入的字符串将只包含每个组合框中的一项，并且字符串的其他部分没有与组合框项重合，那么当然可以动态替换该项在编辑框中。然后让组合框共享此事件：

```
procedure TForm1.ComboBox1Change(Sender: TObject);
var
  i: Integer;
begin
  for i := 0 to ComboBox1.Items.Count - 1 do
    if Pos(ComboBox1.Items[i], Edit1.Text) > 0 then
    begin
      Edit1.Text := StringReplace(Edit1.Text, ComboBox1.Items[i],
        ComboBox1.Text, [rfReplaceAll]);
      break;
    end;
  for i := 0 to ComboBox2.Items.Count - 1 do
    if Pos(ComboBox2.Items[i], Edit1.Text) > 0 then
    begin
      Edit1.Text := StringReplace(Edit1.Text, ComboBox2.Items[i],
        ComboBox2.Text, [rfReplaceAll]);
      break;
    end;
end; 
```

要尝试此操作，请将组合框设置为`Sue`and `2`，然后写入`Sue and I have 3 cats. Sue is cute.`。现在尝试更改组合框！

*您可以通过仅用新的组合框文本替换旧*的组合框文本来使其更加健壮。为此，您需要将先前的值保存在组合框中。无论如何，即使在理论上，你也不能使它完全健壮。事实上，如果字符串是“5 天前支付电费的比尔心脏病发作时拨打了 911”。这条字符串很可能以“Sue 26 天前心脏病发作时打给 26 的情况而告终”。

更微妙的是，如果一个组合框项目是“汽车”而另一个是“火车”，那么“大屠杀”可能会转换为“火车”。

# php - MySQL/PHP 从多个表中选择和计数

> ID：10216729
> 
> 赞同：1
> 
> 时间：2012-04-18T19:38:36.357
> 
> 标签：php, mysql

我什至不确定这是否可能......我会告诉你我正在使用什么，然后我想做什么：

**状态：**

```
state_id 
```

**镇：**

```
town_id
state_id
misc_property 
```

**街道：**

```
street_id
town_id
state_id 
```

这些设置在层次结构中。

**我要选择的内容：**

我想选择所有具有 misc_property 的城镇，同时选择它所属的州并计算该城镇的所有街道。

这是我到目前为止所拥有的：

```
$sql="SELECT 
    a.state_id AS state_id, 
    b.town_id AS town_id, 
    COUNT(c.street_id) 

    FROM 
    state a, 
    town b, 
    street c 

    WHERE 
    b.misc_property='$property'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:42:26.377

使用此查询：

```
SELECT
    town.state_id AS state_id,
    town.town_id AS town_id,
    COUNT(street.street_id) AS count
FROM
    state INNER JOIN town ON state.state_id = town.state_id 
    LEFT JOIN street ON town.town_id = street.town_id
GROUP BY
    state_id,
    town_id
HAVING
    town.misc_property = 'stuff'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:42:22.947

您可以将 GROUP BY town_id 与 HAVING 一起用于特殊的 WHERE 条件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:44:56.667

使用连接：

```
SELECT * FROM state
LEFT JOIN town ON state.state_id = town.state_id
LEFT JOIN street ON street.town_id = town.town_id
WHERE town.misc_property = '$property' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:45:06.853

你可以这样做

```
$sql="SELECT 
    a.state_id AS state_id, 
    b.town_id AS town_id, 
    Select COUNT(c.street_id) From C Where C.town_id = b.town_id 

    FROM 
    state a, 
    town b, 
    street c 

    WHERE 
    b.misc_property='$property'and b.state_id = a.state_id " 
```

# xpages - 如何让标签云控件返回超过 30 个标签

> ID：10216735
> 
> 赞同：1
> 
> 时间：2012-04-18T19:38:53.073
> 
> 标签：xpages

我正在使用 2010 年 7 月发布的讨论模板中的一些标签云功能... ccTagCloud 和 ccTagCloudGroup 自定义控件。

我将 maxTagLimit 属性从 25 调整为 50，但我能够返回的最大标签数是 30，这可能是由于类别视图中的默认视图计数为 30。但是由于无法在属性中的任何位置应用可信赖的旧“&count=”参数，我还没有找到解决此限制的方法。有任何想法吗？

我在 Lotus Notes 和 Domino wiki 上注意到那里的 tagcloud 有 100。我不知道这是否是因为服务器默认设置为 100。

我不认为增加服务器范围内的默认视图计数将是一种选择，但如果所有其他人都关闭，它将推动那扇门。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:58:43.057

XPages 扩展库有一个 tagCloud 控件，您可以在其中设置 maxTagLimit。

因此，如果可以选择使用 Extension Library 或 Upgrade Pack 1，那么我建议您改用此控件。

# r - 如何使用普通、斜体和粗体构建轴标签

> ID：10216742
> 
> 赞同：15
> 
> 时间：2012-04-18T19:39:15.647
> 
> 标签：r, graph, plot

我想构建以下 x 轴标签

bla bla bl **bl** bla bla *blom* bla

 **（普通普通斜体普通斜体普通粗斜体）

是否可以？

非常感谢

编辑：是否也可以更改字体？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-18T19:45:55.253

```
 plot(1,1, xlab= expression(bla~bla~italic(bli~bli)~bla~bold(blom)~italic(bla))) 
```

阅读`?plotmath`页面以获取更多选项。**

# c++ - 什么是int，基本数据类型

> ID：10216744
> 
> 赞同：0
> 
> 时间：2012-04-18T19:39:18.307
> 
> 标签：c++, int, typedef

谁能告诉我什么是 C++ 中的 int 数据类型，钻探我能找到的标题

```
typedef int                 INT; 
```

文本代码中的类型与 RAM 中的物理存储之间的联系是什么/在哪里？编译器必须知道这个 int 是什么。我问 - 它在哪里向编译器解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:42:21.137

`typedef int INT`没有定义`int`。恰恰相反：它定义`INT`为 like `int`。`int`它本身是在编译器的内部定义的，而不是在源文件中。

typedef 根本不映射到内存。它只是描述存储类型、大小等的文本。它是映射到内存的那种类型的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:41:20.777

An`int`是一个整数。在最基本的层面上，它只是一组解释为数值的字节。现代处理器（和操作系统）支持多种大小的整数，但最常见的是 32 位和 64 位（分别为 4 和 8 字节）。

就硬件表示而言，它们只是设置为高电压和低电压的数据线。32 位并行数据总线将有 32 条数据线，每条数据线代表一位。如果要表示数字 100，请将其转换为二进制表示（即`1100100`），因此将第 3、6 和 7 行设置为高，其余设置为低。处理器和其他微控制器可以根据它们的内部功能和编程来解释这个信号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:43:47.477

`int`在 c++ 标准§3.9.1 基本类型中进行了描述。实际大小取决于实现。关于基本类型的大小，C++ 参考了 C99。请参阅`<climits>`标头，其中定义了 和 等值，`MIN_INT`以及标头`MAX_INT`中可用的功能`<limits>`，尤其是`std::numeric_limits`. 这提供了确定平台上不同类型范围的功能，请参阅[此处](http://en.cppreference.com/w/cpp/types/numeric_limits)了解更多详细信息。

您提到的 typedef 只是意味着您可以使用符号`INT`来表示`int`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T19:52:33.457

`int`因为是原始的 C/C++ 类型，所以你不能再深入了。

> 文本代码中的类型与 RAM 中的物理存储之间的联系是什么/在哪里？它不能结束，因为当你告诉他 int i= 时编译器应该做什么。他必须知道这个int是什么。

对于 Windows 情况（我没有使用其他操作系统的经验），编译器将您的代码构建成可执行文件，其中有两个主要部分：数据扇区和代码扇区。假设您声明`int i`，当您的代码被编译时，它将转换为内存位置（例如：0x0000004）。当操作系统加载您的可执行文件（在 Windows 中为 .exe 或 .dll）时，操作系统将为您的应用程序创建一个虚拟内存。（例如 0x100000000）。因此，您`int i`将位于物理内存中的 0x100000004 处，但位于应用程序虚拟内存中的 0x0000004 处。

上面的解释是事情如何工作的简化版本（实际事情可能更复杂）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T20:20:31.673

C++ 不是纯粹面向对象的，尽管在 C++ 术语中每个定义的变量都称为“对象”。有些类型不是类的实例，`int`而是其中之一。

An`int`只是一组至少 16 个连续位，它们被解释为有符号整数。实际大小以及某个位模式如何映射到整数主要取决于编译器和平台。

# linux - 邮件输出提示

> ID：10216747
> 
> 赞同：0
> 
> 时间：2012-04-18T19:39:35.937
> 
> 标签：linux, bash, email

我在 linux bash 中开发了一个脚本，该脚本在后台运行，并在找到相关内容时发送电子邮件。这是该脚本的邮件代码。

```
mail -s "Backup File place XYZ.... " "$EMAIL" 
```

该电子邮件没有正文，因为所有内容都包含在主题中。但问题是，每当它发送电子邮件时，我都会在控制台上输出说

```
" Null message body; hope that's ok".... 
```

现在我想要不想要这个文本。我怎么能阻止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:43:24.607

您总是可以将输出路由到位桶：

```
 mail -s "Backup File place XYZ.... " "$EMAIL" > /dev/null 2> /dev/null 
```

当然，这假设您不在乎是否真的在那里看到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:48:22.890

从 Bash 版本 4 开始

```
mail -s "$text" "$email" &> /dev/null 
```

应该将 stdout*和*stderr 重定向到 /dev/null

# c++ - 01 MKP 的蚁群优化

> ID：10216751
> 
> 赞同：2
> 
> 时间：2012-04-18T19:39:58.387
> 
> 标签：c++, multidimensional-array, knapsack-problem, ant-colony

我正在尝试为 01MKP 实施 ACO。我的输入值来自 OR-Library mknap1.txt。根据我的算法，首先我随机选择一个项目。然后我计算构造图上所有其他项目的概率。概率方程取决于信息素水平和启发式信息。

```
p[i]=(tau[i]*n[i]/Σ(tau[i]*n[i]). 
```

我的信息素矩阵的单元格在初始值 (0.2) 时具有恒定值。出于这个原因，当我试图找到下一个项目时，由于 0.2，pheremon 矩阵变得无效。所以，我的概率函数确定下一个要走的项目，检查启发式信息。如你所知，启发式信息方程是

```
n[i]=profit[i]/Ravg. 
```

（Ravg 是资源约束的平均值）。出于这个原因，我的概率。功能选择具有最大利润价值的项目。（假设在第一次迭代中，我的算法随机选择了一个具有 600 利润的项目。然后在第二次迭代中，选择 2400 利润值。但是，在 OR-Library 中，具有 2400 利润值的项目会导致资源违规。无论我做，第二个选择的是有2400利润的项目。

我的算法有什么问题吗？我希望对ACO有所了解的人应该帮助我。提前致谢。

输入值：

```
6 10 3800//no of items (n) / no of resources (m) // the optimal value
 100 600 1200 2400 500 2000//profits of items (6)
 8 12 13 64 22 41//resource constraints matrix (m*n)
 8 12 13 75 22 41
 3 6  4  18 6  4
 5 10 8  32 6  12
 5 13 8  42 6  20
 5 13 8  48 6  20
 0 0  0  0  8  0
 3 0  4  0  8  0
 3 2  4  0  8  4
 3 2  4  8  8  4
 80 96 20 36 44 48 10 18 22 24//resource capacities. 
```

我的算法：

```
for i=0 to max_ant
 for j=0; to item_number
 if j==0
 {
  item=rand()%n
  ant[i].value+=profit[item]
  ant[i].visited[j]=item
 }
 else
 {
  calculate probabilities for all the other items in P[0..n]
  find the biggest P value.
  item=biggest P's item.
  check if it is in visited list
  check if it causes resource constraint.
  if everthing is ok:
   ant[i].value+=profit[item]
   ant[i].visited[j]=item
  }//end of else
 }//next j
 update pheremon matrix => tau[a][b]=rou*tau[a][b]+deltaTou
}//next i 
```

# coldfusion - 如何使用 Coldbox 的 event.setValue 在 prc 上设置数据

> ID：10216755
> 
> 赞同：1
> 
> 时间：2012-04-18T19:40:21.600
> 
> 标签：coldfusion, coldbox

在 Coldbox 中，事件对象具有 setValue 函数。您将一个键和值传递给它，它将在 rc 上设置该键的值。有没有办法告诉 setValue 改为在 prc 上操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T21:42:05.213

```
event.setValue(name="myVar", private=true); 
```

或者

```
<cfset event.setValue(name="myVar", private=true) /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T22:51:10.263

我还建议您直接与传入的集合结构交谈。在 ColdFusion 中使用结构比方法调用快得多

# c# - 为 XNA 游戏添加类似输入框的控件

> ID：10216757
> 
> 赞同：14
> 
> 时间：2012-04-18T19:40:34.313
> 
> 标签：c#, xna

我希望我的游戏有正常的文本输入，但使用纯 XNA 似乎很不愉快。

早些时候我发现了这段代码，它可以让我`MessageBox`在我的游戏中使用所有东西，安全地暂停它的执行并显示一条消息：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
public static extern uint MessageBox(IntPtr hWnd, String text, String caption, uint type); 
```

是否有类似的东西可以`InputBox`为我的游戏添加功能，最好不中断（暂停）游戏？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-19T06:42:32.473

啊，文本输入-我最近有这方面的经验。

# 问题

通常，`Keyboard.GetKeyboardState()`获取文本输入很糟糕，这有很多原因，其中一些是：

*   你必须编写一个巨大的开关来检测按下了什么键
*   您必须手动检测是否大写字母（Shift 或 CapsLock）
*   您必须破译那些类似`OemPeriod`密钥（如在测试中）以查看它们的实际位置，并将它们映射到特定值。
*   无法检测/使用键盘布局或键盘语言
*   如果按键被按住，您必须实现自己的计时重复机制

问题的第二部分是检测您的哪个文本框（或一般的 UI 控件）当前正在接收此输入，因为您不希望所有框在您键入时都接收文本。

第三，您需要在指定的范围内绘制 TextBox，并且您可能还需要绘制插入符号（闪烁的垂直位置指示器）、当前选择（如果您想实现它）、表示框，以及突出显示（使用鼠标）或选定（具有焦点）状态的纹理。

第四，您必须手动实现复制粘贴功能。

* * *

### 速记

您可能不需要所有这些功能，因为我不需要它们。您只需要简单的输入，并检测诸如 enter 或 tab 之类的键，以及鼠标单击。也许也粘贴。

# 解决方案

问题是（至少当我们谈论 Windows，而不是 X-Box 或 WP7 时），操作系统已经拥有必要的机制来实现你从键盘上需要的一切：

*   根据当前的键盘布局和语言给出字符
*   自动处理重复输入（在按键被按住的情况下）
*   自动大写并提供特殊字符

我用于获取键盘输入的解决方案，我已经复制了[这个 Gamedev.net 论坛帖子](http://www.gamedev.net/topic/457783-xna-getting-text-from-keyboard/page__p__4040190#entry4040190)。它是下面的代码，您只需将其复制粘贴到一个 .cs 文件中，您将永远不必再次打开该文件。

它用于从您的键盘接收本地化输入，您需要做的就是在您的`Game.Initialize()`覆盖方法中初始化它（通过使用 Game.Window），并连接到事件以在您想要的任何地方接收输入。

您需要将`PresentationCore`(PresentationCore.dll) 添加到您的引用中才能使用此代码（`System.Windows.Input`命名空间需要）。这适用于 .NET 4.0 和 .NET 4.0 客户端配置文件。

## 事件输入

```
using System;
using System.Runtime.InteropServices;   
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Input;
using System.Text;
using System.Windows.Input;

namespace EventInput
{

    public class KeyboardLayout
    {
        const uint KLF_ACTIVATE = 1; //activate the layout
        const int KL_NAMELENGTH = 9; // length of the keyboard buffer
        const string LANG_EN_US = "00000409";
        const string LANG_HE_IL = "0001101A";

        [DllImport("user32.dll")]
        private static extern long LoadKeyboardLayout(
              string pwszKLID,  // input locale identifier
              uint Flags       // input locale identifier options
              );

        [DllImport("user32.dll")]
        private static extern long GetKeyboardLayoutName(
              System.Text.StringBuilder pwszKLID  //[out] string that receives the name of the locale identifier
              );

        public static string getName()
        {
            System.Text.StringBuilder name = new System.Text.StringBuilder(KL_NAMELENGTH);
            GetKeyboardLayoutName(name);
            return name.ToString();
        }
    }

    public class CharacterEventArgs : EventArgs
    {
        private readonly char character;
        private readonly int lParam;

        public CharacterEventArgs(char character, int lParam)
        {
            this.character = character;
            this.lParam = lParam;
        }

        public char Character
        {
            get { return character; }
        }

        public int Param
        {
            get { return lParam; }
        }

        public int RepeatCount
        {
            get { return lParam & 0xffff; }
        }

        public bool ExtendedKey
        {
            get { return (lParam & (1 << 24)) > 0; }
        }

        public bool AltPressed
        {
            get { return (lParam & (1 << 29)) > 0; }
        }

        public bool PreviousState
        {
            get { return (lParam & (1 << 30)) > 0; }
        }

        public bool TransitionState
        {
            get { return (lParam & (1 << 31)) > 0; }
        }
    }

    public class KeyEventArgs : EventArgs
    {
        private Keys keyCode;

        public KeyEventArgs(Keys keyCode)
        {
            this.keyCode = keyCode;
        }

        public Keys KeyCode
        {
            get { return keyCode; }
        }
    }

    public delegate void CharEnteredHandler(object sender, CharacterEventArgs e);
    public delegate void KeyEventHandler(object sender, KeyEventArgs e);

    public static class EventInput
    {
        /// <summary>
        /// Event raised when a character has been entered.
        /// </summary>
        public static event CharEnteredHandler CharEntered;

        /// <summary>
        /// Event raised when a key has been pressed down. May fire multiple times due to keyboard repeat.
        /// </summary>
        public static event KeyEventHandler KeyDown;

        /// <summary>
        /// Event raised when a key has been released.
        /// </summary>
        public static event KeyEventHandler KeyUp;

        delegate IntPtr WndProc(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam);

        static bool initialized;
        static IntPtr prevWndProc;
        static WndProc hookProcDelegate;
        static IntPtr hIMC;

        //various Win32 constants that we need
        const int GWL_WNDPROC = -4;
        const int WM_KEYDOWN = 0x100;
        const int WM_KEYUP = 0x101;
        const int WM_CHAR = 0x102;
        const int WM_IME_SETCONTEXT = 0x0281;
        const int WM_INPUTLANGCHANGE = 0x51;
        const int WM_GETDLGCODE = 0x87;
        const int WM_IME_COMPOSITION = 0x10f;
        const int DLGC_WANTALLKEYS = 4;

        //Win32 functions that we're using
        [DllImport("Imm32.dll", CharSet = CharSet.Unicode)]
        static extern IntPtr ImmGetContext(IntPtr hWnd);

        [DllImport("Imm32.dll", CharSet = CharSet.Unicode)]
        static extern IntPtr ImmAssociateContext(IntPtr hWnd, IntPtr hIMC);

        [DllImport("user32.dll", CharSet = CharSet.Unicode)]
        static extern IntPtr CallWindowProc(IntPtr lpPrevWndFunc, IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

        [DllImport("user32.dll", CharSet = CharSet.Unicode)]
        static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

        /// <summary>
        /// Initialize the TextInput with the given GameWindow.
        /// </summary>
        /// <param name="window">The XNA window to which text input should be linked.</param>
        public static void Initialize(GameWindow window)
        {
            if (initialized)
                throw new InvalidOperationException("TextInput.Initialize can only be called once!");

            hookProcDelegate = new WndProc(HookProc);
            prevWndProc = (IntPtr)SetWindowLong(window.Handle, GWL_WNDPROC,
                (int)Marshal.GetFunctionPointerForDelegate(hookProcDelegate));

            hIMC = ImmGetContext(window.Handle);
            initialized = true;
        }

        static IntPtr HookProc(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam)
        {
            IntPtr returnCode = CallWindowProc(prevWndProc, hWnd, msg, wParam, lParam);

            switch (msg)
            {
                case WM_GETDLGCODE:
                    returnCode = (IntPtr)(returnCode.ToInt32() | DLGC_WANTALLKEYS);
                    break;

                case WM_KEYDOWN:
                    if (KeyDown != null)
                        KeyDown(null, new KeyEventArgs((Keys)wParam));
                    break;

                case WM_KEYUP:
                    if (KeyUp != null)
                        KeyUp(null, new KeyEventArgs((Keys)wParam));
                    break;

                case WM_CHAR:
                    if (CharEntered != null)
                        CharEntered(null, new CharacterEventArgs((char)wParam, lParam.ToInt32()));
                    break;

                case WM_IME_SETCONTEXT:
                    if (wParam.ToInt32() == 1)
                        ImmAssociateContext(hWnd, hIMC);
                    break;

                case WM_INPUTLANGCHANGE:
                    ImmAssociateContext(hWnd, hIMC);
                    returnCode = (IntPtr)1;
                    break;
            }

            return returnCode;
        }
    }
} 
```

现在您已经可以按原样使用它（通过订阅`EventInput.CharEntered`事件），并使用逻辑来检测将输入发送到何处。

* * *

## KeyboardDispatcher, IKeyboardSubscriber

我所做的是创建一个类`KeyboardDispatcher`，它通过具有类型的属性来处理键盘输入的分派，`IKeyboardSubscriber`它将接收到的输入发送到该属性。想法是将此属性设置为要接收输入的 UI 控件。

定义如下：

```
public interface IKeyboardSubscriber
{
    void RecieveTextInput(char inputChar);
    void RecieveTextInput(string text);
    void RecieveCommandInput(char command);
    void RecieveSpecialInput(Keys key);

    bool Selected { get; set; } //or Focused
}

public class KeyboardDispatcher
{
    public KeyboardDispatcher(GameWindow window)
    {
        EventInput.EventInput.Initialize(window);
        EventInput.EventInput.CharEntered += new EventInput.CharEnteredHandler(EventInput_CharEntered);
        EventInput.EventInput.KeyDown += new EventInput.KeyEventHandler(EventInput_KeyDown);
    }

    void EventInput_KeyDown(object sender, EventInput.KeyEventArgs e)
    {
        if (_subscriber == null)
            return;

        _subscriber.RecieveSpecialInput(e.KeyCode);
    }

    void EventInput_CharEntered(object sender, EventInput.CharacterEventArgs e)
    {
        if (_subscriber == null)
            return;
        if (char.IsControl(e.Character))
        {
            //ctrl-v
            if (e.Character == 0x16)
            {
                //XNA runs in Multiple Thread Apartment state, which cannot recieve clipboard
                Thread thread = new Thread(PasteThread);
                thread.SetApartmentState(ApartmentState.STA);
                thread.Start();
                thread.Join();
                _subscriber.RecieveTextInput(_pasteResult);
            }
            else
            {
                _subscriber.RecieveCommandInput(e.Character);
            }
        }
        else
        {
            _subscriber.RecieveTextInput(e.Character);
        }
    }

    IKeyboardSubscriber _subscriber;
    public IKeyboardSubscriber Subscriber
    {
        get { return _subscriber; }
        set
        {
            if (_subscriber != null)
                _subscriber.Selected = false;
            _subscriber = value;
            if(value!=null)
                value.Selected = true;
        }
    }

    //Thread has to be in Single Thread Apartment state in order to receive clipboard
    string _pasteResult = "";
    [STAThread]
    void PasteThread()
    {
        if (Clipboard.ContainsText())
        {
            _pasteResult = Clipboard.GetText();
        }
        else
        {
            _pasteResult = "";
        }
    }
} 
```

用法相当简单，实例化`KeyboardDispatcher`，即在`Game.Initialize()`其中保留对它的引用（这样您就可以在选定的 [focused] 控件之间切换），并将使用该接口的类传递给它`IKeyboardSubscriber`，例如您的`TextBox`.

* * *

## 文本框

接下来是您的实际控制。现在我最初编写了一个相当复杂的盒子，它使用渲染目标将文本渲染到纹理，这样我就可以移动它（如果文本比盒子大），但是在经历了很多痛苦之后，我放弃了它并做了一个非常简单的版本。随意改进它！

```
public delegate void TextBoxEvent(TextBox sender);

public class TextBox : IKeyboardSubscriber
{
    Texture2D _textBoxTexture;
    Texture2D _caretTexture;

    SpriteFont _font;

    public int X { get; set; }
    public int Y { get; set; }
    public int Width { get; set; }
    public int Height { get; private set; }

    public bool Highlighted { get; set; }

    public bool PasswordBox { get; set; }

    public event TextBoxEvent Clicked;

    string _text = "";
    public String Text
    {
        get
        {
            return _text;
        }
        set
        {
            _text = value;
            if (_text == null)
                _text = "";

            if (_text != "")
            {
                //if you attempt to display a character that is not in your font
                //you will get an exception, so we filter the characters
                //remove the filtering if you're using a default character in your spritefont
                String filtered = "";
                foreach (char c in value)
                {
                    if (_font.Characters.Contains(c))
                        filtered += c;
                }

                _text = filtered;

                while (_font.MeasureString(_text).X > Width)
                {
                    //to ensure that text cannot be larger than the box
                    _text = _text.Substring(0, _text.Length - 1);
                }
            }
        }
    }

    public TextBox(Texture2D textBoxTexture, Texture2D caretTexture, SpriteFont font)
    {
        _textBoxTexture = textBoxTexture;
        _caretTexture = caretTexture;
        _font = font;           

        _previousMouse = Mouse.GetState();
    }

    MouseState _previousMouse;
    public void Update(GameTime gameTime)
    {
        MouseState mouse = Mouse.GetState();
        Point mousePoint = new Point(mouse.X, mouse.Y);

        Rectangle position = new Rectangle(X, Y, Width, Height);
        if (position.Contains(mousePoint))
        {
            Highlighted = true;
            if (_previousMouse.LeftButton == ButtonState.Released && mouse.LeftButton == ButtonState.Pressed)
            {
                if (Clicked != null)
                    Clicked(this);
            }
        }
        else
        {
            Highlighted = false;
        }
    }

    public void Draw(SpriteBatch spriteBatch, GameTime gameTime)
    {
        bool caretVisible = true;

        if ((gameTime.TotalGameTime.TotalMilliseconds % 1000) < 500)
            caretVisible = false;
        else
            caretVisible = true;

        String toDraw = Text;

        if (PasswordBox)
        {
            toDraw = "";
            for (int i = 0; i < Text.Length; i++)
                toDraw += (char) 0x2022; //bullet character (make sure you include it in the font!!!!)
        } 

        //my texture was split vertically in 2 parts, upper was unhighlighted, lower was highlighted version of the box
        spriteBatch.Draw(_textBoxTexture, new Rectangle(X, Y, Width, Height), new Rectangle(0, Highlighted ? (_textBoxTexture.Height / 2) : 0, _textBoxTexture.Width, _textBoxTexture.Height / 2), Color.White);

        Vector2 size = _font.MeasureString(toDraw);

        if (caretVisible && Selected)
            spriteBatch.Draw(_caretTexture, new Vector2(X + (int)size.X + 2, Y + 2), Color.White); //my caret texture was a simple vertical line, 4 pixels smaller than font size.Y

        //shadow first, then the actual text
        spriteBatch.DrawString(_font, toDraw, new Vector2(X, Y) + Vector2.One, Color.Black);
        spriteBatch.DrawString(_font, toDraw, new Vector2(X, Y), Color.White);
    }

    public void RecieveTextInput(char inputChar)
    {
        Text = Text + inputChar;
    }
    public void RecieveTextInput(string text)
    {
        Text = Text + text;
    }
    public void RecieveCommandInput(char command)
    {
        switch (command)
        {
            case '\b': //backspace
                if (Text.Length > 0)
                    Text = Text.Substring(0, Text.Length - 1);
                break;
            case '\r': //return
                if (OnEnterPressed != null)
                    OnEnterPressed(this);
                break;
            case '\t': //tab
                if (OnTabPressed != null)
                    OnTabPressed(this);
                break;
            default:
                break;
        }
    }
    public void RecieveSpecialInput(Keys key)
    {

    }

    public event TextBoxEvent OnEnterPressed;
    public event TextBoxEvent OnTabPressed;

    public bool Selected
    {
        get;
        set;
    }
} 
```

当您实例化 a`TextBox`时，不要忘记在实例上设置`X`、`Y`和`Width`(!!!) 值（`Height`由字体自动设置）。

我用于盒子的纹理是![文本框纹理](../Images/3acc451d85712a6c6a83a1583ce56fbf.png)（未突出显示有渐变，在黑色背景上看起来不错:)）

要显示框调用`.Draw()`实例上的方法（在您的`Game.Draw()`方法中），并且 spritebatch 已经启动（`SpriteBatch.Begin()`调用!!!）。对于您显示的每个框，如果您希望它接收鼠标输入，您应该调用`.Update()`方法。

当您希望特定实例接收键盘输入时，请使用您的`KeyboardDispatcher`实例订阅它，例如：

```
_keyboardDispatcher.Subscriber = _usernameTextBox; 
```

您可以使用文本框上的`Click`,`Tab`和`Enter`事件来切换订阅者（我建议您这样做，因为当您可以通过标签浏览它并单击以选择时，它会给 UI 带来非常好的感觉）。

* * *

# 尚未解决的问题

Ofc，我谈到了一些我没有实现的功能，例如如果文本比框宽，框能够平移文本，移动插入符号的能力（插入文本，而不仅仅是追加），选择和复制文本等。

这些问题你可以通过轻微到中等的努力来解决，我敢肯定，但在你这样做之前，问问自己：

## 我真的需要吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T02:24:56.163

写过几次这样的代码，我想说在 XNA 中编写一个基本的文本框并不难。您定义一个用背景颜色填充的矩形，一个代表用户输入内容的字符串，并在矩形内使用 Spritebatch.DrawString() 显示该字符串！使用 SpriteFont.MeasureString()，您可以根据需要对齐文本，将文本换行到下一行，等等。

然后您查看 Keyboard.GetState() 每次更新并检查已按下哪些键。这可能是最大的问题，因为如果用户输入速度很快，你会错过一些击键 - 游戏每秒只更新这么多次。这个问题在互联网上被广泛记录，并且有解决方案，例如[这里](https://web.archive.org/web/20130104134525/http://dream-forever.net:80/Blog/2011/08/29/getting-true-keyboard-input-into-your-xna-games/)。

另一种选择是使用预制的 XNA GUI 组件，例如使用[Nuclex](http://nuclexframework.codeplex.com/)框架获得的组件。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-18T20:44:29.963

好吧，最简单的方法如下（从我的角度来看;]）

```
using TextboxInputTest.Textbox.TextInput;
private TextboxInput _inputTextBox 
```

那么我建议启用鼠标（将其设置为可见）

```
IsMouseVisible = true; 
```

现在你需要初始化文本框本身

```
this._inputTextBox = new TextboxInput(this, "background_box", "Arial"); 
```

这代表游戏，就是这个（怀疑你需要改变它）

background_box 是你想用来显示的图片的名称（afaik，没有默认选项）

Arial 是你想使用的字体（别忘了你必须将它添加到游戏的内容中

设置盒子的位置

```
this._inputTextBox.Position = new Vector2(100,100); 
```

作为最后一步，您必须将框添加到组件数组

```
Components.Add(this._inputTextBox); 
```

您可能想要编辑许多功能，为此，我建议使用 IntelliSense

编辑：我的错，对不起，我经常使用它们，我完全忘记了这一点；] 提前说，你在下面看到的不是我的工作

[http://www.4shared.com/file/RVqzHWk0/TextboxInput.html](http://www.4shared.com/file/RVqzHWk0/TextboxInput.html)

希望它有所帮助。

问候，

雷莱斯

# html - Kindle Fire SilkBrowser 阅读查看 CSS

> ID：10216759
> 
> 赞同：15
> 
> 时间：2012-04-18T19:40:51.417
> 
> 标签：html, css, mobile-website, kindle-fire, amazon-silk

有谁知道如何正确实现 Kindle Fire Silk 浏览器阅读视图的 CSS 类？

[Kindle Fire 6.3 更新](http://www.amazon.com/gp/help/customer/display.html?nodeId=200790620)添加了“阅读视图”：

> 借助 Silk 上的阅读视图，您感兴趣的内容在阅读优化的单屏视图（即使对于多页文章）中被提升到凌乱之上。整个页面仍然在后台可用，让您可以轻松切换回传统视图以查看页面上的其他有趣功能。

我检查了我的一个站点，它呈现`<div style="display:none;">`为阅读视图文章，但我无法找到有关如何将 Silk 浏览器定向到应在阅读视图中显示的部分的详细信息。

代码示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en" xml:lang="en">

<head>
  <title>Title</title>
</head>

<body>

<div id='content'>
  //important article here
</div>

<div id='sidebar'>
   //less important menu here
</div>

<div style='display:none;'>
   //lightbox HTML here, not important on mobile devices
</div>

</body>

</html> 
```

如果我找到任何文件，我会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:59:54.807

我在 Kindle Fire Silk 浏览器上对此没有任何经验，**但**我知道 iPhone 具有基于语义 HTML 而不是 CSS 的阅读器功能。如果您使用语义布局，例如

```
<h1>header</h1>
<h2>some text</h2>
<p>a paragraph</p> 
```

然后阅读器功能将适当地显示这一点。同样重要的是要注意**CSS 样式被禁用，而视觉布局是旨在提高可读性的设备标准。**我不确定您是否可以直接影响此视图的样式，而无需在操作系统中对其进行硬编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:46:20.313

Try using media queries, it's possible that the kindle looks that the print version of a website, so if you create a media query for print as well as the standard screen then it may work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:17:46.227

一个快速而肮脏的解决方案是添加不应由读者通过**javascript**或**[jQuery显示（或说出）的元素](http://api.jquery.com/category/manipulation/dom-insertion-inside/)**

# .net - Webbrowser 控制通过 HttpWebRequest 下载文件

> ID：10216762
> 
> 赞同：0
> 
> 时间：2012-04-18T19:41:01.370
> 
> 标签：.net, http, browser

我的表单上有一个网络浏览器控件，通过它我登录到我网站的论坛，我假设网络浏览器将会话的 cookie 存储在某处，因为我可以以我的登录用户身份浏览该网站。这工作正常。

我希望能够在我的网络浏览器旁边创建一个界面，允许用户通过 HttpWebRequest 下载页面上的特定文件。但是，当然，当我创建请求并尝试下载文件（我从 webbrowser 中的 html 获得的 url）时，它会将我发送到登录页面，这就是下载的内容，因为授权不存在。

我想知道是否有人可以提出最简单的方法？我还尝试将浏览器中的 cookie 传递给 HttpWebRequest cookie 集合，但是 webbrowser 中的 cookie 很少，肯定不足以进行身份​​验证，因为这不起作用。

任何帮助将非常感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:04:59.950

我不认为您将能够做您想做的事情（无论如何都不能使用 WebBrowser 控件）。本质上，您需要“借用”WebBrowser 控件的“上下文”，据我所知，您不能这样做。

或者，您可以截取[`FileDownloaded`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.filedownload.aspx)事件并使用它来做您需要做的事情吗？

不幸的是，`WebBrowser`控件不是很灵活，我认为它基本上是 IE 的包装器，但它并不能真正让你做太多事情。

# javascript - dojo 1.7 dojox/form/Uploader 不显示文件选择器对话框

> ID：10216763
> 
> 赞同：2
> 
> 时间：2012-04-18T19:41:06.260
> 
> 标签：javascript, dojo

我的最终游戏是将上传者添加到对话框中。那行不通，所以我走了简单的路线，看看它是否可行。下面是我可以做到的尽可能简单，遗憾的是，单击按钮时文件选择器不显示。我在 Firefox 和 Chrome 中工作。如果有人愿意仔细检查并找到一个傻瓜，我将不胜感激。

```
require(["dojox/form/Uploader",
    "dojo/dom",
    "dojox/form/uploader/plugins/IFrame",
    "dojo/domReady!"
  ],
  function(Uploader, dom) {
    var u = new Uploader({
      name: "myPhoto",
      label: "Upload Your Photo",
      multiple: false,
      uploadOnSelect: true,
      url: "to/the/ethreal"
    });
    dom.byId("myDiv").appendChild(u.domNode);
  });
```

```
<html>

<head>
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dijit/themes/claro/claro.css" media="screen">
  <!-- load dojo and provide config via data attribute -->
  <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo.js" data-dojo-config="async: true"></script>
</head>

<body class="claro">
  <div id="myDiv"></div>
</body>

</html>
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T21:01:34.657

好吧，我认为它最终会变得很愚蠢，但是**需要启动小部件。**经过半天的时间，我希望道场示例不会遗漏这些关键方面。

操作函数如下所示：

```
require(["dojox/form/Uploader",
    "dojo/dom",
    "dojox/form/uploader/plugins/IFrame",
    "dojo/domReady!"
  ],
  function(Uploader, dom) {
    var u = new Uploader({
      name: "myPhoto",
      label: "Upload Your Photo",
      multiple: false,
      uploadOnSelect: true,
      url: "to/the/ethreal"
    }, "myDiv");
    u.startup();
  });
```

```
<head>
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dijit/themes/claro/claro.css" media="screen">
  <!-- load dojo and provide config via data attribute -->
  <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo.js" data-dojo-config="async: true"></script>
</head>

<body class="claro">
  <div id="myDiv"></div>
</body>
```

正如我确信已经多次声明的那样，获取信息的最佳地点是[Nightly Build](http://archive.dojotoolkit.org/nightly/ "每晚构建")的测试。[我在FileUpload](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/form/tests/test_FileInput.html)上找到了丢失的块。

# ruby-on-rails - Rails 方法 JSON 渲染

> ID：10216772
> 
> 赞同：0
> 
> 时间：2012-04-18T19:42:00.827
> 
> 标签：ruby-on-rails, json

我的 rails 应用程序中有一个 Listings_controller 和一个列表模型。数据库由列表组成，每个列表都有名称、纬度、经度等。

我的listing_controller 中有一个方法，在调用时应该将JSON 对象返回给调用者。

JSON 对象应该从相应的列表模型中获取其数据。但是，我希望 JSON 对象仅包含每个列表的名称、纬度、经度，而不包含模型的其他属性。我该如何限制这个？

现在，当该方法返回一个 JSON 对象时，它包含每个列表的所有属性。

这是当前的实现：

```
def list  
@listings = Listing.order(:name)  
render :text=>(@listings).to_json() 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:10:03.003

如何更换：

```
@listings = Listing.order(:name) 
```

和：

```
@listings = Listing.order(:name).select([:name, :latitude, :longitude]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:44:51.213

我建议看一下[rabl](https://github.com/nesquena/rabl) gem。它是一个模板系统，可以轻松灵活地生成 json（以及其他内容）。

还有一个免费的[railscast](http://railscasts.com/episodes/322-rabl)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:49:09.480

您可以查看[active_model_serializers](https://github.com/josevalim/active_model_serializers) gem。

如果你不想要所有这些，你可以手动创建一个哈希：

```
render :text => {name: @listing.name, lat:@listing.lat, long:@listing.long}.to_json 
```

# apache - 通过 Apache 将文件夹子域指向另一个 IP

> ID：10216775
> 
> 赞同：0
> 
> 时间：2012-04-18T19:42:19.403
> 
> 标签：apache, dns, ip, subdomain

你能帮助我吗？我有两台服务器，在 CentOS 中具有所有权限，分配了 IP，还有一个指向其中一个的子域，其中有一个静态网站。但是，另一台服务器在 Wordpress 上有一个博客。问题是如何从一个文件夹指向另一台服务器。因此：

subdomain.domain.com >> IP：1.2.3.4 subdomain.domain.com/blog >> 另一个：2.3.4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:16:23.070

您最好的选择是使用 mod_proxy 之类的东西将博客相关资源的代理请求反向到您的 WordPress 服务器。

所以像：

```
<VirtualHost *:80>
ServerName subdomain.domain.com
DocumentRoot /whatever
ProxyRequests Off

    <Proxy *>
    Order deny,allow
    Allow from all
    </Proxy>

ProxyPass /blog http://2.3.4.5/blog
ProxyPassReverse /blog http://2.3.4.5/blog

#...

</VirtualHost> 
```

还要提一点，在上面的示例中，我反向代理到由主机 IP 地址标识的资源。我强烈建议使用主机名和 DNS，因为 DNS 是个好东西：

```
ProxyPass /blog http://blog.domain.com/blog
ProxyPassReverse /blog http://blog.domain.com/blog 
```

显然，您需要将 2.3.4.5 添加到 DNS（或相应地进行主机破解）

# html - Span 忽略样式信息和 .html() 更新

> ID：10216779
> 
> 赞同：1
> 
> 时间：2012-04-18T19:42:27.213
> 
> 标签：html

在这种形式中，我有一条用户消息`<span>`。它忽略 HTML 和 CSS 样式表中给出的样式信息。此外，如果我更新 using .html() ，则不会显示新文本。

```
$('#matting').append('<div id="register_user_box" class="inline_form" style="position: absolute; top: 20px; right: 10px; <br/><span id="user_msg" style="width: 90%; height: 15px; color: red; font-family: Arial; font-size: 11px;">Info msg</span><br/><form id="register_user_id" name="register_user_form"> <button id="cancel" onclick="cancel_register(); return false;" style="width: 63px; float: right; margin-right:8px;">Cancel</button> <button id="register" onclick="register_user(); return false;" style="width: 63px; float: right;">Save</button> </form></div>'); 
```

在样式中为 user_msg 指定的信息将被忽略。如果我用它更新文本`$('#user_msg').html(message);`也会被忽略。这有什么可以解释的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:44:28.070

HTML 语法错误 - 您没有关闭您的`<div>`或其中的样式属性：

```
$('#matting').append('<div id="register_user_box" class="inline_form"'+
  ' style="position: absolute; top: 20px; right: 10px; ' + // missing ">! 
  '<br/><span id="user_msg" style="width: 90%; height: 15px;'+
  'color: red; font-family: Arial; font-size: 11px;">Info msg</span> '+
  '<br/><form id="register_user_id" name="register_user_form">'+
  '<button id="cancel" onclick="cancel_register(); return false;"'+
  ' style="width: 63px; float: right; margin-right:8px;">Cancel</button>'+
  ' <button id="register" onclick="register_user(); return false;"'+
  'style="width: 63px; float: right;">Save</button> </form></div>'); 
```

另请注意`<span>`'s 是内联元素（请参阅[scrappedcola 的答案](https://stackoverflow.com/a/10216850/1139697)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:47:07.000

`<span>`是内联元素。要给它高度和宽度，请使用 css`display:inline-block;`要添加文本消息，请尝试使用`$('#user_msg').text(message);`

# java - 如何模拟测试失败

> ID：10216780
> 
> 赞同：1
> 
> 时间：2012-04-18T19:42:30.240
> 
> 标签：java, mocking

我正在为 Web 服务 API 编写适配器。适配器与 Web 服务同步文件。我要测试的一件事是，如果在我的适配器同步时一个同步失败，下一个同步仍然可以拾取所有正确的文件。

我的问题是如何在与真实 Web 服务交互时模拟失败？例如，如果 Web 服务 API 包含：

```
class WebService {
    List<String> getFileNamesToSync() {
       ......
    }

    File getFile(String name) throws SomeException {
        <talks to the web service API>;
    }
} 
```

还有我的适配器类：

```
class MyAdapter {
    void MyFunction() {
        List<String> names = webService.getFileNamesToSync();
        for(String n : names) {
            File file = webService.getFile(n);
            .......
        }
    }
} 
```

如何模拟对 getFile 的第三次调用应该失败并出现异常？

我知道我可以通过 Mock 来实现这一点，但我仍然希望我对 getFile 的其余调用从 Web 服务返回真实数据？这是我可以使用 Mock 实现的吗？或者我必须编写自己的 Mock 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:53:00.847

如果您使用 Mockito，您可以创建一个`Answer`保留调用计数器的类，在大多数调用中调用真实类，但是当计数器达到您的幻数时，您会抛出异常。

# ios - UIGestureRecognizer 和 UITextView

> ID：10216782
> 
> 赞同：4
> 
> 时间：2012-04-18T19:42:36.893
> 
> 标签：ios, uitextview, uigesturerecognizer

我正在实现一个 UITextView，我只想响应文本视图指定部分中的触摸。

我有一个手势识别器附加到视图，并且工作正常，直到我将视图设置为第一响应者，如果视图中的点击点大于 X 和 Y 值，我会这样做。

```
- (IBAction)textViewTapped:(UIGestureRecognizer *)sender {
CGPoint point = [sender locationOfTouch:0 inView:self.view];

NSLog(@"x ix %f, y is %f", point.x, point.y);

if (point.x > 96 && point.y > 106)
    [self.myTextView becomeFirstResponder];
} 
```

问题是，一旦它被设置为第一响应者，然后通过在该文本视图之外点击而辞职，我的手势识别器方法将不再被调用。如果我在未设置第一响应者的区域中点击，那么我的方法会在我点击时被调用多次。如果我设置然后辞职第一响应者，它在第一次辞职后不会响应。

```
- (IBAction)viewTapped:(UIGestureRecognizer *)sender {
    [self.view endEditing:YES];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(textViewTapped:)];
    [self.myTextView addGestureRecognizer:tap];
    NSArray *gestures = [self.myTextViewgestureRecognizers];
    NSLog(@"得到 %d 个识别器", [手势计数]);  
}

```

在只是尝试的情况下，如果我在每次辞职后添加一个新的手势识别器，那么这是可行的，但显然不是一个好的解决方案。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:56:07.390

我有同样的问题，我通过实现 dummy 解决了它**`UIGestureRecognizerDelegate`**

将此添加到您的代码中

```
myGestuerRecognizer.delegate = self 
```

然后实现 UIGestureRecognizerDelegate

```
#pragma mark - UIGestureRecognizerDelegate

-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer{
    return YES;  }

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer
*)otherGestureRecognizer{
    return YES;  }

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
    return YES;  } 
```

这对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T08:33:09.470

iOS 10 斯威夫特 3.0

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldRecognizeSimultaneouslyWith otherGestureRecognizer: UIGestureRecognizer) -> Bool {    
  return true
} 
```

# postgresql - 什么是有效的 PostgreSQL 数据库名称？

> ID：10216784
> 
> 赞同：43
> 
> 时间：2012-04-18T19:42:44.983
> 
> 标签：postgresql

我创建了一个名称中间带有连字符的数据库，其中`createdb`. 这成功地创建了数据库，但是在`psql`交互式客户端中，如果我尝试这样的命令，则会出现语法错误：

`ALTER DATABASE my-database SET SCHEMA = myschema,public;`

`psql`在“-”处或附近抱怨语法错误

是否有一些关于什么是有效的 PostgreSQL 数据库名称的文档？

我应该只下划线而不是连字符吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-18T20:22:45.853

您询问的文档在这里：

[http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)

大多数人只是坚持使用小写字母、数字和下划线——以避免一直输入引号。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-18T19:45:49.010

尝试将其放在双引号中：

`ALTER DATABASE "my-database" SET SCHEMA = myschema,public;`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-02T12:42:36.293

我遇到了一个问题，以上答案对我有所帮助。所以在dbname上分享场景

场景：我尝试使用 PG admin III 更改数据库名称。我的数据库名称是 My_Database

运行以下查询失败：

```
ALTER DATABASE My_Database RENAME TO dba;
ALTER DATABASE [My_Database] RENAME TO dba;

ALTER DATABASE 'My_Database' RENAME TO dba; 
```

然后我在下面尝试并成功

```
ALTER DATABASE "My_Database" RENAME TO dba; 
```

# eclipse - 如何在 Zend Studio 8/9 或 Windows 7 上的 Eclipse 中使用 LF 作为行尾

> ID：10216785
> 
> 赞同：3
> 
> 时间：2012-04-18T19:42:48.180
> 
> 标签：eclipse, newline, zend-studio

我需要在 Zend Studio 8/9 或 Windows 的 Eclipse 中使用 unix Style 行尾（仅 LF），我应该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T14:41:06.143

要创建带有 Unix 行结尾的新文件，请设置 Window > Preferences > General > Workspace > New text file line delimiter > Unix。

要将现有的行尾转换为 Unix 样式，请执行 File > Convert Line Delimiters to > Unix。

**更新**：如果您在执行文件 > 将行分隔符转换为 > Unix 之前在项目视图中选择项目，则此转换也适用于整个项目。至少在我的测试中，二进制文件不受这种大规模转换的影响。

# mysql - 如何对表列中的重复值进行分组和分配组 ID？

> ID：10216788
> 
> 赞同：1
> 
> 时间：2012-04-18T19:42:58.733
> 
> 标签：mysql, sql, group-by, where

我的问题涉及使用 SQL 通过使用脚本为多组重复值分配组 ID。我已经手动做了一段时间，并意识到，随着数据库的扩展（几千个元素），这将需要很长时间。

这是我的数据库结构：

```
id  | db quesition         | db keywords           | answer id  | db answer                    |
------------------------------------------------------------------------------------------------
 0  | Why is Mars red?     | [why,mars,red]        | 0          | Mars is red because blah     |

 1  | How is Mars red?     | [how,mars,red]        | 0          | Mars is red because blah     |

 2  | What makes Mars red? | [what,makes,mars,red] | 0          | Mars is red because blah     |

 3  | Is Mars very rocky?  | [is,mars,rocky]       | 0          | Yes Mars is rocky blahbla    |

 4  | Does Mars have rocks?| [mars,have,rocks]     | 0          | Yes Mars is rocky blahbla    |

 5  | What is the Sun?     | [what,is,sun]         | 0          | The Sun is our solar blah    |

 6  | What is a star?      | [what,is,star]        | 0          | A star is a ball of hot blah | 
```

现在，如您所见，一个答案可以有多个问题，因此数据库中的`db_answer`列中将有重复项。我希望每个`db_answer`人都有一个单数`answer_id`，如果答案被多次使用，它会被重复。为了说明，我希望我的数据库看起来像：

```
id  | db quesition         |  db keywords          | answer id | db answer                    |
-----------------------------------------------------------------------------------------------
 0  | Why is Mars red?     | [why,mars,red]        | 1         | Mars is red because blah     |

 1  | How is Mars red?     | [how,mars,red]        | 1         | Mars is red because blah     |

 2  | What makes Mars red? | [what,makes,mars,red] | 1         | Mars is red because blah     |

 3  | Is Mars very rocky?  | [is,mars,rocky]       | 2         | Yes Mars is rocky blahbla    |

 4  | Does Mars have rocks?| [mars,have,rocks]     | 2         | Yes Mars is rocky blahbla    |

 5  | What is the Sun?     | [what,is,sun]         | 3         | The Sun is our solar blah    |

 6  | What is a star?      | [what,is,star]        | 4         | A star is a ball of hot blah | 
```

我已经广泛寻找执行此操作的脚本，但没有任何运气。就像说明我一直在尝试做的事情一样，我一直在为每个我想添加 id 的答案组使用 SQL：

```
UPDATE elements SET answer_id = '1' WHERE db_answer = 'Mars is red because blah' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:54:03.103

使用 PHP 脚本将非常容易：

```
$query = mysql_query("SELECT DISTINCT db_answer FROM elements");
$i = 1;
while ($row = mysql_fetch_row($query))
{
    mysql_query("UPDATE elements SET answer_id = {$i} WHERE db_answer = '{$row[0]}'");
    $i++;
} 
```

但是，我认为将答案存储在单独的表格中并将其保留`answer_id`在`elements`表格中可能是明智之举。这样您就可以避免不必要的重复信息。

* * *

**编辑 ：**

正如@mdoyle 建议的那样，我认为最好使用四个表：

```
CREATE TABLE questions (
    questionID INT NOT NULL AUTO_INCREMENT,
    question VARCHAR(128),
    answerID INT,
    PRIMARY KEY (questionID),
    FOREIGN KEY (answerID) REFERENCES answers (answerID)
);

CREATE TABLE answers (
    answerID INT NOT NULL AUTO_INCREMENT,
    answer VARCHAR(128),
    PRIMARY KEY (answerID)
);

CREATE TABLE keywords (
    keywordID INT NOT NULL AUTO_INCREMENT,
    keyword VARCHAR(16),
    PRIMARY KEY (keywordID)
);

CREATE TABLE question_keywords (
    questionID INT,
    keywordID INT,
    FOREIGN KEY (questionID) REFERENCES questions (questionID),
    FOREIGN KEY (keywordID) REFERENCES keywords (keywordID)
); 
```

`answers`表和`questions`表之间的关系是*一对多的*（**一个**答案可能适用于**许多**问题），所以你有两个表。这假设每个问题都可以有一个且只有一个答案。如果不是这种情况，并且一个问题可能有两个可接受的答案，那么关系就变成*了多对多*（继续阅读如何为多对多关系设置表）。

`questions`表和表之间的关系`keywords`是*多对多的*（**很多**问题可能使用**很多**关键字），所以你有三个表。一个保存问题（每个问题一行），一个保存关键字（每个关键字一行），第三个将两者联系在一起。该`question_keywords`表将有多行具有相同的 questionID 和多行具有相同的关键字 ID。所以如果 questionID 5 有 3 个关键字，那么`question_keywords`表中将有 3 个 questionID 为 5 的条目。

对于任何*一对一的*关系，通常只需在同一个表中创建一个附加列是安全的，因此您将拥有一个用于该关系的表。

**注意：**随意更改`VARCHAR`列的长度。根据您的示例，我选择了可​​能没问题的值，但如果问题和/或答案可能更长，那么您可能需要增加此大小。

* * *

创建这些表后，您可以通过执行以下操作来填充它们：

```
$query = $mysql_query("SELECT * FROM elements") or die(mysql_error());
echo "About to enter while-loop<br />";
$i = 1;
while ($row = mysql_fetch_assoc($query))
{
    echo "loop ". $i++ ."<br />";
    $answerID = -1;

    $querystr = "SELECT answerID FROM answers WHERE answer = '{$row["db_answer"]}'";
    echo "Getting answerID. query: {$querystr}<br />";
    $query = mysql_query($querystr) or die($mysql_error());
    if (!(list($answerID) = mysql_fetch_row($query)))
    {
        $querystr = "INSERT INTO answers (answer) VALUES ('{$row["db_answer"]}')";
        echo "Answer did not exist, inserting now. query: {$querystr}<br />";
        mysql_query($querystr) or die(mysql_error());
        $answerID = mysql_insert_id();
    }

    $querystr = "INSERT INTO questions (questionID, question, answerID) VALUES ('{$row["id"]}', '{$row["db_question"]}', '{$answerID}')";
    echo "Inserting question. query: {$querystr}<br />";
    mysql_query($querystr) or die(mysql_error());

    $keywords = explode(",", trim($row["db_keywords"], "[]"));
    echo "keywords = ". print_r($keywords, true) ."<br />";
    foreach ($keywords as $keyword)
    {
        $keywordID = -1;
        $querystr = "SELECT keywordID FROM keywords WHERE keyword = '{$keyword}'";
        echo "Getting keywordID. query: {$querystr}<br />";
        $query = mysql_query($querystr) or die(mysql_error());
        if (!(list($keywordID) = mysql_fetch_row($query)))
        {
            $querystr = "INSERT INTO keywords (keyword) VALUES ('{$keyword}')";
            echo "Keyword did not exist, inserting now. query: {$querystr}<br />";
            mysql_query($querystr) or die(mysql_error());
            $keywordID = mysql_insert_id();
        }

        $querystr = "INSERT INTO question_keywords (questionID, keywordID) VALUES ('{$row["id"]}', '{$keywordID}')";
        echo "Inserting question keyword. query: {$querystr}<br />";
        mysql_query($querystr) or die(mysql_error());
    }
} 
```

完成此操作并验证四个表已正确填充后，您就不再需要使用该`elements`表了。只需使用这四个表（`questions`、`answers`、`keywords`和`question_keywords`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:33:48.203

在 mysql 的范围内，您可以为答案分配一个 id，如下所示：

```
select answer, min(id) as answer_id
from table
group by answer 
```

因此，完整的解决方案是在表中创建一个 answerid 列，然后执行以下操作：

```
with aid as 
(
  select answer, min(id) as answer_id
  from table
  group by answer
)
update table
set answer_id = aid.answer_id
where table.answer = aid.answer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T20:00:33.257

您需要在查询中执行此操作的是 SQL Server 函数 ROW_NUMBER()。不幸的是，MySQL 没有这个。但是，您可以通过利用变量的内联赋值来模拟该函数。这是一篇解释所涉及逻辑的文章：[http ://www.explodybits.com/2011/11/mysql-row-number/](http://www.explodybits.com/2011/11/mysql-row-number/)

# uitableview - UITableView 在滚动或点击时崩溃 - ARC 有问题吗？

> ID：10216793
> 
> 赞同：4
> 
> 时间：2012-04-18T19:43:29.600
> 
> 标签：uitableview, automatic-ref-counting

我正在尝试在使用 ARC 的项目中创建一个简单的 UItableview 应用程序。表格渲染得很好，但如果我尝试滚动或点击一个单元格，应用程序就会崩溃。

看着 NSZombies（这是正确的说法吗？）我收到消息“-[PlacesViewController respondsToSelector:]: message sent to deallocated instance 0x7c29240”

我相信这与 ARC 有关，因为我过去已经成功实现了 UItableviews，但这是我使用 ARC 的第一个项目。我知道我一定错过了一些非常简单的东西。

PlacesTableViewController.h

```
@interface PlacesViewController : UIViewController
<UITableViewDelegate,UITableViewDataSource>

@property (nonatomic, strong) UITableView *myTableView;

@end 
```

PlacesTableViewController.m

```
#import "PlacesTableViewController.h"

@implementation PlacesViewController

@synthesize myTableView;
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.myTableView    =   [[UITableView alloc] initWithFrame:self.view.bounds   style:UITableViewStylePlain];

    self.myTableView.dataSource =   self;
    self.myTableView.delegate   =   self;

    [self.view addSubview:self.myTableView];
}
#pragma mark - UIViewTable DataSource methods

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 100;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{
    UITableViewCell *result = nil;

    static NSString *CellIdentifier = @"MyTableViewCellId";

    result =    [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(result == nil)
    {
        result = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    result.textLabel.text   =   [NSString stringWithFormat:@"Cell %ld",(long)indexPath.row];

    return result;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:37:36.960

您发布的代码没有任何明显错误。问题在于创建并保留 PlacesViewController 的代码。您可能正在创建它，但没有将其永久存储在任何地方。您的 PlacesViewController 需要保存到 ivar 或放入将为您管理它的视图容器（UINavigationController、UITabController 或类似）

# c# - 从哪里开始使用代码合同？

> ID：10216799
> 
> 赞同：5
> 
> 时间：2012-04-18T19:43:50.857
> 
> 标签：c#, .net, code-contracts

我看到了一个很棒的 C# 代码契约演示，我想开始将它们实现到可能的代码中。我希望我的代码中已经有了它们。从哪里开始？

我没能从演示中拿走任何印刷材料。有什么推荐的读物吗？

对 Code Contracts 的初学者有什么建议吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T19:48:52.803

我将从描述[按合同设计的](http://en.wikipedia.org/wiki/Design_by_contract)Wiki 开始。然后深入了解有关[MS 实施](http://msdn.microsoft.com/en-us/devlabs/dd491992)的文档。要将其实际应用到您的代码中，我想您几乎可以从任何地方开始，但也许从最不可能产生影响的区域开始。因此，如果合适的话，可能会在 ctor 参数中添加一些 Contract.Requires 。当您感觉更舒服时，您可以将它们添加到界面中，但请注意这可能会搞砸……但以一种好的方式。错误或警告意味着您违反了 DbC，并且可能违反了[Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T19:50:22.347

[Code Contracts](http://research.microsoft.com/en-us/projects/contracts/)项目页面上提供的[用户手册](http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf)很好地描述了如何使用和使用 Code Contracts 的可能性。

# algorithm - 数独算法，蛮力

> ID：10216800
> 
> 赞同：-2
> 
> 时间：2012-04-18T19:43:57.910
> 
> 标签：algorithm, sudoku, brute-force

我试图用蛮力算法解决数独板，我不能真正让这个算法正常工作。

为每一行、每列和每一个盒子创建一个对象，其中包含属于实际列、正方形和行的所有正方形（单元格），这在 legalValue() 中用于检查是否可以将值放入单元格中。

我找不到使算法起作用的结构。

```
 boolean setNumberMeAndTheRest(Board board) {

    if(getNext() == null) {
        for(int i = 1; i <= board.getDimension(); i++) {
            if(legalValue(i)) {
                setValue(i);
            }
        }
        board.saveSolution();
    } else {
        if(this instanceof DefinedSquare) {
            getNext().setNumberMeAndTheRest(board);

        } else {
            for(int i = 1; i <= board.getDimension(); i++) {
                if(legalValue(i)) {
                    setValue(i);

                    if(getNext().setNumberMeAndTheRest(board)) {
                        return true;
                    } else {
                        setValue(i);
                    }
                }
            }
            return false;
        }
    }

    return false;
} 
```

这是 legalValue(int i);

```
/**
 * Checks if value is legal in box, row and column.
 * @param value to check.
 * @return true if value is legal, else false.
 */
boolean legalValue(int value) {
    if(box.legalValue(value) && row.legalValue(value) && columne.legalValue(value)) {
        return true;
    }
    return false;
} 
```

* * *

```
**4x4 Sudoku board INPUT**

0 2 | 1 3
0 0 | 0 4
---------
0 0 | 0 1
0 4 | 3 2

**Expected OUTPUT**

4 2 | 1 3
3 1 | 2 4
---------
2 3 | 4 1
1 4 | 3 2

**Actually OUTPUT**

4 2 | 1 3
2 4 | 3 4
---------
3 0 | 0 1
0 4 | 3 2 
```

* * *

添加了板的重置

```
boolean setNumberMeAndTheRest(Board board) {

    Board original = board;

    if(getNext() == null) { 
        for(int i = 1; i <= board.getDimension(); i++) {
            if(legalValue(i)) {
                setValue(i);
            }
        }
        board.saveSolution();

    } else {
        if(this instanceof DefinedSquare) {
            getNext().setNumberMeAndTheRest(board);

        } else {
            for(int i = 1; i <= board.getDimension(); i++) {
                if(legalValue(i)) {
                    setValue(i);

                    if(getNext().setNumberMeAndTheRest(board)) {
                        return true;
                    } else {
                        setValue(i);
                    }
                }
            }
            board = original;
            return false;
        }
    }
    board = original;
    return false;
} 
```

很长一段时间后，她是一个解决方案：D

```
boolean setNumberMeAndTheRest(Board board) {

    if(next == null) {
        board.saveSolution();
        return true;
    }

    if(this instanceof DefinedSquare) {
        return next.setNumberMeAndTheRest(board);
    }

    for(int i = 1; i <= board.getDimension(); ++i) {
        if(legalValue(i)) {
            setValue(i);

            if(next.setNumberMeAndTheRest(board)) {
                return true;
            }
        }
    }
    setValue(0);
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:56:02.783

```
boolean setNumberMeAndTheRest(Board board) {

  // make a copy of the original board
  Board original = board; 
```

那么每次返回 false 时，还需要将板子重置为原始状态

```
board = original;
return false; 
```

# sql - PL/SQL 比较表

> ID：10216802
> 
> 赞同：0
> 
> 时间：2012-04-18T19:44:24.030
> 
> 标签：sql, oracle, plsql, oracle-sqldeveloper

我的任务是根据技能和可用性将我的数据库中的候选人与合适的职位空缺匹配，仅使用 sql 和 pl/sql。

我设法编写了以下代码，将可用的候选人与可用的空缺匹配。

```
 DECLARE
     CURSOR availableCandidates_cur IS
        SELECT * FROM candidate
        WHERE candidate.available = 'True';
     CURSOR availableJobs_cur IS
        SELECT *
        FROM position WHERE status = 'Open';
  BEGIN
      DBMS_OUTPUT.PUT_LINE('Available Candidates with matching vacencies');
      FOR availableCandidates_rec IN availableCandidates_cur
      LOOP
        DBMS_OUTPUT.PUT_LINE('Candidate: ' || availableCandidates_rec.firstName || ' ' ||  availableCandidates_rec.lastName);
        FOR availableJobs_rec IN availableJobs_cur
        LOOP
          IF (availableCandidates_rec.positionType = availableJobs_rec.positionType) THEN
            DBMS_OUTPUT.PUT_LINE(availableJobs_rec.positionName);
          END IF;
        END LOOP;
      END LOOP;
END; 
```

我正在努力弄清楚如何根据匹配技能将候选人与职位匹配。有问题的表是

候选人技能

```
candidateID | skillID
1           | 2
1           | 3
2           | 1
3           | 1
3           | 3 
```

岗位技能

```
positionID | skillID
1           | 1
1           | 3
2           | 1
3           | 2
3           | 3 
```

所以例如我想输出那个

```
Candidate 1  Matches
position 3
Candidate 2 Matches
position 2
Candidate 3  Matches
position 2
position 3 
```

我担心我最初可能走错了路，这导致了我的困惑。

如果有人能帮助我朝着正确的方向前进，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:39:15.237

已更正。候选人 3 匹配工作 1 和 2，候选人 2 匹配工作 2，候选人 1 匹配工作 3

```
select distinct c.cid, j.jid 
from candidate c, jobs j
where j.sid=c.sid
and not exists
(select 'x' from jobs j2 where j2.jid=j.jid
and j2.sid not in (select c2.sid from candidate c2
where c2.cid=c.cid)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:03:08.027

```
--All candidates that match every skill in a position
select distinct candidateID, positionID
from
(
    --Match candidates and positions, count number of skills that match
    select candidateID, positionID, skills_per_position
        ,count(*) over (partition by candidateID, positionID) matched_skills
    from candidateSkills
    inner join
    (
        --Number of skills per position
        select positionID, skillID
            ,count(*) over (partition by positionID) skills_per_position
        from positionSkills
        where status = 'Open'
    ) positionSkills_with_count
        on candidateSkills.skillID = positionSkills_with_count.skillID
    where available = 'True'
)
where matched_skills = skills_per_position
order by candidateID, positionID; 
```

使用这些脚本构建表：

```
create table candidateSkills as
select 1 candidateid, 2 skillID, 'True' available from dual union all
select 1 candidateid, 3 skillID, 'True' available from dual union all
select 2 candidateid, 1 skillID, 'True' available from dual union all
select 3 candidateid, 1 skillID, 'True' available from dual union all
select 3 candidateid, 3 skillID, 'True' available from dual;

create table positionSkills as
select 1 positionID, 1 skillID, 'Open' status from dual union all
select 1 positionID, 3 skillID, 'Open' status from dual union all
select 2 positionID, 1 skillID, 'Open' status from dual union all
select 3 positionID, 2 skillID, 'Open' status from dual union all
select 3 positionID, 3 skillID, 'Open' status from dual; 
```

但是，我的结果略有不同。候选人 3 匹配位置 1 和 2，而不是 2 和 3。我希望这只是您示例中的一个错字。

另外，我没有像你的那样格式化我的输出。让 SQL 以多行格式显示结果可能有点棘手。但是，如果您想在其他进程中使用它，不格式化 SQL 也会使其更有用。

# javascript - 有没有一种简单的方法可以在 JavaScript 中将文本转换为 HTML？

> ID：10216805
> 
> 赞同：8
> 
> 时间：2012-04-18T19:44:32.330
> 
> 标签：javascript, jquery, html

> **可能重复：使用 jQuery** [JavaScript/jQuery HTML 编码](https://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding)
> [转义 HTML 字符串](https://stackoverflow.com/questions/24816/escaping-html-strings-with-jquery)

例如，如果我想向用户显示`x < 3`HTML 中的字符串，我需要将`<`字符替换为`&lt;`. 在 JavaScript 或 jQuery 中是否有预建函数可以将任何文本字符串转换为相应的 HTML？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:48:08.060

如果你想使用jQuery，你可以使用`text(string)`方法。

```
$(".selector").text("x < 5"); 
```

[http://api.jquery.com/text/](http://api.jquery.com/text/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T19:46:25.540

或者，简单点，做这个

```
var str1 = "x < 3";
str1.replace(/</g, '&lt;'); 
```

这是另一个问题的[功能](https://stackoverflow.com/a/7124052/295264)

```
function htmlEscape(str) {
    return String(str)
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
} 
```

或者，使用 jQuery [Source的优秀作弊](https://stackoverflow.com/a/1219983/295264)

```
function htmlEncode(value){
  return $('<div/>').text(value).html();
}

function htmlDecode(value){
  return $('<div/>').html(value).text();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T19:49:23.753

使用 jQuery，您可能不必对文本进行 html 编码：

```
$("div.test").text("<b></b> for bold!"); 
```

将 div 的内部 html 设置为：

```
&lt;b&gt;&lt;/b&gt; for bold! 
```

然后，您可以使用以下方法检索此 html：

```
$("div.test").html(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T19:50:43.543

您可以使用 jQuery 的强大功能：

```
var str = "x < 3";
str = $('<div>').text(str).html(); 
```

会给你`"x &lt; 3"`结果。字符串`"Alpha & Omega"`将变为`"Alpha &amp; Omega"`等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T19:46:43.330

假设您已将字符串存储到变量中

```
k = " <!"#$\'"; 
```

然后当您需要“打印”值时使用

```
escape (k ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T19:48:12.840

有一个 php 函数名称 htmlentities，我为 JS 找到了这个：

```
function HTMLentities(texte) {

texte = texte.replace(/"/g,'&quot;'); // 34 22
texte = texte.replace(/&/g,'&amp;'); // 38 26
texte = texte.replace(/\'/g,'&#39;'); // 39 27
texte = texte.replace(/</g,'&lt;'); // 60 3C
texte = texte.replace(/>/g,'&gt;'); // 62 3E
texte = texte.replace(/\^/g,'&circ;'); // 94 5E
texte = texte.replace(/‘/g,'&lsquo;'); // 145 91
texte = texte.replace(/’/g,'&rsquo;'); // 146 92
texte = texte.replace(/“/g,'&ldquo;'); // 147 93
texte = texte.replace(/”/g,'&rdquo;'); // 148 94
texte = texte.replace(/•/g,'&bull;'); // 149 95
texte = texte.replace(/–/g,'&ndash;'); // 150 96
texte = texte.replace(/—/g,'&mdash;'); // 151 97
texte = texte.replace(/˜/g,'&tilde;'); // 152 98
texte = texte.replace(/™/g,'&trade;'); // 153 99
texte = texte.replace(/š/g,'&scaron;'); // 154 9A
texte = texte.replace(/›/g,'&rsaquo;'); // 155 9B
texte = texte.replace(/œ/g,'&oelig;'); // 156 9C
texte = texte.replace(//g,'&#357;'); // 157 9D
texte = texte.replace(/ž/g,'&#382;'); // 158 9E
texte = texte.replace(/Ÿ/g,'&Yuml;'); // 159 9F
// texte = texte.replace(/ /g,'&nbsp;'); // 160 A0
texte = texte.replace(/¡/g,'&iexcl;'); // 161 A1
texte = texte.replace(/¢/g,'&cent;'); // 162 A2
texte = texte.replace(/£/g,'&pound;'); // 163 A3
//texte = texte.replace(/ /g,'&curren;'); // 164 A4
texte = texte.replace(/¥/g,'&yen;'); // 165 A5
texte = texte.replace(/¦/g,'&brvbar;'); // 166 A6
texte = texte.replace(/§/g,'&sect;'); // 167 A7
texte = texte.replace(/¨/g,'&uml;'); // 168 A8
texte = texte.replace(/©/g,'&copy;'); // 169 A9
texte = texte.replace(/ª/g,'&ordf;'); // 170 AA
texte = texte.replace(/«/g,'&laquo;'); // 171 AB
texte = texte.replace(/¬/g,'&not;'); // 172 AC
texte = texte.replace(/­/g,'&shy;'); // 173 AD
texte = texte.replace(/®/g,'&reg;'); // 174 AE
texte = texte.replace(/¯/g,'&macr;'); // 175 AF
texte = texte.replace(/°/g,'&deg;'); // 176 B0
texte = texte.replace(/±/g,'&plusmn;'); // 177 B1
texte = texte.replace(/²/g,'&sup2;'); // 178 B2
texte = texte.replace(/³/g,'&sup3;'); // 179 B3
texte = texte.replace(/´/g,'&acute;'); // 180 B4
texte = texte.replace(/µ/g,'&micro;'); // 181 B5
texte = texte.replace(/¶/g,'&para'); // 182 B6
texte = texte.replace(/·/g,'&middot;'); // 183 B7
texte = texte.replace(/¸/g,'&cedil;'); // 184 B8
texte = texte.replace(/¹/g,'&sup1;'); // 185 B9
texte = texte.replace(/º/g,'&ordm;'); // 186 BA
texte = texte.replace(/»/g,'&raquo;'); // 187 BB
texte = texte.replace(/¼/g,'&frac14;'); // 188 BC
texte = texte.replace(/½/g,'&frac12;'); // 189 BD
texte = texte.replace(/¾/g,'&frac34;'); // 190 BE
texte = texte.replace(/¿/g,'&iquest;'); // 191 BF
texte = texte.replace(/À/g,'&Agrave;'); // 192 C0
texte = texte.replace(/Á/g,'&Aacute;'); // 193 C1
texte = texte.replace(/Â/g,'&Acirc;'); // 194 C2
texte = texte.replace(/Ã/g,'&Atilde;'); // 195 C3
texte = texte.replace(/Ä/g,'&Auml;'); // 196 C4
texte = texte.replace(/Å/g,'&Aring;'); // 197 C5
texte = texte.replace(/Æ/g,'&AElig;'); // 198 C6
texte = texte.replace(/Ç/g,'&Ccedil;'); // 199 C7
texte = texte.replace(/È/g,'&Egrave;'); // 200 C8
texte = texte.replace(/É/g,'&Eacute;'); // 201 C9
texte = texte.replace(/Ê/g,'&Ecirc;'); // 202 CA
texte = texte.replace(/Ë/g,'&Euml;'); // 203 CB
texte = texte.replace(/Ì/g,'&Igrave;'); // 204 CC
texte = texte.replace(/Í/g,'&Iacute;'); // 205 CD
texte = texte.replace(/Î/g,'&Icirc;'); // 206 CE
texte = texte.replace(/Ï/g,'&Iuml;'); // 207 CF
texte = texte.replace(/Ð/g,'&ETH;'); // 208 D0
texte = texte.replace(/Ñ/g,'&Ntilde;'); // 209 D1
texte = texte.replace(/Ò/g,'&Ograve;'); // 210 D2
texte = texte.replace(/Ó/g,'&Oacute;'); // 211 D3
texte = texte.replace(/Ô/g,'&Ocirc;'); // 212 D4
texte = texte.replace(/Õ/g,'&Otilde;'); // 213 D5
texte = texte.replace(/Ö/g,'&Ouml;'); // 214 D6
texte = texte.replace(/×/g,'&times;'); // 215 D7
texte = texte.replace(/Ø/g,'&Oslash;'); // 216 D8
texte = texte.replace(/Ù/g,'&Ugrave;'); // 217 D9
texte = texte.replace(/Ú/g,'&Uacute;'); // 218 DA
texte = texte.replace(/Û/g,'&Ucirc;'); // 219 DB
texte = texte.replace(/Ü/g,'&Uuml;'); // 220 DC
texte = texte.replace(/Ý/g,'&Yacute;'); // 221 DD
texte = texte.replace(/Þ/g,'&THORN;'); // 222 DE
texte = texte.replace(/ß/g,'&szlig;'); // 223 DF
texte = texte.replace(/à/g,'&aacute;'); // 224 E0
texte = texte.replace(/á/g,'&aacute;'); // 225 E1
texte = texte.replace(/â/g,'&acirc;'); // 226 E2
texte = texte.replace(/ã/g,'&atilde;'); // 227 E3
texte = texte.replace(/ä/g,'&auml;'); // 228 E4
texte = texte.replace(/å/g,'&aring;'); // 229 E5
texte = texte.replace(/æ/g,'&aelig;'); // 230 E6
texte = texte.replace(/ç/g,'&ccedil;'); // 231 E7
texte = texte.replace(/è/g,'&egrave;'); // 232 E8
texte = texte.replace(/é/g,'&eacute;'); // 233 E9
texte = texte.replace(/ê/g,'&ecirc;'); // 234 EA
texte = texte.replace(/ë/g,'&euml;'); // 235 EB
texte = texte.replace(/ì/g,'&igrave;'); // 236 EC
texte = texte.replace(/í/g,'&iacute;'); // 237 ED
texte = texte.replace(/î/g,'&icirc;'); // 238 EE
texte = texte.replace(/ï/g,'&iuml;'); // 239 EF
texte = texte.replace(/ð/g,'&eth;'); // 240 F0
texte = texte.replace(/ñ/g,'&ntilde;'); // 241 F1
texte = texte.replace(/ò/g,'&ograve;'); // 242 F2
texte = texte.replace(/ó/g,'&oacute;'); // 243 F3
texte = texte.replace(/ô/g,'&ocirc;'); // 244 F4
texte = texte.replace(/õ/g,'&otilde;'); // 245 F5
texte = texte.replace(/ö/g,'&ouml;'); // 246 F6
texte = texte.replace(/÷/g,'&divide;'); // 247 F7
texte = texte.replace(/ø/g,'&oslash;'); // 248 F8
texte = texte.replace(/ù/g,'&ugrave;'); // 249 F9
texte = texte.replace(/ú/g,'&uacute;'); // 250 FA
texte = texte.replace(/û/g,'&ucirc;'); // 251 FB
texte = texte.replace(/ü/g,'&uuml;'); // 252 FC
texte = texte.replace(/ý/g,'&yacute;'); // 253 FD
texte = texte.replace(/þ/g,'&thorn;'); // 254 FE
texte = texte.replace(/ÿ/g,'&yuml;'); // 255 FF
return texte;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T19:48:13.420

这将替换 javascript 中的字符：

```
function replaceStr(str) {
  return str
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-18T19:49:23.033

您可以使用 php.js 库的一部分，它实现了从 php 到 js 的已知功能。还有著名的`htmlspecialchars`：[http](http://phpjs.org/functions/htmlspecialchars:426) ://phpjs.org/functions/htmlspecialchars:426 显然，从函数中删除不必要的部分:)

另请看：[Javascript 中的 HtmlSpecialChars 等效项？](https://stackoverflow.com/questions/1787322/htmlspecialchars-equivalent-in-javascript)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-18T19:50:00.300

如果您使用的是 jQuery，则可以按照此答案的建议进行操作：

[从输入字段读取属性时 HTML 编码丢失](https://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding)

# jqgrid - 在不同事件中使用 remapColumns 时，单击标题时不显示排序图标

> ID：10216811
> 
> 赞同：0
> 
> 时间：2012-04-18T19:44:56.063
> 
> 标签：jqgrid

我将列排列信息保存到表中。此信息可以在 beforeRequest 事件中重新加载：

```
mynewperm = {....};

myGrid.jqGrid("remapColumns", mynewperm, true); 
```

列已正确重新排序。但是我丢失了标题图标。现在，如果我单击任何列标题，我再也看不到排序图标，然后无法对任何列进行排序。我怎样才能找回它？

谢谢，

是的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:13:23.373

如果您能够更改代码，则可以测试未定义的 a.grid.headers [aplastsort]。

在源文件中，它可能如下所示：

```
// old 
var previousSelectedTh = ts.grid.headers[ts.p.lastsort].el

// new:
var previousSelectedTh = ts.grid.headers[ts.p.lastsort] ? ts.grid.headers[ts.p.lastsort].el : null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:30:45.230

实际上，如果您查看`jquery.jqGrid.src.js`源代码，则该行是：

```
var previousSelectedTh = ts.grid.headers[ts.p.lastsort].el, newSelectedTh = ts.grid.headers[idxcol].el; 
```

我的版本中的第 1982 行。我通过修改文件来修复它，并在该行之前添加了这个：

```
 if (ts.p.lastsort < 0)  // johnl.
            ts.p.lastsort = 0; 
```

问题是那`ts.p.lastsort`是-1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T09:06:03.840

我自己设法解决了这个问题，但没有使用上述方法。尝试对 jqgrid 中的列进行排序时收到以下错误消息：

```
TypeError: a.grid.headers[a.p.lastsort] is undefined js/jqgrid/jquery.jqGrid.min.js?1.4:86 
```

我应该注意到是 Firebug 产生了这个错误信息。我们公司为 Chrome 开发 Web 应用程序，但 Chrome 的 Javascript 控制台产生了一个非常无信息的错误消息：

```
Uncaught TypeError: Cannot read property 'el' of undefined 
```

在删除导致问题的页面上除 jqGrid 声明之外的所有声明后，发现删除 jqGrid 的“multiSelect”选项声明解决了该问题。显然，声明此选项会导致将额外的隐藏列添加到呈现的网格中，使用户能够一次选择多个网格行。我不确定*为什么*这会导致问题，但在咨询了这里的编程主管之后，我们最好的猜测是 jqGrid 库代码中的某处有一个 for 循环，当应用列排序并且循环没有考虑时调用考虑这个额外的列，导致它没有被定义。

对一个奇怪问题的奇怪答案，但希望这能帮助将来的人，并为他们节省大约 3 小时的调试时间！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:38:40.347

我有同样的问题：

它附加到我身上，因为我在“loadComplete”事件中应用了“remapColumns”方法（我从 cookie 中取回用户列配置）。

因此，当我尝试对列进行排序时，什么也没有发生。我在萤火虫中遇到了这个错误：

a.grid.headers[aplastsort] 未定义 -> jquery.jqGrid.min.js（第 93 行）

也许找出问题所在会有所帮助

谢谢

# regex - perl 正则表达式提取

> ID：10216814
> 
> 赞同：1
> 
> 时间：2012-04-18T19:45:01.530
> 
> 标签：regex, perl

如何使用正则表达式提取此字符串

```
||03/15/2012||10:17:11|FOR TEST 
```

我想提取 "03/15/2012" 。我试过这个命令

```
my $firstLine =~ m/^\|\|\d{2}\/\d{2}\/\d{4}\|\|/i ;
trace("first line extraction : $firstLine first $1"); 
```

它不起作用。能否请你帮忙 ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:46:41.767

您需要在`()`要提取的部分周围使用捕获组：

```
my $line = '||03/15/2012||10:17:11|FOR TEST';
if ($line =~ m/^\|\|(\d{2}\/\d{2}\/\d{4})\|\|/i) {
  # Capturing group ┴───────────────────┘
  print("Group 1: $1\n"); # 03/15/2012
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:36:20.953

您可以像这样直接分配捕获组的值：

```
my $in = "||03/15/2012||10:17:11|FOR TEST";
(my $Date) = $in =~ /^\|\|(\d{2}\/\d{2}\/\d{4})\|\|/; 
```

您将在`$Date`.

顺便提一句。你不需要修饰符`i`，因为这使得匹配的字母不区分大小写，因为你的正则表达式中没有字母，这个选项是没用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:50:14.330

尝试：`my $firstLine =~m/^\|\|(.+)\|\|.*$/i`

您只真正关心前两组双管之间的内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:53:43.637

***脚本***：

```
my $firstLine = '||03/15/2012||10:17:11|FOR TEST';
print $1 if $firstLine =~ /(\d{2}\/\d{2}\/\d{4})/; 
```

***输出：***

```
03/15/2012 
```

在此处测试此代码：http: [//ideone.com/99iUg](http://ideone.com/99iUg)

# jquery - 将 Jquery 应用于未知数量的编号 ID

> ID：10216823
> 
> 赞同：1
> 
> 时间：2012-04-18T19:45:26.923
> 
> 标签：jquery, drupal-7

我对 JQuery 几乎一无所知，并且在 Stackoverflow 上找到了我的大部分解决方案，所以我希望我的（可能是菜鸟以及第一个“so.com”）问题能得到答案。我正在尝试将 jquery 脚本应用于未知数量的编号 ID。我可以引用从 id-1 到 id-1000 的每个 ID，并希望我永远不需要更多，或者我可以以某种方式引用 id-n，在这种情况下，它将适用于任何末尾带有数字的 ID。

这是我的代码：

```
drupal_add_js('jQuery(document).ready(function (){jQuery("#pika-[any integer]").PikaCho... 
```

这应该会影响：

```
<ul id="pika-1"> or <ul id="pika-329"> or <ul id="pika-[any integer]"> 
```

我将如何完成这项工作？

（为了清楚起见，这是在 Drupal template.php 文件中影响 pikachoose 画廊显示。我认为这不会有什么不同。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:48:10.127

`$('ul[id^="pika-"]')`将选择所有具有以“pika-”开头的 id 的 ul

[http://api.jquery.com/category/selectors/attribute-selectors/](http://api.jquery.com/category/selectors/attribute-selectors/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:55:10.490

还想指出这是 JS 不需要 jQuery 开销的一行。

```
document.querySelectorAll("ul[id^=pika-]");​ 
```

以及处理一些边缘情况的解决方案。

**[现场演示](http://jsfiddle.net/loktar/cqrkK/)**

```
var elements = [];

[].forEach.call(
    document.querySelectorAll("ul[id^=pika-]"),
    function(el){
        var check = /[0-9]$/;
        if(el.id.match(check)){
           elements.push(el); 
        }
     }
); 
```

还编辑了 Jay Blanchard 的 js perf，并添加了带有`ul`标识符的 qsa，qsa 优于 jQuery（惊喜）

[http://jsperf.com/jquery-id-startswith/2](http://jsperf.com/jquery-id-startswith/2) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:48:22.797

```
jQuery('ul').filter('[id^=”pika-”]') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:53:53.387

只需使用这个：

```
jQuery("[id^=pika]").pikaCho 
```

所以每个 id 以“pika”开头的元素都会受到影响。

# python - Django 静态文件不会加载

> ID：10216827
> 
> 赞同：14
> 
> 时间：2012-04-18T19:45:39.937
> 
> 标签：python, django, static, django-static

我是一个 Django 新手，正在处理我的第一个项目并且遇到了静态文件问题。

我创建了一个简单的身份验证系统，使用`django.contrib.auth`由两个模板组成：`mysite/templates/index.html`和`mysite/templates/registration/login.html`. 我有全局静态内容`mysite/static`，我希望能够访问所有应用程序呈现的所有模板。

`mysite/templates/index.html`包含在我访问 url 时`<img src="{{ STATIC_URL }}pics03.jpg"/>`呈现为和加载良好的内容`"static/pics03.jpg"``localhost:8000/`

`mysite/templates/registration/login.html`contains当我访问 url 时`<img src="{{ STATIC_URL }}pics03.jpg"/>`，它也呈现为`"static/pics03.jpg"`并且不加载`"localhost:8000/accounts/login/"`

在我的 urls.py 中，我有：

```
urlpatterns = patterns('',
   url(r'^$', 'mysite.views.home'), # plays index.html template
   url(r'^accounts/login/$', 'django.contrib.auth.views.login'), 
```

在我的 settings.py 中，我有：

```
PROJECT_DIR = os.path.dirname(__file__)

STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(PROJECT_DIR,'static'),
)  

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

STATIC_URL = '/static/'

STATIC_ROOT = '' 
```

我的印象是 Django 应该在 STATICFILES_DIRS 中查找全局静态内容，但即使我将其中的 url 更改为静态文件夹的绝对路径，它也找不到 login.html 的静态内容。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-20T09:32:50.593

您的问题是您没有在 urls.py 中收听 URL“/static/”

如果您通过像 apache 或 nginx 这样的网络服务器为您的应用程序提供服务，那么这是正常的，因为网络服务器会自己处理静态文件。

对于开发，Django 自带一个内置的静态服务器

到 urls.py，最后添加

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

它的作用是添加 /static/ url，让您在没有网络服务器的情况下提供服务。

这相当于

```
url(
    regex=r'^static/(?P<path>.*)$', 
    view='django.views.static.serve', 
    kwargs={'document_root': settings.STATIC_ROOT,}
) 
```

有些人会告诉您，您需要将 URL 规则包装在“if settings.DEBUG”中以使用仅限开发人员的规则，但这根本不需要，实际上我发现这是一个坏建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:11:14.407

您在使用 runserver 构建时遇到问题，还是使用 Apache 或类似工具提供服务？我在这方面有点挣扎。我遵循的文档是：[https ://docs.djangoproject.com/en/stable/howto/static-files/](https://docs.djangoproject.com/en/stable/howto/static-files/)

当您准备好部署时，第二部分是关键。您需要定义一个静态根（一开始为空）并运行`manage.py collectstatic`命令将静态文件从整个项目移动到该文件夹​​中。然后你可以从那里为他们服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T21:23:51.843

改变`STATIC_ROOT=''`有`STATIC_ROOT='/'`帮助吗？

在我看来，唯一的区别是`static/pics03.jpg`（相对路径）存在于主页上，但不存在于另一个上。

绝对路径`/static/pics03.jpg`在这两种情况下都存在。如果更改`STATIC_ROOT`没有帮助，只需`/`在网址的开头添加一个。

# flash-cs5 - 使用 JSFL 从一组字体更改为另一组字体 (Flash 5)

> ID：10216828
> 
> 赞同：1
> 
> 时间：2012-04-18T19:45:40.587
> 
> 标签：flash-cs5, jsfl

我正在尝试从使用一组字体更改为使用 JFSL 的另一组字体。我遇到的问题是我无法获取或设置字体样式（如下图所示）

[http://i39.tinypic.com/20pbnsg.png](http://i39.tinypic.com/20pbnsg.png)

适合家庭：ITC Kabel 标准风格：粗体

textField.getTextAttr("face")，我得到 ITC Kabel Std Medium。

无论如何，JFSL 可以做到这一点吗？如果没有，我有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:07:12.360

在 flash 中，“bold”通常是“face”的单独属性形式。

```
textField.setTextAttr("face","ITC Kabel Std")
textField.setTextAttr("bold",true) 
```

它在 Flash 中可以是粗体，但在评估时仍然是原始字体。

# php - 如何从 php 中的推文文本中获取图像 url？

> ID：10216838
> 
> 赞同：0
> 
> 时间：2012-04-18T19:46:20.880
> 
> 标签：php, regex, image, url, uri

我目前正在我的应用程序中显示来自 twitter 的默认图像服务的图片，因为它们包含在 json 响应中，但我想尝试从 yfrog、twitpic、lockerz 或类似提供商获取图像。

我正在使用其余的 api，所以我正在考虑添加`filter:links`到搜索查询中，从推文中提取 url 并检查链接是否是图像，但我不确定如何获取 url，因为我认为它会需要一些正则表达式加上大多数推文 url 是重定向到某个地方的实际照片的缩短版本，所以我相信这可能是一个问题。如果我能验证 url 是否包含上面提到的任何图像提供程序，那就太好了（有点像在检查 url 是否是图像之前的第一个过滤器）

有人能指出我正确的方向吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:40:28.987

为了检测链接，只需用 google 搜索正则表达式来匹配 url。像这样在这里：
[http](http://snipplr.com/view/2371/) ://snipplr.com/view/2371/或[http://www.catswhocode.com/blog/15-php-regular-expressions-for-web-developers](http://www.catswhocode.com/blog/15-php-regular-expressions-for-web-developers)
并循环通过匹配数组： [http ://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)
这个应该可以解决短链接问题（假设你安装了 curl）：
[在 php 中使用 curl 跟随重定向 在](https://stackoverflow.com/questions/4454605/follow-redirects-with-curl-in-php)
这里使用这个来检查链接是否是图片：
[http](http://php.net/manual/en/function.get-headers.php) ://php.net/manual/en/function.get-headers.php （将“Content-Type”解析为“image”）

我希望这有帮助。

# deployment - 将参数传递给 Capistrano

> ID：10216841
> 
> 赞同：33
> 
> 时间：2012-04-18T19:46:28.317
> 
> 标签：deployment, capistrano

我正在研究使用 Capistrano 作为通用部署解决方案的可能性。通过“通用”，我的意思是非导轨。我对我找到的文档的质量不满意，但是，当然，我不是在看那些假定您正在部署 Rails 的文档。所以我会尝试根据几个例子来破解一些东西，但是我从一开始就面临着一些问题。

我的问题是`cap deploy`没有足够的信息来做任何事情。重要的是，它缺少我要部署的版本的标签，这*必须*在命令行上传递。

另一个问题是我如何指定我的 git 存储库。我们的 git 服务器是通过用户帐户上的 SSH 访问的，但我不知道如何更改`deploy.rb`为使用用户的 id 作为 scm URL 的一部分。

那么，我该如何完成这些事情呢？

**例子**

我想部署第二个版本的第一个 sprint 的结果。这在 git 存储库中标记为`r2s1`. 另外，假设用户“johndoe”负责部署系统。要访问存储库，他必须使用 URL `johndoe@gitsrv.domain:app`。因此存储库的远程 URL 取决于用户 ID。

获取所需文件的命令行如下：

```
git clone johndoe@gitsrv.domain:app
cd app
git checkout r2s1 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-24T00:22:22.527

**更新：**对于 Capistrano 3，请参阅[下面 scieslak 的回答](https://stackoverflow.com/a/40061188/27358)。

* * *

jarrad 是否说过，capistrano-ash 是一组很好的基本帮助模块，可以部署其他项目类型，尽管在一天结束时它不是必需的。它只是一种脚本语言，大多数任务都是通过系统命令完成的，最终几乎变成了 shell 脚本。

要传入参数，您可以在运行 cap 时设置 -s 标志以提供键值对。首先创建一个这样的任务。

```
desc "Parameter Testing"
task :parameter do
  puts "Parameter test #{branch} #{tag}"
end 
```

然后像这样开始你的任务。

```
cap test:parameter -s branch=master -s tag=1.0.0 
```

最后一部分。我建议使用 ssh 密钥对您的服务器设置无密码访问。但是，如果您想从当前登录的用户那里获取它。你可以做这样的事情。

```
desc "Parameter Testing"
task :parameter do
  system("whoami", user)
  puts "Parameter test #{user} #{branch} #{tag}"
end 
```

**更新：**已编辑以使用最新版本的 Capistrano。配置数组不再可用。

**全局参数：见注释** 使用 set :branch, fetch(:branch, 'a-default-value') 全局使用参数。（并用 -S 代替它们。）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-10-15T15:57:43.880

**更新。仅关于将参数传递给 Capistrano 3 任务。**

我知道这个问题已经很老了，但在搜索将参数传递给 Capistrano 任务时仍然首先在 Google 上弹出。不幸的是，Jamie Sutherland 提供的奇妙答案不再适用于 Capistrano 3。在您浪费时间尝试之前，除了结果如下所示：

```
cap test:parameter -s branch=master 
```

输出：

```
cap aborted!
OptionParser::AmbiguousOption: ambiguous option: -s
OptionParser::InvalidOption: invalid option: s 
```

和

```
cap test:parameter -S branch=master 
```

输出：

```
invalid option: -S 
```

您可以通过单击此黄金链接找到 @senz 和 Brad Dwyer 提供的 Capistrano 3 的有效答案：Capistrano 3 pull [command line arguments](https://stackoverflow.com/questions/21027452/capistrano-3-pulling-command-line-arguments)

为了完整起见，请参阅下面的代码以了解您拥有的两个选项。

**第一个选项：**

您可以像使用常规哈希一样使用键和值迭代任务：

```
desc "This task accepts optional parameters"

task :task_with_params, :first_param, :second_param do |task_name, parameter|
  run_locally do
    puts "Task name: #{task_name}"
    puts "First parameter: #{parameter[:first_param]}"
    puts "Second parameter: #{parameter[:second_param]}"
  end
end 
```

确保调用 cap 时参数之间没有空格：

```
cap production task_with_params[one,two] 
```

**第二个选项：**

在调用任何任务时，您可以分配环境变量，然后从代码中调用它们：

```
set :first_param, ENV['first_env'] || 'first default'
set :second_param, ENV['second_env'] || 'second default'

desc "This task accepts optional parameters"
task :task_with_env_params do
  run_locally do
    puts "First parameter: #{fetch(:first_param)}"
    puts "Second parameter: #{fetch(:second_param)}"
  end
end 
```

要分配环境变量，请像下面这样调用 cap：

```
cap production task_with_env_params first_env=one second_env=two 
```

希望这会为您节省一些时间。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-24T06:03:02.043

我建议使用 ENV 变量。

像这样的东西（命令）：

```
$ GIT_REPO="johndoe@gitsrv.domain:app" GIT_BRANCH="r2s1" cap testing 
```

帽配置：

```
#deploy.rb:
task :testing, :roles => :app do
  puts ENV['GIT_REPO']
  puts ENV['GIT_BRANCH']
end 
```

并查看[https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)，这种方法可能对您也有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-06T10:38:26.650

正如 Jamie 已经展示的那样，您可以将参数传递给带有`-s`标志的任务。我想向您展示如何另外使用默认值。

如果要使用默认值，则必须使用`fetch`代替`||=`或检查`nil`：

```
namespace :logs do
  task :tail do
    file = fetch(:file, 'production') # sets 'production' as default value
    puts "I would use #{file}.log now"
  end
end 
```

您可以通过（使用默认值）运行`production`此`file`任务

```
$ cap logs:tail 
```

或（使用`cron`值`file`

```
$ cap logs:tail -s file=cron 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T23:54:19.827

查看[capistrano-ash](https://github.com/augustash/capistrano-ash)以获取有助于非 Rails 部署的库。我用它来部署 PyroCMS 应用程序，效果很好。

这是该项目的 Capfile 中的一个片段：

```
# deploy from git repo
set :repository, "git@git.mygitserver.com:mygitrepo.git"
# tells cap to use git
set :scm, :git 
```

我不确定我是否理解问题的最后两部分。提供更多细节，我很乐意提供帮助。

**给出示例后编辑：**

```
set :repository, "#{scm_user}@gitsrv.domain:app" 
```

然后每个拥有部署权限的人都可以将以下内容添加到他们的本地 ~/.caprc 文件中：

```
set :scm_user, 'someuser' 
```

# java - 蚂蚁与水银

> ID：10216843
> 
> 赞同：0
> 
> 时间：2012-04-18T19:46:37.787
> 
> 标签：java, ant, mercurial

我正在尝试使用以下目标在我的 ant 脚本中添加一些标签信息，但出现错误（结果 = -1），并且 hg 告诉我它无法识别该命令：

```
<target name="-post-init">
    <exec outputproperty="hg.tag" executable="hg">
        <arg value="parents --template {latesttag}+{latesttagdistance}" />
    </exec>
</target> 
```

如果我只包括`value="parents"`它工作正常。
如果我运行命令行`hg parents --template {latesttag}+{latesttagdistance}`它也可以正常工作。

关于我的语法有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T19:56:43.773

刚试过这个，它工作正常：

```
 <exec outputproperty="hg.tag" executable="hg">
        <arg value="parents" />
        <arg value="--template" />
        <arg value="{latesttag}+{latesttagdistance}" />
    </exec> 
```

我需要拆分论点。

# mysql - 使用 mysql 时 JSF 未添加用户

> ID：10216844
> 
> 赞同：0
> 
> 时间：2012-04-18T19:46:41.297
> 
> 标签：mysql, jsf, jdbc, model

我已经提高了 2 年的 Java 知识。今天，我开始使用数据库。我有 2 个类，即 DatabaseConnection 和 UserModel.Databaseconnection 类具有连接操作，UserModel 将添加、删除、更新等方法。我没有'还没有写删除和更新代码。我只写了添加方法。但它添加到用户。我搜索了很多关于这个的想法，但我无法解决这个问题。

这是我的连接类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import java.beans.Statement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;

/**
 *
 * @author KHn
 */
public abstract class DatabaseConnection {
    private Connection connect;
    private static final String dbUsername="root";
    private static final String dbPassword="";
    private static final String dbName="virtualblog";
    private static final String dbHost="jdbc:mysql://localhost:3306/";
    private String driver="com.mysql.jdbc.Driver";
    private Statement st;
    private ResultSet rs;
    /** Creates a new instance of DatabaseConnection */
    public DatabaseConnection(){
        try { 
        Class.forName(this.driver).newInstance();
        setConnect((Connection)DriverManager.getConnection(dbHost+dbName,dbUsername,dbPassword));

        } catch (Exception e) {
            System.out.println(e);
        }
    }
    public Connection getConnect() {
        return connect;
    }

    public void setConnect(Connection connect) {
        this.connect = connect;
    }

} 
```

此外，这是一个 UserModelClass：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import java.beans.Statement;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

    /**
 *
 * @author KHn
 */
@ManagedBean
@RequestScoped
public class UserModel extends DatabaseConnection{
    private PreparedStatement ps;
    private Statement st;
    private ResultSet ts;
    Register member =new Register();
    public Register getUser() {
        return member;
    }
    public void setUser(Register member) {
        this.member = member;
    }
    public boolean addUser(){
        try{
            ps=(PreparedStatement)getConnect().prepareStatement("INSERT INTO `members`(`id`, `username`, `email`, `password`, `name`, `avatar`, `blogname`) VALUES (null,?,?,'3694406','kaan','asdasd','blog adi')");
            ps.setString(2, member.getUsername());
            ps.setString(3, member.getEmail());
            ps.executeUpdate();
        }catch (Exception e) {
            System.err.println("ekleme hatasi: "+e);
        }
        return true;
    }
/** Creates a new instance of UserModel */
    public UserModel() {
    }
} 
```

**我哪里做错了？你能帮我一下吗？谢谢和最好的问候。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:22:10.680

您的 JDBC 连接可能处于事务模式。即通过连接传递的（多个）查询将仅在提交（或关闭）连接时才真正执行（隔离）。

所以，打电话`connection.commit()`还是`connection.close()`应该这样做。

您的代码中只有一个重大的设计错误，这使得很难正确地实现它。您基本上需要重写所有内容。首先，您绝对不应该拥有昂贵的数据库资源，例如`Connection`,`Statement`和`ResultSet`作为类的实例变量。应该在尽可能短的范围内声明、获取和关闭它们，最好在与执行 SQL 查询的方法块相同的方法块中。此外，所有 JDBC 作业都属于单独的 DAO 类，而不是托管 bean。您的 DAO 代码需要以这种方式设计，以便最终在您的`addUser()`方法中如下所示：

```
public void addUser() throws SQLException {
    memberDAO.create(member);
} 
```

To get a step further, consider learning EJB/JPA as well. EJBs allows for finer grained control over transactions and have a sane default behaviour (auto-commit by end of request, for example) and JPA results in less JDBC boilerplate code, all the JDBC code can basically be replaced by oneliners.

# sql - WITH查询和SELECT查询有什么区别？

> ID：10216846
> 
> 赞同：1
> 
> 时间：2012-04-18T19:46:42.050
> 
> 标签：sql, oracle

数据：我写了两个查询，一个是 WITH，另一个是 SELECT，然后自加入下表，但是两个查询返回不同的结果，为什么会这样？

表名是**test_cur**

```
 ID_SOURCE_CUR   ID_TARGET_CUR
 -------------  --------------
    A               B
    B               C
    C               D
    D               E
    A               Z
    G               A
    K               A
    Q               A
    J               J
    K               K
    K               L
    L               K
    B               A
    Z               A 
```

那么为什么下面的两个查询返回不同的结果呢？

```
 SELECT *
      FROM test_cur tu, test_cur fu
     WHERE tu.id_target_cur = 'A'
       AND fu.id_source_cur = 'A'
       AND tu.id_source_cur <> fu.id_target_cur;

returns 8 rows.

ID_SOURCE_CUR   ID_TARGET_CUR   ID_SOURCE_CUR_1 ID_TARGET_CUR_1
--------------  --------------   --------------  -------------- 
    G               A               A               B
    K               A               A               B
    Q               A               A               B
    Z               A               A               B
    G               A               A               Z
    K               A               A               Z
    Q               A               A               Z
    B               A               A               Z 
```

和 -

```
 WITH qry1 AS
         (SELECT *
            FROM test_cur)
    SELECT *
      FROM qry1 tu, qry1 fu
     WHERE tu.id_target_cur = 'A'
       AND fu.id_target_cur = 'A'
       AND tu.id_source_cur <> fu.id_target_cur;

    returns 25 rows.

ID_SOURCE_CUR   ID_TARGET_CUR   ID_SOURCE_CUR_1 ID_TARGET_CUR_1
--------------  --------------   --------------  -------------- 
        G               A               G               A
        G               A               K               A
        G               A               Q               A
        G               A               B               A
        G               A               Z               A
        K               A               G               A
        K               A               K               A
        K               A               Q               A
        K               A               B               A
        K               A               Z               A
        Q               A               G               A
        Q               A               K               A
        Q               A               Q               A
        Q               A               B               A
        Q               A               Z               A
        B               A               G               A
        B               A               K               A
        B               A               Q               A
        B               A               B               A
        B               A               Z               A
        Z               A               G               A
        Z               A               K               A
        Z               A               Q               A
        Z               A               B               A
        Z               A               Z               A 
```

为什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T20:00:13.280

您的第二个查询不同，您有不同的`WHERE`子句。第一个`WHERE`是：

```
WHERE tu.id_target_cur = 'A'
       AND fu.id_source_cur = 'A'
       AND tu.id_source_cur <> fu.id_target_cur; 
```

第二个是：

```
WHERE tu.id_target_cur = 'A'
       AND fu.id_target_cur = 'A' -- this line is different, it should be fu.id_source_cur = 'A'
       AND tu.id_source_cur <> fu.id_target_cur; 
```

更改这些，两个查询的结果完全相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T20:00:17.737

where 子句`fu.id_source_cur = 'A'`与其他子句不同。`fu.id_target_cur = 'A'`

# java - 确定 char 是否在一定范围内？

> ID：10216852
> 
> 赞同：-2
> 
> 时间：2012-04-18T19:47:11.157
> 
> 标签：java

我想检查`ch`定义为 char`(char ch = ' ')`的 0x20 （空格）到 0x7E （~）之间的值。

我尝试了很多方法，但它给了我错误的答案。

例如：

```
if (ch > 0x20 or ch <0x7F) then

if (ch > ' ' or ch < '~') then 
```

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:50:37.433

```
if( ch >= 0x20 && ch <= 0x7e) {
 // ch is in your range
} 
```

或者

```
if( ch >= ' '  && ch <= '~') {
// ch is in your range
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:50:20.297

此代码查找所有非 ascii 字符。在这种情况下，它们将被删除，但您可以修改替换以执行任何您想要的操作。

```
String resultString = subjectString.replaceAll("[^\\x00-\\x7F]", ""); 
```

# mysql - 具有文本和整数的字段中的 MySQL 逻辑运算符

> ID：10216855
> 
> 赞同：0
> 
> 时间：2012-04-18T19:47:34.113
> 
> 标签：mysql, logical-operators

我有一个看起来像的表：

```
ATTRIBUTE1 | ATTRIBUTE2
weight: 190| height: 175
ctr: 400   | dmd: 19 
```

是否可以对这些领域进行比较操作？

就像，如果我想找到体重小于 200 的每个人，那么语法会是什么样子？如果字段中没有文本，我认为查询将如下所示：

```
SELECT * FROM mytable WHERE attribute1 < '200' 
```

但由于该字段具有定义文本“重量：”，我不太确定如何执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:58:58.423

相当

```
CAST(SUBSTRING(attribute1, INSTR(attribute, ': ') AS SIGNED) 
```

因为该值包含开头的字符串。

基本上你这样做：

找到 ': ' 的索引并将其用作值的子字符串（跳过所有内容直到实际数字）。然后你把它转换成一个 Int

（也许您需要在 INSTR 中添加 +1。我不确定，因为我这里没有 mysql 客户端

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:03:38.247

```
where cast(substring(ATTRIBUTE1, instr(ATTRIBUTE1, ': ')+1 ) as unsigned) <200 
```

选择：

```
where cast(replace(Field_2, 'weight: ', '') as unsigned) > 180 
```

# java - 如何遍历neo4j中节点属性的顺序列表？

> ID：10216863
> 
> 赞同：2
> 
> 时间：2012-04-18T19:48:04.307
> 
> 标签：java, neo4j

我是 neo4j 的新手，非常感谢您的帮助。

我有一个 neo4j 数据库，其中的节点具有属性“颜色”和两种关系类型“上一个”和“下一个”。我有一个 ArrayList，其中包含节点属性，它们应按应遍历的顺序排列，例如蓝色、红色、黄色。

如何遍历图形以查找确切路径 Node(Color:Blue) --> Node(Color:Red) --> Node(Color:Yellow) 之间是否没有节点以及所有类型为“Next”的关系，存在于数据库中？

我正在使用嵌入在 java 应用程序中的 neo4j。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:47:47.110

每个之间的 NEXT 关系可能就足够了，因为传入的 NEXT 可以被视为“前一个”。

而且我认为你应该索引你的颜色，然后从第一个节点（在本例中为“蓝色”）开始遍历，并有一个像这样的遍历器：

```
字符串 [] 颜色 = 新字符串 [] { "蓝色", "红色", "黄色" };
节点开始 = db.index().forNodes("colors").get("color", colors[0]).getSingle();
Traversal.description().uniqueness(Uniqueness.RELATIONSHIP_GLOBAL).breadthFirst().relationships(Types.NEXT, Direction.OUTGOING).evaluator(new Evaluator()
{
    @覆盖
    公共评估评估（路径路径）
    {
        String currentColor = (String) path.endNode().getProperty("color");
        boolean endOfTheLine = path.length()+1 >= colors.length;
        返回 currentColor.equals( 颜色[path.length()] ) ?
                Evaluation.of(endOfTheLine, !endOfTheLine) : Evaluation.EXCLUDE_AND_PRUNE;
    }
}).traverse(开始)

```

我刚刚破解了你的域，那个遍历器运行得很好！

# clojurescript - clojurescript 是否适合与 Sencha/ExtJS 一起使用？

> ID：10216868
> 
> 赞同：2
> 
> 时间：2012-04-18T19:48:21.920
> 
> 标签：clojurescript

有一个使用 clojurescript 和 Sencha 的简单示例要点。我认为 clojurescript 在设计时考虑到了与 javascript 库的一流互操作，但我阅读得越多，似乎只有 Google Closure 是 clojurescript 的一等公民，与其他 javascript 框架的互操作对他们来说并不重要。

我看不出它为什么不能工作，我错过了什么吗？我不想因为无法预见的问题而放弃原型前的 2 或 3 周。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:24:03.360

您可以使用任何外部 JavaScript 库。主要问题 - 如果该库不提供 externs.js，那么在高级编译下使用外部库编译 ClojureScript 将有困难。这对您的用例可能很重要，也可能无关紧要。

# javascript - onClicking 父 div，获取子值 - 无需字符串操作

> ID：10216871
> 
> 赞同：1
> 
> 时间：2012-04-18T19:48:27.693
> 
> 标签：javascript, jquery, html

如何获取子输入值；从其父 div 上的点击事件

**动态 HTML**

```
<div class="tableRowOdd">
  <input type="hidden" value="28"> 

  04/11/2012
</div> 
```

**JS**

```
$('#historyContainer .tableRowOdd').live( 'click', function(e) {

     // Here I want to get the hidden-input's value directly  
     // something like- $(this+'input').val()
     console.log( $(this) );

}); 
```

不想从**$(this).html()进行字符串操作**

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:50:56.740

```
$('#historyContainer .tableRowOdd').live( 'click', function(e) {
     console.log( $(this).find('input').val() ); // or .text()
}); 
```

请注意，这将遍历所有输入。如果你只想要第一个：

```
$('#historyContainer .tableRowOdd').live( 'click', function(e) {
     console.log( $(this).find('input').first().val() ); // or .text()
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:51:27.537

`$(this).find('input').val()`应该返回你的价值。

**注意：**`.on`如果您使用 jQuery 1.7 或使用`.delegate`旧版本，请使用incase。`.live`不是首选功能。

用于`.delegate`旧版本，

```
$('#historyContainer').delegate('.tableRowOdd', 'click', function(e) {
     $(this).find('input').val()
     console.log( $(this) );
}); 
```

使用`.on`jQuery 1.7，

```
$('#historyContainer').on('click', '.tableRowOdd', function(e) {
     $(this).find('input').val()
     console.log( $(this) );
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:51:51.827

这可以通过 jQuery：

```
$('#historyContainer .tableRowOdd').live( 'click', function(e) {

     // if you have more inputs and wanna get the hidden 
     console.log( $(this).find('input[type="hidden"]').val() );
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T19:50:54.713

你可以这样做；

```
$(this).find('input').val() 
```

# php - PHP mysql 表注释

> ID：10216874
> 
> 赞同：0
> 
> 时间：2012-04-18T19:48:32.250
> 
> 标签：php, sql, comments

我正在向网站添加评论，并认为我会制作一个简单的评论表，如下所示，但它不起作用。一定是一个错字，但我找不到它，尽管我一遍又一遍地把它复制到另一个文件等等。对于那些熟悉评论的人来说，这些字段是否足够？

```
$maketable = "CREATE TABLE comments(id INT NOT NULL AUTO_INCREMENT, 
 PRIMARY KEY(id),
 name VARCHAR(30),
 whenadded DATETIME,
 storyid INT,
 comment TEXT,
 show TINYINT(1),
 userid INT)";
mysql_query($maketable); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:52:39.907

我认为'show'是mysql中的保留字。尝试“显示”或其他内容：

```
$maketable = "CREATE TABLE comments(id INT NOT NULL AUTO_INCREMENT, 
 PRIMARY KEY(id),
 name VARCHAR(30),
 whenadded DATETIME,
 storyid INT,
 comment TEXT,
 display TINYINT(1),
 userid INT)";
mysql_query($maketable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:53:19.550

您在 php 中用于数据库连接池的凭据不应该对您的数据库具有创建/删除权限。最好使用像 phpmyadmin 这样的“sql-tool”来进行数据库设计。

优点之一是用于调试目的的更好的错误消息？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:53:50.737

你检查过mysql_error吗？

php.net/mysql_error

我会将 PRIMARY KEY 行移到 sql 语句的最底部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T20:03:42.440

```
$maketable ="CREATE TABLE  comments (
id INT( 10 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,
name VARCHAR( 30 ) NOT NULL,
whenadded DATETIME,
storyid INT( 10 ),
 comment TEXT,
 display INT(1),
 userid INT ( 10 )
) ENGINE = MYISAM;"
mysql_query($maketable); 
```

# c# - 在 asp.net 中发布数据并获取响应

> ID：10216875
> 
> 赞同：0
> 
> 时间：2012-04-18T19:48:32.627
> 
> 标签：c#, asp.net

我正在尝试将数据发布到网站并从服务器获取响应。这是我正在使用的代码：

```
 // Create a request using a URL that can receive a post. 
    WebRequest request = WebRequest.Create("http://www.indianrail.gov.in/train_Schedule.html");
    ((HttpWebRequest)request).UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:9.0) Gecko/20100101 Firefox/9.0";
    // Set the Method property of the request to POST.
    request.Method = "POST";
    // Create POST data and convert it to a byte array.
    string postData = lccp_trnname.Text;
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);
    // Set the ContentType property of the WebRequest.
    request.ContentType = "application/x-www-form-urlencoded";
    // Set the ContentLength property of the WebRequest.
    request.ContentLength = byteArray.Length;
    // Get the request stream.
    Stream dataStream = request.GetRequestStream();
    // Write the data to the request stream.
    dataStream.Write(byteArray, 0, byteArray.Length);
    // Close the Stream object.
    dataStream.Close();
    // Get the response.
    try
    {
        WebResponse response = request.GetResponse();
        // Display the status.
        Response.Write(((HttpWebResponse)response).StatusDescription);
        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream();
        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader(dataStream);
        // Read the content.
        string responseFromServer = reader.ReadToEnd();
        // Display the content.
        Response.Write(responseFromServer);
        // Clean up the streams.
        reader.Close();
        dataStream.Close();
        response.Close();
    }
    catch (WebException ee)
    {
        Label1.Text = ee.Message;

    } 
```

我没有从服务器获得回复，而是被重定向到我发布数据的同一网页。如果有人知道我的代码出了什么问题，请帮助我。很久以前我就一直在尝试，但所有的努力都白费了。所以请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:54:20.657

您必须将数据发布到[http://www.indianrail.gov.in/cgi_bin/inet_trnnum_cgi.cgi](http://www.indianrail.gov.in/cgi_bin/inet_trnnum_cgi.cgi)而不是[http://www.indianrail.gov.in/train_Schedule.html](http://www.indianrail.gov.in/train_Schedule.html)

**更新：**

第二个问题是您没有在数据中发送“lccp_trnname”参数的名称。这将使它工作：

```
string postData = "lccp_trnname=" + lccp_trnname.Text; 
```

# php - 使用 PHP/oci8 连接到 Oracle 远程数据库 - 不确定如何使用监听器

> ID：10216876
> 
> 赞同：1
> 
> 时间：2012-04-18T19:48:38.083
> 
> 标签：php, oracle, oci8

我项目的总体目标是连接到另一台服务器上的 Oracle 数据库，使用 PHP 对其进行查询，以便我可以使用 JavaScript 创建数据图表。

我的服务器正在运行 CentOS

到目前为止，我已经按照网络上的说明进行操作，并在我的服务器上安装了 oci8 以及 Oracle Insant 客户端。

然后我创建了一个 shell 脚本来隧道到远程服务器。

接下来我创建了一个测试 php 文件来尝试连接到数据库

```
<?php
$conn = oci_connect('name', 'pw', 'servername/databasename');
if(!$conn){
        $e = oci_error();
        trigger_error(htmlentities($e['message'], ENT_QUOTES), E_USER_ERROR);
}

oci_close($conn);

?> 
```

当我在浏览器中加载它时，我收到以下错误

警告：oci_connect(): ORA-12541: TNS: no listener in /var/www/html/djc/ociConnect.php on line 3 致命错误: ORA-12541: TNS: no listener in /var/www/html/djc /ociConnect.php 在第 6 行

我已经对错误进行了研究，我知道主要问题是 lsnrctl start

不起作用，我没有 lsnrctl 功能。我也没有 TNSNAMES.ORA 或 LISTENER.ORA 文件。

我不知道如何让 lsnrctl 在我的服务器上工作，或者我什至从正确的角度解决这个问题。

还尝试启动 sqlplus（我从 rpm 安装），返回找不到命令。

有什么建议么？我什至不确定我是否要在正确的庄园中实现我的目标，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:08:03.937

我曾经联系过：

```
//Putenv("NLS_LANG=SPANISH_SPAIN.WE8ISO8859P15");
$db="(DESCRIPTION=
     (ADDRESS_LIST=
       (ADDRESS=(PROTOCOL=TCP)
         (HOST=$GLOBALS[dbhost])(PORT=$GLOBALS[dbport])
       )
     )
       (CONNECT_DATA=(SID=$GLOBALS[dbname]))
 )";
 $conn = OCILogon($GLOBALS['dbuser'],$GLOBALS['dbpasswd'],$db); 
```

相应地替换 $GLOBALS['dbuser']、$GLOBALS['dbpasswd']、$GLOBALS[dbhost]、$GLOBALS[dbname]、$GLOBALS[dbport]。

# facebook - 在移动设备上更改了我的 Like Box 的大小

> ID：10216881
> 
> 赞同：1
> 
> 时间：2012-04-18T19:48:57.790
> 
> 标签：facebook, iframe, facebook-likebox

我的页面 www.iluminet.com.mx 上的 IFRAME 代码如下：

```
<iframe src="http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Filuminet&amp;width=250&amp;colorscheme=light&amp;show_faces=false&amp;stream=true&amp;header=false&amp;height=400" scrolling="yes" frameborder="0" style="border:none; overflow:hidden; width:250px; height:400px;" allowTransparency="true"></iframe> 
```

在 iPad 和 iPhone 等移动设备上检查此选项时，该框会修改其设置大小。

# asp.net - 用户控制静态名称选项？

> ID：10216882
> 
> 赞同：5
> 
> 时间：2012-04-18T19:49:00.740
> 
> 标签：asp.net, web-user-controls

我知道有一种方法可以强制asp Web用户控件（ascx）使用静态ID，这样它们就不会被附加所有附加的命名垃圾......但是有没有办法对“name”属性做同样的事情？具体来说，在这种情况下，对于 DDL 的？JQuery 需要一个特定的名称，我需要阻止 .NET 这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-24T21:09:52.400

目前在 ASP.Net 中是不可能的……我发现这种组合是一个可以接受的解决方案。

添加`ClientIDMode="Static"`到控件：

```
<asp:HiddenField ID="HiddenField1" runat="server" ClientIDMode="Static" /> 
```

使用 JQuery，在文档准备好时，将控件上的 name 属性设置为其 id 的值：

```
$(document).ready(function () {

            // alert($("#HiddenField1").attr("name"));

            $("#HiddenField1").attr("name", "HiddenField1");

            // alert($("#HiddenField1").attr("name"));
        }); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-11T16:14:03.447

尝试将 ClientIDMode="Static" 添加到控制标签。

```
<asp:FileUpload ID="FileUpload1" runat="server" ClientIDMode="Static" /> 
```

# scala - 无法编译基本的 Casbah 3.0 程序

> ID：10216887
> 
> 赞同：1
> 
> 时间：2012-04-18T19:49:23.187
> 
> 标签：scala, mongodb, casbah

我的项目使用以下 jars：scala-library (2.9.2)、mongo-java-driver (2.7.3)、scalaj-collection (2.9.1-1.2)、casbah (util、commons、core、query、gridfs) 2.9.1-3.0.0-M2、joda-time 2.1 和 joda convert 1.2

当我输入以下 hello-worldish 代码时：

```
package test

import com.mongodb.casbah.Imports._

object Test {
  def main(args: Array[String]): Unit = {
    var connection = MongoConnection()
  }
} 
```

我收到一个错误：“未找到：值 MongoConnection”。如果我明确表示，错误就会消失

```
include com.mongodb.casbah.MongoConnection 
```

但我认为`Imports._`应该照顾好这个。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:07:51.353

在 Casbah 3.0 中，`Imports._`已弃用。奇怪的是 MongoConnection 甚至不再被导入。其他一切正常，但会出现弃用警告。

正如这些警告所述，您只需要这样做：

```
import com.mongodb.casbah._ 
```

# .net - 中继器能否自动使用不同的 clientIDMode，然后在 web.config 中设置？(clientIDMode="静态")

> ID：10216890
> 
> 赞同：0
> 
> 时间：2012-04-18T19:49:27.637
> 
> 标签：.net, c#-4.0, .net-4.0, clientid, asprepeater

我想在 web.config 中使用 clientIDMode="Static"，因为它对于前端开发来说非常棒，很明显。

但是，我希望我的中继器、数据网格和数据列表默认为 clientIDMode="Predictable"，这样页面上就没有重复的 ID。我不希望每次创建转发器时都必须设置它，因为它是额外的代码，如果我忘记了，我不会立即看到任何问题，所以我可能会继续，而不会意识到我犯了错误。

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:30:29.723

不，恐怕这种事情不存在。

如果这对您来说真的很重要，您可以在您的硕士或页面中实现以下内容`Page_Init`：

```
protected void Page_Init(object sender, EventArgs e)
{
    var types = new Type[] { 
        typeof(Repeater), typeof(DataGrid), typeof(GridView), 
        typeof(DataList), typeof(ListView), typeof(FormView) 
    };
    var allControls = new List<Control>();
    FindChildControlsRecursive(Page, types, allControls);
    foreach (var ctrl in allControls)
    {
        ctrl.ClientIDMode = ClientIDMode.Predictable;
    }
}

public void FindChildControlsRecursive(Control control, IList<Type> types, IList<Control> result)
{
    foreach (Control childControl in control.Controls)
    {
        var controlType = childControl.GetType();
        if (typeof(Control).IsAssignableFrom(controlType) && types.Contains(controlType))
        {
            result.Add((Control)childControl);
        }
        else
        {
            FindChildControlsRecursive(childControl, types, result);
        }
    }
} 
```

但在我看来，这个提醒太多了。

# postgresql - 从标准输入表达式复制 PostgreSQL

> ID：10216891
> 
> 赞同：16
> 
> 时间：2012-04-18T19:49:31.593
> 
> 标签：postgresql, postgis

我正在尝试使用 COPY FROM STDIN 将数据导入我的表中。我表中的一列是几何类型。我的命令看起来像这样......

```
COPY "WeatherStations" ("Station_ID", "Station_Code", "Station_Name", "Station_Location") FROM stdin;
1       KAVP    WILKES-BARRE    ST_GeomFromText('POINT(41.338055 -75.724166)')
2       KOKV    WINCHESTER      ST_GeomFromText('POINT(39.143333 -78.144444)')
3       KSHD    SHENANDOAH      ST_GeomFromText('POINT(38.263611 -78.896388)')
... 
```

但是，我认为它正在尝试插入文本“ST_GeomFromText（'POINT ...”并且失败而不是评估表达式并插入表达式的结果。有谁知道这里可能发生了什么以及我如何获得插入了实际的几何图形？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-21T11:18:37.733

我很难弄清楚如何使用 COPY FROM STDIN 命令将几何数据批量复制/加载到 PostGIS 中，我找不到关于这个主题的官方文档。

在批量加载期间更改列（[ALTER TABLE / SET DATA TYPE / USING](https://stackoverflow.com/questions/10216891/postgresql-copy-from-stdin-expressions#comment13139595_10217292)）对我来说不是一个选项，因为它[仅在 PostGIS 2.0+ 中支持几何类型，](http://blog.opengeo.org/2012/03/06/postgis-2-0-new-features-typmod/)[使用临时表](https://stackoverflow.com/a/10217292/822735)也不可接受。

确实有一种直接的方法可以做到这一点（至少在 PostGIS 1.5.2+ 中）。您可以通过这种方式简单地为您的复制语句重写数据，对您的几何数据使用简单的 WKT（众所周知的文本）表示：

```
1       KAVP    WILKES-BARRE    POINT(41.338055 -75.724166)
2       KOKV    WINCHESTER      POINT(39.143333 -78.144444)
3       KSHD    SHENANDOAH      POINT(38.263611 -78.896388) 
```

如果您在几何列上实施了 SRID 约束，则必须使用以下语法（在此示例中，SRID 为 4326），称为 EWKT（扩展众所周知的文本，它是[PostGIS 特定格式](http://postgis.refractions.net/docs/ST_GeomFromEWKT.html)）：

```
1       KAVP    WILKES-BARRE    SRID=4326;POINT(41.338055 -75.724166)
2       KOKV    WINCHESTER      SRID=4326;POINT(39.143333 -78.144444)
3       KSHD    SHENANDOAH      SRID=4326;POINT(38.263611 -78.896388) 
```

结束语：“POINT”和左括号“(”之间不能有空格，否则 COPY 仍会返回错误，说明您的几何数据格式无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:17:13.220

您可以省略包装文本的函数，导入到带有文本列的临时表中，然后使用在该步骤中进行转换的函数将 INSERT/SELECT 运行到永久表中。

```
INSERT INTO "WeatherStations"
  ("Station_ID", "Station_Code", "Station_Name", "Station_Location")
  SELECT "Station_ID", "Station_Code", "Station_Name",
         ST_GeomFromText("Station_Location")
    FROM "TempWeatherStations"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-04T12:56:43.450

您将所有值保留在`.csv`文件中并尝试如下：

```
CAT /path/file/demo.csv | psql -u <username> -h <localhost> -d<database> 
-c "COPY "WeatherStations" ("Station_ID", "Station_Code", "Station_Name", 
"Station_Location") FROM stdin;" 
```

这将起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T19:57:03.870

Point 的值如下所示：`0101000020E6100000DA722EC555552B40CDCCCCCCCC0C4840`.

我通常在我的表中保留`latitude`和`longitude`列，并使用触发器构建空间数据。

我不知道如何`POINT`从 stdin 复制 s 。

# c# - 通过开放图传递信息

> ID：10216893
> 
> 赞同：0
> 
> 时间：2012-04-18T19:49:37.210
> 
> 标签：c#, asp.net, facebook, facebook-graph-api, facebook-opengraph

我正在尝试将动词发布到时间线。每次用户单击按钮发布到时间线时，我都希望传递不同的信息，例如用户使用代码在第一页上单击发布

```
FB.api(
        '/me/devthree:Visited?product=http://dev3.vendorshop.net/vendor/og/testOgWebsite.aspx?Data=Product1', 'post', 
```

但是当他们点击第二页时，我想使用代码发布

```
FB.api(
        '/me/devthree:Visited?product=http://dev3.vendorshop.net/vendor/og/testOgWebsite.aspx?Data=Product1', 'post', 
```

发布成功，但在 testOgWebsite.aspx 页面上，查询字符串中没有传递任何信息。我走对了吗？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:23:00.217

不确定您是否打算这样做，但这两条线是相同的。

这就是我传递参数的方式：

```
FB.api('/me/devthree:Visited', 'post', {
        product: "http://dev3.vendorshop.net/vendor/og/testOgWebsite.aspx", 
        Data: "Product1"
    }, 
    function(result){
    console.log(result);
}); 
```

请注意，它可能不起作用的另一个原因是您有两个“？” 在您的网址中，如下所示：

```
?Data=Product1' 
```

应该是这样的：

```
&Data=Product1' 
```

# java - 无法将 JSON 反序列化为 POJO

> ID：10216894
> 
> 赞同：0
> 
> 时间：2012-04-18T19:49:38.223
> 
> 标签：java, json, gson

我有一个存储在 DB 中的 JSON，我想将其反序列化为 POJO

`JSON in DB`

```
{
 "requests": [
  {
    "url": "http://localhost:8080/wst-server-1.0-SNAPSHOT/services/rest/",
    "path": "3/reset",
    "method": "POST",
    "statusCode": "204",
    "statusMessage": "No Content"
  },
  {
    "url": "http://localhost:8080/wst-server-1.0-SNAPSHOT/services/rest/",
    "path": "3/orders",
    "method": "POST",
    "statusCode": "201",
    "statusMessage": "Created"
  }  
 ]
} 
```

`the code`

```
Gson gson = new Gson();
String json = gson.toJson(rs.getString(Columns.REQUEST.getName()));
logger.info(json);
ClientTask task = gson.fromJson(json, ClientTask.class); 
```

`logger.info(json)`给出以下

```
"{\n  \"requests\": [\n    {\n      \"url\": \"http://localhost:8080/wst-server-1.0-SNAPSHOT/services/rest/\",\n      \"path\": \"3/reset\",\n      \"method\": \"POST\",\n      \"statusCode\": \"204\",\n      \"statusMessage\": \"No Content\"\n    },\n    {\n      \"url\": \"http://localhost:8080/wst-server-1.0-SNAPSHOT/services/rest/\",\n      \"path\": \"3/orders\",\n      \"method\": \"POST\",\n      \"statusCode\": \"201\",\n      \"statusMessage\": \"Created\"\n    }\n  ]\n}" 
```

但该`gson.fromJson(json, ClientTask.class);`行抛出此异常

```
Exception in thread "main" com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 486
at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:180)
at com.google.gson.Gson.fromJson(Gson.java:755)
at com.google.gson.Gson.fromJson(Gson.java:721)
at com.google.gson.Gson.fromJson(Gson.java:670)
at com.google.gson.Gson.fromJson(Gson.java:642)
at cz.cvut.fit.wst.database.rowmapper.ClientTaskRowMapper.mapRow(ClientTaskRowMapper.java:30)
at cz.cvut.fit.wst.database.rowmapper.ClientTaskRowMapper.mapRow(ClientTaskRowMapper.java:1)
at org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:92)
at org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:1)
at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:648)
at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:636)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:665)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:673)
at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:728)
at cz.cvut.fit.wst.database.management.MySqlManager.getClientTask(MySqlManager.java:132)
at cz.cvut.fit.wst.client.rest.RestFrontend.main(RestFrontend.java:29)

Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 486
at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:168)
... 16 more 
```

`POJOs`

```
public class ClientTask {

    private String taskTypeId;
    private String userId;

    private List<ClientTaskRequest> requests;

}

public class ClientTaskRequest {

    private String url;
    private String path;
    private String method;
    private String body;
    private String statusCode;
    private String statusMessage;
    private String responseParser;

} 
```

我试图手动复制记录器给出的字符串并将该权利交给 Gson，它就起作用了。那为什么不呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:53:22.157

如果数据库字段中已经有 JSON，请不要再次序列化它。

您只需要：

```
Gson gson = new Gson();
String json = rs.getString(Columns.REQUEST.getName());
ClientTask task = gson.fromJson(json, ClientTask.class); 
```

# c++ - 带有位置通知的音频流

> ID：10216895
> 
> 赞同：0
> 
> 时间：2012-04-18T19:49:39.970
> 
> 标签：c++, c, audio, portaudio

我正在开发一个应用程序，它将根据输入序列生成音频流 (PCM)。此声音（音频流）将从头到尾播放。我想要的是在播放生成的声音时有一些关于**输入序列中位置的通知。**

例子：

我的输入为“ABC”，生成的声音对应于字母 A 3 秒，字母 B 2 秒和字母 C 2 秒 ---> 总共 7 秒（3+2+2）。该通知意味着在 3 秒后发送有关“ *A 发送*”的事件，2 秒后发送有关“ *B 发送*”的事件，再过 2 秒发送“ *C 发送*”事件。

有没有这样做的经典方法，或者这对每个问题都是特定的？（我使用 C/C++ 和[portaudio](http://www.portaudio.com/)框架）

现在，我这样做的唯一方法是在播放器进入流时动态生成每个字母的音频数据。

注意：我知道如何在线程之间发送异步事件和线程间通信。我只是对是否有这样做的*经典*方法感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:54:45.513

当通过音频设备播放特定事件或经过特定时间时，Portaudio 没有通知您的机制。如果您需要知道特定数量的数据何时通过设备，您需要使用[Pa_GetStreamTime](http://portaudio.com/docs/v19-doxydocs/portaudio_8h.html#a2b3fb60e6949f37f7f134105ff425749)轮询设备。

通常，尤其是在低延迟设置下，知道数据已写入并将被播放就足够了。在这种情况下，标准（无锁）线程间通信就可以了。

# javascript - jqGrid 通过 javascript 对象添加本地数据

> ID：10216897
> 
> 赞同：1
> 
> 时间：2012-04-18T19:49:45.947
> 
> 标签：javascript, jquery, jqgrid

我的问题如下：
- 我正在使用 jqgrid 来显示本地数据
- 这些数据是从 web 服务中解析的几个部分
- 我得到一个对象数组作为数据（可以更改）
- 我尝试添加新的数据部分通过 addJSONData 的部分，没有运气
- 我还尝试将 jqGrid 参数“数据”设置为数据部分的合并数组，没有运气

通过一些尝试，我得到了空行。
使用格式化程序 rowObject 是可以的，但 cellValue 是空的（未定义）。
似乎 colModel 和数据结构不“兼容”。

我希望能够分几个部分将数据添加到网格中。
行应按顺序显示。

以下是参数：

```
{  
caption: 'Villes',  
data: [],  
datatype: 'local',  
colNames: ['Actions', 'Distance', 'Coordonnées', 'Nom', 'Joueur', 'Puissance', 'Alliance', 'Diplomatie', 'Brumes', 'Status'],  
colModel: [  
    {name: 'actions', sortable: false, search: false, formatter: Shared.gridRowActions, width: 50},  
    {name: 'range', index: 'range', width: 60},  
    {name: 'coords', index: 'gps', sortable: false, search: false, formatter: function( cellValue, options, rowObject ){ return Shared.mapLink(cellValue); }, width: 90},  
    {name: 'city', index: 'city'},  
    {name: 'player', index: 'player'},  
    {name: 'might', index: 'might', align: 'right', defval: 0, formatter: function( cellValue, options, rowObject ){ return Shared.format(cellValue); }, width: 70},  
    {name: 'guild', index: 'guild'},  
    {name: 'diplomacy', index: 'diplomacy', formatter: function( cellValue, options, rowObject ){ return Shared.getDiplomacy(cellValue); }, width: 70},  
    {name: 'mist', index: 'mist', align: 'center', formatter: function( cellValue, options, rowObject ){ return cellValue === 1 ? 'Oui' : ''; }, width: 55},  
    {name: 'user', index: 'user', formatter: function( cellValue, options, rowObject ){ return Shared.userStatusLink(cellValue); }}  
],  
pager: '#pager-cities',  
loadui: 'disable',  
rowNum: 20,  
rowList: [20, 50, 100],  
sortname: 'range',  
sortorder: 'asc',  
altRows: true,  
autowidth: true,  
viewrecords: true,  
gridview: true,  
multiselect: true,  
multiboxonly: true,  
multikey: 'shiftKey'  
} 
```

然后是向网格添加数据的代码。

```
var merged = [];
var $grid = $('#grid);
...
merged = merged.concat(cities);
$grid.jqGrid('setGridParam', {data: merged}).trigger('reloadGrid'); 
```

也试过：

```
$grid[0].addJSONData( {page: 0, total: 0, records: cities.length, rows: cities} ); 
```

数据数组例如：

```
[
    {"id":338591,"cell":[2,"338,591","140","15545536","Lord Patrice02200","","0","Patrice02200",0]},
    {"id":339591,"cell":[2.24,"339,591","50","16300072","Lord mercedes9pd7e","","0","mercedes9pd7e",0]},
    {"id":341591,"cell":[3.61,"341,591","727714","16330552","Lord Torkan","","0","Rizane",0]},
    {"id":341592,"cell":[4.24,"341,592","490","10929616","Lord pulpfiction","","0","pietra",0]}
] 
```

我真正需要的唯一事情是能够按部分加载数据，并且在每次添加数据后都会显示网格数据。一个工作寻呼机将是一个奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:12:19.447

您的问题是您选择了非常奇特的数据格式。本地数据的默认格式表示是具有命名属性的对象数组。数组项中的其他属性是预期的`id`。您使用另一种格式，因此您必须添加描述数据格式的[localReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#array_data)参数

[演示](http://www.ok-soft-gmbh.com/jqGrid/GMO.htm)

![在此处输入图像描述](../Images/91eed9f2a279a27fba4da828f25eadbf.png)

使用您发布的相同网格。我刚刚添加

```
localReader: {repeatitems: true} 
```

并删除了您未发布的代码的所有格式化程序。填充网格的最佳方法是对`data`输入数据使用选项。我添加`height: "auto"`只是为了更好地查看网格。所以你会看到

# haskell - 数字类型的自动强制

> ID：10216902
> 
> 赞同：1
> 
> 时间：2012-04-18T19:50:04.920
> 
> 标签：haskell

我有一个类型

```
data Value = Int Integer
           | Float Double
           | Complex (Complex Double)
           | ... (other, non-numeric types) 
```

具有关联错误类型

```
data ValueError = TypeMismatch Value | ... (other constructors)

type ThrowsError = Either ValueError 
```

我想在该类型上实现通用二进制操作，自动强制转换为层次结构中的最高类型，并在其中一个操作数不是数字类型（即函数）的情况下发出错误信号

```
binaryOp :: Num a => (a -> a -> a) -> Value -> Value -> ThrowsError Value 
```

这样我就可以写，例如，

```
(binaryOp (+)) (Int 1) (Int 1)      ==> Right (Int 2)
(binaryOp (+)) (Int 1) (Float 1.0)  ==> Right (Float 2.0)
(binaryOp (+)) (Int 1) (String "1") ==> Left (TypeMismatch (String "1")) 
```

有没有一种简单的方法可以做到这一点？我的第一个想法是定义类似

```
data NumType = IntType | FloatType | ComplexType 
```

连同功能

```
typeOf :: Value -> NumType
typeOf (Int _) = IntType
...

promote :: Value -> Value
promote (Int n)   = Float (fromInteger n)
promote (Float n) = Complex (n :+ 0) 
```

但我很难让它发挥作用。有什么建议吗？

* * *

多一点上下文。我正在编写一个 Scheme 解释器，我想实现 Scheme [numeric tower](http://en.wikipedia.org/wiki/Numerical_tower)。

事实上，我想要实现比我解释的稍微复杂一些的东西，因为我想要一些适用于任意数量的参数的东西，沿着

```
binaryOp :: Num a => (a -> a -> a) -> [Value] -> ThrowsError Value 
```

这将用 实现`foldl1`，但我觉得如果我能解决更简单的问题，那么我将能够解决这个更复杂的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:10:23.067

像这样的东西：

```
data NumType = IntType | FloatType | ComplexType | NotANumType
  deriving (Eq, Ord)

binaryOp :: (forall a. Num a => a -> a -> a) -> Number -> Number -> ThrowsError Number
binaryOp op x y
   = case typeOf x `max` typeOf y of
          ComplexType -> Complex (asComplex x `op` asComplex y)
          ... 
```

我认为您将需要启用 Rank2Types 扩展名（插入`{-# LANGUAGE Rank2Types #-}`源文件顶部）以正确说明 的类型`binaryOp`，我不确定我的语法是否正确......

的类型`binaryOp`比你想象的要复杂，因为它`binaryOp`选择`a`调用的时候是什么`op`。你写的内容会让`binaryOp`'s caller 选择什么`a`是你想要的，这不是你想要的。

# c# - 为什么我应该使用 Enum Int32 而不是字节的基础类型？

> ID：10216910
> 
> 赞同：56
> 
> 时间：2012-04-18T19:50:34.057
> 
> 标签：c#, .net, enums

给定以下枚举：

```
public enum Operations_PerHourType : byte
{
    Holes = 1,
    Pieces = 2,
    Sheets = 3,
    Strips = 4,
    Studs = 5
} 
```

当我运行 Microsoft 代码分析工具时，它告诉我：

> CA1028：Microsoft.Design：如果可能，将基础类型设为“Enums.Operations_PerHourType”System.Int32 而不是“byte”。

它永远不会有超过几个可能的值，所以我将它声明为一个字节。为什么他们会推荐使用 int32？未来可扩展性的更多价值？还是有性能提升？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-18T19:52:59.270

看看[MSDN](http://msdn.microsoft.com/en-us/library/ms182147%28v=vs.100%29.aspx)上的原因。

这是一段摘录：

> 枚举是一种值类型，它定义了一组相关的命名常量。默认情况下，System.Int32 数据类型用于存储常量值。即使您可以更改此基础类型，但在大多数情况下都不需要也不建议这样做。请注意，使用小于 Int32 的数据类型不会获得显着的性能提升。如果不能使用默认数据类型，则应使用符合公共语言系统 (CLS) 的整数类型之一，Byte、Int16、Int32 或 Int64，以确保枚举的所有值都可以以符合 CLS 的方式表示编程语言。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-18T21:23:03.693

在某些特定情况下，缩小底层类型会带来一些优势，例如与非托管代码接口时与性能相关或强制特定内存布局。

考虑这个样本：

```
using System;

public enum Operations_PerHourType //   : byte
{
    Holes = 1,
    Pieces = 2,
    Sheets = 3,
    Strips = 4,
    Studs = 5
}

class Program
{
    static void Main()
    {
        long before = GC.GetTotalMemory(false);
        var enums = new Operations_PerHourType[10000];
        long after = GC.GetTotalMemory(false);

        Console.WriteLine(after - before);
        // output  (byte): 12218 (I'm using Mono 2.8)
        // output (Int32): 40960
    }
} 
```

此代码消耗大约 40 KB 的堆。现在指定（取消注释）底层类型`byte`并重新编译。哇。突然间，我们只需要大约 10 KB。

像这样压缩内存有时可能会使程序变慢，而不是更快，这取决于特定的访问模式和数据大小。除了进行一些测量并尝试推广到其他可能的情况外，没有办法确定。较小数据的顺序遍历通常更快。

然而，仅仅因为它通常是可能的并且有时是关键的而养成指定窄类型的习惯并不是一个好主意。由于周围更广泛的数据类型的内存对齐，内存节省很少实现。由于需要额外的指令来屏蔽填充字节，因此性能要么相同，要么稍差。

正如另一个答案已经说得很好，跟随`Int32`运行时优化的人群，直到您必须开始分析和解决应用程序中的实际内存消耗。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-04-18T19:53:06.587

根据文档，使用字节而不是 INT32 不会提高性能。除非有理由这样做，否则他们建议不要更改它。基本思想是 .NET 针对在许多场景中使用 INT32 进行了优化，他们选择它作为枚举是有原因的。通过更改它，您不会在您的场景中得到任何东西，所以为什么要麻烦。

[http://msdn.microsoft.com/en-us/library/ms182147.aspx](http://msdn.microsoft.com/en-us/library/ms182147.aspx)

这还讨论了如何优化 .NET 以使用 32 位整数：[.NET Optimized Int32](https://stackoverflow.com/questions/530690/net-optimized-int32)

# sed - 使用 sed 复制时重新格式化日期列

> ID：10216911
> 
> 赞同：0
> 
> 时间：2012-04-18T19:50:35.387
> 
> 标签：sed

我需要将 .csv 文件从一个目录复制到另一个目录，这样做时需要重新格式化第一列，即日期列，从 13/04/2012 到 2012-04-13。执行这个简单转换的 sed 语法是什么？我对我在网上阅读的 sed 内容感到非常困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:17:07.203

你试过什么了？您可以从像这样的小东西作为测试用例开始：

```
echo "13/04/2012;Col2;Col3" | sed -E 's#^([^/]+)/([^/]+)/([0-9]+)(.*)#\3-\2-\1\4#'

s           = substitution command
#           = start of pattern
^           = start of line
([^/]+)/    = group of all non-/-characters followed by a / (day)
([^/]+)/    = group of all non-/-characters followed by a / (month)
([0-9]+)    = group of at least one digit (year)
(.*)        = rest of line
#           = start of replacement
\3          = backward reference to capture of third group (year)
\2          = backward reference to capture of second group (month)
\1          = backward reference to capture of first group (day)
\4          = backward reference to capture of fourth group (rest of line)
# end of command 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:20:46.093

```
sed 's|^\([0-9]\+\)/\([0-9]\+\)/\([0-9]\+\)|\3-\2-\1|' 
```

这从行首 ( `^`) 开始，记录 ( `\(...\)`) 一个或多个 ( `\+`) 数字 ( `[0-9]`)，后跟一个斜线 ( `/`)，第二组后跟另一个斜线，第三组，并重新排列记录的组 ( `\1,\2,\3`)用破折号分隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T22:17:36.027

这可能对您有用：

```
sed 's/^\(..\).\(..\).\(....\)/\3-\2-\1/' file 
```

# vim - 在 Vim 的 NERDTree 窗口中防止某些命令映射

> ID：10216917
> 
> 赞同：3
> 
> 时间：2012-04-18T19:50:47.757
> 
> 标签：vim, nerdtree

我的`.vimrc`文件中映射了以下键：

```
noremap <silent> <C-h> :bprev<CR>
noremap <silent> <C-l> :bnext<CR> 
```

它们执行的命令由[buftabs 脚本](http://www.vim.org/scripts/script.php?script_id=1664)提供。

我想做的是防止在 NERDTree 拆分时执行这些键映射。这样做的原因是，如果在 NERDTree 中运行命令，则会在拆分中加载文件缓冲区。然后，要修复它，需要关闭并再次打开窗口。

这是[另一个](https://stackoverflow.com/questions/3514172/prevent-opening-files-inside-nerdtree-or-minibuffexplorer)问题中解释的类似问题，但是通过配置插件解决了该问题，而 buftabs 脚本没有这样的选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T03:35:47.207

为了禁用某些缓冲区中的映射，可以为相同的键序列定义缓冲区本地映射，用无操作覆盖原始映射：

```
:autocmd FileType nerdtree noremap <buffer> <c-h> <nop>
:autocmd FileType nerdtree noremap <buffer> <c-l> <nop> 
```

（有关`:help :map-arguments`和`:help <nop>`的详细信息 `<buffer>`，请`<nop>`分别参见 和。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-17T22:42:08.070

我通过查看 ib. 的解决方案更新了我的 vimrc。

```
autocmd FileType nerdtree noremap <buffer> <A-PageDown> <ESC>:wincmd w <bar> bnext<CR>
autocmd FileType nerdtree noremap <buffer> <A-PageUp> <ESC>:wincmd w <bar> bprevious<CR> 
```

它返回上一个窗口并执行命令。

# android - 在Android中以压缩形式将位图加载到内存中

> ID：10216918
> 
> 赞同：0
> 
> 时间：2012-04-18T19:50:49.163
> 
> 标签：android, bitmap, image-compression

我过去曾编写过一个 Android 游戏，但总是遇到内存问题，因为我的图像非常大~（每个 1000x400 像素）。我现在想知道是否有必要将图像仅作为位图加载到内存中。是否有任何理由不以某种无损压缩格式加载位图？

我对图像压缩/解压缩效率一无所知，但我认为会有性能问题。但是我觉得“简单”的压缩算法似乎不能太占用处理器资源，即使它们只将图像减少到未压缩内存占用的一半。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:18:43.920

问题是在某种程度上你必须有图像的逐像素表示，因此你**必须**有一个位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:53:36.050

最好的解决方案是切换到 OpenGL 可以使用的压缩图形类型，正如 gamedev.stackexchange.com 上的 thsi 问题所回答的那样：

[https://gamedev.stackexchange.com/a/28463/8126](https://gamedev.stackexchange.com/a/28463/8126)

不幸的是，我没有使用 OpenGL 的经验。

# c++ - 解析字符串，其中“分隔符”可以是数据的一部分？

> ID：10216924
> 
> 赞同：1
> 
> 时间：2012-04-18T19:51:20.440
> 
> 标签：c++, string, parsing, std

我有像这样的标准字符串：

用户名：留言

乍一看，这似乎是一个简单的问题，但这个问题在于名称的最后一个字符可能是“：”，而字符串中消息部分的第一个字母也可能是“：”。用户的名字中也可以有空格。

所以一个用户可能是名字'一些名字：'并且可能输入一条消息'：你好'

看起来像：'一些名字:::你好'

我确实有用户名列表（向量）。

鉴于此，有没有办法从这种字符串中提取用户名？（理想情况下无需遍历用户列表）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:56:36.337

尝试[像](http://en.wikipedia.org/wiki/Regular_expression)`(\w+?):\ \w+`. _

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:58:34.780

如果您不能保证用户名不包含“：”字符，并且您希望避免每次检查时都迭代整个列表，您可以尝试使用快捷方式。

只保留包含特殊字符的用户名的向量（我想这是所有用户名的一小部分）。首先检查这些，如果找到匹配项，请获取 [username]: 之后的字符串。否则，您可以简单地对冒号进行简单的拆分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:58:40.373

我会使用字符串标记

```
string text = "token, test   string";

char_separator<char> sep(":");
tokenizer< char_separator<char> > tokens(text, sep);
BOOST_FOREACH(string t, tokens)
{
    cout << t << "." << endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:59:43.937

我解决这个问题的方法是简单地找到第一个冒号。在那里拆分字符串，然后修剪剩余的两个字符串。

我并不完全清楚为什么会有额外的冒号以及它们是否是值的一部分。如果需要删除它们，那么您还需要将它们剥离。

# c++ - 在内部扬声器上播放声音和使用旧 xp api 功能的可能性？

> ID：10216931
> 
> 赞同：1
> 
> 时间：2012-04-18T19:51:38.537
> 
> 标签：c++, windows, audio, windows-7, beep

在 windows vista 发布后，Windows 功能蜂鸣器会在您连接的扬声器上播放[蜂鸣](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679277%28v=vs.85%29.aspx)声，而不是内部扬声器。

反正有没有访问旧功能？是否可以通过使用较旧的 Windows api 来实现？或者有没有其他方法可以让这成为可能？如果是这样，我希望能够设置频率和持续时间。

我应该提一下，我实际上是针对 windows xp 平台的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T20:05:54.333

否。该函数在 Kernel32.dll 中实现，它在运行时从您当前运行的任何版本的操作系统加载。由于代码不存在于您的可执行文件或系统 DLL 中，因此您无法运行它（甚至不要考虑从不同的操作系统版本复制 Kernel32.dll，这只是在找麻烦）。

您可以尝试使用[`MessageBeep`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680356%28v=vs.85%29.aspx)而不是`Beep`，但这使您对输出的控制较少，并且可能仍会使用您的声卡而不是内部

有关该`MessageBeep`函数的有趣历史，请参阅[Larry Osterman 的博客](http://blogs.msdn.com/b/larryosterman/archive/2010/01/04/what-s-up-with-the-beep-driver-in-windows-7.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:04:37.943

大多数计算机现在没有内置扬声器，因此没有任何东西可以访问。

根据[Larry Osterman 的博客](http://blogs.msdn.com/b/larryosterman/)，该功能在 Windows 7 中被有意删除；档案中的[这篇文章专门讨论了这个问题。](http://blogs.msdn.com/b/larryosterman/archive/2010/01/04/what-s-up-with-the-beep-driver-in-windows-7.aspx)似乎已将`Beep.sys`其删除，并且旧的伪设备驱动程序的功能已更改为故意将声音重定向到声卡。从历史的角度来看，这篇文章很有趣。

Larry 是一名 MS 员工，他为 Vista 和 Win7 开发新的音频框架，他从恐龙时代就一直在 MS（至少是 MS-DOS：D）所以他可能知道。:)

# javascript - 检查文本字段值长度

> ID：10216933
> 
> 赞同：5
> 
> 时间：2012-04-18T19:51:58.057
> 
> 标签：javascript

我正在尝试查看文本字段长度是否至少为一定长度。这是我的代码：

```
<form name="form2" id="form2" onsubmit="return validate()">
length 4: <input type="text" name = "t" id="t" />
<input type="button" name="submit" value="submit" />
</form>

<script>
function validate() {
    document.write("good");
    submitFlag = true;
    if(document.form2.t.value.length!=4){
        submitFlag=false;
        alert("ivalid length - 4 characters needed!");
    }
    return submitFlag;
}
</script> 
```

当我单击提交时，没有任何反应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:56:12.123

将提交按钮更改为 type="submit"。该表单永远不会被提交，因此不会调用 validate 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:58:32.307

输入类型需要是“提交”

```
<form name="form2" id="form2" onsubmit="return validate()">
   length 4: <input type="text" name = "t" id="t" />
    <input type="submit" name="submit" value="submit" />  <!--INPUT TYPE MUST BE SUBMIT -->
    </form>

    <script>
    function validate() {
        document.write("good");
        submitFlag = true;
        if(document.form2.t.value.length!=4){
            submitFlag=false;
            alert("ivalid length - 4 characters needed!");
        }
        return submitFlag;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:01:34.607

您还应该在文本输入中添加一个 maxlength 属性，这将对用户有所帮助。

```
<form name="form2" id="form2" onsubmit="return validate();">
    <input type="text" name="t" id="t" maxlength="4"/>
    <input type="submit" name="submit" value="submit"/>
</form>

<script type="text/javascript">
    function validate()
    {
        if ( document.getElementById("t").value.length != 4 )
        {
            alert( "Invalid length, must be 4 characters" );
            return false;
        }   
        return true;
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:55:25.710

如果您想要“至少一定长度”，您可能想要大于或等于 (>=)，而不是不等于 (!=)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T19:56:31.670

你的按钮应该是

```
<input type="submit" name="submit" value="submit" /> 
```

否则`onsubmit`事件不会发生。此外，`console.log()`用于调试，而不是`document.write()`.

*   [**演示**](http://jsfiddle.net/paislee/GHqmV/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T19:56:45.023

我发现了各种错误：

*   不要使用`document.write()`，它会覆盖当前打开的文档
*   `form2`不是 的财产`document`。您可以使用`document.forms.form2`，但`document.getElementById("t")`这里更简单
*   您的表达式不检查“至少 4”，它检查“正好 4”。
*   您的按钮不会提交任何内容。将其更改为`<button type="submit">`或`<input type="submit" />`
*   您可以为输入指定一个[`pattern=".{4}"`](http://www.w3.org/TR/2011/WD-html5-20110525/common-input-element-attributes.html#the-pattern-attribute)或给它一个`required`属性

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T19:58:20.550

你有几个问题。1）您需要将您的输入设置为提交按钮，2）您需要删除您的`document.write()`声明。将您的代码更改为以下内容（[或查看此 jsFiddle](http://jsfiddle.net/r6Hnq/)）：

```
<form name="form2" id="form2" onsubmit="return validate()">
length 4: <input type="text" name = "t" id="t" />
<input type="submit" name="submit" value="submit" />
</form>

<script>
function validate() {
    submitFlag = true;
    if(document.form2.t.value.length!=4){
        submitFlag=false;
        alert("ivalid length - 4 characters needed!");
    }
    return submitFlag;
}
</script>​​​​ 
```

您非常接近，但是您可以对该代码进行一些清理（注意：我没有提供任何内容）。

# android - 如何创建像您在一些 Android 应用程序和 ICS 中看到的帮助叠加层？

> ID：10216937
> 
> 赞同：94
> 
> 时间：2012-04-18T19:52:13.917
> 
> 标签：android

我想创建帮助覆盖，就像您在第一次加载 ICS 时看到的那样，或者在 ES File Explorer 或 Apex Launcher 等应用程序中看到的那样（还有更多，但我现在想不起来）。这只是一种相对布局，一个视图位于另一个视图之上吗？我还没有找到任何示例代码来做这样的事情。有人知道这是如何完成的或有任何想法吗？

![ES 文件资源管理器](../Images/441784ca5ff40d9b826f8db7368336b9.png) ![ES 文件资源管理器](../Images/10b808acb3e0d0306e545f1c5ac5fe5a.png)

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-18T19:59:34.357

假设您通常会调用`setContentView(R.layout.main)`，但在第一次运行时，您希望拥有此叠加层。

步骤 #1：在 Java 代码中创建一个`FrameLayout`并将其传递给`setContentView()`.

步骤#2：使用`LayoutInflater`充气`R.layout.main`到`FrameLayout`.

第 3 步：用于`LayoutInflater`将叠加层膨胀到`FrameLayout`.

步骤#4：当用户点击按钮（或其他）以关闭覆盖时，调用`removeView()`以从`FrameLayout`.

由于叠加层是 的后一个子级`FrameLayout`，它会浮在 的内容之上`R.layout.main`。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-06-13T15:49:08.073

“教练标记”是 UX 谈话中的“帮助覆盖”:-)

**coach_mark.xml**是您的教练标记布局

**coach_mark_master_view**是coach_mark.xml 中最顶层视图（根）的**ID**

```
public void onCoachMark(){

    final Dialog dialog = new Dialog(this);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
    dialog.setContentView(R.layout.coach_mark);
    dialog.setCanceledOnTouchOutside(true);
    //for dismissing anywhere you touch
    View masterView = dialog.findViewById(R.id.coach_mark_master_view);
    masterView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            dialog.dismiss();
        }
    });
    dialog.show();
} 
```

添加coach_mark.xml 的示例（Oded Breiner 给出的这个优秀的解决方案），这样用户可以很容易地复制和粘贴以快速查看工作示例。

此处为 coach_mark.xml 示例，将 -> drawable/coach_marks 更改为您的图像：

**教练标记.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@+id/coach_mark_master_view">
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
         <ImageView
             android:id="@+id/coach_marks_image"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
             android:layout_centerInParent="true"
             android:layout_gravity="center_horizontal"
             android:src="@drawable/coach_marks" />
    </RelativeLayout>
</LinearLayout> 
```

并且可以选择使用这个主题来删除填充：

```
<style name="WalkthroughTheme" parent="Theme.AppCompat">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T19:59:00.640

你可以很快做到这一点。例如，您添加了一个 LinearLayout，您可以在其中放置一张带有 alpha 的图片，该图片对应于您的帮助信息以及您想要像叠加层一样绘制什么。在您的活动的 xml 中，您将此布局放在具有“消失”可见性的活动布局之后的 RelativeLayout 中。当您想绘制帮助信息时，您只需要将这个可见性设置为可见。

我希望，我很清楚，如果您有任何问题，我很乐意回答他们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T19:03:09.273

请参阅我的另一个答案，如何以编程方式在当前活动之上显示覆盖布局。Activity 的 layout.xml 不需要知道关于覆盖皮肤的任何信息。您可以将覆盖半透明，仅覆盖屏幕的一部分，一个或多个文本视图和按钮...... [如何以编程方式覆盖按钮？](https://stackoverflow.com/questions/3983632/how-to-overlay-a-button-programmically/14248874#14248874)

*   创建 res/layout/paused.xml RelativeLayout 模板或使用任何布局顶层
*   创建一个函数来显示覆盖皮肤
*   关键是获取 layout.xml 的句柄，使用 LayoutInflater 类解析 xml 以查看对象，将叠加视图添加到当前布局结构
*   我的示例使用计时器通过将覆盖对象从视图结构中完全删除来销毁它。这可能也是你想要摆脱它而不留痕迹的东西。

我的目标是主要活动不知道任何覆盖皮肤，覆盖来来去去，许多不同的覆盖，仍然能够使用 overlay1.xml 文本文件作为模板，并且应该以编程方式更新内容。我所做的几乎都是 CommonsWare 告诉我们的，我的帖子显示了开始使用的实际程序代码。

*免责声明：OP“感谢您的输入。这就是我想象的完成方式。我必须感谢下面的答案”评论并不意味着我的答案，而是 CommonsWare 的答案。Stackoverflow 已更改发布顺序。*

# android - Android Zxing 将方向更改为纵向

> ID：10216943
> 
> 赞同：48
> 
> 时间：2012-04-18T19:52:43.207
> 
> 标签：android, zxing

在阅读了一些关于该问题的问题和帖子后，我正在尝试旋转 Zxing 显示器。按照说明操作后，显示器确实旋转了，但扫描仪的矩形未按应有的位置定位（如所附图像所示）。

这就是我所做的：

1.  在 CameraConfigurationManager 中：

    ```
    camera.setDisplayOrientation(90); 
    ```

2.  在解码处理程序.java

    ```
    byte[] rotatedData = new byte[data.length];
        for (int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++)
                 rotatedData[x * height + height - y - 1] = data[x + y * width];
         }
    int tmp = width;         
    width = height;
    height = tmp; 
    ```

3.  在 CameraManager.java 中：

    ```
    rect.left = rect.left * cameraResolution.y / screenResolution.x;
    rect.right = rect.right * cameraResolution.y / screenResolution.x;
    rect.top = rect.top * cameraResolution.x / screenResolution.y;
    rect.bottom = rect.bottom * cameraResolution.x / screenResolution.y; 
    ```

![在此处输入图像描述](../Images/e4cabab850a7c4a52c98c062e0451e4b.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-18T22:47:13.447

经过一番挣扎，我发现了问题所在，我希望它对将来的人有所帮助。

在`initFromCameraParameters`方法中`CameraConfigurationManager`有一个假设，即扫描是`ALWAYS in landscape mode`，因此修复时`width < height`。如果您按照问题中的步骤并删除此检查，则它可以正常工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-05-31T12:24:50.333

**从 zxing 库开始：2.2.0 对方向变化的支持是固有的**

在清单中添加/编辑以下内容：

```
<activity
    android:name="com.journeyapps.barcodescanner.CaptureActivity"
    android:screenOrientation="fullSensor"
    tools:replace="screenOrientation" /> 
```

在调用扫描仪时设置附加属性：

```
IntentIntegrator integrator = new IntentIntegrator(this);

//allows portrait/landscape mode
integrator.setOrientationLocked(false);//"additional property"
integrator.initiateScan(); 
```

参考链接：[https ://github.com/journeyapps/zxing-android-embedded#chang-the-orientation](https://github.com/journeyapps/zxing-android-embedded#changing-the-orientation)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-25T19:37:25.377

谢谢您的回答！！它真的对我有帮助，我注意到的一件事是，至少在 zxing 2.1 上，您需要将“rotatedData”传递给 buildLuminanceSource 而不仅仅是“data”，该行最终如下所示：

```
PlanarYUVLuminanceSource source = activity.getCameraManager().buildLuminanceSource(rotatedData, width, height); 
```

希望这对其他人有帮助！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-16T23:27:16.293

好吧，我在 ProjectLibrary（xzing 项目）中做了一个小改动，并且能够将方向横向更改为纵向

在`setDesiredCameraParameters method of class CameraConfigurationManager`添加

`camera.setDisplayOrientation(90);`

..在我原来的项目`AndroidManifest.xml`文件中。我设置`screenOrientation = portrait`并且它在我的 ICS 4.0.3 上运行良好

```
 <activity
        android:name="com.google.zxing.client.android.CaptureActivity"
        android:configChanges="orientation|keyboardHidden"
        android:exported="false"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
        <intent-filter>
            <action android:name="com.phonegap.plugins.barcodescanner.SCAN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-11T05:26:48.367

1.  在`CameraConfigurationManager`：

    ```
    camera.setDisplayOrientation(90); 
    ```

2.  在`DecodeHandler.java`：

    ```
    byte[] rotatedData = new byte[data.length];
    for (int y = 0; y < height; y++) {
        for (int x = 0; x < width; x++)
             rotatedData[x * height + height - y - 1] = data[x + y * width];
     }
    int tmp = width;         
    width = height;
    height = tmp; 
    ```

3.  在`CameraManager.java`：

    ```
    rect.left = rect.left * cameraResolution.y / screenResolution.x;
    rect.right = rect.right * cameraResolution.y / screenResolution.x;
    rect.top = rect.top * cameraResolution.x / screenResolution.y;
    rect.bottom = rect.bottom * cameraResolution.x / screenResolution.y; 
    ```

4.  在`CameraConfigurationManager`：

    ```
    if    (width > height) {
      Log.i(TAG, "Display reports portrait orientation; assuming this is incorrect");
      int temp = width;
      width = height;
      height = temp;
    } 
    ```

5.  在清单中更改`android:screenOrientation="portrait"`为。`CaptureActivity`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-18T20:23:14.547

我是条形码扫描仪的开发人员。是的，要让它以纵向模式扫描，需要的远不止这些。您必须“旋转”图像数据，并考虑设备的方向、默认方向和传感器方向。

[Barcode Scanner+以纵向模式扫描，您可以通过 Intent 与它集成，其方式](https://market.android.com/details?id=com.srowen.bs.android)[与与 Barcode Scanner 集成](http://code.google.com/p/zxing/wiki/ScanningViaIntent)的方式完全相同。（但它是一个付费应用程序。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-30T05:51:34.237

我尝试了其他答案中建议的各种补丁，但条形码识别仍然不可靠。

我强烈建议在纵向模式下使用下面的存储库。试试吧，它又快又稳定。我在我的混合应用程序中使用了它。

[https://github.com/Dbuggerx/BarcodeScanner](https://github.com/Dbuggerx/BarcodeScanner)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-14T17:04:28.113

试试这个：添加 `android:screenOrientation="sensorPortrait"`

```
<activity android:name=".CaptureActivity"
              android:screenOrientation="sensorPortrait"
              android:clearTaskOnLaunch="true"
              android:stateNotNeeded="true"
              android:theme="@style/CaptureTheme"
              android:windowSoftInputMode="stateAlwaysHidden" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-12T07:42:02.000

在您的库中转到清单文件，更改活动标记下的以下行

```
android:screenOrientation="portrait" 
```

# c++ - C++ 字符串成员构造

> ID：10216954
> 
> 赞同：1
> 
> 时间：2012-04-18T19:53:12.607
> 
> 标签：c++, string, constructor

如何将构造函数用于字符串成员？这是一个例子（我意识到这是错误的）

```
class Filestring {
public:
    string      sFile;

    Filestring(const string &path)
    {
        ifstream filestream(path.c_str());
        // How can I use the constructor for the member sFile??
        // I know this is wrong, but this illustrates what I want to do.
        string sFile((istreambuf_iterator<char>(filestream)), istreambuf_iterator<char>());
    }
}; 
```

所以基本上我希望能够在不进行字符串复制的情况下使用成员 sFile 的构造函数。有没有办法通过分配来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T20:05:49.440

你可以使用的最好的是`string::assign`：

```
sFile.assign(istreambuf_iterator<char>(filestream), istreambuf_iterator<char>()); 
```

但是在 C++11 中有一个用于字符串的移动赋值运算符，因此执行以下操作几乎同样有效（没有字符数据的副本，字符数据被移动）：

```
sFile = string(istreambuf_iterator<char>(filestream), istreambuf_iterator<char>()); 
```

当 C++11 移动赋值不可用时，另一个技巧是使用`std::swap`or `string::swap`。效率可能与移动分配变体几乎相同。

```
string newContent(istreambuf_iterator<char>(filestream), istreambuf_iterator<char>());
std::swap(sFile, newContent); // or sFile.swap(newContent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T20:12:05.500

一种方法是使 filestream 成为成员，因此可以在构造函数初始化列表中引用它：

```
class Filestring {
private:
    ifstream filestream;
public:
    string      sFile;

    Filestring(const string &path) : filestream(path.c_str()), sFile((istreambuf_iterator<char>(filestream)), istreambuf_iterator<char>())
    {}
}; 
```

为了使其正常工作，filestream 必须出现在 sFile 之前的类定义中，否则将无法及时初始化以在 sFile 构造函数中使用它。当然，您也增加了 Filestring 类的开销。

一种避免字符串复制开销的更安全技术是使用 string::swap()：

```
class Filestring {
public:
    string      sFile;

    Filestring(const std::string &path)
    {
        std::ifstream filestream(path.c_str());
        sFile.swap(string((istreambuf_iterator<char>(filestream)), istreambuf_iterator<char>()));
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:58:25.270

不是真的，如果你不初始化初始化列表中的成员，你一定会做一个副本，在你的情况下这似乎是不可能的。

请注意，您的代码不会初始化成员，而是创建一个新的局部变量。

正确的方法是

```
sFile = std::string((istreambuf_iterator<char>(filestream)), istreambuf_iterator<char>()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T20:05:00.583

你能行的。
但它不值得额外的复杂性。如果你想避免复制的成本（一个体面的编译器可能会这样做）。您可以将其加载到临时文件中，然后使用 std::swap()。

我会做：

```
class Filestring {
public:
    string      sFile;

    Filestring(const string &path)
    {
        ifstream filestream(path.c_str());
        string data((istreambuf_iterator<char>(filestream)), istreambuf_iterator<char>());

        // Just swap the internal data structures:
        std::swap(sFile, data);
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T19:58:35.177

使用初始化列表：

```
Filestring(const string &path):sFile(/*what you're initializing with*/)
{//more
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T19:58:55.537

```
sFile.assign(constructor args); 
```

# proxy - 如何使用 ssh_config 的 ProxyCommand 和开瓶器来使用 Fabric？

> ID：10216955
> 
> 赞同：1
> 
> 时间：2012-04-18T19:53:15.570
> 
> 标签：proxy, ssh, firewall, fabric

我正在将站点部署到服务器，但我办公室的端口 22 被阻止。我现在可以使用`corkscrew`指令`ssh_config` `ProxyCommand`，一切正常，只需使用`$ ssh my_server_alias_in_sshconfig`.

现在我需要使用Fabric来简化部署，但是即使设置`env.use_ssh_config=True`它也不起作用，它只是查找服务器的IP地址并尝试直接连接，忽略`ProxyCommand`和其他一切。Fabric 文档说它利用了一些可用的配置设置，但是如果不使用`ProxyCommand`，Fabric 在这里似乎没用。

有什么帮助吗？

我得到了这个[要点](https://gist.github.com/856179)，但我认为它不能解决这个`ProxyCommand`要求。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:26:52.100

更好的解决方法，但仍不完美：

```
Host somebox
    ControlMaster auto
    ControlPath ~/.ssh/socket/%r@%h:%p 
```

然后`$ ssh somebox`首先让它保持打开状态，然后`$ fab -H somebox deploy`流量将通过袜子，因此它会尊重 ProxyCommand。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:06:07.997

目前，我设置了一个`LocalForward`指令，如：

```
Host my_server_using_corkscrew
    ProxyCommand ...
    ...
    LocalForward 1122 localhost:22 
```

以及以下：

```
Host my_server_using_corkscrew.localtunnel
    Hostname localhost
    Port 1122 
```

然后，使用以下命令运行 Fabric：

```
$ fab my_deploy_command --hosts=my_server_using_corkscrew.localtunnel 
```

这有两个不便之处：

*   我需要先启动“隧道”`$ ssh my_server_using_corkscrew`并让它保持打开状态。
*   在 fabfile 中，主机名始终为`localhost`，因此在一次部署到多个服务器时可能会出现问题。

我正在使用这个时间，但是，这可以改进吗？

# jquery - (Gallerific) 用于分页的页码和箭头的样式和位置

> ID：10216961
> 
> 赞同：0
> 
> 时间：2012-04-18T19:53:45.383
> 
> 标签：jquery, image, gallery, pagination

我想将分页编号和“上一个”和“下一个”链接从导航块 div 移动到它们自己单独的 div。
我当前的导航 div 宽度只有 105 像素，当我超过 3 页时，这些项目的样式会变得拥挤，并且它们会相互重叠显示。
我希望分页在主幻灯片图像下方水平地放在一行上。
我也可以用箭头（gifs？）替换“下一个”和“上一个”链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:27:47.670

我也很好奇如何达到页码，但至少我发现了如何轻松地将 gif 设置为上一页/下一页控件：

```
nextPageLinkText:  "<img src='http://www.your_next.gif'>",
prevPageLinkText:  "<img src='http://www.your_prev.gif'>", 
```

如果您了解页码，我很想收到您的来信。

最佳JP

# iphone - MPMoviePlayerViewController 无法播放 mp4 文件

> ID：10216964
> 
> 赞同：2
> 
> 时间：2012-04-18T19:53:52.653
> 
> 标签：iphone, mp4, mpmovieplayer

我正在开发一个测试应用程序，它将运行来自互联网的 mp4 文件。代码是：

```
-(IBAction)playRemoteVideo
{

    NSString *mp4File = @"http://archive.org/download/Pbtestfilemp4videotestmp4/video_test_512kb.mp4";

    MPMoviePlayerViewController *playerController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:mp4File]];
    [self presentMoviePlayerViewControllerAnimated:playerController];
    playerController.moviePlayer.movieSourceType=MPMovieSourceTypeStreaming;

    [playerController.moviePlayer play];
    [playerController release];
    playerController=nil;
} 
```

当我运行应用程序并播放视频时，播放器会尝试加载视频一段时间，但在控制台上出现此异常后

```
2012-04-18 22:45:11.309 VideoPlayer[891:207] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'An AVPlayerItem can occupy only one position in a player's queue at a time.'
*** First throw call stack:
(0x1df1052 0x1333d0a 0x27cfb31 0x27cbb2a 0x27e45cc 0x103b73 0xd4e6a 0x2ff2445 0x2ff44f0 0x1d28833 0x1d27db4 0x1d27ccb 0x16d8879 0x16d893e 0x24ea9b 0x1d12 0x1c85)
terminate called throwing an exception(gdb) 
```

例如，如果我使用 m3u8 文件执行相同的代码；

```
http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8 
```

我可以让视频运行，但同样不适用于 mp4 文件。

你知道为什么我得到这个异常以及我的代码有什么问题吗？

我在 Iphone 模拟器上运行应用程序，我有 XCode 4.2 Best Regards Tugrul

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T20:53:38.597

像这样设置电影播放器​​的控制风格。

```
[self.mPlayer.moviePlayer setControlStyle:MPMovieControlStyleDefault]; 
```

此外，本地文件具有 MPMovieSourceTypeFile，而不是 MPMovieSourceTypeStreaming 属性集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:25:30.057

另一种可能发生这种情况的情况是，正如日志非常有帮助地告诉您的那样，“一个 AVPlayerItem 一次只能占据玩家队列中的一个位置”。基本上，当您尝试让两个视频同时开始播放时，或者甚至同时与两个视频/MPMoviePlayerController 对象进行交互时。

在我的应用程序中，我使用两个 MPMoviePlayerController 并不断交换它们，为用户创造在不同视频之间无限移动和交换的错觉。

到目前为止，这一切正常，但我最近为一些应该导致视频暂停和恢复的事件添加了通知。但是我没有意识到我的两个播放器对象都在同时收听通知，因此试图同时触发“暂停”或“播放”。这导致框架认为我正在尝试同时播放多个视频，并抛出此异常。

我现在所要做的就是确保在任何给定点上只有一个玩家对象在收听通知。只是我的应用程序逻辑中的一个小调整。

因此，如果您遇到奇怪的错误，不一定是有问题的框架、一心想让您的生活陷入困境的恶意操作系统或上帝的行为。它可能只是纯粹的、好的老式坏代码。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:53:04.557

我知道这个错误。在此处尝试此代码。

```
 MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: url];
    self.movieController = player;
    self.movieController.fullscreen = YES;
    self.movieController.controlStyle = MPMovieControlStyleDefault;

    // Register to receive a notification when the movie has finished playing.  
    [[NSNotificationCenter defaultCenter] addObserver:self  
                                             selector:@selector(moviePlayBackDidFinish:)  
                                                 name:MPMoviePlayerPlaybackDidFinishNotification  
                                               object:self.movieController];  
    // Register to receive a notification when the movie has finished playing.  
    [[NSNotificationCenter defaultCenter] addObserver:self  
                                             selector:@selector(moviePlayBackDidFinish:)  
                                                 name:MPMoviePlayerDidExitFullscreenNotification
                                               object:self.movieController];  
    [self.movieController prepareToPlay];
    [self.movieController.view setFrame: self.view.bounds];  // player's frame must match parent's
    [self.view addSubview: self.movieController.view];

    // ...
    [self.movieController play]; 
```

# objective-c - 为什么这个动态生成的 HTML 没有显示在 UIWebView 中？

> ID：10216973
> 
> 赞同：0
> 
> 时间：2012-04-18T19:54:19.783
> 
> 标签：objective-c, ios

我有在我的应用程序中生成的 HTML。我知道它是有效的，因为我通过 W3Schools “编辑并尝试”运行它。它的性能完全符合我的设计。

这是头文件中网站的定义：

```
@interface ReportViewController : UIViewController <UIWebViewDelegate>  {
    IBOutlet UIWebView *reportWebView;
}

@property (nonatomic, retain) UIWebView *reportWebView;
@property (nonatomic, retain) NSMutableString *html;

- (void) generateReport;
- (void) Alert: (NSString *) title andData: (NSString *) errorMsg; 

@end 
```

这是我完成创建 HTML 并尝试显示它的地方：

```
 //  now do the table
        [html appendString:@"<div><table border class=\"boldtable\">" 
        "<tr BGCOLOR=\"ADDAFE\">" 
        "<th>STA&nbsp;</th><th>BS&nbsp;</th><th>HI&nbsp;</th><th>FS&nbsp;</th><th>ELEV&nbsp;</th><th>Desc</th>" 
        "</tr><p>"];
    }    

    //  finally, end the table, etc.
    [html appendString:@"</table></div></body></html>"];

 //   UIWebView *reportWebView = [[UIWebView alloc] init];
    //[reportWebView loadHTMLString: html baseURL:nil];
    [self.reportWebView loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];
} 
```

如您所见，我尝试了几种不同的显示 HTML 字符串的变体。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:56:31.680

~~尤利乌斯·凯撒~~Jacques Cousteau[在评论中](https://stackoverflow.com/questions/10216973/why-is-this-dynamically-generated-html-not-being-displayed-in-a-uiwebview/10285709#comment13124192_10216973)给出了正确答案：

> `reportWebView`是`IBOutlet`，表示它是在 xib 中创建的。插座是否连接？笔尖是否已加载？注释掉的内容是`UIWebView *reportWebView = [[UIWebView alloc] init];`什么？这是您的确切代码吗？您是否正在创建一个`reportWebView`隐藏 ivar 的局部变量？

但从未回来设置它，因此我为他回答了它。

# c# - 2 WCF 服务和 c# 线程

> ID：10216976
> 
> 赞同：2
> 
> 时间：2012-04-18T19:54:23.923
> 
> 标签：c#, .net, multithreading, wcf, parallel-processing

我正在尝试编写尽可能快速可靠地导入大量数据的代码。使用线程，我已经能够加快我在本地机器上编写的导入代码的速度，但是当我在远程服务器上运行它时，它似乎有一些 WCF 问题......

我有两个 WCF 服务实现：Service1 和 Service2。

基本上这是工作流程：

```
Parallel.ForEach(objectData.Tables[0].Rows.Cast<DataRow>(), dataRow =>
{
...
    Service1.ImportObjectFirstPart(ObjectToEnter);
...
    Service2.ImportObjectSecondPart(ObjectToEnter);
} 
```

Service1 调用大约需要 3 秒，service2 需要大约 7 秒，无论是远程还是本地。然而，在我的本地机器上，对 service2 的调用在大约 20 次 service1 调用后开始。在服务器上，几乎每个 service1 调用都在第一个 service2 调用开始之前完成。（这两个服务都实现为 PerCall）。

调用服务的代码按预期使用 99% 的 CPU 一段时间，然后慢到爬行，然后我必须自己退出它。知道可能出了什么问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:16:39.837

你有没有尝试过

[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]

你可以在这里阅读详细信息

[http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.concurrencymode.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.concurrencymode.aspx)

默认是单一的，所以你应该期望你得到的行为是非常合理的。

# wpf - WPF 菜单选项卡导航

> ID：10216980
> 
> 赞同：2
> 
> 时间：2012-04-18T19:54:53.950
> 
> 标签：wpf, keyboard-navigation

我有一个菜单视图：

```
<Menu IsTabStop="False">
    <MenuItem
        Header="_File"
        IsTabStop="True">
        <MenuItem
            Header="New / Start Over"
            IsTabStop="True"
            InputGestureText="Ctrl+N"
            Command="{x:Static common:Commands.StartOverCommand}" />
        <Separator
            IsTabStop="False" />
        <MenuItem
            Header="Log Out"
            IsTabStop="True"
            InputGestureText="F12"
            Click="LogoutMenuItem_Click" />
        <MenuItem
            Header="E_xit"
            IsTabStop="True"
            InputGestureText="Alt+F4"
            Click="ExitMenuItem_Click" />
    </MenuItem>
    <MenuItem
        Header="_Edit"
        IsTabStop="True">
        <MenuItem
            Header="Undo Edit Field"
            IsTabStop="True"
            InputGestureText="Ctrl+Z"
            Click="_undoMenuItem_Click" />
        <MenuItem
            Header="Redo Edit Field"
            IsTabStop="True"
            InputGestureText="Ctrl+Y"
            Click="_redoMenuItem_Click" />
    </MenuItem>
    <MenuItem
        Header="_Tools"
        IsTabStop="True">
        <MenuItem
            Header="Comments"
            IsTabStop="True"
            InputGestureText="Ctrl+M"
            Click="_commentsMenuItem_Click" />
    </MenuItem>
</Menu> 
```

我希望能够通过使用左右箭头键来浏览菜单（文件、编辑、工具），我可以通过制作这些`MenuItems IsTabStop="True"`. 但是自从我这样做后，我可以在循环浏览页面上的其他有效字段时切换到菜单。当我使用 Alt+F 将焦点放在文件菜单上时，我希望能够使用箭头键在 3 个菜单中循环，但我不想能够从页面中切换到这些菜单。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T21:17:30.567

使用[KeyboardNavigation.TabNavigation 附加属性](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardnavigation.tabnavigation.aspx)和菜单上的[KeyboardNavigationMode.None 。](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardnavigationmode.aspx)

```
<Menu KeyboardNavigation.TabNavigation="None"> 
```

# iphone - 获取介于 StartDate 和 EndDate 之间的日期

> ID：10216991
> 
> 赞同：2
> 
> 时间：2012-04-18T19:55:26.130
> 
> 标签：iphone, objective-c, ios, xcode4

我有日期数组，我只需要获取两个不同日期（开始日期和结束日期）之间的日期。

谁能帮我解决这个问题...在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T20:37:11.293

假设您有类型`startDate`的`endDate`实例，`NSDate`您可以：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(SELF > %@) AND (SELF < %@)", startDate, endDate];
NSArray *result = [arrayWithDates filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:00:36.680

签出`filterWithPredicate`，它允许您创建过滤规则以应用于数组中的所有元素。

# linux - 如何在makefile中仅打印输出而不是终端上的命令行？

> ID：10216995
> 
> 赞同：4
> 
> 时间：2012-04-18T19:55:34.680
> 
> 标签：linux, makefile

我想为我的makefile编写简单的“帮助”选项，但问题是例如；

```
all: 
   echo "help options.." 
```

当我`make`在终端上调用时，它会打印：

```
echo "help options.."
help options.. 
```

只能打印吗？：

```
help options.. 
```

我希望这对你来说很清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T20:19:10.037

在命令前加上'@'前缀，如：

```
target:
    @echo "help options.." 
```

GNU Make 有一个很好的[手册](https://www.gnu.org/software/make/manual/make.html#Echoing)来解释这一点。

# java - 智能使用bufferReader

> ID：10216996
> 
> 赞同：0
> 
> 时间：2012-04-18T19:55:43.340
> 
> 标签：java, design-patterns

我在java中有一些设计模式问题。我有以下方法

```
public HashMap<String, Integer> createFrequentVocabs(bufferedReader buffr1,bufferedReader buffr2,bufferedReader buffr3){
    BufferedReader = new BufferedReader(new FileReader(new File(file)));
    HashMap<String, Integer> hm1 = new HashMap<String, Integer>();
    HashMap<String, Integer> hm2 = new HashMap<String, Integer>();
    String strngArry = new String();
    hm1 = getValue1(buffr1);
    hm2 = getValue2(buffr2);
    strngArray = getValue3(buffr3);
    return hm;
} 
```

所有缓冲区都来自同一个文本文件。这看起来有点丑，我怎么让它有点漂亮。我想在方法中传递一次缓冲区，或者有什么方法可以传递文件路径并在方法本身内部创建缓冲区。任何形式的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:07:54.470

我不完全确定这种方法应该做什么。你能进一步详细说明吗？

但是，如果您只想减少此方法的方法参数数量并在内部创建 BufferedReaders，则一种可能性是传递 Path 对象数组。

作为旁注，如果您不需要任何底层具体对象的功能，则最好使用对象的接口而不是其具体实现。这允许您在需要时将实现交换为不同的东西，而无需更改您的方法与代码用户的合同。

例如，而不是写：

```
HashMap<String, Integer> hm1 = new HashMap<String, Integer>(); 
```

你会写：

```
Map<String, Integer> hm1 = new HashMap<String, Integer>(); 
```

或者，在 Java 7 中：

```
Map<String, Integer> hm1 = new HashMap<>(); 
```

有关此主题的更多信息，我强烈建议您阅读Josh Bloch 的[Effective Java](http://my.safaribooksonline.com/book/programming/java/9780137150021/classes-and-interfaces/ch04lev1sec6)。