# StackOverflow 问答 11024000-11024999

# python - Python：如何判断输入文件是否有输入待处理而不等待

> ID：11024003
> 
> 赞同：1
> 
> 时间：2012-06-13T22:04:59.033
> 
> 标签：python, python-2.7

通常，您在 Python 中使用如下循环逐行处理文件：

```
import sys
for s in sys.stdin:
    # do something with the line in s 
```

或者

```
import sys
while True:
    line = sys,stdin.readline()
    if len(line) == 0: break
    # process input line 
```

当然，你也可以像这样使用 raw_input()：

```
try:
    while True:
        s = raw_input()
        # process input line
except EOFError:
    # there's EOF. 
```

当然，在所有这些情况下，如果没有准备好读取的输入，则底层`read()`操作会暂停等待 I/O。

我想要做的是查看是否有输入挂起**而不**暂停，所以我可以阅读直到输入用尽，然后去做其他事情。也就是说，我希望能够做类似的事情

```
while "there is input pending":
    #get the input 
```

但是当没有更多的输入待处理时，打破循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:07:00.560

如果您使用的是 Unix 的某些变体，并且您的标准输入是管道而不是文件，则可以使用该[`select`模块](http://docs.python.org/library/select.html)检查是否有等待输入。至少，代码可能如下所示：

```
import select

rlist, wlist, elist = select.select([sys.stdin], [], [])
if rlist:
    s = raw_input()
else:
    pass # no input ready right now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:32:00.580

好的，[这是在 UNIX 上运行良好的东西](http://www.darkcoding.net/software/non-blocking-console-io-is-not-possible/)：

```
import sys
import select
import tty
import termios

def isData():
    return select.select([sys.stdin], [], [], 0) == ([sys.stdin], [], [])

old_settings = termios.tcgetattr(sys.stdin)
try:
    tty.setcbreak(sys.stdin.fileno())

    i = 0
    while 1:
        print i
        i += 1

        if isData():
            c = sys.stdin.read(1)
            if c == '\x1b':         # x1b is ESC
                break

finally:
    termios.tcsetattr(sys.stdin, termios.TCSADRAIN, old_settings) 
```

当我有机会制作一个更好的测试程序时，我会修改/扩展这个答案。我（到目前为止）不清楚在 Windows 上的运行情况`tty`和`termios`工作情况。

**更新**：Grmph。这取决于`select`. 我不喜欢 Windows 是有原因的。

# c - 跟踪从用户到硬件的代码

> ID：11024004
> 
> 赞同：3
> 
> 时间：2012-06-13T22:05:00.500
> 
> 标签：c, system

我很好奇是否有人可以在这里指出我正确的方向。我正在学习计算机系统编程（基础知识），并且我正在尝试通过不同级别跟踪代码以查看每个级别如何与其他级别交互。一个例子是在 C 或C++ 或类似语言中调用`fgets()`函数。`getline()`这两个都会调用系统吧？有没有一种简单的方法可以查看被调用的代码？

我正在使用 Unix（Ubuntu）。这是 Windows 和 Apple 专有的东西吗？这种事情有什么好的资源吗？一如既往，谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:11:21.790

至少在 UNIX 世界中，答案相当简单：“使用源代码，Luke”。

在您的示例中，您将查看 fgetc() 的源代码。那是在 C 标准库中，找到源代码的最简单方法是谷歌，比如“C 库 fgets() 源代码”。

当你得到那个源代码时，你会看到一堆代码处理缓冲区等，以及一个*系统调用*，可能是*read(2)*。那里的“2”告诉您它记录在手册的第 2 章中（例如，您可以使用 找到它`man 2 read`）。

系统调用是在内核中实现的，所以需要阅读内核源码。从那里继续。

现在，你需要找到这一切，而不必在源代码中随机阅读（尽管很多人都是这样学习的，但效率不高）是拿到一本关于 Linux 的书，比如 Kerrisk 的*[The Linux Programming Interface](https://rads.stackoverflow.com/amzn/click/com/1593272200)*，它解释了其中一些东西，而不仅仅是源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T22:12:34.073

某物`fgets`位于 内`libc`。也就是说，它是一个与大多数 C 二进制文件链接的用户空间库。Check out [`glibc`](http://www.gnu.org/software/libc/)，这是目前最常见的实现。

最终，`libc`将开始对内核进行系统调用。您可以在[kernel.org](http://kernel.org/)获得源代码。查看[KGDB](http://kgdb.linsyssoft.com/)进行内核调试。进行内核调试的最简单方法是使用通过空模型电缆连接的第二台机器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T22:28:07.053

在 Windows 上，您可以通过一些事情获得一些见解。首先，您需要与您要调查的二进制文件相对应的符号文件。符号文件将文本名称与程序中浮动的全局/堆栈/堆变量相关联。因此，要将内存中的地址映射到函数 fgets，并在某些程序中查看 fgets，您需要具有 Microsoft 实现的 C std 库版本的符号。幸运的是你 MS 使他们的符号[免费提供](http://support.microsoft.com/kb/311503)

其次，您需要捕获一个比 fgets 更深的调用堆栈。最明显的方法是成为 Microsoft 开发人员并将崩溃引入深层 MS dll，然后使用调试器和符号分析崩溃转储，但不幸的是我们不能这样做。你可以做的是使用所谓的**采样分析器**，就像微软免费提供的[一样。](http://support.microsoft.com/kb/311503)采样分析器通过定期对程序的调用堆栈进行快照来分析您的代码。使用 Microsoft 的符号文件，我们可以将该调用堆栈消化成有意义的东西。

鉴于这两条信息，构建程序并深入了解 fgets 调用的内容并不难。然后，您可以使用带有 Microsoft 符号的采样分析器来了解程序期间发生的情况。

沿着这些思路，我构建了以下程序来尝试一下：

```
int FgetSTest()
{
    FILE* fp;
    fp = fopen("C:/test.txt", "w");
    char data[100];
    int sum = 0;
    for (int i = 0; i < 100; ++i)
    {
        fgets(data, 100, fp);
        sum += data[0];
    }
    fclose(fp);
    return sum;

}

int _tmain(int argc, _TCHAR* argv[])
{
    int sum  = 0;
    for (int i = 0; i < 100; ++i)
    {
        sum += FgetSTest();
    }
    std::cout << sum;
    return 0;
} 
```

假设您已将其编译为一个程序（我已将其编译为一个名为 perfPlay.exe 的程序），您可以在 exe 上运行 MS 的采样分析器，如下所示：

```
C:\path\to\exe>vsperfcmd /start:sample /output:perfPlay.vsp
Microsoft (R) VSPerf Command Version 9.0.30729 x86
Copyright (C) Microsoft Corp. All rights reserved.

C:\path\to\exe\>vsperfcmd /launch:perfPlay.exe
Microsoft (R) VSPerf Command Version 9.0.30729 x86
Copyright (C) Microsoft Corp. All rights reserved.

Successfully launched process ID:3700 perfPlay.exe
sum is:40000
C:\path\to\exe>vsperfcmd /shutdown
Microsoft (R) VSPerf Command Version 9.0.30729 x86
Copyright (C) Microsoft Corp. All rights reserved.

Shutting down the Profile Monitor
------------------------------------------------------------ 
```

获取探查器输出，注意“符号路径”开关将命令指向 Microsoft 的符号服务器：

```
 C:\path\to\exe>vsperfreport perfplay.vsp /summary:all /symbolpath:srv*c:\symbols*htt 
```

p://msdl.microsoft.com/download/symbols

你可以直接检查调用者-被调用者报告的 csv，或者找到一个好的查看器，就像[我一直在研究的](http://ilearnstuff.blogspot.com/2012/06/visperf-visualize-output-of-visual.html)那样，你可以了解 fgets 大部分时间花在哪里：

![fgets 如何花费时间的可视化表示](../Images/fa1573c622db10f334e6f70de73d1c69.png)

可悲的是，不是非常有见地。不幸的是，使用这种方法您会遇到的一个问题是，许多 fgets 在发布模式下调用的函数很可能被[内联](http://www.greenend.org.uk/rjk/tech/inline.html)——也就是说，它们几乎作为函数从最终程序及其内容中直接删除“粘贴”到使用它们的位置。

您可以尝试在调试模式下重复上述操作以查看您得到的结果，因为内联的机会较少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T22:57:11.687

首先要做的事；这项任务需要好的工具。在浏览源代码时，我发现`etags`、`cscope`和`gid`（来自 GNU `idutils`）必不可少的工具。弄清楚如何将其中的一个或多个集成到您最喜欢的编辑器或 IDE 中。切换编辑器或 IDE 来*获得*这些功能，没有任何借口可以使用糟糕的工具。如果你正在寻找一个建议，我喜欢`vim`，很多人都在争论`emacs`，而且有些人喜欢他们的 Eclipse。

您将需要*本地*资源；[lxr](http://lxr.linux.no/#linux+v3.4.2/)是一个了不起的工具，但是对于任何严肃的工作来说，重复的 Web 请求所涉及的延迟都会让人厌烦。在 Debian 派生系统上，这很容易；将目录更改为您希望存储源代码的位置并运行`apt-get source eglibc`以下载`glibc`源代码。我建议通过来自[http://www.kernel.org](http://www.kernel.org)的 tarball 获取内核源代码或[克隆主`git`存储库](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=summary)（如果您想阅读更改日志或轻松获取更新，这是一个更好的选择——尽管截至 6 月它确实扩展到 2.7 GB 2012，所以它显然不适合所有人）。

一旦你为 C 库构建了标签文件，你就可以运行：`vim -t fgets`它会直接打开例程`libio/bits/stdio2.h`的源代码。`fgets()`（它的可读性比您希望的要低得多。）遵循这些，直到您最终获得`read()`系统调用。（可能需要一段时间。）

现在切换到内核源代码。看看`fs/read_write.c`这个：

```
SYSCALL_DEFINE3(read, unsigned int, fd, char __user *, buf, size_t, count) 
```

内核使用宏定义系统调用的方式的一个缺点是它使搜索函数变得复杂。`vim -t`直接找不到这个。查找系统调用时最简单的方法是运行`gid -s SYSCALL_DEFINE | grep read`. （如果你找到更好的工具，请告诉我。）一旦你找到了系统调用入口点，阅读内核源代码的其余部分就会容易得多。（我通常也发现它比`glibc`源代码更清晰——尽管五六个函数调用远离块级`bread()`调用的日子已经一去不复返了。）

# build - 如何修改 Jenkins 用于控制从站的负载平衡行为？

> ID：11024007
> 
> 赞同：16
> 
> 时间：2012-06-13T22:05:11.543
> 
> 标签：build, continuous-integration, jenkins, load-balancing, jenkins-plugins

我们将 Jenkins 用于我们的 CI 构建系统。我们还使用“并发构建”，以便 Jenkins 独立构建每个更改。这意味着我们经常同时运行 5 或 6 个相同作业的构建。为了适应这一点，我们有 4 个从站，每个从站有 12 个执行器。

问题是 Jenkins 并没有真正在它的奴隶之间“负载平衡”。它尝试在之前构建的同一个从站上构建作业（大概是为了减少从源代码控制同步的时间）。这是一个问题，因为 Jenkins 将在同一个从站上构建我们构建的所有 6 个实例（或者更有可能在 2 个从站之间）。一台构建机器陷入困境并且运行非常缓慢，而其他机器则处于闲置状态。

如何配置 Jenkins 的负载平衡行为，以及它如何控制其从属服务器？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-04T19:35:17.773

我们面临着类似的问题。因此，我整理了一个插件，可以更改 Jenkins 中的负载均衡器，以选择当前负载最小的节点 - [https://plugins.jenkins.io/leastload/](https://plugins.jenkins.io/leastload/)

任何反馈表示赞赏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T22:06:14.017

如果您的构建机器无法轻松处理超过 1 个构建，为什么要为它们配置 12 个执行器？如果确实如此，您应该将执行者的数量减少到 1。我的 Jenkins 有 30 个奴隶，每个奴隶有 1 个执行者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T08:37:02.120

如果您没有找到自动执行此操作的插件，请参考以下内容：

*   安装[节点标签参数插件](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin)
*   将*SLAVE*参数添加到您的作业中
*   限制作业运行`${SLAVE}`
*   添加将执行以下操作的触发器作业：

    *   通过 System Groovy 脚本分析负载分布并决定下一次构建的节点。
    *   *通过为SLAVE*参数 分配适当的值，使用[Parametertized Trigger 插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)在该节点上调度构建。

 *为了分析负载分布，您需要安装[Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)并熟悉[Jenkins Main Module API](http://javadoc.jenkins-ci.org/)。这里有[一些有用的初始指针](https://stackoverflow.com/a/10781891/1178189)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-16T10:40:31.453

您还可以使用[Throttle Concurrent Builds 插件](https://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin)来限制一个作业的多少实例可以在同一节点上并行运行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-27T22:46:44.013

我有两个标签——一个用于小任务，一个用于大任务。我有一个执行大任务的执行者和四个小任务的执行者。这确实平衡了一些事情。*

# php - 从 RapidShare 下载时图像损坏

> ID：11024009
> 
> 赞同：0
> 
> 时间：2012-06-13T22:05:19.920
> 
> 标签：php, image, corruption, rapidshare

我将我的很多网站上传卸载到 RapidShare 进行存储。然后我有一个脚本，当想要下载文件的用户访问它时，使用他们的 API 从 RapidShare 下载它并将其提供给用户。以下是为文件提供服务的脚本中的相关代码：

```
// Stream file to user
header('Content-Description: File Transfer');
header('Content-Disposition: attachment; filename=' . $result->name);
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Content-Length: ' . $result->size);

$url = 'https://' . $host . '/cgi-bin/rsapi.cgi?sub=download';
$url .= '&login=login';
$url .= '&password=mypass';
$url .= '&fileid=' . $result->rs_fileid;
$url .= '&filename=' . $result->name;

$handle = fopen($url, 'rb');
if(!$handle) {
    throw new Exception('Failed to open file handle');
}

while(!feof($handle)) {
    echo fread($handle, 1024*1024);
    ob_flush();
    flush();
}

fclose($handle); 
```

这适用于我测试过的所有文件，除了图像。下载图像时，它们已损坏。Windows 照片查看器无法打开图像，Photoshop 等程序也无法打开。

奇怪的是，如果我下载一个 .exe 并运行它，一切正常。它没有腐败。据我所知，它只发生在图像上。我还用 .pdf 对其进行了测试。

更奇怪的是，如果我查看原始图像的文件大小（2,882 字节），然后查看通过此脚本下载的图像的文件大小，它们是相同的。两者的文件大小均为 2,882 字节。但是图像仍然损坏。

这可能是什么原因和解决方案？这不像我在下载文件时将任何二进制数据添加到文件中。：/

谢谢。

编辑：忘了提一下，如果我直接从 RapidShare 下载文件而不通过脚本，则图像很好并且没有损坏。所以这里一定是脚本出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:12:04.910

检查我的[回答是否有类似问题](https://stackoverflow.com/a/10980789/22470)，我很确定您的文件开头会有一些通知！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:16:28.480

简化您的代码，不需要这些`header()`东西，并且 file_put/get_contents 更流畅：

```
$url = 'https://' . $host . '/cgi-bin/rsapi.cgi?sub=download';
$url .= '&login=login';
$url .= '&password=mypass';
$url .= '&fileid=' . $result->rs_fileid;
$url .= '&filename=' . $result->name;

file_put_contents($result->name, file_get_contents($url)); 
```

* * *

当您有内存问题时，使用[mod_xsendfile](https://tn123.org/mod_xsendfile/)，易于使用。

# c++ - gtkmm 和 gstreamermm 测试代码抛出运行时错误

> ID：11024016
> 
> 赞同：0
> 
> 时间：2012-06-13T22:06:15.680
> 
> 标签：c++, gtk, gstreamer, gtkmm

我正在 Ubuntu 10.04/12.04 上测试以下代码。我收到一个错误

```
#include <gtkmm.h>
#include <gstreamermm.h>
#include <iostream>

using namespace std;

class Sound
{
    public:
        Sound();

        void start_playing(double frequency);
        bool stop_playing();

    private:
        Glib::RefPtr<Gst::Pipeline> m_pipeline;
        Glib::RefPtr<Gst::Element> m_source;
        Glib::RefPtr<Gst::Element> m_sink;
};

Sound::Sound()
{
    m_pipeline = Gst::Pipeline::create("note");
    m_source = Gst::ElementFactory::create_element("audiotestsrc",
                                                   "source");
    m_sink = Gst::ElementFactory::create_element("autoaudiosink",
                                                 "output");
    m_pipeline->add(m_source);
    m_pipeline->add(m_sink);
    m_source->link(m_sink);
}

void Sound::start_playing (double frequency)
{
    m_source->set_property("freq", frequency);
    m_pipeline->set_state(Gst::STATE_PLAYING);

    /* stop it after 200ms */
    Glib::signal_timeout().connect(sigc::mem_fun(*this, &Sound::stop_playing),
                                   200);
}

bool Sound::stop_playing()
{
    m_pipeline->set_state(Gst::STATE_NULL);
    return false;
}

class Buttons : public Gtk::Window
{
public:
  Buttons();
  virtual ~Buttons();

protected:
  //Signal handlers:
  //void on_button_clicked();

  Sound sound;
  //void on_button_clicked(double frequency, Sound& sound);
  void on_button_clicked(double frequency, Sound* sound);

  //Child widgets:
  Gtk::Button m_button;
};

Buttons::Buttons()
{
  m_button.add_pixlabel("info.xpm", "cool button");

  set_title("Pixmap'd buttons!");
  set_border_width(10);

  //m_button.signal_clicked().connect( sigc::mem_fun(*this,
  //            &Buttons::on_button_clicked) );
  //m_button.signal_clicked().connect (sigc::bind<double, Sound*>(sigc::ptr_fun(&Buttons::on_button_clicked),
  //                                                  369.23, &sound));
  //m_button.signal_clicked().connect( sigc::bind<double, Sound&>( sigc::mem_fun(*this, &Buttons::on_button_clicked), 369.23, sound) ); 

  m_button.signal_clicked().connect( sigc::bind<double, Sound*>( sigc::mem_fun(*this, &Buttons::on_button_clicked), 369.23, &sound) ); 

  add(m_button);

  show_all_children();
}

Buttons::~Buttons()
{
}

/*
void Buttons::on_button_clicked()
{
  std::cout << "The Button was clicked." << std::endl;
}
*/

/*
void
Buttons::on_button_clicked(double frequency, Sound& sound)
{
    sound.start_playing (frequency);
}
*/

void
Buttons::on_button_clicked(double frequency, Sound* sound)
{
    sound->start_playing (frequency);
}

int main(int argc, char *argv[])
{
  Gtk::Main kit(argc, argv);

  Buttons buttons;
  //Shows the window and returns when it is closed.
  Gtk::Main::run(buttons);

  return 0;
} 
```

我编译使用`g++ gstmm1.cc -o gstmm1 ``pkg-config --cflags --libs gstreamermm-0.10 gtkmm-2.4`

```
terminate called after throwing an instance of 'std::runtime_error'
  what():  Failed to add null element.
Aborted 
```

任何想法可能有什么问题？几乎看起来这可能与以下帖子有关 [http://old.nabble.com/gstmm-add-element-to-pipeline-test-td14042055.html](http://old.nabble.com/gstmm-add-element-to-pipeline-test-td14042055.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:40:50.557

这对我有用！我缺少代码 Gst::init(); 在主（）

```
#include <gtkmm.h>
#include <gstreamermm.h>
#include <glibmm/main.h>
#include <iostream>

class Sound
{
    public:
        Sound();

        void start_playing(double frequency);
        bool stop_playing();

    private:
        Glib::RefPtr<Gst::Pipeline> m_pipeline;
        Glib::RefPtr<Gst::Element> m_source;
        Glib::RefPtr<Gst::Element> m_sink;
};

Sound::Sound()
{
    m_pipeline = Gst::Pipeline::create("note");
    m_source = Gst::ElementFactory::create_element("audiotestsrc",
                                               "source");
    m_sink = Gst::ElementFactory::create_element("autoaudiosink",
                                             "output");
    m_pipeline->add(m_source);
    m_pipeline->add(m_sink);
    m_source->link(m_sink);
}

void Sound::start_playing (double frequency)
{
    m_source->set_property("freq", frequency);
    //m_pipeline->set_state(Gst::STATE_NULL);
    //m_pipeline->set_state(Gst::STATE_PAUSED);
    //m_pipeline->set_state(Gst::STATE_READY);
    m_pipeline->set_state(Gst::STATE_PLAYING);

    /* stop it after 200ms */
    Glib::signal_timeout().connect(sigc::mem_fun(*this, &Sound::stop_playing),
                               200);
}

bool Sound::stop_playing()
{
    //m_pipeline->set_state(Gst::STATE_PAUSED);
    m_pipeline->set_state(Gst::STATE_NULL);
    return false;
}

class HelloWorld : public Gtk::Window
{

public:
  HelloWorld();
  virtual ~HelloWorld();

protected:
  //Signal handlers:
  void on_button_clicked();

  //Member widgets:
  Gtk::Button m_button;
  Sound sound;
};

HelloWorld::HelloWorld()
: m_button("Hear Sound")   // creates a new button with label "Hello World".
{
  // Sets the border width of the window.
  set_border_width(10);

  // When the button receives the "clicked" signal, it will call the
  // on_button_clicked() method defined below.
  m_button.signal_clicked().connect(sigc::mem_fun(*this,
          &HelloWorld::on_button_clicked));

  // This packs the button into the Window (a container).
  add(m_button);

  // The final step is to display this newly created widget...
  m_button.show();
}

HelloWorld::~HelloWorld()
{
}

void HelloWorld::on_button_clicked()
{
  std::cout << "Hello World" << std::endl;

  sound.start_playing(400);
}

int main(int argc, char* argv[]) {

  Gst::init(); 

  Glib::RefPtr<Gtk::Application> app = Gtk::Application::create(argc, argv, "org.gtkmm.example");

  HelloWorld helloworld;

  //Shows the window and returns when it is closed.
  return app->run(helloworld);

return 0;
} 
```

# javascript - 将 URL 传递给表单字段的书签

> ID：11024021
> 
> 赞同：1
> 
> 时间：2012-06-13T22:06:52.307
> 
> 标签：javascript, forms, url, bookmarklet

我想创建一个书签，允许用户在浏览时即时提交来自站点的 URL。

我正在寻找此书签的三种可能实现。

1.  只需单击小书签并转到包含我的表单字段的页面，并将**他们刚刚来自的 URL**输入到该字段中。

2.  只需单击小书签并转到包含我的表单字段的页面，然后**将他们**从上一页突出显示的链接输入到该字段中。

3.  首选选项 - 单击小书签，会打开一个弹出窗口（在大小和功能上类似于 Twitter 的推文框），其中我的表单字段预先填充了**他们单击小书签的页面的 URL**。就像 Twitter 的推文框和 facebook 的分享框一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:21:19.397

我通常不只是放弃代码，但这很简单，我认为值得分享和解释。

## 压缩：

```
javascript:(function(f,s,n,o){window.open(f+encodeURICompnent(s),n,o)}('http://example.com?url=',window.location,'yourform','width=300,height=200')); 
```

## 展开

```
(function (formurl, site, name, options) {
    window.open(
        formurl+encodeURIComponent(site),
        name,
        options
    );
}('http://example.com?url=', window.location, 'yourform', 'width=300,height=200')); 
```

它的工作方式是它只是调用一个匿名闭包来将变量传递给[`window.open`](https://developer.mozilla.org/en/DOM/window.open)函数。它将当前页面的位置作为`uri`查询字符串中的值传递。

在包含表单的页面上，您需要使用查询字符串中的值填充正确的字段。

虽然这可以在不使用闭包的情况下编写，但您需要确保没有任何被调用的返回值，因为`javascript:<string value>`将使用`<string value>`.

# excel - 将行组合成具有不同行数的连接单元格

> ID：11024026
> 
> 赞同：0
> 
> 时间：2012-06-13T22:07:14.180
> 
> 标签：excel, concatenation, excel-formula

我有一个从 6000 页 PDF 文件转换而来的非常大的 Excel 表，大约有 50 万行，所以任何手动操作几乎都是不可能的。

我正在努力将其转换为可用数据，但是我对已提取的某些行有疑问。

这些行应该像这样提取：

```
Date       Text (Date Time TelNo Duration)                     
-----------------------------------------
01/05/2012 29.04.2012 18:31 07[removed]8 00:00:06 
01/05/2012 29.04.2012 18:32 07[removed]8 00:07:22 
01/05/2012 29.04.2012 19:54 07[removed]8 00:00:28 
```

不知道如何，但大约 10,000 行最终是这样的：

```
Date       Text                     
-----------------------------------------
01/05/2012  29.04.2012 
01/05/2012  29.04.2012 
01/05/2012  29.04.2012 
01/05/2012  18:31 
01/05/2012  18:32 
01/05/2012  19:54 
01/05/2012  07[removed]8 
01/05/2012  07[removed]8 
01/05/2012  07[removed]8  
01/05/2012  00:00:06 
01/05/2012  00:07:22 
01/05/2012  00:00:28 
```

我正在尝试将行重新组合成单​​行（然后再次拆分）。

我尝试了以下方法，但它仅适用于 3 行组：

```
 A           B                    C
------------------------------------------------------------------
1  01/05/2012   29.04.2012      =B1 & B4 & B7 & B10
2  01/05/2012   29.04.2012 
3  01/05/2012   29.04.2012 
4  01/05/2012   18:31 
5  01/05/2012   18:32 
6  01/05/2012   19:54 
7  01/05/2012   07[removed]8 
8  01/05/2012   07[removed]8 
9  01/05/2012   07[removed]8  
10 01/05/2012   00:00:06 
11 01/05/2012   00:07:22 
12 01/05/2012   00:00:28 
```

我还尝试了以下各种组合：

```
=B1&INDEX(B1:B10,MATCH("??:??",B1:B10,0))&INDEX.... 
```

任何人都可以制定一个公式来组合这些值并可以将其拖到/复制到整个工作表中吗？

**编辑：**

公式需要：

在第一行，找到`Time`当前单元格下方的第一个值，然后是 first`Telno`和 first `Duration`。在第二行，找到`Time`当前单元格下方的第二个值，然后是第二个`Telno`和第二个`Duration`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:31:15.103

在加入数据之前抛出一个“IF”：

```
=IF(MID(B1,3,1)=".",B1 & " " & B4 & " " & B7 & " " & B10,"") 
```

您还可以将其分解为列：

C列名为时间

```
=IF(MID(B1,3,1)=".",B4,"") 
```

D 列名为 TelNo

```
=IF(MID(B1,3,1)=".",B7,"") 
```

E 列名为 Duration

```
=IF(MID(B1,3,1)=".",B10,"") 
```

在任何一种情况下，过滤 C 列为空白的任何行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:08:14.460

我只用公式解决了这个问题：

步骤 1\. 添加一`Mistype`列并填充 if 公式（日期/时间/数字等）。

步骤 2\. 添加了另一个新列`NumMissed`，其公式为：

```
=IF(D2="date",IF(AND(D2="date",D1<>"date"),MATCH("Time",D2:D20,0)-1,IF(D2="date",E1,"")),"") 
```

这将显示可用于选择正确单元格的缺失行数。

步骤 3\. 添加另一列来保存检索到的行（然后可以由我的其他公式拆分），公式如下：

```
=IF(D2="date",B2&INDEX(B2:B80,E2)&INDEX(B2:B80,E2*2)&INDEX(B2:B80,E2*3)&IF(ISNUMBER(INDEX(B2:B80,E2*4)),INDEX(B2:B80,E2*4),""),"") 
```

这为我提供了 99.9% 行的数据，最后几行可以手动完成。

# django - Tastypie：根据评论对象过滤 Django 评论

> ID：11024037
> 
> 赞同：0
> 
> 时间：2012-06-13T22:08:41.650
> 
> 标签：django, tastypie

我使用来自 contrib 的 django 评论，并且我有一个对象（条目），其中包含一些与之相关的评论。在我的美味派资源中，我有：

```
class CommentResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user')

class Meta:
    queryset = Comment.objects.all()
    resource_name = 'comments'
    allowed_methods = ['get']
    fields = ['comment', 'resource_uri', 'submit_date', 'user',]
    filtering = {
        'user': ALL_WITH_RELATIONS,
    } 
```

我可以得到所有的评论，或者按用户过滤它们。它工作正常。现在我不确定，我将如何基于某个条目对象而不是用户来执行相同类型的过滤器？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:52:01.510

在不知道 和 之间的关系是什么的情况下，`entry`很难`comment`给出具体的答案，但简而言之，因为条目和评论是通过多对多关系链接的：

*   创建一个入口资源
*   将 CommentResource添加`fields.ToManyField`到 EntryResource
*   将“fields.ToOneField”添加到 EntryResource 的 CommentResource
*   添加`'comments' : ALL_WITH_RELATIONS`到过滤字典中`EntryResource`

此外，您可以将嵌套资源或自定义 URL 添加到 Comment 以根据条目过滤它们，但这完全取决于您的设计。

[Tastypie docs here](http://django-tastypie.readthedocs.org/en/latest/resources.html#reverse-relationships)中给出了上述几乎逐字记录的示例。

# wordpress - 让 WordPress 仅自动显示特定类别的类别永久链接

> ID：11024040
> 
> 赞同：0
> 
> 时间：2012-06-13T22:09:04.257
> 
> 标签：wordpress

我已经搜索过了，[这里是关闭结果。](https://stackoverflow.com/questions/10933295/how-to-use-custom-permalink-for-specific-category-in-wordpress-post)

我正在建立一个新的 wordpress 网站。我希望大多数帖子在 URL 中没有类别，只是 www.site.com/title。但是我确实希望博客文章是分开的，所以我想要 www.site.com/blog/title。我还希望将来可以添加更多类似的选项，仅针对特定类别，而不是整个站点。

在 stackoverflow 上有很多与此类似的问题，但大多数有 0 个回复。任何建议都会很棒。我什至没有任何运气尝试过[高级永久链接。](http://wordpress.org/extend/plugins/advanced-permalinks/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T01:03:17.410

您可以通过 Setting > Permalinks 简单地做到这一点，并将 value 添加到 Common Setting > Custom Structure 中`/blog/%postname%/`。在那里，您将获得可从 www.site.com/blog/title 访问的博客文章。

我无法理解第一个问题。经过：

> 我希望大多数帖子在 URL 中没有类别

你的意思是没有 www.site.com/category/category-name？还是没有 www.site.com/category/post？

编辑#1

要回答这个问题：

> www.site.com/category/post 是我只想要“博客”类别的博客文章>如果类别是“鞋子”我不希望在 URL 中显示该类别。——</p>

第一：您可以将永久链接设置为，`/%postname%/`这样您的所有帖子都将具有站点/标题，因此可以从该链接访问

第二：您必须过滤永久链接，以使“博客”类别下的帖子表现出不同的行为。

试试这个

```
add_filter( 'post_link', 'custom_permalink', 10, 2 );
function custom_permalink( $permalink, $post ) {
    // Get the categories for the post
    $categories = wp_get_post_categories( $post->ID );
    foreach ( $categories as $cat ) {
        $post_cat    = get_category( $cat );
        $post_cats[] = $post_cat->slug;
    }

    // Check if the post have 'blog' category
    // Assuming that your 'Blog' category slug is 'blog'
    // Change 'blog' to match yours
    if ( in_array( 'blog',$post_cats ) ) {
        $permalink = trailingslashit( home_url( 'blog/' . $post->post_name ) );
    }

    return $permalink;
} 
```

第三：你必须过滤 rewrite_rules

```
add_filter( 'rewrite_rules_array', 'custom_rewrite_rule' );
function custom_rewrite_rule( $rules ) {
    $new_rules = array(
        'blog/([^/]+)/trackback/?$' => 'index.php?name=$matches[1]&tb=1',
        'blog/([^/]+)/feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?name=$matches[1]&feed=$matches[2]',
        'blog/([^/]+)/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?name=$matches[1]&feed=$matches[2]',
        'blog/([^/]+)/comment-page-([0-9]{1,})/?$' => 'index.php?name=$matches[1]&cpage=$matches[2]',
        'blog/([^/]+)(/[0-9]+)?/?$' => 'index.php?name=$matches[1]&page=$matches[2]'
    );

    $rules = $new_rules + $rules;

    return $rules;
} 
```

转到永久链接设置并保存设置以刷新您的重写规则并使上述更改处于活动状态

注意：在您的活动主题`functions.php`模板上添加这些功能

注意：我尚未对其进行测试，但这就是您更改永久链接的方式。我做了类似的方法来更改我在档案和搜索结果上的永久链接。

# amazon-ec2 - 如何使用 Ec2MultiRegionSnitch 配置 Cassandra 以跨多个 EC2 区域工作

> ID：11024042
> 
> 赞同：6
> 
> 时间：2012-06-13T22:09:11.900
> 
> 标签：amazon-ec2, cassandra

我是 Cassandra 的新手，我的任务是让它在多个区域的 EC2 环境中启动和运行，这样如果整个 EC2 区域出现问题，我们的应用程序将继续以愉快的方式运行。我已经阅读了尽可能多的关于 Ec2MultiRegionSnitch 的文档，并且已经完全停止了。我正在运行 cassandra 1.0.10。

**我的问题如下：**

1) 当我启动 bin/cassandra 时出现错误：无法在 JMX 中启动注册 mbean。虽然我可以在任何节点上运行 bin/nodetool -h ring 并且我得到了您期望从健康系统获得的显示。我已将 mx4j 库添加到我的 cassandra 部署中。我可以尝试删除我想的那个。

2）当我启动 bin/cassandra-cli -h 时，我可以按如下方式创建密钥空间：

```
 CREATE KEYSPACE mykeyspace 
    WITH placement_strategy = 'org.apache.cassandra.locator.NetworkTopologyStrategy'
    and strategy_options = {us-east-1:2,us-west-1:2}; 
```

3）运行“使用 mykeyspace”后，我可以创建一个列族，如下所示：

```
 CREATE COLUMN FAMILY people 
       WITH comparator=UTF8Type AND key_validation_class=UTF8Type AND 
       default_validation_class=UTF8Type AND column_metadata=[{column_name:FIRST_NAME,validation_class:UTF8Type},
      {column_name:LAST_NAME,validation_class:UTF8Type},
      {column_name:EMAIL,validation_class:UTF8Type},
      {column_name:LOGIN,validation_class:UTF8Type, index_type: KEYS}]; 
```

4) 完成此操作后，我可以在 4 个节点中的任何一个上运行 bin/cassandra-cli -h，运行 use mykeyspace；描述; 并且每个节点正确地描述了 mykeyspace，包括列族和种子列表。

5）但是当我尝试执行一个简单的：

```
 set people['1']['FIRST_NAME'] = 'John'; 
```

我得到一个堆栈跟踪如下：

```
 null
    UnavailableException()
        at org.apache.cassandra.thrift.Cassandra$insert_result.read(Cassandra.java:15206)
        at org.apache.cassandra.thrift.Cassandra$Client.recv_insert(Cassandra.java:858)
        at org.apache.cassandra.thrift.Cassandra$Client.insert(Cassandra.java:830)
        at org.apache.cassandra.cli.CliClient.executeSet(CliClient.java:901) 
```

**我的配置：**

我已经对端口 22、7000、7199 和 9160 执行了 ec2-authorize

我的集群中有 4 个节点：以下每个区域中的一个节点：AvailabilityZones。

```
 us-east-1:us-east-1a  (initial_token: 0)
    us-east-1:us-east-1c  (initial_token: 85070591730234615865843651857942052864)
    us-west-1:us-west-1a  (initial_token: 1)
    us-west-1:us-west-1c  (initial_token: 85070591730234615865843651857942052865) 
```

每个 EC2 实例都与一个公共 IP 地址相关联。

在每个节点中，我都配置了**cassandra.yaml**，如下所示：

```
 seeds: <set to the public ip address for the us-east-1a and us-west-1a nodes>
    storage_port: 7000
    listen_address: <private ip address of this node>
    broadcast_address: <public ip address of this node>
    rpc_address: 0.0.0.0
    rpc_port: 9160
    endpoint_snitch: Ec2MultiRegionSnitch 
```

此外，在每个节点的**cassandra-env.sh**中，我还包括：

```
 JVM_OPTS="$JVM_OPTS -Djava.rmi.server.hostname=<Node's local IP Address>" 
```

**我的恳求** 希望我已经向某人提供了足够的信息来帮助我让这件事按人们的意愿工作。

**来自第一个 mx4j 问题的**附加信息堆栈跟踪：****

 **```
 WARN 22:07:17,651 Could not start register mbean in JMX java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.cassandra.utils.Mx4jTool.maybeLoad(Mx4jTool.java:66)
    at org.apache.cassandra.service.AbstractCassandraDaemon.setup(AbstractCassandraDaemon.java:243)
    at org.apache.cassandra.service.AbstractCassandraDaemon.activate(AbstractCassandraDaemon.java:356)
    at org.apache.cassandra.thrift.CassandraDaemon.main(CassandraDaemon.java:107)
    Caused by: java.net.BindException: Cannot assign requested address
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:353) 
```

**我的 cassandra-topology.properties**

```
 aaa.aaa.aaa.aaa=us-east-1:us-east-1a
    bbb.bbb.bbb.bbb=us-east-1:us-east-1c

    ccc.ccc.ccc.ccc=us-west-1:us-west-1a
    ddd.ddd.ddd.ddd=us-west-1:us-west-1c

    default=us-east-1:us-east-1a 
```

**我的 nodetool 环输出 __**

```
 Address         DC          Rack        Status State   Load            Owns    Token                                       
                                                                           85070591730234615865843651857942052865      
    aaa.aaa.aaa.aaa  us-east     1a          Up     Normal  11.09 KB        50.00%  0                                           
    bbb.bbb.bbb.bbb  us-west     1a          Up     Normal  6.68 KB         0.00%   1                                           
    ccc.ccc.ccc.ccc  us-east     1c          Up     Normal  11.09 KB        50.00%  85070591730234615865843651857942052864      
    ddd.ddd.ddd.ddd  us-west     1c          Up     Normal  15.5 KB         0.00%   85070591730234615865843651857942052865 
```

我很确定我已经正确添加了区域/可用区。至少我认为我匹配了文档中出现的内容。（查看此链接中的 Ec2MultiRegionSnitch） [http://www.datastax.com/docs/1.0/cluster_architecture/replication](http://www.datastax.com/docs/1.0/cluster_architecture/replication)

我认为我不能将这些地区列为 us-west 和 us-east，因为西部有两个地区（us-west-1 是加利福尼亚地区，us-west-2 是俄勒冈地区）。所以我不认为仅仅将我们放在西部会成功区分地区。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T22:43:08.863

我在评论中的猜测是正确的。您的复制设置和数据中心名称不匹配。有几件事。

1) cassandra-topology.properties 仅由 PropertyFileSnitch 使用。使用 ec2 告密者时，该文件无关紧要。2) 告密者当前报告“us-west”而不是“us-west-1”的原因是由于一个错误。[https://issues.apache.org/jira/browse/CASSANDRA-4026](https://issues.apache.org/jira/browse/CASSANDRA-4026)。如果您在“us-west-2”中添加了节点，它们将被正确报告。

所以这里的解决方案是更新你的复制设置：

```
CREATE KEYSPACE mykeyspace 
    WITH placement_strategy = 'org.apache.cassandra.locator.NetworkTopologyStrategy'
    and strategy_options = {us-east:2,us-west:2}; 
```

另外，不幸的是，我不知道 mx4j 有什么问题。cassandra 不需要它，所以除非你真的需要它，否则你可以删除它。**

# java - Maven和Eclipse：项目构建错误依赖

> ID：11024043
> 
> 赞同：1
> 
> 时间：2012-06-13T22:09:12.523
> 
> 标签：java, eclipse, maven, build, dependencies

我刚开始使用 Maven，遇到了几个问题。最新的是那个：

> 项目构建错误：com.github.koraktor:steamcondenser:jar 的“dependencies.dependency.version”缺失。

我在 Windows 7 x64 上运行带有 m2eclipse 插件的 Java 开发人员的 eclipse。我想要做的是将此 API 安装到我的项目中：

[https://github.com/koraktor/steam-condenser-java](https://github.com/koraktor/steam-condenser-java)

我一直在谷歌搜索最后一个小时没有成功。我应该做些什么？我尝试从 eclipse 插件和 pom.xml 本身添加依赖项，但没有帮助。

编辑：

谢谢大家，正如你所说，我所要做的就是在 pom.xml 中包含版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T22:16:23.190

Maven 在依赖项中需要一个“版本”说明符。

我经常使用[http://mvnrepository.com](http://mvnrepository.com)来获取给定项目的*真正*Maven 代码。在这种情况下，它位于： http: [//mvnrepository.com/artifact/com.github.koraktor/steam-condenser/1.2.0](http://mvnrepository.com/artifact/com.github.koraktor/steam-condenser/1.2.0)。

这是他们的依赖版本：

```
<dependency>
    <groupId>com.github.koraktor</groupId>
    <artifactId>steam-condenser</artifactId>
    <version>1.2.0</version>
</dependency> 
```

# python - Python CJSON 编码自定义对象

> ID：11024044
> 
> 赞同：1
> 
> 时间：2012-06-13T22:09:14.947
> 
> 标签：python, json

我正在更新一个使用旧版本 cjson 来加速其 json 编码的旧项目。它还有一个名为 JSONString 的自定义类（将字符串设置为其“值”属性），用于与数据库进行通信。

它曾经调用 cjson.encode( *(dict contains a JSONString)* , *(custom encoding funct for JSONSTRING)* ) 但较新版本的 cjson 已将其参数更改为仅接受一个参数，并且不公开任何其他可能允许自定义的函数编码过程。在没有自定义编码器的情况下对 dict 进行编码会引发 EncodeError（对象不可 JSON 编码）。

我现在的选择是要么找出如何在 cjson 中使用自定义编码器，修改 cjson 源（试图避免修补库），要么在操作之前将插入 dict 的 JSONString 类型转换为字符串，但我试图避免在整个代码中放置“修复”（划分和可重用性等等）。以某种方式修改 JSONString 以便编码器获取它的字符串值而不是抛出异常也可以，但我对 python 的怪癖了解不多。我可以理解为什么 cjson 可能不允许自定义编码器（速度原因），但如果没有办法，我可能只需要找到其他东西。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:53:45.150

浏览我未答复的帖子并记得我从未将其标记为已回答。Yavar 的帖子确实有帮助；python有一个增强版的cjson。它运行良好，但有时会出现一些有趣的名称冲突，因此请注意这一点。

[http://python.cx.hu/python-cjson/](http://python.cx.hu/python-cjson/)

# php - PHP mail() 函数的 $message 中的 Foreach 循环

> ID：11024045
> 
> 赞同：1
> 
> 时间：2012-06-13T22:09:23.553
> 
> 标签：php, loops, foreach

我有一个循环，将每个非空文本字段输入数据库：

```
foreach ($guests as $guest) {

    if ($guest !== "") {
        mysql_query("INSERT INTO guestlists (guest, night, date) VALUES('$guest', '$night', '$date') ") or die(mysql_error());
    }
} 
```

我还想将这些名称中的每一个打印到一封电子邮件中，我认为它以某种方式包含了 mail() 中 $message 变量中的输出。如何最好地做到这一点？

另一方面，通过编辑 $headers 来改变 from 被证明是非常喜怒无常的。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T22:14:59.400

例如：

```
$names = array();
foreach ($guests as $guest) {
    if ($guest !== "") {
        mysql_query("INSERT INTO guestlists (guest, night, date) VALUES('$guest', '$night', '$date')") or die(mysql_error());
        $names[] = $guest;
    }
}
$message = "Guests: ".implode(", ", $names).". "; 
```

我希望您确定`$guest, $night, $date`变量已经通过`mysql_real_escape_string`函数传递。

# objective-c - xCode：通过控制台访问对象的属性

> ID：11024049
> 
> 赞同：2
> 
> 时间：2012-06-13T22:09:37.487
> 
> 标签：objective-c, ios, xcode, nsobject

是否可以在 xCode 控制台中访问对象的属性？

如果我尝试以下操作，我会收到一个错误，即他的属性不存在。

po someObject.someprop

如果我不对代码进行断点并运行应用程序，它可以正常工作，所以我知道 someObject.someprop 存在。我认为我还没有掌握 xCode 控制台？我喜欢 Flex/Flash 开发的地方在于，我可以设置一个断点，然后在控制台窗口或变量视图中，我可以遍历每个结构直到地球的尽头。

我可以看到 SomeDicionary[key].someArray[1].someObject.prop 它会告诉我价值。这在 xCode 控制台中是不可能的，还是有窍门？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:12:50.213

您实际上必须使用括号语法符号：

```
po [someObject someprop] 
```

调试器有时对语法非常挑剔。[这](http://nachbaur.com/blog/basics-xcode-debugging-tips)充满了各种有用的在 XCode 中进行调试的技巧。

附带说明一下，在实现文件 (*.m) 而不是头文件 (*.h) 中声明的变量/属性有时可能对调试器变量列表显示不可见，具体取决于断点是否在该类的代码中，因为的范围。这里不一定需要，但知道看到它是如何相关的很有用。

# python - 将 python 更新到 2.7 后，pycurl 不导入

> ID：11024051
> 
> 赞同：0
> 
> 时间：2012-06-13T22:09:51.807
> 
> 标签：python, pycurl

我使用的是 Ubuntu 10.04，之前有 python 2.6。pycurl 工作正常。

在我将我的 python 更新到 2.7 后，pycurl 不导入

```
>>> import pycurl
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named pycurl 
```

我尝试使用重新安装python

```
sudo apt-get install python-pycurl 
```

它告诉我 pycurl 已经是最新版本

我如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T22:31:18.240

*   [从http://pycurl.sourceforge.net/download/](http://pycurl.sourceforge.net/download/)下载最新版本
*   解压你下载的 tar.gz
*   `cd`到解压的目录
*   阅读`INSTALL`文件并按照它所说的去做

它应该看起来像这样：

```
wget http://pycurl.sourceforge.net/download/pycurl-7.19.0.tar.gz
tar -xzf pycurl-7.19.0.tar.gz
cd pycurl-7.19.0
sudo python2.7 setup.py install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:45:42.600

试试`sudo pip install pycurl`吧。此外，请确保它`/usr/bin/python`指向 2.7 版。

# http - 为什么我的节点静态文件服务器丢弃请求？

> ID：11024052
> 
> 赞同：1
> 
> 时间：2012-06-13T22:09:52.477
> 
> 标签：http, node.js

我有一个标准的 node.js 静态文件服务器，我想用它来提供同一目录中的普通 html、js、css 和 jpg 文件（即典型的 HTML5 单页应用程序）。我希望节点服务器可以正确处理这个问题。我看到的不一样。

该`index.html`文件被提供，但随后的请求被丢弃（即它们永远不会到达服务器）。在我的 chrome 开发工具中，我看到如下内容：

```
GET http://projectcoho.cloudfoundry.com/css/coho.css  http://projectcoho.cloudfoundry.com/:7
GET http://projectcoho.cloudfoundry.com/sencha-touch/sencha-touch-debug.js  http://projectcoho.cloudfoundry.com/:8
GET http://projectcoho.cloudfoundry.com/coho-debug.js  http://projectcoho.cloudfoundry.com/:8 
```

但是，这些资源存在于服务器上，如果您直接输入它们的 URL，您就可以访问它们。对于这些请求，我在 app.js 中的回调永远不会被调用（我可以这么说，因为`console.log`这些文件永远不会被调用。

这是 app.js 文件：

```
var path = ".";
var port = process.env.VCAP_APP_PORT || 3000;;

var file = new(static.Server) (path, {
  cache: 600
});

mime.define({
   'text/css': ['css'],
   'text/javascript': ['js'],
   'image/jpeg': ['jpg', 'jpeg']
});

http.createServer(function (request, response) {

    var uri = url.parse(request.url).pathname;
    var filename = libpath.join(path, uri);

    console.log("URI: " + request.url + " , filename: " + filename);

    libpath.exists(filename, function (exists) {
        console.log("Serving " + filename);
        if (!exists) {
            console.log("Not found");
            response.writeHead(404, {
                "Content-Type": "text/plain"
            });
            response.write("404 Not Found\n");
            response.end();
            return;
        }

        if (fs.statSync(filename).isDirectory()) {
            filename += '/index.html';
        }

        var type = mime.lookup(filename);
                file.serveFile(filename, 200, {'content-type' : type}, request, response);
    });
}).listen(port); 
```

我在这里想念什么？

我正在使用节点 v0.6.15

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:27:22.890

最后，答案是我的`cache.manifest`文件不正确。客户端应用程序在缓存中寻找资源，但不存在。当我更正清单时，事情开始起作用了。

# c# - 如何启用/禁用带有绑定的复选框的 IsEnabled/IsHitTestVisible 属性

> ID：11024056
> 
> 赞同：1
> 
> 时间：2012-06-13T22:10:29.730
> 
> 标签：c#, wpf, binding, mvvm, checkbox

我正在尝试启用/禁用正在选中的复选框。我们的应用程序使用 MVVM，正在使用 c# WPF 开发，并且没有代码隐藏。只是 MVVM 和绑定。我正在尝试使用 PropertyChanged，但没有运气。所有其他字段都可以正常工作，除了这个。

这是我的 XAML：

```
<ct:DataGridExtended Name="dtgProfiles" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" IsReadOnly="True" FrozenColumnCount="2" Margin="-1,23,-1,-1" SelectionMode="Single" ScrollViewer.IsDeferredScrollingEnabled="True" AutoGenerateColumns="False" ItemsSource="{Binding RightProfiles, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding RightProfilesSelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedIndex="{Binding ResourcesSelectedIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="4">
        <ct:DataGridExtended.Columns>
            <DataGridCheckBoxColumn Binding="{Binding Selected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  >
                <DataGridCheckBoxColumn.ElementStyle>
                    <Style TargetType="CheckBox">
                        <Setter Property="Margin" Value="3,2,1,1"/>
                        <Setter Property="IsHitTestVisible" Value="{Binding IsEditing, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" />
                    </Style>
                </DataGridCheckBoxColumn.ElementStyle>
            </DataGridCheckBoxColumn>
        <DataGridTextColumn Header="Nome" Binding="{Binding RightProfile.Name}" />
    </ct:DataGridExtended.Columns>
</ct:DataGridExtended> 
```

您可以在那里看到，我已将 IsHitTestVisible 设置为我的 IsEditing 属性。此属性通知用户是处于编辑模式还是查看模式。我的问题是，这是唯一一个比 Binding IsEditing 不起作用的字段。

更准确地说（也许有另一种方法）：在 ViewMode 中，我不能让用户更新我的网格中的任何内容，包括 TextBlocks 和 Checkbox。我可以使用 IsHitTestVisible={"Binding IsEditing}" 阻止我的整个网格，但是这样，我也阻止了我的 ScrollBar。并且允许用户滚动这个网格。

我怎么能做到这一点？它已经在燃烧我的头了。

谢谢

# c# - 在 TextFixtureSetup 中初始化的变量未被 IEnumerable-using 测试读取

> ID：11024058
> 
> 赞同：2
> 
> 时间：2012-06-13T22:10:41.477
> 
> 标签：c#, nunit, ienumerable

我正在用 NUnit 编写我的第一个测试夹具，并且我正在使用一个外部文件来加载匹配标准。就像是：

```
List<string> stringList;

[TestFixtureSetUp]
public void LoadResource(){
    stringList = new List<string>;
    string line;
    using (StreamReader file = new Streamreader("file.txt"){
        while ((string line = file.ReadLine()) != null) {stringList.Add(line);}
    }
} 
```

当我第一次对单个项目进行正常测试时，StringList 已被 LoadResource 填充，并且测试运行良好：

```
[Test]
    Public void Test0(){
    string line = stringList[0];
    //specialized tests here
    GenericTest(line);
} 
```

但是下面的测试在访问 stringList 时会返回 null 异常：

```
public IEnumerable<string> GetStrings(){
    foreach (string line in stringList){
        yield return line;
    }
}

[Test, TestCaseSource("GetStrings")]
public void loopedTests(string line){
    GenericTest(line);
} 
```

我在这里想念什么？我假设有一些关于枚举器的东西，这意味着它们必须在创建类时包含有效的引用，但是为什么 - 以及如何最好地修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T22:48:31.087

看起来这是 NUnit 框架中的一个[错误](https://bugs.launchpad.net/nunit-3.0/+bug/664018)。该`TestCaseSource`方法将在该`TestFixtureSetup`方法之前被调用。

你可以做一些延迟加载`GetStrings`而不是使用`TestFixtureSetup`这样的：

```
public IEnumerable<string> GetStrings(){

    if (stringList == null)
       LoadResource();

    foreach (string line in stringList){
        yield return line;
    }
} 
```

# windows - Windows 中的 objdump 以查看调试信息

> ID：11024069
> 
> 赞同：0
> 
> 时间：2012-06-13T22:11:17.707
> 
> 标签：windows, debugging, objdump, dwarf

我需要在 .out 文件中获取变量的地址和成员名称。我基本上使用 gcc 在 linux 中编译了 ac 程序，我想看看文件的信息。linux上有很多例子，但我需要在windows上做。

编辑

我安装了 cygwin，由于某种原因 objdump 不起作用：

![在此处输入图像描述](../Images/eb379e0b02f205b4467462ca6b959000.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:33:57.533

考虑安装 cygwin 并尝试那些 linux 示例...

# javascript - Android 服务网页视图

> ID：11024072
> 
> 赞同：3
> 
> 时间：2012-06-13T22:11:30.633
> 
> 标签：javascript, android, service, webview

我需要从网络服务器下载一个 html 文件。但要做到这一点，我需要登录网站。登录表单位于 iframe 中，既不允许也不允许直接访问它。（-> 无 POST）

这就是为什么我使用 javascript 在我的应用程序中自动填写和提交表单的原因。但现在我需要在后台下载这个文件（作为服务）。不幸的是，服务没有 UI，所以我似乎不能像以前那样使用 webview。

所以这是我的问题：是否可以在服务中使用 webview？有没有其他方法可以使用 javascript 与网站交互？或者有没有其他方法可以自动登录网站？

该网站是：[https ://light.dsbcontrol.de/DSBlightWebsite/(S(jlbbytzvocksc4v2i30gtjli))/Homepage/Player.aspx?ID=b4457c67-24a2-446f-af41-810fba7f723d&MaxWidth=1010&MaxHeight=607&MyDate=0](https://light.dsbcontrol.de/DSBlightWebsite/(S(jlbbytzvocksc4v2i30gtjli))/Homepage/Player.aspx?ID=b4457c67-24a2-446f-af41-810fba7f723d&MaxWidth=1010&MaxHeight=607&MyDate=0)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:32:56.483

如果您按下“weiter”按钮时我没有遗漏任何内容（我想这是一个“提交”按钮），那么会发生以下情况：

```
POST /DSBlightWebsite/(S(jlbbytzvocksc4v2i30gtjli))/Homepage/IFrame.aspx?ID=b4457c67-24a2-446f-af41-810fba7f723d&Width=937&Height=530&MyDate=0 HTTP/1.1
Host: light.dsbcontrol.de
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: ru-ru,ru;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: https://light.dsbcontrol.de/DSBlightWebsite/(S(jlbbytzvocksc4v2i30gtjli))/Homepage/IFrame.aspx?ID=b4457c67-24a2-446f-af41-810fba7f723d&Width=937&Height=530&MyDate=0
Content-Type: application/x-www-form-urlencoded
Content-Length: 273

__VIEWSTATE=%2FwEPDwULLTEwODU4OTkxMzRkZGl5uRxMYz320dUnYalV0rRm4KBLu%2F%2FmncdSoRUaM2Cr&__EVENTVALIDATION=%2FwEWBALArNzjCQK10rnVAQLLus%2B1BQLpvY%2BZD1oB3Xt3JbIIPV05vCoiVbXiTq5FzSyFDPswYprWZto4&ctl02%24txtBenutzername=sdfasf&ctl02%24txtPasswort=asfsad&ctl02%24btnLogin=weiter 
```

如您所见，这是一个带有一组参数的`application/x-www-form-urlencoded`POST ：`light.dsbcontrol.de/DSBlightWebsite/(S(jlbbytzvocksc4v2i30gtjli))/Homepage/IFrame.aspx?ID=b4457c67-24a2-446f-af41-810fba7f723d&Width=937&Height=530&MyDate=0`

```
__VIEWSTATE=/wEPDwULLTEwODU4OTkxMzRkZGl5uRxMYz320dUnYalV0rRm4KBLu//mncdSoRUaM2Cr
__EVENTVALIDATION=/wEWBALArNzjCQK10rnVAQLLus+1BQLpvY+ZD1oB3Xt3JbIIPV05vCoiVbXiTq5FzSyFDPswYprWZto4
ctl02$txtBenutzername=sdfasf
ctl02$txtPasswort=asfsad
ctl02$btnLogin=weiter 
```

所以我相信你可以直接使用 HttpClient 来制作这样的 POST，而无需使用 JavaScript/WebView。你只需要使用你的参数。但是我意识到可能不清楚某些参数的含义，但这可能会在 web API 文档中进行解释。如果没有 Web API 文档，那么我怀疑这种方法可能行不通，因为您可能只是不知道将哪些值作为这些参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:32:12.433

如果您需要访问该文件，我相信可能需要身份验证标头。该线程可以帮助您如何在 android 中进行基于表单的身份验证：[Android - 基于表单的身份验证](https://stackoverflow.com/questions/10839333/android-form-based-authentication)

# jquery - 带有滚动条的 jQuery 同位素

> ID：11024075
> 
> 赞同：0
> 
> 时间：2012-06-13T22:11:56.540
> 
> 标签：jquery, jquery-isotope

我正在尝试在固定宽度的容器中实现同位素插件，但我无法显示滚动条。

我想要的是在同位素布局上强制滚动条（默认或一些​​花哨的），但它需要处于固定的宽度和高度环境中，溢出设置为隐藏在主体上。

我看到的所有使用 Isotope、Masonry 或 Wookmark 的示例都使用强制在正文或 html 上的滚动条，但就我而言，它需要设置为隐藏。

请，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:42:09.247

我通过这种方式解决了类似的问题：

```
var $container = $(".container");
$container.isotope({
  itemSelector: '.item',
  itemPositionDataEnabled: true,
  layoutMode: 'masonry',
  masonry: { rowHeight: 107,columnWidth : 413 } }).css('overflow','auto'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T07:06:28.877

我假设您的滚动条没有显示，因为溢出被​​设置为隐藏内联，因此在 CSS 中具有更高的优先级。jQuery 可以通过更改内联 css 来解决这个问题。

要使用纯 CSS 强制滚动条，请尝试使用 !important 关键字来覆盖内联样式。

```
#container {
overflow:auto !important;
} 
```

# iis - TortoiseSVN 错误：无法发送请求正文：现有连接被远程主机强行关闭

> ID：11024078
> 
> 赞同：1
> 
> 时间：2012-06-13T22:12:06.150
> 
> 标签：iis, iis-7, tortoisesvn

让我先说我对 Web 开发的知识基本上是 0。话虽如此，我仍然会尽力为您提供尽可能多的信息。我们的客户端在 Windows Server 2008 R2 机器上使用 IIS7。他们得到的 TortoiseSVN 错误是这样的：

> 错误：无法发送请求正文：现有连接被远程主机强行关闭。

利用谷歌的力量，这里似乎有两种可能发生的事情。由于它是一个 4GB 文件，我看到有人提到它可能是一个配置问题，因为超时可能有点短，我可能需要在某处启用一个设置以允许提交更大的文件，或者它可能是一个网络问题。注意他们可以提交较小的文件可能很有用。

我已经准备好尝试禁用服务器上的防火墙和防病毒软件并让它们重试，但这没有用。他们试图从桌面上传到服务器，并且他们通过千兆交换机在同一个网络上。我敢肯定我错过了对你们有用的信息，但我对网络开发人员、他们的设置以及真正了解他们正在尝试做的事情完全是个菜鸟。如果您需要我提供更多信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:31:28.340

问题可能是 Apache2 的 reqtimeout 模块中配置的超时选项过于严格。我只是禁用了它

```
a2dismod reqtimeout
/etc/init.d/apache2 restart 
```

巧克力到：[https ://serverfault.com/questions/297562/svn-https-problem-could-not-read-status-line-connection-was-closed-by-ser](https://serverfault.com/questions/297562/svn-https-problem-could-not-read-status-line-connection-was-closed-by-ser)

# xpath - 如何在 XPath 中使用 not contains()？

> ID：11024080
> 
> 赞同：84
> 
> 时间：2012-06-13T22:12:14.893
> 
> 标签：xpath, contains

我有一些结构如下的 XML：

```
<whatson>
  <productions>    
    <production>
      <category>Film</category>
    </production>
    <production>
      <category>Business</category>
    </production>
    <production>
      <category>Business training</category>
    </production>
  </productions>
</whatson> 
```

而且我需要选择每个产品的类别不包含“业务”（因此只是本示例中的第一个产品）。

这对 XPath 可行吗？我尝试按照这些思路工作，但一无所获：

```
//production[not(contains(category,'business'))] 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-06-13T22:18:32.863

XPath 查询区分大小写。看过您的示例（顺便说一句，这很棒，似乎没有人再提供示例了！），我可以通过将“业务”更改为“业务”来获得您想要的结果

```
//production[not(contains(category,'Business'))] 
```

我已经通过在 Chrome 中打开 XML 文件并使用开发工具执行 XPath 查询来测试这一点，它只给了我电影类别。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-14T04:25:53.620

> 我需要选择每个产品的类别不包含“业务”

虽然我赞成@Arran 的回答是正确的，但我也会添加这个......严格解释，OP 的规范将被实现为

```
//production[category[not(contains(., 'Business'))]] 
```

而不是

```
//production[not(contains(category, 'Business'))] 
```

后者选择**第一个** `category`孩子不包含“业务”的每个产品。当 a`production`没有`category`子级或多个子级时，这两个 XPath 表达式的行为会有所不同。

只要每个`<production>`人都只有一个`<category>`孩子，就像在您的简短示例 XML 中一样，它在实践中没有任何区别。您是否总是可以指望这是真的，取决于各种因素，例如您是否有一个强制实施该约束的模式。就个人而言，我会选择更强大的选项，因为它不会“花费”太多......假设您在问题中所述的要求确实是正确的（而不是例如'选择没有类别的每个产品包含“业务”'）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-23T10:04:49.013

你可以使用`not(expression)`函数

`not()`是 xpath 中的一个函数（与运算符相反）

例子：

```
//a[not(contains(@id, 'xx'))] 
```

或者

```
expression != true() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-19T18:02:38.290

应该是没有 contains() 方法的 xpath，`//production[not(contains(category,'business'))]`

# c# - 从用户 cookie 中检索信息时出错

> ID：11024086
> 
> 赞同：0
> 
> 时间：2012-06-13T22:12:43.243
> 
> 标签：c#, asp.net

当我运行该项目时，我得到这一行突出显示错误：

```
string cartID = context.Request.Cookies["Cinemax_CartID"].Value; 
```

消息如下：

```
Object reference not set to an instance of an object. 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:17:52.223

问题是你必须检查cookie是否存在，如果存在，那么你可以以安全的方式读取它的值，否则你应该初始化cookie值，否则你会得到一个空引用异常。

这实际上与从`ViewState`, `Session`, `Application`,`Cookies`等读取项目时应该应用的模式相同。基本上你不能依赖外部值，你应该检查它是否真的存在

尝试这样的事情：

```
if(context.Request.Cookies["Cinemax_CartID"] == null)
{
   // initialize the cookie
   context.Request.Cookies["Cinemax_CartID"].Value = initial_value;
}
myCookieValue = context.Request.Cookies["Cinemax_CartID"].Value; 
```

# python - 带有数据文件的 Python C 扩展

> ID：11024089
> 
> 赞同：3
> 
> 时间：2012-06-13T22:12:54.587
> 
> 标签：python, c, distutils

我正在尝试为 Python 编写和安装一个 C 扩展，它必须加载一个 120MB 的数据文件。使用 distutils`package_data`参数我已经将数据文件正确安装到与扩展模块相同的文件夹中。但是，C 代码不知道如何找到数据文件。

我可以在 C 扩展中硬编码已安装数据文件的路径（有效），但这显然不适用于具有不同安装目录的系统。我需要在 Linux 和 Windows 下都安装这个扩展。

我尝试使用`PyModule_GetFilename()`来获取模块的路径，然后从中构建数据文件的路径，但是该函数会引发`SystemError: module filename missing`. 可能错误是因为我试图在我的模块初始化函数中调用它？

如有必要，我可以在模块初始化之外手动加载数据文件，但我更愿意在导入时自动加载文件。

编辑：所以，我找到了一种解决方法。我写了一个初始化函数，它可以将文件的路径作为参数。从 Python 中，我可以访问模块的`__file__`属性并从那里找出数据文件的路径。然后，如果我在`__init__.py`. 虽然这可行，但我仍然希望有人能给我一个更优雅的解决方案，因为这对我来说感觉很倒退！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:24:57.467

所以我自己想出了一个更好的解决方案，并认为我会发布它以防它帮助其他人。

我的项目包含一个`my_module`带有 C 扩展名的包 ( )。安装包含`_my_extension.so`、`__init__.py`和`datafile.dat`。在相关部分，`__init__.py`看起来像：

```
import os

def datafile_path():
    return os.path.join(os.path.dirname(__file__), "datafile.dat")

import _my_extension 
```

我的 C 扩展初始化函数如下所示：

```
PyMODINIT_FUNC
init_my_extension(void)
{
    PyObject *m, *fileobj, *pModule, *pFunc;

    m = Py_InitModule3("_my_extension", _my_extension_methods, "A docstring");
    if (m == NULL)
        return;

    pModule = PyImport_ImportModule("my_module");
    pFunc = PyObject_GetAttrString(pModule, "datafile_path");
    fileobj = PyObject_CallFunction(pFunc, NULL);
    Py_DECREF(pFunc);

    LoadDataFile(PyString_AS_STRING(fileobj));

    Py_DECREF(fileobj);
    Py_DECREF(pModule);
} 
```

显然，我需要添加一些错误处理，这似乎仍然有点偏离，但至少它在模块初始化时加载数据文件，并且可以工作。显然，我可以在 C 中进行大部分`datafile_path`计算，但由于无论如何我都需要导入模块，并且因为我想要跨平台兼容性，所以使用`os`模块似乎更容易。

无论如何，如果有人能告诉我如何更好地做到这一点，我仍然会很高兴，所以我会保持开放状态，但我想我会提出一个答案来帮助任何有同样问题的人，以防万一没有更好的答案即将发布，因为我认为它可能会澄清问题。

# mysql - 如何确保不模仿对数据库的多个请求

> ID：11024094
> 
> 赞同：2
> 
> 时间：2012-06-13T22:13:38.013
> 
> 标签：mysql, database, innodb

我是高要求游戏编码团队的一员。

我们最近遇到了一些问题，多个请求可以同时发送，并且是联合重复操作（如果它们完全一个接一个地运行，则不会发生这种情况）。

有问题的例程调用 InnoDB 表中的一行，如果存在则继续它的例程，直到所有其他检查都正常，此时它完成并删除该行。

似乎正在发生的事情是读取同时命中行（尽管行级锁定）并继续沿例行路径向下，此时删除没有任何区别。这导致发生的事情是，该程序被足够聪明的玩家复制以尝试运气。

有人对解决此问题的方法有任何建议吗？

例程示例。

```
// check database row exists (create the initial lock)
// proceed
// check quantity in the row
// if all is okay (few other checks needed here)
// delete the row
// release the lock either way (for the next request to go through) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:24:39.037

MySQL 有几种不同的锁定模式

[http://dev.mysql.com/doc/refman/5.6/en/innodb-lock-modes.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-lock-modes.html)

我认为您在执行更新/删除时会想要强制执行排他锁。这样后续的请求将一直等待，直到锁被释放并且相应的动作完成。

您可能还想检查用于这些并发查询的索引。适当的索引机制将最小化在给定查询期间需要锁定的行数。

# postgresql - PostgreSQL：输出底层函数的查询

> ID：11024099
> 
> 赞同：3
> 
> 时间：2012-06-13T22:14:05.550
> 
> 标签：postgresql

有人曾经提到过一种让 Postgres 变得冗长的方法，这样如果你这样做`\dt`了，它就会显示所有底层 SQL。

我以为它与SQL连接`-a`或`-e`回显，但我错了。我似乎忘记了那个方法，并试图在没有任何运气的情况下查找它：
[http ://www.postgresql.org/docs/current/static/app-psql.html](http://www.postgresql.org/docs/current/static/app-psql.html)

* * *

### 编辑：

我认为因为这是与数据库/sql 相关的，所以它是用于 stackoverflow 的，但这可能需要移至 [超级用户|服务器故障|数据库管理员]（？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-04-11T09:06:03.177

显示内部命令的查询，

**方法1**： -打开控制台时`psql -E`包括选项。`-E`

**方法2**：，`\set ECHO_HIDDEN noexec/on/off`可以在会话中使用。`noexec`意味着它不运行查询，只是打印它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T22:46:04.940

从以下输出中截取`psql --help`：

```
 -e, --echo-queries       echo commands sent to server
  -E, --echo-hidden        display queries that internal commands generate 
```

# c++ - c++向量是如何工作的

> ID：11024103
> 
> 赞同：3
> 
> 时间：2012-06-13T22:14:55.627
> 
> 标签：c++, stl

假设我有一个向量 V，它有 10 个元素。`v.erase(v.begin())`如果我使用STL 向量删除第一个元素（在索引 0 处）如何处理这个？

它是否会创建另一个新向量并将元素从旧向量复制到新向量并释放旧向量？或者它是否从索引 1 开始复制每个元素并将元素复制到 index-1 ？

如果我一次需要一个大小为 100,000 的向量，然后我不使用那么多空间，假设我只需要一个大小为 10 的向量，那么它会自动减小大小吗？（我不这么认为）

我在网上看了，只有 API 和如何使用 STL 库的教程。有什么好的参考资料可以让我了解 STL 库的实现或复杂性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T22:19:44.403

实际上， 的实现`vector`是可见的，因为它是一个模板，因此您可以查看详细信息：

```
iterator erase(const_iterator _Where)
    {   // erase element at where
    if (_Where._Mycont != this
        || _Where._Myptr < _Myfirst || _Mylast <= _Where._Myptr)
        _DEBUG_ERROR("vector erase iterator outside range");
    _STDEXT unchecked_copy(_Where._Myptr + 1, _Mylast, _Where._Myptr);
    _Destroy(_Mylast - 1, _Mylast);
    _Orphan_range(_Where._Myptr, _Mylast);
    --_Mylast;
    return (iterator(_Where._Myptr, this));
    } 
```

基本上，这条线

```
unchecked_copy(_Where._Myptr + 1, _Mylast, _Where._Myptr); 
```

完全按照您的想法进行 - 复制以下元素（或如 bames53 指出的那样在 C++11 中移动它们）。

要回答您的第二个问题，不，容量不能自行减少。

`std`可以在[http://www.cplusplus.com/reference/stl/](http://www.cplusplus.com/reference/stl/)找到算法的复杂性，并且如前所述，实现是可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:22:03.767

> 它是否从索引 1 开始复制每个元素并将元素复制到 index-1 ？

是的（尽管它实际上从 C++11 开始移动它们）。

> 它会自动减小尺寸吗？

不，减小大小通常会使现有元素的迭代器无效，并且只允许在某些函数调用上。

> 我在网上看了，只有 API 和如何使用 STL 库的教程。有什么好的参考资料可以让我了解 STL 库的实现或复杂性吗？

您可以阅读 C++ 规范，该规范会告诉您在实现方面什么是允许的，什么是不允许的。你也可以去看看你的实际实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T22:28:07.053

Vector 会将元素复制（在 C++11 中移动）到开头，这就是为什么如果您想从集合的开头插入和擦除，您应该使用 deque。如果您想真正调整向量的内部缓冲区大小，您可以这样做：

```
vector<Type>(v).swap(v); 
```

这有望制作一个大小正确的临时向量，然后将其内部缓冲区与旧的交换，然后临时向量超出范围，大缓冲区被释放。

正如其他人指出的那样，您可以`vector::shrink_to_fit()`在 C++11 中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T22:21:51.170

这是我（许多）对 C++ 的反对意见之一。每个人都说“使用标准库”......但即使你有 STL 源代码（可以从许多不同的地方免费获得。在这种情况下，包括头文件本身！）......它基本上是一个难以理解的噩梦深入研究并尝试理解。

相比之下，（仅 C 语言的）Linux 内核是简洁明了的典范。

但我们离题了:)

这是您问题的 10,000 英尺答案：

> [http://www.cplusplus.com/reference/stl/vector/](http://www.cplusplus.com/reference/stl/vector/)
> 
> 向量容器被实现为动态数组；与常规数组一样，向量容器的元素存储在连续的存储位置，这意味着不仅可以使用迭代器访问它们的元素，还可以使用指向元素的常规指针的偏移量来访问它们的元素。
> 
> 但与常规数组不同，向量中的存储是自动处理的，可以根据需要进行扩展和收缩。
> 
> 向量擅长：
> 
> *   通过位置索引（恒定时间）访问单个元素。
> *   以任何顺序（线性时间）迭代元素。
> *   从其末尾添加和删除元素（恒定摊销时间）。
> 
> 与数组相比，它们为这些任务提供几乎相同的性能，而且它们能够轻松调整大小。虽然，当它们的容量被自动处理时，它们通常比数组消耗更多的内存（这是为了为未来的增长提供额外的存储空间）。
> 
> 与其他基本标准序列容器（双端队列和列表）相比，向量通常在访问元素以及从序列末尾添加或删除元素方面是最有效的。对于涉及在结尾以外的位置插入或删除元素的操作，它们的性能比双端队列和列表差，并且迭代器和引用的一致性不如列表。
> 
> ...
> 
> 就性能而言，重新分配可能是一项代价高昂的操作，因为它们通常涉及要复制到新位置的向量使用的整个存储空间。您可以使用成员函数 vector::reserve 来预先指示向量的容量。这有助于优化存储空间并在计划进行许多扩展时减少重新分配的次数。
> 
> ...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-13T22:23:46.103

> 我只需要一个大小为 10 的向量，然后它会自动减小大小吗？

不，它不会自动缩小。
传统上你用一个新的空向量交换向量：[减少一个 stl 向量的容量](https://stackoverflow.com/questions/1111078/reduce-the-capacity-of-an-stl-vector)

但是 C++x11 包含一个 std::vector::shrink_to_fit() 它直接执行它

# ios - 在 viewDidUnload 之后保持对 tabbar 的引用？

> ID：11024105
> 
> 赞同：0
> 
> 时间：2012-06-13T22:15:02.303
> 
> 标签：ios, xcode, cocoa-touch, uitabbarcontroller

我正在尝试禁用标签栏的所有标签，除了第一个标签。我想出了这段代码：

```
-(void)disableMainTabBar{

        [self setSelectedIndex:0];
        for(UITabBarItem *item in self.mainTabBar.items){
            if(self.firstTabBarItem != 0)  item.enabled = false;
            self.firstTabBarItem++;
        }
} 
```

此代码位于 UITabBarControllers 类文件中。虽然当我从另一个类调用此函数时从它自己的类调用它时它不起作用，但它不起作用。当我从另一个类调用此方法时调用上述方法时，我对选项卡栏进行 nslog 显示，它显示为 NULL。在调用 viewDidUnload 后，如何让它保持对标签栏的引用？

我是 iOS 开发的新手，所以请多多包涵。

谢谢！

-碎纸机2794

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:31:29.000

您必须在要调用该方法的另一个类中导入`UITabBarController`该类，并在创建它的实例后使用该实例调用该方法，这将彻底解决您的`NULL`.

# svg - SVG 'maskContentUnits' 无法在移动 Safari 中正确呈现

> ID：11024108
> 
> 赞同：0
> 
> 时间：2012-06-13T22:15:29.480
> 
> 标签：svg, mobile-safari, mask

我有一个用 Javascript 构建的 SVG。我加载了一个大的 SVG 文件，将它分成所有用路径绘制的片段，然后将每个元素放在我的页面中。我只使用这些 SVG 作为我正在加载的其他图像的掩码。基本上我的结构如下。

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="26.750152587890625 10.117172241210938 197.24969482421875 348.1596221923828" width="197.25" height="348.16015625">
    <mask id="designMask" maskContentUnits="objectBoundingBox">
        <g id="CutContour1bg">
            <path d="[my path coords]" style="fill:#FFFFFF;">
        </g>
    </mask>
    <image href="http://myImage.jpg" style="mask: url(#designMask);" width="800px" height="800px" x="26.75" y="10.1171875">
</svg> 
```

在 FF、IE9、Chrome、Safari 5.1（桌面版）中，这使我的 SVG 完美遮盖了图像。然而，在移动 Safari 中，图像无法正确呈现。我追踪了面具的坐标，它们都是正确的。在 FF 中，我可以看到 SVG 负载（全黑）然后在它变成蒙版时消失。（我一直等到设计被加载，然后将我的包装`<g>`好，`<mask>`因为 FF 在加载内容之前寻找掩码时遇到问题。

这告诉我面具的位置正是它需要的位置，但`maskContentUnits`不是。它们保留在左上角，而不是对象的边界框，就像我说的那样。我几乎看不到面具中的部分图像，所以面具单位是正确的，但我无法`maskContentUnits`在移动 safari 中工作或阅读。

有没有人见过这个问题，或者知道如何纠正它？我讨厌在除了移动 safari 之外的任何地方都有这项工作，因为它主要是在移动设备上工作……这违背了它的初衷哈哈。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:39:30.990

我还没有找到一种`maskContentUnits`在移动 safari 中正常工作的方法，我很确定它只是不像其他浏览器那样被识别。但是我想出了一个“hack”来使示例正常工作。

问题是，遮罩区域位于浏览器的左上角，而不是用作遮罩的 svg 对象。因此，如果您的页面中间有一个 svg，则被遮罩的图像将不会遵循相同的位置。

我发现它的工作方式是，我将 svg 包裹在与 svg`div`相同宽度的 a 中，并修改 div 的位置而不是 svg。这样，从技术上讲，掩码仍位于“左上角”，但位于 div 而不是 svg 的偏移位置。

如果有人找到更好的方法，`maskContentUnits`在移动 safari 中正确渲染，我想听听！

# prolog - 这段代码是干什么用的？

> ID：11024111
> 
> 赞同：0
> 
> 时间：2012-06-13T22:16:09.260
> 
> 标签：prolog

我试图理解这段代码的用途，但我不知道。你能给我解释一下吗？

```
co_to(I, I, [I]).

co_to(I, L, [I|L]) :- I < K, I1 is I + 1, co_to(I1, K, L). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:47:27.320

正如 gusbro 在他的评论中指出的那样，这段代码不起作用。但是如果你把第二个子句的开头改成

```
co_to(I, K, [I|L]) :- ... 
```

然后它为一个目标生成一个范围从到的数字`co_to(X,Y,L)`列表，例如：`L``X``Y`

```
?- co_to(5,10,L).
L = [5, 6, 7, 8, 9, 10]
Yes (0.00s cpu, solution 1, maybe more)
No (0.02s cpu) 
```

# wordpress - $wpdb->插入不工作

> ID：11024118
> 
> 赞同：0
> 
> 时间：2012-06-13T22:16:31.460
> 
> 标签：wordpress

晚上所有，

我一直在创建自己的 wordpress 插件，但无法在管理部分中获取插件选项页面，以将输入的任何插件设置保存到我创建的插件表中。

当我在选项页面中输入设置并提交我的更改时，它看起来一切正常，但是当我查询表时它是空的，现在已经插入了行。

任何解决此问题的帮助将不胜感激。

提前致谢，

山德

我的代码在下面列出。

我有一个使用此代码创建表的类：

```
function createGalleryTable() {
        $sql = "CREATE TABLE IF NOT EXISTS `wp_pgp_gallery` (
        `gallery_id` mediumint(6) NOT NULL auto_increment,
        `name` varchar(20) NOT NULL,
        `default_gallery` tinyint(1) NOT NULL default '0',
        `published` tinyint(1) NOT NULL default '0',
        `gallery_desc` varchar(255),
        `display_style` varchar(10) NOT NULL default 'Info',
        PRIMARY KEY  (`gallery_id`),
        KEY `name` (`name`)
        );";
        require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
        dbDelta($sql);
    } 
```

我有另一个由表单提交操作调用的类，它传递一个要插入到我的表中的字符串参数：

```
function addgallery($pgp_galleryname) {
        global $wpdb;

        $wpdb->insert('wp_pgp_gallery', array(
                            'gallery_id' => NULL,
                            'name' => $pgp_galleryname,
                            'default_gallery' => '0',
                            'published' => '0',
                            'gallery_desc' => NULL,
                            'display_style' => 'Info'
                        )
                    );
        $lastid = $wpdb->insert_id;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:49:50.790

不要在插入时传递 gallery_id，因为它是一个自动增量字段。

# performance - Web 服务器有时会花费很长时间来提供页面

> ID：11024121
> 
> 赞同：0
> 
> 时间：2012-06-13T22:16:40.773
> 
> 标签：performance, connection, webserver

我在一个虚拟专用网络服务器上，我的网站目前流量很少。直到几周前一切都很好，我的页面总是加载得很快，但现在出现了问题。

大约每 3 个页面加载一个需要 10 秒或更长时间来加载通常需要大约一秒钟的页面。使用谷歌浏览器，图标之前的灰色图标会花费很长时间逆时针旋转，但一旦开始顺时针旋转就正常了，这让我相信连接到服务器有问题。无论我或其他任何人从哪里连接，都会出现这个问题，所以这不是我自己的互联网连接或类似的问题。

奇怪的是，加载 index.php 时一切正常，问题只发生在站点上的其他页面上。

我一直怀疑它与DNS有关，但我对此了解不多。

我一直在努力找出问题出在自己身上，但我并不是服务器等方面的专家，而且我在谷歌上找到的大部分东西都是关于互联网连接速度慢的。如果有人自己遇到这个问题并设法解决它或者无论如何可以提供帮助，我将非常感激。

# drupal - 尝试在 drupal 中加载样式表时出现 403 错误

> ID：11024122
> 
> 赞同：0
> 
> 时间：2012-06-13T22:17:03.317
> 
> 标签：drupal, drupal-7, drupal-theming

我正在尝试将静态网站转换为 Zen 子主题，并且在我的子主题引用的所有样式表上不断收到 403。我尝试更改权限，但仍然无法加载文件。

我认为问题可能是由于 .htaccess 文件在进一步检查时弄乱了，我无法在模板树中找到单个 htaccess 文件。

# javascript - 如何防止 javascript div 弹出窗口跳回页面顶部？

> ID：11024123
> 
> 赞同：1
> 
> 时间：2012-06-13T22:17:18.357
> 
> 标签：javascript, css, html, popup

我有以下简洁的代码，当点击链接时会打开一个小弹出框......问题是我在一个很长的页面上使用它，并且有很多内容，每当有人打开弹出窗口时，实际的内容页面就会跳回来到最顶部，如果有人只是花了一段时间向下滚动，这很烦人。即使打开/关闭弹出窗口，如何强制页面停留在那里？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <script type="text/javascript">
            function showPopUp(el) {
                var cvr = document.getElementById("cover")
                var dlg = document.getElementById(el)
                cvr.style.display = "block"
                dlg.style.display = "block"
                if (document.body.style.overflow = "hidden") {
                    cvr.style.width = "1024"
                    cvr.style.height = "100%"
                }
            }
            function closePopUp(el) {
                var cvr = document.getElementById("cover")
                var dlg = document.getElementById(el)
                cvr.style.display = "none"
                dlg.style.display = "none"
                document.body.style.overflowY = "scroll"
            }
        </script>
        <style type="text/css">
            #cover {
                display:none;
                position:absolute;
                left:0px;
                top:0px;
                width:100%;
                height:100%;
                background:gray;
                filter:alpha(Opacity=50);
                opacity:0.5;
                -moz-opacity:0.5;
                -khtml-opacity:0.5
            }
            #dialog {
                display:none;
                position:absolute;
                top:50%;
                left:50%;
                width:400px;  /* adjust as per your needs */
                height:400px;   /* adjust as per your needs */
                margin-left:-200px;   /* negative half of width above */
                margin-top:-200px;   /* negative half of height above */
                z-index:100;
                background:white;
                padding:2px;
                font:10pt tahoma;
                border:1px solid gray
            }
        </style>
    </head>
    <body>
        <div id="cover"></div>
        <div id="dialog">
            My Dialog Content
            <br><input type="text">
            <br><input type="button" value="Submit">
            <br><a href="#" onclick="closePopUp('dialog');">[Close]</a>
        </div>
        <a href="#" onclick="showPopUp('dialog');">Show</a>   
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:25:55.553

更改此代码：

```
from <a href="#" onclick="closePopUp('dialog');">[Close]</a> 
```

至

```
<a href="javascript:void(0)" onclick="closePopUp('dialog');">[Close]</a> 
```

并且：

```
<a href="#" onclick="showPopUp('dialog');">Show</a> 
```

至：

```
<a href="javascript:void(0)" onclick="showPopUp('dialog');">Show</a> 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T14:20:25.937

尝试改变这个

```
<a href="#" onclick="closePopUp('dialog');">[Close]</a> 
```

至

```
<a onclick="closePopUp('dialog');">[Close]</a> 
```

和这个

```
<a href="#" onclick="showPopUp('dialog');">Show</a> 
```

至

```
<a onclick="showPopUp('dialog');">Show</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-18T21:14:00.037

当您单击链接打开弹出窗口时，您实际上是在导航到“#”，这会导致滚动条返回页面顶部。您真的不应该再使用 onclick 属性了，最好使用 Javascript 将事件侦听器附加到元素。

正如上面用户 Sammy 所提到的，使用`href="javascript:void(0)"`应该可以防止这种行为。如果我实际上没有将它用作标准链接，我个人喜欢将`href`属性从标签中删除。唯一的缺点是您需要重新设置链接的样式以使其看起来像普通链接，因为如果缺少该属性`<a>`，它将采用不同的样式。`href`

我制作了一个[带有解决方案的 JSFiddle](https://jsfiddle.net/Hendeca/d6tkdv2q/1/)。如您所见，我删除了`href`属性并重新设置了链接的样式，使用 Javascript 为链接添加事件处理程序。您可以向下滚动一点并单击链接；弹出窗口将打开，滚动条将保持在同一位置。

编码：

HTML：

```
<div class="container">
  <div id="cover"></div>
  <div id="dialog">
    My Dialog Content
    <br><input type="text">
    <br><input type="button" value="Submit">
    <br><a class="close-button" data-popup="dialog">[Close]</a>
  </div>
  <a class="show-button" data-popup="dialog">Show</a>   
</div> 
```

JS

```
var showButton = document.getElementsByClassName('show-button');
var closeButton = document.getElementsByClassName('close-button');

showButton[0].addEventListener('click', showPopUp);
closeButton[0].addEventListener('click', closePopUp);

function showPopUp(e) {
        e.preventDefault();
    var dialogId = e.currentTarget.getAttribute('data-popup');
    var scrollPos = window.scrollY;
    var cvr = document.getElementById("cover")
    var dlg = document.getElementById(dialogId)
    cvr.style.display = "block"
    dlg.style.display = "block"
    window.scroll(0, scrollPos);
}
function closePopUp(e) {
        e.preventDefault();
    var dialogId = e.currentTarget.getAttribute('data-popup');
    var cvr = document.getElementById("cover")
    var dlg = document.getElementById(dialogId)
    cvr.style.display = "none"
    dlg.style.display = "none"
} 
```

CSS

```
.container {
  height: 5000px;
}

.show-button,
.close-button { 
  position: fixed; 
  color: blue;
  text-decoration: underline;
}

.show-button:hover,
.close-button:hover {
  cursor: pointer;
}

#cover {
  display:none;
  position:absolute;
  left:0px;
  top:0px;
  width:100%;
  height:100%;
  background:gray;
  filter:alpha(Opacity=50);
  opacity:0.5;
  -moz-opacity:0.5;
  -khtml-opacity:0.5
}
#dialog {
  display: none;
  position: fixed;
  top:50%;
  left:50%;
  width:400px;  /* adjust as per your needs */
  height:400px;   /* adjust as per your needs */
  margin-left:-200px;   /* negative half of width above */
  margin-top:-200px;   /* negative half of height above */
  z-index:100;
  background:white;
  padding:2px;
  font:10pt tahoma;
  border:1px solid gray
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-13T22:24:22.500

尝试使用位置：固定而不是位置：绝对。更多阅读：[http ://www.w3schools.com/Css/css_positioning.asp](http://www.w3schools.com/Css/css_positioning.asp)

# java - Hibernate HQL查询根据childID获取父+子

> ID：11024125
> 
> 赞同：7
> 
> 时间：2012-06-13T22:17:42.707
> 
> 标签：java, hibernate, hql, parent

我有一个具有多个@onetomany 关系的对象，我需要查询父级中的属性以及子级的属性。我似乎无法完成它。

例如，我需要一个查询来让我查看父对象，其中父对象的名字是“John” *，而*孩子最喜欢的颜色是蓝色。希望这是有道理的。复杂的原因似乎是孩子在一个列表中，而不是在@onetoone 关系中。

```
PARENT:
@Entity
@Table(name="Parent")
public class Parent {
    @Id
    @Column(name="ID")
    @GeneratedValue(strategy=GenerationType.AUTO, generator="parent_gen")
    @SequenceGenerator(name="parent_gen", sequenceName="PARENT_SEQUENCE")
    private int parentID;

    @Column(name="name")
    private String name;

    @OneToMany(cascade=CascadeType.ALL)
    @OrderBy("name ASC")
    @JoinTable(name = "parent_to_child")
    private List<Child> childList;
    // and so forth

Child 
@Entity
@Table(name="Child")
public class Child{
    @Id
    @Column(name="ID")
    @GeneratedValue(strategy=GenerationType.AUTO, generator="child_gen")
    @SequenceGenerator(name="child_gen", sequenceName="CHILD_SEQUENCE")
    private int childID;

    @Column(name="favoriteColor")
    private String favoriteColor;

    // and so forth 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T22:54:00.817

```
select p from Parent p join p.childList c
    where p.name = 'John' and c.favoriteColor = 'blue' 
```

这将返回一个`List<Parent>`.

[您可以在hql 参考](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)中查看所有这些

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:18:59.230

尝试如下操作：

```
from Parent as parent
    left join parent.childList as children
        with children.favoriteColor = 'blue'
where parent.name = 'John' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-10T08:04:50.943

```
 public class Clients implements Serializable  {
  @Id
   @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
      @OneToMany(cascade = { CascadeType.ALL},orphanRemoval=true)
       @JoinColumn(name="client_id")
        List<SmsNumbers> smsNumbers;
        }

 @Table(name="smsnumbers")
  public class SmsNumbers implements Serializable {
    @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
    int id;
String number; //getter and setter
} 
```

在子类的基础上，我使用以下标准以单向关系获取父类 -

```
 Session session = HibernateUtil.openSession();
    try{
        Criteria criteria=session.createCriteria(Clients.class);
    criteria.createAlias("smsNumbers", "child");
    criteria.add(Restrictions.eq("child.number", phone).ignoreCase());
    Clients cli=(Clients) criteria.list().get(0);
    System.out.println(cli.getId());
    }catch (Exception e) {
        // TODO: handle exception
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-17T21:03:44.020

你需要做的---父母“左加入获取”孩子与你的条件。

“ **left join fetch** ”在 List<Parent> 中给出结果

如果没有 Fetch，它将是 List，其中 object[0] = parent 和 object[1] = child。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T17:14:55.353

```
Criteria criteria=session.createCriteria(Parent.class);
criteria.add(Restrictions.eq("name", "John"));
criteria.createAlias("childList", "child");
criteria.add(Restrictions.eq("child.favoriteColor", "Blue").ignoreCase()); 
```

您也可以尝试使用标准 API。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T23:26:49.147

JPQL 提供了一种特殊的语法，在这些情况下，它使事情变得更容易，并帮助您以面向对象的方式思考：

```
SELECT p FROM Parent P, IN (P.childList) C 
WHERE P.name='John' and C.favoriteColor='blue'; 
```

运算符 IN 迭代列表，从而避免使用 JOIN。

# asp.net-mvc-3 - 在 MVC 3 中使用编辑器模板和 EditorFor 时动态添加行

> ID：11024126
> 
> 赞同：2
> 
> 时间：2012-06-13T22:17:44.273
> 
> 标签：asp.net-mvc-3

扩展上[一个问题](https://stackoverflow.com/questions/10984727/select-items-from-listt-in-mvc-4-using-model-binding)，我使用 EditorFor 来编辑类型对象的列表（比方说）`Hobby`。

现在，我需要实现为单个`Hobby`对象添加编辑器的功能，以便用户可以添加其他爱好。

我阅读了[Steven Anderson 的](http://blog.stevensanderson.com/2008/12/22/editing-a-variable-length-list-of-items-in-aspnet-mvc/)关于如何在 MVC 2 中执行此操作的博客。但是，他使用循环和 RenderPartial 来渲染各个 Hobby 实例，而不是使用 EditorFor。我了解他进行 Ajax 调用以呈现另一个局部视图并将视图结果插入 DOM 的方法，但不知道如何在我的情况下使用 EditorFor 应用 Ajax 添加。

他的代码：

```
<% foreach (var item in Model)
    Html.RenderPartial("GiftEditorRow", item);
%> 
```

我的代码像这样使用 EditorFor：

```
// Model is a List<Hobby>
@Html.EditorFor(model => model.AllowedSurveys) 
```

**鉴于编辑器是作为编辑器模板而不是作为局部视图实现的，我如何添加额外的爱好编辑器？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:37:52.550

您可以用部分替换您的编辑器模板：

```
@foreach (var item in Model.AllowedSurveys)
{
    Html.RenderPartial("_Hobby", item);
} 
```

在部分 ( `~/Views/controllerName/_Hobby.cshtml`) 内：

```
@model Hobby
<div class="editorRow">
    @using(Html.BeginCollectionItem("AllowedSurveys")) 
    {
        @Html.EditorFor(x => x.Name)
        ...
    }
</div> 
```

自`Html.BeginCollectionItem`定义助手用于生成带有 Guid 的名称，并允许使用 javascript 重新排序和添加新项目到集合中。您可以从[更新的文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)中下载它。您正在阅读的是 ASP.NET MVC 1 并且已过时。

# ruby-on-rails - Rails：表格输入类型中的Simpleform = text_area-如何设置其高度？

> ID：11024130
> 
> 赞同：2
> 
> 时间：2012-06-13T22:18:20.297
> 
> 标签：ruby-on-rails, ruby, forms, html-table, simple-form

我正在为我的 Rails 应用程序使用“Simpleform”gem，并且我在表格中嵌入了一个表单。

表单的元素之一是 text_area。但是，由于这种输入类型，表格的整行非常高。我想设置它的高度，这样行就不会那么高了。

我该怎么做我尝试了以下但似乎并没有改变任何东西

```
 <% @listings.each do |listing| %>  
<%= simple_form_for(listing, :html => {:multipart => true, :class=> '.form-inline'} ) do |f| %>
<tr>
    <td><%= listing.id %></td>
    <td><%= listing.name %></td>
    <td><%= f.input :telephone %></td>
    <td><%= f.input :fax %></td>
    <td><%= f.input :suite %></td>

    <td> <%= f.input :notes, :size => 5 %></td>
        <td> <%= f.button :submit %></td>
</tr>
<% end %>
<% end %> 
```

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T22:24:26.917

我想你想要这样的东西：

```
<td> <%= f.input :notes, :input_html => { :rows => 5 } %></td> 
```

input_html 选项将向生成的 HTML 标记添加任意属性。对于文本区域，没有“大小”属性，只有“列”或“行”。

我自己没有对此进行测试，但我已将 :input_html 用于其他 HTML 属性。让我知道你过得怎么样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:29:33.183

您可以使用 Ben 提交的代码：

```
<td> <%= f.input :notes, :input_html => { :rows => 5 } %></td> 
```

但是，使用简单表单使用的辅助类可能是一个更好的主意。从记忆中，并使用您的自定义类，这样的事情应该可以工作：

```
.form-inline .text{
  height: 300px;
} 
```

这使样式在您的 css 中保持独立，因为它应该是。

# android - 通过蓝牙 SPP 进行 Android 打印

> ID：11024131
> 
> 赞同：0
> 
> 时间：2012-06-13T22:18:22.373
> 
> 标签：android, printing, bluetooth

我需要在我的 android 应用程序中打印纯文本。据我所知，我需要为我的设备创建一个带有 SPP UDID 的套接字。

我见过的示例代码，人们只是从 Socket 获取一个 OutputStream，然后将字符串与他们想要打印的文本一起推送。

就这么简单吗？只需通过 OutputStream 推送文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:55:13.370

试试这个打印文本：

```
 try {
             Socket clientSocket = null;
             DataOutputStream outToServer;

             try {
                clientSocket = new Socket("192.168.101.64", 9100);
            } catch (UnknownHostException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

             outToServer = new DataOutputStream(clientSocket.getOutputStream());

             outToServer.writeUTF("Some string to print");
            }

             outToServer.close();
             clientSocket.close();
             } catch (IOException e) {
                e.printStackTrace();
            } 
```

# python - Python列表索引奇怪的行为

> ID：11024138
> 
> 赞同：0
> 
> 时间：2012-06-13T22:18:50.290
> 
> 标签：python, list, jython

我有一段代码在以下`list.index`功能上以某种方式失败：

```
for line in flines:
    for match in bad_data_regex.findall(line):
        assert line in flines
        index = flines.index(line)
        flines.pop(index)
        # other code that does not modify flines .... 
```

我的代码失败：

```
ScriptEngine.execute:Error in script Traceback (innermost last):
  File "<string>", line 168, in ?
ValueError: list.index(x): x not in list 
```

如果该值确实不在列表中，我应该在函数`AssertionError`之前得到一个。`list.index`

我在 Java 版本 1.6.0_18 下使用 Jython 2.2.1。

这怎么可能？

编辑：

原来产生该错误的代码不是我上面发布的。我的 Jython 解释器给了我错误的行号，并且碰巧落在了上面带有 index 函数的行上。

上面的代码确实按我的预期工作，尽管我意识到在迭代列表时修改列表并不是最佳实践。将来我会尽量避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:31:16.273

这可能是由于`flines.pop(index)`零件的原因。在迭代列表时更改列表总是一个坏主意。

考虑这个例子：

```
In [1]: a = range(5)

In [2]: for i in a:
   ...:     print a.pop()
   ...: 
4
3
2

In [3]: a
Out[3]: [0, 1] 
```

# ant - 如何将 Ant 任务应用于字符串中的值列表

> ID：11024140
> 
> 赞同：2
> 
> 时间：2012-06-13T22:18:58.527
> 
> 标签：ant

我正在编写一个 Ant 脚本，旨在模仿 VSS 的“影子文件夹”概念，作为从 VSS 迁移到 Subversion 的权宜之计（无需重新配置我们的构建管理软件）。该脚本相当简单：

*   创建构建文件夹
*   从 Subversion 提取源文件到构建文件夹
*   翻译源文件
*   将源代码和目标代码文件从构建文件夹复制到用于部署的最终位置

在我将整个主干拉入构建文件夹并从那里开始的情况下，所有工作都“正常”...除了“构建”需要 30 多分钟，我希望将其作为帖子的一部分启动-commit 事件（再次模仿 VSS 的“影子文件夹”功能，该功能将所有文件的“最新”副本保存在独立于 VSS 数据库的文件夹中，并根据所有签入进行更新）。

我一直在修改脚本，目标是对已更改的文件进行更有针对性的下载（svn diff 给了我文件列表，svn export 可用于单独拉下它们，我相信） .

现在，要问一个问题：有没有办法使用 Ant Core 来“迭代地”调用列表中每个元素的目标？这是此处发布的问题的重复：

[在 ant 中，如何在文件列表上应用目标（没有 ant-contrib）？](https://stackoverflow.com/questions/9278022/in-ant-how-to-apply-a-target-on-a-list-of-files-without-ant-contrib)

但我拒绝接受这不能在本地完成。这个帖子：

[如何将列表的每个元素分配给任务 Ant 的参数？](https://stackoverflow.com/questions/643352/how-to-distribute-each-element-of-a-list-to-argument-of-a-task-ant)

给了我希望，但我缺乏对 Ant 如何工作（或设计）放弃的基本理解。我希望我能做类似的事情：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Test XmlProperty" default="test" basedir=".">
   <target name="test">
      <xmlproperty file="log.xml" collapseAttributes="true" />
      <echo>Affected resources: ${log.logentry.paths.path}</echo>

      <macrodef name="svnExportFile">
         <attribute name="svnRepoUrls"/>

         <sequential>
            <loadresource property="lead.path">
               <string value="${svnRepoUrls}"/>
               <filterchain>
                  <tokenfilter>
                     <replaceregex pattern="(\w+)[,${line.separator}]*.*" replace="\1" flags="g"/>
                  </tokenfilter>
               </filterchain>
            </loadresource>

            <loadresource property="rest.paths">
               <string value="${svnRepoUrls}"/>
               <filterchain>
                  <tokenfilter>
                     <replaceregex pattern="(\w+)[,${line.separator}]*(.*)" replace="\2" flags="g"/>
                  </tokenfilter>
               </filterchain>
            </loadresource>

            <echo message="${lead.path}"/>
            <echo message="${rest.paths}"/>

            <svnExportFile svnRepoUrls="${rest.paths}"/>
         </sequential>
      </macrodef>

      <svnExportFile svnRepoUrls="${log.logentry.paths.path}"/>
   </target>
</project> 
```

虽然我没有正则表达式工作得很好。这是对Ant的重大违反吗？我应该放弃希望并简单地使用 Ant-contrib 运行吗？我采用它的速度很慢，因为它似乎自 2008 年以来没有更新，我希望限制所有这些东西工作所需的依赖数量。

有什么想法吗？

编辑：我越来越接近（有点）......上面的代码在最初的帖子中没有正确引用，我在发布之前没有机会尝试它（需要离开并且不想失去我输入的所有内容）。无论如何，没有办法停止递归（我怀疑属性是不可变的，因此不会像我希望的那样重置），所以它不起作用（还没有？）。

我试图完成与上面相同的基本概念（我知道它不受欢迎，但它非常方便，因为它允许您通过 if/unless 属性有条件地执行任务）——但这不起作用，因为 Ant显然不想允许递归：

'antcall 任务调用它自己的父目标'

并尝试通过依赖启动递归：

'循环依赖：svn.export.file <- svn.export.file'

如果有人好奇，这里是版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Test XmlProperty" default="test" basedir=".">
   <target name="test">
      <xmlproperty file="log.xml" collapseAttributes="true" />
      <echo>Affected resources: ${log.logentry.paths.path}</echo>

      <antcall target="svn.export.file" inheritAll="false">
         <param name="svnRepoUrls" value="${log.logentry.paths.path}"/>
      </antcall>
   </target>

   <target name="svn.export.file" if="svnRepoUrls">
      <loadresource property="lead.path">
         <string value="${svnRepoUrls}"/>
         <filterchain>
            <tokenfilter>
               <replaceregex pattern="(\w+)[,${line.separator}]*.*" replace="\1" flags="g"/>
            </tokenfilter>
         </filterchain>
      </loadresource>

      <loadresource property="rest.paths">
         <string value="${svnRepoUrls}"/>
         <filterchain>
            <tokenfilter>
               <replaceregex pattern="(\w+)[,${line.separator}]*(.*)" replace="\2" flags="g"/>
            </tokenfilter>
         </filterchain>
      </loadresource>

      <echo message="${lead.path}"/>
      <echo message="${rest.paths}"/>

      <antcall target="svn.export.file" inheritAll="false">
         <param name="svnRepoUrls" value="${rest.paths}"/>
      </antcall>

   </target>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:37:27.780

我承认，它很丑……而且我不太确定我是否会坚持使用它作为我的解决方案（我想我可能会继续安装 ant-contrib，因为这个“代码”既丑陋又令人困惑) - 但它似乎起到了作用，它*证明*了我的理论，是的，你可以为列表中的每个元素调用一个目标，而无需依赖 !

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Test XmlProperty" default="test" basedir=".">
   <target name="test">
      <xmlproperty file="log.xml" collapseAttributes="true" />
      <echo>Affected resources: ${log.logentry.paths.path}</echo>

      <antcall target="svn.export" inheritAll="false">
         <param name="svn.repo.urls" value="${log.logentry.paths.path}"/>
      </antcall>
   </target>
   <target name="svn.export" if="svn.repo.urls">
      <macrodef name="svnExportFile">
         <attribute name="urls"/>

         <sequential>
            <macrodef name="parsePath">
               <attribute name="property"/>
               <attribute name="replacePart"/>

               <sequential>
                  <loadresource property="@{property}">
                     <string value="@{urls}"/>
                     <filterchain>
                        <tokenfilter>
                           <replaceregex pattern="([^,]+),?(.*)" replace="@{replacePart}" flags="g"/>
                        </tokenfilter>
                     </filterchain>
                  </loadresource>
               </sequential>
            </macrodef>

            <parsePath property="lead.path" replacePart="\1"/>
            <fail>
               <condition>
                  <not>
                     <isset property="lead.path"/>
                  </not>
               </condition>
            </fail>
            <parsePath property="rest.paths" replacePart="\2"/>

            <echo>lead.path:${lead.path}</echo>
            <echo>rest.paths:${rest.paths}</echo>

            <antcall target="svn.export.deux"/>
         </sequential>
      </macrodef>

      <svnExportFile urls="${svn.repo.urls}"/>
   </target>
   <target name="svn.export.deux" if="rest.paths">
      <echo>rest.paths:${rest.paths}</echo>
      <echo>svn.repo.urls:${svn.repo.urls}</echo>
      <antcall target="svn.export" inheritAll="false">
         <param name="svn.repo.urls" value="${rest.paths}"/>
      </antcall>
   </target>
</project> 
```

# iphone - AVCaptureSessionPresets（照片/高/中/低）：每种设备类型的特定图像分辨率？

> ID：11024144
> 
> 赞同：1
> 
> 时间：2012-06-13T22:19:31.083
> 
> 标签：iphone, ios, ios5, avcapturesession

我在开发 (iOS5+) 中有一个通用照片类型应用程序，并希望为用户提供设置默认图像分辨率的选项，为他们提供有关图像尺寸和每张图像的近似文件大小的一些反馈。由于现在有如此多的设备具有不同的摄像头功能，并且设备上的前置和后置摄像头之间的功能不同，这似乎有些复杂。

具体来说：

*   假设这些预设因每台设备的摄像头功能而异（例如，糟糕的 iPad 2 前置摄像头“照片”res 会产生比 iPhone 4G 更小的图像，我错了吗？

*   如何确定每个摄像头的 、 等图像尺寸`AVCaptureSessionPresetPhoto`（ `AVCaptureSessionPresetHigh`按设备、正面 + 背面）。如果我知道大小，我可以猜测给定压缩的文件大小。

# sql - 查询中的引号和双引号混淆

> ID：11024146
> 
> 赞同：1
> 
> 时间：2012-06-13T22:19:38.730
> 
> 标签：sql, sql-server, sql-server-2008, tsql, ssms

我有一个很好用的查询：

```
CREATE Procedure BCP_Text_File
(  
    @table varchar(100),  
    @FileName varchar(100)  
)  
AS
    If exists(Select * from information_Schema.tables where table_name=@table)
    Begin
        Declare @str varchar(1000)  
        set @str='Exec Master..xp_Cmdshell ''bcp "Select * from '+db_name()+'..'+@table+'" queryout "'+@FileName+'" -c'''  
        Exec(@str)  
    end
    else
        Select 'The table '+@table+' does not exist in the database' 
```

但我需要在其中添加：

```
select column_name 
from information_schema.columns
where table_name = @table
order by ordinal_position 
```

到目前为止，我有：

```
 alter Procedure BCP_Text_File
   (  
      @table varchar(100),  
      @FileName varchar(100)  
    )  
    AS 
       If exists(Select * from information_Schema.tables where table_name=@table)
       Begin
           Declare @str varchar(1000)  
           set @str='Exec Master..xp_Cmdshell ''bcp "

           select column_name 
           from information_schema.columns
           where table_name = '+db_name()+'..'+@table+'
           order by ordinal_position

           Select * from '+db_name()+'..'+@table+'" queryout "'+@FileName+'" -c'''  
           Exec(@str)  
       end
       else
           Select 'The table '+@table+' does not exist in the database' 
```

但我认为我放错了单引号和/或双引号。我正在添加此选择语句，以便我的结果将字段名称作为第一行。

非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:51:34.727

也许这就是你想要的？这假设（a）您的列名中没有逗号，并且（b）每列的输出在隐式转换为字符串时是可以的。

```
ALTER PROCEDURE dbo.BCP_Text_File
    @table    NVARCHAR(255),  
    @filename VARCHAR(100)  
AS
BEGIN
  SET NOCOUNT ON;

  IF OBJECT_ID(@table) IS NOT NULL
  BEGIN
    DECLARE 
        @sql NVARCHAR(MAX), 
        @cols NVARCHAR(MAX) = N'';

    SELECT @cols += ',' + name
      FROM sys.columns
      WHERE [object_id] = OBJECT_ID(@table)
      ORDER BY column_id;

    SELECT @cols = STUFF(@cols, 1, 1, '');

    SET @sql = N'EXEC master..xp_cmdshell ''bcp "SELECT ''''' 
        + REPLACE(@cols, ',', ''''',''''') + ''''' UNION ALL SELECT ' 
        + 'RTRIM(' + REPLACE(@cols, ',', '),RTRIM(') + ') FROM ' 
        + DB_NAME() + '..' + @table + '" queryout "' + @filename + '" -c''';  

    EXEC sp_executesql @sql;
  END
  ELSE
  BEGIN
    SELECT 'The table '+@table+' does not exist in the database';
  END
END
GO 
```

但我必须同意你从其他人那里得到的关于这个和其他问题的建议——这种方法非常脆弱。你正试图用压路机打开开心果。

PS 我删除了对的引用`INFORMATION_SCHEMA`，因为我认为[目录视图更可靠且更一致](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)。

# c# - 如何确定或删除 C# Windows 窗体应用程序中所有未使用的嵌入式资源？

> ID：11024151
> 
> 赞同：0
> 
> 时间：2012-06-13T22:19:59.710
> 
> 标签：c#, .net

我正在制作一个使用大量嵌入式资源（图像、图标、...）的 C# Windows 窗体应用程序。经过长时间的编辑、添加和删除窗体中的对象后，当前没有使用许多资源。我尝试自己删除未使用的资源，但我发现这样做太难了，因为我不记得项目中所有未使用的资源。有没有一种简单的方法可以从我的项目中查找或删除未使用的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:22:56.057

您应该确保所有这些资源都在实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)`using()`并在块内使用它们。

[来自MSDN](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)的示例：

```
using (Font font1 = new Font("Arial", 10.0f))
{
   //font1 will have it's Dispose() method automatically called afterwards
} 
```

这样您就不必记住处置这些资源，因为它们会自动发生。

不要忘记垃圾收集器还会清除不再引用的对象，这是在托管环境中编码的美妙之处！

# compiler-construction - 编译器或汇编器如何准确地将方法名称转换为动态链接的地址

> ID：11024154
> 
> 赞同：2
> 
> 时间：2012-06-13T22:20:15.087
> 
> 标签：compiler-construction, vm-implementation

我编写自己的编程语言只是为了好玩。目前我有一个基于堆叠的虚拟机、一种中间语言/汇编语言和一个高级编译器。所以无论如何，一切正常，但我需要动态链接编译的代码库。问题是我的汇编器需要知道外部库中各个方法的地址。C++ 编译器或 java 编译器究竟是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:23:25.917

对于静态链接的可执行文件，*链接器*负责将函数调用与实际地址匹配。一个目标文件将包含对其他地方函数的*符号引用*（意味着名称，而不是地址），并且链接器将在链接时将其与其他目标文件或库中的符号定义匹配。使用此方法需要您将本机机器代码生成到链接器可以理解的目标文件中。

另一种可能更适合您的 VM 情况的选项是使用*动态链接*，您的程序在运行时获取链接函数的地址。执行此操作的确切方法取决于平台；在 Windows 上，您将使用`LoadLibrary`and `GetProcAddress`，而在 Unix 风格的平台上，您将使用`dlopen`and `dlsym`。

# jquery - 扩展方法中的咖啡脚本使用方法

> ID：11024157
> 
> 赞同：0
> 
> 时间：2012-06-13T22:20:21.690
> 
> 标签：jquery, oop, coffeescript

它是我的课程的扩展版本，我无法访问新添加的方法。为什么不？

```
 class Form
        constructor : (@form) ->

            @form = $ @form

        ajaxSubmit : ->
            $.post @form.attr('action'), @form.serialize(), @submitCallback         

        submitCallback : (response) ->
            $.noop()

    class Login extends Form

        submitCallback : (response) ->
            @good() if response #this.good is not a function
            @bad() unless response #this.bad is not a function

        good : ->
            window.location = @form.attr 'data-go'

        bad : ->
            @form
                .animate({left : -100}, 100)
                .animate({left : 50}, 200)
                .animate({left : -25}, 400)
                .animate({left : 0}, 600) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:52:46.140

您的`$.post`回调是在由您选择的上下文中调用的，`$.post`并且[该上下文不是`@`您期望的](http://api.jquery.com/jQuery.ajax/)（在该页面中搜索“上下文”）：

> 默认情况下，上下文是一个对象，表示调用中使用的 ajax 设置（`$.ajaxSettings`与传递给的设置合并`$.ajax`）。

您应该`submitCallback`使用[粗箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)定义您的对象，以将其绑定到您的对象：

```
submitCallback: (response) =>
    #... 
```

# symfony1 - 向 sfGuard 用户管理表单添加新用户字段

> ID：11024158
> 
> 赞同：1
> 
> 时间：2012-06-13T22:20:41.973
> 
> 标签：symfony1, symfony-1.4, symfony-forms, sfguard

我正在尝试在 sfGuard 插件的用户表单中添加一个自定义字段。

我已经在数据库中创建了该列并为该字段添加了 widgetschema。它在表单中正确显示，当添加和提交文本时，它显示更新成功。但是，插入该字段的数据并未填充到数据库中。

我想我必须更新 sfGuard 的模型，因为它不知道新字段。我试过`$ ./symfony doctrine:build-model`了，但这似乎并没有更新 sfGuard 插件中的类。

我已将此添加到 sfGuardUserAdminClass ：

```
$this->widgetSchema['department_title'] = new sfWidgetFormInputText();
$this->validatorSchema['department_title'] = new sfValidatorString(array()); 
```

我可以看到表单字段并提交，它只是没有捕获数据并将其插入到数据库中。

**更新**

我已经用 MyUser 对象更新了我的架构，迁移了差异并构建了模型。我`$this->embedRelation('Profile');`在 sfGuardUserAdminForm.class 中添加了。我收到此错误

```
"Catchable fatal error: Argument 1 passed to sfUser::__construct() must be an instance of sfEventDispatcher, instance of MyUserTable given, called in /Users/careyestes/Sites/sva/lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Table.php on line 301 and defined in /Users/careyestes/Sites/sva/lib/vendor/symfony/lib/user/sfUser.class.php on line 46 Fatal error: Call to a member function evictAll() on a non-object in /Users/careyestes/Sites/sva/lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Connection.php on line 1239" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:11:17.040

如果你真的想在用户模型中添加一个字段，你必须修改 schema.yml 中的配置`plugins/sfDoctrineGuardPlugin/config/doctrine/schema.yml`。找到表 sfGuardUser 并添加您的列。但这不是好方法，因为如果您更新插件，您将丢失您的更改。

最好是创建一个专用表，该表将通过一对一的关系链接到 sfGuardUser 模型。在您的 config/doctrine/schema.yml 创建表 MyUserProfile：

```
MyUserProfile:
  columns:
    id: { type: integer, primary: true, autoincrement: true }
    sf_guard_user_id: { type:integer }
    department_title: { type: string(255) }
    # ... other column definitions
  relations:
    User:
     class: sfGuardUser
     foreignType: one
     foreignAlias: Profile
     local: sf_guard_user_id
     onDelete: CASCADE 
```

全部重建后，可以通过以下方式访问自定义属性：

```
$context->getUser()->getProfile()->getDepartementTitle(); 
```

您可以将生成的 MyUserProfileForm 表单嵌入到您的 sfGuardUserAdminForm 表单中：

```
$this->embedRelation('Profile'); 
```

# jquery - 带有 animate() 的函数使用显示/隐藏在 IE 中显示奇怪的闪烁

> ID：11024159
> 
> 赞同：0
> 
> 时间：2012-06-13T22:20:43.220
> 
> 标签：jquery, jquery-animate, show-hide

我创建了一个小功能区，单击我的页面即可滑动打开和关闭。当我在 XP Pro 的 IE7 中查看功能区动画时，一切正常，直到功能的“隐藏”部分结束。

该功能的“隐藏”部分向上滑动要隐藏的元素，当它完成隐藏时，该元素在页面上闪烁，然后再次消失。

以下代码中是否有某些内容会导致我不知道的这种行为？

另外，这是一个小提琴（在所有其他浏览器中都可以正常工作）... [Slider ribbon jsfiddle](http://jsfiddle.net/VyEBV/1/)

这是我的脚本：

```
$(document).ready(function(){
    $('.extender').animate({
            height: 'hide'
        }, 20);
    $('.special_offers_ribbon_showmore').hover(
    function(){
        $(this).css('cursor', 'pointer');
    },
    function(){
        $(this).css('cursor', 'auto');
    });
    $('.special_offers_ribbon_showmore').click(function(){
        if ($('.extender').hasClass('extended')) {
            $('.extender').animate({
            height: 'hide'
        }, 500, function(){
            $('.extender').removeClass('extended');
            $('.hidedetails').hide();
            $('.showdetails').show();
        });
        } else {
        $('.extender').animate({
            height: 'show'
        }, 200, function(){
            $('.extender').addClass('extended');
            $('.hidedetails').show();
            $('.showdetails').hide();

        });
        }
    });
}); 
```

**编辑**根据评论，我尝试使用`slideUp()`and`slideDown()`并且我仍然在`slideUp()`函数结束时得到闪烁。这是纸条（我更喜欢它 - 看起来更干净......）：

```
$('.special_offers_ribbon_showmore').hover(

function() {
    $(this).css('cursor', 'pointer');
}, function() {
    $(this).css('cursor', 'auto');
});
$('.special_offers_ribbon_showmore').click(function() {
    if ($('.extender').is(':hidden')) {
        $('.extender').slideDown(
            'slow', 
            function() {
            $('.hidedetails').show();
            $('.showdetails').hide();
        });
    } else {
        $('.extender').slideUp(
            'slow',
            function() {
            $('.hidedetails').hide();
            $('.showdetails').show();

        });
    }
});​ 
```

的HTML：

```
<div id="special_offers_ribbon">
<div id="special_offers_ribbon_detail" class="extender">
<img src="../images/ribbon_top.png">
<h1>Book a new meeting for 2012 and save!</h1>
<p>Free meeting space</p>
<p>No set-up fee</p>
<p>Free A/V Packages</p>
<p>&hellip; and much more!</p>
<a href="../events/index.cfm" title="See a full list of the 2012 Meetings and Events special offers here."><img src="../images/learn_more.png"></a>
                                            </div>
 <div id="special_offers_ribbon_opener">
 <img src="../images/ribbon_top.png">
 <h1 class="opener_headline">2012</h1>
 <p class="opener_text">Meetings &amp; Events<br />Special Offers<br /><span class="showdetails special_offers_ribbon_showmore"><img src="../images/showdetails.png" title="Show Details"></span><span class="hidedetails special_offers_ribbon_showmore"><img src="../images/hidedetails.png" title="Hide Details"></span></p>
 </div>
 </div> 
```

而且，CSS：

```
p.ribbon_room {
    padding:0 210px 0 0;
}
#special_offers_ribbon {
    width:267px;
    float:right;
    padding:0px 0px 110px 0px;
    margin:0px 0px;
    background:transparent url(../images/ribbon.png) bottom center no-repeat;
    text-align:center;
}
#special_offers_ribbon h1 {
    margin:1px 50px 0 50px;
    padding:10px 0 0 0;
    border-top:1px dotted #eee7c6;
    color:#eee7c6;
}
#special_offers_ribbon p {
    margin:0 50px 0 50px;
    padding:0;
    color:#eee7c6;
}
#special_offers_ribbon p span.hidedetails {
    display:none;
}
#special_offers_ribbon div#special_offers_ribbon_detail a img{
    border:none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:18:54.170

我刚刚通过以下方式解决了您的问题：

*   设置`#special_offers_ribbon`元素的`position`to`relative`和`top`to`-210px`
*   动画`top`而不是`height`属性。

它并不漂亮——但它可以工作，只要您的元素位于已`overflow:hidden`应用的容器内的视口顶部。

[在这里工作小提琴](http://jsfiddle.net/VyEBV/4/)

# python - 在 Python 中，为什么我不能这样做： import A; ABCfoo()

> ID：11024164
> 
> 赞同：1
> 
> 时间：2012-06-13T22:21:44.167
> 
> 标签：python, python-import

换句话说，要使用`foo`我需要导入所有内容，`foo`例如：

```
from A.B.C import foo 
```

或最多

```
from A.B import C
C.foo() 
```

但我不能这样做：

```
from A import B
B.C.foo() 
```

这给了我类似的东西`'module' object has no attribute "C"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T22:32:30.030

文档解释了原因：[http ://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)

> 每个模块都有自己的私有符号表，它被模块中定义的所有函数用作全局符号表。因此，模块的作者可以在模块中使用全局变量，而不必担心与用户的全局变量发生意外冲突。另一方面，如果您知道自己在做什么，则可以使用与引用其函数时相同的符号 modname.itemname 来触摸模块的全局变量。

[http://docs.python.org/tutorial/classes.html#python-scopes-and-namespaces](http://docs.python.org/tutorial/classes.html#python-scopes-and-namespaces)：

> 严格来说，模块中对名称的引用是属性引用：在表达式 modname.funcname 中，modname 是一个模块对象，funcname 是它的一个属性。在这种情况下，模块的属性和模块中定义的全局名称之间恰好有一个直接的映射：它们共享相同的命名空间！

所以简单地说 BC 没有被导入，并且在上一个示例中不知道。但这会起作用：

```
from A import B.C
B.C.foo() 
```

# php - 正则表达式从句子中删除所有包含数字的单词

> ID：11024174
> 
> 赞同：3
> 
> 时间：2012-06-13T22:23:03.983
> 
> 标签：php, regex

我尽力删除了句子中带有数字的所有单词，但仍然不成功！我什至尝试了以下正则表达式：

```
$regex = '/(\\s+\\w{1,2}(?=\\W+))|(\\s+[a-zA-Z0-9_-]+\\d+)/';
$x=preg_replace($regex,"",$x); 
```

我正在尝试完成以下任务：

包含数字和任何特殊字符（例如 - 和 _）的单词的原始文本：

```
This is S3F8G m7j34m h98H40D-3D39 90843-432423 LSDF3 4X4it very good 343c3. 
```

最终文本需要如下：

```
This is very good. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:47:08.667

```
<?php

$x="This is S3F8G m7j34m h98H40D-3D39 90843-432423 LSDF3 4X4it very good 343c3.";
$re="/ ?\b[^ ]*[0-9][^ ]*\b/i";
print preg_replace($re, "", $x) . "\n"; 
```

返回：

```
This is very good. 
```

一个附带条件：由于此正则表达式去除前导空格而不是尾随空格，因此如果第一个单词包含数字，则结果将在前面加上空格。因此：

```
<?php

$x="9abc foo bar.";
$re="/ ?\b[^ ]*[0-9][^ ]*\b/i";
print preg_replace($re, "", $x) . "\n"; 
```

返回：

```
 foo bar
^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T23:44:07.390

这是一种（希望是）无怪癖的方式（[ideone](http://ideone.com/iF7gS)）：

```
$str = '-12x This is S3F8G m7j34m h98H40D-3D39 90843-432423 LSDF3 4X4it very good 343c3\. foo bar';
echo preg_replace('/\s+[\w-]*\d[\w-]*|[\w-]*\d[\w-]*\s*/', '', $str); 
```

输出：

```
This is very good. foo bar 
```

您想要包含在单词中的任何特殊字符都需要添加到字符类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T22:28:35.917

好吧，我用 Javascript 写了：

```
var str = 'This is S3F8G m7j34m h98H40D-3D39 90843-432423 LSDF3 4X4it very good 343c3.';
var result = str.match(/(^[\D]+\s|\s[\D]+\s|\s[\D]+$|^[\D]+$)+/g).join(''); 
```

但是你可以在 PHP 中试试这个：

```
<?
$str = 'This is S3F8G m7j34m h98H40D-3D39 90843-432423 LSDF3 4X4it very good 343c3.';;
preg_match_all("/(^[\D]+\s|\s[\D]+\s|\s[\D]+$|^[\D]+$)+/",$str,$result);
$result = implode('',$result[0]);
echo $result;
?> 
```

# php - 表单提交后将变量附加到 url

> ID：11024176
> 
> 赞同：4
> 
> 时间：2012-06-13T22:23:17.083
> 
> 标签：php, javascript, forms

我有这个登陆页面，我需要在提交后预先填充表单值。基本上最后我必须使网址看起来像这样......

[http://example.com/r.php?sid=xx&pub=xxxxx&c1=&c2=&c3=&append=1&firstname=Test&lastname=Smith&address=2211+Commerce+St.&city=Dallas&state=TX&zipcode=75080&email=test@test.com](http://example.com/r.php?sid=xx&pub=xxxxx&c1=&c2=&c3=&append=1&firstname=Test&lastname=Smith&address=2211+Commerce+St.&city=Dallas&state=TX&zipcode=75080&email=test@test.com)

我现在所拥有的表格是......

```
<form name="regForm" method="get" action="http://example.com/r.php?sid=xx&pub=xxxx&c1=&c2=&c3=&append=1">
    <input id="firstname" class="text" type="text" name="firstname"/><br>
    <input id="lastname" class="text" type="text" name="lastname" /><br>
    <input id="email" class="text" type="text"  name="email" /><br>
    <input id="address" class="text" type="text" /><br>
    <input id="city" class="text" type="text"/><br>
    <input id="zipcode" class="text" type="text" maxlength="5" name="zipcode" /><br>
    <input type="submit" value="Send Me My FREE List" id="submitBtn2"/>
</form> 
```

提交表单后，如何在上面创建该 URL？我整天为此绞尽脑汁，无法弄清楚，我觉得我很接近。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T22:32:55.647

将额外的参数包含为隐藏的表单字段，而不是内联查询参数：

```
<form name="regForm" method="get" action="http://example.com/r.php">
    <input type="hidden" name="sid" value="xx" />
    <input type="hidden" name="pub" value="xxxx" />
    <input type="hidden" name="c1" value="" />
    <input type="hidden" name="c2" value="" />
    <input type="hidden" name="c3" value="" />
    <input type="hidden" name="append" value="1" />

    <input id="firstname" class="text" type="text" name="firstname"/><br>
    <input id="lastname" class="text" type="text" name="lastname" /><br>
    <input id="email" class="text" type="text"  name="email" /><br>
    <input id="address" class="text" type="text" /><br>
    <input id="city" class="text" type="text"/><br>
    <input id="zipcode" class="text" type="text" maxlength="5" name="zipcode" /><br>
    <input type="submit" value="Send Me My FREE List" id="submitBtn2"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:33:11.203

问题是输入字段获取变量导致您的 url 获取变量被截断，将所有 url 参数作为隐藏值。

```
<input id="pub" type="hidden" name="pub" value=""/>
<input id="sid" type="hidden" name="sid" value=""/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T22:35:11.460

我假设您喜欢它生成的 URL，只是您缺少 sid、pub、c1、c2、c3 和 append 变量。如果是这样，只需像这样进行隐藏输入：

```
<form id="regForm" ...>
  <input id="sid" name="sid" value="" type="hidden" />
  <input id="pub" name="pub" value="" type="hidden" />
  ...
</form> 
```

如果您在创建表单时知道这些值，那么您可以在服务器端进行。如果你不这样做，那么假设你使用的是 jQuery，你将不得不做这样的事情：

```
$(function() {
  $('#regForm').submit(function () {
    $('#sid').val('myNewSidValue');
    $('#pub').val('myNewPubValue');
    ...
  });
}); 
```

# c# - 使用 Kinect SDK 的身体点云

> ID：11024182
> 
> 赞同：5
> 
> 时间：2012-06-13T22:23:38.587
> 
> 标签：c#, wpf, kinect, point-clouds

我正在使用 SDK 制作一个程序，当检测到用户时，该程序会为他们绘制一个骨架。我最近在我的 Xbox、[Nike+ Kinect](http://www.xbox.com/en-US/marketplace/product/nike-kinect-training)上看到了一款游戏广告，并看到它如何显示角色的副本，并执行其他操作，例如：

[http://www.swaggerseek.com/wp-content/uploads/2012/06/fcb69__xboxkinect1.jpg](http://www.swaggerseek.com/wp-content/uploads/2012/06/fcb69__xboxkinect1.jpg)

或者

[http://www.swaggerseek.com/wp-content/uploads/2012/06/fcb69__xboxkinect.jpg](http://www.swaggerseek.com/wp-content/uploads/2012/06/fcb69__xboxkinect.jpg)

我可以创建唯一检测到的人（不是任何背景）的点云表示吗？提前致谢！

* * *

**编辑**

使用[这个站点](http://www.i-programmer.info/ebooks/practical-windows-kinect-in-c/4126-kinect-sdk1-a-3d-point-cloud.html)，我可以创建点云，但仍然无法围绕人的身体进行裁剪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T02:37:07.597

您可以对点进行非常简单的三角测量。检查本教程：

[http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/Terrain_basics.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/Terrain_basics.php)

检查结果：

![在此处输入图像描述](../Images/bce423253af72e06b9af49a88c3ac144.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T21:33:30.957

看起来他们显示的不是完整的点云，而是蓝色阴影强度图。这可以通过 Kinect for Windows sdk 中的深度图像来完成。您正在寻找的是玩家索引。这是深度图像的每个像素中提供的位。为了获得播放器索引位，您还必须在初始化代码中启用骨架流。

所以我会这样做。我正在修改[此处](http://channel9.msdn.com/Series/KinectQuickstart/Working-with-Depth-Data)找到的 Kinect for Windows SDK 快速入门之一，将其加载并进行以下更改：

```
//Change image type to BGRA32
image1.Source = 
                BitmapSource.Create(depthFrame.Width, depthFrame.Height, 
                96, 96, PixelFormats.Bgra32, null, pixels, stride); 

        //hardcoded locations to Blue, Green, Red, Alpha (BGRA) index positions       
        const int BlueIndex = 0;
        const int GreenIndex = 1;
        const int RedIndex = 2;
        const int AlphaIndex = 3;

//get player and depth at pixel
int player = rawDepthData[depthIndex] & DepthImageFrame.PlayerIndexBitmask;
int depth = rawDepthData[depthIndex] >> DepthImageFrame.PlayerIndexBitmaskWidth;

//check each pixel for player, if player is blue intensity.

            if (player > 0)
            {
                pixels[colorIndex + BlueIndex] = 255;
                pixels[colorIndex + GreenIndex] = intensity;
                pixels[colorIndex + RedIndex] = intensity;
                pixels[colorIndex + AlphaIndex] = 100;

            }
            else
            {
                //if not player make black and transparent
                pixels[colorIndex + BlueIndex] = 000;
                pixels[colorIndex + GreenIndex] = 000;
                pixels[colorIndex + RedIndex] = 000;
                pixels[colorIndex + AlphaIndex] = 0;
            } 
```

我喜欢使用这个示例来测试颜色，因为它仍然为您提供右侧的深度查看器。我附上了下面运行的这种效果的图像：

![在此处输入图像描述](../Images/059b580af3587ff417c621cbebf280cb.png)

左边的图像是带有轻微彩色像素级强度数据的强度图。

希望能帮助大卫·贝茨

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T22:30:05.987

官方 Kinect SDK 无法自动实现这一点。但它是在称为 OpenNI 的替代 SDK 中实现的，您可以在那里获取用户组成的点集。如果您不想使用它，我可以建议将用户与背景分开的相当简单的方法。由于您知道用户的 z 位置，您可以只取 z 从 0 到 userZ 的点 + 一些代表身体厚度的值。

另一个想法是从某个关节（或多个关节）开始遍历点云，并且仅在距离平滑变化时才取点，因为如果您取背景点、边界主体和下一个主体点，距离下降将很容易被注意到。这里的问题是你将开始计算地板作为身体的一部分，因为那里的过渡是平滑的，所以你应该使用最低（脚踝）关节来验证它。

或者您可以在 PCL 中使用分段（[http://docs.pointclouds.org/trunk/group__segmentation.html](http://docs.pointclouds.org/trunk/group__segmentation.html)），但我不知道是否解决了脚底问题。看起来他们很擅长（[http://pointclouds.org/documentation/tutorials/planar_segmentation.php](http://pointclouds.org/documentation/tutorials/planar_segmentation.php)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T00:35:02.100

Kinect for Windows SDK v1.5 有一个可以为此修改的示例。

样本名称：depth-d3d 或 depthwithcolor-d3d。

他们都做点云。

# python - 为什么它删除了密钥 a 和密钥 c，而不仅仅是密钥 c？

> ID：11024185
> 
> 赞同：0
> 
> 时间：2012-06-13T22:23:48.923
> 
> 标签：python

我正在开发一个程序来从字典内的列表中删除空白值，但是如果整个值由一个仅包含一个空格的数组组成，我需要删除包含单个空格的元素。

```
def CleanWhiteSpace(theDict) :
    stuff=[]
    for key2 in theDict.keys():
        for value2 in theDict.values(): 
            if value2 == [' ']:
                print key2
                del theDict[key2]
                print "hi"

    print theDict
    for key,value in theDict.iteritems():
        for d in value:
            print value
            if d != ' ':
                    stuff.append(d)    
            theDict[key]=stuff
        stuff=[]

    return theDict
print CleanWhiteSpace({'a':['1','2'],'b':['3',' '],'c':[' ']}) 
```

我只希望它删除密钥 c。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:29:11.263

对于每个键，您应该只查看单个值，而不是循环遍历`theDict.values()`.

```
def CleanWhiteSpace(theDict) :
    stuff=[]
    for key2 in theDict.keys():  # this is the line I changed
        if theDict[key2] == [' ']:
            print key2
            del theDict[key2]
            print "hi"

    print theDict
    for key, value in theDict.iteritems():
        for d in value:
            print value
            if d != ' ':
                    stuff.append(d)
            theDict[key]=stuff
        stuff=[]

    return theDict
print CleanWhiteSpace({'a':['1','2'],'b':['3',' '],'c':[' ']}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T22:27:01.997

你的嵌套循环

```
for key2 in theDict.keys():
    for value2 in theDict.values(): 
        if value2 == [' ']:
            print key2
            del theDict[key2]
            print "hi" 
```

循环遍历每个键的所有值。结果取决于字典决定返回键的顺序——如果`"c"`最后访问键，你甚至可能会得到一个空字典。

您想要的是以下内容（Python 2.x）：

```
for key, value in theDict.items():
    if value == [" "]:
        del theDict[key] 
```

您是否还需要删除仅包含*两个*空格条目的值？在这种情况下，首先删除空格，然后删除所有空列表会更容易：

```
d = {}
for key, value in theDict.iteritems():
    d[key] = [x for x in value if x != " "]
return {k: v for k, v in d.iteritems() if v} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T22:30:38.310

其他人已经指出了您现有代码中的问题，但是，有一个更好的解决方案来解决这个问题：

```
{key: values for key, values in ((key, [item for item in values if not item == " "]) for key, values in data.items()) if values} 
```

在这里，我们结合使用[dict 和列表推导，以及生成器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)。我们首先使用生成器表达式来获取每个字典项并从列表中删除任何单个空格字符串。然后，我们使用 dict 推导从这些数据中重建字典，忽略任何具有空值的项目（它们都已被删除）。

与往常一样，在 2.x中使用`dict.iteritems()`或。`dict.viewitems()`

编辑：请记住，如果您不喜欢庞大的代码行，可以将其分开。

```
def strip_items(items, strip):
    return [item for item in values if not item == strip]
stripped = ((key, strip_items(values, " ")) for key, values in data.items())
new_data = {key: values for key, values in stripped if values} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T22:31:14.557

尝试这个：

```
def CleanWhiteSpace(entries):
    blank_keys = [key for key in entries if all([' ' == value for value in entries[key]])]
    for key in blank_keys:
        del entries[key]
    return entries

print CleanWhiteSpace({'a':['1','2'],'b':['3',' '],'c':[' ']}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T22:36:19.610

不知道为什么您的功能不起作用，但这里有一个更短的方法：

```
clean = {k: v for k, v in dct.items() if ''.join(v).strip()} 
```

例如：

```
dct = {'a':['1','2'],'b':['3',' '],'c':[' ']}
clean = {k: v for k, v in dct.items() if ''.join(v).strip()}
print clean # {'a': ['1', '2'], 'b': ['3', ' ']} 
```

# jquery - jQuery - 选择器，嵌套子级

> ID：11024186
> 
> 赞同：-2
> 
> 时间：2012-06-13T22:24:11.097
> 
> 标签：jquery

我正在使用 slideToggle 函数来显示 div 中的 div。正在切换的 div 还包含一个带有复选框的表单。每当检查复选框时，DIV幻灯片关闭。

我怎样才能更好地使用我的选择器来避免这种情况？

JS

```
$('.head').click(function(){       
        $(this).find('div.body').slideToggle();
        return false;
    }); 
```

HTML

```
<div class="head">
Show Content 1
<div class="body" style="display:none;">Content</div>​
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:33:17.107

这里的问题是您已经使用头类将点击事件侦听器附加到您的 div 中。所有事件都会在文档对象模型中冒泡，因此单击“head div”内的任何位置都会触发事件。有几种方法可以解决这个问题。您可以停止输入元素的事件传播，也可以重组文档。我希望重组不必停止传播 div 中包含的所有内容。

```
<div class="head">Show Content 1</div>
<div class="body" style="display:none;">Content</div>

$('.head').click(function(){       
    $(this).next('div.body').slideToggle();
    return false;
});​ 
```

有更优雅的 jQuery 和 DOM 解决方案，但希望这会给你的想法。

# c++ - 解析多堆栈以找到如何正确设置方程

> ID：11024187
> 
> 赞同：-3
> 
> 时间：2012-06-13T22:24:13.340
> 
> 标签：c++, stack

自从我使用 C++ 已经有一段时间了一个“数字堆栈”和一个“运算符堆栈”中的运算符，然后制作一个优先级列表以确保首先在等式中使用正确的运算符，因此答案为 3。非常感谢任何提示，我从不使用堆栈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:31:34.527

*   [http://en.wikipedia.org/wiki/Recursive_descent_parser](http://en.wikipedia.org/wiki/Recursive_descent_parser)
*   [在 C++ 中从字符串计算算术表达式](https://stackoverflow.com/questions/9329406/evaluating-arithmetic-expressions-in-c)
*   [在 C++ 中评估数学表达式的最佳方法是什么？](https://stackoverflow.com/questions/5115872/what-is-the-best-way-to-evaluate-mathematical-expression-in-c)

# python - 允许空格和句点的 Python 刮板正则表达式

> ID：11024191
> 
> 赞同：1
> 
> 时间：2012-06-13T22:24:19.397
> 
> 标签：python, regex

我正在尝试使用允许空格和句点的正则表达式编写一个 python 刮板。

我正在尝试从某个站点获取棒球队的名称，所以有些是`Miami`（全字），有些是`San Francisco`（带空格），有些是`Chi. Cubs`（句号和空格）。

我知道城市名称之前的模式，我知道之后的模式名称，我试图找到与两者之间的所有内容匹配的东西，无论字符或空格或句点的数量如何。我更喜欢使用正则表达式，但如果它更容易使用不同的库，我对它持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:33:49.097

这是一个匹配任意数量的空格、句点或字母的正则表达式：

```
[ .a-zA-Z]+ 
```

例子：

```
>>> re.search(r'[ .a-zA-Z]+', 'Miami').group(0)
'Miami'
>>> re.search(r'[ .a-zA-Z]+', 'San Francisco').group(0)
'San Francisco'
>>> re.search(r'[ .a-zA-Z]+', 'Chi. Cubs').group(0)
'Chi. Cubs' 
```

# html - CSS div 和 :hover 位置

> ID：11024195
> 
> 赞同：0
> 
> 时间：2012-06-13T22:24:31.360
> 
> 标签：html, css

在我的网站上：Dev.stevehamber.com

我正在尝试将图像“新页面”（当前位于滑块后面）定位在其当前 DIV 之外，与右上角重叠，但它也会随着主要内容的自动边距移动。似乎无法弄清楚如何，它要么落后于某物，要么不遵循容器的自动边距。

我也遇到了 :hover 属性的问题。尝试固定位置 Div 我注意到图像/背景在固定“F”的右下角没有改变，这也与定位有关吗？：/

我试过用谷歌搜索，但无法用一句话解释自己，所以我希望这是有道理的。哈！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:31:47.023

在您的 CSS 中，添加`z-index`，如下所示：

```
img.newpage {
    position: absolute;
    right: 1px;
    z-index: 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:35:20.343

将 newpage.png 放在滑块 div 顶部的 div 中。将这两个 div 放在另一个 div 中；将 css 自动边距属性分配给此父 div。

所以像

```
<div id="slider">
  <div id="slidercontent"><!-- in here, put the slider -->
  </div>
  <div id="newpage"><!-- make newpage.png the background image of this-->
  </div>
</div> 
```

至于悬停；请更彻底地解释一下，它似乎对我有用。你是说脸书按钮吧？（它位于我的FF btw的左上角）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T22:27:16.663

给 F 一个高 z-index 以使其位于顶部

# rally - 创建首选项对象的规则

> ID：11024202
> 
> 赞同：1
> 
> 时间：2012-06-13T22:25:19.957
> 
> 标签：rally

使用 WSAPI 创建首选项对象的规则是什么？

*   您是否需要指定工作区、项目或用户或某种组合？
*   偏好名称何时与其他名称冲突？您可以为不同的用户使用相同的名称字段值吗？
*   当我尝试创建第二个首选项对象时看到以下错误：验证错误：Preference.Value 与 NAME 冲突（其中 NAME 是名称字段中的值）。是什么触发了这个？

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T16:13:24.400

*   是的，您需要指定工作区、项目或用户中的一项（且仅一项）。这是首选项的“范围”。
*   您可以为不同的范围值指定相同的名称。例如，所有这些都是有效的：
    *   名称：'A'，用户：'Bob'，值：'一些值'
    *   名称：'B'，用户：'Bob'，值：'一些值'
    *   名称：'A'，用户：'Larry'，值：'一些值'
    *   名称：'A'，工作区：'WS1'，值：'一些值'
*   但是尝试使用名称“A”和用户“Bob”创建新的首选项会失败，因为该名称/范围组合已经存在。

# android - MultiAutoCompleteTextView 建议下拉菜单始终打开

> ID：11024204
> 
> 赞同：1
> 
> 时间：2012-06-13T22:25:28.580
> 
> 标签：android, autocompletetextview

有没有办法创建 MultiAutoCompleteTextView 并保持其建议下拉菜单始终打开？

# perforce - Perforce 中 Clearcase 流的等价物

> ID：11024207
> 
> 赞同：1
> 
> 时间：2012-06-13T22:25:44.993
> 
> 标签：perforce, clearcase

我来自 Clearcase 世界，正在我的新公司学习 Perforce

Clearcase 有一个流的概念（与分支不同）。同样，Perforce 也有 Streams 的概念。

问题是 perforce 流与 Clearcase 流相同。

谢谢佩德罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T23:10:58.377

[Perforce Streams](http://www.perforce.com/product/product_features/perforce_streams)遵循与 ClearCase UCM Streams 相同的逻辑，因为它们：

*   模拟变化的流程
*   提供快速上下文切换和就地分支
*   管理流组合和依赖关系

您确实发现了父/子流层次结构的相同概念（请参阅[p4 流](http://www.perforce.com/perforce/doc.current/manuals/cmdref/stream.html)）。

主要区别在于它的内容：

*   P4 Stream 内容由您映射的路径定义（因此您可以映射任何您想要的路径）
*   UCM 流由组件的基线定义（它们是固定路径，每个组件一个：您不能指定*任何*路径）

通过新的[*虚拟*流](http://www.perforce.com/blog/120130/new-20121-virtual-streams)（Perforce 的 2012.1 版本），它们甚至允许您可视化配置的子集（过滤视图）：UCM 流中不存在。

# java - Jersey REST API 安全性

> ID：11024210
> 
> 赞同：4
> 
> 时间：2012-06-13T22:25:59.957
> 
> 标签：java, web-services, security, amazon-web-services, jersey

我看到以下链接解释了如何保护 rest api。（使用公钥和请求参数和私钥的 HMAC（哈希））。

[http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

我还在stackoverflow中看到了这个链接，它讨论了使用spring的rest api security

[将 spring security 3 与 jersey rest api 相结合](https://stackoverflow.com/questions/7988447/combining-spring-security-3-with-jersey-rest-api)

我在 oracle weblogic 网站上看到了这个链接，它讨论了使用 web.xml 或安全上下文等的 restful api 安全性

[http://docs.oracle.com/cd/E24329_01/web.1211/e24983/secure.htm](http://docs.oracle.com/cd/E24329_01/web.1211/e24983/secure.htm)

这些方法是不同的还是相关的？我也找不到任何实际进行握手等的代码。我完全糊涂了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:11:53.563

第二种和第三种方法是相关的，因为它们为某些用户、组或角色保护 Web 上下文。

第一种方法是加密 URL 参数，以便保护通过 GET 方法发送的敏感请求参数。

以上两者都是独立的，并且出于不同的原因需要。（消息级安全与访问控制）。

# php - 过滤数组并在php中获取无效项目

> ID：11024214
> 
> 赞同：0
> 
> 时间：2012-06-13T22:26:26.257
> 
> 标签：php, arrays, validation

我有一个电话号码数组，我需要一种**快速的方法**来将此数组拆分为**有效**和**无效**的电话号码（根据我对有效和无效的定义），例如：

```
$phone_numbers = array(
    '04165555555',
    '02125555555'
);

$valid_phone_number_regex = '/^0?(416|426|412|424|414)(\d{7})$/i'; 
```

我可以`array_filter`用来获取所有有效数字，但我还需要快速获取无效数字（用于报告问题），数组可能包含**数千个**数字！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:29:42.057

从 中获取有效元素后[`array_filter()`](http://php.net/array_filter)，用于从 中返回不在数组中[`array_diff()`](http://php.net/array_diff)的所有元素。`$input_array``$working`

```
$input_array = array( '04165555555', '02125555555');
$working = array_filter( $input_array, function( $el){ return preg_match( '/^0?(416|426|412|424|414)(\d{7})$/i', $el ); });
$not_working = array_diff( $input_array, $working); 
```

**输出：**

```
Valid:
array(1) { [0]=> string(11) "04165555555" }
Invalid:
array(1) { [1]=> string(11) "02125555555" } 
```

[**演示**](http://codepad.viper-7.com/fnx2S3)

# eclipse - 使用脚本启动的程序运行 eclipse 调试器

> ID：11024216
> 
> 赞同：1
> 
> 时间：2012-06-13T22:26:42.637
> 
> 标签：eclipse, debugging, gdb, eclipse-cdt

如何在 Eclipse 中在使用 Python 脚本启动的程序上运行调试器？

我有一个使用 Python 启动的可执行文件（用 Fortran 编写），我想使用 Eclipse 中集成的 gdb，但我不知道如何告诉 Eclipse 或 GDB 我要调试的可执行文件。

我在 Mac OSX Lion 上使用 Eclipse IDE for C/C++ Developers Indigo Service Release 2。

# perl - 为什么这个 Perl 代码在 shell 中工作，而不是在脚本中工作？

> ID：11024219
> 
> 赞同：2
> 
> 时间：2012-06-13T22:27:12.887
> 
> 标签：perl, for-loop, foreach

我有一个简单的问题。我一直在使用 zoidberg perl shell 以交互方式熟悉 perl。我喜欢在充实脚本之前能够即时测试我的东西。（我是新手学习者。）

我的问题是，在 shell 中我可以执行以下操作：

```
@a = `df -h | grep /dev/mapper | cut -c 48-`

for $i (@a) { @b=`ls $i` }
print @b; 
```

但是，当我将其放入 linux 中的脚本时：

```
#!/bin/perl 
```

我在运行脚本时看到以下错误：

```
syntax error at perl_diskstats.perl line 5, near "$i ( "
Execution of perl_diskstats.perl aborted due to compilation errors. 
```

我在这里做一些明显的事情吗？我到底做错了什么？我以为格式是..

```
foreach $var (@array) { codeblock } 
```

... 对？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T23:06:02.573

您在第一行末尾缺少一个分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:30:10.173

你也失踪了`use strict`，还有`my`声明。

```
use strict;

my @a = `df -h | grep /dev/mapper | cut -c 48-`;

my @b;
for my $i (@a) { @b=`ls $i` }

print @b; 
```

从现在开始的习惯开始`use strict`，而你还在开始。从长远来看，它将为您节省。

# java - 因此，如何修改 JTextField 以屏蔽字符而不使用 JPasswordField

> ID：11024222
> 
> 赞同：1
> 
> 时间：2012-06-13T22:27:33.497
> 
> 标签：java, swing

我们有一个应用程序可以在几乎任何应用程序、win32、浏览器、终端，甚至 eclipse 使用的 SWT 上屏蔽数字，但 Swing 是另一个问题。

对于这个问题，假设我是 JVM 的一部分，并且我刚刚在类路径中插入了我的 jar，并且我是调用其他人的主程序的主程序，因此我可以访问 JVM 中我需要的所有内容，但我没有写使用这些 JTextField 的原始应用程序！！！！

如果一个应用程序有一个 JTextField，我该如何修改它以便它仍然存储我设置的数字并对其进行屏蔽，以便它像 JPasswordField 一样显示但仍然具有原始应用程序编写者编写的所有侦听器。此外，当他们单击“确定”按钮或“下一步”按钮或“提交”按钮时，应该应用我新屏蔽的字段，就像它是旧的 JTextField 一样，没有任何改变。

谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:04:31.873

如果你想做这样的事情，这意味着你有改变应用程序的权限和可能性。在这种情况下，只需替换`JTextField`为`JPasswordField`. 它会隐藏字符，这正是你所追求的。

此外，您不必担心文本字段上的侦听器或方法调用：它们仍然可以工作，因为`JPasswordField`它是`JTextField`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:45:08.120

不幸的是，在我的情况下，另一个答案不起作用，因为我无权更改应用程序，因为它不是我的……但是，尽管原始 jdk 类很棘手，但我可以通过字节码更改应用程序。我可以在类路径中获取我的 jar，并且可以在程序启动之前让我的 jar 运行。我可以为 win32 应用程序执行此操作，但不幸的是，对于 java 应用程序来说这非常困难。

# java - OpenGL ES - 如何将不同的纹理映射到瓷砖网格

> ID：11024224
> 
> 赞同：2
> 
> 时间：2012-06-13T22:27:44.230
> 
> 标签：java, opengl-es, game-engine, texture-mapping, basic4android

刚刚在android上学习了一些OpenGL，学习了制作游戏的基础知识。

我遇到的麻烦是将“每个图块”的不同纹理映射到我的网格上。

例如：

我有一个瓷砖网格 - 8x8 - 在我的顶点数组中我通过定义一个 9x9 顶点来定义网格来构造列/行。然后我去创建一个索引缓冲区，告诉它如何绘制构成网格中每个正方形的 2 个三角形。

我的挫败感在于将纹理映射到网格的不同图块，因为每个正方形与网格中的其他正方形共享顶点，据我所知，您只能在 Opengl 中为每个顶点应用一个纹理坐标。

我能想到的唯一解决方案是在顶点缓冲区中生成重复的顶点，这将允许我为每个顶点分配单独的纹理坐标（即使顶点已经在生成前一个图块的缓冲区中）。这种方式最终会让我得到一大堆重复的顶点，这些顶点在我的脑海中似乎并不正确。我还想避免必须动态创建一个大位图，然后使用分数纹理坐标将其映射到网格上。

有人可以教育我的新手，了解我如何在网格上的每个图块上获得不同的纹理！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:37:46.637

> 我能想到的唯一解决方案是在顶点缓冲区中生成重复的顶点，这将允许我为每个顶点分配单独的纹理坐标

这正是你应该做的。这可能看起来很浪费，但 opengl 的“顶点”是定义顶点的所有属性（包括 texcoords、法线等）的集合。如果一个物理顶点位置由 4 个四边形共享，但每个四边形的该点的 texcoord 不同，则您必须创建 4 个唯一的顶点和索引来引用该点。

# listview - 在列表视图中设置不同的字体/颜色？

> ID：11024226
> 
> 赞同：0
> 
> 时间：2012-06-13T22:27:47.897
> 
> 标签：listview, fonts, colors

我创建了一个包含 3 行的列表视图。如果我想在行上设置不同的字体/颜色，我该如何实现？到目前为止，我已经尝试了不同的东西，但没有任何成功。这是我最近的尝试，但老实说，我不知道我在做什么：D。请帮忙。

```
public String toString()

{
    return this.getAlias() + " " + this.dateFormat.format(this.getDate()) + "\n" + (Html.fromHtml("<i>" + this.getComment() + "</i>" + "<br />"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:34:42.823

在您的 HTML 元素上添加类并使用 CSS 设置样式。

在此处查看示例：[http ://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean -css-ui.aspx](http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)

# c# - 将 TimeSpan 格式化为 mm:ss 用于正负 TimeSpan

> ID：11024228
> 
> 赞同：11
> 
> 时间：2012-06-13T22:27:51.733
> 
> 标签：c#, time, formatting, string-formatting

我正在寻找 .net 3.5 中的解决方案，我编写了以下工作解决方案：

```
private string FormatTimeSpan(TimeSpan time)
{
    return String.Format("{0}{1:00}:{2:00}", time < TimeSpan.Zero ? "-" : "", Math.Abs(time.Minutes), Math.Abs(time.Seconds));
} 
```

但我的问题是：有没有更好的方法？也许在我不需要辅助函数的地方更短。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-13T22:40:35.037

稍微短一些，使用[自定义 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)：

```
private string FormatTimeSpan(TimeSpan time)
{
    return ((time < TimeSpan.Zero) ? "-" : "") + time.ToString(@"mm\:ss");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-30T17:35:38.050

对于低于 .Net 4.0

您可以使用：

```
get { return Time.ToString().Substring(3); } 
```

# php - 使用 Codeigniter 从 MySql 返回的 Fullcalendar.js allDay 参数

> ID：11024235
> 
> 赞同：2
> 
> 时间：2012-06-13T22:28:32.777
> 
> 标签：php, mysql, json, codeigniter, fullcalendar

我正在尝试让 FullCalendar 在我的 Codeigniter 应用程序上工作，但是遇到了一个问题，即事件从我的 JSON 提要中显示为一整天。

我发现设置 "allDay":false 可以解决问题（使用静态 json 文件测试）但是当我将该值存储在 mysql DB 中，然后返回数据并运行 JSON 编码时，它将 False 转换为字符串，这导致事件显示为一整天！

有谁知道我如何在我的数据库中存储真或假（我目前存储为文本）并将其返回到我的 json 提要而不是字符串？我试过铸造和转换，但什么都做不了！

下面是我的模型/控制器/json 提要的示例；

提前致谢;

模型功能

```
function show_installs()
{       
    return $this->db->query(
    "SELECT id, client_name as title, start, end, concat('/planner/view_install/',id) as url
    FROM installs WHERE completed != 2"
    )->result();            
} 
```

控制器功能

```
function json_installs()
{
    $this->load->model('installs_model');
    $data = array();        
    if($query = $this->installs_model->show_installs())
    {
        $data = $query;
    }
    $json = json_encode($data);
    echo $json;
} 
```

JSON 提要（这不起作用，因为 " 围绕 false ）

```
[
   {
      "id":"18",
      "title":"John",
      "allDay":"false",
      "start":1339585200,
      "end":1339592400,
      "url":"\/planner\/view_install\/18"
   },
   {
      "id":"19",
      "title":"Mike",
      "allDay":"false",
      "start":"1339585200",
      "end":"1339592400",
      "url":"\/planner\/view_install\/19"
   }
] 
```

任何帮助将不胜感激 - 我只需要从 false/true 中删除那些 bloomin 引号，它就会完美地工作！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:21:59.543

为什么不将数据库中的列类型更改为布尔值而不是文本？您还可以解析您的 $json 对象以将所有 booleans_as_text 转换为布尔值，然后再将其设置在日历中 - 快速谷歌搜索发现我：

```
for(var i=0; i<$json.length; i++)
  $json[i]=/^true$/i.test($json[i]); 
```

您还可以设置`allDayDefault`to`false`以避免在每个事件中设置 allday: false。

# github - 无法使用 PyCharm 登录 github

> ID：11024237
> 
> 赞同：2
> 
> 时间：2012-06-13T22:28:36.457
> 
> 标签：github, pycharm

我正在尝试使用 PyCharm IDE 登录 Github。

它一直说我无法使用我提供的凭据登录。我通过登录 github.com 网站确保我的登录凭据正确无误。我还确保没有打开变调夹锁。我发誓我没有发疯，并且输入了正确的凭据。

知道问题可能是什么吗？

![在此处输入图像描述](../Images/9d7a1a127df803297b46f7c8a4e436f2.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T06:28:15.333

GitHub 已于6 月 12 日[关闭 v1 和 v2](https://github.com/blog/1160-github-api-v2-end-of-life) API。PyCharm 仍在使用 v2 API，因此在发布使用 v3 API 的新 PyCharm 版本之前，它将不再工作。这同样适用于基于 IntelliJ IDEA 平台的其他产品（WebStorm、PhpStorm、IDEA、AppCode、RubyMine）。

您可以[在 YouTrack 中跟踪此问题的进度](http://youtrack.jetbrains.com/issue/IDEA-85769)。

# jquery - 使用asp.net gridview控件仅禁用页面上的控件

> ID：11024238
> 
> 赞同：0
> 
> 时间：2012-06-13T22:28:45.523
> 
> 标签：jquery, asp.net

我的下拉列表在 gridview asp.net 控件内，我通过执行以下操作禁用下拉列表：

```
 var $myddl = $('select');
 $myddl.prop("disabled", true); 
```

但问题是它禁用`select elements`了整个母版页中的所有内容，所以在我的情况下，我有两个选项卡`Tab A`，`Tab B`我怎样才能只禁用选项卡 A 中的下拉列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:33:06.507

为他们分配一个 css 类以给他们一个分组。例如，选项卡 A 中的所有选择都可以有一个名为“TabA”的 css 类，而选项卡 B 可以有一个名为“TabB”的 css 类：

```
var $myTabASelects = $('select.TabA');
$myTabASelects.prop("disabled", true);

var $myTabBSelects = $('select.TabB');
$myTabBSelects.prop("disabled", true); 
```

或者，实际上，您可以假设只有您的选择具有 TabA/TabB css 类：

```
var $myTabASelects = $('.TabA');
$myTabASelects.prop("disabled", true);

var $myTabBSelects = $('.TabB');
$myTabBSelects.prop("disabled", true); 
```

这里有更多“选择”控件的方法：[选择器](http://api.jquery.com/category/selectors/)

# javascript - 当您到达页面的某个部分时，该站点如何执行操作？

> ID：11024239
> 
> 赞同：0
> 
> 时间：2012-06-13T22:28:46.663
> 
> 标签：javascript, html, css

我去了一个网站[http://wishbone.org/](http://wishbone.org/)，当你看到一堆卡通人物的图形时，它会改变颜色，但当你到达它时它就会开始。没有预定时间。他们是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:34:14.290

诀窍是处理“滚动”事件并等待特定元素变为可见，或等待滚动“顶部”距离达到某个最小值。

# java - 与休眠关联的子查询

> ID：11024242
> 
> 赞同：2
> 
> 时间：2012-06-13T22:28:48.767
> 
> 标签：java, hibernate, jpa, hql

任何人都知道是否可以在如下查询这样的关联中使用子查询？

```
SELECT l, o
FROM User u
    INNER JOIN u.licenses l
    LEFT JOIN l.orders o 
        WITH o.id = (
            SELECT MAX(lastOrder.id)
            FROM Order lastOrder
            WHERE lastOrder.license = l
        )
WHERE u.idtPerson = :idtPerson
    AND l.statusCode != 3 
```

我找到了这个解决方法......

```
SELECT l, o
FROM User u
    INNER JOIN u.licenses l
    LEFT JOIN l.orders o
WHERE u.idtPerson = :idtPerson
    AND l.statusCode != 3
    AND (
        o.id IS NULL
        OR o.id = (
            SELECT MAX(lastOrder.id)
            FROM Order lastOrder
            WHERE lastOrder.license = l
        )
    ) 
```

但我真的认为这不是一个好的解决方案，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T01:46:28.737

另一种选择是在另一个查询中创建子查询，使用 maxresults=1 列出它，并通过参数将其传递给原始查询。

像这样的东西：

```
Query hqlQuery = session.createQuery("SELECT MAX(lastOrder.id)
                                      FROM Order lastOrder
                                      WHERE lastOrder.license = l");    
hqlQuery.setMaxResults(1);
List results = hqlQuery.list();
Integer maxId = null;
if (!results.isEmpty()){
   maxId = results.get(0);
}
Query hqlQuery1 = session.createQuery("SELECT l, o
                                       FROM User u
                                       INNER JOIN u.licenses l
                                       LEFT JOIN l.orders o 
                                       WITH o.id = :maxId
                                       WHERE u.idtPerson = :idtPerson
                                       AND l.statusCode != 3");
hqlQuery1.setParameter("maxId", maxId);
hqlQuery1.list();
...etc... 
```

也许这对你有用

# eclipse - Eclipse 无法解析堆转储

> ID：11024243
> 
> 赞同：1
> 
> 时间：2012-06-13T22:28:58.297
> 
> 标签：eclipse, memory, heap-memory, dump

当我尝试打开我的 .hprof 文件（800 MB）时，我得到：

在“从 'D:\Workspace\Java\MemoryLeaks\java_pid9004.hprof' 解析堆转储”期间发生内部错误。

我尝试将堆大小增加到 -Xmx2048m，但这无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-30T03:53:14.157

**Eclipse MAT – 增加堆大小**

如果您正在分析大小为 800 mb 的堆转储，请至少为 ​​Eclipse MAT 分配额外的 800 mb 空间。如果您可以分配更多的堆空间，那就更好了。您可以通过编辑**MemoryAnalyzer.ini**文件为 Eclipse MAT 工具分配额外的堆空间。此文件位于 MemoryAnalyzer.exe 所在的同一文件夹中。您将在 MemoryAnalyzer.ini 的底部添加 -Xmx1600m。

下面是一个添加了 -Xmx 值的 MemoryAnalyzer.ini 文件示例：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.100.v20150511-1540.jar
--launcher.library 
  plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.300.v20150602-1417
-vmargs
-Xmx1600m 
```

另一方面，您可以考虑使用其他内存分析工具，例如：[HeapHero.io](http://heaphero.io/)和[JHat](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jhat.html)。但是请注意，JHat 不适用于大型堆转储，并且需要很长时间才能加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:31:26.040

800MB到底是什么？您确定堆转储没有更多内容而且您不只是使用其中的一部分吗？

# javascript - 有多线程网络编程吗？

> ID：11024244
> 
> 赞同：0
> 
> 时间：2012-06-13T22:29:04.257
> 
> 标签：javascript, multithreading

当我使用 javascript 创建网站时，我是否有机会利用客户端计算机上的多个线程？

我知道网络编程可以让你访问多个异步 http 或网络请求。我想知道实际的浏览器内处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:31:16.583

有一些叫做“WebWorkers”的东西可以提供一定程度的并发性。它们通过类似于 Erlang 进程的消息传递范式与“正常”代码进行互操作（尽管没有那么复杂）。

这是一个新的 HTML5 东西，当然旧浏览器不支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T22:40:57.320

Web Worker 是要走的路……它是一个 HTML 5 功能，允许在客户端上运行多个线程（工作者）。此功能目前是一个工作草案。

您可以为一个页面启动任意数量的工作人员，每个工作人员都可以将他们的状态或结果“发布”到主线程。

看看这个 MDN 帖子[https://developer.mozilla.org/En/Using_web_workers](https://developer.mozilla.org/En/Using_web_workers)

此外，SRN 发布的链接也非常有用（[http://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)）

另请注意，浏览器支持仍然不好。[http://caniuse.com/webworkers](http://caniuse.com/webworkers)

最好有一个备用方法，以防遇到不受支持的浏览器。另请注意，Chrome 曾经有一个错误，网络工作者实际上可以挂起 Chrome UI。可能现在已经修复了，但请注意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T22:32:24.527

[Web Workers](http://en.wikipedia.org/wiki/Web_worker)是一种技术。

> Web 工作者——由万维网联盟 (W3C) 和 Web 超文本应用技术工作组 (WHATWG) 定义——是一个 JavaScript 脚本——从 HTML 页面执行——在后台独立运行也可能从同一 HTML 页面执行的其他用户界面脚本

参见[MDN 上的用法](https://developer.mozilla.org/En/Using_web_workers)：

> Dedicated Web Workers 为 Web 内容在后台线程中运行脚本提供了一种简单的方法。创建后，工作人员可以通过将消息发布到创建者指定的事件处理程序来向生成任务发送消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T22:41:52.480

有多线程 Web 编程，但没有多线程 javascript。

当 javascript 在客户端的浏览器中执行时，它会逐行解释，并且在执行时不会呈现任何内容。

您可以利用开源库来“模仿”多线程，但基本上每个 javascript 都需要一个页面来生存和运行。

一些技巧是传递长时间运行的函数以在 iframe 内运行，或者使用 setTimeout 函数一次做一些工作 50 毫秒，直到你用来跟踪工作的某个标志说工作完成了`isFinished == true`

**最新版本的 Flash Player 允许在其中使用多线程**，但仅限于跨单个域的非常基本的使用。

**html 5 web workers**是另一种选择，但不适用于所有浏览器

# sed - sed 配方：如何在可以在一行或两行的两个模式之间做一些事情？

> ID：11024245
> 
> 赞同：3
> 
> 时间：2012-06-13T22:29:04.307
> 
> 标签：sed

假设我们只想在某些模式之间进行一些替换，让它们成为`<a>`并且`</a>`为了清楚起见......（*好吧，好吧，它们是`start`和`end`！.. Jeez！*）

所以我知道如果`start`并且`end`总是出现在同一行上该怎么办：只需设计一个适当的正则表达式。

我也知道如果它们保证在不同的行上该怎么办，并且我不关心包含行中的任何内容，`end`并且我也可以在包含`start` **before** `start`的行中应用所有命令：只需指定地址范围作为`/start/,/end/`.

然而，这听起来不是很有用。如果我需要做一个更聪明的工作，例如，在一个`{...}`块内引入更改，该怎么办？

我能想到的一件事是在处理之前`{`和`}`之前中断输入，然后将其重新组合在一起：

```
sed 's/{\|}/\n/g' input | sed 'main stuff' | sed ':a $!{N;ba}; s/\n\(}\|{\)\n/\1/g' 
```

另一种选择是相反的：

```
cat input | tr '\n' '#' | sed 'whatever; s/#/\n/g' 
```

这两者都很丑，主要是因为操作并不局限于单个命令。第二个甚至更糟，因为假设原始文本中不存在某些字符或子字符串，则必须使用它作为“换行符”。

那么问题来了：有没有更好的方法或者上述的方法可以优化吗？从我在最近的 SO 问题中读到的内容来看，这是一项相当常规的任务，所以我想一劳永逸地选择最佳实践。

PS我最感兴趣的是纯粹`sed`的解决方案：这项工作可以只通过一次调用来完成`sed`吗？请不要`awk`，`Perl`等：这更多是一个理论问题，而不是“需要尽快完成工作”的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:36:31.080

这可能对您有用：

```
# create multiline test data
cat <<\! >/tmp/a
> this
> this { this needs
> changing to
> that } that
> that
> !
sed '/{/!b;:a;/}/!{$q;N;ba};h;s/[^{]*{//;s/}.*//;s/this\|that/\U&/g;x;G;s/{[^}]*}\([^\n]*\)\n\(.*\)/{\2}\1/' /tmp/a
this
this { THIS needs
changing to
THAT } that
that
# convert multiline test data to a single line
tr '\n' ' ' </tmp/a >/tmp/b
sed '/{/!b;:a;/}/!{$q;N;ba};h;s/[^{]*{//;s/}.*//;s/this\|that/\U&/g;x;G;s/{[^}]*}\([^\n]*\)\n\(.*\)/{\2}\1/' /tmp/b
this this { THIS needs changing to THAT } that that 
```

解释：

*   将数据读入模式空间 (PS)。`/{/!b;:a;/}/!{$q;N;ba}`
*   将数据复制到保留空间 (HS)。`h`
*   从字符串的前后剥离非数据。`s/[^{]*{//;s/}.*//`
*   转换数据，例如`s/this\|that/\U&/g`
*   交换到 HS 并附加转换后的数据。`x;G`
*   用转换后的数据替换旧数据。`s/{[^}]*}\([^\n]*\)\n\(.*\)/{\2}\1/`

编辑：

一个更复杂的答案，我认为每行可以满足一个以上的块。

```
# slurp file into pattern space (PS)
:a
$! {
N
ba
}
# check for presence of \v if so quit with exit value 1
/\v/q1
# replace original newlines with \v's
y/\n/\v/
# append a newline to PS as a delimiter
G
# copy PS to hold space (HS)
h
# starting from right to left delete everything but blocks
:b
s/\(.*\)\({.*}\).*\n/\1\n\2/
tb
# delete any non-block details form the start of the file
s/.*\n//
# PS contains only block details
# do any block processing here e.g. uppercase this and that
s/th\(is\|at\)/\U&/g
# append ps to hs
H
# swap to HS
x
# replace each original block with its processed one from right to left
:c
s/\(.*\){.*}\(.*\)\n\n\(.*\)\({.*}\)/\1\n\n\4\2\3/
tc
# delete newlines
s/\n//g
# restore original newlines
y/\v/\n/
# done! 
```

注意 这使用 GNU 特定的选项，但可以进行调整以使用通用 sed。

# php - 教义 - 防止相关表中的新 INSERT

> ID：11024251
> 
> 赞同：1
> 
> 时间：2012-06-13T22:29:50.377
> 
> 标签：php, sql, zend-framework, orm, doctrine

使用 Zend Framework 1 和 Doctrine 1.2.4 构建的帮助/支持应用程序。

`staff_id`问题：在没有分配（支持人员）的情况下创建新的支持工单时，Doctrine 在`staff`表中插入空行，因为`staff_id`为 NULL，并且在表中找不到与值匹配`id`的`NULL`值`staff`。

新票已创建，请注意 NULL 值`staff_id`

```
INSERT INTO tickets (closable, emergency, survey_sent, brands_id, departments_id, categories_id, status_id, staff_id, subject, contacts_id, mask, initial_categories_id, last_opened, last_activity, created_at, updated_at) VALUES ('0', '1', '0', '1', '4', '6', '1', NULL, 'Cancellation Request', '5463', 'MQXB-39568', '6', '2012-06-14 03:15:49', '2012-06-14 03:15:49', '2012-06-14 03:15:49', '2012-06-14 03:15:49') 
```

`staff`表中带有一些默认值的新行，这就是**问题所在**。

```
INSERT INTO staff (enable_dst, last_page, external_links, replies_per_page, active) VALUES ('1', '0', '0', '10', '1') 
```

出现野查询

```
DELETE FROM staff_index WHERE (id = '197') 
```

现在`ticket_posts`（post = staff note）表用新插入的工单ID更新，表中新插入的空白行`staff`（`staff_id`这里应该是NULL）

```
UPDATE ticket_posts SET tickets_id = '12455', staff_id = '197', updated_at = '2012-06-14 03:15:49' WHERE id = '48113' 
```

我通过将第二列（用户名）设置为非空来“解决”空行，但不是真正的解决方案。

* * *

有没有办法告诉Doctrine，这里无事可做，继续前进？

* * *

（^底线）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:55:40.600

[http://doctrine.readthedocs.org/en/latest/en/manual/working-with-models.html#clearing-related-records](http://doctrine.readthedocs.org/en/latest/en/manual/working-with-models.html#clearing-related-records)

```
public function preSave()
{
    if (empty($this->staff_id))
        $this->clearRelated('Staff');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:36:27.610

在持久化对象之前，您是否访问过 Ticket 实例上的 Staff 属性？这可能是 Doctrine 创建“空”记录的问题。

```
$ticket = new Ticket();
$ticket->Staff = NULL; # Doctrine will now add empty record.
$ticket->save(); 
```

# c - 电路的二叉树

> ID：11024256
> 
> 赞同：-1
> 
> 时间：2012-06-13T22:30:14.807
> 
> 标签：c, algorithm, binary-tree

我需要一些帮助来解决这个问题。

我有一个二叉树结构，它显示了 2 个节点“1”和“10”之间的所有路径，如图所示。并且节点（即边）之间的互连具有一定的权重。

现在任何人都可以向我推荐一个关于如何计算以下内容的算法或流程。

现在让我们从“1”到“10”“a）1到2到3到10”“b）1到2到4到8到10”“c）1到2到4到7到10等路径"

现在计算的方式是串联/并联电路。

wherevr 节点分支为 2 我需要计算串联电阻值

例如，如果我只考虑两条路径“a）1 到 2 到 3 到 10 和 1 到 2 到 4 到 8 到 10”

我们可以看到在 2 处有一个分支 .. 所以我将“2 到 3 到 10”和“2 到 4 到 8 到 10”的所有边缘值相加，然后将这两个和相乘，然后将值从“1 到2" 以获得整体价值。

这必须在整个树上完成..关于如何在 C 中实现这一点的任何想法？

图片可以在这里找到：http: [//i.stack.imgur.com/PlXiT.png](http://i.stack.imgur.com/PlXiT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:43:56.817

我认为您想为一棵树计算一些深奥的值，该值是通过基于子树值的一些计算在每个节点上定义的。这并不难，使用递归函数：

```
struct node {
  struct node* left, *right;
  int left_weight, right_weight; /* or something*/
};

int calculate_it(struct node* root)
{
  /* do the calculation */
  if(root->left && root->right) {
    int l = calculate_it(root->left) + root->left_weight;
    int r = calculate_it(root->right) + root->right_weight;
    return l*r;
  } else if(root->left || root->right) {
     return root->left ? calculate_it(root->left)+root->left_weight :
       calculate_it(root->right)+root->right_weight;
  }
  return 0;
} 
```

我不确定我是否理解你的问题，但这应该会给你这个想法。

# php - 正则表达式：如果字母与数字相邻，则添加空格

> ID：11024261
> 
> 赞同：6
> 
> 时间：2012-06-13T22:31:00.690
> 
> 标签：php, regex

我正在使用 PHP，但对正则表达式不太好。如果字母或数字相邻，我需要一个 preg_replace 可以添加空格。

这些是场景：

```
mystreet12 -> mystreet 12
mystreet 38B -> mystreet 38 B
mystreet16c -> mystreet 16 c
my street8 -> my street 8 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T22:36:21.020

您可以使用环视来匹配这样的位置：

```
preg_replace('/(?<=[a-z])(?=\d)|(?<=\d)(?=[a-z])/i', ' ', $str); 
```

根据您定义“字母”的方式，您可能需要调整`[a-z]`.

需要使用 Lookarounds 才能使其与以下字符串一起正常工作：

```
0a1b2c3 
```

没有解决方案就会失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T22:35:26.553

就像是：

```
preg_replace("/([a-z]+)([0-9]+)/i","\\1 \\2", $subject); 
```

应该让你走远:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T22:35:09.827

使用 POSIX 类实现可移植性：

```
preg_replace("/([[:alpha:]])([[:digit:]])/", "\\1 \\2", $subject); 
```

获得第一个过渡。

```
preg_replace("/([[:digit:]])([[:alpha:]])/", "\\1 \\2", $subject); 
```

获得第二个。

# delphi - 为 TIdHttp 请求添加自定义标头，标头值有逗号

> ID：11024262
> 
> 赞同：10
> 
> 时间：2012-06-13T22:31:03.043
> 
> 标签：delphi, delphi-xe2, indy10

我正在使用 Delphi XE2 和 Indy 10.5.8.0。我有一个 TIdHttp 实例，我需要在请求中添加一个自定义标头。标头值中包含逗号，因此它会自动解析为多个标头。我不希望它那样做。我需要我的自定义标头的标头值仍然是一个字符串，而不是基于逗号分隔符拆分。

我试过设置`IdHttp1.Request.CustomHeaders.Delimiter := ';'`没有成功。有没有办法确保标题不会被拆分？

```
procedure SendRequest;
const HeaderStr = 'URL-Encoded-API-Key VQ0_RV,ntmcOg/G3oA==,2012-06-13 16:25:19';
begin
  IdHttp1.Request.CustomHeaders.AddValue('Authorization', HeaderStr);
  IdHttp1.Get(URL);
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T22:54:52.050

我无法使用最新的 Indy 10.5.8 SVN 快照重现此问题。您显示的字符串被分配为我的单行。

话虽如此，默认情况下该`TIdHeaderList.FoldLines`属性设置为 True，并且行会在空格和逗号字符上折叠，这样就可以解释为什么您的字符串会被拆分。据我所知，您的 Indy 版本和 SVN 中的最新版本之间的折叠算法没有任何逻辑更改。

# debugging - knockout.js foreach - 在页面上显示项目内容

> ID：11024273
> 
> 赞同：0
> 
> 时间：2012-06-13T22:31:37.640
> 
> 标签：debugging, data-binding, foreach, knockout.js

出于调试目的，我试图在这样的 foreach 循环中显示当前内容，但出现“无法解析绑定”错误。您可以在项目底部的“pre”标签内看到我的 atteping。有关如何正确显示此内容的任何建议？

```
<!-- ko foreach: criteria -->
<div>
    <span data-bind="text: myVal"></span>               
    <label><input type="radio" value="AND" data-bind="checked: logicGate">AND</label>
    <label><input type="radio" value="OR" data-bind="checked: logicGate">OR</label>
    <a href="javascript:void(0)" data-bind="click: $parent.remove">Remove</a>
    <pre data-bind="text: ko.toJSON($data, null, 2)"></pre>
</div>
<!-- /ko --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:58:02.123

问题是我将元素传递给对象的构造函数，并且它们不能被 ko.toJSON 方法序列化。

# c - 未分配 C 结构值

> ID：11024275
> 
> 赞同：4
> 
> 时间：2012-06-13T22:31:53.340
> 
> 标签：c

我正在尝试使用[Video4Linux2 API](http://v4l2spec.bytesex.org/spec/r10386.htm)，但是我应该用来更改给定相机上的各种控件的结构发生了一些奇怪的事情。出于某种原因，一些成员没有在分配时报告更改。我编写了以下代码来简化问题：

```
#include <getopt.h>
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <sys/mman.h>
#include <sys/select.h>
#include <linux/videodev2.h>
#include <stdlib.h>
#include <errno.h>
#include <stdbool.h>

int setExtendedControl(int id, int value);
int fd = 0;

int main()
{
    setExtendedControl(20, 30);
    return 0;
}

int setExtendedControl(int id, int value)
{
    struct v4l2_ext_control extControl;
    struct v4l2_ext_controls extControls;

    extControl.id = id;
    extControl.value = value;
    extControl.value64 = value;
    extControl.reserved2[0] = 0;
    extControl.reserved2[1] = 0;
    extControl.reserved2[2] = 0;

    //Put the individual control structure into the
    //multi-control container structure and initialize the container
    //as well
    extControls.ctrl_class = V4L2_CTRL_CLASS_MPEG;
    extControls.count = 1;
    extControls.controls = &extControl;
    printf("extControls.controls = %i, extControl = %i\n", (extControls).controls, &extControl);

    extControls.reserved[0] = 0;
    extControls.reserved[1] = 0;
    extControls.reserved[2] = 0;
    extControls.error_idx = 0;

    printf("Verifying settings:\n");
    printf("extControl.id = %i, id = %i\n", extControl.id, id);
    printf("extControl.value = %i, value = %i\n", extControl.value, value);
    printf("extControl.value64 = %i, value = %i\n", extControl.value64, value);
    printf("extControl.reserved2[0] = %i, set to 0\n", extControl.reserved2[0]);
    printf("extControl.reserved2[1] = %i, set to 0\n", extControl.reserved2[1]);
    printf("extControl.reserved2[2] = %i, set to 0\n\n", extControl.reserved2[2]);

    printf("extControls.ctrl_class = %i, V4L2_CTRL_CLASS_MPEG = %i\n", extControls.ctrl_class,
            V4L2_CTRL_CLASS_MPEG);
    printf("extControls.count = %i, set to 1\n", extControls.count);
    printf("extControls.reserved[0] = %i, set to 0\n", extControls.reserved[0]);
    printf("extControls.reserved[1] = %i, set to 0\n", extControls.reserved[1]);
    printf("extControls.reserved[2] = %i, set to 0\n", extControls.reserved[2]);
    printf("extControls.error_idx = %i, set to 0\n", extControls.error_idx);

    printf ("\nRunning secondary check..\n\n");

    int rval;

    //Set up the individual control structure

    //Try to change the control and return the
    //value reporting the outcome.
    rval = ioctl(fd, VIDIOC_S_EXT_CTRLS, &extControls);

    if (extControls.controls != &extControl)
    {
        printf("\n\nLost the pointer on initial set!\n");
    }
    //printf("error_idx after initial set %i\n", extControls.error_idx);

    //printf("extControl = %i, extControls = %i\n");

    //freeStructs(extControl, extControls);

    return rval;
} 
```

当我运行它时，没有设置“value”和“value64”成员。以下是 printf 输出：

```
extControls.controls = -1954893344, extControl = -1954893344
Verifying settings:
extControl.id = 20, id = 20
extControl.value = 0, value = 30
extControl.value64 = 0, value = 30
extControl.reserved2[0] = 0, set to 0
extControl.reserved2[1] = 0, set to 0
extControl.reserved2[2] = 0, set to 0

extControls.ctrl_class = 10027008, V4L2_CTRL_CLASS_MPEG = 10027008
extControls.count = 1, set to 1
extControls.reserved[0] = 0, set to 0
extControls.reserved[1] = 0, set to 0
extControls.reserved[2] = 0, set to 0
extControls.error_idx = 0, set to 0 
```

这是来自 gdb 的一个小片段：

```
(gdb) step
printf (__fmt=0x400880 "extControls.controls = %i, extControl = %i\n") at /usr/include/x86_64-linux-gnu/bits/stdio2.h:105
105       return __printf_chk (__USE_FORTIFY_LEVEL - 1, __fmt, __va_arg_pack ());
(gdb) step
setExtendedControl (id=20, value=30) at ioctlTest.c:30
30          extControl.reserved2[0] = 0;
(gdb) step
Hardware watchpoint 2: extControl

Old value =
    {id = 4294960502, size = 32767, reserved2 = {4196309}, {value = 0, value64 = 67750802696962048, string = 0xf0b2ff00000000 <Address 0xf0b2ff00000000 out of bounds>}}
New value =
    {id = 20, size = 32767, reserved2 = {0}, {value = 0, value64 = 67750802696962048, string = 0xf0b2ff00000000 <Address 0xf0b2ff00000000 out of bounds>}} 
```

这里没有发生，但是在更强大的代码版本中还有其他实例，其中 extControls.controls 的指针分配和成员 extControl.id 的 int 分配都失败了。什么会导致这种性质的结构成员分配失败？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:51:14.033

有关结构信息，请参阅[内核文档](http://www.kernel.org/doc/htmldocs/media/vidioc-g-ext-ctrls.html)

该结构的`reserved[]`数组`v4l2_ext_control`长度仅为 2 ...因此您正在修改不应该使用该行的内存：

`extControl.reserved2[2] = 0;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T22:52:51.713

我自己无法检查，但查看（表 1）的这个[规范`struct v4l2_ext_control`](http://v4l2spec.bytesex.org/spec/r10386.htm#V4L2-EXT-CONTROL)，它说：

**表格1。** `struct v4l2_ext_control`

```
__u32   id      Identifies the control, set by the application.
__u32   reserved2[2]        Reserved for future extensions. Drivers and applications must set the array to zero.

union   (anonymous)      
    __s32   value       New value or current value.
    __s64   value64     New value or current value.
    void *  reserved    Reserved for future pointer-type controls. Currently unused. 
```

这里注意三点：

*   `value`并且`value64`是联合的一部分，它们在内存中占据相同的位置
*   reserved2 的大小为 2，所以只有 , `reserved2[0]`, `reserved2[1]`no `reserved2[2]`！
*   根据这个规范，`reserved`内存地址在结构内的联合之前

这意味着当你设置

```
extControl.reserved2[2] = 0; 
```

您实际上是在分配给该数组的内存之外写入，覆盖联合的数据，从而同时改变“两者”`value`和`value64`成员。

# iphone - 如何使用 NSURLConnection 上传文件和其他参数

> ID：11024279
> 
> 赞同：1
> 
> 时间：2012-06-13T22:32:04.947
> 
> 标签：iphone, cocoa-touch, ipad, nsurlconnection, nsmutableurlrequest

我正在使用`NSURLConnection`将相同的数据 ( `NSString`) 发送到服务器，并且我想与它们一起添加图像或文件，那么内容类型的值是什么？

# 编码

```
- (NSData *)encodingData:(NSMutableDictionary *)dictionary
{
    NSMutableArray *arrayPosts = [[NSMutableArray alloc] init];
    [dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
         NSString *encodedKey = [key stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
         NSString *encodedValue = [obj stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        [arrayPosts addObject:[NSString stringWithFormat:@"%@=%@",encodedKey,encodedValue]];
    }];
    NSString *encodedArrayPosts = [arrayPosts componentsJoinedByString:@"&"];
    return [encodedArrayPosts dataUsingEncoding:NSUTF8StringEncoding];
} 
```

# 发送数据

```
- (void)startAsyncRequest
{
   // Enable the network activity indicator in the status bar
   [self enableActivityIndicatorInStatusBar];

   // Setting of the request
   NSMutableURLRequest *urlRequest = [[NSMutableURLRequest alloc] initWithURL:self.url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:20.0];
   [urlRequest setHTTPMethod:self.method];
   [urlRequest setHTTPBody:[self encodingData:self.dictionaryPosts]];

   // Send the request
   NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

   if (connection) {
      // Connection succeded 
     self.receiveData = [NSMutableData data];
   } else {
      // Connection Failed
      self.error = @"Connection Failed";
      // Inform the user that the connection failed
      [self.delegate requestFailed:self];
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:41:38.807

您需要将数据作为流类型传递到服务器中

```
public InsertImage(Stream stream) 
```

类似的东西然后解析流类型。

这是如何使用一些边界来构建您的请求

```
- (NSURLRequest *)buildRequest:(NSData *)paramData fileName:(NSString *)name {
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    NSString *charset = (NSString *)CFStringConvertEncodingToIANACharSetName(CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
    [request setURL:self.url];
    [request setHTTPMethod:self.method];

    NSString *boundary = @"0xKhTmLbOuNdArY";
    NSString *endBoundary = [NSString stringWithFormat:@"\r\n--%@\r\n", boundary];

    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; charset=%@; boundary=%@", charset, boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *tempPostData = [NSMutableData data]; 
    [tempPostData appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // Sample Key Value for data
    [tempPostData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", @"Key_Param"] dataUsingEncoding:NSUTF8StringEncoding]];
    [tempPostData appendData:@"Value_Param"] dataUsingEncoding:NSUTF8StringEncoding]];
    [tempPostData appendData:[endBoundary dataUsingEncoding:NSUTF8StringEncoding]];

    // Sample file to send as data
    [tempPostData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n", name] dataUsingEncoding:NSUTF8StringEncoding]];
    [tempPostData appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [tempPostData appendData:paramData];
    [tempPostData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:tempPostData];
    return request;
} 
```

您应该在服务器端获取流类型数据并对其进行解析，您可以根据您传递的密钥（例如 Key_Param）和您发送的文件的名称（文件名）来获取值。

# c# - 如何在同一类的实例之间共享派生字段？

> ID：11024280
> 
> 赞同：0
> 
> 时间：2012-06-13T22:32:06.127
> 
> 标签：c#, xna, sprite

我正在使用 C# (XNA) 开发游戏，但我不知道该怎么做。这是我正在做的一个非常简化的版本：

```
class GameObject
{
    Protected Sprite mSprite;
    Protected string filename;

    public LoadContent(ContentManager theContentManager)//XNA forces you to load content through a Content Manager which belongs to the main game class
    {
    mSprite.Load(theContentManager, filename);//the Sprite class contains a texture and methods to deal with loading images, animating, etc
    }
}

class SomeObject : GameObject
{
    public SomeObject()
    {
    filename = "someobject.png";
    }
} 
```

“SomeObject”的每个实例都有相同的 Sprite，在“SomeObject”启动后由继承的 loadContent 方法加载。通常 LoadContent 方法只在游戏开始时调用一次。

但是，我希望能够在游戏当前运行后添加新对象。如果我可以让“SomeObject”的每个实例共享相同的精灵，这样新实例就不必再次加载相同的图像，那就太好了。目前我只是从现有对象复制精灵，例如， `someObject2.mSprite = someObject1.mSprite` 但这仅在该类的现有实例可以复制时才有效。我想做的是让 mSprite 是静态的，但是如果我在基类中将它声明为静态，所有其他对象将获得相同的精灵，如果我在派生类中声明它，我无法弄清楚如何加载图像而不将加载方法重新写入每个类。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:33:44.847

`protected abstract`您可以在基类中创建属性。

每个派生类都可以将精灵存储在静态字段中，并从覆盖的属性中返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:24:36.957

你需要这样的套房吗？我已经创建了一个所有游戏对象都可以使用的精灵集合，如果你指定一个与已经创建的精灵同名的精灵，它将使用对加载精灵的引用，如果它是一个新名称，则新精灵被加载。

```
public class GameObject
{
    protected static Dictionary<string, Sprite> sprites = new Dictionary<string, Sprite>();

    protected string fileName;
    protected Sprite sprite;

    public void LoadContent(ContentManager contentManager)
    {
        lock (sprites)
        {
            if (sprites.ContainsKey(fileName))
                sprite = sprites[fileName];
            else
                sprites.Add(fileName, mSprite.Load(theContentManager, filename));
        }
    }

    public GameObject(string fileName)
    {
        this.fileName = fileName;
    }
} 
```

# c++ - LNK2019：未解析的外部符号；foreach.h FE_Iterator()

> ID：11024284
> 
> 赞同：1
> 
> 时间：2012-06-13T22:32:22.573
> 
> 标签：c++, foreach, iterator

此链接器错误位于 main.cpp 和 foreach.h 类中。构造函数和解构函数都被标记为错误。

LNK2019：未解析的外部符号

“public: __thiscall FE_Iterator::~FE_Iterator(void)”在函数“public: __thiscall Set,class std::allocator >>::Iterator::~Iterator(void)”中引用

“public: __thiscall FE_Iterator::FE_Iterator(void)”在函数“private: __thiscall Set,class std::allocator > >::Iterator::Iterator(class Set,class std::allocator > > *)”中引用

foreach.h

```
/*
 * File: foreach.h
 * Last modified on Thu Jun 11 12:04:09 2009 by eroberts
 * -----------------------------------------------------
 * This interface defines the foreach keyword, which is used to
 * simplify iteration.  All iterable classes import this interface,
 * so clients never need to do so explicitly.
 */

#ifndef _foreach_h
#define _foreach_h

#include "genlib.h"

/* These #includes are for files that contain "in" as a token */

#include <ios>
#include <fstream>
#include <sstream>

/* Redefine the ios constants (one of which is "in") */

static const ios::openmode IOS_APP = ios::app;
static const ios::openmode IOS_ATE = ios::ate;
static const ios::openmode IOS_BINARY = ios::binary;
static const ios::openmode IOS_IN = ios::in;
static const ios::openmode IOS_OUT = ios::out;
static const ios::openmode IOS_TRUNC = ios::trunc;

/*
 * Class: FE_Iterator
 * ------------------
 * This class is a base class for all Iterators that can work with
 * the foreach construct.  The only purpose of this class is to make
 * it possible to freeing the iterators after they are no longer needed.
 *
 * Note: FE_Iterator is implemented in lexicon.cpp, which is the only
 * iterable class that is not a template class.
 */

class FE_Iterator {
public:
    FE_Iterator();
    ~FE_Iterator();
};

/*
 * Class: FE_State
 * ---------------
 * This class is used to maintain the state of the foreach processing.
 * The class itself is essentially private, but the implementations in
 * the different classes use the fields directly.
 *
 * Note: FE_State is implemented in lexicon.cpp, which is the only
 * iterable class that is not a template class.
 */

class FE_State {
public:
    int state;
    FE_Iterator *iter;

    FE_State();
    ~FE_State();
};

/*
 * Macro: foreach
 * Usage: foreach (type var in collection) { . . . }
 * -------------------------------------------------
 * Provides a much simpler hook to the iterator facility.
 */

#define foreach(arg) \
  for (FE_State _fe; _fe.state < 2; ) \
    for (arg.foreachHook(_fe); _fe.state++ == 1; _fe.state = 0)

#define in =

#endif 
```

主文件

```
#include "stdafx.h"

#include <cstdlib>
#include <string>
#include <iostream>
#include <set>
#include <fstream>

#include "genlib.h"
#include "strutils.h"
#include "simpio.h"
#include "set.h"
#include "lexicon.h"
#include "iterator.h"
#include "foreach.h"

using namespace std;

void PrintRegExpMatches(string exp, Set<string> & matches)
{
    cout << "Activity codes that match " << exp << endl;
    cout << "--------------------------------------" << endl;

    Set<string>::Iterator it = matches.iterator();
    while (it.hasNext()) cout << it.next() << endl;

void PrintCorrections(string seed, int editDistance,
                      Set<Lexicon::CorrectionT> & matches)
{
    cout << "Activity codes that are within " << editDistance << " edits of " << seed << endl;
    cout << "--------------------------------------" << endl;

    Set<Lexicon::CorrectionT>::Iterator it = matches.iterator();
    while (it.hasNext()) {
        Lexicon::CorrectionT corr = it.next();
        cout << corr.suggestedWord << " is a distance of " << corr.editDistance;
        cout << " away." << endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:34:44.540

这很简单。您已声明但未定义 FE_Iterator() 的构造函数和析构函数。即使它是基类，您也应该定义它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:50:14.627

所以这是一个奇怪的巧合，但我与 Eric Roberts 合作开发了不需要单独的 .cpp 文件的 foreach 代码的更新版本。该文件的新版本就在此处，它应该可以编译而没有任何链接器错误：

```
#ifndef Foreach_Included
#define Foreach_Included

#include <iterator>
#include <map>
#include <cstddef>
#include <cstring>

/* These #includes are for files that contain "in" as a token */

#include <ios>
#include <fstream>
#include <sstream>
using namespace std;

/* Redefine the ios constants (one of which is "in") */

static const ios::openmode IOS_APP = ios::app;
static const ios::openmode IOS_ATE = ios::ate;
static const ios::openmode IOS_BINARY = ios::binary;
static const ios::openmode IOS_IN = ios::in;
static const ios::openmode IOS_OUT = ios::out;
static const ios::openmode IOS_TRUNC = ios::trunc;

/* Private implementation namespace */

namespace _fe {
   struct Range {
      virtual ~Range() { };
   };

   template <typename T>
   struct ArrayRange : Range {
      ArrayRange(const T *begin, const T *end) : iter(begin), end(end) { }
      const T *iter;
      const T *end;
   };

   template <typename CType>
   struct CRange : Range {
      CRange(const CType& c) :
         cont(c), iter(cont.begin()), end(cont.end()) { }
      CType cont;
      typename CType::iterator iter, end;
   };

   template <typename KT, typename VT, typename CT, typename AT>
   struct MapRange : Range {
      MapRange(const map<KT,VT,CT,AT> & c) :
         cont(c), iter(cont.begin()), end(cont.end()) { }
      map<KT,VT,CT,AT> cont;
      typename map<KT,VT,CT,AT>::iterator iter, end;
   };

/*
 * The State struct glues together all of these pieces and
 * stores all of the information throughout the loops.
 */

   struct State {
      State() : state(0), itr(NULL) { }
      ~State() { delete itr; }
      int state;
      Range *itr;
   };

/* General hook function */

   template <typename DowncastType, typename ValueType>
   ValueType HookImpl(State& fe) {
      DowncastType *ip = (DowncastType *) fe.itr;
      if (ip->iter == ip->end) {
         fe.state = 2;
         return ValueType();
      }
      fe.state = 1;
      ValueType vp = *ip->iter;     /* Subtle implementation note:    */
      ++ip->iter;                   /* Using *ip->iter++ here would   */
      return vp;                    /* require copying the iterator.  */
   }

/* Foreach implementation for containers */

   template <typename CType>
   CRange<CType> *Init(State & fe, const CType & collection) {
      fe.itr = new CRange<CType>(collection);
      return (CRange<CType>*) fe.itr;
   }

   template <typename CType>
   typename iterator_traits<typename CType::iterator>::value_type
   Hook(State & fe, CRange<CType> *) {
      return HookImpl<CRange<CType>,
         typename iterator_traits<typename CType::iterator>::value_type>(fe);
   }

/* For maps */

   template <typename K, typename V, typename C, typename A>
   MapRange<K,V,C,A> *Init(State & fe, const map<K,V,C,A> & collection) {
      fe.itr = new MapRange<K,V,C,A>(collection);
      return (MapRange<K,V,C,A>*) fe.itr;
   }

   template <typename DowncastType, typename ValueType>
   ValueType MapHookImpl(State & fe) {
      DowncastType *ip = (DowncastType *) fe.itr;
          if (ip->iter == ip->end) {
         fe.state = 2;
         return ValueType();
      }
      fe.state = 1;
      ValueType key = ip->iter->first;
      ++ip->iter;
      return key;
   }

   template <typename K, typename V, typename C, typename A>
   K Hook(State & fe, MapRange<K,V,C,A> *) {
      return MapHookImpl<MapRange<K,V,C,A>,K>(fe);
   }

/* For C strings */

   template <size_t n>
   ArrayRange<char> *Init(State & fe, char (&str)[n]) {
      fe.itr = new ArrayRange<char>(str, str + strlen(str));
      return (ArrayRange<char>*) fe.itr;
   }

   template <size_t n>
   ArrayRange<char> *Init(State & fe, const char (&str)[n]) {
      fe.itr = new ArrayRange<char>(str, str + strlen(str));
      return (ArrayRange<char>*) fe.itr;
   }

/* For arrays */

   template <typename T, size_t n>
   ArrayRange<T> *Init(State & fe, T (&arr)[n]) {
      fe.itr = new ArrayRange<T>(arr, arr + n);
      return (ArrayRange<T>*) fe.itr;
   }

   template <typename T, size_t n>
   ArrayRange<T> *Init(State & fe, const T (&arr)[n]) {
      fe.itr = new ArrayRange<T>(arr, arr + n);
      return (ArrayRange<T>*) fe.itr;
   }

   template <typename T>
   T Hook(State& fe, ArrayRange<T>*) {
      return HookImpl<ArrayRange<T>, T>(fe);
   }

}

/* The actual foreach and in macros */

#define foreach(arg) \
   for (_fe::State _fe; _fe.state < 2; ) \
      for (arg)); _fe.state++ == 1; _fe.state = 0)

#define in = _fe::Hook(_fe, _fe.state != 0 ? NULL : _fe::Init(_fe,

#endif 
```

希望这可以帮助！

# wget - Windows 的 Wget 语法

> ID：11024286
> 
> 赞同：1
> 
> 时间：2012-06-13T22:32:24.883
> 
> 标签：wget

有人知道 Windows 中 wget 命令的语法吗？我尝试了它的基本语法，但问题是文件被下载到我打开命令提示符的目录中。我想知道我们是否可以在其命令中明确指定目的地。如果可能的话，让我知道这对我很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-23T22:00:21.187

如果有人阅读这篇文章想要将下载的文件保存到目录中，请使用“-P”。

例子：

```
wget LINKHERE -P %USERPROFILE%/Downloads 
```

这将保存您到 C:\Users\username\Downloads 的链接所提供的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-30T02:16:45.323

根据手册 -O, --output-document=FILE 将文件写入 FILE。

因此，您必须在有效目录之后提供文件名，如下所示：

```
C:\cronjobs>wget -q -O C:\Users\Public\Documents\tmp1.txt "http://google.com/" 
```

注意： -q 选项表示安静，但 -O 表示将文件保存到给定的文件名，它会起作用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T22:38:48.767

你当然可以。

使用`-O`语法和要使用的路径。

我刚刚对此进行了测试：

```
C:\users\julien>wget google.com -O "C:\here.html" 
```

“here.html”是谷歌在我的“C:”驱动器根目录上的索引页

# django - 在两个模型中进行搜索？

> ID：11024288
> 
> 赞同：0
> 
> 时间：2012-06-13T22:32:27.403
> 
> 标签：django, django-models, django-templates, django-views

我遇到的问题是将两个模型的链式搜索传递给模板，这两个数据库通过 custom_id 链接，如下所示：

注：这是一个原模型交互的例子，很长

模型：

```
from django.db import models

class Model (models.Model):
     custom_id = (max_length = 10)
     data = models.CharField (max_length = 100)

Model1 class (models.Model):
     models.IntegerField custom_id = (max_length = 10)

Model2 class (models.Model):
     relation2 = models.OneToOneField (Model1)

class UserProfile (models.Model):
     models.ForeignKey user = (User, unique = True)
     relation1 = models.ManyToManyField (Model2) 
```

这向我显示了页面上所有这些 custom_id 用户登录

```
custom = Model1.objects.filter (model2__userprofile__user__username = user) 
```

问题是如何解雇与此 custom_id 相关的所有数据？

在终端中向我显示了数据以及与此的两个交互：

```
for element in custom:
     customid = str(elemento.custom_id)
     data = Model.objects.filter(customid=customid) 
```

但我只在数据中保留一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:27:14.953

我已经解决了。

将另一个变量加载到包含此变量的模板必须执行循环并包含我的自定义查询：

```
from itertools import *

for element in custom:
    result = # operation
    query = chain (query, [result]) 
```

查询功能与查询集模板中的方式相同。

# facebook - 电影对象上的 Facebook 应用 youtube 视频

> ID：11024291
> 
> 赞同：0
> 
> 时间：2012-06-13T22:32:34.570
> 
> 标签：facebook, facebook-graph-api

我在对象“电影”上定义了一个名为“观看”的动作（使用内置对象）。“电影”对象需要一个名为电影的参数，这是一个必需参数。当我以 {movie:'http://www.movi​​eurl.com'} 的形式发送这部电影的链接时，效果很好。但我想发送一个嵌入时间轴的 youtube 视频。

```
When I use the object 'Video', embedding a youtube video works. But that would come in the feed as 
```

'John Doe 在 MyApp 上观看了一个视频*_* ' 在此处嵌入 YouTube 视频

取而代之的是：“John Doe 在 MyApp 上观看了电影*_* ” 此处嵌入的 YouTube 视频

谢谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:44:24.183

不，您不能以您描述的方式更改对象类型的名称

# python - Python curses - 隐藏用户输入

> ID：11024293
> 
> 赞同：2
> 
> 时间：2012-06-13T22:32:42.380
> 
> 标签：python, curses

我正在用 python 诅咒开发一个应用程序。我正在使用 getch() 方法来获取按键。但我可以在屏幕上看到按下的键。我可以随时移动光标，但在光标之后我可以看到用户输入的内容。

当然，我可以在每次按下按键后擦除和重绘整个屏幕，但它在闪烁——这很令人不安。

知道如何摆脱这些按键吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T01:36:35.187

用下面的方法初始化curses类，就可以解决问题了。

```
class curses_screen:
    def __enter__(self):
        self.stdscr = curses.initscr()
        curses.cbreak()
        curses.noecho()
        self.stdscr.keypad(1)
        SCREEN_HEIGHT, SCREEN_WIDTH = self.stdscr.getmaxyx()
        return self.stdscr
    def __exit__(self,a,b,c):
        curses.nocbreak()
        self.stdscr.keypad(0)
        curses.echo()
        curses.endwin()

with curses_screen() as stdscr:
    """
    Execution code plush getch code here
    """ 
```

# logback - 再次抑制 Logback 输出

> ID：11024296
> 
> 赞同：0
> 
> 时间：2012-06-13T22:33:03.290
> 
> 标签：logback

如何抑制 Logback 的所有初始输出？[这个问题之前](https://stackoverflow.com/questions/3257154/how-to-prevent-logback-from-outputting-its-own-status-at-the-start-of-every-log)已经问[过两次](https://stackoverflow.com/questions/3401051/suppress-all-logback-output-to-console) 了，但我的情况有点不同；Logback 不会抛出任何警告或错误。

这是整个日志：

```
17:29:32,471 |-INFO in ch.qos.logback.access.joran.action.ConfigurationAction - Ignoring debug attribute.
17:29:32,472 |-INFO in ch.qos.logback.core.joran.action.StatusListenerAction - Adding status listener of type [ch.qos.logback.core.status.OnConsoleStatusListener]
17:29:32,473 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
17:29:32,473 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
17:29:32,474 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
17:29:32,474 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern C:/dev/diesel/trunk/diesel-test//logs/request/request-%d{yyyy-MM-dd}.log for the active file
17:29:32,475 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'yyyy-MM-dd' from file name pattern 'C:/dev/diesel/trunk/diesel-test//logs/request/request-%d{yyyy-MM-dd}.log'.
17:29:32,475 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
17:29:32,475 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Wed Jun 13 17:29:32 CDT 2012
17:29:32,475 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.access.PatternLayoutEncoder] for [encoder] property
17:29:32,497 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: C:/dev/diesel/trunk/diesel-test//logs/request/request-2012-06-13.log
17:29:32,497 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
17:29:32,498 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.access.jetty.v7.RequestLogImpl@3caa4b
17:29:32,498 |-INFO in ch.qos.logback.access.joran.action.ConfigurationAction - End of configuration.
17:29:32,499 |-INFO in ch.qos.logback.access.jetty.v7.RequestLogImpl@3caa4b - RequestLog added to RequestLogRegistry with name: LogbackRequestLog 
```

这是 logback.xml。请注意，我设置 root level=OFF 进行测试。

```
<configuration>

    <property name="MAIN_LOG_DIR" value="${app.home}/logs"/>
    <property name="DEFAULT_ENCODER_PATTERN" value="%date{yyyy-MM-dd HH:mm:ss} %logger %-4relative %-5level %msg%n" />
    <property name="DEFAULT_FILENAME_PATTERN" value="-%d{yyyy-MM-dd}.log" />

    <logger name="org.quartz" additivity="false">
        <appender class="ch.qos.logback.core.helpers.NOPAppender"></appender>   
    </logger>

    <root level="OFF">
        <appender class="ch.qos.logback.core.rolling.RollingFileAppender">
            <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
                <fileNamePattern>${MAIN_LOG_DIR}/root/root${DEFAULT_FILENAME_PATTERN}</fileNamePattern>
            </rollingPolicy>
            <encoder><pattern>${DEFAULT_ENCODER_PATTERN}</pattern></encoder>
        </appender> 
    </root>

</configuration> 
```

我还有一个单独的 logback-access.xml，如果有人想看，我会发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:46:33.470

您看到的状态消息是由 logback-access 而不是 logback-classic 输出的。

第一行是赠品（还有其他迹象）

```
|-INFO in ch.qos.logback.**access**.joran.action.ConfigurationAction - Ignoring debug attribute. 
```

Logback-access 在控制台上输出其内部状态，因为显然它已被要求这样做：

```
|-INFO in ch.qos.logback.core.joran.action.StatusListenerAction - Adding status listener of type [ch.qos.logback.core.status.OnConsoleStatusListener] 
```

对于 logback-access，配置文件名为`logback-access.xml`. 您应该发布该文件的内容，而不是 logback.xml。

# jquery - 简单的 jquery UI 自动完成页面不起作用

> ID：11024300
> 
> 赞同：1
> 
> 时间：2012-06-13T22:33:17.780
> 
> 标签：jquery, json, jquery-ui, autocomplete

我是 jquery 编程的初学者：如果我的代码不好，我深表歉意。

我有一个简单的 html 文件

```
<!DOCTYPE html>
<html>
<head>
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

 <script>
$(document).ready(function() {
    var arr = [];
    var items = {};
    $.getJSON('testjson.json', function(data) {
        $.each(data, function(key, value){
            arr.push(value);
        });
        arr.join(',');
        items = {source: arr};
    });
    $("input#autocomplete").autocomplete(items);
  });
  </script>
</head>
<body style="font-size:62.5%;">

<div id="Heading" >
<h2 align="center">Client Browser</h2>
</div>  
<input id="autocomplete" size="100" align="middle"/>

</body>
</html> 
```

这是我的 testjson.json 文件：

```
{
"1":"One",
"2":"Two",
"3":"Three"
} 
```

当我使用 Altova XML spy 运行 html 文件时，我得到了正确的输出。但是当我在浏览器中打开它（通过 XAMP 服务器运行）时，这就是我在 Firefox 控制台中得到的：

jquery-ui.min.js 第 5 行中的“this.source 不是函数”

但是，如果我直接将 JS 对象传递给自动完成功能，它确实有效，例如，以下代码有效：

```
$("input#autocomplete").autocomplete({source:["One", "Two", "Three"]}); 
```

我无法理解问题出在哪里，因为项目包含相同的对象。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:37:59.937

我认为问题在于您不是在成功的 Ajax 请求之后而是在执行请求的同时初始化您的自动完成功能。

您应该将相应的行放在成功处理程序中：

```
$.getJSON('testjson.json', function(data) {
    $.each(data, function(key, value){
        arr.push(value);
    });
    arr.join(',');               // BTW, this line doesn't make any sense
    items = {source: arr};

    $("input#autocomplete").autocomplete(items);   // <-- place here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:41:31.307

尝试移动这条线：

```
$("input#autocomplete").autocomplete(items); 
```

进入您的 getJSON 回调。IE

```
$.getJSON('testjson.json', function(data) {
    $.each(data, function(key, value){
        arr.push(value);
    });
    arr.join(',');
    items = {source: arr};
    $("input#autocomplete").autocomplete(items);
}); 
```

# php - LuhnCalc 和 bpay MOD10 版本 5

> ID：11024309
> 
> 赞同：6
> 
> 时间：2012-06-13T22:34:09.837
> 
> 标签：php, payment, credit-card, luhn

我正在使用以下 PHP 代码来计算 BPay 的 CRN：

```
<?php
function LuhnCalc($number) {
  $chars = array_reverse(str_split($number, 1));
  $odd = array_intersect_key($chars, array_fill_keys(range(1, count($chars), 2), null));
  $even = array_intersect_key($chars, array_fill_keys(range(0, count($chars), 2), null));
  $even = array_map(function($n) { return ($n >= 5)?2 * $n - 9:2 * $n; }, $even);
  $total = array_sum($odd) + array_sum($even);
  return ((floor($total / 10) + 1) * 10 - $total) % 10;
}
print LuhnCalc($_GET['num']);
?> 
```

但是，BPAY 似乎是 MOD 10 的第 5 版，我找不到任何文档。好像和MOD10不太一样。

以下数字经过测试：

2005,1597,3651,0584,9675

```
bPAY
2005 = 20052
1597 = 15976
3651 = 36514
0584 = 05840
9675 = 96752

MY CODE 
2005 = 20057 
1597 = 15974 
3651 = 36517 
0584 = 05843 
9675 = 96752 
```

如您所见，它们都不匹配 BPAY 号码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:53:59.463

此 PHP 函数将根据 mod10 版本 5 算法生成 BPay 参考编号。

谁知道为什么 BPay 不能将此添加到他们的网站。我只是通过谷歌搜索找到了一个解释，发现算法被称为“MOD10V05”而不是“Mod 10 version 5”。

```
function generateBpayRef($number) {

    $number = preg_replace("/\D/", "", $number);

    // The seed number needs to be numeric
    if(!is_numeric($number)) return false;

    // Must be a positive number
    if($number <= 0) return false;

    // Get the length of the seed number
    $length = strlen($number);

    $total = 0;

    // For each character in seed number, sum the character multiplied by its one based array position (instead of normal PHP zero based numbering)
    for($i = 0; $i < $length; $i++) $total += $number{$i} * ($i + 1);

    // The check digit is the result of the sum total from above mod 10
    $checkdigit = fmod($total, 10);

    // Return the original seed plus the check digit
    return $number . $checkdigit;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T05:30:40.797

这是一种在 SQL Server 中使用 t-sql 用户定义函数来实现“MOD10V5”算法（或“mod 10 版本 5”）的方法。它接受最长 9 个字符的客户 ID，并返回 11 个字符的 CRN（客户参考号）。

我还在我的 CustomerID 的开头添加了一个版本号，如果您认为将来可能最终更改它，您也可以这样做。

```
CREATE Function [dbo].[CalculateBPayCRN]
(
    @CustomerID nvarchar(9)
)
RETURNS varchar(11)
AS
BEGIN

    DECLARE @NewCRN nvarchar(11)
    DECLARE @Multiplier TINYINT 
    DECLARE @Sum int
    DECLARE @SubTotal int  
    DECLARE @CheckDigit int  
    DECLARE @ReturnVal BIGINT

    SELECT @Multiplier = 1
    SELECT @SubTotal = 0

    -- If it's less than 9 characters, pad it with 0's, then prepend a '1'

    SELECT  @NewCRN = '1' + right('000000000'+ rtrim(@CustomerID), 9)

    -- loop through each digit in the @NewCRN, multiple it by the correct weighting and subtotal it:

    WHILE @Multiplier <= LEN(@NewCRN)  
    BEGIN  

        SET @Sum =  CAST(SUBSTRING(@NewCRN,@Multiplier,1) AS TINYINT) * @Multiplier  
        SET @SubTotal = @SubTotal + @Sum  
        SET @Multiplier = @Multiplier + 1  

    END 

    -- mod 10 the subtotal and the result is our check digit

    SET @CheckDigit = @SubTotal % 10  

    SELECT @ReturnVal = @NewCRN + cast(@CheckDigit as varchar)

    RETURN @ReturnVal
END
GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T05:21:20.030

PHP 中的模块 10 V1。针对我的 Windows dataflex 例程进行了测试，结果是一样的。

```
function generateBpayRef($number) {
    //Mod 10 v1
    $number = preg_replace("/\D/", "", $number);

    // The seed number needs to be numeric
    if(!is_numeric($number)) return false;
    // Must be a positive number
    if($number <= 0) return false;

    $stringMemberNo =  "$number";
    $stringMemberNo = str_pad($stringMemberNo, 6, "0", STR_PAD_LEFT);  
    //echo " Padded Number is $stringMemberNo  ";
    $crn = $stringMemberNo;

    for($i=0;$i<7;$i++){
           $crnval = substr($crn,(5-$i),1);
           $iPartVal = $iWeight * $crnval;

           if($iPartVal>9){
             //echo " Greater than 9: $iPartVal ";
             $firstChar = substr($iPartVal,0,1); 
             $secondChar = substr($iPartVal,1,1);                           
             $iPartVal=$firstChar+$secondChar;
             //$iPartVal -= 9;

           }
           $iSum+=$iPartVal;

           $iWeight++;
           if ($iWeight>2){$iWeight=1;}

           //echo " CRN: $crnval ] Weight: $iWeight ] Part: $iPartVal ] SUM: $iSum ";
    }
    $iSum %= 10;

    if($iSum==0){
        //echo " zero check  is $iSum ";                    
        //return $iSum;
    }
    else{
        //return 10-$iSum;
        $iSum=(10-$iSum);
    }
    //echo " Check is a $iSum ";                                        

    $BpayMemberNo  = $stringMemberNo . $iSum ;
    echo " New: $BpayMemberNo ";
    return ($BpayMemberNo);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-28T07:11:35.267

这是我为 Mod 10 v5 快速准备的 ruby​​ 类

```
module Bpay
  class CRN

    attr_accessor :number, :crn

    class << self

      def calculate_for(number)
        new(number).crn
      end

    end

    def initialize(number)
      @number = number
      calculate
    end

    def calculate
      raise ArgumentError, "The number '#{number}' is not valid" unless valid?

      digits      = number.to_s.scan(/\d/).map { |x| x.to_i }
      raise ArgumentError, "The number '#{number}' must be at least 2 digits in length" if digits.size < 2

      check_digit = digits.each_with_index.map { |d, i| d * (i + 1) }.inject(:+) % 10

      @crn = "#{number}#{check_digit}"
    end

    def valid?
      return false unless !!Integer(number.to_s) rescue false
      return false if number.to_i <= 0
      true
    end

  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T01:14:56.047

这是在 C# 中，但这是我迄今为止用于 BPay 校验位生成的内容：

```
private void btnBPayGenerate_Click(object sender, EventArgs e)
{
    var originalChars = txtBPayNumber.Text.ToCharArray();
    List<int> oddDigits = new List<int>();
    List<int> evenDigits = new List<int>();
    int oddTotal = 0, evenTotal = 0, total = 0, checkDigit ;

    const int oddMultiplier = 3;
    const int modulus = 10;
    bool isOdd = true;
    for (int x = 0; x < originalChars.Length; x++)
    {
        if(isOdd)
                oddDigits.Add(Int32.Parse(originalChars[x].ToString()));
            else
                evenDigits.Add(Int32.Parse(originalChars[x].ToString()));
            isOdd = !isOdd;
        }

        foreach (var digit in oddDigits)
            oddTotal += digit;

        foreach (var digit in evenDigits)
            evenTotal += digit;

        oddTotal = oddTotal * oddMultiplier;

        total = oddTotal + evenTotal;

        checkDigit = (modulus - (total % modulus));
lblBPayResult.Text = txtBPayNumber.Text + checkDigit.ToString();
} 
```

我还没有完成测试，一旦 BPAY 回复我，我会回复。

**编辑：**试试这个：[https ://gist.github.com/1287893](https://gist.github.com/1287893)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-06T01:33:36.870

我必须为 javascript 制定一个版本，这就是我想出的。它正确地生成了原始问题中的预期数字。

```
var startingNumber = 2005;
var reference = startingNumber.toString();
var subTotal = 0;
for (var x = 0; x < reference.length; x++) {
    subTotal += (x + 1) * reference.charAt(x);
}
var digit = subTotal % 10;
var bpayReference = reference + digit.toString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-06T03:15:27.160

这是我使用 vb.net 创建的用于计算 mod 10 版本 5 校验位的函数

```
Private Function CalcCheckDigit(ByRef psBaseNumber As String) As String

    Dim lCheckDigit, iLoop As Integer
    Dim dCalcNumber As Double

    lCheckDigit = 0
    dCalcNumber = 0

    For iLoop = 0 To (psBaseNumber.Length - 1)

        lCheckDigit = lCheckDigit + (psBaseNumber.Substring(iLoop, 1) * (iLoop + 1))

    Next iLoop

    lCheckDigit = lCheckDigit Mod 10
    CalcCheckDigit = psBaseNumber & CStr(lCheckDigit)

End Function 
```

# mysql - mysql复制期间'replicate-rewrite-db'和'replicate-do-db'有什么区别？

> ID：11024312
> 
> 赞同：3
> 
> 时间：2012-06-13T22:34:27.283
> 
> 标签：mysql, mysql-management

我正在尝试设置 mysql 复制。我看到在不同的地方使用了提到的两个选项。我认为当主从数据库名称不同时使用replicate-rewrite-db。这是这两个选项之间的唯一区别。在复制期间是否有类似的选项可以将主表重写/重命名为从表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:40:57.517

他们并没有真正的关系。

**当查询包含“USE”语句时， replicate-rewrite-db**用于更改指定的数据库（也就是说，如果对 master 的查询是“USE foo”，则在执行的查询中可能会转换为“USE bar”在复制人上）。

**replicate-do-table**告诉 MySQL 将复制流限制到指定的 table(s)，以便只有针对该 (或那些) table(s) 的查询才会在从站上复制。

本文详细介绍了您可以设置的复制选项：http: [//dev.mysql.com/doc/refman/5.0/en/replication-options-slave.html](http://dev.mysql.com/doc/refman/5.0/en/replication-options-slave.html)

# javascript - 淡入 div 的背景图像（不是主体或淡出背景颜色）

> ID：11024315
> 
> 赞同：4
> 
> 时间：2012-06-13T22:34:41.607
> 
> 标签：javascript, jquery, html, css, jquery-ui

很简单，我试图淡入 div 的背景图像；我已经看到使用两个 div 完成此操作，并通过淡出覆盖背景图像的 div 的背景颜色有效地*显示（即：人造淡入）背景图像。*这不会解决我的问题。

如果“掩码”与主体背景颜色相同，则上述解决方案有效。就我而言，身体的背景是带纹理的图像，所以这不起作用。我可以将“掩码”div 设置为与 body 具有相同的背景图像，但使用 z-indexed div 似乎有点矫枉过正。

**tl;博士**我在身体的某个地方有一个 div - 我如何淡入它的背景图像？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:44:54.567

你需要两个div。第一个没有背景颜色，第二个有背景图像。淡出第二个（Asherlc 提出了一种方法），你就完成了。

```
.body {background-image:url(bg.png)}
.toFade {opacity=1 ... alternatives }
...

<div>
    <div class=toFade style="background-image:url(img.png)">
        <!-- possible content -->
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T22:44:11.430

据我所知不可能。您将需要 2 个图像/元素来执行此操作。您可以使用 jquery / jquery ui 的 toggleClass 持续时间。

请参阅此处的示例：

[如何在 Jquery 中使用 .css 更改背景图像时添加淡入淡出效果](https://stackoverflow.com/questions/5059955/how-to-add-a-fadein-effect-while-changing-background-image-using-css-in-jquery)

[带有图像淡入背景的jQuery li（淡入类）](https://stackoverflow.com/questions/2851757/jquery-li-with-image-fade-in-background-fade-in-class)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T00:47:04.633

好的！我花了一些时间来解决这种“挑战”，我想我想出了一个接近你要求的想法！尽管您只想用一个 div淡入**背景图像，但我使用****clone()**方法制作了一个*jQuery*脚本 。

 **唯一需要做的就是如果你也想在一些文本中淡入淡出！看看我的脚本，让我知道它是否有帮助！

[http://jsfiddle.net/7z8vB/](http://jsfiddle.net/7z8vB/)**

# java - SWT 复合和组

> ID：11024319
> 
> 赞同：1
> 
> 时间：2012-06-13T22:34:48.347
> 
> 标签：java, user-interface, swt

我想将文本放在合成和组中，但由于某种原因，文本没有显示在 UI 上。谁能给我一些建议？谢谢你！

```
 data = new GridData(GridData.HORIZONTAL_ALIGN_FILL);
    data.horizontalSpan = 2;
    Group group1 = new Group(shell, SWT.SHADOW_IN);
    group1.setText("This is my group");
    group1.setLayoutData(data);
    Text text = new Text(group1, SWT.NONE);
    text.setText("Group test with label"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:43:05.037

```
group1.setLayout(new RowLayout(SWT.VERTICAL)); 
```

这可以解决问题。

# php - 需要帮助加入第二张桌子

> ID：11024327
> 
> 赞同：0
> 
> 时间：2012-06-13T22:35:25.193
> 
> 标签：php, mysql

我有以下正在工作的查询：

```
$query = "SELECT 
   a.student_name, 
   city, 
   state, 
   request_date, 
   lat, 
   lng, 
   (3959 * acos( 
      cos( radians('".mysql_real_escape_string($center_lat)."') ) 
      * cos( radians( lat ) ) 
      * cos( radians( lng ) - radians('".mysql_real_escape_string($center_lng)."') ) 
      + sin( radians('".mysql_real_escape_string($center_lat)."') ) 
      * sin( radians( lat ) ) 
      ) 
   ) AS distance 
   FROM lesson_requests a
   INNER JOIN (
      SELECT student_name, MAX(request_date) AS MaxRequestDate
      FROM lesson_requests
      WHERE ( 
        3959 * acos( 
          cos( radians('".mysql_real_escape_string($center_lat)."') ) 
          * cos( radians( lat ) ) 
          * cos( radians( lng ) 
          - radians('".mysql_real_escape_string($center_lng)."') ) 
          + sin( radians('".mysql_real_escape_string($center_lat)."') ) 
          * sin( radians( lat ) ) ) 
      ) < ".mysql_real_escape_string($radius)." 
      GROUP BY student_name
   ) b
   ON a.student_name = b.student_name
   AND a.request_date = b.MaxRequestDate
   HAVING distance < ".mysql_real_escape_string($radius)." 
   ORDER BY distance 
   LIMIT 0 , 10"; 
```

我想要做的是将另一个表加入到名为“供应商”的查询中。该表有一个名为“user_purchased”的值，作为完整查询末尾的过滤器之一，我必须确保名为“vendor”的表中的“user_purchased”不包含“abc_company”字样。像这样使用 MATCH

```
...AND NOT MATCH(user_purchased) AGAINST ('abc_company') 
```

有人可以帮我加入这个附加表吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:01:33.310

那里发生了很多事情...

首先，HAVING 只能与相应的 GROUP BY 一起使用。您的 GROUP BY 适用于子查询（将其视为表）。我想你想要一个 WHERE 子句。

自加入 (*lesson_requests INNER JOIN (SELECT stuff from course_requests*) 也有点令人困惑，尽管我可以看到你正在尝试做什么（即，获取每个学生的记录以及最大请求日期）。

最后，像“name”这样的 varchar 通常会导致主键错误。考虑创建某种整数学生 ID 代理键并改用它。

无论如何，我认为你想要类似的东西：

```
SELECT student_name, 
       city, 
       state, 
       request_date, 
       lat, 
       lng, 
       <<DISTANCE COLUMN>> AS distance, 
       vendor.user_purchased
FROM lesson_requests 
INNER JOIN 
   (
    SELECT student_id, MAX(request_date) AS max_request_date
    FROM lesson_requests
    WHERE <<COMPLEX CONDITION>>
    GROUP BY student_name
   ) AS recent_student_lesson_request
   ON  lesson_requests.student_name = recent_student_lesson_request.student_name
       AND lesson_requests.request_date = recent_student_lesson_request.max_request_date
LEFT JOIN vendor ON v.user_purchased = lesson_requests.student_name
WHERE vendor.user_purchased <> 'abs_company'
    AND distance < BLAH; 
```

这将作为可选表连接到供应商表中，并假定供应商表中的 user_purchased 对应于 student_name。如果该假设不适用，您需要弄清楚 vendor 和 course_requests 是如何相关的，并使用这些列进行连接。

如果给定的 student_name 从未出现在供应商表中，这仍然会打印出一条记录（因为，显然不是供应商的学生不能是供应商 'abc_company'）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:44:11.867

如果我理解正确，您可以添加“AND table.user_purchased！= ''abc_company''” 这将解决您的问题

# ios - Storyboard Segue 使用表格视图和来自 plist 的数据

> ID：11024330
> 
> 赞同：0
> 
> 时间：2012-06-13T22:35:47.097
> 
> 标签：ios, uitableview, plist, uistoryboard, uistoryboardsegue

我的数据在一个 plist 中，这是一个按字母顺序排列的城市名称列表，它还包含一个电话号码，当用户在表格视图中选择一行（城市名称）时，该电话号码将被推送到信息视图并显示。我已经从使用 a`NSMutableArray`到现在的 plist 来保存我的数据，现在我的 segue 无法正常工作。在模拟器中构建成功，但在单击表格单元格时会引发错误。关于为什么这不能正常工作的任何想法？我认为它是我的`cellForRowAtIndex`.. 或我的`prepareForSegue`方法中的一个变量。

```
#import "CityListTableViewController.h"

@interface CityListTableViewController () 

@end

@implementation CityListTableViewController

@synthesize cities, sections;

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

//ensure this is the Segue which is leading to the info view
if ([segue.identifier isEqualToString:@"ShowInfo"]) 
{
    //now setup info controller so it can function...
    //get the info instance
    InfoViewController *ivc = [segue destinationViewController];
    //get the selected row and city name from it
    NSIndexPath *path = [self.tableView indexPathForSelectedRow];
    //inform the info view of the selected city
    int row = [path row];
    City *c = [cities objectAtIndex:row];
    [ivc setCurrentCity:[cities objectAtIndex:path.row]];
    ivc.currentCity = c;
}   

}

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
        // Custom initialization
    }
return self;
}

- (void)viewDidLoad {

self.cities = [NSMutableArray arrayWithContentsOfFile:[[NSBundle mainBundle]  pathForResource:@"cities" ofType:@"plist"]];
self.sections = [[NSMutableDictionary alloc] init];

BOOL found;

// Loop through the cities and create our keys
for (NSDictionary *city in self.cities)
{        
    NSString *c = [[city objectForKey:@"city"] substringToIndex:1];

    found = NO;

    for (NSString *str in [self.sections allKeys])
    {
        if ([str isEqualToString:c])
        {
            found = YES;
        }
    }

    if (!found)
    {     
        [self.sections setValue:[[NSMutableArray alloc] init] forKey:c];
    }
}

// Loop again and sort the cities into their respective keys
for (NSDictionary *city in self.cities)
{
    [[self.sections objectForKey:[[city objectForKey:@"city"] substringToIndex:1]]  addObject:city];
}    

// Sort each section array
for (NSString *key in [self.sections allKeys])
{
    [[self.sections objectForKey:key] sortUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"city" ascending:YES]]];
}    

[super viewDidLoad];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
return [[self.sections allKeys] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{    
return [[[self.sections allKeys]  sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
return [[self.sections valueForKey:[[[self.sections allKeys]    sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:section]] count];
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView 
{
return [[self.sections allKeys]   sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
}

// Customize the appearance of table view cells.

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

static NSString *CellIdentifier = @"DeptCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSDictionary *current = [[self.sections valueForKey:[[[self.sections allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];

cell.textLabel.text = [current objectForKey:@"city"];    

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[tableView deselectRowAtIndexPath:indexPath animated:YES];

}
@end 
```

# objective-c - 按字母顺序排列 NSMutableArray 的正确方法是什么？

> ID：11024332
> 
> 赞同：0
> 
> 时间：2012-06-13T22:36:11.420
> 
> 标签：objective-c, nsmutablearray

我从 Stack Overflow 上的答案中找到了这些代码片段，但都没有优雅地解决我的问题。

[“按字母顺序排序数组...”中](https://stackoverflow.com/questions/7442778/sorting-array-in-alphabetic-order-and-displaying-array-values-in-table-view)的第一段代码没有给出任何警告，但随后出现了崩溃。

```
NSSortDescriptor *nameSort = [NSSortDescriptor sortDescriptorWithKey:@"Name" ascending:YES];
[myArray sortUsingDescriptors:[NSArray arrayWithObject:nameSort]]; 
```

虽然第二段代码在我的代码中每次使用都会生成一个警告，但会生成我想要的结果：

```
myMutableArray = [myMutableArray sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

所以，我的问题是为什么第二种方法适用于警告“ `Incompatible pointer types assigning to 'NSMutableArray*' from incompatible type 'NSArray*'`”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:44:20.857

如果您尝试对 NSMutableArray 进行就地排序，则应该使用`sortUsingSelector:`而不是重新分配结果`sortedArrayUsingSelector:`（声明为普通 NSArray，而不是 NSMutableArray）。

# .net - 为什么“密封”会影响 IDisposable 的实现？

> ID：11024336
> 
> 赞同：4
> 
> 时间：2012-06-13T22:36:22.963
> 
> 标签：.net, .net-2.0, idisposable, sealed

[在这里](https://stackoverflow.com/questions/898828/c-sharp-finalize-dispose-pattern)阅读答案后，我决定将我的类标记为密封，以简化[IDisposable](http://msdn.microsoft.com/en-us/library/ms244737%28v=vs.80%29.aspx)实现。为什么sealed会影响IDisposable的实现（例如`GC.SuppressFinalize(this);`不需要调用）？请解释发生了什么。我需要能够向其他开发人员解释为什么我将课程密封起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:30:52.793

如果实现的类`IDisposable`不是密封的，则派生类很可能需要做一些事情来响应，但也应该执行`Dispose`基类的操作。`Dispose`如果该类公开一个`Dispose`始终与 同义的公共成员，则`IDisposable.Dispose`可以在 C# 中通过简单地使用带有公共虚拟`Dispose`方法的隐式接口实现来实现必要的语义。

这种方法有两个问题：

1.  在父类公开一个公共的“Dispose”方法的情况下，它需要派生类使用不同的方法，而不是在它不公开的情况下；如果一个不公开公共“Dispose”方法的类被一个公开的类继承，事情可能会变得非常混乱。
2.  一些基本处理代码应该在派生类处理代码之前运行（例如，抑制重复“处理”尝试的代码），而一些应该在之后运行（例如，“GC.SuppressFinalize()”）。实现这一点的唯一方法是让非虚拟包装器调用受保护的虚拟函数。请注意，顺便说一句，Microsoft 的包装器没有正确抑制重复的-`Dispose`，但包装器是此类抑制代码的唯一好地方。

请注意，Microsoft 似乎打算将其`Dispose`模式用于基类不覆盖`Finalize`但派生类`Finalize`用于清理的情况。虽然这可能是本意，但这并不是一个好的模式。除了极少数例外，唯一应该重写`Finalize`以进行清理的类是那些派生自诸如`Object`. 如果一个类实现`IDisposable`但不覆盖`Finalize`，则派生类应该覆盖的唯一目的`Finalize`是在被调用时发出警报`Finalize`，甚至这种用法也值得商榷（更好的模式是：

```
类什么：IDisposable
{
  IDisposable DisposedStatusObject；
  // 生成一个静态虚拟对象实例，我们可以将其用作哨兵值
  // 它必须是 `IDisposable`，但实际上不应持有任何资源。

  静态 IDisposable DisposedStatusDisposed = new List<int>().GetEnumerator();

  public bool Disposed {get {return (DisposedStatusObject == DisposedStatusDisposed);} }

  任何（）
  {
    DisposedStatusObject = new DisposalAlarm(); // 构造函数中的第一件事
  }
  无效处置（）
  {
    IDisposable prevStatus;
    prevStatus = Interlocked.Exchange(DisposedStatus, DisposedStatusDisposed);
    if (prevStatus != DisposedStatusDisposed)
    {
      处置（真）；
      prevStatus.Dispose();
    }
  }
}

```

该类`DisposalAlarm()`被假定为具有覆盖方法的类，如果该方法在没有首先调用其方法的情况下被调用`Finalize()`，则会发出警报。的方法将确保，如果派生类方法正确返回，警报将被取消。请注意，如果 的实例具有未抑制的终结器，则必须保留直接或间接引用的所有内容，直到该终结器运行或被抑制为止。相比之下，添加一个对象并不会延长.`Finalize()``Dispose()``Dispose``whatever``whatever``whatever``DisposalAlarm``whatever`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:38:13.407

创建一个类`sealed`意味着不能有从它派生的类。这意味着实现`IDisposable`不需要考虑派生类的行为（或不当行为）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T22:39:28.327

密封类不打算用作基类，而非密封类是。因此存在区别：非密封类需要为其派生类提供一种实现`Dispose()`自己的方法，而密封类则没有这种责任，因为它无法扩展。

# iphone - 浮点数，负零？

> ID：11024339
> 
> 赞同：0
> 
> 时间：2012-06-13T22:36:33.593
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我正在为我的游戏设置音效音量。我希望音量以 0.1 为增量从 0.0 变为 1.0。

但是，当它达到零时，我的日志反而告诉我它是 -0.00000 并继续倒计时。请告诉我有什么问题。谢谢

```
-(void)sfxUp{
     NSLog(@"SFX UP %f",[[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"]);
    if ([[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"] == 1.0f)
        return;
    [[NSUserDefaults standardUserDefaults]setFloat:([[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"]+0.1f) forKey:@"sfx_volume"];
    [[NSUserDefaults standardUserDefaults]synchronize];
    [[SimpleAudioEngine sharedEngine] setEffectsVolume:[[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"]];
    NSLog(@"SFX UP %f",[[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"]);
}
-(void)sfxDown{
    NSLog(@"SFX DOWN %f",[[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"]);
    if ([[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"] == 0.0f)
        return;
    [[NSUserDefaults standardUserDefaults]setFloat:([[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"]-0.1f) forKey:@"sfx_volume"];
    [[NSUserDefaults standardUserDefaults]synchronize];
    [[SimpleAudioEngine sharedEngine] setEffectsVolume:[[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"]];
     NSLog(@"SFX DOWN %f",[[NSUserDefaults standardUserDefaults]floatForKey:@"sfx_volume"]);
} 
```

仅单击“降低音量”按钮，这是我的日志输出：

```
2012-06-13 18:32:25.067 Bomb Defuse[80558:1c403] SFX DOWN 1.000000
2012-06-13 18:32:25.068 Bomb Defuse[80558:1c403] SFX DOWN 0.900000
2012-06-13 18:32:25.385 Bomb Defuse[80558:1c403] SFX DOWN 0.900000
2012-06-13 18:32:25.386 Bomb Defuse[80558:1c403] SFX DOWN 0.800000
2012-06-13 18:32:25.623 Bomb Defuse[80558:1c403] SFX DOWN 0.800000
2012-06-13 18:32:25.624 Bomb Defuse[80558:1c403] SFX DOWN 0.700000
2012-06-13 18:32:25.873 Bomb Defuse[80558:1c403] SFX DOWN 0.700000
2012-06-13 18:32:25.874 Bomb Defuse[80558:1c403] SFX DOWN 0.600000
2012-06-13 18:32:26.116 Bomb Defuse[80558:1c403] SFX DOWN 0.600000
2012-06-13 18:32:26.140 Bomb Defuse[80558:1c403] SFX DOWN 0.500000
2012-06-13 18:32:26.346 Bomb Defuse[80558:1c403] SFX DOWN 0.500000
2012-06-13 18:32:26.348 Bomb Defuse[80558:1c403] SFX DOWN 0.400000
2012-06-13 18:32:26.605 Bomb Defuse[80558:1c403] SFX DOWN 0.400000
2012-06-13 18:32:26.608 Bomb Defuse[80558:1c403] SFX DOWN 0.300000
2012-06-13 18:32:26.835 Bomb Defuse[80558:1c403] SFX DOWN 0.300000
2012-06-13 18:32:26.838 Bomb Defuse[80558:1c403] SFX DOWN 0.200000
2012-06-13 18:32:27.068 Bomb Defuse[80558:1c403] SFX DOWN 0.200000
2012-06-13 18:32:27.069 Bomb Defuse[80558:1c403] SFX DOWN 0.100000
2012-06-13 18:32:27.319 Bomb Defuse[80558:1c403] SFX DOWN 0.100000
2012-06-13 18:32:27.338 Bomb Defuse[80558:1c403] SFX DOWN -0.000000
2012-06-13 18:32:27.630 Bomb Defuse[80558:1c403] SFX DOWN -0.000000
2012-06-13 18:32:27.640 Bomb Defuse[80558:1c403] SFX DOWN -0.100000
2012-06-13 18:32:27.946 Bomb Defuse[80558:1c403] SFX DOWN -0.100000
2012-06-13 18:32:27.947 Bomb Defuse[80558:1c403] SFX DOWN -0.200000
2012-06-13 18:32:28.170 Bomb Defuse[80558:1c403] SFX DOWN -0.200000
2012-06-13 18:32:28.172 Bomb Defuse[80558:1c403] SFX DOWN -0.300000
2012-06-13 18:32:28.414 Bomb Defuse[80558:1c403] SFX DOWN -0.300000
2012-06-13 18:32:28.416 Bomb Defuse[80558:1c403] SFX DOWN -0.400000
2012-06-13 18:32:28.641 Bomb Defuse[80558:1c403] SFX DOWN -0.400000
2012-06-13 18:32:28.643 Bomb Defuse[80558:1c403] SFX DOWN -0.500000
2012-06-13 18:32:28.869 Bomb Defuse[80558:1c403] SFX DOWN -0.500000
2012-06-13 18:32:28.870 Bomb Defuse[80558:1c403] SFX DOWN -0.600000
2012-06-13 18:32:29.301 Bomb Defuse[80558:1c403] SFX DOWN -0.600000
2012-06-13 18:32:29.303 Bomb Defuse[80558:1c403] SFX DOWN -0.700000
2012-06-13 18:32:29.584 Bomb Defuse[80558:1c403] SFX DOWN -0.700000
2012-06-13 18:32:29.586 Bomb Defuse[80558:1c403] SFX DOWN -0.800000 
```

**编辑：**

更改为 >= 和 <= （分别）具有以下输出：

```
2012-06-13 18:45:34.574 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:35.135 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:35.529 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:35.877 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:36.057 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:36.229 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:36.391 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:36.542 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:36.717 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:36.897 Bomb Defuse[80607:1c403] BG UP 1.000000
2012-06-13 18:45:37.599 Bomb Defuse[80607:1c403] BG DOWN1.000000
2012-06-13 18:45:37.602 Bomb Defuse[80607:1c403] BG DOWN0.900000
2012-06-13 18:45:38.431 Bomb Defuse[80607:1c403] BG DOWN0.900000
2012-06-13 18:45:38.491 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:38.617 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:38.951 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:39.125 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:39.479 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:39.908 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:40.399 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:40.624 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:40.841 Bomb Defuse[80607:1c403] BG DOWN-0.100000
2012-06-13 18:45:41.059 Bomb Defuse[80607:1c403] BG DOWN-0.100000 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T22:41:32.010

浮点运算并不精确——从 1.0 开始减去 0.1 十次不一定会得到精确的 0.0。有关更多详细信息，请阅读经典论文[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

您可以通过将值限制为更改时的值、`[0.0, 1.0]`避免严格的相等比较（例如，使用`>=`or`<=`代替`==`在需要的地方到 10.0。

# python - 带有由 Javascript 填充的选项的 Python Mechanize 表单

> ID：11024340
> 
> 赞同：0
> 
> 时间：2012-06-13T22:37:03.307
> 
> 标签：python, screen-scraping, mechanize

我正在尝试使用机械化从该站点获取纽约地铁北部铁路的价格：http: [//as0.mta.info/mnr/fares/choosestation.cfm](http://as0.mta.info/mnr/fares/choosestation.cfm)

问题是当您选择第一个选项时，该站点使用 javascript 来填充您的可能目的地列表。我已经在 python 中编写了等效的代码，但我似乎无法让它全部工作。这是我到目前为止所拥有的：

```
import mechanize
import cookielib
from bs4 import BeautifulSoup

br = mechanize.Browser()
br.set_handle_robots(False)
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1)     Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

br.open("http://as0.mta.info/mnr/fares/choosestation.cfm")

br.select_form(name="form1")
br.form.set_all_readonly(False)

origin_control = br.form.find_control("orig_stat", type="select")
origin_control_list = origin_control.items
origin_control.value = [origin_control.items[0].name]

destination_control_list = reFillList(0, origin_control_list)

destination_control = br.form.find_control("dest_stat", type="select")
destination_control.items = destination_control_list
destination_control.value = [destination_control.items[0].name]

response = br.submit()
response_text = response.read()
print response_text 
```

我知道我没有给你 reFillList() 方法的代码，因为它很长，但假设它正确地创建了一个 mechanize.option 对象列表。Python 没有抱怨我任何事情，但是在提交时我得到了这个警报的 html：

“两条线路之间的票价信息无法在线获取。请致电 511 联系我们的客户信息中心，并要求与代表交谈以获取更多信息。”

我在这里错过了什么吗？感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:54:36.583

如果不尝试理解该函数中的疯狂逻辑，就无法真正做到这一点。我建议使用 js 解决方案或像 selenium 这样的完整浏览器。

# javascript - 使用映射插件在 KnockoutJS 中扩展视图模型

> ID：11024342
> 
> 赞同：1
> 
> 时间：2012-06-13T22:37:21.527
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我有一个来自服务器的视图模型，像这样的 json

```
{
    Project: {
        Items: {
            ItemA: {
                Tags: [
                    ...
                ]
            },
            ItemB: ...
        }
    }
} 
```

然后我将这个对象与 knockout.mapping 插件绑定，但我需要 ItemA 有，例如，一个额外的 Marked observable，这样我在标记中可以做类似的事情

```
<ul data-bind="foreach: Project.Items">
    ...            
    <input type="checkbox" data-bind="checked: Marked"> 
```

我尝试`create`在映射过程中使用该选项（如此处所示[ko.mapping create function, extend object](https://stackoverflow.com/questions/9779969/ko-mapping-create-function-extend-object)），但我无法弄清楚如何嵌套该`create`方法以扩展 Project.Items 中的对象。

我一直在尝试这样的映射

```
var mappings = {
    'Items': {
        create: function (options) {
            return $.map(options.data, function(obj) {
                return new Item(obj);
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:13:27.853

解决方案是这个绑定

```
var mappings = {
    'Items': {
        create: function (options) {
            return new Item(options.data);
        }
    }
}; 
```

# python - 私有名称修改功能

> ID：11024344
> 
> 赞同：12
> 
> 时间：2012-06-13T22:37:37.133
> 
> 标签：python, oop, name-mangling

Python 标准库中是否有一个函数可以用“私有”属性名称重现 Python 的名称修改方案？似乎会有，但我一生都找不到它。

我写了这个，但如果有更好的方法，我会全力以赴。

```
def mangle_name (cls, attrname) :
    prefix = '_' + cls.__name__.lstrip('_')

    if not attrname.startswith('__') :
        attrname = '__' + attrname

    if not attrname.endswith('__') :
        return prefix + attrname
    else :
        return attrname

class Foo :
    __some_such = 3

name = mangle_name(Foo, '__some_such')
print name
print hasattr(Foo(), name) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T23:05:04.680

看起来[编译器](http://docs.python.org/library/compiler.html)模块对此有一个 Python 实现，签名是类名的`mangle(name, klass)`位置，而不是对象本身。`klass`

以下是访问和使用它的方法：

```
>>> from compiler.misc import mangle
>>> mangle('__some_such', 'Foo')
'_Foo__some_such' 
```

请注意，编译器模块自 Python 2.6 起已弃用，并且在 Python 3.0 中不存在。

这是函数本身（来自[Python 2.7 源代码](http://hg.python.org/cpython/file/412c7daed0db/Lib/compiler/misc.py#l43)），如果您只想将其复制到源代码中或验证您的版本是否等效：

```
MANGLE_LEN = 256 # magic constant from compile.c

def mangle(name, klass):
    if not name.startswith('__'):
        return name
    if len(name) + 2 >= MANGLE_LEN:
        return name
    if name.endswith('__'):
        return name
    try:
        i = 0
        while klass[i] == '_':
            i = i + 1
    except IndexError:
        return name
    klass = klass[i:]

    tlen = len(klass) + len(name)
    if tlen > MANGLE_LEN:
        klass = klass[:MANGLE_LEN-tlen]

    return "_%s%s" % (klass, name) 
```

# c# - 编辑原始数据图像文件的缓冲区中的特定像素

> ID：11024349
> 
> 赞同：0
> 
> 时间：2012-06-13T22:38:12.090
> 
> 标签：c#, image-processing, binary, buffer

我已将原始二进制图像文件写入 Int16[] 缓冲区，我需要通过将特定数据点乘以特定标量来编辑特定数据点。是否有任何有效的方法来访问信息并能够在那里操作数据？

虽然它并不多，但我编写了一个 shell，然后在编辑完成后将缓冲区写回二进制文件，然后保存它：

```
public void correctColor()
        {
            //TODO: Write a loop to read each value in the buffer
            //      and multiply by the appropriate scalar.

            writeBinaryFile(this.outFile, this.pixelBuffer);
        } 
```

任何提示或建议的资源都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:50:44.950

对我来说，您尝试进行的转换的性质是什么，或者这样做可能会出现什么问题，这对我来说并不明显。

从表面上看，如果你真正拥有的是颜色像素（而不是调色板索引），那么这样的东西应该可以工作：

```
for(int i = 0; i < this.pixelBuffer.Length; i++) 
  this.pixelBuffer[i] *= 42; 
```

# ios - AQGridView 选择单元格

> ID：11024353
> 
> 赞同：1
> 
> 时间：2012-06-13T22:38:41.673
> 
> 标签：ios, aqgridview

我像这样创建一个自定义 AQGridViewCell：

```
- (AQGridViewCell *) gridView: (AQGridView *) aGridView cellForItemAtIndex: (NSUInteger) index
{
static NSString * PlainCellIdentifier = @"PlainCellIdentifier";

GridViewCell * cell = (GridViewCell *)[aGridView dequeueReusableCellWithIdentifier:@"PlainCellIdentifier"];

if ( cell == nil )
{
    cell = [[GridViewCell alloc] initWithFrame: CGRectMake(3.333, 3.3336, 100, 100)
                               reuseIdentifier: PlainCellIdentifier];
}
NSString *stringURL = [[featuredStories objectAtIndex:index] objectAtIndex:1];
NSLog(@"stringURL: %@", stringURL);
NSURL *url = [NSURL URLWithString:stringURL];
[cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"example0.png"]];
cell.storyID = [[featuredStories objectAtIndex:index] objectAtIndex:0];
return cell;
} 
```

当您像这样选择单元格时，我已经添加了该方法：

```
- (void) gridView:(AQGridView *)gridView didSelectItemAtIndex:(NSUInteger)index {

//I want to NSLog the cell.storyID here
NSLog (@"Selected theArgument=%d\n", index);

} 
```

我如何去访问in `storyID`the `cell`in `gridView:(AQGridView *)gridView didSelectItemAtIndex:(NSUInteger)index`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:24:54.223

将您更新`didSelectItemAtIndex`为以下内容

```
- (void) gridView:(AQGridView *)gridView didSelectItemAtIndex:(NSUInteger)index {

    //Get the cell at the selected index
    GridViewCell * cell = (GridViewCell *)[grid cellForItemAtIndex:index];
    NSLog(@"Story Id = %@", cell.storyID);
} 
```

# android - 保护移动应用程序 - 位置转移

> ID：11024354
> 
> 赞同：0
> 
> 时间：2012-06-13T22:38:43.337
> 
> 标签：android, web-services, security, ws-security

我有一个`HTTPS`需要从移动（iPhone 或 Android）应用程序访问的 WebService。两者都是我开发的。

手机需要每隔几分钟将其位置发送到我们的服务器——我需要保护这些数据。

在我开发的所有移动应用程序中，我在客户端和数据层编写了 Web 服务，仅此而已......但我现在明白它不安全。

**我的问题是：**

1.有没有比使用网络服务转移位置更安全的选择？

2.如何保护通过WS传输的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:45:03.380

考虑使用 RSA 等非对称加密算法加密此数据。这在 Android 上并不难，但在 iOS 上可能会非常棘手。

重要的是只在设备上存储公钥。不要在设备上以任何形式存储私钥。在 iOS 上，您可以存储证书并使用证书中的公钥加密您的数据。

希望能帮助到你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T02:16:24.380

如果您使用 HTTPS，传输中的数据会自动加密。不要*尝试*使用您在 SO/论坛上找到的原始 RSA 或随机代码来发明自己的加密。只需在您的服务器上设置 SSL 并完成它。

# python - 是否有适用于 Python 的 MySQL 数据库抽象层在 Linux 和 Windows 上都像 pyodbc 一样工作？

> ID：11024357
> 
> 赞同：1
> 
> 时间：2012-06-13T22:39:25.503
> 
> 标签：python, mysql, windows, linux

我在 Windows 机器上为 Linux 服务器开发。我在 Windows 上使用 pyodbc 连接到 MySQL，并希望在我的 Linux 机器上使用 MySQLdb 连接到它。我原以为它们都实现了相同的 API，因此可以兼容。我错了，现在意识到我必须重新编写所有代码才能在 Linux 上运行，这随后将使其无法在 Windows 上运行。

是否有另一个薄抽象层可以让我编写更便携的代码？我在考虑 SQLAlchemy，但我真的只是想执行 SQL 语句，所以学习一种全新的领域特定语言似乎很麻烦。

感谢任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:49:03.483

[SQLAlchemy](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html)允许您直接发出语句

链接页面中的示例

```
connection = engine.connect()
result = connection.execute("select username from users")
for row in result:
    print "username:", row['username']
connection.close() 
```

# clearcase - 在 UCM 组件之间重新定位元素时保留元素历史记录

> ID：11024360
> 
> 赞同：1
> 
> 时间：2012-06-13T22:39:56.807
> 
> 标签：clearcase, clearcase-ucm

由于各种可怕但必要的原因，我们的项目需要将一个 UCM VOB 拆分为多个 UCM VOB。我们目前有以下 VOB/组件结构：

```
/vobs/companyA/teamA/dev
/vobs/companyA/teamB/dev
/vobs/companyB/teamC/dev 
```

我们正在重组为以下结构：

```
/vobs/teamA/dev
/vobs/teamB/dev
/vobs/teamC/dev 
```

有没有办法将元素移动/重新定位到新 VOB 中的新组件**并**保留元素的历史记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:06:45.400

执行此操作的命令是[`cleartool relocate`](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_admin.doc/topics/c_relo.htm)，其手册页明确提到：

> 注意：您不能在 UCM 组件 VOB 或 PVOB 中使用重定位。在执行任何重定位操作之前，请阅读重定位参考页。

所以最好选择最后一个有意义的基线，并在新的 vobs 中“clearfsimport”它们的内容（至少是正确的子集），以便重新创建这些基线。

# c# - 同时使用 ErrorProvider 和禁用按钮

> ID：11024361
> 
> 赞同：0
> 
> 时间：2012-06-13T22:40:12.213
> 
> 标签：c#, validation

我喜欢 ErrorProvider 的红色感叹号，我想用它来向用户展示问题所在。如果表单中的数据无效，我还要求必须禁用我的更新按钮。我禁用/启用所有文本框的 TextChanged 事件上的更新按钮。应从验证所有文本框的事件中使用 ErrorProvider。

现在的问题是：在最后一个文本框中输入错误数据时，更新按钮仍将被禁用，但由于用户尚未离开控件，因此不会显示 ErrorProvider。在这种情况下我能做什么？如何最大程度地减少用户的困惑，他们肯定会问“为什么禁用更新，但窗口上的任何地方都没有感叹号”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:53:17.760

您可以验证 TextChanged 事件上的最后一个文本框（或全部）。为了等待用户输入值得验证的内容，您可以：

1.  在对 TextChanged 启用验证之前等待给定的最少输入字符数，或者
2.  在 TextChanged 上启动一个计时器 - 并在每个 TextChanged 事件上重新启动它 - 间隔为 3 秒，当此计时器触发时 - 并且文本框不为空 - 您可以进行验证。

# javascript - 从网络服务解析日期

> ID：11024367
> 
> 赞同：4
> 
> 时间：2012-06-13T22:40:43.883
> 
> 标签：javascript, jquery, json, web-services, datetime

我从网络服务中获取日期，它们看起来像这样：

`/Date(1310187160270+1200)/`

我将如何将其转换为 javascript 中的日期对象？

我用谷歌搜索了一下，找不到一个像样的答案——这可能部分是因为我不确定这种类型的日期对象叫什么——所以如果有人也能阐明这一点，那将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T22:44:56.783

```
var date = new Date(1310187160270+1200); 
console.log(date) 
```

返回

2011 年 7 月 9 日星期六 06:52:41 GMT+0200（南非标准时间）

如果您需要按问题中的方式剥离它：

```
var returnVariable = "/Date(1346713200000+0100)/";
var d = new Date(parseFloat(returnVariable.replace("/Date(", "").replace(")/", ""))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T00:58:06.590

由于先前的答案不处理时区偏移，我将输入我的版本：

```
function fromDateString(str) {
    var res = str.match(/\/Date\((\d+)(?:([+-])(\d\d)(\d\d))?\)\//);
    if (res == null)
        return new Date(NaN); // or something that indicates it was not a DateString
    var time = parseInt(res[1], 10);
    if (res[2] && res[3] && res[4]) {
        var dir = res[2] == "+" ? -1 : 1,
            h = parseInt(res[3], 10),
            m = parseInt(res[4], 10);
        time += dir * (h*60+m) * 60000;
    }
    return new Date(time);
} 
```

正确的结果是`Fri Jul 08 2011 18:52:40 GMT+0200`，或`Fri, 08 Jul 2011 16:52:40 GMT`。

# jsf - Apache TomEE：想在我的项目中使用 Mojarra JSF 而不是内置的 Apache MyFaces

> ID：11024372
> 
> 赞同：1
> 
> 时间：2012-06-13T22:41:18.000
> 
> 标签：jsf, myfaces, mojarra

我有一个相关的问题。我正在将我的项目从 Jboss 迁移到 TomEE。我正在使用 Mojarra JSF，并且在尝试使用 MyFaces 使一切正常工作时遇到了问题（查看加密问题、UI 问题、ajax 问题等）。我只想在我的项目中包含 Mojarra jar，但看起来它们与 TomEE 捆绑的内置 MyFaces jar 冲突。我不断收到不支持的异常。

有没有办法指定 Mojarra JSF 应该覆盖 myfaces？有没有 web.xml 参数之类的？顺便说一句，我没有使用 Maven（我见过很多带有 pom.xml 依赖标签的例子，这些例子对我没有帮助）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:37:12.457

我尝试了 3 天，经过多次调整（错误堆栈-> google -> 更改一些奇异的 xml 参数-> 新的错误堆栈-> google-> 更改一些奇异的 xml 参数等......），我可以做到工作，除了 EJB 注入不再工作（变为空）。所以我投降了，用我的脸代替了mojarra。

# jquery-mobile - jQuery移动图片库默认垂直滚动问题

> ID：11024373
> 
> 赞同：0
> 
> 时间：2012-06-13T22:41:22.993
> 
> 标签：jquery-mobile, vertical-scroll

我有一个带有一系列拇指的图片库。两者都是根据与产品关联的图像数量动态加载的。您可以单击拇指以获取该系列图像。在移动设备上，您可以左右滑动查看所有图像。这一切都很好。

这是我的问题：当您尝试向下滚动页面并且碰巧触摸了其中一个主要图像时，您会卡住并且页面不会移动。对于我的一生，我无法解决这个问题。我想知道是否有人遇到过这种情况并想出了解决方案。我认为可能有一种方法可以通过 touch-punch.js 来控制它，但无法弄清楚。谢谢你。

这是我简化的画廊 HTML：

```
<ul id="Gallery" class="gallery productGalleryInner">
<li>
<a href="#"><img src="img.jpg" />/a>
<a href="#"><img src="img.jpg" />/a>
<a href="#"><img src="img.jpg" />/a>
<a href="#"><img src="img.jpg" />/a>
<a href="#"><img src="img.jpg" />/a>
</li>
</ul>

</div> 
```

CSS：

```
#productGalleryWrap {
overflow: hidden;
margin: 7px 10px 0;
}

#productGalleryWrap .productGalleryInner {
white-space: nowrap;
}

#productGalleryWrap .productGalleryInner li {
display: inline;
}   

#productGalleryWrap .productGalleryInner img {
display: inline;
width: 50%;
} 
```

我正在使用 touch-punch.js 来控制水平拖动。这是代码：

```
(function ($) {

  // Detect touch support
  $.support.touch = 'ontouchend' in document;

  // Ignore browsers without touch support
  if (!$.support.touch) {
return;
  }

      var mouseProto = $.ui.mouse.prototype,
      _mouseInit = mouseProto._mouseInit,
      touchHandled;

  /**
   * Simulate a mouse event based on a corresponding touch event
   * @param {Object} event A touch event
  * @param {String} simulatedType The corresponding mouse event
  */
  function simulateMouseEvent (event, simulatedType) {

    // Ignore multi-touch events
    if (event.originalEvent.touches.length > 1) {
     return;
   }

    event.preventDefault();

    var touch = event.originalEvent.changedTouches[0],
        simulatedEvent = document.createEvent('MouseEvents');

// Initialize the simulated mouse event using the touch event's coordinates
simulatedEvent.initMouseEvent(
  simulatedType,    // type
  true,             // bubbles                    
  true,             // cancelable                 
  window,           // view                       
  1,                // detail                     
  touch.screenX,    // screenX                    
  touch.screenY,    // screenY                    
  touch.clientX,    // clientX                    
  touch.clientY,    // clientY                    
  false,            // ctrlKey                    
  false,            // altKey                     
  false,            // shiftKey                   
  false,            // metaKey                    
  0,                // button                     
  null              // relatedTarget              
    );

    // Dispatch the simulated event to the target element
event.target.dispatchEvent(simulatedEvent);
  }

  /**
   * Handle the jQuery UI widget's touchstart events
   * @param {Object} event The widget element's touchstart event
   */
  mouseProto._touchStart = function (event) {

   var self = this;

    // Ignore the event if another widget is already being handled
    if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {
      return;
    }

    // Set the flag to prevent other widgets from inheriting the touch event
touchHandled = true;

    // Track movement to determine if interaction was a click
self._touchMoved = false;

    // Simulate the mouseover event
simulateMouseEvent(event, 'mouseup');

    // Simulate the mousemove event
simulateMouseEvent(event, 'mousemove');

    // Simulate the mousedown event
simulateMouseEvent(event, 'mousedown');
  };

            mouseProto._touchMove = function (event) {

    // Ignore event if not handled
    if (!touchHandled) {
  return;
    }

// Interaction was not a click
this._touchMoved = true;

// Simulate the mousemove event
simulateMouseEvent(event, 'mousemove');
  };

   /**
   * Handle the jQuery UI widget's touchend events
   * @param {Object} event The document's touchend event
   */
  mouseProto._touchEnd = function (event) {

// Ignore event if not handled
if (!touchHandled) {
  return;
}

// Simulate the mouseup event
simulateMouseEvent(event, 'mouseup');

// Simulate the mouseout event
simulateMouseEvent(event, 'mouseout');

// If the touch interaction did not move, it should trigger a click
if (!this._touchMoved) {

  // Simulate the click event
  simulateMouseEvent(event, 'click');
}

// Unset the flag to allow other widgets to inherit the touch event
touchHandled = false;
  };

  /**
   * A duck punch of the $.ui.mouse _mouseInit method to support touch events.
   * This method extends the widget with bound touch event handlers that
   * translate touch events to mouse events and pass them to the widget's
   * original mouse event handling methods.
   */
  mouseProto._mouseInit = function () {

var self = this;

// Delegate the touch handlers to the widget's element
self.element
  .bind('touchstart', $.proxy(self, '_touchStart'))
  .bind('touchmove', $.proxy(self, '_touchMove'))
  .bind('touchend', $.proxy(self, '_touchEnd'));

// Call the original $.ui.mouse init method
_mouseInit.call(self);
  };

})(jQuery); 
```

如果需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:59:46.330

有点晚的答案，但我在我正在从事的当前项目中遇到了同样的问题。

注释掉：

```
event.preventDefault(); 
```

在之后添加：

```
document.ontouchmove = function(e) {
    var target = e.currentTarget;
    while(target) {
        if(checkIfElementShouldScroll(target))
            return;
        target = target.parentNode;
    }

    e.preventDefault();
}; 
```

多拉多拉给你们付账。

取自该线程的代码：[document.ontouchmove and scrolling on iOS 5](https://stackoverflow.com/questions/7798201/document-ontouchmove-and-scrolling-on-ios-5)

# python - 为什么我在 Flask 中收到 404 错误？

> ID：11024374
> 
> 赞同：3
> 
> 时间：2012-06-13T22:41:28.303
> 
> 标签：python, http-status-code-404, flask

我是一名学习 Flask 的 Django 开发人员。我对 Flask 中的工作方式很陌生。我在访问时收到带有以下代码的 404 `localhost:5000`。有人可以解释为什么我得到这个：

*在服务器上找不到请求的 URL。如果您手动输入了 URL，请检查您的拼写并重试。*

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy

from datetime import datetime

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////media/workdrive/workspace/purkinje/temp.db'
app.debug = True
db = SQLAlchemy(app)

if __name__ == '__main__':
    app.run()

class Post(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(80))
    body = db.Column(db.Text)
    pub_date = db.Column(db.DateTime)

    category_id = db.Column(db.Integer, db.ForeignKey('category.id'))
    category = db.relationship('Category', backref=db.backref('posts', lazy='dynamic'))

    def __init__(self, title, body, category, pub_date=None):
        self.title = title
        self.body = body
        if pub_date is None:
            pub_date = datetime.utcnow()
        self.pub_date = pub_date
        self.category = category

    def __repr__(self):
        return '<Post %r>' % self.title

class Category(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50))

    def __init__(self, name):
        self.name = name

    def __repr__(self):
        return '<Category %r> % self.name'

@app.route('/')
def index():
    posts = Post().query.all()
    return render_template('templates/index.html', posts=posts) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T22:43:43.367

您`app.run()`在注册处理程序之前调用。您应该将整个`if __name__ == '__main__'`块移动到脚本的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-02T20:18:05.707

对我来说，问题是我`send_from_directory`在视图函数中执行了错误的文件路径

# ios - 另一个 UIScrollView 不滚动

> ID：11024377
> 
> 赞同：0
> 
> 时间：2012-06-13T22:41:38.657
> 
> 标签：ios

首先：我知道这样一个事实，这个问题在这里被问了好几次，但到目前为止没有一个答案对我有用。

所以这就是我有一个带有多个标签的滚动视图的交易，在我的视图中显示其他内容。看图片。我已经将它连接到我的代码并相信，我也在我的实现中正确地初始化了它。我究竟做错了什么？iOS6顺便说一句。

因为我还不能发布图片，所以我在这里上传了它：http: [//oliverengelhardt.de/uploads/scrollViewOne.png](http://oliverengelhardt.de/uploads/scrollViewOne.png)

和实现代码：

```
@synthesize scrollView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [scrollView setScrollEnabled:TRUE];
    [scrollView setContentSize:CGSizeMake(320, 713)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:02:19.603

您似乎已经使代码中滚动视图的内容大小与其在 IB 中的框架大小相同。只有当内容大于框架时它才会滚动。

# javascript - gDBView 未定义和 xul

> ID：11024382
> 
> 赞同：1
> 
> 时间：2012-06-13T22:41:56.957
> 
> 标签：javascript, xul, thunderbird, thunderbird-addon

我正在尝试使用 XUL 编写 Thunderbird 扩展，这是一个自定义按钮，可以访问当前显示的电子邮件正文并对其进行处理。

显然，这可以使用全局变量`gDBView`，如[显示邮件用户代理扩展](https://addons.mozilla.org/addon/display-mail-user-agent/)：

```
var msgURI = null ;

if ( gDBView )
{
  msgURI = gDBView.URIForFirstSelectedMessage ;
}

if ( msgURI == null )
{
  return ;
}

var messenger = Components.classes["@mozilla.org/messenger;1"].createInstance (Components.interfaces.nsIMessenger ) ;
var msgService = messenger.messageServiceFromURI ( msgURI ) ; 
```

不幸的是，如果在我的扩展中我复制了该行：

```
msgURI = gDBView.URIForFirstSelectedMessage ; 
```

我从 Thunderbird 控制台收到以下错误：

> gDBView 未定义

发生这种情况有什么原因吗？这是访问邮件正文的最佳（和正确）方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:40:24.917

正如弗拉基米尔正确猜测的那样，您可能在错误的上下文中运行脚本。检查是否`gDBView`存在的一种简单方法是，在菜单中点击`Tools > Error Console`，然后粘贴`top.opener.gDBView`，然后点击`Enter`。这返回（对我来说）`[xpconnect wrapped (nsISupports, nsIMsgDBView, nsITreeView)]`这意味着该对象确实存在。

# c# - 如何快速批量保存位图？

> ID：11024383
> 
> 赞同：1
> 
> 时间：2012-06-13T22:42:09.153
> 
> 标签：c#, .net, bitmap, system.drawing

所以我有一个相当大的源位图，所以我将它缩小了 %25 的比例，以加快图像处理的速度。最后，我有一组矩形（大约 2000 个），它们对应于缩放图像的各个部分。我正在尝试重新缩放矩形以匹配源上的相同区域，然后将该区域保存为裁剪图像。

这是我保存缩放图像的裁剪图像的初始代码：

```
for (int i = 0; i < cells.Count; i++)
{
    for (int j = 0; j < cells[i].Count; j++)
    {
        Cell cell = cells[i][j];

        if (cell.width < 0 || cell.height < 0)
        {
            return;
        }

        Bitmap bitmap = new Bitmap(cell.width, cell.height);

        using (Graphics c = Graphics.FromImage(bitmap))
        {
            c.DrawImage(inputBitmap, new Rectangle(0, 0, cell.width, cell.height), new Rectangle(cell.x1, cell.y1, cell.width, cell.height), GraphicsUnit.Pixel);
        }

        bitmap.Save(cellDirectory + "\\cell" + i.ToString("D2") + j.ToString("D2") + ".png", ImageFormat.Png);
    }
} 
```

这是我的代码更改以保存原始位图的裁剪图像：

```
for (int i = 0; i < cells.Count; i++)
{
    for (int j = 0; j < cells[i].Count; j++)
    {
        Cell cell = cells[i][j];

        if (cell.width < 0 || cell.height < 0)
        {
            return;
        }

        int x = cell.x1 * 4;
        int y = cell.y1 * 4;
        int width = cell.width * 4;
        int height = cell.height * 4;

        Bitmap bitmap = new Bitmap(width, height);

        using (Graphics c = Graphics.FromImage(bitmap))
        {
            c.DrawImage(input, new Rectangle(0, 0, width, height), new Rectangle(x, y, width, height), GraphicsUnit.Pixel);
        }

        bitmap.Save(cellDirectory + "\\cell" + i.ToString("D2") + j.ToString("D2") + ".png", ImageFormat.Png);
    }
} 
```

带有第一个代码的程序平均在大约 20 秒内完成，但由于某种原因，第二个版本需要超过 6 分钟。我的大脑数学可能对我撒谎，但这似乎是不成比例的时间增加。

到目前为止，我所做的调试向我揭示了这一行：

```
c.DrawImage(input, new Rectangle(0, 0, width, height), new Rectangle(x, y, width, height), GraphicsUnit.Pixel); 
```

随着时间的推移需要更长的时间才能完成。我怀疑某种内存泄漏可能会导致这种情况，但我已经尝试在我能做的每个对象上手动调用 Dispose，但没有任何帮助。是否有某种我应该知道的幕后事情导致了这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:25:03.820

您的原始方法以原始分辨率保存文件，而新方法将宽度和高度都增加了 4 倍，即图像大小增加了 16 倍。时间差（6 分钟对 20 秒）大致成比例：

```
(6 * 60) / 20 = 18 times slower
4 * 4         = 16 times the image size 
```

# oauth - SalesForce OAuth 响应中没有 refresh_token

> ID：11024384
> 
> 赞同：8
> 
> 时间：2012-06-13T22:42:19.543
> 
> 标签：oauth, salesforce, apex-code, force.com

我正在与显然需要 OAuth 身份验证的自定义 APEX 服务进行交互。我可以轻松地验证和授权我的应用程序。一切正常。

但是，我收到的访问令牌往往会过期。

当然，我可以通过发送一个 refresh_token 来刷新它。听起来很棒。

问题是我在 SalesForce 的回复中没有收到 refresh_token。

我确实向 [instance].salesforce.com/services/oauth2/token 发送请求，我也尝试使用 login.salesforce.com/services/oauth2/token，但在响应中找不到“refresh_token”。除了它之外什么都有！..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-10-26T13:10:35.763

请检查**Selected OAuth Scopes**部分，需要启用该部分**随时代表您执行请求**以获取刷新令牌。

`Сreate`>> （*启用 OAuth 设置*）`Apps`> 。`API`*`Selected OAuth Scopes`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T00:29:07.263

感谢我的好同事，我已经解决了这个问题。

在检索身份验证代码时，我应该将“refresh_token”添加到范围内。*

# c# - C# 抽象类运算符重载

> ID：11024390
> 
> 赞同：10
> 
> 时间：2012-06-13T22:43:04.603
> 
> 标签：c#, inheritance, operator-overloading, abstract-class

我有一个抽象类 Vector，我想重载运算符 +、-、* 等。
我希望任何派生类都能够使用这些，并返回一个与调用对象具有相同类型的对象。
我尝试过使用泛型（如下所示），但我找不到合法的方法来做到这一点：

```
public static T operator +<T>( T V1, T V2) where T : Vector
{
     //some calculation
     return new T(args);
} 
```

然后我尝试只使用基类来做到这一点：

```
 public static Vector operator+(Vector V1, Vector V2)
    {
        if (V1.Dimension != V2.Dimension)
            throw new VectorTypeException("Vector Dimensions Must Be Equal");
        double[] ArgList = new double[V1.Dimension];
        for (int i = 0; i < V1.Dimension; i++) { ArgList[i] = V1[i] + V2[i]; }

        return (Vector)Activator.CreateInstance(V1.GetType(), new object[] { ArgList});
    } 
```

如果在两个子对象中传递此方法，它应该对它们执行操作，并返回相同继承的新对象。

我遇到的问题是我无法强制所有此类子类必须具有具有适当签名的构造函数，并且我无法调用基本构造函数来创建对象。

有什么方法可以（a）使这些工作中的任何一个工作，或（b）以另一种方式优雅地做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T22:53:51.253

您可以声明您的子类可以覆盖的实例级抽象方法：

```
public abstract class Vector
{
    protected abstract Vector Add(Vector otherVector);

    public static Vector operator +(Vector v1, Vector v2)
    {
        return v1.Add(v2);
    }
}

public class SubVector : Vector
{
    protected override Vector Add(Vector otherVector)
    {
        //do some SubVector addition
    }
} 
```

可能会遇到一些问题，尤其是多个子类（`SubVector`必须知道如何添加 with `SomeOtherSubVectorClass`？如果添加`ThirdVectorType`类怎么办？）并且可能处理空情况。此外，确保其`SubVector.Add`行为与`SomeOtherSubVectorClass.Add`交换操作相同。

编辑：根据您的其他评论，您可以这样：

```
public class Vector2D : Vector
{
    public double X { get; set; }
    public double Y { get; set; }

    protected override Vector Add(Vector otherVector)
    {
        Vector2D otherVector2D = otherVector as Vector2D;
        if (otherVector2D != null)
            return new Vector2D() { X = this.X + otherVector2D.X, Y = this.Y + otherVector2D.Y };

        Vector3D otherVector3D = otherVector as Vector3D;
        if (otherVector3D != null)
            return new Vector3D() { X = this.X + otherVector3D.X, Y = this.Y + otherVector3D.Y, Z = otherVector3D.Z };

        //handle other cases
    }
}

public class Vector3D : Vector
{
    public double X { get; set; }
    public double Y { get; set; }
    public double Z { get; set; }

    protected override Vector Add(Vector otherVector)
    {
        Vector2D otherVector2D = otherVector as Vector2D;
        if (otherVector2D != null)
            return new Vector3D() { X = this.X + otherVector2D.X, Y = this.Y + otherVector2D.Y, Z = this.Z };

        Vector3D otherVector3D = otherVector as Vector3D;
        if (otherVector3D != null)
            return new Vector3D() { X = this.X + otherVector3D.X, Y = this.Y + otherVector3D.Y, Z = this.Z + otherVector3D.Z };

        //handle other cases
    }
} 
```

编辑x2：

鉴于您的最新评论，也许您应该只维护一个内部数组/矩阵并进行通用矩阵数学运算。您的子类可以针对数组索引公开 X/Y/Z 属性包装器：

```
public class Vector
{
    protected double[] Values;
    public int Length { get { return Values.Length; } }

    public static Vector operator +(Vector v1, Vector v2)
    {
        if (v1.Length != v2.Length)
        {
            throw new VectorTypeException("Vector Dimensions Must Be Equal");
        }
        else
        {
            //perform generic matrix addition/operation
            double[] newValues = new double[v1.Length];
            for (int i = 0; i < v1.Length; i++)
            {
                newValues[i] = v1.Values[i] + v2.Values[i];
            }

            //or use some factory/service to give you a Vector2D, Vector3D, or VectorND
            return new Vector() { Values = newValues };
        }
    }
}

public class Vector2D : Vector
{
    public double X
    {
        get { return Values[0]; }
        set { Values[0] = value; }
    }
    public double Y
    {
        get { return Values[1]; }
        set { Values[1] = value; }
    }
}

public class Vector3D : Vector
{
    public double X
    {
        get { return Values[0]; }
        set { Values[0] = value; }
    }
    public double Y
    {
        get { return Values[1]; }
        set { Values[1] = value; }
    }
    public double Z
    {
        get { return Values[2]; }
        set { Values[2] = value; }
    }
} 
```

EDITx3：根据您的最新评论，我想您可以在每个子类上实现运算符重载，在静态方法中执行共享逻辑（例如在基本 Vector 类中），并在某处进行开关/案例检查以提供特定的子类：

```
 private static Vector Add(Vector v1, Vector v2)
    {
        if (v1.Length != v2.Length)
        {
            throw new VectorTypeException("Vector Dimensions Must Be Equal");
        }
        else
        {
            //perform generic matrix addition/operation
            double[] newValues = new double[v1.Length];
            for (int i = 0; i < v1.Length; i++)
            {
                newValues[i] = v1.Values[i] + v2.Values[i];
            }

            //or use some factory/service to give you a Vector2D, Vector3D, or VectorND
            switch (newValues.Length)
            {
                case 1 :
                    return new Vector1D() { Values = newValues };
                case 2 :
                    return new Vector2D() { Values = newValues };
                case 3 :
                    return new Vector3D() { Values = newValues };
                case 4 :
                    return new Vector4D() { Values = newValues };
                //... and so on
                default :
                    throw new DimensionOutOfRangeException("Do not support vectors greater than 10 dimensions");
                    //or you could just return the generic Vector which doesn't expose X,Y,Z values?
            }
        }
    } 
```

那么您的子类将具有：

```
 public class Vector2D
    {
        public static Vector2D operator +(Vector2D v1, Vector2D v2)
        {
            return (Vector2D)Add(v1, v2);
        }
    }

    public class Vector3D
    {
        public static Vector3D operator +(Vector3D v1, Vector3D v2)
        {
            return (Vector3D)Add(v1, v2);
        }
    } 
```

有一些重复，但我想不出办法让编译器这样做：

```
 Vector3 v1 = new Vector3(2, 2, 2);
    Vector3 v2 = new Vector3(1, 1, 1);
    var v3 = v1 + v2; //Vector3(3, 3, 3);
    Console.WriteLine(v3.X + ", " + v3.Y + ", " + v3.Z); 
```

或其他尺寸：

```
 Vector2 v1 = new Vector2(2, 2);
    Vector2 v2 = new Vector2(1, 1);
    var v3 = v1 + v2; //Vector2(3, 3, 3);
    Console.WriteLine(v3.X + ", " + v3.Y); // no "Z" property to output! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:54:04.233

如果有一个名为 Add() 的抽象方法，operator+ 只是作为一个包装器呢？即，“返回 v1.Add(v2)”。这也将使您能够定义非 Vector 类可以约束其代码的接口，从而能够执行类似数学的操作（因为通用代码无法看到/触摸任何类型的 +、- 等运算符）。

您可以在泛型方法中使用的唯一构造函数是默认（即无参数）构造函数，您必须在方法/类型的泛型约束中指定它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-29T18:56:34.750

五年后，我遇到了完全相同的问题，只是我称它们为 Ntuples，而不是向量。这是我所做的：

```
using System;
using System.Collections.Generic;

  public class Ntuple{
    /*parent class
    has an array of coordinates
    coordinate-wise addition method
    greater or less than in dictionary order
    */
    public List<double> Coords = new List<double>();
    public int Dimension;

    public Ntuple(List<double> Input){
      Coords=Input;
      Dimension=Input.Count;
    }//instance constructor

    public Ntuple(){
    }//empty constructor, because something with the + overload?

   public static Ntuple operator +(Ntuple t1, Ntuple t2)
   {
     //if dimensions don't match, throw error
     List<double> temp = new List<double>();
     for (int i=0; i<t1.Dimension; i++){
       temp.Add(t1.Coords[i]+t2.Coords[i]);
     }
     Ntuple sum = new Ntuple(temp);
     return sum;
   }//operator overload +

   public static bool operator >(Ntuple one, Ntuple other){
     //dictionary order
     for (int i=0; i<one.Dimension; i++){
       if (one.Coords[i]>other.Coords[i]) {return true;}
     }
     return false;
   }
   public static bool operator <(Ntuple one, Ntuple other){
     //dictionary order
     for (int i=0; i<one.Dimension; i++){
       if (one.Coords[i]<other.Coords[i]) {return true;}
     }
     return false;
   }

  }//ntuple parent class

  public class OrderedPair: Ntuple{
    /*
    has additional method PolarCoords, &c
    */
    public OrderedPair(List<double> Coords) : base(Coords){}
    //instance constructor
    public OrderedPair(Ntuple toCopy){
      this.Coords=toCopy.Coords;
      this.Dimension=toCopy.Dimension;
    }

  }//orderedpair

  public class TestProgram{
    public static void Main(){
      List<double> oneCoords=new List<double>(){1,2};
      List<double> otherCoords= new List<double>(){2,3};

      OrderedPair one = new OrderedPair(oneCoords);
      OrderedPair another = new OrderedPair(otherCoords);
      OrderedPair sum1 = new OrderedPair(one + another);

      Console.WriteLine(one.Coords[0].ToString()+one.Coords[1].ToString());
      Console.WriteLine(sum1.Coords[0].ToString()+sum1.Coords[1].ToString());

      bool test = one > another;
      Console.WriteLine(test);
      bool test2 = one < another;
      Console.WriteLine(test2);
    }
  }

}//namespace ntuples 
```

# firefox-addon - 检测 fennec - firefox 移动扩展中的不活动状态

> ID：11024394
> 
> 赞同：0
> 
> 时间：2012-06-13T22:43:19.157
> 
> 标签：firefox-addon, fennec

我正在为 firefox mobile (fennec) 构建一个插件。是否可以检测浏览器是否在后台运行或屏幕是否被锁定，以便我可以暂停在我的扩展程序中运行的某些任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:16:36.050

You can also listen for the "application-foreground" and "application-background" notifications. Firefox does this itself here:

[http://mxr.mozilla.org/mozilla-central/source/mobile/android/chrome/content/browser.js#5445](http://mxr.mozilla.org/mozilla-central/source/mobile/android/chrome/content/browser.js#5445)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:45:28.867

我不认为你可以 - Fennec 本身似乎并不关心屏幕是打开还是关闭，至少我找不到任何代码检查它。通常我会推荐[js-ctypes](https://developer.mozilla.org/en/js-ctypes)直接调用必要的操作系统功能，但它在 Android 上的使用非常有限。所以我想你能做的最好的事情是使用[nsIIdleService](https://developer.mozilla.org/en/nsIIdleService)来检测用户何时处于非活动状态。

# php - 邮件功能中的 HTML 未格式化

> ID：11024395
> 
> 赞同：0
> 
> 时间：2012-06-13T22:43:21.477
> 
> 标签：php, html

我正在使用以下代码：

```
$message = "Hi ".$user.
  ",\r\rThe following names are on the guestlist for <b>".$night.
  "</b> on ".$date2.":\r\r". $user ."<br>". implode(", ", $names).
  "\r\rThank you for using Guestvibe.";

mail($email, "Your Guestvibe list", $message); 
```

PHP 中的回车符工作正常，但`<b>`or`<br>`标记都没有出现。只是我的邮件客户端（Apple Mail）在播放，还是有解决办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T22:44:58.423

您将电子邮件作为文本而不是 HTML 发送，我相信您需要设置这些标题：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=UTF-8' . "\r\n"; 
```

如[文档中的示例 #4 所示](http://php.net/manual/en/function.mail.php)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T22:45:37.763

PHP 的`mail`函数默认发送明文邮件。

有关发送 HTML 邮件的正确方法，请参阅[邮件手册页](http://php.net/manual/en/function.mail.php)中的 nr.4 示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T22:46:42.437

您需要添加标题：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

mail($email, "Your Guestvibe list", $message, $headers); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T22:46:35.673

您应该首先将整个消息包装成：

```
<html><head></head><body> msg </body></html> 
```

加上来自 m.edmondson 帖子的标题。

# android - ViewTreeObserver 添加 OnScrollChangedListener 后不调用 onScrollChanged

> ID：11024407
> 
> 赞同：4
> 
> 时间：2012-06-13T22:44:13.950
> 
> 标签：android, scroll, android-view

我有一个带有 webview 和一个按钮的布局。该按钮是可见的，但一旦滚动 web 视图就会变得可见。我正在使用 ViewTreeObserver，但由于某种原因，未调用 onScrollChanged。我是否误解了 onScrollChanged 的​​调用方式？

```
this.licenseAgreementView = (WebView) findViewById(R.id.licenseAgreementView);
ViewTreeObserver observer = this.licenseAgreementView.getViewTreeObserver();
observer.addOnScrollChangedListener(new OnScrollChangedListener() {
    public void onScrollChanged() {
    makeButtonVisible();
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-01T13:55:56.913

在我的情况下，我必须将 GlobalLayoutListener 附加到我的 scrollView，然后在 LayoutChanged 上我必须添加 scrollListener。

```
scrollView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            ViewTreeObserver observer = scrollView.getViewTreeObserver();
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
                observer.removeOnGlobalLayoutListener(this);
            } else {
                observer.removeGlobalOnLayoutListener(this);
            }
            observer.addOnScrollChangedListener(new ViewTreeObserver.OnScrollChangedListener() {
                @Override
                public void onScrollChanged() {
                    //Your code here
                }
            });
        }
    }); 
```

这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T16:31:32.067

```
 final View scrollView = findViewById(R.id.scrollView);

    final ViewTreeObserver.OnScrollChangedListener onScrollChangedListener =
            new ViewTreeObserver.OnScrollChangedListener() {

        @Override
        public void onScrollChanged() {

            //your code here -->
            makeButtonVisible();

        }

    };

    scrollView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            ViewTreeObserver observer = scrollView.getViewTreeObserver();
            observer.addOnScrollChangedListener(onScrollChangedListener);
            return false;

        }

    }); 
```

试试这个，对我有用。

# c++ - C++ 函数返回值未赋值

> ID：11024416
> 
> 赞同：1
> 
> 时间：2012-06-13T22:45:23.167
> 
> 标签：c++, function, return, assign

我遇到了一个奇怪的错误

我正在返回一个指针，在返回之前，我验证了指针是有效的并且有内存但是，在函数范围之后，当我尝试使用 main() 中的返回值时，它变成了 NULL。我还尝试返回指针的取消引用值，它是返回前修改过的结构，main() 中未修改的结构..

这应该像字典

```
#include <iostream>
#include <fstream>
#include <string>
#include "trie.h"

using namespace std;

int alphaLoc(char segment){
    return (int)segment - 97;
}

//inserts a word in the tree
void insert(TrieNode &node, const std::string &word){
    int locationInAlphabet = alphaLoc(word[0]);
    if (node.letters[locationInAlphabet] == NULL){
        node.letters[locationInAlphabet] = new TrieNode;
    }
    if (word.length() == 1){
        if (node.letters[locationInAlphabet]->isWord == true){
            cout<<"Word Already Exsit"<<endl;
        }
        node.letters[locationInAlphabet]->isWord = true;
    }
    else{
        insert(*(node.letters[locationInAlphabet]), word.substr(1,word.length()-1));
    }
}

//returns the node that represents the end of the word
TrieNode* getNode(const TrieNode &node, const std::string &word){
    int locationInAlphabet = alphaLoc(word[0]);
    if (node.letters[locationInAlphabet] == NULL){
        return NULL;
    }
    else{
        if (word.length() == 1){
            return (node.letters[locationInAlphabet]);
        }
        else{
            getNode(*(node.letters[locationInAlphabet]), word.substr(1,word.length()-1));
        } 
    }
}

int main(){
    TrieNode testTrie;
    insert(testTrie, "abc");
    cout<< testTrie.letters[0]->letters[1]->letters[2]->isWord<<endl;
    cout<<"testing output"<<endl; 
    cout<< getNode(testTrie, "abc")->isWord << endl;
    return 1;
} 
```

输出是：

```
1
testing output
Segmentation fault: 11 
```

尝试.h：

```
#include <string>

struct TrieNode {
    enum { Apostrophe = 26, NumChars = 27 };
    bool isWord;
    TrieNode *letters[NumChars];
    TrieNode() {
        isWord = false;
         for ( int i = 0; i < NumChars; i += 1 ) {
             letters[i] = NULL;
         } // for
    }
}; // TrieNode

void insert( TrieNode &node, const std::string &word );

void remove( TrieNode &node, const std::string &word );

std::string find( const TrieNode &node, const std::string &word ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:58:23.700

你以前`return`失踪过`getNode(*(node...`。

如果此行在某个时刻执行，则在此执行控制流到达`getNode`函数末尾之后，此处没有`return`语句。它将导致未定义的返回值，这总是不好的。你必须总是从你的函数中返回一些明确的东西。

# php - 如何通过 DIV 指定 SQL 值？

> ID：11024418
> 
> 赞同：1
> 
> 时间：2012-06-13T22:45:32.910
> 
> 标签：php, sql

我仍在艰难而无尽的追求中奋战；创建一个**足球投注系统**。这不仅是为了*实际*创造一些东西，也是为了提高我的技能。

在这个项目中，我使用（如果有的话）：

*   **WordPress**
*   **Navicat**
*   **SQL**
*   **PHP**

我有一个名为“Bets”的数据库表。它包含以下列；

*   **ID**（只是为每个匹配分配一个不断增长的数字）
*   **gameid**（当前比赛的 id）
*   **userid**（用户 id）
*   **homebet**（用户 homebet）
*   **awaybet**（用户 awaybet）

我创建了一个基于 PHP 的表单，用户可以在其中输入两个数字 - **homebet**和**awaybet** - 对应于比赛中的进球数。通过那里，每次用户按下提交按钮时都会调用一个**insert.php文件，它会获取用户 ID（****用户 ID**），当然还会为新创建的赌注分配一个连续的数字。

我的问题是；我不知道我应该如何分配网站上发布的每个新匹配 - 这是通过**SQL Select**语句调用信息来完成的- 带有**gameid**。

**PHP 表单**

```
<form action="/scripts/insert.php" method="post" name="gameid"> <!-- Not sure if name="gameid" serves a purpose or just a test - I'm sorry. -->
        <div id="betting-structure">
            <div class="main-betting-bg">
                <div class="right-betting-team">
                    <h8 class="centering-teamname1">Arsenal</h8><img src="/images/pl-logo-arsnl.png"> <!-- Homebet -->
                </div>

                <div class="center-betting-input" align="center">
                    <input type="text" name="homebet" class="bets" /><span class="versus">VS</span><input type="text" name="awaybet" class="bets" />
                </div>

                <div class="left-betting-team">
                    <img src="/images/pl-logo-arsnl.png"> <h8 class="centering-teamname2">Arsenal</h8> <!-- Awaybet -->
                </div>      
            </div>

            <div class="extra-betting-bg"> <!-- Just design -->

            </div>
        </div>

        <div id="submit-button-area" align="center">
            <input type="submit" value="" class="submit-button"> <!-- Submit-button -->
        </div>
</form> 
```

**最后一个问题**

我如何将一个游戏 ID 分配**给**a`div`或 a `<form>`（或最适合情况的），以便将它注册到数据库表“Bets”中？

*我不知道，如果需要的话，您需要找出哪个代码片段。*

**编辑1：**

**INSERT.PHP 文件**

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'].'/wp-load.php');

global $wpdb, $current_user;
get_currentuserinfo();

$sql= $wpdb->prepare("INSERT INTO `bets` (`userid`, `gameid`, `homebet`, `awaybet`) VALUES (%d, %d, %d, %d)", $current_user->ID, $_POST['gameid'], $_POST['homebet'], $_POST['awaybet']);

$wpdb->query($sql)
?> 
```

**编辑 2** - 修改后的`Insert.php`文件！

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'].'/wp-load.php');

global $wpdb, $current_user;
get_currentuserinfo();

//make sure the bets exist in $_POST
if ((isset($_POST['bets'])) && is_array($_POST['bets'])){
    //loop through the bets getting the gameid and bet information
    foreach($_POST['bets'] as $gameid=>$bet){
        //prepare sql
        $sql= $wpdb->prepare("INSERT INTO `bets` (`userid`, `gameid`, `homebet`, `awaybet`) VALUES (%d, %d, %d, %d)", $current_user->ID, $gameid, $bet['homebet'], $bet['awaybet']);
        //run sql
        $wpdb->query($sql)
    } // This is line 15!
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:48:38.330

您可以使用隐藏`<input>`元素：

```
<input type="hidden" name="gameid" value="5280" /> 
```

编辑：这样它就会出现在你`$_POST`或你正在使用的任何东西中，就像`homebet`and一样`awaybet`。

EDIT2：澄清评论中提出的问题：

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'].'/wp-load.php');

global $wpdb, $current_user;
get_currentuserinfo();

for($n=1;$n<=8;$n++) {
    $sql= $wpdb->prepare("INSERT INTO `bets` (`userid`, `gameid`, `homebet`, `awaybet`) VALUES (%d, %d, %d, %d)", $current_user->ID, $_POST["gameid$n"], $_POST["homebet$n"], $_POST["awaybet$n"]);
    $wpdb->query($sql)
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:51:14.717

您可以将 应用`gameid`到 URL 所以它会是这样的：

[http://yourdomain.com/betpage/?gameid=123](http://yourdomain.com/betpage/?gameid=123)

然后，您将`gameid`使用该`$_GET`方法获取。

```
$gameid = $_GET['gameid']; 
```

但请记住清理变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T00:00:10.793

根据 zebediah49 回答的评论，如果您要让某人在同一页面上填写多场比赛的主场/客场投注，我建议您然后使用数组命名您的表单元素。像这样的东西：

```
<form action="/scripts/insert.php" method="post" name="gameid"> <!-- Not sure if name="gameid" serves a purpose or just a test - I'm sorry. -->
        <div id="betting-structure">
            <!--Team1 vs Team2-->
            <div class="main-betting-bg">
                <div class="right-betting-team">
                    <h8 class="centering-teamname1">Team1</h8><img src="/images/pl-logo-arsnl.png"> <!-- Homebet -->
                </div>

                <div class="center-betting-input" align="center">
                    <input type="text" name="bets[$gameid][homebet]" class="bets" /><span class="versus">VS</span><input type="text" name="bets[$gameid][awaybet]" class="bets" />
                </div>

                <div class="left-betting-team">
                    <img src="/images/pl-logo-arsnl.png"> <h8 class="centering-teamname2">Team2</h8> <!-- Awaybet -->
                </div>      
            </div>

            <div class="extra-betting-bg"> <!-- Just design -->

            </div>

            <!--Team3 vs Team4-->
            <div class="main-betting-bg">
                <div class="right-betting-team">
                    <h8 class="centering-teamname1">Team3</h8><img src="/images/pl-logo-arsnl.png"> <!-- Homebet -->
                </div>

                <div class="center-betting-input" align="center">
                    <input type="text" name="bets[$gameid][homebet]" class="bets" /><span class="versus">VS</span><input type="text" name="bets[$gameid][awaybet]" class="bets" />
                </div>

                <div class="left-betting-team">
                    <img src="/images/pl-logo-arsnl.png"> <h8 class="centering-teamname2">Team4</h8> <!-- Awaybet -->
                </div>      
            </div>

            <div class="extra-betting-bg"> <!-- Just design -->

            </div>

            <!--Team5 vs Team6-->
            <div class="main-betting-bg">
                <div class="right-betting-team">
                    <h8 class="centering-teamname1">Team5</h8><img src="/images/pl-logo-arsnl.png"> <!-- Homebet -->
                </div>

                <div class="center-betting-input" align="center">
                    <input type="text" name="bets[$gameid][homebet]" class="bets" /><span class="versus">VS</span><input type="text" name="bets[$gameid][awaybet]" class="bets" />
                </div>

                <div class="left-betting-team">
                    <img src="/images/pl-logo-arsnl.png"> <h8 class="centering-teamname2">Team6</h8> <!-- Awaybet -->
                </div>      
            </div>

            <div class="extra-betting-bg"> <!-- Just design -->

            </div>
        </div>

        <div id="submit-button-area" align="center">
            <input type="submit" value="" class="submit-button"> <!-- Submit-button -->
        </div>
</form> 
```

请注意，我将表单元素命名为`bets[$gameid][homebet]`和`bets[$gameid][awaybet]`。这需要由 php 回显 gameid（所以如果`$gameid=123`该字段是`bets[123][homebet]`and `bets[123][awaybet]`）。提交表单后，可以使用简单的 foreach 循环进行处理，如下所示：

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'].'/wp-load.php');

global $wpdb, $current_user;
get_currentuserinfo();

//make sure the bets exist in $_POST
if(isset($_POST['bets'] && is_array($_POST['bets'])){
    //loop through the bets getting the gameid and bet information
    foreach($_POST['bets'] as $gameid=>$bet){
        //prepare sql
        $sql= $wpdb->prepare("INSERT INTO `bets` (`userid`, `gameid`, `homebet`, `awaybet`) VALUES (%d, %d, %d, %d)", $current_user->ID, $gameid, $bet['homebet'], $bet['awaybet']);
        //run sql
        $wpdb->query($sql);
    }
}
?> 
```

请注意，您仍然需要对字段进行一些验证以确保数字并防止 sql 注入。

# android - 如何生成只能使用一次的随机好友代码？

> ID：11024422
> 
> 赞同：0
> 
> 时间：2012-06-13T22:46:10.790
> 
> 标签：android, google-play, in-app-billing

我正在创建一个 Android 应用程序，我想在其中设置“购买 1 - 将 1 发送给您的朋友”选项。

我一直在测试在商店中拥有我的 Android 应用程序的免费限制版本的想法，一旦用户购买了该应用程序，他们就会收到一个朋友代码，可以将其提供给密友以输入免费的限制版本，这 ublocks完整版。

我担心 1 个好友代码会被多次使用 - 我如何确保在我生成好友代码后它只能使用一次？

任何想法都会有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:49:04.347

为什么不创建保存到数据库表中某个位置的已使用代码列表并检查它是否已使用。我会建议检查已经生成的，但我猜你可能已经准备好代码，不会产生重复的随机朋友代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:51:40.950

继续 Krishna 的建议……当使用该代码时，它将被放入数据库中，然后每当尝试使用代码时，都会检查该数据库以查看该代码是否已列出并因此已使用。

# python - 使用 xmlrpclib 的 PyTest 插件因 IOError 失败：Mac OS X 上的“不支持的 XML-RPC 协议”

> ID：11024425
> 
> 赞同：3
> 
> 时间：2012-06-13T22:46:40.033
> 
> 标签：python, macos, xmlrpclib

使用加载 xmlrpclib 的插件运行 py.test 时，测试运行失败并显示：

> INTERNALERROR> Traceback（最近一次调用最后一次）：
> INTERNALERROR> 文件“/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/main.py”，第 70 行，在 wrap_session
> INTERNALERROR > config.pluginmanager.do_configure(config)
> INTERNALERROR> 文件“/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py”，第 267 行，在 do_configure
> INTERNALERROR> config.hook.pytest_configure(config=self._config)
> INTERNALERROR> 文件“/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py”，第 421 行，在**call**
> INTERNALERROR> return self._docall(methods, kwargs)
> INTERNALERROR> 文件“/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py”，第 432 行，在 _docall INTERNALERROR> res = mc.execute()
> INTERNALERROR>文件“/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py”，第 350 行，在执行
> INTERNALERROR> res = method(**kwargs)
> INTERNALERROR> File “/Library/Python/2.7/site-packages/pytest_marker_bugzilla-0.01-py2.7.egg/pytest_marker_bugzilla.py”，第 94 行，在 pytest_configure
> INTERNALERROR> bz = bugzilla.Bugzilla(url=url)
> INTERNALERROR> 文件“build/ bdist.macosx-10.7-intel/egg/bugzilla/ **init** .py"，第 75 行，在**init**
> INTERNALERROR> c = getBugzillaClassForURL(kwargs['url'])
> INTERNALERROR> 文件“build/bdist.macosx-10.7-intel/egg/bugzilla/ **init** .py”，第 26 行，在 getBugzillaClassForURL
> INTERNALERROR> s = xmlrpclib.ServerProxy(url)
> INTERNALERROR> 文件“build/bdist.macosx-10.7- intel/egg/xmlrpclib.py”，第 1215 行，在**init**
> INTERNALERROR> 引发 IOError，“不支持的 XML-RPC 协议”
> INTERNALERROR> > > IOError：不支持的 XML-RPC 协议

我已经验证 xmlrpclib 可以与一个简单的测试程序一起使用，这个程序从图片中删除了 py.test。

```
#!/usr/bin/env python

import xmlrpclib
import bugzilla
import sys
for i in sys.path:
    print i

url = 'https://bugzilla.redhat.com/xmlrpc.cgi'
u = ' '
p = ' '

try:
    proxy = xmlrpclib.ServerProxy(url)
except(), e:
    print e
b = bugzilla.Bugzilla(url=url)
b.login(u,p)
bug = b.getbugsimple('12345')
print bug 
```

上面的程序在执行时按预期返回。我不知道这里发生了什么。我什至在 py.test 和上面的测试程序中都添加了 print sys.path，发现除了执行目录之外，路径相同，test.py 为 /Users/esammons ，test.py 为 /usr/local/bin py.test。

为了进一步排除我将 /usr/local/bin/py.test 和 /usr/local/bin/py.test-2.7 复制到我的项目根目录的问题，发生了同样的错误。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:34:49.993

该问题是由我的 cfg 文件中的值的格式引起的。我正在使用 ConfigParser 来解析我的配置文件；cfg 文件具有以下格式。

```
[DEFAULT]
key = value
key2 = value
key3 = value 
```

该问题是由于我将值括在引号（'value'）中引起的。具体来说：

错误的

```
bugzilla_url = 'https://bugzilla.example.com/xmlrpc.cgi' 
```

对

```
bugzilla_url = https://bugzilla.example.com/xmlrpc.cgi 
```

# ruby-on-rails - 如何显示子记录列表？

> ID：11024427
> 
> 赞同：1
> 
> 时间：2012-06-13T22:46:43.677
> 
> 标签：ruby-on-rails, activerecord, parent-child, partial-views

我有一个帐户和场所表，其中一个帐户可以有许多场所。

我在帐户索引页面上将所有帐户显示为部分帐户，并希望每个帐户都包含与其链接的场所的名称。

这是我所拥有的：

**帐户部分**

```
<%= link_to free_account do %>      
    <div class="account_partial">          
      <span class="account_header"><%= free_account.name %></span> - <span class="free_account_highlight">(<%= free_account.role %>)</span><br>

      <%= render :partial => 'venues/account_venue', :collection => @account.venues %>
    </div>
<% end %> 
```

**account_venue 部分**

```
<%= venue.name %> 
```

我收到此错误：

> 帐户中的 NoMethodError#index
> 
> nil:NilClass 的未定义方法“场地”
> 
> 提取的源代码（第 12 行附近）：
> 
> 12: <%= 渲染 :partial => 'venues/account_venue', :collection => @account.venues %>

任何帮助将非常感激！

**编辑**

**account_controller**

```
 class AccountsController < ApplicationController   
    load_and_authorize_resource  

      def index
        @accounts = Account.all(:include => :venues)
      end      
    end 
```

**帐户 index.html.erb**

```
<div id="narrow_container">
  <div class="free_accounts_container">
    <h2 class="show_orange">Free accounts</h3>  
    <%= render :partial => 'free_account', :collection => @accounts %>
  </div>

  <div class="premium_accounts_container">
    <h2 class="show_orange">Premium accounts</h3>
    <%= render :partial => 'premium_account', :collection => @accounts %><br><br>
  </div>

  <div class="clearall"></div>

  <div class="button">
    <%= link_to 'add account', new_account_path %>
  </div>
</div> 
```

**_free_account.html.erb**

```
<%= link_to free_account do %>
  <% if free_account.role == "free" %>
    <div class="account_partial">

      <span class="account_header"><%= free_account.name %></span> - <span class="free_account_highlight">(<%= free_account.role %>)</span><br>

      <div class="owner_details">
        <span class="pre_account_highlight">Owners username:</span><span class="account_highlight"><%= free_account.user.username %></span>
        <span class="pre_account_highlight">Owners e-mail:</span><span class="account_highlight"><%= free_account.user.email %></span>
      </div>

      <div class="account_details">     
      </div>

      <%= render :partial => 'venues/account_venue', :collection => @account.venues %>
    </div>
  <% else %>         
  <% end %>
<% end %> 
```

**更新**

如果我将部分调用更改为：

```
<%= render :partial => 'venues/account_venue', :collection => @accounts %> 
```

和 account_venue 部分只是读取“测试”它加载没有错误但显示单词 test 4 次（有 4 个帐户记录）如果我添加一个新帐户记录它显示单词 test 5 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:03:39.410

您需要将 @account 设置为控制器中的某些内容，并且该模型实例应加入（或包含）Venues 模型。像这样：

```
@account = Account.find(params[:id], :include => :venues) 
```

**编辑：**我认为您已经使用 has_many 和 belongs_to 关系设置了您的 Account 和 Venue 模型？

**编辑二：**我现在看到您正在尝试访问 Accounts#index，在这种情况下，上面的代码应该更改为类似的内容（因为我们不是在查看一个特定的帐户）：

```
@accounts = Account.all(:include => :venues) 
```

**编辑三：**既然您已经发布了控制器和部分代码，有几件事很突出；当使用集合渲染部分时，部分内的结果对象从部分而不是集合派生其名称。从[Rails 指南](http://guides.rubyonrails.org/layouts_and_rendering.html)：

> “当使用复数集合调用部分时，部分的各个实例可以通过以部分命名的变量访问正在呈现的集合的成员。”

在你的部分`_account_venue.html.erb`你有`<%= venue.name %>`- 这需要更改为`<%= account_venue.name %>`.

其次，在`_free_account.html.erb`你调用`account_venue`部分的地方，你指的是一个名为的集合对象`@account`- 这是从哪里来的？由于`free_account`部分*也*通过集合调用，因此您应该使用的对象将被调用`free_account`- 实际上，当您这样做时，您在同一个部分中通过此名称引用它`<%= free_account.name %>`。所以渲染部分调用应该是这样的：

`<%= render :partial => 'venues/account_venue', :collection => free_account.venues %>`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:53:33.493

看起来你没有分配`@account`任何东西。应该`free_account`改为这个吗？

# jquery - 在单击时附加一个样式，然后在第二次单击时附加另一个样式

> ID：11024431
> 
> 赞同：0
> 
> 时间：2012-06-13T22:46:56.067
> 
> 标签：jquery

这是我的代码：

[http://jsfiddle.net/adige72/BbSd7/](http://jsfiddle.net/adige72/BbSd7/)

当我单击到时，假设“显示 div 1”，它会删除它的虚线边框，但是一旦再次单击，边框就不会返回，而我想要它会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:49:29.477

使用应该可以解决问题的 toggleClass。您正在执行可能不需要的 each()。只需钩住需要点击的元素。不需要遍历每个父 li 等。

请参阅此处的第一个示例：http: [//api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:55:34.053

我建议你使用类来管理它，因为它更干净：

```
$('#element').click(function() {
  if ($(this).hasClass('class1')) {
    $(this).addClass('class2');
  }
} 
```

风格相似。一个例子：

```
$('#element').click(function() {
  if ($(this).css('background-color')=='red') {
    $(this).css('color', 'white');
  }
} 
```

# ruby-on-rails - Ruby Rails LInkedIn Gem（获取已连接或未连接的个人资料信息）

> ID：11024435
> 
> 赞同：2
> 
> 时间：2012-06-13T22:47:22.273
> 
> 标签：ruby-on-rails, ruby, oauth, gem, linkedin

从 LinkedIn Ruby Gem 获得个人资料哈希后，但我正在寻找一种从用户那里获取更多信息的方法，比如技能、他们的人脉、他们的电子邮件、他们的个人资料图片等。我访问没有任何问题此信息来自当前经过身份验证的用户，仅从经过身份验证的用户的连接和公共配置文件中获取此类信息。

在我的 Rails 应用程序中，我有一个 users/show.haml.html 执行此操作：

```
def show
    #@users = User.all
    @profile = linkedin_client.profile(:id => params[:id])
    #how to get this user's connections etc?
  end 
```

对于当前经过身份验证的用户来说，获取位置、id 和连接相对容易，只需执行以下操作：

```
@positions = linkedin_client.profile(:fields => %w(positions)).positions.all 
  @id = linkedin_client.profile(:fields => 'id').id
  @connections = linkedin_client.connections.all 
```

有谁知道我如何通过连接获得类似的信息，甚至是非连接的公共配置文件？也许我应该使用另一个工具，比如linkedin-scraper？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:04:38.300

答案是使用 :fields 然后指定您希望返回的配置文件字段，如下所示：

@profile = linkedin_client.profile(:id => params[:id], :fields => %w(id first-name last-name location picture_url public_profile_url 标题行业))

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:50:48.907

我认为如果您需要更多信息，您可以随时使用`linkedin-scraper`gem [https://github.com/yatishmehta27/linkedin-scraper](https://github.com/yatishmehta27/linkedin-scraper)

# java - 在 Android 中使用 AccountManager 的好教程？

> ID：11024437
> 
> 赞同：27
> 
> 时间：2012-06-13T22:47:53.270
> 
> 标签：java, android, oauth, oauth-2.0, accountmanager

有谁知道在android中使用AccountManager的任何好的教程，基本上我想做的是请求一个OAuth2令牌与google api一起使用，任何建议都将不胜感激:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T22:55:50.747

[http://developer.android.com/training/id-auth/authenticate.html](http://developer.android.com/training/id-auth/authenticate.html)

没有比这更正式的了

# c++ - C++中的三法则

> ID：11024438
> 
> 赞同：3
> 
> 时间：2012-06-13T22:47:58.043
> 
> 标签：c++, rule-of-three

我读过三法则，三[法则是什么？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)总结如下：

> 如果您需要自己显式声明析构函数、复制构造函数或复制赋值运算符，您可能需要显式声明所有这三个。

我的问题是：在 C++ 应用程序中，我有一个管理资源的类（有一个处理删除指针的析构函数）。我知道应用程序到处都使用赋值运算符，但我绝对确定在应用程序中没有使用复制构造函数，即类型的使用，`Class c(..); Class d(c);`所以在这种情况下，我仍然需要同时实现赋值运算符和复制构造函数？还是仅一个赋值运算符就足够了？赋值运算符是否有可能以某种方式使用复制构造函数？

欣赏你的想法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T22:50:27.113

如果您知道不会使用复制构造函数，则可以通过将其设为私有且未实现来表达这一点，因此：

```
class C
{
private:
    C(const C&); // not implemented
}; 
```

（在 C++11 中，您可以使用新`= delete`语法）。也就是说，只有在您绝对确定永远不需要它的情况下，您才应该这样做。否则，您最好实施它。重要的是不要让它保持原样，因为在这种情况下，编译器将提供一个默认的成员复制构造函数，它会做错事——这是一个等待发生的问题。

在某种程度上，这取决于该类将用于什么 - 例如，如果您正在编写一个作为库一部分的类，那么出于一致性原因实现复制构造函数会更有意义。您事先不知道您的课程将如何使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T22:50:13.223

> 我绝对确定在复制构造函数的应用程序中没有使用，即使用类型 Class c(..); d(c) 类

你知道下面的代码

```
Foo c;
Foo b = c; 
```

调用复制构造函数而不是赋值运算符？为了安全起见，我会实现复制构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T22:52:11.610

在几乎所有情况下，编译器都会为您生成这些方法，而您无需执行任何操作。但是，如果隐式生成的复制构造函数/赋值运算符不能满足您的要求，并且在设计方面您的类能够被复制是有意义的，那么无论您是否同时使用它们，您*都应该*显式提供一个复制 ctor 和赋值运算符（作为良好做法）。

如果在设计方面，您的类是不可复制的，您可以声明但不定义复制 ctor/assignment 操作。

# opengl - 使用 VBO 在 OpenGL 中进行简单的 2D 剔除

> ID：11024441
> 
> 赞同：1
> 
> 时间：2012-06-13T22:48:29.817
> 
> 标签：opengl, vbo, orthographic, culling

出于性能原因，我正在考虑使用 VBO 而不是立即模式。我正在创建一个充满精灵的 2D 正交场景。我不想绘制屏幕外的精灵。我通过根据屏幕尺寸和相机位置检查它们的位置来做到这一点。

在即时模式下，这很简单；每个精灵都有绘制方法。使用 VBO 这似乎很重要；我一次渲染 VBO 的整个部分。我（我能想到的）没有办法选择不在屏幕外的渲染精灵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T23:18:30.040

我只是假设您确实确实为 CPU 上的精灵设置了动画，因为根据您的问题，这是唯一有意义的事情（否则，您最初将如何在立即模式下绘制它们，以及如何跳过绘制一些）。

从性能的角度来看，AGP/PCIe 的行为很像硬盘。带宽很大，但访问时间非常明显。换句话说，进行传输是很痛苦的，但是一旦你这样做了，再多几千字节并没有什么区别。上传 500 个精灵和上传 1000 个精灵是一回事。

由于您在 CPU 上为精灵设置动画，因此您已经**必须**每帧执行一次传输（`glBufferSubData`或`glMapBuffer/glUnmapBuffer`），没有其他方法。

请务必使用“新鲜”缓冲区，例如通过应用[`glBufferData(null)`idiom](http://www.opengl.org/wiki/Vertex_Specification_Best_Practices#Dynamic_VBO)。这通过允许 OpenGL 继续使用（从）缓冲区同时为您提供不同的缓冲区（您不知道）来避免管道停顿。稍后当它完成绘图时，它只是偷偷地翻转缓冲区并将旧缓冲区扔掉。这样，您可以获得良好的并行性（这是性能的关键，比剔除几千个顶点更重要）。

此外，显卡在剔除几何体方面相当出色（这包括在生成片段之前丢弃屏幕外的整个三角形）。数百？数千？十万？没有任何问题。让显卡来做。

除非您有一百万个 sprite，其中一半是可见的，而另一半不可见，否则*连续写入整个缓冲区且没有分支*的情况并非不可能，不仅速度一样快，而且由于缓存和管道效应。

# php - 使用mysqli时这种插入方法是否正确

> ID：11024451
> 
> 赞同：-1
> 
> 时间：2012-06-13T22:49:39.370
> 
> 标签：php, mysqli

我只想知道，在使用 mysqli 将数据插入数据库时​​，如果这是下面最好的方法，还是有更好的方法？

```
 $insert = array();

  for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i)
  {
    $insert[] = "'". mysqli_real_escape_string( $_SESSION['id'] ) . ($n == 1 ? '' : $i) . "','". mysqli_real_escape_string( $_SESSION['timeChosen'] ) ."','". mysqli_real_escape_string( date("Y-m-d", strtotime( $_SESSION['dateChosen'] ) ) ) ."'
,'". mysqli_real_escape_string( $_SESSION['textWeight'] ) ."','". mysqli_real_escape_string( $time ) ."','". mysqli_real_escape_string( $_SESSION['textMarks'] ) ."'
,'". mysqli_real_escape_string( $_SESSION['module'] ) ."','". mysqli_real_escape_string( $teacherid ) ."','". mysqli_real_escape_string( $_SESSION['rooms'] ) ."'";
  }

  $insertsql = "INSERT INTO Session (SessionId, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room) 
  VALUES (" . implode('), (', $insert) . ")";

 $sqlstmt=$mysqli->prepare($insertsql);

 $sqlstmt->execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:17:29.457

最好使用[PDO](http://www.php.net/manual/en/book.pdo.php)，并使用您[绑定](http://www.php.net/manual/en/pdostatement.bindparam.php)值的[准备好的](http://www.php.net/manual/en/pdo.prepare.php)查询。如果您有很多值要填写，那么您可以只使用基于位置的占位符而不是基于名称的占位符。

```
<?php
// connect to your database
$pdo = new PDO('mysql:host=localhost;dbname=mydatabase', "username", "password");

// fill in the array, just one after the other since the placeholders will be numbered from 1 to ->count($insert)

$insert = array();

for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i){
    $insert[] = $_SESSION['id'] . ($n == 1 ? '' : $i); 
    $insert[] = $_SESSION['timeChosen'];
    $insert[] = date("Y-m-d", strtotime( $_SESSION['dateChosen'])); 
    $insert[] = $_SESSION['textWeight']; 
    $insert[] = $time;
    $insert[] = $_SESSION['textMarks']; 
    $insert[] = $_SESSION['module']; 
    $insert[] = $teacherid;
    $insert[] = $_SESSION['rooms'];
}

$query = $pdo->prepare('INSERT INTO Session 
         (SessionId, SessionTime, SessionDate, SessionWeight, 
          SessionDuration, TotalMarks, ModuleId, TeacherId, Room) 
          VALUES' . 
          //repeat the 9 placeholders for $_SESSION['sessionNum'] and cut of the trailing ,
          substr(str_repeat('(?,?,?,?,?,?,?,?,?),',$_SESSION['sessionNum']),0,-1));

// now we bind the placeholder with the corresponding value in the array
for($i = 0;$i < count($insert);$i++){
    $query->bindParam(($i + 1),$insert[$i]);
}
// finally we execute the query
$query->execute(); 
```

就是这样。（我是凭记忆写的，除了 php -l 还没有测试过，但你明白了，我很确定它会起作用。;)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:20:30.827

使用准备好的语句的全部意义在于避免做你正在做的一半工作。基本思想是您只需创建基本查询，准备它并告诉它您将使用的变量名称而不是占位符，然后对变量执行所有工作。

您的代码应如下所示：

```
$insertsql = "INSERT INTO Session (SessionId, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
$insert = $mysqli->prepare($insertsql);

$insert->bind_params("sssssssss", $sessid, $_SESSION['timeChosen'], $sessdate,
                     $_SESSION['textWeight'], $time, $_SESSION['textMarks'],
                     $_SESSION['module'], $teacherid, $_SESSION['rooms']);

for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i) {
    $sessid = $_SESSION['id'] . ($n == 1 ? '' : $i);
    $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

    $insert->execute();
}

$insert->close(); /* free resources */ 
```

# wcf - 具有 POCO 可序列化类和延迟加载的实体框架

> ID：11024458
> 
> 赞同：2
> 
> 时间：2012-06-13T22:50:22.583
> 
> 标签：wcf, entity-framework-4, poco

我已经为相关对象设置了带有 ICollection 的 POCO 类。它们在 WCF 服务中，所以我用 DataContract/DataMember 装饰了它们。我不为相关对象使用虚拟属性，因为它们创建了一个不会序列化的代理（我收到一条看似无关的消息，“底层连接已关闭”，但是当我删除虚拟修饰符时，它就消失了。）

我无法理解的是如何延迟加载相关对象的集合。我不认为 POCO 可以为自己做到这一点，因为他们无法访问上下文。

例如，我有一个`Company`类，它有一个`ICollection<Principals>`属性。我通常不想在检索公司时加载所有委托人，但我想参考`Company.Principals`去获取它们。显然，`Company`靠自己根本无法做到这一点。

人们正在做些什么来结合拥有 (1) POCO 对象、(2) 典型的 WCF 序列化和 (3) 延迟加载的相关属性的愿望？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:24:25.047

延迟加载需要代理和虚拟导航属性。如果您没有代理，则必须以不同的方式处理加载。例如通过使用急切加载：

```
var companies = context.Companies.Include("Principals").ToList(); 
```

或使用 EF 4.1

```
var companies = context.Companies.Include(c => c.Prinicpals).ToList(); 
```

您知道哪个操作也应该加载相关的主体，因此使用急切加载不是问题。在带有序列化的 WCF 服务中使用延迟加载总是会导致加载整个对象图。

# python - def main() 无效语法、开发服务器和终端

> ID：11024461
> 
> 赞同：6
> 
> 时间：2012-06-13T22:50:40.950
> 
> 标签：python, syntax

从终端：

> ```
> File "index.py", line 41
> def main():
>   ^ SyntaxError: invalid syntax 
> ```

从 App Engine 开发服务器。我在 Debian 上运行 2.7.3rc2：

> ```
> msg = 'invalid syntax'
>       offset = 3
>       print_file_and_line = None
>       text = 'def main():\n' 
> ```

脚本：

```
def main():   # << here
    run_wsgi_app(application)

if __name__=="__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-13T23:17:26.297

此错误可能是由代码中较高的语法错误引起的，例如缺少右括号。

例如，以下代码将在与您的代码相同的位置给出 SyntaxError：

```
(
def main():
    pass 
```

如果您很难跟踪它，请发布一些较早的代码。

# iphone - 如何使用按钮在 UIImageView 对象的非高亮图像中高亮显示之间切换？

> ID：11024462
> 
> 赞同：0
> 
> 时间：2012-06-13T22:50:45.610
> 
> 标签：iphone, uiimageview, uibutton

我正在尝试使用一个按钮在 UIImageView 对象中的两个图像之间切换。我一直在寻找与我的具体问题接近的问题/答案，但没有运气，所以这里......

```
MainViewController.h
 IBOutlet UIButton *selectionButton;
 UIImageView *selectionStatus;
 @property(nonatomic, retain) UIButton    *selectionButton;
 @property(nonatomic, retain) UIImageView *selectionStatus;
 - (IBAction)selectionButtonPressed: (id)sender;

MainViewController.m
 @synthesize selectionButton;
 @synthesize selectionStatus;
 - (IBAction)selectionButtonPressed: (id)sender
 {
   if (selectionStatus.highlighted == YES)  
      selectionStatus.highlighted = NO;
   else 
      selectionStatus.highlighted = YES;
 }

 -(void)viewWillAppear:(BOOL)animated {
   // selection images
   selectionStatus = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"NotSelected.png"]  
                                       highlightedImage:[UIImage imageNamed:@"Selected.png"]];
 } 
```

当我在模拟器中运行它时，图像不会出现在“SelectionStatus”中，所以我想我错过了一些大事。帮助将不胜感激。谢谢！

我应该对按钮多说一些。selectionButton 是一个自定义按钮，它覆盖 selectionStatus 图像视图以及显示计算结果的标签。点击 selectionButton 选择标签中的值以包含在最多三个选定标签值的平均值计算中。selectionStatus 中显示的图像是一个复选标记，可根据选择状态更改颜色。我发现了另一种可行的方法，但似乎并不优雅：

```
- (IBAction)selectionButtonPressed: (id)sender
{
    if (toggleValue == YES) {
        toggleValue = NO;
        UIImage *unselect = [UIImage imageNamed:@"NotSelected.png"];
        selectionStatus.image = unselect;
    }
    else {
        toggleValue = YES;
        UIImage *select = [UIImage imageNamed:@"Selected.png"];
        selectionStatus.image = select;
    }
} 
```

这种方式不需要使用viewWillAppear，初始化是在viewDidLoad中完成的。感谢您的意见和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:48:39.613

在 ib 中，设置按钮的背景图像属性。我认为您的图像非常大，实际上当您将按钮的状态设置为突出显示时，它会显示在您的按钮上。试试看，我不确定。

# c++ - EasyBMP 任意角度旋转图像

> ID：11024463
> 
> 赞同：0
> 
> 时间：2012-06-13T22:50:46.247
> 
> 标签：c++, bmp

我正在尝试使用 EasyBMP 旋转 bmp 图像。当角度在 0 和 90 或 270 和 360 之间时，旋转很好。但是当在 180 到 270 之间时，边界矩形被拉伸并且在 90 到 180 之间的角度我得到分段错误。我确信问题出在

```
int width = image.TellWidth();
int height = image.TellHeight();

float sine= sin(angle);
float cosine=cos(angle);

float x1=-height*sine;
float y1=height*cosine;
float x2=width*cosine-height*sine;
float y2=height*cosine+width*sine;
float x3=width*cosine;
float y3=width*sine;

float minx=min(0,min(x1,min(x2,x3)));
float miny=min(0,min(y1,min(y2,y3)));
float maxx=max(x1,max(x2,x3));
float maxy=max(y1,max(y2,y3));

int outWidth;
int outHeight;

     outWidth=(int)ceil(fabs(maxx)-minx);
     outHeight=(int)ceil(fabs(maxy)-miny);
output.SetSize(outHeight,outWidth);

for(int x=0; x<outWidth; x++)
{
    for(int y=0; y<outHeight; y++)
    {
        int srcX=(int)((x+minx)*cosine+(y+miny)*sine); 
            int srcY=(int)((y+miny)*cosine-(x+minx)*sine);
        if(srcX>=0 &&srcX<width && srcY>=0 && srcY<height)
        {
            output.SetPixel(x,y,image.GetPixel(srcX,srcY));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:20:38.753

以下是我如何解决这个问题。TL;DR：旋转变换在 0, 0 附近进行，因此如果您的图像坐标设置为 0,0 到左下角，您需要先将图像转换为以 0,0 为中心。另外，sin 和 cos 期望的是弧度，而不是度数，所以记得先转换

漫长的道路：我首先创建了一个简单的程序，该程序可以轻松验证答案，以找出问题所在。

我注意到的第一件事是 90.0f 不会产生任何输出。这看起来很奇怪，所以我在“输出图像大小” printf 处插入并意识到输出高度被计算为 -87。显然这是不对的，所以让我们看看为什么会发生这种情况。

上升一点，`outHeight=(int)ceil(fabs(maxy)-miny);`所以让我们弄清楚在减去 maxy 和 miny 时我们是如何以负输出高度结束的。看起来 maxy 是 -0.896...miny 是 88.503...但是，maxy 的绝对值是在减去 miny 之前取的，这意味着我们最终得到 0.896 - 88.503。哇，这样不好！让我们尝试做减法然后取绝对值。

像这样重新编译宽度和高度：outWidth=(int)ceil(fabs(maxx-minx)); outHeight=(int)ceil(fabs(maxy-miny));

为我们带来更好的价值。现在 outWidth 和 outHeight 分别为 2 和 90。这得到了极大的改进，但高度应该是 100。我们稍后会解决这个问题。

为了弄清楚数学哪里出了问题，我将这些术语重新组织在一起：x 和 x，y 和 y。接下来，我调整了间距并添加了括号，以使其更具可读性并确保操作顺序（确保尝试查看 OoO 表；））。因为很明显你打破了旋转矩阵乘法，我将为你的变量命名比 x1、x2 等更直观的东西。从现在开始，x1 是 topLeftTransformedX，x2 是 topRightTransformedX，x3 将作为 bottomLeftTransformedX 存在（始终为 0），x4 将是 bottomRightTransformedX，与 Y 相同。更长，但更容易知道你在处理什么。

使用这个，在这一点上，我看到了你所做的同样的事情......然后我记得一些事情，基于从这个更清晰的代码中看到的数字（与你的数学相同，但仍然更容易调试）。

突然，我的 X 数学看起来像这样： // x = x cos - y sin float topLeftTransformedX = (-midX * cosine) - (midY * sine); float topRightTransformedX = (midX * cosine) - (midY * sine); float bottomLeftTransformedX = (-midX * cosine) - (-midY * sine); float bottomRightTransformedX = (midX * cosine) - (-midY * sine);

旋转矩阵围绕中心点旋转。您必须将图像转换为以该图像为中心以进行适当的旋转。

然后，当试图弄清楚为什么这会给出它的值时，我想起了别的东西——角度需要以弧度为单位。

突然间，它几乎都奏效了。还有更多工作要做，但这应该可以让您完成 95% 或更多。希望能帮助到你！

```
// bmprotate.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <math.h>

#define min(x,y) x < y ? x : y
#define max(x,y) x > y ? x : y
#define PI 3.14159

void rotate(int width, int height, float angleInDeg)
{
    float angle = angleInDeg * (PI/180.0f);
    float midX = ((float)width) / 2.0f;
    float midY = ((float)height) / 2.0f;

    float sine = sin(angle);
    float cosine = cos(angle);

    // x = x cos - y sin
    float topLeftTransformedX = (-midX * cosine) - (midY * sine);
    float topRightTransformedX = (midX * cosine) - (midY * sine);
    float bottomLeftTransformedX  = (-midX * cosine) - (-midY * sine);
    float bottomRightTransformedX = (midX * cosine) - (-midY * sine);

    float minx = min( topLeftTransformedX, min(topRightTransformedX, min(bottomLeftTransformedX, bottomRightTransformedX)) );
    float maxx = max( topLeftTransformedX, max(topRightTransformedX, max(bottomLeftTransformedX, bottomRightTransformedX)) );

    // y = x sin + y cos
    float topLeftTransformedY = (-midX * sine) + (midY * cosine);
    float topRightTransformedY = (midX * sine) + (midY * cosine);
    float bottomLeftTransformedY  = (-midX * sine) + (-midY * cosine);
    float bottomRightTransformedY = (midX * sine) + (-midY * cosine);

    float miny = min( topLeftTransformedY, min(topRightTransformedY, min(bottomLeftTransformedY, bottomRightTransformedY)) );
    float maxy = max( topLeftTransformedY, max(topRightTransformedY, max(bottomLeftTransformedY, bottomRightTransformedY)) );

    int outWidth;
    int outHeight;

    printf("(%f,%f) , (%f,%f) , (%f,%f) , (%f,%f)\n", 
        topLeftTransformedX, topLeftTransformedY, 
        topRightTransformedX, topRightTransformedY, 
        bottomLeftTransformedX, bottomLeftTransformedY, 
        bottomRightTransformedX, bottomRightTransformedY);

    outWidth = (int) ceil( fabs(maxx) + fabs(minx));
    outHeight = (int) ceil( fabs(maxy) + fabs(miny) );

    printf("output image size: (%d,%d)\n",outWidth,outHeight);
    for(int x=0; x<outWidth; x++)
    {
        for(int y=0; y<outHeight; y++)
        {
            int srcX=(int)((x+minx)*cosine+(y+miny)*sine); 
            int srcY=(int)((y+miny)*cosine-(x+minx)*sine);

            if(srcX >=0 && srcX < width && srcY >= 0 && srcY < height)
            {
                printf("(x,y) = (%d,%d)\n",srcX, srcY);
            }
        }
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    rotate(100,2,90.0f);
    for (int i = 0; i < 360; i++)
    {

    }
    return 0;
} 
```

# jquery - 在 jQuery Mobile 1.1 中为使用 PhoneGap 构建的 iPhone 应用程序加速页面转换？

> ID：11024464
> 
> 赞同：5
> 
> 时间：2012-06-13T22:51:00.570
> 
> 标签：jquery, iphone, ios, jquery-mobile, cordova

JQM 1.1 中的页面转换在 iPhone 上仍然会产生 1-2 秒的延迟，这会影响用户体验。

有没有人想出如何让 JQM 1.1 中的页面转换感觉更原生？我们知道有像 Zepto 这样的替代框架，但如果可能，我们更喜欢使用 JQM。

我们正在使用 PhoneGap 在 iOS 设备上分发应用程序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T05:50:53.950

我使用了几种方法，它们共同产生了非常令人满意的结果。

1) Energize.js - [https://github.com/davidcalhoun/energy.js](https://github.com/davidcalhoun/energize.js)消除了所有点击/点击的点击延迟

2) 在您的 jQM 启动中添加：

```
$.mobile.buttonMarkup.hoverDelay = 0; 
```

3, 4 & 5) 使用

```
$( "#YourPage" ).delegate("#YourButton", 'tap', function(event) {
        $.mobile.showPageLoadingMsg();
        $.mobile.changePage( "YourPage", { transition: "slide"} );                                               
        e.stopImmediatePropagation();
        return false;
        } ); 
```

3）而不是使用jQM然后转换为mobile.changePage的普通锚链接 - 自己做那部分并（可能）减少几毫秒

4) 将其委托为点击而不是单击（尽管存在 energet.js，但我看不出任何区别）

5) 在开始传输之前显示加载消息。如果您要导航的站点很复杂，可能需要一段时间才能生成，如果您显示加载消息，至少用户知道发生了什么事

6）使用预加载内容

```
$.mobile.loadPage( "YourPage" ); 
```

由于重叠，这可能有点矫枉过正，但希望使用这些技术，您将能够使您的应用程序更具响应性！

编辑-奖励：这是一篇博客文章，其中涵盖了其他三种加速 PhoneGap jQuery Mobile 应用程序的技术：http: [//therockncoder.blogspot.no/2012/06/three-quick-performance-tips-for.html](http://therockncoder.blogspot.no/2012/06/three-quick-performance-tips-for.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T08:40:41.750

只包含获取jquery mobile时需要的组件

[http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

# mono-service - 捕获单服务标准输出控制台输出？

> ID：11024474
> 
> 赞同：1
> 
> 时间：2012-06-13T22:52:31.817
> 
> 标签：mono-service

启动这样的服务说：

```
mono-service2 myservice.exe -l:/var/run/test 
```

如何捕获标准输出？如果崩溃，如何捕获输出？

除了程序记录本身之外，输出似乎丢失了。syslog 似乎只包含信息：mono-service2，而不是它正在运行的程序集：myservice.exe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:26:21.913

--debug 选项将为您提供标准输出，您应该能够将其重定向到文件：

```
mono-service2 myservice.exe -l:/var/run/test --debug > log.txt 
```

# c++ - 三元比较运算符重载

> ID：11024475
> 
> 赞同：4
> 
> 时间：2012-06-13T22:52:34.017
> 
> 标签：c++, operator-overloading

例如，如何实现三元比较运算符来确定 的布尔值`a < b < c`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T22:52:34.437

解决方案：在编写比较代码时，将返回类型设为`comparison`可以链接其他比较的对象，但可以隐式转换为`bool`. 这甚至可以（在某种程度上）与未按此意图编码的类型一起使用，只需`comparison`手动将它们转换为类型即可。

执行：

```
template<class T>
class comparison {
  const bool result;
  const T& last;
public:
  comparison(const T& l, bool r=true) :result(r), last(l) {}
  operator bool() const {return result;}
  comparison operator<(const T& rhs) const {return comparison(rhs, (result && last<rhs));}
  comparison operator<=(const T& rhs) const {return comparison(rhs, (result && last<=rhs));}
  comparison operator>(const T& rhs) const {return comparison(rhs, (result && last>rhs));}
  comparison operator>=(const T& rhs) const {return comparison(rhs, (result && last>=rhs));}
}; 
```

一个有用的例子：

```
#include <iostream>
int main() {
  //testing of chained comparisons with int
  std::cout << (comparison<int>(0) < 1 < 2) << '\n';
  std::cout << (comparison<int>(0) < 1 > 2) << '\n';
  std::cout << (comparison<int>(0) > 1 < 2) << '\n';
  std::cout << (comparison<int>(0) > 1 > 2) << '\n';
} 
```

输出：

```
1
0
0
0 
```

注意：这是由[Mooing Duck](https://stackoverflow.com/users/845092/mooing-duck)创建的，可以在[http://ideone.com/awrmK上找到经过编译的更强大的示例](http://ideone.com/awrmK)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T23:02:21.063

为什么需要运营商？

```
inline bool RangeCheck(int a, int b, int c)
{
  return a < b && b < c;
} 
```

或者：

```
#define RANGE_CHECK(a, b, c) (((a) < (b)) && ((b) < (c))) 
```

# javascript - Javascript/jQuery Id 检查以通过验证驱动编号功能

> ID：11024477
> 
> 赞同：1
> 
> 时间：2012-06-13T22:52:36.557
> 
> 标签：javascript, jquery, validation

我需要一个循环的帮助......这可能很简单，但我很难编码。

基本上，我需要检查现有 ID 的编号，以便创建具有不同编号的唯一 ID。它们的命名如下： id="poly'+i'" 在我的函数中按顺序命名，其中 i 等于现有元素的数量。示例：Array 1、Array 2、Array 3 对应 i=1 用于创建 Array 1，i=2 用于 Array 2 等。

现在 i 基于现有元素的总数，并且我的“CreateNew”函数被驱动 x=i+1（所以上面的例子，新元素将被命名为 Array 4）。问题是如果您删除中间数字之一，“创建”功能将复制高数字。即数组1、2、3删除2，新建->数组1、3、3。

我需要一个 if() 语句来检查数组是否已经存在，然后一个 for() 循环遍历所有 i 直到它验证。不知道如何编码。

我要纠正的代码如下（注意我最初并没有写这个，我只是想用我最低限度的 JS 技能纠正它）：

```
function NewPanel() {

  var i = numberOfPanels.toString();
  var x = (parseInt(i)+1).toString(); 

  $('#items').append('<div onclick="polygonNameSelected(event)" class="polygonName" id="poly'+i+'">&nbsp;&nbsp;Array '+ x +' &nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="removePolygon('+i+');return false;">&nbsp;&nbsp;&nbsp;</a></div>');
  $('div[id*=poly]').removeClass('selected');
  $('#poly'+i).addClass('selected');
  $('#poly'+i).click(function() {
    selectedPolygon = i;
    $('div[id*=poly]').removeClass('selected');
    $(this).addClass('selected');
  });

} 
```

谢谢你！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:00:06.447

请澄清“问题是如果您删除中间数字之一，”。你说的删除是什么意思？无论如何，最简单的解决方案是创建两个数组。两个数组将具有相同的创建 ID。每当在第一个数组中创建一个 id 时，都会将一个 id 添加到第二个数组中。所以当它从第一个数组中删除时，检查你的第二个数组的最大值，然后在第一个数组中创建这个 id。我希望这没有让你感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:00:46.603

很难说为什么你不能把数组拼接起来。在我看来，跟踪元素编号涉及很多额外的逻辑。换句话说，除了索引相同之外，由于重叠的 1、3、3（来自示例），id 以及其他属性变得相同。如果不是这种情况，那么我的假设是不正确的。

基于这个假设，当我遇到想要确保创建的索引始终是附加索引的情况时，我通常采用与数据库主键相同的方法。我设置了一个字段：

```
var primaryKeyAutoInc = 0; 
```

每次我“创建”或将元素添加到数据存储（在本例中为数组）时，我都会将键的当前值复制为它的索引，然后递增该`primaryKeyAutoInc`值。这允许我假设您要进行的保证唯一索引。而且，不仅删除不会影响以后的数据创建，保存的键索引可以用作访问器。

# c#-4.0 - 添加内容控件动态抛出异常

> ID：11024481
> 
> 赞同：1
> 
> 时间：2012-06-13T22:52:54.537
> 
> 标签：c#-4.0, vsto, add-in, office-interop

我对 Word Addin 开发相当陌生。幸运的是，我几乎可以做所有事情，但遇到了一些我相信的简单问题。

我想在所选范围内动态插入纯文本控件。为此，我使用以下内容：

```
 currentDocument = application.ActiveDocument;
    foreach(var field in myFieldsList)
    {      
         Microsoft.Office.Interop.Word.Range rng = currentDocument.ActiveWindow.Selection.Range;
         object oRng = rng;
         var contentControlPlain = application.ActiveDocument.ContentControls.Add(Microsoft.Office.Interop.Word.WdContentControlType.wdContentControlText, ref oRng);
         contentControlPlain.Tag = formField.FormFieldId.ToString();
         contentControlPlain.SetPlaceholderText(null, null, " <" + formField.FormFieldName + "> ");
         contentControlPlain.LockContentControl = (formField.TypeName.Trim() == "Blank");
    } 
```

代码似乎工作正常，但是当我尝试插入第二个字段时它抱怨说：

> **此方法或属性不可用，因为当前选择部分覆盖纯文本内容控件。**

我了解插件正在尝试将下一个内容控件插入到先前插入的纯文本控件中。但我尝试给出其他范围但无法修复。任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:35:47.803

添加每个内容控件后使用

```
Application.Selection.Start = lastControl.Range.End+1 
```

# php - 为什么在使用 Zend_Form::addSubForm() 时 Zend_Decorator_Label 被移动到装饰器数组的末尾？

> ID：11024482
> 
> 赞同：0
> 
> 时间：2012-06-13T22:53:02.987
> 
> 标签：php, zend-framework, zend-form

当我将 Zend_Form_Element 添加到表单时，我明确设置了装饰器的顺序，以便在标签之后呈现错误装饰器。但是，当我将此表单添加为子表单时，它会更改装饰器的顺序，因为标签装饰器被移动到末尾。是什么导致了这种行为，我该如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:10:31.407

想通了这个问题。原来我只是在扩展 Zend_Form::addElement() 时犯了一个错误。

# virtual - 在 Webmin 中设置虚拟主机

> ID：11024483
> 
> 赞同：2
> 
> 时间：2012-06-13T22:53:07.713
> 
> 标签：virtual, host, webmin

我在运行 Webmin 1.580 的 Linux 服务器中设置了一个虚拟主机。我给了它一个服务器名称和一个文档根目录。如何从互联网访问虚拟主机下的网站？

我应该输入服务器的 IP 地址然后输入名称吗？那是行不通的。它说：

错误 - 找不到文件

我还需要做什么才能使我的网站在服务器上运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:17:12.240

如果您打算使用该系统进行网络托管，您可能应该使用 Virtualmin，除了 Webmin。它使该过程的大多数元素变得更加容易。安装脚本将安装您需要的所有附加软件（如 BIND），并为网络托管任务提供更友好的 GUI。

你可以在这里下载：http: [//www.virtualmin.com/download](http://www.virtualmin.com/download)

它有免费的开源版本，由与 Webmin 相同的人开发。

# hibernate - Hibernate - 了解使用 hql 生成的连接查询

> ID：11024486
> 
> 赞同：2
> 
> 时间：2012-06-13T22:53:21.753
> 
> 标签：hibernate, jakarta-ee, hql

*使用的休眠版本：*

```
 <artifactId>hibernate-annotations</artifactId>
  <version>3.5.5-Final</version>

  <artifactId>hibernate-core</artifactId>
  <version>3.5.5-Final</version>

  <artifactId>hibernate-commons-annotations</artifactId>
  <version>3.2.0.Final</version>

  <artifactId>hibernate-jpa-2.0-api</artifactId>
  <version>1.0.0.Final</version> 
```

假设有两只猫（猫和它的伴侣有相同的小猫）猫/猫的伴侣与它的小猫有关系，小猫的名字作为连接列（连接列上的 OneToMany 关系，获取类型为“eager”）

假设我想得到小猫名字为“大”的猫，为此，我可以用不同的方式编写 hql。

```
I.

hql.append("from Cat as cat ")
hql.append("where cat.kitten.name = 'big' ");

II.

hql.append("from Cat as cat inner join cat.kitten as kitten ")
hql.append("where kitten.name = 'big' "); 
```

前面提到的 hql 在 cat 和它的小猫之间生成了一个内部连接，并且按预期工作。

但是，如果我想查询 kitten 中的一个属性，其中 cat 没有加入 kitten （比如 location ），我可以编写 hql 如下：

```
III.

hql.append("from Cat as cat ")
hql.append("where cat.kitten.location = 'Chicago' ");

IV.

hql.append("from Cat as cat inner join cat.kitten as kitten ")
hql.append("where kitten.location = 'Chicago' "); 
```

*问题 1) III 和 IV 也按预期工作，但是，III 正在 cat 和它的小猫之间生成笛卡尔/交叉连接，而没有 hql 中提到的显式连接，而 IV 不是。这是为什么？*

和

说，我想在 hql 中加入两个“不同”的对象 cat 和 mate （没有任何关联），它正在生成交叉连接。

例如，如果我说，

```
V.

hql.append("select cat ")
hql.append("from Cat as cat, Mate mate ")
hql.append("where cat.location = mate.location and mate.location = 'Chicago' "); 
```

它生成交叉连接。

但是，如果我说，

```
VI.

hql.append("from Cat as cat ")
hql.append("where cat.location in ( select mate.location from Mate mate where mate.location = 'Chicago' "); 
```

*问题 2）它不会生成交叉连接。但是，如果我必须使用两列怎么办。我需要使用两个 in 子句才能没有由 hql 生成的交叉连接。为什么一定要明确？或者如果可能的话，是否有休眠配置来避免交叉连接？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:34:59.677

在第一种形式（I、III、V）中，表之间的连接条件在映射中定义（可能在 a `<one-to-many>`、或子句中）`<many-to.one>`。在示例中，您似乎定义了一个正确的，而在 III 和 V 中，您没有正确执行。`<one-to-one>``<many-to-many>`

在示例 II、IV 和 VI 中，您明确定义了连接（或子选择）。如果 HQL 语句中有连接，Hibernate 总是在单个 SQL 语句中使用这个连接（如果连接是在映射中定义的，则不是这种情况 - Hibernate 通常更喜欢两个独立的选择（延迟加载仅在那时起作用）） . 这在以下情况下很有用.

如果我们要告诉你为什么 III 和 V 不能工作并产生笛卡尔积，那么你必须给我们表格的映射。

# regex - 通过 BASH 从网页中提取 URI

> ID：11024487
> 
> 赞同：0
> 
> 时间：2012-06-13T22:53:22.003
> 
> 标签：regex, bash

我需要提取驻留在 Intranet 上的页面的所有链接，但我不确定如何最好地做到这一点。网站结构如下

**主题列表**

1.  话题一

2.  话题二

3.  话题 3

ETC

现在链接驻留在每个主题页面中。我想避免手动通过超过 500 个主题页面来提取 URI。

每个主题页面具有以下结构

`http://alias/filename.php?cat=6&number=1`

`cat`参数是指类别，参数`number`是指主题。

一旦进入主题页面，我需要提取的 URI 再次以特定格式存在

`http://alias/value?id=somevalue`

**注意事项**

1.  我无权访问数据库，因此无法选择通过它进行拖网搜索
2.  每个主题页面中只有一个 URI
3.  我需要将列表提取到一个文件中，该文件仅在新行中列出每个 URI

我想执行某种可以通过 BASH 从终端运行的脚本，该脚本将遍历主题 URI，然后是每个主题中的 URI。

**简而言之**

如何使用可以使用 BASH 运行的脚本来提取列表，该脚本将递归地遍历所有主题列表，然后在每个主题页面中提取 URI，并在一个新的提取的 URI 中生成一个文本文件线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:32:22.470

我用 Perl 实现了这个，使用 HTML::TokeParser 和 WWW::Mechanize 模块：

```
use HTML::TokeParser;
use WWW::Mechanize;

my $site = WWW::Mechanize->new(autocheck =>1);
my $topicmax = 500;  #Note:  adjust this to the number of topic pages you have

# loop through each topic page
foreach(1..$topicmax) {
    my $topicurl = "http://alias/filename.php?cat=6&number=$_";

    # get the page
    $site->get($topicurl);
    $p = HTML::TokeParser->new(\$site->{content});

    # parse the page and extract the links
    while (my $token = $p->get_tag("a")) {
        my $url = $token->[1]{href};
        # use a regex to test for the link format we want
        if($url =~ /^http:\/\/alias\/value\?id=/) {
            print "$url\n";
        }
    }
} 
```

该脚本打印到标准输出，因此您只需将其重定向到一个文件。

# objective-c - NSString、NSArray 中的内存泄漏

> ID：11024490
> 
> 赞同：0
> 
> 时间：2012-06-13T22:53:34.437
> 
> 标签：objective-c, memory-leaks, nsstring, nsarray, instruments

我正在开发一个自定义框架（当然还有一个 CocoaTouch 应用程序来测试它）。这是一个大型框架，因此不可能在这里发布（除了它不是开源的，这不是我的错，我发誓！）。

我已经尝试了很长一段时间，但我不可能找到答案：Instruments 指责我的应用程序存在一些泄漏。我真的是新手，所以，我不知道我是否误解了报告，但似乎方法像

```
[NSArray array]
[NSString stringWithCString:encoding:]
[NSString stringWithFormat:]
[NSString stringWithUTF8String:]
[_obj_rootAlloc]
[__NSArrayM] 
```

是一些主要原因，这对我来说真的没有任何意义。

在此链接中，您可以找到仪器的运行报告。任何人都[可以看看](http://cl.ly/1A1k3k170C3i0P3i3s2v)，看看这是否可能意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:08:40.027

Instruments 报告泄漏对象的创建位置，而不是它们成为正式泄漏的时间点。在某个地方，您使用这些方法创建的对象要么被过度保留，要么在应有的时候没有释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:58:37.633

实际问题是我对合成属性所做的假设。我有这样的事情：

```
@interface MyClass : NSObject

@property(nonatomic,retain) NSString *myProperty;

@end 
```

在实施中：

```
@implementation MyClass
@synthesize myProperty=_myProperty;

@end 
```

我认为这`@synthesize`也是`autorelease`财产，但那是我的错误。我把它修好了：

```
@implementation MyClass
@synthesize myProperty=_myProperty;

-(void)dealloc
{
    [_myProperty release];
    [super dealloc];
}

@end 
```

谢谢您的帮助！

# xcode - 这是为所需设备功能设置 .plist 的正确方法吗？

> ID：11024491
> 
> 赞同：1
> 
> 时间：2012-06-13T22:53:45.997
> 
> 标签：xcode, plist, capability, video-camera

以下 .plist 条目会阻止没有摄像机的设备购买应用程序吗？谢谢你。

![在此处输入图像描述](../Images/416249f4f63975e73ee53e2f7f14a2dc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:18:25.050

取自[这里](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)：

> **UIRequiredDeviceCapabilities**
> 
> UIRequiredDeviceCapabilities（数组或字典 - iOS）让 iTunes 和 App Store 知道应用程序需要哪些与设备相关的功能才能运行。iTunes 和移动 App Store 使用此列表来防止客户在不支持所列功能的设备上安装应用程序。
> 
> 如果您使用数组，则给定键的存在表示需要相应的功能。如果使用字典，则必须为每个键指定一个布尔值。如果此键的值为 true，则该功能是必需的。如果密钥的值为 false，则该功能不得存在于设备上。在这两种情况下，省略一个键表示不需要该功能，但如果该功能存在，则应用程序能够运行。

- - - - - 编辑 - - - - -

这张图片来自上面的链接。 ![在此处输入图像描述](../Images/b49d75d4bd5966c9a16f8f7f2bceeb6a.png)

# php - PHP、正则表达式和多级花括号

> ID：11024495
> 
> 赞同：5
> 
> 时间：2012-06-13T22:54:07.183
> 
> 标签：php, regex, brackets

我有一个字符串，其中包含几个我想删除的大括号中的句子。这并不难做到（正如我现在所知道的那样。），但真正的麻烦是它是多层次的，我只想去掉顶层括号，让里面的所有东西都完好无损。它看起来像这样：

```
{Super duper {extra} text.} {Which I'm really {starting to} hate!} {But I {won't give up} so {easy}!} {Especially when someone is {gonna help me}.} 
```

我想创建一个包含这四个条目的数组：

```
Super duper {extra} text.
Which I'm really {starting to} hate!
But I {won't give up} so {easy}!
Especially when someone is {gonna help me}. 
```

我尝试了两种方法，一种是 preg_split，但效果不佳：

```
$key = preg_split('/([!?.]{1,3}\} \{)/',$key, -1, PREG_SPLIT_DELIM_CAPTURE);
$sentences = array();

for ($i=0, $n=count($key)-1; $i<$n; $i+=2) {
$sentences[] = $key[$i].$key[$i+1]."<br><br>";
} 
```

另一个使用 preg_match_all 非常好，直到我意识到我有这些括号多级：

```
$matches = array();
$key = preg_match_all('/\{[^}]+\}/', $key, $matches);
$key = $matches[0]; 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T22:58:53.483

您可以使用这样的递归表达式：

```
/{((?:[^{}]++|(?R))*+)}/ 
```

所需的结果将在第一个捕获组中。

用法，例如：

```
preg_match_all('/{((?:[^{}]++|(?R))*+)}/', $str, $matches);
$result = $matches[1]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T23:01:15.527

```
$x="foo {bar {baz}} whee";
$re="/(^[^{]*){(.*)}([^}]*)$/";
print preg_replace($re, "\\1\\2\\3", $x) . "\n";' 
```

返回：

```
foo bar {baz} whee 
```

# mysql - 提高连接性能

> ID：11024496
> 
> 赞同：2
> 
> 时间：2012-06-13T22:54:09.337
> 
> 标签：mysql, sql, performance, join

此查询运行缓慢：

```
SELECT UserAccountNumber, balance, username FROM users JOIN balances ON 
users.UserAccountNumber=balances.UserAccountNumber WHERE date < “2011-02-02” 
```

我能做些什么来提高它的性能？

我考虑过使用用户 ID 来代替 userAccountNumber。Appart 形成它，据我所知，JOIN 和 WHERE users.id = balances.idUser 以相同的速度执行......

所以..我还能改变什么来改进它？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:00:08.577

查询本身对我来说看起来不错，但请确保您在`UserAccountNumber`列上有索引（因为它们参与连接）和`date`（您正在搜索的列）。如果数据库必须对大量记录进行顺序扫描，那会很慢。使用`EXPLAIN SELECT`可以帮助您了解数据库实际上是如何执行查询的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:25:26.200

如果表很大，您可能会使用临时表获得一些改进，而不是让 MySQL 的优化器为您整理。不过，这肯定是一个权衡。

```
CREATE TEMPORARY TABLE `tmp_balances`
(
  `UserAccountNumber` INT,
  `balance` INT,
  INDEX (`UserAccountNumber`)
) ENGINE=MEMORY
SELECT `UserAccountNumber`, `balance`
FROM balances
WHERE date < "2011-02-02";

SELECT `tmp_balances`.`UserAccountNumber`, 
    `tmp_balances`.`balance`, 
    `users`.`username`
FROM `tmp_balances` INNER JOIN users USING (`UserAccountNumber`); 
```

除此之外（这有点远），我不得不回应早期评论者关于索引的说法。

# javascript - 左侧优先

> ID：11024500
> 
> 赞同：0
> 
> 时间：2012-06-13T22:54:50.130
> 
> 标签：javascript

当出现疑问时，我正在考虑在 JS 中声明 var。同时设置两个 vars 的值的优先级是什么？看：

```
var a = 1,
b = 1; 
```

使用此代码，`a`在之前声明`b`。但是这段代码呢

```
var a = b = 1; 
```

哪个先收到价值？`a`还是`b`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:56:58.820

它被评估为

```
var a = (b = 1); 
```

因此，`b`首先获取值。

请注意，这与第一个片段不同：如果尚未在全局范围内，`b`则将成为全局变量（如果之前未声明）。这将导致严格模式下的错误。

可以在[规范](http://es5.github.com/#x11.13.2)中找到正式的描述。

# c# - 如何在 GridView 上添加静态项？

> ID：11024503
> 
> 赞同：4
> 
> 时间：2012-06-13T22:55:44.013
> 
> 标签：c#, wpf, xaml, datatemplate, microsoft-metro

如上图所示，GridView 已经有提要或项目，但这些提要或项目包含静态项目。

![在此处输入图像描述](../Images/d33cac7c25433e46e7c385b947488a1c.png)

在这张图片中，我感兴趣的项目是“查看更多”。我想在我的应用程序中实现类似的东西。

![在此处输入图像描述](../Images/2bea621acc43e643a6de3c0e22d6dd90.png)

在这个另一个应用程序中，包含两个静态项：

*   一切开始
*   顶部免费。

不，问题是，如何在 GridView 中添加此项？并按下时..执行某些操作（例如按钮或命令）。

提前致谢。

**更新：**一位合作伙伴告诉我“您可以编辑 gridview 的模板并将控件添加到 itemspresenter 旁边”

我没有太多自定义控件模板的经验。你能给我举个例子吗？

![在此处输入图像描述](../Images/ae8963dc88de4437d86cbaad6d786d64.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:38:53.520

您需要将一个项目添加到您的数据源。

**例如，** 如果您的数据源是产品项目列表，并且您从文件中获取它们。首先从文件中选择项目并填充您的列表。比使用特定数据（您的静态数据）创建一个对象添加它添加到列表中。这样你就可以管理这个项目并且它总是在好的地方

# visual-studio-2010 - 无法在 VS2010 上为我的计算机中的第二个用户帐户创建右边距

> ID：11024506
> 
> 赞同：0
> 
> 时间：2012-06-13T22:55:52.947
> 
> 标签：visual-studio-2010

为了在 VS2010 上为第二个用户帐户创建右边距，我使用了与第一个帐户完全相同的过程，即：我在 HKCU\Software\Microsoft\Visual Studio\ 创建了一个名为“Guides”的字符串注册表项10.0\文本编辑器，带有字符串“RGB(100, 100, 100) 125”。创建了注册表项，但是当我为第二个用户打开 VS2010 时，该行根本不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:28:45.923

[Productivity Power Tools Extension](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)包括可设置的列指南。

# javascript - 用静态 html 更新 div

> ID：11024508
> 
> 赞同：0
> 
> 时间：2012-06-13T22:56:02.000
> 
> 标签：javascript, jquery, setinterval

我已经搜索了过去半个小时，试图找到一种方法，每十秒更新一次带有 HTML 内容的 div。一切要么是加载文件，要么只是纯文本。这是我到目前为止所做的，但我认为这还很遥远。

```
<script type="text/javascript">
var refreshId = setInterval(function()
{
     $("myad").html('<iframe height="98px" width="732px" src="www.eg.com/eg.html"></iframe>');
}, 10000);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:57:18.630

if `myad`is class do `$(".myad")`if id do`$("#myad")`

```
<script type="text/javascript">
    $(document).ready(function(){
        var refreshId = setInterval(function()
        {
         $(".myad").html('<iframe height="98px" width="732px" src="www.eg.com/eg.html"></iframe>');
         // or $("#myad")....
        }, 10000);
    })
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:59:05.387

尝试`$('#myad')`代替，`$('myad')`你应该没问题。

编辑：实际上，`$('#myad iframe').get()[0].contentWindow.location.reload(true);`重新加载可能是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T23:01:21.640

如果您只是想重新加载 iFrame，更简单的方法是给 iframe 一个 ID。

```
document.getElementById("myframe").src = document.getElementById("myframe").src 
```

# mysql - mySQL 与具有共同属性的组的所有成员的多对多关系

> ID：11024509
> 
> 赞同：2
> 
> 时间：2012-06-13T22:56:09.863
> 
> 标签：mysql, sql, many-to-many, constraints

是否可以在两个表之间建立多对多关系，并强制组的所有成员都具有共同的特定属性？

例如，一个工作人员可以在多个组中，一个组可以有多个工作人员，但一个组中的所有工作人员必须在同一个站点上。有足够多的工作人员和站点，我无法为每个站点创建一个新表。

- 编辑 -

这是简化的模式。我正在使用 mySQL 工作台，但我认为这是正确的：

```
-- -----------------------------------------------------
-- Table `DB`.`Worker`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB`.`Worker` (
  `workerID` INT NOT NULL ,
  `site` VARCHAR(45) ,
  PRIMARY KEY (`workerID`) ;

-- -----------------------------------------------------
-- Table `DB`.`Group`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB`.`Group` (
  `groupID` INT NOT NULL ,
  PRIMARY KEY (`groupID`) ;

-- -----------------------------------------------------
-- Table `DB`.`Worker_Group`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB`.`workerGroup` (
  `workerID` INT NOT NULL ,
  `groupID` INT NOT NULL ,
  PRIMARY KEY (`workerID`, `groupID`) ,
  INDEX `fk_Group` (`groupID` ASC) ,
  CONSTRAINT `fk_Worker`
    FOREIGN KEY (`workerID` )
    REFERENCES `DB`.`Worker` (`workerID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Group`
    FOREIGN KEY (`groupID`)
    REFERENCES `DB`.`Group` (`groupID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:29:42.580

您可以通过使用复合外键来做到这一点。

您可以使用由多个（在本例中为两个）字段组成的外键，而不是仅在一个字段上使用外键。

```
CREATE TABLE site (
  id         INT AUTO_INCREMENT,
  name       VARCHAR(256),
  PRIMARY KEY (id)
)

CREATE TABLE worker (
  id         INT AUTO_INCREMENT,
  name       VARCHAR(256),
  site_id    INT,
  PRIMARY KEY (id, site_id),
  FOREIGN KEY (site_id) REFERENCES site (id)
)

CREATE TABLE group (
  id         INT AUTO_INCREMENT,
  name       VARCHAR(256),
  site_id    INT,
  PRIMARY KEY (id, site_id),
  FOREIGN KEY (site_id) REFERENCES site (id)
)

CREATE TABLE map_worker_group (
  worker_id  INT,
  site_id    INT,
  group_id   INT,
  PRIMARY KEY (worker_id, group_id, site_id),
  FOREIGN KEY (group_id,  site_id) REFERENCES group  (id, site_id),
  FOREIGN KEY (worker_id, site_id) REFERENCES worker (id, site_id)
) 
```

现在一个组是特定于一个站点的，一个工人也是如此。在填充 worker:group 映射表时，您会引用两者的站点。这意味着工人只能在具有相同 site_id 的组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:27:31.457

你没有网站表吗？也许您可以创建一个 Sites 表并将其链接到 GroupsSites 表中的 Groups 表，正如您评论的那样，一个组中的所有工作人员都必须在同一个站点中，所以 Site 是一个组的属性，不是吗？从您的 Worker 表中删除 Site 字段，添加一个 Sites 表，在 Groups 上添加一个 SiteID 字段，它的 fk 应该足够了。

# coldfusion - 了解财产的精度和规模

> ID：11024511
> 
> 赞同：6
> 
> 时间：2012-06-13T22:56:48.133
> 
> 标签：coldfusion, coldfusion-9

```
property name="poiLat" length="60" ormtype="big_decimal" persistent=true precision="16" scale="14" default="0" hint=""; 
```

我不正确理解精度或比例。使用上面的属性，为什么“1”会出错而“2”会被接受？我应该把它改成什么来接受'1'

1) -118.27 = 错误

2) -18.27 = 正常

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T23:14:21.363

比例是指小数点**右侧**的位数。**如果精度为 16，小数位数为 14，则小数点左侧**只能有 2 位，所以

```
18.12345678901234 = ok 
118.27 = error 
```

尝试：

```
precision="16" scale="13" 
```

这将允许 118.1234567890123，但这是很多小数位。你真的需要多少？

```
precision="16" scale="4" 
```

将允许 123456789012.1234

# javascript - 查看复制和粘贴格式

> ID：11024515
> 
> 赞同：2
> 
> 时间：2012-06-13T22:57:12.127
> 
> 标签：javascript, rtf

如果我有一个带有样式（粗体、下划线等）的谷歌文档，有没有办法用 Javascript 解析格式？我正在尝试制作一个非常简单的 WYSWIG -> HTML 格式化程序，并且很容易能够用 HTML 替换空格，但是在格式化时遇到了困难。

TL/DR：如果我从 Google Doc 复制并粘贴到 textarea，我可以使用 Javascript 来查看格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:06:34.710

`contenteditable`您可以使用 HTML5 的属性，而不是使用将删除所有格式的文本框。

```
<div id="editable" contenteditable="true">
edit me
</div> 
```

如果您将某些内容粘贴到该框中，它将保留格式。现在您可以使用 jQuery`.html()`获取容器的 HTML。

```
$("#editable").html() 
```

[演示](http://jsfiddle.net/a8YMC/)

# json - 来自 JSON 请求的 JQuery 返回变量

> ID：11024517
> 
> 赞同：0
> 
> 时间：2012-06-13T22:57:21.143
> 
> 标签：json, jquery

我有以下代码从外部源中提取一些数据：

```
 $(document).ready(function(){
        $.getJSON('mydata.json',function(data) {
            var ned = data.names.ned;
            return(ned);
        });
    }); 
```

在我的 JSON 中，我有：

```
 {
      "names": {
               "ned": "Eddard Stark",
               "jon": "Jon Snow",
               "tyrion": "Tyrion Lannister"
               }
    } 
```

我想知道如何在另一个函数上使用变量“ **ned ”。**另外，我想进一步设置其他变量，如“jon”和“tyrion”以便以后使用，但我不能让它们传递给另一个函数。

JSON 回调必须在页面加载时完成，才能正确使用某些应用程序功能，这就是它准备好文档的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:06:25.167

您可以使用 jquery 轻松做到这一点[`$.Deferred`](http://api.jquery.com/category/deferred-object/)：

```
function getNed()
{
    return $.getJSON('mydata.json').pipe(function(data) {
        var ned = data.names.ned;
        return ned;
    });
}

getNed().done(function(ned) {
    alert(ned);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:04:02.340

一种快速/简单的方法是声明一个全局变量，然后在获得它时用来自 json 调用的数据填充它。

```
<script> 
var myJsonData; //Make this a very unique name, as you may conflict with other variables in plugins and such.
$(document).ready(function(){
    $.getJSON('mydata.json',function(data) {
        myJsonData = data;
        var ned = data.names.ned;
        return(ned);
    });
});
</script> 
```

但是，请注意，您的 getJSON 调用可能需要很长时间，并且您必须在`myJsonData`使用之前仔细检查该变量是否未定义。或者，您可以从 json 回调中调用某种初始化函数。

# iphone - MPMoviePlayer：在 iPad 上显示音量滑块

> ID：11024521
> 
> 赞同：0
> 
> 时间：2012-06-13T22:57:57.163
> 
> 标签：iphone, ios, mpmovieplayer

嗨，我的名字是 abhishek，我正在尝试使用 mpmovieplayer 在我的应用程序中显示视频。我创建了一个示例应用程序，我可以看到播放/暂停、下一个、上一个控件。但是我看不到音量滑块。默认情况下不显示音量滑块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:54:09.707

查看文档后，似乎 MPMoviePlayerController 可能不再包含音量滑块。也许考虑使用[MPVolumeView](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPVolumeView_Class/Reference/Reference.html)。

# android - 通知栏同时显示大图标和小图标

> ID：11024522
> 
> 赞同：6
> 
> 时间：2012-06-13T22:58:16.073
> 
> 标签：android, notifications, android-notifications, android-notification-bar

我的应用程序中的通知栏仅显示代码中的小图标（应该如此）。但是，当“阴影”被拉下时，它会同时显示代码中的小图标，以及我在 Notification.Builder 中设置的大图标。这是我的代码：

```
if (Build.VERSION.SDK_INT > 10){
            notification = new Notification(R.drawable.ic_stat_mintchip,
                    "This is a test",
                    System.currentTimeMillis());
            notification.largeIcon = (((BitmapDrawable)c.getResources().getDrawable(R.drawable.ic_launcher)).getBitmap());
            notification.defaults |= Notification.DEFAULT_ALL;
            notification.number += 1;
            notification.flags |= Notification.FLAG_AUTO_CANCEL;

        } else {
            notification = new Notification(R.drawable.ic_stat_mintchip,
                    "This is a test",
                    System.currentTimeMillis());

                notification.flags |= Notification.FLAG_AUTO_CANCEL;
                notification.defaults |= Notification.DEFAULT_ALL;
                notification.number += 1;
        }
} 
```

我不太清楚为什么会这样。有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T23:25:20.693

我认为这里的问题可能是您没有使用 Notificaiton.Builder 类。这是您可以做的一个小示例（尽管您必须插入自己的变量，并设置您使用的其他属性，例如振动）：

```
Notification.Builder nb = new Notification.Builder(context)
    .setContentTitle("title")
    .setContentText("content")
    .setAutoCancel(true)
    .setLargeIcon(largeIcon)
    .setSmallIcon(R.drawable.small_icon)
    .setTicker(s.getText());
NotificationManager nm = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
nm.notify(100, nb.build()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-12T15:48:25.427

我在 android lollipop 中遇到的另一个问题是小图标显示在大图标旁边。要解决它 - 只是不要设置大图标！仅使用小图标设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T15:12:18.393

[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html) 如果您将 android manifest 中的最大 sdk 版本设置为 19（即 KitKat），您的应用将不再显示用于棒棒糖的通知

# smtpclient - 如何在 MVC Mailer 中动态更改 SMTP 客户端、用户和密码？

> ID：11024526
> 
> 赞同：2
> 
> 时间：2012-06-13T22:58:55.677
> 
> 标签：smtpclient, mvcmailer

在分步指南中： [https ://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)

据说使用了 .net 邮件库（System.Net.Mail）。

在医疗交易中，需要根据国家地区更改服务器，并记录邮件是否发送状态。

.net 邮件库会执行此操作，但在使用 MVC Mailer 时我无法理解将以下代码段放在哪里：

.net 邮件库-->

```
SmtpClient client = new SmtpClient(server, port);
client.credentials = CredentialCache.DefaultNetworkCredentials; 
```

MVC 邮件程序-->

```
public ActionResult SendWelcomeMessage()
{
    UserMailer.SmtpClient(server, port);
    UserMailer.credentials = CredentialCache.DefaultNetworkCredentials;
    UserMailer.Welcome().SendAsync();

    return RedirectToAction("Index");
}

    static bool mailSent = false;
    private static void SendCompletedCallback(object sender, AsyncCompletedEventArgs e)
    {
        // Get the unique identifier for this asynchronous operation.
         String token = (string) e.UserState;

        if (e.Cancelled)
        {
             Console.WriteLine("[{0}] Send canceled.", token);
        }
        if (e.Error != null)
        {
             Console.WriteLine("[{0}] {1}", token, e.Error.ToString());
        } else
        {
            Console.WriteLine("Message sent.");
        }
        mailSent = true;
    } 
```

如果 MailSent 为假，则写入严重日志错误。

我不确定.net 设置的客户端设置应该去哪里。他们应该像我在上面所做的那样进入控制器还是在 Mailer 方法中。

感谢您的任何建议。

问候，维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T14:14:04.870

我也有同样的需要。

为此，我创建了一个自定义邮件发件人类：

```
 Public Class CustomMailSender
        Inherits System.Net.Mail.SmtpClient
        Implements ISmtpClient       

    Public Sub Init(senderEmail As String, password As String)
        Me.Credentials = New System.Net.NetworkCredential(senderEmail, password)
    End Sub

    Public Overloads Sub SendAsync(mail As MailMessage) Implements ISmtpClient.SendAsync
        MyBase.SendAsync(mail, Nothing)
    End Sub

    Public Overloads Sub SendAsync(mail As MailMessage, userToken As Object) Implements ISmtpClient.SendAsync
        MyBase.SendAsync(mail, userToken)
    End Sub

    Public Overloads Sub Send(mail As MailMessage) Implements ISmtpClient.Send
        MyBase.Send(mail)
    End Sub

    Public Shadows Event SendCompleted(sender As Object, e As System.ComponentModel.AsyncCompletedEventArgs) Implements ISmtpClient.SendCompleted

End Class 
```

然后在您的电子邮件控制器中，您可以这样使用它

```
Public Class EmailController
        Inherits MailerBase

    Public Sub New()
        MyBase.New()
        Me.CustomMailSender = New CustomMailSender
    End Sub

    Public Property CustomMailSender As CustomMailSender

    Public Sub Sample()
        Dim mvcMailMessage As MvcMailMessage = Populate(Sub(i)
                                                            i.ViewName = "Sample"
                                                            i.To.Add("some1@somewhere.org")
                                                            i.Subject = "Boo!"
                                                        End Sub)
        mvcMailMessage.Send(Me.CustomMailSender)
    End Sub
End Class 
```

是的，我知道那是 VB，但我是 VB 人！:> 希望这会有所帮助:)

# c++ - 如何在 C++ 中编写返回结构的函数原型？

> ID：11024529
> 
> 赞同：1
> 
> 时间：2012-06-13T22:59:21.980
> 
> 标签：c++, function-prototypes

我必须为二次方程创建一个二等分程序。以下是两个单独步骤的说明：

该计划必须满足以下要求：

1.  二次方程的系数 a、b 和 c 应通过名为 的单独函数从键盘读取`readCoeffs()`。该函数应向调用者返回一个读取所有 3 个系数的结构。t 可以是结构的 3 个字段或具有 3 元素数组的单个字段。

2.  计算根的函数应以具有 3 个字段的结构形式将结果返回给调用者：root1、root2 和存在（用于确定根是否存在的布尔变量）。

我无法正确编写函数原型和函数标题。当我这样写它们时：

```
struct calcRoots(double, double, double, double quadfunc(double), bool&);

struct readCoeffs();

int main(){ 
```

我得到错误。我认为 Microsoft Visual Studio 期望我创建带有大括号和分号的结构。我很失落。非常感谢任何反馈。

这是我正在使用的整个代码。我不断地修改它。这是我的第一门 C++ 课程。我在挣扎。

```
/****************************************************************************
//File: bisect.cpp
//Finds the root of a function using the bisection method
#include <iostream>
#include <cmath>
#include <fstream>
using namespace std;

struct coeffStru{
        double a;
        double b;
        double c;};
struct rootStru{
    double root1;
    double root2;
    bool exists;
               };

//function prototypes
struct calcRoots(double, double, double, double f(double),bool&);
double quadfunc(struct, double);
struct readcoeffs(coeffStru);

int main() {
    double xLeft=-10.0;
    double xRight=10.0; //end points of interval
    double epsilon;       //exists tolerance
    double root;          //root found by bisect
    bool exists;              //exists flag

//Get tolerance
cout<< "Enter tolerance: ";
cin>>epsilon;

struct coeffStru = readcoeffs();

//use bisect calcRoots function to look for root of function f
struct rootStru = calcRoots(xLeft, xRight, epsilon, quadfunc, exists);

//display result
if (!exists){
    cout<< "Root found at "<<root
        <<" \nValue of f(x) at root is: "<<f(root);
        system("PAUSE");
        return 0;
           }
else{
    cout<<"There may be no root in ["<<xLeft<<", "<<xRight<<"]"<<endl;
    system("PAUSE");
    return 0;
    }
}

//Struct return type readcoeffs function
struct readcoeffs(coeffStru){

    cout<<"Enter values for a,b,and c of a quadratic equation."<<endl;
    cin>>a>>b>>c;
    return struct coeffStru;
                            }

//Implements bisection method to find a root of function f
//in interval [xLeft, xRight].
//PRE: xLeft, xRight, and epsilon are defined.
//POST: Returns midpoint of xLeft and xRight if the difference between thses values is <= epsilon. Returns true to exists if there is no root.
struct calcRoots (double xLeft, double xRight, double epsilon, struct coeffStru, double quadfunc(double), bool& exists) //IN: endpoints of interval for possible root, IN: exists tolerance, IN: the function, OUT: exists flag
{
    double xMid;                        //midpoint of interval
    double fLeft;
    double fRight;              //function values at xLeft, xRight,
    double fMid;                        //and xMid

//Compute function values at initial endpoints of interval
    fLeft = quadfunc(xLeft,coeffStru);
    fRight = quadfunc(coeffStru, xRight);

    //Repeat while interval > exists tolerance
    while (fabs ( xLeft - xRight) > epsilon)
    {
        //Compute function value at midpoint
        xMid = (xLeft + xRight)/ 2.0;
        fMid = quadfunc(coeffStru, xMid);

        //Test function value and reset interval if root not found
        if(fMid ==0.0)      //if xMid is the root
            root1 = xMid;    //set root1 to xMid
        else{ 
            xRight = xMid;
            xMid = (xLeft + xRight)/ 2.0;
            fMid = f(coeffStru, xMid);
            }
            if(fLeft * fMid < 0.0)  //root in [xLeft, xMid]

        //Display next interval
        cout<< "New interval is [" <<xLeft
            << ", " <<xRight << "]"<<endl;
    }    //ends 1st while loop

    //If no change of sign in the interval, there is no unique root
    exists = (fLeft * fRight) >0;  //test for same sign - set exists
    if(exists){ 
        return -999.0;      //no 1st root - return to caller
              }

    //Return midpoint of last interval
    root1 = (xLeft + xRight) / 2.0;
//Compute function values at initial endpoints of interval
    fLeft = f(coeffStru, xLeft);
    fRight = f(coeffStru, xRight);

    //Repeat while interval > exists tolerance
    while (fabs ( xLeft - xRight) > epsilon)
    {
        //Compute function value at midpoint
        xMid = (xLeft + xRight)/ 2.0;
        fMid = f(coeffStru, xMid);

        //Test function value and reset interval i root not found
        if(fMid ==0.0)      //xMid is the root
            return xMid;    //return the root
        else if (fLeft * fMid < 0.0)  //root in [xLeft, xMid]
            xRight = xMid;
        else                            //root in [xMid, xRight]
            xLeft = xMid;

        //Display next interval
        cout<< "New interval is [" <<xLeft
            << ", " <<xRight << "]"<<endl;
     }    //ends 2nd while loop

    //If no change of sign in the interval, there is no unique root
    exists = (fLeft * fRight) > 0;  //test for same sign - set exists
    if(exists){ 
        return -999.0;      //no 2nd root - return to caller
              }

    //Return midpoint of last interval
    root2 = (xLeft + xRight) / 2.0;

return struct rootStru;
}   //ends calcRoots method

//Function whose root is being found.
//PRE: x is defined.
//POST: Returns f (x)
double quadfunc(struct coeffStru, double x){
    return a * pow(x, 2.0) - b* pow(x, 1.0) + c;}

************************************************************/ 
```

如您所想，我遇到了很多错误。我现在的主要问题似乎是通过引用和值传递变量和结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:03:40.530

这是一个两步过程：

(1) 定义将保存结果的结构，可能是这样的：

```
struct ResultType {
    /* ... fields go here ... */
}; 
```

(2) 原型化实际功能：

```
ResultType calcRoots(double a, double b, double c, double function(double), bool& out); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T23:01:57.593

```
struct calcRoots(double, double, double, double quadfunc(double), bool&); 
```

`struct`本身不是一种类型。您应该说出要返回的结构的名称。那么，预计会返回什么样的结果`struct`呢`calcRoots`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:03:48.407

像这样的东西：

```
struct Coefficients
{
    double a, b, c;
};

struct Roots
{
    double root1, root2;
    bool exists;
};

Coefficients readCoeffs() { /* ... */ }

Roots calcRoots(const Coefficients& coefficients) { /* ... */ } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T23:15:03.323

C++ 中的结构类似于 C 语言中的结构。您以相同的方式定义它们。

```
struct coeff_t {
   double a;
   double b;
   double c;
};

struct roots_t {
    bool exist;
    double r1;
    double r2;
}; 
```

现在，通过这些定义，您可以定义函数原型：

```
coeff_t readCoeffs();

roots_t calcRoots( coeff_t & coeff ); 
```

注意 coeff 参数前面的“&”，这意味着在 C++ 中通过引用传递，这意味着编译器将传递地址，并且知道在函数内部取消引用它，但您可以在函数中将其引用为“coeff”。

# php - 如何在 PHP 中将两个特定的数组键和值组合在一起？

> ID：11024530
> 
> 赞同：0
> 
> 时间：2012-06-13T22:59:26.713
> 
> 标签：php, arrays, merge

我有两个有趣的数组，我试图将它们组合在一起。简单的说：

```
$firstArr

array(3) {
  [0] => array(2) {
    [0] => string(1) "1"
    [1] => string(16) "test1"
  }
  [1] => array(2) {
    [0] => string(1) "8"
    [1] => string(26) "test2"
  }
  [2] => array(2) {
    [0] => string(1) "9"
    [1] => string(23) "test3"
  }
}

$secondArr

array(3) {
  [0] => string(1) "1"
  [1] => string(1) "2"
  [2] => string(1) "3"
} 
```

我想得到的是这样的（不是数组）：

```
$x = 1, 8, 8, 9, 9, 9;
$y = test1, test2, test2, test3, test3, test3; 
```

基本上，第二个数组值决定了第一个数组值被复制了多少次。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:05:38.630

```
$firstArr=array(array("1","test1"),array("8","test2"),array("9","test3"));

$secondArr=array("1","2","3");

$x=$y='';
foreach ($secondArr as $k=>$v){
$x.= str_repeat($firstArr[$k][0].',',$v);
$y.= str_repeat($firstArr[$k][1].',',$v);
}

echo rtrim($x,",").";\n";
echo rtrim($y,",").";"; 
```

输出：

1,8,8,9,9,9;
测试1，测试2，测试2，测试3，测试3，测试3；

工作演示：

[http://codepad.org/yFvWs0Rh](http://codepad.org/yFvWs0Rh)

# qt - Qt：视图添加到布局不更新，但不在布局中时会更新

> ID：11024531
> 
> 赞同：0
> 
> 时间：2012-06-13T22:59:29.333
> 
> 标签：qt, model-view-controller, layout

当从其相应模型发送信号时，名为 Tachometer 的小部件将相应更新，但当我将小部件添加到布局时，它根本不会响应。这可能是什么原因？在不显示模型或视图的内部结构（这将是详尽无遗的）的情况下，我将尝试指出它不工作的地方：

```
void MainWindow::setupWidgets()
{
    QHBoxLayout *horiz1 = new QHBoxLayout();
    QHBoxLayout *horiz2 = new QHBoxLayout();
    odometer = new Odometer(ui->dashFrame);
    fuelGauge = new FuelGauge(ui->dashFrame);
    tripometer = new Tripometer(ui->dashFrame);
    tachometer = new Tachometer(ui->dashFrame);
    temperatureGauge = new TemperatureGauge(ui->dashFrame);
    oilPressureGauge = new OilPressureGauge();
    QVBoxLayout *vertOPG = new QVBoxLayout();

    if ( oilPressureGauge->getTitle() != "" )
    {
        QLabel *OPGLabel = new QLabel(oilPressureGauge->getTitle());
        vertOPG->addWidget(OPGLabel);
    }
    vertOPG->addWidget(oilPressureGauge);

    speedometer = new Speedometer(ui->dashFrame);
    horiz1->addWidget(tachometer);
    horiz1->addWidget(speedometer);
    horiz2->addWidget(fuelGauge);
    horiz2->addWidget(temperatureGauge);
    horiz2->addLayout(vertOPG);
    horiz2->addWidget(tripometer);
    horiz2->addWidget(odometer); // will NOT update when added to layout
    QVBoxLayout *vert1 = new QVBoxLayout(ui->dashFrame);
    vert1->addLayout(horiz1);
    vert1->addLayout(horiz2);
    this->ui->dashFrame->setLayout(vert1);
} 
```

我很困惑其他小部件会按预期更新，但不是名为转速计的对象。正如我之前所说，如果我不将其添加到布局中，例如

```
// ...
tachometer = new Tachometer(ui->dashFrame);
// ... 
```

它似乎工作得很好。此外，通过在控制台上进行调试，我看到转速表的 RPM 值被发送到更新转速表视图的适当插槽（我刚刚注意到转速表最终响应了更新，但每次更新后它都没有更新超时）。似乎这里明显涉及一些延迟问题。如果有人可能知道为什么会这样，我将不胜感激。

# android - Android唯一约束中的SQLite不起作用

> ID：11024533
> 
> 赞同：1
> 
> 时间：2012-06-13T22:59:57.787
> 
> 标签：android, sqlite

我有以下表定义：

```
CREATE TABLE arbol32 (_id integer primary key autoincrement, ID integer, NIVEL integer, TEXTO text, ID_ORIG integer, CONTRATO integer, CODALMTESTOR text, CENTRO text, SECUEN text, DNIACUM text, UNIQUE(ID)); 
```

以及以下被多次调用的代码：

```
if(sArbol32.getPropertyCount()>0)
            {
                cargarAuxiliares=true;    
                  Arbol32BE[] arbol32=WSManager.RetrieveArbol32FromSoap(sArbol32);
                    arbol32Table.open();
                    arbol32Table.beginTransaction();
                    for(int i=0;i<sArbol32.getPropertyCount();i++){
                      arbol32Table.create(arbol32[i].id, arbol32[i].nivel, arbol32[i].texto, arbol32[i].id_orig, 
                                            arbol32[i].contrato, arbol32[i].codalmtestor, arbol32[i].centro,arbol32[i].secuen,arbol32[i].dniacum);
                    }
                    arbol32Table.setTransactionSuccessful();
                    arbol32Table.endTransaction();
                    arbol32Table.close();
            } 
```

最后，这是 create 方法的代码：

```
public long create(int id,int nivel,String texto,int id_orig,int contrato,String codalmtestor,String centro,String secuen, String dniacum) {
Log.i(TAG, "Inserting record...");
ContentValues initialValues = new ContentValues();
//initialValues.put(KEY_ROWID, id);
initialValues.put(KEY_ID,id);
initialValues.put(KEY_NIVEL,nivel);
initialValues.put(KEY_TEXTO,texto);
initialValues.put(KEY_ID_ORIG,id_orig);
initialValues.put(KEY_CONTRATO,contrato);
initialValues.put(KEY_CODALMTESTOR,codalmtestor);
initialValues.put(KEY_CENTRO,centro);
initialValues.put(KEY_SECUEN,secuen);
initialValues.put(KEY_DNIACUM,dniacum);
return mDb.insert(DATABASE_TABLE, null, initialValues); 
```

}

我的问题是，尽管指定了 UNIQUE，但插入了具有相同 ID 的重复行。我做错了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:49:23.817

我的错误...我正在使用较旧的数据库进行测试。我在做什么是好的！

# arrays - 对众多变量进行排序和管理

> ID：11024538
> 
> 赞同：-2
> 
> 时间：2012-06-13T23:00:27.927
> 
> 标签：arrays, actionscript-3, variables, constants

我的项目有类，这些类不可避免地包含成百上千的变量，我总是必须保持直截了当。例如，我总是必须跟踪类中出现的一组重复出现的“项目”的特定类型的变量，将这些变量放在多个类之间会导致很多混乱。

如何更好地对变量进行排序以防止发疯，尤其是在需要保存数据时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:59:47.157

我错过了什么吗？Actionscript 是一种面向对象的语言，因此您可能有数百个变量，但除非您以某种方式将其视为一个抓包并将其全部倾倒在一个地方，否则一切都应该在手边。在不知道你在跟踪什么的情况下，很难给出具体的建议，但这里有一个我正在从事的当前项目的例子，它是一个构建就业前评估的平台。

基本单元是一个问题。一个问题有一个词干、可以在状态栏中显示的文本、一组答案以及一组我们正在跟踪的关于用户在该特定类型问题中所做的事情的度量。

同样，这些措施是它们自己的对象类型，并且有两种“风格”：一种用于跟踪时间限制，另一种则不是。该度量有一个名称（所以我们知道在哪里写回数据库）和一个值（它告诉我们什么）。定时的也有时间限制的属性。

当我们需要为问题计时时，我们将该度量交给另一个倒计时的对象和一个显示时间的单独对象（如果适合这种情况）。被称为干扰因素的答案有一个标签和一个值，它们可以根据用户的选择赋予适当的度量。例如，如果用户选择“d”，则其值“4”将传输到存储用户选择的度量。

一旦用户提交了他的答案，我们就会遍历该问题的所有度量并将其发送到数据库。如果这些不被视为一个集合（在本例中为向量），我们必须确切知道每个问题存储了哪些具体度量，并且每个问题将有一个非常不同的结构，我们必须深入研究. 因此，如果遍历集合是您的问题，我认为您应该重新考虑这个想法。它节省了大量代码，并且比“var1”、“var2”、“var3”更高效。

如果您认为笨拙的部分是您必须做的类型检查，因为实际上任何东西都可能在其中，那么只要您至少使用 Flash Player 10，Vector 对您来说可能是一个很好的解决方案。

## 所以，总结一下：

1.  当您有很多相关属性时，请编写一个将所有这些相关的点点滴滴放在一起的类（如我的问题）。
2.  当对象有 0-n 个相同或非常相似的“事物”时，请使用某种集合，例如 Array 或 Vector，以允许您将它们作为一个组进行迭代并对每个对象执行相同的操作（例如，每个问题都是一个更大的分组的一部分，该分组允许每个问题依次呈现，并且每个问题都有一组干扰项和另一个度量。

这两个概念一起使用，应该有助于保持您的信息整洁有序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:00:28.583

虽然我确信有很多方法可以让数组保持直线，但我找到了一种对我来说效果很好的方法。最重要的是，它将大量信息折叠成几个数组，我可以将这些数组解析为 XML 文件或其他存储方法。我将此方法称为我的“索引数组系统”。

实际上有多种方法可以做到这一点：创建少量一维数组，或创建二维（或更高）数组。两者都同样有效，因此请选择最适合您的代码的那个。我只在这里展示一维方法。那些熟悉数组的人可能会弄清楚如何重写它以使用更高维的数组。

我使用 Actionscript 3，但这种方法几乎适用于任何编程或脚本语言。

在这个例子中，我试图保持不同“活动”的各种“属性”。在这种情况下，我们会说这些属性是 Level、High Score 和 Play Count。我们将这些活动称为弹球、单词搜索、迷宫和记忆。

此方法涉及创建多个数组，每个属性一个，并创建保存用于每个活动的整数“键”的常量。

我们将从创建常量开始，作为整数。常量为此工作，因为我们在编译后从不更改它们。我们放入每个常量的值是相应数据将始终存储在数组中的索引。

```
const pinball:int = 0;
const wordsearch:int = 1;
const maze:int = 2;
const memory:int = 3; 
```

现在，我们创建数组。请记住，数组从零开始计数。由于我们希望能够修改这些值，因此这应该是一个常规变量。

请注意，我将数组构造为我们需要的特定长度，并在每个插槽中使用所需数据类型的默认值。我在这里使用了所有整数，但您可以使用几乎任何您需要的数据类型。

```
var highscore:Array = [0, 0, 0, 0];
var level:Array = [0, 0, 0, 0];
var playcount:Array = [0, 0, 0, 0]; 
```

因此，我们对每个属性都有一个一致的“地址”，我们只需要创建四个常量和三个数组，而不是 12 个变量。

现在我们需要创建函数来使用这个系统读取和写入数组。这就是系统真正的魅力所在。如果你想从这个类之外读/写数组，请确保这个函数是在公共范围内编写的。

要创建从数组中获取数据的函数，我们需要两个参数：活动名称和属性名称。我们还想设置这个函数来返回任何类型的值。

> **问题警告：在 Actionscript 3 中，这在静态类或函数中不起作用，因为它依赖于“this”关键字。**

```
public function fetchData(act:String, prop:String):*
{
    var r:*;
    r = this[prop][this[act]];
    return r;
} 
```

那个奇怪的代码，`r = this[prop][this[act]]`简单地使用提供的字符串“act”和“prop”作为常量和数组的名称，并将结果值设置为 r。因此，如果您为函数提供参数（“maze”、“highscore”），那么该代码的行为本质上将类似于`r = highscore[2]`（请记住，`this[act]`返回分配给它的整数值。）

写入方法的工作原理基本相同，只是我们需要一个额外的参数，即要写入的数据。这个论点需要能够接受任何

> **GOTCHA WARNING: 严格类型语言系统的一个显着缺点是您必须记住要写入的数组的数据类型。编译器无法捕获这些类型错误，因此如果您的程序试图写入错误的值类型，它只会抛出一个致命错误。**
> 
> 解决此问题的一种巧妙方法是为不同的数据类型创建不同的函数，因此在参数中传递错误的数据类型将触发编译时错误。

```
public function writeData(act:String, prop:String, val:*):void
{
    this[prop][this[act]] = val;
} 
```

现在，我们还有一个额外的问题。如果我们传递一个不存在的活动或属性名称会发生​​什么？为了防止这种情况，我们只需要一个函数。

此函数将通过尝试访问它来验证提供的常量或变量键，并捕获产生的致命错误，而不是返回 false。如果密钥有效，它将返回 true。

```
function validateName(ID:String):Boolean
{
    var checkthis:*
    var r:Boolean = true;

    try
    {
        checkthis = this[ID];
    }
    catch (error:ReferenceError)
    {
        r = false;
    }

    return r;
} 
```

现在，我们只需要调整我们的其他两个函数来利用这一点。我们将把函数的代码包装在 if 语句中。

如果其中一个键无效，该函数将不执行任何操作 - 它会静默失败。为了解决这个问题，只需在 else 构造中添加一个跟踪（又名打印）语句或一个非致命错误。

```
public function fetchData(act:String, prop:String):*
{
    var r:*;

    if(validateName(act) && validateName(prop))
    {
        r = this[prop][this[act]];
        return r;
    }
}

public function writeData(act:String, prop:String, val:*):void
{
    if(validateName(act) && validateName(prop))
    {
        this[prop][this[act]] = val;
    }   
} 
```

现在，要使用这些函数，您只需要每个使用一行代码。例如，我们会说我们在 GUI 中有一个显示高分的文本对象，称为 txtHighScore。为了示例，我省略了必要的类型转换。

```
//Get the high score.
txtHighScore.text = fetchData("maze", "highscore");

//Write the new high score.
writeData("maze", "highscore", txtHighScore.text); 
```

我希望你们会发现本教程对排序和管理变量很有用。

（后注：您可能可以对字典或数据库做类似的事情，但我更喜欢这种方法的灵活性。）

# java - XML 验证错误，未找到元素（我认为即使元素存在并且模式和 xml 已正确加载）

> ID：11024541
> 
> 赞同：0
> 
> 时间：2012-06-13T23:00:44.293
> 
> 标签：java, xml, xsd

我正在尝试使用以下代码块针对 XML 模式验证简单的 XML 文件。我遇到了一个例外

```
org.xml.sax.SAXParseException: cvc-elt.1: 
    Cannot find the declaration of element 'Applications' 
```

并且想知道是否有人知道为什么会这样。（当我尝试查看模式加载后的内容时，我看到一堆语法对象或类似的东西，没有任何迹象表明模式已正确加载。是这样吗？如果我尝试加载一个不存在文件名的架构，它给了我一个找不到文件的异常......所以当给出正确的文件名时，我得到它正在寻找正确的架构）

```
public void getPriceSummaryInfo(){
        Document doc = null;
        try {
            File fXmlFile = new File("testXML.xml");
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            doc = dBuilder.parse(fXmlFile);
        } 
        catch (Exception e) {
            e.printStackTrace();
        }

        try {
        Schema schema = getSchema("testSchema.xsd");
        Validator validator = schema.newValidator();
        validator.validate(new DOMSource(doc));
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    private Schema getSchema (String xsdPath) throws Exception {
        assert xsdPath != null : "XML schema path is null.";
        SchemaFactory fact = 
                SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);

        Schema schema;
        try {
            schema = fact.newSchema(new StreamSource(new File(xsdPath)));
        }
        catch (SAXException e) {
            throw new Exception(
                    "Unable to find target schema to validate XML.", e);
        }
        return schema;
    } 
```

xml 和 xsd 文件是：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://www.randomthing.com"
            xmlns="http://www.randomthing.com"
            elementFormDefault="qualified">

    <xsd:element name="Applications">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="Application" minOccurs="0" maxOccurs="unbounded"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

    <xsd:element name="Application">
        <xsd:annotation>
            <xsd:documentation>
             blah
            </xsd:documentation>
        </xsd:annotation>
       <xsd:complexType>
            <xsd:attribute name="id" type="xsd:long" use="required"/>
            <xsd:attribute name="name" type="xsd:string" use="required"/>
            <xsd:attribute name="order" type="xsd:long" use="required"/>
        </xsd:complexType>    
    </xsd:element>
</xsd:schema>  

<?xml version="1.0" encoding="UTF-8"?>
<Applications xmlns ="http://www.randomthing.com"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.randomthing.com testSchema.xsd">

    <Application id="3" name="Blah" order="2">
    </Application>
</Applications> 
```

将不胜感激任何指针！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:34:48.357

您应该使用名称空间解析文档，您在加载时会丢失它们。

```
dbFactory.setNamespaceAware(true); 
```

# jquery - jQuery fadeOut() 在特定情况下没有动画。解决方法？

> ID：11024550
> 
> 赞同：0
> 
> 时间：2012-06-13T23:01:51.797
> 
> 标签：jquery

我遇到了 jQuery fadeOut() 没有按预期工作的情况。我的测试用例是 Facebook 个人资料主页，在 items of class 上`text`。我通过用户脚本执行此操作，但我的测试用例仅在控制台中运行（我已使用[userscript](http://erikvold.com/blog/index.cfm/2010/6/14/using-jquery-with-a-user-script)将 jQuery 加载到页面中，但您可以使用您最喜欢的方法（将其粘贴、[jqueryify](https://chrome.google.com/webstore/detail/gbmifchmngifmadobkcpijhhldeeelkc) for chrome 等） ）。

这是一个演示电影：[http](http://www.youtube.com/watch?v=Fsh5nQY8n4k) ://www.youtube.com/watch?v=Fsh5nQY8n4k 。电影在 Chrome 上显示了问题，但我在 Firefox 和 Safari（所有 OSX）上得到了类似的行为。

我在这里使用的代码行是：`$('.text').fadeOut();`和`$('.text').fadeIn();`

我尝试了一些解决方法，例如直接为不透明度设置动画，首先为一些淡入淡出设置动画，然后使用回调设置其余部分的动画，首先为项目设置 z-index 等。我还尝试打开[webkit 抗锯齿，一个Chrome 中另一个 jquery 动画错误的解决方法](https://stackoverflow.com/questions/10856728/end-of-jquery-fadein-has-a-bump-in-chrome)。没有任何区别。

我猜 Facebook 是如何对这些元素进行编码的，因为我无法用 jsfiddle（？）

有什么想法可以让该文本按预期淡出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T08:41:54.490

检查要淡入/淡出的元素，是否有过渡？如果是，淡入/淡出将不起作用。

这解决了我的问题，可能会有所帮助。

# image - Qt QScrollBar setValue() 方法不起作用

> ID：11024551
> 
> 赞同：0
> 
> 时间：2012-06-13T23:01:52.867
> 
> 标签：image, qt, setvalue

我正在实现基于图像查看*器示例*的图像查看器（[http://doc.trolltech.com/4.7-snapshot/widgets-imageviewer.html](http://doc.trolltech.com/4.7-snapshot/widgets-imageviewer.html)）

但我正在使用界面的设计模式。

~~**QScrollBar**~~ **QScrollArea**内的**QLabel**。图像出现了，但是当我放大时，条形图永远不会出现。

 ****我从每个滚动条中发现了*setValue* () 方法 - 在*adjustScrollBar* () 方法中使用 - 从不修改其值（它始终为 0）。如果该值大于 0，则会出现条形。在原始示例中，确实如此。

我在 UI 设计师中缺少什么？谢谢。****

# node.js - 使用 node-imagemagick 来“裁剪”上传到 S3 的图像

> ID：11024554
> 
> 赞同：1
> 
> 时间：2012-06-13T23:02:07.180
> 
> 标签：node.js, amazon-s3, imagemagick, node-imagemagick

我正在构建允许用户上传图像，然后将其裁剪为正方形的功能（用于个人资料图片等......）

目前，该过程的工作方式如下：

*   用户从高清中选择图像
*   图片上传到 S3
*   S3 路径发送回视图，并显示带有 jCrop 的图像
*   单击提交按钮时，我的控制器操作获取上面设置的坐标

现在我想将此图像裁剪为给定的坐标（注意-我正在使用[node-imagemagick 的 lpatters 叉子，](http://github.com/lpatters/node-imagemagick/)因为它包含' [offset](https://github.com/lpatters/node-imagemagick/blob/98a83a54a1d9ec67584a4ffa891257d8950a0049/test-crop.js#L13) '

不幸的是，.crop 只接受一个路径——我们没有，因为它现在托管在 S3 上。

有什么解决方法吗？

我看到了[tmp](http://github.com/raszi/node-tmp)，但这可能有点矫枉过正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:36:15.820

如何使用其他一些入口点，例如“调整大小”，然后允许您提供自定义参数？我在这段代码中使用流：[https ://github.com/jeffwilcox/4th-cloud/blob/master/lib/webserver.js#L542](https://github.com/jeffwilcox/4th-cloud/blob/master/lib/webserver.js#L542)

# java - Elasticsearch：java.lang.InternalError：无法连接到窗口服务器

> ID：11024555
> 
> 赞同：2
> 
> 时间：2012-06-13T23:02:08.100
> 
> 标签：java, macos, elasticsearch, apache-tika

试图让 Elasticsearch 运行并为 PDF 编制索引。我对Java不熟悉。它抱怨的窗口服务器是什么，我该如何解决？

```
Jun 13 15:57:23 server.mydomain.com java[22345] <Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.
Exception in thread "elasticsearch[index]-pool-2-thread-1" java.lang.InternalError: Can't connect to window server - not enough permissions.
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1827)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1724)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1045)
    at sun.security.action.LoadLibraryAction.run(LoadLibraryAction.java:50)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.Toolkit.loadLibraries(Toolkit.java:1605)
    at java.awt.Toolkit.<clinit>(Toolkit.java:1627)
    at java.awt.Color.<clinit>(Color.java:263)
    at org.apache.pdfbox.pdmodel.PDPage.<clinit>(PDPage.java:80)
    at org.apache.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:212)
    at org.apache.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:218)
    at org.apache.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:184)
    at org.apache.pdfbox.pdmodel.PDDocumentCatalog.getAllPages(PDDocumentCatalog.java:211)
    at org.apache.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:322)
    at org.apache.tika.parser.pdf.PDF2XHTML.process(PDF2XHTML.java:63)
    at org.apache.tika.parser.pdf.PDFParser.parse(PDFParser.java:140)
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)
    at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)
    at org.elasticsearch.plugin.mapper.attachments.tika.TikaExtended.parseToString(TikaExtended.java:48)
    at org.elasticsearch.index.mapper.attachment.AttachmentMapper.parse(AttachmentMapper.java:309)
    at org.elasticsearch.index.mapper.object.ObjectMapper.serializeValue(ObjectMapper.java:585)
    at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:449)
    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:493)
    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:437)
    at org.elasticsearch.index.shard.service.InternalIndexShard.prepareCreate(InternalIndexShard.java:290)
    at org.elasticsearch.action.index.TransportIndexAction.shardOperationOnPrimary(TransportIndexAction.java:210)
    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:532)
    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:430)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T23:09:55.663

为了能够正确索引 PDF，ElasticSearch 要求 Apache Tika 提取文本。Apache Tika 反过来要求 Apache PDFBox 解析文件以进行处理。由于 PDF 的工作方式，PDFBox 需要使用 Java AWT 调用来执行诸如计算字体、颜色等操作

您的机器当前没有正确设置 Java 来执行图形操作，所以当 PDFBox 尝试使用 AWT 来处理 PDF 时，它会崩溃。

你有两个选择。一个是完成图形设置，另一个是告诉 Java 以无头模式运行。

如果您在谷歌上搜索您的错误消息，那么您会发现很多有关如何为任一选项执行适当的 OSX 设置的有用答案。[这个](http://ernstdehaan.blogspot.co.uk/2008/10/mac-os-x-fonts-and-headless-java.html)看起来是一个很好的例子。与 Java 的大多数 unix 变体一样，如果您使用

```
java -Djava.awt.headless=true 
```

然后它将使用无头模式，并且不会遇到真实图形系统的权限问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T23:08:17.377

这是您的应用程序尝试在无头环境中使用 AWT 的结果。

要修复它，请使用告诉 AWT 使用无头模式的选项启动您的应用程序。

```
-Djava.awt.headless=true 
```

# android - 无法让 sqlite 数据库正常工作？

> ID：11024558
> 
> 赞同：0
> 
> 时间：2012-06-13T23:02:26.957
> 
> 标签：android, sqlite

我有一个工作表（一个名为 DATABASE_CREATE1），该表仍然工作，但是当我尝试将数据插入第二个表时，我得到了这个错误，不知道如何修复它尝试了很长时间关于如何修复它，但没有任何想法：

```
06-13 23:56:21.179: E/Database(8840): android.database.sqlite.SQLiteException: table quick_mute has no column named row_id_quick_mute: , while compiling: INSERT INTO quick_mute(row_id_quick_mute, alarm_id) VALUES(?, ?);
06-13 23:56:21.179: E/Database(8840):   at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
06-13 23:56:21.179: E/Database(8840):   at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
06-13 23:56:21.179: E/Database(8840):   at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
06-13 23:56:21.179: E/Database(8840):   at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
06-13 23:56:21.179: E/Database(8840):   at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
06-13 23:56:21.179: E/Database(8840):   at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
06-13 23:56:21.179: E/Database(8840):   at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1569)
06-13 23:56:21.179: E/Database(8840):   at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
06-13 23:56:21.179: E/Database(8840):   at com.seanoneill.android.SilentPhone.DatabaseStore.createQuickMuteEntry(DatabaseStore.java:316)
06-13 23:56:21.179: E/Database(8840):   at com.seanoneill.android.SilentPhone.HoldsEverything$1.onClick(HoldsEverything.java:163)
06-13 23:56:21.179: E/Database(8840):   at android.view.View.performClick(View.java:2485)
06-13 23:56:21.179: E/Database(8840):   at android.view.View$PerformClick.run(View.java:9080)
06-13 23:56:21.179: E/Database(8840):   at android.os.Handler.handleCallback(Handler.java:587)
06-13 23:56:21.179: E/Database(8840):   at android.os.Handler.dispatchMessage(Handler.java:92)
06-13 23:56:21.179: E/Database(8840):   at android.os.Looper.loop(Looper.java:123)
06-13 23:56:21.179: E/Database(8840):   at android.app.ActivityThread.main(ActivityThread.java:3729)
06-13 23:56:21.179: E/Database(8840):   at java.lang.reflect.Method.invokeNative(Native Method)
06-13 23:56:21.179: E/Database(8840):   at java.lang.reflect.Method.invoke(Method.java:507)
06-13 23:56:21.179: E/Database(8840):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
06-13 23:56:21.179: E/Database(8840):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
06-13 23:56:21.179: E/Database(8840):   at dalvik.system.NativeStart.main(Native Method) 
```

代码：

```
private static final String DATABASE_CREATE =
    "create table " + DATABASE_TABLE_QUICK + " ("
    + kEY_ROWID_QUICK_MUTE + "text not null, "
    + END_TIME_QUICK  + " text not null,"
    + ALARM_ID_QUICK + " text not null );";

private static final String DATABASE_CREATE1=
    "create table " + DATABASE_TABLE + " ("
    + kEY_ROWID + " integer primary key autoincrement, "
    + END_KEY_TIME  + " text not null,"
    + START_TIME_12_HOUR  + " text not null,"
    + END_TIME_12_HOUR  + " text not null,"
    + COVERT_DAYS + " text not null,"
    + KEY_STATE  + " text not null,"
    + MUTE_TITLE + " text not null, "
    + ALARM_MODE + " text not null, "
    +ALARM_ID+ " text not null,"
    + START_KEY_TIME  + " text not null  );"; 
```

创建数据库

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(DATABASE_CREATE);
    db.execSQL(DATABASE_CREATE1);
} 
```

这是插入数据库的代码

```
public void createQuickMuteEntry(String endTime, String alarmid) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(kEY_ROWID_QUICK_MUTE, endTime ); /
    initialValues.put(ALARM_ID, alarmid);
    databaseConnect.insert(DATABASE_TABLE_QUICK, null, initialValues);
} 
```

插入语句

```
getDatabaseInfo.createQuickMuteEntry("dfdf", "dfdf"); 
```

update: //快速静音

```
public static final String END_TIME_QUICK = "quick_mute_end_time"; 
public static final String ALARM_ID_QUICK = "quick_mute_id";
public static final String kEY_ROWID_QUICK_MUTE = "row_id_quick_mute"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:04:01.343

从错误消息中：

```
SQLiteException: table quick_mute has no column named row_id_quick_mute: , while compiling: INSERT INTO quick_mute(row_id_quick_mute, alarm_id) VALUES(?, ?); 
```

你错过了专栏：

```
row_id_quick_mute 
```

在表中

```
quick_mute 
```

经过进一步检查，这是由`CREATE`语法错误引起的。

看看这段代码：

```
private static final String DATABASE_CREATE =
    "create table " + DATABASE_TABLE_QUICK + " ("
    + kEY_ROWID_QUICK_MUTE + "text not null, "
    + END_TIME_QUICK  + " text not null,"
    + ALARM_ID_QUICK + " text not null );"; 
```

您应该注意到在这一行：

```
+ kEY_ROWID_QUICK_MUTE + "text not null, " 
```

该`text`部分就在 旁边`"`，中间没有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:18:05.883

`text`尝试在...之前放置一个空格

```
kEY_ROWID_QUICK_MUTE + "text not null, " 
```

# iphone - 触摸不显示突出显示，点击GestureRecognizer

> ID：11024559
> 
> 赞同：1
> 
> 时间：2012-06-13T23:02:37.240
> 
> 标签：iphone, ios, xcode, cocoa-touch

我有一堆按钮，它们链接了一个 tapGestureRecognizer，这会执行适当的操作。

由于我有这么多按钮，我不想通过 IBAction 手动链接它们。

现在我收到的问题是它没有立即显示showsTouchOnHighlight。我不知道如何解决这个问题，这是我使用的代码：

```
- (void)tapPress:(UITapGestureRecognizer *)sender {

    UIButton *resultButton = (UIButton *)sender.view;

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" 
                                                         bundle:[NSBundle bundleForClass:[self class]]];
    infoView *infoViewController = [storyboard instantiateViewControllerWithIdentifier:resultButton.currentTitle];
    infoViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentViewController:infoViewController 
                       animated:YES 
                     completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:02:31.550

`addTarget:action:forControlEvents:`尝试使用该方法为每个按钮设置目标和操作，而不是使用轻击手势识别器。这应该可以节省您连接笔尖中每个按钮的劳力。

# php - 致命错误：未找到类 'mysqli'

> ID：11024561
> 
> 赞同：3
> 
> 时间：2012-06-13T23:02:51.127
> 
> 标签：php, mysqli, centos

我在我的 centos/WHM 服务器上执行此操作：

```
<?
if (!function_exists('mysqli_init') && !extension_loaded('mysqli')) {
    echo 'We don\'t have mysqli!!!';
} else {
    echo 'Phew we have it!';
}
?> 
```

结果是：`We don't have mysqli!!!`

我的问题是：

> 致命错误：在第 18 行的 /home/photosdr/public_html/includes/database.php 中找不到类 'mysqli'

那么我该如何安装呢？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T23:15:11.353

尝试`extension=php_mysqli.so`在您的`php.ini`评论中查找并删除它前面的评论。

# javascript - 上次保存值的 Jquery UI 滑块句柄

> ID：11024567
> 
> 赞同：0
> 
> 时间：2012-06-13T23:03:39.707
> 
> 标签：javascript, jquery, html, css

如何将句柄设置为从上次保存的值开始？由于某种原因，它总是在最后一个位置。我正在使用数据库中的值设置我的起始位置和最大值，但这是一个工作示例：

[http://jsfiddle.net/hcKwQ/](http://jsfiddle.net/hcKwQ/)幻灯片应该从 5 开始，而不是最大值 10。请帮助我不知道我做错了什么。

**脚本：**

```
$(function() {
    $( "#slider" ).slider({
        range: "min",
        value: $("input[name='shirts']").val(),
        min: 1,
        max: $("input[name='max_shirts']").val(),
        step: 1,
        slide: function( event, ui ) {
            $( "#amount" ).text( ui.value );
        },
        stop: function( event, ui ) {
            $( "#shirts" ).val( ui.value );
        }
    });
}); 
```

**HTML：**

```
<div id="slider"></div>
<div class="amount" id="amount"></div>

<input type="hidden" name="shirts" value="<?php echo $shirts; ?>" id="shirts">

<input type="hidden" name="max_shirts" value="<?php echo $max_shirts; ?>" id="max_shirts"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:09:03.663

将值选项更改为：

`value: parseInt($("input[name='shirts']").val()),`

这是一个完整的演示：http: [//jsfiddle.net/lucuma/hcKwQ/1/](http://jsfiddle.net/lucuma/hcKwQ/1/)

该插件需要一个数字，因此您需要对其进行解析..

[http://jqueryui.com/demos/slider/#option-value](http://jqueryui.com/demos/slider/#option-value)

# c# - C# 泛型和泛型约束

> ID：11024572
> 
> 赞同：3
> 
> 时间：2012-06-13T23:04:15.910
> 
> 标签：c#, inheritance, generics, generic-constraints, generic-function

我正在编写一个带有类型参数 T 的通用抽象类 A，我打算用类 B 派生它。

A 有一个数据成员 mX，它是类 C 的一个实例，带有一个通用函数。这个通用函数 GetAllOfType() 有一个类型参数 T。这个类型参数被限制到第三个类 D。GetAllOfType() 搜索 D 实例的容器，其中包括 D 的派生类的实例，并返回T 类型的子集（因此对 D 的约束）。

D 类本身没有特定的数据成员 int mY，但 D 的某些派生类有，例如 E 和 F。

```
public class D
{
}

public class E : D
{
    public int mY;
}

public class F : D
{
    public int mY;
}

public class C
{
    public T[] GetAllOfType<T>() where T : D
    { ... }
}

public class A<T>
{
    private C mX;
    ...
}

public class B : A<E>
{
    ...
} 
```

所以这是我的问题开始的地方：

B 类用于继承和实现 A 类的参数类型是 D 的派生类。我正在尝试在 A 类中编写一个函数 Foo，该函数通过 GetAllOfType() 枚举并访问 E、F 或任何其他类型的成员 mY有一个 myY 的成员。

```
public class A<T>
{
    private C mX;

    protected Foo()
    {
        foreach (var c in mX.GetAllOfType<T>())
        {
            c.mY = 0;
        }
    }
}

public class B : A<E>
{
    public Bar()
    {
        Foo();
    }
} 
```

但是，问题是 GetAllOfType() 受到约束，并且我也因未约束 A 类而收到错误消息。

我试过像这样约束 A ：

```
public class A<T> where T : D 
```

但是我遇到了编译时错误：

> 键入`T' does not contain a definition for`mY' 并且找不到扩展方法`mY' of type`T'（您是否缺少 using 指令或程序集引用？）

我还尝试限制到多个派生类：

```
public class A<T> where T : E, F 
```

但是我也遇到了以下错误：

> 类类型约束“F”必须列在任何其他约束之前。考虑将类型约束移动到约束列表的开头

我试过切换它们：

```
public class A<T> where T : F, E 
```

同样，结果是相同的错误，但将 F 切换为 E。

我正在尝试的可能吗？我究竟做错了什么？

同样，我无法更改 C、D、E 和 F 类的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:38:45.257

在 A 的泛型参数上添加约束时，

```
public class A<T> where T : D 
```

不出所料，出现第二个错误的原因`Type T' does not contain a definition for mY' and no extension method mY' of typeT' could be found (are you missing a using directive or an assembly reference?)`是因为 D 没有 mY，只有派生类 E 和 F。原因

```
public class A<T> where T : E, F 
```

不起作用是因为您只能指定一个基类类型约束（C# 没有多重继承）。任何进一步的约束都必须是接口，或者类似的`class`东西`new()`

如果您真的无法更改这些课程的任何内容，那么据我所知，您要完成的工作可能会非常困难。我可以想到一些丑陋的方式（反射，或大量的铸造），但这不是正确的道路。也许我缺少一些聪明的东西。如果您可以引入具有 mY 属性的接口（或中间类），并让 E 和 F 从中继承，那就太好了。然后，您可以将 T 限制在此范围内，而不是`D`一切都将是 honkey dory。否则，除了运行时，我看不到任何方法可以知道`D`您正在处理哪种类型。

# android - 在android listview中定位

> ID：11024577
> 
> 赞同：0
> 
> 时间：2012-06-13T23:04:57.360
> 
> 标签：android, listview, android-intent

我在 android listview 中定位时遇到了一些问题，下一个活动没有加载，而它们都在清单中。

这是我的代码：

```
package com.WNF;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Actiemenu extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // storing string resources into Array
    String[] actiemenu = getResources().getStringArray(R.array.actiemenu);

    // Binding resources Array to ListAdapter
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.actiemenu, R.id.label,     actiemenu));

    ListView lv = getListView();

    // listening to single list item on click
    lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {

            switch(position) {
            case '0' :            
                Intent intent = new Intent(Actiemenu.this, Acties.class);
                intent.putExtra("extras", position);
                startActivity(intent);
                break;
            case '1' :            
                Intent intent2 = new Intent(Actiemenu.this, Acties2.class);
                intent2.putExtra("extras", position);
                startActivity(intent2);
                break;
        }

      }
    });

}
} 
```

接收意图的代码也存在于 Acties 中

```
package com.WNF;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;

public class Acties extends Activity{
// aanroepen van een bundle, kan je elke naam geven die je maar wilt, 
//zolang de bundle als de onCreate maar dezelfde naam hebben
@Override  
public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        // de setContentView is niets meer dan de gegevens van de
//View ophalen uit de R.layout.naamvandeXML
        // Onthoud goed dat je dezelfde XMLs voor meerdere pagina's 
//kan gebruiken.
        setContentView(R.layout.acties1);

        Intent i = getIntent();
        i.getStringExtra("extras");
   }
} 
```

谁能看到我做错了什么？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:06:57.983

您的 switch 语句错误地尝试将*整数*位置值与*ASCII 字符* `'0'`和`'1'`. 由于 的 ASCII 值为`'0'`48，而 的 ASCII 值为`'1'`49，因此单击前两个列表项时没有任何反应。

您应该消除单引号并简单地使用整数：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

    switch(position) {
    case 0: //Instead of '0' 
        Intent intent = new Intent(Actiemenu.this, Acties.class);
        intent.putExtra("extras", position);
        startActivity(intent);
        break;
    case 1: //Instead of '1'
        Intent intent2 = new Intent(Actiemenu.this, Acties2.class);
        intent2.putExtra("extras", position);
        startActivity(intent2);
        break;
} 
```

# asp.net - ASP Response.Flush() 刷新部分数据

> ID：11024580
> 
> 赞同：3
> 
> 时间：2012-06-13T23:05:27.397
> 
> 标签：asp.net, iis, flush

我正在开发一个带有 ASP 服务器端的 Web 应用程序，并且我使用 iframe 进行数据推送。

一个 ASP 处理程序会每隔一段时间将一些 javascript 刷新到 iframe：

```
context.Response.Write("<script language='javascript'>top.update('lala');</script>");
context.Response.Flush(); 
```

我的问题是有时，当我收到数据时，我没有得到全文。例如，我会收到这样的信息：`<script language='javascript'>update('lala');</` 不幸的是，如果在下一秒左右没有其他数据出现，这会阻止执行 javascript 代码。

我的一种解决方法是每 500 毫秒有一个线程刷新'...​​....'。（然后我会收到`script>......`这将完成我的 javascript。）

但是我确信必须有办法让 Response.Flush() 发送整个数据块。有人知道如何正确使用 Response.Flush() 吗？

谢谢！

查尔斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:55:04.887

我的一位同事发现了这个问题。IIS 上启用了 Gzip 压缩，这会阻止 Web 浏览器获取完整的数据块。

在解决方案中：

**禁用所有网站的压缩：**

对于 IIS 5.1，请转到`Control Panel/Administrative Tools/Internet Information Services`. 右键单击`Web Sites`，单击`properties`并删除 ISAPI 过滤器`Compression`。

对于 IIS 7，请转到`My Documents/IISExpress/config/applicationHost.config`并更改部分`httpCompression`，以便不为您的特定页面启用压缩。

**仅为您的网站禁用压缩：**

在您的应用程序文件中，在 部分下`web.config`添加行。`<urlCompression doStaticCompression="true" doDynamicCompression="false"/>``<system.webServer>`

**禁用特定网页或特定请求的压缩**

这些好人找到了一种方法：

[可以在 ASP.NET/IIS 7 中选择性地禁用 gzip 压缩吗？](https://stackoverflow.com/questions/5656332/can-gzip-compression-be-selectively-disabled-in-asp-net-iis-7?lq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T06:05:39.200

如果您使用高达 3 的 gzip 压缩比，IIS 将提供分块页面。并且gzip比3和9没有显着差异。[看IIS压缩比测试](http://weblogs.asp.net/owscott/archive/2009/02/22/iis-7-compression-good-bad-how-much.aspx)

# jquery - jQuery：仍然作用于旧选择的函数

> ID：11024581
> 
> 赞同：0
> 
> 时间：2012-06-13T23:05:29.593
> 
> 标签：jquery, animation, selection

我有一个作用于选择的函数（通过参数“sel”传递）：当我将鼠标悬停在选择中的项目上时，同一选择中的另一个元素（“.extLink”）被动画化。功能是：

```
function animo(sel) { 
    sel.hover(      
        function () {       
            $('.extLink').stop().animate({right: '-5px'}, 'fast');      
        },          
        function () {       
            $('.extLink').stop().animate({right: '0'}, 'fast');         
        }       
    );  
} 
```

通过单击页面的某些元素来更改选择。但是碰巧的是，尽管选择正确地改变了，但即使在以前选择的部分项目上，该功能也继续工作，即当我传递这些项目时，.extLink 也是动画的。

我做了一些测试，发现选择正确。因此，这种行为的原因可能是什么？我做错了什么？

该函数作用的 HTML 如下（从 DOM 中提取）：

```
<ul>
<li class="ref-1">310 Raccolte di statistiche generali</li>
<li class="ref-1">320 Scienza politica</li>
<li class="ref-2 attivo">330 Economia </li>
<li class="ref-2 attivo">340 Diritto
    <div class="quadri">
        <ul>
            <li>328 Il processo legislativo</li>
            <li>330 Economia</li>
            <li>340 Diritto</li>
        </ul>
        <a class="extLink" href="http://www...">...</a>
    </div>
</li>
<li class="ref-3">350 Amministrazione pubblica; arte militare</li>
<li class="ref-3">360 Problemi e servizi sociali; associazioni</li>
</ul> 
```

它的工作原理如下：

*   单击页面的 X 元素（其他位置），将类“attivo”添加到 li.ref-x（在示例中为 li.ref-2）；
*   同时，将 div.quadri 从其在页面中的原始位置克隆并附加到最​​后的 li.attivo；
*   在 div.quadri 里面有一个.extLink；
*   我传递给 animo() 函数的选择是 li.attivo，所以当我在 li.attivo 元素上移动鼠标（因此也在 div.quadri 上）时，a.extLink 是动画的。

这一切都很好，问题来了：

*   当我单击页面的 Y 元素时，将类“attivo”添加到 li.ref-y（例如 li.ref-3）并从 li.ref-x 中删除，然后从 li 中删除 div.quadri。 ref-x 和一个不同的 div.quadri 被克隆到 li.ref-y 中；
*   现在，当我不仅在 li.ref-y（即 li.attivo）上而且在 li.ref-x 上移动鼠标时，a.extLink 会被动画化，尽管它们不再具有“attivo”类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:47:36.370

`attivo`在您选择元素并在其上注册事件侦听器后从元素中删除类不会阻止侦听器被调用，并且您的侦听器仅根据类名`extLink`而不是上下文执行动画。尝试以下方法之一：

# 从先前的选择中删除侦听器

```
var previous_sel = $();

function animo( sel ) { 

  // Assumes jQuery 1.7

  previous_sel.off( "mouseenter mouseleave" );

  previous_sel = sel;

  // ... rest of your current function

} 
```

# 使用委托注册

这只会调用在`attivo`事件发生时具有类的元素的侦听器。

```
function animo() {

  // Use appropriate selector to get the relevant UL

  var ul = $( "ul" );

  var selector = "li.attivo";

  ul.on( "mouseenter", selector, function () {       

    ul.find( selector + ' .extLink' ).stop().animate(

      { right : '-5px' }, 'fast'

    );      

  } );

  ul.on( "mouseleave", selector, function () {       

    ul.find( selector + ' .extLink' ).stop().animate(

      { right : '0' }, 'fast'

    );     

  } );

}
// animo 
```

# 限制上下文

将上下文限制在`extLink`s 内`sel`。

```
function animo( sel ) { 

  sel.hover(      

    function () {       

      sel.find( '.extLink' ).stop().animate( { right : '-5px' }, 'fast' );      

    },          

    function () {       

      sel.find( '.extLink' ).stop().animate( { right : '0' }, 'fast' );         

    }       

  );  

} 
```

# bash - 重新定义变量的makefile中的条件？

> ID：11024587
> 
> 赞同：4
> 
> 时间：2012-06-13T23:05:51.170
> 
> 标签：bash, unix, build, makefile, sh

我的 makefile 中有一个变量，我想`unset`重新定义或重新定义，以便 target `a`，`b`并在各自的 makefile`c`中使用正确的值`MY_VARIABLE`（或根本没有）。

如果我运行`make foo`以下内容：

```
export MY_VARIABLE := 'false'
foo: prep_foo dist
prep_foo:
    $(shell export MY_VARIABLE='true')
    echo ${MY_VARIABLE}
dist: a b c
a: 
    make -C a/src
b: 
    make -C b/src
c: 
    make -C c/src 
```

我得到这个输出：

```
export MY_VARIABLE='true'
echo 'false'
false
... 
```

相反，如果我`make foo`使用以下 makefile 运行：

```
export MY_VARIABLE := 'false'
foo: prep_foo dist
prep_foo:
    $(shell unset MY_VARIABLE)
    echo ${MY_VARIABLE}
dist: a b c
a: 
    make -C a/src
b: 
    make -C b/src
c: 
    make -C c/src 
```

我得到以下输出：

```
make: unset: No such file or directory
echo 'false'
false
... 
```

`MY_VARIABLE`指定目标时如何取消设置或重新定义（例如`foo`，在这种情况下）？

**编辑**

这是我想避免的情况：

```
dist: a b c 
foo: a_foo b_foo c_foo
a:
    make -C a/src
...
a_foo
    make -C a_foo/src 
```

我只希望`a`目标对我的特定变量使用不同的值，以便在该目标的 makefile 中以不同方式处理编译。

此外，它看起来不像我可以`export`或`unset`目标内的变量。例如：

```
dist: a b c 
foo: a_foo b_foo c_foo
a:
    make -C a/src
...
a_foo:
    export MY_VARIABLE='true'; make -C a/src 
```

如果我尝试这样做，我会得到类似于以下错误的内容`export MY_VARIABLE='true'`（如果我尝试使用类似`unset`）：

```
Makefile:16: *** unterminated variable reference.  Stop. 
```

这是否有助于澄清我正在尝试做的事情？

**编辑 2**

我尝试了一个`touch`-es 文件并尝试运行子目标的目标`makefile`（检查文件是否存在）：

```
foo: prep_foo
prep_foo:
    touch a/src/.foo
    make -C a/src 
```

当我尝试通过 运行它时`make foo`，我收到以下错误：

```
Makefile:14: *** commands commence before first target.  Stop. 
```

如果我从中删除`make`语句`prep_foo`，那么我可以`touch`在没有收到错误消息的情况下创建文件，但我无法触发创建`a`目标，所以这似乎没有帮助。

以下产生相同的`commands commence before first target`错误消息：

```
foo: prep_foo a
prep_foo:
    touch a/src/.foo 
```

是否有使用`touch`将状态传达给子目标的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:54:43.427

Makefile 中目标之间通信的常用方法是通过文件。只是`touch`一个目标中的一个文件并在另一个目标中检查它。这可以帮助您解决问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:14:54.323

不要忘记，每一个 shell 执行`make`都是在一个新进程中完成的。试图摆弄像这样的配方的环境变量并没有多大意义——您在任何给定行中修改的环境在该 shell 死后、下一行执行之前就*消失了。*

您也许可以像这样完成这项工作：

```
a:
    unset MY_VARIABLE; $MAKE -C a/src 
```

或者

```
a:
    $MAKE MY_VARIABLE=foo -C a/src 
```

# java - 在java中使用RandomAccessFile的不完整文件

> ID：11024588
> 
> 赞同：0
> 
> 时间：2012-06-13T23:05:54.523
> 
> 标签：java, file, corruption

我做了一个小程序来下载数据并将其写入文件。

这是代码：

```
public void run()
{

    byte[] bytes = new byte[1024];
    int bytes_read;

    URLConnection urlc = null;
    RandomAccessFile raf = null;
    InputStream i = null;

    try
    {
         raf = new RandomAccessFile("file1", "rw");
    }
    catch(Exception e)
    {
        e.printStackTrace();
        return;
    }

    try
    {
         urlc =  new URL(link).openConnection();
         i = urlc.getInputStream();
    }
    catch(Exception e)
    {
        e.printStackTrace();
        return;
    }

    while(canDownload())
    {
        try
        {
            bytes_read = i.read(bytes);
        }
        catch(Exception e)
        {
            e.printStackTrace();
            return;
        }

        if(bytes_read != -1)
        {
            try
            {
                raf.write(bytes, 0, bytes_read);
            }
            catch(Exception e)
            {
                e.printStackTrace();
                return;
            }
        }
        else
        {
            try
            {
                i.close();
                raf.close();
                return;
            }
            catch(Exception e)
            {
                e.printStackTrace();
                return;
            }
        }
    }
} 
```

问题是当我下载大文件时，文件末尾缺少几个字节。我尝试将字节数组大小改为2K，问题就解决了。但是当我下载一个更大的文件 (500 MB) 时，我又丢失了几个字节。我说“好吧，让我们试试 4K 尺寸”。我将字节数组大小更改为 4K。有效！很好，但是后来我下载了一个 4 GB 的文件，最后我又丢失了字节！我说“酷，让我们试试 8K 尺寸”。然后我将字节数组大小更改为 8K。工作。

我的第一个问题是：为什么会这样？（当我更改缓冲区大小时，文件不会损坏）。

好的，理论上，文件损坏问题可以通过将字节数组大小更改为更大的值来解决。但是还有另一个问题：如何测量大字节数组大小的下载速度（以一秒为间隔）？

例如：假设我的下载速度是 2 KB/s。字节数组大小为 4 K。我的第二个问题是：如果线程必须等待字节数组填满，我如何测量速度（以一秒为间隔）？我的答案应该是：将字节数组大小更改为更小的值。但是文件会损坏xD。

在尝试自己解决问题后，我花了 2 天时间在互联网上搜索解决方案。没事了。

请问各位大大能回答我的两个问题吗？谢谢=D

**编辑**

canDownload() 的代码：

```
synchronized private boolean canDownload()
{
    return can_download;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:55:29.947

我的建议是使用经过验证的库，例如[Apache Commons IO](http://commons.apache.org/io/)，而不是尝试编写自己的代码。对于您的特定问题，请查看[copyURLToFile(URL, File)](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyURLToFile%28java.net.URL,%20java.io.File%29)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:56:28.740

我会：

1.  将 RandomAccessFile 更改为 FileOutputStream。

2.  摆脱`canDownload()`，无论它是为了什么，而是在连接上设置读取超时。

3.  将复制循环简化为：

    while ((bytes_read = i.read(bytes)) > 0) { out.write(bytes, 0, bytes_read); } out.close(); 我关上（）;

与此循环*之外*的所有异常处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T03:18:57.060

我认为您会发现问题在于您关闭了底层 InputStream 而 RandomAccessFile 仍然在其写入缓冲区中有数据。这就是您偶尔会丢失最后几个字节数据的原因。

竞争条件介于 JVM 刷新最终写入和您对 i.close() 的调用之间。

删除 i.close() 应该可以解决问题；这不是必需的，因为 raf.close() 无论如何都会关闭底层流，但是这样您就可以让 RAF 有机会在它这样做之前刷新任何未完成的缓冲区。

# android - 旋转图像onclick问题

> ID：11024591
> 
> 赞同：0
> 
> 时间：2012-06-13T23:05:57.097
> 
> 标签：android, image, onclick, rotation

我仍在处理一段代码，我想使用按钮顺时针和逆时针旋转图像，我尝试了以下代码：

```
case (R.id.clock):
            matrix.postRotate(90);
            matrix.postRotate(getDegreesFromRadians(angle), mid.x, mid.y);

        break;

        case (R.id.anticlock):
            float degrees = 0;
            degrees = degrees-10;
            matrix.postRotate(degrees); 
            break; 
```

它正在工作但不是正确的方式，首先我必须按下按钮然后单击 imageview 来旋转图像。有什么帮助吗？

我在这里也问过这个问题[Android Rotate image ontouch](https://stackoverflow.com/questions/11003125/android-rotate-image-ontouch) 但现在我想使用按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:13:13.820

这是我通常做的。我用这个方法创建了静态 Util 类：

```
public static Bitmap rotate(Bitmap bitmap, int degree) {
    int w = bitmap.getWidth();
    int h = bitmap.getHeight();

    Matrix mtx = new Matrix();
    mtx.postRotate(degree);

  return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
} 
```

然后，我像这样使用它：

```
case 21: // ROTATE LEFT
    ImageProcessActivity.processedBitmap = ImageUtil.rotate(ImageProcessActivity.processedBitmap, -90);
    d = new BitmapDrawable(ImageProcessActivity.processedBitmap);
    ImageProcessActivity.selectedImage.setImageDrawable(d);

break;
case 22: // ROTATE RIGHT
    ImageProcessActivity.processedBitmap = ImageUtil.rotate(ImageProcessActivity.processedBitmap, 90);
    d = new BitmapDrawable(ImageProcessActivity.processedBitmap);
    ImageProcessActivity.selectedImage.setImageDrawable(d);
break; 
```

你看，在我的代码中，我将正在显示的图像与 ImageView 分开。这样，我可以轻松地操作图像而无需 ImageView 的麻烦。ImageView，顾名思义，仅用于查看图像。不是操纵的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:14:38.700

您必须通知您的视图已更改，以便 android 重新渲染它。视图不是 frameRate 渲染的，所以在更改矩阵后这样做：

```
yourView.invalidate(); 
```

应该管用

# java - 如何使 java 库对 clojure 可见？

> ID：11024595
> 
> 赞同：2
> 
> 时间：2012-06-13T23:06:36.393
> 
> 标签：java, clojure, jvm

最终，我希望以下工作

```
(ns grizzler.core
  (:import (com.sun.grizzly.http.embed GrizzlyWebServer)
           (com.sun.grizzly.tcp.http11 GrizzlyAdapter))) 
```

但是，我不知道该怎么做。我是否将东西添加到我的类路径中？我在哪里修改我的类路径，在我的 .bashrc 中还是在 clojure 中？

我在[http://grizzly.java.net/](http://grizzly.java.net/)找到了 grizzly 项目。但是我要下载什么？我如何安装东西？我真的不知道该怎么办。

相关：[使用带有 clojure 的 com.jcraft.jsch 之类的 3rd 方 java 库](https://stackoverflow.com/questions/3327176/using-3rd-party-java-libraries-like-com-jcraft-jsch-with-clojure)- 除了它对我来说不够详细:(

**编辑：**我还在 project.clj 中尝试了以下操作，但没有成功：

```
(defproject grizzler "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [com.sun.grizzly.http.core "2.1.10"]
                 [com.sun.grizzly.http.embed "2.1.10"]
                 [com.sun.grizzly.tcp.http11 "2.1.10"]]) 
```

此外，我尝试了 net.java.grizzly.http.core ，但也没有用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:14:24.550

目前关于“正确”的做法的共识基本上是“使用 leiningen”。Leiningen 基本上是 maven 的包装器，并使用 maven 存储库。大多数情况下，您可以在某个 maven 存储库中找到所需的代码，但最终您会遇到需要使用 jar 文件的情况。在这种情况下，您**将 jar 文件安装到本地 maven 存储库**中，该存储库位于您的主目录中，并包含构建所有项目所需的所有 jar 的副本。如果您依赖的 jar 可从中央存储库获得，则此本地存储库充当缓存，因此您不必每次都下载它们，但如果无法自动下载，您可以手动将 jar 放入本地存储库他们。

我建议先看这个[视频](http://www.wonderhowto.com/how-to-use-leiningen-clojure-build-system-380696/)。

*   仔细检查您需要的库是否已经可用
*   下载你想要的jar
*   [下载莱宁根](https://github.com/technomancy/leiningen)
*   跑`lein new nameOfYourProject`
*   将其添加到您的 leiningen 项目`project.clj`
*   跑`lein deps`
    *   这将打印将 jar 文件安装到本地 maven 存储库的完整命令
    *   运行此命令（由 leiningen 打印），您的 jar 文件应复制到 ~/.m2/... 下的正确位置
    *   再次运行`lein deps`以确保它找到它
*   在 .clj 文件中添加一条`import`语句（如上所示）
*   成功！

调试此过程可能非常具体，但#clojure 的居民通常很有帮助。

# php - 使用 $.get() 从 PHP 导入数组的问题

> ID：11024596
> 
> 赞同：0
> 
> 时间：2012-06-13T23:06:42.417
> 
> 标签：php, jquery, json, get

打印时数组值返回为“未定义”，即使通过使用`print_r($items)`我可以看到数组不为空。这里可能是什么问题？

MySQL：

名为“nights”的表，列名为“name”、“price”、“day”、“queue jump”、“closures”和“doors”。他们都是人口稠密的。

事件信息.php：

```
<?php

header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

include('functions.php');
connect();

$night = $_POST['club'];
// this echos fine
$night = mysql_real_escape_string($night);

$query = "SELECT * FROM nights WHERE name = '$night'";

    $result = mysql_query($query);
    $items = array();

    if($result && mysql_num_rows($result) > 0) { 
        while ($row = mysql_fetch_array($result)) { 
        $items[] = array("price"=>$row['price'], "day"=>$row['day'], "queue jump"=>$row['queue jump'], "closing"=>$row['closing'], "doors"=>$row['doors']);
        }
    } 

    mysql_close(); 
    // convert into JSON format and print

    echo json_encode($items);
?> 
```

JS：

```
<script type="text/javascript">

    $(document).ready(function() {
// for simplicity's sake, but ultimately I'd like to load all the information
            $('#right_inside').html('<h2>' + $('#club').val() + '</h2>');
    });

    $('#club').change(function(event) {
        $.ajax({
            type: "post",
            url: "eventinfo.php",
            data:  $(this).serialize(),
            success: function(data) {
                $('#right_inside').html('<h2>' + $('#club').val() + '</h2><p>Day: ' + data.day + '</p>');
                },
            dataType: "json"
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T23:17:16.220

您的 JSON 结构错误。数据实际上是一个数组：

尝试更改`data.day`为`data[0].day`

注意：您应该在 ajax 成功中使用 JSON.stringify(data) 来查看 JSON 的结构。

```
$.ajax({
  type: "post",
  url: "eventinfo.php",
  data:  $(this).serialize(),
  success: function(data) {
     alert(JSON.stringify(data));
     //or
     console.log(JSON.stringify(data));
  },
   dataType: "json"
 }); 
```

# jquery-mobile - Jquery Mobile Datebox Slidebox

> ID：11024599
> 
> 赞同：0
> 
> 时间：2012-06-13T23:07:15.537
> 
> 标签：jquery-mobile, datebox

当我使用 DateBox1 时，我有这段代码只能在几个月和几天内使用幻灯片：

```
<input name="calendarDaily" id="calendarDaily" type="date" data-role="datebox" 
data-options='{"mode": "slidebox", "fieldsOrderOverride":["m","d"], "noButton": true, "centerWindow":true, "useInlineHideInput":true}' /> 
```

但是对于 Datebox2，这个选项不起作用，在这个网站[http://dev.jtsage.com/jQM-DateBox2/demos/fullopt.html](http://dev.jtsage.com/jQM-DateBox2/demos/fullopt.html)中没有提到我想要的选项！

我怎样才能用 DateBox2 对旧的 Datebox1 做同样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:36:59.093

检查`internationalization / localization`部分以获取更多设置。

有一个`slideFieldOrder`设置，即幻灯片模式的字段顺序，例如`['y', 'm', 'd']`

# mysql - Rails 在 created_at 和 updated_at 中插入无效的日期时间

> ID：11024602
> 
> 赞同：1
> 
> 时间：2012-06-13T23:08:14.307
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3.2, mysql2, ruby-1.8

我在 Ruby 1.8.7 上使用 Rails 3.2.2 和 mysql2 0.3.11（针对 mysql 14.14 服务器），有时 a `created_at`or`updated_at`值将是无效的 DateTime，并导致我的应用程序抛出带有消息的异常`"Invalid date: 2022-03-00 00:00:00"`。

我没有明确地创建、设置、阅读或对`created_at`and`updated_at`列做任何事情。

通过`mysql`客户端检查表，在大多数情况下，这些列中的每一列的值都是“ `0000-00-00 00:00:00`”，最终与`nil`Rails 中一样。但是，有几行显示诸如“ `2022-03-00 00:00:00`”之类的值（尽管据我所知，它们都是不同的，但都在 2022 年）。

有趣的是，我什至不能`.destroy()`从 Rails 运行，因为它不能创建对象。

什么可能会为这些列设置无效日期？

编辑：所有表都发生这种情况。这是我的 schema.rb，以及其中一张表的所有迁移：[https ://gist.github.com/2930655](https://gist.github.com/2930655)

**Edit2**：我自己解决了它（请参阅下面的答案），但如果你能权衡它是否是一个错误，如果是这样，这个错误与哪个包（ActiveRecord？）有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:07:03.000

事实证明，这是因为我超载了`Time#to_s`，导致在 SQL 中发送无效值（它为 DateTimes 发送 HH:MM:SS）。

MySQL 和 SQLite 都无法以这种格式解析 DateTimes，并导致垃圾值，但是，根据 Ruby，SQLite 的值永远不会“无效”，所以我在开发过程中从未注意到这一点。

现在，当我在另一列中保存具有 Time 或 DateTime 的对象并将其设置为 Time/DateTime 对象时，它已正确设置，因此我倾向于说这是一个错误。

# mysql - UTF8 字符在 Wordpress 中未正确显示

> ID：11024604
> 
> 赞同：1
> 
> 时间：2012-06-13T23:08:37.880
> 
> 标签：mysql, wordpress, unicode, utf-8, character-encoding

我的想法不多了 - Wordpress 拒绝正确保存 UTF-8 编码的字符：http: [//www.letosanezkou.com/](http://www.letosanezkou.com/)

您可以看到，当我直接在 MySQl DB 中编辑帖子内容时，它可以正常工作。我已经验证了 mysql 数据库：

```
mysql  Ver 14.14 Distrib 5.5.24, for Linux (i686) using readline 5.1
Connection id:          2120
Current database:       leto_wp1
SSL:                    Not in use
Current pager:          stdout
Using outfile:          ''
Using delimiter:        ;
Server version:         5.5.24-cll MySQL Community Server (GPL)
Protocol version:       10
Connection:             Localhost via UNIX socket
Server characterset:    utf8
Db     characterset:    utf8
Client characterset:    utf8
Conn.  characterset:    utf8 
```

我的 wp-config 具有默认的 UTF-8 行：

```
/** Database Charset to use in creating database tables. */
define('DB_CHARSET', 'utf8');

/** The Database Collate type. Don't change this if in doubt. */
define('DB_COLLATE', ''); 
```

当我尝试更新帖子时，在 phpmyadmin 中进行了编辑，它会错误地保存帖子。

关于如何解决这个问题的任何想法？

# java - 在函数中读取和设置 byte[]

> ID：11024606
> 
> 赞同：0
> 
> 时间：2012-06-13T23:08:47.160
> 
> 标签：java

我需要在 Java 方法中传递一个字节 []，在方法内部我需要“更改”字节 []，但我不想更改本地字节 []，我想更改传递的字节 [ ] 到方法，例如指针。

```
byte[] arr = new byte[10];
doSomethingWithByteArr(arr);
// And now, arr would have changed... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:13:32.353

Java 在将非原始参数传递给方法时是按引用值传递，在传递原始参数时是按值传递，这意味着如果您有一个字节数组并将其传递给修改方法，则该对象将是修改的。

例子：

```
public static void main(String[] args) {
    byte[] arr = new byte[10];
    for (int i = 0; i < arr.length; i++) {
        arr[i] = i;
    }
    // arr now contains { 0, 1, 2, 3, ... 9 }
    System.out.println(Arrays.toString(arr));
    randomize(arr);
    // arr now contains (ex.) { 6, 3, 7, 1, 9, 3, 2, 6, 3, 0 }
    System.out.println(Arrays.toString(arr));
}

public void randomize(byte[] arr) {
    Random random = new Random();
    for (int i = 0; i < arr.length; i++) {
        arr[i] = random.nextInt(10);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:13:36.407

在 Java 中，只有原始类型在传递给函数时才会被复制。该伪代码应该可以按您的预期工作。

尽管在 Java 中所有内容都是通过副本传递的，但非原始类型实际上是引用，这就是为什么您的 byte[] 在函数内部和外部引用相同实例的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T23:13:59.087

不知道我是否理解你的困境。

Java 每次都按值传递其参数。这意味着如果它是一个原始的，它传递它的值，如果它是一个对象或数组，它传递它所引用的对象的值。

所以如果你传递一个数组，你可以修改它，因为它是一个别名，它将反映在方法之外的数组上。但是您将无法将 arr 变量指向方法代码中的新引用，如果您想更改它，您可以返回一个新的 byte[] 并分配给它。

据我所知，Java 不支持通过引用传递参数。

# asp.net - 无法将母版页绑定到我的页面

> ID：11024607
> 
> 赞同：3
> 
> 时间：2012-06-13T23:08:48.860
> 
> 标签：asp.net

我是 ASP.Net 的新手，我想创建一个非常简单的表单，它绑定到母版页但没有成功。这是我的母版页代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="HeadContent" runat="server" /> 
</head>
<body>
<form runat=server>
<asp:ContentPlaceHolder ID="MainContent" runat="server">
  <body>
   <table width=100% border=1 style="background:black" >
    <tr>
      <td width=20%></td>
      <td width=80%><asp:Label ID="Label1" runat="server" Text="Label"></asp:Label></td>
      <td width=20%></td>
    </tr>
   </table>
  </body>
 </asp:ContentPlaceHolder>
</form>

</body>
</html> 
```

我的页面代码是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<asp:Content ContentPlaceHolderID=HeadContent runat=server>
</asp:Content>   

<asp:Content ID="MainContent" runat=server ContentPlaceHolderID=MainContent >
</asp:Content> 
```

但是母版页中的表格没有出现在页面中。请您帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:16:34.817

对于初学者，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<asp:Content ContentPlaceHolderID=HeadContent runat=server>
</asp:Content>   

<asp:Content ID="MainContent" runat=server ContentPlaceHolderID=MainContent >
</asp:Content> 
```

是完全错误的。

`DOCTYPE`应该在master中列出。第二：

```
<asp:Content ID="HContent" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>

<asp:Content ID="MainContent" runat="server" ContentPlaceHolderID="MainContent" >
</asp:Content> 
```

会更符合您的意图。但是，您的风格中存在一个缺陷，这严格来说是一种风格：

```
<asp:Content ID="HContent" ContentPlaceHolderID="HeadContent" runat="server" >
</asp:Content>

<asp:Content ID="MainContent" ContentPlaceHolderID="MainContent" runat="server" >
</asp:Content> 
```

请注意我`runat="server"`在两个标签上最后是如何放置的？总是把它放在最后，这样更容易确保你把它放在正确的地方。或者，总是把它放在前面`ID`

* * *

## 编辑：

```
<asp:ContentPlaceHolder ID="MainContent" runat="server">
  <body>
   <table width=100% border=1 style="background:black" >
    <tr>
      <td width=20%></td>
      <td width=80%><asp:Label ID="Label1" runat="server" Text="Label"></asp:Label></td>
      <td width=20%></td>
    </tr>
   </table>
  </body>
 </asp:ContentPlaceHolder> 
```

如果您在母版页中有此内容，则`ContentPlaceHolder`当子页面实现此部分时，不会显示 的内容。您需要将它们移到母版页`ContentPlaceHolder`声明之外。这个概念非常“非此即彼”，没有其他意见的余地。故意这样写的。

也许你想要：

```
<asp:ContentPlaceHolder ID="MainContent" runat="server" />
<body>
 <table width=100% border=1 style="background:black" >
  <tr>
    <td width=20%></td>
    <td width=80%><asp:Label ID="Label1" runat="server" Text="Label"></asp:Label></td>
    <td width=20%></td>
  </tr>
 </table>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T23:10:51.590

您是否在 @Page 指令中指定母版页？

例如：

```
<%@ Page Language="C#" MasterPageFile="~/MasterPages/Master1.master" Title="Content Page"%> 
```

# servicestack - ServiceStack 未在 OnDelete 上接收值

> ID：11024612
> 
> 赞同：1
> 
> 时间：2012-06-13T23:09:12.587
> 
> 标签：servicestack

在 ServiceStack 的 OnDelete 上，它被调用但值为空。

我试图检查值，例如

```
ProductRequestResponse rx = Client.Send<ProductRequestResponse>(
            "DELETE", "http://localhost:2012/api/product_request", 
            new ProductRequest { Id = 7 }); 
```

在 ServiceStack 方面，我只收到 0 的 Id。这是我的 StackService OnDelete 方法。

```
public override object OnDelete(ProductRequest request)
{
    throw new Exception("Id: " + request.Id.ToString());
} 
```

这是我用于通信的对象

```
public class ProductRequest
{
    public int Id { get; set; }
    public ProductDto ProductDto { get; set; }
}

public class ProductRequestResponse
{
    public ProductDto ProductDto { get; set; }        

    public IEnumerable<ProductDto> ProductDtos { get; set; }

    public ServiceStack.ServiceInterface.ServiceModel.ResponseStatus ResponseStatus { get; set; } //Where Exceptions get auto-serialized
} 
```

我错过了什么，为什么 StackService 没有从 OnDelete 方法接收任何值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:11:59.893

首先，您应该使用[Delete](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/ServiceClientBase.cs#L697)方法作为`Send`POST 的唯一方法：

所以它看起来像：

```
restClient.Delete<TransactionLogResponse>("/transactionlog"); 
```

Delete 不期望 Request DTO 的原因是因为 DELETE Http 动词不接受请求正文。

如果要添加参数，则应将其添加到路由路径或查询字符串中，例如：

```
restClient.Delete<TransactionLogResponse>("/transactionlog/1?Arg1=a&Arg2=b"); 
```

# mysql - 直接在 dbForge 查询窗口上运行 Simple SQL 语句

> ID：11024613
> 
> 赞同：0
> 
> 时间：2012-06-13T23:09:12.650
> 
> 标签：mysql, dbforge

我想在 dbForge SQL 窗口上运行一条 sql 语句，但出现错误：

```
if (ifnull(null,'s') = 's') then
select 's';
end if; 
```

错误：

```
1 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'if (ifnull(null,'s') = 's') then
select 's'' at line 2 SQL1.sql 2 1 
```

我必须将该语句放在存储过程中进行测试。

如何直接在 SQL 窗口上运行语句，如 SQL Server 管理工作室。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:55:02.137

当然你可以在 SQL Server Management Studio 中运行这个，因为它是 Sql Server。

现在，您尝试在 MySQL 中将这些语句作为脚本运行，并得到一个错误。没错，MySQL 不支持脚本中的 IF、CASE、LOOP、WHILE 等流控结构。您只能在存储过程、函数、触发器和事件中使用它们。

[流控制语句](http://dev.mysql.com/doc/refman/5.5/en/flow-control-statements.html)。

# php - PHP 中未定义的索引、isset 和引用

> ID：11024616
> 
> 赞同：1
> 
> 时间：2012-06-13T23:09:42.263
> 
> 标签：php, reference, isset

如果访问空引用的未定义索引，PHP 不会抛出任何错误。

```
<?php

$array = &$foo['bar'];
if ($array['stuff']) echo 'Cool'; // No PHP notice
$array['thing'] = 1; // Array created; $foo['bar']['thing'] == 1
$array['stuff']; // PHP notice 
```

如果`$array`不是参考 PHP 会在第一行抱怨。

为什么不作为参考？我需要为 null 引用烦恼 isset，还是 PHP 在内部抱怨而不让我知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:16:39.417

在您的代码`$array`中为空。以下代码也不会通知您：

```
$b = null;
if ($b['stuff']) echo 'cool'; 
```

这很奇怪，文档中的[这条评论](http://www.php.net/manual/en/language.types.array.php#103743)指出了这一事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:20:10.087

您必须提高错误报告级别。您的示例`$array['stuff']`将引发有关未找到索引的警告。我经常将 key in 测试与评估结合起来，以防止出现这些警告：

```
if( array_key_exists("blah",$arr) && strlen($arr['blah']) > 0 ) { 
    ; // do stuff here
} 
```

我经常将变量与数组名称结合起来，因为每当我必须将复制代码剪切并粘贴到下一部分以执行相同的操作时，我宁愿创建一个变量名称数组，然后遍历变量名称。最荒谬的情况是当我要处理计费和运输数据时，我将有一个数组变量名称`$BorS`，或者只是`$BS`然后在顶部，设置`$BorS="shipping";`并最终得到非常有趣的语句，例如：

```
${$BorS."data"}[${$BorS."_addr1"}]=$input_array[$BorS."_address_line_1"]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-13T23:14:46.657

为什么不这样做：

```
$array = array(); 
```

# data-structures - Clojure：如何将映射条目的惰性序列转换为结构映射？

> ID：11024618
> 
> 赞同：4
> 
> 时间：2012-06-13T23:09:54.760
> 
> 标签：data-structures, recursion, clojure, enlive

我是 clojure 的新手，一直在使用 enlive 来转换 html 文档的文本节点。我的最终目标是将结构转换回 html、标签和所有内容。

我目前能够获取 enlive-html/html-resource 返回的 structmap 并将其转换回 html 使用

```
(apply str (html/emit* nodes)) 
```

其中节点是结构图。

我还可以根据需要转换 structmap 的 :content 文本节点。然而，在转换了 structmap 的内容文本节点之后，我最终得到了 MapEntries 的lazyseq。我想将其转换回结构图，以便可以在其上使用 emit*。这有点棘手，因为lazyseqs & structmaps 是嵌套的。

**tldr：**

我如何转换：

```
([:tag :html]
 [:attrs nil]
 [:content
  ("\n"
   ([:tag :head]
    [:attrs nil]
    [:content
     ("\n  "
      ([:tag :title] [:attrs nil] [:content ("Page Title")])
      "  \n")])
   "\n"
   ([:tag :body]
    [:attrs nil]
    [:content
     ("\n  "
      ([:tag :div]
       [:attrs {:id "wrap"}]
       [:content
        ("\n    "
         ([:tag :h1] [:attrs nil] [:content ("header")])
         "\n    "
         ([:tag :p] [:attrs nil] [:content ("some paragrah text")])
         "\n  ")])
      "\n")])
   "\n\n")]) 
```

进入：

```
 {:tag :html,
 :attrs nil,
 :content
 ("\n"
  {:tag :head,
   :attrs nil,
   :content
   ("\n  " {:tag :title, :attrs nil, :content ("Page Title")} "  \n")}
  "\n"
  {:tag :body,
   :attrs nil,
   :content
   ("\n  "
    {:tag :div,
     :attrs {:id "wrap"},
     :content
     ("\n    "
      {:tag :h1, :attrs nil, :content ("header")}
      "\n    "
      {:tag :p, :attrs nil, :content ("some paragrah text")}
      "\n  ")}
    "\n")}
  "\n\n")} 
```

## 更新

[kotarak 的回答](https://stackoverflow.com/a/11027507/452098)为我指明了 的方向`update-in`，我可以使用它来修改地图而不将其转换为序列，从而使我的问题变得无关紧要。

```
(defn modify-or-go-deeper
  "If item is a map, updates its content, else if it's a string, modifies it"
  [item]
  (declare update-content)
  (cond
    (map? item) (update-content item)
    (string? item) (modify-text item)))

(defn update-content
  "Calls modify-or-go-deeper on each element of the :content sequence"
  [coll]
  (update-in coll [:content] (partial map modify-or-go-deeper))) 
```

我以前`for`在地图上使用过，但是`update-in`要走的路。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:01:43.460

Just put everything back into a map and walk the content recursively.

```
(defn into-xml
  [coll]
  (let [tag (into {} coll)]
    (update-in tag [:content] (partial map into-xml)))) 
```

Note that the content is only transformed as you access it.

*Edit:* Woops, missed the string parts. Here a working version:

```
(defn into-xml
  [coll]
  (if-not (string? coll)
    (let [tag (into {} coll)]
      (update-in tag [:content] (partial map into-xml)))
    coll)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:29:25.233

尝试

```
(def mp '([:tag :html] [:attrs nil] [:content
    (""
    ([:tag :head] [:attrs nil] [:content
        ("\n\t\t"
        ([:tag :title] [:attrs nil] [:content ("page title")])
        "\n\t\t")])
        "\n\t"
        ([:tag :body] [:attrs nil] [:content
            ("\n\t\t"
            ([:tag :div] [:attrs {:id "wrapper"}] [:content
            ("\n\t\t  "
            ([:tag :h1] [:attrs nil] [:content
                ("\n  \t\t\tpage title"
                ([:tag :br] [:attrs nil] [:content ()])
                "\n  \t\t\tand more title\n  \t\t")])
                "\n  \t\t"
                ([:tag :p] [:attrs nil] [:content
                    ("\n  \t\tSome paragraph text"
                    ([:tag :img] [:attrs {:src "images/image.png", :id "image"}] [:content nil])
                    "\n  \t\t")])
            "\n\t\t")]
            "\n\t     \n\t\t"))]
        "\n\n"))]))

(clojure.walk/postwalk (fn [x]
                         (if (and (list? x) (vector? (first x)))
                           (into {} x)
                           x))
                       mp) 
```

它会抛出一个错误，但是如果您将输入更改为

```
([:tag :html]
 [:attrs nil]
 [:content
  (""
   ([:tag :head]
    [:attrs nil]
    [:content
     ("\n\t\t"
      ([:tag :title] [:attrs nil] [:content ("page title")])
      "\n\t\t")])
   "\n\t"
   ([:tag :body]
    [:attrs nil]
    [:content
     ("\n\t\t"
      ([:tag :div]
       [:attrs {:id "wrapper"}]
       [:content
        ("\n\t\t  "
         ([:tag :h1]
          [:attrs nil]
          [:content
           ("\n  \t\t\tpage title"
            ([:tag :br] [:attrs nil] [:content ()])
            "\n  \t\t\tand more title\n  \t\t")])
         "\n  \t\t"
         ([:tag :p]
          [:attrs nil]
          [:content
           ("\n  \t\tSome paragraph text"
            ([:tag :img]
             [:attrs {:src "images/image.png", :id "image"}]
             [:content nil])
            "\n  \t\t")])
         "\n\t\t")]
       ))]))])) 
```

然后它工作正常。不同之处在于，在编辑后的输入中，您将从包含键值对的同一列表中删除类似“\n\t\t”的字符串。希望这可以帮助。

**编辑：** 以下对我有用：

```
(def mp '([:tag :html]
 [:attrs nil]
 [:content
  (""
   ([:tag :head]
    [:attrs nil]
    [:content
     ("\n\t\t"
      ([:tag :title] [:attrs nil] [:content ("page title")])
      "\n\t\t")])
   "\n\t"
   ([:tag :body]
    [:attrs nil]
    [:content
     ("\n\t\t"
      ([:tag :div]
       [:attrs {:id "wrapper"}]
       [:content
        ("\n\t\t  "
         ([:tag :h1]
          [:attrs nil]
          [:content
           ("\n  \t\t\tpage title"
            ([:tag :br] [:attrs nil] [:content ()])
            "\n  \t\t\tand more title\n  \t\t")])
         "\n  \t\t"
         ([:tag :p]
          [:attrs nil]
          [:content
           ("\n  \t\tSome paragraph text"
            ([:tag :img]
             [:attrs {:src "images/image.png", :id "image"}]
             [:content nil])
            "\n  \t\t")])
         "\n\t\t")]
       ))]))]))

(clojure.walk/postwalk (fn [x]
                         (if (and (list? x) (vector? (first x)))
                           (into {} x)
                           x))
                       mp) 
```

尝试将其复制并粘贴到 repl 中。您应该得到以下信息：

```
{:tag :html,
 :attrs nil,
 :content
 (""
  {:tag :head,
   :attrs nil,
   :content
   ("\n\t\t"
    {:tag :title, :attrs nil, :content ("page title")}
    "\n\t\t")}
  "\n\t"
  {:tag :body,
   :attrs nil,
   :content
   ("\n\t\t"
    {:tag :div,
     :attrs {:id "wrapper"},
     :content
     ("\n\t\t  "
      {:tag :h1,
       :attrs nil,
       :content
       ("\n  \t\t\tpage title"
        {:tag :br, :attrs nil, :content ()}
        "\n  \t\t\tand more title\n  \t\t")}
      "\n  \t\t"
      {:tag :p,
       :attrs nil,
       :content
       ("\n  \t\tSome paragraph text"
        {:tag :img,
         :attrs {:src "images/image.png", :id "image"},
         :content nil}
        "\n  \t\t")}
      "\n\t\t")})})} 
```

# jersey - 混合 Guice 构造函数注入和 Jersey @Context

> ID：11024620
> 
> 赞同：2
> 
> 时间：2012-06-13T23:09:56.743
> 
> 标签：jersey, guice

我正在尝试使用 Jersey-injected @Context 参数和 Guice-injected 参数来使用构造注入。

这有效（纯泽西注射）：

```
@Path("top")
public class TopLevel
{
  public TopLevel(@Context ResourceContext context)
  {
    ..
  }
} 
```

这有效（纯Guice注入）：

```
@Path("top")
public class TopLevel
{
  @Inject
  public TopLevel(MyService service)
  {
    ..
  }
} 
```

但这*不起作用*：

```
@Path("top")
public class TopLevel
{
  @Inject
  public TopLevel(MyService service, @Context ResourceContext context)
  {
    ..
  }
} 
```

因为 Guice 不知道如何注入 ResourceContext。如果您查看[JerseyServletModule](http://jersey.java.net/nonav/apidocs/latest/contribs/jersey-guice/com/sun/jersey/guice/JerseyServletModule.html)，您会注意到它注入了以下类：

```
WebApplication, Providers, FeaturesAndProperties, MessageBodyWorkers, ExceptionMapperContext, HttpContext, UriInfo, ExtendedUriInfo, HttpRequestContext, HttpHeaders, Request, SecurityContext and HttpResponseContext 
```

但不是资源上下文。有任何想法吗？

**更新**：我认为我不能使用字段注入，因为我需要 ResourceContext 来实例化另一个实例字段。例如：

```
public class Foo
{
  public Foo(ResourceContext context) {}
}

public class Bar
{
  private final MyService service;
  private final ResourceContext context;
  private final Foo foo;

  @Inject
  public Bar(MyService service, @Context ResourceContext context)
  {
    this.foo = new Foo(context);
  }
} 
```

如果我要在构造函数之后实例化 ResourceContext，我无法实例化`Foo`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:46:44.033

您应该能够使用@Context 将其注入到实例字段中。如果这不能解决您的问题（即您确实需要在构造函数中访问它），您可以在[http://java.net/jira/browse/JERSEY](http://java.net/jira/browse/JERSEY)提交增强请求，我们会将其添加到 JerseyServletModule。变化很小。

# javascript - 如何在javascript中获取变量的名称？

> ID：11024622
> 
> 赞同：0
> 
> 时间：2012-06-13T23:10:02.577
> 
> 标签：javascript, variables

> **可能重复：**
> [在传递给函数后确定变量的原始名称](https://stackoverflow.com/questions/3404057/determine-original-name-of-variable-after-its-passed-to-a-function)
> [获取对象的引用名称？](https://stackoverflow.com/questions/3827731/get-the-reference-name-of-an-object)

不完全确定如何解释这一点。我正在寻找在对象本身中获取变量名称的字符串值。

例如：

```
var MyObject = function(){
  var that = this;

  that.alertMyName = function(){
    var name_of_instance = that.__name__;
    alert(name_of_instance); //hoping to retreive a string containing 'var1'?
  }

};

var var1 = new MyObject();
var1.alertMyName(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:16:27.220

无法确定引用对象的任何变量的名称，无论如何在此特定示例中都没有。想想你有许多变量引用同一个对象的情况——在这种情况下你希望返回什么？如果*根本没有变量*引用该对象怎么办？（考虑表达式`new MyObject().alertMyName()`——该对象的名称应该是什么？）

如果你想给一个对象一个名字，让它明确：

```
var MyObject = function(name){
  var that = this;

  that.alertMyName = function(){
    alert(name);
  }

};

var var1 = new MyObject("var1");
var1.alertMyName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:12:28.093

如果你做一个

`for (x in obj){}`

在 javascript 中的对象上，x 包含对象属性/变量名称的名称，我相信您可以通过这种方式获得所需的内容：)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:25:57.483

哦，当然，这很容易（实际上是不可能的）。只需打印出代码，然后向下读取函数调用，然后记下变量名称。

在变得有点复杂的代码中，但在边缘情况下仍然可行。您必须解析调用该函数的文档，这需要明确知道该文档所在的位置。使用`$.ajax`调用，您可以将整个调用脚本或页面加载到变量中，然后使用滑动窗口进行解析，直到找到使用变量名称的函数调用。但是，您必须确保找到的函数调用是与当前实例相关的函数调用。

# ios - Cocos2d View 在 UISplitViewController 中没有正确调整大小

> ID：11024624
> 
> 赞同：2
> 
> 时间：2012-06-13T23:10:33.620
> 
> 标签：ios, ios5, cocos2d-iphone, uisplitviewcontroller

我有一个 cocos2d 2 视图作为 UISplitViewController 中的详细视图。出于某种原因，它调整视图的大小，就好像它具有整个屏幕一样，无论是最初还是旋转屏幕时。这是一些虚构的背景：

![在此处输入图像描述](../Images/928e5d81871206ba19694d34fd97fbbb.png)

这是我在模拟器中运行它时的样子：

![在此处输入图像描述](../Images/b41fe31e8f55111842584c26027bc42d.png)

以下是所有相关文件：

**Game1ViewController.h**

```

     #import <UIKit/UIKit.h>
        #import "cocos2d/cocos2d.h"

        @类游戏1场景；

        @interface Game1ViewController : UIViewController {
        // Game1Scene *_scene;
        }

        @property (nonatomic, 保留) Game1Scene *scene;

    @结尾

```

**Game1ViewController.m**

```
    #import "cocos2d/cocos2d.h"
    #import "Game1Scene.h"
    #import "Game1ViewController.h"
    #import "CCSpriteExtensions.h"

    @implementation Game1ViewController
    @synthesize 场景 = _scene;

    - (CGRect)getRotatedBounds:(UIInterfaceOrientation)toInterfaceOrientation {
        CGRect screenRect = [self.view bounds];
    // NSLog(@"%f, %f\n", [UIScreen mainScreen].bounds.size.width, self.view.frame.size.height - 88);

        CGRect 矩形 = CGRectZero;   

        if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) {        
            矩形 = 屏幕矩形；
        } else if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) {
            rect.size = CGSizeMake(screenRect.size.height, screenRect.size.width);
        }
        返回矩形；
    }

    - (void)startCocos2D {

        CCDirector *director = [CCDirector sharedDirector];
        CGSize screenSize = [[CCDirector sharedDirector] winSize];
        NSLog(@"\n===========Size=%f, %f\n\n",screenSize.height, screenSize.width);

        // 在 iPhone 4 上启用高分辨率模式（视网膜显示屏）并在所有其他设备上保持低分辨率
        if( ! [导演 enableRetinaDisplay:YES] )
            CCLOG(@"不支持视网膜显示");

        NSLog(@"self.view bounds width, height: %f %f", [self.view bounds].size.width, [self.view bounds].size.height);

        CGRect rotateBounds = [self getRotatedBounds:[UIApplication sharedApplication].statusBarOrientation];

        CCGLView *glview = [ CCGLView viewWithFrame:rotatedBounds
                                          pixelFormat:kEAGLColorFormatRGB565 // kEAGLColorFormatRGBA8
                                          depthFormat:0 // GL_DEPTH_COMPONENT16_OES
                             ];

        [self.view addSubview:glview];

        [导演 setView:glview];

        [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

        self.scene = [Game1Scene nodeWithBounds:rotatedBounds];
        CCScene *scene = [CCScene 节点];
        [场景添加子：self.scene];
        [导演 runWithScene:scene];

    }

    // 实现 viewDidLoad 以在加载视图后进行额外的设置，通常来自 nib。
    - (void)viewDidLoad {
        self.title = @"玩游戏 1";
    // self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    // self.view.autoresizingMask = 1;
        [超级视图DidLoad];

        [自启动Cocos2D];
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // 返回是；
        return (interfaceOrientation == UIInterfaceOrientationPortrait);

    }

    -(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration
    {
        CGRect rotateBounds = [self getRotatedBounds: toInterfaceOrientation];

        CCDirector *director = [CCDirector sharedDirector];
        CCGLView *glView = [导演视图];
        float contentScaleFactor = [导演 contentScaleFactor];

        如果（内容比例因子！= 1）{
            rotateBounds.size.width *= contentScaleFactor;
            rotateBounds.size.height *= contentScaleFactor;
        }
        glView.frame = 旋转边界；

        [self.scene setBounds:rotatedBounds];
    }

    - (void)stopCocos2D {

        CCDirector *director = [CCDirector sharedDirector];

        CCGLView *view = [导演视图];
        [查看 removeFromSuperview];
        //[导演分离];

        [导演stopAnimation]；
        [导演暂停]；
        //[导演setOpenGLView:nil];

        //杀死导演
        [导演结束]；
    }

    - (void)viewDidDisappear:(BOOL)animated {
        [自停Cocos2D];
        [超级 viewDidDisappear:动画];
    }
    @结尾

```

**Game1Scene.h**

```
    #import <Foundation/Foundation.h>
    #import "cocos2d/cocos2d.h"

    @interface Game1Scene : CCLayer {
        CGRect bounds_;
    }

    + (id) nodeWithBounds:(CGRect)bounds;
    - (void)setBounds:(CGRect)bounds;
    @结尾

```

**Game1Scene.m**

```
    #import "Game1Scene.h"
    #import "CCSpriteExtensions.h"
    #import "cocos2d/CCMenuItem.h"

    @interface Game1Scene（私人）

    - （无效）开始游戏；
    - (void)createUI;
    - (id)initWithBounds:(CGRect)bounds;

    @结尾

    @实现游戏1场景

    +(id) nodeWithBounds:(CGRect)bounds {
        返回 [[self alloc] initWithBounds:bounds];
    }

    - (void) setBounds:(CGRect)bounds {
        NSLog(@"bounds.width, bounds.height: %f, %f", bounds.size.width, bounds.size.height);
        bounds_ = 界限；
        [自我创建UI]；
    }

    -(id) initWithBounds:(CGRect)bounds {
        如果（（自我=[超级初始化]））{
            srand (时间(NULL));

            bounds_ = 界限；

            [自启动游戏];
        }
        回归自我；
    }

    -（无效）createUI {

        [自我 removeAllChildrenWithCleanup:TRUE];

        // 纯深紫色背景
        CCSprite *background = [CCSprite spriteWithFile:@"game1-background.png"];
        背景.位置 = ccp(0, 0);
        背景.anchorPoint = ccp(0, 0);
        NSLog(@"\n=== bounds= %f, %f\n", bounds_.size.width, bounds_.size.height);
        [背景resizeTo:CGSizeMake(bounds_.size.width, bounds_.size.height)];
        [自我添加孩子：背景]；

    }

    -（无效）开始游戏{
        [自我创建UI]；
    }

    @结尾

```

**CCSpriteExtensions.h**

```
    /*
     CCSpriteExtensions.h

     http://www.learn-cocos2d.com/tag/ccspriteextensions/
     */
    #import "cocos2d/cocos2d.h"

    @interface CCSprite (Xtensions)

    // 通过正确设置比例因子来调整到指定的大小。
    -(void)resizeTo:(CGSize) theSize;

    @结尾

```

**CCSpriteExtension.m**

```
    /*
     CCSpriteExtensions.m

     来源：http://www.learn-cocos2d.com/tag/ccspriteextensions/
     */
    #import "CCSpriteExtensions.h"

    @implementation CCSprite (Xtensions)

    -(void)resizeTo:(CGSize) theSize
    {
        CGFloat newWidth = theSize.width;
        CGFloat newHeight = theSize.height;

        浮动 startWidth = self.contentSize.width;
        浮动 startHeight = self.contentSize.height;

        浮动 newScaleX = newWidth/startWidth;
        浮动 newScaleY = newHeight/startHeight;

        self.scaleX = newScaleX;
        self.scaleY = newScaleY;

    }
    @结尾

```

我采用了这个问题中解释的想法：[UISplitViewController on iPad with Storyboards](https://stackoverflow.com/questions/9272244/uisplitviewcontroller-on-ipad-with-storyboards) by create a couple of Cocos2D Scenes in the DetailViews。

[更新]

我更新到2.0。我的问题听起来像这样：[http://www.cocos2d-iphone.org/forum/topic/30797](http://www.cocos2d-iphone.org/forum/topic/30797)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:07:03.730

I'm using cocos2d v2, and I'm not sure about 1.1, but in v2, CCScene and CCLayer are initing with screen's size:

```
@implementation CCScene
-(id) init
{
    if( (self=[super init]) ) {
        CGSize s = [[CCDirector sharedDirector] winSize];
        self.ignoreAnchorPointForPosition = YES;
        anchorPoint_ = ccp(0.5f, 0.5f);
        [self setContentSize:s];
    }

    return self;
}
@end 
```

...

```
 @implementation CCLayer

    #pragma mark Layer - Init

        -(id) init
        {
            if( (self=[super init]) ) {

                CGSize s = [[CCDirector sharedDirector] winSize];
                anchorPoint_ = ccp(0.5f, 0.5f);
                [self setContentSize:s];
                self.ignoreAnchorPointForPosition = YES;

                isTouchEnabled_ = NO;

        }

            return self;
        } 
```

If you whant to change it, just set contentSize property to it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:20:19.803

您是否尝试过使用一些标准的 UIView 来进行比较？实现相同的 getRotatedBounds 但没有所有 Cocos2D 的东西。通过这种方式，您可以确定错误是出在 SplitViewController/Storyboards 还是在您的 Cocos2D 处理中？

[这是关于带有情节提要的 Splitviewcontrollers](http://www.scienceathand.com/idevblogaday/adventures-in-uisplitviewcontroller-2/)的教程 。

# eclipse - Eclipse + m2eclipse：一个项目依赖于另一个项目，无需运行“mvn install”

> ID：11024628
> 
> 赞同：1
> 
> 时间：2012-06-13T23:11:01.603
> 
> 标签：eclipse, maven, m2eclipse, m2e

我正在使用 Eclipse Indigo + m2eclipse。

我的工作区中有两个项目，projectA 在其 POM.xml 中声明了对 projectB 的 Maven 依赖项。

我希望能够对 projectB 进行更改，并且不必在此 projectB 上运行“mvn install”，在运行 projectA 时能够看到更改！

我在两个项目上都**检查了***来自 Workspace 项目的 Properties/Maven/Resolve 依赖项* 。它不起作用。我总是必须在 projectB 上执行“mvn install”（并且可能在 projectA 上执行“Maven/Updates Dependencies...”才能看到更改。

 **我在projectA的POM中对projectB的依赖是：

```
 <dependency>
        <groupId>com.xxxx</groupId>
        <artifactId>projectB</artifactId>
        <version>0.7-SNAPSHOT</version>
    </dependency> 
```

groupId、artifactId 和 version 与 projectB 的 POM 中的匹配。

我阅读了我在互联网上可以找到的所有内容，但没有成功！

任何想法？

**更新**：我不知道这些信息是否有帮助，但我的工作区中也有一个*projectC*，它也依赖于 projectB。并且 projectA 依赖于 projectC ：

```
projectA -> depends on -> projectB
projectC -> depends on -> projectB
projectA -> depends on -> projectC 
```

在 projectA 和 projectC 中都使用了完全相同版本的 projectB 工件。我尝试在 projectA 的 POM 中排除对 projectB 的传递依赖，因此只使用直接依赖：它没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:04:10.120

您需要使用一个多模块项目，其中每个当前项目都成为一个模块。他们都有一个共同的父母。然后你可以从父 POM 调用构建，reactor 将按照需要的顺序构建子模块。这样，您在 ProjectB 中的更改将在 ProjectA 中看到。

这是一个示例
[http://www.sonatype.com/books/mvnex-book/reference/multimodule.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:49:33.613

尝试使用“**更新项目配置**”功能。此外，您可以运行`mvn eclipse:eclipse`，默认情况下，插件会将您的项目配置为使用子项目引用而不是安装包引用。**

# hadoop - 内存中的 Hadoop Reducer 值？

> ID：11024638
> 
> 赞同：9
> 
> 时间：2012-06-13T23:12:56.877
> 
> 标签：hadoop, mapreduce

我正在编写一个 MapReduce 作业，最终可能会在 reducer 中产生大量值。我担心所有这些值会立即加载到内存中。

将值加载到内存中的底层实现是否`Iterable<VALUEIN> values`需要？Hadoop：权威指南似乎暗示了这种情况，但没有给出“明确”的答案。

reducer 的输出将比输入的值大得多，但我相信输出会根据需要写入磁盘。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T23:28:01.910

你在正确地阅读这本书。reducer 不会将所有值都存储在内存中。相反，当循环遍历 Iterable 值列表时，每个 Object 实例都被重复使用，因此它在给定时间只保留一个实例。

例如，在下面的代码中，objs ArrayList 在循环后将具有预期的大小，但每个元素都将是相同的 b/c 每次迭代都会重复使用 Text val 实例。

```
public static class ReducerExample extends Reducer<Text, Text, Text, Text> {
public void reduce(Text key, Iterable<Text> values, Context context) {
    ArrayList<Text> objs = new ArrayList<Text>();
            for (Text val : values){
                    objs.add(val);
            }
    }
} 
```

（如果出于某种原因您确实想对每个 val 采取进一步的措施，您应该制作一个深拷贝然后存储它。）

当然，即使是单个值也可能大于内存。在这种情况下，建议开发人员采取措施减少前面 Mapper 中的数据，以使值不会太大。

**更新**：参见 Hadoop The Definitive Guide 2nd Edition 的第 199-200 页。

```
This code snippet makes it clear that the same key and value objects are used on each 
invocation of the map() method -- only their contents are changed (by the reader's 
next() method). This can be a surprise to users, who might expect keys and vales to be 
immutable. This causes prolems when a reference to a key or value object is retained 
outside the map() method, as its value can change without warning. If you need to do 
this, make a copy of the object you want to hold on to. For example, for a Text object, 
you can use its copy constructor: new Text(value).

The situation is similar with reducers. In this case, the value object in the reducer's 
iterator are reused, so you need to copy any that you need to retain between calls to 
the iterator. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-12T16:59:22.017

它不完全在内存中，其中一些来自磁盘，看代码似乎框架将 Iterable 分成段，并将它们从磁盘一个一个加载到内存中。

org.apache.hadoop.mapreduce.task.ReduceContextImpl org.apache.hadoop.mapred.BackupStore

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T18:36:30.920

正如其他用户所引用的那样，整个数据并未加载到内存中。[查看Apache](https://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml)文档链接中的一些 mapred-site.xml 参数。

```
mapreduce.reduce.merge.inmem.threshold 
```

默认值：1000。它是阈值，以内存中合并过程的文件数表示。

```
mapreduce.reduce.shuffle.merge.percent 
```

默认值为 0.66。将启动内存中合并的使用阈值，表示为分配给存储内存中映射输出的总内存的百分比，如`mapreduce.reduce.shuffle.input.buffer.percent`.

```
mapreduce.reduce.shuffle.input.buffer.percent 
```

默认值为 0.70。在 shuffle 期间从最大堆大小分配到存储映射输出的内存百分比。

```
mapreduce.reduce.input.buffer.percent 
```

默认值为 0。内存百分比（相对于最大堆大小）在减少期间保留映射输出。当 shuffle 结束时，内存中任何剩余的 map 输出必须消耗少于这个阈值，然后才能开始 reduce。

```
mapreduce.reduce.shuffle.memory.limit.percent 
```

默认值为：0.25。单个 shuffle 可以消耗的内存限制的最大百分比

# c# - 请求输入并在数组中打印该位置

> ID：11024640
> 
> 赞同：0
> 
> 时间：2012-06-13T23:13:10.747
> 
> 标签：c#

希望有人可以提供帮助。我正在自学 C#，本章中的一个挑战要求我将每个月的天数存储在一个名为 daysInMonth 的数组中。当程序启动时，我要求用户输入一个介于 1 到 12 之间的数字，然后吐出与该数字对应的月份中的天数。

我已经搜索过这个，但什么都没有。大多数示例都与在数组中匹配/查找 int 或字符串有关，这不是我想要的。我想要一些东西，如果用户输入数字 5，程序将打印出数组中第 5 个的任何内容。我知道这很容易，但我认为我的搜索一无所获，因为我不知道要搜索的正确术语。任何帮助，将不胜感激。

更新：

感谢 MAV，我得到了它的工作。发布程序的完整代码。

```
 int[] daysInMonth = new int[12] { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
        string[] monthNames = new string[12] { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
        int myChoice;

        Console.Write("Please enter a number: ");

        myChoice = Int32.Parse(Console.ReadLine());

        if (myChoice < 1)
        {
            Console.WriteLine("Sorry, the number {0} is too low.  Please select a number between 1 and 12.", myChoice);
            Console.Write("Please enter a number: ");
            myChoice = Int32.Parse(Console.ReadLine());
        }
        else if (myChoice > 12)
        {
            Console.WriteLine("Sorry, the number {0} is too high.  Please select a number between 1 and 12.", myChoice);
            Console.Write("Please enter a number: ");
            myChoice = Int32.Parse(Console.ReadLine());
        }

        int i = daysInMonth[myChoice - 1];
        string m = monthNames[myChoice - 1];

        Console.WriteLine("Thank you.  You entered the number {0}.", myChoice);
        Console.WriteLine("That number corresponds with the month of {0}.", m);
        Console.WriteLine("There are {0} days in this month.", i);

        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:25:57.483

既然你想学习 C#，我不会给你我相信的答案。相反，我将尝试为您提供有关如何使用数组的知识，因为这似乎是您的问题。

您可以像这样声明数组：

```
 int[] intArray = {1, 2, 3};      //This array contains 1, 2 and 3
 int[] intArray2 = new int[12];   //This array have 12 spots you can fill with values
 intArray2[2] = 42;               //element 2 in intArray2 now contains the value 42 
```

要访问数组中的元素，您可以这样做：

```
int i = intArray2[2];             //Integer i now contains the value 42. 
```

有关数组以及如何使用它们的更多信息，我建议您阅读本教程：[数组教程](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)

# asp.net - 图像按钮文本

> ID：11024642
> 
> 赞同：0
> 
> 时间：2012-06-13T23:13:18.333
> 
> 标签：asp.net

嗨，我正在尝试做“简单”的事情，但无法解决

.net，在我的网站中，我有一个导航菜单，菜单中的每个项目都是一个图像

（就像在上面的“菜单”问题..标签..等中一样。但在我的例子中，背景颜色是图像）

我想加载图像并从服务器端动态添加文本，但我无法向其中添加文本。我希望能够执行以下操作的最佳方法是什么：

```
<asp:ImageButton ID="imgButton" runat="Server" ImageUrl="nav1.gif" **text=""**/> 
```

并从服务器上写下如下内容：

**imgButton.text="AA"**

感谢任何帮助:) 感谢 Eran。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:37:03.660

您的图像按钮的文本属性控制元素的[AlternateText](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.alternatetext)属性的值，并且根据[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.text)，不打算直接从您的代码中调用。您可能想要做的是使用`LinkButton`, 并使用 css 将按钮的背景设置为您的图像。这将使您能够同时拥有图像和文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:57:47.373

您可以使用 css 和无序列表 ( `<ul>`) 来实现这样的效果。只需设置列表项 ( ) 的样式，使其在列表项`<li>`中具有背景图像和位置`asp:labels`（可以从后面的代码访问以动态更改）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T01:48:32.293

您可以尝试使用普通的 asp 按钮，但使用样式/css 设置图像。

将按钮的样式/css设置为`background-color: transparent;`然后更改图像，使用背景属性设置图像`background: url([dir]/nav1.gif);`

text 属性将按照您对 imagebutton 的期望工作。按钮文本样式可以修改为普通的 css 即。颜色和字体大小等。

# python - GAE - Python - 按对象属性的属性查询（过滤器）

> ID：11024644
> 
> 赞同：0
> 
> 时间：2012-06-13T23:13:32.313
> 
> 标签：python, google-app-engine

我正在将 GAE 与 python 一起使用，我遇到了这个问题，我正在尝试做这样的事情：

```
db.delete(db.Query(StudentVote).filter('topic.lecture = ', lecture)) 
```

和

```
db.delete(db.Query(StudentVote).filter('topic.lecture.course.owner = ', owner)) 
```

我尝试删除一组实体，每个实体都有一个主题属性，该属性具有讲座属性等。

> 学生投票-> 主题-> 讲座-> 课程-> 所有者

但是查询不起作用，有没有办法过滤这种方式？a 或者完成此功能的最佳实践是什么？

谢谢先进，盖尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:59:30.573

如果这是一个常见查询，您希望将所有者作为索引属性放入 StudentVote。这会使您的写入更加昂贵，但它会让您按所有者查询。否则，如果很少见且性能没有问题，您可以手动通过链查询。

# python - 是否可以重载 Python 赋值？

> ID：11024646
> 
> 赞同：98
> 
> 时间：2012-06-13T23:13:33.170
> 
> 标签：python, class, methods, assignment-operator, magic-methods

有没有一种神奇的方法可以重载赋值运算符，比如`__assign__(self, new_value)`？

我想禁止重新绑定一个实例：

```
class Protect():
  def __assign__(self, value):
    raise Exception("This is an ex-parrot")

var = Protect()  # once assigned...
var = 1          # this should raise Exception() 
```

可能吗？疯了吗？我应该吃药吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-06-13T23:41:14.907

你描述的方式是绝对不可能的。给名字赋值是 Python 的一个基本特性，并且没有提供任何钩子来改变它的行为。

*但是，可以*通过覆盖来控制对类实例中成员的分配`.__setattr__()`。

```
class MyClass(object):
    def __init__(self, x):
        self.x = x
        self._locked = True
    def __setattr__(self, name, value):
        if self.__dict__.get("_locked", False) and name == "x":
            raise AttributeError("MyClass does not allow assignment to .x member")
        self.__dict__[name] = value

>>> m = MyClass(3)
>>> m.x
3
>>> m.x = 4
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 7, in __setattr__
AttributeError: MyClass does not allow assignment to .x member 
```

请注意，有一个成员变量`_locked`控制是否允许赋值。您可以解锁它以更新值。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-13T23:20:26.733

不，因为赋值是一种[语言内在](http://docs.python.org/reference/simple_stmts.html#grammar-token-assignment_stmt)的，没有修改钩子。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-13T23:20:10.400

我不认为这是可能的。在我看来，赋值给一个变量并没有对它之前引用的对象做任何事情：只是变量“指向”了一个不同的对象。

```
In [3]: class My():
   ...:     def __init__(self, id):
   ...:         self.id=id
   ...: 

In [4]: a = My(1)

In [5]: b = a

In [6]: a = 1

In [7]: b
Out[7]: <__main__.My instance at 0xb689d14c>

In [8]: b.id
Out[8]: 1 # the object is unchanged! 
```

`__setitem__()`但是，您可以通过使用或引发异常的方法创建包装对象来模仿所需的行为`__setattr__()`，并在其中保留“不可更改”的内容。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-09-21T07:25:16.800

在模块内部，这绝对是可能的，通过一点黑魔法。

```
import sys
tst = sys.modules['tst']

class Protect():
  def __assign__(self, value):
    raise Exception("This is an ex-parrot")

var = Protect()  # once assigned...

Module = type(tst)
class ProtectedModule(Module):
  def __setattr__(self, attr, val):
    exists = getattr(self, attr, None)
    if exists is not None and hasattr(exists, '__assign__'):
      exists.__assign__(val)
    super().__setattr__(attr, val)

tst.__class__ = ProtectedModule 
```

上面的示例假设代码驻留在名为`tst`. 您可以`repl`通过更改`tst`为来执行此操作`__main__`。

如果要保护通过本地模块的访问，请通过`tst.var = newval`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-11-17T02:14:58.717

使用顶级命名空间，这是不可能的。当你跑

```
var = 1 
```

它将键`var`和值存储`1`在全局字典中。它大致相当于调用`globals().__setitem__('var', 1)`. 问题是您无法在正在运行的脚本中替换全局字典（您可能可以通过弄乱堆栈，但这不是一个好主意）。但是，您可以在辅助命名空间中执行代码，并为其全局变量提供自定义字典。

```
class myglobals(dict):
    def __setitem__(self, key, value):
        if key=='val':
            raise TypeError()
        dict.__setitem__(self, key, value)

myg = myglobals()
dict.__setitem__(myg, 'val', 'protected')

import code
code.InteractiveConsole(locals=myg).interact() 
```

这将启动一个几乎正常运行的 REPL，但拒绝任何设置变量的尝试`val`。你也可以使用`execfile(filename, myg)`. 请注意，这不能防止恶意代码。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-13T23:32:31.830

不，没有

想想看，在您的示例中，您将名称 var 重新绑定到一个新值。您实际上并没有接触 Protect 的实例。

如果您希望重新绑定的名称实际上是某个其他实体的属性，即 myobj.var，那么您可以阻止为实体的属性/属性分配值。但是我认为这不是您想要的示例。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-22T21:28:27.913

一般来说，我发现最好的方法是`__ilshift__`作为 setter 和`__rlshift__`getter 覆盖，由属性装饰器复制。它几乎是最后一个被解析的运算符 (| & ^) 并且逻辑较低。很少用（`__lrshift__`少用，但可以考虑）。

在使用 PyPi 分配包时，只能控制前向分配，因此操作符的实际“强度”较低。PyPi 分配包示例：

```
class Test:

    def __init__(self, val, name):
        self._val = val
        self._name = name
        self.named = False

    def __assign__(self, other):
        if hasattr(other, 'val'):
            other = other.val
        self.set(other)
        return self

    def __rassign__(self, other):
        return self.get()

    def set(self, val):
        self._val = val

    def get(self):
        if self.named:
            return self._name
        return self._val

    @property
    def val(self):
        return self._val

x = Test(1, 'x')
y = Test(2, 'y')

print('x.val =', x.val)
print('y.val =', y.val)

x = y
print('x.val =', x.val)
z: int = None
z = x
print('z =', z)
x = 3
y = x
print('y.val =', y.val)
y.val = 4 
```

输出：

```
x.val = 1
y.val = 2
x.val = 2
z = <__main__.Test object at 0x0000029209DFD978>
Traceback (most recent call last):
  File "E:\packages\pyksp\pyksp\compiler2\simple_test2.py", line 44, in <module>
    print('y.val =', y.val)
AttributeError: 'int' object has no attribute 'val' 
```

与移位相同：

```
class Test:

    def __init__(self, val, name):
        self._val = val
        self._name = name
        self.named = False

    def __ilshift__(self, other):
        if hasattr(other, 'val'):
            other = other.val
        self.set(other)
        return self

    def __rlshift__(self, other):
        return self.get()

    def set(self, val):
        self._val = val

    def get(self):
        if self.named:
            return self._name
        return self._val

    @property
    def val(self):
        return self._val

x = Test(1, 'x')
y = Test(2, 'y')

print('x.val =', x.val)
print('y.val =', y.val)

x <<= y
print('x.val =', x.val)
z: int = None
z <<= x
print('z =', z)
x <<= 3
y <<= x
print('y.val =', y.val)
y.val = 4 
```

输出：

```
x.val = 1
y.val = 2
x.val = 2
z = 2
y.val = 3
Traceback (most recent call last):
  File "E:\packages\pyksp\pyksp\compiler2\simple_test.py", line 45, in <module>
    y.val = 4
AttributeError: can't set attribute 
```

因此`<<=`，在属性中获取价值的操作员是视觉上更干净的解决方案，它不会试图让用户犯一些反思性错误，例如：

```
var1.val = 1
var2.val = 2

# if we have to check type of input
var1.val = var2

# but it could be accendently typed worse,
# skipping the type-check:
var1.val = var2.val

# or much more worse:
somevar = var1 + var2
var1 += var2
# sic!
var1 = var2 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-13T23:48:06.690

在全局命名空间中这是不可能的，但您可以利用更高级的 Python 元编程来防止`Protect`创建对象的多个实例。单[例模式](https://stackoverflow.com/search?q=python%20singleton)就是一个很好的例子。

在 Singleton 的情况下，您将确保一旦实例化，即使引用实例的原始变量被重新分配，该对象也将持续存在。任何后续实例只会返回对同一对象的引用。

尽管有这种模式，但您永远无法阻止重新分配全局变量名本身。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-26T16:54:42.280

是的，有可能，您可以`__assign__`通过 modify处理`ast`。

`pip install assign`

# 测试：

```
class T():
    def __assign__(self, v):
        print('called with %s' % v)
b = T()
c = b 
```

# 你会得到

```
>>> import magic
>>> import test
called with c 
```

该项目位于`https://github.com/RyanKung/assign` 并且更简单的要点：`https://gist.github.com/RyanKung/4830d6c8474e6bcefa4edd13f122b4df`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-10-11T10:42:11.667

我将在 Python 地狱中燃烧，但没有一点乐趣的生活是什么。

* * *

**重要免责声明**：

*   我提供这个例子只是为了好玩
*   我100%确定我不太了解这个
*   从任何意义上说，这样做甚至可能都不安全
*   我认为这不实用
*   我不认为这是一个好主意
*   我什至不想认真尝试实现这一点
*   这不适用于 jupyter（也可能是 ipython）*

* * *

也许您不能重载赋值，但即使在顶级命名空间中，您也可以（至少使用 Python ~3.9）实现您想要的。在所有情况下都很难“正确”地做到这一点，但这里有一个黑客`audithook`s 的小例子：

```
import sys
import ast
import inspect
import dis
import types

def hook(name, tup):
    if name == "exec" and tup:
        if tup and isinstance(tup[0], types.CodeType):
            # Probably only works for my example
            code = tup[0]

            # We want to parse that code and find if it "stores" a variable.
            # The ops for the example code would look something like this:
            #   ['LOAD_CONST', '<0>', 'STORE_NAME', '<0>', 
            #    'LOAD_CONST', 'POP_TOP', 'RETURN_VALUE', '<0>'] 
            store_instruction_arg = None
            instructions = [dis.opname[op] for op in code.co_code]

            # Track the index so we can find the '<NUM>' index into the names
            for i, instruction in enumerate(instructions):
                # You might need to implement more logic here
                # or catch more cases
                if instruction == "STORE_NAME":

                    # store_instruction_arg in our case is 0.
                    # This might be the wrong way to parse get this value,
                    # but oh well.
                    store_instruction_arg = code.co_code[i + 1]
                    break

            if store_instruction_arg is not None:
                # code.co_names here is:  ('a',)
                var_name = code.co_names[store_instruction_arg]

                # Check if the variable name has been previously defined.
                # Will this work inside a function? a class? another
                # module? Well... :D 
                if var_name in globals():
                    raise Exception("Cannot re-assign variable")

# Magic
sys.addaudithook(hook) 
```

这是一个例子：

```
>>> a = "123"
>>> a = 123
Traceback (most recent call last):
  File "<stdin>", line 21, in hook
Exception: Cannot re-assign variable

>>> a
'123' 
```

* * *

*对于 Jupyter，我发现了另一种看起来更简洁的方法，因为我解析的是 AST 而不是代码对象：

```
import sys
import ast

def hook(name, tup):
    if name == "compile" and tup:
        ast_mod = tup[0]
        if isinstance(ast_mod, ast.Module):
            assign_token = None
            for token in ast_mod.body:
                if isinstance(token, ast.Assign):
                    target, value = token.targets[0], token.value
                    var_name = target.id

                    if var_name in globals():
                        raise Exception("Can't re-assign variable")

sys.addaudithook(hook) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-18T22:17:59.853

正如其他人所说，没有办法直接做到这一点。但是，它可以被类成员覆盖，这对许多情况都有好处。

正如 Ryan Kung 所提到的，可以对包的 AST 进行检测，以便如果分配的类实现特定方法，所有分配都会产生副作用。基于他处理对象创建和属性分配案例的工作，修改后的代码和完整描述可在此处获得：

[https://github.com/patgolez10/assignhooks](https://github.com/patgolez10/assignhooks)

该软件包可以安装为：`pip3 install assignhooks`

示例 <testmod.py>：

```
class SampleClass():

   name = None

   def __assignpre__(self, lhs_name, rhs_name, rhs):
       print('PRE: assigning %s = %s' % (lhs_name, rhs_name))
       # modify rhs if needed before assignment
       if rhs.name is None:
           rhs.name = lhs_name
       return rhs

   def __assignpost__(self, lhs_name, rhs_name):
       print('POST: lhs', self)
       print('POST: assigning %s = %s' % (lhs_name, rhs_name))

def myfunc(): 
    b = SampleClass()
    c = b
    print('b.name', b.name) 
```

对其进行检测，例如 <test.py>

```
import assignhooks

assignhooks.instrument.start()  # instrument from now on

import testmod

assignhooks.instrument.stop()   # stop instrumenting

# ... other imports and code bellow ...

testmod.myfunc() 
```

将产生：

> $ python3 ./test.py

```
POST: lhs <testmod.SampleClass object at 0x1041dcc70>
POST: assigning b = SampleClass
PRE: assigning c = b
POST: lhs <testmod.SampleClass object at 0x1041dcc70>
POST: assigning c = b
b.name b 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-26T12:55:23.807

一个丑陋的解决方案是在析构函数上重新分配。但这不是真正的重载分配。

```
import copy
global a

class MyClass():
    def __init__(self):
            a = 1000
            # ...

    def __del__(self):
            a = copy.copy(self)

a = MyClass()
a = 1 
```

# ruby-on-rails - 带有 Rdio 错误的 Rails 3.2 OmniAuth - 403 OAuth 未授权

> ID：11024650
> 
> 赞同：2
> 
> 时间：2012-06-13T23:13:48.343
> 
> 标签：ruby-on-rails, ruby, oauth, omniauth, rdio

我正在尝试使用 OmniAuth 向 Rdio 进行身份验证 - 我的应用程序已经使用 Omniauth 策略成功地通过 Twitter 进行了身份验证

尝试使用omniauth-rdio gem，但似乎失败了：[https ://github.com/nixme/omniauth-rdio](https://github.com/nixme/omniauth-rdio)

任何反馈或见解将不胜感激！我从来没有遇到过 OAuth 的 403 错误，所以我不确定如何继续

错误：

```
OAuth::Unauthorized (403 Forbidden):
  oauth (0.4.6) lib/oauth/consumer.rb:216:in `token_request'
  oauth (0.4.6) lib/oauth/consumer.rb:136:in `get_request_token'
  omniauth-oauth (1.0.1) lib/omniauth/strategies/oauth.rb:29:in `request_phase'
  omniauth (1.1.0) lib/omniauth/strategy.rb:207:in `request_call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:174:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.0) lib/omniauth/builder.rb:48:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/cookies.rb:338:in `call' 
```

我的路线文件：

```
Autotune::Application.routes.draw do

  get "sessions/twitter", as: :twitter_signin
  get "sessions/rdio", as: :rdio_signin

  root to: 'static_pages#home'

  match '/about',   to: 'static_pages#about'

  match '/signout' => 'sessions#destroy', :as => :signout
  match '/auth/:provider/callback', to: 'sessions#create' 
```

Omniauth 初始化器：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :developer unless Rails.env.production?

  provider :twitter, Rails.application.config.twitter[:key], Rails.application.config.twitter[:secret]

  provider :rdio, Rails.application.config.rdio[:key], Rails.application.config.rdio[:secret]

  OmniAuth::Configuration.instance.on_failure = OmniAuthFailureEndpoint
end

class OmniAuthFailureEndpoint < OmniAuth::FailureEndpoint
  def call
    Rack::Response.new(["302 Moved"], 302, 'Location' => "/sessions/failure?#{env['QUERY_STRING']}").finish
  end
end 
```

会话控制器：

```
class SessionsController < ApplicationController

  def rdio
    unless params[:return_to].blank?
      session[:return_to] = params[:return_to]
    end

    redirect_to '/auth/rdio'
  end

  def twitter
    unless params[:return_to].blank?
      session[:return_to] = params[:return_to]
    end

    redirect_to '/auth/twitter'
  end

  def create
    auth_hash = request.env['omniauth.auth']
    token = request.env['omniauth.strategy'].access_token.token
    user = User.sign_in_with_auth_hash(auth_hash, token)

    login_user(user)
    return_to_url(root_path)
  end

  def destroy
    logout_user
    return_to_url('/', notice: "You have successfully logged out")
  end

  def update
    ##update twitter
  end

  private

  def auth_hash
    request.env['omniauth.auth']
  end 
```

应用控制器：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :check_valid_session

  ### authentication:
  helper_method :authenticated?, :session_user, :session_user_id

  def check_valid_session
    begin
      if session[:user_id] and session_user.nil?
        session.clear
        flash[:warning] = "Your session has expired"
      end
    rescue
      logout_user
    end
  end

  # returns true if the currently accessed user account is the same as the session user
  def is_session_user?
    id_or_username = params[:user_id]
    case id_or_username
      # if the id/username is for the current user, or the id is not provided then use the current user
      when session_user_id, nil
        true
      else
        false
    end
  end

  def authenticated?
    !session_user_id.blank?
  end

  def session_user
    @session_user ||= User.find(session[:user_id]) if authenticated?
  end

  def session_user_id
    session[:user_id]
  end

  # ensures that the user is authenticated
  def authenticate_user!(options = {})
    defaults = {
        return_to: request.original_url,
        controller: :session,
        action: :twitter,
        raise_exception: false

    }

    defaults.merge!(options)
    options = defaults;

    if authenticated?
      true
    elsif options[:raise_exception]
      raise "User is not authenticated"
    else
      session[:return_to] = options[:return_to]
      redirect_to '/auth/twitter'
      false
    end
  end

  def login_user(user)
    # this is the one value we need to retain from the session after we reset it
    return_to = session[:return_to]
    update_session(user)
    session[:return_to] = return_to
  end

  def update_session(user = session_user)
    reset_session
    @session_user = user
    refresh_session
  end

  def refresh_session
    session[:user_id] = @session_user.id
    session[:twitter_id] = @session_user.twitter_id
    session[:twitter_name] = @session_user.twitter_name
    session[:rdio_id] = @session_user.rdio_id
  end

  def logout_user
    reset_session
    @session_user = nil
  end

  def return_to_url(default_return_to = nil, options = {})
    return_to = params[:return_to] || session[:return_to] || default_return_to
    if !return_to.blank?
      session[:return_to] = nil
      redirect_to return_to, options
      true
    else
      false
    end
  end

end 
```

用户型号：

```
class User < ActiveRecord::Base

  def self.sign_in_with_auth_hash(auth_hash, access_token)
    user = User.find_by_auth_hash(auth_hash)

    if user
      return user
    end

    if auth_hash[:provider] == 'twitter'
      user = User.new
      #user.name = auth_hash['info']['name']
      user.twitter_id = auth_hash['uid']
      user.twitter_name = auth_hash['info']['nickname']
      user.twitter_token = auth_hash['credentials']['token']
      user.twitter_secret = auth_hash['credentials']['secret']
      user.email = rand(1000000000).to_s
      user.encrypted_password = 'notnull'
    end

    if auth_hash[:provider] == 'rdio'
      user = User.new
      #user.name = auth_hash['info']['name']
      user.rdio_id = auth_hash['uid']
      user.rdio_name = auth_hash['info']['nickname']
      user.rdio_token = auth_hash['credentials']['token']
      user.rdio_secret = auth_hash['credentials']['secret']
      user.email = rand(1000000000).to_s
      user.encrypted_password = 'notnull'
    end

    user.save!
    user
  end

  def self.find_by_auth_hash(auth_hash)
    case auth_hash[:provider]
      when 'twitter'
        User.where(twitter_id: auth_hash['uid']).first
      else
        nil
    end
  end  
end 
```

# x86 - 使用 SSE2 模拟 packusdw 功能

> ID：11024652
> 
> 赞同：7
> 
> 时间：2012-06-13T23:14:00.137
> 
> 标签：x86, sse, intrinsics, sse2, sse4

我正在根据[Intel [pdf]](http://software.intel.com/sites/landingpage/legacy/mmx/MMX_App_24-16_Bit_Conversion.pdf)描述的算法在[pixman](http://cgit.freedesktop.org/pixman/)中实现快速 x888 -> 565 像素转换功能。他们的代码转换 x888 -> 555 而我想转换为 565。不幸的是，转换为 565 意味着设置了高位，这意味着我不能使用有符号饱和包指令。无符号打包指令直到 SSE4.1 才添加。我想用 SSE2 实现它的功能或找到另一种方法。`packusdw`

此函数采用两个 XMM 寄存器，每个寄存器包含 4 个 32 位像素，并输出一个包含 8 个转换后的 RGB565 像素的 XMM 寄存器。

```
static force_inline __m128i
pack_565_2packedx128_128 (__m128i lo, __m128i hi)
{
    __m128i rb0 = _mm_and_si128 (lo, mask_565_rb);
    __m128i rb1 = _mm_and_si128 (hi, mask_565_rb);

    __m128i t0 = _mm_madd_epi16 (rb0, mask_565_pack_multiplier);
    __m128i t1 = _mm_madd_epi16 (rb1, mask_565_pack_multiplier);

    __m128i g0 = _mm_and_si128 (lo, mask_green);
    __m128i g1 = _mm_and_si128 (hi, mask_green);

    t0 = _mm_or_si128 (t0, g0);
    t1 = _mm_or_si128 (t1, g1);

    t0 = _mm_srli_epi32 (t0, 5);
    t1 = _mm_srli_epi32 (t1, 5);

    /* XXX: maybe there's a way to do this relatively efficiently with SSE2? */
    return _mm_packus_epi32 (t0, t1);
} 
```

我想到的想法：

*   减去 0x8000, `_mm_packs_epi32`，将 0x8000 重新添加到每个 565 像素。我已经尝试过了，但我无法做到这一点。

    ```
     t0 = _mm_sub_epi16 (t0, mask_8000);
      t1 = _mm_sub_epi16 (t1, mask_8000);
      t0 = _mm_packs_epi32 (t0, t1);
      return _mm_add_epi16 (t0, mask_8000); 
    ```

*   随机播放数据而不是打包数据。适用于 MMX，但由于 SSE 16 位随机播放仅适用于高 64 位或低 64 位，因此会变得混乱。

*   保存高位，将它们设置为零，打包，然后恢复它们。看起来很乱。

有没有其他（希望更有效）的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T07:06:15.317

您可以先签署扩展值，然后使用`_mm_packs_epi32`：

```
t0 = _mm_slli_epi32 (t0, 16);
t0 = _mm_srai_epi32 (t0, 16);
t1 = _mm_slli_epi32 (t1, 16);
t1 = _mm_srai_epi32 (t1, 16);
t0 = _mm_packs_epi32 (t0, t1); 
```

您实际上可以将此与之前的班次结合起来以保存两条指令：

```
t0 = _mm_slli_epi32 (t0, 16 - 5);
t0 = _mm_srai_epi32 (t0, 16);
t1 = _mm_slli_epi32 (t1, 16 - 5);
t1 = _mm_srai_epi32 (t1, 16);
t0 = _mm_packs_epi32 (t0, t1); 
```

# php - PHP MySQLi未定义方法错误

> ID：11024654
> 
> 赞同：2
> 
> 时间：2012-06-13T23:14:11.620
> 
> 标签：php, mysqli

我正在使用 MySQLi 创建一些基本的 OO 脚本，并在使用 stmt_init()、prepare() 或 query() 中的任何一个时出现未定义的方法错误……同时在 connect_errno() 中也出现错误。我确实知道在我的 php.ini 中启用了 mysqli 扩展（未注释），并且 phpinfo() 同时启用了 mysqli 和 mysqlnd ...所以不知道为什么我无法访问方法/属性。我得到的错误是：致命错误：调用未定义的方法 mysqli::connect_error()

```
class db {
    public $host = 'localhost';
    public $username = 'root';
    public $password = '';
    public $database = 'molecule';
    public $mysqli = '';
    function __construct() {
        $this->mysqli = new mysqli($this->host, $this->username, $this->password, $this->database);
    return $this->mysqli;
    }   
}

class nodeModel {
    function __construct() {
        $this->mysqli = new db;
        if($this->mysqli->connect_error()){ printf("Database Connection failed: %s\n", $this->mysqli->connect_error()); }
    }

    function insertNode() {
        $this->insert = $this->mysqli->stmt_init();
        $this->insert->prepare("INSERT INTO node(node_name, node_link, node_comment) VALUES (?, ?, ?)");
        $this->insert->bind_param($this->node_name, $this->node_link, $this->node_comment);
        if($this->insert->execute()) {
            $this->insert_id = $this->mysqli->insert_id;
        }
        $this->insert->close();
        print_r($this->insert_id);
        return $this->insert_id;
    } 
```

* * *

所以，要让 insertNode() 方法工作......这些是我放在 nodeModel 类中的其他方法

```
public function setNodeName($value) { $this->nodeName = $value; }
public function setNodeLink($value) { $this->nodeLink = $value; }
public function setNodeComment($value) { $this->nodeComment = $value; }
public function getNodeName() { return $this->nodeName; }
public function getNodeLink() { return $this->nodeLink; }
public function getNodeComment() { return $this->nodeComment; }

public $insert_id;
function insertNode($nodeName, $nodeLink, $nodeComment) {
        $this->mysqli->stmt_init();
        $this->mysqli->prepare("INSERT INTO node(node_name, node_link, node_comment) VALUES (?, ?, ?)");
        $this->mysqli->bind_param($this->node_name, $this->node_link, $this->node_comment);
        if($this->mysqli->execute()) {
            $this->insert_id = $this->mysqli->insert_id;
        }
        $this->mysqli->close();
        print_r($this->insert_id);
        return $this->insert_id;
    } 
```

如何将变量传递给方法？我正在尝试这个...

```
$connect = new db();
$db = new nodeModel($connect);
$db->setNodeName('My Node Title');
$db->setNodeLink('My Node Link');
$db->setNodeComment('My Node Comment. This one should be longer so I will write more stuff');
$db->insertNode($db->getNodeName(), $db->getNodeLink(), $db->getNodeComment()); 
```

但这行不通。我的困惑实际上是关于类方法内部的 OO 范围......我不确定我应该传递什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:58:56.940

试试这个，通过依赖注入将连接对象传递给模型：

```
<?php 
class db{
    protected $mysqli;
    function __construct($host,$username,$password,$database) {
        if(!$this->mysqli instanceof mysqli){
            $this->mysqli = new mysqli($host, $username, $password, $database);
            if ($this->mysqli->connect_errno) {
                die("Failed to connect to MySQL: (" . $this->mysqli->connect_errno . ") " . $this->mysqli->connect_error);
            }
        }
    }
}

class nodeModel{
    function __construct($connection) {
        $this->mysqli = $connection;
    }

    function status() {
        return print_r($this,true);
    }
}
//Create the database object
$connect = new db('localhost','root','password','db');

//Inject the database object into the model
$db = new nodeModel($connect);

//Example method inside the model class
print_r($db->status());
/*
nodeModel Object
(
    [mysqli] => db Object
        (
            [mysqli:db:private] => mysqli Object
                (
                    [affected_rows] => 0
                    [client_info] => mysqlnd 5.0.8-dev - 20102224 - $Revision: 310735 $
                    [client_version] => 50008
                    [connect_errno] => 0
                    [connect_error] => 
                    [errno] => 0
                    [error] => 
                    [field_count] => 0
                    [host_info] => localhost via TCP/IP
                    [info] => 
                    [insert_id] => 0
                    [server_info] => 5.5.16
                    [server_version] => 50516
                    [sqlstate] => 00000
                    [protocol_version] => 10
                    [thread_id] => 28
                    [warning_count] => 0
                )

        )

)
*/
?> 
```

# c# - 无法从 'System.Collections.Generic.IEnumerable 转换 ' 到 'System.Linq.IQueryable

> ID：11024655
> 
> 赞同：2
> 
> 时间：2012-06-13T23:14:14.723
> 
> 标签：c#, linq

我收到以下错误实例参数：

> 无法从“System.Collections.Generic.IEnumerable”转换为“System.Linq.IQueryable”

那么问题是变量 Assay.assayKey 在表中可能为空，所以我不能有 intassayKey 而不是 int？化验键。我被这件事难住了，有人可以帮忙吗？谢谢

```
 Search Entry
        {

        int id {get;set;}
        int? key {get;set;}
        int[] selectedKeys {get;set;}
        }

        Assay
       {
        int id {get;set;}
        int? AssayKey { get; set; }
       }

        CollObject
        {
         Ienumerable<int> keys {get;set;}
        } 
```

在我的控制器操作方法中，正在执行以下操作来检索 id 数组：

```
 SearchEntry.selectedKeys = (from assays in db.assay
                                   where CollObject.Keys.Contains(assay.AssayKey)
                                   select assays.id).toArray(); 
```

好吧，我找到了解决方案。由于 Assay Key 是一个可为空的 int，我只需要做这样的事情

```
.Contains(assays.AssayKey ??0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:26:26.393

问题是我不能在可为空的 int 上使用 .contains，所以我必须做这样的事情才能让它工作

```
.Contains(assays.AssayKey ??0) 
```

# c - 省略函数声明

> ID：11024661
> 
> 赞同：1
> 
> 时间：2012-06-13T23:14:44.333
> 
> 标签：c, compiler-construction, include

在任何情况下都可以从源文件中省略函数声明吗？我有一个无法编译的 C 项目，我不知道为什么。据我所知，当编译器（GCC 4.4.1）在'system.h'中找到函数'sysData'的声明时，找不到'sepData'typedef的声明。

来自脓毒症.h

```
typedef struct {
    int16 intensity;
    int16 offset;
} sepData; 
```

来自脓毒症.c

```
sepData sepR, sepIR; 
```

从系统.h

```
void sysData(sepData *sepR, sepData *sepIR); 
```

来自 system.c

```
#include "system.h"
#include "sepsis.h"

extern sepData sepR, sepIR;

void sysData(sepData *sepR, sepData *sepIR)
{
} 
```

如果我从“system.h”中删除“sysData”的声明，则项目编译不会出错。我对 C 不太了解，我认为包含这样的声明是强制性的。有谁能够解释这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:19:39.627

当您包含时`system.h`，您还没有声明类型`sepData`。

切换包含的顺序，然后重试。

```
#include "sepsis.h"
#include "system.h"

extern sepData sepR, sepIR;

//you might also want to re-think your arguments' names
void sysData(sepData *_sepR, sepData *_sepIR)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T23:21:20.767

```
#include "system.h"
#include "sepsis.h" 
```

如果它本身`system.h`不`#include "sepsis.h"`存在，那么`sepData`当您对函数进行原型设计时，类型将不知道`sysData()`，并且您会收到错误消息。您可以通过交换两个标题的顺序来解决这个问题：

```
#include "sepsis.h"
#include "system.h" 
```

但这只修复了这个特定的编译单元。如果您在此应用程序中有其他编译单元，则需要注意`#include`行的顺序，这很烦人。也许`system.h`需要`#include "sepsis.h"`自己——并`sepsis.h`通过通常的咒语防止多重包含：

```
#ifndef _SEPSIS_H_
#define _SEPSIS_H_
...
#endif // _SEPSIS_H_ 
```

您的代码库能够在没有原型的情况下进行编译，因为您在函数声明之前`sysData()`没有*使用过该函数。*如果您在声明之前使用了该函数，我希望编译器会给您一条*警告*消息，并假设每个参数都应该是 an`int`并且返回类型也应该是 an `int`。（旧的 K&R 规则。）这当然行不通，但它*为什么*行不通可能并不明显。（耶 C.）

# java - 在 Java 中使用本地化时如何完整显示年份？

> ID：11024664
> 
> 赞同：3
> 
> 时间：2012-06-13T23:14:55.427
> 
> 标签：java, date, date-format

```
private String setDate(int day) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(new Date());
    cal.add(Calendar.DATE, + day);
    DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT, locale);
    String formattedDate = df.format(cal.getTime());
    return formattedDate;
} 
```

上述方法返回“14/06/12”`Locale.UK`和“06/14/12” `Locale.US`。

我怎样才能让它完整地返回一年，即美国地区的“14/06/2012”和英国地区的“06/14/2012”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T02:31:07.890

**JHS 的**回答几乎是完整的。唯一需要做的就是让它适用于所有语言环境。

```
import java.text.SimpleDateFormat;
import java.text.DateFormat;
import java.text.ParseException;
import java.util.Calendar;
import java.util.Locale;

class ChangeDateFormat
{
    private String setDate(int day, Locale locale) {
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.DATE, +day);
        DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT, locale);
        if (df instanceof SimpleDateFormat)
        {
            SimpleDateFormat sdf = (SimpleDateFormat) df;
            // To show Locale specific short date expression with full year
            String pattern = sdf.toPattern().replaceAll("y+","yyyy");
            sdf.applyPattern(pattern); 
            return sdf.format(cal.getTime());
        }
        String formattedDate = df.format(cal.getTime());
        return formattedDate;
    }

    public static void main(String[] args)
    {
        ChangeDateFormat cdf = new ChangeDateFormat();        
        System.out.println(cdf.setDate(1, Locale.JAPAN));
    }
} 
```

根据**Greg 的**评论（感谢 Greg），以下是 javadoc 中的相关说明：

*“如果你想对格式或解析有更多的控制权，（或者想给你的用户更多的控制权），你可以尝试将`DateFormat`你从工厂方法中得到的转换为`SimpleDateFormat`. 这适用于大多数国家；只要记住把它放在一个`try`街区里，以防你遇到不寻常的东西。”*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T23:40:40.280

您将必须获取`locale`模式并将额外的附加`yy`到格式中。

这可以帮助你 -

```
private String setDate(int day) {
  Calendar cal = Calendar.getInstance();
  cal.setTime(new Date());
  cal.add(Calendar.DATE, + day);    
  DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT, locale);
  // code modified from here
  SimpleDateFormat sdf = (SimpleDateFormat) df;
  sdf.applyPattern(sdf.toPattern().replace("yy","yyyy")); // replacing to yyyy
  String formattedDate = sdf.format(cal.getTime());
  return formattedDate;
} 
```

这适用于最终返回 2 位数年份的所有模式。

我有`sdf.toPattern.concat("yy")`它只对那些最终`Locale`拥有`yy`的人有用。不过**Dragon66**的使用想法`replace("yy", "yyyy")`对所有人都适用`Locale`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T23:19:44.753

您必须希望您`DateFormat`是 的一个实例`SimpleDateFormat`，以便您可以获取它的模式并将其从 2 年更改为 4 年。

# ios - GCD = 更好的性能与 UI 无关？

> ID：11024666
> 
> 赞同：0
> 
> 时间：2012-06-13T23:15:04.007
> 
> 标签：ios, performance, grand-central-dispatch

我一直在尝试阅读 GCD 并试图弄清楚。我读了很多地方，应该总是使用 GCD，如果一个人正在做一些繁重的工作，这会冻结 UI，我明白这一点，但 GCD 也可以仅用于性能考虑。假设我有一个需要运行 10 次的循环，每次迭代都需要大量数据。运行不同线程的一半迭代是否会提高性能，以便两个线程共享工作负载，还是仍然需要相同的时间来完成循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:21:02.443

这完全取决于您对循环逻辑的设计，您的问题没有正确答案，因为您仍然需要定义如何加入和合并您对此数据进行的 2 个不同处理，数据将在哪里已保存，您要解决的逻辑问题是什么

尽管如此，您尝试在两个线程中实现的目标可能会导致您过早优化，因此在开始优化代码之前，请考虑是否值得您将引入代码的复杂性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T07:39:39.513

如果您的设备有两个处理器，这将有助于运行两个串行 gdc 队列。但是，这个想法是您不应该关心，调用`dispatch_queue_create`并`DISPATCH_QUEUE_CONCURRENT`让设备确定并行运行的最佳任务数量是多少。

# android - 如何将选项卡作为视图处理？

> ID：11024668
> 
> 赞同：0
> 
> 时间：2012-06-13T23:15:20.433
> 
> 标签：android, android-tabhost, android-tabactivity, android-tabs

我已将选项卡创建为视图。但是我没有找到有关如何操作这些视图的任何信息。例如，如果我想在一个中显示列表视图，在另一个中显示表单（表格布局）。我可以为每个选项卡设置单独的布局吗？更重要的是，我在哪里包含有关每个选项卡的 java 代码？

这是我的java代码：

```
public class TabWorkEntryActivity extends TabActivity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  setContentView(R.layout.tabworkentry);

TabHost  mTabHost = getTabHost();

  mTabHost.addTab(mTabHost.newTabSpec("top10").setIndicator("Top 10").setContent(R.id.Top_10));
  mTabHost.addTab(mTabHost.newTabSpec("billable").setIndicator("Billable").setContent(R.id.Billable));
  mTabHost.addTab(mTabHost.newTabSpec("product").setIndicator("Product").setContent(R.id.Product));
       mTabHost.addTab(mTabHost.newTabSpec("regular").setIndicator("Regular").setContent(R.id.General));

  mTabHost.setCurrentTab(3);

} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:27:31.240

放置内容和处理选项卡有两种主要方式：1.您创建一个活动，并将活动放在 tabHost 2.您处理内容，在相同的代码中添加选项卡（吹掉所有设置的东西）我总是使用第二种方式，因为我的代码是有组织的，所以它不是那么大......

这是一个示例布局，内容作为另一个布局......

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabHost
        android:id="@+id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <LinearLayout
                    android:id="@+id/checkall_tab"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <include
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        layout="@layout/checkall" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/view_tab"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <include
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        layout="@layout/viewall" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/run_program"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <include
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        layout="@layout/programs" />
                </LinearLayout>

            </FrameLayout>
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:25:13.970

我使用 Android 4.0 tabView 制作了这段代码。尝试理解它...您必须实例化 TabHost，然后使用此对象创建选项卡。然后将选项卡添加到 TabHost。要按 id 查找视图，您无需传递正在访问的选项卡上的“视图”。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tabHost = (TabHost) findViewById(R.id.tabhost);
    tabHost.setup();

    checkAll = tabHost.newTabSpec("checkAll");
    viewAll = tabHost.newTabSpec("viewAll");
    runProgram = tabHost.newTabSpec("runProgram");

    viewAll.setContent(R.id.view_tab);
    viewAll.setIndicator("View All");
    tabHost.addTab(viewAll);

    checkAll.setContent(R.id.checkall_tab);
    checkAll.setIndicator("Check All");
    tabHost.addTab(checkAll);

    runProgram.setContent(R.id.run_program);
    runProgram.setIndicator("Run program");
    tabHost.addTab(runProgram);
} 
```

# c# - c#多态属性

> ID：11024669
> 
> 赞同：1
> 
> 时间：2012-06-13T23:15:22.727
> 
> 标签：c#, polymorphism

我有一个简单的问题。有一个基类 Product。以及手镯、耳环和戒指等派生类。但是环类有一个额外的属性。

我将如何达到该 size 属性并在下面的代码中的方法中使用它。

```
public class Product
{
    public int id;
    public string title;
}

public class Bracelet : Product
{

}

public class Earring : Product
{

}

public class Ring : Product
{
    public int size;
}

Product product;
if(category = 1) // this is a  Bracelet
{
    product = new Bracelet();
}
else if(category = 2) // this is a Earring
{
    product = new Earring();
}
else if(category = 3) // Wola, this is a ring
{
    product = new Ring();
    product.size = 4; // I cant reach size.. I need to assign size of the ring to decrease stock correctly.
}

product.decreaseStock(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:18:05.813

只需先在本地声明值：

```
else if (category == 3) 
{
    var ring = new Ring();
    ring.size = 4;
    product = ring;
} 
```

这样，您可以`Ring`在`if`块中访问变量作为 a ，但它也将其分配给更通用的`product`变量。

或者，您可以只使用初始化语法：

```
else if (category == 3) 
{
    product = new Ring { size = 4 };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:23:15.920

柯克沃尔的答案可能是最好的，但另一种解决方案是使用“as”关键字：

```
(product as Ring).size = 4; 
```

或铸造它：

```
((Ring)product).size = 4; 
```

此外，请确保不要将赋值运算符 (=) 与相等运算符 (==) 混淆。例如，它应该是 if(category == 3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T23:35:35.867

在这种情况下，由于您在创建 之后才更改大小`Ring`，因此可以将其作为 a`Ring`而不是 a来处理`Product`：

```
Ring ring = new Ring();
ring.size = 4;
product = ring; 
```

在我们有 a 的情况下，`Product`我们知道`Ring`我们可以施放。如果它实际上是一个，这将导致运行时错误`Earring`：

```
Ring ring = (Ring)product;
ring.size = 4; 
```

或更简洁地说：

```
((Ring)product).size = 4; 
```

如果产品可能是 a`Ring`也可能不是，并且我们想设置 `size`它是否是，我们当然可以测试：

```
if(product is Ring)
  ((Ring)product).size = 4; 
```

通常将测试和演员相结合是明智的：

```
Ring ring = product as Ring;
if(ring != null)
  ring.size = 4; 
```

大量选角是一个不好的迹象。一般来说，我们应该在我们关心的级别处理一个对象——只有在`Product`我们只知道它是一个`Product`. 可以帮助做到这一点的一件事是通过覆盖访问方法或属性：

```
public class Product
{
  /* leave out other stuff */
  public virtual bool NeedsLargeBox
  {
    get
    {
      return false; // most products don't
      //(this property could also be abstract to force all derived
      //classes to decide upon how it operates)
    }
  }
}

public class Ring : Product
{
  public int size;
  public virtual bool NeedsLargeBox
  {
    get
    {
      return size > 100;
    }
  }
} 
```

现在，虽然`Ring`它自己处理`size`，但代码可以处理一堆`Product`对象并决定有多少需要大盒子和多少小盒子，而无需`size`直接访问该代码（甚至知道它，它甚至可以在`Ring`创建之前编写和工作） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T23:20:42.333

您将不得不覆盖 Ring 中的 reductionStock 方法。

因此，在产品中，首先将减少库存方法标记为虚拟。

```
public class Product
{
    public int id;
    public string title;

    public virtual void DecreaseStock()
    {
        //your decrease logic here
    }
} 
```

然后在环中，将考虑到大小的新逻辑放入覆盖方法中

```
public class Ring : Product
{
    public int size;
    public override void DecreaseStock()
    {
        //your special logic to deal with size here
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T23:21:15.133

您最好通过 C# 阅读 Jeffrey Richter 的 CLR。

你不能通过引用来引用`ring`' 的属性`product`，因为 CLR 不会知道这个对象是环，这就是为什么 CLR 不允许你改变它的大小。相反，您应该使用：

```
Ring ring = new Ring();
ring.size = 4; 
```

如果您想通过`product`引用访问此属性，则应在基类中声明它。

# jquery - fullCalendar gotoDate 和 getDate 可能存在的错误

> ID：11024671
> 
> 赞同：0
> 
> 时间：2012-06-13T23:15:44.677
> 
> 标签：jquery, jquery-ui, fullcalendar

我不希望人们试图在我的 fullCalendar 中创建过去的事件。因此，一旦他们选择了日期/时间，我会进行如下快速检查：

```
select: function(start, end, allDay) { 
        // need to check the day first. If the selected day/time < today, throw an alert
        // otherwise allow the booking of the conference.
            var now = calendar.fullCalendar('getDate');
            if (start < now )
            {
                alert('You cannot book a conference in the past!' +start +now);
                calendar.fullCalendar( 'unselect' );
            }
            else
            {
                             // other stuff here
                            } 
```

这很好用。如果我点击早于现在的时间或日期，我会收到一条警报，说我不能这样做。完美对不对？

我正在使用 jQuery DatePicker，我可以在一个小日历视图中单击一个日期，然后在我的 fullCalendar 中转到该日期，该日期默认为仅议程视图。它工作得很好：

```
$( "#datepicker" ).datepicker({
        changeMonth: true,
        changeYear: true,
        minDate: 0, 
        maxDate: "+1Y",
        onSelect: function(dateText) {
            // fullCalendar only accepts a date in a specific format so parse the date
            // from the jQuery DatePicker widget and use that result to move the calendar
            // to the correct day.
            var pd = $.fullCalendar.parseDate(dateText);
            $('#calendar').fullCalendar('gotoDate', pd);
        }

    }); 
```

这个例程让我在议程视图中处于正确的一周。然后我可以选择在该周工作的日期。但是，如果我尝试在使用 gotoDate 方法去的日期之前的日期创建事件，我也会收到关于过去创建事件的错误。似乎“gotoDate”方法实际上是在设置日期。我可以在该日期或之后创建事件，但不能在该日期之前创建。

如果我只使用 fullCalendar 的导航方法，它应该可以完美运行。但是，由于 fullCalendar 没有“跳转到日期”选项或小部件，我使用 DatePicker 自己创建，我认为这是合乎逻辑的事情。

那么，这是一个错误吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:22:56.497

是的，感谢 Kyoka 和 Ganeshk 的评论，回答了我自己的问题。碰巧的是，fullCalendar('getDate') 函数返回当前选定的日期，而不是“今天”。这只是我对文档的误解。那么解决方案是使用一个新的 Date 对象，在这种情况下它可以完美地工作：

```
select: function(start, end, allDay) { 
    // need to check the day first. If the selected day/time < today, throw an alert
    // otherwise allow the booking of the conference.
        var now = new Date();
        if (start < now )
        {
            alert('You cannot book a conference in the past!');
            calendar.fullCalendar( 'unselect' );
        }
        else
        {
                         // other stuff here
                        } 
```

希望这对其他人也有帮助。

# ruby-on-rails - 使用现有的 mysql 数据库创建一个新的 Rails 应用程序

> ID：11024673
> 
> 赞同：0
> 
> 时间：2012-06-13T23:15:57.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我已经设置了一个现有的 mysql 数据库，并且想简单地设置一个新的 rails 以便我的客户可以查看和编辑数据库中的记录。如何设置链接到现有数据库的脚手架。数据库名称是“Products”，只有一个名为“pins”的表。

引脚表：

```
+----------------+---------------+------+-----+---------+----------------+
| Field          | Type          | Null | Key | Default | Extra          |
+----------------+---------------+------+-----+---------+----------------+
| id             | int(11)       | NO   | PRI | NULL    | auto_increment |
| type           | text          | YES  |     | NULL    |                |
| title          | text          | YES  |     | NULL    |                |
| description    | text          | YES  |     | NULL    |                |
| price          | text          | YES  |     | NULL    |                |
| img_src        | text          | YES  |     | NULL    |                |
| source         | text          | YES  |     | NULL    |                |
| sr_id          | text          | YES  |     | NULL    |                |
| category       | varchar(1000) | YES  |     | NULL    |                |
| pinner         | text          | YES  |     | NULL    |                |
| pinner_id      | text          | YES  |     | NULL    |                |
| board_cat      | text          | YES  |     | NULL    |                |
| board_name     | text          | YES  |     | NULL    |                |
| board_url      | text          | YES  |     | NULL    |                |
| like_count     | bigint(20)    | YES  |     | NULL    |                |
| repins_count   | bigint(20)    | YES  |     | NULL    |                |
| comments_count | bigint(20)    | YES  |     | NULL    |                |
| pinned_count   | bigint(20)    | YES  |     | NULL    |                |
| actions_count  | bigint(20)    | YES  |     | NULL    |                |
| error_404      | bigint(20)    | YES  |     | NULL    |                |
| pin_at         | text          | YES  |     | NULL    |                |
| social_rank    | bigint(20)    | YES  |     | NULL    |                |
| created_at     | text          | NO   |     | NULL    |                |
| updated_at     | text          | NO   |     | NULL    |                |
| isgiftable     | int(11)       | YES  |     | NULL    |                |
| sr_id_int      | bigint(20)    | YES  |     | NULL    |                |
+----------------+---------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:22:24.190

您可以在 中设置数据库名称`config/database.yml`。你会想要一个`Pin`模型，它会自动映射到正确的表。数据库中的字段将自动映射到模型中的属性，但如果字段的名称不可靠，您可能需要编写一些胶水。

如果没有更多信息，很难提供比这更多的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:25:16.730

您是否尝试在`database.yml`您正在创建的较新项目上使用您的项目？这样做并在较新的项目中保持相同的类名可能会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T01:03:08.557

您所要做的就是打开 config/database.yml 并将开发/生产数据库信息调整为您已经在使用的数据库信息。假设您的模型和迁移指向具有相同名称的表，您不必更改程序中的任何其他内容。

# azure - 无法通过 CNAME URI 访问 blob

> ID：11024674
> 
> 赞同：1
> 
> 时间：2012-06-13T23:15:59.127
> 
> 标签：azure, uri, blob, blobstore, cname

我创建了一个存储帐户并创建了一个公用文件夹（称为静态）。在静态里面我推送了一个文件test.swf。现在，我可以从任何浏览器导航到 myproject.blob.core.windows.net/static/test.swf 并获得加载或保存文件的选项。奇怪的是我在我的域上设置了一个 CNAME (static.mydomain.com) 以指向 myproject.blob.core.windows.net。我等待 DNS 发挥它的魔力。我验证（通过 ping）myproject.blob.core.windows.net 和 static.mydomain.com 都指向同一个 IP。但是，使用 static.mydomain.com/static/test.swf 的所有这些“相同性”会返回以下错误 xml：

```
<Error>
    <Code>InvalidUri</Code>
    <Message>The requested URI does not represent any resource on the server.
             RequestId:a172a9cf-b60e-451e-9732-b715276b03d0 
             Time:2012-06-13T23:06:44.5477230Z
    </Message>       
    <UriPath>http://static.mydomain.com/static/test.swf</UriPath>
</Error> 
```

即使尝试 http:///static/test.swf 也会给出该错误消息。那么在这个过程中我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:18:22.957

除了创建 CNAME 并将其指向您的“blob 存储域”（代表您的存储帐户）之外，您还需要通过将另一个 CNAME 指向**verify.azure.com**来验证该 CNAME 。

![在此处输入图像描述](../Images/21e98cf02d693075e945fe9af4eb64d4.png)

您可以在 MSDN 上阅读所有相关内容：[如何注册自定义子域名以在 Windows Azure 中访问 Blob](http://msdn.microsoft.com/en-us/library/windowsazure/ee795179.aspx)（请注意，本指南适用于“旧”门户）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-23T03:53:07.420

已接受答案中包含的链接不再可用。

为了节省其他人一些时间，您不再需要创建验证子域，而是现在可以通过 Azure 门户中的“管理自定义域”直接指定子域。

1.  在 DNS 记录中为子域创建 CNAME。
2.  登录 Azure 门户并选择 - 容器 -> 选择容器 -> '管理域'。
3.  输入您创建的子域。

# delphi - 从控制台读取 Unicode/ANSI

> ID：11024675
> 
> 赞同：1
> 
> 时间：2012-06-13T23:16:22.493
> 
> 标签：delphi, unicode, cmd, delphi-7

我用它从 cmd (Windows Shell) 中读取一个宽字符串。

```
var
 pBuffer       : array [0..250] of WideChar;
 aBuffer       : array [0..250] of Char;
 RealUnicode   : Integer;
 ExtendedAscii : Integer;
begin
 RealUnicode   := 2;
 ExtendedAscii := 1;
 // ... pipes etc...
 CreateProcessW(nil, pwidechar(ComSpec + ' /U'), nil, nil, TRUE, (CREATE_NEW_CONSOLE or CREATE_BREAKAWAY_FROM_JOB), nil, nil, StartupInfo, ProcessInfo);
 // ...
 while true do begin
  sleep (10); // Reduce CPU Usage
  GetExitCodeProcess(ProcessInfo.hProcess, ExitCode);
  if ExitCode <> STILL_ACTIVE then Break;
  FillChar(pBuffer,SizeOf(PBuffer), #0);
  ReadFile(hoRead, pBuffer[0], 250, BytesRead, nil);    
  if BytesRead > 0 then begin
   if (IsTextUnicode(@pBuffer, BytesRead, @RealUNICODE) or IsTextUnicode(@pBuffer, BytesRead, @ExtendedAscii) then begin
    MessagBoxW(0,dbuffer,'',0);
   end else begin
    FillChar    (aBuffer,SizeOf(aBuffer ), #0);
    CopyMemory  (@aBuffer , @pBuffer, BytesRead * 2);
    MessageBoxA (0, aBuffer, '', 0);
   end;
  end;
 end;
end; 
```

这个片段实际上很好用。它确保如果 ansi 字符串/字符被写入控制台（例如 - ping.exe），它会在稍后获得 ANSI 输出。不幸的是，有一个小故障。我使用 ping.exe，它可以正常工作，直到它返回到 Unicode 部分。这实际上很难解释，但我希望你们知道我的意思。感谢您的帮助。

编辑：当 ping.exe 完成时，代码段出于某种原因返回空字符串。尽管 readbytes > 0

编辑2： ![在此处输入图像描述](../Images/6d8d3e50ea5955cb2ecbd504f7971a93.png)

说明：我使用 CreateProcesW 启动 cmd，设置管道等，然后读取第一个缓冲区字节（Unicode 格式）。然后我输入 ipconfig 并切换回 ANSI。然后它读取字节，它们是空的 ANSI 字符串。之后，“程序”（不是 cmd）有时会崩溃。

EDIT3：我在这里有一个例子（带有源代码和二进制文件）。它是用delphi7和tntcontrols编译的。如果您没有 tntcontrols，只需在表单中添加一个备忘录（名称：Memo1）。并将宽字符串更改为字符串和/或尝试使用 messageboxW 对其进行调试。 [http://dl.dropbox.com/u/349314/UNICODE%20Shell%20Example.rar](http://dl.dropbox.com/u/349314/UNICODE%20Shell%20Example.rar) 这个例子不关心ansi输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:12:11.573

控制台无法正确显示所有 Unicode 字符。这是因为控制台窗口限制。控制台进程的输出是 OEM 编码（或 DOS 编码），而不是 ANSI。

您可以通过将输出重定向到文件来检查它。通常，如果文件包含非英文字符，文件将无法在记事本中正确显示。

当您运行`cmd.exe`时，`/u`您可以预期它将 Unicode 字符写入管道。在这种情况下，您应该始终将输出视为 Unicode。

* * *

您通过调用 Wide-version 创建流程。但这并不意味着启动的进程使用 Unicode 函数来进行输出。此外，从 Windows 2000 开始，Windows API 函数的所有 Ansi 版本都是 Wide 版本的包装器：

1.  Ansi 函数使用默认代码页将输入参数中的所有文本转换为宽字符串。
2.  然后它调用Wide-version。
3.  将结果（如果有）从 Wide- 转换为 Ansi 并返回。

但是，这对于控制台窗口并不完全正确。程序通常需要将其 Unicode 字符串转换为 OEM 编码（DOS 编码），然后将结果写入标准输出。只有在这种情况下，它才会被控制台窗口正确显示。

# command - 命令提示符快捷方式

> ID：11024678
> 
> 赞同：2
> 
> 时间：2012-06-13T23:16:36.687
> 
> 标签：command, cmd, command-prompt

是否可以在 Windows 命令提示符中创建快捷方式？说 cd 或启动一些自定义应用程序

如果我在 Windows 命令提示符中输入“abc”，则应该执行映射的命令。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:23:53.003

创建一个带有`.bat`扩展名的文件。将带有参数的命令放入其内容中。将此文件放在 PATH 中的某个位置（例如，在`C:\Windows\`文件夹中）。现在您可以使用 bat 文件的基本名称启动命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:26:09.477

当然，只需在其中制作一个包含快捷方式的批处理文件。例如，**在你的路径中**`abc.bat`创建某个地方并在其中放入如下内容：

 **```
@echo off
"C:\Program Files\SomeFolder\MyProgram.exe" %* 
```

现在`abc`在提示符下输入与输入相同`C:\Program Files\SomeFolder\MyProgram.exe`。**

# c# - Azure 网站或 Azure 云服务上的 MVC4 API [错误]：'System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption'

> ID：11024681
> 
> 赞同：7
> 
> 时间：2012-06-13T23:16:42.337
> 
> 标签：c#, azure, asp.net-mvc-4, asp.net-web-api, azure-web-app-service

当我尝试将我的 Web API 项目部署到 Azure 上的云网站和云托管服务时出现此错误：

```
"{"ExceptionType":"System.TypeLoadException","Message":"Could not load type 'System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption' from assembly 'System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.","StackTrace":"\r\nServer stack trace: \r\n   at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)\r\n   at System.Reflection.RuntimeAssembly.GetExportedTypes()\r\n   at System.Web.Http.Dispatcher.DefaultHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)\r\n   at System.Web.Http.WebHost.WebHostHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)\r\n   at System.Web.Http.Dispatcher.HttpControllerTypeCache.InitializeCache()\r\n   at System.Lazy`1.CreateValue()\r\n\r\nException rethrown at [0]: \r\n   at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)\r\n   at System.Reflection.RuntimeAssembly.GetExportedTypes()\r\n   at System.Web.Http.Dispatcher.DefaultHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)\r\n   at System.Web.Http.WebHost.WebHostHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)\r\n   at System.Web.Http.Dispatcher.HttpControllerTypeCache.InitializeCache()\r\n   at System.Lazy`1.CreateValue()\r\n   at System.Lazy`1.LazyInitValue()\r\n   at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.InitializeControllerInfoCache()\r\n   at System.Lazy`1.CreateValue()\r\n\r\nException rethrown at [1]: \r\n   at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.SelectController(HttpRequestMessage request)\r\n   at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage request, CancellationToken cancellationToken)\r\n   at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)"}" 
```

这里只是消息：

```
"Could not load type 'System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption' from assembly 'System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'." 
```

当我尝试从远程站点访问我的任何 API 时，就会发生这种情况。我知道这不是我的 500 错误，因为无论发生什么，我的一些 API 都不会抛出它们。

需要注意的一件事，我不确定这是否会影响任何事情，我开始这个项目的目标是 .NET 4.5，但是当 Azure 网站说他们不支持 4.5 时，将其切换到 4.0。

除了这个链接，我什么也找不到：http: [//support.appharbor.com/discussions/problems/4822-internal-server-error-500-mvc-4-web-api](http://support.appharbor.com/discussions/problems/4822-internal-server-error-500-mvc-4-web-api)

除了那个家伙正在使用app-harbor，甚至仍然没有解决方案。感谢任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T23:26:04.320

您从 .NET 4.5 开始并回滚导致问题是正确的，这里是有关此问题的官方文档和链接。

> 将 ASP.NET MVC 4 项目从 4.5 更改为目标 4.0 不会更新 EntityFramework 程序集引用：如果在目标 4.5 之后将 ASP.NET MVC 4 项目更改为目标 4.0，对 EntityFramwork 程序集的引用仍将指向 4.5 版本. **要解决此问题，请重新安装 EntityFramework NuGet 包。**

将项目切换到 .NET 4.0 后重新安装 EntityFramework 就可以了。

参考：[http ://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815)

当我在 .NET 4.0 中编译一个 MVC RC 项目并尝试在没有安装 Visual Studio 2012 RC 的服务器上的 IIS 中托管它时，这发生在我身上。

（注意：在服务器上安装 Visual Studio 2012 RC 也解决了这个问题，但为了向后兼容，上述修复要好得多。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:43:37.273

因此，问题似乎是由于我从 4.5 回滚到 .NET 4 而实体没有回滚造成的。Entity 5 似乎只在 .NET 4.5 上运行，而当部署期望 4.3.1 时，它有一个 5.0.0 DLL，它把一切都搞砸了。

# c - 解析器树或表达式树

> ID：11024682
> 
> 赞同：3
> 
> 时间：2012-06-13T23:16:54.630
> 
> 标签：c, parsing, expression-trees

我正在做一个命令行计算器，所以我需要解析表达式。

```
calc 2*(3+4)*5 
```

我已经完成了扫描仪步骤，返回了一个令牌数组。现在我处于解析器步骤。但是我不知道如何做一个解析器/表达式树。

到目前为止，这就是我所拥有的：

```
NODE* create_node(TOKEN* t) {
    NODE* n = (NODE*)malloc(sizeof(NODE));
    n->t = t;
    n->l = n->r = 0;
    return n;
}

void insert_node(NODE** top, NODE** n) {
    if (!*top) {
        *top = *n;
        return;
    }

    if (!(*top)->l) insert_node(&(*top)->l, n);
    else
    if (!(*top)->r) insert_node(&(*top)->r, n);
    else
        insert_node(&(*top)->l, n);
} 
```

然后我传递令牌数组，如：

```
while (*tokens != 0) {
    NODE* n = create_node(*tokens++);
    insert_node(&root, &n);
} 
```

如您所见，我的树向左升起。我不知道如何使它按顶部的运算符排序，并将数字作为叶子，包括运算符的优先顺序。

我会很感激在编程（代码）方面的启发。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T23:25:17.780

您创建节点的代码对我来说看起来不错。问题是您需要代码来弄清楚如何正确构建二叉树。您不能只将节点粘贴到找到 NULL 指针的任何位置。

您的示例表达式：`2*(3+4)*5`

会变成这样的东西：

```
 *
   / \
  *   5
 / \
2   +
   / \
  3   4 
```

你的老师应该给你一些想法如何做到这一点。

当我在大学的时候，我写了这样的代码，我们写了我们自己的“递归下降解析器”。另一种流行的方法是使用像 GNU Bison 这样的系统。

你应该复习你的笔记，看看老师是怎么说的，如果你真的不知道，问问老师。

[http://en.wikipedia.org/wiki/Recursive_descent_parser](http://en.wikipedia.org/wiki/Recursive_descent_parser)

[http://en.wikipedia.org/wiki/GNU_bison](http://en.wikipedia.org/wiki/GNU_bison)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T07:12:24.750

@Fabricio：提示。尝试将您的输入（中缀表达式）转换为后缀或前缀表达式。在转换它们时将令牌推入堆栈。弹出每个元组（一个运算符和两个操作数）评估并将结果压入堆栈。重复直到堆栈为空。您可以在输入表达式中添加冗余大括号，以便轻松强制执行运算符优先级（但要付出一些代价，否则您将不得不说服您的教授 :)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:38:49.680

有关 C++ 实现的信息，请参见这些链接

1.  [后缀解析器的中缀](http://cplusplus.kurttest.com/notes/stack.html#postfix-to-infix-algorithm)
2.  [二叉表达式树解析器的中缀](http://cplusplus.kurttest.com/notes/stack.html#binary-expression-tree)

如前所述，两种实现都使用堆栈。对于二叉表达式树的中缀，使用了两个堆栈，一个用于运算符，一个用于操作数。

# matlab - 在一个字符后切断文本扫描

> ID：11024688
> 
> 赞同：2
> 
> 时间：2012-06-13T23:17:47.163
> 
> 标签：matlab, file-io, comments, textscan

我正在研究 MATLAB 中的一个函数，它从文件中读取输入。到目前为止（在这里阅读了一些关于`scanf`漏洞的信息之后）我决定使用`fgets`来获取每一行，然后`textscan`提取单词，这些单词的格式总是“字符”，包括撇号。所以，我正在使用：

```
fid = fopen('file.txt');
tline = fgets(fid);
textscan(tline, '''%s'''); 
```

但是，我想允许人们使用 % 字符发表评论。我如何切断`textscan`以便

```
'word' 'anotherword' % 'comment' 
```

不返回评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:58:47.813

```
fid = fopen('file.txt');
tline = fgets(fid);
pct = find(tline=='%');
tline(pct(1)-1:end)=[]; % deletes tline from first instance of '%' onward.
textscan(tline, '''%s'''); 
```

`%`请注意，即使它在引号中 ，上面的内容也会在任何一行之后被切断。

如果要在引用的字符串中允许字符 % ，则必须在删除其余 tline 之前对测试注释 % 执行更多逻辑。查看可能有用 的`strcmp`和函数。`findstr`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:46:34.797

在调试时进行了更多阅读之后，我找到了一种更直接的方法来做到这一点。

```
textscan(tline, '''%s''', 'commentStyle', '%'); 
```

# google-chrome - 让 Chrome（在 mac 上）询问我是否应该保存登录信息

> ID：11024690
> 
> 赞同：3
> 
> 时间：2012-06-13T23:18:04.020
> 
> 标签：google-chrome

不知何故，在某些时候，当 Chrome 询问我是否应该允许它保存/记住 uid/pwd 信息时，我一定选择了“从不”选项，所以下次我访问这个网站时，它会预先填充 uid 和 pwd为了我。由于当时我的血腥选择，我最终总是为某些网站输入我的登录信息。

无论如何要告诉Chrome，“嘿，对不起，伙计！再问我一次，这次我会接受的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:24:12.270

我不确定您在哪个操作系统上使用 Chrome。在 OSX 上，在“首选项”下，有一个“显示高级设置”选项，其中显示“提供保存我在网络上输入的密码”选项。启用复选框应该可以做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:28:04.393

转到Chrome 的**首选项**，在 mac 上只需单击屏幕左上角的**Chrome** ，然后在 windows 中进行类似的操作。然后转到**设置**，在底部的**高级设置**，在**密码和发件人**下，确保选中**保存我在网络上输入的**密码的提议，您也可以在那里**管理您的密码**。

# android - 如何异步获取位置修复

> ID：11024699
> 
> 赞同：0
> 
> 时间：2012-06-13T23:18:29.487
> 
> 标签：android, gps, android-asynctask, android-activity

我有一个登录页面（Android 中的一个活动），在此期间我运行一个异步任务来获取位置修复。登录成功后不久，我将应用程序重定向到另一个活动。切换到下一个活动后，位置修复不可用。事情是这样的： -

代码：-

```
oncreate {
  ...
  AsyncTaskClass task;
  task.execute();
}

class AsyncTaskClass extends Async... {

  doInBackground () {
  locMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locLstnr);
  }

  onPostExecute {
  //disable listener
  startActivity(nextPage);
  }
} 
```

我可以看到应用程序请求了位置修复（GPS 图标显示在任务栏中），但片刻之内，postExecute() 被执行，nextPage 加载和位置修复没有获得。如何确保将获得位置修复？换句话说，即使我更改了活动，如何确保在后台接收到位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:52:32.157

`getLastKnownLocation(LocationManager.GPS_PROVIDER)`您可以使用或获取最后知道的位置`getLastKnownLocation(LocationManager.NETWORK_PROVIDER)`。如果您想注册位置更新，那就有点棘手了。我会打电话给

```
requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener) 
```

来自应用程序中的持久类。在我的我有一个叫做位置管理器的类。当位置管理器获取位置更新时，然后通过使用接口实现的回调方法将位置发送到 Activity。看看这个问题...... [在Android上获取用户当前位置的最简单，最强大的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)

# vb.net - 从 xml 文件中删除节点给我一个对象引用错误

> ID：11024703
> 
> 赞同：0
> 
> 时间：2012-06-13T23:19:12.763
> 
> 标签：vb.net

我有一个看起来像的 XML 文件

```
<?xml version="1.0">
<playlist>
     <name>My Playlist</name>
     <song>
         <name>Song Name Here</name>
         <path>Path to song here</path>
         <note>Song notes here</note>
         <artist>Song artist here</artist>
         <type>Song type here</type>
     </song>
     <song>
         <name>Song Name Here</name>
         <path>Path to song here</path>
         <note>Song notes here</note>
         <artist>Song artist here</artist>
         <type>Song type here</type>
     </song>
</playlist> 
```

我正在尝试从 xml 文件中删除歌曲节点，但我无法找出错误的原因。我还在学习视觉基础知识。

错误：**对象引用未设置为对象的实例。**

这是我的代码

```
 Private Sub MsItemRemoveClick(sender As System.Object, e As EventArgs) Handles msItemRemove.Click

        If lvwPlaylist.SelectedItems.Count > 0 Then

            Dim xmlDoc As New XmlDocument

            xmlDoc.Load(_playlistpath & lblPlaylistName.Text & ".xml")

            Dim songs As XmlElement = xmlDoc.SelectSingleNode("song")

            For Each item As ListViewItem In lvwPlaylist.SelectedItems

                For Each node As XmlElement In songs

                    If node.SelectSingleNode("name").InnerText = item.SubItems(0).Text Then

                        MsgBox(node.SelectSingleNode("name").InnerText) '<------ this is where the error pops up on 'node.ParentNode.RemoveAll()

                    End If

                Next

                item.Remove()

            Next

            xmlDoc.Save(_playlistpath & lblPlaylistName.Text & ".xml")

        End If

    End Sub 
```

我的努力是遍历所有选定的列表视图项目，如果歌曲名称与歌曲名称匹配，`songs node`则删除`name`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:01:47.280

为了清楚起见，去掉了 ListView....

对于这个 XML 文件...

```
<?xml version="1.0"?>
<playlist>
     <name>My Playlist</name>
     <song>
         <name>Alpha song</name>
         <path>Path to song here</path>
         <note>Song notes here</note>
         <artist>Song artist here</artist>
         <type>Song type here</type>
     </song>
     <song>
         <name>Beta song</name>
         <path>Path to song here</path>
         <note>Song notes here</note>
         <artist>Song artist here</artist>
         <type>Song type here</type>
     </song>
     <song>
         <name>Charlie song</name>
         <path>Path to song here</path>
         <note>Song notes here</note>
         <artist>Song artist here</artist>
         <type>Song type here</type>
     </song>
     <song>
         <name>Delta song</name>
         <path>Path to song here</path>
         <note>Song notes here</note>
         <artist>Song artist here</artist>
         <type>Song type here</type>
     </song>
</playlist> 
```

在磁盘上保存为 C:\Junk\Junk1.xml，此代码将找到并删除两个中间节点...

```
Private Sub Button3_Click(sender As System.Object, e As System.EventArgs) Handles Button3.Click
  Dim strFilenameIn As String = "C:\Junk\Junk1.xml"
  Dim strFilenameOut As String = "C:\Junk\Junk2.xml"

  Dim lstNames As New List(Of String)
  lstNames.Add("Beta song")
  lstNames.Add("Charlie song")

  Dim xmlDoc As New XmlDocument
  xmlDoc.Load(strFilenameIn)
  For Each strSongName As String In lstNames
    Dim xnl As XmlNodeList = xmlDoc.SelectNodes("/playlist/song/name")
    For i As Integer = xnl.Count - 1 To 0 Step -1
      Dim xnd As XmlNode = xnl(i)
      If xnd.FirstChild.Value = strSongName Then 'match'
        xmlDoc.DocumentElement.RemoveChild(xnd.ParentNode)
      End If
    Next
  Next strSongName
  xmlDoc.Save(strFilenameOut)
  MsgBox("Finished")
End Sub 
```

# ios - 使用 OAuth 和 Twitter Reverse-Auth 传递 OAuth Token 和 Token Secret 是否可行？

> ID：11024704
> 
> 赞同：3
> 
> 时间：2012-06-13T23:19:32.117
> 
> 标签：ios, authentication, twitter

我项目这部分的最终目标是能够不使用 Twitter 的服务器，而是使用我自己的 Web 平台来验证移动设备。两者都使用 Twitter 进行身份验证，我想避免将我的 Twitter 应用程序“秘密”硬编码到我的 iOS 应用程序中。这是我正在考虑实施的内容：

1.  移动设备：使用 Twitter 的 Reverse Auth，获取 OAuth Token 和 OAuth Token Secret
2.  将这两个值传递给 web 平台
3.  Web 平台：生成一个不可逆的加密和并存储在数据库中作为移动客户端和服务器之间的共享“秘密”
4.  将此秘密传回移动客户端，并存储在移动设备上

5.  从现在开始，移动设备每次使用 Web 平台的 API 时，都会将共享密钥与用户的数据进行匹配。

从效率的角度来看，我知道这会给 Web 服务器带来负担，但必须满足的两个要求是......

1.  OAuth 应用程序密钥不得硬编码到移动应用程序中
2.  移动设备必须使用某种安全方式通过我的 Web 服务器进行身份验证。

我会很感激有关反向身份验证的任何资源的链接（我看过 Tim Cook 的示例 git 项目）或一般反馈。

最好的，克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:35:57.410

通过提出一个重定向到我们的 Rails 后端进行身份验证的 UIWebView 解决了这个问题。无需在移动应用程序上进行直接 Twitter 身份验证（避免将我们的应用程序机密存储在移动端）。

# iphone - UIAlertView 在 for 循环中调用时仅显示一次

> ID：11024716
> 
> 赞同：-2
> 
> 时间：2012-06-13T23:20:44.837
> 
> 标签：iphone, ios, xcode, cocoa-touch

在我的程序中，我的警报只显示一次，然后再次调用时不显示。

该按钮仍然取消触摸，就好像显示警报一样，但是没有警报显示。

如果能找到答案那就太好了，这是我的代码：

```
for (int x = 1; x <= 9; x ++) {
    if ([[defaults objectForKey:[NSString stringWithFormat:@"fav%i",x]] isEqualToString:resultButton.currentTitle] || [[defaults objectForKey:[NSString stringWithFormat:@"fav%i",x]] isEqualToString:[NSString stringWithFormat:@"%@ Converter", resultButton.currentTitle]]) {

        UIAlertView *alertThere = [[UIAlertView alloc] initWithTitle:resultButton.currentTitle message:@"Is currently in Favorites." delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
        [alertThere show];
        [alertThere release];

        return;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:39:51.880

您需要移除**退货；**线。

**回报**；行告诉你的 for 循环停止，所以只需删除它，其余的警报就会显示出来。

此外，您的代码将起诉 9 `UIAlertView`，这对用户不友好，我肯定会被 Apple 拒绝。因此，一旦您关闭第一个警报，第二个警报就会弹出，依此类推。

```
for (int x = 1; x <= 9; x ++) {
    if ([[defaults objectForKey:[NSString stringWithFormat:@"fav%i",x]] isEqualToString:resultButton.currentTitle] || [[defaults objectForKey:[NSString stringWithFormat:@"fav%i",x]] isEqualToString:[NSString stringWithFormat:@"%@ Converter", resultButton.currentTitle]]) {

        UIAlertView *alertThere = [[UIAlertView alloc] initWithTitle:resultButton.currentTitle message:@"Is currently in Favorites." delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
        [alertThere show];
        [alertThere release];

        //return; 
    }
} 
```

此外，请确保您的**if**语句值是 true，如果不是，则不会显示警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:37:58.490

我找到的解决方案：

它在 UIGestureRecognizer 下（与循环没有任何关系）。它调用的子类有多种方法。（或类似的规定。）

基本上使用 if{} 语句只允许其中一个事件通过。

**有关子类方法**下的[更多详细信息](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)，请参见此处。

# mysql - mysql MIN 和 MAX 函数与 if 语句

> ID：11024717
> 
> 赞同：0
> 
> 时间：2012-06-13T23:20:45.113
> 
> 标签：mysql

我有一个这样的sql查询：

```
SELECT IF( (SELECT COUNT(*) FROM `test_table2` WHERE `id` = t.`id`) > 0,
    (t.`price` + (SELECT `price` FROM `attribute` WHERE `id` = t.`id` LIMIT 1)),
    t.`price`
) AS `full_price`, 
MIN(`full_price`) as `min`, MAX(`full_price`) as `max` 
FROM `test_table` t 
```

如何在不使用 if 语句中的重复代码的情况下检索最小值和最大值？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:30:46.723

`full_price`在子查询中包含计算：

```
SELECT 
      MIN(full_price) AS min_full
    , MAX(full_price) AS max_full
FROM
  ( SELECT IF( (SELECT COUNT(*) FROM test_table2 WHERE id = t.id) > 0
             , t.price + (SELECT price FROM attribute WHERE id = t.id LIMIT 1)
             , t.price
             ) AS full_price  
    FROM test_table AS t
    WHERE ...                 --- if you want conditions applied to `test_table`
                              --- before calculating the `full_price`
  ) AS tmp ; 
```

* * *

改进：

*   （标准 SQL）：use`CASE`子句而不是`IF`仅适用于 MySQL 的子句。
*   （性能）：更改`(SELECT COUNT ...) > 0`为`EXISTS (SELECT ... )`. 它通常更快。

您的查询将变为：

```
SELECT 
      MIN(full_price) AS min_full
    , MAX(full_price) AS max_full
FROM
  ( SELECT 
        CASE WHEN 
               EXISTS (SELECT * FROM test_table2 WHERE id = t.id) 
             THEN t.price + (SELECT price FROM attribute WHERE id = t.id LIMIT 1)
             ELSE t.price
        END AS full_price  
    FROM test_table AS t
    WHERE ... 
  ) AS tmp ; 
```

# cuda - “推力”能否在设备上生成随机数

> ID：11024718
> 
> 赞同：0
> 
> 时间：2012-06-13T23:20:51.530
> 
> 标签：cuda, thrust

有人知道 CUDA 库“推力”是否可以在设备上生成随机数吗？我从示例代码中看到它可以在主机上完成......但这对我来说真的没有好处。提前干杯杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T07:36:30.310

是的，Thrust 有设备随机发生器。请参阅Thrust 团队提供的 [Monte Carlo示例。](http://code.google.com/p/thrust/source/browse/examples/monte_carlo.cu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:26:56.723

cuRAND 也可能做你想做的事：http: [//developer.nvidia.com/curand](http://developer.nvidia.com/curand) 它不是 Thrust，但它具有类似的功能。

# vhdl - 双向总线上的 Block RAM

> ID：11024722
> 
> 赞同：2
> 
> 时间：2012-06-13T23:21:09.963
> 
> 标签：vhdl, xilinx, synthesis

我花了很长时间试图弄清楚如何将 Xilinx Spartan 6 FPGA 的内核生成的 Block RAM 连接到双向数据总线。我能找到的所有示例都说仅单独使用输入和输出数据端口，但就我而言，我被迫将其用作双向数据总线。

我正在使用 VHDL。

生成的组件具有以下定义：

```
COMPONENT ram
    PORT (
       clka  : IN STD_LOGIC;
       wea   : IN STD_LOGIC_VECTOR(0 DOWNTO 0);
       addra : IN STD_LOGIC_VECTOR(7 DOWNTO 0);
       dina  : IN STD_LOGIC_VECTOR(7 DOWNTO 0);
       douta : OUT STD_LOGIC_VECTOR(7 DOWNTO 0)
    );
END COMPONENT; 
```

实例化如下：

```
ram1 : ram
  PORT MAP (
    clka => clk,
    wea => r_w,
    addra => addr,
    dina => din,
    douta => dout
  ); 
```

有人可以向我展示一个将连接`dina`并连接`douta`到一个`inout`名为的端口的进程块`data`吗？

我尝试了以下方法，成功率为 0%：

```
process(clk)
begin
  if rising_edge(clk) then
    if r_w = "1" then
      -- Write
      din <= data;
      dout <= temp;
    else
      -- Read
      din <= (others => 'Z');
      data <= dout;
    end if;
  end if;
end process; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:22:17.740

首先，重要的是要了解现代 FPGA 内部（例如您正在谈论的 Xilinx Spartan-6），实际上并没有任何*真正*的双向布线。真正的双向/三态信号只能用于 I/O 引脚。可以模拟内部双向/三态信号，但这通常只用于与传统 HDL 的接口，而不是用于任何新的东西。

现在，无论是否存在真正的三态，为了连接单向`dina`和`douta`“双向” `data`，您需要一些信号来控制内存何时驱动。由于我们已经有了短名称，所以我们将其称为`oe`“输出启用”。这个信号需要由您的设计以一种有意义的方式控制。

***鉴于此，您可以使用以下并发代码（不在***进程中）将不同方向的两个单向信号以及输出启用方向选择器转换为逻辑双向数据总线：

```
dina <= data;
data <= douta when oe = '1' else (others => 'Z'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:21:43.780

在该`if r_w = "1"`块中，您似乎正在尝试驱动您的`dout`信号，该信号应由端口驱动`douta`。这可能解释了一个问题（除非`temp`都是'Z'）。

以下注意事项：我现在没有任何东西可以测试这个，所以这一切都在我的脑海中。让我知道它是否没有帮助！

我不认为同步过程是解决此问题的最佳方法。自从我需要这样做已经有一段时间了，但这就是我认为你需要的。请注意，这不是一个过程，它在架构中是正确的。

```
din <= data when (r_w = '1') else (others => 'Z');
data <= dout when (r_w = '0') else (others => 'Z'); 
```

说明：当信号被多个源驱动（或分配给）时，除了其中一个之外，所有信号都必须是“Z”。第二行设置`data`为由“Z”驱动——但这实际上“释放了它”（从解析器的角度来看）由端口驱动。

如果你确实需要它是同步的，这应该很容易适应——但请记住，这`'0'`并不是`'1'`唯一可能的情况`std_logic`，所以考虑一个`else`子句或`others`一个`case`块！

# android - 交换语言*几乎可以工作

> ID：11024726
> 
> 赞同：2
> 
> 时间：2012-06-13T23:21:43.083
> 
> 标签：android, locale

因此，根据我提出的另一个问题，我正在使用以下代码来切换语言。

当我手动（在设置中）更改 Android 中的语言时，它会从正确的可绘制资源和字符串资源中提取，所以我相信我已经正确配置了这些资源。

但是，当我调用此代码时，什么也没有发生（从字面上看，没有任何形式的反馈，没有错误，什么也没有）。

我不确定我是否使用了正确的语言环境代码，并且对语言环境如何翻译成语言感到有些困惑……我希望有人能告诉我我在这里缺少什么。

```
Resources res = getApplicationContext().getResources();

Locale locale = new Locale("us"); //here I have tried "en", "es", "en_US", "es_ES", nothing happens
Locale.setDefault(locale);

Configuration config = new Configuration();
config.locale = locale;

res.updateConfiguration(config, res.getDisplayMetrics()); 
```

这是通过单选按钮切换调用的，我已经设置了调试器，并且确定正在调用代码并且它正在将我期望的值传递给 Locale.setDefault 方法。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:50:27.750

啊！

因此，解决方案（至少是可行的，如果它不是正确的方式，也许其他人会加入正确的方式）似乎是在这段代码之后再次 setContentView 。然后语言元素都正确显示。它是英语的“en”和西班牙语的“es”。

# android - 以编程方式在线性布局中添加表格布局

> ID：11024727
> 
> 赞同：1
> 
> 时间：2012-06-13T23:22:12.787
> 
> 标签：android, android-layout, android-linearlayout, android-tablelayout

我基本上想要类似的东西：

```
 TextView
  Button
  Button
  .
  .
  .
  TextView   TextView
  SeekBar
  Button 
```

我必须以编程方式执行此操作。现在，除了 SeekBar 上方的 TextViews 没有显示之外，我已经完成了所有工作。

做这项工作的相关代码是

```
//Setting the linear layout
    ll =  new LinearLayout(getApplicationContext());                //a linear layout encompasses all the other elements
    ll.setOrientation(LinearLayout.VERTICAL);   //orientation has to be vertical
    ll.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));     //the layout occupies the complete screen

    //Set the TextView for the Question
    tv1 = new TextView(getApplicationContext());
    tv1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));    //sets the dimensions of the textView
    ll.addView(tv1);                            //add the TextView to the LinearLayout

    //Set the buttons (?)
    b = new Button [MAX_OPTIONS];               
    for(int i=0;i<MAX_OPTIONS;i++){
        b[i] = new Button(getApplicationContext());     //set the context for each button
        b[i].setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
        ll.addView(b[i]);
    }

    //Set the Table Layout
    tl = new TableLayout(getApplicationContext());
    tl.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    tl.setColumnStretchable(0, true);
    tl.setColumnStretchable(1, true);

    //Set the Table Row
    tr = new TableRow(getApplicationContext());
    tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    tr.setPadding(dipConvert(5), dipConvert(5), dipConvert(5), dipConvert(5));

    //Set the two TextViews
    tv2 = new TextView(getApplicationContext());
    tv2.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tv2.setGravity(Gravity.LEFT);               //set the gravity of this TextView to left
    tv3 = new TextView(getApplicationContext());
    tv3.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tv3.setGravity(Gravity.RIGHT);
    tv3.setPadding(0, 0, dipConvert(15), 0);    //set the padding for this to be displayed(the number 15 was emperically determined)

    //Add the Textview to table row
    tr.addView(tv2);        tr.addView(tv3);

    //Add the TableRow to the Table Layout
    tl.addView(tr);

    //Add the TableLayout to the LinearLayout
    ll.addView(tl);

    //Set the Seekbar
    sb1 = new SeekBar(getApplicationContext());
    sb1.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    sb1.setMax(100);
    sb1.setMinimumWidth(250);
    ll.addView(sb1);

    //Set the Seekbar Button
    sb1_b = new Button(getApplicationContext());
    sb1_b.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    ll.addView(sb1_b);
            setContentView(ll); 
```

我无法弄清楚发生了什么。我得到的显示类似于

```
 TextView
   Button
   Button
   .
   .
   .

   SeekBar
   Button 
```

如果有人能指出我正确的方向，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:37:19.763

您需要在 tableRow 元素的子元素中需要 TableRow.layout 参数。这已经很好地解释了[here](https://stackoverflow.com/a/10156822/1322460)。请参考并更正。这是一个非常简单的打嗝，很容易被忽略。

你的文本视图应该是

```
tv2.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT)); 
```

tv3 也是如此。

# php - 我的网站运行缓慢，我不知道为什么？

> ID：11024729
> 
> 赞同：-5
> 
> 时间：2012-06-13T23:22:28.277
> 
> 标签：php, javascript, linux, apache

我目前正在建立一个网站作为学校项目，我对 php、js 等还是很陌生...

该网站是 geekwiz.com，它运行非常缓慢，我不知道为什么。

我使用[http://tools.pingdom.com/fpt/](http://tools.pingdom.com/fpt/)工具来查看原因，但它只是说等待是 25 秒。

如果有人知道如何提供帮助，那就太棒了。

问候， 场外交易

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:27:08.670

*   这可能是因为您执行了一些非常错误的 SQL 查询。
*   这可能是因为你做了非常糟糕的数据库设计。
*   这可能是因为您正在进行某种循环。
*   可能是因为您将它托管在非常糟糕且便宜的托管服务提供商上，例如 GoDaddy。

# php - PHP类返回可以迭代的属性？

> ID：11024730
> 
> 赞同：0
> 
> 时间：2012-06-13T23:22:51.640
> 
> 标签：php, mysql

抱歉，我在 PHP 方面充其量只是个新手，所以请保持温和。

我创建了一个类，它将从数据库中获取一些信息并将各种值作为类的属性返回。效果很好，因为我只要求一排。

像这样：

```
$mydata = new mydataclass;

$mydata->getaparticularrowofdata($uniqueid);

$value1 = $mydata->variable1;
$value2 = $mydata->variable2;
$value3 = $mydata->variable3; 
```

我想做类似的事情：

```
$mydata = new mydataclass;

$mydata->getafewrowsofdata($somefieldvaluetomatch);

if ($mydata->count != 0) {

// some sort of loop to iterate through each row until at the end, each time replacing       the property values with the new data

echo $mydata->variable1;
echo $mydata->variable2;
echo $mydata->variable3;

//

} 
```

这显然只是一个例子。希望我说得通。

这是可行的吗？如果是这样，一些示例代码将不胜感激:)

答案可能很简单，但由于某种原因，今晚我似乎无法理解它。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:37:23.293

这在一定程度上取决于您返回的结果集的格式，但这里有一些示例，说明如何使用您的示例遍历结果集。

如果将结果集作为对象返回：

```
 $resultsObject = $mydata->getafewrowsofdata($somefieldvaluetomatch);

  foreach($resultsObject as $result)
  {
    echo $result->variable1;
    echo $result->variable2;
    echo $result->variable3;
  } 
```

如果将结果集作为数组返回：

```
 $resultsArray = $mydata->getafewrowsofdata($somefieldvaluetomatch);

  foreach($resultsArray as $result)
  {
    echo $result['variable1'];
    echo $result['variable2'];
    echo $result['variable3'];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:56:36.997

与其修改`mydataclass`检索数据并随后遍历数据的属性（这是很多副作用，而且您将无法使用您的类同时选择多组数据），我建议您让您的`getafewrowsofdata`方法返回数据数组（每行一个元素）或返回实现[`Iterator`](http://php.net/manual/en/class.iterator.php)接口的结果对象。

如果您使用 PDO，一个简单的方法是让您的`getafewrowsofdata`函数使用[`fetchAll`](http://www.php.net/manual/en/pdostatement.fetchall.php)PDO 的方法。这甚至可以返回自定义类的对象（参见示例 4）。

# php - 无法使用类扩展 SimplePie 函数

> ID：11024732
> 
> 赞同：0
> 
> 时间：2012-06-13T23:22:56.810
> 
> 标签：php, class, extends, simplepie

我一直在尝试扩展 SimplePie 以按相反顺序对提要进行排序。我用变量 $events 区分的第二个提要是我想首先显示“最旧”日期的事件提要，因为该事件最接近发生。

我一直在使用 SimplePie 的文档[Simple Pie Custom Sort](http://simplepie.org/wiki/reference/simplepie/sort_items)来创建这些代码行来实现这一点，

```
class SimplePie_Custom_Sort extends SimplePie {

    function sort_items($a, $b) {

         return $a->get_date('U') >= $b->get_date('U');
    }

} 
```

但是它似乎不起作用。我什至直接从上面的文档中复制并粘贴了代码，以尝试按字符串长度对提要进行排序，但这也不起作用。

如果我直接进入 simplepie.inc 文件并在那里编辑排序函数，我可以让两个提要以相反的顺序显示。所有这些原因让我相信我尝试使用 Simple_Pie_Custom_Sort 扩展函数的方式存在错误。或者，也许我正在尝试做一些 SimplePie 能够做到的事情。

我已经上传了 simplepie.inc 文件的新副本，想知道我是否在某个时候不小心保存了它。

我觉得我可能在某个地方有一个愚蠢的错误。我很感激有人能提供。我正在使用的整个代码块如下。谢谢。

```
<?php

//TURN OF ERROR REPORTING
//error_reporting(0);

//INCLUDE SIMPLEPIE (PULLS RSS FEED)
require_once("inc/simplepie.inc");

// Extend the SimplePie class and override the existing sort_items() function with our own.
class SimplePie_Custom_Sort extends SimplePie {

    function sort_items($a, $b)
{
    return $a->get_date('U') >= $b->get_date('U');
}

}

//NEW SIMPLEPIE
$news = new SimplePie();

//SET LOCATIONS OF FEEDS
$news->set_feed_url(array(
     'http://rss-feed-url-example.rss'
));

//SET UP CACHING
$news->enable_cache(false);
//$news->set_cache_location('cache');
//$news->set_cache_duration(1800);

//START THE PROCESS
$news->init();

//HANDLE FEED TYPE
$news->handle_content_type();

//NEW SIMPLEPIE USING CUSTOM SORTING
$events = new SimplePie_Custom_Sort();

//SET LOCATIONS OF FEEDS
$events->set_feed_url(array(
     'http://rss-feed-url-example.rss'
));

//ANOTHER POSSIBLE NEED FOR SORTING RSS DIFFERENTLY
$events->enable_order_by_date(false);

//SET UP CACHING
$events->enable_cache(false);
//$events->set_cache_location('cache');
//$events->set_cache_duration(1800);

//START THE PROCESS
$events->init();

//HANDLE FEED TYPE
$events->handle_content_type();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:51:42.443

我弄清楚了问题所在。SimplePie 不喜欢我将单个提要放在一个数组中。

我改了这个...

```
//SET LOCATIONS OF FEEDS
$events->set_feed_url(array(
   'http://rss-feed-url-example.rss'
)); 
```

对此...

```
//SET LOCATIONS OF FEEDS
$events->set_feed_url('http://www.coloradotechnology.org/resource/rss/events.rss'); 
```

如果有人能详细说明为什么这会导致问题，我很想听听更好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:10:29.053

你有

```
$events->enable_order_by_date(false); 
```

这完全禁用排序，导致您的项目不被排序。（这是一个名字不好的方法。）

# c++ - gdb - 获取真正的崩溃线

> ID：11024736
> 
> 赞同：1
> 
> 时间：2012-06-13T23:23:12.113
> 
> 标签：c++, gdb

我的多线程程序崩溃。我有`.core`档案。我加载它并`thread apply all backtrace`获得崩溃线程的以下输出：

```
Thread 1 (Thread 0x8567800 (runnable)):
#0  GG::serialize (this=0x847c180, outbin=@0xbf2f7c30)
    at basic_string.h:269 
```

好的，序列化时崩溃，但报告它发生在`STL basic_string.h:269`.

但是如何在`serialize()`函数中获得实际的崩溃线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:18:46.393

如果崩溃是可重现的，最简单的做法是重新编译错误代码并禁用内联（在`g++`，这是`-fno-inline`和`-fno-default-inline`）。

如果您必须分析您拥有的核心，请尝试查找`string`正在调用的方法，并在您的`serialize`函数中找到相应的调用。

有时，除了反汇编你的函数并仔细检查它以找出汇编代码的哪些部分与你的源代码对应之外，没有其他方法可以找到问题。然后，要找出局部变量的值，您必须执行`info registers`并跟踪将哪些值移入了哪个寄存器。

# pari-gp - 在 PARI/GP 中舍入一个数字

> ID：11024738
> 
> 赞同：1
> 
> 时间：2012-06-13T23:23:22.597
> 
> 标签：pari-gp

我知道“\p x”命令设置所有计算的精度，但我正在寻找一些不同的东西。给定一个以高精度计算的给定数字，我想仅针对我的代码的一部分将其舍入到较低的精度。这样做的原因是取复数的绝对值往往会产生一些舍入错误，从而导致以后出现问题。我希望这些绝对值是相同的，并且没有他们现在的微小错误。

换句话说，我怎样才能让 1.xxxxxxxxxxxxxx -> 1.xxxxxxx 只为一个特定的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:53:52.780

最简单的解决方案是

```
z * precision(1., 100) 
```

将 z 的分量截断到 100 位的相对精度。出于打印目的，您还可以使用`printf("%m.nf", z)`标准含义。

# firefox-addon - Firefox 13 原生支持的视频播放格式？

> ID：11024740
> 
> 赞同：0
> 
> 时间：2012-06-13T23:23:36.653
> 
> 标签：firefox-addon, video-streaming, video-codecs

Firefox 13 原生支持哪种视频编解码器用于流式传输？我必须创建一个应该播放视频流的 Mozilla 插件。我假设插件内部没有闪存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:56:56.723

Firefox 本身不支持任何流媒体协议。您仍然可以通过普通 HTTP 发送 WebM 或 Ogg Theora 格式的视频（就像在[这个问题](https://stackoverflow.com/questions/7917905/how-to-use-vlc-live-streams-with-html5-video)中一样），但是如果可用带宽不足，它将被缓冲并且会产生拥塞。但是，随着[WebRTC 支持添加到 Firefox](http://hacks.mozilla.org/2012/04/webrtc-efforts-underway-at-mozilla/) ，这可能会很快改变。

# javascript - 悬停时无法选择矢量

> ID：11024741
> 
> 赞同：1
> 
> 时间：2012-06-13T23:23:51.427
> 
> 标签：javascript, gis, openlayers

好吧，当一个悬停时我想要一个漂亮的弹出窗口，但我也希望矢量可选。如果我跳过悬停部分，它就像魅力一样，但是：/我错过了什么吗？

```
vectors.removeAllFeatures();
var geojson_format = new OpenLayers.Format.GeoJSON();
vectors.addFeatures(geojson_format.read(data));
var selectCtrl = new OpenLayers.Control.SelectFeature(vectors,
{
    clickout: true
});
map.addControl(selectCtrl);
selectCtrl.activate();
vectors.events.on({
    "featureselected": featureSelected
});
var hover = new OpenLayers.Control.SelectFeature(vectors,{
    hover: true,
    highlightOnly: true,
    eventListeners: {
         featurehighlighted: featureHover,
         featureunhighlighted: featureUnHover
    }
});
map.addControl(hover);
hover.activate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:34:59.673

我只是以错误的顺序编写了代码。`map.addControl(hover); hover.activate();`应该是之前

```
map.addControl(selectCtrl);
 selectCtrl.activate();
 vectors.events.on({
     "featureselected": featureSelected
 }); 
```

所以，现在它起作用了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:32:09.737

这真的有效吗，因为按照我的看法，一旦您使用*OpenLayers.Control.SelectFeature*创建了 2 个 map.addControl，就会有 1 个无效。事实上，我有 2 层，一个公共汽车层和一个公共汽车站层。当我全部激活它们时，只有在总线层上的悬停有效。当我没有激活 buslayer 的控制时，突然 bus-stops 层开始工作。所以他们都单独工作。您在这里的问题是关于我在这里找到的唯一一个带有 2 个 addControl 行的问题。我也尝试使用*autoActivate*但结果相同。

**更新**

它实际上打算不再工作，显然您无法创建 2 个控制功能。相反，您需要创建一个并将其应用于两个图层。[如文档中所述，](http://docs.openlayers.org/library/overlays.html#interaction)对此的支持已在 2.7 中删除。有一个很好的例子来说明如何使用[2 个不同的 Vector Layers](http://openlayers.org/dev/examples/select-feature-multilayer.html)来做到这一点。这让我花了好几天才意识到。您只需要在弹出窗口中确定您所在的图层并采取相应的行动，看起来就可以了。

# ios - cache.manifest 后视频中断

> ID：11024745
> 
> 赞同：1
> 
> 时间：2012-06-13T23:24:32.773
> 
> 标签：ios, caching, cache-manifest

所以我试图让一个网络应用程序缓存一些视频，以便它们离线播放。该网络应用程序将仅适用于 iPad。

我的 HTML 是 4 个简单的视频、一个样式表和一个 debug.js 文件。

```
<!DOCTYPE html>
<html manifest="cache.manifest" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<link rel="stylesheet" href="style.css"/>
<script src="debug.js"></script>
<title>Mobile Cache Test</title>
</head>

<body>
    <video width="640" height="480" controls="controls">
        <source src="slide1.mp4" type="video/mp4" />
    </video><br/>
    <video width="640" height="480" controls="controls">
        <source src="slide2.mp4" type="video/mp4" />
    </video><br/>
    <video width="640" height="480" controls="controls">
        <source src="slide3.mp4" type="video/mp4" />
    </video><br/>
    <video width="640" height="480" controls="controls">
        <source src="slide4.mp4" type="video/mp4" />
    </video>
</body>
</html> 
```

我已将该指令添加到我的 .htaccess 文件中`AddType text/cache-manifest .manifest`

我的 cache.manifest 文件：

```
CACHE MANIFEST
# 2012-06-13:v1
slide1.mp4
slide2.mp4
slide3.mp4
slide4.mp4
style.css
debug.js

NETWORK:
* 
```

现在我的问题是当我第一次打开它时，我看到 4 个视频，它们都可以播放。它还询问我是否允许该站点将数据限制增加到 25MB。我说是。通过我的 debug.js，我可以看到正在下载的视频。如果我访问`Settings > Safari > Advanced > Website Data`该站点占用了 12.9MB，我也可以在我的 iPad 上看到。

所以现在我关闭 safari 并重新打开并浏览到该页面。这4个视频现在坏了。他们有一个带有斜线的 iPad 播放按钮，它们不会播放。有谁知道这里发生了什么？

# facebook - 以编程方式更改 Facebook 应用请求中的图标

> ID：11024756
> 
> 赞同：0
> 
> 时间：2012-06-13T23:25:45.430
> 
> 标签：facebook, apprequests

我想以编程方式更改我在这里添加了一个红色方块的图标：

![图标](../Images/5b0e3923446da7ff2e9b0d41818a210c.png)

默认情况下，这是从应用程序设置中提取的。有什么方法可以拉出不同的图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T02:48:22.280

不，这是不可能的。您不能以编程方式更改应用程序图标。只能通过应用程序设置。

# drupal - 从视图字段中排除单词

> ID：11024757
> 
> 赞同：0
> 
> 时间：2012-06-13T23:25:51.847
> 
> 标签：drupal, drupal-6, drupal-views

我有一个有两个字段的视图。在其中一个中，我加载了术语的名称，但我想删除该名称的一部分。因此，视图必须加载术语的名称，但没有一部分。

例如。一篇文章属于术语“Example - one”，我希望它只显示术语名称的“Example”部分，即在这个“- ...”部分之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:45:31.700

***--Edit--***
好的，因为**最后**一部分总是相同的，例如`Example one - something`and`Another example - something`，除了使用（包括空格）的长度外，只需执行与下面相同的操作 `- something`，并将该数字（在本例中为**12**）设为负数.

短版：使用**-12**而不是**7**。

```
<?php
  print substr($value, 0, -12);
?> 
```

***--结束编辑--***

有几种选择，具体取决于术语本身的恒定程度。例如，是否所有术语都以相同的单词开头（***示例**- 一*、***示例**- 九十九*、***示例***等）？如果是这样，您应该在将字段配置为“将此字段修剪为最大长度”时看到一个选项，对于单词*Example*，您只需将该长度设置为 7（因为单词中有 7 个字母*示例*）。

您还可以安装 views_php 模块，在视图中添加一个新的 PHP 字段（*Global: PHP* -- 就在*Global: custom text*选项下），然后在 PHP 字段配置的底部，您应该会看到一个*Value*框和另一个框*比 Output*低一个。

像这样设置PHP 字段的*值：*

```
return $row->term_field_goes_here; 
```

... 用您在“*值*”框下看到的适当“替换模式”替换*term_field_goes_here 。*然后像这样设置 PHP 字段的*输出：*

 **```
<?php
  // $value is automatically assigned from the "Value" box, so we just tell it to
  //   print a substring of $value, aka $row->term_field_goes_here, keeping only 7
  //   characters, and starting from the 0th character ("E").
  print substr($value, 0, 7);
?> 
```

希望对您有所帮助... :)**

# css - Twitter 引导井角文本/图像

> ID：11024760
> 
> 赞同：2
> 
> 时间：2012-06-13T23:25:55.840
> 
> 标签：css, twitter-bootstrap

我有一个井 div，我想在拐角处附加一个小文本/图像，如此处所示（[http://draw.to/D46BqsC](http://draw.to/D46BqsC)）......并将该元素相对于井放置，所以它会像井一样改变位置。最好的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T02:06:25.187

您可以使用`position: absolute`使元素将自身定位在相对于其父级（在本例中为井）的绝对位置。唯一的问题是父元素必须不是静态的，所以你的井可能需要包含在其他东西中。

```
.my-well {
    position: relative;
}

.my-well span {
    position: absolute;
    top: 0;
    right: 0;
}

<div class="well my-well">
    <span>xxx</span>
</div>​ 
```

[http://jsfiddle.net/YPcLy/](http://jsfiddle.net/YPcLy/)

# jquery - keyup jquery上的多个类

> ID：11024762
> 
> 赞同：1
> 
> 时间：2012-06-13T23:26:06.547
> 
> 标签：jquery, class, event-handling, onkeyup

我有一个函数，我想对`keyup`2 个不同`class`的`textfields`. 当只分配一个类时，下面的代码运行良好，`keyup`但当我添加第二个时`class`，它可以工作，但有很多滞后。任何一个`class`本身都可以正常工作，所以我假设我`class`不正确地将第二个添加到事件处理程序中。代码是：

```
$(document).ready(function(){

    $(".class1").each(function() {

        //!!!!!!! .class2 here adds lag !!!!!!!!!!
        $('.class1,.class2').keyup(function(){
            myFunction1();

        });
    });

    $(".class2").each(function() {

        $(this).keyup(function(){
            myFunction2();
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T23:32:30.440

看来您正在连接太多事件 - 因此存在滞后。您也不需要 .each，它用于迭代每个元素。尝试简化如下：

```
$(document).ready(function(){

    $('.class1,.class2').keyup(function(){
        myFunction1();
        if ($(this).hasClass('class2')) {
            myFunction2();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:41:08.777

或者，您可以添加两个单独的事件并调用您的函数。它与其他答案相似，可能仅取决于风格。

演示：http: [//jsfiddle.net/lucuma/wzEJc/](http://jsfiddle.net/lucuma/wzEJc/)

示例代码：

```
function myFunction1(el) {
    el.addClass('mclass1');
};

function myFunction2(el) {
    el.addClass('mclass2');
};

$(document).ready(function(){

    $('.class1').keyup(function(){
        myFunction1($(this));    
    });
    $('.class2').keyup(function(){
        myFunction1($(this));
        myFunction2($(this));    
    });

});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:42:09.280

您正在绑定很多事件处理程序，您可以让事件冒泡并稍后捕获它：

```
 $('body').on('keyup', '.class1, .class2', myFunction1);
 $('body').on('keyup', '.class2', myFunction2); 
```

# hadoop - HDFS Namenode HA：为什么使用 NFS 而不是简单地在两者之间进行复制？

> ID：11024764
> 
> 赞同：3
> 
> 时间：2012-06-13T23:26:15.637
> 
> 标签：hadoop, hdfs, high-availability

看了Facebook用来为HDFS Namenode提供HA的AvatarNode方案，不明白为什么要用NFS。令我困惑的是 NFS 无论如何都必须复制才能实现 HA。主数据库必须写入 NFS 并刷新才能获得 HA。为什么不简单地在主节点和次节点之间打开一个套接字通道，并对次节点 Namenode 执行相同的写入操作。这将是（大约）相同数量的网络流量，并且似乎具有相同的复制语义。

那么问题来了，为什么不这样做呢？

我想其中一个原因可能是 NFS 存在，因此问题可能更容易实现。但是考虑到在主要和次要之间使用原始套接字通道的（明显）简单性，将写入流接口（即文件）的相同信息写入 NFS，我不知道为什么这不是完成了。

当然，选择使用我在扶手椅分析中遗漏的 NFS 肯定有充分的理由。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:36:53.280

我不知道，但我同意这似乎是一个非常奇怪的选择，而且我真的想不出任何其他原因，但负责修复某些东西的团队有一个功能正常的 NFS 设置，它已经为其他用途工作。但是根据我的经验，我认为 NFS 是另一个失败的单点，并且不会在这种情况下选择它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:51:05.017

有趣的问题。我在 AvatarNodes 上找到了这篇文章：http: [//hadoopblog.blogspot.com/2010/02/hadoop-namenode-high-availability.html](http://hadoopblog.blogspot.com/2010/02/hadoop-namenode-high-availability.html)

在我看来，AvatarNode 允许您在名称节点出现故障时最大限度地减少停机时间，并在不到一分钟的时间内用新的名称节点备份。

从hadoop[文档](http://wiki.apache.org/hadoop/FAQ#What_is_the_purpose_of_the_secondary_name-node.3F)：

```
The term "secondary name-node" is somewhat misleading. It is not a name-node in the   
sense that data-nodes cannot connect to the secondary name-node, and in no event it can 
replace the primary name-node in case of its failure. 
```

由于辅助名称节点不能充当名称节点，因此在恢复或启动新名称节点时可能会出现较长的停机时间。

AvatarNode 既可以充当辅助节点，也可以充当主要节点，并允许快速故障转移，只需切换 VIP。

关于为什么使用 NFS 而不是套接字，帖子说

```
It is guaranteed that the Standby AvatarNode ingests all committed transactions because    
it reopens the edits log and consumes all transactions till the end of the file; this 
guarantee depends on the fact that NFS-v3 supports close-to-open cache coherency 
semantics. 
```

我认为这是在名称节点出现故障时最大限度地减少数据丢失并保持与 HDFS 编辑数据的一致性的问题。更多关于接近开放一致性保证的信息：http: [//nfs.sourceforge.net/#faq_a8](http://nfs.sourceforge.net/#faq_a8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:42:26.327

哈尔，[这](https://twitter.com/tlipcon/status/213013135798435840)可能会回答您的问题（尤其是“在路上踢罐头”位）..

# sql - Rails ActiveRecord：获取原始插入的 id

> ID：11024767
> 
> 赞同：7
> 
> 时间：2012-06-13T23:26:24.983
> 
> 标签：sql, ruby-on-rails, activerecord, octopus

```
sql = DmozCategory.send(:sanitize_sql_array, ["INSERT INTO dmoz_categories (id, dmoz_category_title, dmoz_category_name, dmoz_category_description, created_at, updated_at, dmoz_category_lastupdate) VALUES (?, ?, ?, ?, NOW(), NOW(), ?)", result['catid'], result['title'], result['name'], result['description'], result['lastupdate']])

res = DmozCategory.connection.execute(sql)
$stderr.puts res.inspect 
```

`res`总是`nil`，即使我可以看到 DmozCategory 插入到数据库中。如何获得`id`以下我的插入？

我意识到我可以使用另一个 SQL 查询`SELECT LAST_INSERT_ID()`来获取 ID，但我想知道是否有办法通过 Rails 获取 ID。米

背景：使用 Rails 2.3.14

**更新**：嗯，我认为问题出在我正在使用的名为[Octopus](https://github.com/tchandy/octopus)的插件上。抱歉打折了您的一些答案。看来我需要找到如何使用此插件获取插入的最后一个 ID。我完整的coe：

```
desc "load all categories from dmoz" # With this one we're loading all the 'structure' table in, not the parent-child relationships.
  task :load_categories_from_dmoz, [ :offset, :limit ] => :environment do |t, args|
    offset = !args[:offset].blank? ? args[:offset].to_i : 0 # Take offset from args.  Default of 0
    limit = !args[:limit].blank? ? args[:limit].to_i : 1 # Take limit from args.  Default of 1
    ActiveRecord::Base.octopus_establish_connection(:adapter=> "mysql", :host=> "localhost", :database => "dmoz", :username => "dmoz", :password => "dmoz")

    results = ActiveRecord::Base.connection.select_all("SELECT * FROM structure LIMIT #{ offset }, #{ limit }") # Fetches it directly from the dmoz database.
    count = offset
    conn = ActiveRecord::Base.octopus_establish_connection(:adapter=> "mysql", :host=> "localhost", :database => "talon_development", :username => "rails_shadow", :password => "husky")
    results.each do |result|
      if count % 1000 == 0
        puts count
      end
      count +=1

      begin
        sql = DmozCategory.send(:sanitize_sql_array, ["INSERT INTO dmoz_categories (id, dmoz_category_title, dmoz_category_name, dmoz_category_description, created_at, updated_at, dmoz_category_lastupdate) VALUES (?, ?, ?, ?, NOW(), NOW(), ?)", result['catid'], result['title'], result['name'], result['description'], result['lastupdate']]) #We leave parent_id NULL for the next task to handle relationships

        DmozCategory.connection.execute(sql) #doesn't get the ID..

      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T08:22:29.397

一般来说，不要使用`connection.execute`，使用`connection.insert`

这将返回最后插入的行的生成 id。它如何做到这一点取决于数据库。在 MySQL 上，最后一个插入 id 是连接的属性。在 Postgres 上，“返回”子句被附加到查询中（对于旧版本的 postgres，后备会询问序列的最后一个 id）。

使用 insert 而不是 execute 也会清除 rails 查询缓存。

至少在 MySQL 上，[即使你自己设置了 id 也可以](http://dev.mysql.com/doc/refman//5.5/en/mysql-insert-id.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:28:38.667

我认为[`insert_sql`](http://apidock.com/rails/v2.3.8/ActiveRecord/ConnectionAdapters/DatabaseStatements/insert_sql)方法应该可以帮助你

```
DmozCategory.connection.insert_sql(sql) # => id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:27:44.237

如果这是 mysql2 gem，并且`DmozCategory.connection`是客户端的实例，`DmozCategory.connection.last_id`则可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:23:50.837

try this, that is how AR defines id before insert in 2.3

> id = DmozCategory.connection.next_sequence_value(DmozCategory.sequence_name)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T00:38:25.810

既然你`id`已经知道了，你就不能这样做吗？

```
dmoz_category = DmozCategory.find(result['id'])
$stderr.puts dmoz_category.inspect 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-14T04:31:14.900

假设您使用的是 MYSQL 并且表自动递增，您可以使用：

```
SELECT LAST_INSERT_ID() 
```

按照它所说的，将最后插入的 ID 抓取到表中。这会在您的代码中添加另一个查询，但它似乎坚持使用原始 SQL。

# android - 即使文件在那里也得到 FileNotFoundException

> ID：11024772
> 
> 赞同：0
> 
> 时间：2012-06-13T23:27:03.920
> 
> 标签：android, inputstream

我正在尝试使用以下方法访问用于 xml 解析的文件：

```
InputStream inputStream = context.getAssets().open("/mnt/sdcard/cat/bird/flowers.xml"); 
```

当它运行时，我收到以下错误：

```
06-13 23:13:22.620: W/System.err(3118): java.io.FileNotFoundException: /mnt/sdcard/cat/bird/flowers.xml
06-13 23:13:22.620: W/System.err(3118):     at android.content.res.AssetManager.openAsset(Native Method)
06-13 23:13:22.620: W/System.err(3118):     at android.content.res.AssetManager.open(AssetManager.java:314)
06-13 23:13:22.620: W/System.err(3118):     at android.content.res.AssetManager.open(AssetManager.java:288) 
```

我检查了文件的拼写，并多次检查了位置。该文件在那里并正确命名。这里发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T23:52:40.783

`getAssets().open(...)`用于访问与 .apk 文件一起打包的文件，方法是将它们放在项目`/assets`目录中。

正在尝试使用此路径打开文件...

```
/mnt/sdcard/cat/bird/flowers.xml 
```

...意味着`AssetManager`将尝试查找您最初使用以下路径放置在项目中的打包文件...

```
/assets/mnt/sdcard/cat/bird/flowers.xml 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T23:43:49.620

确保您具有以下权限。（可能不需要仅仅阅读）。在某些从 sdcard 读取的设备上也受到限制。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

也不要使用硬编码路径，使用以下获取外部存储路径。

```
String path = Environment.getExternalStorageDirectory() + "/cat/bird/flowers.xml"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T23:56:49.667

通常`getAssets()`用于访问项目中资产文件夹中的文件。你应该使用类似的东西：

```
InputStream inputStream = new FileInputStream("//sdcard//cat//bird//flowers.xml"); 
```

# html - HTML 5 音频 (Firefox)

> ID：11024774
> 
> 赞同：3
> 
> 时间：2012-06-13T23:27:17.810
> 
> 标签：html, audio

我有点像 HTML 5 新手。我遇到的问题是标签在 Firefox 中工作。

我使用的代码是：

```
<audio src="Repipe-WebsiteNevada_06-24-08.ogg" controls autoplay>  
  <span class="style19"><a href="Repipe-WebsiteNevada_06-24-08.mp3">
      A message from Repipe Specialists</a></span>
</audio> 
```

它在本地工作，但是当我上传和测试它时。音频播放器根本不显示。

这是页面：

[http://www.repipespecialists.com/landing/ctc/repipe_specialists_usa_test.html](http://www.repipespecialists.com/landing/ctc/repipe_specialists_usa_test.html)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:41:57.143

您需要使用类型标签来指定您正在使用音频/ogg。就像是

```
<audio controls autoplay>
  <source src="file.ogg" type="audio/ogg" />
  <source src="file.mp3" type="audio/mp3" />
</audio> 
```

（注意如何列出多个文件作为不同浏览器的后备。）

* * *

之后，您仍然需要配置您的服务器。[特别是这个 StackOverflow 答案](https://stackoverflow.com/a/9203835/1180926)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:45:12.830

```
<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Tryit Editor v1.5</title>
<link rel="stylesheet" type="text/css" href="/tryit.css" />
<script type="text/javascript">
</script>
<style type="text/css">
body
{
color:#000000;
background-color:#ffffff;
margin:4px;
margin-top:0px;
}

</style>
</head>

<body>
<div style="position:relative;width:100%;margin-top:50px;margin-bottom:0px;">
<div style="width:960px;height:94px;position:relative;margin:0px;margin-left:auto;margin-right:auto;margin-top:5px;margin-bottom:5px;padding:0px;overflow:hidden">
<audio controls="controls">
  <source src="song.ogg" type="audio/ogg" />
  <source src="song.mp3" type="audio/mpeg" />
Your browser does not support the audio element.
</audio>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T02:17:12.030

我认为这与您的服务器端地雷类型配置以及浏览器如何解释不同内容类型的响应有关。

您的 ogg 文件的响应内容类型是`text/plain`，我猜对于 Chrome 等某些浏览器，它能够预测真正的内容类型是 ogg 但 Firefox 无法做到这一点。因此，Firefox 将无法将此文件加载为 ogg 音频。

# php - CodeIgniter - 提交表单后刷新 div

> ID：11024782
> 
> 赞同：1
> 
> 时间：2012-06-13T23:27:44.717
> 
> 标签：php, forms, codeigniter

我的控制器从数据库模型中获取数据，并将它们发送到视图。在视图中，我执行 foreach 循环来为每个实体绘制 div。每个 div 都有一个表单元素来评价它的实体。

控制器：

```
function index(){
    $data['main_content'] = 'list';
    $data['entities'] = $this->database_model->getEntities();
    $this->load->view('template', $data);
}

function postRate(){
    $rate = array(
        'entity_id' => $this->input->post('entity_id'),
        'owner_id' => $this->input->post('owner_id'),
        'value' => $this->input->post('value')
    );
    $this->database_model->persistRate($rate);
    $this->index();
} 
```

模型：

```
function getEntities(){
    return $this->db->get('entity')->result();
}

function persistRate($rate){
    return $this->db->insert('rate', $rate);
} 
```

看法：

```
<?php foreach($entities as $entity) : ?>
    <div class="entity">
        <?php echo form_open('entities/postRate/', $attr); ?>
        <?php echo form_hidden('entity_id', $entity->id); ?>
        <?php echo form_hidden('owner_id', $userid); ?>
        <?php echo form_hidden('value', 1); ?>
        <?php echo form_submit('submit', '+1'); ?>
        <?php echo form_close(); ?>
    </div>
<?php endforeach; ?> 
```

在这种情况下，评级后，整个页面将被重新加载，但我只想刷新提交表单的那个 div。我知道 javascript 或 jQuery 可以做到，.. 更新 .. 但我不知道他们的逻辑，他们如何知道实际实体的确切 div 或确切（更新）数据？我应该从数据库中获取它吗？我只是对 js/jquery/ajax 感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:33:18.247

这真的很简单，可以在这里找到：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

这是一个例子：

```
$.ajax({
  url: "http://localhost/your_site/controller/method/",
  type: "POST",
  data: {id : 123},
  dataType: "html",
  success: function(data) {
    $('.result').html(data);
  }
});

<div class="result">
//YOUR AJAX RESULT WILL BE HERE
</div> 
```

您的控制器方法应该接收一个名为`id`.

这是一个基本示例，您真的应该阅读链接并了解更多信息。;)

# css - ::selection 和 WebKit 的奇怪行为

> ID：11024791
> 
> 赞同：3
> 
> 时间：2012-06-13T23:28:33.517
> 
> 标签：css, webkit, selection, textselection

在我的网站上，我`::selection`用背景、文本颜色和文本阴影声明了伪元素。但是，当您突出显示整个站点时，您会看到准确的选择，除了一些您仍会看到系统的位置`selection`。我能够弄清楚为什么这些地方表现得很奇怪。如果您之后有一个内联元素和一个块元素，则内联元素和块元素之间的空间将保留为系统默认选择。我不明白为什么。这是一个错误吗？在我去过的大多数网站上（声明了选择元素），我看到了这些*点*，这是一个非常疏忽的地方。谁能告诉我是bug还是正常？并可能解释为什么它会这样。

我整理了一个[“jsFiddle”](http://jsfiddle.net/f7j58/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:41:50.217

考虑到它不是标准功能，它并不是真正的“错误”。W3C 没有定义它应该如何表现的标准，因为它很早就从 CSS3 规范中删除了。

来自[Mozilla 开发网络](https://developer.mozilla.org/en/CSS/%3a%3aselection)：

> 它的行为未指定，尤其是嵌套元素

底线：没有规范说明嵌套元素*应该*发生什么。所以，从技术上讲，这不是一个不正确的渲染，即使它没有多大意义。最终，它仍然是一个“实验性”功能。您可以尝试使用 Safari 提交错误报告。

# perl - perl中的递归子程序出错

> ID：11024793
> 
> 赞同：1
> 
> 时间：2012-06-13T23:28:38.347
> 
> 标签：perl

我是 Perl 的新手。我正在尝试编写一个 Perl 脚本，该脚本打印目录中所有文件的内容并递归执行，直到打印目录/子目录中的所有文件。我正在使用以下子程序进行操作。

```
sub print_files_in_dir {
my $file = shift;
if(-d $file){
 my @files=glob "$file/*";
  foreach my $file (@files){
   if(-d $file){
    print_files_in_dir $file;
   }
   else {
    print_file $file;
   }
 } 
 else {
  print_file $file;
 }
} 
```

其中 print_file 是 sub 打印单个文件的内容。当我尝试使用目录 dir1 执行此代码时出现此错误，该目录包含另一个名为 dir2 的目录。

> 无法通过包“dir1/dir2”找到对象方法“print_files_in_dir”（也许您忘记加载“dir1/dir2”？）

无法弄清楚为什么会引发此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T00:26:05.970

正如您所了解的，省略参数列表周围的括号会给您带来非常奇怪的错误。有的甚至沉默。例如，`print (4+6)*2`打印`10`！（好吧，如果你有警告，它会发出警告，所以它并不是真正的沉默，但它也不是致命的。）如果有人省略了那些括号，则必须小心。

我写这个是因为我注意到你的问题`glob`；如果路径中包含某些字符（例如空格），它将不起作用。

```
 glob "$file/*" 
```

应该

```
 glob "\Q$file\E/*" 
```

既然我在这里，就可以消除一些冗余。您的子折叠为：

```
sub print_files_in_dir {
   my $file = shift;
   if (-d $file) {
      print_files_in_dir($_) for glob "\Q$file\E/*";
   } else {
      print_file($file);
   }
} 
```

实际上，您可以使用[File::Find::Rule](http://search.cpan.org/perldoc?File%3a%3aFind%3a%3aRule)进一步折叠它。

```
use File::Find::Rule qw( );
print_file($_) for File::Find::Rule->file->in('.'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T23:34:46.867

您正在与“间接函数调用”发生冲突，这是一个令人困惑的 OOP 功能，可能会导致以下问题：

```
print_files_in_dir $file; 
```

像你说的那样被解析，这意味着完全不同和意想不到的东西：

```
$file->print_files_in_dir(); 
```

在你的函数调用上使用括号（像这样），这不会发生：

```
print_files_in_dir($file); 
```

也一样`print_file`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:54:33.660

在您调用`print_files_in_dir`编译器时，还没有看到子例程的完整定义，所以它不知道它是什么。从您使用的语法来看，最好的猜测是它是一个方法调用。

您可以通过在定义子例程之前预先声明它来纠正这个猜测，就像这样

```
sub print_files_in_dir;

sub print_files_in_dir {

  my $file = shift;

  if (-d $file) {

    my @files = glob "$file/*";

    foreach my $file (@files) {

      if (-d $file) {
        print_files_in_dir $file;
      }
      else {
        print_file $file;
      }
    }
  } 
  else {
    print_file $file;
  }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-13T23:38:59.780

如果您的动机是递归列出文件，请尝试以下操作：

```
 system("ls -R") 
```

# gwt - 通过调度发送 java.lang.Class 的最佳方式？

> ID：11024794
> 
> 赞同：1
> 
> 时间：2012-06-13T23:28:39.027
> 
> 标签：gwt, gwt-platform, java.lang.class

这是设置：我使用 GWT 2.4 和 gwt-platform 0.7。我有一堆包含键值对的类（目前是 int->String）。它们只是不同的类，因为它们通过 JPA 保存到数据库中的不同表中。

现在我想要一个（！）方法来从服务器获取这些数据。

我首先尝试将我想使用的类发送到服务器`ArrayList<Class<?>>`。并回答`HashMap<Class<?>, HashMap<Integer, String>>`。但是 GWT 不允许序列化`Class<?>`。通过这种方式，我可以很容易地获取所有数据库条目并将它们与相关的正确类（这很重要）一起显示。

现在我正在寻找另一种无需编写大量代码即可使其正常工作的方法。

第一个新想法是在文件夹`HashMap<String, Class<?>>`内有一个地方，`shared`然后通过电线传输字符串。因此，客户端和服务器必须通过 HashMap 中的字符串查找类来创建新对象。

有没有其他好的解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:32:55.233

```
public Enum ClassType {
  A, B, C
}

public class AType {
  HashMap<Integer, String> myHashMap;
  ClassType getClassType() {
      return ClassType.A;
  }
}

public interface TransferableHashMap extends IsSerializable {
   ClassType getClassType();
}

public interface transferService extends RemoteService {
    HashSet<TransferableHashMap> getMaps(HashSet<ClassType> request);
}

//somewhere on the client
final Set<AType> as = new Set<AType>();
final Set<BType> bs = new Set<BType>();
final Set<CType> cs = new Set<CType>();

Set<ClassType> request = new HashSet<ClassType>();
request.add(ClassType.A);
request.add(ClassType.B);
request.add(ClassType.C);

transferService.getMaps(request, 
  new AsyncCallback<HashSet<TransferableHashMap>>(){

  @Override
  public void onSuccess(HashSet<TransferableHashMap>> result) {
      for (TransferableHashMap entry : result) {
        if(entry instanceof Atype) as.add((AType)entry);
        else if(entry instanceof Btype) bs.add((BType)entry);
        else if(entry instanceof Ctype) cs.add((CType)entry);
        else throw new SerializationException();
        }
    }
  }); 
```

我就是这样做的。

# dns - 比较两个不同名称服务器上的 DNS

> ID：11024797
> 
> 赞同：10
> 
> 时间：2012-06-13T23:28:48.210
> 
> 标签：dns, compare, nameservers

我正在努力将我的域的名称服务器切换到新的 DNS 服务。将新设置与现有 DNS 设置进行比较的最佳工具是什么。

我尝试使用带有和不带有 @nameserver 的 dig 来确保新旧提供商之间的 DNS 记录匹配。

至今没有成功。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-03-16T14:55:59.520

我回答了那个老问题，我遇到了这个问题，我以这种方式解决了它：

**对于单个域：**

```
diff <(sort -u <(dig +nottlid +noall +answer @ns.myfirstserver.com example.com ANY) ) <(sort -u <(dig +nottlid +noall +answer @ns.mysecondserver.com example.com ANY) ) 
```

**对于多个域或子域：**

*   逐行创建一个包含 1 个域的文本文件（例如：alldomains.txt）

命令行：

```
diff <(sort -u <(for host in $(cat alldomains.txt); do dig +nottlid +noall +answer @ns.myfirstserver.com $host ANY; done) ) <(sort -u <(for host in $(cat alldomains.txt); do dig +nottlid +noall +answer @ns.mysecondserver.com $host ANY; done) ) 
```

**注释：**

*   *diff* : 逐行比较文件
*   *sort*：对文本文件的行进行排序
*   *-u*：确保只有唯一的行
*   *dig* : DNS 查找实用程序
*   *+nottlid* : 打印记录时不显示 TTL
*   *+noall* : 清除所有显示标志
*   *answer*：显示回复的权限部分。
*   *@ns.server.com* : 要查询的名称服务器的名称或 IP 地址
*   *ANY*：表示需要什么类型的查询（ANY、A、MX、SIG 等）

`> myresult.txt`您可以通过在末尾添加来重定向到文件。

我希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-26T08:31:56.247

是的！从代码源的回答中得到灵感，我创建了这个来检查一个已知的区域文件。由于 ANY 查询不输出完整区域。

输入是绑定格式的区域文件，第一个字段是强制性且完整的！尚不支持空的第一个字段或缩短！

```
zone=test.txt; ns1=ns1.test.com; ns2=ns2.test.com; \
zcl=$(basename ${zone} .txt)_cl.txt; zl1=$(basename ${zcl} .txt)_${ns1}.log; zl2=$(basename ${zcl} .txt)_${ns2}.log; \
echo "Diffing the stuff in $zcl (from $zone) for $ns1 <-> $ns2" >&2 ;echo " loggings to $zl1, $zl2" >&2 ; \
cat $zone | awk 'BEGIN {IFS=" "} $1 !~ /^;|^[[:space:]]+|^$/ {t=$4; if (!match($2,/[[:digit:]]/)) t=$3; n=$1; print n " " t }' | sort -u > $zcl ; \
diff <(sort -u <(while read host type; do echo "Q $host $type" >&2; dig +nottlid +noall +answer @$ns1 $host $type; done < $zcl) | tee $zl1 ) \
     <(sort -u <(while read host type; do dig +nottlid +noall +answer @$ns2 $host $type; done < $zcl) | tee $zl2 ) && echo "OK" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-14T22:17:40.447

该脚本用于在迁移期间比较两个区域文件。

它使用颜色编码和最终状态输出来指示哪些记录不同

SOA 和 NS 记录在迁移期间会有所不同 - 请注意差异

任何记录也可能会有所不同，因为它包含上述类型。

A MX 和 TXT 记录应该是相同的，如果它们存在的话——这里的不同意味着有问题！

[![查看示例屏幕截图](../Images/c708a6c12c67002645168735a7712839.png)](https://i.stack.imgur.com/sqbGx.png)

来源：[https ://github.com/geek4unix/compare-zones/](https://github.com/geek4unix/compare-zones/)

# java - 如何使用 FORM 身份验证以编程方式登录？

> ID：11024798
> 
> 赞同：2
> 
> 时间：2012-06-13T23:28:58.730
> 
> 标签：java, forms, authentication, servlets

我有一个使用表单身份验证登录的 java web 应用程序，它运行良好。但是，我想以编程方式访问网络应用程序的一些服务，但我想让它们不受安全限制。

我的想法是调用“j_security_check”并发布“j_username”和“j_password”字段。我认为这将建立会话，以便允许将来的请求。但是每当我发出请求时，身份验证 servlet 都会返回 408。我确信 cookie 已启用，所以我不确定发生了什么。

是否有记录的方式以编程方式连接到使用表单身份验证的服务器？

编辑：我想出了一种方法来做到这一点。您需要首先调用服务，然后保存创建的会话 cookie。然后您可以调用“j_security_check”并将您的用户名和密码传递给它，但是，您需要确保将引用者（原文如此）设置为您的登录页面。最后，您应该能够调用感兴趣的服务。

这是一个相当黑客，但似乎工作可靠......我希望有更好的方法。

# android - 我的视图如何响应鼠标滚轮？

> ID：11024809
> 
> 赞同：15
> 
> 时间：2012-06-13T23:29:56.137
> 
> 标签：android, mouse

我有一个`onTouch`可以区分触摸输入和鼠标左/中/右键单击的视图，如

```
@Override
public boolean onTouch(View v, MotionEvent event) {
  if (event.getButtonState() == MotionEvent.BUTTON_PRIMARY) // API 14 required
    ...
  ...
} 
```

我也希望这个视图能够响应鼠标滚轮。 `onTouch`不是办法，我也没有找到任何其他事件处理程序来响应鼠标滚轮。也许视图可以假装可滚动并使用滚动方法做自己的事情？在这一点上，我已经放弃了，并且正在使用键盘输入（1 到 9，加 0）来选择我更喜欢用鼠标滚轮选择的显示元素。
因此，我们将不胜感激一个坚定的提示或一些代码。

不用担心需要键盘和鼠标的 Android UI 会给公众带来麻烦；该应用程序是一个开发工具。

编辑：下面给出了正确的答案，但是这个问题对未来的读者更有帮助，这是（稍微编辑过的）我使用的实际代码：

```
@Override
public boolean onGenericMotionEvent(MotionEvent event) {
  if (0 != (event.getSource() & InputDevice.SOURCE_CLASS_POINTER)) {
    switch (event.getAction()) {
      case MotionEvent.ACTION_SCROLL:
        if (event.getAxisValue(MotionEvent.AXIS_VSCROLL) < 0.0f)
          selectNext()
        else
          selectPrev();
        return true;
    }
  }
  return super.onGenericMotionEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-10-12T16:35:12.403

接受的答案是一个文档链接，该链接将我引导至问题中的示例代码，但该答案已被删除。为了让这个问题不再出现“未回答”，这就是您的视图如何响应鼠标滚轮：

```
@Override
public boolean onGenericMotionEvent(MotionEvent event) {
  if (0 != (event.getSource() & InputDevice.SOURCE_CLASS_POINTER)) {
    switch (event.getAction()) {
      case MotionEvent.ACTION_SCROLL:
        if (event.getAxisValue(MotionEvent.AXIS_VSCROLL) < 0.0f)
          selectNext();
        else
          selectPrev();
        return true;
    }
  }
  return super.onGenericMotionEvent(event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T10:36:34.733

鼠标滚轮事件动作被认为是滚动事件

# perl - Perl 包方法将包名称作为第一个参数返回

> ID：11024811
> 
> 赞同：1
> 
> 时间：2012-06-13T23:30:24.750
> 
> 标签：perl

我有两个通过 fast_cgi 调用的嵌套包。从第一个包中，我从第二个包中调用一个方法，如下所示：

```
$MyScalar = "A Value";
MyPackage::Inner->InvokeMe($MyScalar); 
```

从我的另一个包中，我正在展开如下参数：

```
sub ZonesByCustomer($)
{
    my $MyParameter = @_[0];
    print $MyParameter;
} 
```

我期望的是`A Value`打印出来，但实际打印出来的是`MyPackage::Inner`. `A Value`实际上是存储在`@_[1]`.

这似乎令人困惑。为什么包名称作为参数返回？

这是从我的代码中抽象出来的。如果我在这里遗漏了一些必不可少的东西，我可以提供一个稍微复杂一点的版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T00:44:09.907

Perl 没有像许多其他语言那样的“this”变量（隐含或其他），但该方法需要该信息。相反，Perl 提供类（静态方法调用）或对象（实例方法调用）作为方法的第一个参数。评估参数列表的结果如下。

需要类名的静态方法示例：

```
sub new {
   my ($class, %args) = @_;
   return bless(\%args, $class);
}

SomeClass->new(...); 
```

需要对象的实例方法示例：

```
sub as_string {
   my ($self) = @_;
   return $self->{val};
}

$some_object->as_string(); 
```

* * *

注意：`@_[0]`and`@_[1]`应该是`$_[0]`and `$_[1]`。

注意：原型通常很糟糕，在方法调用期间会被忽略。摆脱它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T23:46:32.400

这是从[`perlootut`](http://perldoc.perl.org/perlootut.html#Methods)。

> 当我们进行方法调用时，Perl 安排方法的调用者作为第一个参数传递。Invocant 是箭头左侧事物的一个花哨名称。调用者可以是类名或对象。

所以 Perl 正在为方法调用做它应该做的事情。

```
MyPackage::Inner->InvokeMe($MyScalar) 
```

等同于

```
MyPackage::Inner::InvokeMe('MyPackage::Inner', $MyScalar) 
```

如果您查看参数数组的内容，`@_`您将看到它`$_[1]`的值`$MyScalar`。

（顺便说一句，您访问第一个参数的语法是错误的。您应该写成`$_[0]`数组的一个元素是*标量*。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:47:54.427

这就是 OO 在 Perl 中的工作方式。包方法将包名作为第一个参数，对象方法将对象作为第一个参数。因此，您可以将构造函数定义为封装方法：

```
sub new {
    my ($class) = @_;
    bless {}, $class;
} 
```

您可以在方法中对对象本身进行操作：

```
sub frobnicate {
    my ($self) = @_;
    $self->_do_frob if $self->_is_frobnicable;   
} 
```

# html - 显示内嵌块和图像

> ID：11024812
> 
> 赞同：5
> 
> 时间：2012-06-13T23:30:42.333
> 
> 标签：html, css

我是设计新手，所以有一些问题......

![在此处输入图像描述](../Images/ba4a39f256548fbe389f68a1a7e9cc24.png)

我需要 3 个块内联和居中，所以我尝试了：

```
#main .block{
    display: inline-block;
    border: 1px solid #ECEDE8;
    margin: 10px 10px;
    overflow: hidden;
    height: 265px;
    width: 265px;
} 
```

但是，当我将图像添加到块中时，所有其他图像都会下降。

附言

如我所见，这个问题在 safari 中，在 Firefox 中都可以。

PSS

```
<div id="main">
<div class="block">main
<img src="style/images/try.png">
</div>
<div class="block">main</div>
<div class="block">main</div>
<div class="block">main</div>
<div class="block">main</div>
<div class="block">main</div>
</div> 
```

PSSS

正如我想谷歌所想的那样，所有问题都在显示：inline-block，在 safari 作品中显示：inline-table。可能有什么解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T23:46:51.217

您需要设置垂直对齐属性。在这种情况下，最好的选择可能是：

```
vertical-align: top 
```

所以你的CSS应该是：

```
#main .block{
    display: inline-block;
    border: 1px solid #ECEDE8;
    margin: 10px 10px;
    overflow: hidden;
    height: 265px;
    width: 265px;
    vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:44:41.583

如果您的块是固定宽度的，为什么不浮动它们并将它们放在具有总宽度并使用 margin: 0 auto 居中的父容器中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-12T15:32:24.953

div 元素是块元素。img 元素是一个 inline-block 元素；它具有内联元素的主要特征（除了它具有高度和宽度的块元素特征）。因此，我发现您的代码存在两个主要问题。首先，您的图像以某种方式替换了与您同时显示单词“main”的空间相同的单位，这可能会导致与间距/显示发生冲突。[我建议从您的 HTML 中删除单词“main”。] 其次，您没有指定图像的高度和/或宽度，这并不是真正的问题，因为您将溢出值设置为隐藏，但通常您仍然可以应该分配一个高度和/或宽度值（使它们小于父容器' s 高度和宽度），因为它将使浏览器呈现/显示更通用/兼容的跨浏览器。实现这两件事的组合[或将显示值更改为 inline-table （它看起来更像你想要的，因为你的显示看起来像“表格”）]应该解决你的问题。如果不是，我建议将您的边距值更改为 0 auto （这将使您的图像在 div/父容器的中间居中），因为我一直怀疑您的边距值也可能是发挥作用（但前提是其他两个建议不起作用）。祝你好运！)] 应该解决您的问题。如果不是，我建议将您的边距值更改为 0 auto （这将使您的图像在 div/父容器的中间居中），因为我一直怀疑您的边距值也可能是发挥作用（但前提是其他两个建议不起作用）。祝你好运！)] 应该解决您的问题。如果不是，我建议将您的边距值更改为 0 auto （这将使您的图像在 div/父容器的中间居中），因为我一直怀疑您的边距值也可能是发挥作用（但前提是其他两个建议不起作用）。祝你好运！

PS：记住，仅仅因为你有溢出：隐藏并不意味着浏览器没有“看到”溢出的元素。记住盒子模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-18T20:16:38.270

尝试这个 -

```
<div class="main" id="main">
<div class="block">main
<img src="style/images/try.png">
</div>
</div>
<div id="main">
<div class="block">main</div>
</div>
<div id="main">
<div class="block">main</div>
</div>
<div id="main">
<div class="block">main</div>
</div>
<div id="main">
<div class="block">main</div>
</div> 
```

而`#main .block{`不仅仅是`.main {`

# c# - 如何要求 ComboBox 选择？

> ID：11024815
> 
> 赞同：-2
> 
> 时间：2012-06-13T23:30:55.103
> 
> 标签：c#, winforms, combobox, wizard

在 Windows 窗体 (C#) 中工作，创建向导，我想要求用户在允许单击“下一步”到表单中的下一页之前在组合框中选择一个选项。

我以为我过去看到了在哪里执行此操作，但现在我找不到任何东西。

感谢您的帮助...！

Ĵ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:42:08.857

有多种方法可以做到这一点。不同的应用程序使用他们喜欢的方式。

在组合框列表的顶部有一个空或“选择值”选项的一种方法。然后当用户单击“下一步”按钮时，检查这是否是被选中的值。如果是这样，不要让下一个。否则允许继续。

我的方法是将“SelectedValue”属性设置为-1（意味着什么都不选择）并检查用户按下“下一步”时是否为-1。（如果选择了任何有效值，则此属性的值应高于 -1。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T01:07:54.013

触发组合框的选择更改事件，然后设置按钮启用属性：

```
private void comboBoxSelectionChanged(obj sender, EventArgs e)
{
    nextButton.enabled = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T23:39:44.173

有很多方法可以*验证*选择...或强制选择...2 离开我的头顶：

*   将组合框设置为[`CausesValidation`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.causesvalidation.aspx)(IIRC) 为 true 并处理[`xxxValidating(o,e)`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)和[`xxxValidated(o,e)`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validated.aspx)事件
*   处理**Next**按钮的 OnClick 事件并检查组合框[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem.aspx)或[SelectedIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindex.aspx)属性：

/* 须藤 */

```
(o, e) => {
    if(fooCombo.SelectedIndex == {...}) {
        // show dialog, etc.
    }
} 
```

# c++ - 如何使用 C++ 文件流编辑（读取然后写入）文件？

> ID：11024816
> 
> 赞同：1
> 
> 时间：2012-06-13T23:31:17.540
> 
> 标签：c++, filestream

例如，如果我需要在文件末尾添加一个句子。我必须先打开文件（例如“a.txt”），通过

`ofstream outfile.open("a.txt");`

但是每当我这样做时，我都会覆盖同一目录中现有的“a.txt”。是否可以像先读取然后写入一样编辑文件？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:13:10.367

您想以“附加”模式打开文件。传递`ios::app`给 open 方法会导致文件以附加模式打开。

```
f.open("file.txt", ios::app); 
```

有关其他标志，请参见[http://www.cplusplus.com/reference/iostream/ios_base/openmode/](http://www.cplusplus.com/reference/iostream/ios_base/openmode/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:07:12.657

试试这个：

```
std::ofstream outfile( "a.txt", std::ios_base::app | std::ios_base::ate ); 
```

*各种参考*：

[http://www.cplusplus.com/reference/iostream/ofstream/ofstream/](http://www.cplusplus.com/reference/iostream/ofstream/ofstream/)

[http://www.cplusplus.com/reference/iostream/ofstream/open/](http://www.cplusplus.com/reference/iostream/ofstream/open/)

[http://msdn.microsoft.com/en-us/library/aa277521(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa277521(v=vs.60).aspx)

[http://msdn.microsoft.com/en-us/library/aa266859(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa266859(v=vs.60).aspx)

# php - 如何远程包含文件并访问变量

> ID：11024817
> 
> 赞同：0
> 
> 时间：2012-06-13T23:31:20.910
> 
> 标签：php

我在某些服务器上有文件...文件是 www.iamtushar.com/file/index.php

```
<?PHP
$var=2;
?> 
```

现在我想包含这个文件并在其他服务器上使用变量 $var 的值..

假设另一个脚本是 www.howtodothis.com/index.php 并且我想在这里使用上述文件的 $var ....

```
<?php

include('www.iamtushar.com/file/index.php');
echo $var;

?> 
```

但它不起作用，但是如果文件位于同一服务器和同一浏览器上，它就可以工作..

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:35:06.203

它不起作用，因为 PHP 只能将你输出`$var`到客户端。我相信，如果您将`index.php`文件的内容输出到客户端，然后您的其他`index.php`文件获取它并即时编译它，那么这样做是可能的。然而，出于安全/速度的原因，这是一个非常糟糕的主意。

你最好的选择是输出`$var`到浏览器。比您的其他脚本会采用它`2`并将其放在您的其他`$var`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:10:25.223

Instead of using the `include` keyword, use the `require` keyword. Simply replace like this

```
require('www.iamtushar.com/file/index.php');
echo $var; 
```

Even better, if you wish to save processing time, just use the `require_once` keyword as so. This way, you ensure that in 1 page load, you only load this PHP file once. Also, it prevents confusion between variables of the same name in different files. You can do so using

```
require_once('www.iamtushar.com/file/index.php');
echo $var; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:14:52.777

除了安全问题，如果在 PHP 中启用了“URL fopen 包装器”（它们在默认配置中），您可以使用 URL（通过 HTTP 或其他支持的包装器）指定要包含的文件： `include 'http://www.iamtushar.com/file/index.php';`

# random - 根据任意分布设置 Eigen::Matrix 的系数

> ID：11024820
> 
> 赞同：5
> 
> 时间：2012-06-13T23:31:59.330
> 
> 标签：random, matrix, eigen

Eigen::Matrix 有一个 setRandom() 方法，它将矩阵的所有系数设置为随机值。但是，在指定要使用的分布时，是否有一种内置方法可以将所有矩阵系数设置为随机值。

有没有办法实现以下目标：

```
Eigen::Matrix3f myMatrix;
std::tr1::mt19937 gen;
std::tr1::uniform_int<int> dist(0,MT_MAX);
myMatrix.setRandom(dist(gen)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-27T00:50:28.613

你可以使用 Boost 和 unaryExpr 做你想做的事。您传递给 unaryExpr 的函数需要接受一个您可以忽略的虚拟输入。

```
#include <boost/random.hpp>
#include <boost/random/normal_distribution.hpp>
#include <iostream>
#include <Eigen/Dense>

using namespace std;
using namespace boost;
using namespace Eigen;

double sample(double dummy)
{
  static mt19937 rng;
  static normal_distribution<> nd(3.0,1.0);
  return nd(rng);
}

int main()
{
  MatrixXd m =MatrixXd::Zero(2,3).unaryExpr(ptr_fun(sample));
  cout << m << endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-22T02:09:09.907

如果有人遇到此线程，我将发布一个更简单的答案，现在可以使用并且不需要提升。我在一份旧的 Eigen Bugzilla [Report](https://eigen.tuxfamily.org/bz/show_bug.cgi?id=720)中发现了这一点。所有的功劳归于作者 Gael Guennebaud，他提出了以下简单的方法：

```
#include <Eigen/Sparse>
#include <iostream>
#include <random>

using namespace Eigen;

int main() {
  std::default_random_engine generator;
  std::poisson_distribution<int> distribution(4.1);
  auto poisson = [&] (int) {return distribution(generator);};

  RowVectorXi v = RowVectorXi::NullaryExpr(10, poisson );
  std::cout << v << "\n";
} 
```

请注意，带有`int`lambda 函数参数的签名是 Eigen NullaryExpr 所必需的，尽管在此示例中未使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T14:27:28.467

除了均匀分布，我不知道可以直接在矩阵上使用的任何其他类型的分布。您可以做的是将 Eigen 提供的统一分布直接映射到您的自定义分布（如果存在映射）。

假设您的分布是 sigmoid。您可以使用函数 y = a / ( b + c exp(x) ) 将均匀分布映射到 sigmoid 分布。

通过临时[将矩阵转换为数组](http://eigen.tuxfamily.org/dox/TutorialArrayClass.html)，您可以对矩阵的所有值进行元素操作：

```
Matrix3f uniformM;
uniformM.setRandom();

Matrix3f sigmoidM;
sigmoidM.array() = a * ((0.5*uniformM+0.5).array().exp() * c + b).inv(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-04T06:51:01.180

我遇到了类似问题，并尝试使用 NullaryExpr 解决它。但是 NullaryExpr 的一个问题是它不能被明确地向量化。因此，使用 NullaryExpr 的解决方案运行速度很慢。

因此，我开发了[EigenRand](https://github.com/bab2min/EigenRand)，这是 Eigen 随机分布的附加组件。我认为它将帮助那些想要快速轻松地生成随机数的人。

```
#include <Eigen/Dense>
#include <EigenRand/EigenRand>
#include <iostream>

using namespace Eigen;

int main() {
  Rand::Vmt19937_64 generator;

  // poisson distribution with rate = 4.1
  MatrixXi v = Rand::poisson<MatrixXi>(4, 4, generator, 4.1);
  std::cout << v << std::endl;

  // normal distribution with mean = 3.0, stdev = 1.0
  MatrixXf u = Rand::normal<MatrixXf>(4, 4, generator, 3.0, 1.0);
  std::cout << u << std::endl;

  return 0;
} 
```

# jquery - 如何根据鼠标位置和 jQuery UI Draggable 向 html 文档添加控件？

> ID：11024821
> 
> 赞同：3
> 
> 时间：2012-06-13T23:32:04.547
> 
> 标签：jquery, html, jquery-ui, jquery-ui-draggable

我正在创建一个表单设计器，并有一个包含按钮、文本框等图像的工具箱。用户将这些控件中的每一个拖到表单上，所以我使用的是 jQuery `Draggable()`。在表单中的某个位置放置此控件（或图像）后，该控件（或图像）应返回到其在工具箱中的位置，然后应将实际控件插入用户在表单中放置控件的位置。

这就是我所做的：

```
<div id="tools">
    <div id="draggables">
        <img class="tool" alt="Button" id="button" src="Data/Button.png" />
        <img class="tool" alt="TextBox" id="textBox" src="Data/TextBox.png" />
        <img class="tool" alt="RadioButton" id="radioButton" src="Data/RadioButton.png" />
        <img class="tool" alt="CheckBox" id="checkBox" src="Data/CheckBox.png" />
    </div>
    <img alt="Trash" id="trash" src="Data/trash.png" />
</div> 
```

然后：

```
$(function () {
    $("#draggables").children().draggable();
}); 
```

**问题是：**我应该在末尾`draggable()`（或其他任何地方）添加什么以将**指定**的控件插入表单中的选定位置？

任何更好的解决方案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:45:50.760

有基于 JQuery UI droppable实现[购物车的示例。](http://jqueryui.com/demos/droppable/#shopping-cart)

这与您的任务有类似的行为：复制到购物车后的项目返回原位。

但是在复制多个表单元素时，您需要解决添加唯一表单元素名称的问题。

# c - 如何使用C覆盖文件内的结构？

> ID：11024822
> 
> 赞同：1
> 
> 时间：2012-06-13T23:32:09.277
> 
> 标签：c, file, function, edit, fwrite

我将结构保存到 .dat 文件中。假设我必须编辑一个特定的结构，我将如何进行？我做了以下事情：

```
ptFile = fopen("funcionarios.dat", "ab+");

fseek(ptFile, index*sizeof(strFunc), SEEK_SET); //places the pointer at the struct I want
fwrite(&newStruct, sizeof(strFunc), 1, ptFile); //adds the new struct 
```

所以，如你所见，我想用 newStruct 更新我的文件。

fwrite 函数返回 1，但它不会替换我想要的行（也不会替换相邻行，以防我使用丢失的索引），并且它不会向文件添加新结构。它根本什么都不做！

有任何想法吗？

我通过读取所有结构、用我的 newStruct 替换 index-struct 并用所有结构写入文件来做到这一点，但我正在寻找一种更好的方法来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:44:52.387

`fopen(.., "ab+")`要求*追加模式*：

```
 a+     Open for reading and appending (writing at end of
          file).  The file is created if it does not exist.  The
          initial file position for reading is at the beginning
          of the file, but output is always appended to the end
          of the file. 
```

您可能需要`r+`模式，矛盾的是，这也意味着*write*：

```
 r+     Open for reading and writing.  The stream is
          positioned at the beginning of the file. 
```

# ios - NSManagedObject 子类属性

> ID：11024824
> 
> 赞同：1
> 
> 时间：2012-06-13T23:32:17.430
> 
> 标签：ios, core-data

我有一个 NSObject 的子类，它充当我的应用程序的主要数据模型，具有许多属性和方法。我决定要使用 Core Data 来保存这些数据，所以我将子类更改为 NSManagedObject。我在 .xcdatamodeld 中创建了实体，并将其与我的 NSManagedObject 子类链接。我想知道是否可以在我的子类中保留未保存的属性？例如，这个类包含一个 NSOperationQueue 属性，但我当然不希望 Core Data 与这个属性交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:52:41.507

当您从实体自动创建（或重新创建）NSManagedObject 时，您会丢失该文件中的任何其他内容。人们通常使用类别来自定义 NSManagedObjects 的逻辑。它允许您在不更改该文件中的代码的情况下向默认 NSManagedObject 添加自定义！

干净整洁。

此链接可能会有所帮助：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:45:47.243

是的，在 NSManagedObject 子类中拥有自己的属性和方法是完全可以的。

此外，如果您希望这些属性中的任何一个利用 Core Data 缓存机制，您可以将它们作为瞬态添加到您的实体模型中。

# ruby-on-rails-3 - 带有 Mongoid 嵌入式和独立的 Rails 模型

> ID：11024826
> 
> 赞同：5
> 
> 时间：2012-06-13T23:32:24.550
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

我将如何创建一个能够保存在自己的集合中并嵌入到另一个文档中的 Mongoid 模型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T00:11:51.973

简短的回答：你不能。

当您在两个 Mongoid 文档之间使用嵌入关系时，这是因为您*不*希望子模型在其自己的集合中。一个嵌入式文档，字面意思是：嵌入其父级。

我不确定您是否是 Mongoid 的新手，因此您实际上可能正在寻找的是引用关系，它的行为更像是传统的 RDBMS 关系，其中子文档存储对父文档 ID 的引用。Mongoid 文档从[这里](http://mongoid.org/en/mongoid/docs/relations.html#has_one)开始。

鉴于这些嵌入式模型，在两者之间切换非常容易：

```
class Person
  include Mongoid::Document

  field :name
  embeds_many :phone_numbers
end

class PhoneNumber
  include Mongoid::Document

  field :area_code
  field :number

  embedded_in :person
end 
```

你可以改变`embeds_many`and `embedded_in`，所以它变成：

```
class Person
  include Mongoid::Document

  field :name
  has_many :phone_numbers
end

class PhoneNumber
  include Mongoid::Document

  field :area_code
  field :number

  belongs_to :person
end 
```

它会起作用的。现在，您将能够使用以下语句直接查询电话号码等操作：`PhoneNumber.where(:area_code => "212")`。

# perl - Apache2 服务器上的自定义 Perl 模块

> ID：11024833
> 
> 赞同：3
> 
> 时间：2012-06-13T23:33:25.230
> 
> 标签：perl, apache

目前，我正在尝试在带有 WebUI 的 Perl 程序中使用一堆自定义 perl 模块， test.pm 作为其中之一。我在安装了 Apache2 的 Windows 7 机器上运行它。当我使用 perl test.pl 在 cmd 提示符下运行程序时，程序运行良好。但是在 Apache 上运行它会给我这个错误。

```
[Wed Jun 13 16:23:32 2012] [error] [client 127.0.0.1] Can't locate test.pm in @INC (@INC contains: C:/Perl/lib C:/Perl/site/lib .) at C:/www/hello2.pl line 7.\r, referer: http://localhost/ui_test.htm
[Wed Jun 13 16:23:32 2012] [error] [client 127.0.0.1] BEGIN failed--compilation aborted at C:/www/hello2.pl line 7.\r, referer: http://localhost/ui_test.htm 
```

我用过：

```
foreach $key (sort keys(%ENV)) {
  print "$key = $ENV{$key}<p> \n";
} 
```

在路径变量下，我确实看到了所有模块所在的文件夹。还有其他地方我应该用来添加到 Perl 路径吗？

另外添加 use lib "C:\testpm\"; 我的代码只将@INC 更改为

```
(@INC contains: C:\testpm\ C:/Perl/lib C:/Perl/site/lib .) 
```

您需要做一些额外的事情来添加路径以在 apache 服务器上运行自定义 perl 模块吗？

**基于答案的解决方案：** 我发现这是最好的。在我的 httpd-perl.conf 文件中，我添加了以下几行：

```
<IfModule env_module>
    SetEnv PERL5LIB "C:\testpm;C:\testpm1;"
</IfModule> 
```

（用 C:\testpm1 扩展，向有类似问题的人展示如何添加更多模块文件夹。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T00:46:20.127

PATH 环境变量与 perl 从哪里加载模块没有关系，即@INC。您说您的路径在@INC 中，但在您显示的错误消息中，它不是。

```
Can't locate test.pm in @INC (@INC contains: C:/Perl/lib C:/Perl/site/lib .) at 
```

您应该`use lib`在服务器启动期间调用。请参阅[http://perl.apache.org/docs/2.0/user/handlers/server.html#Startup_File](http://perl.apache.org/docs/2.0/user/handlers/server.html#Startup_File)。

另外，请尝试删除尾部斜杠，例如`use lib 'C:\testpm'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:04:53.593

**如果您可以在安装文件中添加，则使用 lib**很好，否则您必须在每个 perl 脚本文件中添加它。您可以使用**PERL5LIB**环境变量而不是这样做。

**perl 中的@INC**不获取**PATH**环境变量的值，而是可以从**PERL5LIB**环境变量中获取。

您可以`SetEnv PERL5LIB path_to_modules_directory`在 apache 配置中添加指令。执行 perl 脚本时，您的 perl 脚本会将此路径添加到原始**@INC**值的前面。

# php - 按日期范围对 SQL 进行排序

> ID：11024835
> 
> 赞同：1
> 
> 时间：2012-06-13T23:33:43.093
> 
> 标签：php, mysql, sql

我有一个小型的自制画廊，我仍在努力： [http ://springbreak.enteratenorte.com](http://springbreak.enteratenorte.com)

SQL结构如下：

```
CREATE TABLE IF NOT EXISTS 'en_albums' (
    'id' int(11) NOT NULL auto_increment,
    'name' text,
    'folder' text,
    'description' text,
    'hits' int(11) default NULL,
    'datecreated' date default NULL,
    PRIMARY KEY  ('id')
 ) ENGINE=MyISAM AUTO_INCREMENT=372 DEFAULT CHARSET=latin1 AUTO_INCREMENT=372 ; 
```

我有大约 300 张专辑，所以我想对最受欢迎的专辑进行排序，这很简单：

```
SELECT * FROM en_albums ORDER BY hits DESC 
```

但我想知道如何做同样的事情，但只对不超过 6 个月、1 个月或 1 年的专辑进行排序，这是我专辑中的行示例：

```
INSERT INTO 'en_albums' 
  ('id', 'name', 'folder', 
   'description', 'hits', 'datecreated') 
VALUES 
 (1, 'Friends Picture', 'en-fotosdeamigos', 
  'Pictures sent by our visitors', 1514, '2005-07-19'); 
```

谢谢您的帮助！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:43:39.560

假设您只想在可以使用的时间段内创建相册

```
SELECT * FROM en_albums WHERE datecreated > DATE_SUB(NOW(),INTERVAL 6 MONTH) ORDER BY hits DESC 
```

这只会返回创建日期大于 6 个月前的项目。您可以将`6`and`MONTH`部分更改为您想要的。您可以替换`MONTH`为以下任何内容：

*   微秒
*   第二
*   分钟
*   小时
*   天
*   星期
*   月
*   四分之一
*   年

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:50:46.807

你的问题似乎有两个答案。@Tim 接受了一个答案*（排除超过您指定限制的专辑）*。这提供了另一种选择......

*   首先，列出所有不到 6 个月
    *的专辑（对于那些专辑，首先列出点击次数最多的专辑）*

*   在这些专辑之后，将所有超过 6 个月的专辑加入
    *列表（对于这些专辑，首先列出最近的专辑）*

这只是...

```
SELECT
  *
FROM
  en_albums
ORDER BY
  CASE WHEN datecreated > DATE_SUB(NOW(), INTERVAL 6 MONTH) THEN 0    ELSE 1 END ASC,
  CASE WHEN datecreated > DATE_SUB(NOW(), INTERVAL 6 MONTH) THEN hits ELSE 0 END DESC,
  datecreated DESC 
```

任何不到 6 个月的专辑都将按...排序

*   `0, hits, datecreated`

任何超过 6 个月的专辑都将按...排序

*   `1, 0, datecreated`

# objective-c - 使用 RestKit 将布尔属性从 JSON 映射到 NSManagedObject

> ID：11024836
> 
> 赞同：3
> 
> 时间：2012-06-13T23:33:50.440
> 
> 标签：objective-c, ios, json, core-data, restkit

我正面临着一些神秘的事情。我在 NSManagedObject 子类“ReinspectionTask”上有一个布尔属性。属性为“isOpen”，表示任务是否还需要完成。在 Core Data 中，属性类型设置为布尔值。该属性被声明为 NSNumber。我从服务器中提取 JSON，它看起来像这样：

```
 [
    {
        "jobID":"73",
        "address":"500 17th Ave. ",
        "city":"Santa Cruz",
        "state":"California",
        "inspections":[
        {
            "inspectionID":"186",
            "inspectionType":"Foundation",
            "mediaKey":"777",
            "hasTasks":true,
            "requestSubmitted":false,
            "reinspectionTasks":[
            {
                 "taskID":"75",
                 "title":"Foundation re-inspection item",
                 "requestText":"Need a photo of <something>",
                 "isOpen":false
            },
            "wasApproved":false,
            "isScheduled":false,
            "hasAvailableTimes":false,
            "availableTimes":[]

       ]
      }
     ]
    }
   ] 
```

然后我使用带有以下代码的 RestKit 将 JSON 映射到我的托管对象模型：

```
 RKManagedObjectMapping *jobMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Job"];
        RKManagedObjectMapping *inspectionMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Inspection"];
        RKManagedObjectMapping *reinspectionTaskMapping = [RKManagedObjectMapping mappingForEntityWithName:@"ReinspectionTask"];

        jobMapping.primaryKeyAttribute = @"jobID";
        [jobMapping mapKeyPath:@"address" toAttribute:@"address"];
        [jobMapping mapKeyPath:@"city" toAttribute:@"city"];
        [jobMapping mapKeyPath:@"state" toAttribute:@"state"];
        [jobMapping mapKeyPath:@"jobID" toAttribute:@"jobID"];
        [jobMapping mapRelationship:@"inspections" withMapping:inspectionMapping];
        [[RKParserRegistry sharedRegistry] setParserClass:[[RKParserRegistry sharedRegistry] 

                                                           parserClassForMIMEType:RKMIMETypeJSON] 
                                              forMIMEType:@"text/html"];

        inspectionMapping.primaryKeyAttribute = @"inspectionID";
        [inspectionMapping mapKeyPathsToAttributes:
         @"inspectionID", @"inspectionID",
         @"inspectionTime", @"inspectionTime", 
         @"inspectionType", @"inspectionType", 
         @"inspector", @"inspector", 
         @"isScheduled", @"isScheduled", 
         @"mediaKey", @"mediaKey", 
         @"requestSubmitted", @"requestSubmitted", 
         @"hasAvailableTimes", @"hasAvailableTimes", 
         @"availableTimes", @"availableTimes", 
         @"hasTasks", @"hasTasks",
         @"wasApproved", @"wasApproved", nil];
        [inspectionMapping mapRelationship:@"reinspectionTasks" withMapping:reinspectionTaskMapping];
        [inspectionMapping mapRelationship:@"job" withMapping:jobMapping];

        reinspectionTaskMapping.primaryKeyAttribute = @"taskID";
        [reinspectionTaskMapping mapKeyPath:@"taskID" toAttribute:@"taskID"];
        [reinspectionTaskMapping mapKeyPath:@"title" toAttribute:@"title"];
        [reinspectionTaskMapping mapKeyPath:@"requestText" toAttribute:@"requestText"];
        [reinspectionTaskMapping mapKeyPath:@"isOpen" toAttribute:@"isOpen"];
        [reinspectionTaskMapping mapRelationship:@"inspection" withMapping:inspectionMapping];

    [objectManager.mappingProvider setMapping:jobMapping forKeyPath:@"job"];
    [objectManager.mappingProvider setMapping:inspectionMapping forKeyPath:@"inspection"];
    [objectManager.mappingProvider setMapping:reinspectionTaskMapping forKeyPath:@"reinspectionTasks"]; 
```

在大多数情况下，这一切都很好。但是，我对 ReinspectionTask 上的 isOpen BOOL 属性有疑问。当我将值记录到控制台时，它返回 null。奇怪的是，据我所知，我已经像 hasTasks、isScheduled 等一样设置了该属性。这些 BOOL 属性工作正常。

我应该提到，Inspection 与 ReinspectionTasks 的关系是一对多的关系。这种关系是否需要我在 RestKit 中设置对象映射时采取其他步骤？

或者它可能与 ReinspectionTask 对象嵌套在 JSON 结构中的事实有关？

任何想法或建议都非常受欢迎。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:55:51.933

好吧，只有两个问题很容易回答。

> 这种关系是否需要我在 RestKit 中设置对象映射时采取其他步骤？

不，你似乎做得对。

> 或者它可能与 ReinspectionTask 对象嵌套在 JSON 结构中的事实有关？

不，这不是问题。正如我在上面的评论中提到的，我怀疑你做错了什么。BOOL 属性永远不应在控制台中显示为 null。我会检查目标对象上的所有属性，并检查它们在数据模型和实体类中的类型是否正确（如果有的话）。我还会在您的数据模型中检查此属性的默认值

# mysql - 在 MySQL 字段中存储 % 和 \ 之类的字符？

> ID：11024839
> 
> 赞同：-1
> 
> 时间：2012-06-13T23:34:10.003
> 
> 标签：mysql, hash, salt

我有一个生成 11 个字符的盐的功能。这种盐可以包括像 % 这样的字符，我知道它是 SQL 中的通配符和用于转义的 \。一些用户抱怨无法登录。他们的密码盐中的这些字符可能是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:44:13.723

毫无疑问是的。如果没有正确完成，特别是反斜杠。如果您只是在 mysql 中进行这种加盐/散列处理，那是一个坏主意，我建议您在存储之前以服务器端语言执行它，如果您已经这样做了，您总是可以在存储之前对您的散列结果进行 sha1 或 md5 处理。

# node.js - EJS：<%= 与 <%-

> ID：11024840
> 
> 赞同：24
> 
> 时间：2012-06-13T23:34:18.833
> 
> 标签：node.js, ejs

我正在使用 EJS 和我正在构建的 Node.js Web 服务器。我看到许多 EJS 示例有时`<%=`在输出 HTML 或字符串时使用，而其他示例（有时在同一模板中）使用`<%-`.

我试图参考[EJS](https://ejs.co/#docs)文档和[入门指南](https://ejs.co/#install)，但两者都没有提供有关`<%-`符号的信息。此外，我的谷歌搜索尝试没有产生任何有用的信息。谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-14T00:45:41.450

您可能在 Node 中使用的 EJS 版本与您在 Google 代码中看到的版本不同；在 Node 版本中，`<%=`转义进入缓冲区的 HTML，而`<%-`没有。^([资源](https://github.com/visionmedia/ejs#features))

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-08-01T17:39:26.690

来自[http://ejs.co/](http://ejs.co/)：

```
<% 'Scriptlet' tag, for control-flow, no output
<%= Outputs the value into the template (HTML escaped)
<%- Outputs the unescaped value into the template 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-04T09:25:54.970

`<%= *param* %>`用于将数据从视图传输到控制器，反之亦然

while`<%- %>`是包含其他代码

因为我的项目是

[![在此处输入图像描述](../Images/7de64fac96fcb836c2f2b1bd9b8a2c74.png)](https://i.stack.imgur.com/YpiWx.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-01T22:17:52.947

如果将`<%=`呈现一些包含包含 HTML 代码的字符串的变量，它不会呈现该 HTML 代码，而是将其呈现为文本以避免跨站点脚本攻击。
使用减号 ( `<%-`) 可以避免这种情况，并真正呈现 HTML 代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-07T12:58:53.110

1）选项一：ejs 文件正在导入一个名为“noob”的变量，该变量包含例如 req.body 值。 `<p><%= noob %></p>`

2）选项二：一个ejs文件导入一个名为“myPartial.ejs”的部分模板，它位于“partials”文件夹中。 `<p><%- include("./partials/myPartial") %></p>`

3）选项三：一个ejs文件正在使用javascript代码：

```
<p>
<% while (i < 10) { %>
  myVar += "The number is " + i;
  i++;
<% } %>
</p> 
```

# network-programming - RasDial 不使用 IP？

> ID：11024841
> 
> 赞同：0
> 
> 时间：2012-06-13T23:34:19.453
> 
> 标签：network-programming, c++-cli, ras

我正在使用 RasDial（在托管 C++ 中）拨出 VPN 连接。连接没有通过，我正在查看 Windows 连接列表中的 GUI 界面。当我查看 properties\networking 以查看组件列表（也就是您设置 IP 地址的位置）时，我发现“Internet 协议版本 4”或“Internet 协议版本 6”都没有被选中。RAS 尝试在没有 IP 的情况下进行连接意味着什么？如何让 RAS 使用 IPv4？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:45:59.717

在您为设置电话簿而创建的 RASENTRY 上，设置 dwfNetProtocols=RASNP_Ip。（如果你想要IPv6，只需设置它=RASNP_Ipv6；当然我是在寻求帮助后才弄明白的）

# linux - 通过 Rightscripts 安装 OpenCV 和 FFMPEG 时出错

> ID：11024843
> 
> 赞同：2
> 
> 时间：2012-06-13T23:34:36.177
> 
> 标签：linux, ubuntu, opencv, ffmpeg, rightscale

我正在编写一个 RightScript 来在 linux 服务器上安装 OpenCV-2.3.1。我正在使用 FFMPEG 包：ffmpeg-0.7-rc1

我正在做我在服务器上手动安装它时所做的一切，但是当我尝试使用 rightscripts 启动盒子时遇到一些错误。通过 bash 手动构建时，OpenCV 可以正常安装和工作。

我得到的错误是：

```
In file included from /OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg.cpp:45:
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'void CvCapture_FFMPEG::close()':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:451: warning: 'void av_close_input_file(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1533)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:451: warning: 'void av_close_input_file(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1533)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'bool CvCapture_FFMPEG::reopen()':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:483: warning: 'void av_close_input_file(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1533)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:483: warning: 'void av_close_input_file(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1533)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:486: error: 'av_open_input_file' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:487: warning: 'int av_find_stream_info(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1357)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:487: warning: 'int av_find_stream_info(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1357)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:494: error: 'avcodec_thread_init' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:497: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:497: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'bool CvCapture_FFMPEG::open(const char*)':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:524: error: 'av_open_input_file' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:529: warning: 'int av_find_stream_info(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1357)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:529: warning: 'int av_find_stream_info(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1357)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:541: error: 'avcodec_thread_init' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:550: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:550: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In function 'AVStream* icv_add_video_stream_FFMPEG(AVFormatContext*, CodecID, int, int, int, double, int)':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:999: warning: 'AVStream* av_new_stream(AVFormatContext*, int)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1557)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:999: warning: 'AVStream* av_new_stream(AVFormatContext*, int)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1557)
In file included from /OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg.cpp:45:
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In function 'int icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1121: warning: 'int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4077)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1121: warning: 'int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4077)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'void CvVideoWriter_FFMPEG::close()':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1298: error: 'url_fclose' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'bool CvVideoWriter_FFMPEG::open(const char*, int, double, int, int, bool)':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1411: error: 'av_set_parameters' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1415: error: 'dump_format' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1442: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1442: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1479: error: 'URL_WRONLY' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1479: error: 'url_fopen' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1485: error: 'av_write_header' was not declared in this scope
20:09:04: make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.o] Error 1
20:09:04: make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
20:09:04: make: *** [all] Error 2
20:09:04: cd: 23: can't cd to /root/OpenCV-2.3.1/samples/c
20:09:04: chmod: cannot access `build_all.sh': No such file or directory
20:09:04: /var/cache/rightscale/right_scripts/right_scripts_cookbook/recipes/CVScripts___Install_OpenCV: 25: ./build_all.sh: not found
*ERROR> Chef converge failed
*ERROR> An external command returned an error during the execution of Chef: 
```

我进行了谷歌搜索，我了解到某些 FFMPEG 功能现在已被弃用。我也尝试过安装最新的 FFMPEG 包，但我遇到了同样的错误。另外，我想知道为什么当我通过 bash 在服务器上手动安装它时没有收到这些错误，并且只有当我使用 Rightscripts 安装时才收到这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:45:57.193

使用 FFMPEG 包 ffmpeg-0.8 解决了这个问题。它适用于 OpenCV-2.3.1 最近对 FFMPEG 进行了许多修复，这些修复引起了一些冲突。ffmpeg-0.8 稳定且工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T10:01:28.500

我不需要 ffmpeg，因为我只识别图像，所以使用此选项跳过组合视频模块：

`make -DWITH_FFMPEG=OFF xxxxxx`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T00:15:12.610

如果您的发行版有，您还需要安装*ffmpeg-dev软件包。*如果没有，您可能还需要安装*libavcodec-dev*、*libavformat-dev*和*libswscale-dev*。

如果您安装了它们，但 OpenCV 的构建仍然找不到它们，可能是因为`pkg-config`找不到 ffmpeg 标头。此信息通常位于`/usr/lib/pkgconfig`，这意味着如果您的路径位于不同的路径中，您可能必须手动添加正确的路径。例如，如果 ffmpeg 文件`pkg-config`位于`/usr/local/lib/pkgconfig`，在再次运行 CMake 之前，您应该执行：

```
export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig 
```

# python - 斜线和 python cmd

> ID：11024844
> 
> 赞同：2
> 
> 时间：2012-06-13T23:34:40.330
> 
> 标签：python, cmd

我正在尝试使用 cmd 模块实现 python cmd。我想自动完成文件，所以我实现了一些方法，但是，我看到“complete_put(self, text, line, begidx, endidx):" 中的文本参数删除了所有的 '/' 字符。任何人都知道为什么，我该如何避免这种行为？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:23:01.480

我解决了。只需要修改 set_completer_delims 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:32:25.373

这是我使用的代码，它基于互联网上的几个示例。

```
import os
import cmd
import readline
class Shell(cmd.Cmd, object):
    def __init__(self):
        cmd.Cmd.__init__(self)

    def __complete_path(self, path=None):
        return ['/bin', '/boot', '/etc']

    def do_put(self,args):
        print args

    def complete_put(self, text, line, begidx, endidx):
        print text
        if not text:
            return self.__complete_path()
        return self.__complete_path(text) 
```

# c# - 如何使用 AccountManagement (C#) 获取 OU 列表

> ID：11024847
> 
> 赞同：2
> 
> 时间：2012-06-13T23:34:52.263
> 
> 标签：c#, active-directory

使用 DirectoryEntry 有很多答案，但与 AccountManagement 类无关。

有没有办法可以使用 AccountManagement 获取 OU 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:40:03.973

就个人而言，我认为“DirectoryEntry”可能是要走的路。

但是此链接建议您可以使用 PrincipalContext：

[使用 DirectoryServices.AccountManagement 从 OU 获取组](https://stackoverflow.com/questions/1927261/get-groups-from-ou-using-directoryservices-accountmanagement)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-12T12:03:02.710

老问题，但我仍然必须解决它，所以我将分享我发现的内容：您可以将主体对象扩展到任何 ActiveDirectory 对象（在 docs.microsoft.com 中搜索主体扩展）例如：

```
[DirectoryRdnPrefix("OU")]
[DirectoryObjectClass("organizationalUnit")]
public class OuPrincipal : GroupPrincipal
{ 
    public OuPrincipal(PrincipalContext pc) : base(pc)
    {

    }
    OuPrincipalSearchFilter searchFilter;

    public OuPrincipalSearchFilter AdvancedSearchFilter
    {
        get
        {
            if ( null == searchFilter )
                searchFilter = new OuPrincipalSearchFilter(this);

            return searchFilter;
        }
    }
    public object[] GetAttribute(string attribute)
    {
        return (ExtensionGet(attribute));
    }
    [DirectoryProperty("st")]
    public string State
    {
        get
        {
            if (ExtensionGet("st").Length != 1)
                return null;

            return (string)ExtensionGet("st")[0];
        }            
    } 
```

我只需要一个 Ous 列表，其中包含“State”属性中的某些内容，因此我需要扩展一个 advancedFilterSet

```
public class OuPrincipalSearchFilter : AdvancedFilters
    {
        public OuPrincipalSearchFilter(Principal p) : base(p){}    
        public void testState(string value)
        {
            this.AdvancedFilterSet("st", value, typeof(string), MatchType.Equals);
        }
    } 
```

接着 ：

```
var test = new OuPrincipal(pc);
test.AdvancedSearchFilter.testState("*");
PrincipalSearcher ps = new PrincipalSearcher(test);
var rslts = ps.FindAll();
foreach(OuPrincipal ou in rslts)
{
    Console.WriteLine("OU "+ou.Name+" : "+ou.State+" ("+ou.Description+")");
} 
```

我希望它可以帮助某人（或下次我忘记时我自己......）。我使用[这个 github 存储库](https://github.com/malcomvetter/ActiveDirectoryServices/blob/master/AccountManagement/OuPrincipal.cs)来获得灵感。

# c++ - 构造函数中 Qt 类型的 C++ 默认值

> ID：11024848
> 
> 赞同：0
> 
> 时间：2012-06-13T23:35:04.977
> 
> 标签：c++, qt

我的标题中有以下代码：

```
StripChartConfiguration(
    uint32_t tmpStripChartFrameworkWidgetWidth,
    uint32_t tmpStripChartFrameworkWidgetHeight,
    QString tmpMissionName,
    QList<QString> tmpCommandandToneNameQList,
    QList<QString> mToneNameQList,
    FTSProtocolType tmpMissionProtocol,
    float_t mStripHeightInPixels,
    float_t tmpTimeSliceWidth,
    uint32_t tmpTimeframeInSecondsPerStrip,
    QColor tmpStripChartGLViewportBackgroundColor
        = QColor(Qt::lightGray),
    QColor tmpDefaultStateSliceColor 
        = QColor(Qt::lightGray),
    QColor tmpCommandedStateSliceColor
        = QColor(Qt::darkBlue),
    QColor tmpRequestedStateSliceColor
        = QColor(Qt::darkMagenta),
    QColor tmpRequestedConfirmedStateSliceColor
        = QColor(Qt::darkGreen),
    QColor tmpConfirmedDefaultStateSliceColor
        = QColor(Qt::darkYellow),       
    QColor tmpSuspendedDefaultStateSliceColor
        = QColor(0x82B384), //Stale Green
    QColor tmpCarrierDefaultStateSliceColor
        = QColor(Qt::lightGray),
    QColor tmpCarrierCommandedStateSliceColor
        = QColor(Qt::blue),
    QColor tmpCarrierRequestedStateSliceColor
        = QColor(Qt::magenta),
    QColor tmpCarrierRequestedConfirmedStateSliceColor
        = QColor(Qt::green),
    QColor tmpCarrierConfirmedDefaultStateSliceColor
        = QColor(Qt::yellow),
    QColor tmpCarrierSuspendedDefaultStateSliceColor
        = QColor(0x82B384)); //Stale Green 
```

现在我想实例化这种类型的对象而不必指定颜色。所以从我的驱动程序我做：

```
uint32_t mFWWidth = 800;
uint32_t mFWHeight = 600;
QString mMissionName("This Is A Mission");
QList<QString> mCommandNameList;
for (uint32_t i = 0; i < 10; ++i) {
    mCommandNameList.push_back(QString("Command"));
}
QList<QString> mToneNameList;
for (uint32_t i = 0; i < 6; ++i) {
    mToneNameList.push_back(QString("Tone"));
}
StripChartConfiguration::FTSProtocolType mSCCFTSProtocol =   
    StripChartConfiguration::Irig;
float_t mStripHeightInPixels = 10;
float_t mTimeSliceWidthInPixels = 10;
uint32_t mTimeframeInSecondsPerStrip = 15;
/*
 * End of list of configuration for strip chart
 */
StripChartConfiguration mSCCC(mFWWidth, mFWHeight,        
    mMissionName, mCommandNameList, mToneNameList,
    mSCCFTSProtocol, mStripHeightInPixels, 
    mTimeframeInSecondsPerStrip); 
```

但是 g++ 抱怨我缺少论点。我错过了什么？

mehoggan@mehoggan:~/Dev/StripChart$ make

```
g++ -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_NO_DEBUG -DQT_OPENGL_LIB -DQT_GUI_LIB -DQT_CORE_LIB -I/opt/QtSDK/Desktop/Qt/474/gcc/mkspecs/default -I. -I/opt/QtSDK/Desktop/Qt/474/gcc/include/QtCore -I/opt/QtSDK/Desktop/Qt/474/gcc/include/QtGui -I/opt/QtSDK/Desktop/Qt/474/gcc/include/QtOpenGL -I/opt/QtSDK/Desktop/Qt/474/gcc/include -I/usr/X11R6/include -I. -o main.o main.cpp
main.cpp: In function ‘int main(int, char**)’:
main.cpp:39:36: error: no matching function for call to ‘StripChartConfiguration::StripChartConfiguration(uint32_t&, uint32_t&, QString&, QList<QString>&, QList<QString>&, StripChartConfiguration::FTSProtocolType&, float_t&, uint32_t&)’
main.cpp:39:36: note: candidates are:
stripchartconfiguration.h:84:5: note: StripChartConfiguration::StripChartConfiguration(const StripChartConfiguration&)
stripchartconfiguration.h:84:5: note:   candidate expects 1 argument, 8 provided
stripchartconfiguration.h:47:5: note: StripChartConfiguration::StripChartConfiguration(uint32_t, uint32_t, QString, QList<QString>, QList<QString>, StripChartConfiguration::FTSProtocolType, float_t, float_t, uint32_t, QColor, QColor, QColor, QColor, QColor, QColor, QColor, QColor, QColor, QColor, QColor, QColor, QColor)
stripchartconfiguration.h:47:5: note:   candidate expects 22 arguments, 8 provided
main.cpp:31:13: warning: unused variable ‘mTimeSliceWidthInPixels’ [-Wunused-variable]
make: *** [main.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:41:06.443

您正在通过`..., float_t&, uint32_t&)`，并且`..., float_t, float_t, uint32_t`是预期的。您只是缺少一个浮点值。

请注意，您的代码风格看起来很糟糕。您不应该创建具有这么多参数的构造函数和方法。很容易错过其中之一。显然它已经发生了。单独分配每个字段会更加清晰和安全。

# ruby - 递归队列导致“堆栈级别太深”

> ID：11024850
> 
> 赞同：0
> 
> 时间：2012-06-13T23:35:28.720
> 
> 标签：ruby, stack-overflow, eventmachine

我正在尝试使用`em-synchrony` `1.0.1`.

```
require "em-synchrony"
class Worker
  attr_reader :station_queue, :list
  def initialize
    @station_queue = EM::Queue.new
    @list = ["value"] * 100
  end

  def run!
    station_queue.push(*list)
    station_popper = proc do |station|
      # Do some work with #{station}
      station_queue.pop(station_popper)
    end

    station_queue.pop(station_popper)
  end
end

EM::synchrony { Worker.new.run! } 
```

问题是我遇到了`ruby-1.9.2-p290/gems/em-synchrony-1.0.1/lib/em-synchrony.rb:26: stack level too deep (SystemStackError)`错误。有没有办法从这样的列表中弹出每个项目而不会出现 stackoverflow 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:11:02.557

问题是光纤只能处理 4kb 堆栈。处理包含 100 个项目的列表将导致其*堆栈溢出*。

看起来他们正在为光纤实现一个可调整大小的堆栈。 [http://bugs.ruby-lang.org/issues/3187](http://bugs.ruby-lang.org/issues/3187)

# html - IE 忽略 jQuery 验证

> ID：11024857
> 
> 赞同：0
> 
> 时间：2012-06-13T23:35:58.643
> 
> 标签：html, css, jquery

## 这是一个例子：http: [//jsfiddle.net/7g8GD/1/](http://jsfiddle.net/7g8GD/1/)

一旦您输入了无效的输入并按回车键，它就会返回“请输入您的电子邮件地址”，但是如果您再次按回车键而不更改输入，则验证将被忽略，并且表单会继续，就好像输入有效一样。

这里有什么问题？

（当我在我的服务器上使用它时，问题只出现在 IE9 中而不出现在 Chrome 中，但在 jsFiddle 中两者都发生）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:42:15.213

您的代码有很多不一致之处和需要关注的领域，这使您的问题更难以解决；冗余选择器 ( `.class #id`)、缺少语义元素 ( `<input type="submit" />`)、不必要的变量和条件语句 (`if (...) { } else { if (...) {} }`等。

我建议将您的问题简化为非常基本的要求 - 验证电子邮件并防止提交表单。

我用适当的表单控件以更简单的方式包含了您的逻辑，并且它可以按您的预期工作。

[http://jsfiddle.net/NkwnV/1/](http://jsfiddle.net/NkwnV/1/)

这不是一个直接的解决方案，但希望它至少显示了您应该努力的目标并最终帮助解决您的问题。

# javascript - 如何将 Javascript 片段 ajax 加载到 DOM 中

> ID：11024858
> 
> 赞同：0
> 
> 时间：2012-06-13T23:36:09.707
> 
> 标签：javascript, jquery, json, dom, backbone.js

我正在为我的一个视图使用主干并延迟加载模板和数据。对于“简单性”（就不必进行多个异步服务器调用而言），我试图从同一个文件*person.php*加载两者，它返回如下内容：

```
<script type='text/template' id='persons-template'>
    <div><%= name %></div>
</script>

<script type='text/javascript'>
    var persons: [
        { name: "some dude" },
        { name: "some other dude" }
    ];
</script> 
```

视图本身正在使用 Ajax 调用加载此文件，并尝试解析，如下所示：

```
var self = this;
$.get("persons.php").function(data) {
    self.template = _.template($(data).html());

    self.model = new PersonsCollection;

    // problem here: persons is undefined
    self.model.reset(persons);
    self.render();
}); 
```

因此，*persons*是未定义的。我知道为什么：脚本块没有添加到 DOM 中。我可以使用 $(data)[1] 来获取*HtmlScriptElement*；使用 $($(data)[1]).text() 给我 Javascript 作为这样的字符串：

> “变种人：[{名称：“一些家伙”}，{名称：“其他一些家伙”}];”

如何访问*people*对象以便将其传递给我的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T23:40:17.613

[获取任何没有 type](http://api.jquery.com/attribute-not-equal-selector/)或[type`'text/javascript'`](http://api.jquery.com/attribute-equals-selector/)的返回脚本，并在模板之前[将其填充到 DOM中。](http://api.jquery.com/appendTo/)

```
$.get("persons.php").function(data) {
    $(data)
        .find('script[type="text/javascript"], script[type!=""]')
        .appendTo('head');

  // proceed as before
}); 
```

# css - 清除子浮动而不清除“外部”浮动

> ID：11024867
> 
> 赞同：2
> 
> 时间：2012-06-13T23:37:05.133
> 
> 标签：css, clearfix

清除一组浮点数最流行的方法是`clear:both;`在父元素的`:after`伪元素上使用。例如这个：

```
.group:after {
    visibility: hidden;
    display: block;
    content: "";
    clear: both;
    height: 0;
    }
* html .group             { zoom: 1; } /* IE6 */
*:first-child+html .group { zoom: 1; } /* IE7 */ 
```

这在大多数情况下都可以正常工作，但是当您在浮动元素中有浮动元素时它会失败。它清除*所有*浮动，而不仅仅是子浮动。

一种可能的解决方法是添加

```
.group {
    display:inline-block;
} 
```

但这可能会产生不必要的副作用。

**有没有办法只清除子浮动，而不是页面上的每个浮动？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:04:08.013

我首选的清除浮动的方法实际上是将包含元素的`overflow`属性设置为`auto`：

```
.group {
    overflow: auto;
} 
```

`overflow: hidden`也会起作用。

这将强制`.group`清除任何浮动的孩子，但不会清除页面上的任何其他浮动。我*认为*这可能是您想要实现的目标？

有时这种方法不会强制旧版本的 IE 清除浮动（抱歉，我记不起具体的 IE 版本），在这种情况下你需要强制`haslayout`IE。设置一个明确的宽度就`.group`可以了。但在大多数情况下，我发现这种方法“有效”。

这是一个演示：http: [//jsfiddle.net/C7KWn/](http://jsfiddle.net/C7KWn/)

# .htaccess - 使用 Backbone.js 和/或 htaccess 重定向子目录

> ID：11024872
> 
> 赞同：0
> 
> 时间：2012-06-13T23:37:46.827
> 
> 标签：.htaccess, backbone.js, path, rewrite, router

经过数小时的研究和修修补补，我终于设法让backbone.js 路由正常工作，但有一个例外：如果我输入“/workingdir/routepath” - 一切都很好并且它使用“routpath”路由，但是如果我输入“/workingdir/routepath/”或“/workingdir/routepath/asdf”或任何类似的东西，我的网站中断，我收到看起来有点像这样的错误：

```
Resource interpreted as Stylesheet but transferred with MIME type text/html:  "http://example.com/staging/personal/css/style.css". fj:5
Resource interpreted as Script but transferred with MIME type text/html: "http://example.com/staging/personal/scripts/jquery-1.7.2.min.js". fj:6
Uncaught SyntaxError: Unexpected token < jquery-1.7.2.min.js:1
Resource interpreted as Script but transferred with MIME type text/html: "http://example.com/staging/personal/scripts/nav.js". fj:6
Resource interpreted as Script but transferred with MIME type text/html: "http://example.com/staging/personal/scripts/underscore-min.js". fj:6
Uncaught SyntaxError: Unexpected token < underscore-min.js:1
Resource interpreted as Script but transferred with MIME type text/html: "http://example.com/staging/personal/scripts/backbone-min.js". fj:6
Uncaught SyntaxError: Unexpected token < backbone-min.js:1
Uncaught SyntaxError: Unexpected token < 
```

而且页面没有任何样式。我认为问题来自 URL 中的斜杠，使 css 和 js 文件的路径指向错误的位置（它们应该在“staging/css/”和“staging/scripts/”中，但正如日志所示，它正在寻找“staging/personal/xxx”）。

有想法该怎么解决这个吗？感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:35:06.170

根据请求 URI 是否有斜杠，相对路径引用的解析方式会有所不同。我想这就是导致你的问题的原因。考虑这些链接：

```
<!-- Relative path references -->

<link href="staging/css/style1.css">

<link href="./staging/css/style2.css">

<!-- Absolute path reference -->

<link href="/workingdir/staging/css/style3.css"> 
```

这是根据请求 URI 解析这些路径的方式：

```
REQUEST_URI = /workingdir/routepath

/workingdir/staging/css/style1.css

/workingdir/staging/css/style2.css

/workingdir/staging/css/style3.css

REQUEST_URI = /workingdir/routepath/

/workingdir/routepath/staging/css/style1.css

/workingdir/routepath/staging/css/style2.css

/workingdir/staging/css/style3.css 
```

因此，如果您希望能够使用尾部斜杠或其他段发出请求，您将需要使用绝对路径引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T01:42:36.073

只是为了与其他遇到此问题的人分享。我有同样的问题，但现在有不同的解决方案。这些对 .htaccess 的添加最初并没有奏效：

```
AddType application/x-javascript .js
AddType text/css .css 
AddType text/javascript .js
AddType text/css .css
AddType font/ttf .ttf
AddType font/eot .eot
AddType font/otf .otf
AddType application/woff .woff
AddType font/woff .woff
AddType font/opentype .woff
AddType application/x-font-woff .woff
AddType application/vnd.ms-fontobject .eot
AddDefaultCharset UTF-8
Options -Indexes 
```

最后，我意识到虽然我下面的路径在本地主机上工作，但区分大小写的服务器不接受该路径

```
\js\prettyPhoto\js\jquery.prettyPhoto.js 
```

代替

```
\js\prettyphoto\js\jquery.prettyPhoto.js 
```

大写字母 p 犯了所有这些错误！对于您的情况，可能也是如此，因为您有“Uncaught SyntaxError: Unexpected token < ”和“资源解释为样式表但使用 MIME 类型 text/html 传输：”

让我知道是否有帮助:)

# wpf - 如何在 Visual Studio Express 2010 中创建安装程序 (msi)？

> ID：11024874
> 
> 赞同：5
> 
> 时间：2012-06-13T23:37:55.687
> 
> 标签：wpf, installation, visual-studio-express, advanced-installer

我刚刚在 Visual Studio Express C# 中创建了一个 wpf 应用程序，需要创建一个安装程序文件。这仅在几台机器上进行，因为它对我来说是一个个人程序。我已经使用简单的方法研究了[Advanced Installer](http://www.advancedinstaller.com/download.html)，但无法弄清楚如何做到这一点，或者它是否甚至可以创建 wpf 安装程序。我也尝试过 WIX，结果相同。

这样做有什么技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:25:24.420

在我开始使用 WiX 之前，我使用过[NSIS](http://nsis.sourceforge.net/Main_Page "国家安全情报局")和[HM NIS Edit](http://hmne.sourceforge.net/ "HM NIS 编辑器")，它有一个创建简单安装程序的向导。

也许它可以帮助您实现您的目的。

# assembly - 以独立于操作系统的汇编语言打开文件

> ID：11024875
> 
> 赞同：1
> 
> 时间：2012-06-13T23:38:16.427
> 
> 标签：assembly, file-io, operating-system, x86, osdev

我一直在试图弄清楚如何在汇编中从硬盘驱动器中打开文件。我想在不使用 DOS 中断或任何需要操作系统的情况下执行此操作，因为我正在尝试构建一个简单的操作系统。当然，我对 BIOS 中断很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:43:03.880

操作系统提供了两组您必须模拟才能访问文件的功能：

*   一个设备驱动程序，可以读取和写入原始数据（在你的情况下，到/从磁盘）
*   理解文件结构和抽象如何读取部分的设施库；这会调用驱动程序来执行实际的 I/O。

您也许可以调用 BIOS 调用来模拟坏的设备驱动程序；通常真正的驱动程序很复杂，以确保效率和良好的错误恢复，而 BIOS 例程根本不这样做。

但是你会发现自己很难做的是模拟“文件访问”库。现代文件系统以相当复杂的方式将文件存储在磁盘上，以最大限度地减少访问时间，同时允许文件分布在大部分磁盘上。

如果您坚持这样做，您最好阅读您打算访问的任何文件系统（Linux？Windows？）的文件系统结构。准备好发现这些文档相对于真实操作系统是不完整的和过时的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:56:16.287

[以下是](http://alexfru.narod.ru/os/fat/fat.html)仅使用 BIOS 访问 FAT12/16/32 的方法。`_boot\BOOT12.ASM`并且`_boot\BOOT16.ASM`分别是 FAT12 和 FAT16 引导扇区，可以从引导磁盘的根目录加载和运行名为 .COM 或 .EXE 的标准程序`STARTUP.BIN`。这些引导扇区是为 NASM 编写的。在`stdio\FAT.c`.

# ruby-on-rails - 使用 Mongoid 部署到 Heroku 时出错

> ID：11024876
> 
> 赞同：0
> 
> 时间：2012-06-13T23:38:17.997
> 
> 标签：ruby-on-rails, heroku, mongoid

当我将我的应用程序移动到 Heroku 时，我在视图上遇到错误，我没有进入开发或本地生产模式。我从 railsapp.github.com 的 Devise Mongoid 应用程序开始，并添加了引导程序。

当我部署到 Heroku 时，我在 Devise 导航部分收到以下错误，

```
ActionView::Template::Error (can't convert Array into String): 
```

我正在使用 Mongoid 3.0.0.rc

我认为它与 Mongoid 有关，因为我能够让它最初与 2.4.10 一起工作，但现在我在该版本中遇到了其他错误。另外，如果我注释掉部分错误的行，它会加载根目录，但如果我四处导航，最终会崩溃。

我的想法不多了！

如果有帮助，我可以发布日志或配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:35:00.060

它是已知的并且正在研究中。 [https://github.com/mongoid/moped/issues/21](https://github.com/mongoid/moped/issues/21)

建议降级回您的用途。3.0.0.rc 也给了我一些heroku问题

# javascript - 如何在 Javascript 中将鼠标悬停时的 CSS 类设置为一组标签？

> ID：11024877
> 
> 赞同：0
> 
> 时间：2012-06-13T23:38:18.127
> 
> 标签：javascript, css, dom-events

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:54:32.333

1.  links.Length 恕我直言，应该是长度（小写字母）
2.  this.setAttribute("class","a_hover"); （使用这个，缺少'"'）

    ```
    window.onload = function() {
    links = document.getElementsByTagName("a"); //Getting ALL of the <a> tags
    for(var i = 0; i < links.length; i++) { // 'looping' through the array 'links'
        links[i].addEventListener("mouseover", function() { this.className = "a_hover"; }, false);
    } }​ 
    ```

CSS：

```
​.a_hover{color:red}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:45:47.487

`this.className = "a_hover";`在事件处理程序内部使用。

`this`将引用处理程序绑定到的元素。using`className`比 using 更简洁`setAttribute`。

[您可以在 quirksmode.org 上](http://www.quirksmode.org/js/introevents.html)找到关于 JavaScript 事件处理的全面描述。

您的代码不起作用的三个原因：

*   `links.Length`应该是`links.length`（错字？）

*   您有语法错误（`"`在 之后缺少关闭`"class`）（错字？）

*   您正在[循环中创建一个闭包（事件处理程序）](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)。在执行处理程序的那一刻（当鼠标悬停在链接上时），`link[i]`已解决。`i`指的是循环变量，由于此时循环已经完成，因此它不会具有绑定处理程序时的值。

* * *

也就是说，我同意Bergi 的评论。您可以使用 CSS 选择器`:hover`将样式应用于悬停元素。在这种情况下，您也不必编写处理程序来再次删除该类。

* * *

动画也可以实现，但如果你自己做会变得相当复杂。已经有提供[此功能](http://jqueryui.com/demos/animate/)的库。

# jquery - jQuery，使最后一个 else 语句中的 .click() 运行第一个 if 语句？

> ID：11024878
> 
> 赞同：1
> 
> 时间：2012-06-13T23:38:19.063
> 
> 标签：jquery

是否有可能使`$sliderPane.click();`位于最后一条`else`语句中的哪个运行第一`if`条语句？

任何聪明的想法都会非常感谢。

```
$tabTwitter.on('click', function () {

    if ( twitterOpen == true ) {

        twitterOpen = false;
        $panelTwitter.fadeOut(500); 

        $sliderPane.animate({
            "left" : 0
        }, 500, function() {
            $sliderPane.removeAttr('style');                     
        });

    } else if ( facebookOpen == true ) {

        facebookOpen = false;
        $panelFacebook.fadeOut(500); 

        twitterOpen = true;
        $panelTwitter.fadeIn(500);

    } else {

        twitterOpen = true;
        $panelTwitter.fadeIn(500);

        $sliderPane.css({
            "left":0,"cursor":"pointer"
        }).animate({
            "left" : "-490px"
        }, 500, function() {
            $('body,html').animate({
                scrollTop: headerHeight - 69
            }, 800);
            return false;
        }).click();                 

    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:49:16.237

```
var clickHandler = function () {

    if ( twitterOpen == true ) {

        twitterOpen = false;
        $panelTwitter.fadeOut(500); 

        $sliderPane.animate({
            "left" : 0
        }, 500, function() {
            $sliderPane.removeAttr('style');                     
        });

    } else if ( facebookOpen == true ) {

        facebookOpen = false;
        $panelFacebook.fadeOut(500); 

        twitterOpen = true;
        $panelTwitter.fadeIn(500);

    } else {

        twitterOpen = true;
        $panelTwitter.fadeIn(500);

        $sliderPane.css({
            "left":0,"cursor":"pointer"
        }).animate({
            "left" : "-490px"
        }, 500, function() {
            $('body,html').animate({
                scrollTop: headerHeight - 69
            }, 800);
            return false;
        }).click(clickHandler);                 

    }

};

$tabTwitter.on('click', clickHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:46:56.813

分成命名函数。先调用 if 函数。完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T23:43:50.140

您总是可以尝试使用[触发器](http://api.jquery.com/trigger/)，因为“if”是代码块中的第一个语句。

# java - 在 JAVA 中加载 Internet Explorer 密钥库的问题

> ID：11024880
> 
> 赞同：0
> 
> 时间：2012-06-13T23:38:26.990
> 
> 标签：java, security, internet-explorer, x509certificate, pki

我正在构建一个加密 Web 应用程序，它允许用户在浏览器中的客户端进行签名和加密。该应用程序必须与 IE 和 Firefox 兼容。它在 IE 中的 Firefox 中运行良好我面临一个问题。

最近，印度政府开始向个人颁发两份数字证书，一份用于签署数据，一份用于加密。这些证书具有相同的 CN。我正在使用以下代码循环遍历证书。

```
public static Certificate selectedCert = null;
KeyStore keystore1 ;
keystore1 = KeyStore.getInstance("Windows-MY");
keystore1.load(null, null);
if (keystore1 != null) {
    enumeration = keystore1.aliases();
    while (enumeration.hasMoreElements()) {
    alias = enumeration.nextElement();
    selectedCert = keystore1.getCertificate(alias));
            System.out.println(selectedCert.getPublicKey());    
    }
} 
```

从 firefox 密钥库读取证书时，别名由 firefox 生成，它们是唯一的，但在 IE 中，它从 IE 获取证书，它以通用名称 (CN) 作为别名。这样，它会获得两个具有相同别名的此类条目。现在，每当我想获得整个证书对象时，我都必须传递别名，所以每当我传递别名时，它总是会给我第一个证书，而我无法访问具有相同别名的第二个证书。

澄清一下，如果我有两个以“Kuntal Shah”名义的证书和一个以“Abhishek Desai”名义的证书。然后当我这样做时，别名枚举将具有“Kuntal Shah”“Kuntal Shah”“Abhishek Desai”

```
selectedCert = keystore1.getCertificate(alias)); 
```

它总是返回我第一个，而我永远无法得到第二个。

我在 C# 中尝试了一些代码，我有一个更简单的解决方案

```
X509Store storeMy = new X509Store(StoreName.My,StoreLocation.CurrentUser);
storeMy.Open(OpenFlags.ReadOnly);
Console.WriteLine("Found certs with the following subject " +"names in the {0} store:", storeMy.Name);
foreach (X509Certificate2 cert in storeMy.Certificates)
{
    Console.WriteLine("\t{0}", cert.SubjectName.Name);
} 
```

但这不适用于 firefox，也不适用于 Linux。

谁能告诉我如何访问第二个证书？或者还有其他不同的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:12:04.553

我不喜欢这个解决方案，但也许你可以调用 deleteEntry。加载您想要的别名并检查证书是否是您想要的。如果没有，请删除它。然后尝试再次加载它。也许您可以一直阅读它们。只要确保不要调用 KeyStore.store。您不想删除 IE 中的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:59:25.510

这个解决方案比我的另一个更难看，但它可能真的有效。您可以使用反射来直接访问所有密钥和证书条目的集合。

```
public void printKeystore() {
    Field spiField = KeyStore.class.getDeclaredField("keyStoreSpi");
    spiField.setAccessible(true);
    KeyStoreSpi spi = (KeyStoreSpi) spiField.get(keystore1);
    Field entriesField = spi.getClass().getSuperclass().getDeclaredField("entries");
    entriesField.setAccessible(true);
    Collection entries = (Collection) entriesField.get(spi);
    for (Object entry : entries) {
        String alias = (String) invokeGetter(entry, "getAlias");
        Key privateKey = (Key) invokeGetter(entry, "getPrivateKey");
        X509Certificate[] certificateChain = (X509Certificate[]) invokeGetter(entry, "getCertificateChain");
        System.out.println(alias + ": " + privateKey + Arrays.toString(certificateChain));
    }
}

private Object invokeGetter(Object instance, String methodName)
        throws NoSuchMethodException, IllegalAccessException,
        InvocationTargetException {
    Method getAlias = instance.getClass().getDeclaredMethod(methodName);
    getAlias.setAccessible(true);
    return getAlias.invoke(instance);
} 
```

# database - 数据库合并到单个服务器

> ID：11024884
> 
> 赞同：-1
> 
> 时间：2012-06-13T23:39:00.857
> 
> 标签：database, merge

问题是我有一个使用 MS SQL 的备份服务器，上面有 2 年的数据，我还有一个生产服务器数据库，我想将两者合并到一个服务器上，但由于大多数表是相同的，所以有冲突。我一直正在研究数据集成以及SQL Server商业智能，但真的无法掌握它。我也在努力权衡利弊。

我知道在一个数据库上拥有这么多数据将需要很长时间来运行报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:44:00.353

数据迁移步骤：

1.  决定你是否真的想这样做，出于规模、难度、成本/收益、政治等原因。
2.  弄清楚系统的新设计将是什么。
3.  将旧数据从任意来源导入新服务器的设计系统
4.  设计并确保所有使用旧系统的东西都可以使用新系统
5.  非常非常确定你已经准备好了。
6.  实际实施阶段 3 和 4 中的设计，完成迁移。

您说“表具有相同的名称”。这要么意味着您需要让步骤 3 合并来自两个源的数据，要么意味着您需要在步骤 2 中使未来的表具有不同的名称（这对于步骤 4 很重要）。

# asp.net-mvc - Web api 未从 EF 4.1 DbContext 返回新添加的记录

> ID：11024885
> 
> 赞同：1
> 
> 时间：2012-06-13T23:39:07.793
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api

我有一个使用 VS 2011 创建的简单 asp.net MVC4 / EF 4.1 项目，其中一个层用于我的域模型，一个用于包含 DbContext 的数据库。我有一个名为 Batch 的基本域类和一个具有标准 CRUD 功能的 BatchController 使用索引/创建/编辑操作。我使用重写的 Seed 方法添加了两个默认记录。所有这些工作正常我可以使用开箱即用的 MVC 模板添加/编辑/删除记录：

```
public class BatchController : Controller
{
    private readonly MyContext _context = new MyContext();

    public ActionResult Index()
    {
        return View(_context.Batches.ToList());
    }

    [HttpPost]
    public ActionResult Create(Batch batch)
    {
        if (ModelState.IsValid)
        {
            this._context.Batches.Add(batch);
            this._context.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(batch);
    }
} 
```

我向解决方案添加了一个新的 MVC4 Web api 项目，目的是公开域对象，以便可以通过 json 检索数据。这使用了一个我称为 BatchesController 的 api 控制器，并且我添加了对我的域和数据库层的引用。我有两个 Get() 方法，一个返回所有批次，一个返回给定 ID 的单个批次。我正在使用 IIS Express 来托管主 MVC 应用程序和 Web api。要检索我在浏览器中运行的所有批次：

```
http://localhost:46395/api/batches 
```

这是我的 Web api 控制器：

```
public class BatchesController : ApiController
{
    private readonly MyContext _context;

    public BatchesController()
    {
        _context = new MyContext();
    }

    // GET /api/batches
    public IEnumerable<Batch> Get()
    {
        var batches = _context.Batches.ToList();

        if (batches == null)
            throw new HttpResponseException(HttpStatusCode.NotFound);

        return batches;
    }

    // GET /api/batches/5
    public Batch Get(int id)
    {
        var batch = _context.Batches.Find(id);

        if (batch == null)
            throw new HttpResponseException(HttpStatusCode.NotFound);

        return batch;
    }
} 
```

我的问题是，当我添加一条新记录并尝试通过浏览器检索它时，只返回使用 Seed 方法添加的现有记录 - 我无法返回任何新添加的记录。DbContext 似乎正在缓存初始记录，而不是去数据库获取最新的......我如何返回新添加的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:18:06.130

有一个答案，它不能解决我的问题： http: [//www.strathweb.com/2012/03/serializing-entity-framework-objects-to-json-in-asp-net-web-api/](http://www.strathweb.com/2012/03/serializing-entity-framework-objects-to-json-in-asp-net-web-api/)

另外，这里有一个同样的问题：http: //forums.asp.net/t/1814377.aspx/1?Web+api+not+returning+records+from+EF+4+1 [+DbContext](http://forums.asp.net/t/1814377.aspx/1?Web+api+not+returning+records+from+EF+4+1+DbContext)

我发现这很有用： [ASP.Net Web API 在 VS 中正确显示但给出 HTTP500](https://stackoverflow.com/questions/10897523/asp-net-web-api-showing-correctly-in-vs-but-giving-http500)

但重点是：您不能将代理对象发送到 webapi 序列化程序。所以它应该是一个新的动态类或一个没有虚拟的预定义类（或者可能是 IList，ICollection，...）。

```
// GET api/ProfileGame
public dynamic GetProfileGames()
{
    return db.ProfileGames.Select(pg => new
    {
        ...
    }).AsEnumerable();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:41:47.613

只是为了澄清这一点，您肯定已经重新连接到 Web API 项目以指向同一个数据库，对吧？因为默认情况下 Web API 会附加它自己的 SQL Compact DB。这意味着您可以有效地使用 2 个独立的数据库

# mongodb - 有没有一种简单的方法可以从流星部署的应用程序中导出数据？

> ID：11024888
> 
> 赞同：71
> 
> 时间：2012-06-13T23:39:33.230
> 
> 标签：mongodb, meteor

有没有一种简单的方法可以从流星部署的应用程序中导出数据？

因此，例如，如果我部署了一个名为 test.meteor.com 的应用程序......

我怎样才能轻松下载该应用程序收集的数据 - 以便我可以使用来自已部署应用程序的数据在本地运行它？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-09-16T14:31:19.430

要获取您在meteor.com 上部署的站点的 URL，请使用以下命令（如果您使用密码保护它，您可能需要提供您的站点密码）：

```
meteor mongo --url YOURSITE.meteor.com 
```

这将返回类似：

```
mongodb://client:PASSWORD@sky.member1.mongolayer.com:27017/YOURSITE_meteor_com 
```

您可以将其提供给类似的程序`mongodump`

```
mongodump -u client -h sky.member1.mongolayer.com:27017 -d YOURSITE_meteor_com\
          -p PASSWORD 
```

密码只能使用一分钟。用法：

```
$ meteor --help mongo 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-05-05T03:02:34.487

以下是相反的方法：（将您本地的 monogo db 上传到流星）

[https://gist.github.com/IslamMagdy/5519514](https://gist.github.com/IslamMagdy/5519514)

```
# How to upload local db to meteor:

# -h = host, -d = database name, -o = dump folder name
mongodump -h 127.0.0.1:3002 -d meteor -o meteor

# get meteor db url, username, and password
meteor mongo --url myapp.meteor.com

# -h = host, -d = database name (app domain), -p = password, folder = the path to the dumped db
mongorestore -u client -h c0.meteor.m0.mongolayer.com:27017 -d myapp_meteor_com -p 'password' folder/ 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-23T21:13:30.593

基于 Kasper Souren 的解决方案，我创建了一个更新的脚本，该脚本适用于当前版本的 Meteor，并且在您使用密码保护远程 Meteor 应用程序时也适用。

请创建以下脚本`parse-mongo-url.coffee`：

```
spawn = require('child_process').spawn
mongo = spawn 'meteor', ['mongo', '--url', 'YOURPROJECT.meteor.com'], stdio: [process.stdin, 'pipe', process.stderr]

mongo.stdout.on 'data', (data) ->
    data = data.toString()
    m = data.match /mongodb:\/\/([^:]+):([^@]+)@([^:]+):27017\/([^\/]+)/
    if m?
        process.stdout.write "-u #{m[1]} -p #{m[2]} -h #{m[3]} -d #{m[4]}"
    else
        if data == 'Password: '
            process.stderr.write data 
```

然后在 *nix shell 中像这样执行它：

```
mongodump `coffee parse-mongo-url.coffee` 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-11T20:14:26.027

我创建了一个工具，`mmongo`它包装了所有 Mongo DB 客户端 shell 命令，以便在 Meteor 数据库上使用。如果你使用`npm`（节点包管理器），你可以安装它：

```
npm install -g mmongo 
```

否则，请参阅[自述文件](https://github.com/skagedal/mmongo)。

要备份 Meteor 数据库，您现在可以执行以下操作：

```
mmongo test.meteor.com dump 
```

要将其上传到您的本地开发流星将是：

```
mmongo restore dump/test_meteor_com 
```

如果您不小心删除了生产数据库：

```
mmongo test.meteor.com --eval 'db.dropDatabase()'   # whoops! 
```

您可以轻松地恢复它：

```
mmongo test.meteor.com restore dump/test_meteor_com 
```

如果您希望将集合（例如`tasks`）导出为可读的内容：

```
mmongo test.meteor.com export -c tasks -o tasks.json 
```

然后您可以在文本编辑器中打开`tasks.json`，进行一些更改并插入更改：

```
mmongo test.meteor.com import tasks.json -c tasks --upsert 
```

[GitHub](https://github.com/skagedal/mmongo) _ [_](https://www.npmjs.com/package/mmongo)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-14T00:15:42.883

我想你的数据在一个 mongodb 数据库中，所以如果是这样的话，这个问题比流星更与 mongo 相关。你可以看看[mongoexport 和 mongoimport 命令行工具](http://www.mongodb.org/display/DOCS/Import+Export+Tools)。

编辑（例如）：

`mongoexport -h flame.mongohq.com:12345 -u my_user -p my_pwd -d my_db -c my_coll`

你需要在你的电脑上安装 mongodb 才能拥有这个命令行工具，显然你需要你的 mongodb 信息。在上面的示例中，我连接到 MongoHQ（flame.mongohq.com 是主机，'12345' 是您的 mongo 服务器的端口），但我不知道流星托管实际使用的是哪个 Mongo 主机。如果您在本地尝试过 Meteor 示例（TODO、排行榜等），那么您很可能已经安装了 Mongo，因为它默认使用本地服务器。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-02-11T01:34:43.123

这是 bash 中的另一个解决方案

```
#! /bin/bash
# inspired by http://stackoverflow.com/questions/11353547/bash-string-extraction-manipulation

# http://www.davidpashley.com/articles/writing-robust-shell-scripts/
set -o nounset
set -o errexit
set -o pipefail
set -x

# stackoverflow.com/questions/7216358/date-command-on-os-x-doesnt-have-iso-8601-i-option
function nowString {
    date -u +"%Y-%m-%dT%H:%M:%SZ"
}

NOW=$(nowString)

# prod_url="mongodb://...:...@...:.../..."
prod_pattern="mongodb://([^:]+):([^@]+)@([^:]+):([^/]+)/(.*)"
prod_url=$(meteor mongo katapoolt --url | tr -d '\n')
[[ ${prod_url} =~ ${prod_pattern} ]]
PROD_USER="${BASH_REMATCH[1]}"
PROD_PASSWORD="${BASH_REMATCH[2]}"
PROD_HOST="${BASH_REMATCH[3]}"
PROD_PORT="${BASH_REMATCH[4]}"
PROD_DB="${BASH_REMATCH[5]}"
PROD_DUMP_DIR=dumps/${NOW}
mkdir -p dumps

# local_url="mongodb://...:.../..."
local_pattern="mongodb://([^:]+):([^/]+)/(.*)"
local_url=$(meteor mongo --url | tr -d '\n')
[[ ${local_url} =~ ${local_pattern} ]]
LOCAL_HOST="${BASH_REMATCH[1]}"
LOCAL_PORT="${BASH_REMATCH[2]}"
LOCAL_DB="${BASH_REMATCH[3]}"

mongodump --host ${PROD_HOST} --port ${PROD_PORT} --username ${PROD_USER} --password ${PROD_PASSWORD} --db ${PROD_DB} --out ${PROD_DUMP_DIR}
mongorestore --port ${LOCAL_PORT} --host ${LOCAL_HOST} --db ${LOCAL_DB} ${PROD_DUMP_DIR}/${PROD_DB} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-22T11:14:12.200

```
# How to upload local db to meteor:

# -h = host, -d = database name, -o = dump folder name
mongodump -h 127.0.0.1:3001 -d meteor -o meteor

# get meteor db url, username, and password
meteor mongo --url myapp.meteor.com

# -h = host, -d = database name (app domain), -p = password, folder = the path to the dumped db
mongorestore -u client -h http://production-db-a2.meteor.io:27017 -d myapp_meteor_com -p 'password' folder/ 
```

将本地数据库上传到远程数据库时，出现断言异常

```
shubham@shubham-PC:$ mongorestore -u client -h http://production-db-a2.meteor.io:27017 -d myapp_meteor_com -p my_password local/
2015-04-22T16:37:38.504+0530 Assertion failure _setName.size() src/mongo/client/dbclientinterface.h 219
2015-04-22T16:37:38.506+0530 0xdcc299 0xd6c7c8 0xd4bfd2 0x663468 0x65d82e 0x605f98 0x606442 0x7f5d102f8ec5 0x60af41 
 mongorestore(_ZN5mongo15printStackTraceERSo+0x39) [0xdcc299]
 mongorestore(_ZN5mongo10logContextEPKc+0x198) [0xd6c7c8]
 mongorestore(_ZN5mongo12verifyFailedEPKcS1_j+0x102) [0xd4bfd2]
 mongorestore(_ZN5mongo16ConnectionStringC2ENS0_14ConnectionTypeERKSsS3_+0x1c8) [0x663468]
 mongorestore(_ZN5mongo16ConnectionString5parseERKSsRSs+0x1ce) [0x65d82e]
 mongorestore(_ZN5mongo4Tool4mainEiPPcS2_+0x2c8) [0x605f98]
 mongorestore(main+0x42) [0x606442]
 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf5) [0x7f5d102f8ec5]
 mongorestore() [0x60af41]
terminate called after throwing an instance of 'mongo::AssertionException'
  what():  assertion src/mongo/client/dbclientinterface.h:219
Aborted (core dumped) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-20T00:28:28.617

[流星备份](https://github.com/tgoorden/meteor-backup)是迄今为止最简单的方法。

```
sudo npm install -g meteor-db-utils
meteor-backup [domain] [collection...] 
```

截至 2015 年 3 月，您仍然需要指定要获取的所有集合（直到[此问题](https://github.com/tgoorden/meteor-backup/issues/1)得到解决）。

* * *

*下面是过去的东西*

我正在做

```
mongodump $(meteor mongo -U example.meteor.com | coffee url2args.cfee) 
```

连同这个小咖啡脚本，为了不混淆 Meteor，有一个损坏的扩展，`url2args.cfee`：

```
stdin = process.openStdin()
stdin.setEncoding 'utf8'
stdin.on 'data', (input) ->
  m = input.match /mongodb:\/\/(\w+):((\w+-)+\w+)@((\w+\.)+\w+):27017\/(\w+)/
  console.log "-u #{m[1]} -h #{m[4]} -p #{m[2]} -d #{m[6]}" 
```

（如果 meteor mongo -U --mongodumpoptions 会提供这些选项，或者如果 mongodump 会接受 mongo:// URL，那就更好了）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-07T21:23:17.463

我制作了这个简单的 Rakefile 来将实时数据库复制到本地。

要将实时数据库恢复到我的本地机器，我只是...

```
rake copy_live_db 
```

替换`myapp`为您的 meteor.com 名称 - 例如`myapp.meteor.com`。

```
需要“红宝石”
需要'open-uri'

desc "将实时数据库备份到本地 ./dump 文件夹"
任务：backup_live_db 做
  uri = `meteor mongo myapp --url`
  pass = uri.match(/client:([^@]+)@/)[1]
  提出“使用实时数据库密码：#{pass}”
  `mongodump -h meteor.m0.mongolayer.com:27017 -d myapp_meteor_com -u client -p #{pass}`
结尾

desc "将实时数据库复制到本地"
任务 :copy_live_db => :backup_live_db 做
  服务器 = `meteor mongo --url`
  uri = URI.parse(服务器)
  `mongorestore --host #{uri.host} --port #{uri.port} --db meteor --drop dump/myapp_meteor_com/`
结尾

desc "恢复上次备份"
任务：恢复做
  服务器 = `meteor mongo --url`
  uri = URI.parse(服务器)
  `mongorestore --host #{uri.host} --port #{uri.port} --db meteor --drop dump/myapp_meteor_com/`
结尾

```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-08T23:47:26.697

要在您的站点上使用现有的**本地**mongodb 数据库`meteor deploy myAppName`，您需要转储，然后恢复 mongodb。

按照上面的说明`mongodump`（记住路径）然后运行以下命令来生成您的“ `mongorestore`”（替换第二步和复制/粘贴）：

`CMD=meteor mongo -U myAppName.meteor.com | tail -1 | sed 's_mongodb://\([a-z0-9\-]*\):\([a-f0-9\-]*\)@\(.*\)/\(.*\)_mongorestore -u \1 -p \2 -h \3 -d \4_'`

然后

```
$CMD /path/to/dump 
```

从[mongorestore 可以采用单个 url 参数而不是单独的参数吗？](https://stackoverflow.com/questions/18883103/can-mongorestore-take-a-single-url-argument-instead-of-separate-arguments)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-08T11:05:03.473

我认为您可以通过[sshfs](http://en.wikipedia.org/wiki/SSHFS)使用远程安装的文件系统，然后[rsync](http://en.wikipedia.org/wiki/Rsync)来同步 mongodb 的文件夹本身或我相信的整个 Meteor 文件夹。这就像进行增量备份并且可能更有效。可以使用相同的解决方案来发送代码更改等，那么为什么不同时让您的数据库更改回来呢？！（用 1 块石头杀死 2 只鸟）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-27T08:28:11.703

这是一个简单的 bash 脚本，可让您从meteor.com 托管站点转储数据库。

```
#!/bin/bash

site="rankz.meteor.com"
name="$(meteor mongo --url $site)"
echo $name

IFS='@' read -a mongoString <<< "$name"

echo "HEAD: ${mongoString[0]}"
echo "TAIL: ${mongoString[1]}"

IFS=':' read -a pwd <<< "${mongoString[0]}"

echo "${pwd[1]}"
echo "${pwd[1]:2}"
echo "${pwd[2]}"

IFS='/' read -a site <<< "${mongoString[1]}"

echo "${site[0]}"
echo "${site[1]}"

mongodump -u ${pwd[1]:2} -h ${site[0]} -d ${site[1]}\
          -p ${pwd[2]} 
```

# ios - 执行不同的自定义转场

> ID：11024891
> 
> 赞同：0
> 
> 时间：2012-06-13T23:39:45.563
> 
> 标签：ios, objective-c, xcode, segue, uistoryboardsegue

我有多个视图控制器，当我转换到某些视图控制器时，我想执行不同的自定义 segue。

我已经为不同的自定义 segues 正确地制作了代码，并将相应的 segues 设置为该类。

我的问题是，当我从**ViewControllerA**转换到**ViewControllerB**时，我希望它执行**CustomSegueA**并且确实如此。当我从**ViewControllerB**转换到**ViewControllerC**时，我希望它执行**CustomSegueB**但它执行的是**CustomSegueA**。事实上，每个后续转换都会执行**CustomSegueA**。如果我将转换从**ViewControllerA**更改为**ViewControllerB**到**CustomSegueB**则每个后续转换都将使用**CustomSegueB**。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:10:55.733

问题出在自定义 segue 代码中……对于我拥有的动画

```
 - (void) perform {

UIViewController *sourceVC = (UIViewController *) self.sourceViewController;
UIViewController *destinationVC = (UIViewController *) self.destinationViewController;

[UIView transitionWithView:sourceVC.view duration:5.0
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
                    [sourceVC.navigationController pushViewController:destinationVC animated:NO];
                }
                completion:NULL]; 
```

}

在里面

```
 [UIView transitionWithView:sourceVC.view duration:5.0 
```

我把它改成

```
 [UIView transitionWithView:sourceVC.navigationController.view duration:5.0 
```

不知道为什么会有区别，我能够弄清楚的唯一原因是查看了我在工作时拥有的一些旧项目

# c - C 编程：查找具有 Null 字节的 Char* 的长度

> ID：11024896
> 
> 赞同：1
> 
> 时间：2012-06-13T23:40:08.863
> 
> 标签：c, char

如果我有一个包含 NULL 字节的字符指针，是否有任何内置函数可以用来查找长度，或者我只需要编写自己的函数？顺便说一句，我正在使用 gcc。

编辑：

应该提到字符指针是使用 malloc() 创建的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T23:41:54.883

如果您有一个**指针**，那么了解大小的唯一方法是单独存储大小或具有终止字符串的唯一值。（通常`'\0'`）如果你没有这些，那根本就做不到。

**编辑**：既然您已经指定使用分配缓冲区，`malloc`那么答案就是上面的段落。您需要记住分配了多少`malloc`或只是有一个终止值。

如果您碰巧有一个**数组**（例如`char s[] = "hello\0world";`：），那么您可以使用`sizeof(s)`. 但是要非常小心，当你用指针尝试它的时候，你会得到指针的大小，而不是数组的大小。（但`strlen(s)`会相等`5`，因为它计数到第一个`'\0'`）。

此外，数组在传递给函数时会**衰减为指针。**所以如果你把数组传递给一个函数，你又回到了原点。

**笔记：**

```
void f(int *p) {} 
```

和

```
void f(int p[]) {} 
```

和

```
void f(int p[10]) {} 
```

都是**一样的**。在所有 3 个版本中，`p`是一个**指针**，而不是一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:41:45.460

如果字符串包含 NULL 字节作为字符串的一部分，您如何知道字符串的结尾？当然，没有内置函数可以处理这样的字符串。它将第一个空字节解释为字符串的结尾。

如果您想要长度，则必须自己存储。请记住，*没有*标准库字符串函数可以在这样的字符串上正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:42:06.893

您需要自己跟踪长度。

C 字符串是*空终止*的，这意味着第一个空字符表示字符串的结束。所有内置字符串函数都依赖于此，所以如果你有一个缓冲区可以包含 NULL 作为数据的一部分，那么你就不能使用它们。

由于您正在使用`malloc`，因此您可能需要跟踪两种大小：分配的缓冲区的大小，以及该缓冲区中有多少字符构成有效数据。

# mongodb - GridFS Java 对象是线程安全的吗？

> ID：11024903
> 
> 赞同：1
> 
> 时间：2012-06-13T23:40:59.127
> 
> 标签：mongodb, mongodb-java

我知道 Java com.mongodb.Mongo 对象是线程安全的，但是如果我使用从它返回的数据库来创建 GridFS 对象，那么 GridFS 对象也是线程安全的吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:41:39.463

是的，GridFS 的实例也是线程安全的。

# coffeescript - div 没有显示在咖啡脚本的变化上

> ID：11024906
> 
> 赞同：0
> 
> 时间：2012-06-13T23:41:10.343
> 
> 标签：coffeescript

我想在表单中隐藏一个选项，除非选择了特定选项但我的咖啡脚本似乎不起作用。看起来像：

```
jQuery ->
  $('.input.boolean.optional').hide()
  selected = $('#stand_type :selected').text()
  value = "Microphone"
  $('#stand_type').change ->
      $('.input.boolean.optional').show() if selected is value 
```

此代码编译正确。是的，我知道 ID 和类选择器，它们在代码中是不同的，因为我使用的是 simple_form，它只给 div 一个类，这就是为什么在隐藏它时我使用的是类而不是 ID。我的表单的[html 看起来像](http://pastebin.com/jVyts5V8).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:50:17.750

您的脚本中的逻辑是错误的。您在更新之前检查值，因此它始终为空，您的脚本应如下所示：

```
jQuery ->
  $('.input.boolean.optional').hide()
  value = "Microphone"
  $('#stand_type').change ->
    selected = $('#stand_type :selected').text()
    $('.input.boolean.optional').show() if selected is value 
```

# php - 解析 m/d/Y 日期以将日、月、年分配给变量

> ID：11024908
> 
> 赞同：1
> 
> 时间：2012-06-13T23:41:14.477
> 
> 标签：php, date

我目前正在从 Facebook 获取用户的生日并将其存储在 Facebook 提供的标准 m/d/Y 中（例如：05/21/1982）。我有一个编辑个人资料页面，我需要在其中将日、月和年分配给 3 个单独的变量，以允许用户更改他或她的生日以及预先选择正确的生日。

我的代码仅与我想分配给 $days_var 的天数变量相关，并且在上面的 05/21/1982 示例中将是 05 粘贴在下面：

```
<?php
$days = range(1, 31);
foreach($days as $day) {
?>
<option value="<?php echo($day) ?>" <?php if ($days_var = $day){echo "selected='1'";}?> ><?php echo($day) ?></option>
<?
}
?> 
```

谢谢。编辑：我只给出了天的例子，但显然需要天、月和年变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:44:36.440

您需要将日期字符串解析为其组成部分吗？怎么样：

```
list($month_var, $days_var, $year_var) = explode('/', $dateString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T23:45:48.407

请参阅 PHP 的[datetime 类](http://php.net/manual/en/class.datetime.php)或[`strtotime()`](http://php.net/manual/en/function.strtotime.php)and[`date()`](http://php.net/manual/en/function.date.php)函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:51:11.537

就像 ddlshack 所说，使用 strtotime() 和 date()，

为了将来的参考，

它是

```
if ($days_var == $day) 
```

不是

```
if ($days_var = $day) 
```

# mysql - 我可以将文件中的所有 blob 转换为文本吗？

> ID：11024915
> 
> 赞同：0
> 
> 时间：2012-06-13T23:41:54.180
> 
> 标签：mysql, search, blob

我有`db.sql`一个 MYSQL 数据库的转储，我需要查看某些数据，想知道将这一切作为文本获取的最简单方法是什么？

我不想更改实际的数据库，只需获取它的人类可读（和机器可搜索）版本。我还可以访问数据库，因此可以在*所有表*​​中搜索blob 中的文本的工具同样有用。

# oracle - 将 oracle xmltype 表字段选择到 xmltype 变量中会导致空对象

> ID：11024918
> 
> 赞同：0
> 
> 时间：2012-06-13T23:42:04.493
> 
> 标签：oracle, plsql, xmltype

这一直困扰着我一段时间。我正在使用 oracle 流将消息写入 oracle AQ 队列作为存储过程的一部分。下面是显示相关部分的存储过程：

```
CREATE OR REPLACE PROCEDURE ESBEVENT.esb_dml_handler(in_any IN ANYDATA) IS

l_enqueue_options dbms_aq.enqueue_options_t;
l_message_properties dbms_aq.message_properties_t;
l_message sys.aq$_jms_text_message;
l_msgid raw(16);
l_xmlmsg SYS.XMLTYPE;
err_num NUMBER;
err_msg VARCHAR2(100);

BEGIN
    BEGIN
    l_message := sys.aq$_jms_text_message.construct;
    l_xmlmsg := DBMS_STREAMS.CONVERT_LCR_TO_XML(in_any);
    l_message.set_text(l_xmlmsg.getClobVal());

    dbms_aq.enqueue
    ( queue_name => 'esbevent.esb_jms_queue'
    , enqueue_options => l_enqueue_options
    , message_properties => l_message_properties
    , payload => l_message
    , msgid => l_msgid
    );
    COMMIT;

    err_num := '';
    err_msg := 'Message Queued Successfully';

    EXCEPTION
    WHEN OTHERS THEN
        err_num := SQLCODE;
        err_msg := SUBSTR(SQLERRM, 1, 1000);
        INSERT INTO esbevent.esb_dml_handler_error_t VALUES (SYSDATE, err_num||' - '||err_msg );
END;

INSERT INTO esbevent.esb_jms_msg_memento_t VALUES (esb_jms_msg_memento_seq.nextval,     SYSDATE, l_xmlmsg, err_num||' - '||err_msg );
COMMIT;

END; 
```

在入队之后，我将作为 XMLTYPE 发送的消息存储在表 esb_jms_msg_memento_t 中。如果我们在后续处理中遇到问题，这是为了启用重新发送。我现在正在尝试编写一个块来提取 XMLTYPE 字段数据并将其再次写入 AQ。目前情况如下：

```
DECLARE
   l_enqueue_options      DBMS_AQ.ENQUEUE_OPTIONS_T;
   l_message_properties   DBMS_AQ.MESSAGE_PROPERTIES_T;
   l_message              SYS.aq$_jms_text_message;
   l_msgid                RAW (16);
   l_xmlmsg               XMLTYPE;

BEGIN
   SELECT msg_payload
     INTO l_xmlmsg
     FROM esb_jms_msg_memento_t
    WHERE UNIQUE_ID = '815929';

   l_message.set_text (l_xmlmsg.getClobVal ()); --null self error here

   DBMS_AQ.enqueue (queue_name           => 'esbevent.esb_jms_queue',
                    enqueue_options      => l_enqueue_options,
                    message_properties   => l_message_properties,
                    payload              => l_message,
                    msgid                => l_msgid);
   COMMIT;
END; 
```

当我运行它时，我得到了错误：

ORA-30625：不允许对 NULL SELF 参数进行方法调度 ORA-06512：在第 22 行

看来我可以将 XMLTYPE 变量插入 XMLTYPE 字段，但反过来不行？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:43:46.397

我一发帖就解决了。。。

忘记构建 l_message：

```
l_message := sys.aq$_jms_text_message.construct; 
```

哦！

# ruby-on-rails - form_for：主题

> ID：11024922
> 
> 赞同：0
> 
> 时间：2012-06-13T23:42:17.200
> 
> 标签：ruby-on-rails, ruby

我刚开始学习 ruby​​，所以这个问题很简单。

我在控制器中创建了@subject。
为什么在 form_for 中使用 :subject（而不是 @subject）？

```
<%= form_for(:subject, :url => {:action => 'create'}) do |f| %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:48:23.763

根据文档，您可以使用任一（[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)）。

传入符号`:subject`将为名为“主题”的资源创建通用表单。传入实例变量`@subject`将为 Subject 类的特定实例创建一个表单，并为您找出正确的 url（假设您遵循标准的 rails 约定）。文档提到，使用带有实例变量的后一种方法是首选方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:41:37.960

它类似于 rspec rails testing 中的 assignments（您可以查找它，assigns(:subject) 将在您的控制器中寻找 @subject）。如果我错了，请纠正我，但我认为这是因为符号 :subject 将尝试在控制器中寻找与 @subject 对应的实例变量。因此，为了证明这一点，请将控制器中的 @subject 重命名为其他名称，例如 @subjectz ，我认为它不会正常工作

# postgresql - PostgreSQL 创建一个重新映射列的插入触发器

> ID：11024925
> 
> 赞同：1
> 
> 时间：2012-06-13T23:42:44.070
> 
> 标签：postgresql, triggers, postgis

我想知道是否可以在表上使用触发器来“忽略”来自 STDIN 的 COPY 语句中但不在目标表中的列。抱歉，如果问题的措辞/语法不正确，但这里是我想说的解释。我是触发器的新手，所以任何建议都是有帮助的。

我正在使用 PostGIS Shapefile 导入器将 shapefile 复制到我的 PostgreSQL 数据库中的空间表中。

这将创建一个 COPY 语句，其中包含 shapefile 中的所有字段，例如：

```
COPY "public"."stations" ("column1","column2","column3","column4", geom) FROM stdin; 
```

column1 和 column2 在文件中但不在目标表中，因此 COPY 失败。

有没有办法创建触发器来创建与以下结果相同的东西：

```
COPY "public"."stations" ("column3","column4", geom) FROM stdin; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:36:09.487

不，您不能跳过输入文件中存在的列。这将在触发器被调用*之前出错。*你也不能使用规则。[我引用手册](http://www.postgresql.org/docs/current/interactive/sql-copy.html)：

> COPY FROM 将调用任何触发器并检查目标表上的约束。但是，它不会调用规则。

您可以编辑文件或使用**临时登台表**：

1.  `COPY`到具有匹配列的临时表。

2.  用于`INSERT`将所需列写入最终目标表 - 或用于更复杂事务的 SQL DDL 命令的整个范围。

# python - 你如何检查列表是否为空白？

> ID：11024927
> 
> 赞同：26
> 
> 时间：2012-06-13T23:43:01.730
> 
> 标签：python, arrays

> **可能重复：**
> [Python：检查列表是否为空的最佳方法是什么？](https://stackoverflow.com/questions/53513/python-what-is-the-best-way-to-check-if-a-list-is-empty)

```
def CleanWhiteSpace(theDict):
    stuff=[]

    for key,value in theDict.items():
        for d in value:
            if value != " ":
                stuff.append(d)    
                print d
                theDict[key]=stuff
            if not value[d]:
                print value
        stuff=[]
    return theDict
    print CleanWhiteSpace({'a':['1','2'],'b':['3',' '],'c':[]}) 
```

我编辑了这个，因为我需要更多帮助。你如何检查是否`c`为空白？是`c`简单地等于`[]`？

我已经尝试了`==[]`and`"[]"`并获得了长度 and `== ""`，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T23:45:21.900

在 python 中，一个空列表的计算结果为 False。

```
if not c:
   print "The list is empty"
else:
   print "The list is not empty" 
```

# sql-server - 压缩成组出现的相似行并保持顺序

> ID：11024928
> 
> 赞同：4
> 
> 时间：2012-06-13T23:43:27.083
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我有一个包含设备 gps 坐标的 sql 表，每*n*分钟更新一次（设备安装在车辆中）。鉴于 GPS 的性质，许多条目非常相似，但就服务器而言完全不同。我可以很容易地大致匹配事物（在〜3.6'或36'内）`CAST(lat as decimal(7,4))`

我希望能够获取结果集并压缩近似的重复条目，但仍保持基于时间的顺序。这是一个例子：

```
Row    Lat         Lng        vel Hdg Time
01    31.12345    -88.12345   00  00  12-4-21 01:45:00
02    31.12346    -88.12345   00  00  12-4-21 01:46:00
03    31.12455    -88.12410   10  01  12-4-21 01:47:00
04    31.12495    -88.12480   17  01  12-4-21 01:48:00
05    31.12532    -88.12560   22  01  12-4-21 01:49:00
06    31.12567    -88.12608   25  02  12-4-21 01:50:00
07    31.12638    -88.12672   24  02  12-4-21 01:51:00
08    31.12689    -88.12722   19  02  12-4-21 01:52:00
09    31.12345    -88.12345   00  00  12-4-21 01:53:00
10    31.12346    -88.12346   00  00  12-4-21 01:54:00
11    31.12347    -88.12345   00  00  12-4-21 01:55:00
12    31.12346    -88.12346   00  00  12-4-21 01:56:00
13    31.12689    -88.12788   10  40  12-4-21 01:57:00
14    31.12604    -88.12691   13  39  12-4-21 01:58:00
15    31.12572    -88.12603   15  39  12-4-21 01:59:00 
```

我想要的最终结果是将第 1 行和第 2 行压缩为一行，将第 9 行到第 12 行压缩为一行，其中包含`AVG(Lat)`、`AVG(Lng)`和`MIN(Time)`.

鉴于上述数据，这是我希望收到的结果集：

```
Row    Lat         Lng        vel Hdg Time
01    31.123455   -88.12345   00  00  12-4-21 01:45:00
02    31.12455    -88.12410   10  01  12-4-21 01:47:00
03    31.12495    -88.12480   17  01  12-4-21 01:48:00
04    31.12532    -88.12560   22  01  12-4-21 01:49:00
05    31.12567    -88.12608   25  02  12-4-21 01:50:00
06    31.12638    -88.12672   24  02  12-4-21 01:51:00
07    31.12689    -88.12722   19  02  12-4-21 01:52:00
08    31.12346    -88.123455  00  00  12-4-21 01:53:00
09    31.12689    -88.12788   10  40  12-4-21 01:57:00
10    31.12604    -88.12691   13  39  12-4-21 01:58:00
11    31.12572    -88.12603   15  39  12-4-21 01:59:00 
```

分组之间的界限将是运动。速度 > 0，或 gps 坐标变化超过*x*量。在这种情况下，*x*是 0.0001。 **如下所述，问题**在于给定坐标处的多个停靠点（在不同的时间）被集中到一个停靠点中。如果我今天下午 4 点访问*坐标 x*，明天上午 8 点，然后在下午 6 点再次访问，我看到的唯一一个是明天@下午 6 点（在 的情况下`MAX(Time)`）或今天@下午 4 点（在情况下) `MIN(Time)`。

如果速度为 0，则航向也为 0。但是，重要的是，如果第 1 行和第 2 行以及第 9 到 12 行的坐标足够相似以至于相同（即四舍五入到 4小数位）。

我有一个查询可以做到这一点：

```
SELECT Geography::Point(AVG(dbo.GPSEntries.Latitude), 
                        AVG(dbo.GPSEntries.Longitude),
                        4326 ) as Location,
       dbo.GPSEntries.Velocity,
       dbo.GPSEntries.Heading,
       MAX(dbo.GPSEntries.Time) as maxTime,
       MIN(dbo.GPSEntries.Time) as minTime,
       AVG(dbo.RFDatas.RSSI) as avgRSSI,
       COUNT(1) as samples

FROM dbo.GPSEntries
     INNER JOIN
         dbo.Reports ON
             dbo.GPSEntries.Report_Id = dbo.Reports.Id 
     INNER JOIN
         dbo.RFDatas ON
             dbo.GPSEntries.Report_Id = dbo.RFDatas.Report_Id

GROUP BY CAST(Latitude as Decimal(7,4)),
         CAST(Longitude as Decimal(7,4)),
         Velocity,
         Heading

ORDER BY MAX(Time) 
```

换句话说，如果我从 A 点旅行到 B 点，停留 30 分钟（每分钟 1 次报告 30 份报告），然后前往 C 点，停留 20 分钟，然后返回 B 点并再停留 20 分钟在前往 D 点前几分钟，我希望能够在 B 点看到两个单独的站点。

这是来自我的数据库的一些实际数据，经过消毒以保护无辜者或责怪阿拉巴马州东北部的某个人。

```
Latitude    Longitude   Spd Vel MAX(Time)               MIN(Time)                sig RowCount    
34.747420   -86.302580  68  157 2012-06-13 01:31:37.000 2012-06-13 01:31:37.000  -91   1
34.759140   -86.307620  61  134 2012-06-13 01:33:06.000 2012-06-13 01:33:06.000  -91   2
34.763237   -86.307264  0   0   2012-06-13 01:34:36.000 2012-06-12 01:27:21.000  -97   7
34.763288   -86.307280  0   0   2012-06-13 14:30:44.000 2012-06-12 01:30:21.000  -98 527
34.760220   -86.308200  38  110 2012-06-13 14:33:44.000 2012-06-13 14:33:44.000  -98   1
34.750350   -86.305750  5   90  2012-06-13 14:35:13.000 2012-06-13 14:35:13.000  -83   2
34.737160   -86.298040  70  88  2012-06-13 14:36:43.000 2012-06-13 14:36:43.000  -80   1
34.736420   -86.277270  120 33  2012-06-13 14:38:13.000 2012-06-13 14:38:13.000  -87   2
34.747090   -86.248370  120 37  2012-06-13 14:39:43.000 2012-06-13 14:39:43.000  -93   2
34.755620   -86.240640  70  179 2012-06-13 14:41:13.000 2012-06-13 14:41:13.000  -81   1
34.771240   -86.242760  70  0   2012-06-13 14:42:42.000 2012-06-13 14:42:42.000  -88   2
34.785510   -86.245710  70  6   2012-06-13 14:44:12.000 2012-06-13 14:44:12.000  -99   2
34.800220   -86.239400  70  1   2012-06-13 14:45:42.000 2012-06-13 14:45:42.000  -86   1
34.815070   -86.232180  70  16  2012-06-13 14:47:12.000 2012-06-13 14:47:12.000  -98   2
34.824540   -86.226198  0   0   2012-06-13 14:51:41.000 2012-06-13 00:13:48.000 -101   9
34.824579   -86.226171  0   0   2012-06-14 00:26:19.000 2012-06-12 00:46:57.000  -99 168 
```

您会注意到第 4 行和最后一行分别有 527 和 168 个条目，它们跨越 2 天。*这些条目仅来自 1 个设备，并且来自设备在同一地点多次*停止数小时的位置。

这是一些压缩的 csv 数据：[示例](https://dl.dropbox.com/u/1325695/gpsData.zip)

## 我最后做了什么

对 Aaron Bertrand 提供的查询进行了一些小的修改，如下所示：

```
WITH d AS
(
  SELECT Time
        ,Latitude
        ,Longitude
        ,Velocity
        ,Heading
        ,TimeRN = ROW_NUMBER() OVER (ORDER BY [Time])
  FROM dbo.GPSEntries
  GROUP BY Time, Latitude, Longitude, Velocity, Heading
),
y AS (
  SELECT BeginTime  = MIN(Time)
        ,EndTime    = MAX(Time)
        ,Latitude   = AVG(Latitude)
        ,Longitude  = AVG(Longitude)
--      ,[RowCount] = COUNT(*)
        ,GroupNumber
  FROM ( 
    SELECT  Time
           ,Latitude
           ,Longitude
           ,GroupNumber = ( 
              SELECT MIN(d2.TimeRN)
              FROM d AS d2
              WHERE d2.TimeRN >= d.TimeRN AND
              NOT EXISTS ( 
                SELECT 1
                FROM d AS d3    -- Between 250 and 337 feet
                WHERE ABS(d2.Latitude - d.Latitude) <= .0007 AND   
                      ABS(d2.Longitude - d.Longitude) <= .0007 AND
                      d2.Velocity = d.Velocity ) )
    FROM d ) AS x
  GROUP BY GroupNumber
)
SELECT y.Latitude
      ,y.Longitude
      ,d.Velocity
      ,d.Heading
      ,y.BeginTime
--    ,y.EndTime
--    ,y.[RowCount]
--    ,Duration = CONVERT(time(0),DATEADD(SS,DATEDIFF(SS,y.BeginTime, y.EndTime), '0:00:00'), 108)
FROM y INNER JOIN d ON y.BeginTime = d.[Time]
-- FOR STOPS (5 minute):
-- WHERE DATEDIFF(MI, Y.BeginTime, y.EndTime) + 1 > 5
ORDER BY y.BeginTime; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:35:15.097

以下是 tempdb 中的一些示例数据：

```
USE tempdb;
GO

CREATE TABLE dbo.GPSEntries
( 
  Latitude DECIMAL(8,5), 
  Longitude DECIMAL(8,5), 
  Velocity TINYINT, 
  Heading TINYINT, 
  [Time] SMALLDATETIME
);

INSERT dbo.GPSEntries VALUES
 (31.12345,-88.12345,00,00,'2012-04-21 01:45:00'),
 (31.12346,-88.12345,00,00,'2012-04-21 01:46:00'),
 (31.12455,-88.12410,10,01,'2012-04-21 01:47:00'),
 (31.12495,-88.12480,17,01,'2012-04-21 01:48:00'),
 (31.12532,-88.12560,22,01,'2012-04-21 01:49:00'),
 (31.12567,-88.12608,25,02,'2012-04-21 01:50:00'),
 (31.12638,-88.12672,24,02,'2012-04-21 01:51:00'),
 (31.12689,-88.12722,19,02,'2012-04-21 01:52:00'),
 (31.12345,-88.12345,00,00,'2012-04-21 01:53:00'),
 (31.12346,-88.12346,00,00,'2012-04-21 01:54:00'),
 (31.12347,-88.12345,00,00,'2012-04-21 01:55:00'),
 (31.12346,-88.12346,00,00,'2012-04-21 01:56:00'),
 (31.12689,-88.12788,10,40,'2012-04-21 01:57:00'),
 (31.12604,-88.12691,13,39,'2012-04-21 01:58:00'),
 (31.12572,-88.12603,15,39,'2012-04-21 01:59:00'); 
```

我尝试满足查询：

```
;WITH d AS
(
    SELECT Time, Latitude, Longitude, Velocity, Heading, 
        NormLat = CONVERT(DECIMAL(7,4), Latitude), 
        NormLong = CONVERT(DECIMAL(7,4), Longitude),
        TimeRN = ROW_NUMBER() OVER (ORDER BY [Time])
    FROM dbo.GPSEntries
    -- /* you probably want filters:
    -- WHERE DeviceID = @SomeDeviceID
    -- AND [Time] >= @SomeStartDate
    -- AND [Time] <  DATEADD(DAY, 1, @SomeEndDate)
    -- /* also your sample CSV file had lots of duplicates, so:
    GROUP BY Time, Latitude, Longitude, Velocity, Heading
),
y AS (
  SELECT MinTime = MIN(Time), MaxTime = MAX(Time), Latitude = AVG(Latitude), 
    Longitude = AVG(Longitude), [RowCount] = COUNT(*) FROM 
    (
      SELECT Time, Latitude, Longitude, GroupNumber = 
      (
        SELECT MIN(d2.TimeRN) 
         FROM d AS d2 WHERE d2.TimeRN >= d.TimeRN 
         AND NOT EXISTS 
         (
           SELECT 1 FROM d AS d3
           WHERE d2.NormLat = d.NormLat
           AND d2.NormLong = d.NormLong
         )
       )
       FROM d
    ) AS x GROUP BY GroupNumber
)
SELECT [Row] = ROW_NUMBER() OVER (ORDER BY y.MinTime),
  y.Latitude, y.Longitude, d.Velocity, d.Heading, 
  y.MinTime, y.MaxTime, y.[RowCount]
FROM y INNER JOIN d ON y.MinTime = d.[Time]
ORDER BY y.MinTime; 
```

结果：

```
Row Latitude  Longitude  Velocity Heading MinTime          MaxTime          RowCount
---|---------|----------|--------|-------|----------------|----------------|--------
1   31.123455 -88.123450   0        0     2012-04-21 01:45 2012-04-21 01:46   2
2   31.124550 -88.124100   10       1     2012-04-21 01:47 2012-04-21 01:47   1
3   31.124950 -88.124800   17       1     2012-04-21 01:48 2012-04-21 01:48   1
4   31.125320 -88.125600   22       1     2012-04-21 01:49 2012-04-21 01:49   1
5   31.125670 -88.126080   25       2     2012-04-21 01:50 2012-04-21 01:50   1
6   31.126380 -88.126720   24       2     2012-04-21 01:51 2012-04-21 01:51   1
7   31.126890 -88.127220   19       2     2012-04-21 01:52 2012-04-21 01:52   1
8   31.123460 -88.123455   0        0     2012-04-21 01:53 2012-04-21 01:56   4
9   31.126890 -88.127880   10       40    2012-04-21 01:57 2012-04-21 01:57   1
10  31.126040 -88.126910   13       39    2012-04-21 01:58 2012-04-21 01:58   1
11  31.125720 -88.126030   15       39    2012-04-21 01:59 2012-04-21 01:59   1 
```

# android - 启用proguard时Android构建失败

> ID：11024929
> 
> 赞同：2
> 
> 时间：2012-06-13T23:43:27.763
> 
> 标签：android, proguard

我正在尝试在我的项目上启用 proguard，但构建不断失败，我遵循了本教程：

[http://android-developers.blogspot.com/2010/09/proguard-android-and-licensing-server.html](http://android-developers.blogspot.com/2010/09/proguard-android-and-licensing-server.html)

玩弄配置但没有运气:(

```
Buildfile: C:\00\work\workspaces\Mobile\TesApp\build.xml

-set-mode-check:

-set-release-mode:

-release-obfuscation-check:

-setup:
     [echo] Creating output directories if needed...
     [echo] Gathering info for TesApp...
    [setup] Android SDK Tools Revision 19
    [setup] Project Target: Android 4.0.3
    [setup] API level: 15
    [setup] 
    [setup] ------------------
    [setup] Resolving library dependencies:
    [setup] No library dependencies.
    [setup] 
    [setup] ------------------
    [setup] API<=15: Adding annotations.jar to the classpath.
    [setup] 
    [setup] ------------------

-build-setup:

-pre-build:

-code-gen:
     [echo] ----------
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Found Deleted Target File
     [aapt] Generating resource IDs...
     [echo] ----------
     [echo] Handling BuildConfig class...
[buildconfig] No need to generate new BuildConfig.

-pre-compile:

-compile:
    [javac] Compiling 1 source file to C:\00\work\workspaces\Mobile\TesApp\bin\classes

-dex-obfuscate:

-dex-no-obfuscate:

-post-compile:

-obfuscate:
   [delete] Deleting: C:\00\work\workspaces\Mobile\TesApp\obf\original.jar
   [delete] Deleting: C:\00\work\workspaces\Mobile\TesApp\obf\obfuscated.jar
      [jar] Building jar: C:\00\work\workspaces\Mobile\TesApp\obf\original.jar
 [proguard] ProGuard, version 4.7
 [proguard] Reading input...
 [proguard] Reading program jar [C:\00\work\workspaces\Mobile\TesApp\obf\original.jar]
 [proguard] Reading program jar [C:\android-sdk-windows\tools\support\annotations.jar]
 [proguard] Reading library jar [C:\android-sdk-windows\platforms\android-15\android.jar]
 [proguard] Initializing...
 [proguard] Ignoring unused library classes...
 [proguard]   Original number of library classes: 3145
 [proguard]   Final number of library classes:    337
 [proguard] Printing kept classes, fields, and methods...
 [proguard] Shrinking...
 [proguard] Printing usage to [C:\00\work\workspaces\Mobile\TesApp\obf\usage.txt]...
 [proguard] Removing unused program classes and class elements...
 [proguard]   Original number of program classes: 54
 [proguard]   Final number of program classes:    40
 [proguard] Optimizing...
 [proguard]   Number of finalized classes:                 23
 [proguard]   Number of vertically merged classes:         0   (disabled)
 [proguard]   Number of horizontally merged classes:       0   (disabled)
 [proguard]   Number of removed write-only fields:         0   (disabled)
 [proguard]   Number of privatized fields:                 0   (disabled)
 [proguard]   Number of inlined constant fields:           0   (disabled)
 [proguard]   Number of privatized methods:                3
 [proguard]   Number of staticized methods:                1
 [proguard]   Number of finalized methods:                 39
 [proguard]   Number of removed method parameters:         0
 [proguard]   Number of inlined constant parameters:       1
 [proguard]   Number of inlined constant return values:    0
 [proguard]   Number of inlined short method calls:        2
 [proguard]   Number of inlined unique method calls:       13
 [proguard]   Number of inlined tail recursion calls:      0
 [proguard]   Number of merged code blocks:                0
 [proguard]   Number of variable peephole optimizations:   132
 [proguard]   Number of arithmetic peephole optimizations: 0   (disabled)
 [proguard]   Number of cast peephole optimizations:       0
 [proguard]   Number of field peephole optimizations:      0
 [proguard]   Number of branch peephole optimizations:     26
 [proguard]   Number of string peephole optimizations:     0
 [proguard]   Number of simplified instructions:           6
 [proguard]   Number of removed instructions:              15
 [proguard]   Number of removed local variables:           4
 [proguard]   Number of removed exception blocks:          0
 [proguard]   Number of optimized local variable frames:   50
 [proguard] Shrinking...
 [proguard] Removing unused program classes and class elements...
 [proguard]   Original number of program classes: 40
 [proguard]   Final number of program classes:    40
 [proguard] Optimizing...
 [proguard]   Number of finalized classes:                 0
 [proguard]   Number of vertically merged classes:         0   (disabled)
 [proguard]   Number of horizontally merged classes:       0   (disabled)
 [proguard]   Number of removed write-only fields:         0   (disabled)
 [proguard]   Number of privatized fields:                 0   (disabled)
 [proguard]   Number of inlined constant fields:           0   (disabled)
 [proguard]   Number of privatized methods:                0
 [proguard]   Number of staticized methods:                0
 [proguard]   Number of finalized methods:                 0
 [proguard]   Number of removed method parameters:         1
 [proguard]   Number of inlined constant parameters:       0
 [proguard]   Number of inlined constant return values:    0
 [proguard]   Number of inlined short method calls:        0
 [proguard]   Number of inlined unique method calls:       0
 [proguard]   Number of inlined tail recursion calls:      0
 [proguard]   Number of merged code blocks:                0
 [proguard]   Number of variable peephole optimizations:   3
 [proguard]   Number of arithmetic peephole optimizations: 0   (disabled)
 [proguard]   Number of cast peephole optimizations:       0
 [proguard]   Number of field peephole optimizations:      0
 [proguard]   Number of branch peephole optimizations:     0
 [proguard]   Number of string peephole optimizations:     0
 [proguard]   Number of simplified instructions:           0
 [proguard]   Number of removed instructions:              123
 [proguard]   Number of removed local variables:           0
 [proguard]   Number of removed exception blocks:          0
 [proguard]   Number of optimized local variable frames:   0
 [proguard] Shrinking...
 [proguard] Removing unused program classes and class elements...
 [proguard]   Original number of program classes: 40
 [proguard]   Final number of program classes:    40
 [proguard] Optimizing...
 [proguard]   Number of finalized classes:                 0
 [proguard]   Number of vertically merged classes:         0   (disabled)
 [proguard]   Number of horizontally merged classes:       0   (disabled)
 [proguard]   Number of removed write-only fields:         0   (disabled)
 [proguard]   Number of privatized fields:                 0   (disabled)
 [proguard]   Number of inlined constant fields:           0   (disabled)
 [proguard]   Number of privatized methods:                0
 [proguard]   Number of staticized methods:                0
 [proguard]   Number of finalized methods:                 0
 [proguard]   Number of removed method parameters:         0
 [proguard]   Number of inlined constant parameters:       0
 [proguard]   Number of inlined constant return values:    0
 [proguard]   Number of inlined short method calls:        0
 [proguard]   Number of inlined unique method calls:       0
 [proguard]   Number of inlined tail recursion calls:      0
 [proguard]   Number of merged code blocks:                0
 [proguard]   Number of variable peephole optimizations:   0
 [proguard]   Number of arithmetic peephole optimizations: 0   (disabled)
 [proguard]   Number of cast peephole optimizations:       0
 [proguard]   Number of field peephole optimizations:      0
 [proguard]   Number of branch peephole optimizations:     0
 [proguard]   Number of string peephole optimizations:     0
 [proguard]   Number of simplified instructions:           0
 [proguard]   Number of removed instructions:              5
 [proguard]   Number of removed local variables:           0
 [proguard]   Number of removed exception blocks:          0
 [proguard]   Number of optimized local variable frames:   0
 [proguard] Shrinking...
 [proguard] Removing unused program classes and class elements...
 [proguard]   Original number of program classes: 40
 [proguard]   Final number of program classes:    40
 [proguard] Optimizing...
 [proguard]   Number of finalized classes:                 0
 [proguard]   Number of vertically merged classes:         0   (disabled)
 [proguard]   Number of horizontally merged classes:       0   (disabled)
 [proguard]   Number of removed write-only fields:         0   (disabled)
 [proguard]   Number of privatized fields:                 0   (disabled)
 [proguard]   Number of inlined constant fields:           0   (disabled)
 [proguard]   Number of privatized methods:                0
 [proguard]   Number of staticized methods:                0
 [proguard]   Number of finalized methods:                 0
 [proguard]   Number of removed method parameters:         0
 [proguard]   Number of inlined constant parameters:       0
 [proguard]   Number of inlined constant return values:    0
 [proguard]   Number of inlined short method calls:        0
 [proguard]   Number of inlined unique method calls:       0
 [proguard]   Number of inlined tail recursion calls:      0
 [proguard]   Number of merged code blocks:                0
 [proguard]   Number of variable peephole optimizations:   0
 [proguard]   Number of arithmetic peephole optimizations: 0   (disabled)
 [proguard]   Number of cast peephole optimizations:       0
 [proguard]   Number of field peephole optimizations:      0
 [proguard]   Number of branch peephole optimizations:     0
 [proguard]   Number of string peephole optimizations:     0
 [proguard]   Number of simplified instructions:           0
 [proguard]   Number of removed instructions:              0
 [proguard]   Number of removed local variables:           0
 [proguard]   Number of removed exception blocks:          0
 [proguard]   Number of optimized local variable frames:   0
 [proguard] Obfuscating...
 [proguard] Printing mapping to [C:\00\work\workspaces\Mobile\TesApp\obf\mapping.txt]...
 [proguard] Writing output...
 [proguard] Preparing output jar [C:\00\work\workspaces\Mobile\TesApp\obf\obfuscated.jar]
 [proguard]   Copying resources from program jar [C:\00\work\workspaces\Mobile\TesApp\obf\original.jar]
 [proguard]   Copying resources from program jar [C:\android-sdk-windows\tools\support\annotations.jar]
 [proguard] Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry [annotations.jar:META-INF/MANIFEST.MF])
 [proguard] Printing classes to [C:\00\work\workspaces\Mobile\TesApp\obf\dump.txt]...

-dex:
      [dex] Found Deleted Target File
      [dex] Converting compiled files and external libraries into C:\00\work\workspaces\Mobile\TesApp\bin\classes.dex...
       [dx] no classfiles specified

BUILD FAILED
C:\android-sdk-windows\tools\ant\build.xml:818: The following error occurred whi
le executing this line:
C:\android-sdk-windows\tools\ant\build.xml:820: The following error occurred whi
le executing this line:
C:\android-sdk-windows\tools\ant\build.xml:832: The following error occurred whi
le executing this line:
C:\android-sdk-windows\tools\ant\build.xml:278: null returned: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:49:48.363

您可能希望消除[您提到的博客文章中](http://android-developers.blogspot.com/2010/09/proguard-android-and-licensing-server.html)建议的优化步骤。

这是因为[最近的 ProGuard 改进](http://tools.android.com/recent/proguardimprovements)建议不要这样做。

也尝试使用[这里](https://stackoverflow.com/questions/11006305/why-start-using-libraryjars-when-i-never-needed-it-before)`-dontwarn`举例说明的指令。

# javascript - AngularJS 和嵌入式框架 html

> ID：11024940
> 
> 赞同：1
> 
> 时间：2012-06-13T23:44:24.863
> 
> 标签：javascript, angularjs

我正在开发一个用户偏好页面，我决定使用 AngularJS 来控制数据的状态。

我想要实现的是一个页面，该页面显示当前用户的设置，并允许用户编辑它们、取消他们的更改，或者如果他们愿意，可以保存并提交更改。我已经将我的标签和输入控件绑定到模型，以便当用户修改他们的电子邮件地址时，它会正确反映。

顺便说一下，我的工作基于这个例子#3：[http ://code.angularjs.org/1.0.0rc12/docs-1.0.0rc12/guide/forms](http://code.angularjs.org/1.0.0rc12/docs-1.0.0rc12/guide/forms)

我的问题与页面的默认值有关。由于模型在 Javascript 中被定义为对象。在上面的链接中，可以在此处设置默认值，`$scope.master= {};`其中工作正常，除了我使用框架生成静态页面而不是从我的服务器检索 json 对象。我的页面都是用嵌入式 scala 编写的，所以我访问了服务器端的值。将检索到的服务器端信息转换为 javascript 可以访问的对象客户端的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:15:38.867

你有几个选择。我这样做的方法是将初始状态（通过 WebSocket 或其他东西）作为 JSON 推送到 Angular，或者让 Angular 通过 HTTP 调用从服务器中提取它。

您也可以使用 ng-init 标签呈现页面以设置初始状态，但这种方式对我来说似乎很奇怪。

```
<div ng-controller="FormController" ng-init="formData = {}">
  <form>
     <input ng-model="formData.input1" ng-init="formData.input1 = 'initialValue'>
  </form>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:54:20.897

我正在使用 ASP.NET 和 Dapper-Dot-Net。我使用以下技术将我的数据放到页面上，然后进入 Angular 范围。它应该可以很好地转移到您的环境中。

1.  在服务器端的页面中定义一个 DataTransferObject 类和一个名为 DtoJson 的公共字符串来保存您的类实例的序列化版本。

    ```
    private class DataTransferObject{
      public User User;
      public List<Project> Projects
    }

    public string DtoJson;

    var dto=new DataTransferObject();
    var userName="however you get a username";
    dto.User=User.Get(userName);  // I already have a User class
    var sql="select * from projects where user_name=:UserName";
    var p=new DynamicParameters();
    p.Add(":UserId", dto.User.ID);
    dto.Projects=Project.Query<Project>(sql, p);  // returns a list of Project

    // I use json.net to convert the Dto to json and expose it as a public variable
    var DtoJson=Json.Convert(dto);  // approximate syntax but you get the idea 
    ```

2.  在客户端，我在页面顶部放置了一个脚本标签并将 DtoJson 注入其中以使其进入全局范围

    ```
    <script>var dto=<%=DtoJson%>;</script> 
    ```

3.  在我的页面底部我有一个脚本 src="pageName.js" 这是我的 Angular 控制器文件。在控制器里面我说

    ```
    $scope.dto=dto;
    console.log($scope.dto); 
    ```

4.  现在，在服务器端创建的 json 在我的控制器范围内，我可以将数据绑定到 {{dto.User.FIRST_NAME}} 和 {{dto.Projects[0].ID}} ng-repeat="for p在 dto.Projects 等

我希望这是有道理的。

彼得

# php - 如何在php生成的zip中排除文件

> ID：11024941
> 
> 赞同：4
> 
> 时间：2012-06-13T23:44:28.963
> 
> 标签：php, zip, zlib

我需要知道如何从 php 生成的 zip 中排除文件/文件夹。这是我的代码：

```
public function archiveBackup($name = '', $source = '', $destination = '') {
    if (!extension_loaded('zip') || !file_exists($source)) {
        return false;
    }
    $zip = new ZipArchive();
    if (!$zip->open($destination.$name, ZIPARCHIVE::CREATE)) {
        return false;
    }
    $source = str_replace('\\', '/', realpath($source));
    if (is_dir($source) === true) {
        $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($source), RecursiveIteratorIterator::SELF_FIRST);
        foreach ($files as $file) {
            $file = str_replace('\\', '/', realpath($file));
            if(is_dir($file) === true) {
                $zip->addEmptyDir(str_replace($source . '/', '', $file . '/'));
            }
            else if(is_file($file) === true) {
                $zip->addFromString(str_replace($source . '/', '', $file), file_get_contents($file));
            }       
        }
    }
    else if (is_file($source) === true) {
        $zip->addFromString(basename($source), file_get_contents($source));
    }
    $zip->close();
    return true;
} 
```

示例：我需要排除文件夹“themes”和“style.css”文件，该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:48:18.950

```
 $exclude = array('themes', 'style.css');

    foreach ($files as $file) {
      if (!in_array($file, $exclude)) {
        $file = str_replace('\\', '/', realpath($file));
        if(is_dir($file) === true) {
            $zip->addEmptyDir(str_replace($source . '/', '', $file . '/'));
        }
        else if(is_file($file) === true) {
            $zip->addFromString(str_replace($source . '/', '', $file), file_get_contents($file));
        }
      }
    } 
```

# php - 如何使用 facebook php SDK 进行批量请求

> ID：11024947
> 
> 赞同：1
> 
> 时间：2012-06-13T23:44:41.397
> 
> 标签：php, facebook, facebook-graph-api, batch-file

在我的项目中，我在一张表中有很多事件 ID。我想遍历这些 id 并向 facebook 请求该特定 id 的附加信息。

现在我为每个 ID 发出不同的 http 请求。我想把它放在一个批次中，这样我就可以传递所有的 id 并在一个 http 请求中接收所有这些事件的所有附加信息。

我使用 Facebook PHP sdk

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T01:06:44.593

这是一个批量执行两个请求的粗略示例...

```
$batch = array();

$req = array(
    'method'       => 'GET',
    'relative_url' => '/me'
);

$batch[] = json_encode($req);

$req = array(
    'method'       => 'GET',
    'relative_url' => '/me/albums'
);

$batch[] = json_encode($req);

$params = array(
    'batch' => '[' . implode(',',$batch) . ']'
);
try {
    $info = $facebook->api('/','POST',$params);
} catch(FacebookApiException $e) {
    error_log($e);
    $info = null;
}
if(!empty($info)){
    if($info[0]['code'] == '200'){
        $user_profile = json_decode($info[0]['body']);
    }
    if($info[1]['code'] == '200'){
        $user_albums  = json_decode($info[1]['body']);
    }
    echo "<pre>User Profile:\n";
    print_r($user_profile);
    echo "\nAlbums\n";
    print_r($user_albums);
    echo "<pre>";
} 
```

这是一个粗略的例子，但它应该提供执行批处理请求的基础知识......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T13:31:50.367

```
use Facebook\FacebookSession;
use Facebook\FacebookRequest;
use Facebook\GraphUser;
use Facebook\FacebookRequestException;

FacebookSession::setDefaultApplication('YOUR_APP_ID','YOUR_APP_SECRET');

// Use one of the helper classes to get a FacebookSession object.
//   FacebookRedirectLoginHelper
//   FacebookCanvasLoginHelper
//   FacebookJavaScriptLoginHelper
// or create a FacebookSession with a valid access token:
$session = new FacebookSession('access-token-here');

try {

  $response = (new FacebookRequest($session, 'GET', '/me'))->execute();

  $params = [
    [ // call 0 - get current logged in user
      "method"  => "GET",
      "relative_url"  => "me"
    ],

    [ // call 1 - get current logged in user's friends
      "method"  => "GET",
      "relative_url"  => "me/friends"
    ],

    [ // call 3 - get current logged in user's likes
      "method"  => "GET",
      "relative_url"  => "me/likes"
    ],

    [// call 4 - get current logged in user's albums and photos
      "method"  => "GET",
      "relative_url"  => "method/fql.multiquery/?queries=" . json_encode([
        "albums"  => urlencode("SELECT aid, object_id, type, name, visible, owner, cover_pid, cover_object_id, visible, photo_count, video_count FROM album WHERE owner=me()"),
        "album_covers"  => urlencode("SELECT src_big, src_small, images, aid FROM photo WHERE pid IN (SELECT cover_pid FROM #albums)"),
        "photos"  => urlencode("SELECT pid, object_id, owner, src_big, src_small, images, aid FROM photo WHERE aid IN (SELECT aid FROM #albums)")
      ])
    ];

  $response = (new FacebookRequest($session, 'POST', '?batch='.json_encode($params) ))->execute();

  $objects = $response->getGraphObject();

  foreach($objects->asArray() as $object){
    $body = json_decode($object->body, 1);
    print_r($body);
    echo "--------------\n";
  }

} catch(FacebookRequestException $e) {

  echo "Exception occured, code: " . $e->getCode();
  echo " with message: " . $e->getMessage();

} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-13T23:49:47.900

您可以像这样批量处理这些请求：

```
curl \
-F 'access_token=…' \
-F 'batch=[ \
        {"method": "GET", "relative_url": "me"}, \
        {"method": "GET", "relative_url": "me/friends?limit=50"} \
    ]'\
https://graph.facebook.com 
```

[https://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

批量大小限制为 50。

# c - 在 VisualDSP++ 中使用#ifdef _LANGUAGE_C 的目的是什么？

> ID：11024949
> 
> 赞同：1
> 
> 时间：2012-06-13T23:44:48.153
> 
> 标签：c, compiler-construction, embedded

我正在使用 VisualDSP++ v. 5.0 修改 Blackfin 处理器的一些代码。我注意到这个项目中的所有头文件都使用以下约定：

```
#ifdef _LANGUAGE_C

/* All of the code associated with this header file. */

#endif 
```

在搜索此编译器的文档后，我发现以下内容：

> _LANGUAGE_C - 始终定义为 1。

所以我的问题有两个。

1.  使用的目的是`#ifdef _LANGUAGE_C`什么？
2.  这难道不会阻止您的代码在可能没有定义宏的不同编译器上运行`_LANGUAGE_C`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:19:50.677

您必须查看它在上下文中的使用方式，但是我相信在这种情况下，它用于 C 代码和汇编器中使用的标头中，其中汇编器代码使用 C 预处理器。它允许 C 头文件包含在汇编代码中，并让预处理器删除 C 代码特定的元素。

例如，在汇编代码中具有与`#define ...`C 代码相同的常量宏值以避免重复和不一致是很有用的，但是例如`struct`定义或函数原型将毫无意义。

我可能希望：`#if defined(_LANGUAGE_C) || defined(_LANGUAGE_C_PLUS_PLUS)`，但如果文档说它总是被定义，那么在你的情况下，它可能是为 C 和 C++ 编译定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:51:07.403

要回答您的复合问题，大多数情况下答案是肯定的。这是一些预处理器指令的一部分，允许您使用相同的代码为不同的环境构建。例如，如果您查看 Windows 驱动程序工具包，您会发现这种约定在所有地方都被使用，以确保根据目标环境和编译器构建最有效的代码。我希望这是有帮助的。在#ifdef 之后可能会在其中添加代码，并在其中添加另一个用于 _LANGUAGE_CPP 的代码，并将 C++ 特定代码放在那里等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T05:35:24.453

它被称为编译常量，这个编译常量必须添加到你的构建环境中，你应该检查你的构建环境。它是告诉编译器它要编译的代码是用 C 特定的检查编译的，并将根据它生成输出文件（十六进制或二进制文件）。

# c - 在嵌入式设备中使用 ioperm() 与端口通信

> ID：11024950
> 
> 赞同：1
> 
> 时间：2012-06-13T23:44:50.793
> 
> 标签：c, linux, io, embedded, port

下面的代码有问题。我需要它来访问端口 0x300 到 0x307，所以我这样做：

```
#ifdef LINUX
if(ioperm(PORT1,9,1)==-1) printf("Error in ioperm()");
#endif 
```

其中 PORT1=0x300。

然后我这样做：

```
int j5inp(unsigned int addr){

#ifdef DOS
return inp(addr);
#endif
#ifdef LINUX
return inb(addr);
#endif
}

void j5outp(unsigned int addr, unsigned int val){

#ifdef DOS
    outp(addr,val);
#endif
#ifdef LINUX
    outb(val,addr);
#endif
}

/************/
hrd_check()
{
    j5outp(PCHECK,0xAA);
    if (j5inp(PCHECK)!=0xAA) return(0);
    j5outp(PCHECK,0x55);
    if (j5inp(PCHECK)!=0x55) return(0);

 return(1);
 } 
```

其中 PCHECK=0x307。

我对此进行了测试，发现在发送后我可以从端口检索值 0xAA，但是第二个（0x55）失败，因为 inb() 仍然返回 0xAA。

我做错什么了吗？这可能是硬件问题吗？我应该尝试为每次调用 inb() 调用 ioperm() 函数还是应该尝试使用 iopl() ？

顺便说一下，我使用的主板是研华 PCM-3342

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:47:44.137

好吧，我想这是那些简单地消失的问题之一。我相信我纠正了一个我确信与这个问题无关的小错误。但是当我这样做时，问题就消失了。

我会更好地描述我是如何解决它的，但我真的不知道我是怎么做到的。

# javascript - Backbone 中的同时 fetch() 失败

> ID：11024953
> 
> 赞同：2
> 
> 时间：2012-06-13T23:45:29.420
> 
> 标签：javascript, backbone.js, coffeescript

我正在尝试实现一些看起来对 Backbone 来说应该相对微不足道的东西，但它不起作用。我正在根据用户的操作用系列填充图表。代码如下。

假设用户快速添加了两个系列。或者一条路线同时触发两个系列。常量是在第一个返回之前触发第二次获取。在这种情况下，“fetching”被记录了两次，而“fetched”只被记录了一次。这是预期的行为，如果不是，我应该如何构建我的代码以使其工作？

```
# Series model
class Series extends Backbone.Model
    initialize: (options) ->
        _.bindAll @
        @endpoint = state?.getEndpoint()

    url: ->
        [localApiUrl, 'metrics', @endpoint, @.get('id')].join('/')

class SeriesCollection extends Backbone.Collection
    model: Series,

    initialize: ->
        _.bindAll @
        @bind 'add', @fetched

    fetchData: ( opts ) =>
        console.log('fetching')
        @series = new Series({ id: opts.id })
        @series.fetch
            success: (model, response) =>
                @.add({
                    id: @series.get('id')
                    name: @series.get('id')
                    data : @series.get('ts')
                    marker:
                        radius: 2
                    turboThreshold: 10000 
                    dataGrouping: 
                        enabled: false
                })

    fetched: () ->
        console.log('fetched', @) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T04:35:36.407

将重复模型添加到集合中没有任何作用；特别是，它不会触发`"add"`事件，因为不会添加任何内容。考虑一下：

```
# c is an empty collection
c.add(id: 1, t: 'where is')
c.add(id: 2, t: 'pancakes house?')
c.add(id: 1, t: 'different') 
```

这将生成两个事件，并且`"add"`集合最终将作为模型，第三个将被忽略。`(1, 'where is')``(2, 'pancakes house?')``add`

演示：http: [//jsfiddle.net/ambiguous/WUH6f/](http://jsfiddle.net/ambiguous/WUH6f/)

[0.9.2 更新日志](http://documentcloud.github.com/backbone/#changelog)有这样的说法：

> *   在将重复模型添加到集合时不会引发错误，Backbone 现在会静默地跳过它们。

因此，如果`fetchData`被调用两次，您将收到两次调用`console.log('fetching')`. 但是，如果`opts.id`对 的两个调用都相同`fetchData`，那么第二个`@add`将被忽略，因为`id == opts.id`集合中已经有一个模型。

* * *

你说`opts.id`每次都不一样，但这并不一定意味着`@series.get('id')`会有所不同。请记住，AJAX 中的A*代表**异步*，*因此*您可能会看到与此类似的一系列事件：

 **1.  有东西在呼唤`fetchData(id: 1)`。`@series.id`现在将是 1。
2.  进行 AJAX 调用。
3.  有东西在呼唤`fetchData(id: 2)`。`@series.id`现在将是 2。请记住，这`@series`是一个*实例变量*，而不是局部变量。
4.  服务器从第一个 AJAX 调用返回并`success`触发处理程序。`@series.id`现在是 2，将添加`Series`from **3 。**
5.  服务器从第二个 AJAX 调用返回并触发成功处理程序。`@series.id`仍然是 2，所以`Series`from **3**将再次添加。但是这个将是重复的，所以`add`会忽略你。

您应该能够通过对相关系列使用普通的旧局部变量而不是实例变量来解决此问题：

```
fetchData: ( opts ) =>
    console.log('fetching')
    series = new Series({ id: opts.id })
    series.fetch
        success: (model, response) =>
            @add(
                id: series.get('id')
                #...
            ) 
```

你不需要里面`.`，`@.add`所以我把它拿出来了。我还在`@add`通话中放下了大括号，因为您也不需要它们；你也可以去掉括号，但我把它们留在里面，因为我发现它们有助于澄清代码的块结构。

我应该首先发现这个问题，对不起。**

# php - jQuery $.get() 中多个字段中的一个返回“null”

> ID：11024954
> 
> 赞同：0
> 
> 时间：2012-06-13T23:45:37.190
> 
> 标签：php, jquery, get

出于某种原因，“价格”返回 null 而其他所有都不是问题。任何想法为什么会这样？

MySQL：

名为“nights”的表，列名为“name”、“price”、“day”、“queue jump”、“closures”和“doors”。他们都是人口稠密的。

事件信息.php：

```
<?php

header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

include('functions.php');
connect();

$night = $_POST['club'];
$night = mysql_real_escape_string($night);

$query = "SELECT * FROM nights WHERE name = '" .$night. "'";

    $result = mysql_query($query);
    $items = array();

    if($result && mysql_num_rows($result) > 0) { 
        while ($row = mysql_fetch_array($result)) { 
        $items[] = array("price"=>$row['price'], "day"=>getLongDateString($row['day']), "queuejump"=>$row['queue jump'], "closing"=>$row['closing']);
        }
    } 

    mysql_close(); 
    // convert into JSON format and print

    echo json_encode($items);
?> 
```

JS：

```
<script type="text/javascript">

    $(document).ready(function() {
            $('#right_inside').html('<h2>' + $('#club').val() + '</h2>');
    });

    $('#club').change(function(event) {
        $.ajax({
            type: "post",
            url: "eventinfo.php",
            data:  $(this).serialize(),
            success: function(data) {
                $('#right_inside').html('<h2>' + $('#club').val() + '<span style="font-size: 14px"> (' + data[0].day + ')</h2><p>Entry: ' + data[0].price + '</p><p>Queue jump: ' + data[0].queuejump + '</p><p>Guestlist closes at ' + data[0].closing + '</p>');
alert(JSON.stringify(data));
                },
            dataType: "json"
        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:24:55.750

设法解决了这个问题 - MySQL 不喜欢 £ 符号。`&pound;`或`&#163;`效果更好。

# javascript - jQuery - 获取可排序列表的索引

> ID：11024956
> 
> 赞同：1
> 
> 时间：2012-06-13T23:45:43.737
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

假设我有一个这样的可排序列表：

```
$(".song-list").sortable({
  handle : '.pos_handle',
  axis : 'y',
  opacity: 0.6,
  update : function () {
    var id = $(this).index();
    console.log("Moved to new position: " + id);
  }
}); 
```

当您移动列表时，它应该在控制台中更新为新位置。`.pos_handle`没有ID..只有班级。

我将如何获得它的新移动位置的索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:01:50.277

使用准备好的`ui`对象的`.item`属性来引用正在移动的当前元素：

```
update : function (event, ui) {
    console.log("Moved to new position: " + ui.item.index());
} 
```

[***小提琴***](http://jsfiddle.net/ult_combo/dfXHP/)

[jQuery UI 参考](http://jqueryui.com/demos/sortable/)

# maven - 将 antlib.xml 导出到 jar

> ID：11024963
> 
> 赞同：1
> 
> 时间：2012-06-13T23:46:14.613
> 
> 标签：maven, ant, jar, export

大家好，我想将我的 .jar 文件导出`antlib.xml`到我的 .jar 文件中，`maven`但我不知道该怎么做。有人可以引导我进入处理这个问题的正确方向。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T11:13:07.003

假设`antlib.xml`是您的 maven 项目中的一个文件，并且`my.jar`是该项目创建的工件，并且通过导出您的意思是您希望它`antlib.xml`在 jar 中可用，那么您可以通过将其放在`src/main/resources`项目的文件夹中来做到这一点。

# ruby-on-rails - Rails + PostgreSQL，正在根据 Rails 验证规则创建重复记录

> ID：11024965
> 
> 赞同：0
> 
> 时间：2012-06-13T23:46:36.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我有一个 list_users 模型，其中包含连接用户 w 列表的字段（id、list_id、user_id）。

在我的列表导轨模型中，我进行了以下验证以防止重复。

```
 validates_uniqueness_of :user_id, :scope => :list_id 
```

然而，时不时地在数据库的 list_users 表中创建重复记录，这最终会破坏很多东西......

```
=> [#<ListMember id: 37199, user_id: 1203713, list_id: 13651, created_at: "2012-06-04 20:02:11", updated_at: "2012-06-04 20:02:11">

=> [#<ListMember id: 37195, user_id: 1203713, list_id: 13651, created_at: "2012-06-04 20:01:40", updated_at: "2012-06-04 20:01:40"> 
```

有没有人见过这个？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T00:28:51.147

我对 Rails 部分无能为力，但您应该在数据库级别添加一个唯一索引：

```
ALTER TABLE list_users ADD UNIQUE (list_id, user_id) 
```

也许它会帮助您诊断 Rails 代码中的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T00:22:59.493

我以前见过这个。我不知道你的上下文是否相同，但我看到这个的原因基本上是我不小心在内存中构建了两个具有相同 id 对的记录，对它们两个运行验证，然后保存都到数据库。唯一性验证没有捕捉到这一点，因为在运行验证时数据库中不存在任何记录。也许这就是你正在经历的。

编辑：看到您的记录创建时间有多接近，我会说这很可能是这种情况。

此外，您应该将索引迁移到数据库`add_index :list_users, [:user_id, :list_id]`

# jquery - JQuery：如何在某些字符之间全部替换？

> ID：11024971
> 
> 赞同：1
> 
> 时间：2012-06-13T23:47:24.067
> 
> 标签：jquery, replace

我已经寻找了一个通用的解决方案，但只能找到人们特定问题的答案。

基本上，我想知道如何通常使用 .replace() 来替换字符串中任何类型的字符之间的项目，例如：

替换 abc 和 xyz 之间的所有文本，包括：`abc text to be replaced xyz`

或替换中间的所有文本，包括`<img and />`例如：`<img src="image.jpg" />`

任何人都可以帮助我或为我指出一个好的方向吗？

谢谢！如果我需要澄清更多，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T23:54:46.157

您要查找的内容称为正则表达式。有关更多信息，您可以访问以下网站： [http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

请注意，正则表达式并非特定于 JavaScript。

对于您的具体示例：

```
string.replace(/abc.+xyz/,"abc"+newString+"xyz"); 
```

. 表示任何字符，+ 表示出现一次或多次。

如果您有不止一个替换要做，请尝试：

```
string.replace(/abc.+?xyz/g,"abc"+newString+"xyz"); 
```

g 代表一般，而 ? 是惰性量词，这意味着它将在字符串中下一次出现 xyz 时停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T00:16:21.950

```
 String.prototype.replaceBetween = function(opentag, closetag, replacement) {
      var read_index = 0;
      var open_index = 0;
      var close_index = 0;
      var output = '';

      while ((open_index = this.indexOf(opentag, read_index)) != -1) {
        output += this.slice(read_index, open_index) + opentag;
        read_index = open_index + opentag.length;

        if ((close_index = this.indexOf(closetag, read_index)) != -1) {
          if (typeof replacement === 'function') {
            output += replacement(this.substring(open_index + opentag.length, close_index - 1)) + closetag;
          } else {
            output += replacement + closetag;
          }
          read_index = close_index + closetag.length;
        }
      }

      output += this.slice(read_index);

      return output
    };

    var mydiv = document.getElementById("mydiv");
    var html = mydiv.innerHTML;
    html = html.replaceBetween("<b>", "</b>", "hello");
    html = html.replaceBetween("<b>", "</b>", function(body) {
      return body + ' world';
    });
    mydiv.innerHTML = html;
```

```
<div id="mydiv">The begining...<b>for</b> and <b>bar</b>... the end.</div>
```

# date - 如何按日期字段+ Grails的月份创建分组标准

> ID：11024972
> 
> 赞同：2
> 
> 时间：2012-06-13T23:47:28.947
> 
> 标签：date, grails, groovy, group-by, hibernate-criteria

我想统计从今天到 365 天前按月分组的用户数。我正在将 groovy 与 Hibernate Criteria builder API 一起使用。有什么简单的方法来做这个分组吗？我们如何指定按月对日期字段进行分组的日期格式？

现在我有以下内容：

```
 def con_cnt =Users.createCriteria().list {
            like('employeeid','c_%')
            between('sunsetdate', fromDate, toDate)
            projections {
                count('employeeid')
                //groupProperty('sunsetdate')

            }
        } 
```

groupProperty('sunsetdate') 以日期为基础对其进行分组，甚至将时间包括在分组中.. 因此计数是针对非常独特的日期和时间计算的，这使得计数 1 与源表相同。我们如何使用这种方法在分组中指定日期格式？还是我必须使用 HQL？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:29:38.887

您可以[在此处](https://stackoverflow.com/questions/14083310/group-by-week-month-year-in-gorm)访问以获取更多详细信息

在域类中分别为周、月和年创建三个新的数字字段。这些字段不会映射到表中的列。为三个字段提供静态映射。

```
 static mapping = {

    week formula('WEEK(DATE_OF_EXPENSE)')    //provide the exact column name of the date field
    month formula('MONTH(DATE_OF_EXPENSE)')
    year formula ('YEAR(DATE_OF_EXPENSE)')

    }
    def results = c.list {
  between("dateOfExpense", fromDate, toDate) 
  projections {
    switch(groupBy){
        case "week":
           groupProperty('year')
           groupProperty('month')
           groupProperty('week') 
        break;
        case "month"
           groupProperty('year')
           groupProperty('month')
        break;
        case "year":
           groupProperty('year')
        break;
    }        
    sum('amount')
  }
} 
```

# php - 如何在php中对字符串进行求和？

> ID：11024977
> 
> 赞同：6
> 
> 时间：2012-06-13T23:47:52.493
> 
> 标签：php, arrays, string, sum

我有一个简单的问题：

我有这个变量：`$v = "24000,1500,1500,1500,1500,1500,";`

我想把这些数字加在一起。

我试过with和 so a `str_replace`，但没有奏效。`,``+``eval()`

我也试过`str_split()`，但它不知道在`,`.

也许如果以某种方式将其转换为数组并执行`array_sum`...

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T23:50:40.343

```
$sum = array_sum( explode( ',', $v ) ); 
```

它的作用是`$v`由分隔符分割，并将结果数组`,`与[`explode()`](http://www.php.net/explode)相加[`array_sum()`](http://www.php.net/array_sum)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T23:53:50.837

```
$v = "24000,1500,1500,1500,1500,1500,";
$result = 0;
foreach(explode(',',$v) as $val)
     $result +=intval($val);

echo $result;///31500 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:06:32.883

该`explode`功能最适合您的情况。`explode`它的作用是根据您指定的参数拆分字符串。您可以将其视为根据参数对字符串进行切片并将其放入数组中。

完成后，数组中有一堆数字。做个总和就行了。如果要确保都是数字，可以使用 is_numeric() 来确保。（：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T23:50:06.660

使用 str_getcsv 获取值的数组。然后循环遍历数组以对这些值求和。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-09-20T13:41:23.373

```
function get_sum()
{
    global $v;
    $temp=0;
    for($i=0;$i<strlen($v);$i++)
    {
        $temp+=intval($v[$i]);
    }
    echo $temp;
}

echo get_sum(); 
```

# ruby-on-rails - 一种形式的 2 个模型 - 如何将数据保存到相应的表中？

> ID：11024980
> 
> 赞同：0
> 
> 时间：2012-06-13T23:47:55.037
> 
> 标签：ruby-on-rails, nested-forms, fields-for

我有这个更新数据的动作：

```
 def edit
    @project = Project.find(params[:id])
    if @project.team
      @team = Team.find(@project.id)
    else
      @team = Team.new
    end
  end 
```

形式：

```
= form_for @project do |f|
  ...
  = f.fields_for @team do |t|
  #if I use following: = f.fields_for :team do |t|, then the form inputs in this form are not displayed
    ...
  end

end 
```

楷模：

```
class Project < ActiveRecord::Base
  has_one :team
  accepts_nested_attributes_for :team
end

class Team < ActiveRecord::Base
  belongs_to :project
end 
```

当我尝试发送表单时，我收到以下错误消息

```
Team(#2501295380) expected, got ActiveSupport::HashWithIndifferentAccess(#2157764620) 
```

我在 SO 上找到了类似的帖子，但没有人帮助我解决这个问题，这就是为什么我会非常感谢每一个建议。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:57:19.353

这正在解决我的问题：

```
 def edit
    @project = Project.find(params[:id])
    unless @project.team.nil?
      @project.team
    else
      @project.build_team
    end  
  end 
```

# jquery - jquery 只能在 chrome 中离线工作，完全不能在线

> ID：11024983
> 
> 赞同：0
> 
> 时间：2012-06-13T23:48:23.147
> 
> 标签：jquery, html, css, firefox, google-chrome

我还是 jquery 的新手，可以在这里使用一些帮助 :-) 当我在 Chrome 中离线时，此代码有效，一旦我尝试在 IE9 或 Firefox 中使用它，它将无法工作。所以我**上传**了该网站，现在它甚至无法在 Chrome 中运行。

我在 Firefox 和 IE 中收到一条错误消息，告诉我“未定义事件”第 8 行 --> event.preventDefault();

会是什么？错误的链接？在 html 中，它们是这样添加的：

问题解决了这条线解决了问题：

```
 $('.hidden_nav ul li a').click(function(event){
                event.preventDefault(); 
```

这是函数（事件）。我留下了一个空函数（）

谢谢大家

```
$(document).ready(function(){
        //Get size of docuement and apply to div grid

        var height = $(document).height();
        $('.theGrid').css('height',height);

        // Slide Down hidden Content
        $('.hidden_nav li a').click(function(){
                event.preventDefault();
                var selected = $(this).text().toLowerCase();
                var thisone = $('#'+ selected);

                $('.hidden_content').slideDown(200);
                thisone.slideDown(200);
                thisone.addClass('online')
                $('.bubble').fadeIn(100).delay(2000).hide(300);

            });

            $('.close_btn').click(function(){
                $('.hidden_content').slideUp(200);
                $('.online').hide().removeClass('.online');
                $('.bubble').hide();

            });

        //Design Process // a few $ animations
        $('.step_img').mouseover(function(){
            var sel = $(this).next('h4').text().toLowerCase();
                thisone = $('#' + sel);
                thisone.children('p').slideDown(100);
        });
       $('.step_img').mouseout(function(){
            var sel = $(this).next('h4').text().toLowerCase();
                thisone = $('#' + sel);
                thisone.children('p').delay(1000).slideUp(400);
        });

        // Slider  (Nivo Slider Plugin) effects
         $('.slider').nivoSlider({
                effect:'random',
                startSlide:2,
                directionNav: true,
                pauseOnHover: true,
                pauseTime: 6000,
            });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:26:46.547

仔细检查您的文件是否正确加载了 jquery 库。如果您在本地使用相对路径，请确保它们在服务器上相同。

# javascript - mouseUp 而不是点击触发点击

> ID：11024985
> 
> 赞同：0
> 
> 时间：2012-06-13T23:48:58.107
> 
> 标签：javascript, jquery, google-chrome, debugging, jquery-events

我的 jQuery 文件上传插件不愿意对某些列出的文件执行删除操作。

问题是当我单击 delete 时`<button>`，不会触发委托事件。

我一直在尝试使用用于 JS 调试的 Chrome 可视化工具对其进行调试，并且偶然发现了一个线索。在一个有效的插件页面演示中，该`click`事件绑定在一个按钮元素上：

![在此处输入图像描述](../Images/5f42388a4f8700b06104564260edb21b.png)

但在我的情况下，即使“委托”代码是完全一样的，我有 tbody.file “监听”`button`事件，而不是`click`：

![在此处输入图像描述](../Images/722c6d8b6f8eb1ee8e37b0f1b2f97bd8.png)

为什么在一种情况下，`click`偶数与事件相关联，而在另一种情况下 -`button`事件。到底什么是`button`事件？

附加信息：

进行事件委托的插件是[jQuery-File-Upload](http://blueimp.github.com/jQuery-File-Upload/)，在这两种情况下绑定事件的代码是：

```
_initEventHandlers: function () {
            parentWidget.prototype._initEventHandlers.call(this);
            var eventData = {fileupload: this};
            this.options.filesContainer
                .delegate(
                    '.start button',
                    'click.' + this.options.namespace,
                    eventData,
                    this._startHandler
                )
                .delegate(
                    '.cancel button',
                    'click.' + this.options.namespace,
                    eventData,
                    this._cancelHandler
                )
                .delegate(
                    '.delete button',
                    'click.' + this.options.namespace,
                    eventData,
                    this._deleteHandler
                );
            this._initButtonBarEventHandlers();
        }, 
```

的值`this.options.namespace`在工作和问题场景中都是 'fileupload'。

当我暂停 JS 执行并单击按钮时，我看到`mouseup`事件 get 被调用，而不是单击，并且目标是`document`. 事件源是`button`元素内的跨度。

# restsharp - 是否可以扩展 Asana 的工作空间/ /projects 包括 created_at?

> ID：11024990
> 
> 赞同：0
> 
> 时间：2012-06-13T23:49:27.700
> 
> 标签：restsharp, asana

我似乎无法找到实现它的神奇按键。如果这会有所不同，我会在 .NET 应用程序中使用 RestSharp，但我现在很高兴知道它是否可能。如果没有，如果需要，我总是可以一次提取每个项目的确切细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:10:27.333

（我在 Asana 工作）

默认情况下，从查询返回的子对象和对象以紧凑的形式返回，这通常意味着名称和 id。您可以使用`opt_fields`查询选项指定所需的字段。有关更多信息，请参阅[https://asana.com/developers/documentation/getting-started/input-output-options](https://asana.com/developers/documentation/getting-started/input-output-options)。

在您的情况下，请尝试添加查询参数`opt_fields=created_at`。

# python - 在cmd中运行Python

> ID：11024993
> 
> 赞同：10
> 
> 时间：2012-06-13T23:49:41.427
> 
> 标签：python, windows-7, path, cmd, python-2.7

我正在运行 python 2.7，打开`*.py`文件时可以正常运行程序。

但是当我去cmd并输入“ `python *.py any other args`”时，它不起作用，它说python无法识别。这很难，因为我正在尝试做类似的事情`sys.argv[]`，任何帮助都很棒。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T23:51:20.570

您的`PATH`. [PATH 变量](http://en.wikipedia.org/wiki/PATH_%28variable%29)告诉命令解释器在哪里可以找到您发出的命令。

如果您使用的是**Unix/Linux**系统，请尝试

```
/usr/bin/python 
```

在**Windows**下它可能会有所不同，因此请找到 Python（`python.exe`特别是）的安装位置并指定完整路径以运行命令。我认为这会起作用：

`c:\Python27\python.exe`

在**Unix**下，在提示符下发出这个命令：

```
/usr/bin/python myprog.py  arg1 arg2 
```

在**Windows**下：

```
c:\Python27\python.exe myprog.py arg1 arg2 
```

它应该运行。

长期的解决方案是将 Python 目录添加到 PATH 变量中。

由于您使用的是 Windows，因此[如何将 python.exe 添加到 Windows PATH](http://code.google.com/p/tryton/wiki/AddingPythonToWindowsPath)可能会有所帮助。或[此页面专门针对 Windows 7](http://www.computerhope.com/issues/ch000549.htm#0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-06T09:34:23.213

我希望，你的问题真的是我认为的问题，因为我（希望）有同样的问题。我很确定，Levon 的回答是正确的，所以这是 n00b 解决方案。为了让 CMD 识别“python”，您需要在环境变量“Path”中添加一些内容。完成指令后，您可以在 cmd 中键入“echo %PATH%”，它应该会显示您刚刚更改的变量值。

1.  转到计算机 > 系统属性 > 高级设置 > 环境变量
2.  单击变量“Path”并将 ;C:\Python27 添加到变量值。不要忘记“;” 将值分开。
3.  在两个窗口中点击 OK 确认，您就完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-18T06:12:41.060

您可以通过创建 bat 文件内容来解决此问题：

```
cd %USERPROFILE%\AppData\Local\Programs\Python\Python37-32
cls
.\python 
```

然后，您将**C:\Windows\System32**保存为 python.bat

# python - 即使在其中的命令退出后仍继续 for 循环

> ID：11024995
> 
> 赞同：0
> 
> 时间：2012-06-13T23:49:52.117
> 
> 标签：python, linux, shell

我在 for 循环中运行命令（测试用例）。当测试用例中的测试步骤失败时，它会中止其余的测试步骤并退出。因此，我的 for 循环也中途退出。我无法控制测试的行为方式，但我想继续为其余测试用例运行 for 循环。我怎样才能做到这一点？截至目前，我没有用于运行测试的命令的返回值。

更新：大家好，谢谢大家的回复。对不起，我应该早点发布我的代码。在这里......我写成shell脚本：

```
for file in `ls *.xml`; do
  testrunner.sh -j -a -f"output" $file
done 
```

我会尝试大家发布的建议并发表我的评论。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:29:05.933

常见的出口是什么意思？如果你的意思是它会抛出一个异常，你可能会使用`continue`inside`try`和`except`block 来使 for 循环在异常之后继续运行。

例子：

```
for i in range(1,10):
  print i
  try:
    if i == 4:
      raise NameError
  except NameError:
    continue 
```

此代码将打印出 1 到 9，即使在`i=4`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:17:19.803

可能失败的测试引发了异常。您需要了解异常是如何工作的，并`try:`在测试代码周围放置一个块以捕获异常并允许脚本继续运行。

这是您可以学习的网页：[http ://www.penzilla.net/tutorials/python/exceptions/](http://www.penzilla.net/tutorials/python/exceptions/)