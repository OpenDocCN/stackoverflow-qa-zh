# StackOverflow 问答 12314000-12314999

# asp.net - .net 3.5 中的 Facebook 客户端示例

> ID：12314001
> 
> 赞同：0
> 
> 时间：2012-09-07T07:55:51.343
> 
> 标签：asp.net, facebook

> **可能重复：**
> [Facebook C# SDK ASP.Net 3.5 示例](https://stackoverflow.com/questions/9017532/facebook-c-sharp-sdk-asp-net-3-5-examples)

以下代码在 .net 4.0 上运行良好，但我需要在 .net 3.5 服务器上更新此代码。

```
var fb = new FacebookClient(FbAccessToken);
dynamic friends = fb.Query("SELECT uid, name, pic_square,birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())");
string strFriends = "";
foreach (dynamic friend in friends)
{
    string Fbday = friend["birthday_date"];
    // do something
} 
```

在 .net 3.5 上更新此代码时，动态出现错误，我知道 dynamic 关键字将适用于 .net 4.0 及更高版本。但我需要将其转换为 .net 3.5。任何人都可以帮助我了解如何在 .net 3.5 中执行此操作吗？

# jsf - 如何在JSF中获取上传的文件路径

> ID：12314003
> 
> 赞同：0
> 
> 时间：2012-09-07T07:55:59.287
> 
> 标签：jsf, file-upload, richfaces

我正在导入 Excel 文档以在 UI 中阅读和显示内容。我需要知道如何获取使用浏览上传的文件的路径，以便读取 excel 文件的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:58:30.110

> *我需要知道如何获取使用浏览上传的文件的路径，以便读取 excel 文件的内容。*

这里有一个重大的思维错误。

想象一下，我是想要上传文件的客户端，而您是需要获取文件内容的服务器。我给你路径`c:\path\to\foo.xls`作为唯一的信息。作为服务器，您将如何*获得*其内容？您是否与我的本地硬盘文件系统建立了开放的 TCP/IP 连接？真的吗？拥有所有敏感信息的其他人的本地磁盘文件系统真的那么容易通过 Internet 访问吗？

这不是上传文件的工作方式。这只有在服务器与客户端在物理上运行在同一台机器上时才有效，这样您就可以使用`FileInputStream`该路径（这只发生在本地开发环境中）。

相反，您应该对客户端与 HTTP 请求正文一起发送给您的唯一文件**内容感兴趣。**在 HTML 术语中，您可以使用`<input type="file">`它。但在即将到来的 JSF 2.2 之前，还没有与之等效的标准 JSF`<h:xxx>`组件。您需要寻找为此提供组件的 JSF 组件库。在您的情况下，使用 RichFaces（如您的问题中标记的那样），您可以使用`<rich:fileUpload>`它。目前尚不清楚您使用的是哪个 RichFaces 版本，但对于 RF 3.3.3，您可以在[3.3.3 展示站点](http://livedemo.exadel.com/richfaces-demo/richfaces/fileUpload.jsf?c=fileUpload&tab=usage)中找到完整示例，对于 RF 4.0，您可以在[4.0 展示站点](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=fileUpload&skin=blueSky)中找到。

无论您选择哪种方式，您都应该在您的 JSF 托管 bean 中最终以 a`byte[]`或 a`InputStream`表示文件内容。然后，您可以自由地将其存储在服务器的本地磁盘文件系统上的任何位置，例如`FileOutputStream`. 您甚至可以直接将它提供给您正在使用的任何 Excel API，它们中的大多数只有一个采用`InputStream`or的方法`byte[]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:05:29.297

你最好看看这篇文章。BalusC使用 Tomahawk 2.0 ( [http://myfaces.apache.org/tomahawk-project/tomahawk20/index.html ) 的解决方案很棒](http://myfaces.apache.org/tomahawk-project/tomahawk20/index.html)

[JSF 2.0 文件上传](https://stackoverflow.com/questions/5418292/jsf-2-0-file-upload)

你需要的一切都在那里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:18:26.470

```
String fileName = FilenameUtils.getName(uploadedFile.getName());
byte[] bytes = uploadedFile.getBytes();
FileOutputStream outputStream = null;
try {
    String filePath = System.getProperty("java.io.tmpdir") + "" + fileName;
     outputStream = new FileOutputStream(new File(filePath));
     outputStream.write(bytes);
     outputStream.close();
     readExcelFile(filePath);
} catch (Exception ex) {

}
In the above code Iam uploading the file using tomahawk after uploading storing the      file in a temporary location.And from there i will be reading using  poi.                                                                                           
public static void readExcelFile(String fileName)
{ 
    try{
      FileInputStream myInput = new FileInputStream(fileName);
       POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);
       org.apache.poi.ss.usermodel.Workbook workbook = WorkbookFactory.create(myFileSystem);
        org.apache.poi.ss.usermodel.Sheet sheet  = workbook.getSheetAt(0); 
         Iterator rowIter = sheet.rowIterator();  
          for(Row row : sheet) {
          //u can read the file contents by iterating.
          }
    } catch (Exception ex) {

    }

} 
```

# solr - 如何在 Solr 的有限字段中搜索关键字？

> ID：12314007
> 
> 赞同：2
> 
> 时间：2012-09-07T07:56:25.520
> 
> 标签：solr, solrnet

我正在开发基于 ASP.NET MVC3 C# 的电子商务网站。我已经在其中实现了 SolrNet。有两个字段，例如 "CategoryId" 和 "ProductName" 。我想在特定的 CategoryID 中搜索关键字。请注意，产品映射在多个类别中。所以基本上我试图通过以下查询使用 solr admin 进行搜索，但没有得到确切的结果。

```
(CategoryID:26 AND Name:Gigabyte) OR (CategoryID:118 AND Name:Gigabyte) OR (CategoryID:121 AND Name:Gigabyte) 
```

查询有什么问题？如果我想在有限的类别中搜索相同的产品名称，会查询什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:50:21.757

在您给出的示例中，我将利用 Solr 中的[过滤器查询](http://wiki.apache.org/solr/CommonQueryParameters#fq)来限制 CategoryID 的结果。因此，在 Solr Admin 页面中，单击“Make a Query”部分下的 Full Interface 链接并输入以下内容：

> 请求参数：`Name:Gigabyte`
> 
> 过滤查询：`(CategoryId:26 OR CategoryId:118 OR CategoryId:121)`

您可以通过以下方式从 SolrNet 执行相同的操作：

```
 ISolrOperations<Item> solr = ...
 var items = solr.Query(new SolrQueryByField("name","Gigabyte", new QueryOptions {
        FilterQueries = new ISolrQuery[] {
                new SolrQueryByField("CategoryID", 26),
                new SolrQueryByField("CategoryID", 118),
                new SolrQueryByField("CategoryID", 121),
        }
 }); 
```

# c++ - 类中的链表，应通过类中的函数调用

> ID：12314009
> 
> 赞同：0
> 
> 时间：2012-09-07T07:56:42.743
> 
> 标签：c++, linked-list

这是头文件

```
class sv1{
private:
  struct Node{
          string title;
          Node* next;
              };
public:
void InsertAfter(Node **head, string title);
void getMetadata(string t);
void q_folder(string t_q); 
```

这就是cc文件的样子

```
void sv1::getMetadata(string t)
{
Node *head=NULL;
title=t;
q_folder(title);
}
void sv1::q-folder(string t_q)
{
InsertAfter(&head,t_q);
}
void sv1::insertAfter(Node **head,string title)
{
if (head==NULL)
{
Node* temp=NULL;
temp=new Node;
temp->title=title;
*head=temp;
}
else{
Node *temp= new Node;
temp= new Node;
temp->title=title;
temp->next=(*head)->next;
(*head)->=temp;

}
} 
```

该错误表示未在函数 q_folder 中声明头。是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:59:56.813

在您的方法 q-folder 中，您使用“&head”调用 insertAfter。在任何类方法中可以识别 head 的唯一方法是，如果它是

1.  当地的
2.  范围
3.  类成员（继承或其他）
4.  全球（但是，认为这是一个禁忌）

看它怎么都不是这三个，它不知道你说的“&head”是什么意思。另外，正如提到的 hmjd 更正，您声明的方法都没有被标记为属于该类。您将它们编写为独立于任何类的独立方法。为了表明它们属于类 sv1，您需要在方法名称的开头添加“sv1::”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:41:19.397

我认为你追求的是错误的模式。为什么你在类的私有部分定义节点结构！？通常的模式是您必须为 Node 和 LinkedList 本身分离类。请创建另一个封装您的节点的类。您也可以使用模板来实现它以支持不同的数据类型。

也是`head`一个内部变量。您不应该接受它作为函数参数。这不是面向对象的，因为您的链表（如果有效）不一致，并且所有定义变量都可以更改。您需要`head`将 LinkedList 设为私有。在这里你可以找到一些例子：

[简单的 C/C++ 链表](https://stackoverflow.com/questions/1095954/simple-c-linked-list)

[如何使用 C/C++ 创建链表](http://www.codeproject.com/Articles/24684/How-to-create-Linked-list-using-C-C)

# c++ - Lua 5.2 重定向打印功能

> ID：12314010
> 
> 赞同：2
> 
> 时间：2012-09-07T07:56:44.560
> 
> 标签：c++, c, lua, lua-5.2

> **可能重复：**
> [为嵌入式 Lua 重定向/重新定义 print()](https://stackoverflow.com/questions/4508119/redirecting-redefining-print-for-embedded-lua)

我是 Lua 的新手，很困惑。我见过[这个](https://stackoverflow.com/questions/4508119/redirecting-redefining-print-for-embedded-lua)，但我不确定它是否适用于 5.2。

我已经阅读了 _ENV table(?) 但再次不确定这是否与它有关。

那么问题来了：我如何在 C/C++ 中重定向 Lua 5.2 的内置打印函数来调用我自己的 C/C++ 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:49:01.153

来自[Lua 5.2 手册](http://www.lua.org/manual/5.2/manual.html)：

```
Lua keeps a distinguished environment called the global environment.
This value is kept at a special index in the C registry (see §4.5).
In Lua, the variable _G is initialized with this same value. 
```

因此，如果您将呼叫替换为呼叫，则[您链接的问题的这个答案](https://stackoverflow.com/a/4514193/1151654)将起作用。`luaL_register``luaL_setfuncs`

# android - ICS Sony Xperia 中频繁出现 SocketTimeoutException

> ID：12314016
> 
> 赞同：1
> 
> 时间：2012-09-07T07:57:17.163
> 
> 标签：android

我创建的应用程序在 Xperia Active 和 Xperia SX 中经常引发异常。（有 ICS 4.0.4 设备）。

```
09-07 13:11:56.755: W/System.err(2012): Caused by: java.net.SocketTimeoutException
09-07 13:11:56.765: W/System.err(2012):           at java.net.PlainSocketImpl.read(PlainSocketImpl.java:491)
09-07 13:11:56.765: W/System.err(2012):           at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
09-07 13:11:56.765: W/System.err(2012):           at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
09-07 13:11:56.765: W/System.err(2012):           at java.io.InputStream.read(InputStream.java:163)
09-07 13:11:56.765: W/System.err(2012):           at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:142)
09-07 13:11:56.765: W/System.err(2012):           at java.io.BufferedInputStream.read(BufferedInputStream.java:227)
09-07 13:11:56.765: W/System.err(2012):           at libcore.io.Streams.readAsciiLine(Streams.java:201)
09-07 13:11:56.765: W/System.err(2012):           at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:544)
09-07 13:11:56.775: W/System.err(2012):           at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:791)
09-07 13:11:56.775: W/System.err(2012):           at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
09-07 13:11:56.775: W/System.err(2012):           at libcore.net.http.HttpURLConnectionImpl.getResponseMessage(HttpURLConnectionImpl.java:475) 
```

* * *

[该应用程序使用HttpURLConnection](http://developer.android.com/intl/ja/reference/java/net/HttpURLConnection.html)非常简单。

```
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
try {
    urlConnection.setDoOutput(true);
    urlConnection.setChunkedStreamingMode(0);
    urlConnection.setRequestMethod("POST");
    urlConnection.connect();
    String responseMessage = urlConnection.getResponseMessage();
    int responseCode = urlConnection.getResponseCode();
    final String contentType = connection.getContentType();
    InputStream in = new BufferedInputStream(urlConnection.getInputStream());
    readStream(in);
    in.close;
} catch (Exception e) {
    e.printStackTrace();
} finally {
    urlConnection.disconnect();
} 
```

您不能在其他供应商的 ICS 设备上发生异常。我不认为是应用程序的问题。有没有解决方法或什么？

# oracle - Oracle Query 获取当前用户具有读取权限的表列表

> ID：12314021
> 
> 赞同：10
> 
> 时间：2012-09-07T07:57:30.747
> 
> 标签：oracle

如何查询 Oracle 数据库以列出当前用户具有读取权限的表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T08:06:15.610

`user_tables`是用户的表。对于用户可以读取的所有表：

```
select * from all_tables; 
```

# actionscript-3 - Box2D Flash 将一个物体移动到另一个物体

> ID：12314024
> 
> 赞同：1
> 
> 时间：2012-09-07T07:57:40.310
> 
> 标签：actionscript-3, flash, box2d

我正在编写一个儿童学习游戏，您可以在物理中移动字母块并将它们卡入正确的位置。

我有 3 个静态传感器，它们工作得很好，当另一个盒子碰到它们时，我可以在那个实例上运行代码，但是对于我的生活，我无法让移动的盒子占据传感器的位置。

3天我尝试了不同的方法，设置转换。

我需要做的就是将一个动态框移动到与传感器完全相同的位置。

我以为这很容易，但它让我很头疼......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:17:45.620

我有类似的问题，我发现[这个](http://www.kerp.net/box2d/)页面有很多很好的教程，当我学习 box2d 时......也许第 2.25 和 2.26 课指出了你想要的东西。

祝你好运

# javascript - 我有多个复选框，并想为其中 2 个制定规则，以便如果我选择 1，则无法选择另一个

> ID：12314028
> 
> 赞同：4
> 
> 时间：2012-09-07T07:58:26.220
> 
> 标签：javascript, jquery, html, css

```
​&lt;form>
    <label for="1">Text 1</label>
        <input type="checkbox" name="1" value="something1" id="1"><br>
    <label for="2">Text 2</label>
        <input type="checkbox" name="2" value="something2" id="2"><br>
    <label for="3">Text 3</label>
        <input type="checkbox" name="3" value="something3" id="3"><br>
    <label for="4">Text 4</label>
        <input type="checkbox" name="4" value="something4" id="4">
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这些是复选框，我试图在互联网上搜索并没有找到任何东西。

我想允许用户检查 id 3 和 4**但** 如果他检查 1 ，则 2 不可检查，或者如果他检查 2 则 1 不可检查。并为不可用添加一个类..命名.. `grade-out{ color: #DDD;}`

希望你明白这个问题。提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:09:04.423

我会`data-groupid`在您的复选框中添加属性以识别它们属于哪个组。然后向属于组的复选框添加一个单击处理程序，这将在选中时禁用同一组中的所有其他复选框，并在未选中时启用它们。

假设您的标记是一致的并且标签始终是各个复选框的前身，您可以使用该`prev()`方法轻松定位它们。

```
$('input:checkbox[data-group]').click(function() {

    var groupid = $(this).data('group');
    var checked = $(this).is(':checked');

    if(checked) {

        $('input:checkbox[data-group=' + groupid + ']').not($(this))
           .attr('disabled', 'disabled')
           .prev().addClass('grade-out');

    } else {

        $('input:checkbox[data-group=' + groupid + ']')
           .removeAttr('disabled')
           .prev().removeClass('grade-out');

    }

}); 
```

[演示](http://jsfiddle.net/PRXcR/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:05:01.710

您可以使用单选表单输入。无论如何，如果必须使用复选框，那么您可以使用一些 javascript（例如，使用 jQuery）

```
$('#1,#2').click(function(){
    var $this = $(this);
    var theOtherId = $this.attr('id') == 1 ? 2 : 1;
    var theOtherOne = $('#'+theOtherId);
    if( $this.is(':checked') ) theOtherOne.attr('checked',false);
}); 
```

这是你要找的吗？

重新设计的示例：[演示小提琴](http://jsfiddle.net/taQCE/1/)

```
$('#1,#2').click(function(){
    var $this = $(this);
    var theOtherId = $this.attr('id') == 1 ? 2 : 1;
    var theOtherOne = $('#'+theOtherId);
    if( $this.is(':checked') ) theOtherOne.attr('disabled',true);
    else theOtherOne.attr('disabled',false);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:11:27.693

我会分配一个属性`data-disable`来禁用某些元素并检查`onchange`.

我会这样做：

```
<form>
    <label for="1">Text 1</label>
        <input type="checkbox" name="1" value="something1" id="1" data-disable="2,3"><br>
    <label for="2">Text 2</label>
        <input type="checkbox" name="2" value="something2" id="2" data-disable="1"><br>
    <label for="3">Text 3</label>
        <input type="checkbox" name="3" value="something3" id="3"><br>
    <label for="4">Text 4</label>
        <input type="checkbox" name="4" value="something4" id="4">
</form>​​​ 
```

和脚本：

```
$('input:checkbox​​​​​​​​​​​​​​​​​​')​.on('change', function(){
    var toUncheck = $(this).attr('data-disable');
    var self = $(this);
        $.each(toUncheck.split(','), function(el, val){
            if(self.attr('checked') == 'checked'){
                $('#'+val).attr('disabled', 'disabled');
            } else {
                $('#'+val).removeAttr('disabled');
            }
        });
});​ 
```

[JSFiddle 演示](http://jsfiddle.net/x9anV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T08:14:42.790

1.  用于`$("#element_id").hide();`禁用复选框

2.  用于`$("#element_id").attr("checked", true);`检查复选框是否被选中

3.  用于`$("#element_id").addclass();`向元素添加类，因此只需搜索 jQuery 选择器，您就会找到解决方案

更多信息请访问[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)我希望我帮助照顾

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T09:10:41.710

虽然上面有更复杂和灵活的解决方案，但如果您希望获得可靠但清晰的使用示例，请查看此。使用 id 让事情变得更容易。

[http://jsfiddle.net/erdincgc/uMhbs/1/](http://jsfiddle.net/erdincgc/uMhbs/1/)

HTML（添加类和 id）；

```
<form>
    <label for="1">Text 1</label>
        <input class="checks" type="checkbox"  id="option1"   name="option1"  value="something1" id="1"><br>
    <label for="2">Text 2</label>
        <input class="checks" type="checkbox"  id="option2"   name="option2" value="something2" id="2"><br>
    <label for="3">Text 3</label>
        <input class="checks" type="checkbox"  id="option3"   name="option3" value="something3" id="3"><br>
    <label for="4">Text 4</label>
        <input class="checks" type="checkbox"  id="option4"   name="option4" value="something4" id="4">
</form> 
```

和 JS

```
$('.checks').click(function(){
   op1 = $('#option1') ; 
   op2 = $('#option2') ;
   this_id = $(this).attr("id") ;
   this_state = $(this).attr("checked");

if(this_id =="option1"){
    if( this_state == "checked" ){
        op2.attr("disabled",true);            
    }
    else {
        op2.attr("disabled",false);
    }
    op2.prev().toggleClass('disabled'); 
} 

if(this_id=="option2"){
    if( this_state=="checked" ) 
        op1.attr("disabled",true); 
    else {
            op1.attr("disabled",false);
        }
        op1.prev().toggleClass('disabled');  
    }
}); 
```

# javascript - extjs 中的 mon() 和 on() 有什么区别？

> ID：12314033
> 
> 赞同：3
> 
> 时间：2012-09-07T07:58:36.643
> 
> 标签：javascript, extjs

谁能解释一下ExtJS`mon()`和in 的区别？`on()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T08:12:56.823

好吧，如果你想避免内存泄漏，那么你可以使用**mon**而不是**on**来绑定事件。例如：

```
var p = new Ext.Panel({
     renderTo:Ext.getBody()
    ,title:'Panel with a listener on the body'
    ,beforeDestroy:function() {
        this.body.un('click', handler);
    }
}); 
```

如果您将侦听器添加为内联函数，例如：

```
p.on('click', function() {alert('You clicked my body')}); 
```

那么就不可能有**选择地**删除这个监听器。但是，如果你使用**mon**，那么在面板销毁时，ExtJs 会自动删除监听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:01:27.323

**mon** - 将侦听器添加到任何 Observable 对象（或 Ext.Element），当该组件被销毁时，这些对象会自动删除。

**on** - 将事件处理程序附加到可观察对象

看：

[http://docs.sencha.com/ext-js/4-2/#!/api/Ext-method-on](http://docs.sencha.com/ext-js/4-2/#!/api/Ext-method-on)

[http://docs.sencha.com/ext-js/4-2/#!/api/Ext.util.Observable-method-mon](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.util.Observable-method-mon)

# html - 如何在离线单页应用程序中包含 HTML

> ID：12314036
> 
> 赞同：1
> 
> 时间：2012-09-07T07:58:44.770
> 
> 标签：html, include, offlineapps, singlepage, single-page-application

我正在构建一个离线单页应用程序，它使用模板来呈现 HTML。

该应用程序变得越来越大，并且由于我将从现在开始与其他开发人员一起工作，我想知道是否存在包含 HTML 的东西。

单页太长了，如果我们可以将 index.html 的 4000 行代码拆分为 9 页，其中包含 8 页，在 index.html 中包含 8 行，将不胜感激。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:04:24.530

我为此使用了[require.js 文本插件](https://github.com/requirejs/text)。

```
require(["text!../../Templates/template.htm"], function (template) {
    mustache.render(template, {prop: "value"});
}); 
```

小胡子显然只是一个例子。我想您也可以通过 $.get 获取模板，但由于我已经使用 require 这对我来说很有意义。

# php - 操作数据的最佳实践

> ID：12314037
> 
> 赞同：1
> 
> 时间：2012-09-07T07:58:46.540
> 
> 标签：php, javascript, json, standards, data-manipulation

我有一些 JavaScript 执行来自服务器的 ajax 请求，该请求将返回 JSON 数据。尽管此数据是 JSON，但它不正确，因为脚本要求数据基于数组且不包含对象。

一位同事建议使用客户端解决方案，通过重新创建 JSON 数据，将基于对象的 JSON 转换为基于数组的 JSON。

我觉得它应该更像是服务器端，因为我觉得您永远不应该依赖客户端浏览器来进行此类过滤？做这样的数据结构操作不是服务器的工作吗？

（我的意思是服务器端 - 在从 AJAX 请求接收数据之前，在客户端做同样的事情，但在 PHP 中）

这样做的最佳做法是什么，如果可能的话，解释每一方的利弊？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:04:36.290

来自服务器的 JSON 是否包含任何用户不得知道的敏感数据？当它发生时，您必须在服务器端对其进行过滤，因为您不能依赖客户端将其删除。

JSON 是否包含无害但不必要的信息？然后它只是一个网络性能的事情。您需要自己评估此优化是否值得您花时间。

但是当 JSON 不包含任何多余的数据并且它只是需要更改的表示时，那么没有理由不应该在客户端完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:03:38.400

您可以使用 PHP`json_decode()`将其放入数组中：

```
json_decode($jsondata, true); 
```

[http://nl3.php.net/json_decode](http://nl3.php.net/json_decode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:04:36.870

在客户端做更多的处理而在服务器端做更少的处理肯定会加快速度......但无论如何你必须解析从客户端的服务器（PHP）返回的数据......

最好使用 JSON.PARSE 或类似的东西。

# selenium - 无法在 Selenium / Mountain Lion 上连接到 Chrome

> ID：12314038
> 
> 赞同：0
> 
> 时间：2012-09-07T07:58:50.170
> 
> 标签：selenium, selenium-chromedriver

我昨天将我的 OSX 更新为 Mountain Lion，现在我的 Selenium 测试停止与 Chrome 一起工作。我从 pip 将最新的 Chromedriver 重新安装到*/usr/local/bin*和 python selenium。

我正在使用山狮的股票 python 2.7。

这个python代码曾经工作：

```
from selenium import webdriver
browser = webdriver.Chrome() 
```

现在什么也没有发生。过了一会儿，我得到以下异常：

> WebDriverException：消息：u'无法启动或连接到 Chrome。请检查 ChromeDriver 是否是最新的。在以下位置使用 Chrome 二进制文件：/Applications/Google Chrome.app/Contents/MacOS/Google Chrome'

它适用于火狐。但是 Firefox 会返回一些包含 <br> 的文本，这会导致我的测试失败。所以我不能只切换到 Firefox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:48:42.673

这是因为版本不匹配。

我在使用 v21 的 Chrome + ChromeDriver 时遇到了很多问题，因此您可以尝试回滚到两者的 v20，但是，请尝试将 Chrome + ChromeDriver 都更新到最新版本。

# security - 克隆会话安全发现 - 有什么想法吗？

> ID：12314041
> 
> 赞同：1
> 
> 时间：2012-09-07T07:58:54.113
> 
> 标签：security, session, cookies, plone

从最近对我们的 Plone 4.01 实例的审计中：

1.  尽可能加密存储在会话 cookie 中的用户名，或使用一次性会话 ID 来识别用户（在服务器端）而不是用户名。

    *   用户名使用 base64 编码存储在应用程序会话 cookie 中，可以轻松解码。
2.  用户注销时立即使会话 ID 无效。

    *   注销 PLONE 应用程序时，应用程序会删除 cookie，但不会使用户会话 ID 无效。还注意到第二次使用应用程序进行身份验证不会使之前的会话 cookie 无效。

如果可能，我们不希望向堆栈中添加其他产品来解决这些发现。

顺便说一句，我们确实安装了 Beaker，它被用作网站电子商务区域的一部分的公共帐户，而内容管理员/作者正在使用标准的 Plone 登录/安全机制，这就是得出审计结果的原因......也许烧杯也可以为内容作者重用？虽然不确定这是否是个好主意......

顺便说一句，我们也很快更新到 Plone 4.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:01:46.790

如果您关心 cookie 的安全性，则应始终使用 SSL 加密。例如，相同的用户名包含在页面输出中，因此它也包含在 cookie 中这一事实本身并不是信息泄漏。

cookie 使用具有有限时间跨度的加密哈希，默认为 12 小时，之后将不再接受 cookie。

您可以降低此超时：

1.  转到您的克隆实例的 ZMI

2.  找到`acl_users`文件夹，然后找到`session`插件：

    ![ZMI 中的会话插件](../Images/3f7d9868470750f527d0b964b775b04c.png)

3.  转到`Properties`选项卡（最右侧的选项卡）

4.  将“Cookie 有效期超时（以秒为单位）”属性更改为新值。

请注意它下面的“刷新间隔（以秒为单位，-1 禁用刷新）”值；每当签名的 cookie 超过刷新间隔时，就会生成一个新的 cookie，以刷新 cookie 的生命周期。因此，默认情况下，每小时都会向您发出一个有效期为 12 小时的新 cookie。

您不希望 cookie 有效期超时低于刷新间隔。如果您将这些值设置得非常低，您可能需要考虑使用周期性的 AJAX 'ping' 请求以在用户仍在使用站点时保持 cookie 的最新状态。

事实上，它`plone.session`已经*包含*一个为您实现此 ping 的工具。只需通过在控制面板中安装“会话刷新支持”附加组件来启用它（“站点设置”>“附加组件” ![附加组件图标](../Images/60f0ef000f7b9cf00ec930cf2f55733e.png)>选中“会话刷新支持 3.5”，单击“激活”）。这将为您安装 javascript 库，并且它将每 5 分钟 ping 服务器一次，前提是在加载当前页面时有一些鼠标或键盘活动。

# razor - Html.RenderAction 在 MVC 4 中不适用于动态 CSS 路径

> ID：12314048
> 
> 赞同：1
> 
> 时间：2012-09-07T07:59:21.883
> 
> 标签：razor, asp.net-mvc-4

我无法让我的 layout.cshtml 根据某些业务逻辑动态选择 CSS 文件。

在我的 layout.cshtml 中，我的头部有以下内容：

```
<head>
    <link href="@{Html.RenderAction("CustomStyleSheetPath", "Shared");}" rel="Stylesheet" type="text/css" />
</head> 
```

在我的“共享”控制器中，我有：

```
[ChildActionOnly]
public virtual string CustomStyleSheetPath()
{
    string customCssPath = GetCssPath();  // e.g. "css/customStyleSheet.css"
    return customCssPath;
} 
```

当我显示页面时，css 没有正确拉入，当我查看源代码时出现以下内容：

```
<head>
    <linkcss\customStyleSheet.css href="" rel="Stylesheet" type="text/css" />
</head> 
```

这段代码曾经在 MVC 3 中工作，所以我想知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:08:38.880

使用`Html.Action`代替`Html.RenderAction`

```
<link href="@(Html.Action("CustomStyleSheetPath)", "Shared"))" 
      rel="Stylesheet" type="text/css" /> 
```

`Html.Action``McvHtmlString`将在一段时间内返回呈现的 HTML`Html.RenderAction`直接写入响应。

在 MVC4 中有一个称为[条件属性](http://vibrantcode.com/blog/2012/4/10/whats-new-in-razor-v2.html/)的新功能，这就是它不起作用的原因。

因为`Html.RenderAction`不会返回任何东西，所以属性`href`不会被渲染，但另一方面会`Html.RenderAction`直接写入响应，所以你会得到这个混乱的结果。

# jquery - Photoswipe - 需要更改导航图标的顺序

> ID：12314051
> 
> 赞同：1
> 
> 时间：2012-09-07T07:59:46.983
> 
> 标签：jquery, css, navigation, photoswipe

我有一个照片滑动画廊，默认情况下，在查看完整图像轮播时，底部的导航图标显示为：关闭、上一个、下一个。

我想将其更改为：上一个，关闭，下一个。

我最初认为通过更改 photoswipe.css 以通过切换先前和关闭位置来更改位置，这不会有太大问题。

这不起作用，因为动作似乎是附加到单元格而不是图像上，而 CSS 所做的只是控制背景图像的位置？

任何帮助表示赞赏。

# sharepoint - 使用 ADFS 的 SharePoint 自定义登录中的禁止处理程序

> ID：12314052
> 
> 赞同：1
> 
> 时间：2012-09-07T07:59:48.880
> 
> 标签：sharepoint, adfs

我在带有 ADFS 自定义登录页面的 SharePoint 2010 中遇到了 Forbidden 403 页面的问题。

我已将 SharePoint 配置为使用 ADFS 作为身份提供者，并且我希望自定义登录页面代替 ADFS 默认登录页面。

我创建了一个应用程序页面并将其放置在 Layouts 文件夹中，并在我的 SharePoint 页面的身份验证提供程序下的自定义登录部分中配置了此路径。

当我导航到我的 SharePoint 网站时，它会将页面重定向到我的自定义登录页面，但使用了禁止的处理程序。

我已授予 Bin 目录的所有权限，但仍然无法解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T15:20:42.097

您可能被重定向到 403，因为匿名用户无权显示自定义错误页面。

日志文件可以为您提供有关为什么会发生这种情况的线索。

或者：

在 web.config 文件中（一个用于 Web 应用程序，一个在 _layouts 文件夹中）设置以下内容：

CustomErrors="Off" Debug="true" Callstack="true"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:59:55.190

您的应用程序页面的代码隐藏继承自哪个基类？它继承自 Microsoft.SharePoint.WebControls.UnsecuredLayoutsPageBase 很重要。

此外，要允许匿名用户访问此页面，必须设置以下属性：

```
protected override bool AllowAnonymousAccess
{
    get
    {
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T19:17:22.350

我的修复与正在使用的母版页有关（源链接如下）。

删除 DynamicMasterPageFile = “~/masterurl/default.master” 属性并在 .aspx 页面的 @Page 指令中添加 MasterPageFile=”/_Layouts/15/ErrorV15.master” 属性。您还可以使用 Simple.master 或 SimpleV4.master 页面。

[https://hpatel.wordpress.com/2014/06/29/sharepoint-2013-how-to-create-anonymous-application-page/](https://hpatel.wordpress.com/2014/06/29/sharepoint-2013-how-to-create-anonymous-application-page/)

# django - 在 get_resource_uri 中构建反向 url

> ID：12314058
> 
> 赞同：5
> 
> 时间：2012-09-07T08:00:19.760
> 
> 标签：django, tastypie

如果有人阅读 Tastypie-Mailinglist：我没有在那里得到答案，很抱歉在这里交叉发布。

在 Tastypie 中，我更改了资源的 URL 模式，因为我使用了 PK 之外的另一个键。当我访问资源时，这工作正常。现在我想将此资源嵌套到父资源中，但嵌套资源包含带有 PK 的 URI，而不是我的自定义键。我学到的是，就我而言，我必须更改孩子的 get_resource_uri。

我孩子的资源（NamespacedResource）中的方法如下所示：

```
def get_resource_uri(self, bundle_or_obj):

    obj = bundle_or_obj.obj if isinstance(bundle_or_obj, Bundle) else bundle_or_obj

    kwargs={
        'resource_name': self._meta.resource_name,
        'custom_id': obj.custom_id
        }

    return self._build_reverse_url('api_dispatch_detail', kwargs=kwargs) 
```

孩子的 url 覆盖方法是这样的：

```
def override_urls(self):
    return [
        url(r"^(?P<resource_name>%s)/(?P<custom_id>[-_\w\d]+)%s$" % (
                self._meta.resource_name,
                trailing_slash()
            ),
            self.wrap_view('dispatch_detail'),
            name="api_dispatch_detail"
        ),
    ] 
```

但应用程序无法反转 URL。我收到此错误：

```
Reverse for 'api_dispatch_detail' with arguments '()' and keyword arguments '{'custom_id': u'3_ee5-4423', 'resource_name': 'myresource'} not found. 
```

如何正确反转 URL？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:34:08.823

美味派的内部网址总是需要`resource_name`和`api_name`kwargs。

您的 kwargs 应包含：

```
kwargs = {
    'api_name': 'v1',  # Or whatever you have set for your api
    'resource_name': self._meta.resource_name,
    'custom_id': obj.custom_id
} 
```

# delphi - WebBrowser 控件跳过过期证书

> ID：12314059
> 
> 赞同：2
> 
> 时间：2012-09-07T08:00:27.723
> 
> 标签：delphi, webbrowser-control, ssl-certificate

我在 delphi 应用程序中使用 WebBrowser Control 来显示一些 https 网站。

但是导航到它后，我得到的网页出现以下错误：“该网站提供的安全证书已过期或尚未生效。” 并且有以下选择：

*   单击此处关闭此网页。

*   继续访问此网站（不推荐）。

有没有办法以编程方式抑制此错误并继续导航到该站点，就好像安全证书没问题一样？

# c# - WindowsAzure：在 webrole 启动时将目录添加到 %path% 环境变量

> ID：12314060
> 
> 赞同：2
> 
> 时间：2012-09-07T08:00:34.877
> 
> 标签：c#, azure, azure-web-roles

我想在我的 webrole 启动时将目录名称添加到 %PATH% 环境变量，方法是使用启动任务（首选）或 C# RoleEntryPoint 类的 OnStart 方法。

不幸的是，我没有找到一个例子。

任何帮助表示赞赏。

谢谢，马吕斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:28:03.987

一个在运行时设置环境变量的启动任务，类似这样的东西应该可以“在 Windows Azure 中设置环境变量”

[http://nicoploner.blogspot.com.au/2011/11/setting-environment-variables-in.html](http://nicoploner.blogspot.com.au/2011/11/setting-environment-variables-in.html)

# linux - 没有gettext的Linux Glib安装？

> ID：12314064
> 
> 赞同：3
> 
> 时间：2012-09-07T08:00:41.173
> 
> 标签：linux, gettext, glib

是否可以在没有 gettext 的情况下安装 Glib（在我的情况下为 2.33.3）？我通过谷歌搜索，但我只是发现一些赞扬它应该是可能的。但没有人描述它。

目的：我需要安装udev。这需要油嘴滑舌。

有人能帮我吗？

注意：我在目标板上使用自定义的 2.6.36 内核

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:45:35.537

这似乎是要求之一。所以，不，您必须安装 gettext 包或在您的 C 库中支持 gettext。这是取自的代码`configure.ac`。

```
dnl
dnl gettext support
dnl

ALL_LINGUAS="`grep -v '^#' "$srcdir/po/LINGUAS" | tr '\n' ' '`"
AC_SUBST([CONFIG_STATUS_DEPENDENCIES],['$(top_srcdir)/po/LINGUAS'])
GLIB_GNU_GETTEXT

if test "$gt_cv_have_gettext" != "yes" ; then
  AC_MSG_ERROR([
*** You must have either have gettext support in your C library, or use the
*** GNU gettext library. (http://www.gnu.org/software/gettext/gettext.html
])
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:12:43.520

您的 C 库中必须有 gettext 支持，或者您需要使用 gettext 库。我假设您在其中任何一个中都没有 gettext ，因此取决于您的选择。

[http://www.gnu.org/software/gettext/gettext.html](http://www.gnu.org/software/gettext/gettext.html)

# linux - 用户应用程序是否有任何标准方法可以访问 ARM Linux 上的协处理器？

> ID：12314072
> 
> 赞同：3
> 
> 时间：2012-09-07T08:01:07.670
> 
> 标签：linux, arm

我想知道是否有一种已经实现的（通用-标准）“驱动程序/内核模块/sysfs入口”方式来通过用户空间访问ARM的协处理器。如果不是（据我所知），为什么它不可用？有什么阻碍吗？不可行吗？

例如; 我想获取[Main ID Register - MIDR](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0388h/BABCBFDF.html)的内容，我希望能够通过写入/读取 sysfs 条目从用户空间执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:40:10.203

将这种复杂的硬件连接暴露给应用软件通常是一个坏主意——它破坏了可移植性并可能影响安全性和稳定性（这就是为什么一开始就无法从非特权模式访问它们的原因）。这些东西通常更好地隐藏在某些软件抽象层之后。但是没有什么能阻止您编写内核驱动程序，在存在真正原因的情况下公开此类接口。

如果您的问题纯粹是出于好奇，那么我建议您构建自己的内核，并在启动期间使用 KGDB 之类的东西进行调查，或者只是在战略位置插入 printk 语句以查看给定点的某些值。

# .net - 在 .NET 中将函数标记为“不返回”

> ID：12314077
> 
> 赞同：0
> 
> 时间：2012-09-07T08:01:21.470
> 
> 标签：.net, exception

我在 VB.NET 中有一个方法，它只是抛出异常的助手。它总是会抛出异常并且永远不会返回但是编译器不会将此函数检测为终止代码路径，因此如果我稍后在代码中使用未通过异常代码路径初始化的变量，我会收到警告。

```
Function Foo(y as Integer) As Boolean
    dim x as boolean
    if y > 10
        x = 20
    else
        ThrowHelperFunction("Ouch")
    end if
    return x
End Function 
```

警告是 x 未在所有代码路径上初始化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:04:12.550

我不认为你可以改变这种行为。相反，您可以执行以下操作：

```
Function Foo(y as Integer) As Boolean
    dim x as boolean
    if y > 10
        x = 20
    else
        throw CreateExceptionHelperFunction("Ouch")
    end if
    return x
End Function 
```

也就是说，辅助函数仍然可以做一些处理。但它会返回一个异常而不是抛出它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:19:39.323

尝试使用像这样的一些默认值来初始化 x 。Boolean 是值类型，不应该用空值初始化。

```
Function Foo(y as Integer) As Boolean     
    dim x as boolean     
    x = 0
    if y > 10         
        x = 20     
    else         
        throw CreateExceptionHelperFunction("Ouch")     
    end if     
    return x 
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:17:28.147

尝试使用以下代码（使用 Sub 而不是 Function）

```
Sub Foo(y As Integer)
    Dim x As Boolean
    If y > 10 Then
        x = 20
    Else
        ThrowHelperFunction("Ouch")
    End If
End Sub 
```

谢谢。

# javascript - 如何实现 $('#calendar').weekCalendar('today')？

> ID：12314078
> 
> 赞同：5
> 
> 时间：2012-09-07T08:01:21.413
> 
> 标签：javascript, jquery

我对javascript知之甚少，所以我不确定我在做什么。基本上，我们的团队正在开发一个使用 jQuery weekcalendar javascript 的项目。默认情况下，日历将显示一整周。

我的问题是：我有多个适合不同屏幕的 css 文件，我使用另一个 javascript 调用这些文件。对于最小的屏幕分辨率，我为手机调用的分辨率和整个日历不适合此分辨率的设置宽度，因此我只需要显示当天。我在需要使用的网站上找到了，`$('#calendar').weekCalendar("today")`但我不知道如何实现它以及我应该在 if 语句中添加什么。

这是我尝试的代码的样子，

```
<script type="text/javascript">
$(document).ready(function () {
    if (document.styleSheets('mobile.min.css')) {
        $('#calendar').weekCalendar('today');
    }
}) 
```

显然，这是行不通的，我认为这是错误的。有人能帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:57:08.880

我没有使用过 Adapt js 库，但是看看它你可以实现一个回调函数。这意味着当页面调整大小时，它将调用您的函数。

所以请确保在您的 ADAPT CONFIG 声明中设置了回调。在这种情况下

`callback: ChangeCalendar`

然后在您的页面上的脚本标签中，或者在 js 文件中，您需要一个回调函数来处理回调。它将传递与应用的大小相对应的索引。我建议在回调函数中使用 switch 语句来处理大小变化。

`ChangeCalendar(index, width)
{
    switch (index) {
       // handles the first item in the range (0 to 760px)
     case 0: $('#calendar').weekCalendar('today');
     break;
      // handles the second item in the range (760 to 980px)
    case 1: //something else
      break;
    // handles everything we missed
    default:
    break;
   }
}` 

当然你可以改变它以使用宽度参数，然后使用 if 语句来处理一组范围，例如 if (width > 950) { etc }

我希望这能解决你的问题。

# validation - 回发验证失败后如何保留 f:viewParam 值

> ID：12314081
> 
> 赞同：4
> 
> 时间：2012-09-07T08:01:51.210
> 
> 标签：validation, jsf, jsf-2, postback, viewparams

我有简单形式的 xhtml 页面。此页面用于多个数据表。要指定数据表（等等），我使用 GET 请求参数。xhtml页面通过接收它

```
 <f:metadata>
    <f:viewParam id="page" name="page" value="#{itemsBean.page}"/>
  </f:metadata> 
```

并再次通过导航规则，如

```
 <navigation-case>
  <description>
  Global rule for going to the items page from any page  
  </description>
  <from-outcome>items</from-outcome>
  <to-view-id>/items.xhtml</to-view-id>
  <redirect>
    <view-param>
      <name>page</name>
      <value>#{itemsBean.page}</value>
    </view-param>  
  </redirect>  
  </navigation-case> 
```

但是如果我像这样在 xhtml 文件中使用输入

```
 <h:inputText id="itemName" value="#{itemsBean.name}" 
    required="true" requiredMessage="Value for this field required!"/> 
```

尝试接受没有输入文本的表单后，我无法恢复视图参数。我尝试使用隐藏输入来传递参数

```
<h:inputHidden id="page" value="#{itemsBean.page}" /> 
```

，但似乎验证运行之前和 itemsBean.page 仍然是空的。itemsBean 是 RequestScoped。我做错了什么？我怎样才能传递参数？

谢谢你浪费你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:29:51.620

您需要不断将请求参数传递给后续请求。在“plain vanilla” HTML 中，您确实会使用`<input type="hidden">`它，但`<h:inputHidden>`不幸的是 JSF 不能那样工作。如果由于另一个输入字段导致一般验证失败，则与之关联的模型值`<h:inputHidden>`将根本不会更新。

您应该`<f:param>`在`UICommand`组件中使用 a 来保留后续请求的请求参数。例如

```
<h:commandButton ...>
    <f:param name="page" value="#{param.page}" />
</h:commandButton> 
```

或者，您可以使用[`<o:form>`](http://showcase.omnifaces.org/components/form)OmniFaces [JSF 实用程序库](http://omnifaces.org)，它基本上扩展了`<h:form>`一个附加属性`includeViewParams`，使您能够在表单操作 URL 中保留后续请求的视图参数。

```
<o:form includeViewParams="true">
    ...
</o:form> 
```

如果您有多个命令按钮/链接和 ajax 操作，这最终可能会更容易，这将是您希望在非 ajax 回发期间保留相同 URL 的唯一方法。

# python - 我可以只使用 PYC 文件吗

> ID：12314090
> 
> 赞同：1
> 
> 时间：2012-09-07T08:02:18.113
> 
> 标签：python

我有一个使用几个 PY 文件的程序。在我使用 PY 文件之前，代码运行良好。但是，为了加密，当我删除 PY 文件并只保留 PYC 文件时，程序失败并显示消息： **ImportError: No module named abc**

有什么想法/想法为什么 python 不喜欢这里的 PYC，而每个 PY 文件都可以正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:08:29.767

`.pyc`文件包含字节编译的 python。这些可以再次反编译成可读性很强的 python 代码，并且不能保护研究源代码的人。

如果您确实想使用它，则需要确保*所有*文件都已编译，请使用：

```
python -m compileall /path/to/package 
```

在删除`.py`源文件之前。

# iphone - 我的应用被拒绝了，想知道为什么？

> ID：12314095
> 
> 赞同：1
> 
> 时间：2012-09-07T08:03:05.033
> 
> 标签：iphone, app-store, appstore-approval

*   未优化以支持设备屏幕尺寸和/或分辨率

我为 iPhone 制作了我的应用程序并因此被拒绝。但我的应用程序非常适合 iPhone。有什么我想念的吗？我不认为这个应用程序是通用的，因为二进制表示 ipodtouch/iphone 系列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:00:59.313

此问题的最常见原因是您没有正确支持不同的设备分辨率。您需要确保您的所有图像都针对 Retina 和非 Retina 设备进行了优化，而不仅仅是针对您的图标和启动图像。

例如，iPhone 3GS 的屏幕分辨率为 320x480，因此背景图像可能为 320x480，但视网膜 iPhone 的屏幕分辨率为 640x960，因此您需要为这些设备提供“@2x”版本的图像。

这意味着您的应用程序必须包含`myBackgroundImage.png`and `myBackgroundImage@2x.png`。

此外，仅仅因为您的图像符合视网膜标准并不意味着您需要做的就是这些。如果您从 320x480 图像开始并将其缩放到 640x960，则在其上打一个 @2x 并将其称为视网膜，您将被拒绝。确保您的所有图形都是正确的分辨率，并且没有以任何方式扭曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:20:03.060

造成这种情况的原因可能有很多：

*   你有 57x57 和 114x114 像素的图标吗？（114x114 用于视网膜）

*   您是否同时拥有用于视网膜显示的 Default.png**和**Default@2x.png？

*   如果您的应用程序中有图像，您是否按如下方式设置它们，以使它们在视网膜显示屏上显得清晰？： `img.frame = CGRectMake(img.center.x, img.center.y, img.frame.size.width/2, img.frame.size.height/2);`

# c# - 串行端口输入缓冲器的异常行为

> ID：12314100
> 
> 赞同：0
> 
> 时间：2012-09-07T08:03:17.433
> 
> 标签：c#, .net, c#-4.0, .net-4.0, serial-port

使用带有 usbser.sys 的虚拟串行端口作为驱动程序；我得到缓冲区的一些奇怪行为。出于性能原因，我使用 Win32 调用（CreateFile、ReadFile 等）而不是 .NET 中的 SerialPort 类。

打开 COM 端口后，我使用 SetupComm(hFile, dwInQueue, dwOutQueue) 将输入缓冲区设置为 32768。我尝试过其他大小，例如。4096、8192等

然后我用 GetCommProperties(hFile, lpCommProp) 读取缓冲区大小并读取 COMMPROP.dwCurrentRxQueue 以检查大小是否已设置。但是无论我尝试设置什么大小，**dwCurrentRxQueue 总是返回 16384**！

**为什么？**

我有一个 System.Timers.Timer，它每 10 毫秒启动一次并调用 ReadFile(...)，然后对字节执行一些操作。当定时器暂停时（例如，通过调用 Thread.Sleep 5 秒），虚拟串行端口的缓冲区逻辑上会填满。睡眠后，我使用 ClearCommError(...) 检查缓冲区中的字节数，读取 COMSTAT 的 cbInqueue。

由于 dwCurrentRxQueue 显然是 16384，因此您希望缓冲区在 5 秒睡眠后被 16K 的数据打包。但是**缓冲区永远不会包含超过 ~12K**的数据，即使在休眠 10-20-30 秒后也是如此！

**为什么？**

这是代码的摘录：

```
_handle = CreateFile(portName, GENERIC_READ | GENERIC_WRITE, 0, IntPtr.Zero, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, IntPtr.Zero);

SetupComm(_handle, 32768, 32768)

// ... other calls (SetCommState, SetCommConfig, SetCommTimeouts)

var commprop = new COMMPROP();

GetCommProperties(_handle, ref commprop)

// commprop.dwCurrentRxQueue always returns 16384

System.Threading.Thread.Sleep(5000);

COMSTAT comstat;
uint    errors;

ClearCommError(_handle, out errors, out comstat);

// comstat.cbInQueue never contains more than ~12 KBytes :s 
```

*方法和结构签名已从 pinvoke.net 获取*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:23:01.917

> 使用带有 usbser.sys 的虚拟串行端口作为驱动程序

USB 仿真器驱动程序通常不会花费太多精力来完美模拟串行端口。诸如波特率、奇偶校验和握手之类的东西在 USB 上没有意义，因此完全被伪造了。这显然也没有模拟缓冲区大小。

目前尚不清楚您为什么担心它，但这不是问题。您必须**始终**注意 ReadFile() 返回的字节数 (lpNumberOfBytesRead)，它只是偶然地等于 nNumberOfBytesToRead。因此，只需重复调用 ReadFile() 即可填充您自己的缓冲区。顺便说一句，使用 .NET SerialPort 类来避免 pinvoke。

# c# - 创建没有静态方法的 c++ DLL

> ID：12314101
> 
> 赞同：1
> 
> 时间：2012-09-07T08:03:22.597
> 
> 标签：c#, c++, ios, dll

我正在用 C++ 创建一个 DLL。这是一个例子：

```
namespace MathFuncs
{
  class MyMathFuncs
  {
    public:
        // Returns a + b
        static __declspec(dllexport) double Add(double a, double b);

        // Returns a - b
        static __declspec(dllexport) double Subtract(double a, double b);

        // Returns a * b
        static __declspec(dllexport) double Multiply(double a, double b);

        // Returns a / b
        // Throws DivideByZeroException if b is 0
        static __declspec(dllexport) double Divide(double a, double b);
    };
} 
```

所有方法都是静态的，静态方法有很多限制，所以我的问题是如何在没有静态方法的情况下实现相同的方法？我总是需要在 DLL 中使用静态方法吗？我想在 C# 和 IOS 应用程序中导入这个 DLL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:16:26.680

您必须使用全局的 C 风格方法。其原因在[此处描述](https://stackoverflow.com/questions/4538562/how-can-i-call-a-function-of-a-c-dll-that-accepts-a-parameter-of-type-stringst/4551798#4551798)。

基本上可以归结为：C 函数很好地转换为 DLL 导出，因为 C 在语言特性方面“更接近地面”。C 更直接地翻译成机器代码。C++ 在编译器级别做了很多工作，为您提供了许多不能在 C++ 环境之外使用的功能。出于这个原因，您的导出函数应遵循 C 风格，以便跨 DLL 边界正常运行。这意味着没有模板、没有内联代码、没有非 POD 类或结构。

考虑这段代码：

```
extern "C"
{
    __declspec(dllexport) int GlobalFunc(int n)
    {
        return n;
    }

    namespace SomeNamespace
    {
        __declspec(dllexport) int NamespaceFunction(int n)
        {
            return n;
        }
    }

    class MyClass
    {
        __declspec(dllexport) int ClassNonStatic(int n)
        {
            return n;
        }
        __declspec(dllexport) static int ClassStatic(int n)
        {
            return n;
        }
    };

} 
```

这将导致以下 DLL 导出函数名称：

> ?ClassNonStatic@MyClass@@AAEHH@Z
> 
> ?ClassStatic@MyClass@@CAHH@Z
> 
> 全球函数
> 
> 命名空间函数

除了 Visual Studio 构建的 C++ 项目之外，具有有趣命名的项目基本上与任何其他项目都不兼容。这称为[name mangling](http://en.wikipedia.org/wiki/Name_mangling)，将一些类型信息嵌入到名称本身中，以解决我正在谈论的导出函数的限制。从技术上讲，您可以在外部使用这些函数，但它很脆弱，并且依赖于编译器特定行为的细微差别。

**在 DLL 中导出函数的经验法则是：你能在 C 中做到这一点吗？**如果你不能，那么几乎可以肯定你会引起问题。

请注意，即使是静态类方法（本质上是全局的），即使使用`extern "C"`. 但是命名空间导出中的独立函数没有名称修改（尽管它们失去了命名空间范围）。

你可以开始明白为什么这个经验法则是有意义的。

* * *

如果你想导出一个类，让我们按照经验法则，像在 C 中那样设计 DLL 接口。这里有一个例子。让我们来看看这个 C++ 类：

```
 class Employee
    {
    private:
        std::string firstName;
        std::string lastName;

    public:
        void SetFirstName(std::string& s)
        {
            this->firstName = s;
        }
        void SetLastName(std::string& s)
        {
            this->lastName = s;
        }
        std::string GetFullName()
        {
            return this->firstName + " " + this->lastName;
        }
    }; 
```

你不能只坚持`__declspec(dllexport)`这一点。您必须为其提供一个 C 接口，并将其导出。像这样：

```
 extern "C"
    {
        __declspec(dllexport) Employee* employee_Construct()
        {
            return new Employee();
        }

        __declspec(dllexport) void employee_Free(Employee* e)
        {
            delete e;
        }

        __declspec(dllexport) void employee_SetFirstName(Employee* e, char* s)
        {
            e->SetFirstName(std::string(s));
        }

        __declspec(dllexport) void employee_SetLastName(Employee* e, char* s)
        {
            e->SetLastName(std::string(s));
        }

        __declspec(dllexport) int employee_GetFullName(Employee* e, char* buffer, int bufferLen)
        {
            std::string fullName = e->GetFullName();
            if(buffer != 0)
                strncpy(buffer, fullName.c_str(), bufferLen);
            return fullName.length();
        }
    } 
```

然后在 C# 端再写一个小包装器，你就成功地[封送](http://en.wikipedia.org/wiki/Marshalling_%28computer_science%29)了这个类。

专门针对 C# 编组，另一种选择是为您的类提供 COM 接口而不是 C 接口。本质上是一样的，但是有很多帮助类和特殊的编译器支持直接将 COM 支持添加到 C++ 类，而无需编写单独的包装器。COM 对象可以被 C# 直接引用。

不过，这对您的ios没有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:48:50.220

作为旁注，我几天前用 mingw/c++ 做了 1 个实验，这可以为你澄清。

我有一个全局引用计数器，用于找出程序中的内存泄漏，

```
class ReferenceCounter /** other implementations details are omitted.*/
{
public:

static int GlobalReferenceCounter;

//version 1
static int getReferenceCount1() { return GlobalReferenceCounter;}

//verison 2
static int getReferenceCount2(); //same code of version 1 but moved into .cpp file
}; 
```

当使用引用计数器将我的库编译到 DLL 中时，变量被复制，1 个版本被编译到 DLL 中，一个版本被编译到客户端代码中。

当我从 DLL 的工厂方法中询问引用计数的东西时，只有 DLL 内的引用计数器被增加/减少。当客户端代码使用从 Ref Counter 继承的自己的类时，客户端引用计数器会增加/减少。

因此，为了检查内存泄漏，我必须在程序结束时进行

```
assert(ReferenceCounter.getReferenceCount1() == 0);
assert(ReferenceCoutner.getReferenceCount2() == 0); 
```

这是因为如果发生内存泄漏，其中一个值将大于 0。如果第一个值大于 1，则内存泄漏是由未分配的用户类引起的，如果第二个值大于 0，则内存泄漏是由库引起的类。

请注意，如果泄漏是由未分配的库的类引起的，这不一定是库的错误，因为用户仍然能够泄漏该类，即使这意味着库中缺乏设计，因为理想情况下应该返回所有内容在适当的智能指针中以确保安全。）

当然，您应该在文档中指定“GlobalReferenceCoutner”是重复的，否则一些不知情的用户可能会认为 2 个 getter 是多余的，并且会认为您犯了一些错误。（如果可能的话，避免做这样的事情，是晦涩难懂的）

这也应该警告您，通过 DLL 访问静态方法是非常不安全的。例如，如果在我的课堂上我只想有 1 个引用计数器而不是 2，我必须这样做以确保授予安全：

```
class ReferenceCounter
{
public:

static int GlobalReferenceCounter;

static void duplicate() { increaseGlobalCounter(); }

static void release() { decreaseGlobalCounter(); }

static int getGlobalCounter() { return privateGetGlobalCounter(); }

private:

static increaseGlobalCounter(); // implementation into Cpp file

static decreaseGlobalCounter(); // implementation into Cpp file

static privateGetGlobalCounter(); // implementation into Cpp file

}; 
```

这样做将使您在 DLL 边界和用户应用程序中使用相同的值。因此，我们在这里使用 1 个变量，而不是使用 2 个不同的变量（可能 GlobalCounter 仍被编译为用户可执行文件，但没有人使用它来消除“克隆效应”）

# java - 集中变量的良好编程实践

> ID：12314107
> 
> 赞同：8
> 
> 时间：2012-09-07T08:04:03.923
> 
> 标签：java, oop

在处理需要相同变量实例的多个类时，创建一个中心类是一种好的编程实践吗？

```
chatWindow.variables.username = userField.getText(); 
```

例如：

1.  我有一个带有一定数量变量的类
2.  我有另一个需要相同变量的类
3.  另一个需要与第一个相同的变量

所以我有三个类都使用相同的变量实例

我只使用第一个类（1）创建变量类实例

我通过类 (1) 使用类 (2)、(3) 访问这些变量

示例：（在 classTwo() 中）：

```
classOne.variableClass.VariableName = false; 
```

**编辑**：在基本形式中，我的问题是是否可以创建一个中央“变量类”并使用其他类通过主类访问它的相同实例。

我知道我的问题很难理解，但我确信还有另一种更简单的方法。我尝试通过第二类和第三类的构造函数传递第一类的相同实例，但我的解决方案似乎更简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:14:26.680

这闻起来像[功能嫉妒](http://sourcemaking.com/refactoring/feature-envy)……听起来你的模型有问题。

如果有一组变量需要在多个类中更改，它可能应该成为一个对象（甚至可能是一个实体）。但是您应该考虑，如果您需要在其他类中更改这些值，您可能需要在同一个类中放置一些逻辑（进行验证检查等）。

拥有一个额外的类来保存变量通常被认为是一种代码异味，称为贫血域。然而，有些情况确实需要它，无论如何这可能是一个品味问题。在这种情况下，你的类只不过是一个美化的结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T08:08:00.257

最佳实践是使用依赖注入并传递您需要的所有资源，而不是让类找到它们想要的东西。

使用全局变量开始时比较简单，但是随着应用程序的增长以及您想要使用单元测试，这些是一个真正的痛苦，因为管理和维护这些变量变得更加困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:07:12.797

这听起来不像你已经很好地隔离了你的班级。类可以修改其他类变量，但我会避免在一个地方存储可变变量。这使得事情看起来像全局变量，很难管理，最好避免。有关详细信息，请参见[此处。](http://c2.com/cgi/wiki?GlobalVariablesAreBad)还可以查看[Dementer 法则](http://en.wikipedia.org/wiki/Law_of_Demeter)，这有助于在您的程序中保持松散耦合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T08:23:14.400

每个问题都有自己的最佳折衷方案，你应该问自己一系列问题。(2) 和 (3) 是否只需要对 (1) 的准备访问，还是它们还需要写访问？

你实际上在做什么（从（1）创建（2）和（3）看起来不错，构建器模式，你创建了你永远不会直接访问的实例）

如果需要写访问权限，是否应 (2) 通知 (3) 所做的更改（反之亦然）？

一般来说，您应该尽可能多地限制“子类”的交互（最好尽量避免共享某些东西，当然如果可能的话，但通常是这样）所以从（1）内部访问它们似乎也比从 (2) 和 (3) 访问 (1)。

这种限制增加了代码的可维护性，并消除/减少了诸如值更改通知、谁拥有谁等问题。

基本上，如果用户只需要担心 (1) 并且所有其他事情都在内部处理，那么你已经做得很好了（Pimpl 成语对你什么都没说？）

您还可以将 (2) 和 (3) 像对 (1) 的扩展一样，因此完全像策略模式一样行事。其优点是，只有 (1) 需要担心距离，但如果将来您需要进一步扩展 (1) 您已经准备好策略，并且可以轻松更新。（我总是注意到，您可以编写的每个代码中总是存在多种模式）。

最后，你是唯一知道所有代码细节的人，总是问自己是否可以提高代码的可维护性、易读性等，在哪里需要升级等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T08:07:52.640

由于缺少示例，我不太确定您需要什么，但也许注册表模式就是您所需要的。

基本上，您创建一个静态“全局”类，它包含您在整个应用程序中需要的所有变量

```
public abstract final class VarRegistry {
    public static final String var1 = "val1";
    public static final int var2 = 2;
} 
```

现在，在所有需要访问这些变量的类中，您可以轻松访问和修改它们：

```
VarRegistry.var1 = "test"; 
```

在开始编写代码之前请稍等片刻：不太建议使用这样的“全局”变量。它破坏了数据封装，因为您永远不知道这些变量何时以及由谁更改。

你最好重组你的程序以支持更安全的模式来正确地封装你的数据，例如依赖注入。

# .net - Sql-Server 创建登录不起作用

> ID：12314116
> 
> 赞同：2
> 
> 时间：2012-09-07T08:04:36.200
> 
> 标签：.net, sql-server, c#-4.0, ado.net

嗨，我刚开始通过阅读 Visual:Step by Step 来学习 C#。我在第 25 章开始教 ADO.NET。在本章的开头有一个逐步练习，将引导您完成创建 sql-server 的登录。我得到这样的声明：

```
CREATE LOGIN [computer\login] FROM WINDOWS 
```

当我第一次开始尝试登录时，我的计算机名称是 Aly-PC，而我的登录名是 Aly。我已将登录用户名更改为 Alexandru 并重新启动计算机以使其正常工作，但它仍然没有。我收到此错误：

![在此处输入图像描述](../Images/34a94b7bfd82fbdd31df0ea372a824ac.png)

我也从我获得计算机名称和用户名的地方发布，因为也许我没有得到正确的。如果这是真的，我应该在哪里寻找它们？

计算机名称我的电脑 -> 属性：

![在此处输入图像描述](../Images/70a563b3820935f555b6bd2cc6eb804a.png)

登录控制面板\用户帐户和家庭安全\用户帐户：

![在此处输入图像描述](../Images/71bdf59a02be371408f35efea50f4971.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T08:17:51.640

SQL 服务器（在您的情况下为 SQLExpress）具有用户和登录名 - 这些是 2 个独立的实体，您必须创建 SQL 服务器用户才能为其分配（创建）登录名。

# c# - 如何使用默认网络摄像头捕获照片并将其保存在我的 c#.net Web 应用程序中？

> ID：12314118
> 
> 赞同：-3
> 
> 时间：2012-09-07T08:04:43.173
> 
> 标签：c#, javascript, asp.net, silverlight-4.0

我正在开发基于 c#.net 的 Web 应用程序。我想使用客户端计算机上默认安装的网络摄像头拍摄用户的照片。这个想法是他为我的网络应用程序捕获照片，并且该应用程序设置在数据库或目录中。有没有办法在 Web 应用程序或任何其他方式中做（通过在应用程序中包含 silverlight 模块）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:32:17.503

我为我的项目找到了一个很好的解决方案。

[http://shubhamtipstricks.com/2057/capture-image-using-javascript-webcam-and-upload-it-in-your-server/](http://shubhamtipstricks.com/2057/capture-image-using-javascript-webcam-and-upload-it-in-your-server/)

# operating-system - 应用程序 32/64 位和操作系统 32/64 位

> ID：12314119
> 
> 赞同：-6
> 
> 时间：2012-09-07T08:04:44.393
> 
> 标签：operating-system, x86, 64-bit, 32-bit

我想知道以下几点：

1.  32 位应用程序可以在 32 位操作系统下运行吗？
2.  32 位应用程序可以在 64 位操作系统下运行吗？
3.  64 位应用程序可以在 32 位操作系统下运行吗？
4.  64 位应用程序可以在 64 位操作系统下运行吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:06:29.227

是的。如果不是直接的（案例 3 很困难），那么通过仿真/虚拟化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:06:48.360

1.  是的当然...
2.  是的
3.  不
4.  是的当然...

也许您应该阅读有关计算机、CPU 和 x86 架构的一般知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:08:24.573

1) 是 2) 是 3) 否（如上所述，没有运行虚拟机或模拟什么的）4) 是

[http://www.techsupportalert.com/content/32-bit-and-64-bit-explained.htm](http://www.techsupportalert.com/content/32-bit-and-64-bit-explained.htm)

有一些阅读可以帮助您了解原因:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T04:45:23.707

是 是 否 是

在 32 位系统和应用程序中，变量的大小为“x”。在 64 位系统和应用程序中，变量的大小为“2x”

因此，64 位系统中的指针指向的数据量是 32 位系统中指针的两倍……这就是为什么 64 位系统中的指针可以访问 32 位应用程序中的任何内容而 32 位系统中的指针只能访问它应该在 64 位应用程序中访问的一半数据...

# android - 活动启动延迟（startActivity）错误

> ID：12314122
> 
> 赞同：4
> 
> 时间：2012-09-07T08:04:56.497
> 
> 标签：android

最近，我收到了用户关于我的闹钟应用程序没有响铃的信息。最后，其中一位用户从构建日志中向我发送了信息，这真的很奇怪：

```
74\. 4:25:0 - StartAlarm received
75\. 5:22:15 - AlarmOnScreen create
76\. 5:22:15 - Time: 04:25 
```

问题是，要记录的信息保存如下：

```
//BroadcastReceiver
@Override
public void onReceive(Context context, Intent intent) {
    Logger.initialize(context);
    Logger.log("StartAlarm received");
    Intent i = new Intent(context, AlarmOnScreen.class);
    i.putExtras(intent.getExtras());
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
}

//AlarmOnScreen (activity)
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alarm_on_screen);
    Logger.log("AlarmOnScreen create");
    //Time value of alarm is logged below
    (...) 
```

如您所见，活动的开始被大大延迟了。这怎么可能？用户报告说警报被延迟，直到他开始“使用”手机 - 我想这意味着，直到锁屏被解锁或屏幕打开。我仍在等待更多信息的答案。在其他时间延迟只有 5 分钟 - 每次，直到用户开始“使用电话”

有任何想法吗？

编辑：让我补充一下，这是最近开始发生的事情，在申请几个月后。我仍在寻找我是否可能在清单和上次更新中更改了任何内容，但它是否可能仅在新的 Android 版本上发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T15:19:53.263

我认为您的问题是在没有正确使用 WakeLocks 的情况下使用 AlarmManager，当设备在屏幕关闭的情况下“休眠”时，您的接收器将无法正常工作。

我猜你的接收器从 AlarmManager 得到了 onReceive()，这很可能是用`_WAKEUP`这样的标志开始的：

```
mAlarmManager.set(AlarmManager.RTC_WAKEUP, .......); 
```

这个 _WAKEUP 标志意味着设备将“开启”，即使它处于睡眠模式。但是，如此处的文档所述（[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)）：

> 只要警报接收器的 onReceive() 方法正在执行，警报管理器就会持有 CPU 唤醒锁。这保证了在您完成广播处理之前手机不会休眠。一旦 onReceive() 返回，警报管理器就会释放这个唤醒锁。这意味着在某些情况下，一旦您的 onReceive() 方法完成，手机就会进入睡眠状态。如果您的警报接收器调用了 Context.startService()，则手机可能会在请求的服务启动之前休眠。为防止这种情况，您的 BroadcastReceiver 和 Service 将需要实施单独的唤醒锁定策略，以确保手机继续运行直到服务可用。

在您的代码中，这意味着系统一旦`onReceive()`结束就会重新进入睡眠状态，并且`startActivity(i)`不会同步工作 - 这直接导致了上面提到的问题 - 它将被启动，但很久很久之后，就在用户转身的时候屏幕上。

为了解决它，我建议做这样的事情：

```
//BroadcastReceiver
@Override
public void onReceive(Context context, Intent intent) {
    Logger.initialize(context);
    Logger.log("StartAlarm received");
    Intent i = new Intent(context, AlarmOnScreen.class);
    i.putExtras(intent.getExtras());
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
    AlarmOnScreen.acquireLock(context);
    //Before, system could sleep right after this line(not exactly, however) and activity actually would be started much later
}

//AlarmOnScreen (activity)

private static WakeLock sWakeLock;
public static void acquireLock(Context context) {
    PowerManager pm = (PowerManager)  context.getSystemService(Context.POWER_SERVICE);
    sWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "providersLock");
    //Limit 10 sec, if something wrong will happen - we'll not drain the battery to much.
    sWakeLock.acquire(10000); 
    //As we are acquiring and releasing only once - we don't need a counter.
    sWakeLock.setReferenceCounted(false);
}

private static void releaseLock(Context context) {
    try {
        sWakeLock.release();
    } catch (Exception e) {
        //In case it's already auto-released
        e.printStackTrace();
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alarm_on_screen);
    Logger.log("AlarmOnScreen create");
    //Time value of alarm is logged below
    (...)

@Override
protected void onResume() {
    releaseLock(this);
} 
```

该解决方案将首次起作用，让您更深入地了解问题。进行测试 - 只需在屏幕关闭时开始使用您的闹钟，并且可能会拔掉电缆，但我不确定最后一个是否真的需要让设备进入睡眠模式。

但是，我强烈建议实施更优雅的解决方案，适合您的项目，因为当前的静态参考设计很差，例如，它在赛车条件下无法完美运行。

希望它有所帮助，如果有任何问题，请告诉我。祝你好运。

**UPD：** 我想我还建议不仅使用 PARTIAL_WAKE_LOCK，而且还使用 FULL 一个。喜欢：

```
pm.newWakeLock(PowerManager.FULL_WAKE_LOCK 
    | PowerManager.ACQUIRE_CAUSES_WAKEUP, "providersLock"); 
```

无论如何，这将强制屏幕打开，而不取决于先前的状态和平台对新活动创建的反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:11:31.250

您必须为活动窗口设置几个标志：

```
getWindow().addFlags(
    WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
    WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD |
    WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON |
    WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
); 
```

# c++ - 扩展 typedef 结构（与 VC++11 兼容）

> ID：12314124
> 
> 赞同：0
> 
> 时间：2012-09-07T08:05:10.297
> 
> 标签：c++, stl, typedef, atomic, visual-c++-2012

我正在开发一个使用 Visual C++ 编译器 2010（和 2008）编写并使用的项目。我正在尝试使用新的 VC++11，但我对已经实现的功能有疑问。我们已经实现*了 typdef struct atomic_int*和*memory_order*但它们在 VC 11 中添加了几乎相同的功能，我得到了这些错误

```
error C2011: 'std::memory_order' : 'enum' type redefinition 
(D:\_work\wp-test\lib\Item.cpp) d:\_work\wp-test\lib\system\Atomic.h 
```

如果我将我们的实现捕获到#if 语句中

```
#if _MSC_VER >= 1700
#include <atomic>
#else
//out implementation
namspace std{
  typedef enum memory_order
  {
   memory_order_relaxed,
   ...
  } memory_order;
  typedef struct atomic_int{
   ...
  }
}
#endif 
```

似乎可行，但是缺少一个未在 VC 11 中实现的功能，并且另一个功能无法转换参数

```
error C2039: 'compare_swap' : is not a member of 'std::atomic_int'
D:\_work\wp-test\lib\network\ConnectionSocket.cpp

error C2664: 'std::atomic_int::atomic_int(const std::atomic_int &)' : 
cannot convert parameter 1 from 'int' to 'const std::atomic_int &' 
(D:\_work\wp-test\lib\Item.cpp) D:\_work\wp-test\lib\system\Cache.h 
```

请帮我找到一些解决方案......如何从 VC++11 覆盖整个*atomic_int*，或者如何将 memeber 添加到？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:46:32.577

所以**compare_swap**函数是 std::atomic_compare_exchange_weak/strong 中的旧草案名称。它已经在 C++11 中实现，但我们使用旧名称。

另一个错误**C2664**也是旧草稿的问题（缺少重载**加载**方法）。

# c# - 出于单元测试的目的，在没有数据库连接的情况下实例化一个空实体模型

> ID：12314125
> 
> 赞同：0
> 
> 时间：2012-09-07T08:05:10.613
> 
> 标签：c#, unit-testing, entity-framework-4, database-connection, system.data.sqlite

我想为一个方法写一些单元测试。但是，该方法引用了我的实体框架。这是我要测试的方法的一个非常人为的示例：

```
public int GetNumberWithName(string name, NWRevalDatabaseEntities entities)
{
    int number = (from n in entities.TableOfNumbers
                    where n.Name == name
                    select n).First();

    return number;
} 
```

**问题：**

有没有办法让我`NWRevalDatabaseEntities`在我的测试类中实例化一个对象**而不给它一个可行的数据库连接**，所以所有的表都是空的，然后只是插入测试所需的实体，而不是将它们持久化到数据库中？

存储`NWRevalDatabaseEntities`是一个 SQLite 数据库，可用的自动生成的构造函数是：

```
/// <summary>
/// Initializes a new NWRevalDatabaseEntities object using the connection string found in the 'NWRevalDatabaseEntities' section of the application configuration file.
/// </summary>
public NWRevalDatabaseEntities() : base("name=NWRevalDatabaseEntities", "NWRevalDatabaseEntities")
{
    this.ContextOptions.LazyLoadingEnabled = true;
    OnContextCreated();
}

/// <summary>
/// Initialize a new NWRevalDatabaseEntities object.
/// </summary>
public NWRevalDatabaseEntities(string connectionString) : base(connectionString, "NWRevalDatabaseEntities")
{
    this.ContextOptions.LazyLoadingEnabled = true;
    OnContextCreated();
}

/// <summary>
/// Initialize a new NWRevalDatabaseEntities object.
/// </summary>
public NWRevalDatabaseEntities(EntityConnection connection) : base(connection, "NWRevalDatabaseEntities")
{
    this.ContextOptions.LazyLoadingEnabled = true;
    OnContextCreated();
} 
```

所有这些都需要一个连接或连接字符串（或使用存储的连接字符串）。

如果这不可能，我将考虑创建一个内存 SQLite 数据库，然后将该连接提供给`NWRevalDatabaseEntities`构造函数。但是，这似乎会慢得多（因为它会命中数据库引擎）并且单元测试应该很快，并且还需要我将数据库定义代码放入我的应用程序中，而以前不需要它。

我知道使用实体框架测试任何东西通常都会进行集成测试，而不是单元测试。但是，这些测试并没有真正测试集成 - 数据库查询非常简单，并且可能还针对数组 - 我只想检查我的方法是否正确选择了查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:24:33.383

> 有没有办法让我在我的测试类中实例化一个 NWRevalDatabaseEntities 对象而不给它一个可行的数据库连接，所以所有的表都是空的，然后只插入测试所需的实体，而不是将它们持久化到数据库中？

不。

> 但是，这似乎会慢得多（因为它会命中数据库引擎）并且单元测试应该很快，并且还需要我将数据库定义代码放入我的应用程序中，而以前不需要它。

但是您的方法依赖于 EF，因此您应该测试它是否可以与 EF = 和数据库一起使用。

> 我知道使用实体框架测试任何东西通常都会进行集成测试，而不是单元测试。但是，这些测试并没有真正测试集成 - 数据库查询非常简单，并且可能还针对数组 - 我只想检查我的方法是否正确选择了查询。

简单与否，它是一个使用 Linq-to-entities 的数据库查询。它不是使用 Linq-to-objects 的数组查询。此查询也非常简单：`entities.TableOfNumbers.Last()`- 它适用于数组，但不适用于 EF。如果您不想测试查询，请将其与要测试的方法分开：

```
public int GetNumberWithName(string name, NWRevalDatabaseEntities entities)
{
    int number = ExecuteQuery(entities, Name);
    return number;
} 
```

现在你只需要找到如何替换`ExecuteQuery`测试方法。您可以制作它`protected virtual`并覆盖它以进行测试，因为您要测试的唯一一件事是它接收正确`Name`的参数并且您`GetNumberWithName`返回从`ExecuteQuery`.

现在您只需要编写集成测试`ExecuteQuery`来验证 Linq 查询是否与 EF 一起使用。

# iphone - 重新排序 TableView 列表并更新 SQLITE 数据库中的数据

> ID：12314129
> 
> 赞同：0
> 
> 时间：2012-09-07T08:06:05.587
> 
> 标签：iphone, ipad, sqlite, uitableview

**我已经实现了一个以sqlite**作为后端的 iPhone 应用程序。

因为我有一个表'*PrioritysDatabaseTable**' 用于一些Priorityin 数据库..

和**`two columnsPriorityID (Primary key + Auto Increment) & PriorityTitle(VarChar)`**

我从“PrioritysDatabaseTable”中检索数组中的记录并显示在表视图中。

在编辑表视图中，我有 3 个功能**1.Add new Priority，2.Delete RPriority，3.ReOrder Prioritys**。

![在此处输入图像描述](../Images/b2cc7d58dfe499543591a10532da03b3.png)

**1.add newPriority：**我在文本字段中插入了一个PriorityTitle，并在sqlite数据库中实现了插入方法。

**2.deletPriority：**删除通过点击单元格旁边的删除按钮，在sqlite数据库中实现Delete方法。

这两个工作正常

问题是**阅读表格时..**

我可以**`reorder in visible but not in data base..`**

我在更新查询中使用了一些逻辑来重新排序数据库表，但在某些情况下这些逻辑失败了..

任何人都可以正确实施

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:38:23.510

固定的：

从数据库中删除我所有的表数据

并从数组中重新插入，从“rolesDatabaseTable”中检索数组中的记录

更改顺序

# facebook - Facebook 评论插件 - 将评论发布到个人资料链接

> ID：12314131
> 
> 赞同：2
> 
> 时间：2012-09-07T08:06:11.957
> 
> 标签：facebook, facebook-javascript-sdk, facebook-comments

我将 Facebook 评论插件用于我的 Facebook 标签页。由于该选项卡位于 Facebook 页面内，当用户使用选中的选项“在我的 Facebook 个人资料上发表评论”发表评论时，他墙上的这篇帖子的链接会导致错误的 url。我已经创建了解析器来在我的选项卡中导航`app-data`并积极使用它`share`，但问题是 -**我可以对 Facebook 评论插件实现相同的行为以使用我定义的 URL 发布帖子，以及如何？** 谢谢。

目前，墙上指向评论的 Facebook 链接看起来像这样 ->

```
http://www.facebook.com/testexamplelala/posts/492870140724203 
```

我想把它改成这样->

```
https://www.facebook.com/pages/testpage/id?sk=appid&amp;app_data={ here my data for parser } 
```

# android - 登录后和注销时进程对话框不会停止

> ID：12314134
> 
> 赞同：0
> 
> 时间：2012-09-07T08:06:19.507
> 
> 标签：android

当我转到另一个屏幕并注销此进程对话框时，我的应用程序仍在显示处理中，但仍在处理中并没有停止它。

当我在登录页面中按下登录按钮时，我使用了以下代码：

```
btnLogin.setOnClickListener(new OnClickListener() {

    public void onClick(View view) {

        showProgress();
        postLoginData();

    }
});

public void postLoginData() {

    if (pin.getTextSize() == 0 || mobile.getTextSize() == 0) {

        AlertDialog.Builder altDialog = new AlertDialog.Builder(this);
        altDialog.setMessage("Please Enter Complete Information!");

    } else {
        Intent i = new Intent(this.getApplicationContext(),
        AgAppMenu.class);
        Bundle bundle = new Bundle();
        bundle.putString("mno", mobile.getText().toString());
        bundle.putString("pinno", pin.getText().toString());

        i.putExtras(bundle);
        startActivity(i);
    }
}

private void showProgress() {
    myProgressDialog = ProgressDialog.show(LoginScreen.this, null, "Processing please wait...", true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:13:14.137

你也应该处理`myProgressDialog.dismiss()`。比如从Handler等控制它。

如果你想从另一个活动中关闭这个对话框，最好`static Handler`在这个活动中设置一个并让另一个活动可以`static Handler`用来`sendEmptyMessage`关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:22:15.710

```
 private void showProgress()
    {    
       m_ProgressDialog = ProgressDialog.show(YourActivity.this,"Please wait...", "Saving And Sending Record  ...", true);
                new Thread() { public void run() {try{sleep(5000);} catch (Exception e) { }}}.start();   
    } 
```

# git - 列出使用特定子模块的存储库

> ID：12314137
> 
> 赞同：3
> 
> 时间：2012-09-07T08:06:40.160
> 
> 标签：git, git-submodules

我有几个 git 存储库（项目），它们使用其他存储库（“组件”）作为子模块：

```
Project 1
 - Component A
 - Component B
Project 2
 - Component B
 - Component C
Project 3
 - Component A
 - Component B 
```

所有存储库都在同一台服务器上并排：

```
 - Project 1
 - Project 2
 - Project 3
 - Component A
 - Component B
 - Component C 
```

我想知道在哪个项目中使用了组件 B。更具体：在哪个项目中使用了组件 B 的*特定提交*（或其后代）。

我的方法：创建一个包含所有子模块的数据库，存储它们的提交哈希。然后遍历特定提交的所有父级并查看它们是否在数据库中。

你知道更好的解决方案，也许只使用 git 命令？

您知道（部分）解决我的问题的应用程序/项目/库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:32:08.043

嗨，我今天为一位同事制作了小脚本，想知道给定子模块的哪些“版本”在超级模块的所有 sha1 中使用。

```
#!/bin/perl

use strict;
use warnings;

my $command = "";
my $submodule = $ARGV[0];
my $submodule_sha = "";
my @commits = ();
my %commit_hash = ();
my $commit = "";
my $key = "";
my $value = "";
$command="git log --since=\"1 week ago\" --format=format:%H";
@commits=`$command`;
foreach $commit (@commits)
{
    #cleaning the $commit
    $commit =~ s/\s+$//;
    $commit =~ s/^\s+//;
    $command="git ls-tree $commit \| grep $submodule \|  cut -d\" \" -f3 |cut -f1";
    print $command . "\n";
    $submodule_sha=`$command`;
    $commit_hash{$commit} = $submodule_sha;
}    

while (($key, $value) = each(%commit_hash)){
    print $key.", ".$value."\n";
} 
```

像这样执行

你应该在超级模块中

./scriptname.pl 子模块名

基本上我只是利用 git ls-tree 命令如果你在超级模块中，你可以做 git ls-tree HEAD | grep "submodulename" 这将为您提供子模块的提交。

可能有更聪明的方法，但这可以解决问题:)

干杯

# paypal - 将 Paypal API 证书与 ActiveMerchant 一起使用

> ID：12314138
> 
> 赞同：3
> 
> 时间：2012-09-07T08:06:41.700
> 
> 标签：paypal, activemerchant

我正在尝试在我的应用程序中使用 ActiveMerchant 实现贝宝服务。我的开发者的贝宝账户是为 API 证书凭证设置的。以下代码在与 API 签名一起使用时效果很好，但在我尝试实现 API 证书时给我一个错误。有人可以帮忙吗？

```
PAYPAL_CERT_PEM = File.read("#{Rails.root}/certs/paypal_cert_dev.pem")
config.after_initialize do
  ActiveMerchant::Billing::Base.mode = :test 
  paypal_options = {
    :login => "****************",
    :password => "**************",
    :certificate => PAYPAL_CERT_PEM
  }
  ::STANDARD_GATEWAY = ActiveMerchant::Billing::PaypalGateway.new(paypal_options)
end 
```

错误 ：

```
/Library/Ruby/Gems/1.8/gems/activemerchant-1.12.1/lib/active_merchant/billing/gateways/paypal/paypal_common_api.rb:72:in `initialize': An API Certificate or API Signature is required to make requests to PayPal (ArgumentError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:38:37.917

好吧，我知道我错在哪里了。我检查了 ActiveMerchant 文档，发现我应该使用 :pem 而不是 :certificate。所以，代码应该看起来像 -

```
PAYPAL_CERT_PEM = File.read("#{Rails.root}/certs/paypal_cert_dev.pem")
config.after_initialize do
  ActiveMerchant::Billing::Base.mode = :test 
  paypal_options = {
    :login => "****************",
    :password => "**************",
    :pem => PAYPAL_CERT_PEM
  }
  ::STANDARD_GATEWAY = ActiveMerchant::Billing::PaypalGateway.new(paypal_options)
end 
```

# c# - LINQ 中的可空模型字段

> ID：12314139
> 
> 赞同：0
> 
> 时间：2012-09-07T08:06:42.937
> 
> 标签：c#, .net, linq, entity-framework, linqpad

在 LinqPad 中执行查询时出现异常

```
var allNewsInADay= (from t in Tnews where t.SendTime.Value.Year==2012 && 
    t.SendTime.Value.Month==8  && t.SendTime.Value.Day==20 select t);
allNewsInADay.Dump(); 
```

> 例外：不支持成员访问“System.DateTime 值”

如果使用 .HasValue 属性：`NotSupportedException: The member access 'Boolean HasValue' is not supported`

-- 我使用 MySql，我的目的是获取特定日期的所有记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:09:16.810

您可以改用[SqlFunctions.DatePart](http://msdn.microsoft.com/en-us/library/dd487171.aspx)

用法 ：

```
where SqlFunctions.DatePart(t.SendTime, "yy") == 2012 &&
      SqlFunctions.DatePart(t.SendTime, "mm") == 8 &&
      SqlFunctions.DatePart(t.SendTime, "dd") == 20) 
```

或者

```
var dt = new DateTime(2012, 8, 20);

...
where t.SendTime == dt 
```

或[规范函数](http://msdn.microsoft.com/en-us/library/bb738563%28v=vs.100%29)（所有提供者都支持）

```
 where EntityFunctions.Year(t.SendTime) == 2012 
```

也许一个空检查 `t.SendTime != null`（或`t.SendTime.HasValue`）作为第一个谓词

将是必要的

或者只是删除`Value`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:20:29.907

```
var rslt= (from t in Tnews 
           where t.SendTime.HasValue 
              && t.SendTime.Value.Year==2012 
              && t.SendTime.Value.Month==8  
              && t.SendTime.Value.Day==20 
           select t); 
```

或者

```
var someDate = new DateTime(2012,8,20);
var rslt= (from t in Tnews 
           where t.SendTime.HasValue  
              && t.SendTime.Value.Date==someDate 
           select t); 
```

会有帮助吗？

更新：你试过不好。刚刚跑了这个：

```
class Program
{
    public class TNews
    {
        public DateTime? SendTime { get; set; }
        public string Id;
    }
    static void Main(string[] args)
    {
        var tnews = new TNews[]
        {
            new TNews { SendTime = new DateTime(2012,8,20), Id="2012-08-20" },
            new TNews { SendTime = new DateTime(2012,8,20,12,20,0), Id="2012-08-20 12:20" },
            new TNews { SendTime = new DateTime(2012,8,21), Id="2012-08-21" },
            new TNews { SendTime = null, Id="null" },
        };

        var someDate = new DateTime(2012, 8, 20);
        var rslt = (from t in tnews
                    where t.SendTime.HasValue 
                       && t.SendTime.Value.Date == someDate
                    select t);

        foreach (var t in rslt)
        {
            Console.WriteLine(t.Id);
        }
    }
} 
```

输出是：

```
2012-08-20
2012-08-20 12:20
Press any key to continue . . . 
```

# class - Unity JS 是如何有类的？

> ID：12314145
> 
> 赞同：6
> 
> 时间：2012-09-07T08:06:47.757
> 
> 标签：class, unity3d, unityscript

我正在阅读一篇关于 Unity JS 的文章。文章展示了unity js中的一个类的例子。

```
class Person{
    var name;
    var career;
}

//Create objects of type Person
var john = Person();
john.name = "John Smith";
john.career = "doctor";
Debug.Log(john.name + " is a " + john.career); 
```

看起来 Unity JS 实际上支持该`class`关键字。它如何支持`class`JavaScript？他们是在使用死掉的 ES4 规范还是修改后的 ES3 或 5？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T08:11:37.943

查看这篇关于 UnityScript 和 JavaScript 之间差异的文章：[http ://wiki.unity3d.com/index.php?title=UnityScript_versus_JavaScript](http://wiki.unity3d.com/index.php?title=UnityScript_versus_JavaScript)

此外：[Wikipedia](http://en.wikipedia.org/wiki/Unity_%28game_engine%29)将 UnityScript 描述为“具有受 ECMAScript 启发的语法的自定义语言”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T06:54:19.293

Unity 的 Javascript 不是真正的 Javascript，它是一种语法相似的初学者新语言。有些人喜欢称它为 UnityScript，因为它们只是两种不同的语言。

Unity 的 Javascript 是一种基于类的 OO 语言，它支持所有 OOP 功能，并且可以编译为与 Unity 中的 C# 相同的汇编代码。

例如，Unity 中的 javascript 文件“Foo.js”

```
var myVar : int;
function Update() {} 
```

与 C# 脚本相同

```
class Foo : MonoBehaviour {
    int myVar;
    void Update() {}
} 
```

我的意思是 100% 相同，即使您在 Foo.js 中找不到关键字“类”，但您实际上是在创建一个 Foo 对象。

您可以在另一个脚本“Boo.js”中继承类 Foo 来验证我所说的：

```
class Boo extends Foo {
    function Update() {}
} 
```

Unity 的 javascript 有 javscript 的语法，但有 C# 的精神。

# html - 使用 Watir 单击表格元素

> ID：12314152
> 
> 赞同：2
> 
> 时间：2012-09-07T08:07:06.880
> 
> 标签：html, button, onclick, html-table, watir

JavaScript 按钮我想点击，虽然它在一个表中：

```
<table>
  <tr>
    <td height="20" align="center" nowrap style="color:#0000FF; cursor:pointer; border: 1 solid #426996; background-color: #FAFAFF;" 
      onClick="Initial();"
      onMouseOver="javascript:{style.backgroundColor='#426996'; style.color='#FFFFFF'}" 
      onMouseOut="javascript:{style.backgroundColor='#FFFFFF'; style.color='#0000FF'}">
      <font face="Verdana, Arial, Helvetica, sans-serif" size="1"><b>&nbsp;New Incident&nbsp;</b></font>
    </td>
    <td width="4"></td> 
```

这里还有四个“按钮”，但我无法单击其中任何一个。似乎唯一将按钮与另一个分开的是`onClick`javascript事件。我尝试过使用 xpath，但我似乎无法找到该元素。我试过这个...

```
ie.button(:xpath => "//td[@onClick='Initial();']".exists?

ie.link(:xpath => "//td[@onClick='Initial();']".exists? 
```

他们返回假。

我认为一旦找到这个元素，我就可以使用`.fire_event('onClick')`or`.click`并且它应该可以工作，但我似乎无法找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:29:33.310

使用带有正则表达式的 #td 方法：

```
ie.td(:html => %r{Initial()}).click 
```

如果可能，则为您的 td 分配一些 html ID 或类属性以使定位更容易。类似的东西：

```
<td id="mytd" ... onClick="Initial();">...</td>
ie.td(:id => "mytd").click 
```

或者使用带有正则表达式的文本：

```
ie.td(:text => /New Incident/).click 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:37:27.787

您尝试单击的元素不是按钮，而是表格中的单元格。更多信息：[http ://www.w3.org/wiki/HTML/Elements/td](http://www.w3.org/wiki/HTML/Elements/td)

像这样的东西应该可以工作（未经测试）：

```
browser.element(:css => "td[onClick=Initial();]").click 
```

更多信息：[http ://www.w3.org/TR/CSS2/selector.html#matching-attrs](http://www.w3.org/TR/CSS2/selector.html#matching-attrs)

# java - 多次同时运行同一个jar文件

> ID：12314155
> 
> 赞同：0
> 
> 时间：2012-09-07T08:07:16.803
> 
> 标签：java, jar, simultaneous

我想多次运行保存在本地磁盘上的 jar 文件。jar 文件应在给定实例中运行多次。所有的 jar 文件（同一个文件）应该一起运行。有没有办法我可以实现它？我是否必须编写一个会创建多个线程的代码？

现在我暂时打开了许多命令提示符并在 cmd 中分别调用 jar，因此同时运行它们。但这不是一种有效的方式。有没有更有效的方法来做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:33:34.743

> 我无法打开 20-30 cmd 窗口并单独运行它们，它对处理器的负载很重

使用该方法会产生 (20-30)-1 JVM 的开销。您可以像这样创建第二个主类：

```
public static void main(final String[] args) {
    int numberOfSimultaneousExecutions = 25;
    java.util.concurrent.Executor executor = java.util.concurrent.Executors.newFixedThreadPool(numberOfSimultaneousExecutions);
    for (int i = 0; i < numberOfSimultaneousExecutions; i++) {
        executor.execute(new Runnable() {
            @Override
            public void run() {
                RealMainClass.main(args);
            }
        });
    }
} 
```

**现在 JAR 在一个**JVM中同时运行。

然而，这是危险的。如果您的代码正在访问（和修改）任何共享静态值，您的应用程序*几乎肯定***会** **中断**。

 ***您还可以从参数中获取同时执行的次数：

```
public static void main(final String[] argsWithNum) {
    int numberOfSimultaneousExecutions = Integer.parseInt(argsWithNum[0]);
    final String[] args = new String[argsWithNum.length - 1];
    System.arraycopy(argsWithNum, 1, args, 0, args.length);
    java.util.concurrent.Executor executor = java.util.concurrent.Executors.newFixedThreadPool(numberOfSimultaneousExecutions);
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:10:02.970

要运行某些东西，您需要一个线程。如果你想同时运行多次，你需要多个线程。并非所有代码都编写为线程安全的，因此您需要检查代码是否正确运行。***

# php - 谷歌分析网址参数

> ID：12314156
> 
> 赞同：2
> 
> 时间：2012-09-07T08:07:19.720
> 
> 标签：php, analytics, tracking, qr-code

我需要制作一个页面（videos.php）来下载基于 URL 参数的 .MP4 视频文件。该页面将与印刷杂志中的二维码一起使用。

IE

```
?file=videofiles/video1.mp4 
```

或者

```
?file=videofiles/video2.mp4 
```

我不确定的是，谷歌分析是否会使用单独的参数跟踪该页面，或者只是作为一个页面，其中两个视频的点击都将被视为 video.php 的点击，而不考虑视频本身。

我希望能够分别查看两个视频的点击量。Analytics 会处理参数还是有更好的/其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:40:37.307

您还可以使用 Google 的自定义广告系列跟踪工具

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033863](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033863) 和 [http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867&topic=1032998&ctx=话题](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867&topic=1032998&ctx=topic)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:30:41.770

我很久以前做过。我在这里为你粘贴我的配置（我不知道是否发生了变化，我不知道这是否是最好的解决方案......但可以作为一个起点）：

在您的分析页面中：

*   点击管理员（右上角），
*   点击`Filters`标签
*   `new filter`
*   选择`Advanced`
*   创建新过滤器（选择名称和域）
*   `Custom filter`
*   `Advanced`

    字段 A -> 提取推荐人`(.*)`

    字段 B -> 提取 B -

    输出到 -> 构造函数`User-defined` `$A1`

字段 A 必填 是

字段 B 必填 否

覆盖输出字段 是

区分大小写 否

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:28:43.570

您可以为具有不同参数的相同 url 配置 url 目标目标。看这里： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=1116091](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1116091)

# c# - get_SynonymInfo 对某些单词抛出内存不足异常

> ID：12314157
> 
> 赞同：13
> 
> 时间：2012-09-07T08:07:21.563
> 
> 标签：c#, ms-word, office-interop

我有一个简单的测试程序，使用 Microsoft Word Interop 从同义词词典中获取单词含义：

```
using System;
using Word = Microsoft.Office.Interop.Word;

class Program
{
    static void Main(string[] args)
    {
        string word = "elite"; // = "common";

        var app = new Word.Application();
        var synInfo = app.SynonymInfo[word, Word.WdLanguageID.wdEnglishUS];

        if (synInfo.Found && synInfo.MeaningCount > 0)
        {
            foreach (var meaning in synInfo.MeaningList as Array)
                Console.WriteLine(meaning.ToString());
        }

        // release memory and quit Word app... (see below)
    }
} 
```

使用 Visual Studio 2010 中的 .Net 4.0 并参考 Office 12 PIA，在 Microsoft Office 2010 和 Microsoft Office 2013 Preview 中进行了尝试。对于超过 150 000 个不同的单词，这就像一个魅力。但我注意到，对于某些话，get_SynonymInfo 方法会引发异常：

```
Unhandled Exception: System.Runtime.InteropServices.COMException: Insufficient memory or disk space.
   at Microsoft.Office.Interop.Word.ApplicationClass.get_SynonymInfo(String Word, Object& LanguageID)
   at WordInteropTest.Program.Main(String[] args) in Program.cs:line 11 
```

我知道这些话导致异常：

*   精英（但“精英”有效）
*   靠近
*   掖
*   褶裥
*   步行
*   在船上
*   吓坏了

这与异常无关，但为了给出完整的源代码，我确实释放内存并正确退出 Word 应用程序。当我退出测试程序时，进程列表中没有剩余 msword.exe。

```
 // release memory and quit Word app... (continuing from above)
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(synInfo);
        app.Quit(Word.WdSaveOptions.wdDoNotSaveChanges);
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(app); 
```

手动使用 Microsoft Word 中的词库可为所有单词提供正确的结果。

如何避免异常并使用互操作代码获得结果？是否有使用其他 API 的有效替代方法？

* * *

**更新：在**[本地编程网络论坛](http://www.elitesecurity.org/p3164718)上，有人告诉我，此代码适用于 Office 2007。令我惊讶的是，确实如此。但是对于本问题中所述的 Office 2010 和 2013 Preview，它不起作用，至少在我的计算机/虚拟机上不起作用。然后我尝试引用 Office 14 PIA 而不是 Office 12，但在 Office 2013 Preview 中，它的行为相同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T23:02:17.493

我可以在 Word 2010 上的计算机上重现此问题。错误代码 (HResult) 为`-2146822464`or `0x800A16C0`，在 Internet 上找不到任何内容。

正如[Remou](https://stackoverflow.com/users/2548/remou)所说，这个问题[早在 2002 年](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/microsoft.public.office.developer.automation/ex58NtYsJmc)就已经存在。

如果*Word*中的同义词列表包含两种或多种类型的一个或多个同义词（例如*adj. / v.*、*n. / v.*或*adj. / n.*），就会发生这种情况。语言/字典无关紧要。例如，`onboard`返回错误 in`wdEnglishUS`而不是 in `wdEnglishUK`，因为后者不认识这个词。其他词在两个字典中都存在，并且在任何一种情况下都会出错。

显然，这是一个错误，并且只是 Word 互操作的问题，因为 Word 本身可以毫无问题地显示这一切。据我所知，这是互操作允许您获取同义词信息的唯一方法，并且没有解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:56:37.090

如果你在 MS Word 中输入你的“坏”词并检查它的同义词，结果是什么？它在那里工作吗？您是否可能会得到一个额外的对话框，在 API 中处理得不好？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-01T22:22:18.050

我对“ONE”这个词也有同样的问题。我有一个例外列表可以捕捉到它......但是有 170,000 个单词，我怀疑我会捕捉到它们 :)。这太令人沮丧了。

我有一个伪解决方法，我将“排除”作为字符串进行 DIMMED，然后使用此行来捕获坏词：

If InStr(Excludes, "[" & AddYourArrayWordHere & "]") Then AddYourArrayWordHere = ""

# eclipse - treeviewer 列标题合并

> ID：12314158
> 
> 赞同：1
> 
> 时间：2012-09-07T08:07:25.530
> 
> 标签：eclipse, header, merge, treeviewer, two-columns

我正在用 Java 开发一个 Eclipse 插件，它有一个带有列的树形查看器。我需要在该 treeviewer 中合并 2 个列标题。

|A栏| B 栏 | B栏|

即我需要在查看器上方显示如下。|A栏| B 栏 |

有人可以告诉我这样做的方法吗？

# django - 基于文本长度的django过滤器

> ID：12314168
> 
> 赞同：97
> 
> 时间：2012-09-07T08:08:20.597
> 
> 标签：django

我想根据文本的长度过滤我的模型

```
MyModel.objects.filter(len(text) > 10) 
```

其中 text 是 MyModel 模型中的 Char 或 Text 字段

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2016-01-06T18:20:34.380

对于 Django >= 1.8，您可以使用[Length 函数](https://docs.djangoproject.com/en/1.8/ref/models/database-functions/#django.db.models.functions.Length)，这是 @Pratyush[`CHAR_LENGTH()`](https://stackoverflow.com/a/19296333/623735)在 MySQL 或`LENGTH()`其他一些数据库的底层：

```
from django.db.models.functions import Length
qs = MyModel.objects.annotate(text_len=Length('text_field_name')).filter(
    text_len__gt=10) 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-10-10T12:54:36.137

**另一种方法是：**

```
MyModel.objects.extra(where=["CHAR_LENGTH(text) > 300"]) 
```

这也可以用于文本长度超过 255 个字符的情况。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2017-07-23T00:45:33.730

通过将内置函数注册为用于查找`Length`的**转换，可以为 Django >= 1.9 提供一个不错的解决方案。**`CharField`

**在项目中注册**一次转换。（最好的地方可能是models.py。）

```
from django.db.models import CharField
from django.db.models.functions import Length

CharField.register_lookup(Length, 'length') 
```

**使用**：

```
result = MyModel.objects.filter(text__length__gt=10) 
```

[在Length as a transform](https://docs.djangoproject.com/en/1.11/ref/models/database-functions/#length)的文档中查看完全相同的示例。

* * *

它适用于所有后端，由`LENGTH()`大多数后端和`CHAR_LENGTH()`MySQL 编译。然后自动为 CharField 的所有子类注册，例如为 EmailField。`TextField`必须单独注册。注册名称“length”是安全的，因为转换名称永远不会被同名的字段名称或相关字段名称遮蔽或遮蔽。

唯一的缺点可能是可读性难题：“长度”从何而来？（查找是全局的，但幸运的是，如果对可读性有用，同样可以安全地在更多模块中重复注册，而不会在查询运行时产生任何可能的开销。）

其他类似有价值的解决方案是上面的[hobs](https://stackoverflow.com/a/34640020/448474)，如果注册计数并且不重复使用类似的查询，则该解决方案会更短。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-09-07T09:03:09.363

您可以使用正则表达式过滤器来搜索特定长度的文本：

```
MyModel.objects.filter(text__regex = r'.{10}.*') 
```

* * *

警告：对于 MySQL，最大长度值为 255。否则抛出异常：

```
DatabaseError: (1139, "Got error 'invalid repetition count(s)' from regexp") 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2017-09-28T15:07:54.923

我会在您的应用服务器上解决问题，而不是对您的数据库征税。您可以通过以下方式执行此操作：

```
models_less_than_ten = []
mymodel = MyModel.objects.all()
for m in mymodel:
    if len(m.text) > 10:
          models_less_than_ten.append(m) 
```

* * *

## 回答 #6

> 赞同：-20
> 
> 时间：2012-10-06T00:57:31.613

如果您只添加一个预先计算（记忆）文本长度的列，**那**会更好更快。

例如

```
class MyModel(models.Model):
    text = models.TextField()
    text_len = models.PositiveIntegerField()

     def save(self, *args, **kwargs):
         self.text_len = len(self.text)
         return super(MyModel, self).save(*args, **kwargs)

MyModel.objects.filter(text_len__gt = 10)     # Here text_len is pre-calculated by us on `save` 
```

# joomla - Joomla 网站中的错误

> ID：12314175
> 
> 赞同：0
> 
> 时间：2012-09-07T08:08:38.397
> 
> 标签：joomla, warnings, joomla1.5

我刚刚注意到我的 Joomla 网站上有一个错误，上面写着：

```
Warning: array_merge() [function.array-merge]: Argument #2 is not an array in /home/yucoke/public_html/administrator/components/com_content/helper.php on line 115 
```

和

```
Warning: Invalid argument supplied for foreach() in /home/yucoke/public_html/libraries/joomla/html/html/select.php on line 68 
```

我正在使用 Joomla 1.5.15，这发生在我的主机控制面板升级后，不确定它是否是错误的唯一原因。我还注意到我无法查看我的菜单，也无法在 Joomla 后端进行过滤和/或搜索。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:17:32.727

我有一种强烈的感觉，这可以通过将您的网站更新到 1.5 系列 (1.5.26) 的最新版本来解决。您必须下载 1.5.0 - 1.5.26 更新，因为这是 Joomla 网站现在提供的所有内容。

[http://joomlacode.org/gf/project/joomla/frs/?action=FrsReleaseBrowse&frs_package_id=6311](http://joomlacode.org/gf/project/joomla/frs/?action=FrsReleaseBrowse&frs_package_id=6311)

有时，当第 3 方扩展出现问题时会发生此类错误，但是，如果您说这是在控制面板更新后发生的，我看不出第 3 方扩展是如何导致这种情况的。

希望这可以帮助。

# asp.net - 如何防止代码注入 windows server 2008 R2 .aspx

> ID：12314177
> 
> 赞同：1
> 
> 时间：2012-09-07T08:08:41.890
> 
> 标签：asp.net, windows-server-2008-r2, pci-dss, pci-compliance, html-injections

我负责管理一个需要遵守 PCI 准则的站点。经过前一段时间的大量工作，它终于通过了PCI安全检查。最近它又开始失败了。我怀疑这是因为在安全检查中添加了新测试。

检查现在抱怨的是代码注入网站的可能性。这是其中一件事的一个例子：

```
http://www.monorep.co.uk/vauxhall/new-vans/?DealergroupId=<aavxhv%20> 
```

如果您使用 Firebug 查看源代码，您会看到它是对我的代码执行此操作的：

```
<input name="DealergroupId" type="hidden" value="<aavxhv >"> 
```

行。本身无害，但我可以看到他们在做什么。

他们还提供了其他非常相似的示例，但它们都是同一行。

你怎么能真正防止这种事情呢？而且，有害吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:21:09.820

您必须使用编码 html 页面上的所有呈现文本

```
HttpContext.Current.Server.HtmlEncode() 
```

所有来自数据库、用户输入或其他来源的渲染文本。

例如，您的代码看起来像

```
<input name="DealergroupId" type="hidden" value="<%=Server.HtmlEncode(cParametrFromUrl)%>"> 
```

# macos - Nodejs www mac os x 服务器

> ID：12314179
> 
> 赞同：1
> 
> 时间：2012-09-07T08:08:56.290
> 
> 标签：macos, apache, node.js, dns, osx-server

我正在尝试让 node.js 在 mac os x 服务器上工作。使用服务器应用程序，在这里我将 example.com 设置为侦听端口 80 上的所有 ip 并从文件夹中读取，example.com 有一条 A 记录指向我的服务器静态 ip。这适用于 apache。

我已将 node.js 设置为侦听本地 ip 上的端口 8080，但是当我转到 example.com:8080 时，我得到 404。

```
}).listen(8080, '10.100.100.15'); 
```

Apache 也在侦听该 IP，但据我所知仅在端口 80 上侦听。任何想法，链接等表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:07:25.897

路由器缺少 8080 的转发器。

# ios - 如何在 iPhone 中检测眼睛瞳孔并测量瞳孔之间的距离

> ID：12314180
> 
> 赞同：4
> 
> 时间：2012-09-07T08:08:57.477
> 
> 标签：ios, core-image, face-detection

我研究了很多关于人脸检测的例子，并且我已经使用`CIDetector`和检测了 iPhone 中的眼睛`HaarCascade_eye.xml`。但我想检测眼睛的瞳孔并想测量瞳孔之间的距离。请指导我一些事情，以便我可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:19:19.020

使用以下公式计算两点之间的距离：![距离公式](../Images/ec13ce40db6a0579b9b9dd069f9368d1.png)

这将获得两只眼睛的中心点（由 CIDetector 检测到）并比较它们的位置以输出您正在寻找的测量值。

```
if(faceFeature.hasLeftEyePosition && faceFeature.hasRightEyePosition)
{
    CGPoint leftEyeCenter = faceFeature.leftEyePosition;
    CGPoint rightEyeCenter = faceFeature.rightEyePosition;

    float simpleDistance = rightEyeCenter.x - leftEyeCenter.x;
    //This finds the distance simply by comparing the x coordinates of the two pupils

    float complexDistance = fabsf(sqrtf(powf(leftEyeCenter.y - rightEyeCenter.y, 2) + powf(rightEyeCenter.x - leftEyeCenter.x, 2)));
    //This will return the diagonal distance between the two pupils allowing for greater distance if the pupils are not perfectly level.       
} 
```

# google-tv - 使用 Google TV 在直播电视上叠加信息的现状如何

> ID：12314181
> 
> 赞同：2
> 
> 时间：2012-09-07T08:08:58.550
> 
> 标签：google-tv

我正在寻找具有当前状态的资源，以便能够在直播电视上覆盖信息和表单。这是我能找到的最新信息：[https ://groups.google.com/forum/?fromgroups=#!topic/googletv-android/lu6zMatbbVs](https://groups.google.com/forum/?fromgroups=#!topic/googletv-android/lu6zMatbbVs)

我知道支持 toast 通知，但我看到一些应用程序，如 SocialEyez 也有输入表单，例如允许用户发推文。

任何有关如何执行此操作的指示将不胜感激。关于 SO 的每个问题都说不可能是从 2011 年开始的。

我只关心最新版本的 Google TV 硬件和软件。无需传统支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:31:30.997

这目前不可用，但正在处理中。请输入功能请求

> [http://code.google.com/p/googletv-issues/issues/list](http://code.google.com/p/googletv-issues/issues/list)

跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:19:01.693

看起来就像几天前一样，谷歌已经决定不去解决答案中发布的问题……太糟糕了。

# nhibernate - NHibernate 一对多映射不在主键上

> ID：12314191
> 
> 赞同：9
> 
> 时间：2012-09-07T08:09:36.087
> 
> 标签：nhibernate, nhibernate-mapping, one-to-many

我正在使用旧数据库，并且有以下表格：

```
Person                  ExternalFile
------                  ------------
Id           (int, PK)  Key           (string)
ConnectionId (int)      Type          (int)
Name         (string)   ConnectionId  (int)
Firstname    (string)   Path          (string)
                        Id            (int, PK) 
```

个人有许多外部文件。

给出的例子：

```
Person A                ExternalFile1          ExternalFile2
--------                -------------          -------------
Id: 1                   Key: 'WN'              Key: 'WN'
ConnectionId: 29        Type: 4                Type: 4
Name: 'Foo'             ConnectionId: 29       ConnectionId: 29
Firstname: 'Bar'        Path: 'C:/file1.txt'   Path: 'D:/file2.txt'
                        Id: 1                  Id: 2 
```

我可以映射这个以便用户拥有一包外部文件吗？

我的映射文件

外部文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="Not.Relative" assembly="Not">
  <class name="ExternalFile" table="tbl_externalfiles" lazy="false">
    <id name="Id" column="`Id`">
      <generator class="identity" />
    </id>
    <property name="Key" column="`CDKey`" />
    <property name="ConnectionId" column="`KeyValue`" />
    <property name="Type" column="`DocType`"  />
    <property name="Path" column="`Path`" />
  </class>
</hibernate-mapping> 
```

人：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="Not.Relative" assembly="Not">
  <class name="Person" table="tbl_person" lazy="false">
    <id name="Id" column="`Id`">
      <generator class="identity" />
    </id>
    <property name="ConnectionId" column="`pairid`" />
    <property name="Name" column="`name`" />
    <property name="Firstname" column="`firstname`"  />
  </class>
</hibernate-mapping> 
```

我的查询如下所示：

```
SELECT * 
FROM tbl_externalfiles
WHERE KeyValue = @p0
AND   CDKey = @p1
AND   DocType = @p2

@p0 = 29, @p1 = 'WN', @p2 = 4 
```

所以我必须给包从人员到外部文件的 3 个参数，

1：人的ConnectionID

2: 'WN' <-- 总是一样的（关键）

3:4 <-- 总是相同的（类型）

当我映射到复合 ID 时，这在多对一上有效，但在这种情况下我不能使用它。

这里甚至可以放一个包吗？我是否应该只使用额外的查询来获取我使用条件进行查询的 ExternalFiles。

编辑：

我知道我只能为 connectionId 执行以下操作

```
<bag name="Files" lazy="false">
  <key column="KeyValue" property-ref="ConnectionId"/>
  <one-to-many class="ExternalFile" />
</bag> 
```

但我也不知道如何在其中获取 Type 和 Key 参数。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T10:04:05.597

试试这个

```
 <bag name="Files" lazy="false" where="DocType = '4' AND CDKey = 'WN'">
      <key column="KeyValue" property-ref="ConnectionId" />
      <one-to-many class="ExternalFile" />
    </bag> 
```

# php - PHP中的动态对象调用

> ID：12314192
> 
> 赞同：1
> 
> 时间：2012-09-07T08:09:36.273
> 
> 标签：php, codeigniter, object

我在codeigniter中开发。我的程序会自动创建它的数据库，所以我为每个表创建一个 createScheme() 方法。我尝试像这样调用所有这些方法：

```
public function createDB()
{
    $tables = array('user', 'manufacturer', 'device');

    foreach ($tables as $i => $table) {
        $this->load->library($table);
        $this->{$table}::createScheme();
    }

} 
```

这是创建一个错误：

> 解析错误：语法错误，第 22 行 /var/www/clients/client0/web79/web/application/controllers/welcome.php 中的意外 T_PAAMAYIM_NEKUDOTAYIM

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:12:02.870

尝试

```
$this->{$table}->createScheme(); 
```

另请参阅[范围解析运算符](http://en.wikipedia.org/wiki/Scope_resolution_operator)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:13:42.480

T_PAAMAYIM_NEKUDOTAYIM 是希伯来语，它指的是 PHP 的范围解析运算符（“::”）。如果您收到此消息，则意味着 PHP 看到了一个类名，并希望您使用范围解析运算符访问它。

所以 createScheme() 不是静态的，而是普通的类方法。

利用

```
$this->{$table}->createScheme(); 
```

# html - 我尝试形成一个容器，帮助我显示一个文本，其中容器的高度伸展以适合文本

> ID：12314194
> 
> 赞同：0
> 
> 时间：2012-09-07T08:09:41.287
> 
> 标签：html, css

我尝试形成一个容器，它可以帮助我显示一个文本，其中容器的高度可以拉伸以适应文本。我试过高度：自动；但是当文本变长时，它仍然会隐藏一些文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:15:42.110

它应该与`height:auto`

查看演示[http://jsfiddle.net/YUTTh/](http://jsfiddle.net/YUTTh/)

# jquery - jQuery .replace

> ID：12314198
> 
> 赞同：1
> 
> 时间：2012-09-07T08:10:26.120
> 
> 标签：jquery, replace

如何使用 jQuery 将这个“ **-** |”变成“ **-** ”？

```
 .replace(/__-__ | /g, '__-__' 
```

这也替换了空格

```
 .replace('__-__ | ', '__-__' 
```

这仅在第一次发生时替换

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:15:35.970

不知道你为什么在 jQuery 中尝试这个。字符串替换是一种 javascript 字符串方法，除非您正在谈论替换 DOM 元素。

```
input.replace(/- \|/g, '-_-'); 
```

[请参阅此示例。](http://jsfiddle.net/GwSTt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:29:41.870

你的回答对我有帮助！:)

```
 .replace(/__-__ \|/g, '__-__') 
```

这工作得很好！谢谢！

# assembly - ARM cortex m4 DSP 代码上的快速 1bit 透明度 blit

> ID：12314200
> 
> 赞同：2
> 
> 时间：2012-09-07T08:10:39.110
> 
> 标签：assembly, arm, signal-processing, cortex-m3, blit

我想将字节从位图设置到内存，设置值不等于给定透明度字节值的字节。

示意图我想做：

```
for (char *src=start;src<end;src++,dst++) 
{
    if (*src!=VALUE) {
       *dst=*src;
    }
} 
```

即仅在 C 或程序集中设置与值不同的字节（或从程序集反向翻译的 C）

为了更快，我考虑过使用 32 位加载、src 和 dst 之间的 SEL 操作以及 32 位存储。但是，我需要设置掩码，它位于 APSR.GE 中。

如果我没记错的话，用 VALUE 进行 SIMD 比较（使用 USUB8）只会检查结果是 >= 还是 < 到 VALUE，无法检查它们是否相等。（当然，您可以将 VALUE 限制为 0 或 255 并收工...）

另一种可能性是在 src 上使用预先计算的掩码，然后手动设置 APSR.GE（可能吗？）但是 1）它使用内存，2）在 3）之前获取数据并不总是可行的）不确定它是否真的会比逐字节访问要快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T21:59:31.463

确切的语法现在让我无法理解，但是像这样的东西怎么样：

*   将现有图像中的四个字节加载到 Ra (LDR)
*   将源图像中的四个字节加载到 Rb (LDR)
*   XOR Ra 与适当的掩码 (~VALUE) 将 VALUE 更改为 0 (EOR)
*   具有与上述相同掩码的 XOR Rb (EOR)
*   使用带有 0 的寄存器执行 USUB8 以设置 GE 标志 (USUB8)
*   使用 SEL 在现有图像字节和源图像字节之间进行选择，写入 Rc (SEL)
*   再次使用掩码 XOR Rc 以恢复原始字节 (EOR)
*   将 Rc 写回现有映像 (STR)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-22T07:42:08.560

您可能不再需要这个，但对于可能需要类似算法的新手，我建议如下：

有

*   VALUE_4 : 4 byte VALUE（在所有 4 个字节上复制的字节）
*   SRC：4 个图像字节
*   DST：4 个目标字节

使用 USUB8 严格比较（GE 表示 ">= 0" 所以不是 GE 表示 "< 0" ）：

*   USUB8(SRC, VALUE_4) => 设置 GE 位
*   DST = SEL(DST, SRC) => 从 Src 中选择值严格低于 VALUE 的字节
*   USUB8（VALUE_4，SRC）
*   DST = SEL(DST, SRC) => 从 Src 中选择值严格高于 VALUE 的字节

您的循环将包含 7 个操作（2 个加载、1 个存储、2 个 USUB8、2 个 SEL）以及循环管理。

# java - 我可以在摆动的组件边界之外绘制吗？

> ID：12314203
> 
> 赞同：5
> 
> 时间：2012-09-07T08:10:54.667
> 
> 标签：java, swing, graphics, border, swingx

> **可能重复：**
> [在组件边界之外绘制](https://stackoverflow.com/questions/7970938/drawing-outside-a-components-bounds)

我想使用 Swing（和 SwingX）制作“好看”的界面，但我仍在努力创造漂亮的阴影。[我发现在 SwingX、 DropShadowBorder](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/border/DropShadowBorder.html)中已经有一个边框做我想要的（部分）。

我也发现[了这个](http://www.curious-creature.org/2005/07/07/fast-or-good-drop-shadows/)，阴影非常好，但它适用于图像。但我相信你可以让它与`JComponent`. 我已经修改了代码以生成具有`BufferedImage`组件大小的空白（它仅适用于矩形组件，但我并不关心）并从此图像创建阴影。

阴影生成有效，但我的问题是我只能在摆动组件的边界内渲染阴影，但我必须在两个轴上渲染阴影。

**我可以避免这种情况并在组件边界之外渲染吗？例如，我可以在尺寸为 (50, 50) 的组件的 paintComponent 方法中的 (0, 100) 处绘制任何东西吗？**

谢谢。

**编辑**：这是我想避免的一个例子。阴影超过了组件的两个轴的大小（组件没有渲染让你看到阴影）。

![在此处输入图像描述](../Images/97cd5cd71851729cd09139b6006573ee.png)

**EDIT2**：我不确定我是否足够清楚（如果是这种情况，我很抱歉）所以这里是我想要做的图形表示。

![在此处输入图像描述](../Images/df043cb6bb5e533c300f0f0268a71586.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:21:33.627

这段代码可以帮助你

![在此处输入图像描述](../Images/c2554dd2bc8fe86272c70da230c1404e.png)

```
import java.awt.*;
import java.awt.geom.*;
import java.awt.image.ColorModel;
import java.awt.image.Raster;
import java.awt.image.WritableRaster;
import javax.swing.*;
import javax.swing.event.*;

public class Panel2Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ShadeOptionsPanel shadeOptions = new ShadeOptionsPanel();
                ShadowSelector shadowSelector = new ShadowSelector(shadeOptions);
                //ComponentSource componentSource = new ComponentSource(shadeOptions);
                JFrame f = new JFrame("Rounded Concept Demo with Shadows");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.add(shadowSelector, "North");
                f.add(shadeOptions);
                //f.add(componentSource, "South");
                f.setSize(300, 200);
                f.setLocation(150, 150);
                f.setVisible(true);
            }
        });
    }

    private Panel2Test() {
    }
}

class ShadeOptionsPanel extends JPanel {

    private static final long serialVersionUID = 1L;
    private final int PAD, DIA, BORDER;
    private Color colorIn, colorOut;
    private int xc, yc;
    private Ellipse2D eIn, eOut;
    private GradientPaint gradient;
    private CustomPaint customPaint;
    private Area arcBorder;
    private int width, height;
    private Point2D neOrigin, nwOrigin, swOrigin, seOrigin, neDiag, nwDiag, swDiag, seDiag;
    private final static int NORTHEAST = 0, NORTHWEST = 1, SOUTHWEST = 2, SOUTHEAST = 3;
    public int shadowVertex = 3;

    public ShadeOptionsPanel() {
        PAD = 25;
        DIA = 75;
        BORDER = 10;
        colorIn = Color.black;
        colorOut = getBackground();
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        width = getWidth();
        height = getHeight();
        g2.drawRoundRect(PAD, PAD, width - 2 * PAD, height - 2 * PAD, DIA, DIA);
        calculateArcOrigins();
        calculateCardinalDiagonals();
        drawVertexArc(g2, shadowVertex);
        switch (shadowVertex) {
            case NORTHEAST:
                drawNorthSide(g2);
                drawEastSide(g2);
                xc = PAD + DIA / 2; // draw northwest arc
                yc = PAD + DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = getInnerEllipse(nwOrigin, nwDiag);
                eOut = getOuterEllipse(nwOrigin, nwDiag);
                arcBorder = getArcArea(eIn, eOut, 90.0);
                g2.fill(arcBorder);
                xc = width - PAD - DIA / 2; // draw southeast arc
                yc = height - PAD - DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = getInnerEllipse(seOrigin, seDiag);
                eOut = getOuterEllipse(seOrigin, seDiag);
                arcBorder = getArcArea(eIn, eOut, 270.0);
                g2.fill(arcBorder);
                break;
            case NORTHWEST:
                drawNorthSide(g2);
                drawWestSide(g2);
                xc = width - PAD - DIA / 2;// draw northeast arc
                yc = PAD + DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = getInnerEllipse(neOrigin, neDiag);
                eOut = getOuterEllipse(neOrigin, neDiag);
                arcBorder = getArcArea(eIn, eOut, 0.0);
                g2.fill(arcBorder);
                xc = PAD + DIA / 2;// draw southwest arc
                yc = height - PAD - DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = getInnerEllipse(swOrigin, swDiag);
                eOut = getOuterEllipse(swOrigin, swDiag);
                arcBorder = getArcArea(eIn, eOut, 180.0);
                g2.fill(arcBorder);
                break;
            case SOUTHWEST:
                drawWestSide(g2);
                drawSouthSide(g2);
                xc = PAD + DIA / 2; // draw northwest arc
                yc = PAD + DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = getInnerEllipse(nwOrigin, nwDiag);
                eOut = getOuterEllipse(nwOrigin, nwDiag);
                arcBorder = getArcArea(eIn, eOut, 90.0);
                g2.fill(arcBorder);
                xc = width - PAD - DIA / 2; // draw the southeast arc
                yc = height - PAD - DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = getInnerEllipse(seOrigin, seDiag);
                eOut = getOuterEllipse(seOrigin, seDiag);
                arcBorder = getArcArea(eIn, eOut, 270.0);
                g2.fill(arcBorder);
                break;
            case SOUTHEAST:
                drawEastSide(g2);
                drawSouthSide(g2);
                xc = width - PAD - DIA / 2; // draw northeast arc
                yc = PAD + DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = getInnerEllipse(neOrigin, neDiag);
                eOut = getOuterEllipse(neOrigin, neDiag);
                arcBorder = getArcArea(eIn, eOut, 0.0);
                g2.fill(arcBorder);
                xc = PAD + DIA / 2;  // draw southwest arc
                yc = height - PAD - DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = getInnerEllipse(swOrigin, swDiag);
                eOut = getOuterEllipse(swOrigin, swDiag);
                arcBorder = getArcArea(eIn, eOut, 180.0);
                g2.fill(arcBorder);
        }
    }

    private Ellipse2D getInnerEllipse(Point2D center, Point2D corner) {
        return new Ellipse2D.Double(center.getX() - DIA / 2,
                center.getY() - DIA / 2, DIA, DIA);
    }

    private Ellipse2D getOuterEllipse(Point2D center, Point2D corner) {
        int w = DIA, h = DIA;
        if (shadowVertex < 2) {
            if (center.getY() > corner.getY()) {
                h += 2 * BORDER;
            } else {
                w += 2 * BORDER;
            }
        } else if (center.getY() > corner.getY()) {
            w += 2 * BORDER;
        } else {
            h += 2 * BORDER;
        }
        return new Ellipse2D.Double(center.getX() - w / 2, center.getY() - h / 2, w, h);
    }

    private Area getArcArea(Ellipse2D e1, Ellipse2D e2, double start) {
        Arc2D arc1 = new Arc2D.Double(e1.getBounds2D(), start, 90.0, Arc2D.PIE);
        Arc2D arc2 = new Arc2D.Double(e2.getBounds2D(), start, 90.0, Arc2D.PIE);
        Area arc = new Area(arc2);
        arc.subtract(new Area(arc1));
        return arc;
    }

    private void drawNorthSide(Graphics2D g2) {
        gradient = new GradientPaint(width / 2, PAD - BORDER, colorOut,
                width / 2, PAD, colorIn);
        g2.setPaint(gradient);
        g2.fill(new Rectangle2D.Double(PAD + DIA / 2, PAD - BORDER,
                width - 2 * (PAD + DIA / 2) + 1, BORDER));
    }

    private void drawWestSide(Graphics2D g2) {
        gradient = new GradientPaint(PAD - BORDER, height / 2, colorOut,
                PAD, height / 2, colorIn);
        g2.setPaint(gradient);
        g2.fill(new Rectangle2D.Double(PAD - BORDER, PAD + DIA / 2,
                BORDER, height - 2 * (PAD + DIA / 2) + 1));
    }

    private void drawSouthSide(Graphics2D g2) {
        gradient = new GradientPaint(width / 2, height - PAD, colorIn,
                width / 2, height - PAD + BORDER, colorOut);
        g2.setPaint(gradient);
        g2.fill(new Rectangle2D.Double(PAD + DIA / 2, height - PAD,
                width - 2 * (PAD + DIA / 2) + 1, BORDER));
    }

    private void drawEastSide(Graphics2D g2) {
        gradient = new GradientPaint(width - PAD, height / 2, colorIn,
                width - PAD + BORDER, height / 2, colorOut);
        g2.setPaint(gradient);
        g2.fill(new Rectangle2D.Double(width - PAD, PAD + DIA / 2,
                BORDER, height - 2 * (PAD + DIA / 2) + 1));
    }

    /**
     * Draws the central, full-shaded arc (opposite of the unshaded arc).
     */
    private void drawVertexArc(Graphics2D g2, int index) {
        switch (index) {
            case NORTHEAST:
                xc = width - PAD - DIA / 2;
                yc = PAD + DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = new Ellipse2D.Double(width - PAD - DIA, PAD, DIA, DIA);
                eOut = new Ellipse2D.Double(width - PAD - DIA - BORDER, PAD - BORDER,
                        DIA + 2 * BORDER, DIA + 2 * BORDER);
                arcBorder = getArcArea(eIn, eOut, 0.0);
                g2.fill(arcBorder);
                break;
            case NORTHWEST:
                xc = PAD + DIA / 2;
                yc = PAD + DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = new Ellipse2D.Double(PAD, PAD, DIA, DIA);
                eOut = new Ellipse2D.Double(PAD - BORDER, PAD - BORDER,
                        DIA + 2 * BORDER, DIA + 2 * BORDER);
                arcBorder = getArcArea(eIn, eOut, 90.0);
                g2.fill(arcBorder);
                break;
            case SOUTHWEST:
                xc = PAD + DIA / 2;
                yc = height - PAD - DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = new Ellipse2D.Double(PAD, height - PAD - DIA, DIA, DIA);
                eOut = new Ellipse2D.Double(PAD - BORDER, height - PAD - DIA - BORDER,
                        DIA + 2 * BORDER, DIA + 2 * BORDER);
                arcBorder = getArcArea(eIn, eOut, 180.0);
                g2.fill(arcBorder);
                break;
            case SOUTHEAST:
                xc = width - PAD - DIA / 2;
                yc = height - PAD - DIA / 2;
                customPaint = new CustomPaint(xc, yc, new Point2D.Double(0, DIA / 2),
                        DIA / 2, BORDER, colorIn, colorOut);
                g2.setPaint(customPaint);
                eIn = new Ellipse2D.Double(width - PAD - DIA, height - PAD - DIA, DIA, DIA);
                eOut = new Ellipse2D.Double(width - PAD - DIA - BORDER,
                        height - PAD - DIA - BORDER, DIA + 2 * BORDER, DIA + 2 * BORDER);
                arcBorder = getArcArea(eIn, eOut, 270.0);
                g2.fill(arcBorder);
        }
    }

    private void calculateArcOrigins() {
        neOrigin = new Point2D.Double(width - PAD - DIA / 2, PAD + DIA / 2);
        nwOrigin = new Point2D.Double(PAD + DIA / 2, PAD + DIA / 2);
        swOrigin = new Point2D.Double(PAD + DIA / 2, height - PAD - DIA / 2);
        seOrigin = new Point2D.Double(width - PAD - DIA / 2, height - PAD - DIA / 2);
    }

    private void calculateCardinalDiagonals() {
        neDiag = new Point2D.Double(neOrigin.getX()
                + DIA * Math.cos(Math.toRadians(45)) / 2,
                neOrigin.getY() - DIA * Math.sin(Math.toRadians(45)) / 2);
        nwDiag = new Point2D.Double(nwOrigin.getX()
                + DIA * Math.cos(Math.toRadians(135)) / 2,
                nwOrigin.getY() - DIA * Math.sin(Math.toRadians(135)) / 2);
        swDiag = new Point2D.Double(swOrigin.getX()
                + DIA * Math.cos(Math.toRadians(225)) / 2,
                swOrigin.getY() - DIA * Math.sin(Math.toRadians(225)) / 2);
        seDiag = new Point2D.Double(seOrigin.getX()
                + DIA * Math.cos(Math.toRadians(315)) / 2,
                seOrigin.getY() - DIA * Math.sin(Math.toRadians(315)) / 2);
    }

    public Dimension getInnerSize() {
        return new Dimension((int) nwOrigin.distance(neOrigin),
                (int) nwOrigin.distance(swOrigin));
    }
}

class ShadowSelector extends JPanel {

    private static final long serialVersionUID = 1L;
    private ShadeOptionsPanel soPanel;
    private String[] directions = {"northeast", "northwest", "southwest", "southeast"};

    public ShadowSelector(ShadeOptionsPanel sop) {
        soPanel = sop;

        final SpinnerListModel model = new SpinnerListModel(directions);
        model.setValue(directions[3]);
        JSpinner spinner = new JSpinner(model);
        spinner.setPreferredSize(new Dimension(90, spinner.getPreferredSize().height));
        spinner.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                String value = (String) model.getValue();
                soPanel.shadowVertex = model.getList().indexOf(value);
                soPanel.repaint();
            }
        });
        add(new JLabel("shadow vertex", JLabel.RIGHT));
        add(spinner);
    }
}

class CustomPaint implements Paint {

    Point2D originP, radiusP;
    int radius, border;
    Color colorIn, colorOut;

    public CustomPaint(int x, int y, Point2D radiusP,
            int radius, int border,
            Color colorIn, Color colorOut) {
        originP = new Point2D.Double(x, y);
        this.radiusP = radiusP;
        this.radius = radius;
        this.border = border;
        this.colorIn = colorIn;
        this.colorOut = colorOut;
    }

    @Override
    public PaintContext createContext(ColorModel cm, Rectangle deviceBounds, Rectangle2D userBounds, AffineTransform xform, RenderingHints hints) {
        Point2D xformOrigin = xform.transform(originP, null), xformRadius = xform.deltaTransform(radiusP, null);
        return new CustomPaintContext(xformOrigin, xformRadius, radius, border, colorIn, colorOut);
    }

    @Override
    public int getTransparency() {
        int alphaIn = colorIn.getAlpha();
        int alphaOut = colorOut.getAlpha();
        return (((alphaIn & alphaOut) == 0xff) ? OPAQUE : TRANSLUCENT);
    }
}

class CustomPaintContext implements PaintContext {

    Point2D originP, radiusP;
    Color colorIn, colorOut;
    int radius, border;

    public CustomPaintContext(Point2D originP, Point2D radiusP, int radius, int border, Color colorIn, Color colorOut) {
        this.originP = originP;
        this.radiusP = radiusP;
        this.radius = radius;
        this.border = border;
        this.colorIn = colorIn;
        this.colorOut = colorOut;
    }

    @Override
    public void dispose() {
    }

    @Override
    public ColorModel getColorModel() {
        return ColorModel.getRGBdefault();
    }

    @Override
    public Raster getRaster(int x, int y, int w, int h) {
        WritableRaster raster = getColorModel().createCompatibleWritableRaster(w, h);
        int[] data = new int[w * h * 4];
        for (int j = 0; j < h; j++) {
            for (int i = 0; i < w; i++) {
                double distance = originP.distance(x + i, y + j);
                double r = radiusP.distance(radius, radius);
                double ratio = distance - r < 0 ? 0.0 : (distance - r) / border;
                if (ratio > 1.0) {
                    ratio = 1.0;
                }
                int base = (j * w + i) * 4;
                data[base + 0] = (int) (colorIn.getRed() + ratio * (colorOut.getRed() - colorIn.getRed()));
                data[base + 1] = (int) (colorIn.getGreen() + ratio * (colorOut.getGreen() - colorIn.getGreen()));
                data[base + 2] = (int) (colorIn.getBlue() + ratio * (colorOut.getBlue() - colorIn.getBlue()));
                data[base + 3] = (int) (colorIn.getAlpha() + ratio * (colorOut.getAlpha() - colorIn.getAlpha()));
            }
        }
        raster.setPixels(0, 0, w, h, data);
        return raster;
    }
} 
```

# ruby-on-rails - 如何通过将参数传递给操作在 Ruby 中对某些 jQuery 事件运行操作？

> ID：12314207
> 
> 赞同：0
> 
> 时间：2012-09-07T08:11:03.080
> 
> 标签：ruby-on-rails, jquery

我想检查用户名唯一性 onBlur jQuery 事件。我添加了特殊属性来查找我需要检查的字段，如下所示：

```
<input data-validate="/checkname" id="user_email" name="user[email]" size="30" type="email" value=""> 
```

并在 RegistrationsController 中添加了操作（使用设计）：

```
 def checkname
  if User.where('user = ?', params[:user]).count == 0
    render :nothing => true, :status => 200
  else
  render :nothing => true, :status => 409
  end
   return
  end

 ...routes...

   checkname GET   /checkname(.:format)  devise/registrations#checkname 
```

我想从 jQuery 中调用它，发送参数添加 css 类取决于 checkname 操作：

```
 $('[data-validate]').blur(function() {
    $this = $(this);
    $.get($this.data('validate'), {
        email: $this.val()
    }).success(function() {
        $this.addClass('valid');
    }).error(function() {
        $this.addClass('error');
    });
}); 
```

**编辑：**请求似乎正在调用，但可能调用错误。从 Firebug 网络选项卡：

```
 http://127.0.0.1:3000/checkname?email=new%40mail.com 404 not found 
```

在电子邮件字段中输入 new@mail.com 时。

这段代码不断向我的领域添加错误类，所以我有一些错误 - 有人可以建议在哪里吗？

# java - 在 Struts 2.x 中使用自定义资源包/属性扩展库

> ID：12314218
> 
> 赞同：3
> 
> 时间：2012-09-07T08:11:46.193
> 
> 标签：java, properties, struts2, resourcebundle

伙计们，

目前，我们在 Struts 2.x 中使用一组标准属性文件来提供我们的 I18N 功能 - 在大多数情况下，这些文件完全符合我们的需要。但是，在某些情况下，能够让单个属性引用资源包中的其他属性会很棒，例如：

```
name.first=John
name.last=Doe
name.full={name.first} {name.last} 
```

我知道 java.util.Properties 的几个扩展提供了这些功能，例如：

*   eproperties：[http ://code.google.com/p/eproperties/](http://code.google.com/p/eproperties/)
*   XProperties：[http ://www2.sys-con.com/itsg/virtualcd/java/archives/0612/mair/index.html](http://www2.sys-con.com/itsg/virtualcd/java/archives/0612/mair/index.html)

我想知道是否有人曾尝试将这些以某种方式集成到 Struts 2.x 中——是否可以覆盖处理资源包解析的机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:24:25.960

没有像这样的内置功能，但 IIRC 您可以通过以下方式设置文本提供程序：

```
<bean type="com.opensymphony.xwork2.TextProvider" name="struts"
     class="com.opensymphony.xwork2.TextProviderSupport" scope="default" /> 
```

我从来没有真正做过这个，但这是一个有价值的、有趣的实验。

属性可能包括任意的 OGNL，但是——您可以同时（详细地）伪造它：

```
name.first=John
name.last=Doe
name.full=%{getText('name.first')} %{getText('name.last')} 
```

*（你也可以使用 ${...}，但我更喜欢 %{...}，所以很明显它是 OGNL。）*

我已经为这个问题添加了书签以供研究，这里有几个很酷的想法。

# c# - 将泛型参数传递给 MVC Action

> ID：12314219
> 
> 赞同：1
> 
> 时间：2012-09-07T08:11:50.957
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller, generics

我正在构建一个 MVC 控制器，它将接受一个 JSON 对象，但我想让它接受的类型是通用的。我可以这样做吗？

```
public class RecognitionData<T> 
{
    DateTime StartTime { get; set; }
    DateTime EndTime { get; set; }
    T Value { get; set; }
}

public class Address
{
    string Line1 { get; set; }
    string Line2 { get; set; }
    string Locality { get; set; }
    string Country { get; set; }
    string Postcode { get; set; }
}

public class AddressController : Controller
{
    public string Save(RecognitionData<Address> result)
    {
        ...
    }
} 
```

当我尝试将数据发布为 JSON 时，虽然我可以将 Request["result"] 中的“result”字段视为字符串，但“result”参数为空。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:58:01.287

尝试将模型中的属性公开。

# python - 动态 3d 数组切片和排序

> ID：12314222
> 
> 赞同：0
> 
> 时间：2012-09-07T08:12:03.243
> 
> 标签：python, numpy, matplotlib, scipy, scientific-computing

我对如何在 numpy 中准确地对 3D 数组进行切片和排序感到有些困惑。似乎有很多方法可以手动执行此操作，但我需要使用`numpy.where()`. 例如，如果`lo360`是 2D 经度值，则 2D 中的`lat2d`纬度值`yi`是经度值的一维数组，并且`xi`是纬度值的一维数组。

`xi`并`yi`动态变化以表示一个小的地理区域，而`lo360`和`lat2d`是类型为 (-90,90) 和 (0,360) 的行星的静态纬度和经度。`xi`与但形式相似，`lo360`但`yi`降序而不是升序。因此，如果我有一个 3D 数组表示`A(levels,lat,lon)`并且我想提取一个区域：

```
slice2d = np.where( (lo360 <= xi.max()) &                                                    
                    (lo360 >= xi.min()) &                                                    
                    (lat2d <= yi.max()) &                                                    
                    (lat2d >= yi.min()) )
lon_old = lo360[slice2d]; print lon_old.shape
(441,) 
```

当我想要一个 2D 切片时，这会返回一个 1D 数组。数据是正确的，所以这不是我的问题。

然后，当我尝试对 3D 数组进行切片时，`A[i][slice2d]`我得到一个不易动态验证的 1D 数组。我习惯`griddata`了 3D 数组`xi`和`yi`分辨率，但我将`yi`lat 更改为升序`yi = yi[::-1]`：：

```
for i in np.arange(4):                                                          
    nvals[i] = matplotlib.mlab.griddata(lat_old,lon_old,                                     
                                            mvals[i][slice2d],                                   
                                            yi,xi) 
```

这是我认为问题开始的地方，我需要结果有下降的纬度，所以我这样做是为了`nvals`：`nvals = nvals[:,::-1,:]`。但是数据全都搞砸了。我怀疑索引中存在一些错误，但是由于 python 没有返回错误，所以我正在对索引做一些事情，思考一件事，但得到另一件事。

也许你们中的一位专家可以发现一些奇怪的东西，或者提出更好的方法。当我弄清楚如何附加文件时，我会附上图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:42:55.307

看起来 griddata 返回的结果是转置的——它给出了沿列的 x 轴和沿行的 y 轴：

```
import numpy as np

#lats x lons
a2d=np.arange(20).reshape( (4,5) )
print a2d

lats=np.arange(4)
lats2d=np.ones(5)*lats[:,None]
yi=[1,3]
nlats=np.sum(np.bitwise_and(lats>=np.min(yi),lats<=np.max(yi)))

lons=np.arange(5)
lons2d=np.ones(4)[:,None]*lons
xi=[1,2]
nlons=np.sum(np.bitwise_and(lons>=np.min(xi),lons<=np.max(xi)))

#slice= lats2d>=1 & lats2d<=2 & lons2d>=1 & lons2d<=2
s1=np.bitwise_and(lats2d>=np.min(yi),lats2d<=np.max(yi))
s2=np.bitwise_and(lons2d>=np.min(xi),lons2d<=np.max(xi))
slice=np.bitwise_and(s1,s2)
print slice
slice=np.where(slice)
print a2d[slice].reshape( (nlats,nlons) )

import matplotlib.mlab as mlab

print mlab.griddata(lats2d[slice],lons2d[slice],a2d[slice],
#              np.array([1.3,2.1,2.9]),np.array([1.1,1.9]))
            np.array([1,2,3]),np.array([1,2])) 
```

# php - Uploadify：写入完成但没有上传文件

> ID：12314223
> 
> 赞同：0
> 
> 时间：2012-09-07T08:12:07.493
> 
> 标签：php, javascript, jquery, upload, uploadify

我想用 uploadify v.3.1 (flash) 上传图片。我单击选择文件，选择一个文件，文件已上传，但最后我收到错误消息：

`haus2.jpg (256KB) - HTTP Error (401)`

`php.ini`设置：

```
memory_limit: 256M
upload_max_filesize: 40M
post_max_size: 8M 
```

我使用uploadify的php文件：

```
<script type="text/javascript">
    $(document).ready(function(){
        $(function() {
            $('#image_upload1').uploadify({
                'swf'            : '/project/swf/uploadify.swf',
                'uploader'       : '/project/includes/uploadify.php',
                'cancelImg'      : '/project/images/static/uploadify-cancel.png',
                'folder'         : '/project/images/uploaded/<?php echo $_SESSION['newCreatedID']; ?>',
                'multi'          : true,
                'auto'           : true,
                'removeCompleted': false,
                'queueSizeLimit' : 10,
                'simUploadLimit' : 10,
                'fileExt'        : '*.jpg; *.jpeg; *.png; *.gif',
                'fileDesc'       : 'JPG Image Files (*.jpg); JPEG Image Files (*.jpeg); PNG Image Files (*.png), GIF (*.gif)',
                'onUploadError'  : function(file, errorCode, errorMsg, errorString) {
                    alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
                },
                'onUploadSuccess': function(file, data, response) {
                    alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
                }
            });
        });
    });
</script>

<form action="step2_do.php" name="newEntry" id="newEntry" method="post" enctype="multipart/form-data">
    <input id="image_upload1" name="image_upload1" type="file" />
    <input type="submit" value=" Submit" id="submit-btn" class="inputform" />
</form> 
```

没有抛出错误。

但是没有错误。在 Firebug 中，永远不会显示错误。上传的文件夹有 777 权限，我删除了`.htaccess`那里的建议。

`uploadify.php`：

```
if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    mkdir(str_replace('//','/',$targetPath), 0777, true);
    move_uploaded_file($tempFile,$targetFile);
    echo str_replace($_SERVER['DOCUMENT_ROOT'],'',$targetFile);
} 
```

我找不到任何错误。我可以调试什么？

我没有收到任何错误

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

**编辑：**

现在我完全忘记了需要密码才能访问该站点的 htaccess。现在文件上传正在写入完成，但服务器上没有文件夹/文件。我实施`onUploadSuccess`了以下错误消息：

```
The file haus.jpg was successfully uploaded with a response of true:<br />
<b>Warning</b>:  mkdir() [<a href='function.mkdir'>function.mkdir</a>]: File exists in <b>/home/myuser/www/home/project/includes/uploadify.php</b> on line <b>21</b><br />
/haus.jpg 
```

主要问题是我将uploadify 的旧API 与新API 混淆了。对于调试，我使用：

```
$request = implode(";", $_REQUEST);
file_put_contents('uploadify.txt', chr(10) . ": request" . $request, FILE_APPEND); 
```

我的最终初始化如下所示：

```
$(document).ready(function(){
    $(function() {
        $('#image_upload1').uploadify({
            'swf'            : '/project/swf/uploadify.swf',
            'uploader'       : '/project/includes/uploadify.php',
            'formData'       : {'folder' : '/project/images/uploaded/<?php echo $_SESSION['newCreatedID']; ?>'},
            'multi'          : true,
            'auto'           : true,
            'removeCompleted': false,
            'queueSizeLimit' : 10,
            'simUploadLimit' : 10,
            'fileTypeExt'        : '*.jpg; *.jpeg; *.png; *.gif',
            'fileTypeDesc'       : 'JPG Image Files (*.jpg); JPEG Image Files (*.jpeg); PNG Image Files (*.png), GIF (*.gif)',
            'onUploadError'  : function(file, errorCode, errorMsg, errorString) {
                alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
            },
            'onUploadSuccess': function(file, data, response) {
                alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
            }
        });
    });
}); 
```

`formData`应该使用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:17:24.120

401 提示上传前需要对用户进行身份验证。

您可以尝试在参数列表中发回您的 $.cookie('sessionid') ，以确保它知道哪个会话正在上传。

# android - 如何使用 webview url 发送 Header 值？

> ID：12314224
> 
> 赞同：2
> 
> 时间：2012-09-07T08:12:08.740
> 
> 标签：android

我开发了具有 webview 的 android 应用程序。我想用 url 发送标头值。如果有可能有人帮我提供源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:31:36.107

```
Map<String, String> headers = new HashMap<String, String>();
headers.put(header-key, header-value);
mWebView.loadUrl(your url, headers); 
```

这个有帮助吗？[http://developer.android.com/reference/android/webkit/WebView.html#loadUrl(java.lang.String,%20java.util.Map)](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String,%20java.util.Map%3Cjava.lang.String,%20java.lang.String%3E%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T08:32:09.850

最好通过 HttpClient 来做到这一点。

# android - Android Facebook 验证访问令牌时出错

> ID：12314229
> 
> 赞同：0
> 
> 时间：2012-09-07T08:12:22.120
> 
> 标签：android

我能够使用我在 android 上的应用程序连接到 Facebook，并查看我的姓名、姓氏等字段。然后我去`Facebook.com`我的电脑上，从允许的应用程序中删除我的应用程序，然后重新启用（用于测试）。

然后，当我运行我的应用程序时，我在 Logcat 中收到以下错误：

`FacebookError: Error validating access token: Session does not match current stored session.`

这可能是因为用户在创建会话后更改了密码，或者 Facebook 出于安全原因更改了会话。

我尝试了一切，搜索了论坛 - 但没有运气。

**我的代码：**

```
public static final String TAG = "FACEBOOK";
private Facebook mFacebook;
public static final String APP_ID = "00112233211545";// I changed this when i publish to Stackoverflow
private AsyncFacebookRunner mAsyncRunner;
private static final String[] PERMS = new String[] { "read_stream" };
private SharedPreferences sharedPrefs;
private Context mContext;

private TextView username;
private ProgressBar pb;

public void setConnection() {
    mContext = this;
    mFacebook = new Facebook(APP_ID);

    mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    mFacebook.extendAccessTokenIfNeeded(this, null);
}

public void getID(TextView txtUserName, ProgressBar progbar) {
    username = txtUserName;
    pb = progbar;
    if (isSession()) {
        Log.d(TAG, "sessionValid");
        mAsyncRunner.request("me", new IDRequestListener());
    } else {
        // no logged in, so relogin
        Log.d(TAG, "sessionNOTValid, relogin");
        mFacebook.authorize(this, PERMS, new LoginDialogListener());
    }
}

public boolean isSession() {
    sharedPrefs = PreferenceManager.getDefaultSharedPreferences(mContext);
    String access_token = sharedPrefs.getString("access_token", "x");
    Long expires = sharedPrefs.getLong("access_expires", -1);
    Log.d(TAG, access_token);

    if (access_token != null && expires != -1) {
        mFacebook.setAccessToken(access_token);
        mFacebook.setAccessExpires(expires);
    }
    return mFacebook.isSessionValid();
}

private class LoginDialogListener implements DialogListener {

    public void onComplete(Bundle values) {
        Log.d(TAG, "LoginONComplete");
        String token = mFacebook.getAccessToken();
        long token_expires = mFacebook.getAccessExpires();
        Log.d(TAG, "AccessToken: " + token);
        Log.d(TAG, "AccessExpires: " + token_expires);
        sharedPrefs = PreferenceManager
                .getDefaultSharedPreferences(mContext);
        sharedPrefs.edit().putLong("access_expires", token_expires)
        .commit();
        sharedPrefs.edit().putString("access_token", token).commit();
        mAsyncRunner.request("me", new IDRequestListener());
    }

    public void onFacebookError(FacebookError e) {
        Log.d(TAG, "FacebookError: " + e.getMessage());
    }

    public void onError(DialogError e) {
        Log.d(TAG, "Error: " + e.getMessage());
    }

    public void onCancel() {
        Log.d(TAG, "OnCancel");
    }
}

private class IDRequestListener implements RequestListener {

    public void onComplete(String response, Object state) {
        try {
            Log.d(TAG, "IDRequestONComplete");
            Log.d(TAG, "Response: " + response.toString());
            JSONObject json = Util.parseJson(response);

            final String id = json.getString("id");
            final String name = json.getString("name");
            osnovni_meni.this.runOnUiThread(new Runnable() {
                public void run() {
                    username.setText("Welcome: " + name+"\n ID: "+id);
                    pb.setVisibility(ProgressBar.GONE);

                }
            });
        } catch (JSONException e) {
            Log.d(TAG, "JSONException: " + e.getMessage());
        } catch (FacebookError e) {
            Log.d(TAG, "FacebookError: " + e.getMessage());
        }
    }

    public void onIOException(IOException e, Object state) {
        Log.d(TAG, "IOException: " + e.getMessage());
    }

    public void onFileNotFoundException(FileNotFoundException e,
            Object state) {
        Log.d(TAG, "FileNotFoundException: " + e.getMessage());
    }

    public void onMalformedURLException(MalformedURLException e,
            Object state) {
        Log.d(TAG, "MalformedURLException: " + e.getMessage());
    }

    public void onFacebookError(FacebookError e, Object state) {
        Log.d(TAG, "FacebookError: " + e.getMessage());
    }

}

protected void onActivityResult1(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    mFacebook.authorizeCallback(requestCode, resultCode, data);
}

public void facebook_login(View view) throws IOException, JSONException
{
    TextView txtUserName = (TextView) findViewById(R.id.txtUserName);
    ProgressBar pbLogin = (ProgressBar) findViewById(R.id.pbLogin);
    pbLogin.setVisibility(ProgressBar.VISIBLE);
    setConnection();

    getID(txtUserName, pbLogin);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:34:39.863

你最有可能得到`isSessionValid = true`- 你需要忽略并运行它`mFacebook.authorize`。

# android - 我在哪里可以访问 google android 开发者控制台上的错误和冻结报告？

> ID：12314230
> 
> 赞同：0
> 
> 时间：2012-09-07T08:12:27.457
> 
> 标签：android

我记得看过一次，但现在找不到了

编辑：我的意思是这里[https://play.google.com/apps/publish/](https://play.google.com/apps/publish/)

我记得找到一份显示应用程序崩溃次数和详细信息的报告。但我再也找不到了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:20:54.820

![在此处输入图像描述](../Images/93931c331566e9dc6fed9b9bbadd97d6.png)在已发布图标旁边的右侧有一个名为 Error 的超链接，如果出现新的错误报告，它将显示为 Errors(1) 或 Errors

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:22:46.537

您可以在 google play 控制台中的应用程序数量右侧找到它。添加了屏幕截图

![在此处输入图像描述](../Images/b94856cb1fe3363ee9397934bc3f9cf1.png)

**链接**-[在这里找到](https://play.google.com/apps/publish/Home?dev_acc=15218280837457536070)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:14:40.063

你是说LogCat吗？

在 Eclipse 中转到 Window > Show View > LogCat

# java - 如何导入和使用zxing库？

> ID：12314236
> 
> 赞同：2
> 
> 时间：2012-09-07T08:12:58.940
> 
> 标签：java, android, zxing

我真的不知道如何使用 zxing 库。

我下载了 zxing-1.7.zip 和 zxing-2.zip 并配置了 Android 项目的路径以将它们包含为库。我正在尝试使用 ie:`IntentIntegrator`但它不可用。我也尝试使用`import zxing`，但它给了我错误。

我的问题是：如何导入 zxing-1.7.zip 和 zxing-2.zip 的 .jave 文件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T08:24:09.220

根据主持人的建议，我在这篇文章中发布了将 zxing 导入我的 android 应用程序的操作。似乎很多人参考这篇文章来获得 zxing 的答案。

zxing 的小伙伴们让使用 1.7 创建一个 android 项目变得更加容易。它不像以前那么痛苦了。这是一个快速博客，适合任何想快速为 android 创建 zxing 项目的人。

*   从 zxing.org 查看 zxing 源代码
*   在 Eclipse 上创建一个 Android 项目
*   删除 main.xml
*   右键单击“src”目录并单击导入。按提到的顺序浏览到以下目录。当您将它们一一添加以进行导入时，请确保在导入向导的编辑字段中具有 src 目录。并且您仅选择左侧目录树上的“com”目录。不要选择 src。
    *   核
    *   安卓集成
    *   安卓
    *   确保你的 android sdk 版本是 9，任何更小的和 androidmanifest.xml 都会哭。
    *   一种语言中的 Strings.xml 将在婴儿床，只需在 ' 字符之前放一个 /

为了人民的利益，

*   我有一个与 zxing 1.7 集成的 android hello world [http://www.4shared.com/file/bFx8Y5Ys/zXingJune2010.html](http://www.4shared.com/file/bFx8Y5Ys/zXingJune2010.html)
*   另一个有趣的集成 zxing 方向的博客 [http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)

以上答案参考自[https://stackoverflow.com/a/9108983/1602230](https://stackoverflow.com/a/9108983/1602230)

# android - Android在editText中插入多个电话号码

> ID：12314237
> 
> 赞同：0
> 
> 时间：2012-09-07T08:13:06.443
> 
> 标签：android, android-edittext, contacts, phone-number

我设法创建了一个按钮，该按钮启动通讯录并将电话号码返回给editText，在选择时。如何在editText中插入多个电话号码（也就是向一群人而不是一个人发送短信）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:19:30.727

尝试在编辑文本中添加多个电话号码，用空格分隔，然后从编辑文本中获取文本。做下面的事情...

```
String temp = edittext.getText().toString();

String[] tempArr = temp.split(" "); 
```

tempArr 将包含在编辑文本中输入的所有数字....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:34:45.123

最好用逗号（“，”）分隔数字，以便获得数字列表

```
String number =  et.getText().toString();

String[] numArr = number.split(","); 
```

# asp.net-mvc - Asp.Net MVC：双重客户端数据验证，本地化

> ID：12314238
> 
> 赞同：0
> 
> 时间：2012-09-07T08:13:07.627
> 
> 标签：asp.net-mvc, asp.net-mvc-3, localization, globalization

我的 Asp.Net MVC 有一个小问题。

现在我已经开发了一个英文网站，一切正常，我所有的文本都已经本地化，而且我已经有了一个基于会话的系统。当我使用另一种语言（在我的情况下是法语）时，它会将`Thread.CurrentThread.CurrentUICulture`and更改为`Thread.CurrentThread.CurrentCulture`从“fr”创建的文化信息。

我所有的翻译都有效，但我在一种形式上有问题。

在法国，小数部分与整数部分用“，”隔开。服务器验证可以很好地使用它并将“234,512”（并且也知道将“234.512”转换为double）。

但客户端验证不接受这一点，它说：

```
"Le champ XYZ doit être un nombre." 
```

所以它有正确的本地（因为消息是用法语翻译的），但它似乎想要在“235,55”中编辑的数字。

一开始我以为没什么大不了的，用户可以输入“234.512”格式的数字，但问题是数据的版本，因为线程是法语，它用“234,512”填充模型，并且不是“234.512”，并且由于该客户必须在每次更改时更改分隔符（如果他们没有在此字段上进行更改，则事件）否则他们会收到**客户端**验证错误（当我按下提交按钮时没有调用，我检查了几次）。

那么我应该怎么做才能让客户端验证脚本在当前语言环境中双重工作？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:23:15.180

jquery.validate.js（或 jquery.validate.unobtrusive.js）似乎有问题，它只接受点作为分隔符。

查看以下帖子以获取解决方案： [http ://www.mfranc.com/2011/07/05/jquery-valdiator-modyfing-decimal-separator/](http://www.mfranc.com/2011/07/05/jquery-valdiator-modyfing-decimal-separator/)

或者

[http://www.campusmvp.net/asp-net-mvc-3-and-the-coma-in-decimals/](http://www.campusmvp.net/asp-net-mvc-3-and-the-coma-in-decimals/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:38:11.990

这是已知问题。jquery 中的 Javascript 验证器除了点之外不允许任何东西。最简单的方法是更改​​ jquery.validate.min.js（左右）或覆盖您的 cshtml 中的自定义验证器。在 jquery 内部它将是：

```
// http://docs.jquery.com/Plugins/Validation/Methods/number
number: function(value, element) {
    //return this.optional(element) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value); <-- original 
    return this.optional(element) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:[\.,]\d+)?$/.test(value); 
}, 
```

# python - 可以使用uwsgi协议调用http吗？

> ID：12314245
> 
> 赞同：3
> 
> 时间：2012-09-07T08:13:37.910
> 
> 标签：python, nginx, uwsgi

这是一个数据流：http <--> nginx <--> uWSGI <--> python webapp

我猜在 nginx 中有 http2uwsgi 传输，在 uWSGI 中有 uwsgi2http。

如果我想直接调用 uWSGI 来测试 webapp 中的 API 怎么办？

实际上我正在使用金字塔。只需在 .ini 中配置 [uwsgi] 并运行 uWSGI。但我想测试uWSGI是否正常持有webapp功能，uWSGI套接字不能通过http直接访问。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-10-01T17:35:26.573

尝试使用`uwsgi_curl`

```
$ pip install uwsgi-tools

$ uwsgi_curl 10.0.0.1:3030 /path 
```

或者如果您需要执行更多请求，请尝试`uwsgi_proxy`使用同一个包

```
$ uwsgi_proxy 10.0.0.1:3030
Proxying remote uWSGI server 10.0.0.1:3030 "" to local HTTP server 127.0.0.1:3030... 
```

所以你可以在本地浏览它[http://127.0.0.1:3030/](http://127.0.0.1:3030/)。

如果您的应用程序只允许某些`Host`标头，您也可以指定主机名

```
$ uwsgi_curl 10.0.0.1:3030 host.name/path

$ uwsgi_proxy 10.0.0.1:3030 -n host.name 
```

如果应用程序有静态文件，您可以使用参数将此类请求重定向到您的前端服务器`-s`。如果需要，您还可以指定不同的本地端口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-03T09:56:59.397

根据您的问题，我假设您想使用 uWSGI 直接运行符合 WSGI 的应用程序并打开一个 HTTP-Socket。您可以通过配置 uwsgi.ini （或任何文件名）来做到这一点

```
http=127.0.0.1:8080 
```

uwsgi 现在将打开一个 HTTP 套接字，它在端口 8080 上侦听来自 localhost 的传入连接（请参阅文档：[http](http://uwsgi-docs.readthedocs.org/en/latest/HTTP.html) ://uwsgi-docs.readthedocs.org/en/latest/HTTP.html ）

或者，您可以使用 http 参数直接从命令行启动您的进程：

```
$ uwsgi --http=127.0.0.1:8080 --module=yourapp:wsgi_entry_point 
```

如果您使用 unix-sockets 配置 uwsgi，nginx 能够通过 uwsgi-protocol ( [http://uwsgi-docs.readthedocs.org/en/latest/Protocol.html](http://uwsgi-docs.readthedocs.org/en/latest/Protocol.html) ) 与该套接字通信。

请记住，如果您通常通过 nginx 提供静态内容（css、javascript、图像），那么如果您直接运行 uwsgi，您也需要进行设置。但是，如果您只想测试 REST-API，这应该适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:43:14.600

首先，考虑这些问题：

*   uWSGI 在哪个端口上运行？
*   uWSGI 是在您的机器上还是在远程机器上运行？
*   如果它在远程机器上运行，是否可以从您的计算机访问该端口？（iptables 规则可能会禁止外部访问）

如果你确定你有访问权限，你可以直接调用`http://hostname:port/path/to/uWSGI`API 访问。

# drag-and-drop - Android 4.0.x 在同一 ListView 中放置项目时挂起或重新启动

> ID：12314251
> 
> 赞同：3
> 
> 时间：2012-09-07T08:14:01.527
> 
> 标签：drag-and-drop, android-listview

## 目的

我已经按照 Android 3.0 拖放框架实现了“从 ListView 重新排序项目”范例。

## 问题

在 android 4.0.3 和 4.0.4 上看到。未在其他版本上测试。

将 ListView 的一项拖放到 ListView 的最后一项之后。阴影框被清除并且 ListView 无效。这是名义上的行为，90% 的时间都会发生。

但对于剩下的 10%，会发生什么：

*   **注意**：下面列出的所有效果都是AFTER `onDrag(View, DragEvent)`has returned for `ACTION_DRAG_ENDED`，也就是说整个拖放过程似乎在问题发生之前就完成了。
*   阴影框在消失前仅显示 10 秒。调用处理程序将纠正`view.invalidate()`该问题，但不会解决挂起或重启问题（见下文）`onDrag(View, DragEvent)``ACTION_DRAG_ENDED`
*   logcat 中的一些不寻常的痕迹：

> I/ViewRootImpl(954)：报告丢弃结果：真 I/InputQueue-JNI(210)：为输入通道“拖动（客户端）”发送完成信号，因为它在输入消息仍在进行中时被取消注册。I/InputQueue-JNI(210)：忽略不再注册的通道上的完成信号。W/WindowManager(210)：正在拖动，但没有拖动窗口句柄。I/ViewRootImpl(954): 报告丢弃结果: true

*   在某些设备上，Android 挂起或重新启动。这取决于设备，但效果始终相同。

## 源代码

```
import android.annotation.SuppressLint;
import android.app.ListActivity;
import android.content.ClipData;
import android.content.ClipDescription;
import android.os.Bundle;
import android.view.DragEvent;
import android.view.View;
import android.view.View.DragShadowBuilder;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class TestReorderActivity extends ListActivity {

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ListView listView = getListView();
        String[] listeStrings = { "France", "United States", "Russia" };
        listView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, listeStrings));

        listView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> adapter, View view,
                    int id, long position) {
                ClipData data = ClipData.newPlainText(" ",
                        Long.toString(position));

                DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(
                        view);
                if (view.startDrag(data, shadowBuilder/*
                                                     * new
                                                     * MyDragShadowBuilder(view)
                                                     */, view, 0)) {
                    return true;
                }

                return false;
            }

        });

        listView.setOnDragListener(new ListView.OnDragListener() {

            @Override
            public boolean onDrag(View view, DragEvent event) {
                final int action = event.getAction();

                switch (action) {
                case DragEvent.ACTION_DRAG_STARTED:

                    if (event.getClipDescription().hasMimeType(
                            ClipDescription.MIMETYPE_TEXT_PLAIN)) {
                        // accept drag
                        return true;
                    } else {
                        // reject drag
                        return false;
                    }

                case DragEvent.ACTION_DRAG_ENTERED:
                    // entered drag
                    return true;

                case DragEvent.ACTION_DRAG_LOCATION:
                    // location is returned as event.getX() and event.getY()
                    return true;

                case DragEvent.ACTION_DRAG_EXITED:
                    // cancel drag.
                    return true;

                case DragEvent.ACTION_DROP:
                    // item dropped
                    processDrop(event);
                    return true;

                case DragEvent.ACTION_DRAG_ENDED:
                default: // unknown case
                    return true;
                }
            }

            private boolean processDrop(DragEvent event) {
                ClipData data = event.getClipData();
                if ((data != null) && (data.getItemCount() > 0)) {
                    ClipData.Item item = data.getItemAt(0);
                    CharSequence value = item.getText();
                    long position = Long.valueOf(value.toString());

                    int x = (int) event.getX();
                    int y = (int) event.getY();

                    ListView listView = getListView();

                    int newPosition = listView.pointToPosition(x, y);
                    if (newPosition > ListView.INVALID_POSITION) {

                        swap(position, newPosition);
                        return true;
                    }
                }

                return false;
            }

        });

    }

    // swap(long, long) here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:19:23.533

原因是：你的屏幕上传action_move太懒了。

在正常情况下，即使您的手指不在屏幕上移动，动作动作也会非常频繁地上传。但有些手机屏幕不是那么敏感。

您可以修改手机的阈值。它需要内核支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:24:02.160

这是因为：unregisterInputChannel 获取锁失败，发生死锁。

# spring - Spring安全登录错误

> ID：12314254
> 
> 赞同：0
> 
> 时间：2012-09-07T08:14:19.647
> 
> 标签：spring, spring-mvc

我刚刚使用 spring 实现了一个简单的登录功能，它如何在内置浏览器中使用 eclipse，但在 chrome 和 firefox 中出现以下错误。

```
HTTP Status 404 - /SpringLogin/welcome.jsp;jsessionid=8332D4F3D4709DCA37C87F30F1EA03D5
The requested resource (/SpringLogin/welcome.jsp;jsessionid=BEE789093FF79CB6B67F8DA368E8B3E4) is not available. 
```

你能告诉我为什么会这样吗？

PS：我有两个项目 SpringLogin 并且它们都有相同的项目名称并且都有相似的包。然后两个项目都没有正常工作并给出了上述错误。在我创建了另一个具有不同名称并使用不同包名称的项目之后，它就像魔术一样工作。我猜这里可能是问题所在。但是，可以解释那里发生的事情的合乎逻辑的答案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:56:02.847

您没有调用正确的 URL

似乎上下文 /SpringLogin/ 不再存在。

尝试 /welcome.jsp 或者如果您更改了应用程序的名称 - 尝试 /newappname/welcome.jsp

# dynamics-crm - 如何在快速活动向导中更改活动类型列表？

> ID：12314259
> 
> 赞同：2
> 
> 时间：2012-09-07T08:14:40.233
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm

CRM 2011 中的快速活动向导中是否有任何方法可以更改活动列表？我想在这里再添加一项活动。

![在此处输入图像描述](../Images/5a23681096f0315bbce6e3a4a79d9954.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:40:40.090

很好的问题，但不幸的是，这对于自定义活动是不可能的。您受到屏幕截图中默认选项的限制。

可能的解决方法：

1.  做我们过去在 CRM 4.0 中所做的事情，并重新利用本地活动之一（例如重命名“传真”实体）并使用它

2.  将隐藏的自定义属性添加到本机活动，然后使用插件将具有属性集的每条记录“转换”为您自己的自定义活动的实例。这仍然不会在您的快速广告系列中显示您的自定义活动，但它至少会有助于“批量创建”方面的事情。

# javascript - 命名空间与自调用函数

> ID：12314261
> 
> 赞同：10
> 
> 时间：2012-09-07T08:14:46.737
> 
> 标签：javascript

我有一个问题：在 Javascript 中限制范围的更好方法是什么：使用这样的命名空间：

```
var NAMESPACE = {};
NAMESPACE.foo = function() { 
   console.log('Hello');
}
NAMESPACE.foo(); 
```

或者我应该像这样使用自调用函数

```
(function() {
    function foo() { console.log('Hello'); }
    foo();
})(); 
```

有一个命名空间总是好的，或者如果我只使用一个大的自调用函数来放置我所有的东西，我可以省略它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T08:33:06.097

您的两个代码示例都有非常不同的应用程序。

`NAMESPACE.foo = function(){}`and`(function(){})()`都是函数表达式，并且（就像函数声明一样）界定内部范围并可以访问其外部范围内的变量/函数。

主要区别在于，使用命名空间，您可以在与命名空间相同范围内的任何地方调用函数，而 IIFE 只会在遇到时执行。

没有上下文就没有“最佳实践”，所以我将举一些例子：

*   如果你的函数表达式应该只执行一次，那么 IIFE 会很好地完成这项工作，而命名空间会占用一些内存，直到它被垃圾收集。
*   如果您的函数表达式将运行多次（例如在`for`循环内），IIFE 将导致性能损失（并且[JSLint](http://www.jslint.com/)或任何人**都不**推荐）。拥有一个多次调用的已定义函数对象比为每次迭代创建一个新函数对象要好。
*   最终，这取决于您的用户案例。IIFE 在遇到时执行（例如程序/函数体、IF 块等），而命名空间将存储函数对象并允许您在需要时调用它，前提是它可以在给定范围内访问。

### *阅读材料*

*   [Immediately-Invoked Function Expression (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/) - 理解 IIFE 的优秀读物。
*   [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)
*   [命名函数表达式揭秘](http://kangax.github.com/nfe/)- 涵盖了关于函数表达式与声明的好段落。还涵盖了特定于浏览器的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T08:30:13.580

我倾向于做的是将两者结合起来。我不确定这是否被认为是*最佳实践*，但它对我有用:)

```
var app = { }; //or whatever your namespace is  

(function(){

app.memberA = {
   init: function() { },
   anotherFunction: function() { }
   // ...
};

})();

(function(){

app.memberB = {
   init: function() { }
   // So on...
};

})(); 
```

成员 A 和 B 将在单独的 js 资源文件中定义 - 捆绑并缩小以用于生产！我发现这在构建 OO JS 时可以很好地分离关注点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:16:52.977

使用命名空间会将某些东西放入全局范围。

将所有内容包装在一个函数中并仅使用本地范围的变量不会。

后者显然更适合限制范围。

如果您需要将部分代码公开给页面中的其他代码（这对于库来说很典型），请使用命名空间。不过，在函数中定义它的所有部分，因为这样可以减少数据逃逸到全局的机会，并为命名空间中的共享私有数据提供一个闭包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T08:27:25.660

您应该将所有代码包装在一个自调用函数中，如果您需要与应用程序的其他部分共享某些功能，请将这些方法分配给您的自定义命名空间。这样你只暴露你需要的东西。

# mongodb - MongoDB 和一致性哈希

> ID：12314263
> 
> 赞同：2
> 
> 时间：2012-09-07T08:15:12.587
> 
> 标签：mongodb, distributed, sharding, consistent-hashing

MongoDB 具有详细记录的分片功能。

我所需要的只是更简单（部署和配置）和更快的一致散列类型的数据分布（如 Dynamo、Cassandra 或 Voldemort）。有没有办法用 MongoDB 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:22:28.127

看起来 MongoDB 2.4 现在包含散列分片，这可能是您想要的

[http://docs.mongodb.org/manual/core/sharded-cluster-internals/#hashed-shard-keys](http://docs.mongodb.org/manual/core/sharded-cluster-internals/#hashed-shard-keys)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-20T00:25:13.043

我只是在学习 MongoDB，并试图找到答案。但是，我看到这一点的方式是，可以通过在预先计算的哈希上使用范围分片来模拟这一点，然后仔细配置拆分。

# jquery - wordpress插件开发jquery冲突

> ID：12314264
> 
> 赞同：0
> 
> 时间：2012-09-07T08:15:16.487
> 
> 标签：jquery, wordpress

我开发了一个使用 jquery 的 wordpress 插件。

这个插件在自定义 js 文件中有一些 javascript 函数/操作。

作为 jquery 函数，我使用`$`符号作为选择器。

到目前为止一切正常。但是，一些用户使用使用 jquery 的 wordpress 插件，并且该插件将`$`符号覆盖为`jQuery`or `$j`。

如果我注销我的 jquery.js，我的插件不起作用，如果我注销其他 jquery.js 其他插件不起作用。例如，我在我的插件中使用 twitter-bootsrap-modal.js，它使用`$`符号。

当我在我的 wordpress 上安装另一个使用`$j`系统的插件时不起作用。

对于这种情况，你有什么策略吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:19:44.417

在使用之前，`$j`您应该使用`.noConflict()`.

您也可以将它用于您的插件，Wordpress 大部分时间都需要它，因为它使用不同的库。

所以在你的插件写到：

```
var $j = jQuery.noConflict(); //$j could be also j, or $r, everything you want, is a variable. 
```

然后用`$`您在无冲突中使用的新变量替换所有您的变量。

希望它有所帮助。

# ldap - 当 UserDN 中出现 &、%、$ 等特殊字符时，JNDI 和 AD 绑定错误

> ID：12314270
> 
> 赞同：1
> 
> 时间：2012-09-07T08:15:44.037
> 
> 标签：ldap, bind, jndi

我已经实现了一个 java 代码，它使用 AD 服务器的用户名和密码连接到给定的主机 ip。（使用 JNDI）

现在，当我使用没有特殊字符的用户名时，它可以正常工作。但是当我在用户名中使用 $、#、& 等符号时，它给了我`Auth. Error`.

我很惊讶地看到这一点，因为 &、$ 和 # 在`userdn`AD 格式中没有使用。

任何人都可以解释什么问题以及可以解决这个问题的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:53:21.510

我不能确定（我没有多少信息可以判断），但“7-bit-check-plugin”可能有问题。它是一个 LDAP 插件，负责拒绝编码超过 7 位的数据。这包括 %、$、# 等字符以及一些德语字符、中欧和东欧字符等。

请尝试检查您是否启用了 7-bit-check-plugin。如果是这样，请尝试禁用它并再次使用该数据。

# gzip - 在反向代理中启用 Playframework 响应 gzip 压缩

> ID：12314272
> 
> 赞同：1
> 
> 时间：2012-09-07T08:15:58.437
> 
> 标签：gzip, playframework-2.0, lighttpd, reverse-proxy

关于 gzipping Play 的响应（即从模板渲染 HTML）的讨论很多。显然开发人员并不关心添加它，至少 Page Speed 报告说 2.0.3 中的响应没有被压缩，并且我的应用程序产生了 70% 的无用流量。

我使用 lighttpd 作为反向代理。`mod_compress`为`"text/html"`和启用`"text/html; charset=utf8"`。但 Play 的反应仍然没有被压缩。

有没有办法通过反向代理来做到这一点？

# php - PHP：如何将此字符串转换为另一种日期时间格式？

> ID：12314273
> 
> 赞同：0
> 
> 时间：2012-09-07T08:16:04.333
> 
> 标签：php, date-format

我将此日期时间作为字符串：*Thu, 16 Aug 2012 13:17:25 +0200*

我想重新格式化它，使它变成 Donnerstag, 16.08.2012 13:17:25（德语格式）。我尝试了格式功能，但它引发了错误。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:18:18.770

```
date('format', strtotime('Thu, 16 Aug 2012 13:17:25 +0200')); 
```

或者

```
$date = new DateTime('Thu, 16 Aug 2012 13:17:25 +0200');
$date->format('formatstring'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:48:37.657

您需要检查 setlocale 函数的使用情况，详见[http://php.net/manual/en/function.setlocale.php](http://php.net/manual/en/function.setlocale.php)。

您需要安装语言环境，如果此代码不起作用（例如，一切都相同），您的系统上缺少它们并且需要首先对其进行排序：

```
setlocale(LC_TIME, "C");
echo strftime("%c") . PHP_EOL;
setlocale(LC_TIME, 'be_NL');
echo strftime("%c") . PHP_EOL;
setlocale(LC_TIME, 'de_DE');
echo strftime("%c") . PHP_EOL; 
```

strftime 是支持使用语言环境的函数，例如负责以选择的语言输出。一些与日期相关的功能不支持这一点，但是当您在 php.net 上查看这些功能时，如果适用，将提及语言环境支持。

# algorithm - 用 bash 生成 cron 配置？

> ID：12314275
> 
> 赞同：1
> 
> 时间：2012-09-07T08:16:18.403
> 
> 标签：algorithm, bash, cron

在我的问题中，我将得到一个数字 n。我需要创建一个 cron 配置以在 n 天内运行一次脚本。

例如，如果 n=20，脚本应该每 20 天运行一次。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:58:46.443

该配置将非常丑陋，如果不是不可能的话（您可能必须每天枚举它将被执行..）

创建配置要容易得多，因此每天都会执行。然后在脚本中（或在*包装器脚本*中）检查它是否应该实际执行。

这个检查可以用

*   算术，例如：`daycounter=$(( ($(date +%s) / (60*60*24) ) % 20))`
*   带有一个状态文件，它的创建日期存储了上次执行时间

基于文件的解决方案更具容错性，如果您的服务器在计划的当天停机，它将在第二天执行，而算法计划在下一个周期（20 天后）。

如果您将功能包装在一个文件中，您的 cron 条目将看起来非常好：

```
10 1 * * * executeeveryxday nameofthestatefile 20 "command to execute" 
```

当然，如果您有更多的服务器和条目，并且想从一个中心位置进行管理，那么从数据库中获取任务可能会更好。

# android - Android 动态列表视图（--> 表示每行属性的动态计数）

> ID：12314278
> 
> 赞同：0
> 
> 时间：2012-09-07T08:16:30.503
> 
> 标签：android, listview, dynamic, attributes, expandable

我是一名 android 开发初学者，我知道简单列表视图的基础知识。

但是我现在需要做的是（我认为）非常先进，所以请告诉我如何（或是否？）这是可能的：

我有不同的日期，每个日期都有一组不同的属性（甚至不同的计数）。这些属性是由用户动态创建的。这是结构：

```
07.09.2012 - Weight: 10
07.09.2012 - Fat: 20
07.09.2012 - Muscles: 30

08.09.2012 - Weight: 20

09.09.2012 - Weight: 30
09.09.2012 - Water: 10 
```

等等

我需要以清晰/简单的方式呈现这些信息，所以我想到了一个自定义列表视图，它可能看起来像：

列表：

```
07.09.2012
+ Weight: 10
+ Fat: 20
+ Muscles: 30
08.09.2012
+ Weight: 20
09.09.2012
+ Weight: 30
+ Water: 10 
```

如果仅首先显示日期并且日期下方的附加信息被折叠但可展开，那会更好。

这可能吗？你能给我一些代码示例/给我一些代码吗？如果这不可能或很难，或者您对可视化此动态信息有更好的想法，您能告诉我更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:47:04.233

您可能正在寻找[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。[这](http://android-adda.blogspot.com/2011/06/custom-expandable-listview.html)是一个如何使用它的示例。

如果您不想/不需要展开和折叠，您可以为项目创建一个布局（在您的情况下为日期），您可以将日期未显示的内容（例如水）的可见性设置为 View.GONE。这样他们就不会在屏幕上占用任何空间。

最后，您可以简单地使用[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)并将所有项目放在那里。然而，这只有在您知道您不会有很多项目时才可以接受，因为[ListView](http://developer.android.com/reference/android/widget/ListView.html)是[经过优化](http://www.youtube.com/watch?v=wDBM6wVEO70)的。

# c# - 将datagridview的行添加到数据表

> ID：12314279
> 
> 赞同：0
> 
> 时间：2012-09-07T08:16:51.087
> 
> 标签：c#

在下面的代码中，如果选定的行是新行，我试图将选定的 datagridview 行添加到 datagridview 的数据源中，但它只将“DataGridViewRow { Index=0 }”添加到该行的第一列并且该行的其余部分为空

```
 if (dataGridView1.SelectedRows[0].IsNewRow)
        {
            _dt.Rows.Add(dataGridView1.SelectedRows[0]);
            dataGridView1.DataSource = null;
            dataGridView1.DataSource = _dt;
        }

        DataTable dtUpdated = (DataTable)dataGridView1.DataSource;
        dtUpdated.GetChanges();

        SqlCommandBuilder cb = new SqlCommandBuilder(_sqlDa);

        try
        {

            _sqlDa.Update(dtUpdated);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:31:31.997

正如 Dan 上面提到的，Datatable 是与网格绑定的，所以每当您添加新行或更改该新行中的任何文本时，都会自动将新行和更新的值更新到 _dt。

如果您仍然感到困惑或遇到与上述相同的问题，请不要将“dataGridView1.SelectedRows [0]”添加到_dt.Rows，因为SelectedRows 是对象“DataGridViewSelectedRowCollection”的集合，因此最好将SelectedRows 转换为Datarow 或您可以使用 '_dt.​​Rows.Add(params Object[] values)' 的另一个重载函数

# asp.net - ASP.Net CSS MasterPages 主要内容区域不随标签自动增加

> ID：12314281
> 
> 赞同：0
> 
> 时间：2012-09-07T08:16:59.963
> 
> 标签：asp.net, html, css

我有一个母版页，它为我的主要内容/信息所在的每个页面创建一个 ContentPlaceHolder。围绕这个我创建了一个名为 main 的 div 标签。

```
<div id="Main">
    <asp:ContentPlaceHolder ID="MainContent" runat="server">
    </asp:ContentPlaceHolder>
</div>

#Main
{
    background-color:White;
    padding: 15px 20px 15px 20px;
    margin: 0px 100px 10px 100px;
    border-radius: 4px 4px 4px 4px;
} 
```

所以本质上，内容占位符是一个很好的空白空间，信息可以进入。如果我进入一个页面并使用 p 标签将一些内容写入内容，则空格会自动扩展。

但是，我正在尝试在同一行上创建 2 个跨度标签，我可以在其中添加左侧窗格和右侧的数据网格。但目前我只用文本填充了这些跨度标签。然而，空白不会自动扩展，我改变了 span 标签的高度，但它进入了页脚。有任何想法吗？

```
<asp:Content ID="SearchContent" ContentPlaceHolderID="MainContent" runat="server">

<span id="SearchLeftPanel" class="SearchDivs">
leftleftleftleft
leftleftleftleft
leftleftleftleft
leftleftleftleft
leftleftleftleft
leftleftleftleft
leftleftleftleft
leftleftleftleft
leftleftleftleft
</span>

<span id="SearchRightPanel" class="SearchDivs">
RightRightRightRightRightRight
RightRightRightRightRightRight
RightRightRightRightRightRight
RightRightRightRightRightRight
RightRightRightRightRightRight
RightRightRightRightRightRight
RightRightRightRightRightRight
RightRightRightRightRightRight
</span> 
```

```
.SearchDivs
{
   display:inline;
}
#SearchLeftPanel
{
    clear:both;
    float:left;
    width:25%;
    height:100px;    
}
#SearchRightPanel
{
   float:right;
   width:67%;
   height:100px;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:18:35.073

`height:100px`从你的 css中删除`height:auto`

如果您需要默认高度为 100px，那么您可以这样写

```
#SearchRightPanel
{
   float:right;
   width:67%;  
min-height:100px; 
height:auto
} 
```

查看演示[http://jsfiddle.net/YUTTh/1/](http://jsfiddle.net/YUTTh/1/)

更新了演示[http://jsfiddle.net/YUTTh/2/](http://jsfiddle.net/YUTTh/2/)

# language-agnostic - 如何从当前目录中的所有文件名中删除空格

> ID：12314285
> 
> 赞同：5
> 
> 时间：2012-09-07T08:17:13.863
> 
> 标签：language-agnostic, whitespace, filenames

正如标题所示，如何从当前目录中的所有文件中删除空格？

例子

`file name.mp3`应该成为`filename.mp3`

笔记：

*   我愿意接受任何语言的答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T13:49:59.270

我是 python 的忠实粉丝，所以这里有一个 python 脚本来做同样的事情

```
import os
for f in os.listdir("."):
    r = f.replace(" ","")
    if( r != f):
        os.rename(f,r) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-07T09:33:35.473

用 sh

```
for file in *' '*; do [ -f "$file" ] && mv "$file" "`echo $file|tr -d '[:space:]'`"; done 
```

使用 perl 5.14（替换`y/ //dr`为`do{($x=$_)=~y/ //d;$x}`旧版本）

```
# Linux/Unix
perl -e 'rename$_,y/ //drfor<"* *">'
# Windows
perl -e "rename$_,y/ //drfor<'* *'>" 
```

使用 Java

```
import java.io.File;

public class M {

    public static void main(String[] args) {
        String o,n;
        for (File old : new File(".").listFiles()) {
            o=old.getName();
            if (!o.contains(" ")) continue;
            n=o.replaceAll(" ", "");
            old.renameTo(new File(n));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T08:17:13.863

```
for i in * ; do 
  if [ "$i" != ${i//[[:space:]]} ] ; 
  then
    mv "$i" "${i//[[:space:]]}"
  fi
done 
```

`${i//[[:space:]]}`删除字符串中的所有空格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T14:26:07.017

由于您与语言无关，因此这里有一个 ruby​​ 单行：

```
ruby -e 'Dir.foreach(".") {|f| f.count(" \t") > 0 and File.rename(f, f.delete(" \t"))}' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T08:50:08.130

```
ls -1 | awk '/ /{a=$0;gsub(/ /,"");b="mv \""a"\" "$0;system(b);}' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T11:59:59.000

仅当旧文件名包含空格且新文件不存在时，才会重命名旧文件。

```
for old in *; do
    new="${old//[[:space:]]}"
    [[ $old = $new || -f $new ]] || mv "$old" "$new"
done 
```

# css - 如何通过使用 div 标签添加背景颜色来保持整个页面相同

> ID：12314287
> 
> 赞同：0
> 
> 时间：2012-09-07T08:17:16.583
> 
> 标签：css, html

我有一个页面，上面有一个背景图像，我保留了一些按钮。但是整个页面的背景是白色的。这不好，我想要背景颜色，我需要坚持这整件事。

```
 <html>
    <body>
        <div class="outer" style="background-image:url('BG_BLUE_NEW.jpg'); background-repeat:no-repeat;background-position:center;height:768px;width:1100px;margin-top:-50px:padding-left:0px"></div>
        <div class="login" style="margin-top:-430px;float: left;height: 290px;">
                <form style="padding-left:250px;">
                    <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                    <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                    <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                    <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                    <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                </form>
        </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:43:43.163

试试这个， [http://www.w3schools.com/css/tryit.asp?filename=trycss_background_shorthand](http://www.w3schools.com/css/tryit.asp?filename=trycss_background_shorthand)

背景颜色背景图像背景重复背景附件背景位置

背景：#ffffff url('img_tree.png') 不重复右上角；

```
 <html>
<body>
    <div class="outer" style="background: blue url('BG_BLUE_NEW.jpg') center; height:768px;width:1100px;margin-top:-50px:padding-left:0px"></div>
    <div class="login" style="margin-top:-430px;float: left;height: 290px;">
            <form style="padding-left:250px;">
                <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
                <INPUT TYPE="button" style="background-color:SteelBlue;width:100px;height:30px;font-size:150%;margin-bottom:10px" VALUE="Submit" onClick="window.open('http://www.google.com','_blank');"><br>
            </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:23:49.180

使用 CSS：

```
body
{
    background: color: #f00; /*your color here*/
} 
```

这将使 body 元素的背景成为您为所有页面选择的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:31:15.833

```
 body {
      background-color: #ff0000
   } 
```

# python - 如何将逗号分隔数字的大列表转换为浮点数

> ID：12314288
> 
> 赞同：0
> 
> 时间：2012-09-07T08:17:20.407
> 
> 标签：python, csv

我需要制作一个脚本，它从 .csv 文件的 2 列中获取 2 列数据，然后根据这些数据绘制图表。我设法从这样的列表中导出数据（实际上有 140 个数字，但你明白了）：

```
['0', '0,1', '0,2', '0,3', '0,4', '0,5', '0,6', '0,7', '0,8000001', '0,9000001', '1', '1,1', '1,2'] 
```

问题是，当我尝试使用这些数据进行绘图时，matplotlib 给出了一个错误，因为它不是浮点数。而且我无法将此数据转换为浮点数，因为数字用逗号而不是点分隔。那么，我怎样才能用点替换所有这些逗号，或者也许还有其他更简单的解决方案呢？我对 Python 完全陌生。

**更新**：我的错误，我导出数据的格式不是列表，而是 DICT。我可以成功地将其转换为长字符串，但找不到将其转换为浮点数组的方法。感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:23:25.403

```
n = ['0', '0,1', '0,2', '0,3', '0,4', '0,5', '0,6', '0,7',
     '0,8000001', '0,9000001', '1', '1,1', '1,2']
[float(m.replace(",", ".")) for m in n]
# => [0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7,
#     0.8000001, 0.9000001, 1.0, 1.1, 1.2] 
```

# flash - 您可以使用 Flash Local Storage 保存文本以外的数据吗？图像/声音/视频

> ID：12314294
> 
> 赞同：0
> 
> 时间：2012-09-07T08:17:26.453
> 
> 标签：flash, actionscript

使用闪存本地存储，您可以在客户端保存一些数据，例如 cookie。但是是否也可以将其用于图像？

如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:25:38.523

您可以保存任何类型的数据，只要将其转换为 ByteArray。

# php - Zend Framework 1 与 Zend Framework 2 性能对比

> ID：12314300
> 
> 赞同：64
> 
> 时间：2012-09-07T08:17:50.137
> 
> 标签：php, zend-framework, zend-framework2

Zend Framework 2 刚刚发布，Zend 提供对 ZF1 的支持仅 18 个月。我知道他们正在为 ZF2 中的新功能工作，然后他们将对它进行一些重大的速度改进，因为它比 ZF1 慢 5 倍。

我想从您所做的基准测试或测试中知道 ZF2 比 ZF1 慢多少，而不是纯粹的猜测。

我发现的最新基准是 2012 年 2 月 22 日，得出的结论是 ZF2 比 ZF1 慢 4 倍。

链接[在这里](http://www.enrise.com/2012/02/zend-framework-2-performance/)

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-09-07T09:32:42.223

常见问题 - （根据昨天完成的个人实验的答案）

***Zend Framework 2 与 Zend Framework 1 相比有何变化？***

**建筑学**

ZF1 基于 MVC，ZF2 基于 MOVE。巨大的差异。MOVE = 模型操作视图事件，MVC = 模型视图控制器。[更多在这里](http://cirw.in/blog/time-to-move-on)。Zend Framework 2 使用 100% 面向对象的代码并利用 PHP 5.3 的大部分新特性，即命名空间、后期静态绑定、lambda 函数和闭包。[来源](http://framework.zend.com/manual/2.0/en/ref/overview.html)

**安装尺寸**

最新的 ZF1 文件约为 30Mb，ZF2 约为 2.5Mb（压缩）。

**依赖**

ZF1 是一组核心库和非常松散耦合的架构（相对于它的竞争对手/玩家 - CakePHP）。ZF1 不需要太多“宝石”（如在 ruby​​ 中），但可以通过插件做得更好。ZF2 要求您了解[composer](https://github.com/composer/composer) - [phar](http://php.net/manual/en/book.phar.php)，很快它可能会超越任何其他框架。新概念： Zend 粉丝的[依赖注入](http://framework.zend.com/manual/2.0/en/tutorials/quickstart.di.html)。

**认证**

认证仅适用于 ZF1，但有传言称他们正在讨论 ZF2 证书，尽管培训材料可在线获得。

**约定**

ZF1 中的类名是 Zend/Db/Table.php 中的类 Zend_Db_Table 而在 ZF2 中，它是类 My\Auth\Adapter 。说够了。

**社区**

ZF1 得到 Zend Technologies（以及少数其他未命名的公司）的支持。ZF2 拥有包括谷歌和微软在内的卓越支持者。[来源在这里](http://framework.zend.com/manual/2.0/en/ref/overview.html)

**速度**

执行“Hello World！”的时间大约增加了 20 倍。在 ZF2 中。我不在这里评判。我在这里可能是错的。DIY。

**我应该选择哪一个？**

MVC 已经存在将近十年了，如果您是其中一个完全为新架构感到难过的人，那么嘿！IT 是“您选择的”领域，紧跟趋势并更新自己！[从这里](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)开始 ZF2 。

# java - 蓝牙 - 将设备永久置于查询模式

> ID：12314302
> 
> 赞同：0
> 
> 时间：2012-09-07T08:17:55.307
> 
> 标签：java, bluetooth, bluecove

我想知道是否可以使用 blue cove 将设备永久置于查询模式。

这实际上是代码，它只会让设备在很短的时间内处于查询状态。

```
public class DescobrirDispositivos {

    /**
     * @param args
     * @throws BluetoothStateException
     * @throws InterruptedException
     */
    public static final Vector/*<RemoteDevice>*/ devicesDiscovered = new Vector();

    public static void main(String[] args) throws BluetoothStateException,
            InterruptedException {

        final Object inquiryCompletedEvent = new Object();

        DiscoveryListener listener = new DiscoveryListener() {

            @Override
            public void servicesDiscovered(int arg0, ServiceRecord[] arg1) {
                // TODO Auto-generated method stub

            }

            @Override
            public void serviceSearchCompleted(int arg0, int arg1) {
                // TODO Auto-generated method stub

            }

            @Override
            public void inquiryCompleted(int discType) {
                synchronized (inquiryCompletedEvent) {
                    inquiryCompletedEvent.notifyAll();
                }
            }

            @Override
            public void deviceDiscovered(RemoteDevice btDevice, DeviceClass cod) {
                devicesDiscovered.addElement(btDevice);
                System.out.println("Device " + btDevice.getBluetoothAddress()
                        + " found");
                try {
                    System.out.println("Name " + btDevice.getFriendlyName(false));
                } catch (IOException cantGetDeviceName) {
                    // TODO Auto-generated catch block

                }

            }
        };
        synchronized (inquiryCompletedEvent) {

            boolean started = LocalDevice.getLocalDevice().getDiscoveryAgent()
                    .startInquiry(DiscoveryAgent.GIAC, listener);        
        if (started) {
                inquiryCompletedEvent.wait();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:28:41.610

不，没有永久查询的概念。它没有太多用例，因为它消耗的电量非常大，而且一个查询周期就足以发现大多数附近的设备。但是，如果您想继续进行查询，每次查询结束时重新启动查询是微不足道的。

# java - Eclipse 忘记构建路径变量

> ID：12314303
> 
> 赞同：1
> 
> 时间：2012-09-07T08:18:01.747
> 
> 标签：java, eclipse, buildpath

我已经在我的项目的构建路径中声明了`MAVEN_REPO`指向我的 Maven 存储库的变量。之后，比方说，一个星期 Eclipse “忘记”了它，我的项目不想构建。该变量仍然可见但未解析，并且未看到库。即使我重新声明变量，也会出现同样的问题。为了修复我的项目，我必须删除`.metadata`目录并再次配置所有内容（真正的匿名）。我使用 Eclipse Indigo Service Release 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:52:14.513

几个想法：

1.  您不必显式指向您的 Maven 存储库以在那里获取 jar 文件。您的项目使用 maven，您可以使用“Maven->Update Project Dependencies”设置类路径，或者您的项目不使用 maven，它应该引用 maven 存储库外部暂存区域中的 jar。
2.  根据我的经验，Eclipse 变量最好由插件定义，而不是由用户定义。您当然可以手动定义变量，但如果您移动到新工作区或其他人接管项目，那么他们将不得不定义这些变量。典型的 Eclipse 用户并不知道如何定义变量。
3.  这让我们回到了 Maven。我建议您完全 maven 化您的 java 项目，以便 maven 为您和将来支持该代码的其他人完成这项工作。虽然您尝试做的事情没有错，但您会看到您的配置很脆弱并且有些专有。

# node.js - 运行 node-solr 客户端时出错

> ID：12314306
> 
> 赞同：0
> 
> 时间：2012-09-07T08:18:13.763
> 
> 标签：node.js, solr

伙计们，我正在尝试运行以下链接中在 github 上给出的示例。

[https://github.com/lbdremy/solr-node-client](https://github.com/lbdremy/solr-node-client)

我运行 Solr 的端口是 8080。

我运行的示例目录中给出的任何文件都会出现以下错误

```
{ [Error: connect ECONNREFUSED]
  code: 'ECONNREFUSED',
  errno: 'ECONNREFUSED',
  syscall: 'connect' } 
```

这个你能帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:10:09.617

检查此源代码 - [https://github.com/lbdremy/solr-node-client/blob/master/lib/solr.js](https://github.com/lbdremy/solr-node-client/blob/master/lib/solr.js)

solr 默认使用 8983 端口

使用 8080 端口创建客户端，例如......

```
createClient('127.0.0.1', 8080, '', '/solr') 
```

# android - Android列表视图返回null？

> ID：12314310
> 
> 赞同：1
> 
> 时间：2012-09-07T08:18:25.400
> 
> 标签：android, xml, listview, nullpointerexception, android-fragments

所以我正在尝试制作一个选项卡式应用程序......但它不断因空指针异常而崩溃。我检查了所有可能导致空指针的变量，我认为我已经缩小了范围。

```
ListView activeList = (ListView) findViewById(R.id.activelist);
if(activeList == null) {
  Log.e("com.name.app", "activeList null");
} 
```

这将返回一个空值。应该是？我正在使用片段来尝试构建选项卡式布局。这是它引用的xml。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    >

    <ListView
        android:id="@+id/activelist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:persistent="true" >    
    </ListView>

</LinearLayout> 
```

感谢您的任何帮助！

编辑：

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.tabs_layout); 
```

这就是我的内容视图的样子。

编辑：这就是我的最终代码的样子！

```
 LayoutInflater inflater = (LayoutInflater)   getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
    LinearLayout mContainer = (LinearLayout)     inflater.inflate(R.layout.tab_frag1_layout, null); 
    ListView activeList = (ListView) mContainer.findViewById(R.id.activelist); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:36:26.333

```
LinearLayout mContainer = inflater.inflate(R.layout.linear_layout, null); 
ListView activeList = (ListView) mContainer.findViewById(R.id.activelist); 
```

其中 R.layout.linear_layout 是`LinearLayout`包含您的`ListView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:21:59.040

您是否在活动中引用了 XML 布局？

您可以在 oncreate 方法中执行此操作：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView.(R.layout.your_XML_file_name);
} 
```

# php - 没有静态 IP 但需要限制对特定位置的访问

> ID：12314313
> 
> 赞同：2
> 
> 时间：2012-09-07T08:18:41.367
> 
> 标签：php, ip

我有一个小的 web 功能，应该只在用户在办公室时运行。但问题是我们的互联网提供商会定期更改其 IP，我无法跟踪它。我们办公室有 Windows 7 系统，它们没有任何静态 IP。我什至无法设置静态 IP，因为它会妨碍 Internet 提供商设置并停止连接到 Internet。我现在卡住了。有没有一种方法可以确保一个人只有在使用该功能时才在办公室？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:35:53.787

一种方法是设置服务器，使其公开 2 个服务——“A”具有可用的“特殊办公室功能”，而“B”没有。

然后，设置网络安全性，以便只能从您的办公室通过 VPN 隧道访问服务 A。

--

另一种方法可能是使用 PKI - 让办公室计算机安装有访问服务 A 功能所需的证书。然而，虽然复杂，但具有足够权限和知识的用户仍然可以复制证书并在家中安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:25:48.957

最可靠的方法是使用 MAC 地址进行 ID，因为 IP 可以更改，MAC 地址更难欺骗并且不会更改。它是网卡的“序列号”。因此，除非他们将卡带回家，否则他们将无法访问它。阅读 [这篇文章](https://stackoverflow.com/questions/1420381/how-can-i-get-the-mac-and-the-ip-address-of-a-connected-client-in-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:40:49.243

您可以使用 dyndns 获取当前 ip。动态 dns 允许 ypou 将主机名重定向到动态 ip。

因此，如果您收到来自未知 IP 或更多 IP 的请求，则自上次请求以来已过去 x 秒，您可以使用 gethostbyname 检索官方 IP。

**免费动态 DNS：**

[http://www.dnsdynamic.org/](http://www.dnsdynamic.org/)

**获取IP：**

```
$ip = gethostbyname('http://sample.dnsdynamic.org/'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T08:21:57.570

如果您的用户不是书呆子，您可以在办公室计算机中设置一个特殊的 cookie，并在用户每次访问应用程序时对其进行检查。

（如果您的用户知道设置和取消设置 cookie，那将失败，因为他们只会将此行为复制到他们的家中）。

此外，从办公室连接时仍应有特定**范围**的 IP（即使 IP 更改），采样几个 IP 并检查重复模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T08:22:31.707

授权后，为您的办公室用户提供某种令牌。然后使用令牌来确定是否授予访问权限。

令牌可以存储在办公室用户计算机上的 cookie 中，因此只进行一次授权。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T08:28:03.313

如果您可以访问办公网络 - 您可以尝试配置您的服务器，它可以访问互联网，因此它会为所有请求（发送到您的服务器）添加一些令牌（cookie？）。您将在您的代码中检查它。

# iphone - 构建和编译错误

> ID：12314315
> 
> 赞同：0
> 
> 时间：2012-09-07T08:18:48.393
> 
> 标签：iphone, ios, xcode

我在编译我的项目时遇到问题，下面是我遇到问题的错误屏幕截图，我尝试添加所需的框架和使用的`CLEAN`功能，但仍然无法正常工作。

![在此处输入图像描述](../Images/c5f094c0ea66fb48f69f2a36a058996b.png)

谢谢您的帮助。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:05:34.947

看起来 ScratchableView 不包含在链接列表中。

*   按文件列表中的project-target（文件列表中您的APP项目名称）
*   目标设置为：Photoslot（您的 APP 名称）
*   选项卡：构建阶段
*   打开：复制捆绑资源 您的文件应包含在此处。如果没有按 + 添加。当文件以红色列出时，它丢失/错误。删除它 (-) 并再次添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:24:49.500

您遇到了参考错误。检查您的课程 OneSlotViewController.h/m 是否包含 ScratchableView.h，这似乎从您的项目中丢失。另一个问题可能是 ScratchableView 类未添加到您的目标中。

# go - 我的 golang 代码有什么问题？

> ID：12314317
> 
> 赞同：-2
> 
> 时间：2012-09-07T08:18:58.567
> 
> 标签：go

> **可能重复：**
> [为什么我的 golang 无锁队列总是卡在那里？](https://stackoverflow.com/questions/12291949/why-my-golang-lock-free-queue-always-stuck-there)

这是我的整个源代码：

```
package main

import (
    "sync/atomic"
    "unsafe"
    "sync"
    "fmt"
    "time"
    "runtime"
)

const (
    MAX_DATA_SIZE = 100
)

// lock free queue
type Queue struct {
    head unsafe.Pointer
    tail unsafe.Pointer
}
// one node in queue
type Node struct {
    val interface{}
    next unsafe.Pointer
}
// constructor
func New() (q *Queue) {
    queue := new(Queue)
    queue.head = unsafe.Pointer(new(Node))
    queue.tail = queue.head
    return queue
}
// queue functions
func (self *Queue) enQueue(val interface{}) {
    newValue := unsafe.Pointer(&Node{val: val, next: nil})
    var tail,next unsafe.Pointer
    for {
        tail = self.tail
        next = ((*Node)(tail)).next
        if atomic.CompareAndSwapPointer(&next, nil, newValue) {
            atomic.CompareAndSwapPointer(&self.tail, tail, newValue)
            break
        }else{
            for next != nil {
                tail = next
            }
        }
    }
}

func (self *Queue) deQueue() (val interface{}, success bool){
    var head,next unsafe.Pointer
    for {
        head = self.head
        next = ((*Node)(head)).next
        if next == nil {
            return nil, false
        }else {
            if atomic.CompareAndSwapPointer(&(self.head), head, next) {
                val = ((*Node)(next)).val
                return val, true
            }
        }
    }
    return nil, false
}

func main() {
    //runtime.GOMAXPROCS(runtime.NumCPU())
    fmt.Println(runtime.GOMAXPROCS(-1))
    var wg sync.WaitGroup
    wg.Add(20)
    queue := New()
    for i := 0; i < 10; i++ {
        go func() {
            defer wg.Done()
            for j := 0; j < MAX_DATA_SIZE; j++ {
                t := time.Now()
                fmt.Println("enqueue111")
                fmt.Println("enq = ", t)
                fmt.Println("enqueue222")
                queue.enQueue(t)
            }
        }()
    }

    for i := 0; i < 10; i++ {
        go func() {
            ok := false
            var val interface{}
            defer wg.Done()
            for j := 0; j < MAX_DATA_SIZE; j++ {
                val,ok = queue.deQueue()
                for !ok {
                    val,ok = queue.deQueue()
                }
                fmt.Println("deq = ",val)
            }
        }()
    }

    wg.Wait()
} 
```

代码卡在**fmt.Println("enq = ", t)**但我不知道为什么，这太奇怪了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:25:52.257

我认为出队 goroutines 一直在运行，试图从一个空队列中出队，而入队 goroutines 却饿死了。也许尝试使出队阻塞以使入队有机会运行？如果这不仅仅是为了教育价值，我会使用[channels](http://golang.org/doc/effective_go.html#channels)。

编辑：使用渠道的等效版本

```
package main

import (
    "sync"
    "fmt"
    "time"
    "runtime"
)

const (
    MAX_DATA_SIZE = 100
)

func main() {
    runtime.GOMAXPROCS(runtime.NumCPU())
    fmt.Println(runtime.GOMAXPROCS(-1))
    var wg sync.WaitGroup
    wg.Add(20)
    queue := make(chan interface{})
    for i := 0; i < 10; i++ {
        go func() {
            defer wg.Done()
            for j := 0; j < MAX_DATA_SIZE; j++ {
                t := time.Now()
                queue <- t
            }
        }()
    }

    for i := 0; i < 10; i++ {
        go func() {
            var val interface{}
            defer wg.Done()
            for j := 0; j < MAX_DATA_SIZE; j++ {
                val = <- queue
                fmt.Println("deq = ",val)
            }
        }()
    }

    wg.Wait()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:04:55.243

deQueue 在失败情况下无限循环，这会阻塞 CPU。Goroutines 在做 CPU 工作时不会屈服。GOMAXPROCS 需要 >= 2 才能获得 CPU 并行度。

只是为了好玩，这是一个使用高阶通道的线程安全、非阻塞队列实现：[https ://gist.github.com/3668150](https://gist.github.com/3668150)

# django - Django 模型按数据库排序 - 最佳实践

> ID：12314319
> 
> 赞同：0
> 
> 时间：2012-09-07T08:19:08.573
> 
> 标签：django, django-models, sql-order-by

在 Django 中创建模型时，动态存储其对象顺序的最佳实践是什么？

一种简单的方法是添加一个 IntegerField 并让内容管理器根据需要设置它，并按它对对象进行排序。

最好的方法是在管理界面中选择操作对象。就像在这个简单的[jquery ui 可排序演示中一样](http://jqueryui.com/demos/sortable/)

这是非常常见的情况（对我和其他许多人来说），所以不要过多地操作数据库很重要，但要尽可能通用。

# svg - SVG 过滤器导致图形被切掉

> ID：12314322
> 
> 赞同：1
> 
> 时间：2012-09-07T08:19:27.990
> 
> 标签：svg, effects

我正在尝试向 SVG 创建的圆圈添加过滤器，但是一旦添加任何类型的过滤器，圆圈的顶部和左侧就会被裁剪。我尝试过使用所有设置，包括 x、y 和宽度，但这会产生相当奇怪和意想不到的结果。看网上的例子，对他们来说似乎也一样！例如，请参阅此处的 W3 示例[http://www.w3schools.com/svg/tryit.asp?filename=trysvg_fegaussianblur](http://www.w3schools.com/svg/tryit.asp?filename=trysvg_fegaussianblur)。看起来它工作得很好，但那是因为它是一个正方形，你看不出它正在被裁剪！改成圆形，改：

矩形宽度=“90”高度=“90”笔画=“绿色”笔画宽度=“3”填充=“黄色”过滤器=“url（#f1）”

到

path filter="url(#f1)" fill="none" stroke="#385370" d="M87,15A72,72,0,1,1,86.99,15" stroke-width="30"

突然，比特被裁剪了。我不觉得我的圈子有什么问题吗？是什么导致了这种情况，为什么即使所有示例都做到了，我也找不到任何其他报告？！参见[http://www.c-sharpcorner.com/UploadFile/99bb20/html5-inline-svg/](http://www.c-sharpcorner.com/UploadFile/99bb20/html5-inline-svg/)，他们的例子也可以！我正在寻找 Chrome 和 Firefox。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:41:17.277

我认为你必须定义 x、y、宽度和高度。看这里：

```
<filter
   id="filter3755"
   inkscape:label="testfilter"
   x="-0.20000000000000001"
   y="-0.20000000000000001"
   height="1.3999999999999999"
   width="1.3999999999999999">
  <feGaussianBlur
     stdDeviation="3"
     id="feGaussianBlur3757" />
</filter> 
```

这些值定义了相对于元素的位置和尺寸应用过滤器的区域。在上面的示例中，过滤器的原点位于元素的 -0.2%，宽度和高度为 1.4%。

祝你好运

编辑：：

就像在另一个答案中提到的那样，svg 本身也必须足够大......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:40:56.390

只需给外部`<svg>`元素一个高度，使其足以容纳内容。例如高度=“300”。默认值为 300 像素 x 150 像素，这对于您的示例路径来说是不够的。

如果你把它变大，矩形也会发生同样的事情，例如 height="200"

# java - Java3D 与 Canvas3D 和按钮重叠

> ID：12314324
> 
> 赞同：1
> 
> 时间：2012-09-07T08:19:32.703
> 
> 标签：java, layout, java-3d, canvas3d

我一直在使用 Java3D 对固态物理学进行一些介绍。在钻研了很多 3D 里面的东西之后，决定放一些按钮来测试不同的东西。我的问题出现在这里。

在下图中，我使用 setLayout(null) 来放置按钮和 Canvas3D：

![在此处输入图像描述](../Images/513daf9f5e7d91cae7ceaab1d0155ee2.png)

我不想要的是：

*   Canvas3D 与按钮重叠。
*   Canvas3D 不会拉伸以保持图片大小/窗口大小的相同比例，因此当我调整窗口大小时，它只是大小相同。

然后我尝试使用`setLayout(new BorderLayout());`and`add("Center",component);`用于 Canvas3D，而“South”、“West”、“East”用于按钮。下图为案例：

![在此处输入图像描述](../Images/ac8908fbe232fdd019b5dfe42ae99edd.png)

这看起来更好，但这次又出现了另一个问题：

*   按钮不是我想要的大小（延伸到窗口）并且不在我想要的偏移位置。
*   当我将两个按钮放在“南”这样的同一区域时，按钮也会相互重叠。

**问题：**如何让 Canvas3D 拉伸到窗口，而按钮正好在我想要的位置 (x,y) 并且具有我想要的大小 (h,w) 而不会被 Canvas3D 重叠。我为 Canvas3D 和 Buttons 尝试了不同的布局——>失败。仅显示一种布局。

感谢您的时间。

Java3D 1.5.2 和 Eclipse 。Windows XP 和英特尔 centrino

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:38:22.010

这不是一个真正的 Java3D 问题，而是一个 Swing 布局问题。

正确的解决方案可能是某种嵌套布局，具体取决于您希望它的外观。

例如，您可以尝试边框布局，在按钮的北侧或西侧使用嵌套的 FlowLayout，这可能更接近您的要求。尝试以下类似的方法，并根据您的需要进行定制。

```
JPanel rootPanel = new JPanel(new BorderLayout());
JPanel controlPanel = new JPanel(new FlowLayout());
controlPanel.add(new JButton("Alpha"));
controlPanel.add(new JButton("Beta"));
controlPanel.add(new JButton("Gamma"));
rootPanel.add(controlPanel, BorderLayout.NORTH);
rootPanel.add(myCanvas3D, BorderLayout.CENTER); 
```

# asp.net-mvc - 在 MVC/SQL Server 表单中创建动态字段

> ID：12314327
> 
> 赞同：0
> 
> 时间：2012-09-07T08:19:42.240
> 
> 标签：asp.net-mvc, forms, dynamic

假设我们有预定义的表单，其中包含 3 个字段：FirstName、LastName、Email，并且此表单映射到表用户：ID、FirstName、LastName、Email

假设用户想要添加一个新字段，例如 BirthDate。用户将选择字段的类型，这里是 DateTime texbox 和字段旁边的文本，如出生日期，但是如何在用户表中添加此列？

任何帮助将不胜感激

约瑟夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:57:32.227

用户没有现实的方法可以动态地将字段添加到实际的数据库表中，而不是让您拥有像“DateOfBirth”或“ShoeSize”这样的新字段。

但是，您可以通过更改应用程序的核心设计来从用户那里获取动态数据。您需要做的是抽象数据库并将每个值存储为单独的记录，而不是将数据存储在固定的“水平”表中 - 有点像“垂直”表。

所以你会有一张像

```
Field, Data, Type
---------------------------
"FirstName", "John", string
"LastName", "Smith", string
"DateOfBirth", "01/01/1950", datetime
"ShoeSize", "4", int 
```

这是一个架构问题，而不是技术问题。

[这里](http://www.4guysfromrolla.com/articles/082008-1.aspx)有一篇非常好的文章，更深入地讨论了它。

重要的是要了解这确实使您的应用程序更加抽象，类型安全性降低并且因此更加复杂。除非您完全了解所涉及的额外工作，否则我不建议您尝试这样做。

# linux - 如何防止安装所有 USB 大容量存储器？

> ID：12314329
> 
> 赞同：3
> 
> 时间：2012-09-07T08:19:45.623
> 
> 标签：linux, usb, udev

我想防止使用[udev](https://en.wikipedia.org/wiki/Udev)规则安装各种 USB 大容量存储。

我已经可以使用以下规则检测到连接到我的系统的所有 USB 大容量存储设备：

```
SUBSYSTEMS=="scsi", SUBSYSTEM=="block" KERNEL=="sd[b-h]1" 
```

但是我怎样才能防止它们安装呢？

我知道我必须将其相关USB设备的授权文件设置为零！但是我怎样才能找到 USB 设备路径呢？$DEVPATH 为我提供了存储设备块的路径，例如 sdb1！

我有一个应用程序应该允许某些 USB 大容量存储设备。所以用来屏蔽USB大容量存储设备的方法不应该是一成不变的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:15:20.023

以下规则可防止除第一个分区以外的所有分区自动挂载：

```
# Rule: Only mount first partition found on /dev/sd* (USB) devices.
ACTION=="add|change", SUBSYSTEM=="block", KERNEL=="sd*[2-9]", ENV{UDISKS_PRESENTATION_NOPOLICY}="1" 
```

原因：在有多个分区的U盘中，我只想自动挂载第一个。如果需要，我手动安装其他人。

您应该能够用 KERNEL=="sd*" 替换分区匹配器，以获得：

```
# Rule: Do not automount any partitions found on /dev/sd* (USB) devices.
ACTION=="add|change", SUBSYSTEM=="block", KERNEL=="sd*", ENV{UDISKS_PRESENTATION_NOPOLICY}="1" 
```

这可以防止自动安装，然后您可以手动管理。

我只在 Ubuntu 10.10 上测试过这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:57:18.027

最简单的方法是将`usb-storage`内核模块列入黑名单。但是，这仅在它被编译为模块而不是直接编译到内核中时才有效。您可以检查`modprobe -n usb-storage.ko`，或通过在 /lib/modules/$(uname -r)/kernel/drivers/usb/storage/ 中查找它

如果它被编译为一个模块，您可以通过在 /etc/modprobe.d/blacklist(.conf) 中添加一个条目来将其列入黑名单 对于 Debian，请参阅[本指南](http://wiki.debian.org/KernelModuleBlacklisting)

# image-processing - 异步处理上传的图片：同时要做什么？

> ID：12314331
> 
> 赞同：2
> 
> 时间：2012-09-07T08:20:02.123
> 
> 标签：image-processing, asynchronous, user-experience, image-uploading, jobs

我需要接受用户上传的图片，并在后台做一些处理，比如生成不同大小的缩略图，原始图片的校验和，检查重复等等。之后，用户应该可以看到他的提交。

问题是http响应可能会在处理完成之前发送，那么我该怎么告诉用户呢？

我可以想到4个选项：

*   为缩略图放置一个愚蠢的占位符，上面写着“处理”之类的标志，并在某处加上解释。用户必须按 f5 直到他看到图像，除非他已经信任系统并且知道它会工作。
*   放置一个智能占位符，例如 javascript 动画加上重复的 ajax 调用，当缩略图准备好时将获取它们。这对用户体验很有好处，但可能会在服务器中产生一些开销。
*   异步执行处理以避免过载，但阻塞请求直到处理完成。这看起来是一个不错的选择，可以快速交付产品，如果服务器开始同时上传许多内容，则稍后进行迭代。
*   网络套接字？

还有其他选择吗？你觉得哪一个更好看？有什么我没有看到的优点/缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:35:00.450

我会选择“放置一个智能占位符，例如 javascript 动画加上重复的 ajax 调用，当缩略图准备好时会获取它们。这对用户体验非常有用，但可能会在服务器中产生一些开销。”

然后，您可以根据分析进一步细化。随着时间的推移，您将知道根据图像大小、服务器负载等因素转换每个图像需要多长时间。您可以结合这些知识来优化轮询结果的 JS 脚本。

不要尝试在没有数据点和分析的情况下进行优化。

# sql-server-2005 - 如何提高 SQL Server 2005 中的更新性能？

> ID：12314336
> 
> 赞同：0
> 
> 时间：2012-09-07T08:20:17.217
> 
> 标签：sql-server-2005, sql-update

我想加快我在 SQL Server 2005 中的更新速度。

*1.我已经聚集了使用的索引并删除了未使用的索引。*

*2.我使用了联接而不是子查询。*

还有其他提高性能的建议吗？

# javascript - 自定义进度条 和 HTML5 元素

> ID：12314345
> 
> 赞同：24
> 
> 时间：2012-09-07T08:21:09.863
> 
> 标签：javascript, audio, progress

我对如何使用标签和简单的 Javascript 为音频播放器创建自定义搜索栏感到困惑。

当前代码：

```
 <script>
  function play() {
   document.getElementById('player').play();
  }

  function pause() {
   document.getElementById('player').pause();
  }
</script>

<audio src="sample.mp3" id="player"></audio>  
<button onClick="javascript:play()" >Play</button>
<button onClick="javascript:pause()" >Pause</button>
<progress id="seekbar"></progress> 
```

是否可以链接进度条，以便在我播放歌曲时显示进度？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-07T08:58:49.243

是的，可以使用音频标签的[timeupdate](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events)事件。每次播放位置更新时，您都会收到此事件。然后，您可以使用音频元素的`currentTime`和属性更新进度条。`duration`

[您可以在这个小提琴](http://jsfiddle.net/jbalsas/DCE6N/4/)中看到一个工作示例

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-19T11:30:18.327

如果您想要平滑的进度条，请尝试这样的想法

HTML：

```
<div class="hp_slide">
     <div class="hp_range"></div>
</div> 
```

CSS：

```
.hp_slide{
    width:100%;
    background:white;
    height:25px;
}
.hp_range{
    width:0;
    background:black;
    height:25px;
} 
```

JS：

```
var player = document.getElementById('player');    
player.addEventListener("timeupdate", function() {
    var currentTime = player.currentTime;
    var duration = player.duration;
    $('.hp_range').stop(true,true).animate({'width':(currentTime +.25)/duration*100+'%'},250,'linear');
}); 
```

相当粗糙，但有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:42:56.667

首先，不要使用该`progress`元素，它是一个糟糕的元素（现在），并且它的样式是一个巨大的痛苦......好吧它很无聊（看看我做的一个小项目，[看看它](https://github.com/Calvein/Simple-uploader/blob/gh-pages/style.css#L182-L214)（它只是 webkit /moz))。

无论如何，您应该阅读[MDN](https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video)上的文档，它非常简单并且有很多示例。您正在寻找的是`currentTime`属性，这里有一个小片段：

```
var audio = document.querySelector('#player')
audio.currentTime = 60 // will go to the 60th second 
```

所以你需要的是使用交叉乘法（`div`是你用作进度条的元素）：我点击的地方`div`| 我想知道的时间
—————————————————————————————————————————————<br> 总`div` |长度 我的视频/音频的总时间 ( `audio.seekable.end()`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-09T05:09:09.797

这是一个简单的香草示例：

```
const url = "https://upload.wikimedia.org/wikipedia/en/a/a9/Webern_-_Sehr_langsam.ogg";
const audio = new Audio(url);
const playBtn = document.querySelector("button");
const progressEl = document.querySelector('input[type="range"]');
let mouseDownOnSlider = false;

audio.addEventListener("loadeddata", () => {
  progressEl.value = 0;
});
audio.addEventListener("timeupdate", () => {
  if (!mouseDownOnSlider) {
    progressEl.value = audio.currentTime / audio.duration * 100;
  }
});
audio.addEventListener("ended", () => {
  playBtn.textContent = "▶️";
});

playBtn.addEventListener("click", () => {
  audio.paused ? audio.play() : audio.pause();
  playBtn.textContent = audio.paused ? "▶️" : "⏸️";
});

progressEl.addEventListener("change", () => {
  const pct = progressEl.value / 100;
  audio.currentTime = (audio.duration || 0) * pct;
});
progressEl.addEventListener("mousedown", () => {
  mouseDownOnSlider = true;
});
progressEl.addEventListener("mouseup", () => {
  mouseDownOnSlider = false;
});
```

```
button {
  font-size: 1.5em;
}
```

```
<button>▶️</button>
<input type="range" value="0" min="0" max="100" step="1">
```

该方法是使用`input[type="range"]`滑块来反映进度并允许用户在轨道中寻找。当范围改变时，设置`audio.currentTime`属性，使用滑块作为百分比（您也可以调整`max`滑块的属性以匹配`audio.duration`）。

另一方面，我在`timeupdate`事件触发时更新滑块的进度。

一个极端情况是，如果用户在滑块上向下滚动鼠标，`timeupdate`事件将继续触发，导致进度在用户光标悬停的位置和当前音频进度之间跳跃。我使用布尔值和滑块上的`mousedown`/`mouseup`事件来防止这种情况发生。

* * *

另请参阅[JavaScript - HTML5 音频/自定义播放器的搜索栏和当前时间](https://stackoverflow.com/questions/49814828/javascript-html5-audio-custom-players-seekbar-and-current-time/70638724#70638724)，以了解显示时间的此代码的扩展。

# php - 如何在 MySQL 中合并表

> ID：12314346
> 
> 赞同：-1
> 
> 时间：2012-09-07T08:21:12.783
> 
> 标签：php, mysql

我只想将这些表合并/组合到一个查询中，但它不起作用。实际上有太多的表格和列，但对于这个例子，我只是放了一些。

```
$insertSQL_sr1 = "INSERT INTO sr1_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr1`";

$insertSQL_sr2 = "INSERT INTO sr2_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr2`";

$insertSQL_sr3 = "INSERT INTO sr3_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr3`";

$insertSQL_full = $insertSQL_sr1.";".$insertSQL_sr2.";".$insertSQL_sr3;

mysql_query($insertSQL_full);

mysql_select_db($database_pods, $pods);
  $Result1 = mysql_query($insertSQL_full, $pods) or die(mysql_error()); 
```

出现错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO sr2_full (`date`, `total_pending`, `appt_today`, `percent_appt_today' at line 1 
```

我的第二次编辑：

```
$insertSQL = "INSERT INTO sr1_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr1`; INSERT INTO sr2_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr2`; INSERT INTO sr3_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr3`";

mysql_select_db($database_pods, $pods);
  $Result1 = mysql_query($insertSQL, $pods) or die(mysql_error()); 
```

出现错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO sr2_full (`date`, `total_pending`, `appt_today`, `percent_appt_today' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:14:46.050

```
$insertSQL1 = "INSERT INTO sr1_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr1`";

$insertSQL2 = "INSERT INTO sr2_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr2`";

$insertSQL3 = "INSERT INTO sr3_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr3`"; 
```

添加`;`以组合两个 SQL 语句。

您可以像这样组合这些查询。

```
$insertSQL_Single = $insertSQL1.";".$insertSQL2.";".$insertSQL3; 
```

结果查询：

```
INSERT INTO sr1_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr1`;INSERT INTO sr2_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr2`;INSERT INTO sr3_full (`date`, `total_pending`, `appt_today`, `percent_appt_today`) SELECT `date`, `total_pending`, `appt_today`, `percent_appt_today` FROM `sr3` 
```

我已经尝试过使用 PhpMyAdmin。查询成功

它不能由**mysql_query()**执行。让我们找到一些其他的技巧。我们需要单独执行它。

使用 mysqli 执行此操作

```
$mysqli = new mysqli("host","username","password", "databasename");
if (!$mysqli->multi_query($insertSQL_Single)) {
    echo "Multi query failed: (" . $mysqli->errno . ") " . $mysqli->error;
}
else
{
    echo "success";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:00:26.183

啊，我想他想将数据从一个表复制到另一个表。只需一步将其读出，将其临时存储在某个 PHP 变量中，然后在另一步中将其插入。

# backbone.js - 骨干 - 集合提取返回未定义？

> ID：12314347
> 
> 赞同：1
> 
> 时间：2012-09-07T08:21:18.820
> 
> 标签：backbone.js

我有一个使用主干的应用程序，但是每当我调用`fetch()`集合的方法时，它都会返回未定义：

```
// App

(function () {

    window.app = {};
    app.collections = {};
    app.models = {};
    app.views = {};

    $(function () {
        app.collections.complaintTypes = new app.collections.ComplaintTypesCollection();
        app.views.complaintTypesView = new app.views.ComplaintTypesView({ collection: app.collections.complaintTypes });
    });

})();

// Collections

(function (collections, model) {
    collections.ComplaintTypesCollection = Backbone.Collection.extend({
        initialize: function () {
            this.fetch();
        },
        model: model,
        url: '/api/ComplaintTypes'
    });
})(app.collections, app.models.ComplaintType);

// Models

(function (models) {
    models.ComplaintType = Backbone.Model.extend({
        idAttribute: 'ComplaintTypeId'
    });
})(app.models);

// Views

(function (views) {
    views.ComplaintTypesView = Backbone.View.extend({
        initialize: function () {
            this.collection.on('reset', this.render, this);
        },
        render: function () {
            console.log(this.collection);
        }
    });
})(app.views); 
```

但这不返回任何东西？如果我使用 fiddler 并转到我的 URL：/api/ComplaintTypes 我确实会检索数据，所以我不确定我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:44:26.333

删除集合文件中的“模型”行对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:25:46.883

获取是异步的。如果需要获取结果，则需要传递一个“成功”处理程序，即：

```
function myHandler(models) {

}
...
this.fetch({success: myHandler}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:27:52.447

我认为问题在于您在尚未获取集合时创建了视图（因为 JS 的异步行为）。试试这个方法：

```
$(function () {
    app.collections.complaintTypes = new app.collections.ComplaintTypesCollection();
    app.collections.complaintTypes.fetch({success:function(){
        app.views.complaintTypesView = new app.views.ComplaintTypesView({ collection: app.collections.complaintTypes });
    }});      
}); 
```

并从您的集合中删除初始化功能。

# .net - Linq to XML，无法获取节点值

> ID：12314348
> 
> 赞同：1
> 
> 时间：2012-09-07T08:21:32.623
> 
> 标签：.net, xml, xml-parsing, linq-to-xml

我有以下从 Web 服务调用收到的 XML。

```
<Wireless xmlns="http://www.hikvision.com/ver10/XMLSchema">
  <enabled>true</enabled>
  <ssid>Network 1</ssid>
  <WirelessSecurity>
    <securityMode>WPA-personal</securityMode>
  </WirelessSecurity>
  <WPA>
    <algorithmType>TKIP</algorithmType>
    <sharedKey>asdfasdf</sharedKey>
    <wpaKeyLength>13</wpaKeyLength>
  </WPA>
  <WEP>
    <authenticationType>auto</authenticationType>
    <defaultTransmitKeyIndex>224</defaultTransmitKeyIndex>
    <EncryptionKeyList>
      <encryptionKey>AScii</encryptionKey>
    </EncryptionKeyList>
  </WEP>
</Wireless> 
```

我想通过它并填充一个对象，但我没有执行最基本的操作。我已经成功地在一个名为`document`. 当我写声明时

```
var elem = document.Element("Wireless");// returns null
var elem = document.Element("ssid");// also returns null
var elem = document.Descendants("ssid");//produces empty enumeration 
```

我在这里做错了什么？由于不同的 xml 命名空间是否存在问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:28:43.323

是的，问题与 xml 命名空间有关。

将命名空间声明为

```
XNamespace ns = "http://www.hikvision.com/ver10/XMLSchema"; 
```

并通过

```
 var elem = document.Element(ns + "Wireless");
 var elems = document.Descendants(ns + "ssid"); 
```

# powershell - PowerShell 日期/时间转换

> ID：12314349
> 
> 赞同：6
> 
> 时间：2012-09-07T08:21:42.357
> 
> 标签：powershell

我有一个变量 $date，其中包含`24 June 2012 00:00:00`.

我如何将其转换为`24/06/2012`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T08:35:51.197

将`Get-Date`cmdlet 与 Format 参数一起使用：

```
PS> $date = '24 June 2012 00:00:00'
PS> Get-Date $date -Format 'dd/MM/yyyy'
24/06/2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T07:19:36.720

我尝试读取日期格式为日-月-年的文件上面的答案对我不起作用，我找到了一个关于如何解析我的日期并检查哪个比当前日期更新的解决方案。这是我改编的代码。

```
$currdateobj = Get-Date
$STARTDATE = "12-05-2017"    // specific non-default date format
[DateTime]$startdateobj = [DateTime]::ParseExact($STARTDATE,"dd-MM-yyyy",[System.Globalization.CultureInfo]::InvariantCulture)
if ($startdateobj -lt $currdateobj)
{
   // ....
} 
```

# flash - 如何使用 JavaScript 检查 Chrome 中 Flash 插件的 PPAPI 状态

> ID：12314350
> 
> 赞同：2
> 
> 时间：2012-09-07T08:21:42.387
> 
> 标签：flash, shockwave, ppapi

谁能帮我获取使用 JavaScript 在 Chrome 中安装的 Flash 插件的 PPAPI 详细信息？

这是包含我需要检测的详细信息的图像：[http ://forums.adobe.com/servlet/JiveServlet/downloadImage/2-4677307-229589/450-274/plugin-detail.jpg](http://forums.adobe.com/servlet/JiveServlet/downloadImage/2-4677307-229589/450-274/plugin-detail.jpg)

提前致谢。

问候，

帕万

# javascript - 错误：timers.js:234 callback.apply(timer, args);

> ID：12314351
> 
> 赞同：2
> 
> 时间：2012-09-07T08:21:47.380
> 
> 标签：javascript, node.js, timer, setinterval

只是为了测试，我想每两秒创建一个文件，它设法创建了第一个文件，但在 2 秒后我得到以下错误：

```
Restify listening on port 8080 in %s mode
 create 2012_8_5_8_57.txt

timers.js:234
    callback.apply(timer, args);
         ^
TypeError: Cannot call method 'apply' of undefined
at Timer.exports.setInterval.timer.ontimeout (timers.js:234:14) 
```

一切都在带有 restify 框架的节点服务器中运行。如果有人知道该错误将非常感谢您的帮助！这是代码：

```
var d = new Date();
var n = d.getDay();
var m = d.getMonth();
var y = d.getFullYear();
var min = d.getMinutes();
var sec = d.getSeconds();

//create file
function openUnlink(name) {
    console.log(name);
    fs.open(name, 'w', function (err) {
        console.log(' create ' + name);

    });

};

function createFile() {
    openUnlink(y+'_'+m+'_'+n+'_'+min+'_'+sec+'.txt');
};

//create file every 2 seconds
setInterval(createFile(), 2000); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:45:42.577

您不需要在`setInterval`. 您只需要传递对它的引用。您还需要在`createFile`函数内部定义日期。

```
var fs = require('fs');

//create file
function openUnlink(name) {
    console.log(name);
    fs.open(name, 'w', function (err) {
        console.log(' create ' + name);

    });

};

function createFile() {
    var d = new Date();
    var n = d.getDay();
    var m = d.getMonth();
    var y = d.getFullYear();
    var min = d.getMinutes();
    var sec = d.getSeconds();
    openUnlink(y+'_'+m+'_'+n+'_'+min+'_'+sec+'.txt');
};

//create file every 2 seconds
setInterval(createFile, 2000); 
```

# ruby - 在 Ruby 上安装遏制 gem

> ID：12314353
> 
> 赞同：0
> 
> 时间：2012-09-07T08:21:58.307
> 
> 标签：ruby, macos, gem

尝试在我的 Mac 上安装遏制时出现此错误：

```
/usr/bin/gcc-4.2 -dynamic -bundle -o curb_core.bundle curb.o curb_easy.o curb_errors.o curb_multi.o curb_postfield.o curb_upload.o -L. -L/Users/user/.rvm/rubies/ruby-1.9.2-p318/lib -L/Users/user/.rvm/usr/lib -L. -L/usr/local/lib -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  -lruby.1.9.1  -lpthread -ldl -lobjc  -lcurl
ld: in /usr/local/lib/libssl.0.9.8.dylib, missing required architecture x86_64 in file for architecture x86_64
collect2: ld returned 1 exit status
make: *** [curb_core.bundle] Error 1 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:16:31.940

看来你需要64位`openssl`

检查这个

[安装 pg gem 时遇到问题](https://stackoverflow.com/questions/9846900/trouble-installing-pg-gem)

# ruby-on-rails - 将两个相同类型的模型分配给rails中的另一个模型

> ID：12314356
> 
> 赞同：0
> 
> 时间：2012-09-07T08:22:06.227
> 
> 标签：ruby-on-rails, ruby, activemodel

我在 Rails 中遇到了一个有趣的问题 假设我有一个模型，我想在它上面附加两个相同类型的模型，但这两个应该分开。

假设我们有一条狗，一条狗可以有训练师和主人，但训练师和主人都是人类餐桌的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:30:02.560

假设 dog 表有 owner_id 和 trainer_id 引用外键

```
class Dog <AR::Base
 belongs_to :trainer,:class_name=>"Human",:foreign_key=>'trainer_id'
 belongs_to :owner,:class_name=>"Human",:foreign_key=>'owner_id'
end 
```

# android - 在测试或开发时从 Android 应用禁用 GoogleAnalytics

> ID：12314357
> 
> 赞同：12
> 
> 时间：2012-09-07T08:22:13.003
> 
> 标签：android, testing, analytics

我在我的 Android 应用程序中使用 EasyTracker，当应用程序处于“开发”或“测试”模式时，我需要一种方法来禁用分析跟踪（我在常量文件中有一个标志来区分）。

最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-22T06:04:55.720

我相信使用 Analytics 第 4 版执行此操作的正确方法是使用 Opt Out 方法

```
GoogleAnalytics.getInstance(this).setAppOptOut(true); 
```

如果您在调试模式下构建，则可以设置该方法。IE。

```
GoogleAnalytics.getInstance(this).setAppOptOut(BuildConfig.DEBUG); 
```

我正在使用类似的东西来允许用户选择退出分析。

我在以下链接中找到了此信息：[https ://developers.google.com/analytics/devguides/collection/android/v4/advanced](https://developers.google.com/analytics/devguides/collection/android/v4/advanced)

编辑：刚刚看到原始问题的日期，但我想无论如何我都会添加这个答案，因为这是我正在寻找的东西。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-09T13:23:07.280

更新：随着[适用于 Android 的 Google Analytics v3 的发布](https://developers.google.com/analytics/devguides/collection/android/v3)，

> SDK 提供了一个 dryRun 标志，设置后会阻止任何数据发送到 Google Analytics。每当您测试或调试实现并且不希望测试数据出现在您的 Google Analytics（分析）报告中时，都应设置 dryRun 标志。
> 
> 要设置试运行标志：
> 
> // 当设置了空运行时，命中不会被分派，但仍会被记录，就像它们被分派一样。
> 
> **GoogeAnalytics.getInstance(this).setDryRun(true);**

+++ 我的旧答案 +++

`analytics.xml`当您处于开发模式时，只需在文件中注释以下行。

```
<string name="ga_trackingId">UA-****</string> 
```

Google Analytics 将无法找到任何跟踪 ID，因此 EasyTracker 将无法完成其工作。当您构建要发布的应用程序时，取消注释该行就可以了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-25T13:16:31.003

如果您正在构建一个独立的应用程序（不是库），这将是最简单的方法，让构建系统确定它是否是调试构建。

```
if(BuildConfig.DEBUG){
    GoogleAnalytics.getInstance(this).setDryRun(true);
} 
```

我在网上看到这种方法不适用于库项目，因为构建工具中存在错误，它没有`BuildConfig.DEBUG`为库正确设置标志。不确定这个问题现在是否已修复。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-07T08:30:41.107

您可以使用具有静态布尔值的类，例如 DEBUG：

```
public final class BuildMode {
        public final static boolean DEBUG = true;
} 
```

在代码中，只需使用：

```
if (BuildMode.DEBUG) ... 
```

这是适用于所有 android SDK 版本的解决方案！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-21T08:15:24.660

firebase 的最新版本有这个方法，可以放在 App 类中：

`FirebaseAnalytics.getInstance(this).setAnalyticsCollectionEnabled(!BuildConfig.DEBUG);`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T13:39:31.647

我正在做的是通过在analytics.xml中设置一个负周期来禁用定期调度：

```
<integer name="ga_dispatchPeriod">-60</integer> 
```

或者您可以使用您的标志以编程方式执行此操作：

```
if (testingMode) {
    GAServiceManager.getInstance().setDispatchPeriod(-1);
} else {
    GAServiceManager.getInstance().setDispatchPeriod(60);
} 
```

除非您手动执行，否则不会发送命中。

如果您只使用定期调度（从不`.dispatch()`手动调用），那应该可以工作。我猜，在第二天凌晨 4 点之前未发送的点击会以某种方式被丢弃，因为它们无论如何都不会出现在报告中。

请参阅 Google Analytics（分析）开发人员指南：

> ***注意：**数据必须在每个配置文件的本地时区的**第二天凌晨 4 点之前发送和接收。**在此之后收到的任何数据都不会出现在报告中。*

更多信息：[https ://developers.google.com/analytics/devguides/collection/android/v2/dispatch](https://developers.google.com/analytics/devguides/collection/android/v2/dispatch)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-14T19:41:06.517

我的技术是在发布时间之前更改`android:versionName`Android Manifest 中的内容。

例如，`1.0.0.ALPHA`在构建发布 APK 之前，您可以更改为`1.0.0`. 这样，您以后仍然可以查看所有崩溃报告，但它们将在分析中分组。

[此 SO 票](https://stackoverflow.com/q/9855834/1747491)谈论使用标志`BuildConfig.DEBUG`有条件地配置分析并`Atul Goyal's`回答引用. 如果您不关心将来在调试期间看到崩溃报告并假设标志正常工作，那么这两件事可能是一个不错的设置。`dryRun``v3``BuildConfig.DEBUG`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-07T08:13:27.280

我对这个问题有不同的方法。有时您仍想测试分析是否正常工作，但只想在生产报告中过滤掉测试数据。我的解决方案是在 GA 中创建一个自定义会话范围维度（即 AppBuild），用于跟踪您是否正在运行应用程序的调试或生产构建。在您创建 Tracker 后的代码中，输入：

```
// replace 1 with the correct dimension number if you have other dimensions defined
tracker.set("&cd1", BuildConfig.DEBUG ? "debug" : "production"); 
```

然后创建或修改您的 GA 视图以在 AppBuild 上添加过滤器，不包括调试。这应该会从您的 GA 视图中过滤掉所有调试数据。您还可以添加一个新视图来显示调试数据。

# javascript - 表单中元素的更改值未发布

> ID：12314359
> 
> 赞同：0
> 
> 时间：2012-09-07T08:22:20.567
> 
> 标签：javascript, html, google-maps, dom, post

我有一个带有一个输入元素的表单，它通过邮寄从最后一页获取其值，如下所示：

```
<form action="http://localhost/maps_en2/next-page" method="POST">
    <input name="srchZoom" type="hidden" value="<?php if( isset($_POST['srchZoom']) ) echo $_POST['srchZoom']; ?>">
    <input type="submit" class="buttonForLink" value="next page"/> | 
</form> 
```

此表单旨在用作链接。

我需要能够在 mapIdle 事件之后更改元素的值，然后在点击链接时将新值发布到下一页。

所以我这样做：

```
function mapIdle(){
    document.getElementsByName("srchZoom").innerHTML = map.getZoom();
} 
```

我检查了一下，确实在 mapIdle 事件之后元素的值发生了变化。
我通过单击一个触发它的按钮来检查它：

```
alert(document.getElementsByName("srchZoom").innerHTML); 
```

问题是当点击链接时，表单会发布元素的原始值，而不是函数设置的值`mapIdle()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:52:27.950

```
 document.getElementsByName("srchZoom") 
```

返回数组（getElements - 复数）。因此，使用 document.getElementsByName("srchZoom").innerHTML 您将属性 innerHTML 添加到该数组中。你应该把它改成

```
document.getElementsByName("srchZoom")[0].value = map.getZoom(); 
```

更改名称为*srchZoom*的第一个元素的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:25:51.113

我认为你应该使用“value”而不是“innerHTML”：

```
function mapIdle(){
    document.getElementsByName("srchZoom").value = map.getZoom();
} 
```

# javascript - Javascript 仅在 chrome 上打开 javascript 控制台时才有效

> ID：12314360
> 
> 赞同：3
> 
> 时间：2012-09-07T08:22:23.700
> 
> 标签：javascript, ajax, google-chrome

我有一个脚本（javascript）可以在 Firefox 中运行，但不能在 chrome 或 IE 中运行。我打开 chromes 调试控制台来查找问题。没有错误报告，代码完美运行。在控制台关闭的情况下再次运行它不再起作用。

我验证了脚本的版本是正确的（不是旧的和缓存的）。控制台不报告任何警告或错误。

我尝试将简单的日志记录写入页面底部的 div - 没有信息。（在调试控制台中它可以工作 - 包括 div 中的日志信息）。

该函数是向服务器发出 XMLHttpRequest 后的回调。

我验证了通过包含 error_log 调用来调用 php 脚本。error_log 正确显示了返回值。页面刷新还显示该行已被删除。

除非控制台打开，否则似乎永远不会调用函数 removeRow()。（方法或保留字冲突？？）尝试将函数名称更改为 delRow（包括回调） - 仍然无法正常工作。

所有其他 Ajax 调用似乎都可以正常工作。

代码片段如下：

```
var pos = 0;
var xhr;

function eraseRow() {
   var myImage = this;
   var fullid = myImage.id;
   // split row no and record id eg 5_1223 => row=5 and recordid=1223
   var idComponents = fullid.split("_");
   if (idComponents.length > 1) {  // check if image has complete row info
      rowid = idComponents[1]; // extract row number from id
      pos = parseInt(idComponents[0]);
      xhr = new XMLHttpRequest(); // only support IE8 or +
      xhr.onreadystatechange = removeRow;
      xhr.open("GET","valid_del.php$delrow="+rowid;
      xhr.send(null);
   }
}

function removeRow() {
   if (xhr.readyState == 4) {
      if (xhr.status == 200) {
         var err = document.getElementById("errormsg");
         var str = xhr.responseText;
         err.innerHTML = "Server returned "+str;
         if (str === "go-ahead") {
            var table = document.getElementById("tableid");
            table.deleteRow(pos);
         }
      }
   }
} 
```

PHP (valid_del.php):

```
<?php
include(funclib.php);
if (isset($_GET['delrow']) && strlen($_GET['delrow'] > 0) {
   $recid = $_GET['delrow'];
   $db = createDbConn(); // function that connects to mysql server db
   $result = $db->query("delete from doclibrary where doc_id='$recid'");
   if ($result===true) {
      echo 'go-ahead';
      error_log('Script successful - returns go-ahead',0);
   } else {
      echo 'stop';
      error_log('Script not successful - returns stop',0);
   }
   $db->close();
} else {
   echo 'stop';
   error_log('Script not given record id - returns stop',0);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T10:03:01.953

我认为 DOM 还没有准备好，尝试将代码调用添加到 window.onload 中，或者如果您使用的是 JQuery，则添加到 $(document).ready 中。

# java - 使用 apache http 客户端的代理上的 HTTPs

> ID：12314361
> 
> 赞同：2
> 
> 时间：2012-09-07T08:22:27.677
> 
> 标签：java, apache, http, ssl

我有一个基于 apache http 客户端的 http 客户端，它似乎对 ssl 证书没有问题。我使用自定义 SSLSocketFactory 对全球认可的证书和自签名证书进行了单元测试。

但是，当我在代理后面运行相同的代码时，它停止工作。我不断收到这个可怕的异常：

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:572)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)
at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805) 
```

我将代码减少到最低限度，它仍然抛出相同的异常。编码：

```
 URI uri = new URI("https://www.google.com");
    DefaultHttpClient client = new DefaultHttpClient();
    client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, 
            new HttpHost("proxy.int", 8080, "https"));

    HttpUriRequest request = new HttpGet(uri);
    HttpResponse response = client.execute(request); 
```

如果未指定任何内容，我不确定它是否使用默认的 ssl 设置，因此我也明确添加了它：

```
 URI uri = new URI("https://www.google.com");
    DefaultHttpClient client = new DefaultHttpClient();
    client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, 
            new HttpHost("proxy.int", 8080, "https"));

    client.getConnectionManager().getSchemeRegistry().register(
            new Scheme("https", 443, SSLSocketFactory.getSystemSocketFactory()));

    HttpUriRequest request = new HttpGet(uri);
    HttpResponse response = client.execute(request); 
```

我还尝试了 getSocketFactory() （不完全确定与 getSystemSocketFactory() 有什么区别），但仍然是同样的错误。

**编辑**：

代理具有可选的身份验证，我尝试过使用和不使用。使用以下代码设置身份验证信息：

```
 client.getCredentialsProvider().setCredentials(
        new AuthScope("proxy.int", 8080),
        new UsernamePasswordCredentials("user", "password")
    ); 
```

完全一样的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T05:38:58.473

问题出在代理声明中，我必须指定“http”而不是“https”：

```
client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, 
        new HttpHost("proxy.int", 8080, "http")); 
```

# iphone - 由于“释放的对象”而无法传输值

> ID：12314364
> 
> 赞同：0
> 
> 时间：2012-09-07T08:22:35.547
> 
> 标签：iphone, objective-c

我正在尝试将 lat\lon 传递给其他实例。我添加了对 lat\lon decive 的调用并将它们保存在`NSString`

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    lat = newLocation.coordinate.latitude;
    lon = newLocation.coordinate.longitude;
    latValueNSString = [NSString stringWithFormat: @"%f", lat];
    lanValueNSString = [NSString stringWithFormat: @"%f", lan];

} 
```

是`lat,lon`浮动类型。

当我进入这个界面时

```
AppDelegate *appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate; 
```

在调试器模式下，我看到了 lat,lon (float) 的值，但无法找到它们。当我访问`latValueNSString/lanValueNSString` 我看到它“ `freed object`”

我怎样才能传递这些值？我的错误在哪里？尝试了同样的事情`NSSunmber`和同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:58:57.680

您正在分配一个`autoreleased`对象（`[NSString stringWithFormat: @"%f", lat]`将返回一个`utoreleased`对象），这就是您收到该错误的原因。您需要保留该值以供进一步使用。

只需更改您的方法，例如：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    lat = newLocation.coordinate.latitude;
    lon = newLocation.coordinate.longitude;
    self.latValueNSString = [NSString stringWithFormat: @"%f", lat];
    self.lanValueNSString = [NSString stringWithFormat: @"%f", lan];

} 
```

或者

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    lat = newLocation.coordinate.latitude;
    lon = newLocation.coordinate.longitude;
    latValueNSString = [[NSString stringWithFormat: @"%f", lat] retain];
    lanValueNSString = [[NSString stringWithFormat: @"%f", lan] retain];

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T10:08:09.873

对浮点变量使用`assign`属性，无需释放它。对于`NSString`变量，`retain/release`很好。

# javascript - KnockoutJS：对虚拟元素使用嵌套条件 if 语句

> ID：12314368
> 
> 赞同：1
> 
> 时间：2012-09-07T08:22:57.617
> 
> 标签：javascript, jquery, mvvm, knockout.js

我想使用虚拟元素来遍历集合，但前提是集合存在于视图模型中。我最初的猜测是添加一个 virtual if 后跟一个 virtual foreach ，如下所示：

```
<!-- ko if: items -->
    <!-- ko foreach: items -->
        <span data-bind="text: $data"></span>
    <!-- /ko -->
<!-- /ko --> 
```

使用给定的视图模型，如果集合存在，我的视图模型会正确绑定。但是由于某种原因，如果没有，KnockoutJS 会抛出一个异常，说我的集合没有定义。这是有道理的，除非我取出 foreach 语句。如果集合不存在，则 if 语句作为例外运行并且不绑定。我在[http://jsfiddle.net/danlister/qhL7e/](http://jsfiddle.net/danlister/qhL7e/)给出了一个更好的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T16:02:11.027

你的小提琴提供了两个不同的问题。

## 第一个问题

第一个在于 items 是 observableArray 的事实。因为这个事实，当你测试时

```
<!-- ko if: items --> 
```

它总是返回 true 因为 observableArray 只是一个函数调用。要解决此问题，您可以检查数组是否为空，因为您知道 items 数组将始终存在，例如

```
<!-- ko if: items().length !== 0 --> 
```

## 第二个问题

据我所知，第二个问题（在你的小提琴中引用 noitems 数组）无法完成。这是因为在第一次将绑定应用到页面时，它会计算所有 if 语句，并且只有在其中一个可观察变量发生变化时才会更新它们。由于数组在创建时不存在，因此永远不会重新评估它。

* * *

我创建了一个小提琴来展示这两种情况：http: [//jsfiddle.net/Rynan/3UMTM/](http://jsfiddle.net/Rynan/3UMTM/)。请注意，当您为第一个问题删除数组中的所有元素时，“test”如何消失，以及即使文本更新，当您切换 noitems 布尔值时，“Taa-daa”如何永远不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:42:20.463

问题出在这个...

```
<!-- ko if: noitems -->
    <!-- ko foreach: noitems -->
        <span data-bind="text: $data"></span>
    <!-- /ko -->
<!-- /ko --> 
```

您需要`noitems`在视图模型中定义一个成员。

**编辑**

你可能可以做这样的事情来解决它 - 我还没有尝试过。

```
<!-- ko if: noitems -->
    <!-- ko foreach: noitems && noitems() -->
        <span data-bind="text: $data"></span>
    <!-- /ko -->
<!-- /ko --> 
```

# wordpress - WordPress作者页面404

> ID：12314369
> 
> 赞同：1
> 
> 时间：2012-09-07T08:23:03.423
> 
> 标签：wordpress

我在列出给定作者的所有帖子时遇到问题，`author.php` 所有用户都可以正常工作，除了管理员。

[http://somedomain.com/author/MyUser](http://somedomain.com/author/MyUser) - OK（非管理员用户！）
[http://somedomain.com/author/?author=1](http://somedomain.com/author/?author=1) - OK（管理员 ID = 1）

[http://somedomain.com/author/admin](http://somedomain.com/author/admin) - 404
[http://somedomain.com/author/User.Admin](http://somedomain.com/author/User.Admin) - 404
[http://somedomain.com/author/AdminNickName](http://somedomain.com/author/AdminNickName) - 404

`wp_query`如下：

```
$curauth = (get_query_var('author_name')) ? get_user_by('slug', get_query_var('author_name')) : get_userdata(get_query_var('author'));

$args = array( 'post_type' => 'post', 'author' =>$curauth->ID, 'posts_per_page' => 10 );
$wp_query = new WP_Query($args); 
```

有什么解决办法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T18:03:09.503

我有同样的问题。这是下面的解决方案。（我不确定为什么会这样，但确实如此。）

编辑您的 Wordpress 数据库表 wp_users。找到您的管理员帐户并编辑“user_nicename”字段。输入您的登录名（或一些 URL 友好字符串）并保存。

而已。就我而言，该列中的原始值是“Trevor Gehman”，作者页面的 url 是 /author/TrevorGehman/，它返回 404。我将值更改为“trevorgehman”，然后 url 变为 /author/trevorgehman/它奏效了！

[http://wphacks.com/change-author-archive-permalink/](http://wphacks.com/change-author-archive-permalink/)

# sql-server-2008 - Sqlserver 标准触发顺序

> ID：12314371
> 
> 赞同：1
> 
> 时间：2012-09-07T08:23:09.923
> 
> 标签：sql-server-2008, triggers, crm

我有由外部 CRM 部分创建和编辑的数据库，其中某些表在触发后有多个（最多 2 个）。这是因为 CRM 自动生成了 1 个触发器（我对其控制有限），另一个包含我的代码。

CRM 触发器为插入的数据行生成主键。我的触发器需要访问该主键才能将其作为外键写入另一个表。我用

```
Select @id=max(id) from mytable 
```

因为 Scope_Identity 没有以某种方式产生预期的结果。

这一直有效，直到我让 CRM 重新创建表和它自己的触发器。我的触发器选择的那个表的最大 id 似乎总是**actual_id - 1**。

当我使用相同的代码更改我的触发器时，它总是让程序再次工作。

我的问题是：SQL Server（我使用的是 SQL Server 2008）是否按创建时间设置其触发顺序？

并且是

```
sp_settriggerorder @triggername='mycustomtrigger', @order='Last', @stmttype='INSERT' 
```

每次 CRM 重新创建其触发器时，我是否要永久更改它，或者我是否必须再次调用该过程？（使用 DROP 和 CREATE，而不是 ALTER）

希望这个问题的答案能帮助看到同样问题的人。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:36:28.217

它没有*记录*，但我相信该`LAST`设置将保留在触发器中，只要它没有被修改。（相反，据*记载*，如果触发器被修改，它将丢失此设置）。但是，它似乎有效：

```
create table T (ID int not null)
go
create trigger T_T1 on T
after insert
as
    RAISERROR('T1',10,1) WITH NOWAIT
go
create trigger T_T2 on T
after insert
as
    RAISERROR('T2',10,1) WITH NOWAIT
go
create trigger T_T3 on T
after insert
as
    RAISERROR('T3',10,1) WITH NOWAIT
go
insert into T(ID) values (1)
go
sp_settriggerorder 'T_T2','Last','INSERT'
go
insert into T(ID) values (2)
go
drop trigger T_T1
go
create trigger T_T1 on T
after insert
as
    RAISERROR('T1',10,1) WITH NOWAIT
go
insert into T(ID) values (3) 
```

结果：

```
T1
T2
T3

(1 row(s) affected)
T1
T3
T2

(1 row(s) affected)
T3
T1
T2

(1 row(s) affected) 
```

但是，关于您的第一个问题：

> SQL Server（我使用的是 SQL Server 2008）是否按创建时间设置其触发顺序？

它*似乎*也有，但我*不会*依赖它。[`sp_settriggerorder`](http://msdn.microsoft.com/en-us/library/ms186762.aspx)是唯一记录任何订购的地方。

最后，正如我在评论中提到的那样，我不会依赖您当前的`Select @id=max(id) from mytable`方法 - 它可能由于多种原因而被破坏，但最重要的是每个方法都会触发一次触发器，并且可能会响应*多*行而触发，因此您应该编写触发器来使用`inserted`伪表（并期望它包含 0、1 或多行）。

# html - 如何避免像按钮 iframe 这样的 facebook 在其他按钮旁边越过它？

> ID：12314375
> 
> 赞同：3
> 
> 时间：2012-09-07T08:23:25.337
> 
> 标签：html, css, facebook, facebook-like

所以，我想在彼此旁边设置一个[类似 Facebook 的按钮](https://developers.facebook.com/docs/reference/plugins/like/)(html5) 和一个 Twitter 推文按钮。

一切都在这里设置：http: [//jsfiddle.net/tGujU/](http://jsfiddle.net/tGujU/)

当我点击 facebook like 按钮时，我遇到了一个大问题。
因为它会显示评论弹出窗口（我想看到弹出窗口），所以 facebook iframe 会被*调整为 450px*。弹出窗口消失后，*iframe 不会调整为小尺寸*！我设置了设计，因此在两个按钮之间没有创建大的空间。

但问题是，一旦你点击了 facebook like 按钮，你就不能再点击 tweet 按钮了，因为宽的 facebook iframe 覆盖了它。

**我尝试了什么：**

*   使用`overflow:hidden`，`div#facebook_button`但是，我看不到评论弹出窗口。=> 不合格。
*   更改 iframe z-index 以获得顶部的 twitter iframe => 无效。
*   在 FB iframe 上添加一个侦听器以尝试`overflow:hidden`在正确的时间设置并在需要时将其删除，但无法找到侦听其更改的方法。

**我想做的事：**

*   保持供应商的顺序，不要把 Facebook 放在右边。
*   单击“赞”按钮后，请查看 FB 评论弹出窗口。
*   单击 FB 按钮后能够单击推文按钮。
*   支持 IE8+、FF4+ 和 Chrome。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:22:27.470

您可以抬起`z-index`Twitter 按钮 ( `iframe`) 的 ，使其高于任何 Facebook 内容。

```
#twitter_button iframe{
  z-index:9999;
  position:absolute
}​ 
```

不是最漂亮的解决方案，但它有效（参见[Fiddle](http://jsfiddle.net/tGujU/1/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:09:37.743

`.fb-like { width: 75px; }`我就是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:15:14.103

这是我倾向于做的...

```
/* make the like button smaller */
.fb_edge_widget_with_comment iframe {
    width:47px !important;
}
/* but make the span that holds the comment box larger */
.fb_edge_widget_with_comment iframe.fb_iframe_widget_lift {
    width:450px !important;
} 
```

CSS 的第一位按您想要的大小调整like 按钮的大小（在这种情况下，它的大小是为了隐藏计数气泡）。CSS 的第 2 位确保单击按钮时评论框可见。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-07T08:28:57.957

你试过给它一个120px的固定宽度吗？我认为这会涵盖它

# c# - 为什么在 C# 中使用 Connection.GetHashCode？

> ID：12314376
> 
> 赞同：0
> 
> 时间：2012-09-07T08:23:28.597
> 
> 标签：c#, gethashcode

当我检查一个项目（我的公司代码）时。我看了这个：

```
public override int GetHashCode()
{
    unchecked
    {
        int result = 17;
        result = result * 23 + ((connection != null) ? this.connection.GetHashCode() : 0);
        return result;
    }
} 
```

其实，我`GetHashCode()`第一次见到。我跑了一点。但我不明白他们为什么在此代码行中使用它并用于连接？

有什么特殊原因吗？使用 getHashCode 进行连接的逻辑是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:26:54.870

如果您知道为对象生成快速且分布良好的哈希键的好方法，则应使用 GetHashCode。

当您要将对象存储在字典等中时，这很有用。更好的散列意味着这些数据结构的效率更高。

否则使用基本的 GetHashCode()。这在很多情况下都是次优的。有关将 GetHasCode 覆盖与 Equals 覆盖结合使用的一些详细信息，请参阅；

[http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:34:01.617

GetHashCode 可用于快速识别两个实例是否看起来“相同”（不同的哈希码 = 不同的实例；相同的哈希码可能意味着相同的实例）。

显然，“连接”字段对于确定对象的身份很重要。

# jquery - event.preventDefault(); 在 Firefox 中不停止鼠标滚轮

> ID：12314377
> 
> 赞同：8
> 
> 时间：2012-09-07T08:23:35.277
> 
> 标签：jquery, mousewheel, preventdefault

我在 jquery 中使用鼠标滚轮来增加 div 的数量，数字正确增加，但在 Firefox 中滚动并没有停止。

```
$(document).ready(function(){

    $('#test').bind('mousewheel DOMMouseScroll', function(event){

        var currentValue = parseInt($('#test').text(),10),
            newValue = currentValue + 1;

        $('#test').text(newValue);    
        event.preventDefault();
    });
}); 
```

小提琴：http: [//jsfiddle.net/rHVUn/](http://jsfiddle.net/rHVUn/)

小提琴使用标准的鼠标滚轮检测，但我也使用了 Brandon Aaron 的鼠标滚轮插件，它也有同样的问题。

删除更新 div 文本的行（我也尝试过 html()）可以解决问题，但这是代码的关键部分，无法删除。

有谁知道如何解决这个问题？

谢谢

**更新：**我发现只有当我的鼠标直接放在文本上时才会出现问题，如果我的鼠标在框内但不在文本上（在填充内），则滚动停止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-06T18:42:35.947

尽管阻止了滚动事件，但当我搜索 Firefox 滚动问题时，这仍然是最热门的帖子之一。

Firefox 在鼠标滚动时触发两个事件：`DOMMouseScroll`和`MozMousePixelScroll`. 见[https://github.com/jquery/jquery-mousewheel/issues/45#issuecomment-11749359](https://github.com/jquery/jquery-mousewheel/issues/45#issuecomment-11749359)有必要阻止该`MozMousePixelScroll`事件。

根据[https://developer.mozilla.org/en-US/docs/Web/Events/MozMousePixelScroll](https://developer.mozilla.org/en-US/docs/Web/Events/MozMousePixelScroll)，最现代的事件名称是`wheel`，它似乎适用于我的 Firefox (55) 和 Chrome (61) 版本。可能这就是您应该使用的。请参阅[https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent](https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/WheelEvent)

这是一个JSFiddle：

[https://jsfiddle.net/ahpy9f66/](https://jsfiddle.net/ahpy9f66/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:50:17.223

试试这个

```
$(document).ready(function(){

    $('#test').bind('mousewheel DOMMouseScroll', function(event){

        var currentValue = parseInt($('#test').text(),10),
            newValue = currentValue + 1;

        $('#test').text(newValue);    
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:39:37.213

我找到了解决问题的方法，它可能不是最好的方法，但它确实有效。

我发现只有在滚动过程中鼠标直接位于文本上方时才会出现问题，因此我添加了一个覆盖元素并将其用作鼠标滚轮触发器。

小提琴： http: [//jsfiddle.net/rHVUn/9/](http://jsfiddle.net/rHVUn/9/)
*（不需要背景颜色）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-07T07:30:49.477

这在 chrome、firefox 最新版本和 IE 上运行良好，[试试这个](http://jsfidd)：

```
document.onmousewheel = function(){ stopWheel(); } /* IE7, IE8 */
if(document.addEventListener){ /* Chrome, Safari, Firefox */
    document.addEventListener('DOMMouseScroll', stopWheel, false);
}

function stopWheel(e){
    if(!e){ e = window.event; } /* IE7, IE8, Chrome, Safari */
    if(e.preventDefault) { e.preventDefault(); } /* Chrome, Safari, Firefox */
    e.returnValue = false; /* IE7, IE8 */
}
```

```
div {
    float:left;
    width:25px;
    height:25px;;
    text-align:center;
    margin:5px;
    padding:5px;
    border:1px solid #bbb;
}
#test_ov {
    position:absolute;
    background:rgba(45,65,40,0.3);
}
```

```
<div style="height:900px; border:0;">
    <div id="test">0</div>
    <span id="test_ov"></span>
</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-27T05:45:55.357

没有一个答案对我有用，但`event.stopImmediatePropagation()`有效。

参考：[https ://stackoverflow.com/a/63609840/10830621](https://stackoverflow.com/a/63609840/10830621)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-07T08:26:35.057

您是否尝试过绑定“鼠标滚轮”事件而不是您所拥有的？：

```
$('#test').bind('mousewheel', function(event){ ... 
```

我改编了你的小提琴，它似乎工作

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-03-07T09:08:41.263

```
$('#objectId').on({
            'mousewheel': function(e) {                
                e.preventDefault();
                e.stopPropagation();
                }
            }) 
```

改用这个，这对我有用

# windows-8 - 如何在 Windows 8 C# 空白应用程序中手动添加 OnShareTargetActivated() 方法？

> ID：12314380
> 
> 赞同：0
> 
> 时间：2012-09-07T08:23:47.853
> 
> 标签：windows-8, microsoft-metro, windows-runtime

我已经创建了一个 Windows8 空白 xaml 应用程序。现在我想将此应用程序作为共享目标。我已按照以下链接中的说明进行操作，并且能够将其作为目标应用程序。

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh973053](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh973053)

但是我在空白的 xaml 应用程序中在哪里添加以下方法（OnShareTargetActivated）？当我在 mainpage.xaml.cs 中手动添加此方法时，它会显示错误“

“Project.MainPage.OnShareTargetActivated(Windows.ApplicationModel.Activation.ShareTargetActivatedEventArgs)' 是密封类中的新虚拟成员”

“Project.MainPage.OnShareTargetActivated(Windows.ApplicationModel.Activation.ShareTargetActivatedEventArgs)”：找不到合适的方法来覆盖“

```
 protected override async void OnShareTargetActivated(ShareTargetActivatedEventArgs args)
 {
   // Code to handle activation goes here. 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:16:11.797

它位于从 Windows.UI.Xaml.Application 继承的类中。通常是 App.cs。

例如

```
sealed partial class App : Application
{
    public App()
    {
        this.InitializeComponent();
    }

    //...

    protected override void OnShareTargetActivated(ShareTargetActivatedEventArgs args)
    {
        var rootFrame = new Frame();
        rootFrame.Navigate(typeof(MainPage), args.ShareOperation);
        Window.Current.Content = rootFrame;
        Window.Current.Activate();
    }
} 
```

# c# - GridView 更新功能不起作用 - 不更新记录

> ID：12314381
> 
> 赞同：1
> 
> 时间：2012-09-07T08:23:52.667
> 
> 标签：c#, asp.net, .net, sql-server, gridview

我创建了一个 Web 应用程序并包含一个 GridView，它将从表中检索记录`testtable`。

代码如下：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                DataSourceID="SqlDataSource1">
                <Columns>
                    <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
                    <asp:BoundField DataField="product_no" HeaderText="product_no" 
                        InsertVisible="False" ReadOnly="True" SortExpression="product_no" />
                    <asp:BoundField DataField="product_name" HeaderText="product_name" 
                        SortExpression="product_name" />
                    <asp:BoundField DataField="price" HeaderText="price" SortExpression="price" />
                    <asp:BoundField DataField="expire_date" HeaderText="expire_date" 
                        SortExpression="expire_date" />
                    <asp:BoundField DataField="expire_time" HeaderText="expire_time" 
                        SortExpression="expire_time" />
                </Columns>
            </asp:GridView>

            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:testbaseConnectionString %>" 
                DeleteCommand="DELETE FROM testtable WHERE (product_no = @product_no)" 
                InsertCommand="INSERT INTO testtable(product_name, price, expire_date, expire_time) VALUES (@product_name, @price, @expire_date, @expire_time)" 
                SelectCommand="SELECT testtable.* FROM testtable" 
                UpdateCommand="UPDATE testtable SET product_name = @product_name, price = @price, expire_date = @expire_date, expire_time = @expire_time WHERE (product_no = @product_no)">
                <DeleteParameters>
                    <asp:Parameter Name="product_no" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="product_name" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="product_name" />
                    <asp:Parameter Name="price" />
                    <asp:Parameter Name="expire_date" />
                    <asp:Parameter Name="expire_time" />
                    <asp:Parameter Name="product_no" />
                </UpdateParameters>
            </asp:SqlDataSource> 
```

但是，当我单击`Edit`GridView 的特定记录的链接并进行一些更改时，我单击了该`Update`链接，但未反映更改，并且似乎没有更新到表中。（`Edit`链接看起来和下图中的一模一样）

![在此处输入图像描述](../Images/b260a6ddf7a0f492cdbe76b5d7995de3.png)

我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:10:17.230

GridView 控件中没有“DataKeyNames”。

修改您的 gridView 标签如下：

```
 <asp:GridView DataKeyNames="product_no"   ... /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:22:45.090

尝试改变这两个

```
<asp:BoundField DataField="product_no" HeaderText="product_no" 
                    InsertVisible="False" ReadOnly="True" SortExpression="product_no" />
<asp:BoundField DataField="product_name" HeaderText="product_name" 
                    SortExpression="product_name" /> 
```

有了这个

```
<asp:TemplateField HeaderText="product_name" SortExpression="product_name">
    <ItemTemplate>
        <asp:HiddenField id="hfProduct_No" runat="server" value='<%# Bind("product_no") %>' />
        <asp:Label id="lblProduct_name" runat="server"  Text ='<%#Bind("product_name")%>' ></asp:Label>
    </ItemTemplate>
    <EditItemTemplate>
        <asp:HiddenField id="hfProduct_No" runat="server" value='<%# Bind("product_no") %>' />
        <asp:TextBox id="txtProduct_name" runat="server"  Text ='<%#Bind("product_name")%>' ></asp:TextBox>
    </EditItemTemplate>    
</asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:35:44.657

查看这些链接希望对您有所帮助

*   [使用 SQLDataSource 插入、更新、删除](http://www.aspdotnetfaq.com/Faq/How-to-insert-row-in-GridView-with-SqlDataSource.aspx)
*   [在 Asp.net 博客上](http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs)

# mongodb - 在没有计数的mongoDb中分组

> ID：12314382
> 
> 赞同：2
> 
> 时间：2012-09-07T08:23:53.667
> 
> 标签：mongodb, date, group-by

我正在从事一个个人项目，在该项目中，我需要按四舍五入的日期对我的所有对象进行分组，直到同一小时。问题是我不想聚合一些东西。

我在 mongodb 中有以下格式的数据存储

```
{ 
   "_id" : ObjectId("4d663451d1e7242c4b68e000"), 
   "date" : "Mon Dec 27 2010 18:23:22 GMT+0000 (UTC)", 
   "name" : "james"
}, { 
    "_id" : ObjectId("4d6634514cb5cb2c4b69e000"), 
    "date" : "Mon Dec 27 2010 18:47:53 GMT+0000 (UTC)", 
    "name" : "bond", 
}, { 
    "_id" : ObjectId("4d6634514cb5cb2c4b69e000"), 
    "date" : "Mon Dec 27 2010 21:51:23 GMT+0000 (UTC)", 
    "name" : "bruce", 
} 
```

我正在寻找以下格式的结果

```
{
   "rounded_date" : "Mon Dec 27 2010 18:00:00 GMT+0000 (UTC)",
   "items" : [ { 
           "_id" : ObjectId("4d663451d1e7242c4b68e000"), 
           "date" : "Mon Dec 27 2010 18:23:22 GMT+0000 (UTC)", 
           "name" : "james"
       }, { 
           "_id" : ObjectId("4d6634514cb5cb2c4b69e000"), 
           "date" : "Mon Dec 27 2010 18:47:53 GMT+0000 (UTC)", 
           "name" : "bond", 
       }
   ]
}, {
    "rounded_date": Mon Dec 27 2010 21:00:00 GMT+0000 (UTC),
    "items" : [ { 
            "_id" : ObjectId("4d6634514cb5cb2c4b69e000"), 
            "date" : "Mon Dec 27 2010 21:51:23 GMT+0000 (UTC)", 
            "name" : "bruce", 
        }
    ]
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:13:38.817

[这看起来像是聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)（mongoDB 2.2 中的新功能）的一个很好的候选者，唯一需要注意的是您目前无法动态创建新日期，但您可以从日期中提取所需的数据并按其分组。

请参见以下示例：

```
# Load the sample data
db.datetest.save({ 
   "_id" : ObjectId("4d663451d1e7242c4b68e000"), 
   "date" : ISODate("2010-12-27T18:23:22Z"),
   "name" : "james"
});

db.datetest.save({ 
    "_id" : ObjectId("4d6634514cb5cb2c4b69e000"), 
    "date" : ISODate("2010-12-27T18:47:53Z"),
    "name" : "bond", 
});

db.datetest.save({ 
    "_id" : ObjectId("4d6634514cb5cb2c4b69e001"), 
    "date" : ISODate("2010-12-27T21:51:23Z"),
    "name" : "bruce", 
}); 
```

现在执行聚合 - 首先将文档重新投影为有用的格式。

```
db.datetest.aggregate(
    {$project: {
        hour: {0: {"$year": "$date"},
               1: {"$month": "$date"},
               2: {"$dayOfMonth": "$date"},
               3: {"$hour": "$date"}},
        item: {
            _id: "$_id",
            date: "$date",
            name: "$name"
        }
    }},
    {$group: {
        _id: "$hour",
        items: {$push: "$item"}
    }}
) 
```

聚合解释：

1.  在这里，我们创建一个`hour`子文档，其中包含从日期中提取的年、月、日和小时。我们还创建了一个`item`子文档，我们将在 group by 中使用它。
2.  分组`hour`并将所有`item`文档推送到一个`items`数组中。

结果如下：

```
{
  "result" : [{
    "_id" : { "0" : 2010, "1" : 12, "2" : 27, "3" : 21 },
    "items" : [
      {
        "date" : ISODate("2010-12-27T21:51:23Z"),
        "name" : "bruce"
      }
    ]}, {
    "_id" : {"0" : 2010, "1" : 12, "2" : 27, "3" : 18},
    "items" : [{
        "date" : ISODate("2010-12-27T18:23:22Z"),
        "name" : "james"
      }, {
        "date" : ISODate("2010-12-27T18:47:53Z"),
        "name" : "bond"
      }
    ]}
  ],
  "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:45:38.150

我找到了另一个解决方案：

```
db.collection.group({
    cond: {'public': true},
    keyf: function(doc) {
        var date = doc.when
        date.setMinutes(0,0,0);
        return {'date' : date};
    },
    initial: { items:[] },
    reduce: function(doc, out) { out.items.push(doc); }
}); 
```

问题是使用 groupby 后无法对某些内容进行排序。我想我必须在客户端这样做。

# javascript - JavaScript DOM insertBefore 无法正常工作

> ID：12314383
> 
> 赞同：2
> 
> 时间：2012-09-07T08:24:01.707
> 
> 标签：javascript, dom

这是我在这里的第一个问题，如果有任何错误，请原谅我。

我正在尝试通过 JavaScript 向表中添加行。新添加的行将添加到倒数第二个位置，最后一行包含创建新行的按钮。最后一行的 id 为“submitrow”，但获取该元素并将其传递给 insertBefore 不知何故不起作用。将 lastChild 作为第二个参数传递给 insertBefore 也很奇怪。

在正文中，这是以下形式：

```
<form>
    <input type="hidden" name="submit_done" value="true" />
    <table id="formtable">
        <tr>
            <td>Number : </td>
            <td><input type="text" name="num[]" /></td>
        </tr>
        <tr id="submitrow">
            <td><input type="button" value="Add one more" onclick="addRow()" /></td>
            <td><input type="submit" value="Go!" /></td>
        </tr>
    </table>
</form> 
```

这是JavaScript函数：

```
function addRow(){
    var new_tr  = document.createElement('tr');
    var new_td1     = document.createElement('td');
    var new_td2     = document.createElement('td');
    var new_input   = document.createElement('input');

    new_td1.innerHTML = 'Number : ';

    new_input.type = 'text';
    new_input.name = 'num[]';
    new_td2.appendChild(new_input);

    new_tr.appendChild(new_td2);
    new_tr.insertBefore(new_td1, new_td2);

    var formtable   = document.getElementById('formtable');
    var submitrow   = document.getElementById('submitrow');
    submitrow.style.backgroundColor='red'; /*Works fine, paints button row red*/
    formtable.insertBefore(new_tr, submitrow); /*fails, invalid argument*/
} 
```

现在，问题是：

1.  insertBefore 在最后一行失败。请注意，在 new_tr 对象上也已尝试过 insertBefore，它工作正常。所以唯一可能的无效参数可以是 submitRow，在失败语句上方仅一行的地方成功地将 shich 涂成红色。

2.  如果对于失败的调用，而不是`submitrow`, if`formtable.lastChild`使用，它运行。但是不知何故 lastChild 也包括上排。这意味着，如果我再输入 4 行并在测试输入中输入 1、2、3、4、5，然后如果您点击“再添加一个”按钮，那么现在在 4 到 5 之间添加了一行！

我已经尝试了很多来推理它，但在这两种情况下都没有逻辑。

希望有解决办法，谢谢大家

印度阿拜巴韦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T08:29:06.227

标题应在“JavaScript DOM insertBefore 未正确*使用”中更改。*

这是因为，即使您没有放入 DOM，浏览器也会自动创建一个`<tbody>`元素来包装表格的行。因此，它恰好`#formtable`不是**的**父级`#submitrow`，这就是您收到错误的原因。

试试这个：

```
formtable.tBodies[0].insertBefore(new_tr, submitrow); 
```

或者，更一般地说：

```
submitrow.parentNode.insertBefore(new_tr, submitrow); 
```

（在支持它的浏览器中，甚至还有这个：

```
submitrow.insertAdjacentElement("beforeBegin", new_tr); 
```

Internet Explorer、Chrome、Safari 和 Opera 支持它，Firefox 不支持，但它可以轻松填充。无论如何，我不建议使用这些东西。）

而且，作为一般建议，在写下表格时*始终*使用标签：`<tbody>`

```
<table id="formtable">
    <tbody>
        <tr>
            <td>Number : </td>
            <td><input type="text" name="num[]" /></td>
        </tr>
        <tr id="submitrow">
            <td><input type="button" value="Add one more" onclick="addRow()" /></td>
            <td><input type="submit" value="Go!" /></td>
        </tr>
    </tbody>
</table> 
```

当然，`<thead>`当`<tfoot>`你需要它们时。

# java - 使用 @DBRef 查询带有循环引用的文档时的 Stackoverflow

> ID：12314385
> 
> 赞同：4
> 
> 时间：2012-09-07T08:24:08.020
> 
> 标签：java, mongodb, datanucleus, spring-data, spring-data-mongodb

我的应用程序使用带有 Spring-Data 的 MongoDb。

我的 User.java 如下。

```
User{
//other fields
    @DBRef
    List<Request> requests;
    } 
```

Request.java 如下。

```
 class Request{
    @Id
    private ObjectId id;
    @DBRef
    private User who;
    @DBRef
    private User whom;
    @DBRef
    private User group;
    } 
```

我能够正确保存两者。假设我的对象 user1 包含请求列表，对象 request1 包含 user1 作为 who 的值。当我检索 user1 对象时，我得到了 StackOverflowError。详情[在这里](https://jira.springsource.org/browse/DATAMONGO-488.)。相关[问题](https://jira.springsource.org/browse/DATAMONGO-348)

[除了使用Manual references](http://docs.mongodb.org/manual/applications/database-references/#document-references)之外，还有其他解决方法吗？是否有任何其他 API 可以正确处理循环引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:13:48.610

答：不要使用 SpringData Mongodb，因为它有一个错误。DataNucleus JDO 和 DataNucleus JPA 没有这种与 MongoDB 的双向关系持久性的错误。

# java - 我们可以（或应该）为不同的android项目使用相同的文件吗？

> ID：12314388
> 
> 赞同：0
> 
> 时间：2012-09-07T08:24:22.733
> 
> 标签：java, android

假设我为一个项目实现了一个算法。假设我希望在另一个项目中使用相同的代码。这样做的方法是什么？只是复制和粘贴代码？创建一个“图书馆”项目？什么？是否有说明如何执行此操作的教程或网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:47:10.927

当然，将其添加到库项目中，但应始终将重用的好处与使代码通用的成本进行比较。当然，如果您通过修复错误或提高性能来改进代码，那么将其引入您使用代码的所有项目中是很好的，但它也会让您变慢，因为您必须保持库与所有客户端兼容（至少那些将在重大更改后构建的）。

复制和适应新项目的解决方案通常比维护更复杂的解决方案要好。需要考虑的一件非常重要的事情是您认为图书馆将拥有多少客户。单独维护这些客户端需要做多少工作？

另一方面，一些代码本质上是通用的，并且绝对可以在库中共享以使您的生活更轻松。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:38:43.743

如果您的算法使用 Java，请将其构建为 jar。

然后在您的 android 项目的根目录中创建一个名为“libs”的文件夹。将您的 jar 复制到该文件夹​​中。在 Eclipse 中，转到 -> 属性 -> Java 构建路径 在“库”选项卡下，添加您的 jar。

现在您可以使用您的代码了。

您也可以将其与多个项目链接。

如果您的算法使用 natice C/C++，请遵循 [http://marakana.com/s/introduction_to_ndk,1153/index.html](http://marakana.com/s/introduction_to_ndk,1153/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:36:05.203

如果您有一个足够通用的类/一组类可以重用，那么解决方案是将它们分离到不同的项目中。

在您的 IDE 中，使您的项目使用通用项目作为其构建路径的一部分（它比包含 jar 更灵活）。

部署时，将所有通用类打包到一个 jar 中，并将其打包到您的解决方案中。不要忘记在类路径中包含该 jar。

在Java中，“主项目”和“库”没有区别，除了“库”通常不包含任何`main`方法（但不被禁止）。它们是类路径中的类。

# database - 使用 WCF 服务将图像添加到数据库

> ID：12314390
> 
> 赞同：0
> 
> 时间：2012-09-07T08:24:30.753
> 
> 标签：database, wcf, image, service

我正在尝试将图像添加到数据库中的表中，但在使用 WCF 服务时似乎无法执行此操作

下面的代码给出了一个错误

```
 private CRMEntities _crm;
    private readonly Uri _uri = new Uri("http://localhost/CRMService.svc");

    //Adds a new image to database
    public bool AddImage(byte[] imagefile, int epid)
    {
        if (imagefile.Equals(null) || epid.Equals(null)) return false;
        _crm = new CRMEntities(_uri);
        var i = new Image { ImageFile = imagefile, EP_ID = epid };
        _crm.AddToImages(i);
        _crm.SaveChanges();
        return true;
    } 
```

截屏：

![在此处输入图像描述](../Images/586352e418749552e00c5f138688b43c.png)

但是如果我把它改成这个，它就可以保存得很好

```
 if (imagefile.Equals(null) || epid.Equals(null)) return false;
        var crm = new CRMData.CRMEntities(System.Configuration.ConfigurationManager.ConnectionStrings["CRMEntities"].ToString());
        var i = new CRMData.Image { ImageFile = imagefile, EP_ID = epid };
        crm.AddToImages(i);
        crm.SaveChanges();
        return true; 
```

编辑

但它适用于其他类。

像

```
private CRMEntities _crm;
    private readonly Uri _uri = new Uri("http://localhost:1677/CRMService.svc");

    //METHODS

    //SAVE
    public bool AddEmailProblem(string description, DateTime datecreated, int clientid, string mailId)
    {
        if (description == null || clientid == 0 || mailId == null) return false;
        _crm = new CRMEntities(_uri);
        var objep = new EmailProblem
        {
            Description = description,
            DateCreated = datecreated,
            CLIENT_ID = clientid,
            Mail_ID = mailId
        };
        _crm.AddToEmailProblems(objep);
        _crm.SaveChanges();
        return true;
    } 
```

保存到数据库。

我正在使用的连接字符串是 -

```
<connectionStrings>
<add name="CRMEntities" connectionString="metadata=res://*/CRM.csdl|res://*/CRM.ssdl|res://*/CRM.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLExpress;Initial Catalog=CRM;Persist Security Info=True;User ID=sa;Password=Server01;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
<add name="CRM" connectionString="Data Source= .\SQLExpress;Initial Catalog=CRM;Persist Security Info=True;User ID=sa;Password=Server01" providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:46:37.037

编辑了整个答案...

```
private readonly Uri _uri = new Uri("http://localhost/CRMService.svc"); 
```

是服务 Uri 而不是数据库连接字符串！

检查连接字符串“CRMEntities”的配置文件

并称你为代码：

```
 private readonly string _connectionString= "<your actual connection string>";

    //Adds a new image to database
    public bool AddImage(byte[] imagefile, int epid)
    {
        if (imagefile.Equals(null) || epid.Equals(null)) return false;
        _crm = new CRMEntities(_connectionString); 
```

**您不能简单地用服务 Uri 替换数据库连接字符串，这是不可能的。**

# c# - 确定 Outlook 2010 中是否存在通讯簿

> ID：12314396
> 
> 赞同：2
> 
> 时间：2012-09-07T08:25:04.070
> 
> 标签：c#, vsto, outlook-addin, outlook-2010

我已经创建了一个如此处所述的地址簿[，](https://stackoverflow.com/questions/12302683/create-a-custom-address-book-for-outlook-2010-programmatically)它就像一个魅力。然后我想访问它 - 首先检查它是否存在（并在相反的情况下创建它），然后引用它。

我当前的代码依赖于`Exception`检测丢失的名称文件夹，在我看来，这是一个丑陋的解决方法。我还没有找到一个更整洁的方法，比如 eg`.DoesFolderExist`或这样的。我想得到一个关于如何改进它的建议。

```
Outlook.Folder contacts = 
  this.Application.Session.GetDefaultFolder(
    Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
Outlook.Folder addressBook = null;

try { addressBook = contacts.Folders["My AB"] as Outlook.Folder; }
catch (Exception) { }

if (addressBook == null)
{
    addressBook = contacts.Folders.Add("My AB", 
      Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
    addressBook.ShowAsOutlookAB = true;
} 
```

我应该`this.Application.Session.GetFolderFromID(...)`改用吗？问题是我需要指定通讯簿的名称（我有）和商店 ID（我没有）。我不想去那里，但该方法的语法`GetFolderFromID`表明可能有两个不同的地址簿名称相同，但放置在不同的商店中。是这样还是`contact.Folder["name"]`以上就足够了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:05:02.347

您可以使用 try/catch 语句方法，但更好的方法是遍历每个语句`Folder`以避免异常和性能损失。

```
Outlook.Folders contactFolders = contacts.Folders;
if (contactFolders.Cast<Outlook.Folder>()
  .Where(c => c.Name == "My AB").Count() > 0)
    addressBook = contactFolders["My AB"] as Outlook.Folder; 
```

# java - 在 Maven 测试范围内运行时，如何排除提供范围内的依赖项？

> ID：12314397
> 
> 赞同：2
> 
> 时间：2012-09-07T08:25:06.307
> 
> 标签：java, maven, maven-2

在 Maven 测试范围内运行时，如何排除提供范围内的依赖项？我有一个不寻常的用例，我需要排除特定提供的实现并在测试用例中将其替换为另一个。似乎 Maven 测试也总是包含其他范围，但在我的情况下，我想做一些例外。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:28:16.457

在某些情况下，您需要在不同的模块中运行测试。这可能是您在这里所需要的。它允许您的测试使用不同的依赖项、属性和 Java 版本等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:38:52.643

我认为，最简单的方法是为您要使用的每个依赖项创建 2 个配置文件。您可以activateByDefault 具有提供范围的那个。

它可能看起来像这样：

```
<profiles>
    <profile>
        <id>providedDependency</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <dependencies>
            <dependency>[provided dependency information]</dependency>
        </dependencies>
    </profile>
    <profile>
        <id>testDependency</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <dependencies>
            <dependency>[test dependency information]</dependency>
        </dependencies>
    </profile>
</profiles> 
```

进入测试模式时，取消激活提供的依赖项并激活另一个

```
mvn test -P!providedDependency,testDependency 
```

# java - 子查询 - 子句列不可见

> ID：12314398
> 
> 赞同：0
> 
> 时间：2012-09-07T08:25:18.063
> 
> 标签：java, mysql, sql, hibernate

我在 Ubuntu 机器上的 mysql 5.1.41 环境中遇到了一个奇怪的情况，即 sql 查询。

代码如下

```
SELECT spedizione0_.idspedizione,
    spedizione0_.*,
    (
        SELECT COUNT(n.idnegozio)
        FROM negozio n
        LEFT JOIN confezione c
            ON n.idnegozio = c.idnegozio
                AND c.idspedizione = spedizione0_.idspedizione
        WHERE n.datainizio <= spedizione0_.dataspedizione
            AND n.datafine >= spedizione0_.dataspedizione
            OR c.idspedizione != 0
        ) AS formula5_
FROM orocashgenerico.spedizione spedizione0_
ORDER BY spedizione0_.dataspedizione DESC 
```

在这种情况下，错误显示：**[Err] 1054 - Unknown column 'spedizione0_.idspedizione' in 'on Clause'**

运行此查询的唯一方法是将 .. on n.idnegozio=c.idnegozio 和 c.idspedizione=spedizione0_.idspedizione 更改为 on n.idnegozio=c.idnegozio 和 c.idspedizione=12

对我来说最奇怪的事情是：如果我将 and 条件移动到 where 子句，查询会正确运行，当然结果不是我所例外的。

我的问题是问题出在哪里？
与MySQL版本有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:42:49.167

这是因为`spedizione0_`在您的子查询范围内找不到。试试这个，

```
SELECT  spedizione0_.idspedizione,                     // add additionl columns
        COUNT(n.idnegozio) AS formula5_                
FROM    spedizione spedizione0_
        LEFT JOIN confezione c
            ON c.idspedizion = spedizione0_.idspedizione
        LEFT JOIN negozio n
            ON n.idnegozio = c.idnegozio
WHERE   (
            n.datainizio <= spedizione0_.dataspedizione AND 
            n.datafine >= spedizione0_.dataspedizione
        )
            OR c.idspedizione != 0
GROUP By spedizione0_.idspedizione
ORDER BY spedizione0_.dataspedizione DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:43:17.793

如我所见，您在这里使用了错误的语法。当您使用左外连接时，您不能在 ON 子句中提及多个条件。在您的情况下，您需要在该 ON 子句之后再使用一个 Left join 子句来连接第三个给出错误的表。

# regex - rsyslog 的正则表达式以排除模式

> ID：12314399
> 
> 赞同：0
> 
> 时间：2012-09-07T08:25:22.423
> 
> 标签：regex, logging, rsyslog

我需要一个 rsyslog 正则表达式来将所有包含“防火墙”一词的消息转发到远程服务器。原始日志格式为：

> 7 月 24 日 16:33:09 FW02 内核：[3456825.472985] FIREWALL_DENY_IN: IN=eth2 OUT=MAC=ff:ff:ff:ff:ff:ff:00:1b:78:e4:b3:24:08:00 SRC =10.101.103.193 DST=10.101.103.255 LEN=237 TOS=0x00 PREC=0x00 TTL=64 ID=0 DF PROTO=UDP SPT=51512 DPT=694 LEN=217

所需的日志格式是没有内核时间：

> 7 月 24 日 16:33:09 FW02 内核：FIREWALL_DENY_IN: IN=eth2 OUT=MAC=ff:ff:ff:ff:ff:ff:00:1b:78:e4:b3:24:08:00 SRC=10.101。 103.193 DST=10.101.103.255 LEN=237 TOS=0x00 PREC=0x00 TTL=64 ID=0 DF PROTO=UDP SPT=51512 DPT=694 LEN=217

我对正则表达式的经验是基本的。我能够匹配我需要排除的部分：

> [ *[0-9]*\.[0-9]*\]

但仅此而已。正则表达式必须在[http://www.rsyslog.com/regex/上进行验证](http://www.rsyslog.com/regex/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:53:52.790

免责声明：我不知道 rsyslog 是如何工作的，但也许下面的正则表达式可以提供帮助

`^([^[]*).*\](.*)$`

子赛1：

`"Jul 24 16:33:09 FW02 kernel: "`

子赛2：

`" FIREWALL_DENY_IN: IN=eth2 OUT=MAC=ff:ff:ff:ff:ff:ff:00:1b:78:e4:b3:24:08:00 SRC=10.101.103.193 DST=10.101.103.255 LEN=237 TOS=0x00 PREC=0x00 TTL=64 ID=0 DF PROTO=UDP SPT=51512 DPT=694 LEN=217"`

# css - CSS 为来自外部站点的每个 RSS 提要对齐图像

> ID：12314401
> 
> 赞同：0
> 
> 时间：2012-09-07T08:25:24.340
> 
> 标签：css, image, css-float

如何在每个新闻提要的左上角显示缩略图图像正确对齐？

![RSS](../Images/43dd05a95d03642f1e9a29a670b671fd.png)

这是每个项目的提要的代码，我无法更改下面的格式，因为它是来自外部站点的 RSS 提要

```
<style>
img{
    float: left;
    width: 100px;
    height: auto;       
}
.feed-item-title{
    clear:right;
 }
</style>

<div class="feed-item">
<h3 class="feed-item-title">
    <a href="" target="_blank">Rihanna Hug During VMA Show</a>
</h3>

<div class="feed-item-body">
    Former couple share embrace on night when both won major awards.<br />By Hosten
    <a href="">
    <img type="photo" src="281x211.jpg" />
    </a>
    <br />
</div>

</div> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:29:40.400

如果你使用浮动，你应该清除它们。

```
.feed-item-body:after{
    content: '';
    display:block;
    clear:both;
} 
```

稍后编辑：添加了一些额外的更改，[这](http://jsfiddle.net/Sttej/)是工作示例。

# perl - 通过哈希搜索，如果值为零，则删除它

> ID：12314403
> 
> 赞同：2
> 
> 时间：2012-09-07T08:25:44.073
> 
> 标签：perl, key-value, hash

我有一些代码如下。我正在尝试搜索哈希，如果遇到一个为零的值，我想删除整个键/值元素。

```
my %hashy = (
    a => my $a,
    b => my $b,
    c => my $c,
    d => my $d,
    e => my $e
);

$hashy{'a'} = 0;
$hashy{'b'} = 1;
$hashy{'c'} = 0;
$hashy{'d'} = 2;
$hashy{'e'} = 1;
my @keys = keys %hashy;
my @values = values %hashy;
my $ind = 0;
foreach my $v (@values) {
   delete $hashy{$keys[$ind]} if ($v == 0);
} 
```

所以打印的预期输出`%hashy`将是：（`b1d2e1`忽略元素的顺序）

目前我得到：`c0a0b1d2`这甚至不接近......任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T08:28:05.637

迭代值无济于事，因为您失去了值和键之间的关联，尽管我猜这`$ind`应该可以帮助您跟踪。

只需遍历键即可：

```
foreach my $k (keys %hashy) {
    delete $hashy{$k} if ($hashy{$k} == 0);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T11:33:28.077

另一种方法：

```
delete @hash{ grep $hash{$_} == 0, keys %hash }; 
```

# mysql - 休眠标识符名称对于 MySQL 索引来说太长了

> ID：12314404
> 
> 赞同：1
> 
> 时间：2012-09-07T08:25:45.683
> 
> 标签：mysql, hibernate, inheritance, indexing, identifier

我在继承和索引名称生成方面遇到了问题。例如：多个抽象类，它们相互继承。

```
@Entity
public abstract class LongClassName1 implements Serializable { 
... 
    @Index(name = "externalIdIndex")
    String externalId;
...
}

@Entity
public abstract class LongClassName2 extends LongClassName1 { ... }

@Entity
public abstract class LongClassName3 extends LongClassName2 { ... }

@Entity
public abstract class LongClassName4 extends LongClassName3 { ... }

@Entity
public class LongClassName5 { ... } 
```

现在 Hibernate 会生成一个类似的索引`LongClassName5LongClassName4LongClassname3LongClassname2externalIdIndex` ，这会导致类似的错误消息`Identifier name 'LongClassName5LongClassName4LongClassname3LongClassname2externalIdIndex' is too long`

我尝试了多种休眠命名策略，并且自己也覆盖了这些方法，但到目前为止没有任何效果。

我正在使用 JBoss 7.1.1 附带的休眠版本。

主键的自动生成索引没有问题。

任何想法我接下来可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:39:36.057

您是否尝试使用 @Table 和 @Index 注释手动建立索引名称？

```
@Table(appliesTo="tableName", indexes = { @Index(name="index1", columnNames={"column1", "column2"} ) } ) 
```

# c# - 从异步中捕获未处理的异常

> ID：12314410
> 
> 赞同：24
> 
> 时间：2012-09-07T08:25:53.387
> 
> 标签：c#, .net, async-await, unhandled-exception

当`async`等待的方法抛出异常时，异常存储在某处并延迟抛出。在 WinForms 或 WPF 应用程序中，它用于`SynchronizationContext.Current`发布异常的抛出。但是，例如在控制台应用程序中，它会在线程池中引发异常并关闭应用程序。

**如何防止`async`方法引发的异常导致应用程序崩溃？**

**编辑：**

显然我所描述的问题是因为我有`void` `async`方法。看评论。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T11:41:24.373

> 如何防止异步方法引发的异常导致应用程序崩溃？

遵循以下最佳做法：

1.  所有`async`方法都应该返回`Task`或者`Task<T>`除非它们*必须*返回`void`（例如，事件处理程序）。
2.  在某些时候，您应该`await`全部`Task`从`async`方法返回。您不想这样做的唯一原因是您不再关心操作的结果（例如，在您取消它之后）。
3.  如果您需要从事件处理程序中捕获异常`async void`，则在事件处理程序中捕获它 - 就像这是同步代码时所做的那样。

您可能会发现我的[`async`/`await`介绍帖子](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)很有帮助；我还介绍了其他几个最佳实践。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-07T08:25:53.387

当该`async`方法启动时，它会捕获当前的同步上下文。解决此问题的一种方法是创建自己的同步上下文来捕获异常。

这里的要点是同步上下文将回调发布到线程池，但它周围有一个 try/catch：

```
public class AsyncSynchronizationContext : SynchronizationContext
{
    public override void Send(SendOrPostCallback d, object state)
    {
        try
        {
            d(state);
        }
        catch (Exception ex)
        {
            // Put your exception handling logic here.

            Console.WriteLine(ex.Message);
        }
    }

    public override void Post(SendOrPostCallback d, object state)
    {
        try
        {
            d(state);
        }
        catch (Exception ex)
        {
            // Put your exception handling logic here.

            Console.WriteLine(ex.Message);
        }
    }
} 
```

在`catch`上面你可以放置你的异常处理逻辑。

接下来，在您希望使用此机制执行方法的每个线程 ( `SynchronizationContext.Current`is ) 上，您必须设置当前同步上下文：`[ThreadStatic]``async`

```
SynchronizationContext.SetSynchronizationContext(new AsyncSynchronizationContext()); 
```

完整的`Main`例子：

```
class Program
{
    static void Main(string[] args)
    {
        SynchronizationContext.SetSynchronizationContext(new AsyncSynchronizationContext());

        ExecuteAsyncMethod();

        Console.ReadKey();
    }

    private static async void ExecuteAsyncMethod()
    {
        await AsyncMethod();
    }

    private static async Task AsyncMethod()
    {
        throw new Exception("Exception from async");
    }
} 
```

# objective-c - 以编程方式调用 iOS 应用程序

> ID：12314412
> 
> 赞同：0
> 
> 时间：2012-09-07T08:25:59.503
> 
> 标签：objective-c, ios5, ios4

> **可能重复：**
> [从另一个（iPhone）中启动一个应用程序](https://stackoverflow.com/questions/419119/launch-an-app-from-within-another-iphone)

我设计了示例应用程序并安装在 iPhone 中。

第一个应用程序中有一个按钮，我想在按下按钮时调用第二个应用程序。我正在浏览它的可行性，但不确定我是否错过了它。

有人可以指导方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:29:41.763

如果您的意思是要从您的应用程序启动另一个应用程序，则必须使用 URL 方案。只需在您的其他应用程序上注册一个自定义方案并从第一个应用程序调用此类 URL。这里有一个教程可以帮助你：

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:29:57.277

您想考虑为您的第二个应用程序使用[URL 方案](https://web.archive.org/web/20150310023344/https://coronalabs.com/blog/2011/12/22/using-app-url-schemes-in-ios/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:29:59.727

可以使用 URL SCHEME，请看[教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

# vb.net - 列中的 Linq 3 值选择

> ID：12314413
> 
> 赞同：1
> 
> 时间：2012-09-07T08:26:04.633
> 
> 标签：vb.net, linq, filter

我在理解 Linq 时遇到了一些麻烦。在 vb.net 中使用以下 linq：

```
 Dim qeurySearch = (From P In DB.table1
      Where P.number = searchInput And P.valueCol = 2 OrElse 
      P.valueCol= 3 OrElse P.valueCol = 4
      Select P.number , P.valueCol
      ).ToList 
```

我从中得到的是 4 条记录……它们都不是 searchInput。因此，假设 searchinput 为“102”，同一张表中的 valueCol 的值为“1”。然后我期望它不起作用，它不会给我任何记录。但那是错误的。

发生的事情是它完全忽略了我在 WHERE 子句中的 searchInput 并给出了 P.valueCol = 4 记录。好像那个是唯一的 WHERE 子句。

有谁知道我如何以正确的方式过滤我的查询？通过给出 P.Number 并且该列只能具有 1,2 或 3 的 P.valueCol。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:27:48.040

我怀疑这是一个优先问题。我不知道 VB 优先规则，但我*怀疑*您的查询被视为：

```
Where P.number = (searchInput And P.valueCol = 2) OrElse 
                 P.valueCol= 3 OrElse P.valueCol = 4 
```

我建议您将代码更改为：

```
Where P.number = searchInput AndAlso (P.valueCol = 2 OrElse 
                                      P.valueCol = 3 OrElse 
                                      P.valueCol = 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:28:36.940

尝试包括一些括号：

如果您从单词的角度考虑您的查询，您可能会说：

> 其中 number 等于 searchinput 并且 valuecol 是 2,3 或 4 之一

这很好地说明了括号应该在哪里：

```
Dim qeurySearch = (From P In DB.table1
  Where P.number = searchInput 
  And (P.valueCol = 2 OrElse P.valueCol= 3 OrElse P.valueCol = 4)
  Select P.number , P.valueCol
  ).ToList 
```

更深入地说，这归结为称为逻辑运算符优先级的东西。这是考虑查询中的逻辑运算符的顺序。一个相当正常的标准`NOT`是先考虑，然后`AND`再考虑`OR`。例如，请参阅有关 MS SQL 主题的[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms186992%28v=sql.105%29.aspx)。

在您的情况下，这意味着首先检查包含的条件`AND`：

`P.number = searchInput And P.valueCol = 2`

在检查以下`OR`部分之前。

# magento - Magento 新商店视图作为 URL 的子路径

> ID：12314415
> 
> 赞同：2
> 
> 时间：2012-09-07T08:26:30.800
> 
> 标签：magento

一位 SEO 专家建议我应该将 /aus/ 子文件夹添加到我的 Magento 安装中，以用于地理定位特定目的。

所以我想要实现的是在**/aus/**子文件夹中添加相同版本的商店。

所以基本上它看起来像这样：

*   [www.mystore.com/](http://www.mystore.com/) <- 我目前的商店
*   [www.mystore.com/aus/](http://www.mystore.com/aus/) <- 用于地理定位特定目的

我不想在单独的安装或单独的语言上运行 /aus/ 版本，基本上它应该只是将 /aus/ 添加到我当前的商店并在那里复制所有链接。

处理此问题的最佳方法是什么？一些建议或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:46:35.890

为什么不通过配置将商店添加到 URL 中？Magento 已经对此进行了配置。见`System > Configuration > General > Web > Add Store Code to Urls`。

`yourwebsite.com/customer/account`它现在将生成 URL，而不是`yourwebsite.com/<your_store_code>/customer/account`.

请注意，您所有的自定义模板和模块都应正确使用 getUrl() Magento 方法来构建 URL，否则这些 URL 将不包含存储代码并最终无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:08:07.483

添加一个新网站“aus”

然后使用运行“aus”存储的 index.php 创建新文件夹

# java - 从字符串中提取子字符串

> ID：12314419
> 
> 赞同：-1
> 
> 时间：2012-09-07T08:26:45.677
> 
> 标签：java, regex, string

我有以下字符串：

```
mac1: 00:11:22:33:44:55
mac2: 66:77:88:99:00:11
model: PI-504
first_name: any_name
device_type: baseboard
serial_number: 668778542298745210 
```

我想将所有值提取到一个数组中。如何用 Java 做到这一点？

```
public String[] getvaluesIntoStringArray(String str) {
    ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:42:05.427

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regex)：

```
private static final Pattern PATTERN = Pattern.compile(".*?:(.*)");

public static String[] getvaluesIntoStringArray(String str) {
    Matcher matcher = PATTERN.matcher(str);
    List<String> values = new ArrayList<String>();
    while (matcher.find())
        values.add(matcher.group(1).trim());
    return values.toArray(new String[values.size()]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:31:00.607

如果您想拆分新行，那么我认为应该这样做

```
public String[] getvaluesIntoStringArray(String str) {
    return str.split("\\r?\\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:36:54.273

请试试

```
String[] result = str.split("\n"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T08:49:16.407

这里代码：

```
public static void main(String[] args) {
        List<String> result = new ArrayList<String>();

        String str = "mac1: 00:11:22:33:44:55\n" +
                     "mac2: 66:77:88:99:00:11\n" +
                     "model: PI-504\n" +
                     "first_name: any_name\n" +
                     "device_type: baseboard\n" +
                     "serial_number: 668778542298745210";

        Pattern pattern = Pattern.compile("^.*?:(.*)$", Pattern.MULTILINE);
        Matcher matcher = pattern.matcher(str);
        boolean find = matcher.find();
        while(find) {
            result.add(matcher.group(1));
            find = matcher.find();
        }
        System.out.print(result);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T08:29:36.710

`(?<=:\s)(.+$)` 如果您的正则表达式引擎不支持后视，请使用此正则表达式 使用此正则表达式匹配项`(:\s)(.+$)`将在第 2 组中

ps：使用正则表达式和正则表达式`MultyLine`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T08:30:55.240

```
String str = "mac1: 00:11:22:33:44:55
mac2: 66:77:88:99:00:11
model: PI-504
first_name: any_name
device_type: baseboard
serial_number: 668778542298745210";

String[] tempArr = str.split("\n"); 
```

此 tempArr 应包含以下值： mac1: 00:11:22:33:44:55 , mac2: 66:77:88:99:00:11,model: PI-504,first_name: any_name,device_type: baseboard,serial_number : 668778542298745210

# xml - CyVis 0.9 Ant 任务无法生成 html 报告

> ID：12314422
> 
> 赞同：2
> 
> 时间：2012-09-07T08:26:59.273
> 
> 标签：xml, ant, cyclomatic-complexity

我目前正在尝试为使用 CyVis 0.9 作为其工具之一的 Java 项目制作 Ant 构建文件。我遇到了一个问题，我无法让它生成 html 报告。下面是我的 build.xml 文件中的确切代码，该文件几乎完全取自 CyVis 网站上的教程。目前，它正在生成文本报告就好了；但是，文本报告的帮助不大。

我已经在团队成员的计算机上运行了完全相同的代码，并且运行良好。从那以后，我重新安装了 CyVis 和 Ant，但运气不佳。

```
<path id="cyvis.path">
   <fileset dir="${cyvis.home.dir}">
       <include name="**/*.jar"/>
   </fileset> 
</path>
<taskdef name="cyvis" 
    classname="cyvis.ant.CyvisTask" 
    classpathref="cyvis.path"
/>
<target name="report.cyvis">
    <mkdir dir="${report.cyvis.dir}" />
    <cyvis verbose="false" home="${cyvis.home.dir}">
        <fileset dir="${bin.dir}">
            <include name="**\*.class"/>
        </fileset>
        <report type="text"  outFile="${report.cyvis.dir}\test.txt" />
        <report type="html"  outFile="${report.cyvis.dir}\index.html" />
    </cyvis>
</target> 
```

运行构建后，我得到以下输出：

```
report.cyvis:
[mkdir] Created dir: C:\Users\Dustin\workspace\H2\report\cyvis
[cyvis] Text report generated, see C:\Users\Dustin\workspace\H2\report\cyvis\test.txt

BUILD FAILED
C:\Users\Dustin\workspace\H2\build.xml:319: com.thoughtworks.xstream.converters.reflection.ObjectAccessException: Invalid final field cyvis.metric.ProjectMetric.classes 
```

注释掉 html 报告时，构建成功，但只生成文本报告。我没有运气研究这个错误，也看不出我和我同事的设置有什么不同。

# c# - 图表拆分

> ID：12314423
> 
> 赞同：0
> 
> 时间：2012-09-07T08:27:03.327
> 
> 标签：c#, grid, geometry, diagram

嗨，我想将我的图表分成四个部分，所以我定义了 4 个相等的矩形，但在 bounds3 和 bounds4 中仍然有一些缺失的节点。谁能帮忙！

```
//b = (X, Y, Width, Height).
// Original Diagram
Rect b = activeDiagram.Panel.DiagramBounds; // b = (-370, -190, 3099, 2450).

Rect bounds1 = new Rect(b.X, b.Y, w/2, h/2); //top left corner
Rect bounds2 = new Rect(b.X, b.Y + h/2, w/2, h/2); //bottom left corner
Rect bounds3 = new Rect(b.X + w/2, b.Y, w/2, h/2); //top right corner 
Rect bounds4 = new Rect(b.X + w/2, b.Y + h/2, w/2, h/2); //bottom right corner 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:00:43.583

看来你可以用整数除法（3099 div 2 + 3099 div 2 = 3098）松开一点宽的条带

使用 width = w - w/2 表示右列，使用 height = h - h/2 表示底行以覆盖所有初始矩形。

# android - 使用 Ksoap2 for android 更改 SOAP 信封的布局

> ID：12314424
> 
> 赞同：3
> 
> 时间：2012-09-07T08:27:11.450
> 
> 标签：android, .net, wcf, soap, ksoap2

我正在开发一个将 Android 驱动的设备连接到 .NET wcf 服务器的项目。

我遇到的问题是 SOAP 信封的布局。当我使用soapUI 发送请求时，请求得到了正确处理。但是，当我在 Android 上使用 Ksoap2 时，我在 SOAP 返回信封中得到一个空值作为返回值，服务器记录了一个 HTTP 代码 = 200（OK）的请求。

如何设置 KSOAP2 以创建与soapUI 中使用的相同的 SOAP 信封？

这是一个使用soapUI 的工作请求。*这就是布局的外观。*

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
<soapenv:Header/>
<soapenv:Body>
    <tem:GetPerson>
      <tem:name>Roel</tem:name>
    </tem:GetPerson>
  </soapenv:Body>
</soapenv:Envelope> 
```

并返回soapUI

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body>
  <GetPersonResponse xmlns="http://tempuri.org/">
     <GetPersonResult xmlns:a="http://schemas.datacontract.org/2004/07/StageService1" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <a:Age>21</a:Age>
        <a:Name>Roel</a:Name>
     </GetPersonResult>
  </GetPersonResponse>
 </s:Body>
</s:Envelope> 
```

我做了一个肥皂信封的转储。*当我从 Android 应用程序发送布局时，这就是现在的布局。*

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema"  xmlns:c="http://schemas.xmlsoap.org/soap/encoding/"  xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">

<v:Header />
<v:Body>
    <GetPerson xmlns="http://tempuri.org/" id="o0" c:root="1">
        <n0:name i:type="d:string" xmlns:n0="tem">Roel</n0:name>
    </GetPerson>
</v:Body>
</v:Envelope> 
```

以及这个请求的回邮信封

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body>
    <GetPersonResponse xmlns="http://tempuri.org/">
        <GetPersonResult i:nil="true" xmlns:a="http://schemas.datacontract.org/2004/07/StageService1" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"/>
    </GetPersonResponse>
</s:Body>
</s:Envelope> 
```

谁能解释我如何使输出布局与我从soapUI 发送的布局相同？

我来自完整应用程序的代码：

```
private static final String SOAP_ACTION = "http://tempuri.org/IService1/GetPerson";
private static final String METHOD_NAME = "GetPerson";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL =      "http://192.168.4.231/TestWebservice/Service1.svc?wsdl";

try {

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    Log.e("debug","Creating new soap object");

    PropertyInfo pi = new PropertyInfo();
    pi.setNamespace("tem");
    pi.setName("name");
    pi.setValue("Roel");
    request.addProperty(pi);

    SoapSerializationEnvelope envelope = new  SoapSerializationEnvelope(SoapEnvelope.VER11);
    Log.e("debug","Creating new soap envelope");
    envelope.dotNet=true;

    envelope.setOutputSoapObject(request);
    Log.e("debug","setoutput soap object");

    Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("192.168.13.8", 8080));

    HttpTransportSE androidHttpTransport = new HttpTransportSE(proxy, URL);
    Log.e("debug","new http transport init");

    androidHttpTransport.debug = true;

    androidHttpTransport.call(SOAP_ACTION, envelope);
    Log.e("debug","http transport call");
    System.out.println(androidHttpTransport.requestDump);
    System.out.println(androidHttpTransport.responseDump);

    SoapObject result = (SoapObject)envelope.getResponse();
    Log.e("debug","get response");

    tv.setText( ""+result);

} catch (Exception e) {
    tv.setText(e.getMessage());
    Log.e("error","somthing went wrong!!");
    e.toString();
    System.out.println(e);
} 
```

提前致谢，

费边

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:42:43.090

```
PropertyInfo pi = new PropertyInfo();
pi.setNamespace("tem");
pi.setName("name");
pi.setValue("Roel");
request.addProperty(pi); 
```

命名空间应该是命名空间的 URL，而不是变量。所以：

```
pi.setNamespace("http://tempuri.org/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:57:55.857

您可以使用以下代码更改上面的代码。

它将创建与soapUI 相同的代码。

```
PropertyInfo pi = new PropertyInfo();
pi.setNamespace("http://tempuri.org/");
pi.setNamespace("tem");
pi.setName("name");
pi.setValue("Roel");
request.addProperty(pi); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T21:14:15.083

要摆脱 'i:type="d:string"'，请添加 pi.type = PropertyInfo.STRING_CLASS; 到你的代码。

# objective-c - iOS 设备中的 SIGSEGV 崩溃，我无法从中找出原因

> ID：12314429
> 
> 赞同：0
> 
> 时间：2012-09-07T08:27:33.370
> 
> 标签：objective-c, ios, crash, segmentation-fault

关于 iOS 中的崩溃报告以及如何调试崩溃有很多线程，但我想我也会在这里发布我的帖子，因为我还没有阅读过专门针对我的案例有帮助的帖子。大约一周前，我将我的应用程序发布到 AppStore，我从少数人那里听说他们的应用程序崩溃了。我不能亲自在他们的应用程序上复制崩溃（他们也不能） - 尽管它似乎是当用户在一段时间没有玩游戏后返回游戏时（他们无法确认他们是否通过双击主页退出应用程序按钮与否，不过）。

因此，在我试图解决这个问题的过程中，我在手机和模拟器上运行了游戏，但我根本无法复制它——这使得问题更难解决。我想我会发布崩溃报告的相关部分，看看是否有人能理解它！

```
Incident Identifier: 52C3B61C-D05A-4F2D-91A0-0192A668FCBC   
Hardware Model:      iPhone2,1  
Process:         Transfer Quiz [2474]    
Path:            /var/mobile/Applications/6BC39FBB-59F3-45A7-BD94-449914CFFFA8/Transfer      Quiz.app/Transfer Quiz 
Identifier:      Transfer Quiz  
Version:         ??? (???)  
Code Type:       ARM (Native)   
Parent Process:  launchd [1]    

Date/Time:       2012-08-29 16:49:03.080 +0100  
OS Version:      iPhone OS 5.1.1 (9B206)    
Report Version:  104    

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)   
Exception Codes: KERN_INVALID_ADDRESS at 0xc01236f2 
Crashed Thread:  0  

Thread 0 name:  Dispatch queue: com.apple.main-thread   
Thread 0 Crashed:   
0   libobjc.A.dylib                 0x374faf7e objc_msgSend + 22
1   Transfer Quiz                   0x000023c4 0x000013c4
2   Transfer Quiz                   0x0000230c 0x0000130c
3   libdispatch.dylib               0x359dac52 _dispatch_call_block_and_release
4   libdispatch.dylib               0x359e5e8a _dispatch_main_queue_callback_4CF$VARIANT$up
5   CoreFoundation                  0x311952a6 __CFRunLoopRun + 1262
6   CoreFoundation                  0x3111849e CFRunLoopRunSpecific
7   CoreFoundation                  0x31118366 CFRunLoopRunInMode
8   GraphicsServices                0x33192432 GSEventRunModal
9   UIKit                           0x3087bcce UIApplicationMain
10  Transfer Quiz                   0x000030d4 0x000020d4
11  Transfer Quiz                   0x000021a8 0x000011a8 
```

我在我的项目中使用 ARC，这个问题似乎与旧设备 (3GS) 更相关，而不是新型号，这让事情变得更有趣。

如果有人有任何建议，我很想听听他们的意见。

PS - 我也在 Xcode 中启用了 NSZombies，但没有找到任何东西（可能是因为我无法复制崩溃！） - 我也找不到任何内存泄漏。

谢谢，

安迪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T17:50:08.170

这可能与您的应用程序在另一个应用程序运行时从内存中清除有关。这也可以解释为什么它在旧设备上更频繁地发生。

将日志消息放入您的`didReceiveMemoryWarning`委托方法中，它们可能会作为最后一行出现在您的崩溃日志中。

# c# - 来自自定义 JsonConverter（Web API）的 Json.Net JsonSerializer 中的自引用循环

> ID：12314438
> 
> 赞同：43
> 
> 时间：2012-09-07T08:28:13.777
> 
> 标签：c#, asp.net-web-api, json.net

该项目是一个 Asp.Net Web API Web 服务。

我有一个类型层次结构，我需要能够序列化到 Json 和从 Json 序列化，所以我从这个 SO 中获取代码：[如何在 JSON.NET 中实现自定义 JsonConverter 以反序列化基类对象列表？](https://stackoverflow.com/questions/8030538/how-to-implement-custom-jsonconverter-in-json-net-to-deserialize-a-list-of-base)，并将转换器应用于我的层次结构的基类；像这样的东西（这里有伪代码来隐藏不相关的内容）：

```
[JsonConverter(typeof(TheConverter))]
public class BaseType
{
    // note the base of this type here is from the linked SO above
    private class TheConverter : JsonCreationConverter<BaseType>
    {
        protected override BaseType Create(Type objectType, JObject jObject)
        {
            Type actualType = GetTypeFromjObject(jObject); /*method elided*/
            return (BaseType)Activator.CreateInstance(actualType);
        }
    }
}

public class RootType
{
    public BaseType BaseTypeMember { get; set; }
}

public class DerivedType : BaseType
{

} 
```

因此，如果我反序列化一个等于 的实例的实例`RootType`，那么它将被反序列化回该类型的实例。`BaseTypeMember``DerivedType`

作为记录，这些 JSON 对象包含一个`'$type'`包含虚拟类型名称（不是完整的 .Net 类型名称）的字段，因此我可以同时支持 JSON 中的类型，同时准确控制可以序列化和反序列化的类型。

现在这对于反序列化请求中的值非常有效；但我对序列化有疑问。如果您查看链接的 SO，实际上是从顶部答案链接的 Json.Net 讨论，您会发现我使用的基本代码完全针对反序列化；其使用示例显示了手动创建序列化程序。由此`JsonConverter`带来的实现`JsonCreationConverter<T>`只是简单地抛出一个`NotImplementedException`.

现在，由于 Web API 对请求使用单个格式化程序的方式，我需要在`WriteObject`方法中实现“标准”序列化。

在这一点上，我必须强调，在开始我的项目的这一部分之前，我已经正确地序列化了***所有内容******而没有错误***。

所以我这样做了：

```
public override void WriteJson(JsonWriter writer, 
  object value, 
  JsonSerializer serializer)
{
    serializer.Serialize(writer, value);
} 
```

但是当其中一个对象被序列化时，我得到一个`JsonSerializationException`: 。`Self referencing loop detected with type 'DerivedType'`再次 - 如果我删除转换器属性（禁用我的自定义创建），那么它工作正常......

我有一种感觉，这意味着我的序列化代码实际上是在同一个对象上再次触发转换器，这又会再次调用序列化程序 - 令人作呕。***已确认 - 请参阅我的答案***

*那么我应该*编写什么代码来`WriteObject`执行相同的“标准”序列化？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-07T09:31:51.933

嗯，这很有趣……

当我更仔细地查看异常的堆栈跟踪时，我注意到该方法`JsonSerializerInternalWriter.SerializeConvertable`存在两次，确实是堆栈顶部的那个方法 - 调用`JsonSerializerInternalWriter.CheckForCircularReference`- 反过来又抛出了异常。然而，它也是调用我自己的转换器`Write`方法的来源。

所以看起来序列化器正在做：

*   1) 如果对象有转换器
    *   1a) 如果循环引用则抛出
    *   1b) 调用转换器的 Write 方法
*   2) 其他
    *   2a) 使用内部串行器

因此，在这种情况下，Json.Net 正在调用我的转换器，而后者又在调用 Json.Net 序列化程序，然后它会爆炸，因为它看到它已经在序列化传递给它的对象！

在 DLL 上打开 ILSpy（是的，我知道它是开源的 - 但我想要“调用者”功能！）并将调用堆栈从 向上移动`SerializeConvertable`到`JsonSerializerInternalWriter.SerializeValue`，可以在开始附近找到检测是否应该使用转换器的代码：

```
if (((jsonConverter = ((member != null) ? member.Converter : null)) != null 
   || (jsonConverter = ((containerProperty != null) ? containerProperty.ItemConverter 
                                                    : null)) != null 
   || (jsonConverter = ((containerContract != null) ? containerContract.ItemConverter 
                                                    : null)) != null 
   || (jsonConverter = valueContract.Converter) != null 
   || (jsonConverter = 
       this.Serializer.GetMatchingConverter(valueContract.UnderlyingType)) != null 
   || (jsonConverter = valueContract.InternalConverter) != null) 
   && jsonConverter.CanWrite)
{
    this.SerializeConvertable(writer, jsonConverter, value, valueContract, 
                              containerContract, containerProperty);
    return;
} 
```

值得庆幸的是，`if`语句中的最后一个条件为我的问题提供了解决方案：我所要做的就是将以下内容添加到从问题中链接 SO 中的代码复制的基本转换器或派生的转换器中：

```
public override bool CanWrite
{
    get
    {
        return false;
    }
} 
```

现在一切正常。

然而，这样做的结果是，如果您打算对一个对象进行一些自定义 JSON 序列化，并且您将使用转换器注入它，***并且***您打算在某些或所有情况下回退到标准序列化机制；那么你不能因为你会欺骗框架认为你正在尝试存储循环引用。

我确实尝试过操作该`ReferenceLoopHandling`成员，但如果我告诉`Ignore`他们，则没有任何内容被序列化，如果我告诉它保存它们，不出所料，我得到了堆栈溢出。

这可能是 Json.Net 中的一个错误 - 好吧，这是一个非常极端的情况，它有从宇宙边缘掉下来的危险 - 但如果你确实发现自己处于这种情况，那么你就会陷入困境！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-16T11:46:03.010

我在使用 Newtonsoft.Json 的 4.5.7.15008 版本时遇到了这个问题。我尝试了这里提供的所有解决方案以及其他一些解决方案。我使用下面的代码解决了这个问题。基本上你可以使用另一个 JsonSerializer 来执行序列化。创建的 JsonSerializer 没有任何注册的转换器，因此可以避免重入/异常。如果使用其他设置或 ContractResolver，那么他们将需要在创建的序列化对象上手动设置它们：可以将一些构造函数参数添加到 CustomConverter 类中以适应这种情况。

```
 public class CustomConverter : JsonConverter
    {
        /// <summary>
        /// Use a privately create serializer so we don't re-enter into CanConvert and cause a Newtonsoft exception
        /// </summary>
        private readonly JsonSerializer noRegisteredConvertersSerializer = new JsonSerializer();

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            bool meetsCondition = false; /* add condition here */
            if (!meetsCondition)
                writer.WriteNull();
            else
                noRegisteredConvertersSerializer.Serialize(writer, value);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }

        public override bool CanConvert(Type objectType)
        {
            // example: register accepted conversion types here
            return typeof(IDictionary<string, object>).IsAssignableFrom(objectType);
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T02:35:02.293

我自己也遇到了这个，我沮丧地把头发拔了出来！

为了解决这个问题，以下方法对我有用，但因为我错过了`CanWrite`解决方案，这是一个更复杂的解决方法。

*   创建您正在使用 Converter 的现有类的副本，并将其命名为不同的名称。
*   删除`JsonConverter`副本上的属性。
*   在新类上创建一个构造函数，该构造函数采用与原始类相同类型的参数。使用构造函数复制以后序列化所需的任何值。
*   在您的转换器`WriteJson`方法中，将值转换为您的虚拟类型，然后序列化该类型。

例如，这类似于我原来的课程：

```
[JsonConverter(typeof(MyResponseConverter))]
public class MyResponse
{
    public ResponseBlog blog { get; set; }
    public Post[] posts { get; set; }
} 
```

副本如下所示：

```
public class FakeMyResponse
{
    public ResponseBlog blog { get; set; }
    public Post[] posts { get; set; }

    public FakeMyResponse(MyResponse response)
    {
        blog = response.blog;
        posts = response.posts;
    }
} 
```

WriteJson 是：

```
public override void WriteJson(JsonWriter writer, object value,
    JsonSerializer serializer)
{
    if (CanConvert(value.GetType()))
    {
        FakeMyResponse response = new FakeMyResponse((MyResponse)value);
        serializer.Serialize(writer, response);
    }
} 
```

* * *

**编辑：**

OP 指出，使用[Expando](http://msdn.microsoft.com/en-us/library/dd233052%28VS.100%29.aspx)可能是另一种可能的解决方案。虽然 DLR 支持需要 Framework 4.0 或更高版本，但它运行良好，省去了创建新类的麻烦。方法是创建一个新的`dynamic` `ExpandoObject`然后在`WriteJson`方法中初始化它的属性直接创建副本，例如：

```
public override void WriteJson(JsonWriter writer, object value,
    JsonSerializer serializer)
{
    if (CanConvert(value.GetType()))
    {
        var response = (MyResponse)value;
        dynamic fake = new System.Dynamic.ExpandoObject();
        fake.blog = response.blog;
        fake.posts = response.posts;
        serializer.Serialize(writer, fake);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T10:04:34.723

我刚刚遇到了与父/子集合相同的问题，发现那个帖子解决了我的问题。我只想显示父集合项的列表并且不需要任何子数据，因此我使用以下内容并且效果很好：

```
JsonConvert.SerializeObject(ResultGroups, Formatting.None,
                        new JsonSerializerSettings()
                        { 
                            ReferenceLoopHandling = ReferenceLoopHandling.Ignore
                        }); 
```

它还引用了 Json.NET 代码复合体页面：

[http://json.codeplex.com/discussions/272371](http://json.codeplex.com/discussions/272371)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-26T07:24:22.023

IMO，这是图书馆的一个严重限制。解决方案非常简单，尽管我承认它并没有那么快找到我。解决方案是设置：

```
.ReferenceLoopHandling = ReferenceLoopHandling.Serialize 
```

正如到处记录的那样，它将消除自引用错误并将其替换为堆栈溢出。就我而言，我需要写入功能，因此不能将 CanWrite 设置为 false。最后，当我知道对序列化程序的调用将导致（无休止的）递归时，我只是设置了一个标志来保护 CanConvert 调用：

```
 Public Class ReferencingObjectConverter : Inherits JsonConverter

        Private _objects As New HashSet(Of String)
        Private _ignoreNext As Boolean = False

        Public Overrides Function CanConvert(objectType As Type) As Boolean
            If Not _ignoreNext Then
                Return GetType(IElement).IsAssignableFrom(objectType) AndAlso Not GetType(IdProperty).IsAssignableFrom(objectType)
            Else
                _ignoreNext = False
                Return False
            End If
        End Function

        Public Overrides Sub WriteJson(writer As JsonWriter, value As Object, serializer As JsonSerializer)

            Try
                If _objects.Contains(CType(value, IElement).Id.Value) Then 'insert a reference to existing serialized object
                    serializer.Serialize(writer, New Reference With {.Reference = CType(value, IElement).Id.Value})
                Else 'add to my list of processed objects
                    _objects.Add(CType(value, IElement).Id.Value)
                    'the serialize will trigger a call to CanConvert (which is how we got here it the first place)
                    'and will bring us right back here with the same 'value' parameter (and SO eventually), so flag
                    'the CanConvert function to skip the next call.
                    _ignoreNext = True
                    serializer.Serialize(writer, value)
                End If
            Catch ex As Exception
                Trace.WriteLine(ex.ToString)
            End Try

        End Sub

        Public Overrides Function ReadJson(reader As JsonReader, objectType As Type, existingValue As Object, serializer As JsonSerializer) As Object
            Throw New NotImplementedException()
        End Function

        Private Class Reference
            Public Property Reference As String
        End Class

    End Class 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-03T06:19:04.567

这可能对某人有所帮助，但在我的情况下，我试图重写 Equals 方法以将我的对象视为值类型。在我的研究中，我发现 JSON.NET 不喜欢这样：

[JSON.NET 自引用错误](http://json.codeplex.com/workitem/22799)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-29T16:08:17.860

我的是一个简单的错误，与该主题的解决方案无关。

这个主题是谷歌的第一页，所以我在这里发帖以防其他人遇到和我一样的问题。

```
dynamic table = new ExpandoObject();
..
..
table.rows = table; <<<<<<<< I assigned same dynamic object to itself. 
```

# ruby-on-rails - 如何测试炼油厂会话控制器

> ID：12314443
> 
> 赞同：1
> 
> 时间：2012-09-07T08:28:27.627
> 
> 标签：ruby-on-rails, rspec, refinery

我已经覆盖了 Refinery 的会话控制器，甚至还没有修改它，因为我正在尝试为它编写一些规范。

控制器位于 app/controllers/refinery/sessions_controller 中：

```
module Refinery
  class SessionsController < Devise::SessionsController
  ....
  def create                 
      super
      rescue ::BCrypt::Errors::InvalidSalt, ::BCrypt::Errors::InvalidHash
      flash[:error] = t('password_encryption', :scope => 'refinery.users.forgot')
      redirect_to refinery.new_refinery_user_password_path
  end
  ..... 
```

然后，我尝试在 spec/controllers/refinery/sessions_controller_spec.rb 中针对此编写规范：

```
require 'spec_helper'
  describe Refinery::SessionsController do
    it "should post ok" do
      post :create
      response.should be_success 
    end     
  end 
```

然而，这给了我一个错误

```
No route matches {:action=>"create", :controller=>"refinery/sessions"} 
```

这让我感到困惑，因为当我运行 rake 路线时，我得到以下行：

```
 refinery_user_session POST    /refinery/users/login(.:format)              refinery/sessions#create 
```

有人可以帮忙吗？

Rails 3.2.8，炼油厂 2.0.8

# php - PHP：foreach 不形成数组

> ID：12314445
> 
> 赞同：0
> 
> 时间：2012-09-07T08:28:35.773
> 
> 标签：php, xml, arrays, rss, foreach

我这样做并且它有效。

```
<?php
    function load_file($url) 
    {
        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        $xml = simplexml_load_string(curl_exec($ch));
        return $xml;
    }

    $feedurl = 'http://www.astrology.com/horoscopes/daily-extended.rss';
    $rss = load_file($feedurl);

    $items = array();
    $count = 0;
    foreach ($rss->channel->item->description as $i => $description) 
    {
        $items[$count++] = $description;
    }
    echo $items[0];
?> 
```

当我`echo $items[1];` 没有显示下一个时。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:34:57.120

这是您的xml的示例：

```
<channel>
    <item>
        <description>blah</description>
    </item>
    <item>
        <description>blah1</description>
    </item>
    <item>
        <description>blah2</description>
    </item>
    <item>
        <description>blah3</description>
    </item>
</channel> 
```

当您这样做时，`$rss->channel->item->description`您将获得第`item`一个`description`.

您需要先遍历`items`然后获取每个描述。

例如：

```
$descriptions = array();
foreach($rss->channel->item as $item){
    $descriptions[] = $item->description;
    // note I don't need the $count variable... if you just use
    // [] then it auto increments the array count for you.
} 
```

希望有帮助。它未经测试，但应该可以工作。

# bash - 访问 bash 命令行参数 $@ vs $*

> ID：12314451
> 
> 赞同：400
> 
> 时间：2012-09-07T08:28:46.693
> 
> 标签：bash, command-line-arguments

在许多 SO 问题和 bash 教程中，我看到我可以通过两种方式访问​​ bash 脚本中的命令行参数：

```
$ ~ >cat testargs.sh 
#!/bin/bash

echo "you passed me" $*
echo "you passed me" $@ 
```

结果是：

```
$ ~> bash testargs.sh arg1 arg2
you passed me arg1 arg2
you passed me arg1 arg2 
```

`$*`和 和有什么不一样`$@`？
什么时候用前者，什么时候用后者？

* * *

## 回答 #1

> 赞同：515
> 
> 时间：2012-09-07T10:46:32.987

引用特殊参数时会出现差异。让我说明差异：

```
$ set -- "arg  1" "arg  2" "arg  3"

$ for word in $*; do echo "$word"; done
arg
1
arg
2
arg
3

$ for word in $@; do echo "$word"; done
arg
1
arg
2
arg
3

$ for word in "$*"; do echo "$word"; done
arg  1 arg  2 arg  3

$ for word in "$@"; do echo "$word"; done
arg  1
arg  2
arg  3 
```

* * *

关于引用重要性的另一个例子：注意“arg”和数字之间有2个空格，但如果我没有引用$word：

```
$ for word in "$@"; do echo $word; done
arg 1
arg 2
arg 3 
```

在 bash 中，`"$@"`是要迭代的“默认”列表：

```
$ for word; do echo "$word"; done
arg  1
arg  2
arg  3 
```

* * *

## 回答 #2

> 赞同：319
> 
> 时间：2015-01-22T22:18:53.683

来自[Bash Hackers Wiki](http://wiki.bash-hackers.org/scripting/posparams)的一个非常方便的概览表：

| 句法 | 有效结果 |
| --- | --- |
| `$*` | `$1 $2 $3 … ${N}` |
| `$@` | `$1 $2 $3 … ${N}` |
| `"$*"` | `"$1c$2c$3c…c${N}"` |
| `"$@"` | `"$1" "$2" "$3" … "${N}"` |

其中`c`第三行是 的第一个字符`$IFS`，即[输入字段分隔符](https://en.wikipedia.org/wiki/Input_Field_Separators)，一个 shell 变量。

**如果参数要存储在脚本变量中**并且参数应该包含空格，我衷心建议采用[`"$*"`将输入字段分隔符设置为 tab 的技巧`IFS=$'\t'`](https://stackoverflow.com/a/30439949/2192488)。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2012-09-07T08:36:55.173

**$***

> 扩展到位置参数，从一个开始。当扩展出现在双引号内时，它会扩展为一个单词，每个参数的值由 IFS 特殊变量的第一个字符分隔。也就是说，“$*”等价于“$1c$2c...”，其中c是IFS变量值的第一个字符。如果未设置 IFS，则参数以空格分隔。如果 IFS 为空，则将参数连接起来而不插入分隔符。

**$@**

> 扩展到位置参数，从一个开始。当扩展出现在双引号内时，每个参数都扩展为一个单独的单词。即 "$@" 等价于 "$1" "$2" ... 如果双引号展开出现在一个单词中，则第一个参数的展开与原词的开头部分连接，展开的最后一个参数与原始单词的最后一部分连接。当没有位置参数时，"$@" 和 $@ 扩展为空（即，它们被删除）。

资料来源：[巴什人](http://linux.die.net/man/1/bash)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-09-07T08:32:33.557

$@ 与 $* 相同，但每个参数都是带引号的字符串，即参数原封不动地传递，没有解释或扩展。这意味着，除其他外，参数列表中的每个参数都被视为一个单独的词。

当然，“$@”应该被引用。

[http://tldp.org/LDP/abs/html/internalvariables.html#ARGLIST](http://tldp.org/LDP/abs/html/internalvariables.html#ARGLIST)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-09T13:40:01.543

这个例子让我们在使用它们时突出显示“at”和“asterix”之间的区别。我声明了两个数组“水果”和“蔬菜”

```
fruits=(apple pear plumm peach melon)            
vegetables=(carrot tomato cucumber potatoe onion)

printf "Fruits:\t%s\n" "${fruits[*]}"            
printf "Fruits:\t%s\n" "${fruits[@]}"            
echo + --------------------------------------------- +      
printf "Vegetables:\t%s\n" "${vegetables[*]}"    
printf "Vegetables:\t%s\n" "${vegetables[@]}" 
```

看上面代码的结果如下：

```
Fruits: apple pear plumm peach melon
Fruits: apple
Fruits: pear
Fruits: plumm
Fruits: peach
Fruits: melon
+ --------------------------------------------- +
Vegetables: carrot tomato cucumber potatoe onion
Vegetables: carrot
Vegetables: tomato
Vegetables: cucumber
Vegetables: potatoe
Vegetables: onion 
```

# security - 使用 Amazon S3 保护私有播客的 MP3 文件的好方法是什么？

> ID：12314455
> 
> 赞同：2
> 
> 时间：2012-09-07T08:29:03.070
> 
> 标签：security, rss, amazon-s3, itunes, podcast

我正在尝试创建一个私人播客提要。我服务的每个用户都有一个帐户，根据他们支付的费用，他们将收到不同的内容。有些内容很敏感，因此安全性相当重要；如果任何随附的音频文件在互联网上传播，这对我们的业务来说可能是灾难性的。

我目前正在对服务进行原型设计，MP3 存储在 S3 上，并且它们不安全。是时候保护他们了。根据我的研究，我了解到，事实上，我可以保护 S3 上具有访问到期期限的文件。但是，因为我有很多用户，所以用我的“全局”密钥签署请求并过期可能不是一个好主意，因为

1.  如果我需要撤销访问权限，我需要为所有人执行此操作
2.  由于我不知道他们的 podcatcher 何时会请求该文件，因此我不知道何时设置到期时间。有时，podcatcher 会下载提要 XML，但只是稍后才会获取 MP3 文件，因此 URL 可能会在客户端有机会获取它们之前过期（我正在考虑 iTunes，但可能还有其他）。

我看到它的方式，我有两个选择，我不确定是否可行：

**编辑**我想，另一种可能的方式是[扮演我自己的安全角色，如果用户愿意的话，只需重定向](https://stackoverflow.com/questions/2636783/django-as-s3-proxy)到 S3 上的 MP3 即可。这似乎是最明智的。

1.  我可以在 Amazon 上为我的所有用户创建用户帐户，并将它们链接到我数据库中的 Amazon 令牌。每个人的 MP3 网址都使用他们的秘密令牌进行签名，并且从现在起很长时间内到期。我不喜欢将他们的令牌存储在我的数据库中的想法，而且我不确定 Amazon ACL 是否是为这种情况而设计的。这也意味着如果您知道 URL，仍然可以共享文件。
2.  我可以通过我的服务器代理每个请求。这意味着我只有一个亚马逊账户，并且我可以使用自己的安全系统。但是通过我的服务器代理每个 MP3 下载听起来很慢、浪费和昂贵。

有关执行此操作的最佳方法的任何想法。

PS我没有嫁给S3。可以考虑其他解决方案。我在 Heroku 上使用 Ruby，以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:35:22.407

我将使用[其他地方建议](https://stackoverflow.com/questions/2636783/django-as-s3-proxy)的重定向解决方案。这似乎给了我最大的灵活性和非常低的开销。您绝对不应该**做**的是在您的提要中直接使用指向 S3 的链接，因为它们可能在客户端下载之前过期。

# web-services - 如何使用外部（免费或付费）网络服务

> ID：12314459
> 
> 赞同：0
> 
> 时间：2012-09-07T08:29:10.017
> 
> 标签：web-services

如何在应用程序中使用外部 Web 服务（付费或免费）。例如：这是来自正在使用的站点之一 (http://debugmode.net/2010/09/10/sumption-wcf-rest-service-in-asp-net-web-site/) 的代码片段自创服务。但是如果必须使用外部服务而不是它应该如何进行？

```
public partial class _Default : System.Web.UI.Page
{    

 protected void Page_Load(object sender, EventArgs e)  
 {    
 }  

protected void Button1_Click(object sender, EventArgs e)    
{        
 WebClient proxy = new WebClient();     
 byte[] abc = proxy.DownloadData((new Uri("http://localhost:4567/Service1.svc/GetData"))); 
 Stream strm = new MemoryStream(abc);   
 DataContractSerializer obj = new DataContractSerializer(typeof(string));  
 string result = obj.ReadObject(strm).ToString();     
 TextBox1.Text = result; 
} 
```

# jquery - Django 的 Jquery 自动完成限制结果

> ID：12314464
> 
> 赞同：1
> 
> 时间：2012-09-07T08:29:31.203
> 
> 标签：jquery, django

使用链接- [Jquery Autocomplete with Django](https://stackoverflow.com/questions/6273941/jquery-autocomplete-with-django)，我添加了 django-autocomplete 搜索。现在我想在搜索框中将搜索结果限制为 5。任何人都可以帮助我做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:39:07.450

您可以限制查询结果：

```
def search_view(request):
    ...
    listado = Model.objects.filter(
                        descripcion__istartswith=q
                                  ).order_by("descripcion")[:5]
    ... 
```

# asp.net - Asp.Net (MVC)：哪个会话超时是什么？

> ID：12314472
> 
> 赞同：10
> 
> 时间：2012-09-07T08:29:41.577
> 
> 标签：asp.net, session, iis, timeout

我制作了一个 Asp.net MVC 网站，但我对不同的超时设置感到非常困惑。

有什么区别：

*   web.config 中的 SessionState 超时：

![Web.config sessionState 超时](../Images/002c60dda0d4c5b6f6d603864fd925f3.png)

*   应用程序池超时

![应用程序池超时](../Images/0ed48df9406b326365903de15dbb02b7.png)

*   Asp.Net 会话超时属性

    ![Asp.Net 会话超时](../Images/95c0a120707bab6eeeb3cb5c8d1a506f.png)

如果我想要（比如说）6 小时的超时，我应该设置哪一个？他们都是？只有一些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:07:35.653

应用程序池超时是在应用程序池关闭工作进程以释放资源之前站点必须处于空闲状态的时间长度。缺点是当下一个访问者访问网站时，需要很长时间才能重新启动，因此关闭后的第一次请求会很慢。 [IIS7 应用程序池空闲超时设置](http://bradkingsley.com/iis7-application-pool-idle-time-out-settings/)

会话超时是指用户在第一次请求站点时获得的会话 ID，以及该会话的过期时间。我认为您包含屏幕截图的 ASP 是用于经典 ASP，而不是 ASP.NET。

因此，要增加会话超时，您将使用配置文件中的超时。

当您单击 IIS 中的网站时，还有一个会话状态部分，您可以使用其中任何一个，并且页面底部有一个超时。
但是，如果应用程序池超时的值更短，那么您的会话设置将无关紧要，因为工作进程将在会话到期之前关闭。因此，您还应该更改应用程序池设置。

[IIS 7 中的会话超时](https://stackoverflow.com/questions/949426/session-time-out-in-iis-7)

# toggle - 切换登录效果 php

> ID：12314473
> 
> 赞同：0
> 
> 时间：2012-09-07T08:29:43.227
> 
> 标签：toggle, admin, options, effect

我已经在页面中构建了我的管理选项，因此如果管理员登录所有文本框并且可以在同一页面上更改图像。

是否可以添加一个链接，以便在单击时切换登录和注销的效果而不实际注销？

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:11:52.803

好的，抱歉更新晚了，

解决我使用jquery的问题

创建 div 以绕过所有管理选项，然后在管理员单击“显示管理员”选项时使用切换选项来显示和隐藏它们

# c# - 使用 Response.Redirect 进行部分渲染的脚本在 chrome 和 mozilla 中不起作用

> ID：12314480
> 
> 赞同：0
> 
> 时间：2012-09-07T08:30:14.213
> 
> 标签：c#, javascript, asp.net, dom, response.write

下面是我的代码......

```
 Response.Write("<Table style='border:1px solid #0B5226;background-color: white;' runat='server' width = '100%'> <Tr style='font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; font-weight:bold; color:#000000; vertical-align:middle; text-align:left;'><Td width='15%'> <img src='../Images_v4/Common/Progress.gif' /></Td><Td width='80%' style='text-align: left;word-break: break-all;'><Div>In</Div></Td></Table>");
    Response.Flush();
    Response.Write("<script language='javascript'>");

    Response.Write("var nr = document.all.length;");
    Response.Write("for(i=0;i<nr;i++)");
    Response.Write("{");

    Response.Write("if(document.all(i).tagName == 'IMG' && document.all(i).nameProp == 'Progress.gif')");
    Response.Write("{");
    Response.Write("document.all(i).src = '../Images_v4/Common/Success.png';");
    Response.Write("}");

    Response.Write("if(document.all(i).tagName == 'DIV' && document.all(i).innerHTML == 'In Progress...')");
    Response.Write("{");
    Response.Write("document.all(i).innerHTML = 'Processed Successful';");
    Response.Write("}");

    Response.Write("}");
    Response.Write("</script>");

    Response.Flush(); 
```

上面的代码通过写入响应显示来自 aspx 页面的状态消息，并且在特定事情完成工作一段时间后，它会将状态图像从进度更改为成功。上面的代码在 IE 中运行良好，因为***document.all(i).nameProp***似乎在 IE 中运行。但是这个东西在 chrome 和 mozilla 等其他浏览器中不起作用。是否有任何替代***document.all(i) .nameProp***适用于所有浏览器。或任何其他实现此目的的方法。我正在使用 C# Web 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:41:20.477

我建议`document.getElementsByTagName('*')`。`document.all`仅适用于旧 IE (IE5)。

nameProp 也仅限于 IE，但可以通过简单的正则表达式函数轻松实现类似的功能：

对于绝对兼容性：

```
function getFileName(path) {
    return path.match(/[-_\w]+[.][\w]+$/i)[0];
}

var all = document.all || document.getElementsByTagName('*');
for(var i=0, elem; elem=all[i++];) {
    if (elem.tagName == 'IMG' && getFileName(elem.src) == 'Progress.gif') {
        elem.src = '../Images_v4/Common/Success.png';
    }
    ... THE SAME FOR THE DIVS.
} 
```

最好不要浏览页面上的所有元素：

```
var imgs = document.getElementsByTagName('img');
var divs = document.getElementsByTagName('div');
for(var i=0, elem; elem=imgs[i++];) {
    if (getFileName(elem.src) == 'Progress.gif') {
        elem.src = '../Images_v4/Common/Success.png';
    }
} 
```

# android - 无法安装支持库

> ID：12314481
> 
> 赞同：0
> 
> 时间：2012-09-07T08:30:16.317
> 
> 标签：android, sdk

我正在尝试开始开发 android 应用程序。我想我需要先安装支持库修订版 10。但是我收到错误...

我尝试使用 sdk manager 安装它。它给出了这样的错误：

> 下载 Android 支持库，修订版 10
> 
> > 找不到文件：C:\Program Files (x86)\Android\android-sdk\temp\support_r10.zip（访问被拒绝）
> 
> 完毕。什么都没有安装。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:37:12.443

尝试以管理员身份运行您要安装的任何程序，以管理员身份运行您的 SDK 管理器。右键单击它并选择“以管理员身份运行”它应该安装它。（右键单击->以管理员身份运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:43:04.310

当 SDK 管理器尝试修改 eclipse 正在使用的文件时，可能会发生这种情况。试试这个 Exit eclipse（你可能需要重新启动你的系统） - 转到你的 android sdk 文件夹 - 直接从那里打开 SDK 管理器（而不是从 eclipse） - 现在更新库。

# ruby - PBXProject 文件的正则表达式

> ID：12314482
> 
> 赞同：2
> 
> 时间：2012-09-07T08:30:21.837
> 
> 标签：ruby, regex

致力于 XCode 项目文件解析器[PBXProject](https://github.com/owlforestry/pbxproject "PBX项目")的纯 ruby​​ 实现，并且在正则表达式方面几乎不需要帮助。

所以 PBXProject 文件有一堆奇怪的混合行，它们混合了内容。我现在拥有的是正则表达式，`(.*?) = (.*?)( \/\* (.*) \*\/)?; ?`它适用于更简单的情况（第一行）。但是对于第二行，它切得太早了（对第一个 ; -字符）。

```
isa = PBXBuildFile; fileRef = C0480C2015F4F91F00E0A2F4 /* zip.c */;

isa = PBXBuildFile; fileRef = C0480C2315F4F91F00E0A2F4 /* ZipArchive.mm */; settings = {COMPILER_FLAGS = "-fno-objc-arc"; }; 
```

所以我想从这些行中得到简单的`name = value`对，即

```
isa = PBXBuildFile
settings = {COMPILER_FLAGS = "-fno-objc-arc"; } 
```

用一个正则表达式实现这一目标的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:33:25.800

这个正则表达式可以正常工作：

```
[a-zA-Z0-9]*\s*?=\s*?.*?(?:{[^}]*}|(?=;)) 
```

请注意，只允许使用一级括号，正则表达式不会处理嵌套括号。

从您的示例中，将捕获以下行：

```
isa = PBXBuildFile
fileRef = C0480C2015F4F91F00E0A2F4 /* zip.c */
isa = PBXBuildFile
fileRef = C0480C2315F4F91F00E0A2F4 /* ZipArchive.mm */
settings = {COMPILER_FLAGS = "-fno-objc-arc"; } 
```

这是正则表达式的解释：

```
[a-zA-Z0-9]*\s*?=\s*?.*?(?:{[^}]*}|(?=;))

Options: ^ and $ match at line breaks

Match a single character present in the list below «[a-zA-Z0-9]*»
    Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
    A character in the range between “a” and “z” «a-z»
    A character in the range between “A” and “Z” «A-Z»
    A character in the range between “0” and “9” «0-9»
Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*?»
    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
Match the character “=” literally «=»
Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*?»
    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
Match any single character that is not a line break character «.*?»
    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
Match the regular expression below «(?:(?={){[^}]*}|(?=;))»
    Match either the regular expression below (attempting the next alternative only if this one fails) «(?={){[^}]*}»
        Match the character “{” literally «{»
        Match any character that is NOT a “}” «[^}]*»
            Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
        Match the character “}” literally «}»
    Or match regular expression number 2 below (the entire group fails if this one fails to match) «(?=;)»
        Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=;)»
            Match the character “;” literally «;» 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:49:08.270

根据您希望解析的内容的确切性质，可能无法使用单个有限表达式。您遇到问题的第二行表明可能涉及嵌套模式。嵌套模式只能匹配到有限的深度，这是不建议使用正则表达式解析 [X]HTML 的原因之一。如果你真的想处理任意深度的嵌套，你可能想研究类似[Treetop](http://treetop.rubyforge.org/)的东西。

如果你不需要它是健壮的，你可以尝试这样的表达式：

```
/((?i)(?:[^;]+=\s*\{.*?\})|[^;]+=[^;]+);/ 
```

它将首先尝试匹配某种形式的东西`something = {anything}`，如果不成功，它将`something = something`在 a 之前匹配`;`。您应该能够使用`string.scan(/regex/)`来查找给定字符串的所有匹配项。以这种方式处理块应避免过早结束匹配过程等问题，并且您可以轻松提取对。

进一步阅读：

*   [正则语法](http://en.wikipedia.org/wiki/Regular_grammar)
*   [上下文无关语法](http://en.wikipedia.org/wiki/Context-free_grammar)

# iphone - 如何检查 iTunes 上是否有新版本？

> ID：12314483
> 
> 赞同：2
> 
> 时间：2012-09-07T08:30:30.297
> 
> 标签：iphone, ios, version, itunes

我需要在 iTunes 上检查我的 iOS 应用程序版本。如果有更新的版本可用，我想显示 UIAlert。我不想在我的服务器上存储版本号，因为随时都有更新的版本可用。

是否可以在 iTunes 上查看我的应用程序版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:57:58.537

是的，有可能。

看看这个非常值得推荐的适用于 iOS 和 Mac OS X 的开源库：[https ://github.com/nicklockwood/iVersion](https://github.com/nicklockwood/iVersion)

# ruby-on-rails - 在 Rails 中上传文件

> ID：12314486
> 
> 赞同：0
> 
> 时间：2012-09-07T08:30:53.877
> 
> 标签：ruby-on-rails, file-upload

我需要简单地将文件加载到公用文件夹。有很多宝石，但所有宝石（和教程）都展示了如何使用模型等来做到这一点......但我需要在视图中简单选择文件，并将其发送到控制器，控制器生成随机名称并将其保存到公共文件夹，没有任何型号等等。简单的选择 - 上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:37:38.607

您可以使用[没有活动记录的载波，](http://blog.endpoint.com/2012/04/using-carrierwave-without-orm.html)或

您可以手动写入公共文件夹，您可以使用`params[:file_name].tempfile`它的机架多部分对象读取文件，您可以通过放置调试器或撬来检查

# autohotkey - 数学没有按预期工作

> ID：12314493
> 
> 赞同：2
> 
> 时间：2012-09-07T08:31:18.383
> 
> 标签：autohotkey

我不知道如何将变量用作数学表达式。以下代码不会返回预期的解决方案，但不会抛出任何错误，而是只会在 A 中再次输出 Q 变量的内容。

```
Q = 7+5=
StringReplace, Q, Q, =,, 1
A := Q 
```

使用`%Q%`或`Q = %Q%`不起作用。在它之后运行`MsgBox, %A%`只会返回“7+5”。请帮忙，因为我对 AutoHotKey 很陌生 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:12:27.030

看一下这个：

[http://www.autohotkey.com/community/viewtopic.php?t=17058](http://www.autohotkey.com/community/viewtopic.php?t=17058)

这应该这样做：

```
Q = 7+5=
StringReplace, Q, Q, =,, 1
StringReplace, Q, Q, +,%A_SPACE%, 1

stringleft, first, Q, 1
stringright, last, Q, 1

x := first + last

MsgBox, %first%, %last%, %x% 
```

# blackberry - 黑莓 GPRS 不工作

> ID：12314500
> 
> 赞同：1
> 
> 时间：2012-09-07T08:32:10.920
> 
> 标签：blackberry, wifi, blackberry-simulator, blackberry-eclipse-plugin, gprs

我有一个 BlackBerry 应用程序，它在 wi-fi 下运行得非常好。但我无法使用 GPRS 运行应用程序。请帮助我..谢谢..

```
boolean hasConnectivity_BIS = TransportInfo.isTransportTypeAvailable(TransportInfo.TRANSPORT_BIS_B)&&TransportInfo.hasSufficientCoverage(TransportInfo.TRANSPORT_BIS_B);
boolean hasConnectivity_MDS = TransportInfo.isTransportTypeAvailable(TransportInfo.TRANSPORT_MDS)&&TransportInfo.hasSufficientCoverage(TransportInfo.TRANSPORT_MDS);
boolean hasConnectivity_TCP_Cell = TransportInfo.isTransportTypeAvailable(TransportInfo.TRANSPORT_TCP_CELLULAR)&&TransportInfo.hasSufficientCoverage(TransportInfo.TRANSPORT_TCP_CELLULAR);
boolean hasConnectivity_TCP_wifi = TransportInfo.isTransportTypeAvailable(TransportInfo.TRANSPORT_TCP_WIFI)&&TransportInfo.hasSufficientCoverage(TransportInfo.TRANSPORT_TCP_WIFI);
boolean hasConnectivity_WAP = TransportInfo.isTransportTypeAvailable(TransportInfo.TRANSPORT_WAP)&&TransportInfo.hasSufficientCoverage(TransportInfo.TRANSPORT_WAP);
boolean hasConnectivity_WAP2 = TransportInfo.isTransportTypeAvailable(TransportInfo.TRANSPORT_WAP2)&&TransportInfo.hasSufficientCoverage(TransportInfo.TRANSPORT_WAP2);

if (hasConnectivity_BIS||hasConnectivity_MDS||hasConnectivity_TCP_Cell||hasConnectivity_TCP_wifi||hasConnectivity_WAP||hasConnectivity_WAP2)
{
    boolean hasconn=ButtonPay.checkConnection();
    System.out.println("Has Connection?????>>> "+hasconn);
    //my implementation    
}
else
{
    caller.showDialog("Response", "Internet connection not available");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:14:31.007

您需要在 URL 之后附加您的连接类型。

```
public static String getConnectionString() {

    String connectionString = null;

    // Simulator behaviour is controlled by the USE_MDS_IN_SIMULATOR
    // variable.
    if (DeviceInfo.isSimulator()) {

        connectionString = ";deviceside=true";
    }

    // Wifi is the preferred transmission method
    else if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {

        connectionString = ";interface=wifi";
    }

    // Is the carrier network the only way to connect?
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {

        String carrierUid = getCarrierBIBSUid();

        if (carrierUid == null) {
            // Has carrier coverage, but not BIBS. So use the carrier's TCP
            // network

            connectionString = ";deviceside=true";
        } else {
            // otherwise, use the Uid to construct a valid carrier BIBS
            // request

            connectionString = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
        }
    }

    // Check for an MDS connection instead (BlackBerry Enterprise Server)
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {

        connectionString = ";deviceside=false";
    }

    // If there is no connection available abort to avoid hassling the user
    // unnecssarily.
    else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
        connectionString = "none";

    }

    // In theory, all bases are covered by now so this shouldn't be reachable.But hey, just in case ...
    else {

        connectionString = ";deviceside=true";
    }

    return connectionString;
}

/**
 * Looks through the phone's service book for a carrier provided BIBS
 * network
 * 
 * @return The uid used to connect to that network.
 */
private synchronized static String getCarrierBIBSUid() {
    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;

    for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
        if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
            if (records[currentRecord].getName().toLowerCase()
                    .indexOf("bibs") >= 0) {
                return records[currentRecord].getUid();
            }
        }
    }

    return null;
} 
```

一旦你写了这段代码。采用

```
con = (HttpConnection) Connector.open(url + getConnectionString()); 
```

它将确定可用的网络类型。

# delphi - Delphi 2010 - 无法加载 SSL 库

> ID：12314503
> 
> 赞同：4
> 
> 时间：2012-09-07T08:32:19.110
> 
> 标签：delphi, ssl, indy

我执行此代码并得到错误：无法加载 SSL lib 类：`EIdOSSLCouldNotLoadSSLLibrary`

我不使用.net。

```
var
  Client: TIdHTTP;
  tokenURL: String;
begin
  client := TIdHTTP.Create(nil);
  try
    client.IOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(client);
    TIdSSLIOHandlerSocketOpenSSL(client.IOHandler).SSLOptions.Method := sslvSSLv23;

    client.HandleRedirects := False; 
    client.Get('https://www.xxxxx.xx/portal/ILlogin?username=XXXXXX&password=XXXXXXXX&skin=yyyyyyyyyy&portal=GG', [300, 301, 302, 303, 305, 306, 307]);

    if client.Response.Location <> '' then
      tokenURL := client.Response.Location;
  finally
    client.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T08:49:12.070

单元中的Indy`WhichFailedToLoad()`函数`IdSSLOpenSSLHeaders`会告诉您为什么无法加载 OpenSSL。要么没有安装 OpenSSL DLL，要么安装了不兼容的 DLL 版本，缺少 Indy 正在寻找的功能。试试 Indy's [Fulgan mirror](http://indy.Fulgan.com/SSL)上提供的 DLL 。

# android - 多客户端一服务器架构与android中的处理程序

> ID：12314504
> 
> 赞同：0
> 
> 时间：2012-09-07T08:32:32.497
> 
> 标签：android, multithreading

嗨，伙计，我有一个线程 S 和 n 个线程 C。C 使用 S 的 Handler 上的 sendMessage(msg) 向 S 发送请求。每个客户端 C1...CN 都有一个私有处理程序。S 在他的处理程序上接收消息，详细说明请求并希望在指定客户端的私有处理程序上使用 sendMessage(risp) 发送响应。但是他怎么知道 C 等待响应的处理程序是什么？客户端 C 可以在请求消息中插入一个引用他的处理程序在哪里接收响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:39:57.277

发送消息时设置其`replyTo`字段：

```
msgYouSend.replyTo = new Messenger(yourHandler); 
```

然后你可以这样回复：

```
msgYouReceived.replyTo.send(yourReplyMessage) 
```

请参阅[http://developer.android.com/reference/android/os/Message.html](http://developer.android.com/reference/android/os/Message.html)`replyTo`上的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:26:55.620

```
Message yourReplyMessage=new Message(); 
Bundle b=new Bundle();
 b.putParcelable(keyStringResponse, risp); 
yourReplyMessage.setData(b);
 try { msgYouReceived.replyTo.send(yourReplyMessage);
 } catch (RemoteException e) { } 
```

这是我的解决方案...您认为可以吗？

# c - C中的条件#include

> ID：12314508
> 
> 赞同：5
> 
> 时间：2012-09-07T08:32:40.513
> 
> 标签：c, include, c-preprocessor

有没有办法用 c 预处理器进行条件包含？

我有一个由不同团队共享的工具“库”（Tools.c、Tools.h）。该库依赖于第二个库，提供 XML 功能。让我们称之为 XML.h 现在一个团队使用第二个库 (XML.h) 的普通版本，而另一个团队在他们的项目中使用扩展版本 (XMLEx.h)。第二个团队不想包含 XML.h，因为他们已经包含了 XMLEx.h，提供了 XML.h 的所有功能。

是否有一种机制来实现类似的东西：

```
#ifdef XML_EX
#include "XMLEx.h"
#else
#include "XML.h"
#endif 
```

只有`#define XML_EX`在更高的（项目）级别上？喜欢

```
#include "Tools.h" 
```

对于团队 1 和

```
#define XML_EX
#include "Tools.h" 
```

为第 2 队？（我知道简单的解决方案是行不通的，更多的是为了说明所需的“工作流程”。）

边界条件为：

*   视窗系统
*   CVI/LawWindows IDE
*   没有制作文件
*   Tools.h 应该在没有外部项目的情况下编译。

编辑：对于建议的解决方案和提示，这是常见的方式，也许它与我的构建过程有关，但它不起作用。IDE 抱怨缺少第 2 组的 XML.h。我猜，这是因为 IDE 尝试先独立编译每个源，而不知道“外部”#define。

编辑：让我们假设，A 队是一群白痴，怎么只能在 IDE 中点击“RUN”按钮。因此，它最好开箱即用。

编辑：好的，这让我很困惑。我所学到的一切都告诉我，它应该工作。这是一个最小的集合，我已经测试过：

主程序

```
#define XML_EX
#include "Tools.h"

void main(void)
{
  test();
} 
```

然后是工具.h

```
#ifdef XML_EX
  #include "XMLEx.h"
#else
  #include "XML.h"
#endif 
```

XMLEx.h 具有测试功能，而 XMLEx.c 实现了它。如果我尝试构建，我会得到一个“XML.h not found”。`#define XML_EX`使用Tools.h 中的a 一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:35:20.523

您建议的解决方案通常是正在使用的解决方案，并且经常使用。您还可以在 makefile/项目文件中传递宏。

另请注意，这`Tools.h`是一个头文件，并且将始终作为另一个文件的一部分进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:42:02.117

您可以有一个 team.h 文件，该文件为团队 A 定义任何宏，而不为团队 B 定义宏或定义不同的值，并且每个团队都有自己的 team.h 副本。

每个团队成员还可以通过 -D 选项宏将该值传递给编译器（至少 Linux 编译器支持）。我建议如果你这样做，你传递 TEAM_A 或 TEAM_B 以便在未来给你更多的灵活性，而不必传递更多的宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:24:50.810

我欺骗了自己。如上所述，代码没有任何问题。我误解了我的 IDE 的错误消息。

至于这个例子，我也有 Tools.c 并且该源的编译失败（自然），因为我的项目中没有 XML.h。从项目中删除源代码并仅链接到预编译的工具可以正常工作。

# android - Android 大通知图标 - 靠近文本

> ID：12314509
> 
> 赞同：0
> 
> 时间：2012-09-07T08:32:46.147
> 
> 标签：android, android-notifications, android-notification-bar

我制作了通知栏，我想在文本附近有一个大图标

我不做电池只是以这张图片为例。

例如：http: [//i45.tinypic.com/23hu5xd.png](http://i45.tinypic.com/23hu5xd.png)

红色圆圈 = 始终可见的图标。蓝色圆圈 = 仅在展开时可见的图标。

如何在通知中制作这么大的图标？（蓝圈）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:47:13.480

您可以使用远程视图创建自定义通知。在这样的远程视图中，您有一定程度的自由度来设计通知的布局，但建议您遵循 android 的设计指南。

[您可以在此处](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView)找到有关如何创建扩展通知视图的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:43:25.007

您必须为此使用自己的布局。

这已被弃用，因为现在您应该为所有事情使用 builder，但有时您只需要做一些特别的事情。

```
 String ns = Context.NOTIFICATION_SERVICE;
    mNotificationManager = (NotificationManager) ctx.getSystemService(ns);

    int icon = R.drawable.icon;
    CharSequence tickerText = "Ticker Text";
    long when = System.currentTimeMillis();

    notification = new Notification(icon, tickerText, when);
    String packageName = ctx.getPackageName();
    contentView = new RemoteViews(packageName, R.layout.notificationlayout);
    notification.contentView = contentView;
    contentView.setTextViewText(R.id.textView1, "Text");
    Intent notificationIntent = new Intent(ctx, TargetActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(ctx, 0, notificationIntent, 0);
    notification.contentIntent = contentIntent;

    mNotificationManager.notify(NOTIFICATION_ID, notification); 
```

# ember.js - 如何直接在客户端更改记录，无需交易

> ID：12314515
> 
> 赞同：1
> 
> 时间：2012-09-07T08:33:41.823
> 
> 标签：ember.js, ember-data

我有一个很常见的情况，如果有一个术语，那么我不知道它。

记录具有**字段：** id、启用、文本等...
并具有 POST /record/enable 以启用或禁用记录，因为它调用的是服务器上的更大进程。

因此，一旦收到来自正常 POST 的回调，我想在本地将 record.enabled 更新为 true，这不应该是任何事务的一部分。并且应该直接更新。

如何做到这一点？或者对于这种要求有什么更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:50:36.677

我认为沿着这些思路应该做的事情：

```
App.PObject = DS.Model.extend({
    id: DS.attr('number'),
    name: DS.attr('string'),

    nestedObject: function() {
        if (!this.nestedObj) {
            this.nestedObj = Ember.Object.create({
                active: false
            });
        }
        return this.nestedObj
    }.property()

}); 
```

正如我目前所见，模型只有在其定义为 的属性`DS.attr`发生变化时才是脏的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T08:34:01.813

**编辑：**后来意识到，这个解决方案不起作用。

我的问题的正确术语是：瞬态字段
对象的瞬态字段被序列化/反序列化忽略（如 Java ORM 忽略瞬态字段）[http://en.wikipedia.org/wiki/Transient_(computer_programming](http://en.wikipedia.org/wiki/Transient_(computer_programming)

我想出了一个解决办法。它真的很简单。

```
App.PObject = DS.Model.extend({
    id: DS.attr('number'),
    name: DS.attr('string'),
    //will not be part of Ember-data persistence, but will be populated on GET
    enabled: null
}); 
```

不属于属性的对象（记录）属性将被忽略。

# ios - iOS - 像新的 facebook 应用一样的“上传进度视图”

> ID：12314516
> 
> 赞同：1
> 
> 时间：2012-09-07T08:33:45.550
> 
> 标签：ios, xcode, uiview, uiviewcontroller

我想在我的应用程序中有一个“上传进度视图”。就像新的 Facebook 应用程序一样。“上传视图”仅在上传进度处于活动状态时可见。

UIView 应该在我的应用程序中的每个 UIViewController 上都可见。

我可以在我的 AppDelegate 中插入“上传进度视图”吗？

我正在使用 AFNetworking。

/ 莫腾

截屏：

![上传栏照片](../Images/8933800a84a2646a30f3bc0a6e21a1de.png)

如您所见，它是一个简单的 UIView，其中包含一个 UIProgressView。我的问题是如何在每个视图（不同的 UIViewControllers）上显示这个进度视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T02:41:23.013

这个[progressBar](https://github.com/sprint84/WDUploadProgressView)可以做同样的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:50:46.877

您是否使用**ASIHttpRequest**进行上传？

如果是，请查看[Cocoa File Upload with Progress Bar](https://stackoverflow.com/a/4489107/1557663)

**编辑：**

好的，所以使用这个

```
NSURL *url = [NSURL URLWithString:@"http://api-base-url.com"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"avatar.jpg"], 0.5);
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST"   path:@"/upload" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData)     {
[formData appendPartWithFileData:imageData name:@"avatar" fileName:@"avatar.jpg" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];
[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];
[operation start]; 
```

来自[GitHub AFNetworking - 带有进度回调的文件上传](https://github.com/AFNetworking/AFNetworking)

# memory-management - 如何生成绝对代码

> ID：12314520
> 
> 赞同：0
> 
> 时间：2012-09-07T08:33:52.990
> 
> 标签：memory-management, operating-system, memory-address

我已经了解了 Galvin 操作系统概念的内存管理概念，我已经阅读了一个声明：

**如果您在编译时知道进程将驻留在内存中的哪个位置，则可以生成绝对代码。**

在编译时处理器如何知道主内存进程中的哪个内存位置将存储。

有人可以解释一下，如果我们在编译时知道进程将驻留在内存中的哪个位置，那么它的确切含义是什么，因为当程序从准备就绪状态转移到运行状态时分配内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:52:02.347

通常，机器代码不是与位置无关的。为了能够在任意起始地址加载它并在那里运行，需要一些关于机器代码的额外信息（例如，它在哪里拥有指向自身各个部分的地址），因此它可以调整到任意位置。

OTOH，如果代码总是要加载到相同的固定地址，那么您不需要任何额外的信息和处理。

`absolute`他的意思是`fixed`+ `final`，已经调整到适当的地址。

处理器什么都不“知道”。*你*“告诉”它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:50:50.853

我不知道他对“绝对代码”的确切含义，取决于您使用的操作系统，带有代码和数据的程序将被加载到虚拟地址并从那里执行。

除此之外，不是编译器而是链接器设置程序将加载到的地址。

现代操作系统（如 Linux）正在使用地址空间布局随机化来避免在加载每个程序时使用一个静态地址，并避免利用软件缺陷的可能性。

如果您正在编写自己的操作系统，也许[osdev.org](http://wiki.osdev.org/Main_Page) wiki 对您来说可能是一个很好的资源。如果你会读/说德语，我也推荐[lowlevel.eu](http://lowlevel.eu)。

# python - Python 3.2 多处理 NotImplementedError：池对象不能

> ID：12314521
> 
> 赞同：2
> 
> 时间：2012-09-07T08:33:53.833
> 
> 标签：python, python-3.x, multiprocessing, multicore

我不知道为什么，但昨天我正在测试我编写的一些多处理代码，它工作正常。然后今天当我再次检查代码时，它会给我这个错误：

```
Exception in thread Thread-5:
Traceback (most recent call last):
  File "C:\Python32\lib hreading.py", line 740, in _bootstrap_inner
    self.run()
  File "C:\Python32\lib hreading.py", line 693, in run
    self._target(*self._args, **self._kwargs)
  File "C:\Python32\lib\multiprocessing\pool.py", line 342, in _handle_tasks
    put(task)
  File "C:\Python32\lib\multiprocessing\pool.py", line 439, in __reduce__
    'pool objects cannot be passed between processes or pickled'
NotImplementedError: pool objects cannot be passed between processes or pickled 
```

我的代码结构如下：
* 我有 2 个模块，比如 A.py 和 B.py。
* A.py 在其中定义了一个名为 A
的类。 * B.py 同样具有 B 类。
* 在 AI 类中，有一个多处理池作为属性之一。
* 池是在 中定义的`A.__init__()`，但在另一个方法中使用 - run()
* 在`A.run()`我设置了 B 类的一些对象的一些属性（这些对象收集在一个名为 objBList 的列表中），然后我使用`pool.map(processB, objBList)`
* processB() 是一个模块函数（在 A.py 中）接收作为唯一参数（B 的实例）并调用`B.runInput()`
* 错误发生在 pool.map() 行。

基本上在 A.py 中：

```
class A:
   def __init__(self):
      self.pool = multiprocessing.Pool(7)
   def run(self):
      for b in objBList:
         b.inputs = something
      result = self.pool.map(processB, objBList)
      return list(result)
def processB(objB):
   objB.runInputs() 
```

在 B.py 中：

```
class B:
   def runInputs(self):
       do_something() 
```

顺便说一句，由于多处理在 Windows 上的*工作*方式，我不得不使用 processB() 模块函数。

另外我想指出我得到的错误 - 池不能被腌制 - 不应该指代我的代码的任何部分，因为我没有试图向子进程发送任何 Pool 对象。

有任何想法吗？

（PS：我还应该提到，在我测试此功能的两天之间，计算机意外重新启动 - 可能是在安装 Windows 更新之后。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:11:57.843

也许您的 B 类对象包含对您的 A 实例的引用。

# php - 使用 AJAX 提交表单

> ID：12314522
> 
> 赞同：0
> 
> 时间：2012-09-07T08:33:59.157
> 
> 标签：php, forms, codeigniter, jquery

所以这是我在本地主机中的问题。我将搜索参数传递给我的 Home 控制器，例如：

```
<form method="post" action="<?=site_url('home/index');?>"> 
```

当我这样做时，我的 ajax 菜单被正确填充

```
 ----------
SEARCH:| mot    |
        ----------------------------
       | motorcyles ...            |
       | motorhomes ...            |
       | motorola ..               |
       ----------------------------- 
```

.

在我的网络服务器上，提交表单的唯一方法是`<form method="post" action="<?site_url('home/index');?>">`如果我把“=”放在那里，它什么也不做。如果我使用

```
<?php echo site_url('home/index');?>"> 
```

它也不会显示任何内容。

此外，当我在我的网络服务器上输入搜索词时

```
 ----------
 SEARCH:| mot    |
         --------- 
```

没有，没有错误，没有结果。如果我提交表格，我只有在按下提交后才能得到正确的结果。

我的控制器正在从数据库中获取正确的结果，这是我对结果数组进行编码的方式：

```
if ( $this->input-> is_ajax_request())
    {
        $this->output->set_header("Cache-Control: no-cache, must-revalidate");
        $this->output->set_header("Expires:Mon, 4 Apr 1994 04:44:44 GMT");
        $this->output->set_header("Content-type:application/json");

        echo json_encode($results);
        exit();

    }

    else {

        $data['results'] = $results;

         } 
```

我的 js 文件没有错误。我关闭了 CSRF。为什么会这样？

```
$(document).ready(function() {

    var action= $('form').attr('action');
    var results = $('#results');

    function ajax_search(search) {

        $.post(action, {
            search: search
        }, function(data) {

            if(data.length) {

                var el = $('<ul/>');

                $.each(data,function(i,item){
                    $(el).append('<li><span class="Course_Name">' + 
                    item.course_name_highlighted + '</span> &ndash; <span class="FirstName">' + item.FirstName + '</span> &ndash; <span class="LastName">' 
                    + item.LastName + '</span> &ndash; <span class="COURSE_ID">'+item.COURSE_ID +'\n</span></li>');
                });

                $(results).empty().append(el);
            }

            else{
                $(results).empty();
            }
        }, 'json');

    }

    $('#search').keyup(function() {

        var search = $(this).val().replace(/^\s+l\s+$/g, "");

        if(search.length > 1)

        {
            clearTimeout($.data(this, 'timer'));

            var wait = setTimeout(function() 
            {
                ajax_search(search)

            }, 400);

            $.data(this,'timer', wait);
        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:53:21.213

而不是表单提交，您希望结果在 keyup 事件正确后显示（即：当有人键入时）？

尝试

```
$("input[name='search']").on('keyup', function(){

     var $this = $(this),
         results = $("#results"),
         timeout = '';

     // ------ delayed keyup event  ------//

     //reset initial timeout
     if(timeout)
     {
         window.clearTimeout(timeout);
         timeout = NULL;
     }
     // ------Timeout Listener ----- //
     timeout = window.setTimeout(function(){
        //send ajax request
        var searchTerm = $this.val();

     }, 1000);  // listens for when last key has been pressed after 1sec

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:07:16.053

如果您希望在用户键入任何内容时显示结果。用户 jquery ajax 表单提交而不是普通表单提交。

即使在文档加载时也使用 keyup 像：

```
$(document).ready(function() {
var dataString = 'searchword='+ searchbox;
   $(".search").keyup(function() 
      $.ajax({
        type: "POST",
        url: "relative path to file", //this is the file which you normally use with action=""
        data: dataString,
        cache: false,
        success: function(data){
          "do whatever you want with data, example append or prepend data to any div";
        }
        });
      });
   });
}); 
```

并使用带有查询的like语句在您的索引文件上显示结果

```
$q=$_POST['searchword'];

mysql_query("select * from table where fieldname like '%q%' order by fieldname LIMIT 5") or die(mysql_error()); 
```

在此使用 while 语句获取结果之后......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:32:40.533

你想在按键数据，所以把你的 ajax 或 ajax+ jquery 函数 onkeypress 事件。要获取数据，您可以使用 jquery 的 $.post、$.ajax、$.get 方法，或者您可以使用简单的 ajax 函数从中间文件中检索数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T08:46:11.767

jQuery`ajaxSubmit`在这里可能对你很方便。 [http://be.twixt.us/jquery/formSubmission.php](http://be.twixt.us/jquery/formSubmission.php)

或 $("#formId").ajaxSubmit({url: 'xxx.php', type: 'post'})

或 $("#formId").ajaxForm({url: 'xxx.php', type: 'post'})

或者你可以使用 $.post('xxx.php', $('#formId').serialize())

**注意**：$.post 只是 jQuery ajax 的简写，但有一些区别。

# android - android InputMethodService.onKey 和 OnKeyboardActionListener.onkeydown 有什么区别

> ID：12314527
> 
> 赞同：1
> 
> 时间：2012-09-07T08:34:38.717
> 
> 标签：android, ime

InputMethodService.onKey 和 OnKeyboardActionListener.onkeydown 有什么区别

如果我想处理handleCharacter，我需要使用哪种方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:03:56.663

**InputMethodService**提供了一个 InputMethod 的标准实现，它帮助键盘输入数据，用户绘制文本。*OnKeyboardActionListener.onkeydown*用于当您在设备中使用虚拟键盘时，它会针对当时在键盘上触摸的内容执行操作。同样，您可以在操作结束后使用*onkeyup 。处理程序是不同的*[处理程序](http://developer.android.com/reference/android/os/Handler.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:57:25.833

`OnKeyboardActionListener.onkey`我`InputMethodService.onKeyDown`认为。

基本上，你应该使用`OnKeyboardActionListener.onkey`它，它被设计为一个关键事件监听器，你应该实现并覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:23:23.970

我认为 onKeyDown 是硬键监听器，而 onkey 是键盘的监听器

你做了。

# javascript - 基于 ajax 的多个下拉列表显示分页结果

> ID：12314530
> 
> 赞同：0
> 
> 时间：2012-09-07T08:34:48.283
> 
> 标签：javascript, jquery, html, ajax

有 3 个下拉菜单

`select#opt-category,select#opt-sector,select#opt-company`

类别 onchange

```
$("select#opt-category").change(function () {
    category = $(this).val();
    if(sector!='')sector='';
    if(company!='')company='';
    $("#opt-sector").load('menus.php?category='+category);
    $("#opt-company").load('menucmp.php?category='+category);
}); 
```

将根据显示的类别和结果加载部门和公司

```
$(".showgrid").load('portal.php?category='+category+'&sector='+sector+'&company='+company); 
```

结果基于分页，也称为 ajax

```
 function loading_show(){
                $('#loading').html("<img src='assets/img/ajax-loader.gif'/>").fadeIn('slow');
            }
            function loading_hide(){
                $('#loading').fadeOut('slow');
            }                
            function loadData(page,category){
                loading_show(); 

                $.ajax
                ({

                    type: "POST",

                    url: "pagination_data.php",
                    data: {'page':page,'category':category},

                    success: function(msg)
                    {
                        $("#container").ajaxComplete(function(event, request, settings)
                        {
                            loading_hide();
                            $("#container").html(msg);
                        });
                    }
                });
            }

        loadData(1,<?php echo $catgory?> )                // For first time page load default results
            $('#container .pagination li.active').live('click',function(){
                var page = $(this).attr('p');
                var category= $(this).attr('q');
                loadData(page,category);

            });           
            $('#go_btn').live('click',function(){
                var page = parseInt($('.goto').val());
                var category = parseInt($('.total').attr('b'));

                var no_of_pages = parseInt($('.total').attr('a'));
                if(page != 0 && page <= no_of_pages){
                    loadData(page,category);
                }else{
                    alert('Enter a PAGE between 1 and '+no_of_pages);
                    //$('.goto').val("").focus();
                    return false;
                }

            }); 
```

当类别下拉列表更改时，它将新值加载到其他下拉列表中，但无法将结果加载到`.showgrid`.

有没有其他方法可以完成这项任务

# mercurial - 使用 IntelliJ 11 和 Mercurial 时，为什么 VCS 更改会从更改视图中消失？

> ID：12314531
> 
> 赞同：0
> 
> 时间：2012-09-07T08:34:50.973
> 
> 标签：mercurial, intellij-idea

我将 IntelliJ Ultimate 11.1 与捆绑的 HG 插件一起使用。当我更改文件时，它会出现在更改视图中，但当我切换到另一个应用程序时会消失。TortoiseHG 仍然看到变化，即“hg status”显示文件，但 IntelliJ 只是不显示它。

我尝试更改配置选项但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:02:39.223

解决方案是将 IntelliJ 设置为监视存储库根目录而不是源代码根目录。

# c# - 使用 bool FileExists IsolatedStorageFile 找不到数据文件

> ID：12314533
> 
> 赞同：0
> 
> 时间：2012-09-07T08:34:57.473
> 
> 标签：c#, windows, windows-phone-7

我有一个项目，我在项目中添加了一个名为“Test”的数据文件并使用：

```
IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();

if (!isf.FileExists("Test"))
    return;

imgStream = isf.OpenFile("Test", FileMode.Open, FileAccess.Read);

BinaryReader r = new BinaryReader(imgStream);
int count = r.ReadInt32();
for (int i = 0; i < count; ++i)
{
    ..........................
} 
```

调试时，应用程序在项目中找不到数据文件，`!isf.FileExists("Test")`返回true。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:41:52.767

FileExists 确定指定的路径是否引用隔离存储中的现有文件。

如果您之前没有在 IsolatedStorage 中创建文件，它会告诉您该文件不存在。

在 Visual Studio 中添加到项目的文件不会放置在 IsolatedStorage 中。

# .net - 可变前缀，Visual Studio 2010 及更高版本？

> ID：12314535
> 
> 赞同：0
> 
> 时间：2012-09-07T08:35:04.193
> 
> 标签：.net, coding-style, naming-conventions

我对这个问题有点困惑，因为我将变量前缀与现在的过去联系起来，但是随着 Visual Studio 2010 及更高版本（我目前使用的是 2012），人们仍然这样做吗？为什么？

我之所以这么问，是因为如今，您可以将鼠标悬停在任何变量上，它会告诉您变量类型和范围。为了可读性，实际上不需要预先修复。

我的意思是：

```
string strHello
int intHello 
```

等等

而且我在这里偏向于语言/工具 - 因为 Visual Studio 在查看变量的确切类型方面为您做了很多工作，包括在代码中的转换之后。这不是一个“通用编程”问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:47:32.917

重要的一点是变量名“不应该”代表它的类型。相反，它应该指示变量的“业务语义”；变量的类型在代码维护期间会发生变化，但该变量的语义很少改变。

将“ [StyleCop](http://stylecop.codeplex.com/) ”纳入您的开发生命周期可以在团队成员之间强制执行一致的代码样式。

**更新**：摘自“[框架设计指南](https://rads.stackoverflow.com/amzn/click/com/0321246756)”的第 3 章，专门用于“命名指南”，有助于澄清问题：

> 标识符名称应该清楚地说明每个成员的作用以及每个类型和参数代表什么。为此，名称清晰比简短更重要。名称应与场景、系统的逻辑或物理部分以及众所周知的概念相对应，而不是与技术或体系结构相对应。
> 
> 请选择易于阅读的标识符名称。[...]
> 
> 确实有利于可读性而不是简洁。[...]
> 
> 请勿使用下划线、连字符或任何其他非字母数字字符。[...]
> 
> 不要使用匈牙利符号。[...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:40:46.077

我们不再使用匈牙利符号，但是当我编写 GUI 的东西时，我倾向于使用前置或后置控件。例如`lblName`或`nameLabel`的。`tfName`_`nameTextField`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:38:18.463

在变量名称前加上其类型的指示称为匈牙利符号（例如 strName）。过去经常做错事，现在通常不鼓励这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T08:38:47.543

如果您指的是[匈牙利符号](http://en.wikipedia.org/wiki/Hungarian_notation)，是的，它已成为过去，并且不再被任何人推荐（据我所知）。请参阅[MSDN 命名约定](http://msdn.microsoft.com/en-us/library/ms229045%28v=vs.100%29.aspx)。

但是，许多人喜欢在字段名称中添加前缀，以将它们与局部变量和参数区分开来。我个人在字段名称前加上“_”。

# ios - iOS 可视化

> ID：12314549
> 
> 赞同：0
> 
> 时间：2012-09-07T08:36:05.363
> 
> 标签：ios, visualization

我最近发现[了一个](http://www.youtube.com/watch?v=GgC48D3zRyU)名为 Atoms in Motion 的应用程序，我想在不同的应用程序中使用相同类型的可视化，有人知道如何进行实时可视化，或者对我可以使用的语言有任何建议吗？这个？用户需要能够与应用程序交互，例如在 Atoms in Motion 中，您可以滑动手指来增加温度。

为任何帮助而欢呼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:44:21.507

[http://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls](http://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls)

简单来说，

1) 下载[cocos2d-iphone](http://www.cocos2d-iphone.org)

2）使用花栗鼠或box2d（都包含在cocos2d-iphone中）来模拟你需要的机制。

# javascript-events - 为 html5 视频播放器设置屏幕分辨率

> ID：12314551
> 
> 赞同：0
> 
> 时间：2012-09-07T08:36:25.520
> 
> 标签：javascript-events

我需要 api 在 javascript 中查找屏幕分辨率，然后将其传递给 html5 视频播放器。我试过 //document.write(screen.width+'x'+screen.height); 但它不适合我。

# android - android中的文本到视觉动画

> ID：12314554
> 
> 赞同：1
> 
> 时间：2012-09-07T08:36:47.857
> 
> 标签：android

我有一个 android 应用程序，我想在其中动画/可视化文本到语音。就像当应用程序说出文本时，应用程序也会根据语音数据闪烁灯光。

数据以文本形式提供，我将使用 android 的文本到语音将其转换为语音。视觉表示就像一些基于语音闪烁的 LED。

有人可以请我指导如何提取语音数据（要提取哪些特征），然后如何将其映射到一些视觉动画？

谢谢，艾哈迈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T11:57:59.797

对于可视化，您将使用[可视化器类](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)。这将捕获音频输出并允许您直观地表示它。我认为对于文本到语音，您最好只使用现有引擎。如果您不喜欢股票引擎，Ivona 和 SVOX 是两个不错的选择。

# c# - 使用C#读取文本文件时如何删除空行

> ID：12314555
> 
> 赞同：-3
> 
> 时间：2012-09-07T08:36:48.983
> 
> 标签：c#

我有文本文件并使用流阅读器读取它，当我的文件与数据一起有空行时，它不会读取任何内容。如何使用 C# 删除空行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T08:40:22.897

您没有显示任何代码，并且您的描述非常模糊，但是从 .NET 4 开始，这将是一种非常简单的方法来做您想做的事情：

```
IEnumerable<string> lines = File.ReadLines().Where(line => line != ""); 
```

请注意，它不会执行任何修剪，因此仍会返回仅包含空格的行。

另请注意，当您只执行该行时，上面的代码*不会*读取文件 - 它只会在您尝试迭代时读取它，并且*每次*迭代时`lines`都会再次读取它。如果您想一口气将其读入内存，您可能需要：*`lines`*

 *```
List<string> lines = File.ReadLines().Where(line => line != "").ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:41:21.863

好吧，您应该在循环中使用 StreamReader 中的方法“ReadLine()”。当您收到一个空行时，只需检查从 ReadLine() 获得的字符串是否为空。如果是，请忽略该行。尝试类似：

```
 StreamReader input = new StreamReader("...");
    String line = null;

    do 
    {
    line = input.ReadLine();

    if (line == null)
    {
    return;
    }

    if (line == String.Empty)
    {
    continue;
    }

    // Here you process the non-empty line

    } while (true); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T08:42:06.933

下面是代码：

```
private void ReadFile()
{
    try
    {
        string line = null;
        System.IO.TextReader readFile = new StreamReader("C:\\csharp.net-informations.txt");
        while (true)
        {
            line = readFile.ReadLine();
            if (line != null)
            {
                MessageBox.Show(line);
            }
        }
        readFile.Close();
        readFile = null;
    }
    catch (IOException ex)
    {
        MessageBox.Show(ex.ToString());
    }
} 
```*

# java - 从 java 运行 Vasco OTP exe 并获取在我的应用程序中使用的生成 OTP

> ID：12314560
> 
> 赞同：1
> 
> 时间：2012-09-07T08:37:19.717
> 
> 标签：java, testing, web-applications

我正在使用 TESTNG 为我的 Web 应用程序编写自动化测试用例，我的 Web 应用程序要求用户在应用程序的第二页上输入 OTP，而使用 TESTNG 自动执行相同的测试我没有找到如何读取生成的 OTP 并通过它的方法到我的测试用例。

我可以使用 Java 运行时类打开 Vasco OTP，但之后我需要传递序列号，然后单击生成按钮以生成生成的 OTP，稍后需要将其传递给我的 Web 应用程序。

# ios - 用不同的类型重新定义

> ID：12314564
> 
> 赞同：3
> 
> 时间：2012-09-07T08:37:43.287
> 
> 标签：ios

我在使用这段代码时遇到了问题：

```
 for (int i = 0; i < [tempInviteeArray count]; i++)
    {
        NSArray *tempContact = [tempInviteeArray objectAtIndex:i];
        NSDictionary *tempContactDictionary = [tempContact objectAtIndex:1];
        int tempContactDelay = [[tempContact objectAtIndex:2] intValue];

        FlokContact *tempContact = [[FlokContact alloc] initWithJSONData:tempContactDictionary andDelay:tempContactDelay];

    } 
```

最后一行抛出一个错误：

```
 "Redefinition of 'tempContact' with a different type 
```

initWithJSONData: 接受 NSDictionary andDelay: int

我试图用不同的类型重写这段代码，我只是不确定我在做什么

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T08:39:18.637

您已经在此范围内声明了一个名为`tempContact`( `NSArray *tempContact...`) 的变量。更改其中之一的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:41:52.237

NSArray *tempContact 和 FlokContact *tempContact 具有相同的名称，这就是问题所在。

将 FlokContact *tempContact更改**为 FlokContact *temp_Contact**或您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:02:11.230

**尝试这个**

```
for (int i = 0; i < [tempInviteeArray count]; i++)
{
NSArray *tempContact = [tempInviteeArray objectAtIndex:i];
NSDictionary *tempContactDictionary = [tempContact objectAtIndex:1];
int tempContactDelay = [[tempContact objectAtIndex:2] intValue];
  {

 FlokContact *tempContact = [[FlokContact alloc] initWithJSONData:tempContactDictionary andDelay:tempContactDelay];

  }

} 
```

# php - Doctronie 2 ODM MongoDB 注释中的排序

> ID：12314570
> 
> 赞同：0
> 
> 时间：2012-09-07T08:38:21.647
> 
> 标签：php, symfony, doctrine-odm

我尝试直接使用注释对查询进行排序，因为它是由 ORM 和 MongoDB 完成的。

```
/**
 * @ORM\OrderBy({"position" = "ASC"})
 */ 
```

我使用一个`@MongoDB\ReferenceMany`：

```
class page{
  /**
   * @MongoDB\ReferenceMany(
   *     targetDocument="Project\PageBundle\Document\Contenu",
   *     cascade="all",
   *     sort={"position"="ASC"}
   * )
   */
  $protected contenus;
  public function getContenus(){
      return $this->contenus;
  }
} 
```

当我`$page->getContenus();`拨打电话时，MongoDB 查询正在运行，但列表未排序。我清除了缓存，但没有帮助。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:48:16.220

谢谢杰米萨瑟兰它的工作。我应该添加mappedBy。

# r - 在r中使用ggplot2在条形图部分之间划分线

> ID：12314584
> 
> 赞同：2
> 
> 时间：2012-09-07T08:39:19.243
> 
> 标签：r, plot, ggplot2

我正在使用 qplot 创建堆积条形图，并希望在每个条形的部分之间放置一条白线，因为蓝调似乎几乎融合在一起。我不想更改我现有的配色方案来解决问题。有任何想法吗？

```
library(ggplot2)
qplot(carat, data = diamonds, geom = "histogram", fill = color) 
```

![在此处输入图像描述](../Images/fee051cbedafe881680c408e6033d7b6.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T08:46:17.297

添加参数`colour="white"`以创建白色轮廓：

```
ggplot(mtcars, aes(factor(cyl), fill=am, group=am)) + geom_bar(colour="white") 
```

![在此处输入图像描述](../Images/eaa93c30be4b29cd93d32ca779b87c7b.png)

* * *

这是从图例中删除对角线的解决方法（灵感来自[ggplot mailing list 上](https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/vJnF9_HBqx4)的帖子）。这个想法是绘制`geom_bar`两次，一次抑制颜色：

```
ggplot(mtcars, aes(factor(cyl), fill=am, group=am)) + 
  geom_bar() +
  geom_bar(colour="white", show_guide=FALSE) 
```

![在此处输入图像描述](../Images/3867a21d62bf2e74e6f571907c3c9d2f.png)

# nginx - nginx + uwsgi + debian + 守护进程

> ID：12314585
> 
> 赞同：4
> 
> 时间：2012-09-07T08:39:20.663
> 
> 标签：nginx, debian, flask, daemon, uwsgi

好吧，首先，这些只是我遵循的一些教程：

```
projects.unbit.it/uwsgi/wiki/Doc
projects.unbit.it/uwsgi/wiki/Install
projects.unbit.it/uwsgi/wiki/RunOnNginx
projects.unbit.it/uwsgi/wiki/Quickstart 
```

实际上，这个应该刚刚工作，因为它是婴儿步骤..对吗？ [http://library.linode.com/web-servers/nginx/python-uwsgi/debian-6-squeeze](http://library.linode.com/web-servers/nginx/python-uwsgi/debian-6-squeeze) wrong...=[他们的uwsgi守护进程“starter”根本不起作用...

现在，如果我从命令行运行 uwsgi，我可以得到一个简单的 hello world 工作，一个简单的例子：

```
uwsgi -s 127.0.0.1:9001 --wsgi-file /home/www/test/application/wsgi_configuration_module.py 
```

这是一种可取的，一种不是.. 我喜欢的是：它可以工作，但它不是一个守护进程，所以它像这样运行：http: [//i.imgur.com/MUSM4.jpg](http://i.imgur.com/MUSM4.jpg) 存在的问题：我不能做任何其他事情，它需要我手动启动它，它只能运行一个 hello world 脚本......当我设置一个快速的 nginx + php-fpm 时，我可以很容易地让它在套接字上运行例如/tmp/php.sock，我可以很容易地让nginx将php url发送到那个套接字，所以php-fpm可以处理我所有的php需求......

我想做的事：

启动时自动启动 uwsgi

让它与 nginx 一起工作

让 nginx 通过 uwsgi 发送 python 脚本，使其正常工作

让烧瓶工作的uwsgi？（之后..一切）

谁能帮我这个？我很精明，我需要几次才能弄清楚一些事情，而且我已经关闭了 nginx.. 我用 php-fpm 很好地完成了它，但我根本无法让 python 工作...而且我有多个虚拟机用于完全安装错误的东西并需要重新开始，所以如果有人想试一试，请成为我的客人..感谢任何帮助/链接/提示等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:25:41.917

您可以考虑使用[http://supervisord.org/](http://supervisord.org/)来管理您的流程。至于为您的应用程序提供服务，我只熟悉通过 Python 调用 WSGI 服务器的安排。Flask 文档会让您使用 gevent，例如：

```
from gevent.wsgi import WSGIServer
from yourapplication import app

http_server = WSGIServer(('', 5000), app)
http_server.serve_forever() 
```

如果您没有特定的理由将 uWSGI 用作应用程序服务器，我发现此设置要容易得多。nginx 只需要充当代理。如果需要 uWSGI，Flask 文档有一个关于 nginx 配置的部分，尽管我想你已经检查过了。如果没有： http: [//flask.pocoo.org/docs/deploying/uwsgi/#configuring-nginx](http://flask.pocoo.org/docs/deploying/uwsgi/#configuring-nginx)

# javascript - 从页面中隐藏的代码部分获取 HTML

> ID：12314592
> 
> 赞同：0
> 
> 时间：2012-09-07T08:40:06.653
> 
> 标签：javascript, jquery, ajax, yql

标题有点混乱，所以让我更好地解释一下我遇到的问题。

我需要从页面中提取 HTML 的特定部分。这部分代码位于默认情况下隐藏“页面加载”的 div 内。您必须单击该 div 才能显示该部分代码。

现在，我需要使用带有对页面的纯 AJAX 请求或 YQL 的 javascript/jquery 脚本获取此代码，但问题是：如何“模拟”该 div 上的点击？

如何仅使用代码切换该 div 以访问其中的代码？

顺便说一句，请求来自同一个域，所以跨域 AJAX 没有问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:26:08.863

据我了解，如果您这样做， `$('#hiddenElementID').html()`将返回它的内容，或者即使`$('#hiddenElementID').text()`它是否隐藏。

但是如果你真的必须模拟点击然后做`$('#hiddenElementID').click()`

并切换使用您自己的功能并执行`$('#hiddenElementID').hide()` 和`$('#hiddenElementID').show()`

或使用`$('#hiddenElementID').toggle()`

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:52:55.070

也许你应该试试 Ajax`success:event`

```
function(data){
   //Convert Data to jQuery Object
   var element = $(data);
   element.find('#HiddenDiv').show();
} 
```

因为操纵 DOM 元素触发 Fake Event 是个坏主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:44:17.557

您可以使用 Jquery .click

```
$("#Id_Of_the_Div_you_want_to_click").click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T08:44:01.050

您可以像这样模拟点击事件：

```
$("#div").click() 
```

在我看来，您正试图从另一个页面获取数据。数据在点击事件后编译。您可以尝试以下方法：

*   AJAX 获取包含所需数据的页面
*   将页面呈现为隐藏`iframe`在您的页面中
*   模拟嵌套页面的点击事件产生数据
*   访问您想要的位并丢弃`iframe`内容。

如果以后有时间，我会自己尝试一下，看看是否可以完成。

# c# - 从无到有在 Nhibernate 中创建模式

> ID：12314594
> 
> 赞同：2
> 
> 时间：2012-09-07T08:40:10.770
> 
> 标签：c#, nhibernate, fluent-nhibernate

如果不存在，我想自动创建模式。目前我使用此代码创建架构：

```
new SchemaExport(_configuration)
           .SetDelimiter(";").SetOutputFile("schema.sql").Create(true, true); 
```

但我有两个问题：

1）它需要有一个空的模式才能工作。如果我给它一次使用的管理员凭据，我希望它为自己创建一个空的架构和用户。

2）我希望它只有在它为空或过时时才创建模式。是否可以为此进行休眠检查？当然，在模式过时的情况下，我需要一种方法来询问用户是否重新生成模式和松散数据。

我正在使用 MySql 5，但我希望这可以在不绑定到具体数据库提供程序的情况下实现。

**更新**：用户只需安装 MySql 并在安装时输入一些管理员凭据。之后他可以运行我的应用程序，它应该通过询问用户的管理员凭据来创建自己的架构、用户和分配权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:02:38.863

我在这里回答了一个非常[相似的问题](https://stackoverflow.com/a/914584/27343)。

您必须自己检查数据库是否为空，并在必要时创建它。还有一个 ValidateSchema 方法来检查模式是否对应于实际的映射定义。其他一切都是您自己的代码。

用户和权限也可以作为[数据库对象](http://nhforge.org/blogs/nhibernate/archive/2009/04/16/nhibernate-mapping-lt-database-object-gt.aspx)安装在映射文件中。

# android - 不在 Playstore 中时更新 Android 应用程序

> ID：12314595
> 
> 赞同：-1
> 
> 时间：2012-09-07T08:40:12.923
> 
> 标签：android

如果应用程序未放置在 Google Market Place 中，我如何通知用户可以更新应用程序？有什么方法可以通过应用程序通知用户有一些更新可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:48:56.190

为此目的使用 GCM。更多详情 [http://developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)

# android - listview 没有在带有 viewpager 选项卡的片段中刷新

> ID：12314600
> 
> 赞同：5
> 
> 时间：2012-09-07T08:40:25.250
> 
> 标签：android, listview, tabs, android-viewpager, fragment

我陷入了与在 jakewharton 的 Android-ViewPagerIndicator... github 上的示例中给出的 viewpager 样式选项卡中的片段一起使用的 listview 的问题。

我为三个选项卡使用相同的库，每个选项卡都有一个列表视图，其中设置了相同的 arraylist 适配器。

我正在使用 3 个这种片段，它们都工作正常，但是当我对其中任何一个片段进行更改时，我希望我的列表在所有其他片段中更新，它并没有反映这些更改。我想如果我在三个选项卡中的任何一个列表中选中了一个复选框（我正在更新 db 和我的数组列表中的值），它们各自片段中的其他两个列表视图应该反映更改，请帮助我。请帮助我，任何帮助将不胜感激

```
class RingFragment extends Fragment
{
 public static RingFragment newInstance(Context c, ArrayList<Ringtones> ringList) 
 {
  RingFragment fragment = new RingFragment();
  cCntxt = c;
  return fragment;
 }
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle        
savedInstanceState)
 {
  rngAdapter = new RingAdapter(cCntxt, ringFragList);
  lstRingtones = new ListView(cCntxt);
  lstRingtones.setLayoutParams(new    LayoutParams(LayoutParams.FILL_PARENT, 
  LayoutParams.FILL_PARENT));
  lstRingtones.setAdapter(rngAdapter);
  LinearLayout layout = new LinearLayout(getActivity());
  layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,  
  LayoutParams.FILL_PARENT));
  layout.setGravity(Gravity.CENTER);
  layout.addView(lstRingtones);
  return layout;
 }
 public class RingAdapter extends BaseAdapter
 {
    ArrayList<Ringtones> arlstRingAdpter;
    Context adptrContext;
    public boolean noRing = false;
    public RingAdapter(Context c, ArrayList<Ringtones> adptrRngtones)
    {
        arlstRingAdpter = adptrRngtones;
        adptrContext = c;
    }       
   @Override
public int getCount() 
{
  return arlstRingAdpter.size();
}
@Override
public Object getItem(int position) 
{
 return position;
}
@Override
public long getItemId(int position) 
{
 return position;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
 View view = convertView;
 final Wrapper wrapper;
     if (view == null) 
 {
     view = (RelativeLayout)LayoutInflater.from(cCntxt).inflate(R.layout.cell_ringtone,     
      null);
 wrapper = new Wrapper(view);
 view.setTag(wrapper);
}
else 
{
 wrapper = (Wrapper) view.getTag();
}
 return view;
}
 }  
 }
 } 
```

:->我调用这些片段的主要活动是

```
public class MainActivity extends FragmentActivity
 {
   ViewPager mPager;
   PageIndicator mIndicator;
MusicAdapter mAdapter;
RingtonesBL rngBL;
  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mAdapter = new MusicAdapter(getSupportFragmentManager());
    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);
    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
  }
class MusicAdapter extends RingtoneFragmentAdapter 
{
 public MusicAdapter(FragmentManager fm) 
 {
  super(fm);
 } 
 @Override
 public Fragment getItem(int position) 
 {
 if(position % CONTENT.length == 0)
 {
  return             
  RingFragment.newInstance(AppConstants.cAppContext,AppConstants.arlst_RingAll);
 }
 else if(position % CONTENT.length == 1)
 {
  return RingFragment1.newInstance(AppConstants.cAppContext, 
  AppConstants.arlst_RingCart);
 }
 else
 {
  return RingFragment2.newInstance(AppConstants.cAppContext, 
  AppConstants.arlst_RingPurchased);
 }
 }
 public int getItemPosition(Object object) 
 {
  return POSITION_NONE;
 }
 @Override
 public int getCount() 
 {
   return CONTENT.length;
 }
  @Override
  public CharSequence getPageTitle(int position) 
  {
    return CONTENT[position % CONTENT.length].toUpperCase();
  }
 }
} 
```

activity_main.xml 只有

```
 <com.ringtone.TabPageIndicator
    android:id="@+id/indicator"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    />
<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/indicator"
    >
    </android.support.v4.view.ViewPager> 
```

请告诉我如何在更改任何一个片段时通知其他片段列表视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T16:26:13.087

请尝试从这个分支中做一些事情：例如：

```
else 
{
 wrapper = (Wrapper) view.getTag();
}

wrapper.txtText.setText("Refreshed");

return view;
} 
```

# php - 在 PHP 中使用 shell_exec 进行 ftp

> ID：12314603
> 
> 赞同：1
> 
> 时间：2012-09-07T08:40:39.883
> 
> 标签：php, ftp, batch-file, shell-exec

我只能使用 shell_exec 命令将文件 FTP 到另一台服务器。这是由于共享服务器 fastCGI 超时造成的。所以，不，我不能使用任何其他命令。

我该如何实施？我在 DOS 窗口中测试我的 PC 上的脚本，它可以工作，但在服务器上使用代码：

```
$output = shell_exec('ftp -s:ftpscript.txt');
echo "<pre>$output</pre>"; 
```

我收到以下错误：

```
ftp: s: unknown option 
```

批处理文件是：

```
open ftp.server.com
usernamex
passwordx
hash
cd incoming
binary
ls 
```

有任何想法吗？

背景：我正在使用 PHP 将文件上传到 Amazon AWS Glacier，但由于 fastCGI (?) 超时，大文件 (750Mb) 超时并报告 500 Internal Server 错误。我需要找到一种使用 FTP 上传大文件的方法。

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:10:20.700

在 *nix 上，`ftp://`包装器的使用不应导致超时，因为花在流操作上的时间不应计入脚本的时间限制。尝试在脚本顶部调用`set_time_limit(0);`以防止脚本超时。

[参考](http://php.net/manual/en/function.set-time-limit.php)：

> **笔记：**
> 
> `set_time_limit()`函数和配置指令`max_execution_time`只影响脚本本身的执行时间。在确定脚本运行的最长时间时，不包括在脚本执行之外发生的任何活动所花费的时间，例如系统调用 using `system()`、流操作、数据库查询等。在测量时间是真实的 Windows 上，情况并非如此。

还应该注意的是，通过 FTP 从通过 HTTP 调用的脚本传输 750MB 文件并不是一个好的解决方案，因为在传输完成时浏览器需要保持打开状态。您可能应该做的是使用 cron 作业来执行传输，或者使用 HTTP 请求来异步启动传输。

如果这对您来说不是一个可行的解决方案，那么您在使用该`shell_exec()`方法时遇到的问题是 Windows 和 *nix FTP 程序之间的差异。

您的服务器是否有命令行 cURL 二进制文件？如果它可用，这将是一个更好的选择，因为无论平台如何，接口都是标准的。此外，您不需要使用脚本，您可以使用命令行参数完成几乎任何事情。

例如上面的代码可以压缩成这个命令：

```
$output = shell_exec('curl ftp://usernamex:passwordx@ftp.server.com/incoming/');
echo "<pre>$output</pre>"; 
```

这会忽略`hash`脚本中的命令，但如果您的目标是以编程方式获取目录列表，则不需要此选项。

您可以在[此处](http://curl.haxx.se/download.html)获取用于在本地服务器上进行测试的 Windows cURL 二进制文件。我可能会建议您使用像这样标记的文件（它在页面下方很长）：

```
Win32   7.27.0  binary  SSL SSH Dirk Paehl 
```

可以在[此处](http://curl.haxx.se/docs/manpage.html)找到使用 cURL 命令行二进制文件的完整文档。

# trigger.io - 在应用程序中找不到 Trigger.io index.html（ios、android 模拟器）

> ID：12314607
> 
> 赞同：1
> 
> 时间：2012-09-07T08:40:50.677
> 
> 标签：trigger.io

在 android 和 ios 上运行我的应用程序时遇到问题。当我运行我的应用程序时，模拟器运行良好，但模拟器设备说项目中没有 index.html 时有。不确定从哪里开始调试。我团队中的其他人都可以加载应用程序，但我除外。我已经尝试完全重新安装 TriggerToolkit，但无法到达任何地方。在 ios 模拟器运行时，日志中不会出现任何错误，只会在模拟器中弹出一条消息“在应用程序中发现错误没有 index.html。移动应用程序需要 index.html”。

当我跑步时，`forge build ios`我得到了这个：

```
[   INFO] Forge tools running at version 3.3.11
[   INFO] Update result: you already have the latest tools
[   INFO] Configuration is unchanged: using existing templates
[  ERROR] Failed to parse command line arguments at ios 
```

当我跑步时，`forge build android`我得到了这个：

```
[   INFO] Forge tools running at version 3.3.11
[   INFO] Update result: you already have the latest tools
[   INFO] Configuration is unchanged: using existing templates
[  ERROR] Failed to parse command line arguments at android 
```

有一种感觉，这是因为我在一个协作的环境中工作，有些东西正在被破坏，只是不确定是什么。

我正在使用这种方法进行协作：[如何将另一个协作者添加到我的 trigger.io 项目？](https://stackoverflow.com/questions/10822272/how-can-i-add-another-collaborator-to-my-trigger-io-project#framed-by-olark)

# ajax - 比较源代码

> ID：12314608
> 
> 赞同：2
> 
> 时间：2012-09-07T08:40:52.067
> 
> 标签：ajax, jsf

我是 JSF 的新手。我正在创建一个带有复选框和只读字段的简单页面。当我部署到 weblogic 服务器时，我得到了预期的输出。现在，我已将自动提交属性放在复选框上，并将部分触发属性放在另一个只读字段上。我的只读字段在更改复选框状态时按预期更改。我很想知道当我声明自动时在最终呈现的页面中放入了哪些 Ajax 代码将属性提交为true。基本上我想知道启用和禁用自动提交属性的情况之间的html和ajax（javascript）代码区别是什么。有没有可以比较两个源代码的工具？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:19:16.507

[由于您的 JSF 组件工具包的相关 Javascript 文件可能已被缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)，因此可能很难看到代码中的确切差异，但是您至少应该能够看到生成`input`元素上 Javascript 事件声明的差异。

像[Firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)这样的工具是最佳选择，因为它使您能够突出显示 DOM 元素并查看它们相应的样式、属性和事件。它还兼作出色的 Javascript 调试器，允许您在 JS 代码中放置断点，以便您可以遍历每个点击事件的执行情况。

当`autoSubmit`为 false 时，可能没有触发 Javascript 事件。但是，当它为真时，可能会`onclick`触发一个正在制定 Ajax 请求的事件。你可能很难弄清楚发生了什么，因为它被缩小了，但它很可能会做出这样的调用。

[http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/js-api/symbols/jsf.ajax.html](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/js-api/symbols/jsf.ajax.html)

# php - PHP if 和语句

> ID：12314611
> 
> 赞同：-3
> 
> 时间：2012-09-07T08:40:57.003
> 
> 标签：php

我正在尝试添加一个“if and”语句，但无法使其正常工作。

```
else if($iamonly == 'Other - ' && trim($othertype == '')) {
    echo '<div class="error_message">Error! You selected "Other"</div>'; 
```

如果`$iamonly`字段是“其他”并且我在`$othertype`字段中输入数据，我仍然会收到错误消息。请有人能告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:42:19.620

`trim`只有变量：

```
if($iamonly == 'Other - ' && trim($othertype) == '') { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:42:11.230

这个：

```
else if($iamonly == 'Other - ' && trim($othertype == '')) {
    echo '<div class="error_message">Error! You selected "Other"</div>'; 
```

应该是这样的：

```
else if($iamonly == 'Other - ' && trim($othertype) == '') {
    echo '<div class="error_message">Error! You selected "Other"</div>'; 
```

# jquery - jQuery在输入字段中输入6个字符后显示div

> ID：12314612
> 
> 赞同：1
> 
> 时间：2012-09-07T08:41:03.237
> 
> 标签：jquery, regex

我通常会在我尝试过的代码中包含相当数量的代码，但是对于这个我真的不知道从哪里开始。

长话短说，我需要`<div>`在一个字段中输入 6 个数字后显示一个（或任何其他元素）`<input>`，我还需要修剪空白，所以如果有人输入 2 个空格（或 2 个字母）在`<div>`他们输入 6 个数字之前不会显示。

我知道如何做其他所有事情我只是不确定如何检查输入是否包含 6 个数字，剥离所有其他字符。

我猜我需要某种正则表达式？！？

如果有人可以在正确的方向上轻推我，我可以在我尝试过某些事情后用更多信息更新问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:46:40.137

尝试这个：

```
$('input').keyup(function(){
   var len = this.value.match(/\d/g).length;
   if (len === 6) {
       // do something
   } 
}) 
```

[http://jsfiddle.net/ZY4cf/](http://jsfiddle.net/ZY4cf/)

# asp.net-mvc-3 - 如何在 MVC3 View(Razor) 中编写会话？

> ID：12314613
> 
> 赞同：0
> 
> 时间：2012-09-07T08:41:05.200
> 
> 标签：asp.net-mvc-3, views

嗨朋友我如何在 mvc 视图中获取会话值。

我需要这样写

```
 @Html.ActionLink("Upload Images", "IndexBib", "Cataloging", new { Area = "Cataloging" },new {//session value for id parm//) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:44:00.493

```
@HttpContext.Current.Session["ID"].ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:44:19.880

嗨，你可以这样做

```
@Html.ActionLink("Upload Images", "IndexBib", "Cataloging", new { Area = "Cataloging", id = (string)Session["param"]}, null) 
```

# javascript - 如何使用 javascript 更改背景图像及其属性

> ID：12314614
> 
> 赞同：1
> 
> 时间：2012-09-07T08:41:05.613
> 
> 标签：javascript, css

我如何不仅可以更改背景图像，还可以设置其他属性？

意思是，我有这段代码，可以正常工作：

```
document.getElementById(id).style.backgroundImage = "url('image.png')"; 
```

但这失败了：

```
document.getElementById(id).style.backgroundImage = "url('image.png') no-repeat center center"; 
```

如何向其中添加其他属性？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:45:37.217

附加属性是 CSS 中捷径的一部分，这些属性是使用`background`属性应用的，因此您的 js 应该是

```
document.getElementById(id).style.background = "url('image.png') no-repeat center center"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:44:09.217

`document.getElementById("div3").style.backgroundPosition = "20% 50%";`- 对于位置

```
document.getElementById("div3").style.backgroundRepeat = "repeat-y"; - for repeat 
```

这对你有用

# css - 是否可以使用 htaccess 压缩 LESS CSS 文件？（以及如何做？）

> ID：12314617
> 
> 赞同：8
> 
> 时间：2012-09-07T08:41:17.713
> 
> 标签：css, .htaccess, compression, less

我在我的项目中使用较少的 css，并且 YSlow 告诉我我的 .less 文件是 nod GZip 压缩的。

我的所有其他文件（js、html 和事件 CSS 文件，如果我包含一些...）都经过良好编码，但不是 LESS 文件。

这是我的 .htaccess ：

```
# Apache configuration file
# httpd.apache.org/docs/2.2/mod/quickreference.html

# Note .htaccess files are an overhead, this logic should be in your Apache config if possible
# httpd.apache.org/docs/2.2/howto/htaccess.html

# Techniques in here adapted from all over, including:
#   Kroc Camen: camendesign.com/.htaccess
#   perishablepress.com/press/2006/01/10/stupid-htaccess-tricks/
#   Sample .htaccess file of CMS MODx: modxcms.com

###
### If you run a webserver other than Apache, consider:
### github.com/h5bp/server-configs
###

# ----------------------------------------------------------------------
# Better website experience for IE users
# ----------------------------------------------------------------------

# Force the latest IE version, in various cases when it may fall back to IE7 mode
#  github.com/rails/rails/commit/123eb25#commitcomment-118920
# Use ChromeFrame if it's installed for a better experience for the poor IE folk

<IfModule mod_headers.c>
  Header set X-UA-Compatible "IE=Edge,chrome=1"
  # mod_headers can't match by content-type, but we don't want to send this header on *everything*...
  <FilesMatch "\.(js|css|less|gif|png|jpe?g|pdf|xml|oga|ogg|m4a|ogv|mp4|m4v|webm|svg|svgz|eot|ttf|otf|woff|ico|webp|appcache|manifest|htc|crx|oex|xpi|safariextz|vcf)$" >
    Header unset X-UA-Compatible
  </FilesMatch>
</IfModule>

# ----------------------------------------------------------------------
# Cross-domain AJAX requests
# ----------------------------------------------------------------------

# Serve cross-domain Ajax requests, disabled by default.
# enable-cors.org
# code.google.com/p/html5security/wiki/CrossOriginRequestSecurity

#  <IfModule mod_headers.c>
#    Header set Access-Control-Allow-Origin "*"
#  </IfModule>

# ----------------------------------------------------------------------
# CORS-enabled images (@crossorigin)
# ----------------------------------------------------------------------

# Send CORS headers if browsers request them; enabled by default for images.
# developer.mozilla.org/en/CORS_Enabled_Image
# blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html
# hacks.mozilla.org/2011/11/using-cors-to-load-webgl-textures-from-cross-domain-images/
# wiki.mozilla.org/Security/Reviews/crossoriginAttribute

<IfModule mod_setenvif.c>
  <IfModule mod_headers.c>
    # mod_headers, y u no match by Content-Type?!
    <FilesMatch "\.(gif|png|jpe?g|svg|svgz|ico|webp)$">
      SetEnvIf Origin ":" IS_CORS
      Header set Access-Control-Allow-Origin "*" env=IS_CORS
    </FilesMatch>
  </IfModule>
</IfModule>

# ----------------------------------------------------------------------
# Webfont access
# ----------------------------------------------------------------------

# Allow access from all domains for webfonts.
# Alternatively you could only whitelist your
# subdomains like "subdomain.example.com".

<IfModule mod_headers.c>
  <FilesMatch "\.(ttf|ttc|otf|eot|woff|font.css)$">
    Header set Access-Control-Allow-Origin "*"
  </FilesMatch>
</IfModule>

# ----------------------------------------------------------------------
# Proper MIME type for all files
# ----------------------------------------------------------------------

# CSS
AddType text/css         css less

# JavaScript
#   Normalize to standard type (it's sniffed in IE anyways)
#   tools.ietf.org/html/rfc4329#section-7.2
AddType application/javascript         js

# Audio
AddType audio/ogg                      oga ogg
AddType audio/mp4                      m4a

# Video
AddType video/ogg                      ogv
AddType video/mp4                      mp4 m4v
AddType video/webm                     webm

# SVG
#   Required for svg webfonts on iPad
#   twitter.com/FontSquirrel/status/14855840545
AddType     image/svg+xml              svg svgz
AddEncoding gzip                       svgz

# Webfonts
AddType application/vnd.ms-fontobject  eot
AddType application/x-font-ttf         ttf ttc
AddType font/opentype                  otf
AddType application/x-font-woff        woff

# Assorted types
AddType image/x-icon                        ico
AddType image/webp                          webp
AddType text/cache-manifest                 appcache manifest
AddType text/x-component                    htc
AddType application/x-chrome-extension      crx
AddType application/x-opera-extension       oex
AddType application/x-xpinstall             xpi
AddType application/octet-stream            safariextz
AddType application/x-web-app-manifest+json webapp
AddType text/x-vcard                        vcf

# ----------------------------------------------------------------------
# Allow concatenation from within specific js and css files
# ----------------------------------------------------------------------

# e.g. Inside of script.combined.js you could have
#   <!--#include file="libs/jquery-1.5.0.min.js" -->
#   <!--#include file="plugins/jquery.idletimer.js" -->
# and they would be included into this single file.

# This is not in use in the boilerplate as it stands. You may
# choose to name your files in this way for this advantage or
# concatenate and minify them manually.
# Disabled by default.

#<FilesMatch "\.combined\.js$">
#  Options +Includes
#  AddOutputFilterByType INCLUDES application/javascript application/json
#  SetOutputFilter INCLUDES
#</FilesMatch>
#<FilesMatch "\.combined\.css$">
#  Options +Includes
#  AddOutputFilterByType INCLUDES text/css
#  SetOutputFilter INCLUDES
#</FilesMatch>

# ----------------------------------------------------------------------
# Gzip compression
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # HTML, TXT, CSS, JavaScript, JSON, XML, HTC:
  <IfModule filter_module>
    FilterDeclare   COMPRESS
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/html
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/css
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/plain
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/x-component
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/javascript
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/json
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xhtml+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/rss+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/atom+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/vnd.ms-fontobject
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/svg+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/x-icon
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/x-font-ttf
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $font/opentype
    FilterChain     COMPRESS
    FilterProtocol  COMPRESS  DEFLATE change=yes;byteranges=no
  </IfModule>

  <IfModule !mod_filter.c>
    # Legacy versions of Apache
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml application/atom+xml
    AddOutputFilterByType DEFLATE image/x-icon image/svg+xml application/vnd.ms-fontobject application/x-font-ttf font/opentype
  </IfModule>

</IfModule>

# ----------------------------------------------------------------------
# Expires headers (for better cache control)
# ----------------------------------------------------------------------

# These are pretty far-future expires headers.
# They assume you control versioning with cachebusting query params like
#   <script src="application.js?20100608">
# Additionally, consider that outdated proxies may miscache
#   www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/

# If you don't use filenames to version, lower the CSS  and JS to something like
#   "access plus 1 week" or so.

<IfModule mod_expires.c>
  ExpiresActive on

# Perhaps better to whitelist expires rules? Perhaps.
  ExpiresDefault                          "access plus 1 month"

# cache.appcache needs re-requests in FF 3.6 (thanks Remy ~Introducing HTML5)
  ExpiresByType text/cache-manifest       "access plus 0 seconds"

# Your document html
  ExpiresByType text/html                 "access plus 0 seconds"

# Data
  ExpiresByType text/xml                  "access plus 0 seconds"
  ExpiresByType application/xml           "access plus 0 seconds"
  ExpiresByType application/json          "access plus 0 seconds"

# Feed
  ExpiresByType application/rss+xml       "access plus 1 hour"
  ExpiresByType application/atom+xml      "access plus 1 hour"

# Favicon (cannot be renamed)
  ExpiresByType image/x-icon              "access plus 1 week"

# Media: images, video, audio
  ExpiresByType image/gif                 "access plus 1 month"
  ExpiresByType image/png                 "access plus 1 month"
  ExpiresByType image/jpg                 "access plus 1 month"
  ExpiresByType image/jpeg                "access plus 1 month"
  ExpiresByType video/ogg                 "access plus 1 month"
  ExpiresByType audio/ogg                 "access plus 1 month"
  ExpiresByType video/mp4                 "access plus 1 month"
  ExpiresByType video/webm                "access plus 1 month"

# HTC files  (css3pie)
  ExpiresByType text/x-component          "access plus 1 month"

# Webfonts
  ExpiresByType application/x-font-ttf    "access plus 1 month"
  ExpiresByType font/opentype             "access plus 1 month"
  ExpiresByType application/x-font-woff   "access plus 1 month"
  ExpiresByType image/svg+xml             "access plus 1 month"
  ExpiresByType application/vnd.ms-fontobject "access plus 1 month"

# CSS and JavaScript
  ExpiresByType text/css                  "access plus 1 year"
  ExpiresByType application/javascript    "access plus 1 year"

</IfModule>

# ----------------------------------------------------------------------
# ETag removal
# ----------------------------------------------------------------------

# FileETag None is not enough for every server.
<IfModule mod_headers.c>
  Header unset ETag
</IfModule>

# Since we're sending far-future expires, we don't need ETags for
# static content.
#   developer.yahoo.com/performance/rules.html#etags
FileETag None

# ----------------------------------------------------------------------
# Stop screen flicker in IE on CSS rollovers
# ----------------------------------------------------------------------

# The following directives stop screen flicker in IE on CSS rollovers - in
# combination with the "ExpiresByType" rules for images (see above). If
# needed, un-comment the following rules.

BrowserMatch "MSIE" brokenvary=1
BrowserMatch "Mozilla/4.[0-9]{2}" brokenvary=1
BrowserMatch "Opera" !brokenvary
SetEnvIf brokenvary 1 force-no-vary

# ----------------------------------------------------------------------
# Cookie setting from iframes
# ----------------------------------------------------------------------

# Allow cookies to be set from iframes (for IE only)
# If needed, uncomment and specify a path or regex in the Location directive

# <IfModule mod_headers.c>
#   <Location />
#     Header set P3P "policyref=\"/w3c/p3p.xml\", CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\""
#   </Location>
# </IfModule>

# ----------------------------------------------------------------------
# Start rewrite engine
# ----------------------------------------------------------------------

# Turning on the rewrite engine is necessary for the following rules and features.
# FollowSymLinks must be enabled for this to work.

<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
</IfModule>

# ----------------------------------------------------------------------
# Suppress or force the "www." at the beginning of URLs
# ----------------------------------------------------------------------

# The same content should never be available under two different URLs - especially not with and
# without "www." at the beginning, since this can cause SEO problems (duplicate content).
# That's why you should choose one of the alternatives and redirect the other one.

# By default option 1 (no "www.") is activated. Remember: Shorter URLs are sexier.
# no-www.org/faq.php?q=class_b

# If you rather want to use option 2, just comment out all option 1 lines
# and uncomment option 2.
# IMPORTANT: NEVER USE BOTH RULES AT THE SAME TIME!

# ----------------------------------------------------------------------

# Option 1:
# Rewrite "www.example.com -> example.com"

<IfModule mod_rewrite.c>
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]
</IfModule>

# ----------------------------------------------------------------------

# Option 2:
# To rewrite "example.com -> www.example.com" uncomment the following lines.
# Be aware that the following rule might not be a good idea if you
# use "real" subdomains for certain parts of your website.

# <IfModule mod_rewrite.c>
#   RewriteCond %{HTTPS} !=on
#   RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
#   RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
# </IfModule>

# ----------------------------------------------------------------------
# Built-in filename-based cache busting
# ----------------------------------------------------------------------

# If you're not using the build script to manage your filename version revving,
# you might want to consider enabling this, which will route requests for
# /css/style.20110203.css to /css/style.css

# To understand why this is important and a better idea than all.css?v1231,
# read: github.com/h5bp/html5-boilerplate/wiki/Version-Control-with-Cachebusting

# Uncomment to enable.
# <IfModule mod_rewrite.c>
#   RewriteCond %{REQUEST_FILENAME} !-f
#   RewriteCond %{REQUEST_FILENAME} !-d
#   RewriteRule ^(.+)\.(\d+)\.(js|css|png|jpg|gif)$ $1.$3 [L]
# </IfModule>

# ----------------------------------------------------------------------
# Prevent SSL cert warnings
# ----------------------------------------------------------------------

# Rewrite secure requests properly to prevent SSL cert warnings, e.g. prevent
# https://www.example.com when your cert only allows https://secure.example.com
# Uncomment the following lines to use this feature.

# <IfModule mod_rewrite.c>
#   RewriteCond %{SERVER_PORT} !^443
#   RewriteRule ^ https://example-domain-please-change-me.com%{REQUEST_URI} [R=301,L]
# </IfModule>

# ----------------------------------------------------------------------
# Prevent 404 errors for non-existing redirected folders
# ----------------------------------------------------------------------

# without -MultiViews, Apache will give a 404 for a rewrite if a folder of the same name does not exist
#   e.g. /blog/hello : webmasterworld.com/apache/3808792.htm

Options -MultiViews

# ----------------------------------------------------------------------
# Custom 404 page
# ----------------------------------------------------------------------

# You can add custom pages to handle 500 or 403 pretty easily, if you like.
ErrorDocument 404 /404.html

# ----------------------------------------------------------------------
# UTF-8 encoding
# ----------------------------------------------------------------------

# Use UTF-8 encoding for anything served text/plain or text/html
AddDefaultCharset utf-8

# Force UTF-8 for a number of file formats
AddCharset utf-8 .css .less .js .xml .json .rss .atom

# ----------------------------------------------------------------------
# A little more security
# ----------------------------------------------------------------------

# Do we want to advertise the exact version number of Apache we're running?
# Probably not.
## This can only be enabled if used in httpd.conf - It will not work in .htaccess
# ServerTokens Prod

# "-Indexes" will have Apache block users from browsing folders without a default document
# Usually you should leave this activated, because you shouldn't allow everybody to surf through
# every folder on your server (which includes rather private places like CMS system folders).
<IfModule mod_autoindex.c>
  Options -Indexes
</IfModule>

# Block access to "hidden" directories whose names begin with a period. This
# includes directories used by version control systems such as Subversion or Git.
<IfModule mod_rewrite.c>
  RewriteCond %{SCRIPT_FILENAME} -d
  RewriteCond %{SCRIPT_FILENAME} -f
  RewriteRule "(^|/)\." - [F]
</IfModule>

# Block access to backup and source files
# This files may be left by some text/html editors and
# pose a great security danger, when someone can access them
<FilesMatch "(\.(bak|config|sql|fla|psd|ini|log|sh|inc|swp|dist)|~)$">
  Order allow,deny
  Deny from all
  Satisfy All
</FilesMatch>

# If your server is not already configured as such, the following directive
# should be uncommented in order to set PHP's register_globals option to OFF.
# This closes a major security hole that is abused by most XSS (cross-site
# scripting) attacks. For more information: http://php.net/register_globals
#
# IF REGISTER_GLOBALS DIRECTIVE CAUSES 500 INTERNAL SERVER ERRORS :
#
# Your server does not allow PHP directives to be set via .htaccess. In that
# case you must make this change in your php.ini file instead. If you are
# using a commercial web host, contact the administrators for assistance in
# doing this. Not all servers allow local php.ini files, and they should
# include all PHP configurations (not just this one), or you will effectively
# reset everything to PHP defaults. Consult www.php.net for more detailed
# information about setting PHP directives.

php_flag register_globals Off

# Rename session cookie to something else, than PHPSESSID
php_value session.name sid

# Do not show you are using PHP
# Note: Move this line to php.ini since it won't work in .htaccess
php_flag expose_php Off

# Level of log detail - log all errors
php_value error_reporting -1

# Write errors to log file
php_flag log_errors On

# Do not display errors in browser (production - Off, development - On)
php_flag display_errors On

# Do not display startup errors (production - Off, development - On)
php_flag display_startup_errors On

# Format errors in plain text
# Note: Leave this setting 'On' for xdebug's var_dump() output
php_flag html_errors On

# Show multiple occurrence of error
php_flag ignore_repeated_errors Off

# Show same errors from different sources
php_flag ignore_repeated_source Off

# Size limit for error messages
php_value log_errors_max_len 1024

# Don't precede error with string (doesn't accept empty string, use whitespace if you need)
php_value error_prepend_string " "

# Don't prepend to error (doesn't accept empty string, use whitespace if you need)
php_value error_append_string " "

# Increase cookie security
<IfModule php5_module>
  php_value session.cookie_httponly true
</IfModule>

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]
    RewriteRule ^.*$ index.php [NC,L]
</IfModule> 
```

谢谢你的帮助！

# c++ - 如何跳出 C++ 代码块？

> ID：12314619
> 
> 赞同：11
> 
> 时间：2012-09-07T08:41:18.087
> 
> 标签：c++, block, break, goto

这就是我想做的：

```
{
    ...
    if(condition)
        break;
    ...
} 
```

这适用于循环。对于一个简单的代码块，我想要类似的东西。可能吗？
我是否被迫使用“goto”？

* * *

我认为该声明的这种扩展`break`将是对 C++11 的有用补充......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T08:43:17.827

怎么样

```
do
{
    ...
    if(condition)
        break;
    ...
}
while (0); 
```

我不是特别喜欢这种风格，但我以前见过。如果重构是不可能的（可能是一个巨大的块，如果改变会破坏很多东西），这是一个选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T09:57:37.160

这是一种方法：

```
switch(0) {
default:
    /* code */
    if (cond) break;
    /* code */
} 
```

（请不要这样做）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-07T08:50:06.893

这个：

```
{
    // ...

    if (!condition)
    {
        // ...
    }
} 
```

这样可以避免`goto`跳出一段代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-16T21:23:28.033

在**C++11**中，实现此目的的最佳方法是使用**匿名 lambda 函数**并替换`break`为`return`

```
[&](){
    ...
    if(condition)
        return;
    ...
 }(); 
```

请注意，`[&]`通过引用捕获所有变量，如果您不使用任何变量，只需将其替换为`[]`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-07T08:51:25.443

这里只是一些额外的可能性：

```
for(..)
{
    continue;//next loop iteration
}

void mymethod()
{
    ...
    return;
    ...
} 
```

如果您想使用 goto 并通过使用 return 离开代码块，您可能应该为有问题的代码块创建子方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-09T10:04:17.977

恐怕我现在正在对我释放编码之神的愤怒，但是这个漂亮的讨厌的宏可以帮助人们比以前更容易做到这一点（基于@jleahy的回答）：

```
//example use:
// { __breakable__
//    ...
//    if (condition)
//        break;
//    ...
//    if (condition2)
//        break;
//    ...
// }
//WARNING: use only with a standalone block. To make if, try or catch block
//         breakable use double braces
//         if (cond) {{ __breakable__ ... }}
//         try {{ __breakable__ ... }} catch (...) {{ __breakable__ ... }}
#define __breakable__ }switch(0){default: 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-17T18:09:10.067

我解决了使用：

```
if (1) {
   if (1) goto End;
   ...
   ...
End:
   ;
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-12-19T03:26:55.260

“我想要一个简单的代码块类似的东西。”

`return`在满足条件后使用，并将`return`控制权返回给调用者。

```
void MyWorkerClass::doWork(Item & workItem) {
    // ...
    if(noMoreWorkToDo)
        return;
    // ...
} 
```

# ruby - 如何在 ruby (1.9) case 语句中对返回值进行多重赋值？

> ID：12314622
> 
> 赞同：10
> 
> 时间：2012-09-07T08:41:26.200
> 
> 标签：ruby, switch-statement, variable-assignment

这样做很好：

```
q = case period_group
  when 'day' then [7, 'D'] 
  when 'week' then [7, 'WW'] 
  else ['12','MM']
end
limit,pattern = q[0],q[1] 
```

但我的第一次尝试：

```
limit, pattern = case period_group
  when 'day' then 7, 'D' 
  when 'week' then 7, 'WW' 
  else '12','MM'
end 
```

最终出现 SyntaxError：

```
syntax error, unexpected ',', expecting keyword_end
      when 'day' then 7, 'D' 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-07T08:44:03.997

您应该为此返回数组。否则会混淆解析器。

```
limit, pattern = case period_group
  when 'day' then [7, 'D'] 
  when 'week' then [7, 'WW'] 
  else ['12','MM']
end 
```

我不明白你为什么要去掉方括号。这种方式更具可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T08:44:28.773

您忘记将返回值放入 []

```
limit, pattern = case period_group
  when 'day' then [7, 'D']     
  when 'week' then [7, 'WW']     
  else ['12','MM']    
end 
```

# css - 如何覆盖 xhtml 主题 css？

> ID：12314626
> 
> 赞同：2
> 
> 时间：2012-09-07T08:41:32.643
> 
> 标签：css, struts2, themes

我想覆盖 struts/xhtml/style.css 中提供的一些样式。其中之一是标签样式。在 struts/xhtml/style.css 中，标签类在第 23 行定义如下：

```
.label {
    font-style: italic;
} 
```

在我的样式文件中，我使用以下类重新定义了标签样式：

```
.label {
    display: block;
    margin: auto;
    margin-bottom: 5px;
    text-align: left;
    color: #333;
    font-size:12px;
    width:150px;
    font-style:normal;
} 
```

但是我的标签总是斜体，当我使用调试工具时，我看到它采用 xhtml 属性并且不会覆盖该属性。这是我完整的css文件：

```
/* Reset des properties */
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    /*font: inherit;*/
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

/*Definition des properties pour le projet OCC*/
/*tags html*/
body{
    margin: auto;
    padding:auto;
    align:center;
    width:995px;
    font-family:Arial,"Times New Roman", Times, serif;
    font-size:12px;
}

h1{}
h2{}
p{
margin-top:20px;
margin-bottom:20px;
}
li a {
font-weight:bold;
margin: 50px 0 ;
padding:5px;
}
/*div*/

#content{
    margin: 20px 10px 20px 10px;
    text-align:justify;
    border:1px solid #000;
}
#header{
    border:1px solid #000;
    margin:20px 0 0 0;
    overflow:hidden;
}

#headerButton{
    background-color:#6993C9;
    color:#ffffff;
    font-weight:bold;
    padding: 5px 15px;
    height:2px;
    width:auto;
    padding: 7px 10px 34px 10px;
}

#headerButton a:link:first-child{
    color:#ffffff;
    margin: 0  0 0 10px;
}
#headerButton a:link{
    color:#ffffff;
    margin: 0 10px 0 0;
    text-decoration:none;
    font-size:11px;
}
#headerButton a:hover:first-child{
    color:#e6e6e6;
    margin: 0  0 0 10px;
}

#headerButton a:hover{
    color:#e6e6e6;
    margin: 0 10px 0 0;
    text-decoration:none;
}
#imageOrange24{
margin:0 5px -10px 0;
padding: 0 0 0 0;

}

#formWrapper{
margin:50px auto 50px auto;
padding:50px 50px 50px 50px;
width:300px;
}

#formWrapper  tr{
margin: 0 0 10px 0;
}
#wwFormTable tr{
margin: 0 0 10px 0;
}

#menu{
    float:left;
    width:125px;
    height:200px;
    margin: 20px 10px 20px 10px;
    border:1px solid #000;
}

#adminMessageBox{

    float:left;
    border: 2px blue solid;
    width:400px;
    height:200px;
    margin: 20px 10px 20px 10px;
    border:1px solid #000;

}
#waitingActionBox{
    float:right;
    border: 2px blue solid;
    width:400px;
    height:200px;
    margin: 20px 10px 20px 10px;
    border:1px solid #000;

}

/*div englobant la liste des brochures*/
#listeBrochures{

}

#search{
margin:0 0 20px 10px;
}
#dateCreation{

    margin: 0 0 0 5px;
}
/*classes*/
.fontGeneralTitle{
    float:left;
    display:block;
    font-size:24px;
    font-weight:bold;
    color:#6993C9;
    padding: 20px 0 0 0;
    margin: 0 0 0 30px;
}
.formLogin {
    font-family: Arial,Verdana, Helvetica, sans-serif;
    border: 1px solid #ccc;
    width: 200px;
    margin: auto;
    margin-top: 100px;
    text-align: center;
    -moz-border-radius: 70px 10px;
    padding: 10px;
}
.inputs {
    display: block;
    margin: auto;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    color: #333;
}

.label {
    display: block;
    margin: auto;
    margin-bottom: 5px;
    text-align: left;
    color: #333;
    font-size:12px;
    width:150px;
    font-style:normal;
}

.boutonLogin {
    margin-top: 15px;
    background-color:#f79646;
    color:#ffffff;
     -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    -khtml-border-radius: 5px;
    behavior: url(/css/rounded/border-radius.htc);
    border-radius: 5px;
}

.tdLabel{

}

.boxTitle{
    width:100%;
    font-weight:bold;
    color:blue;
    text-align:center;
    margin:10px 0;
    text-decoration:underline;
}

.auteur{
    float:right;
    color:black;
    font-weight:bold;
    margin-right:10px;
}
.center{
    text-align:center;
}

.alignleft{
    float:left;
    margin:20px 0 50px 10px;
}
.alignright{
    margin:20px 100px 0 0;
}

.bold{
    font-weigth:bold;
    line-height:1;
}
.clear{
    float:clear;
}
.floatLeft{
    float:left;
}
.floatRight{
    float:right;
} 
```

这是我生成的 html 表单：

```
<div id="formWrapper"> 

        <form id="LoginAction" name="LoginAction" action="/OCC/LoginAction.action" method="post">
<table class="wwFormTable">
            <tr>
    <td class="tdLabel"><label for="LoginAction_login" class="label">Identifiant: /label></td>
    <td
><input type="text" name="login" size="20" value="" id="LoginAction_login" class="inputs" title="Entrer votre identifiant"/></td>
</tr>

            <tr>
    <td class="tdLabel"><label for="LoginAction_password" class="label">Mot de passe:</label></td>
    <td
><input type="password" name="password" size="20" id="LoginAction_password" class="inputs" title="Entrer votre mot de passe"/></td>
</tr>

            <tr>
    <td colspan="2"><div align="right"><input type="submit" id="LoginAction_0" value="Valider" class="boutonLogin" title="Cliquer pour se connecter"/>
</div></td>
</tr>

        </table></form> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:57:10.743

你有没有尝试过？：

```
.label {
    display: block;
    margin: auto;
    margin-bottom: 5px;
    text-align: left;
    color: #333;
    font-size:12px;
    width:150px;
    font-style:normal !important;
} 
```

!important 注释应该覆盖样式。

# css - CSS 显示：表格布局问题

> ID：12314628
> 
> 赞同：1
> 
> 时间：2012-09-07T08:41:41.083
> 
> 标签：css, html, tablelayout

这是我的问题：

[在此处](http://jsbin.com/avozik/25/edit)的 jsbin 代码中。我`#wrapper`在右边隐藏了灰色边框。

但是，这只发生在 Firefox 中。铬工作正常。

你能告诉我firefox的修复方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T08:46:09.083

请参阅此示例：http: [//jsbin.com/avupak/1/edit](http://jsbin.com/avupak/1/edit)

相关CSS

```
width:100%;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box; 
```

`box-sizing: border-box;`计算包括边框的宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:13:59.843

仅将宽度设置为 100% 也可以。

```
width:100%; 
```

# javascript - Javascript 对象中的函数范围与代码顺序

> ID：12314629
> 
> 赞同：3
> 
> 时间：2012-09-07T08:41:43.227
> 
> 标签：javascript, function, object, scope, javascript-engine

考虑这个 HTML：

```
<p>Click me</p> 
```

我想为每个对象编写一个带有点击处理程序的对象`p`，但遇到了找不到我的点击处理程序函数的问题。

此代码**不起作用**：

```
(function(){
    var self = this;

    $("p").each(function(){
        $(this).click(self.myFunction);
    });

    self.myFunction = function(){ alert("myFunction"); }
})();​ 
```

当我将点击处理程序分配包装在一个函数中时，它**确实**有效：

```
(function(){
    var self = this;

    $("p").each(function(){
        $(this).click(function(){ self.myFunction(); });
    });

    self.myFunction = function(){ alert("myFunction"); }
})(); 
```

**问题**：为什么不起作用`$(this).click(self.myFunction)`，但起作用`$(this).click(function(){ self.myFunction(); })`？

* * *

**编辑**：以下代码**确实**有效：

```
$("p").click(myFunction);
function myFunction(){ alert("myFunction"); } 
```

这也不应该失败吗？

* * *

PS我让我的对象工作而无需通过移动函数的位置来包装函数：

```
(function(){
    var self = this;

    self.myFunction = function(){ alert("myFunction"); }

    $("p").each(function(){
        $(this).click(self.myFunction);
    });
})(); 
```

我猜这个问题与解析器有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:46:05.630

在这：

```
(function(){
    var self = this;

    $("p").each(function(){
        $(this).click(self.myFunction);
    });

    self.myFunction = function(){ alert("myFunction"); }
})();? 
```

立即评估引用，并且由于尚未放置任何内容`self`，因此失败。

这里：

```
(function(){
    var self = this;

    $("p").each(function(){
        $(this).click(function(){ self.myFunction(); });
    });

    self.myFunction = function(){ alert("myFunction"); }
})(); 
```

在实际发生点击时评估引用，在 self.myfunction 被分配到之后。

这实际上不是问题，而是有意的设计功能。

在这个例子中：

```
$("p").click(myFunction);
function myFunction(){ alert("myFunction"); } 
```

函数名称被提升到范围的顶部。由于这个函数定义没有什么动态的（意味着它没有被动态分配给一个对象），它在整个范围内都可用，从上到下。

函数填补了 JavaScript 中的许多空白。

它们充当 lambdas、模块、方法、函数，可能还有更多我现在想不到的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:44:14.590

我想你已经弄清楚了你的问题。在您附加处理程序的那一刻，`self.myFunction`未定义，因此没有附加处理程序。

但是当您像 一样包装调用时*，*`function(){ self.myFunction(); }` then`self.myFunction`在调用处理程序时被调用，而不是在附加时调用。

# java - 将 wav/wave 文件读入 short[] 数组

> ID：12314635
> 
> 赞同：2
> 
> 时间：2012-09-07T08:42:05.217
> 
> 标签：java, wav, javasound

是否有将 wav 文件读入 short[] 数组的 api？我正在尝试将 wav 文件读入短数组。

我找不到任何内置的 API

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T01:35:41.317

就像通常对声音所做的那样，通过 AudioInputStream 将其引入。

对于您从流中获取的每个缓冲区负载，一次遍历两个字节（如果它是 16 位编码）并使用您最喜欢的算法将两个字节转换为单个短整数。（取决于文件是 Big-Endian 还是 Little-Endian。）

然后，通过附加到您喜欢的短数组形式来保存结果，而不是像在更常见的播放情况下那样发布到 SourceDataLine。

引用 Java 教程：

> 因为 Java Sound API 允许您以字节数组的形式访问音频数据，所以您可以以您选择的任何方式更改这些字节。

您可以查看此 Java 声音教程中的代码：[使用文件和格式转换器](http://docs.oracle.com/javase/tutorial/sound/converters.html)，“读取声音文件”部分并注意注释：“在这里，对现在位于 audioBytes 数组中的音频数据做一些有用的事情......”

例如，有用的东西可能是：

```
 myShortArray[i] = (short)(( buffer[i*2] & 0xff )|( buffer[i*2 + 1] << 8 )); 
```

buffer = 接收 AudioInputStream 的字节缓冲区。

i = 数组索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T13:59:51.657

好的，这就是我所做的。

```
public static void main(String[] args) {
    try {
        File srcFile = new File("test.wav");
        FileInputStream in = new FileInputStream(srcFile);
        ObjectOutputStream output =  new ObjectOutputStream(new FileOutputStream("gilad-OutPut.bin"));
        byte[] buf = new byte[80000];
        short[] shortArr = new short[buf.length/2];
        in.read(buf);
        for (int i = 0; i <buf.length/2 ; i++)
        {
            output.writeShort( (short)( ( buf[i*2] & 0xff )|( buf[i*2 + 1] << 8 ) ) );
            shortArr[i] = ( (short)( ( buf[i*2] & 0xff )|( buf[i*2 + 1] << 8 ) ) );
        }

        in.close();

    } catch (Exception e) {
        System.err.println(e);
    }

} 
```

短数组用于调试目的，无论如何我的想法是在 Matlab 中将其读取为短数组。但是我没有得到相同的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-23T18:13:04.047

这个很好，对安卓也有好处： [http ://www.labbookpages.co.uk/audio/javaWavFiles.html](http://www.labbookpages.co.uk/audio/javaWavFiles.html)

我已经添加到它阅读短和阅读频道短

必须删除缩进以适应字符限制。

Wave.java：

```
package com.doodkin.learnwave;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintStream;

//from: http://www.labbookpages.co.uk/audio/javaWavFiles.html
//added short and readchannel

public class Wave {
// Wav file IO class
// A.Greensted
// http://www.labbookpages.co.uk

// File format is based on the information from
// http://www.sonicspot.com/guide/wavefiles.html
// http://www.blitter.com/~russtopia/MIDI/~jglatt/tech/wave.htm

// Version 1.0

//import java.io.*;

public static class WavFile
{
private enum IOState {READING, WRITING, CLOSED};
private final static int BUFFER_SIZE = 4096;

private final static int FMT_CHUNK_ID = 0x20746D66;
private final static int DATA_CHUNK_ID = 0x61746164;
private final static int RIFF_CHUNK_ID = 0x46464952;
private final static int RIFF_TYPE_ID = 0x45564157;

private File file;                      // File that will be read from or written to
private IOState ioState;                // Specifies the IO State of the Wav File (used for snaity checking)
private int bytesPerSample;         // Number of bytes required to store a single sample
private long numFrames;                 // Number of frames within the data section
private FileOutputStream oStream;   // Output stream used for writting data
private FileInputStream iStream;        // Input stream used for reading data
private double floatScale;              // Scaling factor used for int <-> float conversion             
private double floatOffset;         // Offset factor used for int <-> float conversion              
private boolean wordAlignAdjust;        // Specify if an extra byte at the end of the data chunk is required for word alignment

// Wav Header
private int numChannels;                // 2 bytes unsigned, 0x0001 (1) to 0xFFFF (65,535)
private long sampleRate;                // 4 bytes unsigned, 0x00000001 (1) to 0xFFFFFFFF (4,294,967,295)
// Although a java int is 4 bytes, it is signed, so need to use a long
private int blockAlign;                 // 2 bytes unsigned, 0x0001 (1) to 0xFFFF (65,535)
private int validBits;                  // 2 bytes unsigned, 0x0002 (2) to 0xFFFF (65,535)

// Buffering
private byte[] buffer;                  // Local buffer used for IO
private int bufferPointer;              // Points to the current position in local buffer
private int bytesRead;                  // Bytes read after last read into local buffer
private long frameCounter;              // Current number of frames read or written

// Cannot instantiate WavFile directly, must either use newWavFile() or openWavFile()
private WavFile()
{
buffer = new byte[BUFFER_SIZE];
}

public int getNumChannels()
{
return numChannels;
}

public long getNumFrames()
{
return numFrames;
}

public long getFramesRemaining()
{
return numFrames - frameCounter;
}

public long getSampleRate()
{
return sampleRate;
}

public int getValidBits()
{
return validBits;
}

public static WavFile newWavFile(File file, int numChannels, long numFrames, int validBits, long sampleRate) throws IOException, WavFileException
{
// Instantiate new Wavfile and initialise
WavFile wavFile = new WavFile();
wavFile.file = file;
wavFile.numChannels = numChannels;
wavFile.numFrames = numFrames;
wavFile.sampleRate = sampleRate;
wavFile.bytesPerSample = (validBits + 7) / 8;
wavFile.blockAlign = wavFile.bytesPerSample * numChannels;
wavFile.validBits = validBits;

// Sanity check arguments
if (numChannels < 1 || numChannels > 65535) throw new WavFileException("Illegal number of channels, valid range 1 to 65536");
if (numFrames < 0) throw new WavFileException("Number of frames must be positive");
if (validBits < 2 || validBits > 65535) throw new WavFileException("Illegal number of valid bits, valid range 2 to 65536");
if (sampleRate < 0) throw new WavFileException("Sample rate must be positive");

// Create output stream for writing data
wavFile.oStream = new FileOutputStream(file);

// Calculate the chunk sizes
long dataChunkSize = wavFile.blockAlign * numFrames;
long mainChunkSize =    4 + // Riff Type
8 + // Format ID and size
16 +    // Format data
8 +     // Data ID and size
dataChunkSize;

// Chunks must be word aligned, so if odd number of audio data bytes
// adjust the main chunk size
if (dataChunkSize % 2 == 1) {
mainChunkSize += 1;
wavFile.wordAlignAdjust = true;
}
else {
wavFile.wordAlignAdjust = false;
}

// Set the main chunk size
putLE(RIFF_CHUNK_ID,    wavFile.buffer, 0, 4);
putLE(mainChunkSize,    wavFile.buffer, 4, 4);
putLE(RIFF_TYPE_ID, wavFile.buffer, 8, 4);

// Write out the header
wavFile.oStream.write(wavFile.buffer, 0, 12);

// Put format data in buffer
long averageBytesPerSecond = sampleRate * wavFile.blockAlign;

putLE(FMT_CHUNK_ID,             wavFile.buffer, 0, 4);      // Chunk ID
putLE(16,                           wavFile.buffer, 4, 4);      // Chunk Data Size
putLE(1,                                wavFile.buffer, 8, 2);      // Compression Code (Uncompressed)
putLE(numChannels,              wavFile.buffer, 10, 2);     // Number of channels
putLE(sampleRate,                   wavFile.buffer, 12, 4);     // Sample Rate
putLE(averageBytesPerSecond,    wavFile.buffer, 16, 4);     // Average Bytes Per Second
putLE(wavFile.blockAlign,       wavFile.buffer, 20, 2);     // Block Align
putLE(validBits,                    wavFile.buffer, 22, 2);     // Valid Bits

// Write Format Chunk
wavFile.oStream.write(wavFile.buffer, 0, 24);

// Start Data Chunk
putLE(DATA_CHUNK_ID,                wavFile.buffer, 0, 4);      // Chunk ID
putLE(dataChunkSize,                wavFile.buffer, 4, 4);      // Chunk Data Size

// Write Format Chunk
wavFile.oStream.write(wavFile.buffer, 0, 8);

// Calculate the scaling factor for converting to a normalised double
if (wavFile.validBits > 8)
{
// If more than 8 validBits, data is signed
// Conversion required multiplying by magnitude of max positive value
wavFile.floatOffset = 0;
wavFile.floatScale = Long.MAX_VALUE >> (64 - wavFile.validBits);
}
else
{
// Else if 8 or less validBits, data is unsigned
// Conversion required dividing by max positive value
wavFile.floatOffset = 1;
wavFile.floatScale = 0.5 * ((1 << wavFile.validBits) - 1);
}

// Finally, set the IO State
wavFile.bufferPointer = 0;
wavFile.bytesRead = 0;
wavFile.frameCounter = 0;
wavFile.ioState = IOState.WRITING;

return wavFile;
}

public static WavFile openWavFile(File file) throws IOException, WavFileException
{
// Instantiate new Wavfile and store the file reference
WavFile wavFile = new WavFile();
wavFile.file = file;

// Create a new file input stream for reading file data
wavFile.iStream = new FileInputStream(file);

// Read the first 12 bytes of the file
int bytesRead = wavFile.iStream.read(wavFile.buffer, 0, 12);
if (bytesRead != 12) throw new WavFileException("Not enough wav file bytes for header");

// Extract parts from the header
long riffChunkID = getLE(wavFile.buffer, 0, 4);
long chunkSize = getLE(wavFile.buffer, 4, 4);
long riffTypeID = getLE(wavFile.buffer, 8, 4);

// Check the header bytes contains the correct signature
if (riffChunkID != RIFF_CHUNK_ID) throw new WavFileException("Invalid Wav Header data, incorrect riff chunk ID");
if (riffTypeID != RIFF_TYPE_ID) throw new WavFileException("Invalid Wav Header data, incorrect riff type ID");

// Check that the file size matches the number of bytes listed in header
if (file.length() != chunkSize+8) {
throw new WavFileException("Header chunk size (" + chunkSize + ") does not match file size (" + file.length() + ")");
}

boolean foundFormat = false;
boolean foundData = false;

// Search for the Format and Data Chunks
while (true)
{
// Read the first 8 bytes of the chunk (ID and chunk size)
bytesRead = wavFile.iStream.read(wavFile.buffer, 0, 8);
if (bytesRead == -1) throw new WavFileException("Reached end of file without finding format chunk");
if (bytesRead != 8) throw new WavFileException("Could not read chunk header");

// Extract the chunk ID and Size
long chunkID = getLE(wavFile.buffer, 0, 4);
chunkSize = getLE(wavFile.buffer, 4, 4);

// Word align the chunk size
// chunkSize specifies the number of bytes holding data. However,
// the data should be word aligned (2 bytes) so we need to calculate
// the actual number of bytes in the chunk
long numChunkBytes = (chunkSize%2 == 1) ? chunkSize+1 : chunkSize;

if (chunkID == FMT_CHUNK_ID)
{
// Flag that the format chunk has been found
foundFormat = true;

// Read in the header info
bytesRead = wavFile.iStream.read(wavFile.buffer, 0, 16);

// Check this is uncompressed data
int compressionCode = (int) getLE(wavFile.buffer, 0, 2);
if (compressionCode != 1) throw new WavFileException("Compression Code " + compressionCode + " not supported");

// Extract the format information
wavFile.numChannels = (int) getLE(wavFile.buffer, 2, 2);
wavFile.sampleRate = getLE(wavFile.buffer, 4, 4);
wavFile.blockAlign = (int) getLE(wavFile.buffer, 12, 2);
wavFile.validBits = (int) getLE(wavFile.buffer, 14, 2);

if (wavFile.numChannels == 0) throw new WavFileException("Number of channels specified in header is equal to zero");
if (wavFile.blockAlign == 0) throw new WavFileException("Block Align specified in header is equal to zero");
if (wavFile.validBits < 2) throw new WavFileException("Valid Bits specified in header is less than 2");
if (wavFile.validBits > 64) throw new WavFileException("Valid Bits specified in header is greater than 64, this is greater than a long can hold");

// Calculate the number of bytes required to hold 1 sample
wavFile.bytesPerSample = (wavFile.validBits + 7) / 8;
if (wavFile.bytesPerSample * wavFile.numChannels != wavFile.blockAlign)
throw new WavFileException("Block Align does not agree with bytes required for validBits and number of channels");

// Account for number of format bytes and then skip over
// any extra format bytes
numChunkBytes -= 16;
if (numChunkBytes > 0) wavFile.iStream.skip(numChunkBytes);
}
else if (chunkID == DATA_CHUNK_ID)
{
// Check if we've found the format chunk,
// If not, throw an exception as we need the format information
// before we can read the data chunk
if (foundFormat == false) throw new WavFileException("Data chunk found before Format chunk");

// Check that the chunkSize (wav data length) is a multiple of the
// block align (bytes per frame)
if (chunkSize % wavFile.blockAlign != 0) throw new WavFileException("Data Chunk size is not multiple of Block Align");

// Calculate the number of frames
wavFile.numFrames = chunkSize / wavFile.blockAlign;

// Flag that we've found the wave data chunk
foundData = true;

break;
}
else
{
// If an unknown chunk ID is found, just skip over the chunk data
wavFile.iStream.skip(numChunkBytes);
}
}

// Throw an exception if no data chunk has been found
if (foundData == false) throw new WavFileException("Did not find a data chunk");

// Calculate the scaling factor for converting to a normalised double
if (wavFile.validBits > 8)
{
// If more than 8 validBits, data is signed
// Conversion required dividing by magnitude of max negative value
wavFile.floatOffset = 0;
wavFile.floatScale = 1 << (wavFile.validBits - 1);
}
else
{
// Else if 8 or less validBits, data is unsigned
// Conversion required dividing by max positive value
wavFile.floatOffset = -1;
wavFile.floatScale = 0.5 * ((1 << wavFile.validBits) - 1);
}

wavFile.bufferPointer = 0;
wavFile.bytesRead = 0;
wavFile.frameCounter = 0;
wavFile.ioState = IOState.READING;

return wavFile;
}

// Get and Put little endian data from local buffer
// ------------------------------------------------
private static long getLE(byte[] buffer, int pos, int numBytes)
{
numBytes --;
pos += numBytes;

long val = buffer[pos] & 0xFF;
for (int b=0 ; b<numBytes ; b++) val = (val << 8) + (buffer[--pos] & 0xFF);

return val;
}

private static void putLE(long val, byte[] buffer, int pos, int numBytes)
{
for (int b=0 ; b<numBytes ; b++)
{
buffer[pos] = (byte) (val & 0xFF);
val >>= 8;
pos ++;
}
}

// Sample Writing and Reading
// --------------------------
private void writeSample(long val) throws IOException
{
for (int b=0 ; b<bytesPerSample ; b++)
{
if (bufferPointer == BUFFER_SIZE)
{
oStream.write(buffer, 0, BUFFER_SIZE);
bufferPointer = 0;
}

buffer[bufferPointer] = (byte) (val & 0xFF);
val >>= 8;
bufferPointer ++;
}
}

private long readSample() throws IOException, WavFileException
{
long val = 0;

for (int b=0 ; b<bytesPerSample ; b++)
{
if (bufferPointer == bytesRead) 
{
int read = iStream.read(buffer, 0, BUFFER_SIZE);
if (read == -1) throw new WavFileException("Not enough data available");
bytesRead = read;
bufferPointer = 0;
}

int v = buffer[bufferPointer];
if (b < bytesPerSample-1 || bytesPerSample == 1) v &= 0xFF;
val += v << (b * 8);

bufferPointer ++;
}

return val;
}

// Short
// ----mono:
public int readFramesChanel(short[] sampleBuffer, int numFramesToRead,int channel) throws IOException, WavFileException
{
return readFramesChanel(sampleBuffer, 0, numFramesToRead,channel);
}

public int readFramesChanel(short[] sampleBuffer, int offset, int numFramesToRead,int channel) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
if(channel==c)
{
sampleBuffer[offset] = (short) readSample();
offset ++;
}
else
readSample();
}

frameCounter ++;
}

return numFramesToRead;
}
// ----
public int readFrames(short[] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
{
return readFrames(sampleBuffer, 0, numFramesToRead);
}

public int readFrames(short[] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
sampleBuffer[offset] = (short) readSample();
offset ++;
}

frameCounter ++;
}

return numFramesToRead;
}

public int readFrames(short[][] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
{
return readFrames(sampleBuffer, 0, numFramesToRead);
}

public int readFrames(short[][] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++) sampleBuffer[c][offset] = (short) readSample();

offset ++;
frameCounter ++;
}

return numFramesToRead;
}

public int writeFrames(short[] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
{
return writeFrames(sampleBuffer, 0, numFramesToWrite);
}

public int writeFrames(short[] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
{
if (ioState != IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

for (int f=0 ; f<numFramesToWrite ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
writeSample(sampleBuffer[offset]);
offset ++;
}

frameCounter ++;
}

return numFramesToWrite;
}

public int writeFrames(short[][] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
{
return writeFrames(sampleBuffer, 0, numFramesToWrite);
}

public int writeFrames(short[][] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
{
if (ioState != IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

for (int f=0 ; f<numFramesToWrite ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++) writeSample(sampleBuffer[c][offset]);

offset ++;
frameCounter ++;
}

return numFramesToWrite;
}

// Integer
// -------
public int readFrames(int[] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
{
return readFrames(sampleBuffer, 0, numFramesToRead);
}

public int readFrames(int[] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
sampleBuffer[offset] = (int) readSample();
offset ++;
}

frameCounter ++;
}

return numFramesToRead;
}

public int readFrames(int[][] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
{
return readFrames(sampleBuffer, 0, numFramesToRead);
}

public int readFrames(int[][] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++) sampleBuffer[c][offset] = (int) readSample();

offset ++;
frameCounter ++;
}

return numFramesToRead;
}

public int writeFrames(int[] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
{
return writeFrames(sampleBuffer, 0, numFramesToWrite);
}

public int writeFrames(int[] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
{
if (ioState != IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

for (int f=0 ; f<numFramesToWrite ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
writeSample(sampleBuffer[offset]);
offset ++;
}

frameCounter ++;
}

return numFramesToWrite;
}

public int writeFrames(int[][] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
{
return writeFrames(sampleBuffer, 0, numFramesToWrite);
}

public int writeFrames(int[][] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
{
if (ioState != IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

for (int f=0 ; f<numFramesToWrite ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++) writeSample(sampleBuffer[c][offset]);

offset ++;
frameCounter ++;
}

return numFramesToWrite;
}

// Long
// ----
public int readFrames(long[] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
{
return readFrames(sampleBuffer, 0, numFramesToRead);
}

public int readFrames(long[] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
sampleBuffer[offset] = readSample();
offset ++;
}

frameCounter ++;
}

return numFramesToRead;
}

public int readFrames(long[][] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
{
return readFrames(sampleBuffer, 0, numFramesToRead);
}

public int readFrames(long[][] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++) sampleBuffer[c][offset] = readSample();

offset ++;
frameCounter ++;
}

return numFramesToRead;
}

public int writeFrames(long[] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
{
return writeFrames(sampleBuffer, 0, numFramesToWrite);
}

public int writeFrames(long[] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
{
if (ioState != IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

for (int f=0 ; f<numFramesToWrite ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
writeSample(sampleBuffer[offset]);
offset ++;
}

frameCounter ++;
}

return numFramesToWrite;
}

public int writeFrames(long[][] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
{
return writeFrames(sampleBuffer, 0, numFramesToWrite);
}

public int writeFrames(long[][] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
{
if (ioState != IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

for (int f=0 ; f<numFramesToWrite ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++) writeSample(sampleBuffer[c][offset]);

offset ++;
frameCounter ++;
}

return numFramesToWrite;
}

// Double
// ------
public int readFrames(double[] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
{
return readFrames(sampleBuffer, 0, numFramesToRead);
}

public int readFrames(double[] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
sampleBuffer[offset] = floatOffset + (double) readSample() / floatScale;
offset ++;
}

frameCounter ++;
}

return numFramesToRead;
}

public int readFrames(double[][] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
{
return readFrames(sampleBuffer, 0, numFramesToRead);
}

public int readFrames(double[][] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
{
if (ioState != IOState.READING) throw new IOException("Cannot read from WavFile instance");

for (int f=0 ; f<numFramesToRead ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++) sampleBuffer[c][offset] = floatOffset + (double) readSample() / floatScale;

offset ++;
frameCounter ++;
}

return numFramesToRead;
}

public int writeFrames(double[] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
{
return writeFrames(sampleBuffer, 0, numFramesToWrite);
}

public int writeFrames(double[] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
{
if (ioState != IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

for (int f=0 ; f<numFramesToWrite ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++)
{
writeSample((long) (floatScale * (floatOffset + sampleBuffer[offset])));
offset ++;
}

frameCounter ++;
}

return numFramesToWrite;
}

public int writeFrames(double[][] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
{
return writeFrames(sampleBuffer, 0, numFramesToWrite);
}

public int writeFrames(double[][] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
{
if (ioState != IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

for (int f=0 ; f<numFramesToWrite ; f++)
{
if (frameCounter == numFrames) return f;

for (int c=0 ; c<numChannels ; c++) writeSample((long) (floatScale * (floatOffset + sampleBuffer[c][offset])));

offset ++;
frameCounter ++;
}

return numFramesToWrite;
}

public void close() throws IOException
{
// Close the input stream and set to null
if (iStream != null)
{
iStream.close();
iStream = null;
}

if (oStream != null) 
{
// Write out anything still in the local buffer
if (bufferPointer > 0) oStream.write(buffer, 0, bufferPointer);

// If an extra byte is required for word alignment, add it to the end
if (wordAlignAdjust) oStream.write(0);

// Close the stream and set to null
oStream.close();
oStream = null;
}

// Flag that the stream is closed
ioState = IOState.CLOSED;
}

public void display()
{
display(System.out);
}

public void display(PrintStream out)
{
out.printf("File: %s\n", file);
out.printf("Channels: %d, Frames: %d\n", numChannels, numFrames);
out.printf("IO State: %s\n", ioState);
out.printf("Sample Rate: %d, Block Align: %d\n", sampleRate, blockAlign);
out.printf("Valid Bits: %d, Bytes per sample: %d\n", validBits, bytesPerSample);
}

public static void main(String[] args)
{
if (args.length < 1)
{
System.err.println("Must supply filename");
System.exit(1);
}

try
{
for (String filename : args)
{
WavFile readWavFile = openWavFile(new File(filename));
readWavFile.display();

long numFrames = readWavFile.getNumFrames();
int numChannels = readWavFile.getNumChannels();
int validBits = readWavFile.getValidBits();
long sampleRate = readWavFile.getSampleRate();

WavFile writeWavFile = newWavFile(new File("out.wav"), numChannels, numFrames, validBits, sampleRate);

final int BUF_SIZE = 5001;

//                  int[] buffer = new int[BUF_SIZE * numChannels];
//                  long[] buffer = new long[BUF_SIZE * numChannels];
double[] buffer = new double[BUF_SIZE * numChannels];

int framesRead = 0;
int framesWritten = 0;

do
{
framesRead = readWavFile.readFrames(buffer, BUF_SIZE);
framesWritten = writeWavFile.writeFrames(buffer, BUF_SIZE);
System.out.printf("%d %d\n", framesRead, framesWritten);
}
while (framesRead != 0);

readWavFile.close();
writeWavFile.close();
}

WavFile writeWavFile = newWavFile(new File("out2.wav"), 1, 10, 23, 44100);
double[] buffer = new double[10];
writeWavFile.writeFrames(buffer, 10);
writeWavFile.close();
}
catch (Exception e)
{
System.err.println(e);
e.printStackTrace();
}
}
}

public static class WavFileException extends Exception
{
/**
* 
*/
private static final long serialVersionUID = 8236151366330602556L;

public WavFileException()
{
super();
}

public WavFileException(String message)
{
super(message);
}

public WavFileException(String message, Throwable cause)
{
super(message, cause);
}

public WavFileException(Throwable cause) 
{
super(cause);
}
}

//import java.io.*;
/*
public static class ReadExample
{
public static void main(String[] args)
{
try
{
// Open the wav file specified as the first argument
WavFile wavFile = WavFile.openWavFile(new File(args[0]));

// Display information about the wav file
wavFile.display();

// Get the number of audio channels in the wav file
int numChannels = wavFile.getNumChannels();

// Create a buffer of 100 frames
double[] buffer = new double[100 * numChannels];

int framesRead;
double min = Double.MAX_VALUE;
double max = Double.MIN_VALUE;

do
{
// Read frames into buffer
framesRead = wavFile.readFrames(buffer, 100);

// Loop through frames and look for minimum and maximum value
for (int s=0 ; s<framesRead * numChannels ; s++)
{
if (buffer[s] > max) max = buffer[s];
if (buffer[s] < min) min = buffer[s];
}
}
while (framesRead != 0);

// Close the wavFile
wavFile.close();

// Output the minimum and maximum value
System.out.printf("Min: %f, Max: %f\n", min, max);
}
catch (Exception e)
{
System.err.println(e);
}
}
}

//import java.io.*;

public static class WriteExample
{
public static void main(String[] args)
{
try
{
int sampleRate = 44100;     // Samples per second
double duration = 5.0;      // Seconds

// Calculate the number of frames required for specified duration
long numFrames = (long)(duration * sampleRate);

// Create a wav file with the name specified as the first argument
WavFile wavFile = WavFile.newWavFile(new File(args[0]), 2, numFrames, 16, sampleRate);

// Create a buffer of 100 frames
double[][] buffer = new double[2][100];

// Initialise a local frame counter
long frameCounter = 0;

// Loop until all frames written
while (frameCounter < numFrames)
{
// Determine how many frames to write, up to a maximum of the buffer size
long remaining = wavFile.getFramesRemaining();
int toWrite = (remaining > 100) ? 100 : (int) remaining;

// Fill the buffer, one tone per channel
for (int s=0 ; s<toWrite ; s++, frameCounter++)
{
buffer[0][s] = Math.sin(2.0 * Math.PI * 400 * frameCounter / sampleRate);
buffer[1][s] = Math.sin(2.0 * Math.PI * 500 * frameCounter / sampleRate);
}

// Write the buffer
wavFile.writeFrames(buffer, toWrite);
}

// Close the wavFile
wavFile.close();
}
catch (Exception e)
{
System.err.println(e);
}
}
}
*/

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T12:41:27.370

[http://www.labbookpages.co.uk/audio/javaWavFiles.html](http://www.labbookpages.co.uk/audio/javaWavFiles.html)将以下代码添加到 WavFile 类中。

```
// Short
    public int readFramesChanel(short[] sampleBuffer, int numFramesToRead,int channel) throws IOException, WavFileException
    {
        return readFramesChanel(sampleBuffer, 0, numFramesToRead,channel);
    }

    public int readFramesChanel(short[] sampleBuffer, int offset, int numFramesToRead,int channel) throws IOException, WavFileException
    {
        if (ioState != WavFile.IOState.READING) throw new IOException("Cannot read from WavFile instance");

        for (int f=0 ; f<numFramesToRead ; f++)
        {
            if (frameCounter == numFrames) return f;

            for (int c=0 ; c<numChannels ; c++)
            {
                if(channel==c)
                {
                    sampleBuffer[offset] = (short) readSample();
                    offset ++;
                }
                else
                    readSample();
            }

            frameCounter ++;
        }

        return numFramesToRead;
    }
    // ----
    public int readFrames(short[] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
    {
        return readFrames(sampleBuffer, 0, numFramesToRead);
    }

    public int readFrames(short[] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
    {
        if (ioState != WavFile.IOState.READING) throw new IOException("Cannot read from WavFile instance");

        for (int f=0 ; f<numFramesToRead ; f++)
        {
            if (frameCounter == numFrames) return f;

            for (int c=0 ; c<numChannels ; c++)
            {
                sampleBuffer[offset] = (short) readSample();
                offset ++;
            }

            frameCounter ++;
        }

        return numFramesToRead;
    }

    public int readFrames(short[][] sampleBuffer, int numFramesToRead) throws IOException, WavFileException
    {
        return readFrames(sampleBuffer, 0, numFramesToRead);
    }

    public int readFrames(short[][] sampleBuffer, int offset, int numFramesToRead) throws IOException, WavFileException
    {
        if (ioState != WavFile.IOState.READING) throw new IOException("Cannot read from WavFile instance");

        for (int f=0 ; f<numFramesToRead ; f++)
        {
            if (frameCounter == numFrames) return f;

            for (int c=0 ; c<numChannels ; c++) sampleBuffer[c][offset] = (short) readSample();

            offset ++;
            frameCounter ++;
        }

        return numFramesToRead;
    }

    public int writeFrames(short[] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
    {
        return writeFrames(sampleBuffer, 0, numFramesToWrite);
    }

    public int writeFrames(short[] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
    {
        if (ioState != WavFile.IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

        for (int f=0 ; f<numFramesToWrite ; f++)
        {
            if (frameCounter == numFrames) return f;

            for (int c=0 ; c<numChannels ; c++)
            {
                writeSample(sampleBuffer[offset]);
                offset ++;
            }

            frameCounter ++;
        }

        return numFramesToWrite;
    }

    public int writeFrames(short[][] sampleBuffer, int numFramesToWrite) throws IOException, WavFileException
    {
        return writeFrames(sampleBuffer, 0, numFramesToWrite);
    }

    public int writeFrames(short[][] sampleBuffer, int offset, int numFramesToWrite) throws IOException, WavFileException
    {
        if (ioState != WavFile.IOState.WRITING) throw new IOException("Cannot write to WavFile instance");

        for (int f=0 ; f<numFramesToWrite ; f++)
        {
            if (frameCounter == numFrames) return f;

            for (int c=0 ; c<numChannels ; c++) writeSample(sampleBuffer[c][offset]);

            offset ++;
            frameCounter ++;
        }

        return numFramesToWrite;
    } 
```

# windows - 运行jar文件后关闭批处理文件

> ID：12314638
> 
> 赞同：15
> 
> 时间：2012-09-07T08:42:11.643
> 
> 标签：windows, batch-file, jar

我写了一个运行 jar 文件的批处理文件。但是在运行 jar 文件之后，批处理文件不会关闭，直到 jar 文件也关闭。打开jar文件时如何关闭命令屏幕？（打开jar文件时我想关闭命令屏幕。）

我的批处理文件：

```
@echo off
java\jre7\bin\javaw.exe -jar ".\sample.jar"
exit 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-07T08:43:08.123

在命令的其余部分之前使用该[`start`命令。](http://ss64.com/nt/start.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-12T16:56:40.457

我最近遇到了这个问题，对于将来的其他人来说，完整而简单的方法就在这里：

```
@echo off
start javaw -jar "nameOfJar.jar"
exit 
```

这将启动 jar 并关闭 CLI。

重要的是 windows 环境的“start”命令和“javaw”命令。

# git - 如何将我的 github 存储库添加到本地 gerrit 服务器？

> ID：12314644
> 
> 赞同：2
> 
> 时间：2012-09-07T08:42:40.287
> 
> 标签：git, github, gerrit

在合并到我的 Github 存储库之前，我想使用 gerrit 进行代码审查。

[首先，我在此](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4.2/dev-readme.html)之后将 gerrit 服务器安装到本地机器上。以下是我在初始化 gerrit 服务器时输入的内容：

```
$ java -jar gerrit-war/target/gerrit-2.6-SNAPSHOT.war init -d ../test_site

*** Gerrit Code Review 2.4.2-689-g10b8774
*** 

Create '/Users/pj/git/test_site' [Y/n]? 

*** Git Repositories
*** 

Location of Git repositories   [git]: 

*** SQL Database
*** 

Database server type           [H2/?]: ?
       Supported options are:
         h2
         postgresql
         mysql
         jdbc
Database server type           [H2/?]: 

*** User Authentication
*** 

Authentication method          [OPENID/?]: ?
       Supported options are:
         openid
         openid_sso
         http
         http_ldap
         client_ssl_cert_ldap
         ldap
         ldap_bind
         custom_extension
         development_become_any_account
Authentication method          [OPENID/?]: development_become_any_account

*** Email Delivery
*** 

SMTP server hostname           [localhost]: 
SMTP server port               [(default)]: 
SMTP encryption                [NONE/?]: 
SMTP username                  : PJ Kim
PJ Kim's password              : 
              confirm password : 

*** Container Process
*** 

Run as                         [pj]: 
Java runtime                   [/Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/jre]: 
Copy gerrit.war to /Users/pj/git/gerrit/../test_site/bin/gerrit.war [Y/n]? 
Copying gerrit.war to /Users/pj/git/gerrit/../test_site/bin/gerrit.war

*** SSH Daemon
*** 

Listen on address              [*]: 
Listen on port                 [29418]: 

Gerrit Code Review is not shipped with Bouncy Castle Crypto v144
  If available, Gerrit can take advantage of features
  in the library, but will also function without it.
Download and install it now [Y/n]? 
Downloading http://www.bouncycastle.org/download/bcprov-jdk16-144.jar ... OK
Checksum bcprov-jdk16-144.jar OK
Generating SSH host key ... rsa... dsa... done

*** HTTP Daemon
*** 

Behind reverse proxy           [y/N]? 
Use SSL (https://)             [y/N]? 
Listen on address              [*]: 
Listen on port                 [8080]: 

*** Plugins
*** 

No plugins found.
Initialized /Users/pj/git/test_site
Executing /Users/pj/git/gerrit/../test_site/bin/gerrit.sh start
Starting Gerrit Code Review: OK
Waiting for server to start ... OK
Opening browser ...
$ 
```

浏览器打开，我创建了一个帐户，登录。然后我点击“项目>创建新项目”，只填写“项目名称”，然后点击“创建项目”按钮。

我可以看到在“项目 > 列表”上创建的项目名称，但不知道如何将我的 github 存储库（例如`git@github.com:philipjkim/vimrc.git`）连接到 gerrit 项目。感谢您的任何建议/更正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:57:15.037

如果您想将现有存储库（从 gi​​thub 或其他地方）推送到 Gerrit，我们刚刚在[基于 github 项目的让本地 gerrit 和存储库工作（包括分支）中讨论了这个](https://stackoverflow.com/questions/12269963/getting-local-gerrit-and-repository-working-including-branches-based-on-a-gith)问题。祝你好运！

# bash - 像 bash 中的键值对一样提取

> ID：12314657
> 
> 赞同：1
> 
> 时间：2012-09-07T08:43:18.897
> 
> 标签：bash

前几天我偶然发现了一个关于 SO 的问题。如果我想提取`HOSTNAME`/etc/sysconfig/network 中包含的值

```
NETWORKING=yes
HOSTNAME=foo 
```

现在我可以执行 grep 和 cut 来获得，`foo`但是对于类似的问题涉及一些 bash 魔法。我不知道要搜索什么，现在似乎找不到问题。它涉及类似的东西`#{HOSTNAME}`。好像它被`HOSTNAME`视为一个键和`foo`一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:16:09.927

如果该配置文件与 shell 语法兼容，只需将其包含为 shell 脚本即可。IIRC`/etc/sysconfig`类似 Red Hat 的发行版中的文件确实被设计为可被 shell 解析。请注意，这意味着

*   如果 shell 特殊字符可能最终出现在变量的值中，则必须正确引用它们。例如，`var="value with spaces"`需要引号。`var="with\$dollar"`需要反斜杠。
*   该脚本可能会运行将要执行的任意代码，因此只有在您信任其内容的情况下才可以这样做。

如果这些假设是有效的，那么你可以走简单的路线：

```
. /etc/sysconfig/network
echo "$HOSTNAME" 
```

关于引号和大括号，请参阅[$VAR vs ${VAR} 和 to quote or not to quote](https://unix.stackexchange.com/questions/4899/var-vs-var-and-to-quote-or-not-to-quote)。

# asp.net - 使用数据脚手架的 ASP 文本框编码

> ID：12314659
> 
> 赞同：1
> 
> 时间：2012-09-07T08:43:20.473
> 
> 标签：asp.net, encoding, textbox, scaffolding

我正在使用数据脚手架从数据库开始创建网站，但我发现文本框显示的字符串编码存在问题。

如果将显示的字符串包含特殊字符（如`<>èé`等），则文本框会显示代表代码作为示例`&#233;`，`&#232;`而不是字符。

经过一些测试，我发现它取决于我绑定到文本框的 Text 属性的内容。

如果我使用`FieldValueString`它显示代码

```
<asp:TextBox ID="TextBox1" runat="server" CssClass="DDControl" 
TextMode="MultiLine" Text='<%# FieldValueString %>' Columns="80" Rows="5"/> 
```

如果使用“ **FieldValueEditString** ”，它会正确显示字符

```
<asp:TextBox ID="TextBox1" runat="server" CssClass="DDControl"
TextMode="MultiLine" Text='<%# FieldValueEditString %>' Columns="80" Rows="5"/> 
```

有人知道为什么吗？`FieldValueString`和有什么区别`FieldValueEditString`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:59:11.740

FieldValueString automatically and necessarily does HTML encoding and places the value as straight text on the page. FieldValueEditString represents that same text in Edit mode. In that case, it generates a Text Box with value property set to the text.

# excel - 小时到工作日

> ID：12314669
> 
> 赞同：3
> 
> 时间：2012-09-07T08:44:01.143
> 
> 标签：excel, excel-2007, excel-formula

在我工作的地方，我没有加班费，但我会为我工作的加班累积假期。我有以下电子表格，它计算我已经完成了多少加班并将其总计`D15`。

现在我想根据每天 8 小时计算这是多少天。在`D16`中，我已经完成`=D15/8`并将其格式化为`h.mm \d\a\y\s`，但这显示为`2.26 days`而不是`2.4375 days`。

使用的正确公式是`D16`什么？

![在此处输入图像描述](../Images/eee2173626319faff955e07479b83754.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:47:36.553

*读者注意：*这个问题导致了多种解决方案，其中一些在评论中进行了讨论。这是找到的解决方案的摘要。

* * *

**第一个解决方案**

```
=(HOUR(D15)+MINUTE(D15)/60)/8 
```

**解释**

Excel 中的日期和时间**存储为序列号**，`19:30`实际上也是如此`0.8125`。
所以，如果你把它除以`8`，你会得到`0.1015625`。
后一个值是值得的`2.26 days`

* * *

**OP 的版本**（感谢 Danny Becket (OP)） - 请参阅下面的评论。
此解决方案现在处理 > 24 小时。

```
=((DAY(D20)*24)+HOUR(D20)+(MINUTE(D20)/60))/8 
```

或更好（归功于[Barry Houdini](https://stackoverflow.com/users/1124287/barry-houdini)）：

```
=((INT(D20)*24)+HOUR(D20)+(MINUTE(D20)/60))/8 
```

前一个公式对大值有限制，在这里可能不相关，但如果`D20`是 800:00，那么你会得到错误的答案（7 天而不是 100 天）。这可能是因为`DAY`函数为您提供日历日，它将在 31 时“重置”，最好`INT`代替`DAY`.

* * *

**另一个易于理解的版本**

除以一天的长度作为时间值：

```
=D15/"8:00" 
```

如果工作日长度发生变化，更容易改变

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T23:57:30.657

进入：

在`B3` **8:3**
在`C3` **16:3**
在`D3` `=IF(B3<C3,C3-B3-1/3,2/3-B3+C3)`

根据需要选择`B3:D3`，格式化`hh:mm`并向下复制。

求和`ColumnD`并附`*3`加到公式，但格式为数字。

通过覆盖单元格`ColumnB`和/或`ColumnC`根据需要添加数据（默认不添加到总数中）。

*   处理加班到下一个正常开始时间（即包括过去的午夜，新的序列号）。`1/3`因为标准工作日是 8 小时（日期串行计数器是 24 小时）。`B3`并且`C3`可以进行硬编码，但 (i) 没有必要并且 (ii) 允许更大的灵活性。如果要轻松识别非标准开始/结束可以使用条件格式。

*   不涉及周末加班，但可以很容易地进行调整（例如添加列，在该额外列中用 8 标记周末，然后将 8 [1/3] 添加到完成时间）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-21T16:28:45.827

确保 D15 的数字格式为 [h]:mm 然后将 D16 设置为 =sum(D15/"8:00") 应该可以正常工作，这就是我跟踪我的年假的情况，我每周工作 37 小时，休假日为归类为 7h24m 或半天假为“3:42”

我已在电子表格的单元格 K2 中将其作为累积数字分配为 [h]:mm，然后我将 K3=SUM(K2/"7:24") 的天数格式化为一般数字

您可能还需要将 excel 中的日期基准更改为 1904 日期系统[http://support.microsoft.com/kb/182247/en-gb](http://support.microsoft.com/kb/182247/en-gb) 以使其正常工作（只有当您像我一样有负时间时才会出现问题计算弹性工时）

# c# - 在 C# 中实现多个计时器

> ID：12314673
> 
> 赞同：0
> 
> 时间：2012-09-07T08:44:14.320
> 
> 标签：c#, winforms, timer, backgroundworker

我正在开发一个 Windows 窗体应用程序，其中我有几个所谓的“服务”，可以从 Twitter、Facebook、天气、金融等各种服务中轮询数据。现在我的每个服务都有其单独的轮询间隔设置，所以我想我可以`System.Windows.Forms.Timer`为我的每个服务实现一个并相应地设置它的`Interval`属性，以便每个计时器以预设的间隔触发一个事件，这将导致服务提取新数据最好通过 async 异步`BackgroundWorker`。

这是最好的方法吗？或者它会减慢我的应用程序导致性能问题。有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:19:16.630

你可以用一个来做`Timer`，只需要更聪明的间隔方法：

```
public partial class Form1 : Form
{
    int facebookInterval = 5; //5 sec
    int twitterInterval = 7; //7 sec

    public Form1()
    {
        InitializeComponent();

        Timer t = new Timer();
        t.Interval = 1000; //1 sec
        t.Tick += new EventHandler(t_Tick);
        t.Start();
    }

    void t_Tick(object sender, EventArgs e)
    {
        facebookInterval--;
        twitterInterval--;

        if (facebookInterval == 0)
        {
            MessageBox.Show("Getting FB data");
            facebookInterval = 5; //reset to base value
        }

        if (twitterInterval == 0)
        {
            MessageBox.Show("Getting Twitter data");
            twitterInterval = 7; //reset to base value
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:06:51.010

你并不真的需要 BackgroundWorker，因为 WebClient 类有 Async 方法。

因此，您可能只需为每个“服务”拥有一个 WebClient 对象，并使用如下代码：

```
facebookClient = new WebClient();
facebookClient.DownloadStringCompleted += FacebookDownloadComplete;
twitterClient = new WebClient();
twitterClient.DownloadStringCompleted += TwitterDownloadComplete;

private void FacebookDownloadComplete(Object sender, DownloadStringCompletedEventArgs e)
{
    if (!e.Cancelled && e.Error == null)
    {
        string str = (string)e.Result;
        DisplayFacebookContent(str);
    }
}
private void OnFacebookTimer(object sender, ElapsedEventArgs e)
{
     if( facebookClient.IsBusy) 
         facebookClient.CancelAsync(); // long time should have passed, better cancel
     facebookClient.DownloadStringAsync(facebookUri);
} 
```

# jakarta-ee - 必须在 Java Web 应用程序中按几次提交按钮

> ID：12314674
> 
> 赞同：0
> 
> 时间：2012-09-07T08:44:14.720
> 
> 标签：jakarta-ee, submit

我有一个 java web 应用程序，我正在使用提交按钮以其中一种形式提交一些数据。我使用小服务程序。但是，在进入下一步之前，我必须按几次提交按钮。我会上传代码或提供更多信息，但我不确定要上传哪个部分，我也不知道这个问题是关于什么的。有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:46:53.440

如果您使用的是 Firefox，我要做的第一件事是打开 FireBug，或者按 F12 进入 IE。从那里您将能够看到发送到服务器的请求和响应。单击按钮时请注意这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:57:31.807

有一个非常有用的工具来处理请求：

[https://addons.mozilla.org/en-US/firefox/addon/tamper-data/](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/)

它是一个 FireFox 插件，但会监控所有请求并让您在发送之前更改它们。

# c# - 来自字符串中合并字段的正则表达式 MatchCollection

> ID：12314683
> 
> 赞同：0
> 
> 时间：2012-09-07T08:44:36.153
> 
> 标签：c#, regex, string, match

我有一个包含文档内容的大字符串。它包含许多合并字段，我想获取它们以生成合并字段的值。

字符串可能是这样的：

```
string text = "This is a test with merge fields. [First_field], [Second_field] and [Third_field]. Not to forget the [Forth_field]." 
```

我想从中得到的列表是这样的：

*   [First_field]
*   [第二字段]
*   [第三场]
*   [Forth_field]

我知道它可以在 Regex 中完成，但这绝对不是我的强项。我已经尝试使用以下代码，但它似乎创建了一个结果（从第一个和最后一个括号）：

```
Regex.Matches(text, @"\[.*\]", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:59:07.790

您正在匹配 和 之间的每个`[`字符`]`。这**包括** `]`，意味着你吞下每一个领域。您需要的称为**惰性**匹配，可以`?`在量词之后使用 a 来完成：

```
@"\[.*?\]" 
```

或者，您可以只匹配**除 之外** `]`的任何字符，这是使用字符类的否定来完成的`[^]`

```
@"\[[^\]]*\]" 
```

# c# - Outlook 电子邮件编码

> ID：12314684
> 
> 赞同：0
> 
> 时间：2012-09-07T08:44:43.313
> 
> 标签：c#, asp.net, .net, outlook, exchange-server

我正在使用 SmtpClient 发送一个简单的 MailMessage

```
MailMessage mailMessage = new MailMessage("xyz@mydomain.com", "target@mydomain.com");
mailMessage.Subject = string.Format("{0} Notification Item", communication); 
```

在我的身体里，我有。

```
mailMessage.BodyEncoding = Encoding.UTF8;
mailMessage.IsBodyHtml = true;

string Message = string.Format("You have received a new {0} notification from: {1} on Site: {2} please click <a href=\"{3}\">HERE</a> To view this notification item. <br/>Url: {3}<br/>",
new object[] { communicationType.ToString(), Employee.Name, Employee.DefaultSite.Name, thebuilder.Uri.OriginalString }); 
```

现在，当我通过交换将电子邮件发送到我的 Outlook 帐户时，这一切都有效。它将 URL 更改为读取 %3F 而不是“？” 根据我的阅读，这是因为 Microsoft Exchange 会进行 URL 编码。

知道如何解决这个问题，或者任何人都知道为什么这行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:28:02.993

解决方案是不使用 URL Builder 添加“？” 在其 (QueryString) 属性中，它会将其转换为 %3F。

# javascript - jquery after() 引用异常

> ID：12314685
> 
> 赞同：0
> 
> 时间：2012-09-07T08:44:45.493
> 
> 标签：javascript, jquery, json

我试图这样做：

当我通过我的 UI 添加学生时，使用 AJAX 应该将一行附加到现有的学生列表（表）中

因此，我将 UI 的字段发送到我的控制器，完成了 db 条目，从我的控制器传递了一个 Json 对象，其中包含我想要显示的所有字段（这一切都很完美）。

在我看来我做到了

```
success : function(result){
res = eval('('+result+')');
//Here the problem, begins , appending a row to the existing table:
$('#my_table tr:last').after('<tr>
<td>'+res.name+'</td>
<td>'+res.address+'</td>
<td><a href="javascript:void(0)">'+ res.flag== true ? "Male" : "Female" +'</a></td> // this is where im stuck !
</tr>')
} 
```

输出是，它诚实地检查标志值，即如果标志==真它打印男性，但它不显示链接并且性别是唯一显示的东西，而不是名称和地址

如果我删除线

```
 <td><a href="javascript:void(0)">'+ res.flag== true ? "Male" : "Female" +'</a></td> 
```

它正确打印名称和地址，如果我添加用于检查性别的行，它只打印性别并且它不是锚标记，就像它不是链接一样

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:50:44.943

尝试使用这个

```
<a href="javascript:void(0)">'+ (res.flag== true ? "Male" : "Female") +'</a> 
```

只是括号的不同，但可能会做的事情

# android - Facebook OAuth 对话框仅在第二次有效

> ID：12314687
> 
> 赞同：2
> 
> 时间：2012-09-07T08:45:06.597
> 
> 标签：android, facebook, cordova, facebook-oauth

我正在构建一个使用 Facebook 身份验证的带有 phonegap 的 android 应用程序。问题是，当我第一次单击登录按钮时，会出现登录框，但在我登录后，OAuth 对话框只显示“找不到您请求的页面”。我必须按“返回”按钮并再次单击登录按钮，然后出现 OAuth 对话框，其他一切都很好。有谁知道发生了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:28:24.400

我们在 iOS 上遇到了同样的问题并找到了解决方法。我们的 facebook 应用程序被配置为**Mobile Web**。我们已将其更改为**使用 Facebook 登录的网站**（在基本设置中）。我们还在高级设置中启用了**2012 年 10 月的重大更改**和**事件时区**。

# image - 自定义卫星图像作为ggplot中的背景

> ID：12314691
> 
> 赞同：1
> 
> 时间：2012-09-07T08:45:22.917
> 
> 标签：image, r, ggplot2

我想使用卫星图像作为背景来绘制多边形、点等......使用`ggplot`.

我设法将谷歌地球图像与该`ggmap`功能一起使用，但我宁愿从我自己的图像中合成一个假彩色作为背景。由于此图像相当重 (>2GB)，我在 Arcmap 中准备了假彩色合成，并将其导出为 .jpeg 并附加坐标 (.jgw) 以降低分辨率。

问题是如何将此图像添加为 ggplot 中的（地理参考基础）图层？使用 导入 jpeg（938 行和 1743 列）`readGDAL`时，会使用三个 (RGB) 波段创建 SpatialGridDataFrame。

所有帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:39:53.247

对象的核心部分`ggmap`只是具有某些属性的颜色矩阵（使用该`str`函数）。

您应该能够读取 jpeg 文件并从中创建栅格，然后只需更改属性以匹配`ggmap`对象的属性（主要是类和边界框信息）。然后，您应该能够将其与该`ggmap`功能一起使用。

# r - 将图例中的 ggplot 彩色线条更改为正方形或圆形

> ID：12314693
> 
> 赞同：8
> 
> 时间：2012-09-07T08:45:35.510
> 
> 标签：r, ggplot2, legend-properties

而不是当前构成图例键的灰色背景上的彩色线条，我希望键标签旁边有颜色的正方形或圆形，以便颜色易于看到。我怎样才能做到这一点？以下是用作示例的代码片段：

```
 mry <- do.call(rbind, by(movies, round(movies$rating), function(df) {
   nums <- tapply(df$length, df$year, length)
   data.frame(rating=round(df$rating[1]), year = as.numeric(names(nums)),
   number=as.vector(nums))
 }))

ggplot(mry, aes(x=year, y=number, colour=factor(rating))) + geom_line() +
scale_colour_brewer(palette="YlGnBu") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:12:26.433

一个黑客来做圈子....

```
ggplot(mry, aes(x=year, y=number, colour=factor(rating))) +
  scale_colour_brewer(palette="YlGnBu") +  
  geom_point()  +      
  geom_point(size=5,colour="white",show_guide=FALSE)  +
  opts(
    panel.background = theme_rect(fill =  "transparent"), 
    panel.grid.minor = theme_blank(),
    panel.grid.major = theme_blank(),
    plot.background = theme_rect(fill = "transparent",colour = NA)
  ) +  geom_line(show_guide=FALSE) 
```

![在此处输入图像描述](../Images/2279d980e94038a60efff4e595f44529.png)

# php - 如何在 PHP 中获取 MySQL 函数的参数

> ID：12314697
> 
> 赞同：2
> 
> 时间：2012-09-07T08:45:38.883
> 
> 标签：php, mysql, regex, function, parameters

我正在寻找一种方法来获取 MySQL 函数的参数并将它们放在 PHP 中的数组中。例子：

```
$field = "CONCAT(fieldA, ' ', fieldB)"; 
```

到目前为止我所做的是：

```
preg_match("/^([A-Z_]*)\((.*)\)/", $field, $matches)
$parameters = explode(",", $matches[2]); 
```

这对上面的例子很有效。但是为以下示例尝试相同的解决方案：

```
$field = "CONCAT_WS(', ', fieldA, fieldB)"; 
```

将导致：

```
Array
(
    [0] => '
    [1] =>  '
    [2] =>  fieldA
    [3] =>  fieldB
) 
```

我想得到：

```
Array
(
    [0] => ', '
    [1] =>  fieldA
    [2] =>  fieldB
) 
```

我正在寻找一种通用的方法，而不仅仅是我提供的示例。它应该适用于所有类型的参数；字符串、字段名称和函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:53:02.847

您可以按原样连接它，并在分解它`array_filter($result)`时简单地在结果上使用 - 通过不指定回调。空字符串将返回 false，因此将删除导致问题的字符串。（如果我正确理解您的问题）

或者，使用不同的分隔符并在其上爆炸？

编辑：根据您的问题，您可以简单地正常获取字段并将它们作为数组返回吗？

基于 PDO

```
<?php
    $sth = $dbh->prepare("select ', ' as f1, fieldA as f2, fieldB as f3 from tableName");
    $sth->execute();

    print("PDO::FETCH_BOTH: ");
    print("Return next row as an array indexed by both column name and number\n");
    $result = $sth->fetch(PDO::FETCH_BOTH);
    print_r($result);
    print("\n");
?> 
```

输出：

```
Array
(
    [0] => ', '
    [f1] => ', '
    [1] =>  fieldA
    [f2] =>  fieldA
    [2] =>  fieldB
    [f3] =>  fieldB
) 
```

# cxf - CXF WSS4J 拦截器文档/手册

> ID：12314699
> 
> 赞同：3
> 
> 时间：2012-09-07T08:45:47.833
> 
> 标签：cxf, wss4j

我花了相当多的时间寻找教程并在 Web 服务目录上实现签名和加密。现在我需要扩展该功能以允许每个用户拥有自己的签名和加密密钥。

出于这个原因，我开始四处寻找有关如何使用 WSS4J 拦截器的实际文档，但我终其一生都找不到任何东西。我能找到的最好的是[http://cxf.apache.org/javadoc/latest/](http://cxf.apache.org/javadoc/latest/) API 中的 SecurityConstants 类描述。

所以我的问题是：有谁知道我在哪里可以找到一些关于拦截器类的实际文档类型著作。具体来说：拦截器构造函数中的对象映射可以进入什么？应该如何配置这些对象？

我不介意大量阅读，事实上我现在更喜欢它。有一百万个博客和教程提供了基本的实施建议，但我需要的是一些实际的文档。任何人？

如果不出意外，我什至会对半生不熟的 javadoc 感到满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:44:47.383

请检查这个解释拦截器机制的 URL。它的好一个。

[https://sites.google.com/site/ddmwsst/ws-security-impl](https://sites.google.com/site/ddmwsst/ws-security-impl)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:01:27.920

老实说，我建议此时不要直接在 CXF 中使用 WSS4J 拦截器。相反，定义一个 WS-Security 策略片段，该片段将准确描述安全要求并将其附加到 WSDL 中。然后为策略运行时需要的附加信息添加适当的属性（描述为[http://cxf.apache.org/docs/ws-securitypolicy.html ）。](http://cxf.apache.org/docs/ws-securitypolicy.html)

WS-Security Policy 内容完全基于标准，并且会受到所有各种运行时的支持。安全要求成为合同（WSDL）的一部分，这也很重要。

# php - 如何从数据库填充的下拉框中删除项目

> ID：12314700
> 
> 赞同：-1
> 
> 时间：2012-09-07T08:45:52.970
> 
> 标签：php, mysql

以下是我到目前为止的代码。

```
<?php

$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQL="SELECT sbstart, sbend FROM newchk";
$run=mysql_query($SQL,$con) or die ("SQL Error");
$nor=mysql_num_rows($run);

echo "<select STYLE='width:230px'>";
while ($rec = mysql_fetch_array($run))
{
for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
{
echo "<option>$i<br></option>";
}
}
echo "</select>";
?> 
```

这是数据库： +--------+---------+ |sbstart | 弯曲 | | ***_* __ *_* __ *_* __** |
| 200 | 205 | | 400 | 405 | | | |

在下拉列表前面我有“保存”按钮，它希望保存用户从下拉列表中选择的数字以及另一个文本字段输入。完成此操作后，我需要将用户选择的数字从下拉列表中删除，以便另一个选择下拉列表的用户看不到数字。（数据库只有开始和结束的数字，但下拉菜单将填充两者之间的所有数字。）

示例：数据库对于每个起始编号和结束编号都有两个数据行。起始编号为 200、400，结束编号为 205、405。如果用户从下拉列表中选择 202 选项并保存相同的下次下拉列表中应出现 202。这就是我需要的。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:51:30.590

您必须向标签添加[`value`](http://www.w3schools.com/tags/att_option_value.asp)属性才能将其放入数组中。在您的示例中：`option``$_POST``'<option value="'.$i.'">'`

如果你有表格：

```
<form action="script.php" method="post">
    <select name="myName">
       <option value="0">0</option>
       <option value="1">1</option>
    </select>
</form> 
```

当您提交此表单时，您可以获得它的价值：`$_POST['myName']`

**注意：请**原谅我提供了 w3schools 的链接。这是谷歌首先展示的。

# c# - 单元测试 EF DbUpdateConcurrencyException 处理

> ID：12314704
> 
> 赞同：3
> 
> 时间：2012-09-07T08:46:01.463
> 
> 标签：c#, entity-framework, unit-testing, mocking, moq

我需要帮助测试以下代码

```
public virtual void Update(T entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }

        int iretries = 0;
        bool success = false;

        do
        {
            try
            {
                this.context.SaveChanges();
                success = true;
            }
            catch (DbUpdateConcurrencyException ex)
            {
                // Get the current entity values and the values in the database
                // as instances of the entity type
                var entry = ex.Entries.Single();
                var databaseValues = entry.GetDatabaseValues();

                // Choose an initial set of resolved values. In this case we
                // make the default be the values currently in the database: StoreWins
                object resolvedValues = ResolveConcurrency(databaseValues.ToObject());

                // Update the original values with the database values and
                // the current values with whatever the user choose.
                entry.OriginalValues.SetValues(databaseValues);
                entry.CurrentValues.SetValues(resolvedValues);

                // give up after n retries
                if (++iretries == NUMBER_OF_CONC_RETRIES)
                    throw;
            }
            catch (Exception)
            {
                //rethrow 
                throw;
            }
        } while (!success);
    } 
```

我想对`DbUpdateConcurrencyException`分支进行单元测试。

因此，一个简单的测试场景是：

*   创建一个新的`DbUpdateConcurrencyException`
*   模拟`SaveChanges`抛出上述异常
*   验证是否`SaveChanges`被调用了一些`NUMBER_OF_CONC_RETRIES`
*   断言该`Update`方法重新抛出异常

在当前状态下，无法测试上述测试场景，我无法模拟异常以包含`IEnumerable<DbEntityEntry>`单个`DbEntityEntry`; 我不能嘲笑`GetDatabaseValues()`, 等等。

一个简单的解决方案是插入一个新的抽象层；假设使用一个接口来抽象当前位于 catch 块中的整个代码，并提供一个什么都不做的模拟。

但是我最终会遇到想要测试该接口的实现的情况，并且最终会遇到与上述相同的问题。我怎样才能嘲笑`DbUpdateConcurrencyException`,`GetDatabaseValues`等

我正在使用 moq 进行模拟。

谢谢您的意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:12:08.450

如果您无法模拟某些内容，则必须将其隐藏在可以在测试中模拟或覆盖的其他内容后面。您的测试实际上不需要使用所有这些东西来加载值并将它们设置在条目中 - 这完全取决于 EF，并且在模拟上下文时您不会对其进行测试，因为这意味着重新实现 EF 的逻辑`SaveChanges`。您需要做的就是：

```
catch (DbUpdateConcurrencyException ex) {
    RefreshValues(ex);

    // give up after n retries
    if (++iretries == NUMBER_OF_CONC_RETRIES)
        throw;
} 
```

方法在哪里，您`RefreshValues`可以`protected virtual`通过提供类的测试版本（甚至可以使用 Moq 实现）或通过从此类继承测试并直接在测试类中覆盖方法来在测试中覆盖它。

要设置 Moq，您需要公开 SaveChanges 方法的上下文接口：

```
var contextMock = new Mock<IContext>();
contextMock.Setup(m => m.SaveChanges())
           .Callback(m => throw new DbUpdateConcurrencyException()); 
```

如果您需要测试它是否适用于几次抛出，您需要在测试中保留计数器并在回调中使用它来决定是否抛出。

# java - 我正在执行一个返回 count 的查询。当我尝试从 resultSet 获取值时抛出异常

> ID：12314705
> 
> 赞同：0
> 
> 时间：2012-09-07T08:46:02.123
> 
> 标签：java, sql, resultset

询问 ：

```
 select count(*) from table_name 
```

数据库： Sqlserver

```
totalrowcount = Integer.parseInt(resultSet.getString(1)); 
```

当我尝试执行返回计数的查询时，当我尝试从`resultSet`.

例外：

```
com.microsoft.sqlserver.jdbc.SQLServerException: Could not find stored procedure 'count'.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(Unknown Source)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeQuery(Unknown Source)
    at com.heb.endeca.util.BatchManagerHelper.getRowCount(BatchManagerHelper.java:91)
    at com.heb.endeca.util.BatchManagerHelper.generateFeed(BatchManagerHelper.java:70)
    at com.heb.endeca.batch.BatchManager.startEndecaBatchManager(BatchManager.java:87)
    at com.heb.endeca.batch.BatchManager.main(BatchManager.java:50) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T20:03:11.690

Count 返回一个数值。

```
select count(*) num_rows from table_name

totalrowcount = 0;

if(rs.next())
{
    totalrowcount = rs.getInt("num_rows");
} 
```

# java - 我如何保持哈希集按字母顺序排列？

> ID：12314710
> 
> 赞同：12
> 
> 时间：2012-09-07T08:46:22.813
> 
> 标签：java, collections, hashset

我有*大量*由名称/值对定义的对象的集合。我需要快速访问它们的任何值，并能够按名称按字母顺序返回它们。首先，我想我可能会使用 HashMap 来快速访问。但它没有给我任何命令。我决定切换到 LinkedHashSet。
它的问题是我需要能够在列表的正确位置**插入**新对象，但 LinkedHashSet 不允许这样做。我还需要能够通过索引和名称访问对象。

将感谢任何想法。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-07T08:51:01.277

为什么不试试[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)。您的列表不允许重复吗？如果是这样，那么 Set 应该没问题。当您添加字符串并实现 Comparator 时，该集合将自动为您排序

如果你有

```
Set<String> s = new TreeSet<String>();
s.add("B");
s.add("C");
s.add("A"); 
```

那么集合的内容将是 A, B, C

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-07T08:49:49.067

您可以使用[树图](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)

> 基于红黑树的 NavigableMap 实现。地图根据其键的自然顺序排序，或者由地图创建时提供的 Comparator 排序，具体取决于使用的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:50:02.390

我会使用一个 TreeSet，它是一个 SortedSet。您需要根据名称将自定义类定义为 Comparable ，并且您的集合将始终进行排序。

注意：排序集合的访问时间为 O(log N)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T08:54:28.930

您可以使用[比较](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)器..

```
 Collections.sort(yourCollection, new Comparator() {

    public int compare(YourObject o1, YourObject o2) {
         // put Comparesion according to your requirement 
        return AnyObject;
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T08:50:08.797

你看过[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)吗？它基于有助于维持排序的红黑树，但仍然提供快速访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T08:51:38.930

A`TreeMap`应该满足您的要求。如果您的键不是文字，则`Comparator`在 TreeMap 构造函数中使用适当的。

# java - 如何在ajax请求页面中获取会话变量？

> ID：12314712
> 
> 赞同：0
> 
> 时间：2012-09-07T08:46:34.353
> 
> 标签：java, javascript, ajax, jsp, tomcat

我使用以下代码使用 ajax 将请求发布到另一个 jsp 页面。我已经在发出请求的当前页面中有一个会话变量（stdId）。

```
xmlhttp.open("POST","ajaxAnsRun.jsp",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("notId="+we+""); 
```

现在在 ajaxAnsRun.jsp 页面中，我使用以下代码来获取会话变量。

```
<jsp:useBean id="obj" class="homePack.home" />
<%
String notId=request.getParameter("notId");
if(request.getSession(false).getAttribute("stdId") == null)
    {
        out.println("Error");
    }
else
    {
        stdId=String.valueOf(session.getAttribute("stdId"));
    }

String result="";
result= obj.hideAnsNotify(notId,stdId);
%> 
```

我的服务器出现以下错误

```
2012-09-06 17:22:25 StandardWrapperValve[jsp]: Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: Unable to compile class for JSP

An error occurred at line: 2 in the jsp file: /profiles/Home/ajaxAnsRun.jsp

Generated servlet error:
[javac] Compiling 1 source file

C:\Program Files\Apache Group\Tomcat 4.1\work\Standalone\localhost\Indus\profiles\Home\ajaxAnsRun_jsp.java:66: cannot find symbol
symbol  : variable stdId
location: class org.apache.jsp.ajaxAnsRun_jsp
    stdId=String.valueOf(session.getAttribute("stdId"));
    ^

An error occurred at line: 2 in the jsp file: /profiles/Home/ajaxAnsRun.jsp

Generated servlet error:
C:\Program Files\Apache Group\Tomcat 4.1\work\Standalone\localhost\Indus\profiles\Home\ajaxAnsRun_jsp.java:70: cannot find symbol
symbol  : variable stdId
location: class org.apache.jsp.ajaxAnsRun_jsp
result= obj.hideAnsNotify(notId,stdId);
                            ^
2 errors

at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:130)
at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:293)
at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:340)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:352)
at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:474)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:184)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:260)
at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2415)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)
at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)
at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)
at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)
at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:432)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:386)
at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:534)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:530)
at java.lang.Thread.run(Thread.java:619) 
```

顺便说一句，我正在使用 tomcat。

**如何在 ajaxAnsRun.jsp 页面中获取会话变量？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:50:24.273

这里的问题`stdId`没有定义。这就是它给出编译时错误的原因。像下面这样定义`stdId`为字符串

```
String stdId=String.valueOf(session.getAttribute("stdId")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:52:21.637

您的代码没有`stdId`在 ajaxAnsRun.jsp 中声明变量。它只声明 notId 变量。你的代码应该是。这就是发生编译错误的原因。

```
<jsp:useBean id="obj" class="homePack.home" />
<%
String notId=request.getParameter("notId");
String stdId = null;
if(request.getSession(false).getAttribute("stdId") == null)
    {
        out.println("Error");
    }
else
    {
        stdId=String.valueOf(session.getAttribute("stdId"));
    }

String result="";
result= obj.hideAnsNotify(notId,stdId);
%> 
```

# tabs - 如何为表单编写 NSIS 代码？

> ID：12314714
> 
> 赞同：0
> 
> 时间：2012-09-07T08:46:37.077
> 
> 标签：tabs, ms-office, nsis, portability

我使用的是 Thinstall.com 制作的[Office Tab Portable 。](http://www.mediafire.com/?26h9ndtqgkdtvpu)它有！）OfficeTabPortable.exe 到活动软件。我想知道如何为 !)OfficeTabPortable.exe 文件设计模板 NSIS。我知道它使用“InstallOptions”插件来制作它。但我是 NSIS 的新手。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:37:36.790

[nsDialogs](http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html)和[InstallOptions](http://nsis.sourceforge.net/Contrib/InstallOptions/Readme.html)都可以用来创建自定义页面。

它们是默认安装的一部分，并且包含示例脚本，您应该看看那些...

# c# - c# 反射检查属性

> ID：12314720
> 
> 赞同：0
> 
> 时间：2012-09-07T08:47:06.210
> 
> 标签：c#, mongodb, serialization, reflection, bson

我想检查特定运行时类型是否包含具有特定属性的属性，如下所示：

```
 public void Audit(MongoStorableObject oldVersion, MongoStorableObject newVersion)
    {
        if(oldVersion.GetType() != newVersion.GetType())
        {
            throw new ArgumentException("Can't Audit versions of different Types");
        }
        foreach(var i in oldVersion.GetType().GetProperties())
        {
            //The statement in here is not valid, how can I achieve look up of a particular attribute
            if (i.GetCustomAttributes().Contains<Attribute>(MongoDB.Bson.Serialization.Attributes.BsonIgnoreAttribute)) continue;
            //else do some actual auditing work
        }
    } 
```

但是该声明无效，您能告诉我如何实现对这样的属性的特定属性的查找吗？谢谢，

更新：

我发现这不会让智能感知抱怨：

```
if (i.GetCustomAttributes((new MongoDB.Bson.Serialization.Attributes.BsonIgnoreAttribute()).GetType(),false).Length > 0) continue; 
```

但我仍然不确定这也会做我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:53:26.207

改变：

```
 if (i.GetCustomAttributes().Contains<Attribute>(MongoDB.Bson.Serialization.Attributes.BsonIgnoreAttribute)) continue; 
```

到

```
if (i.GetCustomAttributes().Any(x=> x is MongoDB.Bson.Serialization.Attributes.BsonIgnoreAttribute)) continue; 
```

修改：

```
public void Audit(MongoStorableObject oldVersion, MongoStorableObject newVersion)
    {
        if(oldVersion.GetType() != newVersion.GetType())
        {
            throw new ArgumentException("Can't Audit versions of different Types");
        }
        foreach(var i in oldVersion.GetType().GetProperties())
        {
            //The statement in here is not valid, how can I achieve look up of a particular attribute
             if (i.GetCustomAttributes().Any(x=> x is MongoDB.Bson.Serialization.Attributes.BsonIgnoreAttribute)) continue;
            //else do some actual auditing work
        }
    } 
```

澄清：

GetCustomAttributes() 返回属性上的属性对象列表。您需要遍历它们并检查它们的任何类型是否属于 BsonIgnoreAttribute。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:52:08.543

```
private static void PrintAuthorInfo(System.Type t)
{
    System.Console.WriteLine("Author information for {0}", t);

    // Using reflection.
    System.Attribute[] attrs = System.Attribute.GetCustomAttributes(t);  // Reflection. 

    // Displaying output. 
    foreach (System.Attribute attr in attrs)
    {
        if (attr is Author)
        {
            Author a = (Author)attr;
            System.Console.WriteLine("   {0}, version {1:f}", a.GetName(), a.version);
        }
    }
} 
```

[http://msdn.microsoft.com/en-us/library/z919e8tw.aspx](http://msdn.microsoft.com/en-us/library/z919e8tw.aspx)

# asp.net - 少数.net项目如何使用相同的数据集

> ID：12314724
> 
> 赞同：0
> 
> 时间：2012-09-07T08:47:25.527
> 
> 标签：asp.net, dataset, asp.net-mvc-4

我是asp.net的新手。

案子：

1.  每天运行一次的“.net 控制台应用程序”运行代码并将数据插入 MySql，然后将此数据放入 DataSet。

2.  我有“ASP.NET MVC4 网站”，它应该访问（仅用于读取）数据集中 1 个应用程序存储的数据。

这 2 个应用程序的代码和结构应该是什么，才能使它们与相同的 DataSet 一起工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:48:50.767

创建一个包含数据访问代码的单独类库，从控制台应用程序和网站应用程序引用它。请记住，您的连接字符串必须是控制台 app.config 和网站 web.config 的一部分。

# c - 用于 C 语言单元测试的 Eclipse 插件

> ID：12314728
> 
> 赞同：5
> 
> 时间：2012-09-07T08:48:02.480
> 
> 标签：c, eclipse, unit-testing

我知道有一个用于 junit 测试的 Eclipse 插件可用。这就提出了一个问题，是否还有可用的 C 单元测试工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:15:21.427

最新的 Eclipse CDT 版本 (juno) 现在内置了对 C/C++ 单元测试框架集成的支持。

有关详细信息，请参阅以下[发行说明](http://wiki.eclipse.org/CDT/User/NewIn81#C.2FC.2B.2B_Unit_Testing_Support)。
此功能最初是[在这里开发的](https://github.com/xgsa/cdt-tests-runner/wiki)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-12T13:34:39.870

在查看随附文档和实际 C/C++ 测试插件中的设置配置后，CDT 测试工具似乎只支持 C++ 兼容框架：

*   促进
*   谷歌
*   QT

没有对像 CUnit 这样的工具的内置支持。我建议切换到另一个 IDE，比如 NetBeans。

# javascript - 使用 javascript 关闭不是由脚本打开的窗口

> ID：12314729
> 
> 赞同：9
> 
> 时间：2012-09-07T08:48:05.673
> 
> 标签：javascript, firefox

我希望我的 Web 应用程序在没有菜单栏、地址栏等的窗口中运行。我有一个 Default.html 页面，在此页面中我单击“运行应用程序”按钮，该按钮首先使用在另一个窗口中打开我的应用程序`window.open`，然后关闭通过使用`window.open`with`_self`参数打开“AutoClose.html”当前窗口

默认.html

```
<html>
<head>
<script type="text/javascript">
    function runApp() {
        // Open my application
        window.open('Application.html', null, 'status:no;dialogHide:true;help:no;scroll:yes;center=yes;');

        // Close this window
        window.open('AutoClose.html', '_self');
    }
</script>
</head>
<body>
    <input type="button" value="Run Application" onclick="runApp();" />
</body>
</html> 
```

自动关闭.html

```
<html>
<head>
<script type="text/javascript">
    window.close();
</script>
</head>
<body></body>
</html> 
```

我的应用程序应该支持 IE、Firefox 和 Chrome，并且我的代码在 IE 和 Chrome 上运行良好，但由于“脚本可能无法关闭不是由脚本打开的窗口”警告，它无法关闭 Firefox 上的第一个窗口。在 Firefox 上，它会打开 AutoClose.html，但`window.close()`在此页面中调用只会导致“脚本可能无法关闭不是由脚本打开的窗口”警告并且窗口没有关闭。顺便说一句，我的应用程序窗口打开时没有任何问题（没问题）。

似乎使用`window.open()`with`_self`参数技巧不适用于 Firefox。因为我的目标是在没有菜单栏、地址栏等的窗口中运行应用程序。

1.  有什么方法可以隐藏地址栏、菜单栏而不使用`window.open()`（至少对于 Firefox）？那我就不需要跑了`window.close()`
2.  是否有任何设置可以抑制 Firefox 上的“脚本可能无法关闭不是由脚本打开的窗口”警告？“允许脚本关闭不是由脚本打开的窗口”设置会很棒（：
3.  有什么方法可以`window.close()`在 Firefox 上为“使用 javascript 脚本未打开的窗口”工作？
4.  或者，是否有任何其他建议（：

提前致谢。

更新：这是一个银行应用程序，我只是一个开发人员而不是决策者。换句话说，某种分析师希望应用程序以这种方式工作。我没有质疑它。因此，“您尝试做的整个事情都是完全错误的”答案不会真正有帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T08:54:05.393

您无法在 Firefox 中关闭当前窗口，因为您没有打开它。将 AutoClose.html 加载到其中并不重要。

但是这整个与 windows 的业务是没有意义的。大多数人将他们的浏览器设置为在新选项卡中打开新窗口，并且您无法阻止选项卡窗口中的菜单栏等。

如果你仅仅因为我使用了你的应用程序而关闭了我的窗口，我个人会非常恼火。

它可能是用户打开的唯一窗口——在这种情况下，您只是关闭了他们的浏览器。可能是他们想反击，关闭标签会惹恼他们。

来自 firefox 的这个错误是正确的，如果它在 Chrome 中工作，那是一个严重的错误，你应该报告它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-20T05:59:25.887

简单地，

```
open(location, '_self').close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:18:35.203

基本问题是您的需求制定者希望您做的事情被 Firefox 明确阻止：

1.  无法在用户现有的浏览器窗口中隐藏 UI，因为它对用户不利，并且是钓鱼者最喜欢的工具。
2.  无法从脚本中关闭用户的现有窗口，从而在此过程中丢失所有用户的会话历史记录。

基本上，用户在浏览器中还有其他东西，而不仅仅是你的银行东西。因此，假设其他情况或多或少注定要失败。

有什么办法可以推翻不合理的要求吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-15T03:12:45.377

这对我有用。

单击 jQuery UI 对话框中的按钮时，我用它来关闭窗口。

```
open(location, '_self').close(); 
```

# visual-studio - 仅签入部分文件

> ID：12314731
> 
> 赞同：6
> 
> 时间：2012-09-07T08:48:20.220
> 
> 标签：visual-studio, tfs, visual-studio-2012

是否可以选择要签入的文件中的哪些更改？例如，我已将两个项目添加到解决方案文件中，但我只想签入其中一个。或者我已经完成了文件的两个部分的工作，但只完成了一个部分并准备签入。理想情况下，我想在 2012 年使用新的 diff-utility，只需选择我想要签入的部分，但我可以这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-02T13:49:07.280

我的解决方法（在 VS2015 中）是：

1.  搁置受影响的文件
2.  删除您不想签入的东西（可能通过*与最新版本比较*）
3.  报到
4.  搁置搁置
5.  （在我的情况下，VS-Merge-Tool 打开以恢复您想要的更改（以前签入的行不是要合并））

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T12:35:46.993

不幸的是，在 TFS 中本机无法做到这一点。TFS 将始终签入当前文件的整个版本，并强制您在签入前保存更改。

这可以通过 Git 实现。使用 Git，如果您要执行以下操作：

1.  将“第 1 行”添加到 foo.cs
2.  通过“git add foo.cs”暂存 foo.cs
3.  将“第 2 行”添加到 foo.cs
4.  提交 foo.cs

然后只有第 1 行将被检入存储库。此外，您可以使用微软发布的新开源工具 git-tf 集成您的本地 git 存储库。[您可以在此处](http://www.microsoft.com/en-us/download/details.aspx?id=30474)或[此处](https://gittf.codeplex.com/)下载该工具。现在使用 Git 的缺点是它没有很好的 VS 集成。

# php - 使用 PHP 从另一个网页登录网站

> ID：12314732
> 
> 赞同：1
> 
> 时间：2012-09-07T08:48:34.433
> 
> 标签：php, post, curl, login, get

所以我有一个网站[http://example.com](http://example.com) 还有一个我想登录的网站；[http://target.com](http://target.com) 我想要一个脚本，可以在我的站点[http://target.com填写登录表单（用户名和密码）。](http://target.com)

所以当用户点击[http://example.com/login.php&username=John&password=12345](http://example.com/login.php&username=John&password=12345)

他应该直接登录[http://target.com](http://target.com)并发送到欢迎页面。

我得到了这个代码；

```
$url = "http://target.com";
$post = "username=John&password=12345&login=++Ba%F0lan++";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
echo curl_exec($ch);
curl_close($ch); 
```

但它没有将我转发到欢迎页面。[相反，它在http://example.com](http://example.com)上显示错误（找不到页面）

此外，它没有从 url 获取用户名和密码数据。但我想我以后会自己解决。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:56:03.340

好的......这基本上比你想象的要困难得多，如果`target.com`不是明确支持某种代理登录的话，如果不是不可能的话。你在这里有三个派对：

```
client   ---->   example.com   ---->   target.com 
```

通常，客户端登录`target.com`并***接收会话 cookie***，这是他的登录令牌。只能`target.com`为`target.com`.

当您代理此过程并让`example.com`登录时`target.com`，然后`example.com`接收 cookie。没关系，现在`example.com`已经通过身份验证了。但它无法将此身份验证传递给客户端，因为`example.com`无法代表`target.com`. `example.com`可以将收到的 cookie 传递给客户端，但该 cookie 仅对`example.com`.

除非`target.com`支持某种不依赖于 cookie 的基于 URL 的登录方案，否则您从根本上被搞砸了。

# mysql - MySQL表内表

> ID：12314734
> 
> 赞同：4
> 
> 时间：2012-09-07T08:48:38.287
> 
> 标签：mysql, sql

我想知道将以下数据存储在 MySQL 数据库中的正确方法是什么。

假设一个对象，例如视频。我想存储其他用户给它的评分，所以选项是创建一个列并以复杂的方式存储用户的 ID 和他们的评分，如下所示：

```
| ID | video_name | rating (usrID,rating)    |
| 5  | cool video | (158,4),(5875,1),(585,5) | 
```

我想这不是最有效的方法。有没有办法将表格存储在一行中？什么是最有效的方法，这样我就可以对评级使用 SQL 查询，而无需通过 PHP 代码处理数据？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T08:51:22.523

创建第二个表，`ratings`：

```
+---------+---------+--------+
| 视频ID | 用户 ID | 评级 |
+---------+---------+--------+
| 5 | 158 | 4 |
| 5 | 5875 | 1 |
| 5 | 585 | 5 |
+---------+---------+--------+

```

然后，您可以根据需要在查询中对该表进行*分组*和/或[加入；](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)例如：

```
SELECT   videos.*, AVG(ratings.rating)
FROM     videos JOIN ratings ON videos.id = ratings.video_id
GROUP BY videos.id 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T08:51:36.257

规范化它

有2张桌子。

IE

```
ID   Video_name
5    Cool Video 
```

第二个是

```
vid_id    userid   rating
5         158      4
5         5875     1
5         585      5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T08:54:34.983

正常的方式是实体关系图。

然后你有

评分 * --- 1 个视频

也就是说，你有一个表“视频”

```
ID | Name
5  | cool video 
```

还有一张“收视率”表

```
ID | value | USERID | video_ID
1  |  4    | 158    |  5
2  |  1    |  5875  |  5
3  |  5    |  585   |  5 
```

# knockout.js - 在淘汰赛中重新应用绑定

> ID：12314736
> 
> 赞同：8
> 
> 时间：2012-09-07T08:48:41.393
> 
> 标签：knockout.js

我基本上想在同一页面上为不同的对象重新应用绑定，但是有奇怪的行为。重新应用绑定后，项目列表丢失。

请看这里：http: [//jsfiddle.net/baio/9UcUs/5/](http://jsfiddle.net/baio/9UcUs/5/)

该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T10:50:16.960

简短的回答是它不受支持。长答案是有一些方法可以解决它。一种方法是调用`cleanNode`before `applyBindings`，但这不会清除事件处理程序。另一种方法是将您的视图模型包装在一个可观察对象中，然后更新该可观察对象以重新应用绑定；这工作得更好，但仍然有一个小问题（见下文）。

这是您使用可观察视图模型方法的示例：http: [//jsfiddle.net/mbest/9UcUs/9/](http://jsfiddle.net/mbest/9UcUs/9/)

我发现使用可观察视图模型的唯一问题是事件处理程序没有完全更新为新的视图模型。他们将在新视图模型中调用正确的函数，但`this`和`data`值将用于原始视图模型。

编辑：

Knockout 3.0（目前计划于本月发布）完全支持可观察视图模型。自定义绑定仍然可能存在问题，但希望所有这些都将很快记录在案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T09:05:57.843

您可以将相同的视图模型绑定到不同的元素，您需要指定要应用绑定的元素。

```
ko.applyBindings(vm, $('#yourul'));

ko.applyBindings(vm, $('#div')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-26T20:33:01.190

正在做：

```
ko.applyBindings(viewModel, $('#somejQObj')[0]); 
```

按照@fengd 回答的评论中的说明工作。当前有一个由 foreach 语句填充的表，该表具有可扩展的行，每个行都有一个动态添加的子表，该子表也由 foreach 语句填充。在动态插入每个子表之后，执行上述设置子表的绑定并填充数据。

# c++ - C++ 相同的模板用于超过 1 个函数？

> ID：12314737
> 
> 赞同：1
> 
> 时间：2012-09-07T08:48:42.870
> 
> 标签：c++, function, templates

如何修改以下代码，以便即使在 call() 函数中也可以使用相同的模板 T？

```
#include<iostream>

using namespace std;

template<class T>
void swap(T &x,T &y)
{
 T temp=x;
 x=y;
 y=temp;
}

/*if i use again the"template<class T>" here i have the error "Identifier T is 
undefined" to be gone but then if i compile i have several other errors.. like  
"could be 'void swap<T>(T &,T &)' " and some other errors*/

void call(T &x,T &y)
{
 swap(x,y);
 cout<<x<<y;
}

int main()
{
 int num;
 cout<<"Enter 1 or 0 for int or float\n";
 cin>>num;
 if(num)
 {
  int a,b;
  cin>>a>>b;
  call(a,b);
 }
 else 
 {
  float a,b;
  cin>>a>>b;
  call(a,b);
 }
} 
```

模板函数在开始时与模板声明相关联。同一模板不能再次用于另一个功能吗？是否有其他方法可以修改上述代码，以便我可以在 call() 函数中使用相同或任何其他模板？总的来说，我需要使用模板本身来管理所有功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:50:43.820

```
template <typename T>
void call(T &x, T &y)
{
   swap(x, y);
   cout << x<< y;
} 
```

应该管用。

问题可能是因为你有`using namespace std;`并且已经存在`std::swap`，所以它是模棱两可的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:58:36.063

问题是您的 #include 引入了标准库 std::swap 模板。因为您使用“使用命名空间 std”，所以编译器无法判断您要调用哪个函数，您的函数还是标准库中的函数。

你有两个选择，要么停止使用“使用命名空间标准”，要么明确说明你想调用哪个交换函数，所以在你的调用函数中写“::swap(x, y)”。

（请注意，您确实需要在调用函数的定义中添加“模板”）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T08:51:22.243

您可以定义一个 typdef 或宏以使其更小。但建议放置模板定义，因为它使代码可读。您还可以将两个函数封装在一个模板类中。

```
template<class T>
class XYZ {

void swap(T &x,T &y)
{
 T temp=x;
 x=y;
 y=temp;
}

void call(T &x,T &y)
{
 swap(x,y);
 cout<<x<<y;
}
} 
```

或者如果你不想使用类也不想使用类似的东西`template<class T>`：

```
#define templateFor(T) template<class T>

templateFor(T)
void swap(T &x,T &y)
{
 T temp=x;
 x=y;
 y=temp;
}

templateFor(T)
void call(T &x,T &y)
{
 swap(x,y);
 cout<<x<<y;
} 
```

# java - $HADOOP_COMMON_HOME 和 $HADOOP_HDFS_HOME 的值是否相同？

> ID：12314741
> 
> 赞同：3
> 
> 时间：2012-09-07T08:48:52.340
> 
> 标签：java, apache, hadoop, distributed-computing, hdfs

我知道`$HADOOP_COMMON_HOME` 应该设置为`Hadoop`目录的根路径，但是 的值`$HADOOP_HDFS_HOME`是多少，是同一个吗？

它的价值应该是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:37:23.107

他们是不一样的 ..

hadoop 发行版中有三个主要的子项目：

1) hadoop-common - mapreduce 和 hdfs 使用的通用功能，如 IPC ..

2) hadoop-mapred-mapreduce 框架 jars

3) hadoop-hdfs - hdfs 分布式文件系统 jars

他们每个人都在不同的目录中。因此，在您提取这些子项目后，将 $HADOOP_COMMON_HOME 设置为提取 hadoop-common 的目录，并将 $HADOOP_HDFS_HOME 设置为提取 hadoop-hdfs 的目录。

# android - 从字符串路径获取要在 imageview 中查看的图像

> ID：12314748
> 
> 赞同：0
> 
> 时间：2012-09-07T08:49:17.147
> 
> 标签：android, android-imageview

我有一些图片路径存储在数据存储中，我正在尝试将它们转换为可绘制对象并在我的图像视图中显示，由于某种原因我得到了一个空指针异常。有人可以帮帮我吗？谢谢

```
String pathName = selectedPlayer.getPicture(); 
Toast.makeText(this, pathName, Toast.LENGTH_SHORT).show();
Drawable d = Drawable.createFromPath(pathName);
imageView.setImageDrawable(d); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:55:25.190

您必须检查文件名不为空

**然后首先检查**文件是否**存在**

 **```
if(pathName!=null && pathName!="") <--CHECK FILENAME IS NOT NULL
{
    File f = new File(pathName);
    if(f.exists())  <-- CHECK FILE EXISTS OR NOT
    {
        Drawable d = Drawable.createFromPath(pathName);
        imageView.setImageDrawable(d);

    }
} 
```

**编辑：** 你必须先初始化你的 imageview

```
imageView=(ImageView)findViewById(R.id.yourimageviewid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:57:49.243

看`imageView`它不应该为空。

之后试试这个：

```
bm = null;
try {
    bm = BitmapFactory.decodeFile(imageView);
} catch (OutOfMemoryError e) {
    e.printStackTrace();
}
imageView.setImageBitmap(bm); 
```**

# svg - 在 D3.js 中打开子元素时，如何避免 TreeMap 上的文本元素重叠？

> ID：12314749
> 
> 赞同：7
> 
> 时间：2012-09-07T08:49:24.387
> 
> 标签：svg, d3.js, label, overlap, treemap

我基于 Mike Bostock 的节点链接树在 D3.js 中创建了一个树。我遇到的问题以及我在 Mike's Tree 中也看到的问题是，当空间不足时，文本标签与圆形节点重叠/下重叠，而不是扩展链接以留出一些空间。

作为一个新用户，我不允许上传图片，所以这里有一个指向 Mike's Tree 的[链接](http://mbostock.github.com/d3/ex/tree.html)，您可以在其中看到前面节点的标签与后面的节点重叠。

我尝试了各种方法来通过检测文本的像素长度来解决问题：

```
d3.select('.nodeText').node().getComputedTextLength(); 
```

但是，这仅在我渲染页面后才有效，当我需要渲染之前最长文本项的长度时。

在渲染之前获取最长的文本项：

```
nodes = tree.nodes(root).reverse();

var longest = nodes.reduce(function (a, b) { 
  return a.label.length > b.label.length ? a : b; 
});

node = vis.selectAll('g.node').data(nodes, function(d, i){
  return d.id || (d.id = ++i); 
});

nodes.forEach(function(d) {
  d.y = (longest.label.length + 200);
}); 
```

仅返回字符串长度，同时使用

```
d.y = (d.depth * 200); 
```

使每个链接都具有静态长度，并且在打开或关闭新节点时不会调整大小。

有没有办法避免这种重叠？如果是这样，什么是最好的方法来做到这一点并保持树的动态结构？

我可以提出 3 种可能的解决方案，但并不是那么简单：

1.  检测标签长度并在超出子节点的地方使用省略号。（这会使标签的可读性降低）
2.  通过检测标签长度并告诉链接进行相应调整来动态缩放布局。（这将是最好的，但似乎真的很难
3.  scale the svg element and use a scroll bar when the labels start to run over. (not sure this is possible as I have been working on the assumption that the SVG needs to have a set height and width).

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T21:44:22.947

So the following approach can give different levels of the layout different "heights". You have to take care that with a radial layout you risk not having enough spread for small circles to fan your text without overlaps, but let's ignore that for now.

The key is to realize that the tree layout simply maps things to an arbitrary space of width and height and that the diagonal projection maps width (x) to angle and height (y) to radius. Moreover the radius is a simple function of the depth of the tree.

So [here](http://jsfiddle.net/FRzBK/3/) is a way to reassign the depths based on the text lengths:

First of all, I use the following (jQuery) to compute maximum text sizes for:

```
var computeMaxTextSize = function(data, fontSize, fontName){
    var maxH = 0, maxW = 0;

    var div = document.createElement('div');
    document.body.appendChild(div);
    $(div).css({
        position: 'absolute',
        left: -1000,
        top: -1000,
        display: 'none',
        margin:0, 
        padding:0
    });

    $(div).css("font", fontSize + 'px '+fontName);

    data.forEach(function(d) {
        $(div).html(d);
        maxH = Math.max(maxH, $(div).outerHeight());
        maxW = Math.max(maxW, $(div).outerWidth());
    });

    $(div).remove();
    return {maxH: maxH, maxW: maxW};
} 
```

Now I will recursively build an array with an array of strings per level:

```
var allStrings = [[]];
var childStrings = function(level, n) {
    var a = allStrings[level];
    a.push(n.name);

    if(n.children && n.children.length > 0) {
        if(!allStrings[level+1]) {
            allStrings[level+1] = [];
        }
        n.children.forEach(function(d) {
            childStrings(level + 1, d);
        });
    }
};
childStrings(0, root); 
```

And then compute the maximum text length per level.

```
var maxLevelSizes = [];
allStrings.forEach(function(d, i) {
    maxLevelSizes.push(computeMaxTextSize(allStrings[i], '10', 'sans-serif'));
}); 
```

Then I compute the total text width for all the levels (adding spacing for the little circle icons and some padding to make it look nice). This will be the radius of the final layout. Note that I will use this same padding amount again later on.

```
var padding = 25; // Width of the blue circle plus some spacing
var totalRadius = d3.sum(maxLevelSizes, function(d) { return d.maxW + padding});

var diameter = totalRadius * 2; // was 960;

var tree = d3.layout.tree()
    .size([360, totalRadius])
    .separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; }); 
```

Now we can call the layout as usual. There is one last piece: to figure out the radius for the different levels we will need a cumulative sum of the radii of the previous levels. Once we have that we simply assign the new radii to the computed nodes.

```
// Compute cummulative sums - these will be the ring radii
var newDepths = maxLevelSizes.reduce(function(prev, curr, index) {
    prev.push(prev[index] + curr.maxW + padding);                 
    return prev;
},[0]);                                                      

var nodes = tree.nodes(root);

// Assign new radius based on depth
nodes.forEach(function(d) {
    d.y = newDepths[d.depth];
}); 
```

Eh voila! This is maybe not the cleanest solution, and perhaps does not address every concern, but it should get you started. Have fun!

# python - json python转换问题

> ID：12314752
> 
> 赞同：1
> 
> 时间：2012-09-07T08:50:01.977
> 
> 标签：python, json, type-conversion

我有一个（可能格式错误的）字符串需要转换为 json 格式。打印出我得到的字符串

```
{"composemsg":{"return":null,"report":"<p class=\"error j-table-ui-report-entry\">07:39:28 - Action failed<br\/>Error adding row 0<br\/> Message <span class=\"label\">\"Test Message\"<\/span>,  Receivers 'Array\n(\n    [0] => gaga7\n)\n'<br\/><\/p>",0:""}} 
```

添加：我无法首先修改此字符串或更改生成此字符串的代码。我所拥有的只是上面引用的字符串！

当尝试使用转换字符串（包含在变量'j'中）时

```
json.loads(j) 
```

我收到一个错误：

```
ValueError: Expecting property name: line 1 column 250 (char 250) 
```

但是，当在命令行上启动 python 并为打印输出的字符串声明一个变量（将 'null' 替换为 'None'）时，它可以正常工作：

```
In [40]: x = {"composemsg":{"return":None,"report":"<p class=\"error j-table-ui-report-entry\">07:39:28 - Action failed<br\/>Error adding row 0<br\/> Message <span class=\"label\">\"Test Message\"<\/span>,  Receivers 'Array\n(\n    [0] => gaga7\n)\n'<br\/><\/p>",0:""}}
In [41]: x
Out[41]: 
{'composemsg': {0: '','report': '<p class="error j-table-ui-report-entry">07:39:28 - Action failed<br\\/>Error adding row 0<br\\/> Message <span class="label">"Test Message<\\/span>,  Receivers \'Array\n(\n    [0] => gaga7\n)\n\'<br\\/><\\/p>', 'return': None}} 
```

对这种行为有任何想法吗？原始字符串中是否存在格式错误的地方？我没有看到任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:02:35.570

当您转义引号时，您应该使用原始字符串以使处理更容易。

此外，在字符串的末尾，您有一个`0`不在引号内的属性。

这是一个适合我的版本：

```
>>> x = r"""{
...     "composemsg": {
...         "return": null,
...         "report": "<p class=\"error j-table-ui-report-entry\">07:39:28 - Action failed<br\/>Error adding row 0<br\/> Message <span class=\"label\">\"Test Message\"<\/span>, Receivers 'Array\n(\n    [0] => gaga7\n)\n'<br\/><\/p>",
...         "0": ""
...     }
... }"""
>>> json.loads(x)
{u'composemsg': {u'report': u'<p class="error j-table-ui-report-entry">07:39:28 - Action failed<br/>Error adding row 0<br/> Message <span class="label">"Test Message"</span>, Receivers \'Array\n(\n    [0] => gaga7\n)\n\'<br/></p>', u'0': u'', u'return': None}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:07:18.013

JSON 对象属性名称应该是字符串。来自[http://www.json.org/](http://www.json.org/)：

![在此处输入图像描述](../Images/814ca89b4b7459826c4d47495524b48b.png)

错误消息指出您在位置 250（0 键）处有一个未加引号的属性名称。

可能很难弄清楚，因为`{0:""}`在 Javascript 和 Python 中都有效（但不是合法的 JSON）。

# mysql - 检查一个和/或另一个表是否在同一查询中包含特定值？

> ID：12314756
> 
> 赞同：0
> 
> 时间：2012-09-07T08:50:08.217
> 
> 标签：mysql, sql

我正在尝试检查我的两个是否`tables`包含列中的特定值`content_key`。一张表用于公开内容 ( `content`)，另一张表用于提交 ( `content_submissions`)。当用户向我们提交内容（YouTube 视频 ID 等）时，我想检查它是否已经提交给我们，是在公共表中还是在私有（提交）表中。这样，我们最终不会在提交过程中接受相同内容的重复。

这两个表看起来像这样。

`content`

```
*----*-------------*
| id | content_key |
*----*-------------*    
| 1  | sOWewQO3hpg |
*----*-------------*
| 2  | e2CJgQjH5lE |
*----*-------------* 
```

`content_submissions`

```
*----*-------------*
| id | content_key |
*----*-------------*    
| 1  | BOtcpPVNvhA |
*----*-------------* 
```

因此，当用户提交密钥`e2CJgQjH5lE`或`BOtcpPVNvhA`（在不同时间）时，我希望查询告诉我密钥已经在数据库中。

我不只是`active`在表中有一个列`content`而不是有两个表的原因是因为每次不接受内容时它都会显着增加 id，使 url 有点随机，而不是顺序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T08:53:12.230

您可以使用组合两个表的行`UNION`

```
SELECT COUNT(content_key)
FROM
    (
        SELECT content_key
        FROM content
        UNION
        SELECT content_key
        FROM content_submissions
    ) a
WHERE content_key = 'valHere' 
```

如果您要查找的值不存在，它将简单地返回`0`，否则将显示匹配的记录总数。

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/73367/8)

希望这可以帮助。

![在此处输入图像描述](../Images/4fbac9de377b4504ecb4d27730743099.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:52:53.367

```
SELECT COUNT(*)
FROM
    (Select content_key from content union select content_key from content_submissions) v
WHERE content_key = 'new key' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:53:14.373

```
select id from content
where content.content_key="myKey"
UNION
select id from content_submissions
content_submissions.content_key="myKey" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T08:54:39.500

如果你要使用

```
SELECT *
FROM content
WHERE content_key = value
UNION
SELECT *
FROM content_submissions
WHERE content_key = value 
```

应该这样做。

从[13.2.8.4 开始。UNION 语法](http://dev.mysql.com/doc/refman/5.0/en/union.html)

> UNION 用于将多个 SELECT 语句的结果组合成一个结果集。
> 
> UNION 的默认行为是从结果中删除重复的行。

# hadoop - 如何在 Hadoop 中检查 Map Task 的内存占用

> ID：12314762
> 
> 赞同：2
> 
> 时间：2012-09-07T08:50:26.757
> 
> 标签：hadoop, jvm, mapreduce

我知道我可以通过设置 JVM 参数来控制映射（或减少）任务的最大内存。但我想知道是否有办法查看任务的当前内存使用情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T06:39:16.573

启用远程 HPROF 分析。HPROF 是 JDK 附带的一个分析工具，虽然它很基础，但可以提供有关程序 CPU 和堆使用情况的有价值的信息。要使用它，您可以在代码中尝试：

```
conf.setBoolean("mapred.task.profile", true);
conf.set("mapred.task.profile.params", "-agentlib:hprof=cpu=samples," +
    "heap=sites,depth=6,force=n,thread=y,verbose=n,file=%s");
conf.set("mapred.task.profile.maps", "0-2");
conf.set("mapred.task.profile.reduces", ""); // no reduces 
```

有关更多详细信息，请参阅“Hadoop The Definitve Guide”，第 5 章 -> “调整作业” -> “分析任务”。

# c++ - Boost 无序容器的 `std::bitset` 或 `boost::dynamic_bitset<>` 的高效散列

> ID：12314763
> 
> 赞同：2
> 
> 时间：2012-09-07T08:50:33.697
> 
> 标签：c++, hash, bitset, boost-dynamic-bitset, boost-unordered

我想知道是否有一些有效的方法来散列`std::bitset`或`boost::dynamic_bitset<>`Boost 的无序容器？

我目前在对它们进行散列之前先转换`std::bitset`或`boost::dynamic_bitset<>`转换`std::string`，但这似乎会很慢。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:55:15.603

C++11 要求标准库有`std::hash<std::bitset>`专门的。IOW 它应该已经有哈希了。

对于提升，您应该使用 config:`#define BOOST_DYNAMIC_BITSET_DONT_USE_FRIENDS`然后该`dynamic_bitset::m_bits`成员变为公开，您可以对其进行哈希处理。

# wsdl - 是 Web 服务合同的 wsdl 部分中使用的命名空间前缀

> ID：12314764
> 
> 赞同：0
> 
> 时间：2012-09-07T08:50:33.793
> 
> 标签：wsdl

我们有一些处理 Web 服务调用的内部代码，但假设名称空间前缀是“sch”，用于在我们的 wsdl 中定义的特定名称空间。

sch 前缀是 wsdl 合同的一部分吗？所有客户端调用都必须使用 wsdl 中为指定名称空间定义的 sch 前缀吗？

我会认为命名空间前缀可以是客户端调用中的任何内容，只要它与客户端调用中指定的正确命名空间匹配？我是对还是错？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:47:31.030

> 我会认为命名空间前缀可以是客户端调用中的任何内容，只要它与客户端调用中指定的正确命名空间匹配？我是对还是错？

是的，你是对的，命名空间前缀可以声明任何东西，只要它指向正确的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:03:59.480

```
Is the sch prefix part of the wsdl contract? Must all client calls use the sch prefix as defined in the wsdl for the specified namespace? 
```

至少对于 Java，是的，所有客户端都必须使用 wsdl 中定义的“sch”前缀。在 javax.xml.soap 类中有 SOAPFactory 类，它有一个方法 createName，它将前缀名称作为 targetnamespace 的参数。当客户端向 Web 服务发送一些输入时使用此方法。您可以看到愚蠢的链接： [SOAP Factory API](http://www.javadocexamples.com/javax/xml/soap/javax.xml.soap.SOAPFactory.html)

```
I would have thought that the namespace prefix can be anything in the client call as long as it matches to the correct namespace specified in the client call? I'm I right or wrong? 
```

是的，你是对的。

# java - 将 2 个身份验证窗口集成到一个窗口中。：JAVA Authentication with network

> ID：12314769
> 
> 赞同：1
> 
> 时间：2012-09-07T08:50:45.957
> 
> 标签：java, javascript, xml, authentication, network-protocols

网络存在 java 身份验证问题。

当我们通过某个网站连接到我们的 Java 平台内部时，它要求进行 2 次身份验证，如附图所示

1.  服务器在端口 8401（端口 8401）的身份验证（Windows）

2.  java认证abc.sdf.com/xx.xx.xx.xx:8100（8100端口）

两者都有相同的用户 ID，

来源：ABC.com:8401/？Dispatched=//ABC.com/xx.xx.xx.xx:8100

我相信很多人会在他们的项目中解决这类问题。任何人都可以咨询一些想法/方法以实现单个身份验证窗口吗？？？？

提前致谢

# download - 仅用于下载：我的服务器中的 FTP 与 HTTP？

> ID：12314776
> 
> 赞同：0
> 
> 时间：2012-09-07T08:51:10.060
> 
> 标签：download, protocols

我想从我的计算机中获取一些文件（文本、视频、图像），我想将它们下载到我的 Android 设备上的文件夹中。我一直在寻找替代品，我认为有两种方法可以做到这一点，但我不知道使用其中一种方法是否有很大区别。

就我而言，哪种协议更好，为什么是 FTP 或 HTTP？我不需要上传任何东西，文件的大小不是太大。（我猜最大的文件大约是 5M）

我认为 HTTP 更容易，FTP 最快，可能吗？但我想，在编程中思考，哪个更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:03:55.880

在速度方面，对于大于大约 10kB 的文件大小，两者是等效的。不同之处在于 FTP 在其数据通道上发送纯粹的原始数据，没有任何标头，因此开销略小。但是在将原始数据发送到通道之前，HTTP 只发送大约 12 行左右的文本作为每个文件的标题。因此，对于大约 10kB 或更小的文件，是的，HTTP 开销可能相当高——大约占总带宽的 1% 到 2%。对于大文件，十几行 HTTP 标头可以忽略不计。

FTP 为控制通道浪费了一个套接字，因此对于许多用户来说，HTTP 的可扩展性提高了两倍。请记住，您的操作系统可以打开的套接字数量有限。

最后，最重要的考虑是很多人通过防火墙访问互联网。无论是公司、学校、宿舍或公寓楼。并且很多防火墙被配置为只允许 HTTP 访问。您可能会发现有时您因此无法访问您的文件。当然，有很多方法可以解决这个问题，但这是您必须考虑的另一个麻烦。

* * *

**补充回答：**

我看到您询问访问限制和安全性。HTTP 的一个小缺点是您需要编写自己的 Web 应用程序来实现它。只需使用 HTTP 基本身份验证编写配置文件，即可将 Apache 之类的 Web 服务器配置为执行此操作。

Luckily, people have had this problem before and some of them have written software to do this. Google around for "HTTP file server" and you'll find many implementations. Here's one fairly good open source web app: [http://pfn.sourceforge.net/](http://pfn.sourceforge.net/)

Also, if you really want security you should set up SSL/TLS for your server regardless weather you end up using FTP or HTTP.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:02:16.883

我会推荐HTTP。它允许您下载具有多个连接的文件，您可以轻松共享 url，您还可以在除 http 之外的所有端口都被阻止的受限环境中下载它。

如果您想按用户控制对文件的访问并且还需要大量上传，则 FTP 更合适。

添加：

您也可以使用 .htaccess 文件在 http 中实现安全性。但是，它的可扩展性不是很好，不适合具有不同访问权限的用户太多。

还有其他几种保护 http 上文件的方法。[您将能够在http://sourceforge.net](http://sourceforge.net)上找到许多开源实用程序，它们可以让您做到这一点。在速度方面，http 是最好的。它允许您获取文件的任意部分，因此可以进行多线程下载。

您会注意到大多数文件共享站点都使用 http 并且出于可扩展性的原因。

# java - 如何将 birt 图表呈现为流（png，svg）

> ID：12314777
> 
> 赞同：0
> 
> 时间：2012-09-07T08:51:11.220
> 
> 标签：java, render, birt, outputstream

我能够将我的图表呈现为不同的文件类型：

```
 dRenderer = ce.getRenderer("dv.SVG");//or dv.PNG
 dRenderer.setProperty(IDeviceRenderer.FILE_IDENTIFIER, path); 
```

但是如何将二进制数据作为流获取？图表很可能会在某些人的浏览器中结束。所以磁盘上的文件我相对没用。

（在再次阅读之前将许多图表保存在磁盘上会很愚蠢，不是吗？）

**简而言之：**

可以将输出流而不是路径字符串作为“FILE_IDENTIFIER”（适用于“dv.SVG”和“dv.PNG”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:32:51.170

我不太了解 BIRT，但您可以设置渲染器以在 a 中渲染图像`BufferedImage`并从中获取字节。

```
dRenderer = ce.getRenderer("dv.PNG");

BufferedImage img = new BufferedImage(size1, size2, BufferedImage.TYPE_INT_ARGB);
Graphics2D g2d = (Graphics2D)img.getGraphics();
dRenderer.setProperty(IDeviceRenderer.GRAPHICS_CONTEXT, g2d);
dRenderer.setProperty(IDeviceRenderer.CACHED_IMAGE, img);

// render

ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(img, "png", baos);
baos.flush();
byte[] imgBytes = baos.toByteArray(); 
```

我认为它不适用于 SVG。但是似乎有一个更新的 API 可以使用 BIRT 生成报告，您可以在其中将渲染选项传递给渲染器，尤其是设置一个选项`OutputStream`，您将给它一个`ByteArrayOutputStream`，然后您就可以将它提供给您的 Web 客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:36:38.710

如果您使用 SVG，请将文件标识符设置为输出流并确保设置内容类型（response.setContentType("image/svg+xml");

```
 try
    {   
        RunTimeContext rtc = new RunTimeContext( );
        rtc.setULocale( ULocale.getDefault( ) );

        Generator gr = Generator.instance( );
        GeneratedChartState gcs = null;
        Bounds bo = BoundsImpl.create( 0, 0, 600, 400 );
        gcs = gr.build( idr.getDisplayServer( ), chart, bo, null, rtc, null );

        idr.setProperty( IDeviceRenderer.FILE_IDENTIFIER, out ); 
        idr.setProperty(
                IDeviceRenderer.UPDATE_NOTIFIER,
                new EmptyUpdateNotifier( chart, gcs.getChartModel( ) ) );

        gr.render( idr, gcs );
    } 
```

[看到这个链接](http://www.eclipse.org/forums/index.php/m/909746/#msg_909746)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:40:19.670

如果要将 PNG 直接返回到浏览器，则需要某种服务器端机器。[在这里](https://stackoverflow.com/questions/9204287/how-to-return-a-png-image-from-jersey-rest-service-method-to-the-browser)，您可以看到如何使用 REST 服务进行操作

# c++ - ws2_32.lib 与 libws2_32.a，有什么区别以及如何将 libws2_32 链接到 NB 项目？

> ID：12314779
> 
> 赞同：4
> 
> 时间：2012-09-07T08:51:15.820
> 
> 标签：c++, dll, netbeans, linker, winsock2

我使用带有 g++ 编译器的 NetBeans、Windows 和 Cygwin。

我正在检查 Windows Sockets 2。我做了所有在 MS[手册](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737629%28v=vs.85%29.aspx)中写的事情。我有一个代码（主要来自本手册）：

```
#include <winsock2.h>
#include <ws2tcpip.h>

#include <cstdlib>
#include <iostream>

#pragma comment(lib, "Ws2_32.lib")

int main() {

  WSADATA wsaData;

  int iResult;

  // Initialize Winsock
  iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
  if (iResult != 0) {
     printf("WSAStartup failed: %d\n", iResult);
     return 1;
  }
  else cout << "Initialization OK.";

  return 0;
} 
```

当我尝试运行项目时遇到问题：

```
undefined reference to `_WSAStartup@8' 
```

我明白那`Ws2_32.lib`是缺失的。这是因为我没有安装 Windows SDK。但在安装它之前，我想尝试一下 Cygwin 提供的工具。它有所有的`w32api`头文件，我把它们放在：

```
C:\cygwin\usr\include\w32api 
```

它在目录中有一些`w32api`几乎`.lib`文件：

```
C:\cygwin\lib\w32api 
```

但是所有这些 lib 文件都是不同的，它们具有`.a`扩展名和稍微不同的名称，例如：

```
libws2_32.a  // in Cygwin
   vs.
ws2_32.lib   // in Windows 
```

当我使用 Cygwin 终端创建`.exe`文件时，一切正常。我输入的命令是：

```
cd C:\\c++\\myProgram           // go to the dir
g++ myProgram.cpp -lws2_32      // compile using -l option to link libws2_32.a 
```

之后我得到`a.exe`文件。我运行它并且它有效：

```
./a.exe    // Initialization OK. 
```

但正如我所说，我使用的是 NetBeans。如果我尝试从 NB（`[F6]`按钮）运行项目，我总是会遇到这个错误`undefined reference to '_WSAStartup@8'`。

我已经尝试了所有可以在 NB 论坛上找到的东西。我试图以`libws2_32.a`这种方式链接到我的项目。我去：

```
File -> Project Properties -> Linker -> Libraries 
```

并且有三个选项：

*   添加库...
*   添加库文件...
*   添加选项...

我都试过了。我试图只链接库和库文件。我还尝试在`Add Option...`按钮中添加这样的选项：

```
Add Option... -> Other option ->    // and I input here "-lws2_32" 
```

但无论我做什么，我都无法从 NB 运行项目，我得到 error `undefined reference to '_WSAStartup@8'`。

所以我的问题是：

1）我做错了什么？如何直接从 NB 运行项目？我没有尝试安装 Windows SDK，我想尝试使用 Cygwin 工具，因为它具有此类工具。

`.lib`2) Windows文件和 Cygwin文件有什么区别`.a`？安装 Windows SDK 并忘记这些`.a`文件会更好吗？到目前为止，我在 Cygwin 网站上能找到的关于它们的一切都是这样的：

> 导入库是一个常规的类 UNIX .a 库，但它只包含告诉操作系统您的程序如何与（“导入”）dll 交互所需的少量信息。此信息链接到您的 .exe。这也是由 dlltool 生成的。

3）是否可以使用`#pragma comment(lib, "libws2_32.a")`链接`.a`文件？我试过但没有得到成功的结果。

**升级版：**

第三个问题的答案-> [Linux 下的#pragma comment(lib, "xxx.lib") 等效？](https://stackoverflow.com/questions/1685206/pragma-commentlib-xxx-lib-equivalent-under-linux)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T08:17:49.960

我有这个问题 Eclipse/CDT/Windows。这是我的构建命令

```
g++ -O0 -g3 -Wall -c -fmessage-length=0 -o source\Sever_B.o ..\source\Sever_B.cpp
g++ -LC:\MinGW\lib -o Sever_B.exe source\Sever_B.o -lws2_32 
```

所以关于 Eclipse 项目属性，C/C++ General, Paths & Symbols

*   将 C:\MinGW\lib 添加到库路径选项卡
*   将 ws2_32 添加到库选项卡

这将 libws2_32.a 链接到我的项目，现在可以构建。

我尝试使用 Windows ws2_32.dll 和 ws2_32.lib，除了痛苦什么也没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T16:44:09.467

1.  在我看来，您已将`-lws2_32`开关添加到 C/C++ 编译器选项。当 netbeans 调用编译器时，它会传递`-c`开关，它会忽略链接器选项，例如`-l`. 在链接器选项部分，Netbeans 有一个适当的位置来添加外部库。或者，您可以将`-l`作为额外选项添加到链接器。那可能会解决问题。

2.  `*.lib`文件由 Microsoft 工具链 (cl.exe)`lib*.a`使用，并由 GNU 工具链使用（这是您找到的 adivse）。如果您要使用 Cygwin，则需要这些`lib*.a`文件。在这种情况下，拥有 Microsoft SDK 对您毫无帮助。此外，如果您需要一个仅存在于`.lib format, you can convert to`.a` 中的文件，请使用名为[reimp](http://www.mingw.org/wiki/MSVC_and_MinGW_DLLs)的工具。

希望这可以帮助。

# c++ - 与从变量中简单读取相比，带有 memory_order_relaxed 的 atomic_load() 是否会引入任何额外的开销？

> ID：12314787
> 
> 赞同：4
> 
> 时间：2012-09-07T08:51:47.593
> 
> 标签：c++, c, c++11, atomic, c11

我看不出有任何理由为“本机”CPU 积分增加额外开销，但我可能错了，所以我想听听社区的意见

我真正的问题涉及某种相对罕见的变化但经常阅读的链表（类似于典型的 RCU 用例）。这个想法是为只读操作提供两种访问模式：如果结构现在正在改变（完全成熟的无锁算法），则使用第一种模式，第二种轻量级模式用于“平静”情况（使用非原子列表遍历）。对于第二种（轻量级）情况，我将使用带有 memory_order_relaxed 的原子负载，但如果它太昂贵，我需要做一些解决方法（缓存非原子变量中的原子值，或以某种方式模拟建议的 memory_order_nonatomic [http ://www.open-std.org/jtc1/sc22/wg14/www/docs/n1446.htm](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1446.htm)等）

我知道答案取决于原子实现（和 CPU），但我希望实现应该合理:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:15:52.203

[`memory_order_relaxed`](http://gcc.gnu.org/wiki/Atomic/GCCMM/AtomicSync)模型只允许存储/加载操作重新排序，但它仍然强制执行原子读/写。在某些 CPU 架构上，它会导致总线锁定、缓存刷新等。所以通常答案是肯定的 - 原子访问`memory_order_relaxed`应该被认为比非原子访问更昂贵。

# ruby-on-rails - 如何根据通过参数传递给相关控制器操作的值来处理视图的条件渲染？

> ID：12314788
> 
> 赞同：1
> 
> 时间：2012-09-07T08:51:54.210
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller, rendering

我正在使用 Ruby on Rails 3.2.2。我想渲染一个`show`应该/可以根据通过参数传递给相关控制器操作的值以两种不同方式显示的视图。也就是说，如果未传递参数，`show`则应正常呈现视图，否则如果将该值设置为某些值，`show`则应呈现视图并进行一些更改（例如，某些“嵌入”的部分模板应更改，某些信息不应更改显示并添加一些其他信息）。

**如何以有效/适当的方式处理这种情况？**也就是说，我应该在`show`控制器操作和相关视图中声明条件渲染吗？还是我应该使用单独的控制器操作以便不使用/传递提到的参数？还是我应该实施一个“单独的”/“专用”控制器来处理我的“特殊”情况？

* * *

注意：就我而言，我想“以*公共*或*私人*方式”显示不同的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:31:46.373

这取决于这些表示的不同程度。使用两种不同的视图，您最终会得到某些可以通过共享部分处理的重复。如果私有模板与公共模板大多相似，我建议使用条件。您可以从一开始就通过添加可以像这样工作的助手来封装决策：

```
<% if private_view? %>
  ...
<% else %>
  ...
<% end %> 
```

或像这样：

```
<%= show_only_when :private do %>
  ...
<% end %> 
```

但是，如果私有和公共表示有很大不同，我建议考虑单独的控制器。差异是有原因的，并且不会以表现形式结束。

对于控制器和视图的公共部分，使用模块、助手和共享部分。

# asp.net-mvc-3 - 如何在 mvc 4 的剃刀视图中添加自定义控件

> ID：12314790
> 
> 赞同：0
> 
> 时间：2012-09-07T08:52:03.023
> 
> 标签：asp.net-mvc-3

**如何在 mvc 4 的剃刀视图中添加自定义控件**

有一个项目要求在 mvc4 的 razor 视图中添加自定义控件，但我无法做到。所以需要帮助

是否有可能在 razor view mvc4.js 中添加自定义控件。如果是，那怎么可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:53:37.690

我不确定您所说的控件是什么意思，但您可以使用 Html Helpers：

```
@helper ProductListing(List<Product> products) {
   <ul id="products">
   @foreach(var p in products) {
       <li>@p.Name ($@p.Price)</li>
   }
   </ul>
}

<div>
    @ProductListing(Model.Products)
</div> 
```

请参阅 Scott Gu 撰写的这篇文章：[http ://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

# android - Android可扩展列表：具有不同布局的组

> ID：12314793
> 
> 赞同：2
> 
> 时间：2012-09-07T08:52:15.660
> 
> 标签：android, expandablelistview

我想为每个组显示不同的子布局，例如：

```
@Override
        public View getChildView(int groupPosition, int childPosition,
                boolean isLastChild, View convertView, ViewGroup parent) {

            if (convertView == null) {

                switch (groupPosition){

                case 0:
                    LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    convertView = inflater.inflate(R.layout.child_row, null);
                    TextView tvPlayerName = (TextView) convertView.findViewById(R.id.tvPlayerName);
                    tvPlayerName.setText(arrChildelements[groupPosition][childPosition]);
                    break;

                case 1:
                    LayoutInflater inflater1 =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    convertView = inflater1.inflate(R.layout.child_row1, null);
                    TextView tvPlayerName1 = (TextView) convertView.findViewById(R.id.tvPlayerName);
                    tvPlayerName1.setText(arrChildelements[groupPosition][childPosition]);
                    break; 

                case 2:
                    LayoutInflater inflater2 =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    convertView = inflater2.inflate(R.layout.child_row2, null);
                    TextView tvPlayerName2 = (TextView) convertView.findViewById(R.id.tvPlayerName);
                    tvPlayerName2.setText(arrChildelements[groupPosition][childPosition]);
                    break;

                case 3:             
                    LayoutInflater inflater3 =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    convertView = inflater3.inflate(R.layout.child_row3, null);
                    TextView tvPlayerName3 = (TextView) convertView.findViewById(R.id.tvPlayerName);
                    tvPlayerName3.setText(arrChildelements[groupPosition][childPosition]);
                    break;

                }

            } return convertView;
    } 
```

我的问题是在单击组时，子列表在组之间相互转换。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T09:17:40.357

这是因为

```
if (convertView == null) 
```

删除它，它应该可以正常工作，如果在删除此 if 语句后它可以正常工作，则返回它并在 if (convertView == null) 中添加 if 语句以使其显示为你想要的，因为删除 if (convertView == null) 将使滚动更慢并使用更多内存。

例如，您可以将所有视图放在一个 xml 文件或一个视图中，然后在 switch 方法中只使用 setVisibility 来显示适合当前列表项的布局部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-21T15:44:09.967

如果（转换视图 == 空）

从子视图的自定义适配器中删除它

它对所有人都很好

# android - 如何在 DPAD 中使用软 IME

> ID：12314797
> 
> 赞同：2
> 
> 时间：2012-09-07T08:52:30.560
> 
> 标签：android, android-softkeyboard, ime, d-pad

我们有标准的软件 IME 键盘，SoftIME 可以很好地用于触摸
我们如何使用 DPAD 在 SOft IME 上导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:29:13.410

使用 DPAD 模拟触摸事件（MotionEvent） MOVE/DOWN/UP，Key UP 的反应，因此用户可以在 MOVE 和 DOWN 时看到焦点。

# javascript - 如何在 HTML 链接中使用 JavaScript 变量

> ID：12314799
> 
> 赞同：0
> 
> 时间：2012-09-07T08:52:37.750
> 
> 标签：javascript, html, tags

我正在处理的网站有一个`<base>`标签指向与该网站所拥有的不同的 URL。我想做的是`<base>`通过使用下面的 trueURL 找到网页的 url 来绕过标签，因为我需要它来构建一些内部锚点，因为我需要网站的实际 url，以便内部锚点正常工作。

我遇到的问题是我不知道应该如何使用我存储在我的 trueURL 变量中的 url。是否可以使用它，然后向 url 添加额外的扩展名以使其指向我的锚点？下面是我想要做的一个粗略的例子

```
var trueURL = window.location.href;

    <html>

    <ol>
        <li>
            <a href= [trueURL] + "#link1">Link1</a>
        </li>

        <li>
            <a href= [trueURL] + "#link2">Link2</a>
        </li>

        <li>
            <a href= [trueURL] + "#link3">Link2</a>
        </li>
    </ol>

    </html> 
```

因此，最后我想要一个看起来像 trueURL#link3 的链接。

提前致谢，

:D :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:59:37.603

我正在假设您的真实案例比您的示例更复杂。如果不是，请查看其他答案，这可能更适合您需要做的事情。

这将做的是......

1.  在`window`加载事件上运行一个函数，它将......
2.  `DOM`找到标签中的每个元素`A`，然后...
3.  遍历那些找到`A`的标签并检查元素是否有一个`enhance`类，如果有的话......
4.  拆分`href`at`#`以获取当前`a`元素的`hash`值，我们将...
5.  将其与以下内容相结合：

    ```
    '//' + location.host + location.pathname; 
    ```

    给我们当前页面的 URL，不带`hash`or 查询字符串。如果您*想要*查询字符串（`?`URL 后面的内容），请添加`location.search`：

    ```
    '//' + location.host + location.pathname + location.search; 
    ```

*请注意，该`//`部分与协议相关，因此它将使用`base href`' 协议是什么，例如，`http`或`https`. 但是，您可能需要指定它。*

**标记**

注意`class`属性，我们将使用它来识别`a`要操作的标签。

```
<ol>
    <li>
        <a href="#link1">Link 1</a> - 
        No enhance class, should be subject to <strong>BASE HREF</strong>: 
        <strong class="p">&raquo; http://example.com#link1</strong>
    </li>
    <li>
        <a href="#link2" class="enhance">Link 2</a> - 
        Has enhance class, should be:
        <strong class="p">&raquo; http://fiddle.jshell.net/_display/#link2</strong>
    </li>
    <li>
        <a href="#link3" class="enhance">Link 3</a> - 
        Has enhance class, should be:
        <strong class="p">&raquo; http://fiddle.jshell.net/_display/#link3</strong>
    </li>
    <li>
        <a href="#link3" class="enhance">Link 4</a> - 
        Has enhance class, should be:
        <strong class="p">&raquo; http://fiddle.jshell.net/_display/#link4</strong>
    </li>
</ol>​ 
```

**Javascript**

```
//--
// window.onload is not preferred, window.addEventListener
// should be used. Except that only IE9 supports it, and
// IE8 and lower do not support it, and uses window.attachEvent
// instead, which you can test for. 
//
// I'm using window.onload here simply as a shortcut method and
// for clarity. This can also go in a script tag at the bottom
// of the body tag, in which case you can remove window.onload
// and use a self-calling anonymous function like:
//
//     (function updateLinks(){... all the same as below ...})();
//
// This will ensure you are out of the global variable scope.
//--
window.onload = function updateLinks() {
    //--
    // Modern browsers can use document.getElementsByClassName
    // or you can use a shiv script to add it to browsers that 
    // don't. I'll do it the "manual" way here, and this works
    // cross-browser. The downside is that it will interate 
    // through every A tag on the page, looking for the "small"
    // few that have the el.className we're looking for here.
    //--
    var els = document.getElementsByTagName("a"),
        l = els.length,
        trueURL = '//' + location.host + pathname,
        i, el, hash;

    for (i = 0; i < l; i++) {
        el = els[i];

        if (el.className.indexOf("enhance") != -1) {
            hash = el.href.split('#');
            el.href = trueURL + "#" + hash[1];
        }
    }
}; 
```

[http://jsfiddle.net/userdude/unnH8/](http://jsfiddle.net/userdude/unnH8/)

将鼠标悬停在链接上以查看当前设置。与往常一样，**在多个浏览器中使用真实标记进行彻底测试**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:57:08.930

如果你是认真的，`trueURL = window.location.href`那么你工作太努力了。

只需建立链接`#link1`- 它会自动相对于当前的 href。

如果这只是一个示例，您可能对以下内容感兴趣：

```
<BASE href="..."> 
```

标签。这将让您一次更改页面中所有链接的相对href。

您可以通过获取每个`<A...>`DOM 元素并修改`href`属性来使用 javascript 来实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T17:35:23.150

首先，如果您尚未使用`base`或正在使用但可以停止使用，请阅读：

## [是否推荐使用`<base>`html 标签？](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag)

这会给你很多充分的理由三思而后行。故事的寓意：通常使用`base`. 有充分的理由，而且很有用；在与设计师合作时，我曾多次使用它来获得我可以使用的标记的本地副本，但仍保持与网站资产的连接。但是对于生产现场来说，就太聪明了一半。

此外，这个答案最初是为一个完全重复的[不同问题](https://stackoverflow.com/questions/12355979/how-to-work-around-the-base-tag)而写的，所以我在这里发布这个，尽管已经有一个与它非常相似的答案。

* * *

您是否可以控制标记，或者您可以使用选择器仅获取您想要影响的元素？你可以：

**HTML**（注意类`truelink`。）

```
<ol>
    <li>
        <a href="#link1" class="truelink">True Link1</a>
    </li>
    <li>
        <a href="#link2" class="truelink">True Link2</a>
    </li>
    <li>
        <a href="#link3" class="truelink">True Link3</a>
    </li>
</ol> 
```

**Javascript**

```
​window.addEventListener('load', function links(){
    var base = document.getElementsByTagName('base')[0],
        links = document.getElementsByClassName('truelink'),
        l = links.length,
        uri = 'http://www.host.tld/path?query=test';

    console.log('Base:', base, ', True Links:', links);

    console.log('Modifying links in five seconds...');

    setTimeout(function go(){
        console.log('Modifying links now...');

        while (l--){
            links[l].href = links[l].href.replace(base.href, uri);
        }

        console.log('Base: ', base, 'True Links: ', links);
    }, 5000);
});​ 
```

[http://jsfiddle.net/M5Hdk/](http://jsfiddle.net/M5Hdk/)

请记住，此技术演示了使用[`document.getElementsByClassName`](http://www.quirksmode.org/dom/w3c_core.html)IE，直到版本 9 才支持。如果您必须支持低于 IE9 的版本，请参阅 Jeremy J Starcher 的答案，以了解“效率较低”但支持更好的方法。还有`document.querySelectorAll`，IE8及以上版本以及所有其他主流浏览器都支持。如果您只需要支持 IE8，我建议您使用它来选择您的链接，而不是 Jeremy 演示的方法。

我还将更改延迟五秒钟，以便您可以看到它起作用。显然，这对您来说不是必需的（很可能）。

我现在唯一不确定的是我`.replace()`是否总是会`base.href`在所有浏览器中找到要替换的，所以在替换之前检测相对 url 的存在可能会更好，所以你可以做任何其他事情适当地。有关这个可能的“问题”的一些相关背景，请参阅我的问题，该问题涉及浏览器如何`href`在 DOM 中以不同方式处理属性：

[使用完全限定 URL 在 Sizzle 中选择元素的方法](https://stackoverflow.com/questions/9222026/method-for-selecting-elements-in-sizzle-using-fully-qualified-urls)

`script`此外，如果它位于内容之后或标签末尾的内联标签中，这可能会最无缝地工作`body`，在这种情况下，您将希望删除该`window.addEventListener`部分并替换为自动执行功能。

他们是其他选择，所有可能都有一点问题：

*   彻底清除`base`标签。但是，如果您这样做，您首先要检查是否需要手动将`base.href`内容插入到链接中，否则我确信事情可能会破裂或变得脆弱。
*   将事件侦听器添加到`a`您要使用真实链接的链接并以这种方式操作它`onclick`，只是不要忘记`return false`在单击处理程序函数的末尾，这样浏览器就不会跟随链接。这可能是最无缝的方法，但可能并不适合所有情况。
*   应该是其他人吧。

**请务必使用真实世界的标记进行测试。** `base`是一个有点古怪的工具，所以对它进行粗暴处理可能会导致不寻常的副作用。*你被警告了*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:01:38.990

我会这样做

HTML

```
<ol>
    <li>
        <a class="build">Link1</a>
    </li>

    <li>
        <a class="build">Link2</a>
    </li>

    <li>
        <a class="build">Link2</a>
    </li>
</ol>​ 
```

Javascript/Jquery

```
$(function(){
    var trueURL = window.location.href;
    var i = 1;
    $('a.build').each(function(){
        $(this).attr('href', trueURL + '#link' + i);
        i = i+1;
    });
}); 
```

工作代码示例在[这里](http://jsfiddle.net/ntcg3/50/)

# php - 使用 PHP 制作动态的 Twiiter Bootstrap 轮播

> ID：12314800
> 
> 赞同：1
> 
> 时间：2012-09-07T08:52:44.607
> 
> 标签：php, mysql, twitter-bootstrap, carousel

我正在尝试制作一个使用 Twitter Bootstrap 默认 JavaScript 和 CSS 的轮播，但应该从 MySQL 数据库中获取图像。

我试图用 php 动态化的轮播的 HTML 是这样的：

```
<div class="carousel-inner">
   <div class="active item">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginLast">
   </div>
   <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
   <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

我期待的 PHP 文件的最终结果是这样的

```
<div class="carousel-inner">
   <?php renderAds(); ?>
</div> 
```

我写的 PHP 函数是这样的：

```
function renderAds(){
    $query = queryAds();
    $query_exe = mysql_query($query);

    if(mysql_num_rows($query_exe) == 0){
        echo '<img src="images/sampleAd.jpg" >';
    }else{

        $numb =1;
        $flag =1;
        while($fetched_data = mysql_fetch_array($query_exe)){

            if($numb == 1){
                if($flag == 1){
                    echo '<div class="active item">';
                }else{
                    echo '<div class="item">';
                }
            }elseif($numb == 4){
                echo '<a href="'.$fetched_data['url'].'"  class="pull-left marginLast" ><img src="'.$fetched_data['image_url'].'"></a>';
                echo '</div>';
                $numb =0;
            }else{
                echo '<a href="'.$fetched_data['url'].'" class="pull-left marginTop" ><img src="'.$fetched_data['image_url'].'"></a>';
            }
            $numb++;
            $flag++;
        }

        echo '<a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>';
        echo '<a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>';
    }

} 
```

在这里，与 twitter bootstrap 的默认轮播不同，我为每张幻灯片制作了 4 张图像，我希望每个幻灯片过渡包含 4 张图像，而不是默认情况下一张幻灯片的单个图像。在 HTML 中它可以工作，但是当我用我的 PHP 函数替换它时，第一张幻灯片可以工作，但是如果我在轮播中按下下一个箭头，整个 div 就会崩溃。

我怎样才能使它工作？

> 注意：这里Last image 必须包含marginLast 类，另一个应该有marginTop 和pull-left 类。

我期望在 html 中呈现的内容是这样的：

```
<div class="carousel-inner">

            <div class="active item">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginLast">
            </div>

            <div class="item">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginLast">
            </div>

            <div class="item">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginTop">
                <img src="images/sampleAd.jpg" class="pull-left marginLast">
            </div>

            <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
            <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
   </div> 
```

我怎样才能让我的 PHP 函数像上面那样显示结果标记？

编辑：我得到的输出是这样的：

```
<div id="myCarousel" class="carousel slide">
          <!-- Carousel items -->
          <div class="carousel-inner">

                <div class="active item">
                    <a href="xx2" class="pull-left marginTop" ><img src="images/sampleAd.jpg"></a>
                    <a href="xx" class="pull-left marginTop" ><img src="images/sampleAd.jpg"></a>
                    <a href="sample.com"  class="pull-left marginLast" ><img src="images/sampleAd.jpg"></a>
                </div>

                <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>             
          </div><!-- end carousel-inner -->

  </div><!-- myCarousel --> 
```

根据标记，这应该可以工作，但它没有，默认情况下，如果没有超过一个幻灯片，则箭头应该被禁用，但它是可点击的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:14:30.787

你有没有 MySQL 查询只返回一个数组。这样，您的查询是可重用的（然后可以制成一个函数），并且您可以呈现您认为合适的数据。

```
<?php
$mysqli = new mysqli('localhost', 'username', 'password', 'database');

$sql = "SELECT * FROM table";
$res = $mysqli->query($sql);

$rows = array();
while ($row = $res->fetch_assoc()) {
    $rows[] = $row;
}
?>
<div class="carousel">
  <div class="carousel-inner">
<?php $i = 1; ?>
<?php foreach ($rows as $row): ?>
<?php $item_class = ($i == 1) ? 'item active' : 'item'; ?>
    <div class="<?php echo $item_class; ?>">
      <a href="<?php echo $row['url']; ?>">
        <img src="<?php echo $row['image']; ?>" alt="<?php echo $row['title']; ?>" />
      </a>
    </div>
<?php $i++; ?>
<?php endforeach; ?>
  </div>
</div> 
```

您显然需要更改数据库查询以及`foreach`循环中使用的值。我也使用了这些`mysqli`函数，因为`mysql`现在不推荐使用这些函数来支持 MySQLi（MySQL 改进）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T16:45:05.047

我想我为自己的问题找到了答案，尽管上述所有答案都给了我很多想法。谢谢你们

```
function renderAds(){
    $query = queryAds();
    $query_exe = mysql_query($query);
    if(mysql_num_rows($query_exe) == 0){
        echo '<img src="images/sampleAd.jpg" >';
    }else{
        $numb =1;
        $flag =1;
        echo '<div class="carousel-inner">';
        while($fetched_data = mysql_fetch_array($query_exe)){
            if($numb == 1){
                if($flag == 1){
                    echo '<div class="active item">';
                }else{
                    echo '<div class="item">';
                }
                echo '<a target="_blank" href="http://'.$fetched_data['url'].'" class="pull-left marginTop" ><img src="'.$fetched_data['image_url'].'"></a>';
            }elseif($numb == 4){
                echo '<a target="_blank" href="http://'.$fetched_data['url'].'"  class="pull-left marginLast" ><img src="'.$fetched_data['image_url'].'"></a>';
                $numb = 0;
                echo '</div>';
            }else{
                echo '<a target="_blank" href="http://'.$fetched_data['url'].'" class="pull-left marginTop" ><img src="'.$fetched_data['image_url'].'"></a>';
            }

            $numb++;
            $flag++;
        }

        if($numb > 1 && $numb < 4 ){
            echo '</div>';
            echo '</div>';
        }elseif($numb == 1){
            echo '</div>';
        }elseif($numb == 4){
            echo '</div>';
            echo '</div>';
        }

        echo '<a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>';
        echo '<a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T05:56:28.417

```
<div class="carousel-inner">

<?php 
// Twitter Bootstrap Carousel.
$caseStudies = get_posts(array(
  'numberposts' => 12,
  'post_type'   => 'case-study',
  'meta_key'    => 'show_case_study_home',
  'meta_value'  => 'yes',
  'post_status' => 'publish',
));

$open = 0;
$close = 1;
$active = 0;
$didClose = false;
foreach($caseStudies as $caseStudy){

  $image  = get_field('image_home', $caseStudy->ID);
  $header = get_field('header_home', $caseStudy->ID);
  $intro  = get_field('intro_home', $caseStudy->ID);

  $activeCss = "";

    if(($open)%4 == 0) {
      if ($active == 0) $activeCss = " active";
     echo '<div class="item'. $activeCss .'"><ul class="thumbnails">';
    }
?>

<li class="span3">
  <div class="case-study">
  <img src="<?php echo $image['url']; ?>" alt="">
  <a href="<?php echo get_permalink($caseStudy->ID); ?>" class="btn-more read-hover">Read More</a>
  <h4><?php echo $header; ?></h4>
  <p><?php echo $intro; ?></p>
  </div>
</li>

<?
    if(($close)%4 == 0) {
     echo "<ul></div>";
     $didClose = true; // Maybe the carousel has less than 4 items ...
    }

  $open++;
  $close++;
  $active++;
}
if($didClose == false) echo "</div></div>"; // If has less than 4 items in the carousel close the tags.
?>

</div><!--/.caroussel-inner --> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-12T05:17:50.167

我解决了它：

```
<div id="myCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <?php $slider = $guest->getAllData("slider"); ?>
            <?php foreach( $slider as $slide) : ?>
                <li data-target="#myCarousel" data-slide-to="<?=$slide['id']; ?>" class=""></li>
            <?php endforeach; ?>
        </ol>
        <div class="carousel-inner">
            <?php foreach($slider as $slide) : ?>
                <div class="item ">
                    <img src="images/slider/<?=$slide['img']; ?>" alt="Los Angeles">
                </div>
            <?php endforeach; ?>
        </div>

        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
        </a>
    </div> 
```

并添加JS代码：

```
$('.carousel-indicators>li:first-child').addClass('active');
$('.carousel-inner>div:first-child').addClass('active'); 
```

# typo3 - TYPO3 中的“typo3temp/compressor”文件夹每天增长 1 GB

> ID：12314804
> 
> 赞同：1
> 
> 时间：2012-09-07T08:53:01.920
> 
> 标签：typo3

我已经接管了一个 TYPO3 网页的管理，我意识到每天过去，它在 CSS 和 JS 文件中增长 1GB，“merged-ffff2d33c1ce910940054845fe400023.js”等等。现在我的压缩器文件夹有 15GB 大。它超大！

似乎 CMS 在每次点击页面时都制作了 CSS 和 JS 的缓存版本，但我只是在猜测，因为我不知道这个文件夹中发生了什么。

我比较了每个子页面上的文件，虽然发现了一些共性，但仍有许多不同之处。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-15T08:58:48.953

我设置时遇到了同样的问题

```
concatenateJs = 1
concatenateCss = 1
compressJs = 1
compressCss = 1 
```

在我的打字稿中。问题是 TYPO3 在压缩 JS 和 CSS 文件时似乎存在错误。我用 6.2.10 进行了测试。对于每个用户/浏览器的每个请求，TYPO3 每天都会在typo3temp/compressed 中生成一个新的 CSS 文件。停用压缩

```
compressJs = 0
compressCss = 0 
```

解决了这个问题，TYPO3 总是提供相同的缓存 CSS 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:46:13.693

我发现由 CSS Styled 内容生成的 CSS 实际上知道每个页面上有哪些元素。因此，如果一个页面的右侧有一个带有文本的图像，则包含所需的样式，如果另一个页面的右侧没有带有文本的图像，则不会生成此 CSS。这导致几乎所有页面上的 CSS 实际上都不同，从而导致许多合并的 CSS 文件。

我错过了一个只包含所有 CSS 的选项，不管它是否使用。这可能会创建一个更大的 CSS 文件，但至少它在所有页面上都是同一个文件，因此可以在浏览器中缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:03:07.850

我会开始比较合并的 javascript 文件。

你能告诉我有什么区别吗？

例如，在某些情况下，可能会生成一些带有页面 id 的 javascript

```
<script>
var pageId = 77;
</script> 
```

如果打开了将内联 javascript 移动到外部文件的选项，那么每个页面都会有所不同，最后合并将为每个页面创建新的合并版本。

所以现在最重要的问题是beetwen合并文件有什么区别。

编辑：您的解决方案是删除所有第三方扩展。清除 /compress/ 文件夹。然后一一安装那些第三方ext，看看是哪一个导致了问题。

# c++ - 如何获取整数模板参数的值？

> ID：12314807
> 
> 赞同：0
> 
> 时间：2012-09-07T08:53:04.503
> 
> 标签：c++, templates

标题可能令人困惑，但可以说我有一个模板：

```
template <typename T, size_t offset>
struct offsetedIdxArray
{
//...
} 
```

在我创建一个实例之后：

```
static const size_t offset(1701);
offsetedIdxArray<zmq::socket_t, offset> oia; 
```

有没有办法从`oia`. 我知道我可以只使用偏移量，但从代码风格的角度来看，`oia`如果可能的话，我更喜欢从中获取它。

编辑：我正在寻找一种在结构内没有辅助变量的情况下获得偏移量的方法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:02:46.807

如果要在`offsetedIdxArray<T,N>`不向类模板添加任何成员的情况下从对象获取信息，可以使用模板函数：

```
#include <iostream>
#include <cstddef>

template <typename T, size_t offset>
struct offsetedIdxArray
{
};

template <typename T, size_t offset>
size_t getOffset(const offsetedIdxArray<T, offset>&) {
  return offset;
}

int main()
{
   offsetedIdxArray<int,5> oia;
   std::cout << getOffset(oia) << "\n";

} 
```

否则，您可以按照其他帖子中的建议添加静态常量或枚举数据成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T08:54:46.143

```
template <typename T, size_t offset>
struct offsetedIdxArray
{
   static const size_t off = offset;
//...
}; 
```

并得到变量`off`。

# c# - Asp.net Web Api 流式传输

> ID：12314816
> 
> 赞同：2
> 
> 时间：2012-09-07T08:53:26.627
> 
> 标签：c#, asp.net, asp.net-web-api

我一直在尝试将文件流式传输到我的网络服务。在我的 Controller(ApiController) 中，我有一个 Post 函数，如下所示：

```
public void Post(Stream stream)
{
    if (stream != null && stream.Length > 0)
    {
        _websitesContext.Files.Add(new DbFile() { Filename = Guid.NewGuid().ToString(), FileBytes= ToBytes(stream) });
        _websitesContext.SaveChanges();
    }
} 
```

我一直在尝试通过执行以下操作使用我的 Web 客户端流式传输文件：

```
public void UploadFileStream(HttpPostedFileBase file)
{
    WebClient myWebClient = new WebClient();
    Stream postStream = myWebClient.OpenWrite(GetFileServiceUrl(), "POST");
    var buffer = ToBytes(file.InputStream);
    postStream.Write(buffer, 0,buffer.Length);
    postStream.Close();
} 
```

现在，当我调试我的 Web 服务时，它会进入 Post 函数，但流始终为空。想知道是否有人知道为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:01:26.840

Web API 没有模型绑定到“流”类型，因此您会看到这种行为。您可以通过执行以下操作来捕获传入的请求流： Request.Content.ReadAsStreamAsync()

例子：

```
public async Task<HttpResponseMessage> UploadFile(HttpRequestMessage request)
    {
        Stream requestStream = await request.Content.ReadAsStreamAsync(); 
```

注意：您甚至不需要将 HttpRequestMessage 作为参数，因为您始终可以通过 ApiController 提供的“请求”属性访问此请求消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:21:34.433

您可以用此代码替换

```
var uri = new Uri(GetFileServiceUrl());
Stream postStream = myWebClient.OpenWrite(uri.AbsoluteUri, "POST"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T12:47:58.793

[RestSharp](http://restsharp.org/)让这类事情变得非常容易。建议尝试一下。

# c# - C#，使用委托函数作为过滤器更新列表

> ID：12314817
> 
> 赞同：1
> 
> 时间：2012-09-07T08:53:27.127
> 
> 标签：c#

当条件（pred）对其一个类成员（值）成立时，我想更新一个对象列表（mycapsule，还有许多其他成员）。每当我改变某件事时，另一件事就失败了，我是 C# 的新手，真的很困惑。有人可以修复我的代码吗：在最好的情况下，我只会收到此错误，但我认为我的代码中缺少很多东西

```
The type or namespace name `T' could not be found. Are you missing a using directive or an assembly reference? 
```

这是我的代码

```
using System;
using System.Collections.Generic ;
namespace test
{
    class MainClass
    {
        public static List< mycapsule<int,double> > sample=  new List< mycapsule<int,double>>();
        public static void Main (string[] args)
        {

            sample.Add(new mycapsule<int,double> {id=1 , value= 1.2});
            update(pred, 12.3);
        }

        public static bool pred(double x)
        {
            if (x==2.5) return true;
            return false;
        }
        public class mycapsule<KT, T>
        {
            public KT id {get ; set; } 
            public T value { get ; set; }
            public int p; // and more

        }    

        public bool update(Func<T, bool> predicate, T i)
        {
            foreach (var x in sample.FindAll(item => predicate(JustValue(item))) )
            {
                x.value = i ;
            }
            return true ;
        }

        public T JustValue(mycapsule<int,T> i)
        {
            return i.value;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:59:27.660

看看你的更新方法：

```
public bool update(Func<T, bool> predicate, T i)
{
    foreach (var x in KeyRecord.FindAll(item => predicate(JustValue(item))) )
    {
        x.value = i ;
    }
    return true ;
} 
```

你希望`T`在这里做什么？该方法不是通用的（它没有写为`update<T>`），也没有在通用类中声明。

您*可能*只想：

```
public bool update<T>(Func<T, bool> predicate, T i) 
```

......但很难说不知道是什么`KeyRecord.FindAll`样子。哦，你也有同样的问题`JustValue`。

作为一个附带问题，方法名称不遵循 .NET 命名约定，并且`update`在描述性方面是一个糟糕的方法名称。也不遵循 .NET 命名约定。这些东西在可读性方面真的很*重要*。`pred``JustValue``mycapsule`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:09:09.327

试试这个，对于泛型方法，您使用的方法定义不正确。
它应该是

```
//MethodName<T,U>(T para1, U para2) 
```

我已经更改了代码以包含反射，这应该可以工作。请尝试并提供反馈。

```
using System;
using System.Collections.Generic;
using System.Reflection;
namespace test
{
    class MainClass
    {
        public static List<Mycapsule<int, double>> sample = new List<Mycapsule<int, double>>();

        public static void Main(string[] args)
        {

            sample.Add(new Mycapsule<int, double> { id = 1, value = 1.2 });
            update(pred, 12.3);
        }

        public static bool pred(double x)
        {
            if (x == 2.5) return true;
            return false;
        }

        public static bool update<T>(Func<T, bool> predicate, T i)
        {
            var myCollection = sample.FindAll(p => pred(JustValue<double>(p)));
            MainClass mainClass = new MainClass();
            foreach (var x in myCollection)
            {
                MethodInfo changeTypeMethod = typeof(MainClass).GetMethod("GetValue");
                object value = changeTypeMethod.Invoke(mainClass, new object[] { i, typeof(T) });
                PropertyInfo valueProperty = x.GetType().GetProperty("value");
                valueProperty.SetValue(x, value);
            }
            return true;
        }

        public T GetValue<T>(T i)
        {
            return (T)Convert.ChangeType(i, typeof(T));
        }

        public static T JustValue<T>(Mycapsule<int, T> i)
        {
            return i.value;
        }
    }
    //Outside the MainClass inside the same namespace 
    public class Mycapsule<KT, T>
    {
        public KT id { get; set; }
        public T value { get; set; }
        public int p; // and more   

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:30:09.683

由于类型安全原因，恐怕这不起作用。我尽可能地更正了代码并得到了这个：

```
public static List<mycapsule<int, double>> sample = new List<mycapsule<int, double>>();
public static void Main(string[] args)
{
    sample.Add(new mycapsule<int, double> { id = 1, value = 1.2 });
    update(pred, 12.3);
}

public static bool pred(double x)
{
    if (x == 2.5) return true;
    return false;
}

public class mycapsule<KT, T>
{
    public KT id { get; set; }
    public T value { get; set; }
    public int p; // and more
}

public static bool update<T>(Func<T, bool> predicate, T i)
{
    List<mycapsule<int, double>> list = sample.FindAll(item => predicate(JustValue(item)));
    foreach (var x in list)
    {
        x.value = i;
    }
    return true;
}

public static T JustValue<T>(mycapsule<int, T> i)
{
    return i.value;
} 
```

错误是：

```
predicate(JustValue(item)) => Argument 1: cannot implicitly convert from double to T 
```

这是因为您试图强制调用您指定为采用泛型类型`T`( `Func<T, bool>`) 的方法，该方法的值已知为`double`. 虽然我们知道`T`调用 to 会加倍`update(pred, 12.3);`，但没有什么能阻止我传入一个采用不兼容类型的谓词，例如：

```
public static bool pred(string x)
{
    return false;
} 
```

和

```
update(pred, "asdf"); 
```

这显然是不一致的。编译器只是试图防止你不小心射中自己的脚。

为了解决这个问题，您可以显式地将集合传递给 update `method`，从而确保类型是一致的：

```
public static List<mycapsule<int, double>> sample = new List<mycapsule<int, double>>();
public static void Main(string[] args)
{
    sample.Add(new mycapsule<int, double> { id = 1, value = 1.2 });
    update(pred, 12.5, sample);
}

public static bool pred(double x)
{
    if (x == 2.5) return true;
    return false;
}

public class mycapsule<KT, T>
{
    public KT id { get; set; }
    public T value { get; set; }
    public int p; // and more
}

public static bool update<T>(Func<T, bool> predicate, T i, List<mycapsule<int, T>> list)
{
    foreach (var x in list.FindAll(item => predicate(JustValue(item))))
    {
        x.value = i;
    }
    return true;
}

public static T JustValue<T>(mycapsule<int, T> i)
{
    return i.value;
} 
```*

# c++ - 在虚拟继承中交换和复制习语的正确方法是什么？

> ID：12314820
> 
> 赞同：6
> 
> 时间：2012-09-07T08:53:40.200
> 
> 标签：c++, multiple-inheritance, virtual-inheritance, diamond-problem, copy-and-swap

考虑经典的虚拟继承菱形层次结构。我想知道在这种层次结构中复制和交换习语的正确实现是什么。

这个[例子](http://ideone.com/HrVBC)有点人为——而且它不是很聪明——因为它可以很好地使用 A、B、D 类的默认复制语义。但只是为了说明问题 - 请忘记示例弱点并提供解决方案。

所以我有从 2 个基类 (B<1>,B<2>) 派生的 D 类 - 每个 B 类实际上都继承自 A 类。每个类都具有使用复制和交换习语的非平凡复制语义。最派生的 D 类在使用这个习语时有问题。当它调用 B<1> 和 B<2> 交换方法时 - 它交换虚拟基类成员两次 - 所以 A 子对象保持不变！！！

A：

```
class A {
public:
  A(const char* s) : s(s) {}
  A(const A& o) : s(o.s) {}
  A& operator = (A o)
  {
     swap(o);
     return *this;
  }
  virtual ~A() {}
  void swap(A& o)
  {
     s.swap(o.s);
  }
  friend std::ostream& operator << (std::ostream& os, const A& a) { return os << a.s; }

private:
  S s;
}; 
```

乙

```
template <int N>
class B : public virtual A {
public:
  B(const char* sA, const char* s) : A(sA), s(s) {}
  B(const B& o) : A(o), s(o.s) {}
  B& operator = (B o)
  {
     swap(o);
     return *this;
  }
  virtual ~B() {}
  void swap(B& o)
  {
     A::swap(o);
     s.swap(o.s);
  }
  friend std::ostream& operator << (std::ostream& os, const B& b) 
  { return os << (const A&)b << ',' << b.s; }

private:
  S s;
}; 
```

丁：

```
class D : public B<1>, public B<2> {
public:
  D(const char* sA, const char* sB1, const char* sB2, const char* s) 
   : A(sA), B<1>(sA, sB1), B<2>(sA, sB2), s(s) 
  {}
  D(const D& o) : A(o), B<1>(o), B<2>(o), s(o.s) {}
  D& operator = (D o)
  {
     swap(o);
     return *this;
  }
  virtual ~D() {}
  void swap(D& o)
  {
     B<1>::swap(o); // calls A::swap(o); A::s changed to o.s
     B<2>::swap(o); // calls A::swap(o); A::s returned to original value...
     s.swap(o.s);
  }
  friend std::ostream& operator << (std::ostream& os, const D& d) 
  { 
     // prints A::s twice...
     return os 
    << (const B<1>&)d << ',' 
    << (const B<2>&)d << ',' 
        << d.s;
  }
private:
  S s;
}; 
```

`S`只是一个存储字符串的类。

进行复制时，您会看到 A::s 保持不变：

```
int main() {
   D x("ax", "b1x", "b2x", "x");
   D y("ay", "b1y", "b2y", "y");
   std::cout << x << "\n" << y << "\n";
   x = y;
   std::cout << x << "\n" << y << "\n";
} 
```

结果是：

```
ax,b1x,ax,b2x,x
ay,b1y,ay,b2y,y
ax,b1y,ax,b2y,y
ay,b1y,ay,b2y,y 
```

可能添加`B<N>::swapOnlyMe`会解决问题：

```
void B<N>::swapOnlyMe(B<N>& b) { std::swap(s, b.s); }
void D::swap(D& d) { A::swap(d); B<1>::swapOnlyMe((B<1>&)d); B<2>::swapOnlyMe((B<2>&)d); ... } 
```

但是当 B 从 A 私下继承时呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T09:51:42.900

这是哲学的咆哮：

1.  我不认为虚拟继承可以或不应该是私有的。虚拟基的全部意义在于*最派生类*拥有虚拟基，而不是中间类。因此，不应允许任何中间类“占用”虚拟基础。

2.  让我重复一遍：最派生的类拥有虚拟基。这在构造函数初始化程序中很明显：

    ```
    D::D() : A(), B(), C() { }
    //       ^^^^
    //       D calls the virtual base constructor! 
    ```

    同理，所有*其他*操作都`D`应该立即负责`A`。因此，我们很自然地会写出这样的派生交换函数：

    ```
    void D::swap(D & rhs)
    {
        A::swap(rhs);   // D calls this directly!
        B::swap(rhs);
        C::swap(rhs);

        // swap members
    } 
    ```

3.  将所有这些放在一起，我们只剩下一个可能的结论：您必须编写中间类的交换函数而不交换基类：

    ```
    void B::swap(B & rhs)
    {
        // swap members only!
    }

    void C::swap(C & rhs)
    {
        // swap members only!
    } 
    ```

现在你问，“如果其他人想从中派生`D`怎么办？现在我们看到了 Scott Meyer 建议总是使非叶类抽象化的原因：遵循该建议，您*只需*`swap`实现调用虚拟基交换的最终函数具体的叶类。

* * *

*更新：*这里只是切线相关的东西：虚拟交换。我们继续假设所有非叶类都是抽象的。首先，我们将以下“虚拟交换函数”放入每个基类（虚拟或非虚拟）中：

```
struct A
{
    virtual void vswap(A &) = 0;
    // ...
}; 
```

这个函数的使用当然只保留给相同的类型。这是由隐式异常保护的：

```
struct D : /* inherit */
{
    virtual void vswap(A & rhs) { swap(dynamic_cast<D &>(rhs)); }

    // rest as before
}; 
```

它的整体效用是有限的，但如果我们碰巧知道它们是相同的，它确实允许我们多态地交换对象：

```
std::unique_ptr<A> p1 = make_unique<D>(), p2 = make_unique<D>();
p1->vswap(*p2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:28:27.077

虚拟基通常意味着大多数派生类的对象都在控制它。

**第一个解决方案：**重新组织您的类以更适合多态性。使复制结构受到保护。删除分配和`swap()`. 添加虚拟`clone()`. 想法是类应该被视为多态的。所以它们应该与指针或智能指针一起使用。交换或分配的应该是指针值，而不是对象值。在这种情况下，交换和分配只会混淆。

**第二种解决方案：**使 B 和 C 抽象及其指针不管理对象生命周期。B 和 C 的析构函数应该是受保护的和非虚拟的。因此 B 和 C 将不是对象的大多数派生类。使保护不交换A子对象`B::swap()`，`C::swap()`现在可以重命名或添加注释它是继承类的事务。这消除了许多对象切片的可能性。使`D::swap()`交换一个子对象。你得到一个 A 的交换。

**第三种解决方案：**使`D::swap()`交换一个子对象。这样 A 子对象将被交换 3 次并落在正确的位置。低效？无论如何，整个构造可能是个坏主意。例如，我不确定虚拟析构函数和交换在这里的合作情况如何，并且很多切片对象的方法在这里都是公开的。这一切似乎都类似于尝试在 C++ 中创建一个坏主意的虚拟赋值运算符。

如果某些东西按其顺序从 D 继承，那么它应该通过交换或不交换 A 子对象来确保交换 A 的计数是奇数。它变成了控制，所以应该接管和修复。

`private virtual`惯用语是在 C++ 中使类成为 final 的方法之一。什么都不能继承它。你问的很有趣。如果您曾经使用过它，请务必发表评论，它会使大多数代码读者感到困惑。

# elasticsearch - 带有雪球分析器的 Elasticsearch 仅返回词干词的结果

> ID：12314821
> 
> 赞同：6
> 
> 时间：2012-09-07T08:53:48.227
> 
> 标签：elasticsearch

我在查询字符串搜索中使用雪球分析器......就像这样

```
 "query" : {
      "query_string" : {
        "query" : the-query-string-goes-here,
        "default_operator" : "AND",
        "analyzer" : "snowball"
      }
    } 
```

这实际上有效，但它做了一些奇怪的事情......搜索“战斗”将返回“战斗”的结果，但忽略“战斗”的结果。搜索“crews”将返回“crew”而不是“crews”的结果，搜索“crew”也会忽略“crews”的结果......

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T09:39:19.860

当您在索引时间和查询时间应用词干提取时，它是有意义的。现在您在查询时应用它，以便您搜索作为查询一部分的词的词干。但我猜索引不包含词干，因为您没有在索引时应用词干。您实际上是在该`_all`字段上进行搜索，因为您既没有在查询中指定任何字段名称，也没有使用query_string 支持的`default_field`（或）属性。`fields`默认情况下，该`_all`字段使用`StandardAnalyzer`.

有不同的方法可以解决这个问题。我个人会决定您要在查询中搜索的一组字段，并将其应用于映射中的词干。之后，您无需在查询中指定分析器，因为将使用为您正在搜索的字段配置的分析器。

让我知道答案是否足够清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T20:14:03.977

感谢@javanna 为我指明了正确的方向。我通过将`_all`字段的分析器设置为`snowball`. 有关详细信息，请参阅[此文档](http://www.elasticsearch.org/guide/reference/mapping/all-field.html)。

我正在使用 Ruby 轮胎 gem，并且能够在我的模型中指定映射，如下所示：

```
mapping(_all: { analyzer: 'snowball' }) do
  indexes :id, type: 'integer'
  indexes :description
  indexes :name, boost: 10
end 
```

我的查询格式与原始问题完全相同。

# php - 从数据库中检索数据并使用 php 将其作为 Excel 表邮寄

> ID：12314824
> 
> 赞同：0
> 
> 时间：2012-09-07T08:54:05.477
> 
> 标签：php, sql-server

下面是我从数据库邮寄数据的代码。请帮助我进行更正。

```
<?

set_time_limit(0);

require("..\class\mime_mail.inc");

unlink("filename.html");

`php -q D:\Inetpub\wwwroot\abc\xyz\getdata.php > filename.html`;

$to = "abc@xyz.com";   
$bcc = "abc@xyz.com";

$subject = 'aaaaaa - ' . date("Y-m-d");
$body = join('',file("filename.html"));
$headers  = "Content-Type: text/html; charset=iso-8859-1\r\n";
$headers .= "From: abc@abc.com\r\n";
$headers .= "Bcc:". $bcc ." \r\n";
mail($to, $subject, $body, $headers);

?> 
```

在上面的代码中，getdata.php 是一个从 DB 中检索数据并存储在 Excel 表中的文件。它工作正常。上面的代码是另一个名为 senddata.php 的文件。当我运行 senddata.php 时，我应该会收到邮件，但在上述情况下不会。请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:07:47.203

检查您的 php.ini 是否具有用于发送邮件的正确 SMTP 设置。可以发普通短信吗？

关于代码的三个注释：

*   `$body = join('',file("filename.html"));`PHP>=5 有`file_get_contents`：`$body = file_get_contents('filename.html');`
*   ``php -q D:\Inetpub\wwwroot\abc\xyz\getdata.php > filename.html`;``unlink`'>' 已经清除文件内容，所以可能不需要
*   Prefer `<?php`over `<?`- 这使您的代码更具可移植性

# vb.net - 限制用户可以放入文本框 vb.net 的字符范围

> ID：12314825
> 
> 赞同：0
> 
> 时间：2012-09-07T08:54:05.767
> 
> 标签：vb.net, visual-studio, visual-studio-2005

我有一个 vb 形式的文本框，我想将用户可以放入文本框中的字符范围限制为：`" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890^-*()."`. 文本框是将 SI 单位插入数据库，所以我需要一致的语法。如果用户在文本框中键入无效字符，我希望文本框拒绝插入或立即将其删除，将光标留在文本框中的相同位置。我还希望文本框替换`"/"`为`"^(-"`并将光标放在此之前。

我在其他地方找到了一些我已经编辑过的代码来执行此操作，但代码很糟糕，它会在文本框中更改的文本上激活。这会导致代码失败，当用户输入不允许的值时，代码会在尝试更改文本框中的文本时自行激活。

这是我的代码，文本框`"enter SI Units"`从表单设计器的内容开始。

```
Private Sub TxtQuantityTextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtSIUnit.TextChanged

If txtSIUnit.Text = "Enter SI Units" Then
        Exit Sub
    End If

    Dim charactersAllowed As String = " abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890^-*()."
    Dim Text As String = txtSIUnit.Text
    Dim Letter As String
    Dim SelectionIndex As Integer = txtSIUnit.SelectionStart
    Dim Change As Integer

    Letter = txtSIUnit.Text.Substring(SelectionIndex - 1, 1)
    If Letter = "/" Then
        Text = Text.Replace(Letter, "^(-")
        SelectionIndex = SelectionIndex - 1
    End If

    Letter = txtSIUnit.Text.Substring(SelectionIndex - 1, 1)
    If charactersAllowed.Contains(Letter) = False Then
        Text = Text.Replace(Letter, String.Empty)
        Change = 1
    End If

    txtSIUnit.Text = Text
    txtSIUnit.Select(SelectionIndex - Change, 0)

    If txtQuantity.Text <> "Enter Quantity" Then
        If cmbStateRateSumRatio.SelectedIndex <> -1 Then
            bttAddQUAtoDatabase.Enabled = True
        End If
    End If

End Sub` 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:50:49.627

在文本框的`KeyDown`事件中，选中`e.KeyCode`. 这使您可以防止处理某些字符。[KeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx#Y342)文档中有一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:43:33.113

使用 KeyPress 事件。如果您不喜欢该角色，请将 e.Handled 设置为 true。这是一个单行：

```
Private Const AllowedChars = " abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890^-*()."

Private Sub TextBox1_KeyPress(ByVal sender As Object, ByVal e As PressEventArgs) Handles TextBox1.KeyPress
    If e.KeyChar >= " "c AndAlso Not AllowedChars.Contains(e.KeyChar) Then e.Handled = True
End Sub 
```

# jira - JIRA 如何在 Dashboard 中显示 Epics、Stories 和 Tasks 的分层视图？

> ID：12314827
> 
> 赞同：3
> 
> 时间：2012-09-07T08:54:12.147
> 
> 标签：jira, user-stories, epic

为了管理大型社区网站的 scrum 开发过程，我们决定迁移到 JIRA/Greenhopper/Bonfire。我创建了精心制作的史诗、故事和任务，所有这些都相互关联。

我想通过添加新的史诗、新故事到（新的或现有的）史诗等来更详细地开发“产品故事”。

为了能够正确地做到这一点，我想要对所有问题进行分层概述：史诗、故事、任务等。

问题：我们如何在 JIRA 中进行设置？

为什么？=> 我的方法是从项目管理的角度出发：让每个人都围绕同一个愿景保持一致。然而，我认为团队中的每个人——尤其是那些实际构建产品的人——都应该快速了解他们当前或计划的工作如何适应大局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T13:02:47.730

故事有子任务，会在 Sprint 中分层显示，但所有子任务都必须在用户故事的 sprint 中完成。我还认为，当您创建故事时，您可以指定一个史诗，这将创建一个硬链接（与故事-> 子任务相同）。您是否有理由要使用 Jira 任务？在我看来，在 SCRUM 环境中你只需要史诗、故事和子任务。也许不时会有一些尖峰和支持票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T19:33:23.713

来自像 Rally 这样的工具，我很感激你想看到大局。一年多前，我们从 Rally 过渡到 Greenhopper，主要是因为成本。让我们说你得到你的报酬。我没有在 Greenhopper 中找到您要寻找的功能，它只有一个线程视图，用于诸如史诗到故事（在计划页面上）或故事到任务（在工作页面上）

# java - 检查空的 JFormattedTextField

> ID：12314829
> 
> 赞同：2
> 
> 时间：2012-09-07T08:54:19.190
> 
> 标签：java, swing, string, jformattedtextfield

我是新来的，我想要一些关于我正在做的小型 Java 项目的帮助。这是我需要帮助的代码片段：

```
private void CalculateButtonActionPerformed(java.awt.event.ActionEvent evt)                                                
{                                                    
    // TODO add your handling code here:
    float Principal, Rate, Time, Result, Temp;

    Principal = Float.valueOf(PrincipalTextField.getText());
    Rate = Float.valueOf(RateTextField.getText());
    Time = Float.valueOf(TimeTextField.getText());

    Temp = (float) Math.pow((1 + Rate / 100), Time);
    Result = Principal * Temp;
    ResultTextField.setText(String.valueOf(Result));
} 
```

我想检查用户是否未填写 PrincipalTextField、OR RateTextField 或 TimeTextField，如果是，则显示一个对话框，要求他/她重新检查它们。文本字段是 JFormattedTextField 变量。我意识到我可以使用 if/else 或 while 循环来做到这一点，但我不确定如何着手这样做。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:01:46.093

你可以这样做：

*   返回一个`getText()`字符串值。因此，您始终可以调用`length()`并检查长度是否为 0。（*我建议在调用删除任何空格`trim()`之前调用字符串）`length()`

*   接下来，如果任何长度为零，您要做的是显示一个*Dialog Box*。这可以通过调用来完成`JOptionPane.showMessageDialog()`。您可以在此处阅读有关“如何制作对话框”的更多信息[。](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

所以，你会做这样的事情：

```
String principalText = PrincipalTextField.getText();
String rateText = RateTextField.getText();
String timeText = TimeTextField.getText();

if(principalText.trim().length == 0 || rateText.trim().length == 0 || timeText.trim().length == 0){
    JOptionPane.showMessageDialog(null, "YOUR_ERROR_MSG", "ERROR_TITLE", JOptionPane.ERROR_MESSAGE);
} 
```

这可能是题外话，但我建议查看[Java Naming Convention](http://www.cwu.edu/~gellenbe/javastyle/naming.html)。变量的约定是使用以小写字母开头的*混合大小写字母**组成*变量名称

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:05:22.887

1.  你错过了为什么有[JFormattedTextField的原因](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)

2.  必须设置`Number Formatter`为`JFormattedTextField`，然后

    *   你不需要解析`Float value`（最好使用双精度）

    *   默认情况下，空可以是 0（零）值

    *   以形式取值 `((Number)PrincipalTextField.getValue()).floatValue();`

3.  查看教程的代码示例，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:58:51.577

还要考虑子类化[`InputVerifier`](http://docs.oracle.com/javase/6/docs/api/javax/swing/InputVerifier.html)，如[*验证输入*](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification)中所述。[这里](https://stackoverflow.com/a/2241997/230513)有一个相关的例子。*

# java - Guice 的 Names.bindProperties(Binder, Properties) 的 CDI (Weld) 等效项是什么？

> ID：12314835
> 
> 赞同：1
> 
> 时间：2012-09-07T08:54:38.020
> 
> 标签：java, guice, cdi, jboss-weld, weld

Google Guice 中有一个方便的方法，它允许在一次调用中绑定属性：

```
Names.bindProperties(binder(), myProperties); 
```

然后可以通过注释注入：

```
@Inject
@Named("my.properties.server.url")
private String serverUrl; 
```

CDI 中是否有等效的方法（由 Weld 实现）或更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:51:51.777

不在核心 CDI 中，但 DeltaSpike 的 ConfigProperty (https://cwiki.apache.org/DeltaSpike/temporary-documentation.html#TemporaryDocumentation-@ConfigProperty) 可能会满足您的需求。

# javascript - 从山狮网页获取javascript数据

> ID：12314838
> 
> 赞同：0
> 
> 时间：2012-09-07T08:54:44.260
> 
> 标签：javascript, objective-c, webview, osx-mountain-lion

我从 javascript 生成的网页动态值中提取，它在 OS X Lion 上运行良好，但在 Mountain Lion 10.8.1 上失败（我得到空字符串）。这是我的控制器中的代码：

```
-(void) addValue:(id) sender  {
  NSString *value = [webView stringByEvaluatingJavaScriptFromString: @"document.getElementById('xxx').textContent"];
}

- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {
[self addValue:self];
}

 - (void) getjavascriptValue {
[[webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"htmlPagePath"] ]]];
} 
```

webView 被声明为 IBOutlet WebView *webView; 我使用 Interface Builder 将 webView 和 frameLoadDelegate 连接到我的控制器。您的帮助将不胜感激

# python - 为什么即使我没有定义它，python 也能识别我的对象？

> ID：12314839
> 
> 赞同：0
> 
> 时间：2012-09-07T08:54:45.503
> 
> 标签：python

再会！

我可以在我正在阅读并尝试学习 Python 的书中的样本上寻求帮助吗？

对于下面显示的代码。我从来没有定义过“each_score”，那么为什么这个“each_score”被 Python 识别并且运行良好呢？

```
scores={}
result_f=open("py score.txt")
for line in result_f:
    (name,score)=line.split()
    scores[score]=name
result_f.close()

print("The top scores were:")
for each_score in scores.keys():
    print('surfer '+scores[each_score]+' scored '+each_score) 
```

顺便说一句，文本文件内容很简单，如下所示：

```
Johnny 8.65
Juan 9.12
Joseph 8.45
Stacey 7.81
Aideen 8.05
Zack 7.21
Aaron 8.31 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:55:58.293

不，你已经在你的[`for`循环](http://wiki.python.org/moin/ForLoop)中定义了它。

在您的示例中，您的变量应该从您的键中获取第一个值，在第二次迭代中获取第二个值，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T08:55:58.980

您正在循环中定义它。每次迭代`each_score`都会得到 的当前值`score.keys()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T09:42:21.810

注意 - 不是答案，只是一个不会在评论字段中格式化的大评论......只是一些学习技巧（我不得不快速写下，因为我的电池即将耗尽......）

您应该考虑在`with`需要自动关闭资源的地方使用（请查看精美手册）...理解可能很有用（请参阅`dict`下面的内容）...变量的“正确”命名也很好 - 在这种情况`surfer_scores`......解包元组，例如`for surfer, score`也增加了可读性，并且使用字符串格式而不是concat'ing也很有用。

所以在你完成了必要的学习之后，你上面的代码可能会变成这样：

```
with open('py score.txt') as fin:
    surfer_scores = dict(line.split() for line in fin)

for surfer, score in surfer_scores.iteritems():
    print('Surfer {} scored {} points'.format(surfer, score)) 
```

# javascript - 展开折叠 Div 列表

> ID：12314841
> 
> 赞同：0
> 
> 时间：2012-09-07T08:54:45.787
> 
> 标签：javascript, html

我正在尝试展开/折叠列表项。文本将是单词，后跟定义类型，定义在单击单词时出现/消失的位置。到目前为止，这是我的代码：

```
<html>
<script type="text/javascript">

function toggleVisibility(listItem) {
var listItemDiv = document.getElementById(listItem);

if(listItemDiv.style.visibility == 'hidden') {
        listItemDiv.style.visibility = 'visible';
    } else {
        listItemDiv.style.visibility = 'hidden';
    }

}

</script>

<div onclick="toggleVisibility('p1')">p1</div><div id=p1>p1's text</div></br>
p2<div id=p2>p2's text</div></br>
p3<div id=p3>p3's text</div></br>
p4<div id=p4>p4's text</div></br>
p5<div id=p5>p5's text</div></br>

</html> 
```

然而，这段代码隐藏了我的文本而不是折叠/展开。我希望最好通过javascript来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:58:03.837

解决方案：

```
function toggleVisibility(listItem) {
var listItemDiv = document.getElementById(listItem);

if(listItemDiv.style.display == 'none') {
        listItemDiv.style.display = 'block';
    } else {
        listItemDiv.style.display = 'none';
    }   
} 
```

或者

```
<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">

$(window).load(function(){
    $('dt').click(function(){
                var dl = $(this).parent();
                $('dd',dl).slideToggle();
    });
});          
</script>

<dl>
    <dt>
        item1
    </dt>
    <dd>
        item1.description
    <dd>
</dl>

</html> 
```

# java - DataOutputStream.writeBytes(myString) 崩溃无异常

> ID：12314842
> 
> 赞同：-1
> 
> 时间：2012-09-07T08:54:50.057
> 
> 标签：java, spring, sftp, jsch

我的 Java 方法是通过 SFTP 连接到远程服务器并将字符串写入文本文件：

```
String messageText = "my very long Text";
ChannelSftp channel = (com.jcraft.jsch.ChannelSftp) session.openChannel("sftp");
channel.connect();
DataOutputStream out = new DataOutputStream(channel.put(filename)); 
out.writeBytes(messageText); 
```

在将 messageText 写入文件时，该方法大部分时间在准确写入 4355Bytes 后崩溃。即文本文件被写入直到达到一定数量的字符/字节然后停止，但是这不会在每次执行该方法时发生。没有抛出异常，但包含此方法的 spring 工作流此时正在崩溃。

带有该方法的 Java 类被打包在一个 jar 中，并在 Windows Server 上的 OSGI 内部运行。远程服务器是基于 Unix 的。

我很感激任何建议。

更新：按照 mhan 的建议，我使用了一个缓冲区，它似乎已经解决了这个问题：

```
BufferedOutputStream out = new BufferedOutputStream(channel.put(filename + "_"));   
out.write(messageText.getBytes()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:16:58.353

正如评论所建议的，将代码放在 try-catch 块中并捕获异常。我可以提供的进一步建议；

1）您想引入缓冲区，看看是否可以提高性能。

2）在写入之前，您能否检查远程文件是否可用？

# android - BroadcastReceiver 中的 Toast 保持可见时间过长

> ID：12314846
> 
> 赞同：0
> 
> 时间：2012-09-07T08:55:23.320
> 
> 标签：android

**情况：**

我有一个`Service`（也尝试过使用一个`Activity`）在每次按钮单击时发送 SMS 消息。我 99.9% 确定该方法`sendSMS(...)`只被调用一次。`Toasts`在`BroadcastReceiver`屏幕上的任何地方从几秒钟到几乎是挑衅地创建，直到应用程序被强制停止。`"SMS Sent"`卡在屏幕上一段时间，短信发送成功。你可以看到`Toast`一点点淡入和淡出。

难道我做错了什么？

**奖金：**

为什么`BroadcastReceiver`with `"SMS delivered"`status 没有得到任何响应？

**这是我很久以前从教程中获取的非常通用的代码：**

```
 @Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
    sendSMS("5555555","hello world");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(intent, flags, startId);
    sendSMS("5555555","hello world");
    return Service.START_STICKY;
}

  // ---sends an SMS message to another device---
private void sendSMS(final String phoneNumber, final String message) {
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this.getApplicationContext(), 0, new Intent(
            SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this.getApplicationContext(), 0,
            new Intent(DELIVERED), 0);

    // ---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(context, "SMS sent",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(context, "SMS error: Generic failure",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(context, "SMS error: No service",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(context, "SMS error: Null PDU",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(context, "SMS error: Radio off",
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    // ---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(context, "SMS delivered",
                        Toast.LENGTH_SHORT).show();
                break;
            case Activity.RESULT_CANCELED:
                Toast.makeText(context, "SMS not delivered",
                        Toast.LENGTH_SHORT).show();
                break;
            }
        }
    }, new IntentFilter(DELIVERED));

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);
} 
```

**/编辑：修复了问题，您可以在此问题的评论中阅读**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:31:12.323

打`sendSMS()`了两次电话，罪魁祸首是`onStart()`我的服务不推荐使用的方法

```
@Override
public void onStart(Intent intent, int startId) {
    //super.onStart(intent, startId);
    sendSMS("5555555","hello world");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    //super.onStartCommand(intent, flags, startId);
    sendSMS("5555555","hello world");
    return Service.START_STICKY;
} 
```

[这个答案帮助我保留了两种方法](https://stackoverflow.com/a/7493267/1443717)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:01:11.563

您可以使用[这种](https://stackoverflow.com/questions/3775074/set-toast-appear-length/9715422#9715422)方法以低于`Toast.LENGTH_SHORT`.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-07T09:01:35.803

用这个来显示

Toast.makeText(context,message, 1000).show();

其中 1000 是以毫秒为单位的持续时间

# asp.net-mvc - Html.DisplayFor 不在 ASP.NET MVC 3 中向控制器发布值

> ID：12314849
> 
> 赞同：39
> 
> 时间：2012-09-07T08:55:26.470
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在使用带有 Razor 的 ASP.NET MVC 3，下面是我查看代码的示例。

用户应该能够编辑他们的所有详细信息，除了“EmailAddress”字段。对于那个领域，我只使用过`Html.DisplayFor(m => m.EmailAddress)`.

但是当这个表单被发布时，除了`EmailAddress`.

发布时如何在模型中恢复电子邮件？我应该使用其他帮助`DisplayFor`吗？

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true, "Account update was unsuccessful. Please correct any errors and try again.")
    <div>
        <fieldset>
            <legend>Update Account Information</legend>
            <div class="editor-label">
                @Html.LabelFor(m => m.EmailAddress)
            </div>
            <div class="editor-field">
                @Html.DisplayFor(m => m.EmailAddress)
                @*@Html.ValidationMessageFor(m => m.EmailAddress)*@
            </div>           
            <div class="editor-label">
                @Html.LabelFor(m => m.FirstName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.FirstName)
                @Html.ValidationMessageFor(m => m.FirstName)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.LastName)
            </div>
            <div class="editor-field">
            @Html.TextBoxFor(m => m.LastName)
                @Html.ValidationMessageFor(m => m.LastName)
            </div>
            <p>
                <input type="submit" value="Update" />                
            </p>
        </fieldset>
    </div>
} 
```

请就此给我建议。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-07T08:57:27.580

你需要添加一个

```
@Html.HiddenFor(m => m.EmailAddress) 
```

`DisplayFor`不会在 POST 中发送任何内容，也不会创建输入...

顺便说一句，一个

`@Html.HiddenFor(m => m.Id) // or anything which is the model key`

会有用的

# php - Facebook 在 ubandu 中需要 curl php 扩展

> ID：12314851
> 
> 赞同：0
> 
> 时间：2012-09-07T08:55:28.517
> 
> 标签：php

我已经在我的 ubandu 中安装了 php5。我正在使用图形 api 与 facebook 进行通信。但是我收到了“Facebook 需要 CURL PHP 扩展”之类的错误。我知道我必须在其中添加“extension = php_curl.dll”行php.ini 文件。但现有的 ini 文件没有任何扩展名。并且没有名为“php_curl.dll”的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:01:18.920

我假设，你有 ubuntu linux。试试这个：

```
sudo apt-get install php5-curl 
```

另请参阅[Ubuntu 论坛](http://ubuntuforums.org/showthread.php?t=391313) 然后重新启动您的 apache。
通常，在 Linux 中，扩展名不称为 .dll，而是“.so”。Afaik，.dll 是特定于 Windows 的。

# nservicebus - NServiceBus，如何映射路径

> ID：12314854
> 
> 赞同：0
> 
> 时间：2012-09-07T08:55:37.000
> 
> 标签：nservicebus, mappath

试图在 NServiceBus 上获取我的“XML 文档文件”的路径。通常我会使用`HttpContext.Current.Server.MapPath`，但是 NServiceBus 不使用 HttpContext。所以问题是，如何获得“XMl 文档文件”和 NServiceBus 上其他文件的路径？

谢谢！

-一个-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:07:18.847

根据评论，使用[AppDomain](http://msdn.microsoft.com/en-us/library/system.appdomain.basedirectory.aspx)

# javascript - 微笑时间线小部件 Json 提要

> ID：12314855
> 
> 赞同：0
> 
> 时间：2012-09-07T08:55:41.143
> 
> 标签：javascript, jquery, json, timeline

我正在构建的网站上有一个[微笑时间线小部件。](http://www.simile-widgets.org/timeline/)我已经遵循了几个关于如何实现和自定义它的教程，到目前为止一切都很好。但是我找不到使用 Json 服务而不是使用存储在 js 文件中的全局变量中的数据的方法。我不擅长 javascript，所以我找不到将整个 Json 输出（相应地正确格式化）存储在全局变量中的方法。

以下是全局变量中的数据的外观：

```
var timeline_data = { 
'events' : [
        {'start': '2000',
        'title': 'Barfusserkirche',
        'description': 'by Lyonel Feininger, American/German Painter, 1871-1956',
        'image': 'http://images.allposters.com/images/AWI/NR096_b.jpg',
        'link': 'http://www.allposters.com/-sp/Barfusserkirche-1924-Posters_i1116895_.htm'
        },

        {'start': '2001',
        'end': '2004',
        'title': 'Three Figures',
        'description': 'by Kasimir Malevich, Ukrainian Painter, 1878-1935',
        'image': 'http://images.allposters.com/images/BRGPOD/75857_b.jpg',
        'link': 'http://www.allposters.com/-sp/Three-Figures-1913-28-Posters_i1349989_.htm'
        },

        {'start': '2002',            
        'end' : '2003',
        'title': 'Landschaft bei Montreuil',
        'description': 'by Albert Gleizes, French Painter, 1881-1953',
        'image': 'http://images.allposters.com/images/mer/1336_b.jpg',
        'link': 'http://www.allposters.com/-sp/Landschaft-bei-Montreuil-Posters_i339007_.htm',
        'isDuration' : true,
        'icon' : "red-ico.gif",        
        'color' : '#ffcc00',
        'textColor' : 'green'}
]} 
```

这就是时间线的调用方式：

```
var url = '.'; // The base url for image, icon and background image references in the data
eventSource1.loadJSON(timeline_data, url); // The data was stored into the timeline_data variable. 
```

这就是我尝试过的，但我坚持如何在变量中存储整个输出，而不仅仅是一个条目：

```
var timeline_data;//at global scope
$.ajax({ 
        type: 'GET', 
        url: '/timeline/json_output.json', 
        dataType: 'json', 
        timeout: 10000, 
        crossDomain: true, 
        success: function(result) {
            timeline_data = result;
        }
}); 
```

现在我不知道如何使用timeline_data。认为它是一个数组对象，不知道如何进一步进行。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:12:13.473

试试这个：

```
var timeline_data;//at global scope
$.ajax({ 
    type: 'GET', 
    url: '/timeline/json_output.json', 
    dataType: 'json', 
    timeout: 10000, 
    crossDomain: true, 
    success: function(result) {
        for(var i = 0; i < result.events.length; ++i){
            $.each(result.events[i], function(key, value) { 
                console.log(key + ': ' + value); 
            });
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:27:09.813

我实际上在[这里](http://pratyush-chandra.blogspot.co.uk/2012/04/store-ajax-json-response-into.html)找到了这个，并且像魅力一样工作！

```
function getJson(url) {
 return JSON.parse($.ajax({
     type: 'GET',
     url: url,
     dataType: 'json',
     global: false,
     async:false,
     success: function(data) {
         return data;
     }
 }).responseText);
}

var myJsonObj = getJson('myjsonurl'); 
```

有没有更有效的方法？

# c++ - 使用二进制搜索查找丢失的数字

> ID：12314856
> 
> 赞同：6
> 
> 时间：2012-09-07T08:55:53.307
> 
> 标签：c++, algorithm, binary-search

我正在阅读有关编程珍珠的书。

> 问题：给定一个包含最多 40 亿个随机顺序的 32 位整数的顺序文件，找到一个不在文件中的 32 位整数（并且必须至少缺少一个）。如果我们有几百字节的主存和几个顺序文件，则必须解决这个问题。
> 
> 解决方案：要将其设置为二分搜索，我们必须定义一个范围、范围内元素的表示形式以及确定范围的哪一半包含缺失整数的探测方法。我们如何做到这一点？
> 
> 我们将使用已知包含至少一个缺失元素的整数序列作为范围，并且我们将通过包含其中所有整数的文件来表示范围。洞察力是，我们可以通过计算其中点上方和下方的元素来探测一个范围：上限或下限在整个范围中最多有一半元素。因为整个范围有一个缺失的元素，较小的一半也必须有一个缺失的元素。这些是针对上述问题的二分搜索算法的大部分成分。

以上文字是乔恩·本特利（Jon Bently）从编程珍珠书中获得的版权。

以下链接提供了一些信息

[《Programming Pearls》二分查找帮助](https://stackoverflow.com/questions/5011589/programming-pearls-binary-search-help)

我们如何通过使用二分搜索而不遵循上面链接中给出的示例进行搜索？请帮助我理解逻辑，只用 5 个整数而不是百万整数来理解逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:08:44.433

为什么不重新阅读[“Programming Pearls”二分搜索帮助](https://stackoverflow.com/questions/5011589/programming-pearls-binary-search-help)一文中的答案。它根据您的要求解释了 5 个整数的过程。
这个想法是您解析每个列表并根据第一位中的值将其分成 2 个（这是二进制部分的来源）单独的列表。

即显示实际数字的二进制表示原始列表“”：001、010、110、000、100、011、101 =>（分解为）
（我们删除第一位并将其附加到新列表的“名称”）
为了形成下面的每个列表，我们从上面的
列表“ **0** ”中获取以 [0 或 1] 开头的值：01、10、00、11（由列表“”的子集 001、010、000、011 形成删除第一位并将其附加到新列表的“名称”）
列表“ **1** ”：10、00、01（由列表“”的子集110、100、101通过删除第一位并将其附加到新列表的“名称”）

现在依次获取结果列表之一并重复该过程：
列表“ **0** ”成为您的原始列表，您将其分解为
列表“0***0**”和
列表“0***1**”（粗体数字再次是列表中被破坏的数字的 1 [剩余] 位）

继续，直到你得到空列表。

 **逐步**编辑**
过程： 列表“”：001、010、110、001、010、100、011、101 =>
列表“0”：01、10、00、11（来自列表的子集001、010、000、011 "") =>
List "00": 1, 0 (来自 List "0" 的子集 01, 00) =>
List "000": 0 [最终结果] (来自 List "00" 的子集 0)
List "001": 1 [最终结果] (来自列表 "00" 的子集 1)
列表 "01": 0, 1 (来自列表 "0" 的子集 10, 11) =>
列表 "010": 0 [最终结果]（来自列表“01”的子集0）
列表“011”：1 [最终结果]（来自列表“01”的子集1）
列表“1”：10、00、01（来自列表“”的子集 110、100、101）=>
列表“10”：0、1（来自列表“1”的子集 00、01）=>
列表“100”：0 [最终结果]（来自列表“10”的子集 0）
列表“101”：1 [最终结果]（来自列表“10”的子集 1）
列表“11”：0（来自列表“1”的子集 10）=>
列表“110”：0 [最终结果]（来自列表“11”的子集 0）
列表“111”：**不存在**[最终结果]（来自列表的子集**EMPTY** ” 11")**

 **这种方法的好处是，它可以让您在集合中找到**任意数量**的缺失数字——即，如果缺失多个数字。

PS AFAIR 对于**完整范围内的****1 个缺失数字**，还有更优雅的 XOR 所有数字的解决方案。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:11:27.223

这是一个简单的 C 解决方案，应该说明该技术。为了抽象出任何繁琐的文件 I/O 细节，我假设存在以下三个函数：

*   `unsigned long next_number (void)`从文件中读取一个数字并返回它。再次调用时，将返回文件中的下一个数字，依此类推。遇到文件结尾时的行为未定义。

*   `int numbers_left (void)`如果有更多数字可供使用 读取`next_number()`，则返回 true 值，如果已到达文件末尾，则返回 false。

*   `void return_to_start (void)`将读取位置倒回到文件的开头，以便下一次调用`next_number()`返回文件中的第一个数字。

我还假设它`unsigned long`至少是 32 位宽，这是符合 ANSI C 实现的要求；现代 C 程序员可能更喜欢使用`uint32_t`from [`stdint.h`](http://en.wikibooks.org/wiki/C_Programming/C_Reference/stdint.h)。

鉴于这些假设，以下是解决方案：

```
unsigned long count_numbers_in_range (unsigned long min, unsigned long max) {
    unsigned long count = 0;

    return_to_start();

    while ( numbers_left() ) {
        unsigned long num = next_number();
        if ( num >= min && num <= max ) {
            count++;
        }
    }
    return count;
}

unsigned long find_missing_number (void) {
    unsigned long min = 0, max = 0xFFFFFFFF;

    while ( min < max ) {
        unsigned long midpoint = min + (max - min) / 2;
        unsigned long count = count_numbers_in_range( min, midpoint );

        if ( count < midpoint - min + 1 ) {
            max = midpoint;  // at least one missing number below midpoint
        } else {
            min = midpoint;  // no missing numbers below midpoint, must be above
        }
    }
    return min;
} 
```

需要注意的一个细节是，这是计算和`min + (max - min) / 2`平均值的安全方法；由于像看似简单的可能那样[溢出](http://en.wikipedia.org/wiki/Integer_overflow)中间值，它不会产生虚假结果。`min``max``(min + max) / 2`

此外，即使使用递归来解决这个问题很诱人，我还是选择了迭代解决方案，原因有两个：首先，因为它（可以说）更清楚地显示了实际正在做什么，其次，因为任务是最小化内存使用，大概也包括堆栈。

最后，很容易优化此代码，例如，一旦`count`等于 0 就返回，通过一次计算范围的*两*半中的数字并选择具有更多缺失数字的数字，或者甚至将二分搜索扩展到*n*元搜索一些*n* > 2 以减少通过次数。但是，为了使示例代码尽可能简单，我没有进行此类优化。如果您愿意，您可能想尝试修改代码，使其最多需要 8 次遍历文件，而不是当前的 32 次。（提示：使用 16 元素数组。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T09:08:10.007

这个想法是为了解决更简单的问题：

是 [minVal, X] 或 (X, maxVal) 范围内的缺失值。如果您知道这一点，您可以移动 X 并再次检查。

例如，您有 3、4、1、5（缺少 2）。你知道 minVal = 1，maxVal = 5。

1.  Range = [1, 5], X = 3，在[1, 3]范围内应该有3个整数，在[4, 5]范围内应该有2个整数。[1, 3] 范围内只有 2 个，因此您正在查看 [1, 3] 范围内
2.  Range = [1, 3], X = 2。范围 [1, 2] 中只有 1 个值，因此您正在查看范围 [1, 2]
3.  Range = [1, 2], X = 1。[2, 2] 范围内没有值，所以这是你的答案。

编辑：一些伪 C++ 代码：

```
minVal = 1, maxVal = 5; //choose correct values
while(minVal < maxVal){
    int X = (minVal + maxVal) / 2
    int leftNumber = how much in range [minVal, X]
    int rightNumber = how much in range [X + 1, maxVal]
    if(leftNumber < (X - minVal + 1))maxVal = X
    else minVal = X + 1
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-31T23:26:18.330

当您在第 i 位看到 2^31 个零或一时，那么您的答案在第 i 位有一个或零。（例如：第 5 个二进制位置的 2^31 个表示答案在第 5 个二进制位置为零。

c代码初稿：

```
uint32_t binaryHistogram[32], *list4BILLION, answer, placesChecked[32];
uint64_t limit = 4294967296;
uint32_t halfLimit = 4294967296/2;
int i, j, done

//General method to point to list since this detail is not important to the question.
list4BILLION = 0000000000h;

//Initialize array to zero. This array represents the number of 1s seen as you parse through the list
for(i=0;i<limit;i++)
{   
    binaryHistogram[i] = 0;
}

//Only sum up for first half of the 4 billion numbers
for(i=0;i<halfLimit;i++)
{
    for(j=0;j<32;j++)
    {
        binaryHistogram[j] += ((*list4BILLION) >> j);
    }
}

//Check each ith digit to see if all halfLimit values have been parsed
for(i=halfLimit;i<limit;i++)
{
    for(j=0;j<32;j++)
    {
        done = 1;   //Dont need to continue to the end if placesChecked are all 
        if(placesChecked[j] != 0) //Dont need to pass through the whole list
        {
            done = 0; //
            binaryHistogram[j] += ((*list4BILLION) >> j);
            if((binaryHistogram[j] > halfLimit)||(i - binaryHistogram[j] == halfLimit))
            {
                answer += (1 << j);
                placesChecked[j] = 1;
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:35:24.670

实际上，如果我们有从 a 到 b 的整数范围。示例：[a..b]。在这个范围内，我们有 ba 整数。这意味着，只缺少一个。如果只缺少一个，我们可以只使用一个周期来计算结果。首先，我们可以计算范围 [a..b] 中所有整数的总和，它等于：

```
sum = (a + b) * (b - a + 1) / 2 
```

然后我们计算序列中所有整数的总和：

```
long sum1 = 0;
for (int i = 0; i < b - a; i++)
sum1 += arr[i]; 
```

然后我们可以找到缺失元素作为这两个和的差：

长结果 = sum1 - sum;****

# tomcat7 - Apache Cayenne ROP 服务器“没有与请求关联的会话。” 在 Tomcat 7 上

> ID：12314857
> 
> 赞同：1
> 
> 时间：2012-09-07T08:55:57.160
> 
> 标签：tomcat7, hessian, apache-cayenne

我开发了一个带有 java 富客户端和远程对象持久性服务器的 cayenne 项目。如果我有钱的 cient 连接到部署在本地主机上同一台机器上的 Cayenne-ROP-Server（在 Jetty 上来自 maven 目标，如在 cayenne rop 教程中解释的那样），一切都很好：

```
ClientConnection clientConnection = new HessianConnection("http://localhost:8080/rop.server   /cayenne-service",
            "cayenne-user", "secret", SHARED_CAYENNE_SESSION_NAME);
DataChannel channel = new ClientChannel(clientConnection);
ObjectContext context = new CayenneContext(channel);
List<Object> someEntities = context.performQuery(allMovies); 
```

如果我将第一行中要连接的 url 更改为非本地主机（ubuntu 上的 Tomcat7），那么一切正常，直到第 4 行：

```
List<Object> someEntities = context.performQuery(allMovies); 
```

然后我收到错误“没有与请求关联的会话”

这是客户端的完整输出：

```
Running de.pss.hdlist.client.dataservice.MovieDataServiceCayenneImplTest
Sep 07, 2012 10:21:37 AM org.apache.cayenne.remote.hessian.HessianConnection connect
INFO: Connecting to [cayenne-user:*******@http://comunity-server.hopto.org:8080    /rop.server-3.0.2/cayenne-service] - shared session 'global-cayenne-session'
Sep 07, 2012 10:21:40 AM org.apache.cayenne.remote.hessian.HessianConnection connect
INFO: === Connected, session:  org.apache.cayenne.remote.RemoteSession@12241e[sessionId=C47DD36ACE2A043401C8D0C44D5BD8C3,n    ame=global-cayenne-session] - took 3182 ms.
Sep 07, 2012 10:21:53 AM org.apache.cayenne.remote.BaseConnection sendMessage
INFO: --- Message 0: Bootstrap
Sep 07, 2012 10:21:53 AM org.apache.cayenne.remote.BaseConnection sendMessage
INFO: === Message 0: Bootstrap done - took 406 ms.
Sep 07, 2012 10:21:53 AM org.apache.cayenne.remote.BaseConnection sendMessage
INFO: --- Message 1: Query
Sep 07, 2012 10:21:53 AM org.apache.cayenne.remote.BaseConnection sendMessage
INFO: *** Message error for 1: Query - took 187 ms. 
```

这是 Apache Tomcat 日志的服务器端输出：

```
WARNING: org.apache.cayenne.remote.service.MissingSessionException: [v.3.0.2 Jun 19 2011 09:29:50] No session associated with request.
org.apache.cayenne.remote.service.MissingSessionException: [v.3.0.2 Jun 19 2011 09:29:50] No session associated with request.
    at    org.apache.cayenne.remote.service.BaseRemoteService.processMessage(BaseRemoteService.java:148)
    at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:180)
    at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:109)
    at com.caucho.hessian.server.HessianServlet.service(HessianServlet.java:396)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

我使用 Apache Cayenne 3.0.2、Apache-Tomcat 7.0.29 和 Java 7 sdk

每个帮助都提前 THX

PS。也许本地 Jetty 服务器以另一种方式处理事情，就像远程 unix 机器上的 Tomcat 服务器一样。

编辑：在 Andrus 在下面的答案中给出提示之后，我添加了一个看起来像这样的 SessionListern：

```
public class HttpSessionListenerLogImpl implements HttpSessionListener {

private final static Logger LOGGER = Logger.getLogger(HttpSessionListenerLogImpl.class.getName());

@Override
public void sessionCreated(HttpSessionEvent hse) {
    LOGGER.log(Level.SEVERE,
            "!__Session created with ID: " + hse.getSession().getId());
    LOGGER.log(Level.SEVERE, "!__Session created by: " + hse.getSource());
    LOGGER.log(Level.SEVERE, "!__Session Attributes: " + hse.getSession().getAttributeNames());
    LOGGER.log(Level.SEVERE, "!__Session max inactivity: " + hse.getSession().getMaxInactiveInterval());
    LOGGER.log(Level.SEVERE, "!__Session context: " + hse.getSession().getServletContext().getServletContextName());
}

@Override
public void sessionDestroyed(HttpSessionEvent hse) {
    LOGGER.log(Level.SEVERE, "!__Session killed with ID: " + hse.getSession().getId());
    LOGGER.log(Level.SEVERE, "!__Session killed by: " + hse.getSource());
    LOGGER.log(Level.SEVERE, "!__Session Attributes: " + hse.getSession().getAttributeNames());
    LOGGER.log(Level.SEVERE, "!__Session max inactivity: " + hse.getSession().getMaxInactiveInterval());
    LOGGER.log(Level.SEVERE, "!__Session context: " + hse.getSession().getServletContext().getServletContextName());
} 
```

因此，在执行此问题之上的 4 行代码状态时，此侦听器为我提供了以下输出：

```
Sep 11, 2012 11:06:27 AM de.pss.hdlist.HttpSessionListenerLogImpl sessionCreated
SEVERE: !__Session created with ID: B07648A2A5F0005AF6DF0741D7EF2D21
Sep 11, 2012 11:06:27 AM de.pss.hdlist.HttpSessionListenerLogImpl sessionCreated
SEVERE: !__Session created by: org.apache.catalina.session.StandardSessionFacade@515f9553
Sep 11, 2012 11:06:27 AM de.pss.hdlist.HttpSessionListenerLogImpl sessionCreated
SEVERE: !__Session Attributes: java.util.Collections$2@5a44a5e1
Sep 11, 2012 11:06:27 AM de.pss.hdlist.HttpSessionListenerLogImpl sessionCreated
SEVERE: !__Session max inactivity: 216000
Sep 11, 2012 11:06:27 AM de.pss.hdlist.HttpSessionListenerLogImpl sessionCreated
SEVERE: !__Session context: Cayenne Tutorial
Sep 11, 2012 11:06:27 AM com.caucho.hessian.server.HessianSkeleton invoke
WARNING: org.apache.cayenne.remote.service.MissingSessionException: [v.3.0.2 Jun 19 2011 09:29:50] No session associated with request.
org.apache.cayenne.remote.service.MissingSessionException: [v.3.0.2 Jun 19 2011 09:29:50] No session associated with request.
    at  org.apache.cayenne.remote.service.BaseRemoteService.processMessage(BaseRemoteService.java:148)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at  
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:180)
    at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:109)
    at com.caucho.hessian.server.HessianServlet.service(HessianServlet.java:396)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

在这里你可以看到有一个会话被创建并且没有会话被杀死。那么为什么我的代码行中的 ObjectContext

```
List<Object> someEntities = context.performQuery(allMovies); 
```

确实忽略了会话。在进行查询之前我是否必须明确设置它？客户端访问远程部署的 cayenne 服务器的标准初始化代码是什么。它与 cayenne rop 教程中给出的不同吗？

提前谢谢。

编辑：我升级到 cayenne 3.1B1 希望摆脱这个错误，但同样的情况：“没有会话......”尝试发送查询时。

我还在 localhost 上设置了一个 tomcat 并将其配置为与远程相同。尝试发送查询时出现相同的问题“无会话...”。

因此，localhost 上的 Jetty 是唯一一个从上面获取 4 行初始化代码并为每个后续查询保存会话的码头。所以这是我的问题。这个星球上是否有人曾尝试在 tomcat 上部署 cayenne rop 服务器并成功了？

对于每一个小提示，请提前 THX。

编辑：所以我在本地 tomcat7 上做了一点服务器端调试。

1.Client从上面执行第2行代码：

```
DataChannel channel = new ClientChannel(clientConnection); 
```

在服务器端，我的会话侦听器被触发并告诉我一个会话已创建，ID 为：B6565298F222294F601B76333DBE4911

2.Client从上面执行第3行：

```
ObjectContext context = new CayenneContext(channel); 
```

在服务器端，类 org.apache.cayenne.remote.service.HttpRemoteSession 的方法被调用：

```
/**
 * Returns a ServerSession object that represents Cayenne-related state associated
 * with the current session. If ServerSession hasn't been previously saved, returns
 * null.
 */
@Override
protected ServerSession getServerSession() {
    HttpSession httpSession = getSession(true);
    return (ServerSession) httpSession.getAttribute(SESSION_ATTRIBUTE);
} 
```

此方法的第一行创建了一个新会话。其 ID 为：ECC4A81D6240A1D04DA0A646200C4CE6。这个新会话只包含一个属性：键是“org.apache.cayenne.remote.service.HttpRemoteService.ServerSession”，值是（谁猜到了？）之前在步骤 1 中创建的会话让我感到奇怪的是，我的尽管创建了新会话，但不会触发 serveltListener。

3.Client从上面执行第4行

```
List<Object> someEntities = context.performQuery(allMovies); 
```

现在在服务器端再次调用 getServerSession() 方法。这次还创建了一个新会话（为什么？）。并且此会话不包含任何属性。所以这行“return (ServerSession) httpSession.getAttribute(SESSION_ATTRIBUTE);” 在方法 getServerSession() 内部返回 null ，这恰好触发了异常“No Session associated with request”。

那么，为什么 cayenne 服务器端会创建 e ne 会话而不使用之前创建的旧会话呢？我是否必须在查询中明确发送会话？

编辑：我在运行上面的四行代码时从 netbeans http-monitor 截屏： ![http 监控 tomcat 卡宴](../Images/94d92d106b781a43fa0da318b7fe7874.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:06:06.217

这是 Cayenne ROP 和较新容器之间的问题：

[https://issues.apache.org/jira/browse/CAY-1739](https://issues.apache.org/jira/browse/CAY-1739)

这是一个 Tomcat 解决方案 - 创建包含以下内容的 context.xml 文件，并将其放在 webapp 的 META-INF/ 中：

```
<Context>
    <Valve className="org.apache.catalina.authenticator.BasicAuthenticator"
        changeSessionIdOnAuthentication="false" />
</Context> 
```

# google-maps - 谷歌地图：标记点击自动中心地图

> ID：12314861
> 
> 赞同：25
> 
> 时间：2012-09-07T08:56:02.367
> 
> 标签：google-maps, google-maps-api-3

在我正在制作的地图上，我需要一些帮助。地图不是特别复杂，因为我是初学者，我有一堆标记（完成后会有更多标记）和信息窗口，可以在单击标记或在 HTML 上选择下拉菜单的相应项目时打开页面的一侧。

当信息窗口打开时（单击或在 HTML 菜单中选择），我想做但自己无法找到的方法是在地图上自动居中标记。我想有某种功能可以分配给单击或信息窗口打开事件，但无法确定哪个以及如何实现它。

我的代码：

```
function initialize() {

      var CarteStyles = [
        {
          featureType: "all",
          stylers: [
            { saturation: -50 }
          ]
        },
        {
        elementType: "labels",
        stylers: [
          { visibility: "off" }
        ]
      },
        {
            featureType: "road",
            stylers: [
              { visibility: "simplified" },
              { saturation: -90 }
            ]
        },
        {
        featureType: "road.local",
        "stylers": [
          { "color": "#dbdbd4" }
        ]
      },
    {
          featureType: "road",
          elementType: "labels",
          stylers: [
            { visibility: "off"}
          ]
        },
        {
            featureType: "poi",
            stylers: [
              { visibility: "off" }
            ]
        },
        {
          featureType: "poi.park",
          stylers: [
            { visibility: "on" }
          ]
        },
        {
          featureType: "poi.park",
          elementType: "labels",
          stylers: [
            { visibility: "off"}
          ]
        }
      ];

      var CarteType = new google.maps.StyledMapType(CarteStyles,
        {name: "Carte"});

      var mapOptions = {
        zoom: 16,
        center: new google.maps.LatLng(48.872769, 2.30488),
        mapTypeControlOptions: {
          mapTypeIds: [google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,'Carte'],
          position: google.maps.ControlPosition.TOP_LEFT,
          style: google.maps.MapTypeControlStyle.DEFAULT
        }
      };
      var map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);

      map.mapTypes.set('Carte', CarteType);
      map.setMapTypeId('Carte');

    <!--START Hpr-->        
            var contentStringHpr = '<div id="content">'+
                '<h2 id="firstHeading" class="firstHeading">HPR</h2>'+
                '<div id="bodyContent">'+
                '<p>Descr</p>'+
                '<p><a href="#">Plus d\'informations</a></p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentStringHpr
            });
            var HprMarker = new google.maps.Marker({
                position: new google.maps.LatLng(48.856682, 2.3274526),
                map: map,
                icon: new google.maps.MarkerImage('icon_hpr.png'),
                title:"HPR",
                zIndex: 3});
    <!--STOP Hpr-->

    <!--START Cal-->        
            var contentStringCal = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h2 id="firstHeading" class="firstHeading">CAL</h2>'+
                '<div id="bodyContent">'+
                '<p>descr</p>'+
                '<p><a href="#">Plus d\'informations</a></p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentStringCal
            });

            var CalImage = new google.maps.MarkerImage('icon_cal.png'
            );

            var CalPos = new google.maps.LatLng(48.872769, 2.30488);

            var CalMarker = new google.maps.Marker({
                position: CalPos,
                map: map,
                icon: CalImage,
                title:"Cal",
                zIndex: 3});
    <!--STOP Cal-->

    <!--START Rsh-->        
            var contentStringRsh = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h2 id="firstHeading" class="firstHeading">RSH</h2>'+
                '<div id="bodyContent">'+
                '<p>descr</p>'+
                '<p><a href="#">Plus d\'informations</a></p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentStringRsh
            });

            var RshImage = new google.maps.MarkerImage('icon_rsh.png'
            );

            var RshPos = new google.maps.LatLng(48.865862, 2.329943);

            var RshMarker = new google.maps.Marker({
                position: RshPos,
                map: map,
                icon: RshImage,
                title:"RSH",
                zIndex: 3});
    <!--STOP Rsh-->

    <!--START Rh-->     
            var contentStringRh = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h2 id="firstHeading" class="firstHeading">RH</h2>'+
                '<div id="bodyContent">'+
                '<p>descr</p>'+
                '<p><a href="#">Plus d\'informations</a></p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentStringRh
            });

            var RhImage = new google.maps.MarkerImage('icon_rh.png'
            );

            var RhPos = new google.maps.LatLng(48.874140, 2.300144);

            var RhMarker = new google.maps.Marker({
                position: RhPos,
                map: map,
                icon: RhImage,
                title:"RH",
                zIndex: 3});
    <!--STOP Rh-->

    <!--START Rdr-->        
            var contentStringRdr = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h2 id="firstHeading" class="firstHeading">RDR</h2>'+
                '<div id="bodyContent">'+
                '<p>descr</p>'+
                '<p><a href="#">Plus d\'informations</a></p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentStringRdr
            });

            var RdrImage = new google.maps.MarkerImage('icon_rdr.png'
            );

            var RdrPos = new google.maps.LatLng(48.865717, 2.308944);

            var RdrMarker = new google.maps.Marker({
                position: RdrPos,
                map: map,
                icon: RdrImage,
                title:"RDR",
                zIndex: 3});
    <!--STOP Rh-->

    <!--START Boutique1-->      
            var contentStringBoutique1 = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h2 id="firstHeading" class="firstHeading">Boutique1</h2>'+
                '<div id="bodyContent">'+
                '<p>descr</p>'+
                '<p><a href="#">Plus d\'informations</a></p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentStringBoutique1
            });

            var Boutique1Image = new google.maps.MarkerImage('icon_bags_2.png'
            );

            var Boutique1Pos = new google.maps.LatLng(48.87, 2.31);

            var Boutique1Marker = new google.maps.Marker({
                position: Boutique1Pos,
                map: map,
                icon: Boutique1Image,
                title:"Boutique1",
                zIndex: 3});
    <!--STOP Boutique1-->

    <!--START Place1-->     
            var contentStringPlace1 = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h2 id="firstHeading" class="firstHeading">Place1</h2>'+
                '<div id="bodyContent">'+
                '<p>descr</p>'+
                '<p><a href="#">Plus d\'informations</a></p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentStringPlace1
            });

            var Place1Image = new google.maps.MarkerImage('icon_place_arc.png'
            );

            var Place1Pos = new google.maps.LatLng(48.873836,2.295037);

            var Place1Marker = new google.maps.Marker({
                position: Place1Pos,
                map: map,
                icon: Place1Image,
                title:"Place1",
                zIndex: 3});
    <!--STOP Place1-->

            google.maps.event.addListener(HprMarker, 'click', function() {
                infowindow.setContent(contentStringHpr);
                infowindow.open(map,HprMarker);
            });
            google.maps.event.addListener(CalMarker, 'click', function() {
                infowindow.setContent(contentStringCal);
                infowindow.open(map,CalMarker);
            });
            google.maps.event.addListener(RshMarker, 'click', function() {
                infowindow.setContent(contentStringRsh);
                infowindow.open(map,RshMarker);
            });
            google.maps.event.addListener(RhMarker, 'click', function() {
                infowindow.setContent(contentStringRh);
                infowindow.open(map,RhMarker);
            });
            google.maps.event.addListener(RdrMarker, 'click', function() {
                infowindow.setContent(contentStringRdr);
                infowindow.open(map,RdrMarker);
            });
            google.maps.event.addListener(Boutique1Marker, 'click', function() {
                infowindow.setContent(contentStringBoutique1);
                infowindow.open(map,Boutique1Marker);
            });
            google.maps.event.addListener(Place1Marker, 'click', function() {
                infowindow.setContent(contentStringPlace1);
                infowindow.open(map,Place1Marker);
            });

            var selectChoices = {
                Boutique1Choice: Boutique1Marker,
                Place1Choice: Place1Marker,
                CalChoice: CalMarker,
                RshChoice: RshMarker,
                RhChoice: RhMarker,
                RdrChoice: RdrMarker,
                HprChoice: HprMarker
            };

            google.maps.event.addDomListener(
                document.getElementById("selectLocation"), 'change',
                function() {
                google.maps.event.trigger(selectChoices[this.value], "click");
            });
            google.maps.event.addDomListener(
                document.getElementById("selectLocation2"), 'change',
                function() {
                google.maps.event.trigger(selectChoices[this.value], "click");
            });
            google.maps.event.addDomListener(
                document.getElementById("selectLocation3"), 'change',
                function() {
                google.maps.event.trigger(selectChoices[this.value], "click");
            });
            google.maps.event.addDomListener(
                document.getElementById("selectLocation4"), 'change',
                function() {
                google.maps.event.trigger(selectChoices[this.value], "click");
            });

        } 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-09-25T16:28:12.307

一种更好的方法（视觉上）是使用 panTo 而不是 setCenter，如下所示：

```
google.maps.event.addListener(RdrMarker, 'click', function() {
   map.panTo(RdrMarker.getPosition());
   infowindow.setContent(contentStringRdr);
   infowindow.open(map,RdrMarker);
}); 
```

这重新居中，但它动画而不是跳跃。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-09-07T09:02:10.840

您已经在标记上使用了单击处理程序，因此您只需添加一条线以使地图在标记上居中：

```
google.maps.event.addListener(RdrMarker, 'click', function() {
   map.setCenter(RdrMarker.getPosition());
   infowindow.setContent(contentStringRdr);
   infowindow.open(map,RdrMarker);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-10T12:25:37.937

可以使用以下代码在标记单击时自动将地图居中：

```
google.maps.event.addListener(marker, 'click', function() {
     map.setCenter(marker.getPosition());   
}); 
```

# ios - AVAssetWriter 减速

> ID：12314865
> 
> 赞同：1
> 
> 时间：2012-09-07T08:56:35.460
> 
> 标签：ios, avfoundation, avassetwriter

我正在使用 AVAssetWriter 来保存来自相机的实时供稿。使用此代码效果很好

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer  fromConnection:(AVCaptureConnection *)connection{ 

 CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
 CMTime lastSampleTime = CMSampleBufferGetPresentationTimeStamp(sampleBuffer);

 if(videoWriter.status != AVAssetWriterStatusWriting){
    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:lastSampleTime];
 }

 if(adaptor.assetWriterInput.readyForMoreMediaData) [adaptor appendPixelBuffer:imageBuffer withPresentationTime:lastSampleTime];
 else NSLog(@"adaptor not ready",);
} 
```

我通常接近 30 fps（但在 iPhone 4s 上不是 60 fps，正如其他人所指出的那样），并且在计时 [适配器 appendPixelBuffer] 时只需要几毫秒。

但是，我不需要全帧，但我需要高质量（低压缩，每帧关键帧），我将在以后多次读取它。因此，我想在写作之前裁剪图像。幸运的是，我只需要在中间有一个条带，这样我就可以对缓冲区进行简单的 memcpy。为此，我正在创建一个 CVPixelBufferRef，我将其复制到适配器并使用适配器写入：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer  fromConnection:(AVCaptureConnection *)connection{ 

 CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
 CMTime lastSampleTime = CMSampleBufferGetPresentationTimeStamp(sampleBuffer);

 if(videoWriter.status != AVAssetWriterStatusWriting){
    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:lastSampleTime];
 }

 CVPixelBufferLockBaseAddress(imageBuffer,0);
 size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
 size_t width = CVPixelBufferGetWidth(imageBuffer);
 size_t height = CVPixelBufferGetHeight(imageBuffer);
 void * buffIn = CVPixelBufferGetBaseAddress(imageBuffer);

 CVPixelBufferRef pxbuffer = NULL;
 CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, width, height, kCVPixelFormatType_32BGRA, nil, &pxbuffer);

 NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);
 CVPixelBufferLockBaseAddress(pxbuffer, 0);

  void *buffOut = CVPixelBufferGetBaseAddress(pxbuffer);
  NSParameterAssert(buffOut != NULL);

  //Copy the whole buffer while testing
  memcpy(buffOut, buffIn, width * height * 4); 
  //memcpy(buffOut, buffIn+sidecrop, width * 100 * 4); 

  if (adaptor.assetWriterInput.readyForMoreMediaData) [adaptor appendPixelBuffer:pxbuffer withPresentationTime:lastSampleTime];
  else NSLog(@"adaptor not ready");

   CVPixelBufferUnlockBaseAddress(pxbuffer, 0);
   CVPixelBufferUnlockBaseAddress(imageBuffer, 0);
} 
```

这也有效，视频看起来不错。但是它非常慢并且帧速率变得不可接受。奇怪的是，最大的减速不是复制，而是 [adaptor appendPixelBuffer] 步骤现在比以前长 10-100 倍。所以我猜它不喜欢我创建的 pxbuffer，但我明白为什么。我在设置视频输出和适配器时使用 kCVPixelFormatType_32BGRA。

谁能建议一种更好的方法来进行复制/裁剪？您可以直接在 ImageBuffer 上执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T08:45:04.893

我找到了解决方案。在 iOS5（我错过了更新）中，您可以设置 AVAssetWriter 来裁剪您的视频（史蒂夫也指出）。将 AVVideoScalingModeKey 设置为 AVVideoScalingModeResizeAspectFill

```
videoWriter = [[AVAssetWriter alloc] initWithURL:filmurl 
                                        fileType:AVFileTypeQuickTimeMovie 
                                           error:&error];  
NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys: 
     AVVideoCodecH264, AVVideoCodecKey, 
     [NSNumber numberWithInt:1280], AVVideoWidthKey,  
     [NSNumber numberWithInt:200], AVVideoHeightKey,
     AVVideoScalingModeResizeAspectFill, AVVideoScalingModeKey,// This turns the
                                                               // scale into a crop
     nil]; 
videoWriterInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo 
                                                       outputSettings:videoSettings] retain]; 
```

# asp.net - 我应该什么时候从使用基本数据类型转移到属性？

> ID：12314869
> 
> 赞同：1
> 
> 时间：2012-09-07T08:57:03.610
> 
> 标签：asp.net, .net, vb.net, oop

试图让我的头脑围绕构建我的应用程序的最佳方式。

当前的应用程序基于机会；具有相当典型属性的潜在工作日志，例如项目经理、费用、开始日期等等。

其中一个属性是 Stage，到目前为止，我一直将其保留为字符串（Won、Lost、No-Go 等）。我有将它转换为自己的类的冲动，尽管现在它只有一个属性：名称，它是一个字符串。我很确定在未来的某个时候 Stage 对象将具有其他属性。

现在为 Stage 属性创建一个类是否疯狂/矫枉过正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:59:37.377

将附加属性添加到现有类比将来将属性转换为类要容易得多，所以如果您认为*可能*需要转换它，我会说只是这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:59:27.860

取决于你在这门课上看到的未来。如果您看到它会延长，那为什么不呢？但是你总是可以有一个字符串，然后在必要时创建一个类并替换它。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:11:24.997

有一个叫做 YAGNI（你不需要它）的概念说：不要把未来看得太远。除非 Stage 类现在很有用，否则只需使用字符串属性。

如果您发现将来某个时候需要一个 Stage 类，那么以后添加它应该不会比现在更努力。如果您发现不需要它，那么您只是节省了一些时间，并降低了设计的复杂性。

一些关于这个 YAGNI 原则的阅读：

*   [http://www.xprogramming.com/Practices/PracNotNeed.html](http://www.xprogramming.com/Practices/PracNotNeed.html)
*   [http://c2.com/cgi/wiki?YouArentGonnaNeedIt](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)
*   [http://codebetter.com/jeremymiller/2009/02/17/a-quick-example-of-yagni-simplest-thing-possible-in-action/](http://codebetter.com/jeremymiller/2009/02/17/a-quick-example-of-yagni-simplest-thing-possible-in-action/)

# actionscript-3 - SWFJunkie Tweetr 的 PHP 代理是否仍然有效？

> ID：12314872
> 
> 赞同：0
> 
> 时间：2012-09-07T08:57:09.563
> 
> 标签：actionscript-3, proxy, flash, twitter-oauth, tweetr

最近有人要求我帮助支持一个使用 SWFJunkie 提供的 PHP 代理的系统。按照代理的安装步骤，我进入第 4 步，此时我没有得到任何结果。我已经尝试在 Apache 和 IIS 上进行托管，确认 URL 重写在两个平台上都能正常工作，并且 CURL 已正确安装，并确保没有防火墙阻止我的请求。

在研究这个问题时，我发现 Twitter 一直在改变他们的 API 规则（更多的改变将在明年 3 月进行）。我能在 Proxy 项目上看到的最后一个活动是在 2010 年，在那之后它似乎已经死了。在我付出更多努力试图让它发挥作用之前，我想我会问 - 目前是否有其他人正在使用它/你有它工作吗？

如果你有它的工作我也欢迎你有任何提示/建议，但主要我只是想提前知道这个实用程序是否仍然有效，以证明花时间在它上面是合理的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:16:33.167

代理仍然有效，但我不得不稍微调整一下代码。

感谢@MikeHayes 的解决方案：[Twitter OAUTH - 返回响应代码“0”](https://stackoverflow.com/questions/9055157/twitter-oauth-returns-response-code-of-0)

对于遇到此问题的任何其他人，快速解决方法是更新 Tweetr.php。找到与以下内容匹配的代码并在末尾插入附加（注释）行。

```
$opt[CURLOPT_URL] = $twitterURL;
$opt[CURLOPT_USERAGENT] = $this->userAgent;
$opt[CURLOPT_RETURNTRANSFER] = true;
$opt[CURLOPT_TIMEOUT] = 60;
//BEGIN UPDATED CODE
$opt[CURLOPT_SSL_VERIFYPEER] = false;
//END UPDATED CODE 
```

再次感谢迈克，祝目前遇到此问题的其他人好运。

# c# - 网页中的 ActiveX 不起作用（显示为损坏的图像）

> ID：12314875
> 
> 赞同：1
> 
> 时间：2012-09-07T08:57:16.933
> 
> 标签：c#, asp.net, .net-3.5, activex

我创建了一个非常简单的用户控件 ActiveX，它带有一个显示 MessageBox 的简单按钮。

```
namespace AxCPW
{
    public partial class Test: UserControl, ITest
    {
        private void button1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Hello World");
        }
    }
} 
```

接下来，我在我的 asp.net 项目中创建了一个网页，并将我的用户控件嵌入其中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
    <object id="myControl" name="myControl" classid="AxCPW.dll#AxCPW.Test" width="100" height="100">
    </object>
</body>
</html> 
```

问题是我看到一个损坏的图像而不是我的 UserControl，我已经在 IE9 上添加了我的本地主机 Web 服务器受信任的站点，但不起作用。

我知道 ActiveX 是一个过时的解决方案，但我需要使用第三方 sdk dll（通过 USB 与设备通信），我认为唯一可用的解决方案是这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:01:57.310

ActiveX 是一种 COM 技术（本质上是“网页中的 COM”），并且不了解 .NET 技术。

要使用 C# 开发的 ActiveX 控件，需要[通过 COM 公开接口](http://www.codeproject.com/Articles/3511/Exposing-NET-Components-to-COM)。此外，您将需要使用 注册 DLL `RegAsm`，而不是`gacutil`将 COM 注册信息写入注册表，而不是将程序集添加到 GAC。最后，该`classid`属性必须是 COM GUID，而不是“友好名称”。

如果您需要自动部署 ActiveX 控件，并且对于使用 GUID 的示例 HTML，请查看我对[Deploy C# ActiveX in a CAB for Internet Explorer use 的](https://stackoverflow.com/questions/5484326/deploy-c-sharp-activex-in-a-cab-for-internet-explorer-use/5484527#5484527)回答。

# php - 在 PHP 中将二进制字符串保存为 pdf 时，PDF 文件总是损坏

> ID：12314878
> 
> 赞同：0
> 
> 时间：2012-09-07T08:57:26.187
> 
> 标签：php, sql-server, pdf

我在 mssql 数据库中以二进制形式存储了一堆 pdf。我从 mssql 数据库获取返回到 php 的 pdf 的二进制字符串，然后通过修改标题将其传递给浏览器。然后浏览器提示下载 pdf，但没有任何东西可以打开它并说文件已损坏。

我有如下的基本标头实现

```
header ("Content-Type: application/pdf");
header ("Content-Disposition: attachment; filename=apdf.pdf");
echo $return['Standard_BIN']; 
```

# iphone - UIpickerview 包含 2 个组件，第二个应该包含 1 个组件减去所选行 ios

> ID：12314880
> 
> 赞同：-2
> 
> 时间：2012-09-07T08:57:34.007
> 
> 标签：iphone, ios, uipicker

当我选择第一个组件时，包含 2 个组件的pickerview 都具有相同的数据，那么所选组件不应出现在第二个组件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:45:04.727

在第一个组件中进行选择后，从第二个组件的数据源中删除该项目并重新加载选择器组件。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:32:25.890

在 didSelectRow 方法中编写以下代码

```
if(component == 0) {

string = [yourarray objectAtIndex:row];

} 
```

然后在 titleForRow 方法中，

```
 if(component == 1) { if([string isEqualToString:[yourarray objectAtIndex:row]]) { break; return nil; else{ return string; }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:19:56.243

您的问题不清楚，但基于我的理解：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
 string = [fistPickerArray objectAtIndex:row];
//do what ever logic you want 
   for(NSString str in secondArray)
   {
    if([string isEqualToString:str])
    {
      [secondPickerArray removeObject:str],
    }
  }
   [picker reloadAllComponent];

} 
```

# fogbugz - Fogbugz 案例 - 在使用 Scoutsubmit.asp 页面创建时将案例分配给用户

> ID：12314881
> 
> 赞同：0
> 
> 时间：2012-09-07T08:57:34.960
> 
> 标签：fogbugz, fogbugz-api

我们正在使用[https://example.com/ScoutSubmit.asp](https://example.com/ScoutSubmit.asp)通过编程创建fogbugz 案例。任何人都可以告诉我们如何传递价值，以便可以将案例分配给 Fogbugz 上的特定用户。您在这方面的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:38:54.760

设置一个项目和区域，其中包含您希望将案例分配给的人员。然后只需确保 scoutsubmit 将提交设置为该项目和区域，案例将自动分配给他们。

您将使用[FogBugz API](http://www.fogcreek.com/fogbugz/docs/70/topics/advanced/api.html)获得更多控制权，但上述方法也可以。

# codeigniter - 需要帮助将 html 模板转换为代码点火器

> ID：12314885
> 
> 赞同：0
> 
> 时间：2012-09-07T08:57:43.477
> 
> 标签：codeigniter, templates

大家好，我正在学习自己的代码点火器。你能帮我如何将模板集成到代码点火器中吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:05:39.890

您可以使用模板库，例如[Williams Concepts](http://williamsconcepts.com/ci/codeigniter/libraries/template/)的这个。

它很容易理解，并且有一些不错的功能，比如根据每个请求添加额外的 js/css。

# php - .htacces 不适用于 CodeIgniter 1.7.3、php 5.3

> ID：12314886
> 
> 赞同：-1
> 
> 时间：2012-09-07T08:57:43.690
> 
> 标签：php, .htaccess, codeigniter

我试图用 .htaccess、CI 1.7.3 和 php 5.3 隐藏 index.php 并得到一个错误 404。但它在我的开发服务器上运行良好，它有 php 5.2，其余的都是相同的配置，我开发了我的使用 HMVC 和我的 .htaccess 的应用程序是

```
 RewriteEngine on
    Options -Indexes
    RewriteBase /myapp/

    RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5})$
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ /myapp/index.php?/$1 [L] 
```

有人建议我如何解决这个问题，我应该升级我的 CI 版本吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:01:23.150

尝试

```
RewriteEngine on
Options -Indexes
RewriteBase /myapp/

RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5})$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

或者

```
RewriteEngine on
Options -Indexes
RewriteBase /

RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5})$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ myapp/index.php?/$1 [L] 
```

可能是您的 .htaccess 认为它​​应该打开`myapp/myapp/index.php`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:27:05.120

从 system/application/config 目录打开 config.php

并更换

```
$config['index_page'] = “index.php” by $config['index_page'] = “” 
```

在 CodeIgniter 目录的根目录下创建一个“.htaccess”文件

并添加以下行。

```
 RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

在某些情况下，uri_protocol 的默认设置无法正常工作。

要解决这个问题，只需更换

```
`$config['uri_protocol'] = “AUTO”` 
```

经过

```
 $config['uri_protocol'] = “REQUEST_URI” 
```

从系统/应用程序/config/config.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:18:03.577

您是否检查过您的 apache 重写模块是否包含在您的服务器中并在 apache 配置文件中启用了重写规则。

# java - 意外结果导致长/整数除法

> ID：12314889
> 
> 赞同：21
> 
> 时间：2012-09-07T08:57:50.997
> 
> 标签：java, int, double, division

我有这样的价值观：

```
long millis = 11400000;
int consta = 86400000;
double res = millis/consta; 
```

问题是：为什么`res`等于`0.0`（而不是 ca. `0.131944`）？它存储在`double`所以不应该四舍五入吧？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-07T09:03:17.850

当您使用二元运算符时，两个参数应该是相同的类型，结果也将是它们的类型。当你想把`(int)/(long)`它分成时`(long)/(long)`，结果是`(long)`。您应该成功`(double)/(long)`或`(int)/(double)`获得双重结果。`(double)/(long)`由于 double 大于 int 和 long，所以 int 和 long 将在和中变成 double`(int)/(double)`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-07T08:59:35.880

因为你将 a`long`除以 an`int`你会得到一个`long`结果。你实际上在做的是

```
double res = (double) (millis/consta); 
```

原样`millis/consta`，`0`当转换`double`为时`0.0`

尝试以下方法将 double 除以 int 并获得 double 结果。

```
double res = (double) millis/consta; 
```

这与

```
double res = ((double) millis)/((double) consta)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T09:00:07.440

你正在做`long`除法（int 被强制转换为 long）所以你得到`long`的值是整数（所以，0）

你应该做

```
 double res = (double) millis / consta; 
```

一旦其中一个值被强制转换为双精度，另一个被强制转换，因此操作在两个运算符中使用相同的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T08:59:45.427

`millis/consta`是一个整数除法，结果是`0`. 在线铸造：

```
double res = millis/consta; 
```

在结果上完成：

```
double res = (double)(millis/consta); 
```

您需要做的是转换操作数之一：

```
double res = (double)millis/consta; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T09:01:25.450

long 和 int 的结果类型将是 long，它不能保存小数。

您想在分配之前将其转换为双精度

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T09:00:38.703

发生这种情况时，它会自动向下转换为 int 以执行操作。你写它像：

```
long millis = 11400000;
int consta = 86400000;
double res = ((double)millis)/((double)consta); 
```

它会起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T09:11:08.073

这是因为 **long：long 数据类型是 64 位有符号二进制补码整数。int：int 数据类型是一个 32 位有符号二进制补码整数。**

[请参阅原始类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html) 这意味着两者都是整数。由于我们将 long 除以整数，结果是 long 0。但是您将此值分配给 res(double) 值并打​​印它。因此显示结果 0.0。

```
long millis = 11400000;
int consta = 86400000;

System.out.println("millis/consta = " + millis/consta); // print 0

double res = millis/consta;
System.out.println("Res " + res); // print 0.0 
```

# php - 改变浏览器 PHP 中的后退行为

> ID：12314890
> 
> 赞同：0
> 
> 时间：2012-09-07T08:57:55.693
> 
> 标签：php, session, browser

在我的 PHP 站点中，当用户将某些东西添加到他们的购物车时，我会触发 URL 更改以在页面上创建一些函数和触发器：

原始网址

```
/category/product/10 
```

新网址

```
/category/product/10#addtocartbutton 
```

网址变成

```
/category/product/10?x=1 
```

方法：

```
/category/product/10
/category/product/10#addtocartbutton (user clicks an onclick href to submit form)
/category/product/10?x=1 (the form adds the item to the session and appends this URL querystring) 
```

问题是当他们按下 bac b

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:03:29.567

在`Javascript`，使用`location.replace`而不是`location.href = 'new location'`
看一下：[http](http://www.roseindia.net/javascript/javascript-location-replace.shtml)
://www.roseindia.net/javascript/javascript-location-replace.shtml ->`location.replace`将用新地址替换当前地址 -> 当用户单击返回按钮时 -> 错误不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:02:01.923

或者尝试使用[pushState](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)。你应该能够根据你的需要操纵你的历史。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:04:43.887

一个好主意是让 add 函数将您重定向回产品页面而不显示查询字符串。由于我不知道您是如何编写添加控制器的，因此很难为您提供确切的代码示例...

编写 PHP 控制器以添加如下内容：

```
function add_to_cart()
{
  add $_GET['x'] to session;
  redirect back to product page;
} 
```

# ruby-on-rails - 带有 Heroku 支持的 Rails 的 Socket.io

> ID：12314893
> 
> 赞同：2
> 
> 时间：2012-09-07T08:58:01.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

在决定如何使用通知更新我正在开发的应用程序时，我一直在纠结很长时间。在我的应用中，用户可以发帖。我想提醒用户有新帖子，就像 facebook 一样。然而，鉴于 Heroku 不支持 websocket 等，决定做什么一直很困难。我不想使用 pusher 或 pubnub，因为这些服务的价格高得离谱。

在进行研究时，我了解了 socket.io，如果支持，它使用 websockets，然后使用 flash 或长轮询来保持与服务器的连接。这似乎是通知 b/c 的明显选择，它将允许跨平台集成，将来很容易实现 websockets，而且它是免费的。

我一直在寻找 Rails 3+ Heroku 支持的 socket.io gem，但我读过很多相互矛盾的东西，我很困惑。为 Rails 3+ 和 Heroku 实现 socket.io 的最佳 gem 是什么/是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:04:43.667

我们不支持 heroku 上的长期连接，因此很遗憾也不支持使用 socket.io。我建议您使用 AJAX 拉动（正如 Jakub Arnold 建议的那样）来完成同样的事情。

# eclipse - 如何查看 p2 日志？

> ID：12314896
> 
> 赞同：1
> 
> 时间：2012-09-07T08:58:09.753
> 
> 标签：eclipse, osgi, equinox, p2

由于某些 p2 问题，我的 eclipse 产品安装失败。它不会生成 bundles.info 文件。我们可以启用 p2 日志吗？

或者 p2 日志完全可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:02:42.273

P2 会将日志写入 Eclipse 的日志文件，该文件始终可以从`<workspace>/.metadata/.log`.

或者，您可以在使用 options 启动 Eclipse 时在控制台中打印 Eclipse 的日志`-console -consoleLog`。

# bash - “监视”如何处理串联命令？

> ID：12314901
> 
> 赞同：0
> 
> 时间：2012-09-07T08:58:25.117
> 
> 标签：bash, ubuntu, console, csh, watch

有件事一直困扰着我：

```
watch cat file 
```

工作正常，每 2 秒在文件中报告一次输出。

```
watch cat file | grep "text" 
```

确实有效，但只有一行很奇怪。

监视耦合命令的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:09:32.517

监视后在命令周围使用引号：

```
watch 'cat file | grep "text"' 
```

# javascript - JavaScript 中函数字面量的确切含义

> ID：12314905
> 
> 赞同：14
> 
> 时间：2012-09-07T08:58:40.090
> 
> 标签：javascript, literals, function-literal

在 JavaScript 中，既有对象字面量，也有函数字面量。

对象字面量：

```
myObject = {myprop:"myValue"} 
```

函数字面量：

```
myFunction = function() {
   alert("hello world");
} 
```

字面意思是什么？我们可以说 Java 有方法字面量吗？

```
public void myMethod() {
    System.out.println("are my literal");
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T09:11:20.743

最大的区别是如何/何时解析和使用它。举个例子，

```
myFunction = function() {
   alert("hello world");
} 
```

您只能`myFunction()`在代码到达那里之后运行，因为您使用匿名函数声明了一个变量。

如果你使用其他方式，

```
function myFunction(){
   alert("hello world");
} 
```

这个函数是**在编译时**声明的，可以在范围内的任何时候使用。

也请参考[这个问题](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-02T20:19:52.900

添加在：

JavaScript 中的函数字面量是函数表达式的同义词。

与函数表达式平行，函数字面量可以有一个可选的标识符（名称）。

因此，如果我们说函数表达式/函数字面量，它包括没有标识符的函数表达式/函数字面量（也称为匿名函数），还包括带有标识符的函数表达式/函数字面量。即使在很多书籍中，函数表达式/函数文字被用作没有标识符的函数表达式/函数文字的同义词（匿名函数）。

> ## 函数字面量
> 
> 函数对象是用函数字面量创建的：
> 
> // 创建一个名为 add 的变量并在其中存储一个函数 // 将两个数字相加。

```
> var add = function (a, b) {
>     return a + b; }; 
```

> 函数文字有四个部分。
> 
> 第一部分是保留字功能。
> 
> 可选的第二部分是函数的名称。该函数可以使用其名称递归调用自身。调试器和开发工具也可以使用该名称来识别功能。如果一个函数没有名字，如前面的例子所示，它被称为匿名的。
> 
> 第三部分是函数的参数集，用括号括起来。括号内是一组零个或多个参数名称，以逗号分隔。这些名称将被定义为函数中的变量。与普通变量不同的是，它们不会被初始化为 undefined，而是会被初始化为调用函数时提供的参数。
> 
> 第四部分是一组用大括号括起来的语句。这些语句是函数的主体。它们在调用函数时执行。
> 
> 函数文字可以出现在表达式可以出现的任何地方......
> 
> 来源：[JavaScript：好的部分](https://www.safaribooksonline.com/library/view/javascript-the-good/9780596517748/ch04s02.html)- 道格拉斯·克罗克福德

这意味着：

```
myFunction = function () {
   alert("hello world");
}; 
```

是一个函数表达式/函数字面量，但也是：

```
myFunction = function myFunction() {
   alert("hello world");
}; 
```

是一个函数表达式/函数字面量。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-07T09:13:38.930

不要将 JavaScript 与 Java 进行比较，它们的共同点就像熊和鲸鱼一样多。Java 是一种面向对象的编程语言，而 JavaScript 是一种函数式编程语言。

函数式语言带来了函数作为第一类对象的概念：函数可以分配给变量，可以作为参数传递，因为它们可以是其他函数的返回值。

对象字面量是您即时在线创建的对象。同样适用于函数文字。但是您给出的示例实际上类似于常规函数声明：

```
function foo()
{
    alert('bar');
} 
```

移动到范围的顶部，并在此*转换*为：

```
var foo = function()
{
    alert('bar');
}; 
```

当函数可以作为参数/返回值传递时，这是有道理的：

```
var processed = (function(someFunc)//<-- argument name
{
    return function()
    {
        alert('I\'ll call some function in 2 seconds, get ready');
        setTimeout(someFunc,2000);//<-- passes a reference to foo, as an argument to setTimeout
    }
})(foo);//pass reference to function object foo here 
```

这只是你可以用 JS 做的各种事情的开始，只要你不再把它当作 Java 的一个子集......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-07T09:03:56.397

函数文字只是定义未命名函数的表达式。

函数文字的语法与函数语句的语法非常相似，不同之处在于它用作表达式而不是语句，并且不需要函数名称。

因此，当您给出方法名称时，它不能是方法文字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-22T00:21:35.490

在 ECMA-262 中没有找到官方定义。

但是根据[维基百科](https://en.wikipedia.org/wiki/Literal_%28computer_programming%29)和我学到的许多其他 PL，**文字是 values 的表达式**。

这意味着：

```
function() {alert("hello world")} 
```

是文字，而：

```
function hello_world() {alert("hello world")} 
```

不是。因为后者不仅表示一个值，而且表示一个**引用**。

我赞成 vsenol 的回答，但现在我认为这是错误的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-28T09:09:47.147

A`function literal`不是 a `function`，而是表示 的值`function`。

对于汇编语言程序员来说，它类似于`block of code`存储在`.text`内存区域中的 a 。

然后人们会想问 a 到底是什么`function`。

A实际上是任何编程语言中`function`由 a 表示的函数值的指针或引用。`function literal`

* * *

例如，

```
public void myMethod() {
    System.out.println("are my literal");
} 
```

如果我们有`myMethod`which 是一种方法，

```
{
    System.out.println("are my literal");
} 
```

那么这将是 Java 不支持的方法文字。

# database-design - 现在在 IT 课程中教授正规形式是否被认为是过时的？

> ID：12314908
> 
> 赞同：2
> 
> 时间：2012-09-07T08:58:49.360
> 
> 标签：database-design

他们现在在大学里教数据库规范化吗？这里的许多学生提出的问题表明他们没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:35:56.730

许多答案表明，一些专家是动态学习数据规范化的，而不是正式学习。特别是，许多答案似乎完全忽略了范式，并且将所有表分解都视为规范化，而不管结果是否符合某些更高的范式。

它变得更糟。许多“规范化鹰派”写得好像他们认为规范化是一个全有或全无的命题。其他人写的好像偏离正常形式总是导致设计不令人满意。还有一些人认为规范化是自顶向下数据设计的一部分，而不是调试提议或遗留设计的一种方式。

最重要的是，您必须意识到，许多提问者和许多专家完全适应了一个数据库将被封装在单个应用程序范围内的环境，通常是一个大规模销售给客户的应用程序。 . 这与 1980 年代的数据库环境完全不同，当时许多关于数据库设计的经典著作都是最初编写的。当时，数据库在多个应用程序和可能的多个应用程序开发团队之间共享数据。

今天超过一半的数据库与报告生成器一起使用将毫无价值，更不用说第二个应用程序了。这是出于意图，而不是出于无知或意外。

总之，你提出的问题只是冰山一角。

# jmeter - 如何在 HTML 响应代码中找到具有名称的特定链接？

> ID：12314910
> 
> 赞同：1
> 
> 时间：2012-09-07T08:58:54.757
> 
> 标签：jmeter, load-testing

我有一个这样的 html 链接结构`<a href=dynamicURL>LinkName</a>`。
我想提取`LinkName`，所以我可以从链接中获取下一个 HTML 请求的动态 URL。

有没有脚本之类的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:21:59.103

使用[正则表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)和正则表达式：

`<a\shref=([^>]+)>LinkName<\/a>`

*`\s`= 空格
`[^>]+`= 所有不等于 >
`\/`= 转义正斜杠*

试试[这个网站](http://rubular.com/)，它使学习正则表达式变得容易。

# ruby-on-rails - 验证多个电子邮件地址

> ID：12314913
> 
> 赞同：3
> 
> 时间：2012-09-07T08:59:20.687
> 
> 标签：ruby-on-rails, ruby

为了通过在文本字段（多个电子邮件地址）中提供他们的邮件地址来邀请新用户，我需要验证给定的电子邮件地址格式并需要显示正确的错误消息。这里我使用每个电子邮件地址之间的空格。（例如**useremail@gmail.com useremail2@yahoo.com**）请指导我。

1）如何验证用户电子邮件地址格式？

2）如何检查用户是否没有使用两个电子邮件地址之间的空格？

3）建议一些最好的方法来做到这一点。

我正在使用 rails（2.3.X 和 ruby​​ 1.8.7）

**用户控制器**

```
def invite_users
  if request.get?
    #render invite_users.html.erb
  elsif request.post?
    if !params[:email_ids].blank? && !params[:message].blank?
      @email_ids = params[:email_ids].split(/ |, |,/)
      @message = params[:message]
      @inviting_users = @email_ids.count
      @inviting_users.times do
        @all_emails = []
        @all_emails = @email_ids.shift
        activation_code = Digest::SHA1.hexdigest( Time.now.to_s.split(//).sort_by {rand}.join)
        UserNotifier.deliver_invite_users(@all_emails, @message,activation_code, current_company)
        end
     else
       flash[:notice] = "Please fill all the fields"
     end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:55:24.963

1）您可以使用一个简单的正则表达式来检查电子邮件字段的值。有许多正则表达式可以工作，从最宽松的到最复杂的。人们通常倾向于使用这样的东西：

```
unless email =~ /^[a-zA-Z][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$/
   puts "Your email address does not appear to be valid") 
```

这个正则表达式可能会让一些无效的电子邮件地址通过（只有非常非常棘手的，所以基本上你可以认为这个正则表达式在 99.99% 的情况下就足够了）。如果你真的想要一个（几乎）完美的检查，你可以考虑这个：[http](http://www.ex-parrot.com/~pdw/Mail-RFC822-Address.html) ://www.ex-parrot.com/~pdw/Mail-RFC822-Address.html （我不知道你是否需要那么多尽管）。

有关验证电子邮件地址的更多正则表达式（当然比我的上一个更简单），请看这里：[使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

2) 只需[strip()](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip)输入两个电子邮件地址的字段。

# c++ - 如何捕获符号查找错误

> ID：12314926
> 
> 赞同：0
> 
> 时间：2012-09-07T09:00:20.800
> 
> 标签：c++

如何在我的代码中捕获符号查找错误，因此目前我的程序崩溃了？

```
void main()
{
  try {
    dlopen("shared.so", RTLD_LAZY);
    /** 
      now running a function in this shared object and 
      this function calls a undefined reference
      and then it crashes but i want to go in the catch block
    */
  } catch(...) {
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:03:47.737

`dlopen`是`C`函数。它不会抛出任何`exception`.

```
void *dlopen(const char *filename, int flag); 
```

从`man dlopen`

> 如果 dlopen() 由于任何原因失败，则返回 NULL。

所以，检查返回值`NULL`。

因此，为了检查，您应该使用该符号

```
void *dlsym(void *handle, const char *symbol); 
```

> 如果在指定库或加载该库时由 dlopen() 自动加载的任何库中未找到符号，则**dlsym() 返回 NULL**。（由 dlsym() 执行的搜索是通过这些库的依赖树的广度优先。） **由于符号的值实际上可能是 NULL（因此 dlsym() 返回的 NULL 不需要指示错误），正确的方法测试错误是调用 dlerror() 清除任何旧的错误条件，然后调用 dlsym()，然后再次调用 dlerror()，将其返回值保存到变量中，并检查这个保存的值是否不是 NULL**。

# ajax - jquery数组推送在ajax成功中无法正常工作

> ID：12314927
> 
> 赞同：2
> 
> 时间：2012-09-07T09:00:26.610
> 
> 标签：ajax, jquery, array-push

我正在尝试将 div id 推送到数组中。数组推送在 ajax 调用之前运行良好。但是当我在 ajax 中使用 push 成功时，当我单击第二个元素时会发生第一次推送。那就是

## 使用以下代码时的数组操作（数组推入成功）

```
first click on id="1"  --- resuting array []
second click on id="2"  --- resulting array [1]
second click on id="3"  --- resulting array [1,2] 
```

我的代码

```
$(document).ready(function() {

    var count = 0;
    var vPool = '';
    arr = [];
    seat = [];
    var totalseat = '<?php echo $sumofseat; ?>';
    var date = ' <?php echo $new_date; ?>';
    $('.custom_checkbox').click(function() {
        pressed = true;
        var prev = $(this).attr('class');
        var arrid = $(this).attr('id');
        var seats = $(this).attr('title');
        count = $('.selected').length;
        if (prev == 'custom_checkbox') {

            //arr.push(arrid);
            //seat.push(seats);
            $.ajax({
                url: "seat_manipulation.php",
                dataType: 'json',
                data: '&operation=save&seat=' + arrid + '&guid=<?php echo $guid; ?>&date=' + date,
                type: "POST",
                context: this,
                success: function(data) {

                    if (data.status == 'SAVED') {
                        $(this).toggleClass('selected');
                        $('#count').slideDown();
                        $('#selecte_seat').show();
                        $('#count').html(count + ' Seats selected');
                        alert(arrid);
                        //if(jQuery.inArray(arrid,arr) == -1) {
                        arr.push(arrid);

                        //}
                        //if(jQuery.inArray(seats,seat) == -1) {
                        seat.push(seats);
                        //}
                    } else {
                        alert("Seat already been used.Please select another");
                    }

                }
            })

        }
    });
}); 
```

我错了..或者这就是它应该如何工作？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:49:17.930

您需要使用“”配置您的 Ajax `async:false`，因为存在竞争条件，因此在您操作 Array 时阻止代码。

看看这个[问题](https://stackoverflow.com/questions/555191/javascript-semaphore-test-and-set-lock)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T09:18:41.083

您正在进行的 AJAX 调用是异步的（根据定义...），这意味着您在 $('.custom_checkbox').click 中定义的实际函数在调用成功函数之前已经完成...当您单击下一个 div（例如 div 2）然后第一次点击的成功函数可能已经被调用，也可能没有被调用......

这可能是问题吗？

# java - Java：如何查找蓝牙设备？

> ID：12314928
> 
> 赞同：-1
> 
> 时间：2012-09-07T09:00:26.213
> 
> 标签：java, api, bluetooth

简单的任务：找到蓝牙设备并定义其 MAC 地址。有 Java 经验吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T14:02:59.190

添加有关您正在使用的平台的更多信息 - Windows/Linux/Android。如果是 Windows 或 Linux，则可以使用[bluecove](http://bluecove.sourceforge.net/) Java 库。请注意，bluecove 构建在现有的本地蓝牙堆栈之上，该堆栈可能是 Linux 上的 BlueZ 和 Win 上的 MS 堆栈。如果是 Android，它有[Java API](http://developer.android.com/guide/topics/connectivity/bluetooth.html)。

# javascript - 将额外参数传递给 jquery.Deferred 回调

> ID：12314931
> 
> 赞同：6
> 
> 时间：2012-09-07T09:00:45.990
> 
> 标签：javascript, jquery, callback, jquery-deferred

我想将一些额外的参数传递给 jQuery.Deferred done 回调，我现在这样做：

```
//dfd gets defined here as the return value of jQuery.ajax

var me = this;
var selector = $("#selector");

dfd.done(function(response){
    me.updated(response, selector);
}); 
```

我想知道是否有更好的方法来做到这一点？我以为我在某处读到过一种无需匿名包装函数即可传递参数的更简洁的方法，但我终其一生都记不起我在哪里读过它，或者我读到了什么。到目前为止，谷歌搜索一无所获。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T10:20:23.000

例如，为了将某些内容传递给`.done`回调，您需要将其传递进去`.resolve`

```
dfd.done( function(selector) {
   console.log( selector );
});
dfd.resolve( selector ); 
```

但在你的情况下`dfd`是一个`$.ajax`对象并且`.resolve`在内部被调用，所以你无法控制它。因此，唯一的方法是使用匿名函数和闭包。

顺便说一句：这个解决方案没有什么不干净的。

# oracle - 在powerbuilder 12.0中多次执行oracle过程

> ID：12314937
> 
> 赞同：1
> 
> 时间：2012-09-07T09:01:02.033
> 
> 标签：oracle, powerbuilder

我在 oracle 中编写了一个存储过程来检查天气给定的输入文件名是否存在于定义的路径中。它工作正常。当我在 power-builder 12.0 中调用此过程时，我进行了这样的测试。我第一次输入错误的文件名它工作正常。然后我输入了正确的文件名，它表示**程序已经执行**。我怎样才能再次重新执行此过程。我在包中声明程序的代码是

```
 DECLARE PROC_FILE_EXISTS PROCEDURE FOR 

HICSWIN_ORACLE.PACK_UPDATE_TSHML_HICSWIN20.PROC_CHECK_FILES_RELEVANCE  
(  
         FILE_NAME => :as_file_name  
)  ;

EXECUTE PROC_FILE_EXISTS;

IF SQLCA.SqlCode < 0 THEN
    MessageBox('eroor',SQLCA.SQLErrText)
    MessageBox('Connection failed','An error occured while connecting to database, please contact your administrartor')
    RETURN 0
end if 
```

仅供参考，我正在使用带有 oracle 11g 的 Windows 7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:22:10.970

您需要关闭过程调用（以类似于游标的方式使用：`Declare`/// ）：`Open``Fetch``Close`

```
close PROC_FILE_EXISTS; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:44:29.423

从数据存储中调用它。使用存储过程源和字符串检索参数创建一个新的 dw。PB 自动包含所有适当的游标语法。调用 Oracle SP 可能更复杂 - 我相信你必须返回一个引用光标才能从 dw 调用一个 ...

# c# - 响应内容处置文件名编码

> ID：12314942
> 
> 赞同：1
> 
> 时间：2012-09-07T09:01:15.663
> 
> 标签：c#, string, response

我想从 ASP.net 保存/打开一个文件。

```
if (Request.Browser.Browser == "IE" && (Request.Browser.Version == "7.0" || Request.Browser.Version == "8.0" || Request.Browser.Version == "9.0"))
contentDisposition = "inline; filename=" + Uri.EscapeDataString(fileName);
else
contentDisposition = "inline; filename*=UTF-8''" + Uri.EscapeDataString(fileName);

Response.ContentEncoding = System.Text.Encoding.UTF8;
Response.Charset = "UTF-8";
Response.ContentType = "application/" + mimeType;
Response.AppendHeader("content-disposition", contentDisposition + "." + extension); 
```

使用此示例 áéáá asd.pdf，我得到以下 áéáá%20asd.pdf。我想要一个简单的空间，而不是 %20。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:05:10.870

使用字符串的替换方法，这里是例子： `string result = filename.Replace("%20"," ")`方法

# android - 可点击的 MyLocationOverlay

> ID：12314943
> 
> 赞同：1
> 
> 时间：2012-09-07T09:01:17.273
> 
> 标签：android, maps, ontouchlistener, clickable, mylocationoverlay

是否可以使 MyLocationOverlay 标记可点击？单击覆盖标记时，我必须启动微调器。

```
myLocationOverlay.setTouchEventListener(new OverlayTouchEventListener() {

        @Override
        public void onTouch(MotionEvent arg0, MapView arg1) {
            showLocationOverlayDialog();
            Log.i("MainMapActivity", "Main.getView() — location touched");
        }
    }); 
```

这就是我到目前为止所拥有的。我还没有开始使用微调器。但是使用此代码，我认为它不起作用。它不进入 setTouchEventListener。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:05:14.290

创建子类`MyLocationOverlay`并覆盖`dispatchTap()`. 不仅仅是创建`myLocationOverlay` 为此类的实例

# php - 为什么通过 ftp_fput 上传 zip 文件返回 true 但不上传文件？

> ID：12314957
> 
> 赞同：1
> 
> 时间：2012-09-07T09:01:58.740
> 
> 标签：php, xml, ftp

以下命令返回 true 并将文本 XML 文件上传到 FTP 服务器：

```
if (ftp_put($this->ftpConnectionId, $this->remoteXmlFileName, $this->localXmlFileName, FTP_ASCII)) { 
```

但是，当我尝试上传 .zip 文件而不是文本 XML 文件时，它仍然返回 true 但不上传文件：

```
if (ftp_put($this->ftpConnectionId, $this->remoteXmlFileName, $this->localXmlFileName, FTP_BINARY)) { 
```

我发现如果我只是将 zip 文件重命名为“.xml”，它将上传文件，但 .zip 文件已损坏。

但是，如果我将 zip 文件重命名为“.zip.xml”，它会再次返回 true，但不会上传文件。

**这种奇怪行为的原因可能是什么？**

## 附加信息：

使用同一帐户可以通过 FileZilla 上传 zip 文件没有问题。

我还指定：

```
ftp_pasv($this->ftpConnectionId, true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:10:29.420

zipfile 是一个二进制文件。这可能就是为什么将其作为 .xml 上传会损坏文件的原因。尝试指定 FTP_BINARY 而不是 FTP_ASCII。FTP_BINARY 也适用于 ascii 文件，但反之亦然，因此您可以始终使用 FTP_BINARY，而不是始终使用 FTP_ASCII。

ftp 服务器可能出于多种原因拒绝该文件，因此它可能首先允许上传，但随后不保存文件。ascii/binary 问题可能是其中之一，但某些文件扩展名可能被列入黑名单，或者文件可能太大。不过，后者不太可能，因为上传具有不同扩展名的 zip 文件对您有用。

我认为 ftp 服务器会主动忽略 zip 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:10:14.300

这是因为 zip 文件包含文件，并且可能大小大于您的 XMl

我们已经使用此代码通过 ftp 上传整个目录

试试这个代码。这将适用于您的 ftp

```
//Start ftp upload code
    $ftp_user_name =$_SESSION['upload']['username'];
    $ftp_user_pass = $_SESSION['upload']['password'];
    $ftp_server = $_SESSION['upload']['host'];
    $sourcepath = $_SESSION['upload']['source'];
    $dest_folder = $_SESSION['upload']['dest_folder'];          
    $conn_id = @ftp_connect($ftp_server,21) or die("Couldn't connect to $ftp_server");
    if (@ftp_login($conn_id, $ftp_user_name, $ftp_user_pass)) {
        ftp_set_option($conn_id, FTP_TIMEOUT_SEC, 70000000000000000); // Set the network timeout to 10 seconds
        ftp_copyAll($conn_id, $sourcepath, $dest_folder);

       }

      function ftp_copyAll($conn_id, $src_dir, $dst_dir) {
                if(is_dir($dst_dir)){
                    return "Dir $dst_dir Already exists";
                } else {
                    $d = dir($src_dir);
                    ftp_mkdir($conn_id, $dst_dir); //echo "creat dir $dst_dir";
                    while($file = $d->read()) { // do this for each file in the directory
                        if ($file != "." && $file != "..") { // to prevent an infinite loop
                            if (is_dir($src_dir."/".$file)) { // do the following if it is a directory
                            $src_dir_path=$src_dir."/".$file;
                            $dst_dir_path=$dst_dir."/".$file;

                            ftp_copyAll($conn_id, $src_dir_path, $dst_dir_path); // recursive part
                            } else {                        
                                $upload = ftp_put($conn_id, $dst_dir."/".$file, $src_dir."/".$file, FTP_BINARY); // put the files
                                //echo "creat files::: ".$dst_dir."/".$file ."";
                                echo " ";
                            }
                        }
                        ob_flush() ;
                        flush(); 
                        usleep(90000);
                        //sleep(1);
                    }
                    $d->close();
                }
                 return true;
            } 
```

# debugging - 可以调试但不能检查或监视 Oracle 中巨大的 PlSql 包中的变量

> ID：12314958
> 
> 赞同：5
> 
> 时间：2012-09-07T09:02:00.713
> 
> 标签：debugging, plsql, oracle10g, plsqldeveloper

我有一个“巨大”的 Pl/Sql 包（大约 1.4 Mb，大约 30.000 行）在 Oracle 数据库 10.2.0.4.0 - 64bit over Solaris 中运行。

我可以逐步调试它（包被标记为调试），但我的问题是当我尝试观察或检查任何变量时，PL/Sql 开发人员甚至向我显示带有任何变量（varchar2、数字等）的“不是变量”我不能看这样的东西：

```
strTipo VARCHAR2(20)  := 'PRUEBA'; 
```

我可以调试和观察/检查其他小包中的变量，但不能在大包中。dbms_output.put_line 会让我发疯。

节点多？Oracle 不能为变量分配内存？

如果Oracle中有一些配置参数或者我能做什么，有人吗？

把巨大的包裹做得更小，这对我来说不是一个解决方案。我做不到。

提前致以问候和感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T12:01:52.153

包裹体太大了。把它分成几个包。plsql 引擎也有一些限制，请参见此处：[http](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/limits.htm) ://docs.oracle.com/cd/B19306_01/appdev.102/b14261/limits.htm （10g 文档）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:26:03.280

您可以使用;

DBMS_OUTPUT.PUT_LINE（变量）；

# java - 实现多个接口的方法返回类型 - 再次

> ID：12314961
> 
> 赞同：2
> 
> 时间：2012-09-07T09:02:07.867
> 
> 标签：java, generics, inheritance, interface, return-value

今天我遇到了以下问题。考虑设置：

```
interface A {
    void foo();
}

interface B {
    void bar();
}

class Impl implements A,B {

    public void foo() { }
    public void bar() { }

}

class Usage {

    void worksAsParameter(){
        acceptIt(new Impl());
    }

    <T extends A & B> void acceptIt(T foo){

    }

    <T extends A & B> T returnIt(){
        return new Impl(); // <-- Compile error
    }

} 
```

除了标记的最后一条语句之外，代码将编译。Eclipse给了我`error: Type mismatch: cannot convert from Impl to T`

我的问题是：为什么当作为参数给出时可赋值（显示在`Impl`但不是何时返回类型？而且，除了不满足类型的情况下，还有什么表达式会满足类型？`T``worksAsParameter``T``null``T``Impl`

请注意，尽管相似，但此问题与[此 SO 问题不同。](https://stackoverflow.com/questions/4747292/method-return-type-to-fullfill-multiple-interfaces)

编辑：修正错字。

=== 总结 ===
看来我误解了通用返回类型的工作原理。我将尝试写下我对它的新理解。
让我们看一下这个问题：

```
<T extends A & B> T returnIt(){
    return new Impl(); // <-- Compile error
} 
```

我最初的假设是实现类（在这种情况下`Usage`）决定了具体的类型`T`，它必须扩展`A`和`B`。显然，是调用者/调用站点来决定什么`T`是并且`Usage`必须提供一个可分配给的值`T`。然而，作为`T`一个编译时交易，除了`null`（因为它可以分配给任何东西）之外，不可能提供这样的值。Afaik 这意味着表单的任何代码都只能返回`null`：

```
<T extends A> T returnIt(){
    return x; // <-- Compile error
} 
```

一个相当不直观的功能，希望在不同的环境中更有用。谢谢彼得！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:05:22.100

原因

```
<T extends A & B> T returnIt(){
    return new Impl();
} 
```

不编译是因为 T 可以是扩展 A 和 B 的任何类。您碰巧知道目前只有一个可能的类，但编译器并不“知道”这一点。

例如

```
class AB extends A, B { }

Usage usage = ...
AB ab = usage.<AB>returnIt(); // T is AB not Impl. 
```

您可以强制解决问题

```
<T extends A & B> T returnIt(){
    return (T) new Impl(); // unchecked cast warning.
} 
```

但更好的解决方案是

```
Impl returnIt(){
    return new Impl();
} 
```

* * *

这定义了两个泛型

```
<T extends A, B> 
```

`T extends A`并且`B extends Object`

你可能想要的是

```
<T extends A & B> 
```

其中 T 必须扩展 A 和 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:10:47.343

你可以像下面这样使用它..

```
 <T extends A, B> T returnIt(){
    return  (T) new Impl(); // <-- cast it to type T
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:25:27.367

您还可以执行以下操作以避免编译错误。

```
 <T extends A & B> T returnIt(Class<T> type) {
        return type.cast(new Impl());
    } 
```

# javascript - 字符串替换 - 不支持的格式字符 '}'

> ID：12314964
> 
> 赞同：2
> 
> 时间：2012-09-07T09:02:12.773
> 
> 标签：javascript, python, html, google-app-engine

我正在尝试对 html/javascript 模板进行一些字符串替换，但是当页面字符串变量在代码中有一个大括号时，我收到“ValueError：不支持的格式字符'}'（0x7d）”的错误。如果我没有任何字符串替换，一切正常。谢谢阅读！

```
import webapp2
page = """
<html>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    %(say)s
</html>
    """

class MainHandler(webapp2.RequestHandler):
    def write_form(self, say):
        self.response.out.write(page % { "say": say })

    def get(self):
        self.write_form("hello")

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:04:28.097

您的“模板”包含字符串`% }`（紧随其后`100`），python 将其解释为格式化指令。

`%`将百分比字符加倍`%%`，它会起作用。

```
>>> page = """
... <html>
...     <style type="text/css">
...       html { height: 100%% }
...       body { height: 100%%; margin: 0; padding: 0 }
...       #map_canvas { height: 100%% }
...     </style>
...     %(say)s
... </html>
...     """
>>> page % dict(say='foo')
'\n<html>\n    <style type="text/css">\n      html { height: 100% }\n      body { height: 100%; margin: 0; padding: 0 }\n      #map_canvas { height: 100% }\n    </style>\n    foo\n</html>\n    ' 
```

或者，对不太容易出现此类问题的格式使用较新的[`.format()`方法](http://docs.python.org/library/string.html#formatstrings)，尽管在这种特定情况下会挂在`{ height: 100% }`花括号对上，因此您的里程可能会发生很大变化；您必须将它们加倍（所以`{{ height: 100% }}`）。

# gzip - gzipped tar 创建是如何工作的？

> ID：12314965
> 
> 赞同：-2
> 
> 时间：2012-09-07T09:02:15.527
> 
> 标签：gzip, tar

我假设这个命令首先创建 tar 文件，然后是 gzip 文件。tar -zcvf 文件.tgz /somefolder

问题是，完整的 .tar 文件是先写在磁盘上的某个地方然后压缩，还是放在 RAM 内存中并从那里压缩？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:40:36.947

gzip 和 tar 同时运行，tar 将其输出通过管道传输到 gzip。整个 tar 文件永远不会存在于任何地方，无论是在 RAM 中还是在磁盘上。tar 文件的块在被 gzip 压缩之前暂时存在于 RAM 中，然后将压缩后的输出写入磁盘。

# c++ - boost::shared_ptr 和 std::shared_ptr 的共存

> ID：12314967
> 
> 赞同：47
> 
> 时间：2012-09-07T09:02:19.660
> 
> 标签：c++, boost, c++11, shared-ptr

我想`boost::log`在某个时候使用，但我无法将 a`std::shared_ptr`作为参数传递，因为编译器（VS2010）无法将其转换为`boost::shared_ptr`.

我真的不喜欢他们彼此是外星人这一事实。

是否有一种安全且透明的方法可以将一个转换为另一个，以免它们相互绊倒？

我不认为这两个[问题](https://stackoverflow.com/questions/3831572/differences-between-tr1shared-ptr-and-boostshared-ptr)是相同的。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-07T09:07:04.643

你可以这样做：

```
template<typename T>
boost::shared_ptr<T> make_shared_ptr(std::shared_ptr<T>& ptr)
{
    return boost::shared_ptr<T>(ptr.get(), [ptr](T*) mutable {ptr.reset();});
}

template<typename T>
std::shared_ptr<T> make_shared_ptr(boost::shared_ptr<T>& ptr)
{
    return std::shared_ptr<T>(ptr.get(), [ptr](T*) mutable {ptr.reset();});
} 
```

编辑：请注意，这不适用于对源 ptr 的弱引用。所以要小心那些！

# django - Django-TinyMCE：如何正确配置？

> ID：12314968
> 
> 赞同：4
> 
> 时间：2012-09-07T09:02:20.170
> 
> 标签：django, django-forms, tinymce

我在摆弄[django-tinyMCE](https://github.com/aljosa/django-tinymce)并注意到一些配置没有得到应用。这是我的 settings.py 中的代码

```
TINYMCE_DEFAULT_CONFIG = {
    'theme' : 'advanced',
    'theme_advanced_buttons1' : 'bold,italic,underline,separator,bullist,numlist,separator,link,unlink',
    'theme_advanced_buttons2' : '',
    'theme_advanced_buttons3' : '',
    'theme_advanced_toolbar_location' : 'top',
    'theme_advanced_toolbar_align': 'left',
    'paste_text_sticky': 'true',
    'paste_text_sticky_default' : 'true',
    'valid_styles' : 'font-weight,font-style,text-decoration',
} 
```

不工作的是：paste_text_sticky、paste_text_sticky_default 和 valid_styles。

我基本上想做的是：

只允许

*   文本为“粗体/斜体/下划线”
*   列表（项目符号、数字）
*   链接

其他一切都是禁止的。

你知道我做错了什么吗？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T13:23:11.897

您需要使用 Python True/False`paste_text_sticky`和`paste_text_sticky_default`.

```
TINYMCE_DEFAULT_CONFIG = {
    'theme' : 'advanced',
    'theme_advanced_buttons1' : 'bold,italic,underline,separator,bullist,numlist,separator,link,unlink',
    'theme_advanced_buttons2' : '',
    'theme_advanced_buttons3' : '',
    'theme_advanced_toolbar_location' : 'top',
    'theme_advanced_toolbar_align': 'left',
    'paste_text_sticky': True,
    'paste_text_sticky_default' : True,
    'valid_styles' : 'font-weight,font-style,text-decoration',
} 
```

查看与有效子项和样式相关的[Stack Overflow 帖子。](https://stackoverflow.com/questions/3037501/tinymce-is-removing-style-tags)希望对您有所帮助。

# html - 菜单栏在放大/缩小时未正确显示

> ID：12314969
> 
> 赞同：0
> 
> 时间：2012-09-07T09:02:21.823
> 
> 标签：html, css

我有一个包含 6 个项目的菜单栏：

![在此处输入图像描述](../Images/f6c1524828cff232e890da8214c28b04.png)

![在此处输入图像描述](../Images/a0a1e94792915c5e2c9762870be1cdd6.png)

当我放大/缩小时，布局会发生变化：

为什么会发生这种情况？

CSS：

```
.menubar {
float:left;
width:920px;    
background:url(../images/nav-back.png) top left repeat-x;
height:52px;
    padding:9px 10px 8px 10px;
    margin-bottom:32px;
 }
.menubar ul {
   float:left;
   background:url(../images/nav-bg.gif) top left repeat-x;
   width:100%;
   display: block; 
}
.menubar li { float:left; background:url(../images/depth.gif) top right no-repeat;   }
.menubar li.last { background:none;  }
.menubar li.first a { padding:16px 42px 16px 43px; }
.menubar li.last a { padding: 16px 43px 16px 44px; }
.menubar li a { padding:16px 18px; display: block; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:14:14.693

这是因为代码的一部分在`percents`，另一部分是固定大小的。但是由于您的问题中没有代码，我不能说如何改进它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:25:35.040

正如@loler 所说，这可能发生在固定大小的属性上。尝试使用 em（或百分比）来制作所有尺寸属性。那应该可以解决您的问题。Em 是一个相对值，取决于浏览器的字体大小。因此，如果您滚动进出该站点，该站点的外观总是相同的。

# php - 将php脚本加载到ajax加载的内容中

> ID：12314973
> 
> 赞同：0
> 
> 时间：2012-09-07T09:02:36.287
> 
> 标签：php, jquery, ajax, dynamically-generated

我有一个 ajax 加载的内容，我想在其中使用 php 脚本。问题是脚本不起作用，如果我尝试`.load`在`ajax`加载的内容中使用它，它会给出错误说明`"$ is not defined"`。

有没有办法在动态加载的内容中加载 php 脚本？

谢谢

编辑：我解决了 $ is not defiend 的问题。好的，一些澄清。这些是步骤： INDEX->menu click->ajax 将 html 加载到 INDEX->inside that html 中的 div 我放了一个 .load 应该加载 php 脚本的输出。不幸的是，它不起作用。

编辑2：我只是愚蠢，php脚本加载得很好，问题是我错过了数据库密码中的一个字符，它没有加载内容。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:09:08.840

> “$ 未定义”

表示未加载 jquery 库检查

您已经提供了 jQuery.js 文件的正确路径，还包括在包含任何其他`js`库之前的 jquery

尝试使用 jquery 的[cdn](https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js)托管版本

编辑

当您将事件绑定到必须使用`.on`（jquery 1.7+）或`.delegate`类似的动态加载元素时

```
$(document).delegate( "yourElement", "load",
    function(e) {
        alert("loaded");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:11:34.723

不，您不能加载 PHP 脚本并在浏览器中运行它。如果您将服务器设置为运行 PHP 脚本，则可以使用 AJAX 在浏览器中加载 PHP 脚本的**输出。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:14:37.200

检查 jquery 包是否包含在您的脚本之前，并且不应在您的脚本之前的任何位置重新定义，例如 jquery.noConflict()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:28:47.963

检查 jquery 库是否正确加载？以及检查您的 jquery 不得与其他 jquery 冲突，因此请使用`jQuery.noConflcit();`以避免错误。

# javascript - 我应该如何衡量 JS 的单元测试覆盖率？我对 jscoverage 不满意

> ID：12314979
> 
> 赞同：2
> 
> 时间：2012-09-07T09:02:56.587
> 
> 标签：javascript, unit-testing, qunit, jscoverage

我想衡量 Javascript 的单元测试覆盖率。

jscoverage 是最有用的工具之一。但是，jscoverage 只能衡量代码在单元测试中通过与否。我想衡量包括逻辑在内的覆盖范围。

我应该如何衡量 JS 的单元测试覆盖率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T19:03:45.210

[BlanketJS](http://blanketjs.org/)是一个很棒的代码覆盖工具，可以很好地与 QUnit 配合使用。我已经使用它大约一年了。

对于大型项目，我还将 QUnit 和 Blanket 与 Grunt 集成，这样我就可以运行我的测试，并从命令行检查我的代码覆盖率阈值，以及 TravisCI 等 CI 解决方案。

没有适合我需要的现有 Grunt 插件，所以我最终编写了自己的 Grunt 插件。该插件支持“强制执行”最小阈值，否则 Grunt 任务将失败。

我在这里写了一篇包含所有详细信息的博客文章：http: [//www.geekdave.com/2013/07/20/code-coverage-enforcement-for-qunit-using-grunt-and-blanket/](http://www.geekdave.com/2013/07/20/code-coverage-enforcement-for-qunit-using-grunt-and-blanket/)

# c++ - 在visual studio 2010下编译64位

> ID：12314988
> 
> 赞同：0
> 
> 时间：2012-09-07T09:03:36.440
> 
> 标签：c++, visual-studio-2010, mfc

我有一个 32 位操作系统，我在 Visual Studion 2010 下。我想知道我是否可以在我的操作系统下用 VS2010 编译一个 64 位 MFC 应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:14:12.070

是的，VS2010 在 vc/bin/x86_amd64 子目录下有一个交叉编译器。当您将 x64 平台添加到您的解决方案时，它会自动使用。如果您没有看到它，请重新运行安装程序以添加 64 位编译器。

你当然不能测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:49:38.617

在配置管理器中，添加一个新的解决方案平台。如果您安装了 x64 编译器和工具，则应将“x64”列为可用选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T15:37:56.053

是的，你可以编译代码，但你不能运行它。为了运行代码，您需要指定运行时环境。

# c# - 覆盖接口中声明的方法实现

> ID：12314990
> 
> 赞同：17
> 
> 时间：2012-09-07T09:03:49.390
> 
> 标签：c#, inheritance, interface

我有一个接口，里面有几个方法。

```
interface IMyInterface
{
    //...
    void OnItemClicked()
    //...
} 
```

和一个实现

```
class MyClass : IMyInterface
{
    //Other methods
    public void OnItemClicked(){ /*...*/ } 
} 
```

现在，我想要一个行为类似于`MyClass`except of的类`OnItemClicked()`，我想要对这个方法进行一些修改。

我想继承一个覆盖，但我不想更改`MyClass`（如：public **`virtual`**void OnItemClicked()...），因为它不是我的实现，

我不想`IMyInterface`再次实现，因为 OnItemClicked() 是 MyClass 中唯一需要修改的部分。

我还有其他方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-07T10:08:20.463

由于您正在实现一个接口，因此您可能希望保留多态性。如果不使用 virtual 修改基类，就不可能覆盖该方法，因此您必须像 Tigran 所写的那样使用 new 而不是 virtual。

这意味着编写这种代码但只执行方法的基本版本：

```
List<MyClass> aList = new List<MyClass>();
aList.Add(new MyClass());
aList.Add(new MyNewClass());
foreach (MyClass anItem in aList)
    anItem.OnItemClicked(); 
```

要执行正确的代码，您应该编写如下丑陋的代码：

```
List<MyClass> aList = new List<MyClass>();
aList.Add(new MyClass());
aList.Add(new MyNewClass());
foreach (MyClass anItem in aList)
{
    MyNewClass castItem = anItem as MyNewClass;
    if (castItem != null)
        castItem.OnItemClicked();
    else
        anItem.OnItemClicked();
} 
```

无论如何，有一种方法可以让您的类在分配给声明为 IMyInterface 的变量时执行正确的方法。要走的路是显式实现要覆盖的接口部分，在您的情况下是 OnItemClicked 方法。代码如下：

```
public class MyNewClass : MyClass, IMyInterface // you MUST explicitly say that your class implements the interface, even if it's derived from MyClass
{
    public new void OnItemClicked() //NEW keyword here you have the overridden stuff
    { 
        /*...*/ 
    } 

    void IMyInterface.OnItemClicked() // No need for public here (all interfaces's methods must be public)
    { 
        this.OnItemClicked(); 
    } 
} 
```

这样：

```
 MyClass cl = new MyNewClass(); 
 cl.OnItemClicked(); 
```

执行基本方法

```
 MyNewClass cl = new MyNewClass(); 
 cl.OnItemClicked(); 
```

执行派生类的方法

```
 IMyInterface cl = new MyNewClass(); 
 cl.OnItemClicked(); 
```

执行派生类的方法并在运行时绑定。这意味着您可以像这样编写我的初始示例的代码并执行正确的方法：

```
List<IMyInterface> aList = new List<IMyInterface>();
aList.Add(new MyClass());
aList.Add(new MyNewClass());
foreach (IMyInterface anItem in aList)
    anItem.OnItemClicked(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T09:05:55.350

你可以从 `MyClass`

```
public class MyNewClass : MyClass
{
    public new void OnItemClicked(){ /*...*/ } //NEW keyword
} 
```

唯一要注意的是，这种方式不支持多态性。

为了更清楚：

```
 MyClass cl = new MyNewClass(); 
     cl. MyMethod(); 
```

这将调用`MyClass`方法，即使*真正的*对象类型是`MyNewType`. 为了能够调用我们想要的，我们必须明确定义类型

```
 MyNewClass cl = new MyNewClass(); 
     cl. MyMethod(); //WILL CALL METHOD WE WANT 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T09:11:55.653

最简单的方法是使用“has-a”创建一个模仿“is-a”的新类：

```
public interface IMyInterface
{
    void OnItemClicked();
    void OnItemHover();
    void OnItemDoubleClicked();
}

public class MyNewClass : IMyInterface
{
    private IMyInterface _target;

    public MyNewClass(IMyInterface target)
    {
        _target = target;
    }

    public void OnItemClicked()
    {
        // custom functionality
    }

    public void OnItemHover()
    {
        _target.OnItemHover();
    }

    public void OnItemDoubleClicked()
    {
        _target.OnItemDoubleClicked();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T09:06:52.793

使用模式桥[http://en.wikipedia.org/wiki/Bridge_pattern](http://en.wikipedia.org/wiki/Bridge_pattern)

# php - Magento 如何在结帐时将其他运输信息保存到报价单

> ID：12314991
> 
> 赞同：1
> 
> 时间：2012-09-07T09:03:49.110
> 
> 标签：php, magento

我是 magento 的新手，我的工作版本是 1.6.2.0。
我正在尝试添加我自己的自定义运输方式模块，但我遇到的问题很少。我的 magento 已经有自定义结帐模块 - 三步结帐，我要做的是保存我在第三步（付款和运输）（类似于商店取货地点）中选择的附加运输信息到报价单，然后在审核中检索报价单数据并将其保存到订单。
我正在使用事件来执行此操作：
checkout_controller_onepage_save_shipping_method 将数据保存到 Quote
checkout_type_onepage_save_order 以将数据保存到 Order
问题是 Quote 和 Order 没有可以保存数据的可用空间，因此我为我的模块创建了安装程序：

```
$installer = $this;
$installer->startSetup();
$packboxName = array(
    'type'              => 'varchar',
    'backend'           => '',
    'frontend'          => '',
    'label'             => 'packboxname',
    'input'             => '',
    'class'             => '',
    'source'            => '',
    'global'            => 1,
    'visible'           => true,
    'required'          => false,
    'user_defined'      => false,
    'default'           => '',
    'searchable'        => false,
    'filterable'        => false,
    'comparable'        => false,
    'visible_on_front'  => false,
    'visible_in_advanced_search' => false,
    'unique'            => false
);
$installer->addAttribute('order', "packboxname", $packboxName);
$installer->getConnection()->addColumn($installer->getTable('sales/order'), 'packboxname', 'varchar(255) DEFAULT NULL');
$installer->addAttribute('quote', "packboxname", $packboxName);
$installer->getConnection()->addColumn($installer->getTable('sales/quote'), 'packboxname', 'varchar(255) DEFAULT NULL');

$installer->endSetup(); 
```

我有一个错误说

> $installer->addAttribute('quote'

实体 ID 错误。所以我检查了数据库，表：eav_entity_type，没有任何“报价”类型（希望有一个“订单”）我的安装程序。

```
$installer->addEntityType('quote', array(
        'entity_model'    => 'sales/quote',
        'table'           =>'sales/quote',
    )); 
```

现在它正在工作我有额外的地方可以保存我的信息，但是我的朋友告诉我我不应该使用 addEntityType，还有其他方法可以实现我需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:31:37.013

我想也许你正在寻找的东西可以在这个答案中找到：[https ://stackoverflow.com/a/4389786/823549](https://stackoverflow.com/a/4389786/823549)

该答案中的一个重点是触发的事件`sales_convert_quote_to_order`- 当报价转换为订单时，这将被触发，并且无论您的其他结帐模块做什么都会发生。此答案也很有用，因为您可以在订单网格页面中查看自定义列的详细信息。

# mongodb - 为什么使用 GeohayStack 失败

> ID：12314994
> 
> 赞同：1
> 
> 时间：2012-09-07T09:03:53.077
> 
> 标签：mongodb, geospatial

我在 mongo shell 中运行此查询，并成功获取结果

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$near" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "indexContents" : { "$all" : [/^warung/] } }).limit(2); 
```

我有：

```
{
  "_id" : "warung-nasi-nur-karomah__-6.19_106.78",
  "BuildingID" : null,
  "Title" : "Warung Nasi Nur Karomah",
  "InBuildingAddress" : null,
  "Building" : null,
  "Street" : "Jl. Arjuna Utara No.35",
  "Districts" : [],
  "City" : "Jakarta",
  "Country" : "Indonesia",
  "LongitudeLatitudeFromGoogle" : null,
  "DistanceFromGoogleAddress" : 0.0,
  "Checkin" : 0,
  "Note" : null,
  "PeopleCount" : 0,
  "Prominent" : 45.5,
  "CountViews" : 0,
  "StreetAdditional" : null,
  "LongitudeLatitude" : {
    "Longitude" : 106.775693893433,
    "Latitude" : -6.18759540055471
  },
  "Rating" : {
    "Stars" : 0.0,
    "Weight" : 0.0
  },
  "Reviews" : [],
  "ZIP" : null,
  "Tags" : ["Restaurant"],
  "Phones" : ["081380087011"],
  "Website" : null,
  "Email" : null,
  "Price" : null,
  "openingHour" : null,
  "Promotions" : [],
  "SomethingWrong" : false,
  "BizMenus" : [],
  "Brochures" : [],
  "Aliases" : [],
  "indexContents" : ["restaura", "estauran", "staurant", "taurant", "aurant", "urant", "rant", "ant", "nt", "t", "warung", "arung", "rung", "ung", "ng", "g", "nasi", "asi", "si", "i", "nur", "ur", "r", "karomah", "aromah", "romah", "omah", "mah", "ah", "h"]
} 
```

但是，当我尝试使用附加搜索多键索引进行此查询时，我没有得到任何结果

```
db.runCommand({ geoSearch : "tablebusiness", near : [106.772835, -6.186753], maxDistance : 0.053980478460939611, search : { "indexContents" : { "$all" : [/^warung/] } }, limit : 30 }) 
```

我懂了

```
{
        "results" : [ ],
        "stats" : {
                "time" : 0,
                "btreeMatches" : 0,
                "n" : 0
        },
        "ok" : 1
} 
```

这是我的收藏数据库中的索引

```
[
        {
                "v" : 1,
                "key" : {
                        "_id" : 1
                },
                "ns" : "isikotacobacoba.tablebusiness",
                "name" : "_id_"
        },
        {
                "v" : 1,
                "key" : {
                        "LongitudeLatitude" : "2d",
                        "Prominent" : -1,
                        "indexContents" : 1
                },
                "ns" : "isikotacobacoba.tablebusiness",
                "name" : "LongLat_Prominent_indexContents",
                "dropDups" : false,
                "background" : false
        },
        {
                "v" : 1,
                "key" : {
                        "LongitudeLatitude" : "2d",
                        "Prominent" : -1
                },
                "ns" : "isikotacobacoba.tablebusiness",
                "name" : "LongLat_Prominent",
                "dropDups" : false,
                "background" : false
        },
        {
                "v" : 1,
                "key" : {
                        "indexContents" : 1
                },
                "ns" : "isikotacobacoba.tablebusiness",
                "name" : "indexContents",
                "dropDups" : false,
                "background" : false
        },
        {
                "v" : 1,
                "key" : {
                        "LongitudeLatitude" : "2d",
                        "indexContents" : 1,
                        "Prominent" : -1
                },
                "ns" : "isikotacobacoba.tablebusiness",
                "name" : "LongitudeLatitude__indexContents_1_Prominent_-1",
                "bits" : 22
        },
        {
                "v" : 1,
                "key" : {
                        "Title" : 1
                },
                "ns" : "isikotacobacoba.tablebusiness",
                "name" : "Title",
                "dropDups" : false,
                "background" : false
        },
        {
                "v" : 1,
                "key" : {
                        "City" : 1
                },
                "ns" : "isikotacobacoba.tablebusiness",
                "name" : "City",
                "dropDups" : false,
                "background" : false
        },
        {
                "v" : 1,
                "key" : {
                        "LongitudeLatitude" : "geoHaystack",
                        "indexContents" : 1
                },
                "ns" : "isikotacobacoba.tablebusiness",
                "name" : "LongitudeLatitude__indexContents_1",
                "bucketSize" : 0.1
        }
] 
```

如何使用带有附加字段 mulikey 的 geohaystack 使用 runCommand mongoDB 格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:42:25.673

Geohaystack 查询不支持附加字段的数组，仅支持单个值。地理空间索引和 geohaystacks 的当前实现不使用标准查询和索引代码。

MongoDB 的 geohaystack 文档 ( [http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing) ) 中的示例仅显示附加字段是简单的单个值，而不是 geohaystack 查询中的值数组。

# java - 我可以在输入时清除 JTable 中的文本吗？

> ID：12314997
> 
> 赞同：4
> 
> 时间：2012-09-07T09:03:59.610
> 
> 标签：java, swing, jtable, textfield, tablecelleditor

我可以让我的 textField`JTable`像**Excel**中的单元格一样吗？输入时清除文本，但进入单元格时可以编辑。

我认为这两个操作将发生在同一个事件中。我错了吗？

我尝试使用`keyPressed`但没有任何效果。TT-TT

这是我的代码

```
private JTable getTblMaster() {
    if (tblMasterData == null) {
        tblMasterData = new JTable() {

            private static final long serialVersionUID = 1L;

            public TableCellEditor getCellEditor(int row, int column) {

                TableColumn tableColumn = getColumnModel()
                        .getColumn(column);

                TableCellEditor editor = tableColumn.getCellEditor();
                try {
                    if (editor == null) {
                            final JTextField text = new JTextField();
                            /*
                            text.addKeyListener(new java.awt.event.KeyAdapter() {
                                public void keyPressed(KeyEvent e){

                                }
                            });

                            SwingUtilities.invokeLater(new Runnable(){
                               public void run(){

                               }
                            });
                            */  
                            editor = new DefaultCellEditor(text);
                        ;
                        return editor;
                    }
                } catch (Exception e) {
                    LogWriter.error(e);
                }
                return editor;
            }
        };
    }
    return tblMasterData;
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:08:47.643

更好的是选择 JTable 单元格中的所有文本

```
text.setText(text.getText())
text.selectAll 
```

通过包裹成`invokeLater()`

很好的解决方法[Table Select All Editor](http://tips4java.wordpress.com/2008/10/20/table-select-all-editor/) by @camickr

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T03:47:20.797

哦！垃圾神。[你的例子](https://stackoverflow.com/questions/10067060/how-to-maintain-jtable-cell-rendering-after-cell-edit/10067560#10067560)救了我的命：D

我所需要的只是下面的代码并且它有效。多么容易！非常非常感谢你。

```
private JTable getTblMaster() {
    if (tblMasterData == null) {
        tblMasterData = new JTable() {
           public boolean editCellAt(int row, int column, EventObject e){
                boolean result = super.editCellAt(row, column, e);
                final Component editor = getEditorComponent();
                if (editor == null || !(editor instanceof JTextComponent)) {
                    return result;
                }
                if (e instanceof KeyEvent) {
                    ((JTextComponent) editor).selectAll();
                }
                return result;
            }    .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-20T03:02:48.907

我是这样做的。首先，我使用事件**keyReleased**，然后获取我正在处理的行号和列号，然后在该行设置值。代码是这样的。

```
private void purchases_TBLKeyReleased(java.awt.event.KeyEvent evt) {                                          
    int rowWorking = purchases_TBL.getSelectedRow();
    int columnWorking = purchases_TBL.getSelectedColumn();

    if(columnWorking==3){
        model.setValueAt(null, rowWorking, columnWorking);
    }
} 
```

一旦我将注意力转移到使用键盘上，这会使表格的第三列变为空。

**注意**：同一段代码可以放在**MouseClicked**事件中。

# vb.net - NUnit 不读取配置文件

> ID：12314998
> 
> 赞同：2
> 
> 时间：2012-09-07T09:04:02.477
> 
> 标签：vb.net, nunit-2.5

我为 .NET 应用程序编写了 NUnit 测试。当我运行 NUnit 时，它不会从配置文件中读取连接字符串值。我尝试了许多没有成功的解决方案，比如

1.  在 NUnit 加载 DLL 文件的路径中添加 <程序集名称>.dll.config 文件。
2.  在 NUnit.exe.config/NUnit.gui.config 中添加配置设置

即使在 VSNunit 中运行，我也无法读取配置设置。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:34:35.093

我假设

*   正在测试的组件：`SomeNameSpace.MyClassLib`
*   带有单元测试的 NUnit 程序集：`SomeNameSpace.MyClassLib.Test`

试试这个：

1.  确保你也复制`app.config`了你的 NUnit 测试 DLL 类库（即项目`SomeNameSpace.MyClassLib.Test`）。

2.  构建您的 NUnit 项目（例如 to `SomeNameSpace.MyClassLib/bin/debug`）并确保以下内容位于 bin\debug（或发布）目录中

    *   要测试的组件，
    *   NUnit 测试 DLL 和
    *   配置 ( `SomeNameSpace.MyClassLib.Test.config`)
    *   正在测试的 DLL 文件所需的任何其他程序集。
3.  在 NUnit GUI 项目编辑器的 XML 视图中编辑您的 NUnit 项目（菜单*Project* → *Edit*，或者只是在记事本中编辑它），并确保测试程序集 (MyClassLib.Test.dll) 和配置文件名称是相对于你的应用程序库

    例如，

    ```
    <NUnitProject>
      <Settings activeconfig="Debug" processModel="Default"
                domainUsage="Default"
                appbase="C:\Temp\MyProject\MyClassLib.Test" />
      <Config name="Debug" binpathtype="Auto"
              configfile="bin\Debug\MyClassLib.Test.dll.config">
        <assembly path="bin\Debug\MyClassLib.Test.dll" />
      </Config>
      <Config name="Release" binpathtype="Auto" />
    </NUnitProject> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:13:11.587

将`app.config`文件添加到测试项目并在其中添加您的配置。

然后，您必须告诉 NUnit 使用什么配置，因为默认情况下它不会获取`app.config`文件。

有关如何使用屏幕截图[进行设置的更多信息。](https://stackoverflow.com/questions/1633607/problem-in-reading-connection-string-from-app-config-when-using-nunit-2-5-2/5821939#5821939)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T20:29:51.420

我被困在一个类似的问题上一段时间。我们还需要查看您是如何加载程序集的，基于配置文件的命名更改（除非您使用设置中的显式配置文件）。如此处所述：

[http://www.nunit.org/index.php?p=configFiles&r=2.2.10](http://www.nunit.org/index.php?p=configFiles&r=2.2.10)

*如果正在加载单个程序集，则为配置文件指定带有 config 扩展名的程序集文件的名称。例如，用于运行 nunit.tests.dll 的配置文件必须命名为 nunit.tests.dll.config，并且与 DLL 文件位于同一目录下。*

*如果正在加载 NUnit 项目，则配置文件使用扩展名更改为配置的项目文件的名称。例如，项目 AllTests.nunit 需要一个名为 AllTests.config 的配置文件，该文件位于与 AllTests.nunit 相同的目录中。加载 Visual Studio 项目或解决方案时遵循相同的规则。*

# tfs - 团队基础 CI 构建观察特定分支

> ID：12314999
> 
> 赞同：0
> 
> 时间：2012-09-07T09:04:05.647
> 
> 标签：tfs, build-automation, tfsbuild

如何设置仅在项目的特定分支中发生签入而不是在整个团队项目中的每次签入时才会启动的自动 TFS 构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:02:37.703

*   在团队资源管理器中，您的团队项目应该有一个“Builds”文件夹。
*   右键单击，然后从上下文菜单中选择“新建构建定义”。
*   将触发器设置为您喜欢的任何内容，例如门控签到。
*   在“工作区”选项卡上，您现在可以选择构建适用于哪个工作区。**在这里您可以选择特定分支的服务器路径**。将此设置为您希望构建触发的服务器路径。
*   在进程选项卡上，您可以选择要构建的解决方案。

希望有帮助。