# StackOverflow 问答 11870000-11870999

# php - 如何从 PHP 中的当前日期（）中删除 5 分钟

> ID：11870001
> 
> 赞同：13
> 
> 时间：2012-08-08T17:31:58.370
> 
> 标签：php, date

我想显示距离当前时间减去 5 分钟的日期；我的代码是这样的：

```
(date('Y-m-d H:i-5:s')) 
```

但这是不正确的，因为`var_dump`会产生：

**2012-08-08 13:27-5:49**

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-08T17:33:03.643

**PHP函数：**

[`strtotime()`](http://php.net/strtotime)

**例子：**

```
echo date('Y-m-d H:i:s', strtotime('-5 minutes')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-15T10:54:06.373

试试这个解决你的问题

```
$format = "h:i A";
date_default_timezone_set('Asia/Kolkata');
echo date($format, strtotime("-5 minute")); 
```

# database - 需要 SQL 查询才能从表中准确找到一条记录

> ID：11870007
> 
> 赞同：1
> 
> 时间：2012-08-08T17:32:34.797
> 
> 标签：database

```
booking id     booked_journey_info_id   PNR
1              1000                     PNR5000
1              1001                     PNR5000
1              1002                     PNR7000
1              1003                     PNR7000 
```

在上表中，我想为每个 PNR 准确检索一条记录。因此，对于上述情况，对于 PNR - PNR5000 查询应该准确检索一个 booking_journey_info_id（1000 或 10001），对于 PNR - PNR7000 查询应该准确检索一个 booking_journey_info_id（1002 或 10003）。

每个 PNR 只需要 1 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:37:35.167

如果从组中获得哪个无关紧要，`booked_journey_info_id`则可以使用`max()`聚合函数来提取最大 id：

```
SELECT MAX(booked_journey_info_id)
FROM myTbl GROUP BY PNR 
```

基本上，聚合函数告诉从组中提取哪个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:03:00.023

听起来你想要完整的行。

以下内容应适用于任何数据库。

```
select t.*
from t join
     (select pnr, max(booked_journey_info_id) as maxid
      from t
      group by pnr
     ) tpnr
     on tpnr.maxid = t.booked_journey_info_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:47:19.263

比[Shredder 的答案](https://stackoverflow.com/a/11870076)更简单的是

```
select * from tablename group by PNR 
```

这会根据（似乎）需要选择任意行。

# python - Python/Webdriver 检查选择选项已禁用

> ID：11870010
> 
> 赞同：5
> 
> 时间：2012-08-08T17:32:37.373
> 
> 标签：python, selenium, webdriver

我正在使用 webdriver 来测试特定页面，该页面有时会在表单中禁用选项。

我正在尝试直接选择该值，然后检查它是否已启用。

这是我所拥有的：

```
hourly = driver.find_element_by_xpath("//select[@name='frequency']/option[@value='HOURLY']")
self.assertFalse(hourly.isEnabled()); 
```

完整路径是：

```
/html/body/div[@class='options']/form/select[@name='frequency']/option[@value='HOURLY'] 
```

当我运行此代码段时，我得到以下信息：

```
AttributeError: 'WebElemet' object has no attribute 'isEnabled' 
```

这使我认为：

1.  我选择了错误的东西或..
2.  我选择的东西实际上不是 WebElement，因为我只能`isEnabled`在远程驱动程序下的 API 中找到引用（http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_remote/selenium .webdriver.remote.webelement.html），这不是一回事，因为我只是在 Python 中使用 Selenium Webdriver。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T17:34:33.800

没关系，我一直在谷歌搜索很多不同的文档，我完全忘记了只是为了阅读 API。电话应该是：

```
is_enabled() 
```

而不是

```
isEnabled() 
```

# java - LabelMaker 抛出 GL_INVALID_ENUM

> ID：11870012
> 
> 赞同：0
> 
> 时间：2012-08-08T17:32:55.313
> 
> 标签：java, android, opengl-es

我一直在尝试使用该[`LabelMaker`](http://www.linuxtopia.org/online_books/android/devguide/guide/samples/ApiDemos/src/com/example/android/apis/graphics/spritetext/LabelMaker.html)示例在切换时在屏幕上显示我的游戏 FPS。当我启用切换时，我的日志会填满此消息：（每次调用绘制一个）

`&lt;qglDrvAPI_glTexImage2D:1913&gt;: GL_INVALID_ENUM`

调试`LabelMaker`源我可以看到当生成`Bitmap`的被绘制到OpenGL纹理时添加了日志消息，但我不知道为什么：

```
public void endAdding(GL10 gl) {
    checkState(STATE_ADDING, STATE_INITIALIZED);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureID);
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, mBitmap, 0);  // Problem Line
    // Reclaim storage used by bitmap and canvas.
    mBitmap.recycle();
    mBitmap = null;
    mCanvas = null;
} 
```

我的调用代码在`onDrawFrame`：

```
if(renderFPS){
        Paint textPaint = new Paint();
        textPaint.setTextSize(32);
        textPaint.setAntiAlias(true);

        textPaint.setARGB(0xff, 0x00, 0x00, 0x00);

        this.labelMaker.beginAdding(gl);
        int fpsLabel =  this.labelMaker.add(gl, Double.toString(currentFPS), textPaint);
        this.labelMaker.endAdding(gl);

        this.labelMaker.beginDrawing(gl, this.mViewWidth, this.mViewHeight);
        this.labelMaker.draw(gl, 10, 10, fpsLabel);
        this.labelMaker.endDrawing(gl);
    } 
```

**编辑：**

我添加了一个调用来将位图写入 SD 卡，以验证位图是否有效并且可以正常工作。我还注意到它似乎在第一次调用时不会导致问题，而是在绘制纹理时继续并报告错误：

```
public void draw(GL10 gl, float x, float y, int labelID) {
    checkState(STATE_DRAWING, STATE_DRAWING);
    Label label = mLabels.get(labelID);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    ((GL11)gl).glTexParameteriv(GL10.GL_TEXTURE_2D,
            GL11Ext.GL_TEXTURE_CROP_RECT_OES, label.mCrop, 0);
    ((GL11Ext)gl).glDrawTexiOES((int) x, (int) y, 0,  // Where the problem starts.
            (int) label.width, (int) label.height);
} 
```

当它开始在`texImage2D`调用时出错。

**编辑 2：** 我意识到我犯了一个愚蠢的错误，并在此调用后调用清除颜色和深度缓冲区。这导致在渲染纹理后清除屏幕。所以代码实际上是在运行，但它也抛出了这个日志消息。仍然不知道为什么？

# html - 类上的自定义 CSS

> ID：11870014
> 
> 赞同：0
> 
> 时间：2012-08-08T17:33:04.673
> 
> 标签：html, css, wordpress

我（wordpress）网站的页脚有隐私政策和 T&C 的链接。在网站的其余部分，所有链接都是蓝色的。**我想覆盖超链接的自然蓝色并将它们改为白色**：

```
/* Links--------------------------------------------- */
a {
color: #2557AA;
text-decoration: none;
} 
```

我在页脚中有一个名为`colophon`. 这被定义为获取特殊格式的类。我希望链接显示为白色。我编写了以下内容来覆盖超链接的 css，以便在页脚中它是白色的：

```
/* Footer--------------------------------------------- */
#colophon p {
line-height: 1.5;
color: #FFF;
}
#colophon a {
color: #FFF;
text-decoration: none;
} 
```

页脚.php

```
<footer id="colophon" >

    <p align="left"> All rights reserved.
    </p>

        <a href="http://example.com/TC">Terms of Use</a> | 
        <a href="http://example.com/Privacy">Privacy Policy</a> 

</footer><!-- end colophon --> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:36:10.083

尝试重要的

```
#colophon a {
   color: #FFF !important;
   text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T17:37:17.370

div #colophon 中的链接将使用以下代码显示为白色。

```
#colophon a:link {color:#FFFFFF; text-decoration: none;}
#colophon a:visited {color:#FFFFFF;text-decoration: none;}
#colophon a:hover {color:#FFFFFF; text-decoration: none;}
#colophon a:active {color:#FFFFFF; text-decoration: none;} 
```

通过这种方式，您可以根据鼠标以及之前是否查看过颜色来更改颜色。让它在悬停时改变有助于用户知道它是一个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:46:11.420

使用[!important](http://www.electrictoolbox.com/using-important-css/)

```
#colophon a {
color: #FFF !important;
text-decoration: none !important;
} 
```

# classification - Weka中决策树和混淆矩阵中正确/错误分类实例之间的差异

> ID：11870019
> 
> 赞同：1
> 
> 时间：2012-08-08T17:33:34.283
> 
> 标签：classification, weka, decision-tree

我一直在使用 Weka 的 J48 决策树将 RSS 提要中的关键字频率分类为目标类别。而且我认为我可能无法将生成的决策树与报告的正确分类实例的数量和混淆矩阵中的数量相协调。

例如，我的 .arff 文件之一包含以下数据提取：

```
@attribute Keyword_1_nasa_Frequency numeric
@attribute Keyword_2_fish_Frequency numeric
@attribute Keyword_3_kill_Frequency numeric
@attribute Keyword_4_show_Frequency numeric
...
@attribute Keyword_64_fear_Frequency numeric
@attribute RSSFeedCategoryDescription {BFE,FCL,F,M, NCA, SNT,S}

@data
0,0,0,34,0,0,0,0,0,40,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
0,0,0,10,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
...
20,0,64,19,0,162,0,0,36,72,179,24,24,47,24,40,0,48,0,0,0,97,24,0,48,205,143,62,78,
0,0,216,0,36,24,24,0,0,24,0,0,0,0,140,24,0,0,0,0,72,176,0,0,144,48,0,38,0,284,
221,72,0,72,0,SNT
...
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,S 
```

依此类推：总共有 64 个关键字（列）和 570 行，其中每行包含一天中某个关键字在提要中出现的频率。在这种情况下，有 10 天的 57 个提要，总共有 570 条要分类的记录。每个关键字都以代理编号为前缀，并以“频率”为后缀。

我对决策树的使用是使用 10 倍验证的默认参数。

Weka 报告如下：

```
Correctly Classified Instances         210               36.8421 %
Incorrectly Classified Instances       360               63.1579 % 
```

使用以下混淆矩阵：

```
=== Confusion Matrix ===

   a   b   c   d   e   f   g   <-- classified as
  11   0   0   0  39   0   0 |   a = BFE
   0   0   0   0  60   0   0 |   b = FCL
   1   0   5   0  72   0   2 |   c = F
   0   0   1   0  69   0   0 |   d = M
   3   0   0   0 153   0   4 |   e = NCA
   0   0   0   0  90  10   0 |   f = SNT
   0   0   0   0  19   0  31 |   g = S 
```

树如下：

```
Keyword_22_health_Frequency <= 0
|   Keyword_7_open_Frequency <= 0
|   |   Keyword_52_libya_Frequency <= 0
|   |   |   Keyword_21_job_Frequency <= 0
|   |   |   |   Keyword_48_pic_Frequency <= 0
|   |   |   |   |   Keyword_63_world_Frequency <= 0
|   |   |   |   |   |   Keyword_26_day_Frequency <= 0: NCA (461.0/343.0)
|   |   |   |   |   |   Keyword_26_day_Frequency > 0: BFE (8.0/3.0)
|   |   |   |   |   Keyword_63_world_Frequency > 0
|   |   |   |   |   |   Keyword_31_gaddafi_Frequency <= 0: S (4.0/1.0)
|   |   |   |   |   |   Keyword_31_gaddafi_Frequency > 0: NCA (3.0)
|   |   |   |   Keyword_48_pic_Frequency > 0: F (7.0)
|   |   |   Keyword_21_job_Frequency > 0: BFE (10.0/1.0)
|   |   Keyword_52_libya_Frequency > 0: NCA (31.0)
|   Keyword_7_open_Frequency > 0
|   |   Keyword_31_gaddafi_Frequency <= 0: S (32.0/1.0)
|   |   Keyword_31_gaddafi_Frequency > 0: NCA (4.0)
Keyword_22_health_Frequency > 0: SNT (10.0) 
```

我的问题涉及将矩阵与树调和，反之亦然。据我了解结果，像 (461.0/343.0) 这样的评级表明有 461 个实例被归类为 NCA。但是当矩阵只显示 153 时，这怎么可能呢？我不知道如何解释这一点，所以欢迎任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:27:10.763

每个叶子的括号中的数字应读作（此叶子上此分类的总实例数/此叶子上不正确分类的数量）。

在您的第一个 NCA 叶示例中，它表示有 461 个测试实例被归类为 NCA，在这 461 个测试实例中，有 343 个错误分类。所以在那个叶子上有 461-343 = 118 个正确分类的实例。

查看您的决策树，请注意 NCA 也在其他叶子中。在 NCA 的 461 + 3 + 31 + 4 = 499 个总分类中，我计算出 118 + 3 + 31 + 4 = 156 个正确分类的实例。

您的混淆矩阵显示了 39 + 60 + 72 + 69 + 153 + 90 + 19 = 502 个 NCA 的总分类中的 153 个正确分类。

因此，树 (156/499) 和您的混淆矩阵 (153/502) 之间存在细微差别。

请注意，如果您从命令行运行 Weka，它会输出一棵树和一个混淆矩阵，用于测试所有训练数据以及使用交叉验证进行测试。请注意，您正在查看正确树的正确矩阵。Weka 输出训练和测试结果，产生两对矩阵和树。你可能把它们弄混了。

# crystal-reports - 创建项目设置后水晶报表不工作

> ID：11870020
> 
> 赞同：0
> 
> 时间：2012-08-08T17:33:35.763
> 
> 标签：crystal-reports, report, project, installation

我为我的 Windows 项目创建了一些 Crystal Reports。当我在 Visual Studio 上运行它们时，它们运行良好。（我正在使用 VS 2010）。但是在我创建安装项目并在客户端 PC 上安装软件后，它们将无法工作。我收到以下错误：

[http://tistus.srilanka-erickson.com/errors.html](http://tistus.srilanka-erickson.com/errors.html)

下面显示的是我用来加载水晶报表的按钮点击事件代码： 第一个 try 子句用于注册报表的自定义输入，同时第二个 try 子句用于手动创建与报表的数据库连接。第三个 try 子句仅用于加载报告。

```
private void buttonGenerateSecExportRpt_Click(object sender, EventArgs e)
    {
        CrystalDecisions.CrystalReports.Engine.ReportDocument cryRpt = new CrystalDecisions.CrystalReports.Engine.ReportDocument();
        if (comboBoxSecPlateType.Text != "" && comboBoxSecExPlateBrand.Text != "")
        {
            try
            {
                dtFrom.Format = DateTimePickerFormat.Custom;
                string periodfrom = dtFrom.Value.ToString("yyyy/MM/dd");
                dtTo.Format = DateTimePickerFormat.Custom;
                string periodto = dtTo.Value.ToString("yyyy/MM/dd");

                //cryRpt.VerifyDatabase();
                string fullPath = "..\\..\\SecondaryPlateExportReport.rpt";
                cryRpt.Load(fullPath);
                cryRpt.SetParameterValue("dateFromChecked", dtFrom.Checked);
                cryRpt.SetParameterValue("dateToChecked", dtTo.Checked);
                cryRpt.SetParameterValue("dtPeriodFrom", periodfrom);
                cryRpt.SetParameterValue("dtPeriodTo", periodto);
                cryRpt.SetParameterValue("PlateType", comboBoxSecPlateType.Text.Trim());
                cryRpt.SetParameterValue("PlateBrand", comboBoxSecExPlateBrand.Text.Trim());

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            try
            {
                DbConnectionInfo.SetConnectionString(ConfigurationManager.ConnectionStrings["con"].ToString());
                TableLogOnInfo logOnInfo;
                ConnectionInfo connectionInfo;
                foreach (Table table in cryRpt.Database.Tables)
                {
                    logOnInfo = table.LogOnInfo;
                    connectionInfo = logOnInfo.ConnectionInfo;
                    // Set the Connection parameters.
                    connectionInfo.DatabaseName = DbConnectionInfo.InitialCatalog;
                    connectionInfo.ServerName = DbConnectionInfo.ServerName;
                    if (!DbConnectionInfo.UseIntegratedSecurity)
                    {
                        connectionInfo.Password = DbConnectionInfo.Password;
                        connectionInfo.UserID = DbConnectionInfo.UserName;
                    }
                    else
                    {
                        connectionInfo.IntegratedSecurity = true;
                    }
                    table.ApplyLogOnInfo(logOnInfo);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            try
            {
                crystalReportViewerSecEx.ReportSource = cryRpt;
                crystalReportViewerSecEx.Refresh();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        else
        {
            MessageBox.Show("Please select both Plate Type and the Brand to Generate the Report!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

我想在客户端 PC 上部署软件后使水晶报告工作。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:55:18.767

```
crystalReport.Load(@"C:\WINDOWS\Temp\samridhi.rpt"); 
```

当你创建设置时把你的水晶报告路径像这样

和

转到“ *C:\WINDOWS\Temp* ”

并通过 mycomputer 复制你的 rpt 和 .cs 文件到“ *C:\WINDOWS\Temp* ”，而不是通过运行提示

* * *

对于不设置只是为了检查项目应用程序中的水晶报告路径，这里是

路径是

```
 crystalReport.Load(System.Windows.Forms.Application.StartupPath + "\\samridhi.rpt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:23:54.257

佘涵，

最好不要在任何 .NET 项目中使用硬编码路径。最好使用 Server.MapPath 变量并动态构建字符串。

例如，将 using System.IO 添加到您的项目中。然后，您可以使用 Path.Combine 方法来构建您的字符串。

```
 string mappath = HttpContext.Current.Server.MapPath("~/");
    Path.Combine(mappath, "Report Folder Path", "FileName.rpt"); 
```

您甚至可以将“报表文件夹路径”放入静态字符串中，这样就可以多次调用它而不必担心更改。

# joomla - Joomla：类别不计算子类别中的文章

> ID：11870022
> 
> 赞同：1
> 
> 时间：2012-08-08T17:33:45.853
> 
> 标签：joomla

我有菜单项“列出所有类别”。问题，类别不计算子类别中的文章并显示 0，应该计算所有子类别中的所有文章。我不能添加图片，所以我将描述：Category (0) subcategory1 (1) subacategory2 (1)

我想要，该类别将计算来自子类别的文章（例如应该是 2）。

有谁知道，如何解决？

非常感谢任何帮助。

先感谢您。编辑：

我正在使用 2.5 Joomla。不，我不写组件/插件/模块。我正在使用菜单项：列出所有类别（菜单->主菜单->添加新菜单项->列出所有类别）。最后，我找到了描述这个功能的地方。在这里，**numitems**是分类中文章的数字：

```
 $subQuery = ' (SELECT cat.id as id FROM #__categories AS cat JOIN #__categories AS parent ' .
        'ON cat.lft BETWEEN parent.lft AND parent.rgt WHERE parent.extension = ' . $db->quote($extension) .
        ' AND parent.published != 1 GROUP BY cat.id) ';
    $query->leftJoin($subQuery . 'AS badcats ON badcats.id = c.id');
    $query->where('badcats.id is null');

    // i for item
    if (isset($this->_options['countItems']) && $this->_options['countItems'] == 1)
    {
        if ($this->_options['published'] == 1)
        {
            $query->leftJoin(
                $db->quoteName($this->_table) . ' AS i ON i.' . $db->quoteName($this->_field) . ' = c.id AND i.' . $this->_statefield . ' = 1'
            );
        }
        else
        {
            $query->leftJoin($db->quoteName($this->_table) . ' AS i ON i.' . $db->quoteName($this->_field) . ' = c.id');
        }

        $query->select('COUNT(i.' . $db->quoteName($this->_key) . ') AS numitems');
    } 
```

根据我的理解，我需要创建类似于 $subQuery 的内容，但这次它应该计算来自子类别的文章。但我不知道该怎么做；/有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:46:14.180

Joomla! 的列出所有类别只会显示该特定类别中的文章计数，子类别不会计入父类别。这是因为父类别可以拥有自己的文章。

要显示一个类别及其子类别中所有文章的总数，需要修改 Joomla 核心`com_content`组件（对核心文件的任何修改都应该被认为是错误的）或创建一个修改后的***copy com_content 组件***（这会更有效但可能比您想要的更多的努力）或为视图创建视图覆盖`categories`。

使用覆盖将使页面显示更重的计算明智。

如果您使用覆盖，您所要做的就是：

1.  `default_items.php`从到复制`/components/com_content/views/categories/tmpl/default_items.php`到`/templates/your-template/html/com_content/categories/default_items.php`和
2.  修改它以计算子项
3.  修改它以显示总计数

### 2 - 计算子项

在该行之后插入此代码`defined('_JEXEC') or die;`：

```
// Calculate number of items including sub-categories using a recursive anonymous function
$countSubItems = function( $item ) use ( &$countSubItems ) {
    $children = $item->getChildren();
    if( count($children) == 0 ) {
        return $item->numitems;
    } else {
        $subItems = 0;
        foreach ($children as $child) {
            $subItems += $countSubItems($child);
        }
        return $subItems = $item->numitems + $subItems;
    }
}; 
```

### 调用计数函数

`if`在第二条语句之后插入调用 count 函数的行：

```
$allItemsInclSubCats = $countSubItems($item); 
```

### 显示包括子类别的总数

将 echo 的行更改为`$item->numitems;`如下所示：

```
<dd><?php echo $item->numitems; ?> ( <?php echo $allItemsInclSubCats; ?> including sub-categories )</dd> 
```

# sql-server-2008 - BCP 双引号文本限定符输出

> ID：11870023
> 
> 赞同：2
> 
> 时间：2012-08-08T17:33:51.117
> 
> 标签：sql-server-2008, bcp

我有一个 bcp 命令，它将查询结果推送到以逗号分隔的 unicode 平面文件中。我需要将字段封装在双引号中，文本标识符是双引号。

这是 csv 输出的示例：

```
36029,2,Oct 11 2004  1:01AM,4,23537,0.10 
```

它需要在哪里：

```
"36029","2","Oct 11 2004  1:01AM","4","23537","0.10" 
```

我怀疑它使用 -q 标志，但我不确定如何实际使用 -q。MS 文档对我帮助不大。

对不起，如果这是一个骗局，我发誓我仔细看了看！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:03:26.717

try this:

```
Exec Master..xp_Cmdshell 'bcp "SELECT '"' + col1 + '"', '"' + col2+ '"', '"' + col3+ '"'
FROM table1" queryout  "C:\mcg1.csv" -c -t,"' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:41:04.270

如果您从 Eclipse 中提取，它会在文本和日期周围加上双引号。我从视图数据源资源管理器执行此操作。右键单击-> 数据-> 提取...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T18:18:09.650

您还可以利用 SQL 服务器`QuoteName`函数来指定应该有引号的列。这也提供了添加任何字符来代替引号的能力

```
Exec Master..xp_Cmdshell 'bcp "SELECT QuoteName(col1,Char(34)),QuoteName(col2,Char(34)),... FROM table1" queryout  "C:\test.csv" -c -t,"' 
```

看看这里了解更多

[SQL Server BCP 实用程序专家指南](http://social.technet.microsoft.com/wiki/contents/articles/4666.sql-server-bcp-utility-experts-guide.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T19:26:54.107

利用：

```
select col1, col2, quotename(col3, '\"') from table1    -- backslash before double quote to escape the " 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T14:14:28.850

```
 DECLARE @DBName VARCHAR(100) = 'dbname'
                ,@TableName VARCHAR(100) = 'example'
                ,@FileNamePath VARCHAR(100) = 'example.csv'
                ,@MaxRowsPerFile INT = 999999999
                ,@Resume BIT = 0
                ,@PrintVarValues BIT = 1
                ,@ConvertDates BIT = 1
                ,@QuotedStrings BIT = 0
                ,@delimitor VARCHAR(1) = ','
            --Generate column names as a recordset 
            DECLARE @columns VARCHAR(8000)
                ,@columnsas VARCHAR(8000)
                ,@columnsformatted VARCHAR(8000)
                ,@sql VARCHAR(8000)
                ,@HeaderFile VARCHAR(100)
                ,@DataFile VARCHAR(100)
                ,@FileCount INT
                ,@TotalRows INT
                ,@RowCount INT
                ,@IntVariable INT
                ,@SQLString NVARCHAR(4000)
                ,@ParmDefinition NVARCHAR(512)
                ,@FileCountName VARCHAR(100)
                ,@PrimaryColumn NVARCHAR(128)
                ,@FileExtension VARCHAR(10)
                ,@Quote1 VARCHAR(10) = ''
                ,@Quote2 VARCHAR(10) = '';

            IF (@QuotedStrings = 1)
            BEGIN
                SELECT @Quote1 = 'QUOTENAME('
                    ,@Quote2 = ',CHAR(34))'
            END

            IF (
                    len(isnull(@DBName, '')) > 1
                    AND len(isnull(@TableName, '')) > 1
                    )
            BEGIN
                EXEC ('USE [' + @DBName + '];')

                SELECT @FileCount = 1
                    ,@RowCount = 1

                IF (OBJECT_ID(N'dbo.#CreateExcel') IS NOT NULL)
                BEGIN
                    IF (@Resume = 0)
                    BEGIN
                        DROP TABLE dbo.#CreateExcel
                    END
                    ELSE
                    BEGIN
                        SELECT @FileCount = FileCount
                            ,@RowCount = [RowCount]
                        FROM dbo.#CreateExcel WITH (NOLOCK)
                    END
                END

                IF (OBJECT_ID(N'dbo.#CreateExcel') IS NULL)
                BEGIN
                    CREATE TABLE dbo.#CreateExcel (
                        FileCount INT
                        ,[RowCount] INT
                        )

                    INSERT INTO dbo.#CreateExcel (
                        FileCount
                        ,[RowCount]
                        )
                    VALUES (
                        1
                        ,1
                        )
                END

                SELECT @FileExtension = CASE 
                        WHEN CHARINDEX('.', REVERSE(@FileNamePath)) > 1
                            THEN RIGHT(@FileNamePath, CHARINDEX('.', REVERSE(@FileNamePath)))
                        ELSE '.XLS'
                        END

                SELECT @FileNamePath = CASE 
                        WHEN CHARINDEX('.', REVERSE(@FileNamePath)) > 1
                            THEN LEFT(@FileNamePath, LEN(@FileNamePath) - CHARINDEX('.', REVERSE(@FileNamePath)))
                        ELSE @FileNamePath
                        END

                SELECT @HeaderFile = substring(@FileNamePath, 1, len(@FileNamePath) - charindex('\', reverse(@FileNamePath))) + '\HeaderFile.xls'

                SELECT @DataFile = substring(@FileNamePath, 1, len(@FileNamePath) - charindex('\', reverse(@FileNamePath))) + '\DataFile.xls'

                SET @SQLString = N'SELECT @Primary_Column = bb.[name] FROM (' + N'SELECT    TOP 1 co.[name] ' + N'FROM  [' + @DBName + N'].[sys].[objects] ao with (nolock) ' + N'  inner join [' + @DBName + N'].[sys].[columns] co with (nolock) ' + N'       on ao.object_id = co.object_id ' + N'WHERE  ao.[name] = ''' + @TableName + N'''' + N'   AND ((co.is_identity=1) ' + N'      or (co.column_id =1 and co.IS_NULLABLE=0) ' + N'        or (co.system_type_id=36 /*uniqueidentifier*/) ' + N'       or (co.system_type_id in (42,61,189) /*datetimes*/)) ' + N'ORDER BY co.is_identity desc, co.column_id asc, co.system_type_id asc) bb';
                SET @ParmDefinition = N'@Primary_Column NVARCHAR(128) OUTPUT';

                EXECUTE sp_executesql @SQLString
                    ,@ParmDefinition
                    ,@Primary_Column = @PrimaryColumn OUTPUT;

                SET @SQLString = N'SELECT   @cols=coalesce(@cols+'','','''')+''[''+co.[name]+'']'', ' + N'@colsas=coalesce(@colsas+'','','''')+''' + @Quote1 + '''''''+co.[name]+''''''' + @Quote2 + ''', ' + N'@colsformatted=coalesce(@colsformatted+'','','''')+CASE WHEN co.[system_type_id] in (98,167,175,231,239,241) THEN 
                            ''' + @Quote1 + 'REPLACE(REPLACE([''+co.[name]+''],CHAR(13),CHAR(32)),CHAR(10),CHAR(32))' + @Quote2 + '''
                        WHEN co.[system_type_id] in (35,99) THEN 
                            ''' + @Quote1 + 'REPLACE(REPLACE(CAST([''+co.[name]+''] AS VARCHAR(8000)),CHAR(13),CHAR(32)),CHAR(10),CHAR(32))' + @Quote2 + '''
                        WHEN ' + LTRIM(RTRIM(CAST(@ConvertDates AS INT))) + N'=1 AND co.[system_type_id] in (40,42,58,61) THEN 
                            ''' + @Quote1 + 'CONVERT(varchar(10),[''+co.[name]+''],101)+'''''''' ''''''''+LEFT(RIGHT(CONVERT(varchar(24),[''+co.[name]+''],109),12),8)+'''''''' ''''''''+RIGHT(LTRIM(RTRIM(CONVERT(varchar(24),[''+co.[name]+''],100))),2)' + @Quote2 + '''
                        ELSE ''[''+co.[name]+'']''
                    END ' + N'FROM  [' + @DBName + 
                    N'].[sys].[objects] ao with (nolock) ' + N' inner join [' + @DBName + N'].[sys].[columns] co with (nolock) ' + N'       on ao.object_id = co.object_id ' + N'WHERE  ao.[name] = ''' + @TableName + N'''';
                SET @ParmDefinition = N'@cols VARCHAR(8000) OUTPUT, @colsas VARCHAR(8000) OUTPUT, @colsformatted VARCHAR(8000) OUTPUT';

                EXECUTE sp_executesql @SQLString
                    ,@ParmDefinition
                    ,@cols = @columns OUTPUT
                    ,@colsas = @columnsas OUTPUT
                    ,@colsformatted = @columnsformatted OUTPUT;

                --Create HeaderFile.XLS
                SET @sql = 'exec master..xp_cmdshell ''bcp "SELECT ' + REPLACE(REPLACE(@columnsas, CHAR(34), CHAR(34) + CHAR(34)), CHAR(39), CHAR(39) + CHAR(39)) + '" queryout "' + @HeaderFile + '" -c -t ' + CASE 
                        WHEN @delimitor IS NULL
                            THEN ''
                        ELSE @delimitor
                        END + ' -T'''

                IF (@PrintVarValues = 1)
                BEGIN
                    PRINT @sql
                END

                EXEC (@sql)

                SET @SQLString = N'SELECT @Total_Rows = count(1) from [' + @DBName + N']..[' + @TableName + N'] with (nolock)';
                SET @ParmDefinition = N'@Total_Rows INT OUTPUT';

                EXECUTE sp_executesql @SQLString
                    ,@ParmDefinition
                    ,@Total_Rows = @TotalRows OUTPUT;

                WHILE (@RowCount <= @TotalRows)
                BEGIN
                    --Create incremental filename for each chuck of rows from table in database
                    IF (@PrintVarValues = 1)
                    BEGIN
                        PRINT 'Percent Complete: ' + ltrim(rtrim(cast(cast((@RowCount * 100) / @TotalRows AS INT) AS VARCHAR(10)))) + '%'
                    END

                    SET @FileCountName = @FileNamePath + Right(REPLICATE('0', 3) + ltrim(rtrim(CAST(@FileCount AS VARCHAR(4)))), 4) + @FileExtension
                    --populate data into incremental filename
                    SET @sql = 'exec master..xp_cmdshell ''bcp "SELECT ' + @columnsformatted + ' FROM ( SELECT ROW_NUMBER() OVER (ORDER BY [' + @PrimaryColumn + '] ASC) AS [ROW_NUMBER], ' + @columns + ' FROM [' + @DBName + ']..[' + @TableName + '] ) foo WHERE [ROW_NUMBER] BETWEEN ' + LTRIM(RTRIM(CAST(@RowCount AS NVARCHAR(10)))) + ' AND ' + LTRIM(RTRIM(CAST(@RowCount - 1 + @MaxRowsPerFile AS NVARCHAR(10)))) + '" queryout "' + @DataFile + '" -c -t ' + CASE 
                            WHEN @delimitor IS NULL
                                THEN ''
                            ELSE @delimitor
                            END + ' -T'''

                    IF (@PrintVarValues = 1)
                    BEGIN
                        PRINT @sql
                    END

                    EXEC (@sql)

                    --Merge headerfile.xls with incremental filename
                    SET @sql = 'exec master..xp_cmdshell ''copy /b ' + @HeaderFile + '+' + @DataFile + ' ' + @FileCountName + ''''

                    IF (@PrintVarValues = 1)
                    BEGIN
                        PRINT @sql
                    END

                    EXEC (@sql)

                    --update TempCreateExcel table with running values in case needing to abort and restart from checkpoint reached.
                    SELECT @FileCount = @FileCount + 1
                        ,@RowCount = @RowCount + @MaxRowsPerFile

                    UPDATE dbo.#CreateExcel
                    SET FileCount = @FileCount
                        ,[RowCount] = @RowCount
                END

                IF (@PrintVarValues = 1)
                BEGIN
                    PRINT 'Percent Complete: 100%'
                END

                DROP TABLE [dbo].#CreateExcel
            END 
```

# javascript - 将顺序设置为 jquery 可排序

> ID：11870024
> 
> 赞同：2
> 
> 时间：2012-08-08T17:33:55.427
> 
> 标签：javascript, jquery

我对无序列表（ul）使用jquery draggble函数，并面临在更改后获取项目顺序并设置页面加载顺序的问题。假设我们有以下代码：

```
<html>
   <head>
     <script src="http://code.jquery.com/jquery-latest.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js>  </script>
     <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
   <script>
      $(document).ready(function(){
            $('.secondblock').sortable({axis:'y'});

            $(".block").sortable({
            axis: 'y',
            update: function(event, ui) {// order changed
               var order = jQuery(this).sortable('toArray');
               // set this order to .secondblock

            }
         });
      });
  </script>

  </head>
  <body>
      <ul class="block" type="none">
           <li id = "one">1</li>
           <li id = "two">2</li>
           <li id = "three">3</li>
           <li id = "four">4</li>
           <li id = "five">5</li>
      </ul>
      <ul class="secondblock" type="none">
           <li id = "one">1</li>
           <li id = "two">2</li>
           <li id = "three">3</li>
           <li id = "four">4</li>
           <li id = "five">5</li>
      </ul>
  </body> 
```

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:01:42.597

首先，您不应该让相同的 id 在文档中出现两次。这会导致各种问题。

相反，为第二个列表中的项目设置数据属性以反映第一个列表中的相应项目：

```
<ul class="block" type="none">
    <li id = "one">1</li>
    <li id = "two">2</li>
    <li id = "three">3</li>
    <li id = "four">4</li>
    <li id = "five">5</li>
</ul>
<ul class="secondblock" type="none">
    <li data-block-id = "one">1</li>
    <li data-block-id = "two">2</li>
    <li data-block-id = "three">3</li>
    <li data-block-id = "four">4</li>
    <li data-block-id = "five">5</li>
</ul> 
```

然后在第二个列表中反映第一个列表的排序很简单：

```
$('.block').sortable({update: sortOtherList});

function sortOtherList(){
    $('.block li').each(function(){ 
        $('.secondblock [data-block-id=' + $(this).attr('id') + ']')
            .remove()
            .appendTo($('.secondblock'));

    });
} 
```

看到它在这里工作：http: [//jsfiddle.net/6HKZG/2/](http://jsfiddle.net/6HKZG/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:48:53.070

**浮士德对我来说更好看。标记它，如果它是你想要的。**

是的。我觉得我需要更多信息，但最近我不得不做几乎完全相同的事情。

首先，您想使用排序算法扩展 javascript 数组对象。这是我使用的：

```
Array.prototype.move = function (old_index, new_index) {
    if (new_index >= this.length) {
        var k = new_index - this.length;
        while ((k--) + 1) {
            this.push(undefined);
        }
    }
    this.splice(new_index, 0, this.splice(old_index, 1)[0]);
    return this; // for testing purposes
}; 
```

source[将数组元素从一个数组位置移动到另一个位置](https://stackoverflow.com/questions/5306680/move-an-array-element-from-one-array-position-to-another)

然后，我要做的就是将它与 OldPosition/NewPosition 函数一起使用来获取排序前后元素的索引，并使用此方法移动数组中的对象。

我认为 JQuery 排序可以让您在排序之前和之后获取有关数组的信息

前任：

```
$('li').presort(function() {
  window.oldindex = $(this).index();
});
$('li').postsort(function() {
  window.newindex = $(this).index();
  array.move(oldindex,newindex);
}); 
```

如果您只是想在排序后进行`.secondblock`匹配`.block`，您可以这样做：来源：http: [//jqueryui.com/demos/sortable/#events](http://jqueryui.com/demos/sortable/#events)

```
$( ".selector" ).sortable({
   start: function(event, ui) { //Get the order of the .block list items before dragging }
});
$( ".selector" ).sortable({
   stop: function(event, ui) { //Get the new order of the list items after dragging. Compare the two orders and sort .secondblock to match block }
}); 
```

# qt - glOrtho 结果不是我所期望的

> ID：11870025
> 
> 赞同：0
> 
> 时间：2012-08-08T17:33:55.943
> 
> 标签：qt, opengl

我对自己遇到的麻烦感到有些困惑`glOrtho()`。我的代码适用于以下情况：

```
// Scenario 1
...
glOrtho(0, _width, 0, _height, 0, 1);
...
glRasterPos2i(0, 0);
... 
```

但是，我对这个坐标系不满意，我希望它使用：

```
// Scenario 2
...
glOrtho(0, _width, -_height, 0, 0, 1);
...
glRasterPos2i(0, -_height);
... 
```

不幸的是，只在我的代码中更改上面的两行就会给我留下一个空白屏幕。我以为我不了解如何`glOrtho()`工作`glRasterPos2i()`，因为我对 OpenGl 还很陌生，所以我尝试了以下方法：

```
// Scenario 3
...
glOrtho(0, _width, -_height, 1, 0, 1);
...
glRasterPos2i(0, -_height);
... 
```

而且，令我惊讶的是，它奏效了！为什么是这样？上面的代码不足以满足我的目的，所以除非我能解决我的问题，否则我将坚持方案 1。有没有人知道为什么场景 1 和 3 有效，但场景 2 没有？根据我的网络搜索，场景 2 应该可以工作，所以我必须误解一些东西。

如果有帮助，我`glDrawPixels()`会用来绘制图像，其中 _height 和 _width 是图像的高度和宽度。

我正在使用`Windows 7`和`Qt 4.7.4`。

如果您需要更多信息，请告诉我。

编辑：原文中的错字，应该`glOrtho(0, _width, -_height, 0, 0, 1)`改为`glOrtho(0, _width, _height, 0, 0, 1)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:22:30.217

您的光栅位置位于窗口的角落。我的猜测是，舍入误差会导致在某些情况下位置被剪裁，但在其他情况下不会。

我认为答案是`glWindowPos()`1.4 版本中添加的。顾名思义，它直接在窗口坐标中设置光栅位置，不受模型视图和投影矩阵的影响。重要的是，光栅位置将始终有效，即使该位置在窗口边界上或之外。缺点是您必须在调用之前自己进行坐标映射`glWindowPos()`。

# asp.net - IE中没有动画的图像，适用于其他浏览器吗？

> ID：11870031
> 
> 赞同：0
> 
> 时间：2012-08-08T17:34:14.377
> 
> 标签：asp.net

在 ASPX 页面中，我们有以下代码，一切正常，但动画 gif "arrows64.gif" 在 IE 浏览器中没有动画，看起来像冻结，需要知道解决方法吗？

在页面加载中我正在调用耗时的数据库调用，同时我想显示这个繁忙的图像，但它在 IE 中冻结，

```
<div id="divLoading" runat="server" style="text-align: center">
    <div style="z-index: 1000; border: medium none; margin: 0pt; padding: 0pt; width: 100%;
        height: 100%; top: 0pt; left: 0pt; background-color: rgb(0, 0, 0); opacity: 0.6;
        cursor: wait; position: fixed;">
    </div>
    <div style="z-index: 1001; position: fixed; padding: 0px; margin: 0px; width: 30%;
        top: 40%; left: 35%; text-align: center; color: rgb(0, 0, 0); border: 3px solid rgb(170, 170, 170);
        background-color: rgb(255, 255, 255); cursor: wait;">
        <img src="Images/arrows64.gif" width="64" height="64" alt="Loading..." />
        <h1>
            Please wait...</h1>

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:40:07.210

这可能是您需要翻转的 IE 设置，或者只是缺少对动画 GIF 的支持（取决于版本）。我不会为此而失眠，只是使用不同的图像来明确表示正在加载……这样，即使它没有移动，用户也可以读到它正在发生。

如果这是一个需要翻转的设置，您的用户会因为得知他们需要更改其 IE 配置以使您的网站正常运行而感到恼火。

如果您必须使用此动画 GIF，请[阅读此帖子了解可能的解决方法。](http://www.norio.be/comment/234)

# php - 在 url htaccess 的末尾插入反斜杠

> ID：11870033
> 
> 赞同：0
> 
> 时间：2012-08-08T17:34:21.313
> 
> 标签：php, apache, .htaccess, url, url-rewriting

我正在做一个关于 php 的项目。动态 url 将更改为搜索引擎友好的 url。我正在创建 htaccess 文件以重写 url。我不熟悉**.htaccess**。我正在尝试将 bakslash 插入到 url。如果网址不以“ **/** ”或“ **.html** ”结尾，则在最后添加反斜杠。请帮助检查以“ **/** ”或“ **.html** ”结尾的网址

现在我正在尝试这段代码

```
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_URI} !\..+$
 RewriteCond %{REQUEST_URI} !/$
 RewriteRule (.*) http://www.example.com/$1/ [R=301,L] 
```

**此代码仅在http://www.example.com/hh**情况下插入黑色斜线。但我会尝试在任何文档根目录中添加反斜杠

例如

```
http://www.example.com/hh/yyy   - http://www.example.com/hh/yyy/
http://www.example.com/h        - http://www.example.com/h/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:40:02.620

尝试以下方法：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^/(.*[^/]+)$ http://www.example.com/$1/ [R=301,L] 
```

# haproxy - 具有 2 个后端的 haproxy - 当 1 个后端排队时，另一个也会受到影响

> ID：11870038
> 
> 赞同：2
> 
> 时间：2012-08-08T17:34:56.723
> 
> 标签：haproxy

我有 2 个后端的 haproxy 设置：be1 和 be2

我正在使用 ACL 根据路径进行路由。

当 be2 开始形成队列时，对 be1 的请求会受到负面影响——通常需要 100 毫秒的时间需要 2-3 秒（就像对 be2 的请求一样）。

有没有办法让 be2 排队而不影响 be1 的性能？

在高峰期，我的服务量约为 2000 req/s。

```
 global
    log 127.0.0.1   local0
    log 127.0.0.1   local1 notice
    #log loghost    local0 info
    maxconn 2000
    #chroot /usr/share/haproxy
    user haproxy
    group haproxy
    daemon
    #debug
    #quiet
    ulimit-n 65535
    stats socket /var/run/haproxy.sock
    nopoll

defaults
    log global
    mode    http
    option  httplog
    option  dontlognull
    retries 3
    option redispatch
    maxconn 2000
    contimeout  5000
    clitimeout  50000
    srvtimeout  50000

frontend http_in *:80
    option httpclose
    option forwardfor
    acl vt path_beg /route/1
    use_backend be2 if vt
    default_backend be1

backend be1
    balance leastconn
    option httpchk HEAD /redirect/are_you_alive HTTP/1.0
    server 01-2C2P9HI x:80 check inter 3000 rise 2 fall 3 maxconn 500

backend be2
    balance leastconn
    option httpchk HEAD /redirect/are_you_alive HTTP/1.0
    server 01-3TPDP27 x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-3CR0FKC x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-3E9CVMP x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-211LQMA x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-3H974V3 x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-13UCFVO x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-0HPIGGT x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-2LFP88F x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-1TIQBDH x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-2GG2LBB x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-1H5231E x:80 check inter 3000 rise 2 fall 3 maxconn 250
    server 01-0KIOVID x:80 check inter 3000 rise 2 fall 3 maxconn 250

listen stats 0.0.0.0:7474       #Listen on all IP's on port 9000
    mode http
    balance
    timeout client 5000
    timeout connect 4000
    timeout server 30000
    #This is the virtual URL to access the stats page
    stats uri /haproxy_stats        
    #Authentication realm. This can be set to anything. Escape space characters with a backslash.
    stats realm HAProxy\ Statistics 
    #The user/pass you want to use. Change this password!
    stats auth ge:test123
    #This allows you to take down and bring up back end servers.
    #This will produce an error on older versions of HAProxy.
    stats admin if TRUE 
```

不知道我昨天怎么没有注意到这一点，但是看到 maxconn 设置为 2000 ......所以这可能是我的问题之一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:32:35.240

有两种不同的 maxconn 设置。一个用于前端，另一个用于后端。前端的设置限制了传入的连接，因此即使您的后端可用，它也不会收到请求，因为它在前端排队。一旦请求通过前端，就会发生后端排队。前端受“默认”部分中的 maxconn 设置的影响，因此我会将其增加到 4000，例如，因为后端应该能够处理它。

请注意 maxconn 不限制每秒请求数，而是限制同时连接数。您可能有一些 HTTP 保持活动请求处于活动状态，这可能会极大地限制可用吞吐量。

# python - 用于网络设备的 python Web 服务

> ID：11870040
> 
> 赞同：1
> 
> 时间：2012-08-08T17:35:20.647
> 
> 标签：python

由于在 python 中编写 Web 服务有很多选择，我有点困惑。我开发了一个网络设备，它是关于私有 VLAN 的。

我想通过 HTTPS 添加经过身份验证的 Web 服务。

普通用户不会访问它。它只会被其他系统访问，以寻找一些网络信息。也许稍后我会构建一个将使用它的 ajax Web 客户端。

有无穷无尽的 python 选项。我不是网络程序员，也没有时间成为其中的一员。

我所需要的只是每个都易于学习和实现并满足以下要求的东西：

1.  简单易学。我只需要通过经过身份验证的 Web 服务公开一些 sqlite 表/视图/查询。
2.  HTTPS 支持
3.  基本身份验证，我在其中实现身份验证脚本。

有什么建议么？

操作系统是 OpenBSD。

谢谢，丹

# javascript - 提交表格和处理

> ID：11870042
> 
> 赞同：0
> 
> 时间：2012-08-08T17:35:44.757
> 
> 标签：javascript, dom-events, submit

我需要能够为多个表单提供一个提交按钮。为了简单起见，我只从我的编码中取了两种形式。每个表格都有自己唯一的 ID，但每个表格都非常相似，除了一些差异。我的问题是只有第一个表单提交成功。我意识到原因是我的输入字段在每个表单中都具有相同的名称，因此它目前无法识别重复的输入字段。有没有办法即使输入字段相同也可以成功提交每个字段，我希望在帮助下我能够提交'input_1'值并将其处理为'form1：input_1'和'form2：input_1 ' 分别。非常感谢您提前

```
 <body><form name="form1">
     <input type="hidden" name="formID" value="form2"/>
     <input type="hidden" name="redirect_to" value=""/>
     <INPUT TYPE=TEXT NAME="input_1" SIZE=10 />
     <INPUT TYPE=TEXT NAME="input_A" SIZE=15>/<INPUT TYPE=TEXT NAME="input_C"style="width: 1em" maxlength="1"><sup>s</sup>

     <INPUT TYPE=TEXT NAME="input_B" SIZE=10 />
     <INPUT TYPE="button" VALUE="+" name="SubtractButton" onkeydown="CalculateIMSUB(this.form)">
     <INPUT TYPE=TEXT NAME="Answer" SIZE=12>
     <input type="hidden" name="val" value="298" />
     <INPUT TYPE=TEXT NAME="Answer_2" SIZE=4></form>

     <form name="form2">
     <input type="hidden" name="formID" value="form2"/>
     <input type="hidden" name="redirect_to" value=""/>
     <INPUT TYPE=TEXT NAME="input_1" SIZE=10 />
     <INPUT TYPE=TEXT NAME="input_A" SIZE=15>/<INPUT TYPE=TEXT NAME="input_C"style="width: 1em" maxlength="1"><sup>s</sup>

     <INPUT TYPE=TEXT NAME="input_B" SIZE=10 />
     <INPUT TYPE="button" VALUE="+" name="SubtractButton" onkeydown="CalculateIMSUB(this.form)">
     <INPUT TYPE=TEXT NAME="Answer" SIZE=12>
     <input type="hidden" name="val" value="298" />
     <INPUT TYPE=TEXT NAME="Answer_2" SIZE=4></form>
     <input type="submit" name="Submit" id="button" value="Submit" onClick="submitAllDocumentForms()"></body> 
```

Javascript代码：

```
 <script language="javascript" type="text/javascript">
    /* Collect all forms in document to one and post it */
    function submitAllDocumentForms() {
    var arrDocForms = document.getElementsByTagName('form');
    var formCollector = document.createElement("form");
    with(formCollector)
    {
    method = "post";
    action = "process.php";
    name = "formCollector";
    id = "formCollector";
    }
    for(var ix=0;ix<arrDocForms.length;ix++) {
    appendFormVals2Form(arrDocForms[ix], formCollector);
    }
    document.body.appendChild(formCollector);
    formCollector.submit();

    }
    /* Function: add all elements from ``frmCollectFrom´´ and append them to ``frmCollector´´ before returning ``frmCollector´´*/
    function appendFormVals2Form(frmCollectFrom, frmCollector) {
    var frm = frmCollectFrom.elements; 
    var nElems = frm.length;
    for(var ix = nElems - 1; ix >= 0 ; ix--)
    frmCollector.appendChild(frm[ix]);
    return frmCollector;
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:35:41.773

name 不是表单标签的标准属性。我建议您使用 id 来识别您的表单。

我尚未测试以下更改，但我希望它们能够工作：

```
function appendFormVals2Form(frmCollectFrom, frmCollector) {
    var currentEl;
    var frm = frmCollectFrom.elements; 
    var nElems = frm.length;
    for(var ix = nElems - 1; ix >= 0 ; ix--) {
        currentEl = frm[ix];
        currentEl.name = frmCollectFrom.name + ':' + currentEl.name;
        frmCollector.appendChild(currentEl);
    }
    return frmCollector;
} 
```

# sql - 约束 sql 表上的表条目

> ID：11870043
> 
> 赞同：0
> 
> 时间：2012-08-08T17:35:51.607
> 
> 标签：sql, sql-server-2008, database-design, constraints

我有 3 个相关表，如下图所示。

![数据库图](../Images/90eec078b7315e96b736b1896442b64b.png)

每个人在 User 表中都有一个条目和一个 UserRole。一些用户是订阅者。

我想限制 Subscribers 表，使其只能包含角色 IsSusbcriber 但在用户级别保留 UserRole 的用户。可能吗？

对不起，表之间的当前关系，它们代表了此刻那里的东西，而不是必然需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:07:27.733

我认为您可以删除这些`IsSubscriber`列并添加一个`UserSubscriberRoles`表，该表将完全包含先前设置该`IsSubscriber`列的那些角色。

```
CREATE UserSubscriberRoles
  ( UserRoleId PRIMARY KEY
  , FOREIGN KEY (UserRoleId)
      REFERENCES UserRoles (UserRoleId) 
  ) ; 
```

然后将`Subscribers`表中的 FK 更改为：

```
 FOREIGN KEY (UserId, UserRoleId)
     REFERENCES User (UserId, UserRoleId) 
   FOREIGN KEY (UserRoleId)
     REFERENCES UserSubscriberRoles (UserRoleId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:49:42.957

在表中没有 RoleId 的情况下，限制这一点的唯一方法是通过触发器（触发器通常是一个糟糕的设计选择），或者通过 SQL 代理作业定期从不符合条件的订阅者中删除人员。

使用订阅服务器中的 RoleID，您可以添加将其限制为特定值的检查约束。

使用不同的设计和/或在应用程序代码中确实可以更好地执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:47:55.897

> 可能吗？

理论上，是的；您可以使用 SQL 断言。有关示例，请参阅[此 StackOverflow 答案。](https://stackoverflow.com/a/4920994/978917)

但是，在实践中，没有主要的 DBMS 支持 SQL 断言，并且您所描述的内容不能实现为外键约束，因此我认为您唯一的选择是编写一个评估此约束的[触发器](http://en.wikipedia.org/wiki/Database_trigger)，如果​​不满足则引发异常.

# javascript - 如何让 ul-tree 项目在 sortable() 拖动时保持静止？

> ID：11870045
> 
> 赞同：0
> 
> 时间：2012-08-08T17:35:56.480
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我正在使用 jQuery sortable() 构建一个基于 jQuery 的树形菜单。这是我当前的代码：http: [//jsfiddle.net/8KDur/](http://jsfiddle.net/8KDur/)。

如您所见，可排序功能工作正常。

**但是**，将树项目拖到其他树项目上时的 ui 行为也不能按我希望的方式工作。我希望 li-items 保持静止，并且它们之间的边界在拖动时突出显示。指示它将被放置在哪些项目之间。

那么，如何让项目在拖动时保持静止？

我宁愿不为此使用插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:48:25.243

您可以使用该`placeholder`选项指定一个 CSS 类以用作项目之间的边框。然后，设置`helper`为`'clone'`which 将创建您正在拖动的列表项的副本。默认情况下，jQuery UI 将使用 in-line 隐藏帮助程序`display: none`，因此如果您希望列表项保持可见和静态，可能需要覆盖它。

[http://jsfiddle.net/8KDur/33/](http://jsfiddle.net/8KDur/33/)

# linux - 收到错误消息：指定输出文件时，非链接阶段需要单个输入文件

> ID：11870051
> 
> 赞同：2
> 
> 时间：2012-08-08T17:36:16.727
> 
> 标签：linux, cuda, nsight

还得到： make: *** [main.o] 错误 255

我对此真的很陌生，我正在使用带有 cuda 工具包 5 的 nsight for linux

我在 .bashrc 中添加了这两行 export PATH=/usr/local/cuda/bin:$PATH export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH 因为在 .profile 文件中它似乎没有效果，并且没有 .bash_profile 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:08:54.377

不幸的是，Nsight Eclipse Edition 5.0 预览版中存在许多会导致此错误的问题（我们修复了我们发现的所有此类错误）。

请提供更多信息：

1.  您的工作区路径、项目名称和/或源文件路径是否有空格？
2.  您是否在简单的 bitreverse 应用程序中看到相同的问题（您可以使用“CUDA Runtime Project”模板从 New CUDA C/C++ Project 向导创建 bitreverse 项目？
3.  您是否有扩展名为 cu 的源文件？
4.  你可以粘贴你的make输出吗？

请随时通过发送至 cudatools@nvidia.com 直接联系 CUDA 工具团队

# asp.net-mvc - 为在 SQL 数据库中定义为 Int 的列创建下拉列表 - jqGrid ASP.NET MVC

> ID：11870052
> 
> 赞同：1
> 
> 时间：2012-08-08T17:36:24.327
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-4, jqgrid, jqgrid-asp.net

我`Database First`在 ASP.NET MVC 中使用实体框架方法。

我从现有数据库创建了模型，一切正常。

我正在使用并尝试为在数据库`jqGrid`中定义为的列创建下拉列表。`Int`

在数据库中，值是 0 或 1，因此在下拉列表中，我必须根据它是 0 还是 1 显示两个值，例如“导入”或“导出”。

我可以在 jqGrid 中处理这种情况吗？

如果您有任何建议，请发表！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:04:08.523

我认为您可以在 colModal 本身中处理这件事。有一个选项 editOption 您可以与您一起指定 colModal 并根据您从数据中获得的值，您可以指定该列的 text 属性

在这种情况下，网格的数据应包含要在列 myname 中设置的“One”或“Two”。

现在，有了这个设置

```
<script>
jQuery("#grid_id").jqGrid({
...
   colModel : [ {name:'myname', edittype:'select', formatter:'select', editoptions:{value:"1:One;2:Two"}} ... ]
...
});
</script> 
```

数据应包含键（“1”或“2”），但值（“One”或“Two”）将显示在网格中。

检查此链接以获得更多帮助。你会得到你的答案。因为你没有发布你的代码（至少你应该为你的那个特定的专栏这样做）我不能说你正在以同样的方式实现。

# ios - 使用 UIImages 的 CAKeyframeAnimation 不起作用

> ID：11870054
> 
> 赞同：4
> 
> 时间：2012-08-08T17:36:27.947
> 
> 标签：ios, core-animation, cakeyframeanimation

我正在这样设置动画：

```
self.testAnimation = [CAKeyframeAnimation animationWithKeyPath:@"TestAnimation"];

[self.animationImagesAsCGImages addObject:( id )[UIImage imageNamed:@"c1.png"].CGImage];
[self.animationImagesAsCGImages addObject:( id )[UIImage imageNamed:@"c2.png"].CGImage];
[self.animationImagesAsCGImages addObject:( id )[UIImage imageNamed:@"c3.png"].CGImage];
[self.animationImagesAsCGImages addObject:( id )[UIImage imageNamed:@"c4.png"].CGImage];

[self.animationKeyframeTimings addObject:[NSNumber numberWithFloat:0.0f]];
[self.animationKeyframeTimings addObject:[NSNumber numberWithFloat:0.25f]];
[self.animationKeyframeTimings addObject:[NSNumber numberWithFloat:0.5f]];
[self.animationKeyframeTimings addObject:[NSNumber numberWithFloat:0.75f]];

self.testAnimation.values          = self.animationImagesAsCGImages;
self.testAnimation.keyTimes        = self.animationKeyframeTimings;

self.testAnimation.repeatCount     = HUGE_VALF;
self.testAnimation.autoreverses    = NO;
self.testAnimation.calculationMode = kCAAnimationDiscrete;
self.testAnimation.duration        = 2.0f; 
```

然后这样称呼它：

```
[self.layer addAnimation:self.testAnimation forKey:@"TestAnimation"]; 
```

但什么都没有显示。

我看过其他几篇关于 kCAAnimationDiscrete 的 Stack 帖子需要第一个时间为 0.0f，如您所见。

请指教？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T18:51:16.260

**tl;dr：**将动画关键路径更改为`contents`，如下所示：

```
self.testAnimation = [CAKeyframeAnimation animationWithKeyPath:@"contents"]; 
```

* * *

## 为什么它不起作用

当您编写时，`[CAKeyframeAnimation animationWithKeyPath:@"TestAnimation"];`您正在尝试为`TestAnimation`不存在的图层上的属性设置动画。因此，对该属性的任何更改都没有视觉效果。

### `animationWithKeyPath:`对比`addAnimation:forKey:`

`keyPath`忽略创建动画和将*动画**添加*`key`到图层之间的区别并不少见。

 *创建新动画时，您可以将 keyPath 指定给应该动画的属性。如果您在没有 keyPath 的情况下创建动画，则可以使用动画上的 keyPath 属性对其进行设置。

向图层添加动画时，您可以指定一个关键点。此键仅用于使用 CALayer 上的 animationForKey: 方法访问动画。

## 如何使它工作

由于您正在将图像添加到您的值中，因此我假设您想要在图像之间进行动画处理，在这种情况下，您应该使用该`contents`属性作为关键路径。

从内容属性的文档中：

> 提供图层内容的对象。动画。
> 
> `...`
> 
> 您可以将此属性设置为 a`CGImageRef`以显示图像的内容来代替图层的内容。*

# svg - 偶数填充一组形状

> ID：11870055
> 
> 赞同：1
> 
> 时间：2012-08-08T17:36:30.050
> 
> 标签：svg

我如何在#g3 上得到一个偶数填充：

```
<defs>
      <ellipse id="g1" cx="100" cy="100" rx="75" ry="40" fill="none" />
</defs>

<g id="g3" stroke="black" stroke-width="2">
  <g id="g2">
    <use xlink:href="#g1" />
    <use xlink:href="#g1" transform="rotate(30 100 100)"/>
  </g>
  <use xlink:href="#g2" transform="rotate(60 100 100)"/>
  <use xlink:href="#g2" transform="rotate(120 100 100)"/>
</g> 
```

所以iow，它只是一系列旋转的椭圆，但我希望交叉区域偶数填充：

![在此处输入图像描述](../Images/31480299a1f5bed3d70b3fb0bfffd304.png) ![在此处输入图像描述](../Images/d3cd02b22af3e923a88c0ac0bfba142c.png)

只是将 fill-rule = "evenodd" 添加到 #g3 是不行的。对不起，如果这太初级了。我意识到在 .js 中可能有一种方法可以做到这一点，但想知道是否可以使用直接 svg 来完成。

* * *

例如，有没有一种方法可以将#g3 本身定义为某种意义上的新路径，以便可以将 evenodd 完全应用于它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:41:33.107

我想基本上只是在 .js 的循环中的一个路径中绘制一系列弧线 - 我猜这样它的所有路径和偶数填充类型应该可以工作。没关系。

# python - pandas：堆叠应用生成的 DataFrame

> ID：11870058
> 
> 赞同：0
> 
> 时间：2012-08-08T17:36:35.970
> 
> 标签：python, pandas, dataframe

使用 a `DataFrame`，您可以`Series`在使用`DataFrame.apply`生成`DataFrame`带有新列的新列时输出

```
 a         b         c
0 -0.119342  0.286710  0.266750
1 -1.514301  0.556106 -2.743888
2 -0.156469 -0.352915 -1.963398
3  1.165479  1.364303  0.648178
4  1.541738  0.714239 -1.468896

def f(x):
    return pandas.Series([ x['a']+x['b'], x['b'] + x['c'], x['a'] + x['c'] ], index=['ab', 'bc', 'ac'])

In [52]: df.apply(f, axis=1)
Out[52]: 
         ab        bc        ac
0  0.167368  0.553460  0.147408
1 -0.958195 -2.187782 -4.258188
2 -0.509384 -2.316313 -2.119867
3  2.529782  2.012481  1.813658
4  2.255977 -0.754657  0.072842 
```

尝试输出新`DataFrame`对象而不是`Series`对象会导致堆叠对象而不是创建内聚`DataFrame`

```
In [53]: def f(x):
    return pandas.DataFrame([[ x['a']+x['b'], x['b'] + x['c'], x['a'] + x['c'] ]], columns=['ab', 'bc', 'ac'])
   ....: 

In [54]: df.apply(f, axis=1)
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Out[54]: 
0             ab       bc        ac
0  0.167368  0.553
1             ab        bc        ac
0 -0.958195 -2.18
2             ab        bc        ac
0 -0.509384 -2.31
3             ab        bc        ac
0  2.529782  2.01
4             ab        bc        ac
0  2.255977 -0.75 
```

有没有办法输出`DataFrame`s （或多个`Series`），可以像输出单个`Series`对象一样堆叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:51:28.660

**除了repr**中的警告（我为此创建了一个问题：[https](https://github.com/pydata/pandas/issues/1749) ://github.com/pydata/pandas/issues/1749 ）之外，您尝试做的似乎工作正常

```
In [57]: df
Out[57]:
          a         b         c
0 -0.119342  0.286710  0.266750
1 -1.514301  0.556106 -2.743888
2 -0.156469 -0.352915 -1.963398
3  1.165479  1.364303  0.648178
4  1.541738  0.714239 -1.468896

In [58]: s = df.apply(f, axis=1)

In [59]: type(s)
Out[59]: pandas.core.series.Series

In [60]: type(s[0])
Out[60]: pandas.core.frame.DataFrame

In [61]: s[0]
Out[61]:
         ab       bc        ac
0  0.167368  0.55346  0.147408

In [62]: s
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Exception ValueError: ValueError('Cannot call bool() on DataFrame.',) in 'util._checknull' ignored
Out[62]:
0             ab       bc        ac
0  0.167368  0.553
1             ab        bc        ac
0 -0.958195 -2.18
2             ab        bc        ac
0 -0.509384 -2.31
3             ab        bc        ac
0  2.529782  2.01
4             ab        bc        ac
0  2.255977 -0.75 
```

# c# - 在内部的 SQL Compact 查询和 MVC3 项目中检查 null 时遇到问题

> ID：11870061
> 
> 赞同：1
> 
> 时间：2012-08-08T17:36:58.427
> 
> 标签：c#, sql, asp.net-mvc-3, linq

我正在研究[Pro ASP.NET MVC 3 Framework](https://rads.stackoverflow.com/amzn/click/com/1430234040)中的 SportsStore 示例。在第 8 章的开头，我被指示编辑我的 ProductController 类，添加 .Where 行，如下所示：

```
 public ViewResult List(string category, int page = 1)
    {
        ProductsListViewModel viewModel = new ProductsListViewModel
        {
            Products = repository.Products
                .Where(p => category == null || p.Category == category)
                .OrderBy(p => p.ProductID)
                .Skip((page - 1) * PageSize)
                .Take(PageSize),
            PagingInfo = new PagingInfo
            {
                CurrentPage = page,
                ItemsPerPage = PageSize,
                TotalItems = repository.Products.Count()
            },
            CurrentCategory = category
        };
        return View(viewModel);
    } 
```

当我运行代码时，我收到以下错误：

```
Exception Details: System.Data.SqlServerCe.SqlCeException: The specified argument
value for the function is not valid. [ Argument # = 1,Name of
function(if known) = isnull ] 
```

在以下代码块的 foreach 行上：

```
@model SportsStore.WebUI.Models.ProductsListViewModel

@{
    ViewBag.Title = "Products";
}

@foreach (var p in Model.Products)
{
    Html.RenderPartial("ProductSummary", p);
}
<div class="pager">
    @Html.PageLinks(Model.PagingInfo, x => Url.Action("List", new {page = x}))
</div> 
```

我已经搜索了很多，并在多个地方发现了很多对[这个 StackOverflow 帖子的引用，但是将查询更改为](https://stackoverflow.com/questions/9188641/whats-is-wrong-with-this-linq-query)

```
.Where(p => category == null ? true : p.Category == category) 
```

没有效果。

一些基本信息：

*   这是一个使用 Razer 视图引擎和 C# 的 MVC3 项目。
*   我的 SQL Compact 4.0 数据库中的所有项目都有一个类别。
*   注释掉 category == null 位会使代码运行得很好。
*   我上面给出的第二个版本是他们网站上可下载的源代码。

它确实可以在没有空值检查的情况下工作，但我担心如果我继续前进，我以后可能会遇到问题。有人对我如何解决它有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:07:36.020

我认为问题在于 LINQ 查询被推迟到它到达 SQL 服务器。我的猜测是 SQL compact 服务器在检查`category == null`.

在调用 Where 方法之前尝试使用非延迟 LINQ 方法。就像是

```
Products = repository.Products.ToList()
    .Where(p => category == null || p.Category == category)
    .OrderBy(p => p.ProductID)
    .Skip((page - 1) * PageSize)
    .Take(PageSize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:50:58.473

同样的问题，但标记的答案对我不起作用，因为我的 WHERE 子句位于我不想在结果中返回的相关表上。此外，返回所有内容然后执行 .Where() 效率非常低。

这是一个更好的方法：

SQL CE不能处理参数so，so标准构造

```
.Where(p => p.Category == category || category == null) 
```

失败，因为 LINQ 需要使用参数在查询中进行值比较。但是传递这样的东西是完全有效的 SQL：

```
.Where(p => p.Category == category || true) 
```

因为“真实”总是……嗯……真实。因此，如果您在 LINQ 语句之前将变量解析为布尔值，然后将该变量传递给 SQL CE，那么您的状态就很好：

```
bool bCategory = (string.IsNullOrEmpty(category)) ? true : false;

Products = repository.Products.Where(p => p.Category == category || bCategory); 
```

这允许您在返回数据之前对查询中的所有过滤进行操作，并且您可以根据需要在尽可能多的条件上使用此技巧，而不会变得混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:49:34.637

不太确定它是否给出相同的输出，我认为它应该看看这个......

```
 Products = repository.Products
            .Where(p => p.Category == null || p.Category == category)
            .OrderBy(p => p.ProductID)
            .Skip((page - 1) * PageSize)
            .Take(PageSize), 
```

# regex - Vb.net Regex - 从字符串中删除 html 标签

> ID：11870062
> 
> 赞同：4
> 
> 时间：2012-08-08T17:37:00.670
> 
> 标签：regex, vb.net, winforms

我的字符串是：

```
<span class="name">name1</span><br> <span class="name">name2</span> 
```

我想删除 :`"<span ...>"` 并 `"</span>"`从我的字符串中，

我可以使用简单的替换功能，但正则表达式更好，因为运算符。

我试过了：

```
Regex.Replace(elm.InnerHtml, "<(.|\n)+?>", String.Empty) 
```

但：

```
<(.|\n)+?> 
```

删除所有 html 标签，我只需要删除 span。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:42:33.120

`<span.+?</span>`用空字符串替换这个正则表达式

```
Regex.Replace(elm.InnerHtml, @"<span.+?</span>", String.Empty) 
```

如果你想在标签之间保存文本使用这个`</?span.*?>`

```
Regex.Replace(elm.InnerHtml, @"</?span.*?>", String.Empty) 
```

# android - 在 Android 上更改标签颜色部分有效

> ID：11870063
> 
> 赞同：0
> 
> 时间：2012-08-08T17:37:05.447
> 
> 标签：android, tabs

我一直在尝试更改我的 android 应用程序的标签颜色。但我无法完成它。我已经复制了所有需要的图像并在 Photoshop 中重新绘制它们。但这就是我得到的全部。

![在此处输入图像描述](../Images/aa58ab3b7f8410a5adc7dcf2dc8efccb.png)

我首先做的是`tab_indicator.xml`从`drawable`文件夹中复制`android-sdk\platforms\android-8\data\res\drawable`.

然后我将该xml文件中引用的所有图像复制到我自己的`drawable-hdpi`文件夹中。`android-sdk\platforms\android-8\data\res\drawable-hdpi`我从文件夹中复制了这些图像。

我像这样重新绘制了`tab_unselected.png`文件：

原始文件（tab_unselected.9.png）： ![在此处输入图像描述](../Images/d295159ac88cdd14a0e9169ddc35d55a.png)

新文件： ![在此处输入图像描述](../Images/2aa814a97832374fa4d38825faf80712.png)

但正如您在顶部屏幕截图中看到的那样，只有边框是彩色的。未选中时，选项卡本身仅保持黑色。

**在不**使用任何 Java 代码的情况下，我需要做些什么来设置该选项卡的样式。我不介意添加任何 XML 文件或编辑 .png 文件。

* * *

顺便说一句，我`TabHost`在我的文件夹中添加了一个自定义 xml 文件`layout`并添加`android:background="@drawable/tab_indicator"`到`TabWidget`标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:39:37.730

如果您只想更改标签颜色，则不需要使用 png 文件。看看这里，希望对你有帮助[http://joshclemm.com/blog/?p=136](http://joshclemm.com/blog/?p=136)

# c# - 为嵌套属性实现 INotifyPropertyChanged

> ID：11870069
> 
> 赞同：19
> 
> 时间：2012-08-08T17:37:21.997
> 
> 标签：c#, wpf, mvvm, binding, inotifypropertychanged

我有一个 Person 类：

```
public class Person : INotifyPropertyChanged
{
     private string _name;
     public string Name{
     get { return _name; }
     set {
           if ( _name != value ) {
             _name = value;
             OnPropertyChanged( "Name" );
           }
     }

     private Address _primaryAddress;
     public Address PrimaryAddress {
     get { return _primaryAddress; }
     set {
           if ( _primaryAddress != value ) {
             _primaryAddress = value;
             OnPropertyChanged( "PrimaryAddress" );
           }
     }

     //OnPropertyChanged code goes here
} 
```

我有一个地址类：

```
public class Address : INotifyPropertyChanged
{
     private string _streetone;
     public string StreetOne{
     get { return _streetone; }
     set {
           if ( _streetone != value ) {
             _streetone = value;
             OnPropertyChanged( "StreetOne" );
           }
     }

     //Other fields here

     //OnPropertyChanged code goes here
} 
```

我有一个视图模型：

```
public class MyViewModel
{
   //constructor and other stuff here

     private Person _person;
     public Person Person{
     get { return _person; }
     set {
           if ( _person != value ) {
             _person = value;
             OnPropertyChanged( "Person" );
           }
     }

} 
```

我有一个视图，其中包含以下几行：

```
<TextBox  Text="{Binding Person.Name, Mode=TwoWay,   
    UpdateSourceTrigger=PropertyChanged />

<TextBox  Text="{Binding Person.Address.StreetOne, Mode=TwoWay,   
    UpdateSourceTrigger=PropertyChanged /> 
```

当视图加载时，这两个值都显示在文本框中。

对第一个文本框的更改将`OnPropertyChanged( "Person" )`在 MyViewModel 中触发。伟大的。

对第二个文本框的更改`("Person.Address.StreetOne")`不会`OnPropertyChanged( "Person" )`在 MyViewModel 中触发。这意味着它不调用 Person 对象的 SET 方法。不是很好。有趣的是，Address 类中 StreetOne 的 SET 方法被调用了。

如何获取 ViewModel 中 Person 对象的 SET 方法，以便在`Person.Address.StreetOne`更改时调用？？？

我是否需要展平我的数据，以便 SteetOne 在 Person 而不是 Address？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-03-11T17:04:10.827

虽然向 ViewModel 添加“传递”属性是一个很好的解决方案，但它很快就会变得站不住脚。标准的替代方法是传播更改，如下所示：

```
 public Address PrimaryAddress {
     get => _primaryAddress;
     set {
           if ( _primaryAddress != value ) 
           {
             //Clean-up old event handler:
             if(_primaryAddress != null)
               _primaryAddress.PropertyChanged -= AddressChanged;

             _primaryAddress = value;

             if (_primaryAddress != null)
               _primaryAddress.PropertyChanged += AddressChanged;

             OnPropertyChanged( "PrimaryAddress" );
           }

           void AddressChanged(object sender, PropertyChangedEventArgs args) 
               => OnPropertyChanged("PrimaryAddress");
        }
  } 
```

现在更改通知从地址传播到人员。

**编辑：**将处理程序移动到 c# 7 本地函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T05:21:03.057

如果你想调用 viewmodel SET 你可以创建一个街道属性

```
public class MyViewModel
{
  //constructor and other stuff here
  public string Street{
    get { return this.Person.PrimaryAddress.StreetOne; }
    set {
       if ( this.Person.PrimaryAddress.StreetOne!= value ) {
         this.Person.PrimaryAddress.StreetOne = value;
         OnPropertyChanged( "Street" );
       }
   }

 } 
```

xml

```
<TextBox  Text="{Binding Street, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged /> 
```

但这种解决方案有其缺点。我在我的项目中选择 Reeds 答案

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-08T17:43:52.247

> 当 Person.Address.StreetOne 更改时，如何获取 ViewModel 中 Person 对象的 SET 方法？

你为什么要这样做？它不应该是必需的 - 您只需要`StreetOne`触发属性更改事件。

> 我是否需要展平我的数据，以便 SteetOne 在 Person 而不是 Address？

如果您想真正触发它，则不需要将其展平（尽管这是一个选项）。您可以在您的 Person 类中订阅`Address`'`PropertyChanged`事件，并在“地址”`Person`更改时引发事件。然而，这不应该是必要的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-10T11:58:23.377

由于我无法找到现成的解决方案，因此我根据 Pieters（和 Marks）的建议（谢谢！）进行了自定义实现。

使用这些类，您将收到有关深层对象树中任何更改的通知，这适用于任何`INotifyPropertyChanged`实现类型和`INotifyCollectionChanged`* 实现集合（显然，我正在使用`ObservableCollection`它）。

我希望这是一个非常干净和优雅的解决方案，虽然它没有经过全面测试并且还有改进的空间。它非常易于使用，只需创建一个`ChangeListener`使用它的静态`Create`方法的实例并传递您的`INotifyPropertyChanged`：

```
var listener = ChangeListener.Create(myViewModel);
listener.PropertyChanged += 
    new PropertyChangedEventHandler(listener_PropertyChanged); 
```

`PropertyChangedEventArgs`提供一个将`PropertyName`始终是您的对象的完整“路径”。例如，如果您更改 Persons 的“BestFriend”名称，`PropertyName`则将为“BestFriend.Name”，如果`BestFriend`有一组儿童并且您更改其年龄，则该值将为“BestFriend.Children[].Age”等等在。不要忘记`Dispose`当您的对象被销毁时，它将（希望）完全取消订阅所有事件侦听器。

它在 .NET（在 4 中测试）和 Silverlight（在 4 中测试）编译。因为代码分为三个类，我已将代码发布到**[gist 705450](https://gist.github.com/705450)**，您可以在其中获取所有内容：[https](https://gist.github.com/705450) ://gist.github.com/705450 **

*) 代码工作的一个原因是它`ObservableCollection`也实现了`INotifyPropertyChanged`，否则它不会按预期工作，这是一个已知的警告

**) 免费使用，在[MIT 许可下发布](http://creativecommons.org/licenses/MIT/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T20:53:14.173

您的属性更改通知中有拼写错误：

`OnPropertyChanged( "SteetOne" );`

应该

`OnPropertyChanged( "StreetOne" );`

# xslt - XSLT 删除不需要的元素

> ID：11870070
> 
> 赞同：5
> 
> 时间：2012-08-08T17:37:22.630
> 
> 标签：xslt, xml-nil

我有 XML

```
<getInquiryAboutListReturn xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <inquiryAbouts>
        <inquiryAbout>
            <code>Code</code>
            <nameKk>Something</nameKk>
            <nameRu>Something</nameRu>
            <documents xsi:nil="true"/>
        </inquiryAbout>
    </inquiryAbouts>
</getInquiryAboutListReturn> 
```

我想用 XSLT 处理它以复制所有 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes" />
    <xsl:template match="/">
        <xsl:copy-of select="//getInquiryAboutListReturn/inquiryAbouts"/>
    </xsl:template>
</xsl:stylesheet> 
```

**`<documents xsi:nil="true"/>`在没有或没有 xsi:nil="true" 的情况下如何复制所有 XML ？**

所需的输出 XML

```
<getInquiryAboutListReturn xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <inquiryAbouts>
        <inquiryAbout>
            <code>Code</code>
            <nameKk>Something</nameKk>
            <nameRu>Something</nameRu>
        </inquiryAbout>
    </inquiryAbouts>
</getInquiryAboutListReturn> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:14:42.297

**这个简单的 XSLT：**

```
<?xml version="1.0"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  version="1.0">

  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- TEMPLATE #1 -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- TEMPLATE #2 -->
  <xsl:template match="*[@xsi:nil = 'true']" />

</xsl:stylesheet> 
```

**...当应用于 OP 的源 XML 时：**

```
<?xml version="1.0"?>
<getInquiryAboutListReturn xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <inquiryAbouts>
    <inquiryAbout>
      <code>Code</code>
      <nameKk>Something</nameKk>
      <nameRu>Something</nameRu>
      <documents xsi:nil="true"/>
    </inquiryAbout>
  </inquiryAbouts>
</getInquiryAboutListReturn> 
```

**...产生预期的结果 XML：**

```
<?xml version="1.0"?>
<getInquiryAboutListReturn xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <inquiryAbouts>
    <inquiryAbout>
      <code>Code</code>
      <nameKk>Something</nameKk>
      <nameRu>Something</nameRu>
    </inquiryAbout>
  </inquiryAbouts>
</getInquiryAboutListReturn> 
```

**解释：**

1.  第一个模板——[身份模板](http://dev.ektron.com/kb_article.aspx?id=492)——按原样从源 XML 文档中复制所有节点和属性。
2.  第二个模板匹配所有具有指定命名空间属性等于“true”的元素，有效地删除了这些元素。

# css - IE 中不显示背景属性

> ID：11870072
> 
> 赞同：0
> 
> 时间：2012-08-08T17:37:27.877
> 
> 标签：css, internet-explorer-8, background, internet-explorer-7

我有一个高度和宽度的 div，它在样式表中分配了一个背景图像。它在 Firefox/Chrome 中运行良好，但在 IE8 及以下图像中无法显示。在开发人员中，背景属性甚至不会显示为一种样式。我可以添加背景颜色，这确实有效。有谁知道这可能是为什么？

作为参考，该属性看起来像这样：

```
 background: url("imgpath.png") no-repeat scroll 0 0 transparent;
 width:20px;
 height:20px;
 position:relative 
```

编辑：HTML 只是一个更大的包装器中的一个 div。包装器中以相同方式定义的其他图像工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:06:33.090

我会公然假设那`imgpath.png`是 CMYK。IE8 只支持 RGB 图像。

尝试使用此[CMYK 转换器](http://www.cmykconverter.com/)将其从 CMYK 转换为 RGB 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:44:29.067

是的，我想我知道它可能是什么。尝试将整个图像路径放在那里，包括协议和域，就像这样：`background: url("http://example.com/imgpath/image.png") no-repeat scroll 0 0 transparent;`

并告诉我它是否有效。

# python - Scrapy 导出数据中的正则表达式和字符代码

> ID：11870075
> 
> 赞同：1
> 
> 时间：2012-08-08T17:37:34.197
> 
> 标签：python, regex, unicode, web-scraping, scrapy

我正在尝试为某些特定的 HTML 代码抓取网站并将数据导出到 csv 文件中。导出的代码充满了正则表达式和字符代码，每个单元格都包含在['']中。这是一些导出数据的示例。

```
 [u'<td colspan="2"><b><big>Universal  Universal<br>3 \xbd" ID. to 4"OD. Adapter  T409<br><br></big></b><table cellpadding="0" cellspacing="0" style="width: 300px; float:\nright; margin-right: 5px; border: 0px white solid; text-align:\ncenter;"><tr><td style="text-align: center;"><a href="products/images/med/UA1007.jpg" rel="thumbnail" title="UA1007"><img src="products/images/thumbs/UA1007.jpg" width="300px" align="right" style="border: 5px outset #333333;"></a></td></tr><tr><td style="text-align: center;"><table cellpadding="0" cellspacing="0" style="border: 0px solid white; width:\n300px; margin-left: auto; margin-right: auto;"><tr><td style="width: 33%; text-align: center;"></td><td style="width: 34%; text-align:  center;"></td><td style="width: 33%; text-align:  center;"></td></tr><tr><td></td><td></td><td></td></tr></table></td></tr></table>UA1007<br>\n3 1/2" ID to 4" OD, 7" Length <br>\nFits all pickup models<br><br>\nNow you can hook-up to your MBRP 4" and 5" hardware no matter what size your system. This adaptor is built from T409 stainless steel.<br><br><table><tr></tr></table></td>'] 
```

这是我用于我的蜘蛛的代码。

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from MBRP.items import MbrpItem

class MBRPSpider(BaseSpider):

      name = "MBRP"
      allowed_domains = ["mbrpautomotive.com"]
      start_urls = [
           "http://www.mbrpautomotive.com/?page=products&part=B1410"
        #* thats just one of the url's I have way more in this list *
      ]

    def parse(self, response):

        hxs = HtmlXPathSelector(response)
        sites = hxs.select('/html')
        items = []
        for site in sites:
            item = MbrpItem()   
            item['desc'] = site.select('//td[@colspan="2"]').extract()
            item['PN'] = site.select('//b/big/a').extract()
            items.append(item)

        return items 
```

这是我在管道中使用的代码。

```
import csv

class MBRPExporter(object):

    def __init__(self):
        self.MBRPCsv = csv.writer(open('output.csv', 'wb'))
        self.MBRPCsv.writerow(['desc', 'PN'])

    def process_item(self, item, spider):
        self.MBRPCsv.writerow([item['desc'], item['PN']])
        return item 
```

我曾尝试使用这样的管道代码，相信 utf-8 中的编码会有所帮助，但这给了我一个错误`exceptions.AttributeError: 'XPathSelectorList' object has no attribute 'encode'`。

```
import csv

class MBRPExporter(object):

    def __init__(self):
        self.MBRPCsv = csv.writer(open('output.csv', 'wb'))
        self.MBRPCsv.writerow(['desc', 'PN'])

    def process_item(self, item, spider):
        self.MBRPCsv.writerow([item['desc'].encode('utf-8'), item['PN'].encode('utf-8')])
        return item 
```

我认为我需要以 utf-8 导出是否正确？如果是这样，我将如何去做？还是有其他方法可以清理导出的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:19:54.670

除非消费者需要，否则您不需要对 csv 输出进行编码。extract() 方法产生一个列表（一个 XPathSelectorList 列表）：

```
site.select('//td[@colspan="2"]').extract() 
```

并且您不能在列表上使用 encode() 。您可以加入您的列表，也可以在退回项目之前只选择第一个：

```
item = MbrpItem()
item['desc'] = ' '.join(site.select('//td[@colspan="2"]').extract())
item['PN'] = join(site.select('//b/big/a').extract()[0])
items.append(item) 
```

或者您可以使用项目加载器：

```
from scrapy.contrib.loader import XPathItemLoader
from scrapy.contrib.loader.processor import Join, TakeFirst

def parse(self, response):
    l = XPathItemLoader(response=response, item=MbrpItem())
    l.add_xpath('desc', '//td[@colspan="2"]', Join(' '))
    l.add_xpath('PN', '//b/big/a', TakeFirst())

    return l.load_item() 
```

# android - Android：如何强制 GridView 宽度为 wrap_content？

> ID：11870077
> 
> 赞同：5
> 
> 时间：2012-08-08T17:37:36.620
> 
> 标签：android

我的 GridView 包含固定宽度的列，具有固定的水平间距。如果没有足够的列来水平填充屏幕，我希望我的 GridView 的宽度能够包裹到它的内容，并在屏幕中垂直居中。

但是，无论我使用多少列，GridView 的宽度都会增长以填满屏幕。所附图像显示了这一点，其中绿色 GridView 水平填充屏幕，尽管只有 3 列并且其宽度设置为“wrap_content”。

```
public class Temp extends Activity
{
    private GridView grid;
    private int columnWidth = 80;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        View view = getLayoutInflater().inflate(R.layout.gridview, null);
        grid = (GridView) view.findViewById(R.id.grid);
        grid.setColumnWidth(columnWidth);
        grid.setAdapter(new GridAdapter());

        setContentView(view);
    }

    class GridAdapter extends BaseAdapter 
    {
        public GridAdapter() 
        {
        }

        public int getCount() 
        {
            return 3;
        }

        public Object getItem(int position) 
        {
            return null;
        }

        public long getItemId(int position) 
        {
            return position;
        }

        public View getView (int position, View convertView, ViewGroup parent) 
        {
            View ret;

            if (convertView == null) 
            {
                ret = new ImageView(Temp.this);
                ret.setLayoutParams(new GridView.LayoutParams(columnWidth, 100));
                ret.setBackgroundColor(Color.WHITE);
            }
            else
            {   
                ret= convertView;
            }

            return ret;
        }
    }
}

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="#FF0000"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <GridView 
        android:id="@+id/grid"
        android:background="#00FF00"
        android:layout_centerInParent="true"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:numColumns="auto_fit"
        android:verticalSpacing="2dip"
        android:horizontalSpacing="2dip"
        android:stretchMode="columnWidth"
        android:gravity="center">
    </GridView>
</RelativeLayout> 
```

![在此处输入图像描述](../Images/aa51f513feacc9d12c8c16cda6765dbd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:29:57.633

只需在 GridView 的左右添加两个空视图，权重 = 1，并为 GridView 分配 0.5 权重。例如。

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:gravity="center"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <View
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <GridView
        android:id="@+id/myGridView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:numColumns="2"
        android:scrollbars="none"
        android:verticalSpacing="10dp" >
    </GridView>

    <View
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:07:48.607

`GridView`至少可以说，这种东西非常烦人。在您的情况下，问题在于这句话`auto_fit`本质上是在告诉 GridView 不幸的是始终水平放置它。您可以尝试`ImageView`将行中的个人 s 居中。但这需要您更改设置方式。与其让列自动适应，不如让每行只有 1 个项目，但膨胀一个具有水平方向的 LinearLayout。然后将线性布局与每行中的 ImageViews 居中。希望这能提供一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T01:27:16.283

我知道有一个老问题，但这是答案：

```
public class GridViewEx extends GridView {

//private int mRequestedNumColumns = 0;

public GridViewEx(Context context) {
    super(context);
}

public GridViewEx(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public GridViewEx(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int numcol=getNumColumns();
    int numitems=getAdapter().getCount();

    if(numitems<numcol){
        int width = (numitems * getColumnWidth())
                + ((numitems -1) * getHorizontalSpacing())
                + getListPaddingLeft() + getListPaddingRight();

        setMeasuredDimension(width, getMeasuredHeight());
    }

} 
```

}

当您从适配器中添加或删除元素时，您必须调用：

```
adapter.notifyDataSetChanged();
gridView.invalidate() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T11:54:21.010

上面建议的布局对我不起作用。

最后，我发现通过以编程方式设置网格的宽度和 X 位置最容易达到您想要的结果——使用 setX(float) 方法使网格居中。

# xslt - xsl - 如何根据 xml 节点的另一个值检索 xml 节点的值

> ID：11870080
> 
> 赞同：1
> 
> 时间：2012-08-08T17:38:04.900
> 
> 标签：xslt

假设我有以下 xml：

```
 <ns5:OrderTotal>
    <ns5:Name>AmountPaid</ns5:Name>
        <ns5:Description>Payment Received</ns5:Description>
    <ns5:SortOrder>4</ns5:SortOrder>
    <ns5:Value>16.95</ns5:Value>
    </ns5:OrderTotal>
    <ns5:OrderTotal>
    <ns5:Name>AmountDue</ns5:Name>
        <ns5:Description>Current Amount Due</ns5:Description>
    <ns5:SortOrder>5</ns5:SortOrder>
    <ns5:Value>0.0</ns5:Value>
    </ns5:OrderTotal> 
```

如果我只想在名称为 AmountPaid 时打印 OrderTotal 的值，怎么能做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:49:39.603

我不知道您将如何打印所需的值，但可以使用以下 XPath 表达式收集它：

```
//ns5:OrderTotal[child::ns5:Name = 'AmountPaid']/ns5:Value 
```

例如：

XML:

```
<ns5:Orders xmlns:ns5="a">
    <ns5:OrderTotal>
        <ns5:Name>AmountPaid</ns5:Name>
        <ns5:Description>Payment Received</ns5:Description>
        <ns5:SortOrder>4</ns5:SortOrder>
        <ns5:Value>16.95</ns5:Value>
    </ns5:OrderTotal>
    <ns5:OrderTotal>
        <ns5:Name>AmountDue</ns5:Name>
        <ns5:Description>Current Amount Due</ns5:Description>
        <ns5:SortOrder>5</ns5:SortOrder>
        <ns5:Value>0.0</ns5:Value>
    </ns5:OrderTotal>
</ns5:Orders> 
```

XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl" version="1.0"
    xmlns:ns5="a">
    <xsl:template match="/">
    <xsl:element name="Value">
        <xsl:value-of select="//ns5:OrderTotal[child::ns5:Name = 'AmountPaid']/ns5:Value"/>
    </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<?xml version="1.0" encoding="utf-8"?>
<Value>16.95</Value> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:47:56.077

```
<xsl:if test="Name = 'AmountPaid'">
 <xsl:value-of select="Value"/>
</xsl:if> 
```

试试上面的`XSL`。

# android - 使用图库和图像视图时位图大小超出 VM 预算

> ID：11870081
> 
> 赞同：0
> 
> 时间：2012-08-08T17:38:11.950
> 
> 标签：android

我正在尝试在此链接上实现在“Imageswitcher View”下编写的代码

[http://mobiforge.com/designing/story/understanding-user-interface-android-part-3-more-views](http://mobiforge.com/designing/story/understanding-user-interface-android-part-3-more-views)

当我单击第一个图像时，它会放大，但在单击第二个图像时，代码会崩溃，但如果我从第二个图像开始，它不会崩溃。

Logcat 说

```
08-08 22:15:08.655: E/AndroidRuntime(1349): FATAL EXCEPTION: main
08-08 22:15:08.655: E/AndroidRuntime(1349): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.graphics.Bitmap.nativeCreate(Native Method)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.content.res.Resources.getDrawable(Resources.java:581)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.widget.ImageView.resolveUri(ImageView.java:501)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.widget.ImageView.setImageResource(ImageView.java:280)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at com.k.TestingActivity$1.onItemClick(TestingActivity.java:47)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.widget.Gallery.onSingleTapUp(Gallery.java:867)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.GestureDetector.onTouchEvent(GestureDetector.java:557)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.widget.Gallery.onTouchEvent(Gallery.java:842)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.View.dispatchTouchEvent(View.java:3885)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.os.Looper.loop(Looper.java:123)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at java.lang.reflect.Method.invokeNative(Native Method)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at java.lang.reflect.Method.invoke(Method.java:507)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-08 22:15:08.655: E/AndroidRuntime(1349):     at dalvik.system.NativeStart.main(Native Method) 
```

# ios - iOS 模拟器中的表格视图

> ID：11870087
> 
> 赞同：0
> 
> 时间：2012-08-08T17:38:39.017
> 
> 标签：ios, uitableview

我在 iOS Simulator 中进行模拟时遇到了一点问题。我正在研究表格视图，当我启动模拟器时，XCode 会显示以下消息：

> 2012-08-08 14:08:41.606 TableView[731:f803]-[UIViewController tableView:numberOfRowsInSection:]：无法识别的选择器发送到实例 0x68cc530 2012-08-08 14:08:41.641 TableView[731:f803] *** 终止应用程序由于未捕获的异常 'NSInvalidArgumentException'，原因：'-[UIViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x68cc530'

首先抛出调用堆栈：

> (0x13c8022 0x1559cd6 0x13c9cbd 0x132eed0 0x132ecb2 0x1f006b 0x1f2862 0xa066d 0xa0167 0xa3134 0xa7623 0x50d42 0x13c9e42 0x1d80679 0x1d8a579 0x1d0f4f7 0x1d113f6 0x1d9e160 0x10e84 0x11767 0x20183 0x20c38 0x14634 0x12b2ef5 0x139c195 0x1300ff2 0x12ff8da 0x12fed84 0x12fec9b 0x10c65 0x12626 0x20a2 0x2015) terminate called throwing an exception(lldb)

我不知道如何解决它...有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:47:37.927

您必须正确实现 UITableViewDatasource 和 UITableViewDelegate 协议中的 @required 方法。

看来您没有实现 tableView:numberOfRowsInSection:，这是这些必需方法之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:01:55.773

```
 -[UIViewController tableView:numberOfRowsInSection:] 
```

在您的错误消息中，表示表视图的数据源已连接到 的实例`UIViewController`，该实例未实现此方法。

你忘了把你的视图控制器的自定义类改成storyboard/xib文件中合适的类，所以还是一个普通的UIViewController。将其更改为您的自定义视图控制器类使用身份检查器的任何内容。

# c - 使用 fseek 读写文件，读取错误数据

> ID：11870093
> 
> 赞同：0
> 
> 时间：2012-08-08T17:39:10.940
> 
> 标签：c, file-io, fseek

我实际上想做的是创建一个二维数组，但它是在文件中而不是在主内存中。

为了跳过这个文件，我使用 fseek 然后 fread 将我需要的内容返回到我正在使用的结构中，问题是当我从结构中的文件中读取时，`loadTile()`结构`gameTile8File gtf`中充满了看似垃圾数据的内容。

请注意，在写入和读取之间，文件永远不会关闭或刷新，不要认为这应该有所作为。该文件是二进制文件，并且总是使用 options 打开`"r+b"`。

我正在检查 上的返回值`fseek()`，`fread()`并且`fwrite()`所有人都说没有问题。

```
void saveTile(gameTile8& gt, unsigned int x, unsigned int y, bool newFile)
{
    //the given coordinates are in world space
    //first load the old coordinates (needed so that correct movements in file 2 are made)
    if(fseek(file1, (y * worldTileKey::gameWorldSizeX*worldTile::worldTileCountX) + x, SEEK_SET))
    {
        cout << "fseek failed! 01\n";
    }
    gameTile8File gtf;
    fread(&gtf, sizeof(gameTile8File), 1, file1);

    //convert a gameTile8 to a gameTile8File
    gtf.save(gt, file2, newFile);

    //once all movements are done then save the tile
    if(fseek(file1, (y * worldTileKey::gameWorldSizeX*worldTile::worldTileCountX) + x, SEEK_SET))
    {
        cout << "fseek failed! 01\n";
    }
    if(fwrite(&gtf, sizeof(gameTile8File), 1, file1) != 1)
    {
        cout << "fwrite failed! 01\n";
    }
}

void loadTile(gameTile8& gt, unsigned int x, unsigned int y)
{
    //the given coordinates are in world space
    //seek to the given spot load it
    if(fseek(file1, (y * worldTileKey::gameWorldSizeX*worldTile::worldTileCountX) + x, SEEK_SET))
    {
        cout << "fseek failed! 01\n";
    }

    gameTile8File gtf;
    //read in the tile
    if(fread(&gtf, sizeof(gameTile8File), 1, file1) != 1)
    {
        cout << "read failed! 01\n";
    }
    //then load it
    gtf.load(gt, file1, file2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:47:18.737

我认为您的问题是以`fseek()`字节为单位的偏移量。您需要将偏移量乘以`sizeof(gameTile8File)`：

```
fseek(file1, sizeof(gameTile8File)*(y * worldTileKey::gameWorldSizeX*worldTile::worldTileCountX + x), SEEK_SET)) 
```

我不清楚你使用`worldTileKey::gameWorldSizeX*worldTile::worldTileCountX`. 您存储在文件`worldTileKey::gameWorldSizeX*worldTile::worldTileCountX`磁贴中的网格是否宽？

# excel - 使用 VBA 从数组中删除重复项

> ID：11870095
> 
> 赞同：8
> 
> 时间：2012-08-08T17:39:38.410
> 
> 标签：excel, vba

假设我在 Excel 2010 中有一个数据块，100 行乘 3 列。

C列包含一些重复项，假设它开始为

> 1、1、1、2、3、4、5、……、97、98

使用 VBA，我想删除重复的行，所以我剩下 98 行和 3 列。

> 1、2、3、……、97、98

我知道 Excel 2010 中有一个按钮可以执行此操作，但它随后会干扰我的其余代码并给出不正确的结果。

此外，我想在数组中进行，然后将结果粘贴到工作表上，而不是诸如`Application.Worksheetfunction.countif(.....`

所以像：

```
Dim myarray() as Variant
myarray=cells(1,1).Currentregion.value

Dim a as Long

For a=1 to Ubound(myarray,1)

    'something here to 

Next a 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-30T21:12:45.767

```
Function eliminateDuplicate(poArr As Variant) As Variant
    Dim poArrNoDup()

    dupArrIndex = -1
    For i = LBound(poArr) To UBound(poArr)
        dupBool = False

        For j = LBound(poArr) To i
            If poArr(i) = poArr(j) And Not i = j Then
                dupBool = True
            End If
        Next j

        If dupBool = False Then
            dupArrIndex = dupArrIndex + 1
            ReDim Preserve poArrNoDup(dupArrIndex)
            poArrNoDup(dupArrIndex) = poArr(i)
        End If
    Next i

    eliminateDuplicate = poArrNoDup
End Function 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T17:56:18.303

[我回答了一个类似的问题](https://stackoverflow.com/questions/10334498/vba-search-and-remove-duplicates)。这是我使用的代码：

```
Dim dict As Object
Dim rowCount As Long
Dim strVal As String

Set dict = CreateObject("Scripting.Dictionary")

rowCount = Sheet1.Range("A1").CurrentRegion.Rows.Count

'you can change the loop condition to iterate through the array rows instead
Do While rowCount > 1
  strVal = Sheet1.Cells(rowCount, 1).Value2

  If dict.exists(strVal) Then
    Sheet1.Rows(rowCount).EntireRow.Delete
  Else
    'if doing this with an array, then add code in the Else block
    ' to assign values from this row to the array of unique values
    dict.Add strVal, 0
  End If

  rowCount = rowCount - 1
Loop

Set dict = Nothing 
```

如果要使用数组，则使用相同的条件 (if/else) 语句遍历元素。如果字典中不存在该项目，则可以将其添加到字典并将行值添加到另一个数组。

老实说，我认为最有效的方法是调整从宏记录器获得的代码。您可以在一行中执行上述功能：

```
 Sheet1.UsedRange.RemoveDuplicates Columns:=3, Header:=xlYes 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-25T05:34:44.960

@RBILLC 和 @radoslav006 答案的改进，此版本在删除重复项的数组中搜索现有值，因此它搜索较少的值来查找重复项。

```
Public Function RemoveDuplicatesFromArray(sourceArray As Variant)
    Dim duplicateFound As Boolean
    Dim arrayIndex As Integer, i As Integer, j As Integer
    Dim deduplicatedArray() As Variant

    arrayIndex = -1
    deduplicatedArray = Array(1)

    For i = LBound(sourceArray) To UBound(sourceArray)
        duplicateFound = False

        For j = LBound(deduplicatedArray) To UBound(deduplicatedArray)
            If sourceArray(i) = deduplicatedArray(j) Then
                duplicateFound = True
                Exit For
            End If
        Next j

        If duplicateFound = False Then
            arrayIndex = arrayIndex + 1
            ReDim Preserve deduplicatedArray(arrayIndex)
            deduplicatedArray(arrayIndex) = sourceArray(i)
        End If
    Next i

    RemoveDuplicatesFromArray = deduplicatedArray
End Function 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-14T08:51:50.330

从一维数组中删除重复项的简单函数

```
Private Function DeDupeArray(vArray As Variant) As Variant
  Dim oDict As Object, i As Long
  Set oDict = CreateObject("Scripting.Dictionary")
  For i = LBound(vArray) To UBound(vArray)
    oDict(vArray(i)) = True
  Next
  DeDupeArray = oDict.keys()
End Function 
```

**编辑：**

使用[stdVBA](https://github.com/sancarn/stdVBA)（主要由我自己维护的库），您可以使用：

```
uniqueValues = stdEnumerator.CreateFromArray(myArray).Unique().AsArray() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2022-01-06T23:21:06.683

这是使用数组的另一种方法：

```
Sub tester()

    Dim arr, arrout

    arr = Range("A1").CurrentRegion.Value   'collect the input array

    arrout = UniqueRows(arr)                'get only unique rows

    Range("H1").Resize(UBound(arrout, 1), UBound(arrout, 2)).Value = arrout

End Sub

Function UniqueRows(arrIn As Variant) As Variant
    Dim keys, rw As Long, col As Long, k, sep, arrout
    Dim dict As Object, lbr As Long, lbc As Long, ubr As Long, ubc As Long, rwOut As Long
    Set dict = CreateObject("scripting.dictionary")
    'input array bounds
    lbr = LBound(arrIn, 1)
    ubr = UBound(arrIn, 1)
    lbc = LBound(arrIn, 2)
    ubc = UBound(arrIn, 2)
    ReDim keys(lbr To ubr)
    'First pass:collect all the row "keys" in an array 
    '    and unique keys in a dictionary
    For rw = lbr To ubr
        k = "": sep = ""
        For col = lbc To ubc
            k = k & sep & arrIn(rw, col)
            sep = Chr(0)
        Next col
        keys(rw) = k     'collect key for this row
        dict(k) = True   'just collecting unique keys
    Next rw

    'Resize output array to # of unique rows
    ReDim arrout(lbr To dict.Count + (lbr - 1), lbc To ubc)
    rwOut = lbr
    'Second pass: copy each unique row to the output array
    For rw = lbr To ubr
        If dict(keys(rw)) Then      'not yet output?
            For col = lbc To ubc    'copying this row over to output...
                arrout(rwOut, col) = arrIn(rw, col)
            Next col
            rwOut = rwOut + 1      'increment output "row"
            dict(keys(rw)) = False 'flag this key as copied
        End If
    Next rw
    UniqueRows = arrout
End Function 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-18T22:03:05.973

我认为这确实是使用 excel 的本机函数的情况，至少对于初始数组获取而言，我认为没有更简单的方法可以做到这一点。这个 sub 将输出从第 5 列开始的唯一值。我假设目标范围是空的，所以如果不是，请更改 r 和 c。

```
Sub testUniques()

    Dim arr, r As Long, c As Long, h As Long, w As Long
    Dim this As Worksheet: Set this = ActiveSheet
    arr = Application.Unique(this.Cells(1, 1).CurrentRegion)

    r = 1
    c = 5
    h = UBound(arr, 1) - 1
    w = UBound(arr, 2) - 1

    this.Range(this.Cells(r, c), this.Cells(r + h, c + w)) = arr

End Sub 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-21T13:48:11.867

@RBILLC 的回答可以通过添加`Exit For`内部内部循环轻松改进：

```
Function eliminateDuplicate(poArr As Variant) As Variant
    Dim poArrNoDup()

    dupArrIndex = -1
    For i = LBound(poArr) To UBound(poArr)
        dupBool = False

        For j = LBound(poArr) To i
            If poArr(i) = poArr(j) And Not i = j Then
                dupBool = True
                Exit For
            End If
        Next j

        If dupBool = False Then
            dupArrIndex = dupArrIndex + 1
            ReDim Preserve poArrNoDup(dupArrIndex)
            poArrNoDup(dupArrIndex) = poArr(i)
        End If
    Next i

    eliminateDuplicate = poArrNoDup
End Function 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-16T13:35:13.690

我知道这很旧，但这是我用来将重复值复制到另一个范围的东西，这样我就可以快速看到它们，从而为我从各种电子表格中建立的数据库建立数据完整性。要使该过程删除重复项，只需将`dupRng`行替换为`Cell.Delete Shift:=xlToLeft`或类似的东西即可。

我没有亲自测试过，但它应该可以工作。

```
Sub PartCompare()
    Dim partRng As Range, partArr() As Variant, i As Integer
    Dim Cell As Range, lrow As Integer

    lrow = ThisWorkbook.Worksheets("Sheet1").Cells(Rows.Count, 1).End(xlUp).Row
    i = 0

    Set partRng = ThisWorkbook.Worksheets("Sheet1").Range(Cells(1, 1), Cells(lrow, 1))

    For Each Cell In partRng.Cells
        ReDim Preserve partArr(i)
        partArr(i) = Cell.Value
        i = i + 1
    Next

    Dim dupRng As Range, j As Integer, x As Integer, c As Integer

    Set dupRng = ThisWorkbook.Worksheets("Sheet1").Range("D1")

    x = 0
    c = 1
    For Each Cell In partRng.Cells
        For j = c To UBound(partArr)
            If partArr(j) = Cell.Value Then
                dupRng.Offset(x, 0).Value = Cell.Value
                dupRng.Offset(x, 1).Value = Cell.Address()
                x = x + 1
                Exit For
            End If
        Next j
        c = c + 1
    Next Cell
End Sub 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-25T19:52:52.027

**从数组中删除重复项（加上相关的行项）**

由于 OP 想要一个接近 的 VBA 解决方案`RemoveDuplicates`，我演示了一种使用 ►dictionary 的数组方法来获取不是*唯一的项目*本身 ( `dict.keys`)，而是第一次出现的相关**行索引**( `dict.items`)。

这些用于通过`LeaveUniques`受益于 ►<code>Application.Index() 函数的高级可能性的过程来保留整个行数据 - 参见[Application.Index 函数的一些特性](https://stackoverflow.com/questions/51688593/excel-vba-insert-new-first-column-in-datafield-array-without-loops-or-api-call/51714153#51714153)

**示例调用**

```
Sub ExampleCall()
'[0]define range and assign data to 1-based 2-dim datafield
    With Sheet1                   ' << reference to your project's sheet Code(Name)
        Dim lastRow: lastRow = .Cells(.Rows.Count, "C").End(xlUp).Row
        Dim rng:  Set rng = .Range("C2:E" & lastRow)
    End With
    Dim data: data = rng        ' assign data to 2-dim datafield
'[1]get uniques (column 1) and remove duplicate rows
    LeaveUniques data           ' << call procedure LeaveUniques (c.f. RemoveDuplicates)
'[2]overwrite original range
    rng.Clear
    rng.Resize(UBound(data), UBound(data, 2)) = data
End Sub 
```

**程序`LeaveUniques`**

```
Sub LeaveUniques(ByRef data As Variant, Optional ByVal colNum As Long = 1)
'Purpose: procedure removes duplicates of given column number in entire array
    data = Application.Index(data, uniqueRowIndices(data, colNum), nColIndices(UBound(data, 2)))
End Sub 
```

**帮助功能`LeaveUniques`**

```
Function uniqueRowIndices(data, Optional ByVal colNum As Long = 1)
'Purpose: return data index numbers referring to uniques
'a) set late bound dictionary to memory
    Dim dict As Object
    Set dict = CreateObject("Scripting.Dictionary")
'b) slice e.g. first data column (colNum = 1)
    Dim colData
    colData = Application.Index(data, 0, colNum)
'c) fill dictionary with uniques referring to first occurencies
    Dim i As Long
    For i = 1 To UBound(colData)
        If Not dict.exists(dict(colData(i, 1))) Then dict(colData(i, 1)) = i
    Next
'd) return 2-dim array of valid unique 1-based index numbers
    uniqueRowIndices = Application.Transpose(dict.items)
End Function

Function nColIndices(ByVal n As Long)
'Purpose: return "flat" array of n column indices, e.g. for n = 3 ~> Array(1, 2, 3)
    nColIndices = Application.Transpose(Evaluate("row(1:" & n & ")"))
End Function 
```

# windows - 在模态对话框/打开主菜单期间继续渲染 3D 窗口？

> ID：11870103
> 
> 赞同：0
> 
> 时间：2012-08-08T17:40:17.570
> 
> 标签：windows, winapi, 3d, modal-dialog, windows-messages

（我使用 Ogre3D 进行渲染，但问题应该是通用的。）

问题：大多数 3D 应用程序使用一个循环来迭代渲染帧并检查消息并处理它们。但是，如果打开一个对话框（MessageBox 或类似的），它会阻止线程的执行并运行它自己的消息循环，但它显然不会调用其中的 3D 渲染函数。

即使打开对话框，保持渲染 3D 场景的首选或“最佳”方式是什么？普通应用程序不会遇到这个问题，因为它们的重新渲染由 WM_PAINT 消息和类似消息处理，并且由于模式对话框确实具有内部消息循环，因此在需要时调用窗口 proc get 并且一切看起来都很好。然而，在我的 3D 项目中，“当需要时”一直是，因为窗口必须更新，即使没有 WM_PAINT 消息。

想到的简单解决方案是在对话框打开时注册一个计时器，并从 WindowProc 渲染 3D 场景，但这真的是最好的吗？好像很脏...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:09:23.260

我不知道这是最好的方法，但我认为它会起作用。

[为WM_ENTERIDLE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645422%28v=vs.85%29.aspx)添加一个处理程序，该处理程序使用[PeekMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644943%28v=vs.85%29.aspx)执行以下操作：

```
case WM_ENTERIDLE:
    while (!PeekMessage())
    {
        DoYourRendering();
    }
    return 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:36:32.483

我建议在进入模态操作时让代码向自身发布一条自定义消息。然后，您可以在模态循环分派消息时渲染当前帧，然后发布另一条消息以保持渲染循环运行。模态操作完成后，您可以停止向自己发布消息并返回正常的渲染逻辑。对于菜单，您可以捕获`WM_ENTERMENULOOP`和`WM_EXITMENULOOP`消息以检测模式菜单消息循环何时开始和结束。

例如：

```
const UINT WM_RENDER_FRAME = WM_USER+100: 
```

.

```
BOOL m_InModalOp = FALSE; 
```

.

```
case WM_ENTERMENULOOP:
    m_InModalOp = TRUE;
    PostMessage(hwnd, WM_RENDER_FRAME, 0, 0);
    break;

case WM_EXITMENULOOP:
    m_InModalOp = FALSE;
    break;

case WM_RENDER_FRAME:
    if (m_InModalOp)
    {
        // render a frame...
        PostMessage(hwnd, WM_RENDER_FRAME, 0, 0);
    }
    break; 
```

.

```
m_InModalOp = TRUE;
PostMessage(hwnd, WM_RENDER_FRAME, 0, 0);
MessageBox(...);
m_InModalOp = FALSE; 
```

# objective-c - Uncrustify ObjC 方法后的换行符

> ID：11870105
> 
> 赞同：5
> 
> 时间：2012-08-08T17:40:27.303
> 
> 标签：objective-c, uncrustify

Uncrustify 有没有办法在方法声明和左大括号之间添加一个新行，类似于`nl_fcall_brace`，但对于 ObjC 方法？

```
- (void)addPendingBuddyRequests:(NSArray *)requests {
} 
```

对比

```
- (void)addPendingBuddyRequests:(NSArray *)requests
{
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T08:41:59.103

我认为您可以为此使用以下选项：

```
# Add or remove newline between function signature and '{'
nl_fdef_brace                            = force   # ignore/add/remove/force 
```

# java - MOXy 集/地图映射

> ID：11870107
> 
> 赞同：1
> 
> 时间：2012-08-08T17:40:31.127
> 
> 标签：java, eclipselink, moxy

我正在尝试使用 MOXy 为前端客户端生成特定格式的响应，以使他们更容易确定特定的关系。这是一个人为的例子，但我正在尝试做类似以下的事情......</p>

```
public class Person {
    private Integer id;

    private String name;

    private Address address;
}

public class Address {
    private String street;

    private String locality;

    private String state;

    private String zip;
}

public class PersonCollectionResponse {
    private Set<Person> people;

    public Set<Person> getPeople() {
        return this.people;
    }

    private int getCount() {
        return this.people.size();
    }
} 
```

…并希望得到类似…的结果</p>

```
{
    "meta": {
        "count": 2
    },

    "people": [{
        "id": 1,
        "name": "Danny Parker",
        "contact": {
            "locality": "Zoo York",
            "state": "New York"
        },
    }, {
        "id": 2,
        "name": "Oscar the Grouch",
        "contact": {
            "locality": "San Francisco",
            "state": "California"
        }

    }],

    "mappings": [{
        "person": 1,
        "zip": 10014
    }, {
        "person": 2,
        "zip": 94102
    }]
} 
```

现在“人”集不是很难，但我在编写 EclipseLink OXM 元数据时被困在如何让映射工作。我正在寻找一种方法来重新定义人们如何被列出，以便我可以得到我的映射。

```
<xml-element java-attribute="people">
    <xml-element java-attribute="id" xml-path="@id" />
    <xml-element java-attribute="zip" xml-path="@zip" />
</xml-element> 
```

我不明白，现在可能。所以我在 PersonCollectionResponse 上创建了一个 getMappings，它返回一个 List>，它是从人们那里生成的。现在这并不理想，但还有更糟糕的事情。但是写出来的时候，map对象就是这样的字符串……</p>

```
"mappings": ["{person: 1, zip: 10014}", "{person: 2, zip: 94102}"] 
```

所以我想我的问题就是其中之一……</p>

1.  如何再次显示元素但输出不同？
2.  如何在不将它们引用为字符串的情况下输出地图？

我想最坏的情况是我将我的一组通用映射变成一个新的类对象并为它们提供一个模式，但这是我想避免的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:12:40.273

目前 MOXy 不允许您将单个实例的表示拆分为 JSON（或 XML）树中的多个位置。请输入您希望查看的支持类型的增强请求：

*   [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)

下面我将演示如何映射部分 JSON 消息。

**部分答案#1**

下面我将描述如何将您的模型映射到以下 JSON 消息：

```
{
   "meta" : {
      "count" : 2
   },
   "people" : [ {
      "id" : 1,
      "name" : "Danny Parker",
      "contact" : {
         "locality" : "Zoo York",
         "state" : "New York"
      }
   }, {
      "id" : 2,
      "name" : "Oscar the Grouch",
      "contact" : {
         "locality" : "San Francisco",
         "state" : "California"
      }
   } ]
} 
```

***oxm.xml***

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11870107">
    <java-types>
        <java-type name="PersonCollectionResponse">
            <java-attributes>
                <xml-element java-attribute="count" xml-path="meta/count/text()"/>
            </java-attributes>
        </java-type>
        <java-type name="Person">
            <xml-type prop-order="id name address"/>
            <java-attributes>
                <xml-element java-attribute="address" name="contact"/>
            </java-attributes>
        </java-type>
        <java-type name="Address">
            <java-attributes>
                <xml-transient java-attribute="zip"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

* * *

**部分答案#2**

现在我将描述如何将您的模型映射到以下 JSON 消息：

```
{
   "meta" : {
      "count" : 2
   },
   "mappings" : [ {
      "person" : 2,
      "zip" : "94102"
   }, {
      "person" : 1,
      "zip" : "10014"
   } ]
} 
```

***oxm.xml***

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11870107">
    <java-types>
        <java-type name="PersonCollectionResponse">
            <java-attributes>
                <xml-element java-attribute="count" xml-path="meta/count/text()"/>
                <xml-element java-attribute="people" name="mappings"/>
            </java-attributes>
        </java-type>
        <java-type name="Person">
            <xml-type prop-order="id address"/>
            <java-attributes>
                <xml-element java-attribute="id" name="person"/>
                <xml-transient java-attribute="name"/>
                <xml-element java-attribute="address" xml-path="."/>
            </java-attributes>
        </java-type>
        <java-type name="Address" xml-accessor-type="NONE">
            <java-attributes>
                <xml-element java-attribute="zip"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

* * *

**演示代码**

两个部分解决方案都可以使用相同的演示代码：

```
package forum11870107;

import java.util.*;
import javax.xml.bind.*;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum11870107/oxm.xml");
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {PersonCollectionResponse.class}, properties);

        PersonCollectionResponse pcr = new PersonCollectionResponse();

        Person person1 = new Person();
        person1.setId(1);
        person1.setName("Danny Parker");
        pcr.getPeople().add(person1);
        Address address1 = new Address();
        address1.setLocality("Zoo York");
        address1.setState("New York");
        address1.setZip("10014");
        person1.setAddress(address1);

        Person person2 = new Person();
        person2.setId(2);
        person2.setName("Oscar the Grouch");
        pcr.getPeople().add(person2);
        Address address2 = new Address();
        address2.setLocality("San Francisco");
        address2.setState("California");
        address2.setZip("94102");
        person2.setAddress(address2);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(pcr, System.out);
    }

} 
```

* * *

**领域模型**

以下是用于两个部分解决方案的域模型：

***PersonCollectionResponse***

```
package forum11870107;

import java.util.*;

public class PersonCollectionResponse {
    private Set<Person> people = new HashSet<Person>();

    public Set<Person> getPeople() {
        return this.people;
    }

    public void setPeople(Set<Person> people) {
        this.people = people;
    }

    public int getCount() {
        return this.people.size();
    }

} 
```

***人***

```
package forum11870107;

public class Person {
    private Integer id;

    private String name;

    private Address address;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Address getAddress() {
        return address;
    }

    public void setAddress(Address address) {
        this.address = address;
    }

} 
```

***地址***

```
package forum11870107;

public class Address {

    private String street;
    private String locality;
    private String state;
    private String zip;

    public String getStreet() {
        return street;
    }

    public void setStreet(String street) {
        this.street = street;
    }

    public String getLocality() {
        return locality;
    }

    public void setLocality(String locality) {
        this.locality = locality;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }

    public String getZip() {
        return zip;
    }

    public void setZip(String zip) {
        this.zip = zip;
    }

} 
```

***jaxb.properties***

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

# cloud - 如何判断网站正在使用什么云技术

> ID：11870109
> 
> 赞同：0
> 
> 时间：2012-08-08T17:40:34.450
> 
> 标签：cloud

我没有作弊，但有人问我“farmigo 正在使用什么云技术？” 我需要回答它才能申请软件工程师职位。他们的网站 [http://www.farmigo.com/about/the-movement](http://www.farmigo.com/about/the-movement)

和工作 [developers.farmigo.com](http://developers.farmigo.com)

现在，我想知道如何了解网站的技术（PHP、.NET）

所以我的问题是：一种通用算法，用于找出网站使用的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:48:56.883

他们正在使用 Google App Engine。我通过打开 shell 并键入`dig www.farmigo.com`. www.farmigo.com 的 CNAME DNS 条目是 ghs.google.com。我知道谷歌提供什么云服务，所以自然而然地得到了答案。

而且，为了回答您的问题，没有“通用算法”来确定网站正在使用什么云服务。你必须做一些调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:50:21.693

浏览他们的网站。我在“条款”页面中找到了以下内容，从主页一键点击：

```
OPEN SOURCE
Farmigo.com uses open source software, including:
open-csv
google-gson
FreeMarker
gwt-fx
gwt-google-apis
Google Maps API
FileUpload
alive-pdf
ga-for-flash
jQuery 
```

获得更多信息的最佳方法是侦探工作：从职位发布中，您可以合理地假设他们有一个 Java 堆栈（很可能基于 servlet/Apache Tomcat）。使用您对他们的产品/站点的了解来确定他们可能拥有哪些技术：如果他们有大型数据集或许多非常相似的页面，他们可能会使用 Spring 或 Hibernate。

更深入的侦探工作选项：

*   浏览 Wayback 机器，查找已过期的招聘信息，以寻找某些技术方面的专业知识。
*   询问：找到公司的现任或前任员工（通过他们的联系信息、您的招聘联系人或linkedIn/类似人员）并询问他们使用什么技术。

如果您想要一种真正公式化的方式来确定站点使用哪些技术，而无需任何支持访问，请尝试使用漏洞扫描程序。请注意，这可能合法也可能不合法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T06:57:34.867

请注意：如果您在 Windows 上（Joe Taylor 在 linux 上使用 dig），请使用 nslookup。顺便说一句，这个问题是farmingo.com的招聘挑战，不要作弊！

# perl - 从 perl 数据结构中提取信息

> ID：11870110
> 
> 赞同：2
> 
> 时间：2012-08-08T17:40:34.960
> 
> 标签：perl, hash

在我学习 Perl 时，请原谅一个新手问题。我有一些这样的代码：

```
my $familyInfo = [{
            'dad' => 'donald',
            'mom' => 'helen',
            'sister' => 'cate',
}]; 
```

请注意，我无法以任何方式修改此代码。我想做的是从这个数据结构中提取妈妈：

```
my $mother = $familyInfo{mom};
print "mother: $mother\n";

my $mother = $familyInfo[0]{mom};
print "mother: $mother\n"; 
```

这根本行不通。它没有为 $mother 分配任何东西。我不明白初始化创建的结构到底是什么类型，以及如何使用它。您可以提供的任何可以帮助我理解这种扭曲语言的语法的信息都会有所帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:49:10.760

有两层需要解引用，外层是数组引用，内层是哈希引用。

```
my $mother = $familyInfo->[0]{mom}; 
```

或者换句话说，`$familyInfo`持有对匿名数组的引用。只有一个元素。该元素包含对匿名哈希的引用。

与您发布的示例代码不同的重要组件是[取消引用运算符](http://p3rl.org/op#The-Arrow-Operator), `->`。

如果没有箭头操作符，你就是在告诉 Perl 这`$familyInfo[0]`是一个元素`@familyInfo`（它不是，`@familyInfo`甚至不存在）。确实存在的是`$familyInfo`；一个包含数组引用的标量，如果要获取其元素，则必须取消引用。[`perldoc perlreftut`](http://perldoc.perl.org/perlreftut.html)应该有助于澄清语法。

如果上述方法对您不起作用，那么您的输入数据与您显示的不匹配。在这种情况下，请使用[Data::Dumper](http://p3rl.org/Data%3a%3aDumper)仔细查看您的输入数据。

```
use Data::Dumper;
print Dumper $familyInfo; 
```

# flash - 哪些浏览器使用自己的 Flash 副本？

> ID：11870111
> 
> 赞同：1
> 
> 时间：2012-08-08T17:40:47.300
> 
> 标签：flash, browser

我正遭受与 Flash 相关的问题，除此之外，我只想了解更多有关此问题的信息。

我知道某些浏览器（例如 Chrome）使用他们自己的 Flash 副本，它们控制更新等，而其他浏览器则没有。

我想知道哪些做哪些不做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:42:18.847

AFAIK，chrome是唯一使用自己版本的。

**编辑：**

正如评论者所指出的，Metro IE10 还将内置特定版本的 flash，并且不会使用已安​​装的 ActiveX 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:05:41.517

目前只有 Google Chrome 和 Metro Internet Explorer 10（从 Windows 8 开始菜单访问的 IE10 版本）。虽然 MS 说它只会为它的兼容性视图列表中的站点启用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:44:13.077

IE 使用不同版本的 Flash (ActiveX)。Chrome 使用自己的闪存类型。

如果您有兴趣，可以了解有关 Mozilla Flash 的更多信息。

[http://support.mozilla.org/en-US/kb/keep-flash-up-to-date-and-troubleshoot-problems](http://support.mozilla.org/en-US/kb/keep-flash-up-to-date-and-troubleshoot-problems)

# jquery - AngularUI 和多个 jQuery UI 对话框

> ID：11870117
> 
> 赞同：1
> 
> 时间：2012-08-08T17:41:34.697
> 
> 标签：jquery, jquery-ui, angularjs

我正在使用[AngularUI](http://angular-ui.github.com/)的 jQuery Passthrough 模块将内容分离到我页面上的对话框中。第一个对话框效果很好，第二个对话框失败并显示“TypeError：无法读取属性 '1' of null”。

这是jsfiddle：

[http://jsfiddle.net/3wpKa/3/](http://jsfiddle.net/3wpKa/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:09:17.613

在 AngularUI 开发人员的帮助下（谢谢大家！），我能够通过将每个对话框包装在自己的 div 中来解决这个问题：[jsfiddle.net/3wpKa/12](http://jsfiddle.net/3wpKa/12)

```
<div>
    <div ui-jq="dialog" ui-options="{title: 'Dialog 1', autoOpen: open}">Dialog 1</div>
</div> 
```

# extjs - 编辑器网格面板的按钮（侦听器）问题

> ID：11870118
> 
> 赞同：0
> 
> 时间：2012-08-08T17:41:36.657
> 
> 标签：extjs

我有一个编辑器网格，当我按下提交按钮时，它会将总数添加到应付金额字段中，然后被禁用（这是一件好事）。我的问题是每次按下添加按钮以创建新记录时，我都无法重新激活提交按钮。

我的问题是网格的监听器。这是正确的方法吗？如果您知道更好的方法来做到这一点，请告诉我。这是我的代码：

```
var iLineItemGrid = new Ext.grid.EditorGridPanel({
    id: 'iLineItemStore',
    store: iLineItemStore,
    cm: iLineItemCM,
    cls: 'iLineItemGrid',
    width: 'auto',
    height: 'auto',
    frame: true,
    //title:'Edit Plants?',
    //plugins:checkColumn,
    clicksToEdit: 1,
    viewConfig: {
        //forceFit: true
        autoFit: true
    },
    //new
    listeners: {
        edit: function (editor, edit) {
            var form = edit.grid.up('form'),
                button = form.down('button[text=Submit]');

            // enable the button after the grid is edited
            button.setDisabled(false);
        }
    },

    tbar: [{
        text: 'Add',
        tooltip: 'Add the line item',
        handler: function () {
            var r = new iLineItemRec({
                i_line_item_name: '',
                i_line_item_amt: ''
            });
            iLineItemGrid.stopEditing();
            iLineItemStore.insert(0, r);
            iLineItemGrid.startEditing(0, 0);
        },
        //Should this be scope:this or scope:iLineItemGrid?
        scope: this
    }, {
        text: 'Delete',
        tooltip: 'Remove the selected line item',
        handler: function () {
            iLineItemGrid.stopEditing();
            var r = iLineItemGrid.getSelectionModel().getSelectedCell();
            iLineItemStore.removeAt(r[1]);
        },
        //     handler: function(){
        //       iLineItemGrid.stopEditing();
        //       var r = iLineItemGrid.getSelectionModel().getSelected();
        //       iLineItemStore.removeAt(r[0]); }
        //  },

        //Should this be scope:this or scope:iLineItemGrid?
        scope: this
    },

           {
               xtype: 'tbfill'
           },

           {
               text: 'Submit',
               tooltip: 'Submit the line item',
               //new
               //disabled: true,
               handler: function () {
                   iLineItemGrid.stopEditing();
                   // Will this code save changes to the database?
                   //iLineItemGrid.getStore().commitChanges();
                   iLineItemStore.commitChanges();

                   var iAmountTotalForLineItems = 0;
                   var iAmountInDueField = Ext.getCmp('iAmountDue').value;
                   var tempTotal = 0;
                   var result = 0;
                   iLineItemStore.each(function (addAmount) {
                       iAmountTotalForLineItems += addAmount.get('i_line_item_amt');

                   });

                   alert('1 iAmountInDueField: ' + iAmountInDueField + ' iLineItemTotalHold: ' + iLineItemTotalHold + ' iAmountTotalForLineItems: ' + iAmountTotalForLineItems);
                   if (iLineItemTotalHold > iAmountTotalForLineItems) {
                       alert('if');
                       tempTotal = iLineItemTotalHold - iAmountTotalForLineItems;
                       result = iAmountInDueField - tempTotal;
                       alert('two: ' + result + ' = ' + iAmountInDueField + ' + ' + tempTotal);

                   } else if (iLineItemTotalHold < iAmountTotalForLineItems) {
                       alert('if2');
                       tempTotal = iAmountTotalForLineItems - iLineItemTotalHold;
                       result = iAmountInDueField + tempTotal;
                       alert('3: ' + result + ' = ' + iAmountInDueField + ' - ' + tempTotal);
                   }

                   iLineItemTotalHold = iAmountTotalForLineItems;

                   Ext.getCmp('iAmountDue').setValue(result);
                   this.setDisabled(true);
               }
               //scope:this
           }

          ]

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:40:17.483

小心身份证。如果您打开两个具有相同 ID 的表单，您将遇到问题。我会为按钮或操作设置一个名称：

提交按钮：

```
 {
        text: 'Submit',
        tooltip:'Submit the line item',
        action: 'submit',
        // Your other stuff...
 } 
```

添加按钮：

```
{
        text: 'Add',
        tooltip:'Add the line item',
        handler : function(){
            var r = new iLineItemRec({
                i_line_item_name: '',
                i_line_item_amt: ''
            });
            iLineItemGrid.stopEditing();
            iLineItemStore.insert(0, r);
            iLineItemGrid.startEditing(0, 0);
            iLineItemGrid.down('button[action=submit]').setDisabled(false);
        },
        //The scope here depends on what you want the 'this' variable to be in your handler. 
        //If you want it to be the grid then give iLineItemsGrid, if you want it to be the button you don't have to give a scope. 
        //But scope: this is dangerous because the this in your case is not the grid
        scope:iLineItemsGrid
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:29:42.683

首先，您需要为提交按钮分配一个唯一的 ID。您可以使用[id](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.button.Button-cfg-id)属性。

然后在添加按钮的处理程序中，添加以下行以重新激活提交按钮。

```
Ext.getCmp('submit_button_id_goes_here').setDisabled(false); 
```

# php - 从另一个类调用时限制一个类的方法

> ID：11870119
> 
> 赞同：0
> 
> 时间：2012-08-08T17:41:36.757
> 
> 标签：php, class

```
abstract class User
{
  protected $content; // $content object will be assigned here

}

class Member extends User
{

}

abstract class Content
{
 function create()
 {
  //create some content
 }
}

class Text extends Content
{

}

class Image extends Content
{
} 
```

`Abstract User`可以基于可定制的卷扩展到其他类。每个卷都有不同的使用`Content`类的权限，它是子类方法。我可以为每种方法手动编写每个权限，但我想动态地这样做。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:15:56.350

**更新**

在第二次阅读您的问题时，我刚刚想到了另一种更适合您需要的方法。尽管 php 不支持多重继承，并且特征需要 php >= 5.4，但您可能需要考虑添加第二个*“代”*（另一个级别的子级）。抽象类只包含那些对所有人都可用的方法，最好是带有`final`关键字，或者在某个地方只有 1 个变体（在这种情况下，删除`final`关键字并覆盖成员函数）。

正如我之前所说，我不太擅长解释这些东西，所以我继续整理了一个示例，说明您的课程的外观：

```
abstract class User
{
    public function __construct()
    {
        echo get_class($this).'<br/>';
    }
    final function forAll()
    {
        echo 'access for all';
    }
}
class TxtGroup extends User
{
    public function __construct()
    {
        parent::__construct();
    }
    public function abstr()
    {
        echo 'TxtGroup specific';
    }
}
class ImgGroup extends User
{
    public function __construct()
    {
        echo 'Same, but different for ImgGroup<br/>';
        parent::__construct();
    }
    public function abstr()
    {
        echo 'ImgGroup specific';
    }
}
class inst1 extends TxtGroup
{
    public function __construct()
    {
        parent::__construct();
        if ($this instanceof TxtGroup)
        {
            echo 'Child member of: TxtGroup<br/>';
        }
        if ($this instanceof inst1)
        {
            echo 'Child instance of inst1 (itself)<br/>';
        }
        if ($this instanceof User)
        {
            echo 'grand-Child of User<br/>';
        }
    }
    public function objSpecific()
    {
        echo 'self explanatory<br/>';
    }
}
class inst2 extends ImgGroup
{
    public function __construct()
    {
        parent::__construct();
        if ($this instanceof ImgGroup)
        {
            echo 'Child member of: ImgGroup<br/>';
        }
        if ($this instanceof inst2)
        {
            echo 'Child insance of inst2 (itself)<br/>';
        }
        if ($this instanceof User)
        {
            echo 'grand-Child of User<br/>';
        }
    }
}
$foo = new inst1();
$bar = new inst2(); 
```

明白了吗？输出：

> inst1
> 子成员：TxtGroup inst1 的
> 子实例（本身）
> 用户
> 的孙子 相同，但与 ImgGroup 不同 inst2 子成员：ImgGroup
> inst1的子实例（自身） 用户 的孙子

* * *

如果您使用的是最新版本的 PHP，那么您就有了相应的特征。有很多方法可以检查哪个类正在调用成员函数。最简单的 IMO 是通过检查以下值来启动您的方法`get_class($this);`：

```
abstract class Foo
{
    public function who()
    {
        echo get_class($this);
    }
}
class bar extends Foo
{
    public function __construct()
    {
        $this->who();
    }
}
$f = new bar(); 
```

echo's `bar`，因此您可以更改抽象方法，并在必要时抛出异常。

可以使用相同的构造来重载某些方法，例如这个（可怕的）示例（尝试显示/）显示：

```
abstract class Foo
{
    public function who()
    {
        $child =  explode('_',get_class($this));
        if (end($child) === 'whoExec')
        {
            return $this->whoExec();
        }
        echo 'this isn\'t for bar the bar instance';
        return $this;
    }
    private function whoExec()
    {
        if(!strstr('whoExec',get_class($this)))
        {
            return $this->who();
        }
        echo 'This methods mimics overloading -sort of';
        return $this;
    }
}
class bar_whoExec extends Foo
{
    public function __construct()
    {
        $this->who();
    }
}
$f = new bar(); 
```

# grammar - LALR(1) 文法中的错误恢复

> ID：11870125
> 
> 赞同：3
> 
> 时间：2012-08-08T17:41:54.260
> 
> 标签：grammar, yacc, lex, lalr

我正在使用一些解析器和词法分析器生成工具（类似于 Lex 和 Bison，但用于 C#）来生成将字符串解析为抽象语法树的程序，以便以后进行评估。

我想做错误恢复（即在生成的抽象句子树中报告缺少标记等）。我有两种方法来构建生成的语法，我想知道**哪种方法更好/更灵活/不会发生冲突**（.y 和 .lex 文件是根据计算器的描述生成的）。

计算器描述允许用户指定终端/正则表达式及其对运算符和关联性的位置。所以像：

```
grammar.AddTerminal("Plus", "\\+").
    AddNonTerminal(new NonTerminal("Add", Associativity.LeftToRight).
        AddTerminal("Expression").
        AddTerminal("Plus").
        AddTerminal("Expression")); 
```

`Terminal`（通过添加's 和`NonTerminal`'s的顺序指定优先级。`"Add"`是通过反射发现的方法的名称。基本上它告诉 NonTerminal 在抽象语法树中调用运算符的内容。）

* * *

**方法1**：（允许任何表达式的空规则）

```
S -> E
E -> E + T
E -> T
T -> T * P
T -> P
P -> (E)
P -> (E [error]
P -> a
P -> @ [error] 
```

* * *

`a`是一个终端。 `@`是空的。

* * *

**方法2**：（只允许空规则作为开始规则）

```
S -> E
S -> @ [error]
E -> + [error]
E -> T + [error]
E -> + T [error]
E -> E + T
E -> T
T -> * [error]
T -> * P [error]
T -> P * [error]
T -> T * P
T -> P
P -> (E)
P -> (E [error]
P -> a 
```

这是一个示例，显示使用每种方法的错误输入的最左推导。

* * *

**输入：** `(a +`

* * *

**方法1**：

```
S
E
T
P
(E
(E + T
(T + T
(P + T
(a + T
(a + P
(a + 
```

* * *

**方法2**：

```
S
E
T
P
(E
(T +
(P +
(a + 
```

* * *

方法 2 更难编码（考虑减法/一元负运算符。你不能只看减法`A -> A - B`，先取出它`A`并报告错误，`A -> - B`因为这对一元运算符有效。）我今天早上为方法 2 编码只是发现我认为它有语法问题，并且方法 1 中的空规则使事情变得更简单，代码方面，但我主要担心的是，当程序员创建计算器描述时，**哪种方法会产生最少的语法问题**如上所述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-21T16:08:21.307

这个问题已经存在了一段时间，涵盖了该主题的初学者经常访问的主题。人们经常会发现，那些在本科阶段上过编译器课程的人都知道，这是那些没有简单或单一答案的问题之一。您可能已经注意到您有[两个关于同一主题的问题](https://stackoverflow.com/questions/11940733/add-error-checking-via-production-rules-to-lalr1-grammar-to-handle-all-inputs)，但都没有得到回答。[其他人发布](https://stackoverflow.com/questions/21806955/can-parser-error-recovery-be-guided-automatically-by-the-grammar)的另一个问题是通过指向解释为什么这很难的文献来回答的。

这是一个存在 50 多年的问题。如果随着时间的推移检查文献，从早期的会议论文、课程教科书、博士论文和（今天）`SO`，我们可以看到经常提到这是*一个错误的问题*这一事实！（或者更确切地说是解决问题的错误方法）。

只是从多年来的课程文本中抽取样本（从我的书架上随机选择）：

Gries, D. (1970) 错误恢复和纠正 - 文献介绍，*编译器构造，高级课程*，由 Bauer, FL & Eickel, J., Springer Verlag, pp.627-638 编辑。
Gries, D. (1971)*数字计算机的编译器构建*，Wiley，pp.320-326。
Aho, AV, Ullman, JD (1977)*编译器设计原理*，Addison Wesley，pp.397-405。
Bornat, R. (1979)*理解和编写编译器*，Macmillan，pp.251-252。
Hanson, D. (1995) *A retargetable **C** compiler: Design and Implementation* , Addison-Wesley, pp.140-146。
Grune, D., Bal, HE, Jacobs, CJH & Langendoen, KG (2000)*现代编译器设计*，Wiley，第 175-184 页。
Aho, AV, Lam, MS, Sethi, R., Ullman, JD (2007)*编译器：原理、技术和工具*，Pearson, Addison-Wesley，pp.283-296。

所有这些都同意（超过 40 年），您的问题是关于错误地使用错误的工具或朝着错误的方向前进。我想我想说“你不能从这里到那里”。你应该从别的地方开始。

如果你想要更深层次的东西，有一个完整的博士论文：

[Charles, P. (1991) *A Practical method for Constructing Efficient LALR(k) Parser with Automatic Error Recovery*，纽约大学](http://jikes.sourceforge.net/documents/thesis.pdf)

希望将来再次访问此问题的人可以找到答案的占位符。

* * *

我从评论中注意到您正在使用源自 CPPG 的 MPPG。不是每个人都会使用这些工具，所以我提供了一些指向这些工具的链接：

[Managed Babel Systems Essentials](https://msdn.microsoft.com/en-us/library/bb165963%28v=vs.80%29.aspx)
[Garden Points Parser Generator](https://gppg.codeplex.com/)
[Irony .NET 编译器构建工具包](http://www.codeproject.com/Articles/22650/Irony-NET-Compiler-Construction-Kit)
[编写您的第一个 Visual Studio 语言服务](http://www.codeproject.com/Articles/33250/Writing-Your-First-Visual-Studio-Language-Service)

# asp.net-mvc - 使用下拉列表过滤 MVC 中的结果

> ID：11870126
> 
> 赞同：4
> 
> 时间：2012-08-08T17:41:54.790
> 
> 标签：asp.net-mvc, select, filter, formcollection

我有一个返回表格的 MVC Web 应用程序。我想向视图页面添加一个下拉列表，将表格过滤到选定的年份。什么是正确的方法？

我目前正在创建一个使用 JQuery 填充的下拉列表。我创建了一个 onChange 命令来回发，但我不知道如何获取控制器中下拉列表的选定值。

以下是我的代码片段：

在控制器中：

```
 public ActionResult Index()
    {
        int year = 2012;
        var vu_Estimates = dbBudget.vu_Estimates.OrderByDescending(o => o.Expense).ThenBy(o => o.CategoryGroupSortOrder).ThenBy(o => o.SortOrder).Where(o => o.Year == year).ToList();

        return View(vu_Estimates);
    }

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Index(FormCollection formCollection)
    {
        int year = 2012;
        var vu_Estimates = dbBudget.vu_Estimates.OrderByDescending(o => o.Expense).ThenBy(o => o.CategoryGroupSortOrder).ThenBy(o => o.SortOrder).Where(o => o.Year == year).ToList();

        return View(vu_Estimates);
    } 
```

在视图中，我有以下内容：

```
<script type="text/javascript">
    $(document).ready(function () {        
        $.post("/Estimate/PopulateYears/", { Year: $(this).val() }, function (data) {
            populateDropdown($("#ddlYears"), data);
        });
    });

    function populateDropdown(select, data) {
        select.html('');
        $.each(data, function (id, option) {
            select.append($('<option></option>').val(option.value).html(option.name));
        });
    }
</script>

<h2>Estimates List</h2>

<div>
    <% using (Html.BeginForm()) { %>
        <select id="ddlYears" onchange="this.form.submit();"></select> | <%: Html.ActionLink("Create New Year of Estimates", "CreateEstimates", "Estimate") %>
    <%} %>
</div>

<table>
    <tr>
        <th></th>
        <th>
            EstimateID
        </th>
        <th>
            CategoryID
        </th>
        <th>
            Year
        </th>
        <th>
            EstimateAmount
        </th>
        <th>
            CategoryName
        </th>
        <th>
            SortOrder
        </th>
        <th>
            CategoryGroupSortOrder
        </th>
        <th>
            Expense
        </th>
    </tr>

<% foreach (var item in Model) { %>
    <tr>
        <td>
            <%: Html.ActionLink("Edit", "Edit", new { id=item.EstimateID }) %> |
            <%: Html.ActionLink("Delete", "Delete", new { id=item.EstimateID })%>
        </td>
        <td>
            <%: item.EstimateID %>
        </td>
        <td>
            <%: item.CategoryID %>
        </td>
        <td>
            <%: item.Year %>
        </td>
        <td>
            <%: item.EstimateAmount %>
        </td>
        <td>
            <%: item.CategoryName %>
        </td>
        <td>
            <%: item.SortOrder %>
        </td>
        <td>
            <%: item.CategoryGroupSortOrder %>
        </td>
        <td>
            <%: item.Expense %>
        </td>
    </tr>
<% } %>

</table>

<p>
    <%: Html.ActionLink("Create New", "Create") %>
</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T22:57:05.050

我建议使用 AJAX 发布下拉列表的值并返回使用此请求更新页面所需的数据。否则，每次选择元素中的值更改时，您都需要重新加载页面。

```
$('#idOfSelectElement').change( function() {
    $.ajax({
        type: "POST",
        url: '/Estimate/PopulateYears',
        data: { 
            valueOfDropDown: $(this).val()
        },
        /* Response is the data returned from controller method */
        success: function (response) {

           var value1 = response.value1;
           var value2 = response value2;

           //TODO : Use these values to update your page.

           return false;
        }
    });
}); 
```

在您的控制器中，

```
/* Assuming the value of your dropdownlist is integer. If not use string */
public ActionResult PopulateYears(int valueOfDropDown)
{
    try
    {
      /* Get data using the value of dropdownlist */
      var vu_Estimates = getData(valueOfDropDown);

      return Json(new 
      { 
          success = true,
          value1 = vu_Estimates.value1,
          value2 = vu_Estimates.value1
      }, JsonRequestBehavior.AllowGet);
    }
    catch
    {
        return Json(new { success = false } );
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T19:30:45.840

首先，为您的下拉列表命名：

```
<div>
    <% using (Html.BeginForm()) { %>
        <select id="ddlYears" name="Years" onchange="this.form.submit();"></select> | <%: Html.ActionLink("Create New Year of Estimates", "CreateEstimates", "Estimate") %>
    <%} %>
</div> 
```

然后使用`FormCollection`对象检索值：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Index(FormCollection formCollection)
{
    int year = Convert.ToInt32(formCollection["Years"]);
    var vu_Estimates = dbBudget.vu_Estimates.OrderByDescending(o => o.Expense).ThenBy(o => o.CategoryGroupSortOrder).ThenBy(o => o.SortOrder).Where(o => o.Year == year).ToList();

    return View(vu_Estimates);
} 
```

类似的东西。

# angularjs - AngularJS 不删除 HTML 中的结果

> ID：11870129
> 
> 赞同：1
> 
> 时间：2012-08-08T17:42:11.840
> 
> 标签：angularjs

无论如何强制角度更新/重新编译绑定中的变量？当我将我的数组（在我的 HTML 中定义为一个 for 循环）设置为等于**[]**并且它不接受它时，我遇到了一个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:09:57.617

一种解决方法是确保使用相同的数组引用。每当我想将所有元素更新为绑定数组时，我一直在这样做：

```
myArray.length = 0;
angular.forEach(newArray, function(item){
   myArray.push(item);
})

// Note: try without this line first as it isn't always necessary
$scope.$digest(); 
```

使用`myArray.length = 0`清除保留对数组的引用的数组，请参阅[这篇文章](https://stackoverflow.com/questions/4804235/difference-between-array-length-0-and-array)以获取更多信息。

您还可以使用通常的[splice](http://www.w3schools.com/jsref/jsref_splice.asp)和[unshift](http://www.w3schools.com/jsref/jsref_unshift.asp)分别删除和添加项目到数组的开头。

# regex - 使用 Google App 脚本解析 URL

> ID：11870132
> 
> 赞同：1
> 
> 时间：2012-08-08T17:42:17.680
> 
> 标签：regex, url, google-apps-script

我正在处理来自 Google App Script 上的独立脚本的 URL 到它的组成部分。

我的问题是网上的正则表达式构建工具告诉我我的正则表达式是正确的，但我只得到一个值。

具体来说，我的代码是：

```
function UrlComponents(url) {
  const _urlMatchPattern = /^((http[s]?):\/)?\/?([^:\/\s]+)(:([^\/]*))?((\/\w+)*\/)([\w\-\.]+[^#?\s]+)(\?([^#]*))?(#(.*))?$/mig;   // Source: http://stackoverflow.com/questions/27745/getting-parts-of-a-url-regex

  if (!_urlMatchPattern.test(url))
    return new Array();

  var urlMatches = url.match(_urlMatchPattern);

  if (urlMatches != null)
  {
    Logger.log("Count:" + Math.floor(urlMatches.length));

    for (var i=0; i<Math.floor(urlMatches.length);i++)
      Logger.log("Position " + i + ": " + urlMatches[i]);
  }

  return urlMatches;
} 
```

当我通过运行代码对此进行测试时，输出是一个包含填充字符串的数组元素。然而，同样的事情通过正则表达式测试工具（例如[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)或 www.regexplanet.com/advanced/java/）给出了正确的信息。

任何帮助/建议/礼貌地指出我不可避免的愚蠢错误都将受到欢迎。

谢谢，乔尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:59:33.650

要解决问题，您必须从正则表达式中消除`/g`修饰符，即该行应该是

```
const _urlMatchPattern = /^((http[s]?):\/)?\/?([^:\/\s]+)(:([^\/]*))?((\/\w+)*\/)([\w\-\.]+[^#?\s]+)(\?([^#]*))?(#(.*))?$/mi; 
```

# iphone - 使用正则表达式搜索大字符串时如何利用字母顺序？

> ID：11870137
> 
> 赞同：1
> 
> 时间：2012-08-08T17:42:40.330
> 
> 标签：iphone, objective-c, regex, performance

我正在制作一个 iPhone 文字游戏。我有一个文本文件，其中包含用换行符分隔的每个英文单词。

我尝试了几种检查有效单词的方法。使用 SQLite 数据库几乎可以立即加载，但搜索时间太长。我可以在游戏加载时将所有内容加载到数组中，但在使用两年的 iPod 上大约需要 7 秒。虽然当时搜索速度很快。我发现最好的平衡是将整个文件加载到一个`NSString`并执行一个正则表达式：

```
NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:[NSString stringWithFormat:@"\n%@\n", word] options:NSRegularExpressionCaseInsensitive error:&error];

NSUInteger numberOfMatches = [regex numberOfMatchesInString:self.words options:0 range:NSMakeRange(0, [self.words length])];

NSLog(@"%i matches found", numberOfMatches); 
```

但是，这并没有利用列表按字母顺序排列的事实。我怎样才能利用这一事实来加快速度？

一个转折是我允许人们使用通配符，所以正则表达式可能看起来像：`@"wo.d"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:02:54.493

两级方法（也称为索引）怎么样？

检查第一个字母并将带有该字母的所有单词加载到您的数组中。如果所有单词的加载时间都是7秒，那么对于有某个首字母的单词，平均应该是7s/24≈0.3s。

如果您没有第一个字母，您也可以使用最后一个、第二个等。为了支持这一点，您可以在 SQLite中创建[索引。](http://sqlite.org/lang_createindex.html)

# r - 如何使用lappy删除R中列表中元素的插槽

> ID：11870147
> 
> 赞同：6
> 
> 时间：2012-08-08T17:43:14.943
> 
> 标签：r, lapply

所以我有一长串对象，每个对象都有一个我想删除的插槽。具体来说，他们以重复的方式存储数据。但原因应该不重要。

我的主要问题是什么是“正确”的做法。所以这里是设置：

```
q <- list()
q$useless <- rnorm(100)
q$useful <- rnorm(100)

SampleList <- list(q,q,q) 
```

所以我有一个相同对象的列表（或至少相同的外观对象）。我想删除无用的插槽。为什么，因为它对我没用。

我可以做一个循环：

```
for (i in 1:length(SampleList)){
   SampleList[[i]]$useless <- NULL
} 
```

但是为什么 lapply() 版本不起作用。所以猜想问题是我对 lapply 没有什么了解。

```
lapply(SampleList, function(x){print(x$useless) })
SampleList<- lapply(SampleList, function(x){x$useless <- NULL }) #NO WORK 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T17:53:28.290

你在 lapply 中的函数没有返回任何东西，所以它默认返回你的赋值结果。您需要返回修改后的对象才能使您的版本正常工作

```
SampleList <- lapply(SampleList, function(x){x$useless <- NULL; x}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:51:23.670

试试这个简单的`lapply`版本

```
SampleList <- lapply(1:3, function(x, i) x[[i]]$useful,  x=SampleList) 
```

甚至是比上一个更简单的这个

```
lapply(SampleList, function(x) x$useful) 
```

两条指令都只选择`useful`元素。而不是用这个调用替换无用的，`NULL`只需选择那些是`useful`.

# javascript - 接收已发布的对象 node.js

> ID：11870150
> 
> 赞同：0
> 
> 时间：2012-08-08T17:43:23.993
> 
> 标签：javascript, jquery, ajax, node.js

我有一个对象：

```
var val = {username:'gilbertbw',password:'password',password2:'password',email:'email@email.com',firstname:'gilbert',lastname:'BW',test:true}; 
```

我对其进行了一些验证，然后将其发布到我的 node.js 服务器：

```
console.log(
            $.ajax({
                type: 'POST',
                url: '/signup',
                data: val,
                success: function(){console.log('data posted')},
                dataType: "json"
            })
        ); 
```

在服务器上，我尝试调用对象 val：

```
console.log(val.username); 
```

并像往常一样将其从帖子中拉出：

```
val = req.param(val,null);
console.log(val.username); 
```

但两次萤火虫吐出 500 ISE：

```
 "{"error":{"message":"val is not defined","stack":"ReferenceError: val is not defined at exports.signup (C:\\Users\\Gilbert\\WebstormProjects\\NodeOfGames\\routes\\user.js:37:21) 
```

如果我只是`console.log(val);`打印 null 有问题的行是当我尝试将 val.username 记录到控制台时。您如何在 node.js 中接收已发布的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:52:08.760

`val`是客户端变量。服务器无法知道您将此对象命名为“val”。

`data: val`就像：

```
data: {username:'gilbertbw',password:'password',password2:'password',email:'email@email.com',firstname:'gilbert',lastname:'BW',test:true} 
```

所以你的服务器没有`val`字段可以找到。

改为这样做：

```
data: {
    "val": val
} 
```

**编辑：**

另外，您的行`req.param(val,null);`应该是`req.param("val",null);`
或`val = req.body.val;`
（[参考](http://expressjs.com/api.html#req.body)）

# ajax - 如何使用 Wicket 从一个表单发送多个字段？

> ID：11870151
> 
> 赞同：1
> 
> 时间：2012-08-08T17:43:23.870
> 
> 标签：ajax, forms, wicket

在我的表单中有一些字段，在运行搜索实体并更新表单的查询之前，我需要填写其中的三个。
有没有办法在 ajax 请求中一起发送这些字段，所以我可以使用从客户端发送的值运行查询，而不依赖于模型上的值？
我这样说是因为我不希望在模型中设置这些值，因为有些字段是必需的，所以如果用户填写该字段并稍后擦除以前的值，wicket 将不会更新模型上的值.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:03:32.367

将它们放在嵌套表单中，将它们标记为必需，添加 AjaxFormComponentUpdatingBehavior 并将字段绑定到临时模型。

在 onUpdate 方法中检查是否设置了所有 3 个值，如果设置了，则运行您的查询。

在主表单的 onSubmit 中，将临时模型中的值传输到真实模型中。

# c - 在 Windows 上安装定时器/时钟 ISR - 单线程环境中的异步调用

> ID：11870152
> 
> 赞同：2
> 
> 时间：2012-08-08T17:43:28.147
> 
> 标签：c, windows, timer, operating-system, interrupt

我正在改进一些在 x86 Windows 系统上模拟上下文切换调度程序的代码。该程序使用一些古老的 Borland C 编译器在 Windows XP（编辑：可能不是 Windows 7）上编译，并且正在移植到 MSVC 可编译。

在某一时刻，代码通过以下不可用的函数安装 ISR `dos.h`：

```
void (*)() getvect(int)
void setvect(int, void (*)()); 
```

具体来说，代码为（循环）定时器中断安装了 ISR。电话是：

```
tick_isr_old = getvect(0x08);
setvect(0xF2, tick_isr_old);
setvect(0x08, (void interrupt (*)(void)) tick_isr);
setvect(0xF1, (void interrupt (*)(void)) context_switch_isr); 
```

有谁知道设置这些 ISR 的合理方法是什么（可能使用 Windows API？）。更糟糕的是，这些函数是用汇编语言实现的（毕竟它们需要执行上下文切换......）。是否至少有任何文档涉及整数常量（0x08、0xF2、0xF1）所指的中断向量？谷歌并没有真正想出我可以使用的东西。

* * *

**更新**：由于显然不可能让这些 DOS 调用在 Windows 7 中工作，我需要一种在一般单线程环境中异步调用函数的方法。

在 linux 下，`signal()`and`raise()`函数可以做到这一点，但在 Windows 下，它们仅以尽可能最小的方式得到支持。有没有办法在 Windows 下实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:10:49.383

请参阅[有关 BIOS 中断的维基百科条目](http://en.wikipedia.org/wiki/BIOS_interrupt_call)；它说：

> 08h​ IRQ0：由系统定时组件实现；由可编程间隔定时器每秒调用 18.2 次（每 55 毫秒一次）

不过，在 Windows 7 上，您将需要创建内核模式驱动程序来访问中断。

您可以使用 Windows[用户模式调度](http://msdn.microsoft.com/en-us/library/windows/desktop/dd627187%28v=vs.85%29.aspx)和[光纤](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682661%28v=vs.85%29.aspx)模拟调度程序的中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:49:26.773

您肯定需要替换 tick_isr 和 context_switch_isr，因为它们正在为 DOS 环境实现上下文切换。即使您可以明智地执行它，现有代码也无法在 Windows 中做任何有意义的事情。

由于在原始代码中，上下文切换是抢占式的，因此您可以完全消除该逻辑并改用 Windows 线程。推测现有代码有一些用于创建和删除上下文的例程，这些可以替换为相应的 Windows API 线程函数。

如果您需要确保一次只运行一个线程，您可以使用[SetProcessAffinityMask](http://msdn.microsoft.com/en-us/library/ms686223%28v=vs.85%29)将进程绑定到单个 CPU。

或者，您可以使用调试函数[GetThreadContext](http://msdn.microsoft.com/en-us/library/ms679362%28v=vs.85%29)和[SetThreadContext](http://msdn.microsoft.com/en-us/library/ms680632%28v=vs.85%29)来实现您自己的上下文切换。在这种情况下，您将有一个用于主程序代码的线程和另一个运行上下文切换器的线程。

# django - 旧数据库的自定义身份验证后端

> ID：11870153
> 
> 赞同：0
> 
> 时间：2012-08-08T17:43:30.000
> 
> 标签：django, authentication, legacy-database

由于我使用的是旧数据库，因此我应该使用另一个模型而不是默认的 Django`contrib.auth.models.User`进行身份验证。

`id = models.DecimalField(...)`我的模型有一个用于用户名的 id 字段 ( ) 和一个用于`password = models.CharField(...)`管理员从数据库接口定义的密码 () 的字段。

我编写了自己的身份验证后端：

```
from auth.models import Owners
from django.contrib.auth.models import User

class AuthBackend(object):
    def authenticate(self, username, password):
        try:
           owner = Owners.objects.get(id=username, password=password)
           try:
               user = User.objects.get(id=owner.id)
               print user
           except User.DoesNotExist:
               user = User(id=owner.id)
               user.is_staff = False
               user.is_superuser = False
               user.set_unusable_password()
               user.save()
           return user

       except Owners.DoesNotExist:
           return None

   def get_user(self, id):
       try:
           return User.objects.get(id=id)
       except User.DoesNotExist:
           return None 
```

我想问一些可能微不足道的问题，但是由于我现在创建了用户并且我使用了具有自己的表等的 django 身份验证模块，我是否也应该将它们添加到我使用的遗留数据库中？（现在我正在处理一个实例它和 synchdb 我在其中添加了身份验证表，但是当我使用 db 本身时呢？我应该这样做吗？）这是处理我的应用程序现有身份验证系统的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:09:04.420

authdb 条目通常比密码长得多，并且相应地需要更多的存储空间。

```
$<algorithm>$<salt>$<hash> 
```

有关详细信息，请参阅 Linux 的`crypt(3)`手册页。

# iphone - 如何在我的应用委托中使用 UIActivityViewIndicator？

> ID：11870155
> 
> 赞同：2
> 
> 时间：2012-08-08T17:43:37.273
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, uiactivityindicatorview

我的应用程序委托中有一个方法，该方法被调用以从 Web 服务器中提取信息。有没有办法轻松地将 UIActivityViewIndicators 合并到应用程序委托中？到目前为止我在网上找到的所有内容都显示需要添加为子视图的指标。这是可行的吗？如果是这样，你能指出我在哪里找到这个的正确方向吗？

[编辑] 我使用的是故事板而不是 xibs。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T17:58:41.427

您可以轻松添加`UIActivityViewIndicators`几行代码：

```
UIActivityIndicatorView *aiv = [[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];  
aiv.center = self.window.rootViewController.view.center;
[self.window.rootViewController.view addSubview:aiv];
[aiv startAnimating]; 
```

但是有很多像[MBProgressHUD](http://www.cocoacontrols.com/platforms/ios/controls/mbprogresshud)这样的开源项目可以为您提供更时尚的指示器，以及其他附加功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:57:13.497

是的，您可以直接从 AppDelegate 添加 UIActivityIndi​​catorView。AppDelegate 中应该有 UIViewController 的对象或属性。在那里，您可以添加它。

```
[viewController.view addSubView:activityIndicatorView]; 
```

# javascript - Knockout、ViewModel 在另一个对象中和数据绑定

> ID：11870157
> 
> 赞同：1
> 
> 时间：2012-08-08T17:43:45.407
> 
> 标签：javascript, data-binding, knockout.js

我正在为游戏做一个 javascript 应用程序，目标是为 MMORPG 制作一个“构建计算器”。我想将视图与我的应用程序中已经存储的数据同步。我搜索并测试了不同的框架，knockout-js 似乎是我最好的解决方案

html:

```
<script>
var simulatorTool = new SimulatorTool();
</script>

<body>
<p data-bind="text: test"> </p>
<p data-bind="text: test2"> </p>
</body> 
```

Javascript工具：

```
function SimulatorTool()
{

meSim = this;

this.config = new Config();
this.data = new Data();
this.stuff = new Stuff();
this.traits = new Traits();
this.view = new AppViewModel();
$(function(){
    ko.applyBindings(meSim.view);
});

... functions

} 
```

查看型号：

```
function AppViewModel() {
    this.test = "Test!";

    this.test2 = ko.computed(function() {
        return meSim.data.selectedData['profession']
    }, this); 
} 
```

问题是我不知道如何将 html 绑定到另一个对象中的视图。我什至不知道这是否可能。我想做这样的事情

```
 <p data-bind="simulatorTool.view, text: test"> </p> 
```

如果没有，如果视图与应用程序分离，我如何访问“SimulatorTool”中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:47:05.397

我认为你想要做的是这样的 - 让我们在simulator_tool.js中说：

```
var SimulatorTool = SimulatorTool || {};

SimulatorTool.ViewModel = function(initialData){
  //bindings etc
};

SimulatorTool.Start - function(initialData){
  var viewModel = SimulatorTool.ViewModel(initialData);
  ko.applyBindings(viewModel);
  return viewModel //if you want to play with it in the console...
}; 
```

然后，在您的页面上：

```
<script>
$().ready(function()){

  var payload = @Html.Raw(ViewBag.SimulatorJSON);
  SimulatorTool.Start(payload);

}
</script> 
```

理想情况下，您可能有一个已设置 SimulatorTool 命名空间的 application.js 文件，因此您可以摆脱声明。我不知道 JSON 转储是否已经设置了配置，或者它是否设置在其他地方 - 但通常这一切都属于使用函数或其他东西的自己的命名空间：

```
SimulatorTool.Config = {

}

SimulatorTool.Stuff = {

}
//etc 
```

# google-apps-script - 如何从 ScriptDB 数据库中检索特定数据？

> ID：11870158
> 
> 赞同：0
> 
> 时间：2012-08-08T17:43:44.657
> 
> 标签：google-apps-script

作为一个学习练习，我尝试查询 ScriptDb 并在我的脚本有他们的电子邮件地址时返回一个人的姓名。下面的函数返回“ScriptDbResult”而不是正确的名称（应该是 Patrick Farmer - 请参见函数下方的列表）。有人可以告诉我我做错了什么吗？

```
function getNameFromDb() {
var email = "patrickf@spambob.com";
var db = ScriptDb.getMyDb();
var result = db.query(
    {Names: {Emails: email}});
Logger.log(result);
} 
```

这是 Logger 在数据库中显示的内容：

```
{
  "Emails": "lucaj@spambob.com",
  "Names": "Luca Jenkins"
}
{
  "Emails": "patrickf@spambob.com",
  "Names": "Patrick Farmer"
}
{
  "Emails": "elizabethj@trashymail.com",
  "Names": "Elizabeth Jennings"
}
{
  "Emails": "gabrielr@pookmail.com",
  "Names": "Gabriel Ryan"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:50:47.667

你快到了。你确实得到了一个 ScriptDBResult 对象。您需要使用下一种方法来验证结果

```
while (result.hasNext()){
  var obj = result.next(); 
  Logger.log(obj.Names);
  Logger.log(obj.Emails);
} 
```

# java - 在 Android 中打印 LinkedHashMap 中的所有键

> ID：11870161
> 
> 赞同：1
> 
> 时间：2012-08-08T17:44:01.203
> 
> 标签：java, android, hashmap, linkedhashmap

我的代码中有一个`LinkedHashMap`：

```
 protected LinkedHashMap<String, String> profileMap; 
```

我想打印`profileMap`. 如何使用一个`Iterator`或一个循环来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T17:45:02.607

您应该遍历`Set`from [`Map.keySet`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29)：

```
for (final String key : profileMap.keySet()) {
  /* print the key */
} 
```

`Iterator`明确地使用，

```
final Iterator<String> cursor = profileMap.keySet().iterator();
while (cursor.hasNext()) {
  final String key = cursor.next();
  /* print the key */
} 
```

然而，编译时两者或多或少是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T17:49:59.700

您可以迭代`Map Entries`，您可以选择打印`e.getKey()`或`e.getValue()`根据您的选择。

```
 for(Map.Entry<String, String> e : map.entrySet()) {
        System.out.println(e.getKey());
    } 
```

# ruby-on-rails-3 - 使用 ajax 的 Rails 3 会话管理

> ID：11870163
> 
> 赞同：0
> 
> 时间：2012-08-08T17:44:19.893
> 
> 标签：ruby-on-rails-3, jquery, session-variables, session-management

我正在开发一个网站，该网站（本质上）希望将 a`client_id`传递给应用程序以打开/关闭品牌（取决于 client_id）。

这是我的`ApplicationController`

```
 helper_method :current_client
  before_filter :set_client

   def set_client
     unless params[:client_id].blank?
       session[:client_id] = params[:client_id] unless session[:client_id] == params[:client_id]
     else
       session[:client_id] = "default_client_id_goes_here"
     end
   end

  def current_client
    @current_client ||= Client.find_by_app_id(session[:client_id])
  end 
```

这是我的问题：
如果我发送一个依赖于当前会话客户端的 AJAX 请求，它总是默认为假设没有`client_id`传入。这也会导致写入问题，`link_to`或者因为您必须在整个过程`redirect`中跟上参数`client_id`应用程序。即使使用 ajax 调用，是否仍然可以继续访问会话变量？

CSRF Ajax 设置：

```
$.ajaxSetup
    beforeSend: (xhr) ->
        sid = $("meta[name='csrf-token']").attr "content";
        xhr.setRequestHeader "X-CSRF-Token", sid 
```

# authentication - 如何实现登录过程和会话？

> ID：11870165
> 
> 赞同：-1
> 
> 时间：2012-08-08T17:44:24.177
> 
> 标签：authentication, user-preferences

我有一个应用程序，它具有 PHP API 类来连接到 MySQL 数据库和 SQLite 数据库处理程序来存储用户信息，但是我将如何实现登录过程并建立会话，以便用户可以根据用户权限使用应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:21:29.570

用户登录后，您应该在服务器端创建一个会话并将某种身份验证信息发送回客户端。这可以是会话 ID 或某种身份验证令牌。对于您在客户端执行的每个未来请求，您都必须将此身份验证信息发送回服务器。然后服务器检查身份验证信息（例如验证令牌、检查会话是否未过期等）。如果身份验证信息有效，则服务器返回对客户端请求的响应。

您用于传输身份验证信息的方式取决于您要使用的登录类型。例如，您可以将信息存储在 cookie 或另一个 http 标头中。

取决于您传输身份验证信息的方式，可能需要将身份验证信息保存在您的应用程序中（以便您可以将其添加到未来的请求中）。如果你必须这样做，你应该将这些信息保存在内存中，并且出于安全原因避免将其保存在任何 android 数据存储（例如 sqlite db）中。

# ruby-on-rails - 通过 rake 任务更新不同模型中的字段

> ID：11870169
> 
> 赞同：0
> 
> 时间：2012-08-08T17:44:49.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个产品模型，有一个类别列。用户能够在同一字段中保存多个逗号分隔值。

我刚刚完成了对数据库的重构，因此通过创建一个类别表和一个 category_products 连接。

如何使用类别更新我的类别模型，同时使用相应的 category_id 和 product_id 更新连接表。

到目前为止，这是我在 rake 任务中所做的，基本上只是将类别与产品表分开。

```
Product.find(:all).each do |k|
  k.categories.split(",").each do |w|
    puts k.id + " " + w
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:48:53.140

也许是这样的：

```
Product.find(:all).each do |k|
  k.categories.split(",").each do |w|
    Category.create(:description => w, :product_id => k.id)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:53:32.253

这是一个好的开始。假设您使用的是 HABTM 关联并且单词上没有冲突`category`（即，您的新表类似于 Cats）：

```
Product.find(:all).each do |product|
  product.categories.split(",").each do |category|
    if Cats.exists?(name: category)
      product.cats.create(name: category)
    else
      product.cats << Cats.find_by_name(category)
    end
  end
end 
```

此外，由于这是一次性操作，而不是多次执行的任务，因此这可能是数据库迁移的更好候选者。这意味着它需要在一个`up/down`或`change`分组内，并编写一个反函数。

# reporting-services - 如何使用可变过滤器构建 SSRS 报告？

> ID：11870172
> 
> 赞同：0
> 
> 时间：2012-08-08T17:45:05.477
> 
> 标签：reporting-services, ssas, reusability

我有越来越多的报告出现以下模式：用户想要相同报告的多个副本，但具有不同的过滤器。布局、逻辑和返回的数据是相同的，但要应用大约 5 组不同的互斥过滤器。

实现这一目标的最佳方法是什么？这些是 SSAS 多维数据集之上的报告，过滤器会影响 MDX 查询，所以我认为子报告不会起作用，除非我遗漏了什么。

任何有关如何在报告之间重用部分或全部布局和报告逻辑的提示都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:54:49.890

如何创建不同的订阅并在订阅上配置参数？

# android - 如何创建 2D 地图以在 Android 游戏中使用？

> ID：11870175
> 
> 赞同：0
> 
> 时间：2012-08-08T17:45:11.043
> 
> 标签：android

我正在寻找可以制作 2D 地图以在 Android 游戏中使用的程序。我如何导入这张地图（可以是什么格式？`.bin`，`.fmx`？）。我正在阅读有关平铺地图编辑器的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:50:53.537

可以使用[Tiled](http://www.mapeditor.org/)等程序创建 TMX 地图。可以在 Android 中使用 2D 地图，而无需使用像[AndEngine](http://www.andengine.org/)这样的游戏引擎。但是，这意味着您必须编写自己的代码来解析、显示、移动和与它们交互。因此，使用已经为您提供方法的游戏引擎要简单得多，就像 AndEngine 所做的那样。您还可以查看[libGDX](http://code.google.com/p/libgdx/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:04:01.353

我会推荐程序[tiled](http://www.mapeditor.org/)。如果您想要有关如何制作平铺地图的教程，请查看[ray 的](http://www.raywenderlich.com/1163/how-to-make-a-tile-based-game-with-cocos2d)ios 教程。地图创建对于 android 将是相同的。要使用您的 android 地图实现，请查看现在可用于 android 的 [cocos2d-x]。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:00:39.547

您可以使用 Mobile Atlas Creator 为 Android 创建离线地图

[点击](http://mobac.sourceforge.net/)

# python - 将文件复制到目录

> ID：11870177
> 
> 赞同：3
> 
> 时间：2012-08-08T17:45:18.970
> 
> 标签：python, python-2.7

我想`shutil.copy()`将文件复制到另一个目录。我尝试执行以下代码：

```
copy(open("/home/dizpers/pytest/testfile1.txt", "r"), "/home/dizpers/pytest") 
```

但是python shell向我显示了错误消息：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/shutil.py", line 116, in copy
    dst = os.path.join(dst, os.path.basename(src))
  File "/usr/lib/python2.7/posixpath.py", line 112, in basename
    i = p.rfind('/') + 1
AttributeError: 'file' object has no attribute 'rfind' 
```

所以，我明白为什么会出现这个问题。`open()`我用函数打开文件。而且我认为我也应该**打开一个**这样的目录。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:46:50.030

```
shutil.copy ("somefile.txt","otherfile.txt") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T17:47:16.813

`shutil.copy`接受两个路径，而不是文件对象和路径，您应该只指定路径而不是为第一个参数创建文件对象

如果您需要为第一个参数使用文件对象，则可以使用[`shutil.copyfileobj`](http://docs.python.org/library/shutil.html#shutil.copyfileobj)，但您也必须为第二个参数使用文件对象。

# php - 如何将函数/常量绑定到变量，PHP

> ID：11870184
> 
> 赞同：1
> 
> 时间：2012-08-08T17:45:49.243
> 
> 标签：php, mysql, data-binding, pdo

我正在尝试制作一个不错的小功能来为我`PDO`绑定：

```
function autoBind($result, $values)
{
$i = 1 ;
foreach($values as $currentValue) {
    if(is_numeric($currentValue))
    {
        $bindType = PDO::PARAM_INT ;
    }
    elseif(is_string($currentValue) || is_float($currentValue))
    {
        $bindType = PDO::PARAM_STR ;
    }
    else
    {
        return false ; // Error
    }
    $result->bindParam($i, $currentValue, $bindType) ;
    $i++ ;
}
$result->execute() ;
} 
```

但它不起作用。如果我 echo `$bindType`，它会出现为“1”，然后是“2”。

我需要做什么才能让它给我我想要的东西？

* * *

感谢您的回复，

这和手动绑定一样安全吗？

在什么情况下你会手动绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:53:33.880

不需要这个函数，因为[PDOStatement::execute](http://php.net/manual/en/pdostatement.execute.php)已经支持传入参数数组。只需这样做：

```
$result->execute( $values ); 
```

# gwt - GWT - 将 CaptionPanel 标题设置为粗体

> ID：11870185
> 
> 赞同：0
> 
> 时间：2012-08-08T17:45:50.330
> 
> 标签：gwt

将 CaptionPanel 标题设置为粗体的最佳方式是什么？我希望我可以应用 CSS 样式。我目前正在做：

```
CaptionPanel examplePanel = new CaptionPanel();
examplePanel.setCaptionHTML("<b>CaptionPanel Title</b>"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:49:53.850

字幕翻译成 HTML`legend`元素。所以使用 CSS 将`legend`元素字体设置为粗体。

如果您希望在所有字幕上使用它，只需执行以下操作：

```
legend {
  font-weight: bold;
} 
```

但是，如果您只希望它用于特定的`CaptionPanel`，则向其添加样式名称：

```
examplePanel.addStyleName("examplePanelStyleName"); 
```

并在 CSS 中使用面板样式名称：

```
.examplePanelStyleName legend {
   font-weight: bold;
} 
```

# linux - dd if=/dev/sdb 命令是做什么的？

> ID：11870189
> 
> 赞同：0
> 
> 时间：2012-08-08T17:46:12.343
> 
> 标签：linux, bash, dd

我已经格式化了我的 pendrive，它在 /dev/sdb 中。当我执行命令**dd if=/dev/sdb**命令时，它会继续在控制台中打印一些垃圾。我的疑问是，当我格式化 pendrive 并执行这个命令时，它不应该打印任何东西。但是为什么要打印呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:50:14.627

格式化驱动器不会（通常）将数据归零；它只是将数据写入驱动器上的某些位置，以便您的操作系统认为没有分配空间。

如果您真的想将数据归零，可以运行：

```
dd if=/dev/zero of=/dev/sdb bs=4096 
```

这会将零写入`/dev/sdb`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T17:51:35.787

格式化设备不会删除设备上以前的数据。所有格式化都会覆盖文件系统数据以使其标记为空。任何未覆盖的先前数据在技术上仍然存在。此外， dd 将打印出原始数据的字节，因此即使您用全 0 覆盖驱动器， dd 也只会返回一大堆零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-09T18:43:09.387

dd 将打印到 STDOUT（终端窗口），除非你给它一个输出文件。

例子：

```
dd if=dev/sdb of=backup.img 
```

术语：

*   dd：磁盘复制器
*   如果：输入文件
*   of：输出文件

# javascript - 为什么当我尝试将函数绑定到自身时，“this”对象仍然引用窗口？

> ID：11870190
> 
> 赞同：2
> 
> 时间：2012-08-08T17:46:20.157
> 
> 标签：javascript

```
var a = function() {

  alert( this ); // [object Window]
  alert(  a   ); // undefined

}.call( a ); 
```

为什么`this`仍然引用window对象和`a`undefined。或者，当我按照以下方式进行操作时，`this`等于函数`a`未定义。

```
var a = function() {

  return this === a; // true

};

a.call(a); 
```

谁能解释为什么这两个看似等效的函数会给出不同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:49:10.163

因为在您的第一个示例`a`中，直到您的函数调用完成后才分配。

详细地说，这是第一个示例中发生的情况：

1.  定义了匿名函数。
2.  使用`a`作为`this`参数调用该函数。
3.  该函数执行，但由于`a`仍未定义，因此`this`回退到`window`。
4.  函数返回`undefined`，它被分配给`a`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T17:50:13.873

```
var a = function() {

  alert( this ); // [object Window]
  alert(  a   ); // undefined

}.call( a ); 
```

`a`这里成为评估函数的结果：即`a = (function() { ... }).call(a)`，而不是函数本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:49:19.230

在第一个示例中，`a`直到调用函数后才分配，因此`a`未定义。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-12-23T23:48:02.000

试试这样

```
var a = function() {...}
a.call(a) 
```

# mysql - MySql永久连接错误`无法连接`

> ID：11870193
> 
> 赞同：0
> 
> 时间：2012-08-08T17:46:30.953
> 
> 标签：mysql, ado.net, mono, database-connection

-edit- 没关系，这是绑定地址。但也许你可以解释为什么我的 php 应用程序能够连接？或者如何制作它，以便我可以通过 IP 地址或 127.0.0.1 连接。我当然没有配置、告诉或更新站点以使用我的 IP 地址而不是 127.0.0.1

我在使用单声道的 debian 上运行的 C# 上使用 MySql。我的应用程序用来工作。然后发生了几件事。我的磁盘空间用完了，我更改了配置，因此 ibdata 不是一个大文件。我的数据库已满并再次耗尽磁盘空间。我还将绑定地址从 127.0.0.1 更改为我的机器 IP 地址。我的应用程序使用 127.0.0.1 但我不确定 php 网站使用什么。我感觉我做了其他更改（例如将 utf8 作为默认设置），但我不记得其中的每一个。

我得到下面的例外。如果我使用`mysql -u user -p`我可以作为所述用户登录。但是我的应用程序仍然出现异常。我不知道如何调试它。我可以检查什么以及如何解决这个问题？

我的 php 网站似乎可以访问数据库。我的一个 C# 没有，我的控制台应用程序没有。当然，他们都使用不同的用户名。

> MySql.Data.MySqlClient.MySqlException：无法连接到任何指定的 MySQL 主机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:57:25.967

该错误与用户无关。
“无法连接到**任何指定的 MySQL 主机**”
对我来说，它表示您已经配置了一个（多个）MySQL 主机，您的应用程序正在尝试连接 - 并且失败了。很可能是您绑定地址更改造成了这个问题（您为什么要这样做？）
原因可能有很多：
1）如果您的 SQL 服务器驻留在具有多个网卡/连接的计算机上，您的新配置可能允许连接在其中一个上，但不在其他上。
2) AFAIR http 客户端与直接 TCP 客户端的处理方式略有不同，我认为这与 http 服务器解释 SQL 服务器地址的方式有关（我可能完全错了这一点）。

# ruby-on-rails - 无法在 Windows 7 上安装 ruby -debug-base19 (0.11.25)

> ID：11870194
> 
> 赞同：0
> 
> 时间：2012-08-08T17:46:46.180
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

我正在使用使用 ruby​​installer 安装的 python 3.2.3 和 ruby​​ 1.9.3-p194。当我尝试按照教程（coursera Saas 类）中所示执行此命令时，我遇到了无法解决的错误（我是 ruby​​ 新手）

```
D:\Work\repository\hw2_rottenpotatoes>bundle install --without production
Fetching gem metadata from http://rubygems.org/.........
Using rake (0.9.2.2)
Using multi_json (1.0.4)
Using activesupport (3.1.0)
Using bcrypt-ruby (3.0.1)
Using builder (3.0.0)
Using i18n (0.6.0)
Using activemodel (3.1.0)
Using erubis (2.7.0)
Using rack (1.3.5)
Using rack-cache (1.0.3)
Using rack-mount (0.8.3)
Using rack-test (0.6.1)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.0.3)
Using actionpack (3.1.0)
Using mime-types (1.17.2)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.3.0)
Using actionmailer (3.1.0)
Using arel (2.2.1)
Using tzinfo (0.3.31)
Using activerecord (3.1.0)
Using activeresource (3.1.0)
Using archive-tar-minitar (0.5.2)
Using bundler (1.2.0.rc)
Using coffee-script-source (1.2.0)
Using execjs (1.2.13)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Using json (1.6.3)
Using rdoc (3.12)
Using thor (0.14.6)
Using railties (3.1.0)
Using coffee-rails (3.1.1)
Using columnize (0.3.5)
Using haml (3.1.4)
Using jquery-rails (1.0.19)
Using libv8 (3.3.10.4)
Using ruby_core_source (0.1.5)
Using linecache19 (0.5.12)
Using rails (3.1.0)
Installing ruby-debug-base19 (0.11.25) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... no
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:39: Use RbConfig instead of obsolete and deprecate
fig.
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... yes
checking for iseq.h... yes
checking for insns.inc... yes
checking for insns_info.inc... yes
checking for eval_intern.h... yes
creating Makefile

make
generating ruby_debug-i386-mingw32.def
compiling breakpoint.c
compiling ruby_debug.c
ruby_debug.c:29:19: error: conflicting types for 'rb_iseq_compile_with_option'
C:/RailsInstaller/Ruby1.9.3/include/ruby-1.9.1/ruby-1.9.3-p125/vm_core.h:505:7: note: previous declaration of 'rb_iseq_compile_with_option' was here
ruby_debug.c: In function 'context_jump':
ruby_debug.c:2414:53: warning: comparison between signed and unsigned integer expressions
ruby_debug.c:2428:27: warning: comparison between signed and unsigned integer expressions
make: *** [ruby_debug.o] Error 1

Gem files will remain installed in C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby-debug-base19-0.11.25 for inspection.
Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby-debug-base19-0.11.25/ext/ruby_debug/gem_make.out
An error occurred while installing ruby-debug-base19 (0.11.25), and Bundler cannot continue.
Make sure that `gem install ruby-debug-base19 -v '0.11.25'` succeeds before bundling. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T15:19:12.910

看看你的`C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby-debug-base19-0.11.25/ext/ruby_debug/gem_make.out`文件

# c++ - 部署简单的 C++ 应用程序

> ID：11870195
> 
> 赞同：1
> 
> 时间：2012-08-08T17:46:49.347
> 
> 标签：c++, visual-studio-2010, dll, deployment

我已经编写了一个简单的 C++ 程序，现在我想在另一台计算机上使用它。

我使用 Visual Studio 2010 进行开发，我只使用标准库函数（iostream、fstream、字符串等），但是当我尝试在 Win XP 机器上运行它时，它不会运行。它说程序需要某些dll才能运行。

部署程序的最简单方法是什么，以便在 Visual Studio 中编译后不仅生成可执行文件（.exe），还生成 .dll。

注意：我不想使用 Visual Studio 安装程序。

PS：我会很感激有关部署应用程序的好文章的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:51:37.230

正如上面的评论所说，您可以以静态方式链接到标准运行时（不是 100% 确定如何做到这一点，尽管我确信您可以用谷歌搜索它）或者您可以从 Microsoft 安装可再发行运行时：

[http://www.microsoft.com/en-ca/download/details.aspx?id=5555（x86](http://www.microsoft.com/en-ca/download/details.aspx?id=5555)或 32 位） [http://www.microsoft.com/en-ca/download/details.aspx? id=14632](http://www.microsoft.com/en-ca/download/details.aspx?id=14632)（x64 或 64 位）

因此，将它们安装在目标机器上，然后尝试您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:53:44.560

[http://www.microsoft.com/en-us/download/details.aspx?id=5555](http://www.microsoft.com/en-us/download/details.aspx?id=5555)

此链接为使用 VS2010 构建的项目使用的 C 和 C++ DLL 提供分发包。

请注意支持的操作系统，即：

带有 Service Pack 3 的 Windows XP（除 Starter Edition 之外的所有版本）

[http://msdn.microsoft.com/en-us/library/zebw5zk9(VS.100).aspx](http://msdn.microsoft.com/en-us/library/zebw5zk9(VS.100).aspx)

此链接是部署指南，因此最终用户无需自行搜索这些库。此外，仅供参考，发布版本和调试版本之间存在差异，我高度怀疑第一个链接的安装是否提供了运行时的任何调试版本。

# windows - 打开主菜单总是模态操作吗？

> ID：11870200
> 
> 赞同：2
> 
> 时间：2012-08-08T17:47:03.480
> 
> 标签：windows, winapi, menu, modal-dialog

我不知道怎么做，但似乎当打开窗口的主菜单时，我的程序中的主消息循环（PeekMessage/GetMessage 等）停止了。这种行为似乎很像打开模式对话框，因为当消息到达时我的 WindowProc 仍然被调用，所以一定有其他消息循环在某处保持这种情况发生。

我不知道这是怎么发生的（还没有测试），哪个函数或消息阻塞了主消息循环，我猜它发生在 DefWindowProc 的某个地方，因为某些消息与打开菜单有关。

这是 Windows 上主菜单的默认行为吗？在这种情况下，这样做的真正意义是什么？可以更改它以便主消息循环继续运行，而不是一些内部循环吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:44:13.563

我错了，所以我更新了这个答案。

Windows 在显示菜单时通常会进入内部模式消息循环。当Windows 进入此循环时， [WM_ENTERMENULOOP消息会通知您。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647595%28v=vs.85%29.aspx)

您可以通过设置`MNS_MODELESS`标志使菜单无模式。例如，您可以对窗口执行以下操作`hWnd`：

```
HMENU hMenu = GetMenu(hWnd);
MENUINFO menuInfo;
menuInfo.cbSize = sizeof(MENUINFO);
menuInfo.fMask = MIM_STYLE;
GetMenuInfo(hMenu, &menuInfo);
menuInfo.fMask = MIM_STYLE;
menuInfo.dwStyle |= MNS_MODELESS;
SetMenuInfo(hMenu, &menuInfo); 
```

不幸的是，这会导致您的主窗口在打开菜单时失去激活，这在视觉上会分散注意力。[这个答案](https://stackoverflow.com/a/8690569/292432)的第二部分解释了菜单如何在模态情况下避免这个问题。 [这个答案](https://stackoverflow.com/a/8669982/292432)暗示了一个解决方案；您需要干扰`WM_NCACTIVATE`消息，以使主窗口的外观与其激活不同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T16:29:27.160

对于 hMenuBar，您可以尝试以下方式：1) MENUINFO.fMask|MIM_STYLE|MIM_APPLYSUBMENUS, 2) GetMenuInfo(hMenuBar,addr MENUINFO), 3) MENUINFO.dwStyle|MNS_MODELESS, 4) SetMenuInfo(hMenuBar,addr MENUINFO)。

# perl - 从 Perl 中的输出记录

> ID：11870205
> 
> 赞同：7
> 
> 时间：2012-08-08T17:47:19.713
> 
> 标签：perl, logging, parallel-processing

我有一个程序应该运行一组其他程序并收集它们的输出以进行日志记录。只要有输出到标准输出，一切正常。

这导致了我的两个问题：

1.  如何在一个文件中同时捕获`STDIN`和捕获`STDERR`另一个程序？

2.  如果根本没有输出（或`STDERR`只有输出），程序将卡在行上：

    ```
    while (<$input>) 
    ```

如何让程序等待来自另一个运行时间不确定的程序的可能输出，并且在程序完成执行时如果没有输出仍然继续。

这是代码的那部分

```
my $pid = open (my $input, '-|', "$prog $args")
        or push @errors, "A failute has occurred in $prog $args";
if(not @errors){
    while (<$input>){ #POSSIBLE LOCATION FOR HANG UP IF NO PRINTING IS DONE
        if($input =~ /^END\n$/){
            last;
        }
        print $fh $_;
    }
}
else{
    print $fh "An error has occurred with executing \"$prog $args\"";
} 
```

注意：`$fh`是我的文件处理程序，用于写入我的日志文件，并`@errors`用于在我的程序中内部报告错误。

编辑：我在尝试[Proc::Reliable](http://p3rl.org/Proc%3a%3aReliable)`STDOUT`路由时遇到的一个问题是它似乎对and有后遗症`STDERR`，我需要在每次调用运行后修复这些问题。这导致了我的代码中的另一个问题。我正在并行运行，并且对所有线程进行任何更改`STDOUT`并`STDERR`影响所有线程*（至少使用 Windows）*。

[IO::CaptureOutput](http://p3rl.org/IO%3a%3aCaptureOutput)对我来说也有同样的问题，但它试图在内部更正`STDOUT`和`STDERR`混乱并导致发生以下错误：

```
Couldn't remove temp file 'C:\Users\SBLAKE~1\AppData\Local\Temp\m8E3pUGfOS' - Permission denied at C:/Perl/site/lib/IO/CaptureOutput.pm line 82 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:21:01.710

如果您从类似 POSIX 的 shell 启动，则`2>&1`表示法会将标准错误发送到与标准输出相同的位置：

```
some-program-to-be-logged 2>&1 | perl logger.pl -o /chosen/log.file 
```

标准输出和标准错误都发送到 Perl 日志记录脚本的标准输入。

记录器脚本中的输入循环将挂起，直到有输入要读取，或者直到管道打开以进行写入的所有进程关闭管道（通常是因为它们退出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:07:17.967

看看[Proc::Reliable](http://p3rl.org/Proc::Reliable)，它似乎是你想要的。

也可以看看：

*   [如何在 Perl 中同时捕获标准错误、标准输出和退出代码？](https://stackoverflow.com/questions/109124/how-do-you-capture-stderr-stdout-and-the-exit-code-all-at-once-in-perl)
*   [捕获::小](http://p3rl.org/Capture::Tiny)
*   [IO::捕获输出](http://p3rl.org/IO::CaptureOutput)

# matlab - 加载存储在字符串中的文件名，然后绘制数据

> ID：11870206
> 
> 赞同：0
> 
> 时间：2012-08-08T17:47:21.180
> 
> 标签：matlab, file-io, mat-file

我正在尝试创建一个脚本，该脚本会询问用户稍后将绘制其内容的 txt 文件的文件名。

```
filename = input('What is the filename (without the extension) e.g. RCP6: ','s');
if isempty(filename)
    filename=input('What is the filename (without the extension) e.g. RCP6: ','s');
end

ext =  input('What is the filetype (extension) e.g. .txt: ','s');
if isempty(ext)
    ext=input('What is the filetype (extension) e.g. .txt: ','s');
end

filew = strcat(filename,ext)

load(filew)
A = filename
Y = A(:,1)
E = A(:,2)

plot(Y,E)
xlabel('calendar year')
ylabel('annual fossil carbon emissions (GtC)') 
```

如所写，代码正确连接了文件名和分机，但是，似乎 load (filew) 没有正确加载该文件，因为例如给定文件名 = RCP3PD，Y = R 和 E = C，而不是 Y 存储第一个RCP3PD.txt 中的值列？

有什么建议么？我已经看到其他“从字符串加载文件”线程引用了 sprintf() 函数——这适用于这里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:53:08.153

当您加载数据时，您需要将其另存为某种东西。所以 ：

```
load(filew) 
```

应该看起来像

```
data = load(filew); 
```

然后访问您的变量只需使用：

```
A = data.A; % assume that data is a struct with a field named A
Y = A(:,1);
E = A(:,2); 
```

*其他想法*

您可能会考虑将输入文件名的逻辑更改为以下内容：

```
valid = 0;
while(valid==0)
  filename = input('What is the filename (without the extension) e.g. RCP6: ','s');
  ext =  input('What is the filetype (extension) e.g. .txt: ','s');
  if exist([filename, ext], 'file')
    valid = 1;
  end
end 
```

而不是检查文件名是否为空，而是检查用户是否提供了实际存在的文件名/扩展名对。如果没有，请继续询问，直到他们询问为止。

如果你想变得花哨，你可以使用`uigetfile`而不是要求用户输入文件名。这会向用户显示一个文件选择器窗口，这样您就知道他们选择了一个有效的文件。此外，它允许您过滤用户可以选择的文件。

# javascript - 为什么这在 jsfiddle 中有效，但在我的文档中无效

> ID：11870207
> 
> 赞同：3
> 
> 时间：2012-08-08T17:47:22.240
> 
> 标签：javascript, jquery

我发现了一个很棒的 jsfiddle，有人制作并想在我的项目中使用它的一部分：

[http://jsfiddle.net/manuel/29gtu/](http://jsfiddle.net/manuel/29gtu/)

它适用于 jsfiddle，但不适用于我的 HTML 文档。这是我的文档中的内容：

```
<!DOCTYPE html>
<html>
<head>
<script src="scripts/jquery-1.7.2.js"></script>

<script>

$("button").click(function() {
    var id = $("#id").val();
    var text = "icon-"+id;
    // update the result array
    var result = JSON.parse(localStorage.getItem("result"));
    if(result == null)
        result = [];

    result.push({id: id, icon: text});
    // save the new result array
    localStorage.setItem("result", JSON.stringify(result));

    // append the new li
    $("#bxs").append($("<li></li>").attr("id", "item-"+id).html(text));
});

// on init fill the ul
var result = JSON.parse(localStorage.getItem("result"));
if(result != null) {
    for(var i=0;i<result.length;i++) {
        var item = result[i];
        $("#bxs").append($("<li></li>").attr("id", "item-"+item.id).html(item.icon));
    }
}​

</script>
</head>

<body>
<ul id="bxs" class="tabs"> 
</ul>

<input type="text" id="id" /><button>save</button>
</body>
</html> 
```

代码是从小提琴中复制和粘贴的。我认为这与我没有本地存储插件有关。为了让 jsfiddle 工作，我需要一些我缺少的外部插件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T17:49:55.533

您应该将整个代码包装在`$(document).ready(function() {...});`

所以。

```
<script type="text/javascript">

    $(document).ready(function() {
        $("button").click(function() {
            var id = $("#id").val();
            var text = "icon-" + id;
            // update the result array
            var result = JSON.parse(localStorage.getItem("result"));
            if (result == null) result = [];

            result.push({
                id: id,
                icon: text
            });
            // save the new result array
            localStorage.setItem("result", JSON.stringify(result));

            // append the new li
            $("#bxs").append($("<li></li>").attr("id", "item-" + id).html(text));
        });

        // on init fill the ul
        var result = JSON.parse(localStorage.getItem("result"));
        if (result != null) {
            for (var i = 0; i < result.length; i++) {
                var item = result[i];
                $("#bxs").append($("<li></li>").attr("id", "item-" + item.id).html(item.icon));
            }
        }

    });

</script> 
```

### 笔记

在`jsfiddle` `onLoad`模式下为您执行此操作，即当您`onLoad`从左侧面板下拉菜单中选择时，所有 js 代码都会在所有资源出现在 DOM 后执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T17:49:38.447

像这样放入`$(document).ready`，还要给出脚本标签的类型

```
<script type="text/javascript">
$(document).ready(function() {   

    $("button").click(function() {
        var id = $("#id").val();
        var text = "icon-" + id;
        // update the result array
        var result = JSON.parse(localStorage.getItem("result"));
        if (result == null) result = [];

        result.push({
            id: id,
            icon: text
        });
        // save the new result array
        localStorage.setItem("result", JSON.stringify(result));

        // append the new li
        $("#bxs").append($("<li></li>").attr("id", "item-" + id).html(text));
    });

    // on init fill the ul
    var result = JSON.parse(localStorage.getItem("result"));
    if (result != null) {
        for (var i = 0; i < result.length; i++) {
            var item = result[i];
            $("#bxs").append($("<li></li>").attr("id", "item-" + item.id).html(item.icon));
        }
    }
})​;    
 </script> 
```

# python - TF-IDF 简单使用 - NLTK/Scikit 学习

> ID：11870210
> 
> 赞同：7
> 
> 时间：2012-08-08T17:47:32.553
> 
> 标签：python, nlp, nltk, scikit-learn, tf-idf

好的，所以我有点困惑。然而，这应该是一个简单直接的问题。

在针对整个语料库计算文档的 TF-IDF 矩阵后，我得到了与此非常相似的结果：

```
array([[ 0.85...,  0\.  ...,  0.52...],
       [ 1\.  ...,  0\.  ...,  0\.  ...],
       [ 1\.  ...,  0\.  ...,  0\.  ...],
       [ 1\.  ...,  0\.  ...,  0\.  ...],
       [ 0.55...,  0.83...,  0\.  ...],
       [ 0.63...,  0\.  ...,  0.77...]]) 
```

如何使用此结果来获取与搜索查询最相似的文档？基本上我正在尝试为维基百科重新创建一个搜索栏。基于搜索查询，我想从 Wikipedia 返回最相关的文章。在这种情况下，有 6 篇文章（行），搜索查询包含 3 个词（列）。

我是将列中的所有结果相加还是将所有行相加？较大的值是最相关的还是最低的值是最相关的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:21:31.083

你熟悉[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity "余弦相似度")吗？对于每篇文章（向量 A），计算其与查询（向量 B）的相似度。然后按降序排列并选择最高的结果。如果你愿意重构，[gensim](http://radimrehurek.com/gensim/ "gensim")库非常好。

# spring - Spring WebServiceTemplate 持久连接

> ID：11870218
> 
> 赞同：0
> 
> 时间：2012-08-08T17:47:49.097
> 
> 标签：spring, soap, spring-ws

我正在尝试为 SPML searchRequest 迭代器执行 SOAP 消息。我的端点正在使用位于 IIS 之上的 Quest SPML Provider 工具。

问题是，我执行搜索，它返回结果和迭代器 ID。您获取此迭代器 ID 并发出另一个请求（这次是 IteratorRequest），Web 服务将返回下一组项目。

当通过软件提供的 UI 或通过 SoapUI 完成此操作时，我没有问题，但是当通过 Spring 实现时，我得到一个无效的 ID。

经过一番挖掘，我发现这个[https://support.quest.com/SolutionDetail.aspx?id=SOL76284](https://support.quest.com/SolutionDetail.aspx?id=SOL76284)说明当端点的连接或会话丢失时，迭代器将无效。

我的问题是，有没有办法强制 WebServiceTemplate.marshalSendAndReceive 保持连接活动，直到我完成对结果的迭代？还是我离群索居，需要寻求不同的途径。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:33:18.617

[messageSender](http://static.springsource.org/spring-ws/sites/1.5/reference/html/client.html)是 WebServiceTemplate 用来通过选择的协议发送有效负载的内容。如果是 HTTP，那么您可以将其配置为使用[HttpComponentsMessageSender](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/transport/http/HttpComponentsMessageSender.html)，它使用支持持久 HTTP 连接（保持活动状态）的[HttpClient 。](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html)

**笔记**

1.  HTTP/1.1 有连接 keep-alive，但服务器可以在多次请求后决定关闭它或不支持 keep-alive。
2.  甚至 JDK 6 相关的类也支持 keep-alive，但您可以使用 HttpClient 启用池

# visual-studio-2010 - 警告为错误 2008 不是有效的警告编号

> ID：11870219
> 
> 赞同：2
> 
> 时间：2012-08-08T17:47:48.670
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2005, .net-2.0

我将 .net 2.0 (VS2005) 解决方案之一转换为与 VS2010 一起使用（没有更改框架）。现在，当我尝试构建时，我不断收到此错误消息：

> '作为错误 2008 的警告不是有效的警告编号'。

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:51:57.153

项目中有`@pragma warning`s吗？你得到一个错误的行号吗？

**编辑：**

尝试取消选中`treat warnings as errors`您的项目配置。那应该允许你编译。

# iphone - 向 UIScrollview 添加按钮

> ID：11870221
> 
> 赞同：0
> 
> 时间：2012-08-08T17:47:52.647
> 
> 标签：iphone, button, uiscrollview

我希望它们一次显示在屏幕 4 上，所以我正在考虑为此创建一个 UIScrollview 并添加一个带有按钮的子视图。我如何添加让我们说大约 20 个按钮，因为我不能将它们全部显示在屏幕上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:52:53.610

如何将它添加到数组中的按钮。像这样的东西：（只是一个片段）

```
int row = 0;
int column = 0;
for(int i = 0; i < _thumbs.count; ++i) {

    UIImage *thumb = [_thumbs objectAtIndex:i];
    UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(column*60+10, row*60+10, 60, 75);
    [button setImage:thumb forState:UIControlStateNormal];
    [button addTarget:self 
               action:@selector(buttonClicked:) 
     forControlEvents:UIControlEventTouchUpInside];
    button.tag = i; 

    [scrollView addSubview:button];

// If you want to show only 4 buttons, just tweak it here. You can do this method in anyway you like

    if (column == 4) {
        column = 0;
        row++;
    } else {
        column++;
    }

}
[scrollView setContentSize:CGSizeMake(300, (row+1) * 60 + 10)]; 
```

希望这可以帮助。

# opencv - 如何在图像中找到角度黑白相机和像素？

> ID：11870227
> 
> 赞同：0
> 
> 时间：2012-08-08T17:48:13.573
> 
> 标签：opencv

我想知道相机和图像中的点之间的角度。可以计算吗？如果是，那么我可以将这个角度与三角形的角度联系起来吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:59:35.103

As I mentioned in response to your [other question](https://stackoverflow.com/questions/11790410/how-can-i-measure-distance-of-an-detected-object-from-camera-in-video-using-open) if your camera is calibrated, you can define the slope of a ray in world space corresponding to any point in the image. You can find the angle between that ray and the [image plane](http://en.wikipedia.org/wiki/Image_plane) which does not necessarily correspond to any plane in world space. You want to know the angle between that ray and an unknown plane however which cannot be done without depth information. Consider this ambiguity.

```
1
|\
| \
|  \
|   \
-----
2
|\
| \
|  \
|   \
\    \
  \   \
    \  \
      \ \
        \\ 
```

The rays extending from the camera in 1 and 2 are identical. In 2 however one ray extends farther than the other meaning the bottom left and right angles change dramatically.

# regex - Perl，删除前三个字符后的所有内容

> ID：11870230
> 
> 赞同：2
> 
> 时间：2012-08-08T17:48:31.070
> 
> 标签：regex, perl, line, substitution

我向你们保证，我已经在该网站上搜索了大约两个小时。我找到了几个*应该*有效的方法，但它们没有。

我有一行由不同数量的以空格分隔的数字组成。我想删除第三个数字之后的所有内容。

我应该说，我一直在写的所有内容都假设这`\S\s\S\s\S`将匹配前三个数字。在 1 和 2 以及 2 和 3 之间有空格。

我预计以下工作：

`s/^.*?[\S\s\S\s\S].{5}//s;`

但这与我想要的完全相反。

我想`2 3 0 4 5 6 7 1 0 1 2`成为`2 3 0`

我真的更愿意保留它的替代品。正如一个人提到的那样，我已经尝试过向后看，但我没有运气。在尝试这些命令之前，我应该将前 3 个数字保存为字符串吗？

编辑：

我应该澄清一下，这些数字也可以是 1.57 或 1.00E01 的形式。当我试图将其用于基线工作时，我有整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:05:58.510

`\S\s\S\s\S`确实会匹配三个由空格字符分隔的非空格字符。但是，`^.*?[\S\s\S\s\S].{5}`做一些完全不同的事情：

*   `^`匹配行的开头。
*   `.*?`匹配字符直到下一个匹配可以开始（*不是*尽可能多）。由于您指定`/s`,`.`也将匹配换行符。
*   `[\S\s\S\s\S]`是一个字符类，因此与`[\S\s]`—match any `\S`or相同`\s`，也就是说任何东西。
*   `.{5}`将匹配五个字符。

因为`[\S\s]`和`.`with`/s`匹配相同的东西，所以`.*?`永远不会匹配任何字符，因为它想尽可能少地匹配。因此，这与`s/^.{6}//s`从字符串中删除前六个字符相同。如您所见，这不是您想要的！

保留前三个数字的一​​种方法是显式匹配它们：`s/^(\d \d \d).*/$1/s`. 在这里，`\d`匹配单个数字 ( `0`–<code>9)，它们之间有文字空格。我们匹配前三个后面的任何内容，然后替换整个匹配项——因为它以 结尾`.*`，这就是整个字符串——只用括号之间的位，*即*前三个数字。如果您的号码可以超过一位数，那么`s/^(\d+ \d+ \d+).*/$1/s`您可以随心所欲；如果您可以使用任意类似空格的字符（空格、制表符、换行符）分隔它们，那么`s/^(\d\s\d\s\d\s).*/$1/s`这就是您想要的（或者`\s+`如果您可以有多个空格）。如果您想捕捉包含数字以外的内容的行，您可以使用`\S`or `\S+`，就像以前一样。

另一种使用lookbehind的方法是`s/(?<=^\d \d \d).*//s`. 换句话说，删除前面有`^\d \d \d`- 字符串开头后跟三个空格分隔的数字的任何字符。这种方法没有真正的优势——我可能会用另一种方式来做——但既然你提到了向后看，那么你可以这样做。（同样，类似`s/(?<=^\S\s\S\s\S).*//s`的东西更普遍。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:58:49.040

因此，明确匹配前三个数字，并删除其他所有数字。

```
s/^([\dE.]+)\s+([\dE.]+)\s+([\dE.]+).*$/$1 $2 $3/; 
```

这工作如下：

```
$ perl -MYAPE::Regex::Explain -E 'say YAPE::Regex::Explain->new(q{^([\dE.]+)\s+([\dE.]+)\s+([\dE.]+).*$})->explain;'
The regular expression:

(?-imsx:^([\dE.]+)\s+([\dE.]+)\s+([\dE.]+).*$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    [\dE.]+                  any character of: digits (0-9), 'E', '.'
                             (1 or more times (matching the most
                             amount possible))
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  \s+                      whitespace (\n, \r, \t, \f, and " ") (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  (                        group and capture to \2:
----------------------------------------------------------------------
    [\dE.]+                  any character of: digits (0-9), 'E', '.'
                             (1 or more times (matching the most
                             amount possible))
----------------------------------------------------------------------
  )                        end of \2
----------------------------------------------------------------------
  \s+                      whitespace (\n, \r, \t, \f, and " ") (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  (                        group and capture to \3:
----------------------------------------------------------------------
    [\dE.]+                  any character of: digits (0-9), 'E', '.'
                             (1 or more times (matching the most
                             amount possible))
----------------------------------------------------------------------
  )                        end of \3
----------------------------------------------------------------------
  .*                       any character except \n (0 or more times
                           (matching the most amount possible))
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

（考虑到 OP 对原始规范所做的更改进行了更新。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:02:35.810

您说`s/^.*?[\S\s\S\s\S].{5}//s;` 我会写成的代码：`s/^(\S\s\S\s\S).*$/$1/` 您忘记使用 $1 来捕获要保留的替换部分，并且 .* 在开头可能会导致删除起始数字而不是尾随数字. 另外，我不确定您是否对单个数字或单个空白字符有一定的保证，因此您可以编写代码`s/^(\S+\s+\S+\s+\S+).*$/$1/`来捕获所有空格和所有数字。让我知道是否需要再澄清一点。

这是一个我发现对 Perl 正则表达式非常有用的网站：http: [//pubcrawler.org/perl-reference.html](http://pubcrawler.org/perl-reference.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T18:03:12.797

问题是，你为什么要用正则表达式做这样的事情？对我来说似乎更容易：

```
substr $string, 5; 
```

或者如果你真的想要（我没有测试）：

```
s/^(.{5})(.*)/$1/ 
```

括号允许您“记住”模式，这就是说您想用模式的第一部分（前五个字符）替换几乎所有内容的方式。此模式将匹配任何文本行并仅保留前 5 个字符也许您想修改它以匹配 3 个数字，它们之间有空格

# python - 我的小部件不想消失

> ID：11870251
> 
> 赞同：2
> 
> 时间：2012-08-08T17:49:41.943
> 
> 标签：python, pyqt

我是新来的，我是法国人，所以请原谅我的英语。

当我从`QTableView`. 但是当我选择另一个单元格时，有时标签列表是空的（并且必须是）。所以我想清除旧按钮的布局，如果列表中没有标签，则不显示任何内容。但这里的代码：

```
def clearLayout(self, layout):
    if layout is not None:
        while layout.count():
            item = layout.takeAt(0)
            widget = item.widget()
            if widget is not None:
                widget.deleteLater()
            else:
                self.clearLayout(item.layout())

def getInfos(self, element):

    """Slot qui récupère les infos d'une vidéo quand la cell
    correspondante est sélectionnée"""

    self.tags = liste.displayTag(self.modele.record(element.row()).value('id'))

    self.vbox_tags = QtGui.QVBoxLayout()

    if self.tags != None:
        self.liste_boutons = list()
        for indice, tag in enumerate(self.tags):
            self.liste_boutons.append(QtGui.QPushButton(tag))

            #Utilisation de la fonction partial trouvée ici:
            #http://stackoverflow.com/questions/4578861/connecting-slots-and-signals-in-pyqt4-in-a-loop
            self.liste_boutons[indice].clicked.connect(partial(self.displayVidsWithTag, tag))
            self.vbox_tags.addWidget(self.liste_boutons[indice])

        #On aligne les boutons des tags en haut
        self.vbox_tags.setAlignment(QtCore.Qt.AlignTop)
        self.onglet_tags.setLayout(self.vbox_tags)
    else:
        self.clearLayout(self.vbox_tags) 
```

该`clearLayout`方法不会**取消显示**我的按钮。你能帮忙解决我的问题吗？

真挚地。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:57:37.187

`clearLayout`在您有机会看到之前，您正在覆盖以前的布局：

```
# previous self.vbox_tags layout goes bye-bye
self.vbox_tags = QtGui.QVBoxLayout()

if self.tags != None:
    ...
else:
    # clearing a new empty one
    self.clearLayout(self.vbox_tags) 
```

这意味着如果`self.tags != None`. 我不确定您的确切用途是什么，您希望始终创建一个新布局......但至少先保存一个参考：

```
old_layout = self.vbox_tags
self.vbox_tags = QtGui.QVBoxLayout()
...
self.clearLayout(old_layout) 
```

如果您总是创建一个新的布局对象，您可能还想销毁旧的布局对象：`old_layout.deleteLater()`

# sql-server - 存在 Visual Studio 2012 的数据库项目吗？

> ID：11870253
> 
> 赞同：6
> 
> 时间：2012-08-08T17:49:43.290
> 
> 标签：sql-server, visual-studio-2012

随着即将发布的 Visual Studio 2012，是否有用于管理 SQL Server 脚本的项目模板？

即我有表、视图、存储过程，我想通过将它们包含在维护脚本的数据库项目中来在 TFS 中存储和维护它们。

看 2012 的 RC 版本，我再也看不到这种类型的项目模板了。有关如何管理脚本的任何解决方法或信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T20:13:55.690

新的 SQL Server Data Tools 应该随 RC 一起安装。它应该使您能够通过 SQL Server 对象资源管理器（在“视图”菜单中打开）连接到现有数据库，以及将现有数据库导入项目或创建新数据库项目的能力。[这个](http://msdn.microsoft.com/en-us/library/hh272686(v=VS.103).aspx)指向 MSDN 的链接对如何使用 SSDT 进行了非常全面的概述。希望有帮助！

编辑：SQL Server 项目位于 File -> New -> Project -> Templates -> Other Languages -> SQL Server

# android - 切换xml布局导致Android崩溃

> ID：11870254
> 
> 赞同：0
> 
> 时间：2012-08-08T17:49:45.820
> 
> 标签：android, android-layout

我需要像一本书一样编写一个android应用程序。我有大约 100 张图像，我需要用后退、前进和另一个按钮来显示它们。我尝试为每个图像创建一个 xml 布局，并将图像制作为布局的背景。

在运行应用程序时，如果我快速按下按钮，程序在切换 xml 布局期间崩溃。如果我减小图像大小，我的问题也会减少。不幸的是，我需要另一种解决方案来解决它，因为我不能使用较小的图像尺寸，但我仍然有崩溃问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:52:29.590

有一个布局，其中有一个[ImageView](http://developer.android.com/reference/android/widget/ImageView.html)。然后在需要循环到下一个或上一个图像时不断更改图像视图的源图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:37:45.163

部分问题是单击 UI 按钮会立即返回/排队单击，即使与该单击关联的操作尚未完成。由于超出此响应范围的原因，值得注意的是，在“工作”时简单地停用按钮是无效的。这类问题有几个解决方案：一个是使用一个布尔标志，该标志仅在底层“工作”完成后才被设置。然后在按钮操作处理程序中，忽略在重置标志之前发生的按钮单击：

```
 /**
    * Button presses are ignored unless idle.
    */
   private void onMyButtonClicked() {
      if(idle) {
         doWork();
      }
   }

   /**
    * Does some work and then restores idle state when finished.
    */
   private void doWork() {
      idle = false;
      // maybe you spin off a worker thread or something else.
      // the important thing is that either in that thread's run() or maybe just in the body of
      // this doWork() method, you:
      idle = true;
   } 
```

另一个通用选项是使用时间进行过滤；IE。您设置了按钮按下的最大频率为 1hz 的限制：

```
/**
    * Determines whether or not a button press should be acted upon.  Note that this method
    * can be used within any interactive widget's onAction method, not just buttons.  This kind of
    * filtering is necessary due to the way that Android caches button clicks before processing them.
    * See http://code.google.com/p/android/issues/detail?id=20073
    * @param timestamp timestamp of the button press in question
    * @return True if the timing of this button press falls within the specified threshold
    */
   public static synchronized boolean validateButtonPress(long timestamp) {
      long delta = timestamp - lastButtonPress;
      lastButtonPress = timestamp;
      return delta > BUTTON_PRESS_THRESHOLD_MS;
   } 
```

然后你会做这样的事情：

```
private void onMyButtonClicked() {      
      if(validateButtonPress(System.currentTimeMillis())) {
         doWork();
      }
   } 
```

最后一个解决方案无疑是不确定的，但如果您考虑到用户几乎从不故意在移动设备上每秒点击超过 1-2 次按钮，那么它还不错。

# iphone - tableview 中的两个 TextFields，都在滚动视图上，当键盘出现 iPhone 时消失

> ID：11870259
> 
> 赞同：0
> 
> 时间：2012-08-08T17:49:54.137
> 
> 标签：iphone, ios, uiscrollview, uitextfield

在我的登录视图中，我在带有两个单元格的分组表视图中有电子邮件和密码文本字段。我以编程方式添加了两个文本字段：

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    _cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    _cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"Cell"];
    _cell.backgroundColor =  [UIColor colorWithRed:1 green:1 blue:1 alpha:1];
    if (indexPath.row == 0) {
        _emailTxtFld = [[UITextField alloc]initWithFrame:CGRectMake(10, 7, 277, 34)];
        _emailTxtFld.placeholder = @"E-mail";
        _emailTxtFld.font = [UIFont fontWithName:@"Helvetica-Bold" size:15];
        _emailTxtFld.clearsOnBeginEditing = YES;
        [_emailTxtFld setDelegate:self];
        [_emailTxtFld setKeyboardType:UIKeyboardTypeEmailAddress];
        [_cell.contentView addSubview:_emailTxtFld];

    }

    if (indexPath.row == 1) {
        _passwordTxtFld = [[UITextField alloc]initWithFrame:CGRectMake(10, 7, 277, 34)];
        _passwordTxtFld.placeholder = @"Password";
        _passwordTxtFld.font = [UIFont fontWithName:@"Helvetica-Bold" size:15];
        _passwordTxtFld.secureTextEntry = YES;
        [_passwordTxtFld setDelegate:self];
        _passwordTxtFld.clearsOnBeginEditing = YES;
        [_cell.contentView addSubview:_passwordTxtFld];
    }

    return _cell;
    } 
```

这一切都在滚动视图上。当触摸文本字段时，键盘会出现，并且滚动视图会出现，其余的视图可以通过滚动查看。问题是文本字段和表格视图以及我键入的文本消失了，当我触摸它们内部进行编辑时。我仍然可以看到自动更正，并且在我输入一些内容并且键盘返回后，一切都恢复正常，我可以看到我输入的文本。

如果我在keyboardDidShow 方法中注释掉所有内容，那么表格视图和文本字段不会消失。但显然我想保留这条线。

```
 -(void)keyboardDidShow:(NSNotification *)notif
    {
       _logScrollView.frame = CGRectMake(0, 0, 320, 245);// This line commented out stops the problem

    }

    -(void)keyboardDidHide:(NSNotification *)notif
    {
        _logScrollView.frame = CGRectMake(0, 0, 320, 460);
    } 
```

如果我需要给你更多代码，请告诉我。谢谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:04:25.060

你在滚动视图中有一个表格视图吗？UITableView 已经是 UIScrollView 的子类。你不应该在另一个里面有一个。

另一件事：你有这个：

```
_emailTxtFld.clearsOnBeginEditing = YES; 
```

和

```
_passwordTxtFld.clearsOnBeginEditing = YES; 
```

这意味着一旦文本字段成为第一响应者，它们就会清除。我真的不明白键盘关闭后发生了什么。你能详细说明正在消失的东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:04:08.997

我找到了解决我的问题的方法。我不知道正确的措辞，但我刚刚从我已经在 IB 中创建的 tableview 中创建了一个变量，并且在 keyboardDidShow 方法中我使框架保持在这样的位置：

```
-(void)keyboardDidShow:(NSNotification *)notif
{
    _logScrollView.frame = CGRectMake(0, 0, 320, 245);

    _tableViewWTxtFlds.frame =  CGRectMake(8, 153, 304, 79);

}

-(void)keyboardDidHide:(NSNotification *)notif
{
    _logScrollView.frame = CGRectMake(0, 0, 320, 460);

    _tableViewWTxtFlds.frame =  CGRectMake(8, 153, 304, 79);
} 
```

显然，tableview 正在移出我的视图，这就是我猜测的错误，如果这能解决它。感谢您查看我的问题。

# ios - 使用预处理器宏的条件编译 Xcode

> ID：11870266
> 
> 赞同：0
> 
> 时间：2012-08-08T17:50:28.533
> 
> 标签：ios, xcode

我有一个带有两个目标的 iOS 项目，一个是完整版，另一个是精简版。我正在使用以下代码来隐藏/显示功能。

```
#ifdef FULL_VERSION
  NSLog(@"Full version");
#endif 
```

如果我在项目级别定义预处理器宏，这很有效，但是当我将它们设置在目标级别时，它们不起作用。顺便说一句，我是这样设置它们的：

```
Apple LLVM compiler 3.0 - Preprocessing
  Preprocessor Macros    FULL_VERSION 
```

我需要在目标级别定义它们以便知道哪个版本正在运行。

任何想法为什么他们只在项目级别工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:36:17.313

我的问题是该计划没有指向正确的目标。编辑方案解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:35:38.760

在您的目标中，对于所有“预处理器宏”，请确保您具有与代码中使用的完全相同的定义，以使用“FULL_VERSION”（减去引号）。展开该框以绝对确定每个配置也都有定义。

您实际上可以通过选择左侧窗格中的右侧图标并选择最顶部的“Build”来查看编译器正在执行的操作。找到正在编译的文件，选择该行，然后单击该行中最右侧的图标以查看实际的编译命令。我有两个预处理器定义，您可以在下面看到。此外，选择那个巨大的编译行，将其粘贴到一个空的 TextEdit 窗口中，然后搜索“-D” - 你应该在那里看到 -DFULL_VERSION。如果你没有看到你没有在构建命令中正确输入它 - 错误的目标，错误的配置等。在使用 Xcode 的 8 年中，我从未见过这个功能失败。

我的编译行之一：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch i386 -fmessage-length=0 -std=c99 -fobjc-arc … -DUNIVERSAL -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions … LTSharing.m -o ...LTSharing.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:41:42.680

预处理器定义确实按预期在目标上工作，覆盖或继承项目设置。

一个常见的错误是仅在一个（未使用的）配置上设置构建设置。检查您是否在**所有**配置上设置了预处理器定义。

您可以检查构建日志 (Command-7) 以查看是否将正确的选项传递给编译器：搜索`-DFULL_VERSION`.

# z3 - Z3Py 代码中的错误

> ID：11870272
> 
> 赞同：3
> 
> 时间：2012-08-08T17:51:03.103
> 
> 标签：z3, z3py

以下脚本[http://rise4fun.com/Z3Py/Cbl](http://rise4fun.com/Z3Py/Cbl)有什么问题？添加最后两行给我以下错误`'instancemethod' object is not #subscriptable`

```
x,t,t1,t2,x_next=Reals ('x t t1 t2 x_next')
location,location_next=Bools('location location_next')
x=0
location=BoolVal(False)
k=20
for i in range(k):
 s=Solver()
 s.add(Or(And(x_next-x>=2*t,x_next-x<=3*t,x_next<=12,t>0,Not(location)),
         And(x_next-x>=-2*t,x_next-x<=-t,x_next>=0,t>0,location)),location_next==If(And(Not(location),x_next>=12),True,If(And(location,x_next<=0),False,location)))

print s.check()
print s.model()
m=s.model
#x=m[x_next]
#location=m[location_next] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:07:31.117

`m=s.model`将函数分配给`m`。我相信你的意思是分配 call 的结果`s.model`，所以包括括号来进行调用：

```
m=s.model() 
```

# c# - WPF 工具包 DataGrid - 滚动上最后一行后的空格

> ID：11870274
> 
> 赞同：2
> 
> 时间：2012-08-08T17:51:08.930
> 
> 标签：c#, wpf, datagrid, wpftoolkit

我正在为 Datagrid 创建一个包装器。要点是有可能在最后设置摘要/页脚行。

通常我已经解决了这个任务，但我在最后一行和数据网格的页脚之间有一个空格（只有当我有更多的行而不是滚动时才能显示）。我当然可以设置

```
ScrollViewer.CanContentScroll="False" 
```

但它会导致性能问题。是否可以将数据网格配置为平滑滚动到最后一行？

![最后一行后有空格的 Dagagrid](../Images/fb262fe2338e03847a09d731706d4b87.png)

如果我们不在最后一行，这里没问题

![在此处输入图像描述](../Images/ad304c0252f47ea9acc12bc7ecf59bbf.png)

**UPD1** 根据[为什么将 ScrollViewer.CanContentScroll 设置为 false 禁用虚拟化](https://stackoverflow.com/questions/3724593/why-setting-scrollviewer-cancontentscroll-to-false-disable-virtualization)假设它无法在不损失性能的情况下解决。

# c# - 将用户映射到连接 ID 的最佳方法是什么

> ID：11870280
> 
> 赞同：2
> 
> 时间：2012-08-08T17:51:42.297
> 
> 标签：c#, asp.net, signalr

当用户连接到我的集线器类时，我想将用户映射到连接 ID，有什么好的策略可以有效地做到这一点？我想将用户的个人资料与他的连接 ID 相关联，因此当我检查特定信号器组中的用户时，我可以轻松地了解每个用户的个人资料信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T22:04:06.483

从技术上讲，如果您不担心维护状态，则可以通过内存中的穷人来解决此问题`ConcurrentDictionary<string, ConcurrentBag<string>>`，但我认为您正在尝试比这更具可扩展性/容错性。

[JabbR](https://github.com/davidfowl/JabbR)是 SignalR 框架的旗舰测试平台聊天应用程序，将连接的客户端详细信息存储在其 DB（恰好是 SQL）的表中。它具有单个 ChatUser -> 到多个 ChatClient 实例（一对多）的映射。这样，当一个逻辑用户登录时，它就知道该用户在逻辑上是谁，并且还可以确保它可以将正确的消息定向到用户当前可能打开的所有连接的客户端实例。如果您有兴趣了解有关它的更多信息，可以在[此处找到该特定实现。](https://github.com/davidfowl/JabbR/blob/master/JabbR/Services/ChatService.cs#L588)

# image-processing - 计算机视觉系统中的照明

> ID：11870284
> 
> 赞同：2
> 
> 时间：2012-08-08T17:52:04.580
> 
> 标签：image-processing, computer-vision

我不知道这个问题是否非常适合stackoverflow，但也很难让它适合图像处理。

问题是关于计算机视觉系统中的照明设置。

有人可以提供有关照明设置的材料参考吗？何时使用背光、暗场等。如何通过照明技巧改进特征检测。

我知道良好的照明使图像处理更容易，并且想熟悉它的理论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:55:44.987

将您的图像转换为 Lab 颜色空间。l 通道代表照明。

# sp-send-dbmail - 使用 send_dbmail 从电子邮件表发送电子邮件

> ID：11870289
> 
> 赞同：0
> 
> 时间：2012-08-08T17:52:17.347
> 
> 标签：sp-send-dbmail

我是新创建 Sprocs 并使用`send_dbmail`. 但是我能够`send_dbmail`在使用触发器时发送电子邮件。但是，我在很多地方都读到这不是一个好习惯。`Email_Tracker_Log`所以当我们想要发送电子邮件时，我有一个触发器更新表格。然后我需要有一个 SQL 作业，它将运行一个 SProc 来查询该表并发送电子邮件。发送电子邮件后，我希望 Sproc 更新表格以显示它已发送。

表设置

```
 CREATE TABLE [dbo].[Email_Tracker_Log](
    [Email_Log_ID] [int] IDENTITY(1,1) NOT NULL,
    [Email_Log_Date] [datetime] NULL,
    [Email_Sent] [bit] NULL,
    [Email_Address] [varchar](50) NULL,
    [SS_Username] [varchar](50) NULL,
    [SS_First_Name] [varchar](50) NULL,
    [SS_Last_Name] [varchar](50) NULL,
    [SS_Employ_ID] [varchar](50) NULL
) ON [PRIMARY]

GO 
```

我需要一些帮助来编写我的 sproc 以循环遍历该表并调用表`Exec sp_send_dbmail`中的每一行。

然后，一旦它被发送，它需要使用or更新该`[Email_Sent]`字段。`1``True`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T12:55:24.653

这是一些伪代码

```
 SELECT * FROM [YourTable]
   While records
   begin
     Compose email;
     send email;
   end; 
```

# ios - 如何从 iOS 完成块中保存数据

> ID：11870291
> 
> 赞同：0
> 
> 时间：2012-08-08T17:52:23.287
> 
> 标签：ios, objective-c-blocks

我基本上实现了一个更高级的 NSURLConnection 类，它从服务器下载数据并将其解析为字典，并返回数据的 NSDictionary。我正在尝试添加一个完成块选项（除了委托选项），但是每当我尝试将该数据存储在另一个类中时它都会崩溃。

```
 [dataFetcher_ fetchDataWithURL:testURL completionHandler:^(NSDictionary *data, NSInteger error) {        
            contentDictionary_ = data;            
    }]; 
```

我可以很好地 NSLog 那些数据，基本上可以用它做任何我想做的事情，但是一旦我尝试将它保存到另一个变量中，它就会崩溃并显示一条非常模糊的消息。

编辑：崩溃消息是 EXC_BAD_ACCESS，但堆栈跟踪是 0x00000000 错误：地址不包含指向目标文件中某个部分的部分。

我在单例的 init 方法中调用这个函数。如果我在完成块中设置它，它确实让我保存数据。

```
[SingletonClass sharedInstance].contentDictionary = data 
```

但是随后应用程序永远卡住了，因为 sharedInstance 还没有返回，所以单例对象仍然是 nil，所以完成块中的 sharedInstance 再次调用 init，一遍又一遍。

编辑 2： 单例代码如下所示：

```
+ (SingletonClass*)sharedInstance {
   static SingletonClass *instance;
   if (!instance) {
       instance = [[SingletonClass alloc] init];
   }
   return instance;
}

- (id)init {
    self = [super init];
    if (self) {
        dataFetcher_ = [[DataFetcher alloc] init];
        NSString *testURL = @"..."  
        [dataFetcher_ fetchDataWithURL:testURL completionHandler:^(NSDictionary *data, NSInteger error) {        
            [SingletonClass sharedInstance].contentDictionary = data;

        }];

    }
    return self;
} 
```

就像我说的那样，这很好用，但会一遍又一遍地重复初始化代码，直到应用程序崩溃。这只发生在我第一次在设备上运行应用程序时，因为我缓存了返回的数据，并且一旦我缓存了数据，它就不会崩溃。我希望能够只说 self.contentDictionary = data，但这会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:03:12.583

使用块外的 __block 指令指定要在块中使用的变量：

```
__block NSDictionary *contentDictionary_;

[dataFetcher_ fetchDataWithURL:testURL completionHandler:^(NSDictionary *data, NSInteger error) {        
    contentDictionary_ = data;            
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:30:47.360

您在设置“实例”之前调用递归。（我现在看到你从 OP 中理解）。

在您的块中，您可以使用 ivar 或访问器而不是

[SingletonClass sharedInstance].contentDictionary

使用： `_contentDictionary = [data copy];`或`self.contentDictionary=data;` 假设支持 contentDictionary 属性的 ivar 是 _contentDictionary。

听起来您尝试了 self.contentDictionary 并失败了？我让它在测试中工作，转过 ARC，所以可能有一些关于你的 dataFetcher 的东西会影响这个。在我的测试中，dataFetcher 只返回一个包含单个元素的字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:25:46.523

原来问题出在一堆不同的部分上。我的 URL 有时是空的，我的数据获取器会立即失败并调用完成块。在我的完成块中，我没有包含任何错误处理，所以如果单例类没有初始化，它将永远重复。使用真实的 URL 不会发生这种情况。

不过，我仍然想弄清楚为什么当我尝试将数据分配给 ivar 时它会崩溃。

# global-variables - TCL全球难倒我

> ID：11870293
> 
> 赞同：0
> 
> 时间：2012-08-08T17:52:31.380
> 
> 标签：global-variables, tcl

我有一个脚本，我正在做的事情似乎完全相同，但它适用于那个而不是这个。我希望多几双眼睛能够帮助我找出问题所在，我已经花了一个半小时。

我有一个编辑全局变量的过程，它更复杂，但为了简单起见，我将使用它：

```
proc myCustomProc { var } {

global __myGlobal
set __myGlobal [ expr $__myGlobal + 1 ]
} 
```

我在“主”过程中全局定义了一个变量：

```
proc FOO {} {
global __myGlobal
...
...
myCustomProc 5
puts $__myGlobal 
```

然后我无法阅读“__myGlobal”：没有这样的变量

我有不同的varname在不同的脚本中工作的确切代码，所以我很难过。显然它并不相同，我只是找不到问题。

编辑：两个过程都在同一个 .tcl 文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:37:44.057

您无法从未设置的变量中读取数据，无论该变量是否为全局变量都是如此。因此，在代码中：

```
set __myGlobal [ expr $__myGlobal + 1 ] 
```

它首先从全局变量中读取值，然后对该值加一，然后将结果写回全局变量。（实际上，它将变量的内容解释为一个表达式片段，我会花很多钱来做你不想要的东西，因为它很慢而且不安全；请将整个表达式放在大括号中。）

要将一个整数加一（从 Tcl 8.5 开始），您应该只使用该`incr`命令，因为它将不存在的值解释为就好像它为零：

```
incr __myGlobal 
```

但是如果你正在做一些更复杂的事情（或者在 8.4 或之前的版本中工作），你应该`info exists`在前面加上这样的检查：

```
if {![info exists __myGlobal]} {
    set __myGlobal "the default value";    # Or whatever default you want
} 
```

您还可以使用更复杂的表达式，如下所示：

```
set __myGlobal [expr {[info exists __myGlobal] ? $__myGlobal+1 : 1}] 
```

但我通常尽量避免使用三元运算符；它通常不那么可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:53:00.727

简短的回答是，您在设置之前在 expr 命令中使用 $__myGlobal。

# c# - Visual Studio 中没有父窗体的设计面板

> ID：11870294
> 
> 赞同：4
> 
> 时间：2012-08-08T17:52:31.613
> 
> 标签：c#, .net, winforms, visual-studio-2010, panel

任何人都想出一种方法来设计没有表单的面板？

从表面上看，usercontrol 似乎并不可行。

背景：我来自文本编辑器世界，VS 对我来说是新的。我们用面板而不是表格来做所有事情。所以开放学习。具体来说，有一个基类面板（ExtendedPanel），它定义了一些基本控件：取消、保存、保存和关闭。然后，此 ExtendedPanel 将用于绑定到 bindingsouce clientBindingSource 的 ClientExtendedPanel。这一切都与我的实体框架模型有关。因此，我将为我的 Client 表添加、编辑和删除 sql 数据行。如果保存按钮未发生任何更改，则不会启用。如果我进行更改但点击取消，它会警告我。我以前做过这一切，但自从我离开那家公司后，我无法访问代码库，而且他们没有使用 VS（仅限文本编辑器），所以无论如何它都不是真正可移植的。

所有这些背景，所以我可以问：用户控件是要走的路，还是有什么东西可以让我在视觉上向面板添加控件，就像它是一个表单一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:08:20.860

是的，UserControl 在设计器中提供了一个类似表单的画布，供您添加其他控件（按钮等）。

你*也可以*通过继承一个面板并编写代码来添加按钮和连接它们的事件等来做到这一点，但你不会得到设计器的支持。

# silverlight - 为什么我的 Silverlight Datagrid 删除按钮没有触发事件？

> ID：11870296
> 
> 赞同：0
> 
> 时间：2012-08-08T17:52:37.743
> 
> 标签：silverlight, mvvm, datagrid

我有一个带有删除按钮的数据网格 XAML 看起来像：

```
<sdk:DataGridTemplateColumn Header="Del/Tgl" >
    <sdk:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button Content="Delete" 
           Command="{Binding DeleteRowCommand}"
                    CommandParameter="{Binding Column}"
                    />
        </DataTemplate>
    </sdk:DataGridTemplateColumn.CellTemplate>
</sdk:DataGridTemplateColumn> 
```

我通过复制 John Papa 的代码将 ICommand 实现为 DelegateCommand。我向我的 ViewModel 添加了一个公共属性：

```
public ICommand DeleteRowCommand {get;set;} 
```

在我的 viewModel 的构造函数中，我设置了命令：

```
this.DeleteRowCommand = new DelegateCommand(onDelete, CanDelete); 
```

最后定义了`onDelete`, 和`CanDelete`:

```
private void onDelete(object param)
{
    // Get the Column Name
    string strColumnName = param as string ?? string.Empty;
}

private bool CanDelete(object param)
{
    // If we ae here we can delete the row
    return true;
} 
```

一切都在我的 Silvelight 网格上运行，但单击删除按钮，我从不去`onDelete`运行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:50:31.973

基本上，命令绑定将在 Object 中查找 DeleteRowCommand 属性（我的意思是作为 ItemSource 绑定到数据网格的对象列表）。因此，如果您使用的是 SL5，则需要设置绑定源或使用 relativesource。

干杯! 维诺德

# c# - C# WPF 线程

> ID：11870298
> 
> 赞同：1
> 
> 时间：2012-08-08T17:52:48.747
> 
> 标签：c#, wpf, multithreading

我一直在遵循WPF 线程[模型](http://msdn.microsoft.com/en-us/library/ms741870.aspx)指南来创建一个小应用程序，该应用程序将监视和显示当前和峰值 CPU 使用率。但是，当我在事件处理程序中更新我的当前 CPU 和峰值 CPU 时，我的窗口中的数字根本不会改变。调试时，我可以看到文本字段确实发生了变化，但在窗口中没有更新。

我听说构建这样的应用程序是不好的做法，应该改用 MVVM 方法。事实上，一些人对我能够在没有运行时异常的情况下运行它感到惊讶。无论如何，我想从第一个链接中找出代码示例/指南。

让我知道你的想法是什么！

这是我的xaml：

```
<Window x:Class="UsagePeak2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="CPU Peak" Height="75" Width="260">
<StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
    <Button Content="Start"  
        Click="StartOrStop"
        Name="startStopButton"
        Margin="5,0,5,0"
        />
    <TextBlock Margin="10,5,0,0">Peak:</TextBlock>
    <TextBlock Name="CPUPeak" Margin="4,5,0,0">0</TextBlock>
    <TextBlock Margin="10,5,0,0">Current:</TextBlock>
    <TextBlock Name="CurrentCPUPeak" Margin="4,5,0,0">0</TextBlock>
</StackPanel> 
```

这是我的代码

```
public partial class MainWindow : Window
{
    public delegate void NextCPUPeakDelegate();

    double thisCPUPeak = 0;

    private bool continueCalculating = false;

    PerformanceCounter cpuCounter;

    public MainWindow() : base()
    {
        InitializeComponent();
    }

    private void StartOrStop(object sender, EventArgs e)
    {
        if (continueCalculating)
        {
            continueCalculating = false;
            startStopButton.Content = "Resume";
        }
        else
        {
            continueCalculating = true;
            startStopButton.Content = "Stop";
            startStopButton.Dispatcher.BeginInvoke(
                DispatcherPriority.Normal, new NextCPUPeakDelegate(GetNextPeak));
            //GetNextPeak();
        }
    }

    private void GetNextPeak()
    {

        cpuCounter = new PerformanceCounter("Processor", "% Processor Time", "_Total");

        double currentValue = cpuCounter.NextValue();

        CurrentCPUPeak.Text = Convert.ToDouble(currentValue).ToString();

        if (currentValue > thisCPUPeak)
        {
            thisCPUPeak = currentValue;
            CPUPeak.Text = thisCPUPeak.ToString();
        }

        if (continueCalculating)
        {
            startStopButton.Dispatcher.BeginInvoke(
                System.Windows.Threading.DispatcherPriority.SystemIdle,
                new NextCPUPeakDelegate(this.GetNextPeak));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:47:35.850

这里有几个问题。首先，您正在主线程上工作，但您正在以一种*非常*迂回的方式进行工作。正是这里的这一行使您的代码具有响应性：

```
startStopButton.Dispatcher.BeginInvoke(
    System.Windows.Threading.DispatcherPriority.SystemIdle,
    new NextCPUPeakDelegate(this.GetNextPeak)); 
```

从[`BeginInvoke`方法文档](http://msdn.microsoft.com/en-us/library/ms591206.aspx)（强调我的）：

> 在与 Dispatcher 关联的线程上以指定的优先级**异步**执行指定的委托。

即使您以很高的速率发送此消息，您也会通过在后台线程上将帖子返回到消息循环中来对 UI 线程上的工作进行排队。这就是让你的 UI 完全响应的原因。

也就是说，您想像这样重组您的`GetNextPeak`方法：

```
private Task GetNextPeakAsync(CancellationToken token)
{
    // Start in a new task.
    return Task.Factory.StartNew(() => {
        // Store the counter outside of the loop.
        var cpuCounter = 
            new PerformanceCounter("Processor", "% Processor Time", "_Total");

        // Cycle while there is no cancellation.
        while (!token.IsCancellationRequested)
        {
            // Wait before getting the next value.
            Thread.Sleep(1000);

            // Get the next value.
            double currentValue = cpuCounter.NextValue();

            if (currentValue > thisCPUPeak)
            {
                thisCPUPeak = currentValue;
            }

            // The action to perform.
            Action<double, double> a = (cv, p) => {
                CurrentCPUPeak.Text = cv.ToString();
                CPUPeak.Text = p.ToString();
            };

            startStopButton.Dispatcher.Invoke(a, 
                new object[] { currentValue, thisCPUPeak });
        }
    }, TaskCreationOptions.LongRunning);
} 
```

以上注意事项：

*   [根据Dylan 的回答](https://stackoverflow.com/a/11870851/50776)，对[类上的](http://msdn.microsoft.com/en-us/library/3t90y2y1)[`NextValue`方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.nextvalue.aspx)的调用必须在值开始通过之前有一段时间过期。[`PerformanceCounter`](http://msdn.microsoft.com/en-us/library/3t90y2y1)

*   [CancellationToken 结构](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)用于指示是否应该停止操作。这将驱动将在后台连续运行的循环。

*   您的方法现在返回一个代表背景信息的[`Task`类。](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)

*   *不需要*围绕该`thisCPUPeak`值进行同步，因为单个后台线程是对其进行读写的*唯一位置；*对[类上的](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)[方法](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)的调用具有传递给它的和 值的副本。如果您想在*任何*其他线程（包括 UI 线程）中访问该值，那么您需要同步对该值的访问（很可能通过[语句](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.100%29.aspx)）。**[`Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)[`Dispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)`currentValue``thisCPUPeak``thisCPUPeak`*[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.100%29.aspx)***

 ***现在，您还必须`Task`在类级别上保留 并引用 a [`CancellationTokenSource`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.aspx)（产生`CancellationToken`）：

```
private Task monitorTask = null;
private CancellationTokenSource cancellationTokenSource = null; 
```

然后改变你的`StartOrStop`方法来调用任务

```
private void StartOrStop(object sender, EventArgs e)
{
    // If there is a task, then stop it.
    if (task != null)
    {
        // Dispose of the source when done.
        using (cancellationTokenSource)
        {
            // Cancel.
            cancellationTokenSource.Cancel();
        }

        // Set values to null.
        task = null;
        cancellationTokenSource = null;

        // Update UI.
        startStopButton.Content = "Resume";
    }
    else
    {
        // Update UI.
        startStopButton.Content = "Stop";

        // Create the cancellation token source, and
        // pass the token in when starting the task.
        cancellationTokenSource = new CancellationTokenSource();
        task = GetNextPeakAsync(cancellationTokenSource.Token);
    }
} 
```

请注意，它不是检查标志，而是检查`Task`是否已经在运行；如果没有`Task`，则启动循环，否则，它使用`CancellationTokenSource`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:28:59.303

您没有看到 UI 更新，因为您没有正确使用性能计数器。第一次查询处理器时间性能计数器时，它始终为 0。请参阅此[问题](https://stackoverflow.com/q/2181828/684831)。

```
cpuCounter = new PerformanceCounter("Processor", "% Processor Time", "_Total");

double currentValue = cpuCounter.NextValue();

Thread.Sleep(1000);

currentValue = cpuCounter.NextValue(); 
```

像这样简单的事情将解决问题，但您可能想要开发一个更强大的解决方案，考虑到上面评论中的一些评论。***

# django - Django 模型 - 引用另一个模型的更多实例

> ID：11870302
> 
> 赞同：0
> 
> 时间：2012-08-08T17:52:55.537
> 
> 标签：django, django-models, django-admin, django-templates, django-views

您好有一个模型发票，我有一个引用主题的 subject_id 字段，以及代表活动的各种字段。这些是整数字段，表示该发票的每个活动的数量。我想要的是创建一个新模型活动，其中包含该活动的标签、价格等字段。每个 Invoice 实例可以包含不同数量的活动，而不是固定数量。我该怎么做（也许它真的很简单，但我现在无法弄清楚）？

有什么帮助吗？谢谢，卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:04:37.097

```
class Activity(models.Model):
    label = ...
    price = ...

class Invoice(models.Model):
    activities = models.ManyToManyField("Activity") 
```

这假设可以在多个发票之间共享单个活动。如果您希望单个活动属于单个发票，但发票可以包含多个活动：

```
class Activity(models.Model):
    label = ...
    price = ...
    invoice = models.ForeignKey("Invoice")

class Invoice(models.Model):
    ... 
```

# google-apps-script - Google Apps 脚本 getEventsForDay() 返回无效的重复事件

> ID：11870304
> 
> 赞同：1
> 
> 时间：2012-08-08T17:53:00.290
> 
> 标签：google-apps-script, google-calendar-api, google-apps

在尝试从 Google 日历中提取一天议程作为使用 Google Apps 脚本管理的工作流程的一部分时，我`getEventsForDay()`从 CalendarApp 服务调用。

一个特定的（简化的）示例：

```
var calendarView = CalendarApp.getCalendarById(ScriptProperties.getProperty("calendarID"));
var today = new Date();
var todaysEvents = calendarView.getEventsForDay(today); 
```

这将使用所有日期事件填充数组`todaysEvents`，但还包括重复事件之前和之后的重复事件，其中重复跨越查询中的日期，但不会在当天发生。（查询周三，周一、周二、周五的重复事件将被返回）

我们将日历运行到 GMT/BST，因此我研究了这是否是`Date()`将日期返回为 PDT 而不是 UTC 的函数，但有时会返回任一方向超过 24 小时的事件。

假设这不是错误，我无法找到从返回的数组中过滤掉这些“无效”事件的好方法。你可以吗？

或者这是一个错误？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:37:14.723

乔纳森，

我们正在弄清楚。在内部，全天事件以 UTC 表示，因此这将延续到前一天或第二天，具体取决于您所在的时区。一周前有人问我一个问题，我提出了在我们解决这个问题时，以下解决方法：

```
var startOfDay = new Date();
startOfDay.setUTCHours(0);
startOfDay.setMinutes(0);
startOfDay.setSeconds(0);
startOfDay.setMilliseconds(0);  
var endOfDay = new Date(startOfDay.getTime() + 24 * 60 * 60 * 1000);

var events = CalendarApp.getDefaultCalendar().getEvents(startOfDay, endOfDay) 
```

我意识到这不是目前最好的体验，但它应该可以满足您的需求。您可以将其抽象为一个函数。

# asp.net-mvc - mvc 3 音乐商店教程：

> ID：11870308
> 
> 赞同：0
> 
> 时间：2012-08-08T17:53:10.903
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在通过音乐商店教程学习 ASP.net MVC 3——但将 C# 转换为 VB。[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-2](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-2)

Jon Galloway 说“ASP.NET MVC 的默认路由约定是将操作方法​​名称之后的 URL 段视为名为“ID”的参数。

我的 StoreController 中有以下代码

```
 Function Details(id As Integer) As String
        Return "Store Details, ID= " & i.ToString
    End Function 
```

但是当我输入网址时，`http://localhost:53867/store/details/5`我收到以下服务器错误

> 参数字典包含“MvcMusicStore.MvcMusicStore.StoreController”中方法“System.String Details(Int32)”的不可空类型“System.Int32”的参数“i”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

根据上面默认 ID 参数的 Galloway 描述，我希望此方法将 URL 末尾的 5 作为（默认）参数。为什么它是空的？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:02:01.107

我在您的代码中注意到的一些您可能想要检查的事情。

1.  在您的函数体中，您正在调用 i.ToString，但将 id 作为参数传入
2.  VB不需要函数参数的ByVal前言吗？
3.  这是您项目中的复制/粘贴还是您输入的？听起来 5 被分配给默认路由中的 ID，但是您似乎使用 i 作为参数，它为空，因为它不是路由的一部分，并且您没有将其作为查询字符串参数传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:09:08.183

我不知道 VB，但我确实使用（除其他外）C#。

就您的错误而言，我想知道 VB 是如何翻译路线的？在您拥有的链接中，在您获得“商店详细信息”之前，有一个“/Store/Browse?genre=Disco”示例。这在您的应用程序中有效吗？

我可能是错的，但看起来这个[链接](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-vb)将有助于解决路由问题，尤其是清单 4 *（带有可为空参数的索引操作）*。

其要点是...

```
Function Details(ByVal id? As Integer) As String
  Return "Store Details, ID= " & i.ToString
End Function 
```

...可能对你有用，或者至少类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T09:35:06.403

错误是你放了**i**而不是**id**，只是一个拼写错误的变量名

```
Function Details(ByVal id As Integer) As String
      Return "Store Details, ID= " & id.ToString()
End Function 
```

# java - 保护我的 java 应用程序不被复制（仅适用于一台电脑）

> ID：11870310
> 
> 赞同：1
> 
> 时间：2012-08-08T17:53:12.363
> 
> 标签：java, windows, security, desktop-application, copy-protection

如何阻止某人在另一台电脑上复制我在 java 中制作的应用程序？我只想卖一台电脑

我不是在网上卖的，有没有办法通过磁盘SN或使用客户端的USB闪存盘SN作为应用程序的密钥？

我使用 mysql 作为我的应用程序的后端，平台是 Windows。

有没有办法提供这种安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:56:46.623

假设 PC 已连接到 Internet，您可以在启动应用程序时读取 PC MAC 地址并向您的服务器发送请求以检查该 MAC 地址是否被授权。

但这意味着每次用户更改他的 PC 时，您都需要更新您的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:06:30.027

I reckon the only way you'll be able to achieve this level of control is if you move your application into a cloud-based service such as Amazon Web Services. That way, your clients have to subscribe to gain access to your application, and you can disable access if payment stops.

# java - libraryMS的Java条码阅读器逻辑

> ID：11870316
> 
> 赞同：1
> 
> 时间：2012-08-08T17:53:38.210
> 
> 标签：java, swing, logic, barcode, barcode-scanner

我必须在 Java Swing 中做一个库 Magement System。在你们的支持下，我做得很好。谢谢你们。现在这个软件需要通过条形码（1d）来识别书籍和学生。我无法从任何地方得到完美的逻辑。我在 SO 和其他网站上阅读过。我有一些逻辑。但愿景并不清晰。

我知道这个。条码扫描仪输出到端口 - 听关键击 - 需要接口

我的疑问是

*   逻辑流程的顺序是什么。?
*   我是否必须添加任何 lib/jar 文件才能做到这一点。
*   如何实施？

我已经阅读了需要重点关注的文本字段。如何知道扫描仪是否结束了关键股票。

我完全糊涂了。抱歉读到糟糕的英语。我会弥补这个

高级感谢您的所有支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:06:10.443

1.  Read the picture from the reader (depends on the hardware, you might need to use the proprietary API or whatever it requires)
2.  Use a barcode reading library to 'parse' the picture. (like [zxing](http://code.google.com/p/zxing/), which maybe can access a camera?)
3.  which will give you the number hidden in the barcode.

# ios5 - 如果是手动调用，UITableView cellForRowAtIndexPath 会被多次调用？

> ID：11870320
> 
> 赞同：0
> 
> 时间：2012-08-08T17:53:58.090
> 
> 标签：ios5, uitableview

如果我将 UITableView 作为 UIViewController 的属性，并且我正在使用`[tableView cellForRowAtIndexPath:indexPath]`.

在一个方法调用上，我是否应该期望看到多个调用：

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我的每个 UITableViewCell 都有一个 UITextField 我试图访问其文本数据。

这就是我正在做的事情：

```
for (int section = 0; ix < countOfSections; ++section)
{
    NSInteger countOfRowsInSection = // attained
    for (int row = 0; row < countOfRowsInSection; ++row)
    {
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];

        // the follow call seems to elicit multiple invocations 
        // on my table delegate's
        // - (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

        UITableViewCell *cell = [self.tableview cellForRowAtIndexPath:indexPath];

        // Access some custom data
    }
} 
```

有没有更好的方法来访问所有部分和行的 UITextField 每个 UITableViewCell 中存储的所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:00:26.343

您真的不应该尝试使用视图来存储数据。无论您用作表的数据源，都应该有一个对象数组（或其他结构），其中包含在`tableView:cellForRowAtIndexPath:`调用时为单元格提供内容的数据。

If you need other access to that information, you should be getting it directly from the data structure rather than the display.

# node.js - 在创建和更新时更新 RailwayJS 中的数据库字段

> ID：11870322
> 
> 赞同：0
> 
> 时间：2012-08-08T17:54:12.517
> 
> 标签：node.js, railway.js

我是RailwayJS（但不是Rails）的新手，我有一个关于在Create 上保存我的字段和在Update上保存字段的*最佳方法的问题。*`created_at``updated_at`

这是我的模型（db/schema.js）：

```
var Post = define('Post', function() {
    property('title', String);
    property('content', Text);
    property('desc', String);
    property('created_at', Date);
    property('updated_at', Date);
}); 
```

所以在我`posts_controller.js`的方法之前，我设置了“created_at”字段`create`：

```
action(function create() {
    req.body.Post.created_at = new Date;
    Post.create(req.body.Post, function (err, post) {
      // Handle error or do stuff
    });
}); 
```

...而且我对这个`update`方法几乎做了同样的事情：

```
action(function update() {
    body.Post.updated_at = new Date;
    this.post.updateAttributes(body.Post, function (err) {
      // Handle error or do stuff
    }.bind(this));
}); 
```

这不能（不应该）在我的模型中的前置过滤器中完成吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:22:38.920

正如您在上一条评论中提到的那样，它可以在 railJS 中完成，如下所示：

```
before(setDate, {only: ['create', 'update']});

action(function update() {
  console.log(body.Post.updated_at);

  this.post.updateAttributes(body.Post, function (err) {
      if (!err) {
          flash('info', 'Post updated');
          redirect(path_to.post(this.post));
      } else {
          flash('error', 'Post can not be updated');
          this.title = 'Edit post details';
          render('edit');
      }   
  }.bind(this));
});

function setDate(){
    body.Post.updated_at = new Date();
    next();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:23:04.997

现在，我保留了我在问题中发布的内容......

但是，如果我*想*在`before`过滤器中执行此操作，它会是这样的：

```
before(setDate, {only: ['create', 'update']});

...

function setNewDate() {
  // Update the request model with the date
  ...
  next();
} 
```

# bash - 如何在 Bash 脚本中使用空格传递命令行参数

> ID：11870325
> 
> 赞同：9
> 
> 时间：2012-08-08T17:54:18.197
> 
> 标签：bash, command-line-arguments

假设有一个 script `s1`，我需要传递`$1`带有 value的参数`foo bar`，其中包含空格。这可以做到

> ./s1 "富吧"

但是，当我想在另一个脚本（比如）中运行上述命令时`s2`，我应该怎么写呢？如果我把它放在上面，`foo bar`将被解释为两个参数（到 s1）而不是一个。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T17:57:44.083

您可以尝试引用`$1`：

```
./s2 "$1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:05:59.160

使用单引号。

`./script 'this is a line'`

考虑变量替换使用双引号

`./script "this is a line"`

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-08T18:12:47.507

怎么样：

```
./s1 foo\ bar 
```

那行得通吗？

# sql - 奇怪的 MS Access Union 问题：Union 实际上不是 union

> ID：11870326
> 
> 赞同：3
> 
> 时间：2012-08-08T17:54:23.560
> 
> 标签：sql, ms-access, union

使用带有 SQL Server 后端的 MS Access，我有一个表，基本上存储了另一个表中的 Parameter 字段的分组。

例如，我将参数存储在 TBL_Parameter 中：（只是数据的一个非常小的子集）

```
范围
铁 (Fe)
铁 (Fe)-溶解
铁 (Fe)-总

```

表 TBL_ParentParameter 如下所示：

```
父子
铁 (Fe) 铁 (Fe)-溶解
铁 (Fe) 铁 (Fe)-总

```

然后，我想创建一个查询，将 TBL_ParentParameter 中未作为子项包含的所有参数与 TBL_ParentParameter 中包含的所有参数组合起来，因此我进行了以下联合查询：

```
SELECT Parameter, Parameter AS Child
FROM TBL_Parameter
WHERE Parameter NOT IN(SELECT Child FROM TBL_ParentParameter)
UNION
SELECT Parent AS Parameter, Child
FROM TBL_ParentParameter 
```

这具有以下预期结果：

```
父子
铁 (Fe) 铁 (Fe)
铁 (Fe) 铁 (Fe)-溶解
铁 (Fe) 铁 (Fe)-总

```

而是给出：

```
父子
铁 (Fe) 铁 (Fe)
铁 (Fe)-溶解铁 (Fe)-溶解
铁 (Fe)-总铁 (Fe)-总

```

现在联合查询中的每个查询单独工作都非常好，但是当联合时，它们不能正常工作。我已经尝试过这个与直接到 SQL 服务器的直通查询完全相同的查询，它工作得很好，但是如果我基于这个查询的其他查询，我发现它可能需要更长的时间才能运行。那么有没有人知道这里的问题是什么？这是某种 MS Access 错误吗？还是我看错了？

已解决：这似乎是 MS Access 的一个错误，颠倒两个联合子查询的顺序解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:17:09.207

您的查询是正确的。我运行了它，我得到了你发布的倒数第二块代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:43:43.127

这似乎是 MS Access 的一个错误，颠倒两个联合子查询的顺序解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T19:24:36.547

我猜这与您在第一个查询中对`Parameter`字段进行别名有关。`Child`然后，当您`Child`在第二个查询中引用时，Access 假定您要使用`Child`第一个查询（即`Parameter`字段）中的别名定义。

虽然颠倒 UNION 中查询的顺序可能会解决您的问题，`Parent`但当您对`Parent`.

更好的解决方案是完全限定您的字段名称（或仅使用与现有字段不冲突的别名）：

```
SELECT P.Parameter, P.Parameter AS Child
FROM TBL_Parameter AS P
WHERE P.Parameter NOT IN (SELECT SubPP.Child FROM TBL_ParentParameter AS SubPP)
UNION
SELECT PP.Parent AS Parameter, PP.Child
FROM TBL_ParentParameter AS PP 
```

# jquery - 代码适用于 JsFiddle 但不适用于网站

> ID：11870327
> 
> 赞同：1
> 
> 时间：2012-08-08T17:54:30.847
> 
> 标签：jquery, json, jsfiddle

我无法让在 jsFiddle 中运行的代码在我的网站上运行。

[http://jsfiddle.net/tris_wood/qCqcK/](http://jsfiddle.net/tris_wood/qCqcK/)

我已经根据这里有相同问题的用户对代码进行了调整，但它仍然无法运行。

这是我的页面页面结构

```
<head>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="custom.js"></script>
</head>

<div data-role="page">
<ul data-role="listview" id="results"></ul>
</div> 
```

自定义.js

```
$(document).ready(function() {
$.ajax({
    url: "http://itunes.apple.com/lookup?id=300261471&entity=song",
    dataType: 'jsonp',
    success: function(json_results) {
        console.log(json_results);

        $('#results').append('<ul></ul>');
        listItems = $('#results').find('ul');

        $.each(json_results.results, function(key) {

            // edit
            var data = json_results.results[key],
                artworkUrl60 = data.artworkUrl60 || '',
                collectionViewUrl = data.collectionViewUrl || '',
                collectionName = data.collectionName || '',
                artistName = data.artistName || '',
                trackName = data.trackName || '',

html = '<img src="' + artworkUrl60 + '"/>';
html += '<h3>' + collectionName + '</h3>';
html += '<p>' + artistName + '</p>';
html += '<p>' + trackName + '</p>';
listItems.append('<li><a href="' + collectionViewUrl + '">' + html + '</a>
</li>');
        });

        // Need to refresh list after AJAX call
        $("#results").listview("refresh");
    }
});
});​ 
```

Firebug 在第 32 行告诉我 Uncaught SyntaxError: Unexpected token ILLEGAL。

这是完整页面的网址[http://ipwtclothing.net/test.html](http://ipwtclothing.net/test.html)

已经在这几天了，所以任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:03:02.347

该错误似乎来自文件末尾的无关字符。如果删除该字符，则该文件可以正常工作。

我试图将您的网页保存在本地并离线打开。我遇到了同样的问题。后来我可以在js的最后一行识别出一个无效字符。

```
 // Need to refresh list after AJAX call
            $("#results").listview("refresh");
        }
    });
});<200b> 
```

以上是我在 vim 编辑器中的查看方式。删除最后一个特殊字符，这将解决您的问题。

# chef-infra - 执行刀引导后厨师客户端连接错误

> ID：11870336
> 
> 赞同：4
> 
> 时间：2012-08-08T17:54:55.997
> 
> 标签：chef-infra

在使用 Chef 成功引导节点后，我收到了这些错误 [http://pastebin.com/BEgNh2mm][chef-client/server errors]。

发生的初始错误如下

（来自服务器日志的片段）：

merb : chef-server (api) : worker (端口 4000) ~ 开始请求处理: Wed Aug 08 19:04:32 +0200 2012 merb: chef-server (api) :worker (port 4000) ~ Params: {"name "=>"devhouse", "controller"=>"clients", "action"=>"create", "admin"=>false} merb : chef-server (api) : worker (端口 4000) ~`Connection reset by peer - (Errno::ECONNRESET)`

（来自客户端 STDOUT 的片​​段）

[2012-08-08T19:47:57+02:00] 信息：*** Chef 10.12.0 *** [2012-08-08T19:47:57+02:00] 信息：客户端密钥 /etc/chef/client.pem不存在 - 注册 [2012-08-08T19:47:58+02:00] 信息：返回 HTTP 请求 409 冲突：客户端已存在 [2012-08-08T19:47:58+02:00] 信息：HTTP 请求Returned 403 Forbidden：不允许您执行此操作。[2012-08-08T19:47:58+02:00] 致命：堆栈跟踪转储到 /var/chef/cache/chef-stacktrace.out [2012-08-08T19:47:58+02:00] 致命：净::HTTPServerException：403“禁止”

从上面的错误我唯一能推断出的是客户端无法与服务器通信，但是，令人难以置信的是，客户端能够以某种方式向服务器注册，因为执行`knife client list`显示客户端列表中的哪个字段但是客户端的更新尝试失败了`403 "Forbidden"`

Chef 常见错误似乎没有任何此类行为的记录。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T06:43:44.753

这个问题有两个部分：

1.  对等方重置连接 - (Errno::ECONNRESET)

2.  HTTP 请求返回 409 冲突：客户端已存在且致命：Net::HTTPServerException: 403 "Forbidden"

我能够缩小范围的第一个问题是厨师无法与rabbitmq交流，似乎在某个地方，rabbitmq上的所有设置都被删除了。

第二个问题，在我的调查期间（我相信这可能记录在某处）很明显，厨师在客户端生成它的 client.pem 文件之前通过rabbitmq将pem信息存储在couchdb中。由于问题 1 导致该过程未完成，因此创建了客户端但缺少身份验证信息。

**解决方案**

1.  停止所有厨师服务（solr、服务器、webui）并删除位于 /etc/chef/ 下的厨师服务器上的所有 *.pem 文件
2.  确保 rabbitmq 配置了所有必要的信息，并使用信息更新你的 chef server.rb 文件
3.  启动厨师服务（solr、服务器、webui），这将导致所有必要的 .pem 文件再次生成
4.  运行刀客户端删除“node-which-had-issues”
5.  在新/引导节点上执行 chef-client

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T09:35:02.860

我面临同样的问题。

厨师-客户

```
[2013-11-05T14:21:32+05:30] INFO: *** Chef 0.10.4 ***
[2013-11-05T14:21:34+05:30] INFO: Client key /etc/chef/client.pem is not present - registering
[2013-11-05T14:21:36+05:30] INFO: HTTP Request Returned 500 Internal Server Error: Connection refused - connect(2)
[2013-11-05T14:21:36+05:30] ERROR: Server returned error for http://"chef-server":4000/clients, retrying 1/5 in 4s
[2013-11-05T14:21:40+05:30] INFO: HTTP Request Returned 409 Conflict: Client already exists
[2013-11-05T14:21:40+05:30] INFO: HTTP Request Returned 403 Forbidden: You are not allowed to take this action.
[2013-11-05T14:21:40+05:30] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2013-11-05T14:21:40+05:30] FATAL: Net::HTTPServerException: 403 "Forbidden" 
```

我通过在运行 Chef 服务器的机器上重新启动 rabbitmq 服务器来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:57:09.047

听起来 chef-client 正在使用该主机名向 chef-server 注册，然后 client.pem 正在更改，当证书未通过 SSL 检查时将导致 403。本质上，chef-server 具有该证书的公共方面，因此它可以对节点进行身份验证。

如果您两次运行主厨客户端设置过程，则会导致此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T04:33:42.793

我有 Net::HTTPServerException: 403 "Forbidden" 错误，我运行了 "knife acl" 命令并修复了它。

例子：

```
knife acl bulk add group clients nodes NODE_NAME update,read 
```

NODE_NAME = yourserver@yourdomain

# javascript - javascript中的转义字符

> ID：11870339
> 
> 赞同：0
> 
> 时间：2012-08-08T17:55:02.003
> 
> 标签：javascript, html

我在 ASP 中有一些服务器信息需要通过 AJAX 传递。但是，服务器名称有一个反斜杠。

```
var concode = "<%response.write(concode)%>"; 
```

但是在单步执行代码时，服务器名称没有反斜杠。

如何修复它以使反斜杠保留在服务器名称中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:58:02.090

转义字符是反斜杠：[JavaScript Special Characters](http://www.w3schools.com/js/js_special_characters.asp)

如果这是经典的 ASP：

```
var concode = "<%=Replace(concode, "\", "\\")%>"; 
```

如果是 VB.NET：

```
var concode = "<%=concode.Replace("\", "\\")%>"; 
```

**注意：**根据您对页面进行编码的确切方式，这些嵌套引号可能适合 ASP 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:58:00.397

要么转义反斜杠`\\`== `\`，要么使用`encodeURI(servername)`

# facebook - 在身份验证对话框中隐藏“X 朋友使用此应用”消息

> ID：11870340
> 
> 赞同：0
> 
> 时间：2012-08-08T17:55:12.063
> 
> 标签：facebook, installation, facebook-apps, facebook-authentication

我正在开发一个 FB 应用程序，知道您的朋友在安装时没有或很少有人使用该应用程序是非常消极的。

有没有办法在身份验证对话框中隐藏“X 朋友使用此应用程序”消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:12:12.907

不，这不是身份验证对话框的可配置部分

# c++ - RSASSA_PKCS1v15_SHA_Signer 和 PK_SignatureScheme::KeyTooShort 异常

> ID：11870342
> 
> 赞同：5
> 
> 时间：2012-08-08T17:55:23.817
> 
> 标签：c++, rsa, digital-signature, crypto++

我第一次使用 Crypto++，遇到了一些麻烦。为什么这在 C# 中有效（使用相同的密钥），但在 Crypto++ 中无效？我将在下面展示我的 C# 和 C++ 代码。

C# 代码**（这有效！）**：

```
byte[] Modulus = new byte[] { 0xA3, 0x1D, 0x6C, 0xE5, 0xFA, 0x95, 0xFD, 0xE8, 0x90, 0x21, 0xFA, 0xD1, 0x0C, 0x64, 0x19, 0x2B, 0x86, 0x58, 0x9B, 0x17, 0x2B, 0x10, 0x05, 0xB8, 0xD1, 0xF8, 0x4C, 0xEF, 0x53, 0x4C, 0xD5, 0x4E, 0x5C, 0xAE, 0x86, 0xEF, 0x92, 0x7B, 0x90, 0xD1, 0xE0, 0x62, 0xFD, 0x7C, 0x54, 0x55, 0x9E, 0xE0, 0xE7, 0xBE, 0xFA, 0x3F, 0x9E, 0x15, 0x6F, 0x6C, 0x38, 0x4E, 0xAF, 0x07, 0x0C, 0x61, 0xAB, 0x51, 0x5E, 0x23, 0x53, 0x14, 0x18, 0x88, 0xCB, 0x6F, 0xCB, 0xC5, 0xD6, 0x30, 0xF4, 0x06, 0xED, 0x24, 0x23, 0xEF, 0x25, 0x6D, 0x00, 0x91, 0x77, 0x24, 0x9B, 0xE5, 0xA3, 0xC0, 0x27, 0x90, 0xC2, 0x97, 0xF7, 0x74, 0x9D, 0x6F, 0x17, 0x83, 0x7E, 0xB5, 0x37, 0xDE, 0x51, 0xE8, 0xD7, 0x1C, 0xE1, 0x56, 0xD9, 0x56, 0xC8, 0xC3, 0xC3, 0x20, 0x9D, 0x64, 0xC3, 0x2F, 0x8C, 0x91, 0x92, 0x30, 0x6F, 0xDB };
byte[] Exponent = new byte[] { 0x00, 0x01, 0x00, 0x01 };
byte[] P = new byte[] { 0xCC, 0xE7, 0x5D, 0xFE, 0x72, 0xB6, 0xFD, 0xE7, 0x1D, 0xE3, 0x1A, 0x0E, 0xAC, 0x33, 0x7A, 0xB9, 0x21, 0xE8, 0x8A, 0x84, 0x9B, 0xDA, 0x9F, 0x1E, 0x58, 0x34, 0x68, 0x7A, 0xB1, 0x1D, 0x7E, 0x1C, 0x18, 0x52, 0x65, 0x7B, 0x97, 0x8E, 0xA7, 0x6A, 0x9D, 0xEE, 0x5A, 0x77, 0x52, 0x3B, 0x71, 0x8F, 0x33, 0xD0, 0x49, 0x5E, 0xC3, 0x30, 0x39, 0x72, 0x36, 0xBF, 0x1D, 0xD9, 0xF2, 0x24, 0xE8, 0x71 };
byte[] Q = new byte[] { 0xCB, 0xCA, 0x58, 0x74, 0xD4, 0x03, 0x62, 0x93, 0x06, 0x50, 0x1F, 0x42, 0xF6, 0xAA, 0x59, 0x36, 0xA7, 0xA1, 0xF3, 0x97, 0x5C, 0x9A, 0xC8, 0x6A, 0x27, 0xCF, 0x85, 0x05, 0x2A, 0x66, 0x41, 0x6A, 0x7F, 0x2F, 0x84, 0xC8, 0x18, 0x13, 0xC6, 0x1D, 0x8D, 0xC7, 0x32, 0x2F, 0x72, 0x19, 0x3F, 0xA4, 0xED, 0x71, 0xE7, 0x61, 0xC0, 0xCF, 0x61, 0xAE, 0x8B, 0xA0, 0x68, 0xA7, 0x7D, 0x83, 0x23, 0x0B };
byte[] DP = new byte[] { 0x4C, 0xCA, 0x74, 0xE6, 0x74, 0x35, 0x72, 0x48, 0x58, 0x62, 0x11, 0x14, 0xE8, 0xA2, 0x4E, 0x5E, 0xED, 0x7F, 0x49, 0xD2, 0x52, 0xDA, 0x87, 0x01, 0x87, 0x4A, 0xF4, 0xD0, 0xEE, 0x69, 0xC0, 0x26, 0x65, 0x53, 0x13, 0xE7, 0x52, 0xB0, 0x4A, 0xBB, 0xE1, 0x3E, 0x3F, 0xB7, 0x32, 0x21, 0x46, 0xF8, 0xC5, 0x11, 0x4D, 0x3D, 0xEF, 0x66, 0xB6, 0x50, 0xC0, 0x85, 0xB5, 0x79, 0x45, 0x8F, 0x61, 0x71 };
byte[] InverseQ = new byte[] { 0x28, 0x6A, 0xBB, 0xD1, 0x93, 0x95, 0x94, 0x1A, 0x6E, 0xED, 0xD7, 0x0E, 0xC0, 0x61, 0x2B, 0xC2, 0xEF, 0xE1, 0x86, 0x3D, 0x34, 0x12, 0x88, 0x6F, 0x94, 0xA4, 0x48, 0x6E, 0xC9, 0x87, 0x1E, 0x46, 0x00, 0x46, 0x00, 0x52, 0x8E, 0x9F, 0x47, 0xC0, 0x8C, 0xAB, 0xBC, 0x49, 0xAC, 0x5B, 0x13, 0xF2, 0xEC, 0x27, 0x8D, 0x1B, 0x6E, 0x51, 0x06, 0xA6, 0xF1, 0x62, 0x1A, 0xEB, 0x78, 0x2E, 0x88, 0x48 };
byte[] D = new byte[] { 0x9B, 0xF9, 0xDE, 0xC2, 0x45, 0x93, 0x4C, 0x4C, 0xAC, 0x48, 0x2B, 0xA8, 0x4D, 0xFC, 0xD7, 0xED, 0xB2, 0xFB, 0x72, 0xE9, 0xEA, 0xC1, 0x88, 0x39, 0x07, 0x2A, 0x6F, 0x34, 0x07, 0x81, 0x97, 0x7E, 0xCD, 0xFA, 0x21, 0x02, 0xF5, 0xDD, 0x30, 0xDD, 0x22, 0x4A, 0xB3, 0x41, 0xE5, 0x89, 0x80, 0x73, 0xC4, 0xAF, 0x90, 0x9E, 0x2B, 0x50, 0x8A, 0x0A, 0xD4, 0x6E, 0xBD, 0x0F, 0x15, 0x79, 0x37, 0x95, 0xE8, 0x3D, 0xCF, 0x4C, 0x6D, 0xFF, 0x51, 0x65, 0xE7, 0x90, 0xC1, 0xAC, 0x2D, 0xC6, 0xEB, 0x47, 0x19, 0x2D, 0xD0, 0x58, 0x74, 0x79, 0xAC, 0x08, 0x1C, 0xA3, 0x1D, 0xD0, 0xCE, 0x39, 0x2E, 0xC3, 0xFA, 0x66, 0xEF, 0xC7, 0x8E, 0x10, 0x2F, 0xE4, 0xA1, 0xE7, 0x4E, 0xA8, 0x42, 0xF0, 0xF4, 0xFD, 0x10, 0xA6, 0x67, 0x64, 0xCB, 0x3A, 0x6D, 0x4D, 0x51, 0xEC, 0x1F, 0x9D, 0x56, 0x26, 0xC2, 0xFC };
byte[] DQ = new byte[] { 0xAF, 0xDC, 0x46, 0xE7, 0x52, 0x8A, 0x35, 0x47, 0xA1, 0x1C, 0x05, 0x4E, 0x39, 0x24, 0x99, 0xE6, 0x43, 0x54, 0xCB, 0xAB, 0xE3, 0xDB, 0x22, 0x76, 0x11, 0x32, 0xD0, 0x9C, 0xBB, 0x91, 0x10, 0x84, 0x81, 0x8B, 0x15, 0x2F, 0xC3, 0x2F, 0x55, 0x38, 0xED, 0xBF, 0x67, 0x3C, 0x70, 0x5E, 0xFF, 0x80, 0x28, 0xF3, 0xB1, 0x73, 0xB6, 0xFA, 0x7F, 0x56, 0x2B, 0xE1, 0xDA, 0x4E, 0x27, 0x4E, 0xC2, 0x2F }; 

RSAParameters rsaParams = new RSAParameters();
rsaParams.Modulus = Modulus;
rsaParams.Exponent = Exponent;
rsaParams.P = P;
rsaParams.Q = Q;
rsaParams.DP = DP;
rsaParams.InverseQ = InverseQ;
rsaParams.D = D;
rsaParams.DQ = DQ;

RSACryptoServiceProvider crypt = new RSACryptoServiceProvider();
crypt.ImportParameters(rsaParams);

RSAPKCS1SignatureFormatter formatter = new RSAPKCS1SignatureFormatter();
formatter.SetHashAlgorithm("SHA1");
formatter.SetKey(crypt);

byte[] dataFile = new byte[] { 0x6F, 0x9F, 0x07, 0x04, 0xE2, 0x1A, 0xF7, 0xB8, 0xB2, 0x4F, 0x8D, 0x66, 0x49, 0xA1, 0x09, 0xA7, 0xB2, 0x22, 0x3C, 0xF9};

byte[] signature = formatter.CreateSignature(dataFile); 
```

现在，我的 C++ 代码不起作用：

```
const char ModulusCON[0x80] = { 0xA3, 0x1D, 0x6C, 0xE5, 0xFA, 0x95, 0xFD, 0xE8, 0x90, 0x21, 0xFA, 0xD1, 0x0C, 0x64, 0x19, 0x2B, 0x86, 0x58, 0x9B, 0x17, 0x2B, 0x10, 0x05, 0xB8, 0xD1, 0xF8, 0x4C, 0xEF, 0x53, 0x4C, 0xD5, 0x4E, 0x5C, 0xAE, 0x86, 0xEF, 0x92, 0x7B, 0x90, 0xD1, 0xE0, 0x62, 0xFD, 0x7C, 0x54, 0x55, 0x9E, 0xE0, 0xE7, 0xBE, 0xFA, 0x3F, 0x9E, 0x15, 0x6F, 0x6C, 0x38, 0x4E, 0xAF, 0x07, 0x0C, 0x61, 0xAB, 0x51, 0x5E, 0x23, 0x53, 0x14, 0x18, 0x88, 0xCB, 0x6F, 0xCB, 0xC5, 0xD6, 0x30, 0xF4, 0x06, 0xED, 0x24, 0x23, 0xEF, 0x25, 0x6D, 0x00, 0x91, 0x77, 0x24, 0x9B, 0xE5, 0xA3, 0xC0, 0x27, 0x90, 0xC2, 0x97, 0xF7, 0x74, 0x9D, 0x6F, 0x17, 0x83, 0x7E, 0xB5, 0x37, 0xDE, 0x51, 0xE8, 0xD7, 0x1C, 0xE1, 0x56, 0xD9, 0x56, 0xC8, 0xC3, 0xC3, 0x20, 0x9D, 0x64, 0xC3, 0x2F, 0x8C, 0x91, 0x92, 0x30, 0x6F, 0xDB }; 
const char ExponentCON[0x4] = { 0x00, 0x01, 0x00, 0x01 }; 
const char PCON[0x40] = { 0xCC, 0xE7, 0x5D, 0xFE, 0x72, 0xB6, 0xFD, 0xE7, 0x1D, 0xE3, 0x1A, 0x0E, 0xAC, 0x33, 0x7A, 0xB9, 0x21, 0xE8, 0x8A, 0x84, 0x9B, 0xDA, 0x9F, 0x1E, 0x58, 0x34, 0x68, 0x7A, 0xB1, 0x1D, 0x7E, 0x1C, 0x18, 0x52, 0x65, 0x7B, 0x97, 0x8E, 0xA7, 0x6A, 0x9D, 0xEE, 0x5A, 0x77, 0x52, 0x3B, 0x71, 0x8F, 0x33, 0xD0, 0x49, 0x5E, 0xC3, 0x30, 0x39, 0x72, 0x36, 0xBF, 0x1D, 0xD9, 0xF2, 0x24, 0xE8, 0x71 }; 
const char QCON[0x40] = { 0xCB, 0xCA, 0x58, 0x74, 0xD4, 0x03, 0x62, 0x93, 0x06, 0x50, 0x1F, 0x42, 0xF6, 0xAA, 0x59, 0x36, 0xA7, 0xA1, 0xF3, 0x97, 0x5C, 0x9A, 0xC8, 0x6A, 0x27, 0xCF, 0x85, 0x05, 0x2A, 0x66, 0x41, 0x6A, 0x7F, 0x2F, 0x84, 0xC8, 0x18, 0x13, 0xC6, 0x1D, 0x8D, 0xC7, 0x32, 0x2F, 0x72, 0x19, 0x3F, 0xA4, 0xED, 0x71, 0xE7, 0x61, 0xC0, 0xCF, 0x61, 0xAE, 0x8B, 0xA0, 0x68, 0xA7, 0x7D, 0x83, 0x23, 0x0B }; 
const char DPCON[0x40] = { 0x4C, 0xCA, 0x74, 0xE6, 0x74, 0x35, 0x72, 0x48, 0x58, 0x62, 0x11, 0x14, 0xE8, 0xA2, 0x4E, 0x5E, 0xED, 0x7F, 0x49, 0xD2, 0x52, 0xDA, 0x87, 0x01, 0x87, 0x4A, 0xF4, 0xD0, 0xEE, 0x69, 0xC0, 0x26, 0x65, 0x53, 0x13, 0xE7, 0x52, 0xB0, 0x4A, 0xBB, 0xE1, 0x3E, 0x3F, 0xB7, 0x32, 0x21, 0x46, 0xF8, 0xC5, 0x11, 0x4D, 0x3D, 0xEF, 0x66, 0xB6, 0x50, 0xC0, 0x85, 0xB5, 0x79, 0x45, 0x8F, 0x61, 0x71 }; 
const char InverseQCON[0x40] = { 0x28, 0x6A, 0xBB, 0xD1, 0x93, 0x95, 0x94, 0x1A, 0x6E, 0xED, 0xD7, 0x0E, 0xC0, 0x61, 0x2B, 0xC2, 0xEF, 0xE1, 0x86, 0x3D, 0x34, 0x12, 0x88, 0x6F, 0x94, 0xA4, 0x48, 0x6E, 0xC9, 0x87, 0x1E, 0x46, 0x00, 0x46, 0x00, 0x52, 0x8E, 0x9F, 0x47, 0xC0, 0x8C, 0xAB, 0xBC, 0x49, 0xAC, 0x5B, 0x13, 0xF2, 0xEC, 0x27, 0x8D, 0x1B, 0x6E, 0x51, 0x06, 0xA6, 0xF1, 0x62, 0x1A, 0xEB, 0x78, 0x2E, 0x88, 0x48 }; 
const char DCON[0x80] = { 0x9B, 0xF9, 0xDE, 0xC2, 0x45, 0x93, 0x4C, 0x4C, 0xAC, 0x48, 0x2B, 0xA8, 0x4D, 0xFC, 0xD7, 0xED, 0xB2, 0xFB, 0x72, 0xE9, 0xEA, 0xC1, 0x88, 0x39, 0x07, 0x2A, 0x6F, 0x34, 0x07, 0x81, 0x97, 0x7E, 0xCD, 0xFA, 0x21, 0x02, 0xF5, 0xDD, 0x30, 0xDD, 0x22, 0x4A, 0xB3, 0x41, 0xE5, 0x89, 0x80, 0x73, 0xC4, 0xAF, 0x90, 0x9E, 0x2B, 0x50, 0x8A, 0x0A, 0xD4, 0x6E, 0xBD, 0x0F, 0x15, 0x79, 0x37, 0x95, 0xE8, 0x3D, 0xCF, 0x4C, 0x6D, 0xFF, 0x51, 0x65, 0xE7, 0x90, 0xC1, 0xAC, 0x2D, 0xC6, 0xEB, 0x47, 0x19, 0x2D, 0xD0, 0x58, 0x74, 0x79, 0xAC, 0x08, 0x1C, 0xA3, 0x1D, 0xD0, 0xCE, 0x39, 0x2E, 0xC3, 0xFA, 0x66, 0xEF, 0xC7, 0x8E, 0x10, 0x2F, 0xE4, 0xA1, 0xE7, 0x4E, 0xA8, 0x42, 0xF0, 0xF4, 0xFD, 0x10, 0xA6, 0x67, 0x64, 0xCB, 0x3A, 0x6D, 0x4D, 0x51, 0xEC, 0x1F, 0x9D, 0x56, 0x26, 0xC2, 0xFC }; 
const char DQCON[0x40] = { 0xAF, 0xDC, 0x46, 0xE7, 0x52, 0x8A, 0x35, 0x47, 0xA1, 0x1C, 0x05, 0x4E, 0x39, 0x24, 0x99, 0xE6, 0x43, 0x54, 0xCB, 0xAB, 0xE3, 0xDB, 0x22, 0x76, 0x11, 0x32, 0xD0, 0x9C, 0xBB, 0x91, 0x10, 0x84, 0x81, 0x8B, 0x15, 0x2F, 0xC3, 0x2F, 0x55, 0x38, 0xED, 0xBF, 0x67, 0x3C, 0x70, 0x5E, 0xFF, 0x80, 0x28, 0xF3, 0xB1, 0x73, 0xB6, 0xFA, 0x7F, 0x56, 0x2B, 0xE1, 0xDA, 0x4E, 0x27, 0x4E, 0xC2, 0x2F }; 

// set the params
CryptoPP::AutoSeededRandomPool rng;
InvertibleRSAFunction params;

Integer integ(ModulusCON);
params.SetModulus(integ);

Integer integ1(ExponentCON);
params.SetPublicExponent(integ1);

Integer integ2(PCON);
params.SetPrime1(integ2);

Integer integ3(QCON);
params.SetPrime2(integ3);

Integer integ4(DPCON);
params.SetModPrime1PrivateExponent(integ4);

Integer integ5(InverseQCON);
params.SetMultiplicativeInverseOfPrime2ModPrime1(integ5);

Integer integ6(DCON);
params.SetPrivateExponent(integ6);

Integer integ7(DQCON);
params.SetModPrime2PrivateExponent(integ7);

// create the keys
RSA::PrivateKey privateKey(params);
RSA::PublicKey publicKey(params);

CryptoPP::RSASSA_PKCS1v15_SHA_Signer signer(privateKey);

unsigned char data[20] = { 0x6F, 0x9F, 0x07, 0x04, 0xE2, 0x1A, 0xF7, 0xB8, 0xB2, 0x4F, 0x8D, 0x66, 0x49, 0xA1, 0x09, 0xA7, 0xB2, 0x22, 0x3C, 0xF9 };
BYTE *signature = new BYTE[0x80];
signer.SignMessage(rng, data, 20, signature); 
```

根据我所知道的，Crypto++ 的 'RSASSA_PKCS1v15_SHA_Signer' 是我想要的等同于 C# 的 'RSAPKCS1SignatureFormatter' 并将散列算法设置为 SHA1。

它抛出的错误是：

> proj.exe 中 0x7646B9BC 处未处理的异常：Microsoft C++ 异常：> CryptoPP::PK_SignatureScheme::KeyTooShort 在内存位置 0x0040EF18。

感谢您的帮助，Hetelek。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T15:51:24.607

我无法回答为什么这在 C# 中有效，但至于 Crypto++，有几个问题。

首先，您可能调用了错误的构造函数[`Integer`](http://www.cryptopp.com/docs/ref/class_integer.html#a7fcab0564d7270017ebcca55bae1a17a)。我猜你想要这个从大端字节数组转换的：

```
Integer (const byte *encodedInteger, size_t byteCount, Signedness s=UNSIGNED) 
```

但正在使用[这个](http://www.cryptopp.com/docs/ref/class_integer.html#a9e8bf8c72458dff4ceb5d6cdf9e5c97a)从以 2、8、10 或 16 为基数的字符串（在您的情况下为 10）转换的字符串。

因此，`ExponentCON`以示例为例，您应该这样做：

```
const int ExponentSize(0x4);
const byte ExponentCON[ExponentSize] = { 0x00, 0x01, 0x00, 0x01 };
Integer integ1(ExponentCON, ExponentSize); 
```

或者可能更好：

```
std::string ExponentCON("101h");  // <-- Note trailing 'h' indicating hex encoding
Integer integ1(ExponentCON.c_str()); 
```

接下来， 的成员`InvertibleRSAFunction`必须满足某些条件才能成为有效密钥。这些可以通过单步执行[`InvertibleRSAFunction::Validate`](http://www.cryptopp.com/docs/ref/class_invertible_r_s_a_function.html#a35247205517f839220a16287917ce0ce)函数来查看，我假设检查[此处描述](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Key_generation)的条件。

```
params.Validate(rng, 3);  // Returns false for your input data 
```

有一些辅助函数旨在避免在您执行操作时显式设置所有内容。我不知道这些是否适合你，但我指的是[`InvertibleRSAFunction::GenerateRandomWithKeySize`](http://www.cryptopp.com/docs/ref/class_generatable_crypto_material.html#a38d492343c32e530a5c2781b5797f755)和重载的[`InvertibleRSAFunction::Initialize`](http://www.cryptopp.com/docs/ref/class_invertible_r_s_a_function-members.html).

[Crypto++ Wiki](http://www.cryptopp.com/wiki/RSA#Keys)通过示例代码描述了这些函数的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-08T02:02:50.213

***TLDR***：您的私人指数 ,***`d`***在您的示例程序中是错误的。你还有其他更明显的问题。但***`d`***正在引起数学问题。

它引出了一个问题，它在 C# 中是如何工作的？数学不会因计算机语言和运行时而改变。

* * *

第一个问题是使用声明`chars`：

```
...
const char ExponentCON[0x4] = { 0x00, 0x01, 0x00, 0x01 }; 
... 
```

这会导致您使用 ASCII 字符串的构造函数，这是错误的[`Integer`构造函数](http://www.cryptopp.com/docs/ref/class_integer.html)。这至少会导致两个问题：

```
// Added for testing
if (integ != integ2 * integ3)
{
    cerr << "error: n != p*q" << endl;
}

// Added for testing
params.ThrowIfInvalid(prng, 3); 
```

运行程序时，`ThrowIfInvalid`验证参数及其来源`CryptoMaterial: ...`：

```
error: n != p*q
CryptoMaterial: this object contains invalid values 
```

* * *

`const char`需要更改`const byte`为. 然后：

```
Integer integ(ModulusCON, sizeof(ModulusCON));
params.SetModulus(integ);

Integer integ1(ExponentCON, sizeof(ExponentCON));
params.SetPublicExponent(integ1);

Integer integ2(PCON, sizeof(PCON));
params.SetPrime1(integ2);

Integer integ3(QCON, sizeof(QCON));
params.SetPrime2(integ3);
... 
```

进行该更改后，上面的此错误消息将消失：***`error: n != p*q`***. 但***`CryptoMaterial: this object contains invalid values`***遗体。

* * *

第二个问题似乎是您的某些私钥参数不正确。您可以通过查看[第 250 行附近](http://www.cryptopp.com/docs/ref/rsa_8cpp_source.html#l00246)`InvertibleRSAFunction::Validate`的源代码来了解正在执行的测试。[`rsa.cpp`](http://www.cryptopp.com/docs/ref/rsa_8cpp_source.html#l00246)

[`Initialize`您可以通过使用that take`{n,e,d}`](http://www.cryptopp.com/docs/ref/class_invertible_r_s_a_function.html)部分避开它，并让`Initialize`factor 和解决：

```
Integer n(ModulusCON, sizeof(ModulusCON));
Integer e(ExponentCON, sizeof(ExponentCON));
Integer d(DCON, sizeof(DCON));

params.Initialize(n,e,d);
params.ThrowIfInvalid(prng, 3); 
```

但是，这会导致：

```
InvertibleRSAFunction: input is not a valid RSA private key 
```

* * *

接下来，检查`p`和`q`。`#include <nbtheory.h>`， 接着：

```
Integer p(PCON, sizeof(PCON));
Integer q(QCON, sizeof(QCON));

cout << "P is prime: " << (VerifyPrime(prng, p, 10) ? "yes" : "no") << endl;
cout << "Q is prime: " << (VerifyPrime(prng, q, 10) ? "yes" : "no") << endl; 
```

结果是：

```
$ ./test.exe
P is prime: yes
Q is prime: yes 
```

此时，问题似乎出在其中一个指数上。

* * *

接下来，假设`e`与*phi 互*质，`#include <modarith.h>`然后：

```
Integer n(ModulusCON, sizeof(ModulusCON));
Integer p(PCON, sizeof(PCON));
Integer q(QCON, sizeof(QCON));

Integer e(ExponentCON, sizeof(ExponentCON));    
Integer phi = (p-1)*(q-1);

ModularArithmetic ma(phi);
Integer d = ma.MultiplicativeInverse(e);

params.Initialize(n,e,d);
params.ThrowIfInvalid(prng, 3);

cout << "Validated parameters" << endl; 
```

结果是：

```
$ ./test.exe
Validated parameters 
```

所以，问题出在你的`d`指数上。打印很容易`cout << std::hex << d << endl`：

```
$ ./test.exe
Validated parameters

174bcc91cc08400b470a9357e7fd23db2384e4219af4dedc56a0afdc3e796abd965f16c680954549
b4526f01a2c9d7b727620f3ba6c848f19bd9210650ae62593249d7a4e0522ad48aea559d4f6a1f3f
6ae9953bed7c947e273d455a4982523dd90640b0a25572ae8c5e064e39807ddf778af96afd492999
acc40919a4d4f601h 
```

如您所见，计算的第一个八位字节`d`是 0x17，但`d`您提供的第一个八位字节是 0x9B。

* * *

此外，您可能想要执行以下操作：

```
unsigned char data[20] = { 0x6F, 0x9F, 0x07, 0x04, 0xE2, 0x1A, 0xF7, 0xB8, 0xB2, 0x4F,
                           0x8D, 0x66, 0x49, 0xA1, 0x09, 0xA7, 0xB2, 0x22, 0x3C, 0xF9 };

const size_t req = signer.MaxSignatureLength(sizeof(data));
byte signature[req];
const size_t used = signer.SignMessage(prng, data, 20, signature);
// Trim 'signature' to 'used' 
```

# codeigniter - Code Igniter 生成查询结果

> ID：11870344
> 
> 赞同：2
> 
> 时间：2012-08-08T17:55:43.597
> 
> 标签：codeigniter, view

我无法生成查询结果。

```
$query = $this->db->query("YOUR QUERY");

foreach ($query->result_array() as $row)
{
   echo $row['title'];
   echo $row['name'];
   echo $row['body'];
} 
```

这行得通吗？

```
$query = $this->db->query("YOUR QUERY");

foreach ($query->result_array() as $row)
{
   echo $row['0'];
   echo $row['1'];
   echo $row['2'];
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:25:43.733

$query->result_array() 生成一个关联数组。您不能通过索引访问它的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:29:49.833

正如 Edward 所提到的，返回的数组是一个关联数组。虽然没有使用整数索引 assoc 数组的标准方法，但您可以这样做：

```
$resultarray = $query->result_array();
// get an array of keys in result
$keys = array_keys($resultarray[0]);

foreach ($resultarray as $row)
{
   echo $row[$keys[0]];
   echo $row[$keys[1]];
   echo $row[$keys[2]];
} 
```

# jquery - jQuery可排序和可放置容差问题

> ID：11870347
> 
> 赞同：2
> 
> 时间：2012-08-08T17:56:14.050
> 
> 标签：jquery, jquery-ui-sortable, jquery-ui-droppable

我们的页面中有一个嵌套菜单，可以在其中拖放以重新排序和嵌套菜单项。

似乎存在一个问题（我们使用的是 jQuery 1.7.2 和 UI 1.8.22），如果您同时具有可排序和可放置，则排序容差不一致并导致问题。

一个例子会比我更好地解释它......

[http://jsfiddle.net/8fUxV/5/](http://jsfiddle.net/8fUxV/5/)

我刚刚创建了显示问题所需的最低限度，而不是嵌套菜单，只是我们用来使其工作的机制。

拿起“项目 4”并非常缓慢地将其向上拖动。3 将突出显示，表示这是放置的目标。好的，但是继续向上移动，直到它位于 2 和 3 之间的间隙中。我想把它放在这里并进行排序。但是如果我这样做了，因为 3 仍然突出显示，它将改为“丢弃”（在我们的真实代码中，创建一个嵌套菜单）。

实际上，在第 2 项之前有几个像素，您可以在其中获得所需的效果。但是，如果您向下移动太远，它将再次下降而不是排序。

从本质上讲，问题是我会认为如果该项目处于间隙中，它应该排序并且只有当我超过另一个突出显示的项目时才会下降。

我有一个部分解决方法，它强制 UI 重新计算位置 - 取消注释“out”函数中的代码。

现在，如果您向上拖动 4 仍然会遇到同样的问题，但如果您触摸 2 并向下移动到间隙中，则不会突出显示任何内容，因此它将正确排序。

但问题仍然是，第一次向上拖动并不像您在第一次重新排列时所期望的那样起作用。

（我确实尝试将解决方法添加到 jquery.ui 代码中 ui.sortable 的 _mousedrag 中，它确实解决了问题......但我不知道我在那里做什么:)

所以我不确定我做错了什么还是这是一个错误？

在我记录错误报告之前，有没有人遇到过类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:52:55.970

在挖掘源代码后，我找到了一个解决问题的选项。

问题是当一个项目被移动并且虚拟占位符被插入到列表中时，位置计算不正确。

您需要将此添加到您的可排序中，

```
refreshPositions: true 
```

例如

```
$("ul").sortable({
    helper: "original",
    refreshPositions: true,
    update: function(event, ui) {
       :
    }
}); 
```

这会导致它重新计算每次鼠标移动的位置。效率极低，但否则将无法正常工作。

# templates - Drupal 6中特定节点的自定义模板？

> ID：11870349
> 
> 赞同：5
> 
> 时间：2012-08-08T17:56:14.750
> 
> 标签：templates, drupal, drupal-6

我知道有很多不同的自定义模板文件，例如 page.tpl.php 和 node.tpl.php 等。但是有没有办法为特定的节点 ID 制作自定义模板？这不起作用 node-3.tpl.php，但有没有办法做到这一点？

更新代码

```
function phptemplate_preprocess_node(&$vars) {
    $vars['template_files'][] = 'node-' . $vars['nid'];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:08:53.363

对于 Drupal 6，页面模板是“page-node-3.tpl.php”并阅读[http://drupal.org/node/1089642上的手册](http://drupal.org/node/1089642)

Drupal 7，页面--node--3.tpl.php：[http ://drupal.org/node/1089656](http://drupal.org/node/1089656)

感谢@Clive 和@asiby。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:00:57.660

确保重建主题注册表。否则将导致 Drupal 完全忽略您将添加的**node-x.tpl.php**文件。

# java - 为什么 javax.sql 包中的类使用 new String(str)？

> ID：11870354
> 
> 赞同：12
> 
> 时间：2012-08-08T17:56:37.167
> 
> 标签：java

javax.sql 包中的许多类都使用`new String(str)`构造函数。例如：

```
public void setCatalogName(int columnIndex, String catalogName) throws SQLException {
    checkColRange(columnIndex);
    if (catalogName != null)
        colInfo[columnIndex].catName = new String(catalogName);
    else
        colInfo[columnIndex].catName = new String("");
} 
```

或者

```
public void setUsername(String name) {
    if(name == null)
    {
        username = null;
    } else {
        username = new String(name);
    }
} 
```

还有很多：

> javax.sql.rowset.serial.SerialStruct.SerialStruct(SQLData, Map>) javax.sql.rowset.serial.SerialStruct.SerialStruct(Struct, Map>) javax.sql.rowset.RowSetMetaDataImpl.setCatalogName(int, String) javax. sql.rowset.RowSetMetaDataImpl.setColumnLabel(int, String) javax.sql.rowset.RowSetMetaDataImpl.setColumnName(int, String) javax.sql.rowset.RowSetMetaDataImpl.setColumnTypeName(int, String) javax.sql.rowset.BaseRowSet.setCommand( String) javax.sql.rowset.BaseRowSet.setDataSourceName(String) java.text.DateFormatSymbols.setLocalPatternChars(String) javax.sql.rowset.BaseRowSet.setNull(int, int, String)

这样做的目的是什么？它不是在堆上创建不必要的字符串实例吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T18:01:20.350

他们有可能防止“大字符串的一小部分”问题：

```
String x = getHugeStringFromSomewhere();
String y = x.substring(0, 5);
foo(y); 
```

现在假设 引用的字符串`y`仍然是必需的，但`x`不是。因为`y`指的是 original `char[]`，所以你最终会得到负责大量内存的那个小字符串。

如果您改为创建新字符串，则复制数据：

```
String x = getHugeStringFromSomewhere();
String y = new String(x.substring(0, 5));
foo(y); 
```

...那么与原始字符串关联的底层大字符数组可以与字符串同时被垃圾收集。

当从大文本文件（例如字典中的单词）中读取大量小行时，我已经看到这会产生巨大的差异。IIRC，`BufferedReader.readLine`创建一个 80 个字符的缓冲区，因此每个字符串返回 pin 至少一个 80-character `char[]`，即使它只有 5 个字符长。这一切都加起来了......（根据评论，显然这在 Java 1.5 中发生了变化`readLine`- 但`substring`仍然以相同的方式工作。）

编辑：当然，这仍然只是对原因的猜测，它绝对不能解释这`new String("")`部分......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T18:06:21.380

似乎代码已从 JDK6 更改为 JDK7，并且所有实例`new String(str)`都已删除。所以，虽然 Jon Skeet 的建议很有趣，但它可能是他们发现并修复的一段蹩脚的代码。

# visual-studio-2010 - 如何在VS2010中编译所有CPP文件而不构建整个项目

> ID：11870355
> 
> 赞同：0
> 
> 时间：2012-08-08T17:56:40.990
> 
> 标签：visual-studio-2010, visual-studio, visual-c++

我是否可以只编译一个项目下的所有 CPP 文件而不链接项目等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:15:28.683

我知道这样做的唯一方法是在编译代码时指定[`/c`开关。](http://msdn.microsoft.com/en-us/library/8we9bhf4.aspx)不幸的是，此选项在 Visual Studio 开发环境中不可用，因此您需要通过`cl.exe`直接调用在命令行上构建代码。为了让自己更轻松，请使用 Visual Studio 命令提示符来执行此操作。

不确定是否可以让 MSBuild 执行此操作，文档不清楚限制是 Visual Studio 本身还是 MSBuild 的限制。我还没有真正为自己尝试过。

或者，您可以通过按`Ctrl`+从 IDE 中构建单个源文件`F7`（至少，假设默认 C++ 开发设置）。如果失败，它也可以作为位于“构建”菜单中的“编译”选项使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:23:46.960

我不确定这是否能满足您的需要，但可能值得一试：为可执行文件（而不是库）创建一个项目，并在其中包含所有 cpp 文件。添加一个`main()`只返回零的函数。将 C++ 优化选项设置为“优化引用”( `/OPT:REF`)。这*可能*只是编译所有 cpp 文件，但在链接阶段有效地忽略它们，因为应用程序没有引用它们。

您没有说为什么需要这样做 - 是因为链接需要大量时间吗？

# c#-4.0 - C#.Net 4.0 中使用 UTC 时间的提醒服务

> ID：11870360
> 
> 赞同：0
> 
> 时间：2012-08-08T17:57:05.963
> 
> 标签：c#-4.0, timezone, reminders

我有一个运行在我的 Windows 服务

> **德州起源服务器中央时间。**

这将检查所有活动的提醒，并比较用户想要的提醒时间，如果它与用户所需的时间匹配，则发出提醒。

**场景**

1.  用户来自 EST
2.  用户通过我的网站使用 UI设置了 **下午 1:25 *的提醒*
3.  在提交时，我的 C# 业务逻辑将这个时间转换为 UTC，然后存储到我的数据库中。那将变成**“18:25:00”**
4.  我的业务逻辑将从数据库中提取所有活动提醒
5.  如果**当前 UTC 时间**和**提醒设置时间** *差异小于 5 分钟*，则检查提醒时间，然后它将通知该客户。

**这就是我的逻辑写法**

```
 DateTime CurrentDate = DateTime.Now.ToUniversalTime();
 TimeSpan currentTime = DateTime.Now.ToUniversalTime().TimeOfDay;

 if (Reminder.DailyReminders.Any(x => currentTime.Subtract(x.ReminderTime).TotalMinutes < 5 
&& currentTime.Subtract(x.ReminderTime).TotalMinutes > 0))
    {
        if (Reminder.ReminderMedhodID.Equals(1))
        _email.ComposeEmail(Reminder);
    } 
```

**我的问题是** * *currentTime* * 总是比用户请求的提醒时间晚 1 小时，所以我的提醒会晚 1 小时发出。

注意：currentTime 来自下面

```
TimeSpan currentTime = DateTime.Now.ToUniversalTime().TimeOfDay; 
```

我不确定这是否是处理此要求的最佳方式。考虑到这是其中一种方式，任何人都可以帮助解决这个问题吗？

**感谢彼得的回答**

任何人都可以帮助我如何在考虑日光的情况下占用用户输入时间

这是我到目前为止所拥有的

```
public TimeSpan ConvertToUTCTime(string dateStr)
        {
            DateTime localDateTime = DateTime.Parse(dateStr); // Local .NET timeZone.
            DateTime utcDateTime = localDateTime.ToUniversalTime();

            string clTimeZoneKey = TimeZone.CurrentTimeZone.StandardName;
            TimeZoneInfo clTimeZone = TimeZoneInfo.FindSystemTimeZoneById(clTimeZoneKey);
            DateTime clDateTime = TimeZoneInfo.ConvertTimeFromUtc(utcDateTime, clTimeZone);
            if (clTimeZone.IsDaylightSavingTime(localDateTime))
            {
                // Get DayLight local time in UTC
                // Yet to be implemented
            }
            return clDateTime.TimeOfDay;
        } 
```

我使用这个 [http://msdn.microsoft.com/en-us/library/system.globalization.daylighttime.aspx得到了这个工作](http://msdn.microsoft.com/en-us/library/system.globalization.daylighttime.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:07:21.833

嗯...我们目前在美国大部分地区使用夏令时（尽管印第安纳州的某些部分确实/确实使用了 EST？）由于 EDT 比 EST 早一小时，您的逻辑是正确的。输入 (EST) 不正确。

# javascript - Emberjs - ArrayController 中的对象绑定

> ID：11870366
> 
> 赞同：0
> 
> 时间：2012-08-08T17:57:26.777
> 
> 标签：javascript, ember.js

我正在尝试将 Ember 对象绑定到 ArrayController 中的属性。该对象的属性将用于计算中添加到 ArrayController 的所有对象。

这是我所看到的一个简单示例：http: [//jsfiddle.net/EjDFS/2/](http://jsfiddle.net/EjDFS/2/)

如您所见，我尝试绑定的对象在数组控制器中未定义。我不想将此对象直接绑定到添加到数组控制器的对象。

感谢您花时间看这个 - 非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:52:18.897

它未定义，因为当它触发时，它还没有完成它的运行循环。

至于`App.ObjectOne.param3`, 你需要使用`this.get('param1')`而不是`param1`, 与`param2`

[http://jsfiddle.net/EjDFS/4/](http://jsfiddle.net/EjDFS/4/)

# amazon-ec2 - 如何制作服务器镜像进行负载均衡？

> ID：11870370
> 
> 赞同：0
> 
> 时间：2012-08-08T17:57:39.427
> 
> 标签：amazon-ec2, load-balancing, server-side

我有一个亚马逊服务器，我被告知有 2-5 个实例来处理流量。有人告诉我，每当我将最新的代码上传到主服务器时，我都必须制作它的“图像”，以便其他服务器可以在有更多流量并且它们被激活时复制该图像。我如何制作图像？在命令行上？或不。我正在通过 SSH 上传代码。我对此知之甚少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:30:08.507

新手最简单的方法是使用 AWS 管理控制台。您可以右键单击您的实例并选择“创建映像（EBS AMI）”。请注意，您的映像必须由 EBS 支持。

希望这可以帮助。

# python - 使用 PyQt 显示基本形状文件

> ID：11870376
> 
> 赞同：4
> 
> 时间：2012-08-08T17:57:52.523
> 
> 标签：python, pyqt, gis, arcgis

是否有任何允许交互式显示 GIS shapefile 的包？我正在寻找一个简单的 GUI 来显示简单的 shapefile（海岸线等），但似乎找不到从哪里开始。我最初的任务是在 R 中执行此操作，但我想尝试使用 python 和 Qt。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:51:33.113

[Mapnik](http://mapnik.org/)支持 GIS 形状文件并具有 Python 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:34:05.857

我认为您可以结合使用[shapefile](http://code.google.com/p/pyshp/)库来读取文件，并使用[shapefile](http://toblerity.github.com/shapely/manual.html)来处理所有数据。

我曾经使用`shapely`已加载到数据库中的地理数据源来处理点和多边形数据。

根据您的评论，如果您只想在 PyQt 应用程序中显示一个 shapefile，那么您真正需要的就是将其转换为 SVG 并直接显示。我没有使用过[这个转换库](https://github.com/kartograph/kartograph.py)，但我相信还有更多类似的。然后你可以使用[QSvgWidget](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsvgwidget.html)来加载和显示它

# facebook - 识别从应用程序中隐藏其信息的 Facebook 用户

> ID：11870379
> 
> 赞同：1
> 
> 时间：2012-08-08T17:57:56.023
> 
> 标签：facebook, api, privacy

Facebook 让用户可以控制他们与应用程序共享的信息，以及“人们如何将您的信息带到他们使用的应用程序”（[https://skitch.com/nicksoman/emqhx/privacy-settings](https://skitch.com/nicksoman/emqhx/privacy-settings)）。

Facebook API 会为任何不可用的信息返回空白，无论是因为 1) 用户没有列出它还是 2) 用户阻止了应用程序访问它。

可以区分这两组吗？换句话说，当我们尝试提取位置之类的内容并返回空白时，我们是否有可能区分将位置设置为空白的人和不与应用程序共享位置的人？

希望对此有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:56:43.127

我认为您还可以使用权限端点[https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fpermissions](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fpermissions)来查看用户授予您的应用程序的权限。然后，您可以查看他们是否已授予您的应用程序所需的适当权限，如果是，您可以判断它是否只是空白

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:11:32.360

不，不可能区分这两种情况，但请注意，“人们如何将您的信息带到他们使用的应用程序”设置仅指您的应用程序用户的朋友，而不是实际使用您的应用程序的用户

# jquery - 如何包含用于 Rally SDK 2.0 的 jQuery

> ID：11870384
> 
> 赞同：1
> 
> 时间：2012-08-08T17:58:19.130
> 
> 标签：jquery, rally

在使用 Rally 2.0 SDK 开发应用程序时，我一直在使用 jQuery。当我使用页面的调试版本时一切正常，但是当我从开发版本上传 HTML 时，我在 jQuery 包含上遇到了一堆语法错误。我所做的是下载 jQuery 1.7.2 min 发行版并将其保存为工作文件夹中的 jquery.js。然后我将我的 config.json 更改为：

```
{
    "name": "overview_v2",
    "className": "CustomApp",
    "sdk": "2.0p2",
    "javascript": [
        "App.js",
        "jquery.js"
    ],
    "css": [
        "app.css"
    ]
} 
```

当我使用 Rakefile 进行编译时，它会正确地将 jQuery 包含到 HTML 中，但我遇到了一些不同的错误：

```
Uncaught SyntaxError: Unexpected identifier 
```

和

```
unmatched ) in regular expression 
```

第一个错误是在 Google Chrome 中加载页面时出现的，第二个是在 Firefox 中加载时出现的。我是以正确的方式包含 jQuery 还是有更好的选择？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:54:34.817

尝试升级到最新版本的 app sdk rakefile。在早期版本的 rakefile 中解析正则表达式存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:49:33.277

你使用jquery有什么原因吗？SDK 是使用 Ext 4 构建的，它应该提供大部分（如果不是全部）包含在 jquery 中的功能......

# batch-file - 如何在dos批处理文件中将默认答案设置为y

> ID：11870395
> 
> 赞同：0
> 
> 时间：2012-08-08T17:59:13.347
> 
> 标签：batch-file, dos

我尝试编写一个批处理文件来使用 Gpg4win 来加密文件。这是批处理文件中的内容：

```
gpg2 --recipient client_certiticate_name -e test.txt 
```

由于客户端证书问题，我收到以下消息：

“不确定密钥是否属于用户 ID 中指定的人。如果您*真的*知道自己在做什么，您可以用“是”回答下一个问题。仍然使用此密钥吗？（是/否）

所以，我必须一直输入 y 。有什么办法可以将答案放入批处理文件中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:20:44.890

我创建一个私钥并验证客户端证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:11:26.107

将 Y 输入命令通常有效。尽管某些可执行文件在请求输入之前会清除输入缓冲区。

```
echo Y|gpg2 --recipient client_certiticate_name -e test.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:08:25.907

将答案放在一个名为 a.txt 的文本文件中，然后像这样运行你的 bat：

xxx.bat < a.txt

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:23:14.977

尝试使用其中一种进行加密

```
gpg2 --recipient client_certiticate_name -e -yes test.txt
```

或者

```
gpg2 --recipient client_certiticate_name -e -always-trust test.txt
```

只需添加**-yes**或**-always-trust**。

# python - 如何在从另一个 url 获取的烧瓶 python 中返回 JSON 到浏览器？

> ID：11870396
> 
> 赞同：7
> 
> 时间：2012-08-08T17:59:14.150
> 
> 标签：python, flask

我想使用烧瓶将 JSON 返回到浏览器，带或不带 simplejson（带有适当的标头）这是我到目前为止的烧瓶应用程序：

```
@app.route('/')
def hello_world():
    QUERY_URL="http://someappserver:9902/myjsonservlet"
    result = simplejson.load(urllib.urlopen(QUERY_URL))
    return result; 
```

假设返回的 JSON 输出为：

```
{"myapplication":{"system_memory":21026160640.0,"percent_memory":0.34,
"total_queue_memory":4744,"consumers":1,"messages_unacknowledged":0,
"total_messages":0,"connections":1} 
```

但是，当我访问该页面`http://localhost:5000`时，我得到一个`Internal Server Error`. 我必须如何处理“结果”才能使其正确显示？或者有什么方法可以告诉它返回`json`标题？

当我添加一个打印语句来打印结果时，我可以看到 JSON，但在浏览器中它给了我一个`Internal Server Error`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T18:06:00.273

```
import requests
r = requests.get(QUERY_URL)
return r.json

#normal return
return jsonify(username=g.user.username,
               email=g.user.email,
               id=g.user.id) 
```

jsonify 在烧瓶中可用。这是[文档](http://flask.pocoo.org/docs/api/#flask.json.jsonify)

# visual-studio-2010 - 如何防止 Visual Studio 重新格式化我的资源 (*.rc) 文件？

> ID：11870397
> 
> 赞同：1
> 
> 时间：2012-08-08T17:59:16.467
> 
> 标签：visual-studio-2010, visual-studio, mfc

我目前正在维护一个 MFC C++ 项目，该项目具有 Visual Studio 6 中的旧版本和我们已转换为与 Visual Studio 2010 一起使用的更新版本。一个或另一个版本中的功能/错误更改正在通过 SVN 合并到另一个.

我们遇到的一个问题是 VS 的一个或其他版本正在重新格式化 .rc 文件，这意味着在某些合并期间，差异看起来几乎文件的每一行都已更改。

有没有办法关闭或控制资源文件的这种自动格式化方式，以便仅在有实际更改的地方更改它？

# python - Python Regex - 在字符串中查找带逗号的数字

> ID：11870399
> 
> 赞同：1
> 
> 时间：2012-08-08T17:59:21.660
> 
> 标签：python, regex

我可能有一个字符串：

```
"Foo Bar, FooTown, $100,00" 
```

现在我需要用逗号分割那个字符串，但这会错误地分割它，因为它也`$100,00`包含一个逗号。

所以我首先要查看字符串，是否有任何带逗号的数字，如果有，请将逗号替换为句号。所以它看起来像：

```
"Foo Bar, FooTown, $100.00" 
```

### 编辑：

它总是很小的数字，不会超过一个`,`or `.`，但可能是 $1 $10 $100 $1000

字符串之前可能有也可能没有空格`,`

这是一条短信。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:05:17.170

您可以使用

```
>>> re.sub(r"(\d),(\d)", r"\1.\2", "Foo Bar, FooTown, $100,00")
'Foo Bar, FooTown, $100.00' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:15:22.547

你也可以使用负前瞻...那些在超级强大的 Python 正则表达式机制中被遗忘的东西...

您可以制作一个正则表达式，*以逗号分隔，逗号前面没有数字或后面没有数字*。

```
#!/usr/bin/env python

import re
samples=[
    "Foo Bar, FooTown, $100,00",
    "$100,00, Foo Bar, FooTown",
    "Foo Bar, $100,00, FooTown",
    "$100,00, Foo Bar, FooTown,",
]

myRegex=re.compile(",(?!\d)|(?<!\d),")

for sample in samples:
    print "%s sample splitted: %s (%s items)" % (sample, myRegex.split(sample), len(myRegex.split(sample))) 
```

输出：

```
Foo Bar, FooTown, $100,00 sample splitted: ['Foo Bar', ' FooTown', ' $100,00'] (3 items)
$100,00, Foo Bar, FooTown sample splitted: ['$100,00', ' Foo Bar', ' FooTown'] (3 items)
Foo Bar, $100,00, FooTown sample splitted: ['Foo Bar', ' $100,00', ' FooTown'] (3 items)
$100,00, Foo Bar, FooTown, sample splitted: ['$100,00', ' Foo Bar', ' FooTown', ''] (4 items) 
```

[我为在 Python 中开发re](http://docs.python.org/library/re#regular-expression-syntax)模块的人感到非常抱歉......我见过这种很少使用的前瞻。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:17:15.760

与其修复您的数据，不如修复您的拆分？

```
>>> import re
>>> s = "Foo Bar, FooTown, $100,00"
>>> re.split(r'(?<!\d),|,(?!\d)', s)
['Foo Bar', ' FooTown', ' $100,00'] 
```

这使用否定的前瞻和后瞻断言来确保逗号不被数字包围。

**编辑：**将正则表达式从更改`r'(?<!\d),(?!\d)'`为`r'(?<!\d),|,(?!\d)'`正确处理“$100,00, Foo Bar, FooTown”等字符串。感谢 BorrajaX 在评论中指出我的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T18:04:24.547

`(\d),(\d)`用RegEx 替换模式`\1.\2`将起作用。匹配任何数字，并且它周围的`\d`括号表示该数字将被记住并且`\1`将匹配第一个并且`\2`将匹配第二个。

# android - Android 的轮播视图

> ID：11870415
> 
> 赞同：0
> 
> 时间：2012-08-08T18:00:53.940
> 
> 标签：android, 3d, carousel

我正在为 Android 开发 3D 轮播视图，但遇到了各种问题。任何帮助是极大的赞赏。

[我以这个轮播为例](http://code.google.com/p/renderscript-examples/wiki/Carousel)尝试了 Renderscript ，但注意到一些类现在已被弃用，即 RenderScriptGL.SurfaceConfig。我搜索但找不到任何关于使用什么的信息。

有谁知道和/或可以指出我的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:05:47.310

RenderScript 作为图形的组件已经被一起弃用了。所以我强烈建议不要使用它。但是，它仍然被用作计算语言。

这看起来像一个非常好的开源库。我会从这里开始。 [http://www.codeproject.com/Articles/146145/Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

# java - CombinedDomainXYPlot 不重新缩放域轴

> ID：11870416
> 
> 赞同：3
> 
> 时间：2012-08-08T18:00:56.630
> 
> 标签：java, swing, jfreechart

当我从使用 CombinedDomainXYPlot 的图表中隐藏系列数时，所有范围轴都会很好地自动重新缩放。但是，域轴不会重新缩放。有什么方法可以手动刷新缩放，或者我缺少一个设置来在此设置中启用域轴的自动缩放？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T04:58:15.233

`CombinedDomainXYPlot``Range`在中为其共享域轴建立组合最大值`getDataRange()`。这是允许共享轴所必需的。更改系列的可见性对共享域轴没有影响；通过其方法更改`Dataset`更新共享域轴。`configure()`在任何一种情况下，子图的范围轴都可以独立更新。

下面的示例允许您独立更新子图或更改系列的可见性。拆开`configure()`看看效果。您的切换建议`setAutoRange ()`可以替换为一次调用`configure()`；但效果应该为零，因为数据及其组合最大值`Range`没有变化。

```
mainPlot.getDomainAxis().configure(); 
```

要自动更新共享域轴，请使用`addSeries()`or`removeSeries()`代替`setSeriesVisible()`.

顺便说一句，不要忽视[*Initial Threads*](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)和`pack()`.

[![组合图图像](../Images/aa9d3b335c673ac79574d9b8650ebe15.png)](https://i.stack.imgur.com/5rEsv.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.util.Random;
import javax.swing.*;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.CombinedDomainXYPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.StandardXYItemRenderer;
import static org.jfree.chart.renderer.xy.StandardXYItemRenderer.*;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/**
 * @see https://stackoverflow.com/a/64508866/230513
 * @see https://stackoverflow.com/q/11870416/230513
 */
public class CombinedPlot {

    private static final int MAX = 3;
    private static final Random RND = new Random();

    public static void main(String[] args) {
        EventQueue.invokeLater(CombinedPlot::init);
    }

    private static void init() {
        XYItemRenderer renderer = new StandardXYItemRenderer(SHAPES_AND_LINES);
        XYPlot plot1 = new XYPlot(
            generateData(), null, new NumberAxis("Range 1"), renderer);
        XYPlot plot2 = new XYPlot(
            generateData(), null, new NumberAxis("Range 2"), renderer);
        final CombinedDomainXYPlot plot =
            new CombinedDomainXYPlot(new NumberAxis("Domain"));
        plot.setDomainPannable(true);
        plot.setRangePannable(true);
        plot.add(plot1);
        plot.add(plot2);
        plot.setOrientation(PlotOrientation.VERTICAL);
        JFreeChart chart = new JFreeChart(
            "Combined Plots", JFreeChart.DEFAULT_TITLE_FONT, plot, true);
        ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new Dimension(800, 500));

        JPanel controlPanel = new JPanel();
        controlPanel.add(new JButton(new UpdateAction(plot, 0)));
        controlPanel.add(new JButton(new UpdateAction(plot, 1)));
        for (int i = 0; i < MAX; i++) {
            JCheckBox jcb = new JCheckBox(new VisibleAction(renderer, i));
            jcb.setSelected(true);
            renderer.setSeriesVisible(i, true);
            controlPanel.add(jcb);
        }

        JFrame frame = new JFrame("Combined Plot Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(chartPanel, BorderLayout.CENTER);
        frame.add(controlPanel, BorderLayout.SOUTH);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    private static class UpdateAction extends AbstractAction {

        private final XYPlot plot;

        public UpdateAction(CombinedDomainXYPlot plot, int i) {
            super("Update plot " + (i + 1));
            this.plot = (XYPlot) plot.getSubplots().get(i);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            plot.setDataset(CombinedPlot.generateData());
        }
    }

    private static class VisibleAction extends AbstractAction {

        private XYItemRenderer renderer;
        private int i;

        public VisibleAction(XYItemRenderer renderer, int i) {
            super("Series " + (i + 1));
            this.renderer = renderer;
            this.i = i;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            renderer.setSeriesVisible(i, !renderer.getSeriesVisible(i));
        }
    }

    private static XYSeriesCollection generateData() {
        XYSeriesCollection data = new XYSeriesCollection();
        for (int i = 0; i < MAX; i++) {
            data.addSeries(generateSeries("Series " + (i + 1)));
        }
        return data;
    }

    private static XYSeries generateSeries(String key) {
        XYSeries series = new XYSeries(key);
        for (int i = 0; i < 16; i++) {
            series.add(RND.nextGaussian(), RND.nextGaussian());
        }
        return series;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:10:16.577

回答我自己的问题：

我设法使用一点技巧来刷新轴：

```
 mainPlot.getDomainAxis().setAutoRange(false);
 mainPlot.getDomainAxis().setAutoRange(true); 
```

这不是很好，但它可以解决问题。不过，我希望有人可以发布一个更好的解决方案......

这是使用不起作用的非自定义数据集的代码。请运行它，然后单击一个名为 click 的大按钮多次隐藏几个系列。域轴未重新缩放。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;
import java.util.Random;
import javax.swing.*;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.event.ChartChangeEvent;
import org.jfree.chart.event.ChartChangeListener;
import org.jfree.chart.plot.CombinedDomainXYPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.StandardXYItemRenderer;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.RectangleEdge;

public class Runner {

    private static Random rand = new Random();

    public static void main(String[] args) {
        XYSeriesCollection data = new XYSeriesCollection();
        int max = rand.nextInt(2) + 2;
        for (int i = 0; i < max; i++) {
            data.addSeries(generateSeries("Series" + (i + 1)));
        }
        final XYItemRenderer renderer1 = new StandardXYItemRenderer();
        final XYPlot plot1 = new XYPlot(data, null, new DateAxis("Dates"), renderer1);

        data = new XYSeriesCollection();
        for (int i = 0; i < max; i++) {
            data.addSeries(generateSeries("Series" + (i + 1)));
        }
        final XYPlot plot2 = new XYPlot(data, null, new NumberAxis("Numbers"), renderer1);

        final CombinedDomainXYPlot plot = new CombinedDomainXYPlot(new NumberAxis("Domain"));
        plot.setGap(10.0);

        // add the subplots...
        plot.add(plot1, 1);
        plot.add(plot2, 1);
        plot.setOrientation(PlotOrientation.VERTICAL);

        // return a new chart containing the overlaid plot...
        final JFreeChart chart = new JFreeChart("CombinedDomainXYPlot Demo",
            JFreeChart.DEFAULT_TITLE_FONT, plot, true);
        chart.getLegend().setPosition(RectangleEdge.RIGHT);

        chart.addChangeListener(new ChartChangeListener() {

            boolean changed = false;

            @Override
            public void chartChanged(ChartChangeEvent event) {
                if (!changed) {
                } else {
                    changed = false;
                }
            }
        });

        ChartPanel panel = new ChartPanel(chart);
        JPanel panel2 = new JPanel(new BorderLayout(0, 10));
        panel2.add(panel, BorderLayout.CENTER);
        JButton b = new JButton("Click");
        b.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                CombinedDomainXYPlot plot = (CombinedDomainXYPlot) chart.getXYPlot();
                List l = plot.getSubplots();
                int index = rand.nextInt(plot1.getSeriesCount() + plot2.getSeriesCount());
                boolean b = renderer1.isSeriesVisible(index);
                renderer1.setSeriesVisible(index, false);
            }
        });
        panel2.add(b, BorderLayout.NORTH);
        panel2.setVisible(true);

        JFrame frame = new JFrame("dsadsa");
        frame.add(panel2);
        frame.setSize(800, 600);
        frame.setVisible(true);
    }

    private static XYSeries generateSeries(String key) {
        XYSeries series = new XYSeries(key);
        int points = 15;
        double val = 0.0;
        double x = 0.0;
        for (int i = 0; i < points; i++) {
            val += rand.nextDouble() * 6 - 3;
            x += rand.nextDouble() * 4;
            series.add(x, val);
        }
        return series;
    }
} 
```

# android - Android 应用程序首次运行

> ID：11870419
> 
> 赞同：1
> 
> 时间：2012-08-08T18:01:10.250
> 
> 标签：android

在我的应用程序中，我存储敏感的用户数据（如银行详细信息），用户可以使用单独的密码锁定每个详细信息。我希望用户**在安装后第一次运行应用程序时**设置一个主密码，这样他就可以通过输入这个主密码来恢复数据，以防他忘记密码。

因此，安装后第一次运行应用程序时，会弹出要求他设置主密码的弹窗，用户需要设置密码才能继续。

但是，当应用程序将在手机重启或关闭应用程序后启动时，他不应该得到弹出窗口。

安装后首次运行应用程序时，弹出窗口应仅出现一次。

假设`setMasterPassword()`是创建对话框的函数，我在第一次运行时在哪里调用这个函数？

android有什么参数可以判断app是新安装的吗？

或者我应该只使用**偏好变量**来检查这个？{类似于将 PreferenceVariable 中的计数器初始化为 0，然后在 onCreate() 中检查此值，当且仅当计数器为 0 时调用 setMasterPassword()，然后将计数器递增 1，这样它就不会被再次调用。}

最好的方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:06:18.510

我也试图弄清楚是否有“全新安装”布尔值，但似乎没有这样的东西，所以你应该选择一个共享的偏好，就像人们在[这里](https://stackoverflow.com/questions/7562786/android-first-run-popup-dialog)所做的那样。

PS：顺便说一句，这是那个问题的重复。

PS2：请记住，如果用户删除了您应用程序的所有存储信息，该检查也将被删除，因此您可以再次输入。

**如何提高您的信息安全：**

1.  将用户信息与一些控制字节（随机数、特定字符串等）一起存储，并使用用户密码对其进行加密。
2.  每当您需要用户信息时，获取该文件，尝试使用用户密码解密其内容（每次都询问）
3.  检查控制字节（a`substr()`可能就足够了）。如果它们相同，则获取信息。如果不是，请再次提示。

这样，您将获得一些好处：

*   您不会将用户的密码存储在任何地方。SharedPreferences 不会存储这个，只是“firstTime”变量。
*   如果用户转储了应用程序的信息，再次输入密码不会减少您的信息。
*   从资源管理器打开该文件只会显示一堆数字、符号和可能不可读的字节，这些字节大多会破坏编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:42:59.103

在某处找到此代码，它对我非常有用。所以，我想它也可能对你有帮助。

看一看。

使用**SharedPreference**存储 firstrun 值，并根据该值检查您的启动活动。如果设置了值，则无需显示对话框。否则，显示对话框并将 firstrun 标志保存在 SharedPreference 中。

在您的 MainActivity 中：

```
public void onCreate(){
    boolean firstrun = getSharedPreference("PREFERENCE", MODE_PRIVATE).getBoolean("firstrun", true);
    if (firstrun){
   [[ ...Display the dialog ]]
    // Save the state
    getSharedPreference("PREFERENCE", MODE_PRIVATE)
        .edit()
        .putBoolean("firstrun", false)
        .commit();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:39:27.053

因此单通认证的缺点。如果恶意用户设法获取/更改密码，则您设置的任何机制都不会阻止他们。如果信息真的那么敏感，您可能需要启用第二个身份验证机制（安全问题、电子邮件确认等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:11:44.860

最好的方法可能是在安装时设置接收器。

```
<receiver android:name =".CLASSNAME">
     <intent-filter>
                 <action android:name="com.android.vending.INSTALL_REFERRER"/>

      </intent-filter>
      </receiver> 
```

（如果您不熟悉这些，您将需要创建一个名为“CLASSNAME”的 BroadcastReciever 扩展类来接收广播。）

此外，除非它在市场上出现，否则安装引荐来源网址将不起作用，因此您可以按照此堆栈溢出答案来模拟虚假安装；[如何测试android推荐跟踪？](https://stackoverflow.com/questions/5890914/how-to-test-android-referral-tracking/6966718#6966718)

祝你好运。

# jquery - jQuery 自动完成在输入第二个字母后停止

> ID：11870422
> 
> 赞同：1
> 
> 时间：2012-08-08T18:01:17.120
> 
> 标签：jquery, json, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

我已经进行了一些搜索，但找不到我的问题的答案。

问题：当第一个字母输入到输入框中时，我的 jQuery 自动完成实现工作，但是当输入第二个字母时，建议消失（就像我输入了一个不正确的字母）。

我的 jQuery 代码：

```
<script type="text/javascript">
        $(document).ready(function() {
           $('#invite-connections').autocomplete({
               minLength: 0,
               source: <?php echo json_encode($array); ?>,
               focus: function(event, ui) {
                   $('#invite-connections').val(ui.item.name);
                   return false;
               },
               select: function(event, ui) {
                   $('#invite-connections').val(ui.item.name);
                   $('#invite-connections-user-id').val(ui.item.id);
                   $('#invite-connections-submit').show();
                   return false;
               }
           }) 
           .data("autocomplete")._renderItem = function(ul, item) {
               return $("<li type=\"none\"></li>")
                    .data("item.autocomplete", item)
                    .append("<a><img src=\"" + item.pic + "\" /> " + item.name + "</a>")
                    .appendTo(ul);
           }
        });
        </script> 
```

这是传递给源的数据（JSON 编码）：

```
[{"name":"test 2","pic":"\/events\/images\/default\/dp\/micro_placeholder.jpg","id":"60705234"}] 
```

因此，当我输入“t”时它可以工作，但是当我输入“e”时，“te”现在在输入框中，“test 2”建议消失了。

有人知道这里发生了什么吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:18:54.567

用于自动完成的源数组必须具有带有**`label`**属性、**`value`**属性或两者的对象（如文档[概述页面](http://jqueryui.com/demos/autocomplete/)中所述）。您可以通过添加以下属性之一将源数组转换为小部件支持的数组：

```
var src = <?php echo json_encode($array); ?>;

$.each(src, function () {
    this.value = this.name;
});

$(document).ready(function() {
    $('#invite-connections').autocomplete({
        minLength: 0,
        source: src,
        focus: function(event, ui) {
            $('#invite-connections').val(ui.item.name);
            return false;
        },
        select : function(event, ui) {
            $('#invite-connections').val(ui.item.name);
            $('#invite-connections-user-id').val(ui.item.id);
            $('#invite-connections-submit').show();
            return false;
        }
    })
    .data("autocomplete")._renderItem = function(ul, item) {
        return $("<li type=\"none\"></li>")
            .data("item.autocomplete", item)
            .append("<a><img src=\"" + item.pic + "\" /> " + item.name + "</a>")
            .appendTo(ul);
    }
});​ 
```

**示例：http:** [//jsfiddle.net/ASwRj/](http://jsfiddle.net/ASwRj/)

"t" 和 "e" 工作的原因是因为数组的字符串表示中的每个对象看起来像：

```
[object Object] 
```

在没有任何匹配属性的情况下，自动完成小部件会尝试将您键入的内容与对象的字符串表示相匹配，这就是您在键入“s”的那一刻就停止看到结果的原因。

# javascript - 如何引用父 Javascript 显示模块模式对象

> ID：11870425
> 
> 赞同：0
> 
> 时间：2012-08-08T18:01:21.613
> 
> 标签：javascript, design-patterns, kendo-ui

我用 KendoUI 的可观察对象实现了显示模块模式。这是模块定义的[Jfiddle 链接。](http://jsfiddle.net/valchev/gwHkv/5/)

我遇到的问题是当数据源在本地检索时（如 jfiddle 示例中）它工作正常，但是当我将它设置为检索远程数据时它不起作用。这是远程数据代码的[jfiddle 链接](http://jsfiddle.net/VbnAx/1/)（这在 jfiddle 中不起作用，因为它无法连接到我的 webapi，但你明白了）。

问题似乎出在数据源的 Change 事件中。当数据在本地时，它似乎都是按顺序执行的，因此当您引用 this 或 self 时，它会与视图模型对话。使用远程处理时，它回调到更改函数，但似乎不再引用正确的对象，当我设置 selectedContact 时，它对表单上的绑定对象没有任何作用。

有人知道我应该如何在数据源对象的 Change 方法中引用 selectedContact 对象吗？或者关于我哪里出错的建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:05:35.673

这可能是您尝试使用`json`而不是`jsonp`. 你可以在`jsonp` [这里](http://en.wikipedia.org/wiki/JSONP)阅读。根据您所描述的关于它在本地和远程工作的情况，我猜测问题出在哪里。尝试将数据源的数据类型从`json`更改为`jsonp`：

```
transport: {
       read: {
           url: $('#urlLink').data('url') + '?tenantID=1&dataType=Contacts_Details',
           dataType: "jsonp",
           data: {
               actionName: function () {                        
                   return SelectedContactID;
               }
           }
       }
   } 
```

# c++ - C++ 11 正则表达式：检查字符串是否以正则表达式开头

> ID：11870426
> 
> 赞同：10
> 
> 时间：2012-08-08T18:01:24.017
> 
> 标签：c++, regex, boost, c++11, boost-regex

我正在使用 C++ 11 的`<regex>`支持，并想检查字符串的开头是否与正则表达式匹配。[如果有帮助，我可以切换到 Boost，但我的印象是它们基本相同。]

显然，如果我可以控制表达式的实际文本表示，我可以`^`在它的开头粘贴 a 作为锚点。

但是，如果我只有一个`regex`（或`basic_regex`）对象怎么办？我可以修改它代表的正则表达式来添加锚点吗？还是我必须使用`regex_search`，得到结果，并检查它是否从位置 0 开始？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T18:20:09.257

您可以`std::regex_constants::match_continuous`在使用 时添加标志`regex_search`，例如，以下打印“1”和“0”：

```
#include <regex>
#include <string>

int main()
{
    std::regex rx ("\\d+");

    printf("%d\n", std::regex_search("12345abc1234", rx,
                                     std::regex_constants::match_continuous));
    printf("%d\n", std::regex_search("abc12345", rx,
                                     std::regex_constants::match_continuous));
    return 0;
} 
```

* * *

该标志表示（C++11 §28.5.2/1 = 表 139）：

> 表达式只能匹配从 开始的子序列`first`。

# html - Sublime Text 2：自动完成 html 转义字符（以 & 开头）？

> ID：11870427
> 
> 赞同：7
> 
> 时间：2012-08-08T18:01:28.710
> 
> 标签：html, sublimetext2

我刚开始使用 Sublime Text，到目前为止它已经成为我最喜欢的编辑器。

一个快速的问题：是否可以配置/使用插件来自动完成特殊的 html 字符，例如键入`&`并获取建议列表`&amp;`等`&quot;`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T01:30:30.730

Sublime Text 带有一个内置的特殊字符编码器。突出显示您要编码、点击`Ctrl+Shift+p`和键入的文本`HTML: Encode Special Characters`。

如果这还不够好并且您想要实际的自动完成，您可以添加到 HTML 自动完成列表中。转到`"Browse Packages"`主菜单，然后编辑`HTML/HTML.sublime-completions`自动完成并将其添加到自动完成列表的末尾。

# java - 你能解释一下这些说法吗？

> ID：11870429
> 
> 赞同：0
> 
> 时间：2012-08-08T18:01:51.660
> 
> 标签：java, swing, jframe, jlayeredpane, jdesktoppane

我在互联网上遇到了一个使用这两种说法的例子：

```
dp.add( bg , new Integer( 50 ) ); 
```

（dp 是 JDesktopPane 对象， bg 是 JLabel）

```
setLayeredPane( dp ); 
```

如果您想知道它们是如何使用的，那么这就是我所看到的： http: [//www.coderanch.com/t/329874/GUI/java/put-background-image-swing](http://www.coderanch.com/t/329874/GUI/java/put-background-image-swing)

当谈到 Java 时，我是一个初学者，我理解示例的其余部分，只是不理解这两个语句 - 我不知道他们在做什么，这让我很烦恼！最让我困惑的是“new Integer(50))”，但请你对这两者给出一个彻底的、对初学者友好的解释吗？我会很感激的。

提前致谢，

亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:06:40.850

See the [documentation on `JLayeredPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLayeredPane.html).

> Each layer is a distinct integer number. The layer attribute can be set on a `Component` by passing an `Integer` object during the add call. For example:
> 
> ```
> layeredPane.add(child, JLayeredPane.DEFAULT_LAYER); 
> ```
> 
> or
> 
> ```
> layeredPane.add(child, new Integer(10)); 
> ```

You can find the integer values of the default layer values [here](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLayeredPane.html#DEFAULT_LAYER).

* * *

```
dp.add(lbl,new Integer(50)); 
```

The above adds the `JLabel` component `lbl` to the `JDesktopPane` (which *is* a `JLayeredPane`) with the specified layer of `50`. Components added to `dp` with layers that are *less than* 50 will be rendered **before**, while components with layers *greater than* 50 will be rendered **after** -- i.e. a simple depth order, where greater layers refer to nearer components.

```
setLayeredPane( dp ); 
```

This sets the `JFrame` represented by the `ImagePaneTest` object (which [probably shouldn't be a subclass](http://en.wikipedia.org/wiki/Liskov_substitution_principle)) to use `dp` as its layered pane. You can see how Swing *top-level containers* work in the [relevant Java Tutorial](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html).

![](../Images/7605e82a56ab0dc0e29d910e5678e42d.png)

# php - 从 php 中的 HTTP POST 获取内容

> ID：11870431
> 
> 赞同：-2
> 
> 时间：2012-08-08T18:01:59.787
> 
> 标签：php, html, http, post

所以我正在尝试做一些我认为应该非常简单的事情：使用`HTTP POST`一个简单的 php 脚本发送数据，该脚本可以获取包含的信息并对其进行处理。此信息可以是文本或图像数据（二进制数据），但这可能无关紧要。

我正在测试我的 php 脚本，方法`hurl.it`是发送一个`HTTP POST`包含两个参数的示例`name`和`date`或类似的简单参数。我在服务器端有一个小的 php 脚本来查找这些变量名。

这是php：

```
<?php
    echo "Some Message";
    $nameValue =  $_POST('name')
    echo $nameValue
    $dateValue =  $_POST('date')
    echo $dateValue
?> 
```

我认为这会起作用，但我收到了如下回复：

> 致命错误：函数名称必须是 [volume name] 中的字符串

有人对如何解决这个问题有任何建议吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:02:42.630

`$_POST`是一个数组。你必须做

```
$_POST['name'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T18:03:28.383

`$_POST['name']` not `$_POST('name')`

also you seem to be missing semicolons.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T18:02:55.693

```
$_POST('name') 
```

这应该是

```
$_POST['name'] 
```

`$_POST`是一个数组，所以你使用`[]`. `()`是为了功能。

此外，您需要以`;`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:12:29.807

`$_POST` is an associative array. So, as for all associative arrays, the proper syntax is

> $nameValue = $_POST['name'];

Of course, this means that `$_POST['name']` could have been an array itself.

# gettext - 自制医生：找到gettext

> ID：11870441
> 
> 赞同：4
> 
> 时间：2012-08-08T18:02:31.650
> 
> 标签：gettext, homebrew

我尝试让自制软件运行，以便在可能的 mac 上安装一些 unix 工具，但无法启动。我已经删除了 fink 和 macports 并安装了自制软件。

（我正在运行 Snow Leopard 10.6.8 并安装了 XCode 3.2.6。）

当检查我的系统是否准备好运行时，“brew doctor”命令报告了几个错误：第一个是：

```
Warning: gettext was detected in your PREFIX.
The gettext provided by Homebrew is "keg-only", meaning it does not
get linked into your PREFIX by default.

If you `brew link gettext` then a large number of brews that don't
otherwise have a `depends_on 'gettext'` will pick up gettext anyway
during the `./configure` step.

If you have a non-Homebrew provided gettext, other problems will happen
especially if it wasn't compiled with the proper architectures. 
```

我该怎么办？或者我怎样才能删除它？在此先感谢欢呼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T03:33:59.610

在 /usr/local/Library/Homebrew/cmd/doctor.rb 我发现：

```
def check_for_gettext
  if %w[lib/libgettextlib.dylib
        lib/libintl.dylib
        include/libintl.h ].any? { |f| File.exist? "#{HOMEBREW_PREFIX}/#{f}" } 
```

虽然我个人从 /usr/local 下删除了所有 get text 和 libintl，但将 libgettextlib.dylib、libintl.dylib 和 libintl.h 重命名为其他名称可能就足够了（例如，带有 -pre-homebrew 的后缀）。

# javascript - Opera：尝试从脚本存储中读取值时出现安全错误

> ID：11870443
> 
> 赞同：2
> 
> 时间：2012-08-08T18:02:41.030
> 
> 标签：javascript, opera, userjs

我正在为 Opera 编写用户 JS 脚本，并且正在尝试使用 window.opera.scriptStorage 来存储和检索值。

我创建了一个名为 __EnvDriver 的类型来封装脚本存储。

```
window.__EnvDriver.storage = window.opera.scriptStorage;
if(window.__EnvDriver.storage == undefined)
{
    console.log('[__EnvDriver] Opera UserJS script storage seems to be disabled. Please set the quota to a non-zero value in opera:config.');
}

window.__EnvDriver.storageGetValue = function(key)
{
    return window.__EnvDriver.storage[key];
};

window.__EnvDriver.storageSetValue = function(key, value)
{
    window.__EnvDriver.storage[key] = value;
}; 
```

（__EnvDriver 类型的函数是在运行时确定的，以便将来轻松实现对 Firefox 或 Chrome 的支持。）

我可以毫无问题地存储值，但是在尝试读取值时，出现以下错误：

```
Uncaught exception: ReferenceError: Security error: attempted to read protected variable
Error thrown at line 45, column 2 in <anonymous function: window.__EnvDriver.storageGetValue>(key):
    return window.__EnvDriver.storage[key]; 
```

问题似乎与访问该`window.__EnvDriver.storage`值有关，因为当我尝试以任何方式使用它时会发生相同的错误。我尝试将存储对象存储在不同的地方，但它们都表现出相同的行为。这似乎是在最新的 Opera 更新 (v12.01) 之后才发生的。

任何帮助将不胜感激。

# c# - 根据行索引列表从 DataGridView 获取项目列表

> ID：11870445
> 
> 赞同：1
> 
> 时间：2012-08-08T18:02:43.453
> 
> 标签：c#, .net, winforms

我有一个`DataGridView`类似于下面的：

```
ID    Name    Data1   Data2
1     MM      X       1000
2     ST      Y       1000
3     EC      Z       1000
4     JT      T       1000 
```

我还有一个对我很重要的行索引列表。

```
List<int> myList = new List<int>();
myList.Add(1);
myList.Add(2); 
```

现在我要做的是从我的 Data1 列中获取`DataGridView`与这些行索引相对应的值。所以我想要得到的（在这个例子中）是一些包含“Y”和“Z”的数据类型。

我不想迭代，`DataGridView`因为那里有大量数据样本。有没有办法用 LINQ 做到这一点？我仍然是 LINQ 初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:05:19.883

使用这样的[`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)方法：

```
IEnumerable<string> columnValues = myList.Select(x => data.Rows[x].Cells["Data1"].Value); 
```

此代码假定对您的引用`DataGridView`存储在变量中`data`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:22:20.697

你凸轮使用

```
int id= (int)myList[0];

string[] Data1= (from DataRow row1 in Datatable.Rows
                          where row1["ID"] == id
                          select row1["Data1"].ToString()).ToArray(); 
```

现在您可以使用与列表值对应的字符串数组来访问 data1

# http - 如何查看（嗅探）http 流量？

> ID：11870448
> 
> 赞同：1
> 
> 时间：2012-08-08T18:02:57.153
> 
> 标签：http

我正在尝试确定如何最好地加载/浸泡测试分配给我测试的系统。我正在运行 Ubuntu 11.04，并且想确定从我的 Web 浏览器发出的请求数量、频率和类型，这些请求指向开发团队正在开发的新应用程序，以确定哪种工具最适合用于为产品设计测试（例如 JMeter）。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:13:21.240

I use Charles: [http://www.charlesproxy.com/](http://www.charlesproxy.com/)

It's not free, but it's inexpensive and has served be well for years now. It has the benefit of being very easy to use, albeit not as powerful as Wireshark.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:04:03.287

[Wireshark](http://www.wireshark.org)是一个非常适合这个目的的程序。它可以记录来自您系统的所有传入和传出 HTTP 流量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:06:10.827

顺便说一句，有一次我最终在 Firefox 中使用了 Firebug。最终成为我所需要的。

# wpf - 这是 XAML a bad example?

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-08-08T18:03:15.64095 次This question shows research effort; it is useful and clear0This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

In a `<ControlTemplate>` for a `Control` that inherits from `ItemsControl`, I have defined the following:

```
<Setter Property="ItemContainerStyle">
 <Setter.Value>
 <Style>
 <Setter Property="FrameworkElement.MinHeight" Value="16" />
 <Setter Property="FrameworkElement.Margin" Value="7,0,0,0" />
 <Setter Property="Button.MinWidth" Value="75" />
 <Setter Property="Button.MaxWidth" Value="120" />
 <Setter Property="Button.Height" Value="23" />
 </Style>
 </Setter.Value>
</Setter> 
```

I keep wondering whether this is a good practice. Note that the control in question should only accept objects that descend from `FrameworkElement`. Note also that I want to avoid having to write a `ItemContainerStyleSelector` and would like to do that in XAML.

[wpf](/tags/wpf "show questions tagged 'wpf'")[xaml](/tags/xaml "show questions tagged 'xaml'")[c#-4.0](/tags/c#-4.0 "show questions tagged 'c#-4.0'")[itemscontrol](/tags/itemscontrol "show questions tagged 'itemscontrol'")4

## 1 回答 1

This answer is useful1

我发现在 Style 标记本身上设置 TargetType 比用它们的实际类型限定每个属性更好。您的通用列表是否添加了多种类型的元素？如果是这样，您需要考虑所有这些设置器可能无法与不同类型的元素很好地啮合。

于 2012-08-08T20:48:11.867 回答

#### Related

[1](/questions/12424042 "Question score (upvotes - downvotes)")[iphone - 仅针对特定行的重用表视图单元格的子视图为零](/questions/12424042)[1](/questions/12424045 "Question score (upvotes - downvotes)")[.net - 句柄和线程有什么区别？](/questions/12424045)[4](/questions/12424047 "Question score (upvotes - downvotes)")[visual-studio-2010 - SlowCheetah 在构建后事件后执行](/questions/12424047)[2](/questions/12424048 "Question score (upvotes - downvotes)")[native - 本机应用程序可以访问网络吗？](/questions/12424048)[1](/questions/12424049 "Question score (upvotes - downvotes)")[python - 从 PyIDispatch 调用方法](/questions/12424049)[1](/questions/12424051 "Question score (upvotes - downvotes)")[javascript - Jquery管道多个结果](/questions/12424051)[0](/questions/12424055 "Question score (upvotes - downvotes)")[php - 如果 user_meta 等于 X 则显示一个 div](/questions/12424055)[1](/questions/12424059 "Question score (upvotes - downvotes)")[gwt - 未找到 Gwt requestFactory 验证器](/questions/12424059)[3](/questions/12424061 "Question score (upvotes - downvotes)")[testing - 如何使用 selenium 检查 Web 表单元素是否存在](/questions/12424061)[1](/questions/12424063 "Question score (upvotes - downvotes)")[android - Android 上下文菜单创建中的 getMenuInflater() 方法未定义问题](/questions/12424063)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：11870452
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# playframework - playframework 1.2.x How to have my method call every time play reloads in dev mode?

> ID：11870455
> 
> 赞同：0
> 
> 时间：2012-08-08T18:03:25.577
> 
> 标签：playframework, playframework-1.x

I need a method to be called every time play reloads so I can use the new classes to rescan some stuff. How can I get that without developing a full blown plugin? ( I really just want to add something quick to my application and move on).

On a side note, is there any good tutorial on doing a play plugin?

thanks, Dean

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:12:10.473

每次您的应用程序重新加载（可能通常处于开发模式）时，都会调用 @onApplicationStart 方法。

因此，只需使用 @onApplicationStart 创建一个引导作业，您就可以实现所需的功能。

您可以通过查看引导作业的 Play 文档来了解更多信息 - [http://www.playframework.org/documentation/1.2.5/jobs#concepts](http://www.playframework.org/documentation/1.2.5/jobs#concepts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:11:16.267

好吧，如果你有任何像 NoSql.em() 这样运行很多的方法，而 NoSql 在另一个 jar 文件中，它不会在 Play.classloader 中，在那个方法中，我最后做了一个 Play.classloader.getAnnotatedResources( ) 这给了我一个列表，我一直在比较第一个列表，当它发生变化时，我知道播放已重新加载。目前，这种 hack 对我有用，nosql 层现在与内存中的 nosql 数据库保持一致。

虽然@OnApplicationStart 不被称为“每次”单次播放重新加载，但您可以使用上述方法知道它何时重新加载 100% 的时间，而不是 75% 的时间，这与使用 @OnApplicationStart 的情况有关。

# objective-c - 在 iphone 中实现日志记录机制的最佳方法？

> ID：11870460
> 
> 赞同：-1
> 
> 时间：2012-08-08T18:03:43.723
> 
> 标签：objective-c, ios, logging

我是应用程序开发的新手。我有一个选项卡控制器，其中附加了 3 个视图。我想创建第 4 个选项卡，并提供文本视图，我想在其中附加/显示由其他选项卡视图生成的消息。

像`NSLog(@"...");`

我想要我自己的记录器：

`myLogger@("...");`-> 更新`UITextView`第 4 个选项卡的。

请提供一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:10:21.100

在某处创建一个带有字符串的数据源类。当任何控制器发出消息时，将其附加到字符串中。让 textview [KVO](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFgQFjAA&url=http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html&ei=o6siUMWsA8yayQGIoYG4Dw&usg=AFQjCNEL6_EXLwjPTgWUPgZdI08Ik1xvmg)数据源中的字符串并相应地更新自身。

不过老实说，您应该使用`NSLog`- 它自己写入调试文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:48:41.927

这是对达斯汀答案的可能扩展，但您可能会发现[CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack)非常方便。这为您提供了日志级别的消息，但也有助于您编写自己的日志消息处理程序，您的第 4 个选项卡可以使用适当的数据源访问这些处理程序。

上手比较简单，文档也比较清楚，不过需要注意的是它会用DDLog代替NSLog。[作为一个额外的好处，根据基准测试结果](https://github.com/robbiehanson/CocoaLumberjack/wiki/Performance)，它似乎比使用 NSLog 更快。

# html - Does HTML5 video only work on an actual web server?

> ID：11870461
> 
> 赞同：1
> 
> 时间：2012-08-08T18:03:46.607
> 
> 标签：html, html5-video

I just want to practice by editing an html file on my local computer with image and video (ogv) files in the same local directory, but when I try to open a browser (latest version of Firefox) on the html file, it complains "No video with supported format and MIME type found". As I've been reading on the Internet, most of the solutions say to modify the .htaccess file. So is there no way at all to embed videos in an html file just on my computer (not running a web server) and get it to work?

Edit: What I have:

```
<video width="320" height="240" controls="controls">
  <source src="media/gizmo.ogv" type="video/ogv" />
</video> 
```

Another edit: OK, it works on my local machine if I take off the `type="video/ogv"` so I guess I'll leave that out of the source tags while I'm working on my local machine and put it back in and do the .htaccess stuff if I ever actually put something on a web server.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:16:32.803

在视频标签的源标签中使用

```
type="video/ogg" 
```

那应该行得通。

最好如下所示

```
<video width="320" height="240" controls="controls">
  <source src="media/gizmo.mp4" type="video/mp4" />
  <source src="media/gizmo.webm" type="video/webm" />
  <source src="media/gizmo.ogv" type="video/ogg" />
  Your browser does not support this video
</video> 
```

对于不支持该`video`标签的旧浏览器，它将显示一条消息。提供了不同的视频格式，因为并非所有浏览器都支持所有格式。

附加：如果您要使用网络服务器，请确保网络服务器也支持这些 mimetypes

# ios - Push view controller without animating nav bar

> ID：11870463
> 
> 赞同：0
> 
> 时间：2012-08-08T18:03:49.837
> 
> 标签：ios, animation, uiviewcontroller

I implemented a slideshow gallery using pop and pushViewController, and would like to improve it by keeping the sliding animation of the view, but removing the sliding animation of the title and buttons in the nav bar. Thus, just setting the animated parameter to NO isn't an option. I did fine the following code:

```
CATransition *navTransition = [CATransition animation];
navTransition.duration = 0.75;
navTransition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];

navTransition.type = kCATransitionPush;
navTransition.subtype = kCATransitionPush;
[self.navigationController.navigationBar.layer addAnimation:navTransition forKey:nil]; 
```

but it adds a slight ease in/ease out, which I would like not to show up.

Any suggestion?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:36:52.357

这有点复杂，但是您可以制作导航栏的图像，隐藏导航栏，显示您的图像并推送您的视图。完成后，删除图像并取消隐藏导航栏。

有一个 Apple WWDC 视频关于使旋转更平滑，它使用了很多类似的技术，可能会很有启发性。会议 240 - 抛光您的界面旋转（从 2012 年开始）

# javascript - 尽管语法错误，但在浏览器中读取 javascript 文件

> ID：11870465
> 
> 赞同：3
> 
> 时间：2012-08-08T18:03:51.757
> 
> 标签：javascript, cross-domain, cross-domain-policy, script-tag

假设我在一个完全不受控制的域上有一个 csv，我想在我的页面上访问它：

```
<script src="http://domainidontcontrol/blah.csv"></script> 
```

当然，当浏览器尝试解析 csv 时，这将引发语法错误，因为它不是有效的 javascript。是否有任何可能的方法可以从浏览器中访问此 csv 中的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:05:51.400

如果其他服务器设置了处理程序，请查看 CORS [http://www.w3.org/TR/cors/或 JSON-P。](http://www.w3.org/TR/cors/)如果这些失败，您可能必须使用服务器端代理。这不会太难，只需向您的服务器发出 AJAX 请求，让您的服务器获取它，然后返回结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:05:51.667

在服务器上使用 php/asp 脚本，该脚本将检索 csv 文件并通过 ajax 将其返回到您的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:13:32.063

You should try to get the file using Ajax. For example with jQuery:

```
$.ajax({url:"http://domainidontcontrol/blah.csv", success:function(result){
  alert(result); //do something with the result
}}); 
```

That way now you can handle the contents of the file (the result) as you like since it will be a regular string.

# java - 使用 posix ipc 消息队列通信 Java 应用程序和 C++ 进程

> ID：11870470
> 
> 赞同：2
> 
> 时间：2012-08-08T18:04:03.737
> 
> 标签：java, c++, ipc

我很难解释我需要实现什么，所以我真的希望我能够做到。

我有一个 C 进程，它使用 ipc 消息队列来发送和接收数据。我还有一个 Java 应用程序需要向该 C 进程发送和接收消息，因此它需要访问该队列。

我一直在寻找一种方法来做到这一点，我认为 JNA（java natice 访问）可能是一个解决方案。问题是，显然，我需要一个 DLL，以便映射和使用我需要的方法（msgget、msgsnd、msgrcv、msgctl），但我不知道应该加载哪个 DLL。我对此很陌生，所以我感到迷茫。

还有另一种方法可以让这两个应用程序使用消息队列进行通信吗？还是 JNA 是一个很好的解决方案，我只需要找到正确的 DLL 来加载？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:11:41.397

如果这是一个选项，您可以更改 C 进程以使用不同的通信方式。以我的经验，套接字是在 c 和 java 程序/进程之间进行通信的最不麻烦的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:11:14.203

如果你能找到depend.exe（我知道VS 2005 有），它可以显示每个dll 导出的函数。在您的 c 程序上运行它以查看函数的来源，如果它们是真实的，您可以使用 JNA。这些函数实际上可能只是包装器，如果是这样，您需要使用 JNI

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:09:48.653

使用 JNA 是完全合法的，但有点棘手。

这篇文章“ [Java POSIX IPC](https://stackoverflow.com/questions/2278208/java-posix-ipc-is-there-an-api) ”可能有一些关于如何在 Java 中或使用 Java 库中做到这一点的线索。

# ajax - 如何在 Backbone 的 model.save 错误回调中获取错误响应？

> ID：11870479
> 
> 赞同：3
> 
> 时间：2012-08-08T18:04:32.333
> 
> 标签：ajax, backbone.js, error-handling, response

Backbone 的错误回调`model.save`只需要两个参数`error: function(model, response){}`。在我的应用程序中，如果乐观锁定失败，`409 conflict`则会设置一个状态（这很容易检索）。但是，服务器还会发送一条自定义错误消息，详细说明该问题。

现在，服务器会发送更新后的 JSON 响应以及*更新后的模型* 以及说明问题所在***的错误消息。***看来，主干抑制了这个错误。根据 jquery 的错误回调，签名是`error(jqXHR, textStatus, errorThrown)`. 似乎 Backbone 丢弃了最后一部分，因此我似乎无法掌握服务器的自定义响应。

这是一个好习惯吗？我真的不希望复制主干的保存功能只是为了访问`errorThrown`参数。是否有无缝的方式来访问`errorThrown`？或者最好不要让服务器发送自定义响应，只发送代码并让客户端构建响应以供查看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-19T19:34:08.760

Backbone 将 2 个参数传递给成功和错误情况。第一个是您要保存的模型，第二个是来自服务器的响应。如果响应是 JSON 格式，您可以通过调用来访问它`response.responseJSON`

```
this.model.save(null, {
    success: function(model, response) {
        console.model(response);
    },
    error: function (model, response) {
        console.log(response.responseJSON);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:14:38.537

该`response`对象应具有属性`.responseText`和`.statusText`. 根据您的服务器构建其响应的方式，这些属性之一可能包含您要查找的错误文本。

# java - 如何按对象属性对 ArrayList 进行排序？

> ID：11870482
> 
> 赞同：0
> 
> 时间：2012-08-08T18:04:47.310
> 
> 标签：java, android

假设我有一个自定义对象的 ArrayList，例如

```
class fileOjb
{
    String path;
    String format;
    int size;
    int dateadd;
} 
```

我应该如何按路径、格式、大小或添加日期对其进行排序？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:05:56.167

您需要编写自己的[比较器](http://www.tutorialspoint.com/java/java_using_comparator.htm)并调用 Collections.sort(yourComparator)

例如：

```
class YourComparator implements Comparator<MyObj>{

   public int compare(MyObj o1, MyObj o2) {
        return o1.getyourAtt() - o2.getyourAtt();
    }

}

NOTE: Cast o1 and 02 to your object type.
EDIT: Based on Ted comment, update to generics, now don't need cast 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:13:38.307

这是代码示例。用于排序`dateAdded`。按其他属性排序..你必须先决定你的`criteria`. （字符串`path1`大于的标准是什么`path2`）

```
public class MyComparableByDateAdded implements Comparator<fileOjb>{

    @Override
    public int compare(fileOjb o1, fileOjb o2) {
        return (o1.dateAdd>o2.dateAdd ? -1 : (o1.dateAdd==o2.dateAdd ? 0 : 1));
    }
}

Collections.sort(list, new MyComparableByDateAdded()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:06:24.327

实现 a并使用;`Comparator<fileObj>`对列表进行排序 `Collections.sort(list, comparator)`方法

# c++ - C ++“错误：'{'令牌之前的预期不合格ID”

> ID：11870485
> 
> 赞同：1
> 
> 时间：2012-08-08T18:05:20.320
> 
> 标签：c++, syntax

遇到此错误时，我一直在阅读有关使用 SDL 进行游戏编程的教程。我创建了一个名为 CApp 的类，其头文件如下：

```
#ifndef CAPP_H_INCLUDED
#define CAPP_H_INCLUDED

#include <SDL/SDL.h>

class CApp{
    private:
        bool Running;

    public:
        CApp();
        int OnExecute();

        bool OnInit();
        void OnEvent(SDL_Event* Event);
        void OnLoop();
        void OnRender();
        void OnCleanup();
};

#endif // CAPP_H_INCLUDED 
```

这是相应的 .cpp 文件：

```
#include "CApp.h"

CApp::CApp{
    Running = true;
}

int CApp::OnExecute(){
    if(OnInit() == false){
        return -1;
    }

    SDL_Event Event;

    while(Running){
        while(SDL_PollEvent(&Event)){
            OnEvent(&Event);
        }
        OnLoop();
        OnRender();
    }

    OnCleanup();

    return 0;
}

int main(int argc, char* argv[]){
CApp theApp;

return theApp.OnExecute();
} 
```

错误发生在 .cpp 文件中读取“CApp::CApp{”的行上

我对 C++ 还很陌生，甚至对 SDL 也很陌生，因此我将不胜感激。我正在使用带有 mingw 编译器的 CodeBlocks IDE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:06:38.463

您缺少将构造声明为方法/构造函数的括号。

```
CApp::CApp () {
    Running = true;
} 
```

# tsql - TSQL 条件集

> ID：11870486
> 
> 赞同：3
> 
> 时间：2012-08-08T18:05:23.097
> 
> 标签：tsql, set, conditional, if-statement

我想根据表中的另一个字段在我的表中设置一个字段。

这是我想要的功能：

```
set result = Win if ((select status from tableY) like '%Won%')
set result = Loss if ((select status from tableY) like '%lost%') 
```

这不编译...我如何获得正确的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:09:05.873

```
set result = case when (select status from tableY) like '%Won%'
                  then 'Win'
                  when (select status from tableY) like '%lost%'
                  then 'Lost'
               -- If neither win or lose don't change a thing
                  else result
              end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:19:43.157

那么，您正在尝试更新 tableY 中的列？

```
UPDATE tableY SET Result = CASE WHEN status LIKE '%Won%' then 'Win' 
                                ELSE 'Loss'
                           END
WHERE (status LIKE '%Won%'  AND COALESCE(Result,'') != 'Win')
   OR (status LIKE '%Lost%' AND COALESCE(Result,'') != 'Loss') 
```

# python - list.append(obj) 导致回溯 - 这是为什么？

> ID：11870488
> 
> 赞同：3
> 
> 时间：2012-08-08T18:05:28.103
> 
> 标签：python, django, list, indexing, indexoutofboundsexception

考虑以下代码：

```
for url in urls:
        obj           = HtmlInfo()

        obj.url       = url 
        obj.html      = hc.get_html(url)
        obj.tag_count = hc.get_num_tags(obj.html, 0, True)
        htmlinfos.append(obj) 
```

where`urls`是一个 url 列表，并且`htmlinfos`在循环之前被初始化为一个空列表，当然：

`htmlinfos = [ ]`

然而，无论出于何种原因，`list-assignment index out of range`当我尝试运行此代码时都会遇到异常。

这可能是什么问题？注意，我的 Python 版本是 2.7，我使用的是最新的稳定版 Django（我相信是 1.4）

**更新 - 追溯**

```
Environment:

Request Method: GET
Request URL: http://xx.xxx.xxx.xx/xxx/0/test/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'scrapper',
 'django_pdb')
Installed Middleware:
('django.middleware.cache.UpdateCacheMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django_pdb.middleware.PdbMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/share/nginx/www/xxx/private/xxx/views.py" in test
  44\.         return HttpResponse("Dis be er bad query yo " + test_id )
File "/usr/share/nginx/www/xxx/private/xxx/views.py" in __get_html_list
  23\.     return list

Exception Type: IndexError at /xxx/0/test/
Exception Value: list assignment index out of range 
```

**更新 - __get_html_list()**

```
def __get_html_list():
    hc = HtmlCounter()

    htmlinfos = [ ]

    #add more urls here for testing
    urls = [ '/usr/share/nginx/www/xxx/private/template/test/html_count_test.html' ]

    for url in urls:
        obj           = HtmlInfo()

        obj.url       = url 
        obj.html      = hc.get_html(url)
        obj.tag_count = hc.get_num_tags(obj.html)
        htmlinfos.append(obj)

    return htmlinfos 
```

**笔记**

最初`htmlinfos`被简单地称为`list`，所以我在发布之前更改了它，重新运行它，我仍然得到同样的错误：/

**更新 - get_html_tag_count()**

为简洁起见，我想我也可以发布这个，以防这可能与问题有关：

```
def get_num_tags(self, html):

        if reset:
            self.reset()

        current_index = 0

        for char in html:

            if (char == "<"):

                close_index = html[current_index:].find("/>", current_index)

                if close_index == -1:
                    break
                else:
                    ++self._tag_count

            ++current_index

        return self._tag_count 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:18:16.500

尝试分别用and替换`++self._tag_count`and`++current_index``self._tag_count+=1``current_index+=1`

`++var`适用于大多数语言，但 python 不像大多数语言。

# ruby - 如何在 ruby 中使用函数式编程范式重写在动态编程中查找最大连续子数组？

> ID：11870489
> 
> 赞同：2
> 
> 时间：2012-08-08T18:05:39.943
> 
> 标签：ruby, algorithm, functional-programming, refactoring, dynamic-programming

我编写了以下代码来查找具有最大总和的连续子数组，我觉得这很丑：

问题是我内心对这个问题的思考（使用DP）势在必行。我如何重构这段代码并使其更具功能性（和 DRY）？关于如何用函数式语言思考算法的任何建议？（也许应该是一个单独的问题）。

```
class Object
  def sum(lst)
    lst.reduce(:+)
  end
end

def dp_max_subarray(lst)
  i=0
  s=0
  while i<lst.length
    (i...lst.length).each do |j|
      t = sum lst[i..j]
      if t > s
        s= sum lst[i..j]
        next
      elsif t < 0
        i=j+1
        break
      end
    end
    i+=1
  end
  s
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:45:45.823

[在此处](http://en.wikipedia.org/wiki/Maximum_subarray_problem#Kadane.27s_algorithm)查找O(n) Python 解决方案。将其翻译成函数式 Ruby 很简单：

```
def max_subarray(xs)
  xs.inject([0, 0]) do |(max_so_far, max_up_to_here), x|
    new_max_up_to_here = [max_up_to_here + x, 0].max
    new_max_so_far = [max_so_far, new_max_up_to_here].max
    [new_max_so_far, new_max_up_to_here]
  end.first
end

xs = [31, -41, 59, 26, -53, 58, 97, -93, -23, 84]
max_subarray(xs) #=> 187 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:56:55.310

我把它写成一个单行字（虽然效率不高，而且非常难以理解）：

```
(0...arr.length).map{|start| (1..(arr.length-start)).map{|length| arr.slice(start, length).inject(:+)}.max}.max 
```

# r - 使用 NADA 库中的 plot(cenros) 命令在同一图表上显示多个概率图

> ID：11870497
> 
> 赞同：2
> 
> 时间：2012-08-08T18:05:55.480
> 
> 标签：r, graph, plot, par

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:59:05.393

在我看来，“ros”类对象的绘图方法记录不充分。ylim 和 xlim 都设置为参数的范围，这是以防止用户提供替代范围的方式完成的。您需要重新编写绘图方法才能更改此设置。NADA 中绘图方法的帮助页面上没有记录这一事实。

如果您想模仿用于设置 xlim 和 ylin 参数的方法，您需要查看 plot.ros 函数是如何做到的，然后推广到两个模型拟合：

```
 uncen = x$modeled[!x$censored]
    cen = x$modeled[x$censored]
    pp.uncen.nq = qnorm(x$pp[!x$censored])
    pp.cen.nq = qnorm(x$pp[x$censored])
     ymin = min(c(uncen, cen))
     ymax = max(c(uncen, cen))
     xmin = min(c(pp.uncen.nq, pp.cen.nq))
     xmax = max(c(pp.uncen.nq, pp.cen.nq)) 
```

因此，您需要保存模型拟合，然后提取`modeled`和 'pp' 参数并对其进行处理，直到您可以将某些内容传递给修改后的绘图方法。在尝试了 S4 调用方法但没有成功之后，我决定构建一个可以通过此调用看到的绘图方法的外部化版本会更容易：

```
showMethods("plot", class="ros", includeDefs=TRUE) 
```

# c++ - Calling and Passing a DLL variables C++

> ID：11870501
> 
> 赞同：0
> 
> 时间：2012-08-08T18:06:06.483
> 
> 标签：c++, visual-c++, dll

I have a source file file.cpp and within it I need to access a DLL `file.dll`. Also I need access to the function `DoFunction` within `file.dll` and I need to pass it some variables from the `file.cpp`.

I have:

```
m_hinstPtiDLL = LoadLibrary("file.dll");
pGNSI = (PGNSI) GetProcAddress(m_hinstPtiDLL, "DoFunction"); 
```

I want to be able to pass `DoFunction` 7 variables and have it return the necessary value.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:09:20.877

我想您已经从[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)中获取了示例。

pGNSI 应该是指向在 DLL 中定义的函数的确切原型的函数的指针。如果您在 DLL 中有此功能：

```
void myFunc(int arg1, int arg2); 
```

那么 pGNSI 应该是：

```
typedef void (*pGNSI)(int arg1, int arg2); 
```

那么你不应该得到一个错误。

这样做的一个好方法是从您的 DLL 中提供一个导出的头文件，该文件声明函数指针并将此头文件包含在应用程序中。这使得定义一致且没有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:10:37.697

这将返回一个指向函数的指针。

```
pGNSI = (PGNSI)GetProcAddress(m_hinstPtiDLL, "DoFunction"); 
```

如果不是，`NULL`那么只需调用它。例如，如果函数的签名需要 7 个参数：

```
if (pGNSI)
{
    pGNSI(p1,p2,p3,p4,p5,p6,p7);
} 
```

# c# - 这是什么意思？

> ID：11870508
> 
> 赞同：4
> 
> 时间：2012-08-08T18:06:29.807
> 
> 标签：c#, .net

正如标题所说，我想我前一阵子看到这个时正在看c#代码，我从来没有注意到它，但是`::`c#中的意思是什么。我想我看到了类似的东西`myVar::Process.Start()`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T18:10:16.733

它是[命名空间别名限定符](http://msdn.microsoft.com/en-us/library/htccxtad)- 如果您使用命名空间别名：

```
using config = System.Configuration;

...

var value = config::ConfigurationManager.AppSettings["Somthing"]; 
```

当您在同一范围内具有相同名称的类型时，它有助于消除歧义。

例如 - 如果您有多个`Leg`类（一个用于家具，一个用于旅程），并且两者都在导入的命名空间中，结果当您`Leg`在代码中使用时，编译器无法判断您指的是哪一个，然后，如果您有命名空间的命名空间别名，则可以使用`<alias>::Leg`来指代您所指的确切类型。

全局命名空间有一个默认[别名](http://msdn.microsoft.com/en-us/library/c3ay4x3d) `global`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-08T18:08:26.137

它在[文档](http://msdn.microsoft.com/en-US/library/htccxtad(v=vs.80))中：

> 命名空间别名限定符 (::) 用于查找标识符。它始终位于两个标识符之间，如下例所示：

```
global::System.Console.WriteLine("Hello World"); 
```

[如何：使用命名空间别名限定符（C# 编程指南）](http://msdn.microsoft.com/en-US/library/c3ay4x3d(v=vs.80))可能也很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:37:48.257

如果您在较低的命名空间中有一个与另一个名称相同的方法或属性，您将使用**:: 。**例如：

```
namespace Taylor 
{ 
 public Console {get; set;}
} 
```

所以假设你想使用**Console.WriteLine();**

不使用`global::System.Console.WriteLine();` 它，默认情况下将使用`Taylor.Console` 它，因为它指向`this`

它基本上使它区分命名空间，您指定的；最常见的是：（`global`最低级别）。

这个例子有点多余，因为 System.Console 无论如何都会指向它。查看 Oded 的示例可以了解如何在`::`动态使用的同时使用它。

# c++ - returning address of local variable is bad THEN why this code works

> ID：11870512
> 
> 赞同：0
> 
> 时间：2012-08-08T18:06:40.240
> 
> 标签：c++

> **Possible Duplicate:**
> [Can a local variable's memory be accessed outside its scope?](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

Returning the address of a variable inside a function is bad because that variable will no longer exist if the stack frame where the variable belongs end.

So why this code works fine

```
int* test(){
    int a = 11;
    return &a;
}

int main(){

    int *a;
    a = test();

    cout << *a;

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:07:14.970

> 那么为什么这段代码可以正常工作

未定义的行为意味着代码*看起来*可以正常工作。但它仍然是未定义的。

在您的情况下，`a`是一个悬空指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:08:16.420

代码仍然是错误的。它现在可能*看起来*有效，但下周不会。它现在似乎可以工作，但改变一件小事，它就不再“工作”了。

尝试这个。添加另一个功能，`test2`：

```
int *test()
{
    int a = 11;
    return &a;
}

int test2()
{
    int b = 13;
}

int main()
{
    int *a;

    a = test();
    cout << "after test: " << *a << endl;

    test2();
    cout << "after test2: " << *a << endl;

    return 0;
} 
```

现在是`11`两次打印？请注意，它仍然*可以*打印`11`两次，但可能不会。毕竟，我们仍然在这里与未定义的行为调情。

但在我的机器上，我看到：

```
after test: 11
after test2: 13 
```

`test2`已经破坏了我的悬空指针指向的堆栈空间。代码不正确。函数内部定义的变量在`test`函数退出时超出范围，不再有效。保持对它的引用不会改变这一点。

# c# - Can I return an image instead of a string in this mvc3 controller

> ID：11870513
> 
> 赞同：-2
> 
> 时间：2012-08-08T18:06:59.460
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

This works perfectly for what I am doing except one thing -- I'd like it to return a thumbnail image instead of a string. Is this possible in mvc3\. This is my controller and I'm using an Ajax.ImageActionLink. I am a novice and am muddling through things. Thanks.

```
 public string ThankYou()
    {
        System.Threading.Thread.Sleep(15000);
        return "Serenity Equine Rescue";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:11:04.403

如果您的方法是动作，您只需使用您所在的`FileResult`控制器类上的方法之一。

顺便说一句，动作方法不应该返回任何东西，而是`ActionResult`它的后代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:12:04.110

```
public ActionResult ThankYou()
{
    byte[] imageData = ...
    return File(imageData, "image/png");
} 
```

或者如果它不是动态图像：

```
public ActionResult ThankYou()
{
    string imageFile = @"c:\images\foobar.png";
    return File(imageFile, "image/png");
} 
```

然后您可以使用`<img>`标签来显示此图像：

```
<img src="@Url.Action("ThankYou")" alt="some image" /> 
```

# android - How to add a custom view on an image view dynamically/programatically in android

> ID：11870514
> 
> 赞同：0
> 
> 时间：2012-08-08T18:07:01.710
> 
> 标签：android, android-imageview, android-custom-view, android-framelayout

I have to make an app in which an image is loaded from the gallery and a rectangle can be drawn on the image to focus a specific part of the image. The rectangle is drawn dynamically and it can be re-sized and dragged. So i have made a custom view for my rectangle. Now i want to add this rectangle view on my image view. How is this adding of a custom view on a image view possible dynamically. I tried using frame layout but it didn't help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:31:16.103

The ImageView is now ViewGroup so no View can be added to the ImageView. Instead you can draw directly on the ImageView itself by overriding the method `onDraw(Canvas)` of the ImageView.

An other possibility is to have your view with the rectangle over the image view and have a transparent background. To have two view over one another you can use the `RelativeLayout` Object.

# jsf - 从 SelectOneMenu 设置字段；JSF 1.2

> ID：11870523
> 
> 赞同：0
> 
> 时间：2012-08-08T18:07:40.367
> 
> 标签：jsf, set, selectonemenu

通过在 SelectOneMenu 中选择 idem，我遇到了与设置属性相关的问题。就是这样：在表示层我有：

```
<h:selectOneMenu id="fio" value="#{page.personOwner}" disabled="#{page.readonly}" readonly="#{page.readonly}" >         
                                <a4j:support event="onchange" reRender="generalForm" ajaxSingle="true" />           
                                <f:selectItems value="#{page.agrGrpRelInsPersons}" ></f:selectItems>
                            </h:selectOneMenu> 
```

所以，我可以用列表中的“agrGrpRelInsPersons”填充菜单。这是返回它的方法：

```
public List<SelectItem> getAgrGrpRelInsPersons(){
        List<SelectItem> persons = new ArrayList<SelectItem>();
        for(AgrGrpRel agrGrpRel : getAgreement().getAgrGrpRels()){
            for(InoPerRel inoPerRel :agrGrpRel.getAgreement().getInsObject().getInoPerRels()){
                persons.add(new SelectItem(((Person)inoPerRel.getPerson()), inoPerRel.getPerson().getName1()+" "+inoPerRel.getPerson().getName2()+" "+inoPerRel.getPerson().getName3()));
                }
            }
        return persons;
    } 
```

..在这里您可以看到，作为 new SelectItem 中的第一个参数，我传递了一个对象 Person，我想将其设置为 setter：

```
public void setPersonOwner(Person person){
        getAgreementExt().setOwner(person);
    } 
```

但是，这对我不起作用..现在我很高兴知道我做错了什么或我错过了什么。

感谢您的建议！

# javascript - 自己网站的视频播放器（带有 youtube）

> ID：11870529
> 
> 赞同：0
> 
> 时间：2012-08-08T18:08:02.663
> 
> 标签：javascript, html

我想在我的网站上添加视频。有些来自youtube，有些不是。

跟随w3学校这是最好的解决方案

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4" />
  <source src="movie.ogg" type="video/ogg" />
  <source src="movie.webm" type="video/webm" />
  <object data="movie.mp4" width="320" height="240">
    <embed src="movie.swf" width="320" height="240" />
  </object> 
</video> 
```

1.  我的问题是，如果我只有 1 个 youtube 链接，我该怎么办。
2.  我的另一个问题是我是否录制了某些内容并将其放在我的电脑上，或者我在某处下载了一个 .flv/mp4 文件。我需要将它转换为 ogg / webm / mp4

我现在只使用了 mp4 行，因为我有一个 mp4 文件。但在Firefox中它不会播放，在IE中它不会显示。

这是网站： http: [//jdkmedia.nl/Atlanta/media.php](http://jdkmedia.nl/Atlanta/media.php)下载了 mp4 格式的 youtube 电影。

（PS 我使用的是 windows 8、IE 10、chrome 21、firefox 14）

如果您看到应该编辑的内容，请提前致谢并进行编辑。

**问题已回答/已关闭，请随时发布更多答案**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:19:16.217

如果您想嵌入 youtube 视频，这是正确的方法

```
<iframe title="YouTube video player" class="youtube-player" type="text/html" 
width="640" height="390" src="http://www.youtube.com/embed/W-Q7RMpINVo"
frameborder="0" allowFullScreen></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:13:15.247

我使用 ffmpeg 将视频文件转换为 html5 兼容格式取得了一些成功。正确获取命令行可能有点繁琐，但如果您使用谷歌搜索，有些网站可以提供帮助（例如[http://paulrouget.com/e/converttohtml5video/](http://paulrouget.com/e/converttohtml5video/)）

在你的情况下，你可能会使用这样的东西：

```
ffmpeg -i input.mp4 \
       -acodec libvorbis -ac 2 -ab 96k -ar 44100 \
       -b 345k -s 640x360 output.ogg 
```

# html - 表格的 CSS 中的border="1" 等价物是什么？

> ID：11870530
> 
> 赞同：13
> 
> 时间：2012-08-08T18:08:02.767
> 
> 标签：html, css, css-tables

我想`border="1"`通过等效的样式表定义来使用等效的 CSS。

和适用于表格，但缺少由 给出的单元格`border-width`边框。`border-style``border="1"`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T18:09:42.873

将其应用于`td`元素而不是`table`元素。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-11T03:37:58.413

所以这应该是一个简单的答案，但是当您使用 CSS 表格和 td 时，它与border="1" 100% 不太匹配（但非常接近）

![在此处输入图像描述](../Images/bad4a6974ca1e6ec9d837a7894d7ffec.png)

我的方式使用这个：

```
table { 
        border: 1px outset grey;
        padding: 1px 
  }

td { 
            border: thin inset grey;
            margin: 1;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T19:41:09.897

CSS

```
td { border: solid 1px #PlaceColorHere } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-06T17:37:32.887

这对我有用：

```
 table {
        border-width: 2px;
        border-style: groove;
    }
    td {
        border-width: 2px;
        border-style: inset;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-14T08:58:51.863

如果您有一些需要内部边框的表格和一些不需要内部边框的表格，请创建一个类“border1”。html 更改为：

```
<table class="border1"> 
```

并添加 css ：

```
.border1, .border1 th, .border1 td
{
    border: 1px solid black
} 
```

它为表格以及里面的单元格创建了一个边框。

# list - All list rotations in Haskell

> ID：11870536
> 
> 赞同：6
> 
> 时间：2012-08-08T18:08:37.993
> 
> 标签：list, haskell, functional-programming

I have a function to rotate a list:

```
rotate :: [a] -> [a]
rotate [] = []
rotate (x:xs) = xs ++ [x] 
```

Now I want a function that gives a list with every possible rotation of a finite list:

```
rotateAll :: [a] -> [[a]] 
```

In a imperative language, I would do something like (in pseudocode)

```
for i = 1 to length of list
  append list to rotateList
  list = rotate(list) 
```

Of course, thinking imperatively probably doesn't help me find a functional solution to this problem. I'm looking for some hints as to how to tackle this.

**Additional thoughts:**

To solve this, I have two issues to tackle. First I need to repeatedly rotate a list and collect each result into a list. So a first solution needs to do something like

```
rotateAll xs = [xs (rotate xs) (rotate (rotate xs)) (rotate (rotate (rotate xs))) ...] 
```

Of course I don't know how many times to do this. I'd be satisfied to do this infinitely and then use `take (length xs)` to get the finite number of lists I desire. This actually demonstrates the second issue: determining when to stop. I don't know if using `take` is the most efficient or elegant way to solve the problem, but it came to mind as I was typing this and should work.

**Addendum:** Now that I have found two solutions on my own or with hints. I will gladly welcome any other solutions that are faster or use different approaches. Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T22:00:37.850

Use the predefined functions in `Data.List`! You can get a list of all rotations using four function calls, no recursion, and no `rotate` function.

You asked not to have a full solution posted here. For those who want to see it, a full solution (one line of code) appears at [http://pastebin.com/atGiw1ig](http://pastebin.com/atGiw1ig).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:28:12.540

Aside from [iterate](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3aiterate), you could write a function that generates a list of n rotations. Case n=0 would just wrap the input in a list and case n=m+1 would append the input to the result of case m. Although using standard functions is generally preferred, sometimes writing your own solutions is healthy.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-06T16:39:23.173

Here is a version that is fully lazy in both the list of rotations itself and each individual entry in the list. The key is is that rather than pre-compute the length, just match up the elements in your result to the elements in the list as you go, stopping when your input list runs out.

```
rotations xs = map (takeSame xs) $ takeSame xs (tails (xs ++ xs)) where
    takeSame [] _ = [] 
    takeSame (_:xs) (y:ys) = y:takeSame xs ys 
```

In addition this is much better behaved memory-wise than some of the other choices due to its use of tails and only the single concatination. Of course, it also handles infinite lists properly as well.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T18:35:10.607

You might also want to consider this site [How to define a rotates function](https://stackoverflow.com/questions/7631664/how-to-define-a-rotates-function/7632272#7632272) that answers the same question.

**Edit due to Comment:** The implementations based on `rotate` as well as the one based on `inits` and `tails` should be quadratic in the length of the list. However, the one based on `inits` and `tails` should be less efficient because it performs several quadratic traversals. Though note that these statements only hold if you evaluate the result completely. Furthermore, the compiler might be able to improve the code so you have to treat these statements with caution.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-24T18:05:16.950

```
rotations (x:xs) = (xs++[x]):(rotations (xs++[x]) ) 
```

this creates continues lazy rotations now just take the first unique ones, which will be equal to the length of the original list

```
take (length xs) (rotations xs) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-08T18:29:43.827

I came up with two solutions. First is a hand-crafted one that came to me after I posted my question:

```
rotateAll :: [a] -> [[a]]
rotateAll xs = rotateAll' xs (length xs)
    where rotateAll' xs 1 = [xs]
          rotateAll' xs n = xs : rotateAll' (rotate xs) (n - 1) 
```

The other uses @Tilo's suggestion:

```
rotateAll :: [a] -> [[a]]
rotateAll xs = take (length xs) (iterate rotate xs) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-08T18:38:12.807

You could also generate them recursively. Generating all rotations of an empty or single element list is trivial, and generating the rotations of `x:xs` is a matter of inserting `x` into the correct position of all the rotations of `xs`.

You could do this by generating the indexes to insert into (simply the list [1, 2, ...] assuming the previous rotations are in this order) and use `zipWith` to insert `x` into the correct positions.

Alternatively you can `split` the rotations around the position using a combination of `inits` and `tails` and use `zipWith` to glue them back together.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-09T07:59:45.367

> Addendum: Now that I have found two solutions on my own or with hints. I will gladly welcome any other solutions that are faster or use different approaches. Thanks!

Since no else pointed out using `cycle` I thought I would add this solution for finite lists:

```
rotations x = let n = length x in map (take n) $ take n (tails (cycle x)) 
```

For an infinite list `x` the rotations are just `tails x`.

Evaluating the `cycle x` is O(n) time and space, each element of `tails` is O(1), and `take n` is O(n) time and space but the two `take n` are nested so evaluating the whole result is O(n^2) time and space.

If it garbage collects each rotation before lazily generating the next one then the space is theoretically O(n).

If you are clever about how much you are consuming then you do not need `map (take n)` and can just walk the `cycle x` or `take n (tails (cycle x))` and keep the space O(n).

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-14T23:00:04.713

From scratch:

```
data [] a = [] | a : [a]

end :: a -> [a] -> [a]
end y []       = y : []
end y (x : xs) = x : y `end` xs

-- such that `end x xs  =  xs ++ [x]`

rotating :: [a] -> [[a]]
rotating [] = []
rotating xs = rots xs
   where
      rots xs@(x : xs') = xs : rots (x `end` xs')

-- An infinite list of rotations

rotations :: [a] -> [[a]]
rotations xs = rots xs (rotating xs)
   where
      rots []       _        = []
      rots (_ : xs) (r : rs) = r : rots xs rs

-- All unique rotations, `forall xs.` equivalent to `take
-- (length xs) (rotating xs)` 
```

Or:

```
{-# LANGUAGE BangPatters #-}

rotate :: [a] -> [a]
rotate []       = []
rotate (x : xs) = x `end` xs
   where
      end y []       = y : []
      end y (x : xs) = x : end y xs

iterate :: Int -> (a -> a) -> a -> [a]
iterate 0 _ _ = []
iterate n f x = case f x of
                   x' -> x' : iterate (n - 1) f x'

length :: [a] -> Int
length xs = len 0 xs
   where
      len !n []       = n
      len !n (_ : xs) = len (n + 1) xs

rotations :: [a] -> [[a]]
rotations xs = iterate (length xs) rotate xs

-- Starting with single rotation 
```

Or, integrated:

```
rotations :: [a] -> [[a]]
rotations [] = [[]]
rotations xs = rots xs xs
   where
      rots []       _            = []
      rots (_ : xc) xs@(x : xs') = xs : rots xc (x `end` xs')

      end y []       = y : []
      end y (x : xs) = x : end y xs 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-20T09:54:58.473

Maybe you can use `Data.List`

```
import Data.List
rotate x=[take (length x) $ drop i $ cycle x | i<-[0..length x-1]] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-20T08:47:10.063

I used the following `rotations` function as a helper for my [permutations algorithm](https://stackoverflow.com/a/43507769/4543207). It seems to be the fastest among all here.

```
rotations :: [a] -> [[a]]
rotations xs = take (length xs) (iterate (\(y:ys) -> ys ++ [y]) xs) 
```

# php - PHP file_get_contents() 非常慢

> ID：11870538
> 
> 赞同：0
> 
> 时间：2012-08-08T18:08:44.377
> 
> 标签：php, facebook-graph-api, file-get-contents

我一直在研究某个代码一段时间。我注意到代码的执行时间大约是 10-13 秒——这非常慢。

因此，我决定找出哪个函数使执行时间如此缓慢，并且我发现唯一`file_get_contents($url)`的函数运行时间为 9 秒。这`$url`是 Facebook 图形 API 数据。

Stackoverflow 上另一条消息中的建议建议使用

```
$context = stream_context_create(array('http' => array('header'=>'Connection: close')));
$content = file_get_contents($dataUrl,false,$context); 
```

我也试过这个，它根本没有改善运行时间。有没有办法提取不会持续这么长时间的数据？

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:14:18.370

You could try to use [CURL](http://us2.php.net/manual/en/book.curl.php). Also, If you are starting many connections in a loop, CURL can start them all at once. Otherwise, it shouldn't take that long.

# jquery - 将div的高度动画到其原始高度

> ID：11870539
> 
> 赞同：0
> 
> 时间：2012-08-08T18:08:45.407
> 
> 标签：jquery, html, css

我遇到了一个网站[https://nationalskillsregistry.com/pos-details-register.htm](https://nationalskillsregistry.com/pos-details-register.htm)，当我点击链接（例如艾哈迈达巴德）时，我找到了平滑的高度动画。我想这不是`slideUp()`jquery 的功能。我搜索了许多网站，但没有找到一种方法将块的高度设置为`0px`然后返回到其原始高度。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:12:17.573

你检查过 jQuery UI 中的手风琴吗？

由于您一次需要打开多个手风琴，请尝试此操作

**演示：http: [//jsfiddle.net/apSsR/8/](http://jsfiddle.net/apSsR/8/)**

如果那没有帮助

[正在寻找类似于 Accordian 的 JQuery 插件，但允许同时打开多个部分](https://stackoverflow.com/questions/1628006/looking-for-a-jquery-plug-in-similar-to-accordian-but-that-allows-multiple-sect)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:17:14.663

该网站似乎使用 jQuery [`animate()`](http://api.jquery.com/animate/)，尽管是以一种迂回的方式。

从页面来源：

```
<a href="javascript:animatedcollapse.toggle('ahmedabad')">Ahmedabad</a> 
```

如果您选中`animatedcollapse.js`，您将看到该`toggle()`功能：

```
toggle:function(divid){ //public method
    if (typeof divid=="object")
        divid=divid[0]
    this.showhide(divid, "toggle")
} 
```

该`toggle()`函数使用`showhide()`：

```
showhide:function(divid, action){
    var $divref=this.divholders[divid].$divref //reference collapsible DIV
    if (this.divholders[divid] && $divref.length==1){ //if DIV exists
        var targetgroup=this.divgroups[$divref.attr('groupname')] //find out which group DIV belongs to (if any)
        if ($divref.attr('groupname') && targetgroup.count>1 && (action=="show" || action=="toggle" && $divref.css('display')=='none')){ //If current DIV belongs to a group
            if (targetgroup.lastactivedivid && targetgroup.lastactivedivid!=divid) //if last active DIV is set
                this.slideengine(targetgroup.lastactivedivid, 'hide') //hide last active DIV within group first
                this.slideengine(divid, 'show')
            targetgroup.lastactivedivid=divid //remember last active DIV
        }
        else{
            this.slideengine(divid, action)
        }
    }
} 
```

`showhide()`反过来使用`slideengine()`：

```
slideengine:function(divid, action){
    var $divref=this.divholders[divid].$divref
    if (this.divholders[divid] && $divref.length==1){ //if this DIV exists
        var animateSetting={height: action}
        if ($divref.attr('fade'))
            animateSetting.opacity=action
        $divref.animate(animateSetting, $divref.attr('speed')? parseInt($divref.attr('speed')) : 500)
        return false
    }
} 
```

我们可以从以下行中看到`$divref`from`slideengine()`实际上是一个 jQuery 对象`init()`：

```
this.$divref=$('#'+this.id) 
```

因此，我们可以得出该网站使用 jQuery 的结论`animate()`：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

通常要找出到底发生了什么并不容易，因为网站不倾向于提供其代码的非缩小和注释版本......

注意：如果我不应该发布上面的代码，那么请告诉我。

**编辑：**

正如其他人所提到的，您可以使用 jQuery UI 的[`accordion`](http://jqueryui.com/demos/accordion/). 另一种选择是使用 jQuery 的[`slideToggle()`](http://api.jquery.com/slideToggle/).

# sql - 从字符串中修剪整数

> ID：11870540
> 
> 赞同：3
> 
> 时间：2012-08-08T18:08:48.650
> 
> 标签：sql, regex, oracle, plsql, trim

有一个`Trim`函数可以修剪特定字符，但我想知道它是否可以修剪整数。

我有一个字符串列表：

```
'ABC01'
'ABCD02'
'AB5123' 
```

长度和数量不规则。运行 SQL 命令后，我想得到这个：

```
'ABC'
'ABCD'
'AB' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:31:04.117

我会使用[翻译功能](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions216.htm#i1501659)。与更简单的文本处理函数相比，Oracle 中的 REGEXP 函数往往会占用 CPU。

```
select translate(string, 'A1234567890', 'A')
from t; 
```

第二个参数开头的“A”，与最后一个参数匹配的 A 将“A”转换为“A”，什么都不做，但在第三个参数字符串中没有任何内容，ORACLE 将返回 null。

**编辑** *简单的测试用例*

```
SQL> create table t (string varchar2(100));
Table created.
SQL> insert into t values ('ABC01');
1 row created.
SQL> insert into t values ('ABCD02');
1 row created.
SQL> insert into t values ('AB5123');
1 row created.
SQL> insert into t values ('ABCDEFGHIJKLMNOPQRSTUVWXYZ'
  2      || 'abcdefghijklmnopqrstuvwxyz1234567890');
1 row created.
SQL> insert into t values ('123AB456');
1 row created.
SQL> insert into t values ('!Whatever!1');
1 row created.
SQL> commit;
Commit complete.

SQL> select translate(string, 'A1234567890', 'A')
  2  from t;

TRANSLATE(STRING,'A1234567890','A')
---------------------------------------------------
ABC
ABCD
AB
ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
AB
!Whatever!

6 rows selected. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:21:01.157

```
select REGEXP_REPLACE(YourColumn, '[0-9]+', '') from YourTable 
```

看看这个 SQLFiddle：[http ://sqlfiddle.com/#!4/b8a83/1](http://sqlfiddle.com/#!4/b8a83/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:17:34.870

您可以使用函数 REGEX_REPLACE：

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T18:19:26.550

```
SELECT regexp_replace( <<column name>>, '[[:digit:]]', null )
  FROM <<table name>> 
```

将从字符串中删除所有数字。

# mysql - 将西里尔文值插入 MySQL db 值时，它们似乎是“?????”

> ID：11870543
> 
> 赞同：1
> 
> 时间：2012-08-08T18:08:57.433
> 
> 标签：mysql, ado.net, character-encoding

我正在使用 ado.net 和 MySQL 数据库。当我将西里尔字母值插入 db 时，它们将插入为“？” 符号。我在db中尝试了各种编码，这没有帮助。我尝试了 utf-8、utf-16、cp-1251 和许多其他的。所以当我执行这段代码时

```
 MySql.Data.MySqlClient.MySqlConnection con = new MySql.Data.MySqlClient.MySqlConnection("server=localhost;User Id=root;database=voteme");
        MySql.Data.MySqlClient.MySqlCommand cmd = new MySql.Data.MySqlClient.MySqlCommand("INSERT INTO districts(DistrictName) VALUES('іавп')",con);
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close(); 
```

我收到 '？？？？' 存储在我的数据库中。我该如何解决这个问题？谢谢。

编辑：我尝试在数据库中同时使用 varchar 和 text 字段类型：结果仍然相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:12:00.553

1.  请务必使用 UTF8 作为数据库排序规则。

2.  打开连接后立即尝试：

    > con.ConnectionString = "database=DATABASE;server=localhost;user id=USERNAME;pwd=PASSWORD;CharSet=utf8"; 创建连接后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:18:01.247

根据[这篇文章](https://stackoverflow.com/a/5419296/924071)，您可能需要这样做：

```
ALTER TABLE tablename CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

# iphone - 一个 uiview 在与另一个交互时停止工作

> ID：11870544
> 
> 赞同：0
> 
> 时间：2012-08-08T18:08:57.307
> 
> 标签：iphone, ios, uiview, uiviewcontroller

在同一个 UIViewController 上，NSTimer 每 0.01 秒更新一个 UILabel。在同一个控制器中，有一个 UIView 包含来自另一个 .nib 的 TableController。

当我滚动表格时，UILabel 停止更新，直到滚动完成。有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:56:25.763

您应该使用“NSRunLoopCommonModes”或“UITrackingRunLoopMode”模式注册您的计时器。

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timer) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];

- (void)timer
{
    label.text = @"different text";
} 
```

并阅读[NSRunLoop 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRunLoop/addTimer%3aforMode%3a)、[线程编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html#//apple_ref/doc/uid/10000057i)和[并发编程指南](https://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T18:11:44.437

将标签更新代码放在线程中。它应该可以解决您的问题。

# sql - SQL Server - 搜索时是否有一种简单的方法可以忽略引号？

> ID：11870555
> 
> 赞同：6
> 
> 时间：2012-08-08T18:10:00.037
> 
> 标签：sql, sql-server

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:45:16.843

使用全文索引而不是 LIKE。

创建全文索引：

[http://msdn.microsoft.com/en-us/library/ms187317.aspx](http://msdn.microsoft.com/en-us/library/ms187317.aspx)

```
CREATE UNIQUE INDEX ix1 ON tbl_MyTable(YourKey); //unique index required
CREATE FULLTEXT CATALOG ft AS DEFAULT; // ft is your freetext catalog name
CREATE FULLTEXT INDEX ON tbl_MyTable(Name) 
   KEY INDEX ix1
   WITH STOPLIST = SYSTEM; // this is your index and allows you to run the command below 
```

然后使用它来运行您的查询：

```
SELECT Name 
FROM tbl_MyTable 
WHERE FREETEXT(Name, 'dont'); 
```

对于这种事情，这是最快的技术。如果您使用第三方自由文本引擎，您可以获得更快的速度，但可能没有必要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:27:00.683

我建议创建一个用户定义的函数来巩固这个逻辑：

```
CREATE FUNCTION [dbo].[udf_StripQuotes]
(
    @String VARCHAR(MAX)
)  
RETURNS VARCHAR(MAX)
AS  
BEGIN 
    RETURN Replace(
        Replace(
            Replace(
                Replace(
                    Replace(
                        Replace(@String,'“',''),
                    '‘',''),
                '''',''),
            '"',''),
        '’',''),
    '”','')
END
GO 
```

然后看起来像：

```
select Name 
from tbl_MyTable
where dbo.udf_StripQuotes(name) like '% dont%'; 
```

就效率而言，语句`%`中的前导和尾随`like`将阻止您使用任何索引，这将导致全表扫描......这可能是此查询的最大性能损失。

但是，正如 Aaron 所阐明的那样，由于调用 UDF 的开销，此实现将比原始实现慢。

如果您可以避免使用前导通配符，那么[带有索引的计算列](http://msdn.microsoft.com/en-us/library/ms189292.aspx)可能会提高性能。

否则，我认为您唯一的其他选择是实施[Full-Text Search](http://msdn.microsoft.com/en-us/library/ms142571.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:43:06.993

这不是问题的答案，但很难作为评论来实施。

如果您打算使用 UDF 来简化查询本身，请帮自己一个忙，并将函数调用限制为您拥有的行数，而不是加倍。代替：

```
 where dbo.udf_StripQuotes(name) like 'dont%' 
  or dbo.udf_StripQuotes(name) like '% dont%' ); 
```

做这个：

```
 where ' ' +  dbo.udf_StripQuotes(name) like '% dont%'; 
```

就根本问题而言，我同意 Michael 的观点，即索引计算列可能是最好的，但如果 name 列超过 900 个字节，这将是不可能的（并且这不会神奇地将扫描转换为搜索，因为通配符，它​​只是消除了调用函数或在查询中执行所有这些替换调用的需要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:47:07.133

空间效率还是时间效率？

您的第一个解决方案是节省空间的，但由于每次执行查询时将多个字符串函数应用于表中的每一行，因此可能效率低下。

生成列的解决方案空间效率低，但由于应用字符串操作一次（当您添加列然后在插入/更新时），可能会节省时间。

从您的用户的角度来看，最好的解决方案可能是在生成的列上执行搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T17:50:09.080

尝试以下操作以返回所有名称，不带任何引号或双引号。这将避免 LIKE 语句的必要性，避免另一列的必要性，并加快您的查询：

```
SELECT Replace(
    Replace(
        Replace(
            Replace(
                Replace(
                    Replace( Name, '“', ''),
                '‘', ''),
            '''',''),
        '"', ''),
     '’',''),
'”', '') AS Name 
FROM tbl_MyTable 
```

# c# - 试图让 Unity 从配置文件中设置属性

> ID：11870556
> 
> 赞同：1
> 
> 时间：2012-08-08T18:10:02.970
> 
> 标签：c#, configuration, properties, unity-container

我已经启动并运行了 Unity，但我正试图找出最后一件事，让它像我们正在努力替换的内部开发的 DI 引擎一样工作。

一旦我从一个配置文件中实例化了对象并设置了一些属性，我如何让它从位于根目录下几个级别的文件夹中的 XML 文件中填充对象中的一大堆属性/字段?

如果您能指出我在这方面的一些操作方法的方向，我将不胜感激。

这是与旧系统一起使用的文件之一：

```
<?xml version="1.0" encoding="utf-8" ?>
<component xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="http://mamc-sharepoint.army.mil/sites/Informatics/mamcDev/Schemas/MAMC.EnterpriseLibrary/DIComponent_v1.0.0.1.xsd">
  <type name="MAB.Test.Framework.WebTest.WebTestSettings"
        assembly="${Assemblies[MAB.Test.Framework]}"/>
  <properties>
    <!--Some semi active settings. Intended to be used to keep the browser running between test methods.-->
    <add name="StartServerIfNotRunning">true</add>
    <add name="StopServerIfRunning">true</add>
    <add name="ServerLeaveRunning">false</add>

    <!--Instructions on which browser to use for the testing.-->
    <!--iexplorer, firefox, htmlunit-->
    <add name="BrowserString">firefox</add>

    <!--
    BrowserURL is the base URL for the application under test.  
    Remember to include the forward slash at the end of the URL.
    -->
    <add name="BrowserURL">https://www.google.com/</add>

    <!--The default amount of timeout we're going to use for waiting for actions to happen.-->
    <add name="BaseTimeout">4000</add>
    <!--A modifier that slows down or speeds up the playback depending on the environments behavior.-->
    <add name="TimeoutMultiplier">1</add>
  </properties>

</component> 
```

谢谢，

马克 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:31:22.743

这对于一个简单的评论来说太过分了：

您上面显示的 XML 文件中的设置应该初始化什么样的对象？

这看起来像环境设置，而不是像`User`.

这些设置是否仅适用于测试环境？或者也适用于生产环境？[Visual Studio 支持不同的调试和发布配置文件](http://msdn.microsoft.com/en-us/library/wx0123s5.aspx)。甚至可以[为不同的构建配置转换 web.config 文件](http://msdn.microsoft.com/en-us/vs2010trainingcourse_webdevelopment_topic4.aspx)。

最后：[这是一个关于如何](http://svenerikmatzen.wordpress.com/2010/09/17/simpler-configuration-sections/)从配置文件中读取设置而无需编写自定义部分处理程序的示例。

# r - R中的rep函数

> ID：11870564
> 
> 赞同：6
> 
> 时间：2012-08-08T18:10:43.440
> 
> 标签：r, rep

当我执行：

```
rep(1:4, rep(4,4)) 
```

我明白了

```
1 1 1 1 2 2 2 2 3 3 3 3 4 4 4 4 
```

这是预期的。但是当我尝试将长度固定为 16（这是输出的长度）时，如下所示：

```
rep(1:4, rep(4,4), length.out = 16) 
```

我明白了

```
1 2 3 4 1 2 3 4 1 2 3 4 1 2 3 4 
```

这很奇怪。我认为这两个命令都应该执行相同的功能。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T18:15:56.977

从`?rep`

> 'length.out' 可以代替'times'，在这种情况下，'x' 被重复多次以创建这个长度的向量。如果两者都给出，'length.out' 优先，'times' 被忽略。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-05-09T02:13:50.640

`rep(1:4,,rep(4,4),length.out=16)`将给出您正在寻找的结果。更简单的写法是`rep(1:4,,16,4)`.

# akamai - esi:include 或 esi:eval 语句的结果可以存储在 esi 变量中吗？

> ID：11870566
> 
> 赞同：4
> 
> 时间：2012-08-08T18:10:52.143
> 
> 标签：akamai, esi, edge-side-includes

我想将 ESI 包含或评估块的结果存储在 ESI 变量中。包含的内容不在我的控制范围内。它的格式是 JSON。我尝试了以下所有方法均无济于事。该变量以空字符串结束。

```
<esi:assign name="variable_name">
'<esi:include src="$(url)" method="post" entity="$(param)" />'
</esi:assign>
<esi:assign name="variable_name">
'<esi:eval src="$(url)" method="post" entity="$(param)" />'
</esi:assign>

<esi:assign name="variable_name">
'''<esi:include src="$(url)" method="post" entity="$(param)" />'''
</esi:assign>
<esi:assign name="variable_name">
'''<esi:eval src="$(url)" method="post" entity="$(param)" />'''
</esi:assign> 
```

我正在测试的 ESI 服务器是 Akamai 的 ETS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:32:08.717

这是 Akamai 支持团队提供的解决方案。相当复杂，但效果很好。

* * *

文件：json.txt

```
{ "a" : 1, "b" : 2 } 
```

* * *

文件：frag.esi

```
<esi:text><esi:assign name="val">'''</esi:text><esi:include
src="json.txt"/><esi:text>'''</esi:assign></esi:text> 
```

* * *

文件：container.esi

```
<esi:eval src="frag.esi" dca="esi" />

<esi:vars>
val = $(val)
</esi:vars> 
```

# android - 在数据库的列表视图中显示图标

> ID：11870571
> 
> 赞同：0
> 
> 时间：2012-08-08T18:11:14.080
> 
> 标签：android, database, image, listview

我有一个列表视图，显示来自我的数据库的不同数据。这很完美。但是我的列表中只能有 3 个项目，因为我在加载完整图像后内存不足。这是我现在正在工作的代码，但是当列表中超过三个列表项时，内存不足。

```
 String[] from = new String[] { "NAME", "DATE", "WEIGHT", "IMAGE_PATH"};      
  int[] to = new int[] { R.id.name, R.id.date, R.id.weight, R.id.list_image};
  contactAdapter = new SimpleCursorAdapter(
     Mylistview.this, R.layout.list_row, null, from, to);
  setListAdapter(contactAdapter); 
```

我想要做的是将图像缩小到 72x72，然后再将它们加载到列表中。下面是一个没有按我想要的方式工作的代码，但它让你知道我想要什么:)

```
 list_image = (ImageView) findViewById(R.id.list_image);

  String[] from = new String[] { "NAME", "DATE", "WEIGHT", "IMAGE_PATH"};      
  int[] to = new int[] { R.id.name, R.id.date, R.id.weight};
  contactAdapter = new SimpleCursorAdapter(
     Mylistview.this, R.layout.list_row, null, from, to);
  setListAdapter(contactAdapter); 

 String icon = "IMAGE_PATH"

  Bitmap bmp = BitmapFactory.decodeStream(icon);        
  Bitmap bm = Bitmap.createScaledBitmap(bmp, 72, 72, false);
  list_image.setImageBitmap(bm); 
```

我希望字符串图标从字符串数组中的数据库加载的“IMAGE_PATH”获取图像路径。

有没有办法做到这一点，还是我需要找到其他方法来用图像和小图标填充我的列表视图？也许当我拍照时，我应该将图像保存在两个地方。一张真实的图片和一个图标，并将图标路径放入数据库？

谢谢你

这是执行 Vishva Patel 帮助后的代码和错误代码。

```
 BitmapScaler scaler = null;
try {
    scaler = new BitmapScaler(new File("IMAGE_PATH"), 72);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
  list_image.setImageBitmap(scaler.getScaled()); 
```

* * *

```
 08-08 22:23:15.973: E/AndroidRuntime(2947): FATAL EXCEPTION: main
 08-08 22:23:15.973: E/AndroidRuntime(2947): java.lang.RuntimeException: Unable to  start activity   ComponentInfo{se.xflash.myapp/se.xflash.myapp.myapp}:     java.lang.RuntimeException: Unable to start activity  ComponentInfo{se.xflash.myapp/se.xflash.myapp.MyNames}:    java.lang.NullPointerException
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.os.Handler.dispatchMessage(Handler.java:99)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.os.Looper.loop(Looper.java:137)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.ActivityThread.main(ActivityThread.java:4507)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at java.lang.reflect.Method.invokeNative(Native Method)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at java.lang.reflect.Method.invoke(Method.java:511)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at dalvik.system.NativeStart.main(Native Method)
 08-08 22:23:15.973: E/AndroidRuntime(2947): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{se.xflash.myapp/se.xflash.myapp.MyNames}: java.lang.NullPointerException
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1809)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.widget.TabHost.setCurrentTab(TabHost.java:346)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.widget.TabHost.addTab(TabHost.java:236)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at se.xflash.myapp.myapp.onCreate(myapp.java:45)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.Activity.performCreate(Activity.java:4465)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at      android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    ... 11 more
 08-08 22:23:15.973: E/AndroidRuntime(2947): Caused by: java.lang.NullPointerException
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at se.xflash.myapp.BitmapScaler.<init>(BitmapScaler.java:42)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at se.xflash.myapp.MyNames.onCreate(MyNames.java:56)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.Activity.performCreate(Activity.java:4465)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
 08-08 22:23:15.973: E/AndroidRuntime(2947):    ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:45:05.433

[1.) 最简单的解决方案是使用这篇博文 BitmapScaler.java 中提到的类： http](http://zerocredibility.wordpress.com/2011/01/27/android-bitmap-scaling/) ://zerocredibility.wordpress.com/2011/01/27/android-bitmap-scaling/ ，它运行良好并解决了问题内存异常问题。您所要做的就是提供将图像保存为构造函数的参数的文件以及所需的缩放宽度（在您的情况下为 72）。这是您在特定情况下必须使用的代码：

```
BitmapScaler scaler = new BitmapScaler(new File("IMAGE_PATH"), 72);
list_image.setImageBitmap(scaler.getScaled()); 
```

2.) 是的，其中一种解决方案是在拍照时缩放位图并将其与原始图像一起保存为 icon-yourimagename.jpg（如果您需要拍摄的原始尺寸图像）

3.) 将 bm 分配给 list_image 后使用 bm.recycle() 以确保位图被垃圾收集并释放一些内存。这可能会修复内存错误。

# image - 如何使用低分辨率的裁剪照片作为重新裁剪原件的更高分辨率副本的指南？

> ID：11870576
> 
> 赞同：5
> 
> 时间：2012-08-08T18:11:39.303
> 
> 标签：image, node.js, image-processing, imagemagick

我有一张方形的低分辨率照片，它是（由用户）从高分辨率、非方形的原始照片中裁剪出来的。然后将低分辨率照片向下调整为缩略图。我想自动（无需用户干预）以相同的方式重新裁剪原始照片，以获得方形版本的更高分辨率副本。我**无权**访问原始的裁剪器坐标。我只有这两张照片。

以下是一些示例图片（来自我的 Facebook 个人资料）来说明我的意思：

[原始的高分辨率照片](https://sphotos-b.xx.fbcdn.net/hphotos-prn1/58640_601472936324_6399908_n.jpg)-[裁剪，然后缩小，方形照片](http://profile.ak.fbcdn.net/hprofile-ak-snc4/41653_7304838_9249_q.jpg)

同样，我们的目标是使用小照片作为指南，从源头获得分辨率更高的方形照片。

解决方案的唯一限制是：

1.  一般性：我将它用于个人资料图片，所以如果它只适用于完全可以接受的面部！无需推广到各种随机图像，人物图片是一个很好的起点。
2.  平台：我使用的是 Node，但我很乐意在 Ruby、Python、Java 或 C++（使用 Node 绑定）中运行这个过程。它几乎肯定会在 Heroku 或 AWS 上运行。
3.  速度：它需要非常快。为了使它有用，它必须以在线方式运行，因为我会阻止用户界面等待此操作。

有没有人有任何想法？我对图像处理了解不多，所以我真的不知道从哪里开始。

编辑：对于 Facebook，具体来说，有一个几乎没有那么难的解决方案。原始作物数据可用于个人资料图片：[https ://graph.facebook.com/bcherry/profile?fields=pic_crop](https://graph.facebook.com/bcherry/profile?fields=pic_crop)

这将使我克服眼前的障碍，但可能不是一个长期的解决方案，因此下面提供的答案对于更普遍的问题仍然很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:40:25.900

虽然我不会评论我的解决方案的 Javascript 特性 - 您基本上是在尝试在原始图像和裁剪、调整大小的图像之间执行[图像配准。](http://en.wikipedia.org/wiki/Image_registration)

有[很多](http://library.utia.cas.cz/prace/20030125.pdf)不同的方法可以做这样的事情——为了你的特定目的，我将从类似[相位相关](http://en.wikipedia.org/wiki/Phase_correlation)的方法开始。

编辑：我刚刚使用 ImageMagick 找到了一个很好的脚本，它完全符合您的需要。[NormCrossCorr](http://www.fmwconcepts.com/imagemagick/normcrosscorr/index.php) “计算归一化的互相关曲面，以找到小图像在大图像中最匹配的位置。”

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:27:44.283

为此，您需要的不仅仅是 javascript。我会用python研究图像处理。可能有用的链接：

[scikits-图像](http://scikits-image.org/)

[太平船务](http://www.pythonware.com/products/pil/)

[图像比较算法](https://stackoverflow.com/questions/1819124/image-comparison-algorithm)

[机器学习](http://scikit-learn.org/stable/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T19:32:56.260

缩小尺寸是通过平均像素还是最近像素来完成的，这可能很重要。如果缩小是通过最近的像素完成的，您可以查找像素值匹配，以将原始图像中的像素与缩小/裁剪图像中的像素对应。除非图像以某种无损格式存储，否则您必须使匹配非常模糊，但如果您可以识别可能的匹配，则裁剪的比例和位置立即可用。

如果缩放中有一些平均，或者图像压缩损失太大，您可能会通过对两个图像进行高斯模糊并尝试基于模糊图像的局部特征（例如局部最小值的 x、y 或原色的最大值。同样，匹配必须是模糊的。

# cakephp - 将html输出缩小到一行

> ID：11870580
> 
> 赞同：2
> 
> 时间：2012-08-08T18:11:45.183
> 
> 标签：cakephp, minify

只需看看[Ask.com](http://www.ask.com)主页源。这是一条很长的线。

如何从最终的 html 输出中删除换行符和其他不必要的代码？（`Views`内容）

例如：

```
<div id="test">
    <span>Hello World!</span>
</div> 
```

至：

```
<div id="test"><span>Hello World!</span></div> 
```

GZip可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T05:11:00.857

I haven't had time to implement this myself yet however this helper looks good.

[https://github.com/plyst/cakephp-minifyhtml-plugin](https://github.com/plyst/cakephp-minifyhtml-plugin)

You can also use the following to minify the rest of your assets

[https://github.com/markstory/asset_compress/](https://github.com/markstory/asset_compress/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:46:32.957

您可以在这篇面包店文章中使用助手：http: [//bakery.cakephp.org/articles/tiutalk/2010/07/09/output-valid-and-clean-x-html-with-tidyhelper](http://bakery.cakephp.org/articles/tiutalk/2010/07/09/output-valid-and-clean-x-html-with-tidyhelper)

要将所有内容集中在一条线上，您可以替换

```
return $output; 
```

和

```
return preg_replace('/\r?\n/m', '', $output); 
```

# scala - Scala 隐式转换 + 参数连同 Play2 控制器/视图

> ID：11870581
> 
> 赞同：1
> 
> 时间：2012-08-08T18:11:49.303
> 
> 标签：scala, playframework, implicit-conversion, implicit

我有以下 play2 代码：

```
 implicit def contextToRequest(rc: RequestContext[_]) = rc.request
  implicit def contextToFlash(rc: RequestContext[_]) = rc.request.flash
  implicit def contextToSession(rc: RequestContext[_]) = rc.request.session

  def login: Action[AnyContent] = PublicAction { implicit rc =>
    Ok(html.login(loginForm))
  } 
```

`RequestContext`是我自己的 Play2 自定义类包装器`Request`。

我的 scala 视图开始于：

```
@(form: Form[(String,String,Boolean)])(implicit flash: Flash, session: Session,rc: utils.RequestContext[_]) 
```

但是编译器说：

> 找不到参数 flash 的隐式值：play.api.mvc.Flash

有人可以向我解释为什么它不起作用吗？也许我们不能对隐式参数使用隐式转换？

那么有人可以向我解释为什么已经存在从 Play2 请求到 Session/Flash 的隐式转换，而当我这样做时它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:53:33.903

当您最终拥有多个隐式参数（其中一些是其他参数的成员属性）时，您的设计就有问题。

```
class B
class C

class A {
  val b:B = _
  val c:C = _ 

}

def myMethod(someData:String)(implicit a:A, b:B, c:C) {

} 
```

实际上，您希望在方法中包含该 A 的 B 和 C 成员。但是，通过这样的签名，可以提供与该 A 无关的给定 A 和 B 和 C。正确的签名如下

```
 def myMethod(someData:String)(implicit a:A) {
    // trick to import members variable
    import a._
    println(b)
    println(c)
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:51:46.000

嗯，它似乎适用于：

```
implicit def contextToRequest(implicit rc: RequestContext[_]) = rc.request 
```

而且我不需要其他两种方法，因为会有歧义，因为 Play2 已经提供了 Request 到 Flash/Session 的隐式转换

# c# - Linq to Entities 查询无法执行

> ID：11870592
> 
> 赞同：3
> 
> 时间：2012-08-08T18:12:32.130
> 
> 标签：c#, entity-framework, mvvm, linq-to-entities, devforce

我正在尝试创建一个包含来自 3 个不同实体的信息的查询对象。当查询执行时，它告诉我 EntityServerException 未处理。我正在使用 DTO 来提取特定的列。这是我的基本 DTO：

```
public class LeadRestrictionsDto : BasicModelBase
{
    private Guid _userId;
    private Guid _leadId;
    private string _restrictionDescription;
    private DateTime? _modified;

    [Key]
    public Guid UserId
    {
        get { return _userId; }
        set { SetValueAndNotify(() => UserId, ref _userId, value); }
    }

    public Guid LeadId
    {
        get { return _leadId; }
        set { SetValueAndNotify(() => LeadId, ref _leadId, value); }
    }

    public string RestrictionDescription
    {
        get { return _restrictionDescription; }
        set { SetValueAndNotify(() => RestrictionDescription, ref _restrictionDescription, value); }
    }

    public DateTime? Modified
    {
        get { return _modified; }
        set { SetValueAndNotify(() => Modified, ref _modified, value); }
    }
} 
```

这是我正在尝试编写的接受参数类型的 guid 的查询：

```
 public List<LeadRestrictionsDto> GetLeadRestrictionListingNow(Guid id)
  {

      IEnumerable<LeadRestrictionsDto> restrictions = from user in Manager.Users
                         join lead in Manager.Leads on user.UserId equals lead.OriginalOwnerId
                         join restriction in Manager.UserRestrictionListings on user.UserId equals restriction.UserId
                         where user.UserId == id
                         select new LeadRestrictionsDto
                                    {
                                        Modified = restriction.Modified,
                                        RestrictionDescription = restriction.Description,
                                        UserId = user.UserId,
                                        LeadId = lead.LeadId
                                    };

      List<LeadRestrictionsDto> userRestiction = restrictions.ToList(); //Exception occurs here
      return userRestiction;
  } 
```

这是我得到的确切例外：

```
Unable to locate type: System.Linq.IQueryable`1[[Prime.Library.Repository.LeadRestrictionsDto, Prime.Library, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\. Check that the assembly holding this type is available in the bin/exe folder. Also check that both your assemblies and DevForce assemblies have the expected version number on both client and server. 
```

似乎它试图在我的 model.edmx 中找到我的 Dto？对不起，如果这听起来很无知。有谁知道我为什么会遇到这个异常？我在 LINQPad 中使用过这个查询，它可以毫无问题地拉回数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:30:34.000

我想这与我们的服务器没有更新有关，但我能够通过返回一个匿名类型来解决它，如下所示：

```
 public List<LeadRestrictionsDto> GetLeadRestrictionListingNow(Guid id)
  {

      var restrictions = from user in Manager.Users
                         join lead in Manager.Leads on user.UserId equals lead.OriginalOwnerId
                         join restriction in Manager.UserRestrictionListings on user.UserId equals restriction.UserId
                         where user.UserId == id && (restriction.RestrictionId == 100 || restriction.RestrictionId == 200) && restriction.Active == true
                         select new 
                                    {
                                        Modified = restriction.Modified,
                                        RestrictionDescription = restriction.Description,
                                        UserId = user.UserId,
                                        LeadId = lead.LeadId,
                                        FirstName = lead.FirstName,
                                        Created = lead.Created,
                                        LastName = lead.LastName

                                    };

      return restrictions.ToList().Select(x=>new LeadRestrictionsDto()
                                        {
                                            Modified = x.Modified,
                                            RestrictionDescription =  x.RestrictionDescription,
                                            UserId = x.UserId,
                                            LeadId = x.LeadId,
                                            FirstName = x.FirstName,
                                            Created = x.Created,
                                            LastName = x.LastName
                                        }).ToList();

  } 
```

# jsf - JSFpage 导航失败：找不到支持 bean 方法

> ID：11870596
> 
> 赞同：0
> 
> 时间：2012-08-08T18:12:49.350
> 
> 标签：jsf, navigation, facelets

我有以下设置：

*   *testBean.java*带有一个方法`public String getResult()`，它返回`"success"`

*   *test.xhtml*与

    ```
    <h:commandLink action="#{testBean.result}" value="testlink" /> 
    ```

*   *faces-config.xml*中的以下导航规则：

    ```
    <navigation-rule>
    <from-view-id>/views/test.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>success</from-outcome>
        <to-view-id>/views/nextpage.xhtml</to-view-id>
        <redirect />
    </navigation-case> 
    ```

我通过简单地将“成功”直接放入操作属性（作品）来检查导航是否正常工作。`testBean.result`此外，作为 outputText打印正确显示“成功”。

但是，当单击该链接时，我得到一个“服务器内部错误”，并且只允许重新加载页面。日志显示带有以下文本的 javax.el.MethodNotFoundException：

`Method not found: com.company.project.view.TestBean@81de8.result()`

我对神秘的@81de8 的来源感到困惑。这是问题的原因，只是其他地方不匹配的症状还是一些完全正常的幕后魔法？谁能弄清楚为什么 commandLink 中的调用失败，而在 outputText 中却没有？或者指出我应该检查和测试的其他事情？

在此先感谢，路易丝

*编辑：Java 方法名为 getResult（不是结果），错误代码指向方法结果（不是字符串）。这些是写问题时的错误，是在漫长的一天工作结束时提出的；）对不起。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:52:10.943

您没有运行您认为正在运行的代码。

你说你已经声明了一个

```
action="#{testBean.result}" 
```

但例外是告诉你*实际*运行的代码有一个

```
action="#{testBean.string}" 
```

也许这是您之前尝试的剩余部分，或者您打开了错误的页面？验证、清理、重建和重新部署，这个问题应该会消失。

* * *

> *我对神秘的@81de8 来自哪里感到困惑*

它只是类实例的哈希码。另请参阅[`Object#toString()`javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)。当你这样做时，你会看到相同的字符串格式

```
System.out.println(new TestBean()); 
```

# php - plugin component list cakephp

> ID：11870597
> 
> 赞同：0
> 
> 时间：2012-08-08T18:12:49.507
> 
> 标签：php, cakephp, cakephp-1.3

this is probably very easy to do, but I can't seem to figure it out. How do I get the list of **components** of a **plugin** in a cakePHP application (I just want the components' class names).

Thanks for any help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:18:15.257

我认为在 1.3 中这应该有效：

```
App::objects('PluginName.Component'); 
```

但你总能得到路径：

```
$path = CakePlugin::path('PluginName'); 
```

并手动遍历组件文件夹。

# struts2 - Struts 2 is not populating HashMap

> ID：11870602
> 
> 赞同：2
> 
> 时间：2012-08-08T18:13:17.593
> 
> 标签：struts2

I'm trying to update a map using struts 2 form. Iterating over the map displays the key value pair correctly, but when I submit the form, map is not getting populated. Key is a string with characters like . and /. Here is an example:

```
Map<String, String> map = new HashMap<String, String>();
map.put("utilities.student_info.note", "note");

<s:iterator value="map" var="property" status="status">
  <s:property value="%{key}"/>
  <s:textarea name="map[%{key}]" value="%{value}" rows="5" cols="60"/>
</s:iterator> 
```

I tried using quotes like this: `name="map['%{key}']"`, but it still doesn't work. I can see from the logs that the `ParamsInterceptor` is setting the params correctly: `map[utilities.student_info.note] => [note]`. But the map is empty on the action side. If I use `name="map[%{#attr.status.index}]"`, it populates the map, but the key is an index `(map[0] => [note])` which is not right.

Any suggestions would be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T22:58:51.907

这取决于您使用的 Struts2 版本，但 2.3.8`map['utilities.student_info.note']`不是可接受的参数。尝试`map['utilities_student_info_note']`，它应该工作。密钥应仅由单词字符组成。

# oracle - Oracle ORA-30004 when using SYS_CONNECT_BY_PATH function,

> ID：11870605
> 
> 赞同：9
> 
> 时间：2012-08-08T18:13:26.357
> 
> 标签：oracle

`ORA-30004` when using `SYS_CONNECT_BY_PATH` function, cannot have seperator as part of the column

> Action: Use another seperator which does not occur in any column value, then retry.

Error on:

```
select ...
Sys_Connect_By_Path(myVariable || ':' || mySecondVariable, ' --> ') "myNewVar",
... 
```

Works:

```
select ...
Sys_Connect_By_Path(myVariable || ':' || mySecondVariable, ' -> ') "myNewVar",
... 
```

In the data we found some text like this

*   `SomeText B--More Text`
*   `SomeText A--More Text`

Since there is no `'-->'` or for that mater no '`-->`' in the data why does the first one error? The second one has a space in front and on the end.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T19:10:42.777

那是因为`--`它是分隔符的一部分，`-->`但不是`->`分隔符的一部分。

即使你的数据值有`-->`这个查询也不应该出错。如下所示。

```
SQL> select Sys_Connect_By_Path('SomeText B-->More Text' || ':' || 'SomeText A-->More Text', ' --> ') "myNewVar"
from dual
connect by  rownum<=3;

myNewVar                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
----------------------------------------------------
--> SomeText B-->More Text:SomeText A-->More Text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
--> SomeText B-->More Text:SomeText A-->More Text --> SomeText B-->More Text:SomeText A-->More Text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
--> SomeText B-->More Text:SomeText A-->More Text --> SomeText B-->More Text:SomeText A-->More Text --> SomeText B-->More Text:SomeText A-->More Text 
```

上面的分隔符是`-->`，注意空格。此空格被视为分隔符的一部分，即`chr(1)||chr(45)||chr(45)||chr(62)||chr(1)`. 这整个字符串不是您的数据或列值的一部分。

如下会出错的地方

```
SQL> select Sys_Connect_By_Path('SomeText B-->More Text' || ':' || 'SomeText A-->More Text', '-->') "myNewVar"
from dual
connect by  rownum<=3;

ORA-30004: when using SYS_CONNECT_BY_PATH function, cannot have seperator as part of column value
30004\. 00000 -  "when using SYS_CONNECT_BY_PATH function, cannot have seperator as part of column value"
*Cause:    
*Action:   Use another seperator which does not occur in any column value,
           then retry. 
```

上面的分隔符是`-->`，请注意没有空格，即`chr(45)||chr(45)||chr(62)`。这整个字符串确实是您的数据或列值的一部分，因此是错误的。

这是一个解决方案（性能未经测试）

```
select regexp_replace(Sys_Connect_By_Path('SomeText B-->More Text' || ':' || 'SomeText A-->More Text', ' -> '),' -> ','-->') "myNewVar"
from dual
connect by  rownum<=3;

myNewVar                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
--------------------------------------
-->SomeText B-->More Text:SomeText A-->More Text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
-->SomeText B-->More Text:SomeText A-->More Text-->SomeText B-->More Text:SomeText A-->More Text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
-->SomeText B-->More Text:SomeText A-->More Text-->SomeText B-->More Text:SomeText A-->More Text-->SomeText B-->More Text:SomeText A-->More Text 
```

**解释 -**这里（在上面的查询中）`->`（带空格）不是这里数据的一部分，即`-->`。一旦列通过路径连接，`regexp_replace`将替换所有出现的`->`with`-->`所以这样你仍然可以使用`-->`分隔符而不是`->`.

# java - Java two classes I need assistance with main method

> ID：11870608
> 
> 赞同：0
> 
> 时间：2012-08-08T18:13:32.113
> 
> 标签：java

in the main method what do I write in order to create a new bilagare

the format needs to be (String, String, personbil)

bilagare a = new bilagare (name, adress, AND WHAT DO I WRITE HERE TO GIVE the object one of the cars created );

```
public class bilagare 
{
        Personbil personbil;

        private String namn;
        private String adress;

    // konstruktor
        public bilagare (Personbil personbil, String namn, String adress)
            {
             this.personbil=personbil;
             this.namn= namn;
             this.adress = adress;

            }
    // returnerar namn
        public String hamtaNamn()
            {
            return namn;
            }

    // returnerar adress
        public String hamtaAdress()
            {
            return adress;
            }  

        public void saljbil()
        {

                if (personbil==null)
                {   
                System.out.println("Du har ingen bil att sälja");
                }

                else
                {
                System.out.println("Tackar och bugar för bilen");
                personbil = null;
                }
        }

            public void kopBil (String bilmodell, int hamtaarsmodell,String hamtaregnr, String bilfarg)
            {

                System.out.println("tack för ditt bilköp");
                personbil = new Personbil(bilmodell, hamtaarsmodell, hamtaregnr,bilfarg);       

            }         
          public void infoBil()
          {
            if (personbil==null)
            System.out.println("Äger ingen bil för närvarande");
            else
            personbil.SkrivutInfo();
         }

            public void infoAgare()
            {
             System.out.println("förarinfo\nNamn" + namn +"Adress,"+adress);

            }

public static void main (String [] args)
        {

        Personbil bil1 = new Personbil("Saab",90, "CCC222", "röd");
        Personbil bil2 = new Personbil("Volvo",99, "ABC988", "svart");

        bilagare a = new bilagare ();

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:16:02.967

```
Syntax Error

public void saljbil(); 
```

消除 ; 从方法定义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:14:37.193

`public void saljbil();` remove the semi-colon

It should be:

```
 `public void saljbil()` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:15:30.830

```
public void saljbil(); 
```

去掉分号

```
public void saljbil() 
```

对方法执行相同的`kopBil()`操作。

在方法签名的末尾有一个分号会解除它后面的代码块的关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T19:42:23.533

```
This is probably what you want, even though you should fix all your errors that have been suggested beforehand;

bilagare a = new bilagare (*string*, *string*, bil1);
    bilagare a = new bilagare (*string*, *string*, bil2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T18:17:00.440

只需要一些小的调整：

```
public void saljbil();
      remove ; here  ^

public void kopBil (String bilmodell, etc.);
                            remove ; here  ^ 
```

顺便说一句，`getAll()`在 Personbil 类中没有定义：

```
personbil.getAll(); 
```

# iphone - 将 NSData 替换为特定的 NSStrting 格式

> ID：11870609
> 
> 赞同：0
> 
> 时间：2012-08-08T18:13:33.827
> 
> 标签：iphone, nsstring

我收到一个包含 Hexa 值的 NSData，如下所示

```
 <aaaaaaa aaaaaab> 
```

我只是通过将 NSData 转换为 NSString 来得到这个，现在我需要以以下格式呈现上面的 String

```
AA:AA:AA:AA  AA:AA:AA:AB 
```

请帮助我如何获得上述格式，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:32:42.953

你可以试试：

```
str = @"<aaaaaaa aaaaaab>";
str = [str stringByReplacingOccurrencesOfString:@"<" withString:@""]; //Remove <
str = [str stringByReplacingOccurrencesOfString:@" " withString:@""]; //Remove space
str = [str stringByReplacingOccurrencesOfString:@">" withString:@""]; //Remove >
NSMutableString *mStr = [[NSMutableString alloc] initWithString:str];

for (int i=2; i< [mStr length]; i+=3) {
    [mStr insertString:@":" atIndex:i];
}
for (int i=11; i< [mStr length]; i+=12) {
    [mStr insertString:@" " atIndex:i];
} 
```

这将删除空格、< 和 >。然后添加 : 和空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:17:17.467

```
str = [str stringByReplacingOccurrencesOfString:@":"
                                     withString:@""];

str = [str lowercaseString]; 
```

# c# - 需要在c#中检查字符串的格式

> ID：11870610
> 
> 赞同：0
> 
> 时间：2012-08-08T18:13:35.043
> 
> 标签：c#, regex

我有一个字符串需要采用以下格式：`XX999900`. `XX`只能是字符，没有小数点，后跟 6 位数字。

所以我想通过以下方式使用正则表达式：

```
string sPattern = @"^\\[A-z]{2}\\d{6}$";
indexNumber = "ab9999.00";
if (Regex.IsMatch(indexNumber, sPattern)
{
     // do whatever
} 
```

它失败。有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:15:09.780

我不相信这`[A-z]`是一个有效的字符类。`\\`使用时您当然不需要`@`。

试试这个：

```
@"^[a-zA-Z]{2}\d{6}$" 
```

如果您需要格式有 4 个数字，`.`然后是两个数字，请尝试以下操作：

```
@"^[a-zA-Z]{2}\d{4}\.\d{2}$" 
```

（请注意，对于 .NET，`\d`将匹配*任何*`[0-9]`脚本中的数字，因此如果您只想匹配这些数字，则可能需要将其替换为）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:15:16.760

你有太多的转义字符。尝试：

```
string sPattern = @"^[a-zA-Z]{2}\d{6}$"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:16:52.243

`A-z`无效（大小写混合），并且您没有 6 个连续数字。你有 4 个，一个小数，然后还有 2 个。尝试

```
^[a-zA-Z]{2}\d{4}.\d{2}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:16:51.577

它失败了，因为您在其中测试的值是小数，而您的正则表达式模式没有。另外，您的正则表达式模式将查看整个字符串。也就是说，^ 表示从字符串的开头开始，而 $ 表示字符串的结尾。如果您只想要“以”开头，则将 $ 放在模式的末尾。

# php - SimplePie 多个 Fe ed 随机顺序

> ID：11870614
> 
> 赞同：1
> 
> 时间：2012-08-08T18:13:50.627
> 
> 标签：php, wordpress, rss, feed, simplepie

我是 SimplePie 的新手，正在查看 API，但找不到我需要的东西。我需要使用 Simple Pie 从多个提要中获取随机文章。我会更好地解释我的问题：

下面是 SimplePie 现在给我提要的方式（按时间顺序）：

*   第 1 条（美国有线电视新闻网）
*   第 2 条（美国有线电视新闻网）
*   第三条（美国有线电视新闻网）
*   第 4 条（美国有线电视新闻网）
*   第 5 条（美国有线电视新闻网）

*   第一条（雅虎）

*   第二条（雅虎）
*   第三条（雅虎）
*   第四条（雅虎）
*   第五条（雅虎）

*   第一条（谷歌）

*   第 2 条（谷歌）
*   第三条（谷歌）
*   第 4 条（谷歌）
*   第 5 条（谷歌）

这是我需要它的方式（以随机顺序）：

*   第三条（美国有线电视新闻网）
*   第一条（谷歌）
*   第五条（雅虎）
*   第三条（谷歌）
*   第 2 条（美国有线电视新闻网）
*   第四条（雅虎）
*   第 1 条（美国有线电视新闻网）
*   第三条（谷歌）
*   第三条（雅虎）

等等..

据我所知，我每次都必须制作一个单独的 SimplePie 提要才能拉出一篇独特的文章。我希望 Simple Pie 能够通过一个电话来做到这一点，但只是在它发回之前重新安排它们。有点像一个定制的度假村。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T09:13:00.883

我在这里有同样的问题：[Custom Sort Order with SimplePie](https://stackoverflow.com/questions/12127709/custom-sort-order-with-simplepie/12136636#12136636)

您需要扩展类。

```
class SimplePie_Random_Sort extends SimplePie
{
    public static function sort_items($a, $b)
    {
        return rand(-1, 1);
    }
} 
```

# cuda - 内核无故停止

> ID：11870616
> 
> 赞同：0
> 
> 时间：2012-08-08T18:13:53.820
> 
> 标签：cuda

我的第一个 CUDA 应用程序有问题。基本上它应该生成 N 个线性微分方程并使用一阶方法对它们进行数值求解。变量`t`（时间）从 0 迭代到`T`步长 = `TAU`= 0.0001。如果`T`足够小（比如 0.001），一切正常，但如果`T`== 0.1 或更大，内核似乎什么也不做。我如何检查这种情况？

`N`- 方程数，`TAU`- 时间步长，`TN`- 每个块的线程数，`T`- 结束时间

变量`r`不做任何事情。我用它来验证内核是否做了任何事情。因此，如果`T`== 0.0001，则`r`== 283，但如果`T`== 0.1，则`r`== 0。

```
#include <stdio.h>
#include <math.h>
#include <time.h>

#define N 4096
#define TAU 0.0001f
#define TN 2
#define T 0.1f
#define PI 3.141592f

__global__ void kern(float* v, float* m, float* r)
{
    *r = 283;
    __syncthreads();
    int tid = blockIdx.x*TN + threadIdx.x;

    for(float t = 0; t <= T; t += TAU)
    {
        float f = 0;
        __syncthreads();
        for(int k = 0; k < N; ++k)
            f += m[N*tid + k]*v[k];
        f *= TAU;
        f += v[tid];
        __syncthreads();
        v[tid] = f;
    }
}

int main()
{
    float* v = new float[N];
    float* m = new float[N*N];

    for(int i = 0; i < N; ++i)
        v[i] = sin(2*PI*i/N); //setting initial conditions

    for(int i = 0; i < N*N; ++i)
        m[i] = cos(2*PI*i/(N*N)); //coefficients in right hand part of the equations

    // printing some of the values (total: 8 values) to compare with result
    for(int i = 0; i < N*N; i += N*N / 8) printf("%f ", m[i]); printf("\n\n");
    for(int i = 0; i < N; i += N / 8) printf("%f ", v[i]); printf("\n");

    float* cv;
    float* cm;
    float* cr;
    cudaMalloc((void**)&cv, N*sizeof(float));
    cudaMalloc((void**)&cm, N*N*sizeof(float));
    cudaMalloc((void**)&cr, sizeof(float));

    cudaMemcpy(cv, v, N*sizeof(float), cudaMemcpyHostToDevice);
    cudaMemcpy(cm, m, N*N*sizeof(float), cudaMemcpyHostToDevice);

    dim3 blocks(N / TN);
    dim3 threads(TN);

    time_t ts = time(0);
    printf("starting kernel\n");
    kern<<<blocks, threads>>>(cv, cm, cr);
    printf("kernel stopped\n");
    time_t ts_end = time(0);

    cudaMemcpy(v, cv, N*sizeof(float), cudaMemcpyDeviceToHost);
    float r;
    cudaMemcpy(&r, cr, sizeof(float), cudaMemcpyDeviceToHost);

    for(int i = 0; i < N; i += N / 8) printf("%f ", v[i]); printf("\n");
    printf("%d\n", ts_end - ts);
    printf("result: %f\n", r);

    delete[] m;
    delete[] v;

    cudaFree(cv);
    cudaFree(cm);
    cudaFree(cr);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:16:57.687

调用 cuda api 调用时始终检查返回码。

由于某些 api 错误，您的程序很可能永远不会运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:39:49.213

“内核停止”是什么意思？您是指第 62 行的打印输出吗？

请注意，内核启动是异步的——也就是说，第 61 行不等待内核完成。您应该在内核启动后使用“cudaDeviceSynchronize”来等待内核完成。请注意，cudaMemcpy 也会在内核启动时同步。

# php - 正则表达式匹配正确的文本

> ID：11870617
> 
> 赞同：0
> 
> 时间：2012-08-08T18:14:12.070
> 
> 标签：php, regex

我在尝试从文本中提取正确值时遇到问题

我想`14.50`从以下文本中提取（这是字符串中的最后一个十进制数字）。

**细绳**

```
<span class="ob-pricedetails">Price:</span> &#036;57.71<span style="color: #666666; font-size: 12px;">(&#163;37.61)</span><br/><span style="font-size: 11px; color: #000000;">Shipping (UK):</span>&#036;14.50 
```

我一直在尝试使用以下正则表达式

**正则表达式**

```
(?<=Shipping \(UK\):<\/span>&#163;|&#036;)(.*) 
```

由于某种奇怪的原因返回以下结果

```
57.71<span style="color: #666666; font-size: 12px;">(&#163;37.61)</span><br/><span style="font-size: 11px; color: #000000;">Shipping (UK):</span>&#036;14.50 
```

我究竟做错了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:19:47.993

这会起作用：

```
preg_match('/Shipping \(UK\):<\/span>&#036;([0-9]+\.[0-9]+)/', $html, $matches); 
```

当然，您应该听取每个人建议您使用 DOM 解析器而不是正则表达式的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:24:49.047

这应该为您解决问题。

```
[0-9\.]+$ 
```

# perl - best way to break out of

> ID：11870618
> 
> 赞同：1
> 
> 时间：2012-08-08T18:14:13.567
> 
> 标签：perl, loops, stdin

I'm trying to break out of stdin on a flag of some sort but when I run my code I still have to use control d to break out. Could someone please gimme a pointer here thanks:

```
while(my $line = <STDIN>){
chomp $line;
last if $line == 0;
push @stdin, $line;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:30:44.930

**UPDATED (twice)**

I'd go with using a string compare of one type or another. `==` is a numeric compare and forces both sides of the comparison to numeric. Almost any string other than a pure number winds up being equal to 0.

```
while (my $line = <STDIN>) {
   chomp $line;

   # use the string comparison operator...
   last if $line eq "0";
   # or use a match operator...
   # last if $line =~ m/^0$/;
   # or match on some special number
   # last if $line == 3.1415926;

   push @stdin, $line;
} 
```

I tested this in windows:

`perl -e "while(my $line = <STDIN>){chomp $line;last if $line =~ m'^[.]$'}END{print @l}"`

and unix:

`perl -e 'while(my $line = <STDIN>){chomp $line;last if $line=~m/^[.]$/;push@l,$line}END{print@l,$/}'`

**OLD ANSWER**

`Ctrl` + `Z` in Windows? The flag that is already built-in. On Unix you'd use `Ctrl` + `D`.

# java - When can I use floating-point types in Java to do monetary calculations?

> ID：11870621
> 
> 赞同：4
> 
> 时间：2012-08-08T18:14:17.553
> 
> 标签：java, math, floating-point, computer-architecture

I learned I cannot use floating-point types (`float`/`double` in Java) to do money calculations (and any other calculations when I need precise results). I have to use `decimal` number types (`BigDecimal` in Java) instead.

Now I wounder when I *can* use the floating-point types. Do they provide any precision guarantee ? Suppose I would like to calculate some formula with precision `0.001`. How do I know if I can use floating-point types for this calculation or not?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T19:29:51.450

当您可以证明结果对您的应用程序可接受时，您可以在 Java 或其他语言中使用浮点类型。

使用 BigDecimal 本身并不能解决这个问题。例如，假设一个银行账户包含 87.34 美元，并且您必须添加一个月的利息，年利率为 2.37%。首先，BigDecimal 不会正确计算月利率，因为您必须将 2.37% 除以 12，而 2.37/12（或 .0237/12）不能精确地表示为十进制。其次，即使 BigDecimal 确实正确计算了月利率，并且正确计算了 87.34 美元的利息，您可能仍需要将该金额四舍五入到一定数量的美分，然后再将其添加到余额中。该舍入的规则可能在某些法律文件中指定，并且可能与 BigDecimal 进行舍入的方式不匹配。

十进制浮点和二进制浮点都能够精确计算许多结果，比您在示例中建议的 .001 精度要精确得多。当以各种方式使用时，两者都能够产生重大错误。

因此，要使用浮点，您必须了解这些类型可以表示什么值、浮点运算中会发生什么错误、您将执行什么操作以及您的应用程序需要什么。通常，可以通过精心设计操作来避免浮点错误。例如，您可以通过将金额缩放为整数值来处理货币（使用 8734 来表示 87.34 美元，而不是使用 87.34 来表示 87.34）。再举一个例子，你可以证明几个操作的累积误差小于半分，因此你可以执行这些操作并将最终结果四舍五入到最接近的分，这将是正确的，因为误差永远不够大使最终答案不正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T18:35:29.440

> 我了解到我不能使用浮点类型（Java 中的 float/double）来进行货币计算

你不能用它`double`来准确地代表超过 70 万亿美元的钱。对于小于此的值，您可以使用`double`或`long`没有错误（前提是您使用适当的舍入）

恕我直言`double`，一旦您了解了舍入的必要性，使用起来就更简单了。

然而，许多人认为它容易出错，尤其是因为您不知道谁可能需要维护代码。使用 BigDecimal 将确保您正确使用舍入，并为您提供许多关于其工作方式的选项。

许多人发现令人不安的是，即使`0.1`不是精确表示，BigDecimal 也可以显示精确表示（以及为什么您必须小心如何转换为 BigDecimal）

```
System.out.println(new BigDecimal(0.1)); 
```

印刷

```
0.1000000000000000055511151231257827021181583404541015625 
```

许多低效使用

```
new BigDecimal(Double.toString(0.1)) 
```

或类似的东西，但具有讽刺意味的是，它只与他们试图避免使用的 toString 方法一样准确。

一种更有效的方法是

```
BigDecimal.valueOf(0.1) 
```

这避免了创建字符串的需要。

支持的库`double`将正确显示此数字，但一旦您执行计算，默认轮次可能还不够。

```
System.out.println(0.1 * 3); 
```

印刷

```
0.30000000000000004 
```

在这种情况下，您必须说出您期望的精度。假设你有美元和美分可以使用

```
System.out.printf("%.2f%n", 0.1 * 3); // round output to two decimal places 
```

印刷

```
0.30 
```

* * *

找到你不能再继续添加的地方 0.01

```
for (double d = 1; d < Long.MAX_VALUE; d *= 2) {
    long l = Double.doubleToLongBits(d);
    double d1 = Double.longBitsToDouble(l + 1);
    if (d1 - d > 0.01) {
        System.out.println("Cannot represent " + d + " plus 0.01");
        double d_1 = Double.longBitsToDouble(l - 1);
        if (d - d_1 < 0.01)
            System.out.println("Can represent " + d + " minus 0.01");
        break;
    }
} 
```

印刷

```
Cannot represent 7.0368744177664E13 plus 0.01
Can represent 7.0368744177664E13 minus 0.01 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T11:06:00.423

这个视频刚刚浮出水面关于这个话题：

[http://www.youtube.com/watch?v=PZRI1IfStY0](http://www.youtube.com/watch?v=PZRI1IfStY0)

这是对浮点运算“问题”的出色且易于理解的描述。他们还提到了使用浮点数进行货币计算的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T19:01:28.840

> 假设我想计算一些精度为 0.001 的公式。我如何知道我是否可以使用浮点类型进行此计算？

浮点类型是 base-2，而不是 base-10。1/(10^n) 不能用（二进制）浮点数精确表示，就像 1/3 不能用十进制数精确表示一样。浮点数对于科学类型的计算很有用，其中值可能很大或很小，并且测量的不确定性使计算机的精度限制相形见绌。浮点运算在支持它的硬件上非常快，而其他非整数类型则没有那么快。

浮点数之所以被称为浮点数，是因为小数点两边的位数会因数字而异。浮点数本质上表示为`+/- 1.a * 2^b`where`a`并且`b`是以 2 为底的数字。这类似于基于十进制的[科学记](https://en.wikipedia.org/wiki/Scientific_notation) `1.a * 10^b`数法。[有关IEEE 754](https://en.wikipedia.org/wiki/IEEE_754)浮点的更多信息，请参阅 Wikipedia 文章。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-08T18:15:58.707

浮点类型取决于硬件，因此没有一般的精度保证。当结果不需要“完美”时，您可以使用它们。

见：[http ://en.wikipedia.org/wiki/Pentium_FDIV_bug](http://en.wikipedia.org/wiki/Pentium_FDIV_bug)

来自维基百科：（[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)）

~7.2 小数浮点数

~15.9 十进制双倍

这意味着句点在哪里并不重要，数字中的精确数字总是有限的。

# java - Why such a small PermGen Commit increment?

> ID：11870622
> 
> 赞同：3
> 
> 时间：2012-08-08T18:14:19.303
> 
> 标签：java, garbage-collection, jvm, permgen

I was profiling a java functional test that was taking a long time and exhibiting occasional OOM's (in C heap, not java) and I found a really sub-optimal behavior in the java serial GC (and it probably applies to all java GC's.)

Here's a sample of Permgen statistics at full GC points from the test run (size in KB):

```
before  after   commit
167935  167935  167936
172031  172031  172032 
```

As you can see, permgen space isn't getting cleaned by these full gc runs. Not a big deal, but it points to these full gc's being useless. Additionally, the commit value is a little funny. I assumed the commit value for a gc log entry would be the value after the commit size was increased. I now think it is actually the commit value prior to the full GC run.

Additionally, I think that the permgen commit size grows at a fixed, un-tunable size of 4MB (172032K - 167936K) per full GC run. This means that if you start with a default permgen size of, say 64mb, and when your application is fully up it requires 128mb of permgen, it would require 16 full gc's for permgen to reach its final commit size.

In the case of the functional test I was profiling, 58 full gc's had to run, each taking 0.5 to 2 seconds. By making the jvm argument -XX:PermSize equal to -XX:MaxPermSize I was able to reduce that to zero full GC's (without significantly increasing the much-much-faster new-generation gc's) and reduce the GC time reported by the gc instrumentation messages by 90%, from 90 seconds to 9 seconds.

I looked numerous places but I couldn't find a different tuning parameter for the commit size growth rate for the permgen heap. It's kind of ugly to fully allocate the maximum possible size of the permgen heap at program startup. Does anyone know of an alternative to increasing PermSize to equal MaxPermSize that will achive similar results without allocating so much memory at startup? Why is the permgen commit increment so small and fixed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:06:03.560

Permgen 不会被垃圾收集。（在正常情况下）。Permgen 是保存 Java 运行时的实际类对象和其他“胆量”的地方。当您的应用程序初始化和使用各种类和/或加载和/或使用 jar 时，这些关联的类文件本质上存储在 permgen 中。

必须有其他与您的应用程序特别相关的相关参数来解释您的观察。

permgen 增加和垃圾收集之间确实没有记录的关系。Permgen 用于存储jvm 使用的*静态*数据，*通常*不会被收集（除了在极少数情况下，即 ClassLoader 加载类然后说 ClassLoader 超出范围）

# sqlite - Update column in sqlite table from value of column in same table

> ID：11870623
> 
> 赞同：4
> 
> 时间：2012-08-08T18:14:21.507
> 
> 标签：sqlite

I have searched and found loads of examples but am still struggling to make this work.

I have the following table in SQLite:

```
SELECT * FROM TableA;

ID|USER|NAME|PARENT
1|User1|SomeName|-1
2|User1|SomeOtherName|1
3|User2|SomeName|-1
4|User2|SomeOtherName|-1 
```

The PARENT for ID 2 with NAME of SomeOtherName is ID 1 - This is correct.

The PARENT for ID 4 with the NAME of SomeOtherName is ID -1 - This is incorrect. It should be ID 3.

I have many incorrect records like that (all with the same NAME of SomeOtherName and a PARENT of -1).

The column that ties them together is USER.

I need to update all the incorrect records with the correct parent ID.

I have tried the following to no avail:

```
DROP TABLE orphans;

CREATE TEMP TABLE orphans as
    SELECT TableA.id, TableA.user, TableA.name FROM TableA WHERE TableA.name = 'SomeOtherName' AND TableA.parent = -1;

UPDATE TableA
SET parent = (  SELECT TableA.id
                        FROM TableA
                        INNER JOIN orphans
                        ON TableA.name = 'SomeName' AND orphans.user = TableA.user
                )
WHERE TableA.user IN (  SELECT TableA.user
                                FROM TableA WHERE TableA.name = 'SomeOtherName' AND TableA.parent = -1 )
; 
```

I just can't seem to get it right. Any help will be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:24:26.030

据我所知，sqlite对于语句中的复杂查询的能力*非常有限。*`UPDATE`您不能使用多个表，而且我还没有找到从子查询中引用当前行中的值的方法。

相反，我想出了这个：

```
SELECT id, user, name,
  CASE name = 'SomeOtherName' AND parent = -1
  WHEN 1 THEN (
    SELECT MAX(id)
    FROM TableA A2
    WHERE A1.user = A2.user
    AND A2.name != 'SomeOtherName'
  ) ELSE parent END AS parent
FROM TableA A1; 
```

这*应该*是你想要的数据，对吧？您可以将其写入临时表，然后从那里将数据反馈回原始表。`REPLACE`如果您有唯一的键，则可以使用此反馈来完成，如果没有，则使用`DETELTE`后跟`INSERT`。我[在 sqlfiddle 创建了后者的示例](http://sqlfiddle.com/#!5/1a5ba/22)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T09:35:17.003

当然迟到的答复，但我相信这可以在没有临时表的情况下完成。只需以正确的方式使用选择。下面的代码在类似的表格中适用于我：

```
UPDATE TableA SET PARENT = (
            SELECT ID
            FROM TableA AS T
            WHERE T.NAME = 'SomeName' AND T.USER = TableA.USER
        )
WHERE ID IN (
            SELECT ID
            FROM TableA
            WHERE TableA.NAME = 'SomeOtherName' AND TableA.PARENT = -1
            ); 
```

# css - Twitter Bootstrap - Responsive Image & Carousel

> ID：11870625
> 
> 赞同：0
> 
> 时间：2012-08-08T18:14:32.603
> 
> 标签：css, twitter-bootstrap, responsive-design, carousel

I am using the latest version of the twitter bootstrap.

I am also using the bootstrap-responsive.css.

I wish to have an image (As a picture frame), and a carousel (one provided with the bootstrap) within the center of such image. However i wish for them to be responsively resized.

The typical way I would have done this is, to make the carousel have position:relative, and simple overlap onto the image. But with the active resizing this results in problems.

Quite new to the whole media queries thing with css, any ideas of how this can be achieved?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T04:49:54.420

我使用引导程序的轮播制作网站的做法是......

```
<div id = "myCarousel" class = "carousel slide">
      <div class = "carousel-inner">
            <!--each slide goes here-->
            <div class = "item active">
                  <img src = "your image here..." class = "img-responsive">
            </div><!--end itemactive-->
            <div class = "item">
                  <img src = "your image here..." class = "img-responsive">
            </div><!--end itemactive-->
            <!--etc-->
      </div><!--end carousel-inner-->
</div><!--end carouselslide--> 
```

然后在CSS中，我会有

```
#myCarousel
{
     background-image:url(your background image path here);
}

#myCarousel.carousel-inner
{
     width: 80%; /*carousel width size here - my example will use 80%, if you want the carousel to fill entire screen, then just remove this width element.*/
     margin-left: auto;
     margin-right: auto;
     /*These two margins are to center the carousel if you set a smaller width. :) */
} 
```

顺便说一下，我使用了 bootstrap.min.css。

# java - Java 独立客户端应用程序

> ID：11870635
> 
> 赞同：1
> 
> 时间：2012-08-08T18:15:06.703
> 
> 标签：java, database, desktop

我只是一名 Java 开发人员，现在我需要构建一个需要与数据库交互的独立应用程序（不是 Web 应用程序，而是需要在桌面上运行的客户端应用程序）。有人可以指出哪种技术/框架最适合帮助我实现这一目标吗？

Java 中是否有一个框架可以帮助您与简单的数据库（例如 MySQL）进行交互，并帮助您创建非常好的 GUI，然后可以将其转换为 Windows .exe 可执行文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:22:12.337

程序`Java`永远不能转换为`.exe`. 输出通常是一个文件，只要你在系统上`jar`，它就可以在任何设备上运行。`OS``JDK`

您可以`Swing`在 JAVA 中使用来创建良好的 GUI，并且可以使用`MySql library`JAVA 轻松连接到 MySQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:25:08.423

补充字节的回答：

您将使用两个库/框架。一个用于 GUI，另一个用于数据库访问。作为 GUI 的一个选项，还有 SWT。

对于数据库访问，可以简单地使用 java 内置的 JDBC 和 mysqls jdbc 驱动程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:42:57.713

您要求提供框架和工具：

*   首先我会使用[Swing](http://en.wikipedia.org/wiki/Swing_%28Java%29)，因为它是标准并且在所有开箱即用的平台中都得到了很好的支持
*   目前我想我会选择[Better Swing Application Framework (BSAF)](http://kenai.com/projects/bsaf/pages/Home)。它重量轻，可扩展性很好
*   为了设计 UI，我建议使用 Eclipse 和[Window Builder](http://www.eclipse.org/windowbuilder/)插件。它在双向编辑方面做得不错（意味着您的代码中没有被阻塞的区域，它还能够解释现有的 GUI）
*   另一种方法是手动绘制您的 UI，并使用[JGoodies Forms](http://www.jgoodies.com/freeware/libraries/forms/)或[MigLayout等自定义布局管理器来实现它](http://www.miglayout.com/)
*   为了访问数据库，我还推荐一个 ORM 映射器，如[EclipseLink](http://www.eclipse.org/eclipselink/)（从未使用过它）或[Hibernate](http://www.hibernate.org/)（非常喜欢它）。
*   我总是会通过添加服务层在 UI 和数据库之间绘制一个分离层。为什么？它大大提高了可维护性！[这可以通过Spring Framework](http://www.springsource.org/)很好地完成，它可以与您的 ORM 映射器和客户端计算机上的所有内容一起运行，或者使用[Enterprise Java Beans](http://en.wikipedia.org/wiki/Enterprise_JavaBeans)，如果您计划使用客户端将连接到的应用程序服务器。
*   为了交付您的应用程序，您可以使用一个常见的安装程序工具，如[Nullsoft 安装程序](http://nsis.sourceforge.net/Main_Page)，其中包含一个 JRE，然后使用另一个工具（如[Launch4J](http://launch4j.sourceforge.net/) ）包装应用程序（尽管我从未尝试过这个）。

如果您不熟悉 Java 或一般的面向对象编程，请阅读[Effective Java](http://java.sun.com/docs/books/effective/)（通常用于 Java）和 Martin Fowlers 对几种[表示模式](http://martinfowler.com/eaaDev/)的描述——这里我最喜欢[被动视图](http://martinfowler.com/eaaDev/PassiveScreen.html)。

确实有很多东西要学，但是如果您想“正确”地做到这一点，那么我认为没有办法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T18:44:14.357

我建议您正确分层应用程序并分阶段进行操作。

您可以在没有 UI 的情况下使数据库部分正常工作。我建议你先这样做。开发它，测试它的鼻涕，然后把它放在一边。

您将需要 UI 和数据库之间的服务层。它将管理请求、验证、安全、事务等。开发它，测试它的鼻涕，然后把它放在一边。

只有当其余部分都到位时，您才能继续使用 UI。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T18:25:54.490

如果您对 Java 非常陌生，我建议您使用易于使用的 IDE 开始。我会选择 JDeveloper 是官方的 oracle IDE，它几乎拥有开发桌面或 Web 应用程序所需的一切，即使是使用可视化设计器也是如此。它是免费的，我认为它需要您注册到 oracle 站点，但这是值得的。

这是一个关于如何使用 JDeveloper 和 swing 构建小型可视化 Java 应用程序的教程：http: [//docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_2/jdtut_11r2_2.html](http://docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_2/jdtut_11r2_2.html)

至于数据库技术，最好是使用 ORM。我推荐 JPA with EclipseLink，它已经包含在 JDeveloper IDE 中，这里有一个关于如何做到这一点的教程：http: [//st-curriculum.oracle.com/obe/jdev/obe11jdev/ps1/ejb/ejb.html](http://st-curriculum.oracle.com/obe/jdev/obe11jdev/ps1/ejb/ejb.html)

但是如果你不想进入 ORM 学习（你真的应该最终），那么只需使用普通的 JDBC（网上有很多关于如何做到这一点的教程）

JDeveloper 的替代品是 Netbeans，它也是一个官方的 oracle 工具，因为它更轻巧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T18:28:12.220

询问“Java 中是否有一个框架可以帮助一个接口与一个简单的数据库进行交互”，你会得到很多答案。最简单的响应是“查看 JDBC”，几乎所有其他框架都将利用它与数据库进行通信。

我不确定我是否会推荐一个同时执行数据库连接和 GUI 内容的框架。保持它们解耦。和上面的 Byter 一样，我发现 Swing 运行良好。

如果您要问的是报告功能，我一直在听说 Jasper 报告。

# jquery - 淡出 div 并替换为一个

> ID：11870636
> 
> 赞同：3
> 
> 时间：2012-08-08T18:15:07.453
> 
> 标签：jquery, fadein, fadeout

这可能已经被问过很多次了（我只是找不到它）。

我有四个链接，它们都对应于它们自己的“div”，其中包含信息。我想要发生的是（默认显示第一个 div），单击第二个链接，第一个淡出，第二个 div 淡入（在另一个的同一位置）。我让淡入/淡出工作（在某种意义上），但他们都只是堆叠起来做一些奇怪的动作。我将不胜感激任何帮助。我在 jsfiddle 上放置了一个测试文件。我的 jquery 可能也有点古怪。

[http://jsfiddle.net/buScL/](http://jsfiddle.net/buScL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:21:24.233

将绝对位置添加到 div 应该可以解决此问题。您还应该考虑使用类来淡出其他 div。它只是让代码看起来更好。

[http://jsfiddle.net/mTKFJ/](http://jsfiddle.net/mTKFJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:17:46.413

给所有的 div 一个类，然后`positon:absolute;`

这导致它们都在另一个之上，所以当你淡出/淡入时，它发生在同一个地方。

```
.content {
    position: absolute;
} 
```

[**演示**](http://jsfiddle.net/buScL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:20:59.797

您可以使用锚点的文本来选择目标，请尝试以下操作：

```
 $("#controlls a").click(function () {
      var id = $(this).text().toLowerCase().replace(' ', "")
      $('#'+id).fadeIn().siblings('div').fadeOut()
  }); 
```

[演示](http://jsfiddle.net/buScL/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:26:17.857

更改您的html，如下所示：

***HTML***

```
<div id="wrapper">

  <ul id="controlls">  
      <li><a href="#" id="one" class="dealer">Dealer</a></li>
      <li><a href="#" id="two" class="advertise">Advertise</a></li>
      <li><a href="#" id="three" class="social">Social Media</a></li>
      <li><a href="#" id="four" class="need">Need</a></li>
  </ul>

  <div id="slider">
        <div id="dealer">
            <p>If you click on this paragraph
              you'll see it just fade away.
            </p>
        </div>
        <div id="advertise">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
        <div id="social">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
        <div id="need">
            <p>If you click on this paragraph
            you'll see it just fade away.
            </p>
        </div>
    </div>
</div> 
```

并使用以下 jQuery 代码：

***jQuery***

```
$("#controlls li a").click(function(e) {
    e.preventDefault();
    var id = $(this).attr('class'); // get class of clicked anchor tag
    // first fadeOut the visible div
    $('#slider div:visible').fadeOut(500, function() {
        // after fadeOut complete show target div
        $('div#' + id).fadeIn();
    })
}); 
```

### [工作样本](http://jsfiddle.net/buScL/13/)

### 笔记

在这里，您必须`fadeIn()`在`fadeOut()`回调函数内创建，以便`fadeIn()`在`fadeOut()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T18:30:52.357

问题是你的褪色效果都试图同时发生。使用回调，您可以更严格地控​​制订单。请参阅此**[JS Fiddle](http://jsfiddle.net/Lvv9R/)**或下面的相同代码。当褪色同时发生时，为什么丑陋？积木按照正常流程自然堆积。当一个处于淡出过程中时，它仍然会占用流中的空间。它仅在渐变结束时才释放该空间，当它`display:none`生效时。当替换框褪色时，它会定位在它通常所属的位置下方，直到最终空间释放。那时它以一种丑陋的方式弹回顶部。查看 jQuery 关于[fadeToggle](http://api.jquery.com/fadeToggle/)的文档并查看回调部分（fadeIn 和 fadeOut 的工作方式相同）。

```
<div id="hello"> hello world! </div>
<div id="goodbye"> goodbye world! </div> 
```

Javascript：

```
 ​$("#hello").click(function(){
        $(this).fadeToggle("slow", function(){
           $("#goodbye").fadeToggle("slow"); //Here is a callback
        });           
    });

$("#goodbye").click(function(){
    $(this).fadeToggle("slow", function(){
       $("#hello").fadeToggle("slow") //Here is a callback
    }) ;             
});
    ​ 
```

CSS：

```
div{
    width:100px;
    height:100px;
}

#hello{
    background-color:red  ; 
}

#goodbye{
    background-color:blue;
    display:none;

} 
```

# jquery - 使用 jQuery 更改 RadioButtonList 的值

> ID：11870642
> 
> 赞同：0
> 
> 时间：2012-08-08T18:15:26.797
> 
> 标签：jquery

我四处搜索并找到了多个答案，但没有一个对我有用。我在转发器控件中使用 RadioButtonList。这是我的 jQuery 函数。

```
$("[name$='$PlanSelectionRbtnLst']").click(function () {
    alert($(this).val());  //this works
    $("[name$='$PlanSelectionRbtnLst']").find("input[value='-1']").attr("checked", true); // this doesn't
}); 
```

当我单击任何单选按钮时，这会正确地提醒我选择的值，但我无法将 RadioButtonList 的所有选定按钮更改为 -1 值。如果重要，我的脚本在母版页中。

编辑：根据要求，这里是呈现的 html 的一小段：

```
<table id="MainContent_BenefitsRpt_PlanSelectionRbtnLst_2>
<tbody>
    <tr>
        <td>
            <input name="ct100$MainContent$BenefitsRpt$ct103$PlanSelectionRbtnList" id="MainContent_BenefitsRpt_PlanSelectionRbtnLst_2_0_2" type="radio" value="9"/>
        </td>
    <tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:27:40.457

`checked`在二进制属性中，而不是属性中。

尝试： 。`attr("checked", "checked")`

但首先，看看你的选择器是否工作：

```
alert($("[name$='$PlanSelectionRbtnLst']").find("input[value='-1']").length) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:33:08.443

试试这个：

```
$("[name$='$PlanSelectionRbtnLst']").click(function () {
    $("[name$='$PlanSelectionRbtnLst']")
                    .find("input[value='-1']") 
                    .prop("checked", true); 
}); 
```

# iphone - 在后台进程向sqlite插入数据

> ID：11870645
> 
> 赞同：0
> 
> 时间：2012-08-08T18:15:31.743
> 
> 标签：iphone, objective-c, xcode, ios5, sqlite

我从网上下载数据并将下载的数据插入到 sqlite 数据库中。现在我想要的是插入数据库的数据，这些数据应该在后台发生，同时下载用户也可以在视图上做其他事情。那么在后台进程中是否有可能将数据插入到 sqlite 中。

我正在使用它，但应用程序在使用它时崩溃。

```
NSNumber *number = [NSNumber numberWithInteger:1];
NSOperationQueue *queue = [NSOperationQueue new];
NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                                        selector:@selector(InsertIntodatabase)
                                                                          object:number];

[queue addOperation:operation];
[operation release]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:22:47.480

您可以在后台线程中插入数据。但是，如果您同时（或多或少）尝试从两个不同的线程访问数据库，您将收到难以恢复的“数据库锁定”错误。

所以你需要提供一些外部联锁来防止来自两个不同线程的同时访问。在某些情况下，程序逻辑本身会阻止这种情况，而在其他情况下，您需要实现显式锁定机制。

# objective-c - NSUserDefaults 初始设置

> ID：11870648
> 
> 赞同：0
> 
> 时间：2012-08-08T18:15:45.057
> 
> 标签：objective-c, ios, nsuserdefaults

我将一些用户设置保存在`NSUserDefaults`. 如果用户没有修改这些设置，我希望应用程序使用预设。

我应该如何设置，以便应用程序首先检查设置是否已修改，如果没有，设置预设？

检查是否`[[NSUserDefaults standardDefaults]objectForKey: @"setting1"] == nil`？然后设置一个预设，如果不是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:18:53.947

```
[[NSUserDefaults standardUserDefaults] registerDefaults:dictionary]; 
```

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/doc/uid/20000318-CIHDDCDB](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/doc/uid/20000318-CIHDDCDB)

`applicationDidFinishLaunchingWithOptions:`从设置您可能需要的任何默认值的方法中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:18:26.647

查看 NSUserDefaults 文档以了解 registerDefaults。这允许您拥有默认值，直到用户更改它们，然后它们将无效。

# bash - Bash 脚本 - POST 后使用 Curl 获取文件名

> ID：11870657
> 
> 赞同：0
> 
> 时间：2012-08-08T18:16:08.837
> 
> 标签：bash, curl

我正在编写一个 bash 脚本以从远程网站下载文件。但是，远程网站需要首先提交一个 POST 表单，然后它返回一个文件。我设法找到了解决方案，并且效果很好。这里是：

```
curl -F 'data=filename.rar' --user-agent 'Mozilla/4.0 POST' http://somewebsite.com/index.html -v > filename 
```

现在，问题是当服务器返回该文件时我必须重定向 STDOUT，否则我会在我的屏幕上得到乱码。我想要的是，而不是硬编码的“文件名”，来获取文件的真实名称并在那里重定向 STDOUT。使用 -sI 选项运行 curl 以获取标题然后解析文件名不是这里的解决方案，因为 curl 不接受 -I 和 -F 选项的混合。它必须是其中之一，但只有 -FI 可以查看标头，服务器也随它们一起发送文件。有没有办法只获取标头（请记住，我还必须发送帖子数据才能获取文件），以便我可以解析它们并提取文件名？然后我会发出新的 curl 请求，但现在将该文件名作为 STDOUT 值。或者也许有办法让 curl 自动从标题下载到文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:19:23.163

您可能想尝试使用 curl 的 -o 选项。例如：

```
curl -F 'data=filename.rar' --user-agent 'Mozilla/4.0 POST' -o outputFileName http://somewebsite.com/index.html -v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:09:10.793

在对我之前的回答发表评论之后，您可能想尝试 wget 。

```
FILENAME=`wget --post-file=filename.rar -P dir_to_save_files http://somewebsite.com/index.html | grep "filename" | cut -d"=" -f2 | awk '{print$1}'`; wget --post-file=filename.rar -O $FILENAME -P dir_to_save_files http://somewebsite.com/index.html 
```

您可能需要尝试一下，因为我没有测试方法。如果它实际上不是正在发布的文件，您也可以使用 --post-data=data。

*   根据评论进行编辑。这可能不是最优雅的方式，但它应该是相对有效的。您可能需要使用 cut 语句和 grep 语句来使其以实际文件名为目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:47:51.713

最后......解决方案是使用 --content-disposition 选项和 Wget 来保留原始文件名。

# c# - 评估不适用于比较

> ID：11870660
> 
> 赞同：3
> 
> 时间：2012-08-08T18:16:26.990
> 
> 标签：c#, asp.net, .net

在以下文本框中，文本以 Minutely 填充。

```
<telerik:RadTextBox ID="RadTextBox1" Runat="server" Text='<%# Eval("FREQUENCY") %>' /> 
```

我正在尝试根据现有频率选择一个组合框项目。这段代码给了我一个未设置为对象错误实例的对象：

```
<telerik:RadComboBoxItem runat="server" Text="One Time Run" Value="OneTimeRun" Selected='<%# (Eval("FREQUENCY").ToString() == "OneTimeRun" ? true : false) %>' /> 
```

我尝试了以下方法均未成功：

```
<telerik:RadComboBoxItem runat="server" Text="One Time Run" Value="OneTimeRun" Selected='<%# (Eval("FREQUENCY").ToString() == "OneTimeRun") %>' />
<telerik:RadComboBoxItem runat="server" Text="One Time Run" Value="OneTimeRun" Selected='<%# Eval("FREQUENCY").ToString() == "OneTimeRun" ? true : false %>' /> 
```

我不明白出了什么问题。如果我的文本框正在填充文本“Minutely”，为什么在我想进行比较时会出现此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:28:57.477

我猜你只是不能在组合项上使用 Eval，因为它没有绑定数据源。

我建议您不要尝试在您的组合项上设置 Selected，而应该执行以下操作：创建您的项目的数据源，将组合绑定到集合，像现在一样使用 Eval 以声明方式设置组合的 SelectedValue。

# c++ - Ubuntu 12.04 C++11 代码不工作

> ID：11870661
> 
> 赞同：1
> 
> 时间：2012-08-08T18:16:27.210
> 
> 标签：c++, gcc, c++11, g++, eclipse-cdt

在过去的几天里，这一直让我心烦意乱。我也不确定是在 ask ubuntu 还是在这里发布这个。我选择这里是为了获得更广泛的基于程序员的受众。

我是 Ubuntu 和 GCC 的新手，但是我已经在 Windows 上编程 C++ 大约 5 年了。这个简单的 C++11 代码示例在我的装有 VS2010 的 Windows 机器上运行良好。

```
#include <iostream>
#include <functional>

std::function<void()> func;

int main() {
    std::cout << "!!!Hello World!!!" << std::endl; // prints !!!Hello World!!!
    return 0;
} 
```

使用 Eclipse CDT (Ubuntu 12.04)，我得到了错误`Symbol 'function' could not be resolved`。

我已经确定`build-essentials`安装了。

我已将其添加`/usr/include/c++/4.6.3`到 Eclipse 中。

我`__GXX_EXPERIMENTAL_CXX0X__`在 Eclipse 中添加了路径和符号。

我已经在命令行上尝试过 -std=c++11 。

我已经在命令行上尝试过 -std=c++0x 。

我在这里遵循了接受的答案：[https](https://askubuntu.com/questions/113291/how-do-i-install-gcc-4-7) ://askubuntu.com/questions/113291/how-do-i-install-gcc-4-7并安装了 gcc 4.7

gcc不支持吗？

我已经检查过了`auto`，它可以工作，但是类似的东西`unique_ptr`也不起作用，与上述相同的错误。

再次抱歉，我是 Linux 新手。

**编辑：** 根据nm的要求：

```
neil@ubuntu12:~/projects/Test/Test$ g++ -v;g++ -std=c++0x -o main main.cpp
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-linux-gnu/4.6/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
neil@ubuntu12:~/projects/test$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:25:35.060

> gcc不支持吗？

GCC 很好地支持它，你混淆了来自 Eclipse 的错误，说它的语法突出显示和自动完成无法识别`std::function`来自 GCC 的编译器错误。他们不是一回事。

> 我`__GXX_EXPERIMENTAL_CXX0X__`在 Eclipse 中添加了路径和符号。

这说明了如何让 Eclipse CDT 识别 C++11 名称：[http ://wiki.eclipse.org/CDT/User/FAQ#CDT_does_not_recognize_C.2B.2B11_features](http://wiki.eclipse.org/CDT/User/FAQ#CDT_does_not_recognize_C.2B.2B11_features)

# php - PHP数组以逗号分隔的列表

> ID：11870669
> 
> 赞同：3
> 
> 时间：2012-08-08T18:17:00.330
> 
> 标签：php, arrays, csv

我有一个来自数据库的项目列表，正在数组中解析

```
Array
(
    [0] => Array
        (
            [dToken] => 731fea87ea9dc61f16e93f1ad2b964bf1926633acac151c1853ab91ea0465228
            [0] => 731fea87ea9dc61f16e93f1ad2b964bf1926633acac151c1853ab91ea0465228
        )

    [1] => Array
        (
            [dToken] => d890a5002f7da8bd35f6cae50e597d6f11554b26ba686bc7314afe77d1b36a61
            [0] => d890a5002f7da8bd35f6cae50e597d6f11554b26ba686bc7314afe77d1b36a61
        )

) 
```

我需要获取所有 dToken 并将它们列在一个变量中，每个 dToken 用逗号分隔，列表中的最后一个除外。

```
foreach($result as $device['dToken'] => $token){
    //$devices = $token['dToken'];
    print_r($token['dToken']);
} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:22:51.183

您可以只构建字符串：

```
$cvsString = '';
$delimiter = '';
foreach($result as $device){
    $cvsString.= $delimiter . $device['dToken'];

    $delimiter = ',';
}

var_dump($cvsString); 
```

或者您可以先构建数组：

```
$cvsArray = array();
foreach($result as $device){
    $cvsArray[] = $device['dToken'];
}

var_dump(implode(',', $cvsArray)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:20:54.527

你就在那儿。

```
$tokens = array();
foreach($result as $device){
    $tokens[] = $device['dToken'];
}
echo implode(',', $tokens); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T18:21:17.803

要回答与图块对应的问题（将数组转换为带分隔符的列表），请使用该`implode`函数。要生成 CSV，我会 google `php CSV`，我确信已经有很多功能可以做到这一点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T18:21:56.437

```
callback = function($row){
    return $row['dToken'];
}

implode(",",array_map(callback,$result)); 
```

# python - 从包中导入模块

> ID：11870670
> 
> 赞同：3
> 
> 时间：2012-08-08T18:17:05.323
> 
> 标签：python

我正在尝试根据[Modules Python Tutorial](http://docs.python.org/tutorial/modules.html)中的说明从设置的包中导入模块。我的目录树是：

```
$ pwd
/home/me/lib/python/pygplib

$ ls *
__init__.py

atcf:
atcf.py  __init__.py 
```

我能够导入`pygplib`但`pygplib.atcf`似乎不存在：

```
In [1]: import pygplib

In [2]: dir(pygplib)
Out[2]: ['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__'] 
```

我究竟做错了什么？我所有的`__init__.py`文件都是空白的。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:19:45.083

导入顶级包时不会导入子模块，因此不会出现在`dir`. 相反，做

```
from pygplib import atcf 
```

或者

```
from pygplib.atcf import atcf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:23:24.743

`atcf`不会自动导入`pygplib`命名空间，但您可以通过放置

```
import atcf 
```

在`pygplib/__init__.py`.

# c# - WinRT XAML 在 FlipView 项模板中查找控件

> ID：11870676
> 
> 赞同：4
> 
> 时间：2012-08-08T18:17:15.030
> 
> 标签：c#, xaml, windows-8, windows-runtime

所以我有一个翻转视图来显示一篇文章，在这个翻转视图中我有一个来自[Microsoft Player Framework](http://playerframework.codeplex.com/)的媒体播放器。现在我希望能够从代码中访问这个媒体播放器。

但是，我发现的每个示例都在 DataTemplate 上使用了 FindName，而 WinRT 没有。

我努力了

```
var flipViewItem = this.flipView.ItemContainerGenerator.ContainerFromIndex(flipView.SelectedIndex); 
```

然后使用 VisualTreeHelper 查找媒体播放器，但`flipViewItem`始终为空。

我尝试数据绑定视频播放器 - 但这会导致翻转视图项目中的所有视频同时播放。

有人可以帮忙吗？

**编辑**

所以这是我正在使用的 xaml：

```
<FlipView
        x:Name="flipView"
        AutomationProperties.AutomationId="ItemsFlipView"
        AutomationProperties.Name="Item Details"
        TabIndex="1"
        Margin="0,127,0,10"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}" Grid.RowSpan="2">

        <FlipView.ItemTemplate>
            <DataTemplate>
                <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
                    <ScrollViewer x:Name="scrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}" Grid.Row="1">

                        <common:RichTextColumns x:Name="richTextColumns" Margin="117,0,117,47">
                            <RichTextBlock x:Name="richTextBlock" Width="560" Style="{StaticResource ItemRichTextStyle}">
                                <Paragraph>
                                    <Run FontSize="26.667" FontWeight="Light" Text="{Binding Title}"/>
                                </Paragraph>
                                <Paragraph LineStackingStrategy="MaxHeight">
                                    <InlineUIContainer>
                                        <Grid Width="560" Height="340" Margin="0,20,0,10">
                                            <Grid.Background>
                                                <ImageBrush ImageSource="{Binding Image}" Stretch="UniformToFill" />
                                            </Grid.Background>
                                            <Image x:Name="OverlayImage" Visibility="{Binding ShowVideo, Converter={StaticResource booleanToVisibilityConverter}}" Source="Assets/play-icon.png"/>
                                            <mmppf:MediaPlayer x:Name="ArticleVideo" Width="560" Height="340" />
                                        </Grid>
                                    </InlineUIContainer> 
```

我尝试绑定到媒体播放器：

```
<mmppf:MediaPlayer x:Name="ArticleVideo" Source="{Binding VideoPath}" Width="560" Height="340" PosterSource="{Binding Image}" AutoPlay="False" /> 
```

但是，当我这样做并将视频设置为自动播放时 - 它们都会自动播放。如果我在控件上手动按下播放，我会在 System.ComponentModel.PropertyChangedEventHandler.Invoke 收到空引用异常。媒体播放器在模板外工作正常。

令人困惑的是，我知道我想要什么是可能的。适用于 Windows 8 的 SkyNews 应用程序完全符合我的要求（将视频添加到翻转视图项目模板）。我查看了 c:\ProgramFiles\WindowsApps 看看他们的 xaml 看起来和我的几乎一样——媒体播放器上没有数据绑定。唯一的区别是它们在用户控件和包含模板中视频播放器的网格上具有 x:ConnectionId。我不知道 x:ConnectionId 做了什么——但他们是否有可能是使用它来从他们的代码中访问控件的人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:18:38.963

查看[http://winrtxamltoolkit.codeplex.com/downloads/get/467926](http://winrtxamltoolkit.codeplex.com/downloads/get/467926)并查看 VisualTreeHelperExtensions。

没有直接的方法可以在可视化树中找到元素。您需要使用 VisualTreeHelper.GetChild(flipView, i) 方法。实现起来并不难，但是 Toolkit 有一个扩展方法类文件，您可以直接将其添加到您的项目中。它提供了一种按类型获取后代或祖先的方法。我认为它适合您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:04:42.180

当然。如果您想访问模板中的命名控件 - 看这里[http://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html](http://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html)

# jquery - 使用 JQuery 缩放锯齿状图像

> ID：11870684
> 
> 赞同：2
> 
> 时间：2012-08-08T18:17:46.693
> 
> 标签：jquery, performance, animation

我正在制作一个小型 JQuery 动画，其中涉及几个“缩小”页面的 png 图像（文本标签）。我掌握了动画的基础知识，但客户评论说文本“模糊”或“模糊”。我认为他指的是动画渲染的不稳定。

你可以在 JSFiddle 看到它：http: [//jsfiddle.net/H5Mk2/2/](http://jsfiddle.net/H5Mk2/2/)

关于使动画更流畅的任何想法？它在你的末端看起来如何？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:22:53.893

您是否考虑过使用 CSS3 动画？如果需要，您可以使用您的 JavaScript 动态构建动画。它们的渲染比位置迭代平滑得多，并且经常利用硬件加速和亚像素渲染。

有一些浏览器兼容性考虑（[http://caniuse.com/#feat=css-animation](http://caniuse.com/#feat=css-animation)），但我肯定会看一看。

一些有用的链接

[http://www.netmagazine.com/tutorials/masterclass-css-animations](http://www.netmagazine.com/tutorials/masterclass-css-animations)

[http://www.kirupa.com/html5/css3_animations_vs_transitions.htm](http://www.kirupa.com/html5/css3_animations_vs_transitions.htm)

[http://www.leemunroe.com/css3-animations/](http://www.leemunroe.com/css3-animations/)

# xml - 为什么 xsl:for-each select="" 不能使用这个 xml 文件？

> ID：11870687
> 
> 赞同：0
> 
> 时间：2012-08-08T18:18:02.950
> 
> 标签：xml, xslt, namespaces, foreach

我正在尝试使用 xsl 样式表显示 xml 文件。我似乎无法让它工作。

我正在使用的提要是这样的：[http ://screamingdeals.tdn.travelscream.com/atom.xml](http://screamingdeals.tdn.travelscream.com/atom.xml)

这是它的 xml 的缩写副本：

```
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:ts="http://www.travelscream.com">
    <title type="text">Travelscream Deal Alerts</title>
    <updated>2012-08-08T11:09:44-06:00</updated>
    <id>http://screamingdeals.tdn.travelscream.com/</id>
    <link rel="alternate" type="text/html" hreflang="en" href="http://screamingdeals.tdn.travelscream.com"/>
    <link rel="self" type="application/atom+xml" href="http://screamingdeals.tdn.travelscream.com/atom.xml"/>
    <generator uri="http://screamingdeals.tdn.travelscream.com" version="1.0">screamingdeals.tdn.travelscream.com</generator>
    <entry>
        <title>New York City: Best Western President Hotel - $152</title>
        <link rel="alternate" type="text/html" href="http://screamingdeals.tdn.travelscream.com/a477908344.htm"/>
        <id>http://screamingdeals.tdn.travelscream.com/a477908344.htm</id>
        <updated>2012-08-08T11:09:44-06:00</updated>
        <published>2012-08-08T00:00:00-06:00</published>
        <author>
            <name>screamingdeals.tdn.travelscream.com</name>
            <uri>http://screamingdeals.tdn.travelscream.com</uri>
        </author>
        <content type="html" xml:base="screamingdeals.tdn.travelscream.com" xml:lang="en"> &lt;table&gt; &lt;tr&gt; &lt;td valign="middle"&gt; &lt;img width="80" width="60"
            src="http://www.dealbase.com/assets/hotels/photos/000/002/953/icon.jpg"&gt; &lt;/td&gt; &lt;td valign="top"&gt; $152/night &amp; up - Best Western President Hotel (New York City, NY) - 46%
            Off Travel Dates: Through Dec 31, 2012 &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; </content>
        <ts:data>
            <ts:primarykey>477908344</ts:primarykey>
            <ts:location_data>
                <ts:location id="50" selected="0" airport_codes="EWR,JFK,LGA" type="dest">New York</ts:location>
                <ts:location id="55" selected="1" airport_codes="EWR,JFK,LGA" type="dest">New York City</ts:location>
                <ts:location id="199" selected="0" airport_codes="" type="dest">United States</ts:location>
                <ts:location id="288" selected="0" airport_codes="" type="dest">North America</ts:location>
                <ts:location id="524" selected="0" airport_codes="EWR,JFK,LGA,NYC" type="dest">Manhattan</ts:location>
                <ts:location id="525" selected="0" airport_codes="EWR,JFK,LGA,NYC" type="dest">Bronx</ts:location>
                <ts:location id="526" selected="0" airport_codes="EWR,JFK,LGA,NYC" type="dest">Brooklyn</ts:location>
                <ts:location id="527" selected="0" airport_codes="EWR,JFK,LGA" type="dest">Queens</ts:location>
                <ts:location id="528" selected="0" airport_codes="EWR,JFK,LGA" type="dest">Staten Island</ts:location>
                <ts:location id="613" selected="0" airport_codes="" type="dest">SoHo</ts:location>
            </ts:location_data>
            <ts:pkg_attributes>
                <ts:attribute id="3" type="TYPE">Honeymoon</ts:attribute>
                <ts:attribute id="40" type="MAIN">Hotel</ts:attribute>
                <ts:attribute id="62" type="DTYP">City</ts:attribute>
            </ts:pkg_attributes>
            <ts:deal_expires>2012-09-07T14:54:05-06:00</ts:deal_expires>
            <ts:deal_supplier>DealBase.com</ts:deal_supplier>
            <ts:feed_image>http://www.dealbase.com/assets/hotels/photos/000/002/953/icon.jpg</ts:feed_image>
            <ts:fullscreen_image/>
            <ts:price1>15200</ts:price1>
            <ts:alpha>0</ts:alpha>
            <ts:coord>
                <ts:lat>40.7606</ts:lat>
                <ts:long>-73.9864</ts:long>
                <ts:latlong>40.7606,-73.9864</ts:latlong>
            </ts:coord>
            <ts:desc>$152/night &amp; up - Best Western President Hotel (New York City, NY) - 46% Off Travel Dates: Through Dec 31, 2012</ts:desc>
            <ts:tacomm/>
            <ts:direct>true</ts:direct>
            <ts:top>false</ts:top>
            <ts:traveldates>
                <ts:from>01/01/2050</ts:from>
                <ts:to>01/01/2050</ts:to>
            </ts:traveldates>
        </ts:data>
    </entry>
</feed> 
```

加载样式表并告诉它转换 xml 的 php 页面是这样编码的：

```
$xp = new XsltProcessor();
// create a DOM document and load the XSL stylesheet
$xsl = new DomDocument;
$xsl->load('deals_stylesheet.xsl');

// import the XSL styelsheet into the XSLT process
$xp->importStylesheet($xsl);

// create a DOM document and load the XML datat
$xml_doc = new DomDocument;
$xml_doc->load('http://screamingdeals.tdn.travelscream.com/atom.xml');

// transform the XML into HTML using the XSL file
if ($html = $xp->transformToXML($xml_doc)) {
    echo $html;
} else {
    trigger_error('XSL transformation failed.', E_USER_ERROR);
} // if 
```

到目前为止，一切都很好。我没有收到错误。这是 xsl 文件的内容：

```
<?xml version='1.0'?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:template match="/">

        <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
                <title>Facebook Deals Page</title>
                <style type="text/css">
                    <![CDATA[
                        <!--

                        -->
                    ]]>
                </style>
            </head>

            <body>
                <table border="1">
                    <tr>
                        <td><b>Title</b></td>
                        <td><b>ID</b></td>
                    </tr>
                    <xsl:for-each select="feed/entry">
                        <tr>
                            <td><xsl:value-of select="title"/></td>
                            <td><xsl:value-of select="id"/></td>
                        </tr>
                    </xsl:for-each>
                </table>
            </body>
        </html>

    </xsl:template>
</xsl:stylesheet> 
```

这是它不起作用的显示：http: [//www.margaretpickarddesign.com/clients/travelscream/facebook_deals/facebook_rss.php](http://www.margaretpickarddesign.com/clients/travelscream/facebook_deals/facebook_rss.php)

查看 xml 结构，节点“feed”之后是节点“entry”，该节点具有子节点“title”和“id”。那么为什么它不起作用呢？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:53:35.667

添加评论作为实际答案...

`ts`前缀命名空间不是问题，因为您没有访问该命名空间中的任何元素。问题是默认命名空间（没有前缀的 xmlns）。

您需要做的是在您的选择中添加`xmlns:a="http://www.w3.org/2005/Atom"`并`xsl:stylesheet`使用该前缀。( `select="a:feed/a:entry"`, `select="a:title"`, 和`select="a:id"`)

另请注意，您可以使用任何前缀，而不仅仅是“a”。唯一必须相同的是名称空间本身 ( `http://www.w3.org/2005/Atom`)。

# c# - 从 razorview 中的 foreach 局部视图获取数据

> ID：11870696
> 
> 赞同：4
> 
> 时间：2012-08-08T18:18:55.430
> 
> 标签：c#, asp.net-mvc-3, razor, partial-views

我是 MVC3 和 C# 的新手。

这是我目前的模型

```
@model Reports.ViewModels.ContentViewModel
<div>Total Hours: </div>

foreach (var user in Model.Users.ToList()) {
   @Html.Partial("_DirectReports", user)
} 
```

这很好用，然后我在这些局部视图中有 HTML，它使用另一个 @model 呈现我想要的一切。问题是我想将所有数据加在一起。

我想在 foreach 之外创建一个 var foreach 将数据插入 var 并在 foreach 完成后返回它，如下所示

```
@model Reports.ViewModels.ContentViewModel

@{var Total = 0}
foreach (var user in Model.Users.ToList()) {
   @Html.Partial("_DirectReports", user)
   //@Total is assigned a value in the partial view
}

<div>Total Hours: @Total</div> 
```

如果这是可能的，那就太好了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:49:01.350

通过将逻辑和您的视图混合在一起，您正在走下一个滑坡。MVC 旨在减少不同层（模型、视图和控制器）之间的耦合，以使代码更易于维护和测试等。

所以让我们试着清理一下。首先，`Total`是一段数据，这意味着它应该是模型的一部分：

```
public class ContentViewModel 
{
    public List<User> Users { get; set; }
    public int TotalHours
    {
        get
        {
            return Users.Sum(u => u.Hours); // Assuming User has an Hours property
        }
    }
} 
```

然后控制器应该处理模型的创建并为其提供数据。像这样的东西：

```
public ActionResult Index()
{
    ContentViewModel viewModel = new ContentViewModel();
    viewModel.Users = db.Users.ToList();

    return View(viewModel);
} 
```

现在您有了所需的数据，您可以减少当前在视图中使用的许多逻辑（例如使用 foreach 和`Total`var）：

```
@model Reports.ViewModels.ContentViewModel

@Html.DisplayFor(m => m.Users)

<div>Total Hours: @Model.TotalHours</div> 
```

`Html.DisplayFor`并`Html.EditorFor`使用所谓的显示/编辑器模板，它们会自动为您循环遍历集合，为每个项目呈现一个模板。为了利用这一点`ContentViewModel`，您需要创建一个显示模板。为此，您需要在视图所在的位置创建一个文件夹，并将其命名为`DisplayTemplates`. 例如，如果您的视图是`~/Views/Home/Index.cshtml`，则需要创建文件夹：`~/Views/Home/DisplayTemplates`。

右键单击该文件夹以添加新视图。在出现的对话框中，您要创建一个强类型视图，选择您要传递给模板的类型（在我的示例中，`User`是类型而不是`List<User>`），使其成为局部视图并确保给它与类型同名（再次，`User`）。一旦有了模板，就可以像在普通视图中一样使用 HTML 帮助器。像这样的东西：

```
@model Models.User

@Html.LabelFor(m => m.Name)
@Html.DisplayFor(m => m.Name) 
```

现在，您将事物分解为可管理的块。如果您想了解有关使用显示/编辑器模板的更多信息，我强烈建议您阅读[Brad Wilson](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html/)关于该主题的文章系列。即使它是为 MVC 2 编写的，它仍然适用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T18:21:23.110

恐怕您正在混合 MVC 模式中的职责。这就是为什么你正在为此苦苦挣扎。您应该使用视图模型。这不是你的观点应该处理的事情。因此，只需`Total`在您的视图模型上定义一个属性，`ContentViewModel`并让您的控制器操作完成为其分配值的工作。进而：

```
@model Reports.ViewModels.ContentViewModel

foreach (var user in Model.Users.ToList()) {
   @Html.Partial("_DirectReports", user)
}

<div>Total Hours: @Model.Total</div> 
```

在 ASP.NET MVC 中，计算任何东西不是视图的责任。视图的职责是仅以视图模型的形式显示为其准备的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T18:22:04.103

这就是你想要的。

```
@model Reports.ViewModels.ContentViewModel

@{
int Total = 0;
foreach (var user in Model.Users.ToList()) {
   @Html.Partial("_DirectReports", user)
   //@Total is assigned a value in the partial view
   Total = 5;
}

<div>Total Hours: @Total</div>
} 
```

会给：总小时数：5

# c# - 遍历 signalR 集线器类中的组

> ID：11870698
> 
> 赞同：0
> 
> 时间：2012-08-08T18:18:58.577
> 
> 标签：c#, asp.net, signalr

如何遍历 SignalR 组（集线器类） `Groups.Add(Context.ConnectionId, "foo");`

我将如何遍历该组以查看其中的谁？然后可能基于那里的connectionId返回一个用户

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:55:07.083

来自[SignalR 文档](https://github.com/SignalR/SignalR/wiki/Hubs)：

> 组不会保留在服务器上，因此应用程序负责跟踪哪些组中的连接，以便可以实现组计数等功能。

所以不，您不能遍历组中的用户，您需要自己跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:48:25.243

当客户端 conn/dis/re-connect 时可能实现 Dictionary

```
public static readonly ConcurrentDictionary<string, object> _connections 
       = new ConcurrentDictionary<string, object>();

public Task Connect()
{
    _connections.TryAdd(Context.ConnectionId, null);
    Groups.Add(Context.ConnectionId, "users");
    //Returns Connection count. 
    return Clients.tally(_connections.Count.ToString());
} 
```

您可以将其扩展为包括名称或组等，但就像 akoeplinger 所说，您必须在整个应用程序中跟踪这一点。

# iis - 如何从 Internet 访问我的网站 (IIS)？

> ID：11870699
> 
> 赞同：22
> 
> 时间：2012-08-08T18:19:07.177
> 
> 标签：iis

我已经安装了 IIS。我已使用 IIS 中的“浏览 *:80 (http)”链接浏览到我在 IIS 上的网站。这导航到`http://localhost`。该链接仅适用于我自己的机器。

我不关心我的 IP 地址的变化（我将不时地显示我的网站最多几个小时，因此可以更新它并在需要时重新发送链接）。

如何使我的网站可以访问互联网？我应该使用什么网址`http://82.11.220.212`（其中 82.11.220.212 是我计算机的 IP）？我是否需要禁用防火墙/向我的调制解调器/路由器添加例外？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T23:14:29.610

您必须确保您的宽带提供商为您提供了静态 IP（有时会为此收取额外费用）。否则，每次连接到 Internet 时都会为您分配一个新 IP。

如果您的 ISP 调制解调器先连接到路由器，然后连接到计算机，您必须登录到路由器设置并转发传入的 http 请求。这通常通过在端口 80 上设置传入 TCP 连接的转发规则来完成。您必须将这些连接转发到计算机上的端口 80。如果还想支持https，就得转发443端口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T18:47:43.560

是的，实际上你可以。如果您直接连接到互联网（意味着中间没有路由器进行 NAT），您可以只使用您的公共 IP 并确保您的防火墙规则允许该流量通过。

如果您在路由器后面，那么您可能必须将转发规则写入 LAN 中的计算机。此外，如果您不想担心 IP，那么您可以使用[No-IP](http://www.no-ip.com/)等。

# c# - 如何确定您是否位于列表框的底部（WP7 Silverlight）

> ID：11870700
> 
> 赞同：1
> 
> 时间：2012-08-08T18:19:09.340
> 
> 标签：c#, silverlight, windows-phone-7, listbox

我有一个用于排行榜的列表框，我在其中添加了一些自定义控件来显示每个位置的相关信息。目前排行榜只显示前 25 名的分数。如果用户滚动到列表的底部（即数字 25），我真的希望它加载下一个 25。这与在 windows phone 市场中可以找到的行为相同。当用户一直滚动到底部或某种可以表明这一点的属性时，是否会触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:40:02.373

使用提取列表框的子滚动查看器

```
 var elt = VisualTreeHelper.GetChild(parent, i);
            if (elt is ScrollViewer) 
                            scrollViewer = (ScrollViewer)elt; 
```

在操作完成事件处理程序中使用以下代码

```
 if ((scrollViewer.ScrollableHeight != 0 && scrollViewer.VerticalOffset != 0
                && (scrollViewer.ScrollableHeight - scrollViewer.VerticalOffset) <= 10) || scrollViewer.ScrollableHeight == 0)
                //do work here 
```

# wpf - 有没有办法直接在 WPF 应用程序中运行 winforms exe？

> ID：11870702
> 
> 赞同：2
> 
> 时间：2012-08-08T18:19:16.823
> 
> 标签：wpf, vb.net, winforms

我有一个老板希望在 Windows 7 上运行的旧 Windows 移动应用程序。由于它都是 .NET，所以该应用程序在某种程度上可以在 Windows 上运行（我相信它是为 Windows CE 制作的），但它在一个很小的窗口中运行。我想把它搞砸，首先想到的是以某种方式将实际程序转储到 WPF Viewbox 中。这将相当简单，并且不会侵犯任何其他应用程序的大小。

搜索我看到的所有信息都是关于 WindowFormsHost 的信息，用于将 WinForms 用户控件放入 WPF，但没有关于完整可执行文件的信息。有谁知道是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:54:22.497

Viewbox 仅适用于纯 WPF 控件。您不能使用它来放大 WinForms 控件，因为 WinForms 控件对 WPF 的缩放变换一无所知。

您可以尝试使用 WinForms [Control.DrawToBitmap](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx)方法将某些东西组合在一起：将 WinForms 控件绘制到位图，然后放大位图并将其绘制到屏幕上。（不需要 WPF；您可以在纯 WinForms 中执行此操作。）但是 DrawToBitmap 有[严重的限制](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx#remarksToggle)。如果您希望您的应用程序响应鼠标或键盘，您将有很多工作要做，将鼠标和键盘事件转发给原始控件，自己跟踪焦点等等。理论上可能可行，但几乎可以肯定不实用。

可以*将*.NET EXE 加载到另一个 .NET EXE 中。EXE 与 DLL 一样是程序集，您可以使用[Assembly.Load](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.load.aspx)加载它们，甚至可以在解决方案资源管理器中添加引用。但是你不需要做任何异国情调的事情；您可以轻松地将所有源代码编译到您的主机 EXE 中。

您最好的选择可能只是在表单设计器中打开每个表单并让所有控件变大。在一个大型应用程序中可能需要做很多工作，但没有什么说你必须一次完成所有工作——而且它可能比任何替代方案都少。

# c++ - 内存泄漏在哪里

> ID：11870704
> 
> 赞同：0
> 
> 时间：2012-08-08T18:19:19.723
> 
> 标签：c++, opencv

该代码用于运动跟踪。它跟踪 2 张图像的不同点。但是，每次调用该函数时，内存大小都会增加很多。我知道这可能与 cvPoints 有关。有什么好的方法来解决它？谢谢

```
 float calcorient(IplImage *imgA, IplImage *imgB) {
    // Initialize, load two images from the file system, and
    // allocate the images and other structures we will need for
    // results.
    //
    const int MAX_CORNERS = 500;
    CvSize    img_sz   = cvGetSize( imgA );
    int       win_size = 10;
    IplImage* imgC = cvCreateImage( img_sz, IPL_DEPTH_32F, 3 );
    // The first thing we need to do is get the features
    // we want to track.
    //
    IplImage* eig_image = cvCreateImage( img_sz, IPL_DEPTH_32F, 1 );
    IplImage* tmp_image = cvCreateImage( img_sz, IPL_DEPTH_32F, 1 );
    int           corner_count = MAX_CORNERS;
    CvPoint2D32f* cornersA     = new CvPoint2D32f[ MAX_CORNERS ];
    cvGoodFeaturesToTrack(
        imgA,
        eig_image,
        tmp_image,
        cornersA,
        &corner_count,
        0.01,
        5.0,
        0,
        3,
        0,
        0.04
        );
    cvFindCornerSubPix(
        imgA,
        cornersA,
        corner_count,
        cvSize(win_size,win_size),
        cvSize(-1,-1),
        cvTermCriteria(CV_TERMCRIT_ITER|CV_TERMCRIT_EPS,20,0.03)
        );
    // Call the Lucas Kanade algorithm
    //
    char  features_found[ MAX_CORNERS ];
    float feature_errors[ MAX_CORNERS ];
    CvSize pyr_sz = cvSize( imgA->width+8, imgB->height/3 );
    IplImage* pyrA = cvCreateImage( pyr_sz, IPL_DEPTH_32F, 1 );
    IplImage* pyrB = cvCreateImage( pyr_sz, IPL_DEPTH_32F, 1 );
    CvPoint2D32f* cornersB     = new CvPoint2D32f[ MAX_CORNERS ];
    cvCalcOpticalFlowPyrLK(
        imgA,
        imgB, 
        pyrA,
        pyrB,
        cornersA,
        cornersB,
        corner_count,
        cvSize( win_size,win_size ),
        5,
        features_found,
        feature_errors,
        cvTermCriteria( CV_TERMCRIT_ITER | CV_TERMCRIT_EPS, 20, .3 ),
        0
        );
    // Now make some image of what we are looking at:
    //
    float sum=0;

    for( int i=0; i<corner_count; i++ ) {
        if( features_found[i]==0|| feature_errors[i]>550 ) {
            //printf("Error is %f\n",feature_errors[i]);
            continue;
        }
        //printf("Got it\n");
        sum+=cornersA[i].x-cornersB[i].x;
        //printf("%f\n",sum);
        CvPoint p0 = cvPoint(
            cvRound( cornersA[i].x ),
            cvRound( cornersA[i].y )
            );
        CvPoint p1 = cvPoint(
            cvRound( cornersB[i].x ),
            cvRound( cornersB[i].y )
            );
        cvLine( imgC, p0, p1, CV_RGB(255,0,0),2 );
    }
    //cvNamedWindow("ImageA",0);
    //cvNamedWindow("ImageB",0);
    //cvNamedWindow("LKpyr_OpticalFlow",0);
    //cvShowImage("ImageA",imgA);
    //cvShowImage("ImageB",imgB);
    //cvShowImage("LKpyr_OpticalFlow",imgC);
    //cvWaitKey(1);
    return sum;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:22:35.957

看起来你正在分配一堆内存而不是删除它。

尝试添加以下行：

```
delete [] cornersA; 
delete [] cornersB; 
```

在您的功能结束时。

您还可以查看这些`cvCreate`调用——如果它们没有在其他地方得到释放，那可能是导致问题的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:35:20.793

由于 CvReleaseImage，您必须释放您的 IplImage。

# android - Android AChartEngine 图表位图 NullPointerException

> ID：11870708
> 
> 赞同：0
> 
> 时间：2012-08-08T18:19:31.630
> 
> 标签：android, bitmap, nullpointerexception, achartengine, linegraph

我知道这个问题之前曾被问过一次，但从那时起我看不到它的答案。因此，如果有人能在这方面指导我，我将不胜感激。

[Android需要图表帮助](https://stackoverflow.com/questions/7188556/android-need-help-with-diagram)

我在以下部分有错误：

```
 double x = 0;
    double y = 0;

    for (int i=0;i<10;i++)
    {
        x=x+10;
        y=y+5;
        mCurrentSeries.add(x, y);
    }

    Log.i("Series Count",""+mCurrentSeries.getItemCount());

    for (int xy=0;xy<10;xy++)
    {
    Log.i("Series -- Values","["+mCurrentSeries.getX(xy)+","+mCurrentSeries.getY(xy)+"]");
    }

    if (mChartView != null) {
        mChartView.repaint();
    }

    Bitmap bitmap = mChartView.toBitmap();

    try {
        File file = new File(Environment.getExternalStorageDirectory(),
                "test" + index++ + ".png");
        OutputStream output = new FileOutputStream(file);
        bitmap.compress(CompressFormat.PNG, 100, output);   

        output.flush();
        output.close(); 
    } catch (Exception e) {
        Toast.makeText(LineChartTestActivity.this, "Graph Exception", Toast.LENGTH_LONG).show();//Added Toast to see exception on device
        Log.e("ERROR", "BITMAP EXCEPTION");
        e.printStackTrace();

    } 
```

具体来说，下面的行给了我一个 java.lang.NullPointerException

```
bitmap.compress(CompressFormat.PNG, 100, output); 
```

就像在他的问题中提到的 Handy 一样，我也可以使用 editText 使其工作，但由于某些奇怪的原因，当我从代码中给出明确的值时它不会工作！

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:49:02.517

曾经有一个未解决的问题。请在[此处](http://code.google.com/p/achartengine/issues/detail?id=33)查看评论，也许它会帮助您保存位图。

# python - Python OOP --action() 函数

> ID：11870710
> 
> 赞同：5
> 
> 时间：2012-08-08T18:19:38.530
> 
> 标签：python

我是 Python OOP 的新手，正在尝试创建一个 OOP 程序来管理库。此代码来自一本书。

此代码按预期工作，但我需要了解`action()`当我选择特定选项时如何调用相应的函数，例如：当我选择`1`该`show_notes`函数时，即使我们没有调用它。

`Menu.py`

```
import sys
from notebook import Notebook, Note

class Menu:
    '''Display a menu and respond to choices when run.'''
    def __init__(self):
        self.notebook = Notebook()
        self.choices = {
                "1": self.show_notes,
                "2": self.search_notes,
                "3": self.add_note,
                "4": self.modify_note,
                "5": self.quit
                }

    def display_menu(self):
        print("""
Notebook Menu

1\. Show all Notes
2\. Search Notes
3\. Add Note
4\. Modify Note
5\. Quit
""")

    def run(self):
        '''Display the menu and respond to choices.'''
        while True:
            self.display_menu()
            choice = input("Enter an option: ")
            action = self.choices.get(choice)
            if action:
                action()
            else:
                print("{0} is not a valid choice".format(choice))

    def show_notes(self, notes=None):
        if not notes:
            notes = self.notebook.notes
        for note in notes:
            print("{0}: {1}\n{2}".format(
                note.id, note.tags, note.memo))

    def search_notes(self):
        filter = input("Search for: ")
        notes = self.notebook.search(filter)
        self.show_notes(notes)

    def add_note(self):
        memo = input("Enter a memo: ")
        self.notebook.new_note(memo)
        print("Your note has been added.")

    def modify_note(self):
        id = input("Enter a note id: ")
        memo = input("Enter a memo: ")
        tags = input("Enter tags: ")
        if memo:
            self.notebook.modify_memo(id, memo)
        if tags:
            self.notebook.modify_tags(id, tags)

    def quit(self):
        print("Thank you for using your notebook today.")
        sys.exit(0)

if __name__ == "__main__":
    Menu().run() 
```

`notebook.py`

```
import datetime

# Store the next available id for all new notes
last_id = 0

class Note:
    '''Represent a note in the notebook. Match against a
    string in searches and store tags for each note.'''

    def __init__(self, memo, tags=''):
        '''initialize a note with memo and optional
        space-separated tags. Automatically set the note's
        creation date and a unique id'''
        self.memo = memo
        self.tags = tags
        self.creation_date = datetime.date.today()
        global last_id
        last_id += 1
        self.id = last_id

    def match(self, filter):
        '''Determine if this note matches the filter
        text. Return True if it matches, False otherwise.

        Search is case sensitive and matches both text and
        tags.'''
        return filter in self.memo or filter in self.tags

class Notebook:

    '''Represent a collection of notes that can be tagged,
    modified, and searched.'''

    def __init__(self):
        '''Initialize a notebook with an empty list.'''
        self.notes = []

    def new_note(self, memo, tags=''):
        '''Create a new note and add it to the list.'''
        self.notes.append(Note(memo, tags))

    def _find_note(self, note_id):
        '''Locate the note with the given id.'''
        for note in self.notes:
            if str(note.id) == str(note_id):
                return note
        return None

    def modify_memo(self, note_id, memo):
        '''Find the note with the given id and change its
        memo to the given value.'''
        note = self._find_note(note_id)
        if note:
            note.memo = memo
            return True
        return False

    def modify_tags(self, note_id, tags):
        '''Find the note with the given id and change its
        tags to the given value.'''
        note = self._find_note(note_id)
        if note:
            note.tags = tags
            return True
        return False

    def search(self, filter):
        '''Find all notes that match the given filter
        string.'''
        return [note for note in self.notes if
                note.match(filter)] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T18:22:17.337

函数和方法本身就是对象。所以 dict 包含我们然后调用的对象。

所以 self.choices 是一个以“1”、“2”等为键的字典。这些值是方法对象。当您从字典中获取值时，您会获取该对象（称为“可调用”）并将其分配给`action`. 然后你用`action()`.

代码的关键位是这样的：

```
 self.choices = {
            "1": self.show_notes,
            "2": self.search_notes,
            "3": self.add_note,
            "4": self.modify_note,
            "5": self.quit
            } 
```

`self.choices["1"]`计算为 的值`self.show_notes`，然后将其分配给`action`，然后用 调用`action()`。

（顺便说一句：示例代码中的菜单是硬编码的，但实际上可以自动生成，如果方法具有文档字符串。 `"\n".join("%s: %s" % (key, action.__doc__) for key, action in sorted(self.choices.iteritems()))` 要正确处理具有 >=10 项的菜单，您需要将键设置为整数，或者展开单线。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:24:55.427

`self.choices`是一个方法字典。当您选择“1”时，会发生这种情况：

```
action = self.choices.get("1")  # action = self.show_notes 
```

因此，当您打电话时，`action()`您实际上是在打电话`self.show_notes()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:22:37.297

你在这里调用函数：

```
action = self.choices.get(choice)  # <--- get the function based on user input
if action:
    action()   # <--- call the function here 
```

如果`choice`等于`'1'`上面的代码将分配`self.show_notes`给`action`然后调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:25:27.790

in `menu.py::__init__`,`self.choices`是一个字典，其中键是整数，值是函数。在`menu.py::run`中，选择是从标准输入输入的，用于键入`self.choices`字典。所以这条线

```
action = self.choices.get(choice) 
```

正在将操作设置为 self.choices 中的功能之一。然后可以调用此函数：

```
action() 
```

# python - 无效文档：无法编码对象： 我正在尝试将一个文档 objectID 作为属性（链接）存储到另一个文档中，但 mongo 一直给我这个错误。这行的语法有什么问题？ for u in self.request.db.lyrics.find(): u['forSong'] = self.request.db.song.find({}, {'_id' 问问题 问问题 2012-08-08T18:20:01.277 6890 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在尝试将一个文档 objectID 作为属性（链接）存储到另一个文档中，但 mongo 一直给我这个错误。这行的语法有什么问题？ for u in self.request.db.lyrics.find(): u['forSong'] = self.request.db.song.find({}, {'_id': 1}) self.request.db.lyrics.save(u) 在 .Net 4.0 中打开 InfoPath 表单 我正在将较旧的应用程序从 .Net 2 升级到 .Net 4。该程序使用 infopath 表单，它们在工作时引起了相当多的烦恼。首先，它抛出了 FileLoadException，并显示消息“混合模式程序集是针对运行时的版本‘v2.0.50727’构建的，如果没有额外的配置信息，就无法在 4.0 运行时中加载。” 我做了一些研究并将以下内容添加到我的 app.config 文件中： <startup uselegacyv2runtimeactivationpolicy="true"></startup>然后我从 Visual Studio 中重新运行该应用程序，当它只是尝试打开一个表单时，它现在抛出一个 COMException，并且“此方法显式使用 CAS 策略，该策略已被 .NET Framework 淘汰。为了出于兼容性原因启用 CAS 策略，请使用 NetFx40_LegacySecurityPolicy 配置开关。” 所以我愿意。我将以下内容添加到我的 app.config 文件中： <runtime><netfx40_legacysecuritypolicy enabled="true"></netfx40_legacysecuritypolicy></runtime>现在，当它尝试打开 InfoPath 表单时，它告诉我需要在我的计算机上安装 .Net 3.5。我想我的问题是，我真的必须将 .Net 3.5 框架安装到计算机上才能运行此应用程序，即使它在 .Net 4.0 中？.Net 3.5 的紧凑版本不起作用，我假设这是从 3.5 到 4.0 的所有 CAS 更改，但我希望有一种编程方式来解决这个问题并打开/保存 InfoPath 表单而不必让用户在他们的计算机上安装另一个框架。 pythonmongodbpymongo 4 1 回答 1 This answer is useful 3 问题是find方法的结果是一个游标，而不是一个对象列表 u['forSong'] = self.request.db.song.find({}, {'_id': 1}) 是光标，而不是对象。因此，您必须将返回的光标转换为列表才能完成您的任务： u['forSong'] = list(self.request.db.song.find({}, {'_id': 1})) 这会将{'_id': object-id} 等字典列表保存到“forSong”字段中。要实际接收对象 ID 列表，您必须进行进一步转换，例如： from operator import itemgetter ... u['forSong'] = map(itemgetter('_id'), list(self.request.db.song.find({}, {'_id': 1}))) 于 2012-08-08T18:39:23.617 回答 Related 2 java - java.lang.RuntimeException：将结果 ResultInfo{who=null, request=1, result=-1, data=intent} 传递给活动失败 2 asp.net - 如何制作可配置的 DisplayFormat 属性 1 css - 父div上的div浮动问题 1 objective-c - 如何使用 Objective-C 从 Java 服务器接收缓冲图像 3 java - 冒泡排序数组升序 4 ruby - 正则表达式捕获 html 标签内的多个项目 2 html - 列表元素中的 CSS 对齐精灵 3 c# - 'PlaceHolder 不是已知元素' 警告 1 css - 一般“前一个”相邻 (+) 同级不工作 1 java - 在同一个 TCP 套接字上接收不同类型的对象 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11870714
> 
> 赞同：3
> 
> 时间：
> 
> 标签：python, mongodb, pymongo

我正在尝试将一个文档 objectID 作为属性（链接）存储到另一个文档中，但 mongo 一直给我这个错误。这行的语法有什么问题？

```
for u in self.request.db.lyrics.find():
    u['forSong'] = self.request.db.song.find({}, {'_id': 1})
    self.request.db.lyrics.save(u) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:39:23.617

问题是**find**方法的结果是一个游标，而不是一个对象列表

```
u['forSong'] = self.request.db.song.find({}, {'_id': 1}) 
```

是光标，而不是对象。因此，您必须将返回的光标转换为列表才能完成您的任务：

```
u['forSong'] = list(self.request.db.song.find({}, {'_id': 1})) 
```

这会将**{'_id': object-id} 等字典列表**保存到“forSong”字段中。要实际接收对象 ID 列表，您必须进行进一步转换，例如：

```
from operator import itemgetter
...
u['forSong'] = map(itemgetter('_id'),
                   list(self.request.db.song.find({}, {'_id': 1}))) 
```

# .net - 在 .Net 4.0 中打开 InfoPath 表单

> ID：11870716
> 
> 赞同：0
> 
> 时间：2012-08-08T18:20:10.310
> 
> 标签：.net, .net-4.0, .net-3.5, app-config, infopath

我正在将较旧的应用程序从 .Net 2 升级到 .Net 4。该程序使用 infopath 表单，它们在工作时引起了相当多的烦恼。首先，它抛出了 FileLoadException，并显示消息“混合模式程序集是针对运行时的版本‘v2.0.50727’构建的，如果没有额外的配置信息，就无法在 4.0 运行时中加载。” 我做了一些研究并将以下内容添加到我的 app.config 文件中：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

然后我从 Visual Studio 中重新运行该应用程序，当它只是尝试打开一个表单时，它现在抛出一个 COMException，并且“此方法显式使用 CAS 策略，该策略已被 .NET Framework 淘汰。为了出于兼容性原因启用 CAS 策略，请使用 NetFx40_LegacySecurityPolicy 配置开关。” 所以我愿意。我将以下内容添加到我的 app.config 文件中：

```
<runtime>
    <NetFx40_LegacySecurityPolicy enabled="true"/>
</runtime> 
```

现在，当它尝试打开 InfoPath 表单时，它告诉我需要在我的计算机上安装 .Net 3.5。我想我的问题是，我真的必须将 .Net 3.5 框架安装到计算机上才能运行此应用程序，即使它在 .Net 4.0 中？.Net 3.5 的紧凑版本不起作用，我假设这是从 3.5 到 4.0 的所有 CAS 更改，但我希望有一种编程方式来解决这个问题并打开/保存 InfoPath 表单而不必让用户在他们的计算机上安装另一个框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:41:13.250

事实证明，如果您启用了 ClickOnce 安全性（解决方案属性>安全性>启用 ClickOnce 安全性设置），这将在尝试调试时导致此问题。但是，如果您发布项目（启用 ClickOnce 安全性），您可以打开应用程序并正常使用它。因此，对于调试，禁用 ClickOnce 安全性，对于正常测试和部署，启用它，然后发布项目以供正确使用。

# vba - Outlook VBA 宏无法识别

> ID：11870717
> 
> 赞同：1
> 
> 时间：2012-08-08T18:20:16.033
> 
> 标签：vba, outlook, email-attachments

我很难让 Outlook 2010 VBA 识别我直接从网络复制的宏。该宏应该从电子邮件中提取附件的副本并将其保存到本地文件夹。它在几天前工作，但现在，当我尝试在 VBA 中运行代码时（itm as Outlook.MailItem），Outlook 无法将其识别为任何类型的宏。当我把它拿出来只留下括号时，它显示为一个宏，但我得到一个 424 object required 错误并且无法运行宏。如果我这样做是该死的，如果我不这样做是该死的。

这是原始代码：

```
Public Sub saveAttachtoDisk(itm as Outlook.MailItem)
Dim objAtt As Outlook.Attachment
Dim saveFolder as String

saveFolder = "c:\temp\"
    For Each objAtt In itm.Attachments

        objAtt.SaveAsFile savefolder & "\" & objAtt.DisplayName

        Set objAtt = Nothing

    Next

End Sub 
```

我已经尝试了一切，但似乎没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:05:31.977

“那个代码会是什么样子？它会去哪里？”

您可以通过单击 Alt-F11 打开 Outlook Visual Basic 编辑器，然后将此代码粘贴到之前版本的宏上。它目前可能在“此 Outlook 会话”中。

您可以按照您一直在尝试的方式从宏对话框中运行它。或者，您可以通过单击文件>选项>自定义功能区将其附加到功能区按钮。您还必须在“开发人员”选项卡中将“宏安全性”设置为“所有宏的通知”。当您在任何给定的 Outlook 会话中第一次单击它时，它将要求您确认是否可以安全运行。

```
Public Sub saveAttachtoDisk()

Dim saveFolder As String
Dim objAtt As Outlook.Attachment
Dim itm As Outlook.MailItem

saveFolder = "c:\temp\"
For Each itm In ActiveExplorer.Selection
    For Each objAtt In itm.Attachments
        objAtt.SaveAsFile saveFolder & "\" & objAtt.DisplayName
        Set objAtt = Nothing
    Next objAtt
Next itm
End Sub 
```

此子将附件保存在当前打开的文件夹中的所有选定项目中。您可以将其调整为仅执行当前选定文件夹或静态文件夹（例如收件箱）中的所有项目。为此，您需要熟悉 Outlook 对象模型。JimmyPena 的回答给出了一个使用所有收件箱项目的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:19:12.133

由于代码包含一个参数，因此您需要通过从另一个过程调用此过程来传递该参数。前任：

```
Sub CallMyProcedure()

Dim itms As Outlook.Items
Dim itm As Object

' loop through default Inbox items
Set itms = Session.GetDefaultFolder(olFolderInbox).Items

For Each itm In itms
  If TypeName(itm) = "MailItem" Then
    ' your code is called here
    saveAttachtoDisk itm
  End If
Next itm

End Sub 
```

**这**是您需要调用的过程，由于它没有参数，您应该能够在宏对话框中看到它。

# c# - 现有文件部分的锁定检查

> ID：11870718
> 
> 赞同：2
> 
> 时间：2012-08-08T18:20:24.867
> 
> 标签：c#, asp.net, .net, multithreading, locking

在我的网站中，我使用控制器生成图像缩略图。我的代码看起来像：

```
var filePath = getThumbnailPath(); 
if (!File.Exists(filePath) 
{
    ... create thumbnail  
}    
return new Filestream(...) 
```

问题是，如果两个用户请求相同的缩略图并且如果没有创建它，我将在创建它时遇到异常。如何在不引入太多开销的情况下有效地使用文件名对象上的锁？

Aristos 评论后重构代码：

```
 Mutex m = new Mutex(false, originalImagePath);
 m.WaitOne();
 try
 {
     if (!File.Exists(originalImagePath))
     { 
          ... create thumbnail
     }
 }
 finally
 {
     m.ReleaseMutex();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:27:54.207

将缩略图的创建委托给其他服务。用户将*产生*创建缩略图的请求。另一个服务将*使用*此请求并执行实际工作。

什么是服务，你可以自己选择。它可以是 WCF 服务、Windows 服务、消息队列或其他东西。

直接在 ASP.NET 网站中使用锁定通常不是一个好主意，因为它会引入瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:01:17.337

ASP.NET 站点的概念是能够运行多个进程（例如网络农场等）。 `lock`仅在单个进程中锁定。如果出于某种原因，您的代码在多个进程中运行，您将回到同样的问题。

此外，您对字典的使用需要是线程安全的。事实上，它可以为同一个文件名写入多个值。

我建议使用命名的`Mutex`. 这允许跨进程互斥。互斥锁的名称可以只是文件名。不需要字典。

向另一个服务发出网络请求似乎会给对您站点的请求引入更多延迟。（例如，向您的站点请求图像需要向此“服务”发出辅助网络请求以获取图像 - 或获取图像的位置）。

# javascript - node.js 惊人地保持对大量 tcp 客户端的存活

> ID：11870721
> 
> 赞同：1
> 
> 时间：2012-08-08T18:20:39.640
> 
> 标签：javascript, node.js, asynchronous, tcp, scalability

我正在尝试将保持活动从服务器发送到一堆 tcp 客户端。为了减少响应的服务器负载，我想将保持活动分开。

如果我有 3000 个 tcp 客户端，并且保持活动间隔为 60 秒，我需要在 60 秒内错开保持活动消息并每秒发送 50 个保持活动。

假设：

1.  大量 tcp 连接（以千计）
2.  Tcp 连接持续存在，预计至少会活跃几个小时
3.  如果客户端不再连接，服务器需要在 60 秒内知道
4.  来自服务器和客户端的其他信息将来回发送
5.  来自客户端的保持活动返回消息包含有用的数据（我认为排除了 UDP）

目前，我的想法是将我的 tcp 连接存储为标准的 javascript 对象，并将一些 id 映射到特定的连接本身。然后，每一秒，我都会得到这个对象的键数组，并将保持活动状态发送到其中的某些部分。

这是一个好方法吗？有没有更好的方法或其他我应该考虑的事情？

我最初解决问题的示例代码：

```
var KEEP_ALIVE_INTERVAL = 1000; // time between groups
var KEEP_ALIVE_CYCLE = 3; // number of groups
var tcp_conns = {
    a:"a",
    b:"b",
    c:"c",
    d:"d",
    e:"e",
    f:"f",
    g:"g",
    h:"h",
    i:"i"
};

var intervalCounter = 0;
setInterval(function() {

    console.log("sending keep alives intervalCounter="+intervalCounter);

    var numConns = Object.keys(tcp_conns).length;
    var connFactor = Math.ceil( numConns / KEEP_ALIVE_CYCLE );
    var lowerLimit = connFactor*intervalCounter-1;
    var upperLimit = connFactor*(intervalCounter+1);

    console.log("connFactor="+connFactor+", limits=["+lowerLimit+","+upperLimit+"]");

    // Is this even async???
    var keys = Object.keys(tcp_conns)
    for (var i = 0; i < keys.length; i++) {
        if(i>lowerLimit && i<upperLimit){
            var key = keys[i]
            var val = tcp_conns[key]
            console.log(" id="+key+" => "+val);
        }
    }

    intervalCounter++;
    if(intervalCounter==KEEP_ALIVE_CYCLE){
        intervalCounter=0;
    }
}, KEEP_ALIVE_INTERVAL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:33:17.010

我不是显式管理包含所有连接的集合，而是每 45 秒到 75 秒随机发送一次保持活动。这样，keep-alives 将随着时间的推移而传播。我不确定以下代码是否按原样工作，但您会了解基本概念。

*   我假设“PONG”作为一个单独的块到达，但情况可能并非如此。
*   小心避免泄漏听众。在这里，我在发送 PING 时添加了一个“数据”处理程序，并在收到 PONG 时将其删除。不是最有效的解决方案。

这是代码：

```
var KEEP_ALIVE_TIMEOUT = 120*1000,
    MIN_KEEP_ALIVE = 45*1000,
    MAX_KEEP_ALIVE = 75*1000;

function randomInt(min, max) {
    return Math.random()*(max - min) + min;
}

net.createServer(function(conn) {
  function ping() {
     var keepAliveTimer = setTimeout(function() {
       conn.destroy();
       console.log('timeout !');
     }, KEEP_ALIVE_TIMEOUT);

     conn.write('PING\r\n');

     conn.on('data', function onData(chunk) {
        if(chunk.toString() !== 'PONG\r\n')
          return handleSomethingElse();

        clearTimeout(keepAliveTimer);
        conn.removeListener('data', onData);
        setTimeout(ping, randomInt(MIN_KEEP_ALIVE, MAX_KEEP_ALIVE));
     });
  }

  ping();
}); 
```

# php - 实现自动注销

> ID：11870724
> 
> 赞同：2
> 
> 时间：2012-08-08T18:20:55.583
> 
> 标签：php, javascript, html, web-applications

我需要一种在 10 分钟不活动后自动注销用户的方法。这包括他们离开浏览器的时间。

我将此代码用于所有需要登录的页面：

```
function CheckLogin()
{
     if(!isset($_SESSION))
     { 
     session_start();

     }

     $sessionvar = $this->GetLoginSessionVar();

     if(empty($_SESSION[$sessionvar]))
     {
        return false;
     }
     return true;
} 
```

另外，我以前的做法是需要一个人回到主页，然后他们会自动注销。他们是否可能不需要返回页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:24:18.710

是的。`session.gc_maxlifetime`正是您正在寻找的：

```
ini_set('session.gc_maxlifetime', 600); 
```

[http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:01:36.070

有两种方法可以实现超时。一个来自服务器端，一个来自客户端。可以说服务器端实现更重要，因为客户端功能只提供更愉快的用户体验，并且无论如何实际上并不与您的应用程序的身份验证进行交互。

**服务器端**

您需要一个登录检查功能来确保用户已登录。您在问题中提到了一个伪功能，所以我将从那里扩展。

```
 function CheckLogin()
 {
      // Is the user logged in?
      if(session does not exist)
      {
           // redirect
           // redirect or return false
      }
      else
      {
           if(session is valid)
           {
                // user is logged in
                // redirect or return true
           }
           else
           {
                // redirect or return false
           }
      }
 } 
```

**客户端**

您需要 jquery 和 Jim 链接到的插件[http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/](http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/)。创建并链接到 Javascript 文件并将其包含在站点范围内。按照插件链接中的文档进行操作。这是相当彻底的。

将与会话相关的任何 cookie（如果有）设置为 10 分钟后超时也符合您的最佳利益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:27:28.633

还有一个名为 idle timeout 的 JQuery 插件，效果很好。设置两个或三个参数，包括超时时将人发送到哪里。这是链接[http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/](http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/)

# java - 错误令牌异常 - 无法添加 Window 。仅在活动重启后发生

> ID：11870728
> 
> 赞同：4
> 
> 时间：2012-08-08T18:20:59.350
> 
> 标签：java, android, exception, views, android-view

所以，我有这段代码，我在其中执行 HttpPost 并等待返回给处理程序的响应。在处理程序块中，我显示了一个 ProgressDialog。在我使用此代码重新启动活动之前，一切似乎都正常

```
Intent intent = getIntent();
finish();
startActivity(intent); 
```

第一个处理程序的代码是这个

```
private Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if (0 < msg.what) {
        } else {
            if (msg.getData() != null) {
                String s = msg.getData().getString(getResources().getString(R.string.BundleTextKey));
                if (s!=null) {
                                try{
                                    POSTMethods post_obj = new POSTMethods(messageHandleralert,context);
                                    String sender = ValuesHolder.user;
                                    mprogDialog = ProgressDialog.show(Tab_Activity.this, "", "creating pending request");
                                    post_obj.createPendingRequest(sender);

                                }
                                catch(Exception e){
                                    e.printStackTrace();
                                    Toast.makeText(Tab_Activity.this, "Try Again", Toast.LENGTH_LONG).show();
                                }
                }
            }
        }
    }
}; 
```

我通过 createPendingRequest 进行 Post 调用，此响应由另一个处理程序处理，即

```
public Handler messageHandleralert = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);

        switch(msg.what){
        case 5:
            try{
                HashMap<String, String> map = new HashMap<String, String>();
                DateClass date_obj = new DateClass();
                String date = date_obj.getDate();
                map.put("date",date);
                map.put("sender_email", sender);
                mOutAdapter.insert(map, 0);
                mprogDialog.dismiss();
                String sData = date+" "+sender;
                System.out.println(active);
                showAlert showDialog = new showAlert(mOutAdapter,context,null,null);
                AlertDialog.Builder alert = showDialog.createAlert("Received Payment Request", "Confirm Details of the Payee", true, false,true,sData);
                alert.show();
            }
            catch(Exception e){
                e.printStackTrace();
                mprogDialog.dismiss();
                Toast.makeText(Tab_Activity.this, "Error... Do it Again", Toast.LENGTH_LONG).show();
            }
            break;
        case 6:
            try{
                Toast.makeText(Tab_Activity.this, "Error. Check Connection and Try Again", Toast.LENGTH_LONG).show();
                mprogDialog.dismiss();
            }
            catch(Exception e){
                e.printStackTrace();
            }
            break;
        default:
            break;
        }
    }
}; 
```

所以错误出现在我的第一个处理程序块的 ProgressDialog 行。

```
mprogDialog = ProgressDialog.show(Tab_Activity.this, "", "creating pending request"); 
```

这是

```
android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@41520070 is not valid; is your activity running? 
```

实际上，我可以通过不显示任何进度来摆脱这条线。但是我的第二个处理程序块中的 AlertDialog 是必需的，它在活动重新启动时会引发相同的错误。

我试过包括

```
(!isFinishing()) 
```

但这不起作用。如果我使用它，则在活动重新启动时永远不会到达该代码。

有没有办法解决这个问题？还是我做错了什么？一些帮助甚至链接将不胜感激

日志猫：

```
android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@414f3fa8 is not valid; is your activity running?
at android.view.ViewRootImpl.setView(ViewRootImpl.java:646)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:301)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
at android.view.Window$LocalWindowManager.addView(Window.java:537)
at android.app.Dialog.show(Dialog.java:278)
at android.app.ProgressDialog.show(ProgressDialog.java:116)
at android.app.ProgressDialog.show(ProgressDialog.java:99)
at android.app.ProgressDialog.show(ProgressDialog.java:94)
at org.example.pay.Tab_Activity$1.handleMessage(Tab_Activity.java:159)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4514)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method) 
```

# symfony - 保护特定用户在 Symfony 2 中上传的内容

> ID：11870731
> 
> 赞同：2
> 
> 时间：2012-08-08T18:21:17.017
> 
> 标签：symfony

我正在关注 Symfony 2 网站上的[上传教程](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)，我将上传到：

```
web/uploads/{user_salt}/{upload_unique_random_name}.ext 
```

这对于公共可访问文件来说很好。但是如何保护某些文件？例如，在上传表单中，用户可以将文件设为“公开”或“私有”。我应该如何处理这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:37:59.827

我不会公开文件，而是将它们存储在私有位置（`web`目录外），创建一个 Bundle 和一个控制器，并在控制器中有一个操作，该操作采用文件 ID 并查找其访问级别从数据库表。如果该文件可公开访问，请提供该文件。如果没有，请确保用户有权查看该文件。

您只需要创建一个`File`实体和一个表，该表存储用户或用户角色对这些文件的权限，以便您可以根据请求交叉检查它们。

但是，它会增加一些服务文件的开销，因为需要进行完整的 Symfony2 请求，而直接通过 apache 或 nginx 提供文件不会有框架堆栈的开销。

希望我已经解释得足够好。

编辑：

如果您通过使用令牌（例如通过电子邮件）提供这些图像，那么您可以按照以下方式进行操作......

示例图像`src`属性：http: [//yourdomain.com/assets/12/TOKEN](http://yourdomain.com/assets/12/TOKEN)

这个路由配置看起来像这样（在 YAML 中）：

```
assets_serve:
    pattern: /assets/{id}/{token}
    defaults: { _controller: AcmeAssetBundle:Assets:serve }
    requirements:
        _method: GET 
```

在您的`AcmeAssetBundle`中，您将有一个`AssetsController`with`serve`操作：

```
class AssetController extends Controller
{
    public function serveAction($id, $token = null)
    {
        //fetch asset record from the database -- which also contains its file path
        //check the TOKEN matches the one stored against this image
        //set content-type headers and serve the image
    }
} 
```

# ios5 - 如何将一个 UIView 拖到另一个 UIView 上并交换这两个视图？

> ID：11870741
> 
> 赞同：0
> 
> 时间：2012-08-08T18:22:09.513
> 
> 标签：ios5, uiview

我在一个窗口中添加了 4 个视图，并且可以使用***touchesMoved***方法移动这些视图。我的问题是，如果我在 view2 上拖动 view1，view1 和 view2 的位置将被交换。同样，如果我在 view3 或 view4 上拖动 view1，则必须交换这两个视图的位置。

我怎样才能做到这一点？

提前感谢，抱歉语言不好！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:45:51.353

我找到了答案。感谢您的关注 ！！！

我使用 if 条件检查哪个视图正在移动，然后我再次检查了触摸点是否与另一个视图的中心点重叠。如果它返回是，那么我交换了两个视图的颜色。

# c++ - C++中的循环函数参数奇数

> ID：11870743
> 
> 赞同：1
> 
> 时间：2012-08-08T18:22:15.223
> 
> 标签：c++

在我当前的项目中，我偶然发现了一个奇怪的现象，即嵌套的 for 循环只会执行一次内部循环，然后就停止。即使仔细检查了所有涉及的变量，外部 for 循环仍然无故终止。使这种构造与我的程序中包含的其他 for 循环不同的唯一一点是，计数器变量作为参数传递给包含循环的函数，并且从未复制到任何地方。

所以我决定测试一下问题是否可以重现：

```
#include <stdio.h>

void someFunction(int x, int y, int width, int length)
{
    int endX = x+width;
    int endY = y+length;

    printf("x will not exceed: %i\n", endX);
    printf("y will not exceed: %i\n", endY);

    for(; x < endX; x++)
    {
        for(; y < endY; y++)
        {
            printf("(%i, %i)\n", x, y);
        }
    }
}

int main(int argc, const char *argv[])
{
    someFunction(1, 1, 5, 5);
    return 0;
} 
```

然而，在执行时，应用程序的输出与直观的预期不同：

```
x will not exceed: 6
y will not exceed: 6
(1, 1)
(1, 2)
(1, 3)
(1, 4)
(1, 5) 
```

切换 x 和 y 时的行为类似，但 y 变量从不递增。这个问题通过简单地声明一个新变量作为每个循环的计数器来解决。

但是为什么会这样呢？是否因特定原因而被禁止？编译器是否禁用对某些参数的修改，如果是，为什么它对一个变量起作用，而对另一个变量不起作用？

提供的源代码是用 GCC/G++ 4.5.3 编译的，没有任何特殊的优化标志。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T18:24:17.813

`y`永远不会在`x`循环中被重置，所以一旦它在第一次通过时越界，它就会永远保持在界外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:45:32.110

由于`x`and`y`也存在于循环之外，并且由于循环没有设置它们的初始值，因此即使重用它们也会保留最后一个值。这尤其是关于您的`y`, 在 y 循环退出后不会回退到初始值。

为避免此类问题，请避免使用循环外部的变量作为索引。

```
void someFunction(const int x, const int y, const int width, const int length)
{
    int endX = x+width;
    int endY = y+length;

    printf("x will not exceed: %i\n", endX);
    printf("y will not exceed: %i\n", endY);

    for(int ix=x; ix < endX; ++ix)
    {
        for(int iy=0; iy < endY; ++iy)
        {
            printf("(%i, %i)\n", ix, iy);
        }
    }
} 
```

在这里，通过使参数 const 我们确保我们不能触摸它们，即使是错误的。然后我们使用循环本地的 ix 和 iy 来处理迭代。

此外，除非出于其他原因必须避免使用后缀增量，并使用前缀。在您使用整数之前，这并不是一个很大的变化，但是使用更复杂的变量可以有所作为。

如果您避免像 C 程序员那样编写代码，这也是一个好主意（因为您将问题标记为`C++`而不是）。`C`

惯用的 C++ 等价物是这样的：

```
#include <iostream>

void someFunction(const int& x, const int& y, const int& width, const int& length)
{
    const int endX = x+width;
    const int endY = y+length;

    std::cout << "x will not exceed: " << endX << std::endl;
    std::cout << "y will not exceed: " << endY << std::endl;

    for(int ix=x; ix < endX; ++ix)
    {
        for(int iy=y; iy < endY; ++iy)
        {
            std::cout << '('<<ix<<", "<<iy<<')'<< std::endl;    
        }
    }
}

int main()
{
    someFunction(1, 1, 5, 5);
    return 0;
} 
```

# c# - 在带有 Telerik 的 Razor Web 助手中使用 html 助手

> ID：11870754
> 
> 赞同：1
> 
> 时间：2012-08-08T18:22:53.897
> 
> 标签：c#, asp.net-mvc-3, html-helper

我尝试使用 Telerik 的控件创建一个 html 帮助程序，但要做到这一点，我必须在文件顶部有这个指令：

@使用 Telerik.Web.Mvc.UI

问题出在 html 助手中，当我输入“@using”然后尝试输入“Telerik”时，Visual Studio 告诉我，即使我已经在同一个项目的许多其他地方使用了这个指令，命名空间也不存在。

![在此处输入图像描述](../Images/59c55f56e926d5b595d926c71acb41ae.png)

正如你看到的红色字样，Telerik 命名空间产生错误；'无法解析符号...

这是同一项目的我的 EditorTemplates 文件夹之一中的相同代码，但在这种情况下，没有错误：

![在此处输入图像描述](../Images/c69ad35773129a7d33d6242c3058826f.png)

是因为除了 MVC 框架之外无法进行控制还是我错过了什么？

谢谢你。

编辑：

经过搜索并在达林的帮助下，我终于找到了问题所在。您可以查看 Darin answer 的评论。

此外，这是我最终的有效代码：

```
@using System.Web.Mvc
@using Telerik.Web.Mvc.UI

@helper IntegerTextBox(System.Web.Mvc.HtmlHelper html, string id, int? value, bool enable = true)
{
   @(html.Telerik().IntegerTextBox()
        .Name(id)
        .InputHtmlAttributes(new {style = "width:200px"})
        .Spinners(false)
        .EmptyMessage("")
        .MaxValue(int.MinValue)
        .MaxValue(int.MaxValue)
        .Value(value)
        .Enable(enable)
        )
} 
```

就像我说的那样，您不能对 System.Web.Mvc 使用 @using 指令来减少第一个参数的完全限定类型。我不知道为什么......'HtmlHelper'看起来像'html helper'或'@helper'......这个词与MVC框架中的某些东西冲突？我不知道！？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:24:47.197

我想这是由于 Visual Studio 中糟糕的 Razor Intellisense 支持造成的。您的代码在运行时应该可以正常工作。您可以尝试重新打开视图，重新启动 VS，禁用插件，如果这是您的幸运日，您甚至可以让 Intellisense 正常工作。

顺便说一句，您可以使用您的`<namespaces>`部分`~/Views/web.config`（不要与 混淆`~/web.config`）并添加`Telerik.Web.Mvc.UI`名称空间。这将避免您将其添加到每个需要它的 Razor 视图中。显然，要在修改此文件后使更改生效，请不要忘记重新打开 razor 页面（正如我已经说过的 Razor Intellisense 在 VS 中很糟糕）。

# asp.net - 如果 IIS 产生 400：错误请求，我的 HttpModule 会被调用吗？

> ID：11870758
> 
> 赞同：0
> 
> 时间：2012-08-08T18:23:16.067
> 
> 标签：asp.net, iis-6, localhost, httpmodule, isapi

我有一个 ASP.NET 网站，但无法捕获一些给我带来麻烦的特定请求。该网站调用它也托管的 asmx Web 服务（因此对**(http://localhost/whatever.asmx)**进行 Web 服务调用）。我收到了 400: Bad Request 回复，所以我想弄清楚正在发出什么请求。

我不能使用像 wireshark 这样的东西，因为它是对 localhost 的调用。我现在正在尝试的是实现和注册一个 HttpModule 来记录请求。我不认为我的 HttpModule 会因为这些请求而被调用，但是当我在另一台请求通过的机器上尝试时，它每次都会被命中。

IIS 在我的 HttpModule 被命中之前返回 400: Bad Request 吗？还有什么我可以挂钩来记录请求的吗？

**编辑：**
我开始认为我需要某种 ISAPI 过滤器或扩展。对此一无所知，如果这是适当的行动方案，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:47:27.473

根据[本文](http://support.microsoft.com/?id=820729)，一些错误永远不会到达应用程序错误处理代码。“基于 HTTP 的应用程序中发生的一些错误由 HTTP API 自动处理，而不是传递回应用程序进行处理。发生这种行为是因为此类错误的频率可能会淹没事件日志或应用程序处理程序。”

此类错误的示例：400、一些 500、503、连接超时等。

它们似乎只在 HTTP.sys "httperr#.log" 文件中可用；同一篇文章描述了这些日志文件的位置和格式。

另请参阅：[如何解决 HTTP 400 错误](http://blogs.msdn.com/b/webtopics/archive/2009/01/29/how-to-troubleshoot-http-400-errors.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:50:03.717

它不应该击中实际页面，但 IIS 仍会将尝试记录在日志中。

日志文件的确切位置不同，可以在 IIS 管理器中查看。通常 IIS 日志在 C:\WINDOWS\system32\LogFiles\W3SVC1

# if-statement - emacs lisp：如果找不到字符串，则插入字符串

> ID：11870760
> 
> 赞同：1
> 
> 时间：2012-08-08T18:23:16.970
> 
> 标签：if-statement, elisp

我正在尝试编写一个函数，该函数将（1）在给定文件中搜索给定字符串，以及（2）如果文件不包含字符串，则将字符串添加到文件中。到目前为止，我有这个：

```
(setq nocite-file "~/Dropbox/docs/school/thesis/_nocites.tex")

(defun add-nocite-prompt (key)
  "Prompts for a BibTex key.  If that key does not already exist in the file
nocite-file, add-nocite-prompt appends a \nocite{} instruction to that file."
  (interactive "sBibTex Key: ")
;; check for definition of nocite-file, else prompt
  (unless (boundp 'nocite-file)
    (setq nocite-file (read-from-minibuffer "Define nocite-file: ")))
  (setq nocite-string (concat "\\nocite{" key "}\n"))
  (with-current-buffer (find-file-noselect nocite-file)
    (goto-char (point-min))
    (unless (search-forward nocite-string)
      (lambda ()
    (goto-char (point-max))
    (insert nocite-string))))) 
```

但是，当我运行它时，emacs 会告诉我`Search failed: "\\nocite{test-input} "` 这很好，但是当搜索失败时，它并没有做任何我希望它做的事情。我不知道我的除非声明有什么问题。

理想情况下，该函数会将字符串附加到后台文件中并保存，而无需手动保存和终止缓冲区，但我还没有解决这部分问题。计划是将它绑定到击键，这样我就可以输入 BibTex 键而不会中断工作流程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:56:27.827

您的代码中有两件事需要修复。

首先，查看文档，因为`search-forward`它告诉您使用第三个参数来确保不会引发错误。

第二，`lambda`不为所欲为。Lambda 定义了一个新函数，但您要做的是评估一个连续执行两个函数的函数。你应该`progn`为此使用。

这是修改后的代码，添加了自动保存文件的功能。

```
(defun add-nocite-prompt (key)
  "Prompts for a BibTex key.  If that key does not already exist in the file
nocite-file, add-nocite-prompt appends a \nocite{} instruction to that file."
  (interactive "sBibTex Key: ")
;; check for definition of nocite-file, else prompt
  (unless (boundp 'nocite-file)
    (setq nocite-file (read-from-minibuffer "Define nocite-file: ")))
  (setq nocite-string (concat "\\nocite{" key "}\n"))
  (with-current-buffer (find-file-noselect nocite-file)
    (goto-char (point-min))
    (unless (search-forward nocite-string nil t)
      (progn
    (goto-char (point-max))
    (insert nocite-string)
    (save-buffer))))) 
```

# ruby-on-rails - NoMethodError：运行 rspec 并进行 get/visit 调用时未定义方法“get”

> ID：11870763
> 
> 赞同：6
> 
> 时间：2012-08-08T18:23:18.457
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, rspec2

我完全被困在这里，希望有人能指出我正确的方向。我正在尝试使用 rspec 来测试我的网络路由。我按照这里的例子：

[https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec](https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec)

我的规范文件被命名为：规范/请求文件夹中的api_tests_spec.rb。

该文件如下：

```
require 'spec_helper'

describe "APITests" do
  describe "GET /regions"  do
    it "should return a valid response" do
      # Run the generator again with the --webrat flag if you want to use webrat methods/matchers
      get "/regions.json"
      response.status.should be(200)
      #print response.body
    end
  end
end 
```

不幸的是，我收到的失败消息如下：

1) APITests GET /regions 应该返回一个有效的响应 Failure/Error: get "/regions.json" NoMethodError: undefined method `get' for # # ./api_tests_spec.rb:7

有没有人知道为什么找不到该方法？我读过的所有内容似乎都表明没有正确包含某些内容，但解决方案似乎总是将文件移动到请求文件夹中（我的文件夹已经存在）。提前致谢！

spec_helper.rb 文件如下所示：

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T21:19:44.960

好的，在我发布的第一个答案似乎有点工作之后，它停止了（仍然不确定为什么？！）

但是，对 api_tests_spec.rb 文件进行此更改可以修复它：

```
require 'spec_helper'

describe "APITests", :type => :request do
  describe "GET /regions"  do
    it "should return a valid response" do
      # Run the generator again with the --webrat flag if you want to use webrat methods/matchers
      get "/regions.json"
      response.status.should be(200)
      #print response.body
    end
  end
end 
```

有谁知道为什么需要 :type => :request ？我想只要把它放在它下面的请求文件夹中就应该假设它们是请求？

# javascript - 具有多种排序的 Backbone.js 集合

> ID：11870764
> 
> 赞同：5
> 
> 时间：2012-08-08T18:23:19.413
> 
> 标签：javascript, sorting, collections, backbone.js

我有一个包含名称和日期的待办事项列表。我希望能够使用标题或日期对列表进行排序。我该怎么做？比较器只允许一种类型的排序。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T23:45:22.427

可以在比较器中实现更多逻辑，以便您可以抽象出一些排序逻辑：

```
var Collection = Backbone.Collection.extend({

    model: myModel,
    order: 'name'

    comparator: function(model) {
        if (this.order === 'name') {
            return model.get('name');
        } else {
            return model.get('date'); //or modify date into a numeric value
        }
    }
}); 
```

然后更改您希望它的排序方式：

```
myCollection.order = 'date';
myCollection.sort(); 
```

这将调用比较器函数并以这种方式对其进行排序。

您可以在视图中收听度假村：

```
this.listenTo(myCollection,'sort',this.render); 
```

这有一个额外的好处，即每次添加模型时，它都会调用比较器并使用您当前的设置对其进行排序，因为排序方法存储在集合中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:46:27.100

您可能需要在[这里查看答案](https://stackoverflow.com/questions/8921667/backbone-js-collection-comparator-sort-by-multiple-fields)，这是该帖子中提供的解决方案：

```
comparator: function(item) {
    return [item.get("level"), item.get("title")]
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:38:19.567

我想我找到了一个方法：

```
collection.reset(collection.sortBy(function(item){
    return item.get(sortingFIeld);
})) 
```

其中 sortBy 返回一个新的排序数组，该数组作为参数传递给 reset。SortingField 是模型的字符串属性。

# php - 使用数组存储累计数

> ID：11870770
> 
> 赞同：1
> 
> 时间：2012-08-08T18:23:56.007
> 
> 标签：php, arrays

我创建了一个 for(...) 循环，我计划在其中遍历数组的值并使用这些值将它们累积到另一个数组中，但是我收到来自 Apache 的通知，上面写着**Notice: Undefined offset: .. ...** _ 我正在使用的代码是这样的：

```
for ($a=0;$a<count($original_array);$a++){
    $accumulate_array[$a] += $original_array[$a]
} 
```

我认为通知来自我执行“+=”的部分，因为它正在执行以下操作：

```
$accumulate_array[$a] = $accumulate_array[$a] + $original_array[$a] 
```

我认为它引用了一个仍然不存在的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:25:38.467

如果您还没有这样做，您必须在使用前声明您的表：

```
$accumulate_array = array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:27:58.920

你是对的，通知是因为这条线：

```
$accumulate_array[$a] += $original_array[$a]; 
```

因为它扩展为：

```
$accumulate_array[$a] = $accumulate_array[$a] + $original_array[$a]; 
```

并且`$accumulate_array[$a]`是未定义的，虽然它正在尝试获取该值。因此，如果您正在创建一个运行总和，您可能希望将其初始化为零，如下所示：

```
if( !isset( $accumulate_array[$a] )) $accumulate_array[$a] = 0;
$accumulate_array[$a] = $accumulate_array[$a] + $original_array[$a]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:29:48.033

首先，声明新的（空）数组：

```
$accumulate_array = array(); 
```

然后，根据需要推送：

```
for ($a=0; $a<count($original_array); $a++){
    array_push($accumulate_array, $original_array[$a]); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:33:49.250

只需添加检查不存在的索引。而且，为什么不使用`foreach`数组迭代呢？

```
foreach($original_array as $key => $value) {
    if (!empty($accumulate_array[$key])) {
        $accumulate_array[$key] += $original_array[$key];
    } else {
        $accumulate_array[$key] = 0;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T18:34:21.207

使用`foreach`. 您的数组索引似乎不是顺序/整数键。

# angularjs - 每次它使用的数据发生变化时，如何让 AngularJS 重新运行一个函数？

> ID：11870771
> 
> 赞同：6
> 
> 时间：2012-08-08T18:23:58.827
> 
> 标签：angularjs

有了淘汰赛，我可以说

```
<html>
    <head>
        <script type="text/javascript" src="knockout-2.1.0.js"></script>
    </head>
    <body>
        <input type="text" data-bind="value: a"></input> +
        <input type="text" data-bind="value: b"></input> =
        <span data-bind="text: result"></span>
        <script type="text/javascript">
            function ExampleViewModel() {
                this.a = ko.observable(5);
                this.b = ko.observable(6);
                this.result = ko.computed(function() {
                    return parseInt(this.a()) + parseInt(this.b());
                }, this);
            }

            ko.applyBindings(new ExampleViewModel());
        </script>
    </body>
</html> 
```

并且`result`每次 a 和 b 变化时都会重新计算。我怎样才能让 AngularJS 为我做这件事？我努力了

```
<html ng-app>
    <head>
        <script type="text/javascript" src="angular-1.0.1.min.js"></script>
        <script type="text/javascript">
            function ExampleCtrl($scope) {
                $scope.a = 5;
                $scope.b = 6;
                $scope.result = function() {
                    return this.a + this.b
                };
            }

</script>
    </head>
    <body ng-controller="ExampleCtrl">
        <input type="text" value="{{ a }}"></input> +
        <input type="text" value="{{ b }}"></input> =
        {{ result() }}
    </body>
</html> 
```

多读几遍后，我发现`ng-change`：

```
<html ng-app>
    <head>
        <script type="text/javascript" src="angular-1.0.1.min.js"></script>
        <script type="text/javascript">
            function ExampleCtrl($scope) {
                $scope.a = 5;
                $scope.b = 6;
                $scope.result = function() {
                    return parseInt($scope.a) + parseInt($scope.b)
                };
            }

</script>
    </head>
    <body ng-controller="ExampleCtrl">
        <input type="text" ng-model="a" ng-change="result()"></input> +
        <input type="text" ng-model="b" ng-change="result()"></input> =
        {{ result() }}
    </body>
</html> 
```

但这需要我跟踪 change`a`或`b`changes的事实`result()`，是否有任何自动检测方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T18:34:59.453

每当模型在您的输入中通过[ng-model](http://docs.angularjs.org/api/ng.directive%3angModel)绑定时发生更改时，您的`result()`函数将被重新评估， 如下所示：

```
<input type="text" ng-model="a"></input> 
```

代替：

```
<input type="text" value="{{ a }}"></input> 
```

# sql-server - 使用 JBOSS Tools 3.3 和 JBOSS 7.1 获取 SQL Server 2008 数据库时出错

> ID：11870774
> 
> 赞同：0
> 
> 时间：2012-08-08T18:24:14.917
> 
> 标签：sql-server, hibernate, jboss, jboss-tools

尝试使用 JBOSS 工具创建休眠配置（以访问 SQLServer 2008 中的数据库模式）时出现错误。

创建 Hibernate 映射文件（一个空的）和 Hibernate 配置文件以及控制台配置后，我尝试在 Hibernate 配置中打开数据库，我收到此错误：

```
org.hibernate.exception.JDBCConnectionException: Getting database metadata
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
at org.hibernate.cfg.reveng.dialect.AbstractMetaDataDialect.getMetaData(AbstractMetaDataDialect.java:63)
at org.hibernate.cfg.reveng.dialect.AbstractMetaDataDialect.caseForSearch(AbstractMetaDataDialect.java:163)
at org.hibernate.cfg.reveng.dialect.JDBCMetaDataDialect.getTables(JDBCMetaDataDialect.java:22)
at org.hibernate.cfg.reveng.JDBCReader.processTables(JDBCReader.java:476)
at org.hibernate.cfg.reveng.JDBCReader.readDatabaseSchema(JDBCReader.java:74)
at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter$2.execute(LazyDatabaseSchemaWorkbenchAdapter.java:126)
at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
at org.hibernate.console.ConsoleConfiguration.execute(ConsoleConfiguration.java:107)
at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.readDatabaseSchema(LazyDatabaseSchemaWorkbenchAdapter.java:115)
at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.getChildren(LazyDatabaseSchemaWorkbenchAdapter.java:65)
at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:106)
at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host XX.XX.XX.XX, port 1433 has failed. Error: "Connect timed out. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
at com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:241)
at com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2243)
at com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:491)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1309)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
at org.hibernate.eclipse.libs.FakeDelegatingDriver.connect(FakeDelegatingDriver.java:42)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
at org.hibernate.cfg.reveng.dialect.AbstractMetaDataDialect.getConnection(AbstractMetaDataDialect.java:121)
at org.hibernate.cfg.reveng.dialect.AbstractMetaDataDialect.getMetaData(AbstractMetaDataDialect.java:60)
... 12 more 
```

hibernate.cfg.xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
    <property name="hibernate.connection.password">password</property>
    <property name="hibernate.connection.url">jdbc:sqlserver://XX.XX.XX.XX:1433;DatabaseName=TESTDEV</property>
    <property name="hibernate.connection.username">TEST</property>
    <property name="hibernate.default_schema">TESTDEV</property>
    <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
</session-factory> 
```

我做错了什么还是这是 JBoss Tools 的问题？

编辑：在创建控制台配置时，如果我选择“数据库连接”并对其进行编辑，它也无法测试连接，得到与以前相同的错误：

```
Ping failed: com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host 10.16.14.36, port 1433 has failed. Error: "Connect timed out. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.". 
```

我可以使用 SQuirreL 访问具有相同属性的数据库，或者通过在没有安装 JBoss 工具的 Eclipse 中 ping...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:27:46.170

好的，问题出在代理定义上：）

# objective-c - TripIt 长久以来的代币

> ID：11870778
> 
> 赞同：0
> 
> 时间：2012-08-08T18:24:39.297
> 
> 标签：objective-c, ios, oauth

当我在我的应用程序中登录到 tripit 时，我得到一个访问令牌。我怎样才能获得访问令牌，以便我可以在其他任何时候使用我的应用程序时访问受保护的资源？无需再次获取请求令牌且未经授权。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:16:48.600

查看[TripIt API 文档](http://tripit.github.com/api/doc/v1/index.html)，尤其是 OAuth 部分。您将请求令牌交换为访问令牌。访问令牌存储在您的用户身边，用于访问受保护的资源。拥有访问令牌后，您无需再次获得授权或再次处理请求令牌。

# photoshop - 多个向量上的直接选择工具

> ID：11870780
> 
> 赞同：1
> 
> 时间：2012-08-08T18:24:40.197
> 
> 标签：photoshop

有没有办法用直接选择工具选择多个向量。我有一堆带圆角的按钮，我想选择每个向量一侧的所有 4 个点并同时缩放。我可以通过在一个向量上使用移位来做到这一点，但到目前为止还不能在多个向量上使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:33:02.970

抱歉，无法同时更改不同的矢量元素。这样做的唯一方法是将它们合并到一个矢量形状层中。

希望这可以帮助。

# python - 二进制选择过程

> ID：11870785
> 
> 赞同：9
> 
> 时间：2012-08-08T18:24:50.310
> 
> 标签：python, c, algorithm, binary-search

我一直在从事一项看似简单但让我发疯的任务。因此，如果您喜欢编程挑战……请继续阅读。

我希望能够采用一个数字范围，例如 [1:20] 并使用类似于二进制 serach 算法的机制打印值。因此，首先打印最低值（在本例中为 1），然后是中间值（例如在本例中为 10），然后将范围分成四等份并打印 1/4 和 3/4 处的值（在本例中为 5和 15) 然后分成八等份，直到打印出范围内的所有值。

这个应用程序（这里实际上没有必要理解）是用于内存页面访问机制，当首先在中间范围访问页面时，该机制的行为会更有效。

对于这个问题，采用任何数字范围并以上述方式打印值就足够了。

对此有什么想法吗？一个伪代码解决方案就可以了。我会对此进行尝试，但到目前为止我所尝试的一切都没有减少它。谢谢。

更新：根据要求，示例 [1:20] 的所需输出将是这样的：1、10、5、15、3、7、12、17、2、4、6、8、11、13、 16、18、9、19、20

根据所使用的算法，该输出可以以许多类似的方式呈现。但是，这个想法是首先显示半值，然后是四分之一，然后是八分之一，然后是 16 分等，而忽略先前呈现的值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T18:41:19.933

这是一些产生与您的示例类似的输出的 Python 代码：

```
def f(low, high):
    ranges = collections.deque([(low, high)])
    while ranges:
        low, high = ranges.popleft()
        mid = (low + high) // 2
        yield mid
        if low < mid:
            ranges.append((low, mid))
        if mid + 1 < high:
            ranges.append((mid + 1, high)) 
```

例子：

```
>>> list(f(0, 20))
[10, 5, 15, 2, 8, 13, 18, 1, 4, 7, 9, 12, 14, 17, 19, 0, 3, 6, 11, 16] 
```

该`low, high`范围不包括端点，这是 Python 中的约定，因此结果包含从 0 到 19 的数字。

该代码使用 FIFO 来存储仍需要处理的子范围。FIFO 以全范围初始化。在每次迭代中，弹出下一个范围并产生中点。然后，如果当前范围的下子范围和上子范围非空，则将它们附加到 FIFO。

**编辑**：这是 C99 中完全不同的实现：

```
#include <stdio.h>

int main()
{
    const unsigned n = 20;
    for (unsigned i = 1; n >> (i - 1); ++i) {
        unsigned last = n;    // guaranteed to be different from all x values
        unsigned count = 1;
        for (unsigned j = 1; j < (1 << i); ++j) {
            const unsigned x = (n * j) >> i;
            if (last == x) {
                ++count;
            } else {
                if (count == 1 && !(j & 1)) {
                    printf("%u\n", last);
                }
                count = 1;
                last = x;
            }
        }
        if (count == 1)
            printf("%u\n", last);
    }
    return 0;
} 
```

这通过使用一些技巧来确定一个整数是否已经在较早的迭代中出现，从而避免了 FIFO 的必要性。

您也可以轻松地在 C 中实现原始解决方案。由于您知道 FIFO 的最大大小（我猜它类似于 (n+1)/2，但您需要仔细检查），您可以使用环形缓冲区保存排队的范围。

**编辑 2**：这是 C99 中的另一个解决方案。它被优化为只进行一半的循环迭代，并且只使用位运算和加法，没有乘法或除法。它也更简洁，并且它不包含`0`在结果中，因此您可以按照最初的意图在开始时进行此操作。

```
for (int i = 1; n >> (i - 1); ++i) {
    const int m = 1 << i;
    for (int x = n; x < (n << i); x += n << 1) {
        const int k = x & (m - 1);
        if (m - n <= k && k < n)
            printf("%u\n", x >> i);
    }
} 
```

（这是我从一开始就打算编写的代码，但我花了一些时间来理解它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:57:47.927

Hmmm... you're basically looking for some kind of space-filling curve of sorts. I'm almost certain that you can do that with clever bit-twiddling. You might like to take a look at the way indices are computed for the Morton Z-order or Ahnentafel indexing that's used in some cache-oblivious stencil algorithms. I had a look at this some years ago, and the indexing was similar to what you're describing and done with bit-twiddling.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:51:41.067

[二进制堆](http://en.wikipedia.org/wiki/Binary_heap)作为数组已经具有这种结构。您可能希望以这种形式存储数组并按顺序打印。对于节点`i`，孩子是`2i + 1`，`2i + 2`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T20:27:00.447

1/2 很容易，对吧？

那么为什么不递归地做呢，使得 1/4 是 1/2 的 1/2，而 1/8 是 1/4 的 1/2？

# java - Hibernate 验证错误的实体外键

> ID：11870787
> 
> 赞同：1
> 
> 时间：2012-08-08T18:25:00.967
> 
> 标签：java, hibernate

当 Hibernate 的 EntityManager 启动并验证实体的映射时，我遇到了一个问题。用我能起草的最简单的术语来说，我有以下四个类：

```
@Entity
@Table(name="abc_rule")
public class Rule {
  @Id
  @Column(name="id")
  private Integer id;

  @ManyToOne
  private RuleType ruleType;
}

@Entity
@Table(name="abc_rule_type")
@IdClass(RuleTypeKey.class)
public class RuleType {
  @Id
  private String typeCode;

  @Id
  private String otherCode;

  @Column(name="descr")
  private String description;
}

public class RuleTypeKey {
  @Id
  @Column(name="type_cd")
  private String typeCode;

  @Id
  @Column(name="other_cd")
  private String otherCode;
}

@Entity
@Table(name="abc_rule_type")
public class RuleTypeSimple {

  @Id
  @Column(name="id")
  private Integer id;

  @Column(name="type_cd")
  private String typeCode;

  @Column(name="other_cd")
  private String otherCode;

  @Column(name="descr")
  private String description;
} 
```

当 Hibernate 启动时，我得到以下异常：

> 外键 (FK4AD4C4B924F958E2:abc_rule [ruleType_type_cd,ruleType_other_cd]) 的列数必须与引用的主键 (abc_rule_type [id]) 相同

如果我暂时将 @Table 注释重命名为`RuleTypeSimple`，`"abc_rule_type_123"`那么 Hibernate 将按预期验证并使用映射。在我看来，Hibernate 是根据表名而不是根据被引用的实际类的设置来验证外键映射。

我在这里遗漏了什么明显的东西会迫使 Hibernate 基于类进行验证吗？或者让它甚至不验证外键，只相信我做对了？

作为旁注，我知道没有充分的理由让类使用两个不同的标识符设置映射两次。在我的情况下，它导致了两个不同项目的代码合并在同一个数据库上。一个以只读方式使用，因此可以摆脱这种不寻常的映射。不幸的是，这两个代码库都有大量的代码围绕着他们的类版本，重构将是一项艰巨的任务，我希望暂时可以避免。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:56:50.607

请记住，Hibernate 是一个 ORM 工具，因此，您应该尝试通过遵循一些 OOP 规则或最佳实践来利用它。

根本不应该使用多列作为主键，并且如果您完全被迫这样做（例如，如果您不这样做，或者您已经创建了一个古老的关系数据库并且在您的人类之外，那么有人会杀了您）限制），那么您应该使用带有 @EmbeddedId 注释的 @Embedable Id 并且**不要使用 @Id 注释来注释每一列**。

这是一个 EmbeddedId 示例：[EmbeddedCompoundPrimaryKey 示例](http://www.java2s.com/Code/Java/JPA/EmbeddedCompoundPrimaryKey.htm)

同时，我不确定您打算创建的模型是什么（如果您至少发布图表或表格脚本会有所帮助），但通过这些更正，它不应该给您带来更多错误：

```
@Entity
@Table(name="abc_rule")
public class Rule {
  @Id
  @Column(name="id")
  private Integer id;

  @ManyToOne
  private RuleType ruleType;
}

@Entity
@Table(name="abc_rule_type")
//@IdClass(RuleTypeKey.class) <--I don't think this is right
public class RuleType {
  @EmbeddedId //Add this
  private RuleTypeKey id; //And this
  /* Remove this
  @Id
  private String typeCode;

  @Id
  private String otherCode;*/

  @Column(name="descr")
  private String description;
}

@Embeddable //Add this
public class RuleTypeKey {
  //@Id <--remove this
  @Column(name="type_cd")
  private String typeCode;

  //@Id <--remove this
  @Column(name="other_cd")
  private String otherCode;
}

@Entity
//@Table(name="abc_rule_type") <--must be different table name
@Table(name="abc_rule_type_simple")
public class RuleTypeSimple {

  @Id
  @Column(name="id")
  private Integer id;

  @Column(name="type_cd")  //Are this two colums a reference to 
  private String typeCode; //The RuleType too?? if so the must be
                           //The same as in class Rule (ManyToOne)

  @Column(name="other_cd")
  private String otherCode;

  @Column(name="descr")
  private String description;
} 
```

试试看，让我知道它是否有效（它可能有几个 sintax 错误，检查一下）

# c# - BinTree.BinaryTree 需要 1 个类型的参数？

> ID：11870788
> 
> 赞同：0
> 
> 时间：2012-08-08T18:25:05.710
> 
> 标签：c#, tree, binary-tree, binary-search-tree

**编辑：** 填充树的最佳方法是什么？我现在正在添加 10 个随机数

```
BinTree<int> myTree = new BinTree<int>();
            int Value;

            Console.WriteLine("Inserting Values:  ");
            Random random = new Random();
            for (int i = 1; i <= 10; i++)
            {
                Value = random.Next(100);
                Console.Write(Value + " ");

               myTree.node(Value);
            } 
```

但

```
> myTree.node(Value); 
```

不断出错，并显示*“错误 1 ​​'BINTREE.BinTree' 不包含 'node' 的定义，并且找不到接受类型 'BINTREE.BinTree' 的第一个参数的扩展方法 'node'（您是否缺少 using 指令或装配参考？）“*

```
 class BinTree<T> where T : IComparable
    {
        private NODE<T> root;

        public BinTree()
        {
            root = null;
        }

        public BinTree(NODE<T> node)
        {
            root = node;
        }

//order algorithms
        public void PreOrder()
        {
            PREORDER(root);
        }

        private void PREORDER(NODE<T> tree)                          
        {                                                                
            if (tree != null)
            {
                Console.Write(tree.Data);                              
                PREORDER(tree.Left);                                   
                PREORDER(tree.Right);                                  
            }
        }

        public void PostOrder()
        {
            POSTORDER(root);
        }

        private void POSTORDER(NODE<T> tree)                            
        {                                                                 
            if (tree != null)
            {
                POSTORDER(tree.Left);                                     
                POSTORDER(tree.Right);                                    
                Console.WriteLine(tree.Data);                             
            }
        }

        public void InOrder()
        {
            INORDER(root);
        }

        private void INORDER(NODE<T> tree)                              
        {                                                                 
            if (tree != null)
            {
                INORDER(tree.Left);                                       
                Console.WriteLine(tree.Data);                             
                INORDER(tree.Right);                                      
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:37:18.610

这里发生了几件事。具体错误是因为您引用的类`BinaryTree`没有通用参数，或者`T`您在类的定义中看到。

但是，您的代码还有其他问题：

1）您不能在不实例化类的情况下访问非静态成员。AKA 类定义不知道你要操作什么数据。

2) 您正在尝试调用`inOrder`无法访问的私有例程。注意小写和大写 i 的区别。你想打电话给公众`InOrder()`

您的最终代码应如下所示：

```
BinaryTree<int> myBinaryTree = new BinaryTree<int>();
myBinaryTree.InOrder(); 
```

但是，此代码将不起作用，因为您有一个未填充的树（即使根节点为空）。

**编辑：**不工作是指不会产生任何输出。查看 BinaryTree 的类定义，您将需要添加填充树的方法，以便有效地测试打印树的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:37:35.730

因为它是通用的，所以你必须传入你看到的类型，这是通过类型很重要的对象使用的类型。

# javascript - jQuery Blueimp FileUpload 上的 DELETE 方法不允许使用 Codeigniter/PHP（405 错误）？

> ID：11870789
> 
> 赞同：5
> 
> 时间：2012-08-08T18:25:06.097
> 
> 标签：javascript, php, codeigniter, file-upload, delete-file

我正在尝试使用这个非常好的[jQuery Blueimp 文件上传插件](https://github.com/blueimp/jQuery-File-Upload)来删除文件。

我将此插件放在我的根目录中，并且能够上传和删除文件没有问题。

但是，当我将此插件嵌入我的 codeigniter 应用程序时，我不再删除由于 405 错误而上传的文件。我已将所有文件夹设置为`777`只是为了确保这不是问题。

有什么想法吗？这是我的控制台日志：

![控制台日志](../Images/0aa657cf6f7b4ce4c956ae1bee94d69b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T22:50:24.890

我按照这个 Blueimp 插件的[一个 Codeigniter Forks](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload,---Multi-file-upload-with-CodeIgniter)中的代码解决了我自己的问题。

问题是 Blueimp 插件默认指定的 DELETE HTTP/AJAX 请求的 URL。这些 URL 对应于文件上传的目录路径。不幸的是，默认情况下，Codeigniter 通过使用 URL 来确定要调用的控制器/控制器方法来覆盖它。

例如，我上传文件的目录结构是这样的：

```
/uploads/img1.jpg 
```

并且 Codeigniter 寻找一个被调用的控制器`uploads`和一个被调用的方法，`img1.jpg`但这些显然不存在。

我通过更改 `delete_url`分配给每个文件的 Blueimp 插件“upload.class.php”文件解决了这个问题。`delete_url`已从目录位置更改为 codeigniter 控制器/控制器方法，如下所示：

```
protected function set_file_delete_url($file) { 
    $file->delete_url = base_url().'upload/deleteFile/'.rawurlencode($file->name);
    //"upload/deleteFile is my controller/controller_method
    //$file->delete_url = $this->options['upload_url']
    //    .'?file='.rawurlencode($file->name);*/
    //..... 
```

然后这是我的`upload/deleteFile`函数的样子（再次按照[Codeigniter Blueimp Fork](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload,---Multi-file-upload-with-CodeIgniter)中的代码几乎逐字逐句）：

```
 function deleteFile($file){

    $fcpath=FCPATH.'uploads/;
    $success =unlink($fcpath.$file); //PHP function was does the actual file deletion
            //info to see if it is doing what it is supposed to 
    $info->sucess =$success;
    $info->file =is_file(FCPATH .$file);
    $info->fcpath = FCPATH;
    if (IS_AJAX) {
        //I don't think it matters if this is set but good for error checking in the console/firebug
        echo json_encode(array($info));
    }
    else {     
        //here you will need to decide what you want to show for a successful delete
        $file_data['delete_data'] = $file;
        $this->load->view('admin/delete_success', $file_data); 
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-05T17:20:09.737

你应该只修改这个文件 UploadHandler.php：

function __construct($options = null, $initialize = true, $error_messages = null) {
// 如果您的服务器不支持
// DELETE 请求，请将以下选项设置为 'POST'。这是发送给客户端的参数：
//'delete_type' => 'DELETE',
**'delete_type' => 'POST',**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-31T15:17:33.560

我通过以下方式解决了它：

在文件中：UploadHandler.php，在构造函数中

**前：**

```
$this->options = array(
        'script_url' => $this->get_full_url().'/'.$this->basename($this->get_server_var('SCRIPT_NAME')), 
```

**最后添加我的负载控制方法**

```
$this->options = array(
        'script_url' => $this->get_full_url().'/'.$this->basename($this->get_server_var('SCRIPT_NAME')).'/cargar' 
```

**只需添加指向您创建的上传文件的方法的路由。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-30T10:50:10.900

我将 jquery 文件上传添加到我的应用程序中的控制器。像马克一样，我无法删除文件。但我解决了这样的问题：

在构造函数中，*选项*数组的第一个元素

```
'script_url' => $this->get_full_url().this->basename($this->get_server_var('SCRIPT_NAME')), 
```

删除对 SCRIPT_FILENAME 的引用

删除对 SCRIPT_FILENAME 的引用并添加加载*uploadhandler.php*库的驱动程序的名称。就我而言，*文件上传*

```
'script_url' => $this->get_full_url().'/fileupload/', 
```

准备好。你试一试！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-17T22:01:47.810

您需要做的就是更改“UploadHandler”中的“script_url”并将其指向调用“UploadHandler”库的位置。

//前

```
$this->options = array(
'script_url'=>$this->get_full_url().'/'.$this->basename($this->get_server_var('SCRIPT_NAME')), 
```

//后

```
$this->options = array(
'script_url'=>base_url().'admin/categories/category_manage/picturesupload' 
```

因为我使用的是 bonfire-CI，所以管理面板的“admin”
“categories”是上下文的名称
“category_manage”是模块的名称
“picturesupload”是我加载库的方法的名称

如果你不是使用 bonfire 然后只需将其更改为“您的控制器名称”/“您调用 UploadHandler libaray 的方法名称”
//“图片上传”方法如下所示

```
public function picturesupload(){

        error_reporting(E_ALL | E_STRICT);
        $this->load->library('UploadHandler');

} 
```

# excel - 记录宏 (Excel 2003) 以有条件地逐行复制粘贴

> ID：11870791
> 
> 赞同：0
> 
> 时间：2012-08-08T18:25:23.220
> 
> 标签：excel, vba

我每天都有来自外部来源的数据。在一张纸上，我有一个股票代码列表（按字母顺序排序），相应的数据继续在该行中。

在另一张纸上，我将代码按相应的部门组织，而不是按字母顺序组织。

我正在尝试开发一个宏，以便通过识别代码并粘贴到适当的行中，第一张表中的信息将自动粘贴到第二张表中。

这是到目前为止使用的代码，但它并没有按预期的方式工作：

```
Dim LSymbol As String
    Dim LRow As Integer
    Dim LFound As Boolean

    On Error GoTo Err_Execute

    'Retrieve symbol value to search for
    LSymbol = Sheets("Portfolio Update").Range("B4").Value

    Sheets("Test").Select

    'Start at row 2
    LRow = 2
    LFound = False

    While LFound = False

        'Encountered blank cell in column B, terminate search
        If Len(Cells(2, LRow)) = 0 Then
            MsgBox "No matching symbol was found."
            Exit Sub

        'Found match in column b
        ElseIf Cells(2, LRow) = LSymbol Then

            'Select values to copy from "Portfolio Update" sheet
            Sheets("Portfolio Update").Select
            Range("B5:V5").Select
            Selection.Copy

            'Paste onto "Test" sheet
            Sheets("Test").Select
            Cells(3, LRow).Select
            Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:= _
            False, Transpose:=False

            LFound = True
            MsgBox "The data has been successfully copied."

        'Continue searching
        Else
            LRow = LRow + 1
        End If

    Wend

    On Error GoTo 0

    Exit Sub

Err_Execute:
    MsgBox "An error occurred."

End Sub 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:54:58.470

应该是`.Cells(row,col) not`.Cells(col,row)`

但是，您可以使用 Find() 避免循环 -

```
Sub Tester()

    Dim LSymbol As String

    Dim shtPU As Worksheet
    Dim shtTest As Worksheet
    Dim f As Range
    Dim c As Range

    Set shtPU = Sheets("Portfolio Update")
    Set shtTest = Sheets("Test")

    On Error GoTo Err_Execute

    For Each c In shtPU.Range("B4:B50").Cells

       LSymbol = c.Value 'Retrieve symbol value to search for

       If Len(LSymbol) > 0 Then
            Set f = shtTest.Columns(2).Find(LSymbol, , xlValues, xlWhole)
            If Not f Is Nothing Then
                'was found
                With c.Offset(0, 1).Resize(1, 21)
                    f.Offset(0, 1).Resize(1, .Columns.Count) = .Value
                End With
                c.Interior.Color = vbGreen
                'MsgBox "The data has been successfully copied."
            Else
                'not found
                c.Interior.Color = vbRed
                'MsgBox "No matching symbol was found."
            End If
       End If

    Next c

    Exit Sub

Err_Execute:
    MsgBox "An error occurred:" & Err.Description

End Sub 
```

**编辑**- 在循环符号列表中添加

# objective-c - 在块中声明变量，Objective C

> ID：11870793
> 
> 赞同：0
> 
> 时间：2012-08-08T18:25:28.257
> 
> 标签：objective-c, xcode, variables, queue, block

线程我的项目，但使用队列和块，但是当我尝试对代码进行排队时出现错误。我知道你不能在块中排队 UI 元素，所以我避免了这种情况，但我得到的错误是当我在块外调用 UI 元素时，它说虽然变量在块内声明但未声明变量。这是代码。该代码是一个 UITableView 方法，它只需要一个数组对其进行排序并显示它。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
// Create an instance of the cell
UITableViewCell *cell;
cell = [self.tableView dequeueReusableCellWithIdentifier:@"Photo Description"];

if(!cell)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Photo Description"];

// set properties on the cell to prepare if for displaying
//top places returns an array of NSDictionairy objects, must get object at index and then object for key

//Lets queue this
dispatch_queue_t downloadQueue = dispatch_queue_create("FlickerPhotoQueue", NULL);
dispatch_async(downloadQueue, ^{

//lets sort the array

NSArray* unsortedArray = [[NSArray alloc] initWithArray:[[self.brain class] topPlaces]] ;
//This will sort the array
NSSortDescriptor* descriptor = [NSSortDescriptor sortDescriptorWithKey:@"_content" ascending:YES];
NSArray * sortDescriptors = [NSArray arrayWithObject:descriptor];                                   
NSArray *sortedArray = [[NSArray alloc] init];
sortedArray = [unsortedArray sortedArrayUsingDescriptors:sortDescriptors];

NSString * cellTitle = [[sortedArray objectAtIndex:self.location] objectForKey:@"_content"]; 

NSRange cellRange = [cellTitle rangeOfString:@","];

NSString * cellMainTitle = [cellTitle substringToIndex:cellRange.location];

});
dispatch_release(downloadQueue);  

//Claims that this are not declared since they are declared in the block
cell.textLabel.text = cellMainTitle;
//This isnt declared either
NSString* cellSubtitle = [cellTitle substringFromIndex:cellRange.location +2];

cell.detailTextLabel.text =  cellSubtitle;
self.location++;
return cell;
} 
```

我设法通过将调度发布移动到代码块的最后，然后通过调用 dispatch_get_main_queue 在主线程中声明 UI 接口来使程序工作。感谢所有的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T18:30:45.337

If I am understanding your problem correctly, you are declaring a variable inside a block and trying to use it outside.

That won't work. Variables declared inside blocks are limited to the block's scope. If you create them inside the block, you are limited to using them in the block and you can't use them anywhere else.

A better idea will be to create the variable you want to use outside the block. If you want to modify the variable in the block, use the __block keyword.

```
__block UITableViewCell *someCell;
//__block tells the variable that it can be modified inside blocks.
//Some generic block
^{
//initialize the cell here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:34:50.997

在块内定义的变量是该块的本地变量，因此不存在于它之外。您可以在进入块之前预先定义这些变量，但是这是进入一个专门的领域，并且在定义这些变量时需要使用扩展。在 Organizer 中查找“__block”存储类型。我没有花太多时间审查您的代码，以了解这是否是考虑到细节的明智建议。

# backbone.js - 如何从主干集合中获取有效的过滤模型？

> ID：11870821
> 
> 赞同：0
> 
> 时间：2012-08-08T18:27:01.880
> 
> 标签：backbone.js

我确定我犯了这些 Backbone 新手错误之一，但经过一个小时的搜索后，我没有找到解决方案。

问题是：当我尝试从我的集合中获取过滤模型时，出现类型错误“productCollection.getProductByName("M020012").toJSON 不是函数”。

但是，如果我将过滤方法更改为简单的“返回 this.at(0)”，我会得到一个有效的模型。

为什么会这样，解决方案是什么？

这是[JSFiddle](http://jsfiddle.net/xzeHb/133/)

```
var products = [{
    "name": "M020013",
    "gender": "M",
    "pictures": [{
        "picture": {}}]},
{
    "name": "M020012",
    "gender": "M",
    "pictures": [{
        "picture": {}}]},
{
    "name": "M020011",
    "gender": "M",
    "pictures": [{
        "picture": {}}]}
];

var Product = Backbone.Model.extend({});

var ProductCollection = Backbone.Collection.extend({
    model: Product,
    getProductByName: function(productName) {
        //return this.at(0);

        return this.filter(
            function(product) {
            return product.get('name') === productName;
        });
    }
});

var productCollection = new ProductCollection();

productCollection.on('reset', function() {
    console.log('reset');
    console.log(productCollection.getProductByName('M020012'));
    console.log(productCollection.getProductByName('M020012').toJSON());
});

productCollection.reset(products); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:52:19.837

这是因为`filter`返回一个模型数组。而javascript中的数组没有`toJSON`函数。

由于您想返回模型而不是数组，因此您可以使用`find`. `filter`find 方法返回第一个符合条件的模型

下面是代码的样子：

```
getProductByName: function(productName) {
  return this.find(function(production) {
    return production.get('name') === productName;
  });
} 
```

# c# - 遍历实体时的实体框架异常（但在使用 ToList( ) 时有效）

> ID：11870828
> 
> 赞同：1
> 
> 时间：2012-08-08T18:27:29.333
> 
> 标签：c#, entity-framework, linq-to-entities, lazy-loading

我有一个名为 MyItems 的实体表，该表中的每个项目都有另一个表的外键。我想简单地遍历我的项目并访问每个项目的外键对象的字符串“名称”属性，如下所示：

```
foreach (var myItem in (from q in context.MyItems select q))
{
   string testName = myItem.ForeignItem.Name
} 
```

当我这样做时，ForeignItem 为空，并且当我尝试访问 ForeignItem 时收到 InvalidOperationException：

> 已经有一个与此命令关联的打开的 DataReader，必须先关闭它。

***但是***- 如果我改为这样调用 ToList() ：

```
(from q in context.MyItems select q).ToList() 
```

我的外键对象填充得很好。我意识到 ToList() 会很昂贵，因为将立即检索整个表。我怀疑延迟加载在幕后出了点问题，但我正在理解它*应该*在不调用`ToList()`.

我忽略了什么吗？

**编辑：**我在想也许是使用`var`导致问题，所以我尝试使用

```
foreach (MyItem myItem in (from q in context.MyItems select q))
{
   // loop contents
} 
```

相反 - 相同的结果。的属性`myItem`被填充，但外键对象保持为空。

**编辑#2：**我在整个应用程序中只使用一个对象上下文和一个 Linq-to-Entities 语句，所以我无法解释另一个 DataReader 在哪里运行。我还应该注意，这个错误发生在循环中的第一个对象上，所以它不是因为检索到前一个项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:28:41.620

你写`myItem`而不是`q`. 你应该使用这个：

```
(from q in context.MyItems select q) 
```

或者更简单地说，你可以这样写：

```
context.MyItems 
```

* * *

关于您更新的问题，这似乎是因为您在第一个查询完成之前开始了一个新查询。可能的解决方案：

*   运行原始查询时包括子项。

    ```
    foreach (var myItem in context.MyItems.Include("ForeignItem")) { ... } 
    ```

*   启用 MultipleActiveResultSets。

**有关的**

*   [实体框架：已经有一个打开的 DataReader 与此命令关联](https://stackoverflow.com/questions/4867602/entity-framework-there-is-already-an-open-datareader-associated-with-this-comma)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:23:15.757

[根据 Mark 的使用Include()](http://msdn.microsoft.com/en-us/library/bb738708.aspx)的建议，这就是我最终要做的事情：

```
(from q in context.MyItems.Include("ForeignItemOne").Include("ForeignItemTwo").Include("ForeignItemThree") select q) 
```

顺便说一句，设置`MultipleActiveResultSets`为 true 也可以。现在，我将使用它，`Include()`因为应用程序很小并且其中只有一个 Linq 语句。

# linq - 使用 Linq 确定缺失的记录组合

> ID：11870830
> 
> 赞同：0
> 
> 时间：2012-08-08T18:27:45.357
> 
> 标签：linq

让我从一个例子开始解释。

```
var vProducts = new[] {
    new { Product = "A", Location ="Y", Month = "January", Demand = 50 },
    new { Product = "A", Location ="Y", Month = "February", Demand = 100 },
    new { Product = "A", Location ="Y", Month = "March", Demand = 20 },
    new { Product = "A", Location ="Y", Month = "June", Demand = 10 }
};

var vPeriods = new[] {
    new { Priority = 1, Month = "January" },
    new { Priority  = 2, Month = "February" },
    new { Priority  = 3, Month = "March" },
    new { Priority  = 4, Month = "April" },
    new { Priority  = 5, Month = "May" },
    new { Priority  = 6, Month = "June" }
};

var vAll = from p in vProducts
       from t in vPeriods
       select new
           {
             Product = p.Product,
             Location = p.Location,
             Period = t.Priority,
             PeriodName = t.Month,
             Demand = p.Demand
           }; 
```

上述查询将创建 Products & Period 的所有组合。但是，我需要获取所有产品的列表以及不匹配月份的产品列表，如下所示。

例子

```
Product      Location      Priority        Month    Demand
  A              Y            1           January     50
  A              Y            2          February    100
  A              Y            3           March       20
  A              Y            4           April       null
  A              Y            5           May         null
  A              Y            6           June        10 
```

感谢您的任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:39:14.600

你想做一个[左外连接](http://msdn.microsoft.com/en-us/library/bb397895.aspx)，它会像这样：

```
var res = from period in vPeriods
                  join product in vProducts on period.Month equals product.Month into bla
                  from p in bla.DefaultIfEmpty()
                  select new { period.Month, period.Priority, Product = p == null ? null : p.Product, Demand = p == null ? -1 : p.Demand };

  foreach (var a in res)
            {
                Console.WriteLine(string.Format("{0} {1} {2}", a.Product, a.Month, a.Demand));
            } 
```

当然，没有匹配月份的产品没有位置等（如您在示例中所述）

# objective-c - 我可以将委托定位到 ViewController 的“特定”实例，以获取它的数据吗？

> ID：11870832
> 
> 赞同：0
> 
> 时间：2012-08-08T18:27:52.417
> 
> 标签：objective-c, ios, uiviewcontroller, delegates, delegation

我怎样才能做到这一点？

我有**ViewController 1**和**ViewController 2**。

**ViewController 1**定义了一个协议，**ViewController 2**遵循它。

我设置**ViewController 2**有一个委托并调用**ViewController 1**中的一个方法。此方法运行良好。并将确认发送回我的**ViewController 2**。

我可以在它们之间交换数据，但我试图找出一种方法，从 ViewController 1 的特定**实例****获取**数据到**ViewController 2**。

 ****因为当我使用我的委托时，要在**ViewController 1**中运行一个方法，它不适用于我感兴趣的那个特定实例。

有没有办法解决这个问题？

我可以设置我的委托，一个特定实例的委托，以便我可以获取它的状态吗？这可能吗？如果是这样，怎么办？

换句话说，我可以使用我的委托来定位特定实例吗？

--

ps 如果我尝试获取由 ViewController 1 统治的属性的数据，它的数据为零（我认为这是因为我没有针对特定实例）！我可以解决它的一种方法是使用一种读取“已保存数据”的方法。但是我会复制代码，并使用以前的 ViewController 中已经可用的数据来实例化新对象。

非常感谢任何帮助。先感谢您！

努诺

编辑：

```
SetupTableViewController *delegate = [[SetupTableViewController alloc] init];
[delegate setDelegate:self]; 
```

从现在开始，我试图获得的每一个属性都是零。如何将其定位到我以前的 ViewController 的特定实例？我不想实例化一个新的 SetupViewController。我真正需要的是访问我的 SetupViewController 的现有实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:39:39.730

这个问题真的很模糊，你可能应该发布一些代码来更好地解释你想要实现的目标。

> “我可以在它们之间交换数据，但我正试图找出一种方法，从 ViewController 1 的特定实例获取数据到 ViewController 2。”

那么当你做 myViewController1Instance.delegate = self; ，您进行的任何委托调用都只会从 myViewController1Instance 对象发送到 ViewController2，而不是从 ViewController1 类的其他实例发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:41:29.340

不要像您尝试做的那样使用委托，这有点尴尬，而是尝试使用通知..当一个实例知道它需要发送一些东西时，它会抛出一个通知，它被视图控制器 2 捕获。

为什么屏幕上有多个 vc1 实例？你能提供更多关于你想要达到的目标的信息吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T19:32:03.220

将 (UIViewController*)sender 添加到您的协议消息中。

收到邮件后，检查发件人，如果不是您感兴趣的，请退回。

不过，我必须同意索林的观点，您可能最好使用通知。

此类问题通常可以通过架构改进来解决。退后一步想想数据是否在正确的位置总是好的。****

# python - fail2ban 为 failregex 执行正则表达式

> ID：11870837
> 
> 赞同：0
> 
> 时间：2012-08-08T18:28:00.337
> 
> 标签：python, regex

我需要一些帮助来为 failregex 创建一个正则表达式，以从该日志中查找并禁止源 IP（例如 SRC=192.168.0.1 并禁止 IP 192.168.0.1）：

> [ATT] 嫌疑人：IN=eth0 OUT= MAC=xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx SRC=192.168.0.1 DST=192.168.0.100 LEN =37 TOS=0x00 PREC=0x00 TTL=13 ID=56037 PROTO=TCP SPT=21 DPT=35 LEN=60

fail2ban 正则表达式中的示例

> ^%(__prefix_line)sFailed (?:password|publickey) for .* from [HOST](?: port \d*)?(?: ssh\d*)?$

搜索：

> 8 月 5 日 11:11:11 igs sshd [28071]：来自 192.168.0.100 端口 1234 ssh2 的无效用户用户名的密码失败

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:32:30.160

```
/SRC=([0-9.]*)/ 
```

Now you have your IP in $1.

Full RE:

```
/^\[ATT\] Suspect: .*SRC=([0-9.]*).*$/ 
```

# blackberry - 如何修复黑莓浏览器输入焦点变黑？

> ID：11870842
> 
> 赞同：5
> 
> 时间：2012-08-08T18:28:34.070
> 
> 标签：blackberry, jquery-mobile

我最近升级了我们的移动应用程序以使用 JQM 1.1.1，并注意到 Blackberry 6 浏览器上的一个非常大的问题。

截图最能说明问题。

在第一张图片中，您将看到正确呈现的搜索文本框。

但是在第二张图片中，您会看到当输入文本框获得焦点时，它会使文本框变黑

请看我的截图：

![在此处输入图像描述](../Images/5dbe4df24ccc859cade2eb222be17c17.png)

![在此处输入图像描述](../Images/5f81cdabac442722b95ab5423f647970.png)

有没有人看到这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T06:39:05.280

我有同样的问题，并用这样的css修复它：

```
input.ui-focus, textarea.ui-focus {
    outline: none;
    -webkit-box-shadow: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:35:00.660

谢谢您的回答。在我这边，我必须将 css 设置为：

```
.ui-btn.ui-focus, .ui-input-text.ui-focus, ui-input-search.ui-focus 
```

希望它会有所帮助！

# php - 评估动态生成的代码或将其存储在临时文件中并包含它会更好吗？

> ID：11870843
> 
> 赞同：-2
> 
> 时间：2012-08-08T18:28:36.190
> 
> 标签：php

有时我需要创建 PHP 代码来动态格式化数组。一种方法是使用`eval`. 但我想将生成的代码写入 PHP 文件，然后将其包含在内。这有很多优点`eval`，其中之一是生成代码的缓存。但是我在其他代码中没有看到过这样的做法。我不知道这是否有关于安全或其他方面的任何问题？

这是一个例子：

```
<?php

$code = '<? foreach($rows as $row) {$row["insertion"] = format($row["insertion"]);} ?>'
file_put_contents('formatter.php', $code);
include('formatter.php');

?> 
```

我只是想知道动态创建一个PHP文件然后包含它是否很好？

还是`eval()`直接继续编写代码而不存储历史记录更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:59:30.263

如果您打算使用生成的代码一次，并且只使用一次，那么您最好使用 eval。

但是，我质疑这里的做法。您的示例代码要么太微不足道，无法充分证明对这种模式的需求，要么您过于复杂化了可能是基本过程代码和闭包之类的东西。

一般准则：

*   如果您生成 **然后*在生产环境中调用动态代码，您可能会错误地处理您的问题
*   `eval`在 99.999% 的情况下被视为不良做法
*   应该`eval`编辑永远不会再次调用的生成代码
*   将来会（或很可能会）调用的生成代码应缓存到文件或数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:34:25.037

如果您必须动态创建代码，将输出转储到文件然后包含它总是更有效且通常更安全。然后，您只需为每段代码执行一次*，*它允许操作码缓存（通过 APC 等）和 Zend Core 引擎更有效的预处理。另一个好处是您可以调试包含的文件，而`eval()`很少支持调试 ed 语句。

将其存储到文件中更安全的原因是您可以记录运行的内容；，`eval()`它或多或少是一个黑匣子，你不知道正在执行什么。此外，您应该能够将 writes 文件夹锁定到只有特定应用程序可以写入的位置。如果您将动态数组创建逻辑与主应用程序分开，然后通过主应用程序本身包含文件，这无疑会提高安全性和性能，假设您已将临时文件设置为对 Apache 只读且只能由PHP 应用程序（可通过 cron 等方法实现）。

对于你正在做的事情可能有更好的解决方案（比如 memcache 或 APC fetch/store），但我遇到了类似的情况，这些情况很大程度上得益于包含的东西（例如，调整 smarty 模板以包含而不是 eval 工作令人惊讶）。

# ios - UITableViewCell 的背景图片高度不会平滑地跟随行的高度

> ID：11870854
> 
> 赞同：0
> 
> 时间：2012-08-08T18:29:42.370
> 
> 标签：ios, uitableview

我们创建了一个`UITableviewController`列表来列出一些内容，我们想要一个背景图像视图会随着行高的变化而平滑扩展的效果，但我们只是得到了图像更改为最终行高的效果。

视频是我们得到的： [http ://www.youtube.com/watch?v=v-5TtrpYhl8](http://www.youtube.com/watch?v=v-5TtrpYhl8)

中`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`，我们只需在单元格中添加一个子视图，如下所示

```
UIImage *cellBackgroundImage = [UIImage imageNamed:@"cellbg.png"];
UIImageView *cellBackgroundImageView = [[UIImageView alloc] init];
[cellBackgroundImageView setImage:[cellBackgroundImage stretchableImageWithLeftCapWidth:10 topCapHeight:10]];
[cell addsubview:cellBackgroundImageView] 
```

不仅仅是设置高度之`-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`类的`return 50`或`return 250`

但是这里显然有一些故障，我该如何解决？我到处都是谷歌，有些应用程序会产生这种效果（比如“DOOO”），我会很感激你的回答！

* * *

我们尝试了其他方法，例如在 custom的方法中添加`UIImageView`高度变化，这与上面的视频相同`UITableViewCell``layoutSubview`

* * *

感谢CSmith的回答，我们已经尝试过这种方法作为后台，但我们发现我们的问题不在后台，我们会继续寻找解决方案，但是谢谢~~:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:39:58.603

参考[带有背景图片的 UITableView 单元格](https://stackoverflow.com/questions/6329832/uitableview-cell-with-background-image)

```
cell.backgroundView = [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbg.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:10.0] ]; 
```

# ms-access - 如何从组合框的自动完成（访问表单）中删除区分大小写

> ID：11870857
> 
> 赞同：6
> 
> 时间：2012-08-08T18:29:43.897
> 
> 标签：ms-access, autocomplete, combobox, case-sensitive

我已经在访问中构建了一个数据输入表单。[Operator] 字段之一来自操作员名称的组合框，例如“Jane Doe”。输入数据的人通常会为表单的其他元素保持大写锁定，因此当他们开始输入时到达 [Operator] 字段时，自动完成将执行以下操作：

```
User types: J
Autocomplete: Jane Doe

User types: JA
Autocomplete: Jane Doe

User types: JAN
Autocomplete: JaNne Doe 
```

因此，如果有 2 个具有相似名字的运算符，并且用户需要输入超过 2 个姓名的字母，自动完成就会赶上区分大小写并给用户带来负担。

到目前为止我发现的最简单的解决方案是将所有名称转换为全部大写，但是有没有办法让自动完成工作不分大小写？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:40:53.290

将允许自动更正选项更改为否。

发生的情况是两个首字母大写的自动更正`A`正在插入，并且组合正在丢失文本选择，因此当输入 N 时，它被插入，而不是过度输入。

# java - 如何为android的连接json调用创建线程

> ID：11870864
> 
> 赞同：1
> 
> 时间：2012-08-08T18:30:21.163
> 
> 标签：java, android, json, multithreading

我在第 97 行收到此错误 java.lang.NullPointerException

我认为是为了，de json call，因为没有获取数据，

我如何创建一个线程，首先获取此数据然后执行下一步。

我在这方面真的很新，所以任何帮助都很好。

```
package com.zoada;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // esconde el titlebar de la aplicaci�n
        // tiene que estar antes de colocar el mainLayout
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        // esconde el statusbar de Android
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_main);

        JSONArray posiciones = null;

        // *** Comienza la comunicaci�n con el servidor

        BufferedReader in = null;
        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet("http://zoada.com/blah.php");
            HttpResponse response = client.execute(request);

            // leyendo "response"  un string gigantesco
            in = new BufferedReader(
                    new InputStreamReader(
                            response.getEntity().getContent()));

            // imprimpiendo el tarugo de texto linea a linea

            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            }
            in.close();

            String page = sb.toString();
            //System.out.println(page);

            //aqui viene la parte JSON!!!

            JSONObject jObject = new JSONObject(page);
            posiciones = jObject.getJSONArray("positions");

            for (int i=0; i< posiciones.length(); i++) {
                JSONObject jo = posiciones.getJSONObject(i);
                //System.out.println(jo.getString("name"));
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        // *** termina comunicaci�n con el servidor

        TableLayout tl = (TableLayout)findViewById(R.id.containerTable);
        LayoutInflater inflater = getLayoutInflater();

        for (int i = 0; i < posiciones.length(); i++) {
            try {
                JSONObject jo = posiciones.getJSONObject(i);

                TableRow row = (TableRow)inflater.inflate(R.layout.tablerow, tl, false);

                TextView pos = (TextView)row.findViewById(R.id.position);
                String posTxt=jo.getString("position");
                pos.setText(posTxt);

                TextView team = (TextView)row.findViewById(R.id.team);
                String teamTxt=jo.getString("name");
                team.setText(teamTxt);

                TextView points = (TextView)row.findViewById(R.id.points);
                String pointsTxt=jo.getString("points");
                points.setText(pointsTxt);

                TextView games = (TextView)row.findViewById(R.id.games);
                String gamesTxt=jo.getString("played");
                games.setText(gamesTxt);

                TextView victories = (TextView)row.findViewById(R.id.victories);
                String victoriesTxt=jo.getString("won");
                victories.setText(victoriesTxt);

                TextView draw = (TextView)row.findViewById(R.id.draw);
                String drawsTxt=jo.getString("draw");
                draw.setText(drawsTxt);

                TextView lost = (TextView)row.findViewById(R.id.loss);
                String loseTxt=jo.getString("lost");
                lost.setText(loseTxt);

                TextView goals = (TextView)row.findViewById(R.id.goals);
                int goalsInt = Integer.parseInt(jo.getString("gol"));
                int againstInt = Integer.parseInt(jo.getString("against"));
                String goalsTxt=goalsInt+":"+againstInt;
                goals.setText(goalsTxt);

                TextView diff = (TextView)row.findViewById(R.id.difference);
                int diffInt=goalsInt-againstInt;
                String diffTxt=""+diffInt;
                diff.setText(diffTxt);
/**/
                tl.addView(row);            
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        // text = (EditText) findViewById(R.id.EditText01);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:23:55.040

您不应该在 UI 线程中执行网络操作！例如，您可以在类中创建 AsyncTask。它可能看起来与此类似

```
 private class ParseTask extends AsyncTask<Params, Progress, Result> {
   @Override
   protected Result doInBackground(Params params) {
        // get url 
        Params url = params[0];
        // create HttpClient etc.
        ...
        // get response, and parse json
        // return 
        return result;
   }

   @Override
   protected void onPostExecute (Result result) {
        // now when you have result from parsed json, 
        // update application UI or whatever you need
        someEditText.setText(value_from_result);
   }
} 
```

之后，只需调用 onCreate 方法

```
ParseTask task = new ParseTask();
task.execute(url); 
```

启动异步任务。

另一方面，可以通过在IntentService中处理json，或者一般的service，将解析后的json通过广播返回给Activity，也可以达到同样的效果。

# php - 从用户代理解析 chrome 版本

> ID：11870868
> 
> 赞同：0
> 
> 时间：2012-08-08T18:30:36.053
> 
> 标签：php, regex, preg-match, user-agent

我需要使用 PHP 找到 Chrome 的版本。

我编码了这个：

```
$ua = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.60 Safari/537.1";
preg_match( "#Chrome/([0-9]{2})#", $ua, $match );
print_r($match); 
```

返回：

```
Array
(
    [0] => Chrome/21
    [1] => 21
) 
```

我有两个问题：

这适用于所有 chrome 浏览器吗？（因为 $ua 是我自己的用户代理。

另外我怎样才能使模式只返回数组中的“21”而不是“Chrome/21”和“21”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:58:51.377

这*不适*用于所有 Chrome 浏览器。如果是 Chrome 版本 3 怎么办？还是 Chrome 版本 2245？

见[我](http://www.useragentstring.com/pages/Chrome/)。

我要做的是将您的正则表达式更改为以下内容：

```
preg_match( "#Chrome/(.+?)\.#", $ua, $match ); 
```

这将返回与您现在所拥有的相同的内容，但它也适用于任何数字版本。

```
array (
  0 => 'Chrome/21.',
  1 => '21',
) 
```

你可以[在这里](http://www.functions-online.com/preg_match.html)测试一下。

**至于你的第二个问题，**你不能修改`preg_match()`以返回这样的值。但是，简单的设置`$match = $match[1]`可以正常工作，并且完全可以接受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:34:40.687

1.  只要chrome不改变他们的UA，你就没事。
2.  添加：

    $match = $match[1];

# antlr - 使用 ANTLR，如何在不使用语言特定语义谓词的情况下处理特定重复？

> ID：11870878
> 
> 赞同：1
> 
> 时间：2012-08-08T18:31:22.027
> 
> 标签：antlr, semantics, predicates

我正在尝试使用 ANTLR 对 mqsi 命令建模，但遇到了以下问题。mqsicreateconfigurableservice 的文档针对 queuePrefix 说：“前缀可以包含在 WebSphere® MQ 队列名称中有效的任何字符，但不得超过八个字符，并且不得以句点 (.) 开头或结尾。例如, SET.1 有效，但 .SET1 和 SET1\. 无效。多个可配置服务可以使用相同的队列前缀。”

作为权宜之计，我使用了以下方法，但这种技术意味着我必须至少有两个字符的名称，这似乎是一个非常浪费且不可扩展的解决方案。有没有更好的方法？

请参阅下面的“queuePrefixValue”...

谢谢 :o)

```
parser grammar mqsicreateconfigurableservice;
mqsicreateconfigurableservice
:   'mqsicreateconfigurableservice' ' '+ params
;
params  :   (broker ' '+ switches+)
;
broker  :   validChar+
;
switches
:   AggregationConfigurableService
;
AggregationConfigurableService
:    (objectName ' '+ AggregationNameValuePropertyPair)
;

objectName
:   (' '+ '-o' ' '+ validChar+)
;

AggregationNameValuePropertyPair
:   (' '+ '-n' ' '+ 'queuePrefix' ' '+ '-v' ' '+ queuePrefixValue)?
    (' '+ '-n' ' '+ 'timeoutSeconds' ' '+ '-v' ' '+  timeoutSecondsValue)?
;

// I'm not satisfied with this rule as it means at least two digits are mandatory
//Couldn't see how to use regex or semantic predicates which appear to offer a solution
queuePrefixValue
:   validChar (validChar | '.')? (validChar | '.')? (validChar | '.')? (validChar | '.')? (validChar | '.')? (validChar | '.')? validChar
;
timeoutSecondsValue //a positive integer
:   ('0'..'9')+
;

//This char list is just a temporary subset which eventually needs to reflect all the WebSphere acceptable characters, apart from the dot '.'
validChar
:   (('a'..'z')|('A'..'Z')|('0'..'9'))
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:20:31.703

您正在使用解析器规则，而您应该使用词法分析器规则¹。（*点*元字符）和`.`（*范围*元字符）在解析器规则中的行为与在词法分析器规则中的行为不同。在解析器规则中，匹配任何标记（在词法分析器规则中，它们匹配任何字符）并将匹配标记范围，***而不是***您期望它们匹配的字符范围！*`..`*`.``..`**

 ***因此，制作`queuePrefixValue`一个词法分析器规则（让它以大写字母开头：）`QueuePrefixValue`，并在适当的情况下使用`fragment`规则²。你`QueuePrefixValue`可能看起来像这样：

```
QueuePrefixValue
 : StartEndCH ((((((CH? CH)? CH)? CH)? CH)? CH)? StartEndCH)?
 ;

fragment StartEndCH
 : 'a'..'z'
 | 'A'..'Z'
 | '0'..'9'
 ;

fragment CH
 : '.'
 | StartEndCH
 ; 
```

因此，这或多或少地回答了您的问题：不，没有*捷径*可以限制令牌具有一定数量的字符*而没有*特定于语言的谓词。请注意，我上面的建议不是模棱两可的（你`QueuePrefixValue` *是*模棱两可的），我的也接受单个字符值。

高温高压

* * *

¹ [ANTLR 中解析器规则和词法分析器规则之间的实际区别？](https://stackoverflow.com/questions/4297770/practical-difference-between-parser-rules-and-lexer-rules-in-antlr)

² [ANTLR中的“片段”是什么意思？](https://stackoverflow.com/questions/6487593/what-does-fragment-means-in-antlr)***

# objective-c - Xcode连接网络共享列表狮子/山狮

> ID：11870880
> 
> 赞同：1
> 
> 时间：2012-08-08T18:31:35.880
> 
> 标签：objective-c, xcode

是否可以在 xcode 中获取所有连接的网络共享/远程卷的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:35:52.387

是的，看看[GETFSSTAT](https://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man2/getfsstat.2.html)。

> getfsstat -- 获取所有已挂载文件系统的列表

# ruby-on-rails - Functional Testing with API Versioning?

> ID：11870882
> 
> 赞同：0
> 
> 时间：2012-08-08T18:31:49.610
> 
> 标签：ruby-on-rails, json, api, versioning, functional-testing

I followed the [RailsCast #350 REST API Versioning](http://railscasts.com/episodes/350-rest-api-versioning) and [#352 Securing an API](http://railscasts.com/episodes/352-securing-an-api) which creates an API under `app/controllers/api/v1` so you can type in `localhost:3000/api/v1/restaurants` and you'll get the JSON for restaurants index.

I want to be able to do some functional testing. I've been trying to figure this out but am not sure how to do this.

Here's what I've done so far:

I created `api_v1_restaurants_controller_test.rb` in my `test/functional` folder and did something like this:

```
require 'test_helper'
include Devise::TestHelpers

class ApiV1RestaurantsControllerTest < ActionController::TestCase
  fixtures :users, :roles, :restaurants, :menus, :ingredients, :dishes, :drinks

  setup do
    @restaurant = restaurants(:applebees)
    @user = users(:admin)
    @api = api_keys(:one)
  end

  test "should get restaurant index json data" do   
    assert_routing(
        'api/v1/restaurants',
        {:controller => 'api/v1/restaurants', :action => 'index', :format => 'json', :api_key => @api},
        {},
        {:api_key => @api}
    )
  end 
```

The `should get restaurant index json data` test seems to work but I want to be able to test to see whether `api/v1/restaurants/1?api_key=123456789` generates JSON, which it should.

Here what I've tried to write up:

```
test "should get restaurant id json data" do
  get 'api/v1/restaurants', :format => :json, :api_key => @api
  # get :get, :format => :json, :api_key => @api

  json = JSON.parse(@response.body)

  assert_equal Restaurant.first.id, json.first["id"]
end 
```

But I get the following error on my console after running `rake test:functionals`:

```
test_should_get_restaurant_id_json_data(ApiV1RestaurantsControllerTest):
RuntimeError: @controller is nil: make sure you set it in your test's setup method. 
```

## Update 1: Defined `@controller`

So I listened to the error message and defined `@controller` under my `setup do...` as `@controller = Api::V1` but now get the following error message on the console:

```
test_should_get_restaurant_id_json_data(ApiV1RestaurantsControllerTest):
NoMethodError: undefined method `response_body=' for Api::V1:Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:42:54.433

我终于能够弄清楚这一切。

您需要这样定义`@controller`：

```
setup do
  ...
  @api = api_keys(:one)
  @restaurant = restaurants(:applebees)
  @controller = Api::V1::RestaurantsController.new
end 
```

然后您应该能够创建这样的测试来测试您的 JSON：

```
test "json should be valid" do
  get :show, :format => :json, :api_key => @api.access_token, :id => @restaurant.id
  json = JSON.parse(@response.body)

  assert_equal @restaurant.id, json["id"]
  ...
end 
```

如果您需要查看正在生成什么 JSON，您可以简单地编写（在您的`test`块内）：

```
puts json # This will output the entire JSON to your console from JSON.parse(@response.body) 
```

我希望这对其他人也有帮助。

# git - vim 说“不支持鼠标”，但只有当我运行 git commit

> ID：11870884
> 
> 赞同：26
> 
> 时间：2012-08-08T18:31:54.247
> 
> 标签：git, vim

我喜欢在 vim 中使用鼠标，所以我的`.vimrc`. 这在任何地方都可以正常工作，但是每当我`git commit`在特定服务器（Appa）上运行时，我都会收到一条错误消息：

```
[tswett@appa git]$ git commit
Error detected while processing /home/tswett/.vimrc:
line    1:
E538: No mouse support: mouse=a
Press ENTER or type command to continue
Aborting commit due to empty commit message.
[tswett@appa git]$ 
```

我最终得到一个没有鼠标支持和语法高亮的 vim 会话。

如果我`git commit`在不同的服务器或本地机器上运行，我确实有鼠标支持和语法突出显示。同样，每当我使用 vim在 Appa 上编辑任何*其他内容时，我都有鼠标支持和语法高亮显示。*如果我`set mouse=a`从 Appa 中删除该行`.vimrc`然后在 Appa*上*运行`git commit`，我将不再收到错误消息，但我也不会获得语法高亮显示。

我怎样才能让 vim 、`git commit`和 Appa 相互配合？

Appa 的操作系统是 RHEL 6.3 (Santiago)；Appa的vim是7.2版本；Appa 的 git 版本是 1.7.1。这是我的`.vimrc`（所有机器都相同）：[https ://github.com/tswett/setup/blob/c84c8908a04a1d925d90da3da4f2fc83bf56172b/.vimrc](https://github.com/tswett/setup/blob/c84c8908a04a1d925d90da3da4f2fc83bf56172b/.vimrc)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-08T18:49:03.637

`vim`在 Appa 上的其他行为是否正确？也就是说，您是*每次*运行时出现问题`vim`，还是*仅*在使用时出现问题`git commit`？

如果是前者：

你确定它`git commit`正在运行`vim`吗？许多应用程序默认`vi`在没有任何其他配置的情况下使用，并且通常用于（a）缺少许多花哨功能`vi`的非常小的版本或（b）完全不同的东西。`vim`

尝试显式设置`core.editor`并`vim`查看会发生什么：

```
git config --global core.editor vim 
```

或者，您也可以设置您的`EDITOR`和`VISUAL`环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:44:45.800

鼠标支持可以在特定的 vim 版本中启用或禁用。您可以使用以下命令查看启用/禁用了哪些功能：`:version`。在 Appa 机器上，您可能会`-mouse`在列表中看到。

唯一的解决方案是使用带有鼠标支持的 vim。除非您控制服务器，否则这意味着：

*   自己编译或获取平台的编译可执行文件，
*   将其保存在用户本地`bin`目录中，并且
*   将`EDITOR`环境变量设置为指向您自己的vim。

# c++ - dealing with stdafx.h when have separate directory library

> ID：11870885
> 
> 赞同：0
> 
> 时间：2012-08-08T18:31:56.927
> 
> 标签：c++, visual-studio-2010

I have library that consist of many directories each of them contains `libX.cpp` and `libX.h` files where `X` is directory name. One `libX` might be used in different projects. Problem is that while compiling each project asks include `stdafx.h` in `libX.cpp`. I suppose I must include `stdafx.h` file that was generated for current project (correct me if I'm wrong). Ok, I'm writing `#include "some_absolute_path1\stdafx.h"` in for example `libA.cpp` file. But I'm using the same libA.cpp in another project and then I must change line

```
#include "some_absolute_path1\stdafx.h" 
```

to

```
#include "some_absolute_path2\stdafx.h" 
```

It is not very comfortable to change stdafx.h path while switching between projects.

What is best way to deal in that situation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:49:11.060

当您的 lib 使用该文件中定义的某些要包含的资源时，任何包含都是必需的。如果你需要包含 stdafx.h 是因为你有一些强制它的依赖。您应该查看是什么原因导致您需要将此项目相关文件包含在您的库中（不是特定于项目）

我发现这篇文章：[http ://en.wikipedia.org/wiki/Precompiled_header](http://en.wikipedia.org/wiki/Precompiled_header)

然后我会尝试将 stdafx.h 移动为 main.cpp 中的第一个包含，您还可以在其中包含您的 libx.h 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:36:51.000

您可以根本不使用 stdafx.h。它仅用于预编译头文件。

你可以做`#include "some_absolute_path2\libX.h"`

如果您仍想使用预编译头文件，您只需`#include "some_absolute_path2\libX.h"`在需要该库的项目的 stdafx.h 中即可。

# inno-setup - How to create multiple setup applications with one .iss config?

> ID：11870886
> 
> 赞同：4
> 
> 时间：2012-08-08T18:32:08.067
> 
> 标签：inno-setup

Is it possible for one .iss file to produce different setup exes at the same time? maybe with multiple [Setup] sections?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:42:52.940

不能同时创建多个输出设置 exe，但可以从单个脚本创建多个。

关键是使用 ISPP`#define`和`#ifdef`/或`#if`指令来指定脚本的某些部分，这些部分仅在定义特定变量或赋予特定值时才编译。`iscc`然后，您可以使用批处理脚本调用`/dVAR`or`/dVAR="VALUE"`参数（相当于 a `#define`）来为每次编译选择不同的条件。

但是，这仅在脚本基本相同时才真正有用（例如，如果您想为应用程序的不同“版本”制作单独的安装程序，而不是包含最大版本的所有文件并在运行时决定安装哪个） . 如果您的脚本彼此完全不同，那么您应该只创建单独的脚本并从批处理文件或自动构建脚本编译它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:55:16.527

***测试结果：***

通过运行一个简单的测试......不，这是不可能的。首先，您可以在脚本中的多个位置引入部分。考虑您可以在脚本中执行以下操作：

```
[Setup]
AppName=My Program 1
AppVersion=1.5

[Files]
Source: "MyProg.exe"; DestDir: "{app}"

[Setup]
DefaultDirName={pf}\My Program 
```

从中可以看出，`[Setup]`如果您可以在一个脚本文件中为更多部分编写脚本，编译器将无法识别哪个部分属于哪个设置。

***解决方法：***

但是，如果您需要在基本级别上自动化构建过程，您可以创建一个批处理文件并通过命令行为所有脚本运行编译器。请参阅[`the reference`](http://www.jrsoftware.org/ishelp/topic_compilercmdline.htm)命令行编译器用法。

如果您将使用相同的输出目录编译多个脚本，请不要忘记[`OutputBaseFilename`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_outputbasefilename)为每个脚本文件指定不同的指令值（输出 exe 名称）。

# java - Fix relative paths of script/css while rewriting URLs

> ID：11870887
> 
> 赞同：3
> 
> 时间：2012-08-08T18:32:12.173
> 
> 标签：java, jsf-2, url-rewriting, prettyfaces

I'm working with JSF2.1 and RichFaces 4.1 in JBoss AS 6.1.0.Final. Right now, I'm focused in rewriting the URLs. After trying different approaches I decided to stick to PrettyFaces since it's really intuitive to use (and got it working in a couple of minutes).

There's a problem tough. The relative links to scripts/css got messed up because the URLs changed and the relative paths end up in 404\. I can use absolute paths but that would force me to change many of the pages and to expose application's structure in the page's source code.

I'm thinking about a temporal workaround: Giving the backing bean the responsibility of managing the different levels of those relative links but re-using beans makes this a delicate matter.

My question is, is there defined way or best practice to manage this relative paths while rewriting the URLs?

**EDIT**

h:outputStylesheet and h:outputScript worked like a charm. All that remains is solving a little issue with CSSs referencing images in a relative way. Take this structure:

```
-------/resources
       |
       ---_img
       |
       ---_css
       |
       ---_js 
```

A CSS file in the folder `_css` references the image `image1.png` located in the `_img` folder with the relative path `../_img/image1.png`. The problem is that this ends up in 404 because it does not find the image in `/myApp/javax.faces.resource/_img/image1.png`.

Changing every `../` for `#{request.contextPath}/resources` inside the CSSs seems to work just fine but I wonder if there is a better way to do it. The relative path approach not working seems strange to me.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T19:05:11.790

首先，我不明白他们到底是如何以及为什么搞砸的。你不是很清楚。您很可能出于某种原因硬编码纯 HTML`<script>`和`<link>`(and `<img>`) 元素，而不是使用 JSF 提供的[`<h:outputScript>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputScript.html)和[`<h:outputStylesheet>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputStylesheet.html)(and [`<h:graphicImage>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/graphicImage.html)) 组件。这些 JSF 组件可以采用相对于`/resources`文件夹的资源名称，它们将自动为上下文路径添加前缀，以便它以域相对 URL（带前导斜杠）而不是请求相对 URL（不带前导削减）。

给定以下文件夹结构（`/resources`文件夹名称是预定义的；您不能更改其名称）：

```
WebContent
 |-- resources
 |    |-- css
 |    |    `-- style.css
 |    |-- img
 |    |    `-- logo.png
 |    `-- js
 |         `-- script.js
 |-- page.xhtml
 : 
```

然后您应该能够让 JSF 自动生成正确的`<script>`, `<link>`(and `<img>`) 元素，如下所示：

```
<h:head>
    <h:outputStylesheet name="css/style.css" />
    <h:outputScript name="js/script.js" />
</h:head>
<h:body>
    <h:graphicImage name="img/logo.png" />
</h:body> 
```

### 也可以看看：

*   [如何在 Facelets 模板中引用 CSS / JS / 图片资源？](https://stackoverflow.com/questions/8367421/how-to-reference-resource-in-facelets-template)
*   [JSF 2 规范](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)- 第 2.6 章资源处理

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T19:11:06.657

您需要对 CSS 文件使用绝对 URL，例如：

```
/path/to/style.css 
```

代替：

```
../style.css 
```

如果可以的话，您还希望避免硬编码 url，并使用 JSF2 资源重定位功能：`<h:outputStylesheet>`和`<h:outputScript>`

以下是一些可能有帮助的链接：

[http://ocpsoft.org/support/topic/problem-with-prettyfaces-and-primefaces](http://ocpsoft.org/support/topic/problem-with-prettyfaces-and-primefaces)

# knockout.js - Array in knockout

> ID：11870888
> 
> 赞同：0
> 
> 时间：2012-08-08T18:32:15.773
> 
> 标签：knockout.js, knockout-2.0

I have two array of Knockout selectedSocialNetworks and List_2 all of this list can contain one social network (twitter or facebook) or both (twitter and facebook)

```
<script id="socNetchoiceTmpl" type="text/html">         
 <ul data-bind="foreach: socialNetworksList, visible: socialNetworksList().length > 0">
     <li>
        <input type="checkbox" data-bind="value: $data, checked:  
            $parent.selectedSocialNetworks" /><span data-bind="text: $data"/>
    </li>
 </ul> 
```

```
 function SocialNetChoicesViewModel() {
    var self = this;
    self.socialNetworksList = ko.observableArray([]);
    self.selectedSocialNetworks = ko.observableArray([]);
    self.List_2 = ko.observableArray([]);        

    self.save = function () {
      if(....){
            $.ajax("/Home/SocialNetworksChoice", {
              data: ko.toJSON({ selectedSocialNetworks: self.selectedSocialNetworks }),
              type: "post", contentType: "application/json",
              success: function (result) {
                if (result.Success) {
                    //alert(result.Message);
                }
                else {
                    alert(result.Message);
                }
              }
            });
       }
       else{
          $.ajax("/Home/Authentification", {
              data: ko.toJSON({ socialNetworks: self.List_2 }),
              type: "post", contentType: "application/json",
              success: function (result) {
                if (result.Success) {
                    //alert(result.Message);
                }
                else {
                    alert(result.Message);
                }
              }
            });
       }
    };
    // Load initial state from server, convert it to Task instances,
    // then populate self.tasks
    $.getJSON("/Home/SocialNetworksChoice", function (allData) {
        var mappedItems = $.map(allData, function (item) { return item });
        self.socialNetworksList(mappedItems);
    });

    $.getJSON("/Home/Authentification", function (allData) {
        var mappedItems = $.map(allData, function (item) { return item });
        self.List_2(mappedItems);
    });
 }; 
```

I want to detect wish social network doesn't contain in my List_2 and its in selectedSocialNetworks

I m using if than else to detect if List_2 = selectedSocialNetworks execute instruction in if ...

I'm Sorry for my bad english,

thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T13:34:42.210

您可能做的最好的事情是创建一个 ko.computed 函数，该函数将返回一个具有您想要的输出的新数组。然后，您可以绑定计算的。

你可以自己执行循环逻辑并输出一个新数组，或者如果你很懒，你可以使用 underscore.js (_)，如果我没记错的话，它有很多很好的函数可以自动为你处理数组。

# php - PHP: connecting to db on host IP vs using 127.0.0.1

> ID：11870889
> 
> 赞同：0
> 
> 时间：2012-08-08T18:32:16.397
> 
> 标签：php, database, hosting, localhost

When I connect to a mysql database in PHP, and the db is hosted on the same machine as the site itself, I can either use the machine's IP, or 127.0.0.1

Is there a difference in performance between the two? Is there a guideline for when I should use 127.0.0.1?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:35:30.700

当您想连接到本地机器时，您应该始终使用`localhost`或`127.0.0.1`，因为服务器可能会拒绝访问任何其他接口。另外，当 IP 更改时，您需要做大量工作来更改您放置在某处的 IP 的每一次出现。

但是，环回地址应该稍微快一点，但我想没有人可以以可靠的方式测量它，因此：你不应该关心。而且，当您无论如何都使用环回时（如上所述），那么您就安全了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:34:47.067

这两个请求最终都会在到达接口之前到达内核路由表。除非环回地址具有内核优化，否则不应该有任何影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T18:35:32.403

通过 127.0.0.1 连接可能会带来非常小的（不明显）性能优势，因为它不需要在连接时检查那么多防火墙/路由规则。

如果您可以选择，请通过 unix 域套接字（通常类似于`/tmp/mysql.sock`）进行连接。通过这种方法进行连接有一定的性能提升，同时也提高了安全性。

**编辑**

根据 MarcB 的评论，显然连接方式`localhost`将自动尝试通过域套接字进行连接。如前所述，这是首选且性能最高的方法，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:40:35.473

除非服务器上有一些非常奇怪的网络配置，否则性能应该是相同的。

至于指导方针，这取决于，如果您的数据库服务器将来可能会更改，也许您应该将该 url 存储在某个 xml 文件或任何文件中，以便应用程序稍后可以读取该配置。通过这样做，您不必担心使用任何 ip 甚至主机名或 localhost。您甚至可以尝试为此查看 DynamicDns。

如果服务器不太可能改变，那么不要太担心。使用 'localhost' 而不是任何 ip，以防万一服务器 ip 发生变化。文件选项仍然是一个很好的做法，但如果您不使用它，它不会对您造成太大伤害。

# linq - Linq To Sql Where 不调用重写的 Equals

> ID：11870894
> 
> 赞同：0
> 
> 时间：2012-08-08T18:32:39.723
> 
> 标签：linq, c#-4.0, linq-to-sql, equals, equals-operator

我目前正在做一个项目，我将对类似的非数据库（本讨论的服务层对象）对象和通过 LinqToSql 从数据库检索到的对象进行大量比较。为了便于讨论，假设我有一个服务层 Product 对象，其中包含一个在数据库中表示的字符串字段。但是，在数据库中，还有一个主键 Id 并没有在服务层中表示出来。

因此（就像我经常为单元测试等所做的那样），我覆盖了 Equals(Object)、Equals(Product) 和 GetHashCode 并实现了 IEquatable，并期望我能够编写如下代码：

```
myContext.Products.Where(p => p.Equals(passedInProduct).SingleOrDefault(); 
```

等等。

Equals 覆盖已经过测试并且可以工作。这些对象是可变的，因此通常的警告适用于 GetHashCode 覆盖。但是，出于本示例的目的，除了 LtS 之外，不会修改对象，并且可以将其设为只读。

这是一个简单的测试：

*   在内存中创建一个测试对象并提交到 LtS 上下文。通过提交，测试对象填充了一些自动生成的字段。
*   在内存中创建另一个相同的测试对象（单独参考）
*   尝试使用第二个对象作为标准从数据库中检索第一个对象。（见上面的代码行）。

    ```
     // Setup
        string productDesc = "12A";
        Product testProduct1 = _CreateTestProductInDatabase(productDesc);
        Product testProduct2 = _CreateTestProduct(productDesc);

        // check setup
        Product retrievedProduct1 = ProductRepo.Retrieve(testProduct1);
        //Assert.IsNotNull(retrievedProduct1);

        // execute - try to retrieve the 'equivalent' product object
        Product retrievedProduct2 = ProductRepo.Retrieve(testProduct2); 
    ```

Retrieve 的简化版本（删除的只是参数检查等）：

```
using (var dbContext = new ProductDataContext()) {
    Product retrievedProduct = dbContext.Products
         .Where(p => p.Equals(product)).SingleOrDefault(); 
```

注意：重写的 Equals 方法知道不关心数据库中自动生成的字段，只查看服务层中表示的字符串。

以下是我观察到的结果： 在 testProduct1 上检索成功（毫不奇怪，通过引用相等） 在 testProduct2 上检索失败（null） 在 Retrieve 方法中调用的被覆盖的 Equals 方法在任何一个 Retrieve 调用期间都不会被命中 但是，被覆盖的 Equals 方法被多次调用通过 SubmitChanges 上的上下文（在数据库中创建第一个测试对象时调用）（按预期工作）。

静态地，编译器知道被发射的对象的类型并且能够解析该类型。

所以我的具体问题：

*   我是否试图做一些不明智的事情？似乎是对 Equals 的直接使用。
*   第一个问题的推论：处理 linq to sql 相等性检查的替代建议，同时将比较详细信息保留在对象而不是存储库中
*   为什么我可能观察到在 SubmitChanges 中解决了 Equals 方法，但在 Where 子句中没有解决？
*   我对理解和让我的 Equals 调用工作一样感兴趣。但我也很想学习如何使这种“模式”发挥作用，而不仅仅是理解为什么它在 LtS 和 C# 的竞赛中看起来是一种“反模式”。

请不要建议我直接使用 Where 语句在上下文中进行过滤。显然，我可以删除 Equals 调用并执行此操作。但是，其他一些对象（此处未显示）很大且有点复杂。为了维护和清晰起见，我想知道如何将自己与另一个自己类型的地方进行比较，最好是作为所讨论对象的一部分。

我尝试过的其他一些没有改变行为的事情：

*   重载并使用 == 代替
*   将 lambda 变量转换为类型 p => (Product)p
*   首先获取一个 IQueryable 对象并在 Where 子句中调用 Equals

我尝试过的其他一些不起作用的方法：

*   创建静态 ProductEquals(Product first, Product second) 方法：System.NotSupportedException：不支持对 SQL 的转换。

感谢 StackOverflow 的贡献者！

关于可能的重复：我已经阅读了大约 10 个其他问题。我想要一个指向完全重复的指针，但大多数似乎并没有直接解决 LinqToSql 的奇怪之处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:36:34.327

> 我是否试图做一些不明智的事情？

绝对地。考虑一下 LINQ to SQL 的作用：它创建查询的 SQL 表示。它*不*知道您的覆盖`Equals`方法做了什么，因此无法将该逻辑转换为 SQL。

> 第一个问题的推论：处理 linq to sql 相等性检查的替代建议，同时将比较详细信息保留在对象而不是存储库中

您需要对表达式树做一些事情来以这种方式表示相等性 - 然后将这些表达式树构建成一个完整的查询。这不会很有趣，但它应该是可能的。不过，它会影响您构建所有查询的方式。

我本来*希望*大多数数据库表示都是基于 ID 的，所以你应该能够比较 ID 是否相等。通常，当我看到尝试以 OO 方式对数据进行真正建模但将其存储在数据库中时，抽象的泄漏会造成很多痛苦。

> 为什么我可能观察到在 SubmitChanges 中解决了 Equals 方法，但在 Where 子句中没有解决？

大概`SubmitChanges`是针对一组内存中的对象来计算发生了什么变化——它不需要对 SQL 进行任何转换来完成那部分。

# java - In Eclipse System.out.print does not print anything on console (Running Eclipse as super user does)

> ID：11870896
> 
> 赞同：2
> 
> 时间：2012-08-08T18:32:43.640
> 
> 标签：java, linux, eclipse, ubuntu

When I run a simple Hello-World application using eclipse does not print anything on the console. I have installed Eclipse Indigo using apt-get on Ubuntu. Here is the trivial program I am trying to run:

```
public class testJava {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        System.out.println("Hello Java!!!");
    }

} 
```

When I run it as Java application it just shows me termination messages on console

Strangely if I run Eclipse in Super user mode (sudo Eclipse) I can see the Hello Java message printed on console. Can anyone explain me the reason for this anomaly

# asp.net - 将 json 反序列化为匿名类型列表

> ID：11870906
> 
> 赞同：7
> 
> 时间：2012-08-08T18:33:37.023
> 
> 标签：asp.net, json, anonymous-types, servicestack

我有一个如下的json：

```
 "[{"a":"b","c":"d"},{"a":"e","c":"f"},{"a":"g","c":"h"}]" 
```

现在我想将其反序列化为匿名类型“foo”的对象列表

```
 var foo=new { a=string.empty , c=string.empty }; 
```

代码是：

```
 ServiceStackJsonSerializer Jserializer = new ServiceStackJsonSerializer();
  dynamic foos = Jserializer.Deserialize<List<foo.GetType()>>(jsonString); 
```

但不工作。

更新 ：

替换`ServiceStack`和`JavascriptSerializer`传递`dictionary[]`解决了问题，无需`anonymous`键入

```
 JavaScriptSerializer jSerializer = new JavaScriptSerializer();
        var Foos = jSerializer.Deserialize<Dictionary<string, object>[]>(jsonString); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:48:41.607

我不知道`Jserializer`类是什么，但我知道[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类。不幸的是，它不支持反序列化为匿名类型。您必须像这样创建一个具体类型：

```
class Foo
{
    public string a { get; set; }

    public string c { get; set; }
} 
```

使用以下代码对我有用：

```
const string json =
    @"[{""a"":""b"",""c"":""d""},{""a"":""e"",""c"":""f""},{""a"":""g"",""c"":""h""}]";

var foos = new JavaScriptSerializer().Deserialize<Foo[]>(json); 
```

该变量将包含一个实例`foos`数组。`Foo`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T05:04:26.673

有多种方法可以[使用 ServiceStack 的 JsonSerializer 动态解析 JSON，](https://github.com/ServiceStack/ServiceStack.Text/blob/master/tests/ServiceStack.Text.Tests/UseCases/GitHubRestTests.cs)例如：

```
var json = "[{\"a\":\"b\",\"c\":\"d\"},{\"a\":\"e\",\"c\":\"f\"},{\"a\":\"g\",\"c\":\"h\"}]";

var dictionary = json.FromJson<List<Dictionary<string, string>>>();
".NET Collections:".Print();
dictionary.PrintDump();

List<JsonObject> map = JsonArrayObjects.Parse(json);
"Dynamically with JsonObject:".Print();
map.PrintDump(); 
```

它使用[ServiceStack 的 T.Dump() 扩展方法](https://stackoverflow.com/questions/360277/what-is-the-best-way-to-dump-entire-objects-to-a-log-in-c/3514115#3514115)打印出：

```
.NET Collections:
[
    {
        a: b,
        c: d
    },
    {
        a: e,
        c: f
    },
    {
        a: g,
        c: h
    }
]
Dynamically with JsonObject:
[
    {
        a: b,
        c: d
    },
    {
        a: e,
        c: f
    },
    {
        a: g,
        c: h
    }
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:51:19.490

对于您正在尝试做的事情，听起来 json.net 会更合适。看到这个问题 [Deserialize json object into dynamic object using Json.net](https://stackoverflow.com/questions/4535840/deserialize-json-object-into-dynamic-object-using-json-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-18T19:17:34.400

下面的示例可以使用[NewtonSoft.Json](https://github.com/JamesNK/Newtonsoft.Json)的[DeserializeAnonymousType](https://www.newtonsoft.com/json/help/html/DeserializeAnonymousType.htm)方法将 JSON 反序列化为匿名对象**列表。**

```
var json = System.IO.File.ReadAllText(@"C:\TestJSONFiles\yourJSONFile.json");
var fooDefinition = new { a = "", b = 0 }; // type with fields of string, int
var fooListDefinition = Enumerable.Range(0, 0).Select(e => fooDefinition).ToList();

var foos = JsonConvert.DeserializeAnonymousType(json, fooListDefinition); 
```

# arm - ARM NEON 的 SSE _mm_movemask_epi8 等效方法

> ID：11870910
> 
> 赞同：8
> 
> 时间：2012-08-08T18:33:46.077
> 
> 标签：arm, sse, neon

我决定继续快速弯道优化并坚持 `_mm_movemask_epi8`SSE 指令。如何通过`uint8x16_t`输入为 ARM Neon 重写它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T07:58:43.757

我知道这篇文章已经过时了，但我发现提供我的（经过验证的）解决方案很有用。它假定 Input 参数的每个通道中的所有 1/所有 0。

```
const uint8_t __attribute__ ((aligned (16))) _Powers[16]= 
    { 1, 2, 4, 8, 16, 32, 64, 128, 1, 2, 4, 8, 16, 32, 64, 128 };

// Set the powers of 2 (do it once for all, if applicable)
uint8x16_t Powers= vld1q_u8(_Powers);

// Compute the mask from the input
uint64x2_t Mask= vpaddlq_u32(vpaddlq_u16(vpaddlq_u8(vandq_u8(Input, Powers))));

// Get the resulting bytes
uint16_t Output;
vst1q_lane_u8((uint8_t*)&Output + 0, (uint8x16_t)Mask, 0);
vst1q_lane_u8((uint8_t*)&Output + 1, (uint8x16_t)Mask, 8); 
```

（无论如何，请注意[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47553](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47553)。）

与 Michael 类似，诀窍是形成非空条目的索引的幂，并将它们成对相加 3 次。这必须通过增加数据大小来完成，以使每次添加的步幅加倍。您从 2 x 8 8 位条目减少到 2 x 4 16 位，然后是 2 x 2 32 位和 2 x 1 64 位。这两个数字的低字节给出了解决方案。我认为没有一种简单的方法可以使用 NEON 将它们打包在一起形成一个单一的短值。

如果输入形式合适并且可以预加载电源，则需要 6 条 NEON 指令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-10-14T17:04:18.193

这里似乎完全错过了明显的解决方案。

```
// Use shifts to collect all of the sign bits.
// I'm not sure if this works on big endian, but big endian NEON is very
// rare.
int vmovmaskq_u8(uint8x16_t input)
{
    // Example input (half scale):
    // 0x89 FF 1D C0 00 10 99 33

    // Shift out everything but the sign bits
    // 0x01 01 00 01 00 00 01 00
    uint16x8_t high_bits = vreinterpretq_u16_u8(vshrq_n_u8(input, 7));

    // Merge the even lanes together with vsra. The '??' bytes are garbage.
    // vsri could also be used, but it is slightly slower on aarch64.
    // 0x??03 ??02 ??00 ??01
    uint32x4_t paired16 = vreinterpretq_u32_u16(
                              vsraq_n_u16(high_bits, high_bits, 7));
    // Repeat with wider lanes.
    // 0x??????0B ??????04
    uint64x2_t paired32 = vreinterpretq_u64_u32(
                              vsraq_n_u32(paired16, paired16, 14));
    // 0x??????????????4B
    uint8x16_t paired64 = vreinterpretq_u8_u64(
                              vsraq_n_u64(paired32, paired32, 28));
    // Extract the low 8 bits from each lane and join.
    // 0x4B
    return vgetq_lane_u8(paired64, 0) | ((int)vgetq_lane_u8(paired64, 8) << 8);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T21:37:20.210

经过一些测试，看起来以下代码可以正常工作：

```
int32_t _mm_movemask_epi8_neon(uint8x16_t input)
{
    const int8_t __attribute__ ((aligned (16))) xr[8] = {-7,-6,-5,-4,-3,-2,-1,0};
    uint8x8_t mask_and = vdup_n_u8(0x80);
    int8x8_t mask_shift = vld1_s8(xr);

    uint8x8_t lo = vget_low_u8(input);
    uint8x8_t hi = vget_high_u8(input);

    lo = vand_u8(lo, mask_and);
    lo = vshl_u8(lo, mask_shift);

    hi = vand_u8(hi, mask_and);
    hi = vshl_u8(hi, mask_shift);

    lo = vpadd_u8(lo,lo);
    lo = vpadd_u8(lo,lo);
    lo = vpadd_u8(lo,lo);

    hi = vpadd_u8(hi,hi);
    hi = vpadd_u8(hi,hi);
    hi = vpadd_u8(hi,hi);

    return ((hi[0] << 8) | (lo[0] & 0xFF));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-07T17:08:35.623

对于 aarch64，这个问题值得一个更新的答案。向 Armv8 添加的新功能允许以更少的指令实现相同的功能。这是我的版本：

```
uint32_t _mm_movemask_aarch64(uint8x16_t input)
{   
    const uint8_t __attribute__ ((aligned (16))) ucShift[] = {-7,-6,-5,-4,-3,-2,-1,0,-7,-6,-5,-4,-3,-2,-1,0};
    uint8x16_t vshift = vld1q_u8(ucShift);
    uint8x16_t vmask = vandq_u8(input, vdupq_n_u8(0x80));
    uint32_t out;

    vmask = vshlq_u8(vmask, vshift);
    out = vaddv_u8(vget_low_u8(vmask));
    out += (vaddv_u8(vget_high_u8(vmask)) << 8);

    return out;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T20:04:40.220

请注意，我还没有测试过这些，但这样的事情可能会起作用：

```
X := the vector that you want to create the mask from
A := 0x808080808080...
B := 0x00FFFEFDFCFB...  (i.e. 0,-1,-2,-3,...)

X = vand_u8(X, A);  // Keep d7 of each byte in X
X = vshl_u8(X, B);  // X[7]>>=0; X[6]>>=1; X[5]>>=2; ...
// Each byte of X now contains its msb shifted 7-N bits to the right, where N
// is the byte index.
// Do 3 pairwise adds in order to pack all these into X[0]
X = vpadd_u8(X, X); 
X = vpadd_u8(X, X); 
X = vpadd_u8(X, X);
// X[0] should now contain the mask. Clear the remaining bytes if necessary 
```

这需要重复一次以处理 128 位向量，因为`vpadd`仅适用于 64 位向量。

# java - 在这个 java 代码片段中实例化是如何发生的

> ID：11870912
> 
> 赞同：1
> 
> 时间：2012-08-08T18:33:53.123
> 
> 标签：java

我的代码是

```
class Alpha
{
public void foo()
    {
    System.out.print("Alpha ");
    }
}

class Beta extends Alpha
{
public void foo()
    {
    System.out.print("Beta ");
    }

public static void main(String[]args)
   {
    Alpha a = new Beta();
    Beta b = (Beta)a;

    a.foo();
    b.foo();
   }
} 
```

输出：-

```
Beta Beta 
```

我是java新手，我第一次遇到这种实例化，这就是为什么我无法理解为什么输出不是

```
Alpha Beta 
```

如果“a”是 Alpha 类的对象，那么为什么不调用 Alpha 的方法呢？

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:36:08.970

创建的对象是 type `Beta`，因为它是由`new`. 因此，当被调用时，无论您在代码中“调用”它什么`foo()`，它都在处理一个对象。`Beta`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:36:16.883

将对象转换或引用为其超类不会取消覆盖方法。即使您最初将其作为对象引用，该`foo()`方法仍在对象上被调用。`Beta``Alpha`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:36:38.320

当父类变量引用子类对象时，该引用将调用子方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:37:20.893

您只有一个 Beta 类型的对象。强制转换对象不会使 java 使用父方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T18:39:07.923

在java中，方法默认是虚拟的。在决定实际调用什么方法时，底层对象的类型很重要，而不是对象引用的类型。

# asp.net-mvc-3 - WebApi in MVC3, cannot hit my API Controller (500 internal error)

> ID：11870913
> 
> 赞同：0
> 
> 时间：2012-08-08T18:33:59.347
> 
> 标签：asp.net-mvc-3, asp.net-web-api, routes

I have the below route mapped in my AreaRegistration:

```
public override void RegisterArea(AreaRegistrationContext context)
    {
        if (context != null)
        {
            context.Routes.MapHttpRoute(
                name: "API_Default",
                routeTemplate: "Areas/Test/AIO/api/{controller}/{id}",
                defaults: new
                {
                    id = RouteParameter.Optional
                }); 
```

When I look at the Global.asax file, I can see the HttpRoute is being Registered, and is listed in the RouteTable.Routes as a {System.Web.Http.WebHost.Routing.HttpWebRoute}.

Problem is, when I go to the url... `https://myRoot/Areas/Test/AIO/api/AioApi/test` or `https://myRoot/Areas/Test/AIO/api/AioApi`, it's giving me a 500 internal server error.

I'm not sure how to view the actual error, when stepping thru the code I cannot see anything after it leaves Application_BeginRequest.

My controller code:

```
public class AioApiController : ApiController
{
    // GET api/<controller>
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    } 
```

Any insight as to why I cannot hit the API controller? I can hit my regular MVC controller in the same context.

Any help is greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:32:13.947

我在 WebApi 中发现的一件事是有两个 Route 集合：`System.Web.Routing.RouteCollection`和`System.Web.Http.HttpRouteCollection`. 我相信（但不记得）您需要使用后者才能使您的`ApiController`派生正常工作（幸运的是语法相同）。

# java - 显示图像时，Java Hello World 应用程序在启动时不执行任何操作

> ID：11870914
> 
> 赞同：0
> 
> 时间：2012-08-08T18:34:00.280
> 
> 标签：java, netbeans, jdk1.6

我有一个使用`JFrame`/创建的小型“hello world”应用程序`JPanel`，它在我的 IDE（Netbeans）中完美运行。我使用 仅在屏幕上绘制一个字符串对其进行了测试`Graphics.drawString()`，它在浏览器和构建的 .Jar 文件中都能完美运行。

我决定添加一个图像只是为了测试它（我是 Java 新手），并且应用程序继续在 IDE 中运行，但是构建的 .Jar 文件没有启动任何东西，或者给出错误或任何东西。

这是2个类文件：

Boxy_Main.java：

```
package boxy;

import javax.swing.JFrame;
import java.awt.*;

public class Boxy_Main extends JFrame {

    public static Boxy_Main main;

    public Boxy_Main() {
        add(new Board());
        setTitle("Boxy");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(467, 700);
        setLocationRelativeTo(null);
        setVisible(true);
        setResizable(true);
    }
    public static void main(String[] args) {
        main = new Boxy_Main();
    }
} 
```

板子.java：

```
package boxy;

import javax.swing.JPanel;
import java.awt.*;
import javax.swing.*;

public class Board extends JPanel {

    public Graphics2D g2d;
    public Graphics g;
    public Image hello_image;

    public Board() {

        this.set_properties();

    }

    public void set_properties() {

        this.hello_image = new ImageIcon(Board.class.getResource("../images/LKRZV.jpg")).getImage();

    }

    public void paint(Graphics g) {

        this.g = g;
        this.g2d = (Graphics2D) g;

        this.g2d.drawImage(this.hello_image, null, this);

        this.g.drawString("hello", 100, 80);
        this.g.drawString("world", 100, 94);

    }
} 
```

如果我注释掉

```
this.hello_image = new ImageIcon(Board.class.getResource("../images/LKRZV.jpg")).getImage(); 
```

和

```
this.g2d.drawImage(this.hello_image, null, this); 
```

它继续完美地工作。

我自己试图弄清楚这一点，我无法通过谷歌或堆栈溢出找到任何东西。这是一个很难制作的搜索短语。

任何人都知道为什么它会在 NetBeans 中运行，而不是作为独立的 .Jar 运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:39:05.900

你的问题在这一行

```
this.hello_image = new ImageIcon(Board.class.getResource("../images/LKRZV.jpg")).getImage(); 
```

当您在 NetBeans 中运行时，“../images.LKRZV.jpg”路径是正确的，但在您运行 JAR 时它是不正确的。确保提供相对于 jar 文件位置正确的路径。如果您将该路径更改为图像的绝对路径，您的程序应该可以正常工作。将图像与罐子一起打包可能会更好。

# android - Eclipse Android 生成 javadoc 警告

> ID：11870915
> 
> 赞同：2
> 
> 时间：2012-08-08T18:34:03.467
> 
> 标签：android, eclipse, javadoc

我正在尝试在 Eclipse 中为我的 Android 应用程序生成 javadoc。我已经完成了以下步骤：

文件 -> 导出 -> Java -> Javadoc -> 检查项目并输入目标，按完成

这会产生许多关于“找不到符号...”的警告/错误，类似于这篇[文章](https://stackoverflow.com/questions/8157433/javadoc-for-android-project-in-eclipse-fails-with-nullpointerexception)

按照该帖子的解决方案，我导出为创建 javadoc.xml 的 ant 脚本，然后将 android.jar 的路径添加到类路径字段。

如果我运行脚本，我会收到一条警告，内容如下：

> 警告：[选项] 引导类路径未与 -source 1.5 javadoc 一起设置：
> 
> 错误 - 非法包名：“”

控制台还显示正在为每个包加载源文件......，然后构建成功。但唯一生成的是一个空目录文档。

在寻找解决方案后，我发现一篇[文章](http://www.joshuajacobs.name/2009/05/05/intellij-javadoc-error-javadoc-error-illegal-package-name/)说问题来自于类路径名中的空格。我检查了我的路径，果然我在“程序文件”中有一个空间。我试图通过几种方式划分空间来解决这个问题，但我无法让它工作。只是为了看看会发生什么，我从类路径中删除了有问题的行，并且发生了同样的错误......所以这让我相信错误可能在其他地方。有任何想法吗？

**更新**

[我在这里](https://forums.oracle.com/forums/thread.jspa?messageID=6370402)找到了一个讨论，指出我要检查我的 CLASSPATH 环境变量。我有一个重复的值.. '.;' 和'%CLASSPATH%.;' 我删除了后者，错误消失了。

我仍然留下上面提到的警告，“引导类路径未与 -source 1.5 一起设置”。它不会引起我能注意到的任何问题，但如果有人知道解决它的方法，那就太好了

# c++ - 具有不同参数的工厂注册表 C++

> ID：11870927
> 
> 赞同：2
> 
> 时间：2012-08-08T18:34:54.247
> 
> 标签：c++, c++11, factory

我需要构造两个对象，`A`并且`B`. 这些`A`和`B`对象可以以不同的方式初始化。

**构建`A`（工作）的设计模式：**

`A`有子类`A_txt`, `A_tsv`,`A_csv`等。每个`A`子类型都是从一个`string`（文件路径）构造的，但每个子类型都以不同的方式加载文件。我已经建立了一个注册表，将文件类型（*例如* `txt`）映射到适当的工厂以创建该对象：

`txt`--> `A_txt_Factory`
`tsv`--> `A_tsv_Factory`
...

where`A_txt_factory`接收文件路径，将其作为文本文件加载，然后返回指向`A_txt`对象的指针。

一起，我将此注册表用作工厂：给定文件路径和文件类型，它会查找与该标记对应的工厂，并使用它来构造并返回指向`A`对象的指针。

我真的很喜欢这种组合注册表和工厂设计模式；其他人可以轻松地创建自己的文件类型和加载它的工厂，将其签入注册表并使用它而无需查看其他代码。

**要构建的设计模式`B`（我需要帮助）：**

构造`B`对象更加困难，因为它们并非都从相同的类型加载（*例如*，所有`A`子类型都使用`string`指示文件路径的 a 构造）。`B_text`将从文本文件（从提供的`string`指示文件路径）加载，但与以前不同，`B_intAndA`可能会从 int 和`A`.

我可以使用什么设计模式来创建`B`？和以前一样，我将有一个`string`标签来指示将使用哪个工厂；然而，与以前不同的是，每个工厂将接受不同的参数（可能还有不同数量的参数）。我想这可以通过可变参数的可变模板函数以某种方式完成（我使用的是 C++11，所以这是一个选项）。

**这种设计模式是否曾经出现在其他任何人身上（相同的基类，但构造了不同数量的不同类型的参数）？**

制作构建不同子类型的单个工厂很容易`B`，但很难知道如何允许它们使用注册表进行索引，因为它们接受不同类型和数量的参数。

你会怎么处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:45:22.443

在某个时间点 T [1]，要创建的 B 的种类是已知的。B 的种类意味着构造函数的签名。在某个时间点 T [2]（可能相同或更晚），B 被创建。

如果参数值在点 T [1]是已知的，那么如果 T [2] = T [1]只需在此处创建 B 并解决问题。否则，如果 T [2] > T [1]，将参数和创建调用存储在仿函数（例如）中，并将其传递给 T [2]`[=]() -> B* { return new B_int_and_A( 42, *anAPointer ); }`，例如作为 a 。`std::function`

[否则，如果在点 T 1]处不知道参数值，那么您必须有 T [2] > T [1]，并且无论 B 的种类如何，都必须在 T [2]处知道参数值。在这种情况下，将 B kind id 传递给 T [2]。然后在点 T [2]从 id 中查找参数和创建函数，例如在 a 中`switch`。

不过，我不明白这与 C++ 有什么关系。

有什么联系？

# java - 新的遗迹记录机制

> ID：11870928
> 
> 赞同：3
> 
> 时间：2012-08-08T18:34:54.367
> 
> 标签：java, logging, newrelic

是否有人在生产环境中使用[New Relic](http://newrelic.com/)进行应用程序或服务器监控？它似乎在 Pingdom 和 Zabbix 的同一类中。

更具体地说，New Relic 生产什么样的原木？它的[相关文档部分](https://newrelic.com/docs/dotnet/AgentDocumentation#logging)没有多说。他们是否使用（或兼容）第三方工具（例如，Apache Log4J），或者他们是否有自己的日志格式和模式？

如果此工具有任何开源日志示例，请提供指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T00:02:34.823

预先全面披露，我是一名新遗物开发者/传播者。

New Relic 代理不会生成日志，然后您将使用 Apache Log4J 之类的工具对其进行解析。代理从您的应用程序中收集数据（跟踪详细信息、数据库调用等）并将该数据发送到 New Relic 托管应用程序。要使用代理，您只需要安装它。您无需添加任何额外的检测代码或配置。

然后，您使用 New Relic 站点查看所有收集的数据，您将看到性能图表和慢速事务详细信息等内容。与进程日志不同，您可以获得完整的堆栈跟踪和慢速事务的 SQL 解释计划。

文档中对日志的引用通常用于解决代理问题。

****编辑**** Java 代理可以生成日志，从版本 2.6.0 开始。`audit_mode`在[你的配置](https://newrelic.com/docs/java/java-agent-configuration)中打开，你会在`newrelic_agent.log`. [您可以在此 gist](https://gist.github.com/3361966)中查看输出示例。

# html - 另一个 div 内的 div 高度不同

> ID：11870930
> 
> 赞同：0
> 
> 时间：2012-08-08T18:35:08.243
> 
> 标签：html, css

我在另一个 div 中有一个 div，我想知道为什么内部 div 的高度与其父级不同？我将父 div 的高度设置为 40px，但子 div 似乎没有拉伸到这个高度。div的高度我错了吗？

*让它变得简单*

```
<div id="first" style="height:40px"><div id="second"></div></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:43:56.563

一个 div 将仅与其中的内容一样高（参见[此示例](http://jsfiddle.net/ZTP2V/)）。要将子 div 扩展到其父级的高度，请添加`height: 100%`到子级。

**HTML：**

```
<div id="first">
    <div id="second"></div>
</div> 
```

**CSS：**

```
#first {
    height: 40px;
}

#second {
    height: 100%;;
} 
```

[JS 小提琴示例](http://jsfiddle.net/6RsrX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:49:30.030

如果要确保子 div 元素与父元素高度相同，则应使用 min-height。

```
<style type="text/css">
div.main
{
    width:auto;
    height:500px;
}

div.content
{ 
    width: 100%;
    min-height:90%;
    border:2px solid FF0000;
}

</style> 
```

在身体里

```
<div class="main">
<div class="content">
<stuff here>
</div>
</div> 
```

单独的属性高度在 IE 中并不总是被识别，这就是我喜欢使用最小高度的原因。

# security - 在公共网站上显示 TCM ID 是否存在安全问题？

> ID：11870932
> 
> 赞同：6
> 
> 时间：2012-08-08T18:35:10.957
> 
> 标签：security, tridion

在公共网站的 SiteEdit 指令中显示 TCM ID 是否存在安全问题？我的想法是这应该不是问题，因为 Tridion 位于防火墙后面。我想知道专家的意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T19:17:37.580

我想你在这里问错了问题。这些 SiteEdit 指令是否存在安全风险并不重要，它们应该只出现在您使用 SiteEdit 的发布目标上。在任何其他目标上，他们只是不必要地增加大小并公开与该目标的访问者无关的实现细节。

因此，除非您在公共网站上启用 SiteEdit（***极不可能***），否则 SiteEdit 说明不应出现在 HTML 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T19:48:55.273

这取决于您需要的安全级别。原则上，您的安全性应该非常好，以至于您不依赖“默默无闻的安全性”。你应该为每一个威胁建模，理解它，并设计出坚不可摧的防御。

在现实生活中，这有点难以实现，重点更多地放在通常被描述为“深度安全”的东西上。换句话说，您尽最大努力拥有坚不可摧的防御，但如果一些直截了当的纪律会让您的攻击者更加困难，那么您也要确保您也努力做到这一点。有大量证据表明，任何攻击的第一步都是尝试列举您正在使用的技术。然后，如果该技术存在任何已知漏洞，攻击者将尝试使用它们。此外，如果已知漏洞利用，攻击者将通过搜索受感染技术的签名来搜索潜在受害者。

在面向公众的输出中公开 TCM URI 与告诉攻击者您正在使用 Tridion 一样好。因此，就此而言，就是公开 SiteEdit 代码。如果您使用 Tridion，则完全没有必要做这些事情。您可以简单地显示一个不提供有关其实施线索的网站。（避免给出这些线索的能力将是许多大型组织选择 WCMS 的硬性要求，而 Tridion 在这方面的实力可能是您所在的组织选择使用它的原因之一。）

因此，虽然 TCM URI 中没有任何内容本身会导致安全问题，但它会不必要地向潜在的攻击者提供信息，所以是的，这是一个安全问题。金融机构、政府组织和一般的大公司会期望你做一个干净的实施，不会帮助坏人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T21:21:12.917

我认为它并没有真正提出问题。如果防火墙中有可能被破坏的漏洞，攻击者可能会找到一种方法来通过。防火墙后面有一个 Tridion CMS 安装的事实有点无关紧要。

无论您的源代码中是否包含 URI，您的实现都应该得到足够的保护，以使通过知道您拥有 Tridion CMS 获得的知识对黑客来说毫无价值。

# algorithm - 英国游客

> ID：11870938
> 
> 赞同：1
> 
> 时间：2012-08-08T18:35:29.793
> 
> 标签：algorithm, graph, dynamic-programming

“一名游客想从利物浦前往悉尼，并在此过程中访问了其他一些城市。

对于每一对城市，他可以乘坐*汽车*、*火车*或*轮渡*，每个选项都有**成本**和**时间**。

我们的目标是去辛迪，在此过程中穿越所有城市，同时将时间和成本降至最低。”

1-我如何验证这个问题是NP？给定总时间**T**和总成本**C** ?
即：如果我有 5 个节点，由 4 条边连接，每条边有 3 个选项（汽车、渡轮、火车），每个选项都有成本和时间

我如何处理约束？我只是尝试所有排列吗？

2-我需要有关实际解决方案的指导，我确实意识到这是[最小生成树](http://en.wikipedia.org/wiki/Minimum_spanning_tree)的一个子集，但现在我有两个限制，时间和成本......如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:07:39.627

这类问题用[匈牙利算法解决](http://en.wikipedia.org/wiki/Hungarian_algorithm)

# javascript - HTML 表单字段根据从下拉列表中选择的选项显示/隐藏

> ID：11870942
> 
> 赞同：0
> 
> 时间：2012-08-08T18:35:33.963
> 
> 标签：javascript, jquery, ajax, textfield, forms

今天，我在开发网站的过程中遇到了另一个大问题。我有一个带有一些基本 CSS 的普通表单。现在我想以这种方式使用表单，默认情况下会隐藏某些字段，将根据从下拉列表中选择的菜单激活相应的文本字段。我首先想到用其他方式来做 PHP，但这不适合我的要求。我想要一些无需刷新即可在同一页面上起作用的代码。所以我需要一些**JavaScript**或**jQuery**或**Ajax**工作。但我不擅长这门语言，所以我需要你的帮助。

在进行了大量的谷歌搜索之后，我发现了一段对我有用的 JavaScript 代码。那是[http://jsfiddle.net/ZxLU9/](http://jsfiddle.net/ZxLU9/)

但问题是它只适用于网站上给出的两个选项。我试图添加`id3`. 但是当我增加一个 id 时，代码就不再工作了。此外，虽然这段代码使用了**tbody** ，但隐藏的表单设计完全被破坏了。我在这里分享我的完整代码。在代码中有一些 PHP 代码，忽略它，我现在不关心这个。用我的实际设计解决这个问题。
请
您可以在这里访问完整的代码：http: [//jsfiddle.net/QvJH6/2/](http://jsfiddle.net/QvJH6/2/)

**检查名为 EXTRA 的字段。. . . 那就是我要放置该代码的地方。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:07:38.387

使用 Jquery 更改事件。

```
 $('#select_box').change(function() {
   if($(this).val() == "somevalue"){
     if($(this).next('input').css("display") == "none"){
          $(this).next('label').show();
          $(this).next('input').show();
      //Code to hide any existing fields go here.
     }
   }
 }); 
```

如果您使所有内容保持一致，那应该会起作用。如果没有，那么您将必须为每个选择框做一个并指定要显示的字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:12:09.697

//改变函数调用

//onchange="display(this,'text','image');"

//to // onchange="display(this,'text','image',invisible);"

//并且还将您在javascript中的显示功能更改为

```
function display(obj,id1,id2,id3) {
           txt = obj.options[obj.selectedIndex].value;
           document.getElementById(id1).style.display = 'none';
           document.getElementById(id2).style.display = 'none';
           document.getElementById(id3).style.display = 'none';
           if ( txt.match(id1) ) {
              document.getElementById(id1).style.display = 'block';
           }
           if ( txt.match(id2) ) {
              document.getElementById(id2).style.display = 'block';
           }
           if ( txt.match(id3) ) {
              document.getElementById(id2).style.display = 'block';
           } 
```

}

# .net - 从 IIS 中托管的另一个网站调用网站类

> ID：11870943
> 
> 赞同：0
> 
> 时间：2012-08-08T18:35:35.217
> 
> 标签：.net, wcf, web-services

我有 2 个网站（在同一目录下）托管在 IIS 中，比如网站 1（包含类 siteClass.CreateUser），比如网站 2（登录类）。目前在 Site2 解决方案中，我添加了对 Site 1 的项目引用，并从 Login Class 调用了 SiteClass.CreateUser 方法。这是正确的做法吗？我的理由是因为两个站点都存在于同一个父目录下并托管在 IIS 中，我认为创建项目引用而不是创建服务引用更好？这个可以吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:19:08.573

如果您的站点具有相同的逻辑，最好将其定义为通用逻辑层。它将包含`siteClass`共同使用的类和其他类（接口等）。

您的两个站点都应使用项目引用来引用该层。它对性能也更好。

如果您要构建面向服务的架构师，则应该使用服务参考。例如，如果您来自站点 1 的服务将具有多个（站点 2）客户端，或者您希望在不同服务器之间分配自治服务。

# delphi - Firemonkey 中的 GIF 动画

> ID：11870944
> 
> 赞同：5
> 
> 时间：2012-08-08T18:35:36.210
> 
> 标签：delphi, delphi-xe2, gif, animated-gif, firemonkey

我正在尝试使用 TImage 以 Firemonkey HD 形式显示动画 GIF，但我没有看到任何动画方法。

使用 Vcl.Imaging.gifImg 不是一个选项，因为类型不同。

有人可以建议一种解决此问题的方法或可能在 Firemonkey 下为 GIF 图像设置动画的组件吗？

我现在找到的唯一方法是：

1.  创建 TGIFImage 实例并加载 GIF 图片

2.  遍历 gif.images：

    一个。将当前图像保存到流

    湾。Image1.bitmap.loadFromStream [Image1 是 FMX:TImage]

有没有更聪明的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:53:00.510

您可以将**TBitmapListAnimation**与单个图像一起使用，该图像的每个动画帧都在一个长条内。例如，如果您的动画有 4 帧并且是 32 像素 x 32 像素，那么您需要创建一个 128 像素宽 x 32 像素高的图像并并排添加每一帧......

然后将**TImage**添加到表单中（您不必将位图加载到其中）

添加一个**TBitmapListAnimation**与 TImage 作为它的父级

双击**AnimationBitmap**并加载您的动画图像条

下拉**PropertyName**并选择 Bitmap

在此示例中，将**AnimationCount**设置为 4 并将**AnimationRowCount设置为 1**

设置启用为真

TBitmapListAnimation 对动画帧速率、反转、循环和插值有很好的控制。我找不到在 FireMonkey2 中获取 .gif 动画的方法，但如果您有办法将动画 .gif 转换为“卡通片”，那么这是制作动画的好方法。

PS这是Delphi XE3 ......所以不能说这些组件是否存在于以前的版本中。

# ms-access - 如何获取我的访问表单以防止在保存后编辑字段？

> ID：11870945
> 
> 赞同：1
> 
> 时间：2012-08-08T18:35:41.327
> 
> 标签：ms-access

我有一个表格作为我的一张桌子的前端。将此表视为与几乎所有其他表相关的顶级表。填写完此表单后，尤其是其他表格也填写完毕后，我真的不希望有人回来编辑该顶级表单中的某些字段。这样做真的会改变整个系统的逻辑。这类似于如果我有一个我拥有的不同运输设备的历史维护记录数据库，并且在 20 年后将其中一辆汽车从汽车换成飞机。历史记录将不再有意义。

所以我希望一旦保存记录，我不希望某些字段被编辑。删除整个记录并重新开始就可以了，更改其他字段就可以了。只是不改变某些领域。此外，如果用户是第一次创建记录，改变主意应该没问题。但是一旦记录被保存，那就应该结束了。

我主要对使用 VBA 在表单级别防止这种情况感兴趣。我认为不可能在数据库级别保护它。

我在想 OnCurrent 中的某些东西，并检查 Auto-Incremented ID 是否为空，然后编辑就可以了，但如果 ID 有值，那么没有编辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:54:37.410

tag 属性通常很有用：

```
For Each ctl In Me.Controls
    If ctl.Tag = "SysLock" Then
        ctl.Locked = (Not Me.NewRecord)
<...> 
```

之后，我建议您确保您的表具有创建时间戳和更新时间戳。编写这些内容后，您可以阻止编辑。例如，在最后半小时内创建的任何记录都可能是公平竞争的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:39:39.440

您甚至可以指定某种 VBA 甚至 OnCurrent 来查找正在查看的记录中是否存在数据 - 然后告诉它将输入框更改为 Enabled = No 和 Locked = Yes - 这样，没有办法要在这些字段中输入的数据，甚至无法在 Tab 键顺序中选择它们（如果我没记错的话）。

# facebook - 图形 API 错误 - (#4) 已达到应用程序请求限制

> ID：11870950
> 
> 赞同：3
> 
> 时间：2012-08-08T18:36:04.337
> 
> 标签：facebook, facebook-graph-api, feed

我正在使用批处理请求对 Stream 表执行 FQL 查询。查询检索过去几天的所有应用用户朋友的帖子。我的应用程序每天执行大约 150K Graph API 请求（每次 30K），但每个访问令牌在 600 秒内不超过 600 个请求（因为 Facebook 限制了流 API）。我有时会收到以下错误：(#4) 已达到应用程序请求限制。

每 24 小时/1 小时的 Graph API 请求是否存在已知限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:41:37.477

The limit is 600 request / 600 seconds but not 86400 request per day... it seams that the "600s" is a sliding time period (not really documented), so may be you go over this limit for small time periods?

Another intersting point is that this limit is per 600 seconds, per Token **and per IP...**

# c++ - 编译器在数组到指针衰减中生成的指针存储在哪里？

> ID：11870955
> 
> 赞同：3
> 
> 时间：2012-08-08T18:36:26.883
> 
> 标签：c++, arrays, pointers

据此[_](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c?lq=1)

> 当数组衰减为指针时，指针不会存储为数组本身（或内存中的任何其他位置）的一部分。

如果上述陈述为真， *&array*的数据类型怎么可能不同于*array*或*&array[0]*但在下面的声明中这三个都具有相同的值。

```
int array[10]; 
```

我想当编译器默默地将数组衰减为指针时，它应该给指针一些内存地址。如果不是，那么指针存储在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:57:49.280

我看不出你从哪里得到指针必须存储在某个地方的想法。出于什么目的？没有 C++ 代码需要将该指针存储在任何地方。

当抽象 C++ 机器评估类似

```
int a = 2, b = 3, c = 4;
int i = (a + b) * c; 
```

内部子表达式的`a + b`计算结果为`5`。但是，`5`从语言的角度来看，这并没有真正存储在任何地方。它只是一个短暂的价值`5`，存在于短暂的瞬间，只会被倍增`c`并永远被遗忘。这种在 C++ 中的非物质表达式结果称为*rvalues*。通常未指定右值所在的位置。在计算上述表达式的过程中， 的值`5`可能会在某个 CPU 寄存器中出现片刻。或者，如果编译器决定这样做，它甚至可能临时存储在一些未命名的内存区域中，但这不是您在 C++ 代码级别可以看到的。

数组到指针转换产生的指针也是如此。该指针只是一个*右值*——一个不在内存中任何位置的临时值。它根本不需要存在于内存中的任何地方。

目前尚不清楚您要通过`&array`引用来表达什么。表达式`&array`不涉及数组到指针的转换，这意味着它与所讨论的问题完全无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:47:36.973

当您在 expression 上使用 address-of 运算符时`array`， expression`array`不会衰减为指针（当您使用`sizeof`时，当您使用时`typeid`，以及当您将数组作为参数传递时，形式参数是对数组的引用时）。在其他表达式中，它通常衰减为指向其第一个元素的指针。

鉴于声明

```
 int array[10]; 
```

的类型`&array`是`int (*const)[10]`其中的类型`&array[0]`是`int *const`==`array`表达式中它衰减的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T18:48:21.377

这是表达式评估的一部分。当编译器对任何表达式求值时，例如`3+4`,`(unsigned int) 3`或`&array[3]`或简单地说`array`，它管理以各种方式出现的所有临时值，通常是通过在处理器寄存器中执行任何必要的计算。当您使用数组名称作为指针时，编译器通常会生成指令以将数组的地址加载到寄存器中，然后执行您指定的用于指针的任何其他算术运算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T18:43:52.180

从[http://ideone.com/Qw1aA](http://ideone.com/Qw1aA)可以看出，`&array`、`array`和`&array[0]`都表示相同的值：数组中第一个元素的内存地址。

但是，仅仅因为两个值相同并不意味着它们代表相同的事物。在这种情况下，这是一个语义差异（这仍然很重要，例如，使用常规数组，您可以`sizeof()`在 C 中使用它来查找其长度（以字节为单位），而如果您传递数组，则不能这样做代替指针参数）。

此外，即使函数在其参数中具有数组类型，由于指针分解，如[http://ideone.com/jAeAn](http://ideone.com/jAeAn)所示，当传入数组时，函数内部的结果也不相同，如显示在此处的错误消息中：http: [//ideone.com/yn0zc](http://ideone.com/yn0zc)。

# python - 使用 VirusTotal API 扫描文件

> ID：11870961
> 
> 赞同：2
> 
> 时间：2012-08-08T18:36:48.983
> 
> 标签：python, python-3.x

我在 Python 中相当新，所以这对某些人来说可能是一个菜鸟问题。我正在开发 Python 3.0

我不断遇到错误：

```
File "scan.py", line 7, in module
    json = postfile.post_multipart(host,selector,fields,files)
File "C:\Python32\lib\postfile.py", line 10, in post_multipart
    content_type, body = encode_multipart_formdata(fields,files)
File "C:\Python32\lib\postfile.py", line 42, encode_multipart_fordata
     body = CRLF.join(L)
TypeError: sequence item 8: expected str instance, bytes found 
```

当我尝试运行此代码以使用 VirusTotal API 连接和扫描文件时。此代码类似于他们在站点中的示例。

```
import postfile
host = "www.virustotal.com"
selector = "https://www.virustotal.com/vtapi/v2/file/scan"
fields = [("apikey", "123123123123123123123123123")]
file_to_send = open("android-icq.apk", "rb").read()
files = [("file", "android-icq.apk", file_to_send)]
json = postfile.post_multipart(host, selector, fields, files)
print (json) 
```

postfile.py 内容如下：

```
import http.client, mimetypes

def post_multipart(host, selector, fields, files):
    """
    Post fields and files to an http host as multipart/form-data.
    fields is a sequence of (name, value) elements for regular form fields.
    files is a sequence of (name, filename, value) elements for data to be uploaded as files
    Return the server's response page.
    """
    content_type, body = encode_multipart_formdata(fields, files)
    h = http.client.HTTP(host)
    h.putrequest('POST', selector)
    h.putheader('content-type', content_type)
    h.putheader('content-length', str(len(body)))
    h.endheaders()
    h.send(body)
    errcode, errmsg, headers = h.getreply()
    return h.file.read()

def encode_multipart_formdata(fields, files):
    """
    fields is a sequence of (name, value) elements for regular form fields.
    files is a sequence of (name, filename, value) elements for data to be uploaded as files
    Return (content_type, body) ready for httplib.HTTP instance
    """
    BOUNDARY = '----------ThIs_Is_tHe_bouNdaRY_$'
    CRLF = '\r\n'
    L = []
    for (key, value) in fields:
        L.append('--' + BOUNDARY)
        L.append('Content-Disposition: form-data; name="%s"' % key)
        L.append('')
        L.append(value)
    for (key, filename, value) in files:
        L.append('--' + BOUNDARY)
        L.append('Content-Disposition: form-data; name="%s"; filename="%s"' % (key, filename))
        L.append('Content-Type: %s' % get_content_type(filename))
        L.append('')
        L.append(value)
    L.append('--' + BOUNDARY + '--')
    L.append('')
    body = CRLF.join(L)
    content_type = 'multipart/form-data; boundary=%s' % BOUNDARY
    return content_type, body

def get_content_type(filename):
    return mimetypes.guess_type(filename)[0] or 'application/octet-stream' 
```

对这里的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:59:16.387

看起来这些示例是用 Python 2 编写的。您使用的是 Python 3。

Python 3 背后的部分理由是删除了多年来 Python 开发中积累的“杂乱无章”，因此允许它在某些地方破坏向后兼容性。

见这里：[http ://wiki.python.org/moin/Python2orPython3](http://wiki.python.org/moin/Python2orPython3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T21:54:27.520

[http://docs.python-requests.org/](http://docs.python-requests.org/)提供更简洁的接口来进行 HTTP 1.1 查询：

```
import time
import requests
import json

md5url = "https://www.virustotal.com/vtapi/v2/file/report"
r = requests.post(requrl, data = {"apikey": apikey, "resource": md5})
print(json.loads(r.text))
print(json.loads(r.text)["positives"])
time.sleep(15)

scanurl = "https://www.virustotal.com/vtapi/v2/file/scan"
r = requests.post(scanurl, data = {"apikey": apikey}, files = {"file": (name, open(name, "rb"))})
print(json.loads(r.text))
print(json.loads(r.text)["permalink"])
time.sleep(15) 
```

# javascript - 当你有 ajax 和 css 时如何包含 java 脚本？

> ID：11870965
> 
> 赞同：2
> 
> 时间：2012-08-08T18:37:10.587
> 
> 标签：javascript

当我在 index.html 中运行我的 javascript 时，它可以正常工作，但我想将其分离为 js 文件，因此我创建了 aram.js，然后将代码添加到其中，我还将这一行包含在索引中：

```
<script type="text/javascript" src="aram.js"></script> 
```

aram.js：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

            $(function() {
                $('#accordion > li').hover(
                    function () {
                        var $this = $(this);
                        $this.stop().animate({'width':'480px'},500);
                        $('.heading',$this).stop(true,true).fadeOut();
                        $('.bgDescription',$this).stop(true,true).slideDown(500);
                        $('.description',$this).stop(true,true).fadeIn();
                    },
                    function () {
                        var $this = $(this);
                        $this.stop().animate({'width':'115px'},1000);
                        $('.heading',$this).stop(true,true).fadeIn();
                        $('.description',$this).stop(true,true).fadeOut(500);
                        $('.bgDescription',$this).stop(true,true).slideUp(700);
                    }
                );
            }); 
```

我认为问题在于它在 index.html 中包含的 css 文件夹中找不到我有 style.css 的 css，如下行：

```
 <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:40:04.637

您需要在 javascript 包含文件上方包含脚本标记以包含 jquery。这两个包含应该在您的 html 中。

像这样：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="aram.js"></script> 
```

然后，这将首先加载 jquery，以便可以执行您的 javascript（使用 jquery）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:39:57.193

您不能在 .js 文件中写入标签。您也应该在 index.html 中调用 jquery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T18:39:02.573

`<script>`如果它在`.js`文件中，则不需要将 js 包装在标签中。

此外，您不能在 javascript 文件中使用 html 标签。此脚本标记属于您的 html 文件，如下所示：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="aram.js"></script> 
```

JS文件只有js

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T18:46:27.183

传统上，您会从 HTML 文件中引用 jQuery javascript 文件和您自己的 javascript 文件。将 HTML 脚本标签放入您的 javascript 文件中将无法正常工作。

如果您真的只想在 HTML 文件中包含一个脚本元素，则应该可以使用此代码从该文件中注入 jquery 代码：

```
document.write('<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>'); 
```

但是，在这种情况下，这种技术没有太多可推荐的。

# ibm-mq - REMOTE QUEUE 定义能否意外使用 CLUSTER 传输队列

> ID：11870966
> 
> 赞同：3
> 
> 时间：2012-08-08T18:37:16.943
> 
> 标签：ibm-mq

我在分布式平台 (HP-UX) 上的 WMQ 中有一个集群合作伙伴。他们和他们向其发送消息的 qmgr 都是“我的”集群的成员，但从未利用集群关系来相互通信。他们有一个远程队列定义、传输队列（称为队列管理器）、唯一的点对点发送方/接收方通道对等，但他声称从一个到另一个的 TRACE ROUTE 神奇地利用了 SYSTEM.CLUSTER。 TRANSMIT.QUEUE 和集群通道（大概），即使远程队列当然没有配置这样的东西。

是否有任何奇怪的 MQ 异常会导致标准 REMOTE 队列选择使用集群路径而不期望它？

两边的队列当然不在集群中共享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:51:43.017

我想我们已经回答了我们自己的问题。无法想象我是如何一直遵守规则的，并且从不引发这种行为。如果在远程队列定义中指定的假定传输队列没有指定 USAGE(XMITQ)，而是指定了 (NORMAL)，并且 RQ 中指定的传输队列确实是集群中已知队列管理器的名称，那么瞧，无论远程队列定义本身中显式配置的定义如何，我们都在使用集群。从远程队列/非集群定义迁移到集群定义是多么方便的方法。

# java - 将组件添加到 JPanel，屏幕上没有变化

> ID：11870970
> 
> 赞同：0
> 
> 时间：2012-08-08T18:37:25.140
> 
> 标签：java, animation, jpanel

我正在为我正在制作的私人游戏制作一个小型动画/xml 文件创建编辑器。我有一个 JPanel，我在其中添加了一些自定义组件，但我从来没有看到任何变化。

自定义组件：

```
public class BasicProprety extends JPanel {
String key;
String value;

    public BasicProprety(String k, String v) {
        key = k;
        value = v;
        JTextField keyField = new JTextField(k);
        JTextField valueField = new JTextField(v);
        valueField.setVisible(true);
        keyField.setVisible(true);
        this.add(keyField);
        this.add(valueField);
        this.setVisible(true);
    }
} 
```

我使用静态方法来刷新当前帧的属性：

```
 public static void refreshFrameProperties() {
    Frame currentFrame = DataBank.getCurrentInstance().getCurrentFrameObj();
    BasicProprety millisecs = new BasicProprety("millisecondsTillNextFrame", String.valueOf(currentFrame.getMillisecondsToNextFrame()));
    BasicProprety offsetX = new BasicProprety("offsetX", String.valueOf(currentFrame.getOffset().x));
    BasicProprety offsetY = new BasicProprety("offsetY", String.valueOf(currentFrame.getOffset().y));
    BasicProprety sizeX = new BasicProprety("sizeX", String.valueOf(currentFrame.getSize().x));
    BasicProprety sizeY = new BasicProprety("sizeY", String.valueOf(currentFrame.getSize().y));
    sizeX.revalidate();
    sizeY.revalidate();
    offsetY.revalidate();
    offsetX.revalidate();
    millisecs.revalidate();
    sizeX.repaint();
    sizeY.repaint();
    offsetY.repaint();
    offsetX.repaint();
    millisecs.repaint();
    ArrayList<BasicProprety> basicList = new ArrayList<BasicProprety>();
    for (int i = 0; i < mainInterface.getProperties().getComponentCount(); i++) {
        if (mainInterface.getProperties().getComponent(i) instanceof BasicProprety)
            basicList.add((BasicProprety)mainInterface.getProperties().getComponent(i));
    }
    for (BasicProprety bp : basicList) {
        mainInterface.getProperties().remove(bp);
    }
    mainInterface.getProperties().revalidate();
    mainInterface.getProperties().repaint();
    System.out.println("REMOVED: "+mainInterface.getProperties().getComponentCount());
    mainInterface.getProperties().getLayout().addLayoutComponent("TEST", sizeY);
    mainInterface.getProperties().add(millisecs);
    mainInterface.getProperties().add(offsetX);
    mainInterface.getProperties().add(offsetY);
    mainInterface.getProperties().add(sizeX);
    mainInterface.getProperties().add(sizeY);
    /*Random r = new Random();
    mainInterface.getProperties().setBackground(new Color(r.nextInt()));*/
    mainInterface.getProperties().revalidate();
    mainInterface.getProperties().repaint();
    mainInterface.getProperties().setVisible(true);
    System.out.println("NO: "+mainInterface.getProperties().getComponentCount());

} 
```

我的组件是使用 netbeans 界面编辑器创建的，这是创建代码：

```
 properties = new javax.swing.JPanel();
    org.jdesktop.layout.GroupLayout propertiesLayout = new org.jdesktop.layout.GroupLayout(properties);
    properties.setLayout(propertiesLayout);
    propertiesLayout.setHorizontalGroup(
        propertiesLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(0, 243, Short.MAX_VALUE)
    );
    propertiesLayout.setVerticalGroup(
        propertiesLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(0, 386, Short.MAX_VALUE)
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:42:12.187

它们被适当地添加，但不是添加到您的，而是添加到`Component`contentPane**中**。`JPanel.getContentPane()`这是您的`JPanel`.

不过不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:48:38.490

组件计数中的错误是您正在检查`mainInterface.getComponentCount()`，而不是`mainInterface.getProperties().getComponentCount()`. 大概`mainInterface`只包含你的`JPanel`?

您可以通过使用局部变量来避免与这些类似的错误，例如

```
final JPanel properties = mainInterface.getProperties();
...
System.out.println("number of properties' components: "
                       + properties.getComponentCount()); 
```

* * *

顺便说一句，您可以简化以下循环...

```
ArrayList<BasicProprety> basicList = new ArrayList<BasicProprety>();
for (int i = 0; i < mainInterface.getProperties().getComponentCount(); i++) {
    if (mainInterface.getProperties().getComponent(i) instanceof BasicProprety)
        basicList.add((BasicProprety)mainInterface.getProperties().getComponent(i));
}
for (BasicProprety bp : basicList) {
    mainInterface.getProperties().remove(bp);
} 
```

...进入这个：

```
for (Component component : properties.getComponents()) {
  if (component instanceof BasicProperty) {
    properties.remove(component);
  }
} 
```

确保所有 UI 修改都在事件调度线程的上下文中完成。

（PS有没有人认为`Container`应该以某种方式暴露`Iterator<Component>`？）

# sql - 列的最大值

> ID：11870981
> 
> 赞同：0
> 
> 时间：2012-08-08T18:38:08.563
> 
> 标签：sql, max

我是这个论坛的新手，需要一些帮助！

我的代码没有给出正确的结果。问题是我没有得到 t140.BEL_GRLAG_AP 的最大值（这是我在第 16 行尝试做的）。sql 仍然为每人提供两行或更多行，我只想要每人一行，即 max(t140.BEL_GRLAG_AP) 的一行。

你们谁能告诉我我错过了什么？任何帮助表示赞赏！

```
select distinc tort128.NUM_AVTALE_ID as AvtaleID
, tort009.IDE_ARBGIV_NR as Orgnr
, tort134.NVN_ARBGIV as Arbeidsgiver
, mid(convert(varchar(8),tort127.DAT_KUNDE_FOEDT_NUM),7,2) + 
mid(convert(varchar(8),tort127.DAT_KUNDE_FOEDT_NUM),5,2) +
mid(convert(varchar(8),tort127.DAT_KUNDE_FOEDT_NUM),1,4) + 
RIGHT('00000' + TRIM(convert(CHAR(5),tort127.IDE_KUNDE_PRSNR)),5) as Fødselsnummer
, tort001.NVN_KUNDE_FOR + ' ' + tort001.NVN_KUNDE_ETTER as Navn
, tort140.NUM_ALDERSGRENSE as Aldersgrense

from tort128

join tort127 on tort128.IDE_SEKV_TORT127 = tort127.IDE_SEKV_TORT127
join tort001 on tort127.DAT_KUNDE_FOEDT_NUM = tort001.DAT_KUNDE_FOEDT_NUM and  tort127.IDE_KUNDE_PRSNR=tort001.IDE_KUNDE_PRSNR
join tort009 on tort127.DAT_KUNDE_FOEDT_NUM = tort009.DAT_KUNDE_FOEDT_NUM and   tort127.IDE_KUNDE_PRSNR=tort009.IDE_KUNDE_PRSNR
join tort134 on tort009.IDE_ARBGIV_NR = tort134.IDE_ARBGIV_NR
join tort138 on tort128.IDE_SEKV_TORT128 = tort138.IDE_SEKV_TORT128
left join tort140 on tort138.IDE_SEKV_TORT138 = tort140.IDE_SEKV_TORT138 
and tort140.BEL_GRLAG_AP=(select max(t140.BEL_GRLAG_AP) from tort140 t140
where 1 = 1
  and t140.IDE_SEKV_TORT138 = tort138.IDE_SEKV_TORT138)
and tort140.BEL_LOENN_AAR = (select max(t140_2.BEL_LOENN_AAR) from tort140 t140_2
where 1 = 1
  and t140_2.IDE_SEKV_TORT138 = tort138.IDE_SEKV_TORT138)

where

tort128.NUM_AVTALE_ID = 200854
and tort128.DAT_GYLDIG_FOM <= 20120101
and (tort128.DAT_GYLDIG_TOM >= 20120101
or tort128.DAT_GYLDIG_TOM is null)
and tort128.DAT_HISTORISK is null
and tort128.TYP_STATUS! = 'kns'
and tort127.DAT_KUNDE_FOEDT_NUM >= 19460101
and tort127.DAT_KUNDE_FOEDT_NUM <= 19551234
and tort127.DAT_TERMINERT is null
and tort127.DAT_REGISTRERT <= 20120101
and tort009.DAT_SLUTT is null
and tort134.DAT_HISTORISK is null
and tort138.DAT_AKSJON=(select max(p.DAT_AKSJON) from tort138 p
where 1 = 1
and p.IDE_SEKV_TORT128=tort128.IDE_SEKV_TORT128)

order by

tort127.DAT_KUNDE_FOEDT_NUM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:44:14.730

我想你想用`GROUP BY`.

例如，如果您有三列：`Value, ID, Tag`并且想要获得`Value`每个`ID/Tag`组合的最大值，您会这样做

```
SELECT MAX(Value), ID, Tag
FROM MyTable
GROUP BY ID, Tag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:01:07.653

如果您要加入不同的表，则可以执行以下操作：

```
SELECT t1.ID, t2.id, t2.val
FROM table1 t1
INNER JOIN 
(
    SELECT Max(value) val, id
    FROM table2
    GROUP BY id
) t2
    ON t1.id = t2.id 
```

# javascript - JavaScript if() 语句未按预期计算

> ID：11870987
> 
> 赞同：1
> 
> 时间：2012-08-08T18:38:24.233
> 
> 标签：javascript, comparison-operators

我有一个[jsFiddle](http://jsfiddle.net/3UPAM/4/)来演示我的问题（并让你们理顺我）。

我只是检查两个输入文本框的值，并在最高价格低于最低价格时提醒用户，但他们正在向后评估！我有 if`(maxValue < minValue)...`但它评估它好像运算符是“大于”。

我错过了什么？！？

```
<form id="search" action="search.php" method="post">

    <label id="lblPriceMin" for="txtPriceMin">Minimum Price</label>
    <input type="text" id="txtPriceMin" name="priceMin"></input>
    <br />
    <br />

    <label id="lblPriceMax" for="txtPriceMax">Maximum Price</label>
    <input type="text" id="txtPriceMax" name="priceMax"></input>
    <br />
    <br />

    <input type="reset" id="reset" name="reset" value="Clear Form" />
</form> 
```

这是js，

```
$('#txtPriceMax').focusout(function() {

    var minValue = $('input#txtPriceMin').val();
    var maxValue = $('input#txtPriceMax').val();

    //alert ('minValue: ' + minValue + ', maxValue: ' + maxValue);

    if (maxValue < minValue) {
        alert ('The maximum value (' + maxValue + ') must be greater than the minimum value (' + minValue + ')!');
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T18:41:29.170

采用`parseFloat()`

[jsFiddle 示例](http://jsfiddle.net/pgfCK/)

```
if (parseFloat(maxValue) < parseFloat(minValue)) 
```

# android - 我是否应该将用作 Android Bundle 中键的字符串存储为资源？

> ID：11870988
> 
> 赞同：2
> 
> 时间：2012-08-08T18:38:26.417
> 
> 标签：android, android-resources

不硬编码用作字典、地图和附加包等中的键的字符串通常是一种好习惯，还是有关系？

```
extras.putSerializable("myKey", getItem(thisIndex).getSomeObject()); 
```

诗句

```
extras.putSerializable(ctx.getString(R.string.my_key), getItem(thisIndex).getSomeObject()); 
```

在实例化片段并将页面标题与片段关联以与页面标题指示器一起使用时，我正在执行以下操作

```
 Bundle pageTitle = new Bundle();
    pageTitle.putSerializable(getString(R.string.page_title_key), getString(R.string.somePageTitle));
    fragments.add(Fragment.instantiate(this, MyPageFragment.class.getName(), pageTitle)); 
```

然后在我的 FragmentPagerAdapter 中：

```
@Override
public CharSequence getPageTitle(int position) {
    return this.fragments.get(position).getArguments().getSerializable(ctx.getString(R.string.page_title_key)).toString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:42:49.583

良好的编程和 MVC 模型会说不要对您的密钥进行硬编码。我也不会把它放在你的字符串资源中。相反，我更喜欢使用常量。如果您将它们定义为`public static`其他类也将能够引用相同的数据。这样，您只需在代码中输入一次实际密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:44:52.913

您应该使用资源字符串的唯一时间是它有意义的时候。如果您需要将您的应用程序翻译成西班牙语、法语、俄语等，您是否需要翻译您的内部命名？可能不是。我使用常量（最终）进行内部片段命名。在我看来，这是最有意义的。

对于片段的可见命名，例如选项卡式显示。是的，使用字符串资源。他们是你的朋友。

# cobol - 如何使我的 cobol 程序成为可执行文件或 .Bat

> ID：11870992
> 
> 赞同：0
> 
> 时间：2012-08-08T18:38:50.400
> 
> 标签：cobol, cobol85

是否可以使我的 cobol 程序成为可执行文件或具有 .bat？就像在 java 中一样，它们有 .jar 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T07:40:18.267

MS-COBOL 2.20 中的 COBOL.EXE 或 COMPILE.BAT 都可以创建中间文件。如果您的源代码是 HELLO.COB，请使用：

```
COMPILE.BAT HELLO 
```

或者

```
COBOL.EXE HELLO.COB,HELLO.INT,HELLO.LST 
```

这两个命令都将生成中间文件 HELLO.INT。中间文件可以运行

```
RUNCOB HELLO 
```

该命令可以放入 .BAT 文件中，以创建可能适合您需要的“可执行”文件。

MS-COBOL 2.20 还附带 LINK.EXE，它应该能够将 HELLO.INT 转换为 HELLO.EXE。我无法让它在 Windows XP 上运行。MS-COBOL 2.20 是为 DOS 而不是 Windows 编写的，所以我并不感到惊讶。

尽管如此，请不要使用 MS-COBOL 2.20。它很旧，可用的文档很少。对于 PC 上的 Cobol，Microfocus 和 Fujitsu 都有很好的编译器，但你需要在某些时候为它们付费。我使用并推荐 OpenCobol，它是开源的。它可免费用于 Windows 和 Linux，并且有很好的文档。请参阅 opencobol.org。文档的直接链接是[http://opencobol.add1tocobol.com/OpenCOBOL%20Programmers%20Guide.pdf](http://opencobol.add1tocobol.com/OpenCOBOL%20Programmers%20Guide.pdf)。在 WindowsXP 上获取 OpenCobol 的一种快速方法是使用 OpenCOBOL-1.1-06FEB2009-mingw.zip（请参阅[http://www.opencobol.org/modules/bwiki/index.php?Assorted%20Documents](http://www.opencobol.org/modules/bwiki/index.php?Assorted%20Documents)底部附近的链接和说明） .

# php - 解析谷歌联系人api XML

> ID：11870994
> 
> 赞同：0
> 
> 时间：2012-08-08T18:39:00.720
> 
> 标签：php, xml, domdocument

所以我从谷歌获得了以下混乱的 XML 形式的联系数据：

```
<entry gd:etag='&quot;Q3Y4fDVSLyt7I2A9WhJXFEkDTgY.&quot;'><id>http://www.google.com/m8/feeds/contacts/email/base/24fc18e00ee1c72e</id><updated>2012-08-08T18:18:42.834Z</updated><app:edited xmlns:app='http://www.w3.org/2007/app'>2012-08-08T18:18:42.834Z</app:edited><category scheme='http://schemas.google.com/g/2005#kind' term='http://schemas.google.com/contact/2008#contact'/><title>Person 1</title><link rel='http://schemas.google.com/contacts/2008/rel#photo' type='image/*' href='https://www.google.com/m8/feeds/photos/media/email/24fc18e00ee1c72e'/><link rel='self' type='application/atom+xml' href='https://www.google.com/m8/feeds/contacts/email/full/24fc18e00ee1c72e'/><link rel='edit' type='application/atom+xml' href='https://www.google.com/m8/feeds/contacts/email/full/24fc18e00ee1c72e'/><gd:name><gd:fullName>Person 1</gd:fullName><gd:givenName>Person</gd:givenName><gd:familyName>1</gd:familyName></gd:name><gd:email rel='http://schemas.google.com/g/2005#home' address='person1@person.com' primary='true'/><gContact:groupMembershipInfo deleted='false' href='http://www.google.com/m8/feeds/groups/email/base/6'/></entry><entry gd:etag='&quot;R30zcTVSLyt7I2A9WhJXFEkDTgc.&quot;'><id>http://www.google.com/m8/feeds/contacts/email/base/2c7cd0de89c805cc</id><updated>2012-08-08T18:18:56.389Z</updated><app:edited xmlns:app='http://www.w3.org/2007/app'>2012-08-08T18:18:56.389Z</app:edited><category scheme='http://schemas.google.com/g/2005#kind' term='http://schemas.google.com/contact/2008#contact'/><title>Person 2</title><link rel='http://schemas.google.com/contacts/2008/rel#photo' type='image/*' href='https://www.google.com/m8/feeds/photos/media/email/2c7cd0de89c805cc'/><link rel='self' type='application/atom+xml' href='https://www.google.com/m8/feeds/contacts/email/full/2c7cd0de89c805cc'/><link rel='edit' type='application/atom+xml' href='https://www.google.com/m8/feeds/contacts/email/full/2c7cd0de89c805cc'/><gd:name><gd:fullName>Person 2</gd:fullName><gd:givenName>Person</gd:givenName><gd:familyName>2</gd:familyName></gd:name><gd:email rel='http://schemas.google.com/g/2005#home' address='person2@person.com' primary='true'/><gContact:groupMembershipInfo deleted='false' href='http://www.google.com/m8/feeds/groups/email/base/6'/></entry> 
```

我将如何使用**domdocument**在 PHP 中解析这个 XML 以返回一个不错的数组，其中每个条目都包含人的头衔、姓名和电子邮件？

我不知道在这种情况下哪些 domdocument 方法适合使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:16:42.837

学习[DOMXPath](http://php.net/manual/en/class.domxpath.php)。这就是你想要的。

# java - JGraphT 示例

> ID：11870996
> 
> 赞同：8
> 
> 时间：2012-08-08T18:39:03.557
> 
> 标签：java, jgrapht

我想在一个简单的`x,y`图表上绘制线条以使用**JGraphT在****JApplet**中显示。我发现的例子不是很有帮助。有人可以指点我几个简单的**JGraphT**示例吗？

 ***** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:49:36.493

这是一个我希望对[jgrapht有所帮助的例子](http://jgrapht.org/visualizations.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T07:49:13.400

```
package simple;

import java.awt.*;
import java.awt.geom.*;

import javax.swing.*;

import org.jgraph.JGraph;
import org.jgraph.graph.AttributeMap;
import org.jgraph.graph.DefaultGraphCell;
import org.jgraph.graph.GraphConstants;
import org.jgrapht.*;
import org.jgrapht.ext.*;
import org.jgrapht.graph.*;

// resolve ambiguity
import org.jgrapht.graph.DefaultEdge;

import com.compilervision.common.CFNode;
import com.compilervision.common.llvmir.instructions.CFG;
import com.compilervision.common.Edge;

/**
 * A demo applet that shows how to use JGraph to visualize JGraphT graphs.
 *
 * @author Barak Naveh
 * @since Aug 3, 2003
 */
public class Test
    extends JApplet
{
    //~ Static fields/initializers ---------------------------------------------

    private static final long serialVersionUID = 3256444702936019250L;
    private static final Color DEFAULT_BG_COLOR = Color.decode("#FAFBFF");
    private static final Dimension DEFAULT_SIZE = new Dimension(530, 320);

    //~ Instance fields --------------------------------------------------------

    //
    private JGraphModelAdapter<CFNode, Edge> jgAdapter;

    //~ Methods ----------------------------------------------------------------

    /**
     * An alternative starting point for this demo, to also allow running this
     * applet as an application.
     *
     * @param args ignored.
     */
    public static void main(String [] args)
    {
        Test applet = new Test();
        applet.init();

        JFrame frame = new JFrame();
        frame.getContentPane().add(applet);
        frame.setTitle("JGraphT Adapter to JGraph Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    /**
     * {@inheritDoc}
     */
    public void init()
    { 

        // create a JGraphT graphq
        ListenableGraph<CFNode, Edge> g =
            new ListenableDirectedMultigraph<CFNode, Edge>(
                    Edge.class);

        // create a visualization using JGraph, via an adapter
        jgAdapter = new JGraphModelAdapter<CFNode,Edge>(g);

        JGraph jgraph = new JGraph(jgAdapter);

        adjustDisplaySettings(jgraph);
        getContentPane().add(jgraph);
        resize(DEFAULT_SIZE);

        String v1 = "v1";
        String v2 = "v2";
       String v3 = "v3";
        String v4 = "v4";

        // add some sample data (graph manipulated via JGraphT)
        g.addVertex(v1);
        g.addVertex(v2);
        g.addVertex(v3);
        g.addVertex(v4);

        g.addEdge(v1, v2);
        g.addEdge(v2, v3);
        g.addEdge(v3, v1);
        g.addEdge(v4, v3);

        // position vertices nicely within JGraph component
        //GraphSimpleLayout()
        positionVertexAt(v1, 130, 140);
        positionVertexAt(v2, 60, 200);
        positionVertexAt(v3, 310, 230);
        positionVertexAt(v4, 380, 70);

        // that's all there is to it!...
    }

    private void adjustDisplaySettings(JGraph jg)
    {
        jg.setPreferredSize(DEFAULT_SIZE);

        Color c = DEFAULT_BG_COLOR;
        String colorStr = null;

        try {
            colorStr = getParameter("bgcolor");
        } catch (Exception e) {
        }

        if (colorStr != null) {
            c = Color.decode(colorStr);
        }

        jg.setBackground(c);
    }

    @SuppressWarnings("unchecked") // FIXME hb 28-nov-05: See FIXME below
    private void positionVertexAt(Object vertex, int x, int y)
    {
        DefaultGraphCell cell = jgAdapter.getVertexCell(vertex);
        AttributeMap attr = cell.getAttributes();
        Rectangle2D bounds = GraphConstants.getBounds(attr);

        Rectangle2D newBounds = new Rectangle2D.Double(x,y,bounds.getWidth(),bounds.getHeight());

        GraphConstants.setBounds(attr, newBounds);

        // TODO: Clean up generics once JGraph goes generic
        org.jgraph.graph.AttributeMap cellAttr = new AttributeMap();
        cellAttr.put(cell, attr);
        jgAdapter.edit(cellAttr, null, null, null);
    }

    //~ Inner Classes ----------------------------------------------------------

    /**
     * a listenable directed multigraph that allows loops and parallel edges.
     */
    private static class ListenableDirectedMultigraph<V, E>
        extends DefaultListenableGraph<V, E>
        implements DirectedGraph<V, E>
    {
        private static final long serialVersionUID = 1L;

        ListenableDirectedMultigraph(Class<E> edgeClass)
        {
            super(new DirectedMultigraph<V, E>(edgeClass));
        }
    }
}

// End JGraphAdapterDemo.java 
```****