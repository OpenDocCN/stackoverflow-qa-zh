# StackOverflow 问答 10018000-10018999

# iphone - iPhone自动化

> ID：10018001
> 
> 赞同：1
> 
> 时间：2012-04-04T19:32:28.830
> 
> 标签：iphone, ios, automation

是否有任何库/工具可以自动化 iphone 交互。我的研究发现了 UIAutomation，但这似乎仅限于本地测试环境中的应用程序。

我想在已发布并下载到我的 iphone 的应用程序上自动进行交互。我熟悉网络空间中的自动化和测试，但我是 Iphone 开发的新手。我什至会欣赏没有图书馆的策略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:41:12.717

不，没有办法自动化与其他应用程序的交互。在大多数情况下，iOS 应用程序根本无法相互交互。

**更新：** Apple 的 Shortcuts 应用程序提供了一定程度的可编写脚本，流行的 IFTTT（If This Then That）也是如此。但它仍然不是一个很好的自动化水平......你没有控制应用程序的用户界面，只是向它发送消息以执行预设操作。所以很可能仍然不是你想要的。

# javascript - 点击了折线的哪一段？

> ID：10018003
> 
> 赞同：0
> 
> 时间：2012-04-04T19:32:41.747
> 
> 标签：javascript, google-maps, google-maps-api-3, map-projections

我已经设置了一条[包含五个段的示例折线](http://jsfiddle.net/JnBUU/1/)，并且当用户单击折线时，我允许创建新的标记。

我想知道是否有一种万无一失的方法来确定新标记是在标记 0 和 1 之间，还是在 1 和 2 之间……或者在 4 和 5 之间。我考虑过检查新标记是否在边界内框和直线公式，但都不是 100% 精确的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T08:07:37.223

由于谷歌地图使用[墨卡托投影](http://en.wikipedia.org/wiki/Mercator_projection)来投影 GPS 坐标，因此您不能将“直线方程”用于 gps 坐标，因为投影对于 gps 点来说不是线性的。但是您可以使用`world coordinates`线性的。在这里，我使用*了线方程的参数形式*来检查是否`point`在段上：

```
function isPointOnSegment( map, gpsPoint1, gpsPoint2, gpsPoint ){
     var p1 = map.getProjection().fromLatLngToPoint( gpsPoint1 );
     var p2 = map.getProjection().fromLatLngToPoint( gpsPoint2 );
     var p = map.getProjection().fromLatLngToPoint( gpsPoint );
     var t_x;
     var t_y;
     //Parametric form of line equation is:
     //--------------------------------
     //      x = x1 + t(x2-x1)
     //      y = y1 + t(y2-y1) 
     //--------------------------------
     //'p' is on [p1,p2] segment,if 't' is number from [0,1]
     //-----Case 1----
     //      x = x1
     //      y = y1
     //---------------
     if( p2.x-p1.x == 0 && p2.y-p1.y == 0){
        return p.x == p1.x && p.y == p1.y;
     }else 
     //-----Case 2----
     //      x = x1
     //      y = y1 + t(y2-y1)
     //---------------
     if( p2.x-p1.x == 0 && p2.y-p1.y != 0){
        t_y = (p.y - p1.y)/(p2.y-p1.y);
        return p.x == p1.x && t_y >= 0 && t_y <= 1;
     }else
     //-----Case 3----
     //      x = x1 + t(x2-x1)
     //      y = y1 
     //---------------
     if( p2.x-p1.x != 0 && p2.y-p1.y == 0){
        t_x = (p.x - p1.x)/(p2.x-p1.x);
        return p.y == p1.y && t_x >= 0 && t_x <= 1;
     }
     //-----Case 4----
     //      x = x1 + t(x2-x1)
     //      y = y1 + t(y2-y1) 
     //---------------
     t_x = (p.x - p1.x)/(p2.x-p1.x);
     t_y = (p.y - p1.y)/(p2.y-p1.y);
     return ( t_x == t_y && t_x >= 0 && t_x <= 1 && t_y >= 0 && t_y <= 1);
} 
```

通过单击点和折线的所有线段，您可以使用上述实现的功能并检索您正在寻找的线段。

# ocaml - 在 OCaml 的字符串中删除最终的尾随 '\n'

> ID：10018007
> 
> 赞同：2
> 
> 时间：2012-04-04T19:32:48.753
> 
> 标签：ocaml

我需要创建一个接收字符串并检查最后一个字符是否为“\n”的函数。如果是这样，则返回相同的字符串，但没有最后一个字符。我能想到的方法都不是最有效的。我需要它高效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:52:14.280

由于您没有提供任何上下文，因此很难对您的问题给出准确的答案。

我能想到的最简单的解决方案是：

```
let check s =
  let n = String.length s in
  if n > 0 && s.[n-1] = '\n' then
    String.sub s 0 (n-1)
  else
    s 
```

# asp.net - asp.net 多个更新面板

> ID：10018019
> 
> 赞同：0
> 
> 时间：2012-04-04T19:33:27.410
> 
> 标签：asp.net, updatepanel

我在一个页面中有多个更新面板，我只想更新其中的一个。我使用 doPostBack 但我传递了每个 page_load 并且我不知道我点击的女巫。

那么我怎样才能得到 doPostBack 参数

我试着在我的面板上放置一个隐藏字段，但是我丢失了回发的数据。

任何帮助

保护你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:36:52.447

您应该能够确定是哪个控件导致了 PostBack ( [link](http://ryanfarley.com/blog/archive/2005/03/11/1886.aspx) )。

# javascript - bootstrap 模态委托 eventype 语法

> ID：10018020
> 
> 赞同：2
> 
> 时间：2012-04-04T19:33:36.713
> 
> 标签：javascript, jquery, events, modal-dialog, twitter-bootstrap

```
var Modal = function (content, options) {
   this.options = options
   this.$element = $(content)
   .delegate('[data-dismiss="modal"]', 'click.dismiss.modal', $.proxy(this.hide, this))
                                          ^^^^^^^^^^^^^^^^^^^^
                                        What does this mean?
} 
```

我很新鲜。我以前没有见过这种语法。我的猜测是点击事件，在任何包含“解雇”且值为“模态”的属性上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:39:28.343

我想，你所看到的是`Namespaced Events`。当您对同一事件有多个事件处理程序时，这将被广泛使用。请参见下面的示例，

[**演示**](http://jsfiddle.net/skram/JcuAD/2/)

```
$('#test').on('click.a', function () {
    alert('A is clicked');
});

$('#test').on('click.b', function () {
    alert('B is clicked');
});

$('#unbindA').on('click', function () {
    $('#test').off('click.a');
}); 
```

在上面的示例中，它只是演示`unbind`，但它也可以用于触发特定的处理程序，例如`$('#test').trigger('click.a')`.

当您仅将“单击”绑定到两个处理程序时，上述所有操作都是不可能的。

[**关于命名空间事件的 jQuery 文档**](http://docs.jquery.com/Namespaced_Events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:57:03.607

要添加到 Vega 的答案：

调用`on()`（自 jQuery 1.7 起可用）或`delegate()`使用事件`click.dismiss.modal`意味着注册一个单击处理程序，该处理程序在触发事件中传递`dismiss`或命名空间时触发，或者在没有命名空间的情况下调用。`modal``click`

`modal`不是“嵌套”在下面（`dismiss`语法可能会产生误导），但它们被视为直接“附加”到`click`. 这意味着`click.dismiss.modal`相当于`click.modal.dismiss`。

例子：

```
$('#elem').on('click.dismiss.modal', function () {});
$('#elem').trigger('click.dismiss');  // handler is called
$('#elem').trigger('click.modal');  // handler is called
$('#elem').trigger('click');  // handler is called
$('#elem').trigger('click.abc');  // handler is NOT called 
```

注意`trigger()`,`unbind()`和`off()`只接受一个命名空间。

```
$('#elem').off('click.dismiss');  // now the handler is just 'click.modal' 
```

您还可以取消绑定 using `.dismiss`which 将删除具有该名称空间的所有事件（不仅仅是`click`）。触发本身不适用于命名空间；点之前必须有一个事件名称。

# android - 在 Google Places API 中传递当前位置（经度和纬度）

> ID：10018033
> 
> 赞同：1
> 
> 时间：2012-04-04T19:34:41.253
> 
> 标签：android, latitude-longitude, google-places-api

我正在尝试将 Google Places API 集成到我的应用中。现在我正在查找手机的当前位置，如何将我得到的经度和纬度嵌入到以下 URL 而不是“location=34.0522222,-118.2427778”

“https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=restaurants&sensor=false&key=Your_API_Key”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T02:40:33.007

您的意思是如何进行字符串操作，例如（未经测试）：

```
int latitude = ...;
int longitude = ...;
String preamble = "https://maps.googleapis.com/maps/api/place/search/xml?location=";
String postamble = "&radius=500&types=restaurants&sensor=true&key=";
String key = "Your_api_key";
String latStr = latitude + "";
String longStr = longitude + "";
String url = preamble + latStr + "," + longStr + postamble + key; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:38:01.207

```
$lat = location[0];
$long = location[1]; 
```

应该可以，但我使用 json 从谷歌获取 long 和 lat。更好。如果不工作，我可以再次检查。

这是更好的json解决方案：

[http://maps.googleapis.com/maps/api/geocode/json?address=Atlantis&sensor=true&oe=utf-8](http://maps.googleapis.com/maps/api/geocode/json?address=Atlantis&sensor=true&oe=utf-8)

你应该把亚特兰蒂斯改成地址

# iphone - 使用 UITextfield 模拟 twitter boostrap 表单控件

> ID：10018034
> 
> 赞同：0
> 
> 时间：2012-04-04T19:34:41.403
> 
> 标签：iphone, uitextfield, controls, twitter-bootstrap

Twitter Bootstrap 有一个表单控件，当处于活动模式时，它会在边框上“发光”，我想知道是否可以在 iPhone 上使用 UITextField 实现这种效果。有人试过吗？

（http://twitter.github.com/bootstrap/base-css.html 搜索表单控件）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:03:07.380

实现这一点的最简单方法可能是修改其支持层：

```
CALayer *theLayer = [theTextField layer];
[theLayer setBorderWidth:2.];
[theLayer setBorderColor:[[UIColor blueColor] CGColor]];
[theLayer setShadowColor:[[UIColor blueColor] CGColor]];
[theLayer setShadowOpacity:1.];
[theLayer setShadowRadius:5.];
[theLayer setShadowOffset:CGSizeZero];
[theTextField setClipsToBounds:NO]; 
```

IMO 这种方法的最大缺点是 CALayer 阴影操作非常缓慢，因此如果您正在制作动画（例如在滚动/表格视图中），这将基本上无法使用。但是，您可以通过各种增强来获得更高性能的阴影[。](https://www.omnigroup.com/blog/entry/ipad_drop_shadow_performance_test/)

（另外，你显然不会想要我使用的丑陋的深蓝色！）

# facebook - 通过应用程序将带有参数的 swf 发布到 facebook

> ID：10018045
> 
> 赞同：0
> 
> 时间：2012-04-04T19:35:18.413
> 
> 标签：facebook, flash, facebook-graph-api

我有一个 facebook 应用程序，用户在其中选择 4 个朋友，然后它创建一个视频 (swf)，其中包含您朋友的图片（通过 xml 加载）。所以我需要在用户时间轴上分享这个视频。一切正常，但视频没有嵌入到他时间轴上的帖子中，只有一个帖子，其中包含指向页面的链接。

奇怪的是，如果我直接在我的时间轴上发布网址，视频是嵌入的，但如果通过应用程序发布相同的链接，则不会。

这是我在 js 中的分享按钮调用的代码：

```
function postToFeed() {
    var obj = {
      method: 'feed',
      link: 'https://mysite.com/flash/share-page.php?id=22',
      picture: 'https://mysite.com/images/video-preview.jpg',
      name: 'Name',
      caption: 'Caption',
      description: 'Description'
    };

    function callback(response) {
      //some code here
    }

    FB.ui(obj, callback);
  } 
```

以及我的 share-page.php 中的代码

```
<?php

$id_inscription = $_GET['id'];

$video_url = 'https://mysite.com/flash/share-page.php?id=22';
$video_preview_image = 'https://mysite.com/images/video-preview.jpg';

?>

<!DOCTYPE html>
<html>
<head>
    <title>Title</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="content-language" content="en">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<meta property="og:video" content="<?php echo $video_url; ?>"/>

<!-- Open grah tags for Facebook -->
<meta property="og:title" content="Test video player" />
<meta property="og:description" content="A video player interface experiment." />
<meta property="og:type" content="video" />
<meta property="og:url" content="<?php echo $video_url; ?>"/>
<meta property="og:image" content="<?php echo $video_preview_image; ?>"/>
<meta property="og:site_name" content="Site name"/>

<!-- Video specific open graph tags -->
<meta property="og:video" content="<?php echo $video_url; ?>" />
<meta property="og:video:secure_url" content="<?php echo $video_url; ?>" /> <!-- Required for people on Facebook who have secure browsing enabled! -->
<meta property="og:video:width" content="325" />
<meta property="og:video:height" content="180" />
<meta property="og:video:type" content="application/x-shockwave-flash" />

<script src="js/swfobject.js"></script>
<script>
    var flashvars = {
        xmlUrl:"xml/data-<?php echo $id_inscription; ?>.xml",
        policyFileUrl:"http://profile.ak.fbcdn.net/crossdomain.xml"
    };
    var params = {
        menu: "false",
        scale: "noScale",
        allowFullscreen: "true",
        allowScriptAccess: "always",
        bgcolor: "",
        wmode: "opaque"
        //wmode: "direct" // can cause issues with FP settings & webcam
    };
    var attributes = {
        id:"content"
    };
    swfobject.embedSWF(
        "app.swf",
        "altContent", "480", "270", "10.0.0",
        "expressInstall.swf",
        flashvars, params, attributes);
</script>
</head>

<body>
<div id="altContent">
    <p><a href="http://www.adobe.com/go/getflashplayer">Get Adobe Flash player</a></p>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:49:25.420

找到它，在你必须添加的javascript中

```
source: 'https://mysite.com/flash/app.swf' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T04:47:26.673

不适合我。facebook还说，它不应该按设计工作。

[https://developers.facebook.com/bugs/589975484398226?browse=external_tasks_search_results_526fc388b99e18881434478](https://developers.facebook.com/bugs/589975484398226?browse=external_tasks_search_results_526fc388b99e18881434478)

如果您可以使其工作，请在此处分享您的代码片段。我也有处理安全视频 URL 的元标记。

# python - Django 模板中的索引方法

> ID：10018046
> 
> 赞同：0
> 
> 时间：2012-04-04T19:35:20.173
> 
> 标签：python, django, django-templates

在我的 Django 模板中，我需要返回列表中项目的索引。（python 中的索引方法）我可以这样做的方法是什么。我需要使用自定义过滤器吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:39:30.703

如果你想在一个循环中使用这个，你可以使用[forloop.counter](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)变量。否则，您可以使用 python 计算它并在上下文中将其传递给模板。

# java - 如何遍历 Jasper 中的列表？

> ID：10018048
> 
> 赞同：2
> 
> 时间：2012-04-04T19:35:32.610
> 
> 标签：java, jasper-reports, report

我似乎找不到任何关于此的信息，但基本上情况就是这样。我需要显示一组字符串，在这种情况下它们是小时周期。我试图避免编写 Java 类，但如果有必要，我可以这样做。基本上我想显示类似

```
1-2pm
2-3pm
3-4pm
4-5pm 
```

我尝试创建一个列表和一个变量，然后只是做

```
new ArrayList 
```

将其分配给变量，然后执行

```
$V{my_var}.add("1-2pm") 
```

但是当我将该变量分配给列表时，它似乎不起作用。这通常是如何处理的？理想情况下，我希望有一种方法可以使用表达式编辑器简单地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T06:59:07.587

您可以在变量表达式中使用[Arrays.asList(T... a)方法。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList%28T...%29)

这个例子：

```
<variable name="listVar" class="java.util.List">
    <variableExpression><![CDATA[Arrays.asList(new String[] {"1-2pm", "2-3pm", "3-4pm", "4-5pm"})]]></variableExpression>
    <initialValueExpression><![CDATA[Arrays.asList(new String[] {"1-2pm", "2-3pm", "3-4pm", "4-5pm"})]]></initialValueExpression>
</variable> 
```

# asp.net-mvc-3 - 在 MVC3 中将对象放入模型中的顺序是什么以及如何控制它

> ID：10018051
> 
> 赞同：1
> 
> 时间：2012-04-04T19:35:45.663
> 
> 标签：asp.net-mvc-3

我有一个模型从我的视图中成功传回，除了我希望将 ID 值作为绑定回​​模型的第一件事，以便它可以填充数据库中的一些信息。回传的信息如下

```
SetupID:91c16e34-cf7d-e111-9b66-d067e53b2ed6
SwayBarLinkLengthLF:
SwayBarLinkLengthRF:
.....way more information.... 
```

我的行动如下

```
[HttpPostAttribute]
public ActionResult SaveSetup(SetupAggregate setup)
{
   setup.SaveSetup();
   return null;
} 
```

我希望 SetupID 成为在空设置对象上设置的第一个属性，但看起来第一个属性按字母顺序首先设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T02:21:26.440

在我看来，您确实需要使用 2 个单独的“模型”——您的 ViewModel，它是您的 MVC 项目中的内容，并呈现到您的视图中。以及业务逻辑层中的第二个实体模型。这是标准的“企业”编程设计。它使您可以更好地控制数据。这个想法是这样的。

UI 组装（MVC 项目）

ViewModel 定义

```
public class MyModel {
    public int ID { get; set; }
    .... // bunch of other properties
} 
```

控制器

```
public class InterestingController : Controller {

    public ActionResult CreateNewWidget() {
        var model = new MyModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult CreateNewWidget(MyModel model) {
        if(ModelState.IsValid) {
            // your ctor can define the order of your properties being sent in and you can set the entity values in the ctor body however you choose to. Note never SET an ID/Primary key on a Create, let the DB handle that. If you need to return the new Key value, get it from the insert proc method in your DAL and return it up the stack
            var entityModel = new EntityFromBLL(model.Name, model.OtherProperty, ... etc);
            entityModel.Save(User.Identity.Name); // your save method should always capture WHO is doing the action
        }
        return View(model);
    }

    public ActionResult UpdateExistingWidget(int id) {
        var entityModel = new EntityFromBLL(id); // get the existing entity from the DB
        var model = new MyModel(entityModel.ID, entityModel.Name, ... etc); // populate your ViewModel with your EntityModel data in the ViewModel ctor - note remember to also create a parameterless default ctor in your ViewModel as well anytime you create a ctor in a ViewModel that accepts parameters
        return View(model);
    }

    [HttpPost]
    public ActionResult UpdateExistingWidget(MyModel model) {
        if(ModelState.IsValid) {
            var entityModel = new EntityFromBLL(model.ID); // always pull back your original data from the DB, in case you deal with concurrency issues
            // now go thru and update the EntityModel with your new ViewModel data
           entityModel.Name = model.Name;
           //... etc set all the rest of the properties
           // then call the save
           entityModel.Save(User.Identity.Name);
        }
        return View(model)
    }
} 
```

您的实体模型应该使用私有字段、公共属性、一个接受插入的所有必需字段（减去主键）的 ctor、一个接受主键然后可以静态调用内部加载方法以返回的 ctor 来定义一个填充的对象。业务规则和属性验证以及单个 Save 方法。Save 方法应在设置所有属性后检查 IsDirty 位并调用相应的 Insert 或 Update 方法 .. 这又应调用 DAL 传递 DTO

# python - 如何从 Python 中检测到 MySQL 服务器的总死亡？

> ID：10018055
> 
> 赞同：2
> 
> 时间：2012-04-04T19:35:50.390
> 
> 标签：python, django, mysql-python

我一直在对我们的数据库进行一些 HA 测试，在我模拟服务器死亡的过程中，我发现了一个问题。

我的测试使用 Django 并执行此操作：

1.  连接到数据库
2.  进行查询
3.  拔出服务器的网线
4.  做另一个查询

此时，一切都无限期地挂在 mysql_ping 函数中。就我的应用程序而言，它已连接到数据库（因为之前的查询），只是服务器需要很长时间才能响应......

有谁知道处理这种情况的任何方法？connect_timeout 不起作用，因为我已经连接。read_timeout 似乎有点过于生硬（无论如何我什至无法使用 Django）。

设置默认套接字超时也不起作用（并且过于生硬，因为这会影响所有套接字操作而不仅仅是 MySQL）。

我正在认真考虑在线程中进行查询并使用 Thread.join(timeout) 来执行超时。

理论上，如果我能做到这个超时，那么重新连接逻辑应该会启动，并且我们的数据库自动故障转移应该可以完美运行（在受影响的进程上 kill -9 目前可以解决问题，但有点手动！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:05:50.117

我认为这与在您的前端网络服务器上设置 read_timeout 更加一致。可能存在无限期阻止您的 django 应用程序的任何原因。虽然您发现了一种特定情况，但可能还有更多情况（代码错误、缓存困难等）。

# asp.net - 更新面板不工作，不知道为什么

> ID：10018060
> 
> 赞同：2
> 
> 时间：2012-04-04T19:36:09.717
> 
> 标签：asp.net, updatepanel

如果在第一个下拉框中选择了电话，我想关闭下拉电话帮助，但它似乎不起作用。这是代码：

。网

```
 <asp:DropDownList ID="ddlHowRec" runat="server">
            <asp:ListItem Value="" Text="Choose an option"></asp:ListItem>
            <asp:ListItem Value="mail" Text="Mail"></asp:ListItem>
            <asp:ListItem Value="e-mail" Text="E-mail"></asp:ListItem>
            <asp:ListItem Value="phone" Text="Call back"></asp:ListItem>
        </asp:DropDownList>

            <asp:Label ID="lblPhoneHelp" runat="server" AssociatedControlID="ddlPhoneHelp"></asp:Label>
        <asp:DropDownList ID="ddlPhoneHelp" runat="server">
            <asp:ListItem Value="" Text="Choose an option"></asp:ListItem>
            <asp:ListItem Value="yes" Text="Yes"></asp:ListItem>
            <asp:ListItem Value="no" Text="No"></asp:ListItem>
        </asp:DropDownList> 
```

VB：

```
 Protected Sub ddlHowRec_SelectedIndexChanged(ByVal sender As Object, ByVal e As      System.EventArgs) Handles ddlHowRec.SelectedIndexChanged

    If ddlHowRec.SelectedValue = "phone" Then
        lblPhoneHelp.Enabled = False
    Else
        lblPhoneHelp.Enabled = True
    End If
 End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:38:39.893

您正在禁用`lblPhoneHelp`而不是`ddlPhoneHelp`.

```
ddlPhoneHelp.Enabled = Not ddlHowRec.SelectedValue = "phone" 
```

# java - 如何从 Desire2Learn 导出成绩？

> ID：10018065
> 
> 赞同：0
> 
> 时间：2012-04-04T19:36:45.397
> 
> 标签：java, desire2learn

学校的应用程序开发人员（使用 Java）如何从 D2L 实例中导出成绩？

如果我正在构建一个需要使用实用程序帐户的 D2L Valence 应用程序（如描述的方法：[https](https://stackoverflow.com/a/9950523/680651) ://stackoverflow.com/a/9950523/680651 ）来导出一堆成绩：

如何一次性配置appid和app key？

如何一次性配置用户 ID 和用户密钥？

我需要哪些 REST 调用才能实际获取班级列表并导出成绩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:57:23.280

**关于公用事业帐户：**

我会考虑尝试使用讲师上下文，这样您就不必强制执行角色。但是，如果您确实使用公用事业帐户：

**关于 AppID 和 AppKey 的一次性配置：**

1.  [按照keytool 演练](http://docs.valence.desire2learn.com/clients/tools/keytool.html#key-request-walk-through)向 keytool 请求密钥
2.  将从该工具通过 Desire2Learn 进行跟进，并通过您所在机构的批准联系人进行跟进，以确保应该启用该密钥。
3.  启用后，您可以将这些密钥直接编译到您的 java 代码或资源文件（或 db）中。[它们在几个地方的 java 库中使用，并允许您从 Desire2Learn管理可扩展性工具](http://docs.valence.desire2learn.com/admin/manage.html)中打开或关闭单个应用程序。

**关于实用程序帐户 userid 和 userkey 的一次性配置：**

[将入门示例](http://docs.valence.desire2learn.com/samples/gettingStarted.html)转换为安装程序 可能最容易：

1.  示例中使用的 auth 库可用于仅对您自己的实例进行身份验证（而不是提示输入主机名）。这将生成一个身份验证 URL，例如“https://my.host.name/d2l/auth/api/token?x_a=......”，应将其设置为“选择要运行的实用程序帐户”的步骤这个应用程序”。
2.  调整 index.jsp 中的 java 示例并更改将 userid 和 userkey 保存到会话的行：

    > session.setAttribute("userID", userContext.getUserId());
    > 
    > session.setAttribute("userKey", userContext.getUserKey());

    而是将其保存到数据库中。

3.  配置您的应用程序时，运行此程序并使用您要使用的实用程序帐户登录 D2L。登录完成后，将运行 index.jsp 代码并保存密钥。
4.  这些键在 java 库中使用，并向 LMS 证明调用是在哪个用户上下文中进行的。

**关于获取课程列表和课程成绩：**

1.  对于所有调用，我将使用名为 ID2LUserContext [createAuthenticatedUri的](http://docs.valence.desire2learn.com/externaldocs/javadocs/javaclientlib/com/d2lvalence/idkeyauth/ID2LUserContext.html)[库](http://docs.valence.desire2learn.com/clients/java/index.html)操作，传入文档中注明的路径。
2.  [通过用户调用](http://docs.valence.desire2learn.com/res/enroll.html#get--d2l-api-lp-%28D2LVERSION-version%29-enrollments-users-%28D2LID-userId%29-orgUnits-)获取具有组织单位的讲师的组织单位（包括课程）

此电话的示例请求：

```
GET
https://valence.desire2learn.com/d2l/api/lp/1.0/enrollments/users/3667/orgUnits/?x_b=JgqB2bumFwQkWft-gUP8Qr&x_a=L2Hd9WvDTcyiyu5n2AEgpg&x_d=XeTMX5fliLPTJdtKqeE_a0esDmTriSC9Aq9sMtpoO00&x_c=2AhFhrwhv1RsIdshAMba0upiux7Bhz-znS-VqjXhQh8&x_t=1333565539
HTTP/1.1 Accept-Encoding: gzip,deflate User-Agent: Jakarta
Commons-HttpClient/3.1 Host: valence.desire2learn.com 
```

（值 x_a、x_b、x_c、x_d 和 x_t 用于身份验证，如果您使用客户端库，则会自动添加）

3.这个调用最终会包含[OrgUnitInfo 结构](http://docs.valence.desire2learn.com/res/enroll.html#Enrollment.OrgUnitInfo)

这是原始响应：

```
HTTP/1.1 200 OK
Cache-Control: no-cache, no-store
Pragma: no-cache
Content-Length: 17300
Content-Type: application/json; charset=UTF-8
Expires: -1
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Date: Wed, 04 Apr 2012 18:52:08 GMT

{"PagingInfo":{"Bookmark":"6789","HasMoreItems":true},"Items":[

<SNIP/>

{
         "OrgUnit":          {
            "Id": 6789,
            "Type":             {
               "Id": 3,
               "Code": "Course Offering",
               "Name": "Course Offering"
            },
            "Name": "In",
            "Code": "dSCL_101_ONGOING_01"
         },
         "Role":          {
            "Id": 71,
            "Code": null,
            "Name": "Instructor Role"
         }
      }    

<SNIP/> 
```

4.OrgUnitInfo 结构中的 ID 可用于通过[课程操作的成绩检索成绩](http://docs.valence.desire2learn.com/res/grade.html#get--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-grades-)

有关如何将文档资源转化为工作调用的背景信息，您需要查看[文档约定](http://docs.valence.desire2learn.com/basic/conventions.html)。

# jquery - jQgrid tableToGrid() 忽略选项中的 colModel 和 ColNames

> ID：10018069
> 
> 赞同：2
> 
> 时间：2012-04-04T19:37:09.093
> 
> 标签：jquery, jqgrid

当涉及到`tableToGrid()`函数时，我正在浏览 jqGrid 4.3.1 的文档和源代码，我发现`ColModel`and`ColNames`被包含在`options`对象中时被忽略，因为它们是从 HTML 表格布局构造的。

我的问题是有一种方法可以强制`tableToGrid()`接受这两个数组`(ColModel,ColNames)`，而不是从 HTML 表中构造它们，特别是如果表列是预先知道的。

当我浏览代码时，我在代码中找到了这部分`TableToGrid`

```
function tableToGrid(selector, options) {
...
...
// Build up the columnModel and the data
var colModel = [];
var colNames = [];
jQuery('th', jQuery(this)).each(function() {
    if (colModel.length === 0 && selectable) {
        colModel.push({
            name: '__selection__',
            index: '__selection__',
            width: 0,
            hidden: true
        });
        colNames.push('__selection__');
    } else {
        colModel.push({
            name: jQuery(this).attr("id") || jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(' ').join('_'),
            index: jQuery(this).attr("id") || jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(' ').join('_'),
            width: jQuery(this).width() || 150
        });
        colNames.push(jQuery(this).html());
    }
}); 
```

但是，我的 hack 会考虑这些更改

```
 function tableToGrid(selector, options) {
...
...
// Build up the columnModel and the data
if(options.hasOwnProperty("colModel") && options.hasOwnProperty("colNames")) {
    var colModel = options.colModel;
    var colNames = options.colNames;
} else {
    var colModel = [];
    var colNames = [];
    jQuery('th', jQuery(this)).each(function() {
                    if (colModel.length === 0 && selectable) {
                    colModel.push({
                    name: '__selection__',
                    index: '__selection__',
                    width: 0,
                    hidden: true
                    });
                    colNames.push('__selection__');
                    } else {
                    colModel.push({
                    name: jQuery(this).attr("id") || jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(' ').join('_'),
                    index: jQuery(this).attr("id") || jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(' ').join('_'),
                    width: jQuery(this).width() || 150
                    });
                    colNames.push(jQuery(this).html());
                    }
    });
} 
```

我只是想知道是否有一种更简单的方法（可能是我错过的一个选项）可以强制执行此类行为而无需调整源代码。

我首先这样做的原因是强制`datefmt`某些字段的选项，因为它们被 jQgrid 忽略，导致搜索功能出现问题。如果@Oleg 可以对此提供一些见解，我们将不胜感激。

干杯，N.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:12:17.687

我认为您的主要问题是您`tableToGrid`根本使用。我发现关于常见用法或架构的问题是技术问题。

如果您*输入*了数字、日期、货币等数据，您可能希望数据能够正确排序，例如 jqGrid。从 HTML 表中解析本地化数据并取消数据格式并不是最好的方法。如果您*直接*创建 jqGrid，您可以节省时间。`data`您应该在参数中提供输入数据。以这种方式，数据将易于安全地读取、排序和分页。您可以轻松地包括工具栏过滤或高级搜索或其他过滤搜索。只有当您提供 jqGrid*纯数据*时，一切都会好起来。

有关更多信息，请参阅[答案](https://stackoverflow.com/a/9795116/315935)。

# symfony - symfony2 学说加入

> ID：10018070
> 
> 赞同：1
> 
> 时间：2012-04-04T19:37:10.967
> 
> 标签：symfony, doctrine, left-join

好的，所以我有一个查询，我已经研究并研究了如何让它工作，而对于我的生活，我不能！...也许我只是做错了，我发现的信息很少..

我有一个名为 timeclock setup.. 的表，其中有一个字段：noteBy_id，它是记录所属用户的 id...

我现在需要做的是系统中事物的管理方面。我预计会有超过 1 家公司使用这个时钟系统，因此我需要根据公司 ID 过滤结果。在用户表中，我有一个名为`parentcompany_id`

所以，让我们看看我是否可以用语言表达我需要做的事情..

我需要从时钟中选择 * 并离开加入 user.parentcompany_id where timeclock.daydate < :start 和 where u.parentcompany = :pid

其中开始是：`date('Ymd 00:00:00');

我已经设置了这个查询：

```
$em = $this->getDoctrine()->getEntityManager();
$start = date('Y-m-d 00:00:00');
$qb = $em->getRepository('EcsCrmBundle:TimeClock');
$qb = $qb->createQueryBuilder('t');

$query = $qb->select('t, u.parentcompany_id')
->from('timeclock', 't')
->leftJoin('Ecs\AgentManagerBundle\Entity\User', 'u', 'ON' 'u.id = t.noteBy_id AND u.parentcompany_id = :pid')
->where('t.daydate < :start')
->andWhere("t.noteBy_id != ''")
->setParameter('start', $start)
->setParameter('pid', $user->getParentcompany())
->getQuery();

$entities = $query->getArrayResult(); 
```

我看了又看，找不到解决我得到的错误的方法：

```
An exception has been thrown during the rendering of a template ("[Semantical Error] line 0, col 112 near 'u ON u.id = t.noteBy_id': Error: Identification Variable Ecs\AgentManagerBundle\Entity\User used in join path expression but was not defined before.") in EcsCrmBundle:TimeClock:manager.html.twig at line 5. 
```

得到输出的查询是：

```
SELECT t, u.parentcompany_id FROM Ecs\CrmBundle\Entity\TimeClock t LEFT JOIN Ecs\AgentManagerBundle\Entity\User u ON u.id = t.noteBy_id AND u.parentcompany_id = :pid, timeclock t LEFT JOIN Ecs\AgentManagerBundle\Entity\User u ON u.id = t.noteBy_id AND u.parentcompany_id = :pid WHERE t.daydate < :start AND t.noteBy_id != '' 
```

在正常情况下它会完美地工作......但在这种情况下，它只是不......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T02:08:01.980

我最近不得不这样做..我猜你的noteBy是用户表中的ManyToOne，你想让它过滤当前登录到你的管理员公司的结果系统..

因此，为这样的任务调整我必须自己编写的连接很容易。我个人喜欢使用 QueryBuilder，所以这将在查询生成器中完成。

您查询中的第一个错误是该`->from('timeclock', 't')`行。因为您之前已经创建了对象，`$qb = $em->getRepository('EcsCrmBundle:TimeClock'); $qb = $qb->createQueryBuilder('t');`所以不需要`from`在查询构建器中，因为它将为您生成。

下一个问题是 leftJoin，当我向您展示工作版本时，我将解释原因。

最后一个问题，阻止它按你想要的方式工作 - 是一个缺失的`andWhere`条款。因此，让我们看一下一个有效的查询。

```
$query = $qb->select('t, u')
     ->leftJoin('t.noteBy', 'u', 'WITH', 'u.id = t.noteBy')
     ->where('t.daydate < :start')
     ->andWhere('u.parentcompany = :pid')
     ->setParameter('start', $start)
     ->setParameter('pid', $user->getParentcompany()) 
     ->getQuery(); 
```

所以因为我们已经通过使用创建了对象，所以`$qb = $qb->createQueryBuilder('t')`我们只需选择`t`和`u`

对于连接，我们通过列连接时钟表，该`noteBy`列是用户表中的用户 ID。因此，第一个参数是“来自”别名。因此，由于我们使用 t 为时钟表起别名，我们使用`t.noteBy`. leftjoin 中的下一个参数是第二个表的别名，`u`在这种情况下，它可以是任何东西。无论如何，leftJoin 的第三个参数 - 是您加入它的方式.. 要么 a`WITH`要么`ON`将在这里工作。第四个参数是您希望它拥有的匹配项.. 在这种情况下`u.id must equal t.noteBy`

您会看到我删除了其中一个`andWhere`，我这样做是因为使用结构正确的查询您不需要它。但是，我确实添加了`andWhere`for，`u.parentcompany`因为毕竟这是您要过滤的内容，您应该将其放在 WHERE 中，而不是作为连接本身的匹配项。

文档在这方面非常有限，我也花了一段时间才弄清楚。毫无疑问，你和我一样，是通过手工编写查询来使用学说的。因此，由于您似乎刚刚开始使用 Symfony（我自己也是现在大约 2 个月），您仍然处于手动编码的心态。但随着时间的推移，您将开始了解 DQL 的生活方式。试试这个查询，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T23:36:08.903

好的，首先您需要将实体`Timeclock`与`Company`. 每当您想加入两个实体时，`Doctrine`它们都需要通过某些属性（即表列）相关联。

我认为此查询中不需要`User`实体，因为所有信息都可以通过`Company`实体获得，并且您没有根据任何用户属性过滤结果。

您想要的查询应该看起来像这样（或多或少）。我冒昧地`_id`从实体属性中删除了后缀，因为它们往往会掩盖真正发生的事情。;)

```
$query = $this->getEntityManager()->createQuery("SELECT t, c.id FROM EcsCrmBundle:TimeClock t JOIN t.company c WHERE c.id = :pid AND t.daydate < :start AND t.noteBy != ''");

$query->setParameter('start', $start);
$query->setParameter('pid', $user->getParentcompany());
return $query->getArrayResult(); 
```

另外，我做了`inner-join`（ ），因为我认为没有它的陪伴就不可能有时钟，但如果它更适合你，请`JOIN`随意更改。`LEFT JOIN`

这是你想要达到的目标吗？

# jsf - 定义错误页面位置 jsf 2

> ID：10018075
> 
> 赞同：0
> 
> 时间：2012-04-04T19:37:52.370
> 
> 标签：jsf, jsf-2, viewexpiredexception

我试图在会话到期时将我的用户重定向到登录页面。我按照此链接上的说明[如何在 JSF 2 中处理会话过期和 ViewExpiredException？](https://stackoverflow.com/questions/4992526/how-to-handle-session-expiration-in-jsf-2-0)它可以工作，除了它将我重定向到一个不存在的页面。

在我的应用程序根目录中，我有一个 login.xhtml 页面。所以在我的 web.xml 我有这个：

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/login.xhtml</location>
</error-page> 
```

但是，当会话到期时，当我使用位于 localhost/sample/user/create.sm 的应用程序时，它会将我重定向到 localhost/sample/user/login.xhtml，而我预计会被重定向到 localhost/sample/login.sm . 我应该如何进行正确的配置？

我正在使用 jboss 6.1 和 mojarra 2.1.7

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:05:56.913

`<location>`必须匹配`FacesServlet`映射。您似乎已将其映射到`*.sm`而不是`*.xhtml`. 在这种情况下，更改`/login.xhtml`为`/login.sm`。

# android - Yii 和 Android 之间的肥皂

> ID：10018077
> 
> 赞同：3
> 
> 时间：2012-04-04T19:38:03.587
> 
> 标签：android, web-services, soap, yii

再会。我尝试使用 yii 和 android 客户端创建 Web 服务服务器。这是我的 WSDL，我在本地主机上创建它，网址是[http://localhost:8888/places/index.php?r=Service/service](http://localhost:8888/places/index.php?r=Service/service)

```
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="urn:ServiceControllerwsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" name="ServiceController" targetNamespace="urn:ServiceControllerwsdl">
<wsdl:message name="registrateRequest">
<wsdl:part name="login" type="xsd:string"/>
<wsdl:part name="password" type="xsd:string"/>
<wsdl:part name="email" type="xsd:string"/>
<wsdl:part name="name" type="xsd:string"/>
</wsdl:message>
<wsdl:message name="registrateResponse">
<wsdl:part name="return" type="xsd:string"/>
</wsdl:message>
<wsdl:message name="authenticateRequest">
<wsdl:part name="login" type="xsd:string"/>
<wsdl:part name="password" type="xsd:string"/>
</wsdl:message>
<wsdl:message name="authenticateResponse"/>
<wsdl:portType name="ServiceControllerPortType">
<wsdl:operation name="registrate">
<wsdl:documentation/>
<wsdl:input message="tns:registrateRequest"/>
<wsdl:output message="tns:registrateResponse"/>
</wsdl:operation>
<wsdl:operation name="authenticate">
<wsdl:documentation/>
<wsdl:input message="tns:authenticateRequest"/>
<wsdl:output message="tns:authenticateResponse"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="ServiceControllerBinding" type="tns:ServiceControllerPortType">
<soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="registrate">
<soap:operation soapAction="urn:ServiceControllerwsdl#registrate" style="rpc"/>
<wsdl:input>
<soap:body use="encoded" namespace="urn:ServiceControllerwsdl" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</wsdl:input>
<wsdl:output>
<soap:body use="encoded" namespace="urn:ServiceControllerwsdl" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="authenticate">
<soap:operation soapAction="urn:ServiceControllerwsdl#authenticate" style="rpc"/>
<wsdl:input>
<soap:body use="encoded" namespace="urn:ServiceControllerwsdl" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</wsdl:input>
<wsdl:output>
<soap:body use="encoded" namespace="urn:ServiceControllerwsdl" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="ServiceControllerService">
<wsdl:port name="ServiceControllerPort" binding="tns:ServiceControllerBinding">
<soap:address location="http://localhost:8888/places/index.php?r=service/service&ws=1"/>
</wsdl:port>
</wsdl:service>
</definitions> 
```

我在 yii 中用这个类创建它

```
<?php

class ServiceController extends CController
{
    public function actions()
    {
        return array(
            'service'=>array(
                'class'=>'CWebServiceAction',
            ),
        );
    }
    /**
     * @param string login
     * @param string password
     * @param string email
     * @param string name
     * @return string 
     * @soap
     */
    public function registrate($login, $password, $email, $name)
    {
        $user = new UserModel();
        /*create new user*/
        $user->login = $login;
        $user->password = md5($password);
        $user->email = $email;
        $user->name = $name;
        $user->active = 0;
        //save to DB
        $user->save(); 
        return 'success';

    }
    /**
     * @param string login
     * @param string password
     * return int
     * @soap
     */
    public function authenticate($login, $password)
    {
        $post=Post::model()->find('postID=:postID', array(':postID'=>10));
        $user = UserModel::model()->find('login:=login and password:=password', 
                                    array(':login' => $login, ':password'=>$password));
        if (!empty ($user)){
            return 1;
        }
        else{
            return 0;
        }

    }
} 
```

当我尝试在 android 上用 ksoap 连接它时

```
public class PlacesActivity extends Activity {
    /** Called when the activity is first created. */
    private static String SOAP_ACTION = "urn:#registrate";
    private static String NAMESPACE = "urn:ServiceControllerwsdl";
    private static String METHOD_NAME = "registrate";
    private static String URL = "http://localhost:8888/places/index.php?r=Service/service";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       
            //Use this to add parameters
            request.addProperty("login","nabiullin11");
            request.addProperty("password","qwer1234");
            request.addProperty("email","nabiullinas@gmail.com");
            request.addProperty("name","nabiullin11");
            //Declare the version of the SOAP request
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            //Needed to make the internet call
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            try {
                //this is the actual part that will call the webservice
                androidHttpTransport.call(SOAP_ACTION, envelope);
            } catch (Exception e) {
                TextView t = (TextView)this.findViewById(R.id.resultbox);
                //Get the first property and change the label text
                t.setText("FAIL");
                e.printStackTrace();
            }
            SoapObject result = (SoapObject)envelope.bodyIn;
            if(result != null){
                TextView t = (TextView)this.findViewById(R.id.resultbox);
                //Get the first property and change the label text
                t.setText("SOAP response:\n\n" + result.getProperty(0).toString());
            }

    }

} 
```

我总是以失败告终。我的wsdl有问题吗？或者我有这样的问题，因为尝试连接到本地主机服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T21:30:47.563

尝试使用此参数，我正在使用 yii 和 android，并且我在最近几天遇到了同样的问题，这是解决方案：

```
static String SOAP_ACTION = "urn:ServiceControllerwsdl#authenticate";
private static String NAMESPACE = "urn:ServiceControllerwsdl";
private static String METHOD_NAME = "authenticate";
private static String URL = "http://localhost:8888/places/index.php?r=service/service&ws=1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T18:44:43.137

尝试将您的参数更改为以下内容：

```
private static String SOAP_ACTION = "urn:ServiceControllerwsdl#authenticate";
private static String NAMESPACE = "http://windwalk.ru";
private static String METHOD_NAME = "authenticate";
private static String URL = "http://windwalk.ru/places/index.php?r=service/service&ws=1"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:48:39.383

问题出在 yii 框架中，因为它需要我不正常的 WSDL。我在 Java 上做了服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T18:59:33.617

也许有点晚了，但是如果有人正在寻找正确的答案，那就是使用 wsdl 给出的正确参数，而不是更改编程语言。

**YII 网络服务控制器**

```
<?php class WebServiceController extends Controller{

 public function actions()
{
    return array(
        'quote'=>array(
            'class'=>'CWebServiceAction',
        ),
    );
}

 /**
 * @return string the joke
 * @soap
 */
public function getJoke()
{
    $jokes= array(0=>"Ordinarily, staring is creepy. But if you spread your attention across many individuals, then it's just people watching.",
                     1=>"A bear walks into a bar and says to the bartender, I'll have a pint of beer and a.......... packet of peanuts. The bartender asks, 'Why the big pause?'",
                     2=>"A man goes to a $10 hooker and contracts crabs. When he goes back to complain, the hooker laughs and says, What do you expect for $10 --lobster?"
                     );
    return $jokes[rand(0,2)];
}?> 
```

**WSDL**

> `<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="urn:WebServiceControllerwsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" name="WebServiceController" targetNamespace="urn:WebServiceControllerwsdl"> <wsdl:message name="getJokeIn"/> <wsdl:message name="getJokeOut"> <wsdl:part name="return" type="xsd:string"/> </wsdl:message> <wsdl:portType name="WebServiceControllerPortType"> <wsdl:operation name="getJoke"> <wsdl:documentation/> <wsdl:input message="tns:getJokeIn"/> <wsdl:output message="tns:getJokeOut"/> </wsdl:operation> </wsdl:portType> <wsdl:binding name="WebServiceControllerBinding" type="tns:WebServiceControllerPortType"> <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/> <wsdl:operation name="getJoke"> <soap:operation soapAction="urn:WebServiceControllerwsdl#getJoke" style="rpc"/> <wsdl:input> <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:WebServiceControllerwsdl"/> </wsdl:input> <wsdl:output> <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:WebServiceControllerwsdl"/> </wsdl:output> </wsdl:operation> </wsdl:binding> <wsdl:service name="WebServiceControllerService"> <wsdl:port name="WebServiceControllerPort" binding="tns:WebServiceControllerBinding"> <soap:address location="http://192.168.117.1/webservice_test/index.php?r=webservice/quote&ws=1"/> </wsdl:port> </wsdl:service> </definitions>`

**使用 ksoap2-android-assembly-2.5.2 的常量**

```
 package jvasconez.com.webservicetest;

/**
 * Created by jvasconez on 8/4/2016.
 */
import android.app.Activity;
import android.os.AsyncTask;
import android.widget.TextView;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class WSManager extends AsyncTask<String,Integer,Boolean> {

    public String response="";
    public Activity mActivity;
    public WSManager(Activity act)
    {
        mActivity=act;
    }
    protected Boolean doInBackground(String... params) {

        boolean result = true;

        final String NAMESPACE = "urn:WebServiceControllerwsdl";
        final String URL="http://192.168.0.8/webservice_test/index.php?r=webservice/quote&ws=1";
        final String METHOD_NAME = "getJoke";
        final String SOAP_ACTION = "urn:WebServiceControllerwsdl#getJoke";
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        SoapSerializationEnvelope envelope =
                new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = false;

        envelope.setOutputSoapObject(request);

        HttpTransportSE transporte = new HttpTransportSE(URL,10000);

        try

     {
            transporte.call(SOAP_ACTION, envelope);

            response =(String) envelope.getResponse();
        }
        catch (Exception e)
        {
            result = false;
            response="";
        }

        return result;
    }

    protected void onPostExecute(Boolean result) {

        if (result)
        {
           TextView joke=(TextView)mActivity.findViewById(R.id.txt_joke);
            joke.setText(response);
        }

    }
} 
```

就是这样，它工作正常......

# actionscript-3 - mailto 不适用于 AS3

> ID：10018079
> 
> 赞同：0
> 
> 时间：2012-04-04T19:38:18.843
> 
> 标签：actionscript-3, mailto

所以这就是我使用的：

```
btnContactUs.addEventListener(MouseEvent.CLICK, fl_ClickToGoToWebPage);

function fl_ClickToGoToWebPage(event:MouseEvent):void
{

navigateToURL(new URLRequest("mailto:test@test.com"), "_blank");
} 
```

我也试过了`"_self"`，但它什么也没做（我知道按钮工作）。

您需要知道它不是嵌入在 html 页面中的应用程序。这是我运行的本地 .swf（Ctrl + enter（使用 .fla），但它不起作用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:19:56.283

```
 navigateToURL(new URLRequest("mailto:test@test.com"), "_blank"); 
```

无论您是否将其设置为仅访问网络或本地文件都可以工作，我不确定为什么您无法使其工作，您是否尝试过对该`fl_ClickToGoToWebPage`函数进行简单的跟踪以确保它被调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T18:58:22.947

我们可以将以下代码与 ExternalInterface 一起使用，其中“url”是 mailto：链接 URL。即mailto:abc@xyz.com?subject=Hello&body=defg

```
//Mailto Links from Flash
    ExternalInterface.call("function(link){var wEmail = window.open(link, '_blank'); setTimeout(function(){ wEmail.close();}, 70);}", url); 
```

# javascript - 为什么这两行都返回相同的结果

> ID：10018087
> 
> 赞同：-2
> 
> 时间：2012-04-04T19:38:52.650
> 
> 标签：javascript

这两个都返回真。一个是布尔值，另一个是文本。不应该没有 .value 错误，因为它是指对象而不是对象值属性？请帮助我更多地理解这一点。

```
<input type="text" name="sigstatus1" id="sigstatus1" style="display:none;" size="40" fieldlength="50"></input>
<input type="text" name="sigstatus2" id="sigstatus2" style="display:none;" size="40" fieldlength="50"></input>

var sigStatus1 = document.getElementById("sigstatus1").value;
var sigStatus2 = document.getElementById("sigstatus2");

sigStatus1 = true;
sigStatus2 = true;

alert("Sig1 " + sigStatus1 + "\nSig2 " + sigStatus2); 
```

小提琴[http://jsfiddle.net/Xp7jX/](http://jsfiddle.net/Xp7jX/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:09:43.263

您的问题的直接答案是：

```
alert("Sig1 " + sigStatus1 + "\nSig2 " + sigStatus2); 
```

将两个值都显示为 true，因为在该行代码之前，您将两个值都设置为 true：

```
sigStatus1 = true;
sigStatus2 = true;
alert("Sig1 " + sigStatus1 + "\nSig2 " + sigStatus2); 
```

看起来你认为这段代码：

```
var sigStatus1 = document.getElementById("sigstatus1").value;
sigStatus1 = true; 
```

将 DOM 元素值设置为 true。它不会。

当你这样做时：

```
var sigStatus1 = document.getElementById("sigstatus1").value; 
```

您只是从 DOM 元素中获取值并将其放入局部变量中。由于它是一个文本字段，因此该值将是一个文本字符串。

当你这样做时：

```
sigStatus1 = true; 
```

您只是用布尔值替换该局部变量的内容`true`（它对 DOM 元素没有任何作用）。然后，当您在警报中显示该变量时，javascript 会将布尔值转换为文本（出于显示目的），您会看到“真”。

如果你想设置显示来自 DOM 元素的值，你可以这样做：

```
var sigStatus1 = document.getElementById("sigstatus1").value;
alert(sigStatus1); 
```

如果你想设置 DOM 元素的值，你可以这样做：

```
document.getElementById("sigstatus1").value = "whatever"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:40:38.470

这两个值都是 boolean `true`，您正在显式覆盖这些值：

```
sigStatus1 = true;
sigStatus2 = true; 
```

也许你在找这个？

```
var sigStatus1 = document.getElementById("sigstatus1").value;
var sigStatus2 = document.getElementById("sigstatus2");
alert("Sig1 " + sigStatus1 + "\nSig2 " + sigStatus2); 
```

变量`sigStatus2`应该提醒类似的东西`[object HTMLDivElement]`（由 objects`toString`方法在内部生成）。

# ruby-on-rails - Rails/Memcached - MemCacheError（到达文件结尾）：到达文件结尾

> ID：10018088
> 
> 赞同：4
> 
> 时间：2012-04-04T19:38:58.940
> 
> 标签：ruby-on-rails, memcached

我的 Rails 应用程序正在使用 Memcached 服务器。

出于某种原因，我不时会进入`MemCacheError (end of file reached): end of file reached`我的 Rails 应用程序日志。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T17:58:45.637

由于您使用的是`memcache-client`，并且该代码自 2010 年以来已被弃用，因此它可能只是一个从未修复过的错误。后面的人`memcache-client`最终想出了`dalli`（[https://github.com/mperham/dalli](https://github.com/mperham/dalli)），它有更好的支持。

进入源代码`memcache-client`揭示了一些事情。唯一可以`MemCacheError`用这些错误消息引发 a 的地方是`Cache#get`、`Cache#put`、`Cache#add`或`Cache#delete`。您可以在 ( [https://github.com/mperham/memcache-client/blob/master/lib/memcache_util.rb](https://github.com/mperham/memcache-client/blob/master/lib/memcache_util.rb) ) 的第 42、61、76 和 91 行找到它们。在不知道更多关于你想要做什么的情况下，我无能为力，但希望这能让你开始。

# ruby-on-rails - 如何从特定日期的 facebook 用户新闻提要中获取所有帖子

> ID：10018089
> 
> 赞同：0
> 
> 时间：2012-04-04T19:39:00.183
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api

我想建立一个网站，向用户展示他的朋友在 facebook 上发布的所有视频，我知道如何拉取最近帖子的新闻提要，但我不知道如何拉取特定日期的所有帖子（所有从一天开始的帖子）。

我使用这个 FQL 调用来提取最近的视频：

```
SELECT post_id, source_id, actor_id, target_id, message, attachment, permalink, type FROM stream 
WHERE source_id IN (SELECT target_id FROM connection WHERE source_id=me() AND is_following=1) 
AND is_hidden = 0 
AND type = 80 
AND strpos(attachment.href, "youtu") >= 0 
```

但我不知道如何将所有视频从一天的开始拉到结束......

编辑：

现在我的代码中有你的答案：

```
@feed = Koala::Facebook::API.new(current_user.token)
to = Time.now.to_i
yest = 1.day.ago.to_i
@feed.fql_query("SELECT post_id, actor_id, target_id, message, likes FROM stream WHERE source_id = me() AND created_time > #{yest} AND created_time < #{to} AND type = 80 
AND strpos(attachment.href, "youtu") >= 0") 
```

并且 feed 变量返回我 # 而不是 json，我怎样才能从这个变量中获取 json？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:51:05.720

使用 FQL 可能是您最好的选择。您将需要用户的 read_stream 权限。

您可以使用[Koala gem](https://github.com/arsduo/koala)并运行以下命令：

```
require 'koala'
@graph = Koala::Facebook::API.new("YOUR_ACCESS_TOKEN")
@graph.fql_query("SELECT post_id, actor_id, target_id, message FROM stream WHERE source_id = me() AND created_time > START_TIME AND created_time < END_TIME LIMIT 10") 
```

两者都`START_TIME`应该`END_TIME`是 unix 时间戳。在您的情况下，代表一天的开始和结束。

# codeigniter - 为什么我们将 MY_Model 放在 core 文件夹中？

> ID：10018094
> 
> 赞同：2
> 
> 时间：2012-04-04T19:39:08.703
> 
> 标签：codeigniter

[在这里](http://codeigniter.tv/videos/cat/48)的视频教程中，我可以看到它`MY_Model.php`被放置在我的 CI 应用程序的核心目录中`MY_Controller.php`。

我的问题是 CI 不会从核心目录加载模型。我已经通过 CI 并发现 CI 只检查`application\models`模型的文件夹，而不是`core`文件夹（在 CI 2.1.0 Loader.php 文件的第 279 行找到）。这使得我无法`MY_Model`直接使用访问`$this->load->model('MY_Model')`，尽管我可以很好地扩展它。

这让我想知道我们为什么要放在`MY_Model.php`文件`core`夹中。任何模型都`application\models`可以直接扩展和访问，那么为什么不放在`MY_Model.php`那里呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:52:32.597

制作的原因`MY_Model.php`是扩展Core模型。它不应该使用`this->load->model('MY_Model')`. 它已经自动加载了。目的`MY_model`是为内部所有模型制作通用方法和属性，`application/models`而无需破解核心文件。如果你有扩展核心模型，你应该用扩展`MY_Model`而不是`CI_Model`.

# r - 根据 shapefile 映射原始数据和平均数据

> ID：10018095
> 
> 赞同：0
> 
> 时间：2012-04-04T19:39:10.577
> 
> 标签：r, gis

我有这样的数据集（pts）：

```
x <- seq(-124.25,length=115,by=0.5)    
y <- seq(26.25,length=46,by=0.5)
z = 1:5290

longlat <- expand.grid(x = x, y = y)  # Create an X,Y grid
pts=data.frame(longlat,z) 
names(pts) <- c( "x","y","data") 
```

我知道我可以通过以下方式将数据框（pts）映射到地图中：

```
library(sp)
library(rgdal)
library(raster)
library(maps)
coordinates(pts)=~x+y
proj4string(pts)=CRS("+init=epsg:4326") # set it to long, lat
pts = spTransform(pts,CRS(" +init=epsg:4326 +proj=longlat +ellps=WGS84 +datum=WGS84    +no_defs +towgs84=0,0,0"))
pts <- as(pts, "SpatialPixelsDataFrame")
r = raster(pts)
projection(r) = CRS(" +init=epsg:4326 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0")

plot(r)
map("usa",add=T) 
```

现在我想创建一个单独的地图，显示不同区域的 pts 均值。我要使用的 shapefile 来自[ftp://ftp.epa.gov/wed/ecoregions/cec_na/NA_CEC_Eco_Level2.zip](ftp://ftp.epa.gov/wed/ecoregions/cec_na/NA_CEC_Eco_Level2.zip)，但是，这是一张北美地图。如何根据这张北美地图创建仅显示美国的地图？还是有另一种更好的方法来做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:12:39.770

我认为仅根据 shapefile 中的数据删除非美国数据会很困难，因为这些区域不对应于政治边界——`rgeos`尽管这可以完成。

假设 "eco" 是由or`SpatialPolygonsDataFrame`读入的，请查看用于索引的可用键数据：`rgdal::readOGR``maptools::readShapeSpatial`

```
sapply(as.data.frame(eco), function(x) if(!is.numeric(x)) unique(x) else NULL) 
```

如果您只想绘制它，请设置一个只有美国地区的地图，然后再绘制。

```
library(maps)
map("usa", col = "transparent") 
```

我们看到数据在 Lambert Azimuthal Equal Area：

```
proj4string(eco)
[1] " +proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 +b=6370997 +units=m +no_defs" 
```

所以 require(rgdal) eco.laea <- spTransform(eco, CRS("+proj=longlat +ellpse=WGS84")) 图(eco.laea, add = TRUE)

如果您想在原始的 Lambert Azimuthal Equal Area 中绘图，您需要获取该投影中的边界框并基于此开始绘图，我只是使用现有数据来制作一个简单的示例。我很确定数据也可以用 rgeos 对另一个边界进行裁剪，但这取决于你真正想要的。

# regex - sed - 保持空间的行为

> ID：10018098
> 
> 赞同：1
> 
> 时间：2012-04-04T19:39:24.147
> 
> 标签：regex, sed, pattern-matching

我有（来自 sed 网站[http://sed.sourceforge.net/sed1line.txt](http://sed.sourceforge.net/sed1line.txt)）这个单行：

```
sed -e '/./{H;$!d;}' -e 'x;/AAA/!d;/BBB/!d;/CCC/!d' 
```

其目的是在段落中搜索 AAA、BBB 或 CCC。

我对剧本的理解：

*   '/./' 匹配不为空的每一行
*   '{}' 括号内的所有命令都处理匹配的行
*   'H' 用匹配的行附加保持空间
*   '$!d' 从模式空间中删除除最后一行之外的所有内容
*   'x' 交换模式和保持空间
*   '/AAA/!d' 搜索 AAA 段落并打印

我不清楚的是：

1.  在holdspace中应该有几个单独的行（对于每个段落），为什么我能够搜索整个段落？保持空间中的行是否合并为一行？
2.  sed 如何知道一个段落何时结束，而另一个段落何时开始在保持空间中？
3.  为什么我必须附加'$！d'，为什么'$ d'不够？为什么在这种情况下我不能省略 '-n' 并使用 '$p' 而不是 '$!d'？

非常感谢您的每一条评论！

我的测试数据（匹配每个段落中的 XX）：

```
YYaaaa
aaa1
aaa2
aXX3
aaa4

YYbbbb
bbb1
bbb2

YYcccc
ccc1
ccc2
ccc3
cXX4
ccc5

YYdddd
ddd1
dXX2 
```

使用以下命令：

```
sed -ne '/./{H;$!d};x;/XX/p' test2 
```

版本：

```
$ sed --version
GNU sed-Version 4.2.1
$ bash --version
GNU bash, Version 4.2.10(1)-release (x86_64-pc-linux-gnu) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:45:15.300

它将一个段落作为单独的行收集到保留空间 ( `H`) 中，然后当您点击一个空行时，`/./`它会失败并且它会落入`x`基本上会破坏下一段的保留空间的段落。

为了正确处理最后一段，它需要处理一个没有空行的段落，因此它从最后一行开始就好像它后面跟着一个空行一样。对于通过特定模式收集某些内容的脚本来说，这是一个常见的习惯用法（或者，换句话说，此类脚本无法处理文件末尾最后收集的数据是一个常见错误）。

换句话说，如果我们正在查看一个非空行，请将其添加到保留空间，除非它是文件中的最后一行，否则将其删除并从脚本的开头重新开始，并使用下一个输入行。（也许你的理解`d`不完整？这是什么`$!d`意思。）

否则，我们有一个空行或文件结尾，并且保留空间包含零行或多行文本（一个段落，可能为空）。将它们交换到模式空间（当前空行方便地移动到保持空间）并检查模式空间。如果它无法匹配我们的表达式之一，请将其删除。否则，默认操作是打印整个模式空间。

# api - 通过 RESTful API 中的 ID 或 slug 识别项目

> ID：10018100
> 
> 赞同：33
> 
> 时间：2012-04-04T19:39:27.933
> 
> 标签：api, rest, api-design

我目前正在设计一个 API，但遇到了一个小问题： **当您应该能够通过 ID 或 slug 识别项目时，RESTful API 的 URL 应该是什么样子？**

我可以想到三个选项：

```
GET /items/<id>
GET /items/<slug> 
```

这就要求slug和ID是可区分的，本例中不一定给出。我想不出一个干净的解决方案来解决这个问题，除非你这样做：

```
GET /items/id/<id>
GET /items/slug/<slug> 
```

这可以正常工作，但是这不是我想通过 slug 或 ID 识别项目的唯一地方，当一个人想要为其他操作实施相同的方法时，它很快就会变得非常难看。它只是不是很可扩展，这导致我们采用这种方法：

```
GET /items?id=<id>
GET /items?slug=<slug> 
```

这似乎是一个很好的解决方案，但我不知道这是否是人们所期望的，因此可能会由于使用不当而导致令人沮丧的错误。此外，为这个实现路由也不是那么容易 - 或者说干净 - 实现路由。但是，它很容易扩展，并且看起来与**获取多个项目的方法**非常相似：

```
GET /items?ids=<id:1>,<id:2>,<id:3>
GET /items?slugs=<slug:1>,<slug:2>,<slug:3> 
```

但这也有一个缺点：如果有人想用 ID 识别他想获取的一些项目，而用 slug 识别其他项目怎么办？混合这些标识符并不容易实现。

**这些问题**的最佳和最广泛接受的解决方案是什么？一般来说，在设计这样的 API 时，什么是重要的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T19:55:29.240

在这三个选项中，我更喜欢第三种选项，这种语法并不少见。例如 Twitter 的部分 API 允许使用这种语法： [https ://dev.twitter.com/rest/reference/get/statuses/show/id](https://dev.twitter.com/rest/reference/get/statuses/show/id)

第四个选项是混合方法，您可以选择一个（例如 ID）作为单个项目的典型访问方法，但也允许基于 slug 的查询。例如：

```
GET /items/<id>
GET /items?slug=<slug>
GET /items?id=<id> 
```

您的路由将明显地将 /items/id 映射到 /items?id=

可扩展到多个 ids/slugs，但仍符合将 URI 与底层数据模型匹配的 REST 范式。

# google-chrome - 如何从谷歌浏览器扩展中的弹出窗口访问内容

> ID：10018108
> 
> 赞同：1
> 
> 时间：2012-04-04T19:39:50.200
> 
> 标签：google-chrome, google-chrome-extension

我正在谷歌浏览器中开发一个简单的页面操作扩展，它具有以下目的。

1.  单击时显示弹出窗口并提示输入用户名和密码。
2.  经过一个小的验证后，它应该填写网站的用户名和密码，例如 gmail.com。

我看到了几个关于如何在窗口加载时执行此操作的示例，并且我能够单独执行弹出窗口。但我无法从弹出窗口的 html 访问父 html。

任何帮助将不胜感激。

这是我的代码的内容。

清单.json：

```
{
  "name": "My First Chrome App",
  "version": "1.0",
  "description": "Auto fill content",
  "background": { "scripts": ["background.js"] },
  "page_action" :
  {
    "default_icon" : "icon-19.png",
    "default_title" : "Auto Fill",
    "default_popup" : "test.html"   
  },
  "permissions" : [
  "tabs"
  ],
  "icons" : {
    "48" : "icon-48.png",
    "128" : "icon-128.png"
  },
  "manifest_version": 2 
} 
```

背景.js

```
function checkForValidUrl(tabId, changeInfo, tab) {
  //checks whether the document contains Steve Jobs
  if (tab.url.indexOf("gmail")) {
    chrome.pageAction.show(tabId);
  }
};
chrome.tabs.onUpdated.addListener(checkForValidUrl); 
```

测试.html

```
<html>
<head>
    <title> Hi Steve </title>
    <script type="text/javascript">
        function fill()
        {
            alert("inside method");         
        }
    </script>
</head>
<body>
    <form name="userinfo" id="userinfo">
        username : 
        <input type="text" name="username"/>
        password :
        <input type="password" name="password"/>
        <input type="button" value="Log In" onclick="fill()";/>
    </form>
</body>
</html> 
```

谢谢，尚卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:18:59.347

为您的登录创建一个弹出窗口，其中包含用户名和密码字段。

[http://code.google.com/chrome/extensions/browserAction.html#popups](http://code.google.com/chrome/extensions/browserAction.html#popups)

提交弹出表单后，向后台页面发送一条消息，然后后台页面向您的（页面的）内容脚本发送一条消息，然后该脚本负责填写和提交表单。

[http://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

您需要了解消息传递才能执行此操作：

[http://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)

# objective-c - 如何加快 iOS 过渡和转场？

> ID：10018116
> 
> 赞同：1
> 
> 时间：2012-04-04T19:40:18.017
> 
> 标签：objective-c, ios, core-animation

是否可以在应用程序范围内设置属性以使 iOS 应用程序内的转换速度加倍？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T20:36:17.513

应用范围？

尝试在支持层上为视图控制器的内容视图设置速度属性。speed=2 将是双速。您可能可以在所有视图控制器的 viewDidLoad 方法中设置它。

您也许还可以创建 UIWindow 的自定义子类，并让该窗口对象在 makeKeyWindow 之类的瓶颈方法中将其视图层上的速度属性设置为 2.0。您需要让所有应用程序的 UIWindow 对象都使用您的自定义类。我必须做一些挖掘才能弄清楚如何做到这一点。

＃＃编辑：

或者，更好的主意是`self.window.layer.speed = 2.0`在创建窗口后在您的应用程序委托中设置，如@Costique 在下面的评论中所建议的那样。

请注意，这种方法将加速所有动画，而不仅仅是过渡和转场。如果您只想加快转场速度，则必须弄清楚如何仅针对这些动画。我不得不考虑一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T21:04:26.047

Apple 没有简单的方法来改变这一点，因为它会使不同应用程序之间的转换过于异构。您可以将图层的速度加倍，但这会打乱其余动画的时间。最好的方法是使用 UIViewControler 上的类别来实现您自己的转换。

**UIViewController+ShowModalFromView.h**

```
#import <Foundation/Foundation.h>
#import <QuartzCore/QuartzCore.h>

@interface UIViewController (ShowModalFromView)
- (void)presentModalViewController:(UIViewController *)modalViewController fromView:(UIView *)view;
@end 
```

**UIViewController+ShowModalFromView.m**

```
#import "UIViewController+ShowModalFromView.h"

@implementation UIViewController (ShowModalFromView)

- (void)presentModalViewController:(UIViewController *)modalViewController fromView:(UIView *)view {
    modalViewController.modalPresentationStyle = UIModalPresentationFormSheet;

// Add the modal viewController but don't animate it. We will handle the animation manually
[self presentModalViewController:modalViewController animated:NO];

// Remove the shadow. It causes weird artifacts while animating the view.
CGColorRef originalShadowColor = modalViewController.view.superview.layer.shadowColor;
modalViewController.view.superview.layer.shadowColor = [[UIColor clearColor] CGColor];

// Save the original size of the viewController's view    
CGRect originalFrame = modalViewController.view.superview.frame;

// Set the frame to the one of the view we want to animate from
modalViewController.view.superview.frame = view.frame;

// Begin animation
[UIView animateWithDuration:1.0f
                 animations:^{
                     // Set the original frame back
                     modalViewController.view.superview.frame = originalFrame;
                 }
                 completion:^(BOOL finished) {
                     // Set the original shadow color back after the animation has finished
                     modalViewController.view.superview.layer.shadowColor = originalShadowColor;
                 }];
}

@end 
```

这可以很容易地更改为使用您想要的任何动画过渡。希望这可以帮助！

# arrays - 如何在 Ada 的多维数组上使用“最后一个属性”？

> ID：10018121
> 
> 赞同：1
> 
> 时间：2012-04-04T19:40:34.223
> 
> 标签：arrays, multidimensional-array, ada

我试图`'Last`在 Ada 中将属性与 2D 数组一起使用，但我似乎找不到这样做的正确语法。

我知道如果我有一个一维数组/向量，我可以使用 A'last 或 A'last(n) 其中 n 是第 n 维。但是，如果我执行以下操作

```
type UnconstrainedArray_2D is array (Integer range <>, Integer range <>) of Integer;

function temp(tempIn : in Integer;
              Table  : in UnconstrainedArray_2D) return Integer is
tempTable : UnconstrainedArray_2D(0..tempIn, 0..tempIn);

begin
    for i in 0..tempTable'last(1) loop
        for j in 0..tempTable'last(2) loop
            tempTable(i, j) := Table(i,j);
        end loop;
    end loop;
end temp; 
```

我收到以下编译时错误：

> Storage_Error 堆栈溢出（或错误的内存访问）

那么我做错了什么？

我在 Linux 上使用 GNAT Pro 6.4.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:44:26.783

如果您对该代码有*编译时间* ，我会感到非常惊讶。`Storage_Error`

我已经获取了您的代码副本并对其进行了如下修改；它使用 GNAT (gcc-4.4) 编译没有错误：

```
procedure Array_2D is
    type UnconstrainedArray_2D is array (Integer range <>, Integer range <>) of Integer;

    function temp(tempIn : in Integer;
                  Table  : in UnconstrainedArray_2D) return Integer is
    tempTable : UnconstrainedArray_2D(0..tempIn, 0..tempIn);

    begin
        for i in 0..tempTable'last(1) loop
            for j in 0..tempTable'last(2) loop
                tempTable(i, j) := Table(i,j);
            end loop;
        end loop;
        return 42; -- added this
    end temp;
begin
    null;
end Array_2D; 
```

（请注意，我必须在 中添加缺少的`return`语句`temp`。）

您的属性语法`'Last`（不是“命令”）是正确的，但由于 Ada 数组可以有任意的下限和上限，因此最好使用该`'Range`属性：

```
 for i in tempTable'Range(1) loop
        for j in tempTable'Range(2) loop
            tempTable(i, j) := Table(i,j);
        end loop;
    end loop; 
```

至于`Storage_Error`异常，*如果*您调用`temp`具有非常大的`tempIn`. 请记住，它必须分配足够的空间来容纳`tempIn**2` `Integer`对象。大概您还创建了另一个`UnconstrainedArray_2D`要作为`Table`参数传入的对象。

可以想象，编译器本身可能会因`Storage_Error`异常而死，但我在您的代码中看不到任何可能导致这种情况的东西。

向我们展示一个完整的（但很小的）程序来演示您遇到的问题，以及确切的（复制和粘贴的）错误消息。请清楚地区分编译时错误和运行时错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T06:33:44.550

你`tempTable`可能有一个范围`0..tempIn`，但你不知道你`Table`有什么范围..它们也可能有不同的长度。

您必须检查长度是否相同，然后使用相对索引，如下所示：

```
function temp(tempIn : in Integer;
              Table  : in UnconstrainedArray_2D) return Integer is
    tempTable : UnconstrainedArray_2D(0..tempIn, 0..tempIn);

begin
    if tempTable'Length (1) /= Table'Length (1) or else
      tempTable'Length (2) /= Table'Length (2)
    then
       raise Constraint_Error; -- or something else
    end if;
    for i in 0 .. tempTable'Length (1) - 1 loop
        for j in 0 .. tempTable'Length (2) - 1 loop
            tempTable(tempTable'First (1) + i, tempTable'First (2) + j) :=
              Table(Table'First (1) + i, Table'First (2) + j);
        end loop;
    end loop;
end temp; 
```

这样可以确保两个表的长度相同并且所有索引都有效。

如果`tempTable`允许小于`Table`，只需将长度检查调整为`>`。指数仍然有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:17:26.520

我没有看到**tempIn**集的实际值。如果**tempIn**进入函数 temp 的值没有正确初始化或显式设置，则**tempIn**中的值可以是任何值，也可能不是您想要的值。

* * *

我在考虑一个默认值。（当我感觉不舒服时可能不应该发帖:-)

# c++ - GTK 3 透明标签，文本放置在图像上

> ID：10018123
> 
> 赞同：0
> 
> 时间：2012-04-04T19:40:38.657
> 
> 标签：c++, gtk, gtkmm, gtk3

我需要创建带有图像和放置在图像上的透明标签（较暗）的 GTK GUI。第一个问题是重叠的。我尝试了 Gtk::Table 和 Gtk::Fixed 容器，但它的行为很奇怪。第二个问题是透明度。我想使用 CSS 样式或透明背景图片。有没有人可以帮助我发布一些资源或示例？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:13:53.260

也许你可以看看 clutter-gtk ？你可以用它做一些[好事](http://www.youtube.com/watch?v=IeV4EOee3CI)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:39:10.370

您可以继承**GtkWidget**或**GtkDrawingArea** ，因为我认为它会比替代方案更快。但是你可以使用**GtkOverlay**，加上**GtkImage**和**GtkLabel**来完成你正在寻找的东西。 **Gtk+-3.0 自带的gtk3-demo** app 给出了一些如何使用**GtkOverlay**的例子。

# core-plot - 多个条形图图例

> ID：10018124
> 
> 赞同：1
> 
> 时间：2012-04-04T19:40:43.350
> 
> 标签：core-plot

我有一个带有 2 个条形图的图表（示例：A 和 B）。

每小时我有 2 个条形图。

当我设置图例时，我会得到每小时的样本和文本以及条形图。

示例：在我的图表中有 4 小时，那么我的图例将是这样的

AAAA

BBBB

而我只想要

AB

因为每个小时，酒吧的意思都是一样的。我怎样才能做到这一点 ？？

我已经尝试了一切来实现这一点，但直到现在都没有成功......

贝娄是我的

```
// CPTLegend *theLegend = [CPTLegend legendWithGraph:barChart];
CPTLegend *theLegend = [CPTLegend legendWithPlots:[NSArray arrayWithObjects:[barChart plotAtIndex:0],[barChart plotAtIndex:1], nil]];
theLegend.numberOfRows    = 1;
theLegend.numberOfColumns = 2;//[horas count] +1 / 2;
//theLegend.fill  = [CPTFill fillWithColor:[CPTColor colorWithGenericGray:0.15]];

//theLegend.borderLineStyle = barLineStyle;
theLegend.cornerRadius    = 10.0;
theLegend.swatchSize      = CGSizeMake(15, 15);
//whiteTextStyle.fontSize     = 16.0;
//theLegend.textStyle         = whiteTextStyle;
theLegend.rowMargin       = 10.0;
theLegend.paddingLeft     = 12.0;
theLegend.paddingTop      = 12.0;
theLegend.paddingRight    = 12.0;
theLegend.paddingBottom   = 12.0;

//theLegend.equalColumns = YES;
//theLegend.equalRows = YES;
theLegend.delegate = self;

barChart.legend = theLegend; 
```

-（NSString *）legendTitleForBarPlot：（CPTBarPlot *）barPlot 记录索引：（NSUInteger）索引{

```
if ( [barPlot.identifier isEqual:@"Embarque"] ) {
    if (index == 0) 
    {
        return @"Embarque";
    }else {
        return @"";
    } 
}else {
    if (index == 0) 
    {
        return @"Desembarque";
    }else {
        return @"";
    }
} 
```

} -(BOOL)legend:(CPTLegend *)legend shouldDrawSwatchAtIndex:(NSUInteger)index forPlot:(CPTPlot *)plot inRect:(CGRect)rect inContext:(CGContextRef)context{

```
if (index == 0) {
    return YES;
}else{
    return NO;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:27:51.760

不要实现该`-legendTitleForBarPlot:recordIndex:`方法，除非您想要为每个条形图单独的标签。使用该`title`属性为绘图设置单个图例标题。

`-legend:shouldDrawSwatchAtIndex:forPlot:inRect:inContext:`仅当您想以某种方式更改默认样本图时才需要该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:16:05.883

-（无效）exibirGraficoEmbarqueDescarga {

```
// Create barChart from theme
barChart = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
CPTTheme *theme = [CPTTheme themeNamed:kCPTPlainWhiteTheme];
[barChart applyTheme:theme];
//CPTGraphHostingView *hostingView = (CPTGraphHostingView *)self.view;
//hostingView.hostedGraph = barChart;

barChart.delegate = self;

if (chartView == nil)
{
    chartView = [[CPTGraphHostingView alloc] initWithFrame:CGRectMake(-15, 30, 350, 320)];
   // chartView = [[CPTGraphHostingView alloc] initWithFrame:CGRectMake(0, 35, 510, 280)];
    [self.view addSubview:chartView];  

} 

chartView.hostedGraph = barChart;

// Border
barChart.plotAreaFrame.borderLineStyle = nil;
barChart.plotAreaFrame.cornerRadius    = 0.0f;

// Paddings
barChart.paddingLeft   = 0.0f;
barChart.paddingRight  = 0.0f;
barChart.paddingTop    = 0.0f;
barChart.paddingBottom = 0.0f;

barChart.plotAreaFrame.paddingLeft   = 70.0;
barChart.plotAreaFrame.paddingTop    = 20.0;
barChart.plotAreaFrame.paddingRight  = 20.0;
barChart.plotAreaFrame.paddingBottom = 80.0;

// Graph title
barChart.title = @"Embarque / Descarga";
CPTMutableTextStyle *textStyle = [CPTTextStyle textStyle];
textStyle.color                   = [CPTColor grayColor];
textStyle.fontSize                = 16.0f;
textStyle.textAlignment           = CPTTextAlignmentCenter;
barChart.titleTextStyle           = textStyle;
barChart.titleDisplacement        = CGPointMake(1.0f, -20.0f);
barChart.titlePlotAreaFrameAnchor = CPTRectAnchorTop;

// Add plot space for horizontal bar charts

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)barChart.defaultPlotSpace;
Apoio *apoio = [[Apoio alloc] init];

plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat([apoio retornaMaiorDadosGrafico:qtdEmb :qtdDesc])];
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(16.0f)];

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)barChart.axisSet;
CPTXYAxis *x          = axisSet.xAxis;

CPTMutableLineStyle *marcacaoLineStyle = [CPTLineStyle lineStyle];
marcacaoLineStyle.lineColor = [CPTColor lightGrayColor];
marcacaoLineStyle.lineWidth = 1;

x.axisLineStyle               = marcacaoLineStyle;
x.majorTickLineStyle          = marcacaoLineStyle;
x.minorTickLineStyle          = marcacaoLineStyle;
x.majorIntervalLength         = CPTDecimalFromString(@"5");
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
//x.title                         = @"Horas";
//x.titleLocation                 = CPTDecimalFromFloat(15.0f);
//x.titleOffset               = 55.0f;

// Define some custom labels for the data elements
x.labelingPolicy = CPTAxisLabelingPolicyNone;
NSArray *customTickLocations = posicao;//[NSArray arrayWithObjects:[NSDecimalNumber numberWithFloat:0.7], [NSDecimalNumber numberWithFloat:2.7], [NSDecimalNumber numberWithFloat:4.7], nil];
NSArray *xAxisLabels         = horas;//[NSArray arrayWithObjects:@"10", @"11", @"12", nil];
NSUInteger labelLocation     = 0;
NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[xAxisLabels count]];
for ( NSNumber *tickLocation in customTickLocations ) {
    CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:[xAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
    newLabel.tickLocation = [tickLocation decimalValue];
    newLabel.offset       = x.labelOffset; //+ x.majorTickLength;
    [customLabels addObject:newLabel];
}

x.axisLabels = [NSSet setWithArray:customLabels];

CPTXYAxis *y = axisSet.yAxis;
y.axisLineStyle               = marcacaoLineStyle;
y.majorTickLineStyle          = marcacaoLineStyle;
y.minorTickLineStyle          = marcacaoLineStyle;
y.majorIntervalLength         = CPTDecimalFromInt([apoio retornaMaiorDadosGrafico:qtdEmb :qtdDesc]/7); //CPTDecimalFromString(@"5");
y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
y.title = @"Containers";
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init]; 
[formatter setMaximumFractionDigits:0];  
y.labelFormatter = formatter; 

CPTMutableLineStyle *majorGridLineStyle = [CPTMutableLineStyle lineStyle];
majorGridLineStyle.lineWidth = 0.75;
majorGridLineStyle.lineColor = [CPTColor lightGrayColor ];

y.majorGridLineStyle = majorGridLineStyle  ;
y.preferredNumberOfMajorTicks = 10;

CPTMutableTextStyle *EixostextStyle = [CPTTextStyle textStyle];
EixostextStyle.fontSize               = 12.0f;

y.labelTextStyle = EixostextStyle;
x.labelTextStyle = EixostextStyle;

// Embaque
CPTBarPlot *barPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor darkGrayColor] horizontalBars:NO];
barPlot.baseValue  = CPTDecimalFromString(@"0");
barPlot.dataSource = self;
barPlot.delegate = self;
barPlot.barOffset  = CPTDecimalFromFloat(0.25f);
barPlot.identifier = @"Embarque";
barPlot.title = @"Embarque";
barPlot.labelOffset = 0;
[barChart addPlot:barPlot toPlotSpace:plotSpace];

//Descarga
CPTBarPlot *barPlot2 = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
barPlot2.baseValue  = CPTDecimalFromString(@"0");
barPlot2.dataSource = self;
barPlot2.delegate = self;
//barPlot2.barOffset  = CPTDecimalFromFloat(25f);
barPlot2.identifier     = @"Descarga";
barPlot2.title = @"Descarga";
barPlot2.labelOffset = 0;
[barChart addPlot:barPlot2 toPlotSpace:plotSpace];

CPTLegend *theLegend = [CPTLegend legendWithGraph:barChart];
theLegend.numberOfRows    = 1;
theLegend.numberOfColumns = 2;
theLegend.cornerRadius    = 10.0;
theLegend.swatchSize      = CGSizeMake(15, 15);
//whiteTextStyle.fontSize     = 16.0;
//theLegend.textStyle         = whiteTextStyle;
theLegend.rowMargin       = 10.0;
theLegend.paddingLeft     = 12.0;
theLegend.paddingTop      = 12.0;
theLegend.paddingRight    = 12.0;
theLegend.paddingBottom   = 12.0;

//theLegend.equalColumns = YES;
//theLegend.equalRows = YES;
 barChart.legend = theLegend; 
```

}

```
-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot{
return [horas count];}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
```

{ NSDecimalNumber *num = nil;

```
if ( [plot isKindOfClass:[CPTBarPlot class]] ) {
    switch ( fieldEnum ) {
        case CPTBarPlotFieldBarLocation:                
            if ( [plot.identifier isEqual:@"Embarque"] ) {
                num = (NSDecimalNumber *)[NSDecimalNumber numberWithUnsignedInteger:index*2];
            } else{
                num = (NSDecimalNumber *)[NSDecimalNumber numberWithUnsignedInteger:(index*2+1)];
            }
            break;                
        case CPTBarPlotFieldBarTip:
            if ( [plot.identifier isEqual:@"Embarque"] ) {
                num = [qtdEmb objectAtIndex:index];
            } else{
                num = [qtdDesc objectAtIndex:index];
            }                
            break;                      
    }
}

return num; 
```

}

```
-(CPTFill *)barFillForBarPlot:(CPTBarPlot *)barPlot recordIndex:(NSUInteger)index 
```

{ if ( [barPlot.identifier isEqual:@"Embarque"] ) { return [CPTFill fillWithColor:[CPTColor colorWithComponentRed:(175/255.0) green:(238/255.0) blue:(238/255.0) alpha:1.0]]; }

```
if ( [barPlot.identifier isEqual:@"Descarga"] ) {
    return [CPTFill fillWithColor:[CPTColor colorWithComponentRed:(255./255.0 )  green:(228.0/255.0) blue:(181.0/255.0)  alpha:1.0]]; 
} 
```

}

```
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index 
{
int  valor; 
if ( [plot.identifier isEqual:@"Embarque"] ) 
{
    valor = [qtdEmb objectAtIndex:index];
}else{
    valor =  [qtdDesc objectAtIndex:index];
}

CPTTextLayer *newLayer = [[CPTTextLayer alloc] initWithText:[[NSString alloc] initWithFormat:@"%@",valor]];  
CPTMutableTextStyle *estiloTexto = [[CPTMutableTextStyle alloc] init];
estiloTexto.color = [CPTColor blackColor];
estiloTexto.fontSize = 10;    

newLayer.textStyle = estiloTexto;
return newLayer; 
```

}

# spring - 在 Spring MVC 中使用 ApplicationContext。

> ID：10018127
> 
> 赞同：4
> 
> 时间：2012-04-04T19:41:04.350
> 
> 标签：spring, spring-mvc, applicationcontext

我有一个 spring.xml 文件，其中列出了所有 bean 定义，其中我列出了使用 beans、指定 messageSource、dataSource 等的所有依赖项。此外，我还有一个类 ApplicationContext 类，我在其中使用上下文获取所有 beans。代码是::

```
package models;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class ApplicationContextClass {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        AbstractApplicationContext context = new ClassPathXmlApplicationContext("Spring.xml");
        context.registerShutdownHook();
        ATTModel attmodel = (ATTModel) context.getBean("att");
        //ProjectModel project = (ProjectModel)context.getBean("project");
        //project.call1();
        attmodel.call();
        System.out.println(context.getMessage("insertiondone",null, "Default greeting",null));

    }

} 
```

我有一个应用程序上下文用于访问 JDBC 模板相关 bean 的 Dao 类。我现在必须使用 Spring MVC 开发一个 Web 应用程序，并且我需要使用这个 applicationContext。我如何在 SpringMVC 中使用这些 applicationContext 类。我知道我需要使用 applicationcontextlisteners 但在哪里写呢？谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:09:04.883

你有两种方法。在 web.xml 中定义这个。

```
<servlet>
    <servlet-name>yourapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet> 
```

并在您的 WEB-INF 文件夹中添加 yourapp-servlet.xml 以及您的 bean 和 mvc 配置。

另一种方式是。在 web.xml 中定义这个。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml
    </param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

并在您的 WEB-INF 中添加 applicationContext.xml 和您的 bean。

您还可以结合使用这些方法。

# .net - 我如何根据一段时间内在 Twitter 上的使用频率对术语进行排名？

> ID：10018131
> 
> 赞同：-4
> 
> 时间：2012-04-04T19:41:15.567
> 
> 标签：.net, web-services, twitter

我正在尝试创建一个从 Twitter 收集数据的应用程序：我想获取一个单词列表并确定它们在给定时间范围内出现的频率。

我应该如何去完成这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:41:16.317

对于 Twitter 直接支持的产品，您没有太多选择。

您可以使用[Twitter 搜索 API](https://dev.twitter.com/docs/api/1/get/search)，但[它有以下限制](https://dev.twitter.com/docs/using-search)：

> *   当前索引包括六九天的推文。
> *   你不能使用搜索 API 来查找大约一周前的推文。

也就是说，如果您可以在此范围内搜索推文，那么您可以使用有限数量的参数来按时间过滤推文：

*   `until`- 将在特定日期返回推文
*   `since_id`- 为您提供自某个推文 ID 以来发生的推文
*   `max_id`- 为您提供最多特定推文 ID 的推文

因为推文 ID 是按升序增加的，所以最好尝试使用推文的 ID 来划分您要搜索的范围。

请注意，对于关键字，您将使用`q`参数。

另请注意，您必须通过使用`page`和`rpp`（每页结果）参数对结果进行分页。

您也可以使用第三方服务来存档推文，但这里的风险是，只要您需要，这些服务可能就不会存在。

如果您有能力，我建议您使用[Streaming API](https://dev.twitter.com/docs/streaming-api)将大量推文提供给您的应用程序，然后将其存储以供将来处理。

基本上，您与 Twitter 建立并保持开放连接，然后 Twitter 会向您提供推文。请注意，此 Feed 是受速率限制和质量控制的。但是，从您在应用程序中打开开关的那一刻起，它是一种将您想要的数据保留多久的好方法。

一旦你弄清楚了*如何*获得结果，获得频率就很容易了。假设您要存储结果，我建议使用[面向文档的数据库](http://en.wikipedia.org/wiki/Document-oriented_database)（例如[elasticsearch](http://ravendb.net/)或[RavenDB](http://www.elasticsearch.org/)）；它们更适合处理返回[推文实体](https://dev.twitter.com/docs/tweet-entities)的 JSON 格式，并为您提供更好的机制，以便将来查询和操作该数据。

在上述两种解决方案中，您都可以获得项目总数的计数以及适合某个搜索词的项目数（如果需要，您还可以过滤 JSON 文档的属性）。

如果您想获得[词频/逆文档频率](http://en.wikipedia.org/wiki/Tf%2aidf)，那么我相信弹性搜索将允许您直接访问索引的这些统计信息（不确定 RavenDB），或者如果您愿意，您可以使用[Lucene.NET](http://incubator.apache.org/lucene.net/)自己构建一个文档存储获得真正的准系统（实施起来需要更多的工作，但您更接近您想要获得的统计数据）。

# android - 您如何使 com.actionbarsherlock 位于 Android 项目的 gen 文件夹中？

> ID：10018132
> 
> 赞同：0
> 
> 时间：2012-04-04T19:41:16.500
> 
> 标签：android, eclipse, build, actionbarsherlock, r.java-file

我正在尝试构建和运行 ActionBarSherlock 附带的演示。我从现有源转到 File -> New Android project，然后导航到 samples/demos 目录。该项目被导入到 Eclipse 中，但是，没有任何 R. 引用被解析，因为 com.actionbarsherlock 没有出现在 gen 文件夹中。

*正在*引用actionbarsherlock 库（属性 -> Android -> 库）。actionbarsherlock.jar*位于*Android Dependencies 文件夹中。

谢谢您的帮助。

编辑：只是在另一个 Eclipse 项目中引用该库会导致 com.actionbarsherlock 正确生成。我不知道为什么这个演示项目中的相同行为没有生成 com.actionbarsherlock.R。

编辑2：现在它神奇地决定起作用。我没有做任何特别的事情，只是不断地引用和不引用库，直到它工作为止。

**感谢大家查看，问题已解决**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:48:51.323

gen 文件夹（和 R.java）是在编译期间生成的。尝试进行清理和构建以查看是否创建了 R 和 gen/。

如果他们不这样做，则编译失败。如果 Eclipse 中有*任何*与缺少 R.java 无关的错误，请修复它们或将它们作为评论发布以获取更多信息。

这可能是`import my.project.R`每个 java 文件顶部的语句的问题，但检查错误将确认或否认这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:44:20.573

在您尝试运行应用程序之前，我认为不会创建 gen 文件夹。

如果这不是问题，您可以尝试修复项目属性。`Right click on the project --> Android Tools --> Fix Project Properties`

# ios - iOS 5 启动页面过渡

> ID：10018133
> 
> 赞同：1
> 
> 时间：2012-04-04T19:41:18.250
> 
> 标签：ios, splash-screen, transitions

我的客户希望他的初始图像淡出然后显示 UI。我不知道该怎么做。截至目前，它只会在加载后出现。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:54:43.567

```
UIImageView *splash=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"splash"]];
[UIView animateWithDuration:1
                 animations:^{
                     splash.alpha = 0.0;
                 }
                 completion:^(BOOL finished)
 {
     [splash release];
 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:49:44.080

正如我刚刚在一个[密切相关的问题](https://stackoverflow.com/questions/10007835/ios-duration-of-splash-screen-default-png/10008001)上解释的那样，不要使用闪屏！请将此与您的客户联系起来，他们可能不熟悉人机界面指南。

也就是说，如果您无法说服您的客户，您可以淡出我在其他回复中提到的 UIImageView。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T19:57:37.150

您可以实现自己`UIViewController`的闪屏：

```
@interface SplashScreenViewController : UIViewController {
    UIImageView *splashView;
}

@end 
```

//

```
#import "SplashScreenViewController.h"

@implementation SplashScreenViewController

#pragma mark - View lifecycle

- (void)loadView {
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];

    splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    [splashView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
    [self.view addSubview:splashView];
}
- (void)viewWillAppear:(BOOL)animated {
    if (isIPad) {
        if (UIInterfaceOrientationIsPortrait([[UIApplication sharedApplication] statusBarOrientation]))
            splashView.image = [UIImage imageNamed:@"Default-Portrait~ipad.png"];
        else
            splashView.image = [UIImage imageNamed:@"Default-Landscape~ipad.png"];
    }
    else
        splashView.image = [UIImage imageNamed:@"Default.png"];
}
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    if (isIPad) {
        if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation))
            splashView.image = [UIImage imageNamed:@"Default-Portrait~ipad.png"];
        else
            splashView.image = [UIImage imageNamed:@"Default-Landscape~ipad.png"];
    }
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (isIPad ? YES : UIInterfaceOrientationIsPortrait(interfaceOrientation));
}

@end 
```

`UIViewController`然后，在显示之后，您可以使用任何您想要的过渡来隐藏它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T19:47:26.313

我正在查看本教程，但决定不实施它，所以我不能保证它是否有效，但一切看起来都在检查

[http://www.dobervich.com/2010/10/22/fade-out-default-ipad-app-image-with-proper-orientation/](http://www.dobervich.com/2010/10/22/fade-out-default-ipad-app-image-with-proper-orientation/)

请注意，尽管为您的应用程序启动添加太多内容是应用程序拒绝的理由。

> 避免显示关于窗口或闪屏。一般来说，尽量避免提供任何类型的启动体验，阻止人们立即使用您的应用程序。

资料来源：[苹果开发者网站](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html)

# objective-c - 将 180K 记录带入应用程序的最佳方法：核心数据：是吗？csv vs xml？

> ID：10018134
> 
> 赞同：0
> 
> 时间：2012-04-04T19:41:24.733
> 
> 标签：objective-c, ios

我用少量的测试数据（线索和答案）构建了一个运行良好的应用程序。现在我需要考虑引入一整套线索和答案，大约有 18 万条记录（这是一个文字游戏）。我当然担心速度和内存使用情况。环顾 intertubes 和我的图书馆，我得出的结论是，这可能是核心数据的工作。然而，在这种方法中，我想我可以将它作为 csv 或 xml 引入（我可以使用脚本语言从原始数据创建任何一个）。我找到了一些关于如何处理每种情况的资源。我不知道在使用 csv 与 xml 时可能会遇到的总体速度和其他问题。csv 文件大小约为 3.6 Mb，数据类型为字符串。

我知道这很接近一个非问题，但我需要一些建议，因为这两种方法都需要大量的编码承诺。所以这里有问题：

1.  对于这种大小和特征的文件，人们会期望 csv 或 xml 是一种更好的方法吗？是否有其他一些更有意义的格式/协议/策略？
2.  我专注于核心数据是否正确？

也许我应该在这里扔一些假代码，这样系统就不会一直警告我提出主观问题。但我必须尝试！感谢您的任何指导。链接到讨论表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:50:46.213

至于文件大小，与 xml 文件相比，CSV 总是更小，因为它只包含 ascii 格式的原始数据。考虑以下 3 行和 3 列。

第 1 列、第 2 列、第 3 列

1、2、3

4、5、6

7、8、9

与它的 XML 对应部分相比，它甚至不包含模式信息。它也是 ascii 格式，但 rowX 和 ColumnX 必须在整个文件中重复多次。压缩当然可以帮助解决这个问题，但我猜即使压缩，CSV 仍然会更小。

```
<root>
    <row1>
        <Column1>1</Column1>
        <Column2>2</Column2>
        <Column3>3</Column3>
    </row1>
    <row2>
        <Column1>4</Column1>
        <Column2>5</Column2>
        <Column3>6</Column3>
    </row2>
    <row3>
        <Column1>7</Column1>
        <Column2>8</Column2>
        <Column3>9</Column3>
    </row3>
</root> 
```

至于您的其他问题，对不起，我无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:32:33.563

这足够大，以至于 i/o 时间差异会很明显，以及 CSV 在哪里 - 什么？小 10 倍？与读取它的差异相比，处理时间差异（以更快者为准）可以忽略不计。而且 CSV 应该更快，在 I/O 之外也是如此。

是否使用核心数据取决于您希望利用核心数据的哪些特性。我猜唯一的一个是查询，这可能是值得的，尽管如果它只是从线索到答案的简单映射，您可能只想将整个内容从 CSV 文件读入 NSMutableDictionary。访问会更快。

# java - Android 应用程序在尝试获取字符串长度时崩溃

> ID：10018141
> 
> 赞同：-4
> 
> 时间：2012-04-04T19:41:54.177
> 
> 标签：java, android, string

那些发明 Android 和 Java 的人并不是为自己发明的。自从我开始在 Android 中使用 Java 开发应用程序以来，我遇到了最荒谬的错误，我真的要发疯了（如果我这样做了，Google 和 Sun Microsystems 会发出“booooom”）

我有这个简单的代码，它应该获取作为参数传递的字符串的长度。该应用程序崩溃了，让我花了几分钟咒骂和折磨键盘。

我的代码：

```
@Override
protected void onPostExecute(String result) {
    if (result.length() == 0) {
        txtStatus.setText("Ready");
    }
} 
```

如果我删除它的工作条件（文本“就绪”显示在我的 TextView 上）。这很奇怪，我知道我可能会遗漏一些小东西。

给我一些线索，谢谢你所做的一切！

*PS如果你听到邻居的枪声，那可能是我。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:43:55.873

这是因为您的字符串可能是*null*。像这样做：

```
@Override
protected void onPostExecute(String result) {
    if (!TextUtils.isEmpty(result)) {
        txtStatus.setText("Ready");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:44:42.210

试试这个：

```
@Override
protected void onPostExecute(String result) {
    if (result != null && result.length() == 0) {
        txtStatus.setText("Ready");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:51:37.657

首先检查结果是否为空，适当处理，然后检查它的长度。我最好的猜测是你有一个未处理的 NullPointerException。

```
@Override
protected void onPostExecute(String result) {
    if (result == null) {
        result = ""; // change this line if null is an error.
    }
    if (result.length() == 0) {
        txtStatus.setText("Ready");
    }
} 
```

找出问题所在并使程序崩溃的一种调试技术是将条件包装在 try/catch 块中。

```
 @Override
protected void onPostExecute(String result) {
    try {
        if (result.length() == 0) {
            txtStatus.setText("Ready");
        }
    catch (Throwable t) { // both error and exception inherit from Throwable.
        // print or inspect 't' here to determine the reason for the crash.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:06:41.153

正如 Waqas 所说，问题是因为您的字符串可能为空。如果字符串为空，则未定义方法长度。因此添加一个额外的条件检查空，即

```
if(result ==NULL)
// do something else
else
//your code here 
```

# windows - 在 Windows 上为 Go 1 构建文档

> ID：10018146
> 
> 赞同：2
> 
> 时间：2012-04-04T19:42:19.580
> 
> 标签：windows, documentation, go

如何在 Windows 上构建 Go 1 文档？它位于我机器上的 D:\go\doc 中，所有链接和路径都已损坏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:23:22.913

我不是 Windows 的高手，但 Go 的文档不是这样工作的。您应该使用[`godoc`](http://golang.org/cmd/godoc/)命令来访问 Go 文档。在浏览器中运行`godoc -http=:6060`和访问文档。`http://127.0.0.1:6060`

# asp.net - 如何允许用户在 ASP.NET 中使用他们的 google 帐户登录到我的 Web 应用程序

> ID：10018148
> 
> 赞同：0
> 
> 时间：2012-04-04T19:42:41.260
> 
> 标签：asp.net, oauth-2.0, google-openid

我正在开发一个网站，因为我想实现这个功能，所以当用户登录到他们的谷歌帐户时，我想获取他们的个人资料并将其存储在我的数据库中。

我在这里，它可以由 OAuth 完成。任何人都可以有这种情况的最佳示例，请在此处发布。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:48:25.313

你看过[DotNetOpenAuth](http://www.dotnetopenauth.net/)项目吗？下载内容包括 MVC 和 WebForms 的示例项目。

# c# - 长时间运行的托盘应用程序

> ID：10018149
> 
> 赞同：0
> 
> 时间：2012-04-04T19:42:46.360
> 
> 标签：c#, windows-services, system-tray

> **可能重复：**
> [使用 .NET 编写 Windows 系统托盘应用程序](https://stackoverflow.com/questions/995195/writing-a-windows-system-tray-application-with-net)

我想开发一个托盘应用程序。这应该做的是它必须继续寻找最近修改的文件。一旦文件被捕获，它就会将该文件的副本复制到 Web 服务器。因此，用户将能够登录网站，稍后用户将能够下载这些备份文件。我想知道的是如何开发托盘应用程序？我必须为此编写一个Windows服务吗？如果是这样，我需要一个托盘应用程序来控制服务（托盘应用程序必须具有启动和停止服务 [备份服务] 的功能，一个选择文件扩展名的选项）我正在使用 c#。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:50:46.920

我个人不会让它像一个`Windows Service`，但会选择一个简单的应用程序“生活”在系统后面。更容易维护和更新，从客户端卸载（根据他的要求）。简而言之，对于一些简单的事情，我不会选择 Windows 服务。

我会添加一个带有一些菜单的系统托盘组件。您可以查看 Philipp Sumi 的[WPF NotifyIcon](http://www.hardcodet.net/projects/wpf-notifyicon)。

菜单项之一可以具有注册可执行文件以在操作系统启动时运行的项。您可以使用以下代码来实现：

```
Microsoft.Win32.RegistryKey key = Microsoft.Win32.Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
Assembly curAssembly = Assembly.GetExecutingAssembly();
key.SetValue(curAssembly.GetName().Name, curAssembly.Location); 
```

如果由于某种原因，由于您的帖子不是很清楚，您的应用程序确实会在相当大的生产环境中管理大量数据，使用 WindowsService 并管理所有与它相关的东西。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:55:42.470

听起来很简单。

创建一个基本的 WinForms 应用程序。应用程序的主窗口应该开始“最小化”并且不应该显示在任务栏中。但是，它应该有一个“NotifyIcon”组件，它允许应用程序显示在系统托盘中。双击 NotifyIcon 将恢复窗口，在任务栏中显示窗口并隐藏 NotifyIcon，直到窗口最小化或再次关闭。

此应用程序可以自己进行文件监视，也可以编辑 Windows 服务使用的配置；无论哪种方式都可以。无论哪种方式，您都需要设置一个 FileSystemWatcher（或其中几个）来监视用户希望您检查的目录中的文件。当 FileSystemWatcher 看到文件更改时，它会触发一个事件，您可以通过执行上传到 Web 服务器来处理该事件。

就像整个设计的旁白一样；如果您正在实施一个在线备份系统（您似乎是这样），我会确保用户可以访问该文件的几次过去迭代，以防他们想要恢复以前的版本。您还应该进行病毒检查；用户需要做的最后一件事是让病毒破坏他们的文件，并让您的备份系统备份被破坏的文件。

# mod-rewrite - Mod_rewrite 得到 500 服务器错误，ubuntu 服务器

> ID：10018150
> 
> 赞同：0
> 
> 时间：2012-04-04T19:42:47.843
> 
> 标签：mod-rewrite, apache2, ubuntu-server

您好，我今天一直在为我的新家庭服务器苦苦挣扎。我已经在上面安装了最新版本的 ubuntu 服务器。安装了 php、apache、mysql，一切似乎都很完美。

我正在尝试在我的本地计算机上建立一个与 XAMPP 完美配合的网站。我一直在使用本指南来设置 mod_rewrite。[http://www.solutionsamir.com/20110303140/Operating-Systems/Linux-Unix/How-to-enable-mod_rewrite-on-ubuntu-server-for-apache2.html](http://www.solutionsamir.com/20110303140/Operating-Systems/Linux-Unix/How-to-enable-mod_rewrite-on-ubuntu-server-for-apache2.html)

这是我的 HTACCESS

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/?index.php$
RewriteRule . index.php 
```

这是我的 000-default `ServerAdmin webmaster@localhost

```
DocumentRoot /var/www
<Directory />
    Options FollowSymLinks
    AllowOverride all
</Directory>
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride all
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride all
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory> 
```

`

它以某种方式工作，但每次我发布表格时，我都会收到 500 个内部服务器错误。知道有什么问题吗？

编辑：这是我通过激活日志记录得到的。

```
 192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (3) [perdir /var/www/serverpanel/] add path info postfix: /var/www/serverpanel/login -> /var/www/serverpanel/login/
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (3) [perdir /var/www/serverpanel/] strip per-dir prefix: /var/www/serverpanel/login/ -> login/
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (3) [perdir /var/www/serverpanel/] applying pattern '^(.+)/$' to uri 'login/'
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (2) [perdir /var/www/serverpanel/] rewrite 'login/' -> 'index.php'
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (3) [perdir /var/www/serverpanel/] add per-dir prefix: index.php -> /var/www/serverpanel/index.php
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (2) [perdir /var/www/serverpanel/] strip document_root prefix: /var/www/serverpanel/index.php -> /serverpanel/index.php
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (1) [perdir /var/www/serverpanel/] internal redirect with /serverpanel/index.php [INTERNAL REDIRECT]
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f5289230208/initial/redir#1] (3) [perdir /var/www/serverpanel/] strip per-dir prefix: /var/www/serverpanel/index.php -> index.php
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f5289230208/initial/redir#1] (3) [perdir /var/www/serverpanel/] applying pattern '^(.+)/$' to uri 'index.php'
192.168.1.110 - - [04/Apr/2012:23:41:22 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f5289230208/initial/redir#1] (1) [perdir /var/www/serverpanel/] pass through /var/www/serverpanel/index.php
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (3) [perdir /var/www/serverpanel/] add path info postfix: /var/www/serverpanel/login -> /var/www/serverpanel/login/
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (3) [perdir /var/www/serverpanel/] strip per-dir prefix: /var/www/serverpanel/login/ -> login/
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (3) [perdir /var/www/serverpanel/] applying pattern '^(.+)/$' to uri 'login/'
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (2) [perdir /var/www/serverpanel/] rewrite 'login/' -> 'index.php'
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (3) [perdir /var/www/serverpanel/] add per-dir prefix: index.php -> /var/www/serverpanel/index.php
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (2) [perdir /var/www/serverpanel/] strip document_root prefix: /var/www/serverpanel/index.php -> /serverpanel/index.php
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f528923b0a0/initial] (1) [perdir /var/www/serverpanel/] internal redirect with /serverpanel/index.php [INTERNAL REDIRECT]
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f52892304b8/initial/redir#1] (3) [perdir /var/www/serverpanel/] strip per-dir prefix: /var/www/serverpanel/index.php -> index.php
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f52892304b8/initial/redir#1] (3) [perdir /var/www/serverpanel/] applying pattern '^(.+)/$' to uri 'index.php'
192.168.1.110 - - [04/Apr/2012:23:41:52 +0200] [192.168.1.233/sid#7f52893ad1d8][rid#7f52892304b8/initial/redir#1] (1) [perdir /var/www/serverpanel/] pass through /var/www/serverpanel/index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:26:15.637

很好的问题，有日志。值得关注**`;)`**

如我所见，您正在尝试连接到本地 URL `login/`。

通过你的重写规则，最后，它是

```
/var/www/serverpanel/index.php -> /serverpanel/index.php 
```

它被重定向到另一个 URL（不使用实际的 Php），即`/serverpanel/index.php`.

因此它尝试再次应用规则，但使用`/serverpanel/index.php`.

正如你可以猜到的，它将被重写为 go to `index.php`，从而进行无限循环。

仔细查看您的日志：

```
(1) [perdir /var/www/serverpanel/] internal redirect with /serverpanel/index.php [INTERNAL REDIRECT] 
```

这可能是您解决方案的关键：`perdir /var/www/serverpanel/`

2个问题：

*   这里有`.htaccess`文件吗？
*   如果没有`.htaccess`，请尝试检查**所有**Apache conf 文件，查找相关的`<Directory "xxx">`指令，`/var/www/serverpanel/`您可能会发现问题出在哪里。

希望这可以帮助

# java - 用一个字符替换字符数组中的两个字符

> ID：10018153
> 
> 赞同：1
> 
> 时间：2012-04-04T19:42:56.750
> 
> 标签：java, arrays, replace, char

如何用 char 数组中的一个字符替换两个字符？让我再解释一下。我有一个长度为 char 的数组`n`。在这个 char 数组中，我想用指定索引中的一个字符替换两个字符`i`。在此过程中，数组长度将减少 1。
我想到的想法是，首先创建一个新的长度 char 数组，`n-1`然后将所有元素从索引复制`0`到索引`i`（`i`不包括），然后在索引处插入所需的字符，`i`然后复制从索引`i+2`（`i`包括）到索引的元素`n-1`。但是这个过程需要两次`for`循环。有没有更好的方法可以有效地做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:46:34.503

或者更有效的方法是使用 StringBuilder ，它是 char[] 的包装器，让它为你做。

```
char[] chars = "Hello".toCharArray();
StringBuilder sb = new StringBuilder();
sb.append(chars);
sb.replace(2, 4, "L");
System.out.println(sb); 
```

印刷

```
HeLo 
```

您可以查看替换代码以了解它是如何执行的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T19:45:55.377

[使用System.arraycopy()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)复制数组部分，而不是遍历其元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T19:46:13.143

鉴于您想要一个新的数组对象，没有比复制每个数组元素一次更快的方法了，所以没有比这更有效的方法了。如果您使用两次对 的调用`System.arraycopy()`，则不必自己编写循环。

如果您不需要一个新的数组对象，您可以将编号较高的数组元素向下移动一个，这仅涉及副本数量的一半——但是您将需要跟踪一些长度另一种方式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T19:50:20.647

它可以使用单个 for 循环。只需放入一个 IF 语句，指示您是否要替换迭代 (i) = 索引，然后执行不同的操作，而不仅仅是复制。

写在基础：

```
For i = 0 to n - 1
       If i = x then
             arrayCopy(i) = replaceChars
       Else
             arrayCopy(i) = arraySource(i)
       End If
Next 
```

# deployment - 在 OpenShift Express 上部署 Java 应用程序时出错

> ID：10018158
> 
> 赞同：0
> 
> 时间：2012-04-04T19:43:15.597
> 
> 标签：deployment, cloud, openshift

我正在尝试将我的 java 应用程序部署到 OpenShift Express。

该应用程序在我的本地 tomcat 和 CloudFoundry 平台上运行良好。我已经在管理控制台中创建了应用程序，然后将我的应用程序代码推送到了 openshift 创建的 git 存储库。

当我执行推送时，我看到 maven 构建已成功完成，没有错误，但是，如果我随后检查应用程序的状态（使用命令：），`rhc app status`则会显示以下错误：

```
 at org.jboss.as.jpa.processor.JPAAnnotationParseProcessor.deploy(JPAAnnotationParseProcessor.java:90)
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
        ... 5 more
2012/04/04 15:01:42,138 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "ROOT.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"ROOT.war\".DEPENDENCIES" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"ROOT.war\".DEPENDENCIES: Failed to process phase DEPENDENCIES of deployment \"ROOT.war\""}}
2012/04/04 15:01:42,462 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment ROOT.war in 320ms
2012/04/04 15:01:42,464 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."ROOT.war".DEPENDENCIES: org.jboss.msc.service.StartException in service jboss.deployment.unit."ROOT.war".DEPENDENCIES: Failed to process phase DEPENDENCIES of deployment "ROOT.war"
2012/04/04 15:01:42,539 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"ROOT.war\".DEPENDENCIES" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"ROOT.war\".DEPENDENCIES: Failed to process phase DEPENDENCIES of deployment \"ROOT.war\""}}}} 
```

除了这个错误，我还可以看到堆栈跟踪的结尾，因此尝试使用 rhc-tail-file 命令跟踪应用程序的日志，但是当我这样做时，我收到以下错误：`Error in trying to tail files`

有没有人遇到过这个问题或对如何解决有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:35:36.883

Go ahead and SSH into your application using the same UUID and hostname as your git repository. If you go into appname/logs you should be able to see the complete logs. Once you get that you should have a better sense of the error.

# javascript - 用于带有身份验证的 HTTP post XML 的 JavaScript

> ID：10018159
> 
> 赞同：0
> 
> 时间：2012-04-04T19:43:25.097
> 
> 标签：javascript, jquery, ajax, google-chrome, cross-domain

我想用 Javascript 作为 chrome 插件来实现 curl --digest -u username:password -d "mydata" [http://example.com/push之类的东西。](http://example.com/push)这是我的代码。

```
<html>
<head>
</head>
<body>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type='text/javascript' src="jquery.base64.js"></script>
<script language="javascript">

      function setHeader(xhr) {
          xhr.setRequestHeader('Authorization', $.base64Encode('username:password'));
      }

      $.ajax({
        type: "POST",
        url: "http://example.com/push",
        data: "<Phone><Data>mydata</Data></Phone>",
        xhrFields: {
           withCredentials: true
        },
        crossDomain: true,
        beforeSend: setHeader,
        success: function (data,status,xhr){
          //do something
        }
      });
</script>
</body>
</html> 
```

这是一个带有 HTTP 基本身份验证的跨域 POST。由于 CORS，chrome 浏览器而不是 POST 发送一个 OPTIONS 消息质询来发起。如果我将 url 更改为相同的域，它可以工作。如果我禁用身份验证，它也可以工作。但是我必须发布到另一个不受我控制的域，这意味着我不能使用像 easyXDM 这样的解决方案。它们还需要 HTTP 基本身份验证。我一直在寻找解决方案一个星期。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:49:41.580

你试过了吗：

```
xhr.setRequestHeader("Authorization", "Basic " + encodeBase64(username + ":" + password) //usage: Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

参考：[http ://www.w3.org/Protocols/HTTP/1.0/spec.html#BasicAA](http://www.w3.org/Protocols/HTTP/1.0/spec.html#BasicAA)

# ruby-on-rails - 运行 Spork 时，修改 ruby 类无法按预期工作

> ID：10018161
> 
> 赞同：1
> 
> 时间：2012-04-04T19:43:31.743
> 
> 标签：ruby-on-rails, rspec, cucumber, spork

我的 Rails 应用程序中有一个普通的 Ruby 类，我正在测试环境中重新打开它。它基本上看起来像

```
class A
  def get_dependency
    B
  end
  ... some other methods ...
end 
```

在我的黄瓜测试环境中（在从 features/env.rb 加载的文件中）（以及 rspec 的类似位置）我做

```
class A
  def get_dependency
    MockedB
  end
end 
```

这在正常运行中运行良好，但是当我运行 Spork 时，它会奇怪地失败。A 类的 get_dependency 方法被正确覆盖，但它的所有其他公共方法现在都丢失了。有任何想法吗？

我假设这与加载顺序有关，但是当我将文件的需求移出 Spork 的预加载部分时，我没有得到任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:54:14.013

这不是一个很好的答案，但它是一种解决方法。我没有重新打开课程，而是修改了一个单例实例。代码基本一样，只是我在A上加了一个实例方法：

```
class A
  def instance
    @@instance ||= A.new
  end
end 
```

然后在我的测试代码中我修改了实例

```
instance = A.instance
def instance.get_dependency
  MockedB
end 
```

我只需要确保我的实际代码总是调用 A.instance 而不是 A.new。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:21:13.720

一种可能的情况是`A`设置为自动加载，但是当您在黄瓜环境中为其定义覆盖时，您会在自动加载之前这样做；因为`A`现在存在，它永远不会自动加载。

一个可能的解决方案是在覆盖该方法之前调用自动加载器：

```
A.class_exec do
  def get_dependency
    MockedB
  end
end 
```

`ConstMissing`如果`A`此时无法自动加载（可能尚未设置自动加载器），它将引发一个错误。

# android - 在 Android 中更改铃声

> ID：10018163
> 
> 赞同：0
> 
> 时间：2012-04-04T19:43:41.743
> 
> 标签：android, android-widget

我有以下代码，并且在更改 Android 中的铃声时遇到问题。我把这段代码变红了应该可以解决我的问题（保存更改后的铃声）：

```
 RingtoneManager .setActualDefaultRingtoneUri( CustomizeActivity.this,
 RingtoneManager.TYPE_RINGTONE, Uri .parse("Media file uri")); 
```

但我不知道我应该把它放在哪里。请帮忙。国王问候，

```
button4.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                String uri=null;

                ****//First URI
                RingtoneManager .setActualDefaultRingtoneUri( CustomizeActivity.this, RingtoneManager.TYPE_RINGTONE, Uri .parse("Media file uri"));****

                Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
                intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_RINGTONE);
                if (uri !=null) {
                    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, Uri.parse(uri));

                }else{
                    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, (Uri)null);
                }
                startActivityForResult(intent, 1);

            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:04:23.923

将此代码放在`onActivityResult`.like上

```
@Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        super.onActivityResult(requestCode, resultCode, data);  
        if (resultCode != RESULT_OK) {  
            return;  
        } else {  
            Uri uri = data  
                    .getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);  
            if (uri != null) {  
                switch (requestCode) {  
                case 1:  
                    RingtoneManager.setActualDefaultRingtoneUri(this,  
                            RingtoneManager.TYPE_RINGTONE, uri);  
                    break;  
                default:  
                    break;  
                }  
            }  

        }  
    } 
```

# java - 在移动和旋转的物体上设置推力位置

> ID：10018173
> 
> 赞同：0
> 
> 时间：2012-04-04T19:44:19.637
> 
> 标签：java, math, rotation, 2d, trigonometry

我有一艘宇宙飞船，那艘宇宙飞船在太空中 360 度移动。

宇宙飞船需要 2d 中的推力动画。信任动画需要位于飞船底部的中线。我有以下变量。

```
_Rotation
_Spaceship.width
_Spaceship.height
_Spaceship.Position(x,y) 
```

我也上传了我的问题的图片，以防人们不理解我的错误解释：

[http://imgur.com/Lgchc](http://imgur.com/Lgchc)

两个动画都像这样渲染：

```
this._itemAnimation.render(this.getPosition(), canvas, this._degrees);
this._thrustAnimation.render(this.thrustPosition(), canvas, this._degrees); 
```

到目前为止我已经尝试过并且失败了：

```
_thurstPosition.set(((int)_object_x + Math.cos(_degrees) * _itemAnimation.getWidth() / 2) , 
((int)_object_y + Math.sin(_degrees) * _itemAnimation.getWidth() / 2)); 
```

我失败了，有人帮助我。

- - 更新 - -

我已经更新了代码，以便更好地理解：

```
 int SpaceshipCenterX = getPosition().x + (_SpaceshipAnimation.getWidth() / 2) - (_thrustAnimation.getWidth() / 2);
    int SpaceshipCenterY = getPosition().y + ((_SpaceshipAnimation.getHeight() / 2) - (_thrustAnimation.getHeight() / 2));

    double OffSetCos = Math.cos(_spaceshipDegrees);
    double OffSetSin = Math.sin(_spaceshipDegrees);

    _thurstPosition.set 
    (
        (int)(SpaceshipCenterX + (SpaceshipAnimation.getWidth() / 2) * OffSetCos)
        ,
        (int)(SpaceshipCenterY + (SpaceshipAnimation.getHeight() / 2) * OffSetSin)
    ); 
```

我仍然无法得到它的工作。它绕着宇宙飞船转，但速度非常快，到处都在闪烁。

--- 更新 2 ---

这几乎可以工作，但它太过分了：

```
 int xOffset = -1 * (_itemAnimation.getWidth() / 2);
    double DegreeToRadien = Math.toRadians(_degrees);

    _thurstPosition.set
    (
        (int)(((xOffset) * Math.cos(DegreeToRadien)) + getPosition().x),
        (int)(((xOffset) * Math.sin(DegreeToRadien)) + getPosition().y)
    ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:58:26.980

假设您使用的是这个坐标/角度系统：

```
 90 (pi/2) - Up
                     ^
                     |
Left - 180 (pi) <----|----> 0 - Right
                     |
                     v
            Down - 270 (3pi/2) 
```

而且你的宇宙飞船会在 0 度右转

```
>[ } 0 
```

然后对于任何需要从飞船中心相对平移推力的方向，假设我们在 x 方向上平移

```
offset = -1 * width/2; 
```

然后通过飞船的角度旋转它，最后通过飞船的位置平移它。

为了计算这个变换，把这 3 个变换写成逆序的矩阵并将它们相乘，变换一个从 (0,0) 开始的点

```
 [1 0 spaceshipX] [cos(dir) -sin(dir) 0] [1 0 -width/2] [0]
   [0 1 spaceshipY] [sin(dir)  cos(dir) 0] [0 1     0   ] [0]
   [0 0     1     ] [   0         0     1] [0 0     1   ] [1] 
```

所以这会给你推力的位置

```
thrustX = (-width/2)cos(dir) + spaceshipX
thrustY = (-width/2)sin(dir) + spaceshipY 
```

**所以我想你只是错过了你需要减去宽度/ 2，而不是添加它的事实。**

我已经使用正确且更易读的语法对其进行了编辑。到处使用下划线确实会损害可读性。我假设你有一个宇宙飞船类，宇宙飞船有一个宽度、高度、x 位置、y 位置和旋转。你有一个推进器类，它也有一个宽度、高度、x 位置、y 位置和旋转。（它们可以从 Sprite 抽象类继承）。要设置推进器对象的位置，我们调用推进器.setPosition(x,y);

```
int xOffset = -1 * (spaceship.width / 2);

thruster.setPosition(
    (int)(((xOffset) * Math.cos(spaceship.rotation)) + spaceship.x), 
    (int)(((xOffset) * Math.sin(spaceship.rotation)) + spaceship.y)
); 
```

希望这能让您清楚地知道您需要在哪里设置哪些值。我无法在不查看更多代码的情况下破译您的代码，这些变量的声明位置以及它们的实际含义。

# 更新

总结一下，我想你可能已经发现了。**Math.cos 和 Math.sin 要求角度是弧度，而不是度数**。我在这里给出的解决方案是正确的，并且我已经展示了如何通过执行矩阵计算来计算任何相对定位的对象的位置。您只需要记住 spaceship.rotation 必须以弧度为单位，或者您必须将其从度数转换为弧度，然后再将其传递给 Math.cos() 或 Math.sin()。

```
int xOffset = -1 * (spaceship.width / 2);
double radians = Math.toRadians(spaceship.rotation);

thruster.setPosition(
    (int)(((xOffset) * Math.cos(radians)) + spaceship.x), 
    (int)(((xOffset) * Math.sin(radians)) + spaceship.y)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:56:23.897

你的代码看起来很接近我。你需要小心是什么`_degrees`意思。如果`_degrees`是火箭指向的方向（从 +x 轴逆时针方向），那么您需要在其中放置一些减号，因为推力位于火箭的后部，而不是前部。另外，我认为推力在火箭的高度端，所以`getLength`用`getWidth`. 您可能还需要为推力动画的高度添加一些额外的内容（取决于其锚点的位置）。所以像

```
_thurstPosition.set(((int)_object_x - Math.cos(_degrees) * (_itemAnimation.getHeight() / 2 + _thrustAnimation.getHeight() / 2)) , 
((int)_object_y - Math.sin(_degrees) * (_itemAnimation.getHeight() / 2 + _thrustAnimation.getHeight() / 2))); 
```

如果不是圆形，您还需要设置推力方向。

（我假设`_degrees`== `_Rotation`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T18:46:55.373

```
double DegreeToRadien = Math.toRadians(_degrees);

    int ObjectXCenter = (int) (_object_x + ((_itemAnimation.getWidth() / 2)) - _thrustAnimation.getWidth() / 2);
    int ObjectYCenter = (int) (_object_y + ((_itemAnimation.getHeight() / 2)) - _thrustAnimation.getHeight() / 2);

    int xOffset = -1 * (_itemAnimation.getWidth() / 2);

    _thurstPosition.set
    (
        (int)(((xOffset) * Math.cos(DegreeToRadien)) + ObjectXCenter), 
        (int)(((xOffset) * Math.sin(DegreeToRadien)) + ObjectYCenter)
    ); 
```

# c# - 使用 C# 在 HTML 文档中获取文本周围的标签

> ID：10018177
> 
> 赞同：0
> 
> 时间：2012-04-04T19:44:29.917
> 
> 标签：c#, html, html-parsing, html-agility-pack

我想在 HTML 文件中搜索某个字符串，然后提取标签。鉴于：

`<div_outer><div_inner>Happy birthday<div><div>`

我想在 HTML 中搜索“生日快乐”，然后有一个函数返回某种标签结构：这是最里面的标签，这是那个标签之外的标签，等等。所以，`<div_inner></div>`然后`<div_outer></div>`。

有任何想法吗？我正在考虑 HTMLAgilityPack，但我无法弄清楚如何去做。

一如既往地感谢，伙计们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:46:27.067

HAP 确实是一个很好的地方。

您可以使用 a 的`OuterHtml`and`Parent`属性`Node`来获取封闭元素和标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:52:18.110

您可以为此使用 xpath。我使用`//*[text()='Happy birthday'][1]/ancestor-or-self::*`表达式找到文本内容为的第一个（为简单起见）节点`Happy birthday`，然后返回该节点的所有祖先（父、祖父等）和节点本身：

```
var doc = new HtmlDocument();
doc.LoadHtml("<div_outer><div_inner>Happy birthday<div><div>");

var ancestors = doc.DocumentNode
    .SelectNodes("//*[text()='Happy birthday'][1]/ancestor-or-self::*")
    .Reverse()
    .ToList(); 
```

好像返回的节点的顺序就是文档中找到的节点的顺序，所以我用[`Enumerable.Reverse`](http://msdn.microsoft.com/en-us/library/bb358497.aspx)方法倒过来了。

这将返回 2 个节点：`div_inner`和`div_outer`。

# blackberry - 在黑莓应用程序中使用 Jquery Mobile

> ID：10018179
> 
> 赞同：1
> 
> 时间：2012-04-04T19:44:39.120
> 
> 标签：blackberry, jquery-mobile, blackberry-simulator

我找到了一些 rss 阅读器的代码。我想将它用于我的黑莓应用程序。该代码包含 html、css 和 javascript 文档。我为应用程序编写了 config.xml。当我在黑莓模拟器上编译并尝试我的应用程序时，它不会正确加载。就像应用程序没有CSS一样。我只是想知道当我写这样的东西时：

```
<div data-theme="e" data-role="header" data-position="fixed" > 
```

为什么黑莓看不懂？因为css文件中没有css解释。而且我看不出是否还有其他问题。我希望我能找到我的问题 =)

这是一些屏幕截图：

![在此处输入图像描述](../Images/0ac9bc133b9e1748cddd39e2fcb57997.png) ![在此处输入图像描述](../Images/d9dc1caa7e4c4a7886a4b3a86dcfd0ec.png)

任何想法都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:50:26.190

**1.**确保您使用的 jQuery Core 版本适用于您正在使用的 jQuery Mobile 版本。jQuery Mobile 1.0.1 和更早版本获得 jQuery Core 1.6.4 和 jQuery Mobile 1.1.0 和更新版本获得 jQuery Core 1.7.2。[http://www.jquerymobile.com/download](http://www.jquerymobile.com/download)

**2.**确保您正在加载的任何资产（如 jQuery 或 jQuery Mobile）的所有文件名中使用正确的字符。

> *   对于存档文件名，仅使用字母数字字符，文件名以字母开头。
> *   对于存档中的文件，仅使用字母数字字符、下划线或句点。文件名必须以字母开头。

来源：[https ://bdsc.webapps.blackberry.com/html5/documentation/ww_developing/bestpractice_compiling_ww_apps_1873324_11.html](https://bdsc.webapps.blackberry.com/html5/documentation/ww_developing/bestpractice_compiling_ww_apps_1873324_11.html)

请注意，连字符是不允许的，它被 jQuery 的文件命名约定使用。

# jquery - jquery位置和溢出

> ID：10018180
> 
> 赞同：2
> 
> 时间：2012-04-04T19:44:42.277
> 
> 标签：jquery

我有一个工具提示用于从 tr 悬停。我正在使用溢出来隐藏一些，以便用户可以向下滚动以查看所有这些。如何更新元素在溢出中的位置，以便正确显示工具提示？

我的代码如下

```
$('.toolTips tbody tr').each(function () {
// options
var distance = 10;
var time = 100;
var hideDelay = 50;

var hideDelayTimer = null;

// tracker
var beingShown = false;
var shown = false;

var trigger = $(this);
var popup = $('.popup', this).css('opacity', 0);
var p = trigger.position();
// set the mouseover and mouseout on both element
$([trigger.get(0), popup.get(0)]).mouseover(function () {
  // stops the hide event if we move from the trigger to the popup element
  if (hideDelayTimer) clearTimeout(hideDelayTimer);

  // don't trigger the animation again if we're being shown, or already visible
  if (beingShown || shown) {
    return;
  } else {
    beingShown = true;

    // reset position of popup box
    popup.css({
      top: p.top-20,
      left: p.right+60,
      display: 'block' // brings the popup back in to view
    })

    // (we're using chaining on the popup) now animate it's opacity and position
    .animate({
      top: '-=' + distance + 'px',
      opacity: 1
    }, time, 'swing', function() {
      // once the animation is complete, set the tracker variables
      beingShown = false;
      shown = true;
    });
  }
}).mouseout(function () {
  // reset the timer if we get fired again - avoids double animations
  if (hideDelayTimer) clearTimeout(hideDelayTimer);

  // store the timer so that it can be cleared in the mouseover if required
  hideDelayTimer = setTimeout(function () {
    hideDelayTimer = null;
    popup.animate({
      top: '-=' + distance + 'px',
      opacity: 0
    }, time, 'swing', function () {
      // once the animate is complete, set the tracker variables
      shown = false;
      // hide the popup entirely after the effect (opacity alone doesn't do the job)
      popup.css('display', 'none');
    });
  }, hideDelay);
});
}); 
```

这是我的测试环境

[http://listeningbirddevelopment.com/portal/](http://listeningbirddevelopment.com/portal/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:55:32.487

对于这些情况，我更喜欢使用[jQuery UI 位置 API](http://jqueryui.com/demos/position/)，它会按照您的指定很好地处理所有内容和位置。

注意：您需要 jQuery UI 库，可以从 jQuery [http://jqueryui.com下载或从](http://jqueryui.com)[https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js)使用它。 [min.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js)

所以在你的情况下，我认为它会是，

```
popup.position ({
    of: trigger,
    my: "center top",
    at: "center bottom"
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:53:28.867

您正在根据表格行的初始位置设置弹出位置。滚动后，该位置不再有效。将 trigger.position() 调用移动到 mouseover 事件处理程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:00:52.357

这里......使用jquery滚动事件来确定用户是否滚动了框，当它滚动时，相应地更新工具提示的css顶部位置：

```
$('tr').hover(function(){
    $(this).find('.popup').show() /* you already have this code somewhere for showing the popup */
    $(this).find('.popup').addClass('hovered') /* Add a hovered class and remove it in the second function */
    **$(this).parent('table').scroll(function(){
        var distance = console.log($(document).scrollTop()); /* get the distance scrolled */
        $(this).find('.hovered').css('top' + distance) /* will move the tooltip based on how much has been scrolled
    })**
}, function(){
    $(this).find('.popup').removeClass('hovered')
}); 
```

添加粗体部分。可能需要一些调整才能使用您当前的代码，但以下是它的工作方式：

当工具提示悬停时，添加“悬停”类。悬停时将其删除。但是，如果在工具提示出现期间滚动表格，则获取已滚动的距离并将该距离添加到正在显示的工具提示的 css 中。

我将在评论中提出问题。

# facebook - “发送”按钮错误 401

> ID：10018183
> 
> 赞同：0
> 
> 时间：2012-04-04T19:44:55.047
> 
> 标签：facebook, jsf-2, facebook-like

“发送”按钮出现奇怪的错误

我的页面上有以下代码

```
 <div id="fb-root"></div>
    <script type="text/javascript">
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&amp;appId=<myAppId>";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <br/>
    <fb:like send="true" width="450" show_faces="true"></fb:like> 
```

如果我通过 IP 地址访问应用程序，“发送”按钮可以正常工作，但如果我使用域名，Facebook 会返回

```
The page at http://<...>.com:8080/pages/question.jsf could not be reached because the server returned status code 401. 
```

同时“喜欢”按钮工作正常。应用程序前端是用 JSF2+Primefaces 构建的。

任何想法将不胜感激谢谢

**已编辑：**当应用程序部署在端口 8080 上时，我发现“发送”按钮不起作用的第一件事。一旦我将 AS 端口更改为标准端口 (80)，问题就从几乎所有页面中消失了，但只有一个页面。最奇怪的是该按钮在页面上不起作用但是一旦我使用如下参数调用这个页面

```
http://{some_url}.com?param_id=sometexthere 
```

该按钮神奇地开始工作。如果我只是打电话

```
http://{some_url}.com 
```

“发送”按钮显示 401 错误。在所有其他页面上，该按钮都可以正常工作。

可以请任何人对此有所了解。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:25:54.943

好的。这一切都很奇怪。

第一次遇到这个问题，我只是把应用服务器（AS）的端口从8080改成了80，就解决了。据了解，后来只是部分。该错误在一页上仍然存在。我尝试了所有可以成像的方法，包括完全清理应用程序服务器工作目录。没有任何结果。最终解决问题的是干净的 AS 实例。不幸的是，我不知道那里到底发生了什么。最好的猜测是，在应用程序从封闭式斗鱼发展起来并且授权被关闭后，由于某种原因，此更改并未应用于主页。它堆叠在 AS 缓存中的某个位置，即使我删除了它的所有临时文件，它仍然存在。

我使用的 AS 是 glassfish v3.1.2

希望，这可以节省一两天与风车作斗争的人

# r - 用 Plyr 滚动平均

> ID：10018186
> 
> 赞同：2
> 
> 时间：2012-04-04T19:45:10.150
> 
> 标签：r, plyr

我正在尝试使用 plyr 计算滚动平均值。数据是行业国家年的数据，对每个行业国家都有重复观察。数据不平衡，但大多数工业国家有大约 15 个观测值。

例如数据如下所示：

```
country       ISIC      Year      Value
Algeria        1        1990       400
Algeria        1        1991       450
Algeria        1        1992       460
Algeria        2        1990       450
Algeria        2        1991       500
Algeria        2        1992       450
Argentina      1        1990       400
Argentina      1        1991       450
Argentina      1        1992       460
Argentina      2        1990       450
Argentina      2        1991       500
Argentina      2        1992       450
.              .        .          .
.              .        .          . 
```

如果我将数据子集到特定行业和国家，我可以像这样计算滚动平均值

```
rollmean(subdata$Value, 3) 
```

但是，我无法让它与 plyr 一起工作，以便计算每个行业国家组的滚动平均值。我试过了：

```
roll <- ddply(data, .(country, ISIC), summarize, rollmean(data$Value, 3)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:53:53.563

滚动平均值必然会缩短数据，这是您收到错误的部分原因。

```
ddply(dat, .(country, ISIC), function(df) data.frame(country=unique(df$country),                  
                                                     ISIC=unique(df$ISIC),
                                                     rolled=rollmean(df$Value, 3)))
    country ISIC   rolled
1   Algeria    1 436.6667
2   Algeria    2 466.6667
3 Argentina    1 436.6667
4 Argentina    2 466.6667 
```

但是，如果您对 3 个样本进行滚动平均值并且您的数据只有 3 个样本，那么您只是在计算平均值：

```
ddply(dat, .(country, ISIC), summarise, mean(Value))

    country ISIC      ..1
1   Algeria    1 436.6667
2   Algeria    2 466.6667
3 Argentina    1 436.6667
4 Argentina    2 466.6667 
```

更新评论：

要返回日期，您可以使用以下`na.pad`参数`rollmean`：

```
ddply(dat, .(country, ISIC), function(df) {df$rolled <- rollmean(df$Value, 3, na.pad=TRUE); return(df)}) 
```

# java - 如何在 JavaCV 中更改网络摄像头格式？

> ID：10018190
> 
> 赞同：2
> 
> 时间：2012-04-04T19:45:25.860
> 
> 标签：java, format, webcam, javacv

我终于让 JavaCV 与我的网络摄像头一起工作，但我找不到改变抓取图像输出格式的方法。

我的 HP 笔记本电脑中有一个 HP HD (720p) 固定网络摄像头。我得到的唯一分辨率是 640x480。我尝试使用所有可用的 FrameGrabber 子类。

我正在使用这个简单的代码：

```
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.cpp.opencv_core.IplImage;

public class Webcam {

    public static void main(String[] args) throws Exception {
        FrameGrabber grabber = FrameGrabber.createDefault(0);
        grabber.start();

        IplImage grabbedImage = grabber.grab();

        CanvasFrame frame = new CanvasFrame("Some Title", CanvasFrame.getDefaultGamma() / grabber.getGamma());

        while (frame.isVisible() && (grabbedImage = grabber.grab()) != null) {
            frame.showImage(grabbedImage);
        }

        frame.dispose();
        grabber.stop();
    }

} 
```

我是否遗漏了什么，或者是否有其他方法可以使用 JavaCV 从网络摄像头捕获图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:20:45.573

我找到了另一种从网络摄像头捕获的方法，还设置了一些属性，如首选宽度和高度。

这段代码对我有用：

```
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import com.googlecode.javacv.cpp.opencv_highgui;
import com.googlecode.javacv.cpp.opencv_highgui.CvCapture;

public class Webcam {

    public static void main(String[] args) throws Exception {
        CvCapture capture = opencv_highgui.cvCreateCameraCapture(0);

        opencv_highgui.cvSetCaptureProperty(capture, opencv_highgui.CV_CAP_PROP_FRAME_HEIGHT, 720);
        opencv_highgui.cvSetCaptureProperty(capture, opencv_highgui.CV_CAP_PROP_FRAME_WIDTH, 1280);

        IplImage grabbedImage = opencv_highgui.cvQueryFrame(capture);

        CanvasFrame frame = new CanvasFrame("Webcam");

        while (frame.isVisible() && (grabbedImage = opencv_highgui.cvQueryFrame(capture)) != null) {
            frame.showImage(grabbedImage);
        }

        frame.dispose();
        opencv_highgui.cvReleaseCapture(capture);
    }

} 
```

希望这可以帮助有同样问题的人。

# android - Android内存泄漏与静态最终

> ID：10018193
> 
> 赞同：4
> 
> 时间：2012-04-04T19:45:37.403
> 
> 标签：android, memory-leaks, static

问题在于使用显然会导致内存泄漏的静态最终常量：我一直在寻找有关如何在 Android 应用程序中不导致内存泄漏的信息。一个大问题是使用 private static final 作为常量。显然这就是应该如何定义常量。但是静态最终意味着它在旋转后挂起并且意味着无法清除 Activity。

显然我误解了一些东西。我知道将变量放在应用程序上下文中可以让它们在不引起问题的情况下徘徊。

作为关于内存泄漏的一般问题：有很多关于内存泄漏的信息，但我找不到任何可以清楚地总结所有信息的东西。任何完全解释的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T19:51:47.793

此信息不正确。将变量设置为 static final 不会仅仅因为它被标记为 static final 而导致任何类型的内存泄漏。这并不是说您不能通过这样做来造成内存泄漏。您要确保避免的一件事是创建一个上下文类型的静态变量（例如活动）。当您创建对上下文的静态引用时，您可能会造成内存泄漏。静态变量意味着整个应用程序和该类的实例中只有该变量的一个副本。这也意味着它将保留在内存中，直到它被明确清除或应用程序关闭。静态变量是类级别的变量，不附加到对象的任何特定实例。例如，当您创建一个'public static final string myString = "Hello"' 你永远不会导致内存泄漏。与使用'public final string myString =“Hello”'相比，这种定义常量的方式实际上会节省内存，因为如果没有静态，将创建一个内存位置来存储该类的每个实例的该字符串，而不是只为所有实例创建一个副本使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T21:05:33.467

在 Java 中，静态变量位于堆上，并在类加载时分配。实例变量的垃圾回收资格与其实例相关联。

使用 value-type(int, bool, double, etc.) 静态变量不会泄漏类的实例。当您允许非值类型的静态变量时，您可以泄漏这些静态变量引用的任何内容。

考虑一个简单的类

```
public class Activity extends Context {
    static int willNotLeakActivity = 0;
    static Context mayLeakActivity = new Context();

    //if you call activityA.leakyMethod(activityA); you will leak activityA
    public void leakyMethod(Context context){
        mayLeakActivity = context;
    }

    //this method won't leak the instance
    public void safeMethod(int arg){
        willNotLeakActivity = arg;
    }
} 
```

如果您在静态变量中保留对 Activity 对象的引用（即使引用类型是 Context），您将泄漏 Activity 对象。

请记住，Android 不是在真正的 JVM 上运行，而是在 Dalvik VM 上运行，因此理论上您的结果可能会有所不同，但我会非常惊讶地发现 Dalvik 在 GC 资格方面有所不同（我没有我自己不会遇到任何问题）。

编辑 - 再次查看这个问题，我认为这可能会澄清一些理解：只要可以通过遵循 GC 根的引用链来访问对象，它就不会成为垃圾收集的条件。Activity 对象由 Android 进程实例化并正常保持活动状态（我假设它保持活动状态至少类似于`static void main(string[] args)`.

一旦系统调用 yourActivityInstance.onDestroy() 并释放引用，该对象就有资格被 GC（以及随后它引用的所有对象），除非您的活动实例可以通过另一个引用从 GC 根访问。如果这个引用的持有时间超过了它应该持有的时间（阅读：无限期地），你已经泄漏了这个对象，因为 GC 不能确定它可以安全地释放泄漏对象的资源。

这个引用的保存方式无关紧要（静态或非静态，最终或非最终）。只要可以从 GC 根访问对象（至少是静态方法中的本地和范围内变量，加载类中的静态字段），您就会泄漏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T19:59:17.937

这是一个很好的视频，它解决了所有的 Android 内存管理问题，并详细介绍了检测内存泄漏。不完全符合您的要求，但值得在同一个线程中提及。

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:55:50.113

如果您不引用 Activity 本身，常量不会导致内存泄漏。在您的活动中使用（例如字符串）常量没有问题。

有两个很好的资源可以捕获有关内存泄漏的主题：

*   Android 开发者博客的描述[在这里](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)
*   关于内存管理的 Google IO 演示[在这里](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T19:56:06.487

静态常量不一定保持周围的活动并且非常标准。当您有一个静态引用您的活动（例如视图或可绘制对象），该引用超出该活动的预期寿命时，就会出现问题。

[这里](http://android-developers.blogspot.ca/2009/02/track-memory-allocations.html)、[这里](http://android-developers.blogspot.ca/2009/01/avoiding-memory-leaks.html)和[这里](http://android-developers.blogspot.ca/2011/03/memory-analysis-for-android.html)是内存分析的不错起点。只需调查垃圾收集的一般工作原理，您也会得到很好的服务。

# javascript - Firefox 和chrome 的constructor.prototype 行为区别？

> ID：10018198
> 
> 赞同：6
> 
> 时间：2012-04-04T19:46:12.130
> 
> 标签：javascript, firefox, dom, google-chrome

在试验了这么多时间之后，我发现`__proto__`or`Object.getPrototypeOf()`方法是在 DOM 对象中遍历原型链的正确方法。

使用一系列constructor.prototype实际上不会遍历两个浏览器中的原型链。（虽然这是ECMA标准中定义的方式，但constructor的prototype属性是你的原型对象）。

欢迎任何建议或评论...

```
p1 = document.getElementById("test");  // div element

//Prototype Object of p1
p2 = element.constructor.prototype;

//Prototype object of p2
p3 = element.constructor.prototype.constructor.prototype;

console.log(p2 === p3);  // true in chrome(howcome they same ?), false in firefox

q2 = element.__proto__;
q3 = element.__proto__.__proto__;

console.log(q2 === q3);  // false in both browser 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:01:31.540

我完全同意鲍里斯......你应该在这里搜索更多细节（[https://www.google.com/search?q=javascript+prototype+chain](https://www.google.com/search?q=javascript%20prototype%20chain)）但基本上如果你想浏览 DOM 对象中的元素，你只需要像下面这样：

```
function exploreElement(element){
        contentToString = "";
        for (var i in element){
            contentToString += i + " : " + element[i] + "<br />";   
        }
        document.write(contentToString);
    }
    exploreElement(document); 
```

原型和**原型**是完全不同的东西......

如果您有这样的构造函数：

```
function SomeObject(){
        this.__proto__.id = "instance_default_name";
        SomeObject.id = "SomeObject";
        // __proto__ HERE to access the prototype!!!
    } 
```

然后，您可以通过原型向此构造函数添加方法（我假设您在文档中有一个 id 为“myInstance”的空 div 和另一个 id 为“test”的 div）：

```
SomeObject.prototype.log = function(something){
        document.getElementById("myInstance").innerHTML += something + "<br />";
    } 
```

添加一些用于测试目的的方法：

```
SomeObject.prototype.setId = function(id){
    this.id = id;
}
SomeObject.prototype.getId = function(){
    return this.id;
}
SomeObject.prototype.getClassName = function(){
    return SomeObject.id;   
} 
```

然后，您可以使用 new 运算符实例化 SomeObject 并进行如下测试：

```
myInstance = new SomeObject();
myInstance.setId("instance_1");
aDivElement = document.getElementById("test");  
aDivElement.style.backgroundColor = "rgb(180,150,120)";
myInstance.log("p1 = " + aDivElement);
// [object HTMLDivElement]
myInstance.log("p1 backgroundColor = " + (aDivElement.style.backgroundColor));
myInstance.log("myInstance = " + myInstance);
// [object Object] an instance of SomeObject
myInstance.log("myInstance.constructor = " + myInstance.constructor);
// function SomeObject() { this.__proto__.id = "instance_default_name"; SomeObject.id = "SomeObject"; }
myInstance.log("myInstance.constructor.prototype = " + myInstance.constructor.prototype);
// .prototype WHEN CALLED by the instance NOT __proto__
// The constructor of myInstance is SomeObject and the prototype of SomeObject is the prototype of all instances of SomeObject
myInstance.log("myInstance.id = " + myInstance.getId());
// id for the instance of SomeObject that you have instanciated 
myInstance.log("SomeObject.prototype.id = " + SomeObject.prototype.getId());
// id by default of the prototype
myInstance.log("myInstance.constructor.prototype.id = " + myInstance.constructor.prototype.getId());
// id by default of the prototype
myInstance.log("myInstance.getClassName() = " + myInstance.getClassName());
// myInstance.getClassName() = SomeObject 
```

我不知道这是否对您有所帮助，但我希望这对您的搜索有所帮助。此致。尼古拉斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T04:14:57.073

我认为您误解了构造函数/原型的工作方式。

给定一个构造函数，它的 .prototype 将是用它构造的东西的原型。原型的 .constructor 指向构造函数。

所以特别`Element.prototype.constructor === Element`应该持有。由于错误，它不一定在浏览器中。这就是为什么您在 Chrome 中看到 p2 == p3 的原因。

# php - 使用 Twitter Stream API 显示最新推文

> ID：10018203
> 
> 赞同：0
> 
> 时间：2012-04-04T19:46:44.363
> 
> 标签：php, api, twitter, stream

我需要使用 twitter 流 API 显示指定用户的最新推文。我有适度的 PHP、JSON 和 Javascript 知识，但不足以自己弄清楚这个 twitter 流 API。有人可以向我解释“连接”到这个推特流并显示最新推文会是什么样子吗？是否需要在实际服务器上完成某些事情，或者这一切都可以通过网站模板中的一些 json 和 php 代码来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:19:28.177

如果您出于某种原因使用 Streaming API。你可以做的是使用 PHP [phirehose 之](https://github.com/fennb/phirehose)类的东西，或者让它变得更简单，就像死简单一样。查看并阅读 Adam Green 发布的有关 140 DEV 服务器的信息。

他的网站在这里：http: [//140dev.com/](http://140dev.com/)

您可以从这里下载 PHP 框架/服务器：http: [//140dev.com/free-twitter-api-source-code-library/twitter-database-server/download/](http://140dev.com/free-twitter-api-source-code-library/twitter-database-server/download/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:51:49.837

您不想为此使用流 API。

您想要获取[statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)并对其进行解析。您可以完全通过 JavaScript 加载和解析它，实际上，无需在此处执行 PHP 工作。

# django - 在 Heroku 上使用 Django 设置 Websolr

> ID：10018206
> 
> 赞同：3
> 
> 时间：2012-04-04T19:47:15.827
> 
> 标签：django, heroku, websolr

我正在尝试将 WebSolr 支持添加到 Heroku 上的 django 驱动的应用程序中。他们有使用 Ruby 实现的详细说明：

[https://devcenter.heroku.com/articles/websolr](https://devcenter.heroku.com/articles/websolr)

但我不知道如何将它与 Haystack 联系起来。有没有人这样做过？

谢谢。

编辑：

我能够通过将我的`settings.py`文件修改为：

```
HAYSTACK_URL      = os.environ.get('WEBSOLR_URL', '')
HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.solr_backend.SolrEngine',
        'URL': HAYSTACK_URL,

    },
} 
```

然后运行：

```
heroku run myproject/manage.py build_solr_schema > schema.xml 
```

并将内容上传`schema.xml`到 websolr 界面的高级选项卡。一旦我跑了

```
heroku run myproject/manage.py rebuild_index 
```

建立了索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:25:56.147

根据您的问题，我已更新[Heroku Websolr Docs以包含有关 Django 的部分。](https://devcenter.heroku.com/articles/websolr#haystack_for_django)感谢那。有关我们文档的建议，请对此[要点](https://gist.github.com/2333627)发表评论。

# c - 如何在 Bloodshed Dev-C++ 中增加堆栈大小？

> ID：10018207
> 
> 赞同：0
> 
> 时间：2012-04-04T19:47:26.327
> 
> 标签：c, recursion, compiler-optimization, dev-c++

我们在图像处理项目中使用 Blodshed Dev-C++。我们正在视频帧上实现连接组件标签。我们必须使用一个递归函数，它递归了很多次，以至于我们得到了一个stackoverflow。我们怎样才能拥有更大的堆栈大小？是否可以通过一些链接器参数或类似的东西来改变它？

```
void componentLabel(int i,int j,IplImage *img){
  //   blueFrame = img->imageData[i*3*width+j*3];
//     greenFrame = img->imageData[i*3*width+j*3+1];
//     redFrame = img->imageData[i*3*width+j*3+2];

     if(!( img->imageData[i*3*width+j*3]==0 && img->imageData[i*3*width+j*3+1]==0 && img->imageData[i*3*width+j*3+2]==0 )  ){
           //printf("iffffff aq\n");
           return;     
     }
     else{
           //printf("else aq  %d\n",sayac_label);                          
               img->imageData[i*3*width+j*3]=1;  

               new_object.pixel_count=new_object.pixel_count+1;
               new_object.total_row=new_object.total_row+i;
               new_object.total_col=new_object.total_col+j;

               if(j<width-1 ){                   
                         componentLabel(i,j+1,img);                         
               }               
               if(j>0 ){                   
                         componentLabel(i,j-1,img);                   
               }             
               if(i<height-1 ){  
                         if(i>new_object.bottom.satir){
                              new_object.bottom.satir=i;
                              new_object.bottom.sutun=j;                                               
                         }

                         componentLabel(i+1,j,img);                         
               }              
               if(i>0 ){ 
                         if(i<new_object.top.satir){
                              new_object.top.satir=i;
                              new_object.top.sutun=j;                                               
                         }                  
                         return componentLabel(i-1,j,img);               
               }      
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:29:54.440

只有一种方法可以保证您不会用完堆栈大小-将算法重新定义为尾递归（并确保您的编译器正在优化尾调用-通常是-O3（或-O2？）优化标志）。

除此之外，您是否增加了 shell 将授予您的任务的最大堆栈大小？

```
 ulimit -s <maximum stack size> 
```

# wpf - WPF UserControl 或 ControlTemplate ...（不确定）

> ID：10018209
> 
> 赞同：2
> 
> 时间：2012-04-04T19:47:30.557
> 
> 标签：wpf, xaml, wpf-controls

我有一个列表框，我必须在其中添加大约 20 个静态自定义项。所有项目都基于相同的模板（类似的东西）：

```
<Border>
  <StackPanel Orientation="Horizontal">
    <Image Source="" Height="30" />
    <TextBlock Text="" VerticalAlignment="Center" />
  </StackPanel>
</Border> 
```

我不想在 ListBox.Items 中重复 20 次我想要某种用户控件，我可以在其中执行某些操作，如下所示，我可以设置一些自定义属性：

```
<ListBox>
  <ListBox.Items>
    <MyListBoxTemplate x:Name="Item1" ItemText="Item #1" ItemImageSource="/Image1.jpg" />
    <MyListBoxTemplate x:Name="Item2" ItemText="Item #2" ItemImageSource="/Image2.jpg" />
    ...
  </ListBox.Items>
</ListBox> 
```

但我不想为此创建一个 userControl ！！！有没有一种简单的方法可以将该模板放入 Window.Resources 中？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:51:32.237

如果您仅将它用于该特定列表框，则只需分配[ItemTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)属性。这将需要与在其他地方的资源中定义的自定义对象集合一起工作。这将使您免于创建自定义 UserControl，但您将需要一个可以在 XAML 中定义的对象以及一个在 XAML 中的列表。老实说，创建​​一个 UserControl 相对来说比较轻松，而且可能更容易，但不这样做也是可能的。

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate TargetType="CustomObjectType">
            <Border>
              <StackPanel Orientation="Horizontal">
                <Image Source="{Binding ImageSource}" Height="30" />
                <TextBlock Text="{Binding TextContent}" VerticalAlignment="Center" />
              </StackPanel>
            </Border>
        <DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

编辑：如果您要在多个地方使用它，请将其`DataTemplate`放入您的应用程序资源并为其提供一个键，然后将该`ItemTemplate`属性分配给`{StaticResource MyListBoxItemsTemplateKey}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:13:47.737

不是我最喜欢的方法，因为它使用`XmlDataProvider`and`XPath`语法（我往往会忘记）。但是您可以将静态数据作为 xml 嵌入到 Window.Resources 中，如下所示：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Window.Resources>
        <XmlDataProvider x:Key="MyStaticData" XPath="StaticItems" >
            <x:XData>
                <StaticItems xmlns="">
                    <StaticItem>
                        <ItemText>Item #1</ItemText>
                        <ItemImageSource>/Image1.jpg</ItemImageSource>
                    </StaticItem>
                    <StaticItem>
                        <ItemText>Item #2</ItemText>
                        <ItemImageSource>/Image2.jpg</ItemImageSource>
                    </StaticItem>
                </StaticItems>
            </x:XData>
        </XmlDataProvider>
    </Window.Resources>
    <Grid>
        <ListBox>
            <ListBox.ItemsSource>
                <Binding Source="{StaticResource MyStaticData}"  XPath="StaticItem" />
            </ListBox.ItemsSource>
            <ListBox.ItemTemplate>
                <DataTemplate>
                <Border>
                    <StackPanel Orientation="Horizontal">
                            <Image Source="{Binding XPath=ItemImageSource}"  Height="30" />
                            <TextBlock Text="{Binding XPath=ItemText}" VerticalAlignment="Center" />
                        </StackPanel>
                </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

然后在您的 ListBox 中绑定到您指定的 XmlDataProvider，并使用绑定中的 XPath 表示法深入了解您希望控件绑定到的数据。

这个网站也有几个很好的例子：http: [//vbcity.com/blogs/xtab/archive/2010/12/24/more-xpath-examples-in-a-wpf-application.aspx](http://vbcity.com/blogs/xtab/archive/2010/12/24/more-xpath-examples-in-a-wpf-application.aspx)

希望这可以帮助！

# sql - 如何强制 3960 的快照隔离失败

> ID：10018210
> 
> 赞同：4
> 
> 时间：2012-04-04T19:47:45.267
> 
> 标签：sql, sql-server, sql-server-2008, tsql, snapshot

**故事**

我有一个使用快照隔离的 SPROC 通过 MERGE 执行多个插入。此 SPROC 以非常高的负载调用，并且通常是并行调用的，因此它偶尔会引发错误 3960，这表明快照由于更改冲突而回滚。由于高并发，这是意料之中的。

**问题**

我已经实现了一个“重试”队列来稍后再次执行这项工作，但是我很难重现错误以验证我的检查是否准确。

**问题**

如何重现快照失败（特别是 3960）以验证我的重试逻辑是否正常工作？

**已经尝试过**

*   RAISEERROR 不起作用，因为它不允许我提出现有错误，只有用户定义的错误
*   我尝试重新插入相同的记录，但这不会引发相同的失败，因为它不是两个不同的事务“竞争”另一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:21:29.357

打开两个连接，在两个连接上启动快照事务，在连接 1 上更新一条记录，在连接 2 上更新同一条记录（在后台，因为它会阻塞），然后在连接 1 上提交

或者将用户错误视为 3960 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:01:26.293

~~Why not just do this:~~

 ~~```
RAISERROR(3960, {sev}, {state}) 
```~~ 

~~Replacing {sev} and {state} with the actual values that you see when the error occurs in production?~~

(Nope, as Martin pointed out, that doesn't work.)

* * *

If not that then I would suggest trying to run your test query multiple times simultaneously. I have done this myself to simulate other concurrency errors. It should be doable as long as the test query is not too fast (a couple of seconds at least).

# asp.net-mvc-4 - 你如何从 ApiController 访问 HttpContext.Items

> ID：10018212
> 
> 赞同：5
> 
> 时间：2012-04-04T19:47:56.063
> 
> 标签：asp.net-mvc-4, asp.net-web-api

1.  HttpContext.Items 是否仍然被认为是在请求的不同部分之间共享内容的合理场所？特别是 MVC 之外的 HttpHandler，例如 WIF 扩展点。

2.  你如何从 MVC4 的 ApiController 中访问这个字典？不使用 HttpContext.Current 静态方法（我仍然希望它可单元测试）。普通控制器有 HttpContextBase/Wrapper 将其抽象为测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T11:36:20.850

在 Web API 控制器中使用 Request.Properties。实现 ActionFilterAttribute 时，它​​是 filterContext.Request.Properties

# jquery - 在鼠标不活动设置为一个 div 时隐藏 div

> ID：10018214
> 
> 赞同：0
> 
> 时间：2012-04-04T19:47:58.140
> 
> 标签：jquery, intervals, onmousemove

我找到了一个脚本，想稍微修改一下。当用户在某个 div #gallery 上处于非活动状态或处于活动状态时，我试图为 div #menuwrap 设置动画。

现在，即使在第一次动画后，它仍然在#gallery 之外进行动画处理。

任何帮助深表感谢！

演示：http: [//jsfiddle.net/m2FvY/1/](http://jsfiddle.net/m2FvY/1/)

```
 $('#gallery').mouseover(function() {
        var interval = 1;
       setInterval(function(){            
           if(interval == 5){
               $('#menuwrap').animate({top: '-50px'}, 100); 
               interval = 1;
           }
           interval = interval+1;
            console.log(interval);
        },200); 

        $('#gallery').bind('mousemove keypress', function() {
            $('#menuwrap').animate({top: '0'}, 100); 
            interval = 1;
        }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:26:48.763

**[JSFIDDLE 演示](http://jsfiddle.net/959wF/3/)**

每当用户在#gallery 上触发 mousemove 或 keypress 事件时，延迟计时器都会重置。您还可以在其中添加悬停事件，以确保菜单在悬停在#gallery 上时永远不会隐藏。

```
 var interval = 1;

    function delayCheck()
    {
       if(interval == 5)
       {
           $('#menuwrap').animate({top: '-50px'}, 100);
           interval = 1;
       }
       interval = interval+1; console.log(interval);
    }

    $('#gallery').bind('mousemove keypress', function() {
        $('#menuwrap').animate({top: '0'}, 100);
        interval = 1;

        // reset the delay timer
        clearInterval(_delay); console.log('reset timer');
        _delay = setInterval(delayCheck, 500);
    });

    // starts delay timer when page loads
    _delay = setInterval(delayCheck, 500); 
```

* * *

**回答第 2 部分**

**[JSFIDDLE 演示 #2](http://jsfiddle.net/959wF/17/)**

仅在触发 #gallery 事件 mousemove 或 keypress 后检查不活动。一旦用户移出#gallery 框，它将终止delayCheck() 并将#menuwrap 设置回顶部：-50px。

```
 var interval = 1;
    _delay = 0;

    function delayCheck()
    {
       if(interval == 5)
       {
           $('#menuwrap').animate({top: '-50px'}, 100);
           interval = 1;
           clearInterval(_delay);
       }
       interval = interval+1;
       console.log(interval);
    }

    // turn delayCheck() ON, when mousing to #gallery
    $('#gallery').bind('mousemove keypress', function()
    {
        console.log("mousemove keypress");

        $('#menuwrap').animate({top: '0'}, 100);
        interval = 1;

        // reset delayCheck
        clearInterval(_delay);
        _delay = setInterval(delayCheck, 500);
    });

    // turn delayCheck() OFF, when mousing out of #gallery
    $('#gallery').mouseout(function(){
        console.log("mouseout");
        $('#menuwrap').animate({top: '-50px'}, 100);
        interval = 1;

        clearInterval(_delay);
    }); 
```

# django - 在注册期间更新名字和姓氏 - Django CMS

> ID：10018216
> 
> 赞同：0
> 
> 时间：2012-04-04T19:48:14.810
> 
> 标签：django

我目前正在开发 Django CMS 网站上的用户注册应用程序。

我的注册表工作得很好并创建了用户，并将我的自定义字段添加到我的注册模型中。

我想知道的是如何更新 auth_user 以包含用户的名字和姓氏。

目前正在以这种方式创建用户：

```
import newform
from betaregistration.newform import RegistrationFormZ

def user_created(sender, user, request, **kwargs):
    form = RegistrationFormZ(request.POST)
    data = newform.BetaProfile(user=user)
    data.first_name = form.data["first_name"]
    data.last_name = form.data["last_name"]
    data.address = form.data["address"]
    data.city = form.data["city"]
    data.state = form.data["state"]
    data.postal_code = form.data["postal_code"]
    data.country = form.data["country"]
    data.phone= form.data["phone"]
    data.email = form.data["email"]
    data.save()

    # this was the solution
    user.first_name = form_data['first_name']
    user.last_name = form_data['last_name']
    user.save()
    # end solution

from registration.signals import user_registered
user_registered.connect(user_created) 
```

任何帮助表示赞赏。我正在使用 django-registration 进行注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:52:11.387

由于您将 user 传递给 user_created 您可以简单地修改如下内容：

```
data.first_name = user.first_name = form.data["first_name"]
data.last_name = user.last_name = form.data["last_name"]

....

user.save() 
```

我可能会遗漏一些东西，但如果你真的可以访问 user_created 中的用户，那应该可以工作。您也可以使用 request.user 而不是 user 来做同样的事情。

# python - FORTRAN77 函数返回一个数组

> ID：10018222
> 
> 赞同：0
> 
> 时间：2012-04-04T19:48:47.400
> 
> 标签：python, fortran77

很抱歉问了这么基本的问题。我正在研究一些 FOTRAN77 代码并尝试从 Python 调用它。但是，我发现从函数返回两个或多个值时存在一些问题。

下面是代码。它有四个输入（APPRAT、APPNUM、APSPAC、KOC），我想返回三个参数值（APPTOT、KD、TDEGF），它们存储在 GENEEC3 中。我的编译代码在只返回一个参数时运行良好，但当我请求它返回三个参数时不起作用。

所以请给我一些建议，谢谢大家的帮助！

```
 Function GENEEC3 (APPRAT,APPNUM,APSPAC,KOC)

      REAL GENEEC3(3)
      CHARACTER*1 METHOD,AGAIN,WETTED,ADSORP,AIRFLG,GRNFLG,ORCFLG,GRSIZE
Cf2py intent(in) APPRAT,APPNUM,APSPAC,KOC,METHAF,WETTED,METHOD,AIRFLG
Cf2py intent(in) YLOCEN,GRNFLG,ORCFLG,INCORP,SOL,METHAP,HYDHAP,FOTHAP      
Cf2py intent(out) GENEEC3(3)  
C    
      APPTOT=APPRAT*APPNUM
      TDEGF = APPNUM * APSPAC
      KD = 0.0116 * KOC
C
      GENEEC3(1)=APPTOT
      GENEEC3(2)=KD
      GENEEC3(3)=TDEGF
C      
      RETURN 
      END Function GENEEC3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:22:54.783

我试图定义 fortran 函数并让它与 f2py 一起工作，但 f2py 似乎创建了一个函数包装器，其中返回值是标量。我不知道如何把它弄直。

相反，我试图定义子程序。然后 f2py 巧妙地猜到了我真正想要的是数组值函数！我在下面确认了 gfortran 和 pgf90 的工作。

```
f2py --fcompiler=gnu95 -c -m geneec3 geneec3.f90 
```

然后在python中

```
>>> import geneec3
>>> geneec3.geneec3(1,1,1,1) 
>>> array([ 1\.    ,  0.0116,  1\.    ], dtype=float32)
>>> 
```

基因3.f90

```
 subroutine GENEEC3 (APPRAT,APPNUM,APSPAC,KOC, results)

      implicit none
      REAL, dimension(3), intent(out) ::  results
      real, intent(in) :: apprat, appnum, apspac, koc
      real apptot, tdegf, kd

C    
      APPTOT=APPRAT*APPNUM
      TDEGF = APPNUM * APSPAC
      KD = 0.0116 * KOC
C
      results(1)=APPTOT
      results(2)=KD
      results(3)=TDEGF
      END subroutine GENEEC3 
```

# branch - 仅在 clearcase 中的特定扩展上分支

> ID：10018225
> 
> 赞同：2
> 
> 时间：2012-04-04T19:49:02.567
> 
> 标签：branch, clearcase, config-spec

我正在尝试编写一个仅在某些文件类型上分支的配置规范（IE Docs 可能很痛苦，所以我们希望避免这些）。

现在我有以下扩展名：*.txt 和 *.pl（例如）

我努力了：

```
element * CHECKEDOUT
element -directory * \main\LATEST
element '{*.txt||*.pl}'  \main\BLARG\LATEST
element '{*.txt||*.pl}'  \main\LATEST -mkbranch BLARG 
```

还有一些使用括号的变体，等等。

我只是感到困惑，我确实发现在某些情况下您可以使用类似于 c++ 的比较运算符，但无法使其正常工作。

（从这里查看查询语言部分：http: [//publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp ?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/config_spec .htm](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/config_spec.htm)

我应该可以使用：查询 && 查询

是否可以通过使用配置规范仅允许在特定文件类型上进行分支，如果是这样，是否有任何提示/提示/某些东西可以让我朝着正确的方向前进？

编辑：阅读我发送的链接（无论如何，该网站上的一个页面），您可以使用一些东西来设置它

```
element * CHECKEDOUT
element -directory * \main\LATEST
element *.[hc]  \main\BLARG\LATEST
element *.[hc]  \main\LATEST -mkbranch BLARG 
```

这应该与您正在查看的任何 h 和 c 文件匹配，并允许基于这些文件进行分支。

```
element * CHECKEDOUT
element -directory * \main\LATEST
element *.txt  \main\BLARG\LATEST
element *.txt  \main\LATEST -mkbranch BLARG 
```

这将起作用并且只匹配 .txt 文件，这很好，我只是希望它可以匹配其他集合，也许我可以添加一两行额外的行，也许这会完成我正在尝试做的事情。

```
element * CHECKEDOUT
element -directory * \main\LATEST
element *.txt  \main\BLARG\LATEST
element *.pl  \main\BLARG\LATEST
element *.txt  \main\LATEST -mkbranch BLARG
element *.pl  \main\LATEST -mkbranch BLARG 
```

由于各种原因，我们的团队仅对某些文件集进行分支，其中一个原因是在某些情况下难以合并（注意 .doc 文件）。我打算编写一个配置规范，它会自动分支我们团队指定为“可分支”的内容，否则只是检查 main。

我希望我的问题更清楚，并且我认为这并不是您在最初的回答 VonC 中所说的（我认为），如果您的回答仍然成立，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:45:21.307

不，这似乎并不容易（除非您列出要分支的每种类型），并且是有原因的。
分支背后的想法是隔离一组文件的历史记录（而不是该组的某些特定部分）。
UCM 及其 UCM 组件概念（一组连贯的文件，作为一个整体分支，并被标记为一个整体单元）强化了这个想法。[请参阅“在 UCM 中使用复合基线的最佳实践](http://www.ibm.com/developerworks/rational/library/5134.html)
”一文中有关“组件”的更多信息。

![UCM 组件](../Images/51050f8e5fd4b760f4678f1e623130a6.png)

因此，非常努力地弯曲工具以实现一个选择性的版本控制组织可能不是正确的做法。

将这些文件隔离在它们自己的“组件”中，然后通过符号链接将它们使用回原始树结构是一种可能的解决方案（可能还有其他解决方案），它至少更好（这让人想起子模块或子模块的概念）其他 (D)VCS 使用的森林）

* * *

另外，如果您因为“难以”合并的原因而分支：

*   如果您在自己的分支中进行修改，它不会消除合并问题（合并迟早必须完成）
*   .doc Word 文档理论上可以通过`ms_word`类型管理器进行合并。
    请参阅“[关于在 ClearCase 中合并 Microsoft Office 文件](http://www-01.ibm.com/support/docview.wss?uid=swg21244423)”
*   要使自动合并不被二进制工件`.ppt`（例如，例如）阻止，请为该类型激活复制合并策略，如“ [Clearcase UCM 正在尝试合并 pdf 文件](https://stackoverflow.com/questions/8789258/clearcase-ucm-is-trying-to-merge-pdf-files/8789593#8789593)”中所示。

![复制合并](../Images/b5b4c27fa690014d7f0845e0d1fa797d.png)

我知道您出于其他可能有效的原因进行分支，但我再次喜欢我的分支策略简单、可管理和可扩展。

# java - 使用数组的 JNI 任务

> ID：10018226
> 
> 赞同：1
> 
> 时间：2012-04-04T19:49:13.147
> 
> 标签：java, c, arrays, java-native-interface

我有一个关于 JNI 的问题：

```
JNIEXPORT jintArray JNICALL Java_MainClass_intArrayMethod
    (JNIEnv *env, jobject obj, jintArray array) {
    jintArray result;
    jsize len = (*env)->GetArrayLength(env, array);
    jint *body =(*env)->GetIntArrayElements(env, array, 0);
...
} 
```

我可以做一些循环并修改 body 的值，然后：

```
result = (*env)->NewIntArray(env, nb_of_subscribers*tags);
(*env)->SetIntArrayRegion(env, result, 0, tags*nb_of_subscribers, body);
(*env)->ReleaseIntArrayElements(env, array, body, 0); 
```

换句话说，我可以修改 的内容`body`吗？

```
float *max = (float*)malloc(sizeof(float)*tags);
for(k=j;k<nb_of_subscribers*tags;k=k+tags)
if (body[k]>max[j%tags]) max[j%tags]=body[k];
for(k=0;k<nb_of_subscribers*tags;k=k+tags)
body[k]=(float)(body[k]/max[j%tags]); 
```

身体的价值没有改变。如何覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T02:05:14.443

> 我可以修改正文的内容吗？

当然可以，但这真的是你想做的吗？无论如何，您要返回一个新数组，为什么还要修改参数数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:15:25.630

body 的值会自动覆盖，没有任何限制。

# php - PHP在子文件夹中执行脚本

> ID：10018228
> 
> 赞同：2
> 
> 时间：2012-04-04T19:49:32.100
> 
> 标签：php, python, exec, subdirectory

我的网站工作方式遇到了一个小问题。我有一个要从 index.php 页面运行的 python 脚本。现在如果这个脚本在根目录中，通过使用这个命令我可以很容易地执行它：

```
<?php
exec("myscript.py");
?> 
```

这实际上运行 python 脚本并执行所需的操作。但是，我计划编写更多脚本并希望尽可能保持根目录干净，因此我想知道是否可以从我的根目录中的子目录执行此脚本？

当前设置：

```
Root -  C:\wamp\www\homepage\
Python Script Folder - ...\homepage\python\ 
```

当我将脚本放在 python 文件夹中时，无论我使用什么，php 都不会执行它。

试过：

```
<?php
exec("/python/myscript.py")
?>

<?php
exec("//python//myscript.py")
?>

<?php
exec("\python\myscript.py")
?>

<?php
exec("\\python\\myscript.py")
?>

<?php
exec("python/myscript.py")
?>

<?php
exec("python\myscript.py")
?>

<?php
exec("../python/myscript.py")
?> 
```

所有这一切都没有启动该死的东西。我究竟做错了什么 ：[ ![该死！](../Images/0d79e0a2650bc25742ed42592bcf13ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T23:09:13.893

您是否尝试直接调用 python 可执行文件？它对我有用。我有一个这样的 myscript.py：

```
print 'hello'
print 'world' 
```

然后将它放在一个名为 temp/ 的目录中。

我的 php 在名为 temp.php 的文件中，如下所示：

```
<?php
exec('python temp/myscript.py',$output);
print_r($output);
?> 
```

然后我运行它，这就是发生的事情：

```
$ php temp.php
Array
(
    [0] => hello
    [1] => world
) 
```

# interop - 多重采样和 Direct3D10 / D3DImage 互操作

> ID：10018230
> 
> 赞同：1
> 
> 时间：2012-04-04T19:49:41.573
> 
> 标签：interop, multisampling, direct3d10, d3dimage

我正在尝试使用 Direct3D 10 (SlimDX) 和 WPF 实现渲染引擎。

我使用正确的 MultiSample 参数（1,0 / 2,0 和 4,0 正在工作）创建我的设备和 rendertargetview

```
 this.multiSamplingDescription = new SampleDescription(sampleCount, qualityLevel - 1); // 4,1

        Texture2DDescription colordesc = new Texture2DDescription();
        colordesc.BindFlags = BindFlags.RenderTarget | BindFlags.ShaderResource;
        colordesc.Format = this.renderTargetViewFormat; // Format.B8G8R8A8_UNorm
        colordesc.Width = width;
        colordesc.Height = height;
        colordesc.MipLevels = 1;
        colordesc.SampleDescription = multiSamplingDescription;
        colordesc.Usage = ResourceUsage.Default;
        colordesc.OptionFlags = ResourceOptionFlags.Shared;
        colordesc.CpuAccessFlags = CpuAccessFlags.None;
        colordesc.ArraySize = 4;[/code] 
```

然后我在尝试为 D3DImage 创建共享纹理时遇到了问题......

```
 this.Direct3D9Context = new Direct3DEx();
        this.presentParams = new PresentParameters();
        this.presentParams.Windowed = true;
        this.presentParams.SwapEffect = SwapEffect.Discard;
        this.presentParams.DeviceWindowHandle = GetDesktopWindow();
        this.presentParams.PresentationInterval = PresentInterval.Immediate;
        this.presentParams.Multisample = MultisampleType.None;
        this.presentParams.MultisampleQuality = 0;

        this.Device = new DeviceEx(this.Direct3D9Context, 0, DeviceType.Hardware, IntPtr.Zero, CreateFlags.HardwareVertexProcessing | CreateFlags.Multithreaded | CreateFlags.FpuPreserve, this.presentParams); 
```

...

```
 this.presentParams.Multisample = sampleCount; // = 4
        this.presentParams.MultisampleQuality = 0;
        this.Device.Reset(this.presentParams); 
```

...

```
 this.SharedTexture = new Texture(this.Device, texture.Description.Width, texture.Description.Height, 1, Usage.RenderTarget, format, Pool.Default, ref Handle);

// format = Format.A8R8G8B8
// Width = 1244 , same as colordesc
// height = 699, same as colordesc 
```

我错过了什么？

# html - 需要 CSS 帮助才能使图像进入顶部

> ID：10018235
> 
> 赞同：0
> 
> 时间：2012-04-04T19:49:56.260
> 
> 标签：html, css

我有一张分成 3 份的表格。我的问题是左侧有内容，右侧有图片。当我打开页面时，图片从页面中间开始，我需要将图片显示在页面顶部。我怎样才能做到这一点？

```
 <table border="0" cellspacing="0" cellpadding="5">
        <tr>
        <td > 
        <table> Lots of Content </table>

        </td>

        <td width ="10%">
          <table> Empty table (that gives space between left content and right image                         </table>

           </td>

        <td width = "20%">
        <table width="100%">
             <tr>
             <td> <Asp:Image Runat="server" Id="Image" align="top"> </td>
             </tr>

              </table> </td>
          </tr>
           </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:05:00.907

如果您真的想要/需要保留现有结构并寻找快速而肮脏的修复，则将图像的位置设置为绝对位置，并将其顶部和左侧定位在您想要的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:02:43.980

使用此页面确定您想要什么样的定位（从帖子中不确定）[http://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

然后像这样嵌入代码：

```
<head>
 <style type="text/css">
 img
  {
  [Style properties you pic]
  }
 </style>
</head> 
```

或查阅[css_howto](http://www.w3schools.com/css/css_howto.asp)并为您的整个页面布局使用适当的 CSS 文件（没有更多表格）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:07:56.520

这很容易......这是黑客......向 td 添加一个类

```
.positionhack {position:relative} 
```

然后在图像上

```
 .positionTop {
    position:absolute;
    top:0;
    } 
```

# java - Java Arraylist 打印列表中的每隔一个数字

> ID：10018236
> 
> 赞同：-1
> 
> 时间：2012-04-04T19:49:56.390
> 
> 标签：java

这是我在数组列表中打印随机数的代码：

```
public void printList()
{
    System.out.println("The numbers on the list: ") ;
    for (int i = 0 ; i < aList.size() ; i++)
    {
        System.out.print( aList.get(i) + "  ") ;
    }
    System.out.println("\n") ;                
} 
```

我将如何打印同一个列表的所有其他数字？通过使用 do-while 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:51:07.590

在 for 块中添加额外的 if 语句来检查奇偶校验： if (i % 2 == 0) { System.out.print(... }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:54:35.170

上述方法无效。只需将索引增加 2

```
public void print()
{
    System.out.println("The numbers on the list: ") ;
    for (int i = 0 ; i < aList.size() ; i+=2)
    {
        System.out.print( aList.get(i) + "  ") ;
    }
    System.out.println();                
} 
```

# python - python基础知识-我正在尝试编写一个函数，该函数将字符串（一个月）作为输入并返回该月的天数

> ID：10018239
> 
> 赞同：-1
> 
> 时间：2012-04-04T19:50:12.367
> 
> 标签：python

我正在尝试编写一个函数，该函数将字符串（一个月）作为输入并返回该月的天数，使用如下列表：

我把更正放在最下面，谢谢你的帮助

```
month_days= [('January',[31]),('February',[28,29]),('March',[31]), ('April',[30]),('May',[31]),('June',[30]),('July',[31]),('August',[31]),('September',[30]),('October',[31]),    
('November',[30]),('December',[31]) ]

def month_day(mnth):
    for m, d in month_days:
        if m == mnth:
            return d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:10:23.917

这似乎可能是一项家庭作业，但如果不是，您可以使用模块`monthrange`中的功能`calendar`（如[本 SO 问题](https://stackoverflow.com/questions/4938429/how-do-we-determine-the-number-of-days-for-a-given-month-in-python)中所述）：

```
>>> months = ['January','February','March','April','May','June', 'July','August','September','October','November','December']
>>> from calendar import monthrange
>>> for i in range(len(months)):
...     ind = i+1
...     print months[i], monthrange(2012,ind)[1] # returns a tuple, second element is number of days
... 
January 31
February 29
March 31
April 30
May 31
June 30
July 31
August 31
September 30
October 31
November 30
December 31 
```

您可能希望动态定义年份，因为这决定了它是否是闰年，但否则这似乎提供了您想要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:09:47.163

不要发明自行车。只需使用日历模块[http://docs.python.org/library/calendar.html](http://docs.python.org/library/calendar.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:02:36.693

仅供参考，通常解决此类问题的最简单方法（给定字符串打印一个常量）是使用字典：

`month2days = { 'January': 31, 'February': 29, } ## and so on`

`print (month2days['January'])`

将打印 31

使用元组列表不是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:57:42.383

这是遍历列表、找到正确的月份并返回天数的一种非常基本的方法。这不是一个完整或最佳的解决方案，只是一个示例，因此您可以在此基础上进行构建。

```
month_days_list = [('January',[31]),('February',[28,29]),('March',[31]), ... ]
def month_days(month):
    for m, d in month_days_list:
        if m == month:
            return d[0] 
```

你应该对有多个天数选项的月份做一些事情，而不是仅仅返回 d[0]。

# php - 找不到类“Doctrine_Record”

> ID：10018240
> 
> 赞同：4
> 
> 时间：2012-04-04T19:50:18.467
> 
> 标签：php, class, doctrine-orm, codeigniter-2

当我得到[.](https://stackoverflow.com/questions/10017730/class-not-found) `Class 'Classname_model' not found`我通过显式调用该类来解决此问题。

然而，它揭示了另一个问题：

```
Fatal error: Class 'Doctrine_Record' not found in /../application/models/classname_model.php on line 7 
```

这是第 7 行：

```
class Classname_model extends Doctrine_Record { 
```

现在，我在 Doctrine、CodeIgniter 和所有 OOP/MVC 方面都非常陌生。

我的 Doctrine 安装或配置可能有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:10:51.167

引导学说和你的模型......

```
spl_autoload_register(array('Doctrine', 'autoload')); //First set the doctrine autoloader

$manager = Doctrine_Manager::getInstance();
$manager->setCharset('UTF8');    
$manager->setAttribute(Doctrine::ATTR_AUTO_ACCESSOR_OVERRIDE, true);
$manager->setAttribute(Doctrine::ATTR_MODEL_LOADING, Doctrine::MODEL_LOADING_CONSERVATIVE);
$manager->setAttribute(Doctrine::ATTR_VALIDATE, Doctrine::VALIDATE_ALL);

spl_autoload_register(array('Doctrine', 'modelsAutoload'));
Doctrine_Core::loadModels(__PATH_TO_YOUR_MODELS__); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:09:11.963

Doctrine_Record 是 Doctrine 1.x 的一部分。Doctrine 2.x 完全重写并且没有这样的类。所以从降低最新的 Doctrine 1.x 开始。然后你需要花一些时间来理解自动加载和包含路径的东西。找到一个简单的教程，然后逐步完成。

# installation - 什么样的软件可以显示在 .exe 或 .msi 安装过程中在 HDD 上安装了哪些文件？

> ID：10018242
> 
> 赞同：1
> 
> 时间：2012-04-04T19:50:22.550
> 
> 标签：installation, registry, windows-installer, exe, sandbox

我记得看过一个 Windows 软件，它（实时）显示在 HDD 上安装/提取了哪些文件，以及在 .exe 或 .msi 安装过程中在注册表中写入了哪些密钥，但我不记得是什么样的它是软件。

可能是某种沙箱或 sysinternals 工具？

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:10:51.047

我认为 sysinternals 套件具有用于记录来自文件系统和注册表（regmon 和 filemon）的更改的实用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:13:19.140

它是我使用的一个 sysinternals 工具，称为 Process Monitor。[http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T06:49:37.790

我发现有专门为此目的开发的工具。即：

*   [间谍工具](http://www.lcibrossolutions.com/spyme_tools.htm)
*   [总卸载](http://www.martau.com/total-uninstall.php)
*   [改变了什么](http://www.vtaskstudio.com/support.php)

Sysinternals 工具也很棒，但是如果可能的话，你必须使用好的过滤器，否则，你将有一个极端的信息溢出。

# android - Android rawQuery - 有没有办法使用参数化的“IN”来收集数据

> ID：10018246
> 
> 赞同：4
> 
> 时间：2012-04-04T19:50:29.857
> 
> 标签：android, sql, sqlite, sql-parametrized-query

我正在尝试在 WHERE 中使用动态创建的列表，例如：

```
select * from books where id in (123, 120, 125) and bookCover = 'Hardcover' 
```

我想将它与 rawQuery 一起使用，并且我已经在“？”中准备了 SQL。形式，例如：

```
select * from books here id in (?) and bookCover = ? 
```

有什么办法，如何在 select 的 IN 子句中放入“ids”列表？还是我必须忘记带有“？”的准备好的陈述？?

提前感谢您的帮助。已搜索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:57:20.380

不 - 我不知道任何可以满足您要求的数据库（如 Oracle、SQL Server、SQLite、Postgres 等）...

您可以获得的最接近的解决方案是将 ID 插入到第二个表中，然后在`IN`部分中使用子查询...

`MyIDTable`hat 2 个字段`QNO`（只是一个键）和`ID`（包含您想要的 ID `IN`...您首先插入 3 行具有相同 QNO 和相应 ID 的行...

```
INSERT INTO MyIDTable (QNO, ID) VALUES (3, 120);
INSERT INTO MyIDTable (QNO, ID) VALUES (3, 123);
INSERT INTO MyIDTable (QNO, ID) VALUES (3, 125); 
```

然后你可以这样做`SELECT`：

```
select * from books where id in (SELECT T.ID FROM MyIDTable T WHERE T.QNO = 3) and
bookCover = 'Hardcover' 
```

这基本上允许这样做：

```
select * from books where id in (SELECT T.ID FROM MyIDTable T WHERE T.QNO = ?) and
bookCover = ? 
```

完成查找特定 ID 集后，您可以通过`DELETE FROM MyIDTable WHERE QNO = 3`.

# internationalization - mustache/hogan i18n 并考虑词序

> ID：10018250
> 
> 赞同：1
> 
> 时间：2012-04-04T19:50:43.410
> 
> 标签：internationalization, mustache, templating, hogan.js

发现了几个问题（和答案）：[How is internationalization configured for Hogan.js?](https://stackoverflow.com/questions/9211217/how-is-internationalization-configured-for-hogan-js) ，ETC。

但不是特别考虑词序。我需要具备以下能力：

*   步骤 1\. 给定一个键 -> 查找特定语言的句子。

*   step 2\. 这句话可能包含 {{var}} ，需要
    用 json-values 替换。

步骤 2\. 单独是一般的胡须模板。

步骤 1\. 单独可以使用多种技术完成，但我更喜欢不涉及 Mustache/Hogan 引擎之外的任何专门代码的技术（当然与 i18n 资源包结合使用）。霍根似乎通过以下方式支持这一点：（来自上面的网址）

```
var template = "{{#i18n}}Name{{/i18n}}: {{username}}",
    context = {
       username: "Jean Luc",
       i18n: function (i18nKey) {return translatedStrings[i18nKey];}
    }; 
```

然而，在这个例子中结合 1\. 和 2\. 我想`translatedStrings[i18nKey]`返回一个可能包含的字符串`{{<some expansion>}}`。

有人知道这样做的优雅方法吗？

理由：通常语言在词序等方面存在很大差异，这使得复杂的模板没有这种能力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T22:13:34.103

最新版本的 Hogan.js 将处理从 lambda 返回的结果中的 Mustache 标签。但是，对您问题中的代码的一个小改动是 lambda 的结果应该是一个函数，以便修改字符串：

```
var translatedStrings = { name: "Nom {{rank}}" };

var template = "{{#i18n}}name{{/i18n}}: {{username}}",
    context = {
        username: "Jean Luc",
        rank: 'Captain',
        i18n: function() {
            return function (i18nKey) {return translatedStrings[i18nKey];};
        }
    };

document.write(Hogan.compile(template).render(context));​ // Nom Captain: Jean Luc 
```

我创建了一个[jsfiddle](http://jsfiddle.net/zmryZ/)，用最新版本演示了这一点。

# json - Titanium移动解析json响应

> ID：10018251
> 
> 赞同：0
> 
> 时间：2012-04-04T19:50:44.007
> 
> 标签：json, titanium, titanium-mobile

我正在尝试从我的 php api 返回的这个 json 字符串中获取 DishName。

json字符串是

```
["Spicy.com Specials",{"CatID":31,"CatName":"Spicy.com Specials","DishName":"Kashmiri Chicken","DishID":52,"DishDesc":"Cooked with lychees and banana in a lovely sweet and creamy sauce","DishPrice":6.99,"CatDescription":" "},{"CatID":31,"CatName":"Spicy.com Specials","DishName":"Telapia Fish","DishID":51,"DishDesc":"Lightly spiced fillet, a very popular white fish made with peppers, onions and spices in medium sauce","DishPrice":6.99,"CatDescription":" "}, 
```

我的钛代码是

```
var cats = eval('('+this.responseText+')');
alert(cats[0]); 
```

这得到了我的“Foo.com Specials”但是我需要 DishName，任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T22:55:50.300

您实际上会得到一个 JSON 字符串，而不是 JSON 对象。有一个用于将 JSON 字符串解析为 JSON 对象的内置功能：

```
var response = JSON.parse(this.responseText); 
```

然后获取 DishName 很容易：

```
var dishname = response[0].DishName; 
```

*注意：您当前显示的 JSON 似乎不完整，否则它是无效的 JSON 对象。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T04:26:59.320

首先，您的 JSON 响应无效。[您可以在此处在线](http://jsonlint.com/)验证您的 JOSN 字符串。

您可以通过内置方法解析您的 JSON 响应`JSON.parse()`。

示例代码：-

```
yourLoader.onload = function()
{
    var response = JSON.parse(this.responseText);
    var dishname = response[0].DishName;

    Ti.API.log('Your Dish Name:'+dishname);     
} 
```

# r - 使用 NA 从几行中查找最大值

> ID：10018255
> 
> 赞同：1
> 
> 时间：2012-04-04T19:50:50.117
> 
> 标签：r, matrix

我有一个数据框（71568x4）由几个变量组成，这些变量每小时观察一次（一天总共 24 小时）并包含许多 NA。

我想为每个变量找到每 24 小时的最大值（换句话说，是每日最大值）。如果在任何一天的这 24 小时期间缺少 12 小时或更多小时的观测，则该天的数据被视为缺失，因此报告为 NA。谁能帮我在 R 中做到这一点？

这是一个示例：

```
tDate <- rep(c(19980101,19980102,19980103), each = 24)
tTime <- rep(seq(1:24), 3)
x1 <- c(c(1:4),rep(NA,7),c(2:10),6,2,9,1,rep(NA,4),c(4:23),c(2:8),
        rep(NA,7),c(3:5),rep(NA,7))
x2 <- c(rep(NA,3),c(11:15),NA,c(3:15),rep(NA,10),c(7:10),NA,c(2:4),NA,3,
        rep(NA,5),c(6:9),NA,c(8:20),rep(NA,5),5,1)
datmat <- cbind(tDate,tTime,x1,x2) 
```

输出将是这样的

```
> matrix(c(10,23,NA,15,NA,20), byrow = FALSE, ncol = 2) 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:00:42.903

我会定义一个自定义函数来获取你想要的最大值：

```
my.max <- function(vec) {
   if(length(vec[is.na(vec)])>=12) {
      return(NA) 
   } else {
      return(max(vec, na.rm=T))
   }
} 
```

然后使用`plyr`，特别是`ddply`：

```
ddply(as.data.frame(datmat), .(tDate), summarise, x1=my.max(x1), x2=my.max(x2)) 
```

# php - 为什么我不能在 drupal 7 中覆盖 theme_form_element_label？

> ID：10018256
> 
> 赞同：1
> 
> 时间：2012-04-04T19:50:54.520
> 
> 标签：php, drupal, overriding

我正在尝试在 Drupal 7.12 分支中自定义表单标签输出，但我无法弄清楚出了什么问题以及为什么无法覆盖此功能。

这是我的 template.php 示例

```
function myThemeName_form_element($variables)
{
    var_dump(__FUNCTION__);
    return theme('form_element_label', $variables);
}

function myThemeName_form_element_label($variables)
{
    var_dump(__FUNCTION__);
} 
```

结果我只能看到`myThemeName_form_element`输出，我做错了什么？

# ruby-on-rails - 猴子修补 Time.strftime 没有被 Time 类拾取

> ID：10018257
> 
> 赞同：0
> 
> 时间：2012-04-04T19:51:01.027
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2, ruby-1.8

我需要在 Windows 上使用 Rails 2.3 在 Ruby 1.8.7 中修补 strftime。在 config\initializers 我把这个 time_patch.rb 文件（[下面的代码](http://mtjhax.wordpress.com/2010/12/27/ruby-1-8-strftime-works-differently-on-linux-and-windows/)），但它似乎并没有拿起：

```
if RUBY_PLATFORM =~ /mingw32|mingw64|mswin32|mswin64/

  class Time
    alias_method :original_strftime, :strftime
    def strftime(fmt)
      hour12 = "%2d" % ((hour + 11) % 12 + 1)
      original_strftime(fmt.gsub(/%l/, hour12))
    end
  end

end 
```

我将方法重命名为`def blorping`并`Time.methods`从 Rails 控制台执行，但没有看到新方法。

我需要做什么才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:37:26.417

你在使用时检查类方法`Time.methods`，所以你想要的是`Time.instance_methods`确保它被正确修补。

# objective-c - 应用程序中的颜色与它们所基于的图像不同

> ID：10018262
> 
> 赞同：1
> 
> 时间：2012-04-04T19:51:23.657
> 
> 标签：objective-c, ios, opengl-es, colors, cocos2d-iphone

我正在为客户创建一个着色书应用程序，并且进展顺利。很好，事实上，因为它已经完成了。但是有一个障碍：某些颜色没有按预期显示。

客户给了我图像和用于创建画笔的密钥。我参考了颜色，并为每种颜色制作了几个不同大小的圆圈来表示不同的画笔大小。然后我这样加载画笔：

```
 brush = [[CCSprite spriteWithFile:@"yellowbrush3.png"] retain];
    [brush setBlendFunc: (ccBlendFunc) { GL_ONE, GL_ONE_MINUS_SRC_ALPHA }];  
    [brush setOpacity:20]; 
```

这个特定文件的画笔图像是：

![黄色画笔](../Images/9684acf8b03637f4974cbd016d9bf6c3.png)

我制作了颜色输出的屏幕截图，以与我用来创建画笔的键进行比较：

![几个色样](../Images/c83e02735e9f9e1d706591554e7b287e.png)

大约一半的颜色显示得很好，而其他颜色则非常明显。

我尝试了不同级别的不透明度，更改了一些 GL 设置，但似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:13:43.540

这是由于混合伪影以及您在白色背景上绘制的事实。要确认这一点，请更改背景颜色并查看每种颜色的色调是否略有变化。要纠正此问题，您可以降低绘制颜色的不透明度，或选择更合适的混合模式。

尝试更改您对这两个参数`glBlendFunc`的使用`GL_ONE`。这将消除混合，但至少你的颜色应该是 100% 准确的。

# gwt - 如何将后端中的异常重定向到定义到 gwt.xml 中的 GWT 中的错误页面

> ID：10018263
> 
> 赞同：0
> 
> 时间：2012-04-04T19:51:23.753
> 
> 标签：gwt

我不知道谁在 gwt 中执行此操作，我记得我可以在 web.xml 中定义它，但我不确定。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:53:10.827

如果您使用 GWT 的 RPC 与服务器通信并且可能抛出异常的方法在 Service 接口（扩展 GWT 的 RemoteService 的接口）中声明它（void method() throws ...Exception），那么您可以捕获RPC 回调的 onFailure(Throwablecaught) 方法中的异常，然后从那里采取适当的操作...如果要将用户重定向到另一个页面，您可以执行以下操作：

```
Window.Location.assign(GWT.getHostPageBaseURL() + ERROR_PAGE); 
```

# device-driver - WinXPe NDIS 5.1 多端口

> ID：10018269
> 
> 赞同：0
> 
> 时间：2012-04-04T19:51:41.600
> 
> 标签：device-driver, ndis

拥有一个包含三个 NIC 的 PCI 设备，由 Altera 以太网内核提供。因此必须为 WinXPe 实施 NDIS 5.1。MVP 建议为每个内核实现一个 WDM 驱动程序，然后是一个与各个 WDM 驱动程序对话的单个 NDIS 驱动程序，我不明白，因为单个 NDIS 驱动程序似乎没有任何多端口或通道的概念。

如果在 DriverEntry 中，NDIS 驱动程序为每个以太网核心调用一次 NdisMInitializeWrapper 会怎样？它每次都需要使用相同的 DriverObject 进行调用，但可能会在每次调用时返回不同的 NdisWrapperHandle。这个独特的 NdisWrapperHandle 可以用作调用所有其他 NDIS 驱动程序函数的上下文说明符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T05:38:16.497

那是行不通的；每个驱动程序只能调用一次 NdisMInitializeWrapper。

规则是：每个网络接口需要一个设备节点。因此，如果您需要 3 个以太网接口，则系统中需要 3 个设备节点。有几种方法可以到达那里：

1.  PCI 总线将为每个 PCI 功能编号创建一个设备节点。如果您的 PCI 设备向总线公开 3 个功能，则 Windows 将枚举 3 个微型端口设备对象。这使驱动程序超级简单。但是，显然，您必须能够重新调整硬件才能做到这一点。

2.  或者，如果您只使用具有一种 PCI 功能的 PCI 设备，那么您需要自己多路复用 PCI 枚举的设备节点。这意味着您应该创建自己的虚拟总线驱动程序 (VBD)。PCI 总线枚举一个设备节点，该节点与您的 VBD 的驱动程序相关联。然后您的 VBD 转身枚举 3 个子节点，每个子节点都与一个微型端口相关联。

    这种方法需要做更多的工作，因为现在您需要编写*两个*驱动程序。幸运的是，WDF 使普通人可以编写总线驱动程序。您的 VBD 需要实现代码以在子网络微型端口之间共享资源（中断、配置空间）。

大牌供应商在选择选项 #1 还是选项 #2 上存在分歧，因此两者都*可以*工作。根据您的描述，听起来您已经获得了实施 VBD 的建议。

# python - 将python脚本输出输出到文件时出现Unicode错误

> ID：10018271
> 
> 赞同：17
> 
> 时间：2012-04-04T19:51:48.717
> 
> 标签：python, unicode, beautifulsoup

这是代码：

```
print '"' + title.decode('utf-8', errors='ignore') + '",' \
      ' "' + title.decode('utf-8', errors='ignore') + '", ' \
      '"' + desc.decode('utf-8', errors='ignore') + '")' 
```

title 和 desc 由 Beautiful Soup 3 （*p[0].text*和*p[0].prettify*）返回，据我所知，BeautifulSoup3 文档是 UTF-8 编码的。

如果我跑

```
python.exe script.py > out.txt 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "script.py", line 70, in <module>
    '"' + desc.decode('utf-8', errors='ignore') + '")'
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf8' in position 264
: ordinal not in range(128) 
```

但是，如果我跑

```
python.exe script.py 
```

我没有错误。仅在指定输出文件时才会发生。

如何在输出文件中获得好的 UTF-8 数据？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T20:44:09.330

您可以使用 codecs 模块将 unicode 数据写入文件

```
import codecs
file = codecs.open("out.txt", "w", "utf-8")
file.write(something) 
```

'print' 输出到标准输出，如果您的控制台不支持 utf-8，即使您将标准输出通过管道传输到文件，也可能导致此类错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T22:08:19.817

在这种情况下，Windows 的行为有点复杂。您应该听取其他建议，并在内部使用 unicode 作为字符串并在输入期间进行解码。

对于您的问题，您需要在 stdout 重定向的情况下打印编码字符串（只有您知道哪种编码！），但在简单屏幕输出的情况下您必须打印 unicode 字符串（并且 python 或 Windows 控制台处理转换为正确编码）。

我建议以这种方式构建您的脚本：

```
# -*- coding: utf-8 -*- 
import sys, codecs
# set up output encoding
if not sys.stdout.isatty():
    # here you can set encoding for your 'out.txt' file
    sys.stdout = codecs.getwriter('utf8')(sys.stdout)

# next, you will print all strings in unicode
print u"Unicode string ěščřžý" 
```

更新：另见其他类似问题：[在 Python 中管道标准输出时设置正确的编码](https://stackoverflow.com/questions/492483/setting-the-correct-encoding-when-piping-stdout-in-python)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T21:30:44.753

将文本转换为 unicode 以进行打印是没有意义的。使用 unicode 处理您的数据，将其转换为某种编码以进行输出。

你的代码做了什么：你在 python 2 上，所以你的默认字符串类型 ( `str`) 是一个字节串。在您的语句中，您从一些 utf 编码的字节字符串开始，将它们转换为 unicode，用引号将它们括起来（`str`为了组合成一个字符串而强制转换为 unicode 的正则）。然后将此 unicode 字符串传递给`print`，然后将其推送到`sys.stdout`. 为此，它需要将其转换为字节。如果您正在写入 Windows 控制台，它可以以某种方式进行协商，但如果您重定向到一个常规的哑文件，它会退回到 ascii 并抱怨，因为没有无损的方法可以做到这一点。

解决方案：不要提供`print`unicode 字符串。将其“编码”为您选择的表示形式：

```
print "Latin-1:", "unicode über alles!".decode('utf-8').encode('latin-1')
print "Utf-8:", "unicode über alles!".decode('utf-8').encode('utf-8')
print "Windows:", "unicode über alles!".decode('utf-8').encode('cp1252') 
```

当您重定向时，所有这些都应该毫无怨言地工作。它可能在您的屏幕上看起来不正确，但使用记事本或其他工具打开输出文件，看看您的编辑器是否设置为查看格式。（Utf-8 是唯一有希望被检测到的。cp1252 可能是 Windows 默认值）。

一旦你明白了，清理你的代码并避免使用 print 来输出文件。使用该`codecs`模块，并使用`codecs.open`而不是普通打开方式打开文件。

PS。如果您正在解码`utf-8`字符串，则转换为 unicode 应该是无损的：您不需要该`errors=ignore`标志。当您转换为 ascii 或 Latin-2 或其他什么时，这是合适的，并且您只想删除目标代码页中不存在的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-10T18:44:09.667

问题：如果您在 Windows 上运行：

```
python.exe script.py 
```

以下内容将生效：

```
sys.stdout.encoding: utf-8
sys.stdout.isatty(): True 
```

但是，如果你运行：

```
python.exe script.py > out.txt 
```

你将有效地拥有这个：

```
sys.stdout.encoding: cp1252
sys.stdout.isatty(): False 
```

因此，可能的解决方案（IN PYTHON > 3.7）：

```
import sys
if not sys.stdout.isatty():
    sys.stdout.reconfigure(encoding='utf-8')

print '"' + title.decode('utf-8', errors='ignore') + '",' \
      ' "' + title.decode('utf-8', errors='ignore') + '", ' \
      '"' + desc.decode('utf-8', errors='ignore') + '")' 
```

另请参阅： [如何在 Python 3 中设置 sys.stdout 编码？](https://stackoverflow.com/questions/4374455/how-to-set-sys-stdout-encoding-in-python-3/33470043)

# java - 2 个 JMenu 问题

> ID：10018273
> 
> 赞同：-4
> 
> 时间：2012-04-04T19:52:00.133
> 
> 标签：java, swing, user-interface

我知道这可能有点“基本”，但我已经查看了所有可能的教程，但他们没有告诉我。

所以问题1：

我正在尝试在 JMenuBar 中放置一个链接，我会继续这样做吗？

问题2：

当我尝试将某些内容添加到菜单栏时，它不会添加它。

我所有的导入都是正确的，我得到了 0 个错误，那为什么它不让我呢？

代码：

```
 JFrame frame = new JFrame();    

    JMenuBar mb = new JMenuBar();
    frame.setJMenuBar(mb);

    JMenu file = new JMenu("File");
    mb.add(file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:57:31.097

实际上，您可以将 JMenuItem 添加到 JMenuBar。我认为您不能在 JMenuBar 上添加文件。您可以在 JMenuItem 上侦听并链接到您想要的任何位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T20:18:48.980

如果您想单击菜单项以在 Web 浏览器中打开链接，请首先创建一个方法来执行此操作 -[`browse()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)在您的浏览器中创建一个 URL，从您的 main 方法中对其进行测试，然后您可以创建`JMenuItem`s 并设置[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)一个调用你的方法

# api - 如何从特定的 Foursquare 帐户中提取最近的城市/国家？

> ID：10018275
> 
> 赞同：0
> 
> 时间：2012-04-04T19:52:05.047
> 
> 标签：api, geolocation, foursquare

我正在尝试将 Foursquare 帐户绑定到网站，因此它将返回特定用户最近签到的国家和城市。Foursquare 使用私人令牌 URL 为用户提供私人订阅源：[https](https://foursquare.com/feeds/) ://foursquare.com/feeds/ ，但这些订阅源不包括城市和国家/地区。

有没有办法可以从提要中提取这些数据，或者是通过 Foursquare API 的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:20:55.923

您可以将 Feed 与[Google 的 GeoCoding API](https://developers.google.com/maps/documentation/geocoding/?hl=en#ReverseGeocoding)一起使用。

您可以从 Foursquare 获得上次签到的坐标。然后，您可以使用坐标并将其传递给例如 Google 的反向 GeoCoding API。

示例 Foursquare 答案：

```
<item>
    <title>Geisenhausen</title>
    <description>@ Geisenhausen</description>
    ...
    <georss:point>48.46855070459905 12.259496372637319</georss:point>
</item> 
```

现在，您可以将坐标传递给 Google API 并获取您的城市、国家/地区等： [http ://maps.googleapis.com/maps/api/geocode/json?latlng=48.46855070459905,12.259496372637319&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=48.46855070459905,12.259496372637319&sensor=false)

# php - 为什么查询在 phpmyadmin 上工作但不在 php 页面中

> ID：10018276
> 
> 赞同：0
> 
> 时间：2012-04-04T19:52:08.213
> 
> 标签：php, mysql

我是 PHP 新手，我的代码有问题。我有两张桌子：

```
seeker

seeker_nic | username
-----------+----------
111        | ali
222        | umer
333        | raza

bloodrequest

id | seeker_nic | requireddate
---+------------+--------------
1  | 111        | 2012/9/9
2  | 222        | 2012/5/8
3  | 111        | 2012/10/11
4  | 111        | 2012/11/12
5  | 222        | 2012/7/9
6  | 333        | 2012/4/4 
```

现在我想列出一次最大日期的用户，比如..

```
s.no | username | requireddate
-----+----------+--------------
1    | ali      | 2012/11/12
2    | umer     | 2012/7/9
3    | raza     | 2012/4/4 
```

我正在使用这个查询...

```
select seeker.username, max(bloodrequest.requireddate)
from seeker
join bloodrequest on seeker.seeker_nic=bloodrequest.seeker_nic
group by seeker.username 
```

此查询在 phpMyAdmin 中有效，它显示了我想要的结果。但是当我在 PHP 中运行这个查询时，requireddate 列发生了错误：

`"Undefined index: requireddate in C:\wamp\www\list.php on line 64"`

第 64 行是：

`<td><?php echo $rec['requireddate']; ?></td>`

谁能告诉我问题出在哪里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:54:09.940

```
select seeker.username, max(bloodrequest.requireddate) as requireddate
from seeker
join bloodrequest on seeker.seeker_nic=bloodrequest.seeker_nic
group by seeker.username 
```

那么应该工作。您需要为该列指定所需的名称。

# javascript - 通过 Javascript 裁剪（获取图像）可见网页内容

> ID：10018281
> 
> 赞同：2
> 
> 时间：2012-04-04T19:52:21.193
> 
> 标签：javascript, jquery, browser

假设，我有一个网页，它显示在网络浏览器中。是否可以在 Javascript 中执行以下操作：

1.  整个可见网页（无需滚动，只是在某个点可见），我使用鼠标在其上绘制一个区域（通过绘制或仅选择两个点作为矩形）。

2.  我单击提交按钮，该可见区域被转换为图像并保存到服务器/客户端计算机或任何方式，但我得到了图像。

* * *

我只想知道这在技术上是否可行，如果是，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:54:45.393

是的，也许您可​​以尝试使用[jsFeedback](http://hertzen.com/experiments/jsfeedback/)？我知道谷歌也这样做。

此外，[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T19:55:43.063

出于安全原因，不可以。如果您在 Intranet 上或只想私下使用它，您可以研究制作一个可以为您执行此操作的自定义浏览器插件。

# java - 将多个 PreparedStatement 合并在一起

> ID：10018282
> 
> 赞同：1
> 
> 时间：2012-04-04T19:52:23.413
> 
> 标签：java, mysql, jdbc, prepared-statement

我正在尝试设置一个 while 循环，该循环使用 Java 中的 jdbc 驱动程序将多行插入 MySQL 表。我的想法是，我最终会发表如下声明：

```
INSERT INTO table (column1, column2) VALUES (column1, column2), (column1, column2); 
```

我想使用 a 设置此语句`java.sql.PreparedStatement`，但我想准备语句的一小部分，一次一行 - 主要是因为条目的数量是动态的，这似乎是创建一个大的最佳方法询问。

这需要每次生成另一个块时将小部分“合并”在一起。我如何将这些合并在一起？或者你会建议忘记这个想法，而只是`INSERT`一次执行数千条语句？

谢谢你，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:54:14.793

最好准备一个 PreparedStatement 并尽可能多地重用它：

INSERT INTO (table) (column1, column2) VALUES (column1, column2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:55:00.007

这在某种程度上取决于您计划运行此循环以执行数千条语句的频率，但这是准备好的语句和存储过程的确切目的之一 - 因为不必在每次执行时重新编译查询，您可能会得到在循环中通过简单的 SQL 语句执行进行查询时，性能会大大提高，必须在每次循环迭代时编译和执行。

这些收益可能仍然无法与您所要求的在循环中建立长多插入的预准备语句的性能相匹配，但编码起来会更简单。除非性能出现问题，否则我建议使用执行循环。

# javascript - Javascript：将日期添加到任何日期

> ID：10018287
> 
> 赞同：2
> 
> 时间：2012-04-04T19:53:06.137
> 
> 标签：javascript

我现在已经阅读了许多主题，但还没有找到一个完全正确的主题。

这是我正在尝试做的事情：
1）解析以 mm/dd/yy 格式提供且通常不是今天的账单日期
2）在日期中添加可变天数。这些术语保存在下面的dueTime 数组中。我在这里限制为30天。
3) 根据账单日期+付款条件，计算账单到期日期，以mm/dd/yy格式返回。

这是我尝试过的。我传递给新日期的信息是我所期望的，但新日期的输出绝不是我所期望的。

谢谢你的帮助。

```
<html>
<head>
<script>
function calculateDueTime(){
    var billDate = document.getElementById('billDateId').value;
    var key = document.getElementById('termsId').value;
    var dueTime = new Array();
    dueTime[1] = 30;
    var billDate = billDate.split('/');
    var newDate = new Date( parseInt( billDate[2] ) + '/' + parseInt( billDate[0] ) + '/' + ( parseInt( billDate[1] ) + parseInt( dueTime[key] ) ) ); 
    document.getElementById('dueDateId').value = newDate.toString();
}
</script>
</head>
<body>

<input name="billDate" id="billDateId" value="5/1/11" /> 
Or any value in mm/dd/yy or m/d/yy format
<select name="terms" id="termsId" onchange="calculateDueTime()">
   <option value="1">Net 30</option>
</select>
<input name="dueDate" id="dueDateId" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:58:19.420

只需将天数添加到日期：

```
var dt= new Date();

dt.setDate(dt.getDate() + 31);

console.log(dt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:56:18.867

我建议看看 Datejs ( [http://www.datejs.com/](http://www.datejs.com/) )。我经常使用这个库来处理日期，我发现这在 JS 中是一个真正的痛苦。

# c++ - 尝试创建对象向量

> ID：10018289
> 
> 赞同：0
> 
> 时间：2012-04-04T19:53:15.670
> 
> 标签：c++, syntax-error

我正在尝试创建一个对象向量，我不知道出了什么问题。

这里的代码

```
class nave {
public:
    void sx(int i); int x();
    void sy(int i); int y();
};
vector<nave> naves();
naves.push_back(nave);
cout << naves.size(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:54:50.147

改变 -

```
vector<nave> naves(); // naves() is a function declaration whose return type
                      // is vector<nave> 
```

至

```
vector<nave> naves; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T19:54:54.357

向量就像任何其他类一样。如此声明：

```
vector<nave> naves; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T20:05:01.737

做这个：

```
vector<nave> naves;
naves.push_back(nave()); 
```

*   旧行：`vector<nave> naves();`被解释为函数声明。
*   旧行：`naves.push_back(nave);`实际上并没有实例化`nave`.

# javascript - 在 y 轴上以固定高度溢出滚动

> ID：10018296
> 
> 赞同：5
> 
> 时间：2012-04-04T19:53:51.987
> 
> 标签：javascript, css, html

我有一个明显简单的问题是：

```
<div class="container">
    <div class="a"></div>
    <div class="b"></div>
    <div class="c"></div>
</div>​ 
```

我在一个容器中有 3 个 div：A 和 B 具有固定的高度。C 必须有一个可延伸的高度，它会随着容器的高度而延伸。如果 C 中的内容太大，我希望 C 滚动但将 A 和 B 保持在同一个位置。

代码在：http: [//jsfiddle.net/V2c9G/](http://jsfiddle.net/V2c9G/)

我做不到。

我试过：

```
<div class="container">
    <div class="a"></div>
    <div class="b"></div>
    <div class="xxx" style="overflow-y:scroll">
       <div class="c"></div>
    </div>
</div>​ 
```

没有成功。它应该沿浏览器调整大小的容器 div。

一个复杂的例子是[http://www.sencha.com/examples/#overview](http://www.sencha.com/examples/#overview)（我说的是布局，让浏览器变小，你会看到滚动出现在标题保持固定的情况下）但这不是一个解决方案，因为它使用 JS 重新计算高度。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:08:30.203

我想你可能正在寻找这样的东西：http: [//jsfiddle.net/QsLFt/](http://jsfiddle.net/QsLFt/)。但是，我不确定如何摆脱隐藏滚动条的 div，最简单的解决方案可能是将其设置为固定宽度？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:14:06.830

**编辑3：**

这是我推荐的解决方案，它使用下面编辑 2 中的 CSS 作为后备，但使用 JavaScript 在加载时和窗口大小发生变化时适当调整 div 的大小。如果客户端禁用了 JavaScript，CSS 解决方案提供了一个不错的起点，并且 JavaScript 确实不应该影响页面的性能，所以我认为没有理由不使用 JavaScript 来完善您想要看到的内容。[在这里可以看到](http://jsfiddle.net/briguy37/9jqne)一个工作小提琴。此外，这里是适当的 JavaScript 代码：

```
var resizeDiv = function(){
    document.getElementById('c').style.height = getWindowHeight() - 64 + 'px';
};

//Framework code
var getWindowHeight = function(){
    if (window.innerHeight) {
        return window.innerHeight;
    }
    if (document.body && document.body.offsetHeight) {
        return document.body.offsetHeight;
    }
    if (document.compatMode=='CSS1Compat' &&
        document.documentElement &&
        document.documentElement.offsetHeight ) {
        return document.documentElement.offsetHeight;
    }

    return 740;//provide a default height as a fallback
};

//resize on pageload
window.onresize = resizeDiv;
setTimeout(resizeDiv); 
```

* * *

我认为您需要调整第三个 div 上的绝对高度以占用其余空间（绝对或百分比），在父 div 上将溢出设置为隐藏，并让第三个内部 div 中的内容确定是否是否显示滚动条。 [这是使用绝对高度方法的更新小提琴](http://jsfiddle.net/V2c9G/2/)。

**编辑：**

从您的“想象容器是浏览器”评论（对我来说，这意味着滚动条应该在容器上），您真正需要做的就是将溢出设置为“滚动”，将第三个 div 中的高度设置为“自动” '。 [这是一个更新的小提琴](http://jsfiddle.net/V2c9G/8/)。

**编辑#2：**

根据您对这个问题的评论，听起来您需要使用百分比方法。最直接的方法是设置[a、b 和 ca 的高度百分比](http://jsfiddle.net/V2c9G/15/)（我必须调整边距以使其适合所有缩放）。不幸的是，使用这种方法，顶部组件不会被修复，听起来您可能会在那里显示看起来很时髦的静态内容。因此，另一种选择是为您的浏览器窗口选择支持的最小尺寸并调整第三个元素的百分比以使其适合。 [这是一个小提琴](http://jsfiddle.net/V2c9G/16/). 但是，不利的一面是，窗口的高度越大，页面底部的空白区域就越多，并且在某个高度以下会有 2 个滚动条。要真正使用顶部固定大小的 div 正确执行此操作，您需要向 window.resize 方法添加一个事件侦听器，并在发生这种情况时根据窗口的新大小适当调整第三个 div 的大小。

注意：在这种情况下，我希望 W3C 批准百分比加上像素的高度、宽度和其他尺寸属性！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T20:18:52.510

你需要`overflow-y:scroll`申请`.container`

看到这个，

[http://jsfiddle.net/v4ZtN/](http://jsfiddle.net/v4ZtN/)

编辑（评论后）：

CSS：

```
.container{
    background-color: red;
    width: 90%;
    margin: 0 auto; 
    height:220px;
}

.a{
   background-color: yellow;
   height: 30px;  
   margin: 2px;    
}

.b{
   background-color: blue;
   height: 30px;
   margin: 2px;    
}

.c{
   background-color: green;
   overflow-y: scroll;    
   height:inherit;
} 
```

html:

```
<div class="container">
    <div class="a"></div>
    <div class="b"></div>
    <div class="c"><img src="http://www.boingboing.net/images/_documents_anemone_images_anemone850-1.jpg" alt=""/></div>
</div> 
```

**编辑：2（评论后）**

用这个改变`.c`风格。

```
.c{
       background-color: green;
       overflow-y: scroll;    
       height:100%;
    } 
```

检查这个小提琴：http: [//jsfiddle.net/XM4gH/6/](http://jsfiddle.net/XM4gH/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:09:35.490

div 仅在您将一些数据放入其中时才显示滚动，这是结果； [jsfiddle](http://jsfiddle.net/mtariq/V2c9G/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T20:12:11.650

根据您的 jsFiddle 目前的情况，我认为您可以简单地将其添加到 .container 类的样式声明中：

```
 overflow:hidden; 
```

但是，您必须将内容实际添加到 .c div 才能看到任何滚动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T20:22:13.300

这个分析器是否符合您的要求？[在此处输入链接描述](http://jsfiddle.net/centerwow/V2c9G/7/)

```
.container{
    background-color: red;
    width: 90%;
    margin: 0 auto;

    height: 315px;
}
.a{
   background-color: yellow;
   height: 30px;  
   margin: 2px;    
width: 90%;
}

.b{
   background-color: blue;
   height: 30px; 
   margin: 2px;    
width: 90%;
}

.c{
   background-color: green;
   height: 250px; 
   margin: 2px; 
width: 90%;    
   overflow-y: scroll;    
}
​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T20:32:54.310

很难根据问题准确说出您要做什么，但[如果这是所需的结果](http://jsfiddle.net/V2c9G/11/)，那么这些是我在您的代码中发现的问题：

1.  您需要在红色框上隐藏溢出，因此绿色框不会超出容器
2.  在绿色框中，如果有足够的数据可以扩展，则需要一个滚动条。这是可行的，但是您专门设置的高度（250px）足以延伸出容器。你想要一个特定的高度，这个数字是容器中剩余的任何东西。我得到了 132 像素。然后应用溢出滚动，超出此高度的任何内容都将是可滚动的。

# c# - c#迭代父类型数组以在派生类型上调用非多态方法

> ID：10018298
> 
> 赞同：8
> 
> 时间：2012-04-04T19:53:54.957
> 
> 标签：c#

我正在使用非常相似的循环来迭代任何传递对象的所有公共字段和属性。我确定字段/属性是否用特定的自定义属性装饰；如果是这样，则对字段或属性的值执行操作。两个循环是必要的，因为获取字段值的方法与获取属性值的方法不同。

```
// Iterate all public fields using reflection
foreach (FieldInfo fi in obj.GetType().GetFields())
{
  // Determine if decorated with MyAttribute.
  var attribs = fi.GetCustomAttributes(typeof(MyAttribute), true);
  if (attribs.Length == 1)
  {
    // Get value of field.
    object value = fi.GetValue(obj);
    DoAction(value);
  }
}

// Iterate all public properties using reflection
foreach (PropertyInfo pi in obj.GetType().GetProperties())
{
  // Determine if decorated with MyAttribute.
  var attribs = pi.GetCustomAttributes(typeof(MyAttribute), true);
  if (attribs.Length == 1)
  {
    // Get value of property.
    object value = pi.GetValue(obj, null);
    DoAction(value);
  }
} 
```

我想将循环放在一个单一的通用方法中，以便我可以更简单地编写：

```
DoEachMember(obj.GetType().GetFields());
DoEachMember(obj.GetType().GetProperties()); 
```

这需要`DoEachMember()`接受`MemberInfo`类型（它是 和 的父类型`FieldInfo`）`PropertyInfo`。问题是类中没有`GetValue`方法`MemberInfo`。两者都`FieldInfo`使用`PropertyInfo`不同的方法来获取字段/属性值：

```
public void DoEachMember(MemberInfo mi, object obj)
{
  foreach (MemberInfo mi in obj.GetType().GetProperties())
  {
    object value mi.GetValue(obj); // NO SUCH METHOD!
  }
} 
```

因此，我声明了一个在循环中使用的委托，它接受 a`MemberInfo`并将该成员的值作为对象返回：

```
// Delegate to get value from field or property.
delegate object GetValue(MemberInfo mi, object obj); 
```

## 问题

如何检测`members[]`数组中对象的类型，以便定义循环内使用的委托？目前，我正在使用数组的第一个元素`members[0]`. 这是一个好的设计吗？

```
public void DoEachMember(MemberInfo[] members, object obj)
{
  // Protect against empty array.
  if (members.Length == 0) return;

  GetValue getValue; // define delegate

  // First element is FieldInfo
  if (members[0] as FieldInfo != null)
    getValue = (mi, obj) => ((FieldInfo)mi).GetValue(obj);

  // First element is PropertyInfo
  else if (members[0] as PropertyInfo != null)
    getValue = (mi, obj) => ((PropertyInfo)mi).GetValue(obj, null);

  // Anything else is unacceptable
  else
    throw new ArgumentException("Must be field or property.");

  foreach (MemberInfo mi in members)
  {
    // Determine if decorated with MyAttribute.
    var attribs = mi.GetCustomAttributes(typeof(MyAttribute), true);
    if (attribs.Length == 1)
    {
      object value = getValue(mi, obj);
      DoStuff(value);
    }
  }
} 
```

或者，我可以在每次迭代时检测到类型，但*应该*没有理由个别数组成员会有所不同：

```
foreach (MemberInfo mi in members)
{
  // ...

  object value;

  if ((var fi = mi as FieldInfo) != null)
    value = fi.GetValue(obj);

  else if ((var pi = mi as PropertyInfo) != null)
    value = pi.GetValue(obj, null);

  else
    throw new ArgumentException("Must be field or property.");

  DoStuff(value);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:34:28.037

您可以先投影到对象值，然后在循环中处理这些值。你的整个代码可以归结为这个（加上你的循环）：

```
 /// <summary>
    /// Gets the value of all the fields or properties on an object that are decorated with the specified attribute
    /// </summary>
    private IEnumerable<object> GetValuesFromAttributedMembers<TAttribute>(object obj)
        where TAttribute : Attribute
    {
        var values1 = obj.GetType().GetFields()
                        .Where(fi => fi.GetCustomAttributes(typeof(TAttribute), true).Any())
                        .Select(fi => fi.GetValue(obj));
        var values2 = obj.GetType().GetProperties()
                        .Where(pi => pi.GetCustomAttributes(typeof(TAttribute), true).Any())
                        .Select(pi => pi.GetValue(obj, null));
        return values1.Concat(values2);
    } 
```

您当前的代码混合了两个问题：查找值并对其进行处理。将这些问题分开会更清晰。上面的 LINQ 可以放在一个方法中，该方法从类中获取与给定属性匹配的字段或属性中的所有值，而另一种方法不仅仅是一个循环，对传递的任何内容进行工作。

不那么干净，但坚持你最初的目标，你可以这样做并传递一个适合你正在检索的 MemberInfo 类型的委托： -

```
 public void DoEachMember<TAttribute, TMembertype>(IEnumerable<TMembertype> members,
                             Func<TMembertype, object> valueGetter)
        where TMembertype : MemberInfo
    {
        foreach (var mi in members)
        {
            if (mi.GetCustomAttributes(typeof(TAttribute), true).Any())
            {
                // Get value of field.
                object value = valueGetter(mi);
                DoAction(value);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:03:29.327

您应该使用泛型：

```
public void DoEachMember<T>(T[] members, object obj) where T: MemberInfo
{
} 
```

在里面，测试 T 是什么，并根据它决定调用哪个方法：

```
if(typeof(T)==PropertyInfo.GetType()) ... 
```

您显然可以只进行一次检查，而不是每次迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T20:54:31.350

我通过将 MemberInfo 包装在这样的界面中来解决这个问题：

```
public interface IMemberInfo
{
    MemberInfo Wrapped { get; }

    object GetValue( object obj );

    void SetValue( object obj, object value );
}

internal abstract class MemberInfoWrapper : IMemberInfo
{
    protected readonly MemberInfo MemberInfo;

    public MemberInfoWrapper( MemberInfo memberInfo )
    {
        MemberInfo = memberInfo;
    }

    public abstract object GetValue( object obj );

    public abstract void SetValue( object obj, object value );

    public virtual MemberInfo Wrapped
    {
        get { return MemberInfo; }
    }
}

internal class PropertyInfoWrapper : MemberInfoWrapper
{
    public PropertyInfoWrapper( MemberInfo propertyInfo ) : base( propertyInfo )
    {
        Debug.Assert( propertyInfo is PropertyInfo );
    }

    public override object GetValue( object obj )
    {
        return ( (PropertyInfo)MemberInfo ).GetValue( obj, null );
    }

    public override void SetValue( object obj, object value )
    {
        ( (PropertyInfo)MemberInfo ).SetValue( obj, value, null );
    }
}

internal class FieldInfoWrapper : MemberInfoWrapper
{
    public FieldInfoWrapper( MemberInfo fieldInfo ) : base( fieldInfo )
    {
        Debug.Assert( fieldInfo is FieldInfo );
    }

    public override object GetValue( object obj )
    {
        return ( (FieldInfo)MemberInfo ).GetValue( obj );
    }

    public override void SetValue( object obj, object value )
    {
        ( (FieldInfo)MemberInfo ).SetValue( obj, value );
    }
} 
```

还有一家工厂：

```
internal static class MemberInfoWrapperFactory
{
    public static IMemberInfo CreateWrapper( this MemberInfo memberInfo )
    {
        switch ( memberInfo.MemberType )
        {
            case MemberTypes.Property:
                return new PropertyInfoWrapper( memberInfo );
            case MemberTypes.Field:
                return new FieldInfoWrapper( memberInfo );
            default:
                return null;
        }
    }
} 
```

鉴于此，您可以在您的方法中：

```
// Iterate all public members using reflection
foreach (MemberInfo mi in obj.GetType().GetMembers().Where(x => x is PropertyInfo || x is FieldInfo))
{
  // Determine if decorated with MyAttribute.
  var attribs = mi.GetCustomAttributes(typeof(MyAttribute), true);
  if (attribs.Length == 1)
  {
    // Get value of property.
    object value = mi.CreateWrapper().GetValue(obj, null);
    DoAction(value);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:06:04.557

尝试这个：

```
var areProperties = members.All(m => m is PropertyInfo);
var areFields = members.All(m => m is FieldInfo); 
```

`areProperties`仅当`members[]`数组中的所有项目都是 PropertyInfo 对象时才为真。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T20:22:49.447

你可以做这样的事情，如果你正在使用`C# 4.0`

```
public void DoEachMember(MemberInfo[] members, object obj)
{
   var properties = new List<dynamic>(); //dynamic objects list 
   properties.AddRange(members) ; // add all members to list of dynamics    
   foreach(dynamic d in porperties) //iterate over collection 
   {
      var attribs = d.GetCustomAttributes(typeof(MyAttribute), true); //call dynamicaly
      if (attribs.Length == 1)
      {
         // Get value of property.
         object value = d.GetValue(obj, null); //call dynamically
         DoAction(value);
      }
   }
 } 
```

代码变得非常简洁明了。 *应该*工作。

祝你好运

# asp.net - 将 sql 行转换为 vb.net 页面上的链接？

> ID：10018301
> 
> 赞同：0
> 
> 时间：2012-04-04T19:54:08.483
> 
> 标签：asp.net, sql-server, vb.net, visual-studio

我正在尝试创建一个特定的 aspx 页面，在该页面中，我根据 sql 数据库中的信息显示可点击的链接。例如，一列可能是锚标记，另一列可能是链接本身的路径等。过去，我会从 sql 中提取此信息并将其放入不可见的标签中（比如 linkLabel1）。然后在页面本身中，我将插入`<%linkLabel1.text%>`以将链接路径从数据库插入到适当的区域。

我希望我不会在这里混淆太多东西，并且我解释它的方式是有道理的。

我想做的是设置一种方式，我可以简单地将新行输入到带有链接信息的 SQL 表中，并且网页会自动为我显示新链接。

我想我主要是在寻找要考虑的方法的见解、意见或方向。如果我不清楚，我可以详细说明（如果我不清楚，也不会太令人惊讶）。

提前感谢任何人在这件事上的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:00:07.897

由于您在表格中显示此内容，因此您可以为此使用 GridView。将显示链接的列可以定义为超链接列，如下所示：

```
 <Columns>
        <asp:HyperLinkField
             HeaderText="Header text"
             DataNavigateUrlFields="PropertyContainingTheHRefForTheAnchor"
             DataTextField="PropertyContainingTheTextForTheAnchor"
             />
     </Columns> 
```

例如，如果您返回包含这些列的记录集：

```
TextProperty             PathProperty
See Details              Assets/SomeOther/
Click me                 Products/AnotherPath/ 
```

您的网格会将这些呈现为：

```
<a href="Assets/SomeOther/">See Details</a>
<a href="Products/AnotherPath/">Click me</a> 
```

如果将列定义为：

```
 <Columns>
       <asp:HyperLinkField
             HeaderText="Header text"
             DataNavigateUrlFields="PathProperty"
             DataTextField="TextProperty"
             />
     </Columns> 
```

# javascript - 使用 javascript 为 asp.net web api 表单授权

> ID：10018302
> 
> 赞同：0
> 
> 时间：2012-04-04T19:54:08.950
> 
> 标签：javascript, asp.net-web-api

我想使用 asp.net web api 作为服务层重写业务应用程序，并使用 javascript 调用 web api 并获取数据、显示等。

我了解所有场景都可以正常工作，但主要瓶颈是安全性。我们有用户名和密码的数据库。我们希望该用户输入用户名和密码，使用 web api 进行验证。然后为每个请求传递用户名和密码以检查权限等。如果有的话，保护这种通信的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T03:30:30.033

最好的办法是使用 SSL 实现 HTTPS。您会考虑使用加密算法，但是如果您使用 JavaScript，那么所有内容都会暴露给任何人，这将使客户端上的加密和解密变得毫无意义。

这是一篇很好的博客文章参考，您可以查看有关此事[http://goo.gl/QkZOf](http://goo.gl/QkZOf)

# javascript - 如何在 Canvas 中渲染 SVG 的一部分？

> ID：10018304
> 
> 赞同：6
> 
> 时间：2012-04-04T19:54:11.947
> 
> 标签：javascript, html, canvas, svg

**核心问题：**

目标是将 SVG 的一部分渲染为网页上固定大小的 Canvas 元素。

**我尝试的解决方案：**

看到[CanVG](http://code.google.com/p/canvg/)似乎是在 Canvas 中渲染 SVG 图像的最直接方式，我想我可以利用[viewBox](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)属性在 CanVG 渲染之前裁剪图像。在这一点上我一直有麻烦。

**问题：**

*提供 SVG 图像，如何将图像的一部分渲染到 Canvas 元素？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T02:45:32.730

1.  创建一个屏幕外画布并使用[CanVG](http://code.google.com/p/canvg/)对其进行渲染：

    ```
    var full = document.createElement('canvas');
    full.width=800; full.height=600;
    canvg(full, '<svg>…&lt;/svg>'); 
    ```

2.  使用以下方法将此画布作为图像的一部分复制到另一个画布上的区域[`drawImage`](http://www.w3.org/TR/2dcontext/#dom-context-2d-drawimage)（有关参数详细信息，请参见链接）：

    ```
    var ctx = myVisibleCanvas.getContext('2d');
    ctx.drawImage(full,10,20,80,60,92,16,80,60); 
    ```

**编辑**：但是，如果您可以访问 SVG 源（直接在 JS 中或通过 XMLHTTP 请求）并且可以`viewBox`在渲染之前修改属性，则上述内容不是必需的。请参阅[此演示](http://jsfiddle.net/57Z2j/3/)，它显示了一个 SVG 文件直接渲染到一个画布，然后更改`viewBox`属性并将剪切区域渲染到另一个画布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T02:07:41.150

您遇到的具体问题是什么？context.drawImage 函数内置了一个很好的裁剪功能。您只需将 9 个参数传递给它，而不是标准的 3 个参数（图像对象、x 位置、y 位置），它就会裁剪图像。这些是参数：

```
context.drawImage(
imageObject,
original image x crop position,
original image y crop position,
original image crop width,
original image crop height,
canvas image x crop position,
canvas image y crop position,
canvas image crop width,
canvas image crop height
) 
```

我不知道这是否适用于 CanVG，但只要您可以将图像对象传递给函数 drawImage()，您就可以按照代码中的说明进行裁剪。

# java - 比较 LinkedList 中的 int 和 String

> ID：10018307
> 
> 赞同：1
> 
> 时间：2012-04-04T19:54:15.543
> 
> 标签：java, string, linked-list, compare, int

我有问题。

我正在尝试比较 String 和 int 但似乎无法正常工作。我究竟做错了什么？

从 Eclipse 获取：

> 表达式的类型必须是数组类型，但它解析为 List

```
 int numberOfMoves;
    List<String> highscoreLinkedList = new LinkedList<String>();

    if (moves < Integer.parseInt(highscoreLinkedList[2])){
      highscoreLinkedList[2] = Integer.toString(moves);
      highscoreLinkedList[1] = name;
    } 
```

这是我正在制作的游戏的高分文本文件。索引 2 处的字符串是移动数，而 int 移动也是移动数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:56:57.057

您不能使用`highscoreLinkedList[2]`- 该语法为数组保留访问列表元素。要访问列表，您必须使用该`get()`方法，即`highscoreLinkedList.get(2)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:57:37.383

您试图将列表视为一个数组，但访问元素的唯一方法是通过调用[get()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#get%28int%29)方法。您的代码无法编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T19:59:20.200

`List`s 的工作方式与 Java 中的数组不同。要访问某个元素，您必须使用该`get()`方法，而要获取该元素，您需要使用`set()`，如下所示：

```
// you have highscoreLinkedList[2], it should be:
highscoreLinkedList.get(2);

// you have highscoreLinkedList[2] = ..., it should be:
highscoreLinkedList.set(2, Integer.toString(moves)); 
```

`LinkedList` [您可以在此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html)查看所有方法。

# wpf - WPF 关闭时执行代码

> ID：10018308
> 
> 赞同：27
> 
> 时间：2012-04-04T19:54:15.897
> 
> 标签：wpf, event-handling, execute

我不熟悉使用事件处理程序，我想知道是否有人拥有或可以指导我使用一些代码来显示如何使用将在 Close/Closed 事件上执行代码的事件处理程序？

我知道这是可以做到的，因为这个回答的问题：

[在 WPF 表单上运行代码关闭](https://stackoverflow.com/questions/1374528/run-code-on-wpf-form-close)

但我需要一些方向。

谢谢你=)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-04T20:01:26.790

只是这个 XAML

```
<Window ... Closing="Window_Closing" Closed="Window_Closed">
    ...
</Window> 
```

`Closing`和`Closed`事件的代码

```
private void Window_Closing(object sender, CancelEventArgs e)
{
    ...
}

private void Window_Closed(object sender, EventArgs e)
{
    ....
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-04T20:02:17.607

如果您想从后面的代码中完成这一切，请将其放入您的 windows .cs 文件中

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            this.Closed += new EventHandler(MainWindow_Closed);
        }

        void MainWindow_Closed(object sender, EventArgs e)
        {
            //Put your close code here
        }
    }
} 
```

如果您想参与 xaml 并参与后面的代码，请在 xaml 中执行此操作

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Closed="MainWindow_Closed">
    <Grid>

    </Grid>
</Window> 
```

这在 .cs

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        void MainWindow_Closed(object sender, EventArgs e)
        {
            //Put your close code here
        }
    }
} 
```

以上示例可以应用于 xaml 应用程序中的任何形式。你可以有多种形式。如果您想为整个应用程序退出过程应用代码，请将您的 app.xaml.cs 文件修改为此

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {
        protected override void OnExit(ExitEventArgs e)
        {
            try
            {
                //Put your special code here
            }
            finally
            {
                base.OnExit(e);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T19:59:39.680

您可以像这样覆盖 App.Xaml.cs 中的 OnExit 函数：

```
/// <summary>
/// Interaction logic for App.xaml
/// </summary>
public partial class App : Application
{
    protected override void OnExit(ExitEventArgs e)
    {
        //do your things
        base.OnExit(e);
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-09-13T23:14:43.967

如果您在 Microsoft Visual Studio 上使用 C#，则以下内容对我有用。

在您的 Window.cs 文件中

```
using System;
using System.ComponentModel;
using System.Windows.Forms;

namespace Name_Space
{
    public partial class Window : Form
    {

        public Window()
        {
            InitializeComponent();
           //...
        }

        private void Window_Load(object sender, EventArgs e)
        {
          //...
        }

        private void Window_Closed(object sender, EventArgs e)
        {
            // Your code goes here...!
        }
    }
} 
```

在您的 Window.Designer.cs 文件中，将此行添加到以下方法

```
 ...
        private void InitializeComponent()
        {

            ...

            // 
            // Window
            // 
            ...

            this.Closed += new System.EventHandler(this.Window_Closed); // <-- add this line
         }

    ... 
```

# c++ - c++ std::bind 保持对象存活

> ID：10018309
> 
> 赞同：4
> 
> 时间：2012-04-04T19:54:18.040
> 
> 标签：c++, c++11

这是代码，它非常简单。

```
class Foo
{
public:
    void print()
    {
        std::cout<<"Foo::print\n";
    }
}; 

Game::Game()
{
    {
        Foo foo;
        player.onclick = bind(&Foo::print,foo);

    }
    player.onclick();
} 
```

内部作用域完成后， foo 对象超出作用域，但 print 方法仍然被调用，我猜这是因为 player 持有对 foo 对象的引用？有没有办法阻止这种情况发生？我不希望对象在应该被销毁时保持活动状态并接收事件。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T19:59:26.447

您已绑定到`foo`; 该副本的持续时间与绑定的函数对象一样长，而原始副本`foo`在其范围结束时被销毁。

如果您不想让它保持活动状态，则绑定到指针 ( `&foo`) 或引用 ( `std::ref(foo)`)；然后你必须小心，一旦`foo`超出范围就不要调用函数对象。请注意，无法从函数对象中看出这已经发生了；调用它会给出未定义的行为。

为了在对象被销毁时安全地断开它，您必须安排其析构函数重新分配`onclick`，或者让其他对象负责首先重新分配`onclick`，然后销毁该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:45:52.050

我认为你应该`shared_ptr`在分配`Foo`to时使用`Player`，并保持 a `weak_ptr`to `Foo`in `Player`。然后尝试锁定功能`weak_ptr`，`onclick`看看是否`Foo`还活着。像这样的东西：

```
using namespace std;
class Foo
{
    public:
        void print()
        {
            cout<<"Foo::print\n";
        }
}; 

class Player
{
    public:
        weak_ptr<function<void()>> _onClickFuntion;
        void onclick()
        {
            shared_ptr<function<void()>> tempFunction(_onClickFunction.lock());
            if (tempFunction)
                tempFunction();
        }
}

Game::Game()
{
    {
        Foo foo;
        player._onClickFuntion = shared_ptr<function<void()>>(new bind(&Foo::print,foo));
    }
    player.onclick();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:03:04.807

根据您的描述，听起来您实际上想要一个事件循环。虽然`std::bind`对类似的东西很有用，但它本身并不是一个整体。我建议你看看[boost.signals](http://www.boost.org/libs/signals/)

# mysql - SQL SELECT --> csv 文件

> ID：10018316
> 
> 赞同：0
> 
> 时间：2012-04-04T19:54:57.947
> 
> 标签：mysql, sql

我有以下 SQL 命令，需要将其保存为带有列标题的 csv 文件：

```
mysql > SELECT  a.last_name, a.first_name, username, is_active, graduation
        FROM auth_user a
        INNER JOIN 
            userprofile_userprofile u
            ON a.id = u.user_id
        WHERE a.id>39 AND a.is_active=1 ORDER BY last_name 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:14:16.117

如果我没有犯任何语法错误，这应该有效：

```
SELECT 'LastName', 'FirstName', 'Username', 'IsActive', 'Graduation'
UNION ALL
SELECT a.last_name, a.first_name, username, is_active, graduation
INTO OUTFILE 'yourFile.csv'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
FROM auth_user a
INNER JOIN  userprofile_userprofile u
ON a.id = u.user_id
WHERE a.id>39 AND a.is_active=1
ORDER BY last_name 
```

MySQL 不允许您添加列标题，因此您可以在联合中对它们进行硬编码。

您还可以在[此处](http://dev.mysql.com/doc/refman/5.6/en/select-into.html)`SELECT ... INTO`检查语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T20:03:30.813

似乎 MySQL 本身并不[支持](http://bugs.mysql.com/bug.php?id=34992)在导出中包含列标题的能力。一个简单的谷歌搜索返回了这篇[文章](http://www.youdidwhatwithtsql.com/add-column-headers-mysql-outfile/911)，它使用流编辑将列添加到导出文件。

您可能还想阅读这个[SO 帖子](https://stackoverflow.com/questions/262924/how-to-export-dump-a-mysql-table-into-a-text-file-including-the-field-names-a)（和接受的解决方案），因为它似乎是另一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:02:56.977

你试过用`INTO OUTFILE 'file_name' export_options`吗？

[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T20:01:37.193

您可以简单地使用 BCP 命令，在这种情况下，如果您使用的是 SQL 管理工作室，则必须启用 xp_cmdshell。

这是一个例子

```
DECLARE    @bcpCommand varchar(2000)

SET @bcpCommand = 'bcp "SELECT * FROM users" queryout "c:\dump.csv" -U USERNAME -P PASSWORD -c'

EXEC master..xp_cmdshell @bcpCommand 
```

请注意，csv 文件位于托管数据库的服务器中。

# php - 通过数组索引解析来自 PHP 的 JSON 响应。如何？

> ID：10018319
> 
> 赞同：0
> 
> 时间：2012-04-04T19:55:03.717
> 
> 标签：php, jquery

我想知道通过 HTTP GET 或 POST 请求中的数组索引解析 JSON 响应的最新 JQuery 语法是什么。我的服务器端运行良好，所以我正在寻找解析 PHP 返回的表行的方法。

这是我的服务器端 PHP 代码：

```
 function qry_select_account($pk_account) {

  // Global variables
  Global $db_host, $db_user, $db_pass, $db_name;  

  // Connect to database server
  $dbc = mysql_connect($db_host, $db_user, $db_pass) or die(mysql_error());
  // Select target database
  mysql_select_db($db_name) or die(mysql_error());

  // suchislife801 <--- Selects account information
  // Run query
  $sql_qry = mysql_query("SELECT * FROM tblaccount
                         WHERE pk_account = '$pk_account'") or die(mysql_error());

  // SQL Criteria  AND acc_confirmed = 'y' AND acc_locked = 'n'

  // Fetch table row for this user
  $row = mysql_fetch_row($sql_qry);

  print json_encode($row);

  //echo 'Account: ' . $row[0];
  //echo '<br />';
  //echo 'Passowrd: ' . $row[1];
  //echo '<br />';
  //echo 'Acc Level: ' . $row[2];
  //echo '<br />';
  //echo 'Email: ' . $row[3];
  //echo '<br />';
  //echo 'Language: ' . $row[4];
  //echo '<br />';
  //echo 'Time Zone: ' . $row[5];
  //echo '<br />';
  //echo 'Signup: ' . $row[6];
  //echo '<br />';
  //echo 'Conf Code: ' . $row[7];
  //echo '<br />';
  //echo 'Confirmed: ' . $row[8];
  //echo '<br />';
  //echo 'Locked: ' . $row[9];

  mysql_free_result($sql_qry);

  // Close Connection
  mysql_close($dbc);

  } 
```

这是我的 JQuery 代码，它不起作用。

```
<script type="text/javascript">
$(function(){

    $('#test_btn').live('click', function() {

    $.getJSON("http://localhost/api.php?call=select_account&p0=suchislife801", function(json){
        alert("JSON Data: " + json);

    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-04T20:03:20.490

您可以使用 jQuery.parseJSON( json ) 函数。确保从服务器返回的 json 是有效的 json

[您可以从这里](http://jsonlint.com/)验证 json 响应

使用以下检查服务器是否返回错误

```
 $.getJSON("example.json", function(data) {
  alert(date);
})
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
); 
```

循环通过 json 取决于 json 的类型

如果它是地图类型结构，如下所示

```
var map = { 
  "data1": "value1", 
  "data2": "value2" 
}; 
```

您可以使用以下内容进行迭代

```
$.each(map, function(key, value) { 
  alert(key + ': ' + value); 
}); 
```

参考：[http ://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

# sql - 为什么 sql server 的 datalength 函数会使我的字段长度加倍？

> ID：10018320
> 
> 赞同：3
> 
> 时间：2012-04-04T19:55:11.767
> 
> 标签：sql, sql-server, datalength

我想计算一个 ntext 字段中的字符。[按照 Pinal Dave 的建议，我正在使用 datalength](http://blog.sqlauthority.com/2007/06/20/sql-server-find-length-of-text-field/)。但是这个功能似乎使我正在寻找的价值翻了一番。当我将字段中的值复制到 word 并计算字符时，我得到 1502。但是当我这样做时

```
select datalength(result) from myTable 
```

我得到一个 3004 个字符的值。

为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T20:02:41.453

Unicode 是每个字符两个字节。您的`NText`字段是 Unicode 字符串。 `DataLength()`返回存储字段所需的字节数，`Len()`返回字符数。

From [`Len()`](https://docs.microsoft.com/en-us/sql/t-sql/functions/len-transact-sql): "返回指定字符串表达式的字符数，**不包括尾随空格**。" [`DataLength`](https://docs.microsoft.com/en-us/sql/t-sql/functions/datalength-transact-sql)不排除尾随空格。对于 Unicode 字符串，您可以使用它`DataLength( UnicodeStringExpression ) / DataLength( N'#' )`来获取字符长度。

通常`DataLength( Left( Coalesce( StringExpression, '#' ), 1 ) )`将返回每个字符的字节数，因为[`Coalesce`](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/coalesce-transact-sql?view=sql-server-ver15)返回基于[数据类型优先级](https://docs.microsoft.com/en-us/sql/t-sql/data-types/data-type-precedence-transact-sql?view=sql-server-ver15)的值，其中 Unicode 字符串的优先级高于字节字符串类型（`char`和`varchar`）。

```
declare @Foo as VarChar(10) = 'Foo and ';
declare @Bar as NVarChar(10) = N'Bar and ';

select @Foo as [@Foo],
  Len( @Foo ) as [Len (trimmed)], DataLength( @Foo ) as [DataLength (bytes)],
  DataLength( Left( Coalesce( @Foo, '#' ), 1 ) ) as BytesPerCharacter,
  DataLength( @Foo ) / DataLength( Left( Coalesce( @Foo, '#' ), 1 ) ) as 'Characters';

select @Bar as [@Bar],
  Len( @Bar ) as [Len (trimmed)], DataLength( @Bar ) as [DataLength (bytes)],
  DataLength( Left( Coalesce( @Bar, '#' ), 1 ) ) as BytesPerCharacter,
  DataLength( @Bar ) / DataLength( Left( Coalesce( @Bar, '#' ), 1 ) ) as 'Characters'; 
```

# browser - 如何防止在线匿名调查重复？

> ID：10018322
> 
> 赞同：1
> 
> 时间：2012-04-04T19:55:17.697
> 
> 标签：browser, cookies, duplicates, anonymous, survey

我正在写一个在线调查，我想知道是否有任何好的技术可以让匿名的人去参加调查并参与并防止重复。

我考虑了以下几点，但每个都有缺点：

*   在浏览器中使用 cookie
*   记录 IP 地址
*   将答案与前两种方法中的一种/或前两种方法进行比较

在我考虑过的技术中，您要么阻止多人使用同一设备，要么让用户轻松复制调查结果。希望有人有一个很好的方法来防止这种情况:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:10:52.153

好吧，我不确定您是在考虑故意重复还是意外重复？

*   如果您认为人们会想要发布大量结果来歪曲调查，我无法添加任何内容，因为您提出的任何与身份相关的问题都可能被错误地回答。
*   如果您希望人们无需通过登录过程就可以给出答案，那么询问他们的姓名首字母加生日（ddmmyyyyfl）怎么样 - 这很有可能是独一无二的，而不会真正损害他们的身份或花费太多时间。

那是你所追求的吗？

埃德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-05T09:48:12.560

我目前正在调查类似的情况。

我在网上找到的一些建议是：

1.  您生成一个唯一的 URL - 您可以将其发送到他们的电子邮件（不必存储此电子邮件），然后将校验和添加到 URL 以验证它是否有效。
2.  与上面提到的类似，您向他们提供一个唯一生成的密码，并验证该密码以前是否被使用过。

明显的限制是您需要他们的电子邮件，这有点冗长。但是，电子邮件地址与答案集没有关联。

*   这意味着，您可以验证电子邮件地址是否已用于发送 URL/密码。防止重复使用相同的电子邮件地址。
*   然后，当使用 URL/密码时，您将验证该唯一引用是否已在之前的答案集中使用过。（答案集与唯一参考相关联，而不是与人的电子邮件相关联 - 确保匿名）。

使用电子邮件、身份证号码和出生日期的问题；是所有这些值都可以伪造。
如果使用这种方法，也不要忘记旧的 CAPTCHA，因为可以创建一个脚本来运行组合并提交答案集。

我意识到这是一个旧帖子，但希望它在某些时候对某人有所帮助。一切顺利。

# jquery - Ajax 文件上传脚本在 Safari-Mac 中失败

> ID：10018325
> 
> 赞同：3
> 
> 时间：2012-04-04T19:55:31.280
> 
> 标签：jquery, file-upload, safari

我有一个页面，允许用户在 jquery.form.js 插件的帮助下使用 AJAX 上传 2 个文件。

此过程在任何其他浏览器上运行良好，但当您尝试仅在 Safari/Mac 上（在 SSL 后面）上传第二个文件时会失败。未使用 SSL 的 qa 环境中的同一页面在 Safari 中运行良好！

查看应该上传文件的服务的浏览器日志，我得到一个 500 Internal Server Error 的尝试。

在服务器上调试时，我们发现错误出在 apache 多部分请求解析器中。似乎很难找到图像文件部分。

我找不到有关类似问题的任何信息，非常感谢您的建议。

谢谢！

```
<form id="fileupload-before" method="post" name="fileupload-before" action="/registration/RegImage.do" enctype="multipart/form-data">
<div id="beforeimageBtn" class="bt_uploadPhoto_holder" replace="bt_uploadPhoto_holder">
<input type="file" name="before" id="fileupload-before-field" onchange='getFilenamebefore();'>
</div>
</form>

<form id="fileupload-after" method="post" name="fileupload-after" action="/registration/RegImage.do" enctype="multipart/form-data">
<div class="bt_uploadPhoto_holder" id="afterimageBtn" replace="bt_uploadPhoto_holder" >
    <input type="file" name="after" id="fileupload-after-field" onchange='getFilenameafter();'>
</div>
</form> 
```

（文件输入字段被隐藏（不透明度：0）并由按钮提供。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:00:24.730

确保您拥有：

```
enctype="multipart/form-data" 
```

在你的`<form>`标签中。

# css - 链接和样式标签在 cshtml 中获得 XHTML 警告

> ID：10018332
> 
> 赞同：0
> 
> 时间：2012-04-04T19:55:48.450
> 
> 标签：css, razor

我尝试使用

```
<link href="@Url.Content("~/Content/Extras.css")" 
rel="stylesheet" type="text/css" /> 
```

但收到警告

```
Validation (XHTML 1.0 Transitional): Element 'link' cannot be 
nested within element 'link'. 
```

所以我尝试了

```
<style></style> 
```

并得到了一个非常相似的警告

```
"Validation (XHTML 1.0 Transitional): Element 'style' cannot be 
nested within element 'style'." 
```

我怎样才能符合这个验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:24:19.917

正如 Alirizaadiyahsi 在评论中链接的那样（尽管它已被删除），此警告的原因是`<link>`标签`<style>`可能只出现在文档的头部。

这对我来说是个问题，因为我想为我的 asp.net mvc 3 站点中的某些区域设置自定义样式。为了解决这个问题，我这样做了：

```
<script type="text/javascript">
 var x = document.createElement("link");
 x.setAttribute("href",'@(Url.Content("~/Content/Extras.css"))');
 x.setAttribute("rel", "stylesheet");
 x.setAttribute("type", "text/css");
 $('head')[0].appendChild(x);
</script> 
```

# c# - 查找打印机的默认双面打印选项

> ID：10018336
> 
> 赞同：2
> 
> 时间：2012-04-04T19:56:11.707
> 
> 标签：c#, .net, printing, duplex, printer-properties

对于给定的打印文档`PrintSettings`，该[`Duplex`](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.duplex.aspx)值可能（并且可能）设置为[`Duplex.Default`](http://msdn.microsoft.com/en-us/library/system.drawing.printing.duplex.aspx).

我如何确定这是否意味着所选打印机将或不会进行双面打印？

如何找到已安装打印机支持的行为的默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T22:01:31.873

我不确定您*能否*获得给定打印机的默认值。但是，如果您有创意，您可以获得实际的当前值。但是，如果您想确保您拥有正确的信息，您将不得不了解 DEVMODE 结构。这不是一个简单的操作，需要一些花哨的Win32 fu。这改编自几个来源，但适用于我的（诚然参差不齐的）测试。

```
[DllImport("kernel32.dll")]
static extern bool GlobalFree(IntPtr hMem);

[DllImport("kernel32.dll")]
public static extern IntPtr GlobalLock(IntPtr handle);

[DllImport("kernel32.dll")]
public static extern IntPtr GlobalUnlock(IntPtr handle);

private static short IsPrinterDuplex(string PrinterName)
{
    IntPtr hDevMode;                        // handle to the DEVMODE
    IntPtr pDevMode;                        // pointer to the DEVMODE
    DEVMODE devMode;                        // the actual DEVMODE structure

    PrintDocument pd = new PrintDocument();
    StandardPrintController controller = new StandardPrintController();
    pd.PrintController = controller;

    pd.PrinterSettings.PrinterName = PrinterName;

    // Get a handle to a DEVMODE for the default printer settings
    hDevMode = pd.PrinterSettings.GetHdevmode();

    // Obtain a lock on the handle and get an actual pointer so Windows won't
    // move it around while we're futzing with it
    pDevMode = GlobalLock(hDevMode);

    // Marshal the memory at that pointer into our P/Invoke version of DEVMODE
    devMode = (DEVMODE)Marshal.PtrToStructure(pDevMode, typeof(DEVMODE));

    short duplex = devMode.dmDuplex;

    // Unlock the handle, we're done futzing around with memory
    GlobalUnlock(hDevMode);

    // And to boot, we don't need that DEVMODE anymore, either
    GlobalFree(hDevMode);

    return duplex;
} 
```

我使用了pinvoke.net 中的[DEVMODE 结构](http://pinvoke.net/default.aspx/Structures/DEVMODE.html)定义。请注意，pinvoke.net 上定义的字符集可能需要根据 B0bi 对[原始链接](http://nicholas.piasecki.name/blog/2008/11/programmatically-selecting-complex-printer-options-in-c-shar/)的注释进行一些调整（即，在 DEVMODE 的 StructLayoutAttriute 中设置 CharSet = CharSet.Unicode）。您还需要[DM 枚举](http://pinvoke.net/default.aspx/Enums/DM.html)。并且不要忘记使用 System.Runtime.InteropServices 添加；

您应该能够从这里缩小打印机设置的变化范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:47:45.267

简短的回答？你没有。不管各种设置说什么，实际的打印机可能被设置为始终双面打印作业。

我不完全确定您计划如何将文档合并在一起，但听起来您可以简单地计算页数并选择性地在文档之间插入空白页，以确保每个新文档都从奇数页开始。

这是一个更大的变化，但如果您愿意迁移到 XPS 工作流程，则有一个名为[PageForceFrontSide](http://msdn.microsoft.com/en-us/library/windows/desktop/ms715082%28v=vs.85%29.aspx)的页面级工单项目将保证文档不会被错误地粘在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:01:42.663

也许这将有助于研究这个问题 [http://nicholas.piasecki.name/blog/2008/11/programmatically-selecting-complex-printer-options-in-c-shar/](http://nicholas.piasecki.name/blog/2008/11/programmatically-selecting-complex-printer-options-in-c-shar/)

# facebook - 在 facebook 上点赞是合法的还是非法的？（..和谷歌+？）

> ID：10018339
> 
> 赞同：-1
> 
> 时间：2012-04-04T19:56:25.980
> 
> 标签：facebook, facebook-like, google-plus

只是检查一下我的 GPT 网站，我的用户在 Facebook 上喜欢我的页面而获得报酬是否合法？google+ 也一样（按我的用户按 google+ 按钮付费）？

我像整个 Facebook / Google 一样搜索以找到指南并检查它，但我没有找到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:59:39.593

**只要**站点/应用程序是您自己的，您就可以。

来自：http: [//developers.facebook.com/policy/#integration](http://developers.facebook.com/policy/#integration)

> C。您不得激励用户点赞您自己的网站或应用程序以外的任何主页，并且您提供的任何激励措施必须对喜欢您的主页的新用户和现有用户可用。

至于法律，老实说，如果您给某人钱来执行喜欢您的页面的操作，我真的想不出会违反的单一法律。

# c# - Web 服务的关系？

> ID：10018340
> 
> 赞同：1
> 
> 时间：2012-04-04T19:56:30.170
> 
> 标签：c#, wcf, web-services, rest

好的，我有点困惑这如何与 wcf Web 服务一起工作。

我有

程序（与 ID 关联）
组 (GroupID)
标签 (TagsID)
用户 (UserID)

现在让我们说组与节目相关联，标签也与组相关联，并且与所有这些相关联的用户。

例如 Group **CSharp**与 Program **Computing**和标签**webservice**和**rest**相关联，但 rest 标签也与 Group **asp.net**相关联我如何返回与 rest 关联的所有组？

我有：

IGroupService
IProgrammeService
ItagService
IUsers

如何关联它们并返回属于与标签等相关的组和组的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:04:54.817

不确定我是否理解这个问题。您是否尝试在对服务的一次调用中返回所有这些信息，并想知道对于具有所有这些关系（并且很可能是循环引用）的此类对象图的数据协定是什么？

我可能对最新信息的问题更加困惑，但我会对此进行最后一次尝试。我想更令人困惑的是对“实体”一词的引用。这更像是一个EF问题吗？如果链接是 EF 的问题，我只能假设正在采用代码优先的方法。将组链接到标签的示例如下所示。

```
 public class Group
    {
        public Group()
        {
            Tags = new List<Tag>();
        }
        public string Name { get; set; }
        public List<Tag> Tags { get; set; }
    }

    public class Tag
    {
        public string Name { get; set; }
    } 
```

要使用 Linq 查询具有特定标签的所有组，您可以执行以下操作：

```
 public List<Group> GetGroups(string TagName)
        {
            List<Group> groups = (from g in _program.Groups where 
             (from t in g.Tags where t.Name == TagName select t).Count() > 0 
              select g).ToList();
            return groups;
        } 
```

如果您使用的是 SOAP，您将在客户端中创建一个代理并调用该服务，如下所示：

```
 string tagName = "rest";
        List<Group> groups = proxy.GetGroups(tagName); 
```

如果您正在创建一个 REST API，那么它将是一个简单的 HTTP 请求：

```
http://server/api/GetGroups?tagName=rest 
```

服务将在哪里返回代表组的 XML 或 JSON。

您列出了许多接口，我假设它们包含您的服务的操作和数据合同。您不一定需要按实体分解您的服务，并且可能会混淆将某些操作和数据合同放在哪里。如果服务返回多个实体的信息，您将需要在您的服务中重复数据合同。按实体拆分服务不会带来太多好处，只会让您和服务的任何用户更加困难。

# c - OpenCL 结构参数无效的地址空间

> ID：10018342
> 
> 赞同：7
> 
> 时间：2012-04-04T19:56:35.840
> 
> 标签：c, struct, opencl

我是 OpenCL 的初学者，我正在尝试使以下内核工作。当我运行程序时，我在内核程序的构建过程中遇到错误。更具体的错误如下：

```
Error: Failed to build program executable!
<program source>:19:64: error: invalid address space for argument to __kernel function
__kernel void accelarate_flow(__global const          t_param  params,
                                                               ^ 
```

你可以在这里看到内核。一开始我认为这是因为我没有在内核中定义结构，但即使我添加了它们，问题仍然存在。我在这里做错了什么？

```
const char *accelerate_flow_kernel_source =  
#pragma OPENCL EXTENSION cl_khr_fp64 : enable                                 
typedef struct                                                                
{                                                                             
  int    nx;                                                                  
  int    ny;                                                                  
  int    maxIters;                                                            
  int    reynolds_dim;                                                        
  double density;                                                             
  double accel;                                                               
  double omega;                                                               
} t_param;                                                                    

typedef struct                                                                
{                                                                             
  double speeds[9];                                                           
} t_speed;                                                                    

__kernel void accelarate_flow(__global const          t_param  params,        
                              __global const          int*     obstacles,     
                              __global                t_speed* cells,         
                                       const unsigned int      count)         
{                                                                             
  int pos = get_global_id(0);                                                 
  if(pos >= count || pos % params.nx != 0) return;                            
  double w1,w2;                                                               
  w1 = params.density * params.accel / 9.0;                                   
  w2 = params.density * params.accel / 36.0;                                  
  if(!obstacles[pos] &&                                                       
     (cells[pos].speeds[3] - w1) > 0.0 &&                                     
     (cells[pos].speeds[6] - w2) > 0.0 &&                                     
     (cells[pos].speeds[7] - w2) > 0.0 )                                      
  {                                                                           
    cells[pos].speeds[1] += w1;                                               
    cells[pos].speeds[5] += w2;                                               
    cells[pos].speeds[8] += w2;                                               
    cells[pos].speeds[3] -= w1;                                               
    cells[pos].speeds[6] -= w2;                                               
    cells[pos].speeds[7] -= w2;                                               
  }                                                                           
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:32:37.587

`global`是一个指针限定符（**地址**空间），所以你必须通过`global const t_param* params`.

# wcf - 端到端测试 WCF/.Net 4

> ID：10018345
> 
> 赞同：0
> 
> 时间：2012-04-04T19:57:04.840
> 
> 标签：wcf, testing

我正在寻找一些如何通过 WCF 服务对“SOA 组件”进行端到端测试的最佳实践。

我刚开始帮助一组 .Net 开发人员设置集成测试来测试他们的服务。整个系统分为3个子系统，每个子系统大约有8个组件。

我的目标是通过启动服务（自托管或 IIS 托管，两种变体都存在）来测试一个子系统的服务并进行端到端测试。

他们实际使用 MSTest 编写单元测试。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:53:20.457

使用一些旨在测试 Web 服务的工具怎么样？例如[SOAP 用户界面](http://www.soapui.org/)。它测试服务的方式比在 MSTest 中创建真正的 .NET 客户端要简单得多。使用这样的工具还有另一个优势——测试可以由测试人员创建（你不需要开发人员）。

正如您所提到的，您正在进行集成测试，但您正在为此使用单元测试框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:56:24.220

还有很好的工具[JMeter](http://jmeter.apache.org/)和一些插件。

# python - Python：辅助函数混淆

> ID：10018355
> 
> 赞同：0
> 
> 时间：2012-04-04T19:57:45.940
> 
> 标签：python

对于我的作业的其中一个功能，我应该在下面为这个推荐分数编写一个代码。

但我不知道我应该从哪里开始。有人告诉我要使用辅助函数，但我不知道是什么辅助函数，例如它们的名称

> 推荐分数
> 
> 对于每个人，社交网络中他们当前不是朋友的所有人都是潜在朋友。对于特定的人，每个潜在的朋友都使用以下积分系统进行评分：
> 
> *   对于此人和潜在朋友的每个共同朋友，潜在朋友的得分加 1 分
> *   对于每个人和潜在朋友都属于的网络，给潜在朋友的分数加 1 分
> *   如果此人与通过前两种方法之一或两种方法识别的潜在朋友的姓氏相同，则在潜在朋友的分数上加 1 分

作业的链接位于[http://bit.ly/H9hCia](http://bit.ly/H9hCia)，如果它更容易，它只是基于此我将如何开始它。每个人都告诉我，只要我理解这个描述，我就可以开始它。但这似乎不是这样，当你们阅读它时，你需要更多信息吗？因为我很困惑，所以我决定在这里发帖询问你们的想法。因为我根本无法开始。如果我确实需要进一步解释，我会的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:18:50.527

一些提示。

你有一个社交图谱。“人到朋友”的字典是它的关联表：对于每个节点（人），它显示它连接到哪些节点。

“共同的朋友”显然是两个人在他们的发病名单中。创建一个辅助函数来确定两个给定的人是否是共同的朋友。也许做一个列出给定人的所有共同朋友的函数。

然后，您可以在“人对朋友”（`dict.keys()`是您的朋友）中枚举人员并计算分数。请务必检查您没有将某人的实际朋友包括在潜在朋友中。

要确定两个人是否属于至少一个公共网络，请将网络列表转换为[集合](http://www.linuxtopia.org/online_books/programming_books/python_programming/python_ch16s03.html)并使用集合交集 ( `&`)。

要查找名字和姓氏，请对它们使用[str.split()](http://docs.python.org/library/stdtypes.html#str.split)。

启动交互式 Python 解释器。编写简单的函数，玩弄你的数据。不要试图一次将所有内容都放在脑海中，然后一口气写下来。相反，实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:01:35.033

在你开始考虑编写函数之前。您应该告诉我们您知道什么或不知道什么。你知道什么是[字典](http://docs.python.org/tutorial/datastructures.html#dictionaries)吗？你的项目需要`dictionary`，你知道如何创建变量吗？作为一名学生，我建议您先编写代码本身，然后处理数据（例如加载它们、打印它们、比较它们）。这样做你会更舒服地编写代码。

你应该做的第一件事是学习`dictionary`，弄清楚如何创建一个，如何设置值，获取值等。阅读下面的教程，看看你是否理解字典。如果您不知道如何使用 to be with，那么尝试编写函数是没有意义的`dictionary`。

阅读以下内容`dictionary`： http: [//docs.python.org/library/stdtypes.html#typesmapping](http://docs.python.org/library/stdtypes.html#typesmapping)

阅读以下内容`string`： http: [//docs.python.org/tutorial/introduction.html#strings](http://docs.python.org/tutorial/introduction.html#strings)

阅读本文`for`和`if`其他：[http ://docs.python.org/tutorial/controlflow.html](http://docs.python.org/tutorial/controlflow.html)

完成这三个教程后，您将学习如何创建和`dictionary`使用`string`. 然后你可以考虑如何将你的代码放入函数中，以及如何编写你的程序来解决问题。我们想提供帮助，但我们需要知道您卡在哪里，向我们提供错误消息等信息，或（如何做 xxx）（先尝试 google）。祝你好运。

# c# - 发生“System.StackOverflowException”类型的未处理异常

> ID：10018356
> 
> 赞同：9
> 
> 时间：2012-04-04T19:57:52.283
> 
> 标签：c#, .net, stack-overflow, getter-setter

为什么这个？这是我的代码：

```
public class KPage
{
    public KPage()
    {
       this.Titolo = "example";
    }

    public string Titolo
    {
        get { return Titolo; }
        set { Titolo = value; }
    }
} 
```

我通过构造函数设置数据。所以，我想做一些类似的事情

```
KPage page = new KPage();
Response.Write(page.Titolo); 
```

但我得到那个错误：

```
set { Titolo = value; } 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-04T19:59:28.680

你在这里有一个无限循环：

```
public string Titolo
{
    get { return Titolo; }
    set { Titolo = value; }
} 
```

您在代码中引用的那一刻`Titolo`，getter 或 setter 调用 getter 调用 getter 调用 getter 调用 getter 调用 getter... Bam - `StackOverflowException`。

使用支持字段或使用[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)：

```
public string Titolo
{
    get;
    set;
} 
```

或者：

```
private string titolo;
public string Titolo
{
    get { return titolo; }
    set { titolo = value; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T19:59:55.447

你有一个自引用设置器。您可能打算使用自动属性：

```
public string Titolo
{
    get;
    set;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T19:59:26.003

改成

```
public class KPage
{
    public KPage()
    {
       this.Titolo = "example";
    }

    public string Titolo
    {
        get;
        set;
    }
} 
```

# symfony - 在应用程序中捆绑注册时对服务执行操作

> ID：10018357
> 
> 赞同：0
> 
> 时间：2012-04-04T19:57:52.430
> 
> 标签：symfony, bundles

我想对服务（菜单服务）执行操作，同时捆绑在应用程序中注册自身。Symfony 在每个请求上注册所有包，所以应该有一个选项来执行一些操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T05:07:07.613

不太清楚你的意思，但你可以使用一些内核事件来做一些定制。看看：[http ://symfony.com/doc/current/book/internals.html#kernel-request-event](http://symfony.com/doc/current/book/internals.html#kernel-request-event)

或者，您可以在服务编译期间使用 CompilerPass 执行一些操作。[这是关于编译器 PAS 的解释： http](http://richardmiller.co.uk/2012/02/15/symfony2-service-container-compiler-passes/) ://richardmiller.co.uk/2012/02/15/symfony2-service-container-compiler-passes/

# cxf - 为服务端生成异步接口？

> ID：10018359
> 
> 赞同：0
> 
> 时间：2012-04-04T19:58:12.233
> 
> 标签：cxf

有谁知道 cxf 是否可以生成这样的东西...

```
public void getEnrollment(EnrollRequest req, EnrollCallback cb); 
```

其中 EnrollCallback 有方法

```
EnrollCallback.enrollResponse(EnrollResponse resp); 
```

这样它就可以在幕后使用 nio 并且完全异步？

这将代替它生成的常用方法`public EnrollResponse getEnrollment(EnrollRequest req);`

有没有办法类似地做 REST 异步接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:55:23.833

嗯，我只看到如何为 WSDL 执行此操作，而不是针对普通 REST/xml 或 REST/json POST 和 GET :(

[https://cwiki.apache.org/CXF20DOC/developing-a-consumer.html](https://cwiki.apache.org/CXF20DOC/developing-a-consumer.html)

# java - Java - 无法加密 RDP 文件中的 Windows 远程桌面密码

> ID：10018360
> 
> 赞同：2
> 
> 时间：2012-04-04T19:58:18.250
> 
> 标签：java, windows, remote-desktop, password-encryption

我正在尝试以编程方式在计算机上创建 RDP 文件。我正在从 PROPERTIES 文件中获取用户名和密码，并尝试将`CryptProtectData()`其加密为 vlaid 格式。然后我生成字符串`password 51:b:<encrypted password>`并将其存储在 .RDP 文件中。

当我查看 RDP 文件时，我得到类似于以下内容的输出： `password 51:b:[B@3fd83fd8`

看这里：[http](http://www.remkoweijnen.nl/blog/2007/10/18/how-rdp-passwords-are-encrypted/) ://www.remkoweijnen.nl/blog/2007/10/18/how-rdp-passwords-are-encrypted/ 你可以看到密码的格式不正确。

顺便说一句，为了进行加密，我使用 import:`import com.sun.jna.platform.win32.Crypt32Util;`来访问`Crypt32Util.cryptProtectData(passwordBytes)`，从这段代码可以看出：

```
FileWriter fstream = new FileWriter(rdpFile);
BufferedWriter out = new BufferedWriter(fstream);
out.write("full address:s:"+remoteServerIP);
out.write("\nusername:s:"+username);
byte[] passwordBytes = password.getBytes();
out.write("\npassword 51:b:"+Crypt32Util.cryptProtectData(passwordBytes)); 
```

我将感谢任何可以帮助我正确加密密码的人。

谢谢你。

PS，我用的是Windows XP

编辑：我找到了有关使用 C/C++ 加密的信息，我查看了 wincrypt.h，但我找不到任何有用的信息：http: [//blogs.msdn.com/b/rds/archive/2007/01/22/vista -远程桌面连接-身份验证-faq.aspx](http://blogs.msdn.com/b/rds/archive/2007/01/22/vista-remote-desktop-connection-authentication-faq.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:54:01.650

通过查看您的链接，您似乎缺少将字节数组（将 CryptUtil 应用于密码的结果）转换为十六进制字符串表示的步骤：

```
out.write("\npassword 51:b:"+ ToHexString(Crypt32Util.cryptProtectData(passwordBytes))); 
```

其中 ToHexString(byte[] barray):String 看起来像这样：

```
public static String ToHexString(byte[] bytes) {   
    StringBuilder sb = new StringBuilder();   
    Formatter formatter = new Formatter(sb);   
    for (byte b : bytes) {
        formatter.format("%02x", b);   
    }
    return sb.toString();   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T09:04:53.850

```
 String paasword ="pwd";
    DATA_BLOB pDataIn = new DATA_BLOB(password.getBytes(Charset.forName("UTF-16LE")));
    DATA_BLOB pDataEncrypted = new DATA_BLOB();
    System.out.println(Crypt32.INSTANCE.CryptProtectData(pDataIn, "psw", 
            null, null, null, WinCrypt.CRYPTPROTECT_UI_FORBIDDEN, pDataEncrypted));
   StringBuffer epwsb = new StringBuffer();
   byte[] pwdBytes= new byte [pDataEncrypted.cbData];      
   pwdBytes=pDataEncrypted.getData();
    Formatter formatter = new Formatter(epwsb);
     for ( final byte b : pwdBytes ) {
    formatter.format("%02X", b);
         }
  System.out.println("password 51:b:"+ epwsb.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T08:16:37.747

这是我的工作解决方案（您需要 JNA 平台才能使其正常工作）：

```
 private static String ToHexString(byte[] bytes) {   
        StringBuilder sb = new StringBuilder();   
        Formatter formatter = new Formatter(sb);   
        for (byte b : bytes) {
            formatter.format("%02x", b);   
        }
        formatter.close();
        return sb.toString();   
    }  

    private String cryptRdpPassword(String pass) {
        try {
            return ToHexString(Crypt32Util.cryptProtectData(pass.getBytes("UTF-16LE"), null, 0, "psw", null));
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            return "ERROR";
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T02:39:02.013

我今天才找到解决这个问题的方法。只是因为windows(c++)和java之间的区别就错了。我可以加密密码并将其自动填充到 rdpfile 中，然后登录远程桌面而无需再次填写密码。

# java - 如何用Java设计一个网络爬虫？

> ID：10018363
> 
> 赞同：4
> 
> 时间：2012-04-04T19:58:27.600
> 
> 标签：java, web-scraping, web-crawler

我正在做一个项目，该项目需要用 Java 设计一个网络爬虫，它可以获取用户对特定新闻主题的查询，然后访问不同的新闻网站，然后从这些页面中提取新闻内容并将其存储在一些文件/数据库中。我需要这个来总结整个存储的内容。我是这个领域的新手，所以希望有经验的人提供一些帮助。

现在我有代码从手动获取页面的单个页面中提取新闻内容，但我不知道如何将它集成到网络爬虫中以从不同页面中提取内容。

任何人都可以提供一些很好的 Java 教程或实现的链接，我可以根据需要使用或修改它们吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T20:04:36.023

[http://jsoup.org/](http://jsoup.org/)

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements newsHeadlines = doc.select("#mp-itn b a"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T21:52:38.120

除了其他答案之外，还有一点建议 - 确保您的爬虫尊重`robots.txt`（即不会快速和不分青红皂白地爬取网站），否则您可能会让您自己/您的组织被您想要访问的网站阻止。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T20:10:03.243

以下是一些大多数人会推荐的开源 Java 库，

*   [尼奥基。](http://www.niocchi.com/)
*   [爬虫4j](http://code.google.com/p/crawler4j/)
*   索尔
*   Java 网络爬虫

我个人最喜欢的是 Java Web Crawler，因为它的速度和易于配置。

顺便说一句，如果它不是那么大，对于一项任务，如果您的源网站不经常更改，我建议您实现一个简单的 HTML 解析器。

希望它会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:06:25.803

我建议您在这里查看我的答案：[如何在我的应用程序（网络或控制台）中带来类似谷歌的重新抓取](https://stackoverflow.com/questions/9029822/how-can-i-bring-google-like-recrawling-in-my-applicationweb-or-console/9099798#9099798)和[设计网络爬虫](https://stackoverflow.com/questions/5834808/designing-a-web-crawler/5834890#5834890)

第一个答案是针对 C# 问题提供的，但它实际上是与语言无关的答案，因此它也适用于 Java。查看我在两个答案中提供的链接，有一些很好的阅读材料。我还要说你应该尝试一个已经[存在的java爬虫](https://web.archive.org/web/20130306071304/http://stackoverflow.com:80/questions/2495289/what-is-a-good-java-web-crawler-library)，而不是自己写一个（这不是一个小项目）。

> ... java 中的网络爬虫，可以获取用户对特定新闻主题的查询，然后访问不同的新闻网站，然后从这些页面中提取新闻内容并将其存储在一些文件/数据库中。

这一要求似乎超越了“只是一个爬虫”的范围，进入了机器学习和自然语言处理领域。如果您有一个确定它们为其提供新闻的网站列表，那么您可能能够提取新闻内容。然而，即便如此，您也必须确定网站的哪些部分是新闻，哪些不是（即可能还有链接、广告、评论等）。那么，您在这里究竟面临着什么样的要求？你有新闻网站的列表吗？你有可靠的方法来提取新闻吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T20:39:50.953

当我阅读有关 Web Crawlers 的信息时，我发现[这篇](http://www.andreas-hess.info/programming/webcrawler/index.html)文章非常有帮助。

它提供了开发多线程爬虫的分步指南。

本质上，以下是爬虫应该做什么的一个非常高级的视图

```
- Insert first URL in the queue

Loop until enough documents are gathered:
   - Get first URL from the queue and save the document
   - Extract links from the saved document and insert them in the queue 
```

# linq-to-entities - Linq to Entities 和自定义属性

> ID：10018364
> 
> 赞同：2
> 
> 时间：2012-04-04T19:58:27.693
> 
> 标签：linq-to-entities

我有一个从数据库表生成的实体。然后我使用部分类添加一个属性。这个新属性是一对多关系的“描述”部分。问题是这些实体集有无数和四个属性。

我通常使用类似的东西：

```
db.entity.Select(e => e) 
```

但在这种情况下，因为 NEW 属性不是表的一部分，所以它为空或 null。

我知道我可以这样做：

```
db.entity.Select(e => new entityType { field1 = e.field1, field2 = e.field2, etc….}) 
```

但正如之前所说的……大量的财产。

我的问题是：

**有一些优雅的方法来分配新属性的值并让 Linq 填充其余部分吗？**

就像是：

```
db.entity.Select(e => new entityType { *= e.*, newfield = e.relation.desc}) 
```

当然，这是行不通的，但这是想法。

谢谢！

埃德加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:05:04.430

这是我通常使用的方法。

```
 public partial class EntityName
    {

      public string NewProp 
     {

        get {return this.relation.Desc;}
     }

    } 
```

然后在 linq 查询中，我将执行包含以确保相关属性出现，并且由于延迟加载，我没有得到选择 n + 1。

```
db.entity.Select(e => e).Include(x => x.relation); 
```

# php - 模拟大量使用

> ID：10018365
> 
> 赞同：4
> 
> 时间：2012-04-04T19:58:32.750
> 
> 标签：php, mysql

我正在制作一个在线游戏（希望每小时有成千上万的玩家），它使用了很多对 mysql 数据库的查询。在发布之前，如果我可以模拟大量使用来查看性能，那就太好了。有没有办法做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T20:05:08.710

看`mysqlslap`。它是一个负载模拟器，可让您查看特定查询集或表引擎在高负载条件下的执行情况。

更多信息在这里：[http ://dev.mysql.com/doc/refman/5.1/en/mysqlslap.html](http://dev.mysql.com/doc/refman/5.1/en/mysqlslap.html)

编辑：我刚刚注意到这个工具只适用于 MySQL > 5.1.4。不知道你现在用的是什么版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:04:29.847

如果您可以找出单个查询的服务器处理器和内存使用情况，您可以测试您的应用程序，获取这些结果并将它们乘以您希望查看服务器是否能够负担得起的用户数量。您也可以多次启动您的应用程序，但我认为您的计算机无法处理 100 个应用程序实例。如果您只想检查可以处理多少 SQL 查询，您还可以使用 PHP、ASP 或任何可以计算响应时间的语言创建服务器脚本。您同时在 100 个窗口中运行该脚本，看看会发生什么。

# facebook-graph-api - 如何从喜欢给页面的用户那里获得所有朋友？

> ID：10018383
> 
> 赞同：1
> 
> 时间：2012-04-04T19:59:55.510
> 
> 标签：facebook-graph-api, facebook-fql, fql.multiquery

我怎样才能得到所有喜欢给定页面的朋友，而不需要遍历朋友列表和该朋友的喜欢列表？

哑巴是这样的：

```
friends_like_page = []
for f in friends:
   for l in friends.like:
      if l = page_id:
        friends_like_page.append(f) 
```

但我想知道是否有办法为此构建 FQL 查询。

**推进#2并解决：**

使用@Igy 的建议我可以解决它。我在下面发布了答案。无论如何，我接受了 Igy 的回答，因为是他的想法帮助了我。

**前进#1：**

好的，我现在有这个：

*获取所有朋友：*

```
SELECT uid2 FROM friend WHERE uid1 = me() 
```

*从用户**UID**获取页面粉丝：*

```
SELECT uid, page_id FROM page_fan where uid = UID 
```

*结合*：

```
SELECT uid, page_id FROM page_fan WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

但是，它似乎不能正常工作。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:32:20.560

您无法获得谁喜欢页面的列表，您总是需要从用户开始并返回页面 - 最快的方法可能是在批量查询中检索用户的朋友的喜欢并进行比较一些数组搜索运算符的结果

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T19:40:16.467

所以，经过一整天的战斗，我终于解决了它。正如@Igy 所说，我构建了一个批处理请求，就是这样：

```
curl https://graph.facebook.com \
    -F 'access_token=...' \
    -F 'batch=[
             {"method": "GET",
                "name" : "get-friends",
                "relative_url": "me/friends",
              },
              {"method": "GET",
                "relative_url": "likes/?ids={result=get-friends:$.data.*.id}"
              }
    ]' 
```

# android - 从 Android 向本地 Web 服务器发送 GET http 请求

> ID：10018384
> 
> 赞同：-1
> 
> 时间：2012-04-04T20:00:07.313
> 
> 标签：android, http-get

我正在开发我想将坐标存储到本地数据库（wampserver）的应用程序，所以我已经完成了 php 脚本并且它可以工作，但我的问题是**使用 HTTP GET 方法从我的应用程序执行该 script.php。**

我找到了这段代码，但它不起作用！所以请我需要你的帮助，谢谢！

链接到 HTTP 获取代码 --> : [http://www.softwarepassion.com/android-series-get-post-and-multipart-post-requests/](http://www.softwarepassion.com/android-series-get-post-and-multipart-post-requests/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T20:08:02.063

请更具体。什么不起作用？此代码可用于发出 HTTP GET 请求：

```
HttpClient httpClient = new DefaultHttpClient();  
String url = "http://www.mywebsite.com/script.php";
HttpGet httpGet = new HttpGet(url);
try {
    HttpResponse response = httpClient.execute(httpGet);
    StatusLine statusLine = response.getStatusLine();
    if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
        HttpEntity entity = response.getEntity();
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        entity.writeTo(out);
        out.close();
        String responseStr = out.toString();
        // do something with response 
    } else {
        // handle bad response
    }
} catch (ClientProtocolException e) {
    // handle exception
} catch (IOException e) {
    // handle exception
} 
```

# perl - 我可以使用 XML::Simple 返回已解析的 XML 路径吗？

> ID：10018386
> 
> 赞同：2
> 
> 时间：2012-04-04T20:00:12.807
> 
> 标签：perl, xml-parsing

我有一个具有以下格式的 XML 文件：

```
<testsuite name="Conformance">
 <testsuite name="Manageability">
  <testsuite name="MIBs">
   <testcase internalid="1" name="name1">...</testcase>
   <testcase internalid="2" name="name2">...</testcase>
  </testsuite>
 </testsuite>
</testsuite> 
```

使用 Perl 的[XML::Simple](https://metacpan.org/module/XML%3a%3aSimple)我正在尝试获取测试用例列表及其路径，因此在这种情况下，结果将是：

```
Conformance/Manageability/MIBs
    name1
    name2 
```

我可以用 XML::Simple 做到这一点吗？如果可以，调用会是什么样子？

我当前的脚本：

```
use strict;
use warnings;
use Data::Dumper;
#use XML::Twig;
use XML::Simple;

my $file = 'test.xml';

my $ref = XMLin($file);

print Dumper($ref); 
```

我已经尝试了几件事，但似乎无法得到我需要的东西。解析返回的数据结构以获得我需要的东西是否更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:37:04.783

使用`XML::Simple`? 听听该模块的作者怎么说：

> 但是我建议不要使用 XML::Simple （我应该知道——我写的）。我个人使用 XML::LibXML。

来源：[RE：帮助访问由 XML::Simple 生成的未知数据集](http://code.activestate.com/lists/perl-xml/8971/)

帮自己一个忙，学习正确的方法，这在大多数情况下意味着[`XML::LibXML`](https://metacpan.org/module/XML%3A%3ALibXML)。那是 C 库，它也用于 PHP、Python 和 Ruby。在 UNIX 和 WINDOWS 上编译。便携的。快速地。标准 API。要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T22:16:48.283

递归在这里非常适合。

```
use strict;
use warnings;
use XML::LibXML qw( );

sub visit_testsuite {
   my ($testsuite_node, $parent_path) = @_;

   my $name = $testsuite_node->getAttribute('name');
   my $path = defined($parent_path) ? "$parent_path/$name" : $name;

   my @testcase_nodes = $testsuite_node->findnodes('testcase');
   if (@testcase_nodes) {
      print("$path\n");
      for my $testcase_node (@testcase_nodes) {
         printf("   %s\n", $testcase_node->getAttribute('name'));
      }
      print("\n");
   }

   for my $testsuite_child ($testsuite_node->findnodes('testsuite')) {
      visit_testsuite($testsuite_child, $path);
   }
}

my $doc  = XML::LibXML->load_xml( IO => \*DATA );
my $root = $doc->documentElement();

visit_testsuite($root);

__DATA__ 
```

```
<testsuite name="Conformance">
 <testsuite name="Manageability">
  <testsuite name="MIBs">
   <testcase internalid="1" name="name1">...</testcase>
   <testcase internalid="2" name="name2">...</testcase>
  </testsuite>
 </testsuite>
</testsuite> 
```

根节点真的不应该是一个`testsuite`节点，但它就是你所说的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T07:55:17.897

由于您尝试使用 XML::Twig，因此这里有一个解决方案。当它找到 a 时`testcase`，它会检查它是否是 中的第一个`testsuite`，如果是，则使用元素的祖先打印路径。然后它打印测试用例的名称。

2注意：`testcase`如果没有前一个`testcase`兄弟，则a是第一个，`ancestors`并将元素的祖先从内部（元素父）返回到外部（根），所以在这种情况下我们需要反转列表以按所需顺序获取它们。

瞧：

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

XML::Twig->new( twig_handlers => { testcase => \&test_case })
         ->parse( \*DATA);

sub test_case
  { my( $t, $test_case)= @_;
    if( ! $test_case->prev_sibling( 'testcase'))
      { # first test case, output the "path"
        print join( '/', map { $_->att( 'name') } reverse $test_case->ancestors( 'testsuite')), "\n";
      }
    print "    ", $test_case->att( 'name'),"\n";
  }

__DATA__
<testsuite name="Conformance">
 <testsuite name="Manageability">
  <testsuite name="MIBs">
   <testcase internalid="1" name="name1">...</testcase>
   <testcase internalid="2" name="name2">...</testcase>
  </testsuite>
 </testsuite>
</testsuite> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:27:03.477

`XML::Simple`除了最简单的情况外，几乎在所有情况下都违反了*“让一切尽可能简单，而不是更简单”*。

看起来我第一次误解了你的要求，所以这是另一种方式——但是，我希望它比@ikegami 的解决方案做得更糟，因为它首先找到所有`testcase`节点，然后追溯到它们的父节点。

```
#!/usr/bin/env perl

use strict; use warnings;
use XML::XPath;
use XML::XPath::XMLParser;

my $xp = XML::XPath->new(ioref => \*DATA);

my $nodeset = $xp->find('//testcase');

my %cases;

foreach my $node ($nodeset->get_nodelist) {
    my $current = $node;
    my @parents;

    while (defined(my $parent = $current->getParentNode)) {
        my $name = $parent->getAttribute('name');
        last unless defined $name;
        push @parents, $name;
        $current = $parent;
    }

    my $path = join('/', '', reverse @parents);

    push @{ $cases{ $path } }, $node->getAttribute('name');
}

for my $path (sort keys %cases) {
    print "$path\n";
    for my $case (sort @{ $cases{$path} }) {
        print "\t$case\n";
    }
}

__DATA__
<testsuite name="Conformance">
 <testsuite name="Manageability">
  <testsuite name="MIBs">
   <testcase internalid="1" name="name1">...</testcase>
   <testcase internalid="2" name="name2">...</testcase>
  </testsuite>
 </testsuite>
 <testsuite name="Yabadabadoo">
  <testsuite name="Da da da">
   <testcase internalid="1" name="name1">...</testcase>
   <testcase internalid="2" name="name2">...</testcase>
  </testsuite>
 </testsuite>
</testsuite> 
```

输出：

```
/一致性/可管理性/MIB
        名称1
        名称2
/一致性/Yabadabadoo/哒哒哒
        名称1
        名称2
```

# android - 尝试从 Eclipse 运行 android 应用程序：卡在“堆空间不足”和“无法创建 jvm”之间

> ID：10018387
> 
> 赞同：1
> 
> 时间：2012-04-04T20:00:23.163
> 
> 标签：android, eclipse, heap-memory

我正在尝试从 Eclipse 中启动一个 android 应用程序。如果我的 eclipse.ini 包含

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Xms512m
-Xmx512m 
```

然后我得到“堆空间不足”。如果我将 Xmx 增加到 1024，同时将 Xms 保持在 512，则在启动 Eclipse 时会出现“创建 jvm 失败”。如果我将 Xms 设置为 1024，则 eclipse 无法启动而没有任何错误消息。

我该怎么做才能让它工作？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:13:46.617

首先，您应该指定 Oracle JDK/JVM 的路径，如[http://wiki.eclipse.org/Eclipse.ini中所述](http://wiki.eclipse.org/Eclipse.ini)

# postgresql - 如何快速分析 postgres 数据库

> ID：10018395
> 
> 赞同：3
> 
> 时间：2012-04-04T20:00:55.947
> 
> 标签：postgresql

我有一个 postgres 数据库，我想知道一些快速的统计数据。例如，哪些表占用的空间最多？我不需要任何花哨的东西，命令行就是我所需要的。什么是一个好的工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:19:41.913

你想要的功能在这里：

[http://www.postgresql.org/docs/current/interactive/functions-admin.html#FUNCTIONS-ADMIN-DBSIZE](http://www.postgresql.org/docs/current/interactive/functions-admin.html#FUNCTIONS-ADMIN-DBSIZE)

在空间使用方面查找前 20 个表的快速查询可能如下所示：

```
SELECT oid::regclass, pg_size_pretty(pg_total_relation_size(oid))
  FROM pg_class
  WHERE relkind = 'r'
  ORDER BY pg_total_relation_size(oid) DESC
  LIMIT 20; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T00:30:27.770

在客户端程序 psql 中，“\l”将列出数据库，添加一个“+”以同时显示大小：“\l+”。此外，“\dt+”将为您提供有关特定表大小的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T20:11:01.700

有趣的问题。我认为您可以使用 psql 查询信息。这里有几个指针。

[http://securfox.wordpress.com/2009/09/02/how-to-find-the-postgresql-database-size/](http://securfox.wordpress.com/2009/09/02/how-to-find-the-postgresql-database-size/)和[http://heatware.net/databases/find-postgresql-database-size-using -sql-选择/](http://heatware.net/databases/find-postgresql-database-size-using-sql-select/)。

希望这可以帮助。

谢谢，尚卡尔

# orm - Kohana 3.2：名称中带有下划线的调用模型

> ID：10018396
> 
> 赞同：1
> 
> 时间：2012-04-04T20:00:56.763
> 
> 标签：orm, kohana-orm, kohana-3.2

我有以下模型：以我的数据库 clas_user 中的表命名的 class_user。当我使用以下代码调用此模型时：

```
$class_user = new Model_Class_User(); 
```

它找不到我的模型。在我的模型文件中，该类的命名方式完全相同（Model_Class_User）。

Kohana 不喜欢带下划线的型号名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T03:50:46.193

下划线直接反映应用程序中的文件位置。这意味着您的`Class_User`模型文件应位于 application/classes/model/class/user.php

文件名中不应有下划线。

这里有一些链接可以了解 Kohana 约定和级联文件系统。 [http://kohanaframework.org/3.2/guide/kohana/conventions](http://kohanaframework.org/3.2/guide/kohana/conventions)
[http://kohanaframework.org/3.2/guide/kohana/files](http://kohanaframework.org/3.2/guide/kohana/files)

另请查看[http://kohanaframework.org/3.2/guide/orm/models](http://kohanaframework.org/3.2/guide/orm/models)以了解 ORM。您会立即注意到您需要创建一个`$_table_name`变量，因为您的表有一个非常规的名称。下面提供的示例。

```
class Model_Class_User extends ORM {
    protected $_table_name = 'class_user';
} 
```

# html - 适用于 Windows 和 Mac 的自动播放 CD 上的 HTML

> ID：10018398
> 
> 赞同：4
> 
> 时间：2012-04-04T20:01:01.267
> 
> 标签：html, autorun

我正在为包含视频培训课程的客户制作 CD。我正在用 HTML 和 JavaScript 构建它。我希望它能够在 Windows 和 Mac 上自动播放 index.html 文件。

我了解默认情况下 Windows 7 不会自动播放，但我只是想要一些关于如何使其尽可能无缝的建议。到目前为止，我所做的一切都在 Web 上，而不是在 CD 上。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:13:13.490

Mac OS X（与经典 Mac OS 不同）不支持自动运行风格的行为。

但是，您可以在插入时打开一个卷（CD、磁盘映像等）。可下载的磁盘映像通常会执行此操作，并且通常具有自定义背景映像。

例如，在制作 AOL CD 时，在制作我的磁盘映像（可以是 .ISO、.DMG 等）之后，我在自动构建步骤之后做了类似的事情：

> $ hdiutil mount -readwrite /path/to/disk-image.ISO
> 
> $ bless --folder /Volumes/MyDisc --openfolder /Volumes/MyDisc

*然后我适当地（手动）配置窗口大小和位置以及图标位置。*

> $ /Developer/Tools/SetFile -a V "/Volumes/MyDisc/CD 背景图片.png"
> 
> $ hdiutil 弹出 /Volumes/MyDisc

文件“CD Background Image.png”是磁盘上的一个图形，我使用 SetFile 使其不可见。我认为在 Mac OS X 10.7+ 上执行此操作的命令（如果您没有安装开发人员工具）是：

> chflags hidden "/Volumes/MyDisc/CD Background Image.png"

注意：如果您在刻录之前再次挂载磁盘映像，您很可能会丢失任何已完成的配置，并且需要重复此过程。

如果您的磁盘上只有一个分区（而不是 Mac 一个分区，Windows 一个分区），那么您也需要隐藏 Windows 专用文件，例如“autorun.inf”等。

超越这一点（并且稍微偏离主题）：

您可能希望使用 AppleScript 之类的东西来启动特定大小的浏览器窗口。除此之外，您可能需要考虑使用类似 Mozilla Prism [http://prism.mozillalabs.com/](http://prism.mozillalabs.com/)的东西来获得 HTML 内容部署的流畅体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:11:39.297

对于 Windows，只需创建一个`autorun.inf`从记事本调用的文件，然后将其刻录到磁盘。包括此代码：

```
[autorun]
open=file.html
icon= icon.ico 
```

mac 上没有自动运行，但这将提供一些其他选项：[http ://forums.whirlpool.net.au/archive/1242003](http://forums.whirlpool.net.au/archive/1242003)

# node.js - http.createServer 中的“未捕获异常”

> ID：10018402
> 
> 赞同：2
> 
> 时间：2012-04-04T20:01:13.023
> 
> 标签：node.js

如果错误，我想在请求中 res.end('server error') 。我的代码：

```
http.createServer(function(req,res){
  process.on('uncaughtException', function() {
    res.end('server error')
  })
  handlers(req,res)
}).listen(1337) 
```

我的决定有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T02:37:37.220

您将收到如下错误/警告：

```
(node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.
Trace: 
    at EventEmitter.<anonymous> (events.js:139:15)
    at EventEmitter.<anonymous> (node.js:389:29)
    at Server.<anonymous> (/Users/taf2/work/phonetrac/services/ctm-pool/foo.js:2:11)
    at Server.emit (events.js:70:17)
    at HTTPParser.onIncoming (http.js:1572:12)
    at HTTPParser.parserOnHeadersComplete [as onHeadersComplete] (http.js:91:29)
    at Socket.ondata (http.js:1468:22)
    at TCP.onread (net.js:374:27) 
```

我将假设您正在执行上述操作，因为您注意到当您开始捕获 uncaughtException 时，客户端连接不再被关闭，因此，如果出现错误，客户端连接将永远不会被释放。例如，如果您将 node.js 端点作为客户端请求嵌入到脚本标记中，例如

```
<script src="http://127.0.0.1:1337/yourendpoint.js"></script> 
```

这将挂起您的服务的消费者...希望您使用异步技术嵌入脚本...

无论如何，只要您处理释放事件侦听器，就可以使用您的技术处理错误。

```
function handleError(err) {
  console.error("Caught exception:", err, err.stack);
  this.end();
  this.emit("cleanup");
}

require('http').createServer(function(req, res) {
  var errorHandler = handleError.bind(res)
  process.on("uncaughtException", errorHandler);
  res.on("cleanup", function() { process.removeListener("uncaughtException", errorHandler); });

  this.is.an.error;

  res.end();
  res.emit("cleanup");
}).listen(1337); 
```

尝试一下，我们没有泄漏，我们的错误被处理并且连接被关闭，让我们的客户可以自由地转移到下一个错误：

```
ab -n 100 -c 10 http://127.0.0.1:1337/ 
```

但是，如果您的服务器执行以下复杂操作，此解决方案将在并发下崩溃：

```
function handleError(err) {
  console.error("Caught exception:", err, err.stack);
  this.end();
  this.emit("error:cleanup");
}

require('http').createServer(function(req, res) {
  var errorHandler = handleError.bind(res)
  process.on("uncaughtException", errorHandler);
  res.on("error:cleanup", function() { process.removeListener("uncaughtException", errorHandler); });

  setTimeout(function() {
    this.is.an.error;
    res.end();
    res.emit("cleanup");
  },1000);

}).listen(1337); 
```

这里的问题是所有错误都会触发 uncaughtException 并且它们会重叠。这意味着要捕获这样的全局错误，最好只有一个 process.on("uncaughtException" 处理程序。

相反，在上述情况下，您需要：

*   有一个独立的 try { } catch {} 块——这很难做到。
*   允许异常未被捕获并使进程崩溃，使用 monit 或类似的东西重新启动进程。
*   您可以尝试使用带有 setInternval 清理功能的数组来过滤掉关闭的连接。

以下是使用 setInterval。

```
var connectionIndex = 0;
var connections = [];

function handleError(err) {
  console.error("Caught exception:", err, err.stack);
  connections.forEach(function(conn) {
    conn.end();
  });
}

var server = require('http').createServer(function(req, res) {
  connections.push(res.connection);

  setTimeout(function() {
    this.is.an.error;
    res.end();
  },100);

});

setInterval(function() {
  console.log("conn check: %d", connections.length);
  connections = connections.filter(function(conn) {
    return !conn.destroyed;
  });
},1000);

process.on("uncaughtException", handleError);

server.listen(1337); 
```

我有点喜欢最后一个解决方案，但我敢肯定它可能会咬人，所以使用第二个解决方案有一个监控服务来重新启动你的服务器可能是最好的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T00:09:40.233

```
process.on("uncaughtException", handleError); 
```

# wordpress - 测试 Wordpress `update_option()` 中的错误

> ID：10018411
> 
> 赞同：0
> 
> 时间：2012-04-04T20:02:02.583
> 
> 标签：wordpress, wordpress-theming

对于所有专业的 WP Theme 开发人员，当使用多个时，`update_option()`是否有办法测试是否有任何更新不起作用（无论是通过连接错误还是通过验证），所以它会抛出错误？如果出现错误，是否`update_option()`可以忽略所有先前的代码？

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:18:54.597

如果更新因任何原因失败，update_option() 将返回 false。但是，它也会返回false，当一个选项已经设置为您尝试更新的值时。

因此，您最好先使用 get_option 检查选项是否需要更新或是否存在，然后如果需要更新，请更新它。

如果您的选项未通过验证测试，那么只需中断您正在使用的任何验证功能。您可以抛出 Wp_Error，但这似乎太具有侵略性了。我倾向于使用 add_settings_error 并以这种方式向我的用户显示错误。

要回滚之前的任何 update_option 调用，都需要将之前的值存储在一个数组中，如果需要恢复选项，则需要遍历它们。

通常我使用一个选项表条目来处理诸如主题选项或插件选项之类的事情。没有什么比获得一个污染我的选项表的主题更糟糕的了，每个设置都有一个新选项。

编辑：

以下是我如何处理我的主题选项和插件页面的选项验证。它基于类，因此如果您使用程序方法，则必须换掉一些变量。

```
public function theme_options_validate( $input ) {

    if ($_POST['option_page'] != $this->themename.'_options') {
        add_settings_error($this->themename.'_theme_options', 'badadmin', __('<h3><strong>Smack your hands!</strong></h3> - You don\'t appear to be an admin! Nothing was saved.', $this->textDom), 'error');
        return $input;
    }

    if ( empty($_POST) && !wp_verify_nonce($_POST[$this->themename.'_options'],'theme_options_validate') ) {
        add_settings_error($this->themename.'_theme_options', 'badadmin', __('<h3><strong>Smack your hands!</strong></h3> - You don\'t appear to be an admin! Nothing was saved.', $this->textDom), 'error');
        return $input;
    }

    //begin validation - first get existing options - if any
    $init_themeoptions = get_option( $this->themename.'_theme_options' );
    //create an array to store new options in
    $newInput = array();

    //check to see if the author param has been set
    if($input[$this->shortname.'_meta-author'] !== '') {
        $newInput[$this->shortname.'_meta-author'] =  wp_filter_nohtml_kses( $input[$this->shortname.'_meta-author] );
    }else{
        add_settings_error($this->themename.'_theme_options', 'emptydata', __('Oops - Author cant be empty'.', $this->textDom), 'error');
    }

    //finally we see if any errors have been generated
    if(get_settings_errors($this->themename.'_theme_options')){
        //if there are errors, we return our original theme options if they exist, otherwise we return the input data
        //this clause handles the situation where you have no theme options because its your themes first run
        if($init_themeoptions != false) {
            return $init_themeoptions;
        }else{
            return $input;
        }
    }

    //if there were no errors we return the sanitized $newInput array and indicate successful save of data using settings error class, but 
    //we don't use the error attribute, which isnt all that intuitiive
    add_settings_error($this->themename.'_theme_options', 'updated', __('<em>Success! </em> '.ucfirst($this->themename).' Theme Options updated!', $this->textDom), 'updated');
    return $newInput;
} 
```

要在主题选项 ui 中显示设置错误，请将以下行添加到生成选项表单的位置；

```
settings_errors( $this->themename.'_theme_options' ); 
```

是的，选项表已经存在。我的意思是，不是为每个主题选项在选项表中生成一个新条目，而是将它们全部包装在一个选项条目中。这也使得验证选项数据变得更加容易。

# iphone - UIWebView 没有使用 ARC 释放所有活动字节

> ID：10018418
> 
> 赞同：9
> 
> 时间：2012-04-04T20:02:44.363
> 
> 标签：iphone, ios, memory, ios5, uiwebview

我目前正在使用 ARC 在 iOS 5.1 中构建导航控制器应用程序。我经常需要显示网页，我制作了一个 Web 查看器，它只是一个 UIWebView，两侧有一些自定义内容。当用户完成浏览页面时，他们点击返回按钮，该按钮应该释放与自定义 Web 查看器相关的所有内存。我的问题是按下后退按钮时似乎没有释放所有内存。我已经构建了一个玩具应用程序（[在 github 上](https://github.com/bfruin/WebViewMemory)），它只有几个按钮，每个按钮都有一个调用不同页面的第一响应者。

```
@implementation ViewController
-(IBAction)googlePressed:(id)sender
{
   CustomWebView *customWebView = [[CustomWebView alloc] initWithStringURL:@"http://www.google.com"];
   [self.navigationController pushViewController:customWebView animated:NO];
 }
-(IBAction)ksbwPressed:(id)sender
{
   CustomWebView *customWebView = [[CustomWebView alloc] initWithStringURL:@"http://www.ksbw.com/news/money/Yahoo-laying-off-2-000-workers-in-latest-purge/-/1850/10207484/-/oeyufvz/-/index.html"];
   [self.navigationController pushViewController:customWebView animated:NO];
}
-(IBAction)feedProxyPressed:(id)sender
{
   CustomWebView *customWebView = [[CustomWebView alloc] initWithStringURL:@"http://feedproxy.google.com/~r/spaceheadlines/~3/kbL0jv9rbsg/15159-dallas-tornadoes-satellite-image.html"];
   [self.navigationController pushViewController:customWebView animated:NO];
}
-(IBAction)cnnPressed:(id)sender
{
   CustomWebView *customWebView = [[CustomWebView alloc] initWithStringURL:@"http://www.cnn.com/2012/04/04/us/california-shooting/index.html?eref=rss_mostpopular"];
   [self.navigationController pushViewController:customWebView animated:NO];
} 
```

CustomWebView 只是在 IB 中链接到 UIWebView 属性的 UIWebView

```
@implementation CustomWebView

@synthesize webView, link;

- (id)initWithStringURL:(NSString *) stringURL
{
   if (self = [super init]) {
       link = stringURL;
   } 
   return self;
}

- (void)viewDidLoad
{
   [super viewDidLoad];
   NSURL *url = [NSURL URLWithString:link];
   NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
   [webView loadRequest:urlRequest];
}

- (void)viewDidUnload
{
   [super viewDidUnload];
} 
```

我的问题是我将堆基线设置为加载所有内容后的初始 ViewController。然后我在加载页面后检查堆，然后返回 ViewController 并获得以下堆：

![快照](../Images/6997c3fdc2fb8974828557d8f088cfdc.png)

这表明在每一系列单击按钮并返回 ViewController 之后，即使应该全部释放 CustomWebView，堆也会继续增长。

编辑：

上面描述的示例项目可以[在github上找到](https://github.com/bfruin/WebViewMemory)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T11:37:32.250

我有同样的问题，我发现[了这个小魔法](http://www.codercowboy.com/code-uiwebview-memory-leak-prevention/)

```
/*

 There are several theories and rumors about UIWebView memory leaks, and how
 to properly handle cleaning a UIWebView instance up before deallocation. This
 method implements several of those recommendations.

 #1: Various developers believe UIWebView may not properly throw away child
 objects & views without forcing the UIWebView to load empty content before
 dealloc.

 Source: http://stackoverflow.com/questions/648396/does-uiwebview-leak-memory

 */        
[webView loadHTMLString:@"" baseURL:nil];

/*

 #2: Others claim that UIWebView's will leak if they are loading content
 during dealloc.

 Source: http://stackoverflow.com/questions/6124020/uiwebview-leaking

 */
[webView stopLoading];

/*

 #3: Apple recommends setting the delegate to nil before deallocation:
 "Important: Before releasing an instance of UIWebView for which you have set
 a delegate, you must first set the UIWebView delegate property to nil before
 disposing of the UIWebView instance. This can be done, for example, in the
 dealloc method where you dispose of the UIWebView."

 Source: UIWebViewDelegate class reference    

 */
[webView setDelegate:nil];

/*

 #4: If you're creating multiple child views for any given view, and you're
 trying to deallocate an old child, that child is pointed to by the parent
 view, and won't actually deallocate until that parent view dissapears. This
 call below ensures that you are not creating many child views that will hang
 around until the parent view is deallocated.
 */

[webView removeFromSuperview]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:30:51.483

UIWebView 是一个内存猪，不能很好地释放内存。我在您的 CustomWebView 类中放置了一个 -(void) dealloc 调用，并在按下 Back 按钮时按预期调用。

您可以尝试 [[NSURLCache sharedURLCache] removeAllCachedResponses] 或使用然后释放您自己的 NSURLCache 副本，但坦率地说，UIWebView**永远不会**完全清理自身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T20:27:24.497

我已经使用 ARC 一段时间了，过去我发现 web 视图会保留加载的任何内容，直到它被告知加载其他内容。我解决这个问题的方法是在视图中使用 javascript 调用将（或 Did）dissapear 方法，如下所示：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self.webView loadHTMLString:@"<html></html>" baseURL:nil];
} 
```

这为我释放了记忆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T23:01:28.403

I havent used ARC yet, but looking at your custom webview code, I think your webviews that you created are still alive.

if you want to be sure that your webviews are killed properly, make sure that in the viewWill/DidDisappear, call [webview stopLoading], and nil the webview.

(caution: if you are pushing another view, then also the webview will be killd, so make sure to handle those issues well)

Most often, I have had issues with webViews where even after popping the viewController, a call back to some webView delegate method would crash the app. (I guess ARC prevents it from crashing).

Let me know if this helps.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-12T17:56:34.150

`@interface WebViewViewController : UIViewController<UIWebViewDelegate>`

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSString* urlAddress = @"http://www.google.com";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
self.webView.delegate = self;
[self.webView loadRequest:requestObj];
}

-(void)viewWillDisappear:(BOOL)animated{
[super viewWillDisappear:animated];
[_webView stopLoading];
[_webView loadHTMLString:@"<html><head></head><body></body></html>" baseURL:nil];
[_webView stopLoading];
[_webView removeFromSuperview];
}

- (void)dealloc
{
[_webView stopLoading];
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
[_webView stopLoading];
_webView = nil;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T13:23:00.160

布伦丹几点：

您没有发布足够的代码来确定发生了什么。但是为什么不让控制器拥有一个单一的 UIWebView 而不是在每个按钮按下时创建另一个，只需将一个带有相关 URL 的字符串传递给它呢？这是一种更好的设计模式，可以保证你身边永远不会超过一个。

# linux - WordPress 的 Linux 权限 (LAMP)

> ID：10018425
> 
> 赞同：2
> 
> 时间：2012-04-04T20:03:09.957
> 
> 标签：linux, apache, ubuntu, permissions, lamp

我正在尝试在 /var/www 中配置具有安全权限的 Linux 服务器。我读到您不应该出于各种原因将您的用户帐户添加到 www-data 组。相反，最好（有人告诉我）创建一个单独的开发人员组。

这是我想出的：

```
group add developers
usermod -a -G developers my_account
chown -R root:developers /var/www
find /var/www/ -type d -exec chmod 775 {} \;
find /var/www -type d -print | xargs chmod g+rwxs
find /var/www/ -type f -exec chmod 664 {} \; 
```

另外，编辑 /etc/apache2/envvars 并添加：

```
umask 002 
```

问题：

（一种）。这是相当安全的吗？(b)。这是多余的吗？（C）。此设置是否需要更改默认 umask？如果是这样，对什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:09:54.607

在冗余方面，这些行几乎相互重复：

```
find /var/www/ -type d -exec chmod 775 {} \;
find /var/www -type d -print | xargs chmod g+rwxs 
```

第一个设置所有权限，第二个只是更改组权限。对于这一部分，除了粘性位之外，它设置的所有内容都与第一个相同。

我建议使用前者（因为这绝对设置权限），但修改它以包含粘性位，使用以下任何一种：

```
find /var/www/ -type d -exec chmod 2775 {} \; 
```

或者：

```
find /var/www -type d -print | xargs chmod 2775 
```

它们做的事情完全相同，但第二个效率更高：前者调用`chmod`每个文件，后者调用`chmod`一组文件，因此启动`chmod`频率较低。

在 umask 上，我假设您希望开发人员组具有写访问权限，但文件是否可读？在这种情况下，您需要`umask 002`. 我不知道您的默认 umask 是什么，所以不知道是否需要更改。

# java - 谷歌应用引擎如何处理图像数据？如何操作像素数据？

> ID：10018431
> 
> 赞同：1
> 
> 时间：2012-04-04T20:03:33.987
> 
> 标签：java, google-app-engine, image-processing, signal-processing

我想访问低级像素数据以使用 GAE 完成信号处理算法（消除了 BufferedImages 和 Java.awt.image 类的使用）

您可以通过以下方式访问图像数据：

```
ImagesService imagesService = ImagesServiceFactory.getImagesService();       
Image oldImage = ImagesServiceFactory.makeImageFromBlob(blobKey);
byte[] imageData = oldImage.getImageData(); 
```

所以这里是问题：

彩色图像有 4 个波段 (aRGB)，但是当您获得图像数据时，它是一维字节数组。

1）GAE如何将图像数据存储到字节中？（我想它只是将 2D 数据放入 1D 数组中，它是灰度的吗？）

2）您将如何处理图像的各个色带和像素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T23:55:08.600

在这种情况下，imageData 是整个图像的原始字节，无论图像采用何种格式，包括标题、数据块等。

它不是未压缩格式的像素数据。

# jquery - 用于文本区域的 JQuery Ajax 自动保存

> ID：10018437
> 
> 赞同：0
> 
> 时间：2012-04-04T20:04:01.797
> 
> 标签：jquery, ajax

我已经能够让我的自动保存对输入框和选择框正常工作。我正在尝试对 textareas 使用相同的过程，但它对我不起作用。我不确定是否可以使用相同的过程。我也有 tinymce 作为我的 textareas 的 htmleditor，所以我不确定这是否会导致问题。

这是我的代码示例。我在经典的 ASP 页面中执行此操作。

```
<textarea id="Com<%=QuesID%>" row= "1" cols= "120" name="Com<%=QuesID%>" QuesID=<%=QuesID%> wrap tabindex="21" rows="10" class="formTxt"><%=TempTxt%></textarea> 
```

然后在页面底部：

```
<script>
$(document).ready(function(){
        $('select').live('change',function () {
                 var itemValue = escape($(this).val());
                var itemName = $(this).attr('name');
                var QuesID = $(this).attr('QuesID');
                var typeID = "select";
                //alert(statusVal);
                $.ajax({
                         type: "POST",
                         url: "PAFormAJAX.asp",
                         data: 'itemValue=' + itemValue + '&itemName=' + itemName + '&QuesID=' + QuesID + '&typeID=' + typeID,
                         success: function(msg) {
                             $('#autosavenotify').text(msg);
                         }
              })
          });

          $('input').live('change',function () {
                 var itemValue = escape($(this).val());
                var itemName = $(this).attr('name');
                var QuesID = $(this).attr('QuesID');
                var typeID = "input";
                //alert(statusVal);
                $.ajax({
                         type: "POST",
                         url: "PAFormAJAX.asp",
                         data: 'itemValue=' + itemValue + '&itemName=' + itemName + '&QuesID=' + QuesID + '&typeID=' + typeID,
                         success: function(msg) {
                             $('#autosavenotify').text(msg);
                         }
              })
          });

          $('textarea').live('change',function () {
                var itemValue = escape($(this).val());
                var itemName = $(this).attr('name');
                var QuesID = $(this).attr('QuesID');
                var typeID = "textarea";
                //alert(statusVal);
                $.ajax({
                         type: "POST",
                         url: "PAFormAJAX.asp",
                         data: 'itemValue=' + itemValue + '&itemName=' + itemName + '&QuesID=' + QuesID + '&typeID=' + typeID,
                         success: function(msg) {
                             $('#autosavenotify').text(msg);
                         }
              })
          });

});
</script> 
```

输入和选择框的保存工作正常，所以我将省略 PAFormAjax.asp 代码。我可以像这样使用文本区域自动保存吗？如果没有，您对我需要更改的内容有任何提示吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:09:57.877

尝试使用

```
encodeURIComponent($(this).text()); 
```

用于文本区域

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:23:14.997

*这仅对非常旧的 jQuery 版本有效，请参阅本文末尾。*

`.val()`仅用于输入元素，文本区域使用`.text()`.

这是因为 jQuery 只检查元素的 value 属性，它不用于 textareas：

```
<textarea value="Some text here"></textarea> 
```

那是行不通的，你必须像这样使用它：

```
<textarea>Some text here</textarea> 
```

在非常旧的 jQuery 版本中，val 被简单地定义为这个，它只适用于值（从 jQuery 1.1.1 中提取）：

```
val: function( val ) {
        return val == undefined ?
            ( this.length ? this[0].value : null ) :
            this.attr( "value", val );
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:18:14.160

您是否有理由不选择`serialize`整个表格？并适当地处理处理页面？[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

```
$(document).on('change', function () {
  $.ajax({
    type: "POST",
    url: "PAFormAJAX.asp",
    data: $('form').serialize(),
    success: function(msg) {
        $('#autosavenotify').text(msg);
    }
  });
}, 'select, input, textarea'); 
```

我在粘贴的代码中做了一些假设 - 如果可以的话，替换你需要的并尝试使用比 $(document) 更好的选择器 - 我假设你正在使用 .live 因为你正在使用一个已经以某种方式修改。

# django - 将日期时间分配给 models.DateTimeField 似乎会减少时间

> ID：10018441
> 
> 赞同：0
> 
> 时间：2012-04-04T20:04:25.623
> 
> 标签：django, django-1.3

我正在编写一个单元测试，并注意到我无法在不丢失时间详细信息的情况下将日期时间对象分配给 models.DateTimeField。IE：

```
class Foo(models.Model):
    created = models.DateTimeField(
        editable=False)

my_time = datetime(2012, 01, 02, 1)
print "My Time", Foo.objects.create(created=my_time).created 
```

印刷：

> 我的时间 2012-01-02 00:00:00

但是，如果我这样做

```
print "My Time", Foo.objects.create(created='2012-01-02 01:00:00').created 
```

我得到：

> 我的时间 2012-01-02 01:00:00

将日期时间分配给 models.DateTimeField 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:08:29.970

您正在以正确的方式分配日期时间。

如果你能想出一个可重现的测试用例，那么这是一个错误，你应该在[http://code.djangoproject.com/提交一张票](http://code.djangoproject.com/)

至少，您需要一个完整的`models.py`（包括`import`语句之类的东西）、您需要从默认`settings.py`文件更改的任何设置，以及您可以从说明问题的 python shell 运行的一系列命令。

您使用的数据库可能是相关的——这是一个仅影响 SQLite 或 MySQL 的问题，还是您使用的是第三方数据库适配器？

如果你能把它放在一起，那么一定要发布一个错误报告——你会在那里找到的帮助也将用于解决其他所有人的潜在问题。

# asp.net - 表单按钮自动禁用文本框中的特定字符

> ID：10018444
> 
> 赞同：1
> 
> 时间：2012-04-04T20:04:31.340
> 
> 标签：asp.net, validation

我有一个 .net 表单 (c#)，有几个文本框和一个简单的按钮控件，它在后端运行一个保存过程，将文本框中的任何内容保存到数据库中。这适用于只有受信任用户使用它的内部系统。目前任何盒子都没有验证。

系统可以工作，但如果在页面上的任何文本框中输入任何开始或结束标记字符（“<”或“>”），按钮将自动被禁用。您单击它并没有任何反应（我继续并通过保存按钮上的断点查看它是否甚至被触发，并且没有骰子）

我假设这是网络表单中的某种内置机制，可以防止 sql 注入攻击或其他什么？有没有办法禁用它？

-- 编辑添加相关代码。请注意，我不会深入了解保存按钮的作用，因为它一开始就不会触发。文本框（txtText_Box1）中没有“<”或“>”，它可以正常工作，没有问题。

```
<b>Title</b><br />
        <asp:TextBox ID="txtTitle_Box1" runat="server" Width="600px"></asp:TextBox><br /><br />
        <b>Text</b><br />
        <asp:TextBox ID="txtText_Box1" runat="server" Width="600px" TextMode="MultiLine" Rows="4"></asp:TextBox><br /><br />
        <b>Link To</b><br />
        <asp:TextBox ID="txtLink_Box1" runat="server" Width="600px" /><br /><br />
        <b>Link Text (always ends with >>)</b><br />
        <asp:TextBox ID="txtLinkText_Box1" runat="server" Width="600px" /><br /><br />
        <b>Image</b><br />
        <asp:Image id="imgBox4" runat="server" /><br /><br />
        <br /><br />
        <asp:Button ID="btnSave" runat="server" Text="Save Changes" CssClass="cssButton1" OnClick="btnSave_Click" />

     protected void btnSave_Click(object sender, EventArgs args)
    {

            string sTitle = string.Empty;
            string sText = string.Empty;
            string sURL = string.Empty;
            string sLinkText = string.Empty;

            sTitle = txtTitle_Box1.Text.ToString();
            sText = txtText_Box1.Text.ToString();
            sURL = txtLink_Box1.Text.ToString();
            sLinkText = txtLinkText_Box1.Text.ToString();

            ....

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:58:47.020

经过大量的试验和错误，我将其缩小到只有一个字符会影响按钮。“<”，键盘上的所有其他字符，包括在 sql 注入攻击中最普遍的字符都可以正常工作。我并没有真正“解决”这个问题，但我实施了一种解决方法并输入了一个转义字符。“::”而不是“<”。看起来非常愚蠢，我仍然不知道为什么会这样，但它确实让我克服了我的问题。如果有人有更好的主意，我肯定会要求取消此答案并完全归功于您。

# git - 如何运行 git rebase 交互模式以删除重复提交

> ID：10018447
> 
> 赞同：8
> 
> 时间：2012-04-04T20:04:50.373
> 
> 标签：git, git-rebase, git-interactive-rebase

当我重新提交最近的提交时，我犯了一个错误。（我忘了`git fetch --all`先，然后变基），从那以后我已经提交并推送到远程分支。现在我通过先获取正确地进行了 rebase，解决了冲突，然后推送到远程分支。现在，似乎我最近的所有提交都出现了两次。我想做的是使用 git rebase 交互模式，选择我想要的所有提交，然后正确地 rebase 到提交 sha 代码。

这是这样做的方法吗？如果我开始`git rebase -i`，我应该使用哪个 sha 代码，原始分支点 sha 代码？还是最新的sha代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T21:10:47.080

及时给 git rebase 提交的数量。对于历史上的 10 次提交：

```
git rebase -i HEAD~10 
```

然后只需在显示的文本编辑器中删除要删除的提交的行。保存文件并退出将启动变基，一旦变基完成，被删除的行将不再出现在历史记录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:37:03.373

我成功删除了重复的提交。这是我所做的：硬重置到分支点，从原点拉，启动 git rebase -i SHACODE（原始分支点），选择我想要保留的提交，git rebase 到当前的 SHACODE。

# php - 是否可以“连接”查询的结果？

> ID：10018455
> 
> 赞同：0
> 
> 时间：2012-04-04T20:05:37.677
> 
> 标签：php, mysql, codeigniter

我正在实现基于作者的图书搜索功能。我应该返回一个查询结果，其中包含被查询作者所写的所有书籍。但是，对某些作者姓名的查询可能会返回多个结果（例如，“Smith, W”的查询可能匹配“Smith, Wesson”和“Smith, Will”）。

所以，我的问题是如何“连接”这些不同作者所写的所有书籍。如果我不考虑多个作者匹配查询的可能性，我会这样做（在伪代码中，因为我的真实代码现在非常混乱）：

*   在作者表中搜索作者
*   匹配查询
*   获取作者的authorid
*   在 book table 中搜索具有相同 authorid 的书籍记录

但是，由于可能有多个作者，我有这样的想法：

```
// search author table for authors matching the query

foreach(author_match as am){
  // search book table for book records with authorid=am.authorid
  // Is there such thing as this? :\
  book_results += all the rows returned by previous query
}
return book_results; 
```

我在 PHP（使用 CodeIgniter 框架）和 MySQL 中执行此操作。是否有任何功能/运算符可以让我这样做？是的，我已经尝试过`+=`，即使我对它的期望不高，但输出却很丑陋。

再次，我为伪代码道歉。我会尝试清理我的代码并尽快编辑，但如果在此之前有答案，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:22:28.963

我同意迈克尔的观点，看来您需要 an`INNER JOIN`或`LEFT JOIN`.

你说你正在使用 Codeigniter 所以这里是一个 Codeigniter 特定的例子：

```
$this->db->select('author.*, 
                   book.*');
$this->db->from('authors');
$this->db->join('books', 'books.authorid = authors.id', 'left');
$this->db->where('authors.id', $the_author_id); 
```

另见：

*   [Codeigniter 的 Activerecord 文档](http://codeigniter.com/user_guide/database/active_record.html#select)
*   [关于 SO 的其他 Codeigniter JOIN 问题](https://stackoverflow.com/search?q=codeigniter%20join)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:11:28.113

您可以使用`.=`连接。但是，更有效的是，您可以简单地在 SQL 中指定多个 WHERE 子句，因此您将拥有以下伪代码：

```
search author table for authors matching the query
where = 'with '
foreach(author_match as am){
where += 'authorid=' . am.authorid . ' OR' }
where = substr(where[0,strlen(where)-3)
}
search book table for book records [where clause here]
return book_results 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:10:40.423

也许您可以修改查询以使用 LEFT JOIN。这样，您可以在一个查询中获得多个查询结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T20:07:09.177

要在 PHP 中进行连接，请使用

```
.= 
```

# c# - C# 从 Windows 窗体中的 TabPages 中删除填充

> ID：10018458
> 
> 赞同：2
> 
> 时间：2012-04-04T20:05:48.540
> 
> 标签：c#, .net, winforms, tabcontrol, tabpage

标签页在边框和内部控件之间有一个填充。有没有办法删除这个填充？

这是必要的，因为如果 TabControl 停靠在父容器中，它看起来会很糟糕。

我尝试了一些方法覆盖，但没有奏效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T08:12:03.097

我发现它可以通过以下方式实现`WndProc`：

```
public class TabControl2 : TabControl
{
    protected override void WndProc(ref Message m)
    {
        if (m.Msg == 0x1300 + 40)
        {
            RECT rc = (RECT)m.GetLParam(typeof(RECT));
            rc.Left -= 7;
            rc.Right += 7;
            rc.Top -= 2;
            rc.Bottom += 7;
            Marshal.StructureToPtr(rc, m.LParam, true);
        }
        base.WndProc(ref m);
    }
}

public struct RECT
{
    public int Left, Top, Right, Bottom;
} 
```

# java - android在应用程序启动或带到frontr时启动相机活动

> ID：10018460
> 
> 赞同：0
> 
> 时间：2012-04-04T20:05:58.423
> 
> 标签：java, android, eclipse

当我的应用程序启动或从后台获取时，我需要启动相机活动。如何检测它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:16:27.193

看一下[Android 活动生命周期](http://developer.android.com/reference/android/app/Activity.html)，您将看到覆盖活动中的 onResume 方法，以便它启动相机意图将完成您的需要。

请注意，如果您这样做，您可能最终会遇到这样的情况：每当您的活动恢复并且无法退出您的应用程序时，您将不断启动相机（除非您在启动相机的 onActivityResult 中处理它）

# ruby-on-rails - 使用accepts_nested_attributes_for、has_many 并只创建一个条目

> ID：10018461
> 
> 赞同：4
> 
> 时间：2012-04-04T20:05:59.953
> 
> 标签：ruby-on-rails, associations

我有一个有很多评论的页面。许多用户可以访问此页面并提交评论。我在另一个不公开的页面上查看评论。

### 模型/page.rb

```
class Page < ActiveRecord::Base
  has_many :comments, :dependent => :destroy 
  accepts_nested_attributes_for :comments, :allow_destroy => true
end 
```

### 模型/comment.rb

```
class Comment < ActiveRecord::Base
  belongs_to :page
  belongs_to :user
end 
```

### views/pages/show.html.erb 相关部分

```
<%= form_for @page, :remote => true do |f| %>
    <% f.fields_for :comments do |builder| %>
   <%= builder.text_area :content, :rows => 1 %>
   <%= builder.submit "Submit" %>
    <% end %>
<% end %> 
```

### 控制器/pages_controller.rb

```
def show
  @page = Page.find(params[:id])
end

def update
  @page = Page.find(params[:id])
  @page.comments.build
  @page.update_attributes(params[:page])
end 
```

这里的问题是我不想让用户看到多个评论字段。然而，如果我这样做`<% f.fields_for :comment do |builder| %>`了，它会抛出一个错误，因为它不知道一个评论是什么，而只想处理多个评论。

本质上，用户应该能够在一个页面上提交一条评论，该页面有很多评论，并且自动与页面相关联。作为第二件事，我需要将用户的 id（可通过 Devise 通过 current_user.id 访问）与评论相关联。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T20:28:05.560

```
<% f.fields_for :comments, f.object.comments.build do |fc| %>
  <!-- rest of form -->
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:27:21.190

你可以使用嵌套资源吗？基本上在 routes.rb ...

```
resources :pages do 
  resources :comments 
end 
```

然后在评论控制器中，您可以通过 page_id 或类似的东西找到页面..不要回忆起头顶上的确切语法..

# php - 如何设置送货地址，并在 Magento 的添加到购物车操作中收取运费？

> ID：10018462
> 
> 赞同：0
> 
> 时间：2012-04-04T20:06:01.910
> 
> 标签：php, magento, magento-1.5

我有一些产品只能销往特定地区。所以我添加了一个 javascript 弹出窗口，询问用户他们的运输邮政编码，然后我点击了一个网络服务来确认我可以把这个项目卖给他们。

此外，在购物车页面上，我要求提供运输邮政编码，以便计算正确的运费。

我想如果我已经在向用户询问他们的 zip，我会自动将其设置为 Add to Cart 并为他们提供适当的运费/方法。

我假设我可以简单地扩展购物车控制器的 addAction 来设置 zip 并收集费率，但似乎没有保存 zip，我也无法收集费率。

这是我正在使用的功能：

```
public function addAction()
{
    $cart   = $this->_getCart();
    $params = $this->getRequest()->getParams();
    try {
        if (isset($params['qty'])) {
            $filter = new Zend_Filter_LocalizedToNormalized(
                array('locale' => Mage::app()->getLocale()->getLocaleCode())
            );
            $params['qty'] = $filter->filter($params['qty']);
        }

        $product = $this->_initProduct();
        $related = $this->getRequest()->getParam('related_product');

        /**
         * Check product availability
         */
        if (!$product) {
            $this->_goBack();
            return;
        }

        $cart->addProduct($product, $params);
        if (!empty($related)) {
            $cart->addProductsByIds(explode(',', $related));
        }

        if((isset($params['territory_value_submitted']) && !empty($params['territory_value_submitted']))) {
            $shipping_address = $cart->getQuote()->getShippingAddress();
            $billing_address = $cart->getQuote()->getBillingAddress();

            Mage::log('Current Zip: '.$shipping_address->getPostcode());
            Mage::log('New Zip: '.$params['territory_value_submitted']);

            if($shipping_address->getPostcode() != $params['territory_value_submitted']) {
                $region = '';
                // use web service to lookup coresponding state for this zip code
                $state_lookup_response = file_get_contents(WEB_SERVICE_URL.'?zip='.$params['territory_value_submitted'].'&field=state');
                if($state_lookup_response != '') {
                    $region = $state_lookup_response;
                }

                $shipping_address
                    ->setCountryId('')
                    ->setCity('')
                    ->setPostcode($params['territory_value_submitted'])
                    ->setRegion($region)
                    ->setRegionId('')
                    ->setCollectShippingRates(true)
                    ->save();

                Mage::log('Set Zip: '.$shipping_address->getPostalcode());

                $current_bill_zip = $billing_address->getPostcode();
                if(empty($current_bill_zip)) {
                    $billing_address
                        ->setCountryId('')
                        ->setCity('')
                        ->setPostcode($params['territory_value_submitted'])
                        ->setRegion($region)
                        ->setRegionId('')
                        ->save();
                }

                $ship_method = $shipping_address->getShippingMethod();
                if(empty($ship_method)) {
                    $shipping_address->collectShippingRates();

                    $rates = $shipping_address->getAllShippingRates();
                    Mage::log('Available Rate Count: '.count($rates));

                    //if a free shipping method exists, choose that as the default
                    if($this->_getQuote()->getShippingAddress()->getShippingRateByCode('productmatrix_Free_Shipping') !== false) {
                        $this->_getQuote()->getShippingAddress()->setShippingMethod('productmatrix_Free_Shipping');
                    }
                    //if a standard shipping method exists, choose that as the default
                    elseif($this->_getQuote()->getShippingAddress()->getShippingRateByCode('productmatrix_Standard_Delivery') !== false) {
                        $this->_getQuote()->getShippingAddress()->setShippingMethod('productmatrix_Standard_Delivery');
                    }
                    $shipping_address->save();
                }
                $cart->getQuote()->save();
            }
        }
        $cart->save();

        $this->_getSession()->setCartWasUpdated(true);

        /**
         * @todo remove wishlist observer processAddToCart
         */
        Mage::dispatchEvent('checkout_cart_add_product_complete',
            array('product' => $product, 'request' => $this->getRequest(), 'response' => $this->getResponse())
        );

        if (!$this->_getSession()->getNoCartRedirect(true)) {
            if (!$cart->getQuote()->getHasError()){
                $message = $this->__('%s was added to your shopping cart.', Mage::helper('core')->htmlEscape($product->getName()));
                $this->_getSession()->addSuccess($message);
            }
            $this->_goBack();
        }
    } catch (Mage_Core_Exception $e) {
        if ($this->_getSession()->getUseNotice(true)) {
            $this->_getSession()->addNotice($e->getMessage());
        } else {
            $messages = array_unique(explode("\n", $e->getMessage()));
            foreach ($messages as $message) {
                $this->_getSession()->addError($message);
            }
        }

        $url = $this->_getSession()->getRedirectUrl(true);
        if ($url) {
            $this->getResponse()->setRedirect($url);
        } else {
            $this->_redirectReferer(Mage::helper('checkout/cart')->getCartUrl());
        }
    } catch (Exception $e) {
        $this->_getSession()->addException($e, $this->__('Cannot add the item to shopping cart.'));
        Mage::logException($e);
        $this->_goBack();
    }
} 
```

更奇怪的是，当我在同一个会话中多次运行该过程时，记录的内容会发生变化。

这是将相同产品添加到购物车 3 次的日志，始终使用以下邮政编码`10001`：

```
2012-04-04T19:58:20+00:00 DEBUG (7): Current Zip:
2012-04-04T19:58:20+00:00 DEBUG (7): New Zip: 10001
2012-04-04T19:58:20+00:00 DEBUG (7): Set Zip:
2012-04-04T19:58:20+00:00 DEBUG (7): Available Rate Count: 0
2012-04-04T19:58:36+00:00 DEBUG (7): Current Zip:
2012-04-04T19:58:36+00:00 DEBUG (7): New Zip: 10001
2012-04-04T19:58:36+00:00 DEBUG (7): Set Zip:
2012-04-04T19:58:36+00:00 DEBUG (7): Available Rate Count: 0
2012-04-04T19:59:00+00:00 DEBUG (7): Current Zip: 10001
2012-04-04T19:59:00+00:00 DEBUG (7): New Zip: 10001 
```

请注意，`Set Zip`第二次添加中的 为空，但`Current Zip`第三次添加中的 不是。并且第三次添加不会尝试收集运费，因为新的 zip 与当前的 zip 相同。

有谁知道是什么阻止了数据被正确加载或保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:28:13.453

解决方案是添加我在函数中找到的函数调用`CartController::indexAction`。

`$cart->init();`将购物车的状态设置为 CHECKOUT_STATE_BEGIN 并清除所有关联的地址。所以需要在获取地址对象之前调用它。

如：

```
if((isset($params['territory_value_submitted']) && !empty($params['territory_value_submitted']))) {
        $cart->init();

        $shipping_address = $cart->getQuote()->getShippingAddress();
        $billing_address = $cart->getQuote()->getBillingAddress(); 
```

`$cart->init()`现在，在购物车页面上调用不会清除对地址所做的更改。

此外，如果不为送货地址设置 CountryId，则无法选择正确的送货方式。因为我只在美国境内发货，所以我的所有运输规则都仅限于美国，并且没有找到匹配的规则。

这是通过更改修复的

```
$shipping_address
    ->setCountryId('') 
```

至

```
$shipping_address
    ->setCountryId('US') 
```

# java - 无法遍历列表

> ID：10018463
> 
> 赞同：0
> 
> 时间：2012-04-04T20:06:02.217
> 
> 标签：java

我附加到一个列表，然后将该列表放入下面的函数中：

```
 List<ItemBean> itemList;

        for (Object bean : beans)
        {
            if (!bean.getItem().isActive())
            {
                itemList.add(bean.getItem().getId());
            }
       }

       if (!itemList.isEmpty())
       {
        // Source of Supply List
        buildItemList( request, commonDAO, false );
       }
       else{
           buildItemFilterList( request, commonDAO, itemList);

       } 
```

但我在这里得到“只能迭代数组或 java.lang.Iterable 的实例”错误：

```
 protected final List<ItemBean> buildItemFilterList( HttpServletRequest request,
                                                             CommonDAO dao,
                                                             ItemBean list
                                                            )
    throws Exception
{
    List<ItemBean> itemList = dao.getAllItems( false );
    ItemBean item;

    for (ItemBean s: list )  <<<<<-----ERROR!!!!!!!!!!!
    {
        item = dao.getItemById(s.getId());
        itemList.add(item);
    }

    Collections.sort( itemList );
    request.setAttribute("itemList", itemList);
    return itemList;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:09:24.357

错误是，您的参数“SourceOfSupplyBean list”不是一个集合。

```
protected final List<ItemBean> buildItemFilterList( 
     HttpServletRequest request,
     CommonDAO dao,
     List<ItemBean> list
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:09:42.963

显然，参数 'list' 的类型是 of`ItemBean`并且`ItemBean`不是`Iterable`数组的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:10:42.917

```
protected final List<ItemBean> buildItemFilterList( HttpServletRequest request,
                                                             CommonDAO dao,
                                                             ItemBean list
                                                            )
    throws Exception
{
    List<ItemBean> itemList = dao.getAllItems( false );
    ItemBean item;

    for (ItemBean s: list )  <<<<<-----ERROR!!!!!!!!!!!
    {
        item = dao.getItemById(s.getId());
        itemList.add(item); <<< --real error is here.
    }

    Collections.sort( itemList );
    request.setAttribute("itemList", itemList);
    return itemList;
} 
```

您不能在迭代列表时修改它。

# asp.net - 使用 ASP.NET 验证器进行日期验证

> ID：10018466
> 
> 赞同：0
> 
> 时间：2012-04-04T20:06:17.223
> 
> 标签：asp.net

我正在尝试验证日期是否有效，这意味着它不在未来，并确保其合法日期，即 2012 年 3 月 32 日无效。我目前所拥有的仅用于验证日期是否有效，但在我将来放置日期时它不起作用。如果有人输入像 03/32/2012 这样的日期，我也会遇到问题，它会说它无效，但他们仍然可以单击保存按钮，然后会发生异常。解决此问题的最佳方法是什么。

这是我的代码：

```
<asp:TextBox ID="tbDate" runat="server" Text=""></asp:TextBox>
<asp:Image ID="imgCalendar" runat="server" ImageUrl="~/App_Themes/Sugar2006/images/Calendar_scheduleHS.png" ImageAlign="Middle" />
<asp:CalendarExtender ID="ce" runat="server" TargetControlID ="tbDate" PopupButtonID="imgCalendar" />        
<asp:MaskedEditExtender ID="mex" runat="server" 
                        TargetControlID="tbDate" 
                        Mask="99/99/9999" 
                        MaskType="Date"
                        MessageValidatorTip="true"
                        OnFocusCssClass="MaskedEditFocus"
                        OnInvalidCssClass="MaskedEditError" />
<asp:MaskedEditValidator ID="mev" runat="server" 
                        ControlToValidate="tbDate"
                        ControlExtender="mex" 
                        Display="Dynamic" 
                        InvalidValueMessage="This date is invalid!" Font-Bold="True" 
                        ForeColor="#D50000" />
<asp:RequiredFieldValidator runat="server" ID="DReq"
                        ControlToValidate="tbDate"
                        Display="None"
                        ErrorMessage="A Date is required." ValidationGroup="vgMyGroup"/>
<asp:ValidatorCalloutExtender runat="Server" ID="DReqE"
                        TargetControlID="DReq"
                        HighlightCssClass="validatorCalloutHighlight" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:41:21.407

我已经设置了`ValidationGroup`，`MaskedEditValidator`这解决了我的问题。为了修复不允许未来的日期，我在 .cs 文件中做了以下操作。我所有的问题都已经解决了。谢谢。:)

```
 protected void mev_Init(object sender, EventArgs e) {
        ((MaskedEditValidator)sender).MaximumValue = DateTime.Now.ToString("MM/dd/yyyy");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:17:44.923

您还可以使用[CustomValidator](http://msdn.microsoft.com/en-us/library/9eee01cx.aspx)并指向`ClientValidationFunction`自定义 javascript 函数。

这样的功能看起来像±

函数 validateField(source, args){ args.IsValid = true; }

在javascript中，您可以使用以下内容检查日期是否有效±

```
var timestamp = Date.parse(textBoxValue)

if (isNaN(timestamp)==false)
{
    var d = new Date(timestamp);

} 
```

然后，您可以`d`与当前日期进行比较以检查它是否在未来。

# android - 将 AndEngine 与较旧的构建目标一起使用？

> ID：10018467
> 
> 赞同：0
> 
> 时间：2012-04-04T20:06:24.297
> 
> 标签：android, andengine, game-engine

将 AndEngine 与较旧的构建目标一起使用以尝试支持尽可能多的用户是否可以？

前任。使用构建目标 1.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:11:11.297

较新的 GLES2 版本仅回溯到 2.2+，较旧的 GLES1 版本将支持 1.6+

# c# - .NET 的任务池系统

> ID：10018469
> 
> 赞同：3
> 
> 时间：2012-04-04T20:06:30.187
> 
> 标签：c#, .net, threadpool, task

我目前正在编写一个批量处理算法，用于从磁盘流式传输音频中的音高检测。我已经收紧了我的算法，以便它几乎实时地运行串行流数据。

理想情况下，我希望系统的工作速度比实时快，这样我就可以将实时数据交给它，并且在没有很大延迟后生成音高轨迹数据。

现在让我印象深刻的是数据的串行处理是我可以提供大量加速的地方。我在四核 i7（有 8 个硬件线程）上运行，所以我应该能够通过跨多个块扩展处理来显着提高速度。

目前，我正在执行以下操作：

1.  从磁盘流式传输数据
2.  缓冲数据，直到我有我想要分析的窗口大小。
3.  处理数据窗口。
4.  将数据复制回 n 个样本（其中 n 是我想要滑动的量（在 80 毫秒的窗口中，这可以低至 1 毫秒！）
5.  冲洗并重复。

现在让我感到震惊的是，一旦我有了一个窗口，我就可以轻松地将该数据复制到给定的线程工作缓冲区中（以及提供将结果写入的内存位置）。通过这种方式，我可以有效地缓冲多达 7 个（让线程 8 保持打开以泵送数据）线程池将处理的数据线程。

当我尝试提交第 8 个音频窗口时，我希望池阻塞，直到有线程可用于处理数据等等。我的想法是让 7 个线程不断地处理数据。根据以前的经验，我希望这样做可以提高 5 倍的速度。

过去我在 C++ 下编写了我自己的基于任务的系统，该系统可以完美地完成这项工作，但这个应用程序是在 C# 下开发的。为了在 C++ 下以低开销获得良好的并行性，我花费了大量时间来构建良好的无锁队列机制。

我宁愿希望，在 C# 下，有人会为我减轻痛苦。但是我找不到任何似乎可行的东西。我查看了 System.Threading.ThreadPool ，它似乎无法检查当前有多少线程在运行。更不用说开销似乎令人望而却步。然后出现了一个大问题，即我无法重新使用现有的预分配结构（这在我的处理中很重要），这迫使我每次提交工作项时都重新创建它。这有一个巨大的缺点，那就是我生成工作的速度比我处理它的速度要快，所以我最终不仅浪费了大量的时间来设置我真的不需要的结构和工作空间，而且我的内存使用也失控了。

然后我发现了 System.Threading.Tasks 但这似乎也没有提供我所追求的功能。

我想我可以通过互操作使用我的 C++ 任务管理器，但我真的认为在这个时代已经有人设置了类似的东西。所以我错过了什么吗？或者任何人都可以向我提供这样一个任务管理引擎的链接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:13:22.420

[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)专为您要解决的任务而设计和实现！您也可以通过管道处理此过程。

所以你必须确保：

*   您可以在 .NET Framework 4.X 上运行
*   你熟悉[Pipelines 设计模式](http://msdn.microsoft.com/en-us/library/ff963548.aspx)
*   您熟悉 .NET Framework 4 [BlockingCollecition 类](http://msdn.microsoft.com/en-us/library/dd267312.aspx)（BlockingQueue 实现，特别是为了简化[生产者消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)的解决）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T20:33:00.880

好吧，在这些情况下，我建议使用[ZeroMQ](http://www.zeromq.org)。它可以让你很容易地控制消费者的数量。

至于您的便签本区域，首先，0.5GB 在当今时代并不是很多内存。我认为我的手机有更多的内存，更不用说我的桌面了......如果你想真正轻松地减少内存消耗，只需为每个线程创建一个暂存区，将它们全部放在一个池中并让生产者获得在排队任务之前的便签本区域，附加任务的该区域。当消费者完成后，将便签本区域返回到池中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:42:20.500

我会在这里使用 Task Parallel 数据流库。它旨在允许创建可以链接在一起的进程块，并显式控制并行度和阻塞语义。

# r - makePSOCKCluster useXDR 参数详细信息 - R 2.15

> ID：10018470
> 
> 赞同：0
> 
> 时间：2012-04-04T20:06:38.813
> 
> 标签：r

R 2.15 发行说明和 makePSOCKCluster 的文档指出，如果 useXDR = FALSE，通信会更好，但只有在所有节点都是 little-endian 时才能使用该设置。

1.  文档是否意味着集群中的所有节点和主节点（创建集群并在该集群上进行调用的实例）必须具有相同的字节序？

2.  当所有节点都在同一个操作系统上运行时，useXDR = FALSE 的实际含义是否适用，但在混合模式环境（即某些 Linux，某些 Windows）中不合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:10:40.143

1.  组成集群的所有计算机。信息在主节点和所有节点之间进行序列化，因此字节顺序很重要。
2.  在多个操作系统上会很好。计算机是大端还是小端是由硬件决定的，而不是由软件决定的。大多数计算机都是小端的（Sun 服务器不是）。

# spring - 使用 throws 建议将未知异常包装到自定义异常中

> ID：10018472
> 
> 赞同：0
> 
> 时间：2012-04-04T20:06:42.120
> 
> 标签：spring, aop

是否可以将异常包装到 throwsAdvice 中的自定义异常中并抛出此自定义异常？例如，我有一个 A 类，其方法称为 func()。这个 func() 抛出不同的异常。我在这个函数上应用了 throws 建议，我将所有这些异常包装到 MyOwnException 类中，然后返回 MyOwnException。

这个可以吗，求指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:33:21.927

我对 Spring 了解不多，但是使用**AspectJ**（也可在 Spring 应用程序中使用），您可以使用`after() throwing`切入点来捕获异常并将其包装到 RuntimeException 中。

或者，更好的是，您使用称为**异常软化**的语言功能，请参阅[http://www.eclipse.org/aspectj/doc/next/progguide/semantics-declare.html#softened-exceptions](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-declare.html#softened-exceptions)和[http://www.eclipse .org/aspectj/doc/next/adk15notebook/declare-soft.html](http://www.eclipse.org/aspectj/doc/next/adk15notebook/declare-soft.html)。

# c# - 从组合框选择中显示多条信息？

> ID：10018474
> 
> 赞同：2
> 
> 时间：2012-04-04T20:06:51.590
> 
> 标签：c#, combobox, textbox, selectedindex

我正在为学校制定一个计划。它是一个包含两个选项卡的 C# GUI。

在第一个选项卡上，用户可以输入有关新银行帐户的信息，例如：姓名、帐户 ID、年龄和帐户余额。还有一个按钮可以将用户名放在第二个选项卡上的组合框中。所以第二个选项卡包含组合框和几个文本框：姓名、ID、年龄和余额。

我面临的问题是，当我从组合框中选择一个名称时，它不会填充所有文本框。我想出了名称文本框，因为我是从组合框中直接拉出来的。但我不知道如何填充其他文本框：id、age 和 balance。这是我到目前为止所拥有的...

```
 class BankAccount
    {
        //attributes
        private string accountID;
        private string customerName;
        private int customerAge;
        private double balance;
        private const double DEFAULT_BALANCE = 500.00;

        //construct
        public BankAccount()
        {
        }

        public BankAccount(string anID, string aName, int anAge, double aBalance)
        {
            accountID = anID;
            customerName = aName;
            customerAge = anAge;
            balance = aBalance;
        }

        public BankAccount(string anID, string aName, int anAge)
        {
            accountID = anID;
            customerName = aName;
            customerAge = anAge;
            balance = DEFAULT_BALANCE;
        }

        //accessors
        public void SetID(string anID)
        {
            accountID = anID;
        }

        public void SetName(string aName)
        {
            customerName = aName;
        }

        public void SetAge(int anAge)
        {
            customerAge = anAge;
        }

        public void SetBalance(double aBalance)
        {
            balance = aBalance;
        }

        public string GetID()
        {
            return accountID;
        }

        public string GetName()
        {
            return customerName;
        }

        public int GetAge()
        {
            return customerAge;
        }

        public double GetBalance()
        {
            return balance;
        }

and this is the form

   public partial class Form1 : Form
    {
        ArrayList account = new ArrayList();

        public Form1()
        {
            InitializeComponent();
        }

        private void btnAddAccount_Click(object sender, EventArgs e)
        {
            BankAccount aBankAccount = new BankAccount(txtAccountID.Text, txtName.Text,
                int.Parse(txtAge.Text), double.Parse(txtBalance.Text));

            account.Add(aBankAccount);
            AddToComboBox();
            ClearText();

        }

        private void AddToComboBox()
        {
            cboAccount.Items.Clear();
            foreach (BankAccount person in account)
            {
                cboAccount.Items.Add(person.GetName());

            }

        }
        private void ClearText()
        {
            txtName.Clear();
            txtAccountID.Clear();
            txtBalance.Clear();
            txtAge.Clear();
            txtAccountID.Focus();

        }

        private void cboAccount_SelectedIndexChanged(object sender, EventArgs e)
        {

            txtNameTab2.Text = cboAccount.SelectedItem.ToString();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:34:15.610

既然你说这是家庭作业，我会尽量指导你而不是给出代码。

您需要检查[ComboBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)的以下属性：

> 1.  [价值会员](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)
> 2.  [显示成员](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)
> 3.  [数据源](http://msdn.microsoft.com/en-us/library/x8160f6f.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:35:07.367

你可以很简单地做到这一点。首先，您需要`ToString()`在您的`BankAccount`类中覆盖，您可以通过将此方法添加到类中来实现：

```
public override string ToString() {
    return self.CustomerName;
} 
```

然后将`BankAccount`对象添加为`BankAccount`对象（而不是将其 GetName() 值添加为字符串）：

```
private void AddToComboBox()
{
    cboAccount.Items.Clear();
    foreach (BankAccount person in account)
    {
        //cboAccount.Items.Add(person.GetName());
        cboAccount.Items.Add(person);
    }
} 
```

现在，`cboAccount.SelectedItem`将引用 type 的对象`BankAccount`，您可以根据需要直接访问其其余属性。ComboBox 使用`ToString()`其集合中任何对象的方法`Items`来确定要在框中为该对象显示什么文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:26:11.817

你想有一个`List<BankAccount>`存储每个人

所以在你的主要形式做这样的事情

```
Private List<BankAccount> account = new List<BankAccount>() 
```

我也可能会更改方法以获取属性信息，因为它们更合适地显示信息。

```
 //construct
public BankAccount()
{
}

public BankAccount(string anID, string aName, int anAge, double aBalance)
{
    AccountID = anID;
    CustomerName = aName;
    CustomerAge = anAge;
    if (abalance == 0)
    {
      Balance = DEFAULT_BALANCE;
    }
    else {
      Balance = aBalance;
    }
}

private string _CustomerName;
public string CustomerName
{
  get {
    retrun _CustomerName;
  }
  set {
   _CustomerName = value;
  }

private string _AccountID;
public string AccountID
{
  get {
    retrun _AccountID;
  }
  set {
   _AccountID= value;
  }

private string _CustomerAge;
public string CustomerAge
{
  get {
    retrun _CustomerAge;
  }
  set {
   _CustomerAge= value;
  }

private string _Balance;
public string Balance
{
  get {
    retrun _Balance;
  }
  set {
   _Balance= value;
  } 
```

我要做属性的原因是，这基本上就是您对方法所做的事情，但是您必须创建其他方法来设置和获取它们，这些方法内置于属性中。

在主窗体中

```
private void btnAddAccount_Click(object sender, EventArgs e)
{
    BankAccount aBankAccount = new BankAccount(txtAccountID.Text, txtName.Text,
        int.Parse(txtAge.Text), double.Parse(txtBalance.Text));

    account.Add(aBankAccount);
    AddToComboBox();
    ClearText();
}

private void cboAccount_SelectedIndexChanged(object sender, EventArgs e)
{
    txtNameTab2.Text = account[cboAccount.SelectedIndex].CustomerName;
    txtAgeTab2.Text = account[cboAccount.SelectedIndex].CustomerAge;
    txtIDTab2.Text = account[cboAccount.SelectedIndex].AccountID;
    txtBalanceTab2.Text = account[cboAccount.SelectedIndex].Balance;
} 
```

它要么是选定的索引，要么是 selectedIndecies，我现在不记得了。

# django - 在 Django 之外加载和渲染模板

> ID：10018475
> 
> 赞同：3
> 
> 时间：2012-04-04T20:06:55.977
> 
> 标签：django, django-templates

使用[本指南作为参考](http://www.soyoucode.com/2011/set-variable-django-template)，我为 Django 模板编写了一个集合标记解析器，该模板将适用于 TWIG 的集合语法，即：

```
{% set someVar %} variableAssignment {% endset %} 
```

我只将 Django 用于它的模板系统，直到此时我已经能够通过正确的导入来正确显示我的模板。这是我目前的代码：

```
from django.template import Context, Template, Library, Node, TemplateSyntaxError, Variable, VariableDoesNotExist, resolve_variable
from django.template.loader import *
from django.conf import settings
settings.configure(TEMPLATE_DIRS="/my/templates")
register = Library()
class SetValueNode(Node):
    def __init__(self, variable, nodelist):
        self.variable = variable
        self.nodelist = nodelist
    def render(self, context):
        context[self.variable] = self.nodelist.render(context)
        return ""

@register.tag(name="set")
def set_tag(parser, token):
    print "set_tag called: parser",parser," token",token
    nodelist = parser.parse(("endset",))
    parser.delete_first_token()
    return SetValueNode(arg, nodelist)

def sendServiceEmail(username, first, last, service, service_tuple):
    TEMPLATES_DIR = "/my/templates/"
    emailStr = "myemail.html.twig"
    print "Opening file :"+TEMPLATES_DIR+emailStr
    t = Template(fp.read())
    fp.close()
    c = Context({
            /*Add context from parameters*/
        })
    msg = t.render(c)
    print msg 
```

但我得到的错误是：

```
django.template.base.TemplateSyntaxError: 'set_tag' is not a valid tag library: Template library set_tag not found, tried django.templatetags.set_tag 
```

在做了一些研究并考虑了一段时间后，django 正在寻找的库似乎是“标准”库。我认为我需要告诉某人（django 设置、模板或 .render）我希望他们使用“库”并检查库以查看模板标签是否已注册。有没有办法在不创建 django 应用程序的情况下将此信息传递给 Django？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T13:05:52.823

*以下信息适用于 Django 1.4* 您有三个选项。

### 应用解决方案

您需要创建一个具有定义结构的应用程序，但它不必是一个完整的 django 应用程序。假设你叫它`myapp`

这是强制性的文件结构

```
myapp/
  __init__.py
  templatetags/
    __init__.py
    your_library.py 
```

在您的主脚本中执行以下操作

```
from django.conf import settings
from django.template.loader import get_template

# You need to configure Django a bit
settings.configure(
    # Access to template tags
    INSTALLED_APPS=('myapp', ),
    # Access to templates
    TEMPLATE_DIRS=(TEMPLATES_DIR, ),
)

template = get_template("myemail.html.twig")
# Prepare context ....
return t.render(context) 
```

### 模块解决方案

如果您不愿意使用这么大的结构，应该可以只创建一个带有模板标签的模块并将其传递给`django.template.base.add_to_builtins`方法，请参阅[https://github.com/django/django/blob/master/django/template /base.py#L1349](https://github.com/django/django/blob/master/django/template/base.py#L1349)。

### 完全不同的东西

或者您可能会考虑使用 jinja2 [http://jinja.pocoo.org/docs/](http://jinja.pocoo.org/docs/)，但我不知道标签在那里工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-09T20:35:51.463

感谢@zimma 的精彩提示。我想提供一个模块加载选项的完整示例。

假设您有这个重要的模板标签要从 read.py 添加

```
from django import template

register = template.Library()

@register.filter(name='bracewrap')
def bracewrap(value):
    return "{" + value + "}" 
```

这是 html 模板文件“temp.html”：

```
{{var|bracewrap}} 
```

最后，这是一个 Python 脚本，它将把所有的东西联系在一起

```
import django
from django.conf import settings
from django.template import Template, Context
import os

#load your tags
from django.template.loader import get_template
django.template.base.add_to_builtins("read")

# You need to configure Django a bit
settings.configure(
    TEMPLATE_DIRS=(os.path.dirname(os.path.realpath(__file__)), ),
)

#or it could be in python
#t = Template('My name is {{ my_name }}.')
c = Context({'var': 'stackoverflow.com rox'})

template = get_template("temp.html")
# Prepare context ....
print template.render(c) 
```

输出将是

```
{stackoverflow.com rox} 
```

# css - MVC3 Web 应用程序 - IIS7 Windows Server 2008 R2 - CSS 问题

> ID：10018479
> 
> 赞同：0
> 
> 时间：2012-04-04T20:07:31.950
> 
> 标签：css, asp.net-mvc-3, c#-4.0, iis-7, windows-server-2008-r2

我正在使用 Visual Studio 2010 Ultimate 开发 MVC3 Web 应用程序。

在我的电脑上使用 IISExpress 进行开发期间，使用 IE8 和 Chrome 查看时，一切看起来都应该如此。

[http://localhost:7442/](http://localhost:7442/)

昨天我使用 IIS7 部署到了 Windows Server 2008 R2 环境。

当我通过 IE8 查看服务器上的 Web 应用程序时，一切看起来都正常。

[http://localhost:8080](http://localhost:8080)

当我在 IE8 中从我的电脑远程查看 Web 应用程序时，似乎某些 css 被搞砸了。文本位置倾斜，某些颜色混乱等。

[http://[服务器名]:8080](http://[servername]:8080)

但是当我使用 Chrome 从我的电脑远程查看网络应用程序时，一切看起来都很好......

[http://[服务器名]:8080](http://[servername]:8080)

知道使用相同文件的相同站点在不同环境中使用相同浏览器的外观如何不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:54:40.450

关闭（或打开）兼容性视图（假设它在 Chrome 中工作，那么我会考虑）。默认情况下，IE 会为本地网络上的站点设置兼容性视图。

正如您所提到的，您也可以在浏览器设置中打开/关闭此功能，但如果您希望它始终默认为标准模式，那么您需要使用 x-ua-compatibile 元标记，或设置 x-ua -global.asax 中的兼容头文件

# function - 函数（文件）名称冲突警告

> ID：10018481
> 
> 赞同：1
> 
> 时间：2012-04-04T20:07:42.050
> 
> 标签：function, matlab, collision

有没有办法让 MATLAB 提醒开发人员或警告用户特定函数 m-file 的*多个*冲突（相同名称）版本存在于当前存在的不同目录中`path`？这对于大型协作 MATLAB 项目很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:28:20.610

如果您有一个特定的函数名称，您需要检查是否已经存在具有该名称的任何函数，您可以使用函数[WHICH](http://www.mathworks.com/help/techdoc/ref/which.html)。例如，如果我将一个新的函数文件添加`test.m`到我的当前目录 ( `C:\Program Files\MATLAB\R2010b\bin\`)，那么这就是 WHICH 告诉我的：

```
>> which test -all
C:\Program Files\MATLAB\R2010b\bin\test.m
C:\Program Files\MATLAB\R2010b\toolbox\stats\stats\@classregtree\test.m  % classregtree method
C:\Users\user\Documents\MATLAB\test.m                                    % Shadowed 
```

现在调用了三个函数`test`：一个是`classregtree`对象的类方法，一个是我刚刚创建的函数（顶行），最后一个（底行）现在被我刚刚创建的那个遮住了。这意味着，如果我`test`从当前目录调用，将调用第一个目录。如果我切换到另一个目录，我会得到这个：

```
>> which test -all
C:\Users\user\Documents\MATLAB\test.m
C:\Program Files\MATLAB\R2010b\toolbox\stats\stats\@classregtree\test.m  % classregtree method 
```

较新的`test`函数现在没有显示，因为以前的目录没有保存在[MATLAB path](http://www.mathworks.com/help/techdoc/matlab_env/br7ppws-1.html)上。先前被遮蔽的`test`函数现在将被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T13:01:16.730

如果您想检查路径中所有可能的冲突，您可以使用File Exchange 中的[此功能](https://www.mathworks.com/matlabcentral/fileexchange/66874-ondrejtichacek-name-collisions)。

示例用法：

```
>> [~, collisions] = name_collisions;
Found the following duplicate names:

 25 x    Contents.m
  2 x    complex2interleaved.m
  2 x    demosinit.m
  2 x    exported_values.mat
  2 x    gcGuiReport.mat
  2 x    header.m
  2 x    interleaved2complex.m
  2 x    ltfatdiditfail.m
  2 x    mexinit.m
  2 x    octinit.m
  2 x    ref_spreadadj_1.m
  2 x    signalsinit.m
  2 x    startup.m
  2 x    testinginit.m 
```

它还返回一个包含碰撞文件路径的结构。

```
>> disp(collisions)
  51×1 struct array with fields:

    name
    folder
    date
    bytes
    isdir
    datenum 
```

# javascript - 使用 JS 在 Rails 视图中预览图像

> ID：10018486
> 
> 赞同：0
> 
> 时间：2012-04-04T20:08:03.403
> 
> 标签：javascript, ruby-on-rails, image, view, erb

我有一个 text_field 是图像的 url，我想将它加载到 img 标记中。我还想在 image_url 文本框失去焦点时更新图像，以便他们可以更改 url 并查看预览。

这是视图的相关 erb：

```
 <div class="control-group">
    <%= f.label :image, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :image_url, :class => 'text_field', id: "image_url" %>
    </div>
  </div>

  Preview: <img id="preview" src=""> 
```

和嵌入式js ...

```
<script type="text/javascript">

document.observe('dom:loaded', function() {
  $('preview').src = $('image_url').text
  $('image_url').bind("focusout",function(){
    $('preview').src = this.text
    )}

}); 
```

在加载时我什么也没有得到，并且 src 没有改变

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:14:55.087

您需要指定要查找的对象的选择器。我也会使用准备好的文件。

```
$(document).ready(function() {
  $('#preview').src = $('#image_url').text();
  $('#image_url').bind("focusout",function(){
    $('#preview').src = this.text();
  });
}); 
```

# javascript - Javascript history.pushState

> ID：10018487
> 
> 赞同：2
> 
> 时间：2012-04-04T20:08:06.537
> 
> 标签：javascript, jquery, history

我通过stackoverflow找到了history.pushState()的例子，但我不明白每件事是做什么的。这就是我所拥有的

```
var stateObj = {
    foo: "bar"
};
history.pushStates(stateObj, "page 2", "page2.html"); 
```

那么任何人都可以解释 stateObj 持有什么以及这个脚本中的“第 2 页”是什么？为什么对象有 foo:"bar"？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T20:14:52.187

此链接可能有用：

[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)

在示例中，第一个参数`stateObj`是一个任意上下文对象，包含您想要的任何内容。当用户访问不同的页面，然后使用浏览器的“后退”按钮导航回您的页面时，就会访问它。在那里查看`popState`活动以获取更多信息。

第二个参数当前未使用；建议在这里传递空字符串。

最后一个参数是与上下文对象关联的 URL。它不会改变当前页面的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:12:00.923

[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState().C2.A0method](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState().C2.A0method)

# wcf - 可以有多个 Dispatcher.BeginInvoke 吗？

> ID：10018488
> 
> 赞同：0
> 
> 时间：2012-04-04T20:08:11.980
> 
> 标签：wcf, silverlight, binding, wcf-binding

我只是 silverlight 和 WCF 的初学者。我看到了 Miguel A. Castro 撰写的一篇非常好的文章“http://www.netfxharmonics.com/2008/11/Understanding-WCF-Services-in-Silverlight-2”，它教授手动添加 WCF。

在示例中，它使用 Dispatcher.BeginInvoke 将服务返回的文本写入 silverlight UI 中的文本块。

```
 AsyncCallback asyncCallBack = delegate(IAsyncResult result)
        {
            List<Person> person = ((IPersonService_list)result.AsyncState).EndGetPersonData(result);
            this.Dispatcher.BeginInvoke(delegate
            {
                spMain.Children.Add(new TextBlock
                {
                    Text = person[0].FirstName + person[0].LastName + person[0].City + person[0].State
                });

            });
        }; 
```

我需要使用相同的服务填充多个控件。似乎我不允许在 BeginInvoke 方法中调用另一个函数。拥有多个 BeginInvoke 方法的最佳方法是什么？会不会消耗很多资源？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T01:08:43.690

一种可行的方法：`UIElement`根据 WCF 服务调用的结果构建一个完整的封闭结构，然后使用一次调用`Dispatcher.BeginInvoke`并将结构添加到`spMain` `UIElement`. 例如：

```
StackPanel sp = new StackPanel();
TextBlock tb1 = new TextBlock({
    Text=person[0].FirstName + person[0].LastName
});
sp.Children.Add(tb1);
TextBlock tb2 = new TextBlock({Text="AND SO ON Use this pattern to add UIElements to the stackpanel."});

sp.Children.add(tb2);

//now - add the StackPanel which holds other UIElements to spMain.

this.Dispatcher.BeginInvoke(delegate(){
    spMain.Children.Add( sp );
}); 
```

# html - 响应式布局：保持侧边栏可访问的最佳方法

> ID：10018489
> 
> 赞同：0
> 
> 时间：2012-04-04T20:08:19.117
> 
> 标签：html, css, blogs, responsive-design

我有一个有两列布局的网站，我猜有几十个。我目前正在将网站转换为具有响应式布局，而我最常看到的是侧边栏只是被抑制了，只显示了主要内容。

这看起来不错，但我想有一些方法来保持侧边栏可以访问。我可以想到几个替代方案：

*   只需将侧边栏放在内容的底部：很容易做到，但我发现这很痛苦。目前尚不清楚内容是否存在，您必须一直向下滚动才能真正找到它
*   放置某种固定的“选项卡”，您可以单击它，它会滑动打开侧边栏，可以再次关闭它。虽然这似乎最有用，但我还没有看到任何这样的例子？

您处理此类事情的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:17:50.287

Luke Wroblewski 的这篇文章概述了一些最常见的响应式布局模式：[http ://www.lukew.com/ff/entry.asp?1514](http://www.lukew.com/ff/entry.asp?1514)

您所描述的侧边栏滑到主要内容下方的布局无疑是最常见的方法。我听到你在说它在下面并不明显，但根据我的经验，用户会滚动。

如果您担心，Luke 的文章列出了显示导航的方法以及一些替代方法。特别是您可能对他描述的“画布外”模式感兴趣，大多数人都熟悉 Facebook 应用程序，您单击导航链接，它会从屏幕外滑入。

# sql - vfp 在命令窗口中查询比编译快得多

> ID：10018494
> 
> 赞同：0
> 
> 时间：2012-04-04T20:08:34.570
> 
> 标签：sql, tsql, query-optimization, visual-foxpro, command-window

这是我的查询：

```
SELECT solGroup,;
       SUM(IIF((;
                SELECT COUNT(*) FROM cgift c2;
                    WHERE c2.solgroup != c1.solgroup AND c1.donor == c2.donor;
                ) > 0;
           ,1,0));
        countgaveother;
    FROM cgift c1;
    GROUP BY solGroup 
```

cGift 是一个包含记录列表的游标。

```
autonumber...donor....solGroup
1............10.......a
2............11.......a
3............10.......b
4............15.......b
5............10.......c
6............15.......c
7............11.......d
8............11.......d
9............16.......d 
```

查询生成以下内容

```
solGroup.."count of donors who have records with a different solgroup as well as this one"
a..........2
b..........2
c..........2
d..........1 
```

cGift 中有大约 80k 条记录（还有更多此处未使用的字段）。从 vfp 命令窗口运行此查询（加上创建光标的查询）需要 3 秒，从已编译的表单中运行需要 30 分钟。

任何人都知道为什么性能差异如此之大？通常，命令窗口的执行与我编译的表单非常相似。其他查询也以这种形式运行得很好。

光标是用`select ... into cursor cGift`. 它是由捐赠者订购的，尽管删除它不会改变任何事情。

我在 VFP 9 sp2 上。有谁知道怎么加速？

编辑：好的，让我总结一下，看看其他人是否有任何想法。
我创建了一个带有`select into ... cursor cGift`.
然后我在所述游标上运行上述查询。
它在命令窗口中很快，但在从表单运行时非常慢。
游标和查询的代码完全相同。
我不知道我的表单中的环境设置是开/关/wtvr，因为它是一个非常大的程序的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:15:31.383

应用程序与命令窗口有什么不同？以下是一些可能性：

*   SET ANSI 和/或 SET EXACT
*   设置已删除
*   可用的索引集（如果您实际上正在处理不同的表）
*   代码页和/或排序规则

可能还有其他一些，但我的猜测是其中的一个或多个。

添马舰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:58:02.970

我同意这可能与您的命令框环境与执行程序的环境有关。我会将表的 SHARED/EXCLUSIVE 状态和/或 SET('EXCLUSIVE') 的设置添加到要检查的事项列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:46:59.273

好的，我不知道这两个环境有什么不同，但是我通过更改查询并将查询分成两部分来加快查询速度（如果查询在拆分后运行得更快，则 sql 引擎有问题......）

```
SELECT *;
    FROM cgift;
    LEFT JOIN;
         (select donor donor2, count(distinct solgroup) activesols from cGift group by donor);
    b ON cgift.donor = b.donor2 INTO CURSOR cgift 
```

然后我计算 activesol > 1

合并这些会使一切变得非常缓慢。

# github - 每次提交（更改）后在 Jenkins 中自动运行测试

> ID：10018496
> 
> 赞同：5
> 
> 时间：2012-04-04T20:08:39.850
> 
> 标签：github, jenkins, githooks

我使用詹金斯，我希望我的测试在每次提交后自动运行。

我按照以下链接中的说明进行操作：

[http://blog.cloudbees.com/2012/01/better-integration-between-jenkins-and.html](http://blog.cloudbees.com/2012/01/better-integration-between-jenkins-and.html)

我单击了让 Jenkins 在全局配置/ Githup Web Hook 中自动管理挂钩 URL，并添加了我的 githup 用户名和密码，但在更改并推送到 repo 之后，我的测试没有运行！

Github Hook Log：轮询尚未运行。

有什么我忘记了吗？

PS 我可以手动运行我的测试（点击立即构建），当我构建我的测试时我可以看到我的提交（更改）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:34:58.750

我会首先检查 Jenkins 是否真的设置了 post-receive URL。转到 github.com/YOURNAME/REPO/admin/hooks 并打开*Post-Receive URLs*

如果没有，您可以按照上面的说明自行安装挂钩。

如果 github.com 中有钩子，请尝试单击*Test Hook*按钮。它触发了构建吗？

如果构建仍然无法正常工作，请检查 github 和您的 Jenkins 之间是否有防火墙，这可能会阻止 github.com 连接到您的 jenkins。

有关调试 github 钩子的更多信息，请参见[http://help.github.com/post-receive-hooks/](http://help.github.com/post-receive-hooks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T10:42:13.870

我有同样的问题要解决，我添加一个 Poll SCM Builds Triggers 并安排它每 2 分钟 H/2 * * * *

# ajax - 如何使用 AJAX 或 JSF 刷新部分页面？

> ID：10018497
> 
> 赞同：1
> 
> 时间：2012-04-04T20:08:53.900
> 
> 标签：ajax, jsf

如何使用 Primefaces 和 Ajax（或不使用）逐部分呈现 xhtml 页面。其他一切正常，当用户按下复选框时，会显示消息，但用户名内容永远不会更新。在这种情况下如何刷新面板网格？我是 AJAX 的新手，从今天开始 :)

```
<h:outputLabel value="Do you want to create username?" for="description" />
    <p:selectBooleanCheckbox value="#{testController.selectedNew.asUser}">  
    <p:ajax update="msg" listener="#{testController.selectedNew.addMessage()}"/>
    <p:ajax update="usernamecontent"/> ------> **This is not working!**
    </p:selectBooleanCheckbox>  

    <h:panelGrid columns="2" id="usernamecontent" rendered="#{testController.selected.asUser}">
    <h:outputLabel value="#{bundle.CreateUserLabel_userUsername}" for="username" />
    <p:inputText id="username" value="#{testController.selectedNew.userUsername.username}" title="#{bundle.CreateUsersTitle_username}" required="true" requiredMessage="#{bundle.CreateUserRequiredMessage_username}"/>

    <h:outputLabel value="#{bundle.CreateUsersLabel_password}" for="password" />
    <p:inputText id="password" value="#{testController.selectedNew.userUsername.password}" title="#{bundle.CreateUserTitle_password}" required="true" requiredMessage="#{bundle.CreateUserRequiredMessage_password}"/>
    </h:panelGrid> 
```

谢谢萨米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:11:34.460

您的`usernamecontent`组件本身在服务器端有条件地呈现。为了能够对组件进行 ajax 更新，您需要确保始终呈现有问题的组件，因为最终需要在客户端更新它的是 JavaScript。

您需要将它包装在另一个始终呈现的组件中，以便 JavaScript 始终可以访问它以更新内容。

```
<h:panelGroup id="usernamecontent">
    <h:panelGrid columns="2" rendered="#{testController.selected.asUser}">
        ...
    </h:panelGrid>
</h:panelGroup> 
```

# c# - 将控制级别（视图）验证错误返回到视图模型

> ID：10018500
> 
> 赞同：0
> 
> 时间：2012-04-04T20:09:09.287
> 
> 标签：c#, wpf, validation, mvvm

我有一个自定义控件，它绑定到视图模型中的对象。该控件有它自己的“迷你视图模型”（实现了 raiseproperychanged 和 idataerrorinfo），它的代码用于某些特定的验证。

此控件内部使用了一些属性，可能导致控件处于无效状态（这些属性是控件固有的，并不代表我们绑定到的模型的属性）。如何让这些验证错误“冒泡”，以便绑定到此控件的属性显示为具有验证错误？

举一个更清楚的例子。假设我有一个绑定到自定义用户控件的人员属性的人员对象。此控件将允许您编辑人员的子属性等。除了通常应用于人员对象的验证之外，此控件中还有其他验证，例如在用户关闭控件创建的对话框或单击指示他们已完成编辑的复选框之前，控件“无效”。我希望将这些验证错误传播出去，以便与 person 属性的绑定显示验证错误，或者更具体地说，显示包含它的 VM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:15:16.633

你搞错了——控件在 ViewModel 上设置值（通过绑定），ViewModel 验证每个字段并通过 IDataErrorInfo 提供错误消息。有关更多信息，请参阅：[http ://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/)

# eclipse - 和杰斯一起数数

> ID：10018502
> 
> 赞同：0
> 
> 时间：2012-04-04T20:09:15.460
> 
> 标签：eclipse, jess

我对 JESS 很陌生，我已经定义了许多关于学生的事实

```
(deffacts myStudents
(student (Name Ruba) (AVG 81))
(student (Name Lolo) (AVG 80))
(student (Name Koko) (AVG 75))
(student (Name Soso) (AVG 85))
(student (Name dodo) (AVG 64))
(student (Name popo) (AVG 25))
(student (Name qoqo) (AVG 91))
(student (Name wowo) (AVG 60))
(student (Name eoeo) (AVG 13))) 
```

我需要计算成功的学生和失败的学生（如果 AVG >=60 那么他是成功的）
但是我不能通过计数来创建一个变量来保持他的价值
请任何帮助？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:21:24.607

您可以通过累积 CE 实现这一目标。

# networking - MAMP PRO：通过不同的 PC/设备访问虚拟主机

> ID：10018515
> 
> 赞同：2
> 
> 时间：2012-04-04T20:10:07.657
> 
> 标签：networking, mamp, virtualhost

我是虚拟主机的新手，但我已经成功地使用 MAMP PRO 在我的 Macbook Pro 上设置了一个。

当我在 MAMP PRO 界面中设置虚拟主机的 IP/端口选项时，我可以通过在我的 Internet 连接中的任何设备中键入相同的 IP 来访问它。但是，在我自己的 Mac 以外的设备上，没有任何媒体显示。只是简单的 HTML。

我假设这是因为设备无法访问我 Mac 上的文件。虚拟主机的目录设置在单独分区上的文件夹中。我不确定是否将其存储在 OSX 的分区上会有所不同（如有必要，我可以更改存储位置）。

我怎样才能让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:45:09.530

如果您使用 IP 地址访问该框，您确定您使用的是虚拟主机吗？我假设在这种情况下您使用的是 IP/端口组合？

您的媒体在哪里 - 我假设它*不在*端口 80 上，这是另一个端口上的主机？

文件/权限/分区应该没问题，因为您可以从本地主机访问它。

我怀疑正在发生的事情——假设你正在使用相同的 IP 地址和不同的端口做虚拟主机——是你的 Mac 的防火墙阻止了对该端口的访问。您是否将媒体文件设置为从端口 80 以外的端口（或您提供 HTML 文件的端口？）在这种情况下，只需打开防火墙上的端口，它应该可以工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:19:07.560

你没有提供很多细节来帮助你。

你有没有忘记点击“上线”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T13:50:42.220

如果您在没有媒体、样式、javascript 的情况下访问 HTML，那是因为您需要为它们替换路径。您可以`http://localhost/images/image.jpg`在本地机器上设置这样的路径，但通过网络从另一台机器无法访问。`localhost`您可以使用服务器 ip 地址替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T21:10:51.640

您是否检查了媒体文件夹的权限？确保包含您的媒体及其内容的文件夹具有“所有人”的读取权限。如果显示裸 HTML（假设它与您的媒体位于同一文件夹中），则不是连接问题。

当您在另一台计算机上打开页面时，您还可以检查媒体文件是否给您错误 4xx 或 5xx 错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T04:27:43.777

您必须对其进行测试，可能有很多原因。

首先，尝试在另一台机器上单独打开 CSS/Javascript 文件，如果没问题，那不是你的问题。

第二次尝试安装 View Dependencies Firefox 扩展并使用它浏览。

最后，检查您的防火墙配置。Apache 不会自行过滤内容。

# php - 无法在 php yii 框架中创建记录

> ID：10018516
> 
> 赞同：1
> 
> 时间：2012-04-04T20:10:13.060
> 
> 标签：php, forms, validation, frameworks, yii

大家好，我正在使用 php 和 Yii 框架创建一个网站。现在我已经创建了一个管理模块并在这个模块中创建了 crud，但似乎我无法创建记录。我现在得到的是：

```
 public function actionCreate()
    {
        $model=new GamesValidator;

        // Uncomment the following line if AJAX validation is needed
        $this->performAjaxValidation($model);
        /*
        if(isset($_POST['ajax']) && $_POST['ajax']==='games-form')
        {
            echo CActiveForm::validate($model);
            Yii::app()->end();
        }
        */
        if(isset($_POST['GamesForm']))
        {
            die('GamesForm is set'); // just to see if GamesForm has some value! but website never shows this massege, it shows just new form, which is my problem.
/*
            $model->attributes=$_POST['GamesForm'];
            if($model->validate()){
                echo ('This is only a test');
                return;
            } else {
                echo ('There was some error!');
                return;
            }
*/
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    } 
```

但它没有显示任何内容，网站再次显示 form.php，就像什么都没做一样。这是我的视图文件中的一些代码：

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'games-form',
    'enableAjaxValidation'=>true
)); ?>

<p class="note">Fields with <span class="required">*</span> are required.</p>

<?php echo $form->errorSummary($model); ?>
[..........................]

<div class="row buttons">
    <?php echo CHtml::submitButton('Submit'); ?>
</div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

抱歉，我无法发布完整的代码，它太长了。

所以你能告诉我有什么问题吗？以及如何检查验证模型是否有错误？

**编辑**

显示出问题的地方！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:07:02.373

`$model->save()`很简单，您的方法中缺少`create()`：-

```
// you'll have to remove the die() of course, otherwise the rest of the code won't be executed
if($model->validate()){
        echo ('This is only a test');
        // the next line is important to save records, we are passing false because validation is already done
        $model->save(false);
        return;
    } else {
        echo ('There was some error!');
        return;
    } 
```

阅读更多关于[CActiveRecord](http://www.yiiframework.com/doc/api/1.1/CActiveRecord "http://www.yiiframework.com/doc/api/1.1/CActiveRecord")中的方法。

**编辑**：

要查看应用程序中的更改，您需要为新创建的记录创建一个视图。在 yii 自动生成的代码（使用 gii）中，它是通过 CDetailView 完成的。您可以将模型的实例传递给此视图。

# sql - 加入不存在行或条件匹配的地方...？

> ID：10018517
> 
> 赞同：5
> 
> 时间：2012-04-04T20:10:18.363
> 
> 标签：sql, sql-server, sql-server-2008, database-design

我正在尝试编写一个查询来告诉我哪些订单具有有效的促销代码。促销代码仅在特定日期和**可选**的特定套餐之间有效。

我什至无法解释这是如何工作的（请参阅下面的伪代码），但基本上如果有与促销代码相关联的包，那么订单必须具有这些包之一并且在有效的日期范围内，否则它只需要在有效的日期范围内。

整个“如果 PrmoPackage 行存在”的事情真的让我失望，我觉得我应该能够在没有一大堆`Union`s 的情况下做到这一点。（我什至不确定这是否会让它更容易......）

有人对查询有任何想法吗？

```
if `OrderPromoCode` = `PromoCode`

    then if `OrderTimestamp` is between `PromoStartTimestamp` and `PromoEndTimestamp`

        then if `PromoCode` has packages associated with it
            //yes
                then if `PackageID` is one of the specified packages
                    //yes
                        code is valid
                    //no
                        invalid
            //no
                code is valid 
```

命令：

```
OrderID* | OrderTimestamp | PackageID | OrderPromoCode
1        | 1/2/11         | 1         | ABC
2        | 1/3/11         | 2         | ABC
3        | 3/2/11         | 2         | DEF
4        | 4/2/11         | 3         | GHI 
```

促销：

```
PromoCode* | PromoStartTimestamp* | PromoEndTimestamp*
ABC        | 1/1/11               | 2/1/11
ABC        | 3/1/11               | 4/1/11
DEF        | 1/1/11               | 1/11/13
GHI        | 1/1/11               | 1/11/13 
```

促销包：

```
PromoCode* | PromoStartTimestamp* | PromoEndTimestamp* | PackageID*
ABC        | 1/1/11               | 2/1/11             | 1
ABC        | 1/1/11               | 2/1/11             | 3
GHI        | 1/1/11               | 1/11/13            | 1 
```

期望的结果：

```
OrderID | IsPromoCodeValid
1       | 1
2       | 0
3       | 1
4       | 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:26:44.980

啊....我认为有几种方法可以做到：

这是一个有点混乱的方法，它使用了几个左外连接、一个 group by 和一个 case 语句

```
SELECT [Order].OrderID, CASE count(isnull(Promo.PromoCode, PromoPackage.PromoCode)) WHEN 0 THEN 0 ELSE 1 END
FROM [Order]
LEFT OUTER JOIN Promo ON
    Promo.PromoCode = [Order].OrderPromoCode
    AND [Order].OrderTimestamp BETWEEN Promo.PromoStartTimestamp and Promo.PromoEndTimestamp
    AND NOT EXISTS (SELECT 1 FROM PromoPackage WHERE PromoPackage.PromoCode = Promo.PromoCode)
LEFT OUTER JOIN PromoPackage ON
    PromoPackage.PromoCode = [Order].OrderPromoCode
    AND PromoPackage.PackageID = [Order].PackageID
    AND [Order].OrderTimestamp BETWEEN PromoPackage.PromoStartTimestamp and PromoPackage.PromoEndTimestamp
GROUP BY
    [Order].OrderID 
```

您可以使用 CTE 以更简洁的方式执行此操作。

编辑：使用 CTE 使用查询更新

```
WITH OrderPromo (OrderID, PromoCode, PackageID)
AS
(
SELECT [Order].OrderID, Promo.PromoCode, null
FROM [Order]
INNER JOIN Promo ON
    [Order].OrderPromoCode = Promo.PromoCode
    AND [Order].OrderTimestamp BETWEEN Promo.PromoStartTimestamp AND Promo.PromoEndTimestamp
    AND NOT EXISTS (SELECT 1 FROM PromoPackage WHERE PromoPackage.PromoCode = Promo.PromoCode)

UNION ALL

SELECT [Order].OrderID, PromoPackage.PromoCode, PromoPackage.PackageID
FROM [Order]
INNER JOIN PromoPackage ON
    [Order].OrderPromoCode = PromoPackage.PromoCode
    AND [Order].PackageID = PromoPackage.PackageID
    AND [Order].OrderTimestamp BETWEEN PromoPackage.PromoStartTimestamp AND PromoPackage.PromoEndTimestamp
)
SELECT [Order].OrderID, 1
FROM [Order]
WHERE
    EXISTS (SELECT 1 FROM OrderPromo WHERE OrderPromo.OrderID = [Order].OrderID)

UNION ALL

SELECT [Order].OrderID, 0
FROM [Order]
WHERE
    NOT EXISTS (SELECT 1 FROM OrderPromo WHERE OrderPromo.OrderID = [Order].OrderID)
; 
```

编辑：另一种解决方案。这个通过组合 Promo 和 PromoPackage 表来创建一个“Promotion”表。没有关联 PromoPackage 记录的促销记录实际上具有 null 的 PackageID。

```
SELECT
  [Order].OrderID,
  CASE count(Promotion.PromoCode) WHEN 0 THEN 0 ELSE 1 END
FROM [Order]
LEFT OUTER JOIN (
    SELECT
      Promo.PromoCode,
      PromoPackage.PackageID,
      isnull(PromoPackage.PromoStartTimestamp, Promo.PromoStartTimestamp) as PromoStartTimestamp,
      isnull(PromoPackage.PromoEndTimestamp, Promo.PromoEndTimestamp) as PromoEndTimestamp
  FROM Promo
  LEFT OUTER JOIN PromoPackage ON
      Promo.PromoCode = PromoPackage.PromoCode
) Promotion ON
    Promotion.PromoCode = [Order].OrderPromoCode
    AND (Promotion.PackageID is null OR Promotion.PackageID = [Order].PackageID)
    AND [Order].OrderTimestamp BETWEEN Promotion.PromoStartTimestamp AND Promotion.PromoEndTimestamp
GROUP BY
  [Order].OrderID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T20:27:12.843

```
;WITH PromoCTE AS
(   SELECT  promo.*, CASE WHEN p.PromoCode IS NULL THEN 0 ELSE 1 END [HasPackage]
    FROM    Promo
            LEFT JOIN
            (   SELECT  DISTINCT PromoCode
                FROM    PromoPackage
            ) p
                ON promo.PromoCode = p.PromoCode
)
SELECT  [Order].OrderID, 
        CASE WHEN COUNT(CASE WHEN HasPackage = 1 THEN PromoPackage.PromoCode ELSE Promo.PromoCode END) >= 1 THEN 1 ELSE 0 END [IsPromoCodeValid]
FROM    [Order]
        LEFT JOIN PromoCTE promo
            ON Promo.PromoCode = [Order].OrderPromoCode
            AND [Order].OrderTimeStamp BETWEEN Promo.PromoStartTimestamp AND Promo.PromoEndTimestamp
        LEFT JOIN PromoPackage
            ON PromoPackage.PromoCode = OrderPromoCode
            AND PromoPackage.PackageID = [Order].PackageID
            AND [Order].OrderTimeStamp BETWEEN PromoPackage.PromoStartTimestamp AND PromoPackage.PromoEndTimestamp
GROUP BY [Order].OrderID; 
```

**非 CTE 版本**

```
SELECT  [Order].OrderID, 
        CASE WHEN COUNT(CASE WHEN HasPackage = 1 THEN PromoPackage.PromoCode ELSE Promo.PromoCode END) >= 1 THEN 1 ELSE 0 END [IsPromoCodeValid]
FROM    [Order]
        LEFT JOIN 
        (   SELECT  promo.*, CASE WHEN p.PromoCode IS NULL THEN 0 ELSE 1 END [HasPackage]
            FROM    Promo
                    LEFT JOIN
                    (   SELECT  DISTINCT PromoCode
                        FROM    PromoPackage
                    ) p
                        ON promo.PromoCode = p.PromoCode
        ) promo
            ON Promo.PromoCode = [Order].OrderPromoCode
            AND [Order].OrderTimeStamp BETWEEN Promo.PromoStartTimestamp AND Promo.PromoEndTimestamp
        LEFT JOIN PromoPackage
            ON PromoPackage.PromoCode = OrderPromoCode
            AND PromoPackage.PackageID = [Order].PackageID
            AND [Order].OrderTimeStamp BETWEEN PromoPackage.PromoStartTimestamp AND PromoPackage.PromoEndTimestamp
GROUP BY [Order].OrderID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:24:16.793

您可能可以通过相关子查询来完成此操作。我没有对此进行测试，但是：

```
SELECT  
    a.OrderID,
    CASE WHEN 0 <= (
            SELECT COUNT(*)
            FROM PromoCode x
            JOIN PromoPackage y
                ON y.PromoCode = x.PromoCOde
                AND a.OrderTimeStamp BETWEEN y.PromoSTartTimestamp AND y.PromoEndTimestamp
            WHERE
                x.PromoCode = a.OrderPromoCode              
        ) THEN 0
    ELSE 1
    END AS 'IsPromoCodeValid'

FROM    
    Order a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:26:13.063

我没有尝试重新创建你的表，但这个查询应该接近

```
SELECT o.OrderID, case ISNULL(pck.PackageID, 0) when 0 then 0 else 1 end as IsPromoCodeValid
FROM [Order] as o 
LEFT OUTER JOIN [Promo] as p ON
o.OrderPromoCode = p.PromoCode AND o.OrderTimestamp >= p.PromoStartTimestamp AND o.OrderTimestamp <= p.PromoStartTimestamp
LEFT OUTER JOIN [PromoPackage] pck ON  o.PackageID = pck.PackageID AND p.PromoCode = pck.PromoCode 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T20:22:25.687

像这样的东西可能有效（未经测试）：

```
select o.OrderID,
  isPromoCodeValid = 
    isnull((select 1 from Promo p where o.OrderTimestamp >= p.PromoStartTimestamp and o.OrderTimestamp <= p.PromoEndTimestamp), 0)
    or isnull((select 1 from PromoPackage pp where o.OrderTimestamp >= pp.PromoStartTimestamp and o.OrderTimestamp <= pp.PromoEndTimestamp and o.PackageID = pp.PackageID), 0)
from orders o 
```

# progress-4gl - 使用 Progress 10.2b 如何让滚动条正常工作

> ID：10018519
> 
> 赞同：2
> 
> 时间：2012-04-04T20:10:24.620
> 
> 标签：progress-4gl, openedge

在我的进度应用程序中使用浏览器时，滚动条永远无法正常工作。它会显示我只能向下滚动一点，然后继续前进。这是一个正在进行的错误还是我可以做些什么来解决这个问题？

```
/* Connected Databases 
      sports2000       PROGRESS
*/
&Scoped-define WINDOW-NAME wWin
{adecomm/appserv.i}
CREATE WIDGET-POOL.
{src/adm2/widgetprto.i}
&Scoped-define PROCEDURE-TYPE SmartWindow
&Scoped-define DB-AWARE no
&Scoped-define ADM-CONTAINER WINDOW
&Scoped-define ADM-SUPPORTED-LINKS Data-Target,Data-Source,Page-Target,Update-Source,Update-Target,Filter-target,Filter-Source
&Scoped-define FRAME-NAME fMain
&Scoped-define BROWSE-NAME BROWSE-2
&Scoped-define INTERNAL-TABLES Order
&Scoped-define FIELDS-IN-QUERY-BROWSE-2 Order.PO Order.OrderDate ~
Order.Ordernum 
&Scoped-define ENABLED-FIELDS-IN-QUERY-BROWSE-2 Order.PO Order.OrderDate ~
Order.Ordernum 
&Scoped-define ENABLED-TABLES-IN-QUERY-BROWSE-2 Order
&Scoped-define FIRST-ENABLED-TABLE-IN-QUERY-BROWSE-2 Order
&Scoped-define QUERY-STRING-BROWSE-2 FOR EACH Order NO-LOCK INDEXED-REPOSITION
&Scoped-define OPEN-QUERY-BROWSE-2 OPEN QUERY BROWSE-2 FOR EACH Order NO-LOCK INDEXED-REPOSITION.
&Scoped-define TABLES-IN-QUERY-BROWSE-2 Order
&Scoped-define FIRST-TABLE-IN-QUERY-BROWSE-2 Order
&Scoped-define OPEN-BROWSERS-IN-QUERY-fMain ~
~{&OPEN-QUERY-BROWSE-2}
&Scoped-Define ENABLED-OBJECTS BROWSE-2 
DEFINE VAR wWin AS WIDGET-HANDLE NO-UNDO.

DEFINE QUERY BROWSE-2 FOR 
  Order SCROLLING.
DEFINE BROWSE BROWSE-2
  QUERY BROWSE-2 NO-LOCK DISPLAY
  Order.PO FORMAT "x(20)":U
  Order.OrderDate FORMAT "99/99/99":U
  Order.Ordernum FORMAT "zzzzzzzzz9":U
  ENABLE
  Order.PO
  Order.OrderDate
  Order.Ordernum
WITH NO-ROW-MARKERS SEPARATORS SIZE 59 BY 8.1 FIT-LAST-COLUMN.
/* ************************  Frame Definitions  *********************** */
DEFINE FRAME fMain
 BROWSE-2 AT ROW 4.81 COL 13 WIDGET-ID 200
WITH 1 DOWN NO-BOX KEEP-TAB-ORDER OVERLAY 
     SIDE-LABELS NO-UNDERLINE THREE-D 
     AT COL 1 ROW 1
     SIZE 80 BY 17 WIDGET-ID 100.

IF SESSION:DISPLAY-TYPE = "GUI":U THEN
CREATE WINDOW wWin ASSIGN
     HIDDEN             = YES
     TITLE              = "<insert SmartWindow title>"
     HEIGHT             = 17
     WIDTH              = 80
     MAX-HEIGHT         = 28.81
     MAX-WIDTH          = 146.2
     VIRTUAL-HEIGHT     = 28.81
     VIRTUAL-WIDTH      = 146.2
     RESIZE             = no
     SCROLL-BARS        = no
     STATUS-AREA        = no
     BGCOLOR            = ?
     FGCOLOR            = ?
     THREE-D            = yes
     MESSAGE-AREA       = no
     SENSITIVE          = yes.
ELSE {&WINDOW-NAME} = CURRENT-WINDOW.

{src/adm2/containr.i}
IF SESSION:DISPLAY-TYPE = "GUI":U AND VALID-HANDLE(wWin)
THEN wWin:HIDDEN = yes.
&Scoped-define SELF-NAME wWin
ON END-ERROR OF wWin /* <insert SmartWindow title> */
OR ENDKEY OF {&WINDOW-NAME} ANYWHERE DO:
/* This case occurs when the user presses the "Esc" key.
 In a persistently run window, just ignore this.  If we did not, the
 application would exit. */
IF THIS-PROCEDURE:PERSISTENT THEN RETURN NO-APPLY.
END.

ON WINDOW-CLOSE OF wWin /* <insert SmartWindow title> */
DO:
  /* This ADM code must be left here in order for the SmartWindow
     and its descendents to terminate properly on exit. */
  APPLY "CLOSE":U TO THIS-PROCEDURE.
  RETURN NO-APPLY.
END.

&Scoped-define BROWSE-NAME BROWSE-2
&UNDEFINE SELF-NAME

/* ***************************  Main Block  *************************** */

/* Include custom  Main Block code for SmartWindows. */
{src/adm2/windowmn.i}

/* **********************  Internal Procedures  *********************** */

PROCEDURE adm-create-objects :

END PROCEDURE.

PROCEDURE disable_UI :
  /* Delete the WINDOW we created */
  IF SESSION:DISPLAY-TYPE = "GUI":U AND VALID-HANDLE(wWin)
  THEN DELETE WIDGET wWin.
  IF THIS-PROCEDURE:PERSISTENT THEN DELETE PROCEDURE THIS-PROCEDURE.
END PROCEDURE.

PROCEDURE enable_UI :
  ENABLE BROWSE-2 
      WITH FRAME fMain IN WINDOW wWin.
  {&OPEN-BROWSERS-IN-QUERY-fMain}
  VIEW wWin.
END PROCEDURE.

PROCEDURE exitObject :

  APPLY "CLOSE":U TO THIS-PROCEDURE.
  RETURN.

END PROCEDURE. 
```

当我使用这样的浏览器时，我将滚动条拉到底部，然后单击滚动条上的向下箭头，仍然有行（即使滚动条位于屏幕底部）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:01:32.173

我修改了您的示例代码以使用“sports2000”数据库，我可以看到发生了什么。

```
define query browse-4 for customer.

DEFINE BROWSE BROWSE-4
QUERY BROWSE-4 NO-LOCK DISPLAY
  custNum name
/* ENABLE name */
WITH NO-ROW-MARKERS SEPARATORS SIZE 32 BY 6.46 FIT-LAST-COLUMN.
.

open query browse-4 preselect each customer no-lock.

enable browse-4.

wait-for window-close of current-window. 
```

关键变化是在 OPEN QUERY 中使用 PRESELECT。否则只返回部分结果集。这是一个已知功能。

不过要小心——如果您的查询涉及数千条记录，则 PRESELECT 不会执行得很好。当然，在 UI 中呈现这么多记录可能不是一个好主意。

# python - 准确的二值图像分类

> ID：10018525
> 
> 赞同：13
> 
> 时间：2012-04-04T20:10:40.060
> 
> 标签：python, image-processing, opencv, ocr, simplecv

我正在尝试从一个项目的游戏板上提取字母。目前，我可以检测游戏板，将其分割成单独的方块并提取每个方块的图像。

我得到的输入是这样的（这些是单独的字母）：

![在此处输入图像描述](../Images/f0c41a89f577353e7ba4cd0a7b67faa5.png)![在此处输入图像描述](../Images/a92d1b946cc1ea0ce3e8f26ef0bd81a4.png)![在此处输入图像描述](../Images/f08c3bd3a3630733cd2314bc9cabdf57.png)![在此处输入图像描述](../Images/12b1bad5bf0eaeadd1eb9aae19c67e8c.png)![在此处输入图像描述](../Images/81ee03728cf8140dfba8149356ac21d1.png)![在此处输入图像描述](../Images/2473bc6681fbb82a18ae9910a7e14f39.png)

起初，我计算了每张图像的黑色像素数量，并将其用作识别不同字母的方法，这对于受控输入图像来说效果不错。但是，我遇到的问题是，我无法对与这些略有不同的图像进行这项工作。

每个字母我有大约 5 个样本用于训练，这应该足够了。

有人知道为此使用什么好的算法吗？

我的想法是（在标准化图像之后）：

*   计算图像和每个字母图像之间的差异，看看哪个产生的错误最少。不过，这不适用于大型数据集。
*   检测角点并比较相对位置。
*   ？？？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T20:55:28.047

我认为这是某种监督学习。您需要对图像进行一些特征提取，然后根据您为每个图像计算的特征向量进行分类。

**特征提取**

乍一看，特征提取部分看起来像是[Hu-Moments](http://en.wikipedia.org/wiki/Image_moment#Rotation_invariant_moments)的一个很好的场景。只需计算[图像矩](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html#cv-moments)，然后从中计算[cv::HuMoments](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html#cv-humoments)。然后你有一个 7 维实值特征空间（每个图像一个特征向量）。或者，您可以省略此步骤并将每个像素值用作单独的特征。我认为[这个答案](https://stackoverflow.com/a/10018755/1025391)中的建议是朝着这个方向发展的，但是增加了 PCA 压缩来降​​低特征空间的维度。

**分类**

至于分类部分，你几乎可以使用任何你喜欢的分类算法。您可以对每个字母使用 SVM（二进制是 - 否分类），您可以使用 NaiveBayes（最大可能字母是什么），或者您可以使用 k-NearestNeighbor（kNN，特征空间中的最小空间距离）方法，例如[弗兰](http://opencv.willowgarage.com/documentation/cpp/flann_fast_approximate_nearest_neighbor_search.html)。

特别是对于基于距离的分类器（例如 kNN），您应该考虑对特征空间进行归一化（例如，将所有维度值缩放到欧几里德距离的某个范围，或使用诸如马氏距离之类的东西）。这是为了避免在分类过程中过度表示具有较大值差异的特征。

**评估**

当然，您需要训练数据，即给定正确字母的图像特征向量。还有一个过程，用于评估您的过程，例如交叉验证。

* * *

在这种情况下，您可能还想看看[模板匹配](https://en.wikipedia.org/wiki/Template_matching)。在这种情况下，您会将候选图像与训练集中的可用模式进行卷积。输出图像中的高值表示图案位于该位置的可能性很大。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T20:28:36.837

这是一个识别问题。我个人会结合使用[PCA](http://en.wikipedia.org/wiki/Principal_component_analysis)和机器学习技术（可能是[SVM](http://en.wikipedia.org/wiki/Support_vector_machine)）。这些都是相当大的话题，所以恐怕我不能详细说明，但这是非常基本的过程：

1.  收集你的训练图像（每个字母不止一张，但不要发疯）
2.  给它们贴上标签（可能意味着很多东西，在这种情况下，这意味着将字母分组为逻辑组——所有 A 图像 -> 1，所有 B 图像 -> 2 等）
3.  训练你的分类器
    *   通过 PCA 分解运行一切
    *   将所有训练图像投影到 PCA 空间中
    *   通过 SVM 运行投影图像（如果它是一类分类器，一次做一个，否则一次做所有。）
    *   节省您的 PCA 特征向量和 SVM 训练数据
4.  运行识别
    *   加载到您的 PCA 空间
    *   加载您的 SVM 训练数据
    *   对于每个新图像，将其投影到 PCA 空间并要求您的 SVM 对其进行分类。
    *   如果您得到答案（一个数字），请将其映射回一个字母（1 -> A、2 -> B 等）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T21:02:09.473

*   [OpenCV 中的基本 OCR](http://blog.damiles.com/2008/11/basic-ocr-in-opencv/)（C 示例）
*   [破解验证码](http://blog.gendata.com.br/2011/09/quebrando-captcha-opencv-python/)（Python 示例，但帖子是用巴西葡萄牙语写的）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-05T05:42:42.633

几天前我遇到了类似的问题。但这是数字识别。不适用于字母。

我使用 OpenCV 中的 kNearestNeighbour 为此实现了一个简单的 OCR。

以下是链接和代码：

[OpenCV-Python 中的简单数字识别 OCR](https://stackoverflow.com/questions/9413216/simple-digit-recognition-ocr-in-opencv-python)

为字母实现它。希望它有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-13T11:33:34.150

您可以尝试通过将训练数据（约 50 张 1s、2s、3s....9s 的图像）上传到[demo.nanonets.ai](http://demo.nanonets.ai/ImageCategorization/?utm_source=so&utm_content=41120092&utm_medium=so)（免费使用）来构建模型

1) 在此处上传您的训练数据：

[演示.nanonets.ai](http://demo.nanonets.ai/ImageCategorization/?utm_source=so&utm_content=41120092&utm_medium=so)

2）然后使用以下（Python代码）查询API：

```
import requests
import json
import urllib
model_name = "Enter-Your-Model-Name-Here"
url = "http://images.clipartpanda.com/number-one-clipart-847-blue-number-one-clip-art.png"
files = {'uploadfile': urllib.urlopen(url).read()}
url = "http://demo.nanonets.ai/classify/?appId="+model_name
r = requests.post(url, files=files)
print json.loads(r.content) 
```

3）响应看起来像：

```
{
  "message": "Model trained",
  "result": [
    {
      "label": "1",
      "probability": 0.95
    },
    {
      "label": "2",
      "probability": 0.01
    },

     ....

    {
      "label": "9",
      "probability": 0.005
    }
  ]
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T05:38:08.717

请看这两个与OCR相关的答案

[使用 OpenCV 进行记分牌数字识别](https://stackoverflow.com/questions/8070300/scoreboard-digit-recognition-using-opencv/8070743#8070743)

和这里

[屏幕截图中低分辨率文本的 OCR](https://stackoverflow.com/questions/8697303/ocr-of-low-resolution-text-from-screenshots/8698452#8698452)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-05T02:20:06.607

由于您的图像来自棋盘游戏的计算机屏幕，因此变化不能“太疯狂”。我刚刚得到了解决同一类型问题的方法。我通过裁剪到“核心”来标准化我的图像。

每个字母 5 个样本，您可能已经拥有完整的覆盖范围。

我通过在图像文件名的开头“标记”标识符来组织我的工作。然后我可以对文件名（=标识符）进行排序。Windows 资源管理器允许您在打开中图标的情况下查看目录。我将通过“假重命名”操作获取标识符并将其复制到 Python 程序中。

这是一些可以针对任何这些问题进行修改的工作代码。

```
def getLetter(im):
    area = im.height * im.width
    white_area = np.sum(np.array(im))
    black_area = area - white_area
    black_ratio = black_area / area           # between 0 and 1
    if black_ratio == .740740740740740 or \
       black_ratio == .688034188034188 or \
       black_ratio == .7407407407407407:  
       return 'A'
    if black_ratio == .797979797979798:
       return 'T'
    if black_ratio == .803030303030303:
       return 'I'
    if black_ratio == .5050505050505051 or \
       black_ratio == .5555555555555556:
       return 'H'
    ############ ... etc.

    return '@' # when this comes out you have some more work to do 
```

注意：同一个标识符（这里我们使用`black_ratio`）可能指向多个字母。如果发生这种情况，您需要使用图像的另一个属性来区分它们。

# c# - 升序排列

> ID：10018531
> 
> 赞同：3
> 
> 时间：2012-04-04T20:10:55.147
> 
> 标签：c#, algorithm, list, recursion, permutation

我正在尝试仅按升序获取列表的所有预定义长度排列。

```
For example, take the set:  "ABCDE"
I'd like the returning result to be:
ABC, ABD, ABE, ACD, ACE, ADE, BCD, BCE, BDE, CDE 
```

换句话说，“B”永远不能出现在“A”（升序）之前，但我希望这个要求中的每一个变化。

我宁愿不使用 LINQ，而且我正在尝试找出实现这一点的最快方法（速度是这个应用程序的一个因素）。

到目前为止，我有一个字符列表列表：

```
List<List<char>> Combinations; 
```

其中内部“列表”将是类似“ABC”的组合（每个字母都是一个字符），而外部列表将是所有组合的列表。

每个结果集的长度（上例中为 3）需要是动态的，所以我想我需要某种递归......我只是不知道如何实现它。

任何帮助将不胜感激！

**编辑**

到目前为止，这就是我所拥有的（我觉得我已经接近了......我只是无法让它真正构建最终列表（工会不起作用 - 我是否使用不正确？）：

```
 private List<List<char>> AscendingPermute(List<char> InMovements, int Combinations)
    {
        List<List<char>> Ret = new List<List<char>>();

        for(int i = 0; i <= InMovements.Count - Combinations; i++)
        {
            if(Combinations <= 1){
                Ret.Add(new List<char>() {InMovements[i] });
                return Ret;
            }
            else
            {
                Ret.Union(AscendingPermute(InMovements.GetRange(1, InMovements.Count - 1), Combinations - 1));
            }
        }

        return Ret;
    } 
```

我在正确的轨道上吗？我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:16:54.900

所以你想要一组 n 个元素中所有可能的 k 元素，并且你想要每个 k 元素列表按升序排列？

看看这里：[从 n 返回 k 个元素的所有组合的算法](https://stackoverflow.com/questions/127704/algorithm-to-return-all-combinations-of-k-elements-from-n)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T20:50:00.370

我*认为*这就是您要寻找的东西，尽管我对速度并不乐观：

```
public static IEnumerable<string> GetPermutations(string letters, int max = 3, int curr = 0)
{
  if (curr < max - 1)
  {
    for (int a = 0; a < letters.Length; a++)
    {
      string firstHalf = letters.Substring(a,1);
      string subset = letters.Substring(a+1);
      foreach (string secondHalf in GetPermutations(subset, max, curr + 1))
      {
        //Console.Write("1st: {0}, 2nd: {1}; set: {2}", firstHalf, secondHalf, subset);
        yield return firstHalf + secondHalf;
      }
    }
  }
  else
    yield return String.Empty;
} 
```

示例调用：

```
foreach (var result in GetPermutations('ABCDE', 3)){
  Console.WriteLine(result);
} 
```

结果是：

```
ABC
ABD
ABE
ACD
ACE
ADE
BCD
BCE
BDE
CDE
Press any key to continue... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T20:51:27.107

不需要递归。

```
List<string> sortedResult = Perm("ABCDE",3); 
```

* * *

```
static int BitCount(int n)
{
    int test = n,count = 0;

    while (test != 0)
    {
        if ((test & 1) == 1) count++;
        test >>= 1;
    }
    return count;
}

static List<string> Perm(string input,int M)
{
    var chars = input.ToCharArray();
    int N = chars.Length;
    List<List<char>> result = new List<List<char>>();

    for (int i = 0; i < Math.Pow(2, N); i++)
    {
        if (BitCount(i) == M)
        {
            List<char> line = new List<char>();
            for (int j = 0; j < N; j++)
            {
                if (((i >> j) & 1) == 1)
                {
                    line.Add(chars[j]);
                }
            }
            result.Add(line);
        }
    }

    return result.Select(l => String.Join("", l)).OrderBy(s => s).ToList();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:24:26.387

您正在寻找一个递归函数，它将计算：给定字母表中的第一个字母（按升序排序）与升序排列与字母表其余部分的一个字母相连接，加上其余字母的升序排列与相同的字母数数。

为了澄清，对于你的例子，它是

```
asc_perm("ABCDE",3):="A"+asc_perm("BCDE",2) | asc_perm("BCDE",3) 
```

要对其进行迭代编码，您可以`n`在字母表中添加索引，并使用 和 的约束，`n>m => idx_{n} > idx_{m}`并`0 < n,m <= count(alphabet)`枚举所有可能的索引。这是一种带有一些额外条件的计数器。为了使用这些索引进行计数，您从`1, 2, 3, 4, ...n`. 从增加最后一个计数器开始，直到达到字母长度。当它出现时，找到前一个索引，将其递增 1，并将其后的每个索引设置为`1+idx_prev`只要索引不大于您的计数。如果是这样，则使用前一个索引重复该过程，直到用完有效位置。

你的例子的一个简单的例子是：

*   初始条件：`{1,2,3}`
*   运行所有有效位置的最后一个索引：`{1,2,4}`,`{1,2,5}`
*   将前一个索引 (2) 增加到下一个并重置其余的：`{1,3,4}`
*   运行所有有效位置的最后一个索引：`{1,3,5}`
*   将前一个索引 (2) 增加到下一个并重置其余的：`{1,4,5}`
*   为所有有效位置运行最后一个索引：没有可能的移动
*   将前一个索引 (2) 增加到下一个并重置其余的：没有可能的移动
*   将前一个索引 (1) 增加到下一个并重置其余的：`{2,3,4}`
*   运行所有有效位置的最后一个索引：`{2,3,5}`
*   将前一个索引 (2) 增加到下一个并重置其余的：`{2,4,5}`
*   为所有有效位置运行最后一个索引：没有可能的移动
*   将前一个索引 (2) 增加到下一个并重置其余的：没有可能的移动
*   将前一个索引 (1) 增加到下一个并重置其余的：`{3,4,5}`
*   为所有有效位置运行最后一个索引：没有可能的移动
*   将前一个索引 (2) 增加到下一个并重置其余的：没有可能的移动
*   将前一个索引 (1) 增加到下一个并重置其余的：没有可能的移动
*   终止

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T21:38:54.703

这是一个递归方法，可以满足您的要求：

```
 static IEnumerable<List<byte>> AscPerm(List<byte> inBytes, int combinations)
    {
        if (combinations == 1)
        {
            foreach (var b in inBytes)
            {
                yield return new List<byte> { b };
            }
        }
        else
        {
            for (int i = 0; i <= inBytes.Count - combinations; i++)
            {
                // Recurse down, passing last items of inBytes.
                var subPerms = AscPerm(inBytes.Skip(i +1).ToList(), combinations - 1);
                foreach (var subPerm in subPerms)
                {
                    List<byte> retBytes = new List<byte>{ inBytes[i] };
                    yield return retBytes.Concat(subPerm).ToList();
                }
            }
        }
    }

    static void Main(string[] args)
    {
        var retList = AscPerm(new List<byte> { 1, 2, 3, 4, 5, 6, 7 }, 3);
        foreach (var ret in retList)
        {
            foreach (var r in ret)
            {
                Console.Write(r);
            }
            Console.WriteLine();
        }
        Console.ReadLine();
    } 
```

# design-patterns - 哪种设计模式 - 基于许多输入参数的计算？

> ID：10018532
> 
> 赞同：4
> 
> 时间：2012-04-04T20:10:55.430
> 
> 标签：design-patterns

我正在设计一个库存系统。每个库存项目的税费都需要根据许多条件（州、县等）进行计算。计算规则也会随着时间的推移而变化。所以我在考虑策略模式，但我在制定设计说明方面没有丰富的经验。

我还应该问自己什么其他问题？

我的库存项目可以是不同的类型，所以关于策略模式的 wiki 页面说：

> 类的行为不应被继承，而应使用接口封装。

这对我的案件有何影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:24:21.753

> 类的行为不应被继承，而应使用接口封装。

这意味着，您应该将计算算法封装在接口后面，然后在指向正确 Strategy 对象`Inventory`的类中使用封装，而不是为每个可能的税收计算子类化您的项目。`Inventory`

这为您节省了大量工作，因为您不必在`Inventory`每次进行新计算时都声明新的子类。

以下实现使用继承：

```
abstract class InventoryBase
{
   protected abstract Money CalculateTax();
}

class InventoryTaxA : InventoryBase
{
   protected override Money CalculateTax()
   {
      // Calculation A
   }
}

class InventoryTaxB : InventoryBase
{
   protected override Money CalculateTax()
   {
      // Calculation B
   }
} 
```

但是策略模式看起来像：

```
class Inventory
{
   public Inventory(ITaxCalculationStrategy taxCalculationStrategy)
   {
      TaxCalculationStrategy = taxCalculationStrategy;
   }

   protected override Money CalculateTax()
   {
       return TaxCalculationStrategy.Calculate(this);
   }
} 
```

因此，策略绝对是抽象您的税收计算的一个很好的解决方案。如果在某个时间应用的计算规则不同并且可以更改，我也会使用[工厂](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)来创建正确的 Strategy 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T20:38:32.927

我认为你需要加强你的设计，看看税收计算的*过程*是如何发生的，何时完成，由谁，为谁以及在哪里记录。对此负责的人会将*库存项目*作为输入，然后需要找出给定项目（和上下文）属性的适用*税收计算方法。*该过程可能涉及向*税收计算政策*对象询问合适的*方法*。非常高的水平应该是这样的：

```
tax_calculation_method = tax_policy.get_method_for(inventory_item)
tax_value = tax_calculation_method.calculate_for(inventory_item)
tax_account.record_tax(tax_value, for_item: inventory_item) 
```

*因此，策略模式可以在将上述过程与计算方法的细节* **以及**在给定*库存项目*的情况下寻找合适*方法*的细节中隔离开来发挥基本作用（因此它已经被使用了两次），但这只是一个实现细节的整体设计。许多其他模式可能适用，从工厂到存储库，或用于复杂标准的[规范](http://en.wikipedia.org/wiki/Specification_pattern)和组合，仅举几例。

 *要获得启发，请查看一些[会计分析模式 (pdf)](http://martinfowler.com/apsupp/accounting.pdf)。*

# git - 是否可以只对修改过的文件进行`git status`？

> ID：10018533
> 
> 赞同：206
> 
> 时间：2012-04-04T20:10:59.170
> 
> 标签：git, ubuntu, git-status

在我的情况下，是否可以`git status`只显示修改后的文件，因为暂存文件太多？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2012-04-04T20:26:40.603

您不能使用 来执行此操作`git status`，但您可以使用它`git ls-files -m`来显示所有修改过的文件。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-04-04T20:28:20.740

看起来`git status -uno`只会显示 git 正在跟踪的文件，而不显示目录中的任何其他内容。不完全符合您的要求，但可能完成了同样的事情（获取 git 跟踪的文件的可读长度列表）。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-12-04T12:48:36.790

对于修改过的文件：

```
git status | grep modified: 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2012-11-20T18:15:25.900

```
git status -s | awk '{if ($1 == "M") print $2}' 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-12-29T15:41:43.557

`git diff --name-only --diff-filter=M`

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-02-21T13:37:01.470

`git diff --name-only`也可以。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-12-09T06:42:05.760

我正在寻找相同的信息，发现以下给出了修改后的文件：

```
git status -uno 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-06-19T19:56:53.930

您可以使用

```
$ git status -uno 
```

仅列出修改过的文件。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-05-01T23:36:19.690

我使用这个命令：

```
$ git status -sb -uno | grep -v "^\sD\s" 
```

输出如下所示：

```
## master...origin/master
 M GNUmakefile
 M include/mp4v2/project.h 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-11-09T23:33:20.667

要列出修改后的文件，请使用：

```
git ls-files -m 
```

如果您只想要基本名称（没有路径），那么您可以使用 xargs 将每个结果逐行传递到基本名称命令：

```
git ls-files -m | xargs -L 1 basename 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-07-01T15:47:12.320

> 问题是我目前不想提交或 gitignore 的暂存文件太多，我无法向上滚动。

虽然这可能无法直接回答仅列出已修改文件的问题，但它可能有助于限制列出的文件数量。

您可以传递路径以`git status`将输出限制到存储库中的特定文件夹。

例如：

```
git status app
git status spec
git status src/components 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-14T02:06:25.267

## 更新

打开`.gitconfig`

```
[user]
     name = ...
     email = ...
[alias]
    #  add below code
    mySt = "!f() {\
        inputType=${1:-" "};\
        git status -s | grep "\\ $inputType" |\
        sed -e 's/ / /'   ;\
    }; f" 
```

解释：[https ://stackoverflow.com/a/62772985/9935654](https://stackoverflow.com/a/62772985/9935654)

用法

> `git mySt M` ：显示修改：
> 
> `git mySt M *.md` : 显示所有 *.md，已修改。
> 
> `git mySt D` : 删除:
> 
> `git mySt` : 一样`git status -s`

* * *

## 操作系统：windows

以下命令将显示所有包含**"modified:"**、**"renamed:"**或**"new file:" 的行**

```
git status | findstr "modified: renamed: new file:" 
```

如果要指定文件类型：（例如`*.py` `*.ini`）

```
git status *.py *.ini | findstr "modified: renamed: new file:" 
```

如果您认为输入这么多太麻烦：

1.  创建一个批处理文件（例如`st.bat`：）

2.  写入内容如下：

    ```
    @echo off
    :: st.bat  (this line doesn't necessarily. ( just let you know the scripts name.))
    git status %~1 | findstr "modified: renamed: new file:" 
    ```

3.  添加包含批处理文件的环境路径。( `st.bat`)

4.  用法

    ```
    st.bat "*.py *.ini" 
    ```

    （注意：如果 type > 1 则必须添加分号）

## 操作系统：Linux

正如@Lance所说，您可以尝试

`git status | grep modified:`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-05T01:30:49.053

我用`git cola`. 它是一个简单而优雅的 UI 客户端，它将向您显示修改后的文件，并为您提供您所做更改的差异镜头。

`git cola`为您提供了一个 GUI，您可以在其中可视化您修改了哪些文件、暂存了哪些文件，甚至是那些您不跟踪的文件。你的问题是我相信只使用 git status ，但我认为 git cola 可以在那个时候和其他事情上提供帮助。从更多信息中查看此网页：[git-cola.github.com/screenshots.html](http://git-cola.github.com/screenshots.html)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-11-29T22:44:30.437

如果要列出**修改后**的文件，可以这样做：

```
git log -n1 --oneline --name-status | grep '^M' 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-07-27T04:08:08.920

要列出所有修改的文件，请使用：

```
git show --stat --oneline HEAD 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-05-20T14:32:50.807

所有很好的答案；只是 FEI，“git checkout”（切换到或在同一分支中）似乎只显示修改后的文件。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-02-20T22:25:28.460

一种替代方法是将结果放在一行上，通过`-s`它可以限制显示的内容。

```
git status -s 
```

[![Git状态图-s](../Images/2e9fc43a47202c8800cb94934cd67662.png)](https://i.stack.imgur.com/hy0jq.png)

*显示在带有 Powerline/Posh git 的 windows 终端下。*

* * *

这个命令非常方便，我将它添加为别名，用作`git stati`

```
[alias]
   stati = !git status -s 
```

# css - CSS 固定 div。避免不必要的重叠

> ID：10018535
> 
> 赞同：3
> 
> 时间：2012-04-04T20:11:10.030
> 
> 标签：css, multiple-columns

我有一个由 2 列组成的 CSS 布局。左侧的导航栏是一个修复 div。向下滚动右侧列中的主要内容时，它会停留在那里。

当我缩小浏览器窗口或放大时出现问题：水平滚动浏览器窗口时，右侧的主要内容开始与左侧的导航列重叠。

如何修复它，以便无论浏览器窗口的大小或缩放级别是多少，当我水平滚动时，固定的 div 不会重叠，而是将主列推到右侧？

您可以在以下位置看到它：http: [//justarandomone.tumblr.com/](http://justarandomone.tumblr.com/)

所有代码都在源代码中（非常混乱，对此感到抱歉）。

希望有人可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:57:48.793

您可以为#sidebar 提供纯色背景色（例如白色）；使用 z-index 将其放在堆栈顶部（任何大于右侧 z-index 的数字，例如 1）；此外，您可能希望将#sidebar 拉伸为高度：100%。最后，您可能希望#sidebar 出现覆盖左侧的整个高度，您可以添加“top：0”来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:32:12.747

在我看来，这不是一个真正的问题.. 无论如何，我认为您可以将主要内容块放在 div 中并为其提供绝对定位来解决它。从侧边栏中删除 float:left，这不是必需的。

```
#container {
    width:751px;
    margin-top:56px;
}

#sidebar {
    width:235px;
    position:fixed;
    top: 0px;
    left: 0px;
}
#content {
    position: absolute;
    top: 0px;
    left: 235px;
    width: 516px; /* 751 -235 */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:46:05.117

在将 Chrome 缩小到异常小的窗口大小以及在 iPhone 上时，我能够重新创建。设置侧边栏 div`position:fixed`强制它停留在该位置；导致水平滚动问题。

我切换了侧边栏`position:absolute`，然后同步了`top-margin`侧边栏和 blogroll，它似乎工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:12:17.893

可能的建议。使用 css 将 'blogroll' 和 'sidebar' 的高度设置为相同的值（在此示例中我使用了 100%）。他们添加'溢出：自动;' 到“博客”

```
#sidebar {
    width:235px;
    height:100%;
    float:left;
    clear:both;
    position:fixed;
}

#blogroll {
    width:558px;
    margin-left:290px;
    position:absolute;
    min-height:300px;
    height: 100%;
    overflow:auto;
    padding-bottom:27px;
    padding-top: 171px;
} 
```

这将导致 blogroll 在页面内有自己的滚动条（因此人们会使用它们，并且理论上该页面不会有任何滚动条。为确保将您的正文边距设置为 0 即 ie。应该可以工作。

# excel - 如何在不包含 ActiveXButtons 的情况下复制/粘贴工作表数据

> ID：10018537
> 
> 赞同：4
> 
> 时间：2012-04-04T20:11:14.290
> 
> 标签：excel, vba, copy, paste

问题：

我有一张包含值、公式和 ActiveX 按钮的工作表。ActiveX 按钮用于附加一些数据并将所有值/公式从活动工作表复制/粘贴到单独工作簿中的另一个工作表。

现在它工作正常，但有一个例外。当它将复制的范围粘贴到新的工作簿/工作表中时，它还会粘贴 ActiveX 按钮及其各自的代码。

我想知道是否有办法选择所有内容，减去 ActiveX 按钮，将其添加到剪贴板，然后照常粘贴。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T21:10:02.097

尝试这个：

```
Application.CopyObjectsWithCells=False
'do your copy
Application.CopyObjectsWithCells=True 
```

# validation - 在动态生成的字段（客户端）上调用 qForm 验证

> ID：10018538
> 
> 赞同：0
> 
> 时间：2012-04-04T20:11:15.667
> 
> 标签：validation

我有一个表单，其中有一个输入字段，名称/id 为“notes”：

```
<input name="notes" type="text" id="notes" tabindex="5" value="" size="60" maxlength="300" class="fauxTextArea"> 
```

我正在使用 javascript 将其替换为文本区域，结果如下：

```
<textarea rows="5" cols="60" title="" tabindex="5" style="" id="notes" name="notes" class=""></textarea> 
```

然后我必须用 qForms 验证它。用文本区域替换字段没有太多选择，也没有选择必须使用 qForms。

当我尝试提交表单时，除动态文本区域外，所有字段都得到“验证”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:09:11.470

...修复非常简单。由于在 $(document).reday 函数中添加了动态字段，因此在其中初始化和调用验证就像一个魅力。

```
$(document).ready( function(){
    $(".fauxTextArea").jqFauxTextArea( );// the dynamic gets added here
    objForm = new qForm("whitePapers"); 
    // the rest of qForm relates stuff ...
} 
```

# java - 如何减慢java中线程的生成速度？

> ID：10018543
> 
> 赞同：2
> 
> 时间：2012-04-04T20:11:31.603
> 
> 标签：java, multithreading

我正在生成 20 个线程（它们都应该同时运行）。但是，它们都是同时创建的，而且都是同时开始运行的，这就给整个程序带来了很大的滞后（这是滞后，我的电脑并不慢）。

所以，我想让它们在不同的时间创建，例如每 2 秒左右生成一个。我该怎么做呢？我尝试过使用大量的东西，但没有一个能按我想要的方式工作。我曾尝试使用布尔方法在它为真之前不再循环，但这似乎不起作用。有任何想法吗？

```
for (int i = 0; i < 20; i++) {
    Rain r = new Rain();
    r.start();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:13:08.310

尝试将线程生成器作为线程运行，然后实现 Thread.sleep(2000)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T20:16:41.860

您可能只创建一个生成器线程，它在生成每个线程之间仅休眠 2 秒：

```
for (int i = 0; i < 20; i++) {
    Rain r = new Rain();
    r.start();
    Thread.sleep(2000);
} 
```

*注意：省略了 try-catch 块*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T00:30:05.273

如果由于创建的线程数而出现延迟，最好的解决方案可能是减少创建的线程数。

此外，Java 5 引入了执行器服务框架，在 Java 7 中通过 fork/joins 再次对其进行了改进，因此在正常情况下您根本不必自己创建线程。（[这里](http://www.vogella.de/articles/JavaConcurrency/article.html)是一个页面链接，对这些概念有很好的解释。）

我通常不会启动比机器上的内核更多的线程，如下所示：

```
int availableThreads = Runtime.getRuntime().availableProcessors();
ExecutorService executorService = Executors.newFixedThreadPool(availableThreads);

// ...Create List<Future<ReturnObject>>
// populate list by calling futures.add(executorService.submit(callable));

executorService.shutdown(); 
```

这是因为，只要是计算密集型进程，当您在每个内核上同时进行计算而不是在单个内核上进行线程切换时，您就可以获得最大的线程增益。当然，当您谈论磁盘或网络密集型进程时，情况会发生变化，但这是一个非常好的经验法则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T20:14:49.910

我真的不明白为什么它会因为只创建 20 个线程而滞后，但如果你希望它们在不同时间启动，你可以休眠：

```
for (int i = 0; i < 20; i++) {
    Rain r = new Rain();
    r.start();
    Thread.sleep(2000);
} 
```

# visual-studio-2010 - 从 Qmake 在 Visual Studio 中构建配置

> ID：10018544
> 
> 赞同：1
> 
> 时间：2012-04-04T20:11:33.697
> 
> 标签：visual-studio-2010, qt, build

我使用 qmake (qmake -tp vc) 为 Visual Studio 2010 生成 vcxproj 文件。问题是，只生成了“发布”和“调试”解决方案配置。

我想创建另一个配置，称为 configX，它将设置另一个预编译器定义，我们不希望在其他构建中。我不知道如何在 Qt Pro 文件中完成此操作。

任何人都可以提供一些帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:30:31.717

根据[qtcentre forum 上](http://www.qtcentre.org/threads/45047-Multiple-build-configurations-with-qmake)的这个帖子，当您从命令行`CONFIG`调用时，您可以使用该变量定义多个配置。`qmake`然后，您只需编写一个脚本，`qmake`使用不同的值多次调用`CONFIG`，这将让您构建一个多配置解决方案。尽管我打算这样做，但我自己还没有测试它。查看[此页面](http://qxrunner.systest.ch/qxrunner-installation/)（QxRunner 安装）似乎有可能！

# c# - 通过反射或类似方法动态生成属性 getter/setter

> ID：10018560
> 
> 赞同：5
> 
> 时间：2012-04-04T20:12:51.103
> 
> 标签：c#, reflection, metaprogramming

想象一下下面的类：

```
public class Settings
{
    [FileBackedProperty("foo.txt")]
    public string Foo { get; set; }
} 
```

我希望能够编写与上述类似的内容，并`settings.Foo`从文件“foo.txt”中读取并`settings.Foo = "bar"`写入“foo.txt”。

显然这是一个简化的示例，我不会在生产应用程序中执行上述操作，但是还有其他示例，例如，如果我希望 Foo 存储在 ASP.net 会话状态“foo”中，但我厌倦了编写以下内容一遍又一遍的代码：

```
public int Foo
{
    get
    {
        if (Session["foo"] != null)
            return Convert.ToInt32(Session["foo"]);
        else
            // Throw an exception or return a default value
    }
    set
    {
        Session["foo"] = value;
    }
} 
```

（再次简化这个例子，我不会写上面的代码，实际上我在撒谎，我有上面的代码并且正在努力重构它，因此这个问题）

上面的例子很好，除非你有 50 个不同的会话值，它们都有相似的逻辑。那么有没有办法可以将第二个属性转换为类似于第一个属性的东西？（使用属性和反射，或者其他方法？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T08:23:44.210

我知道这不是您（以及我）所需要的；但这是不使用第三方库的最接近的。您可以更改 get&set 方法的逻辑并为 GetProperty 和 GetCustomAttributes 方法添加一些cahcing，或者如果您已经有一个基类，您可以在帮助类中将 get&set 方法编写为静态方法。同样不是完美的答案，也可能性能不佳，但至少它减少了您复制和粘贴的代码（：

注意：重要的是使属性虚拟化以防止编译器内联它们。

```
public class SampleClass : SessionObject
{
    [Session(Key = "SS_PROP")]
    public virtual int SampleProperty
    {
        get { return get(); }
        set { set(value); }
    }

    [Session(Key = "SS_PROP2")]
    public virtual string SampleProperty2
    {
        get { return get(); }
        set { set(value); }
    }
}

[AttributeUsage(AttributeTargets.Property)]
public class SessionAttribute : Attribute
{
    public string Key { get; set; }
}

public abstract class SessionObject
{
    Dictionary<string, object> Session = new Dictionary<string, object>();

    protected void set(object value)
    {
        StackFrame caller = new StackFrame(1);
        MethodBase method = caller.GetMethod();
        string propName = method.Name.Substring(4);
        Type type = method.ReflectedType;
        PropertyInfo pi = type.GetProperty(propName);
        object[] attributes = pi.GetCustomAttributes(typeof(SessionAttribute), true);
        if (attributes != null && attributes.Length == 1)
        {
            SessionAttribute ssAttr = attributes[0] as SessionAttribute;
            Session[ssAttr.Key] = value;
        }
    }

    protected dynamic get()
    {
        StackFrame caller = new StackFrame(1);
        MethodBase method = caller.GetMethod();
        string propName = method.Name.Substring(4);
        Type type = method.ReflectedType;
        PropertyInfo pi = type.GetProperty(propName);
        object[] attributes = pi.GetCustomAttributes(typeof(SessionAttribute), true);
        if (attributes != null && attributes.Length == 1)
        {
            SessionAttribute ssAttr = attributes[0] as SessionAttribute;
            if (Session.ContainsKey(ssAttr.Key))
            {
                return Session[ssAttr.Key];
            }
        }
        return default(dynamic);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T20:41:30.280

另一种选择可能是您使用[PostSharp](http://www.sharpcrafters.com/)。您定义属性并注入`IL`最终代码，因此它不会更改您的源代码。它有它的坏处和它的优点。

该产品不是免费的。

一些[入门](http://www.sharpcrafters.com/postsharp/documentation)技巧。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T20:34:23.457

如果你想避免编写这么多的 getter 代码，请编写一个辅助方法：

```
public int Foo
{
    get
    {
        return GetHelper<int>("foo");
    }
    set
    {
        Session["foo"] = value;
    }
}

public T GetHelper<T>(string name, T defaultValue = default(T))
{
    if (Session[name] != null)
        return (T)Session[name];
    else
    {
        return defaultValue;
    }
} 
```

如果您有权访问动态，则可以使用动态对象来包装会话：

```
internal class DynamicSession : DynamicObject
{
    private HttpSessionState_session;

    public DynamicSession()
    {
        _session = HttpContext.Current.Session;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        if (_session[binder.Name] != null)
        {
            result = _session[binder.Name];
            return true;
        }
        result = null;
        return false;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        _session[binder.Name] = value;
        return true;
    }
} 
```

然后你可以像这样使用它：

```
dynamic session = new DynamicSession();
    //These properties are "magically" put in and taken out of session!
//get
int foo = session.Foo;
//set
session.Foo = 3; 
```

[最后一个选项是 Resharper 中的Live Templates](http://www.jetbrains.com/resharper/webhelp/Reference__Templates_Explorer__Live_Templates.html)之类的东西，它可以让输入代码变得更加容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T20:36:34.697

如果您希望在运行时执行此操作，请参阅 Dobbs 博士的以下文章[使用 Reflection.Emit 在运行时生成代码](http://drdobbs.com/184416570)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T20:39:10.157

您正在尝试做的事情称为“面向方面的编程”，对于某些任务而言，这相对常见，否则必要的代码将被重复多次，而只需进行非常小的更改。你的例子当然是合格的。

基本思路如下；你创建一个属性，你可以用它来装饰类或类成员。该属性为 CLR 中的消息传递系统定义了一个“上下文”，它允许您将方法拦截器挂钩到将在调用它时运行的方法。

了解这会对性能造成重大影响；成员被属性修饰的对象必须继承自 MarshallByRefObject 或 ContextBoundObject；这些中的任何一个都会在运行时对对象的性能造成大约 10 倍的影响，即使您实际上没有进行任何属性装饰。

这是一些示例代码： http: [//www.developerfusion.com/article/5307/aspect-orienting-programming-using-net/3/](http://www.developerfusion.com/article/5307/aspect-oriented-programming-using-net/3/)

您还可以使用动态代理根据属性装饰或其他基于反射的信息“动态”创建对象。这是 C# 开发人员认为理所当然的很多东西背后的技术，比如 ORM、IoC 框架等。你基本上会使用 Castle DynamicProxy 之类的东西来创建一个看起来像你的基础对象的对象，但是已经覆盖了属性的定义用具有基于文件的填充/持久性逻辑的属性进行装饰。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-13T10:49:14.573

您还可以使用 Castle.Core 中的[DynamicProxy nuget 包](https://gist.github.com/alexandre-spieser/160798e1f9e868f32de287547586ab88)来实现此行为。

您可以拦截对类的所有虚拟属性的 Get 和 Set 方法的调用。但是，您要修改的所有属性 getter 和 setter 都必须是虚拟的。

我在这里提供了一个更完整的答案： [https ://stackoverflow.com/a/48764825/5103354，](https://stackoverflow.com/a/48764825/5103354)[这里](https://gist.github.com/alexandre-spieser/160798e1f9e868f32de287547586ab88) 有一个要点。

应遵守以下行为：

```
 [Fact]
    public void SuccessFullyRegisterGetAndSetEvents()
    {
        ProxyGenerator generator = new ProxyGenerator();
        var tracked = generator.CreateClassProxy<TrackedClass>(new GetSetInterceptor());
        tracked.SomeContent = "some content";
        Assert.Single(tracked.GetEvents());
        var eventAfterSomeContentAssigned = tracked.GetEvents().Last();
        Assert.Equal(EventType.Set, eventAfterSomeContentAssigned.EventType);
        Assert.Equal("some content", eventAfterSomeContentAssigned.Value);
        Assert.Equal("SomeContent", eventAfterSomeContentAssigned.PropertyInfo.Name);
        tracked.SomeInt = 1;
        Assert.Equal(2, tracked.GetEvents().Count);
        var eventAfterSomeIntAssigned = tracked.GetEvents().Last();
        Assert.Equal(EventType.Set, eventAfterSomeContentAssigned.EventType);
        Assert.Equal(1, eventAfterSomeIntAssigned.Value);
        Assert.Equal("SomeInt", eventAfterSomeIntAssigned.PropertyInfo.Name);
        var x = tracked.SomeInt;
        Assert.Equal(3, tracked.GetEvents().Count);
        var eventAfterSomeIntAccessed = tracked.GetEvents().Last();
        Assert.Equal(EventType.Get, eventAfterSomeIntAccessed.EventType);
        Assert.Equal(1, eventAfterSomeIntAccessed.Value);
        Assert.Equal("SomeInt", eventAfterSomeIntAccessed.PropertyInfo.Name);
    } 
```

希望这可以帮助。

# swi-prolog - Prolog 用户识别

> ID：10018562
> 
> 赞同：0
> 
> 时间：2012-04-04T20:12:59.143
> 
> 标签：swi-prolog

我正在使用 prolog 创建一个用于 web 的 API。用户将使用他们的姓名登录，我希望 API 在整个会话期间记住用户，直到用户注销或关闭 API。对于每个唯一用户，这当然必须有所不同。我的问题是我将如何在 prolog 中将其写为 assert/2，或者......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:38:06.937

用于`library(http/http_session)`创建会话和访问会话特定信息。见 [http://www.swi-prolog.org/pldoc/doc/home/vnc/prolog/lib/swipl/library/http/http_session.pl](http://www.swi-prolog.org/pldoc/doc/home/vnc/prolog/lib/swipl/library/http/http_session.pl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:43:19.917

有多种方法可以记录此信息，包括：

*   断言/断言/断言
*   记录/记录

[手动的。](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.13%27,swi%28%27/doc/Manual/db.html%27%29%29)

# java - 离线同步 Android 应用的通用架构

> ID：10018563
> 
> 赞同：2
> 
> 时间：2012-04-04T20:12:58.953
> 
> 标签：java, android, serialization, anonymous-inner-class

我正在构建一个类似于 Android 应用程序的 POS，即使数据连接暂时丢失，它也需要工作。

这个想法是在数据连接可用时立即向服务器报告所有事务。如果没有，请将其存储在本地 SQLite 中，并稍后在连接可用时同步。

第一个计划是将单个事务保存在与服务器上维护的相同的通用数据库结构中，但由于服务器上有许多不同类型的事务和关系，这将有效地从服务器上复制整个数据库结构电话本身。

另一种方法是仅保存用于通知服务器更改的最终 HTTP 请求。这种方法的优点是它只需要一个表，只存储 URL、请求内容、方法等。但是可能有一些调用需要在响应上执行代码，这将被实现为匿名内部类. 这种方法的唯一问题似乎是序列化这些匿名内部类，以便即使在（可能的）电话重启后也可以从数据库加载它们并执行它们。

实现这一点的最佳方法是什么？选项A还是选项B？如果选项 B，是否真的可以序列化和反序列化匿名内部类（在这里有效地用作闭包）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:50:06.547

对于选项 A，您可能希望考虑 CouchDB 来处理设备/服务器复制。

[Android 上的 Couchdb](https://stackoverflow.com/questions/3995881/couchdb-on-android)

# python - 使用 Python 编码 JSON 时如何取消转义 HTML 字符

> ID：10018564
> 
> 赞同：0
> 
> 时间：2012-04-04T20:13:01.000
> 
> 标签：python, json, encoding, escaping

在发送 JSON 时，我需要一种方便的方法来对字符串字段中的 HTML 字符进行转义。我认为写一个自定义`json.JSONEncoder`就可以了。我的编码器看起来像这样：

```
import jinja2, json

class EscapingJSONEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, basestring):
            obj = jinja2.Markup(obj).unescape()
        return json.JSONEncoder.default(self, obj) 
```

我在其中放置了一个调试语句，`default`但它从未出现，所以我假设编码器在字符串编码到达我的自定义`default`实现之前处理它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:13:53.353

您应该覆盖编码方法，因为字符串数据类型不调用“默认”

```
class EscapingJSONEncoder(json.JSONEncoder):
    def encode(self, obj):
        if isinstance(obj, basestring):
            obj = jinja2.Markup(obj).unescape()
        return json.JSONEncoder.encode(self, obj) 
```

# hashmap - 如何访问静态块内的对象

> ID：10018565
> 
> 赞同：1
> 
> 时间：2012-04-04T20:13:04.337
> 
> 标签：hashmap, predicate

我已经在静态块中初始化了哈希映射，我需要访问哈希映射对象以在我的`getExpo`方法中使用它的键来获取值。

我的课在这里

```
public class ExampleFactory {
  static
  {
    HashMap<String,Class<?>> hmap = new HashMap<String,Class<?>>();

    hmap.put("app", application.class);
    hmap.put("expo", expession.class);
  }

  public void getExpo(String key,String expression)
  {
    // I need to access the object in static block

    Class aclass=hmap.get(key); // it works when i place it inside main method but
                                // not working when i place the create object for
                                // Hashmap in static block

    return null;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:18:52.467

将变量声明为类的静态成员，然后将其填充到静态块中：

```
public class ExampleFactory
{
  // declare hmap
  static HashMap<String,Class<?>> hmap = new HashMap<String,Class<?>>();
  static
  {
    // populate hmap
    hmap.put("app", application.class);
    hmap.put("expo", expession.class);

  }
  //...
} 
```

在此之后，您可以从班级内部访问它。

在静态块中删除变量使其无法从该块外部访问。将它声明为类的成员使其可以被类访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:16:59.170

您需要使`hmap`变量成为该类的静态成员。

```
public class YourClass {
   private static Map<String, Class<?>> hmap = new HashMap<String, Class<?>>();

   static {
      // what you did before, but use the static hmap
   }

   public void getExpo(...){
       Class aClass = YourClass.hmap.get(key);
   }

} 
```

因为它是正确的，现在你在静态块中声明它，所以一旦静态块执行它就会丢失。

请注意，您需要确保访问`hmap`是同步的或线程安全的，因为多个实例可能同时修改映射。如果有意义，您可能还想进行`hmap`最终处理。

# php - 我可以设置自己的短信网站吗？如何？

> ID：10018568
> 
> 赞同：3
> 
> 时间：2012-04-04T20:13:14.620
> 
> 标签：php, web, sms, sms-gateway

我是这个网站的新手，而且我不是超级程序员，所以请耐心等待我，另一件事是我的带宽非常小，所以如果你能给我发一封电子邮件，那就太好了。

所以我想知道的是如何在我的网站中添加一些短信支持，以便我可以向我的用户发送消息。我了解运营商提供一些付费服务。我正在寻找的是向包括古巴在内的多个国家发送短信的廉价服务。请任何方法都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:17:06.117

大多数运营商都有一个专用的电子邮件域，用于向其网络上的设备发送 SMS 消息。例如，AT&T 是“*数字*@txt.att.net”，您可以在 google 上查找其余部分。这项服务对您是免费的，但收件人仍需为邮件付费，所以不要随意向人们发送垃圾邮件。此外，收件人无法回复您的消息，这是您需要付费的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:18:49.917

如果您想在国际范围内发送 SMS 消息，我建议您使用[Tropo](https://www.tropo.com/)，因为 Twilio 的国际覆盖范围仍仅处于私人测试阶段。

如果您只在国内发送（即在美国或加拿大境内），[Twilio](http://www.twilio.com/)具有清晰直接的 API 以及合理的关税价格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:18:54.613

有多种可用的 SMS 网关提供商提供可以集成到网站中的简单 Web 服务 API。许多还为多个国家提供国际支持。

在 Google 上快速搜索“SMS 网络服务”将为您提供大量可供选择的供应商。

请务必选择信誉良好的供应商。在我上一家公司，当美国运营商关闭 Clickatel 的共享短代码时，我们遇到了问题。包括我们在内的许多公司都使用相同的简码......不幸的是，其中一些公司正在做阴暗/垃圾邮件，当运营商采取行动时，所有客户都付出了代价。

# python - 数据库中的 django ORM 外键数据未填充到模型中

> ID：10018571
> 
> 赞同：0
> 
> 时间：2012-04-04T20:13:21.447
> 
> 标签：python, django, sqlite, orm, django-south

在 Django 中，我有三个模型：

```
class Player(models.Model)
    team = models.ForeignKey('Team')

class Team(models.Model)
    name = models.CharField(max_length=20)
    coach = models.ForeignKey('Coach')

class Coach(models.Model)
    name = models.CharField(max_length=255) 
```

我使用 South 更改模型以将 Coach 外键添加到 Player：

```
class Player(models.Model)
    team = models.ForeignKey('Team')
    coach = models.ForeignKey('Coach') 
```

我在数据迁移中迁移数据：

```
players = orm.Player.objects.all()
for player in players:
    player.coach = player.team.coach
    player.save() 
```

当我在数据库中检查数据时，数据迁移得很好（SQLite 版本 3.7.2）：

```
sqlite> SELECT team_id, coach_id from Player WHERE id = 1;
2|4 
```

但是当我尝试通过 Django ORM 访问数据时：

```
>> player = Player.objects.get(pk=1)
>> player.coach
---------------------------------------------------------------------------
DoesNotExist                              Traceback (most recent call last)

/home/pat/Development/baseball/<ipython console> in <module>()
/usr/local/lib/python2.6/dist-packages/Django-1.3-py2.6.egg/django/db/models/fields/related.pyc in __get__(self, instance, instance_type)
    299                 if self.field.null:
    300                     return None
--> 301                 raise self.field.rel.to.DoesNotExist
    302             other_field = self.field.rel.get_related_field()
    303             if other_field.rel:

DoesNotExist: 
```

几点注意事项：

这不是实际的代码，但它基本上是它的精确匹配。不要要求查看实际代码，因为我不能分享它——它是机密的，不属于我。但是，我可以使用此类似示例提供更多详细信息。

在创建迁移之前，我不知道我需要 Player 模型上的 coach 字段 - 所以我手动将它添加到现有迁移中。运行迁移时，我没有收到任何错误，而且，就像我说的，迁移似乎在数据库级别运行良好。

# javascript - UTC 日期之间的 Moment.js 差异

> ID：10018575
> 
> 赞同：16
> 
> 时间：2012-04-04T20:13:42.507
> 
> 标签：javascript, node.js, date, momentjs

我正在使用[moment.js](http://momentjs.com/)来处理 javascript 中的日期。所有日期都是 UTC（或应该是）。

我有以下日期（距当前时间 60 分钟）：

```
//Wed, 04 Apr 2012 21:09:16 GMT
to   = moment.utc().add('m', 60).toDate(); 
```

现在我想得到这个日期和当前 UTC 日期时间之间的秒差，所以我这样做：

```
seconds = moment.utc().diff(to, 'seconds'); 
```

这将返回`10800`而不是`3600`，因此是 3 小时，而不是 1 小时。

任何想法我做错了什么？

谢谢！

编辑：

我将这条线更新为`seconds = moment().diff(to, 'seconds');`，它得到了正确的秒数，但它`-3600`不是积极的。

编辑：

我现在有这两个时刻对象：

```
{ _d: Thu, 05 Apr 2012 17:33:18 GMT, _isUTC: true }
{ _d: Thu, 05 Apr 2012 16:38:45 GMT, _isUTC: true } 
```

d1 和 d2。

当我这样做时`d1.diff(d2, 'hours', true);`返回`4`。我认为这绝对与UTC有关，但似乎这*应该*可行。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-06T06:19:34.300

这是一个合法的错误。我刚刚在这里提交：[https ://github.com/timrwood/moment/issues/261](https://github.com/timrwood/moment/issues/261)

要解决它，请改用以下内容。

```
var a = moment.utc().add('m', 60).toDate(),
    b = moment().diff(to, 'seconds'); // use moment() instead of moment.utc() 
```

此外，如果您需要获取`toString`日期，您可以使用`moment().toString()`它作为包装的代理`Date().toString()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:42:16.640

由于您使用的是`toDate()`. 尝试直接使用 moment（即更改为`to = moment.utc().add('m', 60);`）。

# jquery - 用于 DIV 上可缩放背景图像的 jQuery 插件

> ID：10018578
> 
> 赞同：0
> 
> 时间：2012-04-04T20:14:13.387
> 
> 标签：jquery

我尝试研究但无法想出一个好的 jQuery 插件，它允许我在可扩展的同时将背景图像插入到 div 中。例如，

假设我有 4 个不同的 div，如下所示：

```
<div id="one">

</div>

<div id="two">

</div>

<div id="three">

</div>

<div id="four">

</div> 
```

每个 #/id/div 都必须有自己独特的图像，并且必须调整大小或可缩放到浏览器的宽度和高度。我希望它与 IE7+ 兼容。如果 Stack Overflow 社区可以提供帮助，那就太好了。

**我知道我可以在 div 上使用 background-resize:100% 但只能在现代浏览器上使用。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:27:12.877

我拼凑的东西让你开始。在创建或添加两个额外的宽度和高度参数之前设置 div 的大小。

```
(function( $ ) {
  $.fn.bgImage = function( src ) {
    var d=this;
    var ht=d.html();
    var z=parseInt(d.css('z-index'));
    if(!z) z=0;  
    var oImg=document.createElement('img'); 
    oImg.src=src;
    oImg.style.width=d.width()+'px';
    oImg.style.height=d.height()+'px';
    oImg.style.position='absolute';
    oImg.style.zIndex=z;
    d.html('');
    d.append('<div id="a" style="position:absolute;z-index:'+(z+1)+';">'+ht+'</div>');
    d.append(oImg);
  };
})( jQuery );

$('#one').bgImage('http://www.google.com/intl/en_ALL/images/logos/images_logo_lg.gif'); 
```

# mongodb - 如何只导入不存在的文件？

> ID：10018580
> 
> 赞同：4
> 
> 时间：2012-04-04T20:14:16.300
> 
> 标签：mongodb

我正在使用 mongo import 来导入一堆 json，我正在寻找一种只导入不存在的记录的方法（可以通过 oid 检查）。我尝试使用 --upsert 但它会更新记录，如果它已经存在，我想完全忽略它。

有任何想法吗...？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T23:24:44.353

mongoimport 的默认行为不应该是覆盖现有文档：在 JS shell 中，我在集合“testimport”中创建了一个文档

```
> db.testimport.save({_id:1, x:"a"})
> db.testimport.find()
{ "_id" : 1, "x" : "a" }
> 
```

以下是文件 import.json 的内容。它包含 2 个文档，一个具有唯一 _id，另一个具有重复 _id。

```
import.json
{_id:1, x:"b"}
{_id:2, x:"b"} 
```

在新的终端窗口中，运行 mongoimport：

```
$ ./mongoimport -d test -c testimport import.json -vvvvv 
Wed Apr  4 19:03:48 creating new connection to:127.0.0.1
Wed Apr  4 19:03:48 BackgroundJob starting: ConnectBG
Wed Apr  4 19:03:48 connected connection!
connected to: 127.0.0.1
Wed Apr  4 19:03:48 ns: test.testimport
Wed Apr  4 19:03:48 filesize: 29
Wed Apr  4 19:03:48 got line:{_id:1, x:"b"}
Wed Apr  4 19:03:48 got line:{_id:2, x:"b"}
imported 2 objects
$ 
```

尽管 mongoimport 的输出表明导入了两个对象，但 _id:1 的文档并未被覆盖。

```
> db.testimport.find()
{ "_id" : 1, "x" : "a" }
{ "_id" : 2, "x" : "b" }
> 
```

如果使用了 --upsert 标志，那么带有 _id:1 的文档将被更新：

```
$ ./mongoimport -d test -c testimport import.json -vvvvv --upsert
Wed Apr  4 19:14:26 creating new connection to:127.0.0.1
Wed Apr  4 19:14:26 BackgroundJob starting: ConnectBG
Wed Apr  4 19:14:26 connected connection!
connected to: 127.0.0.1
Wed Apr  4 19:14:26 ns: test.testimport
Wed Apr  4 19:14:26 filesize: 29
Wed Apr  4 19:14:26 got line:{_id:1, x:"b"}
Wed Apr  4 19:14:26 got line:{_id:2, x:"b"}
imported 2 objects
$ 
```

在 JS shell 中，我们可以看到 _id:1 的文档已经更新：

```
> db.testimport.find()
{ "_id" : 1, "x" : "b" }
{ "_id" : 2, "x" : "b" }
> 
```

这不是您正在经历的行为吗？以上是用2.1.1-pre版本测试的，但是我不相信mongoimport代码已经改变了一段时间。

# javascript - 使用PhoneGap在Eclipse中的JavaScript/HTML高亮/调试

> ID：10018582
> 
> 赞同：9
> 
> 时间：2012-04-04T20:14:29.597
> 
> 标签：javascript, html, eclipse, cordova, perspective

我正在 Eclipse 中使用 PhoneGap for Android 编写应用程序。由于该项目是一个 Android 项目，因此它是从 Java 角度来看的。无论出于何种原因，在 Android/Java 项目/透视图中，Eclipse 都不会为我突出显示 HTML 和 JavaScript，并且切换到 JavaScript 透视图也不会突出显示代码。如果没有高亮或调试工具，调试过程非常缓慢。

在 Java 环境中工作时，如何告诉 Eclipse 为我突出显示 HTML 和 JavaScript？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T23:25:13.210

确保您已安装 JSDT（用于 JavaScript）和网页编辑器（用于 HTML）。从 About Eclipse -> Installation Details，检查 JavaScript Development Tools(JSDT) 和 Web Page Editor。

要安装它们：

*   安装新软件 -> 使用：Indigo（或 Helios）->Web、XML Java EE 和 OSGi 企业开发 -> JavaScript 开发工具
*   安装新软件 -> 使用：Indigo（或 Helios）->Web、XML Java EE 和 OSGi 企业开发 -> 网页编辑器

或者，您可以使用我为 Android 进行 PhoneGap 开发而​​创建的 AppLaud Eclipse 插件。请参阅[入门说明](http://www.mobiledevelopersolutions.com/home/start)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T22:58:28.917

我找到的唯一真正的解决方案是创建一个新的 html 文档并粘贴原始文档中的文本，删除原始文档，然后重命名新文档。这种技术很愚蠢，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T00:40:38.493

Aptana 是 Eclipse 中用于 HTML 和 Javascript 编辑的最佳插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T13:26:00.233

这个 Eclipse 插件很有用：http: [//www.aptana.com/products/studio2](http://www.aptana.com/products/studio2)

西蒙麦克唐纳德 [http://hi.im/simonmacdonald](http://hi.im/simonmacdonald)

# iphone - Xcode 中的运算符关键字

> ID：10018585
> 
> 赞同：1
> 
> 时间：2012-04-04T20:14:34.520
> 
> 标签：iphone, xcode, operator-keyword, c99, keyword

我在 Xcode 中遇到了`operator`关键字问题。我在头文件 (.h) 中有这个，但由于 C++ 中的运算符重载，Xcode 将其识别为关键字，即使我将文件类型设置为默认 C 头文件而不是 C++ 头文件。我要编译的代码都是用 C 编写的，我遇到问题的代码行是这样的

```
struct foo {

    int a;
    int b;
    ...

    char operator[80];
} 
```

我现在坚持了一段时间。运算符用作变量名的原因现在不在范围内，因为这是一个跨平台代码，我无法更改，并且可以在许多其他低级设备的平台中编译。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:33:04.773

如果您使用预处理器怎么样：

```
#define operator _operator 
```

? 将上述内容放在头文件之前读取的头文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:17:21.510

重要的文件类型是包含标头的文件。如果您尝试将此标头包含在 C++ 文件中，则预期会出现此错误，并且无法从 C++ 使用此标头。如果您已经只在 C 文件中使用它，那么我不确定问题可能是什么。

# c# - 如何将参数从代码传递到 ValueConverter

> ID：10018596
> 
> 赞同：2
> 
> 时间：2012-04-04T20:15:07.163
> 
> 标签：c#, .net, wpf, ivalueconverter

我有一个 IValueConverter 类，用于更改数据网格单元格的背景颜色，以防单元格本身的值大于 0（不重要）。

现在我想创建几个包含这个数据网格的窗口实例。根据在 Window 实例中定义的某些值，IValueConverter 应为数据网格的单元格的背景着色或不着色。因此 IValueConverter 应根据 Window 类的实例执行不同的工作。

现在的问题是：我无法在 XAML 中传递 ConverterParameter，因为该参数将是所有窗口实例的修复参数。我考虑过以编程方式将相关信息传递给 IValueConverter 类（这是必需的），但是如何访问 IValueConverter 类的实例？我当前的解决方案：我将一些静态变量放入 IValueConverter 类中，这样我就可以从 Window 类的实例中访问它们。但是这个解决方案是一个糟糕的解决方案，因为变量是静态的，因此 ValueConverter 在每个窗口实例中的行为方式都相同。

有谁知道如何从 Window 实例以编程方式访问 IValueConverter 实例？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:20:38.027

由于您无法将数据绑定到 ConverterParameter，因此您可以选择以下两种方式之一（另请参阅[此 SO 问题](https://stackoverflow.com/questions/4388326/silverlight-4-0-binding-to-converter-parameter)）：

1.  将依赖属性添加到您的视图模型并执行多值转换器
2.  将整个视图模型传递给您的绑定表达式

# macos - JNI在不同平台上编译

> ID：10018597
> 
> 赞同：0
> 
> 时间：2012-04-04T20:15:07.597
> 
> 标签：macos, compiler-construction, java-native-interface, zeromq

我正在尝试编译 0MQ java JNI 绑定...如果我在 mac os x 上编译 jar，我可以将它复制到 linux 发行版吗？

```
Download jzmq, the java JNI lib for zmq. Uncompress and cd into that dir, and build it:
./autogen.sh  
./configure  
make  
make install  
You'll end up with the zmq.jar in /usr/local/share/java/ and the native lib in /usr/local/lib 
```

[http://blog.pmorelli.com/getting-zeromq-and-jzmq-running-on-mac-os-x](http://blog.pmorelli.com/getting-zeromq-and-jzmq-running-on-mac-os-x)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T00:21:23.523

您的问题不是很清楚，但 JAR 文件是可移植的：JNI 库不是。

# jquery - 自定义 jQuery 手风琴并隐藏下一个 div

> ID：10018599
> 
> 赞同：0
> 
> 时间：2012-04-04T20:15:19.043
> 
> 标签：jquery, jquery-ui-accordion

我有一个自定义手风琴脚本 - [http://jsfiddle.net/nJpNb/2/](http://jsfiddle.net/nJpNb/2/)

我想要做的是在单击 $(".more") 时隐藏上一个/下一个 div。目前所有面板都保持打开状态，因此脚本大部分都有效。

这里的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:18:55.860

只需添加

```
$(".newsBody").hide();
$('.newsTeaser').show(); 
```

到第一行`$(".more").click(function() {`

演示：http: [//jsfiddle.net/nJpNb/5/](http://jsfiddle.net/nJpNb/5/)

但请缓存项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:20:07.047

尝试在您的`.more`点击中添加以下 2 行，如下所示，

```
//hide all others and show newsTeaser
$newsItem.find('.newsBody').hide();
$newsItem.find('.newsTeaser').show(); 
```

[**演示**](http://jsfiddle.net/skram/nJpNb/4/)

**完整代码：**

```
$(".newsBody").hide();
var $newsItem = $('.newsItem');
$(".more").click(function() {

    //hide all others and show newsTeaser
    $newsItem.find('.newsBody').hide();
    $newsItem.find('.newsTeaser').show();

    var $parent = $(this).parent();
    $parent.hide();
    $parent.parent().find(".newsBody").show();
});
$(".less").click(function() {
     var $parent = $(this).parent();
    $parent.hide();
    $parent.parent().find(".newsTeaser").show();

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:20:35.627

为每个部分设置一个 id（因此它们有一个类和 id）。然后当有人选择第 2 节时自动隐藏第 1 节和第 3 节

# c# - 主键作为外键抛出重复定义异常

> ID：10018601
> 
> 赞同：0
> 
> 时间：2012-04-04T20:15:45.863
> 
> 标签：c#, entity-framework, entity-framework-4, fluent

我正在使用 Enterprise Framework 4.3.1 及其 Fluent API 来设置我的实体映射到现有数据库。

我有一个非常特殊的关联表，它的主键同时是其父表的两个外键。

我得到的错误是：

```
Schema specified is not valid. Errors: 
(68,6) : error 0019: Each property name in a type must be unique. Property name 'ProductId' was already defined.
(69,6) : error 0019: Each property name in a type must be unique. Property name 'PropertyId' was already defined. 
```

我的表会是这样的：

```
Products (ProductId, ...)
ProductProperties (ProductPropertyId, ...) // does not depend on Product!
DefaultPropertyValues (ProductId (FK1, PK), ProductPropertyId (FK2, PK), DefaultValue) 
```

这是我设置该特定实体的代码：

```
//table mapping
modelBuilder.Entity<DefaultPropertyValue>().ToTable("DefaultPropertyValues", "dbo");

//not null value
modelBuilder.Entity<DefaultPropertyValue>().Property(d => d.DefaultValue).IsRequired();
//primary key
modelBuilder.Entity<DefaultPropertyValue>().HasKey(d => new { d.ProductId, d.ProductPropertyId });

//foreign key 1 -- see helper method
SetupGenericOneToManyForeignKey<DefaultPropertyValue, Product>(modelBuilder, d => d.Product, "ProductId");
//foreing key 2 -- see helper method
SetupGenericOneToManyForeignKey<DefaultPropertyValue, ProductProperty>(modelBuilder, d => d.ProductProperty, "ProductPropertyId");

//helper method
private CascadableNavigationPropertyConfiguration SetupGenericOneToManyForeignKey<TDependent, TParent>(DbModelBuilder modelBuilder, Expression<Func<TDependent, TParent>> foreignKeyField, string dbForeignKeyField) where TDependent: class where TParent: class
{
    return modelBuilder.Entity<TDependent>().HasRequired<TParent>(foreignKeyField).WithMany().Map((m) => m.MapKey(dbForeignKeyField));
} 
```

所以，我的问题是......我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:53:35.270

......如果我做对了，你想要做的事情应该是这样的......

```
public class Product
{
    public int ProductId { get; set; }
    public virtual ICollection<DefaultPropertyValue> DefaultPropertyValues { get; set; }
}
public class ProductProperty 
{
    public int ProductPropertyId { get; set; }
    public virtual ICollection<DefaultPropertyValue> DefaultPropertyValues { get; set; }
}
public class DefaultPropertyValue 
{
    public int ProductId { get; set; }
    public int ProductPropertyId { get; set; }
    public Product Product { get; set; }
    public ProductProperty ProductProperty { get; set; }
}
...
modelBuilder.Entity<DefaultPropertyValue>()
    .HasKey(i => new { i.ProductId, i.ProductPropertyId });

modelBuilder.Entity<DefaultPropertyValue>()
    .HasRequired(i => i.Product)
    .WithMany(u => u.DefaultPropertyValues)
    .HasForeignKey(i => i.ProductId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<DefaultPropertyValue>()
    .HasRequired(i => i.ProductProperty)
    .WithMany(u => u.DefaultPropertyValues)
    .HasForeignKey(i => i.ProductPropertyId)
    .WillCascadeOnDelete(false); 
```

...关键是 HasForeignKey 中的 IMO，
希望这会有所帮助

注意：`WillCascadeOnDelete`当然是可选的，`WithMany`可以为空，但我通常以类似方式映射所有部分。

# facebook-graph-api - facebook->getUser() 总是返回 0

> ID：10018603
> 
> 赞同：1
> 
> 时间：2012-04-04T20:15:48.707
> 
> 标签：facebook-graph-api, login, facebook-php-sdk, fbconnect

我正在使用 PHP SDK，我现在只是在测试它，看起来 getUser 在登录后返回 0。一直在阅读文档，似乎找不到任何东西。下面是我的用户登录后重定向到的页面。

```
<?php

require_once("facebook.php");
$facebook = new Facebook(array('appId' => ???,
                             'secret' => '???'));
$uid = $facebook->getUser;
    if($uid){
    try{
        $user_profile = $facebook->api('/me','GET');
        $params = (array('next' => 'http://fbtest.net23.net/'));
        $logouturl = $facebook->getLogoutUrl($params);
        $message = "<p>You ARE loged in with Facebook :)</p>\n";
        $a = "<a href=\"{$logouturl}\">Logout</a>\n";
        $content = $message . "<br/>\n" . $a;
}
 catch (FacebookApiException $e){
     error_log($e);
     $content = "<p>Dont work!</p>\n";
 }
}
else{
      $params = (array('scope' => 'read_stream, friends_likes'));
      $loginurl = $facebook->getLoginUrl($params);
      $message = "<p>You are NOT loged in with Facebook :(</p>\n";
      $a = "<a href=\"{$loginurl}\">Login with FB</a>\n";
      $content = $message . "<br/>" . $a;
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<title>test</title>
</head>
<body> 

    <?php echo $content;?>

</body>
</html> 
```

问题是在用户登录后，他们得到了 else 语句的结果。任何帮助或建议将不胜感激:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:53:11.263

`()`失踪...

```
$uid = $facebook->getUser(); 
```

# java - 如何在 Play Framework 2.0 中使用 OAuth 2

> ID：10018604
> 
> 赞同：8
> 
> 时间：2012-04-04T20:15:49.690
> 
> 标签：java, scala, playframework

所以我使用 scribe 连接到 Facebook (OAuth 2)。但是我无法获得授权令牌。在[Play 的网站上](http://www.playframework.org/documentation/2.0/ScalaOAuth)，他们说

> “版本 2 非常简单，无需库或助手即可轻松实现，”。

但是，我不太确定该怎么做！

我尝试更改将密钥发送到构建方法的路由文件。

```
GET    /slivr_auth/*name        controllers.Application.getKey(name) 
```

但是，身份验证密钥包含一个“？” 在网址中，所以我无法将其捕获为字符串。

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:45:55.200

要回答您的具体问题，您可以通过调用获取请求（查询）参数：

```
Controller.request().queryString() 
```

获得 OAuth2 很容易，但并非易事。有一个工作样本会有所帮助。我建议下载 Play1，并查找 Facebook 身份验证的示例。然后将代码移植到 Play2。我做了上面的事情，发现这个过程很有启发性。您将意识到每个站点和 API 都有其怪癖/需求，因此似乎很少有额外的代码可以从一个站点到另一个站点。

一个更一步一步的答案是有几个步骤。首先，您需要获得一个`access_token`，然后您才能使用它。要获得一个，`access_token`您需要将用户发送到站点授权 url，到目前为止，facebook 这将是这样的：

```
https://graph.facebook.com/oauth/authorize/?client_id=idFromFacebook&redirect_uri=http://yourdomain.com/auth 
```

一旦您的用户接受了授权，该站点将使用代码重定向用户，例如`http://yourdomain.com/auth?code=XYZ_ABC`. 然后，您需要从站点访问令牌 url 请求以获取访问令牌。对于 Facebook，这将类似于：

```
https://graph.facebook.com/oauth/access_token?client_id=idFromFacebook&client_secret=secredFromFacebook&code=XYZ_ABC&redirect_uri=... 
```

来自上述 url 的响应将包含`access_token`在其中。

现在，您可以开始使用访问令牌来请求信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:41:01.307

我不知道它是否有帮助，但我在 Scala 和 Java 中创建了一个 Play 2.x 客户端，它支持 OAuth/CAS/OpenID/HTTP 身份验证和用户配置文件检索：[https ://github.com/leleuj/播放 pac4j](https://github.com/leleuj/play-pac4j)。

对于 OAuth 支持，它基于 Scribe，支持 Facebook、Twitter、Google、Yahoo、DropBox、Github、LinkedIn、Windows live、WordPress...

# jquery - jQuery Mobile 表单不验证

> ID：10018605
> 
> 赞同：0
> 
> 时间：2012-04-04T20:15:55.930
> 
> 标签：jquery, ajax, jquery-mobile, contact-form

好的，起初我遇到了表格没有发送到我的电子邮件地址的问题。我用 ajax 解决了这个问题，现在我似乎无法让我的验证工作。这是我的表单代码，以及为验证调用的一种 css 样式：http: [//jsfiddle.net/gbaH7/](http://jsfiddle.net/gbaH7/)

这是我要模仿的：http: [//jsfiddle.net/na7bv/light/](http://jsfiddle.net/na7bv/light/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:54:39.390

“返回错误；” 提交单击事件处理程序中的语句阻止验证。

# html - 创建一个水平菜单 - 内联与内联块，与浮动？

> ID：10018608
> 
> 赞同：0
> 
> 时间：2012-04-04T20:16:13.240
> 
> 标签：html, css

在使用创建我的水平菜单时，`<ul><li>....</li></ul>`我遇到了一些我不太了解的行为。

*   ul li {display:inline;} 为什么这仍然会导致菜单是垂直的？如果我添加 float:left 那么它会变成水平的，但是将显示设置为内联还不够吗？
*   另一方面，只需执行： ul li {display:inline-block;} 会产生一个水平菜单，而无需使用浮动。这是为什么？另外，在创建水平菜单时哪种方法更好？还是有比这两种更好的第三种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:21:36.547

内联是显示的默认值，它只是将事物按正常顺序排列。

有关更多说明，请参见[http://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:39:23.897

我认为浮动通常用于下拉菜单，而 inline-block 仅用于 1 行菜单

# facebook - Facebook Graph API Explorer URL 参数

> ID：10018615
> 
> 赞同：1
> 
> 时间：2012-04-04T20:16:37.180
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook Graph API Explorer 进行一些调试。在我的应用程序的管理界面中，我想提供一个快速链接，该链接将使用 Facebook 对象 ID 和 API 令牌打开 Graph Explorer。

类似于：

[http://developers.facebook.com/tools/explorer?path=<object_id>&token=<token>&method=GET](http://developers.facebook.com/tools/explorer?path=<object_id>&token=<token>&method=GET)

我能够指定路径和方法参数。这些输入字段会在页面上正确填充。但是，我在使用令牌参数时遇到了问题。我尝试了“token”和“access_token”，似乎都没有填充access_token输入字段。它只使用默认令牌。

是否可以将 API 令牌指定为该 URL 的参数？每次都将其复制/粘贴到字段中很痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:21:06.707

`access_token`是您应该使用的参数名称

如果您替换值并将其直接放在浏览器选项卡中，它应该可以工作

```
https://developers.facebook.com/tools/explorer/?method=GET&
path=me/likes/
&access_token=ACCESS_TOKEN_VALUE 
```

或者

```
https://graph.facebook.com/USER_ID/likes?method=GET&format=json
&access_token=ACCESS_TOKEN_VALUE 
```

但**请确保您通过**url传递有效的访问令牌

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:43:45.867

据我所知，无法通过资源管理器的 url 添加 access_token。资源管理器的要点之一是您可以查看端点，而无需构建请求令牌的流程。

如果您想查看调用是否适用于您的 access_token，请调试它并查看它是否具有所需的权限。或者只是简单地在您的浏览器中构建调用，它也是一样的。

# javascript - 对于可被 10 整除的数字，为什么 string 到 int 之间的转换不能按预期工作？

> ID：10018618
> 
> 赞同：0
> 
> 时间：2012-04-04T20:16:57.083
> 
> 标签：javascript

如果在“for”循环中使用 parseInt，它适用于所有情况。但在此示例中，对于 99-100 或 999-1000 等情况，它无法正常工作。这里会发生什么？隐式转换是错误的吗？

```
function buggy10000(value)
{
    var r = value.split("-");
    var len=r.length;
    var j;
    if(len==2)
    {
        console.log("For in RANGE " + r[0]+"<-->"+r[1]);
        for(j=r[0];j<=r[1];j++)
        {
            console.log(j);
        }
    }

}

buggy10000("98-99");
buggy10000("99-100");  //for not working as expected
buggy10000("100-102"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T20:28:25.480

因为：“98”<=“99”（字符串比较）

“100”<=“102”

但是“99”>“100”

转换仅在调用 j++ 时出现，但对于从未发生过的第二种情况 (99-100)，因为循环条件失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:30:35.917

```
function buggy10000(value)
{
    var r = value.split("-");
    var len=r.length;
    var j;
    if(len==2)
    {
        console.log("For in RANGE " + r[0]+"<-->"+r[1]);
        for(j=r[0]*1;j<=r[1]*1;j++) <----Modified
        {
            console.log(j);
        }
    }

} 
```

它有效吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:30:57.760

这是一个类型转换问题，它与比较有关。您将字符串传递给您的函数，拆分字符串，然后比较它们。当您比较字符串而不是整数时，JS 会感到困惑。

我按如下方式重写了您的函数，以将这些值显式解析为整数，并且它现在按您期望的方式工作。

```
function buggy10000(value)
{
    var r = value.split("-");
    var len=r.length;
    var j;
    if(len==2)
    {
        console.log("For in RANGE " + r[0]+"<-->"+r[1]);
        r[0] = parseInt(r[0]);
        r[1] = parseInt(r[1]);
        for(j=r[0];j<=r[1];j++)
        {
            console.log(j);
        }
    }

} 
```

# java - 硒元素位置

> ID：10018621
> 
> 赞同：2
> 
> 时间：2012-04-04T20:17:01.277
> 
> 标签：java, selenium, webdriver, selenium-webdriver, functional-testing

有没有一种简单的方法可以从另一个元素中找到一个子元素（这两个项目都是使用 PageFactory 定位的）？我们有一组包含许多模块的容器，我想确保它们显示在正确的位置。

API似乎只有以下方法：

```
webElement.findElement(s).(By by); 
```

是否有一种简单的方法可以执行以下操作：

```
webElement.findElement(s)(WebElement webElement); 
```

甚至更好：

```
webElement.contains(WebElement webElement); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:35:11.400

我终于得到了你需要的东西。我最好的解决方案是：

```
public static void assertContains(WebElement outerElem, WebElement innerElem) {
    // get borders of outer element
    Point outerLoc = outerElem.getLocation();
    Dimension outerDim = outerElem.getSize();
    int outerLeftX = outerLoc.getX();
    int outerRightX = outerLeftX + outerDim.getWidth();
    int outerTopY = outerLoc.getY();
    int outerBottomY = outerTopY + outerDim.getHeight();

    // get borders of inner element
    Point innerLoc = innerElem.getLocation();
    Dimension innerDim = innerElem.getSize();
    int innerLeftX = innerLoc.getX();
    int innerRightX = innerLeftX + innerDim.getWidth();
    int innerTopY = innerLoc.getY();
    int innerBottomY = innerTopY + innerDim.getHeight();

    // assures the inner borders don't cross the outer borders
    final String errorMsg = "ughh, some error message";
    final boolean contains = (outerLeftX <= innerLeftX)
            && (innerRightX <= outerRightX)
            && (outerTopY <= innerTopY)
            && (innerBottomY <= outerBottomY);
    assertTrue(errorMsg, contains);
} 
```

...仅当这些容器都不重叠时才有效。如果他们这样做，我会尝试一些黑暗和狂野的魔法，`innerElem.getTag()`并`getText()`测试外部文本是否包含内部元素。一种方法：

```
public static void assertContains(WebElement outer, WebElement inner) {
    // e.g. //div[text()='some text in inner element']
    final String findInner = ".//" + inner.getTagName() + "[text()='" + inner.getText() + "']";
    try {
        outerElem.findElement(By.xpath(findInner));
    } catch (NoSuchElementException ignored) {
        fail("Some horrible message! We are all doomed!");
    }
    // passed
} 
```

...或类似的东西。可能需要[normalize-space()](http://www.w3.org/TR/xpath/#function-normalize-space)或[contains()](http://www.w3.org/TR/xpath/#function-contains)（或两者），因为...

当然，这仍然是猜测。第一种方法可能有误报和否定（但鉴于我的需要，我更喜欢它），第二种方法应该只有误报。您可以将它们结合起来或自己发明一些东西（例如使用`Reflection`您已经说过的）。

或者[提交一个错误](http://code.google.com/p/selenium/issues/entry)。

# css - 超链接按钮

> ID：10018622
> 
> 赞同：0
> 
> 时间：2012-04-04T20:17:02.537
> 
> 标签：css, forms, button, hyperlink

我正在尝试格式化回复按钮：

```
.replyBtn {
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
    text-decoration:none;
}
.replyBtn:hover {
    background-color:#333;
    color:#FFFFFF;
    font-weight:bold;
    padding:3px;
    font-size:12px;
    text-decoration:none;
}
.replyBtn:link {
    background-color:#333;
    color:#FFF;
    font-weight:bold;
    padding:3px;
    font-size:12px;
}
.replyBtn:active {
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
}
.replyBtn:visited {
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
} 
```

背景颜色发生变化。唯一错误的是它显示带有下划线的超链接颜色（这是我不希望它拥有的东西）。此外，文本的颜色应在悬停时变为白色......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T06:00:24.773

我成功地将我所需的行为应用为

```
a:link.replyBtn, a:visited.replyBtn, 
a:active.replyBtn, a:hover.replyBtn {...} 
```

在我的页面上，所有链接都按预期显示，即相对于它们的 css 类。它在 Chrome 上工作，但不是 IE，仍在工作......希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:19:33.587

`a`在类前面添加

```
a.replyBtn:hover 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:22:30.320

CSS 按使用的选择器的具体顺序工作，然后，如果两个选择器同样具体，则按最后的顺序。将您的 CSS 重新排序为：

```
.replyBtn {
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
    text-decoration:none;
}
.replyBtn:link {
    background-color:#333;
    color:#FFF;
    font-weight:bold;
    padding:3px;
    font-size:12px;
}
.replyBtn:visited {
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
}
.replyBtn:hover {
    background-color:#333;
    color:#FFFFFF;
    font-weight:bold;
    padding:3px;
    font-size:12px;
    text-decoration:none;
}
.replyBtn:active {
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
} 
```

我会指出，您似乎正在`.replyBtn`使用默认设置元素的样式，然后在您的`.replyBtn:link`样式中覆盖这些默认设置。我意识到您可能有其他具有相同类名的元素类型，但您应该在 中定义`a`/link-specific 样式，因此它形成*所有*这些链接`.replyBtn:link`的默认值：

 *```
.replyBtn:link {
    text-decoration: none;
    background-color:#333;
    color:#FFF;
    font-weight:bold;
    padding:3px;
    font-size:12px;
}

/* all the other stuff... */ 
```

* * *

**针对评论中留下的评论进行**编辑，来自 OP：****

 **> 试试这个：jsfiddle.net/CTxQs。

好吧，假设您的 HTML 标记是：

```
<div class="replyBtn"><a href="#btn_comment">Reply</a></div>​ 
```

你的 CSS 是错误的。这个选择器：

```
.replyBtn:link {
} 
```

选择作为链接的类名元素`replyBtn`；如果您的`a`元素具有`.replyBtn`. 但事实并非如此；该`a`元素是该元素的*子*元素`.replyBtn` `div`。将您的选择器修改为以下内容：

```
.replyBtn { /* selects the div */
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
    text-decoration:none;
}

.replyBtn a:link { /* selects the a that's a child of the div */
    background-color:#333;
    color:#FFF;
    font-weight:bold;
    padding:3px;
    font-size:12px;
    text-decoration:none;
}
.replyBtn a:visited {
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
}
.replyBtn a:hover {
    background-color:#333;
    color:#FFFFFF;
    font-weight:bold;
    padding:3px;
    font-size:12px;
    text-decoration:none;
}
.replyBtn a:active {
    background-color:#CCC;
    color:#333333;
    font-weight:bold;
    padding:3px;
    font-size:12px;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CTxQs/11/)。

进一步阅读，来自 Eric Meyer：

*   [谁订购了链接状态？](http://meyerweb.com/eric/thoughts/2007/06/11/who-ordered-the-link-states/).
*   [链接特异性](http://meyerweb.com/eric/css/link-specificity.html)。***

# php - 我需要使用 php mysql 和 jqwey 创建一个自动完成组合框

> ID：10018625
> 
> 赞同：-5
> 
> 时间：2012-04-04T20:17:11.307
> 
> 标签：php, jquery, mysql

我需要一些帮助。我有一个数据库，它有一个 100 行的字段调用名称之一我需要创建一个**自动完成组合框**，以便用户可以单击它，这样它将显示所有列表并滚动显示，以便他可以选择其中一个或他可以通过在该**自动完成组合框中**键入名称来搜索名称，如果结果超过 10，它将显示一个***滚动*****，以便他可以使用php、mysql 和 jquery**选择其中一个

 **多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T23:23:02.047

我花了几分钟来了解您在寻找什么。如果你更好地表达你的问题并使用一些标点符号，你会得到更好的回应！

无论如何，这就是你要找的东西（我认为）：[使用 PHP 和 MySQL 的 jQuery 组合框](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/phpintegration/bind-jquery-combobox-to-mysql-database-using-php.htm)**

# ruby-on-rails-3 - 无法启动 webbrick - TCPServer 错误：地址已在使用中

> ID：10018629
> 
> 赞同：4
> 
> 时间：2012-04-04T20:17:29.063
> 
> 标签：ruby-on-rails-3

我收到以下错误：

```
$rails server --binding=127.0.0.1
=> Booting WEBrick
=> Rails 3.1.1 application starting in development on http://127.0.0.1:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-04-04 13:02:35] INFO  WEBrick 1.3.1
[2012-04-04 13:02:35] INFO  ruby 1.9.2 (2011-07-09) [x86_64-darwin10.8.0]
[2012-04-04 13:02:35] WARN  TCPServer Error: Address already in use - bind(2)
Exiting
/Users/TravisKs/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/utils.rb:73:in `initialize': Address already in use - bind(2) (Errno::EADDRINUSE)
from /Users/TravisKs/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/utils.rb:73:in `new'
from /Users/TravisKs/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/utils.rb:73:in `block in create_listeners'
from /Users/TravisKs/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/utils.rb:70:in `each'
from /Users/TravisKs/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/utils.rb:70:in `create_listeners'
from /Users/TravisKs/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:74:in `listen'
from /Users/TravisKs/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:62:in `initialize'
from /Users/TravisKs/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:24:in `initialize'
from /Users/TravisKs/.rvm/gems/ruby-1.9.2-p290@rvm-gemset-name/gems/rack-1.3.5/lib/rack/handler/webrick.rb:10:in `new' 
from /Users/TravisKs/.rvm/gems/ruby-1.9.2-p290@rvm-gemset-name/gems/rack-1.3.5/lib/rack/handler/webrick.rb:10:in `run' 
from /Users/TravisKs/.rvm/gems/ruby-1.9.2-p290@rvm-gemset-name/gems/rack-1.3.5/lib/rack/server.rb:265:in `start'
from /Users/TravisKs/.rvm/gems/ruby-1.9.2-p290@rvm-gemset-name/gems/railties-3.1.1/lib/rails/commands/server.rb:70:in `start'
from /Users/TravisKs/.rvm/gems/ruby-1.9.2-p290@rvm-gemset-name/gems/railties-3.1.1/lib/rails/commands.rb:54:in `block in <top (required)>'
from /Users/TravisKs/.rvm/gems/ruby-1.9.2-p290@rvm-gemset-name/gems/railties-3.1.1/lib/rails/commands.rb:49:in `tap' 
from /Users/TravisKs/.rvm/gems/ruby-1.9.2-p290@rvm-gemset-name/gems/railties-3.1.1/lib/rails/commands.rb:49:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

重新启动我的机器后，我仍然有这个问题。我已经查看了有关 Rails 的 TCPServer 错误的其他 SO 帖子。

```
ps -eo pid,ppid,user,args,stat 
```

不返回 rails 的结果

```
ps aux 
```

不返回任何僵尸进程（stat 列中的 Z）或 Rails 服务器。

这对我来说很奇怪，因为一切正常。我切换了一个 gemset，重新安装了 Rails 3.1.1，但现在我无法运行它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T20:22:58.193

尝试运行`lsof | grep 3000`，然后`kill -9 <number of process>` 如果没有帮助，请尝试运行带有`-p 3001`更改端口选项的 rails 服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T14:18:13.030

好吧，我知道现在回答为时已晚，但是就在同一天，我遇到了同样的问题。

我所做的就是，重新启动我的机器。似乎其他应用程序正在使用相同的端口！..

所以，只需重新启动，问题就解决了！

# sql-server - 这是在 SQL Server 中使用锁表的好方法吗？

> ID：10018632
> 
> 赞同：1
> 
> 时间：2012-04-04T20:17:47.250
> 
> 标签：sql-server, sql-server-2008, tsql

我想使用锁定表进行悲观离线锁定，以防止多个用户处理一个工作项的情况。我正在使用一个锁表来存储活动锁，并使用两个存储过程来进行锁定和解锁。

我的锁表结构如下： CaseId (PK) | 用户名 | 锁定有效到。

对于锁定和解锁，我编写了两个存储过程，一个用于锁定，一个用于解锁。

这是我的锁定存储过程：

```
BEGIN
    BEGIN TRY
        INSERT INTO scs.dbo.caselocks VALUES (@caseId, @agentId, dateadd(n, @lockTime, getdate()) )
        SELECT 0
    END TRY
    BEGIN CATCH
        SELECT 1
    END CATCH
END 
```

这是为了移除锁：

```
BEGIN
    BEGIN TRY
        DELETE FROM scs.dbo.caselocks
        WHERE caseid = @caseid
        SELECT 0
    END TRY
    BEGIN CATCH
        SELECT 1
    END CATCH
END 
```

我的问题是，这是处理锁的正确方法吗？（对不起，如果这应该被发布到 Code Review 而不是 SO。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:40:31.387

对于删除SP，是否允许任何代理删除锁？另外，为什么要从 SP 中返回带有“SELECT”的 ResultSet？您可以只使用 RETURN 语句。

我看到您正在使用 getdate() 函数在本地时区中保留时间。当您处理多个时区、切换到/从夏令时等时，这通常是导致问题的原因。最佳实践是在您保留日期/时间时始终使用 UTC 时间，并且仅在时间转换为本地时间时显示给用户。

# php - PHP 文件上传 - 确保两个文件均已上传且数据库已更新

> ID：10018643
> 
> 赞同：0
> 
> 时间：2012-04-04T20:18:53.390
> 
> 标签：php, file-upload, xss, database-security

使用 PHP 上传文件以确保数据库也得到更新的最佳实践是什么？

目前的方法

1) 表单验证确认所有字段的类型、长度和 xss 攻击均有效。

2) 使用用户提交的文件名上传到服务器的文件

3) 使用用户提交的详细信息（包括文件名）更新数据库

这是一种安全的方式吗？先更新数据库，然后在数据库中查询文件名，然后使用数据库检索到的文件名上传文件会更好吗？

不一定要寻找代码，而是要寻找哲学。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:30:53.607

我会使用这个命令：

## 第一种方法：操作顺序依赖

*   表单验证
*   检查文件是否已上传（暂时不要将其移出）
*   根据您的自由选择生成新文件名
*   使用新生成的文件名将有关文件的数据插入数据库
*   只有这样，如果没有抛出异常，**请使用上面的文件名从 temp 移动文件**。否则，文件将在请求结束时自动删除
*   **如果文件移动由于某种原因失败，您应该从数据库中删除记录。**

我强烈建议使用一些`PDO`类似的库与数据库“对话”，因为这些会引发异常，而不是引发错误（如`mysql_**`函数）。这样您就可以确定您的查询是否成功，而无需不断检查数据库函数的结果......

## 第二种方法：**事务**

*   表单验证
*   检查文件是否已上传（暂时不要将其移出）
*   根据您的自由选择生成新文件名
*   开始交易
*   使用新生成的文件名将有关文件的数据“插入”到数据库。
*   使用上面的文件名从 temp 移动文件。如果由于某种原因文件移动失败，则抛出异常。
*   提交事务
*   *此时，您确定两个文件都已移动并且数据已正确保存。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:54:08.933

表单验证是任何 Web 应用程序的重要组成部分，因此很高兴在列表中看到它。您在这里结合了 Web 应用程序中最危险的两个元素，即文件上传和数据库交互，因此您显然需要谨慎行事。我想这就是你问的原因！

我在方法方面的建议首先是不要使用用户提交的文件名，这会打开你不需要的整个风险领域。除非这是您的应用程序的必需功能，否则请在 PHP 中生成一个新的随机文件名并使用 move_uploaded_file 从 PHP 分配的 tmp_name 复制到您的新随机文件名。

执行此移动后，您可以使用文件的位置更新数据库。

因此，我的方法是：

1.  根据白名单（[az][AZ][0-9] 作为建议）对任何用户提供的输入进行严格验证。
2.  避免将用户提供的数据回显到屏幕，如果这样做，请将编码输出到 HTML 实体。
3.  避免使用用户提供的数据作为数据库或文件名的输入，生成一个您可以控制的新文件名。
4.  自行处理上传，并在执行一些验证检查后根据您生成的文件名将图像移动到其新位置。
5.  使用新文件名更新数据库。

我知道你不是在追求代码，但这里有几个来自我上传的工作文件的小片段，它不做数据库部分，但添加起来很简单。

```
function generate_filename() {
    // could be improved upon really
    $random_string = random_string(8);
    $filename = $random_string . time() . ".jpg";
    return $filename;    
}

if ($_FILES["file_upload"]["size"] != 0) {
    $file_name = generate_filename();
    $file_path = "/" . $upload_directory . "/" . $file_name;
    $target_file_name = SITE_ROOT . $file_path; // SITE_ROOT is a constant for the file system location. This could be /var/www/images for example.

    if ($_FILES["file_upload"]["type"] == "image/jpeg") {
        if (getimagesize($_FILES["file_upload"]["tmp_name"])) {
            if (move_uploaded_file($_FILES["file_upload"]["tmp_name"],$target_file_name)) {
                exit_status("File uploaded successfully to $file_path");
            } else {
                exit_status("Eek, something went wrong with your image upload");
            }
        } else {
            exit_status("Not a valid image");
        }
    } else {
        exit_status("Invalid file type. We only support JPEG");
    }
} else {
    exit_status("You didn&rsquo;t specify a file to upload. Try again");
} 
```

# forms - 我需要帮助在 let 表单和未命名的过程表单之间进行转换

> ID：10018646
> 
> 赞同：1
> 
> 时间：2012-04-04T20:18:55.823
> 
> 标签：forms, scheme, procedure, let

我试图从 let-form 转换为未命名的过程形式，但我无法掌握它。

让程序是这样的。

```
(define max-recursive (lambda (lst)
      (if  (null? (cdr lst))
           (car lst)
           (let ((m0 (car lst))
                 (m1 (max-recursive (cdr lst))))
                 (if (> m0 m1)
                     m0
                     m1
                 )
           )
      ))) 
```

到目前为止我所做的是

```
(define max-recursive (lambda (lst)
      (if  (null? (cdr lst))
        (car lst)
((lambda (m0 m1)
   (if (> m0 m1)
       m0
       m1
      )
   )
   car lst (max-recursive (cdr lst)))
      ))) 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:41:38.360

你几乎明白了！表达式周围只有几个括号`car lst`。试试这个：

```
(define max-recursive
  (lambda (lst)
    (if (null? (cdr lst))
        (car lst)
        ((lambda (m0 m1)
           (if (> m0 m1)
              m0
              m1))
         (car lst) ;here was the error
         (max-recursive (cdr lst)))))) 
```

说明如下。像这样的一种`let`形式：

```
(let ((x 10))
  x) 
```

... 只是`lambda`应用于某些参数的表达式的语法糖。前面`let`的等价于：

```
((lambda (x)
   x)
 10) 
```

请注意，在这两种情况下，值`10`最终都绑定到名为 的变量`x`，并且表达式的主体与表达式`let`的主体相同`lambda`

# powershell - powershell：如何以 dns 格式检索计算机名称

> ID：10018650
> 
> 赞同：2
> 
> 时间：2012-04-04T20:19:28.667
> 
> 标签：powershell, dns, wmi

我想在 Windows 7 机器上检索当前计算机名称作为[FQDN ，例如 computername.companyname.local。](http://en.wikipedia.org/wiki/Fully_qualified_domain_name)如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T03:18:02.597

使用框架 .NET 这在我的域上工作：

```
([system.net.dns]::GetHostByName("localhost")).hostname 
```

您还可以在下面找到信息（但您必须重建它）：

```
[System.Net.NetworkInformation.IPGlobalProperties]::GetIPGlobalProperties() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:13:54.420

要将其作为字符串返回：

```
gwmi Win32_ComputerSystem| %{$_.DNSHostName + '.' + $_.Domain} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:04:18.147

我没有在具有真实域的机器上运行，所以我不能 100% 确定，但我认为这对你有用：

```
get-wmiobject Win32_NetworkAdapterConfiguration | where {$_.DNSHostName} | select @{n="FQDN";e={$_.DNSHostName + "." + $_.DNSDomain } } | format-table 
```

对于我的 Thinkpad 笔记本电脑，这将返回如下内容：

```
FQDN
----
t500.home 
```

# silverlight - 数据列表在窗口电话中不显示全部？

> ID：10018654
> 
> 赞同：0
> 
> 时间：2012-04-04T20:19:48.957
> 
> 标签：silverlight, windows-phone-7, xml-parsing

我在 Window Phone 中使用数据列表控件来显示 XML 文件中的所有 50 条记录。

但是，只有少数几个显示在页面上，而我看不到其余的...

如何在同一页面中查看所有记录？我在模拟器上看不到任何垂直条或向下滚动？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:37:24.730

您应该使用 ScrollViewer 以便您可以上下滚动 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T17:07:55.500

我只是碰巧将鼠标光标放在页面中间并上下移动并能够看到所有记录。

顺便说一句，我确实通过添加 ScrollViewer 进行了测试，但它对我不起作用。

# security - 在处理程序中清理 HTML::Mason 参数？

> ID：10018657
> 
> 赞同：1
> 
> 时间：2012-04-04T20:19:55.877
> 
> 标签：security, sanitization, mod-perl2, mason

我正在使用`HTML::Mason`，经过最近的安全审核，发现我们的某些软件容易受到标头注入的影响。具体来说`session_id`，这与通过`GET`和`POST`请求传递的参数有关。

我试图`handler()`从自定义处理程序修改我的方法中的环境，但是`Apache2::RequestRec`已经创建了，所以它不会接受更改。

有没有一种好方法可以在处理程序级别清理所有输入到 HTML::Mason 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:17:41.930

所以我使用[HTML::Mason](http://www.masonhq.com/) [Plugins](http://www.masonhq.com/docs/manual/Plugin.html)解决了这个问题。这不是我希望的解决方案，因为它不会在解析参数之前清理参数，而是在解析之后。如果参数解析中有一段可利用的代码，它仍然可能导致问题。这总比没有好，但感觉不是真正的解决方案。

**将插件添加到 ApacheHandler：**

```
my $ah = HTML::Mason::ApacheHandler->new (
    ...
    session_use_cookie          =>  0,
    args_method                 =>  "mod_perl",
    session_args_param          =>  'session_id',
    plugins                     =>  [PolMaker::Plugins::SanitizeArgs->new],
  ); 
```

**插件代码：** `$context->args`完成大部分繁重的工作。给定输入：

```
?session_id=c45a0309191691cd5b4714c936d0f9a2&foo=bar&baz=pop 
```

我们得到以下内容`$context->args`：

```
['session_id', 'c45a0309191691cd5b4714c936d0f9a2', 'foo', 'bar', 'baz', 'pop'] 
```

这也适用于`POST`请求，并遵循与 HTML::Mason 的正常解析相同的规则。实际的插件如下所示：

```
package PolMaker::Plugins::SanitizeArgs;
use base qw(HTML::Mason::Plugin);

my %SANITIZE = (      
        "session_id" => 1,
        ## Room for future expansion.
    );

sub start_request_hook { ## Executes once per request.
    my $self = shift;
    my $context = shift;
    my @clean_args;
    my $next = 0;
    foreach my $arg (@{ $context->args } ) {
        if (defined($SANITIZE{$arg})) { 
            $next = 1;
        } elsif ($next > 0) {
            $arg =~ s/[^\w \d\-\.]//g; # Leave words, digits, dashes and periods. 
            $next = 0;
        }
        push @clean_args, $arg;
    }
    @{$context->args} = @clean_args;
}
1; 
```

同样，这个选项并不像我想要的那样最佳，但它会起作用。对此“解决方案”的补充和改进也将受到欢迎。

# caching - Windows Azure - 缓存 - 如何获取所有缓存项

> ID：10018659
> 
> 赞同：1
> 
> 时间：2012-04-04T20:20:08.730
> 
> 标签：caching, azure, azure-caching

我在 asp.net 中使用了以下方法来检索所有缓存（然后我根据正则表达式模式删除了一些缓存）。

```
IDictionaryEnumerator caches = HttpContext.Current.Cache.GetEnumerator(); 
```

我找到了 GetObjects*，但它们仅在 Windows Sever AppFabric 中可用。

Windows Azure AppFabric 缓存中是否有任何等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:41:59.363

在目前的表现形式中，[没有](http://msdn.microsoft.com/en-us/library/windowsazure/gg185678.aspx)。如果您不想跟踪缓存项，您将需要知道有哪些键/您需要获取并设置适当的超时。还缺少区域、标签和通知，它们（对于许多用例）将提供完美的解决方法/有效的替代方法来获取所有缓存项或键。

如果你对 azure 缓存的状态不满意，你可以把你的挫败感放在[这里](http://www.mygreatwindowsazureidea.com/forums/40626-windows-azure-appfabric-feature-voting/suggestions/1810245-add-tags-notifications-regions-to-azure-cache-so)或放在[那里](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2214571-cache-needs-work)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:34:00.050

借助最新版本的 Windows Azure 缓存（预览版）和 Windows Azure SDK 1.7，您拥有本地 Windows AppFabric 缓存产品中可用的所有功能。

如：通知、区域、标签、高可用性等。

除了计算成本之外，Windows Azure 缓存（预览版）没有任何额外成本。

请查看[http://msdn.microsoft.com/en-us/library/windowsazure/hh914153.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh914153.aspx)了解更多详情。

# sql - 批处理查询的等效 Mongodb 习惯用法

> ID：10018661
> 
> 赞同：0
> 
> 时间：2012-04-04T20:20:21.337
> 
> 标签：sql, scala, mongodb, batch-file, casbah

批量查询mongo集合的最有效方法是什么？例如在 SQL 中，我会做类似的事情：

```
SELECT * FROM Foo WHERE id > {{floor}} limit 1000; 
```

我发现我可以做一些[这里概述的事情](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bskip%28%29%7D%7D)

但是关于跳过的大警告让我认为我不应该使用它。（假设集合足够大，足以影响它）。

除了自动生成的 _id 字段外，我的收藏没有任何索引。我不确定是否有办法使用它和 $gt $lt.

如果这很重要，我将使用 Casbah 驱动程序，以防内置秘密酱汁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:10:53.073

该 SQL 查询到 mongo 的字面翻译是

```
db.foo.find({"id": {"$gt": floor}}).limit(1000) 
```

此查询可以由字段上的索引提供（或者如果您使用该列而不是 named 列，`id`则由默认索引提供）。`_id``id`

没有性能问题`limit()`，但是`skip()`对于非常大的值，性能可能会很差，因为服务器本质上需要遍历大量记录，然后才能开始向您返回结果。

# .net - C++\cli 检查是否可以在这里创建文件，FolderBrowseDialog

> ID：10018668
> 
> 赞同：0
> 
> 时间：2012-04-04T20:21:24.453
> 
> 标签：.net, winforms, c++-cli, folderbrowserdialog

我正在使用 folderBrowseDialog 让用户能够选择程序将保存某些文件的位置。存在用户可以选择应用程序无法操作的路径的问题，例如“c：\”（程序由用户而不是管理员启动）

每当我尝试选择用户无法操作的路径时，我已经看到一些程序建议我将路径更改为“我的文档”，但是我不知道该怎么做。请注意，我使用的是 folderBrowseDialog 而不是 savefiledialog。

所以我想也许我会弹出一个警告，使用 FileIOPermission。但由于某种原因它不起作用。这是我编写的快速代码，但从未抛出异常。 [MSDN 上的 FileIOPremission](http://msdn.microsoft.com/en-us/library/system.security.permissions.fileiopermission.aspx)

```
using namespace System::Security::Permissions;

FileIOPermission^ f2 = gcnew FileIOPermission( FileIOPermissionAccess::Write,"C:\\");

try {
    f2->Demand();
}
catch (System::Security::SecurityException^ s){
    MessageBox::Show(s->Message); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:12:11.153

你在这个错误的轨道上。是的，FileIOPermission 不会像您希望的那样做，这是一个与安全相关的类，它允许您编写在沙箱中运行的代码。就像在浏览器中运行的代码一样，阻止它在用户磁盘上散布文件。或读取敏感文件。这在普通 C++/CLI 应用程序中不起作用，它以完全信任的方式运行，使用户可以访问她通常可以访问的所有目录和文件，而不会增加进一步的限制。你没有理由添加额外的。

将文件写入磁盘通常是一项危险的操作。很多事情都可能出错。您在具有许多其他正在访问文件的进程的操作系统上运行您的代码。试图覆盖某个其他进程正在读取的文件将导致异常。磁盘可能已满。用户可能输入了她无权访问的目录名称，这只是另一种失败模式。只需捕获 IOException 并告诉用户它。

当然，从受限用户非常熟悉的目录开始对话框中的旅程。她的 Documents 文件夹是她的“主”目录。如果不是很明显您要转储所选目录中的一大堆文件，那么如果您在目录中看到任何其他文件，则会显示一个温和的提醒。避免“Eek，你做了什么！” 当她发现这里的 Documents 目录突然多了很多文件时，她做出了回应。前几次。当你可以给它一个描述性的名称时，不要犹豫创建你自己的子文件夹，这样就不会发生这种情况。某些包含日期/时间的名称通常可以使用。

# php - 使用 jQuery 找出图像的宽度

> ID：10018669
> 
> 赞同：1
> 
> 时间：2012-04-04T20:21:25.860
> 
> 标签：php, jquery, width

我有这些图像，我从我的服务器和一个使用 PHP 的数据库中下来

```
<div class="pics">

<img src="upload/<?php echo $array['image'] ?>" height="200"/>

</div> 
```

实际尺寸很大，但我需要它们都在 200 的高度。

如何使用 jQuery 找到这张图片的宽度，我在任何地方都找不到教程......

任何帮助，将不胜感激。

谢谢你的时间，J

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T20:23:07.137

尝试使用`.width`功能。就像是`$('img').width();`

更多阅读.. [http://api.jquery.com/width/](http://api.jquery.com/width/)

此外，还有包含/排除填充、边框`.innerWidth`和`.outerWidth`边距的功能。详情见下图，

![在此处输入图像描述](../Images/d08b95265755220ec80066b99c473570.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:25:22.707

我会尝试`.innerWidth()`而不是`.width()`，因为`.width()`将包括边距。

```
$('img').innerWidth(); 
```

如果你的图像真的那么大，你应该考虑在服务器端缩小它。

## 更新

实际上`.width()`没有添加边距，甚至没有添加填充。这使得`.width()`比 更合适`.innerWidth()`。谢谢SKS。

# c++ - Ember 自定义（自己的）协议到 UDP

> ID：10018674
> 
> 赞同：0
> 
> 时间：2012-04-04T20:22:25.543
> 
> 标签：c++, network-programming, network-protocols

我需要做一个程序来测试连接的速度和可靠性并模拟其他一些情况。

这应该使用 UDP 协议来完成，我需要将我自己的自定义协议嵌入其中，该协议具有校验和、数据、标志......

我的问题是我该怎么做？或者更好的是，我应该用什么来做。我想用 C++ 来做，那么有一些库可以满足我的需要吗？

这个程序应该在 windows 上运行，所以我需要一个适用于 windows 的方法。

另一件事是有任何教程或文章可以更深入地解释这一点吗？

# ruby-on-rails - 无法发布到 Facebook 页面的活动流

> ID：10018678
> 
> 赞同：1
> 
> 时间：2012-04-04T20:22:32.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook-graph-api, koala-gem

我正在使用考拉宝石。我正在尝试将某些内容发布到我已通过身份验证的 Facebook 页面。

```
client = Koala::Facebook::API.new(authentication.token)
client.put_object(authentication.uid, 'og_app_name:post', { :something => link }) 
```

如果我要发布到个人资料，这将有效。但是发布到 Facebook 页面，什么也没做。没有错误报告。从 SoundCloud 发布时，同样的行为也很明显。

我不知道这是否是因为 Facebook 最近在他们的页面中引入了“时间线”。可能是某个地方的错误？

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:57:16.483

您是否尝试代表页面发布 Open Graph 操作？该功能不存在，只有用户可以发布操作

# python - Python：找到最接近的字符串（从列表中）到另一个字符串

> ID：10018679
> 
> 赞同：77
> 
> 时间：2012-04-04T20:22:33.813
> 
> 标签：python, string, algorithm, list

假设我有一个`string` `"Hello"`和一个列表

```
words = ['hello', 'Hallo', 'hi', 'house', 'key', 'screen', 'hallo','question', 'Hallo', 'format'] 
```

我怎样才能找到`n words`最接近`"Hello"`并出现在列表中的那些`words`？

在这种情况下，我们会有`['hello', 'hallo', 'Hallo', 'hi', 'format'...]`

所以策略是从最近的单词到最远的单词​​对列表单词进行排序。

我想过这样的事情

```
word = 'Hello'
for i, item in enumerate(words):
    if lower(item) > lower(word):
      ... 
```

但在大型列表中它非常慢。

**UPDATE** `difflib`有效，但也很慢。（`words list`里面有 630000 多个单词（已排序，每行一个））。因此，每次搜索最接近的单词时，检查列表需要 5 到 7 秒！

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-04-04T20:27:09.537

使用[`difflib.get_close_matches`](http://docs.python.org/library/difflib.html#difflib.get_close_matches).

```
>>> words = ['hello', 'Hallo', 'hi', 'house', 'key', 'screen', 'hallo', 'question', 'format']
>>> difflib.get_close_matches('Hello', words)
['hello', 'Hallo', 'hallo'] 
```

请查看文档，因为该函数默认返回 3 个或更少的最接近匹配项。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-04T22:34:31.710

Peter Norvig 提供了一篇很棒的文章，其中包含完整的源代码（21 行），关于拼写更正。

[http://norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)

这个想法是建立你的词的所有可能的编辑，

```
hello - helo   - deletes    
hello - helol  - transpose    
hello - hallo  - replaces    
hello - heallo - inserts    

def edits1(word):
   splits     = [(word[:i], word[i:]) for i in range(len(word) + 1)]
   deletes    = [a + b[1:] for a, b in splits if b]
   transposes = [a + b[1] + b[0] + b[2:] for a, b in splits if len(b)>1]
   replaces   = [a + c + b[1:] for a, b in splits for c in alphabet if b]
   inserts    = [a + c + b     for a, b in splits for c in alphabet]
   return set(deletes + transposes + replaces + inserts) 
```

现在，在您的列表中查找这些编辑中的每一个。

彼得的文章很值得一读，值得一读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T20:34:40.797

创建您的单词的排序列表，并使用[bisect 模块](http://docs.python.org/library/bisect.html)根据排序顺序识别排序列表中适合您的单词的点。根据该位置，您可以给出上方和下方的 k 个最近邻，以找到 2k 个最接近的单词。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-18T20:27:53.317

我正在查看此答案以从列表或可能的替代方案中获得最接近的匹配

```
difflib.get_close_matches 
```

我[根据 Peter Norwig 的帖子找到了 Amjith 的答案，](https://stackoverflow.com/a/10020219/1660759)并认为它可能是一个很好的替代品。在我意识到它可能不太适合我的用例之前，我已经用它做了一个类。所以这是一个拼写版本，您可以将它用于不同的单词集。也许最好的用途是人口名称匹配。

```
import re
from collections import Counter

def words(text): return re.findall(r'\w+', text.lower())

# WORDS = Counter(words(open('big.txt').read()))

class WordMatcher:

    def __init__(self, big_text):
        self.WORDS=Counter(words(big_text))
        self.N = sum(self.WORDS.values())

    def P(self, word):
        "Probability of `word`."
        return self.WORDS[word] / self.N

    def correction(self, word):
        "Most probable spelling correction for word."
        return max(self.candidates(word), key=self.P)

    def candidates(self, word):
        "Generate possible spelling corrections for word."
        return (self.known([word]) or self.known(self.edits1(word)) or self.known(self.edits2(word)) or [word])

    def known(self, words):
        "The subset of `words` that appear in the dictionary of WORDS."
        return set(w for w in words if w in self.WORDS)

    def edits1(self, word):
        "All edits that are one edit away from `word`."
        letters    = 'abcdefghijklmnopqrstuvwxyz'
        splits     = [(word[:i], word[i:])    for i in range(len(word) + 1)]
        deletes    = [L + R[1:]               for L, R in splits if R]
        transposes = [L + R[1] + R[0] + R[2:] for L, R in splits if len(R)>1]
        replaces   = [L + c + R[1:]           for L, R in splits if R for c in letters]
        inserts    = [L + c + R               for L, R in splits for c in letters]
        return set(deletes + transposes + replaces + inserts)

    def edits2(self, word):
        "All edits that are two edits away from `word`."
        return (e2 for e1 in self.edits1(word) for e2 in self.edits1(e1)) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-05T08:38:12.660

也许[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)可以帮助你。

你有一个名为的堆`Heap`，直到它的大小小于`n`，你将单词插入到`Heap`using 函数`close`中 [显示这个字符串是否比另一个字符串更接近] 。

这个方法可以在你`n`很小的时候帮助你:)

```
Heap = []
for word in words:
    if len(Heap)<n:
       Heap.insert(word)
    else
       if close(word,Heap[0]): # it means Heap[0] is the nth farthest word until now
             Heap.pop():
             Heap.insert(word) 
```

# php - PHP，可以在不指定函数名的情况下从同一个函数中调用函数吗？

> ID：10018685
> 
> 赞同：3
> 
> 时间：2012-04-04T20:23:01.990
> 
> 标签：php, function

是否可以在不指定函数名称的情况下在同一个函数中调用函数 - 例如通过使用某种魔法关键字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:24:47.887

是的。该常量`__FUNCTION__`为您提供当前函数的字符串表示形式。([源](http://php.net/manual/en/language.constants.predefined.php))

```
function testMe() {
  print __FUNCTION__;
}

testMe(); // outputs "testMe" 
```

然后，您当然可以使用它来调用自己：

```
$func = __FUNCTION__;
$func(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:28:58.990

```
function someFunction($i)
{
     $method = __FUNCTION__;
     if ( $i > 0 )
     {
         return $method($i-1);
     }
     return $i;
} 
```

在不知道函数名称的情况下递归的简单示例，`$i`如果`$i`是 positiv，将调用自身为 -times。

# windows-phone-7 - 应用程序更新后 WP7 隔离存储 XML 文件为空

> ID：10018691
> 
> 赞同：0
> 
> 时间：2012-04-04T20:23:28.000
> 
> 标签：windows-phone-7, xml-serialization, windows-phone-7.1, isolatedstorage

我为我的 WP7 应用程序提交了更新，我有用户抱怨他们的数据在更新后被删除了。我通过将 ViewModel 类序列化为 IsolatedStorage 中的 XML 文件来存储数据。在我的测试过程中，我注意到更新应用程序导致设置文件被我的 ViewModel 对象的新实例（具有默认值）的序列化副本部分覆盖。我以为我在写入 XML 文件时使用 FileMode.Create 解决了这个问题，但我猜不是。

序列化是否会出错，因为我向 ViewModel 对象添加了新属性并且从现有 XML 文件反序列化失败？如果无法从 XML 文件中读取一个新的 ViewModel 对象，我确实将我的代码设置为实例化一个新的 ViewModel 对象。如果是这种情况，是否意味着我无法向 ViewModel 对象添加任何新属性？

编辑：
这是我的 ViewModel 的结构，并不是那么复杂：

```
public class MyClass: INotifyPropertyChanged
{
    public MyClass()
    {
        // Set defaults
        this.Items= new ObservableCollection<Item>();
        this.TextTemplate = "default";
        this.HasSeenSomething = false;
    }

    public ObservableCollection<Item> Items { get; set; }
    // New properties added in app update
    public string TextTemplate { get; set; }
    public bool HasSeenSomething { get; set; }
} 
```

这是我用来序列化/反序列化我的 ViewModel 的代码。我认为这是非常标准的，但也许我搞砸了一些事情：

```
public static void WriteToXml<T>(T data, string path)
{
    var xmlWriterSettings = new XmlWriterSettings { Indent = true };
    using (var myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
    {
        using (var stream = myIsolatedStorage.OpenFile(path, FileMode.Create))
        {
            var serializer = new XmlSerializer(typeof(T));
            using (var xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
            {
                serializer.Serialize(xmlWriter, data);
            }
        }
    }
}

public static T ReadFromXml<T>(string path)
{
    T data = default(T);
    try
    {
        using (var myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (myIsolatedStorage.FileExists(path))
            {
                using (var stream = myIsolatedStorage.OpenFile(path, FileMode.Open))
                {
                    try
                    {
                        var serializer = new XmlSerializer(typeof(T));
                        object instance = serializer.Deserialize(stream);
                        if (instance != null) data = (T)instance;
                    }
                    catch (System.Exception ex)
                    {
                        var e = ex;
                    }
                }
            }
        }
    }
    catch(System.Exception ex) 
    {
        var e = ex;
    }
    return data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:38:48.277

你可以，但有一些陷阱。

1.  您需要确保不会以在反序列化时会中断的方式更改属性。因此，将 Int 更改为 String 是可以的（尽管我不建议这样做），但相反的情况可能会中断。
2.  您需要记住，反序列化对象时不会调用 ctor。这意味着，如果您在 ctor 中执行以下操作：

    公共 MyClass() { MyV2Collection = new Collection(); }

如果集合为空，您没有其他机制可以更新集合，您将在第一次尝试访问该属性时死于 NullRef。

一角钱兑美元，我敢打赌你正在打 pt #2。

修复它相当容易，但你需要记住去做。选项包括：

1.  在属性访问器中，检查支持字段是否为空，如果是则实例化它。
2.  创建一个具有装饰它的属性的函数 ( `public`) 。`[OnDeserialized]`该代码将在反序列化完成后运行，您可以在那里实例化您的成员。

# android - 是否可以解锁sim并让软件输入密码

> ID：10018692
> 
> 赞同：1
> 
> 时间：2012-04-04T20:23:30.397
> 
> 标签：android, sim-card

我将向客户（主要是孩子）赠送手机（Android），并想创建一个“锁定”应用程序。我不希望客户为手机的密码而烦恼，但是当您打开设备时，“锁定”应用程序应该刚刚启动。然后我覆盖按钮，他们应该无法拨打电话。

唯一的问题是，如果 SIM 卡被移除或被盗，我需要在 sim 卡上输入密码。那么我的“锁定”应用程序是否有可能通过输入密码来解锁 sim 卡？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T13:36:22.977

这是可能的。我在这段代码中这样做：

```
 try {
        @SuppressWarnings("rawtypes")
        Class clazz = Class.forName(telephonyManager.getClass().getName());
        Method m = clazz.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        ITelephony it = (ITelephony) m.invoke(telephonyManager);
        if (it.supplyPin("1234")) {
            // SIM unlocked
        } else {
            // not unlocked
        }

    } catch (Exception e) {
        // 
    } 
```

为此，您需要**ITelephony**接口。[你可以在这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/com/android/internal/telephony/ITelephony.java)找到它的来源。在您的 src 文件夹中制作**com.android.internal.telephony**包并将 iTelephony.java 放在那里。此方法使用 *android.permission.MODIFY_PHONE_STATE* 权限，该权限仅适用于 Android 2.2。从 2.3 版开始，此权限仅限于系统应用程序。如果您想在最新版本中使用该代码，您必须将您的应用程序 apk 文件从 /data/app 移动到 /system/app 文件夹。

# java - Java EE 项目中不存在包

> ID：10018693
> 
> 赞同：0
> 
> 时间：2012-04-04T20:23:37.840
> 
> 标签：java, jakarta-ee, netbeans, package

我有一个使用 JSF 和 EJB 的 Java EE 应用程序。所以我的 EJB 在 ejb 模块中，而 JSF 类在 web 模块中。一切工作正常，直到有一天我启动了我的应用程序，并且使用来自 ejb 模块的 EJB 的 web 模块中的每个类都存在编译错误。

我的模块`com.vsb.project`在它们两个中都有一个根包。每个班级的例外情况都说（例如）

`C:\Users\Petr\Desktop\prvniPokus\prvniPokus-war\src\java\com\vsb\project\Utils\JSFUtil.java:7: error: package com.vsb.project.domain.dataAccess does not exist`

我使用 Netbeans 作为我的 IDE，那么如何找到我是否拥有所有依赖项？Java EE 模块包含它们两者，Web 模块中的库还包含定义为包的 EJB 模块，那么问题出在哪里？

# java - Swing 无窗组件？

> ID：10018695
> 
> 赞同：0
> 
> 时间：2012-04-04T20:24:03.283
> 
> 标签：java, swing, progress, jcomponent

当正在处理某些事情以向用户显示正在发生的事情时，我想显示一个旋转的进度轮事物（像[这样）。](http://builder.fluidproject.org/images/spinner.gif)有什么办法可以做到这一点而不会弹出整个窗口？我正在使用秋千。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:27:47.383

假设您的应用程序正在使用某种 Swing 容器，我建议将动画 gif 设置为 a 的图标`JLabel`并将其放在容器的[GlassPane](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)上。然后在必要时切换此窗格。

[这](https://stackoverflow.com/questions/6609888/drawing-between-2-images-in-1-jpanel/6610064#6610064)是一个部分相关的实现（注意输入事件的阻塞）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T22:13:46.337

这里有两个关于如何在屏幕上弹出显示图像的精简说明示例。根据需要调整图像来源、位置、大小、异常处理等。

示例 1 of 2，使用 JLabel 的半透明：

```
public static void main(String args[]) throws Exception {
JWindow jWindow = new JWindow() {
final Icon icon = new ImageIcon(<yourImage>);  // Okay to be animated
{
    setOpacity(.642f);
    setLocation(0,0);
    setSize(icon.getIconWidth(), icon.getIconHeight());
    add(new JLabel(icon));
    pack();
}
};
jWindow.setVisible(true);
Thread.sleep(3000);
jWindow.setVisible(false);
} 
```

示例 2 的 2，使用油漆透明：

```
public static void main(String args[]) throws Exception {
JWindow jWindow = new JWindow() {
final Image image = ImageIO.read(<yourImage>);  // Static image only
{
    setLocation(0,0);
    setSize(image.getWidth(), image.getHeight());
}
public void paint(Graphics g) {
    g.drawImage(image, 0, 0, null);
}
};
jWindow.setVisible(true);
Thread.sleep(3000);
jWindow.setVisible(false);
} 
```

# php - 动态更改 html 表格以在移动设备上显示

> ID：10018702
> 
> 赞同：2
> 
> 时间：2012-04-04T20:24:46.217
> 
> 标签：php, jquery, jquery-mobile, html-parsing, querypath

我正在创建一个移动优化网站，该网站通过识别来自移动设备的请求动态创建，使用 php 和 html 解析器[QueryPath](http://querypath.org/)操作现有页面以进行移动优化。我计划操作的一些页面包含 html 表格，例如[这个](https://www.fsb.muohio.edu/fsb/content/programs/international-study/summer-programs/china/accepted/language/c1.htm)，在移动设备上显示效果不佳。

我正在寻找一个可以处理任意数量的行和列的任何 html 表并对其进行操作的函数，以便它在移动设备上以良好的格式显示。我正在使用 jquery 移动框架。

php 或 javascript/jquery 中的解决方案会很棒。

这是我的意思的jsFiddle：[链接](http://jsfiddle.net/jdv590/yVJ6m/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:06:11.170

我已经使用了来自 Filament- [responsive tables](http://filamentgroup.com/lab/responsive_design_approach_for_complex_multicolumn_data_tables/) , [demo](http://filamentgroup.com/examples/rwd-table-patterns/)的这种响应式表方法， 并将其变成了一个名为 tableview 的 Jquery Mobile“扩展” - 请参见[此处](http://www.stokkers.mobi/jqm/tableview/demo.html)。

要使用它，您只需要在 HTML 标记中指定最重要、更重要、最不重要的列，并添加相应的 JQM 触发器和扩展处理其余部分。根据屏幕大小，显示优先列，而隐藏其他列。

我将“显示”按钮和菜单从原始示例更改为 JQM 自定义选择，您可以根据需要切换列，添加过滤器（与 JQM 列表视图相同），可排序标题（仅嵌入按钮，无功能），动态复选框，突出显示和其他一些东西。

扩展未完成，不包含任何逻辑（排序、分页等），过滤器除外。

我还在研究[datatables.net](http://datatables.net/)版本的 tableview。如果您需要一个工作示例，请告诉我。或多或少也做了。

# r - 使用 R 抓取时应该如何避免 404 错误

> ID：10018707
> 
> 赞同：0
> 
> 时间：2012-04-04T20:25:00.863
> 
> 标签：r, web-scraping

我通过循环几个变量来访问网页以插入 URL

偶尔会出现404错误。

如何为这些页面插入某种捕获以避免破坏代码。我目前使用 XML 包，但如果合适当然可以加载其他包

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-05T20:37:32.777

大多数时候我使用`RCurl::url.exists()`. 如果你有一个包含所有 url 的列表或数据框，你可以试试这个：

```
map(p, ~ifelse(RCurl::url.exists(.), ., NA)) 
```

！

# php - 10人一组读取Mysql数据库

> ID：10018710
> 
> 赞同：0
> 
> 时间：2012-04-04T20:25:21.740
> 
> 标签：php, mysql

我需要能够一次读取 Mysql 数据库 10 条记录的内容，以便我可以显示前 10 条，然后当用户单击第 2 页时，我需要能够读取第二块 10 条记录前 10 个等

这就是我用来阅读前 10 个的

```
$result = mysql_query("SELECT id FROM general_thread WHERE id_topic = $id");
$num_rows = mysql_num_rows($result);

$result = mysql_query("SELECT id, user_message, user_created, user_id, user_posts, user_rank, date_created FROM general_thread WHERE id_topic = $id ORDER BY id DESC
LIMIT 10;") 
or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:28:00.977

不只是

`$result = mysql_query("SELECT id, user_message, user_created, user_id, user_posts, user_rank, date_created FROM general_thread WHERE id_topic = $id ORDER BY id DESC LIMIT 10, 10;")`

下一个10？然后

`$result = mysql_query("SELECT id, user_message, user_created, user_id, user_posts, user_rank, date_created FROM general_thread WHERE id_topic = $id ORDER BY id DESC LIMIT 20, 10;")`

之后的10个？

[http://php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

# android - 如何让 android:layout_gravity="bottom" 在 LinearLayout 中工作

> ID：10018713
> 
> 赞同：2
> 
> 时间：2012-04-04T20:25:30.833
> 
> 标签：android

我试图在 LinearLayout 的顶部放置 1 个图像，在 LinearLayout 的底部放置 1 个图像。

但是在我尝试了所有的事情之后，我只能得到一个图像布局低于另一个。我想要 1 对齐到顶部，1 对齐到底部。

```
<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <ImageView 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/bg1"
        android:layout_gravity="top" />
    <ImageView 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/bg2"
        android:layout_gravity="bottom" />
</LinearLayout> 
```

我曾尝试将 RelativeLayout （在主容器中）与 layout_alignParentBottom （在我的第二个图像中）一起使用，但这也不能解决我的问题。

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:45:13.023

以下 RelativeLayout 工作正常（经过测试）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="wrap_content"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/ImageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:background="@drawable/bg1" />

<ImageView
    android:id="@+id/ImageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@+id/ImageView1"
    android:background="@drawable/bg2" /> 
```

如果仍然有问题，请检查此 RelativeLayout 上方的容器。如果是根，一切看起来都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:48:07.033

这是您的问题的解决方案：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView
        android:id="@+id/imgTop"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/bg1"
        android:layout_alignParentTop="true" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_below="@id/imgTop"
        android:layout_above="@+id/imgBottom">

    </LinearLayout>

    <ImageView
        android:id="@id/imgBottom"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/bg2"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

# wpf - DevExpress 水平网格控件

> ID：10018715
> 
> 赞同：0
> 
> 时间：2012-04-04T20:25:34.723
> 
> 标签：wpf, devexpress, gridcontrol

我想知道。我怎样才能让 WPF GridControl 喜欢它。

![在此处输入图像描述](../Images/4351880923473a0da446a3a3dce3c497.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T04:47:35.303

只需创建一个常规 DataGrid。

然后添加一个 DataTemplateSelector 来处理在第二列中显示不同类型的数据。

我以图像和按钮为例做了类似的事情。前段时间我第一次学习时，但它仍然可能对您有所帮助。 [http://www.wpfsharp.com/2010/04/08/how-to-add-a-dynamic-image-andor-a-dynamic-button-to-a-datagrid-row-using-a-datagridtemplatecolumn- and-a-datatemplateselector/](http://www.wpfsharp.com/2010/04/08/how-to-add-a-dynamic-image-andor-a-dynamic-button-to-a-datagrid-row-using-a-datagridtemplatecolumn-and-a-datatemplateselector/)

# css - CSS3 透视属性到底是什么？

> ID：10018716
> 
> 赞同：23
> 
> 时间：2012-04-04T20:25:41.410
> 
> 标签：css, perspective, css-transforms

我在网上搜索并找到了几个材料，但没有一个能清楚地说明这个概念，至少对我来说是这样。例如，w3schools 说它定义了从视图中放置 3D 元素的像素数。完全理解它是如此抽象。谁能用更生动易懂的方式告诉我？如果有一些图像来展示这个概念，那就再好不过了。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-04T20:47:02.183

在 3D 转换中，透视图为对象提供 3D 视角，并尝试从特定查看者的角度呈现 3D 对象的透视图。这并不容易理解。

这是关于它的[Safari 参考](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Using2Dand3DTransforms/Using2Dand3DTransforms.html#//apple_ref/doc/uid/TP40008032-CH15-SW26)。

关于它的[入门教程](http://desandro.github.com/3dtransforms/docs/perspective.html)。

[使用透视的一些例子](http://www.webkit.org/blog/386/3d-transforms/)。

[还有一些例子](http://www.marcofolio.net/css/3d_animation_using_pure_css3.html)。

仅供参考，将来我建议忽略来自 w3schools 的所有 Google 搜索结果。他们以某种方式设法以令人难以置信的浅层内容选择了高谷歌搜索排名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-20T08:10:57.557

在**3D**空间中工作时，我们需要设置**透视**值，否则动画元素会看起来很平。如何？透视 CSS 属性通过影响 Z 索引和用户之间的距离为元素提供 3D 空间。请记住：透视属性不应应用于将要动画的元素（通过 CSS 过渡、变换或动画），但是到父元素。

# javascript - 用于复杂形式的设计模式

> ID：10018718
> 
> 赞同：2
> 
> 时间：2012-04-04T20:25:50.240
> 
> 标签：javascript

我的表单有许多具有自动完成功能并尝试重构的字段，因此我没有在 javascript 中创建意大利面条代码。对于那些自动完成字段，我需要在提交时通过远程调用进行验证。对于自动完成，我会使用装饰器模式，但我不确定如何实现验证部分。

```
textBox = new ZipCodeAutocomplete( new TextBox() );
textBox2 = new CompanyNameAutocomplete( new TextBox() ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:28:28.137

自动完成很容易。

`<input autocomplete />`

如果你想要一个装饰器然后使用

```
function autoCompleteDecorator(input) {
    input.autocomplete = "on"
    return input
} 
```

# ms-access - Microsoft Access VB：使用变量作为字段名称的一部分

> ID：10018719
> 
> 赞同：1
> 
> 时间：2012-04-04T20:25:51.223
> 
> 标签：ms-access, vba

长期潜伏者，第一次海报。我有一个非常简单的数据库，可以根据老师可以选择他/她的班级的未绑定组合框来更新计算机实验室的座位表。

我现在拥有的是：

```
Private Sub Combo29_AfterUpdate()
If DCount("[StudentName]", "SelectedClass", "[StudentNumber]=1") <> 1 Then Me!Computer1.Caption = "" Else Me!Computer1.Caption = DLookup("[StudentName]", "SelectedClass", "[StudentNumber] = 1") 
```

它在技术上工作得很好，但不是重复同一行，将数字 1 更改为数字 2，等等所有 25 台计算机，我更希望有一些效果：

```
Private Sub Combo29_AfterUpdate()
Dim PCnumber as Integer
PCnumber = 0
NextPC:
PCnumber = PCnumber + 1
If DCount("[StudentName]", "SelectedClass", "[StudentNumber]=PCnumber") <> 1 Then Me!Computer & PCnumber & .Caption = "" Else Me!Computer & PCnumber & .Caption = DLookup("[StudentName]", "SelectedClass", "[StudentNumber] = PCnumber")
If PCNumber = 25 Then End Else goto NextPC
End Sub 
```

我浏览了几个板，但我似乎无法正确连接变量 PCnumber 作为对表单上标签的引用的一部分。目前我正在做“很长的路”，为每台计算机重复整行。这不是第一次，我的这种缺陷为我带来了更多的工作，我希望学习它不仅仅是为了这个问题，而是为了让我未来的生活更轻松。

我使用的是 Access 2007，Visual Basic 说它是 6.5。

谢谢，

查克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:02:30.587

我没有使用 Access 2007，但这可能会替代`Me!Computer & PCnumber & .Caption`：

```
Me.Controls("Computer" & PCnumber).Caption 
```

我也倾向于将`DCount`功能更改为：

```
DLookup("[StudentName]", "SelectedClass", "[StudentNumber] = " & PCnumber) 
```

...但我不经常使用它们，所以它可能会起作用。

顺便说一句，您可以`GoTo`在代码中使用以下循环结构而不是：

```
For PCnumber = 1 to 25 Step 1
    ' code
Next PCnumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T18:28:24.143

将 GoTo 语句用于除错误处理之外的任何内容通常被认为是一个坏主意。最好使用正确形成的循环或创建单独的子/函数来处理您在 GoTo 语句下放置的任务（后者不适用于您的情况）。

我会写这样的代码。

```
Private Sub Combo29_AfterUpdate()
    Dim PCnumber as Integer 'Instantiates as 0
    Do Until PCNumber = 25
        If DCount("[StudentName]", "SelectedClass", "[StudentNumber]=" & PCnumber) <> 1 Then 
            Me.Controls(Me!Computer & PCnumber).Caption = ""
        Else
            Me.Controls(Me!Computer & PCnumber).Caption = DLookup("[StudentName]", "SelectedClass", "[StudentNumber] = " & PCnumber)
        End If      
        PCNumber = PCNumber + 1
    Loop
End Sub 
```

# .net - Winforms应用程序挂起，但仅适用于特定机器上的特定用户？

> ID：10018722
> 
> 赞同：0
> 
> 时间：2012-04-04T20:26:17.057
> 
> 标签：.net, winforms, user-profile

我有一个用户无法在他的机器上运行应用程序的特定部分。只有在这台机器上，对于这个用户，应用程序才会挂起。用户可以在其凭据下在其他机器上成功运行它。此外，其他用户可以在他们自己的凭据下成功运行它。

事件日志没有帮助。它只是说应用程序停止响应。我添加了一些日志记录，以查看应用程序在停止记录日志记录之前能走多远，但最后一个日志记录条目位于无关紧要的代码部分（即显示标签）。

我知道问题出在后台工作人员中，因为如果我注释掉对 backgroundworker_DOWORK 的调用，应用程序就不会挂起。

可能是什么问题？在尝试了所有这些之后，我什至不知道从哪里开始。哪些类型的问题只能针对特定机器上的特定用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:57:55.810

可能是几件事：

*   损坏/丢失的注册表项

*   文件权限问题

*   保存在用户配置文件中的设置

您可以使用两种方法：

*   使用进程监视器查看是否在相同访问某些资源后出现问题

*   禁用部分后台工作程序以隔离导致应用程序挂起的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:12:51.430

你的问题很模糊，但它让我想起了我在使用 BackgroundWorker 时遇到的随机崩溃。有时我会去几周，但从来没有抱怨过程序崩溃，而在其他日子里，我会有 10 次左右的抱怨。原来我遇到的问题是由于我修改了 UI。修改任何 UI 值（例如修改文本框的 Text 属性）都被视为对主线程的不安全线程调用。所有 UI 修改都应该发生在主线程上，而不是在 DoWork 方法中。如果您需要修改 UI，您可以使用后台工作人员的 ReportProgress 方法或修改您的代码以检查 InvokeRequired 属性，请参见下文。从 UI 读取值不是问题，只有在您设置/修改它们时才会出现问题。

```
private void SetText(string text)
{
    // InvokeRequired required compares the thread ID of the
    // calling thread to the thread ID of the creating thread.
    // If these threads are different, it returns true.
    if (this.textBox1.InvokeRequired)
    {   
        SetTextCallback d = new SetTextCallback(SetText);
        this.Invoke(d, new object[] { text });
    }
    else
    {
        this.textBox1.Text = text;
    }
} 
```

参考[http://msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

重读你的问题，这部分对我来说很重要。

“它停止记录日志，但最后一个日志条目位于无关紧要的代码部分（即显示标签）。”

如果您在 DoWork 事件处理程序中修改 Visible 属性或修改标签的文本，这可能是您的问题。再次尝试将该代码移至 ReportProgress 事件处理程序或使用上面的 InovokeRequired 方法来解决此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T06:23:07.730

**“事件日志没有帮助。它只是说应用程序停止响应。”**

> 在这些情况下，您将获得第二次机会异常（调试器可以捕获的第一次机会异常 - 否则它是第二次机会）只需使用 DebugDiag（它有许多规则可以在挂起时捕获的内存转储上运行）。或者，您可以使用 windbg，它非常硬核，但值得了解基础知识。

我相信您可以研究更多信息，这里是 [如何使用调试诊断工具的开始](http://msdn.microsoft.com/en-us/library/ff420662.aspx)

获得更多信息的最佳网站是 Tess Ferrandez：http: [//blogs.msdn.com/b/tess/archive/2009/01/23/net-hang-analyzing-debug-diag-output.aspx](http://blogs.msdn.com/b/tess/archive/2009/01/23/net-hang-analyzing-debug-diag-output.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T00:21:08.770

这是 TableAdapter.Fill 方法，填充绑定到 UI 控件的数据集，填充数据显然会导致大问题。为什么它不为每个人都这样做，我不知道。

[在这里](https://stackoverflow.com/questions/10099025/backgroundworker-dowork-causing-ui-to-be-unresponsive#comment12946772_10099025)查看答案。

# objective-c - 自定义单元格标签不会自动换行

> ID：10018725
> 
> 赞同：2
> 
> 时间：2012-04-04T20:26:28.930
> 
> 标签：objective-c, ios5, uitableview, uilabel

我创建了一个与*左侧详细信息*`UITableViewCell`单元格相同的自定义项，但它不是一个详细信息标签，而是在我的自定义单元格中的标签和*左侧详细信息*单元格的标签之间匹配了所有属性，但它不会自动换行。它将显示第一个单词，而不是包装它，只是切断其余部分而不截断。我猜它是自动换行，但不是让标签高度变大，而是让它与单行标签相同。*`UITextField`*

 **我有

*   标签线设置为 0
*   换行符设置为自动换行
*   查看自动调整大小设置为与*左侧细节相同*

我在 IB 中做到了这一点，因此我能够匹配每个设置。有人知道如何使单元格的自定义标签自动换行吗？

编辑：

要清楚，我希望自定义标签自动换行而不是文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T18:24:21.667

我最终使标签成为单元格的大小而不是静态的。这允许它包裹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:11:56.303

`UITextField`只有一条线。也许你的意思是`UITextView`？查看有关这两个类的 Apple 文档。我已经`UITextView`在`UITableViewCell`.**

# rest - spring mvc拦截器：访问postHandle中的ResponseEntity

> ID：10018727
> 
> 赞同：6
> 
> 时间：2012-04-04T20:26:38.553
> 
> 标签：rest, spring-mvc, interceptor

我有一个记录 Spring MVC 响应结果的拦截器。我的所有响应都返回具有 JSON 正文内容的 ResponseEntity 对象。

我想从 ResponseEntity 中获取响应正文和 http 状态。

如何从 postHandle 方法属性访问 ResponseEntity？

```
public void postHandle(HttpServletRequest request, 
    HttpServletResponse response, 
    Object handler, 
    ModelAndView modelAndView) {} 
```

对于我的调用，modelAndView 属性为 null。

谢谢，杰森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-20T11:34:19.367

当您写下您的问题时，我认为这是不可能的，但现在是。从他们的文档[http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-handlermapping-intercepto](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-handlermapping-intercepto)

“请注意，HandlerInterceptor 的 postHandle 方法并不总是非常适合与 @ResponseBody 和 ResponseEntity 方法一起使用。在这种情况下，HttpMessageConverter 在调用 postHandle 之前写入并提交响应，这使得无法更改响应，例如添加一个标头。相反，应用程序可以实现 ResponseBodyAdvice 并将其声明为 @ControllerAdvice bean 或直接在 RequestMappingHandlerAdapter 上配置它”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-24T17:48:14.497

```
@ControllerAdvice
public class ResponseDTOFilterAdvice implements ResponseBodyAdvice<Object> {
    @Override
    public boolean supports(final MethodParameter returnType, final Class<? extends HttpMessageConverter<?>> converterType) {
        return true;
    }

    @Override
    public Object beforeBodyWrite(final Object body, final MethodParameter returnType, final MediaType selectedContentType,
        final Class<? extends HttpMessageConverter<?>> selectedConverterType, final ServerHttpRequest request,
        final ServerHttpResponse response) {
        if (body instanceof ResponseDTO<?>) {
            ResponseDTO<?> responseDTO = (ResponseDTO<?>) body;
            responseDTO.setHostname(request.getLocalAddress().getHostName());
        }
        return body;
    }
} 
```

来源：[Spring MVC 中 Json 响应的后处理](https://stackoverflow.com/questions/26756811/post-processing-of-a-json-response-in-spring-mvc])

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T22:02:40.390

我找到了一个完整的解决方案和一个部分的解决方案。

部分解决方案：对于那些使用 Servlet 3.0 的用户，HTTPStatus 代码在 HttpServletResponse 对象上可用。这将解决我的问题的一半，因为我可以获得状态代码，但它仍然没有让我访问具有我想要检查的 body 属性的 ResponseEntity。

完整解决方案（适用于 Servlet 2.x）：我使用了 Aspect 和 Interceptor 的组合。

Aspect 被编码为针对返回 ResponseEntities 的控制器方法的 @AfterReturn。它基本上捕获了返回的 responseEntity 并将其放入 ThreadLocal<ResponseEntity> 集合中。

然后拦截器向 Aspect 询问线程的响应，并且 TA-DAH 可以访问它。

我希望这个答案对其他人有所帮助。干杯，杰森

# python - 如何在 PyMongo 中使用 sql “like”？

> ID：10018730
> 
> 赞同：25
> 
> 时间：2012-04-04T20:26:44.843
> 
> 标签：python, mongodb, pymongo, nosql

如何在 PyMongo 中使用 sql “like”？

```
>>> db.houses.find().count()
11616
>>> db.houses.find({"hid":u"16999"}).count()
1
>>> db.houses.find({"hid":u"/9/"}).count()
0 
```

[文档](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)说 MongoDB 中的 sql "like" ( )`SELECT * FROM users WHERE name LIKE "%Joe%"`是`db.users.find ({name:/Joe/})`.

如果直接向cli-client接口mongodb指定查询，那么一切正常，但在pymongo中不起作用。

问题是什么？

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-04T20:34:09.983

pymongo 不支持正则表达式文字，您必须使用 '$regex' 谓词：

```
 db.houses.find({"hid":{"$regex": u"9"}}) 
```

# windows - 禁用 windows 文件缓存

> ID：10018737
> 
> 赞同：3
> 
> 时间：2012-04-04T20:27:21.907
> 
> 标签：windows, winapi, caching

Windows 7 的任务管理器在性能选项卡中列出了用作缓存的物理内存的兆字节数。

我想在基于磁盘的数据（700 MB 文件）不能存储在主内存中的假设下测量我的程序的性能。实际上我有很多内存。我可以以某种方式强制从磁盘读取文件吗？

我已经尝试在寄存器中禁用 EnablePrefetcher 和 EnableSuperfetcher，但没有任何改变。一个有效的技巧是分配所有可用的内存。FILE_FLAG_NO_BUFFERING 和 FILE_FLAG_OVERLAPPED 的组合会提供所需的结果吗？还有其他想法吗？

*顺便说一句：我认为文件是从缓存中读取的，因为我第一次启动应用程序时，它的运行速度比后续运行慢得多。如果我分配所有可用内存，下一次运行又会变慢。此外，我在第一次运行应用程序时看到任务管理器中的缓存快速增长。*

*题外话：
具有讽刺意味的是，我们正在实现一个假设您不能将文件存储在主存中的算法。但是，我们不能不**将**它存储在主存储器中...... :)*

# jquery - 新添加的元素不会变得可拖动

> ID：10018738
> 
> 赞同：2
> 
> 时间：2012-04-04T20:27:22.143
> 
> 标签：jquery, jquery-ui

我正在创建一个简单的表单构建器来使用 jQueryUI。我有一个表单元素列表，就像我制作的可拖动的图像一样，设置为助手“克隆”。我还有一个可放置区域，在该区域上我设置了放置事件以读取放置图像的 id 并创建适当的表单元素并将其附加到可放置区域。添加新元素后，我将其设置为可拖动的。问题是，尽管新元素具有 ui-draggable 类，但一旦在它们上调用了 draggable，它们就不是可拖动的。一旦它们被创建，我希望能够拖动它们。

这是代码： -

```
var itemCount = 1;
var idToAdd;
var itemToAdd;

$(document).ready(function(){
    $(".draggable").draggable({
        opacity:0.5,
        helper: "clone"
    });

     $(".form_builder").droppable(
        {
                activeClass: "droppable_dragged",
                drop: function(e, ui){
                    var dropped_item = ui.draggable;
                    switch($(dropped_item).attr("id")){
                        case "text_box":
                            idToAdd = "textBox" + itemCount;
                            itemToAdd = "<input id='" + idToAdd + "' type='text' />";
                            break;
                        case "text_area":

                            break;
                        case "radio":
                            idToAdd = "radio" + itemCount;
                            itemToAdd = "<input id='" + idToAdd + "' type='radio' />";
                            break;
                        case "check":
                            idToAdd = "check" + itemCount;
                            itemToAdd = "<input id='" + idToAdd + "' type='check' />";
                            break;
                        case "dropdown":

                            break;
                        case "file":
                            idToAdd = "file" + itemCount;
                            itemToAdd = "<input id='" + idToAdd + "' type='file' />";
                            break;
                        case "button":
                            idToAdd = "button" + itemCount;
                            itemToAdd = "<input id='" + idToAdd + "' type='submit' />";
                            break;
                    }
                    itemCount++;
                    $(this).append(itemToAdd);
                    $("#" + idToAdd).draggable();
                }

            });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:42:49.297

**更新它不起作用的原因是输入以某种方式干扰了拖动事件。这与它被丢弃的事实无关。我已经为元素添加了填充，现在，拖动填充，它可以工作：http: [//jsfiddle.net/7HUt2/4/](http://jsfiddle.net/7HUt2/4/)**

1.  尝试限制变量的范围：

    ```
    drop: function(e, ui){
       var itemToAdd;
       ...
    } 
    ```

    这将确保没有其他同时发生的事件会破坏您的程序流程。

2.  如果您可以直接引用它们，请避免寻找您的对象：

    ```
    itemToAdd = '<input type="..."/>'; //No id necessary at this point.   
    $(itemToAdd).appendTo(this).draggable(); 
    ```

这将使它更加健壮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:34:43.840

无论您在哪里添加新元素，您都必须再次应用插件，因为动态添加的元素不知道将自己附加到哪里

```
 //here you add the elements with class draggable 
 $(".draggable").draggable({
      //settings here
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:37:00.337

调用 .draggable 只会影响现有的 DOM，不会影响未来的 DOM 元素。因此，您需要在添加要使其可拖动的新元素后再次调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:41:34.047

请尝试更改

```
$('body').append(itemToAdd) 
```

到

```
$('body').append(itemToAdd).find('.draggable').draggable() 
```

或者

```
$('body').append(itemToAdd);
$('.draggable').draggable(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T20:58:57.060

为了使您的插件对动态添加的元素产生影响，您可以使用以下`.on()`方法（从 jQuery v1.7.x 开始`.on()`替换），例如：`.live()`

```
$('body').on("focusin", function(){
    $(".draggable").draggable({
        opacity:0.5,
        helper: "clone"
    });
}); // on 
```

要对 Chrome 的问题进行排序，`tabindex="1"`请使用`class="draggable"`. 其他插件也有同样的问题，这就是解决方法。

[检查此作为参考](https://stackoverflow.com/a/9084293/1055987)

使用此解决方法，您无需在按照建议添加新元素后再次调用插件。

# arrays - 如何在字节数组中搜索“StringA”？

> ID：10018739
> 
> 赞同：3
> 
> 时间：2012-04-04T20:27:31.427
> 
> 标签：arrays, delphi, byte, freepascal

使用 FreePascal（或 Delphi，如果没有 FP 示例），给定一个 2048 字节的缓冲区，它是一个“字节数组”，我如何在缓冲区中搜索“StringA”？

```
var
Buffer : array[1..2048] of byte;
...
  repeat
      i := 0;
      BlockRead(SrcFile, Buffer, SizeOf(Buffer), NumRead);      
      // Now I want to search the buffer for "StringA"? 
... 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T21:08:56.457

我认为这将在 fpc 中工作而无需额外的 Unicode/AnsiString 转换：

```
function Find(const buf : array of byte; const s : AnsiString) : integer;
//returns the 0-based index of the start of the first occurrence of S
//or -1 if there is no occurrence
var
  AnsiStr : AnsiString;
begin
  SetString(AnsiStr, PAnsiChar(@buf[0]), Length(buf));
  Result := Pos(s,AnsiStr) - 1;  // fpc has AnsiString overload for Pos()
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T20:35:30.953

这是一种简单的方法，我们只需逐字节遍历缓冲区以查找所需的字符串。

```
function Find(const Buffer: array of Byte; const S: AnsiString): Integer;
//returns the 0-based index of the start of the first occurrence of S
//or -1 if there is no occurrence
var
  N: Integer;
begin
  N := Length(S);
  if N>0 then
    for Result := low(Buffer) to high(Buffer)-(N-1) do
      if CompareMem(@Buffer[Result], Pointer(S), N) then
        exit;
  Result := -1;
end; 
```

我不使用 FPC，但我希望这将保持不变，如果不是，那么我相信你可以转换它。

# sql-server - SQL Server 存储过程的问题

> ID：10018743
> 
> 赞同：0
> 
> 时间：2012-04-04T20:27:58.053
> 
> 标签：sql-server, vb.net

我正在使用以下存储过程来调用期间编号以将它们与教师匹配。

我们正在编写一个考勤应用程序，从下拉菜单中选择教师的姓名后，“句号”下拉菜单就会出现。出于某种原因，我们没有得到要填充的周期数据。

存储过程：

```
ALTER PROCEDURE spGetPeriod @Period varchar(10)
AS
SELECT Period 
FROM tmTeacher
WHERE Period = @Period

RETURN

Teacher Table 
TeacherId   varchar(10) Unchecked
FName           varchar(20) Checked
LName           varchar(20) Checked
StudentId   varchar(10) Unchecked
Period          varchar(10) Unchecked
TeacherName varchar(50) Checked

Period Table
PeriodId    varchar(10) Unchecked
Period          varchar(50) Unchecked
ClassId         varchar(10) Unchecked 
```

提前致谢！

调用 SP 的代码：

```
'*****  SETUP THE CONNECTION ***
    SQL = "spGetPeriod '" + (cboTeacher.Text) + "'"
    'SQL = "select * from teacher"
    Try
        With SqlCmd
            .CommandText = SQL
            '.CommandType = CommandType.StoredProcedure
            .Connection = objConnection
            '.Parameters.AddWithValue("@TeacherId", cboTeacher.SelectedIndex)
        End With
        SqlCmd = New SqlCommand(SQL, objConnection)
    Catch ex As Exception
        Call ErrorControl(ex)
    End Try

    '*** MAKE THE CONNECTION ***

    Try
        HandleConnection(objConnection)
        'MsgBox("Connection Established!")
        ToolStripStatusLabel1.Text = "Connection Established!"

    Catch ex As Exception
        Call ErrorControl(ex)

    End Try

    '*** EXECUTE THE COMMAND AND FILL THE COMBO ***
    Dim Reader As SqlDataReader = SqlCmd.ExecuteReader()
    While Reader.Read()
        cboPeriod.Items.Add(Reader(0).ToString)

    End While
    ToolStripStatusLabel1.Text = "Periods Loaded!"

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:55:41.090

1）您在代码上添加了一个名为 TeacherId 的参数，但在您的 proc 上它不存在。您必须将正确的参数从接口传递给过程

2）您的过程称为 spGetPeriod 但在您的 SQL 上，您选择 * from teacher

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:41:42.577

您已在存储过程中将参数定义为“@Period”，但是当您将参数添加到命令时，您将其称为“@TeacherId”。您的代码一目了然，尝试更改过程...

```
ALTER PROCEDURE spGetPeriod @TeacherId varchar(10)
AS
SELECT Period 
FROM tmTeacher
WHERE TeacherId = @TeacherId

RETURN 
```

对于您没有任何数据的问题，也许尝试将组合框的数据源绑定到阅读器，而不是遍历阅读器并添加每个，离开 ExecuteReader 语句并尝试在末尾替换您的 while 循环...

```
cboPeriod.DataSource = Reader
cboPeriod.DataTextField = "Period"
cboPeriod.DataValueField = "Period"
cboPeriod.DataBind() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:49:45.830

我发现您的架构存在一些问题：

*   您的各种 ID 应该是整数，而不是 varchar。
*   教师表具有 FName、LName 和 TeacherName。这不是标准化的。如果 FName 和 LName 用于学生，则应将它们保存在具有 StudentId 主键的单独学生表中。
*   StudentId 可能不应该在教师表中。如果你想存储哪些学生在哪个时期，你应该使用一个多对多关系的标准连接表。例如，您可以将其称为“PeriodStudent”，它将存储 StudentId 和 PeriodId。

花点时间了解数据库规范化概念，例如第一、第二和第三范式。如果您不遵守基本的规范化原则，那么您就是在寻求未来的重大问题，而这些问题在以后修复的成本将非常高。

# marklogic - 在 Marlogic 中存储 XML 数据的最佳方式

> ID：10018744
> 
> 赞同：3
> 
> 时间：2012-04-04T20:27:59.600
> 
> 标签：marklogic

我是 Marklogic 世界的新手。我的程序使用定制的 Java 应用程序来查询 Also.com 获取 XML 数据提要每 30 秒。结果以 XML 格式返回。Java 应用程序使用 XCC API (Marklogic API) 将检索到的数据插入到 ML 中的单个 XML 文件中。数据大小为每分钟 6 MB，如果应用程序运行一天左右，数据量将以 GB 为单位增长。我不知道我必须做任何管理员配置才能将大量数据放入 MarkLogic 中的单个 XML 文件中。有人可以验证我的方法，或者建议我是否必须在管理员级别进行任何配置更改。XML的结构如下...

```
<?xml version="1.0" encoding="UTF-8"?>      
<moreovercontentdump>        
<article id="_6232903453">           
<description></description>
<author></author>       
<source_category>Local</source_category>    
<genre>General</genre>  
<publisher></publisher> 
<media_type>text</media_type>   
<docurl>http://www.ilrestodelcarlino.it</docurl>    
<harvest_time>Apr  4 2012  4:28PM</harvest_time>    
<valid_time>May 14 2012  4:27PM</valid_time>    
</article>
<article id="_6232903453">           
<description></description>
<author></author>       
<source_category>Local</source_category>    
<genre>General</genre>  
<publisher></publisher> 
<media_type>text</media_type>   
<docurl>http://www.ilrestodelcarlino.it</docurl>    
<harvest_time>Apr  4 2012  4:28PM</harvest_time>    
<valid_time>May 14 2012  4:27PM</valid_time>    
</article>
<article id="_6232903453">           
<description></description>
<author></author>       
<source_category>Local</source_category>    
<genre>General</genre>  
<publisher></publisher> 
<media_type>text</media_type>   
<docurl>http://www.ilrestodelcarlino.it</docurl>    
<harvest_time>Apr  4 2012  4:28PM</harvest_time>    
<valid_time>May 14 2012  4:27PM</valid_time>    
</article>
</moreovercontentdump> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T02:39:00.603

Looking at the sample XML, I think you will probably want to store each article in its own document. You could write a FLWOR expression to call `xdmp:document-insert`, or call `xdmp:spawn` if you would prefer to insert each document in an asynchronous task.

The simplest code might look like this:

```
for $article in xdmp:http-get($some-url, $options)/moreovercontentdump/article
let $uri := concat('moreover/', $article/@id)
return xdmp:document-insert($uri, $article) 
```

You could enhance that code by rewriting some of the original XML. For example, you might want to reformat the `harvest_time` and `valid_time` elements in xs:dateTime format. That way you can create a range index on those values.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T01:01:22.757

一般来说，如果您将来自Moreover.com 的每个响应存储在MarkLogic 中作为其自己的文档，您会得到更好的服务。在某些方面，在 MarkLogic 内部，文档就像 RDBMS 中的行。

此外，如果您插入其中一个 30 秒，我很难看到每分钟摄取 6MB。你遗漏了一些细节吗？

# c# - 回发后保持价值

> ID：10018748
> 
> 赞同：2
> 
> 时间：2012-04-04T20:28:15.687
> 
> 标签：c#, javascript, asp.net

我有一个类似于以下代码的 ASP.NET 网站：

**.aspx**

```
<asp:UpdatePanel ID="UpdatePanel" runat="server">
    <ContentTemplate>
        <table id="RatesTable">
            <tr>
                <td>Hotel</td>
                <td>&nbsp;</td>
            </tr>
            <tr id="NewRateRow">
                <td>
                    <asp:DropDownList ID="TxtHotel" runat="server" OnSelectedIndexChanged="TxtHotel_SelectedIndexChanged" AutoPostBack="true">
                    </asp:DropDownList>
                </td>
                <td>
                    <a href="javascript:AddHotelPackRate()">Add</a>
                </td>
            </tr>
        </table>
    </ContentTemplate>
</asp:UpdatePanel> 
```

AddHotelPackRate JS 函数，读取下拉列表中的值并在表的开头“绘制”一个包含该值的新行。问题是，在此之后，当再次执行 SelectIndexChanged 函数时，之前添加的行现在消失了。

有没有办法避免在回发后丢失此类信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:32:42.017

您要么必须让 JS 在更新面板中添加内容，要么您需要添加 JS 代码在回发中添加的任何数据，以便在重新绘制数据时它继续存在。

简单的方法可能只是`AddHotelPackRate`导致更新面板更新，通过服务器端代码以及任何其他数据库/等添加行。变化，使其继续存在。

编辑：另一条评论还提出了这样一个事实，即当所选项目更改时您无法更新更新面板，从而完全避免了该问题（以不同的方式）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T20:35:10.540

问题是您没有在更新面板中添加触发器。将您的代码更改为：

```
<asp:UpdatePanel ID="UpdatePanel" runat="server">
<ContentTemplate>
    <table id="RatesTable">
        <tr>
            <td>Hotel</td>
            <td>&nbsp;</td>
        </tr>
        <tr id="NewRateRow">
            <td>
                <asp:DropDownList ID="TxtHotel" runat="server" OnSelectedIndexChanged="TxtHotel_SelectedIndexChanged" AutoPostBack="true">
                </asp:DropDownList>
            </td>
            <td>
                <a href="javascript:AddHotelPackRate()">Add</a>
            </td>
        </tr>
    </table>
</ContentTemplate>
<Triggers>
   <asp:AsyncPostBackTrigger ControlID="TxtHotel" EventName="SelectedIndexChanged" />
</Triggers>
</asp:UpdatePanel> 
```

# ruby-on-rails - 从 Django 到 Rails

> ID：10018749
> 
> 赞同：13
> 
> 时间：2012-04-04T20:28:16.077
> 
> 标签：ruby-on-rails, django

从历史上看，我是一名 django 开发人员。我发现自己突然处于一个要做一堆 Rails 编程的位置。我浏览了 Rails 文档并做了一些戳戳和刺激。大多数人认为我从未见过 Web 框架，或者（更糟糕的是）我从未编写过代码。

理想情况下，我想要一个针对了解 django 的人的资源（pylons / sinatra / 等会很好）并告诉我我需要知道的差异才能让我站起来使用 ruby​​。

这样的东西很难搜索，因为网络上到处都是“django vs rails”的文章。

是否有假设了解其他框架的良好 Rails 资源？从 django 到 ruby​​，我需要知道什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T11:04:00.660

我和你处于同样的位置：我需要学习 Rails 来工作，我希望能找到一篇文章/教程来表达 Rails 概念**与 Django 概念的区别**。

经过大量搜索，我发现了这个：

## [http://www.vaporbase.com/rails-django](http://www.vaporbase.com/rails-django)

这比较了 Rails 和 Django 各自实现各种 Web 开发概念的方式。

它非常长且深入，但结构良好，因此您可以深入了解需要帮助理解的部分。

但是，一个很大的缺点是：它是在 2007 年编写的。但只要您牢记这一点，它仍然很有用。

* * *

**更新**：

我还发现了这个——一个更短、更最新的备忘单式比较：

## [Djangonauts 的 Rails 快速入门](http://blog.jupo.org/2011/07/30/rails-quick-start-for-djangonauts/)

这有助于快速检查每个框架针对给定概念使用的术语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:10:34.233

我想这里的答案是“不”。

也许我会写一个。

# java - How to update Jre and Jdk

> ID：10018756
> 
> 赞同：0
> 
> 时间：2012-04-04T20:28:41.443
> 
> 标签：java, eclipse, ubuntu

I am trying the try with resource statement:

```
 try(ObjectOutputStream oos=new ObjectOutputStream(new FileOutputStream(defaultFile)))
    {
        ;
    }
    catch(IOException e)
    {
        ;
    } 
```

But I get syntax error, which makes me think that I need the newest version of Java. So I have downloaded the latest Jre and Jdk from Oracle site, but I don't know how to effectively substitute the new Jre and Jdk with the older ones. I have tried from eclipse windows->preferences->installed JREs, the is the option "search".But If I try searching in the directory where I have Jre and Jdk files, it says that no valid Jre was found. How to effectively update Jre and Jdk? PS:I am on ubuntu 10.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:37:29.107

First, make sure you are using the latest release of Eclipse (Indigo SR2, aka 3.7.2); full Java 7 support wasn't available until Eclipse 3.7.1

Now, on the **Installed JREs** preferences page, are you using the Add... button to point to the root of your JDK installation? Describe the steps you have taken to get the "no valid JRE found" message.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:37:31.120

If you're trying to use the new`try-with-resources` statement of `Java 7` you should first of all look at the correct syntax [here](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) or doing some other web search. This [link](http://www.javacodegeeks.com/2011/07/java-7-try-with-resources-explained.html) have some nice examples as well.

This being said, even if I'm not super familiar with Ubuntu 10.10, the following instruction should do the job: [Installing Java 7 in Ubuntu](http://www.webupd8.org/2011/09/how-to-install-oracle-java-7-jdk-in.html).

Hope this helps!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T20:42:02.573

I think "upgrading Xyz" is not a programming question but an administration question. Especially the Ubuntu companion site [https://askubuntu.com/](https://askubuntu.com/) is a better place for this question.

A quick look there turned up this may helpful post:

[https://askubuntu.com/questions/89556/getting-java-working-again-in-10-10-or-force-newest-version-of-openjdk](https://askubuntu.com/questions/89556/getting-java-working-again-in-10-10-or-force-newest-version-of-openjdk)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-04T20:30:14.017

your JDK and JRE are ok. Your code has an error. It should look like this:

```
try
{
    ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(defaultFile));
}
catch (IOException e)
{
    e.printStackTrace();
} 
```

# python - mixin 的顺序如何影响派生类？

> ID：10018757
> 
> 赞同：60
> 
> 时间：2012-04-04T20:28:41.597
> 
> 标签：python, django, django-views, django-class-based-views, method-resolution-order

说，我有以下通过触摸相互重叠的混合`dispatch()`：

```
class FooMixin(object):
    def dispatch(self, *args, **kwargs):
        # perform check A
        ...
        return super(FooMixin, self).dispatch(*args, **kwargs)

class BarMixin(object):
    def dispatch(self, *args, **kwargs):
        # perform check B
        ...
        return super(FooMixin, self).dispatch(*args, **kwargs) 
```

如果我希望我的视图通过订单，请检查 A -> 检查 B，我的代码应该是`MyView(FooMixin, BarMixin, View)`还是`MyView(BarMixin, FooMixin, View)`？

为什么我们总是把`View`它或其子类放在 mixins 之后？（我从阅读 django 通用视图的源代码中注意到了这一点，但我不知道它背后的基本原理，如果有的话）

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-04-04T20:32:35.790

MRO 基本上是深度优先，从左到右。有关更多信息，请参阅[新样式 Python 类中的方法解析顺序 (MRO)](https://stackoverflow.com/questions/1848474/method-resolution-order-mro-in-new-style-python-classes)。

您可以查看要检查的类的[`__mro__`属性](http://docs.python.org/reference/datamodel.html#invoking-descriptors)，但`FooMixin`如果您想先进行“检查A”，则应先检查。

```
class UltimateBase(object):
    def dispatch(self, *args, **kwargs):
        print 'base dispatch'

class FooMixin(object):
    def dispatch(self, *args, **kwargs):
        print 'perform check A'
        return super(FooMixin, self).dispatch(*args, **kwargs)

class BarMixin(object):
    def dispatch(self, *args, **kwargs):
        print 'perform check B'
        return super(BarMixin, self).dispatch(*args, **kwargs)

class FooBar(FooMixin, BarMixin, UltimateBase):
    pass

FooBar().dispatch() 
```

印刷：

```
perform check A
perform check B
base dispatch 
```

`View`必须放在最后，这样它才能“捕获”任何不在任何 mixin 上的属性查找，而不在这些 mixin 上隐藏任何方法。我不确定我是否理解您问题的那一部分-“为什么要添加它”或“为什么要最后添加”？

# date - 如何使用 vbscript 将日期从 yyymmdd 格式化为 mm/dd/yyyy？

> ID：10018759
> 
> 赞同：2
> 
> 时间：2012-04-04T20:28:49.600
> 
> 标签：date, vbscript, formatting

目前我有一个以 yyyymmdd 格式存储日期的数据源，我需要以 mm/dd/yyyy 格式返回它们（两个日期都没有时间部分）。我从日期源中检索日期没有问题，但以下内容没有重新格式化日期（但也没有错误）

```
Set LookupDate = FormatDateTime(objRS.Fields("Date"),2) 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-08T12:30:36.113

月，日期左垫零：

对("0" & 月(dt), 2) & "/" & 对("0" & 日(dt), 2) & "/" & 年(dt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:13:34.883

FormatDateTime 考虑了系统的区域设置。

我会使用以下方法：

```
dim rawDate
rawDate = cDate(objRS.Fields("Date"))

dim lookupDate
lookupDate = month(rawDate)
lookupDate = lookupDate & "/" & day(rawDate)
lookupDate = lookupDate & "/" & year(rawDate) 
```

如果要包括前导零：

```
dim rawDate, rawDay, rawMonth

rawDate = cDate(objRS.Fields("Date"))

rawDay = day(rawDate)
if rawDay < 10 then
    rawDay = "0" & rawDay 
end if

rawMonth = month(rawDate)
if rawMonth< 10 then
    rawMonth = "0" & rawMonth
end if

dim lookupDate
lookupDate = rawMonth
lookupDate = lookupDate & "/" & rawDay
lookupDate = lookupDate & "/" & year(rawDate) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-08T08:55:54.140

如果您需要**日期和时间**，可以使用以下功能。这将为您提供格式为**YYYYMMDDhhmmss的日期和时间**

```
 function GetFormattedDateTime
    dim t
    t = now
    GetFormattedDateTime= DatePart("yyyy",t) & _
                           Right("0" & DatePart("m",t), 2) & _
                           Right("0" & DatePart("d",t), 2) & _ 
                           Right("0" & DatePart("h",t), 2) & _ 
                           Right("0" & DatePart("n",t), 2) & _ 
                           Right("0" & DatePart("s",t), 2)
  end function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T20:49:09.573

FormatDateTime() 返回一个字符串，而不是一个对象；所以摆脱“设置”。如果那不能达到预期的结果，请说出来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T13:53:20.323

感谢大家的投入！我使用了一个元素组合来获得一个有效的最终答案，这里是：

```
PUDate = objRS.Fields("Date")
YearPart = Left(PUDate, 4)
MonthPart = Mid(PUDate, 5, 2)
DayPart = Right(PUDate, 2)
LookupDate = MonthPart & "/" & DayPart & "/" & YearPart 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T20:56:09.200

您需要在输入中添加连字符；然后就可以通过了。这是一种方法：

```
Dim d
d = objRS.Fields("Date")
d = Left(d, 4) & "-" & Mid(d, 5, 2) & "-" & Right(d, 2)
LookupDate = FormatDateTime(d, 2) 
```

# jquery - jquery ajax：从 CGI 读取值

> ID：10018760
> 
> 赞同：0
> 
> 时间：2012-04-04T20:28:58.583
> 
> 标签：jquery, ajax, cgi

我正在尝试使用 jquery ajax 从 CGI 中获取值。我无法更改 CGI 的任何设置，因为它不在我自己的服务器上。

我对 CGI 的了解是，如果我直接在浏览器地址栏中录制它：

“http://otherdomain/cgi-bin/getvalue.exe?value”

然后我得到一个响应值，即 1234，它显示在空白浏览器窗口中。

通过以下 ajax 调用，我在 firebug -> network -> response 选项卡 (1234) 中获得响应值。但我无法访问 javascript 中的值。console.log(data) 只返回“未定义”。

有没有办法用javascript捕捉价值？

我想我必须将 ajax 请求作为 dataType: "script" 发送，因为密码（cookie）也必须发送到 CGI。如果我选择 dataType: "text" 来自 cookie 的密码不会在请求标头中发送。

```
 $.ajax({
        type: "GET",
        url: "http://otherdomain/cgi-bin/getvalue.exe?value",
        crossDomain: true,
        cache: true,
        dataType: "script",
        success: function(data, textStatus, jqXHR) {
            console.log(data);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log(errorThrown);
            console.log(textStatus);
            console.log(jqXHR);         
        }   
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:57:26.690

由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)AJAX 不允许跨域请求，但响应类型为 的请求除外`JSONP`。您需要在服务器上设置代理以使用 AJAX 进行查询，该代理将请求提交到其他域，然后将收到的响应返回给 AJAX 调用。

# linux - 在 Mac OS X 上构建 Linux 内核

> ID：10018764
> 
> 赞同：25
> 
> 时间：2012-04-04T20:29:17.193
> 
> 标签：linux, macos, kernel, elf

我正在做一个修改Linux内核的项目。我有一台桌面 Linux 机器，在上面构建内核没有问题。

但是，我要去旅行，我想在路上工作。我只有一台 MacBook。当我尝试构建 Linux 内核时，它抱怨说`elf.h was not found`.

我从互联网上下载了一个 elf.h。现在它抱怨：`NO ELF`

我尝试从我的 Linux 桌面复制整个`/usr/include`文件，并将其设置为包含目录，但仍然出现奇怪的错误，例如`"u8" not declared`

在 Mac 上进行内核开发的标准方法是什么？我有一台在同一台 Mac 上运行 Linux 的虚拟机，它将用于测试修改后的内核。但是，我真的不想在上面构建内核，因为它有点慢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-04T23:02:07.140

首先，我同意只使用 Linux 虚拟机通常更简单。也就是说，如果你**真的**想这样做，我已经使用下面的过程成功编译了 Linux 内核代码。

在开始之前，您可能需要在 Mac 上的区分大小写的文件系统上安装 Linux 源代码树。（默认的 HFS 文件系统不区分大小写。）我不会在这里介绍，但是很多人这样做是为了编译 Android 源代码树，所以[您可以使用 Google 查找说明](http://google.com/search?q=mac%20android%20case%20insensitive%20file%20system)。

首先，您需要以下文件来在 OS X 机器上交叉编译内核（将它们从已知的 Linux VM 复制到本地`/usr/include`）：

```
/usr/include/elf.h
/usr/include/features.h
/usr/include/bits/predefs.h
/usr/include/bits/wordsize.h
/usr/include/gnu/stubs.h
/usr/include/gnu/stubs-64.h 
```

接下来，您需要`malloc.h`位于 Linux 系统的预期位置，因此请执行以下操作：

```
sudo ln -s /usr/include/malloc/malloc.h /usr/include/malloc.h 
```

最后，您需要担心系统上安装的编译器是否适合构建 Linux 内核。我已经将这个过程用于为 Android 编译的内核，使用适当的交叉编译器工具链，但我不确定你是否可以使用`gcc`OS X 上的默认编译器成功编译 Linux 内核（假设你有 Xcode 附带的那个） ...)

* * *

**编辑**：您可能还想按照上面“nmagerko”评论中链接的错误中指出的步骤操作，以确保您具有正确的依赖关系，以及`sed`. 尤其是：

```
$ sudo port install libelf
$ sudo port install gsed 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T21:00:21.847

这是一个常见的问题（嗯，通常它是在 Windows 上构建的，但答案是一样的）。

只是不要这样做。您将很难正确构建任何东西，这是不值得的。正如您自己所说，使用虚拟机。它有点慢，但不是那么多，至少构建可以正常工作。

内核开发已经够难了，而且不会引入额外的、不必要的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-03T17:24:04.790

这是 Android 6.0 Marshmallow 和 OSX 10.10 Yosemite 的更新。我已经使用这种方法完成了几次成功的交叉构建。唯一的限制是我只在签出完整的 AOSP 源代码的情况下完成了这些操作。

我使用 brew 的 libelf 来获得一个不错的包管理精灵库。这为我们提供了需要包含的 elf 文件，`usr/local/opt/libelf/include/libelf/gelf.h`

```
brew install libelf 
```

但是，如果您将其符号链接到`usr/local/include`显然缺少某些定义，这仍然会在构建时引发错误。因此，我从中窃取了缺失的定义`<kernel_source>/arch/arm/include/asm/elf.h`并创建了一个 shim 包含文件：

```
cat <<EOT >> /usr/local/include/elf.h
#include "../opt/libelf/include/libelf/gelf.h"
#define R_386_NONE 0
#define R_386_32 1
#define R_386_PC32 2
#define R_ARM_NONE 0
#define R_ARM_PC24 1
#define R_ARM_ABS32 2
#define R_MIPS_NONE 0
#define R_MIPS_16 1
#define R_MIPS_32 2
#define R_MIPS_REL32 3
#define R_MIPS_26 4
#define R_MIPS_HI16 5
#define R_MIPS_LO16 6
#define R_IA64_IMM64 0x23 /* symbol + addend, mov imm64 */
#define R_PPC_ADDR32 1 /* 32bit absolute address */
#define R_PPC64_ADDR64 38 /* doubleword64 S + A */
#define R_SH_DIR32 1
#define R_SPARC_64 32 /* Direct 64 bit */
#define R_X86_64_64 1 /* Direct 64 bit */
#define R_390_32 4 /* Direct 32 bit. */
#define R_390_64 22 /* Direct 64 bit. */
#define R_MIPS_64 18
EOT 
```

这应该足以让构建完成。如果有人需要这方面的更多信息，我有一篇[文章](https://medium.com/@antonvattay/building-android-6-0-kernel-on-osx-the-missing-parts-cc2b2a935ded#.bsqqb0s6j)涵盖了在 OSX 上构建的完整 Android 内核。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-22T00:21:48.420

# 使用 AOSP 的预构建编译内核

我已经从 linux 主机中为缺少的 OSX 标头创建了符号链接，显然效果很好！在我的设置中，我同步了整个[AOSP repo](https://android.googlesource.com/)，其中包括所有[prebuilts](https://android.googlesource.com/platform/prebuilts/)，但我实际用于构建内核的那些是：

*   缺少 Linux 头文件：[gcc/linux-x86/host/x86_64-linux-glibc2.11-4.8](https://android.googlesource.com/platform/prebuilts/gcc/linux-x86/host/x86_64-linux-glibc2.11-4.8/)
*   交叉编译器：[gcc/darwin-x86/arm/arm-eabi-4.8/](https://android.googlesource.com/platform/prebuilts/gcc/darwin-x86/arm/arm-eabi-4.8/)

克隆它们以使以下目录树有效：

```
<SOME-PATH>/prebuilts/
<SOME-PATH>/prebuilts/gcc/linux-x86/host/x86_64-linux-glibc2.11-4.8/
<SOME-PATH>/prebuilts/gcc/darwin-x86/arm/arm-eabi-4.8/ 
```

确保根据您的 Android 目标版本签出适当的分支/标签。

## 安装缺少的标题

不确定这是否是正确的方法，但是将一堆 linux 头文件放入`/usr/local/include`可以解决所有问题。不要忘记`chmod +x`脚本。

### install_headers.sh：

```
#!/bin/sh

PREBUILTS_DIR="<SOME-PATH>/prebuilts" # fill in the path here!

PREBUILT_GCC=$PREBUILTS_DIR"/gcc/linux-x86/host/x86_64-linux-glibc2.11-4.8"
KERNEL_HEADERS=$PREBUILT_GCC"/sysroot/usr/include"
HOST_HEADERS="/usr/local/include"

function install_header() {
    header=$1
    ln -s $KERNEL_HEADERS/$header $HOST_HEADERS/$header
}

# create symlinks for the missing headers
install_header elf.h
install_header features.h
# the following are folders (that contain headers)
install_header bits
install_header gnu
install_header linux
install_header asm
install_header asm-generic 
```

# 构建内核

```
export PATH=<SOME-PATH>/prebuilts/gcc/darwin-x86/arm/arm-eabi-4.8/bin:$PATH
export ARCH=arm
export SUBARCH=arm
export CROSS_COMPILE=arm-eabi-
# in this example it builds for N6
make shamu_defconfig
make -j8 
```

### 瞧：

> 内核：arch/arm/boot/zImage-dtb 已准备就绪

# 我的配置

*   macOS Sierra 10.12.3
*   XCode：使用 MacOSX10.11.sdk，允许`AOSP`在 mac 上构建
*   目标设备：N6/shamu
*   AOSP 分支：Marshmallow（已更新`mac_version.mk`以`build`允许使用 10.12.3 sdk）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-08T04:11:20.893

这适用于 kitkat（没有尝试早期版本） -`make -j8 ARCH=arm CROSS_COMPILE=arm-eabi- HOSTCFLAGS="-I ../external/elfutils/libelf"`

这假设 android 构建的其余部分像往常一样设置，并且内核目录位于 android 构建中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-10T06:21:59.677

在 OSX 10.15.4 Catalina 上构建的 arm64 内核的一次更新。

我的意图是在 macOS 上本地构建最新（5.7）arm64 内核，并在 qemu-system-aarch64 上播放它。顺便说一句，从 crosstool-ng 构建的工具链。

1）首先按照上述步骤，包含一些头文件。我把它们放在我的主文件夹下

$ ls ~/usr/include/ -l

drwxr-xr-x 4 yupluo01 admin 128 May 4 16:47 bits

-rw-r--r-- 1 yupluo01 管理员 177346 5 月 4 日 16:23 elf.h

-rw-r--r-- 1 yupluo01 admin 17079 May 4 16:23 features.h

drwxr-xr-x 4 yupluo01 admin 128 May 4 16:44 gnu

-rw-r--r-- 1 yupluo01 admin 6186 May 4 16:33 malloc.h

-rw-r--r-- 1 yupluo01 admin 2290 May 4 16:43 stdc-predef.h

2) 其次，对主机 uuid 代码进行一些 hack，因为 mac 上的 uuid_t 类型与 linux 不同：scripts/mod/file2alias.c 通过一个宏 BUILD_ON_LINUX 删除 uuid_t 定义，并在 do_tee_entry() 中注释代码

3) 使 ARCH=arm64 HOSTCFLAGS=" **-I /usr/local/include -I ~/usr/include -I /usr/local/opt/openssl/include/ -L /usr/local/opt/openssl/lib/** -DBUILD_ON_LINUX=0" CROSS_COMPILE= **aarch64-unknown-linux-gnu-** O=out_arm64/

# android - C2DM 和 Titanium Appcelerator 集成

> ID：10018766
> 
> 赞同：0
> 
> 时间：2012-04-04T20:29:34.170
> 
> 标签：android, titanium, appcelerator, android-c2dm, titanium-modules

我正在使用 Titanium Appcelerator 来在 Android 上实现 C2DM。在他们的论坛和 Stackoverflow 中查看了许多答案后，我找到[了一个指南](http://technoblog-bhushan.blogspot.in/2012/03/looking-at-all-possible-solution-for.html)，该指南引导我完成了编译并将模块[（来自 GitHub 的titanium-c2dm）](https://github.com/Kuraturpa/titanium-c2dm)合并到我的程序中。我能够正确编译和链接所有内容，但试图按照示例代码进行注册

```
c2dm.registerC2dm(senderId, {
    success:function(e)
    {
        //stuff here
    },
    error:function(e)
    {
        //stuff here
    },
    callback:function(e) // called when a push notification is received
    {
        //stuff here
    }
}); 
```

我在我的设备上收到以下错误（来自 adb logcat）：

```
I/TiAPI   ( 2731): Registering...
D/C2dmModule( 2731): (KrollRuntimeThread) [196,687] registerC2dm called
D/C2dmModule( 2731): (KrollRuntimeThread) [1,688] get registrationId property
MORE STUFF HAPPENS HERE  
W/ActivityManager(  127): Unable to start service Intent
                          {act=com.google.android.c2dm.intent.REGISTRATION 
                          cat=[com.vivas.c2dmtest] cmp=com.vivas.c2dmtest/com.findlaw.c2dm.C2DMReceiver (has extras) }: not found 
```

有人知道如何将其纳入我的项目吗？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:47:18.410

这对我有用：

更改您的 tiapp.xml 和 timodule.xml

```
<service android:name=".C2DMReceiver"/> 
```

至

```
<service android:name="com.findlaw.c2dm.C2DMReceiver"/> 
```

# python - 如何创建画布选择工具？

> ID：10018767
> 
> 赞同：0
> 
> 时间：2012-04-04T20:29:35.327
> 
> 标签：python, pygtk

我想要做的是使用 PyGtk 创建一个选择工具（就像你在大多数绘图程序中看到的那样）。我已经看到一个之前的问题提出了类似的问题，但他们似乎已经知道他们在做什么来进行选择。该用户说他正在使用事件框，但我不知道如何使用它来完成我想要做的事情。事件框如何与选择一起使用？

矩形的算法根本不是问题，我只需要知道我应该使用什么工具来实际选择图片的一部分并能够移动它。这是我第一次使用 PyGtk，而且我对 python 本身也很陌生，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:19:42.917

如果您想显示图像并允许用户选择和移动其中的一部分，您最好寻找现成的图像编辑小部件。GTK 没有附带一个。

要自己滚动，您可以使用图像小部件进行显示，但它不关心鼠标，因此您可以将其放置在事件框内并连接到按钮和移动事件。您必须自己在支持图像的 pixbuf 中处理所有矩形、行走的蚂蚁和浮动切口的绘制。

使用一个空的事件框从头开始甚至自己绘制图像可能会更容易。

# android - 我的自定义主题

> ID：10018768
> 
> 赞同：1
> 
> 时间：2012-04-04T20:30:01.973
> 
> 标签：android

我可以采用这种样式并在 Themes.XML 中使用它制作一个主题并将其应用于我的大部分活动吗

```
 <?xml version="1.0" encoding="utf-8"?>
   <resources>
    <style name="biglayout">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">match_parent</item>
    <item name="android:orientation">vertical</item>
    <item name="android:background">@drawable/pt5</item>
</style>
<style name="radiotiltebar">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">44dp</item>
    <item name="android:background">@drawable/tilte2</item>

</style>
<style name="radiorelativelayout">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">fill_parent</item>

</style>
<style name="btn1">
    <item name="android:layout_width">106dp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_alignParentRight">true</item>
    <item name="android:layout_alignParentTop">true</item>
    <item name="android:background">@null</item>
    <item name="android:drawableBottom">@drawable/note</item>

</style>
<style name="btn2">
    <item name="android:layout_width">108dp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_alignParentBottom">true</item>
    <item name="android:layout_alignParentTop">true</item>
    <item name="android:background">@null</item>
    <item name="android:drawableBottom">@drawable/key_icon</item>
</style>
<style name="btn3">
    <item name="android:layout_width">106dp</item>
    <item name="android:layout_height">fill_parent</item>
    <item name="android:layout_alignParentTop">true</item>
    <item name="android:layout_toLeftOf">@+id/button1</item>
    <item name="android:background">@null</item>
    <item name="android:drawableBottom">@drawable/info</item>
</style> 
```

XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/biglayout">

<RadioGroup
  android:id="@+id/radioGroup1"
  style="@style/radiotiltebar">
<RelativeLayout
  android:id="@+id/relativeLayout1"
  style="@style/radiorelativelayout" >
<Button
  android:id="@+id/button1"
  style="@style/btn1"
  android:layout_alignParentBottom="true"/>
<Button
  android:id="@+id/button2"
  style="@style/btn2" />
<Button
  android:id="@+id/button3"
  style="@style/btn3"/>"
</RelativeLayout>
</RadioGroup>
<RelativeLayout
   android:id="@+id/relativeLayout2"
   style="@style/modelrelativelayout">
</RelativeLayout> 
```

这种风格是我的自定义标题栏。看起来像这样 [http://img845.imageshack.us/img845/3479/26906044.png](http://img845.imageshack.us/img845/3479/26906044.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:39:54.400

如果您想为应用程序使用主题，您的所有按钮看起来都一样。该主题适用于您的所有活动。有关如何执行此操作的更多详细信息，请在此处查看我的答案： [应用程序中的自定义视图 (Android)](https://stackoverflow.com/questions/10017765/custom-views-in-the-application-android/10017892#10017892)

# apache - 在 .htaccess 中重写 URL

> ID：10018769
> 
> 赞同：0
> 
> 时间：2012-04-04T20:30:02.813
> 
> 标签：apache, .htaccess, rewrite

我需要在.htaccess 中重写。留在[http://mydomain.com/article_name#number的用户与在](http://mydomain.com/article_name#number)[http://mydomain.com/article?var1=number&var2=number&var3=number](http://mydomain.com/article?var1=number&var2=number&var3=number)的用户相同。
我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:17:38.990

这应该这样做

```
RewriteRule ^/article_name#(\d+)$ /article?var1=$1&var2=$1&var3=$1  [NC] 
```

# javascript - 如果值未更改，如何在不需要的输入字段中提交时删除默认值？

> ID：10018772
> 
> 赞同：4
> 
> 时间：2012-04-04T20:30:16.527
> 
> 标签：javascript, html, input

默认情况下，我有一个输入字段的值，它告诉用户在那里放什么（例如输入您的帐号）。我有一个脚本，当您单击它时隐藏该值，当您单击离开时它会重新出现。

但该字段不是必需的。如果用户未在字段中输入信息，则会发送默认值并导致错误，因为它只允许数字。如果用户不填写他的帐号，如何将这个默认值更改为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:35:06.617

不要使用默认值。使用**[占位符](https://developer.mozilla.org/en/HTML/Forms_in_HTML#The_placeholder_attribute)**。

```
<input type="text" placeholder="Real Name"> 
```

**[适用于所有体面的浏览器。](http://jsfiddle.net/kmwN6/)**

* * *

或者，在服务器端忽略这些值：

```
if ($_POST["realname"] == "Real Name") { real_name_not_provided(); } 
```

* * *

如果你仍然坚持使用 JavaScript（为了更好的浏览器支持），你可以使用类似下面的东西：

```
 $(function() {
    if(!$.support.placeholder) { 
        var active = document.activeElement;
        $(':text').focus(function () {
            if ($(this).attr('placeholder') != '' && $(this).val() == $(this).attr('placeholder')) {
                $(this).val('').removeClass('hasPlaceholder');
            }
        }).blur(function () {
            if ($(this).attr('placeholder') != '' && ($(this).val() == '' || $(this).val() == $(this).attr('placeholder'))) {
                $(this).val($(this).attr('placeholder')).addClass('hasPlaceholder');
            }
        });
        $(':text').blur();
        $(active).focus();
        $('form').submit(function () {
            $(this).find('.hasPlaceholder').each(function() { $(this).val(''); });
        });
    }
}); 
```

**[摘自这篇文章（顺便说一下，这是谷歌上的第一篇文章）](http://www.cssnewbie.com/cross-browser-support-for-html5-placeholder-text-in-forms/)**。请在使用此代码之前阅读文章。它可能需要文章中的更多代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:35:42.590

您应该在支持它的浏览器上使用 HTML5[占位符属性。](https://developer.mozilla.org/en/HTML/Forms_in_HTML#The_placeholder_attribute)

真正的答案是为什么验证代码不够聪明，无法忽略默认文本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:05:12.850

您可以在表单发布之前验证您的输入，如下所示：

*标记：*

```
<input type="text" id="txtAcc" name="txtAcc" value="Enter your account number..." />
<input type="button" id="btnSubmit" name="btnSubmit" onclick="validate();" value="Submit" /> 
```

*Javascript：*

```
// Validate input before form post
function validate(){
    var txtAcc = document.getElementById("txtAcc");
    var accNum = parseInt(txtAcc.value);
    if (!accNum || txtAcc.value == "Enter your account number..."){
        // Set default Account number
        txtAcc.value = 0;
    }
} 
```

# javascript - JavaScript 根据从 JQuery Flexbox 中的选择显示隐藏层

> ID：10018774
> 
> 赞同：2
> 
> 时间：2012-04-04T20:30:32.490
> 
> 标签：javascript, jquery, html, show, layer

我拥有的是一组 3 个 Jquery flexbox 组合框（下拉菜单）。第一个是可见的，另外两个是隐藏的。

我想要的是让第一个框中的选择确定框 2 显示哪个图层，然后让框 2 中的选择显示框 3 的适当层。然后我希望框 3 中的选择显示第四个层 - “结果”。

我需要帮助找出可以与 JQuery Flexbox 一起使用的 JavaScript 函数，以显示适当的 div。

在头部标签中：

```
function showlayer(layer){
    var myLayer = document.getElementById(layer).style.display;
    if(myLayer == "none"){
        document.getElementById(layer).style.display = "block";
    } else {
        document.getElementById(layer).style.display = "none";
    }
} 
```

这可能是也可能不是从图层显示脚本开始的好方法。

```
jQuery(function($) {
    //a flexbox with 3 different types of providers
    //each selection would reveal a different city list (box2)
    $('#ffb1').flexbox(providers, {
        watermark: 'Please choose a provider type',
        width: 260,                   
        autoCompleteFirstMatch: false 
        onSelect: function change(){
            $("div[id^='box_']").show()  //this is the problem here, I think - how do I finish this off?
        });

    $('#ffb2').flexbox(cities, {
        watermark: 'Choose your city',
        width: 260,
    });

    $('#ffb3').flexbox(districts, {
        watermark: 'Choose your location',
        width: 260,
    });
}); 
```

和标记：

```
<div id="box_1">
    <table class=demo>
        <tbody>
            <tr class=example>
                <td><span>Provider type</span></td>
            </tr>
            <tr>
                <td class=col><b>Please choose the type of provider you are seeking:</B>
                <div style="height: 18px"></div>
                <div id=ffb1></div>
                <div style="clear: both" id=ffb7-result></div></td>
            </tr>
        </tbody>
    </table>
</div>

<div id="box_2a" style="display:none;">
    <table class=demo>
        <tbody>
            <tr class=example>
                <td><span>City list 1</span></td>
            </tr>
            <tr>
                <td class=col><b>Please select the city closest to you:</B>
                <div style="height: 18px"></div>
                <div id=ffb2></div>
                <div style="clear: both" id=ffb7-result></div></td>
            </tr>
        </tbody>
    </table>
</div>

<div id="box_2b" style="display:none;">
    <table class=demo>
        <tbody>
            <tr class=example>
                <td><span>City list 2</span></td>
            </tr>
            <tr>
                <td class=col><b>Please select the city closest to you:</B>
                <div style="height: 18px"></div>
                <div id=ffb2></div></td>
            </tr>
        </tbody>
    </table>
</div>

<div id="box_2c" style="display:none;">
    <table class=demo>
        <tbody>
            <tr class=example>
                <td><span>City list 3</span></td>
            </tr>
            <tr>
                <td class=col><b>Please select the city closest to you:</B>
                <div style="height: 18px"></div>
                <div id=ffb2></div></td>
            </tr>
        </tbody>
    </table>
</div>

<div id="box_3" style="display:none;">
    <table class=demo>
        <tbody>
            <tr class=example>
                <td><span>City Districts</span></td>
            </tr>
            <tr>
                <td class=col><b>Please choose a location:</B>
                <div style="height: 18px"></div>
                <div id=ffb2></div></td>
            </tr>
        </tbody>
    </table>
</div>

<div id="box_4" style="display:none;">
    <table class=demo>
        <!-- results table would go here -->
    </table>
</div> 
```

# xml - 使用 XML 抓取网页，将 td 节点转换为 val

> ID：10018782
> 
> 赞同：1
> 
> 时间：2012-04-04T20:31:34.543
> 
> 标签：xml, r, web-scraping

我想抓取谷歌搜索的点击次数：

```
require(XML)

input <- "projektgebiet" 
url <- paste("https://www.google.at/search?q=",
             input,
             "&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:de:official&client=firefox-a",
             sep = "")

CAINFO = paste(system.file(package="RCurl"), "/CurlSSL/ca-bundle.crt", sep = "")
script <- getURL(url, followlocation = TRUE, cainfo = CAINFO)
doc <- htmlParse(script)

xmlValue(getNodeSet(doc, "//td")[[6]]) 
```

我很接近 - 唯一的问题是我不知道如何分别处理节点内的两个值 - 我实际上只想要数字..（在上面的示例中，两个值是连接的）

我还想知道如何避免索引 [[6]]，但不知道是否可以通过任何其他特征来寻址节点。

任何帮助或指示将不胜感激！

ps：当然我可以使用正则表达式 - 但我认为这不是最优雅的方式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T05:38:23.153

`[[6]]` 您可以通过注意其中一个`div`元素具有`id`属性来避免这种情况。以下分别返回两个子节点的内容，而不将它们连接起来。

```
xpathSApply(doc, "//div[@id='subform_ctrl']/*", xmlValue)
# [1] "Erweiterte Suche"            "Ungefähr 245.000 Ergebnisse" 
```

# kml - Google 地球忽略了我的 KML 文件中的点坐标

> ID：10018793
> 
> 赞同：0
> 
> 时间：2012-04-04T20:32:37.260
> 
> 标签：kml, google-earth

因此，我的 KML 文件中有一些坐标 (324753.00N, 0692455.93E)，但是当我加载所述文件时，它会将属性下的纬度经度默认为 (180, 180) 或 (0, 0)。文件中的所有其他信息都加载得很好。我尝试交换传递它们的顺序，但没有奏效。我将坐标更改为“更简单”的数字（32、54），它们加载得很好。

我只是假设我的坐标有问题，但是如果我将它们放入字段中以按坐标搜索，Google Earth 可以毫无问题地找到该位置。

我尝试了几种不同的“格式”，但每次都会发生不同的事情。

有什么想法吗？

在下面提到的某人和同事的帮助之间，我想出了如何计算变化。以虚拟代码为例，以防其他人发现。

```
double decimal = Convert.ToDouble(coordinates.Substring(0, coordinates.Length - 8));
double minutes = Convert.ToDouble(coordinates.Substring(coordinates.Length - 8, 2));
double seconds = Convert.ToDouble(coordinates.Substring(coordinates.Length - 6, 2));
double secDecimal = Convert.ToDouble(coordinates.Substring(coordinates.Length - 3, 2));

return Convert.ToString(decimal + (minutes/60) + (seconds/3600) + (secDecimal/360000)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T03:00:12.950

KML 规范要求点坐标为经度、纬度。请参阅： [https ://developers.google.com/kml/documentation/kmlreference#point](https://developers.google.com/kml/documentation/kmlreference#point)

您似乎正在使用投影坐标。您可能需要将数据重新投影到地理坐标（WGS84 基准）。有关如何重新投影数据的想法，请参阅以下内容：[https ://developers.google.com/kml/articles/vector](https://developers.google.com/kml/articles/vector)

# emulation - 模拟三星 Galaxy Apollo

> ID：10018796
> 
> 赞同：0
> 
> 时间：2012-04-04T20:32:45.343
> 
> 标签：emulation, dpi, samsung-mobile, heap-size

我想在 Android SDK 模拟器上测试三星 Galaxy Apollo。我必须使用什么 DPI 和堆大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:53:46.543

您可以使用我在网上找到的这个网站轻松计算 DPI：[计算 dpi](http://members.ping.de/~sven/dpi.html)。Galaxy Apollo 配备 3.2 英寸显示屏，显示分辨率为 240x400（我在三星官方网站上找到）。

编辑：[三星银河阿波罗官方网站](http://www.samsung.com/uk/consumer/mobile-devices/smartphones/android/GT-I5800DKAXEU-spec)

# web-applications - 是否可以将 play framework 2.0 与现有的 Web 应用程序集成？

> ID：10018798
> 
> 赞同：5
> 
> 时间：2012-04-04T20:32:48.480
> 
> 标签：web-applications, jboss, playframework, portal

我们有一个大型的现有 Java Web 应用程序，我想向其中添加播放框架 - 这可能吗，如果可以，是否有任何指示如何做到这一点？

该应用程序是一个我们希望迁移到 jboss 的门户应用程序——我们将在 jboss 应用程序服务器上添加一个门户网站（liferay 或 gatein）（因此播放需要“播放”上述所有内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-14T20:31:20.633

对于您的门户项目，Play Framework 可以帮助您作为后端服务来聚合数据或为您的门户处理一些分布式和计算任务。

[使用 Akka ( http://akka.io](http://akka.io) )的 Play Framework 非常强大。Akka 可以帮助您以非常简单和易于管理的方式处理复杂的计算或任务。例如，如果您的门户连接到多个第三方 Web 服务来为您的用户获取数据，Play 和 Akka 可以很好地处理这个问题。使用 Akka Actor，您可以同时从第三方 Web 服务获取数据，作为回报，合并这些数据并通过一次调用提供给您的门户。

简而言之，您可以让 Play 和 Akka 做他们擅长的事情，并将您的门户网站与实际上与您的业务逻辑无关的任务隔离开来。

有一个名为 Let It Crash ( [http://letitcrash.com](http://letitcrash.com) ) 的博客，其中有一些关于如何使用 Akka 的非常好的场景。

一些帖子可能会为您提供更多关于如何与您的平台集成的想法：

[http://letitcrash.com/post/66094078446/presentation-scaling-out-with-akka-actors](http://letitcrash.com/post/66094078446/presentation-scaling-out-with-akka-actors)

[http://letitcrash.com/post/30509298968/case-study-an-auto-updating-cache-using-actors](http://letitcrash.com/post/30509298968/case-study-an-auto-updating-cache-using-actors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:20:54.560

使用 play 1.2.4 你可以制作一个 .WAR 文件并将这个 .war 文件放在 JBOSS 的 deploy 文件夹中。但新版本（2.0）尚不支持 .war 文件：[https ://play.lighthouseapp.com/projects/82401/tickets/8-war-packaging](https://play.lighthouseapp.com/projects/82401/tickets/8-war-packaging)

所以唯一的选择是将它放在 JBoss 文件夹之外并作为独立运行它。然后，您将播放应用程序的 URL 集成到门户的某个位置。这就是你所说的“整合”吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T02:30:20.097

好吧，您不能将`play`容器放入容器中，`JBOSS`但实际上可以将容器中的 Java 代码放入`JBOSS`容器中`play`。您必须为您的`JBOSS`java 代码创建路由和控制器，并将 java 代码放在`app`目录下。然后，只需在游戏中编译它。

`play dist`最后，您可以使用该命令分发您的独立容器。

[http://www.playframework.com/documentation/2.2.x/ProductionDist](http://www.playframework.com/documentation/2.2.x/ProductionDist)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-19T09:56:12.530

***Play Framework 使构建 Web 应用程序变得容易：***

Play 提供了一个命令来简化 Eclipse 配置。要将 Play 应用程序转换为可工作的 Eclipse 项目，请使用 eclipsify 命令：

```
[My first application] $ eclipsify 
```

然后，您需要使用 ... 菜单将应用程序导入您的工作区`File/Import/General/Existing project`（首先编译您的项目）。

1.  您还可以使用 play debug run 启动您的应用程序，然后您可以使用 Connect JPDA 启动器使用 Debug As 随时启动调试会话。

2.  停止调试会话不会停止服务器。

***使用 Play 2.0 RC2 和 Scala IDE 的解决方法 Scala 模板：***

1.  使用 ~ run 运行您的应用程序以启用文件更改时的直接编译。

2.  这样，当您在视图中创建新模板时会自动发现 scala 模板文件，并在文件更改时自动编译。

3.  如果您使用正常运行，那么您每次都必须在浏览器上点击刷新。Play 团队将与 Scala IDE 团队检查此问题。

4.  如果您对应用程序进行任何重要更改，例如更改类路径，请`eclipsify`再次使用以重新生成配置文件。

***提示**：在团队中工作时不要提交 Eclipse 配置文件！*

`The generated configuration files contain absolute references to your framework installation. These are specific to your own installation. When you work in a team, each developer must keep his Eclipse configuration files private.source:`

[https://github.com/skyluc/SandBox/wiki/play-2.0-in-scala-ide-2.0#configuring-scala-ide-for-the-play-20-web-application](https://github.com/skyluc/SandBox/wiki/play-2.0-in-scala-ide-2.0#configuring-scala-ide-for-the-play-20-web-application)

[http://www.playframework.com/documentation/2.0/JavaHome](http://www.playframework.com/documentation/2.0/JavaHome)

[http://www.playframework.com/documentation/2.0/Samples](http://www.playframework.com/documentation/2.0/Samples)

[http://scala-ide.org/docs/tutorials/play/](http://scala-ide.org/docs/tutorials/play/)

[http://www.playframework.com/](http://www.playframework.com/)

# ruby-on-rails - 在触发（观察者）时弹出一个对话框（rails）

> ID：10018799
> 
> 赞同：0
> 
> 时间：2012-04-04T20:32:48.117
> 
> 标签：ruby-on-rails

我在我的应用程序中实现了一个成就系统。一切都很完美。我想添加一个功能，当我的成就被触发时，它会创建一个弹出窗口（模式对话框，我正在使用 jquery）。所以，我真的不知道如何处理对话框创建，从逻辑上讲我应该放入我的观察者方法（对吗？），但我真的不知道如何开始。我想有一些指示。

谢谢你。

```
class MyFirstCarObserver < ActiveRecord::Observer
  observe :user_car

  def after_save(user_car)
    MyFirstCar.award_achievements_for(user_car.user)
    # Need to create a dialog box
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:39:07.400

我有类似的代码，我设置了一个会话变量 (session[:alert])，然后在我的应用程序布局文件中，我有一行将 session[:alert] 的内容（如果有的话）放入 Javascript 对话框. 然而，这种代码应该在控制器中。

# json - 从 JSON 数据创建简单的 DOJO 折线图

> ID：10018800
> 
> 赞同：0
> 
> 时间：2012-04-04T20:32:48.713
> 
> 标签：json, dojo

我曾尝试使用 JSON 数据在 DOJO 中绘制一个简单的折线图但没有成功，非常感谢任何帮助。

我返回了以下数据片段：

```
[{"id":"24","Entry":"2012-02-10","Symbol":"Various","Type":"Speculativ","Call1":"0","Call2":"0","Put1":"0","Put2":"0","Cost":"0.00","Qty":"0","PnL":"383","R":"0.00","Risk":"6691"},    
{"id":"23","Entry":"2012-02-01","Symbol":"VariousSp","Type":"Vertical","Call1":"0","Call2":"0","Put1":"0","Put2":"0","Cost":"0.00","Qty":"0","PnL":"341","R":"0.00","Risk":"19160"}] 
```

我试图直接从数据存储中绘制，构建一个数组，但都无济于事。我对Dojo很陌生，所以我很确定我犯了一个简单的错误-

我的代码（目前存在如下）：

```
var PnLStore;
    var cumPnL = [];

    require([
            "dojox/charting/Chart",
            "dojo/store/JsonRest",
            "dojo/store/Memory",
            "dojo/store/Cache",
            "dojox/charting/StoreSeries",
            "dojox/charting/plot2d/Lines",
            "dojox/charting/axis2d/Default",
            "dojox/charting/themes/Dollar",
            "dojox/charting/plot2d/Markers",
            "dojo/domReady!"],

            function( Chart, JsonRest, Memory, Cache, StoreSeries, Lines) {

                    PnLStore = Cache(JsonRest({target:"pullTradesClosed.php"}), Memory());

                    var chart = new Chart("chartDiv");

                    chart.addPlot("default", {
                            type: "Lines",
                            markers: true
                    });

                    chart.addAxis("x");
                    chart.addAxis("y", { vertical: true, fixLower: "major", fixUpper: "major" });

                    PnLStore.query({id:"id"}).forEach(
                      function(trade) {
                        cumPnL.push (Number(trade.PnL));
                    });

                    chart.addSeries("PnL", cumPnL, {stroke:"green"});
                    chart.render(); 

            }); 
```

虽然它可能并不明显，但我正在尝试绘制 ID 与 PnL 的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:46:19.670

如果您想将图表绑定到数据存储区，就像您正在做的那样，最好使用 storeseries：

```
chart.addSeries("y", new StoreSeries(store, { query: {} }, "PnL")); 
```

见： [http ://dojotoolkit.org/documentation/tutorials/1.7/charting_advanced/](http://dojotoolkit.org/documentation/tutorials/1.7/charting_advanced/)

举些例子

您还可以使用数据系列：

addSeries("PnL", new dojox.charting.DataSeries(store, {query:{}}, "PnL"))。

请参阅： [Dojox 使用商店系列](https://stackoverflow.com/questions/7556595/dojox-charting-programattically-using-store-series)以编程方式绘制图表 以获取相关问题

# android - 通过 HTTPpost 以定义的格式发送 JSONObject？

> ID：10018801
> 
> 赞同：1
> 
> 时间：2012-04-04T20:32:52.000
> 
> 标签：android, json, http-post

```
 {
     who: 'troll_new3',
     visibility: 'public',

     poll: {
     title: 'Favourite game?',
     des_content_type: 'text',
     description: 'I want to know which game you like!', 
     options_type: 'text',
     comments_enabled: true,  
     poll_method: 'list',     
     }   
    } 
```

我需要它作为要接收的 JSONObject 的格式。

这是我正在实现的代码：

```
obj=new JSONObject();
try {
    obj.put("options_type", "text");        
    obj.put("description", pd.getText().toString());
    obj.put("des_content_type", "text");
    obj.put("title", pt.getText().toString());
    obj.put("comments_enabled", "false");
    obj.put("poll_method",str);

} catch (JSONException e1) {
    //TODO Auto-generated catch block
    Log.v("my","error");
    e1.printStackTrace();
}

obj1=new JSONObject();
try {           
    obj1.put("who", facebookId);        
    obj1.put("visiblity", "public");
    obj1.put("poll", obj.toString());

} catch (JSONException e1) {
    //TODO Auto-generated catch block
    Log.v("my","error");
    e1.printStackTrace();
}
StringEntity se=null;
try {
    se = new StringEntity(obj1.toString());
} catch (UnsupportedEncodingException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}  

try{
    se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json")); 
    httppost.setEntity(se);

    httppost.setHeader("Accept", "application/json");
    httppost.setHeader("Content-type", "application/json");
    Log.v("myapp", "works till here. 2");
    try {
        HttpResponse response = httpclient.execute(httppost);

        Log.v("myapp", "works till here. 3");

    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

我想在输出中得到一个预定义的 JSON 格式.. { poll: '{"title":"dsfg","des_content_type":"text","poll_method":"list","options_type":"text"," comments_enabled":"false","description":"Dfg"}'，可见性：'public'，谁：'1758281246'}

请有人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:23:00.183

你的问题就在这里。

```
obj1=new JSONObject();           
obj1.put("who", facebookId);        
obj1.put("visiblity", "public");
obj1.put("poll", obj.toString()); 
```

`obj.toString()`添加`obj`到时不要调用`obj1`。将其保留为 a`JSONObject`以便类可以正确处理内部格式。

# php - 在 PHP 中使用 exec() 运行 PSEXEC 命令

> ID：10018803
> 
> 赞同：1
> 
> 时间：2012-04-04T20:32:59.427
> 
> 标签：php, psexec

所以我在 PHP 中使用 EXEC() 命令来调用 PSEXEC，但它一直失败，我不知道为什么......我真的把头发拉在这里了。

这是我的代码：

```
exec('psexec \\\\<server.domain> -accepteula -u <username> -p <password> PING <someurl>', $cmdOutput, $err);
echo $cmdOutput;
echo $err; 
```

我尝试了双斜杠（\）和单斜杠（）。

我使用 PING 很简单——只是在执行实际程序之前尝试让它工作。输出是： `2250Array`

如果我这样做

```
exec('ping <someurl>'); 
```

它可以工作，但我无法让这个 PSEXEC 工作......

我试过`SYSTEM()`了，也不管用。找不到有关错误代码 2250 的任何信息。尝试使用 PROCMON 监视进程，但没有可用的信息。

# math - 为具有矩阵变换的数学表达式的 3D 绘图选择平台和库

> ID：10018809
> 
> 赞同：1
> 
> 时间：2012-04-04T20:33:08.900
> 
> 标签：math, cross-platform, plot, java-3d

我正在尝试编写一个程序，该程序可以通过鼠标旋转和缩放进行 3d 绘图-允许用户输入变换矩阵并变换绘图

我希望这个程序是跨平台的，所以想把它写成一个 Java Applet，这样它就可以嵌入到网页中。但我不知道使用哪个 Math 3D 图形库。此外，我还想在平板电脑（可能在 iOS 和 Android）上运行它并提供触摸界面。然后，我认为 Java Applet 不会是最好的。

关于平台和库的任何建议以及任何其他可以以非常好的性能完成上述事情的工具选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:07:33.810

使用[jzy3d](http://www.jzy3d.org)，您可以轻松绘制 3d 曲面、散点图、条形图和其他常见的数学图表。它具有完整的鼠标/键盘支持。它不会隐藏对原始 opengl 的访问，因此您可以自由定制您想要的任何内容。

0.9 版依赖于 jogl2（用于 java 的 opengl 绑定），它让您可以在 win、mac 和 unix 上轻松运行 API。虽然 Jzy3d 不提供，但您可以轻松地使用 JOGL 小程序启动器在 Web 上运行 3d。JOGL2 也可以在 Android 上运行，所以 jzy3d 也应该可以在 Android 上运行。

关于iOS，您确定它支持小程序吗？无论如何，我担心 JOGL2 不会支持 iOS。[您可能会在jogamp](http://www.jogamp.org)上讨论​​这一点，这是一个非常被动的论坛。

Jzy3d API 是 BSD 许可的，因此您可以在任何商业项目中使用它。

希望有帮助！

马丁

（免责声明：我是作者）

# html-email - 电子邮件 HTML：电话：//颜色

> ID：10018810
> 
> 赞同：0
> 
> 时间：2012-04-04T20:33:21.530
> 
> 标签：html-email, email-client

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:51:12.443

我解决了！：

我对完全相同的“选择”字符串 gmail 做了一个 123456 替换为链接，并且没有添加任何 href，但失去了呼叫功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:39:18.787

如果您以 html 格式发送电子邮件，您应该能够指定 css 规则来更改链接颜色。此外，您可以尝试将电话号码放在 < pre > 标签中。

# oracle - Oracle - 在不打开另一个连接的情况下验证用户和密码？

> ID：10018811
> 
> 赞同：4
> 
> 时间：2012-04-04T20:33:23.810
> 
> 标签：oracle, connection-pooling

是否有一些功能/程序/包可以验证用户名和密码`Oracle`（来自数据库中存在的用户）？

**背景**：我们想创建一个使用连接池的 Web 应用程序。由于遗留的 6i 应用程序，所有用户都已存在于数据库中。所以我们认为最好的方法是验证数据库的用户名和密码，但我们不想硬编码 url 并打开一个新连接只是为了验证这一点。

我知道另一种方法是将密码存储在用户表中，但如果 Oracle 提供此选项会容易得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:50:12.653

我们使用 LDAP 进行应用级别的身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T00:37:29.757

我发现了一个验证 Oracle表的[非官方脚本。](http://www.petefinnigan.com/testpwd.sql)`user$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T21:12:30.363

也许您应该查看代理用户。它们专门设计用于让最终用户对 3 层架构中的数据库进行身份验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T15:14:10.960

我认为这行不通。

1.  您已经说过代理用户不适用于您的目的

2.  Tom Kyte 说这行不通。通常，Tom Kyte 对甲骨文[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:73704414259631](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:73704414259631)的任何事情都是正确的，尽管该线程已经很老了......

# hibernate - Spring MVC 3.1 使用 Profiles 进行环境特定的 Hibernate 设置

> ID：10018812
> 
> 赞同：0
> 
> 时间：2012-04-04T20:33:29.523
> 
> 标签：hibernate, spring-mvc

我正在尝试使用 bean @Profiles 声明来加载特定的休眠设置，具体取决于我部署到的应用服务器。

我在 web.xml 中注册了一个上下文配置文件初始化程序，还实现了 ApplicationContextInitializer 接口来执行我的应用程序服务器逻辑。

问题是，当我部署我的项目时，我收到以下错误：

> 没有为依赖项找到类型为 [org.hibernate.SessionFactory] ​​的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true)}

对我来说，这看起来好像在 Spring 自动装配我的其余 bean 之前它没有执行我的配置文件检查（ApplicationContextInitilizer 代码）。我的假设正确吗？我该如何纠正？

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

  <display-name>SpringTest</display-name>

    <context-param>
        <param-name>contextInitializerClasses</param-name>
        <param-value>myPackage.Service.ContextProfileInitializer</param-value>
    </context-param>

  <!-- Dispatcher Servlet to handle HTTP requests -->
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>

    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.html</url-pattern>

    </servlet-mapping>

  <!-- Welcome File List -->
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

</web-app> 
```

调度程序-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.1.xsd
     http://www.springframework.org/schema/tx
     http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
     http://www.springframework.org/schema/aop 
     http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
     http://www.springframework.org/schema/mvc
     http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
     http://www.springframework.org/schema/jee 
     http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
     http://www.springframework.org/schema/jdbc 
     http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd">

    <mvc:annotation-driven />

    <context:component-scan base-package="myPackage" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <!-- Transaction management -->
    <tx:annotation-driven transaction-manager="transactionManager"/>
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="mySessionFactory"/>
    </bean>

    <!-- DataSources -->
    <beans profile="jboss">
        <bean id="myDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
            <property name="jndiName" value="java:jboss/datasources/dbName" />
        </bean>

        <!-- Hibernate -->
        <bean id="mySessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
            <property name="dataSource" ref="myDataSource" />
            <property name="configLocation">
                <value>classpath:JBOSS-hibernate-db2.cfg.xml</value>
            </property>
            <property name="configurationClass">
                <value>org.hibernate.cfg.AnnotationConfiguration</value>
            </property>

        </bean>
    </beans>

    <beans profile="websphere">
        <bean id="myDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
            <property name="jndiName" value="java:websphere/datasources/dbName" />
        </bean>

        <!-- Hibernate -->
        <bean id="mySessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
            <property name="dataSource" ref="myDataSource" />
            <property name="configLocation">
                <value>classpath:WEBSPHERE-hibernate-db2.cfg.xml</value>
            </property>
            <property name="configurationClass">
                <value>org.hibernate.cfg.AnnotationConfiguration</value>
            </property>

        </bean>
    </beans>

</beans> 
```

ContextProfileInitializer.java

```
public class ContextProfileInitializer implements ApplicationContextInitializer<ConfigurableWebApplicationContext> {

    private org.apache.log4j.Logger logger = Logger.getLogger(getClass());

    @Override
    public void initialize(ConfigurableWebApplicationContext ctx){

        if(Rtools.pos("jboss.server", System.getProperties().toString()) > 0){
            ctx.getEnvironment().setActiveProfiles("jboss");
            logger.info("Profile set to JBOSS");
        } else {
            ctx.getEnvironment().setActiveProfiles("websphere");
            logger.info("Profile set to WEBSPHERE");
        }

        ctx.refresh();
    }
} 
```

# javascript - 客户端脚本电子邮件通知

> ID：10018814
> 
> 赞同：0
> 
> 时间：2012-04-04T20:33:44.500
> 
> 标签：javascript, html, sharepoint, email, webforms

我有一个 Web 表单，它使用 if 语句创建一串电子邮件地址，以便在表单提交后进行通知。是否可以在不使用服务器端代码的情况下向所有电子邮件地址发送电子邮件通知。仅使用客户端，例如：JavaScript、JQuery？

这将在禁用电子邮件警报和服务器端代码的 SharePoint 2003 站点上使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:36:42.797

没有可靠的方法可以在任何客户端浏览器中从客户端发送电子邮件。该`mailto:`标签存在，但仅在某些情况下受支持，并且需要与通常不存在或未正确配置的本地电子邮件客户端合作。随着基于 Web 的电子邮件的普及，甚至可能没有本地配置的电子邮件客户端。

发送这些电子邮件的唯一可靠方法是将电子邮件地址提供给服务器并让服务器发送电子邮件。如果您不想或不能使用自己的服务器执行此操作，那么有些服务可以使用客户端表单为您执行此操作，这些表单提交到服务器然后发送电子邮件。[Wufoo](http://wufoo.com/)就是其中一项服务。它有免费和付费版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:39:20.960

看起来这家伙设置了一个 Web 服务并使用 jQuery 调用它来发送电子邮件。不确定这是否会打破你的约束。

[http://riderdesign.com/articles/Sending-email-with-jQuery-and-a-Web-Service.aspx](http://riderdesign.com/articles/Sending-email-with-jQuery-and-a-Web-Service.aspx)

# emacs - 为 emacs lisp 注册点击事件

> ID：10018815
> 
> 赞同：2
> 
> 时间：2012-04-04T20:33:51.637
> 
> 标签：emacs, lisp

我想注册一个点击事件并根据`position`, `window`..etc 执行操作。

这个站点，`http://www.gnu.org/software/emacs/manual/html_node/elisp/Click-Events.html`显示了事件变量的布局，但我实际上如何将处理程序附加到单击事件。

所以，基本上我正在寻找一个行为类似于`attach-handler`下面 senario 的函数。

```
(attach-handler [mouse-1] 
       `(lambda (e) (foo e)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:36:59.617

您可以使用`interactive`声明的代码字母“e”来访问该事件；例如，以下将使左键单击在单击的点插入事件数据：

```
(define-key global-map (kbd "<down-mouse-1>")
  (lambda (event)
    (interactive "e")
    (message "%s" event)
    (let ((posn (elt event 1)))
      (with-selected-window (posn-window posn)
        (goto-char (posn-point posn))
        (insert (format "%s" event)))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T20:42:20.207

它们都是钥匙。尝试`C-h c`（或`C-h k`）并单击鼠标按钮以查看当前绑定的内容。然后使用`M-x global-set-key`将其设置为您想要的任何内容。您的功能必须是将`interactive`其绑定到一个键。

# classification - 多层感知器 - 反向传播

> ID：10018821
> 
> 赞同：2
> 
> 时间：2012-04-04T20:34:15.917
> 
> 标签：classification, backpropagation, neural-network

我有一个学校项目来编写多层感知器，将数据分为三类。我已经从[http://home.agh.edu.pl/~vlsi/AI/backp_t_en/backprop.html](http://home.agh.edu.pl/~vlsi/AI/backp_t_en/backprop.html)实现了反向传播算法。我检查了我的算法（通过手动计算反向传播的每个步骤）是否真的符合这个解释的步骤并且符合。

对于分类，我使用的是 one-hot 代码，我的输入由具有 2 个值的向量和三个输出神经元（每个用于单个类）组成。在每个时代之后，我都会对输入数据进行洗牌。对于分类，我使用的是 sigmoid 函数。我也尝试实现 softmax，但我还没有发现派生 softmax 看起来如何。权重调整是否需要导数 softmax？为了检查网络是否成功分类输入，我正在比较具有输出神经元最大输出的输出神经元的位置是否对应于当前输入 one-hot 代码向量中等于 1 的位置。

但是我的实现并没有训练这个神经网络。我正在为此工作并调试几天，并在互联网上查找我做错了什么，但我没有找到答案。我真的不知道我在哪里犯错。当我有 10 个输入时，我的神经网络将成功训练，但是当我有 100、200、400 和 800 个输入时，当它有一半好的分类输入时，它开始循环。正如我所说，我的反向传播算法很好。Visual Studio 2010 中带有输入文件的整个 C++ 项目在这里： http: [//www.st.fmph.uniba.sk/~vajda10/mlp.zip](http://www.st.fmph.uniba.sk/~vajda10/mlp.zip)

结构：

```
 struct input {
      vector<double> x;
      vector<double> cls;
    };

    struct neuron {
      double output;
      double error;
      neuron(double o, double e): output(o), error(e) { };
    }; 
```

全局变量：

```
 double alpha = 0.5;
    vector<vector<input>> data;

    vector<vector<neuron>> hiddenNeurons;
    vector<neuron> outputNeurons;
    vector<vector<vector<double>>> weights; 
```

这是我的反向传播算法代码：

```
 for (int b = 0; b < data[0].size(); b++) {
      // calculate output of hidden neurons
      for (int i = 0; i < hiddenNeurons.size(); i++) {
        for (int j = 0; j < hiddenNeurons[i].size(); j++) {
          double activation = neuronActivation(0, b, i, j);
          hiddenNeurons[i][j].output = sigmoid(activation);
        }
      }
      double partError = 0;
      // calculate output and errors on output neurons
      for (int k = 0; k < outputNeurons.size(); k++) {
        double activation = neuronActivation(0, b, hiddenNeurons.size(), k);
        outputNeurons[k].output = sigmoid(activation);
        outputNeurons[k].error = data[0][b].cls[k] - outputNeurons[k].output;
        partError += pow(outputNeurons[k].error, 2);
      }

      error += sqrt(partError)/outputNeurons.size();

      // if classification is wrong
      if (data[0][b].cls[maxOutputIndex(outputNeurons)] != 1) {
        wrongClass++;

        // error backpropagation
        for (int i = hiddenNeurons.size()-1; i >= 0; i--) {
          for (int j = 0; j < hiddenNeurons[i].size(); j++) {
            hiddenNeurons[i][j].error = 0.0;

            if (i < hiddenNeurons.size()-1) {
              for (int k = 0; k < hiddenNeurons[i+1].size(); k++) {
                hiddenNeurons[i][j].error += hiddenNeurons[i+1][k].error * weights[i+1][j][k];
              }
            }
            else {
              for (int k = 0; k < outputNeurons.size(); k++) {
                hiddenNeurons[i][j].error += outputNeurons[k].error * weights[i+1][j][k];
              }
            }
          }
        }

        // adjust weights
        for (int i = 0; i < weights.size(); i++) {
          int n;
          if (i < weights.size()-1) {
            n = hiddenNeurons[i].size();
          }
          else {
            n = outputNeurons.size();
          }

          for (int k = 0; k < n; k++) {
            for (int j = 0; j < weights[i].size(); j++) {
              double y;
              if (i == 0) {
                y = data[0][b].x[j];
              }
              else {
                y = hiddenNeurons[i-1][j].output;
              }

              if (i < weights.size()-1) {
                weights[i][j][k] += alpha * hiddenNeurons[i][k].error * derivedSigmoid(hiddenNeurons[i][k].output) * y;
              }
              else {
                weights[i][j][k] += alpha * outputNeurons[k].error * derivedSigmoid(outputNeurons[k].output) * y;
              }
            }
          }
        }
      }
    } 
```

拜托，谁能告诉我我做错了什么，或者给我一个建议，告诉我必须在哪里寻找错误？我希望我已经告诉了所有重要的事情。请原谅我英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:00:14.513

高斯分类器（如 BackpropNN）只会对连续样本集进行样条化。

由于您的网络在小样本集上学习，我假设小集没有不连续性。

在这里例如。是样本训练集中的不连续性（输入向量--->输出向量）：

```
[0,1,0,1,1,0,1,0] ---> [0,1,0]
[0,1,0,1,1,0,1,0] ---> [1,1,0] 
```

算法无法对此进行分类（样条）。给定输入向量的输出向量必须是唯一的（连续的）。

如果您随机生成示例，这可以解释为什么小集合似乎总是有效 - 产生不连续性的可能性很低。更大的集合将保证这个问题。

因此，只需扫描并删除任何问题示例，如果这确实是问题。请记住，传递函数实际上是一个归一化器，因此看起来不同的真实输入向量可能会归一化为恒等式。

如果您仍然卡在局部最大值或最小值上，请尝试更改 epsilon（学习率）。您已将其硬编码为 0.5 尝试其他值。

作为最后的努力，我还建议将 sigmoid 传递函数替换为阶跃函数。sigmoid 只是这个数字函数的生物模拟。通过直接使用数字传输（阶跃函数）删除此转换。

[![模拟与数字传递函数](../Images/01bf54e9b686445a9e6cb8278862226c.png)](https://i.stack.imgur.com/I2rWE.png)

在反向传播中使用 sigmoid 的原因是 Hinton 的原始工作来自认知科学，神经元的传递函数是 sigmoid——最接近数字函数的自然模拟。

# scala - 在 Scala 脚本文件中使用源路径

> ID：10018825
> 
> 赞同：4
> 
> 时间：2012-04-04T20:34:23.320
> 
> 标签：scala, file, path

我正在寻找一种方法来使用由执行的 *.scala 文件的完整路径

```
scala /path/to/file/file.scala 
```

原因是在我的脚本中，我想使用相对于 file.scala 保存位置的路径。所以，假设我想在调用 file.scala 时从 file.scala 内部调用 /path/to/file/file_second.scala

```
scala ./to./file/file.scala 
```

因为我从中调用 scala 的目录是 /path （即 System.getProperty("user.dir") 将返回的内容）。我所知道的先验是 file_second.scala 与 file.scala 位于同一目录中，但实际上并不知道完整路径。

我努力了。其中包括 getClass.getResource("").split(":")(1)，但这将返回 /path/./ 或 /tmp/scala.tmp/

我想必须有一个干净的解决方案，因为 scala -savecompiled 将在我想要处理的那个目录中创建一个 *.jar，但我只是不知道如何......：/

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-26T19:22:13.813

脚本序言：

```
#!/bin/sh
export SCRIPT_PATH=$(readlink -f "$0") && exec scala "$0" "$@"
!# 
```

读取值：

```
val scriptPath = System.getenv("SCRIPT_PATH") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T02:33:56.410

I've done this in the past in Java. It's not pretty, and it may not be 100% reliable depending on the details of your class loader situation.

Here is some Scala code that prints out the location of its own class file.

```
import java.net.URL

object LocationTest extends App {
  val classDirURL = LocationTest.getClass.getResource("LocationTest.class")
  val classDirPath = classDirURL.getPath.replaceAll("%20", " ")
  println(classDirPath)
} 
```

prints

```
/Users/connor/desktop/LocationTest.class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T00:20:44.117

您可以使用参数调用您的程序：

```
scala -DPARAM_DIR=tmp Foo 
```

并检查程序中的参数：

```
object Foo extends App {
  val dir = System.getProperty ("PARAM_DIR")
  println ("Dir: " + dir) 
} 
```

所以这不会（必然）使用 Foo.scala 所在的同一个目录，但它会很灵活，并且可以在运行时被告知在哪里寻找一个类。

在正常情况下，您可以将类捆绑在 Jar 中，或者设置一个公共类路径，然后您可能会拥有一个相对于类路径解析的包：

对于一个类 to.file.File 中

```
 /path/to/file/file.scala 
```

它将是类路径/path，对于包中的类文件，`file`它将是/path/to/。

如果您的类路径是 /path/to/file，那么第二个类应该可以通过名称访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:30:08.027

以下脚本将打印它的文件系统路径。连续尝试三种不同的方法，直到其中一种成功。

```
import java.io.File

printf("[%s]\n",new File(getScriptName).getCanonicalPath)
System.exit(0)

def getScriptName:String = {
  // this approach works on the sun jvm:
  val jcmd = System.getProperty("sun.java.command","")
  jcmd.split("""\s+""").toList.reverse.head match {
  case name if new File(name).exists => name
  case _ =>
    // for this to work, you need to set -Dscala.script.name at script launch
    System.getProperty("scala.script.name","") match {
    case name if new File(name).exists => name
    case _ =>
      // last resort: derive script basename from stackdump
      val basename = {
        val filenames = new RuntimeException("").getStackTrace.map { it
          => it.getFileName
        }
        filenames.indexOf("NativeMethodAccessorImpl.java") match {
          case -1 =>  filenames.reverse.head
          case num => filenames(num - 1)
        }
      }
      // then search the system PATH for the script file
      import scala.collection.JavaConversions._
      val sep = System.getProperty("path.separator")
      val path = System.getenv("PATH").split(sep)
      path.map(new File(_,basename)).find( _.exists ) match {
        case Some(scriptfile) => scriptfile.getCanonicalPath
        case _ => basename // better than nothing
      }
    }
  }
} 
```

最简单和最可移植的是第二种方法，它依赖于使用包装脚本，如下例所示，用于在调用 $SCALA_HOME/bin/scala 之前定义属性“scala.script.name”。当然，包装脚本需要位于 $SCALA_HOME/bin 之前的 PATH 中。结果更加防弹，但仅适用于脚本。

```
#!/usr/bin/env sh
for SCRIPT_NAME; do true ; done # set SCRIPT_NAME to the last argument
JAVA_OPTS="$JAVA_OPTS -Dscala.script.name=${SCRIPT_NAME}"
$SCALA_HOME/bin/scala "$@" 
```

在 scala 启动器周围使用此包装器可将使用简化为以下内容：

```
#!/usr/bin/env scala
!#
printf("%s\n",System.getProperty("scala.script.name")) 
```

# android - 上传应用程序时收到错误消息“此应用程序与您的所有设备不兼容”

> ID：10018829
> 
> 赞同：0
> 
> 时间：2012-04-04T20:34:29.417
> 
> 标签：android, google-play

我最近将[我的第一个 beta 应用程序上传到市场](https://play.google.com/store/apps/details?id=com.olszewski.android.workout&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5vbHN6ZXdza2kuYW5kcm9pZC53b3Jrb3V0Il0)。

出于某种原因，我收到一条消息，说它与我的所有设备都不兼容。我没有在我的任何设备上加载它，我有一个安装按钮，它是为 android 2.3.3 设计的（我正在运行 2.3.4）。它也没有出现在我的手机市场上，关于发生了什么以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:50:55.593

你`AndroidManifest.xml`说

```
<uses-sdk android:minSdkVersion="15" /> 
```

这是 Android 4.0.3，所以它不会在 2.3 上运行。将其更改为 9 或 10 或您需要的任何值。

在 Eclipse 中：`Project > Properties |> Android`如果需要，也将项目构建目标更改为该版本。

# c# - 使用 .Net Mvc 手动绑定模型

> ID：10018830
> 
> 赞同：15
> 
> 时间：2012-04-04T20:34:30.877
> 
> 标签：c#, asp.net-mvc, model-binding

我想知道是否有一种方法可以使用类似于在控制器操作之前发生的内部模型绑定的内置模型绑定。

我的问题是我希望能够控制绑定，因为在我实际处于控制器操作的上下文中之前我不会知道要绑定的对象的类型。

我知道我可以继承 DefaultModelBinder 来执行自定义绑定，但我对已经提供的东西很满意，并且只想利用它 - 以这个*理想*的例子来了解我所追求的：

```
public ActionResult DoCustomBinding(string modelType)
{
    ... // logic to determine type to check and create strong 'actual' type

    object model = BindModel(actualType);

    ... // do something with bound model

    return View();
} 
```

我已经研究过使用 DefaultModelProvider，但不确定这是否是正确的方法，我不确定如何获取 ModelBindingContext。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T01:42:44.233

如果有人像我在这里所做的那样从谷歌遇到这个问题，那么答案是：[如何控制模型绑定？](https://stackoverflow.com/questions/10825951/how-to-gain-control-over-model-binding/)

简而言之： TryUpdateModel 是您正在寻找的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:27:10.313

如果您只想验证模型的特定部分，这可能与我之前回答的问题[MVC Partial Model Updates](https://stackoverflow.com/questions/7276530/mvc-partial-model-updates/7276720#7276720)重复。

使用[System.ComponentModel.DataAnnotations.MetadataType](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute.aspx)很酷的部分是模型绑定器将继续绑定到派生对象，该派生对象与基础对象基本相同，只是具有不同的显示/验证元数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:39:18.683

您是否查看过 IModelBinder 接口？

```
public class CustomModelsBinder : IModelBinder {
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) { }
} 
```

然后将其添加到您的 global.asax 文件中：

```
protected override void OnApplicationStarted() {
   ModelBinders.Binders.Add(typeof(CustomModels), new CustomModelsBinder());
} 
```

# asp.net-mvc - 适用于各种应用的 Autofac 模块扫描

> ID：10018831
> 
> 赞同：3
> 
> 时间：2012-04-04T20:34:36.400
> 
> 标签：asp.net-mvc, architecture, dependency-injection, autofac

假设您正在处理一个 ASP.NET MVC 项目，并且它在单个解决方案中被分成不同的项目。每个项目都创建了 autofac 模块来连接依赖项。现在，我想扫描程序集并将所有模块注册到容器中。

我采用了类似于此处共享的扩展方法[http://goo.gl/VJEct](http://goo.gl/VJEct)

```
public static void RegisterAssemblyModules(this ContainerBuilder builder, Assembly 
assembly)
{
  var scanningBuilder = new ContainerBuilder();

  scanningBuilder.RegisterAssemblyTypes(assembly)
    .Where(t => typeof(IModule).IsAssignableFrom(t))
    .As<IModule>();

  using (var scanningContainer = scanningBuilder.Build())
  {
    foreach (var m in scanningContainer.Resolve<IEnumerable<IModule>>())
      builder.RegisterModule(module);
  }
} 
```

我的第一个问题是，考虑到这个示例是几年前提供的，这仍然是与当前版本的 autofac 一起使用的可行结构吗？

其次，MVC 应用程序依赖于其他层的功能，这意味着有时我需要使用 .InstancePerHttpRequest() 注册类型。但是，我还希望可以选择从非 Web 应用程序中引用它们，而不是依赖于 System.Web。注册可在这些不同上下文中使用的模块的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T05:39:47.587

我不会在容器中注册模块。我认为没有理由这样做。

这是一个[替代方案](https://github.com/sogeti-se/Sogeti.Pattern/blob/master/source/Sogeti.Pattern/Sogeti.Pattern.Core.Autofac/BuilderExtensions.cs)。

它用于`Activator.CreateInstance`创建模块并在构建器中注册它们。

相同的框架还为您提供免配置注册支持。只需为您的服务添加一个属性：

```
[Component]
public class MyService : IService
{
} 
```

并运行构建器扩展方法：

```
builder.RegisterAllComponents(Assembly.GetExecutingAssembly()); 
```

# java - TabView primefaces 3.1 在选项卡内重新加载页面并再次调用 ManagedBean

> ID：10018834
> 
> 赞同：0
> 
> 时间：2012-04-04T20:34:49.550
> 
> 标签：java, jsf, tabs, primefaces, tabview

我需要一些帮助，我正在使用 primefaces 3.1 并做一些页面，我想将这些页面加载到 tabview 中，并且每个页面相互依赖。

像这样。

```
<p:tabView id="tabView1">
        <p:tab id="tabInfo" title="title1">
            <ui:include src="page1.xhtml"/>
        </p:tab>
        <p:tab id="tab2" title="title2" >
            <ui:include src="page2.xhtml"/>
        </p:tab>
        <p:tab id="tab3" title="title3">
            <ui:include src="page3.xhtml"/>
        </p:tab>
    </p:tabView> 
```

第 2 页取决于表单第 1 页进行一些验证，并且是否显示第 2 页此信息，第 3 页需要相同。

当我选择 tab2 再次调用第 2 页的 ManagedBean 并重新加载第 2 页并进行验证并呈现数据时，我该怎么办？

这个验证和所有信息的搜索都在 init 方法上。

请帮我解决一下这个。

我为我糟糕的英语道歉。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:47:26.087

您需要在 tabView 中添加类似的内容：

```
<p:tabView id="tabView1">
     <p:ajax event="tabChange" listener="#{yourBean.onTabChange}" update=":tab2"/>
... 
```

*   事件：定义启动 ajax 请求应该发生什么
*   listener：事件发生时会收到通知
*   更新：在给定的 id 上重新渲染

* * *

更新以回答您的评论：

*onTabChange*方法可能如下所示：

```
public void onTabChange(TabChangeEvent event) {  
    // ... 
} 
```

*事件*提供选定的选项卡：

```
event.getTab() 
```

您现在可以使用以下命令重新渲染所有选项卡：

```
... update=":tabInfo, :tab2, :tab3" 
```

或者您将选定的选项卡存储在您的 bean 中并执行以下操作：

```
... update="#{yourBean.selectedTab}" 
```

其中*selectedTab*看起来像这样：

```
public String getSelectedTab(){
     // selectedTab is a variable that should be set onTabChange()
     return selectedTab;
} 
```

# actionscript - 支持旧版本的 Flash？

> ID：10018840
> 
> 赞同：0
> 
> 时间：2012-04-04T20:35:11.527
> 
> 标签：actionscript, flash, shared-objects

我的一些访问者使用的是旧版 Flash 的过时机器。我的 FLA 仅由几行创建 SharedObject 的 ActionScript 组成。

我想确保我的 SWF 为他们执行。发布文件时，我有什么理由不应该选择旧版本的 Flash Player 和 ActionScript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:15:28.563

1.  你应该尝试看看它是否有效。
2.  显示“几行”代码？如果您知道什么可能会损坏，就更容易判断是否有任何东西会损坏。
3.  考虑到与代码无关的更改：我相信旧版本中的 CFF 字体将不可用，还有几种线条样式。显然，没有着色器。整体显示列表的性能会慢一些——就是这样。

然而，使用旧版本 Flash 播放器的人将自己置于各种攻击和其他恶意软件的危险之中，这些漏洞和其他恶意软件可以针对旧版本的 Flash 播放器，因此至少出于这个原因，您可以鼓励他们进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T02:56:24.060

如果您使用的只是一个 SharedObject，则可以针对 Flash 9，但不能更少。

至于教育您的用户升级，我不会为此烦恼。为了让他们相信任何事情，您至少必须写一整页详细说明可能的漏洞等等，而这可能不是您网站的目的。

# asp.net-mvc - 在浏览器中下载 Word 文档

> ID：10018851
> 
> 赞同：2
> 
> 时间：2012-04-04T20:36:27.193
> 
> 标签：asp.net-mvc

我有一个 Microsoft Word 文档，我想在我的站点中链接到该文档。该文档实际上托管在另一台服务器（内部 SharePoint 站点）上。如果用户单击默认情况下在浏览器中打开文档的链接，我希望它。如果不可能，那么它将提示他们下载。

这对我来说是可以控制的还是只是每个用户必须在他们的机器上设置的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:40:25.437

如果用户可以访问 Sharepoint 站点，您可以只链接到 Sharepoint 站点上文档的下载链接吗？

如果用户无法访问 Sharepoint 站点，您*可以*自己流式传输，但不建议这样做。

为什么不能直接链接到文档的下载链接？

编辑：

您特别想知道如何确保链接直接打开。为此，您需要更改响应（下载）的 MIME 类型，以向浏览器提供如何打开该链接的更多*信息*。此答案中的更多信息：[https ://stackoverflow.com/a/2806749/65087](https://stackoverflow.com/a/2806749/65087)

在我的应用程序中，我通常基于扩展创建一个可以提供 MIME 类型的 Util 方法。

如果您可以自己为您的控制器提供下载，则此解决方案将起作用，例如。通过调用 File() ActionResult。这还要求您有权访问物理文件，以便您可以流式传输它。

所以，我不确定这是否完全回答了您的问题，因为您说该文档位于 Sharepoint 网站上......？

# memory - 内存地址对齐

> ID：10018855
> 
> 赞同：5
> 
> 时间：2012-04-04T20:36:50.267
> 
> 标签：memory, assembly, operating-system

我对内存对齐的概念有点困惑。所以这是我的疑问：文本所说的是，如果你想读取 4 个字节的数据，从一个不能被 4 整除的地址开始，你就会遇到内存访问未对齐的情况。例如，如果我想从地址 05 开始读取 10 个字节，这将被称为未对齐访问 (http://www.mjmwired.net/kernel/Documentation/unaligned-memory-access.txt)。

这种情况是否特定于 4 字节字可寻址架构，或者这是否也适用于字节可寻址架构？如果上述情况对于字节可寻址架构是不对齐的，为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T01:31:39.770

作为一般规则，内存中的第 0 位被选通到总线上，并且该总线的第 0 位连接到每个寄存器的第 0 位。这样一直持续到第 31 位。可能有特殊的硬件将每个字节（第 15:8、23:16 和 31:24 位）引导到低位字节，即第 7:0 位。（当您到达位“32”时，它实际上是地址 4 处 4 字节字的位 0。）

但是，在标称情况下，*没有*任何特殊硬件可以将字节移动到除了以自然顺序标称连接到的位置之外的任何位置，也可能是字节通道 0。

想象一个具有 32 个数据引脚的简单内存芯片和一个具有 32 个数据引脚的简单 CPU。每个芯片上的给定数据引脚连接到另一个芯片上的相应数据引脚，并且仅连接到那个数据引脚。简单的 CPU根本*无法*进行未对齐的读取*。*

因此，考虑从 0 读取。接下来的 4 个字节全部落入已连接的寄存器中，从地址 4 读取也会发生这种情况。但是如果从地址 1 读取（32 位）怎么办？还是2？还是3？虽然读取不能直接在硬件中完成，但一个花哨的控制器可以导致很多事情发生：

*   CPU 可以进行两次读取以获取所有位。它不能同时做，它只有 32 个引脚。一次读取来自地址 0，一次读取来自地址 4
*   然后，CPU 必须执行各种移位、屏蔽和异或运算，以便从这两个组件中构造一个单词。

所有这些事情都需要额外的时间。

* * *

^(笔记。实际上，数据总线通常是 32 位的倍数，存储器也是如此。可能存在用于重新对齐对象的特殊硬件。但即便如此，因为这是一种异常情况，它可能无法获得正确对齐读取所获得的管道优化，即使使用特殊硬件，通过它运行操作数也可能会花费时间。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T01:17:23.967

对齐与数据大小和寻址有关。大多数指令集/软件的寻址以字节为单位。0,1,2,3 都是有效的字节地址。假设您正在访问的内存系统或外围设备是“字节可寻址”的，基本上您可以向其写入单个字节，您通常有允许您使用任何地址值的指令。当你有超过一个字节时开始对齐，两个字节，如果对齐意味着地址的lsbit为零，未对齐意味着它是一。四个字节，32 位数量，低两位为零，对齐，一个或两个不为零，不对齐，依此类推。可以将其视为模数，您想要一个模数 4 = 0 在 4 字节边界上对齐的地址。

现在通常作为一名软件工程师，您不会故意让自己处于需要在地址 5 处获取 10 个字节的情况下，您可能会在 0x4 处执行 12 个字节或在 0x0 处执行 16 个字节或类似的事情，即使您只使用 10其中你会更合乎逻辑地对齐它们。外部影响、网络数据包、文件系统、共享内存、硬件等，任何时候你跨越一个编译域，你都可能不得不处理这个问题并采取相应的行动。10 个字节是半有趣的，这取决于您是尝试将这些字节复制到另一个同样糟糕的地址，还是只是读取它们或写入它们。如果阅读，您可能只想在地址 0x4 处读取 12 个字节并完成它。如果写得好，您可以在一个漂亮的循环中完成所有 10 个操作，或者一次展开一个字节，您可以在 0x5 写入一个，在 0x6 写入两个，在 0x8 写入四个，在 0xC 写入两个，在 0xE 写入一个，或一个在 0x5，一个循环或展开的 4 个 16 位值，从 0x6 开始，然后在 0xE 一个字节。等等。

既然您说阅读，您可以在 0x4 处读取 3 个 32 位数量或从 0x0 开始读取两个 64 位数量。这在很大程度上取决于您打算如何处理数据以及您使用的指令集等。10 字节读取的循环可能是最干净/最简单的读取、维护等。

如果您想知道对齐与未对齐，那么就像我上面提到的那样，您可以做一个

```
8 bit access at 0x5
16 bit access at 0x6
32 bit access at 0x8
16 bit access at 0xC
8 bit access at 0xE 
```

正如我一直说的那样，对于可能不是最有效的读取。对于写入，您可以读取修改写入 32 或 64 位数量或我上面提到的组合。

# css - 为什么我的 $('id').css('property: value'); 应用它的风格？

> ID：10018857
> 
> 赞同：0
> 
> 时间：2012-04-04T20:36:56.533
> 
> 标签：css, navigation, border

我正在尝试制作一个 jQuery if 语句，它说：如果用户在指定的页面上，则应用指定的样式；在这种情况下，它会在锚标记的 id 上放置一个底部边框。

```
// index.php - referenced html
...
<link href='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript' />
<style type="text/javascript">
@import url('js/active-links.js');
</style>
...
<ul>
    <li><a id="home" href="#">HOME</a></li>
    <li><a id="other1" href="#">OTHER1</a></li>
    <li><a id="other2" href="#">OTHER2</a></li>
</ul>
...

// active-link.js 
$(document).ready(function() {
    if (document.URL.indexOf('index.php') >= 0) {
        $('#home').css('border-bottom: 18px solid #9cd588');
                                            }
                       }); 
```

理想情况下，如果陈述相同的事情，我将把它应用到每个带有 else 的链接。目前它什么也没做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:38:20.180

简单的解决方案：

```
$('#home').css('border-bottom', '18px solid #9cd588'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:53:56.123

你解决问题的方法是错误的。

在服务器端，从菜单中确定活动链接，并将`active`类名添加到活动菜单项。

```
$active = "Home";
...
echo "<li";
if ($active == "Home") { echo " class=\"active\" "; }
echo ">Home</li>"; 
```

然后，在你的 CSS 中，没有任何条件：

```
.active { border-bottom: 18px solid #9cd588; } 
```

# element - CQ5中如何限制multifield中的元素个数？

> ID：10018858
> 
> 赞同：7
> 
> 时间：2012-04-04T20:36:57.833
> 
> 标签：element, limit, aem, day-cq

我用 Day CQ5 开发了这个网站，但遇到了一个问题。我正在创建一个组件，以及它的对话。我在对话框中使用了组件元素“multifield”，其中包含几个元素“pathfield”。如何设置特定数量的元素“pathfield”并删除按钮“+”和“-”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T18:12:01.077

本周我遇到了这个确切的问题:)

似乎默认情况下您无法限制编辑器可以输入的项目数量。为了解决这个问题，我创建了 Multifield.js 的叠加层，放置在

```
/apps/cq/ui/widgets/source/widgets/form/MultiField.js 
```

我在多字段下的 fieldConfig 节点上添加了对“限制”属性集的检查。如果存在且不为零，它将使用此作为用户可以添加的最大字段数。

不想通过发布完整的覆盖来涉及版权问题，但我所做的更改如下：

在构造函数中（第 53 行），添加一个检查以从 fieldConfig 节点获取 limit 的值：

```
if (!config.fieldConfig.limit) {
        config.fieldConfig.limit = "0";
} 
```

在“+”按钮的处理程序（第 71 行）中，将函数更改为以下内容：

```
if(config.fieldConfig.limit == 0 || list.items.getCount() <= config.fieldConfig.limit) {
    list.addItem();
} else {
    CQ.Ext.Msg.show({
        title: 'Limit reached',
        msg: 'You are only allowed to add ' + config.fieldConfig.limit + 
             ' items to this module',
        icon:CQ.Ext.MessageBox.WARNING,
        buttons: CQ.Ext.Msg.OK
    });
} 
```

我没有删除按钮，而是创建了一个弹出窗口来通知编辑器“N 是允许的最大字段数”。

简单的改变，但做的工作！希望这是有用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:58:08.403

您还可以将侦听器并行添加到多字段节点。例如

事件：`beforeadd`

功能：

```
function(list,component,index) {
    if(this.fieldConfig.limit!=0) {
        if(this.fieldConfig.limit == (list.items.getCount()-1)) { 
            CQ.Ext.Msg.show(
                {title: 'Limit reached',  msg: 'You are only allowed to add '+this.fieldConfig.limit+' items to this module',icon:CQ.Ext.MessageBox.WARNING,buttons: CQ.Ext.Msg.OK}
            );;return false;
        }
    }
} 
```

前提条件：将limit值添加到multifield的fieldConfig中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:37:59.540

我还没有找到这个问题的标准解决方案，但想出了一个小技巧。首先，我通过组件的对话添加所需数量的子元素。然后我将属性“class”添加到元素“multifield”，例如“sliderpanel-dialog-multifield”。然后我在组件中添加 CSS 样式这样的构造：

```
.sliderpanel-dialog-multifield .x-btn{
  display: none;
} 
```

".x-btn" 是一个使用 CQ5 中的按钮的类。之后，按钮将被隐藏，您无法在多字段中添加或删除元素。我有另一个建议，这个问题可以在监听器和脚本的帮助下解决，但解决起来会更难，我在上面引用过。到目前为止，我一直专注于这个变体，但如果你有其他想法，我很想知道它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T16:00:53.177

beforeadd 解决方案似乎存在问题：表单/对话框处于无效状态，告诉我们更正标记的字段......但一切都是正确的。

有没有办法重新初始化表单验证？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-06T08:58:49.897

请参阅这篇文章，我通过在达到限制后删除“添加项目”按钮来实现该功能。

[http://letsaem.blogspot.in/2015/12/add-limit-to-number-of-elements-in.html](http://letsaem.blogspot.in/2015/12/add-limit-to-number-of-elements-in.html)

但是实现的过程是：

1.  将 limit**(long)** 属性添加到 fieldConfig 节点
2.  将侦听器节点添加到多字段 xtype 并添加以下侦听器。

删除项目：

```
function(list) {
  var length = list.items.length;
  if (length <= list.fieldConfig.limit) {
    list.items.items[length - 1].show();
  }
} 
```

之前添加：

```
function(list, component, index) {

    var length = list.items.length;
    var addButton = list.items.items[length - 1];
    if (length == list.fieldConfig.limit) {
        addButton.hide();
    }
} 
```

现在如果你给限制：3

添加 3 个项目后，添加项目按钮将消失

添加项目按钮消失：

[![在此处输入图像描述](../Images/f84c2423142767c5bad4c39fe9188b5a.png)](https://i.stack.imgur.com/udBc4.png)

# php - 将 require_once() 与站点根目录之外的文件一起使用

> ID：10018862
> 
> 赞同：1
> 
> 时间：2012-04-04T20:37:26.693
> 
> 标签：php, path, require-once

我有一个应用程序，它被分成几个具有公共文件的站点。结构看起来像这样...

```
|
|--[Site A] <--Web site A points here
|   |-- (Files and folders)
|
|--[Site B] <--Web site B points here
|   |-- (Files and folders)
|
|--[Includes] <--common files are here 
```

如果我在站点 A 或 B 并执行以下操作：

```
require_once(include.php) 
```

一切正常，但如果我这样做：

```
require_once(../Includes/include.php) 
```

我得到一个错误。

我通过做一些工作来解析路径来解决这个问题，例如

```
$path = explode( "\\" , __DIR__ );
for ($i = 1; $i <= 2; $i++) { array_pop( $path ); }
$path = implode( "\\" , $path ) . "\\includes\\initialize.php" ; 
```

虽然这可行，但我正在寻找使用 require_once() 的更优雅的解决方案

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:46:42.290

您确定包含“require_once”的脚本位于 [站点 A] 而不是它的子文件夹中吗？我问是因为路径是相对于包含脚本的。例如，如果站点 A 中有一个包含“/subfolder/config.php”的 Index.php 文件，并且您希望 config.php 包含站点 A 之外的内容，则必须使用

```
require_once(../../Includes/include.php) 
```

# groovy - Groovy - 使用 metaClass 删除类字段瞬态修饰符

> ID：10018863
> 
> 赞同：0
> 
> 时间：2012-04-04T20:37:27.223
> 
> 标签：groovy, metaprogramming

我们有一个简单的 Groovy 类：

```
class A implements Serializable {
   transient Integer t // this field is transient in the serialization process
   Object o
} 
```

众所周知，我们可以使用 Groovy 的 metaClass 属性（元编程）在运行时修改类的属性和方法。

我不想做的是：**从 A 类的 't' 属性中删除 'transient' 修饰符，让它序列化这个字段**。我需要在运行时使用 metaClass 或其他机制来执行此操作。

重新编译、重新创建 A 类将不是解决方案。我已经在服务器上部署并运行了这个类，我唯一​​能做的就是通过远程 groovy-shell 改变它的元行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:31:20.233

我已经尝试过了，我不相信这是可能的

即使使用反射并在类中声明的字段上设置修饰符，序列化仍会跳过该属性

我认为唯一的解决方案是编写自己的序列化例程，忽略瞬态修饰符。

或者当然，改变课程（但你说这是不可能的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T17:05:31.107

如果要控制瞬态字段的序列化，请使用 json-io ( [https://github.com/jdereg/json-io](https://github.com/jdereg/json-io) ) Java / Groovy 序列化库。它允许您关联一个类，该类将告诉序列化程序要序列化哪些字段。此列表被指定为字符串列表。换句话说，您可以逐类有效地告诉序列化程序您想要序列化哪些字段。因此，如果您只有一个类导致您出现问题，请指定您想要序列化的字段，包括瞬态字段，它们将被序列化。

```
def custom = [(A.class):['t', 'o']]
def args = [(JsonWriter.FIELD_SPECIFIERS):custom]
def json = JsonWriter.objectToJson(root, args)
println json 
```

如果您有多个类具有要序列化的瞬态字段：

```
def custom = [(A.class):['t', 'o'], (B.class):['field1','field2'], ...]
def args = [(JsonWriter.FIELD_SPECIFIERS):custom]
def json = JsonWriter.objectToJson(root, args)
println json 
```

(A.class) 在括号中，因为如果 Groovy Map 中的键不是字符串，则需要在括号中。

# xml - 如何创建可扩展的 xml

> ID：10018868
> 
> 赞同：0
> 
> 时间：2012-04-04T20:38:03.940
> 
> 标签：xml

如何创建 xml 架构，以便将来需要输入全新的对象时，不需要编辑架构？我通过 w3schools 和其他网站学习过——但什么也没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:40:31.917

我认为您指的是[XML namespaces](http://www.w3.org/TR/REC-xml-names/#scoping)，它允许您使用前缀来合并来自不同模式的标签。

链接页面中的示例：

```
<?xml version="1.0"?>
<!-- both namespace prefixes are available throughout -->
<bk:book xmlns:bk='urn:loc.gov:books'
         xmlns:isbn='urn:ISBN:0-395-36341-6'>
    <bk:title>Cheaper by the Dozen</bk:title>
    <isbn:number>1568491379</isbn:number>
</bk:book> 
```

# php - 拖放 div 删除

> ID：10018871
> 
> 赞同：2
> 
> 时间：2012-04-04T20:38:15.197
> 
> 标签：php, javascript, jquery, html

我目前正在使用 Jquery UI 方法进行自定义拖放。我在拖动时同时使用 onmousedown 和 onmouseup 事件，我希望尽可能轻松地删除对象。

这不会“隐藏”对象 - 我相信 Jquery UI 不支持这种方法。但它会告诉数据库在下次从数据库中收集对象时不要显示它。

我希望做一个垃圾桶类型的想法，成员只需将他们的对象拖到垃圾桶图标上，这将强制使用某种类型的 JS 函数。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:41:22.793

您需要对服务器端进行 Ajax 调用，对 PHP 页面进行从数据库中删除特定项目的操作。

因此，一旦将项目放入垃圾箱，您将需要进行 Ajax 调用，获取响应（成功/失败），并在页面上采取相应的行动（删除项目/显示错误消息）。

* * *

根据评论进行编辑：
如果您希望能够判断项目是否被拖放到目标元素上，您可以使用**[jQueryUI Droppable](http://jqueryui.com/demos/droppable/)**

# c# - 如何在没有 IIS 的 C# Windows 服务中启用远程通信？

> ID：10018873
> 
> 赞同：0
> 
> 时间：2012-04-04T20:38:21.780
> 
> 标签：c#, windows, wcf, service

我越来越感到困惑，使用 WCF 使用单个远程可调用方法创建一个简单的 Windows 服务，然后从控制台应用程序调用该方法是多么困难。

我可以创建和安装 Windows 服务，但找不到任何方法来允许控制台应用程序与其通信。

我的目标如下：

*   允许 Windows 服务自托管公开单个方法的 WCF 服务，无论它安装在哪台机器上。
*   希望控制台应用程序能够在用户输入名称的机器上调用该方法。
*   不想要求 IIS 的存在。
*   想要一个干净、简单、简短的解决方案。一页或更少代码的奖励积分。
*   没有讨厌的过度设计的配置文件。

我想如果有必要我可以放弃没有配置文件的目标，但我对其他目标非常确定。

除了向我指出冗长而复杂的 MSDN 文章或书籍之外，是否有任何示例代码用于公开和使用该服务？非常感谢您的帮助。我保证最终会全面阅读 WCF - 我所需要的只是一个开始！

作为一个兴趣点：定义 WCF 服务时是否需要接口？为什么服务接口在 WCF 示例代码中如此普遍？

提前谢谢大家，

缺口

* * *

感谢大家，我设法将以下解决方案放在一起！

以下基础结构通过 Windows 服务中的 WCF 公开 Comms 类，而不需要配置文件。启用元数据发布，以便我们可以向相关的控制台应用程序测试器添加服务引用：

```
namespace AgentService
    {
    using System;
    using System.ServiceModel;
    using System.ServiceModel.Description;
    using System.ServiceProcess;

    [ServiceContract]
    public class Comms
        {
        [OperationContract]
        public string GetStatus() { return "Running"; }
        }

    public class SelfHost<T>
        {

        private ServiceHost host = null;

        public void Start()
            {
            var baseAddress = new Uri("http://localhost:8080/AgentService/");
            host = new ServiceHost(typeof(T), baseAddress);
            var behaviour = new ServiceMetadataBehavior() { HttpGetEnabled = true };
            host.Description.Behaviors.Add(behaviour);
            host.Open();
            }

        public void Stop() { host.Close(); }

        }

    public static class Program
        {

        public static void Main(string[] args)
            {
            if (args.Length > 0)
                {
                var host = new SelfHost<Comms>();
                host.Start();
                Console.WriteLine("Press any key to exit...");
                Console.ReadKey();
                host.Stop();
                }
            else
                {
                var servicesToRun = new ServiceBase[] { new AgentService() };
                ServiceBase.Run(servicesToRun);
                }
            }

        }

    } 
```

下面的类包含整个测试器控制台应用程序。同样，不需要配置文件：

```
namespace Tester
    {
    using System;
    using System.ServiceModel;
    using Tester.Comms;

    public class Program
        {

        public static void Main(string[] args)
            {
            var comms = new CommsClient(new BasicHttpBinding(),
                                        new EndpointAddress("http://localhost:8080/AgentService/"));
            Console.WriteLine(comms.GetStatus());
            Console.ReadKey();
            }

        }

    } 
```

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:43:55.007

是的 - 您可以在没有 IIS 的情况下在 Windows 服务中“自托管”WCF 服务...以下链接提供了您开始所需的一切（说明、源代码等）：

*   [http://www.softinsight.com/bnoyes/2009/05/30/DebuggableSelfHostWindowsServiceProjects.aspx](http://www.softinsight.com/bnoyes/2009/05/30/DebuggableSelfHostWindowsServiceProjects.aspx)
*   [http://keyvan.io/selfhosting-wcf-services-in-windows-services](http://keyvan.io/selfhosting-wcf-services-in-windows-services)
*   [http://msdn.microsoft.com/en-us/library/ms731758.aspx](http://msdn.microsoft.com/en-us/library/ms731758.aspx)
*   [http://msdn.microsoft.com/en-us/library/bb332338.aspx](http://msdn.microsoft.com/en-us/library/bb332338.aspx)
*   [http://www.codeproject.com/Articles/24027/SSL-with-Self-hosted-WCF-Service](http://www.codeproject.com/Articles/24027/SSL-with-Self-hosted-WCF-Service)

# javascript - HTML5 画布的弹跳检查功能在角落处失败

> ID：10018874
> 
> 赞同：0
> 
> 时间：2012-04-04T20:38:23.270
> 
> 标签：javascript, html, animation, canvas, collision-detection

我有一个 HTML5 画布，每次单击它时都会生成一个弹跳框。盒子数组存储每个创建的盒子的 x 值、y 值、x 速度和 y 速度。盒子最初会沿随机方向移动，并且会在画布的两侧反弹，但如果它撞到角落，盒子就会消失而不是弹回。编辑：我回答了我自己的问题，注意到 soundY 和 soundX 函数导致了问题。

```
var box = new Array();
var width  = window.innerWidth;
var height = window.innerHeight;
var field = document.getElementById('canvas');

field.width  = width;
field.height = height; 
field.ctx = field.getContext('2d');
field.ctx.strokeStyle = 'rgba(255,255,255,1)'; 
setInterval('redraw()', 200);
addEventListener('click', createBox, false);

function createBox(e) { // this box will always fail collision detection at the upper-left corner
  box.push(100); // x-value is normally mouse position
  box.push(100); // y-value is normally mouse position
  box.push(-5); // x-speed is normally random
  box.push(-5); // y-speed is normally random
}

function redraw() {
  field.ctx.clearRect(0,0,width,height); 

  for(var i = 0; i < box.length; i+=4) {
         if(box[i] < 0)        { box[i+2] *= -1; soundY(box[i+1]); } // parameter of soundY is less than 0 
    else if(box[i] > width)    { box[i+2] *= -1; soundY(box[i+1]); } // which is invalid and causes this to break

         if(box[i+1] < 0)      { box[i+3] *= -1; soundX(box[i]); }
    else if(box[i+1] > height) { box[i+3] *= -1; soundX(box[i]); }

    box[i] += box[i+2];
    box[i+1] += box[i+3];
    field.ctx.strokeRect(box[i], box[i+1], 4, 4);
  }
}

function soundX(num) {
  // play a sound file based on a number between 0 and width
}

function soundY(num) {
  // play a sound file based on a number between 0 and height
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T00:10:32.160

我可以重现问题的唯一方法是在其中一个角落生成盒子，以便在正确的 x 和 y 速度下，盒子最初是在画布边界之外创建的。发生这种情况时，速度的反转不足以将项目带回边界等，下一帧速度再次反转（等等）。

我认为这可能会解决您的问题：

```
 var boxes = [];
        var boxSize = 4;
        var width = window.innerWidth;
        var height = window.innerHeight;
        var field = document.getElementById('canvas');

        function redraw() {
            field.ctx.clearRect(0, 0, width, height);
            var box;
            for (var i = 0; i < boxes.length; i++) {

                box = boxes[i];
                field.ctx.strokeRect(box.x, box.y, boxSize, boxSize);

                if (box.x < 0) {
                    box.x = 0;
                    box.dx *= -1;
                } else if (box.x > width - boxSize) {
                    box.x = width - boxSize;
                    box.dx *= -1;
                }

                if (box.y < 0) {
                    box.y = 0;
                    box.dy *= -1;
                } else if (box.y > height - boxSize) {
                    box.y = height - boxSize;
                    box.dy *= -1;
                }

                box.x += box.dx;
                box.y += box.dy;
            }
        }

        field.width = width;
        field.height = height;
        field.ctx = field.getContext('2d');
        field.ctx.strokeStyle = 'rgba(0,0,0,1)';

        setInterval(redraw, 200);
        addEventListener('click', createBox, false);

        function createBox(e) {
            boxes.push({
                x: e.clientX - 10,
                y: e.clientY - 10, // arbitrary offset to place the new box under the mouse
                dx: Math.floor(Math.random() * 8 - boxSize),
                dy: Math.floor(Math.random() * 8 - boxSize)
            });
        } 
```

我修复了您的代码中的一些错误并进行了一些更改以使其更具可读性（我希望如此）。最重要的是，我扩展了您的碰撞检测，以便在速度将其带到外部时，它将框的坐标重置为画布的边界。

创建了一个[jsfiddle](http://jsfiddle.net/yzY4S/)，如果需要进一步讨论，它可能会很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T18:56:12.020

这是我假设它与问题无关的附加代码（见编辑），但删除代码解决了问题，因为看起来这个用例会导致这部分代码中的无效输入。

# jquery - jquery中的幻灯片放映，图像占据页面的所有宽度

> ID：10018877
> 
> 赞同：0
> 
> 时间：2012-04-04T20:38:40.343
> 
> 标签：jquery, slideshow, centering

我想知道是否可以“制作”带有大图像的 jquery 幻灯片。

例如，如果我有 1900x260 的图像，在一个大屏幕上，所有的图像都被看到了。但是在小分辨率（1024）下，我会看到图像居中（没有响应！！，没有调整大小）。

感谢您的帮助。法布里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T06:51:06.843

谢谢你们。在这篇文章的帮助下，我已经这样做了（看起来效果很好）：http: [//jonraasch.com/blog/a-simple-jquery-slideshow](http://jonraasch.com/blog/a-simple-jquery-slideshow)

我的代码：

```
<script type="text/javascript">

function slideSwitch() {

    var $active = $('#slideshow li.active');

    if ( $active.length == 0 ) $active = $('#slideshow li:last');
    var $next =  $active.next().length ? $active.next() : $('#slideshow li:first');

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active last-active');
        });
}

$(document).ready(function() {
    setInterval( slideSwitch, 5000 );
});

</script> 
```

的CSS：

```
<style type="text/css">

ul {
    position: relative;
}

#home {
    background: url("1.jpg") center center no-repeat;
    height:263px;
}
#web {
    background: url("2.jpg") center center no-repeat;
    height:263px;
}
#design {
    background: url("3.jpg") center center no-repeat;
    height:263px;
}
#event {
    background: url("4.jpg") center center no-repeat;
    height:263px;
}

#slideshow li {
    position:absolute;
    top:0;
    left:0;
    z-index:8;
    opacity:0.0;
    height: 263px;
     width:100%;
}

#slideshow li.active {
    z-index:10;
    opacity:1.0;
}

#slideshow li.last-active {
    z-index:9;
}

</style> 
```

他的 HTML ：

```
<div id="slideshow">
    <ul>
        <li id="home" class="active"></li>
        <li id="event"></li>
        <li id="web"></li>
        <li id="design"></li>
    </ul>    
</div> 
```

它工作正常，但现在，我使用的是**960gs**（和一个粘性页脚），我有很多问题： **#slideshow 必须是绝对的**（我必须将它推到页面中间），如果这样做，它消失了:(。

有什么帮助吗？谢谢

工厂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T23:51:48.203

没有太多的事情要做，我将四处走动并建议 Supersized：

[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

# asp.net-mvc-3 - 如何在 Razor 中访问 IQueryable？

> ID：10018885
> 
> 赞同：0
> 
> 时间：2012-04-04T20:39:13.650
> 
> 标签：asp.net-mvc-3, razor, iqueryable

我正在构建 MVC3“代码优先”应用程序并在我的页面上显示数据我使用以下内容：
控制器代码：

```
public ViewResult Index()
{
dynamic assignedT = from t in db.AssignedTasks

join a in db.Approvers on t.ApproverID equals a.ID
 join r in db.Requestors on t.RequestorID equals r.ID
 select new {Approver =a.FirstName + " " +a.LastName,
 Requestor=r.FirstName + " " + r.LastName,
 Title = t.Title,
 t.RequestedDate,
 t.CompletedDate, t.Description,
 Status =(int)t.InternalStatut
  };

 return View(assignedT);
    } 
```

并在页面上：

```
@{
   ViewBag.Title = "Index";
 }
<h2>Index</h2>
 <table>
  @foreach (var item in Model) {     
 <tr> 
   <td>@item.GetType().GetProperty("Title").GetValue(item, null)
   </td> 
   </tr> 
   } 
</table> 
```

我知道使用动态不是最好的方法。 **如何使用强类型视图实现相同的功能？** 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:43:32.620

您可以定义以下类：

```
public class MyViewModel
{
    string Approver { get; set; }
    string Requestor { get; set; }
    string Title { get; set; }
    DateTime RequestedDate { get; set; }
    DateTime CompletedDate { get; set; }
    string Description { get; set; }
    int Status { get; set; }
} 
```

如果您随后`select new`将 Linq 查询更改为 ，`select new MyViewModel`那么您将拥有一个强类型的视图模型（和`dynamic`）`var`。

# c++ - C++ 的页面布局 API

> ID：10018891
> 
> 赞同：0
> 
> 时间：2012-04-04T20:39:48.410
> 
> 标签：c++, documentation-generation

我必须从 C++ 程序创建简短的报告（通常是单页/屏幕）。文档中包含表格、图表、图像和文本。它们必须显示在屏幕上（交互性将是一个加号）并以任何标准格式保存到文件中，为此存在免费（免费）查看器应用程序（无需编辑它们）。具有表格、图形和图像类（或数据结构）和自动页面布局功能的高级 API 更可取。有什么建议么？

# git - 如何使用主“样板”使项目的许多客户版本保持最新

> ID：10018896
> 
> 赞同：0
> 
> 时间：2012-04-04T20:40:11.903
> 
> 标签：git, branch, clone, boilerplate

我们有大量的客户端都有类似的站点，目前它们都配置有自己的应用程序文件夹，这些文件夹将覆盖系统级文件。由于更改的剧烈性质，进行覆盖似乎不再是理想的解决方案，相反，我想转向更多的“样板”类型的解决方案。我想到的工作流程如下：

1.  有一个主“样板”，将标有我们公司的名称，即“完全加载”的包、所有可能的功能等。

2.  对于每个客户端，我们将拥有该样板的新克隆，其中包含其所有特定于客户端的更改（不同的视图、图像、模型、配置等）。

3.  每当我们在主样板上添加新功能、修复错误或提高性能时，我想将这些更改推送/拉取到每个客户端。注意：我喜欢这样一个事实，即每个客户端都需要自己的推/拉，这样如果我们不想，我们就不会被迫一次更新所有客户端。这使我们能够一次处理一个客户的潜在问题。如果需要安全推送，我可以编写一个脚本来进行批量推送/拉取。

我担心的是，每次对客户端克隆进行推/拉操作时，我都必须每次都处理冲突，因为客户端存储库上的更改可能存在于任何文件中。

我很想知道人们对处理这种情况的最佳方式有何看法。我对 git 的有限了解告诉我，分支是一个坏主意，而且由于每个克隆所需更改的性质，我认为子模块是不可能的。我已经阅读了一些关于 git rerere 的内容，但不确定这些冲突是否足够可预测以使其有效。

提前感谢您的任何建议，我真的很高兴能离开 svn 并切换到这种类型的设置，我认为这将大大提高我们的生产力和开发时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:15:04.420

隔离为每个供应商打开/关闭功能的代码/配置。您现在可以为每个供应商拥有一个具有自己自定义设置的分支。关键是您提供默认值，无需配置即可生效。添加配置后，它会覆盖默认值。

通过这种方式，您可以更新各个供应商分支，并且由于您没有更改任何配置，即使有自定义配置，您也将“继承”改进。

你几乎想要做 git 对它的配置所做的事情。您对任何配置都有系统、全局和本地设置。

# php - 在分号后插入空格，除非它是 HTML 实体的一部分

> ID：10018897
> 
> 赞同：3
> 
> 时间：2012-04-04T20:40:13.030
> 
> 标签：php, regex, apache

我试图在每个分号后插入一个空格，除非分号是 HTML 实体的一部分。这里的例子很短，但我的字符串可能很长，有几个分号（或没有分号）。

```
Coca&#8209;Cola =>     Coca&#8209;Cola  (&#8209; is a non-breaking hyphen)
Beverage;Food;Music => Beverage; Food; Music 
```

我发现以下正则表达式可以解决短字符串的问题：

```
<?php
$a[] = 'Coca&#8209;Cola';
$a[] = 'Beverage;Food;Music';
$regexp = '/(?:&#?\w+;|[^;])+/';
foreach ($a as $str) {
    echo ltrim(preg_replace($regexp, ' $0', $str)).'<br>';
}
?> 
```

但是，如果字符串有点大，`preg_replace`上面的内容实际上会使我的 Apache 服务器崩溃（在页面加载时重置了与服务器的连接。）将以下内容添加到上面的示例代码中：

```
$a[] = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. '.
   'In blandit metus arcu. Fusce eu orci nulla, in interdum risus. '.
   'Maecenas ut velit turpis, eu pretium libero. Integer molestie '.
   'faucibus magna sagittis posuere. Morbi volutpat luctus turpis, '.
   'in pretium augue pellentesque quis. Cras tempor, sem suscipit '.
   'dapibus lacinia, dolor sapien ultrices est, eget laoreet nibh '.
   'ligula at massa. Cum sociis natoque penatibus et magnis dis '.
   'parturient montes, nascetur ridiculus mus. Phasellus nulla '.
   'dolor, placerat non sem. Proin tempor tempus erat, facilisis '.
   'euismod lectus pharetra vel. Etiam faucibus, lectus a '.
   'scelerisque dignissim, odio turpis commodo massa, vitae '.
   'tincidunt ante sapien non neque. Proin eleifend, lacus et '.
   'luctus pellentesque;odio felis.'; 
```

上面的代码（带有大字符串）使 Apache 崩溃，但如果我在命令行上运行 PHP，它就可以工作。

在我的程序的其他地方，我`preg_replace`在更大的字符串上使用没有问题，所以我猜测正则表达式中的某些东西压倒了 PHP/Apache。

那么，有没有办法“修复”正则表达式，以便它可以在具有大字符串的 Apache 上工作，或者是否有另一种更安全的方法来做到这一点？

我在 Windows XP SP3 上使用 PHP 5.2.17 和 Apache 2.0.64，如果有帮助的话。（不幸的是，现在升级 PHP 或 Apache 不是一个选项。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:12:16.310

我会建议这个匹配表达式：

```
\b(?<!&)(?<!&#)\w+; 
```

...匹配一系列字符（字母、数字和下划线），这些字符前面没有 & 符号（或 & 符号后跟井号），但后跟分号。

它分解为：

```
\b          # assert that this is a word boundary
(?<!        # look behind and assert that you cannot match
 &          # an ampersand
)           # end lookbehind
(?<!        # look behind and assert that you cannot match
 &#         # an ampersand followed by a hash symbol
)           # end lookbehind
\w+         # match one or more word characters
;           # match a semicolon 
```

替换为字符串`'$0 '`

如果这对你不起作用，请告诉我

当然，您也可以使用`[a-zA-Z0-9]`代替`\w`来避免匹配分号，但我认为这不会给您带来任何麻烦

此外，您*可能*还需要转义哈希符号（因为这是正则表达式注释符号），如下所示：

```
\b(?<!&)(?<!&\#)\w+; 
```

**编辑**不确定，但我猜测将单词边界放在开头会使其更有效率（因此不太可能使您的服务器崩溃），所以我在表达式和分解中进行了更改。 ..

**编辑 2** ...以及有关您的表达可能导致服务器崩溃的原因的更多信息：[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)——我*认为*这适用（？）嗯....不过是很好的信息

**最终编辑**如果您只想在分号后添加一个空格，*如果它后面还没有空格*（即在 的情况下添加一个`pellentesque;odio`但`pellentesque; odio`在添加了额外的不必要的空格：

```
\b(?<!&)(?<!&\#)\w+;(?!\s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:46:29.450

对于这样的问题，回调可能会有所帮助。

```
(&(?:[A-Za-z_:][\w:.-]*|\#(?:[0-9]+|x[0-9a-fA-F]+)))?; 
```

展开

```
(          # Capture buffer 1
   &                              # Ampersand '&'
   (?: [A-Za-z_:][\w:.-]*         # normal words
     | \#                         # OR, code '#'
       (?: [0-9]+                       # decimal
         | x[0-9a-fA-F]+                # OR, hex 'x'
       )
   )
)?         # End capture buffer 1, optional
;          # Semicolon ';' 
```

测试用例[http://ideone.com/xYrpg](http://ideone.com/xYrpg)

```
<?php

$line = '
  Coca&#8209;Cola
  Beverage;Food;Music
';

$line = preg_replace_callback(
        '/(&(?:[A-Za-z_:][\w:.-]*|\#(?:[0-9]+|x[0-9a-fA-F]+)))?;/',
        create_function(
            '$matches',
            'if ($matches[1])
               return $matches[0];
             return $matches[0]." ";'
        ),
        $line
    );
echo $line;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:56:30.633

您可以使用负面的回顾：

```
preg_replace('/(?<=[^\d]);([^\s])/', '; \1', $text) 
```

因为我手头没有电脑，所以没有测试过，但是这个或它的轻微变化应该可以工作。

# ruby - 在 Ruby 中定义 [方括号] 方法是如何工作的？

> ID：10018900
> 
> 赞同：52
> 
> 时间：2012-04-04T20:40:21.810
> 
> 标签：ruby, methods

我正在阅读[Programming Ruby - 一个务实的程序员指南](http://www.ruby-doc.org/docs/ProgrammingRuby/)，并偶然发现了这段代码：

```
class SongList
  def [](key)
    if key.kind_of?(Integer)
      return @songs[key]
    else
      for i in 0...@songs.length
        return @songs[i] if key == @songs[i].name
      end
    end
    return nil
  end
end 
```

我不明白定义 [ ] 方法是如何工作的？

为什么key在[]外面，但是调用方法的时候却在[]里面？

键可以不带括号吗？

我意识到有更好的方法来写这个，并且知道如何编写我自己的有效方法，但是这个 [] 方法让我感到困惑......非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-05T01:19:53.370

这只是语法糖。有某些语法模式会被翻译成消息发送。尤其

```
a + b 
```

是相同的

```
a.+(b) 
```

这同样适用于`==`, `!=`, `<`, `>`, `<=`, `>=`, `<=>`, `===`, `&`, `|`, `*`, `/`, `-`, `%`, `**`, `>>`, `<<`, `!==`,`=~`以及`!~`。

还，

```
!a 
```

是相同的

```
a.! 
```

这同样适用于`~`。

然后，

```
+a 
```

是相同的

```
a.+@ 
```

这同样适用于`-`。

加，

```
a.(b) 
```

是相同的

```
a.call(b) 
```

setter 也有特殊的语法：

```
a.foo = b 
```

是相同的

```
a.foo=(b) 
```

最后但并非最不重要的一点是，索引有特殊的语法：

```
a[b] 
```

是相同的

```
a.[](b) 
```

和

```
a[b] = c 
```

是相同的

```
a.[]=(b, c) 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-04-04T20:43:43.660

与许多语言不同，ruby 中的方法可以包含一些特殊字符。其中之一是数组查找语法。

如果您要实现自己的哈希类，在检索哈希中的项目时，您想要反转它，您可以执行以下操作：

```
class SillyHash < Hash

  def [](key)
    super.reverse
  end

end 
```

您可以通过使用以下内容调用哈希来证明这一点：

```
a = {:foo => "bar"}
 => {:foo=>"bar"} 
a.[](:foo)
 => "bar" 
a.send(:[], :foo)
 => "bar" 
```

所以 def [] 定义了当你做的时候使用的方法`my_array["key"]` 其他对你来说可能看起来很奇怪的方法是：

```
class SillyHash < Hash

  def [](key)
    super.reverse
  end

  def []=(key, value)
    #do something
  end

  def some_value=(value)
    #do something
  end

  def is_valid?(value)
    #some boolean expression
  end

end 
```

澄清一下，`[]`方法的定义与数组或哈希无关。采取以下（人为的）示例：

```
class B
  def []
    "foo"
  end
end

 B.new[]
 => "foo" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-04T21:00:26.953

方括号是方法名称，就像`Array#size`您拥有`Array#[]`的方法一样，您甚至可以像使用任何其他方法一样使用它：

```
array = [ 'a', 'b', 'c']
array.[](0) #=> 'a'
array.[] 1  #=> 'b'
array[2]    #=> 'c' 
```

最后一个类似于语法糖，与第一个完全相同。类似的`Array#+`工作：

```
array1 = [ 'a', 'b' ]
array2 = [ 'c', 'd' ]
array1.+(array2) #=> [ 'a', 'b', 'c', 'd' ]
array1.+ array2  #=> [ 'a', 'b', 'c', 'd' ]
array1 + array2  #=> [ 'a', 'b', 'c', 'd' ] 
```

你甚至可以像这样添加数字：

```
1.+(1) #=> 2
1.+ 1  #=> 2
1 + 1  #=> 2 
```

同样适用于`/`,`*`等等`-`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-26T22:09:45.923

它是一个运算符重载器，它覆盖或补充您定义的类中的方法的行为，或者您正在修改其行为的类。您可以对不同于 [] 的其他运算符执行此操作。在这种情况下，当在类 SongList 的任何实例上调用 [] 时，您正在修改它的行为。

如果你有 songlist = SongList.new 然后你做了 songlist["foobar"] 那么你的自定义 def 将开始运行，并假设 "foobar" 作为参数（键）传递，它会对 "foobar" “无论方法说什么都应该做关键。

尝试

```
class Overruler
    def [] (input)
          if input.instance_of?(String)
            puts "string"
          else
            puts "not string"
          end
     end
end
foo = Overruler.new
foo["bar"].inspect
foo[1].inspect 
```

# php - php循环输出

> ID：10018902
> 
> 赞同：1
> 
> 时间：2012-04-04T20:40:27.350
> 
> 标签：php, loops

我有一个类似的循环：

```
$names = "
[$name , $surname]
";

echo "$names"; 
```

结果：

```
[Mario,Rossi]
[Aberto,rossi]
[Giovanni,Rossi] 
```

我会这个输出：

```
[Mario,Rossi],
[Aberto,rossi],
[Giovanni,Rossi] 
```

没有 , 在最后一个结果中
* 我不知道循环中的结果数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:46:00.527

```
$names[] = "
[$name , $surname]
";

$comma_sep = implode(",", $names);

echo "<pre>{$comma_sep}</pre>"; 
```

`<pre>`如果您想使用这样的换行符，则应使用标签预先格式化数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T20:48:57.717

使用简单的数组内爆将在这里解决问题：

```
$names[] = "[$name, $surname]";
echo implode(",\n", $names); 
```

# math - 变化值的 glsl 和透视校正

> ID：10018905
> 
> 赞同：2
> 
> 时间：2012-04-04T20:40:40.950
> 
> 标签：math, opengl, graphics, glsl, texture-mapping

光栅化器是否使用透视校正对每个不同的顶点值（或在顶点着色器“出”的较新版本的 glsl 值中）进行插值？这取决于硬件吗？

剪裁发生时，剪裁顶点处的值是如何计算的？

我尝试撤消透视校正并注意到被剪裁的多边形的奇怪行为，我想更好地了解幕后发生的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:00:00.880

Pre-GL 3.0，影响透视正确插值的唯一方法是提示。通常，`glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST)`将在所有变量上激活透视正确插值，而`glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST)`通常将其关闭。请注意，这些只是驱动程序提示，仅此而已；司机不必以这种方式做出反应*。*

在 GLSL 1.30+ (OpenGL 3.0+) 中，您可以强制每个输出/输入以特定方式进行插值。[插值限定符](http://www.opengl.org/wiki/GLSL_Type_Qualifiers#Interpolation_qualifiers) `smooth`意味着透视正确；如果您不指定限定符，这是默认设置。`noperspective`意思是……显而易见的。

剪辑总是以这样一种方式完成，它就像没有被剪辑一样（或在硬件精度范围内足够接近）。因此，如果一个值是透视正确插值的，那么为被剪裁的顶点生成的值也必须使用透视正确插值。

# iphone - 注意视图是从 viewController 外部加载的

> ID：10018921
> 
> 赞同：0
> 
> 时间：2012-04-04T20:41:53.743
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, aop

任何帮助，将不胜感激。

我正在寻找一种以编程方式通知视图是从该视图控制器外部加载的方法。

假设我的主视图有 5 个按钮，在加载视图并出现按钮后，我希望在另一个文件（该 viewContrller 之外）中通知它已加载。我如何/在哪里可以检查并收到通知？

我需要做一些面向方面的编程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:43:55.567

使用 NSNotificationCenter。您可以在班级之间进行交流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:44:41.020

在您的其他对象中侦听自定义 NSNotification。让您的视图控制器在其生命周期中最有意义的任何部分发布该通知（viewDidLoad、viewDidAppear ...）。

如果您不能发布通知，那么观察 keyPath 可能是要走的路。例如，您可以在您的控制对象中放置类似这样的内容，然后实现`observeValueForKeyPath:`：

```
[viewController addObserver:self
                 forKeyPath:@"view"
                    options:NSKeyValueObservingOptionNew
                    context:NULL]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:00:34.843

NSNotificationCenter 或委托方法是完成此任务的最合适的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:16:13.107

虽然您可以像其他人建议的那样使用通知或 KVO 来执行此操作，但这强烈表明存在设计问题。您永远不应该直接访问视图控制器的内部视图。所以更深层次的问题是：你为什么想知道？

根据我的经验，最可能的原因是您让其他对象设置标题或启用修改。这会破坏 MVC 并导致您可能正在尝试解决的问题。处理这个问题的正确方法是将数据放入一个模型对象中，该对象在各种视图控制器之间共享。然后，当前视图控制器可以观察模型的变化并适当地更新其 UI 元素。

# doctrine-orm - 非规范化字段的 Doctrine2 和数据库端触发器

> ID：10018924
> 
> 赞同：2
> 
> 时间：2012-04-04T20:42:06.477
> 
> 标签：doctrine-orm

假设我有两个表：`Category`and `Product`, 和用外键`Product`链接。我希望我的数据库服务器使用非规范化字段 Category.productCount 来计算一个类别中的产品数量 - 触发器将在任何更新/删除/插入时更新此计数，所以我不必担心它。有没有办法以某种方式将数据库端触发器与 Doctrine2 实体同步？我真的不想在 PHP 端重新计算这些计数器，因为我们将在多个服务器上运行它。`Category``Production.categoryId == Category.id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:03:00.953

如果我理解您希望能够将新产品添加到类别的问题，请将其保留，然后让 Category.productCount 从数据库中自行更新？您可以使用

```
$entityManager->refresh($category); 
```

从数据库中重新加载实体。我自己没有做过，但我希望您可以使用生命周期功能来自动执行此操作。

但我有点想知道，如果只在本地增加计数器而不将其持久化到数据库中可能不是更好。让您的触发器执行数据库操作，但在请求中，在本地更新计数。

# php - 从时间戳计算

> ID：10018925
> 
> 赞同：1
> 
> 时间：2012-04-04T20:42:08.813
> 
> 标签：php, mysql, datetime, time

昨天我问了另一个问题来计算时间。

现在我意识到，在我的项目中使用第二个表是没有意义的，因为我的第一个表中已经给出了所有必要的东西。因此，目前我使用两个表，在其中插入两个时间戳：

```
$time = "INSERT INTO table2 ( a, b, c) VALUES (NOW(),NOW() + INTERVAL 14 DAY,(unix_timestamp(NOW()+ INTERVAL 14 DAY)) - unix_timestamp(NOW()))"; 
```

就像我已经说过的那样，这可能会容易得多，并且无需第二张桌子就可以达到相同的结果。现在我的问题是，这是我第一次在 php 中使用 timefunctions。有很多不同的功能我不太了解。

我认为要解决我的问题，我可以使用类似的东西：

```
$row = fetch_assoc()
$old_timestamp = $row->b;

$actual_time = mktime(); //which makes an actual timestamp
$seconds = '1209600'; //which is exactly the timeperiod of 14 days
$added = $old_timestamp + $seconds; //which adds the seconds to the old timestamp and should be the same as NOW() + INTERVAL 14 DAY from the VALUE of the query
$date_to_check = $added - $actual_time;
   if $date_to_check <= 0 { 
     do something } 
```

这可能吗？如果有人可以提供帮助，我将不胜感激。多谢。

**更新**

对于所有想知道我的想法的人。这是实际方式的代码：

```
$time_check = $db->query("SELECT (B <= NOW()) AS var FROM table2 WHERE x='$x'");         
            while ($row = $time_check->fetch_object()){ 
                if (($row->var != 0) && ($var1 === '0')){
                        $update_status = $db->query("UPDATE table1 SET var1='1' WHERE x='$x'");{
                            $delete_timecount = $db->query("DELETE FROM table2 WHERE x='$x'");
                        }
                }
            } 
```

我想在没有第二张桌子的情况下完成同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:06:56.693

我真的不明白你想做什么。您似乎正试图识别某人注册后 14 天的时间以便做某事。

```
if (time() > $old_timestamp + 1209600) {
    // It's been 14 days
    // Do something
} 
```

我使用[`time`](http://php.net/manual/en/function.time.php)，它只是返回当前时间。你明白什么是[时间戳](http://en.wikipedia.org/wiki/Unix_time)吗？

# svn - 文件夹被锁定，我无法解锁

> ID：10018928
> 
> 赞同：110
> 
> 时间：2012-04-04T20:42:13.807
> 
> 标签：svn, tortoisesvn

当我尝试更新或提交项目中的代码时，它告诉我该文件夹已锁定。当我尝试“释放锁定”时，它说在这个工作空间中没有什么可以解锁的。

这意味着什么？为什么我不能更新、提交甚至清理项目。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-04-12T21:11:17.960

右键单击您的 Subversion 工作目录文件夹，然后从上下文菜单中选择*TortoiseSVN->Clean Up 。*这将通过您的工作目录递归并清除任何不完整的操作，删除**本地**锁（这与使用 Subversion 锁定存储库中的文件不同，让每个人都知道锁）。

如果这不起作用，请查看是否可以找到已更改但尚未提交的文件的名称，保存它们，然后重新签出。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-11T09:32:32.670

如果文件被自己锁定（相同的svn帐户），您可以按照以下步骤操作：

右击被锁定的文件或文件夹，选择***TortoiseSVN->Get lock...***，勾选对话框左下角的“ **[] Steal the locks ”，点击“OK”。**如果它成功完成，那没关系。再次右键该文件，可以看到 ***TortoiseSVN->Release lock...***，点击解锁。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-18T18:28:29.667

使用 svn 命令行解锁本地文件夹，只需使用`svn cleanup`.

**前：**

`# svn commit -m "fixing #1234"`

![犯罪](../Images/059eceb6ba54c1994ab03db2c7c2de0d.png)

`# svn st`

![前](../Images/21481a4362994d807c984912c5eff110.png)

`# svn cleanup`

**后：**

`# svn st`

![后](../Images/a58d8d77b32a933200ae4d9ff523a873.png)

`# svn commit -m "fixing #1234"`

![之后2](../Images/bd57500b614f6463520c06148c43bb42.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-04T20:51:34.877

对于仍然遇到此问题的任何人（*错误：工作副本“{DIR}”已锁定。*），我有您的解决方案：

我发现当一个 TortoiseSVN 窗口崩溃时，它会留下一个 TSVNCache.exe，它仍然有一些处理您的工作副本的句柄，这会导致您看到的锁定问题（并且还会阻止清理工作）。

所以要解决这个问题：

**任何一个**

1a) 使用 Process Explorer 或类似工具删除 TSVNCache.exe 拥有的句柄

1b) ..或者更简单，只需使用任务管理器杀死 TSVNCache.exe

**然后**

2）右键单击-> TortoiseSVN-> 清理。只需要检查“清理工作副本状态”。

从那里开始，快乐的更新/提交。您可以通过执行 SVN 更新来重现锁定行为，然后在更新完成之前快速杀死它的 TortoiseProc.exe 进程。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-08-01T22:01:19.207

这是我第一次遇到这个问题。我什至尝试重新启动PC，但没有效果。这解决了我的问题：

我的解决方案：

1.  **右键单击**项目工作目录。
2.  导航**TortoiseSVN**。
3.  导航到**清理**。
4.  保留所有默认选项，并检查**Break Locks**
5.  点击**确定**

这对我有用。我能够提交更改。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-23T05:52:58.787

要从命令提示符解锁当前被其他用户锁定的工作副本中的文件，请使用`--force`option。

`$ svn unlock --force tree.jpg`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-21T15:22:06.907

我遇到了这个问题，我已经完成了以下步骤来解决它：

1.  转到父文件夹而不是子文件夹
2.  选择 SVN 清理
3.  单击确定。

在父文件夹而不是子文件夹上执行此步骤！

它对我有用！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-18T14:51:43.267

我正在将一个文件夹向上移动一个级别并进入另一个文件夹。我的错误是从父文件夹中进行移动。

不好的例子：

```
pwd -> C:\Repo\ParentDir\
svn move ./DirtoCopy ../AnotherDir 
```

SVN 需要使用已删除的文件夹信息更新父目录。
您必须从源文件夹和目标文件夹的公共根目录执行此操作，或者使用完整路径。

好例子：

```
svn move C:\Repo\ParentDir\DirtoCopy C:\Repo\NewLocation 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-12-06T12:31:31.613

要解锁被阻止的文档： 1\. 右键单击​​ -> 锁定 2\. 选中“窃取锁定”复选框 2\. 解除锁定

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-09T15:42:14.927

我遇到了无法从客户端解锁文件的问题。我决定去更简单的服务器端。

在 SVN 服务器上：

定位锁

```
 svnadmin lslocks /root/of/repo
 (in my case it was var/www/svn/[name of Company])

 You can add a specific path to this by svnadmin lslocks /root/of/repo "path/to/file" 
```

解除锁定

```
 svnadmin rmlocks /root/of/repo “path/to/file” 
```

就是这样！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-23T08:59:20.673

**解决方案 ：**

1.  右键单击项目工作目录。
2.  导航 TortoiseSVN。
3.  导航到清理。
4.  选择清理工作副本状态（勾选）
5.  点击确定
6.  重复步骤 1 和 2，然后导航以释放锁定。
7.  单击确定您的项目锁将打开。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-18T06:22:28.290

除了 David M 的回答之外，在进行清理时 -> 检查 'break locks' 选项。这将确保释放锁。然后做svn更新。这对我有用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-11T16:32:57.653

我对此问题进行了很多研究，但在我尝试以下方法之前没有解决方案可以解决我的问题：

我的 repo 文件夹与 Windows xp 虚拟机共享，因此我从 VM 执行清理，然后从主机执行 SVN UPDATE。

它对我有用。

来自哥斯达黎加的问候。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-20T20:59:19.243

通过重命名文件夹以使文件夹路径更小，我能够在我的机器上解决此问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-07-19T09:41:56.320

我遇到了类似的问题，它告诉我某些文件已被xx锁定。但是，xx 说他有释放锁，他在 TortoiseSVN 上找不到锁。

`clean up`对我不起作用。我得问他去`TortoiseSVN -> Repo-browser`，找到对应的文件，然后右键这些文件，选择`break lock`。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2012-04-12T20:21:40.957

我在尝试更新文件夹时让 Tortoise 损坏并崩溃后发生了这种情况。我最终重新安装了 Tortoise，但幽灵锁仍然存在。从那里我不得不删除文件夹并重新结帐。显然，我真的很幸运，当时我没有任何新的更改要提交。无论如何，这不是好消息，如果有人有更好的解决方案，我很想亲自听到。即使使用“Break Lock”，即使用强制选项解锁也没有改变任何东西。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2013-09-18T02:49:37.080

清理，选中所有复选框 => 这对我有用

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2015-04-28T16:31:33.857

在这些操作之后我遇到了这个问题：

1.  锁定文件夹
2.  修改文件
3.  删除文件并更新文件夹 --> 下载新文件
4.  尝试提交或释放锁

我终于通过再次强制锁定解决了这个问题： TortoiseSVN --> 获取锁定 --> 检查“窃取锁定”然后提交或释放锁定。

# php - 如何将 json 数据转换为逗号分隔的 php 字符串？

> ID：10018932
> 
> 赞同：3
> 
> 时间：2012-04-04T20:42:28.073
> 
> 标签：php, json

假设我有这个 json 数据。如何将“标签”转换为字符串

`$tags = "Rihanna, We, Found, Love, (Explicit), Def, Jam, Records, Pop";`?

```
{ "apiVersion" : "2.1",
      "data" : { "items" : [ { "accessControl" : { "autoPlay" : "allowed",
                    "comment" : "allowed",
                    "commentVote" : "allowed",
                    "embed" : "allowed",
                    "list" : "allowed",
                    "rate" : "allowed",
                    "syndicate" : "allowed",
                    "videoRespond" : "allowed"
                  },
                "aspectRatio" : "widescreen",
                "category" : "Music",
                "tags" : [ "Rihanna",
                    "We",
                    "Found",
                    "Love",
                    "(Explicit)",
                    "Def",
                    "Jam",
                    "Records",
                    "Pop"
                  ],
                "title" : "Rihanna - We Found Love ft. Calvin Harris"
              } ],
          "itemsPerPage" : 1,
          "startIndex" : 1,
          "totalItems" : 859012,
          "updated" : "2012-04-04T20:32:26.170Z"
        }
    } 
```

以标题为例，脚本如下所示：

```
$content = $this->getDataFromUrl($feedURL);
$content = json_decode($content,true);

$videosList = $content['data']['items'];

for($i=0; $i<count($videosList); $i++) {

$videosDatas['videos'][$i]['title'] = $videosList[$i]['title'];

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T20:47:08.623

看起来你需要[implode()](http://php.net/manual/en/function.implode.php)。该功能将类似于...

```
$tags = implode(', ', $videosDatas['videos'][$i]['tags']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T20:46:18.520

```
$comma_sep_string = implode(', ' , $videosDatas['videos'][$i]['tags']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:52:52.317

尝试：

```
foreach($videosList as $i=>$video){
    $videosDatas['videos'][$i]['title'] = $video->title;
    $tags = implode(', ',$video->tags);
    $videosDatas['videos'][$i]['tags'] = $tags;
} 
```

代替您的代码：

```
for($i=0; $i<count($videosList); $i++) {

$videosDatas['videos'][$i]['title'] = $videosList[$i]['title'];

} 
```

# php - preg_match UTF-8 问题

> ID：10018935
> 
> 赞同：1
> 
> 时间：2012-04-04T20:42:47.160
> 
> 标签：php, preg-match

`preg_match("/\b(word1|word2)\b/iu", 'text text text word1 text text');`

出于某种原因，上面的代码在一台服务器上不适用于希伯来语字符，但在另一台服务器上确实有效。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:45:01.727

您是否启用了支持 unicode 属性的 perl 兼容正则表达式 (PCRE)？那将是我的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T13:51:26.927

您至少需要在您的服务器上安装 Perl 兼容正则表达式 (PCRE) 3.9 版，才能在`preg_match()`函数模式中使用 UTF-8 字符

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T20:45:39.363

试试 preg_match("/\b(word1|word2)\b/iu", utf8_decode('text text text word1 text text'));

# python - 确定一个数字是否能除以 25，Python

> ID：10018937
> 
> 赞同：7
> 
> 时间：2012-04-04T20:42:53.197
> 
> 标签：python, math

我正在尝试使用 Python 检查列表中的每个数字是否可以被 25 整除。我不确定什么是正确的过程。我想做这样的事情：

```
n = [100, 101, 102, 125, 355, 275, 435, 134, 78, 550]
for row in rows:

    if n / 25 == an evenly divisble number:
        row.STATUS = "Major"
    else:
        row.STATUS = "Minor" 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T20:44:13.353

使用[模运算符](http://docs.python.org/reference/expressions.html#binary-arithmetic-operations)：

```
for row in rows:
    if n % 25:
        row.STATUS = "Minor"
    else:
        row.STATUS = "Major" 
```

或者

```
for row in rows:
    row.STATUS = "Minor" if n % 25 else "Major" 
```

`n % 25``n`意思是“除以”时给我余数`25`。

既然`0`是`False`y，就不需要显式比较to `0`，直接用在`if`--如果余数是`0`，那么就是主行。如果不是，那就是小排。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-04T20:44:02.320

使用模运算符确定除法余数：

```
if n % 25 == 0: 
```

# matlab - Matlab中的高效积分函数

> ID：10018938
> 
> 赞同：1
> 
> 时间：2012-04-04T20:42:58.157
> 
> 标签：matlab, integral

我有一个形式为 a*x + b 的函数，我想将此函数从 0 集成到 t，其中 t 将重复设置为一个非常大（长度为 100000）向量的值。我在 for 循环中使用了 quad 函数，但是计算向量中每个值的积分需要太多时间。在 Matlab 中是否有任何有效的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:51:20.730

其实，你不需要自己实现，你可以使用“matlab数值积分函数”搜索它...

我想到的第一个功能是；

```
Trapezoidal --> trapz(X,Y)

Cumulative Trapezoidal --> cumtrapz(X,Y)

Adaptive Lobatto Quadrature --> quadl

Adaptive Gauss-Kronrod Quadrature --> quadgk

Vectorized Quadrature --> quadv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:47:45.663

cumtrapz();

认真 CumTrapz

它计算积分的梯形逼近。

# javascript - HTML5 / JavaScript：打开文本文件，加载到 textarea / 将 textarea 内容保存到文本文件

> ID：10018954
> 
> 赞同：2
> 
> 时间：2012-04-04T20:44:03.460
> 
> 标签：javascript, html, file, save

我想在浏览器中做两件事：

*   将文本文件加载到文本区域（必须通过对话框选择）
*   将文本区域的内容保存到文本文件中（必须再次通过对话框选择）
*   加载视频文件并获取文件路径以将其与视频播放器一起使用 ( [1](http://www.longtailvideo.com/players/jw-wmv-player/) )

我已经在互联网上四处寻找了一段时间。有一些仅通过 ActiveXObjects 的 IE 解决方案，我不能使用（IE，严重吗？）。HTML5 文件 API 的可用性有限，因为我无法访问所选文件的路径。

我还找到了 textareas 的保存对话框，但由于某些奇怪的原因，它们忽略了换行符，如果可能的话，我不知道如何解决这个问题。

所以这是我的要求和选择：

*   支持 FF 和 Chrome
*   JavaScript、HTML5（和 PHP，如果必须的话）
*   可能是 Silverlight，但我对它不是很熟悉，只能复制和粘贴：-/
*   它也必须在 Mac 上工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T20:39:53.690

有一个肮脏的 hack 可以在不借助 Flash 或 Silverlight 或使用服务器的情况下完成工作，它适用于大多数浏览器：

```
var uriContent = "data:application/octet-stream," + encodeURIComponent(fileContentsAsString);
window.open(uriContent, 'Save Your File'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:47:37.033

JS 在沙箱中运行。这意味着：无法访问文件系统上的文件。HTML5 文件 API 是第一个尝试授予对用户文件系统的有限访问权限的“原生”（如在非 flash 和 activex 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:49:58.640

File API 是允许您访问数据的 HTML，之后您可以在 JavaScript 中操作二进制 blob，但是根据您的要求，在纯 JS 和 HTML 中这是不可能的。

最大的障碍是“保存到文本文件”。我能够做到这一点的唯一方法是打开一个调用服务器端语言（例如 PHP）的 iFrame，将标头中的内容类型设置为提示下载的类型。

Flash 和 Silverlight 是在沙箱之外运行的“客户端”技术，这听起来是您目前唯一的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:59:38.620

我的想法：

加载文本文件：使用普通的 HTML 上传表单（如果你想编写脚本，可以通过 AJAX 提交）

保存文本文件：使用文本区域并在提交后，在服务器端创建文件，然后提供下载。（如前所述，客户端脚本无权访问计算机的文件系统）

加载视频文件：服务器上已经有视频了吗？否则将需要像文本文件一样上传。然后使用 flash 插件从服务器播放文件（然后你应该知道 URI）

所有这些都使用 PHP 相对简单地实现。文本区域中的换行符在 PHP 中保持为 \n。教程： PHP 中[的表单处理、PHP](http://www.w3schools.com/php/php_forms.asp "W3Schools PHP 表单")中的[文件上传](http://www.w3schools.com/php/php_file_upload.asp "W3Schools PHP 文件上传")

编辑：由于 PHP 在服务器端运行，由于浏览器的多样性，您不应该遇到很多问题。或者，您也可以在 Flash 或 Silverlight 中完成所有这些操作，尽管从我的角度来看，这需要更多的学习并且对用户来说不太舒服。

# windows-7 - 如何从局域网中的另一台 PC 访问我的本地主机？

> ID：10018955
> 
> 赞同：19
> 
> 时间：2012-04-04T20:44:06.457
> 
> 标签：windows-7, wamp, lan

我正在使用 WAMP 服务器来运行我的网站。我正在使用 Windows 7。

我在两台 PC 之间创建了 LAN，我想从第二台 PC 访问我的本地主机。
请注意，我没有使用 Internet 连接，因此无法使用 IP 地址。

请给我你的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T09:28:56.297

您必须编辑`httpd.conf`并找到这一行：`Listen 127.0.0.1:80`

然后写下您为 LAN 设置的所需 IP。不要使用自动IP。
例如：`Listen 192.168.137.1:80`

我用作`192.167.137.1`我的 Windows 7 的 LAN IP。重新启动 Apache 并享受共享。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-01T03:26:10.263

IP can be any LAN or WAN IP address. But you'll want to set your firewall connection allow it.

Device connection with webserver pc can be by LAN or WAN (i.e by wifi, connectify, adhoc, cable, mypublic wifi etc)

You should follow these steps:

1.  Go to the control panel
2.  Inbound rules > new rules
3.  Click port > next > specific local port > enter 8080 > next > allow the connection>
4.  Next > tick all (domain, private, public) > specify any name
5.  Now you can access your localhost by any device (laptop, mobile, desktop, etc).
6.  Enter ip address in browser url as 123.23.xx.xx:8080 to access localhost by any device.

This IP will be of that device which has the web server.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T20:53:56.153

实际上，您不需要互联网连接即可使用 IP 地址。LAN 中的每台计算机都有一个内部 IP 地址，您可以通过运行发现

```
ipconfig /all 
```

在cmd中。

您可以使用服务器的 IP 地址（可能是 192.168.0.x 或 10.0.0.x 之类的）远程访问网站。

如果您找到该 ip 并且仍然无法访问该网站，则意味着 WAMP 未配置为响应该名称（您叫我什么？192.168.0.3？那不是我的名字。我是 Localhost ）并且您必须修改 . ...../apache/config/httpd.conf

```
Listen *:80 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-10T12:00:28.070

**在**您的电脑连接到其他电脑后，使用以下 4 个步骤：
**4 个步骤：** 1-**编辑**此文件：httpd.conf
用于单击 wamp 服务器并选择 Apache 并选择 httpd.conf
2-**查找**此文本： 在下面**全部**
拒绝标签：

```
 <Directory "c:/wamp/www"><!-- maybe other url-->

    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.4/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   AllowOverride FileInfo AuthConfig Limit
    #
    AllowOverride All

    #
    # Controls who can get stuff from this server.
    #
#    Require all granted
#   onlineoffline tag - don't remove
     Order Deny,Allow
    Deny from all
     Allow from 127.0.0.1
     Allow from ::1
     Allow from localhost
</Directory> 
```

3-**更改**为：拒绝这样的**人**
：

```
<Directory "c:/wamp/www">

    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.4/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   AllowOverride FileInfo AuthConfig Limit
    #
    AllowOverride All

    #
    # Controls who can get stuff from this server.
    #
#    Require all granted
#   onlineoffline tag - don't remove
     Order Deny,Allow
    Deny from none
     Allow from 127.0.0.1
     Allow from ::1
     Allow from localhost 
```

4-**重启**Apache
不要忘记重启 Apache 或所有服务！！！

# c# - 如何从 C# 中的列表中删除项目？

> ID：10018957
> 
> 赞同：239
> 
> 时间：2012-04-04T20:44:09.847
> 
> 标签：c#, list

我有一个存储在 resultlist 中的列表，如下所示：

```
var resultlist = results.ToList(); 
```

它看起来像这样：

```
ID FirstName  LastName
-- ---------  --------
1  Bill       Smith
2  John       Wilson
3  Doug       Berg 
```

如何从列表中删除 ID 2？

* * *

## 回答 #1

> 赞同：452
> 
> 时间：2012-04-04T20:47:55.503

`List<T>`有两种方法可以使用。

如果您知道项目的索引，则可以使用[RemoveAt(int index) 。](http://msdn.microsoft.com/en-us/library/5cw9x18z.aspx)例如：

```
resultlist.RemoveAt(1); 
```

或者您可以使用[Remove(T item)](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)：

```
var itemToRemove = resultlist.Single(r => r.Id == 2);
resultList.Remove(itemToRemove); 
```

当您不确定该项目是否真的存在时，您可以使用[SingleOrDefault](http://msdn.microsoft.com/en-us/library/bb549274.aspx)。如果没有项目`SingleOrDefault`将返回（当找不到项目时将抛出异常）。当存在重复值（具有相同的两个项目）时，两者都会抛出。`null``Single``id`

```
var itemToRemove = resultlist.SingleOrDefault(r => r.Id == 2);
if (itemToRemove != null)
    resultList.Remove(itemToRemove); 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2016-02-15T14:50:03.293

**简短回答：**
**[删除（从列表中`results`）]**

`results.RemoveAll(r => r.ID == 2);`将删除**ID 为 2**的项目`results`（原位）。

**[过滤器（不从原始列表中删除`results`）：]**

`var filtered = result.Where(f => f.ID != 2);`返回除**ID 为 2的项目之外的所有项目**

**详细解答：**

我认为**`.RemoveAll()`**非常灵活，因为您可以拥有要删除的项目 ID 列表 - 请参考以下示例。

如果你有：

```
class myClass {
    public int ID; public string FirstName; public string LastName;
} 
```

并分配一些值`results`如下：

```
var results = new List<myClass> {
    new myClass { ID=1, FirstName="Bill", LastName="Smith" },   // results[0]
    new myClass { ID=2, FirstName="John", LastName="Wilson" },  // results[1]
    new myClass { ID=3, FirstName="Doug", LastName="Berg" },    // results[2]
    new myClass { ID=4, FirstName="Bill", LastName="Wilson" }   // results[3]
}; 
```

然后，您可以定义要删除的 ID 列表：

```
var removeList = new List<int>() { 2, 3 }; 
```

只需使用它来删除它们：

```
results.RemoveAll(r => removeList.Any(a => a==r.ID)); 
```

它将**删除第 2 项和第 3 项，**并保留第 1 项和第 4 项 - 如`removeList`. **请注意**，这发生在适当的位置，因此不需要额外的分配。

当然，您也可以在单个项目上使用它，例如：

```
results.RemoveAll(r => r.ID==4); 
```

在我们的示例中，它将删除 ID 为 4 的 Bill。

最后要提到的是列表有一个索引器，也就是说，它们也可以像动态数组一样访问，即`results[3]`会给你结果列表中的第 4 个元素（因为第一个元素的索引为 0，第二个元素的索引为1 等）。

因此，如果您想删除名字与结果列表的第 4 个元素相同的所有条目，您可以简单地这样做：

```
results.RemoveAll(r => results[3].FirstName == r.FirstName); 
```

请注意，之后，只有 John 和 Doug 将保留在列表中，Bill 被删除（示例中的第一个和最后一个元素）。重要的是列表会自动收缩，因此它只剩下 2 个元素 - 因此在此示例中执行 RemoveAll 后允许的最大索引为 1
（即`results.Count() - 1`）。

一些琐事：您可以使用这些知识并创建本地函数

```
void myRemove()  { var last = results.Count() - 1; 
                   results.RemoveAll(r => results[last].FirstName == r.FirstName); } 
```

如果你调用这个函数两次，你认为会发生什么？像

```
myRemove(); myRemove(); 
```

第一个调用将删除第一个和最后一个位置的 Bill，第二个调用将删除 Doug，并且只有 John Wilson 留在列表中。

* * *

**注意：**从[C# 版本 8](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-8)开始，您也可以编写`results[^1]`代替`var last = results.Count() - 1;`and `results[last]`：

```
void myRemove()  =>  results.RemoveAll(r => results[^1].FirstName == r.FirstName); 
```

因此，您不再需要局部变量`last`（请参阅[indices 和 range](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-8#indices-and-ranges)）。此外，由于它是单行的，因此您不需要花括号并且可以使用它`=>`。有关 C# 中所有新功能的列表，请查看[此处](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-version-history)。

* * *

DotNetFiddle：[运行演示](https://dotnetfiddle.net/6p8cmi)

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-04-04T20:45:02.617

```
resultList = results.Where(x=>x.Id != 2).ToList(); 
```

有一个我喜欢的小 Linq 助手，它易于实现，并且可以使带有“where not”条件的查询更易于阅读：

```
public static IEnumerable<T> ExceptWhere<T>(this IEnumerable<T> source, Predicate<T> predicate)
{
    return source.Where(x=>!predicate(x));
}

//usage in above situation
resultList = results.ExceptWhere(x=>x.Id == 2).ToList(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-04T20:49:47.873

你不指定什么样的列表，但泛型 List 可以使用`RemoveAt(index)`方法，或者`Remove(obj)`方法：

```
// Remove(obj)
var item = resultList.Single(x => x.Id == 2);
resultList.Remove(item);

// RemoveAt(index)
resultList.RemoveAt(1); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-05-06T20:08:06.297

更简化：

```
resultList.Remove(resultList.Single(x => x.Id == 2)); 
```

无需创建新的 var 对象。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-04T21:00:11.960

还有另一种方法。它使用[`List.FindIndex`](http://msdn.microsoft.com/en-us/library/0k601hd9.aspx)和`List.RemoveAt`。

虽然我可能*会*使用 KeithS 提供的解决方案（只是简单的*/*`Where`）`ToList`，但这种方法的不同之处在于它会改变原始列表对象。根据期望，这可能是一个好的（或坏的）“功能”。

 *在任何情况下，如果 ID 中存在间隙或排序错误等， `FindIndex`（加上保护）`RemoveAt`将确保正确，并且使用`RemoveAt`(vs `Remove`) 可以避免在列表中进行*第二次*O(n) 搜索。

这是一个[LINQPad](http://linqpad.org)片段：

```
var list = new List<int> { 1, 3, 2 };
var index = list.FindIndex(i => i == 2); // like Where/Single
if (index >= 0) {   // ensure item found
    list.RemoveAt(index);
}
list.Dump();        // results -> 1, 3 
```

快乐编码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T20:46:48.003

...或者只是`resultlist.RemoveAt(1)`如果您确切地知道索引。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-07-24T06:24:50.747

```
{
    class Program
    {
        public static List<Product> list;
        static void Main(string[] args)
        {

            list = new List<Product>() { new Product() { ProductId=1, Name="Nike 12N0",Brand="Nike",Price=12000,Quantity=50},
                 new Product() { ProductId =2, Name = "Puma 560K", Brand = "Puma", Price = 120000, Quantity = 55 },
                 new Product() { ProductId=3, Name="WoodLand V2",Brand="WoodLand",Price=21020,Quantity=25},
                 new Product() { ProductId=4, Name="Adidas S52",Brand="Adidas",Price=20000,Quantity=35},
                 new Product() { ProductId=5, Name="Rebook SPEED2O",Brand="Rebook",Price=1200,Quantity=15}};

            Console.WriteLine("Enter ProductID to remove");
            int uno = Convert.ToInt32(Console.ReadLine());
            var itemToRemove = list.Find(r => r.ProductId == uno);
            if (itemToRemove != null)
                list.Remove(itemToRemove);
            Console.WriteLine($"{itemToRemove.ProductId}{itemToRemove.Name}{itemToRemove.Brand}{itemToRemove.Price}{ itemToRemove.Quantity}");
            Console.WriteLine("------------sucessfully Removed---------------");

            var query2 = from x in list select x;
            foreach (var item in query2)
            {
                /*Console.WriteLine(item.ProductId+" "+item.Name+" "+item.Brand+" "+item.Price+" "+item.Quantity );*/
                Console.WriteLine($"{item.ProductId}{item.Name}{item.Brand}{item.Price}{ item.Quantity}");
            }

        }

    }
} 
```*

# android - 如何判断蓝牙是否连接？

> ID：10018960
> 
> 赞同：2
> 
> 时间：2012-04-04T20:44:24.710
> 
> 标签：android, bluetooth, find, connect, out

有人可以教我如何确定蓝牙是否连接到其他设备（手机、耳机等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T23:48:29.680

我不知道获取当前连接设备列表的任何方法，但您可以使用 ACL_CONNECTED 意图监听新连接：http: [//developer.android.com/reference/android/bluetooth/BluetoothDevice.html#ACTION_ACL_CONNECTED](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#ACTION_ACL_CONNECTED)

此意图包括一个带有连接的远程设备的额外字段。

在 Android 上，所有蓝牙连接都是 ACL 连接，因此注册此意图将为您提供所有新连接。

所以，你的接收器看起来像这样：

```
public class ReceiverBlue extends BroadcastReceiver {
  public final static String CTAG = "ReceiverBlue";
  public Set<BluetoothDevice> connectedDevices = new HashSet<BluetoothDevice>();

  public void onReceive(Context ctx, Intent intent) {

    final BluetoothDevice device = intent.getParcelableExtra( BluetoothDevice.EXTRA_DEVICE );

    if (BluetoothDevice.ACTION_ACL_CONNECTED.equalsIgnoreCase( action ) )   {
      Log.v(CTAG, "We are now connected to " + device.getName() );
      if (!connectedDevices.contains(device))
        connectedDevices.add(device);
    }

    if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equalsIgnoreCase( action ) )    {
      Log.v(CTAG, "We have just disconnected from " + device.getName() );
      connectedDevices.remove(device);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-01T19:49:18.817

要获取当前连接的设备：

```
val adapter = BluetoothAdapter.getDefaultAdapter() ?: return // null if not supported
adapter.getProfileProxy(context, object : BluetoothProfile.ServiceListener {
    override fun onServiceDisconnected(p0: Int) {
    }

    override fun onServiceConnected(profile: Int, profileProxy: BluetoothProfile) {
        val connectedDevices = profileProxy.connectedDevices
        adapter.closeProfileProxy(profile, profileProxy)
    }

}, BluetoothProfile.HEADSET) // or .A2DP, .HEALTH, etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:30:58.977

我认为 getBondedDevices() 会帮助你:)

```
Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
// If there are paired devices
if (pairedDevices.size() > 0) {
// Loop through paired devices
for (BluetoothDevice device : pairedDevices) {
    // Add the name and address to an array adapter to show in a ListView
    mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
}
} 
```

谢谢 ：）

# google-closure-compiler - 谷歌关闭效率

> ID：10018961
> 
> 赞同：0
> 
> 时间：2012-04-04T20:44:31.527
> 
> 标签：google-closure-compiler

我有一个通过 Google Closure 编译器运行的 JavaScript 文件，它将名称`on`更改为`za`，从长度的角度来看，这显然不是更有效。实际上，是否有某种原因它更有效（可能是因为使用的字母），还是只是几个随机字母？

例如，我可以想象它`za`可能比Gzip 压缩`on`时更可压缩，但很有可能它只是几个随机字母。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:17:39.827

在玩弄了一些[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)之后，编译器似乎只是开始重命名变量而不管它们以前的名称。它停留在'a'并通过'b'等......它似乎并不关心变量名的当前长度，但它会确保整体大小与以前相同或更小。在某些情况下，如果您使用高级优化设置，变量可能会从代码中重构出来。

通过让编译器处理变量的命名，可以确保它们之间没有冲突。如果它试图保留您现有的变量名称，则必须单独跟踪它并维护一个列表以进行比较。

缩小代码的另一个好处是混淆你的代码库。当然，如果他们真的想的话，有人可以弄清楚，但是通过使变量名编程化，就很难弄清楚其含义。

如果您真的想通过组合和缩小的代码进行调试，我建议您查看 Google Chrome Canary 的源地图功能[http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:47:39.643

> 是否有某种原因，它实际上更有效（可能是因为使用的字母）

不。

> 还是只是几个随机字母？

差不多。AFAIK、Closure Compiler（和其他 JS 压缩器）系统地重命名变量，目标是总体上使用更少的字符，而不查看它们已经命名的内容。

# php - Heroku 创建图像

> ID：10018975
> 
> 赞同：0
> 
> 时间：2012-04-04T20:45:34.137
> 
> 标签：php, heroku, facebook-apps, facebook-app-requests

我使用 php 和 heroku 为我的 facebook 应用程序创建了一些图像，但是没有显示图像，只显示了损坏图像的图片。我使用来自 php 教程网站的示例代码。

```
<?php
// Create a 100*30 image
$im = imagecreate(100, 30);

// White background and blue text
$bg = imagecolorallocate($im, 255, 255, 255);
$textcolor = imagecolorallocate($im, 0, 0, 255);

// Write the string at the top left
imagestring($im, 5, 0, 0, 'Hello world!', $textcolor);

// Output the image
header('Content-type: image/png');

imagepng($im);
imagedestroy($im);
?> 
```

代码位于 /src/texttopic.php Heroku 日志中没有显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:53:22.647

像这样调用图像：

```
<img src="/src/texttopic.php" height="30" width="30"> 
```

相应地设置图像高度/宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:55:22.213

请记住，使用 heroku，如果您有 2 个或更多 web dyno 正在运行，则图像创建可能会在一个 dyno 上进行，但是当您请求图像时，您可能会调用另一个没有该图像的 dyno。

# jquery - 使用 dom_id 通过 jquery .remove() 删除表行

> ID：10018977
> 
> 赞同：1
> 
> 时间：2012-04-04T20:45:41.743
> 
> 标签：jquery, ruby-on-rails

我有以下代码来为一组产品生成一个列出品牌/型号/子型号/样式的表格。单击销毁按钮时，我想从表中删除整行，但我不知道如何使用 dom_id 和 jquery 的 .remove()

到目前为止，我已经尝试了一些变化`$('#<%= dom_id(@brand) %>').remove();`，但没有成功。谢谢！

```
<div class = "span8">
<table class="table table-striped" id="devices">
  <thead>
    <tr>
      <th>Brand</th>
      <th>Model</th>
      <th>Submodel</th>
      <th>Style</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @brands.each do |brand| %>
      <tr>
        <td><%= link_to brand.name, brand_path(brand) %></td>
        <% @model1 = Model.find_by_brand_id(brand.id) %>
        <td><%= @model1.name %></td>
        <% @submodel1 = Submodel.find_by_model_id(@model1.id) %>
        <td><%= @submodel1.name %></td>
        <% @style1 = Style.find_by_submodel_id(@submodel1.id) %>
        <td><%= @style1.name %></td>
        <td style = "border:none;">
          <%= link_to 'Edit', edit_brand_path(brand), :class => 'btn btn-mini' %>
          <%= link_to 'Destroy', brand_path(brand), :method => :delete, :remote=>true, :confirm => 'Are you sure?', :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
    <% end %>

  </tbody>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:49:54.677

该`$('#blah')`语法表示一个 ID 选择器，它根据其`id`属性选择一个元素。从您提供的代码中，您的表格行（`<tr>`元素）都没有`id`属性，所以我不确定您期望发生什么。我怀疑你想要的是：

```
<tr id="<%= dom_id(@brand) %>"> 
```

然后`$('#<%= dom_id(@brand) %>').remove();`应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:49:20.447

我假设销毁按钮位于 tr 内，然后您可以执行以下操作，

```
//$(this) is destroy button assuming it is inside the same tr
$(this).closest('tr').remove(); 
```

# sql-server-2008 - SP 作为计算列规范？

> ID：10018983
> 
> 赞同：0
> 
> 时间：2012-04-04T20:46:10.403
> 
> 标签：sql-server-2008

我有以下SP

```
create procedure dbo.i114_get_next_oid
as
begin
DECLARE @id as integer
DECLARE @num_ids as integer
EXEC dbo.i144_get_ids 2, 1, @id output, @num_ids output
SELECT  @id as N'@base_id'
end
go 
```

它通过调用为 SQL 插入拉取应用程序管理的 UID

```
exec dbo.i114_get_next_oid 
```

我们的应用程序需求有所增长，我想知道如何使用 'exec dbo.i114_get_next_oid' 作为计算列规范？还是一种约束？对此挠头。谢谢！

这是表模式

```
CREATE TABLE [dbo].[TBL_VITAL_EVENTS](
    [Location_ID] [uniqueidentifier] NOT NULL,
    [Event_ID] [uniqueidentifier] NOT NULL,
    [OBJECTID] [uniqueidentifier] NULL,
 CONSTRAINT [PK_TBL_VITAL_EVENTS] PRIMARY KEY CLUSTERED 
(
    [Event_ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[TBL_VITAL_EVENTS]  WITH CHECK ADD  CONSTRAINT [FK_TBL_VITAL_EVENTS_GRSM_VITAL_SIGNS_PLOTS] FOREIGN KEY([Location_ID])
REFERENCES [dbo].[GRSM_VITAL_SIGNS_PLOTS] ([Location_ID])
GO

ALTER TABLE [dbo].[TBL_VITAL_EVENTS] CHECK CONSTRAINT [FK_TBL_VITAL_EVENTS_GRSM_VITAL_SIGNS_PLOTS]
GO

ALTER TABLE [dbo].[TBL_VITAL_EVENTS] ADD  CONSTRAINT [DF_TBL_VITAL_EVENTS_Event_ID]  DEFAULT (newsequentialid()) FOR [Event_ID]
GO 
```

目前，应用程序 (GIS) 通过在应用程序中硬编码的 C# 填充 OBJECTID 字段。我们需要绕过这个逻辑，因为我们在插入的数据上执行一些额外的操作，同时它驻留在添加表中，然后再插入到业务表中。因此，我们现在的要求是使用 SP 或其他方法作为触发器或计算列规范，以使用下一个 OID 顺序填充 OID 字段。下一个 OID 由函数“dbo.i144_get_ids”管理，不幸的是，由于应用程序的体系结构，我们无法在插入时不使用该 SP。这来自此处的供应商文档：http: [//help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#/in_SQL_Server/006z00000017000000/](http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#/in_SQL_Server/006z00000017000000/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:51:27.153

您可以使用`CROSS APPLY`. 您没有提及您的表格是什么样子或您对此的查询，所以这是一个场景。如果您可以将您的 SP 改写为 TVF，或者只使用该函数而不是 SP，您可以使用：

```
SELECT t.<fields>, fun.UID
FROM MyTable t
CROSS APPLY dbo.MyFunction(t.Inputfield, t.inputfield2) as Fun 
```

# css - 为什么 jQuery 图标不与 text-align CSS 属性对齐？

> ID：10018986
> 
> 赞同：1
> 
> 时间：2012-04-04T20:46:24.337
> 
> 标签：css, jquery-ui

我正在使用一些 jQuery UI 图标作为表格中的列标题。跨度没有根据文本对齐属性对齐，我无法找到合理的解决方法。

我已经尝试同时使用`text-align`CSS 中的属性和`align`属性，`th`并且图标跨度不会居中。相反，它保持左对齐。

**HTML**

```
<th align="center" scope="col" style="width:100px;"><a href="javascript:__doPostBack('RuleGrid','Sort$5')"><span class="ui-state-default ui-icon ui-icon-locked"></span></a></th> 
```

**CSS**

```
th
{
    text-align:center;
}​ 
```

我有一个[jsFiddle](http://jsfiddle.net/2NBrd/)来描述这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:54:36.067

这似乎只是 IE 中的一个问题，chrome 和 firefox 正确呈现了它。您可以删除 span 标签，然后将类放在 a 标签上。我刚刚添加了样式“margin：0 auto”，它解决了 IE 中的问题。

干杯。

```
<th scope="col" align="center" style="width:100px;">
    <a href="javascript:__doPostBack('RuleGrid','Sort$5')" class="ui-state-default ui-icon ui-icon-locked" style="margin:0 auto"/>
</th> 
```

# java - 设计带有/不带有特定类实现的接口

> ID：10018988
> 
> 赞同：0
> 
> 时间：2012-04-04T20:46:31.213
> 
> 标签：java, spring-mvc

好的，我正在设计一个网络应用程序。所以我要创建控制器，首先我用这个方法签名创建接口。

```
public String user(String code); 
```

在实现中我使用的是spring，所以为了返回值，需要传递第二个参数来存储值，就像这样。

```
public String user(Model model, String code){
      String name = userservice.findUserName(code);

      model.addAttribute(name);
      return "userView";
} 
```

好的，所以你可以看到有一个问题，因为我的实现类没有覆盖接口中的方法，但是我不想在接口项目中添加参数和依赖项，因为我希望接口（设计）是技术中性的。

希望有人能给我一些建议。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:31:41.700

我建议您查看一些[示例 Spring MVC 应用程序](https://github.com/rstoyanchev/spring-mvc-31-demo)以了解编码约定等。

控制器不倾向于被写入接口 - 我从来没有见过它。你希望你的服务和 DAO 类是。

因此，用户方法的代码看起来像经典的服务层，尽管命名约定通常更像`getUser`or `getUserForId`。因此，如果您从 Controller 调用它，那么您不必担心`Model`arg，如下所示：

```
model.addAttribute("user", userService.getUserForId(code)); 
```

其中`userService`定义为：

```
@Inject
UserService userService; 
```

并且`UserService`是接口，`userService`并由 Spring/IoC 容器自动注入实现。

# css - 网页设计时何时使用图像以及何时使用背景图像？

> ID：10018989
> 
> 赞同：1
> 
> 时间：2012-04-04T20:46:37.673
> 
> 标签：css, html

我是一个业余网页设计师，使用 html 和 CSS 来测试各种网站设计。然而，总是让我感到困惑的一件事是决定使用图像作为标签还是通过 css 或 html 将其用作背景。他们对此有什么经验法则吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:58:55.847

正如其中一个答案指出的那样，您需要区分内容和实际页面样式。

让我详细说明一下。background-image 属性的用途是定义页面某个块的外观，无论是 a`div`还是 a `p`，关键是要定义页面的外观。在定义页面设计的上下文中的图像（例如图案、徽标、渐变等）几乎不应该采用明确的`img`标签形式。该标签用于定义内容图像，与手头的新闻相关联的东西——这是你试图描绘的故事所独有的东西。

区分这两个概念非常重要，因为它可以让您考虑一个独立于底层内容的良好设计 - 应该是这样。统一、优雅和精确。

所以，在审查中。用于`background-image`定义构成您网站的各种块的外观，并在您想要添加特定于上下文的视觉内容时使用*经典标签。* `img`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T20:48:18.453

问题是内容或样式是在图像上画线的好地方。

这张图片会被重复使用吗？等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:08:18.720

您是否希望图像成为文档流的一部分，向搜索引擎提供描述（替代文本）？使用 img 标签。

如果您想在图像上放置其他元素（如文本、版权信息），请使用背景图像。您甚至可以通过在背景图像上放置具有透明度的图像来组合它以获得一些效果。

此外，存在许多使用背景图像定位来获得性能优势的示例（“精灵”）。

# facebook - Facebook OAUTH2 重定向 URL 的用途是什么？

> ID：10018991
> 
> 赞同：0
> 
> 时间：2012-04-04T20:46:41.533
> 
> 标签：facebook, oauth-2.0, facebook-oauth

我目前正在重定向到这个：

```
https://graph.facebook.com/oauth/authorize?client_id=305384546164461&redirect_uri=http://www.eeisi.com/bridge/auth.php&type=web_server&display=page&scope=publish_stream,%20user_about_me,%20user_likes,%20email 
```

我不知道为什么需要为我的画布页面重定向到我的应用程序设置中指定的 URL。这背后的目的似乎从未被提及。

所以我重定向到那里，它要求允许使用该应用程序......太好了......

然后它转到另一个对话框页面，并要求额外的权限......很好......

然后...它转到那个重定向 URL，然后我应该怎么做？

我是否应该创建某种登录页面来重定向回 facebook 上的画布页面？

像...

[http://www.eeisi.com/bridge/auth.php](http://www.eeisi.com/bridge/auth.php) <--- 登陆页面

那么我是否应该采用生成的身份验证代码：

```
http://www.eeisi.com/bridge/auth.php?code=(long-fricking-string) 
```

并将其传递回画布应用程序页面，像这样？

```
http://aps.facebook.com/eebridge/?code=(long-fricking-string) 
```

？？？

整件事就是这样融合在一起的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T04:44:06.953

您需要将代码查询参数交换为访问令牌。

请参阅此处的第 4 步：http: [//developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

您将被重定向回您的应用程序，因为您的应用程序应该知道应用程序机密 - 您需要将代码交换为 access_token。

# android - @InjectView 字段何时注入？

> ID：10018994
> 
> 赞同：5
> 
> 时间：2012-04-04T20:46:58.170
> 
> 标签：android, roboguice

究竟什么时候`Activity`注释`@InjectView`或`@InjectResource`注入的字段？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T20:49:51.117

根据Roboguice 网站上的[一个简单示例](http://code.google.com/p/roboguice/wiki/SimpleExample)，成员由'方法`super.onCreate()`调用的时间填充：`Activity``onCreate()`

```
class RoboWay extends RoboActivity { 
    @InjectView(R.id.name)             TextView name; 
    @InjectView(R.id.thumbnail)        ImageView thumbnail; 
    @InjectResource(R.drawable.icon)   Drawable icon; 
    @InjectResource(R.string.app_name) String myName; 
    @Inject                            LocationManager loc; 

    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main);
        name.setText( "Hello, " + myName ); 
    } 
} 
```

# ravendb - RavenDb Config 和 DocumentStore 抽象？

> ID：10018996
> 
> 赞同：3
> 
> 时间：2012-04-04T20:47:00.387
> 
> 标签：ravendb

我在多个项目和解决方案中使用 RavenDb 来访问三个不同的数据库，这些数据库都是同一产品的一部分。例如，我有多个 MVC 项目，它们从以“web”为中心的数据库和“后端”数据库中获取用户信息和一些数据，使用“-”作为 id 覆盖（但我只需要在“网络”数据库）。然后我有另一个由服务（以及 MVC 项目）使用的“后端”数据库。最后是我由另一组服务使用的第三个临时/临时数据库来构建后端数据库。当然，所有这些都可以从不同的类库甚至控制台测试、种子和集成测试应用程序中访问。

管理所有这些变得相当麻烦。每次我创建一个访问数据库的新控制台应用程序或类库时，我都必须为每个项目设置配置和 raven 包，确保构建索引等......更不用说在所有 nuget 更新上运行更新，或者就我而言，安装新的不稳定版本的服务器/客户端二进制文件。

有没有更简单的方法来管理这个？

我试图将 DocumentStore 创建和初始化以及索引创建抽象到它自己的项目中并引用它。但是其他项目必须从包目录中手动添加 newtonsoft.json（和 nlog）。

同样，当我尝试将 DocumentStore 抽象为具有静态属性的类时，我得到了以下信息： StackTrace of un-disposed document store Recorded。请确保在测试中处理任何文档存储，以避免测试中的竞争条件。

有人对处理这些问题有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-04T21:14:57.633

我不认为手动添加引用是一个大问题，但是您也可以添加实际的 nuget 引用。请注意，DocumentStore 未处理错误仅在不稳定（调试版本）中发生，并且不会在发布版本中发生。